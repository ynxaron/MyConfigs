"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[94540],{406799:(e,t,o)=>{o.d(t,{P:()=>y,f5:()=>S,nr:()=>_,qR:()=>w,uq:()=>k,y1:()=>b});var n=()=>o(431595),i=()=>o(578292),r=()=>o(530980),a=()=>o(568017),s=()=>o(855741),l=()=>o(497065),c=()=>o(102182),d=()=>o(369637),u=()=>o(527278),p=()=>o(735501),m=()=>o(791642),f=()=>o(473147),g=()=>o(876822),v=()=>o(749826),h=()=>o(513404);function _(e){return!!(e instanceof n().hm&&e.clientData&&"invalid_destination_imprinted_block"===e.clientData.type)}function b(e){h().Z.setState({isOpen:!0,content:e.product})}function y(){h().Z.setState({isOpen:!1,content:null})}function S(e,t){if(s().x.isSuccess(t)&&t.value.restrictedContent.length>0)for(const o of t.value.restrictedContent)w(e,{product:o})}async function w(e,t){var o;const n=t.product,r=null==n?void 0:n.id,s=e.ThemeModeStore.state,v=(0,a().gh)({theme:s}),h=e.device.isMobile,_=null===(o=g().default.state.currentSpaceStore)||void 0===o?void 0:o.id;if(h||!r)return void c().oV({label:u().Z.getIntl().formatMessage({defaultMessage:"The copied content belonged to a protected template. It has been removed, as the creator has limited redistribution.",id:"accessLocking.restrictedContent.snackbar.title"}),position:"bottom",style:{maxWidth:"calc(100% - 40px)",justifyContent:"center",textAlign:"center"}});const b=await(0,m().l3)({environment:e,locale:(0,i().E2)(u().Z.getIntl()),id:r,currentSpaceId:_}),y=null==b?void 0:b.slug;d().MV({id:r,title:u().Z.getIntl().formatMessage({defaultMessage:"A piece of content that was copied belonged to a template",id:"accessLocking.restrictedContent.callout.title"}),message:u().Z.getIntl().formatMessage({defaultMessage:"Check out the original template listing in Marketplace",id:"accessLocking.restrictedContent.callout.message"}),presentationType:"persistent",icon:()=>(0,p().t)({color:v.accentColors.red[500],height:16,width:16}),actions:h?void 0:{primary:{title:u().Z.getIntl().formatMessage({defaultMessage:"View template",id:"accessLocking.restrictedContent.callout.action.title"}),onAction:()=>function(t){if(d().Xd(r),t){const o={name:"marketplace"};l().c4({environment:e,url:(0,f().aD)(t,o)})}}(y)}}})}function k(e){const{sourceSpaceId:t,targetSpaceId:o,sourceBlockSubtree:n}=e;if(!v().default.checkGate({gateName:"enable_template_access_restriction"}))return!1;if(!(o!==t))return!1;const i=function(e){for(const{model:t}of e)if(t instanceof r().yJh&&t.getIsImprintableBlock()&&t.getFormat().installation_imprint)return!0;return!1}(n);return i}},513404:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{isOpen:!1,content:null}}}const i=new n},159357:(e,t,o)=>{o.d(t,{J4:()=>k,Lf:()=>S,Sw:()=>C,Tr:()=>R,Vm:()=>I,b4:()=>x,rz:()=>w,te:()=>A});o(241792),o(667294);var n=()=>o(568017),i=()=>o(513670),r=()=>o(421654),a=()=>o(223637),s=()=>o(940417),l=()=>o(269299),c=()=>o(406496),d=()=>o(388284),u=()=>o(421797),p=()=>o(527511),m=()=>o(852465),f=()=>o(889765),g=()=>o(749826),v=()=>o(872430),h=()=>o(826955),_=()=>o(38562),b=o(785893);const y=(0,o(788860).vU)({lastUsedHighlightTitle:{id:"action.lastUsedHighlight.title",defaultMessage:"Last used"},lastUsedHighlightKeywords:{id:"action.lastUsedHighlight.fuzzySearchKeywords",defaultMessage:"Color last used"},highlightName:{id:"action.highlight.name",defaultMessage:"Highlight"}});function S(e){const{itemRenderer:t}=e;return(0,_().$J)({key:"text color actions",title:_().RE.colorSection,render:e=>(0,b.jsx)(d().Z,{...e}),actions:n().CY.map((e=>M({blockColor:e,itemRenderer:t})))})}const w=S({itemRenderer:e=>{const{color:t,overrideDisplayName:o,selected:n}=e;return(0,b.jsx)(c().ZP,{...e.menuListItemProps,color:t,overrideDisplayName:o,selected:n})}});function k(e){const{itemRenderer:t}=e;return(0,_().$J)({key:"background color actions",title:_().RE.backgroundSection,overrideSearchTitle:_().RE.backgroundSectionKeywords,render:e=>(0,b.jsx)(d().Z,{...e}),actions:[...n()._K.map((e=>M({blockColor:e,itemRenderer:t})))]})}const I=k({itemRenderer:e=>{const{color:t,overrideDisplayName:o,selected:n}=e;return(0,b.jsx)(c().ZP,{...e.menuListItemProps,color:t,overrideDisplayName:o,selected:n})}}),C=(0,_().$J)({key:"background color selection actions",title:_().RE.backgroundSection,overrideSearchTitle:_().RE.backgroundSectionKeywords,render:e=>(0,b.jsx)(d().Z,{...e}),actions:[...n()._K.map((e=>P(e)))]}),x=(0,_().$J)({key:"text color selection actions",title:_().RE.colorSection,render:e=>(0,b.jsx)(d().Z,{...e}),actions:n().CY.map((e=>P(e)))});function T(){return[u().J5S,u().ffD(u().OPg),f().c,u().YBx,u().ffD(u().O4s),u().Vc5]}function M(e){const{blockColor:t,overrideKey:o,overrideDisplayName:c,itemRenderer:d}=e,u=c||(0,p().qf)(t),f=(0,_().cN)({key:`color ${o||t}`,displayName:u,analyticsName:u.defaultMessage,analyticsActionType:"change_block_color",fuzzySearchKeywords:(0,_().CJ)(t),validators:T(),action:e=>{let{blocks:o,environment:c}=e;const d=g().default.checkGate({gateName:"updated_color_picker"});a().M(t,!d),l().createAndCommit({userAction:"actionRegistry.createBlockColorAction",environment:c,canUndo:!0,perform:e=>{if(1===o.length&&o[0].isFirstBlockInCalloutV2Block()){const e=o[0].getParentStore();e instanceof h().G&&(o=[e])}(0,n().jS)(t)||(s().QE({environment:c,annotationKey:"hb",blocks:o,transaction:e}),s().QE({environment:c,annotationKey:"hf",blocks:o,transaction:e}),r().FH({stores:i().VS(o,(e=>(0,m().MI)({blockStore:e,transclusionReferences:"omit",childPages:"omit"}))),update:{block_color:void 0},transaction:e})),r().FH({stores:o,update:{block_color:t},transaction:e})}})},closeParentMenu:!0,render:(e,o)=>{let{blocks:n}=o;const i=t===(n.length>0?n[0].getFormat().block_color:"default");return d({menuListItemProps:e,color:t,selected:i,overrideDisplayName:f.displayName})},nativeImageReference:e=>{let{environment:n}=e;return(0,_().q7)(n,t,o)}});return f}function P(e,t,n){const i=n||(0,p().qf)(e),r=(0,_().cN)({key:`color ${t||e}`,displayName:i,analyticsName:i.defaultMessage,fuzzySearchKeywords:(0,_().CJ)(e),validators:T(),action:async t=>{let{blocks:n,environment:i}=t;var r;o(233936).c7(i)&&await(null===(r=i.NativeMobileActionBarStore)||void 0===r?void 0:r.clearNativeActionMenuAndRestoreSelectionIfNecessary());const l=g().default.checkGate({gateName:"updated_color_picker"});a().M(e,!l),s().aS({environment:i,annotation:["h",e]}),o(491927).mt(i,{action:"h",color:e})},closeParentMenu:!0,render:t=>(0,b.jsx)(c().ZP,{...t,color:e,overrideDisplayName:r.displayName}),nativeImageReference:o=>{let{environment:n}=o;return(0,_().q7)(n,e,t)}});return r}const A=(0,_().$J)({key:"toggle last highlight",title:y.lastUsedHighlightTitle,overrideSearchTitle:y.lastUsedHighlightKeywords,render:e=>(0,b.jsx)(d().Z,{...e}),actions:[(0,_().cs)({key:"toggle highlight action",displayName:y.highlightName,analyticsName:y.highlightName.defaultMessage,validators:T(),shortcuts:["toggleHighlight"],closeParentMenu:!0,action:e=>{let{environment:t,blocks:o}=e;const n=v().Z.getMostRecentlyUsedColor();l().createAndCommit({userAction:"actionRegistry.toggleLastUsedHighlight",environment:t,canUndo:!0,perform:e=>{const t=i().yW(o.map((e=>{const t=e.getFormat();return t&&t.block_color===n})))?void 0:n;r().FH({stores:o,update:{block_color:t},transaction:e})}})},render:e=>{const t=v().Z.getMostRecentlyUsedColor();return(0,b.jsx)(c().ZP,{...e,color:t,shortcuts:["toggleHighlight"]})}})]}),R=(0,_().MV)({key:"color section",displayName:_().RE.colorName,analyticsName:_().RE.colorName.defaultMessage,svg:o(765516).U,validators:T(),subActions:()=>[A,w,I]})},787953:(e,t,o)=>{o.d(t,{Bt:()=>_,VJ:()=>h,UI:()=>v});var n=()=>o(156642),i=()=>o(604068),r=()=>o(267191),a=()=>o(78449),s=()=>o(421797),l=()=>o(191003),c=()=>o(550054),d=(o(667294),o(785893));const u=(0,o(827282).IU)("alt",{viewBox:"0 0 16 16",svg:(0,d.jsx)("path",{d:"M13.367 11.659c-.427 0-.678-.26-.678-.706v-4.74h-1.34c-.367 0-.615-.211-.615-.561 0-.351.243-.562.616-.562h4.04c.368 0 .61.211.61.562 0 .35-.247.561-.61.561h-1.344v4.74c0 .445-.252.706-.679.706zm-5.896-.085c-.426 0-.678-.261-.678-.71V5.71c0-.45.252-.71.678-.71.427 0 .679.26.679.71v4.74h2.3c.369 0 .616.212.616.562 0 .35-.243.562-.616.562H7.471zm-6.784.085c-.422 0-.687-.247-.687-.638 0-.112.031-.265.09-.431l1.77-4.822C2.05 5.243 2.368 5 2.88 5c.53 0 .845.234 1.038.764l1.78 4.826c.062.175.085.296.085.43 0 .374-.283.639-.679.639-.382 0-.584-.175-.705-.598l-.342-1.024h-2.34l-.342 1.01c-.126.432-.328.612-.688.612zm1.326-2.674h1.73L2.885 6.33h-.032l-.84 2.655z"})});var p=()=>o(472753),m=()=>o(127519),f=()=>o(38562);const g=(0,o(788860).vU)({commentName:{id:"action.comment.name",defaultMessage:"Comment"},captionName:{id:"action.caption.name",defaultMessage:"Caption"},altTextName:{id:"action.altText.name",defaultMessage:"Alt text"},reactName:{id:"action.react.name",defaultMessage:"React"}}),v=(0,f().cs)({key:"comment",displayName:g.commentName,analyticsName:g.commentName.defaultMessage,svg:o(918302).s,hideFromSlashActionMenu:!0,validators:[a().c_],shortcuts:["comment"],closeParentMenu:!0,action:e=>{let{blocks:t,environment:a,lazyDependencies:{formulasModule:s}}=e;const d=t[0],u=null==d?void 0:d.getModel();if(d){const e="editing"===m().default.state.mode&&m().default.state.multiSelection;if(e&&!(0,l().iG)(e)&&(e.start.store.id===d.id||null!=u&&u.isType("table")&&"properties"===e.start.store.path[0]&&e.start.store.path[1]&&(d.getFormatStore().getKeyStore("table_block_column_order").getValue()??[]).includes(String(e.start.store.path[1]))))i().WD({environment:a,blockStore:d,multiSelection:e,formulasModule:s});else if(d.isDefined()&&null!=u&&u.isType(n().eh)){const e=d.getTitleStore(),t=e&&(0,c().x0)(e);if(e&&t&&t.endIndex>0){const o={startIndex:0,endIndex:t.endIndex};i().WD({environment:a,blockStore:d,multiSelection:(0,l().TD)({store:e,selection:o}),rect:p().R.getRect(d),formulasModule:s})}}else if(d.getAssociatedCollectionStore()){var f;const e=o(852465).Xp(d,{recursivelyLoadAllDiscussions:!1}),t=o(983993).Z.findBlockPropertyValue(d,"title"),n=null==t||null===(f=t.getNode())||void 0===f?void 0:f.getBoundingClientRect();e>0?o(799454).Ib({environment:a,blockStore:d,shouldFocusDiscussion:!0,analyticsFrom:"db_page_comments",rect:n,recursivelyLoadAllDiscussions:!1}):(0,r().y)({environment:a,blockStore:d,rect:n})}else(0,r().y)({environment:a,blockStore:d})}}}),h=(0,f().cs)({key:"caption",displayName:g.captionName,analyticsName:g.captionName.defaultMessage,svg:o(765552).o,validators:[s().J5S,s().ffD(s().OPg),s().U7o,s().W2t,s().or([s().l$5("source"),s().l$5("link"),s().P99("code")])],shortcuts:["caption"],closeParentMenu:!0,action:e=>o(453999).VJ(e)}),_=(0,f().cN)({key:"alt text",displayName:g.altTextName,analyticsName:g.altTextName.defaultMessage,svg:u,validators:[s().U7o,s().P99(n().Ti.image),s().l$5("source"),s().or([s().l$5("alt_text"),s().xDy([s().J5S,s().ffD(s().OPg)])])],closeParentMenu:!0,action:e=>{let{blocks:t,environment:n}=e;if(t.length>0)return o(198046).b({blockStore:t[0],entrypoint:"block_menu",environment:n})}});(0,f().cs)({key:"react",displayName:g.reactName,analyticsName:g.reactName.defaultMessage,svg:o(954593).V,validators:[s().J5S,s().ffD(s().OPg),o(889765).c,s().ffD(s().DFt),a().VS,s().or([s().U7o,o(856929).K]),s().ffD(s().OXD),s().QLY("block_reactions")],shortcuts:["react"],closeParentMenu:!0,action:e=>{let{blocks:t,environment:r,lazyDependencies:{formulasModule:a}}=e;const s=t[0],d=null==s?void 0:s.getModel();if(s){const e="editing"===m().default.state.mode&&m().default.state.multiSelection;if(e&&!(0,l().iG)(e)&&(e.start.store.id===s.id||null!=d&&d.isType("table")&&"properties"===e.start.store.path[0]&&e.start.store.path[1]&&(s.getFormatStore().getKeyStore("table_block_column_order").getValue()??[]).includes(String(e.start.store.path[1]))))i().Bf({environment:r,blockStore:s,multiSelection:e,formulasModule:a});else if(s.isDefined()&&null!=d&&d.isType(n().eh)){const e=s.getTitleStore(),t=e&&(0,c().x0)(e);if(e&&t&&t.endIndex>0){const o={startIndex:0,endIndex:t.endIndex};i().Bf({environment:r,blockStore:s,multiSelection:(0,l().TD)({store:e,selection:o}),rect:p().R.getRect(s),formulasModule:a})}}else(0,o(825270).t)({environment:r,blockStore:s,formulasModule:a})}}})},638700:(e,t,o)=>{o.d(t,{Pz:()=>s,fF:()=>i,vE:()=>r,vW:()=>l});var n=()=>o(421797);const i=[function(e){return(0,o(982855).GD)(e.publicEditMode)},n().J5S,n().ffD(n().ypk)],r=[...i,n().ffD(n().OPg),n().ffD(n().OXD)];function a(e){return!o(524434).KR.isAssistantInWriterEnabled()}const s=[...r,a],l=[...r,e=>!a()]},177837:(e,t,o)=>{o.d(t,{NY:()=>m,OY:()=>f,yz:()=>g});o(267602),o(228244),o(667294);var n=()=>o(383507),i=()=>o(524434),r=()=>o(804217),a=()=>o(749826),s=()=>o(638700),l=()=>o(38562),c=o(785893);const d=[...s().vE,e=>{const{blocks:t}=e;return t.some((e=>{const t=e.getType();return void 0!==t&&(!!(i().KR.isAttachmentUploadEnabledForUser()||"pdf"!==t&&"file"!==t&&"image"!==t)&&o(31772).d[t])}))}],u=[...s().vE,e=>i().KR.isXMLAssistantEnabled()],p=(0,o(788860).vU)({blockSelectionCompletionName:{id:"action.blockSelectionCompletionName.name",defaultMessage:"Ask AI"},pageCompletionName:{id:"action.pageCompletionName.name",defaultMessage:"Notion AI"},executeFillAiSectionName:{id:"action.executeAiSection.name",defaultMessage:"Fill with AI"},editAiSectionName:{id:"action.editAiSection.name",defaultMessage:"Edit AI autofill"},writeWithAiName:{id:"action.writeWithAI.name",defaultMessage:"Write with AI"}}),m=(0,l().cs)({key:"block selection completion",displayName:p.blockSelectionCompletionName,analyticsName:p.blockSelectionCompletionName.defaultMessage,svg:n().Q,shortcuts:["commandJ"],validators:d,hideFromSlashActionMenu:!0,closeParentMenu:!0,action:async(e,t)=>{const{environment:n,blocks:i}=e,r=await Promise.resolve().then(o.bind(o,650996)),a=await r.assistantDependency.load();if(a.assistantActions.isSelectionValidAttachmentSelection(i))return void a.assistantActions.initializeSessionFromAttachmentBlockSelection({environment:n,selectedAttachmentStore:i[0]});const{aiDependency:s}=await Promise.resolve().then(o.bind(o,106502));(await s.load()).completionInitialPromptActions.toggleInitialPrompt({from:"block_action_menu",environment:n})},disabled:()=>!r().default.state.online&&a().default.checkGate({gateName:"download_for_offline"}),renderTooltip:()=>o(527278).Z.formatMessage(l().RE.unavailableOfflineTooltip),disableTooltip:()=>!(!r().default.state.online&&a().default.checkGate({gateName:"download_for_offline"}))}),f=((0,l().cN)({key:"page completion",displayName:p.pageCompletionName,analyticsName:p.pageCompletionName.defaultMessage,svg:e=>(0,c.jsx)("img",{style:{borderRadius:"100%",background:"white",border:"1px solid rgba(0, 0, 0, 0.09)",...e,width:"22px",height:"22px",marginLeft:"-3px",marginRight:"-3px",overflowX:"visible"},src:o(168866)}),validators:u,closeParentMenu:!0,action:async(e,t)=>{const{environment:n}=e,{assistantDependency:i}=await Promise.resolve().then(o.bind(o,650996));(await i.load()).assistantMenuActions.openAssistantRightHandSideMenu({environment:n,from:"sidebar"})}}),(0,l().cs)({key:"ai prompt menu",analyticsName:"ai_prompt_menu",displayName:void 0,validators:[...s().vE,o(421797).FSO],shortcuts:["commandJ"],closeParentMenu:!0,action:async e=>{let{environment:t}=e;const{aiDependency:n}=await Promise.resolve().then(o.bind(o,106502));(await n.load()).completionInitialPromptActions.toggleInitialPrompt({from:"keyboard_shortcut",environment:t})}})),g=(0,l().cs)({key:"write with ai",analyticsName:"write with AI",displayName:p.writeWithAiName,validators:s().vW,shortcuts:["commandJ"],closeParentMenu:!0,svg:e=>(0,n().Q)(e),action:async e=>{let{environment:t}=e;const{aiDependency:n}=await Promise.resolve().then(o.bind(o,106502));(await n.load()).completionInitialPromptActions.toggleInitialPrompt({from:"slash_menu",environment:t})}})},182008:(e,t,o)=>{o.d(t,{C8:()=>c,Hs:()=>l,Kk:()=>s});var n=()=>o(799891),i=()=>o(421797),r=()=>o(599631),a=()=>o(38562);const s=(0,a().cN)({key:"copy link to page",displayName:a().RE.copyLinkNavigableTypeName,analyticsName:a().RE.copyLinkNavigableTypeName.defaultMessage,svg:r().N,validators:[i().jlf,i().U7o,i().DFt,i().ffD(i().q4$),i().ffD(i().uY7)],closeParentMenu:!0,action:(e,t)=>{const{lazyDependencies:{clipboardActions:o}}=e;o?o.copyLinkToBlock({...e,event:t}):n().log({data:{miscDataToConvertToString:{actionKey:"copy link to page"}},from:"copyActionRegistry",level:"info",type:"lazyDependencies:missingClipboardActions"})}}),l=(0,a().cs)({key:"copy link to block",displayName:a().RE.copyLinkName,analyticsName:a().RE.copyLinkName.defaultMessage,svg:r().N,shortcuts:["copyLinkToBlock"],validators:[i().jlf,i().U7o,i().ffD(i().DFt),i().ffD(i().q4$),i().ffD(i().tz$),i().ffD(i().SYI)],closeParentMenu:!0,action:(e,t)=>{const{lazyDependencies:{clipboardActions:o}}=e;o?o.copyLinkToBlock({...e,event:t}):n().log({data:{miscDataToConvertToString:{actionKey:"copy link to block"}},from:"copyActionRegistry",level:"info",type:"lazyDependencies:missingClipboardActions"})}}),c=(0,a().cN)({key:"convert to link mention",displayName:a().RE.convertToLinkMentionName,analyticsName:a().RE.convertToLinkMentionName.defaultMessage,svg:o(424097).z,validators:[i().jlf,i().U7o,i().rol("bookmark")],closeParentMenu:!0,action:(e,t)=>{o(551771).$$({...e,event:t})}})},83110:(e,t,o)=>{o.d(t,{G:()=>s});o(667294);var n=()=>o(421797),i=()=>o(739479),r=()=>o(38562),a=o(785893);const s=(0,r().cs)({key:"delete block",displayName:r().RE.deleteName,analyticsName:r().RE.deleteName.defaultMessage,svg:i().y,validators:[n().or([n().xDy([n().lA5,n().MaU]),n().xDy([n().or([n().eot,n().EWv]),n().ffD(n().sRS)])]),n().or([n().J5S,n().EWv]),n().ffD(n().xDy([n().DFt,n().EWv])),n().ffD(n().OPg),n().ffD(n().Vfv),n().ffD(n().OOv),n().ffD(n().P99(o(156642).Ti.externalObjectInstancePage)),n().ffD(n().Q_M),n().vdd],shortcuts:["delete","backspace"],closeParentMenu:!0,render:(e,t,n)=>{let{styles:s}=n;return(0,a.jsx)(o(855238).Z,{...e,...s,isRed:!0,svg:i().y,title:(0,a.jsx)(o(788860)._H,{...r().RE.deleteName}),shortcut:"delete"})},action:async e=>{let{blocks:t,environment:n}=e;await o(453999).Qw({environment:n,blocks:t,shouldCheckSuggestEdit:!0})}})},142466:(e,t,o)=>{o.d(t,{gz:()=>_,j8:()=>y,NE:()=>b});o(667294);var n=o(785893);const i={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M6.75 4.5a3.25 3.25 0 1 1 6.5 0v4a3.25 3.25 0 0 1-6.5 0z"}),(0,n.jsx)("path",{d:"M5.162 10.959a.75.75 0 0 0-1.235.852 7.37 7.37 0 0 0 5.323 3.151V17H5.5a.75.75 0 0 0 0 1.5h9a.75.75 0 0 0 0-1.5h-3.75v-2.038a7.37 7.37 0 0 0 5.322-3.15.75.75 0 1 0-1.234-.853A5.87 5.87 0 0 1 10 13.5a5.87 5.87 0 0 1-4.838-2.541"})]})},r=(0,o(827282).IU)("microphoneFill",i);var a=()=>o(788860),s=()=>o(944993),l=()=>o(632775),c=()=>o(201741),d=()=>o(421797),u=()=>o(527278),p=()=>o(804217),m=()=>o(749826);const f=[function(){return(0,o(23338).d)()},d().J5S],g=[...f,d().ryx,d().Zuh,d().ffD(d().OPg)];var v=()=>o(38562);const h=(0,a().vU)({dictateName:{id:"action.dictate.name",defaultMessage:"Dictate"}}),_=(0,v().cs)({key:"dictate",displayName:h.dictateName,analyticsName:h.dictateName.defaultMessage,validators:[...g,d().ffD(d().Fxc)],shortcuts:["dictate"],closeParentMenu:!0,render:(e,t)=>{const i=c().TI.state&&c().mn.state===t.blocks[0].id,l=(0,o(568017).gh)({theme:t.environment.ThemeModeStore.state}),d=!p().default.state.online&&m().default.checkGate({gateName:"download_for_offline"});return(0,n.jsx)(o(855238).Z,{...e,title:(0,n.jsx)(a()._H,{...h.dictateName}),badge:(0,n.jsx)(s().Z,{}),svg:r,right:(0,v().Sy)(l,i),tooltipText:d?u().Z.formatMessage(v().RE.unavailableOfflineTooltip):void 0,disabled:d,disabledFeedback:d})},action:async(e,t)=>{const{environment:o}=e,n=t instanceof KeyboardEvent&&"Enter"!==t.key,{dictationActions:i}=await l().Xb.load();i.smartToggleDictation({environment:o,from:n?"shortcut":"topbar_menu"})}}),b=(0,v().cs)({key:"newPageAndDictate",analyticsName:"New page and dictate",displayName:void 0,validators:[d().ROK,d().jlf,...f,d().ffD(d().Fxc)],shortcuts:["newPageAndDictate"],closeParentMenu:!0,action:async(e,t)=>{const{environment:n}=e,i=t instanceof KeyboardEvent&&"Enter"!==t.key?"new_page_and_dictate_shortcut":"new_page_and_dictate_action",r=await(0,o(793935).quickAddPage)({environment:n,from:i});if(r){const{dictationActions:e}=await l().Xb.load();e.startDictation({environment:n,from:i,blockStore:r})}}}),y=(0,v().cs)({key:"dictate",displayName:h.dictateName,analyticsName:h.dictateName.defaultMessage,svg:o(233227).q,validators:[...g,d().j61,d().ffD(d().Fxc)],shortcuts:["dictate"],closeParentMenu:!0,badge:(0,n.jsx)(s().Z,{}),action:async(e,t)=>{const{environment:o}=e,{dictationActions:n}=await l().Xb.load();n.startDictation({environment:o,from:"block_action"})},disabled:()=>!p().default.state.online&&m().default.checkGate({gateName:"download_for_offline"}),renderTooltip:()=>u().Z.formatMessage(v().RE.unavailableOfflineTooltip),disableTooltip:()=>!(!p().default.state.online&&m().default.checkGate({gateName:"download_for_offline"}))})},717538:(e,t,o)=>{o.d(t,{MI:()=>y,UO:()=>g,fI:()=>b,m7:()=>v,nh:()=>h,o1:()=>m,vh:()=>f});o(667294);var n=()=>o(200962),i=()=>o(291338),r=()=>o(388284),a=()=>o(577041),s=()=>o(421797),l=()=>o(802600),c=()=>o(876822),d=()=>o(807230),u=()=>o(38562),p=o(785893);const m=(0,u().cs)({key:"duplicate",displayName:u().RE.duplicateName,analyticsName:u().RE.duplicateName.defaultMessage,svg:l().a,validators:[s().MaU,s().ffD(s().sRS),s().ffD(s().cWe),s().ffD(s().Q_M),s().or([s().O4s,s().ffD(s().OPg)]),s().or([s().ffD(s().plk),s().f7f]),...u().kv],shortcuts:["duplicate"],closeParentMenu:!0,action:async(e,t)=>{let{blocks:o,environment:n}=e;const i=await a().j3.selectableBlockActions.load();await i.duplicateBlocksWithMaybeConfirmation({environment:n,blocks:o,event:t})}}),f=(0,u().MV)({key:"duplicateCollection",displayName:u().RE.duplicateName,analyticsName:u().RE.duplicateName.defaultMessage,svg:l().a,width:275,validators:[s().MaU,s().ffD(s().sRS),s().ffD(s().cWe),s().or([s().O4s,s().ffD(s().OPg)]),s().xDy([s().plk,s().ffD(s().f7f)]),s().ffD(s().Jtb),...u().kv],subActions:()=>[{key:"collection duplication options",render:e=>(0,p.jsx)(r().Z,{...e}),actions:g.actions}]}),g=(0,u().$J)({key:"duplicate collection actions",title:u().RE.duplicateName,render:e=>(0,p.jsx)(r().Z,{...e}),actions:[(0,u().cs)({key:"duplicate with data",displayName:u().RE.duplicateCollectionWithDataName,analyticsName:"duplicate_with_data",validators:[s().ffD(s().Q_M),s().ffD(s().tls)],shortcuts:["duplicate"],closeParentMenu:!0,action:async(e,t)=>{let{blocks:o,environment:n}=e;const i=await a().j3.selectableBlockActions.load();await i.duplicateBlocksWithMaybeConfirmation({environment:n,blocks:o,duplicateOnlyCollectionSchema:!1,event:t})}}),(0,u().cs)({key:"duplicate schema only",displayName:u().RE.duplicateCollectionSchemaOnlyName,analyticsName:"duplicate_schema_only",validators:[s().ffD(s().tls)],shortcuts:["duplicateSchema"],closeParentMenu:!0,action:async(e,t)=>{let{blocks:o,environment:n}=e;const i=await a().j3.selectableBlockActions.load();await i.duplicateBlocksWithMaybeConfirmation({environment:n,blocks:o,duplicateOnlyCollectionSchema:!0,event:t})}})]}),v=(0,u().cs)({key:"duplicate",displayName:u().RE.duplicateName,analyticsName:u().RE.duplicateName.defaultMessage,svg:n().a,validators:[s().U7o,s().KEd,s().or([s().ffD(s().xks),s().sVB]),s().or([s().ffD(s().plk),s().f7f]),...u().kv,s().ffD(s().uY7)],shortcuts:["duplicate"],closeParentMenu:!0,action:(e,t)=>{let{blocks:o,environment:n}=e;w(o,n,{event:t})}}),h=(0,u().MV)({key:"duplicateCollection",displayName:u().RE.duplicateName,analyticsName:u().RE.duplicateName.defaultMessage,svg:l().a,width:275,validators:[s().U7o,s().KEd,s().ffD(s().Jtb),s().xDy([s().plk,s().ffD(s().f7f)]),...u().kv],subActions:()=>[{key:"collection duplication options",render:e=>(0,p.jsx)(r().Z,{...e}),actions:_.actions}]}),_=(0,u().$J)({key:"duplicate collection actions",title:u().RE.duplicateName,render:e=>(0,p.jsx)(r().Z,{...e}),actions:[(0,u().cs)({key:"duplicate with data",displayName:u().RE.duplicateCollectionWithDataName,analyticsName:"duplicate_with_data",validators:[s().ffD(s().tls)],shortcuts:["duplicate"],closeParentMenu:!0,action:e=>{let{blocks:t,environment:o}=e;w(t,o,{duplicateOnlyCollectionSchema:!1})}}),(0,u().cs)({key:"duplicate schema only",displayName:u().RE.duplicateCollectionSchemaOnlyName,analyticsName:"duplicate_schema_only",validators:[s().ffD(s().tls)],shortcuts:["duplicateSchema"],closeParentMenu:!0,action:e=>{let{blocks:t,environment:o}=e;w(t,o,{duplicateOnlyCollectionSchema:!0})}})]}),b=(0,u().cN)({key:"duplicate into private",displayName:u().RE.duplicateToPrivateName,analyticsName:u().RE.duplicateToPrivateName.defaultMessage,svg:n().a,validators:[s().ffD(s().sRS),s().DFt,s().J5S,s().ffD(s().nJQ),s().or([s().cWe,s().ffD(s().KEd),s().b1c]),s().or([s().ffD(s().plk),s().f7f]),s().ffD(s().uY7)],closeParentMenu:!0,action:async(e,t)=>{let{blocks:o,environment:n}=e;await k(o,n,void 0,t)}}),y=(0,u().MV)({key:"duplicate collection to private",displayName:u().RE.duplicateToPrivateName,analyticsName:u().RE.duplicateToPrivateName.defaultMessage,svg:n().a,width:275,validators:[s().ffD(s().sRS),s().DFt,s().J5S,s().ffD(s().nJQ),s().or([s().cWe,s().ffD(s().KEd),s().b1c]),s().xDy([s().plk,s().ffD(s().f7f)]),s().ffD(s().uY7)],subActions:()=>[{key:"collection duplication options",render:e=>(0,p.jsx)(r().Z,{...e}),actions:S.actions}]}),S=(0,u().$J)({key:"duplicate collection to private actions",title:u().RE.duplicateName,render:e=>(0,p.jsx)(r().Z,{...e}),actions:[(0,u().cN)({key:"duplicate with data",displayName:u().RE.duplicateCollectionWithDataName,analyticsName:"duplicate_with_data",validators:[],closeParentMenu:!0,action:async e=>{let{blocks:t,environment:o}=e;await k(t,o,!1)}}),(0,u().cN)({key:"duplicate schema only",displayName:u().RE.duplicateCollectionSchemaOnlyName,analyticsName:"duplicate_schema_only",validators:[],closeParentMenu:!0,action:async e=>{let{blocks:t,environment:o}=e;await k(t,o,!0)}})]});function w(e,t,o){const{duplicateOnlyCollectionSchema:n,event:r}=o??{};if(!(0,d().ww)(t))return;const a=e[0].getParentStore();"block"!==(null==a?void 0:a.table)&&"team"!==(null==a?void 0:a.table)&&"space"!==(null==a?void 0:a.table)||i().VE({environment:t,store:e[0],newParentStore:a,duplicateOnlyCollectionSchema:n,event:r})}async function k(e,t,n,r){if(!(0,d().ww)(t))return;const a=e[0],s=c().default.state.currentSpaceStore,l=c().default.state.currentSpaceViewStore;s&&l&&await i().DK({environment:t,store:a,spaceStore:s,spaceViewStore:l,isPrivate:!0,context:"duplicate_to_private_space",duplicateOnlyCollectionSchema:n,useCrdt:(0,o(718048).WA)(s)})}},38562:(e,t,o)=>{o.d(t,{q7:()=>L,$J:()=>E,cs:()=>M,cN:()=>P,MV:()=>D,N$:()=>F,CJ:()=>N,Sy:()=>O,kv:()=>U,N_:()=>A,zz:()=>x,aS:()=>V,RE:()=>C});o(492176),o(7961),o(267602),o(241792),o(228244),o(667294);var n=()=>o(827282),i=()=>o(788860),r=()=>o(568017),a=()=>o(696459),s=()=>o(269299),l=()=>o(855238),c=()=>o(149809),d=()=>o(827973),u=()=>o(198829),p=()=>o(470386),m=()=>o(667637),f=()=>o(654133),g=()=>o(868744),v=()=>o(205228),h=()=>o(421797),_=()=>o(921743),b=()=>o(527278),y=()=>o(352230),S=()=>o(164079),w=o(785893);const k=(0,n().IU)("stopThinOutlineIcon",{viewBox:"0 0 16 16",svg:(0,w.jsx)("g",{children:(0,w.jsx)("path",{d:"M7.998 14.97c-3.808 0-6.973-3.165-6.973-6.972 0-3.815 3.159-6.973 6.966-6.973 3.815 0 6.98 3.158 6.98 6.973 0 3.807-3.159 6.972-6.973 6.972m0-1.162a5.79 5.79 0 0 0 5.81-5.81c0-3.227-2.59-5.81-5.817-5.81a5.777 5.777 0 0 0-5.797 5.81 5.783 5.783 0 0 0 5.804 5.81m-1.811-3.322c-.424 0-.684-.253-.684-.67V6.179c0-.424.26-.67.684-.67h3.609c.43 0 .684.246.684.67v3.637c0 .417-.253.67-.684.67h-3.61Z"})})});var I=()=>o(998901);const C=(0,i().vU)({deleteName:{id:"action.delete.name",defaultMessage:"Delete"},moveToTrashName:{id:"action.moveToTrash.name",defaultMessage:"Move to Trash"},undoName:{id:"action.undo.name",defaultMessage:"Undo"},redoName:{id:"action.redo.name",defaultMessage:"Redo"},duplicateName:{id:"action.duplicate.name",defaultMessage:"Duplicate"},duplicateToPrivateName:{id:"action.duplicateToPrivate.name",defaultMessage:"Duplicate to Private"},turnIntoName:{id:"action.turnInto.name",defaultMessage:"Turn into"},copyLinkName:{id:"action.copyLink.name",defaultMessage:"Copy link to block"},copyLinkNavigableTypeName:{id:"action.copyLinkNavigableType.name",defaultMessage:"Copy link"},showCodePreviewFormat:{id:"action.showCodePreviewFormat.name",defaultMessage:"Preview"},showOnlyCodeFormat:{id:"action.showOnlyCodeFormat.name",defaultMessage:"Code"},showSplitViewFormat:{id:"action.showSplitViewFormat.name",defaultMessage:"Split"},searchPlaceholder:{defaultMessage:"Search for a languageâ€¦",id:"codeBlock.searchPrompt"},foregroundColorDefaultKeywords:{id:"action.foregroundColor.default.fuzzySearchKeyword",defaultMessage:"Default Black White"},backgroundColorDefaultKeywords:{id:"action.backgroundColor.default.fuzzySearchKeyword",defaultMessage:"Default Black White defaultbackground Defaultbackground"},foregroundColorGrayKeywords:{id:"action.foregroundColor.gray.fuzzySearchKeyword",defaultMessage:"Grey Gray"},backgroundColorGrayKeywords:{id:"action.backgroundColor.gray.fuzzySearchKeyword",defaultMessage:"Grey Gray background Greybackground Graybackground"},foregroundColorBrownKeywords:{id:"action.foregroundColor.brown.fuzzySearchKeyword",defaultMessage:"Brown"},backgroundColorBrownKeywords:{id:"action.backgroundColor.brown.fuzzySearchKeyword",defaultMessage:"Brown background Brownbackground"},foregroundColorOrangeKeywords:{id:"action.foregroundColor.orange.fuzzySearchKeyword",defaultMessage:"Orange"},backgroundColorOrangeKeywords:{id:"action.backgroundColor.orange.fuzzySearchKeyword",defaultMessage:"Orange background Orangebackground"},foregroundColorYellowKeywords:{id:"action.foregroundColor.yellow.fuzzySearchKeyword",defaultMessage:"Yellow"},backgroundColorYellowKeywords:{id:"action.backgroundColor.yellow.fuzzySearchKeyword",defaultMessage:"Yellow background Yellowbackground"},foregroundColorTealKeywords:{id:"action.foregroundColor.teal.fuzzySearchKeyword",defaultMessage:"Teal green"},backgroundColorTealKeywords:{id:"action.backgroundColor.teal.fuzzySearchKeyword",defaultMessage:"Teal green background Tealbackground Greenbackground"},foregroundColorBlueKeywords:{id:"action.foregroundColor.blue.fuzzySearchKeyword",defaultMessage:"Blue"},backgroundColorBlueKeywords:{id:"action.backgroundColor.blue.fuzzySearchKeyword",defaultMessage:"Blue background Bluebackground"},foregroundColorPurpleKeywords:{id:"action.foregroundColor.purple.fuzzySearchKeyword",defaultMessage:"Purple"},backgroundColorPurpleKeywords:{id:"action.backgroundColor.purple.fuzzySearchKeyword",defaultMessage:"Purple background Purplebackground"},foregroundColorPinkKeywords:{id:"action.foregroundColor.pink.fuzzySearchKeyword",defaultMessage:"Pink"},backgroundColorPinkKeywords:{id:"action.backgroundColor.pink.fuzzySearchKeyword",defaultMessage:"Pink background Pinkbackground"},foregroundColorRedKeywords:{id:"action.foregroundColor.red.fuzzySearchKeyword",defaultMessage:"Red"},backgroundColorRedKeywords:{id:"action.backgroundColor.red.fuzzySearchKeyword",defaultMessage:"Red background Redbackground"},backgroundSectionKeywords:{id:"action.section.background.fuzzySearchKeywords",defaultMessage:"Color Background"},backgroundSection:{id:"action.section.background",defaultMessage:"Background color"},colorSection:{id:"action.section.color",defaultMessage:"Text color"},colorName:{id:"action.color.name",defaultMessage:"Color"},duplicateCollectionSchemaOnlyName:{id:"action.duplicateSchemaOnly.name",defaultMessage:"Duplicate without content"},duplicateCollectionWithDataName:{id:"action.duplicateWithData.name",defaultMessage:"Duplicate with content"},convertToLinkMentionName:{id:"action.convertToLinkMention.name",defaultMessage:"Turn into mention"},availableOffline:{id:"action.availableOffline.name",defaultMessage:"Available offline"},unavailableOfflineTooltip:{id:"action.tooltip.unavailableOffline",defaultMessage:"Unavailable while offline"}});function x(e){let{title:t}=e;return t}const T={maxWidth:400,whiteSpace:"pre-wrap"};function M(e){const{key:t,displayName:o,displayNameInterpolatedValues:n,contextualDisplayName:i,analyticsName:r,analyticsActionType:a,fuzzySearchKeywords:s,svg:l,svgCustomFill:c,validators:d,shortcuts:u,sortScoreMultiplier:p,closeParentMenu:m,action:f,subActions:g,collapseSubActionsIntoParent:v,nativeImageReference:h,alwaysShowInSearch:_,right:b,renderTooltip:y,disableTooltip:S,userProvidedSearchName:w,hideFromSlashActionMenu:k,badge:I,clientSkill:C,disabled:x}=e,{formattedDisplayName:T,searchName:M}=R({displayName:o,displayNameInterpolatedValues:n,userProvidedSearchName:w,fuzzySearchKeywords:s});return{key:`action ${t}`,displayName:T,analyticsName:r,analyticsActionType:a,searchName:M,validators:d,shortcuts:u,sortScoreMultiplier:p,action:f,subActions:g,collapseSubActionsIntoParent:v,closeParentMenu:m,render:e.render??B({svg:l,svgCustomFill:c,formattedDisplayName:T,right:b,contextualDisplayName:i,shortcut:u[0],renderTooltip:y,disableTooltip:S,badge:I,disabled:x}),nativeImageReference:h,alwaysShowInSearch:_,hideFromSlashActionMenu:k,svg:l,svgCustomFill:c,clientSkill:C}}function P(e){const{key:t,displayName:o,displayNameInterpolatedValues:n,contextualDisplayName:i,analyticsName:r,analyticsActionType:a,fuzzySearchKeywords:s,fuzzySearchKeywordsArray:l,svg:c,svgCustomFill:d,validators:u,sortScoreMultiplier:p,closeParentMenu:m,action:f,subActions:g,collapseSubActionsIntoParent:v,hideSubActions:h,nativeImageReference:_,alwaysShowInSearch:b,right:y,renderTooltip:S,disableTooltip:w,userProvidedSearchName:k,clientSkill:I,tooltipPlacement:C,badge:x,isRed:T,disabled:M}=e,{formattedDisplayName:P,searchName:A}=R({displayName:o,displayNameInterpolatedValues:n,userProvidedSearchName:k,fuzzySearchKeywords:s,fuzzySearchKeywordsArray:h?l:void 0}),E=e.render??B({svg:c,svgCustomFill:d,formattedDisplayName:P,right:y,contextualDisplayName:i,renderTooltip:S,disableTooltip:w,tooltipPlacement:C,badge:x,isRed:T,disabled:M});return{key:(D=t,`action ${D}`),displayName:P,analyticsName:r,analyticsActionType:a,searchName:A,validators:u,sortScoreMultiplier:p,action:f,subActions:g,collapseSubActionsIntoParent:v,hideSubActions:h,closeParentMenu:m,render:E,nativeImageReference:_,alwaysShowInSearch:b,svg:c,svgCustomFill:d,clientSkill:I};var D}function A(e){if("string"==typeof e)return e.split(" ").at(-1)}function R(e){const{displayName:t,displayNameInterpolatedValues:o,fuzzySearchKeywords:n,fuzzySearchKeywordsArray:i,userProvidedSearchName:r}=e,a=t?b().Z.formatMessage(t,o):void 0,s=n||t,l=n?b().Z.formatMessage(n):a,c=null==i?void 0:i.map((e=>b().Z.formatMessage(e))).join(" ");let d=r;return d||(d=s?l===s.defaultMessage?c?`${c} ${l}`:l:`${l} ${s.defaultMessage}`:void 0),{formattedDisplayName:a,searchName:d}}function B(e){const{formattedDisplayName:t,svg:o,svgCustomFill:n,shortcut:i,right:r,renderTooltip:a,disableTooltip:s,badge:c,isRed:d,tooltipPlacement:u=I().Placement.Right,disabled:p}=e;return function(m,g,v){const h=(e.contextualDisplayName?e.contextualDisplayName(g):void 0)||t;return(0,w.jsx)(f().Z,{render:e=>{var t;return(0,w.jsx)(l().Z,{...(0,S().Z)(m,e),...v.styles,title:h,svg:o,svgCustomFill:n??(null===(t=v.styles)||void 0===t?void 0:t.svgCustomFill),shortcut:i,badge:c,isRed:d,right:"function"==typeof r?r(m,g,v):r,disabled:null==p?void 0:p(),disabledFeedback:null==p?void 0:p()})},renderTooltip:()=>(0,w.jsx)("div",{style:T,children:null==a?void 0:a({title:h})}),disableTooltip:!a||(null==s?void 0:s()),placement:u})}}function E(e){const{key:t,title:o,overrideSearchTitle:n,render:i,actions:r}=e,a=o?b().Z.formatMessage(o):void 0,s=n||o,l=s&&b().Z.formatMessage(s);return{key:t,title:a,searchTitle:s?l===s.defaultMessage?l:`${l} ${s.defaultMessage}`:void 0,render:i,actions:r}}function D(e){const{key:t,displayName:o,displayNameInterpolatedValues:n,analyticsName:r,validators:a,subActions:s,collapseSubActionsIntoParent:m,hideSubActions:f,svg:v,icon:h,right:_,rightStyle:b,width:S,initialFocus:k,clientSkill:I,fuzzySearchKeywordsArray:C,shouldRenderMobileRefresh:x}=e,T=P({clientSkill:I,key:`extension ${t}`,displayName:o,displayNameInterpolatedValues:n,analyticsName:r,validators:a,subActions:s,collapseSubActionsIntoParent:m,hideSubActions:f,fuzzySearchKeywordsArray:C,closeParentMenu:!0,action:()=>{},render:(e,t,n)=>(0,w.jsx)(g().Z,{...e,renderOrigin:(e,t)=>v?(0,w.jsx)(l().Z,{...e,title:T.displayName,svg:v,right:_,rightStyle:b,ref:t}):(0,w.jsx)(d().Z,{...e,title:T.displayName,icon:h,right:_,rightStyle:b,ref:t}),onFocus:n.onFocus,renderExtension:(e,r)=>{let a;return a=t.environment.device.isPhone?x?{menuType:y().o.Modal,onClickLeft:r.close,isExtensionMenu:!0,shouldRenderMobileRefresh:x,paddingTop:10,title:(0,w.jsx)(i()._H,{...o}),...e}:{menuType:y().o.Modal,right:(0,w.jsx)(p().DoneMenuText,{}),onClickRight:r.close,...e}:{menuType:y().o.Popup,width:S??220,...e},(0,w.jsx)(u().Z,{...a,children:(0,w.jsx)(c().Z,{initialFocus:k??0,context:t,sections:s(t),onAccept:n.onAccept})})}})});return T}const U=[h().ffD(h().P99(o(156642).Ti.externalObjectInstancePage)),h().ffD(h().Q_M),h().ffD(h().K5G),h().J5S,h().ffD((e=>e.blocks.some((e=>e.isDefined()&&(0,o(110232).h7)(e))))),h().ffD(h().SYI),h().vdd];function F(e){return P({key:`format ${e.key}`,displayName:e.displayName,analyticsName:e.displayName.defaultMessage,validators:e.validators,render:(t,o,i)=>{var a,s;let{blocks:l,environment:c}=o;const d=l[0],u=e.isEnabled(d),p=(null===(a=e.isLoading)||void 0===a?void 0:a.call(e,d))||!1,g=(0,r().gh)({theme:c.ThemeModeStore.state});return(0,w.jsx)(f().Z,{placement:I().Placement.Right,disableTooltip:!e.renderTooltip||(null===(s=e.disableTooltip)||void 0===s?void 0:s.call(e,d)),renderTooltip:()=>{var t;return(0,w.jsx)("div",{style:T,children:null===(t=e.renderTooltip)||void 0===t?void 0:t.call(e,{title:e.label})})},render:o=>{var i,r;return(0,w.jsx)(m().Z,{...(0,S().Z)(t,o),title:e.label,icon:e.svg?(0,w.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:e.svg({width:n().ZG.default,height:n().ZG.default,fill:g.regularIconColor})}):void 0,badge:e.badge,on:u,isLoading:p,disabled:null===(i=e.disabled)||void 0===i?void 0:i.call(e,d),disabledFeedback:null===(r=e.disabled)||void 0===r?void 0:r.call(e,d)})}})},closeParentMenu:!1,action:t=>{let{environment:o,blocks:n}=t;s().createAndCommit({userAction:"actionRegistry.createToggleAction",environment:o,canUndo:!0,perform:t=>{var i;const r=n[0],a=!e.isEnabled(r);e.action(o,r,t),null===(i=e.afterAction)||void 0===i||i.call(e,a,o)}})}})}function N(e){switch(e){case"default":return C.foregroundColorDefaultKeywords;case"default_background":return C.backgroundColorDefaultKeywords;case"gray":return C.foregroundColorGrayKeywords;case"gray_background":return C.backgroundColorGrayKeywords;case"brown":return C.foregroundColorBrownKeywords;case"brown_background":return C.backgroundColorBrownKeywords;case"orange":return C.foregroundColorOrangeKeywords;case"orange_background":return C.backgroundColorOrangeKeywords;case"yellow":return C.foregroundColorYellowKeywords;case"yellow_background":return C.backgroundColorYellowKeywords;case"teal":return C.foregroundColorTealKeywords;case"teal_background":return C.backgroundColorTealKeywords;case"blue":return C.foregroundColorBlueKeywords;case"blue_background":return C.backgroundColorBlueKeywords;case"purple":return C.foregroundColorPurpleKeywords;case"purple_background":return C.backgroundColorPurpleKeywords;case"pink":return C.foregroundColorPinkKeywords;case"pink_background":return C.backgroundColorPinkKeywords;case"red":return C.foregroundColorRedKeywords;case"red_background":return C.backgroundColorRedKeywords;default:return(0,a().t1)(e)}}function V(e){const t=e.thumbnail?(0,_().D)(null==e?void 0:e.thumbnail):void 0,o=Boolean(void 0!==t&&/^https?:\/\//.test(t));return{remoteImageUrl:t?`${o?"":v().default.domainBaseUrl}${t}`:void 0,localAssetBundleImagePath:o?void 0:t}}function L(e,t,o){const n=e.device.isAndroid?(0,r().gh)({theme:"light"}):(0,r().gh)({theme:e.ThemeStore.state.mode}),i=(0,r().fi)(t,n);let a,s,l;const c="default_background"!==t;t.includes("background")||null!=o&&o.includes("background")?(a="background",s=c?"square.fill":"square",l="textBackgroundColor"):(a="color",s="character",l="textColor");const d=a in i?i[a]:void 0,u=d&&(0,r().J1)(d);return{sfProGlyphName:s,localImageIdentifier:l,imageTintColor:c?u:void 0}}function O(e,t){return t?(0,w.jsxs)("div",{style:{color:e.lightTextColor,fontSize:14,display:"flex",flexDirection:"row",alignItems:"center",gap:2},children:[k({width:14,height:14}),"Stop"]}):void 0}},472592:(e,t,o)=>{o.d(t,{T:()=>l,U:()=>c});var n=()=>o(421797),i=()=>o(599631),r=()=>o(624528),a=()=>o(38562);const s=(0,o(788860).vU)({addImageHyperlink:{id:"action.addImageHyperlink",defaultMessage:"Add link"},editImageHyperlink:{id:"action.editImageHyperlink",defaultMessage:"Edit link"}}),l=(0,a().cs)({key:"link image",displayName:s.addImageHyperlink,analyticsName:s.addImageHyperlink.defaultMessage,svg:i().N,validators:[n().J5S,n().U7o,n().Or$,n().ffD(n().OPg),n().ffD(n().OoW)],shortcuts:["openLinkMenuOrOpenSearch"],closeParentMenu:!0,action:e=>{let{blocks:t}=e;const o=t[0];r().KB({store:o})}}),c=(0,a().cs)({key:"link image",displayName:s.editImageHyperlink,analyticsName:s.editImageHyperlink.defaultMessage,svg:i().N,validators:[n().J5S,n().U7o,n().Or$,n().ffD(n().OPg),n().OoW],shortcuts:["openLinkMenuOrOpenSearch"],closeParentMenu:!0,action:e=>{let{blocks:t}=e;const o=t[0];r().KB({store:o})}})},523709:(e,t,o)=>{o.d(t,{L6:()=>_t,aU:()=>Fe,dI:()=>De,vd:()=>le,Fd:()=>Ue,Yw:()=>ge});o(267602),o(916054),o(653476),o(241792);var n=o.n(o(427537)),i=()=>o(506347),r=()=>o(156642);o(667294);const a={viewBox:"0 0 20 20",svg:(0,o(785893).jsx)("path",{d:"M12.22 13.22a.75.75 0 1 0 1.06 1.06l5-5a.75.75 0 0 0 0-1.06l-5-5a.75.75 0 0 0-1.06 1.06L15.94 8H6.747a4.75 4.75 0 1 0 0 9.5h.75a.75.75 0 0 0 0-1.5h-.75a3.25 3.25 0 0 1 0-6.5h9.191z"})},s=(0,o(827282).IU)("arrowUTurnRight",a);var l=()=>o(788860),c=()=>o(381140),d=()=>o(492788),u=()=>o(965903),p=()=>o(80072),m=()=>o(844085),f=()=>o(879952);var g=()=>o(959137),v=()=>o(236087),h=()=>o(231077),_=()=>o(207874),b=()=>o(47443),y=()=>o(497065),S=()=>o(453999),w=()=>o(224597),k=()=>o(269299),I=()=>o(421797),C=()=>o(718959),x=()=>o(148126),T=()=>o(856929),M=()=>o(599631),P=()=>o(528770),A=()=>o(538230),R=()=>o(38562);const B=(0,R().cs)({key:"open home",displayName:void 0,analyticsName:"openHome",validators:[I().jlf],shortcuts:["openHome"],closeParentMenu:!0,action:async e=>{const t=e.environment,n=o(772529).J2("main");n&&(await n.load(),n.canRead()&&((0,o(384334).$X)({environment:t,from:"keyboard_shortcut"}),b()._c({environment:t,store:n,pageVisitSource:i().tY.SidebarHome})))}});var E=()=>o(815532),D=()=>o(793935),U=()=>o(590972),F=()=>o(876822),N=()=>o(524434),V=()=>o(379072),L=()=>o(763058),O=()=>o(482162),Z=()=>o(625820),j=()=>o(838266),K=()=>o(787953),z=()=>o(177837),H=()=>o(142466),q=()=>o(717538),W=()=>o(472592),G=()=>o(668881),$=()=>o(55853),Q=()=>o(278275);const Y=(0,l().vU)({quickFindName:{id:"action.quickFind.name",defaultMessage:"Quick find"}}),J=(0,R().cs)({key:"quick find",displayName:Y.quickFindName,analyticsName:Y.quickFindName.defaultMessage,validators:[I().or([I().lvA,ee]),I().ffD(I().$bF)],shortcuts:["quickFind"],closeParentMenu:!0,action:e=>{let{environment:t}=e;Q().Kf({environment:t,analyticsFrom:"keyboard-shortcut"})}}),X=(0,R().cs)({key:"quick find (alternative)",displayName:Y.quickFindName,analyticsName:Y.quickFindName.defaultMessage,validators:[I().or([I().lvA,ee]),I().ffD(I().or([I().xDy([I().DaG,T().K]),I().xDy([I().J5S,I().U7o,I().Or$])])),I().ffD(I().$bF)],shortcuts:["openLinkMenuOrOpenSearch"],closeParentMenu:!0,action:e=>{let{environment:t}=e;if(!N().KR.isQuickFindEnabled())return void Q().Kf({environment:t,analyticsFrom:"keyboard-shortcut-command-k"});const o=function(e){const t=V().default.getActiveSession(),o="chat"===e.RouterStore.state.route.name,n=!Boolean(null==t?void 0:t.getHasCommittedHumanStep()),i=o&&!n;return i}(t);Q().UT({environment:t,analyticsFrom:"keyboard-shortcut-command-k",shouldUseDeepDiveSurface:o})}});function ee(e){const t=e.environment.RouterStore.state.route.name;switch(t){case"chat":case"gallery":case"marketplace":case"home":case"page":case"team":return!0;case"space":case"admin":case"adminListData":case"adminSingleRecord":case"aiGtmFavoriteImport":case"appleAuthCallback":case"asanaAuthCallback":case"communityRedirect":case"contentPolicyRedirect":case"creatorProfile":case"creatorProfileAnalytics":case"creatorProfileTemplates":case"creatorProfileCoupons":case"localizedTemplates":case"datadogAuthCallback":case"desktopEmailConfirm":case"exportPreview":case"external":case"externalAuthCallback":case"externalIntegrationAuthCallback":case"externalIntegrationPopupRedirect":case"front":case"googleAuthCallback":case"googleDriveAuthCallback":case"googleOneTapRedirect":case"guideRedirect":case"inAppTemplateCreatorSubmission":case"inAppTemplateSubmission":case"initiateExternalAuthentication":case"initiateExternalAuthenticationFromDesktop":case"invoiceById":case"invoiceRedirect":case"login":case"login/calendar":case"login/mail":case"loginSuccessCallback":case"loginWithEmailCallback":case"addAnotherAccount":case"logout":case"microsoftAuthCallback":case"modal":case"myIntegrations":case"nativeRedirect":case"nativeMailRedirect":case"nativeCalendarRedirect":case"nativeTab":case"new":case"notFound":case"notionCalendarAuthorization":case"oauthAuthorization":case"onboarding":case"passwordChangeRedirect":case"passwordResetCallback":case"quickSearch":case"root":case"samlAuthCallback":case"passkeyAuthVerify":case"passkeyAuthCallback":case"passkeyRegistrationCallback":case"passkeyRegistrationVerification":case"settingsConsoleDefault":case"settingsConsoleOrganization":case"signup":case"signup/calendar":case"signup/mail":case"signupWithTrial":case"slackAuthCallback":case"studentGroupSignup":case"teamInvite":case"teamsInvite":case"templatesRedirect":case"termsRedirect":case"trelloAuthCallback":case"uiDoc":case"uniqueId":case"unknown":case"unsubscribe":case"upcomingInvoice":case"globalOauthPostLogin":case"startupsApplication":case"smbsApplication":case"lennyApplication":case"blank":case"creatorProfileIntegrations":case"githubStudentPackHome":case"githubStudentPackAuthCallback":case"formResponse":case"externalAuthNativeCallback":case"aiInferenceTranscript":return!1;default:return(0,o(696459).P)(t),!1}}var te=()=>o(562856),oe=()=>o(127519);const ne=(0,l().vU)({searchName:{id:"action.search.name",defaultMessage:"Search"}}),ie=(0,R().cs)({key:"search",displayName:ne.searchName,analyticsName:ne.searchName.defaultMessage,validators:[I().jlf,I().QLY("native-find-in-page"),I().or([I().NnH,I().lvA]),I().ffD(I().hrD),I().ffD(I().gt6),I().ffD(I().GKf)],shortcuts:["search"],closeParentMenu:!0,action:e=>{var t,n;const i=(0,C().np)();if(!i)return;const r=i.isCollectionView(),a=(0,o(887430).fm)(i),s="page"===(null==a||null===(t=a.collectionViewStore())||void 0===t?void 0:t.getType());if(r&&!s){const e=o(472753).R.findCollectionViewBlockFromStore(i);return void(e&&"collectionContextStore"in e&&(null==e||e.collectionContextStore.searchOpenStore.setState(!0)))}const l=null===(n=window.getSelection())||void 0===n?void 0:n.toString(),c="editing"===oe().default.state.mode?oe().default.state:void 0;o(803272).bA({environment:e.environment,selectedString:l,textSelectionOnOpen:c})}});var re=()=>o(236601);function ae(e){return void 0!==e.shortcuts}const se=(0,l().vU)({enterName:{id:"action.enter.name",defaultMessage:"Enter"},syncPageName:{id:"action.syncPage.name",defaultMessage:"Save for offline"},resyncPageName:{id:"action.resyncPage.name",defaultMessage:"Refresh offline data"},unsyncPageName:{id:"action.unsyncPage.name",defaultMessage:"Remove from offline"},edit:{id:"action.edit.name",defaultMessage:"Edit"},copyLinktoViewName:{id:"action.copyLinktoView.name",defaultMessage:"Copy link to view"},zoomInName:{id:"action.zoomIn.name",defaultMessage:"Zoom in"},zoomOutName:{id:"action.zoomOut.name",defaultMessage:"Zoom out"},resetZoomName:{id:"action.resetZoom.name",defaultMessage:"Reset zoom"},blockSelectionCompletionName:{id:"action.blockSelectionCompletionName.name",defaultMessage:"Ask AI"},copyFormattedLinkNavigableTypeName:{id:"action.copyFormattedLinkNavigableType.name",defaultMessage:"Copy linked title"},copyLinkToCurrentPageSnackBarMessage:{id:"action.copyLinkToCurrentPage.snackBarMessage",defaultMessage:"Link to current page copied to clipboard"},pasteName:{id:"action.paste.name",defaultMessage:"Paste"},moveUpName:{id:"action.moveUp.name",defaultMessage:"Move up"},moveDownName:{id:"action.moveDown.name",defaultMessage:"Move down"},propertyVisibilityLabel:{id:"action.propertyVisibility.label",defaultMessage:"Toggle property visibility"},databaseLockLabel:{id:"action.databaseLock.label",defaultMessage:"Database lock"},wrapCellsName:{id:"action.wrapAllColumns.name",defaultMessage:"Wrap all columns"},createLinkName:{id:"action.createLink.name",defaultMessage:"Add link"},createEquationName:{id:"action.createEquation.name",defaultMessage:"Mark as equation"},filterName:{id:"action.filter.name",defaultMessage:"Filter"},sortName:{id:"action.sort.name",defaultMessage:"Sort"},legacyGroupByName:{id:"action.legacyGroupBy.name",defaultMessage:"Group by"},groupByName:{id:"action.groupBy.name",defaultMessage:"Group"},subGroupByName:{id:"action.subGroupBy.name",defaultMessage:"Sub-group"},propertiesName:{id:"action.properties.name",defaultMessage:"Properties"},templatesName:{id:"action.templates.name",defaultMessage:"Templates"},calendarByName:{id:"action.calendarBy.name",defaultMessage:"Calendar by"},timelineByName:{id:"action.timelineBy.name",defaultMessage:"Timeline by"},noDateName:{id:"action.noDate.name",defaultMessage:"No date"},boldName:{id:"action.bold.name",defaultMessage:"Bold"},italicName:{id:"action.italic.name",defaultMessage:"Italic"},strikeThroughName:{id:"action.strikeThrough.name",defaultMessage:"Strike-through"},underlineName:{id:"action.underline.name",defaultMessage:"Underline"},darkModeName:{id:"action.darkMode.name",defaultMessage:"Dark mode"},openAsPageName:{id:"action.openAsPage.name",defaultMessage:"Open as page"},openAllTogglesName:{id:"action.openAllToggles.name",defaultMessage:"Open all toggles"},toggleRecordingInputLatencyName:{id:"action.toggleRecordingInputLatency.name",defaultMessage:"Toggle recording input latency"},more:{defaultMessage:"See more",id:"slashMenu.more.title"},toggleQnAMessage:{defaultMessage:"Toggle QnA",id:"action.toggleQnA.name"}});function le(e){return"key"in e}function ce(e){return"clipboardData"in e}const de=[I().J5S,I().ffD(I().OPg),I().FSO];function ue(e){return(0,R().cs)({...e,validators:de,closeParentMenu:!0,action:t=>{let{environment:n,blocks:i}=t;k().createAndCommit({userAction:"actionRegistry.createAnnotationAction",environment:n,canUndo:!0,perform:t=>{o(734558).P2({environment:n,blocks:i,annotation:e.annotation,transaction:t})}})}})}const pe=(0,R().cs)({key:"toggle all updates",displayName:void 0,analyticsName:"toggleAllUpdates",validators:[I().jlf],shortcuts:["toggleAllUpdates"],closeParentMenu:!0,action:e=>{E().AP({environment:e.environment,contentType:"inbox"})}}),me=(0,R().cs)({key:"toggle all teams",displayName:void 0,analyticsName:"toggleAllTeams",validators:[I().jlf,I().sp0],shortcuts:["toggleAllTeams"],closeParentMenu:!0,action:e=>{let{environment:t}=e;(0,E().AP)({environment:t,contentType:"teams"})}}),fe=(0,R().cs)({key:"open share menu",displayName:void 0,analyticsName:"openShareMenu",validators:[I().jlf],shortcuts:["openShareMenu"],closeParentMenu:!0,action:e=>{let{environment:t}=e;return o(365872).lG(t)}}),ge=(0,R().cs)({key:"undo",displayName:R().RE.undoName,analyticsName:R().RE.undoName.defaultMessage,svg:o(363728).S,validators:[I().jlf,I().J5S,I().ffD(I().tqC),I().ffD(I().P99(r().Ti.externalObjectInstancePage)),I().or([I().ffD(I()._z),I().ffD(I().Q_M)]),I().ffD(I().uY7)],shortcuts:["undo"],closeParentMenu:!0,action:e=>{let{environment:t}=e;return _().Yw(t)}}),ve=(0,R().cs)({key:"redo",displayName:R().RE.redoName,analyticsName:R().RE.redoName.defaultMessage,svg:s,validators:[],shortcuts:["redo"],closeParentMenu:!0,action:e=>{let{environment:t}=e;return _().KX(t)}}),he=(0,R().cs)({key:"up",analyticsName:"Up",displayName:void 0,validators:[],shortcuts:["up"],closeParentMenu:!0,action:(e,t)=>{let{environment:o}=e;if(t&&le(t))return t.metaKey||t.ctrlKey?f().w5(o):void f().zJ({environment:o,shiftKey:Boolean(t&&t.shiftKey),altKey:Boolean(t&&t.altKey)})}}),_e=(0,R().cs)({key:"left",analyticsName:"Left",displayName:void 0,validators:[],shortcuts:["left"],closeParentMenu:!0,action:(e,t)=>{let{environment:o}=e;t&&le(t)&&f().e2(o)}}),be=(0,R().cs)({key:"down",analyticsName:"Down",displayName:void 0,validators:[],shortcuts:["down"],closeParentMenu:!0,action:(e,t)=>{let{environment:o}=e;if(t&&le(t))return t.metaKey||t.ctrlKey?f().hn(o):void f().DI({environment:o,shiftKey:Boolean(t&&t.shiftKey),altKey:Boolean(t&&t.altKey)})}}),ye=(0,R().cs)({key:"right",analyticsName:"Right",displayName:void 0,validators:[],shortcuts:["right"],closeParentMenu:!0,action:e=>{let{environment:t}=e;f().FC(t)}}),Se=(0,R().cs)({key:"context menu",analyticsName:"Context menu",displayName:void 0,validators:[I().KHO,I().ffD(I().OPg)],shortcuts:["commandSlash"],closeParentMenu:!0,action:e=>{let{environment:t}=e;const{stores:n}=u().default.state;o(242619).$Z({environment:t,stores:n,actionSectionGroupKey:"default",analyticsFrom:"command_slash_menu"})}}),we=(0,R().cs)({key:"indent",analyticsName:"Indent",displayName:void 0,validators:[I().J5S,I().ffD(I().OPg),I().Eok,I().ffD(I().AKv)],shortcuts:["tab"],closeParentMenu:!0,action:e=>{let{environment:t}=e;k().createAndCommit({userAction:"actionRegistry.indent",environment:t,canUndo:!0,perform:e=>{!function(e){const t=u().default.state.stores;if(t.length>0){const o=p().WY({environment:e.environment,blocks:t,transaction:e.transaction});o&&f().Z5({environment:e.environment,stores:o})}}({environment:t,transaction:e})}})}}),ke=(0,R().cs)({key:"subitemIndent",analyticsName:"Toggle By Indent",displayName:void 0,validators:[I().J5S,I().ffD(I().OPg),I().Eok,I().AKv,I().y9X,I().v_H],shortcuts:["tab"],closeParentMenu:!0,action:e=>{let{blocks:t,environment:o}=e;k().createAndCommit({userAction:"actionRegistry.subitemIndent",environment:o,canUndo:!0,perform:e=>{v().wA({environment:o,transaction:e,blocks:t,action:"indentSelfAndSubtree"})}})}}),Ie=(0,R().cs)({key:"unindent",analyticsName:"Unindent",displayName:void 0,validators:[I().J5S,I().ffD(I().OPg),I().Eok,I().ffD(I().AKv)],shortcuts:["untab"],closeParentMenu:!0,action:e=>{let{environment:t}=e;k().createAndCommit({userAction:"actionRegistry.unindent",environment:t,canUndo:!0,perform:e=>{!function(e){const t=u().default.state.stores;if(t.length>0){const o=p().rB({environment:e.environment,blocks:t,transaction:e.transaction});o&&f().Z5({environment:e.environment,stores:o})}}({environment:t,transaction:e})}})}}),Ce=(0,R().cs)({key:"subitemUnindent",analyticsName:"Toggle By Unindent",displayName:void 0,validators:[I().J5S,I().ffD(I().OPg),I().Eok,I().AKv,I().y9X,I().v_H],shortcuts:["untab"],closeParentMenu:!0,action:e=>{let{blocks:t,environment:o}=e;k().createAndCommit({userAction:"actionRegistry.subitemUnindent",environment:o,canUndo:!0,perform:e=>{v().wA({environment:o,transaction:e,blocks:t,action:"unindentSelf"})}})}}),xe=(0,R().cs)({key:"escape",analyticsName:"Escape",displayName:void 0,validators:[I().ffD(I().lPL)],shortcuts:["esc"],closeParentMenu:!0,action:e=>{let{environment:t}=e;o(574089).cQ(t),f().ZH({environment:t}),o(82937).jG(t),o(934262).default.dismissTourTutorial()}}),Te=(0,R().cs)({key:"escape",analyticsName:"Quick Search Escape",displayName:void 0,validators:[I().lPL],shortcuts:["esc"],closeParentMenu:!0,action:()=>{Z().ZP.state.query.text.length>0?Z().ZP.updateQueryText(""):h().closeQuickSearch()}}),Me=(0,R().cs)({key:"select all",analyticsName:"Select all",displayName:void 0,validators:[],shortcuts:["selectAll"],closeParentMenu:!0,action:e=>{let{environment:t}=e;f().td(t)}}),Pe=(0,R().cs)({key:"cut",analyticsName:"Cut",displayName:void 0,validators:[I().J5S,I().ffD(I().OPg),I().ryx],shortcuts:["cut"],closeParentMenu:!0,action:(e,t)=>{let{environment:o,lazyDependencies:{clipboardActions:n,markdownLinkifyIt:i}}=e;n&&t&&ce(t)&&n&&n.cutWithMaybeConfirmation({environment:o,event:t,markdownLinkifyIt:i})}}),Ae=(0,R().cs)({key:"copy",analyticsName:"Copy",displayName:void 0,validators:[],shortcuts:["copy"],closeParentMenu:!0,action:(e,t)=>{let{environment:o,lazyDependencies:{clipboardActions:n,markdownLinkifyIt:i}}=e;t&&ce(t)&&n&&n.copy({environment:o,event:t,markdownLinkifyIt:i})}}),Re=(0,R().cs)({key:"zoom in",displayName:se.zoomInName,analyticsName:se.zoomInName.defaultMessage,validators:[I().daU,I().ffD(I().ar_)],shortcuts:["zoomIn"],closeParentMenu:!0,action:()=>{h().zoomIn()}}),Be=(0,R().cs)({key:"zoom out",displayName:se.zoomOutName,analyticsName:se.zoomOutName.defaultMessage,validators:[I().daU,I().ffD(I().ar_)],shortcuts:["zoomOut"],closeParentMenu:!0,action:()=>{h().zoomOut()}}),Ee=(0,R().cs)({key:"zoom reset",displayName:se.resetZoomName,analyticsName:se.resetZoomName.defaultMessage,validators:[I().daU,I().ffD(I().ar_)],shortcuts:["zoomReset"],closeParentMenu:!0,action:()=>{h().zoomReset()}});function De(){const{mainEditorCurrentBlockStore:e}=F().default.state;return O().default.state.open&&O().default.state.targetStore||e}function Ue(e){return async(t,o)=>{let{environment:n}=t;const i=await g().F.clipboardActions.load(),r=De(),a=(0,x().oX)(n);r?e(i)({environment:n,blocks:[r],event:o}):a&&i.copyString({environment:n,stringValue:a,copiedMessage:i.clipboardMessages.copiedLinkToClipboard})}}const Fe=(0,R().cs)({key:"copy link to current page",displayName:R().RE.copyLinkNavigableTypeName,analyticsName:R().RE.copyLinkNavigableTypeName.defaultMessage,svg:M().N,validators:[I().daU,I().ffD(I().uY7)],shortcuts:["copyLinkToCurrentPage"],closeParentMenu:!0,action:Ue((e=>e.copyLinkToBlock))}),Ne=(0,R().cs)({key:"copy linkified page title to current page",displayName:se.copyFormattedLinkNavigableTypeName,analyticsName:se.copyFormattedLinkNavigableTypeName.defaultMessage,svg:M().N,validators:[],shortcuts:["copyCurrentPageLinkifiedBlockTitle"],closeParentMenu:!0,action:Ue((e=>e.copyFormattedLinkToBlock))}),Ve=(0,R().cs)({key:"paste",displayName:se.pasteName,analyticsName:se.pasteName.defaultMessage,validators:[I().J5S,I().ffD(I().OPg),I().ryx,I().jlf],shortcuts:["paste"],closeParentMenu:!0,action:(e,t)=>{let{environment:o,lazyDependencies:{clipboardActions:n,formulasModule:i,markdownLinkifyIt:r,tinyMceMicrosoftWordPasteFilter:a}}=e;t&&ce(t)&&n&&k().createAndCommit({userAction:"actionRegistry.paste",environment:o,canUndo:!0,perform:e=>{n.paste({environment:o,event:t,disableEmbedMenu:!0,transaction:e,onPasteFiles:n.pasteFilesForBlocks,formulasModule:i,markdownLinkifyIt:r,tinyMceMicrosoftWordPasteFilter:a})}})}}),Le=(0,R().cs)({key:"move up",displayName:se.moveUpName,analyticsName:se.moveUpName.defaultMessage,validators:[I().J5S,I().Eok,I().ffD(I().AKv)],shortcuts:["moveUp"],closeParentMenu:!0,action:e=>{let{environment:t}=e;k().createAndCommit({userAction:"actionRegistry.moveUp",environment:t,canUndo:!0,perform:e=>{!async function(e){const t=p().A1({transaction:e.transaction,blocks:u().default.state.stores});t&&(f().Z5({environment:e.environment,stores:t}),await d().default.afterNextFlush(),m().Zv())}({environment:t,transaction:e})}})}}),Oe=(0,R().cs)({key:"move down",displayName:se.moveDownName,analyticsName:se.moveDownName.defaultMessage,validators:[I().J5S,I().Eok,I().ffD(I().AKv)],shortcuts:["moveDown"],closeParentMenu:!0,action:e=>{let{environment:t}=e;k().createAndCommit({userAction:"actionRegistry.moveDown",environment:t,canUndo:!0,perform:e=>{!async function(e){const t=p().vi({transaction:e.transaction,blocks:u().default.state.stores});t&&(f().Z5({environment:e.environment,stores:t}),await d().default.afterNextFlush(),m().Zv())}({environment:t,transaction:e})}})}}),Ze=(0,R().cs)({key:"property visibility",displayName:se.propertyVisibilityLabel,analyticsName:se.propertyVisibilityLabel.defaultMessage,svg:o(607031).B,shortcuts:["togglePropertyVisibility"],validators:[I().J5S,I().ffD(I().YGm)],closeParentMenu:!0,action:e=>{const t=Object.values(O().default.state.open?L().UK.state.pagePropertiesStoreMap:L().my.state.pagePropertiesStoreMap),o=O().default.state.open?O().default.state.targetStore:F().default.state.mainEditorCurrentBlockStore;if(!o)return;const n=o.getAssociatedCollectionStore();if(!n)return;const i=t.every((e=>e.state.forceShowProperties)),r=(null==n?void 0:n.getNormalizedPropertyGroups())??[],a=r.every((e=>A().Z.isPropertyGroupExpanded({groupId:e.id}))),s=!i||!a;for(const l of t)l.setState({...l.state,forceShowProperties:s});for(const l of r)A().Z.setPropertyGroupExpandedOverride({groupId:l.id,override:s?"open":"closed"})}}),je=(0,R().cs)({key:"enter",displayName:se.enterName,analyticsName:se.enterName.defaultMessage,validators:[I().J5S,I().ffD(I().OPg)],shortcuts:["enter"],closeParentMenu:!0,action:e=>{let{environment:t,blocks:o}=e;k().createAndCommit({userAction:"actionRegistry.enter",environment:t,canUndo:!0,perform:e=>{S().mp({blocks:o,transaction:e})}})}}),Ke=(0,R().cs)({key:"activate",analyticsName:"Activate",displayName:void 0,validators:[I().J5S,I().nWT],shortcuts:["commandEnter"],closeParentMenu:!0,action:e=>S().QZ(e)}),ze=(0,R().cs)({key:"open tab",analyticsName:"open tab",displayName:void 0,validators:[I().fy9],shortcuts:["commandEnter"],closeParentMenu:!0,action:e=>S().Ah(e)}),He=(0,R().cs)({key:"toggle sidebar",analyticsName:"Toggle sidebar",displayName:void 0,validators:[I().ffD(I().ATo)],shortcuts:["toggleSidebar"],closeParentMenu:!0,action:e=>{let{environment:t}=e;return D().setExpand({environment:t,isExpanded:!o(291335).sidebarExpandedStore.state,from:"action_registry",saveDetailsSidebarPreference:!0})}}),qe=(0,R().cs)({key:"toggle favorite",analyticsName:"Toggle favorite",displayName:void 0,validators:[I().jlf,I().ffD(I().tls),I().ffD(I().hrD)],shortcuts:["toggleFavorite"],closeParentMenu:!0,action:e=>{let{environment:t}=e;const{currentSpaceViewStore:n}=F().default.state,i=De();if(!n||!i)return;const r=(0,o(344056).Z)({spaceViewStore:n,pageId:i.id})?D().unbookmarkPage:D().bookmarkPage;k().createAndCommit({userAction:"actionRegistry.toggleFavorite",environment:t,canUndo:!0,perform:e=>r({spaceViewStore:n,store:i,transaction:e})})}}),We=(0,R().cs)({key:"toggle update sidebar",analyticsName:"Toggle update sidebar",displayName:void 0,validators:[],shortcuts:["toggleUpdateSidebar"],closeParentMenu:!0,action:e=>{let{environment:t}=e;if(O().default.state.open){const e=o(521635).Z.getPanelState("peek"),n=O().default.state.targetStore,i=null==n?void 0:n.getAssociatedCollectionStore();if(!i)return;const r=i.getLayoutStore();if(!r)return;e.isOpen?(0,P().n)({environment:t,layoutStore:r,from:"keyboard_default",panelLocation:"peek"}):(0,P().U)({environment:t,layoutStore:r,from:"keyboard_default",panelLocation:"peek"})}else D().setUpdateExpand({environment:t,isExpanded:!(0,o(589525).Sx)(t),from:"keyboard_default",saveDetailsSidebarPreference:!0})}}),Ge=(0,R().cs)({key:"toggle both sidebars",analyticsName:"Toggle both sidebars",displayName:void 0,validators:[],shortcuts:["toggleBothSidebars"],closeParentMenu:!0,action:e=>{let{environment:t}=e;D().toggleBothSidebars(t)}}),$e=(0,R().cs)({key:"open comments tab in update sidebar",analyticsName:"Open comments tab in update sidebar",displayName:void 0,validators:[],shortcuts:["openCommentsTabInUpdateSidebar"],closeParentMenu:!0,action:e=>{let{environment:t}=e;D().setUpdateExpand({environment:t,isExpanded:!0,from:"keyboard_comments",saveDetailsSidebarPreference:!0}),D().setUpdateSidebarTab(U().gY.Comments)}}),Qe=(0,R().cs)({key:"open updates tab in update sidebar",analyticsName:"Open updates tab in update sidebar",displayName:void 0,validators:[],shortcuts:["openUpdatesTabInUpdateSidebar"],closeParentMenu:!0,action:e=>{let{environment:t}=e;D().setUpdateExpand({environment:t,isExpanded:!0,from:"keyboard_updates",saveDetailsSidebarPreference:!0}),D().setUpdateSidebarTab(U().gY.Updates)}}),Ye=(0,R().cs)({key:"open link annotation menu",displayName:se.createLinkName,analyticsName:se.createLinkName.defaultMessage,validators:[I().DaG,T().K,I().U4I,I().ryx,I().ffD(I().tls)],shortcuts:["openLinkMenuOrOpenSearch"],closeParentMenu:!0,action:()=>o(33649).dz({type:"focusOnly",focus:!0})}),Je=(0,R().cs)({key:"open equation annotation menu",displayName:se.createEquationName,analyticsName:se.createEquationName.defaultMessage,validators:[I().DaG,I().ffD(I().or([I().Khw,I().T29,I().QYD,I().DUX]))],shortcuts:["openEquationMenu"],closeParentMenu:!0,action:e=>o(198732).qn({environment:e.environment,analyticsFrom:"input_keyboard_shortcut"})}),Xe=(0,R().cs)({key:"exit app",analyticsName:"Exit app",displayName:void 0,validators:[I().ffD(I().NWv),I().DtP],shortcuts:["backbutton"],closeParentMenu:!0,action:e=>{let{environment:t}=e;if(t.mobileNative)if((0,x().__)(t)){const{TabbedRouterStore:e}=t;"home"!==e.state.activeTab?o(96271).S({environment:t,tab:"home",navigationAction:"pop",navigationSource:"mobile-back-navigation"}):t.mobileNative.exitApp()}else t.mobileNative.exitApp()}}),et=(0,R().cs)({key:"command left",analyticsName:"Go back",displayName:void 0,validators:[I().NWv,I().ffD(I().DaG)],shortcuts:["commandLeft"],closeParentMenu:!0,action:(e,t)=>y().op(e.environment)}),tt=(0,R().cs)({key:"command right",analyticsName:"Go forward",displayName:void 0,validators:[I().vyP,I().ffD(I().DaG)],shortcuts:["commandRight"],closeParentMenu:!0,action:()=>y().eH()}),ot=(0,R().cs)({key:"go back",analyticsName:"Go back",displayName:void 0,validators:[I().NWv],shortcuts:["goBack","backbutton"],closeParentMenu:!0,action:e=>{let{environment:t}=e;return y().op(t)}}),nt=(0,R().cs)({key:"go forward",analyticsName:"Go forward",displayName:void 0,validators:[I().vyP],shortcuts:["goForward"],closeParentMenu:!0,action:()=>y().eH()}),it=(0,R().cs)({key:"go up",analyticsName:"Go up",displayName:void 0,validators:[()=>y().LU()],shortcuts:["goUp"],closeParentMenu:!0,action:e=>{let{environment:t}=e;return y().up(t)}}),rt=(0,R().cs)({key:"switch spaces pre tabs",analyticsName:"Switch spaces pre tabs",displayName:void 0,validators:[I().daU,I().ffD(I().VcC)],shortcuts:["switchSpacesPreTabs"],closeParentMenu:!0,action:(e,t)=>{let{environment:o}=e;if(!t||!le(t))return;t.preventDefault();const i=parseInt(n()(t.keyCode)),{currentUserRootStore:r,currentUserSettingsStore:a}=F().default.state;r&&a&&(w()._u({environment:o,index:i-1,userRootStore:r,userSettingsStore:a}),c().so(o))}}),at=(0,R().cs)({key:"switch spaces post tabs",analyticsName:"Switch spaces post tabs",displayName:void 0,validators:[I().daU,I().VcC],shortcuts:["switchSpacesPostTabs"],closeParentMenu:!0,action:(e,t)=>{let{environment:o}=e;if(!t||!le(t))return;t.preventDefault();const i=parseInt(n()(t.keyCode)),{currentUserRootStore:r,currentUserSettingsStore:a}=F().default.state;r&&a&&(w()._u({environment:o,index:i-1,userRootStore:r,userSettingsStore:a}),c().so(o))}}),st=(0,R().cs)({key:"open settings",analyticsName:"Open settings",displayName:void 0,validators:[I().daU,I().EDF],shortcuts:["settings"],closeParentMenu:!0,action:e=>{o(454393).r$()}}),lt=(0,R().cs)({key:"new page",analyticsName:"New page",displayName:void 0,validators:[I().ROK,I().jlf,I().or([I().daU,I().Fxc])],shortcuts:["newPage"],closeParentMenu:!0,action:e=>{let{environment:t}=e;D().quickAddPage({environment:t,from:"cmd_n"})}}),ct=(0,R().cs)({key:"turn into type",displayName:R().RE.turnIntoName,analyticsName:R().RE.turnIntoName.defaultMessage,validators:[I().J5S,I().ffD(I().OPg),o(889765).c,I().wFS],shortcuts:["turnIntoType"],closeParentMenu:!0,action:async(e,t)=>{let{blocks:i,environment:a}=e;const s=await(0,o(577041).Sk)();if(!t||!le(t))return;t.preventDefault();const l=parseInt(n()(t.keyCode)),c=r().PH[l];k().createAndCommit({userAction:"actionRegistry.turnIntoTypeViaKeyboard",environment:a,canUndo:!0,perform:e=>{s({environment:a,blocks:i,blockType:c,transaction:e})}})}}),dt=(0,R().cs)({key:"open experiment settings",displayName:void 0,analyticsName:"openExperimentSettings",validators:[o(332504).d],shortcuts:["openExperimentSettings"],closeParentMenu:!0,action:()=>{j().default.setState({...j().default.state,open:!0,currentTab:"experiments",defaultSubtab:void 0})}}),ut=[ue({key:"toggle bold",displayName:se.boldName,analyticsName:se.boldName.defaultMessage,shortcuts:["toggleBold"],annotation:["b"]}),ue({key:"toggle italics",displayName:se.italicName,analyticsName:se.italicName.defaultMessage,shortcuts:["toggleItalics"],annotation:["i"]}),ue({key:"toggle strike",displayName:se.strikeThroughName,analyticsName:se.strikeThroughName.defaultMessage,shortcuts:["toggleStrike"],annotation:["s"]}),ue({key:"toggle underline",displayName:se.underlineName,analyticsName:se.underlineName.defaultMessage,shortcuts:["toggleUnderline"],annotation:[o(955620).GKr.Underline]})],pt=(0,R().cs)({key:"toggle dark mode",displayName:se.darkModeName,analyticsName:se.darkModeName.defaultMessage,validators:[],shortcuts:["toggleDarkMode"],closeParentMenu:!0,action:e=>{let{environment:t}=e;const n="light"===t.ThemeStore.state.mode?"dark":"light";o(76254).Y7(n)}}),mt=(0,R().cs)({key:"open peek view as page",displayName:se.openAsPageName,analyticsName:se.openAsPageName.defaultMessage,validators:[I().Txk],shortcuts:["commandEnter"],closeParentMenu:!0,action:e=>{let{environment:t}=e;O().default.peekTargetStore.state&&b()._c({environment:t,store:O().default.peekTargetStore.state,pageVisitSource:i().tY.Expand})}}),ft=(0,R().cs)({key:"toggle all toggles",displayName:se.openAllTogglesName,analyticsName:se.openAllTogglesName.defaultMessage,validators:[],shortcuts:["toggleAllToggles"],closeParentMenu:!0,action:e=>{let{environment:t}=e;const n=C().np();n&&o(94912).X_(t,n)}});function gt(e){return e.actions.filter(ae).map((t=>({...t,searchName:[e.title,t.displayName].filter(Boolean).join(" ")})))}const vt=(0,R().cs)({key:"toggle recording input latency",displayName:se.toggleRecordingInputLatencyName,analyticsName:se.toggleRecordingInputLatencyName.defaultMessage,validators:[],shortcuts:["toggleRecordingInputLatency"],closeParentMenu:!0,action:()=>{o(198863).toggleRecordingInputLatency()}}),ht=(0,R().cs)({key:"toggle qna in corner",displayName:se.toggleQnAMessage,analyticsName:"toggleQnAPane",validators:[I().lvA,I().ffD(I().DaG),I().ffD(I().KHO),...o(638700).fF],shortcuts:["commandJ"],closeParentMenu:!0,action:async e=>{let{environment:t}=e;const{assistantDependency:n}=await Promise.resolve().then(o.bind(o,650996)),{assistantMenuStore:i,assistantOriginElementStore:r,assistantAnalyticsActions:a,assistantMenuActions:s}=await n.load();if(N().KR.shouldShowAssistantInCorner(t.device))if(i.state.open){await s.closeAssistantRightHandSideMenu({environment:t}),r.setAssistantLastViewedTime();const e=V().default.getActiveSession();e&&a.trackAssistantClosed(t,{sessionContext:e,from:"button"})}else s.openAssistantRightHandSideMenu({environment:t,from:"shortcut"})}}),_t=[ft,J,X,o(83110).G,...q().UO.actions,q().o1,o(681157).d,je,Ke,W().T,W().U,ze,$().KB,$().Jw,re().B,re().L9,te().$,te().g,K().UI,K().VJ,(0,o(712555).E)("keyboard_shortcut"),ge,ve,ie,we,ke,Ce,Ie,Me,xe,Te,Le,Oe,Pe,Ae,Ve,he,_e,be,ye,ht,Se,z().OY,o(182008).Hs,z().NY,Ye,Je,Xe,ot,nt,et,tt,Re,Be,Ee,it,G().A,G().Q,rt,at,Fe,Ne,ct,$().Qk,$().OW,He,Ge,We,$e,Qe,st,lt,H().NE,pt,mt,Ze,vt,qe,pe,me,fe,B,H().gz,dt,...ut,...gt(o(790082).gH),...gt(o(159357).te)]},681157:(e,t,o)=>{o.d(t,{d:()=>s});var n=()=>o(421797),i=(o(667294),o(785893));const r=(0,o(827282).IU)("fullscreen",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M1.25293 6.82031C1.25293 9.88965 3.74805 12.3848 6.81738 12.3848C7.95898 12.3848 9.00488 12.0361 9.87988 11.4414L13.0244 14.5859C13.2158 14.7842 13.4824 14.873 13.749 14.873C14.3301 14.873 14.7471 14.4355 14.7471 13.8682C14.7471 13.5947 14.6514 13.3418 14.4668 13.1504L11.3428 10.0195C11.9922 9.12402 12.3818 8.0166 12.3818 6.82031C12.3818 3.75098 9.88672 1.25586 6.81738 1.25586C3.74805 1.25586 1.25293 3.75098 1.25293 6.82031ZM2.70215 6.82031C2.70215 4.55078 4.54102 2.70508 6.81738 2.70508C9.08691 2.70508 10.9326 4.55078 10.9326 6.82031C10.9326 9.08984 9.08691 10.9355 6.81738 10.9355C4.54102 10.9355 2.70215 9.08984 2.70215 6.82031ZM4.52051 6.82031C4.52051 7.12109 4.75293 7.35352 5.05371 7.35352H6.27734V8.58398C6.27734 8.88477 6.5166 9.11719 6.81738 9.11719C7.11816 9.11719 7.35059 8.87793 7.35059 8.58398V7.35352H8.58105C8.875 7.35352 9.11426 7.12109 9.11426 6.82031C9.11426 6.51953 8.875 6.28711 8.58105 6.28711H7.35059V5.05664C7.35059 4.7627 7.11133 4.52344 6.81738 4.52344C6.5166 4.52344 6.27734 4.7627 6.27734 5.05664V6.28711H5.05371C4.75293 6.28711 4.52051 6.51953 4.52051 6.82031Z"})});const a=(0,o(788860).vU)({fullScreenName:{id:"action.fullScreen.name",defaultMessage:"Full screen"}}),s=(0,o(38562).cs)({key:"full screen",displayName:a.fullScreenName,analyticsName:a.fullScreenName.defaultMessage,svg:r,validators:[n().U7o,n().Cjo,n().ITt,n().ffD(n().DaG)],shortcuts:["space"],closeParentMenu:!0,action:e=>o(453999).dK(e)})},668881:(e,t,o)=>{o.d(t,{Q:()=>v,A:()=>h});o(267602),o(916054),o(667294);var n=o(785893);const i={viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"m17.78 8.72-5-5a.75.75 0 1 0-1.06 1.06l3.72 3.72H5.25a2.75 2.75 0 0 0-2.75 2.75v4.5a.75.75 0 0 0 1.5 0v-4.5c0-.69.56-1.25 1.25-1.25h10.19l-3.72 3.72a.75.75 0 1 0 1.06 1.06l5-5a.75.75 0 0 0 0-1.06"})},r=(0,o(827282).IU)("arrowTurnUpRight",i);var a=()=>o(788860),s=()=>o(696459),l=()=>o(765056),c=()=>o(525038),d=()=>o(525496),u=()=>o(421797),p=()=>o(605067);var m=()=>o(876822),f=()=>o(38562);const g=(0,a().vU)({moveToName:{id:"action.moveTo.name",defaultMessage:"Move to"}}),v=(0,f().cs)({key:"move page to",displayName:g.moveToName,analyticsName:g.moveToName.defaultMessage,shortcuts:["moveTo"],validators:[u().ffD(u().q4$)],closeParentMenu:!0,action:e=>{let{environment:t,publicEditMode:n,lazyDependencies:i}=e;const{mainEditorCurrentBlockStore:r}=m().default.state;if(!r)return;const a=h.validators||[],s=document.querySelector(`.${o(247724).mSZ}`);if(!s)return;const l={environment:t,blocks:[r],originRect:s.getBoundingClientRect(),publicEditMode:n,lazyDependencies:i};a.every((e=>e(l)))&&h.action(l)}}),h=(0,f().cs)({key:"move to",displayName:g.moveToName,analyticsName:g.moveToName.defaultMessage,svg:r,shortcuts:["moveTo"],validators:[u()._z,u().jlf,u().ffD(u().$I3),u().ffD(u().xwj),u().ffD(u().jBR),u().ffD(u().P99(o(156642).Ti.externalObjectInstancePage)),u().ffD(u().Q_M),u().ffD(u().xDj),u().ffD(u().CJE),u().ffD(u().Hjo),u().k5s,u().ffD(u().q4$),u().ffD(u().uY7),u().ffD(u().ypk)],closeParentMenu:!0,render:(e,t,i)=>{let{styles:s}=i;const{environment:l,blocks:c}=t,d=p().hD({environment:l,blocks:c}),u=d.canMoveBlocks?void 0:_(d.reason),m=Boolean(u);return(0,n.jsx)(o(654133).Z,{placement:o(998901).Placement.Right,textWrap:!0,style:{maxWidth:240},disableTooltip:!m,renderTooltip:()=>u,render:t=>(0,n.jsx)(o(855238).Z,{...(0,o(164079).Z)(e,t),...s,svg:r,title:(0,n.jsx)(a()._H,{...g.moveToName}),disabled:m,disabledFeedback:m,shortcut:"moveTo"})})},action:async e=>{const{environment:t}=e,n=p().hD({environment:t,blocks:e.blocks});if(!n.canMoveBlocks){const{reason:t}=n;return void function(e){let{environment:t,reason:n}=e;switch((()=>o(102182))().oV({label:_(n)}),n.key){case"lockedTopLevelTeamPage":l().fW(t,{type:"locked_top_level_team"});break;case"needsFullAccess":case"needsEditAccessOnParent":case"unknown":l().fW(t,{type:"no_permission"});break;default:(0,s().t1)(n)}}({environment:e.environment,reason:t})}let i=[];const r=m().default.state.mainEditorCurrentBlockStore,a=o(718959).np();e.blocks.length>0&&e.blocks[0]!==r?i=e.blocks:a&&(i=[a]),e.environment.device.isMobileNative?await c().$X({environment:e.environment,blocks:i,originRect:e.originRect,moveToContext:"action_menu"}):c().bA({environment:e.environment,blocks:i,originRect:e.originRect,moveToContext:"action_menu"})}});function _(e){var t;switch(e.key){case"needsFullAccess":return(0,n.jsx)(a()._H,{id:"blockMenu.moveTo.disabled.fullAccess.reason",defaultMessage:'You need "Full access" to this page to move it.'});case"needsEditAccessOnParent":return null!==(t=e.parentStore)&&void 0!==t&&t.canRead()?(0,n.jsx)(a()._H,{id:"blockMenu.moveTo.disabled.editAccessOnParent.reasonWithParentName",defaultMessage:"You need edit access to {parentPageName} to move this page.",values:{parentPageName:(0,n.jsx)(d().Z,{store:e.parentStore,useInvertedColors:!0})}}):(0,n.jsx)(a()._H,{id:"blockMenu.moveTo.disabled.editAccessOnParent.reason",defaultMessage:"You need edit access to the parent page to move this page."});case"unknown":return(0,n.jsx)(a()._H,{id:"action.doNotHavePermissionToMoveBlock",defaultMessage:"You do not have permission to move this page."});case"lockedTopLevelTeamPage":return(0,n.jsx)(a()._H,{id:"action.isLockedTopLevelTeamPage",defaultMessage:"This teamspace has its sidebar locked. You must be a teamspace owner to move this page."});default:(0,s().t1)(e)}}},55853:(e,t,o)=>{o.d(t,{OW:()=>E,Qk:()=>B,Y7:()=>h,KB:()=>C,ej:()=>R,Ob:()=>A,Jw:()=>w});var n=()=>o(506347),i=()=>o(396136),r=()=>o(602299),a=()=>o(441530),s=()=>o(794586),l=()=>o(497065),c=()=>o(421797),d=()=>o(429725),u=(o(667294),o(785893));const p=(0,o(827282).IU)("newWindow",{viewBox:"0 0 18 14",svg:(0,u.jsx)("g",{children:(0,u.jsx)("path",{d:"M.9 11.234V2.915C.9 1.452 1.664.693 3.141.693h11.71c1.476 0 2.242.76 2.242 2.222v8.32c0 1.455-.766 2.221-2.242 2.221H3.142c-1.477 0-2.243-.759-2.243-2.222zM3.264 3.1a.643.643 0 00.635-.636.648.648 0 00-.635-.636c-.356 0-.636.3-.636.636 0 .342.28.636.636.636zm2.016 0a.638.638 0 00.63-.636.642.642 0 00-.63-.636.65.65 0 00-.642.636c0 .342.287.636.642.636zm2.01 0a.643.643 0 00.636-.636.648.648 0 00-.636-.636c-.349 0-.636.3-.636.636 0 .342.287.636.636.636zm-5.052 8.018c0 .663.349.998.985.998H14.77c.628 0 .984-.335.984-.998V4.241H2.239v6.877z"})})});var m=()=>o(876822),f=()=>o(482162),g=()=>o(38562);const v=(0,o(788860).vU)({openInFullPage:{id:"action.navigation.openInFullPage",defaultMessage:"Open in full page"},openInSidePeek:{id:"action.navigation.openInSidePeek",defaultMessage:"Open in side peek"},openInNewTab:{id:"action.openInNewTab.name",defaultMessage:"Open in new tab"},openInNewWindow:{id:"action.openInNewWindow.name",defaultMessage:"Open in new window"},openInFullPageShort:{id:"action.navigation.openInFullPageShort",defaultMessage:"Full page"},openInSidePeekShort:{id:"action.navigation.openInSidePeekShort",defaultMessage:"Side peek"},openInNewTabShort:{id:"action.openInNewTab.nameShort",defaultMessage:"New tab"},openInNewWindowShort:{id:"action.openInNewWindow.nameShort",defaultMessage:"New window"}});function h(e){var t;const o=e.blocks[0];if(!o)return!1;if(null!==(t=o.getModel())&&void 0!==t&&t.isNavigableBlock())return!0;if(o.isType("alias")){var n;const e=null===(n=o.getAliasTargetStore())||void 0===n?void 0:n.getModel();if((null==e?void 0:e.table)===i().iU&&null!=e&&e.isNavigableBlock())return!0}return!1}function _(e){return f().default.isSidePeekOpen()}const b=S(!1),y=S(!0);function S(e){return(0,g().cN)({key:"open in full page",displayName:e?v.openInFullPageShort:v.openInFullPage,analyticsName:e?v.openInFullPageShort.defaultMessage:v.openInFullPage.defaultMessage,svg:o(39530).M,validators:[c().U7o,h,_],closeParentMenu:!0,action:e=>{const t=e.blocks[0],o=t.getAliasTargetStore()??t;if(o.table===r().x_)return;const i=(0,d().ZP)({store:o,pageVisitSource:n().tY.LinkInPage,openInCenterPeek:!t.isPost()&&void 0});l().c4({environment:e.environment,url:i})}})}const w=I(!1),k=I(!0);function I(e){return(0,g().cs)({key:"open side peek",displayName:e?v.openInSidePeekShort:v.openInSidePeek,analyticsName:e?v.openInSidePeekShort.defaultMessage:v.openInSidePeek.defaultMessage,svg:o(466043).y,shortcuts:["openInSidePeek"],validators:[c().U7o,h,c().ffD(c().tqC),c().WCc,c().ffD(c().hrD)],closeParentMenu:!0,action:e=>{var t;const{route:i}=e.environment.RouterStore.state,a="chat"===i.name;let s;"team"===i.name&&(s=i.teamId);if(!(null===(t=m().default.state.mainEditorCurrentBlockStore)||void 0===t?void 0:t.id)&&!a&&void 0===s)return;const c=e.blocks[0],u=c.getAliasTargetStore()??c;if(u.table===r().x_)return;const p=a?(0,o(403721).tj)({pageId:c.id,pageVisitSource:n().tY.AIChat,scrollToBlockId:void 0,isMobile:e.environment.device.isMobile}):void 0!==s?(0,o(161002).y)({teamId:s,peekInfo:{peekViewBlockId:c.id,peekMode:"s"}}):(0,d().ZP)({store:u,openInSidePeek:!0,peekViewBlockId:u.id,peekMode:"s",pageVisitSource:n().tY.PeekOpen});l().c4({environment:e.environment,url:p})}})}const C=T(!1),x=T(!0);function T(e){return(0,g().cs)({key:"navigate to page in new tab",analyticsName:"Navigate to page in new tab",displayName:e?v.openInNewTabShort:v.openInNewTab,svg:o(338217).J,validators:[c().U7o,h,c().ffD(c().tqC),c().ffD(c().K5G)],shortcuts:["commandShiftEnter"],closeParentMenu:!0,action:e=>{let{blocks:t,environment:o}=e;if(t[0].isType("alias")){var i;const e=t[0];if(!(null===(i=m().default.state.mainEditorCurrentBlockStore)||void 0===i?void 0:i.id))return;const s=e.getAliasTargetStore()??e;if(s.table===r().x_)return;a().ru({environment:o,blocks:[s],openInNew:"tab",pageVisitSource:n().tY.LinkInPage})}else a().ru({environment:o,blocks:t,openInNew:"tab",pageVisitSource:n().tY.LinkInPage})}})}const M=P(!1);function P(e){return(0,g().cN)({key:"navigate to page in new window",analyticsName:"Navigate to page in new window",displayName:e?v.openInNewWindowShort:v.openInNewWindow,svg:p,validators:[c().U7o,c().DFt,c().tYA,c().ffD(c().vjj),c().ffD(c().tqC),c().ffD(c().K5G)],closeParentMenu:!0,action:e=>{let{blocks:t,environment:o}=e;a().ru({environment:o,blocks:t,openInNew:"window",pageVisitSource:n().tY.LinkInPage})}})}const A=[x,P(!0),y,k],R=[C,M,b,w],B=(0,g().cs)({key:"go up one page",analyticsName:"Go up one page",displayName:void 0,validators:[c().Txk],shortcuts:["peekUp"],closeParentMenu:!0,action:()=>s().Qk()}),E=(0,g().cs)({key:"go down one page",analyticsName:"Go down one page",displayName:void 0,validators:[c().Txk],shortcuts:["peekDown"],closeParentMenu:!0,action:()=>s().OW()})},562856:(e,t,o)=>{o.d(t,{$:()=>s,g:()=>l});var n=()=>o(421797),i=()=>o(502893),r=()=>o(38562);const a=(0,o(788860).vU)({renameName:{id:"action.rename.name",defaultMessage:"Rename"}}),s=(0,r().cs)({key:"rename page",displayName:a.renameName,analyticsName:a.renameName.defaultMessage,svg:i().H,validators:[n().YZb,n().k5s,n().U7o,n().DFt,n().ffD(n().NnH),n().ffD(n().p1d),n().ffD(n().jBR),n().ffD(n().CJE),n().ffD(n().P99(o(156642).Ti.externalObjectInstancePage)),n().ffD(n().Q_M),n().ffD(n().K5G),n().ffD(n().q4$),n().ffD(n().uY7)],shortcuts:["rename"],closeParentMenu:!0,action:e=>{const{blocks:t,originRect:n}=e;if(t.length>0)return o(547586).$({blockStore:t[0],originRect:n})}}),l=(0,r().cs)({key:"rename file",displayName:a.renameName,analyticsName:a.renameName.defaultMessage,svg:i().H,validators:[n().J5S,n().U7o,n().$H4,n().ffD(n().j2U("table"))],shortcuts:["rename"],closeParentMenu:!0,action:e=>{const{blocks:t,originRect:n}=e;if(t.length>0)return o(951109).g({blockStore:t[0],originRect:n})}})},712555:(e,t,o)=>{o.d(t,{E:()=>u});var n=()=>o(244540),i=()=>o(78449),r=()=>o(421797),a=()=>o(889765),s=()=>o(856929),l=()=>o(275023),c=()=>o(38562);const d=(0,o(788860).vU)({suggestName:{id:"action.suggest.name",defaultMessage:"Suggest"}});function u(e){return(0,c().cs)({key:"suggest",displayName:d.suggestName,analyticsName:d.suggestName.defaultMessage,svg:l().I,hideFromSlashActionMenu:!0,validators:[r().ffD(r().tqC),r().iR0,r().ffD(r().OPg),a().c,i().nZ,i().VS,r().or([r().U7o,s().K]),r().ffD(r().OXD)],shortcuts:["suggest"],closeParentMenu:!0,action:t=>{let{blocks:o,environment:i}=t;o[0]&&n().cA({environment:i,navigableBlockStore:o[0],mode:"suggest",location:e})}})}},236601:(e,t,o)=>{o.d(t,{L9:()=>g,B:()=>f});o(821057),o(670560),o(267602),o(470928),o(30005),o(241792);var n=()=>o(81954),i=()=>o(839002),r=()=>o(205228),a=()=>o(472753),s=()=>o(394961),l=()=>o(269299);async function c(e){const{environment:t,store:c}=e;if(!c.isTransclusionType())throw new(o(431595).p8)("Unknown transclusion type");const d=c.getRecordStoreUIParent();let u;if(u="transclusion_reference"===c.getType()?c.getTransclusionReferenceTargetStore():c,!d||!(0,o(852465).dz)(d)||!u)return;const p=function(e){return a().R.find((t=>t.getBlockStore()===e))}(u);if(!p)return;if("transclusion_container"===c.getType()){if(!(await p.confirmUnsyncTransclusionContainer()))return}else if(!(await p.confirmUnsyncTransclusionReference()))return;if(o(749826).default.checkGate({gateName:"server_side_unsync_block_enabled"})){const e=(0,o(782646).Lj)(t,o(110344).Z,{block:{id:c.pointer.id,spaceId:(0,n().J)(c.pointer.spaceId)}});"transclusion_reference"===c.getType()&&s().Z.addUnsyncingBlockId(c.id);for await(const t of e)o(855741).x.isSuccess(t)&&("started"===t.value.status||"succeeded"===t.value.status||("failed"===t.value.status?s().Z.removeUnsyncingBlockId(c.id):(0,o(696459).t1)(t.value.status)))}else{const e=u.getContentStores(),{duplicateBlock:a}=await(0,o(577041).dF)();l().createAndCommit({userAction:"transclusion_reference"===c.getType()?"transclusionActions.unsyncTransclusionReference":"transclusionActions.unsyncTransclusionContainer",environment:t,canUndo:!1,perform:u=>{s().Z.addUnsyncingBlockId(c.id);const p=[],m=e.map((e=>{const[o,i]=a({environment:t,stores:[e],addCopyName:!1,transaction:u,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!1,targetSpaceId:(0,n().J)(e.pointer.spaceId),baseUrl:r().default.domainBaseUrl,publicDomainName:r().default.publicDomainName,preferDuplicateLocation:"local"});return p.push(i),o[0]})),f=o(513670).d9(m).reverse().map((e=>{const{childStore:t}=o(282662).BE({parentStore:d,insertStore:e,afterStore:c,transaction:u});return t}));o(879952).Z5({environment:t,stores:f});const g=Promise.allSettled(p).then((e=>(e.forEach((e=>{if("rejected"===e.status||"error"===e.value.status)throw new Error("Remote duplication failed")})),!0))),v=i().UZ();i().af([g,v.promise]).then((async e=>{l().createAndCommit({userAction:"transclusion_reference"===c.getType()?"transclusionActions.unsyncTransclusionReference.cleanup":"transclusionActions.unsyncTransclusionContainer.cleanup",environment:t,canUndo:!0,perform:e=>{o(453999).Od({store:c,transaction:e})}}),"transclusion_container"===c.getType()&&await o(824462).callApi({eventName:"deleteBlocks",environment:t,data:{blocks:[{id:c.id,spaceId:(0,n().J)(c.pointer.spaceId)}],permanentlyDelete:!1}})})).finally((()=>{s().Z.removeUnsyncingBlockId(c.id)})),u.postSubmitCallbacks.push((e=>{e?v.reject(e):v.resolve(!0)}))}})}}var d=()=>o(421797),u=()=>o(257013),p=()=>o(38562);const m=(0,o(788860).vU)({unsyncTransclusionReferenceName:{id:"action.unsyncTransclusionReference.name",defaultMessage:"Unsync"},unsyncTransclusionReferenceFuzzySearch:{id:"action.unsyncTransclusionReference.fuzzySearchKeywords",defaultMessage:"Unsync ungroup"},unsyncTransclusionContainerName:{id:"action.unsyncTransclusionContainerName.name",defaultMessage:"Unsync all"},unsyncTransclusionContainerFuzzySearch:{id:"action.unsyncTransclusionContainer.fuzzySearchKeywords",defaultMessage:"Unsync all ungroup"}}),f=(0,p().cs)({key:"unsyncTransclusionReference",displayName:m.unsyncTransclusionReferenceName,analyticsName:m.unsyncTransclusionReferenceName.defaultMessage,fuzzySearchKeywords:m.unsyncTransclusionReferenceFuzzySearch,svg:u().T,validators:[d().J5S,d().FYR,d().U7o],shortcuts:["ungroup"],closeParentMenu:!0,action:e=>{c({environment:e.environment,store:e.blocks[0]})}}),g=(0,p().cs)({key:"unsyncTransclusionContainer",displayName:m.unsyncTransclusionContainerName,analyticsName:m.unsyncTransclusionContainerName.defaultMessage,fuzzySearchKeywords:m.unsyncTransclusionContainerFuzzySearch,svg:u().T,validators:[d().J5S,d().muB,d().U7o],shortcuts:["ungroup"],closeParentMenu:!0,action:e=>{c({environment:e.environment,store:e.blocks[0]})}})},790082:(e,t,o)=>{o.d(t,{WL:()=>M,qF:()=>k,VL:()=>T,sY:()=>y,gH:()=>I});o(492176),o(7961),o(241792),o(667294);var n=()=>o(156642),i=()=>o(513670),r=()=>o(696459),a=()=>o(269299),s=()=>o(495228),l=()=>o(388284),c=()=>o(677559);const d=new(c().Ss)("NewPageInMenu",(async()=>Promise.all([o.e(62743),o.e(52774),o.e(87597),o.e(44832),o.e(63690),o.e(5242),o.e(90424),o.e(81580),o.e(84325),o.e(83348),o.e(33411),o.e(2971),o.e(53335),o.e(71896),o.e(46616),o.e(63707),o.e(86609),o.e(91253),o.e(4642),o.e(6612),o.e(61171),o.e(23179),o.e(75377),o.e(31020),o.e(2942),o.e(58591),o.e(54803),o.e(1953),o.e(10216),o.e(86518),o.e(42055),o.e(94540),o.e(63257),o.e(34291),o.e(1913),o.e(27039),o.e(79418),o.e(86755),o.e(87647),o.e(23721),o.e(43689),o.e(15628),o.e(24541)]).then(o.bind(o,372473)))),u=(0,c().iS)(d,(e=>e.default));var p=()=>o(577041),m=()=>o(421797),f=()=>o(53060),g=()=>o(889765),v=()=>o(856929),h=()=>o(38562),_=o(785893);const b={column_list:!0,transclusion_container:!0},y=(0,o(788860).vU)({turnIntoSection:{id:"action.section.turnInto",defaultMessage:"Turn into"},newPageInName:{id:"action.pageIn.name",defaultMessage:"Page in"},turnIntoMention:{id:"action.turnIntoMention",defaultMessage:"Turn into mention"}}),S=(0,h().cN)({key:"new page in section",displayName:y.newPageInName,analyticsName:y.newPageInName.defaultMessage,closeParentMenu:!0,svg:o(292832).a,hideFromSlashActionMenu:!0,validators:[m().J5S,m().ffD(m().OPg),m().ffD(m().P99("page")),m().ffD(m().Fxc),g().c,m().wFS],render:(e,t,o)=>{const{onFocus:n,onAccept:i,extendItemTitle:r,sectionTitle:a}=o;return(0,_.jsx)(u,{...e,title:y.newPageInName,sectionTitle:a??"",showSectionTitle:Boolean(r),blocksToTransform:t.blocks,onFocus:n,onAccept:i?()=>i(S,t,void 0):void 0})},action:e=>{}});function w(e){const{isPersonalizedActionsEnabled:t}=e,o=(0,r().Yd)(n().Zi),i=o.findIndex((e=>"page"===e)),a=o.map((e=>C(e,t))),s=Object.values(n().MF).map((e=>C(e,t)));return[...a.slice(0,i+1),S,...a.slice(i+1),...s]}function k(e){const{isPersonalizedActionsEnabled:t}=e??{};return(0,h().$J)({key:"turn into actions",title:y.turnIntoSection,render:e=>(0,_.jsx)(l().Z,{...e}),actions:w({isPersonalizedActionsEnabled:t})})}const I=k();function C(e,t){const o=f().Hc[e],r=b[e];return{key:`turn into ${e}`,displayName:o.displayName,analyticsName:o.analyticsName,analyticsActionType:"turn_block_into",searchName:o.searchName,validators:i().oA([m().J5S,r?void 0:m().wFS,g().c,"transclusion_container"===e?m().xDy([m().ffD(m().wTx),x]):void 0,"slide"===e?m().zqE:void 0,(0,n().sX)(e)?e=>1===e.blocks.length:void 0,(0,n().UW)(e)?e=>!1:void 0,"column_list"===e?e=>{if(!e.blocks)return!1;const t=e.blocks.length;if(t<2||t>5)return!1;const o=e.blocks[0].getParentBlockStore();if(!o)return!1;const n=e.blocks.map((e=>{const t=e.getParentBlockStore();return(null==t?void 0:t.id)!==o.id?-1:o.getRenderableContentIds().indexOf(e.id)}));for(let i=0;i<n.length;i++)if(i>0&&n[i-1]+1!==n[i])return!1;return!0}:void 0,(0,n().Fx)(e)?()=>!0:void 0,"mermaid_code_block"===e?()=>!1:void 0,"encrypted_text"===e?m().ZNI:void 0]),shortcuts:"transclusion_container"===e?["group"]:void 0,closeParentMenu:!0,action:async t=>{let{environment:o,blocks:n}=t;const i=await(0,p().Sk)();a().createAndCommit({userAction:`actionRegistry.turnIntoAction.${e}`,environment:o,canUndo:!0,perform:t=>{i({environment:o,blocks:n,blockType:e,transaction:t})}})},render:(e,t,n)=>{const{extendItemTitle:i,sectionTitle:r,styles:a}=n,l=T(t,o);return(0,_.jsx)(s().ZP,{...e,...o,title:o.displayName,format:s().Qd.TurnInto,selected:l,showSectionTitle:Boolean(i),sectionTitle:r??"",desktopTitleStyle:null==a?void 0:a.desktopTitleStyle})},nativeImageReference:()=>(0,h().aS)({thumbnail:!0===t&&o.mobileNativeThumbnail?o.mobileNativeThumbnail():o.thumbnail})}}function x(e){return!(0,v().K)()||m().DaG()&&m().ECq(e)}function T(e,t){const o=e.blocks[0];if(!o)return!1;const n=o.getType()===t.blockType;if(n&&("header"===t.blockType||"sub_header"===t.blockType||"sub_sub_header"===t.blockType)){const e=o.getFormat().toggleable;return!(e&&!t.key.includes("toggle"))&&!(!e&&t.key.includes("toggle"))}return n}const M={key:"convert link",render:e=>(0,_.jsx)(l().Z,{...e}),actions:[(0,h().cN)({key:"turn to mention",displayName:y.turnIntoMention,analyticsName:y.turnIntoMention.defaultMessage,validators:[m().J5S,m().tz$],closeParentMenu:!0,svg:o(424097).z,action:e=>{let{blocks:t,environment:i}=e;const r=t.at(0);null!=r&&r.isType(n().Ti.alias)&&o(28063).bh(i,r)}})]}},439373:(e,t,o)=>{o.d(t,{k:()=>u});o(821057);var n=()=>o(506347),i=()=>o(156642),r=()=>o(396136),a=()=>o(602299),s=()=>o(205228),l=()=>o(239482),c=()=>o(826955),d=()=>o(636340);function u(e){const{environment:t,parentBlockStore:o,targetStore:u,transaction:p,isPagePreview:m}=e;if(!u.isDefined())throw new Error("Target store was not defined.");if(!o.isDefined())throw new Error("Parent block store was not defined.");const f=u instanceof c().G;let g;if(!f){if(l().Dg(u)&&u.isDefined()){const e=u.getParentStore(),t=null==e?void 0:e.getParentStore();var v;if(null!=e&&e.isDefined())g=null==t||null===(v=t.getModel())||void 0===v?void 0:v.getRenderUrl({getRecordModel:u.getRecordModel,baseUrl:s().default.domainBaseUrl,discussionId:e.id,pageVisitSource:n().tY.LinkInPage})}}const h=d().j4({environment:t,type:i().Ti.alias,format:{alias_pointer:{table:f?r().iU:a().x_,id:u.id,spaceId:u.getSpaceId()},comment_alias_url:g,alias_page_preview:m||void 0},spaceId:o.getSpaceId(),inMemoryRecordCache:o.inMemoryRecordCache,transaction:p}).pointer.id;return c().G.createChildStore(o.getContentStore(),{table:r().iU,id:h,spaceId:o.getSpaceId()})}},198046:(e,t,o)=>{o.d(t,{x:()=>d,b:()=>c});var n=()=>o(247724),i=()=>o(641702),r=()=>o(472753),a=()=>o(495439),s=()=>o(594546);var l=()=>o(879952);function c(e){let{blockStore:t,entrypoint:o,environment:n}=e;const i=!t.getPropertyValue("alt_text");a().default.setState({open:!0,blockStore:t,originRect:u(t),isEmptyOnOpen:i}),function(e,t){s().K4(e,"alt_text_open",t)}(n,{entrypoint:o,is_empty:i})}function d(e){let t=0,o=!1;const n=a().default.state.blockStore;a().default.state.open&&null!=n&&n.getPropertyValue("alt_text")&&(t=(0,i().Xh)(n.getPropertyValue("alt_text"),n).length,o=a().default.state.isEmptyOnOpen),function(e,t){s().K4(e,"alt_text_close",t)}(e,{number_of_characters:t,did_create:o}),a().default.setState({open:!1,blockStore:n}),l().ZH({environment:e})}function u(e){var t;const o=r().R.findNodeFromStore(e);return o&&o instanceof Element?null===(t=o.querySelector(`.${n()._Xz}`))||void 0===t?void 0:t.getBoundingClientRect():void 0}},491927:(e,t,o)=>{o.d(t,{$X:()=>se,$q:()=>D,Af:()=>_e,By:()=>Fe,DB:()=>Re,DC:()=>qe,FT:()=>ge,Fj:()=>Ue,Hc:()=>Se,IM:()=>ue,JE:()=>W,Ji:()=>Z,Jr:()=>b,K1:()=>$,K9:()=>w,KI:()=>Te,Lf:()=>We,Md:()=>Ve,Mz:()=>M,NM:()=>f,Op:()=>Ae,P$:()=>oe,PL:()=>ve,P_:()=>Ke,Py:()=>S,R9:()=>ze,RO:()=>le,Rb:()=>Be,Rc:()=>L,TJ:()=>xe,UJ:()=>x,V:()=>Pe,VJ:()=>Me,WF:()=>J,XW:()=>m,XX:()=>te,Xe:()=>ot,YM:()=>ce,YO:()=>g,YU:()=>B,ZZ:()=>z,Zr:()=>ne,Zz:()=>He,_H:()=>E,_k:()=>H,a_:()=>q,ct:()=>_,dh:()=>k,du:()=>ye,dw:()=>I,eT:()=>C,eW:()=>Y,en:()=>re,f7:()=>Ne,fE:()=>Je,fM:()=>ae,g0:()=>ke,gL:()=>$e,gP:()=>X,g_:()=>he,gl:()=>Ce,iA:()=>de,iS:()=>v,ie:()=>p,ik:()=>O,jR:()=>y,j_:()=>Ye,jd:()=>Qe,kB:()=>et,kq:()=>Ee,l7:()=>Ie,mt:()=>T,n2:()=>me,nX:()=>tt,nl:()=>h,nz:()=>nt,q7:()=>Xe,qD:()=>je,r5:()=>V,rv:()=>R,sG:()=>A,sS:()=>De,sd:()=>P,tM:()=>K,tn:()=>be,tx:()=>we,uD:()=>G,ud:()=>ee,vN:()=>Ge,wd:()=>N,wy:()=>pe,xb:()=>F,xh:()=>fe,y:()=>Oe,y4:()=>Le,y9:()=>U,yT:()=>Q,yj:()=>ie,ze:()=>j});o(241792);var n=()=>o(492788),i=()=>o(599292),r=()=>o(342792),a=()=>o(594546),s=()=>o(718959),l=()=>o(861026),c=()=>o(749826),d=()=>o(965903),u=()=>o(465755);function p(e,t){a().$A({environment:e,userId:(0,r().F9)(t.user_id),traits:{...t,...t.tags?{original_tags:t.tags}:void 0,user_id:(0,r().F9)(t.user_id)}})}function m(e,t){a().$A({environment:e,userId:(0,r().F9)(t.user_id),traits:{...t,user_id:(0,r().F9)(t.user_id)}})}async function f(){await a().NM()}function g(e){a().K4(e,"delete_workspace_click"),c().default.logEvent("delete_workspace_click")}function v(e){a().K4(e,"quick_workspace_creation_click"),c().default.logEvent("quick_workspace_creation_click")}function h(e){a().K4(e,"workspace_invite_copy_link"),c().default.logEvent("workspace_invite_copy_link")}function _(e,t){a().lu(e,"edit_block_text_60","edit_block_text_60",60,t)}function b(e,t){a().K4(e,"todo_block_check",t)}function y(e,t){a().K4(e,"toggle_block_toggle")}function S(e,t){a().K4(e,"equation_block_edit",t)}function w(e,t){a().K4(e,"view_link_preview",t)}function k(e,t){n().default.afterNextFlush((()=>{let o;const n=d().default.state.stores[0];n&&(o=n.getType());const{parentTeamStore:i,...r}=t;u().ej(e,"block_action",`block_action-${t.analyticsName}-${t.from}-${t.block_id}`,60,{store:i,...r,final_block_type:o})}))}function I(e,t){a().lu(e,"idschema_client","idschema_client",3600,t)}function C(e){a().K4(e,"click_add_menu")}function x(e,t){a().K4(e,"edit_lock_toggle",t)}function T(e,t){a().K4(e,"rich_text_menu_click",t)}function M(e,t){a().K4(e,"update_page_section_visibility",t)}function P(e,t,o){a().K4(e,t,o)}function A(e,t){a().K4(e,"board_item_delete_newly_created",t)}function R(e,t,o){if(!0===o)a().K4(e,"edit_block_property_60",t);else{const o=(0,s().zj)(),{property_type:n,collection_id:i,collection_view_id:r}=t;a().lu(e,"edit_block_property_60",`edit_block_property_60-${o||""}-${n||""}-${i||""}-${r||""}`,60,t)}}function B(e,t){a().K4(e,"click_block_property_url",t)}function E(e,t){a().K4(e,"create_property",t),c().default.logEvent("create_property",String(Boolean(t.is_suggested_property)),t)}function D(e,t){a().K4(e,"configure_property",t)}function U(e,t){a().K4(e,"delete_property",t),c().default.logEvent("delete_property")}function F(e,t){a().K4(e,"create_view",t)}function N(e,t){a().K4(e,"configure_view",t)}function V(e,t){a().K4(e,"view_settings",t),c().default.logEvent("view_settings",t.menu,t)}function L(e,t){a().K4(e,"delete_view",t)}function O(e,t){a().K4(e,"collection_search",t)}function Z(e,t){a().K4(e,"open_collection_as_page",t)}function j(e){a().K4(e,"collection_no_date_menu_add")}function K(e){a().K4(e,"collection_no_date_menu_view")}function z(e,t){a().K4(e,"relation_database_click",t)}function H(e,t){a().K4(e,"subitem_toggle_block_open",t)}function q(e,t){a().K4(e,"subitem_toggle_block_close",t)}function W(e,t){a().K4(e,"create_subitem",t)}function G(e){a().K4(e,"inline_collection_load_more_click")}function $(e,t){a().K4(e,"relation_show_as",t)}function Q(e,t){a().K4(e,"relation_reorder",t)}function Y(e,t){a().K4(e,"relation_add_block",t)}function J(e,t){a().K4(e,"relation_remove_block",t)}function X(e,t){a().K4(e,"relation_customize_displayed_properties",t)}function ee(e,t){a().K4(e,"relation_section_link_pages",t)}function te(e,t){a().K4(e,"relation_navigate_block",t)}function oe(e,t){a().K4(e,"relation_update_property_visibility",t)}function ne(e,t){a().K4(e,"configure_rollup_relation",t)}function ie(e,t){a().K4(e,"configure_rollup_target_property",t)}function re(e,t){a().K4(e,"configure_rollup_aggregation",t)}function ae(e,t){a().K4(e,"collection_table_drag_and_fill",t)}function se(e,t){a().K4(e,"complete_sprint_action",t)}function le(e,t){const{collectionContextStore:o}=t.optionalAnalyticsProperties||{},n=(0,l().Pn)(o)||{},i={from:t.from,block_types:t.draggedTypes,block_count:t.draggedTypes.length,as_copy:t.asCopy||!1,draggable:t.draggableProps,dropzone:t.dropzoneProps,...n};a().K4(e,"drag",i)}function ce(e,t){a().K4(e,"click_selection_menu",{block_type:t.blockType})}function de(e,t){a().K4(e,"inline_equation_edit",t)}function ue(e,t){a().K4(e,"set_reminder",{date:t.date,reminder:t.reminder})}function pe(e){a().K4(e,"resize_column")}function me(e){a().K4(e,"reset_column_sizes")}function fe(e){a().K4(e,"create_column_list")}function ge(e,t){a().K4(e,"insert_column",t)}function ve(e,t){a().K4(e,"drag_near_edge_scroll",t)}function he(e,t){a().K4(e,"transform_text_block_filter",t)}function _e(e,t){a().K4(e,"unicode_filter",t)}function be(e,t){a().K4(e,"annotation_filter",t)}function ye(e,t){a().K4(e,"keyboard_annotation",t)}function Se(e,t){a().K4(e,"link_filter",t)}function we(e,t){a().K4(e,"change_email",t)}function ke(e,t){a().K4(e,"toggle_allow_search_engine_indexing",t)}function Ie(e,t){a().K4(e,"toggle_allow_duplicate",t)}function Ce(e,t){a().K4(e,"restrict_permissions",t)}function xe(e,t){a().K4(e,"restore_permissions",t)}function Te(e,t){a().K4(e,"set_database_sync_permissions",t)}function Me(e,t){let{source:o,types:n,fileExtensions:i,htmlContent:r}=t;const s=[...n];s.sort();const l=i.map((e=>e.toLowerCase()));a().K4(e,"paste",{source:o,types:s,file_extensions:l,original_html_content_size:r.length})}function Pe(e){a().K4(e,"open_breadcrumb_current_page_menu")}function Ae(e){a().K4(e,"click_breadcrumb_current_page_scroll_to_top")}function Re(e,t){a().K4(e,"open_page_share",t),c().default.logEvent("open_page_share")}function Be(e,t){a().K4(e,"close_page_share",t)}function Ee(e){a().K4(e,"open_more_menu")}function De(e){a().K4(e,"open_more_connections_menu")}function Ue(e){a().K4(e,"open_public_more_menu")}function Fe(e){a().K4(e,"confirm_app_update")}function Ne(e,t){a().K4(e,"show_page_reload_confirmation_dialog",t)}function Ve(e,t){a().K4(e,"export",t)}function Le(e,t){a().K4(e,"export_failed",t)}function Oe(e,t){a().K4(e,"open_history",{from:t})}function Ze(e){return Date.now()-parseInt(e.timestamp)}function je(e,t){a().K4(e,"select_snapshot",{ageMs:Ze(t)})}function Ke(e,t){a().K4(e,"history_copy",{ageMs:Ze(t)})}function ze(e,t){a().K4(e,"restore_snapshot",{ageMs:Ze(t)})}function He(e,t){var o;a().K4(e,"fork_page",{blockId:t},{dontWait:!0}),c().default.logEvent("fork_page",(0,i().Q)(null===(o=document.location)||void 0===o?void 0:o.hostname))}function qe(e,t){a().K4(e,"offline_access_failure",t)}function We(e,t){a().K4(e,"full_screen_action",t)}function Ge(e){a().K4(e,"admin_content_search_analytics_acknowledge_confirm")}function $e(e,t){a().K4(e,"admin_content_search_analytics_filter_change",t)}function Qe(e,t){a().K4(e,"admin_content_search_analytics_queried",t)}function Ye(e,t){a().K4(e,"admin_content_search_analytics_export_requested",t)}function Je(e){a().K4(e,"click_sidebar_student_org_promo")}function Xe(e){a().K4(e,"click_student_org_logged_out_notice")}function et(e){a().j({environment:e,event:{eventName:"click_github_student_pack_logged_out_notice",eventProperties:{}}})}function tt(e,t){a().j({environment:e,event:{eventName:"factory_block_upgrade",eventProperties:t}})}function ot(e,t){a().j({environment:e,event:{eventName:"marketplace_purchase_export",eventProperties:t}})}function nt(e,t){a().j({environment:e,event:{eventName:"demo_tooltip_tour_action",eventProperties:t}})}},863119:(e,t,o)=>{o.d(t,{C6:()=>b,Dq:()=>v,Io:()=>s,L1:()=>p,PL:()=>f,QF:()=>S,T1:()=>c,U5:()=>h,VT:()=>u,XT:()=>y,jM:()=>_,kd:()=>g,tO:()=>m,wt:()=>d});var n=()=>o(698422),i=()=>o(839002),r=()=>o(572623),a=()=>o(876822);function s(e,t){n().j({device:e.device,cookieService:e.cookieService,event:{google:{eventName:"registration"}},source:"client"}),(async()=>{const o=await async function(){var e;return await(0,i().OI)(2500,(null===(e=a().default.state.currentUserSettingsStore)||void 0===e?void 0:e.waitUntil((()=>{var e;return void 0!==(null===(e=a().default.state.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.domain_type)})))||Promise.resolve()),(0,r().JF)()}();!function(e,t){l(e,{event:"sign_up_flow_complete",data:t})}(e,{domainType:o,metaEventId:t})})()}function l(e,t){n().j({device:e.device,cookieService:e.cookieService,event:{google:{eventName:"custom",data:t}},source:"client"})}function c(e){l(e,{event:"sign_up_flow_start"})}function d(e){l(e,{event:"login_success"})}function u(e,t){const{planType:o,subscriptionTier:n,domainType:i}=t;o&&"team"===o?l(e,{event:"create_space",data:{planType:o}}):n&&l(e,{event:"create_space",data:{subscriptionTier:n,domainType:i}})}function p(e,t){l(e,{event:"professional_workspace_created",data:t})}function m(e,t){l(e,{event:"team_workspace_created",data:t})}function f(e){l(e,{event:"onboarding_complete"})}function g(e,t){l(e,{event:"workspace_first_invite_sent",data:t})}function v(e){l(e,{event:"professional_workspace_first_invite_sent"})}function h(e,t){l(e,{event:"workspace_upgraded",data:t})}function _(e){l(e,{event:"professional_workspace_upgraded"})}function b(e){l(e,{event:"team_workspace_upgraded"})}function y(e){l(e,{event:"ai_addon_purchased"})}function S(e,t){l(e,{event:"trial_apply_attempt",data:t})}},562109:(e,t,o)=>{o.d(t,{Bp:()=>v,HC:()=>f,NF:()=>s,RL:()=>d,Tl:()=>m,UD:()=>w,Vo:()=>c,WP:()=>b,Xw:()=>g,_e:()=>p,bd:()=>S,g_:()=>h,hi:()=>k,ov:()=>_,qG:()=>u,rT:()=>l,zi:()=>y});var n=()=>o(236692),i=()=>o(594546),r=()=>o(524434),a=()=>o(749826);function s(e,t){const{user_comment:o,...n}=t;i().K4(e,"ai_action",n)}function l(e,t,o){const n={site:"client",...o};i().K4(e,t,n)}function c(e,t){i().K4(e,"ai_favorite_action",t)}function d(e,t){i().K4(e,"ai_block_action",t)}function u(e,t){i().K4(e,"ai_autofill_action",t),a().default.logEvent("ai_autofill_action",1,{action_type:t.type})}function p(e,t){i().K4(e,"ai_autofill_settings_action",t)}function m(e,t){if(r().KR.isXMLAssistantEnabled()){var o;const i=(null===(o=t.sessionContext)||void 0===o?void 0:o.evaluator.getTranscript())??[];(0,n().trackAssistantOpened)(e,{from:t.from,sessionId:t.session_id,isReminder:!1,reminderType:void 0,startTimestamp:Date.now(),transcript:i,hasQuery:!1,searchSessionId:void 0})}else i().K4(e,"ai_completion_popup_open",{session_id:t.session_id,prompt_key:t.prompt_key,from:t.from})}function f(e,t){i().K4(e,"ai_completion_popup_close",t),a().default.logEvent("ai_completion_popup_close",1,{exit_type:t.exit_type})}function g(e,t){i().K4(e,"ai_completion_popup_retry",t)}function v(e,t){i().K4(e,"ai_completion_popup_history_navigation",t)}function h(e,t){i().K4(e,"ai_completion_popup_preview_start",t),a().default.logEvent("ai_completion_popup_preview_start",1,{from:t.from,prompt_key:t.prompt_key})}function _(e,t){i().K4(e,"ai_completion_popup_update_prompt_text",t)}function b(e,t){i().K4(e,"ai_completion_popup_preview_end",t),a().default.logEvent("ai_completion_popup_preview_end",1,{preview_time:t.preview_time})}function y(e,t){i().K4(e,"ai_completion_popup_preview_stopped_by_user",t)}function S(e,t){i().K4(e,"ai_user_data_sharing_opt_in_submit",t)}function w(e,t){i().K4(e,"getCompletion.emptyResponse",t),a().default.logEvent("getCompletion.emptyResponse",1,{promptKey:t.promptKey})}function k(e,t){i().K4(e,"ai_assistant_error",t)}},208949:(e,t,o)=>{o.d(t,{X:()=>n});o(267602),o(228244);function n(e){const t=e.getState().stack;return t.some((e=>"customize"===e.type))?"customize_menu":t.some((e=>"automationSettings"===e.type&&"view_options"!==e.from))?void 0:t.some((e=>"main"===e.type))?"view_options":void 0}},250303:(e,t,o)=>{o.d(t,{$q:()=>v,Ac:()=>w,Rc:()=>h,S$:()=>b,YU:()=>I,_H:()=>d,aT:()=>P,bn:()=>T,g2:()=>x,gd:()=>C,gl:()=>g,mH:()=>u,nS:()=>f,qm:()=>k,rv:()=>y,tf:()=>M,wd:()=>m,xb:()=>p,y9:()=>_,zF:()=>S});var n=()=>o(696459),i=()=>o(594546),r=()=>o(861026),a=()=>o(582835),s=()=>o(749826),l=()=>o(491927),c=()=>o(175113);function d(e){const{environment:t,collectionContextStore:o,...n}=e,i=(0,r().Pn)(o)||{};l()._H(t,{...i,...n})}function u(e,t){i().K4(e,"collection_create_suggested_property_latency",t)}function p(e){const{environment:t,collectionContextStore:o,view_type:n,view_config_uri:i,...a}=e,s=(0,r().Pn)(o)||{};l().xb(t,{...s,...a,view_type:n,view_config_uri:i})}function m(e){const{environment:t,collectionContextStore:o,action:n,original_view_type:i,new_view_type:a,new_view_id:s,property_type:c,new_date_shift_mode:d,new_avoid_weekends:u,charts_analytics_context:p}=e,m=(0,r().Pn)(o);m&&m.view_type&&l().wd(t,{action:n,...m,view_type:m.view_type,original_view_type:i,new_view_type:a,new_view_id:s,property_type:c,new_date_shift_mode:d,new_avoid_weekends:u,charts_analytics_context:p})}function f(e){const t=(0,r().Pn)(e.collectionContextStore);t&&t.view_type&&c().MU(e.environment,{from:e.from,from_peek_mode:e.from_peek_mode,...t,view_type:t.view_type})}function g(e){const{peek_mode:t,from_peek_mode:o}=e,n=(0,r().Pn)(e.collectionContextStore);n&&n.view_type&&c().lg(e.environment,{from:e.from,peek_mode:t,from_peek_mode:o,...n,view_type:n.view_type})}function v(e){const{environment:t,collectionContextStore:o,property:n,from:i,action:a,new_property_type:s,...c}=e,d=o.normalizedSchemaStore.state[n],u=(0,r().Pn)(o)||{};l().$q(t,{property_type:null==d?void 0:d.type,new_property_type:s,property:n,from:i,action:a,...c,...u})}function h(e){const{environment:t,collectionContextStore:o,view_type:n,from:i,...a}=e,s=(0,r().Pn)(o)||{};l().Rc(t,{from:i,...a,...s,view_type:n})}function _(e){const{environment:t,collectionContextStore:o,property_type:n,from:i,property:a,...s}=e,c=(0,r().Pn)(o)||{};l().y9(t,{property:a,property_type:n,from:i,...s,...c})}function b(e,t,o){var a,s,l;let c="page_properties";const d=(0,r().Pn)(t);switch(d.view_type){case void 0:case"page":case"table":c="table";break;case"list":c="list";break;case"gallery":c="gallery";break;case"board":c="board";break;case"calendar":c="calendar";break;case"timeline":c="timeline";break;case"chart":case"form_editor":case"feed":case"chat":break;default:(0,n().t1)(d.view_type)}const u={...o,collection_id:null==t||null===(a=t.collectionStore())||void 0===a?void 0:a.id,collection_view_id:null==t||null===(s=t.collectionViewStore())||void 0===s?void 0:s.id,collection_view_block_id:null==t||null===(l=t.collectionViewBlockStore())||void 0===l?void 0:l.id,from:c};i().K4(e,"copy_property",u)}function y(e){var t;const{environment:o,collectionContextStore:n,block_id:i,property:s,property_type:c,from:d,isFromBulkActionsToolbar:u,isUnthrottled:p,collection_id:m,...f}=e,g=(0,r().Pn)(n,m)||{};let v;if(null!==(t=n.currentSubitemFormatStoreForCollectionStore.state)&&void 0!==t&&t.property){v=(0,a().EK)({blockId:i,collectionContextStore:n})?"subitem":"parent_item"}else n.currentArrowsByFormatStore.state&&(v="timeline_arrows_by");l().rv(o,{block_id:i,property:s,property_type:c,property_context:v,from:d,isFromBulkActionsToolbar:u,...f,...g},p||!1)}function S(e){const{environment:t,collectionContextStore:o,property:n,property_type:a,from:s,isFromBulkActionsToolbar:l,...c}=e,d=(0,r().Pn)(o)||{};i().K4(t,"collection_open_block_property_overlay",{property:n,property_type:a,property_context:undefined,from:s,isFromBulkActionsToolbar:l,...c,...d})}function w(e){const{environment:t,collectionContextStore:o,checkbox_type:n,...a}=e,s=(0,r().Pn)(o)||{};i().K4(t,"collection_multi_select_checkbox_clicked",{...s,checkbox_type:n,...a})}function k(e){const{environment:t,collectionContextStore:o,property_type:n,num_rows:i}=e,a=(0,r().Pn)(o)||{};l().fM(t,{property_type:n,num_rows:i,...a})}function I(e){const{environment:t,collectionContextStore:o,...n}=e,i=(0,r().Pn)(o)||{};l().YU(t,{...i,...n})}function C(e){const{environment:t,collectionContextStore:o,...n}=e,a=(0,r().Pn)(o)||{};i().K4(t,"convert_db_start",{...a,...n})}function x(e){const{environment:t,collectionContextStore:o,...n}=e,a=(0,r().Pn)(o)||{};i().K4(t,"convert_db_complete",{...a,...n})}function T(e){i().K4(e,"collection_load_more_blocks")}function M(e){i().K4(e,"collection_load_more_groups")}function P(e){const t=e.collectionContextStore.collectionViewStore();if(!t)return;const o=s().default.checkGate({gateName:"collection_group_reducer_visible"}),n=t.getFormatStore().getKeyStore("collection_group_by").getKeyStore("type").getValue(),r=t.getFormatStore().getKeyStore("board_columns_by").getKeyStore("type").getValue();i().j({environment:e.environment,event:{eventName:"collection_extraneous_group_request",eventProperties:{view_type:t.getType(),group_by_type:n,sub_group_by_type:r,request_reason:e.request_reason,reducer_version:o?"v2":"v1"}}})}},248825:(e,t,o)=>{o.d(t,{$5:()=>u,Em:()=>I,Je:()=>l,Rn:()=>c,SU:()=>S,Tw:()=>a,Uw:()=>w,Yz:()=>m,ZW:()=>s,Zq:()=>C,bR:()=>g,d2:()=>h,hJ:()=>y,jX:()=>f,k$:()=>_,lL:()=>p,pP:()=>k,x6:()=>v,yr:()=>d,zd:()=>b});var n=()=>o(625230),i=()=>o(594546),r=()=>o(749826);function a(e,t){i().j({environment:e,event:{eventName:"click_updates_sidebar_empty_comments_cta",eventProperties:t}})}function s(e,t){i().K4(e,"open_block_discussion_menu",t)}function l(e){let{environment:t,from:o,notificationId:n,activityId:r}=e;i().K4(t,"open_reply_discussion_menu",{from:o,notificationId:n,activityId:r})}function c(e){let{environment:t,from:o,notificationId:n,activityId:r}=e;i().K4(t,"close_reply_discussion_menu",{from:o,notificationId:n,activityId:r})}function d(e,t){i().K4(e,"open_new_block_discussion",t)}function u(e,t){i().K4(e,"open_new_inline_discussion",t)}function p(e){i().K4(e,"discard_new_discussion_dialog_show")}function m(e){i().K4(e,"discard_new_discussion_dialog_confirm")}function f(e){i().K4(e,"discard_new_discussion_dialog_cancel")}function g(e,t){i().K4(e,"create_block_discussion",t),r().default.logEvent("create_block_discussion"),n().j({name:"create_block_discussion"})}function v(e,t){i().K4(e,"create_inline_discussion",t),r().default.logEvent("create_inline_discussion"),n().j({name:"create_inline_discussion"})}function h(e,t){i().j({environment:e,event:{eventName:"add_comment",eventProperties:t}}),r().default.logEvent("add_comment",t.from),n().j({name:"add_comment"})}function _(e,t){i().K4(e,"delete_comment",t)}function b(e,t){i().j({environment:e,event:{eventName:"edit_comment",eventProperties:t}})}function y(e,t){i().K4(e,"resolve_discussion",t),r().default.logEvent("resolve_discussion",t.from)}function S(e,t){i().K4(e,"reopen_discussion",t)}function w(e,t){i().K4(e,"click_discussion",t)}function k(e){const{environment:t,...o}=e;i().j({environment:t,event:{eventName:"add_reaction",eventProperties:o}}),r().default.logEvent("add_reaction",o.reaction_value),n().j({name:"add_reaction"})}function I(e){const{environment:t,...o}=e;i().K4(t,"remove_reaction",o)}function C(e,t){i().K4(e,"comment_upload_attachments",t)}},54512:(e,t,o)=>{o.d(t,{W:()=>a,t:()=>s});var n=()=>o(589525),i=()=>o(465755);const r=o(513670).P2((e=>{o(594546).Zf(e,{created_page:!0})}),864e5,{trailing:!1});function a(e,t){const{teamStore:o,new_page_id:a,...s}=t;let l=60;"chart"===t.view_type&&(l=1),i().ej(e,"create_block",`create_block-${t.type}-${t.from}`,l,{store:o,...s}),"page"===t.type&&(i().YP(e,"create_page",{store:o,...s,new_page_id:a,...(0,n().UF)({environment:e})}),r(e))}function s(e,t){"onboarding"===t.from?function(e,t){const{teamStore:o,...n}=t;i().YP(e,"create_onboarding_page",{store:o,...n})}(e,{from:t.from,teamStore:t.teamStore,forkedTemplateId:t.pageId}):a(e,{type:"page",from:t.from,teamStore:t.teamStore,new_page_id:t.pageId,creating_block_id:t.pageId})}},351972:(e,t,o)=>{o.d(t,{E5:()=>p,Fn:()=>r,Gl:()=>f,Jg:()=>m,QI:()=>l,QU:()=>g,Uk:()=>s,Wl:()=>a,X0:()=>d,el:()=>c,mC:()=>u});var n=()=>o(916673),i=()=>o(594546);function r(e,t){(0,i().j)({environment:e,event:{eventName:"embed_block_action",eventProperties:t}})}function a(e,t){(0,i().j)({environment:e,event:{eventName:"embed_block_resize",eventProperties:t}})}function s(e,t){(0,i().j)({environment:e,event:{eventName:"download_file",eventProperties:t}})}function l(e,t){(0,i().j)({environment:e,event:{eventName:"file_open_attempt",eventProperties:t}})}function c(e,t){const o=(0,n().gy)(t.url);(0,i().j)({environment:e,event:{eventName:"open_embed_menu",eventProperties:{url_domain:null==o?void 0:o.hostname}}})}function d(e,t){let o;o=void 0===t.url?void 0:t.url.includes("mailto:")?t.url:(0,n().Qc)(t.url).hostname,(0,i().j)({environment:e,event:{eventName:"click_embed_menu",eventProperties:{url_domain:o,type:t.type,form_id:t.form_id,block_id:t.block_id}}})}function u(e,t){(0,i().j)({environment:e,event:{eventName:"url_turned_bookmark",eventProperties:{}}})}function p(e,t){(0,i().j)({environment:e,event:{eventName:"link_mention_shows_placeholder",eventProperties:t}})}function m(e,t){(0,i().j)({environment:e,event:{eventName:"embed_type",eventProperties:t}})}function f(e,t){(0,i().j)({environment:e,event:{eventName:"embed_render",eventProperties:t}})}function g(e,t){(0,i().j)({environment:e,event:{eventName:"embed_client_error",eventProperties:t}})}},571896:(e,t,o)=>{o.d(t,{VJ:()=>a,fA:()=>l,kz:()=>s,xu:()=>r});var n=()=>o(594546),i=()=>o(749826);function r(e){n().K4(e,"open_emoji_menu")}function a(e,t){const{searchQuery:o,...i}=t;n().K4(e,"emoji_no_results",i)}function s(e,t,o){n().K4(e,t,o)}function l(e,t,o){n().K4(e,t,o),i().default.logEvent(t,o.icon)}},252428:(e,t,o)=>{o.d(t,{M:()=>r,Z:()=>a});var n=()=>o(594546),i=()=>o(620218);function r(e,t){n().K4(e,"image_uploaded",t)}function a(e,t){i().default.DO_NOT_USE_markLegacy("image_edit_load"),n().K4(e,"image_edit_open",t)}},286310:(e,t,o)=>{o.d(t,{AS:()=>J,B3:()=>ne,BI:()=>E,Cm:()=>V,D:()=>G,D6:()=>x,DU:()=>F,DW:()=>q,EJ:()=>U,EU:()=>se,FB:()=>O,FI:()=>b,G7:()=>w,Gl:()=>S,IG:()=>$,IN:()=>H,IV:()=>L,Iv:()=>X,L3:()=>h,Mp:()=>oe,Ng:()=>D,PR:()=>N,SC:()=>ie,SO:()=>I,Sy:()=>v,Vf:()=>_,YY:()=>Z,Z3:()=>y,Z9:()=>z,_x:()=>te,a1:()=>u,ay:()=>d,bO:()=>P,cV:()=>T,eR:()=>Q,fc:()=>K,kM:()=>M,lC:()=>m,lL:()=>ee,oQ:()=>re,oS:()=>R,pZ:()=>B,pp:()=>ae,qJ:()=>k,qy:()=>p,re:()=>A,tc:()=>g,tf:()=>W,uu:()=>C,uy:()=>j,wi:()=>Y,y6:()=>f});var n=()=>o(225771),i=()=>o(916673),r=()=>o(594546),a=()=>o(265075),s=()=>o(589525),l=()=>o(749826),c=()=>o(697623);function d(e,t){r().K4(e,"import_button_click",t)}function u(e,t){r().K4(e,"import_source_auth",t)}function p(e,t){r().K4(e,"import_source_input",t)}function m(e,t){r().K4(e,"import_file_upload",t)}function f(e,t){r().K4(e,"uploaded_file_size",t)}function g(e,t){r().K4(e,"file_upload_latency",t)}function v(e,t){r().K4(e,"open_import_modal",{...t,...(0,s().UF)({environment:e})})}function h(e,t){r().K4(e,"auth_integration",t)}function _(e,t){r().K4(e,"integration_select_all",t)}function b(e,t){r().K4(e,"integration_deselect_all",t)}function y(e,t){r().K4(e,"integration_select_item",t)}function S(e,t){r().K4(e,"integration_deselect_item",t)}function w(e,t){r().K4(e,"import_integration",t)}function k(e,t){r().K4(e,"remove_integration",t)}function I(e,t){r().K4(e,"integration_prompt_auth",t)}function C(e){r().K4(e,"open_google_drive_file_picker")}function x(e,t){r().K4(e,"google_drive_pick_file",t)}function T(e,t){r().K4(e,"google_drive_embed_file",t)}function M(e,t){r().K4(e,"unfurl_menu_option",t)}function P(e,t){const{pastedText:o}=t;let a;if(n().B(o,"url")){const e=i().Qc(o);e.host&&(a=e.host)}if(a){const{pastedText:o,...n}={...t,url_domain:a};r().K4(e,"paste_url",n)}}function A(e,t){const o=t.file.lastIndexOf("."),n=o>0?t.file.substring(o+1):"",i=c().zt();n&&r().K4(e,"file_uploads",{source:t.source,extension:n,subscriptionTier:i})}function R(e,t){const o=t.url?(0,i().gy)(t.url):void 0;r().K4(e,"edit_link",{type:t.type,url_domain:null==o?void 0:o.hostname})}function B(e){r().K4(e,"edit_link_title")}function E(e){r().K4(e,"developer_integrations_list_visit")}function D(e){r().K4(e,"developer_integrations_new_click")}function U(e,t){r().K4(e,"developer_integrations_filter_click",t)}function F(e,t){const o=a().OS[t.table];r().K4(e,"developer_integrations_view_visit",{type:o})}function N(e,t){const o=a().OS[t.table];r().K4(e,"developer_integrations_create",{type:o})}function V(e,t){const o=a().OS[t.table];r().K4(e,"developer_integrations_view_secret",{type:o})}function L(e,t){const o=a().OS[t.table];r().K4(e,"developer_integrations_copy_secret",{type:o})}function O(e,t){const o=a().OS[t.table],{table:n,...i}=t;r().K4(e,"developer_integrations_update",{type:o,...i})}function Z(e,t){r().K4(e,"developer_integrations_my_integrations_click",t)}function j(e,t){r().K4(e,"developer_integrations_all_integrations_click",t)}function K(e,t){r().K4(e,"developer_integrations_visit_developer_website_click",t)}function z(e,t){r().K4(e,"developer_integrations_contact_developer_click",t)}function H(e,t){r().K4(e,"developer_integrations_disconnect_click",t)}function q(e,t){r().K4(e,"developer_integrations_delete_click",t)}function W(e,t){r().K4(e,"developer_integrations_confirm_delete_click",t)}function G(e,t){r().K4(e,"install_public_integration_oauth",t)}function $(e,t){r().K4(e,"security_and_compliance_integration_oauth_attempt",t)}function Q(e,t){r().K4(e,"security_and_compliance_integration_install",t)}function Y(e,t){r().K4(e,"security_and_compliance_integration_uninstall",t)}function J(e,t){r().K4(e,"security_and_compliance_integration_update",t)}function X(e,t){r().K4(e,"connect_external_integration",t),l().default.logEvent("connect_external_integration",void 0,t)}function ee(e,t){r().K4(e,"disconnect_external_integration",t)}function te(e,t){r().K4(e,"activate_link_preview_menu",t)}function oe(e,t){r().K4(e,"save_link_preview",t)}function ne(e,t){r().K4(e,"update_link_preview",t)}function ie(e,t){r().K4(e,"open_link_preview_help_guide",t)}function re(e,t){r().K4(e,"remove_link_preview_with_error",t)}function ae(e,t){r().K4(e,"link_preview_url_miss",t)}function se(e,t){r().K4(e,"show_all_discoverable_connected_apps",t)}},930085:(e,t,o)=>{o.d(t,{$2:()=>A,$z:()=>U,Dg:()=>L,E0:()=>R,G:()=>O,Mq:()=>D,TC:()=>M,UW:()=>x,bR:()=>N,d:()=>B,hE:()=>T,jB:()=>C,l5:()=>I,oI:()=>V,q_:()=>P,yE:()=>F,zx:()=>E});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(749411),o(241792);var n=()=>o(446866),i=()=>o(989478),r=()=>o(629719),a=()=>o(625230),s=()=>o(513670),l=()=>o(342792),c=()=>o(594546),d=()=>o(572623),u=()=>o(876822),p=()=>o(749826),m=()=>o(896014),f=()=>o(826955),g=()=>o(18281),v=()=>o(697623),h=()=>o(30795),_=()=>o(897257),b=()=>o(395362),y=()=>o(269299),S=()=>o(348141),w=()=>o(863119);function k(e){var t;const o=e.invite_targets.filter(m().cl),i=e.invite_targets.filter(m().fZ),r=o.length+i.length,a=s().oA(e.permission_items.map((e=>{if("user_permission"===e.type)return e.user_id&&(0,l().F9)(e.user_id)}))),c=new Set(null===(t=u().default.state.currentSpaceStore)||void 0===t?void 0:t.getEmailDomains()),d=e.invite_targets.filter((e=>{if("existingUser"!==e.type&&"newUser"!==e.type)return!1;const t=(0,n().Gd)(e.value.email);return t&&c.has(t)})).flatMap((e=>e.value.id?[(0,l().F9)(e.value.id)]:[])),p=(0,v().zt)(),f=e.invitee_ids_with_internal_domain??[];return{role:e.role,user_count:r,new_user_count:o.length,new_workspace_member_count:e.is_space?r:d.length,new_workspace_member_ids:e.is_space?a:d,is_onboarding:e.is_onboarding,invite_flow_id:e.invite_flow_id,invite_origin:e.invite_origin,invitee_ids:a,invite_message_length:e.invite_message_length,subscription_tier:p,domain_type:e.domainType,...!e.is_space&&{share_menu_session_id:e.share_menu_session_id},allow_domain_auto_invite:d.length>0,is_space:e.is_space,collection_id:e.collection_id,parent_collection_id:e.parent_collection_id,is_internal_domain:f.length>0,invitee_ids_with_internal_domain:f,invitee_ids_with_internal_domain_enforced:e.invitee_ids_with_internal_domain_enforced}}function I(e,t){const o=k(t);c().K4(e,"invite_error",o)}function C(e,t){var o;const r=(0,v().zt)(),a=k(t);c().K4(e,"invite",{...a,is_space:t.is_space});const s=null===(o=u().default.state.currentSpaceStore)||void 0===o?void 0:o.id;if(s){if(_().subscriptionDataStoreInstance.waitUntilLoaded().then((()=>{const o=_().subscriptionDataStoreInstance.state,r=(0,h().W)(e,s,o),l=o?g().Ln(e,s,o,r):void 0,p=o?g().Lz(e,s,o,r):void 0;c().K4(e,"invite_debug_with_block_usage",{...a,is_space:t.is_space,is_over_block_limit:l,block_usage:p}),t.is_space||(!function(e,t){const{currentSpaceStore:o,currentUserStore:r}=u().default.state,a=o&&o.canEditMembership(),s=d().JF(),l=null==r?void 0:r.getEmail();if(!a||!s||!l)return;if("professional"!==s)return;const p=(0,n().Gd)(l),m=g().A7().slice(0,50).map((e=>({email:f().U6.createChildStore(o,{table:i().KJ,id:e.userId}).getEmail(),guestId:e.userId}))).filter((e=>e.email&&(0,n().Gd)(e.email)===p)).map((e=>e.guestId));c().K4(e,"page_invite_guest_summary",{...t,guest_with_same_domain_count:m.length,guest_ids:m})}(e,a),b().fN(e,{inviteTargets:t.invite_targets,origin:t.invite_origin}))})),t.is_space||a.allow_domain_auto_invite){c().K4(e,"space_invite",a),c().Zf(e,{space_invited:!0}),p().default.logEvent("space_invite",a.allow_domain_auto_invite?`${t.invite_origin}_allow_domain`:t.invite_origin,a),b().Jk(e,{invite_origin:t.invite_origin,domainType:t.domainType,new_workspace_member_count:a.new_workspace_member_count,new_workspace_member_ids:a.new_workspace_member_ids,allow_domain_auto_invite:a.allow_domain_auto_invite});const o=_().subscriptionDataStoreInstance.state,n=o?(0,h().W)(e,s,o):1;!function(e,t){const o=(0,v().zt)();t.visibleMembersCount<=1&&(c().K4(e,"workspace_first_invite_sent"),w().kd(e,{subscriptionTier:o,domainType:t.domainType}),"professional"===t.domainType&&(c().K4(e,"professional_workspace_first_invite_sent",{visible_members_count:t.visibleMembersCount,is_professional_team_user:t.isProfessionalTeamUser,domain_type:t.domainType}),w().Dq(e)))}(e,{visibleMembersCount:n,isProfessionalTeamUser:t.isProfessionalTeamUser,domainType:t.domainType})}t.is_space||a.new_workspace_member_ids.length===t.invite_targets.length||(c().K4(e,"page_invite",a),p().default.logEvent("page_invite",r,a),function(e,t){const{currentUserSettingsStore:o}=u().default.state;if(!o)return;const n=o.getKeyStore("settings").getKeyStore("signup_time").getValue(),i=o.getKeyStore("settings").getKeyStore("first_page_invite_at").getValue();if(!Boolean(i)){const i=Date.now(),r={...t,...n?{signup_time_ready:!0,time_from_signup_to_first_page_invite:n-i}:{signup_time_ready:!1}};c().K4(e,"page_invite_time",r),p().default.logEvent("page_invite_time",t.subscription_tier,r),y().createAndCommit({userAction:"firstPageInvite",environment:e,userId:o.id,canUndo:!0,perform:e=>{S().d2({userSettingsStore:o,data:{first_page_invite_at:i},transaction:e})}})}}(e,a))}}function x(e,t){var o;const n=(0,r().zt)(null===(o=t.billingData)||void 0===o?void 0:o.subscription);c().K4(e,"invite_typed",{invite_flow_id:t.invite_flow_id,invite_origin:t.invite_origin,subscription_tier:n}),p().default.logEvent("invite_typed",n,{...t})}function T(e,t){const{selected_user_token:o}=t;let n;"group"===o.type&&(n={type:o.type,value:{id:o.value.group_id}}),c().K4(e,"invite_select_target",n?{...t,selected_user_token:n}:t),p().default.logEvent("invite_select_target",t.subscription_tier,{selected_user_token_rank:t.selected_user_token_rank,from:t.from,type:t.type??"permission_invite"})}function M(e,t){c().K4(e,"invite_change_role",t),p().default.logEvent("invite_change_role",t.subscription_tier,{...t})}function P(e,t){c().K4(e,"abandon_permissions_invite",t),p().default.logEvent("abandon_permissions_invite",t.subscription_tier,{...t})}function A(e,t){c().K4(e,"open_share_workspace_invite",t),p().default.logEvent("open_share_workspace_invite",t.subscription_tier,{...t})}function R(e,t){c().K4(e,"send_share_workspace",t),p().default.logEvent("send_share_workspace",t.subscription_tier,{...t})}function B(e,t){c().K4(e,"send_membership_request",t),p().default.logEvent("send_membership_request",t.subscription_tier,{...t})}function E(e,t){c().K4(e,"send_guest_request",t),p().default.logEvent("send_guest_request",t.subscription_tier,{...t})}function D(e,t){c().K4(e,"open_page_share_invite",t),p().default.logEvent("open_page_share_invite",t.subscription_tier,{...t})}function U(e){c().K4(e,"open_space_invite")}function F(e,t){c().K4(e,"invite_modal_input_focus",t)}function N(e,t){c().K4(e,"invite_users_to_page",t),a().j({name:"invite_users_to_page"})}function V(e,t){c().K4(e,"internal_domain_enforced",t)}function L(e,t){c().K4(e,"workspace_over_guest_limit",t)}function O(e,t){c().j({environment:e,event:{eventName:"open_invite_members_modal",eventProperties:t}})}},30238:(e,t,o)=>{o.d(t,{Qq:()=>h,SK:()=>g,TI:()=>d,VN:()=>v,Yo:()=>f,Z0:()=>u,ew:()=>c,iH:()=>p,j1:()=>s,pi:()=>m,uo:()=>_,wB:()=>b,z7:()=>l});var n=()=>o(625230),i=()=>o(342792),r=()=>o(594546),a=()=>o(749826);function s(e,t){r().K4(e,"open_mention_menu",t),a().default.logEvent("open_mention_menu",void 0,t)}function l(e,t){const{clickIndexLocal:o,clickIndexGlobal:n}=t,i=void 0!==o?1/(o+1):void 0,s=void 0!==n?1/(n+1):void 0,l={...t,localReciprocalRank:i,globalReciprocalRank:s};r().K4(e,"insert_mention_from_mention_menu",l),a().default.logEvent("insert_mention_from_mention_menu",i,l)}function c(e,t){r().K4(e,"mention_menu_abandon",t),a().default.logEvent("mention_menu_abandon",void 0,t)}function d(e,t){r().K4(e,"mention_user",{mentioned_user_id:(0,i().F9)(t.user_id),mentioned_user_access_level:t.user_access_level,from:t.from,block_type:t.block_type,share_menu_selection:t.share_menu_selection}),a().default.logEvent("mention_user",t.user_access_level,t),t.is_current_user||"none"===t.user_access_level||"reader"===t.user_access_level||n().j({name:"mention_other_user"})}function u(e,t){r().K4(e,"mention_group",{mentioned_group_id:(0,i().F9)(t.group_id),from:t.from,block_type:t.block_type})}function p(e,t){r().K4(e,"hover_mention_group",{group_id:(0,i().F9)(t.group_id)})}function m(e,t){r().K4(e,"hover_page_mention_start",t)}function f(e,t){r().K4(e,"hover_page_mention_end",t)}function g(e,t){r().K4(e,"page_mention_click",t)}function v(e,t){r().K4(e,"mention_date",t)}function h(e,t){r().K4(e,"mention_page",{mentioned_page_id:(0,i().F9)(t.page_id),from:t.from,block_type:t.block_type})}function _(e,t){r().K4(e,"hyperlink_hover",t),a().default.logEvent("hyperlink_hover",t.type,void 0)}function b(e,t){r().K4(e,"link_mention_hover",t),a().default.logEvent("link_mention_hover",t.type,void 0)}},353141:(e,t,o)=>{o.d(t,{FG:()=>r,YO:()=>i,jD:()=>a,nB:()=>s,w3:()=>c,xx:()=>l});var n=()=>o(594546);function i(e,t){n().K4(e,"tap_mobile_action_bar_item",{item_name:t.itemName,from:t.from})}function r(e){n().K4(e,"scroll_mobile_action_bar")}function a(e){n().K4(e,"open_mobile_sidebar")}function s(e,t){n().K4(e,"tap_mobile_bottom_bar_item",{...t})}function l(e){n().K4(e,"mobile_add_to_menu_accept")}function c(e,t){n().K4(e,"navigation",{...t})}},765056:(e,t,o)=>{o.d(t,{A6:()=>c,Fo:()=>i,Y8:()=>d,_T:()=>a,a6:()=>u,fW:()=>r,mf:()=>s,rY:()=>l,w6:()=>p});var n=()=>o(594546);function i(e){n().K4(e,"click_breadcrumb_move_to")}function r(e,t){n().K4(e,"move_to_error",t)}function a(e,t){n().K4(e,"move_to",t)}function s(e,t){n().K4(e,"move_to_value_selected",t)}function l(e,t){n().K4(e,"move_to_menu_open",t)}function c(e,t){n().K4(e,"move_to_menu_cancel",t)}function d(e,t){n().K4(e,"add_editor_permission_to_ensure_undo",t)}function u(e,t){n().K4(e,"move_to_autocomplete_query_change",t)}function p(e,t){n().K4(e,"move_to_toggle_click",t)}},438793:(e,t,o)=>{o.d(t,{$k:()=>M,AM:()=>_,BR:()=>P,D6:()=>S,Es:()=>v,F9:()=>m,PB:()=>f,Pu:()=>g,Q4:()=>y,RK:()=>B,Sn:()=>T,T3:()=>k,VU:()=>x,WT:()=>R,_W:()=>h,eb:()=>I,u_:()=>A,ux:()=>w,yv:()=>C,zX:()=>b});var n=()=>o(698422),i=()=>o(506347),r=()=>o(282017),a=()=>o(839002),s=()=>o(916673),l=()=>o(594546),c=()=>o(561707),d=()=>o(589525),u=()=>o(297861),p=()=>o(749826);function m(e){if(e.isCollectionView())return"database";return"collection"===e.getParentTable()?"database_page":"page"}function f(e,t){const{page_id:o,query:n,team_id:r,page_visit_id:a,previous_page_visit_id:p,marketplace_state:m,...f}=t,g=s().Ph(n,i().$X),v=parseInt(g),h="push"===e.RouterStore.getState().action,_=(0,i().bh)(v)&&h?(0,i().xt)(i().tY.LinkInPage):(0,i().xt)(v),b=s().Ph(n,i().Qs),y=c().t3({blockOrCollectionId:o}),S=e.device.isPhone&&(0,u().Y)("supportsNativeHome")?{is_sidebar_open:!1}:(0,d().UF)({environment:e}),w={eventName:"page_visit",eventProperties:{...f,page_visit_source:_,notification_id:b,page_visit_id:a,previous_page_visit_id:p,entered_at:Date.now(),home_page_type:y,marketplace_state:m,...S}};l().j({environment:e,event:w,opts:{forceOverrideAutomaticEventData:{team_id:r}}})}function g(e,t){const{pageVisitId:o,pageVisitDuration:n,...i}=t;l().K4(e,"page_exit",{exited_at:Date.now(),visit_duration:n,page_visit_id:o},{forceOverrideAutomaticEventData:i})}function v(e){const t=[{name:"initial_partner_stack_key",value:e.partner_stack_key,operation:"setOnce"},{name:"partner_stack_key",value:e.partner_stack_key,operation:"set"}];l().fK(t)}function h(e,t){const o=s().nx(t,(0,r().x6)());if(o){const{fbclid:e,gclid:t}=o;e&&n().xx({type:"facebook",id:e}),t&&n().xx({type:"google",id:t}),(0,r().NW)(o)}l().j({environment:e,event:{eventName:"visit",eventProperties:{}}})}function _(e,t){l().K4(e,"page_error",t)}function b(e,t){l().K4(e,"page_error_button_click",t)}function y(e,t){l().K4(e,"reorder_workspaces",t)}function S(e,t){l().K4(e,"multi_account_add_or_create_account_clicked",t)}function w(e){l().K4(e,"content_classification_proceed")}function k(e,t){l().K4(e,"notion_topbar_click",t,{dontWait:!0}),p().default.logEvent("notion_topbar_click",t.variant)}function I(e,t){l().K4(e,"template_gallery_public_page_topbar_click",t,{dontWait:!0}),p().default.logEvent("template_gallery_public_page_topbar_click",t.target)}function C(e,t){l().K4(e,"getting_started_page_create",t)}function x(e,t){l().K4(e,"debug_getting_started_page_error",t)}function T(e,t){l().K4(e,"landing_page_visit",{routerName:t}),(0,a().Vs)(4e3).then((o=>{p().default.logEvent(`${t}_page_visit`,e.device.deviceType,{})}))}function M(e,t){l().K4(e,"desktop_app_signup_browser_visit",{desktop_app_reroute_email:t.desktopAppRerouteEmail,desktop_app_device_id:t.desktopAppDeviceId})}function P(e,t,o){const n=e=>({blockId:"blockId"in e?e.blockId:void 0,peekViewBlockId:"peekViewBlockId"in e?e.peekViewBlockId:void 0}),{blockId:r,peekViewBlockId:a}=n(t),{blockId:s,peekViewBlockId:c}=n(o),d="pageVisitSource"in o&&o.pageVisitSource?(0,i().xt)(parseInt(o.pageVisitSource)):void 0;l().K4(e,"click_in_page_navigation",{current_route_name:t.name,next_route_name:o.name,page_visit_source:d,current_page_id:r,current_peek_view_page_id:a,next_page_id:s,next_peek_view_page_id:c})}function A(e){l().K4(e,"public_page_topbar_edit_click",{},{dontWait:!0}),p().default.logEvent("public_page_topbar_edit_click")}function R(e){l().K4(e,"public_page_topbar_comment_click",{},{dontWait:!0}),p().default.logEvent("public_page_topbar_comment_click")}function B(e){l().K4(e,"public_page_topbar_menu_sign_up_log_in_click",{},{dontWait:!0}),p().default.logEvent("public_page_topbar_menu_sign_up_log_in_click")}},253502:(e,t,o)=>{o.d(t,{Br:()=>U,Cg:()=>j,EH:()=>L,EQ:()=>w,Ee:()=>N,F5:()=>f,FR:()=>O,GP:()=>T,Jn:()=>P,Md:()=>z,Q6:()=>M,RJ:()=>H,U0:()=>E,Up:()=>x,Xf:()=>B,Z8:()=>S,Zh:()=>K,_H:()=>F,_b:()=>m,b2:()=>A,bE:()=>V,bi:()=>y,cC:()=>g,gM:()=>Z,gY:()=>_,hI:()=>b,ix:()=>h,kL:()=>W,l2:()=>D,nI:()=>I,pw:()=>C,u_:()=>v,ub:()=>q,zD:()=>R});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(30005);var n=()=>o(317924),i=()=>o(575741),r=()=>o(696459),a=()=>o(763589),s=()=>o(105649),l=()=>o(589525),c=()=>o(749826),d=()=>o(781022),u=()=>o(603274),p=()=>o(594546);function m(e){k({...e,target:"archive"})}function f(e){k({...e,target:"unarchive"})}function g(e){k({...e,target:"mark_as_read"})}function v(e){k({...e,target:"mark_as_unread"})}function h(e){k({...e,target:"frame"})}function _(e){k({...e,target:"open_reply_menu"})}function b(e){k({...e,target:"open_automation_view_all_notifications_menu"})}function y(e){k({...e,target:"open_automation_view_error_raised_notification"})}function S(e){let{environment:t,pageId:o,isCurrentlyFollowing:n,from:i,notificationId:r}=e;p().K4(t,"click_page_updates_notifications_button",{pageId:o,isCurrentlyFollowing:n,from:i,notificationId:r})}function w(e){let{environment:t,backlinkPageId:o,notificationId:n,alreadyRead:i,activity:r,tab:a}=e;k({environment:t,target:"title",notificationId:n,alreadyRead:i,activity:r,tab:a,otherArgs:{backlinkPageId:o}})}function k(e){let{environment:t,target:o,notificationId:n,alreadyRead:r,activity:a,tab:s,otherArgs:l}=e;C({environment:t,target:o});const c=d().default.state.sessionId;j(t,{target:o,notification_id:n,activity_id:a.id,tab:s,sessionId:c,is_filtered:d().default.isFilteredToUnreadOnly(),...l}),n&&i().e(p().mc(t),{alreadyRead:r,notificationId:n,activityId:a.id,from:o,sessionId:c})}function I(e){const t=d().default.state.sessionId;t&&(p().K4(e,"close_sidebar_updates",{sessionId:t,tab:P()}),d().default.endSession())}function C(e){let{environment:t,target:o}=e,n=!1;switch(o){case"title":case"body":n=!0;break;case"archive":case"unarchive":case"mark_as_read":case"mark_as_unread":case"add_reaction":case"remove_reaction":case"open_reply_menu":case"open_automation_view_all_notifications_menu":case"open_automation_view_error_raised_notification":case"frame":case"main":case"approve_request_access":case"deny_request_access":n=!1;break;default:(0,r().t1)(o)}n&&I(t)}function x(e){let{environment:t,from:o}=e;const i=(0,n().w_)(t.TabbedRouterStore.state);var r;"web"===(r=i).type&&"nativeTab"===r.route.name&&"updates"===r.route.tab&&T({environment:t,from:o})}function T(e){let{environment:t,forceRestartSession:o,from:n}=e;d().default.startSession({forceRestart:o??!1}),function(e,t){c().default.logEvent("open_sidebar_updates",t.tab,t),p().K4(e,"open_sidebar_updates",{...t,...(0,l().UF)({environment:e})})}(t,{tab:P(),unread_notifications_count:u().aY(),sessionId:d().default.state.sessionId,from:n})}function M(e){let{environment:t,activityUpdatesSource:o,filters:n,prevFilters:i}=e;p().K4(t,"update_notification_filters",{source:o,prev_date_range_filter_start:i.dateRange.start,prev_date_range_filter_end:i.dateRange.end,prev_activity_types:i.activityTypes,date_range_filter_start:n.dateRange.start,date_range_filter_end:n.dateRange.end,activity_types:n.activityTypes})}function P(){const e=d().default.state.currentTab;switch(e){case"mentions":return"mentions_comments";case"archive":return"archive";case"allPages":return"all_updates";default:(0,r().t1)(e)}}function A(e){let{environment:t,action:o,args:n}=e;p().K4(t,"push_notification_desktop",{...n,action:o})}function R(e,t){const o={...t,onlyRead:"read"===t.readFilter,sessionId:d().default.state.sessionId};c().default.logEvent("archive_all_notifications",t.readFilter,o),p().K4(e,"archive_all_notifications",o)}function B(e){c().default.logEvent("mark_all_notifications_as_read"),p().K4(e,"mark_all_notifications_as_read",{sessionId:d().default.state.sessionId})}function E(e,t){p().K4(e,"toggle_filter_for_unread_notifications",t)}function D(e){let{environment:t,auto_loaded:o}=e;d().default.startSession({forceRestart:!0});const n={tab:a().Fz(),unread_notifications_count:u().aY(),sessionId:d().default.state.sessionId,from:"inbox",auto_loaded:o,...(0,l().UF)({environment:t})};c().default.logEvent("open_sidebar_updates",a().Fz(),n),p().K4(t,"open_sidebar_updates",n)}function U(e){let{environment:t}=e;const o=d().default.state.sessionId;o&&(p().K4(t,"close_sidebar_updates",{tab:a().Fz(),sessionId:o}),d().default.endSession())}function F(e){k({...e,target:"main"})}function N(e,t){const{notificationActivityPairs:o,affectedNotificationIds:n,target:i}=t,r=new Set(n),a=o.filter((e=>{let{notification:t}=e;return r.has(t.id)}));if(0===a.length)return;const s=new Set,l=new Set;a.forEach((e=>{let{notification:t,activity:o}=e;"commented"===t.type?s.add(o.discussion_id):l.add(t.id)})),p().K4(e,"click_update_group",{target:i,sessionId:d().default.state.sessionId,notification_ids:Array.from(l),discussion_ids:Array.from(s),notification_page_id:a[0].notification.navigable_block_id})}function V(e,t){p().K4(e,"toggle_inbox_tab",{...t,sessionId:d().default.state.sessionId})}function L(e,t){p().K4(e,"click_expand_replies",{...t,sessionId:d().default.state.sessionId})}function O(e){p().K4(e,"open_notification_settings_from_all_updates")}function Z(e){p().K4(e,"open_page_updates")}function j(e,t){p().K4(e,"click_update",{...t,tab:"homeTile"===t.tab?"homeTile":a().Fz(),view_type:s().default.state.mode})}function K(e,t){const{target:o,...n}=t;let i;"notify_mobile"===o?i="set_mobile_notification":"notify_desktop"===o?i="set_desktop_notification":"notify_email"===o?i="set_email_notification":"notify_email_always"===o?i="set_email_always_notification":"notify_email_digest"===o?i="set_email_digest_notification":"notify_home_digest_email"===o?i="set_home_digest_email_notification":"notify_slack_mention"===o?i="set_slack_mention_notification":"notify_slack_all_activity"===o?i="set_slack_all_activity_notification":(0,r().t1)(o),p().K4(e,i,n)}function z(e){p().K4(e,"set_marketing_emails_preferences")}function H(e,t){p().K4(e,"follow_page",t)}function q(e,t){p().K4(e,"unfollow_page",t)}function W(e,t){p().K4(e,"update_page_follow_settings",t)}},880026:(e,t,o)=>{o.d(t,{Et:()=>s,G:()=>c,QK:()=>r,QL:()=>a,Wy:()=>l,dl:()=>i,eZ:()=>d,kS:()=>u});var n=()=>o(594546);async function i(e){return n().K4(e,"notion_calendar_connect")}function r(e,t){n().K4(e,"click_open_in_calendar",t)}function a(e){n().K4(e,"calendar_rebrand_onboarding_modal_show")}function s(e,t){n().K4(e,"calendar_rebrand_onboarding_modal_click",t)}function l(e){n().K4(e,"calendar_rebrand_success_modal_show")}function c(e,t){n().K4(e,"calendar_rebrand_success_modal_click",t)}function d(e){n().K4(e,"click_calendar_sidebar_link")}function u(e){n().K4(e,"click_calendar_upsell_prompt_cta")}},462928:(e,t,o)=>{o.d(t,{$D:()=>y,$l:()=>T,C$:()=>R,Gk:()=>u,IE:()=>I,Io:()=>p,J7:()=>h,L:()=>V,NG:()=>m,PL:()=>L,Pk:()=>U,SY:()=>D,TL:()=>N,VZ:()=>O,Vk:()=>C,YV:()=>x,_0:()=>f,a7:()=>Z,ax:()=>M,e7:()=>P,fP:()=>E,ho:()=>d,iI:()=>F,jB:()=>w,jw:()=>v,o7:()=>k,p5:()=>B,qJ:()=>b,qO:()=>g,qq:()=>_,vd:()=>A,wq:()=>j,y6:()=>S});o(267602),o(30005);var n=()=>o(625230),i=()=>o(594546),r=()=>o(572623),a=()=>o(43519),s=()=>o(876822),l=()=>o(749826),c=()=>o(863119);function d(e,t){i().K4(e,"onboarding_dialog_error",t),k(e,"onboarding_dialog_error",t)}function u(e,t){i().K4(e,"onboarding_error",t),k(e,"onboarding_error",t)}function p(e){const{hashed_user_id:t}=a().default.state;i().j({environment:e,event:{eventName:"debug_meta_event_complete_registration",eventProperties:{hashed_user_id:t}}}),c().Io(e,t)}function m(e,t){if(i().K4(e,"onboarding_show",t),l().default.logEvent("onboarding_show",1,{...t}),t.is_new_onboarding){var o;const{currentUserSettingsStore:e}=s().default.getState();l().default.logEvent("sign_up_by_domain_type",null==e||null===(o=e.getSettings())||void 0===o?void 0:o.domain_type,{})}}function f(e,t){i().K4(e,"onboarding_invite_copy",t),k(e,"onboarding_invite_copy",t)}function g(e,t){i().K4(e,"onboarding_share_link",t),k(e,"onboarding_share_link",t)}function v(e,t){i().K4(e,"onboarding_close",t),k(e,"onboarding_close",t)}function h(e,t){i().K4(e,"onboarding_skip",t),k(e,"onboarding_skip",t)}function _(e,t){i().K4(e,"onboarding_back",t),k(e,"onboarding_back",t)}function b(e,t){i().K4(e,"onboarding_invite_send",t),k(e,"onboarding_invite_send",t)}function y(e,t){i().K4(e,"onboarding_space_icon_upload",t),k(e,"onboarding_space_icon_upload",t)}function S(e,t){i().K4(e,"onboarding_stage",t),l().default.logEvent("onboarding_stage",1,{stage:t.stage,workspace_type:t.initial_workspace_type,is_new_onboarding:t.is_new_onboarding,device_type:e.device.deviceType})}function w(e,t,o){i().K4(e,"onboarding_stage_exit",{...t,back:o}),l().default.logEvent("onboarding_stage_exit",1,{stage:t.stage,workspace_type:t.initial_workspace_type,is_new_onboarding:t.is_new_onboarding,device_type:e.device.deviceType,back:o})}function k(e,t,o){i().K4(e,"onboarding_serverside",{...o,phase:t},{dontWait:!0})}function I(e,t){i().K4(e,"onboarding_join_space_click",t),l().default.logEvent("onboarding_join_space_click",t.joined_space_index,{...t})}function C(e,t){i().K4(e,"onboarding_create_space_click",t),l().default.logEvent("onboarding_create_space_click")}function x(e,t){i().K4(e,"onboarding_invite_click",t);const{invited_emails:o,...n}=t;l().default.logEvent("onboarding_invite_click",o.length,{...n})}function T(e,t){i().K4(e,"onboarding_invite_attempt",t)}function M(e,t){i().K4(e,"onboarding_upload_profile_photo",t)}function P(e,t){i().K4(e,"onboarding_join_space",t)}function A(e,t){const o="space_name"in t?(e=>{let{space_name:t,...o}=e;return o})(t):t;i().j({environment:e,event:{eventName:"onboarding_create_space",eventProperties:o}})}function R(e,t){i().K4(e,"onboarding_plan_type_select",t),l().default.logEvent("onboarding_plan_type_select",t.planType,{...t})}function B(e,t){i().K4(e,"onboarding_persona_select",t),l().default.logEvent("onboarding_persona_select","persona",{...t})}function E(e,t){i().K4(e,"onboarding_persona_select",t),l().default.logEvent("onboarding_persona_select","role",{...t})}function D(e,t){i().K4(e,"onboarding_persona_select",t),l().default.logEvent("onboarding_persona_select","useCases",{...t})}function U(e,t){i().K4(e,"onboarding_persona_select",t),l().default.logEvent("onboarding_persona_select","categories",{...t})}function F(e,t){i().K4(e,"onboarding_persona_select",t),l().default.logEvent("onboarding_persona_select","companySize",{...t})}function N(e,t){i().K4(e,"onboarding_persona_survey_action",{...t,action:t.action}),l().default.logEvent("onboarding_persona_survey_action",t.action,{}),l().default.logEvent(`onboarding_persona_survey_action_${t.action}`,t.plan_selection,{})}function V(e,t){i().K4(e,"onboarding_mobile_app_download_click",t),l().default.logEvent("onboarding_mobile_app_download_click")}function L(e,t){var o,a;const{currentUserSettingsStore:d,currentUserRootStore:u}=s().default.state;i().Zf(e,{onboarding_complete:!0}),i().j({environment:e,event:{eventName:"onboarding_complete",eventProperties:t}}),c().PL(e),l().default.logEvent("onboarding_complete",1,{domain_type:null==d||null===(o=d.getSettings())||void 0===o?void 0:o.domain_type,device_type:e.device.deviceType,is_new_onboarding:t.is_new_onboarding,is_professional_team_user:r().QZ(),user_persona:t.user_persona,plan_type:t.plan_type,create_or_join:t.initial_workspace_type}),n().j({name:"onboarding_complete"}),l().default.logEvent("onboarding_complete_by_plan_type",t.plan_type,{}),l().default.logEvent("onboarding_complete_by_device_type",e.device.deviceType,{}),l().default.logEvent("onboarding_complete_by_user_persona",t.user_persona,{}),l().default.logEvent("onboarding_complete_by_user_team_role",t.user_team_role,{}),t.user_use_cases&&t.user_use_cases.forEach((e=>{l().default.logEvent("onboarding_complete_by_user_use_case",e,{})})),t.user_categories&&t.user_categories.forEach((e=>{l().default.logEvent("onboarding_complete_by_user_category",e,{})})),l().default.logEvent("onboarding_complete_by_domain_type",null==d||null===(a=d.getSettings())||void 0===a?void 0:a.domain_type,{}),l().default.logEvent("onboarding_complete_by_create_or_join_space",t.initial_workspace_type,{}),l().default.logEvent("onboarding_complete_by_is_new_user_onboarding",t.is_new_onboarding.toString(),{}),l().default.logEvent("onboarding_complete_by_workspaces_count",(null==u?void 0:u.getSpaceViewStores().length)||0,{}),r().QZ()&&l().default.logEvent("pro_team_onboarding_complete",1,{})}function O(e,t){i().K4(e,"onboarding_team_invite_email_entered",t)}function Z(e,t){i().K4(e,"onboarding_team_invite_add_more_clicked",t)}function j(e,t){i().K4(e,"onboarding_bulk_invites_rendered",t)}},175113:(e,t,o)=>{o.d(t,{$C:()=>s,MU:()=>c,UZ:()=>p,hy:()=>l,lg:()=>u,sx:()=>i,v2:()=>d,vc:()=>a,zP:()=>r});var n=()=>o(594546);function i(e,t){n().K4(e,"open_peek_as_page",t)}function r(e,t){n().K4(e,"peek_arrow_navigation",t)}function a(e,t){n().K4(e,"close_side_peek",t)}function s(e,t){n().K4(e,"close_peek",t)}function l(e,t){n().K4(e,"expand_block",t)}function c(e,t){n().K4(e,"open_peek_mode_picker",t)}function d(e,t){n().K4(e,"open_peek_mode_picker",t)}function u(e,t){n().K4(e,"update_peek_mode_format",t)}function p(e,t){n().K4(e,"update_peek_mode_format",t)}},912732:(e,t,o)=>{o.d(t,{Ad:()=>f,E5:()=>$,If:()=>q,Jp:()=>G,Kf:()=>D,L7:()=>y,LA:()=>h,ME:()=>T,Mv:()=>x,NL:()=>k,O8:()=>N,PH:()=>Y,RP:()=>v,SM:()=>K,Xb:()=>B,b4:()=>b,cO:()=>W,d:()=>F,dS:()=>I,dU:()=>z,dq:()=>M,g9:()=>Q,gR:()=>P,hY:()=>C,kM:()=>V,kx:()=>g,mz:()=>A,nC:()=>H,oE:()=>L,pZ:()=>_,qT:()=>R,xt:()=>U,zU:()=>E});o(267602),o(653476),o(470928),o(30005),o(241792),o(228244);var n=()=>o(528514),i=()=>o(933868),r=()=>o(625230),a=()=>o(513670),s=()=>o(342792),l=()=>o(696459),c=()=>o(594546),d=()=>o(122479),u=()=>o(681832),p=()=>o(749826),m=()=>o(465755);function f(e,t){c().K4(e,"permissions_settings_security_banner_show",t)}function g(e,t){c().K4(e,"permissions_settings_security_banner_click",t)}function v(e,t){c().K4(e,"permissions_settings_search_click",t),p().default.logEvent("permissions_settings_search_click",t.current_tab)}function h(e,t){c().K4(e,"permissions_settings_export_guests_button_click",t),p().default.logEvent("permissions_settings_export_guests_button_click",1,t)}function _(e,t){c().K4(e,"permissions_settings_table_multiselect_click",t)}function b(e,t){c().K4(e,"permissions_settings_table_button_click",t),p().default.logEvent("permissions_settings_table_button_click",t.button_name,t)}function y(e,t){c().K4(e,"permissions_settings_invite_button_click",t),p().default.logEvent("permissions_settings_invite_button_click",t.type)}function S(e){const{user_id:t,page_id:o,...n}=e;return n}function w(e,t){c().K4(e,"update_page_permission","user_id"in t||"page_id"in t?S(t):t)}function k(e,t){c().K4(e,"set_permission_item",t)}function I(e,t){if("team"===t.type){const{team_id:o,...n}=t;c().K4(e,"expand_permission",{...n},{forceOverrideAutomaticEventData:{team_id:o}})}else c().K4(e,"expand_permission",t)}function C(e,t){c().K4(e,"page_share_user_access_role",t)}function x(e){const{newRole:t,availableRoles:o}=e;if("none"===t||"content_only_editor"===t)return;o.some((e=>"content_only_editor"===e.role))&&r().j({name:"save_non_content_editor_role"})}function T(e){const{environment:t,spaceBot:o,from:n}=e;c().j({environment:t,event:{eventName:"update_space_permission",eventProperties:{updated_bot_id:(0,s().cj)(o.bot_id),from:n,membership_type:o.membership_type,parent_table:o.bot_parent_table,parent_id:o.bot_parent_id}}}),p().default.logEvent("update_space_permission",n,{membership_type:o.membership_type})}function M(e){const{environment:t,spaceUser:o,from:n}=e;c().j({environment:t,event:{eventName:"update_space_permission",eventProperties:{updated_user_id:(0,s().cj)(o.user_id),membership_type:o.membership_type,invite_id:o.invite_id,from:n}}}),p().default.logEvent("update_space_permission",n,{membership_type:o.membership_type})}function P(e,t){var o;let{item:n,teamStore:i}=t;const r=null===(o=i.getPermissionItems())||void 0===o?void 0:o.find((e=>e.type===n.type));(null==r?void 0:r.role)!==n.role&&m().YP(e,"update_team_permission",{store:i,..."user_id"in n||"page_id"in n?S(n):n,..."user_id"in n&&{permission_user_id:(0,s().cj)(n.user_id)},old_role:null==r?void 0:r.role,is_team_role_change:!1,is_permission_change:!0})}function A(e,t){let{memberInfo:o,store:n,team_role:i}=t;m().YP(e,"update_team_permission",{store:n,team_role:i,is_team_role_change:!0,is_permission_change:!1,..."user"===o.entity_type?{permission_user_id:o.user_id}:{permission_group_id:o.group_id}})}function R(e,t){c().K4(e,"permissions_settings_tab_click",t),p().default.logEvent("permissions_settings_tab_click",t.tab,t)}function B(e){c().K4(e,"permission_group_rename")}function E(e,t){c().K4(e,"permission_group_set_icon",t)}function D(e,t){c().K4(e,"permission_group_add_members",t)}function U(e){c().K4(e,"permission_group_remove_member")}function F(e){c().K4(e,"permission_group_delete")}function N(e){c().K4(e,"permission_group_create")}function V(e){var t;let{environment:o,location:n,inSudoMode:i,store:r,newItems:a,fromPermissionWrapper:s,flowId:l}=e;const c=null===(t=r.getCollectionStore())||void 0===t?void 0:t.id,d=r.getParentCollectionIdUpToTwoLevels();O({store:r,newItems:a}).forEach((e=>{let{role_old_inherited_or_most_permissive:t,role_old_on_page:r,privacy_level:a,old_privacy_level:p,newItem:m}=e;w(o,a||p?{...m,location:n,in_sudo_mode:i||void 0,role_old_inherited_or_most_permissive:t,role_old_on_page:r,privacy_level:a,old_privacy_level:p,share_menu_session_id:u().default.state.sessionId,from_permission_wrapper:s,collection_id:c,parent_collection_id:d,invite_flow_id:l}:{...m,location:n,in_sudo_mode:i||void 0,role_old_inherited_or_most_permissive:t,role_old_on_page:r,share_menu_session_id:u().default.state.sessionId,from_permission_wrapper:s,collection_id:c,parent_collection_id:d,invite_flow_id:l})}))}function L(e){const{environment:t,calculatedPermissions:o}=e;c().K4(t,"page_share_permissions_summary",{share_menu_session_id:u().default.state.sessionId,page_permission_summary:j(o)})}function O(e){let{store:t,newItems:o}=e;const r=e=>`${e.type}:${n().D3(e)}`,s=t.getPermissionItems(),l=a().KX(s,r),c=d().YO(t).map((e=>e.permissionItem)),u=a().KX(c,r);return o.map((e=>{var t;const o=r(e),n=u[o],a=null===(t=l[o])||void 0===t?void 0:t.role,s=null==n?void 0:n.role;return(0,i().Ir)(e)?{newItem:e,role_old_inherited_or_most_permissive:s,role_old_on_page:a,privacy_level:Z(e),old_privacy_level:n&&(0,i().Ir)(n)?Z(n):"private"}:{newItem:e,role_old_inherited_or_most_permissive:s,role_old_on_page:a}}))}function Z(e){return"none"===e.role?"private":e.unlisted_timestamp?"unlisted":"open"}function j(e){const{mostPermissiveSpaceItem:t,mostPermissiveAncestorTeamOwnerItem:o,mostPermissiveAncestorTeamMemberItem:n,pagePermissionUIModel:r}=e,{mostPermissiveGroupPermissions:a,mostPermissiveUserPermissions:s}=r;return{space:t.permissionItem.role,team_owner:null==o?void 0:o.permissionItem.role,team_member:null==n?void 0:n.permissionItem.role,groups:{full_access:a.filter((e=>{let{permissionItem:{role:t}}=e;return i().zz(t)})).length,can_edit:a.filter((e=>{let{permissionItem:{role:t}}=e;return i().VM(t)})).length,can_edit_content:a.filter((e=>{let{permissionItem:{role:t}}=e;return i().WY(t)})).length,can_comment:a.filter((e=>{let{permissionItem:{role:t}}=e;return i().rG(t)})).length,can_view:a.filter((e=>{let{permissionItem:{role:t}}=e;return i().rz(t)})).length},users:{full_access:s.filter((e=>{let{permissionItem:{role:t}}=e;return i().zz(t)})).length,can_edit:s.filter((e=>{let{permissionItem:{role:t}}=e;return i().VM(t)})).length,can_edit_content:s.filter((e=>{let{permissionItem:{role:t}}=e;return i().WY(t)})).length,can_comment:s.filter((e=>{let{permissionItem:{role:t}}=e;return i().rG(t)})).length,can_view:s.filter((e=>{let{permissionItem:{role:t}}=e;return i().rz(t)})).length},privacy_level:Z(t.permissionItem)}}function K(e){c().K4(e,"widen_permissions")}function z(e,t){let o;c().K4(e,"request_access",t),"page"===t.request_access_type||"collection"===t.request_access_type?o=t.requested_access_level:"team"===t.request_access_type?o="team_access_request":"space"===t.request_access_type?o="space_access_request":(0,l().t1)(t),p().default.logEvent("request_access",o,t)}function H(e,t){c().K4(e,"grant_access",t),p().default.logEvent("grant_access",t.newAccessLevel,t)}function q(e,t){c().K4(e,"grant_access_update_access_level",t)}function W(e,t){c().K4(e,"ignore_access_request",t)}function G(e,t){c().K4(e,"toggle_request_access_security_setting",t)}function $(e,t){c().K4(e,"view_all_requests_from_membership_request_notification",t),p().default.logEvent("view_all_requests_from_membership_request_notification","notification",t)}function Q(e){c().K4(e,"open_guest_membership_request_modal"),p().default.logEvent("open_guest_membership_request_modal")}function Y(e){c().K4(e,"render_guest_membership_request_entry_point"),p().default.logEvent("render_guest_membership_request_entry_point")}},28162:(e,t,o)=>{o.d(t,{Cr:()=>w,EH:()=>g,Eb:()=>_,Kk:()=>h,LT:()=>k,Sn:()=>y,WC:()=>u,Zb:()=>S,Zf:()=>v,fh:()=>b,gi:()=>m,nL:()=>p,sb:()=>f,wF:()=>d});var n=()=>o(594546),i=()=>o(589525),r=()=>o(524434),a=()=>o(749826),s=()=>o(147542),l=()=>o(609306),c=()=>o(192425);function d(e,t){const o={...t,...(0,i().UF)({environment:e})};n().K4(e,"open_search",o)}function u(e,t){n().K4(e,"space_invitation_email_clicked",t)}function p(e,t){n().K4(e,"select_search_item",t);const{numKeystrokes:o,timeToSelectMs:i,selectedItemIndex:r,originalPosition:s,context:l,numLocalResults:c,searchSessionId:d,searchSessionFlowNumber:u,numVisibleMembers:p,localSources:m,isMobile:f,timeToRenderResult:g}=t,v=Boolean(!!m&&m.length>0),h=p>1;a().default.logEvent("select_search_item",r,{numKeystrokes:o,timeToSelectMs:i,selectedItemIndex:r,numLocalResults:c,originalItemIndex:s,searchSessionFlowNumber:u,searchSessionId:d,context:l,isMultiplayer:h,isLocalResult:v,isMobile:f,timeToRenderResult:g});const _=1/(r+1);n().K4(e,"quick_find_reciprocal_rank",{reciprocalRank:_,context:l,searchSessionId:d,numLocalResults:c,isMultiplayer:h}),a().default.logEvent("quick_find_reciprocal_rank",_,{context:l,searchSessionId:d,numLocalResults:c,isMultiplayer:h,isLocalResult:v,isMobile:f})}let m=function(e){return e[e.SidePeekPanel=0]="SidePeekPanel",e[e.KeyboardShortcut=1]="KeyboardShortcut",e}({});function f(e,t){n().K4(e,"search_copy_link",t)}function g(e,t){n().K4(e,"abandoned_search",t);const{numKeystrokes:o,timeToAbandonMs:i,numLocalResults:r,numVisibleMembers:s,isMobile:l}=t,c=s>1;a().default.logEvent("abandoned_search",o,{numKeystrokes:o,timeToAbandonMs:i,numLocalResults:r,searchSessionId:t.searchSessionId,isMultiplayer:c,isMobile:l}),n().K4(e,"quick_find_reciprocal_rank",{reciprocalRank:0,searchSessionId:t.searchSessionId,numLocalResults:r,isMultiplayer:c}),a().default.logEvent("quick_find_reciprocal_rank",0,{searchSessionId:t.searchSessionId,numLocalResults:r,isMultiplayer:c,isMobile:l})}function v(e,t){n().K4(e,"search_client_results",t)}function h(e,t){n().K4(e,"search_post_click_page_interaction",t)}function _(e,t){var o;n().K4(e,"search_post_click_page_exit",{dwellTime:(new Date).getTime()-t.timeEntered.getTime()},{forceOverrideAutomaticEventData:{queryId:null===(o=c().Z.state)||void 0===o?void 0:o.queryId}})}function b(e,t){const{currentSearchSessionId:o,currentWorkspaceId:i,newWorkspaceId:r}=t;n().K4(e,"search_quick_search_switch_workspace",{current_search_session_id:o,current_workspace_id:i,new_workspace_id:r})}function y(e,t){n().K4(e,"search_open_shortcut_settings_from_command_search_hint",{search_session_id:t.searchSessionId})}function S(e,t){n().K4(e,"search_hover_command_search_hint",{search_session_id:t.searchSessionId})}function w(e,t){n().K4(e,"search_query_has_operators",{operations:t.operations,search_session_id:t.searchSessionId})}function k(){return r().KR.isQuickFindEnabled()?s().Z.state.sessionId:l().default.state.sessionId}},155055:(e,t,o)=>{o.d(t,{A0:()=>v,AQ:()=>m,He:()=>c,O$:()=>d,SU:()=>a,Wb:()=>f,XI:()=>s,Ym:()=>S,eo:()=>_,gV:()=>l,kA:()=>y,ps:()=>p,qP:()=>u,wr:()=>g,xG:()=>b,xU:()=>h});var n=()=>o(594546),i=()=>o(589525),r=()=>o(749826);function a(e,t){n().K4(e,"open_settings",{...t,...(0,i().UF)({environment:e})})}function s(e,t){n().K4(e,"toggle_settings_tab",t)}function l(e,t){n().K4(e,"site_settings_action",t)}function c(e){n().K4(e,"upload_profile_photo")}function d(e,t){n().K4(e,"name_changed",t)}function u(e){n().K4(e,"delete_account_clicked")}function p(e){n().K4(e,"delete_account_confirmed")}function m(e){n().K4(e,"log_out_from_active_sessions_clicked")}function f(e){n().K4(e,"change_password_clicked")}function g(e){n().K4(e,"remove_password_clicked")}function v(e,t){n().K4(e,"locale_changed",t)}function h(e,t){n().K4(e,"change_locale_clicked",t)}function _(e,t){n().K4(e,"invite_link_updated",t),r().default.logEvent("invite_link_updated",String(t.enabled),t)}function b(e,t){n().K4(e,"allowed_email_domains_updated",t)}function y(e,t){n().K4(e,"security_settings_tab_changed",t)}function S(e,t){n().K4(e,"cdrr_setting_updated",t)}},381140:(e,t,o)=>{o.d(t,{An:()=>I,Bf:()=>R,HY:()=>w,LM:()=>l,ME:()=>b,MR:()=>v,Mk:()=>x,NQ:()=>T,P0:()=>A,PR:()=>P,Qd:()=>c,SR:()=>B,Se:()=>_,VS:()=>h,Yg:()=>C,Zm:()=>p,_f:()=>f,ai:()=>y,hH:()=>M,kV:()=>m,mv:()=>s,ph:()=>u,qY:()=>k,so:()=>S,t8:()=>g,v$:()=>d});var n=()=>o(993407),i=()=>o(594546),r=()=>o(589525),a=()=>o(465755);function s(e,t){i().K4(e,"reorder_outliner_section",t)}function l(e){i().K4(e,"sidebar_expand")}function c(e){i().K4(e,"sidebar_unexpand")}function d(e,t){i().K4(e,"open_comments_sidebar",t)}function u(e,t){i().K4(e,"open_updates_sidebar",t)}function p(e,t){i().K4(e,"updates_sidebar_tab_click",t)}function m(e,t){i().K4(e,"open_view_all_popover",t)}function f(e,t){i().K4(e,"select_page_from_view_all_popover",t)}function g(e,t){const{teamStore:o,...n}=t;a().YP(e,"outliner_item_toggle",{store:o,...n})}function v(e,t){a().YP(e,"outliner_team_toggle",t)}function h(e,t){i().K4(e,"outliner_section_toggle",t)}function _(e){i().K4(e,"click_nested_child_page")}function b(e,t){i().K4(e,"click_desktop_navigator",t)}function y(e){i().K4(e,"open_space_switcher")}function S(e){i().K4(e,"space_switcher_select_space")}function w(e){i().K4(e,"space_switcher_logout_click")}function k(e,t){i().K4(e,"pin_page",t)}function I(e,t){i().K4(e,"unpin_page",t)}function C(e,t){const{teamStore:o,...n}=t;a().YP(e,"click_outliner_item",{store:o,...(0,r().UF)({environment:e}),...n})}function x(e,t){const{outliner_type:o}=t;i().j({environment:e,event:{eventName:"open_outliner_section_menu",eventProperties:{outliner_type:o,...(0,r().UF)({environment:e})}}})}function T(e,t){i().j({environment:e,event:{eventName:"sort_outliner_section",eventProperties:{...t,...(0,r().UF)({environment:e})}}})}function M(e,t){const{outliner_type:o,option:a}=t;i().j({environment:e,event:{eventName:"truncate_outliner_section",eventProperties:{outliner_type:o,option:a===n().Ng?"None":a,...(0,r().UF)({environment:e})}}})}function P(e,t){const{outliner_type:o,auto_loaded:n}=t;i().j({environment:e,event:{eventName:"open_outliner_section_overflow",eventProperties:{outliner_type:o,auto_loaded:n,...(0,r().UF)({environment:e})}}})}function A(e,t){const{auto_loaded:o}=t;i().j({environment:e,event:{eventName:"open_assistant_pane",eventProperties:{auto_loaded:o,...(0,r().UF)({environment:e})}}})}function R(e,t){i().j({environment:e,event:{eventName:"toggle_sidebar_section_panel",eventProperties:t}})}function B(e,t){const{sidebar_section_type:o,search_query:n,flow_id:r}=t;i().j({environment:e,event:{eventName:"sidebar_pane_query_change",eventProperties:{sidebar_section:o,search_query:n,flow_id:r}}})}},395362:(e,t,o)=>{o.d(t,{$B:()=>V,BP:()=>h,Cg:()=>le,Ci:()=>S,Dn:()=>w,Ef:()=>C,HH:()=>k,Io:()=>re,JX:()=>F,Jk:()=>q,Jo:()=>D,KF:()=>E,KZ:()=>oe,LO:()=>U,NF:()=>P,O8:()=>ce,Om:()=>ie,P0:()=>W,P1:()=>T,Pv:()=>g,Rb:()=>_,S4:()=>ee,Sw:()=>y,T4:()=>I,TJ:()=>X,VM:()=>de,VT:()=>m,Vi:()=>Y,Y7:()=>te,ZA:()=>Q,Zm:()=>R,Zv:()=>ne,_6:()=>K,_m:()=>L,aT:()=>z,am:()=>M,bw:()=>b,dw:()=>O,fN:()=>pe,j7:()=>N,jk:()=>se,kj:()=>f,l0:()=>x,o8:()=>ue,pC:()=>H,pR:()=>J,rZ:()=>B,rv:()=>j,tB:()=>ae,tX:()=>$,vC:()=>Z,wV:()=>A,x8:()=>G,z0:()=>v});o(267602),o(653476),o(241792);var n=()=>o(698422),i=()=>o(824462),r=()=>o(594546),a=()=>o(572623),s=()=>o(749826),l=()=>o(896014),c=()=>o(18281),d=()=>o(697623),u=()=>o(897257),p=()=>o(863119);function m(e,t){r().j({environment:e,event:{eventName:"create_space",eventProperties:t}});const o=(0,d().zt)();if("professional"===t.domain_type&&(r().K4(e,"professional_workspace_created",t),p().L1(e,{subscriptionTier:o,planType:t.planType})),"team"===t.planType&&(r().K4(e,"team_workspace_created",t),p().tO(e,{subscriptionTier:o,planType:t.planType})),p().VT(e,{subscriptionTier:o,domainType:t.domain_type}),"team"===t.planType){const t=n().Q3(),o=n().SY();i().callApi({eventName:"trackConversionEvent",environment:e,data:{eventName:"create_team_space",fbp:t,clickIds:o}})}}function f(e,t){r().K4(e,"join_space",t)}function g(e,t){r().K4(e,"set_notifications_as_read",t)}function v(e){r().K4(e,"leave_space"),q(e,{invite_origin:"workspace_leave",domainType:(0,a().JF)(),new_workspace_member_count:-1,new_workspace_member_ids:[e.currentUser.id??""]})}function h(e){r().K4(e,"delete_space"),s().default.logEvent("delete_space")}function _(e,t){r().K4(e,"convert_guest_to_member",t),s().default.logEvent("convert_guest_to_member",t.convert_to,{origin:t.origin})}function b(e){r().K4(e,"remove_guest")}function y(e,t){s().default.logEvent("remove_member",t.member_user_id,t),q(e,{invite_origin:"workspace_remove_member",domainType:t.domainType,new_workspace_member_count:t.new_workspace_member_count,new_workspace_member_ids:[t.member_user_id]}),r().K4(e,"remove_member",{member_user_id:t.member_user_id,member_role:t.member_role,contraction_survey_id:t.contraction_survey_id})}function S(e){r().K4(e,"managed_user_reactivate_button_clicked")}function w(e,t){r().K4(e,"managed_user_support_access_toggled",t)}function k(e,t){r().K4(e,"managed_users_dashboard_search",t)}function I(e,t){r().K4(e,"managed_users_external_space_access_set",t)}function C(e,t){r().K4(e,"managed_users_prevent_support_access_toggled",t)}function x(e,t){r().K4(e,"managed_users_session_duration_modal_confirmed",t)}function T(e,t){r().K4(e,"managed_user_delete_button_clicked",t)}function M(e,t){r().K4(e,"managed_user_edit_modal_submitted",t)}function P(e){r().K4(e,"managed_user_log_out_button_clicked")}function A(e,t){r().K4(e,"managed_user_remove_from_external_workspace_button_clicked",t)}function R(e){r().K4(e,"managed_user_reset_password_button_clicked")}function B(e){r().K4(e,"managed_user_suspend_button_clicked")}function E(e,t){r().K4(e,"managed_users_log_out_all_button_clicked",t)}function D(e,t){r().K4(e,"managed_users_reset_passwords_all_button_clicked",t)}function U(e,t){r().K4(e,"managed_users_session_duration_selected",t)}function F(e,t){r().K4(e,"managed_user_edit_profile_modal_open",t)}function N(e,t){r().K4(e,"managed_user_delete_modal_confirmed",t)}function V(e,t){r().K4(e,"managed_user_edit_modal_confirmed",t)}function L(e){r().K4(e,"managed_user_log_out_modal_confirmed")}function O(e,t){r().K4(e,"managed_user_remove_from_external_workspace_modal_confirmed",t)}function Z(e){r().K4(e,"managed_user_reset_password_modal_confirmed")}function j(e,t){r().K4(e,"managed_user_suspend_modal_confirmed",t)}function K(e,t){r().K4(e,"managed_users_log_out_all_modal_confirmed",t)}function z(e,t){r().K4(e,"managed_users_reset_passwords_all_modal_confirmed",t)}function H(e){r().K4(e,"managed_users_dashboard_button_clicked")}function q(e,t){const o=(0,d().zt)();r().K4(e,"workspace_member_number_update",{new_workspace_member_count:t.new_workspace_member_count,new_workspace_member_ids:t.new_workspace_member_ids,origin:t.invite_origin,subscription_tier:o,domain_type:t.domainType,allow_domain_auto_invite:t.allow_domain_auto_invite}),s().default.logEvent("workspace_member_number_update",t.new_workspace_member_count,{origin:t.allow_domain_auto_invite?`${t.invite_origin}_allow_domain`:t.invite_origin,subscription_tier:o,domain_type:t.domainType})}function W(e,t){const o=(0,d().zt)(),n=(0,a().JF)();r().K4(e,"person_property_invite_click_menu_item",{subscription_tier:o,domain_type:n,origin:t.origin,invite_flow_id:t.invite_flow_id})}function G(e,t){const o=(0,d().zt)(),n=(0,a().JF)();r().K4(e,"person_property_invite_render_menu_item",{subscription_tier:o,domain_type:n,origin:t.origin,invite_flow_id:t.invite_flow_id})}function $(e,t){const o=(0,d().zt)(),n=(0,a().JF)(),i="member"===t.invite_option?t.can_add_member?"member":"request_member":"guest";r().K4(e,"person_property_invite_click_invite_button",{subscription_tier:o,domain_type:n,invited_type:i,invited_user_count:t.invited_user_count,origin:t.origin,invite_token_query:t.inviteTokenQuery,invite_targets:t.inviteTargets,invite_flow_id:t.invite_flow_id})}function Q(e,t){const o=(0,d().zt)(),n=(0,a().JF)();r().K4(e,"person_property_invite_click_upgrade_button",{subscription_tier:o,domain_type:n,origin:t.origin,invited_user_count:t.invited_user_count,invite_flow_id:t.invite_flow_id})}function Y(e,t){const o=(0,d().zt)(),n=(0,a().JF)();r().K4(e,"person_property_invite_guest_invited",{subscription_tier:o,domain_type:n,invited_user_count:t.invited_user_count,origin:t.origin,invite_flow_id:t.invite_flow_id})}function J(e,t){const o=(0,d().zt)(),n=(0,a().JF)();r().K4(e,"person_property_invite_member_invited",{subscription_tier:o,domain_type:n,invited_user_count:t.invited_user_count,origin:t.origin,invite_flow_id:t.invite_flow_id})}function X(e,t){const o=(0,d().zt)(),n=(0,a().JF)();r().K4(e,"person_property_invite_member_requested",{subscription_tier:o,domain_type:n,invited_user_count:t.invited_user_count,origin:t.origin,invite_flow_id:t.invite_flow_id})}function ee(e,t){const o=(0,d().zt)(),n=(0,a().JF)();r().K4(e,"person_property_invite_error",{subscription_tier:o,domain_type:n,invite_stage:t.invite_stage,invite_flow_id:t.invite_flow_id,error:t.error})}function te(e,t){const o=(0,d().zt)(),n=(0,a().JF)(),i="member"===t.invite_option?t.can_add_member?"member":"request_member":"guest";r().K4(e,"person_property_invite_completed",{subscription_tier:o,domain_type:n,invited_type:i,invited_user_count:t.invited_user_count,is_success:t.is_success,origin:t.origin,invite_flow_id:t.invite_flow_id})}function oe(e,t){const o=(0,d().zt)(),n=(0,a().JF)();r().K4(e,"person_property_invite_message_typed",{subscription_tier:o,domain_type:n,origin:t.origin,invite_flow_id:t.invite_flow_id})}function ne(e,t){const o=(0,d().zt)(),n=(0,a().JF)();r().K4(e,"person_property_invite_dismiss_popup",{subscription_tier:o,domain_type:n,origin:t.origin,invite_flow_id:t.invite_flow_id})}function ie(e,t){const o=(0,d().zt)(),n=(0,a().JF)();r().K4(e,"person_property_invite_change_permission",{subscription_tier:o,domain_type:n,origin:t.origin,invite_flow_id:t.invite_flow_id,invited_role:t.invited_role})}function re(e,t){const o=(0,d().zt)(),n=(0,a().JF)();r().K4(e,"person_property_invite_click_invite_option",{subscription_tier:o,domain_type:n,origin:t.origin,invite_flow_id:t.invite_flow_id,invite_option:t.invite_option})}function ae(e,t){r().K4(e,"guest_invite_request_setting_toggled",t)}function se(e,t){r().K4(e,"settings_deeplink_clicked",t)}function le(e,t){r().K4(e,"guest_invite_request_resolved",t)}function ce(e,t){r().K4(e,"resolve_membership_request",t),s().default.logEvent("resolve_membership_request",t.status,t)}function de(e,t){r().K4(e,"request_access_review_button_clicked",t),s().default.logEvent("request_access_review_button_clicked",t.status,{from:t.from,user_count:t.user_count,request_type:t.request_type})}function ue(e,t){if(r().K4(e,"disable_guest_toggle",t),!0===t.new_value&&!t.keep_existing_guests_if_disabled){const t=u().subscriptionDataStoreInstance.state;if(!t)return;const o=(0,c().ND)(t).length;o>0&&pe(e,{origin:"space_setting_disable_guest",changedNumber:-o})}}function pe(e,t){let{inviteTargets:o,origin:n,changedNumber:i}=t;const p=(0,a().JF)(),m=(0,d().zt)();if(i)return r().K4(e,"workspace_guest_number_update",{new_workspace_guest_count:i,origin:n,subscription_tier:m,domain_type:p}),void s().default.logEvent("workspace_guest_number_update",i,{origin:n,subscription_tier:m,domain_type:p});const f=u().subscriptionDataStoreInstance.state;if(!f||!o)return;const g=c().CM(f).map((e=>e.userId)),v=o.filter((e=>!!(0,l().cl)(e)||"existingUser"===e.type&&!g.includes(e.value.id)));0!==v.length&&(r().K4(e,"workspace_guest_number_update",{new_workspace_guest_count:v.length,origin:n,subscription_tier:m,domain_type:p}),s().default.logEvent("workspace_guest_number_update",v.length,{origin:n,subscription_tier:m,domain_type:p}))}},979614:(e,t,o)=>{o.d(t,{Aq:()=>j,Bg:()=>Z,Dc:()=>E,FR:()=>D,Ib:()=>ne,LY:()=>z,Lc:()=>B,Ls:()=>Q,Ms:()=>se,NI:()=>oe,PN:()=>N,QO:()=>X,Qr:()=>P,R3:()=>T,VO:()=>de,VQ:()=>V,Vk:()=>pe,YT:()=>y,Zb:()=>Y,_j:()=>W,_q:()=>H,b0:()=>k,bf:()=>le,cY:()=>O,e3:()=>b,fZ:()=>F,g3:()=>J,iL:()=>L,j:()=>fe,jh:()=>G,jw:()=>A,k1:()=>C,k6:()=>q,lj:()=>ae,lq:()=>x,ms:()=>ue,nd:()=>S,q7:()=>w,qP:()=>R,qz:()=>U,rY:()=>K,rx:()=>ee,sA:()=>te,t6:()=>ce,tC:()=>me,wl:()=>$,x1:()=>ie,xo:()=>M,y$:()=>I,z2:()=>re});var n=()=>o(730120),i=()=>o(572680),r=()=>o(320080),a=()=>o(513670),s=()=>o(342792),l=()=>o(326966),c=()=>o(231077),d=()=>o(205228),u=()=>o(594546),p=()=>o(572623),m=()=>o(749826),f=()=>o(548812),g=()=>o(18281),v=()=>o(697623),h=()=>o(897257),_=()=>o(863119);function b(e){u().K4(e,"pricing_grid_view_end"),m().default.logEvent("pricing_grid_view_end")}function y(e,t){u().K4(e,"subscription_update_modal_open",t),m().default.logEvent("subscription_update_modal_open",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function S(e,t){u().K4(e,"subscription_update_modal_confirmation_click",{...a().CE(t.state,"modalId"),modal_id:t.state.modalId}),m().default.logEvent("subscription_update_modal_confirmation_click",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function w(e,t){u().K4(e,"subscription_update_modal_exit",{...a().CE(t.state,"modalId"),modal_id:t.state.modalId}),m().default.logEvent("subscription_update_modal_exit",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function k(e,t){u().K4(e,"subscription_update_modal_billing_interval_updated",t),m().default.logEvent("subscription_update_modal_billing_interval_updated",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function I(e,t){u().K4(e,"subscription_update_modal_expand_billing_summary",{...a().CE(t.state,"modalId"),modal_id:t.state.modalId}),m().default.logEvent("subscription_update_modal_expand_billing_summary",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function C(e,t){u().K4(e,"subscription_update_modal_hide_billing_summary",{...a().CE(t.state,"modalId"),modal_id:t.state.modalId}),m().default.logEvent("subscription_update_modal_hide_billing_summary",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function x(e){u().K4(e,"subscription_billing_dismissed"),m().default.logEvent("subscription_billing_dismissed",void 0,{device_os:e.device.os,platform:e.device.platform})}function T(e,t){u().K4(e,"subscription_billing_opened",t),m().default.logEvent("subscription_billing_opened",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function M(e){u().K4(e,"subscription_plans_dismissed"),m().default.logEvent("subscription_plans_dismissed",void 0,{device_os:e.device.os,platform:e.device.platform})}function P(e,t){u().K4(e,"subscription_plans_opened",t),m().default.logEvent("subscription_plans_opened",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function A(e){u().K4(e,"currently_subscribed")}function R(e,t){u().j({environment:e,event:{eventName:"subscription_upgrade_modal_present_price",eventProperties:{external_id:t.externalId}}})}function B(e,t){u().K4(e,"subscription_upgrade_modal_open",t),m().default.logEvent("subscription_upgrade_modal_open",void 0,t)}function E(e,t){const{event:o,modal_id:n,modal_type:i}=t,r={...(0,l().by)(o),modal_id:n,modal_type:i};u().K4(e,"subscription_upgrade_modal_payment_element_changed",r),m().default.logEvent("subscription_upgrade_modal_payment_element_changed",void 0,{...r,device_os:e.device.os,platform:e.device.platform})}function D(e,t){u().K4(e,"subscription_upgrade_modal_billing_interval_updated",t),m().default.logEvent("subscription_upgrade_modal_billing_interval_updated",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function U(e,t){u().K4(e,"subscription_upgrade_modal_add_on_features_updated",t),m().default.logEvent("subscription_upgrade_modal_add_on_features_updated",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function F(e,t){u().K4(e,"subscription_upgrade_modal_upgrade_accepted",t),m().default.logEvent("subscription_upgrade_modal_upgrade_accepted",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function N(e,t){u().K4(e,"subscription_upgrade_modal_upgrade_click",t),m().default.logEvent("subscription_upgrade_modal_upgrade_click",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function V(e,t){u().K4(e,"subscription_upgrade_modal_upgrade_failed_validation",t),m().default.logEvent("subscription_upgrade_modal_upgrade_failed_validation",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function L(e,t){u().K4(e,"subscription_upgrade_onboarding_failed_validation",t)}function O(e,t){u().K4(e,"subscription_upgrade_modal_upgrade_failed_payment",t),m().default.logEvent("subscription_upgrade_modal_upgrade_failed_payment",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function Z(e){u().K4(e,"subscription_upgrade_onboarding_failed_payment")}function j(e,t){u().K4(e,"subscription_upgrade_modal_upgrade_failed_payment_recovery_initiated",t),m().default.logEvent("subscription_upgrade_modal_upgrade_failed_payment_recovery_initiated",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function K(e,t){u().K4(e,"subscription_upgrade_modal_address_form_updated",t),m().default.logEvent("subscription_upgrade_modal_address_form_updated",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function z(e,t){u().K4(e,"subscription_upgrade_modal_exit",t),m().default.logEvent("subscription_upgrade_modal_exit",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function H(e,t){u().K4(e,"subscription_upgrade_modal_stripe_error",t),m().default.logEvent("subscription_upgrade_modal_stripe_error",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function q(e,t){u().j({environment:e,event:{eventName:"create_subscription",eventProperties:t}}),m().default.logEvent("create_subscription",t.plan,t)}async function W(e,t){var o,a,l,v;const b=p().JF(),y=h().subscriptionDataStoreInstance.state?await(0,g().DI)(e,t.spaceId,h().subscriptionDataStoreInstance.state):1,S=!!t.trialEndDate&&t.trialEndDate>=n().ou.now();u().K4(e,"update_subscription_tier",{from:t.from,action:t.action,old_subscription_tier:t.oldSubscriptionTier,new_subscription_tier:t.newSubscriptionTier,old_price_id:t.oldPriceId,new_price_id:t.newPriceId,old_currency:t.oldCurrency,new_currency:t.newCurrency,old_add_ons:t.oldAddOns,new_add_ons:t.newAddOns,old_billing_interval:t.oldBillingInterval,new_billing_interval:t.newBillingInterval,is_cancel_subscription:t.isCancelSubscription,is_professional_team:t.isProfessionalTeamUser,domain_type:b,space_visible_members:y,is_trial:t.isTrial,is_mid_trial:S,is_mm_or_ent_trial:t.isMmOrEnt,trial_end_date:null==t?void 0:t.trialEndDate,trial_id:null===(o=t.trialData)||void 0===o?void 0:o.id,trial_from:null===(a=t.trialData)||void 0===a?void 0:a.from,modal_id:t.modalId}),m().default.logEvent("update_subscription_tier",void 0,{from:t.from,action:t.action,old_subscription_tier:t.oldSubscriptionTier,new_subscription_tier:t.newSubscriptionTier,old_price_id:t.oldPriceId,new_price_id:t.newPriceId,old_currency:t.oldCurrency,new_currency:t.newCurrency,old_add_ons:t.oldAddOns,new_add_ons:t.newAddOns,old_billing_interval:t.oldBillingInterval,new_billing_interval:t.newBillingInterval,is_cancel_subscription:t.isCancelSubscription,space_visible_members:y,is_trial:t.isTrial,is_mid_trial:S,trial_end_date:null==t?void 0:t.trialEndDate,device_os:e.device.os,platform:e.device.platform,is_mm_or_ent_trial:t.isMmOrEnt,modal_id:t.modalId});const w=null===(l=t.oldAddOns)||void 0===l?void 0:l.includes("ai"),k=null===(v=t.newAddOns)||void 0===v?void 0:v.includes("ai");if(!w&&k&&(u().K4(e,"ai_addon_purchased",t),_().XT(e)),!t.oldSubscriptionTier||!t.newSubscriptionTier)return;const{device:I}=e;if(!(0,r().nR)(t.oldSubscriptionTier)&&(0,r().nR)(t.newSubscriptionTier)&&"personal"!==t.newSubscriptionTier){const o={country:t.addressCountry,productName:t.newPriceId,price:t.creditAmount||0,spaceId:(0,s().cj)(t.spaceId),deviceType:I.isTablet?"tablet":I.isMobile?"mobile":"desktop",subscriptionTier:t.newSubscriptionTier};if("professional"===b&&u().K4(e,"professional_workspace_upgraded",t),u().K4(e,"workspace_upgraded",t),_().U5(e,{...o,domainType:b}),"professional"===b&&_().jM(e),"team"===t.planType&&(u().K4(e,"team_workspace_upgraded",t),_().C6(e)),e.device.isElectron&&!(0,f().X3)()){const n=(0,i().fo)(d().default.domainBaseUrl,{deviceId:await u().cG(e),oldSubscriptionTier:t.oldSubscriptionTier,newSubscriptionTier:t.newSubscriptionTier,isProfessionalTeamUser:t.isProfessionalTeamUser,deviceType:e.device.deviceType,domainType:b,eventData:o});return void c().openExternalUrl(n)}}}function G(e,t){u().K4(e,"subscription_update_plan",t),m().default.logEvent("subscription_update_plan",void 0,t)}function $(e,t){u().K4(e,"subscription_update_billing",t),m().default.logEvent("subscription_update_billing",void 0,t)}function Q(e,t){const{firstName:o,email:n,...i}=t;u().K4(e,"enterprise_sales_contact",{...i,enterprise_name:o,enterprise_email:n}),m().default.logEvent("enterprise_sales_contact")}function Y(e,t){u().K4(e,"enterprise_sales_contact_opened",t)}function J(e){u().j({environment:e,event:{eventName:"enterprise_sales_contact_dismissed",eventProperties:{}}})}function X(e,t){u().K4(e,"enterprise_sales_contact_updated",t)}function ee(e,t){u().K4(e,"cancel_subscription",t),m().default.logEvent("cancel_subscription",void 0,t)}function te(e,t){u().K4(e,"click_upgrade_button",t),m().default.logEvent("click_upgrade_button",void 0,t)}function oe(e,t){u().K4(e,"plan_cta_click",t),m().default.logEvent("plan_cta_click",void 0,t)}function ne(e){u().K4(e,"compare_all_features_click"),m().default.logEvent("compare_all_features_click",void 0)}function ie(e,t){u().j({environment:e,event:{eventName:"block_limit_banner_viewed",eventProperties:t}})}function re(e){u().lu(e,"approaching_block_limit","approaching_block_limit",60)}function ae(e){const t=u().lu(e,"reach_block_limit","reach_block_limit",60);m().default.logEvent("reach_block_limit",1),t&&u().Zf(e,{reach_block_limit:!0,reach_block_limit_time:Date.now(),subscription_tier:v().zt()})}function se(e,t){u().K4(e,"add_on_update_click",t)}function le(e,t){u().K4(e,"member_requested_ai_addon",t),m().default.logEvent("member_requested_ai_addon",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function ce(e,t){u().j({environment:e,event:{eventName:"student_ai_offer_viewed",eventProperties:t}}),m().default.logEvent("student_ai_offer_viewed",void 0,{device_os:e.device.os,platform:e.device.platform})}function de(e){u().j({environment:e,event:{eventName:"student_ai_popup_dismissed",eventProperties:{}}}),m().default.logEvent("student_ai_popup_dismissed",void 0,{device_os:e.device.os,platform:e.device.platform})}function ue(e,t){u().K4(e,"partner_trial_signup",t),m().default.logEvent("partner_trial_signup",void 0,{...t})}function pe(e){u().K4(e,"cancel_trial_button_clicked"),m().default.logEvent("cancel_trial_button_clicked",void 0)}function me(e,t,o){u().lu(e,"subscription_uncollectible_blurred_experience_displayed","subscription_uncollectible_blurred_experience_displayed",300,{is_workspace_owner:t,overdue_invoice_count:o})}function fe(e,t){const o=t.name,n="args"in t?t.args:void 0;u().K4(e,o,n)}},961226:(e,t,o)=>{o.d(t,{Kx:()=>s,VI:()=>i,Zv:()=>r,eO:()=>a});var n=()=>o(594546);function i(e){const{environment:t,...o}=e;(0,n().j)({environment:t,event:{eventName:"suggesting_mode_session_start",eventProperties:o}})}function r(e){const{environment:t,...o}=e;(0,n().j)({environment:t,event:{eventName:"suggesting_mode_session_end",eventProperties:o}})}function a(e){const{environment:t,...o}=e;(0,n().j)({environment:t,event:{eventName:"suggest_edit",eventProperties:o}})}function s(e){const{environment:t,...o}=e;(0,n().j)({environment:t,event:{eventName:"edit_existing_suggestion",eventProperties:o}})}},407391:(e,t,o)=>{o.d(t,{Ar:()=>s,Fs:()=>c,LS:()=>d,Ot:()=>a,V:()=>l,wk:()=>u});var n=()=>o(594546),i=()=>o(589525),r=()=>o(749826);function a(e,t){n().K4(e,"open_support_chat",t)}function s(e,t){n().K4(e,"click_help",{from:t.from,qna_session_id:t.qnaSessionId}),r().default.logEvent("click_help")}function l(e,t){n().K4(e,"click_help_item",{...t,...(0,i().UF)({environment:e})}),"sales_chat"===t.item&&r().default.logEvent("click_help_item")}function c(e,t){n().K4(e,"global_click_learn",t)}function d(e){n().K4(e,"zendesk_metadata_open_messenger")}function u(e){n().K4(e,"zendesk_metadata_signup")}},465755:(e,t,o)=>{o.d(t,{$:()=>T,$1:()=>S,$4:()=>p,BW:()=>A,Bd:()=>f,FN:()=>O,GZ:()=>d,Gp:()=>I,IW:()=>x,LB:()=>z,NO:()=>_,OR:()=>R,Ph:()=>Z,Pr:()=>b,Qk:()=>B,SJ:()=>N,UD:()=>k,XT:()=>j,YP:()=>U,cX:()=>w,co:()=>H,dw:()=>u,ej:()=>F,er:()=>P,ix:()=>y,kr:()=>v,mF:()=>C,mi:()=>M,o_:()=>h,pi:()=>m,rF:()=>L,uA:()=>K,v2:()=>g,z:()=>E});var n=()=>o(513670),i=()=>o(696459),r=()=>o(594546),a=()=>o(589525),s=()=>o(577128),l=()=>o(270895),c=()=>o(749826);async function d(e,t){await r().K4(e,"manage_teams_filter_click",t)}function u(e,t){r().K4(e,"manage_teams_sort",t)}function p(e,t){U(e,"duplicate_team",t)}function m(e,t){r().K4(e,"open_team_browser",{...t,...(0,a().UF)({environment:e})})}function f(e,t){r().K4(e,"team_browser_search_cleared",t)}function g(e,t){const{teamStore:o,outliner_type:n}=t;U(e,"team_browser_member_list_hover",{store:o,outliner_type:n})}function v(e,t){r().K4(e,"create_team_start",{from:t.from,flow_id:t.flowId}),c().default.logEvent("create_team_start",1,{...t,...(0,a().UF)({environment:e})})}async function h(e,t){const{store:o}=t;await o.load(),U(e,"create_team_complete",t),D("create_team_complete",t)}async function _(e,t){const{store:o}=t;await o.load(),U(e,"enable_teams",t)}function b(e,t){const{screen:o,...n}=t;if(o===s().F.Team){const t={screen:"team",...n};return U(e,"close_create_team_modal",t),void D("close_create_team_modal",t)}const i={screen:"members",flow_id:t.flow_id,from:t.from,team_id:t.team_id,store:t.store};U(e,"close_create_team_modal",i),D("close_create_team_modal",i)}function y(e,t){U(e,"invite_team_members",t),D("invite_team_members",t)}function S(e,t){U(e,"invite_team_groups",t),D("invite_team_groups",t)}function w(e,t){U(e,"set_default_team",t)}function k(e,t){U(e,"join_team",t),D("join_team",t)}function I(e,t){U(e,"archive_team",t)}function C(e,t){U(e,"transition_to_zero_teams",t)}function x(e,t){U(e,"restore_team",t)}function T(e,t){U(e,"remove_team_members",t)}function M(e,t){U(e,"remove_team_groups",t)}function P(e,t){U(e,"change_teams_order",t)}function A(e,t){U(e,"change_team_access_level",t)}function R(e,t){U(e,"update_team_settings",t)}function B(e,t){U(e,"open_outliner_team_overflow",{...t,...(0,a().UF)({environment:e})})}function E(e,t){U(e,"click_outliner_team_overflow_option",t),D("click_outliner_team_overflow_option",t)}function D(e,t){const{store:o,...n}=t;o?c().default.logEvent(e,1,{...r().nB(o),...n}):c().default.logEvent(e,1,t)}async function U(e,t,o){const{store:i,...a}=o;if(!i)return void(await r().K4(e,t,{...a}));const s=r().nB(i),l=n().CE(s,"team_id");await r().K4(e,t,{...l,...a},{forceOverrideAutomaticEventData:{team_id:s.team_id}})}function F(e,t,o,i,a){const{store:s,...l}=a;if(!s)return void r().lu(e,t,o,i,{...l});const c=r().nB(s),d=n().CE(c,"team_id");r().lu(e,t,o,i,{...d,...l},{forceOverrideAutomaticEventData:{team_id:c.team_id}})}function N(e,t){U(e,"open_team_home",t)}function V(e){switch(e){case l().a.General:return"general";case l().a.Members:return"members";case l().a.Security:return"security";default:(0,i().t1)(e)}}function L(e,t){U(e,"click_team_settings_tab",{store:t.store,tab_old_value:V(t.tab_old_value),tab_new_value:V(t.tab_new_value)})}function O(e,t){U(e,"restore_team_permissions",t)}function Z(e,t){U(e,"team_invite_link_confirmation_selection",t)}function j(e,t){U(e,"copy_team_invite_link",t),D("copy_team_invite_link",t)}function K(e,t){U(e,"click_team_invite_link",t)}function z(e,t){U(e,"request_access_to_team",t)}function H(e,t){U(e,"resolve_team_access_request",t)}},8101:(e,t,o)=>{o.d(t,{$6:()=>w,Cu:()=>_,EZ:()=>S,HU:()=>c,XQ:()=>m,Xy:()=>l,Y4:()=>y,bR:()=>v,dZ:()=>p,en:()=>u,gI:()=>k,jW:()=>d,me:()=>b,rN:()=>f,sY:()=>g});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(241792);var n=()=>o(342792),i=()=>o(696459),r=()=>o(594546),a=()=>o(589525),s=()=>o(749826);function l(e,t){const o={is_paid:!1,...t};r().j({environment:e,event:{eventName:"duplicate_template",eventProperties:o}}),s().default.logEvent("duplicate_template",o.from,o)}function c(e,t){r().K4(e,"duplicate_template_attempt",t)}function d(e,t){r().K4(e,"template_modal_open",{...t,...(0,a().UF)({environment:e})}),s().default.logEvent("template_modal_open",1)}function u(e,t){const{team_id:o,...n}=t;r().K4(e,"template_modal_accept",n,{forceOverrideAutomaticEventData:{team_id:o}}),s().default.logEvent("template_modal_accept",1)}function p(e,t){r().K4(e,"create_collection_template",t),s().default.logEvent("create_collection_template",1)}function m(e,t){r().K4(e,"activate_collection_template",t),s().default.logEvent("activate_collection_template",1)}function f(e,t){r().j({environment:e,event:{eventName:"select_template",eventProperties:{is_keyboard:t.is_keyboard,from:t.from,template_type:t.template_type}}})}function g(e,t){r().K4(e,"collection_template_action",t)}function v(e,t){let{from:o,preset_uri:n,created_block_stores:r,destination_team_id:a}=t;const s=[],l=[];for(const i of r){var c;const e=null===(c=i.getCollectionStore())||void 0===c?void 0:c.getDatabaseType();e&&(l.push(i.id),s.push(e))}const d=r.map((e=>{var t;return null===(t=e.getFormat())||void 0===t?void 0:t.app_id})).filter(i().$K);h(e,{from:o,preset_uri:n,created_page_ids:l,database_types:s,destination_team_id:a,app_ids:[...new Set(d)]})}function h(e,t){r().K4(e,"create_app_template",t)}function _(e,t){r().K4(e,"delete_app_template",t)}function b(e,t){r().K4(e,"create_typed_dbs_in_team_latency",t)}function y(e,t){r().K4(e,"apply_preset_features",t)}function S(e,t){r().K4(e,"template_duplication_v2_modal_close",{template_block_id:t.templateBlockId&&(0,n().F9)(t.templateBlockId)})}function w(e,t){r().K4(e,"template_duplication_v2_account_switcher_open",{template_block_id:(0,n().F9)(t.templateBlockId),num_of_users:t.numOfUsers})}function k(e,t){r().K4(e,"template_duplication_v2_switch_space",{template_block_id:(0,n().F9)(t.templateBlockId),template_destination_space_id:t.templateDestinationSpaceId&&(0,n().F9)(t.templateDestinationSpaceId),num_of_users:t.numOfUsers})}},540520:(e,t,o)=>{o.d(t,{F4:()=>u,Gb:()=>i,LA:()=>a,SL:()=>m,Sl:()=>r,Y_:()=>h,ap:()=>f,h2:()=>v,iB:()=>l,kY:()=>c,mc:()=>_,sI:()=>p,vt:()=>s,y9:()=>d,zQ:()=>g});var n=()=>o(594546);function i(e,t){n().K4(e,"legacy_transclusion_autofix",t)}function r(e,t){n().K4(e,"legacy_transclusion_duplication_fix",t)}function a(e,t){n().K4(e,"transaction_timestamp_collision",t)}function s(e,t){n().K4(e,"transaction_timestamp_regression",t)}function l(e,t){n().K4(e,"transaction_race_hazard",t)}function c(e,t){n().K4(e,"transaction_async_data_loss",t)}function d(e,t){n().K4(e,"transaction_deadlock_warning",t)}function u(e,t){n().K4(e,"transaction_too_large",t)}function p(e,t){n().K4(e,"transaction_queue_error_show",t)}function m(e){n().K4(e,"connection_error_show",{})}function f(e,t){n().K4(e,"connection_error_indicator_details_show",t)}function g(e,t){n().K4(e,"low_storage_error_show",t)}function v(e,t){n().K4(e,"transaction_queue_healthcheck",t)}function h(e,t){n().K4(e,"save_edits_error_modal_show",t)}function _(e,t){n().K4(e,"unsaved_transaction_error",t)}},824462:(e,t,o)=>{o.r(t),o.d(t,{appApiTriggerWithArgs:()=>B,callApi:()=>R,callMultiCellApi:()=>D,callStreamApi:()=>U,deleteBlocks:()=>N,getAiSuggestedProperties:()=>J,getAllTeamsInSpaceForAdmin:()=>Y,getCustomEmojisForSpace:()=>te,getSpaces:()=>F,getTrustedDomainsNumberOfMembersForSpace:()=>ne,getUserAnalyticsSettings:()=>L,getUserHomePages:()=>q,getUserSpaceExternalBots:()=>G,inAppGetBannerByBlockId:()=>ie,inAppGetTemplateByBlockId:()=>X,initializeUserAnalyticsEmptySync:()=>K,invalidateSubscriptionData:()=>W,loadCachedPageChunk:()=>O,loadCachedPageChunkV2:()=>Z,queryCollection:()=>j,refetchExternalObjectInstanceBlocks:()=>$,requestAccess:()=>H,restoreBlock:()=>V,saveTransactions:()=>z,translatePage:()=>oe,updateDisableGuestsOnSpace:()=>ee,updateTeamMembers:()=>Q});o(267602),o(241792),o(731107);var n=()=>o(649099),i=()=>o(799891),r=()=>o(431595),a=()=>o(362154);const s={getPageBacklinks:{initial:"getBacklinksForBlockInitial",fanout:"getBacklinksForBlockFanout"},testMultiCell:{initial:"testMultiCellInitial",fanout:"testMultiCellFanout"},getSpaces:{initial:"getSpacesInitial",fanout:"getSpacesFanout"},getUserNotifications:{initial:"getUserNotificationsInitial",fanout:"getUserNotificationsFanout"},getWebClipperData:{initial:"getWebClipperDataInitial",fanout:"getWebClipperDataFanout"}};var l=()=>o(836273),c=()=>o(956898),d=()=>o(513670),u=()=>o(839002),p=()=>o(696459),m=()=>o(594546),f=()=>o(235653),g=()=>o(443269),v=()=>o(709344),h=()=>o(527278),_=()=>o(526122),b=()=>o(148126),y=()=>o(341691),S=()=>o(274328),w=()=>o(565016),k=()=>o(876822),I=()=>o(804217),C=()=>o(601952),x=()=>o(253038),T=()=>o(308186),M=()=>o(497065);let P;async function A(e,t,o,n){if((0,r().tn)(o.body)){T().x2(o);const t=o.body.clientData&&(0,g().cq)(o.body.clientData);m().K4(e,"show_user_validation_response",{type:null==t?void 0:t.type})}if(o.offline)return o;console.error(o.error);const{RouterStore:s}=e;if(401===o.status&&i().log({level:"error",from:"api",type:"httpTrigger401",data:{eventName:t,isLoggedIn:e.currentUser.isLoggedIn(),miscDataToConvertToString:{response:o},routeName:s.state.route.name}}),403===o.status&&o.headers["content-type"]&&o.headers["content-type"].startsWith("text/html")&&i().logWithSampleRate({logMessage:{level:"error",from:"api",type:"httpTrigger403",data:{eventName:t,isLoggedIn:e.currentUser.isLoggedIn(),miscDataToConvertToString:{response:o},userId:e.currentUser.id,routeName:s.state.route.name}},samplePercentage:1}),401===o.status&&Boolean(o.body&&o.body.errorId)&&e.currentUser.isLoggedIn())switch(s.state.route.name){case"page":if((0,b().Sr)(e)){await y().actuallyLogoutAndDeleteMostLocalData({environment:e,nextLocation:window.location.pathname,logoutOrigin:a().F.PublicPageAccessDenied});break}case"root":case"space":case"onboarding":case"myIntegrations":case"creatorProfile":case"creatorProfileAnalytics":case"creatorProfileTemplates":case"creatorProfileCoupons":case"creatorProfileIntegrations":case"studentGroupSignup":if(n&&n===e.currentUser.id){const t=d().Ds((async()=>await y().actuallyLogoutAndDeleteMostLocalData({environment:e,userId:n,doNotRedirect:!0,logoutOrigin:a().F.PageAccessDenied})),1e3);await t();!function(e,t){const{RouterStore:o}=e;if((0,r().Jx)(t.body)&&"saml_sso_required"===t.body.clientData.type){const e=(0,g().wf)(h().Z.getIntl(),t);S().Z.setState({...S().Z.state,loginType:"saml",alert:e})}else if((0,r().Jx)(t.body)&&"email_verification_required"===t.body.clientData.type){const{email:e,thirdPartyToken:o}=t.body.clientData;S().Z.setState({...S().Z.state,loginType:"microsoft_login",email:e,thirdPartyToken:o,needsSendTemporaryPasswordReason:"microsoft_login_verification"})}else if((0,r().Jx)(t.body)&&("login_custom_session_expired"===t.body.clientData.type||"login_generic_session_expired"===t.body.clientData.type)){const e=h().Z.getIntl().formatMessage("login_custom_session_expired"===t.body.clientData.type?g().xf.login_custom_session_expired:g().xf.login_generic_session_expired,{errorCode:t.status});S().Z.setState({...S().Z.state,alert:e})}M().c4({environment:e,url:"page"===o.state.route.name?window.location.href:l()._j.login})}(await y().clearCurrentUser(e),o)}}return o}async function R(e){const{environment:t,eventName:o,data:a,userId:l,tracking:c,abortSignal:u,prefetchCacheKey:p,encoding:m,headers:g,prefetchMultiCellFanout:h}=e;!function(e){for(const t of Object.keys(e)){const o=e[t];(d().Ft(o)||d().o8(o))&&delete e[t]}}(a);const b=l||t.currentUser.id,y=(0,f().createApiHttpJsonRequestOptions)({environment:t,eventName:o,data:a,activeUserId:b,tracking:c,abortSignal:u,encoding:m,eventListeners:(0,w().getPerformanceEventListeners)({eventName:o,isPrefetchRequest:!1}),headers:g});let S;if(p&&t.prefetchCache){let e=p;if(h){if(!(p in s))throw new(r().p8)("prefetchMultiCellFanout can only enable prefetching for multi-cell api events");e=`${p}-${(0,_().XL)(y)}`}S=t.prefetchCache.getPrefetchedHttpRequest({key:e,request:y,abortSignal:u,isMobileNative:t.device.isMobileNative})}S??=(0,v().default)(y),C().default.incrementNumApiCallsInitiated();const T=Date.now(),M=await S,R=Date.now();return n().Z.addTrace({type:"api_call",name:o,start:T,end:R}),C().default.incrementNumApiCallsCompleted(),"success"===M.type?(x().I({environment:t,eventName:o,response:M.data,userId:b}),function(e){const{environment:t,responseUserId:o,eventName:n}=e;if(!o)return;if("saveTransactions"!==n&&"saveTransactionsMain"!==n&&"saveTransactionsFanout"!==n)return;const{id:r}=t.currentUser;if(o!==r){if(P===o)return;const{currentUserStore:e,currentUserRootStore:t,currentUserSettingsStore:a,currentSpaceViewStore:s}=k().default.state,l=r||"<undefined>",c=`currentUser ${l} didn't match user's cookie ${o}`;i().log({from:"client/api",level:"error",type:"currentUserWrong",data:{eventName:n,miscDataToConvertToString:{responseUserId:o,connectionStoreState:I().default.state,currentUserId:l,userStoreId:e&&e.id,userRootStoreId:t&&t.id,userSettingsStoreId:a&&a.id,currentSpaceViewStoreParentId:s&&s.getParentId()},message:c}}),P=o}else P=void 0}({environment:t,eventName:o,responseUserId:M.headers["X-Notion-User-Id"]}),M):A(t,o,M,b)}function B(e){return function(t){return R({...t,eventName:e})}}function E(e){return function(t,o,n,i,r,a,s,l,c){return R({environment:t,eventName:e,data:o,userId:n,tracking:i,abortSignal:r,prefetchCacheKey:a,encoding:s,headers:l,prefetchMultiCellFanout:c})}}async function*D(e){const{eventName:t}=e,{initial:o,fanout:n}=function(e){switch(e){case"getPageBacklinks":return s.getPageBacklinks;case"testMultiCell":return s.testMultiCell;case"getSpaces":return s.getSpaces;case"getUserNotifications":return s.getUserNotifications;case"getWebClipperData":return s.getWebClipperData;default:(0,p().t1)(e)}}(t),i=await R({...e,eventName:o});if("failed"===i.type)return void(yield i);if(yield i,!i.data.fanoutData)return;const r=async function*(t){const o=await u().qd(t,10,(async t=>R({...e,data:t.request,eventName:n,headers:t.headers,prefetchMultiCellFanout:!0})));for(const e of o)yield e;const i=o.map((e=>{if("success"===e.type)return e.data.fanoutData})).reduce(((e,t)=>t?e.concat(t):e),[]);i&&i.length&&(yield*r(i))};yield*r(i.data.fanoutData)}async function U(e){const{eventName:t,environment:o,data:n,userId:i,tracking:r,abortSignal:a,headers:s}=e,l=i||o.currentUser.id,d=(0,f().createApiHttpRequestOptions)({environment:o,eventName:t,data:n,activeUserId:l,tracking:r,abortSignal:a,eventListeners:(0,w().getPerformanceEventListeners)({eventName:t,isPrefetchRequest:!1}),format:"jsonStream",headers:s}),u=await(0,v().default)(d);return"failed"===u.type?A(o,t,u,l):(c().H1.is(u.data)||x().I({environment:o,eventName:t,response:u.data,userId:l}),u)}const F=E("getSpaces"),N=E("deleteBlocks"),V=E("restoreBlock"),L=E("getUserAnalyticsSettings"),O=B("loadCachedPageChunk"),Z=B("loadCachedPageChunkV2"),j=B("queryCollection"),K=E("initializeUserAnalyticsEmptySync"),z=E("saveTransactions"),H=E("requestAccess"),q=B("getUserHomePages"),W=E("invalidateSubscriptionData"),G=B("getUserSpaceExternalBots"),$=B("refetchExternalObjectInstanceBlocks"),Q=E("updateTeamMembers"),Y=E("getAllTeamsInSpaceForAdmin"),J=B("getAiSuggestedProperties"),X=E("inAppGetTemplateByBlockId"),ee=E("updateDisableGuestsOnSpace"),te=B("getCustomEmojisForSpace"),oe=B("translatePage"),ne=E("getTrustedDomainsNumberOfMembers"),ie=E("inAppGetBannerByBlockId")},661453:(e,t,o)=>{o.d(t,{a:()=>u});o(267602),o(653476),o(30005),o(241792);var n=o.n(o(39593)),i=()=>o(225339),r=()=>o(448768),a=()=>o(205228);function s(e){return[e.url,e.downloadName,e.download].filter(Boolean).join(":")}const l=new class{constructor(){this.lru=new(n())({max:1e3,maxAge:o(326966).U6})}set(e,t){this.lru.set(s(e),t)}get(e){return this.lru.get(s(e))}},c=new(o(973019).Z)({performRequests:async e=>{const t=e.map((e=>{let{url:t}=e;return t})),n=e[0].environment,i=(0,o(743359).AR)(t);if(o(594546).j({environment:n,event:{eventName:"multi_cell.batch_by_space_id.num_batches",eventProperties:{event_name:"getSignedFileUrls",num_batches:i.length}}}),o(749826).default.checkGate({gateName:"multi_cell_get_signed_urls"})){const e=new Map;for(const{spaceId:t,urls:r}of i){const o=await d({environment:n,urls:r,spaceId:t});for(const[t,n]of r.entries())e.set(s(n),o[t])}const o=new Array(t.length);for(const[n,i]of t.entries())o[n]=e.get(s(i));return o}return await d({environment:n,urls:t,spaceId:void 0})},batchSize:500,maxWorkers:1});async function d(e){const{environment:t,urls:n,spaceId:i}=e,r=o(824462).appApiTriggerWithArgs("getSignedFileUrls"),a=await r({environment:t,data:{urls:n},headers:(0,o(741633).Bb)({spaceId:i})});if("failed"===a.type)throw a.error;const{signedUrls:s}=a.data;return n.forEach(((e,t)=>{const o=s[t];l.set(e,o)})),s}async function u(e,t,o){const n=l.get(t);let s;return s=n||await c.enqueue({environment:e,url:t}),s&&(0,i().x$)(s)&&o&&(s=(0,r().NV)({httpUrl:s,protocol:a().default.protocol,includePort:!0})),s}},253038:(e,t,o)=>{o.d(t,{I:()=>s});var n=()=>o(217465),i=()=>o(594546),r=()=>o(749826),a=()=>o(143346);function s(e){const{environment:t,eventName:o,response:s,userId:l}=e;if(s&&s.recordMap){const e=n().RecordMapWithRole.create(s.recordMap);if(r().default.checkGate({gateName:"record_map_logging"})){const{num_records:n,num_cached_records:r,num_stale_records:s}=a().mQ(t,e);i().j({environment:t,event:{eventName:"client_record_map_stats",eventProperties:{api_name:o,num_records:n,num_cached_records:r,num_stale_records:s}}})}"syncRecordValues"!==o&&"syncRecordValuesSpace"!==o&&"syncRecordValuesMain"!==o&&a().fL({environment:t,userId:l,inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,recordMap:e,maybeStaleRecordMap:"loadCachedPageChunk"===o||"loadCachedPageChunks"===o||"loadCachedPageChunkV2"===o,debugSource:"handleRecordMapForResponse"})}}},430310:(e,t,o)=>{o.d(t,{Y:()=>p});o(670560),o(267602),o(470928),o(241792);var n=()=>o(799891),i=()=>o(547913),r=()=>o(741633),a=()=>o(217465),s=()=>o(827370),l=()=>o(260169),c=()=>o(688789),d=()=>o(824462);const u=new(o(973019).Z)({performRequests:async e=>{const t=o(749826).default.checkGate({gateName:"multi_cell_sync_record_values"}),s=new Array(e.length),u=e.map(((e,t)=>({environment:e.environment,request:e.args,index:t}))),p=o(513670).vM(u,(e=>e.request.userId));for(const[g,v]of Object.entries(p)){const e=v[0].environment,u=[];if(t){const{mainDbObjects:t,spaceCellObjects:a,spaceCellObjectsWithShortSpaceId:s,spaceCellObjectsMissingSpaceId:c}=(0,l().PU)(v.map((e=>{let{request:{pointer:t,version:o}}=e;return{pointer:t,version:o}})),(e=>e.pointer)),p=[];0!==t.length&&p.push({eventName:"syncRecordValuesMain",requests:t});for(const[e,n]of Object.entries(a)){var m;const t=null===(m=n.find((e=>{var t;const n=null===(t=e.pointer)||void 0===t?void 0:t.id;return(0,o(696459).$K)(n)&&(0,o(342792).ax)(n)})))||void 0===m||null===(m=m.pointer)||void 0===m?void 0:m.id,i=(0,r().Bb)({cellId:void 0,recordId:t,spaceId:e});p.push({eventName:"syncRecordValuesSpace",cellHeaders:i,requests:n})}if(0!==c.length){n().rateLimitedLog({level:"info",from:"syncRecordValuesBatched",type:"recordPointerMissingSpaceId",data:{miscDataToConvertToString:{requests:c}}});const t=(0,l().So)(e);let o;if(i().YM in t&&(o=t[i().YM]),o){const e=p.find((e=>{var t;return(null===(t=e.cellHeaders)||void 0===t?void 0:t[i().YM])===o}));e?e.requests.push(...c):p.push({eventName:"syncRecordValuesSpace",requests:c})}else p.push({eventName:"syncRecordValuesSpace",requests:c})}for(const[e,o]of Object.entries(s)){var f;const e=(0,r().Bb)({cellId:void 0,recordId:null===(f=o[0].pointer)||void 0===f?void 0:f.id,spaceId:void 0});p.push({eventName:"syncRecordValuesSpace",cellHeaders:e,requests:o})}await o(839002).qd(p,20,(async t=>{const{requests:o,cellHeaders:n,eventName:i}=t,r=await d().callApi({eventName:i,environment:e,data:{requests:o},userId:"undefined"===g?void 0:g,headers:n??{}});u.push(r)}))}else{const t=v.map((e=>{let{request:{pointer:t,version:o}}=e;return{pointer:t,version:o}})),o=await d().callApi({eventName:"syncRecordValues",environment:e,data:{requests:t},userId:"undefined"===g?void 0:g});u.push(o)}const p=a().RecordMapWithRole.create();let h;for(const t of u)"failed"!==t.type?p.assign(a().RecordMapWithRole.create(t.data.recordMap)):(h||(h=t.error),n().rateLimitedLog({level:"error",from:"syncRecordValuesBatched",type:"responseError",error:t.error}));if(h)throw h;c().default.addFromRecordMapWithRole(p),c().default.isEmpty()||o(423402).dY({environment:e});for(const{request:t,index:o}of v)if(t.pointer){const e=p.getValue(t.pointer),n=p.getRole(t.pointer);n&&(s[o]={value:e,role:n})}}return s},batchSize:500,maxWorkers:2,requestDelayMs:20,requestTimeoutMs:30*o(326966).C0});async function p(e,t){if(t.pointer&&(0,s().Ok)(t.pointer))try{const o=await u.enqueue({environment:e,args:t});return o||-1!==t.version?o:{value:void 0,role:"editor"}}catch(o){console.error("syncRecordValue error",o)}}},146630:(e,t,o)=>{o.d(t,{Bs:()=>me,KJ:()=>ve,Uz:()=>fe,_S:()=>ge,mc:()=>pe,qY:()=>ye});o(267602),o(653476),o(470928);var n=()=>o(468353),i=()=>o(506347),r=()=>o(575741),a=()=>o(799891),s=()=>o(362154),l=()=>o(396136),c=()=>o(139978),d=()=>o(779565),u=()=>o(989478),p=()=>o(691970),m=()=>o(630611),f=()=>o(282017),g=()=>o(245015),v=()=>o(720866),h=()=>o(342792),_=()=>o(916673),b=()=>o(326966),y=()=>o(853686),S=()=>o(594546),w=()=>o(982855),k=()=>o(429725),I=()=>o(239482),C=()=>o(148126),x=()=>o(341691),T=()=>o(726912),M=()=>o(658096),P=()=>o(876822),A=()=>o(908102),R=()=>o(844659),B=()=>o(483637),E=()=>o(822851),D=()=>o(56810),U=()=>o(469863),F=()=>o(826955),N=()=>o(76792),V=()=>o(192425),L=()=>o(625820),O=()=>o(576387),Z=()=>o(111631),j=()=>o(293307),K=()=>o(114104),z=()=>o(438793),H=()=>o(88142),q=()=>o(81066),W=()=>o(308186),G=()=>o(405851),$=()=>o(887274),Q=()=>o(13382),Y=()=>o(279762),J=()=>o(603274),X=()=>o(508383),ee=()=>o(401411),te=()=>o(824034),oe=()=>o(497065),ne=()=>o(278275),ie=()=>o(224597),re=()=>o(269299),ae=()=>o(423402),se=()=>o(13750),le=()=>o(22628),ce=()=>o(348141),de=()=>o(221662);let ue=null;function pe(e){P().default.setState(P().default.getInitialState());const{id:t}=e.currentUser;(!P().default.state.currentUserStore||t&&t!==P().default.state.currentUserStore.id)&&(t?(le().j(e,t),Q().Bk(e,t),ve(e,t)):(P().default.setState({...P().default.state,initialized:!0}),q().dd(e)))}function me(){const{currentSpaceStore:e}=P().default.getState();return e?e.id:void 0}async function fe(e){const{nextRoute:t,currentRoute:o,environment:u,query:p}=e,m=P().default.state.mainEditorCurrentBlockStore,g=P().default.state.currentCollectionViewStore,b=u.currentUser.id,I=e=>{P().default.state.lastUpdater===I&&(u.device.isMobileNative&&e.currentSpaceStore&&a().log({level:"info",from:"appActions",type:"SpaceSwitchingDebug",data:{message:"AppStore setting space with update in updateCurrentRoute: ",spaceId:e.currentSpaceStore.id}}),P().default.setState({...P().default.state,...e}))};P().default.setState({...P().default.state,lastUpdater:I});let C;if("page"===t.name&&t.queryId&&t.blockId&&V().Z.setState({queryId:t.queryId,pageId:t.blockId,timeEntered:new Date}),"marketplace"===t.name){const{currentSpaceStore:e}=P().default.state;if(!(null==e?void 0:e.id)){const{spaceId:e}=await Q().Ie(u);C=e}}if("page"===t.name||"space"===t.name||"nativeTab"===t.name||"quickSearch"===t.name||"chat"===t.name||"aiInferenceTranscript"===t.name||"marketplace"===t.name||"team"===t.name){let e,c;const g=async()=>(e||(e=await ee().I6({environment:u,request:{type:"block-space",...t}})),await P().default.waitUntil((()=>P().default.state.initialized)),c=e.spaceId,(e=>{P().default.state.lastUpdater===I&&M().default.setState({publicPageData:e})})(e),e),R=(0,f().QG)();if((0,w().AC)(u),"page"===t.name&&(!m||m.id!==t.blockId||o&&"page"===o.name&&o.blockId!==t.blockId||m.userId!==b)){var z;let e,c=t.blockId;if(t.slug&&!t.blockId){const o=await async function(e,t){const o=T().Z.getBlockIdForSlug(e);if(o)return{blockId:o,publicPageData:void 0};const n=await t(),i=n.pageId;i&&T().Z.setBlockIdForSlug(e,i);return{blockId:i,publicPageData:n}}(t.slug,g);c=o.blockId,e=o.publicPageData}if(!c)return void a().log({level:"error",from:"appActions",type:"missingBlockIdForPageRoute",data:{miscDataToConvertToString:{route:t}}});const f=new(F().G)(u,{table:l().iU,id:c}),v=f.getFormat().placeholder_workflow_template_id;if(f.isCollectionView()&&v){const{getCollectionTemplateFromId:e}=await j().Vh.load(),t=e(v);if(t){const{onNavigateToPlaceholderWorkflowTemplateBlock:e}=await K().ZJ.load(),{didOpenOnboardingModal:o}=e({environment:u,collectionTemplate:t,collectionViewBlockStore:f});if(o)return void oe().op(u)}}t.blockId=c,te().Pg(u),te().LU(u),Se(),te().rM(u);const w=new(E().Z);I({mainEditorCurrentBlockStore:f,currentLoadingContainerStore:w}),m||await ge({environment:u,store:f}),e||(e=await g());const{currentUserSettingsStore:C}=P().default.state;if(be({environment:u,publicPageData:e}))return void function(e){const{store:t,environment:o}=e,n=(0,k().ZP)({store:t,preferPublicLink:!1,pageVisitSource:void 0});oe().c4({environment:o,url:n})}({store:f,environment:u});const{presenceStore:M,currentUserRootStore:B}=P().default.state;X().E(M,u,D().$g,m),y().UX(u,{blockStore:f,fromPageRefresh:R,pageVisitStore:P().default.state.pageVisitStore,timestamp:Date.now()}),A().Z.resetIfNotCurrentPage(f.id);const N=new(U().Z);I({presenceStore:N});const V=D().$g.getCurrentPageVisitId();if(D().$g.initializeNewPageVisitId(),X()._({userId:b,rootStore:f,presenceStore:N,environment:u,pageVisitIdStore:D().$g}),B){const t=B.getSpaceViewStores().filter((t=>t.getSpaceId()===e.spaceId)).length>0;if("root"===(null==o?void 0:o.name)&&(void 0===e.spaceId||!t&&!e.isTrustedDomainPage)){if(C)return u.device.isMobileNative&&a().log({level:"warning",from:"loginActions",type:"setLoggedInUserId",data:{message:"SpaceDebug: navigateToFirstSpace because updateCurrentRoute is root and page is not in current spaceView"}}),void(await ie().L5({environment:u,userRootStore:B,userSettingsStore:C,pageVisitSource:i().tY.BackForward}));if(b)return void(await x().logoutSingleAccount({environment:u,userId:b,logoutOrigin:s().F.NoAvailableSpaces}))}const n=e.isTrustedDomainPage?t&&e.canJoinSpace:e.canJoinSpace;if(e.spaceId&&(n||e.userHasExplicitAccess)){const t=await ie().j({environment:u,userRootStore:B,spaceId:e.spaceId,navigate:!1,analyticsFrom:"redirect",userSettingsStore:C,redirectSource:"update_current_route_with_space_id"});u.device.isMobileNative&&a().log({level:"info",from:"appActions",type:"SpaceSwitchingDebug",data:{message:"updateCurrentRoute updating space because the route is a page with spaceId",spaceId:e.spaceId}}),I({currentSpaceViewStore:t.spaceViewStore,currentSpaceStore:t.spaceViewStore.getSpaceStore()})}else if(!e.spaceId&&P().default.state.currentSpaceStore){const e=await ie().j({environment:u,userRootStore:B,spaceId:P().default.state.currentSpaceStore.id,navigate:!1,analyticsFrom:"redirect",userSettingsStore:C,redirectSource:"update_current_route_no_space_id"});var q;if(u.device.isMobileNative)a().log({level:"info",from:"appActions",type:"SpaceSwitchingDebug",data:{message:"updateCurrentRoute updating space because of joinSpaceResult of current space",spaceId:null===(q=e.spaceViewStore)||void 0===q?void 0:q.getSpaceId()}});I({currentSpaceViewStore:e.spaceViewStore,currentSpaceStore:e.spaceViewStore.getSpaceStore()})}}e.spaceId&&b&&(de().h({environment:u,spaceId:e.spaceId,userId:b}),Z().I({environment:u,spaceId:e.spaceId,userId:b}));const L=null==B?void 0:B.getSpaceViewStores(),W=null==L||null===(z=L.filter((e=>e.getSpaceId()===f.getSpaceId())))||void 0===z?void 0:z[0],G=Boolean(void 0!==W),{currentSpaceStore:Q}=P().default.state;Q?(O().OR({environment:u,spaceId:Q.id}).then((async()=>{await f.load(),_e(u,f,p,D().$g,V,t.slug,e.userHasExplicitAccess,e.isTrustedDomainPage,e.trustedDomains,G,t.embedded)})),S().Jq(u)):e&&e.spaceId&&(await f.load(),_e(u,f,p,D().$g,V,t.slug,e.userHasExplicitAccess,e.isTrustedDomainPage,e.trustedDomains,G,t.embedded)),async function(e,t,o){const a=(0,_().Qc)(t).query,s=a[n().gS];if(parseInt(a[i().$X])===i().tY.Email&&(s.includes("email_digest")||s.includes("email_push"))&&a[i().Qs]&&o){const t=(0,h().wr)(a[i().Qs]),n=F().Xo.createChildStore(o,{table:d().uX,id:t,spaceId:o.id});await n.load();const s=n.getModel();if(!s)return;if((0,r().e)((0,S().mc)(e),{alreadyRead:s.getRead(),notificationId:t,activityId:s.getActivityId(),from:"email"}),!s.getRead()){const t={id:s.id,space_id:s.getSpaceId(),read:s.getRead(),type:s.getType()};re().createAndCommit({userAction:"appActions.setNotificationAsReadFromEmail",environment:e,canUndo:!0,perform:e=>J().$h({notification:t,rootStore:o,transaction:e,read:!0})})}}}(u,p,Q);const Y=(null==Q?void 0:Q.id)||e.spaceId;Y&&(ae().pt({environment:u,spaceId:Y,force:!1}),H().L({environment:u,spaceId:Y,force:!1}),$().Wf({environment:u,spaceId:Y}))}else if("space"===t.name){const e=await g();if(e.publicHomePage){const t=new(F().G)(u,{table:l().iU,id:e.publicHomePage}),o=new(E().Z);I({mainEditorCurrentBlockStore:t,currentLoadingContainerStore:o})}else if(I({mainEditorCurrentBlockStore:void 0,currentLoadingContainerStore:void 0}),be({environment:u,publicPageData:e}))return void ye({spaceDomain:e.spaceDomain,environment:u})}else if("nativeTab"===t.name||"quickSearch"===t.name||"chat"===t.name||"aiInferenceTranscript"===t.name||"marketplace"===t.name||"team"===t.name){te().Pg(u),te().LU(u),Se(),te().rM(u),await P().default.waitUntil((()=>P().default.state.initialized));const e="spaceId"in t?t.spaceId:void 0;if((!P().default.state.currentSpaceViewStore||!P().default.state.currentSpaceStore||e&&P().default.state.currentSpaceStore.id!==e)&&P().default.state.currentUserRootStore){var Y;const o=P().default.state.currentUserRootStore.getSpaceViewStores();let n=o[0];if(e){const t=o.find((t=>{var o;return(null===(o=t.getSpaceId())||void 0===o?void 0:o.replaceAll("-",""))===(null==e?void 0:e.replaceAll("-",""))}));n=t||n}else if(C){const e=o.find((e=>{var t,o;return(null===(t=e.getSpaceId())||void 0===t?void 0:t.replaceAll("-",""))===(null===(o=C)||void 0===o?void 0:o.replaceAll("-",""))}));n=e||n}const i=null===(Y=n)||void 0===Y?void 0:Y.getSpaceStore();if(n&&i){var se,le;if(u.device.isMobileNative)a().log({level:"info",from:"appActions",type:"SpaceSwitchingDebug",data:{message:`updateCurrentRoute updating space because it's native tab and current space store id (${null===(se=P().default.state.currentSpaceStore)||void 0===se?void 0:se.id}, spaceView: ${null===(le=P().default.state.currentSpaceViewStore)||void 0===le?void 0:le.id}) doesn't match nextRoute space id`,spaceId:e}});I({currentSpaceStore:i,currentSpaceViewStore:n});const o="chat"===t.name;"nativeTab"===t.name&&t.tab;const r="marketplace"===t.name,s="aiInferenceTranscript"===t.name,l="team"===t.name;if(b&&(o||r||l||s)){const e=i.id;de().h({environment:u,spaceId:e,userId:b}),ae().pt({environment:u,spaceId:e,force:!1}),H().L({environment:u,spaceId:e,force:!1}),$().Wf({environment:u,spaceId:e}),O().OR({environment:u,spaceId:e})}}}("chat"===t.name||"aiInferenceTranscript"===t.name||"nativeTab"===t.name&&"assistant"===t.tab||"marketplace"===t.name||"team"===t.name)&&I({mainEditorCurrentBlockStore:void 0,currentCollectionViewStore:void 0})}if("team"===t.name||"page"===t.name){const{currentSpaceStore:e}=P().default.state,o=(null==e?void 0:e.id)||c;Q().nr({route:t,userId:b,spaceId:o})}if("searchQuery"in t||"searchRequest"in t)if(t.searchQuery)ne().UT({environment:u,analyticsFrom:"query-args"}),L().ZP.setState({...L().ZP.state,query:{...L().ZP.state.query,text:t.searchQuery}});else if(t.searchRequest)try{const e=JSON.parse(t.searchRequest),{text:o,sort:n,filters:i}=e;p&&L().ZP.setState({...L().ZP.state,query:{text:o,sort:n,filters:i}}),N().default.setState({...N().default.state,showDebugInfo:!0,debug:"everything"})}catch(pe){W().RL("Invalid json in searchRequest param"),a().log({level:"error",from:"appActions",type:"JSONParseError",error:{miscDataString:(0,v().t)(pe).message}})}G().Yh(u),(0,f().um)(!1)}const ce=g?g.id:void 0;if("page"===t.name&&ce!==t.collectionViewId){const e=t.collectionViewId;I({currentCollectionViewStore:e?new(F().Xr)(u,{table:c().np,id:e}):void 0})}const ue=(0,_().Qc)(p).query[i().RL];Boolean(ue)&&(B().m.setState(!0),R().Z.setState({open:!0}))}async function ge(e){const{environment:t,store:o}=e,n=await async function(e){const{environment:t,blockId:o}=e,{currentUser:n}=t,i=(0,b().jj)([...n.id?[n.id]:[],...n.loggedInUserIds]);for(const r of i){const e=new(F().G)(t,{table:l().iU,id:o},{userId:r});if(await e.load(),e.isDefined())return n.id===r?void 0:r}}({environment:t,blockId:o.id});n&&await se().f({newCurrentUserId:n,environment:t,store:o})}async function ve(e,t){const o=new(F().U6)(e,{table:u().KJ,id:t},{userId:t}),n=new(F().vO)(e,{table:m().Sr,id:t},{userId:t});n.addListener(he);const i=new(F().r9)(e,{table:p().dx,id:t},{userId:t});Y().registerPushNotifications(e),P().default.setState({...P().default.state,currentUserStore:o,currentUserSettingsStore:n,currentUserRootStore:i,initialized:!1}),await le().w(),P().default.setState({...P().default.state,initialized:!0}),ce().fG(e),q().oG(e)}function he(e){const t=e.getSettingsStore().getKeyStore("preferred_locale").getValue();t||g().Z.set("preferredLocale",t)}function _e(e,t,o,n,i,r,a,s,l,c,d){var u,p;const m=t.getAssociatedCollectionStore(),f=null==m?void 0:m.getLayoutStore();z().PB(e,{query:o,page_id:t.id,is_peek:!1,peek_mode:void 0,type:z().F9(t),collection_id:(null==m?void 0:m.id)??(null===(u=t.getCollectionStore())||void 0===u?void 0:u.id),layout_id:null==f?void 0:f.id,form_id:t.isFormBlock()?t.id:void 0,team_id:null===(p=(0,I().VP)(t))||void 0===p?void 0:p.id,page_visit_id:n.getCurrentPageVisitId(),previous_page_visit_id:i,slug:r,user_has_explicit_access:a,is_trusted_domain_page:s,trusted_domains:l,has_space_view_for_page:c,embedded:d})}function be(e){const{environment:t,publicPageData:o}=e;return!(!(0,C().Sr)(t)||"none"!==o.publicAccessRole||!o.spaceName)}function ye(e){const{spaceDomain:t,environment:o}=e,n=(0,C().Rs)(t);oe().c4({environment:o,url:n,redirect:!0})}function Se(){ue&&ue.close()}},127898:(e,t,o)=>{o.d(t,{D$:()=>k,Ji:()=>T,KE:()=>R,M0:()=>y,TK:()=>B,Tm:()=>D,W$:()=>C,ac:()=>I,cM:()=>S,gA:()=>M,hC:()=>b,mK:()=>U,p9:()=>E,uG:()=>x});o(821057);var n=()=>o(799891),i=()=>o(836273),r=()=>o(282017),a=()=>o(245015),s=()=>o(566232),l=()=>o(326966),c=()=>o(205228),d=()=>o(594546),u=()=>o(926410),p=()=>o(9599),m=()=>o(148882),f=()=>o(491927),g=()=>o(917801),v=()=>o(308186),h=()=>o(231077),_=()=>o(752127);function b(e){var t;const{environment:o,url:i,version:a,versionCreatedTime:s}=e,{AppUpdateStore:l,device:c}=o;c.isElectron&&i.startsWith("https:")?n().log({level:"error",from:"appUpdateActions",type:"installAppJsUpdate",error:{message:"Attempting to refresh app js on desktop for an https url",stack:(new Error).stack},data:{url:i}}):(l.setState({electronUpdate:l.state.electronUpdate,appUpdate:void 0}),a&&k(a,s),y(a)||(o.mobileNative&&o.mobileNative.showSplashscreen(),(0,r().um)(!0),null!==(t=h().electronApi)&&void 0!==t&&t.installAppJsUpdate?h().electronApi.installAppJsUpdate(i):i!==window.location.href?window.location.href=i:window.location.reload()))}function y(e){return(0,s().isEqualVersion)(e,x())}function S(e,t){if(!t)return!1;if("ready"!==t.state)return!1;if(m().transactionQueue.hasTasks())return!1;if(!e.currentUser.isLoggedIn())return!1;if(t.type===s().UpdateType.Silent){if(e.device.isMobileNative)return!1;const t=C(),o=168;if(t&&(Date.now()-t)/l().U6<o)return!1;n().log({level:"info",from:"appUpdateActions",type:"shouldUpdateOnNavigate",data:{lastKnownUpdateTime:t}})}return!0}const w="lastKnownAppJsVersion";function k(e,t){a().Z.set(w,{version:e,time:t})}function I(){const e=a().Z.get(w);if(e&&e.version)return e.version;{const e=(0,s().parseVersion)(c().default.version),t=c().default.lastUpdatedTime;return a().Z.set(w,{version:e,time:t}),e}}function C(){const e=a().Z.get(w);if(e&&e.time)return e.time}function x(){return(0,s().parseVersion)(c().default.version)}function T(){return c().default.lastUpdatedTime}function M(e,t,o){const n=t===s().UpdateType.Major?"major":t===s().UpdateType.Minor?"minor":"patch";(0,d().j)({environment:e,event:{eventName:"client_app_updated",eventProperties:{type:n,intervention:o}}})}const P=336*l().U6,A=672*l().U6;function R(){const e=T();return(C()||Date.now())-e>P}function B(){const e=T();return(C()||Date.now())-e>A}const E=!1,D="electronUpdateReady2";function U(e){const{AppUpdateStore:t,device:o}=e;if(f().By(e),E){const t=(0,u().Us)(i()._j.releases);_().D({environment:e,url:t})}if(o.isElectron&&t.state.electronUpdate&&"ready"===t.state.electronUpdate.state){const e=h().getDesktopVersion();a().Z.set(D,(0,s().formatVersion)(e)),h().installElectronUpdate()}else t.state.appUpdate&&"ready"===t.state.appUpdate.state?(b({environment:e,url:window.location.href,version:t.state.appUpdate.version,versionCreatedTime:t.state.appUpdate.versionCreatedTime}),v().lo(),g().Js({bannerStore:p().Z})):(k((0,s().parseVersion)(c().default.version),c().default.lastUpdatedTime),v().lo(),g().Js({bannerStore:p().Z}))}},917801:(e,t,o)=>{o.d(t,{Bw:()=>r,Js:()=>s,qL:()=>a});o(267602),o(653476),o(470928);var n=()=>o(696459),i=()=>o(475335);function r(e){const{id:t,styleKey:o,contentKey:r,removeTimeout:s,bannerStore:l,blockStore:c,context:d,disabled:u}=e,{banners:p}=l.state;if(!p.find((e=>e.id===t))){let m;switch(r){case"template_in_page":case"template_in_button":m={id:t,contentKey:r,styleKey:o,blockStore:c,context:d,disabled:u};break;case"space_content_duplication":case"deleted_or_moved_page":case"importing_evernote":case"asana_importer_banner":case"site":case"translate":m={id:t,contentKey:r,styleKey:o,blockStore:c};break;case"over_free_block_limit":case"editing_page":case"subscription_trial_add_payment_method":case"upload_limit_exceeded":case"admin_mode":case"subscription_uncollectible":case"billing_subscription_status":case"minor_app_update":case"mobile_platform_unsupported":case"page_in_archived_team":case"test_clock":case"dictation_connection":case"trusted_domain_page":case"russian_sanctions":case"space_freeze":case"logged_out_app_banner":m={id:t,contentKey:r,styleKey:o};break;default:(0,n().t1)(r)}const f=e.prepend?[m,...p]:[...p,m];l.setState({banners:f}),i().default.setKeyboardMode(!1),s&&setTimeout((()=>{a({bannerStore:l,id:t})}),s)}}function a(e){const{id:t,bannerStore:o}=e,{banners:n}=o.state,i=n.filter((e=>e.id!==t));i.length!==n.length&&o.setState({banners:i})}function s(e){e.bannerStore.state.banners.length>0&&e.bannerStore.setState({banners:[]})}},799454:(e,t,o)=>{o.d(t,{Ib:()=>A,LZ:()=>R,Xv:()=>B});o(267602),o(653476),o(470928),o(241792);var n=()=>o(492788),i=()=>o(542973),r=()=>o(81954),a=()=>o(513670),s=()=>o(839002),l=()=>o(40302),c=()=>o(252100),d=()=>o(8208),u=()=>o(958783),p=()=>o(718959),m=()=>o(270315),f=()=>o(852465),g=()=>o(275200),v=()=>o(70191),h=()=>o(983993),_=()=>o(472753),b=()=>o(244826),y=()=>o(793935),S=()=>o(589525),w=()=>o(590972),k=()=>o(687647),I=()=>o(908102),C=()=>o(826955),x=()=>o(248825),T=()=>o(879952),M=()=>o(990966);function P(e,t){const o=b().Z.find((e=>e.getStore().id===t));o&&(T().ZH({preventDismissMobileKeyboard:!0,environment:e}),M().setSelectionAtEnd({store:o.getInputStore().state.textStore}))}async function A(e){var t,g,b;const{environment:A,blockStore:R,analyticsFrom:B,discussionIds:D,shouldFocusDiscussion:U,recursivelyLoadAllDiscussions:F,property_id:N,openFullPropertyDiscussionOnly:V,intl:L}=e;let O=(null==D?void 0:D.map((e=>C().t1.createChildStore(R,{table:i().qF,id:e,spaceId:(0,r().J)(R.pointer.spaceId)}))))||f().al(R,{recursivelyLoadAllDiscussions:F,onlyIncludePropertyDiscussions:Boolean(N)});N&&(O=O.filter((e=>e.getPropertyId()===N)),V&&L&&(O=O.filter((e=>(0,m().tH)(e,L,R,N)))));let{rect:Z}=e;const{resolved:j,unresolved:K}=f().bB(O),{commentsDependency:z}=await Promise.resolve().then(o.bind(o,874018)),{discussionHelpers:H}=await z.load(),q=H.sortDiscussionStoresByLatestComment(K.length>0?K:j)||[],W=null==q||null===(t=q[0])||void 0===t?void 0:t.id,G=null==q||null===(g=q[0])||void 0===g?void 0:g.getPropertyId(),{device:$}=A;$.isMobile&&"updates_sidebar"!==B&&(T().ZH({environment:A}),$.isIOS&&M().blurActiveElement()),I().Z.markDiscussionsInteractedWith(q.map((e=>e.id))),await n().default.afterNextFlush();const Q=(0,S().vK)(A);if(R.id===(0,p().zj)()&&void 0===G){if(W){"PageDetailsStore"in A&&A.PageDetailsStore.setToggleState({type:"discussion",id:R.id,environment:A},!0);const e=C().t1.createChildStore(R,{table:i().qF,id:W,spaceId:(0,r().J)(R.pointer.spaceId)});if((Q||!Q&&U)&&E(W),e.getResolved())if((0,S().vK)(A))y().setUpdateSidebarCommentsMode("resolved");else if((0,S().Sx)(A))y().setUpdateSidebarTab(w().gY.Comments),y().setUpdateSidebarCommentsMode("resolved");else{const e=_().R.findBlockFromStoreWithMethod(R,"openResolvedDiscussionPopup");e&&(e.openResolvedDiscussionPopup(),await n().default.afterNextFlush(),E(W))}x().ZW(A,{from:B,discussion_id:e.id,discussion_type:e.getType()})}if(!Q)return}if(!Z&&!Q&&"margin_comments"!==B){const e=N?h().Z.getRect(R,N):_().R.getRect(R);if(!e)return;const t=e.width,o=e.height,n=e.right-t;Z=new DOMRect(n,e.top,t,o)}let Y,J=k().u.Open;if(W){var X;Y=C().t1.createChildStore(R,{table:i().qF,id:W,spaceId:(0,r().J)(R.pointer.spaceId)}),Y.getResolved()&&(J=k().u.Resolved);const e=Boolean(R.isCollectionView()),t=null===(X=R.getAssociatedCollectionStore())||void 0===X?void 0:X.getLayoutStore(),o=Boolean(N&&t&&(0,v().Uo)({layoutStore:t,propertyId:N}).isPropertyInPageDetails);!(0,S().Sx)(A)||w().default.state.currentTab!==w().gY.Comments||Y.getResolved()||e||o||y().setUpdateSidebarCommentsMode("unresolved")}else J=k().u.Resolved;if($.isMobile&&"updates_sidebar"!==B&&(T().ZH({environment:A}),$.isIOS&&M().blurActiveElement()),k().Z.setState({open:!0,rect:Z,tab:J,blockStore:R,discussionIds:O.map((e=>e.id)),recursivelyLoadAllDiscussions:F,property_id:N}),x().ZW(A,{from:B,discussion_id:W,discussion_type:null===(b=Y)||void 0===b?void 0:b.getType()}),!U)return;const ee=u().default.getDiscussionInputStore();if(d().Z.state.overlapsExistingDiscussionMenu&&ee){if(await s().Vs(10),await n().default.afterNextFlush(),(0,c().m)({animate:!1}),A.device.isMobile)return;(0,l().l)({discussionInputStore:ee,environment:A})}else if(W){if(await s().Vs(10),await n().default.afterNextFlush(),E(W),A.device.isMobile)return;(function(e){var t;const{blockStore:o,discussionIds:n}=e;return k().Z.state.open&&k().Z.state.blockStore.id===o.id&&a().Xy(null===(t=k().Z.state)||void 0===t?void 0:t.discussionIds,n)})(e)||P(A,W)}else{if(A.device.isMobile)return;K.length>0&&(await s().Vs(10),await n().default.afterNextFlush(),P(A,K[0].id))}}function R(){const e=k().Z.state;!u().default.hasContent()&&e.open&&u().default.getBlockStore()===e.blockStore&&d().Z.state.overlapsExistingDiscussionMenu&&(u().default.reset(),d().Z.reset()),e.open&&k().Z.setState({open:!1,rect:e.rect})}function B(){const e=k().Z.state;if(e.open&&e.tab===k().u.Open){0===f().vV(e.blockStore,{recursivelyLoadAllDiscussions:!1}).length&&R()}}function E(e){const t=b().Z.find((t=>t.getStore().id===e&&!t.isSidebarFormat()&&!t.isMarginFormat()));if(t){const e=t.getNode();if(e&&e.parentElement){const t=Array.from(e.parentElement.children).indexOf(e);g().Wr(e,{edgeDist:0===t?0:-1,animate:!1})}}}},242619:(e,t,o)=>{o.d(t,{$Z:()=>p,Qn:()=>u,xv:()=>m});var n=()=>o(861026),i=()=>o(32969),r=()=>o(589525),a=()=>o(340819),s=()=>o(72041),l=()=>o(890324),c=()=>o(797522),d=()=>o(465755);function u(e){var t;const{environment:o,left:n,top:i,actionSectionGroupKey:r,showInput:c,stores:d,analyticsFrom:u,optionalAnalyticsProperties:p,pageAnnotationToken:m}=e,g=new DOMRect(n,i,1,1);a().Z.setState({isActive:!0,inputValue:"",actionSectionGroupKey:r,stores:d,frameScrollTop:(null===(t=s().Z.state.elementRef.current)||void 0===t?void 0:t.scrollTop)??0,originBlockRect:g,showInput:c,analyticsFrom:u,publicEditMode:d[0]?l().Z.getMode(o,d[0]):void 0,collectionContextStore:null==p?void 0:p.collectionContextStore,clickedPageAnnotation:m}),f(o,{from:u,block_type:d[0]&&d[0].getType(),optionalAnalyticsProperties:p})}function p(e){const{environment:t,analyticsFrom:o,actionSectionGroupKey:n,stores:r,showInput:d}=e,u=i().C.findSelectableFromStore(r[0]);if(!u)return;const p=c().default.state.selectableRectMap.get(u);var m;p&&a().Z.setState({isActive:!0,inputValue:"",actionSectionGroupKey:n,stores:r,frameScrollTop:(null===(m=s().Z.state.elementRef.current)||void 0===m?void 0:m.scrollTop)??0,originBlockRect:p,showInput:void 0===d||d,analyticsFrom:o,publicEditMode:r[0]?l().Z.getMode(t,r[0]):void 0});t&&f(t,{from:o,block_type:r[0]&&r[0].getType()})}function m(){a().Z.setState({isActive:!1})}function f(e,t){const{optionalAnalyticsProperties:o,...i}=t,{teamStore:a,collectionContextStore:s,...l}=t.optionalAnalyticsProperties||{},c=(0,n().Pn)(s)||{};d().YP(e,"open_block_menu",{store:a,...(0,r().UF)({environment:e}),...c,...i,...l})}},332079:(e,t,o)=>{o.d(t,{Dq:()=>F,H8:()=>N,QS:()=>P,RH:()=>E,_x:()=>A,kE:()=>T,ry:()=>V,wK:()=>D,xv:()=>R});o(821057),o(492176),o(7961),o(267602),o(916054),o(241792),o(228244);var n=()=>o(506347),i=()=>o(156642),r=()=>o(135857),a=()=>o(827370),s=()=>o(396136),l=()=>o(955620),c=()=>o(513670),d=()=>o(696459),u=()=>o(205228),p=()=>o(594546),m=()=>o(718959),f=()=>o(339523),g=()=>o(32969),v=()=>o(524434),h=()=>o(482970),_=()=>o(279386),b=()=>o(826955),y=()=>o(439373),S=()=>o(332542),w=()=>o(636340),k=()=>o(453999),I=()=>o(879952),C=()=>o(970105),x=()=>o(269299);function T(e){const{environment:t,blocks:o,copiedStores:n,pageSource:i}=e,r=c().Z$(o);if(!r)return;const a=g().C.getRectFromStore(r);a&&(h().Z.setState({open:!0,type:"blocks",blocks:o,rect:a,copiedStores:n,pageSource:i}),(0,p().j)({environment:t,event:{eventName:"block_paste_menu_opened",eventProperties:{type:"blocks"}}}))}const M=250;function P(e){if(!v().KR.areAiActionsOnPasteEnabled())return!1;const{blocks:t,environment:o}=e;if(!t.some((e=>e.isAiFollowupEligibleBlock())))return!1;if((0,f().jn)(t,!0).length<M)return!1;const n=t.at(0);if(!n)return!1;const i=g().C.getRectFromStore(n);return!!i&&(h().Z.setState({open:!0,type:"ai_actions",blocks:t,rect:i}),(0,p().j)({environment:o,event:{eventName:"block_paste_menu_opened",eventProperties:{type:"ai_actions"}}}),!0)}function A(e){const{environment:t,blocks:o,copiedLinks:n,rootStore:i}=e;if(o.length!==n.length)return!1;if(!o.every(B))return!1;if(n.some((e=>e.blockId===i.id)))return!1;const r=c().Z$(o);if(!r)return!1;const a=g().C.getRectFromStore(r);return!!a&&(h().Z.setState({open:!0,type:"links",blocks:o,rect:a,copiedLinks:n}),(0,p().j)({environment:t,event:{eventName:"block_paste_menu_opened",eventProperties:{type:"links"}}}),!0)}function R(e){h().Z.state.open&&(0,p().j)({environment:e,event:{eventName:"block_paste_menu_closed",eventProperties:{type:h().Z.state.type}}}),h().Z.setState({open:!1})}function B(e){return!(e.isType(i().Ti.copyIndicator)||e.isTransclusionType()||e.isInsideCollection())}function E(e){const{blocks:t,pageSource:o,wasContiguousSelection:n,action:r,rootStore:s,copiedStores:l}=e,c=_().MT.getMode(t[0]);return"copy"===r&&n&&!(0,a().qo)(o,s.pointer)&&(D(e)||N({currentSpaceId:s.getSpaceId(),...e}))&&t.every(B)&&!l.every((e=>e.getType()===i().Ti.externalObjectInstance))&&"suggest"!==c}function D(e){const{blocks:t}=e;return 1===t.length}function U(e){const{transaction:t,blockUrl:o,spaceId:n,environment:r}=e,a=w().j4({environment:r,type:i().Ti.text,inMemoryRecordCache:r.defaultRecordCache.inMemoryRecordCache,transaction:t,spaceId:n}),s=[(0,l().V3y)(o,[(0,l().edl)(o)])];return C().sO({environment:r,store:a.getBlockTitleStore(),value:s,transaction:t}),a}async function F(e){const{environment:t,blocks:o,source:i}=e,a=c().Ps(o);if(!a)return;const l=a.getParentBlockStore();if(!l)return;const p=a.getContentStore();let m;await x().createAndCommitAsync({environment:t,userAction:"blockPasteMenuActions.acceptLinkToPage",waitForServerCommit:!0,perform:async e=>{if("blocks"===i.type){const{copiedStores:o,pageSource:c}=i,d=a,f=o[0];if(!d||!f)return;const g=b().G.createChildStore(p,{table:s().iU,id:f.id});if(g.isNavigableBlock())await g.load(),m=[y().k({environment:t,parentBlockStore:l,targetStore:g,transaction:e})];else{const o=(0,r().Z)({pageId:c.id,scrollToBlockId:g.id,baseUrl:u().default.domainBaseUrl,pageVisitSource:n().tY.LinkInPage});m=[U({blockUrl:o,spaceId:a.getSpaceId(),environment:t,transaction:e})]}}else if("links"===i.type){const{copiedLinks:d}=i;if(d.length!==o.length)return;m=(0,c().oA)(await Promise.all(d.map((async o=>{const i=o.scrollToBlockId||o.peekViewBlockId||o.blockId;if(i){const c=b().G.createChildStore(p,{table:s().iU,id:i});if(await c.load(),c.isNavigableBlock())return y().k({environment:t,parentBlockStore:l,targetStore:c,transaction:e});{const i=o.peekViewBlockId||o.blockId;if(i){const o=b().G.createChildStore(p,{table:s().iU,id:i});await o.load();return U({blockUrl:(0,r().Z)({pageId:i,pageModel:o.getModel(),scrollToBlockId:c.id,baseUrl:u().default.domainBaseUrl,pageVisitSource:n().tY.LinkInPage}),spaceId:a.getSpaceId(),environment:t,transaction:e})}}}}))))}else(0,d().t1)(i);const f=k().BM({environment:t,blocksToInsert:m,target:o,replaceEmptyTextBlock:!0,transaction:e});k().Cl({environment:t,blocks:o,transaction:e}),I().Z5({environment:t,stores:f}),R(t)}})}function N(e){const{currentSpaceId:t,blocks:o,copiedStores:n}=e;return o.length>0&&!n.some((e=>e.isInsideCollection()))&&n.every((e=>e.canEdit()))&&n.every((e=>e.getSpaceId()===t))}async function V(e){const{environment:t,blocks:o,copiedBlockIds:n}=e,r=await Promise.all(n.map((async e=>{const t=b().G.createChildStore(o[0],{table:s().iU,id:e});await t.load();const n=t.getParentBlockStore();if(!n)throw new Error("Block has no parent.");await n.load();const i=n.getContentStore();return{store:b().G.createChildStore(i,{table:s().iU,id:e}),parentStore:n,parentContentStore:i}}))),a=r[0];if(!a)return;const l=(0,m().RM)();if(!l)return;const{serverCommitResult:c}=x().createAndCommit({userAction:"blockPasteMenuActions.acceptCreateTransclusion",environment:t,canUndo:!0,perform:e=>{let n;if(a.store.getType()===i().Ti.transclusionContainer)n=a.store;else if(a.store.getType()===i().Ti.transclusionReference){const e=a.store.getTransclusionReferenceTargetStore();if(!e)throw new Error("Could not find target");n=e}else if(a.parentStore.getType()===i().Ti.transclusionContainer)n=a.parentStore;else{n=w().j4({environment:t,type:i().Ti.transclusionContainer,inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,transaction:e,spaceId:a.store.pointer.spaceId});const o=n.getContentStore();S().rS({parentStore:a.parentContentStore,oldChildStore:a.store,newChildStore:n,transaction:e});for(const{store:t}of r)S().jG({parentStore:o,childStore:t,transaction:e})}const s=w().j4({environment:t,type:i().Ti.transclusionReference,format:{transclusion_reference_pointer:n.pointer},inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,transaction:e,spaceId:0!==o.length?o[o.length-1].pointer.spaceId:l.pointer.spaceId}),c=k().BM({environment:t,blocksToInsert:[s],target:o,transaction:e,replaceEmptyTextBlock:!0});k().Cl({environment:t,blocks:o,transaction:e}),I().Z5({environment:t,stores:c}),R(t)}});await c}},909240:(e,t,o)=>{o.d(t,{$o:()=>h,RX:()=>_,bA:()=>f,fG:()=>S,gT:()=>b,i2:()=>y,vO:()=>v,xv:()=>g});var n=o(973935),i=()=>o(492788),r=()=>o(226413),a=()=>o(532850),s=()=>o(955620),l=()=>o(983993),c=()=>o(844085),d=()=>o(879952),u=()=>o(970105),p=()=>o(990966),m=()=>o(269299);function f(e){const{environment:t,blockPropertyValueOverlayStore:o,store:a,additionalStores:f=[],property:g,format:v,preventClearSelection:h,insertChar:_,uploadFiles:b,disableHorizontalEdgeScroll:y,isNewBlock:S,collectionContextStore:w,collectionSchema:k,mode:I,collectionsBulkActionsToolbarStore:C,readOnly:x,sizing:T,formQuestionStore:M,onClose:P}=e;let A=(null==w?void 0:w.normalizedSchemaStore.state)??a.getSchema();k&&(A=k);const R=A[g],B=l().Z.findBlockPropertyValue(a,g,v);let E=e.rect;const D=null==B?void 0:B.getNode();if(D&&(c().bx({element:D,vertical:{reveal:"closest"},horizontal:y?void 0:{reveal:"closest"},scrollerContext:null==B?void 0:B.getScrollerContext()}),!E)){const e=n.findDOMNode(D);e instanceof Element&&(E=e.getBoundingClientRect())}if(!E)return;const U=a.clone();if(o.setState({isOpen:!0,store:a,clonedStore:U,additionalStores:f,property:g,format:v,rect:E,preventClearSelection:h,insertChar:_,uploadFiles:b,isNewBlock:S,collectionContextStore:w,collectionSchema:k,mode:I,collectionsBulkActionsToolbarStore:C,readOnly:x,sizing:T,formQuestionStore:M,onClose:P}),!C||"title"!==(null==R?void 0:R.type)&&"text"!==(null==R?void 0:R.type)||null==C||C.setState({textStoresBeingEdited:[...f,a]}),R&&r().Yl(R.type)){h||d().ZH({environment:t});const e=U.getPropertyStore(g);_&&m().createAndCommit({userAction:"blockPropertyValueOverlayActions.open",environment:t,canUndo:!0,perform:o=>{u().sO({environment:t,store:e,value:s().TPx(_),transaction:o})}}),i().default.afterNextFlush((()=>{i().default.afterNextFlush((()=>{i().default.afterNextFlush((()=>{p().setSelectionAtEnd({store:e})}))}))}))}else h||d().ZH({environment:t}),p().clear({preventDismissMobileKeyboard:h,environment:t})}function g(e){const{environment:t,blockPropertyValueOverlayStore:o}=e,n=o.state;var i;n.isOpen&&(n.preventClearSelection||d().ZH({environment:t}),n.onClose&&n.onClose(),o.reset(),null===(i=n.collectionsBulkActionsToolbarStore)||void 0===i||i.setState({textStoresBeingEdited:[]}))}function v(e){const{stores:t,property:o,transaction:n}=e,i=t[0].getPropertyStore(o),r=(0,a().Ml)(i.getValue());for(const s of t)u().sO({environment:s.environment,store:s.getPropertyStore(o),value:(0,a()._I)(!r),transaction:n})}function h(e){const{blockPropertyValueOverlayStore:t}=e,o=t.state;if(o.isOpen){const{store:t,property:r}=o,a=l().Z.findBlockPropertyValue(t,r);var n,i;if(null!=a&&a.props.onTab)null==a||null===(n=(i=a.props).onTab)||void 0===n||n.call(i);else g(e)}}function _(e){const{blockPropertyValueOverlayStore:t}=e,o=t.state;if(o.isOpen){const{store:t,property:r}=o,a=l().Z.findBlockPropertyValue(t,r);var n,i;if(null!=a&&a.props.onUntab)null==a||null===(n=(i=a.props).onUntab)||void 0===n||n.call(i);else g(e)}}function b(e){const{blockPropertyValueOverlayStore:t}=e,o=t.state;if(o.isOpen){const{store:t,property:r}=o,a=l().Z.findBlockPropertyValue(t,r);var n,i;if(null!=a&&a.props.onEnter)null==a||null===(n=(i=a.props).onEnter)||void 0===n||n.call(i);else g(e)}}function y(e){const{blockPropertyValueOverlayStore:t}=e,o=t.state;if(o.isOpen){const{store:t,property:r}=o,a=l().Z.findBlockPropertyValue(t,r);var n,i;if(null!=a&&a.props.onEsc)null==a||null===(n=(i=a.props).onEsc)||void 0===n||n.call(i);else g(e)}}function S(e){const{blockPropertyValueOverlayStore:t}=e,o=t.state;if(o.isOpen){const{store:t,property:r}=o,a=l().Z.findBlockPropertyValue(t,r);var n,i;if(null!=a&&a.props.onBgClick)null==a||null===(n=(i=a.props).onBgClick)||void 0===n||n.call(i);else g(e)}}},551771:(e,t,o)=>{o.d(t,{$$:()=>v,Ke:()=>f,e1:()=>g});o(398858),o(461318),o(33228);var n=()=>o(156642),i=()=>o(741633),r=()=>o(81954),a=()=>o(955620),s=()=>o(839002),l=()=>o(282662),c=()=>o(876822),d=()=>o(824462),u=()=>o(636340),p=()=>o(970105),m=()=>o(269299);async function f(e){const{store:t,url:o,environment:l,teamId:f}=e,g=void 0!==e.transformTimeout?e.transformTimeout:3e3,{serverCommitResult:v}=m().createAndCommit({userAction:"bookmarkBlockActions.createBookmark",environment:l,canUndo:!0,perform:e=>{u().sW({store:t.getPropertiesStore(),data:{link:a().TPx(o)},transaction:e}),p().sO({environment:l,store:t.getBlockTitleStore(),value:a().TPx(o),transaction:e})}}),{winner:h,rest:_}=await s().S3([v,s().Vs(g)]);if(1===h&&(await async function(e,t){const{serverCommitResult:o}=m().createAndCommit({userAction:"bookmarkBlockActions.transformIntoBookmark",environment:e,canUndo:!0,perform:e=>{u().sW({store:t,data:{type:n().Ti.bookmark},transaction:e})}});await o}(l,t),await _),f){const{currentSpaceStore:e}=c().default.state;await d().callApi({eventName:"setBookmarkMetadata",environment:l,data:{type:"team-invite-bookmark",block:{id:t.id,spaceId:(0,r().J)(t.pointer.spaceId)},url:o,teamId:f,spaceId:e&&e.id},headers:(0,i().Bb)({spaceId:(0,r().J)(t.pointer.spaceId)})})}else await d().callApi({eventName:"setBookmarkMetadata",environment:l,data:{type:"external-bookmark",block:{id:t.id,spaceId:(0,r().J)(t.pointer.spaceId)},url:o},headers:(0,i().Bb)({spaceId:(0,r().J)(t.pointer.spaceId)})})}function g(e){var t;const{transaction:o,blockStore:n,parentBlockStore:i,token:r}=e,{tokenIndex:a}=r;if(!n.isDefined())return;const s=null===(t=i.getParentBlockStore())||void 0===t?void 0:t.getContentStore();if(!s)return;p().gy({block:i,editorMode:"default",transaction:o,tokenIndex:a})&&l().BE({parentStore:s,insertStore:n,afterStore:i,transaction:o})}async function v(e){const{environment:t,blocks:o}=e,i=o[0],r=i.getPropertyValue("link");if(!r)return;const s=r[0][0];await(async e=>{var o,n;return await d().callApi({eventName:"getDataForLinkMention",environment:t,data:{url:e,spaceId:(null===(o=c().default.state.currentSpaceStore)||void 0===o?void 0:o.id)??(null===(n=c().default.state.mainEditorCurrentBlockStore)||void 0===n?void 0:n.getSpaceId()),source:"bookmark_to_link_mention"}})})(s).then((e=>{m().createAndCommit({userAction:"bookmarkBlockActions.transformBookmarkToLinkMention",environment:t,canUndo:!0,perform:o=>{if("success"===e.type){const l=e.data;if("error"in l){const e=a().YCD(a().Wy3({href:s,title:s.includes("mailto:")?s:new URL(s).hostname}));u().sW({store:i,data:{type:n().Ti.text},transaction:o}),p().sO({environment:i.environment,store:i.getBlockTitleStore(),value:[e],transaction:o})}else{var r;const{title:e,description:c,author_name:d,provider_name:m,images:f,favicon_url:g,iframe:v,height:h,padding:_,padding_top:b}=l,y=a().YCD(a().Wy3({href:s,title:e||(m||new URL(s).hostname),description:c,link_author:d,link_provider:m,thumbnail_url:f&&f.length>0?null===(r=f[0])||void 0===r?void 0:r.url:void 0,icon_url:g,iframe_url:v,height:h,padding:_,padding_top:b}));u().sW({store:i,data:{type:n().Ti.text},transaction:o}),p().sO({environment:t,store:i.getBlockTitleStore(),value:[y],transaction:o})}}else{const e=a().YCD(a().Wy3({href:s,title:s.includes("mailto:")?s:new URL(s).hostname}));u().sW({store:i,data:{type:n().Ti.text},transaction:o}),p().sO({environment:t,store:i.getBlockTitleStore(),value:[e],transaction:o})}u().sW({store:i,data:{type:n().Ti.text},transaction:o})}})}))}},722920:(e,t,o)=>{o.d(t,{Q:()=>s});var n=()=>o(594546),i=()=>o(718959),r=()=>o(876822),a=()=>o(824462);async function s(e){let{environment:t,collectionContextStore:o,collectionViewId:s,from:l}=e;const c=r().default.state.currentSpaceStore;if(!c||!s)return;const d=new Map(o.updateFreeChartsResultStore.state);d.set(s,{isPending:!0,value:void 0}),o.updateFreeChartsResultStore.setState(d);const u=(0,i().zj)(),p=await(0,n().cG)(t),m={spaceId:c.id,collectionViewId:s,from:l,pageId:u,deviceId:p},f=await a().callApi({eventName:"updateFreeCharts",environment:t,data:m});if("success"===f.type){const e=new Map(o.updateFreeChartsResultStore.state);e.set(s,{isPending:!1,value:f.data.can_view_chart}),o.updateFreeChartsResultStore.setState(e)}else{const e=new Map(o.updateFreeChartsResultStore.state);e.set(s,{isPending:!1,value:void 0}),o.updateFreeChartsResultStore.setState(e)}return f}},959137:(e,t,o)=>{o.d(t,{F:()=>n});const n={clipboardActions:new(o(677559).Ss)("clipboardActions",(async()=>await Promise.all([o.e(94556),o.e(78701),o.e(38804),o.e(27856),o.e(92341),o.e(22785),o.e(81480)]).then(o.bind(o,950874))))}},33150:(e,t,o)=>{o.d(t,{XQ:()=>u,Cn:()=>p,pZ:()=>d,E5:()=>c});const n={TypeScript:async()=>({plugins:[(await o.e(90119).then(o.t.bind(o,728182,23))).default],parser:"babel"}),JavaScript:async()=>({plugins:[(await o.e(90119).then(o.t.bind(o,728182,23))).default],parser:"babel"}),GraphQL:async()=>({plugins:[(await o.e(80214).then(o.t.bind(o,780214,23))).default],parser:"graphql"}),HTML:async()=>({plugins:[(await o.e(72237).then(o.t.bind(o,272237,23))).default],parser:"html"}),CSS:async()=>({plugins:[(await o.e(45657).then(o.t.bind(o,945657,23))).default],parser:"css"}),Scss:async()=>({plugins:[(await o.e(45657).then(o.t.bind(o,945657,23))).default],parser:"scss"}),JSON:async()=>({plugins:[(await o.e(90119).then(o.t.bind(o,728182,23))).default],parser:"json"}),XML:async()=>({plugins:[await Promise.all([o.e(94556),o.e(39236),o.e(84219)]).then(o.t.bind(o,784219,23))],parser:"xml",prettierOptionsOverride:{xmlWhitespaceSensitivity:"ignore"}}),Rust:async()=>({plugins:[await Promise.all([o.e(39236),o.e(73411)]).then(o.bind(o,173411))],parser:"jinx-rust"})};var i=()=>o(955620),r=()=>o(421654),a=()=>o(636340),s=()=>o(970105),l=()=>o(269299);function c(e){const{blocks:t,language:o,transaction:n}=e,r=i().TPx(o);for(const i of t)a().sW({store:i.getPropertiesStore(),data:{language:r},transaction:n})}function d(e){const{environment:t,blocks:o,previewFormat:n}=e;l().createAndCommit({userAction:"codeBlockActions.setPersistedCodePreviewFormat",environment:t,canUndo:!0,perform:e=>{r().FH({stores:o,update:{code_preview_format:n},transaction:e})}})}async function u(e){const{codeSnippet:t,language:i}=e,r=n[i];if(!r)return;const{parser:a,plugins:s,prettierOptionsOverride:l}=await r();let c="";try{c=(await o.e(73945).then(o.t.bind(o,673945,23))).format(t,{parser:a,plugins:s,...l})}finally{if(!c||c===t)return}return c=function(e){const t=e.split("\n");t.length>0&&""===t[t.length-1].trim()&&t.pop();return t.join("\n")}(c),c}async function p(e){const{codeBlockStore:t,environment:o}=e,{title:n,language:r}=t.getProperties(),a=i().QaF(n);if(!a||0===a.length)return;const c=i().QaF(r),d=await u({codeSnippet:a,language:c});if(!d)return;const p=i().TPx(d);l().createAndCommit({userAction:"codeBlockActions.formatCode",environment:o,canUndo:!0,perform:e=>{s().sO({environment:t.environment,store:t.getBlockTitleStore(),value:p,transaction:e})}})}},628191:(e,t,o)=>{o.d(t,{K:()=>a});var n=()=>o(799891),i=()=>o(752778),r=()=>o(824462);async function a(e){const{environment:t,collectionStore:o}=e,a={id:o.id,table:i().vF,spaceId:o.getSpaceId()},s=await r().callApi({eventName:"suggestRecordKey",environment:t,data:{...a,shouldSetSuccessfullySuggestedRecord:!0}});if("success"===s.type)return s.data.key;n().log({level:"error",from:"collectionAutoIncrementIdActions.suggestRecordKeyResponse",type:"JSONParseError",error:{miscDataString:s.error.message}})}},931756:(e,t,o)=>{o.d(t,{mO:()=>I,Ys:()=>C,k7:()=>x,ul:()=>A,iU:()=>T,_7:()=>R,RD:()=>P,_x:()=>M});o(267602),o(653476),o(470928),o(241792),o(667294);var n=()=>o(492788),i=()=>o(455947),r=()=>o(608352),a=()=>o(513670),s=()=>o(696459),l=()=>o(102182),c=()=>o(932753),d=()=>o(219727),u=()=>o(788860),p=()=>o(207874),m=()=>o(312446),f=o(785893);function g(){return(0,f.jsx)(u()._H,{defaultMessage:"Changes saved for everyone.",id:"database.filterBar.saved.title"})}function v(e){const{collectionContextStore:t,temporaryState:o}=e,n=(0,d().O7)();return(0,f.jsx)(m().Pn,{onClick:()=>{p().Yw(n,!0),l().rN(),T({environment:n,collectionContextStore:t,temporaryState:o})},children:(0,f.jsx)(u()._H,{defaultMessage:"Undo",id:"database.filterBar.undo.title"})})}var h=()=>o(576868),_=()=>o(239482),b=()=>o(876822),y=()=>o(722920),S=()=>o(139224),w=()=>o(269299),k=()=>o(348141);let I=function(e){return e[e.All=0]="All",e[e.Filters=1]="Filters",e[e.Sorts=2]="Sorts",e}({});function C(e){const{environment:t,collectionContextStore:o,targetCollectionViewStore:n,preventSnackbarNotification:i,type:r,transaction:a}=e,s=o.temporaryStateStore.state,d=o.currentPropertyFiltersStore.state,u=n.getPropertyFiltersStore(),p=(0,h().Zh)(o,"persisted");if(r===I.All||r===I.Filters){p.combinatorFilter&&c().Es({collectionViewStore:n,update:{filter:p.combinatorFilter.value||null},transaction:a});for(const e of p.filters.removed)w().applyOperation({store:u,operation:{pointer:u.pointer,command:"keyedObjectListRemove",path:u.path,args:{remove:{id:e}}},transaction:a});for(const{id:e,beforeId:t}of p.filters.moveOps){const o=d.find((t=>t.id===e));o&&(t?w().applyOperation({store:u,operation:{pointer:u.pointer,command:"keyedObjectListBefore",path:u.path,args:{before:{id:t},value:o}},transaction:a}):w().applyOperation({store:u,operation:{pointer:u.pointer,command:"keyedObjectListAfter",path:u.path,args:{value:o}},transaction:a}))}for(const e of p.filters.updated){const t=d.find((t=>t.id===e));t&&w().applyOperation({store:u,operation:{pointer:u.pointer,command:"keyedObjectListUpdate",path:u.path,args:{value:t}},transaction:a})}}r!==I.All&&r!==I.Sorts||!p.sorts||c().Es({collectionViewStore:n,update:{sort:p.sorts.value||null},transaction:a}),M({environment:t,collectionContextStore:o,temporaryState:r===I.All?void 0:r===I.Filters?{...s,combinatorFilter:void 0,propertyFilters:void 0}:{...s,sorts:void 0}}),i||l().oV({label:(0,f.jsx)(g,{}),right:(0,f.jsx)(v,{collectionContextStore:o,temporaryState:s})})}function x(e){const{environment:t,intl:o,collectionContextStore:i,transaction:r}=e,a=i.collectionViewStore(),s=i.isFullScreenStore.state,l=i.isRootChildStore.state,d=i.isInPeekRendererStore.state;if(!a)return;const u=i.collectionViewBlockStore(),p=c().tG({environment:t,collectionViewBlockStore:u,collectionViewStore:a,intl:o,transaction:r});p&&(C({environment:t,type:I.All,collectionContextStore:i,targetCollectionViewStore:p,transaction:r}),p&&("chart"===p.getType()&&y().Q({environment:t,collectionContextStore:i,collectionViewId:p.id,from:"filter_save_as_new_view"}),c().f8({environment:t,collectionContextStore:i,collectionViewId:p.id,isFullScreen:s,isRootChild:l,isInPeekRenderer:d}),n().default.afterNextFlush((()=>{S().r$({collectionContextStore:i,collectionSettingsStore:i.settingsStore,selectViewNameInitial:!0})}))))}function T(e){M(e),function(e){const{environment:t,collectionContextStore:o}=e,n=o.collectionViewStore(),i=o.collectionViewBlockStore();if(!n||!i)return;(o.isUnlistedViewStore.state&&o.isInlineViewStore.state||(0,_().RC)({environment:t,store:i})&&o.permissionScopesStore.state.canConfigureBlock)&&w().createAndCommit({userAction:"collectionFilterActions.applyTemporaryStateIfPrivate",environment:t,canUndo:!0,perform:e=>{C({environment:t,collectionContextStore:o,type:I.All,targetCollectionViewStore:n,preventSnackbarNotification:!0,transaction:e})}})}(e)}function M(e){const{environment:t,collectionContextStore:o,temporaryState:n}=e,i=o.collectionViewStore();if(!i)return;const r=t.currentUser.id;o.temporaryStateStore.setState(n||{}),c().bu({currentUserId:r,collectionViewId:i.id,viewsModuleCurrentPageId:o.viewsModuleContextStore.isInLayoutBuilder()?void 0:o.viewsModuleContextStore.currentPageInRelatedCollectionId(),temporaryState:n}),o.groupsStore.resetAllLimits()}function P(e){const{environment:t,seen:o}=e,{currentUserSettingsStore:n}=b().default.state;n&&w().createAndCommit({userAction:"collectionFilterActions.setSeenFiltersIntroTooltip",environment:t,canUndo:!0,perform:e=>{k().d2({userSettingsStore:n,transaction:e,data:{seen_filters_tooltip:o}})}})}function A(e){var t;let{transaction:o,newGroups:n,collectionContextStore:l,environment:c}=e;const d=l.collectionViewStore(),u=l.currentCombinatorFilterStore.state,p=(0,a().Xh)(u),m=null==p||null===(t=p.filters)||void 0===t?void 0:t.find(i().s9),f=(0,h().yU)(l);if(!(d&&p&&p.filters&&m))return;const g=m.filter.value.filter((e=>"exact"===e.type)).map((e=>e.value)).filter(s().$K),v=n.map((e=>e.value)).filter(r().tL).map((e=>e.value)).filter(r().RA).map((e=>e.id)),_=(0,a().zu)(v,...g);0!==_.length&&(m.filter.value=[...m.filter.value,..._.map((e=>({type:"exact",value:e})))],M({environment:c,collectionContextStore:l,temporaryState:{...l.temporaryStateStore.state,combinatorFilter:{value:p}}}),f||C({environment:c,collectionContextStore:l,type:I.Filters,targetCollectionViewStore:d,preventSnackbarNotification:!0,transaction:o}))}function R(e){var t;const o=null===(t=e.collectionViewStore())||void 0===t?void 0:t.id,n=e.getCurrentUserId();o&&n&&(c().E7({userId:n,collectionViewId:o,isOpen:!1}),e.filtersBarOpenStore.setState(!1))}},384667:(e,t,o)=>{o.d(t,{mp:()=>ve,IW:()=>ke,Ab:()=>_e,iE:()=>Te,tH:()=>Ne,w$:()=>Fe,by:()=>be,tQ:()=>Se,Zv:()=>Ze,qn:()=>Oe,ID:()=>Ve,V$:()=>De,$T:()=>ge,yk:()=>Me,$D:()=>Be,Od:()=>fe,BN:()=>me,hz:()=>xe,uo:()=>Ue,A6:()=>Ce,o3:()=>Re});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(916054),o(653476),o(470928),o(749411),o(30005),o(241792),o(731107),o(228244);var n=()=>o(506347),i=()=>o(926724),r=()=>o(156642),a=()=>o(577223),s=()=>o(747732),l=()=>o(608352),c=()=>o(226413),d=()=>o(417823),u=()=>o(965800),p=()=>o(225339),m=()=>o(998411),f=()=>o(35980),g=()=>o(396136),v=()=>o(752778),h=()=>o(81954),_=()=>o(989478),b=()=>o(722917),y=()=>o(955620),S=()=>o(426546),w=()=>o(513670),k=()=>o(696459),I=()=>o(830742);const C=(0,I().LS)("deleteGroup"),x=(0,I().LS)("renameGroup");var T=()=>o(932753),M=()=>o(887430),P=()=>o(576808),A=()=>o(718959),R=()=>o(576868),B=()=>o(861026),E=()=>o(559729),D=()=>o(270315),U=()=>o(615676),F=()=>o(582835),N=()=>o(148976),V=()=>o(527278),L=()=>o(591914),O=()=>o(620218),Z=()=>o(876822),j=()=>o(95718),K=()=>o(960562),z=()=>o(749826),H=()=>o(826955),q=()=>o(250303),W=()=>o(54512),G=()=>o(931756),$=()=>o(295274),Q=()=>o(236087),Y=()=>o(308186),J=()=>o(574089),X=()=>o(544607),ee=()=>o(782646),te=()=>o(421654),oe=()=>o(282662),ne=()=>o(332542),ie=()=>o(636340),re=()=>o(531515),ae=()=>o(794586),se=()=>o(453999),le=()=>o(879952),ce=()=>o(269299),de=()=>o(315917),ue=()=>o(348141);const pe=(0,o(788860).vU)({removeSortingConfirmation:{id:"databaseActions.removeSortingConfirmationDialog.prompt",defaultMessage:"Would you like to remove sorting?"},removeSortingButton:{id:"databaseActions.removeSortingConfirmationDialog.removeSortingButton.label",defaultMessage:"Remove"},removeSortingCancel:{id:"databaseActions.removeSortingConfirmationDialog.cancelRemoveSortingButton.label",defaultMessage:"Don't remove"},removeGroupSortingConfirmation:{id:"databaseActions.remoteGroupSortingConfirmationDialog.prompt",defaultMessage:"Would you like to remove {sortType} group sorting?"},removeGroupSortingButton:{id:"databaseActions.removeGroupSortingConfirmationDialog.removeButton.label",defaultMessage:"Remove"},removeGroupSortingCancel:{id:"databaseActions.removeGroupSortingConfirmationDialog.cancelButton.label",defaultMessage:"Don't remove"}});function me(e){const{store:t,groupsPointer:o,environment:n,collectionContextStore:i,transaction:r}=e;if(!t.isDefined())return;const s=i.normalizedSchemaStore.state,l=i.relativeVariableStore.state,c=i.viewsModuleContextStore.currentPageInRelatedCollectionId(),d=new Map,u=new Map;for(const p of o){const e=a().ND({block:t.getModel(),schema:s,propertyMapping:void 0,userFilterContext:{userId:n.currentUser.id,userTimeZone:(0,m().r)(),userStartOfWeek:A().AK.state},group:p,groupBy:i.getGroupByAndGroupFormats().groupBy,getRecordModel:t.getRecordModel,intl:V().Z.getIntl(),relativeVariableResult:l,currentPageInRelatedCollection:c,resultCache:d,regExpCache:u,experimentService:z().default});Le({environment:n,blockStore:t,properties:e,transaction:r})}}function fe(e){const{store:t,transaction:o}=e;ne().hh({childStore:t,transaction:o})}function ge(e){var t,o;const{environment:n,collectionContextStore:i,before:r,insertStores:a,store:s,groupsPointer:l,transaction:c}=e,d=i.collectionViewStore(),u=(null===(t=i.groupsStore.getGroupState(l))||void 0===t?void 0:t.resultsStore.state)||[],p=null===(o=i.groupsStore.getGroupState(l))||void 0===o?void 0:o.groupUiParentStore;if(!p)return[];const m=[];for(const _ of a){const t=e.collectionStore??_.getAssociatedCollectionStore();t&&(ve({environment:n,store:_,collectionStore:t,collectionContextStore:i,groupsPointer:l,shouldCoerce:!0,transaction:c}),m.push(H().G.createChildStore(p,{table:g().iU,id:_.id})))}const f=u.indexOf(s),v=r?f:f+1,h=[...u.slice(0,v),...m,...u.slice(v)];return d&&he({resultIds:h.map((e=>e.id)),collectionViewStore:d,collectionContextStore:i,transaction:c}),i.groupsStore.setLimitIfGreater(l,h.length),m}function ve(e){var t;const{environment:o,store:n,collectionStore:i,collectionContextStore:s,groupsPointer:l,transaction:c,shouldCoerce:d,alreadyMovedToCollection:u}=e,p=i.getSchema(),f=i.getParentBlockStore(),g=f&&f.isNonEditableState();let v=!d;const h=(null==s||null===(t=s.groupsStore.getGroupState(l))||void 0===t?void 0:t.resultsStore.state)||[];if(n.isDefined()){var _,y;const e=u?(0,b().Kc)(V().Z.getIntl()):n.getSchema()||{},t=null===(_=n.getAssociatedCollectionStore())||void 0===_?void 0:_.getDatabaseType(),r=i.getDatabaseType(),s=void 0!==t&&t===r,l=a().Xq({blockProperties:n.getProperties(),oldSchema:e,oldPropertyMapping:null===(y=n.getAssociatedCollectionStore())||void 0===y?void 0:y.getPropertyMapping(),newPropertyMapping:i.getPropertyMapping(),newSchema:p,typesMatch:s});l.propertyUpdate&&Le({environment:o,blockStore:n,properties:l.propertyUpdate,transaction:c}),w().Xy(p,l.newSchema)||g||!M().eD({collectionStore:i,collectionViewBlockStore:f,checkNavigableAncestorLocked:!1})||T().Rm({environment:o,collectionStore:i,update:{schema:l.newSchema},transaction:c})}if(n.getType()===r().Ti.page||n.getType()===r().Ti.collectionViewPage&&n.isAssociatedCollectionAPageTree()||i.isPageTreeCollection()||n.getType()===r().Ti.copyIndicator||n.getType()===r().Ti.externalObjectInstancePage||ie().sW({store:n,data:{type:r().Ti.page},transaction:c}),s){if(s.collectionViewStore()){const e=n.getModel(),t=s.relativeVariableStore.state,r=s.viewsModuleContextStore.currentPageInRelatedCollectionId(),u=(0,R().ze)(s,!1);if(e&&d){const d=n.getAssociatedCollectionStore()??i,p="collectionTypedView"===s.contextType&&d?d.getSchema():s.normalizedSchemaStore.state,f=a().RA({block:e,schema:p,groupBy:s.getGroupByAndGroupFormats().groupBy,propertyMapping:i.getPropertyMapping(),filter:u,userFilterContext:{userId:o.currentUser.id,userTimeZone:(0,m().r)(),userStartOfWeek:A().AK.state},relativeVariableResult:t,currentPageInRelatedCollection:r,groupsPointer:l,getRecordModel:i.getRecordModel,intl:V().Z.getIntl(),resultCache:new Map,regExpCache:new Map,experimentService:z().default});Le({environment:o,blockStore:n,properties:f.update,transaction:c}),v=f.coercionSucceeded}}}const S="collectionTypedView"===(null==s?void 0:s.contextType)&&M().fm(n)===s;if(u||S?ce().applyOperation({store:n,operation:{pointer:n.pointer,path:["alive"],command:"set",args:!0},transaction:c}):ne().zw({childStore:n,parentStore:i,transaction:c}),s&&s.resultSetStore.addLocalChange([n.id]),s){var k;const e=null===(k=s.groupsStore.getGroupState(l))||void 0===k?void 0:k.currentLimit;if(e){const t=e.state,o=h.find((e=>e.id===n.id));h.length>=t&&!o&&e.setState(h.length+1)}}return v}function he(e){const{resultIds:t,collectionViewStore:o,collectionContextStore:n,transaction:i}=e,r=o.getPageSortStore(),a=r.getValue()||[],{beforeOps:s}=(0,u().q)(a,t.slice(0,c().gq));for(const[l,c]of Object.entries(s))if(c){const e=(0,H().Kv)(o,{table:g().iU,id:c});oe().Vt({parentStore:r,insertStore:(0,H().Kv)(o,{table:g().iU,id:l}),beforeStore:e,transaction:i})}else{const e=t.findIndex((e=>e===l)),n=t[e-1],a=n?(0,H().Kv)(o,{table:g().iU,id:n}):void 0;oe().BE({parentStore:r,insertStore:(0,H().Kv)(o,{table:g().iU,id:l}),afterStore:a,transaction:i})}!function(e){const{collectionContextStore:t,collectionViewStore:o,transaction:n}=e,i=o.getPageSortStore(),r=i.getValue(),a=t.groupsStore.getAllGroupStates(),s=new Set(a.flatMap((e=>e.resultsStore.state.map((e=>e.id))))),l=function(e){const{pageSort:t,currentResults:o}=e;if(!t||t.length<=c().gq)return[];const n=t.filter((e=>!o.has(e))),i=w().jj([...n.reverse(),...w().d9(t).reverse()]).slice(0,t.length-c().gq);return i}({pageSort:r,currentResults:s});for(const c of l)oe().Od({parentStore:i,childToRemoveStore:(0,H().Kv)(i,{table:g().iU,id:c}),transaction:n})}({collectionContextStore:n,collectionViewStore:o,transaction:i})}function _e(e){const{environment:t,collectionStore:o,duplicate:n,droppedStores:i,transaction:r}=e,{movedStores:a,reparentedStores:s}=i.reduce(((e,t)=>(n||t.getAssociatedCollectionId()!==(null==o?void 0:o.id)?e.reparentedStores.push(t):e.movedStores.push(t),e)),{movedStores:[],reparentedStores:[]});return[...a,...J().LQ({environment:t,droppedStores:s,duplicate:n,transaction:r,resolveTemplateVariables:!1})]}function be(e){var t,o,n,r;const{environment:a,collectionStore:s,targetStore:l,droppedDirection:d,droppedStores:u,transaction:p,duplicate:m,collectionContextStore:f,groupsPointer:h,subitemPath:_,formulasModule:b}=e;if(!f.permissionScopesStore.state.canEditContent)return;if(u.some((e=>(0,j().xR)(e.id))))return;if(u.some((e=>{const t=e.getDiscussionStores();for(const o of t)if(o.isSuggestionDiscussion())return!0})))return;if(e.collapsedGroup&&function(e){var t;const{environment:o,droppedStores:n,duplicate:i,collectionContextStore:r,groupsPointer:a,transaction:s}=e,l=r.collectionStore(),c=r.collectionViewStore(),d=null===(t=n[0])||void 0===t?void 0:t.getAssociatedCollectionStore(),u=d&&d.id===(null==l?void 0:l.id),p=r.hasSingleCollection()&&i,m=_e({environment:o,droppedStores:n,duplicate:p,transaction:s,collectionStore:l});for(const f of m){const e=l??f.getAssociatedCollectionStore();e&&ve({environment:o,store:f,collectionStore:e,collectionContextStore:r,groupsPointer:a,shouldCoerce:!0,transaction:s})}c&&he({resultIds:m.map((e=>e.id)),collectionViewStore:c,collectionContextStore:r,transaction:s});s.postSubmitCallbacks.push((async e=>{!e&&l&&(z().default.checkGate({gateName:"subitems_drag_drop_improvements"})&&u||await Q().YE({droppedStores:n,createdStores:m,collectionStore:l,environment:o,collectionContextStore:r,groupsPointer:a,shouldDuplicate:i}))}))}({environment:a,collectionContextStore:f,groupsPointer:h,droppedStores:u,duplicate:m,transaction:p}),!l)return;const y=f.collectionViewStore();if(!y)return;const k=null===(t=u[0])||void 0===t?void 0:t.getAssociatedCollectionStore(),I=k&&k.id===(null==s?void 0:s.id),C=null===(o=f.groupsStore.getGroupState(h))||void 0===o?void 0:o.groupUiParentStore;if(!C)return;const x=ye({groupsPointer:h,collectionContextStore:f,blocks:u,formulasModule:b}),T=(null===(n=f.groupsStore.getGroupState(h))||void 0===n?void 0:n.resultsStore.state)||[],M=u.every((e=>e.isExternalObjectInstancePageBlockStore()))&&!(null!=s&&s.isSyncedCollection()&&(null===(r=u[0])||void 0===r?void 0:r.getParentId())===(null==s?void 0:s.id)),P=f.hasSingleCollection()&&(M||m);if(d===K().v.Onto){le().ZH({environment:a});const e=l.getContentStore(),t=_e({environment:a,droppedStores:u,duplicate:P,transaction:p,collectionStore:s});for(const o of t)oe().R3({parentStore:e,appendStore:o,transaction:p});return[]}let A=!1,R=[];if(!P&&s){const e=function(e){const{environment:t,droppedStores:o,collectionStore:n,transaction:i}=e;if(!o.length)return;const r=Re({environment:t,stores:o,spaceId:n.getSpaceId(),transaction:i});for(const a of r){if(a.getParentTable()===v().vF||a.getAssociatedCollectionStore())return;if(!ne().zw({childStore:a,parentStore:n,transaction:i}))return}return r}({environment:a,droppedStores:u,collectionStore:s,transaction:p});A=void 0!==e,R=e??[]}const B=(0,F().Af)([...(null==_?void 0:_.map((e=>e.value.store.pointer)))??[]]),E=f.subitemExpandedStore.state.get(B),D=_&&_.length>1||(null==E?void 0:E.isExpanded)&&d===K().v.Below,U=f.groupsStore.getAllGroupStates();u.forEach((e=>{const t=U.find((t=>t.resultsStore.state.includes(e)));t&&!D&&me({environment:a,store:e,collectionContextStore:f,groupsPointer:t.groupsPointer,transaction:p})}));const V=_e({environment:a,droppedStores:u,duplicate:P,transaction:p,collectionStore:s});A||(R=Re({environment:a,stores:V,spaceId:l.getSpaceId(),transaction:p})),p.postSubmitCallbacks.push((async e=>{!e&&s&&(z().default.checkGate({gateName:"subitems_drag_drop_improvements"})&&I||await Q().YE({droppedStores:u,createdStores:V,collectionStore:s,environment:a,collectionContextStore:f,groupsPointer:h,alreadyMovedToCollection:A,shouldDuplicate:P}))}));const L=ye({groupsPointer:h,collectionContextStore:f,blocks:V,formulasModule:b});for(const i of R){const e=s??i.getAssociatedCollectionStore();e&&ve({environment:a,store:i,collectionStore:e,collectionContextStore:f,groupsPointer:Boolean(D)?[]:h,shouldCoerce:!0,transaction:p,alreadyMovedToCollection:A})}s&&function(e){var t,o,n;const{environment:i,isInsertingAsSubitem:r,shouldDuplicate:a,collectionContextStore:s,collectionStore:l,droppedStores:d,wrappedStores:u,targetSubitemExpandedState:p,subitemPath:m,targetStore:f,transaction:g}=e,v=s.currentSubitemFormatStoreForCollectionStore.state,h=null==v?void 0:v.inverse,_=h&&s.normalizedSchemaStore.state[h],b=null==v?void 0:v.property,y=b&&s.normalizedSchemaStore.state[b],w=null===(t=s.collectionViewStore())||void 0===t?void 0:t.getType(),k=null===(o=s.collectionViewStore())||void 0===o?void 0:o.getFormat();if(null!==(n=s.collectionViewStore())&&void 0!==n&&null!==(n=n.getCollectionStore())&&void 0!==n&&n.isExternallyImportedAndSyncedCollection()&&(0,N().K6)())return;const I=(null==k?void 0:k.subitem_display_mode)??"show",C=v&&w&&(0,F().Av)(w)&&_&&(0,c().p_)(_)&&"flattened"!==I&&"disabled"!==I,x=(0,F().g0)(d[0]);null!=x&&x.subitemFormat&&v&&y&&(0,c().p_)(y)&&Q().i6({blocksToDuplicate:[...d],duplicatedBlocks:[...u],environment:i,shouldDuplicate:a,originSubitemFormat:x.subitemFormat,destinationSubitemFormat:v,transaction:g,subitemRelationSchema:y,relationPropertyCollectionId:l.id});const T=v?(0,F().Kg)(u,v):void 0,M=T?u.filter(((e,t)=>T.includes(t))):[];for(const c of M){if(C){const e=(0,F().xb)({store:c,subitemFormat:v,propertySchema:_});for(const t of e){const e=H().G.createChildStore(c,t);re().Bl({environment:i,sourceStore:e,destStore:c,propertyWithInverse:v,transaction:g})}}if(r){const e=null!=p&&p.isExpanded?"into":"below";Pe({environment:i,collectionContextStore:s,collectionStore:l,subitemPath:m&&(null==m?void 0:m.length)>0?m:[new(S().mp)((0,F().SM)(f),[])],store:f,before:"into"===e,insertBlockStore:c,insertDirection:e,transaction:g})}}}({environment:a,isInsertingAsSubitem:Boolean(D),shouldDuplicate:P,collectionContextStore:f,collectionStore:s,droppedStores:u,wrappedStores:R,targetSubitemExpandedState:E,subitemPath:_,targetStore:l,transaction:p});const O=T.filter((e=>!V.includes(e))),q=O.indexOf(l),W=d===K().v.Above||d===K().v.Left?q:q+1;he({resultIds:[...O.slice(0,W),...R,...O.slice(W)].map((e=>e.id)),collectionViewStore:y,collectionContextStore:f,transaction:p});const G=w().Xy(x.sort(),L.sort());z().default.checkGate({gateName:"intelligent_collections_sort_modal"})?I&&G&&we({environment:a,collectionContextStore:f}):we({environment:a,collectionContextStore:f});if(!f.collectionViewBlockStore())return;const $=D?l:C,Y=R.map((e=>H().G.createChildStore($,{table:g().iU,id:e.id})));return le().Z5({environment:a,stores:Y}),function(e,t){var o,n;const r=(null===(o=e.collectionViewStore())||void 0===o?void 0:o.getFormat().app_config_uri)===i().g3&&"sprint_board"===(null===(n=Z().default.state.mainEditorCurrentBlockStore)||void 0===n?void 0:n.getFormat().special_page_for_pm_launch);r&&de().tutorialAdvanceToStepAfter(t,"sprints-onboarding","sprint-task-tooltip")}(f,p),Y}function ye(e){const{groupsPointer:t,collectionContextStore:o,blocks:n,formulasModule:i}=e,r=[];return t.map((e=>{var t,a;const l=null==o||null===(t=o.collectionStore())||void 0===t?void 0:t.getSchema()[e.property],c=null==o||null===(a=o.collectionStore())||void 0===a?void 0:a.getSchema(),d=new Map,u=new Map,p=n.flatMap((t=>{const o=t.getModel();if(l&&c&&o)return(0,s().L)({property:e.property,schema:c,block:o,getRecordModel:t.getRecordModel,collectionRequestContext:{userId:void 0,userTimeZone:(0,m().r)(),depth:0,intl:V().Z.getIntl(),visitedProperties:new Set,resultCache:d,regExpCache:u,experimentService:z().default,collectionFeatureGates:(0,U().W)()},exportedFilePaths:!1,formulasModule:i})})).filter((e=>!w().o8(e)));r.push(...p)})),w().sv(r,w().Xy)}function Se(e){const{environment:t,collectionStore:o,targetStore:n,droppedDirection:i,files:r,transaction:a,collectionContextStore:s,groupsPointer:l,formulasModule:c}=e,d=s.collectionViewStore(),u=A().qQ(t);if(!d)return;const m=o.inMemoryRecordCache,f=X().z({environment:t,files:r,inMemoryRecordCache:m,pageWidth:u,transaction:a,spaceId:o.pointer.spaceId}).map(((e,n)=>{const i=r[n],s=ie().j4({environment:t,type:"page",inMemoryRecordCache:m,properties:{title:(0,y().TPx)(p().AA(i.name))},transaction:a,spaceId:o.pointer.spaceId});return oe().R3({parentStore:s.getContentStore(),appendStore:e,transaction:a}),s}));be({environment:t,collectionStore:o,targetStore:n,droppedDirection:i,collectionContextStore:s,groupsPointer:l,droppedStores:f,duplicate:!1,transaction:a,collapsedGroup:!1,formulasModule:c})}function we(e){const{environment:t,collectionContextStore:o}=e,n=o.collectionViewBlockStore(),i=o.collectionViewStore();if(!i||!n)return!1;const r=o.currentViewHasSort(),a=(0,R().Mj)(o),s=r||a,l=i.getType(),c=o.permissionScopesStore.state;return!!(s&&l&&D().Km[l]&&c.canConfigureBlock)&&(Y().vC({message:V().Z.formatMessage(pe.removeSortingConfirmation),items:[{label:V().Z.formatMessage(pe.removeSortingButton),color:"red",onAccept:()=>{ce().createAndCommit({userAction:"collectionGroupActions.offerToRemoveSort",environment:t,canUndo:!0,perform:e=>{T().Es({collectionViewStore:i,update:{sort:[]},transaction:e})}});const e=o.temporaryStateStore.state;o.temporaryStateStore.setState({...e,sorts:void 0})}},{label:V().Z.formatMessage(pe.removeSortingCancel),onAccept:()=>{}}],showCancel:!1,keepFocus:!0}),!0)}function ke(e){var t,o,n;const{environment:i,collectionContextStore:a,groupsPointer:s,insertAtIndex:l,shouldCoerce:c,templateStore:d,transaction:u,from:p,tracker:m,inMemoryRecordCache:f,isKeyboard:v,title:h}=e,_=O().default.DO_NOT_USE_markLegacy("collections.add_item_lag");O().default.DO_NOT_USE_measureAfterNextFlushLegacy(_,{environment:i,getData:()=>({...B().vS(a),from:p.createBlock})});const b="collectionTypedView"===a.contextType,S=a.databaseType,w=a.collectionStoresStore.state,k=w.find((e=>e.canEdit()||e.canEditCollection()||e.canEditContentOnly()))||w[0];!b&&k&&ue().zq({transaction:u,databaseType:S,collectionId:k.id});const I=null===(t=Z().default.state.currentSpaceStore)||void 0===t?void 0:t.id,C=Z().default.state.currentUserSettingsStore,x=b&&S&&I&&C&&[...C.getAllPreferredCollections(I),...C.getPreferredCollectionsOfType(I,S)]||[];let T;const M=s[0];if("group_header"===p.createBlock&&"location"===M.value.type){const e=M.value.value;if(e){T=w.find((t=>t.id===e.id&&(t.canEdit()||t.canEditCollection()||t.canEditContentOnly())))}}else T=function(e,t){for(const o of e){const e=t.find((e=>e.id===o&&(e.canEdit()||e.canEditCollection()||e.canEditContentOnly())));if(e)return e}}(x,w);const P=T??k,A=a.collectionViewStore(),R=a.getViewType(),E=ie().j4({environment:i,type:r().Ti.page,inMemoryRecordCache:f,transaction:u,spaceId:I,tracker:m,permissions:Ie(i,P,I),properties:{title:(0,y().TPx)(h)}});if(!P||!A||!R)return{coercionSucceeded:!0,newStore:E};const D=null===(o=a.groupsStore.getGroupState(s))||void 0===o?void 0:o.groupUiParentStore;if(!D)return{coercionSucceeded:!0,newStore:E};const U=H().G.createChildStore(D,{table:g().iU,id:E.id});d&&$().ob({title:"template",environment:i,store:E,templateStore:d,isKeyboard:v??!1,isCreateIn:!1,transaction:u,from:p.initCollection??"collection_group_actions"});const F=ve({environment:i,store:E,collectionStore:P,collectionContextStore:a,groupsPointer:s,shouldCoerce:c,transaction:u}),N=(null===(n=a.groupsStore.getGroupState(s))||void 0===n||null===(n=n.reducerResultStore.state)||void 0===n?void 0:n.blockIds)||[],V=void 0!==l?l:N.length;if(a.permissionScopesStore.state.canEditContent||b){he({resultIds:[...N.slice(0,V),U.id,...N.slice(V)],collectionViewStore:A,collectionContextStore:a,transaction:u})}return{coercionSucceeded:F,newStore:U}}function Ie(e,t,o){const n=A().B7(e),i=null==n?void 0:n.id;if(!i||!o)return;const r=(0,d().nS)({experimentService:z().default,actor:{table:_().KJ,id:i},spaceId:o})&&void 0!==t.getSharingEnabledRelationId();if(!r&&!z().default.checkGate({gateName:"full_access_for_created_collection_pages"}))return;if(r){const e=t.getSharingEnabledTargetCollectionStore();if(null!=e&&e.canAdmin())return}else if(t.canAdmin())return;const a=Z().default.state.currentSpaceStore;return a&&(0,L().VK)(a,i).isMember()?[{role:"editor",type:"user_permission",user_id:i}]:void 0}function Ce(e){const{collectionContextStore:t,newGroups:o,groupsFormatKey:n,transaction:i}=e,r=t.collectionViewStore();r&&te().FH({stores:[r],update:{[n]:o},transaction:i})}function xe(e){const{environment:t,collectionStore:o,property:n,oldValue:i,newValue:r,preventPublishAppEventsForBlockUpdates:s,transaction:l}=e,c=o.getSchema(),d=t.currentUser.id;s||o.inMemoryRecordCache.forEachRecord(d,(e=>{var s;let{model:d}=e;if(d.table!==g().iU)return;const u=H().G.createChildStore(o,{table:g().iU,id:d.id});if(u.canEdit()&&(null===(s=u.getAssociatedCollectionStore())||void 0===s?void 0:s.id)===o.id){const e=a().hz({block:d,schema:c,property:n,oldValue:i,newValue:r});Le({environment:t,blockStore:u,properties:e,transaction:l})}})),o.isDefaultRecordCache()&&l.postSubmitCallbacks.push((async e=>{const a=o.pointer,{value:s}=await ee().Lj(t,x,{collection:{id:a.id,spaceId:(0,h().J)(a.spaceId)},property:n,oldValue:i,newValue:r}).next();if(s.error)throw s.error}))}function Te(e){const{environment:t,collectionStore:o,groupsFormatKey:n,property:i,groupFormat:r,currentGroups:s,collectionContextStore:d,transaction:u,intl:p}=e,f=o.getSchema(),v=f[r.property],_=s.filter((e=>!(0,l().we)(r.value,e.value)));Ce({collectionContextStore:d,newGroups:_,groupsFormatKey:n,transaction:u});const b=r.value;if(v&&(0,c().cu)(v)&&b.type===v.type&&o){const e=(v.options||[]).filter((e=>e.value!==b.value)),n={...v,options:e},i={...f,[r.property]:n};T().Rm({environment:t,collectionStore:o,update:{schema:i},transaction:u})}const y=t.currentUser.id,S=new Map,w=new Map;o.inMemoryRecordCache.forEachRecord(y,(async e=>{let{model:n}=e;if(n.table!==g().iU)return;const r=H().G.createChildStore(o,n.pointer);if(a().wg({block:n,groupBy:d.getGroupByAndGroupFormats().groupBy,schema:f,property:i,value:b,intl:p,timeZone:(0,m().r)(),getRecordModel:o.getRecordModel,resultCache:S,regExpCache:w,experimentService:z().default,collectionFeatureGates:(0,U().W)()}))if(n.parent_id===o.id)ne().hh({childStore:r,transaction:u});else{const e=r.getAssociatedCollectionStore();e&&e.id===o.id&&("page"===r.getType()||"collection_view_page"===r.getType()&&!r.isCollectionViewPageWithContent())&&await se().Qw({environment:t,blocks:[r],shouldCheckSuggestEdit:!0})}})),o.isDefaultRecordCache()&&u.postSubmitCallbacks.push((async e=>{const n=await ee().Lj(t,C,{collection:{id:o.id,spaceId:(0,h().J)(o.pointer.spaceId)},property:i,value:b}).next();if(n.value.error)throw n.value.error}))}function Me(e){const{environment:t,collectionContextStore:o,before:i,store:a,groupsPointer:s,collectionStore:l,transaction:c,subitemPath:d,subitemInsertDirection:u,from:p}=e,m=o.collectionViewStore();if(!m)return;const f=o.groupsStore.getGroupState(s),v=null==f?void 0:f.groupUiParentStore,h=(null==f?void 0:f.resultsStore.state)||[];if(!v)return;const _=ie().j4({environment:t,type:r().Ti.page,inMemoryRecordCache:a.inMemoryRecordCache,transaction:c,spaceId:m.pointer.spaceId});if(p){const e="collectionTypedView"===o.contextType?_.getAssociatedCollectionId():void 0;W().W(t,{from:p,type:"page",new_page_id:_.id,creating_block_id:_.id,...B().Pn(o,e)})}const b=ve({environment:t,store:_,collectionStore:l,collectionContextStore:o,groupsPointer:s,shouldCoerce:!0,transaction:c}),y=o.defaultPageTemplateStore.state;y&&$().ob({title:"template",environment:t,store:_,templateStore:y,isKeyboard:!1,isCreateIn:!1,transaction:c,from:"collection_group_actions"});const S=H().G.createChildStore(v,{table:g().iU,id:_.id});d&&d.length>0&&Pe({environment:t,collectionContextStore:o,subitemPath:d,collectionStore:l,store:a,before:!1,insertBlockStore:S,insertDirection:u,transaction:c});const w=h.indexOf(a),k=i?w:w+1;if(he({resultIds:[...h.slice(0,k),S,...h.slice(k)].map((e=>e.id)),collectionViewStore:m,collectionContextStore:o,transaction:c}),b){if(d){var I;const e="into"===u?a:null===(I=d[d.length-2])||void 0===I?void 0:I.value.store;return e?H().G.createChildStore(e,S.pointer):S}return le().Ys({environment:t,store:S}),we({environment:t,collectionContextStore:o}),S}ae().CH({environment:t,store:S,peekMode:M().kr(o),resultsStore:null==f?void 0:f.resultsStore,collectionContextStore:o,pageVisitSource:n().tY.Create})}function Pe(e){const{environment:t,collectionContextStore:o,subitemPath:n,collectionStore:i,store:r,before:a,insertBlockStore:s,insertDirection:l,transaction:c}=e,d=o.currentSubitemFormatStoreForCollectionStore.state;if(!d)return;const u=i.getSchema()[d.property];if(!u||"relation"!==u.type)return;if("into"===l){var p;const e=n[n.length-1],o=e.value.store;return void re().hE({environment:t,sourceStore:o,destStore:s,position:a?{type:"before",before:null===(p=e.children[0])||void 0===p?void 0:p.value.store.id}:{type:"after"},propertyWithInverse:d,transaction:c})}const m=n[n.length-2];if(!m)return;const f=m.value.store;re().hE({environment:t,sourceStore:f,destStore:s,propertyWithInverse:d,position:a?{type:"before",before:r.id}:{type:"after",after:r.id},transaction:c})}function Ae(e){const{environment:t,collectionContextStore:o,groupFormat:n,newGroupFormat:i,groupsFormatKey:r,currentGroups:a,transaction:s}=e,c=o.collectionStore();!(0,l().we)(n.value,i.value)&&c&&xe({environment:t,collectionStore:c,property:n.property,oldValue:n.value,newValue:i.value,preventPublishAppEventsForBlockUpdates:!1,transaction:s});Ce({collectionContextStore:o,newGroups:a.map((e=>(0,l().we)(n.value,e.value)?i:e)),groupsFormatKey:r,transaction:s})}function Re(e){const{environment:t,stores:o,spaceId:n,transaction:i}=e;return o.map((e=>{const o=e.getType();if(o&&(r().Ok[o]||o===r().Ti.file||o===r().Ti.externalObjectInstance)){const o=ie().j4({environment:t,type:"page",inMemoryRecordCache:e.inMemoryRecordCache,transaction:i,spaceId:n});return ne().jG({parentStore:o,childStore:e,transaction:i}),o}return e}))}function Be(e){const{environment:t,format:o,groupsFormatKey:n,collectionContextStore:i,currentGroups:r}=e;if(z().default.checkGate({gateName:"collection_group_reducer_visible"}))return;const a=o[n]||[];if(!i.permissionScopesStore.state.canConfigureBlock)return;if(0===r.length)return;const s=r.slice(0,E().XD),l=a.slice(0,E().XD);w().Xy(s,l)||ce().createAndCommit({userAction:"collectionGroupActions.persistFormatGroups",environment:t,canUndo:!1,perform:e=>{Ce({collectionContextStore:i,newGroups:r,groupsFormatKey:n,transaction:e}),e.postSubmitCallbacks.push((()=>{q().aT({environment:t,collectionContextStore:i,request_reason:"persist_format_groups"})}))}})}function Ee(e,t){return`group-${e}-${(0,l().mD)(t)}`}function De(e){const{environment:t,groupFormat:o,collectionContextStore:n}=e,i=n.collectionViewStore();if(!i)return;const r=n.groupsStore.getGroupState(o);if(!r)return;const a=f().Z.get({userId:t.currentUser.id,key:Ee(i.id,o)});r.toggleStateStore.setState(a??!0)}function Ue(e){const{environment:t,groupFormat:o,toggleStateStore:n,newValue:i,collectionContextStore:r}=e,a=r.collectionViewStore();a&&(n.setState(i),f().Z.set({userId:t.currentUser.id,key:Ee(a.id,o),value:i}))}function Fe(e){const{newGroupValue:t,groupFormat:o,schema:n,collectionContextStore:i,currentGroups:r,groupsFormatKey:a,collectionStore:s,environment:d}=e,u=n[o.property];if(!u)return;if(!(0,l().LG)(u))return;const p=o.value;if((0,c().cu)(u)){if(p.type!==u.type)return;if(t.type!==u.type)return;if(void 0===t.value)return;const e=u.options||[],l=t.value,c=e.map((e=>e.value===p.value?{...e,value:l}:e)),m={...u,options:c},f={...n,[o.property]:m},g={...o,value:{...p,value:l}};ce().createAndCommit({userAction:"collectionGroupActions.handleCollectionGroupValueChange",environment:d,canUndo:!0,perform:e=>{Ae({environment:d,collectionContextStore:i,groupFormat:o,newGroupFormat:g,currentGroups:r,transaction:e,groupsFormatKey:a}),T().Rm({environment:d,collectionStore:s,update:{schema:f},transaction:e})}})}else if("person"!==u.type)if((0,l().HB)(u.type)){if(p.type!==u.type)return;if(t.type!==u.type)return;if(!t.value||"exact"!==t.value.type)return;const e={...o,value:t};ce().createAndCommit({userAction:"collectionGroupActions.handleCollectionGroupValueChange",environment:d,canUndo:!0,perform:t=>{Ae({environment:d,collectionContextStore:i,groupFormat:o,newGroupFormat:e,currentGroups:r,groupsFormatKey:a,transaction:t})}})}else"status"===u.type||(0,l().A1)(u.type)||"created_by"===u.type||"last_edited_by"===u.type||"number"===u.type||"checkbox"===u.type||"formula"===u.type||"relation"===u.type||"location"===u.type||(0,k().t1)(u.type);else{if(p.type!==u.type)return;if(t.type!==u.type)return;const e={...o,value:t};ce().createAndCommit({userAction:"collectionGroupActions.handleCollectionGroupValueChange",environment:d,canUndo:!0,perform:t=>{Ae({environment:d,collectionContextStore:i,groupFormat:o,newGroupFormat:e,currentGroups:r,groupsFormatKey:a,transaction:t})}})}}async function Ne(e){const{update:t,collectionContextStore:o,groupsFormatKey:n,collectionStore:i,environment:a,schema:s,groupBy:l}=e,d=s[l.property];if(!d)return;const u="relation"===d.type&&(0,c().F0)(d),p=u&&new(H().NW)(a,{table:v().vF,id:u});p&&await p.load(),ce().createAndCommit({userAction:"collectionGroupActions.handleCollectionAddGroupButtonAccept",environment:a,canUndo:!0,perform:e=>{if(t.newGroups&&(Ce({collectionContextStore:o,newGroups:t.newGroups,groupsFormatKey:n,transaction:e}),G().ul({transaction:e,newGroups:t.newGroups,collectionContextStore:o,environment:a})),t.newSchema&&T().Rm({environment:a,collectionStore:i,update:{schema:t.newSchema},transaction:e}),t.newPage&&"relation"===d.type&&p){const o=(0,y().TPx)(t.newPage.name),n=ie().j4({environment:a,id:t.newPage.id,type:r().Ti.page,spaceId:t.newPage.spaceId,properties:{title:o},inMemoryRecordCache:i.inMemoryRecordCache,transaction:e});ne().zw({parentStore:p,childStore:n,transaction:e});const s=p.getDefaultTemplatePageStore();s&&$().ob({title:{text:o},environment:a,store:H().G.createChildStore(p,n.pointer),templateStore:s,isKeyboard:!1,isCreateIn:!1,transaction:e,from:"collection_group_actions"})}}})}function Ve(e){const{collectionContextStore:t,environment:o,incrementLimitArgs:n}=e;t.groupsStore.incrementLimit(e.incrementLimitArgs),t.loadingDetailsStore.setState({type:"load_more_blocks",group:n.groupsPointer}),q().bn(o)}function Le(e){const{environment:t,blockStore:o,properties:n,transaction:i}=e;P().b({environment:t,store:o,properties:n,transaction:i})}function Oe(e){const{environment:t,collectionContextStore:o,transaction:n,groupByKey:i,groupsFormatKey:r,sortType:a}=e;if("chart_config"===i)return;const s=(0,l().b7)(o.normalizedFormatStore.state,i,r),c=o.collectionViewStore();if(s&&c){if("formula"===s.type){const e={...s,groupBy:{...s.groupBy,sort:{type:a}}};te().FH({stores:[c],update:{[i]:e},transaction:n})}else te().FH({stores:[c],update:{[i]:{...s,sort:{type:a}}},transaction:n});q().wd({environment:t,collectionContextStore:o,action:"update_group_sort"})}}function Ze(e){const{environment:t,collectionContextStore:o,isHidden:n,groupByKey:i,groupsFormatKey:r,currentGroups:a,newGroupIds:s}=e,c=(0,l().b7)(o.normalizedFormatStore.state,i,r),d=c?(0,l().mu)(c):void 0,u=a.filter((e=>s.indexOf((0,l().mD)(e))<0)),p=a.filter((e=>s.indexOf((0,l().mD)(e))>=0)),m=w().MR(p,(e=>{const t=s.indexOf((0,l().mD)(e));return t>=0?t:1/0})),f=n?[...u,...m]:[...m,...u];ce().createAndCommit({userAction:`collectionGroupActions.handleGroupReorder#${r}`,environment:t,canUndo:!0,perform:e=>{Oe({sortType:"manual",environment:t,collectionContextStore:o,groupByKey:i,groupsFormatKey:r,transaction:e}),Ce({collectionContextStore:o,newGroups:f,groupsFormatKey:r,transaction:e})}});const g="board_columns"===r?n?"board_reorder_hidden_groups":"board_reorder_groups":n?"reorder_hidden_groups":"reorder_groups";q().wd({environment:t,collectionContextStore:o,action:g}),c&&d&&function(e){const{environment:t,collectionContextStore:o,groupByKey:n,groupsFormatKey:i,previousGroupBy:r,previousSortType:a}=e;"manual"!==a&&Y().vC({message:V().Z.formatMessage(pe.removeGroupSortingConfirmation,{sortType:V().Z.formatMessage((0,E().h8)(r,a))}),items:[{label:V().Z.formatMessage(pe.removeGroupSortingButton),color:"red",onAccept:()=>{}},{label:V().Z.formatMessage(pe.removeGroupSortingCancel),onAccept:()=>{ce().createAndCommit({userAction:"collectionGroupActions.offerToRemoveGroupSort",environment:t,canUndo:!0,perform:e=>{Oe({environment:t,collectionContextStore:o,transaction:e,groupByKey:n,groupsFormatKey:i,sortType:a})}})}}],showCancel:!1,keepFocus:!0})}({environment:t,collectionContextStore:o,groupByKey:i,groupsFormatKey:r,previousGroupBy:c,previousSortType:d.type})}},984871:(e,t,o)=>{o.d(t,{Bv:()=>B,E2:()=>N,G3:()=>M,Ji:()=>V,LC:()=>A,OK:()=>E,bL:()=>R,er:()=>D,fH:()=>U,g2:()=>P,yV:()=>F});o(670560),o(267602),o(470928),o(241792);var n=()=>o(474094),i=()=>o(226413),r=()=>o(443510),a=()=>o(109477),s=()=>o(305580),l=()=>o(752778),c=()=>o(513670),d=()=>o(543172),u=()=>o(696459),p=()=>o(932753),m=()=>o(887430),f=()=>o(270315),g=()=>o(527278),v=()=>o(90065),h=()=>o(170075),_=()=>o(749826),b=()=>o(826955),y=()=>o(491927),S=()=>o(250303),w=()=>o(139224),k=()=>o(853292),I=()=>o(593515),C=()=>o(421654),x=()=>o(269299),T=()=>o(626788);function M(e){const{environment:t,collectionViewArgs:o,collectionStore:a,propertyName:s,propertyType:l,selectOptions:c,transaction:m,propertyId:b,propertySchema:y,propertyGroupId:S}=e,w={},k=a.getSchema(),I=Object.keys(k),x=(0,r().Z)(s??f().SO[l],(e=>!I.find((t=>{const o=k[t];return Boolean(o&&o.name===e)}))));let M;if(y&&y.type===l)M=y;else{const e=(0,f().k4)();if((0,i().XU)(l))switch(l){case"ai_custom_prompt":M={name:x,type:"text",ai_inference:{type:"custom",prompt:"",auto_update_on_edit:e}};break;case"ai_summary":M={name:x,type:"text",ai_inference:{type:"summarize",auto_update_on_edit:e}};break;case"ai_extract":M={name:x,type:"text",ai_inference:{type:"extract",prompt:"",auto_update_on_edit:e}};break;case"ai_translate":M={name:x,type:"text",ai_inference:{type:"translate",targetProperties:["title"],toLanguage:"english",auto_update_on_edit:e}};break;case"ai_keywords":M={name:x,type:"multi_select",select_ai_inference:{type:"multi_select",add_options:!0,auto_update_on_edit:!1}};break;default:(0,u().t1)(l)}else M=!c||"select"!==l&&"multi_select"!==l?{name:x,type:l}:{name:x,type:l,options:c}}const P=a.isPageTreeCollection()&&Boolean(k[n().k.Owner]),A=_().default.checkGate({gateName:"new_verification_property_id"});let R=b;R||(R=!i().iE(M)||P&&!A?(0,d().ZP)():v().EI.Verification),w[R]=M;if(!((0,v().h$)()&&!a.isPageTreeCollection())&&i().iE(M)){const e=P?n().k.Owner:v().EI.Owner;I.includes(e)||(w[e]={name:g().Z.formatMessage(T().Zi.ownerPropertyName),type:"person",default:"created_by"}),M.verifier_property=e}if(S&&(0,h().Nk)({collectionStore:a,groupId:S,propertyId:R,transaction:m}),o){const{format:e,formatKey:t,collectionViewStore:n}=o,i=[...e[t]||[],{property:R,visible:!0}];C().FH({stores:[n],update:{[t]:i},transaction:m})}return p().xO({environment:t,collectionStore:a,update:w,transaction:m}),R}function P(e){const{environment:t,collectionStore:o,transaction:n,propertiesToBeAdded:i,collectionViewArgs:r}=e,a={},s=[];for(const c of i){const e={type:"external_object_instance_page_metadata",pointer_property_uri:c.rootPropertyId,external_object_attribute:c.propertyAttribute};let t;var l;if("select"===c.type||"multi_select"===c.type)t={name:c.name,type:c.type,derived_property_record_metadata:e,options:null===(l=c.options)||void 0===l?void 0:l.map((e=>({id:e.id,value:e.value})))};else t="relation"===c.type?{name:c.name,type:"rollup",relation_property:c.rootPropertyId,target_property:` ${c.propertyAttribute}`,target_property_type:c.type}:{name:c.name,type:c.type,derived_property_record_metadata:e};const o=(0,d().ZP)();a[o]=t,s.push(o)}if(r){const{format:e,formatKey:t,collectionViewStore:o}=r,i=[...e[t]||[],...s.map((e=>({property:e,visible:!0})))];C().FH({stores:[o],update:{[t]:i},transaction:n})}p().xO({environment:t,collectionStore:o,update:a,transaction:n})}function A(e){const{environment:t,collectionStore:o,property:n,type:r,transaction:a}=e,s=o.getSchema()[n];if(!s||s.type===r)return;const l={...s};l.type=(0,i().TN)(r),p().xO({environment:t,collectionStore:o,update:{[n]:l},transaction:a})}function R(e){const{collectionStore:t,property:o,autoRelate:n,transaction:i}=e;t.getSchema()[o]&&x().applyOperation({store:t,operation:{pointer:t.pointer,path:["schema",o,"autoRelate"],command:"set",args:n},transaction:i})}function B(e){const{collectionStore:t,property:o,name:n,transaction:i}=e;t.getSchema()[o]&&x().applyOperation({store:t,operation:{pointer:t.pointer,path:["schema",o,"name"],command:"set",args:n},transaction:i})}function E(e){const{collectionStore:t,property:o,icon:n,transaction:i}=e;t.getSchema()[o]&&x().applyOperation({store:t,operation:{pointer:t.pointer,path:["schema",o,"icon"],command:"set",args:n},transaction:i})}function D(e){const{formatStore:t,formatKey:o,property:n,update:i,transaction:r}=e,a=[...t.getFormat()[o]||[]],s=a.findIndex((e=>e.property===n));-1!==s?a[s]={...a[s],...i}:a.push({property:n,...i}),C().FH({stores:t instanceof b().G||t instanceof b().NW||t instanceof b().Xr?[t]:(0,u().t1)(t),update:{[o]:a},transaction:r})}function U(e){const{propertyGroupId:t,collectionContextStore:o,collectionStore:n,environment:r,isInPeekRenderer:l,onCloseMenu:c,pagePropertiesStore:d,propertyVisibility:u}=e,p=o.settingsStore;w().H4({collectionSettingsStore:p,item:{type:"propertyType",propertyGroupId:t,onAccept:(e,m,f,g)=>{if("relation"===e)return void w().H4({collectionSettingsStore:p,item:{type:"selectRelationSource",property:void 0,formatKey:"collection_page_properties",propertyGroupId:t}});const{performResult:v}=x().createAndCommit({userAction:"PageProperties.handleAddPropertyClick",environment:r,canUndo:!0,perform:t=>M({environment:r,collectionStore:n,collectionViewArgs:void 0,propertyType:e,propertyName:f,selectOptions:g,transaction:t})});(t||u)&&x().createAndCommit({userAction:"PageProperties.handleAddPropertyClick.addPropertyToGroupAndUpdateVisibility",environment:r,canUndo:!0,perform:e=>{t&&(0,h().Nk)({collectionStore:n,groupId:t,propertyId:v,transaction:e}),u&&I().M0({property:v,visibility:u,format:(0,s().i)(n.getFormat(),n.getSchema(),void 0,a().j5.Collection),store:n,transaction:e})}}),null==c||c(v),w().FK({collectionSettingsStore:p,item:{type:"property",formatKey:"collection_page_properties",property:v,selectNameInitial:!r.device.isMobile}}),d.setState({...d.state,openProperty:{property:v,isInPeekRenderer:l},forceShowProperties:!0}),(0,i().XU)(e)&&k().K7({propertyType:e,propertyId:v,collectionContextStore:o}),S()._H({environment:r,collectionContextStore:o,from:"page_properties",property_type:(0,i().TN)(e),property:(0,i().XU)(e)?e:void 0,is_suggested_property:m})}}})}async function F(e){const{environment:t,collectionStore:o,schema:n,property:r,transaction:a}=e,s=n[r];if(s)if("relation"===s.type&&i().F0(s)&&s.property&&i().F0(s)!==o.id){const e=new(b().NW)(t,i().j0(s));await e.load(),N({environment:t,collectionStore:o,schema:n,property:r,transaction:a,targetCollectionStore:e})}else N({environment:t,collectionStore:o,schema:n,property:r,transaction:a})}function N(e){const{environment:t,collectionStore:o,schema:n,property:i,transaction:r,targetCollectionStore:a,permanentlyDelete:s}=e;if(!o.isDefined())return;const d=Boolean(s),u=m().zm({environment:t,collectionId:o.id,schema:n,property:i,targetCollectionStore:a,omitNewSchema:!0});if(!u)return;(0,h().K$)({collectionStore:o,propertyId:i,transaction:r}),d||p().$N({collectionStore:o,update:u.deletedSchema,transaction:r});let f=c().Xh(u.deletedSchema);for(const l in f)f[l]=null;if(p().xO({environment:t,collectionStore:o,update:f,transaction:r}),u.otherCollectionId&&u.otherCollectionSchema){d||p().$N({collectionStore:b().NW.createChildStore(o,{table:l().vF,id:u.otherCollectionId}),update:u.otherCollectionDeletedSchema||{},transaction:r}),f=c().Xh(u.otherCollectionDeletedSchema||{});for(const e in f)f[e]=null;p().xO({environment:t,collectionStore:b().NW.createChildStore(o,{table:l().vF,id:u.otherCollectionId}),update:f||{},transaction:r})}const g=n[i];("auto_increment_id"===(null==g?void 0:g.type)||d)&&p().$N({collectionStore:o,update:{[i]:null},transaction:r})}function V(e){let{visibility:t,property:o,schema:n,collectionStore:i,format:r,environment:a,transaction:s}=e;const l=r.collection_page_sections?c().Xh(r.collection_page_sections):[];if(!n[o])return;const d=l.findIndex((e=>e.section===o));-1!==d?l[d]={section:o,visibility:t}:l.push({section:o,visibility:t}),l&&(x().createAndCommitOrAppend({userAction:"PagePropertiesRowName.handleShowAsClick",environment:a,canUndo:!0,transaction:s,perform:e=>{I().Do({environment:a,pageSectionFormats:l,store:i,transaction:e})}}),y().K1(a,{from:"relation_section",mode:"inline"===t?"page_section":"minimal"===t?"minimal_page_section":"property"}))}},366257:(e,t,o)=>{o.d(t,{H:()=>I,r:()=>C});o(667294);var n=()=>o(677539),i=()=>o(998411),r=(o(821057),o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(916054),o(653476),o(749411),o(241792),()=>o(513670)),a=()=>o(532850),s=()=>o(217465);const l=500;function*c(e){const{startingBlock:t,relationPropertyIdGroups:o,receiver:n}=e;let i,s=o.map((e=>function*(e){const{startingBlock:t,relationPropertyIds:o,receiver:n}=e,i=new Set,s=[{block:t}];let c=0;for(;;){const e=s.shift();if(!e)break;const{block:t}=e;if(i.has(t.id))continue;i.add(t.id);const d=o.flatMap((e=>{var o;return(0,a().rq)(null===(o=t.properties)||void 0===o?void 0:o[e])}));if(!n.receive(d))return;if(d.length>0){const{recordMap:e}=yield{recordPointers:d};s.push(...r().oA(d.map((t=>{const o=e.getValue(t);if(o&&o.alive)return{block:o}}))))}if(c++,c>l)throw new Error("Reached maximum number of iterations")}}({relationPropertyIds:e,startingBlock:t,receiver:n})));for(;s.length>0;){const e=[];s=s.filter((t=>{const o=i?t.next(i):t.next();return!o.done&&(e.push(o.value),!0)})),e.length>0&&(i=yield{recordPointers:e.flatMap((e=>e.recordPointers))})}}class d{constructor(e){this.blockPointerSet=new(o(617872).Z),this.limit=e}getBlockPointers(){return this.blockPointerSet.valuesArray()}receive(e){return this.blockPointerSet.add(...e),this.blockPointerSet.size<this.limit}}function u(e){return function(e){const{startingBlock:t,relationPropertyIdGroups:o,getRecordValue:n,limit:i}=e,r=new d(i),a=c({startingBlock:t,relationPropertyIdGroups:o,receiver:r});let l=a.next();for(;!l.done;){const e=s().RecordMap.create();for(const t of l.value.recordPointers)e.setValue(t,n(t));l=a.next({recordMap:e})}return r.getBlockPointers()}(e).every((t=>Boolean(e.getRecordValue(t))))}var p=()=>o(788860),m=()=>o(696459),f=()=>o(312446),g=()=>o(233646),v=()=>o(876822),h=()=>o(749826),_=()=>o(826955),b=()=>o(824462),y=()=>o(102182),S=()=>o(269299),w=o(785893);const k=100;function I(e){const{environment:t,store:o}=e;T({environment:t,store:o,change:{type:"date",...e}})}function C(e){const{environment:t,store:o}=e;T({environment:t,store:o,change:{type:"relation",...e}})}const x=new(o(79179).z)(1);function T(e){const{environment:t,store:o,change:a}=e,s=o.getAssociatedCollectionStore();if(!s)return;const l=s.getDatabaseType(),c=s.getSchema(),d=s.getNormalizedDependencyDateShiftingConfig();if(!d)return;const I=s.getFormatStore().getKeyStore("collection_default_arrows_by").getValue();if(!I)return;const C=c[I];if("relation"!==(null==C?void 0:C.type))return;const T=C.property;T&&x.enqueue((()=>async function(e){var t,o;const{environment:a,store:s,dateShiftConfig:l,databaseType:c,blockedByPropertyId:d,blockingPropertyId:I,change:C,collectionSchema:x}=e,T={id:s.id,properties:s.getProperties()},M=null===(t=v().default.state.currentUserSettingsStore)||void 0===t||null===(t=t.getSettings())||void 0===t?void 0:t.locale,P=(0,i().r)();let A,R,B;if("date"===C.type){var E;if(0===r().jV(r().oA([l.date_property,l.end_date_property]),r().oA([C.dateProperty.id,null===(E=C.otherDateProperty)||void 0===E?void 0:E.id])).length)return;const e=new Map;e.set(C.dateProperty.id,C.dateProperty),C.otherDateProperty&&e.set(C.otherDateProperty.id,C.otherDateProperty);const t=t=>{const o=e.get(t);if((0,m().$K)(o))return o;{var n;const e=null===(n=T.properties)||void 0===n?void 0:n[t];return{id:t,oldValue:e,newValue:e}}};A=t(l.date_property),(0,m().$K)(l.end_date_property)&&(R=t(l.end_date_property))}else if("relation"===C.type){if(C.relationPropertyId!==I&&C.relationPropertyId!==d)return;if("preserve_gap"===l.mode)return;A={id:l.date_property,oldValue:void 0,newValue:T.properties[l.date_property]},l.end_date_property&&(R={id:l.end_date_property,oldValue:void 0,newValue:T.properties[l.end_date_property]})}else(0,m().t1)(C);"preserve_gap"===l.mode?B=[[d,I]]:"consume_gap"===l.mode?B=[[d],[I]]:(0,m().t1)(l.mode);u({startingBlock:T,relationPropertyIdGroups:B,limit:k,getRecordValue:s.getRecordValue})?await Promise.resolve():await b().callApi({eventName:"getTransitivePageRelations",environment:a,data:{blockId:T.id,limit:k,relationPropertyIdGroups:B}}).then((()=>{}));const D=(0,n().yu)({block:{id:T.id,properties:{...T.properties,...A.oldValue?{[A.id]:A.oldValue}:{},...null!==(o=R)&&void 0!==o&&o.oldValue?{[R.id]:R.oldValue}:{}}},blockingPropertyId:I,blockedByPropertyId:d,dateProperty:A,endDateProperty:R,getRecordValue:s.getRecordValue,timeZone:P,locale:M,options:l,collectionSchema:x,getRecordRole:s.getRecordRole,includeDeletedRelations:h().default.checkGate({gateName:"relations_show_deleted"}),includeInvalidCollection:h().default.checkGate({gateName:"relations_show_invalid_collection"}),includeNoAccess:h().default.checkGate({gateName:"relations_show_no_access"})}),{operations:U}=D;S().createAndCommit({userAction:"collectionDateActions.handleDependencyDateShifting",environment:a,canUndo:!0,perform:e=>{for(const t of U){const o=(0,_().Kv)(s,t.pointer);S().applyOperation({store:o,operation:t,transaction:e})}}});const F=(0,g().vi)({result:D,databaseType:c});F&&y().oV({label:(0,w.jsx)(p()._H,{...F.message}),right:F.canUndo?(0,w.jsx)(f().ow,{}):void 0})}({environment:t,store:o,dateShiftConfig:d,databaseType:l,blockedByPropertyId:T,blockingPropertyId:I,change:a,collectionSchema:c}))).catch((e=>{console.error(e)}))}},917881:(e,t,o)=>{o.d(t,{gy:()=>y,kQ:()=>_,n7:()=>b,q0:()=>h,qK:()=>w,sf:()=>S});var n=()=>o(532850),i=()=>o(543172),r=()=>o(491927),a=()=>o(932753),s=()=>o(473244),l=()=>o(129338),c=()=>o(109083),d=()=>o(250303),u=()=>o(984871),p=()=>o(366257),m=()=>o(421654),f=()=>o(970105),g=()=>o(269299);function v(e){const{environment:t,collectionStore:o,collectionPointer:n,property:i,name:r,autoRelate:s,limit:l,targetPropertyID:c,connectedRelation:d,transaction:u,hideByDefaultInUnconfiguredViews:p}=e,m={type:"relation",name:r,collection_id:n.id,collection_pointer:n,limit:"1"===l?1:void 0,property:c,version:"v2",autoRelate:s,connectedRelation:d,hideByDefaultInUnconfiguredViews:p};a().xO({environment:t,collectionStore:o,update:{[i]:m},transaction:u})}function h(e){const{environment:t,collectionStore:o,propertySchema:n,targetPropertyID:i,property:r,autoRelate:s,transaction:l}=e;a().xO({environment:t,collectionStore:o,update:{[r]:{...n,autoRelate:s,property:i,version:"v2"}},transaction:l})}function _(e){const{environment:t,collectionStore:o,property:n,transaction:i}=e,r=o.getSchema()[n];r&&"relation"===r.type&&(a().xO({environment:t,collectionStore:o,update:{[n]:null},transaction:i}),a().$N({collectionStore:o,update:{[n]:r},transaction:i}))}function b(e){var t,o;const{environment:n,collectionContextStore:r,collectionStore:a,property:p,propertyName:m,propertyLimit:f,propertyIcon:g,hasInverseRelation:h,inverseName:_,autoRelate:b,intl:y,connectedRelation:S,transaction:w,from:k,analyticsFrom:I,onlyCheckPermissions:C}=e,x=null===(t=c().Z.state.caches[s().he])||void 0===t?void 0:t.inMemoryRecordCache,T=x?null===(o=e.targetCollectionStore)||void 0===o?void 0:o.clone(x):e.targetCollectionStore,M=T.pointer.id===a.id&&Boolean(h)?"separate_property":"same_property",P=l().KV(r,p),A="subitem"===k||void 0,R=function(e){const{environment:t,collectionContextStore:o,property:n,limit:r,collectionPointer:a,selfRelationType:s,oneWay:l,autoRelate:c,connectedRelation:d,transaction:u,hideByDefaultInUnconfiguredViews:p}=e,m=o.collectionStore();if(!m)return;const f=m.getSchema()[n];if(!f)return;const g=a.id===m.id?"same_property"===s?n:(0,i().ZP)():l?void 0:(0,i().ZP)();return v({environment:t,collectionStore:m,collectionPointer:a,property:n,name:f.name,autoRelate:c,limit:r,targetPropertyID:g,connectedRelation:d,transaction:u,hideByDefaultInUnconfiguredViews:p}),g}({environment:n,collectionContextStore:r,property:p,limit:f,collectionPointer:T.pointer,selfRelationType:M,oneWay:!h,autoRelate:b,connectedRelation:S,transaction:w,hideByDefaultInUnconfiguredViews:A});if((null==P?void 0:P.name)!==m&&(u().Bv({collectionStore:a,property:p,name:m,transaction:w}),d().$q({environment:n,collectionContextStore:r,property:p,from:I??"view_settings",action:"rename"})),S&&g&&u().OK({collectionStore:a,property:p,icon:g,transaction:w}),C&&h&&null!=a&&a.canEditCollection()&&R){const e=l().rj({inverseName:_,collectionStore:a,propertySchema:P,intl:y,targetCollectionStore:T,from:k});v({environment:n,collectionStore:T,collectionPointer:a.pointer,property:R,name:e,autoRelate:b,limit:"subitem"===k?"1":"no_limit",targetPropertyID:p,connectedRelation:S,transaction:w,hideByDefaultInUnconfiguredViews:A})}if(h&&l().gZ(T)&&R){const e=l().rj({inverseName:_,collectionStore:a,propertySchema:P,intl:y,targetCollectionStore:T,from:k});v({environment:n,collectionStore:T,collectionPointer:a.pointer,property:R,name:e,autoRelate:b,limit:"subitem"===k?"1":"no_limit",targetPropertyID:p,connectedRelation:S,transaction:w,hideByDefaultInUnconfiguredViews:A})}return{propertyId:p,inverseRelationPropertyId:h?R:void 0}}function y(e){var t;const{environment:o,collectionContextStore:n,property:r,hasInverseRelation:a,inverseName:d,autoRelate:p,intl:m,transaction:f}=e,g=l().KV(n,r);if(!g||"relation"!==g.type)return;const b=null===(t=c().Z.state.caches[s().he])||void 0===t?void 0:t.inMemoryRecordCache;let y=l().ny(n,g);y&&b&&(y=y.clone(b));const S=n.collectionStore();if(!S||!y)return;const w=l().rj({inverseName:d,collectionStore:S,propertySchema:g,intl:m,targetCollectionStore:y});if(a&&!l().OP(n,r,y)){const e=(0,i().ZP)();h({environment:o,collectionStore:S,propertySchema:g,property:r,targetPropertyID:e,autoRelate:p,transaction:f}),v({environment:o,collectionStore:y,collectionPointer:S.pointer,property:e,name:w,autoRelate:p,limit:"no_limit",targetPropertyID:r,transaction:f,hideByDefaultInUnconfiguredViews:void 0})}else if(a){const e=g.property;if(!e)return;u().Bv({collectionStore:y,property:e,name:w,transaction:f}),p&&(u().bL({collectionStore:S,property:r,autoRelate:p,transaction:f}),u().bL({collectionStore:y,property:e,autoRelate:p,transaction:f}))}else{p&&u().bL({collectionStore:S,property:r,autoRelate:p,transaction:f});const e=g.property;if(!e)return;h({environment:o,collectionStore:S,propertySchema:g,property:r,targetPropertyID:y.id===S.id?r:void 0,autoRelate:p,transaction:f}),_({environment:o,collectionStore:y,property:e,transaction:f})}}function S(e){const{store:t,propertyId:o,value:i,environment:r,relatedPageId:a,propertySchema:s,transaction:l,collectionContextStore:c,analyticsData:u,isUnthrottled:m}=e,g=t.getPropertyStore(o),v=n().ow(i);if(f().sO({environment:r,store:g,value:v,transaction:l}),c&&u){var h;const{analyticsFrom:e,isFromBulkActionsToolbar:t}=u;d().rv({environment:r,block_id:a,property:o,property_type:s.type,from:e,collectionContextStore:c,isFromBulkActionsToolbar:t,isUnthrottled:m,integration_id:null===(h=s.connectedRelation)||void 0===h?void 0:h.integration_id,action:"remove"})}p().r({environment:r,store:t,relationPropertyId:o})}function w(e){const{propertyFormat:t,visibility:o,collectionStore:i,property:a,environment:s}=e,c=t.property,d=l().U1({collectionStore:i,property:a}),u=(0,n().pX)(d,c,!o),p={...l().ZI(i)};p[a]||(p[a]={}),p[a].related_properties=u,g().createAndCommit({userAction:"collectionRelationActions.updateRelationPropertyVisibility",environment:s,canUndo:!0,perform:e=>{m().FH({stores:[i],update:{collection_relation_options:p},transaction:e})}}),r().P$(s,{collection_id:i.id,property_id:a,related_property_id:c,visible:!o})}},139224:(e,t,o)=>{o.d(t,{E3:()=>U,FK:()=>L,H4:()=>V,ID:()=>N,NG:()=>E,Ol:()=>H,Qu:()=>D,R0:()=>W,TT:()=>K,Uk:()=>F,YN:()=>G,iN:()=>q,qU:()=>j,r$:()=>B,wl:()=>O,z$:()=>Z,zt:()=>z});o(821057),o(667294);var n=()=>o(492788),i=()=>o(506347),r=()=>o(431595),a=()=>o(35980),s=()=>o(396136),l=()=>o(788860),c=()=>o(839002),d=()=>o(707513),u=()=>o(326966),p=()=>o(932753),m=()=>o(205228),f=()=>o(559729),g=()=>o(429725),v=()=>o(527278),h=()=>o(176691),_=()=>o(308939),b=()=>o(208949),y=()=>o(250303),S=()=>o(824462),w=()=>o(722920),k=()=>o(959137),I=()=>o(308186),C=()=>o(421654),x=()=>o(453999),T=()=>o(102182),M=()=>o(269299),P=()=>o(663366),A=o(785893);const R=(0,l().vU)({copySuccessMessage:{defaultMessage:"Link to view copied to clipboard",id:"database.viewSettings.copyLinkSnackBarItem.title"},chartDataTableName:{defaultMessage:"Data",id:"database.viewSettings.createView.charts.dataTable"}});function B(e){var t;const{collectionContextStore:o,selectViewNameInitial:n,collectionSettingsStore:i,hideSettingsPopup:r,hideSettingsHeader:a,hideDuplicatePropertyOption:s,fromBlockStore:l,ref:c,initialStack:d,closeOnEscape:u=!0}=e,p=o.hasSingleCollection()&&!o.collectionStore()&&"page"!==(null===(t=o.collectionViewStore())||void 0===t?void 0:t.getType());let m;m="collectionSettings"===o.contextType?{type:"databaseSettings"}:p?{type:"createViewSource",existingCollectionStore:void 0,createdCollectionRecordPointerMap:void 0}:{type:"main",selectViewNameInitial:n},i.setState({open:!0,hideSettingsPopup:r,hideSettingsHeader:a,stack:d??[m],fromBlockStore:l,ref:c,hideDuplicatePropertyOption:s,closeOnEscape:u})}function E(e){const{collectionSettingsStore:t}=e;O({collectionSettingsStore:t,item:{type:"createSyncedViewSource"}})}function D(e){const{collectionSettingsStore:t,source:o}=e;O({collectionSettingsStore:t,item:{type:"externalProjectsSyncSettings",source:o}})}function U(e){const{collectionSettingsStore:t}=e;t.setState({...t.state,open:!1,hideSettingsPopup:void 0,hideSettingsHeader:void 0,stack:[],ref:void 0,hideDuplicatePropertyOption:void 0,closeOnEscape:void 0}),_().ZP.setState({..._().ZP.state,flowId:void 0})}function F(e){N({collectionSettingsStore:e,item:{type:"automationCreateSettings",from:b().X(e)}})}function N(e){const{collectionSettingsStore:t,item:o,replaceCurrentItem:n}=e,i=t.state,r=n?i.stack.slice(0,i.stack.length-1):i.stack;t.setState({...i,open:!0,hideSettingsSidebar:!0,stack:[...r,o]})}function V(e){const{collectionSettingsStore:t,item:o,hideSettingsPopup:n}=e,i=t.state;t.setState({...i,open:!0,stack:[...i.stack,o],...void 0!==n?{hideSettingsPopup:n}:{}})}function L(e){const{collectionSettingsStore:t,item:o,ref:n}=e,i=t.state;t.setState({open:!0,stack:[...i.stack.slice(0,i.stack.length-1),o],closeOnEscape:i.closeOnEscape,...void 0!==n?{ref:n}:{}})}function O(e){const{collectionSettingsStore:t,item:o}=e;t.setState({open:!0,stack:[o]})}function Z(e){const{collectionSettingsStore:t,keepPreviousRef:o}=e,n=t.state,i=n.stack.slice(0,n.stack.length-1);0===i.length?U({collectionSettingsStore:t}):t.setState({open:!0,stack:i,...void 0!==n.ref&&o?{ref:n.ref}:{}})}function j(e){const{collectionSettingsStore:t,property:o,formatKey:n,selectNameInitial:i}=e,r=t.state,a=r.stack.findIndex((e=>"property"===e.type));t.setState({open:!0,stack:[...a>=0?r.stack.slice(0,a):r.stack,{type:"property",property:o,formatKey:n,selectNameInitial:i}]})}function K(e){const{environment:t,collectionContextStore:o,collectionViewStore:n,collectionSettingsStore:i,additionalBlocksToDelete:r,from:a}=e,s=n.getType(),u="form_editor"===s,m=(0,c().UZ)(),f=()=>{const e=o.collectionViewStore(),l=o.collectionViewBlockStore(),c=o.isFullScreenStore.state;e&&l&&s&&(M().createAndCommit({userAction:"collectionSettingsActions.handleDeleteCollectionView",environment:t,canUndo:!0,perform:d=>{if(p().dp({collectionViewBlockStore:l,collectionViewStore:n,transaction:d}),U({collectionSettingsStore:i}),e.id===n.id){const e=l.getCollectionViewStores()[0];if(e)p().f8({environment:t,collectionContextStore:o,collectionViewId:e.id,isFullScreen:o.isFullScreenStore.state,isRootChild:o.isRootChildStore.state,isInPeekRenderer:o.isInPeekRendererStore.state});else{if(!o.isEditableHomeCollectionStore.state)throw new Error("Cannot delete last view. Delete database instead.");p().ME({environment:t,collectionContextStore:o,newViewType:"table",transaction:d,skipOpenSettings:o.isInHomeWidgetStore.state}),c||x().Cl({environment:t,blocks:[l],transaction:d})}}r&&P().y8({environment:t,blocks:r,transaction:d}),y().Rc({environment:t,collectionContextStore:o,view_type:s,from:a})}}),m.resolve(!0))};return u?I().vC({showCancel:!0,keepFocus:!1,message:(0,A.jsx)("div",{style:{fontWeight:d().Ue.semibold,fontSize:18},children:(0,A.jsx)(l()._H,{id:"database.formEditSettings.deleteFormModal. essage",defaultMessage:"Permanently delete {viewName}?",values:{viewName:n.getName()}})}),description:(0,A.jsx)(l()._H,{defaultMessage:"Users will no longer be able to submit data through this form. Any data already submitted will remain unaffected",id:"database.formEditSettings.deleteFormModal.text"}),items:[{label:(0,A.jsx)(l()._H,{defaultMessage:"Delete form",id:"database.viewSettings.formDeleteButton.text"}),color:"red",onAccept:()=>{f()}}],innerStyle:{textAlign:"center"},handleCancel:()=>m.resolve(!1)}):void 0===o.collectionStore()?f():I().vC({showCancel:!0,keepFocus:!1,message:(0,A.jsx)(l()._H,{defaultMessage:"Are you sure you want to delete this view?",id:"database.viewSettings.mainTab.deleteViewConfirm.text"}),items:[{label:(0,A.jsx)(l()._H,{defaultMessage:"Delete view",id:"database.viewSettings.deleteButton.text"}),color:"red",onAccept:()=>{f()}}],handleCancel:()=>m.resolve(!1)}),m.promise}function z(e){const{environment:t,collectionContextStore:o,collectionViewStore:i,collectionSettingsStore:r,intl:a,from:s}=e,l=o.isFullScreenStore.state,c=o.isRootChildStore.state,d=o.isInPeekRendererStore.state,u=o.collectionViewBlockStore(),{performResult:m}=M().createAndCommit({userAction:"collectionSettingsActions.newView",environment:t,canUndo:!0,perform:e=>p().tG({environment:t,collectionViewBlockStore:u,collectionViewStore:i,intl:a,transaction:e})});m&&("chart"===m.getType()&&w().Q({environment:t,collectionContextStore:o,collectionViewId:m.id,from:s}),p().f8({environment:t,collectionContextStore:o,collectionViewId:m.id,isFullScreen:l,isRootChild:c,isInPeekRenderer:d}),n().default.afterNextFlush((()=>{B({collectionContextStore:o,collectionSettingsStore:r,selectViewNameInitial:!0})})))}async function H(e){const{environment:t,collectionContextStore:o,collectionViewStore:n}=e,r=o.collectionViewBlockStore();if(!n||!r)return;const a=(0,g().ZP)({store:r,collectionViewId:n.id,fullyQualified:!0,pageVisitSource:i().tY.CopyLink,embedded:!1}),s=await k().F.clipboardActions.load();await s.copyString({environment:t,stringValue:a,copiedMessage:s.clipboardMessages.copiedLinkToClipboard}),T().oV({label:v().Z.formatMessage(R.copySuccessMessage)})}function q(e){const{environment:t,collectionContextStore:o}=e,n=o.normalizedFormatStore.state,i=n.board_columns_by,r=o.collectionViewStore();if(!i||!r)return;const a=!(0,f().h6)(n);M().createAndCommit({userAction:"collectionSettingsActions.handleBoardGroupColorColumnsClick",environment:t,canUndo:!0,perform:e=>{C().FH({stores:[r],update:{board_columns_by:{...i,disableBoardColorColumns:a}},transaction:e})}}),y().wd({environment:t,collectionContextStore:o,action:"toggle_group_color_columns"})}async function W(e){const{environment:t,uri:o,botId:n,collectionId:i,isStale:s,nextSync:c,setNextSync:d}=e;if(!c||Date.now()>c){var p;let e=Date.now()+u().U6;const c=await S().callApi({eventName:"resubscribeExternalCollection",environment:t,data:{botId:n,uri:o,isStale:s,collectionId:i}});if("failed"===c.type&&(0,r().A6)(c.body)&&"rate_limited"===(null===(p=c.body.clientData)||void 0===p?void 0:p.type)){const t=c.body.clientData.retryAfter;t&&(e=Date.now()+t*u().C0),T().oV({label:(0,A.jsx)(l()._H,{id:"database.viewSettings.syncedSourceTab.update.rateLimitError",defaultMessage:"This database was synced recently. You may try again in {time}.",values:{time:(0,h().hH)(Date.now(),e)}})})}if(m().default.isAdminMode)return;a().Z.set({userId:t.currentUser.id,key:`${n}:${o}`,value:e}),d(e)}}function G(e){const{collectionContextStore:t,environment:o}=e,n=t.collectionViewStore(),i=t.collectionViewBlockStore(),r=t.collectionStore(),a=null==n?void 0:n.getType(),l=null==i?void 0:i.getCollectionViewIds(),c=null==i?void 0:i.getSpaceId();i&&r&&"chart"===a&&1===(null==l?void 0:l.length)&&c&&M().createAndCommit({userAction:"CollectionSettingsCreateViewSource.createDataTableForChart",environment:o,canUndo:!0,perform:e=>{p().W9({environment:o,collectionViewBlockStore:i,collectionView:{type:"table",parent_id:i.pointer.id,parent_table:s().iU,alive:!0,name:v().Z.formatMessage(R.chartDataTableName),space_id:c,format:{table_properties:[{property:"title",visible:!0}],table_wrap:!0,hide_linked_collection_name:!0,collection_pointer:i.getCollectionPointer()}},transaction:e})}})}},853292:(e,t,o)=>{o.d(t,{G0:()=>F,Jw:()=>L,K7:()=>N,PW:()=>V});o(821057),o(670560),o(267602),o(916054),o(653476),o(30005),o(241792);var n=()=>o(926724),i=()=>o(659089),r=()=>o(226413),a=()=>o(235484),s=()=>o(799891),l=()=>o(705214),c=()=>o(530980),d=()=>o(396136),u=()=>o(85073),p=()=>o(255933),m=()=>o(306164),f=()=>o(513670),g=()=>o(696459),v=()=>o(110232),h=()=>o(932753),_=()=>o(887430),b=()=>o(544903),y=()=>o(527278),S=()=>o(170075),w=()=>o(876822),k=()=>o(138912),I=()=>o(826955),C=()=>o(250303),x=()=>o(824462),T=()=>o(628191),M=()=>o(984871),P=()=>o(917881),A=()=>o(139224),R=()=>o(450048),B=()=>o(421654),E=()=>o(269299);const D=(0,o(788860).vU)({aiCustomPromptDefaultPropertyName:{id:"collectionSettingsCreatePropertyActions.createProperty",defaultMessage:"Text"}});function U(e){const{environment:t,collectionContextStore:o,collectionUri:n,feature:i,transaction:r,addFeatureFrom:a,createFeatureStartTime:s}=e;if("dependencies"in i)for(const l of i.dependencies)"property"===l.type&&l.collectionUri===n&&C()._H({environment:t,collectionContextStore:o,from:"view_settings",property:l.uri,property_type:l.propertySchema.type,is_suggested_property:!0,feature:{id:l.uri,from:a,type:i.uri}});if("dependencies"in i&&i.dependencies.map((e=>e.type)).every((e=>"property"===e))){const e=o.collectionViewStore(),t=o.getPropertyFormatKey(),n=o.normalizedFormatStore.state;if(t&&e){const o=n[t]||[],a=[...o];i.dependencies.forEach((e=>{const t=o.findIndex((t=>t.property===e.uri));-1===t?a.push({visible:!0,property:e.uri}):a[t]={...o[t],visible:!0}})),B().FH({stores:[e],update:{[t]:a},transaction:r})}}if(void 0!==i.propertyIdCollectionSettingToNavigateTo){const e={type:"property",property:i.propertyIdCollectionSettingToNavigateTo,selectNameInitial:!1,formatKey:o.getPropertyFormatKey()};A().H4({collectionSettingsStore:o.settingsStore,item:e})}r.postSubmitCallbacks.push((e=>{C().mH(t,{collection_uri:i.collectionUri,feature_uri:i.uri,time:Date.now()-s,status:Boolean(e)?"fail":"success"})}))}async function F(e){var t;const{appTemplatesSetupActions:o,appTemplatesSprintBoardActions:r,appConfigs:c}=await b().vF.load(),{environment:f,collectionContextStore:g,feature:h,addFeatureFrom:_}=e,{currentSpaceViewStore:y}=w().default.state,S=g.collectionStore(),C=null==S?void 0:S.getParentBlockStore(),M={},P=e=>{(0,s().log)({level:"error",from:"collectionSettingsCreatePropertyActions",type:"handleCreateNewSuggestedProperty",data:{collectionId:null==S?void 0:S.id,miscDataToConvertToString:{featureUri:h.uri,addFeatureFrom:_,...M,...e}}})};if(!S||!C)return void P({hasCollectionStore:Boolean(S),hasCollectionViewBlockStore:Boolean(C)});if((0,v().EU)(h))return async function(e){const{environment:t,collectionContextStore:o,feature:i,addFeatureFrom:r}=e,{untypedFeaturesSetupActions:a}=await b().vF.load(),s=o.collectionStore(),l=null==s?void 0:s.getParentBlockStore();if(!s||!l)return;const c=Date.now();E().createAndCommit({environment:t,userAction:"collectionSettingsCreatePropertyActions.handleCreateNewUntypedFeature",canUndo:!0,perform:e=>{a.applyUntypedFeature({environment:t,collectionStore:s,collectionViewBlockStore:l,feature:i,transaction:e}),U({environment:t,collectionContextStore:o,collectionUri:n().br,feature:i,transaction:e,addFeatureFrom:r,createFeatureStartTime:c})}})}({environment:f,collectionContextStore:g,feature:h,addFeatureFrom:_});const A=g.collectionViewStore(),D=null==C?void 0:C.getParentStore(),F=null==S||null===(t=S.getFormat())||void 0===t?void 0:t.app_config_uri,N=F&&(0,v().YB)(c(),F);if(M.appConfigUri=N&&N.uri,!D||D.table!==p().bx&&D.table!==d().iU&&D.table!==m().e0||!N)return void P({hasAppParentStore:Boolean(D),appParentStoreTable:null==D?void 0:D.table,appConfigUri:N?N.uri:void 0});const V=S.getSchema(),L=C.getFormat().app_id;M.appId=L;const O=L?await x().callApi({eventName:"getCollectionViewBlocksByAppId",environment:f,data:{spaceId:C.getSpaceId(),appId:L}}):void 0,Z="success"===(null==O?void 0:O.type)&&O.data.result.length?O.data.result.map((e=>I().G.createChildStore(D,{table:d().iU,id:e.blockId,spaceId:C.getSpaceId()}))):[C],j=h.integrationId;if(j){const e=k().default.getIntegrationsAsRecordMap().getValue({table:u().K2,id:j});if(!e||!(0,l().VM)(e))return void P({hasIntegration:Boolean(e)});await R().VP(f,S,e,Boolean(h.canOnlyAdminAuth))}j===a().U9&&V&&0===(0,i().$z)(V).length&&await T().K({environment:f,collectionStore:S});const K=Date.now();E().createAndCommit({environment:f,userAction:"collectionSettingsCreatePropertyActions.handleCreateNewSuggestedProperty",canUndo:!0,perform:e=>{var t;if(!y)return void P({hasCurrentSpaceViewStore:!1});const i=null===(t=S.getFormat())||void 0===t?void 0:t.app_config_uri;if(!i)return void P({hasCollectionUri:!1});const a=o.applyTypedFeatures({environment:f,spaceViewStore:y,appParentStore:D,appUri:N.uri,features:[{type:"simple",featureUri:h.uri}],transaction:e,createOrModify:"modify",appCollectionViewBlockStores:Z});r.createSprintPage({environment:f,spaceViewStore:y,appParentStore:D,transaction:e,blockStores:a,creationEntryPoint:{type:"sprint_relation"}}),"notion://tasks/sub_task_feature"===h.uri&&B().FH({stores:[S],update:{subitem_property:n().Es.SubTaskRelation},transaction:e}),"notion://tasks/task_dependencies_feature"===h.uri&&(B().FH({stores:[S],update:{collection_default_arrows_by:n().Es.BlockingRelation},transaction:e}),A&&B().FH({stores:[A],update:{timeline_arrows_by:{property:n().Es.BlockingRelation}},transaction:e})),U({environment:f,collectionContextStore:g,collectionUri:i,feature:h,transaction:e,addFeatureFrom:_,createFeatureStartTime:K}),e.isEmpty()&&P({isEmptyTransaction:!0})}})}function N(e){let{propertyType:t,collectionContextStore:o,propertyId:n}=e;switch(t){case"ai_custom_prompt":case"ai_summary":case"ai_extract":case"ai_translate":return A().H4({collectionSettingsStore:o.settingsStore,item:{type:"propertyAiAutofill",propertySchema:o.normalizedSchemaStore[n],property:n}});case"ai_keywords":return A().H4({collectionSettingsStore:o.settingsStore,item:{type:"property",property:n,formatKey:o.getPropertyFormatKey()}});default:(0,g().t1)(t)}}function V(e){const{environment:t,collectionContextStore:o,propertyType:n,isSuggestedProperty:i,propertyName:a,selectOptions:s,from:l}=e,c=o.collectionStore(),d=o.collectionViewStore(),u=o.getPropertyFormatKey();if(!c)return;if("relation"===n)return void A().H4({collectionSettingsStore:o.settingsStore,item:{type:"selectRelationSource",property:void 0,formatKey:"collection_page_properties"}});let p=a;"ai_custom_prompt"===n&&(p=y().Z.formatMessage(D.aiCustomPromptDefaultPropertyName));const{performResult:m}=E().createAndCommit({userAction:"collectionSettingsCreatePropertyActions.handleCreateNewStandardProperty",environment:t,canUndo:!0,perform:e=>M().G3({environment:t,collectionStore:c,collectionViewArgs:d&&u?{collectionViewStore:d,format:d.getFormat(),formatKey:u}:void 0,propertyName:p,propertyType:n,selectOptions:s,transaction:e})});(0,r().XU)(n)?N({propertyType:n,propertyId:m,collectionContextStore:o}):A().qU({collectionSettingsStore:o.settingsStore,property:m,formatKey:u,selectNameInitial:!0});const f="view_settings"===l?{feature:{id:m,from:"new_property",type:n}}:{};C()._H({environment:t,collectionContextStore:o,from:l,property_type:(0,r().TN)(n),property:(0,r().XU)(n)?n:void 0,is_suggested_property:i,...f})}async function L(e){const{environment:t,collectionContextStore:o,intl:n,connectedRelationProperty:s,from:l,untypedFeatureArgs:d,propertyGroupId:u,propertyLimit:p}=e,m=o.collectionStore(),v=o.collectionViewStore(),b=o.getPropertyFormatKey();if(!m||!b)return;const y=s.integration.id;(0,a().xR)(y)||await R().VP(t,m,s.integration,Boolean(s.canOnlyAdminAuth));const w=m.getSchema();let k;y===a().U9&&w&&0===(0,i().$z)(w).length&&(k=await T().K({environment:t,collectionStore:m})),E().createAndCommit({environment:t,userAction:"collectionSettingsCreatePropertyActions.handleCreateNewConnectedRelationProperty",canUndo:!0,perform:e=>{k&&M().G3({environment:t,collectionStore:m,collectionViewArgs:v?{collectionViewStore:v,format:v.getFormat(),formatKey:b}:void 0,propertyType:"auto_increment_id",transaction:e,propertyGroupId:u});const i=m.getDeletedSchema(),w=(0,g().qP)(i).map((e=>{let[t,o]=e;if(o&&r().NK(o)&&o.connectedRelation.integration_id===a().U9)return{propertyId:t,propertySchema:o}})).filter(g().$K);if(!f().xb(w)){const{propertyId:n}=w[0],r=(0,_().D8)({deletedSchema:i,property:n});if(!r)throw new Error("Deleted property schema was not found");u&&(0,S().Nk)({collectionStore:m,groupId:u,propertyId:n,transaction:e}),h().xO({environment:t,collectionStore:m,update:r.updateSchema,transaction:e}),h().$N({collectionStore:m,update:r.updateDeletedSchema,transaction:e});const a={type:"property",property:n,formatKey:b};return void A().H4({collectionSettingsStore:o.settingsStore,item:a})}const I=c().kk5.fromIntegration(s.integration),x=R().cf({environment:t,pattern:s.pattern,integration:I,parentCollectionStore:m,transaction:e}),T=M().G3({environment:t,collectionStore:m,collectionViewArgs:v&&b?{collectionViewStore:v,format:v.getFormat(),formatKey:b}:void 0,propertyType:"relation",transaction:e,propertyId:null==d?void 0:d.propertyId});if(P().n7({environment:t,collectionContextStore:o,collectionStore:m,property:T,propertyName:s.name,propertyIcon:s.integration.info.icon,propertyLimit:p??"no_limit",targetCollectionStore:x,hasInverseRelation:!0,autoRelate:void 0,intl:n,connectedRelation:{integration_id:y},transaction:e}),!d){const e={type:"property",property:T,formatKey:b};A().H4({collectionSettingsStore:o.settingsStore,item:e})}C()._H({environment:t,collectionContextStore:o,from:"view_settings",property_type:"relation",integration_id:y,feature:{id:T,from:l,type:`notion://feature/connection_${y}`}})}})}},295274:(e,t,o)=>{o.d(t,{$p:()=>V,PM:()=>A,R5:()=>U,S6:()=>O,Zh:()=>D,nx:()=>E,ob:()=>N});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624);var n=()=>o(156642),i=()=>o(817629),r=()=>o(998411),a=()=>o(81954),s=()=>o(955620),l=()=>o(855741),c=()=>o(134043),d=()=>o(932753),u=()=>o(576808),p=()=>o(872308),m=()=>o(769972),f=()=>o(123927),g=()=>o(527278),v=()=>o(620218),h=()=>o(749826),_=()=>o(346392),b=()=>o(826955),y=()=>o(8101),S=()=>o(308186),w=()=>o(782646),k=()=>o(421654),I=()=>o(282662),C=()=>o(636340),x=()=>o(970105),T=()=>o(940417),M=()=>o(94912),P=()=>o(269299);const A=100,R=(0,o(788860).vU)({duplicateTemplateError:{id:"databaseTemplatePickerActions.duplicateTemplateFailedError.message",defaultMessage:"Duplicate template failed."}});function B(e){const{environment:t,pageStore:o,copiedFromPointer:n,inMemoryRecordCache:s,addCopyName:d,transaction:u,resolveTemplateVariables:v,userAction:y}=e,k=performance.now();u.getUserActionForAnalyticsPurposesOnly()||u.annotateWithUserAction(y);const I=new(b().G)(t,n,{inMemoryRecordCache:s});let M;if(s&&(M=p().loadLocalSubtree(t,{blockId:I.id,inMemoryRecordCache:s,allowCopyCollections:!0,requireFullSubtree:!0,skipTransclusionContainerChildren:!1,allowCopyExternalObjectInstances:!0,includeLegacyTransclusionBlockValues:(0,f().hC)()}).recordMap),M)return p().localDuplicate({environment:t,sourceBlockId:I.id,targetBlockPointer:o.pointer,sourceBlockSubtree:M,targetInMemoryRecordCache:o.inMemoryRecordCache,addCopyName:d,transaction:u,deepCopyTransclusionContainers:!1,resolveTemplateVariables:v,isTemplateInstantiation:!0,preventLegacyTransclusions:(0,f().hC)(),actionStartTimestamp:k}),o;if(F({environment:t,store:o,properties:I.getProperties(),transaction:u}),v&&T().bt({environment:t,store:o,context:{currentUserId:t.currentUser.id,currentTimeZone:(0,r().r)()},transaction:u}),d){const e=o.getBlockTitleStore();x().sO({environment:t,store:e,value:(0,i().e)(e.getValue()),transaction:u})}const P={copied_from:n.id};C().sW({store:o,data:P,transaction:u});const{use_crdt:A,text_clocks:B,text_slice_tree:E,automation_id:D,app_config_uri:U,...N}=I.getFormat(),V={...N,copied_from_pointer:n};if(C().sW({store:o.getFormatStore(),data:V,transaction:u}),I.hasContent()){_().Z.setStatus(o.id,!0);let e=!0,i=0;const s=performance.now(),f=h().default.checkGate({gateName:"enable_server_backed_local_duplicate_for_collection_template_picker"});u.postSubmitCallbacks.push((async h=>{if(h)return S().UW(g().Z.formatMessage(R.duplicateTemplateError)),void _().Z.setStatus(o.id,!1);if(f){const e=I.getSpaceId(),n=o.getSpaceId(),{success:i,transactionPromise:r}=await p().attemptServerBackedLocalDuplicate({environment:t,sourceBlockPointer:{id:I.id,spaceId:I.getSpaceId()},targetBlockStore:o,userAction:u.getUserActionForAnalyticsPurposesOnly()||"",deepCopyTransclusionContainers:!1,convertExternalObjectInstancesToPlaceholders:e!==n,addCopyName:d,resolveTemplateVariables:v,isTemplateInstantiation:!0,recordLimit:250,actionStartTimestamp:k});if(i){_().Z.setStatus(o.id,!1);try{await r}catch(y){_().Z.setStatus(o.id,!0),await b()}return}}async function b(){try{const e=(0,w().Lj)(t,c().u,{sourceBlocks:[{id:n.id,spaceId:(0,a().J)(n.spaceId)}],targetBlocks:[{id:o.id,spaceId:(0,a().J)(o.pointer.spaceId)}],addCopyName:d,appendContentOnly:!0,isTemplateInstantiation:!0,resolveTemplateVariables:!!v&&{currentUserId:t.currentUser.id,currentTimeZone:(0,r().r)()},deepCopyTransclusionContainers:!1,userAction:u.getUserActionForAnalyticsPurposesOnly()});for await(const t of e)if(l().x.isSuccess(t)){t.value.totalBlocks>i&&(i=t.value.totalBlocks)}}catch(y){e=!1}finally{_().Z.setStatus(o.id,!1),(0,m().X)({environment:t,success:e,time:performance.now()-s,user_action:u.getUserActionForAnalyticsPurposesOnly(),is_duplication_local:!1,duplication_size:i})}}await b()}))}return o}function E(e){const{environment:t,collectionStore:o,transaction:i,title:r}=e,a=C().j4({environment:t,type:n().Ti.page,inMemoryRecordCache:o.inMemoryRecordCache,transaction:i,spaceId:o.getTemplatePagesStore().pointer.spaceId,properties:{title:(0,s().TPx)(r||"")}});return C().sW({store:a,data:{is_template:!0},transaction:i}),I().R3({parentStore:o.getTemplatePagesStore(),appendStore:a,transaction:i}),a}function D(e){const{environment:t,collectionStore:o,templateStore:i,transaction:r}=e,a=C().j4({environment:t,type:n().Ti.page,inMemoryRecordCache:i.inMemoryRecordCache,transaction:r,spaceId:o.getTemplatePagesStore().pointer.spaceId});C().sW({store:a,data:{is_template:!0},transaction:r}),I().BE({parentStore:o.getTemplatePagesStore(),afterStore:i,insertStore:a,transaction:r});try{B({environment:t,copiedFromPointer:i.pointer,pageStore:a,addCopyName:!0,transaction:r,resolveTemplateVariables:!1,userAction:"collectionTemplatePickerActions.createCopyOfCollectionTemplate.automation"})}catch(s){S().UW(g().Z.formatMessage(R.duplicateTemplateError))}return a}function U(e){const{collectionStore:t,templateStore:o,transaction:n}=e;I().Od({parentStore:t.getTemplatePagesStore(),childToRemoveStore:o,transaction:n})}function F(e){const{environment:t,store:o,properties:n,transaction:i}=e;u().b({environment:t,store:o,properties:n,transaction:i})}function N(e){const{environment:t,store:o,templateStore:n,title:i,isKeyboard:r,isCreateIn:a,transaction:s,inMemoryRecordCache:l,from:c}=e,d=o.getProperties(),u=o.getFormatStore().getKeyStore("page_icon").getValue(),p=o.getFormatStore().getKeyStore("page_cover").getValue(),m=o.getFormatStore().getKeyStore("page_cover_position").getValue(),f=o.getFileIds(),g=v().default.DO_NOT_USE_markLegacy("rum.initialize_collection_template"),h=B({environment:t,pageStore:o,copiedFromPointer:n.pointer,transaction:s,resolveTemplateVariables:!0,inMemoryRecordCache:l,userAction:"collectionTemplatePickerActions.createCopyOfCollectionTemplate.manual"});if("template"!==i){const e="empty"===i?void 0:i.text;x().sO({environment:t,store:o.getBlockTitleStore(),value:e,transaction:s})}let _=!1;u&&!h.hasIcon()&&(C().sW({store:h.getFormatStore(),data:{page_icon:u},transaction:s}),_=!0);let b=!1;p&&!h.hasCover()&&(C().sW({store:h.getFormatStore(),data:{page_cover:p,page_cover_position:m},transaction:s}),b=!0),(_||b)&&C().sW({store:h,data:{file_ids:f},transaction:s}),F({environment:t,store:o,properties:d,transaction:s}),C().sW({store:o,data:{is_template:null},transaction:s}),k().Wq({environment:t,store:o,isLocked:!1,transaction:s}),0===n.getContentLength()&&M().ls({environment:t,store:o,transaction:s}),v().default.DO_NOT_USE_measureLegacy(g,{environment:t}),y().XQ(t,{template_id:n.id,collection_id:n.getParentId(),is_keyboard:r,is_create_in:a,from:c})}function V(e){const{collectionStore:t,newTemplateIds:o,transaction:n}=e;C().sW({store:t,data:{template_pages:L(t.getTemplatePages(),o)},transaction:n})}function L(e,t){const o=[...t],n=new Set(o),i=new Set,r=[];for(const a of e)if(n.has(a))for(;o.length>0;){const e=o.shift();if(!e)break;if(r.push(e),n.delete(e),i.add(e),e===a)break}else i.has(a)||r.push(a);return r}function O(e){let{environment:t,collectionContextStore:o,collectionViewBlockStore:n,templateStore:i,useCrdt:r,isKeyboard:a,from:s,shouldCoerce:l}=e;P().createAndCommit({userAction:"collectionTemplatePickerActions.createPageFromCollectionTemplate",environment:t,canUndo:!0,perform:e=>{(0,d().NZ)({transaction:e,store:n,collectionContextStore:o,environment:t,shouldCoerce:l,templateStore:i,from:s,isKeyboard:a})}})}},236087:(e,t,o)=>{o.d(t,{Bb:()=>de,Cz:()=>ge,FC:()=>ne,R2:()=>se,VP:()=>pe,W9:()=>fe,YE:()=>ce,cI:()=>le,e2:()=>oe,h5:()=>me,i6:()=>ue,km:()=>ie,rT:()=>te,wA:()=>Y,xr:()=>re});o(821057),o(492176),o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(7961),o(267602),o(653476),o(30005),o(241792),o(228244),o(667294);var n=()=>o(492788),i=()=>o(506347),r=()=>o(926724),a=()=>o(226413),s=()=>o(532850),l=()=>o(396136),c=()=>o(81954),d=()=>o(306164),u=()=>o(426546),p=()=>o(716676),m=()=>o(739021),f=()=>o(163836),g=()=>o(788860),v=()=>o(513670),h=()=>o(696459),_=()=>o(707513),b=()=>o(134043),y=()=>o(47443),S=()=>o(360240),w=()=>o(887430),k=()=>o(577041),I=()=>o(594546),C=()=>o(582835),x=()=>o(487270),T=()=>o(123927),M=()=>o(527278),P=()=>o(129338),A=()=>o(465371),R=()=>o(876822),B=()=>o(148882),E=()=>o(826955),D=()=>o(491927),U=()=>o(250303),F=()=>o(54512),N=()=>o(824462),V=()=>o(384667),L=()=>o(984871),O=()=>o(917881),Z=()=>o(308186),j=()=>o(782646),K=()=>o(421654),z=()=>o(332542),H=()=>o(636340),q=()=>o(531515),W=()=>o(453999),G=()=>o(879952),$=()=>o(269299),Q=o(785893);function Y(e){const{environment:t,transaction:o,blocks:n,action:i}=e,r=(0,w().fm)(n[0]);if(!r)return;const a=r.subitemTreeStore.state;if(!a)return;const s=r.currentSubitemFormatStoreForUiDisplayStore.state;if(!s||!s.property)return;const l=r.collectionViewBlockStore();if(!l)return;const c=new(u().mp)({store:l,pathKey:""},a.map((e=>e)).children),d=function(e,t){const o=new Set(e);let n,i;for(const r of m().JK(t)){if(!o.has(r.value.store)){if(n)return;continue}const e=(0,u().DY)([t],(e=>e===r));if(!e||e.length<2)return;if(n??=e,i=e,o.delete(r.value.store),0===o.size)break}if(n&&i)return f().T.fromNearestCommonAncestor(n,i)}(n,c);if(!d)return;const g=p().o.getIndentOperationsFromTreeRange(d,i),v=new Set,_=[],b="unindentSelf"===i?new Set(g.map((e=>e.target))):new Set;for(const m of g){const{target:e,operation:n}=m,i=(0,u().DY)([c],(t=>t===e));if(void 0===i)return;const a=i[i.length-2];if("indentSelfAndSubtree"===n){if(v.has(a)){v.add(e),_.push(e.value.store);continue}const n=a.children,i=n.indexOf(e);if(0===i)return;const l=n[i-1].value.store;J({environment:t,parentStore:a.value.store,previousSiblingStore:l,targetStore:e.value.store,subitemFormat:s,transaction:o}),_.push(E().G.createChildStore(l,e.value.store.pointer)),te({collectionContextStore:r,pathKey:(0,C().zV)(a.value.pathKey,l)})}else{if("unindentSelf"!==n)break;{var y;if(b.has(a)){b.delete(e),_.push(e.value.store);continue}if(1===i.length)return;const n=null===(y=i[i.length-3])||void 0===y?void 0:y.value.store;X({environment:t,parentStore:a.value.store,grandparentStore:n,targetStore:e.value.store,subitemFormat:s,transaction:o}),_.push(E().G.createChildStore(n&&n.isPageBlock()?n:r.collectionViewBlockStore(),e.value.store.pointer))}}if(p().F.applyMutable(c,m))if("indentSelfAndSubtree"===n)v.add(e);else if("unindentSelf"===n){const t=r.subitemExpandedStore.state,o=a.value.pathKey,n=t.get(o);0===a.children.length&&null!=n&&n.isExpanded&&(t.delete(o),r.subitemExpandedStore.emit()),b.delete(e)}else(0,h().t1)(n)}_&&G().Z5({environment:t,stores:_})}function J(e){const{environment:t,parentStore:o,previousSiblingStore:n,targetStore:i,subitemFormat:r,transaction:a}=e;o.isPageBlock()&&q().Bl({environment:t,sourceStore:o,destStore:i,propertyWithInverse:r,transaction:a}),q().hE({environment:t,sourceStore:n,destStore:i,propertyWithInverse:r,transaction:a,position:{type:"after"}})}function X(e){const{environment:t,parentStore:o,grandparentStore:n,targetStore:i,subitemFormat:r,transaction:a}=e;q().Bl({environment:t,sourceStore:o,destStore:i,propertyWithInverse:r,transaction:a}),n&&n.isPageBlock()&&q().hE({environment:t,sourceStore:n,destStore:i,propertyWithInverse:r,position:{type:"after",after:o.id},transaction:a})}function ee(e){var t,o;const{blocksToDuplicate:n,duplicatedBlocks:i,environment:r,transaction:s,migrateSubitemFormat:l,pageCollectionContextStore:c,originalSubitemSchemas:d}=e;if(n.length!==i.length)throw new Error("Error rebuilding relations. blocksToDuplicate and duplicatedBlocks must be the same length");const u=n.at(0);if(!u)return;const{from:p,to:m}=l||function(e){const t=(0,C().g0)(e);if(!t)throw new Error("Error rebuilding relations");const{subitemFormat:o}=t;return{from:o,to:o}}(u),f=(0,w().fm)(u)||c;if(!f)return;const g=(null===(t=f.collectionStore())||void 0===t?void 0:t.getSchema()[p.property])||(null==d?void 0:d.subitemRelationSchema),h=(null===(o=f.collectionStore())||void 0===o?void 0:o.getSchema()[p.inverse])||(null==d?void 0:d.parentRelationSchema);if(!(g&&h&&(0,a().p_)(g)&&(0,a().p_)(h)))return;const _=new Map(v().$R(n.map((e=>e.id)),i));v().$R(n,i).forEach((e=>{let[t,o]=e;const n=(0,C().CJ)({store:t,subitemFormat:{property:p.property},propertySchema:g}),i=(0,C().xb)({store:t,subitemFormat:p,propertySchema:h});n.forEach((e=>{const t=E().G.createChildStore(o,e),n=_.get(e.id);n&&(q().Bl({environment:r,sourceStore:o,destStore:t,propertyWithInverse:p,transaction:s}),q().hE({environment:r,sourceStore:o,destStore:n,propertyWithInverse:m,transaction:s,position:{type:"after"}}))})),i.forEach((e=>{const t=E().G.createChildStore(o,e);_.get(e.id)&&q().Bl({environment:r,sourceStore:t,destStore:o,propertyWithInverse:p,transaction:s})}))}))}function te(e){const{collectionContextStore:t,pathKey:o}=e,n=t.subitemExpandedStore.state,i=n.get(o);null!=i&&i.isExpanded||(n.set(o,{isExpanded:!0,limit:20}),t.subitemExpandedStore.emit())}function oe(e){const t=(0,w().fm)(e);if(!t)return;const o=t.subitemTreeStore.state,n=(0,u().DY)(o.children,(t=>t.value.store===e));if(!n)return;const i=n.map((e=>e.value.store.pointer)),r=(0,C().Af)(i),a=t.subitemExpandedStore.state,s=a.get(r);s&&s.isExpanded&&(a.delete(r),t.subitemExpandedStore.emit())}function ne(e){var t;const o=(0,w().fm)(e);if(!o)return;const n=o.subitemTreeStore.state,i=(0,u().DY)(n.children,(t=>t.value.store===e));if(!i)return;const r=o.currentSubitemFormatStoreForUiDisplayStore.state;if(!r)return;const a=null===(t=o.collectionStore())||void 0===t?void 0:t.getSchema()[r.property];if(!a||"relation"!==a.type)return;if(0===(0,C().CJ)({store:e,subitemFormat:r,propertySchema:a}).length)return;const s=i.map((e=>e.value.store.pointer));te({collectionContextStore:o,pathKey:(0,C().Af)(s)})}function ie(e){var t;const{collectionContextStore:o,relationPropertyId:n,transaction:i,environment:a}=e,s=o.collectionStore();if(!s)return;const l=n?s.getSchema()[n]:void 0,c="relation"===(null==l?void 0:l.type)&&l.property&&"relation"===(null===(t=s.getSchema()[l.property])||void 0===t?void 0:t.type)?l.property:void 0,d=s.getFormat().subitem_property&&n?"collectionViewSubitemActions.changeSubitemProperty":s.getFormat().subitem_property?"collectionViewSubitemActions.turnOffSubitems":"collectionViewSubitemActions.turnOnSubitems";K().FH({stores:[s],update:{subitem_property:n,...s.getFormat().app_config_uri===r().Ym?{app_uri_map:{...s.getFormat().app_uri_map?s.getFormat().app_uri_map:{},[r().Es.SubTaskRelation]:n,[r().Es.ParentTaskRelation]:c}}:{}},transaction:i}),I().K4(a,"update_subitem_property",{userAction:d})}async function re(e){const{environment:t,blocks:o,options:n}=e;if(o.some((e=>!e.isPageBlock())))return[];const i=v().Ps(o);if(!i)return[];const r=e.collectionContextStore??(0,w().fm)(i);if(!r)return[];const s=r.collectionStore();if(!s)return[];const l=r.currentSubitemFormatStoreForCollectionStore.state,c=r.normalizedSchemaStore.state,d=(null==l?void 0:l.inverse)&&c[l.inverse];if(!d||!(0,a().p_)(d))return[];const u=d.property;if(!u)return[];const p=s.id,m=s.getSpaceId();if(!o.some((e=>(0,C().CJ)({store:e,subitemFormat:l,propertySchema:d}).length>0)))return[];await B().transactionQueue.drain();const f=await N().callApi({eventName:"getSubitems",environment:t,data:{collection:{id:p,spaceId:m},blocks:o.map((e=>({id:e.id,spaceId:m}))),childRelationProperty:u,canEdit:null==n?void 0:n.canEdit}});return"failed"===f.type?[]:f.data.blocks.map((e=>E().G.createChildStore(s,{table:"block",...e})))}function ae(e){const t=v().Ps(e);if(!t)return[];const o=(0,w().fm)(t);if(!o)return[];const n=o.collectionStore(),i=o.collectionViewBlockStore();if(!n||!i)return[];const r=o.currentSubitemFormatStoreForCollectionStore.state,s=o.normalizedSchemaStore.state,l=(null==r?void 0:r.inverse)&&s[r.inverse];if(!l||!(0,a().p_)(l))return[];if(!l.property)return[];const c=new Set(e.map((e=>e.id)));let d=e;const u=[];for(;d.length>0;){const e=v().xH(d.map((e=>(0,C().CJ)({store:e,subitemFormat:r,propertySchema:l})))).filter((e=>!c.has(e.id))).map((e=>E().G.createChildStore(i,e)));for(const t of e)c.add(t.id);u.push(...e),d=e}return u}function se(e){let{environment:t,blocks:o,recordMaps:n,analyticsFrom:i,transaction:r,migrateSubitemFormat:a,collectionContextStore:s,originalSubitemSchemas:u,duplicateActionsModule:p}=e;const m=o.at(0);if(!m)return[];const f=(e,o)=>{const i=n?n.get(e.id):p.loadLocalSubtree(t,{blockId:e.id,inMemoryRecordCache:e.inMemoryRecordCache,allowCopyCollections:!0,requireFullSubtree:!1,skipTransclusionContainerChildren:!0,allowCopyExternalObjectInstances:!0,skipBlockContent:!0,includeLegacyTransclusionBlockValues:null==o?void 0:o.includeLegacyTransclusionBlockValues}).recordMap;if(!i)throw new Error("Could not find cached copy of block during sub-item duplication.");return i};o.forEach((e=>{var o;const n=e.getModel();if(!n)return[];const{currentSpaceStore:r}=R().default.getState();let a;r&&n.getParentTable()===d().e0&&n.parent_id&&(a=E().zX.createChildStore(r,{table:d().e0,id:n.parent_id})),F().W(t,{from:i??"copy",type:n.type,teamStore:a,is_toggleable:(0,A()._A)(n.type,n.getFormat()),collection_id:e.getAssociatedCollectionId()??(null===(o=e.getCollectionStore())||void 0===o?void 0:o.id),new_page_id:"page"===n.type?e.id:void 0,creating_block_id:e.id})}));const g=(0,T().hC)(),v=o.map((e=>{const o=p.localDuplicate({environment:t,transaction:r,sourceBlockId:e.id,targetBlockPointer:(0,x().Ii)({environment:t,table:l().iU,spaceId:(0,c().J)(e.pointer.spaceId)}),sourceBlockSubtree:f(e,{includeLegacyTransclusionBlockValues:g}),targetInMemoryRecordCache:e.inMemoryRecordCache,addCopyName:!1,deepCopyTransclusionContainers:!m.isTransclusionType(),resolveTemplateVariables:!(m.isInsideTemplate()||m.isInsideFactoryOrDuplicateBlocksAction()),preventLegacyTransclusions:g}).targetBlockStore;return H().sW({store:o,data:{content:[]},transaction:r}),o}));return ee({blocksToDuplicate:o,duplicatedBlocks:v,environment:t,transaction:r,migrateSubitemFormat:a,pageCollectionContextStore:s,originalSubitemSchemas:u}),r.postSubmitCallbacks.push((async e=>{e||await Promise.all(o.map(((e,o)=>j().Lj(t,b().u,{sourceBlocks:[{id:e.pointer.id,spaceId:(0,c().J)(e.pointer.spaceId)}],targetBlocks:[{id:v[o].pointer.id,spaceId:(0,c().J)(v[o].pointer.spaceId)}],addCopyName:!1,appendContentOnly:!0,isTemplateInstantiation:!0,resolveTemplateVariables:!1,deepCopyTransclusionContainers:!1,userAction:"collectionViewSubitemActions.localDuplicateBlocksWithSubitems"}).next().finally((()=>{})))))})),v}function le(e){let{blocks:t,transaction:o,from:n,to:i,environment:r,originAction:a}=e;return t.forEach((e=>{(0,C().dI)({store:e,subitemFormat:{property:n.property},originAction:a}).forEach((t=>{const n=E().G.createChildStore(e,t);q().hE({environment:r,sourceStore:e,destStore:n,propertyWithInverse:i,transaction:o,position:{type:"after"}})}))})),t}async function ce(e){let{droppedStores:t,createdStores:o,collectionStore:n,environment:i,collectionContextStore:r,groupsPointer:a,alreadyMovedToCollection:s,shouldDuplicate:l}=e;const c=t.at(0);if(!c)return;const d=(0,C().g0)(c);let u=(0,C().ko)(n);if(!d)return;const p=await re({environment:i,blocks:t,options:{canEdit:!0}});if(p.length<=0)return;let m=[...p];if(l){const e=await fe({environment:i,blocks:p,analyticsFrom:"subitem_option_drag_drop"});e&&(m=[...e])}$().createAndCommit({userAction:"collectionGroupActions.handleGroupDrop.subitemsDrop",environment:i,canUndo:!0,perform:e=>{if(!u){de({transaction:e,collectionContextStore:r,environment:i})&&(u=(0,C().ko)(n))}for(const t of m)V().mp({environment:i,store:t,collectionStore:n,collectionContextStore:r,groupsPointer:a,shouldCoerce:!0,transaction:e,alreadyMovedToCollection:s});u&&ue({blocksToDuplicate:[...t,...p],duplicatedBlocks:[...o,...m],environment:i,shouldDuplicate:l,originSubitemFormat:d.subitemFormat,destinationSubitemFormat:u,transaction:e,subitemRelationSchema:d.childRelationSchema,relationPropertyCollectionId:n.id})}}),D().RO(i,{draggedTypes:v().oA(m.map((e=>e.getType()))),from:"subitem_drag",asCopy:l,optionalAnalyticsProperties:{collectionContextStore:r}})}function de(e){let{transaction:t,collectionContextStore:o,environment:n}=e;if(o.permissionScopesStore.state.isLocked||!o.permissionScopesStore.state.canEditContent)return;const i=o.collectionStore(),r=o.collectionViewStore();if(!i)return;const a=i.getModel();if(!a)return;const s=o.normalizedSchemaStore.state,l=P().m8(M().Z.getIntl(),{targetCollectionStore:i,isSelfRelation:!0,sourceSchema:s,createUnique:!0,from:"subitem"}),c=P().aI(M().Z.getIntl(),{sourceCollection:a,isSelfRelation:!0,targetCollectionStore:i,createUnique:!0,from:"subitem"}),d=L().G3({environment:n,collectionStore:i,collectionViewArgs:r?{collectionViewStore:r,format:r.getFormat(),formatKey:"collection_page_properties"}:void 0,propertyType:"relation",transaction:t});return O().n7({environment:n,collectionContextStore:o,collectionStore:i,property:d,propertyName:l,targetCollectionStore:i,hasInverseRelation:!0,inverseName:c,autoRelate:{enabled:!1},propertyLimit:"no_limit",intl:M().Z.getIntl(),transaction:t,from:"subitem",analyticsFrom:"nested_subitem_operation",onlyCheckPermissions:!0}),ie({environment:n,collectionContextStore:o,relationPropertyId:d,transaction:t}),U()._H({environment:n,collectionContextStore:o,from:"nested_subitem_operation",property_type:"relation"}),d}function ue(e){let{blocksToDuplicate:t,duplicatedBlocks:o,environment:n,shouldDuplicate:i,originSubitemFormat:r,destinationSubitemFormat:a,transaction:s,subitemRelationSchema:l,relationPropertyCollectionId:c}=e;i?ee({blocksToDuplicate:t,duplicatedBlocks:o,environment:n,transaction:s,migrateSubitemFormat:{from:r,to:a}}):le({blocks:t,transaction:s,from:r,to:a,environment:n})}async function pe(e){var t;let{blocks:o,subitems:n,environment:i,canUndo:r,skipConfirmation:a}=e;const s=n||ae(o),l=[...o,...s];W().zO(l);const c=o.at(0);if(!c)return;const d=(0,w().fm)(c)??(0,C().Ll)(c,i),u=n||await re({environment:i,blocks:o,options:{canEdit:!0},collectionContextStore:d}),p=null==d||null===(t=d.collectionStore())||void 0===t?void 0:t.getFormat().app_config_uri,m=(0,S().sN)(p,!0),f=(0,S().Q_)(p,!0);if(!a&&u.length>0){const e=await function(e){let{itemCount:t,subitemCount:o,newItemName:n,newItemNamePlural:i}=e;return new Promise((e=>{Z().vC({onDismiss(){e(!1)},description:(0,Q.jsx)(g()._H,{id:"deleteSubitems.confirmation.description",defaultMessage:"This will also delete {subitemCount, plural, one {{subitemCount} sub-{newItemName}} other {{subitemCount} sub-{newItemNamePlural}}}.",values:{subitemCount:o,newItemName:n,newItemNamePlural:i}}),message:(0,Q.jsx)("div",{style:{fontWeight:_().Ue.semibold,fontSize:18},children:(0,Q.jsx)(g()._H,{id:"deleteSubitems.confirmation.message",defaultMessage:"Are you sure you want to delete {itemCount, plural, one {this {newItemName}} other {these {newItemNamePlural}}}?",values:{itemCount:t,newItemName:n,newItemNamePlural:i}})}),innerStyle:{textAlign:"center"},showCancel:!0,keepFocus:!0,items:[{label:(0,Q.jsx)(g()._H,{id:"deleteSubitems.confirmation.acceptLabel",defaultMessage:"Delete"}),color:"red",onAccept:()=>{e(!0)}}]})}))}({itemCount:o.length,subitemCount:u.length,newItemName:m,newItemNamePlural:f});if(!e)return W().bj(l),!1}const{serverCommitResult:v}=$().createAndCommit({userAction:"collectionViewSubitemActions.removeBlocksWithSubitems",environment:i,canUndo:r,perform:e=>{W().Cl({environment:i,blocks:o,transaction:e});for(const t of u)H().sW({store:t,data:{alive:!1},transaction:e})}});return await v,!0}async function me(e){let{environment:t,blocks:o,collectionContextStore:n,useCrdt:r}=e;const a=await re({environment:t,blocks:o,collectionContextStore:n,options:{canEdit:!0}});await Promise.all(a.map((e=>e.load())));const s=(0,C().JR)(n);if(!s)throw new Error("Could not find subitem info during duplication");const l=s.subitemFormat,c=await k().j3.duplicateActions.load();$().createAndCommit({userAction:"collectionViewSubitemActions.duplicateBlocksWithSubitemsFromPage",environment:t,canUndo:!0,perform:e=>{const r=se({blocks:[...o,...a],environment:t,transaction:e,migrateSubitemFormat:{from:l,to:l},collectionContextStore:n,analyticsFrom:"subitem_duplication_page_menu",duplicateActionsModule:c}),s=n.collectionStore();if(!s)return;r.map((t=>{z().zw({childStore:t,parentStore:s,transaction:e})}));const d=r.at(0);d&&y()._c({environment:t,store:d,pageVisitSource:i().tY.Duplicate})}})}async function fe(e){var t;let{environment:o,blocks:i,analyticsFrom:r}=e;const a=i.at(0);if(!a)return;const s=(0,C().g0)(a),l=null===(t=(0,w().fm)(a))||void 0===t?void 0:t.collectionViewBlockStore();if(!l||!s)return;const{parentRelationProperty:c,parentRelationSchema:d}=s,u=[...i,...ae(i)];if(W().zO(u),!i.at(-1))return;const p=await re({environment:o,blocks:i,options:{canEdit:!0}});let m=[],f=[];const g=await k().j3.duplicateActions.load();$().createAndCommit({userAction:"actionRegistry.duplicateToSelectionWithSubitems",environment:o,canUndo:!0,perform:e=>{f=se({blocks:[...i,...p],environment:o,transaction:e,analyticsFrom:r,duplicateActionsModule:g}),m=W().BM({environment:o,blocksToInsert:f,target:i,transaction:e,replaceEmptyTextBlock:!1,preventSetSelection:!0})}});const v=(0,C().T2)({blocks:m,parentRelationProperty:c,parentRelationSchema:d,collectionViewBlockStore:l});return n().default.afterNextFlush((()=>{n().default.afterNextFlush((()=>{G().Z5({environment:o,stores:v})}))})),W().bj(u),f}function ge(e){const{environment:t,blockStore:o,collectionStore:n,subitemFormat:i,transaction:r}=e,a=o.getPropertyValue(i.inverse);s().rq(a).forEach((e=>{const a=E().G.createChildStore(n,e);q().Bl({environment:t,sourceStore:o,destStore:a,propertyWithInverse:{property:i.inverse,inverse:i.property},transaction:r})}))}},88142:(e,t,o)=>{o.d(t,{L:()=>f,v:()=>m});o(267602),o(653476),o(241792);var n=()=>o(799891),i=()=>o(217465),r=()=>o(85073),a=()=>o(441764),s=()=>o(513670),l=()=>o(792409),c=()=>o(876822),d=()=>o(666830),u=()=>o(824462),p=()=>o(404811);async function m(e){const{currentSpaceStore:t}=c().default.state;t&&await f({environment:e.environment,spaceId:t.id,force:!0})}async function f(e){const{environment:t,spaceId:o,force:m}=e;if(!t.currentUser.id)return;await c().default.waitUntilRendered();const f=d().Z.state;if(!f.loaded&&!f.loading||f.loaded&&o!==f.spaceId||m){d().Z.setState({...d().Z.state,loading:!0});const e=async()=>{const e=await u().callApi({eventName:"searchIntegrations",environment:t,data:{query:"",type:"compliance",spaceId:o}});return"success"!==e.type?(n().log({level:"error",from:"complianceIntegrationActions",type:"searchIntegrationsError",error:(0,l().Ui)(e.error)}),{status:"rejected",error:e.error}):{status:"resolved",value:e}},c=async()=>{try{return{status:"resolved",value:await p().j({environment:t,spaceId:o})}}catch(e){return n().log({level:"error",from:"complianceIntegrationActions",type:"fetchWebhookSubscriptionsError",error:(0,l().Ui)(e)}),{status:"rejected",error:e}}},[m,f]=await Promise.all([e(),c()]);if("rejected"===m.status||"rejected"===f.status)return;const{value:g}=m,{value:v}=f,h=i().RecordMapWithRole.create(g.data.recordMap),_=i().RecordMapWithRole.create(v.recordMap);d().Z.setState({loaded:!0,loading:!1,spaceId:o,integrations:s().MR(s().oA(g.data.integrationIds.map((e=>h.getModel({table:r().K2,id:e})))).filter(r().Ny),(e=>{let{created_at:t}=e;return t})),webhookSubscriptions:s().oA(v.webhookSubscriptionIds.map((e=>_.getModel({table:a().bf,id:e,spaceId:o}))))})}}},417205:(e,t,o)=>{o.d(t,{b:()=>r,x:()=>a});var n=()=>o(839002),i=()=>o(866893);function r(e){const t=n().UZ();return i().Z.setState({...e,open:!0,onComplete:t.resolve}),t.promise}function a(e){const t=i().Z.state;t.open&&(t.onComplete(e.didConfirm),i().Z.reset())}},450048:(e,t,o)=>{o.d(t,{VP:()=>_,cf:()=>b,ne:()=>y});o(821057),o(670560),o(267602),o(470928),o(241792);var n=()=>o(235484),i=()=>o(752778),r=()=>o(81954),a=()=>o(696459),s=()=>o(763266),l=()=>o(487270),c=()=>o(527278),d=()=>o(338855),u=()=>o(138912),p=()=>o(826955),m=()=>o(824462),f=()=>o(308186),g=()=>o(388915),v=()=>o(636340);const h=(0,o(788860).vU)({authError:{defaultMessage:"Auth failed. Please try again or contact Notion support.",id:"database.viewSettings.propertyTypeSection.connected.authFail"},mobileAdminError:{defaultMessage:"Ask your workspace admin to configure the GitHub (Workspace) app in settings to use this feature.",id:"database.viewSettings.propertyTypeSection.connected.mobileAdminError"},mobileError:{defaultMessage:"Please authorize this integration on the desktop app or a browser.",id:"database.viewSettings.propertyTypeSection.connected.mobileError"}});async function _(e,t,o,n){const i=e.device.isMobile,r=null==t?void 0:t.getSpaceStore();if(!r)return;const a=(0,s().NP)(o.id).length;if(i&&n&&!a){const e=c().Z.formatMessage(h.mobileAdminError);throw f().UW(e),new Error(e)}if(i&&!n&&!a){const e=c().Z.formatMessage(h.mobileError);throw f().UW(e),new Error(e)}if(!a&&n&&r.canAdmin()||!a&&!n)try{await g().hM({environment:e,integration:o,spaceId:r.id,from:"collection_settings_property_type"})}catch(l){const e=c().Z.formatMessage(h.authError);throw f().UW(e),new Error(e)}if(!(0,s().NP)(o.id).length){const e=c().Z.formatMessage(h.authError);throw f().UW(e),new Error(e)}}function b(e){const{environment:t,pattern:o,integration:n,parentCollectionStore:s,transaction:c}=e;if(!o.connected_relation_properties)throw new Error("Cannot create a connected relation collection without properties");const u=new(p().NW)(t,(0,l().Ii)({environment:t,table:i().vF,spaceId:s.pointer.spaceId})),m={};o.connected_relation_sub_schemas&&(0,a().qP)(o.connected_relation_sub_schemas).map((e=>{let[o,n]=e;const a=new(p().NW)(t,(0,l().Ii)({environment:t,table:i().vF,spaceId:s.pointer.spaceId})),d={bot_id:void 0,external_object_id:void 0,uri:o,integration_id:void 0,is_placeholder:void 0,original_url:void 0,domain:void 0,external_schema:n,sync_state:void 0,pattern_name:void 0},f={id:a.id,version:0,space_id:(0,r().J)(s.pointer.spaceId),parent_table:i().vF,parent_id:u.id,alive:!0,format:d,schema:{}};m[o]=a.id,v().sW({store:a,data:f,transaction:c})}));const f={id:u.id,version:0,space_id:(0,r().J)(s.pointer.spaceId),parent_table:i().vF,parent_id:s.id,alive:!0,format:{attributes:[{id:"title",name:"title",type:"inline",format:{type:"title",section:"title"},values:[(0,d().ni)({pattern:o,integration:n})]}],bot_id:void 0,external_object_id:void 0,uri:`notion://user-defined-collection/${n.id}/${o.name}`,integration_id:n.id,is_placeholder:void 0,original_url:void 0,domain:void 0,external_schema:o.connected_relation_properties,sync_state:void 0,pattern_name:o.name,related_external_object_uris_to_instance_ids:m},schema:{}};return v().sW({store:u,data:f,transaction:c}),u}async function y(e){const{environment:t,integrationId:o,connectedRelationPatternName:i,spaceId:r}=e,a=u().default.state;if(!a.loaded)return;const s=a.integrations.find((e=>e.id===o));if(!s)return;const l=s.name,c=i.replace(l??"","").trim().split(" ")[0];if(o!==n().aW){var d;if(!s.info.original_url_patterns)return;const e=s.info.original_url_patterns.find((e=>e.name===c));if(!e||null===(d=e.additional_types)||void 0===d||!d.connectedRelation)return;const t=[],o=null==e?void 0:e.connected_relation_properties;for(const n in o){const e=o[n];null!=e&&e.name&&null!=e&&e.type&&t.push({id:n,name:e.name,isSelected:!1,type:e.type,isCustom:!0})}return t}{var p;const e=u().default.bots.state.find((e=>e.integration_id===o));if(!e)return;const n=e.id,i=await m().callApi({eventName:"describeSalesforceObject",environment:t,data:{spaceId:r,objectName:c,botId:n}});if("success"!==(null==i?void 0:i.type))return;const a=null==i||null===(p=i.data)||void 0===p?void 0:p.properties;if(a){return a.map((e=>{var t;return{id:"Name"===e.name?"title":e.name,name:e.label,isSelected:!1,type:e.type,isCustom:e.custom,options:null===(t=e.picklistValues)||void 0===t?void 0:t.map((e=>({id:e.label,value:e.value})))}}))}}}},81066:(e,t,o)=>{o.d(t,{wk:()=>T,Tz:()=>P,OM:()=>U,qo:()=>F,oG:()=>N,dd:()=>V,Nh:()=>A,a9:()=>B});o(667294);var n=()=>o(506347),i=()=>o(195926),r=()=>o(289525),a=()=>o(534200),s=()=>o(799891),l=()=>o(788860),c=()=>o(792409),d=()=>o(543172),u=()=>o(326966),p=()=>o(824462),m=()=>o(92175),f=o(785893);const g=function(){const e=(0,o(219727).O7)(),t=(0,o(846550).yK)((e=>({buttonContainer:{display:"flex"},buttonText:{color:e.regularInvertedTextColor},plainButton:{paddingLeft:8,paddingRight:8},dots:{width:14,marginLeft:14,fill:e.regularInvertedTextColor}})),[]);return(0,f.jsxs)("div",{style:t.buttonContainer,children:[(0,f.jsx)(m().Z,{onClick:()=>U(e,{necessary:!0,performance:!0,preference:!0,targeting:!0}),children:(0,f.jsx)("b",{style:t.buttonText,children:(0,f.jsx)(l()._H,{...i().ze.acceptAllButtonLabel})})}),(0,f.jsx)(m().Z,{onClick:()=>U(e,{necessary:!0,performance:!1,preference:!1,targeting:!1}),children:(0,f.jsx)("b",{style:t.buttonText,children:(0,f.jsx)(l()._H,{...i().ze.rejectAllButtonLabel})})}),(0,f.jsx)(o(667710).Z,{hasDismissButton:!0,renderOrigin:e=>(0,f.jsx)(m().Z,{style:t.plainButton,...e,children:(0,o(314379).o)(t.dots)})})]})};var v=()=>o(765513),h=()=>o(594546),_=()=>o(274879),b=()=>o(527278),y=()=>o(903591),S=()=>o(876822),w=()=>o(901085),k=()=>o(997489),I=()=>o(584989),C=()=>o(308186);const x=(0,l().vU)({cookieConsentSaveError:{id:"cookieConsent.saveError",defaultMessage:"Cannot record cookie consent, please try again later."}});async function T(e){const{environment:t,onboardingState:o}=e,{inAppCalloutStore:n}=S().default.state;if(await M(t)&&n.getCalloutVisibility("cookie_preference_popup").canShow)return(0,y().g)(t.currentUser.id)>=2?(D(),k().Z.setState({open:!0}),O({environment:t,type:"modal",onboardingState:o}),n.updateCalloutStatus({calloutId:"cookie_preference_popup",visible:!0,validateCanShow:!0}),void h().K4(t,"cookie_modal_shown")):void(I().ZP.state.currentItem||(n.updateCalloutStatus({calloutId:"cookie_preference_popup",visible:!0,validateCanShow:!0}),I().ZP.setState({...I().ZP.state,currentItem:{key:(0,d().ZP)(),label:(0,f.jsx)("div",{children:(0,i().Fd)(P,"snackbar")}),right:(0,f.jsx)(g,{})}}),O({environment:t,type:"snackbar",onboardingState:o})))}async function M(e){if(!(0,_().canSetCookie)(e))return!1;if(!(0,_().canShowCookieUi)(e))return!1;const t=await(0,_().getHasPermissionArgs)(e);return"true"===(null==t?void 0:t.notion_check_cookie_consent)&&(null==t||!t.notion_cookie_consent)}function P(e,t){return(0,f.jsx)(v().Z,{href:e,children:t})}function A(e,t){if("necessary"===t)return;const o={...w().Z.getState().permission};o[t]=!o[t],w().Z.setPermission(o),R(e,o)}const R=o(513670).Ds(((e,t)=>{B(e,t)}),2e3);async function B(e,t){const o=await p().callApi({eventName:"recordCookieConsent",environment:e,data:{id:w().Z.getId(),permission:t,document_version:i().fV,userId:e.currentUser.id}}).catch((e=>{E({type:"recordCookieConsentError",error:(0,c().Ui)(e)})}));if(!o)return void E({type:"recordCookieConsentEmptyResult"});if("success"!==o.type)return void E({type:"recordCookieConsentReturnsNonSuccess",data:{miscDataToConvertToString:{result:o}}});const s=o.data;await w().Z.setCookieConsent(e,s),n().e9();const l=await h().cG(e),d=n().Zk(l);await a().Pv(d);const{permission:u}=s;h().K4(e,"record_cookie_consent",{permission:u,consent_type:(0,r().JT)(u)})}function E(e){let{type:t,data:o,error:n}=e;C().UW(b().Z.formatMessage(x.cookieConsentSaveError)),s().log({level:"error",from:"cookieActions",type:t,data:o,error:n})}function D(){const{inAppCalloutStore:e}=S().default.state;e.updateCalloutStatus({calloutId:"cookie_preference_popup",visible:!1}),I().ZP.setState({...I().ZP.state,currentItem:void 0})}function U(e,t){B(e,t),D(),F()}function F(){C().PV({message:b().Z.formatMessage(i().ze.reloadAfterSaveMessage),onAccept:()=>{window.location.reload()}})}async function N(e){const{currentUserSettingsStore:t}=S().default.state;if(!t)return;await t.load();const o=t.getSettings();if(!o)return;const n=o.cookie_consent;n?(await w().Z.setCookieConsent(e,n),D()):(w().Z.clearCookieConsent(),await M(e)&&w().Z.setPermission(i().cW))}async function V(e){const t=await(0,_().getCookieConsentCookie)(e);if(!t)return;const o=(0,u().dj)(t);o&&w().Z.setState(o)}const L={tracked:!1};function O(e){let{environment:t,type:o,onboardingState:n}=e;if(L.tracked)return;const i={type:o,onboardingStage:null==n?void 0:n.stage};h().K4(t,"cookie_banner_shown",i),L.tracked=!0}},132156:(e,t,o)=>{o.d(t,{Z:()=>T,f:()=>x});o(821057),o(492176),o(670560),o(7961),o(267602),o(731107);var n=()=>o(43165),i=()=>o(559102),r=()=>o(799891),a=()=>o(998411),s=()=>o(431595),l=()=>o(481529),c=()=>o(217465),d=()=>o(494616),u=()=>o(922713),p=()=>o(396136),m=()=>o(989478),f=()=>o(386616),g=()=>o(696459),v=()=>o(205228),h=()=>o(718048),_=()=>o(487270),b=()=>o(876822),y=()=>o(749826),S=()=>o(826955),w=()=>o(54512),k=()=>o(771678),I=()=>o(636340),C=()=>o(269299);function x(e){var t,o,n;const{environment:i,createBlockItem:r,from:a,inMemoryRecordCache:s,transaction:l,selection:d}=e;if(!r.templateRootBlockId||!r.createTemplate)throw new Error("Invalid createBlock item.");const u=(d.length>0?d[0].getSpaceId():void 0)??(null===(t=b().default.state.currentSpaceStore)||void 0===t?void 0:t.id)??(null===(o=b().default.state.mainEditorCurrentBlockStore)||void 0===o?void 0:o.getSpaceId()),m=u?i.idCreator.getSpaceIdCreatorSync(u):void 0,{targetBlockStore:f}=T({environment:i,sourceBlockId:r.templateRootBlockId,targetBlockPointer:(0,_().Ii)({environment:i,table:p().iU,spaceId:u}),sourceBlockSubtree:(0,c().partialRecordMapToRecordMap)(r.createTemplate(i)),targetRecordCache:s,transaction:l,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!1,spaceIdCreator:m});if(null===(n=r.postCreateCallback)||void 0===n||n.call(r,f,i,l),k().jf({store:f,transaction:l}),a&&r.blockType){var g,v;const e=r.collectionViewType,t="full_page"===e,o=0!==d.length?null===(g=d[0])||void 0===g?void 0:g.getParentCollectionIdUpToTwoLevels():void 0;let n,s,l,c;if("chart"===e){var h,y;const e=null===(h=f.getCollectionViewStores())||void 0===h?void 0:h.at(0);n=null==e||null===(y=e.getChartConfig())||void 0===y?void 0:y.type,s=null==e?void 0:e.getChartPlaceholderType()}if("form_editor"===e){var S;const e=null===(S=f.getCollectionViewStores())||void 0===S?void 0:S.at(0),t=null==e?void 0:e.getFormBlockStore();l=null==t?void 0:t.id,c=null==e?void 0:e.id}w().W(i,{from:a,type:r.blockType,collection_id:f.getAssociatedCollectionId()??(null===(v=f.getCollectionStore())||void 0===v?void 0:v.id),view_type:"inline"===e||"full_page"===e?"table":e,is_toggleable:r.isToggleable,automation_id:f.getAutomationId(),new_page_id:"page"===r.blockType?f.id:void 0,creating_block_id:f.id,parent_collection_id:o,is_full_screen:t,chart_type:"placeholder"===n?s:n,is_chart_placeholder:"placeholder"===n,form_id:l,view_id:c})}return f}function T(e){const{environment:t,sourceBlockId:o,sourceBlockSubtree:c,targetBlockPointer:_,targetRecordCache:b,transaction:w,deepCopyTransclusionContainers:k,duplicateDiscussions:x,shallowCopyNavigableBlock:T,resolveTemplateVariables:M,recordPointerMap:P,preventLegacyTransclusions:A,createLegacyTransclusionCopyIndicator:R,spaceIdCreator:B,installationImprint:E,isTemplateInstantiation:D}=e,U=t.currentUser.id,{duplicateRecordMap:F,originalToDuplicate:N}=i().PZ({sourceBlockId:o,targetBlockPointer:_,recordMap:c,recordPointerMap:P,options:{deepCopyTransclusionContainers:k,duplicateDiscussions:x,shallowCopyNavigableBlock:T,resolveTemplateVariables:!!M&&{currentUserId:U,currentTimeZone:(0,a().r)()}},baseUrl:v().default.domainBaseUrl,publicDomainName:v().default.publicDomainName,actor:U?{table:m().KJ,id:U}:void 0,getRecordRole:b.makeGetRecordRoleFn(U),preventLegacyTransclusions:A,createLegacyTransclusionCopyIndicator:R,installationImprint:E,logWarning:e=>{"unmappedContentId"===e.type||("multiReferencedContentIds"===e.type?r().log({level:"warning",from:"createBlockActions",type:"multiReferencedContentIds",data:{ids:e.contentIds}}):(0,g().t1)(e))},spaceIdCreator:B,experimentService:y().default}),V=new(S().G)(t,_,{inMemoryRecordCache:b}),L=V.getSpaceStore(),O=(0,h().WA)(L);w.postPerformAssertions.push((function(){if(w.isLocal)return;if(!V.getParentStore())throw new(s().p8)(`Initialized template was not given a parent before being committed in transaction ${w.getUserActionForAnalyticsPurposesOnly()}`)}));for(const{model:i}of F)if(i)if(i.table===p().iU){var Z,j;const e=i.__IM_SORRY__getValue(),t=S().G.createChildStore(V,i.pointer);D&&i.id===_.id&&e.is_template&&(e.is_template=!1,e.format&&delete e.format.automation_id);const o=n().nY(i.getFormat()),r=n().nY((null===(Z=b.getRecord({pointer:i.pointer,userId:U}))||void 0===Z||null===(Z=Z.value)||void 0===Z?void 0:Z.format)??{}),a=l().op.update({pointer:i.pointer,path:["format"],args:(0,g().Yd)(r).reduce(((e,t)=>t in o&&void 0!==o[t]?e:{...e,[t]:null}),{})}),s=i.pointer.table===_.table&&i.pointer.id===_.id?null===(j=b.getRecord({pointer:i.pointer,userId:U}))||void 0===j?void 0:j.value:void 0;s&&(delete e.created_by_id,delete e.created_by_table,delete e.created_time);const c=s?n().Ry({existingBlock:s,updatedBlock:e}).concat([a]):n().mz({block:e,useCrdt:O});for(const n of c)(0,f().Qf)(n)?C().applyCrdtTextOperation({store:t,operation:n,invertedOperation:void 0,transaction:w}):C().applyOperation({store:t,operation:n,transaction:w})}else{if(D){if(i.table===d().cv&&i.parent_id===_.id)continue;if(i.table===u().Xj&&i.isType("create_page")){const e=i.getConfig();if((null==e?void 0:e.template_page_id)===_.id)continue}}const e=i.__IM_SORRY__getValue(),t=(0,S().Kv)(V,i.pointer);I().sO({store:t,value:e,transaction:w})}return{targetBlockStore:V,originalToDuplicate:N,subtreeSize:F.getSize()}}},593515:(e,t,o)=>{o.d(t,{Do:()=>v,M0:()=>f,W4:()=>g,bA:()=>p,xv:()=>m});o(241792);var n=()=>o(696459),i=()=>o(144321),r=()=>o(61548),a=()=>o(826955),s=()=>o(374469),l=()=>o(491927),c=()=>o(242619),d=()=>o(421654),u=()=>o(269299);function p(e){const{originRect:t}=e;s().Z.reset(),r().Z.reset(),c().xv(),i().Z.setState({isOpen:!0,rect:t})}function m(){i().Z.setState({isOpen:!1})}function f(e){const{format:t,store:o,property:n,visibility:i,transaction:r}=e,a=t.property_visibility;a&&d().FH({stores:[o],update:{property_visibility:Object.values(a||{}).map((e=>({property:e.property,visibility:n===e.property?i:e.visibility})))},transaction:r})}function g(e){const{store:t,pageSection:o,visibility:i,environment:r,format:s}=e,c=s.page_section_visibility;c&&(l().Mz(r,{section:o,visibility:i}),u().createAndCommit({userAction:"customizePageActions.updatePageSectionVisibility",environment:r,canUndo:!0,perform:e=>{d().FH({stores:t instanceof a().NW||t instanceof a().G?[t]:(0,n().t1)(t),update:{page_section_visibility:{...c,[o]:i}},transaction:e})}}))}function v(e){const{store:t,transaction:o,pageSectionFormats:i}=e;d().FH({stores:t instanceof a().NW||t instanceof a().G?[t]:(0,n().t1)(t),update:{collection_page_sections:i},transaction:o})}},531149:(e,t,o)=>{o.d(t,{b:()=>a,x:()=>s});var n=()=>o(170722),i=()=>o(879952),r=()=>o(990966);function a(e,t){i().ZH({environment:e}),r().clear({environment:e}),n().Z.setState({open:!0,...t})}function s(){n().Z.setState({open:!1,originRect:n().Z.state.originRect})}},308186:(e,t,o)=>{o.d(t,{F9:()=>l,Hr:()=>g,K:()=>p,PV:()=>h,RL:()=>f,UW:()=>u,dd:()=>m,fq:()=>c,gt:()=>_,lo:()=>b,vC:()=>d,x2:()=>v});var n=()=>o(431595),i=()=>o(513670),r=()=>o(443269),a=()=>o(527278),s=()=>o(47375);const l=(0,o(788860).vU)({dismissButtonLabel:{defaultMessage:"OK",id:"dialog.dismissButton.label"},acceptButtonLabel:{defaultMessage:"Confirm",id:"dialog.acceptButton.label"},cancelButtonLabel:{defaultMessage:"Cancel",id:"dialog.cancelButton.label"},genericErrorMessage:{id:"dialog.genericErrorMessage",defaultMessage:"An unexpected error occurred"}}),c={title:{fontSize:16,fontWeight:o(707513).Ue.medium}};function d(e){s().default.reset(),s().default.setState({...e,open:!0})}function u(e){return f(e)}function p(e,t){return f(e)}function m(e,t){return f(e)}function f(e){e||(e=a().Z.formatMessage(l.genericErrorMessage)),d({message:e,showCancel:!1,keepFocus:!1,items:[{label:a().Z.formatMessage(l.dismissButtonLabel),onAccept:i().yR}],allowCopy:"string"==typeof e||void 0})}(0,o(947115).exposeDebugValue)("showErrorDialog",p);const g=i().P2(f,3e4);function v(e,t){if(e.offline)return;const o=(0,r().wf)(a().Z.getIntl(),e),s=e.body;d({message:o,debugInfo:(0,n().Rp)(s)&&s.debugMessage?{message:s.debugMessage,messagePrefix:t}:void 0,showCancel:!1,keepFocus:!1,items:[{label:a().Z.formatMessage(l.dismissButtonLabel),onAccept:i().yR}]})}function h(e){const{message:t,onAccept:o,acceptLabel:n,innerStyle:r}=e;d({message:t,showCancel:!1,keepFocus:!1,items:[{label:n||a().Z.formatMessage(l.dismissButtonLabel),onAccept:o||i().yR}],innerStyle:r})}function _(e){return new Promise((t=>{d({showCancel:!1,keepFocus:!1,message:e.message,description:e.description,selectionItems:e.selectionItems,onDismiss(){t({accept:!1})},items:[{label:e.acceptLabel||a().Z.formatMessage(l.acceptButtonLabel),color:"acceptColor"in e?e.acceptColor:"red",className:"notion-dialog-renderer-accept-item",onAccept:e=>{t({accept:!0,selectionResult:e})},buttonType:"acceptButtonType"in e?e.acceptButtonType:"solid"},{label:e.cancelLabel||a().Z.formatMessage(l.cancelButtonLabel),onAccept:e=>{t({accept:!1})},buttonType:"cancelButtonType"in e?e.cancelButtonType:"outline"}],innerStyle:{textAlign:e.textAlign||"center"},icon:e.icon,mode:e.mode})}))}function b(){var e,t;null===(e=(t=s().default.state).onDismiss)||void 0===e||e.call(t),s().default.setState({...s().default.state,open:s().default.state.fatal||!1,onDismiss:void 0})}},64880:(e,t,o)=>{o.d(t,{Wl:()=>_,ji:()=>g,oi:()=>v});var n=()=>o(225339),i=()=>o(743359),r=()=>o(799891),a=()=>o(566232),s=()=>o(839002),l=()=>o(205228),c=()=>o(351972),d=()=>o(661453),u=()=>o(231077),p=()=>o(752127);function m(e){if(!Boolean(e.mobileNative))return!1;const{device:t}=e,o=(0,a().parseMobileAppVersion)(t.mobileAppVersion,t.isAndroid);return!!o&&(t.isIOS?(0,a().isGreaterThanOrEqualToVersion)(o,[0,4,669]):!!t.isAndroid&&(0,a().isGreaterThanOrEqualToVersion)(o,[0,6,735]))}async function f(e,t){return e.device.isElectron||e.device.isMobileNative?await(0,d().a)(e,t,!1):(0,i().g)({...t,baseURL:l().default.domainBaseUrl,currentUserId:e.currentUser&&e.currentUser.id})}async function g(e,t){let o=t.url;const a=e.mobileNative&&m(e),l=n().iS(t.url);l&&(a&&e.mobileNative.showLightBoxV2({url:void 0,downloadName:t.downloadName,type:"file",from:"download",state:"fetching"}),o=(await s().OI(i().nK,f(e,t))).result),o?l&&a?e.mobileNative.showLightBoxV2({url:o,downloadName:t.downloadName,type:"file",from:"download",state:"url_ready"}):l?h({environment:e,url:o}):p().D({environment:e,url:o}):(a&&e.mobileNative.showLightBoxV2({url:void 0,downloadName:t.downloadName,type:"file",from:"download",state:"error"}),r().log({level:"error",from:"routerActions",type:"openFileUrl",data:{message:`failed to get url for ${t.url}`}}))}function v(e,t){const o=e.mobileNative&&m(e);if(n().x$(t)&&o){const o=n().rF({title:void 0,source:t});e.mobileNative.showLightBoxV2({url:void 0,downloadName:o,type:"file",from:"download",state:"fetching"}),e.mobileNative.showLightBoxV2({url:t,downloadName:o,type:"file",from:"download",state:"url_ready"})}else h({environment:e,url:t})}function h(e){const{environment:t,url:o}=e;t.mobileNative?t.mobileNative.openInAppBrowser(o):t.device.isElectron?u().downloadUrl(o):window.location.href=o}async function _(e,t){c().QI(e,{from:"embedded_block_click",type:t.type});let o=t.url;const a=e.mobileNative&&m(e),l=n().iS(t.url);l&&(a&&e.mobileNative.showLightBoxV2({url:void 0,downloadName:t.downloadName,type:t.type,from:t.from,state:"fetching"}),o=(await s().OI(i().nK,f(e,t))).result),o?l&&a?e.mobileNative.showLightBoxV2({url:o,downloadName:t.downloadName,type:t.type,from:t.from,state:"url_ready"}):p().D({environment:e,url:o}):(a&&e.mobileNative.showLightBoxV2({url:void 0,downloadName:t.downloadName,type:t.type,from:t.from,state:"error"}),r().log({level:"error",from:"routerActions",type:"openFileUrl",data:{message:`failed to get url for ${t.url}`}}))}},574089:(e,t,o)=>{o.d(t,{LQ:()=>L,_4:()=>F,cQ:()=>D,eN:()=>O,f$:()=>V,fX:()=>U,td:()=>N});o(670560),o(267602),o(470928),o(30005),o(241792),o(731107);var n=()=>o(156642),i=()=>o(659278),r=()=>o(998411),a=()=>o(956057),s=()=>o(81954),l=()=>o(568017),c=()=>o(513670),d=()=>o(342792),u=()=>o(696459),p=()=>o(406799),m=()=>o(887430),f=()=>o(539410),g=()=>o(205228),v=()=>o(872308),h=()=>o(594546),_=()=>o(247724),b=()=>o(239482),y=()=>o(924390),S=()=>o(677556),w=()=>o(972079),k=()=>o(32969),I=()=>o(960562),C=()=>o(279386),x=()=>o(645805),T=()=>o(965903),M=()=>o(491927),P=()=>o(308186),A=()=>o(453999),R=()=>o(879952),B=()=>o(940417),E=()=>o(990966);function D(e,t){I().default.state.isDragging&&(I().default.reset(),R().$Y({environment:e,phase:T().SelectionPhase.Selected,preventClearEditingText:t}))}function U(e){if(I().default.state.isDragging){const{draggedStores:i,currentDropZone:r}=I().default.state,a=e.optionKey;let s;if(r){var t,o;const e=r.type===I().D.Selectable?k().C.findSelectablesFromStore(r.store):S().Z.findDropTargetsFromKey(r.key);null===(t=e.find((e=>Boolean(e.props.onSelectableDrop))))||void 0===t||null===(t=t.props)||void 0===t||null===(o=t.onSelectableDrop)||void 0===o||o.call(t,{droppedDirection:r.direction,droppedStores:i,duplicate:a}),s=function(e,t){const o=t.props,n="store"in o?o.store:void 0,i=n?w().Z.findOutlinerItemFromStore(n):void 0,r=n&&b().VP(n),a=r&&(0,h().nB)(r),s={...i&&{...a,type:i.type},..."analyticsName"in o&&{dropzone_from:o.analyticsName}};if(!e)return{...s,has_dropzone:!1};let l;switch(e.direction){case I().v.Above:l="above";break;case I().v.Below:l="below";break;case I().v.Left:l="left";break;case I().v.Onto:l="onto";break;case I().v.Right:l="right";break;default:(0,u().t1)(e.direction)}if(e.type===I().D.Selectable)return{...s,has_dropzone:!0,dropzone_type:"selectable",dropzone_block_id:(0,d().cj)(e.store.id),dropzone_direction:l};return{...s,has_dropzone:!0,dropzone_type:"drop_target",dropzone_key:e.key,dropzone_direction:l}}(r,e[0])}const l=i.find((e=>{const t=e.getType();return Boolean(t&&(0,n().S9)(t))})),p=l&&b().VP(l),f=l&&(0,m().fm)(l);M().RO(e.environment,{draggedTypes:c().oA(i.map((e=>e.getType()))),from:e.analyticsFrom,asCopy:a,draggableProps:{draggable_from:e.analyticsFrom,...p&&(0,h().nB)(p)},dropzoneProps:s,optionalAnalyticsProperties:{collectionContextStore:f}}),D(e.environment),e.environment.device.isPhone&&R().ZH({environment:e.environment})}}function F(e){const{environment:t,files:o,analyticsFrom:n}=e;if(I().default.state.isDragging){var i;const e=I().default.state.currentDropZone;let s;var r,a;if(e)s=e.type===I().D.Selectable?k().C.findSelectableFromStore(e.store):S().Z.findDropTargetFromKey(e.key),null===(r=s)||void 0===r||null===(r=r.props)||void 0===r||null===(a=r.onNativeDrop)||void 0===a||a.call(r,{files:o,droppedDirection:e.direction});M().RO(t,{draggedTypes:[],from:n,asCopy:!1}),D(t,null===(i=s)||void 0===i?void 0:i.props.keepTextSelectionOnDrop)}}function N(e,t){I().default.state.isDragging&&(E().clear({environment:e}),I().default.setState({...I().default.state,...t}))}function V(e,t){if(I().default.state.isDragging)return!1;{const{startX:o,startY:n,isNativeDrag:i}=t,r=R().aw(t.stores);E().clear({environment:e});const a=k().C.getRectFromStore(r[0]);return I().default.setState({isDragging:!0,startX:o,startY:n,currentX:o,currentY:n,offsetX:o-(a&&a.left||0),offsetY:n-(a&&a.top||0),currentHintDropZones:[],draggedStores:r,isNativeDrag:i,ghostElements:r.map((e=>t.getGhostElement?t.getGhostElement(e):function(e){const{store:t}=e,o=k().C.findSelectablesFromStore(t);return c().oA(o.map((e=>{if(e.props.canSelect){const t=e.getNode();if(t)return O(t)}})))}({store:e})))}),R().$Y({environment:e,phase:T().SelectionPhase.Selected}),x().default.reset(),!0}}function L(e){const{droppedStores:t,transaction:o,environment:i,duplicate:l}=e,c=e.resolveTemplateVariables,d=t.map((e=>{if(!k().C.findSelectableFromStore(e))return e;if(l){const r=!e.isTransclusionType(),[a,l]=v().duplicateBlock({environment:i,stores:[e],addCopyName:(0,y().Z)(e),transaction:o,deepCopyTransclusionContainers:r,targetSpaceId:(0,s().J)(e.pointer.spaceId),resolveTemplateVariables:e.getType()!==n().Ti.factory&&c,baseUrl:g().default.domainBaseUrl,publicDomainName:g().default.publicDomainName,preferDuplicateLocation:"local"}),d=a[0];return l.then((e=>{if("error"===e.status){const o=e.error;p().nr(o)?1===t.length?p().y1({product:o.clientData.metadata.product}):p().qR(i,{product:o.clientData.metadata.product}):P().UW(e.errorMessage)}})),d}return c&&B().bt({environment:i,store:e,context:{currentUserId:i.currentUser.id,currentTimeZone:(0,r().r)()},transaction:o}),A().Od({store:e,transaction:o}),e}));if(d.length>0&&"suggest"===C().MT.getMode(d[0])){const e=f().oG(i,o,d[0]);d.forEach((t=>{f().n1(o,t,{type:"insert",discussionId:e.id,id:a().Il()})})),f().vh({environment:i,transaction:o,discussionStore:e,addModifiedBlockIdsAfter:d.map((e=>e.id))})}return d}function O(e){const t=e.style.transform,o=e.style.transition;e.style.transform="",e.style.transition="";const n=e.getBoundingClientRect();e.style.transform=t,e.style.transition=o;const i=e.cloneNode(!0);!function(e,t){const{firstElementChild:o}=e;if(o&&o.hasAttribute("embed-ghost")){const o=Z(e,[]);if(o){const i=j(e,o),r=j(t,o);if(i&&r)if(i.shadowRoot){const e=i.shadowRoot;let t=null;if(r.createShadowRoot)t=r.createShadowRoot();else if(r.attachShadow)try{t=r.attachShadow({mode:"open"})}catch(n){}t&&(t.innerHTML=e.innerHTML)}else if(!i.src&&i.contentDocument){const e=document.createElement("iframe");e.width=i.offsetWidth,e.height=i.offsetHeight,K(e,r),r.parentElement.replaceChild(e,r),e.onload=t=>{const o=e.contentDocument.children[0],n=i.contentDocument.children[0];K(o,n),o.innerHTML=n.innerHTML}}else r.width=i.offsetWidth,r.height=i.offsetHeight,r.style.backgroundColor=l().ZP.blackWithAlpha(.12),r.style.backgroundImage=null,r.src=""}}}(e,i);const r=getComputedStyle(e);for(let l=0;l<r.length;l++){const e=r[l],t=r.getPropertyValue(e);"app-region"===e&&"none"===t||"-webkit-text-fill-color"!==e&&(i.style[e]=t)}"absolute"!==r.position&&"relative"!==r.position||(i.style.position="",i.style.top="",i.style.left="",i.style.bottom="",i.style.right="");const a=i.querySelectorAll(`.${_().No6}`);for(const l of a)l.remove();i.style.pointerEvents="none";const s=i.querySelectorAll("*");for(const l of s)l.style&&(l.style.pointerEvents="none");return{cloned:i,rect:n}}function Z(e,t){if(e.shadowRoot)return t;if(e instanceof HTMLIFrameElement)return t;{const{firstElementChild:o,nextElementSibling:n}=e;if(o){t.push(0);const e=Z(o,t);if(e)return e;t.pop()}if(n){t[t.length-1]+=1;const e=Z(n,t);if(e)return e}return null}}function j(e,t){return t.reduce(((e,t)=>e&&e.children&&e.children[t]?e.children[t]:null),e)}function K(e,t){i().p4(t.attributes).forEach((t=>{let{name:o,value:n}=t;e.setAttribute(o,n)}))}},819026:(e,t,o)=>{o.d(t,{O$:()=>k,Ui:()=>_,WO:()=>b,cR:()=>S,qN:()=>w,vQ:()=>y});var n=()=>o(741633),i=()=>o(572680),r=()=>o(81954),a=()=>o(916673),s=()=>o(286310),l=()=>o(308186),c=()=>o(231077),d=()=>o(205228),u=()=>o(848643),p=()=>o(201696),m=()=>o(148882),f=()=>o(824462),g=()=>o(528918),v=()=>o(402269);const h=(0,o(788860).vU)({authenticatingWithGoogle:{id:"googleDriveActions.authenticatingWithGoogle.loadingMessage",defaultMessage:"Authenticating with Googleâ€¦"},googleLoginTitle:{defaultMessage:"Google login",id:"googleDriveActions.loginWithGoogleModal.title"}});async function _(e){const{environment:t,store:o,fileId:i,token:a}=e;await m().transactionQueue.awaitRecordTransaction(o.pointer);const c=await f().callApi({eventName:"initializeGoogleDriveBlock",environment:t,data:{block:{id:o.id,spaceId:(0,r().J)(o.pointer.spaceId)},fileId:i,token:a},headers:(0,n().Bb)({spaceId:(0,r().J)(o.pointer.spaceId)})});if("failed"!==c.type)return c.data.file&&s().cV(t,{file_type:c.data.file.mimeType??void 0}),c.data;l().x2(c)}function b(e,t){f().callApi({eventName:"refreshGoogleDriveBlock",environment:e,data:{block:t}})}async function y(e){const t=await f().callApi({eventName:"getGoogleDriveAccounts",environment:e,data:{}});return"success"===t.type&&t.data.accounts?t.data:{accounts:[]}}function S(e,t){const{onSuccess:o,onFailure:n}=t;p().Z.setState({open:!0,onConfirm:async()=>{const t=await w(e);t&&t.token?o(t.token):n&&n()},onDecline:n})}async function w(e){const t=(0,u().eC)(e);let o=(0,i().ZQ)(d().default.domainBaseUrl,{authType:t});if(o=t.redirectToAuth?o:await(0,u().HU)(e,o),e.device.isElectron)return void c().openExternalUrl(o);const n=await v().M(e,{width:610,height:700,url:o,titleMessage:h.googleLoginTitle});if(!n)return;const r=a().Qc(n);return await k(e,r.query.code)}async function k(e,t){if(!t)return;g().j({message:h.authenticatingWithGoogle});const o=await f().callApi({eventName:"authWithGoogleForDrive",environment:e,data:{code:t}});if(g().x(),"failed"!==o.type)return s().L3(e,{integration_name:"google"}),o.data;{const e=o.error;console.error(e),l().x2(o)}}},244540:(e,t,o)=>{o.d(t,{Ej:()=>u,Xt:()=>s,bk:()=>p,cA:()=>d,iE:()=>l,t_:()=>c});o(821057);var n=()=>o(956057),i=()=>o(696459),r=()=>o(279386),a=()=>o(961226);function s(e){const{navigableBlockStore:t,editorModeConfig:o}=e;if(!t.isNavigableBlock())throw new Error("Can only set editor mode on navigable block.");r().MT.setStateForBlock(t.id,o)}function l(e){const{navigableBlockStore:t}=e;if(!t.isNavigableBlock())throw new Error("Can only clear editor mode on navigable block.");r().MT.state&&r().MT.clearStateForBlock(t.id)}function c(e){const{navigableBlockStore:t,mode:o}=e;"default"===o?p(e):"suggest"===o?u(e):(0,r().a0)(o)||"ai_co_editing"===o||(0,i().t1)(o);let n=t;if(!t.isNavigableBlock()){const e=t.getNavigableBlockStore();if(!e)throw new Error("Store doesn't have a navigable block store.");n=e}const a=r().MT.state;r().MT.setState({...a,blockStoreMode:{...a.blockStoreMode,[n.id]:{...a.blockStoreMode[n.id],mode:o}}})}function d(e){const t=r().MT.getMode(e.navigableBlockStore);c({...e,mode:"default"===t?"suggest":"default"})}function u(e){const{environment:t,location:o}=e,i=n().Il();a().VI({environment:t,from:o,suggesting_session_id:i}),r().MT.setState({blockStoreMode:{...r().MT.state.blockStoreMode,[e.navigableBlockStore.id]:{...r().MT.state.blockStoreMode[e.navigableBlockStore.id],startMilliseconds:Date.now(),sessionId:i}}})}function p(e){const{environment:t,location:o}=e,n=r().MT.state.blockStoreMode[e.navigableBlockStore.id];n.sessionId&&n.startMilliseconds&&a().Zv({environment:t,from:o,suggesting_session_id:n.sessionId,duration_ms:Date.now()-n.startMilliseconds}),r().MT.setState({blockStoreMode:{...r().MT.state.blockStoreMode,[e.navigableBlockStore.id]:{...r().MT.state.blockStoreMode[e.navigableBlockStore.id],startMilliseconds:void 0,sessionId:void 0}}})}},231077:(e,t,o)=>{o.r(t),o.d(t,{appUpdateAvailable:()=>q,appUpdateChecking:()=>H,appUpdateError:()=>z,appUpdateFinished:()=>$,appUpdateInstall:()=>Q,appUpdateNotAvailable:()=>W,appUpdateProgress:()=>G,appUpdateReady:()=>K,checkForUpdates:()=>V,clearBrowserHistory:()=>M,clearCookies:()=>ye,clearGoogleAuthCookies:()=>Se,closeGlobalSearchModal:()=>Ve,closeQuickSearch:()=>Ze,closeTab:()=>I,downloadUrl:()=>we,electronApi:()=>f,electronAppFeatures:()=>Pe,electronCurrentTab:()=>S,electronTabs:()=>y,electronUpdateAvailable:()=>O,electronUpdateChecking:()=>L,electronUpdateError:()=>N,electronUpdateNotAvailable:()=>Z,electronUpdateProgress:()=>j,electronUpdateReady:()=>F,fullscreen:()=>X,getCurrentZoom:()=>ne,getDesktopVersion:()=>g,getSubstitutions:()=>pe,handleBackMetaClick:()=>P,handleBackPinnedClick:()=>R,handleForwardMetaClick:()=>A,handleForwardPinnedClick:()=>B,handleTabClicked:()=>b,handleTabHistoryMenu:()=>E,initializeElectron:()=>Te,installElectronUpdate:()=>Y,isActiveTab:()=>De,isMainTabOrWindow:()=>me,isProtocolRegistered:()=>Ce,isRunningUnderArm64Translation:()=>J,isWindowVisible:()=>Ue,navigationReady:()=>xe,newTab:()=>_,onNewWindow:()=>ve,openAppMenu:()=>le,openDevTools:()=>ce,openExternalUrl:()=>x,openGoogleDrivePickerPopup:()=>_e,openInNewTab:()=>v,openInNewTabAfterFlush:()=>h,openInNewWindow:()=>k,openNotificationUrl:()=>T,openNotionAiFromQuickSearch:()=>Ye,openNotionUrl:()=>C,openOauthPopup:()=>he,openPageFromGlobalSearch:()=>Le,openQuickSearchResult:()=>je,openQuickSearchShortcutSetting:()=>Ge,openSearchModalForNewTab:()=>Je,openSearchModalFromQuickSearch:()=>Qe,openTabFromQuickSearch:()=>Oe,performShortcut:()=>tt,quickSearchNotReady:()=>ze,quickSearchReady:()=>Ke,quickSearchRefresh:()=>We,quickSearchRenderCompleted:()=>He,quickSearchSetSearchAssistantMode:()=>qe,quickSearchVisibilityState:()=>$e,refreshAll:()=>Me,setAppStoreState:()=>Ee,setBadge:()=>D,setCloseConfirmationDialogReason:()=>ot,setGlobalShortcutsEnabled:()=>et,setIsMediaActive:()=>Xe,setLogglyData:()=>be,setOverlay:()=>U,setTabBreadcrumbs:()=>ue,setTabColors:()=>ge,setTheme:()=>fe,setUnauthorizedIframeUrls:()=>w,setWindowTitle:()=>de,sidebarState:()=>Ae,subscribeToProtocolUrl:()=>ke,subscribeToSettingsMenuItem:()=>Ie,tabSpacesState:()=>Re,toggleMaximized:()=>se,track:()=>Fe,trackBatched:()=>Ne,windowSidebarState:()=>Be,zoomIn:()=>ie,zoomOut:()=>re,zoomReset:()=>ae});o(821319),o(267602),o(653476),o(241792);var n=()=>o(416593),i=()=>o(799891),r=()=>o(882765),a=()=>o(513670),s=()=>o(792409),l=()=>o(916673),c=()=>o(497065);function d(){const e=function(e){const t=e.match(/Mac OS X (\d+_\d+)/);if(t)return t[1].split("_").map((e=>parseInt(e,10)));return}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator.userAgent);return!!e&&(10===e[0]&&e[1]<15)}var u=()=>o(836842),p=()=>o(140997);let m="lastProtocolUrlDeduplicationId";const f=p().electronApi,g=p().getDesktopVersion;function v(e){const t=l().T1(e.url);f&&(f.openInNewTab?f.openInNewTab(t,Boolean(e.makeTabActive),e.position||"after-children",e.isNewPage,e.initialTitle,e.initialFavicon):f.openInNewWindow(t))}function h(e,t){e.defaultRecordCache.persistedRecordCache?e.defaultRecordCache.persistedRecordCache.flushPendingWrites().then((()=>{v(t)})).catch((()=>{v(t)})):v(t)}function _(e){f&&null!=f&&f.newTab?f.newTab():v({url:"",makeTabActive:!0,position:e?"end":"start"})}function b(e){f&&null!=f&&f.handleTabClicked&&f.handleTabClicked(e)}const y={addListener(e){if(f&&f.electronTabs)return f.electronTabs.addListener(e)}},S={addListener(e){if(f&&f.electronCurrentTab)return f.electronCurrentTab.addListener(e)}},w={addListener(e){if(f&&f.setUnauthorizedIframeUrls)return f.setUnauthorizedIframeUrls.addListener(e)}};function k(e){const t=l().T1(e);null==f||f.openInNewWindow(t)}function I(){f&&f.closeTab&&f.closeTab()}function C(e){let{openInNew:t,url:o,makeTabActive:n,position:i,isNewPage:r}=e;"tab"!==t?"window"!==t||k(o):v({url:o,position:i,makeTabActive:n,isNewPage:r})}async function x(e){if(!f)return!1;return void 0===l().yn(e)?(i().log({level:"warning",from:"electronActions",type:"badUrlInOpenExternalUrlDetected",data:{miscDataToConvertToString:{url:e}}}),!1):await f.openExternalUrl(e)}function T(e,t){null!=f&&f.openNotificationUrl?f.openNotificationUrl(e):c().c4({environment:t,url:e})}function M(){null==f||f.clearBrowserHistory()}function P(){var e;null==f||null===(e=f.navigationHistory)||void 0===e||e.handleBackMetaClick()}function A(){var e;null==f||null===(e=f.navigationHistory)||void 0===e||e.handleForwardMetaClick()}function R(){var e,t;null==f||null===(e=f.navigationHistory)||void 0===e||null===(t=e.handleBackPinnedClick)||void 0===t||t.call(e)}function B(){var e,t;null==f||null===(e=f.navigationHistory)||void 0===e||null===(t=e.handleForwardPinnedClick)||void 0===t||t.call(e)}function E(e,t,o){var n;null==f||null===(n=f.navigationHistory)||void 0===n||n.handleTabHistoryMenu(e,t,o)}function D(e){return null==f?void 0:f.setBadge(e)}function U(e){var t;return null==f||null===(t=f.setOverlay)||void 0===t?void 0:t.call(f,e)}const F={addListener:e=>null==f?void 0:f.updateReady.addListener(e)},N={addListener(e){var t;return null==f||null===(t=f.updateError)||void 0===t?void 0:t.addListener(e)}};function V(){var e;null==f||null===(e=f.checkForUpdates)||void 0===e||e.call(f)}const L={addListener(e){var t;return null==f||null===(t=f.updateChecking)||void 0===t?void 0:t.addListener(e)}},O={addListener(e){var t;return null==f||null===(t=f.updateAvailable)||void 0===t?void 0:t.addListener(e)}},Z={addListener(e){var t;return null==f||null===(t=f.updateNotAvailable)||void 0===t?void 0:t.addListener(e)}},j={addListener(e){var t;return null==f||null===(t=f.updateProgress)||void 0===t?void 0:t.addListener(e)}},K={addListener(e){var t;return null==f||null===(t=f.appUpdateReady)||void 0===t?void 0:t.addListener(e)}},z={addListener(e){var t;return null==f||null===(t=f.appUpdateError)||void 0===t?void 0:t.addListener(e)}},H={addListener(e){var t;return null==f||null===(t=f.appUpdateChecking)||void 0===t?void 0:t.addListener(e)}},q={addListener(e){var t;return null==f||null===(t=f.appUpdateAvailable)||void 0===t?void 0:t.addListener(e)}},W={addListener(e){var t;return null==f||null===(t=f.appUpdateNotAvailable)||void 0===t?void 0:t.addListener(e)}},G={addListener(e){var t;return null==f||null===(t=f.appUpdateProgress)||void 0===t?void 0:t.addListener(e)}},$={addListener(e){var t;return null==f||null===(t=f.appUpdateFinished)||void 0===t?void 0:t.addListener(e)}},Q={addListener(e){var t;return null==f||null===(t=f.appUpdateInstall)||void 0===t?void 0:t.addListener(e)}};function Y(){null==f||f.installUpdate()}function J(){var e;return null==f||null===(e=f.isRunningUnderArm64Translation)||void 0===e?void 0:e.call(f)}const X={get:()=>null==f?void 0:f.fullscreen.get(),addListener:e=>null==f?void 0:f.fullscreen.addListener(e)};function ee(e,t,o){return Math.min(Math.max(e,o),t)}let te,oe=1;function ne(){return oe}function ie(){f&&f.zoom&&(oe+=n().to,f.zoom.set(ee(n().x_,n().A_,oe)))}function re(){f&&f.zoom&&(oe-=n().to,f.zoom.set(ee(n().x_,n().A_,oe)))}function ae(){f&&f.zoom&&(oe=n().lO,f.zoom.set(oe))}function se(){f&&f.toggleMaximized&&f.toggleMaximized()}function le(){f&&f.openAppMenu&&f.openAppMenu()}function ce(){f&&f.openDevTools&&f.openDevTools()}function de(e){f&&f.setWindowTitle&&f.setWindowTitle(e)}function ue(e){f&&f.setTabBreadcrumbs&&f.setTabBreadcrumbs(e)}function pe(){return te||[]}async function me(){return f&&f.isMainTab?f.isMainTab():!f||!f.isMainWindow||f.isMainWindow()}function fe(e){f&&f.setTheme&&f.setTheme(e)}function ge(e){f&&f.setTabColors&&f.setTabColors(e)}function ve(e){f&&f.newWindow&&f.newWindow.addListener(e)}async function he(e){if(f&&f.openOauthPopup)return f.openOauthPopup(e)}async function _e(e){if(f&&f.openGoogleDrivePickerPopup)return f.openGoogleDrivePickerPopup(e)}function be(e){f&&(f.setLoggerData?f.setLoggerData(e):f.setLogglyData&&f.setLogglyData(e))}function ye(){f&&f.clearCookies&&f.clearCookies()}function Se(){f&&f.clearAllCookies&&f.clearAllCookies()}function we(e){f&&f.downloadUrl&&f.downloadUrl(e)}function ke(e){f&&f.onNavigate&&f.onNavigate.addListener(((t,o)=>{if("string"!=typeof o&&o.deduplicationID){const e=o.deduplicationID;if(m===e)return void i().log({level:"warning",from:"electronActions",type:"duplicateOnNavigateObjectDetected"});m=e}e(o)}))}function Ie(e){f&&f.onOpenSettings&&f.onOpenSettings.addListener(((t,o)=>e(o)))}async function Ce(e){return!(!f||!f.isProtocolRegistered)&&f.isProtocolRegistered(e)}function xe(e){f&&f.navigationReady&&f.navigationReady(e)}async function Te(e){const{device:t,electronSqlite:o}=e;if(f){if(await p().getAndCacheDesktopVersionAsync(),/WantsServiceWorker/i.test(navigator.userAgent)&&"serviceWorker"in navigator){const e=(0,u().XG)("single_electron_service_worker_registration"),t=await me();(e||t)&&navigator.serviceWorker.register(`${window.location.origin}/sw.js`,{type:"classic",scope:"/"}).catch((e=>{window.location.hostname.includes("localhost")||i().log({level:"error",from:"electronActions",type:"serviceWorkerRegistrationError",error:(0,s().Ui)(e)})})),navigator.serviceWorker.addEventListener("controllerchange",(()=>{window.location.reload()})),f.relayMessageToServiceWorker&&f.relayMessageToServiceWorker.addListener(((e,t)=>{"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((e=>{var o;null===(o=e.active)||void 0===o||o.postMessage(t)}))})),f.relayMessageFromServiceWorker&&navigator.serviceWorker.addEventListener("message",(e=>{f&&f.relayMessageFromServiceWorker&&f.relayMessageFromServiceWorker(e.data)}))}if(f.zoom&&(oe=await f.zoom.get()),o&&o.sqliteConnection){try{await o.sqliteConnection.ensureMigrated()}catch(n){i().log({level:"error",from:"electronActions",type:"sqliteConnectionEnsureMigratedError",error:(0,s().Ui)(n),data:(0,r().fq)(n,{isBrowser:!1,wasmSqliteStorage:void 0})})}o.sqliteConnection.optimize().catch((e=>{i().log({level:"error",from:"electronActions",type:"sqliteConnectionOptimizeError",error:(0,s().Ui)(e),data:(0,r().fq)(e,{isBrowser:!1,wasmSqliteStorage:void 0})})}))}if(f.getSubstitutions&&t.isElectronMac){const e=await f.getSubstitutions();te=e.filter((e=>e.replace!==e.with)).map((e=>({length:e.replace.length,replace:new RegExp(`\\b${a().hr(e.replace)} $`),with:`${e.with} `})))}t.isElectronMac&&d()&&Pe.setPreference("isAutoUpdaterDisabled",!0)}}function Me(e){f&&f.refreshAll&&f.refreshAll(e.includeFocusedWindow)}const Pe={get(){if(f&&f.electronAppFeatures)return f.electronAppFeatures.get()},setPreference(e,t){var o;f&&null!==(o=f.electronAppFeatures)&&void 0!==o&&o.setPreference&&f.electronAppFeatures.setPreference(e,t)},addListener(e){if(f&&f.electronAppFeatures)return f.electronAppFeatures.addListener(e)}},Ae={set(e){f&&f.sidebarState&&f.sidebarState.set(e)},addSetSidebarOpenListener(e){var t;if(f&&null!==(t=f.sidebarState)&&void 0!==t&&t.addSetSidebarOpenListener)return f.sidebarState.addSetSidebarOpenListener(e)},addToggleListener(e){if(f&&f.sidebarState)return f.sidebarState.addToggleListener(e)}},Re={addListener(e){if(f&&f.tabSpaces&&f.tabSpaces.tabSpacesState)return f.tabSpaces.tabSpacesState.addListener(e)},addToggleMenuListener(e){if(f&&f.tabSpaces&&f.tabSpaces.addToggleMenuOpenListener)return f.tabSpaces.addToggleMenuOpenListener(e)},unsetActiveTabSpace(){f&&f.tabSpaces&&f.tabSpaces.unsetActiveTabSpace&&f.tabSpaces.unsetActiveTabSpace()},setActiveTabSpace(e){f&&f.tabSpaces&&f.tabSpaces.setActiveTabSpace&&f.tabSpaces.setActiveTabSpace(e)},createTabSpace(e){f&&f.tabSpaces&&f.tabSpaces.createTabSpace&&f.tabSpaces.createTabSpace(e)},reorderTabSpaces(e){f&&f.tabSpaces&&f.tabSpaces.reorderTabSpaces&&f.tabSpaces.reorderTabSpaces(e)}},Be={set(e){f&&f.windowSidebarState&&f.windowSidebarState.set(e)},addListener(e){if(f&&f.windowSidebarState)return f.windowSidebarState.addListener(e)}};function Ee(e){f&&f.setAppStoreState&&f.setAppStoreState(e)}const De={get:()=>f&&f.isActiveTab?f.isActiveTab.get():Promise.resolve(!1),addListener(e){if(f&&f.isActiveTab)return f.isActiveTab.addListener(e)}};async function Ue(){return f&&f.windowIsVisible?f.windowIsVisible():"visible"===document.visibilityState}const Fe={addListener(e){if(f&&f.track)return f.track.addListener(e)}},Ne={addListener(e){if(f&&f.trackBatched)return f.trackBatched.addListener(e)}};function Ve(){f&&f.closeGlobalSearchModal&&f.closeGlobalSearchModal()}function Le(e){f&&f.openPageFromGlobalSearch&&f.openPageFromGlobalSearch(e)}function Oe(){f&&f.openTabFromQuickSearch&&f.openTabFromQuickSearch()}function Ze(){f&&f.closeQuickSearch&&f.closeQuickSearch()}function je(e){f&&f.openQuickSearchResult&&f.openQuickSearchResult(e)}function Ke(){f&&f.quickSearchReady&&f.quickSearchReady()}function ze(){f&&f.quickSearchNotReady&&f.quickSearchNotReady()}function He(){f&&f.quickSearchRenderCompleted&&f.quickSearchRenderCompleted()}function qe(e){f&&f.quickSearchSetSearchAssistantMode&&f.quickSearchSetSearchAssistantMode(e)}function We(){f&&f.quickSearchRefresh&&f.quickSearchRefresh()}function Ge(){f&&f.openQuickSearchShortcutSetting&&f.openQuickSearchShortcutSetting()}const $e={isVisible:()=>f&&f.quickSearchVisibilityState?f.quickSearchVisibilityState.isVisible():Promise.resolve(!1),addListener(e){if(f&&f.quickSearchVisibilityState)return f.quickSearchVisibilityState.addListener(e)}},Qe={addListener(e){if(f&&f.openSearchModalFromQuickSearch)return f.openSearchModalFromQuickSearch.addListener(e)}},Ye={addListener(e){if(f&&f.openNotionAiFromQuickSearch)return f.openNotionAiFromQuickSearch.addListener(e)}},Je={addListener(e){if(f&&f.openSearchModalForNewTab)return f.openSearchModalForNewTab.addListener(e)}};function Xe(e){f&&f.setIsMediaActive&&f.setIsMediaActive(e)}function et(e){f&&f.setGlobalShortcutsEnabled&&f.setGlobalShortcutsEnabled(e)}const tt={addListener(e){var t;return null==f||null===(t=f.performShortcut)||void 0===t?void 0:t.addListener(e)}};function ot(e){var t;null==f||null===(t=f.setCloseConfirmationDialogReason)||void 0===t||t.call(f,e)}},50219:(e,t,o)=>{o.d(t,{m:()=>a});var n=()=>o(799891),i=()=>o(916673),r=()=>o(140997);async function a(e){var t;const o=null===(t=r().electronApi??r().electronCalendarApi??r().electronMailApi)||void 0===t?void 0:t.openExternalUrl;if(!o)return!1;const a=i().yn(e);return void 0===a?(n().log({level:"warning",from:"electronSharedActions",type:"badUrlInOpenExternalUrlDetected",data:{miscDataToConvertToString:{url:e}}}),!1):await o(a)}},544607:(e,t,o)=>{o.d(t,{vW:()=>P,z:()=>R,TH:()=>N,I:()=>E,qC:()=>A,qL:()=>U,x1:()=>V,cT:()=>B});o(670560),o(267602),o(653476),o(241792),o(398858),o(461318),o(33228);var n=()=>o(156642),i=()=>o(532850),r=()=>o(455530),a=()=>o(225339),s=()=>o(955620),l=()=>o(788860),c=()=>o(824462),d=()=>o(551771),u=()=>o(205228),p=()=>o(527278),m=()=>o(620218),f=()=>o(472753);const g=new(o(41158).D)({key:"urlTurnedBookmarkToastStatusSetting",namespace:o(149310).$p,important:!0,trackingType:"preference"});var v=()=>o(920991),h=()=>o(351972),_=()=>o(252428),b=()=>o(64880),y=()=>o(426102),S=()=>o(421654),w=()=>o(762478),k=()=>o(636340),I=()=>o(102182),C=()=>o(970105),x=()=>o(269299),T=()=>o(109757);const M=(0,l().vU)({urlTurnedBookmark:{id:"action.urlTurnedBookmark.snackBarMessage",defaultMessage:"Pasted url is not embeddable, turned to bookmark instead!"}});let P=function(e){return e[e.Page=0]="Page",e[e.PageComment=1]="PageComment",e[e.SidebarComment=2]="SidebarComment",e}({});function A(e){return e===P.PageComment||e===P.SidebarComment}function R(e){const{environment:t,files:o,inMemoryRecordCache:n,transaction:i,pageWidth:r,ignoreOversizedFiles:a,spaceId:s}=e;return o.filter((e=>{if(a){if(!T().Q7({environment:t,file:e,bypassFreeFileUploadLimitCheck:!1}))return T().A3(t),!1}return!0})).map((e=>{if(e.type&&(e.type.startsWith("image")||e.type.startsWith("video")||e.type.startsWith("audio"))&&!e.type.includes("photoshop")){const o=k().j4({environment:t,type:"embed",inMemoryRecordCache:n,transaction:i,spaceId:s});return i.postSubmitCallbacks.push((n=>{n||B({environment:t,store:o,file:e,pageWidth:r,preferredType:void 0})})),o}{const o=k().j4({environment:t,type:"file",inMemoryRecordCache:n,transaction:i,spaceId:s});return i.postSubmitCallbacks.push((n=>{n||y().c({environment:t,store:o,file:e})})),o}}))}function B(e){const{environment:t,store:o,file:n,pageWidth:i,preferredType:a}=e,s=v().default.getBlockKey(o.id);let l;w().Z(),T().cT({environment:t,file:n,bucket:"secure",record:o.pointer,reportRichUploadMetrics:!0,onStart:e=>{if(l=m().default.DO_NOT_USE_markLegacy("image_upload"),v().default.setKeyState(s,{progressPercent:0,file:n,name:e.name,size:e.size}),n instanceof File&&n.type.indexOf("image")>=0&&!(0,r().y_)(e.name,"tiff")&&!(0,r().y_)(e.name,"tif")){const e=URL.createObjectURL(n),r=new Image;r.onload=function(){D(t,{store:o,width:r.naturalWidth,height:r.naturalHeight,scale:!0,type:"image",pageWidth:i}),URL.revokeObjectURL(e)},r.src=e}else{const e=(0,r().Dz)({url:n.name||"",baseUrl:u().default.domainBaseUrl,publicDomainName:u().default.publicDomainName,preferredType:a});D(t,{store:o,width:i,type:e,pageWidth:i})}},onProgress:e=>{const t=v().default.getKeyState(s);t&&v().default.setKeyState(s,{...t,progressPercent:e.progressPercent})},onComplete:async e=>{const r=v().default.getKeyState(s);if(r){const c=Boolean(r.dataURL),d=r.name,u=r.size;await E(t,{source:e,store:o,isDataURL:c,pageWidth:i,preferredType:a,name:d,size:u}),n.type.indexOf("image")>=0&&(_().M(t,{blockId:o.id,fileIds:o.getFileIds(),fileSize:n.size,fileType:n.type}),m().default.DO_NOT_USE_measureLegacy(l,{environment:t,data:{success:!0,type:n.type}})),v().default.setKeyState(s,void 0)}},onError:e=>{m().default.DO_NOT_USE_measureLegacy(l,{environment:t,data:{success:!1,type:n.type}}),v().default.setKeyState(s,void 0)},retryWhenOffline:!0,retryImmediatelyAfterFailure:!0})}async function E(e,t){const{store:o,source:i,isDataURL:a,pageWidth:l,preferredType:f,name:v,size:_}=t;let b=a?"image":(0,r().Dz)({url:i,baseUrl:u().default.domainBaseUrl,publicDomainName:u().default.publicDomainName,preferredType:f});const y=function(e,t){const o=/^https?:\/\//i,n=/^https:\/\/[^\/]+\.streamlit\.app/;return"maps"===e?o.test(t)?t.replace(/'/g,""):`https://maps.google.com/maps/search/${encodeURIComponent(t)}`:"embed"===e&&n.test(t)?`${t}?embed=true`:(0,r().x$)(t)}(b,i),{properties:w,type:T,format:P}=await(0,r().Ol)({source:y,type:b,isDataURL:a,pageWidth:l,isMobileDevice:e.device.isMobile,getEmbedData:async t=>{const o=await c().callApi({eventName:"getGenericEmbedBlockData",environment:e,data:t});return"failed"===o.type?void console.error(o.error):o.data},trackEmbedType:t=>h().Jg(e,{embedType:t})});if(b=T,b===n().Ti.bookmark){const n=o;return await d().Ke({environment:e,store:n,url:y,transformTimeout:0}),h().mC(e),function(){if("do_not_prompt"===g.state)return;g.state?"displayed_once"===g.state?g.setState("displayed_twice"):"displayed_twice"===g.state&&g.setState("do_not_prompt"):g.setState("displayed_once");I().oV({label:p().Z.formatMessage(M.urlTurnedBookmark)})}(),void(t.metric&&m().default.measure(t.metric,{environment:e,data:{embedType:b}}))}let A,R;h().Gl(e,{embedType:T}),v&&_&&(A={size:s().TPx(_)},R=s().TPx(v));const{serverCommitResult:B}=x().createAndCommit({userAction:"embedBlockActions.initializeEmbedBlock",environment:e,canUndo:!0,perform:t=>{k().sW({store:o.getPropertiesStore(),data:{...w||{},...A},transaction:t}),R&&C().sO({environment:e,store:o.getBlockTitleStore(),value:R,transaction:t}),S().FH({stores:[o],update:P,transaction:t}),k().sW({store:o,data:{type:b},transaction:t})}});await B,t.metric&&m().default.measure(t.metric,{environment:e,data:{embedType:b}})}function D(e,t){let{store:o,...n}=t;x().createAndCommit({userAction:"embedBlockActions.initializeFormat",environment:e,canUndo:!0,perform:e=>{S().FH({stores:[o],update:(0,r().tj)(n),transaction:e})}})}async function U(e,t){const{store:o,from:r}=t,l=o.getProperties(),c=o.getType(),d=c===n().Ti.bookmark?l.link:l.source,u=i().zB(d),{display_source:p,original_url:m}=o.getFormat(),f=o.isExternalObjectInstanceBlockStore()?m:u||p;if(!f)return;const g=s().QaF(l.title),v=a().rF({title:g,source:f});let h="file";"image"!==c&&"video"!==c||(h=c),await b().Wl(e,{url:f,downloadName:v,type:h,from:r,permissionRecord:o.pointer,download:v.endsWith(".html")||v.endsWith(".htm")})}const F=(0,l().vU)({downloadingImage:{id:"embedBlockActions.downloading.label",defaultMessage:"Downloadingâ€¦"}});async function N(e){const{store:t,environment:o}=e,n=await async function(e){let{store:t,environment:o,calledFrom:n}=e;const i=t.getNavigableBlockStore();if(!i)return;const r=await c().callApi({eventName:"getBlockFileDownloadUrl",environment:o,data:{blockId:t.id,pageBlockId:i.id,meta:{name:n}}});if("success"!==r.type)return;const{url:a,fileName:s}=r.data;return{url:a,fileName:s}}({store:t,environment:o,calledFrom:"downloadSource"});if(!n)return;const{url:i,fileName:r}=n;if(i){let n;h().Uk(o,{url:i,from:"embedBlockActions"}),n=a().iS(i)?b().ji(o,{url:i,download:!0,downloadName:r,permissionRecord:t.pointer}):function(e){const{store:t,environment:o}=e;if(!o.currentUser.id)return Promise.resolve();const n=t.getProperties(),i=s().QaF(null==n?void 0:n.source),r=s().QaF(null==n?void 0:n.caption);return a()._H(i,t.pointer,u().default.domainBaseUrl,o.currentUser.id,r)}(e),I().oV({label:p().Z.formatMessage(F.downloadingImage),durationMs:"keep"}),await n.finally((()=>{I().rN()}))}}function V(e){const{store:t}=e,o=f().R.findBlockFromStoreWithMethod(t,"replace");o&&o.replace()}},295703:(e,t,o)=>{o.d(t,{KT:()=>V,RL:()=>L,f_:()=>N,xv:()=>O});o(267602),o(470928),o(398858),o(461318),o(33228);var n=()=>o(492788),i=()=>o(156642),r=()=>o(455530),a=()=>o(225339),s=()=>o(572680),l=()=>o(396136),c=()=>o(139978),d=()=>o(955620),u=()=>o(513670),p=()=>o(824462),m=()=>o(205228),f=()=>o(223321),g=()=>o(718959),v=()=>o(546634),h=()=>o(505462),_=()=>o(472753),b=()=>o(639832),y=()=>o(876822),S=()=>o(656769),w=()=>o(749826),k=()=>o(543842),I=()=>o(826955),C=()=>o(965903),x=()=>o(439373),T=()=>o(351972),M=()=>o(332079),P=()=>o(551771),A=()=>o(421654),R=()=>o(441530),B=()=>o(636340),E=()=>o(453999),D=()=>o(970105),U=()=>o(269299),F=()=>o(28063);function N(e){const t=e.getRecordStoreAtRootPath();return t instanceof I().G&&void 0!==t.getAssociatedCollectionStore()}function V(e){const{environment:t,textStore:o,url:n,oldTextValue:i,urlSelection:a}=e;if(b().Z.state.open||f().Z.state.open||k().Z.state.open||S().Z.state.open||N(o)&&r().Cm({url:n,baseUrl:m().default.domainBaseUrl,publicDomainName:m().default.publicDomainName}))return;const s=h().get();if(!s)return;const l=h().getRect(s);if(!l)return;const c=()=>{S().Z.setState({open:!0,willOpen:!1,loading:!1,textStore:o,url:n,oldTextValue:i,urlSelection:a,selectionRect:l}),T().el(t,{url:n})},d=w().default.checkGate({gateName:"mobile_embed_menu_cursor_fix"});!t.device.isTablet&&d?(S().Z.setState({open:!1,willOpen:!0,loading:!1}),setTimeout(c,0)):c()}async function L(e){const{environment:t}=e,o=S().Z.state;if(o.open){const{url:b,textStore:w,oldTextValue:k}=o,N=C().default.state.stores,V=N[0];if(!V)return;const L=(0,a().Wv)({source:b,secureFileConfigRootpath:m().default.secureFileConfig.rootPath,secureFileConfigHostname:m().default.secureFileConfig.hostname}),O=L?L.link:b,Z=(0,s().parseRoute)({url:O,baseUrl:m().default.domainBaseUrl,publicDomainName:m().default.publicDomainName,isMobile:t.device.isMobile,protocol:m().default.protocol,currentUrl:window.location.href});if((0,s().iJ)(Z))await U().createAndCommitAsync({environment:t,userAction:"embedMenuActions.embedPageAlias",waitForServerCommit:!1,perform:async i=>{let r;if(D().sO({environment:t,store:w,value:k,transaction:i}),Z.peekViewBlockId){const e=I().G.createChildStore(w,{table:l().iU,id:Z.peekViewBlockId});await e.load(),e.isPageBlock()&&(r=e)}if(!r&&"page"===Z.name&&Z.blockId&&(r=I().G.createChildStore(w,{table:l().iU,id:Z.blockId})),r){const a="page"===Z.name?Z.scrollToBlockId:void 0,s="page"===Z.name?Z.collectionViewId:void 0;if("mention-page"===e.type){const e=r.getRecordModel({id:r.id,table:l().iU});D().lZ({environment:t,editorMode:"default",store:w,selection:{startIndex:o.urlSelection.startIndex,endIndex:o.urlSelection.startIndex},annotation:d().$0A(a??r.id,null==e?void 0:e.space_id),transaction:i,analyticsFrom:"block"})}else if("create-transclusion"===e.type){if(!a)return;M().ry({environment:t,blocks:C().default.state.stores,copiedBlockIds:[a]})}else if(r.isCollectionView()){const e=s?I().Xr.createChildStore(r,{table:c().np,id:s}):void 0;await Promise.all([r.load(),e?e.load():void 0]);const o=e?e.getCollectionStore():r.getCollectionStore();o&&(await o.load(),R().Y_({environment:t,store:V,collectionStore:o,collectionViewStore:e,transaction:i}))}else{const o=V.getParentBlockStore();if(o){const n=x().k({environment:t,parentBlockStore:o,targetStore:r,transaction:i,..."page-preview"===e.type&&{isPagePreview:!0}});E().BM({environment:t,blocksToInsert:[n],target:N,transaction:i,replaceEmptyTextBlock:!0}),"form"===e.type&&(C().default.reset(),T().X0(t,{url:b,type:e.type,form_id:r.id,block_id:n.id}))}}n().default.afterNextFlush((()=>{U().createAndCommit({userAction:"embedMenuActions.accept",environment:t,canUndo:!0,perform:e=>{E().MD({blocks:N,transaction:e})}})}))}}});else if(e.type===i().Ti.bookmark||"teamsInvite"===Z.name){const{performResult:e}=U().createAndCommit({userAction:"embedMenuActions.insertedBlocks",environment:t,canUndo:!0,perform:e=>{var o;D().sO({environment:t,store:w,value:k,transaction:e});const n=B().j4({environment:t,type:i().Ti.bookmark,inMemoryRecordCache:V.inMemoryRecordCache,transaction:e,spaceId:0!==N.length?N[N.length-1].pointer.spaceId:null===(o=(0,g().RM)())||void 0===o?void 0:o.pointer.spaceId}),r=E().BM({environment:t,blocksToInsert:[n],target:N,transaction:e,replaceEmptyTextBlock:!0});return A().FH({stores:[n],transaction:e,update:{bookmark_loading_ttl:Date.now()}}),r}});n().default.afterNextFlush((()=>{U().createAndCommit({userAction:"embedMenuActions.accept",environment:t,canUndo:!0,perform:e=>{E().MD({blocks:N,transaction:e})}})}));const o=e[0];"teamsInvite"===Z.name?await P().Ke({environment:t,store:o,url:b,teamId:Z.teamId}):await P().Ke({environment:t,store:o,url:b})}else if(e.type===i().Ti.drive){const{performResult:e}=U().createAndCommit({userAction:"embedMenuActions.insertedBlocks",environment:t,canUndo:!0,perform:e=>{var o;D().sO({environment:t,store:w,value:k,transaction:e});const n=B().j4({environment:t,type:i().Ti.drive,inMemoryRecordCache:V.inMemoryRecordCache,transaction:e,spaceId:0!==N.length?N[N.length-1].pointer.spaceId:null===(o=(0,g().RM)())||void 0===o?void 0:o.pointer.spaceId});return E().BM({environment:t,blocksToInsert:[n],target:N,transaction:e,replaceEmptyTextBlock:!0})}});n().default.afterNextFlush((()=>{U().createAndCommit({userAction:"embedMenuActions.accept",environment:t,canUndo:!0,perform:e=>{E().MD({blocks:N,transaction:e})}})}));const o=e[0];n().default.afterNextFlush((()=>{const e=_().R.find((e=>e.getBlockStore()===o));e&&e.initializeGoogleDriveBlockFromUrl(b)}))}else if("link-mention"===e.type){var r,f;S().Z.setState({open:!1,willOpen:!1,loading:!0});const e=await p().callApi({eventName:"getDataForLinkMention",environment:t,data:{url:O,spaceId:(null===(r=y().default.state.currentSpaceStore)||void 0===r?void 0:r.id)??(null===(f=y().default.state.mainEditorCurrentBlockStore)||void 0===f?void 0:f.getSpaceId()),source:"link_mention_activate"}});if("success"===e.type){const n=e.data;if("error"in n){const e=d().YCD(d().Wy3({href:b,title:b.includes("mailto:")?b:new URL(b).hostname}));U().createAndCommit({environment:t,userAction:"embedMenuActions.mention",canUndo:!0,perform:n=>{D().pe({environment:t,store:w,selection:{startIndex:o.urlSelection.startIndex,endIndex:o.urlSelection.endIndex},transaction:n}),D().mM({environment:t,store:w,tokens:[e],index:o.urlSelection.startIndex,transaction:n})}}),T().E5(t,{domain:b.includes("mailto:")?b:new URL(b).hostname})}else{var h;const{title:e,description:i,author_name:r,provider_name:a,images:s,favicon_url:l,iframe:c,height:u,padding:p,padding_top:m}=n,f=d().YCD(d().Wy3({href:b,title:e||(a||new URL(b).hostname),description:i,link_author:r,link_provider:a,thumbnail_url:s&&s.length>0?null===(h=s[0])||void 0===h?void 0:h.url:void 0,icon_url:l,iframe_url:b.includes("nytimes.com")?void 0:c,height:u,padding:p,padding_top:m}));U().createAndCommit({environment:t,userAction:"embedMenuActions.mention",canUndo:!0,perform:e=>{D().pe({environment:t,store:w,selection:{startIndex:o.urlSelection.startIndex,endIndex:o.urlSelection.endIndex},transaction:e}),D().mM({environment:t,store:w,tokens:[f],index:o.urlSelection.startIndex,transaction:e})}})}}else{const e=d().YCD(d().Wy3({href:b,title:b.includes("mailto:")?b:new URL(b).hostname}));U().createAndCommit({environment:t,userAction:"embedMenuActions.mention",canUndo:!0,perform:n=>{D().pe({environment:t,store:w,selection:{startIndex:o.urlSelection.startIndex,endIndex:o.urlSelection.endIndex},transaction:n}),D().mM({environment:t,store:w,tokens:[e],index:o.urlSelection.startIndex,transaction:n})}}),T().E5(t,{domain:b.includes("mailto:")?b:new URL(b).hostname})}}else{const{performResult:o}=U().createAndCommit({userAction:"embedMenuActions.insertedBlocks",environment:t,canUndo:!0,perform:e=>{var o;D().sO({environment:t,store:w,value:k,transaction:e});const n=B().j4({environment:t,type:i().Ti.copyIndicator,inMemoryRecordCache:V.inMemoryRecordCache,transaction:e,spaceId:0!==N.length?N[N.length-1].pointer.spaceId:null===(o=(0,g().RM)())||void 0===o?void 0:o.pointer.spaceId});return E().BM({environment:t,blocksToInsert:[n],target:N,transaction:e,replaceEmptyTextBlock:!0})}});n().default.afterNextFlush((()=>{U().createAndCommit({userAction:"embedMenuActions.accept",environment:t,canUndo:!0,perform:e=>{E().MD({blocks:N,transaction:e})}})}));const r=o[0],a=o=>{U().createAndCommit({environment:t,userAction:"embedMenuActions.accept.insertExtractedData",canUndo:!0,perform:t=>{let n;e.type&&"mention-page"!==e.type&&"create-transclusion"!==e.type&&"link-mention"!==e.type&&"page-preview"!==e.type&&"jira-sync"!==e.type?n=e.type:(n=i().Ti.embed,o&&o.media&&("photo"===o.media.type?n=i().Ti.image:"video"===o.media.type&&(n=i().Ti.video))),F().vs({environment:e.environment,block:r,blockType:n,transaction:t})}}),n().default.afterNextFlush((()=>{const e=_().R.find((e=>e.getBlockStore()===r&&u().mf(e.embed)));e&&e.embed(O)}))};v().W4(t,O).then(a)}}O()}function O(){S().Z.setState({open:!1,willOpen:!1,loading:!1})}},220228:(e,t,o)=>{o.d(t,{RL:()=>g,_P:()=>f,jZ:()=>h,xv:()=>v});var n=()=>o(955620),i=()=>o(223321),r=()=>o(191003),a=()=>o(505462),s=()=>o(639832),l=()=>o(656769),c=()=>o(543842),d=()=>o(127519),u=()=>o(571896),p=()=>o(970105),m=()=>o(269299);function f(e){const{environment:t,textStore:o,oldSelection:r,oldTextValue:d}=e,p=n().eeV(o.getValue()||[]),m=r.startIndex;if(":"!==p[m])return;const f=n().gPn(p,m-5,m).join("");if(/[0-9]$/.test(f[f.length-1]))return;if(f.endsWith("http")||f.endsWith("https"))return;if(f.endsWith(":"))return;if(s().Z.state.open||i().Z.state.open||c().Z.state.open||l().Z.state.open)return;if(t.device.isPhone)return;const g=a().get();if(!g)return;const v=a().getRect(g);v&&(i().Z.setState({open:!0,textStore:o,oldTextValue:d,oldSelection:r,selectionRect:v}),u().xu(t))}function g(e){const t=i().Z.state,{environment:o,emoji:n,transaction:r}=e;t.open&&(p().sO({environment:o,store:t.textStore,value:t.oldTextValue,transaction:r}),p().Q0({environment:o,editorMode:"default",store:t.textStore,selection:t.oldSelection,emoji:n,transaction:r}),v())}function v(){i().Z.setState({open:!1})}function h(e){p().N3({direction:"end"});const t=d().default.state;if("editing"!==t.mode)return;const o=(0,r().QY)(t.multiSelection);if(!o)return;let a=!1;if(o.selection.startIndex>0){const e=o.store.getValue()||[],t=n().eeV(e)[o.selection.startIndex-1];/[\s]/g.test(t)||(a=!0)}m().createAndCommit({userAction:"emojiMenuActions.triggerInsertEmojiMenu",environment:e,canUndo:!0,perform:t=>{a?(p().hJ({environment:e,store:o.store,editorMode:"default",string:" ",selection:o.selection,disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:t}),p().hJ({environment:e,store:o.store,editorMode:"default",string:":",selection:{startIndex:o.selection.startIndex+1,endIndex:o.selection.endIndex+1},disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!1,transaction:t})):p().hJ({environment:e,store:o.store,editorMode:"default",string:":",selection:o.selection,disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!1,transaction:t})}});const s=i().Z.state;s.open&&i().Z.setState({...s,showPopupWithEmptyFilter:!0})}},782646:(e,t,o)=>{o.d(t,{GE:()=>s,IX:()=>c,Lj:()=>a,qb:()=>d});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624);var n=()=>o(431595),i=()=>o(824462),r=()=>o(253038);async function*a(e,t,o){const n={task:{eventName:t,request:o}},r=await i().callApi({eventName:"enqueueTask",environment:e,data:n});if("failed"===r.type)yield{error:r.error,taskStatus:"not_started"};else{const{taskId:n}=r.data;c.add(n),yield*s({environment:e,eventName:t,taskId:n,request:o})}}async function*s(e){const{environment:t,eventName:o,taskId:i,request:a}=e;for(;;){const e=await l(i);if("success"===e.state){const n=e.status;(0,r().I)({environment:t,eventName:o,response:n}),yield{value:n,taskStatus:"success"};break}if("failure"===e.state||"dead"===e.state||"timeout_before_execution"===e.state){yield{error:new(n().hm)(e.error||"Something went wrong.",{eventName:o,request:a},e.clientData),taskStatus:"failure"};break}"in_progress"===e.state&&e.status&&(yield{value:e.status,taskStatus:"in_progress"})}}async function l(e){return new Promise(((t,o)=>{d.addOnceListener(e,(e=>{t(e)}))}))}const c=new Set,d=new(o(871663).Z)},198732:(e,t,o)=>{o.d(t,{Wj:()=>g,gt:()=>h,qn:()=>f});o(821057);var n=()=>o(492788),i=()=>o(955620),r=()=>o(696459),a=()=>o(482269),s=()=>o(191003),l=()=>o(505462),c=()=>o(550054),d=()=>o(762557),u=()=>o(127519),p=()=>o(970105),m=()=>o(990966);function f(e){var t;const{environment:o,selectedToken:n,selectionRect:r,analyticsFrom:p}=e,f=l().get();if(!f)return;if("editing"!==u().default.state.mode)return;const g=null===(t=(0,s().QY)(u().default.state.multiSelection))||void 0===t?void 0:t.store;if(!g)return;const v=n||a().JT(u().default.state);v&&m().setSelection({store:g,selection:v.position});const h=c().lV(u().default.state),_=v?i().o0h(v.token):a().Jf(h),b=a().by({environment:o,equation:_,displayMode:"inline"}),y=v?{editingToken:v.token}:{annotations:a().nk(u().default.state)};d().Z.setState({open:!0,value:_,error:b,savedTextSelectionState:u().default.state,savedTextSelectionRect:r||a().TJ({environment:o,selection:f}),...y,analyticsFrom:a().D9({source:p,currentEquationToken:Boolean(v),selectedText:h})}),m().clear({environment:o})}function g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d().P.Forward;d().Z.isOpen()&&(v({equationStore:d().Z,getNextSelection:t=>e===d().P.Forward?{startIndex:t.endIndex,endIndex:t.endIndex}:e===d().P.Backward?{startIndex:t.startIndex,endIndex:t.startIndex}:(0,r().t1)(e)}),d().Z.reset(),n().default.afterNextFlush((()=>{u().default.emit()})))}function v(e){const{equationStore:t,getNextSelection:o}=e;if(!t.isOpen())return;const{savedTextSelectionState:n}=t.state,i=(0,s().QY)(n.multiSelection);if(!i)return;const r=o(i.selection);if(m().setSelection({store:i.store,selection:r}),"editing"!==u().default.state.mode)throw new Error("TextSelectionStore should have a selection after calling `setSelection`.");t.setState({...t.state,savedTextSelectionState:u().default.state})}function h(e){const{environment:t,equationStore:o,transaction:n}=e;o.isOpen()&&(o.state.error||o.state.editingToken&&i().o0h(o.state.editingToken)===o.state.value||(!function(e){const{environment:t,equationStore:o,transaction:n}=e;if(!o.isOpen())return;if(o.state.error)return;const{savedTextSelectionState:r}=o.state,{multiSelection:s}=r;let l;p().pz({environment:t,multiSelection:s,transaction:n}),o.state.value&&(l=a().qZ({equationState:o.state,isTemporary:!1}),p().mM({environment:t,store:s.start.store,index:s.start.index,tokens:[l],transaction:n})),v({equationStore:o,getNextSelection:e=>{const t=l?i().eeV([l]).length:0;return{startIndex:e.startIndex,endIndex:e.startIndex+t}}})}({environment:t,equationStore:d().Z,transaction:n}),v({equationStore:o,getNextSelection:e=>({startIndex:e.endIndex,endIndex:e.endIndex})}),a().ND({environment:t,equation:o.state.value,from:o.state.analyticsFrom})))}},405851:(e,t,o)=>{o.d(t,{Yh:()=>s,_c:()=>c,mc:()=>l});var n=()=>o(274879),i=()=>o(963332),r=()=>o(836842),a=()=>o(749826);async function s(e){const t=await(0,n().getExperimentDeviceId)(e),o=e.currentUser.id;a().default.updateState({experimentsBySpace:{},experimentsWithoutSpace:[],isLoaded:!0,userId:o,deviceId:t,test:!1},e)}function l(){a().default.reset()}async function c(e){const t=await(0,n().getExperimentDeviceId)(e),o=await(0,n().getBrowserId)(e),a=await r().statsigClientLoader.getPhaseTwoInstance();await a.updateUserAsync((0,r().bG)(i().getDataForStatsigUser({environment:e,deviceId:t,browserId:o})))}},388915:(e,t,o)=>{o.d(t,{hM:()=>F,Lw:()=>N,$$:()=>U,ZO:()=>O,cM:()=>L});o(821057),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(470928),o(241792);var n=()=>o(235484),i=()=>o(705214),r=()=>o(572680),a=()=>o(836273),s=()=>o(654737),l=()=>o(282017),c=()=>o(921787),d=()=>o(855741),u=()=>o(696459),p=()=>o(916673),m=()=>o(205228),f=()=>o(594546),g=()=>o(848643),v=()=>o(709344),h=()=>o(749826),_=()=>o(138912),b=()=>o(308939),y=()=>o(838266),S=()=>o(286310),w=()=>o(824462),k=()=>o(308186),I=()=>o(231077),C=()=>o(887274),x=()=>o(876822);var T=()=>o(13382),M=()=>o(402269),P=()=>o(58771),A=()=>o(497065),R=()=>o(643261),B=()=>o(261930),E=()=>o(423402);const D=(0,o(788860).vU)({authenticating:{id:"externalIntegrationAuthActions.authenticationWithIntegration.loadingMessage",defaultMessage:"Authorizing with integrationâ€¦"},titleMessage:{id:"externalIntegrationAuthActions.loginWithExternalIntegrationPopupModal.title",defaultMessage:"Authenticate"}});async function U(e){const{environment:t,integration:o,spaceId:n,from:i}=e,a=o.id,s=t.currentUser.id,l=(0,g().eC)(t);if(!s)throw new Error("No user id found");let d;S().Iv(t,{integrationId:a,from:i});const u=(0,c().I$)(a);if("dlp"===(null==u?void 0:u.type)||"ediscovery"===(null==u?void 0:u.type)){const e=await w().callApi({eventName:"createOauthAuthorizationCode",environment:t,data:{integrationId:a,spaceId:n}});if("failed"===e.type)return k().x2(e),{error:`Unexpected error creating authorization code: ${(0,v().p)(e)}`};d=e.data.code}await K({environment:t,notionAuthorizationCode:d,integration:o,spaceId:n,userId:s,authType:l,from:i,callbackRouteName:(null==u?void 0:u.id)===c().ZB.datadog.id?r().AY.datadogAuthCallback:r().AY.authCallback}),await E().pJ({environment:t}),"workspace_connections_redirect"===i&&y().default.setState({open:!0,openedFrom:"workspace_connections_redirect",currentTab:"integrations",defaultSubtab:"workspace_connections",highlightedSetting:void 0})}async function F(e){const{environment:t,spaceId:o,integration:i,from:r}=e;if(i.id===n().Ff)return await C().jW({environment:t,from:r,action:"add_account"}),(0,f().j)({environment:t,event:{eventName:"external_sync_entry_point",eventProperties:{integration:"jira",flowId:b().ZP.createNewFlowId(),from:"my_connections"}}}),{value:{externalAuthentication:void 0}};if(i.id===n().Gl){if(!t.currentUser.id)return{error:"User must be signed in."};const n=(0,g().eC)(t),a={externalObjectInstanceBlockId:e.externalObjectInstanceBlockId,spaceId:o,callbackType:n.callbackType,...n.redirectToAuth&&{redirectToAuth:"true"}};return function(e){const{currentSpaceStore:t}=x().default.state;if(!t)return;const o=b().ZP.getFlowId();b().ZP.setState({...b().ZP.state,type:"dc-auth",open:!0,instanceValue:b().LT.DataCenter,spaceId:e.spaceId,notionState:e.notionState}),(0,f().j)({environment:e.environment,event:{eventName:"external_sync_auth",eventProperties:{integration:"jira-dc",actionType:"auth_render",flowId:o}}})}({environment:t,from:r,action:"add_account",spaceId:o,notionState:e.externalObjectInstanceBlockId&&a}),S().Iv(t,{integrationId:i.id,from:r}),{value:{externalAuthentication:void 0}}}return i.id===n().aW?(R().lF({environment:t,from:r,action:"add_account"}),{value:{externalAuthentication:void 0}}):await N(e)}async function N(e){const{environment:t,spaceId:o,integration:c,externalObjectInstanceBlockId:u,unfurlUrl:f,preventRedirectToLastVisitedPage:b,from:y}=e;l().In(void 0);const C=c.id,x=C===n().nO?_().default.completeSlackAuthentications.state:_().default.externalAuthentications.state,R=new Set(x.filter((e=>{let{integration_id:t}=e;return t===C})).map((e=>e.parent_id)));C===n().f3&&B().pc(t);const U=(0,n().BP)({integrationId:C,env:"production"}),F=(0,i().lT)(m().default.domainBaseUrl),N=c.redirect_uris.includes(F)?F:c.redirect_uris[0],L=await w().callApi({eventName:"createOauthAuthorizationCode",environment:t,data:{integrationId:C,spaceId:o,...U?{redirectUri:N}:{}}});if("failed"===L.type)return k().x2(L),{error:`Unexpected error creating authorization code: ${(0,v().p)(L)}`};const O=L.data.code,Z=t.currentUser.id,z=(0,g().eC)(t),H=r().AY.authCallback;if(!Z)return{error:"User must be signed in."};const q={environment:t,notionAuthorizationCode:O,integration:c,spaceId:o,externalObjectInstanceBlockId:u,unfurlUrl:f,authType:z,from:y,userId:Z,callbackRouteName:H};(0,n().BP)({integrationId:C,env:"production"})?await async function(e){const{environment:t,redirectUri:o,notionAuthorizationCode:i,integration:l,spaceId:c,externalObjectInstanceBlockId:u,unfurlUrl:f,authType:g,userId:v}=e,_=await async function(e){const{integration:t}=e;if("external"===t.type&&void 0!==t.info.handled_by_integrations_server){if("github"===t.info.handled_by_integrations_server)return await async function(e){const{environment:t,notionAuthorizationCode:o,spaceId:n,authType:i}=e,l={notion_workspace_id:n,notion_user_id:t.currentUser.id,notion_last_visited_url:window.location.href,notion_authorization_code:o,callback_type:i.callbackType,...i.redirectToAuth&&{redirectToAuth:"true"}},c=h().default.checkGate({gateName:"enable_server_integrations_proxy"}),d=(0,p().bf)({url:(0,s().r8)("production",c),query:{...l}});if((t.device.isTablet||t.device.isMobile)&&t.mobileNative&&"on"===h().default.getEligibleGroup({experimentId:"allow_auth_with_app_browser_for_mobile",defaultGroup:"control"}))return void t.mobileNative.openInAppBrowser(d);if(t.device.isElectron){if(h().default.checkGate({gateName:"enable_oauth_from_desktop_ux_v2"})){const e=(0,p().bf)({url:`${m().default.domainBaseUrl}${a()._j.initiateExternalAuthenticationFromDesktop}`,query:{redirectUri:encodeURIComponent(d)}});I().openExternalUrl(e)}else I().openExternalUrl(d);return}const u=await M().M(t,{width:610,height:700,url:d,titleMessage:D.titleMessage});if(!u)return;const f=(0,r().parseRoute)({url:u,isMobile:t.device.isMobile,baseUrl:m().default.domainBaseUrl,publicDomainName:m().default.publicDomainName,protocol:m().default.protocol,currentUrl:window.location.href}),{url:g}=T().Vr(t);"externalAuthCallback"===f.name&&await P().xp({route:f,environment:t});A().c4({url:g||a()._j.root,environment:t})}(e),{value:{success:!0}};if("slack"===t.info.handled_by_integrations_server){return h().default.checkGate({gateName:"link_preview_auth_with_server_integration"})?(await async function(e){const{environment:t,userId:o,spaceId:n,authType:i,from:l,externalObjectInstanceBlockId:c,options:d,notionAuthorizationCode:u}=e,f={notion_workspace_id:n,notion_user_id:o,notion_last_visited_url:window.location.href,auth_initiator:l,callback_type:i.callbackType,slack_workspace_id:null==d?void 0:d.slackWorkspaceId,external_object_instance_block_id:c,...i.redirectToAuth&&{redirectToAuth:"true"},notion_authorization_code:u},g=h().default.checkGate({gateName:"enable_server_integrations_proxy"}),v=(0,p().bf)({url:(0,s().St)("production",g),query:{...f}});if(t.mobileNative)return void t.mobileNative.openInAppBrowser(v);if(t.device.isElectron){if(h().default.checkGate({gateName:"enable_oauth_from_desktop_ux_v2"})){const e=(0,p().bf)({url:`${m().default.domainBaseUrl}${a()._j.initiateExternalAuthenticationFromDesktop}`,query:{redirectUri:encodeURIComponent(v)}});I().openExternalUrl(e)}else I().openExternalUrl(v);return}const _=await M().M(t,{width:610,height:700,url:v,titleMessage:D.titleMessage});if(!_)return;const b=(0,r().parseRoute)({url:_,isMobile:t.device.isMobile,baseUrl:m().default.domainBaseUrl,publicDomainName:m().default.publicDomainName,protocol:m().default.protocol,currentUrl:window.location.href});"externalAuthCallback"===b.name&&await P().xp({route:b,environment:t})}(e),{value:{success:!0}}):{error:{success:!1}}}return"zendesk"===t.info.handled_by_integrations_server?(await V(e),{value:{success:!0}}):"salesforce"===t.info.handled_by_integrations_server?(await async function(e){const{environment:t,notionAuthorizationCode:o,spaceId:i,authType:l,externalObjectInstanceBlockId:c,integration:d}=e,u={notion_workspace_id:i,notion_user_id:t.currentUser.id,notion_last_visited_url:window.location.href,callback_type:l.callbackType,external_object_instance_block_id:c,notion_authorization_code:o,...l.redirectToAuth&&{redirectToAuth:"true"}},f=h().default.checkGate({gateName:"enable_server_integrations_proxy"}),g=d.id===n().aW?s().LT:`${s().LT}${s().Hd}`,v=(0,p().bf)({url:(0,s().yC)({env:"production",isServerIntegrationsProxyEnabled:f,integrationPath:g}),query:{...u}});if(t.device.isElectron)return void I().openExternalUrl(v);const _=await M().M(t,{width:610,height:700,url:v,titleMessage:D.titleMessage});if(!_)return;const b=(0,r().parseRoute)({url:_,isMobile:t.device.isMobile,baseUrl:m().default.domainBaseUrl,publicDomainName:m().default.publicDomainName,protocol:m().default.protocol,currentUrl:window.location.href}),{url:y}=T().Vr(t);"externalAuthCallback"===b.name&&await P().xp({route:b,environment:t});A().c4({url:y||a()._j.root,environment:t})}(e),{value:{success:!0}}):"gmail"===t.info.handled_by_integrations_server?(await j(e,"gmail"),{value:{success:!0}}):"google_contacts"===t.info.handled_by_integrations_server?(await j(e,"google_contacts"),{value:{success:!0}}):"jira_data_center"===t.info.handled_by_integrations_server?(await V(e),{value:{success:!0}}):{error:{success:!1}}}return{error:{success:!1}}}(e);if(d().x.isSuccess(_))return;const b={externalObjectInstanceBlockId:u,spaceId:c,userId:v,callbackType:g.callbackType,...g.redirectToAuth&&{redirectToAuth:"true"}},y={code:i,notion_state:JSON.stringify(b),integration_id:l.id,external_url:f,redirect_uri:o},S=(0,p().bf)({url:o,query:{...y}});if(t.device.isElectron){if(h().default.checkGate({gateName:"enable_oauth_from_desktop_ux_v2"})){const e=(0,p().bf)({url:`${m().default.domainBaseUrl}${a()._j.initiateExternalAuthenticationFromDesktop}`,query:{redirectUri:encodeURIComponent(S)}});I().openExternalUrl(e)}else I().openExternalUrl(S);return}const w=await M().M(t,{width:610,height:700,url:S,titleMessage:D.titleMessage});if(!w)return;const k=(0,r().parseRoute)({url:w,isMobile:t.device.isMobile,baseUrl:m().default.domainBaseUrl,publicDomainName:m().default.publicDomainName,protocol:m().default.protocol,currentUrl:window.location.href});"externalAuthCallback"===k.name&&await P().xp({route:k,environment:t})}({...q,integration:c,notionAuthorizationCode:O,redirectUri:N,preventRedirectToLastVisitedPage:b}):await K(q),S().Iv(t,{integrationId:c.id,numberOfAccountsAlreadyConnected:R.size,from:y}),await E().pJ({environment:t});return{value:{externalAuthentication:_().default.externalAuthentications.state.filter((e=>{let{integration_id:t}=e;return t===C})).find((e=>!R.has(e.parent_id)))}}}async function V(e){const{environment:t,notionAuthorizationCode:o,spaceId:n,authType:i,externalObjectInstanceBlockId:s}=e,l={notion_workspace_id:n,notion_user_id:t.currentUser.id,notion_last_visited_url:window.location.href,notion_authorization_code:o,external_object_instance_block_id:s,callback_type:i.callbackType,integration_id:e.integration.id,...i.redirectToAuth&&{redirectToAuth:"true"}},c=(0,p().bf)({url:`${m().default.domainBaseUrl}/initiateExternalAuthentication`,query:{...l}});if(t.device.isElectron){const e=(0,p().bf)({url:`${m().default.domainBaseUrl}${a()._j.initiateExternalAuthenticationFromDesktop}`,query:{redirectUri:encodeURIComponent(c)}});return void I().openExternalUrl(e)}const d=await M().M(t,{width:610,height:700,url:c,titleMessage:D.titleMessage});if(!d)return;const u=(0,r().parseRoute)({url:d,isMobile:t.device.isMobile,baseUrl:m().default.domainBaseUrl,publicDomainName:m().default.publicDomainName,protocol:m().default.protocol,currentUrl:window.location.href}),{url:f}=T().Vr(t);"externalAuthCallback"===u.name&&await P().xp({route:u,environment:t}),A().c4({url:f||a()._j.root,environment:t})}function L(e){const{environment:t,notion_workspace_id:o,notion_user_id:n,notion_last_visited_url:i,notion_authorization_code:r,external_object_instance_block_id:l,callback_type:c,redirectToAuth:d,zendeskSubDomain:u}=e,f={notion_workspace_id:o,notion_user_id:n,notion_last_visited_url:i,notion_authorization_code:r,external_object_instance_block_id:l,callback_type:c,zendeskSubDomain:u,...d&&{redirectToAuth:"true"}},g=h().default.checkGate({gateName:"enable_server_integrations_proxy"}),v=(0,p().bf)({url:(0,s().vl)("production",g),query:{...f}});if(t.device.isElectron){const e=(0,p().bf)({url:`${m().default.domainBaseUrl}${a()._j.initiateExternalAuthenticationFromDesktop}`,query:{redirectUri:encodeURIComponent(v)}});I().openExternalUrl(e)}else window.location.href=v}function O(e){const{environment:t,notion_workspace_id:o,notion_user_id:n,notion_last_visited_url:i,notion_authorization_code:r,external_object_instance_block_id:l,callback_type:c,redirectToAuth:d,domain:u,personalAccessToken:f,username:g,password:v,authType:_}=e,b={notion_workspace_id:o,notion_user_id:n,notion_last_visited_url:i,notion_authorization_code:r,external_object_instance_block_id:l,callback_type:c,domain:u,personalAccessToken:f,username:g,password:v,authType:_,...d&&{redirectToAuth:"true"}},y=h().default.checkGate({gateName:"enable_server_integrations_proxy"}),S=(0,p().bf)({url:(0,s().In)("production",y),query:{...b}});if(t.device.isElectron){const e=(0,p().bf)({url:`${m().default.domainBaseUrl}${a()._j.initiateExternalAuthenticationFromDesktop}`,query:{redirectUri:encodeURIComponent(S)}});I().openExternalUrl(e)}else window.location.href=S}function Z(e){const t=h().default.checkGate({gateName:"enable_server_integrations_proxy"});return"gmail"===e?(0,s().Ey)("production",t):"google_contacts"===e?(0,s().Ou)("production",t):void(0,u().t1)(e)}async function j(e,t){const{environment:o,notionAuthorizationCode:n,spaceId:i,authType:s,externalObjectInstanceBlockId:l,preventRedirectToLastVisitedPage:c}=e,d={notion_workspace_id:i,notion_user_id:o.currentUser.id,notion_last_visited_url:window.location.href,callback_type:s.callbackType,external_object_instance_block_id:l,notion_authorization_code:n,...s.redirectToAuth&&{redirectToAuth:"true"}},u=(0,p().bf)({url:Z(t),query:{...d}});if(o.device.isElectron){const e=(0,p().bf)({url:`${m().default.domainBaseUrl}${a()._j.initiateExternalAuthenticationFromDesktop}`,query:{redirectUri:encodeURIComponent(u)}});return void I().openExternalUrl(e)}const f=await M().M(o,{width:610,height:700,url:u,titleMessage:D.titleMessage});if(!f)return;const g=(0,r().parseRoute)({url:f,isMobile:o.device.isMobile,baseUrl:m().default.domainBaseUrl,publicDomainName:m().default.publicDomainName,protocol:m().default.protocol,currentUrl:window.location.href});if("externalAuthCallback"===g.name&&await P().xp({route:g,environment:o,preventRedirectToLastVisitedPage:c}),!c){const{url:e}=T().Vr(o);A().c4({url:e||a()._j.root,environment:o})}}async function K(e){const{environment:t,notionAuthorizationCode:o,integration:n,spaceId:i,userId:s,authType:l,externalObjectInstanceBlockId:c,from:d,callbackRouteName:u}=e,f=n.id,v={notionAuthorizationCode:o,userId:s,spaceId:i,integrationId:f,externalObjectInstanceBlockId:c,callbackType:l.callbackType,...l.redirectToAuth&&{redirectToAuth:"true"}};let h=(0,p().bf)({url:`${m().default.domainBaseUrl}${a()._j.externalIntegrationPopupRedirect}`,query:{...v}});if(h=l.redirectToAuth?h:await(0,g().HU)(t,h),t.device.isElectron)return void I().openExternalUrl(h);const _=await M().M(t,{width:610,height:700,url:h,titleMessage:D.titleMessage});if(!_)return;const b=(0,r().parseRoute)({url:_,isMobile:t.device.isMobile,baseUrl:m().default.domainBaseUrl,publicDomainName:m().default.publicDomainName,protocol:m().default.protocol,currentUrl:window.location.href});b.name===u&&await P().wN({route:b,environment:t,integrationId:f,from:d})}},426102:(e,t,o)=>{o.d(t,{c:()=>u,v:()=>p});var n=()=>o(955620),i=()=>o(916673),r=()=>o(920991),a=()=>o(762478),s=()=>o(636340),l=()=>o(970105),c=()=>o(269299),d=()=>o(109757);function u(e){const{store:t,file:o,environment:n}=e,i=r().default.getBlockKey(t.id);a().Z(),d().cT({environment:n,file:o,bucket:"secure",record:t.pointer,onStart:e=>{r().default.setKeyState(i,{progressPercent:0,file:o,name:e.name,size:e.size})},onProgress:e=>{const t=r().default.getKeyState(i);t&&r().default.setKeyState(i,{...t,progressPercent:e.progressPercent})},onComplete:e=>{const o=r().default.getKeyState(i);o&&c().createAndCommit({userAction:"fileBlockActions.uploadFile",environment:n,canUndo:!0,perform:a=>{p({environment:n,store:t,source:e,name:o.name,size:o.size,transaction:a}),r().default.setKeyState(i,void 0)}})},onError:()=>{r().default.setKeyState(i,void 0)},retryWhenOffline:!0})}function p(e){const{environment:t,store:o,source:r,name:a,size:c,transaction:d}=e;let u;a?u=a:r&&(u=(0,i().je)(r)),l().sO({environment:t,store:o.getBlockTitleStore(),value:n().TPx(u),transaction:d}),s().sW({store:o.getPropertiesStore(),data:{source:n().TPx(r),size:n().TPx(c)},transaction:d})}},291338:(e,t,o)=>{o.d(t,{DK:()=>W,OH:()=>G,Qk:()=>X,S:()=>q,VE:()=>Q,fD:()=>$,nM:()=>Y,qd:()=>J,sC:()=>H});o(267602),o(470928),o(30005);var n=()=>o(506347),i=()=>o(35980),r=()=>o(572680),a=()=>o(836273),s=()=>o(396136),l=()=>o(513670),c=()=>o(839002),d=()=>o(342792),u=()=>o(855741),p=()=>o(696459),m=()=>o(614027),f=()=>o(406799),g=()=>o(47443),v=()=>o(360746),h=()=>o(205228),_=()=>o(577041),b=()=>o(594546),y=()=>o(718959),S=()=>o(820978),w=()=>o(429725),k=()=>o(527278),I=()=>o(148126),C=()=>o(732491),x=()=>o(663132),T=()=>o(658096),M=()=>o(876822),P=()=>o(749826),A=()=>o(722116),R=()=>o(826955),B=()=>o(491927),E=()=>o(8101),D=()=>o(824462),U=()=>o(308186),F=()=>o(421654),N=()=>o(528918),V=()=>o(332542),L=()=>o(579358),O=()=>o(497065),Z=()=>o(145284),j=()=>o(269299);const K=750,z="forkPageTemplate";function H(){A().Z.setState({open:!1})}async function q(e){const{environment:t,store:o,originRect:i}=e;B().Zz(t,o.id);const{RouterStore:l}=t,c=l.state.route;if(I().Sr(t)){var d;let e=o;if("space"===c.name){const t=o.getSpaceStore();if(!t)return;const n=c.spaceDomain?x().ih(t,c.spaceDomain):void 0,i=null==n?void 0:n.getPublicHomePage();if(!i)return;const r=R().G.createChildStore(t,{id:i,table:s().iU,spaceId:t.id});if(!r)return;e=r}const{publicPageData:i}=T().default.state,a=null==i||null===(d=i.template)||void 0===d?void 0:d.listingId;if(a){const e=await D().callApi({eventName:"getMarketplacePurchaseRoute",environment:t,data:{marketplaceListingId:a}});if("success"===e.type&&e.data.success){var u;const o=P().default.getConfigKey("marketplace_public_purchase_url_optout","usernames").includes((null==i||null===(u=i.template)||void 0===u?void 0:u.creator.username)??""),n=e.data.url,r=e.data.type;if(n&&!(o&&"checkout"===r||"external"===r))return void O().navigateOnBaseUrl({environment:t,url:n,extraSearchParams:{from:"public_page",tid:await(0,b().cG)(t)}})}}const l=(0,w().ZP)({store:e,fullyQualified:!1,duplicate:!0,pageVisitSource:n().tY.Duplicate,embedded:!1,disableSlug:!0});return void O().navigateOnBaseUrl({environment:t,url:l,extraSearchParams:{...await L().tc(t),utm_source:"public_page",utm_content:"duplicate_button",tid:await(0,b().cG)(t),from:"public_page",n:"duplicate_public_page"},openInNewTab:(0,r().FK)(c)})}const{currentUserRootStore:p}=M().default.state;if(p){const e=y().o(p);if(1===e.length){const n=e[0],i=n.getSpaceStore();if(!i)return;W({environment:t,store:o,spaceStore:i,spaceViewStore:n,isPrivate:!0,context:"public_page_duplicate_single_workspace"})}else A().Z.setState({open:!0,store:o,originRect:i})}else Y({currentUserId:t.currentUser.id,blockId:o.id}),O().c4({environment:t,url:a()._j.login})}async function W(e){const{environment:t,store:o,spaceStore:i,context:r,templateId:a}=e,s=Date.now();let l;const d=G({...e}),[u]=await Promise.all([d.then((e=>(l=Date.now()-s,e))),(0,c().Vs)(K)]);N().x();const p=Date.now()-s;if("public_page_duplicate_multiple_workspace"===r||"public_page_duplicate_single_workspace"===r){const{blockTitle:e}=function(e){const{store:t,spaceStore:o}=e,n=k().Z.getIntl(),i=(0,S().M5)(t,n),r=(0,S().A1)(o,n);return N().j({message:S().sY.loadingStateDisplayText,interpolatedValues:{blockTitle:i,spaceTitle:r}}),{blockTitle:i,spaceTitle:r}}({store:o,spaceStore:i});E().Xy(t,{from:"publicPage",success:!u.error,template_block_id:o.id,target_space_id:i.id,context:r,template_duplication_duration_ms:l,template_duplication_duration_with_minimum_ms:p,public_template_name:e,template_id:a})}void 0!==u.error?U().UW(u.error):g()._c({environment:t,store:u.value,visitType:m().vu.Link,pageVisitSource:n().tY.Duplicate})}async function G(e){const{environment:t,store:o,spaceStore:n,spaceViewStore:i,isPrivate:r,duplicateOnlyCollectionSchema:a}=e,{duplicateBlock:s}=await(0,_().dF)();return new Promise((e=>{j().createAndCommit({userAction:"forkPageActions.forkPage",environment:t,canUndo:!0,perform:l=>{const[c,d]=s({environment:t,stores:[o],transaction:l,addCopyName:!1,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0,targetSpaceId:n.id,baseUrl:h().default.domainBaseUrl,publicDomainName:h().default.publicDomainName,preferDuplicateLocation:"local",duplicateOnlyCollectionSchema:a}),u=c[0];d.then((o=>{"error"===o.status?f().nr(o.error)?f().y1({product:o.error.clientData.metadata.product}):U().UW(o.errorMessage):(e({value:u}),u.isLocked()&&j().createAndCommit({userAction:"forkPageActions.forkPageWithLoadingAndNavigate",environment:t,canUndo:!0,perform:e=>{F().Wq({environment:t,store:u,isLocked:!1,transaction:e})}}))})),Z().Hj({environment:t,spaceStore:n,spaceViewStore:i,pageStore:u,isPrivate:r,location:{type:"prepend"},transaction:l})}})}))}async function $(e){let t="forkPageActions.duplicateTo";var o;e.templateInstallationMetadata&&(null!==(o=e.templateInstallationMetadata)&&void 0!==o&&o.isListedTemplate?t="forkPageActions.duplicateTo.marketplaceTemplateInstallation":"public_page"===e.templateInstallationMetadata.source?t="forkPageActions.duplicateTo.publicPageInstallation":"onboarding"===e.templateInstallationMetadata.source?t="forkPageActions.duplicateTo.onboardingInstallation":"team_home"===e.templateInstallationMetadata.source&&(t="forkPageActions.duplicateTo.teamHomeInstallation"));const{environment:n,store:i,duplicateOnlyCollectionSchema:r,shouldAttemptServerBackedLocalDuplication:a}=e,s=M().default.state.currentSpaceStore,c=M().default.state.currentSpaceViewStore;if(!s||!c)return;const d=await v().NN({environment:n,block:i,action:"duplicate"});if("user_canceled"===d)return;const u=await(0,C().Z)(),{duplicateBlock:m}=await(0,_().dF)();return await new Promise((o=>{j().createAndCommit({userAction:t,environment:n,canUndo:!0,perform:t=>{const[f,g]=m({environment:n,stores:d,transaction:t,addCopyName:e.addCopyName,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0,targetSpaceId:s.id,baseUrl:h().default.domainBaseUrl,publicDomainName:h().default.publicDomainName,preferDuplicateLocation:"local",duplicateOnlyCollectionSchema:r,installationImprint:e.installationImprint,templateInstallationMetadata:e.templateInstallationMetadata,shouldAttemptServerBackedLocalDuplication:a});g.then((t=>{"error"===t.status?o({error:t}):(o({value:f}),e.unlockPage&&f.find((e=>e.isLocked()))&&j().createAndCommit({userAction:"forkPageActions.duplicateToHelper",environment:n,canUndo:!0,perform:e=>{f.forEach((t=>{t.isLocked()&&F().Wq({environment:n,store:t,isLocked:!1,transaction:e})}))}}))}));const v={type:"append",after:e.appendWithoutAfter?void 0:i.id},_=l().d9(f).reverse();if("team"===e.newParentStore.table)u({transaction:t,currentSpaceViewStore:c,teamStore:e.newParentStore,targets:f,environment:n,location:v,action:"move",value:{type:"team",id:e.newParentStore.id,spaceId:s.id}});else if("block"===e.newParentStore.table)for(const o of _)V().jG({parentStore:e.newParentStore,childStore:o,transaction:t,after:v.after});else if("space"===e.newParentStore.table)for(const e of _)Z().Hj({environment:n,spaceStore:s,spaceViewStore:c,pageStore:e,isPrivate:!0,location:v,transaction:t});else(0,p().t1)(e.newParentStore);return f}})}))}async function Q(e){const{environment:t}=e,o=await $({...e,addCopyName:!0});if(o)if(u().x.isFail(o)){const e=o.error;f().nr(e.error)?f().y1({product:e.error.clientData.metadata.product}):U().UW(e.errorMessage)}else u().x.isSuccess(o)?g()._c({environment:t,store:o.value[0],visitType:m().vu.Link,pageVisitSource:n().tY.Duplicate}):(0,p().t1)(o)}function Y(e){let{currentUserId:t,blockId:o}=e;i().Z.set({userId:t,key:z,value:o})}function J(e){return i().Z.get({userId:e,key:z})}async function X(e){let{environment:t,blockId:o,spaceId:n,templateId:i,installationId:r,source:a,context:s,isEmailShared:l}=e;if(i&&(0,d().t)(i))await D().callApi({eventName:"createMarketplaceInstallation",environment:t,data:{destinationTable:"space",destinationId:n,productTable:"template",productId:i,installationId:r,source:a,context:s,isEmailShared:l}});else{const e=await D().callApi({eventName:"inAppGetTemplateByBlockId",environment:t,data:{blockId:o}});if("success"===e.type&&e.data.success&&e.data.template){const o=e.data.template;await D().callApi({eventName:"createMarketplaceInstallation",environment:t,data:{destinationTable:"space",destinationId:n,productTable:"template",productId:o.id,installationId:r,source:a,context:s,isEmailShared:l}})}}}},421654:(e,t,o)=>{o.d(t,{$P:()=>I,FH:()=>f,MF:()=>S,Mp:()=>w,Wq:()=>g,bf:()=>k,eO:()=>_,fs:()=>h,hc:()=>v,is:()=>y,zM:()=>b});var n=()=>o(156642),i=()=>o(225339),r=()=>o(35980),a=()=>o(513670),s=()=>o(326966),l=()=>o(28810),c=()=>o(205228),d=()=>o(338530),u=()=>o(876822),p=()=>o(826955),m=()=>o(636340);function f(e){const{stores:t,update:o,transaction:i}=e;for(const a of t){switch(a.table){case"block":case"collection":case"collection_view":case"layout":m().sW({store:a.getFormatStore(),data:(0,s().Q2)(o),transaction:i})}a instanceof p().G&&a.getType()===n().Ti.callout&&o.block_color&&r().Z.set({userId:a.environment.currentUser.id,key:l().N,value:o.block_color})}}function g(e){const{environment:t,store:o,isLocked:n,transaction:i}=e,{id:r}=t.currentUser;if(!r)return;const a={block_locked:n,block_locked_by:r};m().sW({store:o.getFormatStore(),data:a,transaction:i})}function v(e){const{environment:t,store:o,alignment:n,transaction:i}=e,{id:r}=t.currentUser;if(!r)return;const a={block_alignment:n};m().sW({store:o.getFormatStore(),data:a,transaction:i})}function h(e){const{store:t,url:o,position:n,transaction:r}=e,a=(0,i().Wv)({source:o,secureFileConfigRootpath:c().default.secureFileConfig.rootPath,secureFileConfigHostname:c().default.secureFileConfig.hostname}),s=a?a.link:o;f({stores:[t],update:{page_cover_position:n},transaction:r});const l=t.getCoverStore();l&&m().sO({store:l,value:s,transaction:r})}function _(e){const{store:t,url:o,transaction:n}=e,r=(0,i().Wv)({source:o,secureFileConfigRootpath:c().default.secureFileConfig.rootPath,secureFileConfigHostname:c().default.secureFileConfig.hostname});f({stores:[t],update:{social_media_image_preview_url:r?r.link:o},transaction:n})}function b(){const e=a().UP(["Activities","Objects","Travel & Places"]),t=d().Z.state.emojiByCategory[e];return a().UP(t)}function y(e){const{store:t,transaction:o}=e,n=t.getIconStore();if(n){const e=b();m().sO({store:n,value:e,transaction:o})}}function S(e){const{store:t,transaction:o}=e,n=t.getCoverStore();n&&m().sO({store:n,value:null,transaction:o})}function w(e){const{store:t,coverPosition:o,transaction:n}=e;if(t.isCollectionView()){const e=t.getCollectionStore();if(e)return void m().sW({store:e.getFormatStore(),data:{collection_cover_position:o},transaction:n})}f({stores:[t],update:{page_cover_position:o},transaction:n})}function k(e){const{store:t,coverPosition:o,transaction:n}=e;f({stores:[t],update:{card_cover_position:o},transaction:n})}function I(e,t){var o;const n=(null===(o=u().default.state.currentUserSettingsStore)||void 0===o?void 0:o.getSettingsStore().getKeyStore("start_day_of_week").getValue())??0,i=null==e?void 0:e.getFormatStore().getKeyStore("start_week_on").getValue();let r=i;void 0===i&&(r=n),f({stores:[e],update:{start_week_on:r},transaction:t})}},411004:(e,t,o)=>{o.d(t,{Y:()=>y});var n=()=>o(506347),i=()=>o(542973),r=()=>o(81954),a=()=>o(513670),s=()=>o(244060),l=()=>o(832924),c=()=>o(528770),d=()=>o(70191),u=()=>o(521635),p=()=>o(589525),m=()=>o(876822),f=()=>o(844641),g=()=>o(826955),v=()=>o(965903),h=()=>o(89073),_=()=>o(799454),b=()=>o(453999);function y(e,t){var o;const{RouterStore:y}=e,{PageScroller:S}=l().default;if("page"!==y.state.route.name&&"chat"!==y.state.route.name)return;if(!m().default.state.currentLoadingContainerStore&&"page"===y.state.route.name)return;if((null===(o=m().default.state.currentLoadingContainerStore)||void 0===o||!o.state.ready)&&"page"===y.state.route.name)return;f().Z.reset(),h().Z.reset();const w=y.state.route,k="pageVisitSource"in w&&w.pageVisitSource?parseInt(w.pageVisitSource):void 0;if(y.state.route.scrollToBlockId){b().kB(e,{blockId:y.state.route.scrollToBlockId,animate:t.animateScrollToBlocks});const o=v().default.state.stores[0];o&&"page"===y.state.route.name&&y.state.route.discussionId&&_().Ib({environment:e,blockStore:o,discussionIds:[y.state.route.discussionId],analyticsFrom:k===n().tY.Notification?"notification":"page_load",shouldFocusDiscussion:!0,recursivelyLoadAllDiscussions:!1})}else if("page"===y.state.route.name&&y.state.route.discussionId&&m().default.state.mainEditorCurrentBlockStore){var I;const t=null===(I=g().t1.createChildStore(m().default.state.mainEditorCurrentBlockStore,{table:i().qF,id:y.state.route.discussionId,spaceId:(0,r().J)(m().default.state.mainEditorCurrentBlockStore.pointer.spaceId)}))||void 0===I?void 0:I.getPropertyId();if(t){if(!(0,s().e)({discussionId:y.state.route.discussionId,blockId:m().default.state.mainEditorCurrentBlockStore.id})){var C;const o=null===(C=m().default.state.mainEditorCurrentBlockStore.getAssociatedCollectionStore())||void 0===C?void 0:C.getLayoutStore(),n=Boolean(o&&(0,d().Uo)({layoutStore:o,propertyId:t}).isPropertyInPageDetails);if(!(0,p().ty)(e)&&n)return(0,c().U)({environment:e,layoutStore:o,from:"discussion_url",panelLocation:"mainPage"}),void u().Z.update((e=>({...e,propertyIdDiscussionToOpenOnPanelOpen:t})))}}_().Ib({environment:e,blockStore:m().default.state.mainEditorCurrentBlockStore,discussionIds:[y.state.route.discussionId],analyticsFrom:k===n().tY.Notification?"notification":"page_load",shouldFocusDiscussion:!0,recursivelyLoadAllDiscussions:!1,property_id:t})}else if("pop"===y.state.action&&y.state.historyState){var x;if(S&&a().hj(y.state.historyState.scrollTop))null===(x=S.getNode())||void 0===x||x.scrollTo({top:y.state.historyState.scrollTop});y.state.historyState.blockIds&&b().DQ(e,y.state.historyState.blockIds)}}},676922:(e,t,o)=>{o.d(t,{Hk:()=>T,Rs:()=>M,HE:()=>I,LI:()=>R,zl:()=>C,V8:()=>B,t9:()=>U,MN:()=>A,lR:()=>x,Xb:()=>D});o(821057),o(267602),o(30005);var n=()=>o(66077),i=()=>o(431595),r=()=>o(396136),a=()=>o(680146),s=()=>o(18610),l=()=>o(696459),c=()=>o(326966);const d=new Map;class u extends(()=>o(263184))().default{getInitialState(){const e=new AbortController;return e.abort(),{language:void 0,lastRequestedAt:void 0,pageStoreLastEditedTime:void 0,requestController:e}}}var p=()=>o(594546),m=()=>o(122479),f=()=>o(345918),g=()=>o(876822),v=()=>o(524434),h=()=>o(279386),_=()=>o(826955),b=()=>o(56348),y=()=>o(824462),S=()=>o(244540),w=()=>o(970105),k=()=>o(269299);function I(e){const{pageStore:t,environment:o,forceUpdate:n=!1}=e;if(!t.isPageBlock()||t.isEmptyPage())return;const i=t.getLastEditedTime(),r=function(e){const t=d.get(e);if(t)return t;const o=new u;return d.set(e,o),o}(t.id);return(n||r.state.requestController.signal.aborted||void 0===r.state.lastRequestedAt||i!==r.state.pageStoreLastEditedTime&&Date.now()-r.state.lastRequestedAt>c().hM)&&(async()=>{r.state.requestController.abort();const e=Date.now(),n=new AbortController;r.setState({...r.state,lastRequestedAt:e,pageStoreLastEditedTime:i,requestController:n});const a=n.signal,s=await y().callApi({eventName:"detectPageLanguage",environment:o,data:{pagePointer:t.getSpaceShardedPointer()},headers:{},abortSignal:a});a.aborted||("success"===s.type?r.setState({...r.state,language:s.data.detectedLanguage}):r.state.requestController.abort())})(),r.state.language}function C(e,t){var o;const n=I({pageStore:e,environment:t}),i=(null===(o=g().default.state.currentUserSettingsStore)||void 0===o||null===(o=o.getSettings())||void 0===o?void 0:o.preferred_locale)??s().al;return n??(0,s()._u)(i)}function x(e){const{pageStore:t,environment:o,triggeredFrom:n}=e;if(!v().KR.isFullPageTranslateEnabled())return;const i=h().MT.getStateForBlock(t.id);if((0,h().hV)(i)){if("translate_locked"===i.mode){o.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(i.inMemoryRecordCache)}"loading"===i.status&&i.cancel(),S().iE({navigableBlockStore:t}),(0,p().j)({environment:o,event:{eventName:"stop_translating_page",eventProperties:{triggered_from:n,page_id:t.id}}})}}function T(e){const{pageStore:t,environment:o}=e,n=t.getParentStore();return("block"===(null==n?void 0:n.table)||"team"===(null==n?void 0:n.table)||"space"===(null==n?void 0:n.table)||"collection"===(null==n?void 0:n.table))&&(!("collection"===n.table&&!n.canEditCollection())&&(0,m().KE)({environment:o,blockStore:t}))}function M(){return!(0,f().Cx)(g().default.state.currentSpaceStore)}function P(e){const{blockStore:t,environment:o,transaction:n,inMemoryRecordCache:i,currentUserStore:r}=e;if(t.isType("transclusion_reference")){const e=t.getTransclusionReferenceTargetStore();if(!e)throw new Error("Expected transclusion reference target on transclusion_reference block.");P({blockStore:e,transaction:n,inMemoryRecordCache:i,environment:o,currentUserStore:r})}i.setModelAndRole({pointer:t.getSpaceShardedPointer(),userId:r.id},t.getModel(),"reader");for(const a of t.getContentPointers()){P({blockStore:_().G.createChildStore(t,a),transaction:n,inMemoryRecordCache:i,environment:o,currentUserStore:r})}}function A(e){const{environment:t,pageStore:o,sourceLanguage:n,triggeredFrom:i}=e,r=h().MT.getTranslateModeForBlock(o.id);if(!v().KR.isFullPageTranslateEnabled()||!r)return;const a={...r,sourceLanguage:n};return h().MT.setStateForBlock(o.id,a),"select_language"!==a.status?(R({environment:t,pageStore:o,targetLanguage:a.targetLanguage,sourceLanguage:a.sourceLanguage,triggeredFrom:i}),!0):void 0}function R(e){const{environment:t,pageStore:o,targetLanguage:n,sourceLanguage:i,triggeredFrom:a}=e,s=h().MT.getTranslateModeForBlock(o.id);if(!v().KR.isFullPageTranslateEnabled()||!s)return;if(!o.isType("page"))throw new Error("Not a page");let c;c="translate_unlocked"===s.mode?E({pageStore:o,environment:t}):s.inMemoryRecordCache;const d=new AbortController;(0,p().j)({environment:t,event:{eventName:"translate_page",eventProperties:{source_language:i,target_language:n,triggered_from:a,page_id:o.id}}}),y().translatePage({environment:t,data:{pagePointer:o.getSpaceShardedPointer(),targetLanguage:n,sourceLanguage:i},headers:{},abortSignal:d.signal}).then((e=>{try{if("failed"===e.type)throw{name:e.error.data.responseBody.name??e.error.name,statusCode:e.status,message:e.error.data.responseBody.debugMessage??e.error.data.responseBody.message};const{translatedBlockMap:n}=e.data;!function(e){const{pageStore:t,valueMap:o,environment:n}=e,{currentUserStore:i,currentSpaceStore:a}=g().default.state;if(!i||!a)return;if(!v().KR.isFullPageTranslateEnabled())return;const s=h().MT.getTranslateModeForBlock(t.id);if(!s)return;if("loading"!==s.status)throw new Error("Expected translation state to be loading");const c=t.clone(s.inMemoryRecordCache);k().createAndCommit({environment:n,perform(e){for(const[t,i]of Object.entries(o)){const o=_().G.createChildStore(c,{table:r().iU,id:t,spaceId:a.id});let s;if("title"===i.mapping)s=o.getBlockTitleStore();else if("caption"===i.mapping)s=o.getPropertyStore("caption");else{if("properties"===i.mapping){Object.entries(i.properties??{}).forEach((t=>{let[i,r]=t;const a=o.getPropertyStore(i);w().sO({environment:n,store:a,value:r.value,transaction:e})}));continue}if("unmapped"===i.mapping)continue;(0,l().t1)(i.mapping)}w().sO({environment:n,store:s,value:i.value,transaction:e})}s.inMemoryRecordCache.emitAll()},canUndo:!0,userAction:"fullPageTranslationHelpers.applyTranslationMapToPage"}),S().Xt({navigableBlockStore:t,editorModeConfig:{...s,status:"active",translationMap:o}})}({valueMap:n,pageStore:o,environment:t})}catch(n){(0,b().j)(n),x({pageStore:o,environment:t,triggeredFrom:"error"})}})),S().Xt({navigableBlockStore:o,editorModeConfig:{mode:"translate_locked",status:"loading",sourceLanguage:i,targetLanguage:n,cancel:()=>d.abort(),inMemoryRecordCache:c}})}function B(e){const{pageStore:t,environment:o,status:n="select_language",sourceLanguage:i,targetLanguage:r}=e;if(!t.isType("page"))throw new Error("Not a page");if(!h().MT.isBlockModeInTranslation(t.id)&&v().KR.isFullPageTranslateEnabled())if("suggest_translation"===n&&i&&r)S().Xt({navigableBlockStore:t,editorModeConfig:{mode:"translate_unlocked",status:"suggest_translation",sourceLanguage:i,targetLanguage:r}});else{const e=E({pageStore:t,environment:o});e&&S().Xt({navigableBlockStore:t,editorModeConfig:{mode:"translate_locked",status:"select_language",sourceLanguage:I({pageStore:t,environment:o}),inMemoryRecordCache:e}})}}function E(e){const{pageStore:t,environment:o}=e,{currentUserStore:i}=g().default.state;if(!i)throw new Error("No current user");const r=new(n().Z)({name:`TranslationInMemoryRecordCache-${t.id}`,isTemporaryData:!0});o.defaultRecordCache.inMemoryRecordCache.addCacheOverride(r);const a=t.clone(r);return k().createAndCommit({environment:o,perform(e){P({blockStore:a,transaction:e,inMemoryRecordCache:r,environment:o,currentUserStore:i})},canUndo:!0,userAction:"fullPageTranslationActions.openTranslateBanner.lockPage"}),r.emitAll(),r}function D(e){const t=new(i().p8)("Editor handler called in translate mode.");throw a().rn(t,{from:"fullPageTranslationActions",type:"editorHandlerInTranslateModeWarning",data:{sessionId:e}}),t}function U(e){const{translationMap:t,recordIdMap:o}=e,n={};for(const[i,a]of Object.entries(t)){const e=o.get({table:r().iU,id:i});e&&(n[e]=a)}return n}},611253:(e,t,o)=>{o.d(t,{ui:()=>a,xv:()=>s,zp:()=>l});var n=()=>o(491927),i=()=>o(72041),r=()=>o(255313);function a(e){var t;const{environment:o,renderFullScreenNode:a,fullScreenNodeRect:s,contentAspectRatio:l,blockStore:c,imageUrl:d}=e;n().Lf(o,{type:"open"}),r().default.setState({...r().default.state,isOpen:!0,fullscreenNodeAnimationComplete:!1,renderFullScreenNode:a,startScrollTop:(null===(t=i().Z.state.elementRef.current)||void 0===t?void 0:t.scrollTop)??0,fullScreenNodeRect:s,contentAspectRatio:l,blockStore:c,imageUrl:d})}function s(){r().default.setState({...r().default.state,isOpen:!1})}function l(e){return e<1020?0:32}},272822:(e,t,o)=>{o.d(t,{K:()=>r,O:()=>i});var n=()=>o(688381);function i(e){n().Z.state.openModals.has(e)||(n().Z.state.openModals.add(e),n().Z.emit())}function r(e){n().Z.state.openModals.has(e)&&(n().Z.state.openModals.delete(e),n().Z.emit())}},223637:(e,t,o)=>{o.d(t,{M:()=>r});o(267602),o(653476);var n=()=>o(872430),i=()=>o(694419);function r(e,t){if(t)return i().Z.setState([e]),void n().Z.setState({recentlyUsedColors:[e]});const o=n().Z.state.recentlyUsedColors.filter((t=>t!==e));o.unshift(e),o.length>5&&o.pop(),n().Z.state.recentlyUsedColors=o,i().Z.setState([...o])}},803272:(e,t,o)=>{o.d(t,{AW:()=>A,Du:()=>P,bA:()=>M,gx:()=>B,oG:()=>U,uO:()=>D,w3:()=>E,xv:()=>T});o(267602),o(653476),o(470928),o(30005),o(258429);var n=()=>o(492788),i=()=>o(955620),r=()=>o(509917),a=()=>o(513670),s=()=>o(696459),l=()=>o(539410),c=()=>o(12512),d=()=>o(832924),u=()=>o(275200),p=()=>o(550054),m=()=>o(528770),f=()=>o(521635),g=()=>o(538230),v=()=>o(244826),h=()=>o(158429),_=()=>o(763058),b=()=>o(127519),y=()=>o(799454),S=()=>o(844085),w=()=>o(203927),k=()=>o(102182),I=()=>o(970105),C=()=>o(990966),x=()=>o(269299);function T(e){const{clearQuery:t,overridePreviousTextSelection:o}=e,{textSelectionOnOpen:n,open:i}=h().default.state;i&&("editing"!==b().default.state.mode&&(o?b().default.setState({forceExtendAnnotations:{},mode:"editing",multiSelection:o}):n&&b().default.setState({...n,multiSelection:{start:n.multiSelection.end,end:n.multiSelection.end}})),h().default.update((e=>({...e,focused:!1,open:!1,findQuery:t?"":e.findQuery}))))}function M(e){const{environment:t,selectedString:o,textSelectionOnOpen:n}=e,i=o&&o.length>0;h().default.update((e=>({...e,open:!0,findQuery:i?o:h().default.state.findQuery,focused:!0,showReplaceInput:!1,textSelectionOnOpen:n}))),C().clear({environment:t})}function P(){h().default.state.focused||h().default.update((e=>({...e,focused:!0})))}function A(){h().default.update((e=>({...e,showReplaceInput:!e.showReplaceInput,focused:e.showReplaceInput})))}const R=200;function B(e){const{environment:t,matches:o,replace:n,find:r,intl:d,editorViewEditorModeMap:u}=e,{pageDetails:{activePageDetails:m,secondaryPageDetails:f}}=e,g=n.length-r.length,v=o.filter(s().$K).filter((e=>(0,c().uk)({environment:t,match:e,pageStore:e.view===m.view?m.store:null==f?void 0:f.store}))),_={id:"",columnId:void 0,offset:0};0!==v.length?(v.length>1&&T({clearQuery:!1}),a().yo(v,R).forEach((e=>{x().createAndCommit({userAction:"findAndReplaceInstance",environment:t,canUndo:!0,perform:o=>{e.forEach((e=>{if(!e.allowReplace)return;const{blockStore:a,selection:s}=e,c="block"===e.type,d=c?e.propertyType:e.propertyId,m=a.getPropertyStore(d);if(!m)return;const f=e.blockStore.id,v=c?void 0:e.propertyId;_.id!==f||_.columnId!==v?(_.id=f,_.columnId=v,_.offset=0):_.offset+=g;const h=s.startIndex+_.offset,b=s.endIndex+_.offset,y=("main"===e.view?u.main:u.side_peek)??"default",S=(0,p().OT)({startIndex:h,endIndex:b},m,y).toArray().filter(i().f_I);if("suggest"===y){const n={start:{store:m,index:h},end:{store:m,index:b}},i=(0,l().oG)(t,o,e.blockStore);(0,l().Sz)({environment:t,multiSelection:n,transaction:o,discussionStore:i}),_.offset+=r.length}else I().pe({environment:t,selection:{startIndex:h,endIndex:b},store:m,transaction:o});const w=S.length>0?[n,S]:[n];I().mM({environment:t,index:"default"===y?h:h+r.length,store:m,tokens:[w],transaction:o,editorMode:y})}))}}),k().d4({item:{label:d.formatMessage({id:"inPageFind.replaceAll.snackbarCopy",defaultMessage:"{numMatches, plural, one {Replaced {numMatches} match} other {Replaced {numMatches} matches}}"},{numMatches:e.length})},undoFunc:()=>{h().default.update((e=>({...e,open:!0,showReplaceInput:!0})))}})}))):k().oV({label:d.formatMessage({id:"inPageFind.replaceAll.noMatches",defaultMessage:"No matches replaced"})})}async function E(e){var t;const{match:o,pagePropertiesStore:i,pageStore:a,environment:s}=e;if(!a)return;function l(e){let{isPeek:t}=e;const o=t?"peek":"mainPage";"popup"===f().Z.getPanelState(o).displayStyle&&(0,m().n)({environment:s,from:"search",panelLocation:o,layoutStore:void 0})}const c="main"!==o.view;switch(o.type){case"block":case"simple_table_cell":await w().Nz(a,[o.blockStore.id]),l({isPeek:c});break;case"page_property_name":case"page_property_value":const e=a.getAssociatedCollectionStore(),r=null==e||null===(t=e.getNormalizedPropertyGroups())||void 0===t?void 0:t.find((e=>{let{propertyIds:t}=e;return null==t?void 0:t.includes(o.propertyId)}));o.visible||!i||i.state.forceShowProperties||i.update((e=>({...e,forceShowProperties:!0})));if(!(null==e?void 0:e.getLayoutStore()))break;o.isMatchInLayoutPageDetails?(0,m().U)({environment:s,from:"search",panelLocation:c?"peek":"mainPage",layoutStore:void 0}):l({isPeek:c}),o.isPropertyInGroup&&r&&g().Z.setPropertyGroupExpandedOverride({groupId:r.id,override:"open"});break;case"comment":l({isPeek:c}),await w().Nz(a,[o.blockStore.id]);const d=v().Z.find((e=>e.getStore().id===o.discussionId)),u=null==d?void 0:d.getNode();if(!(u&&u instanceof Element))return;const p=u.getBoundingClientRect();await y().Ib({analyticsFrom:"in_page_find",blockStore:o.blockStore,environment:s,shouldFocusDiscussion:!1,recursivelyLoadAllDiscussions:!1,rect:p}),await n().default.afterNextFlush((()=>{const e=null==d?void 0:d.getMarginDiscussionScrollContainer();if(e){const t=e.getNode();t&&t.scrollTo({top:t.scrollHeight,behavior:"smooth"})}}))}("page_property_name"!==o.type&&"page_property_value"!==o.type||!o.isMatchInLayoutPageDetails)&&await async function(e){await n().default.afterNextFlush();const t=document.getElementsByClassName(r().qp).item(0);if(!t)return;const o="main"===e.view?d().default.PageScroller:d().default.PeekViewScroller;if(!o)return;S().bx({element:t,scrollerContext:{verticalScroller:o,horizontalScroller:void 0},vertical:{reveal:"closest"},horizontal:void 0,animate:!1})}(o)}function D(e){const t=e.getElementsByClassName(r().qp);if(!t.length)return;const o=t.item(0);o&&(0,u().n5)({element:o,blockAlignment:"center",inlineAlignment:"nearest",behavior:"auto"})}function U(e,t){var o;if("page_property_name"!==t.type&&"page_property_value"!==t.type)return;const n=t.propertyId,i=e.getAssociatedCollectionStore(),r=null==i||null===(o=i.getNormalizedPropertyGroups())||void 0===o?void 0:o.find((e=>{let{propertyIds:t}=e;return null==t?void 0:t.includes(n)}));return(0,_().A_)(null==r?void 0:r.id)}},80072:(e,t,o)=>{o.d(t,{A1:()=>v,WY:()=>f,dD:()=>p,gq:()=>b,nt:()=>_,rB:()=>g,uv:()=>m,vi:()=>h});o(670560),o(267602),o(653476),o(470928),o(241792);var n=()=>o(156642),i=()=>o(396136),r=()=>o(513670),a=()=>o(718959),s=()=>o(465371),l=()=>o(32969),c=()=>o(262453),d=()=>o(445264),u=()=>o(282662);function p(e){const{parentStore:t,blockStore:o,type:n,transaction:i}=e,r=t.getTransclusionReferenceTargetStore()??t,a=r.getContentStores(),l=a.indexOf(o);if(l<=0)return;const c=a[l-1];if(!c)return;if(!y(r)||!y(c))return;if("transclusion_container"===c.getType()||"transclusion_reference"===c.getType()||c.isCalloutV2())return;u().Od({parentStore:r.getContentStore(),childToRemoveStore:o,transaction:i});const{childStore:p}=u().R3({parentStore:c.getContentStore(),appendStore:o,transaction:i});if("self"===n&&!p.isType("table"))for(const s of p.getContentStores().reverse())u().Od({parentStore:p.getContentStore(),childToRemoveStore:s,transaction:i}),u().BE({parentStore:c.getContentStore(),insertStore:s,afterStore:p,transaction:i});return s().BX(c)&&d().Z.setOpen(c.id,!0),p}function m(e){const{grandparentStore:t,parentStore:o,blockStore:n,transaction:i}=e,r=t.getTransclusionReferenceTargetStore()??t;if(r.getContentStores().indexOf(o)<0)return;const a=o.getContentStores(),s=a.indexOf(n);if(s<0)return;if(!y(r)||!y(o))return;if("transclusion_container"===o.getType()||"transclusion_reference"===o.getType()||o.isCalloutV2())return;if(y(n))for(let c=s+1;c<a.length;c++){const e=a[c];u().Od({parentStore:o.getContentStore(),childToRemoveStore:e,transaction:i}),u().R3({parentStore:n.getContentStore(),appendStore:e,transaction:i})}u().Od({parentStore:o.getContentStore(),childToRemoveStore:n,transaction:i});const{childStore:l}=u().BE({parentStore:r.getContentStore(),insertStore:n,afterStore:o,transaction:i});return l}function f(e){const{transaction:t}=e,o=e.blocks,n=o[0];if(!n)return;const i=S(n);if(!i)return;const{previousChildStore:r}=i,a=r.getContentStore();return s().BX(r)&&d().Z.setOpen(r.id,!0),o.map((e=>{const o=e.getRecordStoreUIParent();null!=o&&o.valueIs(c().i)&&u().Od({parentStore:o,childToRemoveStore:e,transaction:t});return u().R3({parentStore:a,appendStore:e,transaction:t}).childStore}))}function g(e){const{transaction:t}=e;let o=e.blocks;const n=o[0];if(!n)return;const i=w(n);if(!i)return;const{parentBlockStore:a,grandparentBlockStore:s}=i,l=a.getContentStores(),d=s.getContentStore();if(l){let e;for(const[t,n]of l.entries())if(n.id===o[o.length-1].id){e=l.splice(t+1);break}o=r().d9(o).reverse(),o=o.map(((o,n)=>{const i=o.getRecordStoreUIParent();null!=i&&i.valueIs(c().i)&&u().Od({parentStore:i,childToRemoveStore:o,transaction:t});const r=u().BE({parentStore:d,insertStore:o,afterStore:a,transaction:t});if(0===n&&e&&y(o))for(const a of e){const e=a.getRecordStoreUIParent();null!=e&&e.valueIs(c().i)&&u().Od({parentStore:e,childToRemoveStore:a,transaction:t}),u().BE({parentStore:o.getContentStore(),insertStore:a,transaction:t})}return r.childStore}))}return o}function v(e){const{transaction:t,blocks:o}=e,n=o[0];if(!n)return;const i=a().RM();if(!i)return;const s=I(i),l=r().cx(s,(e=>e.parentStore===n.getRecordStoreUIParent()&&e.afterStore===n)),c=r().qr(s,((e,t)=>t<l&&e.parentStore===n.getRecordStoreUIParent())),d=r().dF(s,((e,t)=>t<c&&!n.uiContains(e.parentStore)));return d?x({blocks:o,listPosition:d,transaction:t}):void 0}function h(e){const{transaction:t,blocks:o}=e,n=r().Z$(o);if(!n)return;const i=a().RM();if(!i)return;const s=I(i),l=r().cx(s,(e=>e.parentStore===n.getRecordStoreUIParent()&&e.afterStore===n)),c=s.find(((e,t)=>t>l&&!n.uiContains(e.parentStore)));return c?x({blocks:o,listPosition:c,transaction:t}):void 0}function _(e){return Boolean(e&&S(e))}function b(e){return Boolean(e&&w(e))}function y(e){const t=a().np(),o=e.getType(),i=e.getFormat();return o&&((0,n().TT)(o,i)||e===t||e.isPost())}function S(e){const t=e.getRecordStoreUIParent();if(null==t||!t.isTable(i().iU))return;const o=t.getAncestorRecordStoreAtRootPath();if(null==o||!o.isDefined()||!y(o))return;const n=o.getContentStores(),r=n[n.indexOf(e)-1];return null!=r&&r.isDefined()&&y(r)?{previousChildStore:r}:void 0}function w(e){const t=e.getRecordStoreUIParent();if(null==t||!t.isTable(i().iU))return;const o=t.getAncestorRecordStoreAtRootPath();if(null==o||!o.isDefined()||!y(o))return;const n=o.getRecordStoreUIParent();if(null==n||!n.isTable(i().iU))return;const r=n.getAncestorRecordStoreAtRootPath();return null!=r&&r.isDefined()&&y(r)?{parentBlockStore:o,grandparentBlockStore:r}:void 0}function k(e,t){let o=[];const{store:n}=e.props;if(e.props.canDropAbove&&C(n)){const e=n.getRecordStoreUIParent();null!=e&&e.valueIs(c().i)&&o.push({parentStore:e})}const i=t.filter((t=>t.getContextClosestSelectable()===e));for(const a of i)o=r().G0(o,k(a,t));if(e.props.canDropBelow&&C(n)){const e=n.getRecordStoreUIParent();null!=e&&e.valueIs(c().i)&&(e.id===n.id?o.push({parentStore:e}):o.push({parentStore:e,afterStore:n}))}return o}function I(e){let t=[];const o=l().C.getMembersByDOMOrder({filter:()=>!0}),n=e.getContentStores();for(const i of n){const e=o.find((e=>e.props.store===i));e&&(t=r().G0(t,k(e,o)))}return t}function C(e){return"collection"!==e.getParentTable()}function x(e){const{blocks:t,listPosition:o,transaction:n}=e,i=r().d9(t).reverse();for(const r of t){const e=r.getRecordStoreUIParent();null!=e&&e.valueIs(c().i)&&u().Od({parentStore:e,childToRemoveStore:r,transaction:n})}let a;return a=o.afterStore?i.map((e=>u().BE({insertStore:e,afterStore:o.afterStore,parentStore:o.parentStore,transaction:n}).childStore)):i.map((e=>u().Ce({prependStore:e,parentStore:o.parentStore,transaction:n}).childStore)),a}},744091:(e,t,o)=>{o.d(t,{Hk:()=>T,c_:()=>I,f8:()=>k,gt:()=>x,lP:()=>C});o(267602),o(470928),o(30005),o(241792);var n=()=>o(156642),i=()=>o(396136),r=()=>o(349220),a=()=>o(696459),s=()=>o(332542),l=()=>o(28063),c=()=>o(718959),d=()=>o(239482),u=()=>o(122479),p=()=>o(876822),m=()=>o(890324),f=()=>o(826955),g=()=>o(54512),v=()=>o(295274),h=()=>o(282662),_=()=>o(818254),b=()=>o(525038),y=()=>o(893379),S=()=>o(636340),w=()=>o(269299);function k(e){const{environment:t,transaction:o,titleText:n,recordStoreParentStore:a}=e,{databaseTemplateStore:s,createInValue:l}=function(e,t){let o;if("page"===e.type){const n=f().G.createChildStore(t,{table:i().iU,id:e.id});if(n.isTemplate()){const t=(0,d().Dg)(n,1);t&&(o=n,e={type:"page",id:t.id})}}return{databaseTemplateStore:o,createInValue:e}}(e.createInValue,a),c="block"===l.type?f().G.createChildStore(a,{table:i().iU,id:l.id}):void 0,u=S().j4({transaction:o,environment:t,type:"page",inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,properties:n?{title:[[n]]}:void 0,spaceId:a.pointer.spaceId});let p;if("block"===l.type)y().YM({transaction:o,childStore:u,parentStore:(0,r().TO)(c),alive:!0});else p=b().Ws({transaction:o,environment:t,targets:[u],value:l});return{environment:t,databaseTemplateStore:s,createdPages:[u],moveToStorePromise:p}}async function I(e){const{environment:t,createdPages:o,databaseTemplateStore:n,moveToStorePromise:r}=e.createInState;let a,s;(null==o?void 0:o.length)>0&&(a=o[0].id,s=o[0].getParentCollectionIdUpToTwoLevels()),g().W(t,{type:"page",from:e.analyticsFrom,new_page_id:a,creating_block_id:a,parent_collection_id:s});const{currentSpaceStore:l}=p().default.state;if(n)w().createAndCommit({userAction:"inlinePageActions.completeCreateIn",environment:t,canUndo:!0,perform:e=>{o.forEach((o=>v().ob({title:{text:o.getTitleValue()},environment:t,store:o,templateStore:n,isKeyboard:!1,isCreateIn:!0,transaction:e,from:"inline_page_action"})))}}),l&&await _().j2(l,l.id,n.id);else{const e=await r;l&&e&&e.table===i().iU&&await _().j2(l,l.id,e.id)}}function C(e){const{environment:t,transaction:o,parentStore:r,inlinePageIds:l}=e;if(0===l.length)return;const c=f().G.createChildStore(r,r.pointer),p=(0,d().eG)(c).find((e=>{if(e.table!==i().iU)return!1;const t=e.getType(),o=e.getFormat();return!(!t||!o)&&((0,n().Um)(t,o)||(0,n().S9)(t))})),g=p&&p.isCollectionView()?p.getCollectionStore():p,v=g&&m().Z.getMode(t,g);if(!g||(0,u().Ix)(v)||!g.canEdit()){for(const e of l)s().nO({pageStore:f().G.createChildStore(r,{table:i().iU,id:e}),transaction:o});return}let _=r;for(const n of l){const e=f().G.createChildStore(r,{table:i().iU,id:n});if(e.isEmptyPage()){s().nO({pageStore:e,transaction:o});continue}const t=!e.isDefined()||Boolean(e.getAlive());y().YM({parentStore:g,childStore:e,transaction:o,alive:t}),"block"!==g.table?"collection"!==g.table&&(0,a().t1)(g):(h().BE({parentStore:g.getContentStore(),afterStore:_,insertStore:e,transaction:o}),_=e)}}function x(e){const t=c().np();if(t){if(e&&e.table===i().iU)return{pageStore:(0,d().Dg)(e,0)||t,createInValue:{type:"block",id:e.id}};if(e&&(0,d().n3)(e)){const t=(0,d().Dg)(e,0);if(t)return{pageStore:t,createInValue:{type:"page",id:t.id}}}return{pageStore:t,createInValue:{type:"page",id:t.id}}}}async function T(e,t){const{createInValue:o,blocksToTransform:n}=t,r="page"===o.type?new(f().G)(e,{table:i().iU,id:o.id}):void 0,a=Boolean(r&&r.isTemplate()),{performResult:{transformedPages:s,pageStore:c}}=await w().createAndCommitAsync({environment:e,userAction:"inlinePageActions.createNewPageIn",waitForServerCommit:!0,perform:async t=>{const s=n.map((o=>l().vs({environment:e,block:o,blockType:"page",transaction:t})));let c;if("page"===o.type)if(r&&a){const o=r.getAssociatedCollectionStore(),n=null==o?void 0:o.getParentPointer();n&&n.table===i().iU&&(c=await b().Y({transaction:t,environment:e,targets:s,value:{type:"page",id:n.id}}))}else{const{mainEditorCurrentBlockStore:n}=p().default.state;n&&n.id!==o.id&&(c=await b().Y({transaction:t,environment:e,targets:s,value:o}))}else"team"===o.type&&await b().Ws({transaction:t,environment:e,targets:s,value:o});return{transformedPages:s,pageStore:c}}});await I({analyticsFrom:"new_page_in",createInState:{environment:e,createdPages:s,databaseTemplateStore:a?r:void 0,moveToStorePromise:Promise.resolve(c)}})}},887274:(e,t,o)=>{o.d(t,{G2:()=>P,Pf:()=>A,Wf:()=>R,jW:()=>B});o(267602),o(470928),o(30005);var n=()=>o(926724),i=()=>o(714230),r=()=>o(109477),a=()=>o(799891),s=()=>o(955620),l=()=>o(788860),c=()=>o(513670),d=()=>o(308186),u=()=>o(110232),p=()=>o(544903),m=()=>o(594546),f=()=>o(709344),g=()=>o(472719),v=()=>o(527278),h=()=>o(345918),_=()=>o(876822),b=()=>o(308939),y=()=>o(826955),S=()=>o(838266),w=()=>o(700696),k=()=>o(824462),I=()=>o(528918),C=()=>o(636340),x=()=>o(269299),T=()=>o(423402);const M=(0,l().vU)({JiraAuthorizationError:{id:"jiraImport.unauthorizedAccess",defaultMessage:"Unauthorized Error: API key does not belong to Jira Admin."},JiraAuthenticationSuccess:{id:"jiraImport.successfulAuth",defaultMessage:"Successfully established Jira connection"},JiraAuthenticationInvalidDetails:{id:"jiraImport.invalidDetails",defaultMessage:"Invalid Details"},TasksCollectionName:{defaultMessage:"Issues",id:"appTemplates.tasks.issuesDatabaseName"},JiraFetchAccountError:{id:"jiraSync.setup.fetchAccountError.message",defaultMessage:"Failed to fetch accounts"}});async function P(e){const{environment:t,userEmail:o,spaceId:n,flowId:i,instance:r,authInfo:s}=e;(0,m().j)({environment:t,event:{eventName:"external_sync_auth",eventProperties:{integration:"jira",actionType:"admin_auth_initiated",flowId:i}}});try{var u;const a=e.site.replace(/\/+$/,"");if(!t.currentUser.id)return d().PV({message:v().Z.formatMessage(M.JiraAuthenticationInvalidDetails)}),void I().x();let g;if("Basic"===s.authType&&"instance"in s&&"DataCenter"===s.instance)g=await k().callApi({eventName:"authenticateJiraUser",environment:t,data:{userEmail:o,site:a,userId:t.currentUser.id,spaceId:n,instance:r,username:s.username,password:s.password,authType:s.authType}});else{if(!("apiKey"in s))return;g=await k().callApi({eventName:"authenticateJiraUser",environment:t,data:{userEmail:o,site:a,apiKey:s.apiKey,userId:t.currentUser.id,spaceId:n,instance:r}})}if(await T().pJ({environment:t}),(0,m().j)({environment:t,event:{eventName:"external_sync_auth",eventProperties:{integration:"jira",actionType:"admin_auth_status",flowId:i,status:"success"===g.type&&null!==(u=g)&&void 0!==u&&null!==(u=u.data)&&void 0!==u&&u.isAdmin?"success":"failed"}}}),"failed"===g.type){const e=(0,f().p)(g);console.error(g.error);const t=b().ZP.getInitialState();b().ZP.setState(t);const o=(0,l().vU)({dismissButtonLabel:{defaultMessage:"OK",id:"dialog.dismissButton.label"}});d().vC({message:e,showCancel:!1,keepFocus:!1,items:[{label:v().Z.formatMessage(o.dismissButtonLabel),onAccept:c().yR}]})}else{var p;if(null!==(p=g)&&void 0!==p&&null!==(p=p.data)&&void 0!==p&&p.isAdmin){b().ZP.setState({...b().ZP.state,type:"teamspace-selection",open:!0,flowId:i,site:a,botId:g.data.botId}),(0,m().j)({environment:t,event:{eventName:"external_sync_teamspace_selection",eventProperties:{integration:"jira",actionType:"teamspace_modal_render",flowId:i}}});const e=S().default.getInitialState();S().default.setState(e)}else b().ZP.setState({...b().ZP.state,type:"auth",open:!0,adminTokenError:!0,flowId:i,site:void 0}),(0,m().j)({environment:t,event:{eventName:"external_sync_auth",eventProperties:{integration:"jira",actionType:"admin_auth_render",flowId:i}}})}I().x()}catch(g){(0,m().j)({environment:t,event:{eventName:"external_sync_auth",eventProperties:{integration:"jira",actionType:"admin_auth_status",flowId:i,status:"failed"}}}),a().log({level:"error",from:"jiraActions",type:"authenticateWithJira",data:{message:"Failed to authenticate with Jira",miscDataToConvertToString:{err:g}}})}}async function A(e){let{environment:t,selectedTeamspaceId:o,siteUrl:l,botId:c,instanceType:d}=e;try{const{appTemplatesSetupActions:e,appConfigs:a}=await p().vF.load(),{teams:m}=w().default.getState(),{currentSpaceStore:f,currentSpaceViewStore:g}=_().default.getState(),h=o?m.find((e=>e.id===o)):f;if(!g||!h)return;const{serverCommitResult:b,performResult:S}=x().createAndCommit({environment:t,perform:o=>{var i;const r={type:"preset",uri:n().T3}.uri,s=null===(i=(0,u().iX)(a(),r))||void 0===i?void 0:i.uri;if(!s)return;const l=a().find((e=>e.uri===s));if(null==l?void 0:l.presets.find((e=>e.uri===r))){return e.initializeApp({environment:t,spaceViewStore:g,appParentStore:h,appUri:s,presetUri:r,transaction:o,from:"jira_import"})}return[]},canUndo:!0,userAction:"importActions.importJira"}),k=t.defaultRecordCache.inMemoryRecordCache;return await b,null==S||S.forEach((e=>{const o=e.getFormat(),a=null==o?void 0:o.collection_pointer;if(a){const e=k.getRecord({pointer:a,userId:t.currentUser.id});e&&e.value&&x().createAndCommit({userAction:"jiraActions.updateFormatForCollections",environment:t,canUndo:!0,perform:o=>{const u=e.value,p=null==u?void 0:u.format;if(p){p.external_collection_type=r().Vj.Jira,p.synced_collection_external_url=l,p.synced_collection_instance_type=d,p.bot_id=c,u.icon=p.app_config_uri===n().Ym?i().Z.images.appPackages.jiraTaskIconSvg:i().Z.images.appPackages.jiraProjectIconSvg;const e=new(y().NW)(t,a);p.app_config_uri===n().Ym&&(u.name=(0,s().TPx)(v().Z.formatMessage(M.TasksCollectionName))),C().sW({store:e,data:u,transaction:o})}}})}})),null==S?void 0:S.find((e=>{var t;return(null===(t=e.getFormat())||void 0===t?void 0:t.app_config_uri)===n().Aw}))}catch(m){return void a().log({level:"error",from:"jiraActions",type:"projectPageNotCreated",data:{message:"Error while creating project page for Jira sync",miscDataToConvertToString:{error:m}}})}}function R(e){const t=b().ZP.state.spaceId;if(e.spaceId!==t){const t=b().ZP.getInitialState();t.spaceId=e.spaceId,b().ZP.setState(t)}}async function B(e){var t;const{environment:o,from:n,action:i}=e,{currentSpaceStore:r,currentUserSettingsStore:s}=_().default.state;if(!r)return;const l=b().ZP.getFlowId(),c=(0,h().lQ)(r);if(!(void 0!==(null==s||null===(t=s.getSettings())||void 0===t?void 0:t.jira_sync_guide_dismissed_at))&&c)return void("collection_header"===n||"improve_jira_sync_popup"===n?(b().ZP.setState({...b().ZP.state,rootAction:i,type:"improve-jira-sync",open:!0}),(0,m().j)({environment:o,event:{eventName:"external_sync_setup_action",eventProperties:{integration:"jira",actionType:"improve_jira_sync_modal_render",flowId:l}}})):(b().ZP.setState({...b().ZP.state,rootAction:i,type:"sync-guide",open:!0}),(0,m().j)({environment:o,event:{eventName:"external_sync_setup_action",eventProperties:{integration:"jira",actionType:"sync_guide_render",flowId:l}}})));let d=(await(0,g().jl)(o,r.id)).account;d||(d=[],a().log({level:"debug",from:"jiraActions",type:"setupJiraSync",data:{miscDataToConvertToString:{spaceId:r.id}}}));const u=b().ZP.state.rootAction;!d.length||"add_account"===i||"sync_guide"===n&&"add_account"===u?c?(b().ZP.setState({...b().ZP.state,type:"auth",open:!0}),(0,m().j)({environment:o,event:{eventName:"external_sync_auth",eventProperties:{integration:"jira",actionType:"admin_auth_render",flowId:l}}})):(b().ZP.setState({...b().ZP.state,type:"request-feature",open:!0}),(0,m().j)({environment:o,event:{eventName:"external_sync_setup_action",eventProperties:{integration:"jira",actionType:"request_feature_render",flowId:l}}})):(b().ZP.setState({...b().ZP.state,type:"teamspace-selection",open:!0}),(0,m().j)({environment:o,event:{eventName:"external_sync_teamspace_selection",eventProperties:{integration:"jira",actionType:"teamspace_modal_render",flowId:l}}}))}},831842:(e,t,o)=>{o.d(t,{Fe:()=>a,Zm:()=>l,dJ:()=>r,ys:()=>s});o(670560),o(267602),o(653476),o(241792),o(228244);var n=()=>o(513670);function i(e,t){return e.KeyboardShortcutStackStore.state.stack.some((e=>t===e.listener))}function r(e,t,o){const{stack:n}=e.KeyboardShortcutStackStore.state;for(let i=n.length-1;i>=0;i--){const r=n[i],a=r.shortcuts[o];if(e.KeyboardShortcutStackStore.debugPropagation){const[t,n]=e.KeyboardShortcutStackStore.getDebugInfoForStackItem(i),s=r.enable&&a?`propagating ${o} to ${t}`:`not propagating ${o} to ${t}`;console.info(`keyboardShortcutStackActions: ${s}`,n)}if(r.enable&&a)return void a(t)}}function a(e){const{environment:t,stackItem:o}=e,r=t.KeyboardShortcutStackStore;if(i(t,o.listener)){const e=r.state.stack.map((e=>e.listener===o.listener?o:e));r.setState({...r.state,stack:e})}else r.state.stack.push(o),r.setState({stack:n().MR(r.state.stack,(e=>e.priority))})}function s(e,t){if(i(e,t)){const o=e.KeyboardShortcutStackStore,n=o.state.stack.filter((e=>t!==e.listener));o.setState({...o.state,stack:n})}}function l(e,t){r(e,t,t.type)}},13382:(e,t,o)=>{o.d(t,{Bk:()=>f,Ie:()=>v,Vr:()=>g,nr:()=>h,vq:()=>_});var n=()=>o(161002),i=()=>o(572680),r=()=>o(396136),a=()=>o(245015),s=()=>o(205228),l=()=>o(429725),c=()=>o(122479),d=()=>o(826955);const u="lastVisitedRoute",p="lastVisitedRouteUserId",m="lastVisitedRouteSpaceId";function f(e,t){const o=i().parseRoute({url:window.location.href,isMobile:e.device.isMobile,baseUrl:s().default.domainBaseUrl,publicDomainName:s().default.publicDomainName,protocol:s().default.protocol,currentUrl:window.location.href}),{route:n,userId:a}=b();("root"===o.name||"new"===o.name||"nativeTab"===o.name)&&n&&"page"===n.name&&n.blockId&&a===t&&new(d().G)(e,{table:r().iU,id:n.blockId,spaceId:n.spaceId}).load()}function g(e){const{route:t,userId:o}=b();if("page"===(null==t?void 0:t.name)&&t.blockId){return{url:(0,l().ZP)({fullyQualified:!1,store:new(d().G)(e,{table:r().iU,id:t.blockId,spaceId:t.spaceId},{userId:o}),scrollToBlockId:t.scrollToBlockId,peekViewBlockId:t.peekViewBlockId,peekMode:t.peekMode,collectionViewId:t.collectionViewId,templateGalleryItem:t.templateGalleryItem,projectManagementLaunch:t.projectManagementLaunch,discussionId:void 0,pageVisitSource:void 0}),userId:o}}if("team"===(null==t?void 0:t.name))return{url:(0,n().y)({teamId:t.teamId}),userId:o};if("space"===(null==t?void 0:t.name)){return{url:(0,i().Xs)({route:t}),userId:o}}return{}}async function v(e){const{route:t,userId:o}=b();let a,s;if(t)if("page"===t.name&&t.blockId){const n=new(d().G)(e,{table:r().iU,id:t.blockId,spaceId:t.spaceId},{userId:o});await n.load();c().IJ(e,n)?(s=t.spaceId??n.getSpaceId(),a=s?i().pv(s):void 0):(a=(0,l().ZP)({fullyQualified:!1,store:n,scrollToBlockId:t.scrollToBlockId,peekViewBlockId:t.peekViewBlockId,peekMode:t.peekMode,collectionViewId:t.collectionViewId,templateGalleryItem:t.templateGalleryItem,projectManagementLaunch:t.projectManagementLaunch,discussionId:void 0,pageVisitSource:void 0}),s=n.getSpaceId())}else"space"===t.name?(s=t.spaceId,a=(0,i().Xs)({route:t})):"nativeTab"===t.name?s=t.spaceId:"team"===t.name&&(a=(0,n().y)({teamId:t.teamId}));return{url:a,userId:o,route:t,spaceId:s}}function h(e){const{route:t,userId:o,spaceId:n}=e;a().Z.set(u,t),a().Z.set(p,o),a().Z.set(m,n)}function _(){a().Z.remove(u),a().Z.remove(p),a().Z.remove(m)}function b(){return{route:a().Z.get(u),userId:a().Z.get(p),spaceId:a().Z.get(m)}}},577931:(e,t,o)=>{o.d(t,{FZ:()=>h,U_:()=>v,fU:()=>y});var n=()=>o(156642),i=()=>o(396136),r=()=>o(349220),a=()=>o(826955),s=()=>o(262453),l=()=>o(491927),c=()=>o(421654),d=()=>o(282662),u=()=>o(636340);function p(e){const t=e.getRecordStoreUIAncestor(2);if(t&&t instanceof a().G&&t.isType(n().Ti.columnList))return t}function m(e){return e&&e instanceof a().G&&e.isType(n().Ti.column)}function f(e){const{environment:t,targets:o,inMemoryRecordCache:i,transaction:a}=e;(0,r().T)(o.length>0,"At least one target block is required.");const s=u().j4({environment:t,type:n().Ti.columnList,properties:{},inMemoryRecordCache:i,transaction:a,spaceId:o[0].pointer.spaceId}),c=s.getContentStore();for(const n of o)d().R3({parentStore:c,appendStore:n,transaction:a});return l().xh(t),s}function g(e){const{environment:t,targets:o,inMemoryRecordCache:i,transaction:a}=e;(0,r().T)(o.length>0,"At least one target block is required.");const s=u().j4({environment:t,type:n().Ti.column,format:{column_ratio:1},inMemoryRecordCache:i,transaction:a,spaceId:o[0].pointer.spaceId}),l=s.getContentStore();for(const n of o)d().R3({parentStore:l,appendStore:n,transaction:a});return s}function v(e){const{environment:t,parentStore:o,insertStores:n,leftStore:r,transaction:s}=e;if(0===n.length)return[];let c,u;if(l().FT(t,{side:"left"}),m(r))c=r,u=p(r);else{c=g({environment:t,targets:[r],inMemoryRecordCache:o.inMemoryRecordCache,transaction:s});const n=f({environment:t,targets:[c],inMemoryRecordCache:o.inMemoryRecordCache,transaction:e.transaction});u=d().rS({parentStore:o,oldChildStore:r,newChildStore:n,transaction:s}).childStore}const v=g({environment:t,targets:n,inMemoryRecordCache:o.inMemoryRecordCache,transaction:s});if(u){const t=u.getContentStore();d().Vt({parentStore:t,insertStore:v,beforeStore:c,transaction:e.transaction}),_({columnListStore:u,addedColumnStore:v,transaction:s});return a().G.createChildStore(t,{table:i().iU,id:v.id}).getContentStores()}return[]}function h(e){const{environment:t,parentStore:o,insertStores:n,rightStore:r,transaction:s}=e;if(0===n.length)return[];let c,u;if(l().FT(t,{side:"right"}),m(r))c=r,u=p(r);else{c=g({environment:t,targets:[r],inMemoryRecordCache:o.inMemoryRecordCache,transaction:s});const n=f({environment:t,targets:[c],inMemoryRecordCache:o.inMemoryRecordCache,transaction:e.transaction});u=d().rS({parentStore:o,oldChildStore:r,newChildStore:n,transaction:s}).childStore}const v=g({environment:t,targets:n,inMemoryRecordCache:o.inMemoryRecordCache,transaction:s});if(u){const t=u.getContentStore();d().BE({parentStore:t,insertStore:v,afterStore:c,transaction:e.transaction}),_({columnListStore:u,addedColumnStore:v,transaction:s});return a().G.createChildStore(t,{table:i().iU,id:v.id}).getContentStores()}return[]}function _(e){const{columnListStore:t,addedColumnStore:o,transaction:n}=e,i=t.getContentStores(),r=1/i.length;c().FH({stores:[o],update:{column_ratio:r},transaction:n});for(const a of i)if(a.id!==o.id){const e=a.getColumnRatio();c().FH({stores:[a],update:{column_ratio:(1-r)*e},transaction:n})}}function b(e){const{columnListStore:t,removedColumnStore:o,transaction:n}=e,i=t.getContentStores(),r=o.getColumnRatio();for(const a of i){const e=a.getColumnRatio();c().FH({stores:[a],update:{column_ratio:e/(1-r)},transaction:n})}}function y(e){const{parentStore:t,transaction:o}=e,n=t.getRecordStoreUIParent();let i;if(m(n)&&(i=p(n)),i){const e=i.getContentStore(),t=i.getContentStores();for(const r of t){0===r.getContentStores().length&&(d().Od({parentStore:e,childToRemoveStore:r,shouldGarbageCollect:!1,transaction:o}),b({columnListStore:i,removedColumnStore:r,transaction:o}))}const n=i.getContentStores();if(0===n.length){const e=i.getRecordStoreUIParent();null!=e&&e.valueIs(s().i)&&d().Od({parentStore:e,childToRemoveStore:i,transaction:o,shouldGarbageCollect:!1})}else if(1===n.length){const e=i.getRecordStoreUIParent(),t=n[0],r=t.getContentStore(),a=t.getContentStores();if(a.reverse(),null!=e&&e.valueIs(s().i)){for(const t of a)d().Od({parentStore:r,childToRemoveStore:t,shouldGarbageCollect:!1,transaction:o}),d().BE({parentStore:e,insertStore:t,afterStore:i,transaction:o});d().Od({parentStore:e,childToRemoveStore:i,transaction:o,shouldGarbageCollect:!1})}}}}},367019:(e,t,o)=>{o.d(t,{G:()=>n});const n={legacyTransclusionActions:new(o(677559).Ss)("legacyTran",(async()=>await o.e(89793).then(o.bind(o,659134))))}},33649:(e,t,o)=>{o.d(t,{Bn:()=>b,F5:()=>_,PP:()=>v,dz:()=>f,gp:()=>g,iX:()=>h});o(267602),o(470928);var n=()=>o(955620),i=()=>o(493954),r=()=>o(191003),a=()=>o(505462),s=()=>o(550054),l=()=>o(385185),c=()=>o(127519),d=()=>o(15672),u=()=>o(970105),p=()=>o(990966),m=()=>o(269299);function f(e){const t=c().default.state;if("editing"!==t.mode)return;const o="selectionFocus"===e.type?(0,r().TD)({store:e.store,selection:e.selection}):t.multiSelection,s=(0,r().QY)(o);if(!s)return;const{tokensInsideRange:d}=n().xrQ(s.store.getValue(),o.start.index,o.end.index),u=d.find((e=>Boolean(n().Hze(e)))),p=a().get();if(!p)return;const m=a().getRect(p);if(!m)return;const f=Boolean(u);let g="";if(!u){const e=n().Jcv(d),t=n().rOz(e);t&&(g=t.href)}l().Z.setState({open:!0,url:g,title:u&&(0,i().Ts)(u)||"",type:"text",editingToken:u,savedTextSelectionState:{...t,multiSelection:o},selectionRect:m,focusLinkInput:!f&&e.focus,focusTitleInput:f&&e.focus})}function g(e){const{environment:t,transaction:o,url:n,title:i,editingToken:a,savedTextSelectionState:s}=e,l=(0,r().QY)(s.multiSelection);if(!l)return;a&&u().ST({environment:t,store:l.store,annotationKey:"a",selection:l.selection,transaction:o,updateSelection:!1});const c=["a",n];return d().WO({environment:t,store:l.store,annotation:c,selection:l.selection,transaction:o}),p().setSelection({store:l.store,selection:{startIndex:l.selection.startIndex,endIndex:l.selection.endIndex}}),i?{editingToken:[i,[c]]}:void 0}function v(e){const t=l().Z.state;if(!t.open)return;const{editingToken:o,savedTextSelectionState:n}=t;if(!o)return;const i=(0,r().QY)(n.multiSelection);i&&(m().createAndCommit({userAction:"linkAnnotationActions.unlinkSelection",environment:e,canUndo:!0,perform:t=>{u().ST({environment:e,store:i.store,annotationKey:"a",selection:i.selection,transaction:t,updateSelection:!1})}}),c().default.emit(),l().Z.reset())}function h(e){const{environment:t,title:o,transaction:i,editingToken:a,savedTextSelectionState:s}=e;if(!o||!a)return;const l=(0,r().QY)(s.multiSelection);if(!l)return;const c=l.store;u().pz({environment:t,multiSelection:s.multiSelection,transaction:i});const d=l.selection.startIndex,m=d+o.length,f={startIndex:d,endIndex:m},g=["a",n().Hze(a)],v=n().V3y(o,[g]);return u().mM({environment:t,store:c,tokens:[v],index:d,transaction:i}),p().setSelection({store:c,selection:f}),{editingToken:[o,[g]],savedTextSelectionState:{...s,multiSelection:{start:{store:c,index:d},end:{store:c,index:m}}}}}function _(){l().Z.setState({open:!1,type:"text"})}function b(){const e=l().Z.state;if(!e.open)return!1;if(e.focusLinkInput||e.focusTitleInput)return!1;const t=c().default.state;if("editing"!==t.mode)return!0;const o=(0,r().QY)(t.multiSelection);if(!o)return!0;const{store:i,selection:a}=o;return(0,s().wd)(a)?!n().oP(i.getValue(),a.startIndex,a.endIndex,n().GKr.Link):!(0,r()._v)(t.multiSelection,e.savedTextSelectionState.multiSelection)}},282662:(e,t,o)=>{o.d(t,{BE:()=>c,Ce:()=>f,HP:()=>g,MK:()=>p,Od:()=>u,R3:()=>m,Vt:()=>d,rS:()=>l});o(670560);var n=()=>o(749826),i=()=>o(577931),r=()=>o(332542),a=()=>o(893379),s=()=>o(269299);function l(e){const{parentStore:t,oldChildStore:o,newChildStore:n,transaction:i}=e,r=o.id,l=n.id,c=(t.getValue()||[]).indexOf(r);a().D0({parentStore:t,childStore:n,transaction:i}),a().If({parentStore:t,childStore:o,transaction:i}),c>=0&&(s().applyOperation({transaction:i,store:t,operation:{pointer:t.pointer,path:t.path,command:"listAfter",args:{id:l,after:r}}}),s().applyOperation({transaction:i,store:t,operation:{pointer:t.pointer,path:t.path,command:"listRemove",args:{id:r}}}));return{parentStore:t,childStore:n.cloneWithNewUIParent(t)}}function c(e){const{parentStore:t,insertStore:o,afterStore:i,transaction:l,preferHighLevelOperations:c}=e;let d;i&&(d=i.id),c&&n().default.checkGate({gateName:"prefer_high_level_operations"})?(l.annotateWithDebugTag("tx_tag.prefer_high_level_operations"),r().jG({childStore:o,parentStore:t,transaction:l,after:d})):(a().D0({parentStore:t,childStore:o,transaction:l}),s().applyOperation({transaction:l,store:t,operation:{pointer:t.pointer,path:t.path,command:"listAfter",args:{after:d,id:o.id}}}));return{parentStore:t,childStore:o.cloneWithNewUIParent(t)}}function d(e){const{parentStore:t,insertStore:o,beforeStore:n,transaction:i}=e;let r;n&&(r=n.id),a().D0({parentStore:t,childStore:o,transaction:i}),s().applyOperation({transaction:i,store:t,operation:{pointer:t.pointer,path:t.path,command:"listBefore",args:{before:r,id:o.id}}});return{parentStore:t,childStore:o.cloneWithNewUIParent(t)}}function u(e){void 0===e.shouldGarbageCollect&&(e.shouldGarbageCollect=!0);const{parentStore:t,childToRemoveStore:o,shouldGarbageCollect:r,transaction:l}=e;if(a().If({parentStore:t,childStore:o,transaction:l}),s().applyOperation({transaction:l,store:t,operation:{pointer:t.pointer,path:t.path,command:"listRemove",args:{id:o.id}}}),r&&l.preEnqueueActions.push((()=>{i().fU({parentStore:t,transaction:l})})),n().default.checkGate({gateName:"docs_list_actions_remove_no_clone"}))return{parentStore:t,childStore:o};const c=o.cloneWithNewUIParent(t);return{parentStore:t,childStore:c}}function p(e){const{parentStore:t,appendStore:o,transaction:n}=e;a().D0({parentStore:t,childStore:o,transaction:n}),s().applyOperation({transaction:n,store:t,operation:{pointer:t.pointer,path:t.path,command:"keyedObjectListAfter",args:{value:o.pointer,after:void 0}}});return{parentStore:t,childStore:o.cloneWithNewUIParent(t)}}function m(e){const{parentStore:t,appendStore:o,transaction:n,after:i}=e;a().D0({parentStore:t,childStore:o,transaction:n}),s().applyOperation({transaction:n,store:t,operation:{pointer:t.pointer,path:t.path,command:"listAfter",args:{id:o.id,after:i}}});return{parentStore:t,childStore:o.cloneWithNewUIParent(t)}}function f(e){const{parentStore:t,prependStore:o,transaction:n,before:i}=e;a().D0({parentStore:t,childStore:o,transaction:n}),s().applyOperation({transaction:n,store:t,operation:{pointer:t.pointer,path:t.path,command:"listBefore",args:{id:o.id,before:i}}});return{parentStore:t,childStore:o.cloneWithNewUIParent(t)}}function g(e){const{parentStore:t,currentStore:o,afterStore:n,transaction:i}=e;n?c({parentStore:t,insertStore:o,afterStore:n,transaction:i}):f({parentStore:t,prependStore:o,transaction:i});return{parentStore:t,childStore:o.cloneWithNewUIParent(t)}}},576828:(e,t,o)=>{o.d(t,{Bm:()=>T,DC:()=>x,HO:()=>M,LQ:()=>I,UG:()=>P,dM:()=>B,uQ:()=>C});o(821057),o(267602),o(916054),o(241792);var n=()=>o(492788),i=()=>o(156642),r=()=>o(577223),a=()=>o(426546),s=()=>o(513670),l=()=>o(718959),c=()=>o(852465),d=()=>o(321930),u=()=>o(339523),p=()=>o(960562),m=()=>o(826955),f=()=>o(807230),g=()=>o(384667),v=()=>o(574089),h=()=>o(544607),_=()=>o(577931),b=()=>o(282662),y=()=>o(636340),S=()=>o(453999),w=()=>o(879952),k=()=>o(990966);function I(e){const{environment:t,droppedDirection:o,droppedStores:n,targetStore:a,targetParentStore:l,transaction:c,duplicate:d}=e,u=n.every((e=>e.isExternalObjectInstancePageBlockStore()))||d;if(a&&o===p().v.Onto){w().ZH({environment:t});const e=!(a.isInsideTemplate()||a.isInsideFactoryOrDuplicateBlocksAction());let o=a;if(a.isType(i().Ti.alias)){const e=a.getAliasTargetStore();if(!e)throw new Error("Alias has no target.");e instanceof m().G&&(o=e)}const s=v().LQ({environment:t,droppedStores:n,duplicate:u,transaction:c,resolveTemplateVariables:e}),l=o.getCollectionStore();if(o.isCollectionView()&&!o.isCollectionViewPageWithContent()){if(!l)throw new Error("CollectionStore is not defined.");const e=g().o3({environment:t,stores:s,transaction:c,spaceId:l.getSpaceId()});for(const o of e)g().mp({environment:t,store:o,collectionStore:l,shouldCoerce:!0,groupsPointer:[],transaction:c});return e}{const e=o.getAssociatedCollectionStore();if(null!=e&&e.isPageTreeCollection())for(const o of s){if("page"!==o.getType())continue;if(!o.isDefined())continue;const t=r().Xq({blockProperties:o.getProperties(),oldSchema:o.getSchema(),newSchema:e.getSchema(),typesMatch:!1,oldPropertyMapping:void 0,newPropertyMapping:void 0});t.propertyUpdate&&Object.keys(t.propertyUpdate).length>0&&y().sW({store:o.getPropertiesStore(),data:t.propertyUpdate,transaction:c})}const t=o.getContentStore();for(const o of s)b().R3({parentStore:t,appendStore:o,transaction:c});return s}}{const e=!!a&&!(a.isInsideTemplate()||a.isInsideFactoryOrDuplicateBlocksAction(!1));let i=v().LQ({environment:t,droppedStores:n,duplicate:u,transaction:c,resolveTemplateVariables:e});return o===p().v.Above?(i=s().d9(i),a?i=i.map((e=>b().Vt({parentStore:l,insertStore:e,beforeStore:a,transaction:c}).childStore)):(i.reverse(),i=i.map((e=>b().Ce({parentStore:l,prependStore:e,transaction:c}).childStore)))):o===p().v.Below?(i=s().d9(i),a?(i.reverse(),i=i.map((e=>b().BE({parentStore:l,insertStore:e,afterStore:a,transaction:c}).childStore))):i=i.map((e=>b().R3({parentStore:l,appendStore:e,transaction:c}).childStore))):a&&o===p().v.Left?i=_().U_({environment:t,parentStore:l,insertStores:i,leftStore:a,transaction:c}):a&&o===p().v.Right&&(i=_().FZ({environment:t,parentStore:l,insertStores:i,rightStore:a,transaction:c})),S().DV({environment:t,insertedStores:i}),w().Z5({environment:t,stores:i}),i}}function C(e){const{environment:t,files:o,droppedDirection:n,targetStore:i,targetParentStore:r,transaction:a}=e,s=r.inMemoryRecordCache,c=l().qQ(t);I({environment:t,targetParentStore:r,targetStore:i,droppedDirection:n,droppedStores:h().z({environment:t,files:o,inMemoryRecordCache:s,pageWidth:c,transaction:a,spaceId:null==i?void 0:i.pointer.spaceId}),duplicate:!1,transaction:a})}function x(e){const{environment:t,targetStore:o,isAtStartOfLine:n}=e;(function(e){const{environment:t,isClick:o,targetStore:n}=e;if(!o)return!1;const r=n.findRecordStoreUIAncestor((e=>e instanceof m().G&&e.isTransclusionType())).ancestor;if(r&&r instanceof m().G){const e=n.findRecordStoreUIAncestor((e=>e instanceof m().G&&e.getType()===i().Ti.transclusionReference)).ancestor,o=(e&&e instanceof m().G?e:void 0)||r,a=o.getRecordStoreUIParent();if(!a||!(0,c().dz)(a))return;return w().Z5({environment:t,stores:[o]}),!0}return!1})(e)||B({environment:t,store:o,isAtStartOfLine:n})||function(e){const{environment:t,targetStore:o,isAtStartOfLine:n}=e,i=w().KX(),r=i.indexOf(o);if(-1===r)return!1;if(n)for(let a=r;a>=0&&a>r-20;a--){if(B({environment:t,store:i[a],isAtStartOfLine:!1}))return!0}else for(let a=r;a<i.length&&a<r+20;a++){if(B({environment:t,store:i[a],isAtStartOfLine:!0}))return!0}}(e)}function T(e){const{environment:t,targetStore:o,isAtStartOfLine:n}=e;B({environment:t,store:o,isAtStartOfLine:n})||R({...e,placement:"after"})}function M(e){return A({...e,destination:"page"})}function P(e){return A({...e,destination:"sibling"})}function A(e){const{environment:t,container:o,store:n,transaction:r,destination:l}=e,u=function(e){var t;const{container:o,store:n}=e;let r=(0,d().dq)({includeNonSelectableListContainer:!0,container:o});r&&n&&(r=s().Z$((0,a().DY)([r],(e=>e.value.store===n))));if(!r)return;let l=r;for(;l.children.length>0;){const e=s().Z$(l.children);if(0===e.children.length)break;const t=e.value.store.getType();if(t&&i().BT[t])break;l=e}return{parentStore:l.value.store,siblingStore:null===(t=s().Z$(l.children))||void 0===t?void 0:t.value.store}}({container:o,store:n});if(!u)return!1;const{parentStore:p,siblingStore:f}=u;if(f&&(0,c().Nm)(f))return!1;const g={sibling:p,page:p.getRecordStoreUIRoot()}[l];return g instanceof m().G&&(!g.isNonEditableState()&&R({environment:t,targetParentStore:g.getContentStore(),placement:"after",transaction:r}))}function R(e){const{environment:t,targetStore:o,targetParentStore:r,placement:a,transaction:s}=e;if(r.getValue()&&(0,f().ww)(t)&&(0,f().ww)(t)){const e=y().j4({environment:t,type:i().Ti.text,inMemoryRecordCache:r.inMemoryRecordCache,transaction:s,spaceId:r.pointer.spaceId}),l="after"===a?b().BE({parentStore:r,afterStore:o,insertStore:e,transaction:s}):b().Vt({parentStore:r,beforeStore:o,insertStore:e,transaction:s});return n().default.afterNextFlush((()=>{B({environment:t,store:l.childStore,isAtStartOfLine:!1})})),!0}return!1}function B(e){const{environment:t,store:o,isAtStartOfLine:n}=e,i=(0,u().mh)(o);return!!i&&(w().eP({environment:t,store:o}),n?k().setSelectionAtStart({store:i}):k().setSelectionAtEnd({store:i}),!0)}},528918:(e,t,o)=>{o.d(t,{j:()=>r,x:()=>a});var n=()=>o(527278),i=()=>o(105381);function r(e){let{message:t,interpolatedValues:o,targetRecordId:r}=e;i().Z.setState({open:!0,message:n().Z.formatMessage(t,o),targetRecordId:r})}function a(){i().Z.setState({open:!1,targetRecordId:void 0})}},507795:(e,t,o)=>{o.d(t,{S:()=>c});var n=()=>o(43721),i=()=>o(8),r=()=>o(620218),a=()=>o(590166),s=()=>o(876822),l=()=>o(485014);async function c(e,t){const{hasPublicAccessPermission:o}=i().bC(e),c=s().default.state.currentSpaceStore,d=s().default.state.currentSpaceViewStore;if(o)return;if(!c)return;let u=(0,n().U)({environment:e,overrideSpaceStore:c,overrideSpaceViewStore:d});const p=await(0,a().S1)({environment:e,currentSpaceStore:c,currentSpaceViewStore:d});if(u={...u,...(0,n().v)(p)},p){let o=!1,n=0;l().Z.update((e=>{var t;const i=null===(t=e.localSearchableBlocksCache)||void 0===t?void 0:t.buildStartTime;return i&&i>=p.buildStartTime?e:(o=!0,n=(e.version??0)+1,{...e,localSearchableBlocksCache:p,version:n})})),o&&r().default.measure({metricName:"search_local_refresh_searchable_blocks",startTime:p.buildStartTime},{environment:e,data:{buildStartTime:p.buildStartTime,searchSessionId:void 0,documentCount:p.blocks.documentCount,cacheStats:u,refreshTrigger:t,numRecordsRequiredSync:p.numRecordsRequiredSync,timings:p.timings,version:n}})}}},762478:(e,t,o)=>{o.d(t,{$:()=>r,Z:()=>a});var n=()=>o(145702),i=()=>o(879952);function r(e,t){t.disableClearSelection||i().ZH({environment:e}),n().Z.setState({...t,isActive:!0})}function a(){const e=n().Z.state;e.isActive&&e.onCancel&&e.onCancel(),n().Z.reset()}},627817:(e,t,o)=>{o.d(t,{Br:()=>V,RL:()=>F,_P:()=>D,lZ:()=>U,xv:()=>N});o(267602),o(30005);var n=()=>o(263184),i=()=>o(956057),r=()=>o(334643),a=()=>o(955620),s=()=>o(513670),l=()=>o(986631),c=()=>o(223321),d=()=>o(718959),u=()=>o(286338),p=()=>o(845111),m=()=>o(191003),f=()=>o(239482),g=()=>o(505462),v=()=>o(333023),h=()=>o(639832),_=()=>o(876822),b=()=>o(656769),y=()=>o(543842),S=()=>o(150356),w=()=>o(890324),k=()=>o(21965),I=()=>o(853648),C=()=>o(127519),x=()=>o(807230),T=()=>o(546464),M=()=>o(30238),P=()=>o(744091),A=()=>o(507795),R=()=>o(970105),B=()=>o(269299);function E(e){const{textStore:t,environment:o}=e,n=(0,f().n3)(t)&&w().Z.getMode(o,t).hasPublicPermission,i=t.isDefaultRecordCache(),a=!n,c=a&&function(e){const t=(0,d().np)(),o=_().default.state.currentSpaceStore;if(!t||!o)return!1;const n=(0,T().EG)(e,{name:"configurable_mention_invites",spaceId:o.id,userId:o.userId}),i="available"===(null==n?void 0:n.type);return t.canEditMembership()&&o.canEditMembership()&&!i&&!e.device.isMobile}(o),m=a&&function(e){const t=(0,d().np)();if(!t)return!1;return(0,v().gi)({store:t})&&t.canEditMembership()&&(0,u().$t)()}(),g=a,h=!n,b=!n,y=function(e){const t=(0,d().RM)();if(!t||"block"!==e.table)return!1;if(t.isInsideTemplate())return!0;const o=p().W(e);if(o||t.isInsideFactoryOrDuplicateBlocksAction()){const t=null==o?void 0:o.getTitleStore();return!(o&&t&&t.id===e.id&&s().Xy(t.path,e.path))}if((0,l().t)(e))return!0;return!1}(t),S=function(e){if("block"!==e.table)return!1;return!0}(t);return(0,r().lX)({page:true,createPage:i,user:a,inviteUserToWorkspace:c,inviteUserToPage:m,bot:g,date:!0,reminder:!0,templateVariable:y,group:h,team:b,heading:!0,formulaContextVariable:S})}function D(e){const{environment:t,textStore:o,oldSelection:s,oldTextValue:l,disabledMentionTypes:d,usePopupOnMobile:u,mentionSectionOrdering:p}=e,m=function(e){const{textStore:t,oldSelection:o}=e;if(h().Z.state.open||c().Z.state.open||b().Z.state.open)return;const n=a().eeV(t.getValue()||[]),i=o.startIndex,r=(n[i]||"").normalize("NFKD"),s=(n[i-1]||"").normalize("NFKD"),l=y().Z.state;if(l.open)return"[["===l.insertionType&&"]"===r&&"]"===s?"]]":void 0;if("@"===r){if(s&&!/[\s\(\)\[\]]/g.test(s))return;return"@"}if("+"===r){if(s&&!/[\s\(\)\[\]]/g.test(s))return;return"+"}if("[["===n.slice(i-1,i+1).join("")){const e=n[i-1];if(e&&!/[\s\(\)\[\]]/g.test(e))return;return"[["}}(e);if(!m)return;const f=y().Z.state;if("]]"===m){if(f.open){const e=f.temporaryInputData.state;e&&f.temporaryInputData.setState({...e,suffix:"]]"}),y().Z.setState({...f,showCreateIn:!0})}return}const v=g().get();if(!v)return;const _=g().getRect(v);if(!_)return;const S=E({textStore:o,environment:t}),w=S.page&&!d.page,k=S.heading&&!d.heading,C=S.createPage&&!d.createPage,x=S.user&&"@"===m&&!d.user,T=S.inviteUserToWorkspace&&"@"===m&&!d.inviteUserToWorkspace,P=S.inviteUserToPage&&"@"===m&&!d.inviteUserToPage,R=S.bot&&"@"===m&&!d.bot,B=S.date&&"@"===m&&!d.date,D=S.reminder&&"@"===m&&!d.reminder,U=S.templateVariable&&"@"===m&&!d.date&&!d.templateVariable,F=S.group&&"@"===m&&!d.group,N=S.team&&"@"===m&&!d.team,V=S.formulaContextVariable&&"@"===m&&!d.formulaContextVariable;if(!(x||F||N||w||C||B||D||U||V))return;if("+"===m&&!C)return;const L=i().Il(),O=i().Il();A().S(t,"mention"),y().Z.setState({open:!0,flowId:L,sessionId:O,openTime:Date.now(),insertionType:m,textStore:o,oldTextValue:l,oldSelection:s,selectionRect:_,emptyQueryUserRequestStore:y().Z.state.emptyQueryUserRequestStore,botRequestStore:new(I().Z),temporaryInputData:n().default.createValue(void 0,{name:"temporaryInputData"}),mentionTypes:(0,r().lX)({page:w,createPage:C,user:x,inviteUserToWorkspace:T,inviteUserToPage:P,bot:R,date:B,reminder:D,templateVariable:U,formulaContextVariable:V,group:F,team:N,heading:k}),expandSection:void 0,showCreateIn:!1,showInvite:!1,showMentionAndShare:!1,showFormulaProperty:!1,createInQuery:"",isEmptyPageTitle:!1,usePopupOnMobile:u,sectionOrder:p}),M().j1(t,{analyticsFrom:y().Z.getMentionMenuContext(),flowId:L,searchSessionId:O})}function U(e){const{environment:t,mentionTypes:o,usePopupOnMobile:n,mentionSectionOrdering:i}=e;R().N3({direction:"end"});const s=C().default.state;if("editing"!==s.mode)return;const l=(0,m().QY)(s.multiSelection);return l?function(e){const{selection:t,textValueStore:o,environment:n,mentionTypes:i,usePopupOnMobile:s,mentionSectionOrdering:l}=e;let c=!1;if(t.startIndex>0){const e=o.getValue()||[],n=a().eeV(e)[t.startIndex-1];/[\s]/g.test(n)||(c=!0)}B().createAndCommit({userAction:"mentionMenuActions.insertMention",environment:n,canUndo:!0,perform:e=>{c?(R().hJ({environment:n,store:o,editorMode:"default",string:" ",selection:t,disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:e,mentionSectionOrdering:l}),R().hJ({environment:n,store:o,editorMode:"default",string:"@",selection:{startIndex:t.startIndex+1,endIndex:t.endIndex+1},disableMentions:!1,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:e,mentionSectionOrdering:l})):R().hJ({environment:n,store:o,editorMode:"default",string:"@",selection:t,disableMentions:!1,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:e,mentionSectionOrdering:l})}});const d=y().Z.state;if(!d.open)return;const u=E({environment:n,textStore:o});y().Z.setState({...d,usePopupOnMobile:s,mentionTypes:(0,r().lX)({page:u.page&&i.page,createPage:u.createPage&&i.createPage,user:u.user&&i.user,inviteUserToWorkspace:u.inviteUserToWorkspace&&i.inviteUserToWorkspace,inviteUserToPage:u.inviteUserToPage&&i.inviteUserToPage,bot:u.bot&&i.bot,date:u.date&&i.date,reminder:u.reminder&&i.reminder,templateVariable:u.templateVariable&&i.templateVariable,group:u.group&&i.group,team:u.team&&i.team,heading:u.heading&&i.heading,formulaContextVariable:u.formulaContextVariable&&i.formulaContextVariable})})}({environment:t,mentionTypes:o,textValueStore:l.store,selection:l.selection,usePopupOnMobile:n,mentionSectionOrdering:i}):void 0}function F(e){const t=y().Z.state,{environment:o,editorMode:n,annotations:i=[],transaction:r,menuListItemAction:s,query:l,serverEventProperties:c,mentionType:d,resultId:u,shareMenuSelection:p}=e;if(t.open){let e=t.oldTextValue,m=t.oldSelection;const f=t.insertionType.length-1;f>0&&(e=a()._QS(e,t.oldSelection.startIndex-f,t.oldSelection.startIndex),m={startIndex:m.startIndex-f,endIndex:m.endIndex-f}),R().sO({environment:o,store:t.textStore,value:e,transaction:r});const g=y().Z.getMentionMenuContext();i.forEach((e=>{R().lZ({environment:o,editorMode:n,store:t.textStore,selection:m,annotation:e,analyticsFrom:g,transaction:r,shareMenuSelection:p})}));const v=Date.now();if("page"===d&&u&&k().Z.recordMention({id:u,timestamp:v,currentUserId:o.currentUser.id}),d){const{numServerRequests:e}=S().default.state;M().z7(o,{clickIndexGlobal:null==s?void 0:s.index,clickIndexLocal:null==s?void 0:s.indexLocal.indexLocal,sectionIndex:null==s?void 0:s.indexLocal.section,analyticsFrom:g,timeToClickInMs:v-t.openTime,queryLength:l.length,serverEventProperties:c,mentionType:d,resultId:u,flowId:t.flowId,searchSessionId:t.sessionId,searchSessionFlowNumber:e})}N()}}function N(){y().Z.update((e=>({...e,open:!1,sessionId:void 0}))),S().default.reset()}async function V(e){const{environment:t,titleText:o,createInValue:n,onPageCreated:i,menuListItemAction:r,clearSavedSelection:a}=e,s=y().Z.state;if(!s.open)return;if(!(0,x().ww)(t))return;a();const{performResult:l}=await B().createAndCommitAsync({environment:t,userAction:"mentionMenuActions.acceptCreateIn",waitForServerCommit:!0,perform:async e=>{const a=P().f8({environment:t,transaction:e,titleText:o,createInValue:n,recordStoreParentStore:s.textStore}),l=a.createdPages[0];if(l)return i&&i(l),F({environment:t,editorMode:"default",annotations:[["p",l.id]],transaction:e,menuListItemAction:r,query:o,mentionType:"createPage"}),await a.moveToStorePromise,{createInState:a}}});if(l){const{createInState:e}=l;return await P().c_({analyticsFrom:"mention_menu",createInState:e}),e}}},454393:(e,t,o)=>{o.d(t,{CT:()=>l,r$:()=>s});var n=()=>o(738483),i=()=>o(876822),r=()=>o(72950),a=()=>o(838266);function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{currentTab:t,subtab:o,isMobile:r,openedFrom:s,upsellType:d,highlightedSetting:u}=e;if(r)"notifications"!==t&&"notifications_and_settings"!==t&&"user_settings"!==t||n().Z.setState({open:!0});else if(t)a().default.setState({open:!0,openedFrom:s,upsellType:d,...c({currentTab:t,subtab:o}),highlightedSetting:u});else{const{currentSpaceStore:e}=i().default.state;a().default.setState({open:!0,openedFrom:s,upsellType:d,currentTab:l(e),defaultSubtab:void 0,highlightedSetting:u})}}function l(e){return e&&e.canRead()?"members":"settings"}function c(e){const{currentTab:t,subtab:o}=e;if("members"===t){return{currentTab:"members",defaultSubtab:o===r().Q.Members||o===r().Q.Groups||o===r().Q.Guests||o===r().Q.Reprovisioning||o===r().Q.Requests?o:void 0}}if("integrations"===t){return{currentTab:"integrations",defaultSubtab:"member_connections"===o||"workspace_connections"===o?o:void 0}}if("security"===t){return{currentTab:"security",defaultSubtab:"security"===o||"data_retention"===o?o:void 0}}return{currentTab:t,defaultSubtab:void 0}}},494657:(e,t,o)=>{o.d(t,{aV:()=>r,eV:()=>a,kW:()=>c,sv:()=>d,w$:()=>u});var n=()=>o(513670),i=()=>o(123658);function r(e){const{store:t,getItemsPerRowForSection:o,sections:n,disableKeyboardArrowWrap:i}=e,{focus:r}=t.state;if(void 0===r.indexLocal)return c({store:t,sections:n,indexGlobal:0});const a=n[r.section],d=o(a.key),u=r.indexLocal+d,p=a.items.length-1;if(u<=p)return c({store:t,sections:n,indexLocal:{section:r.section,indexLocal:u}});const m=function(e){const{indexLocal:t,section:o,itemsPerRow:n}=e,i=l({indexLocal:t,section:o,itemsPerRow:n});if(!i)return;const r=s({section:o,itemsPerRow:n});if(!r)return;return i.rowsBefore===r.rowsBefore}({indexLocal:r.indexLocal,section:a,itemsPerRow:d});if(void 0===m)return;if(!1===m)return c({store:t,sections:n,indexLocal:{section:r.section,indexLocal:p}});const f=function(e){const{currentSection:t,sections:o,disableWrap:n}=e;if(0===o.length)return;if(t&&t>=o.length&&n)return;const i=void 0===t?0:t+1;if(i>=o.length&&n)return;const r=i%o.length,a=o[r];if(!a)return;return{index:r,section:a}}({currentSection:r.section,sections:n,disableWrap:i});if(!f)return;const g=r.indexLocal%d,v=o(f.section.key);return f.section.items.length<=g||v<=g?c({store:t,sections:n,indexLocal:{section:f.index,indexLocal:0}}):c({store:t,sections:n,indexLocal:{section:f.index,indexLocal:g}})}function a(e){const{store:t,getItemsPerRowForSection:o,sections:n,disableKeyboardArrowWrap:r}=e,{focus:a}=t.state;if(void 0===a.indexLocal){return c({store:t,indexGlobal:i().tM(n)-1,sections:n})}const l=o(n[a.section].key),d=a.indexLocal-l;if(d>=0)return c({store:t,sections:n,indexLocal:{section:a.section,indexLocal:d}});const u=function(e){const{currentSection:t,sections:o,disableWrap:n}=e;if(0===o.length)return;if(0===t||void 0===t){if(n)return;const e=o.length-1,t=o[e];if(!t)return;return{index:e,section:t}}const i=o[t-1];if(!i)return;return{index:t-1,section:i}}({currentSection:a.section,sections:n,disableWrap:r});if(!u)return;const p=o(u.section.key),m=s({section:u.section,itemsPerRow:p});if(!m)return;const f=a.indexLocal%l;if(m.column<f)return c({store:t,sections:n,indexLocal:{section:u.index,indexLocal:m.indexLocal}});{const e=m.rowsBefore*p+f;return c({store:t,sections:n,indexLocal:{section:u.index,indexLocal:e}})}}function s(e){const{section:t,itemsPerRow:o}=e;if(0===t.items.length)return;if(0===o)return;const n=t.items.length-1,i=l({indexLocal:n,section:t,itemsPerRow:o});return i?{indexLocal:n,...i}:void 0}function l(e){const{indexLocal:t,section:o,itemsPerRow:n}=e;if(!(n<=0||t>=o.items.length))return{rowsBefore:Math.trunc(t/n),column:t%n}}function c(e){const{store:t,sections:o}=e;if(e.indexLocal){const n=i().$6(e.indexLocal,o);if(!i()._K(e.indexLocal,o))return;t.setState({...t.state,focus:{...e.indexLocal,indexGlobal:n,footerFocused:!1}})}else if(void 0===e.indexGlobal)t.unsetFocus();else{const n=i().Ds(e.indexGlobal,o);if(!n)return;t.setState({...t.state,focus:{...n.index,indexGlobal:e.indexGlobal,footerFocused:!1}})}}function d(e){let{store:t,focus:o}=e;"number"==typeof t.state.focus.indexLocal&&(n().Xy(o,t.state.focus)||t.setState({...t.state,focus:o}))}function u(e){let{store:t}=e;t.setState({...t.state,focus:{section:void 0,indexLocal:void 0,indexGlobal:void 0,footerFocused:!0}})}},279762:(e,t,o)=>{o.r(t),o.d(t,{handleTokenRefresh:()=>v,initializeMobileNativeApp:()=>m,invalidateToken:()=>g,registerPushNotifications:()=>f,waitForCssInsets:()=>h});var n=()=>o(799891),i=()=>o(78405),r=()=>o(882765),a=()=>o(792409),s=()=>o(839002),l=()=>o(594546),c=()=>o(826955),d=()=>o(430310),u=()=>o(636340),p=()=>o(269299);async function m(e){if(e.device.isMobileNative&&e.mobileNative&&(await h(e),e.mobileNative.updateReceiveApiHandlers({track:t=>{l().K4(e,t.eventName,{...t.eventData,logging_source:"mobile_native"})}}),e.mobileNative&&e.mobileNative.sqliteConnection)){try{await e.mobileNative.sqliteConnection.ensureMigrated()}catch(t){n().log({level:"error",from:"mobileNativeActions",type:"sqliteConnectionEnsureMigratedError",error:(0,a().Ui)(t),data:(0,r().fq)(t,{isBrowser:!1,wasmSqliteStorage:void 0})})}e.mobileNative.sqliteConnection.optimize().catch((e=>{n().log({level:"error",from:"mobileNativeActions",type:"sqliteConnectionOptimizeError",error:(0,a().Ui)(e),data:(0,r().fq)(e,{isBrowser:!1,wasmSqliteStorage:void 0})})}))}}async function f(e){const{mobileNative:t}=e;if(t&&t.api.registerPushNotifications){const o=await t.api.registerPushNotifications();o&&v(e,o,"registration")}}function g(e){const{environment:t,token:o,userId:n}=e,r=(0,i().r9)({user_id:n,token:o}),a=new(c().ST)({environment:t,pointer:{table:i().q4,id:r}});p().createAndCommit({userAction:"mobileNativeActions.invalidateToken",userId:n,canUndo:!0,environment:t,perform:e=>{u().sW({store:a,data:{invalid:!0},transaction:e})}})}async function v(e,t,o){const n=e.currentUser.id;if(t&&n){const o=(0,i().r9)({user_id:n,token:t}),r=await(0,d().Y)(e,{pointer:{table:i().q4,id:o},userId:n,version:-1});let a=!1;r&&(r.value&&!r.value.invalid||(p().createAndCommit({userAction:"mobileNativeActions.handleTokenRefresh",environment:e,canUndo:!0,perform:r=>{u().ae({environment:e,table:i().q4,value:{id:o,token:t,user_id:n,invalid:!1},inMemoryRecordCache:e.defaultRecordCache.inMemoryRecordCache,transaction:r})}}),a=!0))}}async function h(e){if(!e.device.isIOS||!e.device.isMobileNative)return;const t=document.createElement("div");t.style.width=`calc(${["env(safe-area-inset-top)","env(safe-area-inset-bottom)","env(safe-area-inset-left)","env(safe-area-inset-right)"].join(" + ")})`,t.style.visibility="hidden",document.body.appendChild(t);let o=0;for(;o<50&&!(t.offsetWidth>0);)await s().Vs(1),o++;document.body.removeChild(t),e.WindowSizeStore.updateWindowSize()}},812324:(e,t,o)=>{o.d(t,{RO:()=>a,h8:()=>s,j2:()=>r});var n=()=>o(855741),i=()=>o(897606);function r(e){i().Z.update((t=>({...t,[e]:{taskStatus:"in_progress",completeBlocks:0,totalBlocks:0}})))}function a(e,t){const o={taskStatus:e.taskStatus,...n().x.isSuccess(e)?{completeBlocks:e.value.completeBlocks,totalBlocks:e.value.totalBlocks}:{}};i().Z.update((e=>({...e,[t]:o})))}function s(e){i().Z.update((t=>({...t,[e]:void 0})))}},818254:(e,t,o)=>{o.d(t,{I0:()=>y,eX:()=>_,j2:()=>b,wS:()=>h});o(267602),o(653476),o(470928),o(30005),o(241792),o(228244),o(667294);var n=()=>o(35980),i=()=>o(396136),r=()=>o(513670),a=()=>o(326966),s=()=>o(958783),l=()=>o(605067),c=()=>o(192956),d=()=>o(876822),u=()=>o(826955),p=()=>o(765056),m=()=>o(784234),f=()=>o(102182),g=o(785893);const v=10;function h(e){const{environment:t,movedItems:o,previousParentPointers:n,moveToLocation:i,disableSuccessToast:r,numSubitems:a}=e,d=o.some((e=>{var t;const o=null==n||null===(t=n[e.id])||void 0===t?void 0:t.id,i=e.getParentId();return!(!o||o===i)})),u=o.some((e=>{var t;return"space"===(null==n||null===(t=n[e.id])||void 0===t?void 0:t.table)}));if(!r&&d){var p;f().oV({label:(0,l().ah)({environment:t,movedItems:o,moveToLocation:i,numSubitems:a}),right:(0,g.jsx)(c().X,{moveToLocation:i,movedItems:o,hideUndoButton:u})});const e=s().default.state.open?null===(p=s().default.state)||void 0===p?void 0:p.blockId:void 0;s().default.state.open&&e&&o.find((t=>t.id===e))&&s().default.setState({open:!1,rect:new DOMRect})}}function _(e){const{environment:t,transaction:o,moveToStore:n,targetBlocks:i,from:r}=e,{currentUserStore:a}=d().default.state;null!=a&&a.isDefined()&&n.canEdit()&&!n.canAdmin()&&i.forEach((e=>{if(e.canAdmin())return p().Y8(t,{from:r}),m().l3({transaction:o,store:e,environment:t,permissionItems:[{type:"user_permission",user_id:a.id,role:"editor"}]})}))}async function b(e,t,o){const i=await y(e,t),a=r().jj([o,...i]).slice(0,v);n().Z.set({userId:e.environment.currentUser.id,key:S(t),value:JSON.stringify(a)})}async function y(e,t){const o=n().Z.get({userId:e.environment.currentUser.id,key:S(t)});if(o){const t=(0,a().dj)(o);if(t){const o=await Promise.all(t.map((async t=>{const o=u().G.createChildStore(e,{table:i().iU,id:t});return await o.load(),o.canEdit()})));return t.filter(((e,t)=>o[t]))}}return[]}function S(e){return`recentMoveToTargets2:${e}`}},525038:(e,t,o)=>{o.d(t,{$X:()=>X,Pz:()=>J,QF:()=>ee,RL:()=>oe,Ws:()=>ie,Y:()=>ae,bA:()=>Y,kj:()=>re,pB:()=>te,xv:()=>ne});o(821057),o(492176),o(7961),o(267602),o(470928),o(241792),o(228244);var n=()=>o(506347),i=()=>o(926724),r=()=>o(156642),a=()=>o(226413),s=()=>o(799891),l=()=>o(956057),c=()=>o(396136),d=()=>o(752778),u=()=>o(255933),p=()=>o(513670),m=()=>o(696459),f=()=>o(406799),g=()=>o(887430),v=()=>o(594546),h=()=>o(582835),_=()=>o(527278),b=()=>o(605067),y=()=>o(239482),S=()=>o(345918),w=()=>o(732491),k=()=>o(297861),I=()=>o(876822),C=()=>o(972776),x=()=>o(241449),T=()=>o(61548),M=()=>o(826955),P=()=>o(374469),A=()=>o(439373),R=()=>o(765056),B=()=>o(242619),E=()=>o(384667),D=()=>o(236087),U=()=>o(308186),F=()=>o(405851),N=()=>o(528918),V=()=>o(818254),L=()=>o(441530),O=()=>o(332542),Z=()=>o(636340),j=()=>o(96271),K=()=>o(879952),z=()=>o(102182),H=()=>o(224597),q=()=>o(968377),W=()=>o(269299),G=()=>o(348141),$=()=>o(221662);const Q=(0,o(788860).vU)({duplicatingContent:{id:"moveToMenuActions.duplicatingContent.loadingMessage",defaultMessage:"Duplicating contentâ€¦"},duplicatedToSpace:{id:"moveToMenuActions.duplicatedToSpace.toast",defaultMessage:"Duplicated {name} to {spaceName}"}});function Y(e){const{environment:t,blocks:o,originRect:n,moveToContext:i,onAccept:r,onCanceled:a,isAddTo:s,isDefaultPrivateLocation:c,disableSuccessToast:d,dontCommitActions:u,forceUntyped:p,forceShowPrivatePageOption:m}=e,f=Date.now(),g=(0,x().r)(o),v=function(e){const{hasDatabaseType:t,forceUntyped:o}=e;if(o)return"untyped";if(t)return"typed";return"untyped"}({forceUntyped:p,hasDatabaseType:Boolean(g)}),h=l().Il();o.length&&(P().Z.reset(),T().Z.reset(),B().xv(),x().default.setState({variant:v,isOpen:!0,rect:n,targets:o,autocompleteQuery:"",moveToContext:i,onAccept:r,onCanceled:a,isAddTo:s,isDefaultPrivateLocation:c,lastPageId:x().default.state.lastPageId,disableSuccessToast:d,dontCommitActions:u,openedTimeMs:f,flowId:h,forceShowPrivatePageOption:m,queryLimit:b().Kg,canLoadMore:!0}),R().rY(t,{from:i,render_type:"web",target_block_ids:o.map((e=>e.id)),targets_database_type:g,flowId:h}))}function J(e){const{environment:t,originRect:o,moveToContext:n,overrideDatabaseType:i,onAccept:r,onCanceled:a,isAddTo:s,isDefaultPrivateLocation:c,forceShowPrivatePageOption:d}=e;if(x().default.state.isOpen)return;const u=o.left+o.width/2-165;o.x=u;const p=Date.now(),m=l().Il();P().Z.reset(),T().Z.reset(),B().xv(),x().default.setState({variant:"typed",overrideDatabaseType:i,isOpen:!0,rect:o,targets:[],autocompleteQuery:"",moveToContext:n,onAccept:e=>{const{value:o}=e;"collection"===o.type&&(W().createAndCommit({userAction:"moveToMenuActions.openForTaskDatabaseSelection.setPreferredDatabase",environment:t,canUndo:!0,perform:e=>{G().zq({transaction:e,databaseType:"notion://tasks_collection",collectionId:o.id})}}),r(e))},onCanceled:a,isAddTo:s,isDefaultPrivateLocation:c,lastPageId:x().default.state.lastPageId,disableSuccessToast:!0,dontCommitActions:!0,openedTimeMs:p,flowId:m,forceShowPrivatePageOption:d,queryLimit:b().Kg,canLoadMore:!0}),R().rY(t,{from:n,render_type:"web",target_block_ids:[],targets_database_type:void 0,flowId:m})}async function X(e){const t=await async function(e){var t;const{environment:o,blocks:n,originRect:r,moveToContext:a,disableSuccessToast:s,onAccept:c,onCanceled:d,isAddTo:u}=e,{currentSpaceStore:p}=I().default.state,m=Date.now(),f=x().default.state.isOpen?x().default.state.flowId:l().Il(),g=(0,x().r)(n);if(!u&&g&&g!==i().GZ)return!1;if(!(0,k().Y)("supportsNativeMoveTo")||null===(t=o.mobileNative)||void 0===t||!t.api.moveTo||0===n.length||!p)return!1;const v=n.map((e=>e.id)),h=await o.mobileNative.moveTo({targets:v,spaceId:p.id,isAddTo:u||!1,moveToContext:a,flowId:f});if(!h)return!1;if(!h.supported||!h.destination)return h.supported&&d&&d(),h.supported;P().Z.reset(),T().Z.reset(),B().xv(),x().default.setState({variant:"untyped",isOpen:!0,rect:r,targets:n,autocompleteQuery:"",moveToContext:a,dontCommitActions:e.dontCommitActions,disableSuccessToast:s,onAccept:c,isAddTo:u,lastPageId:x().default.state.lastPageId,renderType:"mobileNative",openedTimeMs:m,flowId:f,queryLimit:b().Kg,canLoadMore:!0});const _=x().default.state.isOpen&&x().default.state.useSudoMode;return await te({environment:o,value:h.destination,useSudoMode:_,renderType:"native",isSearchResult:h.isSearchResult}),ne({environment:o,clearSelection:!1}),!0}(e);t||Y(e)}function ee(e,t,o){if("page"!==o.type)return!1;const n=new(M().G)(e,{table:c().iU,id:o.id}),i=(0,y().eG)(n);for(const r of i)if(t.includes(r.id))return!0;return!1}async function te(e){const{environment:t,value:o,useSudoMode:n,renderType:i,shouldClearPagePermissions:r,isSearchResult:a}=e,s=x().default.state;if(!s.isOpen)return;const{targets:l,disableSuccessToast:c,moveToContext:d,isDefaultPrivateLocation:u,flowId:p,autocompleteQuery:m}=s,f={targets:l,value:o,environment:t,shouldClearPagePermissions:r,disableSuccessToast:c,moveToContext:d,isDefaultPrivateLocation:u,renderType:i,timeToSelectMs:Date.now()-s.openedTimeMs,flowId:p,isSearchResult:Boolean(m)||a};if(s.dontCommitActions)return ne({environment:t,clearSelection:!0}),void(s.onAccept&&s.onAccept(f));await W().createAndCommitAsync({environment:t,userAction:"MoveToMenuRenderer.completeMoveTransaction",waitForServerCommit:!1,useSudoMode:n,perform:async e=>{await oe({...f,transaction:e}),s.onAccept&&s.onAccept(f)}})}async function oe(e){let{targets:t}=e;const{value:o,transaction:n,environment:i,shouldClearPagePermissions:s,disableSuccessToast:l,moveToContext:u,isDefaultPrivateLocation:f,renderType:_,timeToSelectMs:S,flowId:w,isSearchResult:k}=e,{currentSpaceStore:C}=I().default.state;if(!C)return;const T=await async function(e,t,o,n){let i=[];const r=p().Ps(e);if(!r)return[];const s=(0,g().fm)(r)??(0,h().Ll)(r,o);if(!s)return[];if(!s.collectionStore())return[];const l=s.currentSubitemFormatStoreForCollectionStore.state,c=s.normalizedSchemaStore.state,d=(null==l?void 0:l.inverse)&&c[l.inverse];if(!d||!(0,a().p_)(d))return[];if(!e.some((e=>(0,h().CJ)({store:e,subitemFormat:l,propertySchema:d}).length>0)))return[];const u=(0,b().uw)(t);if(u instanceof M().NW||u instanceof M().G){if(await le(u)instanceof M().NW)return i=await D().xr({environment:o,blocks:e,options:{canEdit:!0},collectionContextStore:s}),i}return[]}(t,o,i);t=[...t,...T],ne({environment:i,clearSelection:!0});const P=C.id,A=function(e){const{type:t}=e;switch(t){case"page":case"collection":case"space-private-pages":case"team":return e.spaceId;case"space":return e.id;default:(0,m().t1)(t)}}(o);if(A&&P!==A){if(!(await(0,b().cJ)()))return}const B=t.find((e=>{const t=e.getType();return Boolean(t&&(0,r().S9)(t))})),E=B&&(0,y().VP)(B),U=(0,x().r)(t),F=Object.fromEntries(t.map((e=>[e.id,e.getParentPointer()]))),N=await re({environment:i,value:o,targets:t,transaction:n,shouldClearPagePermissions:s});if(!N)return;const L=(0,b().HE)(o,i);V().wS({environment:i,previousParentPointers:F,movedItems:t,moveToLocation:L,disableSuccessToast:l,numSubitems:T.length});const O=B&&(0,y().VP)(B);R()._T(i,{table:N.table,from:u,type:null==L?void 0:L.type,team_before:E&&(0,v().nB)(E),team_after:O&&(0,v().nB)(O),targets_database_type:U,destination_database_type:N.table===d().vF?N.getDatabaseType():void 0,isDefaultPrivateLocation:f,render_type:_,time_to_select_ms:S,flowId:w,isSearchResult:k,subitemTreeSize:T.length>0?T.length:void 0}),N.table===c().iU&&await V().j2(C,C.id,N.id)}function ne(e){const{environment:t,clearSelection:o}=e,n=x().default.state;x().default.setState({isOpen:!1,lastPageId:n.lastPageId}),o&&K().ZH({environment:t}),n.isOpen&&"home_tab"===n.moveToContext&&j().navigateToHomeTab(t)}async function ie(e){return se({...e,action:"add"})}async function re(e){return se({...e,action:"move"})}async function ae(e){return se({...e,action:"retain-alias"})}async function se(e){const{value:t,transaction:i,targets:r,shouldClearPagePermissions:a}=e,l=(0,b().uw)(t),d=await q().fg({moveStores:r,moveTargetStore:l});if("user_cancelled_move"===d)return;let p;const g=r.at(0);g&&(p=(0,h().g0)(g)||(0,h().kG)(g,e.environment));const v=await async function(e){const{transaction:t,targets:i,value:r,environment:a,action:l}=e,{mainEditorCurrentBlockStore:d,currentSpaceStore:u,currentSpaceViewStore:p}=I().default.state,{id:g}=a.currentUser;if(!g||!p)return;const v=(0,b().uw)(r);if(!v)return;let h;const{table:y}=v;switch(y){case"collection":case"block":h=await async function(e){const{environment:t,blockOrCollectionStore:o,targets:n,transaction:i,retainAliasInCurrentParent:r}=e,a=await le(o);if(!a)throw new Error("Move to store invalid.");for(const s of n){const e=s.getParentStore();if(e instanceof M().G&&r){const o=A().k({environment:t,parentBlockStore:e,targetStore:s,transaction:i});O().jG({parentStore:e.getContentStore(),after:s.id,childStore:o,transaction:i})}if(a instanceof M().G)O().jG({parentStore:a,childStore:s,transaction:i});else if(a instanceof M().NW){const e=E().o3({environment:t,stores:[s],spaceId:a.getSpaceId(),transaction:i})[0];E().mp({environment:t,store:e,collectionStore:a,shouldCoerce:!0,groupsPointer:[],transaction:i}),O().zw({parentStore:a,childStore:e,transaction:i})}}return a}({environment:a,blockOrCollectionStore:v,targets:i,transaction:t,retainAliasInCurrentParent:"retain-alias"===l});break;case"space":if("space-private-pages"===r.type&&v.id===(null==u?void 0:u.id))h=ce({environment:a,spaceStore:v,spaceViewStore:p,targets:i,transaction:t,currentUserId:g,retainAliasToBlock:"retain-alias"===l});else{if(!d)return;h=await async function(e){const{environment:t,transaction:i,currentSpaceViewStore:r,currentBlockStore:a,currentUserId:l,spaceStore:d,targets:u,action:p,value:m}=e;if("space"!==m.type&&m.spaceId&&m.spaceId!==d.id)throw new Error("Wrong value to move to another space");(await o.e(14705).then(o.bind(o,630903))).maybeTurnCollectionViewIntoCollectionViewPage({environment:t,blocks:u,transaction:i});const g=a.getSpaceId()||d.id;let v;if("move"===p&&("space"!==m.type&&m.spaceId&&m.spaceId!==g||"space"===m.type&&m.id!==g||"space-private-pages"!==m.type)){N().j({message:Q.duplicatingContent,targetRecordId:d.id});const e=await H().eX({environment:t,blockStores:u,spaceId:d.id,targetParent:de(m)});if(N().x(),void 0!==e.error)return void(e.error.data&&f().nr(e.error.data)?f().y1({product:e.error.data.clientData.metadata.product}):U().UW(e.error.message));v=e.value}else"space-private-pages"===m.type&&ce({environment:t,spaceStore:d,spaceViewStore:r,targets:u,transaction:i,currentUserId:l,retainAliasToBlock:"retain-alias"===p});await async function(e){const{environment:t,currentBlockStore:o,currentUserId:i,spaceStore:r,targets:a,crossSpaceTargetBlockId:l}=e,d=Boolean(a.find((e=>e.id===o.id))),u=(0,S().w3)(r.id);if(!d||!u)return;const p=l?M().G.createChildStore(o,{table:c().iU,id:l}):o;await $().l({environment:t,spaceId:r.id,userId:i}),await async function(e){const{environment:t,spaceStore:o,spaceViewStore:n,blockStore:i}=e;o&&n&&(t.device.isMobileNative&&s().log({level:"info",from:"moveToMenuActions",type:"SpaceSwitchingDebug",data:{message:"moveToMenuActions.switchToSpace"}}),I().default.setState({...I().default.state,currentSpaceStore:o,currentSpaceViewStore:n,mainEditorCurrentBlockStore:i}),await F().Yh(t))}({environment:t,spaceStore:r,spaceViewStore:u,blockStore:p}),L().ru({environment:t,blocks:[p],pageVisitSource:n().tY.Move})}({environment:t,currentBlockStore:a,currentUserId:l,targets:u,spaceStore:d,crossSpaceTargetBlockId:v}),v&&z().oV({label:_().Z.formatMessage(Q.duplicatedToSpace,{name:(0,b().EC)({movedItems:u}),spaceName:d.getName()})});return d}({environment:a,transaction:t,currentSpaceViewStore:p,currentBlockStore:d,currentUserId:g,spaceStore:v,targets:i,value:r,action:l})}break;case"team":h=(await(0,w().Z)())({environment:a,transaction:t,currentSpaceViewStore:p,teamStore:v,targets:i,value:r,action:l,location:{type:"append"}});break;default:(0,m().t1)(y)}"move"===l&&V().eX({environment:a,transaction:t,moveToStore:v,targetBlocks:i,from:"move_to"});return h}({...e});if(!v)return;if("space-private-pages"!==t.type)for(const{blockStore:o,permissions:n}of d)Z().sW({store:o,data:{permissions:n},transaction:i});if(!a||l.table===u().bx&&"space-private-pages"===t.type||H().O2({blocks:r,transaction:i}),p&&v instanceof M().NW&&g){let t=(0,h().ko)(v);if(!t){const o=new(C().Z)(e.environment);if(o.setContext({type:"collectionPage",collectionViewBlockStore:void 0,collectionStore:v}),o){D().Bb({transaction:i,collectionContextStore:o,environment:e.environment})&&(t=(0,h().ko)(v))}}p&&t&&D().cI({blocks:r,transaction:i,from:p.subitemFormat,to:{property:t.property,inverse:t.inverse},environment:e.environment})}return v}async function le(e){let t;return await e.load(),t=e instanceof M().NW?e:e.isLinkedCollectionView()?e.getCollectionViewSourceOrLinkCollectionStores()[0]:e.isCollectionView()?e.getCollectionStore():e,t}function ce(e){let{environment:t,spaceStore:o,spaceViewStore:n,targets:i,currentUserId:r,transaction:a,retainAliasToBlock:s}=e;for(const l of i){const e=l.getParentStore();if(W().applyOperation({store:l,operation:{command:"moveToPrivate",path:[],pointer:l.getSpaceShardedPointer(),args:{spaceViewPointer:n.getSpaceShardedPointer(),userId:r,removeFromParent:null==e?void 0:e.pointer}},transaction:a}),e instanceof M().G&&s){const o=A().k({environment:t,parentBlockStore:e,targetStore:l,transaction:a});O().jG({parentStore:e.getContentStore(),after:l.id,childStore:o,transaction:a})}}return o}function de(e){const{type:t}=e;switch(t){case"space":case"space-private-pages":return;case"page":return e.spaceId?{id:e.id,table:"block",spaceId:e.spaceId}:void 0;case"collection":case"team":return e.spaceId?{id:e.id,table:t,spaceId:e.spaceId}:void 0;default:(0,m().t1)(t)}}},603274:(e,t,o)=>{o.d(t,{$h:()=>x,E1:()=>C,G7:()=>P,Jl:()=>S,Qy:()=>M,aY:()=>T,aZ:()=>I,go:()=>b,rG:()=>w});o(670560),o(241792);var n=()=>o(799891),i=()=>o(779565),r=()=>o(792409),a=()=>o(205228),s=()=>o(527278),l=()=>o(704259),c=()=>o(876822),d=()=>o(749826),u=()=>o(826955),p=()=>o(781022),m=()=>o(353141),f=()=>o(253502),g=()=>o(824462),v=()=>o(308186),h=()=>o(269299);const _=(0,o(788860).vU)({archiveError:{id:"notificationActions.archiveNotification.errorMessage",defaultMessage:"Failed to archive. Please try again."},setReadError:{id:"notificationActions.setRead.errorMessage",defaultMessage:"Failed to mark notification as read. Please try again."},setAllAsReadError:{id:"notificationActions.setAllAsRead.errorMessage",defaultMessage:"Failed to mark all notifications as read. Please try again."},setUnreadError:{id:"notificationActions.setUnread.errorMessage",defaultMessage:"Failed to mark notification as unread. Please try again."}});async function b(e){const t=p().default.state.currentTab,{currentSpaceStore:o}=c().default.state;if(o&&!a().default.isAdminMode&&(0,p().g)(t)){try{await g().callApi({eventName:"setNotificationsAsRead",environment:e,data:{spaceId:o.id,timestamp:Date.now(),type:t}})}catch(i){return v().UW(s().Z.formatMessage(_.setAllAsReadError)),void n().log({level:"error",from:"notificationActions",type:"setCurrentUpdatesTabAsRead",error:(0,r().Ui)(i)})}S(t,o.id,y.decrementToZero)}}const y={incrementByOne:e=>e+1,decrementByOne:e=>Math.max(e-1,0),decrementToZero:e=>0};function S(e,t,o){const{results:n}=l().default.state,i=n.map((n=>{if(n.spaceId===t){const t=n.unread[e];return void 0===t?n:{...n,unread:{...n.unread,[e]:o(t)}}}return n}));l().default.setState({results:i})}async function w(e,t,o){const{currentSpaceStore:i}=c().default.state;if(i&&!a().default.isAdminMode){try{for(;;){if(!(await k({environment:e,currentSpaceStore:i,inbox:t,readFilter:o})).more)break}}catch(l){return v().UW(s().Z.formatMessage(_.archiveError)),void n().log({level:"error",from:"notificationActions",type:"archiveAll",error:(0,r().Ui)(l)})}"read"!==o&&S(t,i.id,y.decrementToZero)}}async function k(e){const{environment:t,currentSpaceStore:o,inbox:i,readFilter:a}=e,l=await g().callApi({eventName:"getUnvisitedNotificationIds",environment:t,data:{spaceId:o.id,timestamp:Date.now(),type:i,size:500,readFilter:a}});if("failed"===l.type)return v().UW(s().Z.formatMessage(_.archiveError)),n().log({level:"error",from:"notificationActions",type:"archiveApiError",error:(0,r().Ui)(l.error)}),{more:!1};const{notificationIds:c}=l.data;return await async function(e){const{environment:t,notificationIds:o,rootStore:n}=e,{serverCommitResult:i}=h().createAndCommit({userAction:"notificationActions.archiveNotificationIds",environment:t,canUndo:!0,undoCheckpoint:!0,perform:e=>{for(const t of o)C({transaction:e,rootStore:n,visited:!0,notificationId:t})}});await i}({environment:t,notificationIds:c,rootStore:o}),c.length>=500?{more:!0}:{more:!1}}function I(e){const{notification:t,rootStore:o,transaction:a}=e;if(!t.visited){try{C({notificationId:t.id,rootStore:o,transaction:a,visited:!0})}catch(l){return v().UW(s().Z.formatMessage(_.archiveError)),void n().log({level:"error",from:"notificationActions",type:"archiveNotification",error:(0,r().Ui)(l)})}if(!t.read){S(i().hE[t.type],t.space_id,y.decrementByOne)}}}function C(e){const{transaction:t,notificationId:o,rootStore:n,visited:r}=e,a=(0,u().Kv)(n,{table:i().uX,id:o});h().applyOperation({transaction:t,store:a,operation:{command:"update",pointer:{table:i().uX,id:o,spaceId:n.pointer.spaceId},path:[],args:r?{visited:!0,read:!0,archived_at:Date.now()}:{visited:!1,archived_at:null}}})}function x(e){const{transaction:t,notification:o,rootStore:a,read:l}=e;if(o.read===l)return;const c=(0,u().Kv)(a,{table:i().uX,id:o.id});try{h().applyOperation({transaction:t,store:c,operation:{command:"update",pointer:{table:i().uX,id:o.id,spaceId:o.space_id},path:[],args:{read:l,...l?{}:{visited:!1}}}})}catch(d){return e.suppressErrorMessage||v().UW(s().Z.formatMessage(l?_.setReadError:_.setUnreadError)),void n().log({level:"error",from:"notificationActions",type:"setRead",error:(0,r().Ui)(d)})}S("mentions",o.space_id,l?y.decrementByOne:y.incrementByOne),"commented"===o.type?S("comments",o.space_id,l?y.decrementByOne:y.incrementByOne):S("activity",o.space_id,l?y.decrementByOne:y.incrementByOne)}function T(){return l().default.getUnreadCountForCurrentSpace().mentions}async function M(e){const{environment:t}=e,{currentSpaceStore:o}=c().default.state;if(!o)return[];const n=await g().callApi({eventName:"getUnvisitedNotificationIds",environment:t,data:{spaceId:o.id,timestamp:Date.now(),type:"mentions",size:100,readFilter:"unread"}});return"failed"===n.type?[]:n.data.notificationIds}function P(e){let{environment:t,newTab:o,shouldTrack:n}=e;const i=p().default.state.currentTab;if(i!==o&&("mentions"===o?p().default.update((e=>({...e,currentTab:o,containsBothReadAndUnreadNotifications:!1,containsUnreadNotifications:!1,showOnlyUnreadNotifications:!1,unreadNotificationIds:[]}))):p().default.update((e=>({...e,currentTab:o})))),n){const e=t.device.isMobile;f().GP({environment:t,forceRestartSession:!1,from:"updates-tab-click"}),e&&m().nB(t,{itemName:"updates"})}"mentions"===i&&async function(e){const t=d().default.checkGate({gateName:"multi_cell_get_user_notifications"}),o="on"===d().default.getGroup("inbox_activity_split");let n=[];if(t){const t=g().callMultiCellApi({eventName:"getUserNotifications",environment:e,data:{size:1e3,isInboxV2:!0,splitInboxActivity:o},headers:{}});for await(const e of t)"success"===e.type&&n.push(...e.data.results)}else{const t=await g().callApi({eventName:"getUserNotifications",environment:e,data:{size:1e3,isInboxV2:!0,splitInboxActivity:o}});if("failed"===t.type)return;n=t.data.results}l().default.setState({results:n})}(t)}},919671:(e,t,o)=>{o.d(t,{V:()=>h,g:()=>v});o(267602),o(653476);var n=()=>o(235484),i=()=>o(705214),r=()=>o(234669),a=()=>o(4155),s=()=>o(836273),l=()=>o(282017),c=()=>o(916673),d=()=>o(326966),u=()=>o(880026),p=()=>o(824462),m=()=>o(308186),f=()=>o(752127),g=()=>o(497065);function v(e){const{environment:t,responseType:o,integrationId:n,redirectUri:i,state:r,owner:a,userId:l,spaceId:u}=e,p=c().bf({url:s()._j.oauthAuthorization,query:(0,d().m8)(Object.entries({response_type:o,client_id:n,redirect_uri:i,state:r,owner:a,user_id:l,space_id:u}).filter((e=>{let[,t]=e;return t})))});g().c4({environment:t,url:p,redirect:!0})}async function h(e){const{environment:t,params:o,integration:d}=e;l().In(void 0);const v=d&&r()._(d,o.redirectUri);if(!v)return void g().c4({environment:t,url:s()._j.root,redirect:!0});let _;if("errorType"in e)_={error:e.errorType,state:o.state};else{const{integration:n,spaceId:r,blockIdsForBot:s,acceptedIntegrationCapabilities:l}=e;let c;if(c=(0,i().VM)(n)?await p().callApi({eventName:"createOauthAuthorizationCode",environment:t,data:{integrationId:n.id,spaceId:r,redirectUri:o.redirectUri,acceptedIntegrationCapabilities:l}}):await p().callApi({eventName:"createOauthAuthorizationCode",environment:t,data:{integrationId:n.id,spaceId:r,redirectUri:o.redirectUri,blockIdsForBot:s,templatePageId:e.templatePageId,acceptedIntegrationCapabilities:l}}),"failed"===c.type){m().x2(c);return h({environment:t,params:o,integration:n,errorType:503===c.status?a()._.temporarily_unavailable:a()._.server_error})}_={code:c.data.code,state:o.state}}d.id===n().Dv&&await u().dl(t);const b=c().bf({url:v,query:{..._}});f().D({environment:t,url:b,targetSelf:!0})}},402269:(e,t,o)=>{o.d(t,{M:()=>p});var n=()=>o(836273),i=()=>o(839002),r=()=>o(916673),a=()=>o(205228),s=()=>o(527278),l=()=>o(749826),c=()=>o(308186),d=()=>o(231077);const u=(0,o(788860).vU)({allowPopup:{id:"authAction.authorize.popupBlocked",defaultMessage:"It looks like your browser is currently blocking popups. Please allow pop-ups to continue"},dismissButtonLabel:{defaultMessage:"OK",id:"dialog.dismissButton.label"}});async function p(e,t){const{width:o,height:p,url:f,titleMessage:g}=t,v=s().Z.formatMessage(g);if(e.device.isElectron)return d().openOauthPopup({width:o,height:p,url:f,title:v});const h=e.device.isMobile,_=void 0!==window.screenX?window.screenX:window.screenLeft,b=void 0!==window.screenY?window.screenY:window.screenTop,y=void 0!==window.outerWidth?window.outerWidth:document.documentElement.clientWidth,S=void 0!==window.outerHeight?window.outerHeight:document.documentElement.clientHeight-22,w=h?0:o,k=h?0:p;let I="toolbar=0,menubar=0,location=0";0!==w&&(I+=`,width=${w}`),0!==k&&(I+=`,height=${k}`),I+=`,left=${(_<0?window.screen.width+_:_)+(y-w)/2}`,I+=`,top=${b+(S-k)/2.5}`,I+=",scrollbars=1";const C=m()?(0,r().bf)({url:`${a().default.domainBaseUrl}${n()._j.verifyNoPopupBlockerHtmlAndRedirect}`,query:{redirectUri:f}}):f,x=window.open(C,v,I);if(x)x.focus();else if(m())return void c().vC({showCancel:!1,keepFocus:!1,message:s().Z.formatMessage(u.allowPopup),items:[{label:s().Z.formatMessage(u.dismissButtonLabel),onAccept:()=>{}}]});const T=i().UZ();if(C.includes("evernotepopupredirect")&&l().default.checkGate({gateName:"is_evernote_authpopup_closing_fix_enabled"})){const e=performance.now()+6e4,t=e=>{if(e&&e.data&&"popup-callback"===e.data.type){const t=e.data.url;T.resolve(t)}},o=setInterval((()=>{const t=performance.now(),o=localStorage.getItem("externalAuthCallback");o?T.resolve(o):x&&x.closed&&e<t&&T.resolve(void 0)}),300);window.addEventListener("message",t,!1);const n=await T.promise;return window.removeEventListener("message",t,!1),localStorage.removeItem("externalAuthCallback"),clearInterval(o),x&&x.close(),window.focus(),n}{const e=e=>{if(e&&e.data&&"popup-callback"===e.data.type){const t=e.data.url;T.resolve(t)}},t=setInterval((()=>{const e=localStorage.getItem("externalAuthCallback");e?T.resolve(e):x&&x.closed&&T.resolve(void 0)}),300);window.addEventListener("message",e,!1);const o=await T.promise;return window.removeEventListener("message",e,!1),localStorage.removeItem("externalAuthCallback"),clearInterval(t),x&&x.close(),window.focus(),o}}function m(){return"on"===l().default.getEligibleGroup({experimentId:"show_instruction_on_auth_popup_blocked",defaultGroup:"control"})}},711608:(e,t,o)=>{o.d(t,{A5:()=>oe,Eo:()=>te,LR:()=>ee,NP:()=>X,bS:()=>ne,kC:()=>$,mv:()=>Q,v9:()=>Y});o(821057),o(670560),o(267602),o(916054),o(653476),o(241792),o(228244),o(667294);var n=()=>o(506347),i=()=>o(156642),r=()=>o(35980),a=()=>o(933868),s=()=>o(306164),l=()=>o(625230),c=()=>o(788860),d=()=>o(513670),u=()=>o(614027),p=()=>o(47443),m=()=>o(360746),f=()=>o(577041),g=()=>o(286338),v=()=>o(605067),h=()=>o(906591),_=()=>o(345918),b=()=>o(972079),y=()=>o(106342),S=()=>o(793935),w=()=>o(589525),k=()=>o(876822),I=()=>o(960562),C=()=>o(241449),x=()=>o(826955),T=()=>o(807230),M=()=>o(18281),P=()=>o(897257),A=()=>o(997593),R=()=>o(934262),B=()=>o(54512),E=()=>o(381140),D=()=>o(295274),U=()=>o(308186),F=()=>o(282662),N=()=>o(576828),V=()=>o(818254),L=()=>o(332542),O=()=>o(636340),Z=()=>o(794586),j=()=>o(224597),K=()=>o(145284),z=()=>o(968377),H=()=>o(269299),q=()=>o(188517),W=o(785893);const G={secondary_sidebar:{outliner_location:"pane",from:"sidebar_private_pane"},main_sidebar:{outliner_location:"sidebar",from:"sidebar_private_section"},workflow_templates_onboarding_modal:{outliner_location:"workflow_templates_onboarding_modal",from:"private_workflow_templates_onboarding_modal"}};async function $(e){const{environment:t,spaceStore:o,spaceViewStore:i,type:r,prepend:a,outlinerToggleButtonStore:s,outlinerItemFrom:l,shouldPersistToggleState:d,title:m}=e,f=new(q().sA)(t,"createPageInSection");if((0,T().ww)(t)){if("workspace"===r&&o.pointer.spaceId){const e=P().subscriptionDataStoreInstance.state,n=e?await(0,M().DI)(t,o.pointer.spaceId,e):1;if(n>=10){const{accept:e}=await U().gt({message:(0,W.jsx)("span",{children:(0,W.jsx)(c()._H,{defaultMessage:"Create a new top-level page?",id:"sidebarActions.confirmDialog.newWorkspacePage.message",values:{strongtext:e=>(0,W.jsx)("strong",{children:e}),memberCount:n}})}),description:(0,W.jsx)(c()._H,{defaultMessage:"This page will be visible in the sidebar to all {memberCount} members of your workspace.",id:"sidebarActions.confirmDialog.newWorkspacePage.description",values:{memberCount:n}}),acceptLabel:(0,W.jsx)(c()._H,{defaultMessage:"Create top-level page",id:"sidebarActions.confirmDialog.newWorkspacePage.confirmButton.label"})});if(!e)return null}}const{serverCommitResult:e,performResult:{createdPage:g}}=H().createAndCommit({userAction:"outlinerActions.createPageInSection",environment:t,canUndo:!0,perform:e=>{const n=K().KE({environment:t,spaceStore:o,spaceViewStore:i,isPrivate:"private"===r,prepend:a,transaction:e,title:m,tracker:f});return s&&te({environment:t,spaceViewStore:i,type:r,outlinerToggleButtonStore:s,newIsHidden:!1,shouldPersistToggleState:Boolean(d)}),t.device.isMobile&&S().close(),{createdPage:n}}});if("private"===r){const{outliner_location:e,from:o}=G[l||"main_sidebar"];B().W(t,{from:o,outliner_location:e,type:"page",new_page_id:g.id,creating_block_id:g.id})}else"workspace"===r&&B().W(t,{from:"sidebar_workspace_section",type:"page",new_page_id:g.id,creating_block_id:g.id});const v=o.getDisableSpacePageEdits();return"workspace"===r&&v&&await e,p()._c({environment:t,store:g,visitType:u().vu.Link,pageVisitSource:n().tY.Create}),g}}async function Q(e){const{environment:t,spaceStore:o,spaceViewStore:i,teamStore:r,andNavigate:a,from:s,outlinerToggleButtonStore:l,shouldPersistToggleState:c,title:d,loading:m,appendOrPrepend:f,event:g}=e;if(!(0,T().ww)(t))return;const v=await(0,y().hE)(),{serverCommitResult:h,performResult:{createdPage:_}}=H().createAndCommit({userAction:"outlinerActions.createPageInTeam",environment:t,canUndo:!0,perform:e=>({createdPage:v({environment:t,spaceStore:o,spaceViewStore:i,teamStore:r,from:s,title:d,event:g,loading:m,appendOrPrepend:f,transaction:e})})});return await h,a&&p()._c({environment:t,store:_,visitType:u().vu.Link,pageVisitSource:n().tY.Create}),l&&A().k7({environment:t,spaceViewStore:i,teamStore:r,outlinerToggleButtonStore:l,newIsHidden:!1,shouldPersistToggleState:Boolean(c),isExplicitUserAction:!1}),_}async function Y(e){var t,o;const{environment:n,droppedStores:r,droppedDirection:s,type:l,targetStore:d,targetParentStore:u,isDroppingOnFullSection:p}=e,h=await(0,v().ed)({environment:e.environment,blocks:r,from:"dragAndDrop",dropArgs:{direction:s,destination:d??J({targetStore:d,targetParentStore:u}),destinationOutlinerType:l,isDroppingOnFullSection:p}});if(!h.confirmed)return;const{shouldClearPagePermissions:y,shouldUpdateToManualSort:S}=h;if(1===r.length&&(null===(t=u.getValue())||void 0===t||null===(o=t.includes)||void 0===o||!o.call(t,r[0].id))){let e=[];for(const o of r)if(e=await m().NN({environment:n,block:o,action:"move"}),"user_canceled"===e)return;const t=r[0].id;for(const o of e)o.id!==t&&r.push(o)}const w=Object.fromEntries(r.map((e=>[e.id,e.getParentPointer()]))),{performResult:{moved:C}}=await H().createAndCommitAsync({environment:n,userAction:"outlinerActions.confirmAndHandleDrop",waitForServerCommit:!0,perform:async t=>{const o=await async function(e){const{environment:t,type:o,droppedDirection:n,targetStore:r,targetParentStore:s,droppedStores:l,transaction:d,isTopLevelItem:u,shouldClearPagePermissions:p,shouldUpdateToManualSort:m}=e,v=function(e){for(const t of e){const e=b().Z.findOutlinerItemFromStore(t);if(e)return e.type}}(l),{currentSpaceStore:h,currentUserStore:y}=k().default.state,S=null==h?void 0:h.id,w=P().subscriptionDataStoreInstance.state,C="bookmarks"===v&&"bookmarks"===o,x=ie(e),T=S&&l.some((e=>e.isTopLevelWorkspacePage(S))),A=r&&S&&r.isTopLevelWorkspacePage(S),R=null==h?void 0:h.getDisableSpacePageEdits();if(S&&R&&(T||A)&&!C&&n!==I().v.Onto&&null!=y&&y.isDefined()&&w){const e=(0,M().hn)(w).filter((e=>e.userId===y.id))[0];if(e&&!a().zz(e.role))return U().UW((0,W.jsx)(c()._H,{defaultMessage:"This workspace has locked top-level workspace page operations.",id:"sidebarActions.confirmDialog.lockedWorkspaceTopLevel.message"})),!1}const B=J({targetStore:r,targetParentStore:s});if(!C&&!x){if("user_cancelled_move"===await z().Hl({transaction:d,moveStores:l,moveTargetStore:B}))return!1}V().eX({environment:t,transaction:d,moveToStore:B,targetBlocks:l,from:"drag_and_drop"}),!m||"private"!==o&&"shared"!==o||function(e){let{environment:t,transaction:o,type:n}=e;const{currentSpaceViewStore:i,currentUserSettingsStore:r}=k().default.state;if(!i||!r)return{moved:!1};const{allPagesStores:a}=(0,_().a2)({environment:t,spaceViewStore:i,userSettingsStore:r,type:n}),s="private"===n?i.getPrivatePagesStore():i.getSharedPagesStore();O().sO({transaction:o,store:s,value:a.map((e=>e.id))});const l=i.getSettingsStore().getKeyStore("sidebar_section_menu").getKeyStore("sortOption").getKeyStore(n);l&&O().sO({transaction:o,store:l,value:"manual"})}({environment:t,transaction:d,type:o});const E=function(e){const{environment:t,type:o,targetStore:n,targetParentStore:r,droppedDirection:a,droppedStores:s,duplicate:l,transaction:c}=e,{currentSpaceViewStore:d,currentSpaceStore:u,currentUserSettingsStore:p}=k().default.state;let m;const f=null==n?void 0:n.getModel();if(a===I().v.Onto&&n&&r&&null!=f&&f.isType(i().m3))m=N().LQ({environment:t,targetParentStore:r,targetStore:n,droppedDirection:I().v.Below,droppedStores:s,duplicate:l,transaction:c});else if(ie(e)&&n){if(!d||!p)throw new Error("currentSpaceViewStore or currentUserSettingsStore not found");const e=(0,g().mq)(t),{visiblePagesStores:o,allPagesStores:i}=(0,_()._o)({environment:t,spaceViewStore:d,userSettingsStore:p,type:"shared"}).state,r=e?i.map((e=>e.id)):o.map((e=>e.id)),l=s.map((e=>e.id)),u=r.filter((e=>l.indexOf(e)<0)),f=u.findIndex((e=>e===n.id));let v=[];v=a===I().v.Above?[...u.slice(0,f),...l,...u.slice(f)]:[...u.slice(0,f+1),...l,...u.slice(f+1)],e?O().sW({store:d,data:{shared_pages_manual_sort:v},transaction:c}):O().sW({store:d,data:{shared_pages:v},transaction:c}),m=s}else"private"===o&&u&&d&&K().OQ({environment:t,spaceStore:u,spaceViewStore:d,transaction:c}),m=N().LQ({environment:t,targetParentStore:r,targetStore:n,droppedDirection:a,droppedStores:s,duplicate:l,transaction:c});return m}(e),D=E.filter((e=>e.isTopLevel()));p&&j().O2({blocks:E,transaction:d});if("workspace"===o)j().lF({environment:t,blocks:D,transaction:d});else if("private"===o){const e=null==r?void 0:r.getSpaceStore();e&&l.every((o=>o.isTopLevelPrivatePage({environment:t,spaceStore:e})))&&"private"===v||j().Y5({environment:t,blocks:D,transaction:d})}const F=u&&n!==I().v.Onto;if(F){(await(0,f().mk)())({environment:t,blocks:l,transaction:d})}return!0}({...e,transaction:t,shouldClearPagePermissions:y,shouldUpdateToManualSort:S});return{moved:o}}});C&&V().wS({environment:n,movedItems:r,previousParentPointers:w,moveToLocation:(0,v().vz)({targetStore:d,droppedDirection:s,outlinerSectionType:l,environment:n})})}function J(e){let{targetStore:t,targetParentStore:o}=e;if(t)return t;const{id:n,table:i}=o;let r;switch(i){case"space":case"space_view":r={type:"space",id:n};break;case"block":r={type:"page",id:n};break;case"team":r={type:"team",id:n};break;default:throw new Error("Unexpected table type")}return(0,v().uw)(r)}async function X(e){const{droppedStores:t,duplicate:o}=e.dropArgs,{environment:n,type:i,parentStore:r,isDroppingOnFullSection:a}=e,s=I().v.Below;return!!r&&(await Y({environment:n,type:i,targetParentStore:r,isTopLevelItem:!0,droppedDirection:s,droppedStores:t,duplicate:o,isDroppingOnFullSection:a}),!0)}function ee(e){const{environment:t,store:o,parentStore:n,insertStores:i,transaction:r,before:a,type:s}=e,{currentSpaceViewStore:l,currentSpaceStore:c}=k().default.state,u=d().d9(i).reverse();"private"===s&&c&&l&&K().OQ({environment:t,spaceStore:c,spaceViewStore:l,transaction:r});const p=a?i.map((e=>F().Vt({parentStore:n,insertStore:e,beforeStore:o,transaction:r}).childStore)):u.map((e=>F().BE({parentStore:n,insertStore:e,afterStore:o,transaction:r}).childStore)),m=p.filter((e=>e.isTopLevel()));return"workspace"===s?j().lF({environment:t,blocks:m,transaction:r}):"private"===s&&j().Y5({environment:t,blocks:m,transaction:r}),p}function te(e){const{environment:t,spaceViewStore:o,type:n,outlinerToggleButtonStore:i,newIsHidden:a,shouldPersistToggleState:s}=e;i.setState({...i.state,isHidden:a}),E().VS(t,{is_toggled:!a,outliner_type:n}),s&&r().Z.set({userId:o.environment.currentUser.id,key:(0,w().Fl)(o,n),value:a}),(0,R().tourIsActiveInSidebarStep)(R().default.state)&&a&&R().default.setState({type:"inactive"})}function oe(e){const{type:t,targetStore:o,targetParentStore:n,transaction:i,isTopLevelItem:r}=e,a="team"===t&&n.table===s().e0&&r;if(F().Od({childToRemoveStore:o,parentStore:n,transaction:i}),a&&o.getParentId()===n.id){const t=x().zX.createChildStore(e.targetParentStore,{...e.targetParentStore.pointer,table:s().e0});z().sp({teamStore:t,store:o,transaction:i})}}function ne(e){let{environment:t,blockStore:o,event:r,shouldNavigateToSource:a,analytics:s,toggleOptions:c}=e;(0,T().ww)(t)?(t.device.isMobile&&S().close(),H().createAndCommit({userAction:"OutlinerItem.createdPage",environment:t,canUndo:!0,perform:e=>function(e){var t;const{environment:o,store:r,transaction:a,navigateToParent:s,from:l}=e,c=O().j4({environment:o,type:i().Ti.page,inMemoryRecordCache:r.inMemoryRecordCache,transaction:a,spaceId:r.isCollectionView()?null===(t=r.getCollectionStore())||void 0===t?void 0:t.pointer.spaceId:r.pointer.spaceId}),d=r.getAssociatedCollectionStore();if(r.isCollectionView()){const e=r.getCollectionStore()||d;if(!e)throw new Error("getCollectionViewCollectionStore() returned undefined");if(!L().zw({parentStore:e,childStore:c,transaction:a}))throw new Error("parentChildActions.moveToCollection() returned false");const t=e.getDefaultTemplatePageStore();t&&D().ob({title:"template",environment:o,store:c,templateStore:t,isKeyboard:!1,isCreateIn:!1,transaction:a,from:"outliner_actions"})}r.isCollectionView()||L().jG({parentStore:r.getContentStore(),childStore:c,transaction:a}),C().default.setState({...C().default.state,lastPageId:k().default.state.mainEditorCurrentBlockStore?k().default.state.mainEditorCurrentBlockStore.id:void 0}),o.device.isMobile?p()._c({environment:o,store:c,showMoveTo:!1,saveParent:!1,visitType:u().vu.Link,pageVisitSource:n().tY.Create}):Z().CH({environment:o,store:c,showMoveTo:!0,saveParent:!1,currentBlockStore:s?r:void 0,peekMode:void 0,resultsStore:void 0,collectionContextStore:void 0,pageVisitSource:n().tY.Create}),B().W(o,{from:"sidebar_outliner_item",outliner_location:"secondary_sidebar"===l?"pane":"sidebar",type:"page",new_page_id:c.id,creating_block_id:c.id,parent_collection_id:c.getParentCollectionIdUpToTwoLevels()})}({environment:t,event:r,store:o,transaction:e,navigateToParent:a,from:s.from})}),l().j({name:"page_created",args:{type:s.type,from:s.from}}),c&&!o.isCollectionView()&&(c.onToggle(!0),(0,h().Ps)({store:o,toOpen:!0,environment:t,isTopLevelItem:c.isTopLevelItem}))):(0,T().eD)(t)}function ie(e){let{type:t,droppedDirection:o,isTopLevelItem:n}=e;return"shared"===t&&o!==I().v.Onto&&n}},175295:(e,t,o)=>{function n(e){const{key:t,overlayContainerStore:o}=e;o.state.overlays.has(t)||(o.state.overlays.add(t),o.emit())}function i(e){const{key:t,overlayContainerStore:o}=e;o.state.overlays.has(t)&&(o.state.overlays.delete(t),o.emit())}o.d(t,{I:()=>n,O:()=>i})},441530:(e,t,o)=>{o.d(t,{Y_:()=>A,bo:()=>B,hc:()=>P,og:()=>D,ru:()=>R,tk:()=>E});o(821057);var n=()=>o(492788),i=()=>o(156642),r=()=>o(396136),a=()=>o(752778),s=()=>o(139978),l=()=>o(513670),c=()=>o(47443),d=()=>o(887430),u=()=>o(429725),p=()=>o(949842),m=()=>o(487270),f=()=>o(154057),g=()=>o(714966),v=()=>o(472753),h=()=>o(876822),_=()=>o(346392),b=()=>o(826955),y=()=>o(262453),S=()=>o(365609),w=()=>o(439373),k=()=>o(421654),I=()=>o(282662),C=()=>o(636340),x=()=>o(497065),T=()=>o(94912),M=()=>o(269299);function P(e){const{environment:t,store:o,targetStore:n,transaction:i}=e,r=o.getParentBlockStore();if(r){const e=r.getContentStore(),a=w().k({environment:t,parentBlockStore:r,targetStore:n,transaction:i});return I().rS({parentStore:e,oldChildStore:o,newChildStore:a,transaction:i}).childStore}throw new Error("Could not create alias block.")}function A(e){const{environment:t,store:o,collectionStore:l,collectionViewStore:c,transaction:u}=e,{id:p}=t.currentUser,f=o.getRecordStoreUIParent();if(null!=f&&f.valueIs(y().i)){if(!o.isDefined())throw new Error("Block to replace was not defined.");if(f&&p){var h,_;if(f.pointer.spaceId&&o.getSpaceId()&&f.pointer.spaceId!==o.getSpaceId())throw new Error("The parent has a different spaceId than the store.");const e=f.pointer.spaceId||o.getSpaceId(),p=(0,m().TS)({environment:t,table:r().iU,spaceId:e}),y=null===(h=(0,d().Vv)(l))||void 0===h?void 0:h.getFormatStore().getKeyStore("table_properties").getValue(),S=null===(_=(0,d().Vv)(l))||void 0===_||null===(_=_.getQueryStore())||void 0===_?void 0:_.getKeyStore("sort").getValue(),w={id:(0,m().TS)({environment:t,table:s().np,spaceId:o.getSpaceId()}),version:0,type:"table",parent_id:p,parent_table:"block",alive:!0,space_id:o.getSpaceId(),format:{table_properties:y,collection_pointer:{table:a().vF,id:l.id,spaceId:l.pointer.spaceId}},query2:{sort:S}};C().ae({environment:t,table:"collection_view",value:w,inMemoryRecordCache:o.inMemoryRecordCache,transaction:u});const k=C().j4({environment:t,id:p,type:i().Ti.collectionView,spaceId:o.getSpaceId(),inMemoryRecordCache:o.inMemoryRecordCache,transaction:u});C().sW({store:k,data:{view_ids:[w.id]},transaction:u});const x=I().rS({parentStore:f,oldChildStore:o,newChildStore:b().G.createChildStore(f,{table:r().iU,id:p}),transaction:u}).childStore;return(0,g().u)(w.id,{viewPointer:null==c?void 0:c.pointer}),n().default.afterNextFlush((()=>{const e=v().R.findBlockFromStoreWithMethod(x,"handleCreated");e&&e.handleCreated()})),x}}}function R(e){const{environment:t,blocks:o,openInNew:n,pageVisitSource:i}=e,r=o[0];if(n){const e=(0,u().ZP)({store:r,pageVisitSource:i,embedded:!1});x().c4({environment:t,url:e,openInNew:n})}else{const e=r.recordStoreUIParentStore instanceof b().G&&r.recordStoreUIParentStore.isCollectionView(),{mainEditorCurrentBlockStore:o}=h().default.state;if(e&&o){const e=(0,u().ZP)({store:o,fullyQualified:!1,peekViewBlockId:r.id,pageVisitSource:i});x().c4({environment:t,url:e})}else c()._c({environment:t,store:r,pageVisitSource:i})}}function B(e){const{environment:t,store:o,lock:n}=e,{id:i}=t.currentUser;if(!i)return;const r={block_locked:n,block_locked_by:i};M().createAndCommit({userAction:"pageBlockActions.setPageLock",environment:t,canUndo:!0,perform:e=>{C().sW({store:o.getFormatStore(),data:r,transaction:e})}})}function E(e){const{transaction:t,store:o,coverStore:n,pageCovers:i}=e,r=Object.keys(i),a=i[r[l().MX(0,r.length-1)]],s=a.items[l().MX(0,a.items.length-1)],c=s.coverUrl,d=s.position;C().sO({store:n,value:c,transaction:t}),k().Mp({store:o,coverPosition:d,transaction:t})}function D(e,t,o){(0,p().ZP)({event:e,context:p().Af.EditorClick,callback:()=>function(e,t){const o=Boolean(S().Z.state.pageMap[e.id])||_().Z.state.pages.has(e.id);!e.canEdit()||e.isNonEditableState()||o||(0,f().X9)()||M().createAndCommit({userAction:"PageViewBlock.handlePlaceholderClick",environment:t,canUndo:!0,perform:o=>{T().ls({environment:t,store:e,transaction:o})}})}(t,o)})}},853686:(e,t,o)=>{o.d(t,{Ri:()=>S,UX:()=>y,s4:()=>b});o(267602),o(653476),o(241792);var n=()=>o(903680),i=()=>o(396136),r=()=>o(599480),a=()=>o(271839),s=()=>o(81954),l=()=>o(513670),c=()=>o(696459),d=()=>o(614027),u=()=>o(122479),p=()=>o(852465),m=()=>o(876822),f=()=>o(773725),g=()=>o(148882),v=()=>o(826955),h=()=>o(824462);const _=32,b=100;async function y(e,t){await m().default.waitUntilRendered();const{fromPageRefresh:o,blockStore:l,pageVisitStore:c,timestamp:_}=t,b=e.currentUser.id;if(void 0===b||o)return;t.blockStore.id!==c.state.pageId&&c.setState({...c.getInitialState(),pageId:t.blockStore.id});const y=(0,v().Kv)(l,{table:a().UI,id:(0,a().Pv)({parent_id:l.id,user_id:b}),spaceId:(0,s().J)(l.pointer.spaceId)}),S=(0,v().Kv)(l,{table:r().Kk,id:(0,a().Pv)({parent_id:l.id,user_id:b}),spaceId:(0,s().J)(l.pointer.spaceId)});if(await g().transactionQueue.awaitRecordTransaction({table:i().iU,id:l.id}),await(0,p().M1)(l),!l.canRead()||(0,u().IJ)(e,l))return;await y.load(),await S.load();const k=y.getKeyStore("visited_at").getValue(),I=S.getKeyStore("exited_at").getValue(),C=await async function(e,t,o,i){const{id:r}=e.currentUser,a=t.id,s=t.getSystemBlockTypeStore().getValue();if((0,n().EW)(s))return{type:"skipped"};if(r){var l;null==e||null===(l=e.mobileNative)||void 0===l||l.recordPageVisit(r,{blockId:a,spaceId:o,visitedAt:i}),f().Z.recordVisit({id:a,systemBlockType:s,type:d().vu.Default,currentUserId:r})}const c=await h().callApi({eventName:"recordPageVisit",environment:e,data:{block:{id:a,spaceId:o},timestamp:i},headers:{recordId:a,spaceId:o}});return c}(e,l,(0,s().J)(l.pointer.spaceId),_);if("skipped"===C.type)return;if("failed"===C.type)return;const x=w({pageVisits:C.data.pageVisits,currentState:c.state,blockStore:l});c.state.pageId===l.id&&c.setState({...x,lastViewTime:k,lastExitTime:I})}async function S(e,t){await m().default.waitUntilRendered();const o=e.currentUser.id;if(void 0===o)return;const{blockStore:n,pageVisitStore:i,incremental:r}=t,a=t.limit||_;let d;if(r){const{pageId:e,lastViewTime:t,lastExitTime:n,...r}=i.state,a=Object.entries(r).map((e=>{let[t,n]=e;if(o===t)return;const i=n.getVisitedAt();return void 0!==i?i+1:void 0}));d=l().Fp(a.filter(c().$K))}const u=await h().callApi({eventName:"getPageVisitors",environment:e,data:{block:{id:n.id,spaceId:(0,s().J)(n.pointer.spaceId)},sinceTimestamp:d,limit:a},headers:{recordId:n.id,spaceId:(0,s().J)(n.pointer.spaceId)}});if("failed"===u.type)return;const p=w({pageVisits:u.data.pageVisits,blockStore:n,currentState:i.state});let f;if(Object.keys(p).length<=b)f=p;else{const{pageId:e,lastViewTime:t,lastExitTime:o,...n}=p,i=(0,c().qP)(n).map((e=>{let[t,o]=e;return[t,o.getVisitedAt()??0]}));f={pageId:e,lastViewTime:void 0,lastExitTime:void 0};const r=l().MR(i,(e=>{let[,t]=e;return-t})).slice(0,b);for(const[a]of r)f[a]=p[a]}i.state.pageId===p.pageId&&i.setState(f)}function w(e){const{blockStore:t,pageVisits:o,currentState:n}=e,i={...n,pageId:t.id};for(const r of o){const{id:e,user_id:o}=r;o in i||(i[o]=v().t1.createChildStore(t,{table:a().UI,id:e,spaceId:(0,s().J)(t.pointer.spaceId)}))}return i}},332542:(e,t,o)=>{o.d(t,{SH:()=>m,hh:()=>c,hr:()=>u,jG:()=>p,nO:()=>d,rS:()=>f,zo:()=>l,zw:()=>s});o(821057);var n=()=>o(836230),i=()=>o(852465),r=()=>o(636340),a=()=>o(269299);function s(e){const{childStore:t,parentStore:o,transaction:n}=e,i=t.getRecordStoreAtRootPath(),r=i.getValue(),s=i.getAssociatedCollectionId();if(r){const{alive:e}=r;if(s!==o.id||!e){const e=o.getParentBlockStore();return e&&e.isCollectionViewPageWithContent()?(p({parentStore:e,childStore:t,transaction:n}),!0):(a().applyOperation({store:o,operation:{pointer:t.pointer,path:[],command:"setParent",args:{parentId:o.id,parentTable:o.table}},transaction:n}),!0)}}return!1}function l(e){const{blockStore:t,transaction:o}=e,i=t.getParentStore();if(i){(0,n().A6)(i.table,t.table)?u({parentStore:i,childStore:t,transaction:o}):c({childStore:t,transaction:o})}}function c(e){const{childStore:t,transaction:o}=e;if((0,i().OY)(t)){const e=t,n=e.getAssociatedCollectionStore();if(null!=n&&n.isPageTreeCollection()){const n=t.getParentBlockStore();n&&u({childStore:e,parentStore:n,transaction:o})}}t.getRecordStoreAtRootPath().getAlive()&&r().sW({store:t,data:{alive:!1},transaction:o})}function d(e){const{pageStore:t,transaction:o}=e;t.getRecordStoreAtRootPath().getAlive()&&r().sW({store:t,data:{alive:!1},transaction:o})}function u(e){const{childStore:t,parentStore:o,transaction:i}=e,r=(0,n().A6)(o.table,t.table);if(!r)throw new Error(`Could not find child path for parent table ${o.table} and child table ${t.table}`);a().applyOperation({store:o,operation:{pointer:o.pointer,path:r,command:"removeChild",args:{id:t.id}},transaction:i})}function p(e){const{childStore:t,parentStore:o,transaction:i}=e,r=(0,n().A6)(o.table,t.table);if(!r)throw new Error(`Could not find child path for parent table ${o.table} and child table ${t.table}`);a().applyOperation({store:o,operation:{pointer:o.pointer,path:r,command:"insertChildrenAfter",args:{ids:[t.id],after:e.after}},transaction:i})}function m(e){const{childStore:t,parentStore:o,transaction:i}=e,r=(0,n().A6)(o.table,t.table);if(!r)throw new Error(`Could not find child path for parent table ${o.table} and child table ${t.table}`);a().applyOperation({store:o,operation:{pointer:o.pointer,path:r,command:"insertChildrenBefore",args:{ids:[t.id],before:e.before}},transaction:i})}function f(e){const{parentStore:t,oldChildStore:o,newChildStore:n,transaction:i}=e,r=o.id;(t.getValue()||[]).indexOf(r)>=0&&(p({parentStore:t,childStore:n,transaction:i,after:r}),u({parentStore:t,childStore:o,transaction:i}))}},174421:(e,t,o)=>{o.d(t,{Ud:()=>d,gp:()=>m,lN:()=>u,x8:()=>p});var n=()=>o(836273),i=()=>o(916673),r=()=>o(205228),a=()=>o(848643),s=()=>o(824462),l=()=>o(231077),c=()=>o(497065);async function d(e){const t=(0,a().eC)(e),o=await s().callApi({eventName:"generatePasskeyRegistrationOptions",environment:e,data:{}});if("success"!==o.type)return;const{attemptId:c,options:d}=o.data,u={callbackType:t.callbackType,attemptId:c,options:JSON.stringify(d)},p=(0,i().bf)({url:`${r().default.domainBaseUrl}${n()._j.passkeyRegistrationRedirect}`,query:u}),m=await(0,a().HU)(e,p,!1);await l().openExternalUrl(m)}async function u(e,t,o,r,a){const s=await p({options:a});if(!s)return;const l=(0,i().SK)(n()._j.passkeyRegistrationCallback,{csrfToken:o,attemptId:r,response:JSON.stringify(s)}),d="nativemailredirect"===t?"/nativemail":"nativecalendarredirect"===t?"/nativecalendar":"/native";c().c4({environment:e,url:`${d}${l}`})}async function p(e){const{options:t}=e;try{const{startRegistration:e}=await o.e(31477).then(o.bind(o,156603));return await e(t)}catch(n){return}}async function m(e){const{environment:t,attemptId:o,attestation:n,shouldValidateCsrfToken:i,csrfToken:r}=e;try{const e=await s().callApi({eventName:"verifyPasskeyRegistration",environment:t,data:{attemptId:o,attestation:n,shouldValidateCsrfToken:i??!1,csrfToken:r}});return"success"===e.type&&!0===e.data.isVerified?{created:!0}:{created:!1}}catch(a){return{created:!1}}}},893379:(e,t,o)=>{o.d(t,{D0:()=>g,If:()=>v,YM:()=>f});var n=()=>o(251887),i=()=>o(922713),r=()=>o(396136),a=()=>o(752778),s=()=>o(602299),l=()=>o(278191),c=()=>o(255933),d=()=>o(125571),u=()=>o(306164),p=()=>o(691970),m=()=>o(636340);function f(e){const{childStore:t,parentStore:o,transaction:n}=e,i=t.getRecordStoreAtRootPath().getValue();if(i){const{parent_id:r,parent_table:a,alive:s}=i;r===o.id&&a===o.table&&s===e.alive||m().sW({store:t,data:{parent_id:o.id,parent_table:o.table,alive:e.alive},transaction:n})}}function g(e){if((0,n().hL)(e.childStore.table)){const t=e.childStore;return function(e){const{childStore:t,parentStore:o,transaction:n}=e,m=t.getRecordStoreUIParent();if(o.table===c().bx&&t.table===r().iU||o.table===u().e0&&t.table===r().iU||o.table===p().dx&&t.table===d().zU||o.table===i().Xj&&t.table===r().iU||o.table===l().AT&&t.table===r().iU)f({childStore:t,parentStore:o,alive:!0,transaction:n});else if(o.table===d().zU&&o.path&&"private_pages"===o.path[0]&&t.table===r().iU){const e=o.getRecordStoreUIParent().getSpaceStore();e&&f({childStore:t,parentStore:e,alive:!0,transaction:n})}else o.table===r().iU&&m&&m.table===d().zU&&m.path&&"private_pages"===m.path[0]?f({childStore:t,parentStore:o,alive:!0,transaction:n}):o.table!==r().iU&&o.table!==a().vF&&o.table!==s().x_||f({childStore:t,parentStore:o,alive:!0,transaction:n})}({...e,childStore:t})}{const{childStore:t,parentStore:o,transaction:n}=e,{parent_id:i,parent_table:r}=t.getValue()||{};i===o.id&&r===o.table||m().sW({store:t,data:{parent_id:o.id,parent_table:o.table},transaction:n})}}function v(e){const{childStore:t,parentStore:o,transaction:n}=e,{parent_id:i,parent_table:r,alive:a}=t.getValue()||{},s=o.table===d().zU&&o.path&&"private_pages"===o.path[0]&&a,l=i===o.id&&r===o.table&&a;(s||l)&&m().sW({store:t,data:{alive:!1},transaction:n})}},82937:(e,t,o)=>{o.d(t,{Af:()=>P,E5:()=>R,ME:()=>D,Xd:()=>U,bA:()=>M,jG:()=>A,xv:()=>E});o(670560);var n=()=>o(506347),i=()=>o(285670),r=()=>o(161002),a=()=>o(836273),s=()=>o(173255),l=()=>o(626534),c=()=>o(718959),d=()=>o(429725),u=()=>o(815532),p=()=>o(105649),m=()=>o(793935),f=()=>o(291335),g=()=>o(876822),v=()=>o(475335),h=()=>o(482162),_=()=>o(645805),b=()=>o(965903),y=()=>o(127519),S=()=>o(491927),w=()=>o(175113),k=()=>o(282662),I=()=>o(824034),C=()=>o(497065),x=()=>o(269299),T=()=>o(663366);function M(e,t){const{mode:o}=t,n=e.WindowSizeStore.state.width,r=h().default.state.preferredSidePeekWidth||n/2;h().default.update((e=>({...e,open:!0,preferredSidePeekWidth:Math.min(r,n*(2/3)),isOpening:!e.open,isClosing:!1,...t}))),o===i().R&&m().toggleLeftSidebarByWindowSize(e),p().default.isVisible()&&u().TN({environment:e,autoClose:!0})}function P(e){const{resultsStore:t,collectionContextStore:o,pageVisitSource:n}=e;null==o||o.searchOpenStore.setState(!1),h().default.setState({...h().default.state,resultsStore:t,collectionContextStore:o,pageVisitSource:n})}function A(e){(h().default.isSidePeekOpen()||h().default.isCenterPeekOpen())&&B(e)}function R(e){h().default.isSidePeekOpen()&&B(e)}function B(e){c().kw.state&&!v().default.state.isKeyboardMode||_().default.state.isOpen&&_().default.state.menuIsOpen||b().default.isSelected()||y().default.hasSelection()||E({environment:e,from:"empty_space_click"})}function E(e){let{environment:t,from:o,preventAnimation:i=!1,pageSource:l}=e;const c=h().default.state;if(!c.open||c.isClosing)return;h().default.isSidePeekOpen()&&!i&&h().default.setState({...c,isClosing:!0});const{mode:u,targetStore:p,showMoveTo:m,collectionContextStore:v,savedSelectionStoreState:_,savedTableSelectionStoreState:y,savedSidebarExpandedStoreState:M}=c,P=p.getContentStores(),A=1===P.length?P[0]:void 0,R=A&&A.isEmptyEditableBlock(),B=m&&p.isEmptyTitle()&&(p.isEmptyPage()||R);x().createAndCommit({userAction:"PeekRenderer.close",environment:t,canUndo:!0,perform:e=>{B?(T().y8({environment:t,blocks:[c.targetStore],transaction:e}),e.postSubmitCallbacks.push((e=>{e||S().dh(t,{analyticsName:"delete",from:"peek_actions",block_id:p.id,block_type:"page"})}))):R&&k().Od({parentStore:p.getContentStore(),childToRemoveStore:A,transaction:e})}}),o&&"side_peek"===u&&w().vc(t,{from:o}),w().$C(t,{peek_mode:u,from:o,target_page_id:p.id,target_parent_id:p.getParentId(),page_source:l,should_delete:B}),I().jC(t,u),I().LU(t),I().rM(t),b().default.setState({...b().default.state,..._}),y.isActive&&s().Z.setState(y),M&&f().sidebarExpandedStore.setState(!0);const{mainEditorCurrentBlockStore:E}=g().default.state,{RouterStore:D}=t,U=D.state.route;if(null!=v&&v.searchQueryStore.state&&(null==v||v.searchOpenStore.setState(!0)),E&&"page"===U.name){const e=(0,d().ZP)({store:E,fullyQualified:!1,scrollToBlockId:U.scrollToBlockId,collectionViewId:U.collectionViewId,discussionId:U.discussionId,showMoveTo:U.showMoveTo,saveParent:U.saveParent,pageVisitSource:n().tY.PeekClose});C().c4({environment:t,url:e})}else"chat"===U.name?C().c4({environment:t,url:a()._j.chat}):"team"===U.name?C().c4({environment:t,url:(0,r().y)({teamId:U.teamId})}):"marketplace"===U.name&&C().c4({environment:t,url:a()._j.marketplace})}function D(){const e=h().default.state;e.open&&!e.isClosing&&h().default.setState({...e,open:!1,resultsStore:void 0,collectionContextStore:void 0,topHoverAreaEntered:!1})}function U(e){const{collectionContextStore:t,resultsStore:o}=e;(0,l().Y)(t)||P({collectionContextStore:t,resultsStore:o,pageVisitSource:void 0})}},784234:(e,t,o)=>{o.d(t,{$G:()=>se,GQ:()=>be,Kh:()=>fe,MX:()=>pe,Pk:()=>ue,hs:()=>me,l3:()=>ae,n_:()=>he,pk:()=>ye,tQ:()=>re,u9:()=>Se});o(670560),o(267602),o(653476),o(470928),o(30005),o(241792),o(228244);var n=()=>o(492788),i=()=>o(799891),r=()=>o(431595),a=()=>o(956057),s=()=>o(578292),l=()=>o(528514),c=()=>o(933868),d=()=>o(422894),u=()=>o(696056),p=()=>o(126139),m=()=>o(81954),f=()=>o(255933),g=()=>o(611940),v=()=>o(243225),h=()=>o(306164),_=()=>o(989478),b=()=>o(293338),y=()=>o(720866),S=()=>o(513670),w=()=>o(696459),k=()=>o(572623),I=()=>o(443269),C=()=>o(487270),x=()=>o(527278),T=()=>o(239482),M=()=>o(122479),P=()=>o(88476),A=()=>o(852465),R=()=>o(345918),B=()=>o(91502),E=()=>o(591914),D=()=>o(620218),U=()=>o(587565),F=()=>o(681832),N=()=>o(876822),V=()=>o(518019),L=()=>o(619779),O=()=>o(749826),Z=()=>o(458335),j=()=>o(826955),K=()=>o(576387),z=()=>o(18281),H=()=>o(697623),q=()=>o(897257),W=()=>o(925713),G=()=>o(555813),$=()=>o(491927),Q=()=>o(930085),Y=()=>o(912732),J=()=>o(395362),X=()=>o(465755),ee=()=>o(824462),te=()=>o(308186),oe=()=>o(636340),ne=()=>o(269299);const ie=(0,o(788860).vU)({preventFullPageAccessDeletion:{id:"permissionsActions.preventRemovingAllFullAccess.message",defaultMessage:"Please give someone else Full Access before removing this permission."},preventUserOrGroupDeletion:{id:"permissionsActions.preventUserOrGroupDeletion.message",defaultMessage:"At least one person or group must have access."},confirmUpgradeMessage:{defaultMessage:"To add members to your workspace, you need to switch it to the Team plan. You will be charged a prorated amount based on your current billing interval and account balance.",id:"permissions.confirmDialog.upgradeToTeamWorkspace.message"},confirmUpgradeButtonLabel:{defaultMessage:"Upgrade to Team workspace",id:"permissions.confirmDialog.upgradeToTeamWorkspace.confirmButton.label"}});function re(e){const{environment:t,spaceStore:o,permissionItems:n,transaction:i,from:r,skipAnalytics:a,pagePermissionChangeLocation:s}=e;if(!o.isDefined())return!1;const l=n.filter(c().jg).map((e=>(0,v().Po)(e,o.id))),d=n.filter((e=>(0,c().FB)(e))).map((e=>(0,g().IK)(e,o.id)));a||(l.forEach((e=>{Y().dq({environment:t,spaceUser:e,from:r})})),d.forEach((e=>{Y().ME({environment:t,spaceBot:e,from:r})})));for(const c of l)ne().applyOperation({store:(0,E().VK)(o,c.user_id),operation:{pointer:{table:v().WU,id:c.id,spaceId:c.space_id},command:"update",path:[],args:c},transaction:i});for(const c of d)ne().applyOperation({store:(0,E().Wz)(o,c.bot_id),operation:{pointer:{table:g().Zx,id:c.id,spaceId:c.space_id},command:"update",path:[],args:c},transaction:i});return i.postSubmitCallbacks.push((async o=>{Y().NL(t,{status:Boolean(o)?"fail":"success",location:s,permission_items:n}),o||await K().bi(t),e.metric&&D().default.DO_NOT_USE_measureLegacy(e.metric,{environment:t})})),!0}function ae(e){return le(e)}function se(e){return le(e)}function le(e){const{environment:t,store:o,permissionItems:r,transaction:a,skipAnalytics:s,pagePermissionChangeLocation:u,fromPermissionWrapper:p,skipGuestLimitValidation:g,flowId:h}=e;if(!g){if((0,M().SO)(e))return!1}if(!o.isDefined())return!1;const b=o.getPermissionItems();let y=[...b];const{id:k}=t.currentUser,I=o instanceof j().G&&o.getParentTable()===f().bx,C=o instanceof j().G&&(I||o.isRestricted()),P=y.some((e=>(c().jg(e)||c().hV(e))&&"editor"===e.role));s||(o instanceof j().G?Y().kM({environment:t,store:o,newItems:r,location:u,inSudoMode:a.useSudoMode,fromPermissionWrapper:p,flowId:h}):r.forEach((e=>{o instanceof j().zX?Y().gR(t,{item:e,teamStore:o}):(0,w().t1)(o)}))),y=y.filter((e=>!r.some((t=>l().Kf(e,t)))));for(const n of r)y.push(n);y=y.filter((e=>"none"!==c().cY(e)));const A=Boolean(r.find((e=>"user_permission"===e.type&&e.user_id===k&&!c().zz(e.role))));if(o instanceof j().G&&C&&k){const e=T().Pj(o),t=T().VP(o),n=null==t?void 0:t.isOwner(k),i=null==t?void 0:t.isNonGuestMember(k,L().Z.state.spacePermissionGroupIds),s=e?(0,v().v8)({userId:k,spaceId:e.id}):void 0,l=s?o.getRecordModel(s):void 0,u=Boolean(null==l?void 0:l.isMember()),p=r.find((e=>"space_permission"===e.type&&c().YX(e.role))),m=r.find((e=>"space_permission"===e.type&&!c().YX(e.role))),f=k?{table:_().KJ,id:k}:void 0,{actorMemberships:g}=(0,U().bi)({actorPointers:new(d().X)(void 0===f?[]:[f]),recordPointers:new(d().X)([o.pointer]),getRecordModel:o.getRecordModel}),h=(0,B().bq)();if(e&&e.canEdit()&&!h){const t=e.getPagesStore();p?ne().applyOperation({transaction:a,store:t,operation:{pointer:t.pointer,path:t.path,command:"listAfter",args:{id:o.id}}}):m&&ne().applyOperation({transaction:a,store:t,operation:{pointer:t.pointer,path:t.path,command:"listRemove",args:{id:o.id}}})}if(!A){y.some((o=>{var r;return!("space_permission"!==o.type||!c().zz(o.role)||!u)||(!("user_permission"!==o.type||!c().zz(o.role)||o.user_id!==k)||(!("group_permission"!==o.type||!c().zz(o.role)||!Boolean(f&&e&&(null===(r=g.getActorMembership(f))||void 0===r?void 0:r.getGroupRole({groupId:o.group_id,spaceId:e.id}))))||(!!((0,c().zU)(o)&&c().zz(o.role)&&(null==t?void 0:t.id)===o.team_id&&i)||!!((0,c().LW)(o)&&c().zz(o.role)&&(null==t?void 0:t.id)===o.team_id&&n))))}))||a.useSudoMode||(y=y.filter((e=>!("user_permission"===e.type&&e.user_id===k))),y.push({type:"user_permission",user_id:k,role:"editor"}))}}if(!y.some((e=>{const t=c().cY(e);return c().zz(t)}))&&C)return n().default.afterNextFlush((()=>{te().UW(x().Z.formatMessage(ie.preventFullPageAccessDeletion))})),!1;const R=y.some((e=>(c().jg(e)||c().hV(e))&&"editor"===e.role));if(I&&P&&!R)return n().default.afterNextFlush((()=>{te().UW(x().Z.formatMessage(ie.preventUserOrGroupDeletion))})),!1;const E=(0,j().Vh)(o,o.pointer,"permissions"),F=[];for(const n of b){!y.find((e=>l().Kf(n,e)))&&c().C2(n)&&(F.push({...n,role:"none"}),"trusted_domain_permission"===n.type&&i().log({level:"warning",from:"permissionsActions.setPermissionItems",type:"oldPermissionItem",data:{miscDataToConvertToString:{spaceId:(0,m().J)(o.pointer.spaceId),permission_item:n}}}))}for(const n of y){const e=b.find((e=>l().Kf(n,e)));if(c().C2(n)&&(!e||!S().Xy(e,n))&&(F.push(n),"trusted_domain_permission"===n.type)){const e=(0,m().J)(o.pointer.spaceId),t=O().default.getConfigKey("trusted_domains_space_ids","space_ids");e&&!t.includes(e)&&(n.source="non_alpha_set_permission_items",i().log({level:"warning",from:"permissionsActions.setPermissionItems",type:"newPermissionItem",data:{miscDataToConvertToString:{spaceId:e,permission_item:n}}}))}}let N=[];const V=T().Om(o);if(o instanceof j().G&&!o.isRestricted()&&V&&V instanceof j().G){const e=(0,M().YO)(V);N=F.map((t=>e.find((e=>S().Xy(e.permissionItem,t)))?{...t,role:"none"}:t))}else N=F;for(const n of N)ne().applyOperation({store:E,operation:{pointer:E.pointer,command:"setPermissionItem",path:E.path,args:n},transaction:a});return a.postSubmitCallbacks.push((async o=>{Y().NL(t,{status:Boolean(o)?"fail":"success",location:u,permission_items:N}),o||await K().bi(t),e.metric&&D().default.DO_NOT_USE_measureLegacy(e.metric,{environment:t})})),!0}function ce(e){var t;const{environment:o,store:n,permissionItems:i,transaction:r,inviteFlowId:a,inviteMessage:s,inviteOrigin:l,disable_invite_email:c}=e,d=null===(t=N().default.state.currentSpaceStore)||void 0===t?void 0:t.id,{id:u}=o.currentUser;for(const p of i)if(d&&"user_permission"===p.type&&p.invite_id){const{inviteeId:e,inviteeTable:t}=de({item:p,spaceId:d}),o={id:p.invite_id,version:1,flow_id:a,space_id:d,target_id:n.id,target_table:n.table,inviter_id:u,inviter_table:_().KJ,invitee_id:e,invitee_table_or_group:t,message:s,created_time:Date.now(),attributes:{permission:p,origin_type:l,disable_invite_email:c}};oe().sW({store:(0,j().Kv)(n,{table:"invite",id:o.id,spaceId:d}),data:o,transaction:r})}return r.postSubmitCallbacks.push((e=>{Q().bR(o,{status:Boolean(e)?"fail":"success",origin:l})})),!0}function de(e){const{item:t,spaceId:o}=e;return c().jg(t)?{inviteeId:t.user_id,inviteeTable:_().KJ}:c().FB(t)?{inviteeId:t.bot_id,inviteeTable:u().cZ}:c().hV(t)?{inviteeId:t.group_id,inviteeTable:p()._e}:c().Ir(t)?{inviteeId:o,inviteeTable:f().bx}:c().zU(t)?{inviteeId:t.team_id,inviteeTable:h().e0}:{}}function ue(e){const{environment:t,store:o,permissionItem:n,transaction:r,shouldInherit:a,fromPermissionWrapper:s,trustedDomainsLoggingData:d}=e;if(!o.isDefined())return;const u=[];if(a){const e=(0,M().YO)(o).map((e=>e.permissionItem)).filter((e=>!n||!l().Kf(e,n)));for(const t of e){let e=!1;if("trusted_domain_permission"===t.type){e=!0;const n=(0,m().J)(o.pointer.spaceId),r=O().default.getConfigKey("trusted_domains_space_ids","space_ids");n&&!r.includes(n)&&(t.source="non_alpha_inherited_permission_items",i().log({level:"warning",from:"permissionsActions.restrictPermission",type:"TrustedDomainPermissionChange",spaceId:n,data:{miscDataToConvertToString:{blockId:o.id,permissionItem:t,trustedDomainsLoggingData:d}}}))}c().C2(t)&&(o.isCollectionView()||c().FB(t)||"content_only_editor"!==t.role?e||u.push(t):u.push({...t,role:"read_and_write"}))}}n&&(u.push(n),Y().kM({environment:t,store:o,newItems:[n],fromPermissionWrapper:s}));const p=t.currentUser.id,f=S().mN([...u,...o.getPermissionItems()||[],{type:"restricted_permission"}],l().OC);!p||(0,U().ZO)({store:o,userId:p,updatedPermissionItems:f})||r.useSudoMode||u.push({type:"user_permission",user_id:p,role:"editor"});const g=o.getPermissionItemsStore();for(const i of u)ne().applyOperation({store:g,operation:{pointer:g.pointer,command:"setPermissionItem",path:g.path,args:i},transaction:r});ne().applyOperation({store:g,operation:{pointer:g.pointer,command:"setSingletonPermissionItem",path:g.path,args:{singletonPermissionItem:{type:"restricted_permission"},set:!0}},transaction:r}),$().gl(t,{type:"none"===(null==n?void 0:n.role)?"remove":"narrow"}),r.postSubmitCallbacks.push((e=>{e||K().bi(t)}))}function pe(e){const{environment:t,store:o,transaction:n,from:i,shareMenuSessionId:r}=e;if(!o.isDefined())return;const a=o.getPermissionItems(),s=T().Om(o),c=s?l().Wo(T().fJ(s)):[],d=l().Ub(o.getModel(),a,c),u=o.getPermissionItemsStore();for(const l of d)ne().applyOperation({store:u,operation:l,transaction:n});$().TJ(t,{using_admin_api:!1,from:i,share_menu_session_id:r}),n.postSubmitCallbacks.push((e=>{e||K().bi(t)}))}async function me(e){const{environment:t,store:o,from:n,shareMenuSessionId:i}=e,{currentSpaceStore:r}=N().default.state;if(r){const e=r.id,a=o.id,s=await ee().callApi({eventName:"spaceAdminRestoreAccess",environment:t,data:{spaceId:e,blockId:a}});$().TJ(t,{using_admin_api:!0,from:n,share_menu_session_id:i}),"failed"===s.type&&te().x2(s)}}function fe(e){const{environment:t,store:o,transaction:n}=e,i=o.getPermissionItems();if(!o.isTopLevelTeamPage()||0===i.length)return;const r=i.filter((e=>c().FB(e)));oe().sW({store:o,transaction:n,data:{permissions:r}}),X().FN(t,{store:T().VP(o)})}function ge(e){const t=e.inviteTargets[0];return!(!t||"bot"!==t.type)}function ve(e){return c().jg(e.permissionItem)&&(0,P().OA)(e.inviteTarget)}async function he(e){const{environment:t,isOnboarding:o,invite:n}=e,i=e.store.getSpaceId();if(0===e.inviteTargets.length||!i)return{success:!0,invitedUsers:{},requestedUsers:{}};const r=q().subscriptionDataStoreInstance.state,a=r?await(0,z().DI)(t,i,r):1;let s;if(ge(e))if((0,A().Mm)(e.store)){const t=e.inviteRole;s=e.inviteTargets.map((e=>({inviteTarget:e,permissionItem:{type:"bot_permission",role:t,bot_id:e.value.id}})))}else(0,A().OY)(e.store)?s=e.inviteTargets.map((e=>({inviteTarget:e,permissionItem:{type:"bot_permission",role:l().uH(e.value.capabilities),bot_id:e.value.id,parent_table:e.value.parent_table,parent_id:e.value.parent_id}}))):(0,w().t1)(e.store);else s=await async function(e){const{environment:t,inviteTargets:o,inviteRole:n}=e;return Promise.all(o.map((async o=>{if("newUser"===o.type){const e=await _e(t,o),i={type:"user_permission",role:n,user_id:e};return{inviteTarget:{...o,value:{...o.value,id:e}},permissionItem:i}}if("existingUser"===o.type){return{inviteTarget:o,permissionItem:{type:"user_permission",role:e.inviteRole,user_id:o.value.id}}}if("group"===o.type){return{inviteTarget:o,permissionItem:{type:"group_permission",role:e.inviteRole,group_id:o.value.group_id}}}(0,w().t1)(o)})))}({environment:t,inviteTargets:e.inviteTargets,inviteRole:e.inviteRole,data:r});const{toInvite:d,toRequest:u}=function(e,t){if(!((0,R().Q6)(N().default.state.currentSpaceStore)&&e instanceof j().G))return{toInvite:t,toRequest:[]};const o=[],n=[];for(const i of t)ve(i)?o.push(i):n.push(i);return{toInvite:n,toRequest:o}}(e.store,s),m={};if(e.store instanceof j().G&&u.length>0){const o=await async function(e){const{environment:t,permissionItems:o,inviteMessage:n,store:i}=e,r=await Promise.allSettled(o.map((async e=>ee().callApi({eventName:"requestAccess",environment:t,data:{type:"guest-invite-request",block:{id:i.id,spaceId:i.getSpaceId()},forActorId:e.user_id,message:void 0,attributes:{role:e.role,inviteMessage:n}}}))));return!r.find((e=>"rejected"===e.status||"fulfilled"===e.status&&"failed"===e.value.type))}({environment:t,store:e.store,permissionItems:u.map((e=>e.permissionItem)),inviteMessage:n.inviteMessage});if(!o)return{success:!1};for(const e of u)m[e.inviteTarget.value.email]=e.permissionItem.user_id}if(0===d.length)return{success:!0,invitedUsers:{},requestedUsers:m};const f=d.map((e=>e.inviteTarget)),g=d.map((e=>e.permissionItem));let v,h;if(e.store instanceof j().G&&void 0!==(0,H().c4)(r))v=await async function(e){const{environment:t,store:o,permissionItems:n,invite:i}=e,r=o.getSpaceId();if(!r)return!1;const a=Z().Z.getData(t,{spaceId:r});if(!a)return!1;const s=(0,C().l5)({environment:t,spaceId:r}),l=t.idCreator.getSpaceShortIdCreator(r,s),d=n.filter(c().jg).map((e=>({...e,invite_id:l.idInSavedSpace(p().Tu)}))),u=await ee().callApi({eventName:"inviteGuestsToSpace",environment:t,data:{block:{id:o.id,spaceId:r},permissionItems:d}});if("failed"===u.type)return!1;const{serverCommitResult:m}=ne().createAndCommit({userAction:"permissionsActions.saveInvites",environment:t,canUndo:!0,cellTarget:"main",perform:e=>{const{inviteFlowId:n,inviteMessage:r,inviteOrigin:a,disable_invite_email:s}=i;ce({environment:t,store:o,permissionItems:d,transaction:e,inviteFlowId:n,inviteMessage:(0,b().my)(r),inviteOrigin:a,disable_invite_email:s})}});await m;const f=n.filter(c().FB);f.length>0&&await ye({environment:t,store:o,permissionItems:f,invite:i});return!0}({environment:t,store:e.store,permissionItems:g,invite:n});else try{await ye({environment:t,store:e.store,sudoModeStore:e.sudoModeStore,permissionItems:g,invite:n}),v=!0}catch(B){v=!1,h=(0,y().t)(B)}if(!ge(e)){var _;const o=e.store instanceof j().G?null===(_=e.store.getCollectionStore())||void 0===_?void 0:_.id:void 0,i=e.store instanceof j().G?e.store.getParentCollectionIdUpToTwoLevels():void 0;var S,I;if(v)Q().jB(t,{role:e.inviteRole,is_space:e.store instanceof j().H2,invite_targets:f,is_onboarding:e.isOnboarding,invite_origin:n.inviteOrigin,permission_items:g,invite_message_length:(null===(S=n.inviteMessage)||void 0===S?void 0:S.length)??0,invite_flow_id:n.inviteFlowId,isProfessionalTeamUser:(0,k().QZ)(),domainType:(0,k().JF)(),share_menu_session_id:F().default.state.sessionId,collection_id:o,parent_collection_id:i});else Q().l5(t,{error:h,role:e.inviteRole,is_space:e.store instanceof j().H2,invite_targets:f,is_onboarding:e.isOnboarding,invite_origin:n.inviteOrigin,permission_items:g,invite_message_length:(null===(I=n.inviteMessage)||void 0===I?void 0:I.length)??0,invite_flow_id:n.inviteFlowId,isProfessionalTeamUser:(0,k().QZ)(),domainType:(0,k().JF)(),share_menu_session_id:F().default.state.sessionId,collection_id:o,parent_collection_id:i})}o||await K().bi(t);const x={};f.forEach(((e,t)=>{var o;const n=g[t];"newUser"!==e.type&&"existingUser"!==e.type||null===(o=e.value)||void 0===o||!o.email||"user_permission"!==n.type||(x[e.value.email]=n.user_id)}));const T=r?await(0,z().DI)(t,i,r):1,M=1===a&&T>1,P=i?V().Z.getData(t,{spaceId:i}):void 0;if(M&&(null==P||!P.subscription)&&i){const e=await W().Ir.trialActions.load();await e.applyMultiplayerReverseTrialIfEligible({spaceId:i,environment:t})}return{success:v,error:h,invitedUsers:x,requestedUsers:m}}async function _e(e,t){const o=(0,s().E2)(x().Z.getIntl()),n=t.value.email,i=await ee().callApi({eventName:"createEmailUser",environment:e,data:{email:n,preferredLocaleOrigin:"inferred_from_inviter",preferredLocale:o}});if("failed"===i.type){if((0,r().Jx)(i.error)){const e=(0,I().nX)(x().Z.getIntl(),i.error);e?te().UW(e):te().RL(i.error.message)}else te().RL(i.error.message);throw i.error}return i.data.userId}async function be(e){let{environment:t,store:o,inviteTargets:n,inviteRole:i,createNewTeamFlowId:r}=e;const a=o.getSpaceId(),s=t.currentUser.id;if(0===n.length)return!0;if(!a||!s)return!1;const l=q().subscriptionDataStoreInstance.state,{teamMemberInfos:c,invitedMemberIds:d}=await async function(e){const{environment:t,inviteTargets:o,inviteRole:n}=e,i=[],r=[];for(const a of o){let e;if("newUser"===a.type){const o=await _e(t,a);e={entity_type:"user",type:n,user_id:o},i.push(o)}else"existingUser"===a.type?(e={entity_type:"user",type:n,user_id:a.value.id},"none"!==a.spaceRole&&"not_in_space"!==a.spaceRole||i.push(a.value.id)):"group"===a.type?e={entity_type:"group",type:"owner"===n?"owner":"member",group_id:a.value.group_id}:(0,w().t1)(a);r.push(e)}return{teamMemberInfos:r,invitedMemberIds:i}}({environment:t,inviteTargets:n,inviteRole:i,data:l}),u=await G().Uj({environment:t,teamMemberInfos:c,teamStore:o,isSettingDefaultTeam:!1,createNewTeamFlowId:r});return u&&(J().Jk(t,{invite_origin:"team_invite_overlay",domainType:(0,k().JF)(),new_workspace_member_count:d.length,new_workspace_member_ids:d}),await K().bi(t)),u}async function ye(e){var t;const{environment:o,store:n,sudoModeStore:i,permissionItems:r,invite:s,skipGuestLimitValidation:l}=e,c=n.getSpaceId()??(null===(t=N().default.state.currentSpaceStore)||void 0===t?void 0:t.id),d=(0,C().l5)({environment:o,spaceId:c}),u=c?o.idCreator.getSpaceShortIdCreator(c,d):void 0,{serverCommitResult:m}=ne().createAndCommit({userAction:"permissionsActions.savePermissionItems",environment:o,canUndo:!0,useSudoMode:"block"===n.table&&(null==i?void 0:i.shouldSaveTransactionWithSudoMode(n)),cellTarget:"main",perform:e=>{const t=r.map((e=>"user_permission"!==e.type?e:{...e,invite_id:(null==u?void 0:u.idInSavedSpace(p().Tu))||a().Il()})),{inviteFlowId:i,inviteMessage:c,inviteOrigin:d,disable_invite_email:m}=s;ce({environment:o,store:n,permissionItems:t,transaction:e,inviteFlowId:i,inviteMessage:(0,b().my)(c),inviteOrigin:d,disable_invite_email:m}),n instanceof j().H2?re({environment:o,spaceStore:n,permissionItems:t,transaction:e,from:d}):n instanceof j().zX?se({environment:o,store:n,permissionItems:t,transaction:e,from:d,skipGuestLimitValidation:l}):n instanceof j().G?ae({environment:o,store:n,permissionItems:t,transaction:e,from:d,skipGuestLimitValidation:l}):(0,w().P)(n)}});await m}function Se(e){const{store:t,transaction:o}=e;oe().sW({store:t,data:{permissions:null},transaction:o})}},183318:(e,t,o)=>{o.d(t,{m:()=>f});var n=()=>o(782202),i=()=>o(998901),r=()=>o(35982),a=()=>o(128119);const{Top:s,Bottom:l,Left:c,Right:d}=i().Placement,{Start:u,Center:p}=i().Alignment,m=12;function f(e){const{store:t,placementToOrigin:o,alignmentToOrigin:i,popupRect:u,originRect:p,placementFlipped:f,viewportAdditionalBottomPadding:v,disableFlippingPlacement:h,originGap:_,viewportPadding:b,popupRectBottomPadding:y}=e,S=(0,n().Z)();let w=b??m;_&&_>w&&(w=_+m);let k=r().jn(S,-w);0!==v&&(k=new(r().iL)(k.x,k.y,k.width,k.height-v));const I=g(u,p,o,i,y),C=Math.max(k.left-I.left,0)+Math.min(k.right-I.right,0),x=Math.max(k.top-I.top,0)+Math.min(k.bottom-I.bottom,0),T=o===c&&Math.abs(C)>0&&r().TF(k,g(u,p,(0,a().FJ)(o),i)),M=o===d&&Math.abs(C)>0&&r().TF(k,g(u,p,(0,a().FJ)(o),i)),P=o===s&&Math.abs(x)>0&&r().kL(k,g(u,p,(0,a().FJ)(o),i)),A=o===l&&Math.abs(x)>0&&r().kL(k,g(u,p,(0,a().FJ)(o),i)),R={placementFlipped:!1,offsetX:0,offsetY:0};if(R.placementFlipped=!h&&(f||T||M||P||A),(!R.placementFlipped||o!==c&&o!==d)&&(R.offsetX=Math.round(C)),(!R.placementFlipped||o!==s&&o!==l)&&(R.offsetY=Math.round(x)),R.placementFlipped)if(o===l){const e=p.top-u.height;k.y>e&&(R.offsetY=Math.round(k.y-e))}else if(o===s){const e=p.bottom+u.height;k.bottom<e&&(R.offsetY=Math.round(k.bottom-e))}t.setState({...t.state,...R})}function g(e,t,o,n,i){if(o===s||o===l){let r,a;return r=n===u?t.left:n===p?t.left+t.width/2-e.width/2:t.right-e.width,a=o===s?t.top-e.height:t.bottom,new DOMRect(r,a,e.width,e.height+(i??0))}{let r,a;return r=n===u?t.top:n===p?t.top+t.height/2-e.height/2:t.bottom-e.height,a=o===c?t.left-e.width:t.right,new DOMRect(a,r,e.width,e.height+(i??0))}}},771678:(e,t,o)=>{o.d(t,{JJ:()=>g,WO:()=>f,jf:()=>m});var n=()=>o(532850),i=()=>o(109477),r=()=>o(35980),a=()=>o(748456),s=()=>o(955620),l=()=>o(28810),c=()=>o(619541),d=()=>o(421654),u=()=>o(636340),p=()=>o(970105);function m(e){const{store:t,transaction:o}=e;"code"===t.getType()?function(e){const{store:t,transaction:o}=e,i=t.getProperties(),l=t.getFormat(),d=t.environment.currentUser.id,m=r().Z.get({userId:d,key:c().T.localLanguagePreferenceKey}),f=m&&a().W[m]?m:c().T.defaultLanguage,g=r().Z.get({userId:d,key:c().T.localCodeWrapPreferenceKey}),v=t.getBlockTitleStore(),h=v.getValue(),_=s().vNd(h);_&&p().sO({environment:t.environment,store:v,value:_,transaction:o});void 0===i.language&&u().sW({store:t.getPropertiesStore(),data:{language:n().O2(f)},transaction:o});void 0===l.code_wrap&&u().sW({store:t.getFormatStore(),data:{code_wrap:g},transaction:o})}({store:t,transaction:o}):"table_of_contents"===t.getType()?function(e){const{store:t,transaction:o}=e,n=t.getFormat();void 0===n.block_color&&d().FH({stores:[t],update:{block_color:"gray"},transaction:o})}({store:t,transaction:o}):"callout"===t.getType()?f({store:t,transaction:o}):"quote"===t.getType()?function(e){const{store:t,transaction:o}=e,n=t.environment.currentUser.id,i=r().Z.get({userId:n,key:c().l.localSizePreferenceKey});void 0!==i&&u().sW({store:t.getFormatStore(),data:{quote_size:i},transaction:o})}({store:t,transaction:o}):"ai_block"===t.getType()&&function(e){const{store:t}=e;g.setState(t.pointer.id)}({store:t})}function f(e){const{store:t,transaction:o}=e,n=t.environment.currentUser.id,a=t.getFormat();if(void 0===a.page_icon){let e=r().Z.get({userId:n,key:l().n});""===e?e=void 0:void 0!==e&&"url"!==(0,i().Lf)(e).type||(e="ðŸ’¡"),d().FH({stores:[t],update:{page_icon:e},transaction:o})}if(void 0===a.block_color){const e=r().Z.get({userId:n,key:l().N})||"gray_background";d().FH({stores:[t],update:{block_color:e},transaction:o})}}const g=o(263184).default.createValue(void 0,{name:"FocusedAiBlockConfigurationMenuId"})},508383:(e,t,o)=>{o.d(t,{E:()=>C,_:()=>x});o(241792);var n=()=>o(504008),i=()=>o(799891),r=()=>o(370590),a=()=>o(183922),s=()=>o(842343),l=()=>o(513670),c=()=>o(792409),d=()=>o(326966),u=()=>o(957042),p=()=>o(173255),m=()=>o(205228),f=()=>o(635596),g=()=>o(660293),v=()=>o(826955),h=()=>o(609306),_=()=>o(965903),b=()=>o(127519),y=()=>o(438793),S=()=>o(824462);const w=1e3,k=1*d().U6,I="presenceActions";function C(e,t,o,n){!function(e,t){const{persistAutoListener:o,rootStore:n,isActive:r,listenerReference:s,userId:l}=e.state;if(r){if(o&&o.destroy(),s&&f().ZP.removeListener(s,t),l&&n&&P({rootStore:n})){const e=(0,a().T0)(n.id);f().ZP.updateField(e,l,{present:!1},k,t,{presenceOnDisconnectFlag:"clear",subscriptionId:I,pageVisitId:void 0,spaceId:n.getSpaceId(),pageId:n.id}),f().ZP.clearOnDisconnect(e,I,t).catch((e=>{i().log({level:"error",from:"destroyPresence",type:"SystemError",error:(0,c().Ui)(e)})}))}e.reset()}}(e,t),n&&function(e,t,o){y().Pu(t,{page_id:e.id,searchSessionId:h().default.state.sessionId,spaceId:e.getSpaceId(),pageVisitId:o.getCurrentPageVisitId(),pageVisitDuration:o.getCurrentPageVisitDuration()}),S().callApi({eventName:"recordPageExit",environment:t,data:{block:{id:e.id,spaceId:e.getSpaceId()},timestamp:Date.now()},headers:{recordId:e.id,spaceId:e.getSpaceId()}})}(n,t,o)}async function x(e){const{userId:t,rootStore:o,presenceStore:i,environment:s,pageVisitIdStore:c}=e;if(await o.load(),t&&M({rootStore:o})){i.setState({...i.state,isActive:!0,rootStore:o,userId:t});const e=l().P2((()=>{i&&i.state.isActive&&i.state.rootStore===o&&T(i,s,c)}),w),d=(e,t)=>{i&&i.state.isActive&&i.state.rootStore===o&&function(e,t){const{remotePresenceData:o}=t.state,n=e||{};l().Xy(o,n)||t.setState({...t.state,remotePresenceData:n})}(function(e){const t={};if(l().Kn(e)){const o=Object.keys(e);for(const n of o){const o=e[n];o&&!(0,u().Gu)(r().uP,o)&&(t[n]=o)}}return t}(t),i)},p=(0,a().T0)(o.id);let m;o.canEdit()&&(m=f().ZP.addListener(p,d,void 0,s)),i.setState({...i.state,persistAutoListener:new(n().Z)({onChange:e}),listenerReference:m}),g().Z.addListener(e),t&&P({rootStore:o})&&await f().ZP.onDisconnect(p,[{operation:"updateField",key:p,field:t,updates:{present:!1},ttl:k},{operation:"logPageExit",userId:t,blockId:o.id,spaceId:o.getSpaceId(),pageVisitId:c.getCurrentPageVisitId()}],I,s),T(i,s,c)}}function T(e,t,o){var n,i;const{persistAutoListener:r,rootStore:s,userId:l}=e.state;if(r&&r.startListener({incrementCycle:!0}),!s||!l||!P({rootStore:s}))return;const c=(0,a().T0)(s.id),u=d().ud(Date.now());if(!s.canEdit())return void f().ZP.updateField(c,l,{userId:l,present:g().Z.state.isVisible,activityTimestampNearestMinuteMs:u,blockId:s.id,blockPath:null},k,t,{presenceOnDisconnectFlag:"register",subscriptionId:I,pageVisitId:o.getCurrentPageVisitId(),spaceId:s.getSpaceId(),pageId:s.id});let m;const h=p().Z.state;h.isActive&&h.currentRowStore&&(m=h.currentRowStore);const y=_().default.state;y.stores.length&&(m=y.stores[0]);const S=b().default.state,w="editing"===S.mode&&S.multiSelection;w&&s.uiContains(w.start.store)&&"block"===w.start.store.table&&(m=w.start.store);const C=null===(n=m)||void 0===n?void 0:n.findRecordStoreUIAncestors((e=>e instanceof v().G)).map((e=>e.id));r&&r.stopListener({isEndOfCycle:!0}),f().ZP.updateField(c,l,{userId:l,present:g().Z.state.isVisible,activityTimestampNearestMinuteMs:u,blockId:(null===(i=m)||void 0===i?void 0:i.id)||null,blockPath:C||null},k,t,{presenceOnDisconnectFlag:"register",subscriptionId:I,pageVisitId:o.getCurrentPageVisitId(),spaceId:s.getSpaceId(),pageId:s.id})}function M(e){const{rootStore:t}=e;return Boolean(t)&&(0,s().Z)(t.id)&&t.canRead()}function P(e){const{rootStore:t}=e;return M({rootStore:t})&&!m().default.isAdminMode}},401411:(e,t,o)=>{o.d(t,{XB:()=>L,th:()=>V,Jv:()=>U,I6:()=>F,Hr:()=>N});o(821057),o(670560),o(267602),o(653476),o(241792);var n=()=>o(504008),i=()=>o(799891),r=()=>o(35980),a=()=>o(530980),s=()=>o(547913),l=()=>o(728670),c=()=>o(528514),d=(o(470928),()=>o(446866)),u=()=>o(933868),p=()=>o(396136),m=()=>o(752778),f=()=>o(255933);function g(e){const{space:t,actor:o,spaceUser:n,publicAccessRequestExpEnabled:i}=e;return!!v({space:t,user:o,spaceUser:n})||function(e,t){const o=Boolean(e.disable_public_access_requests||e.admin_disable_public_access);return!(!t||!t.getActorUserId()||o)}(t,o)&&i}function v(e){const{space:t,user:o,spaceUser:n}=e;if(!o)return!1;let i=!1;const r=t.getEmailDomains();return o&&o.email&&(i=(0,d().dy)(r,o.email)),null!=n&&n.isMember()&&(i=!0),i}function h(e){const{block:t,space:o,viewer:n,spaceUserIds:i,spaceUser:r}=e;if(!t)return;if(null==n||!n.isUser()||!v({space:o,user:n,spaceUser:r}))return;const a=t.getPermissionItems().filter((e=>"user_permission"===e.type&&(0,u().zz)(e.role))).map((e=>e.user_id));return 0!==a.length?a.find((e=>i.includes(e))):void 0}function _(e){let{space:t,intl:o}=e;return{spaceName:t.name||o.formatMessage({id:"publicPageDataHelpers.untitledWorkspace.placeholder",defaultMessage:"Untitled Workspace"}),spaceId:t.id,icon:t.icon,betaEnabled:t.beta_enabled}}var b=()=>o(251887),y=()=>o(934165),S=()=>o(989478),w=()=>o(657120),k=()=>o(720866),I=()=>o(792409),C=()=>o(696459),x=()=>o(527278),T=()=>o(781105),M=()=>o(391995),P=()=>o(749826),A=()=>o(178180),R=()=>o(18281),B=()=>o(824462);const E="publicAccessPageId";async function D(e){const{firstResult:t,localPromise:o,remotePromise:n}=await async function(e){const{environment:t,request:o}=e,n="block-space"===o.type?M().A.measure("loadPublicPageData",`block:${o.blockId} space:${o.spaceId}`,(()=>async function(e,t){if("block-space"!==t.type)return{error:Error("Shouldn't be looking for a non-block-space page")};const{blockId:o}=t,{id:n}=e.currentUser;if(o&&n){let t,u,w,I,C,M;const A=[];try{var i;const d=await T().yY({environment:e,recordPointers:[{table:p().iU,id:o},{table:S().KJ,id:n}],recurFn:e=>{const n=[];return e.table===p().iU&&e.id===o&&(t=e),e.table===f().bx&&(u=e),e.table===m().vF&&t&&t.parent_id===e.id&&(w=e),e.table===S().KJ&&(C=e),e.table===y().l&&e.getDomainLinkSharingEnabled()&&A.push(e.getEmailDomain()),(0,b().tz)(e)&&n.push(e.getParentPointer()),n},recordIsRequired:()=>!0});var r;if(u&&C)M=null===(r=await T().Ye({environment:e,pointer:C.toSpaceUserPointer(u.id)}))||void 0===r?void 0:r.model;const k=null===(i=w)||void 0===i?void 0:i.getLayoutPointer();var s;if(k)I=null===(s=await T().Ye({environment:e,pointer:k}))||void 0===s?void 0:s.model;if(t&&u&&C&&M){const e={table:p().iU,id:o},n=l().om(e,d),i=!l().fh(e,a().omK.fromRecordMapWithRole(d)),r=C,s=Boolean(l().YL(n,r)),b=l().YP(n),y=(0,R().Io)().map((e=>e.userId)),S=(0,c().gD)(n),k=S?A:[],T=function(e){const{spaceDomain:t,actor:o,userHasExplicitAccess:n,intl:i,requireInterstitial:r,requireLogin:s,publicAccessRole:l,publicHomePage:c,template:d,securitySettings:u,spaceUserIds:b,isDeleted:y,spaceUser:S,publicDomainName:w,isDLSViewer:k,isTrustedDomainPage:I,trustedDomains:C,siteGoogleAnalyticsId:x,associatedLayoutModel:T,siteTheme:M,customEmojiUrl:P}=e,A=a().kk5.fromValue(p().iU,e.block),R=a().kk5.fromValue(f().bx,e.space),B=a().kk5.fromValue(m().vF,e.associatedCollectionValue),E="none"!==l,D=(null==o?void 0:o.isUser())&&v({space:R,user:o,spaceUser:S}),U=B&&(n||E)?B.getNormalizedSchema():void 0,F=B&&(n||E)?B.id:void 0,N=B&&(n||E)?B.getFormat():void 0,V=n||E?null==T?void 0:T.id:void 0,L=n||E?null==T?void 0:T.getRawModules():void 0,O=n||E?null==T?void 0:T.getFormat():void 0;return{pageId:null==A?void 0:A.id,..._({space:R,intl:i}),spaceDomain:t,spaceShortId:R.getShortIdStr(),canJoinSpace:D,userHasExplicitAccess:n,ownerUserId:h({block:A,space:R,viewer:o,spaceUserIds:b,spaceUser:S}),collectionId:F,collectionSchema:U,collectionFormat:N,layoutId:V,layoutModules:L,layoutFormat:O,canRequestAccess:!(null==o||!o.isUser())&&g({space:R,actor:o,spaceUser:S,publicAccessRequestExpEnabled:e.publicAccessRequestExpEnabled}),requireInterstitial:r,requireLogin:Boolean(s),publicAccessRole:l,publicHomePage:c,securitySettings:u,template:d,isDeleted:y,publicDomainName:w,isDLSViewer:k,isTrustedDomainPage:I,trustedDomains:C,siteGoogleAnalyticsId:x,siteTheme:M,...P?{icon:P}:{}}}({block:t,space:u,spaceDomain:void 0,associatedCollectionValue:w,associatedLayoutModel:I,actor:r,userHasExplicitAccess:s,intl:x().Z.getIntl(),requireInterstitial:void 0,publicAccessRole:b,securitySettings:void 0,publicHomePage:void 0,template:void 0,publicAccessRequestExpEnabled:P().default.checkGate({gateName:"allow_public_page_access_request",disableExposureLogging:!0}),isDeleted:s?i:void 0,spaceUserIds:y,spaceUser:M,isDLSViewer:!1,isTrustedDomainPage:S,trustedDomains:k});return{value:T}}}catch(d){return{error:(0,k().t)(d)}}}return{error:Error("No offline public page data found.")}}(t,o))).then((e=>({from:"local",result:"value"in e?e.value:void 0}))):Promise.resolve({from:"local",result:void 0}),i=L({environment:t,request:o}).then((e=>({from:"remote",result:e}))),r=await Promise.race([n,i].filter(C().$K));return{firstResult:r,localPromise:n,remotePromise:i}}(e);if(t.result){if("local"===t.from&&!e.ignoreLocalResult)return t.result;if("remote"===t.from&&"success"===t.result.type)return t.result.data}const i=await n;if("local"===t.from){if("success"===i.result.type)return i.result.data}else if("remote"===t.from){const t=await o;if(t.result&&!e.ignoreLocalResult)return t.result}const r="Error loading public page data both locally and remotely";throw"failed"===i.result.type?new Error(`${r}: ${i.result.error}`):new Error(r)}async function U(e){try{const t=await D(e);return n().Z.withListenerIgnored((()=>{t.spaceId&&t.spaceShortId&&A().Z.setState({...A().Z.state,[t.spaceId]:t.spaceShortId})})),t}catch(t){return void i().log({level:"error",from:"publicPageDataActions",type:"loadPublicPageData",error:(0,I().Ui)(t)})}}async function F(e){try{const t=await D(e);return n().Z.withListenerIgnored((()=>{t.spaceId&&t.spaceShortId&&A().Z.setState({...A().Z.state,[t.spaceId]:t.spaceShortId})})),t}catch(t){throw i().log({level:"error",from:"publicPageDataActions",type:"loadPublicPageDataUnsafely",error:(0,I().Ui)(t)}),t}}function N(e){let{currentUserId:t,blockId:o}=e;r().Z.set({userId:t,key:E,value:o})}function V(e){return r().Z.get({userId:e,key:E})}async function L(e){const{environment:t,request:o}=e,n="invite-link"===o.type?(0,w().zx)(o.inviteLinkCode):void 0,i={[s().HY]:n};return function(e){return Boolean("block-space"===e.type&&(e.blockId||e.spaceId))}(o)?B().callApi({eventName:"getPublicPageData",environment:t,data:o,headers:i}):"spaceDomain"in o&&o.spaceDomain?B().callApi({eventName:"getPublicPageDataForDomain",environment:t,data:{...o,type:"block-space",spaceDomain:o.spaceDomain},headers:i}):B().callApi({eventName:"getPublicPageData",environment:t,data:o,headers:i})}},838347:(e,t,o)=>{o.r(t),o.d(t,{loadMoreRecentPages:()=>b,reinitializeGlobalRecentPagesStoreState:()=>h});o(267602),o(653476),o(241792);var n=()=>o(183922),i=()=>o(741633),r=()=>o(513670),a=()=>o(326966),s=()=>o(824462),l=()=>o(15981),c=()=>o(214445),d=()=>o(635596),u=()=>o(63317),p=()=>o(146109),m=()=>o(625820),f=()=>o(507795);let g,v;async function h(e,t,o){t===g&&o===v||(g=t,v=o,u().Z.cleanup(e),await _({environment:e,userId:t,spaceId:o,initializing:!0,refreshTrigger:"recentPage"}),u().Z.update((e=>({...e,initialized:!0,recentPageRefreshTimer:void 0,recentPageRefreshIntervalTimer:void 0,userPageVisitListenerReference:void 0}))))}async function _(e){let{environment:t,userId:o,spaceId:m,initializing:g,refreshTrigger:v}=e;const h=(0,p()._)(),b=h?20:1,y=Date.now(),S=(0,l().yg)()??100,w=!h||(0,c().ZV)({spaceId:m,userId:o}),k=(0,c().x1)({spaceId:m,userId:o});g&&w&&k&&(u().Z.update((e=>{const t=e.recentPages.get(m)??[],n=(0,c().hB)({spaceId:m,userId:o})??[];return e.recentPages.set(m,(0,l().y$)(t,n,m)),{...e}})),f().S(t,v));const I=w&&k?k+1:y-S*a().A0;if(await async function e(n,a){const d={spaceId:m,userId:o,limit:50,beforeTimestamp:n,sinceTimestamp:I},p=await s().callApi({eventName:"getRecentPageVisits",environment:t,userId:o,data:d,headers:(0,i().Bb)({cellId:void 0,recordId:void 0,spaceId:m})});if("success"===p.type){const i=p.data.pages.map((e=>({pageId:e.id,visitedAt:e.visitedAt}))),s=r().F(i.filter((e=>e.visitedAt<n)),(e=>e.visitedAt));u().Z.update((e=>{const t=e.recentPages.get(m)??[],n=i.concat((0,c().hB)({spaceId:m,userId:o})??[]);return e.recentPages.set(m,(0,l().y$)(t,n,m)),e.initialized=!0,{...e}})),l().X4.recompute(),s&&i.length>5&&a<b&&await e(s.visitedAt,a+1),w&&i&&(0,c()._y)({spaceId:m,userId:o,visits:i,isFromRecentPageVisits:!0}),f().S(t,"recentPage")}l().X4.recompute()}(y,1),g){if(!w){const e=u().Z.get(m);e&&(0,c()._y)({spaceId:m,userId:o,visits:e,isFromRecentPageVisits:!0,isBackfill:!0})}u().Z.update((e=>(e.userPageVisitListenerReference&&d().ZP.removeListener(e.userPageVisitListenerReference,t),{...e,userPageVisitListenerReference:d().ZP.addListener((0,n().Ns)(o),r().P2((()=>{_({environment:t,userId:o,spaceId:m,initializing:!1,refreshTrigger:"recentPageReload"})}),5*a().hM,{leading:!1,trailing:!0}),void 0,t)})))}}async function b(e,t){var o,n;let{environment:r,userId:a,spaceId:c}=t;if(u().Z.getWithoutSubscribing(c).length>l().nu)return!1;const d=await s().callApi({eventName:"getRecentPageVisits",environment:r,userId:a,data:{userId:a,spaceId:c,beforeTimestamp:e,limit:m().Xv},headers:(0,i().Bb)({cellId:void 0,recordId:void 0,spaceId:c})});if("success"!==d.type||d.data.pages.length<=0)return!1;const p=d.data.pages.map((e=>({pageId:e.id,visitedAt:e.visitedAt}))),f=null===(o=u().Z.get(c))||void 0===o?void 0:o.length;u().Z.set(c,(0,l().y$)(u().Z.get(c)??[],p,c));const g=null===(n=u().Z.get(c))||void 0===n?void 0:n.length;return l().X4.recompute(),f!==g}},636340:(e,t,o)=>{o.d(t,{Ue:()=>x,ae:()=>S,j4:()=>w,nj:()=>C,sO:()=>k,sW:()=>I});o(821057),o(670560);var n=()=>o(571493),i=()=>o(43165),r=()=>o(536279),a=()=>o(431595),s=()=>o(530980),l=()=>o(481529),c=()=>o(251887),d=()=>o(827370),u=()=>o(396136),p=()=>o(386616),m=()=>o(513670),f=()=>o(696459),g=()=>o(718048),v=()=>o(487270),h=()=>o(876822),_=()=>o(826955),b=()=>o(269299),y=()=>o(188517);function S(e){const{environment:t,table:o,value:n,transaction:i,inMemoryRecordCache:r}=e;if(!n.id){const e=n,i=c().mk.create(o,e),r=c().mk.getSpaceId(i);n.id=(0,v().TS)({environment:t,table:o,spaceId:r})}const a=n,s=c().mk.create(o,a),l=d().dr.fromRecordWithTable(s),u=_().t1.createUniqueRootStore(t,l,{userId:i.userId,inMemoryRecordCache:r});return b().applyOperation({store:u,operation:{pointer:u.pointer,path:[],command:"set",args:n},transaction:i}),u}function w(e){var t,o;const{environment:n,type:r,properties:s,format:c,permissions:d,transaction:m,inMemoryRecordCache:S}=e;let w=e.tracker;const k=e.spaceId||m.spaceId,I=e.id||(0,v().TS)({environment:n,table:u().iU,spaceId:k}),C=new(_().G)(n,{table:u().iU,id:I,spaceId:k},{userId:m.userId,inMemoryRecordCache:S}),x=(0,g().WA)(C.getSpaceStore());if(!w&&!m.getUserFlowForAnalyticsPurposesOnly()){const e="page"===r?"user_flow_create_page":"user_flow_create_block";w=new(y().BW)({environment:n,entryPointName:"recordActions.createBlock",userFlow:e,succeedOnEnqueue:!0})}null===(t=w)||void 0===t||t.track(C.pointer,m);const T=null===(o=h().default.state.currentUserStore)||void 0===o?void 0:o.pointer,M=i().mz({block:{id:I,type:r,permissions:d,properties:s,format:c,space_id:k,created_time:Date.now(),created_by_table:null==T?void 0:T.table,created_by_id:null==T?void 0:T.id},useCrdt:x});for(const i of M)(0,l().V_)(i)?b().applyOperation({store:C,operation:i,transaction:m}):(0,p().Qf)(i)?b().applyCrdtTextOperation({store:C,operation:i,invertedOperation:void 0,transaction:m}):(0,f().t1)(i);return m.postPerformAssertions.push((function(){if(m.isLocal)return;if(!C.getParentStore())throw new(a().p8)(`Created block was not given a parent before being committed in transaction ${m.getUserActionForAnalyticsPurposesOnly()}`)})),C}function k(e){const{store:t,value:o,transaction:n}=e,i=t.path;b().applyOperation({store:t,operation:{pointer:t.pointer,path:i,command:"set",args:o??null},transaction:n})}function I(e){const{store:t,transaction:o}=e,i=t.path;let r=e.data;r&&t.table===u().iU&&(m().Xy(i,[])?(r=function(e){const{properties:t,format:o,crdt_data:n,crdt_format_version:i,...r}=e;return r}(r),r=n().pp(r)):m().Xy(i,["properties"])?"title"in r||(r=n().pp(r)):m().Xy(i,["format"])&&(r=function(e){const{use_crdt:t,text_slice_tree:o,text_clocks:n,...i}=e;return i}(r),r=n().pp(r))),b().applyOperation({store:t,operation:{pointer:t.pointer,path:i,command:"update",args:r},transaction:o})}function C(e){const{store:t,source:o,fileIds:n,transaction:i}=e,r=t.path;for(const a of n)b().applyOperation({store:t,operation:{pointer:t.pointer,path:r,command:"copyFile",args:{source:o,fileId:a}},transaction:i})}function x(e){let{environment:t,table:o,args:n,transaction:i,inMemoryRecordCache:a}=e;const l=s().vkc[o],{model:c,operations:d}=l.create(n),m=_().t1.createUniqueRootStore(t,c.pointer,{userId:i.userId,inMemoryRecordCache:a});for(const s of d)(0,p().Qf)(s)?b().applyCrdtTextOperation({store:(0,r().Fb)(m,(e=>e.table===u().iU),`Expected "${u().iU}", got "${m.table}"`),operation:s,invertedOperation:void 0,transaction:i}):b().applyOperation({store:m,operation:s,transaction:i});return m}},143346:(e,t,o)=>{o.d(t,{HB:()=>x,LK:()=>M,Wl:()=>k,bG:()=>C,fL:()=>I,mQ:()=>A,uo:()=>T});o(241792);var n=()=>o(619995),i=()=>o(530980),r=()=>o(933868),a=()=>o(396136),s=()=>o(255933),l=()=>o(125571),c=()=>o(989478),d=()=>o(691970),u=()=>o(630611),p=()=>o(128129),m=()=>o(955620),f=()=>o(150266),g=()=>o(839002),v=()=>o(696459),h=()=>o(594546),_=()=>o(278589),b=()=>o(263168),y=()=>o(749826),S=()=>o(148882),w=()=>o(430310);function k(e){const{environment:t,pointer:o,userId:i,inMemoryRecordCache:p,model:g,role:v,force:S,maybeStaleRecordMap:w,updatePaths:k,debugSource:I}=e;"block"===o.table&&(0,_().setBlockIdDebugSource)(o.id,I);const C=i||t.currentUser.id,x=null==g?void 0:g.getVersion(),T=p.getRole({pointer:o,userId:C}),M=p.getVersion({pointer:o,userId:C}),A="number"==typeof x&&x>M;if(!(S||A||void 0!==v&&T!==v))return;let R=g;if(!S&&!A&&function(e){const{oldRole:t,newRole:o}=e;if(!o||!r().YX(o))return!1;if(t&&!r().J5(t))return!1;return!0}({oldRole:T,newRole:v})){const e=p.getRecordModel({pointer:o,userId:C});e&&(R=e)}p.setModelAndRole({pointer:o,userId:C},R,v);for(const n of k)p.emitRecord(o,n);y().default.checkGate({gateName:"in_memory_cache_logging"})&&(0,f().lB)(1)&&(0,h().j)({environment:t,event:{eventName:"in_memory_cache_update",eventProperties:{size:p.size}}});const B=t.defaultRecordCache.persistedRecordCache;if(!p.isTemporaryData&&B&&(0,n().t)(o)){const e=R?R.__IM_SORRY__getValue():void 0;if(o.table===a().iU&&e){const t=e;t.properties&&t.properties.title&&(t.properties.title=t.properties.title.map((e=>m().Y_F(e))))}const n=function(e){const{environment:t,pointer:o,model:n,role:i}=e,{id:a}=t.currentUser,p=o.table===c().KJ||o.table===d().dx||o.table===u().Sr;if(p&&a===o.id)return P.LoggedInUser;if((null==n?void 0:n.table)===l().zU&&n.parent_id===a)return P.JoinedSpace;if(o.table===s().bx&&(0,r().Jy)(i))return P.JoinedSpace;return}({environment:t,pointer:o,model:R,role:v}),i={value:e,role:v};B.set({pointer:o,value:i,importance:n,userId:C,maybeStaleRecordMap:w})}p===t.defaultRecordCache.inMemoryRecordCache&&b().unsubscribeAfterDelay({pointer:o,userId:C,environment:t})}async function I(e){const{environment:t,userId:o,recordMap:r,inMemoryRecordCache:a,force:s,maybeStaleRecordMap:l,debugSource:c}=e,d=t.defaultRecordCache.persistedRecordCache;await(0,g().qd)(r,100,(async e=>{let{pointer:r,model:u,role:p}=e,m=u,f=p;if(S().transactionQueue.isPendingTransactionForRecord(r)&&d&&(0,n().t)(r)){const e=await d.get({pointer:r,userId:o||t.currentUser.id});e&&(m=i().kk5.fromValue(r.table,e.value),f=p)}k({environment:t,inMemoryRecordCache:a,pointer:r,userId:o,model:m,role:f,updatePaths:[[]],force:s,maybeStaleRecordMap:l,debugSource:c})}))}async function C(e){const{inMemoryRecordCache:t,pointer:o,userId:r,environment:a,minimumVersion:s}=e,l=y().default.checkGate({gateName:"record_cache_backfill_space_id"}),c=S().transactionQueue.isPendingTransactionForRecord(o),d=a.defaultRecordCache.persistedRecordCache;if(c&&d&&(0,n().t)(o))return await d.get({pointer:o,userId:r});let u,m;if(d&&(0,n().t)(o)){const e=await(0,g().OI)(function(e){switch(e.device.platform){case"browser":switch(e.device.os){case"mac":return 172;case"windows":return 250;case"android":return 0;case"ios":return 360;case"chrome":return 238;case"linux":return 220}return 200;case"electron":switch(e.device.os){case"chrome":return 70;case"mac":return 47;case"windows":return 79}return 57;case"react-native":switch(e.device.os){case"android":return 270;case"ios":return 64}return 102}}(a),async function(){return await d.get({pointer:o,userId:r})}());e.timeout||(u=e.result),u&&k({environment:a,inMemoryRecordCache:t,pointer:o,userId:r,model:i().kk5.fromValue(o.table,u.value),role:u.role,updatePaths:[[]],debugSource:"refreshAndReturnRecord (localResult)"})}try{const e=t.getEntryWithBackfilledSpaceId({pointer:o,userId:r}),n=e?e.value:void 0,c=e?e.pointer:void 0;if(s&&null!=n&&n.value&&(null==n?void 0:n.value.version)>=s)return y().default.checkGate({gateName:"record_map_logging"})&&(0,h().j)({environment:a,event:{eventName:"refresh_and_return_record.use_local",eventProperties:{}}}),n;const d=(0,v().$K)(c)?{...c}:{...o},u=null==n?void 0:n.value;l&&void 0===d.spaceId&&c&&((0,p().GS)(c)||(0,p().L$)(c.table))&&u&&"space_id"in u&&"string"==typeof u.space_id&&(d.spaceId=u.space_id),m=await(0,w().Y)(a,{userId:r,version:n&&n.value&&n.value.version?n.value.version:-1,pointer:d}),m&&k({environment:a,inMemoryRecordCache:t,pointer:o,userId:r,model:i().kk5.fromValue(o.table,m.value),role:m.role,updatePaths:[[]],debugSource:"refreshAndReturnRecord (remoteResult)"})}catch(f){console.error(f)}return y().default.checkGate({gateName:"record_map_logging"})&&(m?(0,h().j)({environment:a,event:{eventName:"refresh_and_return_record.use_remote",eventProperties:{}}}):(0,h().j)({environment:a,event:{eventName:"refresh_and_return_record.use_local",eventProperties:{}}})),m||u}async function x(e){const{inMemoryRecordCache:t,pointer:o,userId:n,environment:r}=e,{defaultRecordCache:a}=r,s=await(0,w().Y)(r,{pointer:o,userId:n,version:-1});s&&(T({environment:r,inMemoryRecordCache:t,persistedRecordCache:a.persistedRecordCache,pointer:o,userId:n}),k({environment:r,inMemoryRecordCache:t,pointer:o,userId:n,model:i().kk5.fromValue(o.table,s.value),role:s.role,updatePaths:[[]],debugSource:"forceFetchRemoteRecord"}))}function T(e){const{inMemoryRecordCache:t,persistedRecordCache:o,pointer:i,userId:r}=e;t.deleteRecord({pointer:i,userId:r}),t.emitRecord(i,[]),o&&(0,n().t)(i)&&o.deleteRecord(i,r)}function M(e){const t=e.defaultRecordCache.inMemoryRecordCache;for(const{pointer:o}of t.data)b().unsubscribeForAllUsers({pointer:o,environment:e});t.clearCache()}const P={LoggedInUser:100,JoinedSpace:50};function A(e,t){let o=0,n=0,i=0;for(const{pointer:r,model:a}of t){if(!a)continue;const t=e.defaultRecordCache.inMemoryRecordCache.hasRecordWithVersion({pointer:r,userId:e.currentUser.id},a.getVersion());!t&&e.defaultRecordCache.inMemoryRecordCache.hasRecord({pointer:r,userId:e.currentUser.id})?n++:t&&o++,i++}return{num_records:i,num_cached_records:o,num_stale_records:n}}},658325:(e,t,o)=>{o.d(t,{AI:()=>v,MZ:()=>h,qw:()=>_});o(670560),o(267602),o(653476),o(470928),o(241792);var n=()=>o(513670),i=()=>o(932753),r=()=>o(250625),a=()=>o(590162),s=()=>o(275200),l=()=>o(32969),c=()=>o(156958),d=()=>o(35982),u=()=>o(505121),p=()=>o(557576),m=()=>o(797522),f=()=>o(965903),g=()=>o(879952);function v(e){const{environment:t,target:o,startX:n,startY:d,showSelectionRect:m,preventSelectStores:v,allowVerticalEdgeScroll:_,allowHorizontalEdgeScroll:b}=e,y=f().default.getDefaultContainerFromTarget(o);if(!y)return;if(n>=window.innerWidth-u().Z.state)return;if(d>=window.innerHeight-u().Z.state)return;const S=s().VW(o),w=s().xH(o),k=l().C.getMembersByDOMOrder({filter:e=>e.getContextSelectableContainer()===y}),I=()=>{p().default.state.isActive&&(g().Jy(),h({environment:t,currentX:p().default.state.currentX,currentY:p().default.state.currentY,toggle:a().y().shift}))};S&&r().lj(S,"scroll",I),w&&r().lj(w,"scroll",I),p().default.setState({moved:!1,isActive:!0,startX:n,startY:d,currentX:n,currentY:d,currentRect:void 0,defaultContainer:y,startSelection:f().default.state.stores,startSelectables:k,verticalScrollerEl:S,horizontalScrollerEl:w,startScrollTop:S?S.scrollTop:0,startScrollLeft:w?w.scrollLeft:0,showSelectionRect:m,handleScroll:I,preventSelectStores:v,allowVerticalEdgeScroll:_,allowHorizontalEdgeScroll:b}),g().ZH({environment:t}),i().wG(),c().MO()}function h(e){const{environment:t}=e,o=p().default.state;if(o.isActive){const{currentX:i,currentY:r,verticalScrollerEl:a,horizontalScrollerEl:s,startScrollTop:l,startScrollLeft:c,preventSelectStores:u}=o;let f=o.startY;if(a){f-=a.scrollTop-l}let v=o.startX;if(s){v-=s.scrollLeft-c}const h={top:Math.min(f,r),bottom:Math.max(f,r),left:Math.min(v,i),right:Math.max(v,i)},_=m().default.state.selectableRectMap,y=function(e){const t=new Map,o={root:!0};for(const n of e){const e=b(n)||o;t.get(e)||t.set(e,[]),t.get(e).push(n)}return Array.from(t.values())}(o.startSelectables.filter((e=>{const t=_.get(e),n=e.props.store;return e.props.canSelect&&t&&d().kK(h,t)&&u.indexOf(n)<0&&(!o.showSelectionRect||n.isTransclusionType()||!n.isInsideTransclusion())})));let S=[];const w=y.find((e=>e.length>1));if(w)S=w;else{const e=n().Z$(y);e&&(S=e)}let k=S.map((e=>e.props.store));if(e.toggle)for(const e of o.startSelection)n().q9(k,e)?k=n().zu(k,e):k.push(e);p().default.setState({...o,moved:!0,currentX:e.currentX,currentY:e.currentY,currentRect:h}),g().Z5({environment:t,stores:k})}}function _(e){const t=p().default.state;if(t.isActive){const{moved:o,verticalScrollerEl:n,horizontalScrollerEl:i,handleScroll:a}=t;o||g().ZH({environment:e}),n&&r().ZV(n,"scroll",a),i&&r().ZV(i,"scroll",a),p().default.setState({isActive:!1})}}function b(e){if(e)for(;;){if(!(e=e.getContextClosestSelectable()))return;if(e.props.canSelect)return e}}},531515:(e,t,o)=>{o.d(t,{Bl:()=>l,Hi:()=>r,VG:()=>a,hE:()=>s});var n=()=>o(366257),i=()=>o(269299);function r(e){const{environment:t,store:o,propertyId:r,id:a,position:s,transaction:l}=e;let c;c="before"===s.type?{pointer:o.pointer,path:["properties",r],command:"addRelationBefore",args:{id:a,spaceId:o.getSpaceId(),before:s.before}}:{pointer:o.pointer,path:["properties",r],command:"addRelationAfter",args:{id:a,spaceId:o.getSpaceId(),after:s.after}},i().applyOperation({store:o,operation:c,transaction:l}),n().r({environment:t,store:o,relationPropertyId:r})}function a(e){const{environment:t,store:o,propertyId:r,id:a,transaction:s}=e;i().applyOperation({store:o,operation:{pointer:o.pointer,path:["properties",r],command:"removeRelation",args:{id:a,spaceId:o.getSpaceId()}},transaction:s}),n().r({environment:t,store:o,relationPropertyId:r})}function s(e){const{environment:t,sourceStore:o,destStore:n,propertyWithInverse:i,position:a,transaction:s}=e;r({environment:t,store:o,propertyId:i.property,id:n.id,position:a,transaction:s}),r({environment:t,store:n,propertyId:i.inverse,id:o.id,transaction:s,position:{type:"after"}})}function l(e){const{environment:t,sourceStore:o,destStore:n,propertyWithInverse:i,transaction:r}=e;a({environment:t,store:o,propertyId:i.property,id:n.id,transaction:r}),a({environment:t,store:n,propertyId:i.inverse,id:o.id,transaction:r})}},951109:(e,t,o)=>{o.d(t,{g:()=>l,x:()=>c});var n=()=>o(32969),i=()=>o(876822),r=()=>o(826955),a=()=>o(794923),s=()=>o(879952);function l(e){const{mainEditorCurrentBlockStore:t}=i().default.state;if(t){const o=r().G.createChildStore(t,e.blockStore.pointer);a().default.setState({...a().default.state,originRect:e.originRect||n().C.getRectFromStore(e.blockStore),blockStore:o})}}function c(e){a().default.reset(),s().ZH({environment:e})}},547586:(e,t,o)=>{o.d(t,{$:()=>l,x:()=>c});var n=()=>o(32969),i=()=>o(876822),r=()=>o(826955),a=()=>o(795820),s=()=>o(879952);function l(e){const{currentSpaceViewStore:t}=i().default.state;if(t){const o=r().G.createChildStore(t,e.blockStore.pointer);a().default.setState({...a().default.state,originRect:e.originRect||n().C.getRectFromStore(e.blockStore),clonedBlockStore:o,originalBlockStore:e.blockStore,renderDelete:e.renderDelete})}}function c(e){a().default.reset(),s().ZH({environment:e})}},207874:(e,t,o)=>{o.d(t,{AZ:()=>K,L0:()=>j,hv:()=>W,K9:()=>V,dA:()=>Z,M7:()=>q,XT:()=>H,KX:()=>O,Yw:()=>L,qB:()=>z});o(492176),o(670560),o(7961),o(267602),o(653476),o(470928),o(228244);var n=()=>o(536279),i=()=>o(481529),r=()=>o(827370),a=()=>o(396136),s=()=>o(386616),l=()=>o(349220),c=()=>o(513670),d=()=>o(696459),u=()=>o(268752),p=()=>o(794321),m=()=>o(826955),f=()=>o(910135),g=()=>o(965903),v=()=>o(127519),h=()=>o(606571),_=()=>o(955620),b=()=>o(970105),y=()=>o(269299),S=()=>o(339523),w=()=>o(311170),k=()=>o(527666);function I(e,t,o,n){const i=n.getClosestPageAndTransclusionReferenceAncestorIds(t),r=n.getClosestPageAndTransclusionReferenceAncestorIds(o);if(0===i.length||0===r.length)return[];const a=[];for(const s of c().jV(i,r)){const i=(0,l().TO)(n.getPathToBlock(s)),r=(0,l().TO)(x(e,i));a.push(...C(r,t,o))}return a.sort(((e,t)=>e.length-t.length)),a}function C(e,t,o){const n=[];let i=[];for(const r of function*(e,t){let o=!1;for(const n of function*(e){function t(e){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function*(){if(yield e,(!e.isNavigableBlock()||o)&&("transclusion_reference"!==e.getType()||n))for(const o of(0,k().y)(e))yield*t(o,!1,!1)}()}yield*t(e,!0,!0)}(e))n.id===t&&(o=!0),o&&(yield n)}(e,t))if(r.id!==t){if(i.length>0){if("transclusion_reference"===r.getType()){i=[];continue}i.push(r),r.id===o&&(n.push(i),i=[])}}else i=[r],t===o&&(n.push(i),i=[]);return n.sort(((e,t)=>e.length-t.length)),n}function x(e,t){(0,l().T)(t.length>0,"Path must not be empty"),(0,l().T)(e.id===t.shift(),"Path must start with root store id");let o=e;for(;t.length>0;){const e=(0,l().TO)(t.shift()),n=(0,k().y)(o).find((t=>t.id===e));if(!n)return;o=n}return o}var T=()=>o(113501),M=()=>o(156538);function P(e){const{store:t}=e;let o;const n=T().Z.getPageStoreForBlockStore(t);if(o=n?A({...e,pageStore:n,allowNonRenderedSingleStoreSelection:!1}):R(e),o&&(o.start.store!==o.end.store||o.start.index<o.end.index))return o}function A(e){var t,o;const{store:i,startTextInstanceId:r,startId:a,endTextInstanceId:s,endId:l,pageStore:u,allowNonRenderedSingleStoreSelection:p}=e,m=(0,n().TO)(T().Z.getPageTextInstanceTrackerForPage(u.pointer),h().PL),f=m.getBlockIdForTextInstanceItemId(r,a),g=m.getBlockIdForTextInstanceItemId(s,l);if(void 0===f||void 0===g)return;const v=I(u,f,g,(0,n().TO)(T().Z.getPageBlockTrackerForPage(u.pointer),h().qV));let _,b;const y=c().MR(v,(e=>(0,n().TO)(e.at(0),h().n8)===i?-1:1));for(const c of y){const e=(0,n().TO)(c.at(0),h().n8),t=(0,n().TO)(c.at(-1),h().n8);if(M().E.findEditableWithStore(e.getBlockTitleStore())&&M().E.findEditableWithStore(t.getBlockTitleStore())){_=e,b=t;break}}if((!_||!b)&&p&&y.length>0&&y[0].at(0)===y[0].at(-1)&&(_=(0,n().TO)(y[0].at(0),h().n8),b=(0,n().TO)(y[0].at(-1),h().n8)),!_||!b)return;const S=(0,n().TO)(null===(t=_.getBlockTitleTextSliceTree())||void 0===t?void 0:t.getGraphemeIndexOfTextItem(r,a),h().zg),w=(0,n().TO)(null===(o=b.getBlockTitleTextSliceTree())||void 0===o?void 0:o.getGraphemeIndexOfTextItem(s,l),h().zg),k="visible"===S.type?S.index:"deleted"===S.type?S.nextVisibleIndex:(0,d().t1)(S),C="visible"===w.type?w.index+1:"deleted"===w.type?w.nextVisibleIndex:(0,d().t1)(w);return{start:{store:_.getBlockTitleStore(),index:k},end:{store:b.getBlockTitleStore(),index:C}}}function R(e){var t;const{store:o,startTextInstanceId:i,startId:r,endTextInstanceId:a,endId:s}=e;(0,n().T)(o.useCrdt(),"Expected CRDT block");const l=null===(t=o.getBlockTitleTextSliceTree())||void 0===t?void 0:t.getTextInstanceIds();if(!l||!l.has(i)||!l.has(a))return;const c=o.getBlockTitleTextSliceTree(),u=null==c?void 0:c.getGraphemeIndexOfTextItem(e.startTextInstanceId,e.startId);if(!u)return;const p=a===i&&s===r?u:null==c?void 0:c.getGraphemeIndexOfTextItem(e.endTextInstanceId,e.endId);if(!p)return;const m="visible"===u.type?u.index:"deleted"===u.type?u.nextVisibleIndex:(0,d().t1)(u),f="visible"===p.type?p.index+1:"deleted"===p.type?p.nextVisibleIndex:(0,d().t1)(p);return{start:{store:o.getBlockTitleStore(),index:m},end:{store:o.getBlockTitleStore(),index:f}}}function B(e){const{store:t,textInstanceId:o,itemId:i,options:r}=e,a=T().Z.getPageStoreForBlockStore(t);if(!a)return;const s=(0,n().TO)(T().Z.getPageTextInstanceTrackerForPage(a.pointer),h().PL).getBlockIdForTextInstanceItemId(o,i,r);if(!s)return;const l=I(a,s,s,(0,n().TO)(T().Z.getPageBlockTrackerForPage(a.pointer),h().qV));if(l.length>0){const e=l[0];return(0,n().T)(1===e.length,"Range must contain exactly one block store"),e[0]}}function E(e){const{environment:t,store:o,transaction:i,operation:r}=e,a=function(e){const{store:t,textInstanceId:o,id:n}=e,i=T().Z.getPageStoreForBlockStore(t),r=i?A({store:t,startTextInstanceId:o,startId:n,endTextInstanceId:o,endId:n,pageStore:i,allowNonRenderedSingleStoreSelection:!0}):R({store:t,startTextInstanceId:o,startId:n,endTextInstanceId:o,endId:n});return null==r?void 0:r.end}({store:o,textInstanceId:r.args.textInstanceId,id:r.args.originId});if(!a)return o.useCrdt()?"err_no_store_position":(F({environment:t,store:o,invertedOperation:r,transaction:i}),"success_non_crdt");const s=(0,n().TO)((0,S().sQ)(a.store),"Inverted delete parent block store is required"),l=(0,n().TO)(s.getBlockTitleTextSliceTree(),h().o6),{operations:c,invertedOperations:u}=l.getOperationsForInsertTextValueAfterOriginId(r.args.textInstanceId,r.args.searchLabel,r.args.originId,r.args.deletedTextValue),p=(0,n().TO)(l.getGraphemeIndexOfTextItem(r.args.textInstanceId,r.args.originId),h().zg),m="visible"===p.type?p.index+1:"deleted"===p.type?p.nextVisibleIndex:(0,d().t1)(p),f=_().Zxt(_().P$X(l.getTextValue(),r.args.deletedTextValue,m));return w().F({transaction:i,store:s,crdtOperations:c,invertedOperations:u,fullTextValue:f}),"success"}function D(e){const{environment:t,store:o,transaction:i,operation:r}=e,{textInstanceId:s,textSliceStartItemId:l,targetTextInstanceId:c,targetTextSliceEndItemId:d}=r.args,u=B({store:o,textInstanceId:s,itemId:l,options:{type:"start"}}),p=B({store:o,textInstanceId:c,itemId:d,options:{type:"end"}});if(!u||!p){const e=o,s=new(m().G)(t,{table:a().iU,id:r.args.sourceBlockId,spaceId:o.pointer.spaceId});return e.isDefined()&&!e.useCrdt()||s.isDefined()&&!s.useCrdt()?(function(e){const{environment:t,sourceBlockStore:o,targetBlockStore:i,invertedOperation:r,transaction:a}=e;(0,n().T)(o.isDefined(),"Source block store is expected to be defined"),(0,n().T)(i.isDefined(),"Target block store is expected to be defined"),(0,n().T)(!o.useCrdt()||!i.useCrdt(),"One or both of source and target blocks is expected to be a non-CRDT block");const s=o.getBlockTitleStore(),l=i.getBlockTitleStore();b().sO({environment:t,store:s,value:r.args.previousSourceTextValue,transaction:a}),b().sO({environment:t,store:l,value:r.args.previousTargetTextValue,transaction:a})}({environment:t,sourceBlockStore:s,targetBlockStore:e,invertedOperation:r,transaction:i}),"success_non_crdt"):u?"err_no_target_block_store":"err_no_source_block_store"}const{fullSourceTextValue:f,fullTargetTextValue:g}=function(e){const{source:t,target:o}=e,i=(0,n().TO)(t.blockStore.getBlockTitleTextSliceTree(),h().o6),r=i.getTextValue(),a=(0,n().TO)(i.findTextSliceTreeContainingItemWithId(t.textInstanceId,t.textSliceStartItemId),h().zg),s=(0,n().TO)(i.getGraphemeIndicesOfSlice({boundary:"start",textInstanceId:t.textInstanceId,start:t.textSliceStartItemId}),h().zg).startIndex,l=a.getLastTextSliceTreeInPreOrderTraversal(),c=(0,n().TO)(i.getGraphemeIndicesOfSlice({boundary:"end",textInstanceId:l.getTextSlice().textInstanceId,end:l.getTextSlice().getEndItem().id}),h().zg).exclusiveEndIndex,{tokensBeforeRange:d=[],tokensInsideRange:u=[],tokensAfterRange:p=[]}=_().xrQ(r,s,c),m=_().Zxt([...d,...p]);if(t.blockStore.pointer.id===o.blockStore.pointer.id){const e=(0,n().TO)(i.getGraphemeIndicesOfSlice({boundary:"end",textInstanceId:o.textInstanceId,end:o.textSliceEndItemId}),h().zg).exclusiveEndIndex;if(e<=s){const t=_().Zxt(_().P$X(m,u,e));return{fullSourceTextValue:t,fullTargetTextValue:t}}if(c<=e){const t=e-(c-s),o=_().Zxt(_().P$X(m,u,t));return{fullSourceTextValue:o,fullTargetTextValue:o}}return{fullSourceTextValue:r,fullTargetTextValue:r}}const f=(0,n().TO)(o.blockStore.getBlockTitleTextSliceTree(),h().o6),g=f.getTextValue(),v=(0,n().TO)(f.getGraphemeIndicesOfSlice({boundary:"end",textInstanceId:o.textInstanceId,end:o.textSliceEndItemId}),h().zg).exclusiveEndIndex,b=_().Zxt(_().P$X(g,u,v));return{fullSourceTextValue:m,fullTargetTextValue:b}}({source:{blockStore:u,textInstanceId:s,textSliceStartItemId:l},target:{blockStore:p,textInstanceId:c,textSliceEndItemId:d}}),v=(0,n().TO)(u.getBlockTitleTextSliceTree(),h().o6),S=(0,n().TO)(v.findTextSliceTreeBeforeTextSliceStartingWithItemId(r.args.textInstanceId,r.args.textSliceStartItemId),h().zg).getTextSlice();return y().applyCrdtTextOperation({transaction:i,store:u,operation:{command:"moveTextSlice",path:[],pointer:u.pointer,args:{textInstanceId:s,sourceSearchLabel:"",textSliceStartItemId:l,targetBlockId:p.id,targetTextInstanceId:c,targetSearchLabel:"",targetTextSliceEndItemId:d,forDowngrade:{fullSourceTextValue:f,fullTargetTextValue:g}}},invertedOperation:{command:"invertedMoveTextSlice",path:[],pointer:u.pointer,args:{textInstanceId:s,textSliceStartItemId:l,targetTextInstanceId:S.textInstanceId,targetTextSliceEndItemId:S.getEndItem().id,sourceBlockId:p.id,previousSourceTextValue:p.getBlockTitleStore().getValue()??[],targetBlockId:u.id,previousTargetTextValue:u.getBlockTitleStore().getValue()??[]}}}),"success"}function U(e){const{environment:t,store:o,transaction:n,operation:i}=e;switch(i.command){case"invertedInsertText":return function(e){const{environment:t,store:o,transaction:n,operation:i}=e,r=P({store:o,startTextInstanceId:i.args.textInstanceId,startId:i.args.startId,endTextInstanceId:i.args.textInstanceId,endId:i.args.endId});return r?(b().pz({environment:t,multiSelection:r,transaction:n}),"success"):o.useCrdt()?"err_no_multiselection":(F({environment:t,store:o,invertedOperation:i,transaction:n}),"success_non_crdt")}({environment:t,store:o,transaction:n,operation:i});case"invertedDeleteText":return E({environment:t,store:o,transaction:n,operation:i});case"invertedMoveTextSlice":return D({environment:t,store:o,transaction:n,operation:i});case"invertedAddAnnotation":return function(e){const{environment:t,store:o,transaction:n,operation:i}=e,r=P({store:o,startTextInstanceId:i.args.startTextInstanceId,startId:i.args.startId,endTextInstanceId:i.args.endTextInstanceId,endId:i.args.endId});return r?(b().QX({environment:t,multiSelection:r,annotationKey:i.args.annotationKey,transaction:n}),"success"):o.useCrdt()?"err_no_multiselection":(F({environment:t,store:o,invertedOperation:i,transaction:n}),"success_non_crdt")}({environment:t,store:o,transaction:n,operation:i});case"invertedRemoveAnnotation":return function(e){const{environment:t,store:o,transaction:n,operation:i}=e,r=P({store:o,startTextInstanceId:i.args.startTextInstanceId,startId:i.args.startId,endTextInstanceId:i.args.endTextInstanceId,endId:i.args.endId});return r?(b().KM({environment:t,multiSelection:r,annotation:i.args.annotation,transaction:n}),"success"):o.useCrdt()?"err_no_multiselection":(F({environment:t,store:o,invertedOperation:i,transaction:n}),"success_non_crdt")}({environment:t,store:o,transaction:n,operation:i});default:(0,d().t1)(i)}}function F(e){const{environment:t,store:o,invertedOperation:i,transaction:r}=e;(0,n().T)(!o.useCrdt(),"Expected non-CRDT block");const a=o.getBlockTitleStore();b().sO({environment:t,store:a,value:i.args.previousTextValue,transaction:r})}var N=()=>o(150719);function V(e){const t=f().default.state,{undoStack:o,invertedTextOperationIdMapper:n}=t,i=e.currentTime??Date.now(),r=e.transaction.getUserActionForAnalyticsPurposesOnly()??"unknown";if("string"==typeof e.undoCheckpoint){const t=o.find((t=>t.namedRevisionId===e.undoCheckpoint));t?(t.transactions.push(e.transaction),t.userActions.push(r)):o.push({userActions:[r],transactions:[e.transaction],timestamp:i,namedRevisionId:e.undoCheckpoint,undoRedoCount:0})}else{const t=o.at(-1);!e.undoCheckpoint&&t&&!t.namedRevisionId&&i-t.timestamp<=f().groupIntervalMs&&0===t.undoRedoCount&&t.transactions[0].isLocal===e.transaction.isLocal&&t.transactions[0].operations.some(s().Qf)===e.transaction.operations.some(s().Qf)?(t.transactions.push(e.transaction),t.userActions.push(r)):o.push({userActions:[r],transactions:[e.transaction],timestamp:i,undoRedoCount:0})}f().default.setState({undoStack:o,redoStack:[],invertedTextOperationIdMapper:n}),f().default.emit()}function L(e,t){const o=f().default.state,{invertedTextOperationIdMapper:n}=o,{undoStack:i,redoStack:r}=Y(o),a=i.pop();if(a)if(a.namedRevisionId)z({environment:e,namedRevisionId:a.namedRevisionId});else{const o=$({environment:e,revision:a,preventSelectText:t,invertedTextOperationIdMapper:n});r.push(o),f().default.setState({undoStack:i,redoStack:r,invertedTextOperationIdMapper:n})}}function O(e,t){const o=f().default.state,{invertedTextOperationIdMapper:n}=o,{undoStack:i,redoStack:r}=Y(o),a=r.pop();if(a){const o=$({environment:e,revision:a,preventSelectText:t,invertedTextOperationIdMapper:n});i.push(o),f().default.setState({undoStack:i,redoStack:r,invertedTextOperationIdMapper:n})}}function Z(){f().default.reset()}function j(){return Boolean(H())}function K(){return Boolean(q())}function z(e){const{skipDefaultPostPerformValidationChecks:t}=e,o=f().default.state,{environment:n,namedRevisionId:i}=e,{invertedTextOperationIdMapper:r}=o,{undoStack:a,redoStack:s}=Y(o),l=a.findIndex((e=>e.namedRevisionId===i));if(l<0)return;const c=$({environment:n,revision:a.splice(l,1)[0],invertedTextOperationIdMapper:r,skipDefaultPostPerformValidationChecks:t});s.push(c),f().default.setState({undoStack:a,redoStack:s,invertedTextOperationIdMapper:r})}function H(){const e=f().default.state.undoStack.at(-1);return e?G(e):void 0}function q(){const e=f().default.state.redoStack.at(-1);return e?G(e):void 0}function W(e){return f().default.state.undoStack.some((t=>t.namedRevisionId===e))}function G(e){return{getUserActions:()=>e.userActions.slice(),getFirstStore(){var t;return null==e||null===(t=e.transactions)||void 0===t||null===(t=t[0].stores)||void 0===t?void 0:t[0]}}}function $(e){const{environment:t,revision:o,invertedTextOperationIdMapper:s,preventSelectText:l,skipDefaultPostPerformValidationChecks:m}=e;let{transactions:f}=o;p().Z.isDebuggingEnabled()&&console.log("Undoing/redoing transactions with user actions",o.userActions.join(","));const{performResult:h}=y().createAndCommit({userAction:"revisionActions.performUndoRedoRevisionTransaction",environment:t,canUndo:!1,skipDefaultPostPerformValidationChecks:m,perform:e=>{f=c().d9(f),f.reverse();for(const o of f){const p=c().d9(o.invertedOperations);p.reverse(),e.copyDebugTagsFrom(o);for(const l of p)if((0,N().v)(l))Q({environment:t,invertedOperation:l,invertedTextOperationIdMapper:s,transaction:o,newTransaction:e});else if((0,i().V_)(l)||(0,i().SH)(l)){const i=o.stores.find((e=>(0,r().qo)(e.pointer,l.pointer)));if(!i)continue;if(i.table===a().iU&&!i.inMemoryRecordCache.isMockTextStore&&(0,n().TO)(i.getAncestorBlockStoreAtRootPath(),"Undo revision for block requires block ancestor").useCrdt()){(0,u().y)({environment:t,operation:l,transaction:e,inMemoryRecordCache:i.inMemoryRecordCache});continue}y().applyOperation({transaction:e,store:i,operation:l})}else(0,d().t1)(l);o.beforeSelection&&g().default.setState({...g().default.state,...o.beforeSelection}),o.beforeTextSelection&&!l&&v().default.setState(o.beforeTextSelection)}return e}});return{...o,transactions:[h],undoRedoCount:o.undoRedoCount+1}}function Q(e){const{environment:t,invertedOperation:o,invertedTextOperationIdMapper:i,transaction:a,newTransaction:s}=e,c=a.stores.filter((e=>(0,r().qo)(e.pointer,o.pointer)&&e instanceof m().G)),u=c.find((e=>Boolean(e.uiLocation.uiParent)))??c.at(0);if(!u)return;const f=s.operations.length,g=i.getInvertedTextOperationWithMaybeRemappedIds(o),v=U({environment:t,store:u,transaction:s,operation:g});if("success_non_crdt"===v)return;"success"!==v&&p().Z.logInvertedTextOperationError({transaction:a,invertedOperation:o,maybeRemappedInvertedOperation:g,errorCode:v});const h=s.operations.length;if("invertedDeleteText"===g.command&&h>f){const e=(0,n().TO)(s.operations.slice(f,h).find((e=>"insertText"===e.command)),"New operations should contain an InsertTextOperation");i.remapIdsForReinsertedText(g,(0,l().Fb)(e,(0,d().AO)((e=>"insertText"===e.command?{true:e}:{false:e})),`Expected "insertText" operation, got "${e.command}"`))}}function Y(e){const{undoStack:t,redoStack:o}=e;return{undoStack:t.slice(),redoStack:o.slice()}}},5244:(e,t,o)=>{o.d(t,{w:()=>r});var n=()=>o(591051),i=()=>o(495699);function r(){n().Z.state.isActive&&(i().Z.setState({...i().Z.state,open:!1}),n().Z.setState({...n().Z.state,isActive:!1,isAnimatingClosed:!0}))}},901193:(e,t,o)=>{o.d(t,{w:()=>u});var n=()=>o(506347),i=()=>o(839002),r=()=>o(869211),a=()=>o(793935),s=()=>o(282662),l=()=>o(636340),c=()=>o(990966),d=()=>o(269299);async function u(e){const{environment:t,prefill:o}=e,u=await(0,a().quickAddPage)({environment:t,from:"ai_writer_deeplink",pageVisitSource:n().tY.AiWriterDeeplink});if(!u)return;const{performResult:p}=d().createAndCommit({userAction:"routerStateActions.aiWriterDeeplink",environment:t,canUndo:!0,perform:e=>{const o=l().j4({environment:t,type:"text",inMemoryRecordCache:u.inMemoryRecordCache,transaction:e,spaceId:u.pointer.spaceId});return s().R3({parentStore:u.getContentStore(),appendStore:o,transaction:e}).childStore}}),m=p.getTitleStore();m&&c().setSelection({store:m}),await async function(e){const{environment:t,prefill:o}=e;await i().Vs(1e3),(0,r().openHelpMeWriteGenericPopup)({environment:t,from:"deeplink",prefilledValue:o??""})}({environment:t,prefill:o})}},47443:(e,t,o)=>{o.d(t,{Rp:()=>h,_c:()=>f,qV:()=>g});o(670560);var n=()=>o(506347),i=()=>o(396136),r=()=>o(916673),a=()=>o(614027),s=()=>o(429725),l=()=>o(773725),c=()=>o(826955),d=()=>o(491927),u=()=>o(269299),p=()=>o(663366),m=()=>o(497065);function f(e){const{environment:t,store:o,redirect:i,scrollToBlockId:c,collectionViewId:d,openInNew:u,discussionId:p,showMoveTo:f,saveParent:g,visitType:v,templateGalleryItem:h,projectManagementLaunch:_,pageVisitSource:b,openInSidePeek:y,openInCenterPeek:S,queryId:w,callback:k,peekViewBlockId:I,peekMode:C}=e,x=(0,s().Hu)({store:o,fullyQualified:!1,scrollToBlockId:c,collectionViewId:d,discussionId:p,showMoveTo:f,saveParent:g,templateGalleryItem:h,projectManagementLaunch:_,openInSidePeek:y,openInCenterPeek:S,pageVisitSource:b,peekViewBlockId:I,peekMode:C});o.isNavigableBlock()&&l().Z.recordVisit({id:o.id,systemBlockType:o.getSystemBlockTypeStore().getValue(),type:void 0!==v?v:a().vu.Default,currentUserId:t.currentUser.id}),m().c4({environment:t,url:b?r().SK(x,{[n().$X]:b,[n().Mf]:u?w:void 0}):x,redirect:i,openInNew:u,queryId:w,callback:k})}function g(e){const{environment:t,targetId:o}=e;if(t.device.isMobile)return;const n=v.state;if(void 0===n)return;if(o!==n)return;const r=new(c().G)(t,{id:o,table:i().iU});if("page"!==r.getType())return;const a=r.getContentStores(),s=1===a.length?a[0]:void 0,l=s&&s.isEmptyEditableBlock();r.isEmptyTitle()&&(r.isEmptyPage()||l)&&u().createAndCommit({userAction:"blockNavigationActions.maybeGarbageCollectEmptyPage",environment:t,canUndo:!0,perform:e=>{p().y8({environment:t,blocks:[r],transaction:e}),e.postSubmitCallbacks.push((e=>{e||d().dh(t,{analyticsName:"delete",from:"navigation_actions",block_id:r.id,block_type:"page"})}))}})}const v=o(263184).default.createValue(void 0,{name:"NewPageEmptyAutoDeleteStore"});function h(e){v.setState(e.id)}},752127:(e,t,o)=>{o.d(t,{D:()=>s});var n=()=>o(916673),i=()=>o(205228),r=()=>o(749826),a=()=>o(231077);function s(e){const{environment:t,targetSelf:o}=e;let s=e.url;"/"===s[0]&&(s=i().default.domainBaseUrl+s);const l=n().yn(s);if(l)if(t.device.isElectron)a().openExternalUrl(l);else if(t.mobileNative)l.startsWith("http:")||l.startsWith("https:")?r().default.checkGate({gateName:"mobile_open_links_in_external_browser"})?t.mobileNative.openLink(l):t.mobileNative.openInAppBrowser(l):window.location.href=l;else{const t=document.createElement("a");t.href=e.url,t.classList.add("notion-link"),o||t.setAttribute("target","_blank"),t.setAttribute("rel","noopener noreferrer"),document.body.appendChild(t),t.click(),t.remove()}}},824034:(e,t,o)=>{o.d(t,{Hu:()=>$,LU:()=>z,M3:()=>q,Pg:()=>Z,UV:()=>W,Vz:()=>G,jC:()=>j,rM:()=>K});o(241792);var n=()=>o(35980),i=()=>o(513670),r=()=>o(932753),a=()=>o(300329),s=()=>o(547592),l=()=>o(882637),c=()=>o(815532),d=()=>o(105649),u=()=>o(793935),p=()=>o(956789),m=()=>o(156958),f=()=>o(876822),g=()=>o(845622),v=()=>o(722116),h=()=>o(72041),_=()=>o(121700),b=()=>o(27475),y=()=>o(61548),S=()=>o(114642),w=()=>o(844641),k=()=>o(609306),I=()=>o(645805),C=()=>o(965903),x=()=>o(374469),T=()=>o(342267),M=()=>o(89073),P=()=>o(577325),A=()=>o(799454),R=()=>o(242619),B=()=>o(909240),E=()=>o(611253),D=()=>o(951109),U=()=>o(547586),F=()=>o(207874),N=()=>o(879952),V=()=>o(102182),L=()=>o(990966),O=()=>o(109757);function Z(e){T().Z.reset(),M().Z.reset(),x().Z.reset(),v().Z.reset(),B().xv({environment:e,blockPropertyValueOverlayStore:_().Z}),O().W8(),V().C1()}function j(e,t){y().Z.reset(),S().Z.reset(),w().Z.reset(),B().xv({environment:e,blockPropertyValueOverlayStore:b().Z})}function K(e){var t;N().ZH({environment:e}),L().clear({environment:e}),r().wG(),m().MO(),N().Fp({pivot:void 0}),R().xv(),I().default.reset(),F().dA(),A().LZ(),U().x(e),D().x(e),g().default.resetStore({environment:e}),E().xv(),null===(t=e.NativeMobileActionBarStore)||void 0===t||t.clear(!1)}function z(e){p().Z.reset(),k().default.reset(),P().Z.state.open&&(P().Z.reset(),e.device.isMobile&&u().close()),d().default.isPeekDismissableState()&&!d().default.isTransitioningState()&&c().TN({environment:e}),l().default.state.open&&s().UZ(e),(0,a().C)(e)}function H(){const{mainEditorCurrentBlockStore:e}=f().default.state;let t=0,o=[];if(e){var n;const{stores:e}=C().default.state;o=i().oA(e.map((e=>e.id))),t=(null===(n=h().Z.state.elementRef.current)||void 0===n?void 0:n.scrollTop)??0}return{scrollTop:t,blockIds:o}}function q(e){let{historyId:t,currentUserId:o}=e;const i=n().Z.get({userId:o,key:t});return i?i.index:0}function W(e){let{historyId:t,historyIndex:o,currentUserId:i}=e;const r={scrollTop:0,blockIds:[],index:o};n().Z.set({userId:i,key:t,value:r})}function G(e){let{historyId:t,currentUserId:o}=e;const i=n().Z.get({userId:o,key:t});if(!i)return;const r={...H(),index:i.index};n().Z.set({userId:o,key:t,value:r})}function $(e){let{RouterStore:t,currentUserId:o}=e;const i=t.state.id;n().Z.remove({userId:o,key:i})}},58771:(e,t,o)=>{o.d(t,{Rd:()=>jt,Ai:()=>gt,fE:()=>Ct,AH:()=>Xt,dH:()=>ft,Dj:()=>Gt,FA:()=>$t,q9:()=>Rt,xp:()=>Dt,uT:()=>to,E4:()=>Pt,LW:()=>Et,ST:()=>yt,Z1:()=>Jt,WC:()=>St,wo:()=>Ot,OO:()=>Nt,kd:()=>Ft,hY:()=>Ht,aO:()=>eo,IQ:()=>ht,_w:()=>At,o9:()=>pt,HR:()=>_t,r$:()=>Lt,uO:()=>bt,PR:()=>Tt,m4:()=>Mt,KR:()=>Vt,td:()=>wt,D_:()=>mt,nN:()=>It,rH:()=>xt,OP:()=>Wt,q:()=>dt,cG:()=>ct,JW:()=>qt,YU:()=>Bt,iM:()=>vt,cQ:()=>Kt,Z_:()=>kt,wN:()=>Ut,AL:()=>Zt,u6:()=>io,CV:()=>no,bo:()=>oo,HB:()=>lt,pN:()=>ut});o(821057),o(670560),o(267602),o(653476),o(470928),o(241792),o(313429),o(398858),o(461318),o(33228);var n=()=>o(506347),i=()=>o(403721),r=()=>o(903680),a=()=>o(799891),s=()=>o(362154),l=()=>o(331749),c=()=>o(741633),d=()=>o(285670),u=()=>o(217465),p=()=>o(572680),m=()=>o(836273),f=()=>o(396136),g=()=>o(542973),v=()=>o(81954),h=()=>o(125571),_=()=>o(989478),b=()=>o(691970),y=()=>o(282017),S=()=>o(245015),w=()=>o(921787),k=()=>o(720866),I=()=>o(342792),C=()=>o(543172),x=()=>o(696459),T=()=>o(916673),M=()=>o(957042),P=()=>o(124199),A=()=>o(106502),R=()=>o(173255),B=()=>o(205228),E=()=>o(861864),D=()=>o(937419),U=()=>o(763266),F=()=>o(274879),N=()=>o(656573),V=()=>o(614027),L=()=>o(379936),O=()=>o(527278),Z=()=>o(239482),j=()=>o(148126),K=()=>o(345918),z=()=>o(803728),H=()=>o(341691),q=()=>o(594723),W=()=>o(274328),G=()=>o(210673);class $ extends(()=>o(263184))().default{getInitialState(){return{args:void 0}}}const Q=new $;var Y=()=>o(473147),J=()=>o(827510),X=()=>o(942625),ee=()=>o(260794),te=()=>o(741636),oe=()=>o(686350),ne=()=>o(707138),ie=()=>o(528770),re=()=>o(242921),ae=()=>o(521635),se=()=>o(620218),le=()=>o(384334),ce=()=>o(772529),de=()=>o(142589),ue=()=>o(793935),pe=()=>o(291335),me=()=>o(590972),fe=()=>o(479875),ge=()=>o(658096),ve=()=>o(876822),he=()=>o(419380),_e=()=>o(720029),be=()=>o(749826),ye=()=>o(138912),Se=()=>o(732466),we=()=>o(773725),ke=()=>o(241449),Ie=()=>o(822851),Ce=()=>o(56810),xe=()=>o(611252),Te=()=>o(482162),Me=()=>o(469863),Pe=()=>o(826955),Ae=()=>o(965903),Re=()=>o(838266),Be=()=>o(723721),Ee=()=>o(286310),De=()=>o(438793),Ue=()=>o(253502),Fe=()=>o(28162),Ne=()=>o(824462),Ve=()=>o(146630),Le=()=>o(308186),Oe=()=>o(819026),Ze=()=>o(231077),je=()=>o(13382),Ke=()=>o(528918),ze=()=>o(919671),He=()=>o(853686),qe=()=>o(174421),We=()=>o(82937),Ge=()=>o(508383),$e=()=>o(401411),Qe=()=>o(143346),Ye=()=>o(278275),Je=()=>o(224597),Xe=()=>o(423402),et=()=>o(47443),tt=()=>o(752127),ot=()=>o(824034),nt=()=>o(511614),it=()=>o(488468),rt=()=>o(497065),at=()=>o(96271);const st=(0,o(788860).vU)({errorSamlMessage:{defaultMessage:"Could not log you in.",id:"router.loginWithSamlError.message"},appleErrorMessage:{id:"loginActions.loggingInWithApple.errorMessage",defaultMessage:"Something went wrong while trying to log in with Apple."},microsoftErrorMessage:{id:"loginActions.loggingInWithMicrosoft.errorMessage",defaultMessage:"Something went wrong while trying to log in with Microsoft."},passkeyLoginErrorMessage:{id:"loginActions.passkeyLoginError.message",defaultMessage:"Something went wrong while trying to log in with your passkey."},passkeyRegistrationErrorMessage:{id:"loginActions.passkeyRegistrationError.message",defaultMessage:"Something went wrong while trying to register your passkey."},authenticating:{id:"externalIntegrationAuthActions.authenticationWithIntegration.loadingMessage",defaultMessage:"Authorizing with integrationâ€¦"},joinedTeamMessage:{id:"joinedTeam.confirmationMessage",defaultMessage:"Joined {teamName}"},backToContent:{id:"router.joinSpaceError.acceptLabel.backToContent",defaultMessage:"Back to my content"},goBack:{id:"router.joinSpaceError.acceptLabel.goBack",defaultMessage:"Go back"},thirdPartyDebugPrefix:{id:"router.debugMessage.thirdPartyError",defaultMessage:"Error from third party"},inviteLinkError:{id:"router.inviteError.message",defaultMessage:"Invite link is not valid. Please contact workspace admin."}});function lt(e,t){if(F().canSetCookie(e))try{const o=new URL(t),n=o.searchParams.get("ps_partner_key"),i=o.searchParams.get("ps_xid");if(i&&n){const t={partnerKey:window.atob(n),clickId:i};return F().setS2STrackingCookie(e,t),void De().Es({partner_stack_key:t.partnerKey})}const r=o.searchParams.get("gspk");if(r){const t=window.atob(r);return F().setPartnerStackCookie(e,t),void De().Es({partner_stack_key:t})}}catch(o){}}async function ct(e){rt().c4({environment:e,url:m()._j.root,redirect:!0}),await ve().default.waitUntil((()=>void 0!==ve().default.state.currentSpaceStore));const{currentSpaceStore:t}=ve().default.state;if(K().Cx(t)){const t=await F().getCookie(e,"notion_browser_id"),o=Boolean(t)?`?from=marketing&notionDeviceId=${t}`:"?from=marketing";tt().D({environment:e,url:`${B().default.calendar.domainBaseUrl}${o}`,targetSelf:!0})}else X().Z.setState({signupCtaAttribution:"marketing"}),J().N$(e)}async function dt(e){await ve().default.waitUntil((()=>void 0!==ve().default.state.currentSpaceStore)),z().ES(e,"mwn_feature_modal")}function ut(e,t){if(t)try{const{experimentGroups:o,inviteeEmail:n,inviterName:i}=JSON.parse(window.atob(t));Fe().WC(e,{invitee_email:n,invitation_experiment_groups:o}),G().default.setState({...G().default.state,inviteeEmail:n,inviterName:i}),n&&W().Z.setState({...W().Z.state,email:n})}catch(o){}}async function pt(e,t,o,n){if(!e.currentUser.id)return void rt().c4({environment:e,url:m()._j.root,redirect:!0});let i;if(t.spaceId)i=t.spaceId;else{const{spaceId:t}=await je().Ie(e);i=t}Ve().Uz({nextRoute:{...t,spaceId:i},currentRoute:o,environment:e,query:""}),"updates"===t.tab&&Ue().Up({environment:e,from:"pop"===n?"mobile-back-navigation":"mobile-bottom-bar"})}async function mt(e,t,o){if(!e.currentUser.id)return;Ve().Uz({nextRoute:t,currentRoute:o,environment:e,query:""});const n=e.device.isElectron&&!(await Ze().quickSearchVisibilityState.isVisible());Ye().UT({environment:e,analyticsFrom:"quick-search",isQuickSearch:!0,doNotTrackOpenSearchEvent:n})}async function ft(e,t,o){e.currentUser.id&&await Ve().Uz({nextRoute:t,currentRoute:o,environment:e,query:""})}function gt(e,t,o){Ve().Uz({nextRoute:t,currentRoute:o,environment:e,query:""})}async function vt(e,t,o){if(e.currentUser.id)return be().default.waitUntilStatsigReady().then((()=>{(0,de().U)({isMobileNative:e.device.isMobileNative,disableExposureLogging:!0})?Ve().Uz({nextRoute:t,currentRoute:o,environment:e,query:""}):rt().c4({environment:e,url:m()._j.root,redirect:!0})}))}async function ht(e,t,o){if(e.currentUser.id)if(await be().default.waitUntilStatsigReady(),t.templateGalleryItem)await kt(e,t);else if("gallery"===t.name){const o=new URL(window.location.href);let n="";n=void 0===t.pageType?t.showBuyerProfileModal?`${m()._j.marketplace}?bp=true`:m()._j.marketplace:o.toString().replace("/gallery/","/marketplace/"),rt().c4({environment:e,url:n,redirect:!0})}else if(t.pageType&&!(0,l().GQ)(t.pageType))rt().c4({environment:e,url:m()._j.marketplace,redirect:!0});else if("search"!==t.pageType||t.query){await Ve().Uz({nextRoute:t,currentRoute:o,environment:e,query:""});const n=o&&("gallery"===o.name||"marketplace"===o.name),i=o&&n?o:void 0,r=void 0!==i?{url:(0,l().cv)(B().default,i),marketplace_page_type:i.pageType??"home",product_slug:i.slug,is_previewing:"templates"===i.pageType&&i.preview}:void 0;let a={url:window.location.href,marketplace_page_type:t.pageType??"home",product_slug:t.slug,is_previewing:"templates"===t.pageType&&t.preview,from:r};const s=o&&n&&o.pageType&&!(0,l().GQ)(o.pageType),c=o&&n&&"search"===o.pageType&&!o.query;(s||c)&&(a={...a,marketplace_page_type:"home",is_redirect:!0}),De().PB(e,{query:"",page_id:"",is_peek:!1,peek_mode:void 0,type:"marketplace",page_visit_id:void 0,previous_page_visit_id:void 0,marketplace_state:a})}else rt().c4({environment:e,url:m()._j.marketplace,redirect:!0})}async function _t(e,t){if(!e.currentUser.id)return void rt().c4({environment:e,url:m()._j.root,redirect:!0});const{id:o,type:n,from:i}=t;let r,a;if(t.spaceId)r=t.spaceId;else{const{spaceId:t}=await je().Ie(e);r=t}if(r){const{currentUserSettingsStore:t}=ve().default.state,o=new(Pe().r9)(e,{table:b().dx,id:e.currentUser.id});if(await o.load(),void 0===ve().default.state.currentSpaceStore||ve().default.state.currentSpaceStore.id!==r)try{const n=be().default.checkGate({gateName:"new_page_navigation_fix"}),i=await Je().j({environment:e,userRootStore:o,spaceId:r,navigate:!n,analyticsFrom:"redirect",userSettingsStore:t,redirectSource:"handle_new_page"});n&&ve().default.setState({...ve().default.state,currentSpaceViewStore:i.spaceViewStore,currentSpaceStore:i.spaceViewStore.getSpaceStore()})}catch(s){return void Le().PV({message:(0,k().t)(s).message,onAccept:()=>{rt().op(e)}})}}else rt().c4({environment:e,url:m()._j.root,redirect:!0}),await ve().default.waitUntil((()=>void 0!==ve().default.state.currentSpaceStore&&void 0!==ve().default.state.currentSpaceViewStore&&void 0!==ve().default.state.currentUserRootStore));if(n){if(!(0,M().Gu)(P().literals(...ke().o),n)){const e=n;switch(e){case"page":case"team":o&&(a={type:e,spaceId:r,id:o});break;case"space":o&&(a={type:e,id:o});break;case"space-private-pages":a={type:e,spaceId:r}}}}ue().quickAddPage({environment:e,from:i||"route",redirect:!0,quickAddParentOverride:a})}async function bt(e){if(e.currentUser.isLoggedIn()){if(await te().zJ(e)){await te().yH(e);const{shouldShowContextualizedOnboardingOnOnboardingLoad:t}=await E().K.contextualizedOnboardingFlowHelpers.load();if(t(e)){const{initializeOrRestoreContextualizedOnboardingState:t}=await E().K.contextualizedOnboardingStateActions.load();await t({environment:e,onLoadDependencies:()=>{},shouldRestoreOnboardingState:!0})}}}else{const t=ne().default.state,o=D().default.state,n=S().Z.get(oe().WX);t.isOnboarding||"undefined"!==o.flowName||n?rt().c4({environment:e,url:m()._j.signup}):rt().c4({environment:e,url:m()._j.login})}}async function yt(e,t){const{code:o,frontPathName:n,upsell:i}=t;if(!o)return void rt().c4({environment:e,url:m()._j.signup});i&&(0,Be().zQ)(i,e);const r=se().default.mark("login_time.google");"fail"===(await H().requestLoginWithGoogleOneTap({environment:e,store:W().Z,idToken:o,frontPathName:n,googleLoginTimeMetric:r})).status&&rt().c4({environment:e,url:m()._j.signup})}function St(e){e.currentUser.isLoggedIn()||rt().c4({environment:e,url:m()._j.login}),rt().c4({environment:e,url:m()._j.creatorProfileIntegrations})}function wt(e,t,o){var n;if(e.device.isMobile)return;const i=Te().default.state;let a,s,l=!1,c=!1;if("page"===t.name&&t.peekViewBlockId){const{mainEditorCurrentBlockStore:e}=ve().default.state;if(e){const o=Pe().G.createChildStore(e,{table:f().iU,id:t.peekViewBlockId});l=Boolean(t.showMoveTo),c=Boolean(t.saveParent),a=o;const n="page"===t.name&&t.peekMode?t.peekMode:void 0;s=(0,Te().getPeekModeFromUrlParam)(n)}}else if("team"===t.name&&t.peekViewBlockId){l=!1,c=!1,a=new(Pe().G)(e,{table:f().iU,id:t.peekViewBlockId});const o=t.peekMode?t.peekMode:void 0;s=(0,Te().getPeekModeFromUrlParam)(o)??d().l}else if("chat"===t.name&&t.peekViewBlockId){l=!1,c=!1,a=new(Pe().G)(e,{table:f().iU,id:t.peekViewBlockId});const o="chat"===t.name&&t.peekMode?t.peekMode:void 0;s=(0,Te().getPeekModeFromUrlParam)(o)??d().R}if(!(0,r().u7)(null===(n=a)||void 0===n?void 0:n.getSystemBlockTypeStore().getValue())){if(a&&(!i.open||a.id!==i.targetStore.id||s!==i.mode)){var u,p;i.open&&Ge().E(i.presenceStore,e,Ce().jx,i.targetStore);const t=Ce().jx.getCurrentPageVisitId();Ce().jx.initializeNewPageVisitId();const n=Ae().default.cloneState(),r=R().Z.cloneState(),m=he().Z.cloneState(),f=e.currentUser.id;ot().jC(e,i.mode),ot().LU(e),ot().rM(e);const g=a.getAssociatedCollectionStore(),v=null==g?void 0:g.getLayoutStore(),{publicPageData:h}=ge().default.state;De().PB(e,{page_id:a.id,collection_id:(null==g?void 0:g.id)??(null===(u=a.getCollectionStore())||void 0===u?void 0:u.id),layout_id:null==v?void 0:v.id,team_id:null===(p=(0,Z().VP)(a))||void 0===p?void 0:p.id,form_id:a.isFormBlock()?a.id:void 0,is_peek:!0,peek_mode:s,type:De().F9(a),query:o,page_visit_id:Ce().jx.getCurrentPageVisitId(),previous_page_visit_id:t,user_has_explicit_access:null==h?void 0:h.userHasExplicitAccess,is_trusted_domain_page:null==h?void 0:h.isTrustedDomainPage,trusted_domains:null==h?void 0:h.trustedDomains});const _=new(Pe().G)(e,a.pointer),b=new(xe().Z),S=new(Me().Z),w=new(Ie().Z);We().bA(e,{mode:s??d().l,targetStore:_,pageVisitStore:b,presenceStore:S,showMoveTo:l,saveParent:c,loadingContainerStore:w,savedSelectionStoreState:n,savedTableSelectionStoreState:r,savedCollectionViewSelectionStoreState:m,savedSidebarExpandedStoreState:pe().sidebarExpandedStore.state}),Ge()._({userId:f,rootStore:_,presenceStore:S,environment:e,pageVisitIdStore:Ce().jx}),He().UX(e,{blockStore:_,pageVisitStore:b,timestamp:Date.now(),fromPageRefresh:(0,y().QG)()}),we().Z.recordVisit({id:a.id,systemBlockType:a.getSystemBlockTypeStore().getValue(),type:V().vu.Default,currentUserId:f})}i.open&&!a&&(We().ME(),Ge().E(i.presenceStore,e,Ce().jx,i.targetStore),ot().jC(e,i.mode))}}async function kt(e,t){if(!e.device.isMobile&&("page"===t.name||"marketplace"===t.name)&&t.templateGalleryItem){const o=(0,I().Mt)(t.templateGalleryItem);let n=m()._j.marketplace;const i=await Ne().inAppGetTemplateByBlockId(e,{blockId:o},e.currentUser.id);if("success"===i.type&&i.data.success&&i.data.template){const e={name:"marketplace"};n=(0,Y().aD)(i.data.template.slug,e)}rt().c4({environment:e,url:n,redirect:!0})}}async function It(e,t,o){const r=t.currentUser.isLoggedIn(),{RouterStore:s,device:l}=t,c=l.isMobileNative,d=s.state.route,u=(e,t)=>{c&&"root"!==s.state.route.name?a().log({level:"warning",from:"routerActions",type:"handleRootRedirect",data:{message:`Prevented ${e} as route has since changed to "${s.state.route.name}"]. Initial route at the start of handleRootRedirect was "${d.name}"}`}}):(c&&a().log({level:"info",from:"routerActions",type:"handleRootRedirect",data:{message:`Redirecting for ${e} as route is still root. Initial route at the start of handleRootRedirect was "${d.name}"}`}}),t())};if(r){c&&a().log({level:"info",from:"routerActions",type:"handleRootRedirect",data:{message:"Called handleRootRedirect"}});const e=await(0,K().iX)({environment:t,disableRedirectUrl:!1,blockNoAccessRedirect:!0}),{firstSpaceView:i,lastVisitedSpaceView:s,publicAccessPageId:l,oauthAuthorizationParams:d,userRootStore:p,redirectUrl:m,userSettingsStore:g,userStore:v,isPersonalHomeRedirect:_,lastVisitedUrl:b}=e;_&&(0,le().$X)({environment:t,from:"on_app_start_page"}),await be().default.waitUntil((()=>be().default.state.isLoaded));await te().zJ(t,v)&&await te().yH(t);const y=ne().default.state,w=t.currentUser.id,k=S().Z.get(oe().WX);if(k&&r)return void(await Kt(t,k));if(d&&i&&(e.onboardingCompleted||oe().BB(y))){const{responseType:e,redirectUri:o,integrationId:n,state:i,owner:r,userId:a,spaceId:s}=d;return void ze().g({environment:t,responseType:e,redirectUri:o,integrationId:n,state:i,owner:r,userId:a,spaceId:s})}const I=it().A(void 0);it().j({currentUserId:void 0,params:void 0});const C=(null==o?void 0:o.templateGalleryItem)||(null==I?void 0:I.tg),x=(null==o?void 0:o.projectManagementLaunch)||Boolean(null==I?void 0:I.pjm),M=(null==o?void 0:o.mwnFeatureModalRedirect)||Boolean(null==I?void 0:I.mwn2024);if(y.isOnboarding)if(oe().BB(y)){if(y.spaceViewId){const e=new(Pe().V9)(t,{table:h().zU,id:y.spaceViewId});"workspace_setup"!==y.stage&&await Je().y3({environment:t,spaceViewStore:e,userSettingsStore:g,userRootStore:p,templateGalleryItem:null==o?void 0:o.templateGalleryItem,projectManagementLaunch:null==o?void 0:o.projectManagementLaunch,pageVisitSource:n().tY.Onboarding,navigationType:"joiningOrCreatingSpace",forceLandLastVisitedPage:null==o?void 0:o.forceLandLastVisitedPage,redirect:!0})}}else rt().T4(t);else if(d&&e.onboardingCompleted){const{responseType:e,integrationId:o,redirectUri:n,state:i,owner:r,userId:a,spaceId:s}=d;ze().g({environment:t,responseType:e,integrationId:o,redirectUri:n,state:i,owner:r,userId:a,spaceId:s})}else if(l&&e.onboardingCompleted){$e().Hr({currentUserId:w,blockId:void 0});const e=Pe().G.createChildStore(p,{table:f().iU,id:l});await e.load(),et()._c({environment:t,store:e,pageVisitSource:n().tY.Direct})}else if(i&&e.onboardingCompleted){const i=m;if(t.device.isMobile&&!e.mobileOnboardingCompleted)return void(await te().I1(t,{type:"mobile-onboarding",redirectUrl:m,source:"handle_root_redirect"}));if(null!=o&&o.forceLandLastVisitedPage&&b)u("redirectUrl",(()=>{rt().c4({environment:t,url:b,redirect:!0})}));else if(i){let e=i;(x||C||M)&&(e=T().SK(e,{tg:C,pjm:x,mwn2024:M})),u("redirectUrl",(()=>{rt().c4({environment:t,url:e,redirect:!0})}))}else s?u("lastVisitedSpaceView",(()=>{Je().y3({environment:t,spaceViewStore:s,userRootStore:p,userSettingsStore:g,templateGalleryItem:C,projectManagementLaunch:x,pageVisitSource:n().tY.Login,navigationType:"switchingToOrLoadingSpace",forceLandLastVisitedPage:null==o?void 0:o.forceLandLastVisitedPage,redirect:!0})})):(t.device.isMobileNative&&a().log({level:"info",from:"routerActions",type:"SpaceSwitchingDebug",data:{message:"navigateToFirstSpace because handleRootRedirect"}}),u("spaceActions.navigateToFirstSpace",(()=>{Je().L5({environment:t,userRootStore:p,userSettingsStore:g,templateGalleryItem:C,projectManagementLaunch:x,pageVisitSource:n().tY.Login,forceLandLastVisitedPage:null==o?void 0:o.forceLandLastVisitedPage,redirect:!0})})))}else{const{publicPageData:e}=ge().default.state;if(null!=e&&e.isTrustedDomainPage&&e.pageId){const o=Pe().G.createChildStore(p,{table:f().iU,id:e.pageId});return await o.load(),void nt().r({environment:t,store:o,pageVisitSource:n().tY.Login})}await te().I1(t,{type:"new-user",redirectUrl:m,source:"handle_root_redirect"})}}else if(null!=o&&o.assistantQueryPrefill||null!=o&&o.assistantTargetRedirect){const e=(0,i().GF)({currentUrl:window.location.href,assistantQueryPrefill:null==o?void 0:o.assistantQueryPrefill,assistantTargetRedirect:null==o?void 0:o.assistantTargetRedirect}),n=(0,T().bf)({url:`${B().default.domainBaseUrl}${m()._j.login}`,query:{redirectURL:e}});rt().c4({environment:t,url:n,redirect:!0})}else if(null!=o&&o.forceLandLastVisitedPage){const e=(0,fe().N)({domainBaseLoginUrl:`${B().default.domainBaseUrl}${m()._j.login}`,currentUrl:window.location.href,forceLandLastVisitedPage:null==o?void 0:o.forceLandLastVisitedPage});rt().c4({environment:t,url:e,redirect:!0})}else rt().c4({environment:t,url:m()._j.login,redirect:!0})}async function Ct(e,t){const{callbackType:o,encryptedToken:n,encryptedNonce:i,code:r,error:a,encryptedUserObject:s,webBrowserDeviceId:l}=e,c=se().default.mark("login_time.apple");if("native"===o&&!t.device.isNative)return void rt().RX({url:window.location.href,environment:t});if("user_cancelled_authorize"===a)return W().Z.setState({...W().Z.state,loginType:"email"}),void rt().c4({environment:t,url:m()._j.login});if(a||!r||!n||!i){const e=O().Z.formatMessage(st.appleErrorMessage);return W().Z.setState({...W().Z.state,alert:e}),void rt().c4({environment:t,url:m()._j.login})}const d=await H().loginWithAppleAuth({environment:t,encryptedToken:n,encryptedNonce:i,code:r,encryptedUserObject:s,webBrowserDeviceId:l,appleLoginTimeMetric:c});d&&(W().Z.setState({...W().Z.state,alert:d}),rt().c4({url:m()._j.login,environment:t}))}async function xt(e,t){let o;if(e.userId)await H().loginSamlUser({environment:t,userId:e.userId,isNewSignup:e.isNewSignup||!1,previousUserId:e.previousUserId});else if(e.token&&e.csrfState)o=await H().loginSamlUserWithToken({environment:t,csrfState:e.csrfState,token:e.token,isNewSignup:e.isNewSignup||!1,email:W().Z.state.email});else{const n=t.device.isElectronMail?void 0:O().Z.formatMessage(st.errorSamlMessage);o=e.error||n}o&&(W().Z.setState({...W().Z.state,alert:o}),rt().c4({environment:t,url:m()._j.login}))}async function Tt(e,t){let o;if(e.attestation&&e.attemptId)await H().loginUserWithPasskeyVerifyChallenge({environment:t,attestation:JSON.parse(e.attestation),attemptId:e.attemptId,passkeyLoginTimeMetric:se().default.mark("login_time.passkey")});else{const n=t.device.isElectronMail?void 0:O().Z.formatMessage(st.passkeyLoginErrorMessage);o=e.error||n}o&&(W().Z.setState({...W().Z.state,alert:o}),rt().c4({environment:t,url:m()._j.login}))}async function Mt(e,t){let o;if(e.response&&e.attemptId&&e.csrfToken){const o=await qe().gp({environment:t,attemptId:e.attemptId,attestation:JSON.parse(e.response),shouldValidateCsrfToken:!0,csrfToken:e.csrfToken});null==o||o.created,rt().c4({environment:t,url:"?target=profile"})}else{const n=t.device.isElectronMail?void 0:O().Z.formatMessage(st.passkeyRegistrationErrorMessage);o=e.error||n}o&&(W().Z.setState({...W().Z.state,alert:o}),rt().c4({environment:t,url:m()._j.login}))}async function Pt(e,t){const{callbackType:o,encryptedToken:n,code:i,error:r,webBrowserDeviceId:a}=e;if("native"===o&&!t.device.isNative)return void rt().RX({url:window.location.href,environment:t});if("access_denied"===r&&W().Z.setState({...W().Z.state,loginType:"email"}),r||!i||!n)return W().Z.setState({...W().Z.state,alert:r}),void rt().c4({environment:t,url:m()._j.login});const s=await H().loginWithGoogleAuth({environment:t,encryptedToken:n,code:i,callbackType:"native"===o||"nativeredirect"===o||"nativemailredirect"===o||"nativecalendarredirect"===o?o:void 0,webBrowserDeviceId:a,source:y().cr()});s&&(W().Z.setState({...W().Z.state,alert:s}),rt().c4({url:m()._j.login,environment:t}))}async function At(e,t){const{callbackType:o,encryptedToken:n,encryptedNonce:i,state:r,code:a,error:s,webBrowserDeviceId:l}=e;if("native"!==o||t.device.isNative){if("access_denied"===s&&W().Z.setState({...W().Z.state,loginType:"email"}),s||!a||!n||!i||!r){const e=O().Z.formatMessage(st.microsoftErrorMessage);return W().Z.setState({...W().Z.state,alert:e}),void rt().c4({environment:t,url:m()._j.login})}W().Z.setState({...W().Z.state,loginType:"microsoft_login",thirdPartyToken:n}),await H().loginWithMicrosoftAuth({environment:t,encryptedToken:n,encryptedNonce:i,code:a,state:r,callbackType:"native"===o||"nativeredirect"===o||"nativemailredirect"===o||"nativecalendarredirect"===o?o:void 0,webBrowserDeviceId:l,source:y().cr()})}else rt().RX({url:window.location.href,environment:t})}function Rt(e,t){Xe().pJ({environment:t}),rt().c4({environment:t,url:m()._j.login})}async function Bt(e){const{route:t,environment:o}=e;"legacy"===t.type?await async function(e){const{route:{code:t,state:o},environment:n}=e;let i;if(t&&o){const e=await Ne().callApi({eventName:"authWithSlack",environment:n,data:{code:t,encryptedState:o}});"failed"===e.type&&(i=e.error.message)}else i="Something went wrong.";i&&Le().RL(i);const{url:r}=je().Vr(n);rt().c4({url:r||m()._j.root,environment:n})}({environment:o,route:t}):"new"===t.type?await async function(e){const{route:{error:t},environment:o}=e;if(t){const e=O().Z.formatMessage((0,U().mO)(t),{value:t});Le().UW(e)}else await Xe().pJ({environment:o});const{url:n}=je().Vr(o);rt().c4({url:n||m()._j.root,environment:o})}({environment:o,route:t}):(0,x().t1)(t)}function Et(e,t){const{code:o,error:n}=e;!n&&o&&Oe().O$(t,o);const{url:i}=je().Vr(t);rt().c4({url:i||m()._j.root,environment:t})}async function Dt(e){const{route:t,environment:o,preventRedirectToLastVisitedPage:n}=e;let i=t.error?t.errorDescription||O().Z.formatMessage((0,U().mO)(t.error),{value:t.error}):void 0;try{if(!t.notionState)throw new Error("No notionState.");const e=JSON.parse(decodeURIComponent(t.notionState));await Xe().pJ({environment:o}),await Xe().FD({environment:o,notionState:e})}catch(r){i||(i="An unknown error occurred.")}i&&Le().RL(i),n||rt().iy(o)}async function Ut(e){const{route:t,environment:o,integrationId:n,from:i,options:r}=e;let a=t.error?t.errorDescription||O().Z.formatMessage((0,U().mO)(t.error),{value:t.error}):void 0;try{if(!t.state)throw new Error("No state provided.");if(!t.code)throw new Error("No code provided.");Ke().j({message:st.authenticating});const e=await Ne().callApi({eventName:"authWithExternalIntegration",environment:o,data:{code:t.code,state:t.state,...t.name===p().AY.datadogAuthCallback?{accountName:t.organizationName,accountId:t.organizationId,accountDomain:t.site,domain:t.domain}:void 0}});if(Ke().x(),"failed"===e.type){var s;const t="access_token_retrieval_failed"===(null===(s=e.body)||void 0===s||null===(s=s.clientData)||void 0===s?void 0:s.type)?O().Z.formatMessage(st.thirdPartyDebugPrefix):void 0;Le().x2(e,t)}else{const{externalObjectInstanceBlockId:t,spaceId:i}=e.data;if(await Xe().pJ({environment:o}),await Xe().FD({environment:o,notionState:{externalObjectInstanceBlockId:t,spaceId:i}}),n&&(0,w().z6)(n)){const e=ye().default.bots.state.filter((e=>e.integration_id===n))[0];Ee().eR(o,{integration_id:n,configuration_type:"oauth",bot_id:null==e?void 0:e.id})}}}catch(l){a||(a=(0,k().t)(l).message)}a&&Le().RL(a),await async function(e){const{environment:t,integrationId:o,from:n}=e;if((0,L().s0)(o)&&!(0,w().uw)(o)){const{spaceId:e}=await je().Ie(t);ze().g({environment:t,responseType:"code",spaceId:e,integrationId:o,redirectUri:void 0,state:void 0,owner:void 0,userId:void 0})}else"workspace_connections_redirect"!==n&&rt().iy(t)}({environment:o,integrationId:n,shouldOpenSettings:null==r?void 0:r.shouldOpenSettings,from:i})}async function Ft(e,t){const{state:o,password:n,isSignup:i,redirectURL:r,webBrowserDeviceId:a,isMicrosoft:s}=e,l=se().default.DO_NOT_USE_markLegacy("login_time.passcode"),c=await H().loginWithTemporaryPasscode({environment:t,state:o,password:n,redirectURL:r,webBrowserDeviceId:a,passcodeEnterMethod:"magic_link",temporaryPasscodeLoginTimeMetric:l,email:W().Z.state.email});s&&W().Z.setState({...W().Z.state,loginType:"microsoft_login",thirdPartyToken:""}),"fail"===c.status&&(W().Z.setState({...W().Z.state,alert:c.errorMessage}),i?rt().c4({url:m()._j.signup,environment:t}):rt().c4({url:m()._j.login,environment:t}))}async function Nt(e,t){const{args:o}=Q.getState(),{webBrowserDeviceId:n}=e;o?await H().handleLoginWithTemporaryPasscodeSuccess({environment:t,...o,webBrowserDeviceId:n}):(a().log({level:"error",from:"routerActions",type:"handleLoginSuccessRedirect",data:{message:"empty args for handleLoginSuccessRedirect"}}),rt().c4({url:m()._j.root,environment:t}))}async function Vt(e,t){const{state:o,password:n}=e,i=await H().loginPasswordReset({environment:t,csrfState:o,password:n,loginStore:W().Z});i&&(W().Z.setState({...W().Z.state,loginType:"email",alert:i}),rt().c4({url:m()._j.login,environment:t}))}async function Lt(e,t){y().In(e);const{userId:o,spaceId:n}=e;if(n){const e=o?[o]:t.currentUser.loggedInUserIds;for(const o of e){const e=new(Pe().r9)(t,{table:b().dx,id:o},{userId:o});await e.load();const i=e.getSpaceViewStores();if(i.length>0){await Promise.all(i.map((e=>e.load())));const e=i.find((e=>e.getSpaceId()===n));if(e)return void(await Je().ce({environment:t,spaceViewStore:e}))}}}const{currentUserRootStore:i}=ve().default.state;if(i){await i.load();const e=i.getSpaceViewStores().find((e=>{var t;return Boolean(null===(t=e.getSpaceStore())||void 0===t?void 0:t.canRead())}));if(e)return void(await Je().ce({environment:t,spaceViewStore:e}))}rt().c4({environment:t,url:m()._j.login,redirect:!0})}function Ot(e){let{environment:t,routeName:o,option:n,redirectUrl:i}=e;const r="microsoft_login"===W().Z.state.loginType;if((0,j().Sr)(t)){const e=T().TW({publicDomainName:B().default.publicDomainName},window.location.host);Ve().qY({spaceDomain:e,environment:t})}else r||!t.currentUser.isLoggedIn()||null!=n&&n.doNotRedirectWhenLoggedIn?De().Sn(t,o):rt().c4({environment:t,url:i??m()._j.root,redirect:!0})}async function Zt(e,t){const o=e.currentUser.id;if(!o)return void Qt(e);const i=new(Pe().r9)(e,{table:b().dx,id:o},{userId:o});await i.load();const r=await async function(e,t,o){if(o.spaceDomain){const t=await Ne().callApi({eventName:"getIdFromUniqueId",environment:e,data:{spaceDomain:o.spaceDomain,uniqueId:o.uniqueId}});return"success"===t.type&&t.data.id?t.data.id:void 0}for(const n of t.getSpaceViewStores()){const t=n.getSpaceId();if(!t)continue;const i=await Ne().callApi({eventName:"getIdFromUniqueId",environment:e,data:{spaceId:t,uniqueId:o.uniqueId}});if("failed"!==i.type&&i.data.id)return i.data.id}}(e,i,t);if(!r)return void Qt(e);const a=Pe().G.createChildStore(i,{table:f().iU,id:r});await a.load(),nt().r({environment:e,store:a,pageVisitSource:n().tY.Direct})}async function jt(e){const{environment:t,route:o}=e;rt().c4({environment:t,url:m()._j.root,redirect:!0});const[{favoriteImportActions:n}]=await Promise.all([A().aiDependency.load(),async()=>{await ve().default.waitUntil((()=>void 0!==ve().default.state.currentUserSettingsStore&&void 0!==ve().default.state.currentSpaceStore&&void 0!==ve().default.state.currentSpaceViewStore&&void 0!==ve().default.state.currentUserRootStore)),await ve().default.waitUntilRendered()}]);await n.importGtmFavorite({environment:t,importArgs:o})}async function Kt(e,t){const o=await Ne().callApi({eventName:"getPublicPageDataForInviteLink",environment:e,data:{inviteLinkCode:t}});if("success"!==o.type)throw o.error;const i=o.data;ge().default.setState({publicPageData:i});const r=()=>{S().Z.set(oe().WX,t),rt().T4(e)};if(e.currentUser.isLoggedIn()&&i.spaceId){const{id:o}=e.currentUser;if(o){const s=new(Pe().U6)(e,{table:_().KJ,id:o});await s.load();if(!s.getFullName(O().Z.getIntl())){r();const t=await(0,K().iX)({environment:e,disableRedirectUrl:!1});return void(await te().I1(e,{type:"new-user",redirectUrl:t.redirectUrl,source:"team_invite"}))}const l=new(Pe().r9)(e,{table:b().dx,id:o});await l.load();const{currentUserSettingsStore:c}=ve().default.state;try{const o=await Je().j({environment:e,userRootStore:l,userSettingsStore:c,spaceId:i.spaceId,navigate:!1,analyticsFrom:"redirect",inviteCode:t,redirectSource:"handle_team_invite"});await Je().y3({environment:e,spaceViewStore:o.spaceViewStore,userSettingsStore:c,userRootStore:l,pageVisitSource:n().tY.SwitchSpace,navigationType:"joiningOrCreatingSpace",redirect:!0})}catch(a){zt(e,(0,k().t)(a).message)}}}else e.currentUser.isLoggedIn()&&!i.spaceId?zt(e,O().Z.formatMessage(st.inviteLinkError)):r()}function zt(e,t){const{currentUserRootStore:o,currentUserSettingsStore:i}=ve().default.state,r=o&&i;Le().PV({message:t,acceptLabel:r?O().Z.formatMessage(st.backToContent):O().Z.formatMessage(st.goBack),onAccept:()=>{S().Z.remove(oe().WX),r?Je().L5({environment:e,userRootStore:o,userSettingsStore:i,pageVisitSource:n().tY.Onboarding}):rt().op(e)}})}async function Ht(e){await H().actuallyLogoutAndDeleteMostLocalData({environment:e,logoutOrigin:s().F.LogoutRouteVisited})}async function qt(e){const{environment:t,nextRoute:o,currentRoute:n}=e;"page"===(null==n?void 0:n.name)&&n.blockId||"page"!==o.name||ae().Z.setDisplayStyle({panelLocation:"mainPage",displayStyle:t.device.isMobile?"popup":"sidebar"});const i=n&&p().nI(n)&&n.peekViewBlockId;if(ae().Z.getPanelState("peek").isOpen&&i){const e="page"===o.name&&n.peekViewBlockId===o.blockId,i=p().nI(o)&&n.peekViewBlockId===o.peekViewBlockId&&n.peekMode!==o.peekMode,r=p().nI(o)&&o.peekViewBlockId&&"page"===o.name&&o.name===n.name&&o.blockId===n.blockId&&n.peekViewBlockId!==o.peekViewBlockId;(e||i||r)&&(0,ie().U)({environment:t,layoutStore:void 0,from:"topbar",panelLocation:o.peekMode?"peek":"mainPage",preventPeekWidthResize:i})}const r=p().nI(o),a="page"===(null==n?void 0:n.name)&&"page"===o.name&&n.blockId!==o.blockId;!i||r&&o.peekViewBlockId&&n.name===o.name&&!a||ae().Z.resetPanelState("peek");const s=p().nI(o)&&o.peekViewBlockId;!i&&s&&ae().Z.setDisplayStyle({panelLocation:"peek",displayStyle:t.WindowSizeStore.state.width<(0,re().Iy)()?"popup":"static_sidebar"});const l=Te().default.peekTargetStore.state,{mainEditorCurrentBlockStore:c}=ve().default.state;if(!c&&!l)return;const d="page"===o.name?o.blockId:void 0,u=d&&c?Pe().G.createChildStore(c,{table:f().iU,id:d}):void 0;if("page"===o.name&&o.discussionId&&u){const e=(0,Pe().Kv)(u,{table:g().qF,id:o.discussionId,spaceId:(0,v().J)(u.pointer.spaceId)});await e.load();if(e.getKeyStore("resolved").getValue())return ue().setUpdateSidebarTab(me().gY.Comments),ue().setUpdateExpand({environment:t,isExpanded:!0,from:"resolved_comment",saveDetailsSidebarPreference:!0}),void ue().setUpdateSidebarCommentsMode("resolved")}}async function Wt(e,t){"configureOpenInDesktopApp"in t&&t.configureOpenInDesktopApp&&(await be().default.waitUntilStatsigReady(),e.device.isDesktop&&(e.device.isMac||e.device.isWindows)&&Re().default.setState({open:!0,openedFrom:"misc",currentTab:"user_settings",defaultSubtab:void 0,highlightedSetting:Re().R.OpenInDesktopApp}))}function Gt(e){let t;var o;e&&(t=null===(o=be().default.getConfigKey("demo_tooltip_tour_config","tour"))||void 0===o?void 0:o[e]);_e().Z.setState({tooltipTourOutline:t,isActive:!0,step:t?0:void 0,slug:e})}function $t(e){let t;try{t=T().$U((0,N().W)(window.location.href))}catch{}t&&rt().c4({environment:e,url:t})}function Qt(e){const t={name:"notFound"};e.RouterStore.setState({id:(0,C().ZP)(),route:t,action:"push",initialRoute:e.RouterStore.state.initialRoute||t})}function Yt(e){rt().c4({environment:e,url:m()._j.root,redirect:!0})}async function Jt(e,t){var o;const i=(0,T().Ph)(window.location.href,"pvs");if(null!==(o=e.mobileNative)&&void 0!==o&&o.supportsNativeHomeOnPhone()&&be().default.checkGate({gateName:"allow_mobile_home_redirect"}))return void at().navigateToHomeTab(e);if(e.device.isMobileNative)return void Yt(e);let r=e.currentUser.id;if(!r&&(rt().c4({environment:e,url:m()._j.login,redirect:!0}),await ve().default.waitUntil((()=>void 0!==ve().default.state.currentUserStore&&void 0!==ve().default.state.currentUserRootStore&&void 0!==ve().default.state.currentSpaceStore)),r=e.currentUser.id,!r))return;const a=await Ne().callApi({eventName:"getHomeEnabledSpaceViews",environment:e,data:{}});if("failed"===a.type)return void Yt(e);const{usersToSpaceViews:s}=a.data,l=[],d=new(Pe().r9)(e,{table:b().dx,id:r});for(const n of Object.values(s)){const t=u().RecordMapWithRole.create(n.recordMap);Qe().fL({environment:e,userId:r,inMemoryRecordCache:e.defaultRecordCache.inMemoryRecordCache,recordMap:t,debugSource:"handleHomeRedirect"}),l.push(...n.homeEnabledSpaceViewIds.map((e=>Pe().V9.createChildStore(d,{table:h().zU,id:e}))))}const{spaceId:p}=await je().Ie(e),f=function(e){let{currentUserId:t,lastVisitedSpaceId:o,homeEnabledSpaceViewStores:n}=e;const i=o&&n.find((e=>e.getSpaceId()===o&&e.getParentId()===t));if(i)return i;const r=n.find((e=>e.getParentId()===t));if(r)return r;return n[0]}({currentUserId:r,lastVisitedSpaceId:p,homeEnabledSpaceViewStores:l}),g=ce().Al(f);if(!g||!f)return void Yt(e);if(await g.load(),!g.isDefined()){const t=await Ne().callApi({eventName:"getUserHomePages",environment:e,data:{spaceViewId:f.id,spaceId:f.getSpaceId()},userId:f.getUserId(),headers:(0,c().Bb)({cellId:void 0,recordId:f.id,spaceId:f.getSpaceId()})});if("failed"===t.type||void 0===t.data.recordMap.block)return De().AM(e,{type:"invalid_home_block_from_redirect",flow_id:"home_redirect"}),void Yt(e)}const v=i?Number(i):n().tY.PersonalHomeLink;(0,le().$X)({environment:e,from:v===n().tY.PersonalHomeEmailLink?"email_link":"link"}),et()._c({environment:e,store:g,peekViewBlockId:t.peekViewBlockId,peekMode:t.peekMode,pageVisitSource:v})}async function Xt(e){e.currentUser.isLoggedIn()?await J().B9({environment:e,url:`${B().default.domainBaseUrl}/calendarAuth/`,from:"handleCalendarRedirect",targetSelf:!0}):(0,q().xf)()}async function eo(e){e.currentUser.isLoggedIn()?await(0,ee().h)({environment:e,from:"handleMailRedirect",targetSelf:!0}):(0,q().xf)()}function to(e,t){if(!t.formResponseId||!t.secretKey||!t.formSpaceId)return void rt().c4({environment:e,url:m()._j.root,redirect:!0});e.currentUser.id?function(e,t,o,n){oo(t,o,n),rt().c4({environment:e,url:m()._j.root})}(e,t.formResponseId,t.secretKey,t.formSpaceId):(y().rX(t.formResponseId,t.secretKey,t.formSpaceId,t.formSpaceIntent),rt().c4({environment:e,url:m()._j.login,redirect:!0}))}function oo(e,t,o){Se().Z.setState({open:!0,formResponseId:e,secretKey:t,formSpaceId:o}),y().Oi()}function no(e){const{environment:t,redirectRoute:o,options:n}=e;if(t.currentUser.isLoggedIn())return{redirected:!1};return ro({environment:t,redirectURL:T().bf(o),options:n})}function io(e){const{environment:t,page:o,options:n}=e;if(t.currentUser.isLoggedIn()||!o.blockId)return{redirected:!1};return ro({environment:t,redirectURL:T().bf({url:`/${(0,I().cj)(o.blockId)}`,query:{...o.shouldDuplicate?{duplicate:"true"}:{},...o.workspaceId?{workspaceId:o.workspaceId}:{}}}),options:n})}function ro(e){const{environment:t,redirectURL:o,options:n}=e;if(t.currentUser.isLoggedIn())return{redirected:!1};const i=T().bf({url:`${B().default.domainBaseUrl}${m()._j.login}`,query:{redirectURL:o}});return(0,j().Er)(i)?(rt().c4({environment:t,url:i,redirect:!0,openInNew:null==n?void 0:n.openInNew}),{redirected:!0}):{redirected:!1}}},511614:(e,t,o)=>{o.d(t,{r:()=>u});var n=()=>o(35980),i=()=>o(513670),r=()=>o(326966),a=()=>o(614027),s=()=>o(239482),l=()=>o(876822),c=()=>o(47443);const d=10;function u(e){const{store:t,openInNew:o,environment:u,pageVisitSource:m,openInSidePeek:f,openInCenterPeek:g,peekMode:v}=e,{currentSpaceStore:h}=l().default.state;if(!t.isDefined())return;const _=t.isNavigableBlock(),{page:b,block:y}=_?{page:t,block:void 0}:{page:s().Dg(t),block:t};b&&(!y&&h&&function(e){let{currentUserId:t,spaceId:o,blockId:a}=e;const s=function(e){let{currentUserId:t,spaceId:o}=e;const i=n().Z.get({userId:t,key:p(o)});if(i){const e=(0,r().dj)(i);return Array.isArray(e)?e:[]}return[]}({currentUserId:t,spaceId:o}),l=i().jj([a,...s]).slice(0,d);n().Z.set({userId:t,key:p(o),value:JSON.stringify(l)})}({currentUserId:u.currentUser.id,spaceId:h.id,blockId:b.id}),c()._c({environment:u,store:b,scrollToBlockId:y&&y.id,openInNew:o,visitType:a().vu.Search,pageVisitSource:m,queryId:e.queryId,openInSidePeek:f,openInCenterPeek:g,peekMode:v}))}function p(e){return`recentQuickJumps:${e}`}},794586:(e,t,o)=>{o.d(t,{CH:()=>u,OW:()=>m,Qk:()=>p});var n=()=>o(506347),i=()=>o(403721),r=()=>o(429725),a=()=>o(876822),s=()=>o(482162),l=()=>o(175113),c=()=>o(82937),d=()=>o(497065);function u(e){const{environment:t,store:o,peekMode:l,openInNew:u,showMoveTo:p,saveParent:m,resultsStore:f,collectionContextStore:g,pageVisitSource:v}=e,h=e.currentBlockStore??a().default.state.mainEditorCurrentBlockStore;let _;if("chat"===t.RouterStore.state.route.name&&"side_peek"===l){const e=o.getNavigableBlockStore();if(!e)return;_=(0,i().tj)({pageId:e.id,scrollToBlockId:void 0,pageVisitSource:n().tY.AIChat,isMobile:t.device.isMobile})}else _=Boolean(u)||"full_page"===l||!h?(0,r().Hu)({store:o,fullyQualified:!1,showMoveTo:p,saveParent:m,pageVisitSource:v}):(0,r().Hu)({store:h,peekViewBlockId:o.id,peekMode:(0,s().getUrlParamFromPeekMode)(l),fullyQualified:!1,showMoveTo:p,saveParent:m,pageVisitSource:v});d().c4({environment:t,url:_,openInNew:u}),c().Af({resultsStore:f,collectionContextStore:g,pageVisitSource:v})}function p(){const{resultsStore:e}=s().default.state,t=null==e?void 0:e.getState();if(s().default.state.open&&t){const{targetStore:e}=s().default.state,o=t.findIndex((t=>t.id===e.id)),{mainEditorCurrentBlockStore:i}=a().default.state;if(i&&o>0){const e=(0,r().Hu)({store:i,fullyQualified:!1,peekViewBlockId:t[o-1].id,peekMode:(0,s().getUrlParamFromPeekMode)(s().default.state.mode),pageVisitSource:n().tY.PeekScroll});d().c4({environment:i.environment,url:e}),l().zP(i.environment,{direction:"up"})}}}function m(){const{resultsStore:e}=s().default.state,t=null==e?void 0:e.getState();if(s().default.state.open&&t){const{targetStore:e}=s().default.state,o=t.findIndex((t=>t.id===e.id)),{mainEditorCurrentBlockStore:i}=a().default.state;if(i&&o<t.length-1){const e=(0,r().Hu)({store:i,fullyQualified:!1,peekViewBlockId:t[o+1].id,peekMode:(0,s().getUrlParamFromPeekMode)(s().default.state.mode),pageVisitSource:n().tY.PeekScroll});d().c4({environment:i.environment,url:e}),l().zP(i.environment,{direction:"down"})}}}},579358:(e,t,o)=>{o.d(t,{k1:()=>u,tc:()=>c,yF:()=>l});o(313429);var n=()=>o(342792),i=()=>o(594546),r=()=>o(274879),a=()=>o(876822),s=()=>o(497065);async function l(e,t){const{utmContent:o,nextRoute:n,openInNewTab:i}=t,[r,a]=await Promise.all([c(e),d(e,{utmContent:o,utmSource:"public_page"})]);s().navigateOnBaseUrl({environment:e,url:n,extraSearchParams:{...r,...a},openInNewTab:i})}async function c(e){const t=await r().getPartnerStackCookie(e);if(t){return{gspk:window.btoa(t)}}const o=await r().getS2STrackingCookie(e);if(o&&o.partnerKey){return{ps_partner_key:window.btoa(o.partnerKey),ps_xid:o.clickId}}return{}}async function d(e,t){const{utmContent:o,utmSource:r}=t,s={utm_source:r,utm_content:o,tid:await(0,i().cG)(e)},{mainEditorCurrentBlockStore:l}=a().default.state;return null!=l&&l.id&&(s.utm_campaign=(0,n().F9)(null==l?void 0:l.id)),s}async function u(e,t){const{utmContent:o,nextRoute:n,formId:i,spaceId:r,openInNewTab:a}=t,[l,u]=await Promise.all([c(e),d(e,{utmContent:o,utmSource:"form"})]);var p;s().navigateOnBaseUrl({environment:e,url:n,extraSearchParams:{...l,...u,...(p={formId:i,spaceId:r},{from:"forms",form_id:p.formId,space_id:p.spaceId})},openInNewTab:a})}},488468:(e,t,o)=>{o.d(t,{A:()=>a,j:()=>r});var n=()=>o(35980);const i="queryParamsRedirect";function r(e){let{currentUserId:t,params:o}=e;n().Z.set({userId:t,key:i,value:o})}function a(e){return n().Z.get({userId:e,key:i})}},497065:(e,t,o)=>{o.d(t,{CZ:()=>ae,LU:()=>ce,Oj:()=>ne,RX:()=>re,T4:()=>oe,c4:()=>te,eH:()=>le,iy:()=>ue,j7:()=>ie,navigateOnBaseUrl:()=>ee,op:()=>se,up:()=>de});o(821057),o(267602),o(470928),o(398858),o(461318),o(33228);var n=()=>o(492788),i=()=>o(317924),r=()=>o(506347),a=()=>o(741633),s=()=>o(572680),l=()=>o(836273),c=()=>o(396136),d=()=>o(513670),u=()=>o(543172),p=()=>o(448768),m=()=>o(696459),f=()=>o(916673),g=()=>o(824462),v=()=>o(717245),h=()=>o(879920),_=()=>o(958783),b=()=>o(205228),y=()=>o(594546),S=()=>o(239482),w=()=>o(148126),k=()=>o(26796),I=()=>o(620218),C=()=>o(32969),x=()=>o(793935),T=()=>o(589525),M=()=>o(291335),P=()=>o(590972),A=()=>o(297861),R=()=>o(876822),B=()=>o(279386),E=()=>o(725751),D=()=>o(255810),U=()=>o(235044),F=()=>o(482162),N=()=>o(826955),V=()=>o(192425),L=()=>o(438793),O=()=>o(28162),Z=()=>o(127898),j=()=>o(231077),K=()=>o(411004),z=()=>o(676922),H=()=>o(13382),q=()=>o(203927),W=()=>o(224597),G=()=>o(47443),$=()=>o(752127),Q=()=>o(824034),Y=()=>o(806539),J=()=>o(96271);const X=[`${r().tY.MentionInPage}`,`${r().tY.LinkInPage}`,`${r().tY.PeekOpen}`,`${r().tY.Expand}`,`${r().tY.Duplicate}`,`${r().tY.Move}`,`${r().tY.PageTableOfContents}`];function ee(e){const t=function(e,t){try{const o=e.startsWith("/")?new URL(e,b().default.domainBaseUrl):new URL(e);if(t)for(const[e,n]of Object.entries(t))o.searchParams.append(e,n);return o.pathname+o.search+o.hash}catch{throw new Error(`${e} is neither a URL nor an absolute path`)}}(e.url,e.extraSearchParams);if(!e.openInNewTab)return te({...e,url:`${b().default.domainBaseUrl}${t}`});window.open(`${b().default.domainBaseUrl}${t}`,"_blank")}function te(e){var t,n,i;const{environment:r,openInNew:l,frontPreserveScrollPosition:d,callback:y}=e,{RouterStore:S,currentUser:C}=r,A=C.id,{savedSidebarExpandedStoreState:K}=F().default.state;K&&M().sidebarExpandedStore.setState(!0),k().Z.setState({isOpen:!1});const H=S.state.route,q=s().parseRoute({url:e.url,baseUrl:b().default.domainBaseUrl,publicDomainName:b().default.publicDomainName,isMobile:r.device.isMobile,protocol:b().default.protocol,currentUrl:window.location.href}),W=e.queryId??("page"===q.name&&q.queryId),{redirect:G,updateMobileTabbedRouterArgs:J}=function(e,t){var o;const n={redirect:e.redirect,updateMobileTabbedRouterArgs:e.updateMobileTabbedRouterArgs};if(!w().__(e.environment))return n;"login"!==t.name&&"logout"!==t.name&&"onboarding"!==t.name||(n.redirect=!0,n.updateMobileTabbedRouterArgs={...n.updateMobileTabbedRouterArgs,clearNativeRootPageOverride:!0});(null===(o=e.updateMobileTabbedRouterArgs)||void 0===o||!o.tabbedRouterStateAlreadyUpdated)&&(e.environment.TabbedRouterStore.state.modal??[]).length>0&&(n.redirect=!0,n.updateMobileTabbedRouterArgs={...n.updateMobileTabbedRouterArgs,clearNativeRootPageOverride:!0});return n}(e,q),ee=f().gy(window.location.href),te=f().gy(e.url),oe=Boolean((null==te?void 0:te.hostname)&&(te.hostname!==(null==ee?void 0:ee.hostname)||(null==ee?void 0:ee.port)&&te.port!==ee.port));if("external"===q.name||oe)return void $().D({environment:r,url:e.url,targetSelf:oe&&!l});const ie=p().u5({schemeUrl:e.url,baseUrl:b().default.domainBaseUrl}),re=f().T1(e.url);let ae=!1,se=e.makeTabActive;const le=D().default.state.currentTab.isPinned,ce=null===(t=E().default.state.preferences)||void 0===t?void 0:t.isPinnedTabNewTabEnabled;if(!l&&ce&&le&&s().nI(H)&&("page"===q.name||"chat"===q.name||"team"===q.name)){var de;const e="page"===H.name&&"page"===q.name&&H.blockId===q.blockId,t=Boolean(q.peekViewBlockId),o=Boolean(H.peekViewBlockId&&("chat"===q.name||"team"===q.name||(null===(de=R().default.state.mainEditorCurrentBlockStore)||void 0===de?void 0:de.id)===q.blockId)&&!t);e||t||o||(ae=!0,se=!0)}if("tab"===l||ae)return void(!r.device.isElectron||"page"!==q.name&&"chat"!==q.name&&"marketplace"!==q.name&&"team"!==q.name?$().D({environment:r,url:ie}):j().openInNewTabAfterFlush(r,{url:re,position:"after-children",makeTabActive:se}));if("window"===l&&r.device.isElectron&&("page"===q.name||"chat"===q.name||"marketplace"===q.name||"team"===q.name))return void j().openInNewWindow(re);const ue="page"===H.name&&"page"===q.name&&H.blockId===q.blockId,pe="page"===H.name&&"page"===q.name&&H.spaceDomain!==q.spaceDomain&&(H.requestedOnPublicDomain||q.requestedOnPublicDomain),me=r.AppUpdateStore.state.appUpdate;if(!ue&&!e.redirect&&Z().cM(r,me))return void Z().hC({environment:r,url:re,version:me.version,versionCreatedTime:me.versionCreatedTime});if(_().default.isComposingNewDiscussion()){const e=_().default.state,t=e.open&&"comment"===e.content&&e.discussionInputStore||void 0;if(t)return void(async()=>{const{commentsDependency:e}=await Promise.all([o.e(62743),o.e(52774),o.e(44832),o.e(90698),o.e(84885),o.e(37358),o.e(5242),o.e(7312),o.e(90424),o.e(81580),o.e(84325),o.e(31189),o.e(69343),o.e(46293),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(46616),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63707),o.e(86609),o.e(91253),o.e(4642),o.e(5006),o.e(6612),o.e(61171),o.e(23179),o.e(75377),o.e(31020),o.e(2942),o.e(73682),o.e(58591),o.e(54803),o.e(1953),o.e(10216),o.e(58565),o.e(69197),o.e(42055),o.e(38739),o.e(44751),o.e(81567),o.e(63257),o.e(34291),o.e(1913),o.e(56054),o.e(95076),o.e(82658),o.e(4163),o.e(14581),o.e(88702),o.e(58324)]).then(o.bind(o,874018)),{discussionHelpers:n}=await e.load();(0,h().uK)({discussionInputStore:t,environment:r,discussionHelpers:n,reason:"navigating_away"})})()}if(G||ue||(Q().Vz({historyId:S.state.id,currentUserId:A}),"page"===H.name&&R().default.state.mainEditorCurrentBlockStore&&B().MT.isBlockModeInTranslation(R().default.state.mainEditorCurrentBlockStore.id)&&z().lR({environment:r,pageStore:R().default.state.mainEditorCurrentBlockStore,triggeredFrom:"navigation"}),(0,T().Sx)(r)&&(x().setUpdateExpand({environment:r,isExpanded:!1,from:"close_for_space",saveDetailsSidebarPreference:!1}),P().default.update((e=>({...e,canRender:!1})))),v().M.state.isOpen&&v().M.setState({isOpen:!1})),Q().LU(r),pe)return void $().D({environment:r,url:e.url,targetSelf:!0});const fe=(0,u().ZP)();G?window.history.replaceState({id:fe,currentUserId:r.currentUser.id},void 0,re):window.history.pushState({id:fe,currentUserId:r.currentUser.id},void 0,re);const ge=Q().M3({historyId:S.state.id,currentUserId:A});if(Q().UV({historyId:fe,historyIndex:G?ge:ge+1,currentUserId:A}),"pageVisitSource"in q&&(0,m().DE)(X,q.pageVisitSource)&&L().BR(r,H,q),!ue&&"page"===H.name&&V().Z.state&&(null===(n=V().Z.state)||void 0===n?void 0:n.pageId)===H.blockId&&O().Eb(r,V().Z.state),r.device.isElectron&&D().default.update((e=>({...e,unauthorizedIframeUrls:[]}))),Y().ep({environment:r,id:fe,action:G?"replace":"push",href:re,updateMobileTabbedRouterArgs:J}).then((()=>{"page"===q.name&&q.blockId&&!ue&&W?V().Z.setState({queryId:W,pageId:q.blockId,timeEntered:new Date}):V().Z.reset()})).then((()=>{y&&y()})),"nativeTab"===q.name&&"assistant"===q.tab){const{currentSpaceStore:e}=R().default.state;e&&g().callApi({eventName:"warmVectorDBCache",environment:r,data:{spaceId:e.id},headers:(0,a().Bb)({spaceId:e.id})})}if(ue||"nativeTab"===H.name&&"page"===q.name&&(null===(i=R().default.state.mainEditorCurrentBlockStore)||void 0===i?void 0:i.id)===q.blockId||"chat"===H.name&&"chat"===q.name){const e="chat"===q.name&&q.peekViewBlockId&&R().default.state.currentSpaceStore?N().G.createChildStore(R().default.state.currentSpaceStore,{table:c().iU,id:q.peekViewBlockId}):void 0;ne(r,e)}!d&&window.scrollTo(0,0),U().Z.update((e=>({...e,isMeasuring:!0}))),I().default.DO_NOT_USE_markLegacy("initial_page_render_after_login")}function oe(e){te({environment:e,url:l()._j.onboarding})}async function ne(e,t){const{RouterStore:o}=e,i=R().default.state.mainEditorCurrentBlockStore??t;if(i&&("page"===o.state.route.name||"chat"===o.state.route.name)){if(o.state.route.scrollToBlockId){const e=[o.state.route.scrollToBlockId];0===d().oA(C().C.findSelectablesFromIds(e)).length&&(await q().Nz(i,e),await n().default.afterNextFlush())}K().Y(e,{animateScrollToBlocks:!0})}}function ie(e){var t;const{environment:o,url:n}=e;if(!w().__(o))return;const{TabbedRouterStore:r}=o,a=(0,i().w_)(r.state);if("web"!==a.type)return;const l=s().parseRoute({url:n,baseUrl:b().default.domainBaseUrl,publicDomainName:b().default.publicDomainName,isMobile:o.device.isMobile,protocol:b().default.protocol,currentUrl:window.location.href}),c=(null===(t=a.redirectedTo)||void 0===t?void 0:t.route)??a.route;if(l.name!==c.name)return;const d=f().T1(e.url);a.redirectedTo?(a.redirectedTo.route=l,a.redirectedTo.url=d):(a.route=l,a.url=d)}async function re(e){const{environment:t,url:o,callbackType:n}=e,i=f().T1(o);if(t.device.isNative)te({url:i,environment:t});else{const e="nativemailredirect"===n,o="nativecalendarredirect"===n,r=e||o,a=r?`${b().default.domainBaseUrl}${i}`:i,s=e?b().default.mail.protocol:o?b().default.calendar.desktopProtocol:b().default.protocol;window.location.href=f().SK(p().NV({httpUrl:a,protocol:s,includePort:r}),{di:await(0,y().cG)(t)})}}async function ae(e){const{environment:t,blocks:o}=e,{mainEditorCurrentBlockStore:n,currentSpaceViewStore:i,currentUserSettingsStore:a,currentUserRootStore:s}=R().default.state,l=n&&o.find((e=>e.id===n.id));if(l&&i){const e=S().Dg(l,1);(0,A().Y)("supportsNativeHome")?w().NW(t)?se(t):J().navigateToHomeTab(t):e?G()._c({environment:t,store:e,pageVisitSource:r().tY.LeaveOrRemove}):await W().y3({environment:t,spaceViewStore:i,userSettingsStore:a,userRootStore:s,pageVisitSource:r().tY.LeaveOrRemove,navigationType:"switchingToOrLoadingSpace"})}Boolean(o.find((e=>{var t;return e.id===(null===(t=F().default.peekTargetStore.state)||void 0===t?void 0:t.id)})))&&n&&G()._c({environment:t,store:n,pageVisitSource:r().tY.LeaveOrRemove})}function se(e){w().__(e)?function(e){const{TabbedRouterStore:t}=e,o=t.state,n=(0,i().Os)(o);if(!n)return;const r=n.type;"native"===r?t.updateWithNativePage({page:n,clearPages:!1,navigationAction:"pop",navigationSource:"mobile-back-navigation"}):"web"===r?window.history.back():(0,m().t1)(r)}(e):window.history.back()}function le(){window.history.forward()}function ce(){const e=R().default.state.mainEditorCurrentBlockStore;return!!e&&!!S().Dg(e,1)}function de(e){const t=R().default.state.mainEditorCurrentBlockStore;if(!t)return;const o=S().Dg(t,1);o&&G()._c({environment:e,store:N().G.createChildStore(o,o.pointer),pageVisitSource:r().tY.Breadcrumb})}function ue(e){const{url:t}=H().Vr(e);te({url:t||l()._j.root,environment:e})}},586730:(e,t,o)=>{o.r(t),o.d(t,{getInitialPage:()=>d,initialize:()=>c});var n=()=>o(694050),i=()=>o(543172),r=()=>o(148126),a=()=>o(297861),s=()=>o(824034),l=()=>o(806539);async function c(e){const t=window.history.state&&window.history.state.id||(0,i().ZP)();if(!window.history.state){const o=e.currentUser.id;window.history.replaceState({id:t,currentUserId:o},void 0,window.location.href),s().UV({historyId:t,historyIndex:0,currentUserId:o})}r().__(e)&&e.TabbedRouterStore.setUp({nativeInboxEnabled:(0,a().Y)("supportsNativeInbox")}),await l().ep({environment:e,id:t,action:"pop",href:window.location.href,updateMobileTabbedRouterArgs:{forceUpdate:!0,silenceErrors:!0,clearNativeRootPageOverride:"/"!==window.location.pathname},enableDesktopAppRedirect:!0});const o=e.currentUser.id,c=d(o);if(!c||"undefined"===c){const e=window.location.pathname;e&&function(e){let{currentUserId:t,value:o}=e;n().Z.set({userId:t,key:"sourceInitialPage",value:o})}({currentUserId:o,value:e})}}function d(e){return n().Z.get({userId:e,key:"sourceInitialPage"})}},806539:(e,t,o)=>{o.d(t,{ep:()=>ye});var n=()=>o(817673),i=()=>o(468353),r=()=>o(756280),a=()=>o(954949),s=()=>o(35980),l=()=>o(923420),c=()=>o(572680),d=()=>o(836273),u=()=>o(232237),p=()=>o(282017),m=()=>o(955620),f=()=>o(944077),g=()=>o(680146),v=()=>o(839002),h=()=>o(696459),_=()=>o(916673),b=()=>o(343353),y=()=>o(205228),S=()=>o(361223),w=()=>o(632775),k=()=>o(286338),I=()=>o(345918),C=()=>o(976973);function x(e){let{environment:t,spaceStore:o}=e;(function(e){let{environment:t,spaceStore:o}=e;if(!o||!(0,I().Cx)(o)||!(0,k().Ye)())return!1;const n=null==o?void 0:o.getDisableGuestMembershipRequests();if((0,h().$K)(n)&&!1===n)return!0;if(!(0,h().$K)(n)){const e=null==o?void 0:o.getPublicSpaceData();if((0,h().$K)(e)&&!1===e.disableGuestMembershipRequests)return!0}return!1})({environment:t,spaceStore:o})&&C().Z.open()}var T=()=>o(594546),M=()=>o(982855),P=()=>o(512258),A=()=>o(693622),R=()=>o(148126),B=()=>o(803728),E=()=>o(291550),D=()=>o(267344),U=()=>o(7132),F=()=>o(876822),N=()=>o(524434),V=()=>o(518019),L=()=>o(749826),O=()=>o(601952),Z=()=>o(842918),j=()=>o(522323),K=()=>o(788396),z=()=>o(548812),H=()=>o(723721),q=()=>o(438793),W=()=>o(979614),G=()=>o(146630),$=()=>o(454393),Q=()=>o(278275),Y=()=>o(306743),J=()=>o(901193),X=()=>o(47443),ee=(o(267602),o(470928),()=>o(506347)),te=()=>o(431595),oe=()=>o(342792),ne=()=>o(443269),ie=()=>o(527278),re=()=>o(824462),ae=()=>o(308186),se=()=>o(224597),le=()=>o(497065);const ce=(0,o(788860).vU)({goBack:{id:"router.githubStudentCallback.goBack",defaultMessage:"Go back"},studentPackUpgradeSuccess:{id:"router.githubStudentCallback.success.message",defaultMessage:"Your workspace has been upgraded to the Education Plus plan."},studentPackUpgradeError:{id:"router.githubStudentCallback.error.message",defaultMessage:"Failed to upgrade to the Education Plus plan. Please try again or reach out to team@makenotion.com."},studentPackUpgradeNoCode:{id:"router.githubStudentCallback.noCode.message",defaultMessage:"Failed to authenticate your GitHub account. Please try again later."},studentPackUpgradeNotStudent:{id:"router.githubStudentCallback.notStudent.message",defaultMessage:"We couldn't verify your student status. Please try again."},studentPackUpgradeNoSpace:{id:"router.githubStudentCallback.noSpace.message",defaultMessage:"We could not locate your workspace. Please try again."}});var de=()=>o(58771),ue=(o(821057),()=>o(799891)),pe=()=>o(396136),me=()=>o(255933),fe=()=>o(616963),ge=()=>o(826955),ve=()=>o(291338),he=(o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),()=>o(234049));const _e=new Set(["1d2d0ce4-3be0-49e4-92ca-3bb0c3de1a6e","6f574aa0-ea3e-4039-bd12-eef2b9c797e1","c92bcc92-bae6-4018-ba72-626108d28bb1","46ec1b0e-c5d5-4476-99c1-0dc578190279","b1b35f81-c752-4251-94de-5813c850d159"]);async function be(e,t){if(!e.currentUser.isLoggedIn())return ve().nM({currentUserId:void 0,blockId:t.blockId}),void de().u6({environment:e,page:t});await async function(e,t){fe().default.reset(),await Promise.all([F().default.waitUntil((()=>void 0!==F().default.state.currentUserRootStore))]);const{currentUserRootStore:o}=F().default.state;if(void 0===o)throw new Error("User root is not defined.");const{blockId:n,workspaceId:i}=t;if(!n)throw new Error("Block ID is not defined.");const r=ge().G.createChildStore(o,{table:pe().iU,id:n}),a=i&&(0,oe().qn)(i)?ge().H2.createChildStore(o,{table:me().bx,id:(0,oe().Mt)(i)}):void 0;await Promise.all([r.load(),null==a?void 0:a.load(),L().default.waitUntilStatsigReady()]),le().c4({environment:e,url:d()._j.root,callback:()=>{!async function(e){const{environment:t,currentUserRootStore:o,blockStore:n,spaceStore:i,isFromTemplateGallery:r}=e;if(i&&function(e){let{blockStore:t,spaceStore:o}=e;if(!t.isReady()||!o.isReady()||!o.canEdit())return!1;const n=t.getParentId();return!!n&&_e.has(n)}({blockStore:n,spaceStore:i}))return fe().default.setState({open:!1,isFromTemplateGallery:r,isFromDuplicateParam:!0}),void(await async function(e){const{environment:t,currentUserRootStore:o,blockStore:n,spaceStore:i}=e;if(!n.isReady()||!i.isReady()||!i.canEdit())return;const r=o.getSpaceViewPointers().find((e=>e.spaceId===i.id));if(!r)return;const a=ge().V9.createChildStore(o,r);await a.load(),await(0,he().JI)({environment:t,blockStore:n,spaceStore:i,spaceViewStore:a})}({environment:t,currentUserRootStore:o,blockStore:n,spaceStore:i}));fe().default.setState({open:!0,variant:"modal",blockStore:n,spaceStore:void 0,spaceViewStore:void 0,teamStore:void 0,isFromTemplateGallery:r,isFromDuplicateParam:!0})}({environment:e,currentUserRootStore:o,blockStore:r,spaceStore:a,isFromTemplateGallery:"notion_template_gallery"===t.from})}})}(e,t).catch((o=>{ue().log({level:"error",from:"templateRouteActions.handleTemplateDuplicationRoute",type:"handleTemplateDuplicationRouteForLoggedInUsersError",data:{miscDataToConvertToString:{nextRoute:t}},error:o}),le().c4({environment:e,url:d()._j.root})}))}async function ye(e){const{id:t,action:k,href:I,environment:C,updateMobileTabbedRouterArgs:ue}=e,{RouterStore:pe,currentUser:me,TabbedRouterStore:fe}=C,[ge,ve]=c().DP({url:I,isMobile:C.device.isMobile,baseUrl:y().default.domainBaseUrl,publicDomainName:y().default.publicDomainName,protocol:y().default.protocol,currentUrl:window.location.href});if((0,r().yN)(window.location.href),"root"===ge.name&&C.device.isElectronMail)return;g().FB(ge.name),f().setRouteTags(ge,ve);const he=pe.state.route,_e=s().Z.get({userId:me.id,key:t});pe.setState({id:t,historyState:_e,action:k,route:ge,initialRoute:pe.state.initialRoute||ge}),he&&ge&&((0,P().isPrewarmedTabInitialRender)(C)?O().default.update((e=>({...e,prewarmedTabAppStartTimeOverride:performance.now()}))):Z().Z.markNavigationStartTime(he,ge));if("page"===(null==he?void 0:he.name)&&"page"===ge.name&&ge.blockId!==he.blockId&&he.blockId&&X().qV({environment:C,targetId:he.blockId}),null!=ue&&ue.forceUpdate||R().__(C)&&(null==ue||!ue.tabbedRouterStateAlreadyUpdated)){const Be={type:"web",url:_().T1(I),route:ge};fe.updateWithWebPage({page:Be,action:null!=ue&&ue.forceUpdate?"replace":k,updateMobileTabbedRouterArgs:ue})}const ye=_().Qc(I),ke=ye.query[u().Vt];ke&&(0,l().Zj)({currentUserId:me.id,promoCode:ke});const Ie=ye.query[i().gS];Ie&&((0,p().ob)(Ie),Se(i().gS)),"page"===ge.name||c().KV[ge.name]||q()._W(C,I);const{target:Ce,subtarget:xe}=function(e){if(!e)return{target:void 0};const t=null==e?void 0:e.indexOf(".");if(-1===t)return{target:e};return{target:e.substring(0,t),subtarget:e.substring(t+1)}}(ye.query.target),Te=_().T1(I),Me=n().parse(Te.split("?")[1]||""),Pe="aq",Ae="deepFind",Re=Me[Pe]&&String(Me[Pe]);if(Ce&&function(e){let{environment:t,target:n,subtarget:i,assistantQueryPrefill:r,assistantQueryPrefillKey:s}=e;if("intercom"===n)Y().j_({environment:t,from:"query_param"}),Se("target");else if(t.device.isMobileBrowser&&"plans"===n){async function l(){if(await L().default.waitUntilStatsigReady(),!(0,z().bQ)())return;const e=await S().rq.load(),o=F().default.state.currentSpaceStore;e.plans.canShowPlans(o)&&await e.plans.showPlans({environment:t,from:"deeplink"}),Se("target")}we({timeoutMs:3e3,effect:l})}else if(t.device.isMobileBrowser&&"billing"===n){async function c(){if(await L().default.waitUntilStatsigReady(),!(0,z().bQ)())return;const e=F().default.state.currentSpaceStore,o=await S().rq.load();if(e){const n=await V().Z.awaitData(t,{spaceId:e.getSpaceId()});o.billing.canShowBilling({spaceStore:e,billingData:n})&&o.billing.showBilling({environment:t,from:"deeplink"})}Se("target")}we({timeoutMs:3e3,effect:c})}else if("billing"===n||"plans"===n||"members"===n||"audit_log"===n||"connected_apps"===n||"identity_provisioning"===n||"analytics"===n||"admin_content_search"===n||"profile"===n||"notifications_and_settings"===n||"user_settings"===n||"notifications"===n||"language_and_region"===n||"settings"===n||"integrations"===n||"sites"===n||"imports"===n||"security"===n)$().r$({currentTab:n,subtab:i,isMobile:t.device.isMobile,openedFrom:"email"}),Se("target");else if("contact_us"===n)(0,K().nx)({openedFrom:"contact_us_deeplink"}),Se("target");else if("quickfind"===n)Promise.race([async()=>{await F().default.waitUntil((()=>void 0!==F().default.state.currentUserSettingsStore&&void 0!==F().default.state.currentSpaceStore&&void 0!==F().default.state.currentSpaceViewStore&&void 0!==F().default.state.currentUserRootStore)),await F().default.waitUntilRendered(),Q().UT({environment:t,analyticsFrom:"deeplink"})},v().Vs(1500).then((()=>{Q().UT({environment:t,analyticsFrom:"deeplink"})}))]),Se("target");else if("qna"===n){const d=async()=>{if(await L().default.waitUntilStatsigReady(),(0,M().AC)(t),!N().KR.isQnaRightSideDeeplinkEnabled()||N().KR.isQnATooltipsVisible(t.device,F().default.state.currentUserSettingsStore))return;const{assistantDependency:e}=await Promise.resolve().then(o.bind(o,650996)),n=await e.load();n.assistantMenuActions.openAssistantRightHandSideMenu({environment:t,from:"deeplink"}),r&&(Se(s),n.assistantMenuActions.setPrimeTextInput(r))};we({timeoutMs:1500,effect:()=>(Se("target"),d())})}else if("tryAI"===n){we({timeoutMs:4e3,effect:async()=>{await L().default.waitUntilStatsigReady(),(0,M().AC)(t);let e=N().KR.shouldRouteToWriterOrPlansAfterSignup();switch(N().KR.isAssistantInWriterEnabled()||(e="plans"),e){case"writer":return Se("target"),r&&Se(s),J().w({environment:t,prefill:r});case"plans":if(Se("target"),t.device.isMobileBrowser){const e=await S().rq.load(),o=F().default.state.currentSpaceStore;if(e.plans.canShowPlans(o))return e.plans.showPlans({environment:t,from:"deeplink"})}return $().r$({currentTab:"plans",subtab:i,isMobile:t.device.isMobile,openedFrom:"email"});default:(0,h().t1)(e)}}})}else if("ai_writer"===n)we({timeoutMs:3e3,effect:()=>(Se("target"),r&&Se(s),(0,M().AC)(t),J().w({environment:t,prefill:r}))});else if("slack_qna"===n){const u="deeplink";(0,b().navigateToSlackUniversalQnAOnboarding)({analyticsFrom:u})}else if("google_drive_qna"===n){const p="deeplink";(0,b().navigateToGoogleDriveUniversalScreen)({analyticsFrom:p,screenToShow:"info_screen"})}else if("github_ai_connector"===n){const m="deeplink";(0,b().navigateToGithubAIConnectorOnboarding)({analyticsFrom:m})}else if("jira_qna"===n){const f="deeplink";(0,b().navigateToJiraUniversalScreen)({analyticsFrom:f,screenToShow:"info_screen"})}else if("guest_to_member"===n){(async()=>{const e=async()=>{var e;await F().default.waitUntil((()=>void 0!==F().default.state.currentSpaceStore)),await Promise.all([null===(e=F().default.state.currentSpaceStore)||void 0===e?void 0:e.waitUntil((()=>{var e;return!(null===(e=F().default.state.currentSpaceStore)||void 0===e||!e.isReady())})),L().default.waitUntilStatsigReady()])};await Promise.race([e(),v().Vs(3e3)]),x({environment:t,spaceStore:F().default.state.currentSpaceStore})})(),Se("target")}else if("add_pro_account"===n)we({timeoutMs:3e3,effect:()=>new Promise((()=>{E().v.setState({open:!0,isForAddingProAccount:!0}),Se("target")}))});else if("add_another_account"===n)we({timeoutMs:3e3,effect:()=>new Promise((()=>{E().v.setState({open:!0}),Se("target")}))});else if("create_form"===n){async function g(){await L().default.waitUntilStatsigReady();const{formsEditorDependency:e}=await Promise.resolve().then(o.bind(o,688725)),{formEditorActions:n}=await e.load();n.createFormInPrivate({environment:t,navigateToFormBuilder:!0}),Se("target")}we({timeoutMs:3e3,effect:g})}else if("inappmessage"===n){const _=(0,a().Si)(i);_&&we({timeoutMs:3e3,effect:async()=>{await B().yM(t,_)}})}else"auto_transcribe"===n&&we({timeoutMs:3e3,effect:async()=>{Se("target");return(await w().Xb.load()).transcriptionBlockActions.startTranscribingBlockOnPage({environment:t})}})}({environment:C,target:Ce,subtarget:xe,assistantQueryPrefill:Re,assistantQueryPrefillKey:Pe}),Boolean(ye.query.mwn2024)&&de().q(C),"googleOneTapRedirect"!==ge.name)if("samlAuthCallback"!==ge.name)if("appleAuthCallback"!==ge.name)if("googleAuthCallback"!==ge.name)if("microsoftAuthCallback"!==ge.name)if("passkeyAuthCallback"!==ge.name)if("passkeyRegistrationCallback"!==ge.name)if("externalAuthNativeCallback"!==ge.name)if(await L().default.waitUntil((()=>L().default.state.isLoaded)),e.enableDesktopAppRedirect&&function(e){const{route:t}=e.RouterStore.state;return c().c$[t.name]&&"always"===j().Z.state&&e.device.isDesktop&&e.device.isBrowser&&(e.device.isMac||e.device.isWindows||!1)&&(!("configureOpenInDesktopApp"in t)||!t.configureOpenInDesktopApp)}(C))de().FA(C);else{if("root"===ge.name){const Ee=Array.isArray(Me.target)?Me.target[0]:Me.target,De="sites_publish"===Ee||C.device.isMobile&&"sites_tooltips_tour"===Ee,Ue={templateGalleryItem:ge.templateGalleryItem,mwnFeatureModalRedirect:Boolean(Me.mwn2024),projectManagementLaunch:"true"===(Array.isArray(Me.pjm)?Me.pjm[0]:Me.pjm),assistantQueryPrefill:Array.isArray(Me.aq)?Me.aq[0]:Me.aq,assistantTargetRedirect:"qna"===Ee||"ai_writer"===Ee?Ee:void 0,forceLandLastVisitedPage:De};de().nN(ge,C,Ue)}else if("onboarding"===ge.name)de().uO(C);else if("modal"===ge.name)if(C.currentUser.isLoggedIn()){let Fe="/";ge.projectManagementLaunch?Fe+="?tg=gallery":ge.templateGalleryItem&&(Fe+=`?tg=${ge.templateGalleryItem}`),le().c4({environment:C,url:Fe,redirect:!0})}else le().c4({environment:C,url:d()._j.login,redirect:!0});else if("googleDriveAuthCallback"===ge.name)de().LW(ge,C);else if("slackAuthCallback"===ge.name)de().YU({route:ge,environment:C});else if(ge.name===c().AY.datadogAuthCallback)de().wN({route:ge,environment:C});else if("externalAuthCallback"===ge.name)de().xp({route:ge,environment:C});else if(ge.name===c().AY.authCallback)de().wN({route:ge,environment:C});else if("loginWithEmailCallback"===ge.name)de().kd(ge,C);else if("loginSuccessCallback"===ge.name)de().OO(ge,C);else if("passwordResetCallback"===ge.name)de().KR(ge,C);else if("passwordChangeRedirect"===ge.name)le().navigateOnBaseUrl({environment:C,url:d()._j.login}),A().E({environment:C});else if("logout"===ge.name)de().hY(C);else if("login"===ge.name||"signup"===ge.name){(0,p().UK)(),de().HB(C,I),Boolean(Me.showNotionCalendarModal)&&await de().cG(C);const Ne={doNotRedirectWhenLoggedIn:Boolean(Me.newSignup)},Ve=Me.redirectURL&&String(Me.redirectURL),Le=Ve&&(0,R().Er)(Ve)?Ve:void 0;de().wo({environment:C,routeName:ge.name,option:Ne,redirectUrl:Le})}else if("login/mail"===ge.name||"signup/mail"===ge.name)await de().aO(C);else if("login/calendar"===ge.name||"signup/calendar"===ge.name)await de().AH(C);else if("oauthAuthorization"===ge.name)de().r$(ge,C);else if("page"===ge.name||"space"===ge.name){if(de().HB(C,I),de().pN(C,ge.state),"page"===ge.name&&ge.shouldDuplicate)return void(await be(C,ge));G().Uz({nextRoute:ge,currentRoute:he,environment:C,query:Te}),await de().Z_(C,ge)}else if("templatesRedirect"===ge.name)le().c4({environment:C,url:(0,R().UY)("templateGallery"),redirect:!0});else if("communityRedirect"===ge.name)le().c4({environment:C,url:(0,R().UY)("community"),redirect:!1});else if("guideRedirect"===ge.name)le().c4({environment:C,url:(0,R().UY)("guides.guides"),redirect:!0});else if("invoiceRedirect"===ge.name)le().c4({environment:C,url:d()._j.root,redirect:!0});else if("termsRedirect"===ge.name)le().c4({environment:C,url:(0,R().UY)("terms"),redirect:!0});else if("contentPolicyRedirect"===ge.name)le().c4({environment:C,url:(0,R().UY)("contentPolicy"),redirect:!0});else if("uiDoc"===ge.name)le().c4({environment:C,url:d()._j.root,redirect:!0});else if("exportPreview"===ge.name)le().c4({environment:C,url:d()._j.root,redirect:!0});else if("admin"===ge.name)y().default.isAdminMode||le().c4({environment:C,url:d()._j.root,redirect:!0});else if("team"===ge.name)de().iM(C,ge,he);else if("teamInvite"===ge.name)de().cQ(C,ge.inviteCode);else if("teamsInvite"===ge.name)C.currentUser.isLoggedIn()||le().c4({environment:C,url:d()._j.signup,redirect:!0});else if("aiGtmFavoriteImport"===ge.name)de().Rd({environment:C,route:ge});else if("new"===ge.name)de().HR(C,ge);else if("myIntegrations"===ge.name)de().WC(C);else if("creatorProfile"===ge.name)de().CV({environment:C,redirectRoute:{url:d()._j.creatorProfile}});else if("creatorProfileTemplates"===ge.name)ge.initialValues&&(U().Z.setState({url:ge.initialValues.url??"",name:ge.initialValues.name??"",status:"draft"}),Se("url"),Se("name")),de().CV({environment:C,redirectRoute:{url:d()._j.creatorProfileTemplates}});else if("creatorProfileIntegrations"===ge.name)de().CV({environment:C,redirectRoute:{url:d()._j.creatorProfileIntegrations}});else if("creatorProfileAnalytics"===ge.name)de().CV({environment:C,redirectRoute:{url:d()._j.creatorProfileAnalytics}});else if("creatorProfileCoupons"===ge.name)de().CV({environment:C,redirectRoute:{url:d()._j.creatorProfileCoupons}});else if("unknown"===ge.name)le().c4({environment:C,url:d()._j.root,redirect:!0});else if("nativeTab"===ge.name)de().o9(C,ge,he,k);else if("quickSearch"===ge.name)await de().D_(C,ge,he);else if("chat"===ge.name){async function Oe(){if(Re){Se(Pe);const{assistantDependency:e}=await Promise.resolve().then(o.bind(o,650996)),{assistantMenuActions:t,assistantActions:n}=await e.load(),i=Re.length>Q().LR&&C.device.isElectron;t.setPrimeTextInput(i?void 0:Re);const r=Boolean(Me[Ae]);if(r&&Se(Ae),i||r){const e=await n.resetAndInitializeAssistantSession({environment:C,deepFindRequested:r});n.commitHumanStep({environment:C,text:(0,m().TPx)(Re),sessionId:e.sessionId,assistantSurfaceType:"searchPane"})}}Se("persona")}await de().dH(C,ge,he),we({timeoutMs:3e3,effect:Oe})}else if("aiInferenceTranscript"===ge.name)de().Ai(C,ge,he);else if("marketplace"===ge.name||"gallery"===ge.name)await de().IQ(C,ge,he);else if("uniqueId"===ge.name)await de().AL(C,ge);else if("signupWithTrial"===ge.name){const Ze=ge.trialUpsell;(0,T().j)({environment:C,event:{eventName:"upsell_link_visit",eventProperties:{source:Ze}}}),(0,H().zQ)(Ze,C),(0,H().O1)(Ze)&&W().ms(C,{source:Ze}),"perfmark"===Ze&&C.currentUser.isLoggedIn()&&(D().Z.setState({open:!0,isExistingUser:!0}),de().CV({environment:C,redirectRoute:{url:d()._j.root}})),le().c4({environment:C,url:d()._j.signup,redirect:!0})}else"home"===ge.name?de().Z1(C,ge):"githubStudentPackAuthCallback"===ge.name?async function(e,t){const o=t.code;if(!o)return void ae().PV({message:ie().Z.formatMessage(ce.studentPackUpgradeNoCode),acceptLabel:ie().Z.formatMessage(ce.goBack),onAccept:()=>{le().c4({environment:e,url:d()._j.githubStudentPackHome,redirect:!0})}});if(!t.state)return ae().UW(ie().Z.formatMessage(ce.studentPackUpgradeNoSpace)),void le().c4({environment:e,url:d()._j.githubStudentPackHome});const n=(0,oe().Mt)(t.state),i=await re().callApi({eventName:"applyStudentGitHubGrant",environment:e,data:{spaceId:n,code:o}});if("success"===i.type)ae().PV({message:ie().Z.formatMessage(ce.studentPackUpgradeSuccess),acceptLabel:ie().Z.formatMessage(ce.goBack),onAccept:async()=>{const{currentUserRootStore:t,currentUserSettingsStore:o}=F().default.state,i=null==t?void 0:t.getSpaceViewStores(),r=null==i?void 0:i.find((e=>e.getSpaceId()===n));r?await se().y3({environment:e,spaceViewStore:r,userRootStore:t,userSettingsStore:o,pageVisitSource:ee().tY.SwitchSpace,navigationType:"switchingToOrLoadingSpace"}):le().c4({environment:e,url:d()._j.githubStudentPackHome})}});else{if((0,te().Cx)(i.error)){const e=(0,ne().wf)(ie().Z.getIntl(),i);ae().UW(e)}else ae().UW(ie().Z.formatMessage(ce.studentPackUpgradeError));le().c4({environment:e,url:d()._j.githubStudentPackHome})}}(C,ge):"formResponse"===ge.name&&de().uT(C,ge);c().kd(ge)&&(de().td(C,ge,Te),de().OP(C,ge),"page"===ge.name&&ge.demoWorkspaceMode&&(await L().default.waitUntilStatsigReady(),de().Dj(ge.demoTemplateSlug)),await de().JW({environment:C,nextRoute:ge,currentRoute:he}))}else de().q9(ge,C);else de().m4(ge,C);else de().PR(ge,C);else de()._w(ge,C);else de().E4(ge,C);else de().fE(ge,C);else de().rH(ge,C);else de().ST(C,{code:ge.code,frontPathName:ge.frontPathName,upsell:ge.trialName})}function Se(e){const t=_().T1(_().iO(window.location.href,e));window.history.replaceState(window.history.state,void 0,t)}function we(e){const{timeoutMs:t,effect:o}=e;(async()=>{await function(e){const{timeoutMs:t}=e;return Promise.race([F().default.waitUntil((()=>void 0!==F().default.state.currentUserSettingsStore&&void 0!==F().default.state.currentSpaceStore&&void 0!==F().default.state.currentSpaceViewStore&&void 0!==F().default.state.currentUserRootStore)),v().Vs(t)])}({timeoutMs:t}),await o()})()}},96271:(e,t,o)=>{o.d(t,{S:()=>h,navigateToHomeTab:()=>_});o(670560),o(267602),o(653476),o(30005),o(241792);var n=()=>o(317924),i=()=>o(799891),r=()=>o(572680),a=()=>o(513670),s=()=>o(543172),l=()=>o(205228),c=()=>o(148126),d=()=>o(876822),u=()=>o(369320),p=()=>o(491927),m=()=>o(253502),f=()=>o(269299),g=()=>o(663366),v=()=>o(497065);function h(e){var t,o,u,h,_;const{environment:b,tab:y,navigationAction:S,navigationSource:w}=e,{TabbedRouterStore:k,currentUser:I}=b;if(!c().__(b))return;"updates"!==y&&m().nI(b);const C=k.state.activeTab,x=(0,n().w_)(k.state),T=a().Xh(k.state);T.activeTab=y,T.navigationAction=S,T.navigationSource=w;let M=!1;if(void 0!==e.nativeRootPageOverrideEnabled&&(M=T.tabs[T.activeTab].nativeRootPageOverrideEnabled!==e.nativeRootPageOverrideEnabled,T.tabs[T.activeTab].nativeRootPageOverrideEnabled=e.nativeRootPageOverrideEnabled),a().Xy(e.modal,T.modal)||(M=!0,T.modal=e.modal??[]),void 0!==e.pages&&0===((null===(t=e.modal)||void 0===t?void 0:t.length)??0)){const t=e.pages.map((e=>{const t=(0,n().Gt)(e,!0),o=r().parseRoute({url:t,baseUrl:l().default.domainBaseUrl,publicDomainName:l().default.publicDomainName,isMobile:b.device.isMobile,protocol:l().default.protocol,currentUrl:window.location.href});return{...e,route:o}})),o=T.tabs[T.activeTab].pages;M||=!a().Xy(o,t),T.tabs[T.activeTab].pages=t}k.setState(T);const P="addPage"===y;if(k.state.activeTab===C&&!M&&!P)return;const A=d().default.state.mainEditorCurrentBlockStore,R="web"===x.type&&(null===(o=x.redirectedTo)||void 0===o?void 0:o.route)&&"page"===(null===(u=x.redirectedTo)||void 0===u?void 0:u.route.name)&&(null===(h=x.redirectedTo)||void 0===h?void 0:h.route.showMoveTo),B=A&&(null==A?void 0:A.canEdit())&&A.isEmptyTitle()&&A.isEmptyPage();"addPage"===C&&R&&B&&I.isLoggedIn()&&f().createAndCommit({userAction:"routerActions.navigateToTab",environment:b,canUndo:!0,perform:e=>{g().y8({environment:b,blocks:[A],transaction:e}),e.postSubmitCallbacks.push((e=>{e||p().dh(b,{analyticsName:"delete",from:"mobile_navigation",block_id:A.id,block_type:"page"})}))}});const E=(null===(_=T.modal)||void 0===_?void 0:_.filter((e=>"web"===e.type)))??[],D=k.state.tabs[y],{rootPage:U,pages:F}=D;let N=!1;switch(U.type){case"native":break;case"web":if(F.length+E.length===0)v().c4({environment:b,redirect:!0,url:(0,n().Gt)(U,!0,{...e.queryParams,...U.queryParams,type:"space-private-pages",from:"mobile_bottom_bar"}),updateMobileTabbedRouterArgs:{tabbedRouterStateAlreadyUpdated:!0}});else{N=!0;const e=(0,s().ZP)();window.history.replaceState({id:e,currentUserId:b.currentUser.id},void 0,(0,n().Gt)(U))}}const V=!0===T.tabs[T.activeTab].nativeRootPageOverrideEnabled,L=E[E.length-1];E.length>1&&i().log({level:"error",from:"tabNavigationActions",type:"navigateToTab",data:{message:`TabbedRouterStore only support 1 modal page for now. ${E.length} is detected`}}),F.forEach(((e,t)=>{if(!V&&t===F.length-1&&!L){let t=(0,n().Gt)(e);return"/blank"===t&&(t="/nativetab/empty"),void v().c4({environment:b,redirect:!N,url:t,updateMobileTabbedRouterArgs:{tabbedRouterStateAlreadyUpdated:!0}})}if(V&&0===t)return;const o=(0,s().ZP)(),i=(0,n().Gt)(e);N?window.history.pushState({id:o,currentUserId:b.currentUser.id},void 0,i):(N=!0,window.history.replaceState({id:o,currentUserId:b.currentUser.id},void 0,i))})),L&&"web"===L.type&&v().c4({environment:b,redirect:!N,url:(0,n().Gt)(L),updateMobileTabbedRouterArgs:{tabbedRouterStateAlreadyUpdated:!0}})}function _(e,t){var o,n;if(c().__(e))return e.device.isMobileNative&&e.device.isAndroid&&u().Z.closeAll(),h({environment:e,tab:"home",nativeRootPageOverrideEnabled:!0}),void(t&&t());Boolean(null===(o=e.mobileNative)||void 0===o?void 0:o.supportsNativeHomeOnPhone())&&(null===(n=e.mobileNative)||void 0===n||n.showNativeHomeTab(t))}},643261:(e,t,o)=>{o.d(t,{eH:()=>y,lF:()=>S,rN:()=>w});o(267602),o(470928),o(241792);var n=()=>o(235484),i=()=>o(799891),r=()=>o(956057),a=()=>o(830968),s=()=>o(855741);const l=(0,o(830742).LS)("importSalesforceReport");var c=()=>o(594546),d=()=>o(763266),u=()=>o(527278),p=()=>o(876822),m=()=>o(138912),f=()=>o(533915),g=()=>o(308186),v=()=>o(782646),h=()=>o(388915),_=()=>o(528918);const b=(0,o(788860).vU)({SalesforceReportSyncFailed:{id:"salesforce.reportSyncFailed",defaultMessage:"Failed to sync Salesforce report: {reportId}. Error: {error}"},SalesforceInvalidReportUrl:{id:"salesforce.invalidReportUrl",defaultMessage:"Invalid Salesforce report URL"},SalesforceAuthorizationError:{id:"salesforce.unauthorizedAccess",defaultMessage:"Unauthorized Error: Invalid Salesforce credentials."},SalesforceAuthenticationSuccess:{id:"salesforce.successfulAuth",defaultMessage:"Successfully established Salesforce connection"},SalesforceAuthenticationInvalidDetails:{id:"salesforce.invalidDetails",defaultMessage:"Invalid Details"}});async function y(e){const{environment:t,from:o,spaceId:r,flowId:a}=e;(0,c().j)({environment:t,event:{eventName:"external_sync_auth",eventProperties:{integration:"salesforce",actionType:"admin_auth_initiated",flowId:a}}});try{if(!t.currentUser.id)return g().PV({message:u().Z.formatMessage(b.SalesforceAuthenticationInvalidDetails)}),void _().x();const e=m().default.integrations.state.find((e=>e.id===n().aW));if(!e)return;const i=await h().Lw({environment:t,integration:e,spaceId:r,from:o});(0,c().j)({environment:t,event:{eventName:"external_sync_auth",eventProperties:{integration:"salesforce",actionType:"admin_auth_status",flowId:a,status:s().x.isSuccess(i)?"success":"failed"}}}),s().x.isFail(i)&&(f().Z.reset(),g().PV({message:u().Z.formatMessage(b.SalesforceAuthorizationError)})),_().x()}catch(l){(0,c().j)({environment:t,event:{eventName:"external_sync_auth",eventProperties:{integration:"salesforce",actionType:"admin_auth_status",flowId:a,status:"failed"}}}),i().log({level:"error",from:"salesforceActions",type:"authenticateWithSalesforce",data:{message:"Failed to authenticate with Salesforce",miscDataToConvertToString:{err:l}}})}}function S(e){const{environment:t,from:o,action:n}=e,{currentSpaceStore:i}=p().default.state;if(!i)return;const a=(0,r().Il)();f().Z.setState({action:n,from:o,flowId:a,open:!0,selectedAccess:"double_auth"}),(0,c().j)({environment:t,event:{eventName:"external_sync_auth",eventProperties:{integration:"salesforce",actionType:"admin_auth_render",flowId:a}}})}async function w(e){const{url:t,environment:o,integration:r,blockStore:s}=e,c=(0,d().NP)(n().aW);if(0===c.length);else{var p,m;const e=(0,a().Tf)({url:t,integration:r}),n=null===(p=e.find((e=>"Id"===e.id)))||void 0===p||null===(p=p.values[0])||void 0===p?void 0:p.toString(),d=null===(m=e.find((e=>"instanceUrl"===e.id)))||void 0===m||null===(m=m.values[0])||void 0===m?void 0:m.toString();if(!n||!d)return void g().UW(u().Z.formatMessage(b.SalesforceInvalidReportUrl));i().log({level:"debug",from:"salesforceActions",type:"startReportImport",data:{miscDataToConvertToString:{spaceId:s.getSpaceId(),parentBlockId:s.id,reportId:n,instanceUrl:d}}});const h=(0,v().Lj)(o,l,{spaceId:s.getSpaceId(),botIds:c.map((e=>e.id)),parentBlockId:s.id,report:{instanceUrl:d.toString(),reportId:n.toString(),reportUrl:t}});for await(const t of h){var f;if("in_progress"!==t.taskStatus)if("success"===t.taskStatus&&i().log({level:"info",from:"salesforceActions",type:"reportImportCompleted",data:{miscDataToConvertToString:{spaceId:s.getSpaceId(),parentBlockId:s.id,reportId:n,instanceUrl:d}}}),"failure"===t.taskStatus||"dead"===t.taskStatus||"timeout_before_execution"===t.taskStatus||"retryable_failure"===t.taskStatus)if(t.error)g().UW(u().Z.formatMessage(b.SalesforceReportSyncFailed,{reportId:n,error:null===(f=t.error)||void 0===f?void 0:f.message}))}}}},203927:(e,t,o)=>{o.d(t,{Nz:()=>g,Rk:()=>m,uE:()=>p});o(267602),o(653476),o(470928),o(241792);var n=()=>o(396136),i=()=>o(513670),r=()=>o(239482),a=()=>o(856546),s=()=>o(465371),l=()=>o(876822),c=()=>o(826955),d=()=>o(957991),u=()=>o(94912);function p(e){const t=e.state;return"page"===t.route.name&&t.route.scrollToBlockId?[t.route.scrollToBlockId]:t.historyState?t.historyState.blockIds:[]}function m(e,t){const o=function(e,t){const o=t.map((t=>c().G.createChildStore(e,{table:n().iU,id:t}))).map((e=>r().eG(e))).filter((t=>{let o=!1;const n=t.slice(1).find((e=>{if("block"===e.table)return e.isTransclusionType()&&(o=!0),e.isNavigableBlock()}));return n&&(n.id===e.id||o)})).map((e=>{const t=e.findIndex((e=>"block"===e.table&&e.isNavigableBlock()));return e.slice(1,t).filter((e=>"block"===e.table&&(0,s().BX)(e)))}));return i().mN(i().xH(o),(e=>e.id))}(e,t);for(const n of o)u().rd({blockId:n.id,state:!0,currentUserId:n.environment.currentUser.id});return o}function f(e,t){const o=function(e,t){const o=t.map((t=>c().G.createChildStore(e,{table:n().iU,id:t,spaceId:e.pointer.spaceId}))).map((e=>r().eG(e))).filter((t=>{const o=t.slice(1).find((e=>"block"===e.table&&e.isNavigableBlock()));return o&&o.id===e.id})).map((e=>{const t=e.findIndex((e=>"block"===e.table&&e.isNavigableBlock()));return e.slice(1,t).filter((e=>{if("block"!==e.table)return!1;const t=e.getParentStore();return"block"===(null==t?void 0:t.table)&&"tab"===(null==t?void 0:t.getType())}))}));return i().mN(i().xH(o),(e=>e.id))}(e,t);for(const i of o){const e=i.getParentStore();var a;if((null==e?void 0:e.table)===n().iU&&"tab"===(null==e?void 0:e.getType()))d().x2({store:e,id:i.id,currentUserId:null===(a=l().default.state.currentUserStore)||void 0===a?void 0:a.id})}return o}async function g(e,t){await async function(e,t){const o=t.map((t=>c().G.createChildStore(e,{table:n().iU,id:t})));await Promise.all(o.map((e=>r().s(e))))}(e,t);const o=i().mN([...m(e,t),...f(e,t)],(e=>e.id));await async function(e){await Promise.all(e.map((e=>a().r(e))))}(o)}},844085:(e,t,o)=>{o.d(t,{Q7:()=>Y,XW:()=>Z,YC:()=>W,Zv:()=>j,_4:()=>q,aB:()=>U,bx:()=>O,hQ:()=>G,hl:()=>K});o(267602),o(470928),o(241792);var n=()=>o(442),i=()=>o(513670),r=()=>o(191003),a=()=>o(275200),s=()=>o(440721),l=()=>o(505462),c=()=>o(105602),d=()=>o(664128),u=()=>o(895310),p=()=>o(32969),m=()=>o(639832),f=()=>o(499823),g=()=>o(297861),v=()=>o(520849),h=()=>o(158083),_=()=>o(656769),b=()=>o(543842),y=()=>o(302353),S=()=>o(121700),w=()=>o(27475),k=()=>o(482162),I=()=>o(826955),C=()=>o(557576),x=()=>o(965903),T=()=>o(127519),M=()=>o(491927);function P(e,t,o,n){const i=(o-t)/o,r=n/10/60,a=r+(3*n/60-r)*Math.min(i*i,1);return e.device.isIOS?Math.ceil(a):a}const A=1e3,R=i().P2((e=>{M().PL(e,{direction:"top"})}),A),B=i().P2((e=>{M().PL(e,{direction:"bottom"})}),A),E=i().P2((e=>{M().PL(e,{direction:"left"})}),A),D=i().P2((e=>{M().PL(e,{direction:"right"})}),A);function U(e){const{environment:t,scroller:o,currentMouseX:n,currentMouseY:i}=e,r=o.getStore();r.measureSize();const a=C().default.state,s=h().Z.state.disableVerticalEdgeScroll||!!a.isActive&&!a.allowVerticalEdgeScroll,l=h().Z.state.disableHorizontalEdgeScroll||!!a.isActive&&!a.allowHorizontalEdgeScroll,c=function(e,t){const{device:o}=e,{clientRect:n}=t.state;let i=n&&n.height?n.height:0;o.isMobile?i*=.2:i*=.1;return i=Math.max(i,20),i}(t,r),d=function(e,t){const{device:o}=e,{clientRect:n}=t.state;let i=n&&n.width?n.width:0;o.isMobile?i*=.2:i*=.08;return i=Math.max(i,20),i}(t,r),{clientRect:u,elementRef:p}=r.state;if(!u||!p.current)return;const m=p.current,f=m.scrollHeight,_=m.scrollWidth,b=m.scrollLeft,S=m.scrollTop;if(o.getOverflowType()!==v().Z.X&&!s){const e=i-u.top;let o,n;y().default.state.phase!==y().i.shown?(o=c,n=(0,g().Y)("supportsNativeBottomBarOverlappingWebView")?u.bottom-y().default.mobileNativeBottomPadding(t)-i:u.bottom-i):(o=.25*y().default.keyboardHeight(),n=u.bottom-y().default.mobileNativeBottomPadding(t)+o-i);const r=0===S,a=S+u.height===f;if(e<c&&!r){const o=P(t,e,c,u.height);m.scrollTo({top:S-o}),o>0&&R(t)}if(n<o&&!a){const e=P(t,n,o,u.height);m.scrollTo({top:S+e}),e>0&&B(t)}}if(o.getOverflowType()!==v().Z.Y&&!l){const e=n-u.left,o=u.right-n,i=0===b,r=b+u.width===_;if(e<d&&!i){const o=P(t,e,d,u.width);m.scrollTo({left:b-o}),o>0&&E(t)}if(o<d&&!r){const e=P(t,o,d,u.width);m.scrollTo({left:b+e}),e>0&&D(t)}}}const F=64,N=64,V=64,L=64;function O(e){const{element:t,scrollerContext:o,vertical:n,horizontal:i,animate:r,centerVertically:a}=e,s=t.getBoundingClientRect();if(n&&null!=o&&o.verticalScroller){const{reveal:e}=n,t=n.paddingToTopEdge||F,i=n.paddingToBottomEdge||N,p=o.verticalScroller,m=p&&p.getClientRect();if(p&&m){const o=m.bottom-i,n=a?m.height/2:0,f=m.top+t+n,g=s.top>f&&s.top<o,v=s.bottom>f&&s.bottom<o,h=s.top<f&&s.bottom>o,_=s.bottom-o,b=s.top-f;var l;if("top"===e){if(!g)null===(l=p.getNode())||void 0===l||l.scrollBy({top:b,left:0,behavior:r?"smooth":"auto"})}else if("bottom"===e){var c;if(!v)null===(c=p.getNode())||void 0===c||c.scrollBy({top:_,left:0,behavior:r?"smooth":"auto"})}else{var d,u;if(!(g||v||h))if(Math.abs(_)<Math.abs(b))null===(d=p.getNode())||void 0===d||d.scrollBy({top:_,left:0,behavior:r?"smooth":"auto"});else null===(u=p.getNode())||void 0===u||u.scrollBy({top:b,left:0,behavior:r?"smooth":"auto"})}}}if(i&&null!=o&&o.horizontalScroller){const{reveal:e}=i,t=i.paddingToLeftEdge||L,n=i.paddingToRightEdge||V,a=o.horizontalScroller,l=a&&a.getClientRect();if(a&&l){const o=l.left+t,i=l.right-n,c=s.left>o&&s.left<i,d=s.right>o&&s.right<i,u=s.left<o&&s.right>i,v=s.right-i,h=s.left-o;var p;if("left"===e){if(!c)null===(p=a.getNode())||void 0===p||p.scrollBy({left:h,top:0,behavior:r?"smooth":"auto"})}else if("right"===e){var m;if(!d)null===(m=a.getNode())||void 0===m||m.scrollBy({left:v,top:0,behavior:r?"smooth":"auto"})}else{var f,g;if(!(c||d||u))if(Math.abs(v)<Math.abs(h))null===(f=a.getNode())||void 0===f||f.scrollBy({left:v,top:0,behavior:r?"smooth":"auto"});else null===(g=a.getNode())||void 0===g||g.scrollBy({left:h,top:0,behavior:r?"smooth":"auto"})}}}}function Z(e){const{handle:t,horizontal:o,vertical:i,animate:r}=e;if(!t)return;const a=(0,n().e)(t);return a?O({vertical:i,animate:r,horizontal:o,element:a,scrollerContext:t.getScrollerContext()}):void 0}function j(e){if(x().default.state.pivot)K([x().default.state.pivot.id],(null==e?void 0:e.animate)??!1);else{K(x().default.state.stores.map((e=>e.id)),(null==e?void 0:e.animate)??!1)}}function K(e,t){const o=p().C.findScrollToSelectablesFromIds(e)[0];if(o){const{disableScrollToRevealHorizontal:e}=o.props;Z({handle:o,vertical:{reveal:"closest"},horizontal:e?void 0:{reveal:"closest"},animate:t})}}let z=function(e){return e[e.top=0]="top",e[e.middle=1]="middle",e[e.bottom=2]="bottom",e[e.natural=3]="natural",e}({});function H(e){let{position:t}=e;const{paddingTop:o}=e;if("editing"!==T().default.state.mode)return;let n=e.paddingBottom;c().Z.find((e=>e.isShown()))&&(n+=f().O);const i=l().get();if(i){const e=a().SD(i.commonAncestorContainer);if(!e)return;const r=a().hI(e).find((e=>e.scrollHeight>e.clientHeight));if(!r)return;const s=l().getRect(i);if(!s||!r)return;const c=r.getBoundingClientRect();if(!(i.startContainer instanceof Text)){const e=s;e.top+=4,e.bottom-=5,e.height-=9}const d=s.top<c.top+o,u=s.bottom>c.bottom-n;if(i.startContainer instanceof Text&&i.startOffset!==i.endOffset)return;if(t===z.natural)if(u)t=z.bottom;else{if(!d)return;t=z.top}if(t===z.top){const e=r.scrollTop+s.top,t=c.top+o;r.scrollTo({top:e-t,behavior:"smooth"})}else if(t===z.bottom){const e=r.scrollTop+s.bottom,t=c.bottom-n;r.scrollTo({top:e-t,behavior:"smooth"})}else if(t===z.middle){const e=r.scrollTop+s.top,t=c.top+c.height/2-10;r.scrollTo({top:e-t,behavior:"smooth"})}}}function q(e){return y().default.mobileNativeBottomPadding(e)+20}function W(e){if(u().Z.isInlineAutocompleteOpen())return!0;if(_().Z.state.open||_().Z.state.willOpen)return!0;if(m().Z.state.open)return!0;if(e.device.isMobileNative&&e.device.isPhone){if(b().Z.state.open){const e=b().Z.state;if("+"!==e.insertionType)return!0;const t=(0,s().O2)(e.textStore,e.oldTextValue,e.isEmptyPageTitle?"":e.insertionType),o=(0,s().ug)(e.textStore,t);if(t&&""!==(null==o?void 0:o.trim()))return!0}if(function(){var e;const t="editing"===T().default.state.mode&&(null===(e=(0,r().QY)(T().default.state.multiSelection))||void 0===e?void 0:e.store);if(t){const e=t.getRecordStoreAtRootPath();if(e instanceof I().G){const t=e.getValue(),o=t&&t.type;return"link_to_page"===o||"link_to_collection"===o}}return!1}())return!0}return!1}function G(e){const t=d().Z.shouldPreventMobileAutoScroll(e),o=q(e);W(e)?H({position:z.top,paddingTop:20+$(),paddingBottom:o+40}):t||S().Z.state.isOpen&&!k().default.state.open||w().Z.state.isOpen||H({position:z.natural,paddingTop:20,paddingBottom:o+40})}function $(){return _().Z.state.willOpen||_().Z.state.open?64:0}const Q=i().IH((e=>{const{device:t}=e;return new(o(435308).default)((()=>t.isMobile&&h().Z.state.isDragging||t.isMobile&&o(172635).Z.state.swiping?v().Z.All:o(424817).Z.getPreventScrollType()),{debugName:"preventScrollTypeStore"})}));function Y(e){return Q(e).state}},278275:(e,t,o)=>{o.d(t,{IB:()=>O,Kf:()=>V,Ky:()=>K,LR:()=>N,LU:()=>q,ML:()=>Z,UT:()=>L,X2:()=>z,qm:()=>j});o(821057);var n=()=>o(730120),i=()=>o(956057),r=()=>o(741633),a=()=>o(899133),s=()=>o(955620),l=()=>o(680146),c=()=>o(956898),d=()=>o(342792),u=()=>o(696459),p=()=>o(824462),m=()=>o(28185),f=()=>o(650996),g=()=>o(236692),v=()=>o(506548),h=()=>o(250625),_=()=>o(750858),b=()=>o(876822),y=()=>o(524434),S=()=>o(379072),w=()=>o(725751),k=()=>o(475335),I=()=>o(147542),C=()=>o(609306),x=()=>o(64572),T=()=>o(625820),M=()=>o(127519),P=()=>o(28162),A=()=>o(231077),R=()=>o(803272),B=()=>o(879952),E=()=>o(970105),D=()=>o(990966),U=()=>o(269299),F=()=>o(348141);const N=6;function V(e){y().KR.isQuickFindEnabled()&&I().Z.state.isOpen?I().Z.closeAndResetMetricsState():C().default.state.open?O({environment:e.environment,reset:!1}):L(e)}function L(e){const{environment:t,isQuickSearch:o,isPublicPageSearch:n,isNewElectronTab:r,query:a}=e,c=i().Il(),d=y().KR.isUnifiedFindDebugToolsEnabled(),u=y().KR.isQuickFindEnabled(),p=d?"nav-local-only":"default",m=Date.now().valueOf(),v=I().Z.state;if(Boolean(o)||"query-args"===e.analyticsFrom)C().default.setState({open:!1,openAsPage:!0,openedTimeMs:m,sessionId:c,isPublicPageSearch:n??!1,searchMode:p});else{if(C().default.state.open||I().Z.state.isOpen)return;if(u&&!d){const o="editing"===M().default.state.mode?M().default.state:void 0,n="sidebar"!==e.analyticsFrom;if(e.shouldUseDeepDiveSurface)if("deep_dive"===v.surface||e.deepFindDomRect){const n=e.deepFindDomRect?e.deepFindStore:"deep_dive"===v.surface?v.store:void 0;if(!n)throw new Error("Expected deepFindStore to be set");void 0!==e.query&&U().createAndCommit({environment:t,userAction:"searchMenuActions.setDeepFindQueryBeforeOpen",canUndo:!0,perform:o=>{E().sO({store:n,value:(0,s().TPx)(e.query),transaction:o,environment:t})}}),e.deepFindDomRect?I().Z.setState({surface:"deep_dive",isOpen:!0,sessionId:c,isNewElectronTab:r??!1,openedTimeMs:m,domRect:e.deepFindDomRect,store:e.deepFindStore,previousTextSelection:o}):I().Z.update((e=>({...e,isOpen:!0,sessionId:c,isNewElectronTab:r??!1,openedTimeMs:m,previousTextSelection:o}))),B().ZH({environment:t}),D().setSelectionAtEnd({store:n})}else{const t=new Error("Deep find surface not set but deep find requested");l().IE(t,{tags:{from:"searchMenuActions",type:"deepFindSurfaceNotSetButDeepFindRequested"},extra:{analyticsFrom:e.analyticsFrom}}),I().Z.update((e=>({...e,isOpen:!0,surface:"default",position:n?"center":"sidebar",query:"",sessionId:c,isNewElectronTab:r??!1,openedTimeMs:m,previousTextSelection:o})))}else D().clear({environment:t}),I().Z.update((e=>({...e,isOpen:!0,surface:"default",position:n?"center":"sidebar",query:"",sessionId:c,isNewElectronTab:r??!1,openedTimeMs:m,previousTextSelection:o})))}else C().default.update((e=>({...e,open:!0,openAsPage:!1,isQuickSearch:!1,openedTimeMs:m,sessionId:c,isPublicPageSearch:n??!1,isNewElectronTab:r,searchMode:p})));R().xv({clearQuery:!1})}if(Boolean(e.doNotTrackOpenSearchEvent)||P().wF(e.environment,{from:e.analyticsFrom,searchSessionId:c}),(!u||d)&&("default"!==p?T().ZP.enableNavigationalMode():T().ZP.disableNavigationalMode(),a&&T().ZP.setState({...T().ZP.state,query:{...T().ZP.state.query,text:a}}),"assistant"===T().ZP.state.mode&&!o)){const o=S().default.getActiveSessionId()||S().default.getNextSessionId(),n=S().default.getActiveSession();f().assistantDependency.load().then((e=>{let{assistantMenuActions:o}=e;o.closeAssistantRightHandSideMenu({environment:t})})),g().trackAssistantOpened(e.environment,{from:"return_to_search",hasQuery:!1,searchSessionId:P().LT(),isReminder:!1,reminderType:void 0,sessionId:o,startTimestamp:(null==n?void 0:n.assistantConfigurationState.sessionStartTimestamp)||Date.now(),transcript:(null==n?void 0:n.evaluator.getTranscript())||[]})}}function O(e){const{environment:t,reset:o}=e;if(C().default.state.open){if(C().default.reset(),k().default.setKeyboardMode(!1),"assistant"===T().ZP.state.mode){const e=S().default.getActiveSession();e&&g().trackAssistantClosed(t,{sessionContext:e,from:"search"})}o&&Z({resultStore:e.searchResultStore,secondaryResultStore:void 0})}}function Z(e){const{resultStore:t,secondaryResultStore:o}=e;T().ZP.reset(),x().default.reset(),t.reset(),o&&o.reset()}function j(e){C().default.update((e=>({...e,open:!0,openAsPage:!1,openedTimeMs:Date.now(),sessionId:i().Il(),searchMode:"full-content"}))),T().ZP.update((t=>({...t,query:{...t.query,filters:(0,a().jl)(t.query.filters,{navigableBlockContentOnly:!1}),text:e}})))}async function K(e){var t,o,n;const{environment:i,shouldResetAssistantStore:r=!0,quickSearchMode:a,device:l,event:c,queryOverrideFromAISuggestedQuestion:d}=e,u=b().default.state.mainEditorCurrentBlockStore??b().default.state.currentSpaceStore,p=d||T().ZP.state.query.text,{isNewElectronTab:m}=C().default.state,v=(null===(t=w().default.state.preferences)||void 0===t?void 0:t.isNewTabSearchEnabled)&&m?h().DJ(c)||"tab":h().DJ(c),k=y().KR.isDeepFindEnabled(),x=y().KR.isQuickFindEnabled(),{sessionId:M,openedTimeMs:P}=x?I().Z.state:C().default.state,R=p.length>N||k&&p.length>0;if(!u||"assistant"===T().ZP.state.mode)return;const{assistantActions:B,assistantMenuActions:E}=await f().assistantDependency.load();r&&B.clearActiveAssistantSession({environment:i});const D=p.length<=N||k?p:void 0,U=!R||!k,F=y().KR.isFullPageAssistantChatEnabled(i.device),V=(0,_().b)(i);let L;if(l.isMobileBrowser?E.openAssistantRightHandSideMenu({environment:i,primeTextInput:D,from:"search"}):F&&!V?(O({environment:i,reset:!1}),E.openFullPageChat({environment:i,primeTextInput:D,shouldFocusInput:U,openInNew:v,deepFindRequestedForNewTabOrWindow:k,query:p,from:"search"})):(T().ZP.update((e=>({...e,mode:"assistant"}))),E.setPrimeTextInput(D,U),await E.closeAssistantRightHandSideMenu({environment:i})),k||R){const e=await B.resetAndInitializeAssistantSession({environment:i,deepFindRequested:k,searchSessionId:M,searchOpenTimestamp:P});R&&(L=e.sessionId,B.commitHumanStep({environment:i,text:(0,s().TPx)(p),sessionId:L,assistantSurfaceType:"searchPane"}),B.updateAssistantTimestampsAfterSessionInitialization({environment:i}))}L||(L=S().default.getActiveSessionId()??S().default.getNextSessionId());const Z=null===(o=S().default.getSessionContext(L))||void 0===o||null===(o=o.assistantConfigurationStore)||void 0===o?void 0:o.state,j=(null===(n=S().default.getSessionContext(L))||void 0===n?void 0:n.evaluator.getTranscript())??[];g().trackAssistantOpened(i,{hasQuery:R,from:e.from,searchSessionId:M,isReminder:!1,reminderType:void 0,sessionId:L,startTimestamp:(null==Z?void 0:Z.sessionStartTimestamp)||Date.now(),transcript:j}),a&&l.isElectron&&A().quickSearchSetSearchAssistantMode(!0)}async function z(e){let{environment:t,query:i}=e;const{assistantDependency:r}=await Promise.resolve().then(o.bind(o,650996)),a=(await r.load()).getCurrentQnaReminderUserSettings();if(!a)return;const s=n().ou.utc();if((0,u().$K)(a.last_exposed_to_ai_qna_at)){if(s.diff(n().ou.fromMillis(a.last_exposed_to_ai_qna_at),"days").days<7)return}const l=a.ai_qna_abandoned_search_reminder_shown_at??[],c=l[l.length-1];if(l.length>=v().JV)return;if((0,u().$K)(c)&&s.diff(n().ou.fromMillis(c),"days").days<2)return;if(i.trim().length<9)return;if(!y().KR.isQnaAbandonedSearchReminderEnabledForUser())return;if("idle"!==v().Pf.state.type)return;v().Pf.setState({type:"loading",query:i});const d=b().default.state.currentUserSettingsStore;if(d){const e={ai_qna_abandoned_search_reminder_shown_at:[...l,s.toMillis()]};U().createAndCommit({environment:t,userAction:"searchMenuActions.setAbandonedSearchReminderShownAt",canUndo:!0,perform:t=>{F().d2({userSettingsStore:d,transaction:t,data:e})}})}return H({environment:t,compareTimestamp:a.last_exposed_to_ai_qna_at,query:i})}async function H(e){const{environment:t,compareTimestamp:n,query:i}=e,{assistantDependency:r}=await Promise.resolve().then(o.bind(o,650996)),a=await r.load(),s=await(0,m().b)({environment:t,type:"keywordSearchToSuggestedQuestions",inputs:[{query:i}]});if(!s)return void v().Pf.setState({type:"idle"});const l=function(){const{currentUserSettingsStore:e}=b().default.state;if(e)return e.getSettingsStore().getKeyStore("last_exposed_to_ai_qna_at").getValue()}();l&&n&&l>n?v().Pf.setState({type:"idle"}):(v().Pf.setState({type:"ready",questions:s}),S().default.endCurrentSession(),a.assistantMenuActions.openAssistantRightHandSideMenu({environment:t,from:"button",isReminder:!0,reminderType:"abandoned_search"}))}async function q(e){const{environment:t,spaceId:o,query:n}=e,a={type:"searchToSuggestedQuestions",query:n},s=i().Il(),l=await p().callStreamApi({eventName:"getCompletion",environment:t,data:{id:(0,d().ZP)(),context:a,model:"openai-gpt-4o-mini",spaceId:o,isSpacePermission:!1,aiSessionId:s,metadata:{}},headers:(0,r().Bb)({spaceId:o})});if("success"!==l.type)return;let u="";if(c().H1.is(l.data))for await(const i of l.data)"success"===i.type&&(u+=i.completion);return u}(0,o(100056).exposeDebugEnvironmentValue)("showQnaReminderOnAbandonedSearch",(e=>t=>H({environment:e,compareTimestamp:Date.now(),query:t})))},897373:(e,t,o)=>{o.d(t,{n:()=>m,y:()=>f});o(670560);var n=()=>o(513670),i=()=>o(696459),r=()=>o(527278),a=()=>o(395362),s=()=>o(824462),l=()=>o(308186),c=()=>o(636340),d=()=>o(224597),u=()=>o(269299);const p=(0,o(788860).vU)({saveFieldError:{id:"securitySAMLSettings.saveSettingsError.message",defaultMessage:"Something went wrong."}});function m(e,t){const{securitySettingsState:o,spaceStore:n}=t,{disablePublicAccess:i,disableGuests:r,disableMoveToSpace:a,disableExport:s,disableSpacePageEdits:l,disablePublicAccessRequests:c,disableTeamCreation:p,disableMembershipRequests:m,disableExternalMembershipRequests:f,disableGuestMembershipRequests:g,enableAiFeature:v,disableTeamGuests:h,enableGuestInviteRequests:_,enableAiTraining:b,zeroRetentionEnabled:y}=o;return u().createAndCommit({userAction:"securitySettingsActions.saveSecuritySettings",environment:e,canUndo:!0,perform:t=>{d().Xr({environment:e,transaction:t,spaceStore:n,disablePublicAccess:i,disableGuests:r,disableMoveToSpace:a,disableExport:s,disableSpacePageEdits:l,disablePublicAccessRequests:c,disableTeamCreation:p,disableMembershipRequests:m,disableExternalMembershipRequests:f,disableGuestMembershipRequests:g,enableAiFeature:Boolean(v),disableTeamGuests:h,enableGuestInviteRequests:_,enableAiTraining:Boolean(b),zeroRetentionEnabled:Boolean(y)})}})}function f(e,t){const{securitySettingsStore:o,spaceStore:d,fields:m}=t,f={...o.state},g={...o.state,...m};o.setState(g),void 0!==m.disableGuests&&(s().updateDisableGuestsOnSpace(e,{spaceId:d.id,newDisableGuestsValue:m.disableGuests,keepExistingGuests:Boolean(m.keepExistingGuests)}).then((e=>{if("failed"===e.type)return l().UW(r().Z.formatMessage(p.saveFieldError)),void o.setState(f)})),a().o8(e,{new_value:m.disableGuests,keep_existing_guests_if_disabled:Boolean(m.keepExistingGuests)})),u().createAndCommit({userAction:"SecuritySettings.saveToggle",environment:e,canUndo:!0,perform:e=>{e.postSubmitCallbacks.push((e=>{if(e)return l().UW(r().Z.formatMessage(p.saveFieldError)),void o.setState(f)}));const t=n().GM({disable_public_access:m.disablePublicAccess,disable_move_to_space:m.disableMoveToSpace,disable_export:m.disableExport,disable_space_page_edits:m.disableSpacePageEdits,disable_public_access_requests:m.disablePublicAccessRequests},(e=>n().kK(e)));c().sW({store:d,data:t,transaction:e});const a=n().GM({enable_guest_invite_requests:m.enableGuestInviteRequests,disable_membership_requests:m.disableMembershipRequests,disable_external_membership_requests:m.disableExternalMembershipRequests,disable_guest_membership_requests:m.disableGuestMembershipRequests},(e=>!(0,i().$K)(e)));Object.keys(a).length>0&&u().applyOperation({store:d,operation:{pointer:d.pointer,path:["settings"],command:"update",args:a},transaction:e})}}),(0,i().$K)(m.enableGuestInviteRequests)&&a().tB(e,{new_value:m.enableGuestInviteRequests})}},453999:(e,t,o)=>{o.d(t,{QZ:()=>be,VJ:()=>Se,DV:()=>Ce,dK:()=>_e,mp:()=>he,bj:()=>pe,sl:()=>ve,BM:()=>ge,YP:()=>Ie,Ah:()=>ye,Od:()=>ce,Cl:()=>fe,Qw:()=>me,MD:()=>de,kB:()=>ke,DQ:()=>we,zO:()=>ue});o(821057),o(492176),o(670560),o(7961),o(267602),o(653476),o(470928),o(749411),o(30005),o(241792),o(228244);var n=()=>o(492788),i=()=>o(506347),r=()=>o(156642),a=()=>o(396136),s=()=>o(81954),l=()=>o(349220),c=()=>o(788860),d=()=>o(513670),u=()=>o(326966),p=()=>o(47443),m=()=>o(360746),f=()=>o(887430),g=()=>o(539410),v=()=>o(141735),h=()=>o(421797),_=()=>o(718959),b=()=>o(505783),y=()=>o(582835),S=()=>o(614027),w=()=>o(527278),k=()=>o(852465),I=()=>o(472753),C=()=>o(32969),x=()=>o(876822),T=()=>o(95718),M=()=>o(279386),P=()=>o(749826),A=()=>o(482162),R=()=>o(826955),B=()=>o(807230),E=(o(667294),()=>o(219727)),D=()=>o(80327),U=()=>o(269299),F=()=>o(830581),N=()=>o(661641),V=()=>o(921981),L=()=>o(631842),O=()=>o(965014),Z=o(785893);function j(e){const{sizeRange:t,asyncModal:o}=e,n=(0,E().O7)(),i=(0,Z.jsx)(F().vI,{iconAndTitle:(0,Z.jsx)(F().kC,{iconGroup:D().j,title:(0,Z.jsx)(c()._H,{id:"deleteBlocksModal.title",defaultMessage:"Delete content?"})}),description:(0,Z.jsx)(c()._H,{id:"deleteBlocksModal.description",defaultMessage:"You can delete existing blocks but you wonâ€™t be able to add new content until you upgrade"})}),r=(0,Z.jsx)(F().a6,{layout:"vertical",primaryButtons:[{buttonType:"destructive",label:(0,Z.jsx)(c()._H,{id:"deleteBlocksModal.delete",defaultMessage:"Delete"}),onClick:()=>o.resolve("delete")}],secondaryButtons:[{buttonType:"secondary",label:(0,Z.jsx)(N().q,{colorName:"primary",children:(0,Z.jsx)(c()._H,{id:"deleteBlocksModal.upgrade",defaultMessage:"Upgrade plan"})}),onClick:()=>{O().y(n,{from:"delete_blocks_modal",upsell:{type:"product",product:"plus",limit:{type:"none"}}}),o.resolve("upgrade")}}]});return(0,Z.jsx)(F().sR,{header:i,footer:r,sizeRange:t})}var K=()=>o(548812),z=()=>o(18281),H=()=>o(897257),q=()=>o(8101),W=()=>o(824462),G=()=>o(384667),$=()=>o(236087),Q=()=>o(611253),Y=()=>o(282662),J=()=>o(332542),X=()=>o(82937),ee=()=>o(497065),te=()=>o(844085),oe=()=>o(879952),ne=()=>o(102182),ie=()=>o(957991),re=()=>o(990966),ae=()=>o(663366),se=()=>o(188517);const le=(0,c().vU)({deletePages:{id:"action.deletePages.snackBarMessage",defaultMessage:"Moved to Trash"}});function ce(e){var t,o;const{store:n,transaction:i}=e,r=C().C.findSelectablesFromStore(n).find((e=>Boolean(e.props.onRemove)));null==r||null===(t=(o=r.props).onRemove)||void 0===t||t.call(o,{transaction:i})}function de(e){const{blocks:t,transaction:o}=e;if(1===t.length){const e=t[0];e&&k().PF(e)&&ce({store:e,transaction:o})}}function ue(e){const t=C().C.findAllSelectablesFromIds(e.map((e=>e.id)));for(const o of t)o.getSelectableStore().setState({...o.getSelectableStore().state,showActionIsInFlight:!0})}function pe(e){const t=C().C.findAllSelectablesFromIds(e.map((e=>e.id)));for(const o of t)o.getSelectableStore().setState({...o.getSelectableStore().state,showActionIsInFlight:!1})}async function me(e){var t;const{environment:o,blocks:n,shouldCheckSuggestEdit:i,overrideRemoveBlockFunc:s}=e,c=x().default.state.currentSpaceViewStore,u=Boolean(null==c||null===(t=c.getSettings())||void 0===t?void 0:t.seen_delete_blocks_modal),p=(0,B().ww)(o),h=null==c?void 0:c.getSpaceId(),_=H().subscriptionDataStoreInstance.state,S=await(h&&_?(0,z().DI)(o,h,_):1);if((0,K().vT)(S)&&!p&&!u){const e=await async function(e){const t=x().default.state.currentSpaceViewStore;return await L().o.showAsyncModal((o=>(0,Z.jsx)(V().c,{isOpen:o.isOpen,onDismiss:()=>{o.resolve("dismiss")},onClosed:()=>{t&&U().createAndCommit({userAction:"DeleteBlocksModal.showDeleteBlocksModal",environment:e,canUndo:!0,perform:e=>{U().applyOperation({store:t,operation:{pointer:t.pointer,path:["settings"],command:"update",args:{...t.getSettings(),seen_delete_blocks_modal:!0}},transaction:e})}})},areaConstraint:{width:{type:"fixed",length:300}},render:e=>{let{sizeRange:t}=e;return(0,Z.jsx)(j,{sizeRange:t,asyncModal:o})}})))}(o);if("delete"!==e)return}let k=n;if(n.length>0&&i){if("suggest"===M().MT.getMode(n[0])){const e=n.filter((e=>(0,b().xU)({blockStore:e,currentUser:o.currentUser}))),t=await v().F.formulas.load();U().createAndCommit({userAction:"selectableBlockActions.removeBlocksWithMaybeConfirmation.suggestRemoveBlocks",environment:o,canUndo:!0,perform:i=>{g().LC({environment:o,transaction:i,blockStores:n.filter((t=>!e.includes(t)&&!(0,T().Eo)(t)&&!(0,r().S9)((0,l().TO)(t.getType())))),formulasModule:t})}}),k=e}}let C=!0;const R=[];for(const r of k){const e=I().R.findBlockFromStore(r);if(e&&d().mf(e.handleRemoveBlockFromComment)){if(await e.handleRemoveBlockFromComment())continue}else if(e&&d().mf(e.canRemoveBlock)){const t=await e.canRemoveBlock();if(!t.canRemove)return;C=t.canUndo}const t=await m().NN({environment:o,block:r,action:"delete"});if("user_canceled"===t)return;t.length>1?R.push(...t):R.push(r)}if(0===R.length)return;const E=R[0],D=(0,f().fm)(E)??(0,y().Ll)(E,o);if(D&&(0,y().wP)({collectionContextStore:D,blockStore:E})){if(!(await $().VP({environment:o,blocks:R,canUndo:C})))return}else{const{serverCommitResult:e}=U().createAndCommit({userAction:"selectableBlockActions.removeBlocksWithMaybeConfirmation",environment:o,canUndo:C,perform:e=>{fe({environment:o,blocks:R.filter((e=>!(0,T().Eo)(e))),transaction:e,overrideRemoveBlockFunc:s})}});await e}const{currentSpaceStore:F}=x().default.state;if(F&&R.some((e=>e.isPageBlock()))){ne().d4({item:{label:w().Z.formatMessage(le.deletePages)},undoFunc:()=>{for(const e of R)W().callApi({eventName:"restoreBlock",environment:o,data:{pointer:{table:a().iU,id:e.id,spaceId:e.pointer.spaceId||F.id}}})}});const e=x().default.state.currentUserSettingsStore;e&&ae().Ts({experimentStore:P().default,currentSpaceStore:F,currentUserSettingsStore:e,intl:w().Z.getIntl(),environment:o})}R.some((e=>{var t;return e.id===(null===(t=A().default.peekTargetStore.state)||void 0===t?void 0:t.id)}))&&X().xv({environment:o,from:void 0})}function fe(e){const{environment:t,blocks:o,transaction:n,preventClearSelection:i,overrideRemoveBlockFunc:a}=e,l=o[0],c=function(e){const t=C().C.getMembersByDOMOrder({filter:()=>!0}),o=d().cx(t,(t=>t.props.store===e)),n=t[o];if(!n)return;const i=n.getContextSelectableContainer(),r=d().tP(t,0,o),a=d().dF(r,(e=>e.props.canSelect&&e.getContextSelectableContainer()===i));if(a)return a.props.store;const s=d().tP(t,o+1).find((e=>Boolean(e.props.canSelect&&e.getContextSelectableContainer()===i)));if(s)return s.props.store}(l);!function(e){const{environment:t,blockStore:o,entryPointName:n}=e,i=new(se().GD)({environment:t,userFlow:"user_flow_delete_block",entryPointName:n,timeoutMs:90*u().C0});if(i.isDisabled())return;const r=()=>{o.pathIsDead()&&i.succeed()};i.postFinishCallbacks.push((()=>{o.removeListener(r)})),o.addListener(r)}({environment:t,blockStore:l,entryPointName:n.getUserActionForAnalyticsPurposesOnly()||"selectableBlockActions.removeBlocks"});for(const r of o)a?a(r,n):ce({store:r,transaction:n});if(i||(oe().ZH({environment:t}),oe().Fp({pivot:c})),h().Zi3({environment:t,blocks:o,publicEditMode:void 0})||h().zNC({environment:t,blocks:o,publicEditMode:void 0})||h().OOv({environment:t,blocks:o,publicEditMode:void 0})||o.some((e=>{var t;return e.getType()===r().Ti.transclusionContainer||(null===(t=e.getAssociatedCollectionStore())||void 0===t?void 0:t.isPageTreeCollection())}))){n.postSubmitCallbacks.push((e=>{e||W().callApi({eventName:"deleteBlocks",environment:t,data:{blocks:o.map((e=>({id:e.id,spaceId:(0,s().J)(e.pointer.spaceId)}))),permanentlyDelete:!1}})}));for(const e of o){const{app_id:o,app_config_uri:i}=e.getFormat();o&&i&&q().Cu(t,{block_id:e.id,app_id:o,app_config_uri:i}),J().zo({blockStore:e,transaction:n})}ee().CZ({environment:t,blocks:o})}i||re().clear({environment:t})}function ge(e){const{environment:t,blocksToInsert:o,target:n,transaction:i,replaceEmptyTextBlock:r,preventSetSelection:a}=e;let s=_().RM();if(!s){const{route:e}=t.RouterStore.state;"chat"===e.name&&(s=n.at(0))}const l=s;if(!l)throw new Error("No root store.");let c;if(n.length>0){const e=n.at(-1);let a=e;if(Boolean(o.find((e=>e.isType("column_list"))))){const t=null==e?void 0:e.findRecordStoreUIAncestor((e=>e&&e instanceof R().G&&e.isType("column_list"))).ancestor;t&&t instanceof R().G&&(a=t)}const s=C().C.find((e=>e.props.store===a&&e.props.canInsertBelow&&e.props.onInsertBelow));if(s&&s.props.onInsertBelow)c=d().oA(s.props.onInsertBelow({insertStores:o,transaction:i})),r&&e&&e.isEmptyTextBlock()&&fe({environment:t,blocks:[e],transaction:i});else{c=d().d9(o).reverse().map((e=>Y().Ce({parentStore:l.getContentStore(),prependStore:e,transaction:i}).childStore))}}else if(l.isCollectionView()){const e=I().R.findCollectionViewBlockFromStore(l);if(!e)throw new Error("No collection view found.");{const n=e.collectionContextStore,r=n.collectionStore();if(r)for(const e of o)G().mp({environment:t,store:e,collectionStore:r,collectionContextStore:n,shouldCoerce:!0,groupsPointer:[],transaction:i});c=[]}}else{const e=l.getContentStore();c=o.map((t=>Y().R3({parentStore:e,appendStore:t,transaction:i}).childStore))}return Boolean(a)||(c=c.flatMap((e=>e.isType("column_list")?e.getContentStores().flatMap((e=>e.getContentStores())):[e])),oe().Z5({environment:t,stores:c})),c}function ve(e){const{environment:t,selection:o,transaction:n,preventSetSelection:i}=e,{blocks:r}=e,a=_().RM();if(!a)throw new Error("No root store.");if(o.length>0){const e=o[0],a=C().C.find((t=>t.props.store===e&&t.props.canInsertAbove&&t.props.onInsertAbove));if(!a||!a.props.onInsertAbove)throw new Error("No Selectable found.");const s=a.props.onInsertAbove({insertStores:r,transaction:n});return Boolean(i)||oe().Z5({environment:t,stores:s}),s}{const e=a.getContentStore(),o=r.map((t=>Y().R3({parentStore:e,appendStore:t,transaction:n}).childStore));return Boolean(i)||oe().Z5({environment:t,stores:o}),o}}function he(e){const{blocks:t}=e,o=t[0];if(o){const t=C().C.findSelectableFromStore(o);t&&t.props.onEnter&&t.props.onEnter(e)}}function _e(e){const t=e.blocks[0],{blockLocationOfTargetBlock:o}=e,n=I().R.find((e=>"embed"===e.renderedType&&e.getBlockStore().id===t.id&&(!o||e.getBlockLocation()===o)));if(n&&n.canRenderFullScreen()){const e=n.getFullScreenNodeRect();if(e){const o=e.width/e.height;Q().ui({environment:n.environment,renderFullScreenNode:n.renderFullScreenNode,fullScreenNodeRect:e,contentAspectRatio:o,blockStore:t})}}}function be(e){let t;e.blocks.find((e=>{const o=I().R.findBlockFromStoreWithMethod(e,"activate");return!!o&&(t=o,!0)})),t&&t.activate&&t.activate()}function ye(e){e.blocks.forEach((t=>{const o=t.getParentStore();o&&o.table===a().iU&&o.getType()===r().Ti.tab&&ie().x2({store:o,id:t.id,currentUserId:e.environment.currentUser.id})}))}function Se(e){const t=e.blocks[0],o=I().R.findBlockFromStoreWithMethod(t,"caption");o&&o.caption()}function we(e,t){const o=d().oA(C().C.findSelectablesFromIds(t)).map((e=>e.props.store));oe().Z5({environment:e,stores:o})}function ke(e,t){const{blockId:o,animate:n}=t;let i=C().C.findScrollToSelectablesFromIds([o]),r=i[0];if(!r){const e=x().default.state.currentSpaceStore;if(!e)return;const t=R().G.createChildStore(e,{id:o,table:a().iU}).getParentId();t&&(i=C().C.findSelectablesFromIds([t]),r=i[0])}r&&(te().XW({handle:i[0],vertical:{reveal:"top"},horizontal:{reveal:"closest"},animate:n}),oe().Z5({environment:e,stores:i.map((e=>e.props.store))}))}function Ie(e){const{environment:t,blocks:o}=e,n=o[0].findRecordStoreUIAncestor((e=>e instanceof R().G&&e.isCollectionView())).ancestor;n&&p()._c({environment:t,store:n,visitType:S().vu.Link,pageVisitSource:i().tY.Expand})}function Ce(e){const{environment:t,insertedStores:o,isCreated:i}=e;i?n().default.afterNextFlush((()=>{const e=o[0];if(!e)return;const n=I().R.findBlockFromStoreWithMethod(e,"handleCreated");var i;n?null===(i=n.handleCreated)||void 0===i||i.call(n):(oe().Ys({environment:t,store:e}),oe().Db(t))})):oe().Z5({environment:t,stores:o})}},879952:(e,t,o)=>{o.d(t,{$Y:()=>L,Af:()=>O,BK:()=>F,Ch:()=>ae,DI:()=>X,Db:()=>W,FC:()=>te,Fp:()=>Z,Jy:()=>re,KX:()=>B,W7:()=>z,Ys:()=>H,Z5:()=>K,ZH:()=>$,aw:()=>V,e2:()=>J,eP:()=>q,hn:()=>ie,ji:()=>U,oj:()=>D,td:()=>oe,w5:()=>ne,yu:()=>G,zJ:()=>Q});o(670560),o(267602),o(653476),o(30005),o(241792),o(228244);var n=()=>o(220427),i=()=>o(492788),r=()=>o(608352),a=()=>o(426546),s=()=>o(513670),l=()=>o(932753),c=()=>o(594546),d=()=>o(582835),u=()=>o(590162),p=()=>o(321930),m=()=>o(465371),f=()=>o(677556),g=()=>o(352761),v=()=>o(32969),h=()=>o(156958),_=()=>o(881688),b=()=>o(543934),y=()=>o(639832),S=()=>o(27762),w=()=>o(797522),k=()=>o(965903),I=()=>o(445264),C=()=>o(236087),x=()=>o(295703),T=()=>o(627817),M=()=>o(844085),P=()=>o(990966),A=()=>o(94912),R=()=>o(269299);function B(){const e=k().default.getCurrentDefaultContainer();if(e){return v().C.getMembersByDOMOrder({filter:t=>t.getContextSelectableContainer()===e&&t.props.canSelect}).map((e=>e.props.store))}return[]}function E(e){const t=k().default.state.stores,o=k().default.state.pivot,n=s().oA(s().zu(t,o));let i;i=o===s().Z$(t)?t[t.length-2]:t[1],K({environment:e,stores:n,pivot:i})}function D(e){return U(e)?z.TOGGLE:F()?z.MULTI_SELECT_FROM_FIRST_SELECTED_STORE:z.SELECT}function U(e){const t=u().y();return e.device.isMac?t.shift&&t.command:t.shift&&t.option}function F(){return u().y().shift}function N(e){e.sort(((e,t)=>(0,n().Z)(v().C.findNodeFromStore(e),v().C.findNodeFromStore(t))))}function V(e){const t=new Array(e.length);return v().C.forEach((o=>{if(o.props.canSelect){const n=e.indexOf(o.props.store);if(n>=0){const e=o.getNode();e&&(t[n]=e)}}})),e.filter(((o,n)=>{const i=t[n];return o&&!e.some(((e,o)=>{const n=t[o];return Boolean(n&&n!==i&&i&&n.contains(i))}))}))}function L(e){k().default.setState({...k().default.state,phase:e.phase}),e.phase===k().SelectionPhase.Editing||e.preventClearEditingText||P().clear({preventDismissMobileKeyboard:e.preventDismissMobileKeyboard,environment:e.environment})}function O(e){const{stores:t}=e,o=k().default.state.stores,n=s().G0(t,o);n.length===t.length&&n.length===o.length||k().default.setState({...k().default.state,stores:e.stores}),t.length>0&&(l().wG(),_().Mp(t)||h().MO())}function Z(e){k().default.setState({...k().default.state,pivot:e.pivot})}function j(e){k().default.setState({...k().default.state,multiSelectBoundaryStore:e.multiSelectBoundaryStore})}function K(e){const{environment:t}=e,o=V(e.stores);O({stores:o}),L({environment:e.environment,phase:e.phase||k().SelectionPhase.Selected}),1===o.length&&function(e){var t;const o=e.anchor,n=null===(t=v().C.findSelectableFromStore(o))||void 0===t?void 0:t.getNode();let i;n&&(i=k().default.getDefaultContainerFromTarget(n)),k().default.setState({...k().default.state,anchor:o,anchorContainer:i})}({anchor:o[0]});const n=e.pivot||o[0];Z({pivot:n});if(j({multiSelectBoundaryStore:e.multiSelectBoundaryStore}),i().default.afterNextFlush((()=>{N(o)})),e.phase===k().SelectionPhase.Editing&&n)if(t.device.isMobile)M().hQ(t);else if(!t.device.isMobileBrowser){const e=v().C.findScrollToSelectableFromStore(n);e&&M().XW({handle:e,vertical:{reveal:"closest"},horizontal:e.props.disableScrollToRevealHorizontal?void 0:{reveal:"closest"}})}}let z=function(e){return e[e.SELECT=0]="SELECT",e[e.TOGGLE=1]="TOGGLE",e[e.MULTI_SELECT_FROM_FIRST_SELECTED_STORE=2]="MULTI_SELECT_FROM_FIRST_SELECTED_STORE",e[e.MULTI_SELECT_FROM_BOUNDARY=3]="MULTI_SELECT_FROM_BOUNDARY",e}({});function H(e){void 0===e.selectMode&&(e.selectMode=z.SELECT);const{multiSelectBoundaryStore:t,stores:o}=k().default.state,n=function(e,t){const{multiSelectBoundaryStore:o}=k().default.state;if(o&&e===z.MULTI_SELECT_FROM_BOUNDARY){var n,i;const e=null===(n=v().C.findSelectableFromStore(o))||void 0===n?void 0:n.props.groupsPointer,a=null===(i=v().C.findSelectableFromStore(t))||void 0===i?void 0:i.props.groupsPointer;if((e||a)&&(!e||!a||(0,r().KW)(e)!==(0,r().KW)(a)))return z.TOGGLE}return e!==z.MULTI_SELECT_FROM_BOUNDARY||o?e:z.TOGGLE}(e.selectMode,e.store);switch(n){case z.TOGGLE:s().q9(o,e.store)?K({environment:e.environment,stores:s().zu(o,e.store)}):K({environment:e.environment,stores:s().G0(o,[e.store]),multiSelectBoundaryStore:e.store});break;case z.MULTI_SELECT_FROM_BOUNDARY:{let n=s().d9(o);const i=B(),r=i.indexOf(e.store);s().q9(n,e.store)||n.push(e.store);const a=i.indexOf(t),l=Math.min(r,a),c=Math.max(r,a),d=s().tP(i,l,c);n=s().G0(n,d),K({environment:e.environment,stores:n,multiSelectBoundaryStore:e.store});break}case z.MULTI_SELECT_FROM_FIRST_SELECTED_STORE:{let t=s().d9(o);const n=B(),i=n.indexOf(e.store);s().q9(t,e.store)||t.push(e.store);const r=o[0];if(r){const e=n.indexOf(r);if(e>=0){const o=s().tP(n,i,e);t=s().G0(t,o)}}const a=s().Z$(o);if(a){const e=n.indexOf(a);if(e>=0){const o=s().tP(n,e,i);t=s().G0(t,o)}}K({environment:e.environment,stores:t,multiSelectBoundaryStore:e.store});break}case z.SELECT:default:s().q9(o,e.store)||K({environment:e.environment,stores:[e.store],multiSelectBoundaryStore:e.store})}L({environment:e.environment,phase:k().SelectionPhase.Selected})}function q(e){const{environment:t,store:o}=e;if(o)if(O({stores:[o]}),Z({pivot:void 0}),L({environment:t,phase:k().SelectionPhase.Editing}),j({multiSelectBoundaryStore:void 0}),t.device.isMobile)M().hQ(t);else if(!t.device.isMobileBrowser){const e=v().C.findScrollToSelectableFromStore(o);e&&M().XW({handle:e,vertical:{reveal:"closest"},horizontal:e.props.disableScrollToRevealHorizontal?void 0:{reveal:"closest"}})}}function W(e){const{stores:t}=k().default.state,o=t[0];if(!o)return;const n=v().C.findSelectableFromStore(o);if(n&&n.props.onEditText){const t=n.props.onEditText;R().createAndCommit({userAction:"selectionActions.editSelection",environment:e,canUndo:!0,perform:e=>{t({isAtStartOfLine:!1,isClick:!1,transaction:e})}})}}function G(e){const{environment:t,stores:o}=e,n=s().Z$(o);if(!n)return;const i=v().C.findSelectableFromStore(n);if(i&&i.props.onEditText){const e=i.props.onEditText;R().createAndCommit({userAction:"selectionActions.editStoresAtEnd",environment:t,canUndo:!0,perform:t=>{e({isAtStartOfLine:!1,isClick:!1,transaction:t})}})}}function $(e){let{environment:t,preventDismissMobileKeyboard:o}=e;O({stores:[]}),L({environment:t,phase:k().SelectionPhase.Selected,preventDismissMobileKeyboard:o}),j({multiSelectBoundaryStore:void 0}),T().xv(),y().Z.state.open&&((0,c().j)({environment:t,event:{eventName:"close_slash_menu",eventProperties:{id:y().Z.state.id,source:"click_outside"}}}),b().xv({environment:t,dismissed:!0})),x().xv()}function Q(e){const{environment:t}=e,o=k().default.state.stores;N(o);const n=k().default.state.pivot,i=o[0];if(i)if(e.shiftKey)if(n===i){const n=(0,p().Bj)({includeNonSelectableListContainer:!1}),r=(0,p().v5)(i,n.children),{prev:l,parent:c}=e.altKey?(0,a().Sr)(n,r):(0,a().YL)(n,r);if(l){const e=l.value.store;K({environment:t,stores:s().G0(o,[e]),pivot:e,multiSelectBoundaryStore:e})}else if(c){const e=c.value.store;K({environment:t,stores:s().G0(o.filter((e=>!(0,a().Yz)(c,(t=>t.store===e)))),[e]),pivot:e,multiSelectBoundaryStore:e})}}else E(e.environment);else{const o=(0,p().Bj)({includeNonSelectableListContainer:!1}),n=(0,p().v5)(i,o.children),{prev:r,parent:s}=e.altKey?(0,a().Sr)(o,n):(0,a().YL)(o,n);if(r){const e=r.value.store;K({environment:t,stores:[e],pivot:e,multiSelectBoundaryStore:e})}else if(s){const e=s.value.store;K({environment:t,stores:[e],pivot:e,multiSelectBoundaryStore:e})}else K({environment:t,stores:[i],pivot:i,multiSelectBoundaryStore:i})}else if(n)K({environment:t,stores:[n],multiSelectBoundaryStore:n});else{const e=B(),o=s().Z$(e);o&&K({environment:t,stores:[o],pivot:o,multiSelectBoundaryStore:o})}Y()}function Y(){const e=k().default.state.pivot||k().default.state.stores[0],t=v().C.findScrollToSelectableFromStore(e);t&&M().XW({handle:t,vertical:{reveal:"top"},horizontal:t.props.disableScrollToRevealHorizontal?void 0:{reveal:"closest"}})}function J(e){const t=k().default.state.stores;N(t);const o=k().default.state.pivot;if(0!==t.length&&o)if((0,m().BX)(o)&&I().Z.isOpen(o.id))K({environment:e,stores:[o],pivot:o,multiSelectBoundaryStore:o}),A().rd({blockId:o.id,state:!1,currentUserId:e.currentUser.id});else if((0,d().bX)(o))C().e2(o);else{const t=(0,p().Bj)({includeNonSelectableListContainer:!1}),n=(0,p().v5)(o,t.children),i=(0,a().ub)(n);if(i){const t=i.value.store;K({environment:e,stores:[t],pivot:t,multiSelectBoundaryStore:t})}else K({environment:e,stores:[o],pivot:o,multiSelectBoundaryStore:o})}else if(o)K({environment:e,stores:[o],multiSelectBoundaryStore:o});else{const t=B(),o=s().Z$(t);o&&K({environment:e,stores:[o],pivot:o,multiSelectBoundaryStore:o})}Y()}function X(e){const{environment:t}=e,o=k().default.state.stores;N(o);const n=k().default.state.pivot,i=s().Z$(o);if(i)if(e.shiftKey)if(n===i){const e=(0,p().Bj)({includeNonSelectableListContainer:!1}),n=(0,p().v5)(i,e.children),{next:r}=(0,a().Xf)(e,n);if(r){const e=r.value.store;K({environment:t,stores:s().G0(o,[e]),pivot:e,multiSelectBoundaryStore:e})}}else E(t);else{const o=(0,p().Bj)({includeNonSelectableListContainer:!1}),n=(0,p().v5)(i,o.children),{next:r}=e.altKey?(0,a().Xf)(o,n):(0,a().lj)(o,n);if(r){const e=r.value.store;K({environment:t,stores:[e],pivot:e,multiSelectBoundaryStore:e})}else K({environment:t,stores:[i],pivot:i,multiSelectBoundaryStore:i})}else if(n)K({environment:t,stores:[n],multiSelectBoundaryStore:n});else{const e=B()[0];e&&K({environment:t,stores:[e],pivot:e,multiSelectBoundaryStore:e})}ee()}function ee(){const e=k().default.state.pivot||s().Z$(k().default.state.stores);if(e){const t=v().C.findScrollToSelectableFromStore(e);t&&M().XW({handle:t,vertical:{reveal:"bottom"},horizontal:t.props.disableScrollToRevealHorizontal?void 0:{reveal:"closest"}})}}function te(e){const t=k().default.state.stores;N(t);const o=k().default.state.pivot;if(0!==t.length&&o)if((0,m().BX)(o)&&!I().Z.isOpen(o.id))K({environment:e,stores:[o],pivot:o,multiSelectBoundaryStore:o}),A().rd({blockId:o.id,state:!0,currentUserId:e.currentUser.id});else if((0,d().bX)(o))C().FC(o);else{const t=(0,p().Bj)({includeNonSelectableListContainer:!1}),n=(0,p().v5)(o,t.children),i=(0,a().si)(n);if(i){const t=i.value.store;K({environment:e,stores:[t],pivot:t,multiSelectBoundaryStore:t})}else K({environment:e,stores:[o],pivot:o,multiSelectBoundaryStore:o})}else if(o)K({environment:e,stores:[o],multiSelectBoundaryStore:o});else{const t=B()[0];t&&K({environment:e,stores:[t],pivot:t,multiSelectBoundaryStore:t})}ee()}function oe(e){const t=B();K({environment:e,stores:t,pivot:t[0]})}function ne(e){const t=B()[0];if(t){K({environment:e,stores:[t],pivot:t,multiSelectBoundaryStore:t});const o=v().C.findScrollToSelectableFromStore(t);o&&M().XW({handle:o,vertical:{reveal:"top"},horizontal:o.props.disableScrollToRevealHorizontal?void 0:{reveal:"closest"}})}}function ie(e){const t=B(),o=t[t.length-1];if(o){K({environment:e,stores:[o],pivot:o,multiSelectBoundaryStore:o});const t=v().C.findScrollToSelectableFromStore(o);t&&M().XW({handle:t,vertical:{reveal:"bottom"},horizontal:t.props.disableScrollToRevealHorizontal?void 0:{reveal:"closest"}})}}function re(){const e=performance.now(),t=new Map,o=new Map;v().C.forEach((e=>{const n=e.getNode();if(n&&n instanceof Element){const i=n.getBoundingClientRect();t.set(e,i),o.set(n,i)}}));const n=new Map;g().Z.forEach((e=>{const t=e.getNode();t&&t instanceof Element&&n.set(e,t.getBoundingClientRect())}));const i=new Map;f().Z.forEach((e=>{const t=e.getNode();t&&t instanceof Element&&i.set(e,t.getBoundingClientRect())})),w().default.setState({...w().default.state,selectableRectMap:t,selectableContainerRectMap:n,selectableElementRectMap:o,lastUpdate:e}),S().default.setState({...S().default.state,dropTargetRectMap:i})}const ae=s().P2(re,200)},102182:(e,t,o)=>{o.d(t,{C1:()=>m,d4:()=>c,d8:()=>p,lB:()=>d,mz:()=>u,oV:()=>s,rN:()=>l});o(667294);var n=()=>o(543172),i=()=>o(312446),r=()=>o(584989),a=o(785893);function s(e){const t={...e,key:(0,n().ZP)()};r().ZP.setState({...r().ZP.state,currentItem:t}),"keep"!==t.durationMs&&setTimeout((()=>{r().ZP.state.currentItem===t&&"keep"!==r().ZP.state.currentItem.durationMs&&r().ZP.setState({...r().ZP.state,currentItem:void 0,shouldReset:!0})}),t.durationMs??r().Ty)}function l(){r().ZP.setState({...r().ZP.state,currentItem:void 0})}function c(e){const{item:t,undoFunc:o}=e;s({...t,right:(0,a.jsx)(i().ow,{onUndo:o})})}function d(e){const{item:t}=e;s({...t,right:(0,a.jsx)(i().k$,{})})}function u(e){const{item:t}=e;s({...t,right:(0,a.jsx)(i().oR,{})})}function p(e){const{blockToOpenStore:t,item:o,performUndo:n,onOpenBlock:r}=e;s({...o,right:(0,a.jsx)(i().wr,{blockToOpenStore:t,performUndo:n,onOpenBlock:r})})}function m(){r().ZP.state.shouldReset&&r().ZP.reset()}},224597:(e,t,o)=>{o.d(t,{XM:()=>Ke,mo:()=>Ze,wh:()=>ke,Xv:()=>ze,Ns:()=>Ne,LV:()=>$e,j:()=>De,bf:()=>Fe,eX:()=>Ie,L5:()=>Me,y3:()=>Te,_u:()=>Pe,O2:()=>Oe,FB:()=>Ge,Y5:()=>Ve,lF:()=>Le,oy:()=>qe,ys:()=>Ee,wg:()=>We,_Q:()=>He,ce:()=>Ce,jF:()=>je,Xr:()=>Be,$F:()=>Ae,OF:()=>Re});o(821057),o(670560),o(267602),o(653476),o(470928),o(241792);var n=()=>o(506347),i=()=>o(799891),r=()=>o(431595),a=()=>o(956057),s=()=>o(933868),l=()=>o(217465),c=()=>o(396136),d=()=>o(255933),u=()=>o(125571),p=()=>o(306164),m=()=>o(691970),f=()=>o(657120),g=()=>o(245015),v=()=>o(513670),h=()=>o(792409),_=()=>o(839002),b=()=>o(632314),y=()=>o(696459),S=()=>o(830742);const w=(0,S().LS)("deleteSpace"),k=(0,S().LS)("moveToSpace");var I=()=>o(47443),C=()=>o(106502),x=()=>o(650996),T=()=>o(205228),M=()=>o(632775),P=()=>o(594546),A=()=>o(572623),R=()=>o(274879),B=()=>o(614027),E=()=>o(527278),D=()=>o(6006),U=()=>o(122479),F=()=>o(345918),N=()=>o(91502),V=()=>o(485491),L=()=>o(741636),O=()=>o(686350),Z=()=>o(384334),j=()=>o(772529),K=()=>o(815532),z=()=>o(105649),H=()=>o(385875),q=()=>o(876822),W=()=>o(524434),G=()=>o(804217),$=()=>o(749826),Q=()=>o(9599),Y=()=>o(63317),J=()=>o(826955),X=()=>o(576387),ee=()=>o(419157),te=()=>o(912732),oe=()=>o(155055),ne=()=>o(395362),ie=()=>o(824462),re=()=>o(917801),ae=()=>o(308186),se=()=>o(782646),le=()=>o(405851),ce=()=>o(13382),de=()=>o(282662),ue=()=>o(528918),pe=()=>o(812324),me=()=>o(784234),fe=()=>o(838347),ge=()=>o(636340),ve=()=>o(497065),he=()=>o(96271),_e=()=>o(897373),be=()=>o(145284),ye=()=>o(269299),Se=()=>o(13750);const we=(0,o(788860).vU)({deletingWorkspace:{id:"spaceActions.deletingWorkspace.loadingMessage",defaultMessage:"Deleting workspaceâ€¦"},goOnlineCreateSpace:{defaultMessage:"Please go online to create your workspace.",id:"spaceActions.dialogError.createWorkspaceError.goOnline.message"},createSpaceError:{defaultMessage:"Sorry! We could not create your workspace. Please try again.",id:"spaceActions.dialogError.createWorkspaceError.message"},loginToCreateSpace:{defaultMessage:"Must be logged in.",id:"spaceActions.dialogError.createWorkspaceError.notLoggedIn.message"},moveToSpaceOnlineError:{defaultMessage:"Please go online to move content to another space.",id:"spaceActions.dialogError.moveContentError.goOnline.message"},cannotMoveShardRestriction:{defaultMessage:"Cannot move these pages at once.",id:"spaceActions.dialogError.moveContentError.cannotMovePages.message"},cannotMoveContent:{defaultMessage:"Sorry! We could not move this content. Please try again.",id:"spaceActions.dialogError.couldNotMoveContentError.message"},space_content_duplication_too_large:{defaultMessage:"Unfortunately, this content is too large for us to successfully duplicate at this time. Please try duplicating smaller chunks instead.",id:"spaceActions.dialogError.spaceContentDuplicationTooLarge.message"},space_content_duplicate_refresh_required:{defaultMessage:"The duplication has successfully completed. Refresh your screen to load the new content.",id:"spaceActions.dialogError.spaceContentDuplicationRefreshRequired.message"},loginToMoveContent:{defaultMessage:"Must be logged in.",id:"spaceActions.dialogError.movetoWorkspace.notLoggedIn.message"},invalidSpaceStore:{defaultMessage:"Invalid space data.",id:"spaceActions.dialogError.createTemplatesInSpace.invalidStorage.message"},invalidSpaceStoreOnNavigate:{defaultMessage:"Invalid space data.",id:"spaceActions.dialogError.navigateToWorkspace.invalidStorage.message"},noSpaceViewOnJoin:{defaultMessage:"No space view data was created.",id:"spaceActions.dialogError.joinWorkspace.invalidWorkspaceStorage.message"},noLocalDataForPermissionGroup:{defaultMessage:"No local data about this workspace.",id:"spaceActions.dialogError.createOrUpdatePermissionGroup.invalidWorkspaceStorage.message"}});async function ke(e){const{environment:t,name:o,domain:n,userRootStore:r,emailDomains:a,analyticsFrom:s,icon:l,planType:c,userPersona:f,shouldCreateUserPersonaTeam:g,shouldMakeUserPersonaTeamDefault:h,collaborativeIntent:_}=e,{id:b}=t.currentUser;if(b){const e=await ie().callApi({eventName:"createSpace",environment:t,data:{name:o,domain:n,emailDomains:a,icon:l,planType:c,initialPersona:f,shouldCreateUserPersonaTeam:g,shouldMakeUserPersonaTeamDefault:h,domainType:(0,A().JF)(),collaborativeIntent:_,deviceId:await(0,R().getExperimentDeviceId)(t),deviceType:t.device.deviceType}});if("failed"===e.type){if(e.offline)throw new Error(E().Z.formatMessage(we.goOnlineCreateSpace));throw new Error(E().Z.formatMessage(we.createSpaceError))}$().default.logEvent("create_workspace",c,{analyticsFrom:s,userPersona:f,collaborativeIntent:_,deviceType:t.device.deviceType});const{spaceId:y,teamId:S,personaTeamId:w,inviteLinkCode:k}=e.data,I=new(J().H2)(t,{table:d().bx,id:y}),C=S?J().zX.createChildStore(I,{table:p().e0,id:S}):void 0,x=w?J().zX.createChildStore(I,{table:p().e0,id:w}):void 0,{serverCommitResult:T,performResult:{spaceViewStore:M}}=ye().createAndCommit({userAction:"spaceActions.createSpace",environment:t,canUndo:!0,perform:e=>{const o=ge().ae({environment:t,table:u().zU,value:{space_id:I.id,notify_mobile:!0,notify_desktop:!0,notify_email:!0,parent_id:b,parent_table:m().dx,alive:!0,joined:!0,joined_teams:(C||x)&&v().oA([null==C?void 0:C.id,null==x?void 0:x.id]),settings:{notify_email_digest:!0,notify_home_digest_email:!0},first_joined_space_time:Date.now()},inMemoryRecordCache:r.inMemoryRecordCache,transaction:e}),n=new(J().V9)(t,o.pointer);return de().R3({parentStore:r.getSpaceViewsStore(),appendStore:o,transaction:e}),de().MK({parentStore:r.getSpaceViewPointersStore(),appendStore:o,transaction:e}),t.device.isMobileNative&&i().log({level:"info",from:"spaceActions",type:"SpaceSwitchingDebug",data:{message:"spaceActions.createSpace setting space"}}),q().default.setState({...q().default.state,currentSpaceStore:I,currentSpaceViewStore:n}),ne().VT(t,{from:s,planType:c,isProfessionalTeamUser:(0,A().QZ)(),domain_type:(0,A().JF)()}),{spaceViewStore:n}}});return await T,await le().Yh(t),{spaceViewStore:M,spaceStore:I,inviteLinkCode:k,teamStore:C,personaTeamStore:x}}throw new Error(E().Z.formatMessage(we.loginToCreateSpace))}async function Ie(e){const{environment:t,blockStores:o,spaceId:n,targetParent:a}=e,{id:s}=t.currentUser;if(s){if(!G().default.state.online)return{error:{message:E().Z.formatMessage(we.moveToSpaceOnlineError)}};const e=[],p=[];for(const t of o)t.isDefined()&&(e.push({id:t.id,spaceId:t.getSpaceId()}),p.push(n));if(v().jj(p).length>1)return{error:{message:E().Z.formatMessage(we.cannotMoveShardRestriction)}};if(a&&a.spaceId!==n)return{error:{message:E().Z.formatMessage(we.cannotMoveShardRestriction)}};const m=(0,se().Lj)(t,k,{blocks:e,targetSpaceId:n,targetParent:a,clearPermissions:(0,N().bq)()});let f;for await(const o of m){if(pe().RO(o,n),o.error)return P().K4(t,"move_to_space_error",{}),i().log({level:"error",from:"spaceActions",type:"moveSpaceError",error:(0,h().Ui)(o.error),data:{userId:s,blocks:e,spaceId:n}}),(0,r().lk)(o.error)?{error:{message:E().Z.formatMessage(we.space_content_duplication_too_large),data:o.error}}:{error:{message:E().Z.formatMessage(we.cannotMoveContent),data:o.error}};{if(void 0===o.value.recordMap)return{error:{message:E().Z.formatMessage(we.space_content_duplicate_refresh_required)}};const e=l().RecordMapWithRole.create(o.value.recordMap).getByTable(c().iU);for(const{value:t}of e){var d,u;if("copy_indicator"===(null==t||null===(d=t.value)||void 0===d?void 0:d.type))f=null==t||null===(u=t.value)||void 0===u?void 0:u.id}}}return pe().h8(n),{value:f}}return{error:{message:E().Z.formatMessage(we.loginToMoveContent)}}}async function Ce(e){const{environment:t,spaceViewStore:o,openInNew:n,isNewlyCreatedSpace:r,leavingSpace:a}=e;await o.awaitNonNullValue();const s=o.getSpaceStore();if(!s)throw new Error(E().Z.formatMessage(we.invalidSpaceStoreOnNavigate));if(!n){try{const{dictationActions:e}=await M().Xb.load();await e.stopDictation({environment:t})}catch(d){}if(re().qL({bannerStore:Q().Z,id:"SubscriptionEditingBlocker"}),t.device.isMobileNative&&i().log({level:"info",from:"spaceActions",type:"SpaceSwitchingDebug",data:{message:"spaceActions.switchToSpace",spaceId:s.id}}),q().default.setState({...q().default.state,currentSpaceStore:s,currentSpaceViewStore:o}),a){const e=await(0,F().rg)(t,o);e&&((0,D().Wl)({spaceView:o.getModel(),pageId:e.id}),q().default.setState({...q().default.state,mainEditorCurrentBlockStore:e}))}}ee().Z.reset();const l=t.currentUser.id,c=o.getUserRootParentId();if(c&&l!==c){const e=await Se().x({environment:t,newCurrentUserId:c});await X().OR({environment:e,spaceId:s.id,isNewlyCreatedSpace:r});const{currentUserSettingsStore:o,currentUserRootStore:n}=q().default.state;return{switchedUser:!0,newEnvironment:e,newUserRootStore:n,newUserSettingsStore:o}}return await X().OR({environment:t,spaceId:s.id,isNewlyCreatedSpace:r}),{switchedUser:!1}}async function xe(e){const{spaceViewStore:t,redirectPageId:o,openInNew:r,isNewlyCreatedSpace:a,templateGalleryItem:s,projectManagementLaunch:l,redirect:d,leavingSpace:u,pageVisitSource:p,forceLandLastVisitedPage:m,navigateToStore:f}=e;let{environment:g,userSettingsStore:v,userRootStore:h}=e;const _=t.getSpaceStore();if(!_)throw new Error(E().Z.formatMessage(we.invalidSpaceStoreOnNavigate));const b=await Ce({environment:g,spaceViewStore:t,openInNew:r,isNewlyCreatedSpace:a,leavingSpace:u});b.switchedUser&&(g=b.newEnvironment,v=b.newUserSettingsStore,h=b.newUserRootStore),z().default.isOpen()&&(0,K().TN)({environment:g}),W().KR.isAiEnabled()&&(x().assistantDependency.load().then((e=>{let{assistantActions:t}=e;t.clearAllAssistantSessions()})),async function(e,t){const{aiQnaActions:o}=await C().aiDependency.load();o.resetSlackQnaConnectionState({environment:e,spaceStore:t}),o.resetGoogleDriveQnaConnectionState({environment:e,spaceStore:t})}(g,_));const y=h&&h.getSpaceViewStores(),S=F().g4(g,{space:_.getModel(),spaceView:null==t?void 0:t.getModel()}),w=j().Al(t);if(f)return void I()._c({environment:g,store:f,visitType:B().vu.Link,pageVisitSource:n().tY.NewWorkspaceWorkflowTemplateOnboarding});if(o)return void I()._c({environment:g,store:new(J().G)(g,{table:c().iU,id:o}),openInNew:r,pageVisitSource:p,redirect:d});if((0,O().Ck)(g)&&he().navigateToHomeTab(g),h&&await fe().reinitializeGlobalRecentPagesStoreState(g,h.id,_.id),m||"last_visited_page"===S){const e=function(e){const{spaceId:t}=e,o=Y().Z.getWithoutSubscribing(t);if(!Array.isArray(o))return;const n=o[0];if(void 0===(null==n?void 0:n.pageId))return;return n.store}({environment:g,spaceId:_.id});if(e&&e.canRead()&&e.pathIsAccessibleAndAlive()&&!U().IJ(g,e))return void I()._c({environment:g,store:e,openInNew:r,templateGalleryItem:s,projectManagementLaunch:l,pageVisitSource:n().tY.LastVisitedPage,redirect:d})}if("personal_home"===S&&w&&(await w.load(),w.canRead()))return I()._c({environment:g,store:w,openInNew:r,templateGalleryItem:s,projectManagementLaunch:l,pageVisitSource:n().tY.DefaultHome,redirect:d}),void(0,Z().$X)({environment:g,from:"on_app_start_page"});if("chat"===S)return void ve().c4({environment:g,url:"/chat",redirect:d});const k=await(0,F().rg)(g,t);if(k)return(0,D().Wl)({spaceView:t.getModel(),pageId:k.id}),void I()._c({environment:g,store:k,openInNew:r,templateGalleryItem:s,projectManagementLaunch:l,pageVisitSource:p,redirect:d});if(_.canEdit()){const{performResult:e}=ye().createAndCommit({userAction:"spaceActions.createdPage",environment:g,canUndo:!0,perform:e=>be().KE({environment:g,spaceStore:_,spaceViewStore:t,isPrivate:!0,transaction:e,prepend:!1})});I()._c({environment:g,store:e,openInNew:r,pageVisitSource:p,redirect:d})}else{if(v&&h&&y&&y.length>0&&y[0]&&y[0].id!==t.id)return ce().vq(),g.device.isMobileNative&&i().log({level:"info",from:"spaceActions",type:"SpaceSwitchingDebug",data:{message:"navigateToFirstSpace because navigateToSpace didn't find a page"}}),void(await Me({environment:g,userRootStore:h,userSettingsStore:v,openInNew:r,pageVisitSource:p}));ce().vq(),await L().xN(g)}}async function Te(e){q().default.setState({...q().default.state,spaceTransitionStatus:e.navigationType}),await xe(e),await le().Yh(e.environment,!0),q().default.setState({...q().default.state,spaceTransitionStatus:"notTransitioning"})}async function Me(e){const{environment:t,userRootStore:o,ignoreSpaceId:n,userSettingsStore:i,openInNew:r,skipPendingTransferWorkspaces:a,leavingSpace:s,templateGalleryItem:l,projectManagementLaunch:c,pageVisitSource:d,redirect:u,forceLandLastVisitedPage:p}=e;await o.load();const m=o.getSpaceViewStores();await Promise.all(m.map((e=>e.load())));const g=m.filter((e=>{var t,o;if(!e.isDefined())return!1;if(n)return e.getSpaceId()!==n;const i=(0,f().DI)(null===(t=e.getSpaceStore())||void 0===t||null===(t=t.getSettings())||void 0===t?void 0:t.space_request)||(0,f().Ci)(null===(o=e.getSpaceStore())||void 0===o||null===(o=o.getSettings())||void 0===o?void 0:o.space_request);return!a||!i}));let v;for(const f of g){if(!F().Cx(f.getSpaceStore())){v=f;break}{const e=await(0,F().rg)(t,f);if(e&&e.isDefined()){v=f,(0,D().Wl)({spaceView:f.getModel(),pageId:e.id});break}}}v?await Te({environment:t,spaceViewStore:v,userSettingsStore:i,userRootStore:o,openInNew:r,leavingSpace:s,templateGalleryItem:l,projectManagementLaunch:c,pageVisitSource:d,redirect:u,navigationType:"switchingToOrLoadingSpace",forceLandLastVisitedPage:p}):(ce().vq(),await L().xN(t))}async function Pe(e){const{environment:t,index:o,userRootStore:i,userSettingsStore:r}=e,a=H().Z.getAllSpaceViewStores(t)[o];a&&await Te({environment:t,spaceViewStore:a,userSettingsStore:r,userRootStore:i,pageVisitSource:n().tY.SwitchSpace,navigationType:"switchingToOrLoadingSpace"})}async function Ae(e){const{environment:t,spaceStore:o}=e;o.isDefined()&&!(0,b().Z)(o.getEmailDomains(),e.emailDomains)&&oe().xG(t,{domains:e.emailDomains||[],confirmed:!0});const n={email_domains:e.emailDomains};e.name&&(n.name=e.name);const i={};for(const r of(0,y().Yd)(n)){const e=o.getKeyStore(r).getValue(),t=n[r];v().Xy(e,t)||(i[r]=t||null)}v().xb(i)||await new Promise(((e,n)=>{ye().createAndCommit({userAction:"spaceActions.updateSpace",environment:t,canUndo:!0,perform:t=>{ge().sW({store:o,data:i,transaction:t}),t.postSubmitCallbacks.push((t=>{t?n(t):e()}))}})}))}async function Re(e){const{environment:t,spaceStore:o,spaceBasicSettingsStore:n,securitySettingsStore:i}=e,{name:r,emailDomains:a}=n.state;await Promise.all([Ae({environment:t,spaceStore:o,name:r,emailDomains:a}),i?_e().n(t,{spaceStore:o,securitySettingsState:i.state}):Promise.resolve()])}function Be(e){const{environment:t,transaction:o,spaceStore:n,disablePublicAccess:i,disableGuests:r,disableMoveToSpace:a,disableExport:s,disableSpacePageEdits:l,disablePublicAccessRequests:c,disableTeamCreation:d,disableMembershipRequests:u,disableExternalMembershipRequests:p,disableGuestMembershipRequests:m,enableAiFeature:f,disableTeamGuests:g,enableGuestInviteRequests:v,enableAiTraining:h,zeroRetentionEnabled:_}=e;ge().sW({store:n,data:{disable_public_access:i,disable_guests:r,disable_move_to_space:a,disable_export:s,disable_space_page_edits:l,disable_public_access_requests:c,settings:{...n.getSettings(),enable_ai_feature:f,disable_team_guests:g,enable_guest_invite_requests:v,enable_ai_training:h,...!1===h&&{is_assistant_experience_enabled:!1},zero_retention_enabled:_},disable_team_creation:d},transaction:o}),ye().applyOperation({store:n,operation:{pointer:n.pointer,path:["settings","disable_membership_requests"],command:"set",args:u},transaction:o}),ye().applyOperation({store:n,operation:{pointer:n.pointer,path:["settings","disable_external_membership_requests"],command:"set",args:p},transaction:o}),ye().applyOperation({store:n,operation:{pointer:n.pointer,path:["settings","disable_guest_membership_requests"],command:"set",args:m},transaction:o}),c&&te().Jp(t,{disable_public_access_requests:c})}function Ee(e){const{transaction:t,spaceStore:o,inviteLinkEnabled:n}=e;ge().sW({store:o,data:{invite_link_enabled:n},transaction:t})}async function De(e){const{environment:t,spaceId:r,userRootStore:a,navigate:s,analyticsFrom:l,userSettingsStore:c,redirectPageId:d,inviteCode:u,redirectSource:p,isOnboarding:m,isJoinableTrustedDomainViewer:f}=e,v=await Ue({userRootStore:a,spaceId:r,waitForLoad:!1});if(!v||f){const o=await ie().callApi({eventName:"addUsersToSpace",environment:t,data:{userIds:[a.id],spaceId:e.spaceId,inviteCode:u}});if("failed"===o.type)throw o.body&&o.body.clientData&&"invite_link_disabled"===o.body.clientData.type&&g().Z.remove(O().WX),i().log({level:"error",from:"spaceActions",type:"addUsersToSpace",error:(0,h().Ui)(o.error),data:{miscDataToConvertToString:{response:o}}}),o.error}const _=v||await Ue({userRootStore:a,spaceId:r,waitForLoad:!1});if(!_)throw new Error(E().Z.formatMessage(we.noSpaceViewOnJoin));await _.load();const b=_.getJoined();if(b||(ye().createAndCommit({userAction:"spaceActions.joinSpace",environment:t,canUndo:!0,perform:e=>{!function(e){ge().sW({store:e.spaceViewStore,data:{joined:!0},transaction:e.transaction})}({spaceViewStore:_,transaction:e})}}),T().default.isAdminMode||(ie().callApi({eventName:"setSpaceNotificationsAsRead",environment:t,data:{timestamp:Date.now(),spaceId:r}}),ne().Pv(t,{from:p??l})),m||await async function(e){const{environment:t,spaceViewStore:n,userSettingsStore:i,userRootStore:r}=e,{onboardingActionsDependency:a}=await Promise.resolve().then(o.bind(o,136684)),{createOnboardingTemplatesActions:s}=await a.load(),l=s.getStarterTemplatesForSpace({environment:t,onboardingPlanType:"team",categories:[],isJoiner:!0,intl:E().Z.getIntl()});await s.createTemplatePagesInSpace({environment:t,redirectData:{type:"getting_started_page"},spaceViewStore:n,isPrivate:!0,userSettingsStore:i,userRootStore:r,templatesToCreateInSpace:{pageTemplates:l},planType:"team",spaceJoinOrCreate:"join",useCases:[],userPersona:"other",isNewUserOnboarding:!1})}({environment:t,spaceViewStore:_,userSettingsStore:c,userRootStore:a})),s&&await Te({environment:t,spaceViewStore:_,userSettingsStore:c,redirectPageId:d,userRootStore:a,pageVisitSource:n().tY.SwitchSpace,navigationType:v?"switchingToOrLoadingSpace":"joiningOrCreatingSpace"}),!v&&(q().default.setState({...q().default.state,currentSpaceStore:_.getSpaceStore(),currentSpaceViewStore:_}),X().OR({environment:t,spaceId:r}).then((()=>{ne().kj(t,{from:l})})),g().Z.remove(O().WX),t.device.isMobileNative&&i().log({level:"info",from:"spaceActions",type:"SpaceSwitchingDebug",data:{message:"spaceActions.joinSpace"}}),await le().Yh(t),!b)){const e=u?"shareable_link_join":"verified_domain_join";ne().Jk(t,{invite_origin:e,domainType:(0,A().JF)(),new_workspace_member_count:1,new_workspace_member_ids:[a.id]})}return{spaceViewStore:_}}async function Ue(e){const t=e.userRootStore.getSpaceViewStores();return e.waitForLoad&&await _().qd(t,10,(e=>e.load())),t.find((t=>t.getSpaceId()===e.spaceId))}async function Fe(e){const{environment:t,spaceId:o,userSettingsStore:i}=e,{currentUserRootStore:r,currentUserStore:a}=q().default.state;if(r&&a){const e=await ie().callApi({eventName:"removeUsersFromSpace",environment:t,data:{userIds:[a.id],spaceId:o,removePagePermissions:!0,revokeUserTokens:!1}});return"success"===e.type?(Me({environment:t,userRootStore:r,ignoreSpaceId:o,userSettingsStore:i,leavingSpace:!0,pageVisitSource:n().tY.SwitchSpace}),!0):(ae().x2(e),!1)}}async function Ne(e){const{environment:t,spaceId:o,organizationId:n,onDelete:i}=e;ue().j({message:we.deletingWorkspace});try{const{value:e}=await(0,se().Lj)(t,w,{spaceId:o,source:"user_initiated_deletion",organizationId:n}).next();if(e.error)throw e.error;await i()}finally{ue().x()}}function Ve(e){const{environment:t,blocks:o,transaction:n}=e,i=t.currentUser.id;if(i)for(const r of o){const e=r.getPermissionItems().filter((e=>(0,s().FB)(e)));ge().sW({store:r,data:{permissions:[...e,{type:"user_permission",role:"editor",user_id:i}]},transaction:n})}}function Le(e){const{environment:t,blocks:o,transaction:n}=e;if(t.currentUser.id)for(const i of o){const e=i.getPermissionItems(),o=e.find((e=>"space_permission"===e.type)),r=e.filter((e=>(0,s().FB)(e)));o||me().l3({environment:t,store:i,permissionItems:[...r,{type:"space_permission",role:"editor"}],transaction:n})}}function Oe(e){const{blocks:t,transaction:o}=e;for(const n of t){const e=n.getPermissionItems().filter((e=>(0,s().FB)(e)));ge().sW({store:n,data:{permissions:e.length>0?e:null},transaction:o})}}function Ze(e){const{spaceStore:t,transaction:o}=e;if(!t.isDefined())throw new Error(E().Z.formatMessage(we.noLocalDataForPermissionGroup));const n=(0,a().Il)(),i=(0,V().Q)({spaceStore:t,groupId:n});return ye().applyOperation({store:i,operation:(0,f().HS)({spaceId:t.id,groupId:n}),transaction:o}),i}function je(e){const{transaction:t,spacePermissionGroupStore:o,value:n}=e;ye().applyOperation({store:o,operation:{command:"update",pointer:o.pointer,path:[],args:{...n}},transaction:t})}function Ke(e){const{groupMemberStore:t,spaceId:o,groupId:n,userId:i,transaction:r}=e;ye().applyOperation({store:t,operation:(0,f().e5)({groupId:n,spaceId:o,userId:i}),transaction:r})}async function ze(e){const{environment:t,groupStore:o,transaction:n}=e;await o.load();const i=o.getGroupId(),r=o.getSpaceId();r&&i&&(ye().applyOperation({store:o,operation:{pointer:o.pointer,path:[],command:"update",args:{deleted_at:Date.now()}},transaction:n}),await ie().callApi({eventName:"transferPermissionGroup",environment:t,data:{spaceId:r,groupId:i}}))}function He(e){const{userRootStore:t,spaceViewIds:o,transaction:n,spaceViewPointers:i}=e;ge().sW({store:t,data:{space_views:o,space_view_pointers:i},transaction:n})}function qe(e){const{planType:t,spaceStore:o,transaction:n}=e;ge().sW({store:o,data:{plan_type:t},transaction:n})}function We(e,t,o){const n=o||q().default.state.currentSpaceStore;if(!n)throw i().log({level:"error",from:"spaceActions",type:"setSpaceSurveyData",error:{message:"Couldn't find a SpaceStore."}}),new Error;ye().createAndCommit({userAction:"spaceActions.setSpaceSurveyData",environment:e,canUndo:!0,perform:e=>{Qe(n,e,{space_survey_data:t})}})}function Ge(e,t){const o=t||q().default.state.currentSpaceStore;if(!o)throw i().log({level:"error",from:"spaceActions",type:"setHIPAACompliancyData",error:{message:"Couldn't find a SpaceStore."}}),new Error;const n=e.currentUser.id;if(!n)throw i().log({level:"error",from:"spaceActions",type:"setHIPAACompliancyData",error:{message:"No User"}}),new Error;const r={last_edited_time:Date.now(),last_edited_by_id:n};ye().createAndCommit({userAction:"spaceActions.setHIPAACompliancyData",environment:e,canUndo:!0,perform:e=>{Qe(o,e,{hipaa_compliancy_data:r})}})}function $e(e){const t=e.getEditDomain();return t?`${window.location.host}/${t}`:null}function Qe(e,t,o){ye().applyOperation({store:e,operation:{pointer:e.pointer,path:["settings"],command:"update",args:{...e.getSettings(),...o}},transaction:t})}},145284:(e,t,o)=>{o.d(t,{Hj:()=>_,KE:()=>h,OQ:()=>b,ux:()=>y});o(821057),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(30005),o(241792);var n=()=>o(156642),i=()=>o(396136),r=()=>o(955620),a=()=>o(342792),s=()=>o(696459),l=()=>o(527278),c=()=>o(345918),d=()=>o(826955),u=()=>o(8101),p=()=>o(291338),m=()=>o(282662),f=()=>o(636340),g=()=>o(970105);const v=(0,o(788860).vU)({forkPageError:{defaultMessage:"Could not fork page.",id:"spaceActions.dialogError.forkPageError.message"}});function h(e){const{environment:t,spaceViewStore:o,spaceStore:i,isPrivate:r,prepend:a,title:s,transaction:l,loading:c,tracker:d}=e,u=f().j4({environment:t,type:c?n().Ti.copyIndicator:n().Ti.page,inMemoryRecordCache:i.inMemoryRecordCache,transaction:l,spaceId:i.id,tracker:d});return s&&g().sO({environment:t,store:u.getBlockTitleStore(),value:[[s]],transaction:l}),_({environment:t,spaceStore:i,spaceViewStore:o,pageStore:u,isPrivate:r,location:{type:a?"prepend":"append"},transaction:l}),u}function _(e){const{environment:t,spaceStore:o,spaceViewStore:n,pageStore:i,isPrivate:r,location:a,transaction:l}=e,{id:c}=t.currentUser;let d;r?c&&(d={type:"user_permission",role:"editor",user_id:c}):d={type:"space_permission",role:"editor"},f().sW({store:i,data:{permissions:d?[d]:[]},transaction:l}),r&&b({environment:t,spaceStore:o,spaceViewStore:n,transaction:l});const u=a||{type:"append"};"prepend"===u.type?m().Ce({parentStore:r?n.getPrivatePagesStore():o.getPagesStore(),prependStore:i,before:u.before,transaction:l}):"append"===u.type?m().R3({parentStore:r?n.getPrivatePagesStore():o.getPagesStore(),appendStore:i,after:u.after,transaction:l}):(0,s().t1)(u)}function b(e){const{environment:t,spaceStore:o,spaceViewStore:n,transaction:i}=e,r=new Set(n.getPrivatePageStores().map((e=>e.id)));(0,c().XD)(t,o).filter((e=>e.isTopLevelPrivatePage({spaceStore:o,environment:t}))).forEach((e=>{r.has(e.id)||m().R3({parentStore:n.getPrivatePagesStore(),appendStore:e,transaction:i})}))}async function y(e){const{environment:t,userRootStore:o,isPrivate:n,forkedPageId:s,spaceStore:c,spaceViewStore:m}=e;if(c.canEdit()){const e=d().G.createChildStore(o,{table:i().iU,id:s});p().nM({currentUserId:t.currentUser.id,blockId:void 0});const l=Date.now(),f=await p().OH({environment:t,store:e,spaceStore:c,spaceViewStore:m,isPrivate:n}),g=Date.now()-l;if(u().Xy(t,{from:"onboarding",success:!f.error,template_block_id:s,target_space_id:(0,a().F9)(c.id),context:"fork_page_into_space",template_duplication_duration_ms:g,public_template_name:r().QaF(e.getTitleValue())}),void 0===f.error)return f.value}throw new Error(l().Z.formatMessage(v.forkPageError))}},261930:(e,t,o)=>{o.d(t,{NY:()=>w,ZJ:()=>h,TY:()=>f,E6:()=>v,pE:()=>m,ce:()=>C,GZ:()=>g,lo:()=>p,pu:()=>b,kY:()=>_,ni:()=>x,ON:()=>u,dg:()=>d,pc:()=>k,Q1:()=>I,MA:()=>y,a2:()=>S,VD:()=>c});o(821057),o(492176),o(7961),o(267602),o(653476);var n=()=>o(799891);var i=()=>o(792409),r=()=>o(696459),a=()=>o(594546),s=()=>o(876822),l=()=>o(269299);function c(e,t,o){l().applyOperation({store:e,operation:{pointer:e.pointer,path:["settings"],command:"update",args:{...e.getSettings(),...o}},transaction:t})}function d(e){const{currentSpaceViewStore:t}=s().default.state;t&&l().createAndCommit({environment:e,userAction:"AiSlackQnaNotificationTooltip.setSlackQnaNotificationSeenAtToCurrentTimestamp",canUndo:!0,perform:e=>{c(t,e,{ai_slack_qna_notification_seen_at:Date.now()})}})}function u(e){const{currentSpaceViewStore:t}=s().default.state;t&&l().createAndCommit({environment:e,userAction:"AiGoogleDriveQnaNotificationTooltip.setGoogleDriveQnaNotificationSeenAtToCurrentTimestamp",canUndo:!0,perform:e=>{c(t,e,{ai_google_drive_qna_notification_seen_at:Date.now()})}})}function p(e){var t;const{currentSpaceViewStore:o}=s().default.state;o&&void 0===(null===(t=o.getSettings())||void 0===t?void 0:t.space_analytics_settings_prompt)&&l().createAndCommit({userAction:"userSettingsActions.initializeSpaceAnalyticsPromptSettings",environment:e,canUndo:!0,perform:e=>{c(o,e,{space_analytics_settings_prompt:{status:"showing",num_times_shown:0}})}})}function m(e){var t;const{currentSpaceViewStore:o}=s().default.state;if(!o)return;const n=null===(t=o.getSettings())||void 0===t?void 0:t.space_analytics_settings_prompt;if(!n||"dismissed"===n.status||"hidden"===n.status)return;const i={...n,num_times_shown:n.num_times_shown+1};i.num_times_shown>3&&(i.status="hidden"),l().createAndCommit({userAction:"spaceViewActions.incrementSpaceAnalyticsSettings",environment:e,canUndo:!0,perform:e=>{c(o,e,{space_analytics_settings_prompt:i})}})}function f(e){var t;const{currentSpaceViewStore:o}=s().default.state;if(!o)return;const n=null===(t=o.getSettings())||void 0===t?void 0:t.space_analytics_settings_prompt;n&&"dismissed"!==n.status&&l().createAndCommit({userAction:"spaceViewActions.incrementspaceAnalyticsSettings",environment:e,canUndo:!0,perform:e=>{c(o,e,{space_analytics_settings_prompt:{status:"dismissed"}})}})}function g(e){var t;const{currentSpaceViewStore:o}=s().default.state;o&&void 0===(null===(t=o.getSettings())||void 0===t?void 0:t.mfa_settings_prompt)&&l().createAndCommit({userAction:"userSettingsActions.initializeMfaPromptSettings",environment:e,canUndo:!0,perform:e=>{c(o,e,{mfa_settings_prompt:{status:"showing",num_times_shown:0}})}})}function v(e){var t;const{currentSpaceViewStore:o}=s().default.state;if(!o)return;const n=null===(t=o.getSettings())||void 0===t?void 0:t.mfa_settings_prompt;if(!n||"dismissed"===n.status||"hidden"===n.status)return;const i={...n,num_times_shown:n.num_times_shown+1};i.num_times_shown>3&&(i.status="hidden"),l().createAndCommit({userAction:"spaceViewActions.incrementOrHideMfaPrompt",environment:e,canUndo:!0,perform:e=>{c(o,e,{mfa_settings_prompt:i})}})}function h(e){var t;const{currentSpaceViewStore:o}=s().default.state;if(!o)return;const n=null===(t=o.getSettings())||void 0===t?void 0:t.mfa_settings_prompt;n&&"dismissed"!==n.status&&l().createAndCommit({userAction:"spaceViewActions.dismissMfaPromptSetting",environment:e,canUndo:!0,perform:e=>{c(o,e,{mfa_settings_prompt:{status:"dismissed"}})}})}function _(e,t){var o;const{currentSpaceViewStore:n}=s().default.state;if(!n)return;const i=(null===(o=n.getSettings())||void 0===o?void 0:o.page_analytics_opt_out_list)||[];i.includes(t)||(l().createAndCommit({userAction:"spaceViewActions.optOutOfPageAnalyticsForPage",environment:e,canUndo:!0,perform:e=>{c(n,e,{page_analytics_opt_out_list:[...i,t]})}}),a().K4(e,"page_analytics_page_opt_out"))}function b(e,t){var o;const{currentSpaceViewStore:n}=s().default.state;if(!n)return;const i=(null===(o=n.getSettings())||void 0===o?void 0:o.page_analytics_opt_out_list)||[];i.includes(t)&&(l().createAndCommit({userAction:"spaceViewActions.optInToPageAnalyticsForPage",environment:e,canUndo:!0,perform:e=>{c(n,e,{page_analytics_opt_out_list:i.filter((e=>e!==t))})}}),a().K4(e,"page_analytics_page_opt_in"))}function y(e){var t;let{environment:o,newValue:n}=e;const{currentSpaceViewStore:i}=s().default.state;if(!i)return;const a={notify_email_digest:n};var d;(0,r().$K)(null===(t=i.getSettings())||void 0===t?void 0:t.notify_home_digest_email)||(a.notify_home_digest_email=(null===(d=i.getSettings())||void 0===d?void 0:d.notify_email_digest)??!1);l().createAndCommit({userAction:"userSettingsActions.emailDigestSetting.onToggle",environment:o,canUndo:!0,perform:e=>c(i,e,a)})}function S(e,t){const{currentSpaceViewStore:o}=s().default.state;o&&l().createAndCommit({userAction:"userSettingsActions.homeDigestEmailSetting.onToggle",environment:e,canUndo:!0,perform:e=>{c(o,e,{notify_home_digest_email:t})}})}function w(e){const{currentSpaceViewStore:t}=s().default.state;t&&l().createAndCommit({userAction:"spaceViewActions.confirmAdminContentSearchAcknowledgement",environment:e,canUndo:!0,perform:e=>{c(t,e,{admin_content_search_acknowledgement:!0})}})}function k(e){var t;const{currentSpaceViewStore:o}=s().default.state;o&&(null!==(t=o.getSettings())&&void 0!==t&&t.has_migrated_to_google_drive_external_integration||l().createAndCommit({userAction:"spaceViewActions.setUserMigratedToGoogleDriveExternalIntegrationInSpace",environment:e,canUndo:!0,perform:e=>{c(o,e,{has_migrated_to_google_drive_external_integration:!0})}}))}function I(e,t,o){const i=o||s().default.state.currentSpaceViewStore;if(!i)throw n().log({level:"error",from:"spaceActions",type:"setUserSurveyData",error:{message:"Couldn't find a SpaceViewStore."}}),new Error;l().createAndCommit({userAction:"spaceViewActions.setUserSurveyData",environment:e,canUndo:!0,perform:e=>{c(i,e,{user_survey_data:t})}})}function C(e,t){var o;const n=(null===(o=t.getSettings())||void 0===o?void 0:o.dismissed_db_page_summary_suggestion)||0;l().createAndCommit({environment:e,userAction:"spaceViewActions.incrementSummarySuggestionDismissCount",canUndo:!0,perform:e=>{c(t,e,{dismissed_db_page_summary_suggestion:n+1})}})}function x(e){let{environment:t,spaceViewStore:o}=e;const r=o.getModel();if(!r)return;const a=function(e){let{spaceView:t}=e;return[{pointer:{table:"user_root",id:t.parent_id},path:["space_views"],command:"listRemove",args:{id:t.id}},{pointer:{table:"user_root",id:t.parent_id},path:["space_view_pointers"],command:"keyedObjectListRemove",args:{remove:{id:t.id}}},{pointer:{table:"space_view",id:t.id,spaceId:t.space_id},path:[],command:"update",args:{alive:!1}}]}({spaceView:r});try{l().createAndCommit({environment:t,userAction:"spaceViewActions.removeUserSpaceViews",canUndo:!0,perform:e=>{for(const t of a)l().applyOperation({store:o,operation:t,transaction:e})}})}catch(s){n().log({level:"error",from:"spaceViewActions",type:"removeUserSpaceViews",error:(0,i().Ui)(s)})}}},957991:(e,t,o)=>{o.d(t,{gG:()=>S,jL:()=>p,z7:()=>m,nz:()=>_,ls:()=>b,x2:()=>g,a:()=>f});var n=()=>o(156642),i=()=>o(35980),r=()=>o(527278);class a extends(()=>o(263184))().default{getInitialState(){return{}}setSelected(e,t){this.setState({...this.state,[e]:t})}getSelectedTab(e){return this.state[e]}}const s=new a;var l=()=>o(282662),c=()=>o(636340),d=()=>o(879952),u=()=>o(990966);function p(e){const t=e.getContentStores(),o=e.id,n=s.getSelectedTab(o);return n?t.findIndex((e=>e.id===n)):0}function m(e){const t=p(e),o=e.getContentStores();return o.length>t?o[t]:o[0]}function f(e){const{store:t,index:o,currentUserId:n}=e,i=t.getContentStores()[o];i&&g({store:t,id:i.id,currentUserId:n})}function g(e){const{store:t,id:o,currentUserId:n}=e;s.setSelected(t.id,o),i().Z.set({userId:n,key:h(t.id),value:o})}const v="TabBlock";function h(e){return`${v}-${e}`}function _(e){const{blockId:t,currentUserId:o}=e,n=i().Z.get({userId:o,key:h(t)});n&&s.setSelected(t,n)}function b(e){const{environment:t,store:o,transaction:i}=e,r=c().j4({environment:t,type:n().Ti.text,inMemoryRecordCache:o.inMemoryRecordCache,transaction:i});l().R3({parentStore:o.getContentStore(),appendStore:r,transaction:i});const a=o.getContentStores()[0];d().eP({environment:t,store:a});const s=a.getBlockTitleStore();u().setSelectionAtStart({store:s})}const y=(0,o(788860).vU)({newTab:{id:"tabBlockActions.addTab.title",defaultMessage:"New tab"}});function S(e){const{environment:t,store:o,transaction:i}=e,a=c().j4({environment:t,type:n().Ti.text,inMemoryRecordCache:o.inMemoryRecordCache,transaction:i,properties:{title:[[r().Z.formatMessage(y.newTab)]]}});return l().R3({parentStore:o.getContentStore(),appendStore:a,transaction:i}),s.setSelected(o.id,a.id),a}},435168:(e,t,o)=>{o.d(t,{AU:()=>J,DI:()=>j,FC:()=>O,K4:()=>te,MD:()=>ee,MO:()=>V,NE:()=>K,YY:()=>N,Z5:()=>F,d1:()=>X,e2:()=>L,j0:()=>G,nA:()=>W,oz:()=>oe,qn:()=>z,zJ:()=>Z});o(821057),o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(241792);var n=()=>o(506347),i=()=>o(747732),r=()=>o(226413),a=()=>o(532850),s=()=>o(135857),l=()=>o(874459),c=()=>o(374847),d=()=>o(109477),u=()=>o(177634),p=()=>o(998411),m=()=>o(720612),f=()=>o(530980),g=()=>o(375255),v=()=>o(396136),h=()=>o(81954),_=()=>o(989478),b=()=>o(955620),y=()=>o(513670),S=()=>o(324877),w=()=>o(173255),k=()=>o(932753),I=()=>o(205228),C=()=>o(615676),x=()=>o(527278),T=()=>o(156958),M=()=>o(749826),P=()=>o(250303),A=()=>o(384667),R=()=>o(421654),B=()=>o(636340),E=()=>o(879952),D=()=>o(970105),U=()=>o(269299);function F(e){const{environment:t,selectionKey:o,selection:n,currentRowStore:i}=e,r=w().Z.state.isActive?w().Z.state.currentRowStore:void 0;w().Z.setState({isActive:!0,selectionKey:o,selection:n,currentRowStore:i||r}),E().ZH({environment:t})}function N(e){w().Z.update((t=>({...t,currentRowStore:e})))}function V(){w().Z.setState({isActive:!1})}function L(e){const{environment:t,selectionKey:o,shiftKey:n,columnCount:i,selection:r}=e;if(n&&r.end.col>0){const e={col:r.end.col-1,row:r.end.row},n={start:r.start,end:e};return F({environment:t,selectionKey:o,selection:n}),n}if(!n&&r.start.col>0){const e={col:r.start.col-1,row:r.start.row},n={start:e,end:e};return F({environment:t,selectionKey:o,selection:n}),n}if(!n&&0===r.start.col&&r.start.row>0){const e={col:i-1,row:r.start.row-1},n={start:e,end:e};return F({environment:t,selectionKey:o,selection:n}),n}return r}function O(e){const{environment:t,selectionKey:o,shiftKey:n,columnCount:i,rowCount:r,selection:a}=e;if(n&&a.end.col<i-1){const e={col:a.end.col+1,row:a.end.row},n={start:a.start,end:e};return F({environment:t,selectionKey:o,selection:n}),n}if(!n&&a.start.col<i-1){const e={col:a.start.col+1,row:a.start.row},n={start:e,end:e};return F({environment:t,selectionKey:o,selection:n}),n}if(!n&&a.start.col>=i-1&&a.start.row<r-1){const e={col:0,row:a.start.row+1},n={start:e,end:e};return F({environment:t,selectionKey:o,selection:n}),n}return a}function Z(e){const{environment:t,selectionKey:o,shiftKey:n,selection:i}=e;if(n&&i.end.row>0){const e={col:i.end.col,row:i.end.row-1},n={start:i.start,end:e};return F({environment:t,selectionKey:o,selection:n}),n}if(!n&&i.start.row>0){const e={col:i.start.col,row:i.start.row-1},n={start:e,end:e};return F({environment:t,selectionKey:o,selection:n}),n}return i}function j(e){const{environment:t,selectionKey:o,shiftKey:n,rowCount:i,selection:r}=e;if(n&&r.end.row<i-1){const e={col:r.end.col,row:r.end.row+1},n={start:r.start,end:e};return F({environment:t,selectionKey:o,selection:{start:r.start,end:e}}),n}if(!n&&r.start.row<i-1){const e={col:r.start.col,row:r.start.row+1},n={start:e,end:e};return F({environment:t,selectionKey:o,selection:n}),n}return r}function K(e){const{selection:t,schema:o,currentRows:n,currentPropertyFormats:i,transaction:a}=e,s=S().AV(t);for(let l=s.minRow;l<=s.maxRow;l++){const e=n[l];if(e)for(let t=s.minCol;t<=s.maxCol;t++){const n=i[t],s=o[n.property];if(r().Sm(s))continue;const l=e.getPropertyStore(n.property);D().sO({environment:l.environment,store:l,value:void 0,transaction:a})}}}function z(e){const{selection:t,currentRows:o,event:i,formulasModule:r}=e;if(null===i.clipboardData)return;const a=S().AV(t);let l="";const d=[],u=o.slice(Math.max(0,a.minRow),a.maxRow+1).filter((e=>e&&e.isDefined()));for(const n of u){const t=[];d.push(t);for(let o=a.minCol;o<=a.maxCol;o++){const[i,r]="selectionKey"in e?H({row:n,x:o,collectionViewBlockStore:e.selectionKey.collectionViewBlockStore,...e}):q({row:n,x:o,...e});t.push([i,n.pointer]),r&&(l+=r),o<a.maxCol&&(l+="\t")}n!==y().Z$(u)&&(l+="\n")}if(i.preventDefault(),i.clipboardData.setData("text/plain",l),function(e,t){if(null===e.clipboardData)return;e.clipboardData.setData(S().mH,JSON.stringify(t))}(i,d),"simpleTableStore"in e){const{environment:t,simpleTableStore:o,columnOrder:l,exportJsxRenderer:d}=e;if(!d)return;const{default:m,jsxToStaticMarkup:g}=d,_=t.currentUser.id,b=t.defaultRecordCache.inMemoryRecordCache.makeGetRecordValueFn(_),y=f().omK.fromGetRecordValueFn(b),S=l.slice(a.minCol,a.maxCol+1).filter((e=>void 0!==e)),w=(0,c()._2)({exportArgs:{root:{table:v().iU,id:o.id,spaceId:(0,h().J)(o.pointer.spaceId)},navigableBlockId:o.id,renderParentBlockId:void 0,blockId:o.id,userTimeZone:(0,p().r)(),intl:x().Z.getIntl(),getRecordValue:b,numberedListCache:{},bulletedListCache:{},getRecordsWithParent:()=>[],getExportedPathToFile:e=>{let{toFileURI:t}=e;return t},getExportedRenderAsset:e=>{let{toFileURI:t}=e;return t},getExportedPathToPage:e=>{let{toPageId:t}=e;return(0,s().Z)({pageId:t,pageModel:y({table:v().iU,id:t}),baseUrl:I().default.domainBaseUrl,pageVisitSource:n().tY.Export})},baseUrl:I().default.domainBaseUrl,publicDomainName:I().default.publicDomainName,table:{[o.id]:{renderRows:u.map((e=>e.id)),renderColumns:S}},katex:t.KatexStore.getKatex(),resultCache:new Map,regExpCache:new Map,experimentService:M().default,collectionFeatureGates:(0,C().W)(),formulasModule:r},renderers:m});if(w){const e=g(w);i.clipboardData.setData("text/html",e)}}}function H(e){const{row:t,x:o,collectionViewBlockStore:n,schema:r,currentPropertyFormats:s,formulasModule:c}=e,d=s[o],m=function(e,t,o,n){const i=t[o];if(!i)throw new Error("Property not found");if(!e.isDefined())return[];const r=e.getPropertyValue(o);if("formula"===i.type){if(!n)return[];if("v2"===i.version){if(!i.formula2)return[];const t=n.evaluateCollectionFormula2({block:e.getModel(),property:o,formulaCode:i.formula2.code,getRecordModel:e.getRecordModel,intl:x().Z.getIntl(),userTimeZone:(0,p().r)(),depth:0,visitedProperties:new Set,resultCache:new Map,regExpCache:new Map,experimentService:M().default,collectionFeatureGates:(0,C().W)()});return t?(0,u().j4)(t):[]}{const i=n.propertyToFormulaValueAsString({property:o,schema:t,block:e.getModel(),getRecordModel:e.getRecordModel,collectionRequestContext:{userId:void 0,userTimeZone:(0,p().r)(),depth:0,intl:x().Z.getIntl(),resultCache:new Map,regExpCache:new Map,visitedProperties:new Set,experimentService:M().default,collectionFeatureGates:(0,C().W)()}});return b().TPx(i)}}if("created_time"===i.type&&e.getCreatedTime())return a().d7(l().CQ(e.getCreatedTime(),(0,p().r)()));if("created_by"===i.type&&e.getCreatedByPointer()){const{table:t,id:o}=e.getCreatedByPointer()??{};return o&&t===_().KJ?[b().YCD(["u",o])]:o?[b().YCD(["r",o])]:[]}if("last_edited_time"===i.type&&e.getLastEditedTime())return a().d7(l().CQ(e.getLastEditedTime(),(0,p().r)()));if("last_edited_by"===i.type&&e.getLastEditedByPointer()){const{table:t,id:o}=e.getLastEditedByPointer()??{};return o&&t===_().KJ?[b().YCD(["u",o])]:o?[b().YCD(["r",o])]:[]}return r||[]}(t,r,d.property,c);if(!t.isDefined())return[m,void 0];return[m,(0,i().L)({property:d.property,schema:r,block:t.getModel(),getRecordModel:n.getRecordModel,collectionRequestContext:{userId:void 0,userTimeZone:(0,p().r)(),depth:0,intl:x().Z.getIntl(),visitedProperties:new Set,resultCache:new Map,regExpCache:new Map,experimentService:M().default,collectionFeatureGates:(0,C().W)()},exportedFilePaths:!1,formulasModule:c})]}function q(e){const{row:t,x:o,columnOrder:n,simpleTableStore:i}=e,r=t.getPropertyStore(n[o]);return[r.getValue()||[],(0,g().Xh)({textValue:r.getValue(),getRecordModel:i.getRecordModel,userTimeZone:(0,p().r)(),intl:x().Z.getIntl()})]}function W(e){z(e),K(e)}function G(e){const{clipboardActions:t,environment:o,selection:n,currentRows:i,event:r,transaction:a,markdownLinkifyIt:s,tinyMceMicrosoftWordPasteFilter:l}=e;if(!r.clipboardData)return;let c;const d=r.clipboardData.getData(S().mH),u=r.clipboardData.getData("text/html");if(d)c=JSON.parse(d);else if(u){const e=document.createElement("div");e.innerHTML=u;const t=e.querySelector("table");if(t){const e=t.querySelectorAll("tr");c=[];for(const t of Array.from(e)){const e=[],o=t.querySelectorAll("td, th");for(const t of Array.from(o)){const o=b().TPx(t.textContent||"");e.push([o,void 0])}c.push(e)}}}if(!c){const e=t.getInlineTextValueFromClipboardData({event:r,markdownLinkifyIt:s,tinyMceMicrosoftWordPasteFilter:l});e&&(c=[[[e,void 0]]])}if(c){const t=S().AV(n),r=c[0].length;let s=Math.floor((t.maxCol-t.minCol+1)/r);0===s&&(s=1);const l=c.length;let d=Math.floor((t.maxRow-t.minRow+1)/l);0===d&&(d=1);for(let o=0;o<d;o++)for(let n=0;n<s;n++){const s=t.minCol+n*r,d=t.minRow+o*l;for(let t=0;t<l;t++){let o=i[d+t];if(!o){const t="selectionKey"in e?$(e):T().nS(e);t&&(e.currentRows.push(t),o=t)}for(let n=0;n<r;n++){const i=c[t][n];if(!i)continue;const r=s+n;"currentPropertyFormats"in e?Q({rowStore:o,x:r,serializedValue:i,currentPropertyFormats:e.currentPropertyFormats,transaction:a,schema:e.schema}):Y({rowStore:o,x:r,serializedValue:i,columnOrder:e.columnOrder,transaction:a})}}}const u={start:{col:t.minCol,row:t.minRow},end:{col:t.minCol+r*s-1,row:t.minRow+l*d-1}};"selectionKey"in e?F({environment:o,selectionKey:e.selectionKey,selection:u}):T().pB({environment:o,start:u.start,end:u.end,simpleTableStore:e.simpleTableStore})}}function $(e){const{environment:t,currentRows:o,collectionContextStore:n,selectionKey:i,transaction:r}=e,{groupFormat:a}=i,s=A().IW({environment:t,collectionContextStore:n,groupsPointer:a?[a]:[],insertAtIndex:o.length,shouldCoerce:!0,transaction:r,from:{createBlock:"table_paste_selection"},inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache});return null==s?void 0:s.newStore}function Q(e){var t;const{rowStore:o,x:n,serializedValue:i,currentPropertyFormats:r,transaction:s,schema:l}=e,c=r[n];if(!c)return;if("verification"===(null===(t=l[c.property])||void 0===t?void 0:t.type))return;const[d,u]=i,p=o.getPropertyStore(c.property);if(D().sO({environment:p.environment,store:p,value:d,transaction:s}),u){var f;const e=d?a().g(d):void 0,t=(0,m().jy)(e,(null===(f=I().default.secureFileConfig)||void 0===f?void 0:f.rootPath)??"","");B().nj({store:o,source:u,fileIds:t.map((e=>e.id)),transaction:s})}}function Y(e){const{rowStore:t,x:o,serializedValue:n,transaction:i,columnOrder:r}=e,a=r[o];if(!a)return;const[s,l]=n,c=t.getPropertyStore(a);D().sO({environment:c.environment,store:c,value:b().V3g(s,{removeSuggestionAnnotationsAndText:!1,removeSuggestionAnnotations:!0,removeDiscussions:!0}),transaction:i})}function J(e){let{environment:t,collectionViewStore:o,currentValue:n}=e;U().createAndCommit({userAction:"tableActions.toggleTableVerticalLines",environment:t,canUndo:!0,perform:e=>{R().FH({stores:[o],update:{hide_table_vertical_lines:!n},transaction:e})}})}function X(e){let{environment:t,collectionViewStore:o,currentValue:n}=e;const i="title"===n?void 0:"title";U().createAndCommit({userAction:"tableActions.toggleTableSubitemToggleOnTitle",environment:t,canUndo:!0,perform:e=>{R().FH({stores:[o],update:{table_subitem_toggle_column:i},transaction:e})}})}function ee(e){let{environment:t,collectionViewStore:o,currentValue:n}=e;const i=(0,d().oz)(o.getType()??"table")??"table_properties",r=o.getFormat()[i],a=null==r?void 0:r.map((e=>({...e,wrap:!n})));U().createAndCommit({userAction:"tableActions.toggleTableWrapCells",environment:t,canUndo:!0,perform:e=>{R().FH({stores:[o],update:{table_wrap:!n,[i]:a},transaction:e})}})}function te(e){let{property:t,collectionViewStore:o,format:n,formatKey:i,environment:r,currentValue:a}=e;const s=!a,l=o.getFormat().table_wrap,c=n[i]||[];let d=!0;const u=c.map((e=>{let o;return o=e.property===t?s:Boolean(l||e.wrap),o||(d=!1),{...e,wrap:o}})),p={...n,[i]:u,table_wrap:d};U().createAndCommit({userAction:"tableActions.toggleWrapColumn",environment:r,canUndo:!0,perform:e=>{k().iG({collectionViewStore:o,update:{format:p},transaction:e})}})}function oe(e){let{environment:t,collectionContextStore:o,currentIndex:n,entrypoint:i,transaction:r,propertyAction:a}=e;const s=o.collectionViewStore(),l=o.normalizedFormatStore.state;if(!s||void 0===n)return;const c=o.frozoneStore.state.frozenIndex;let d;switch(a){case"toggle":c!==n?d=n:c===n&&(d=-1);break;case"delete":case"hide":if(!(void 0!==c&&n<=c))return;d=c-1;break;case"duplicate":if(!(void 0!==c&&n<=c))return;d=c+1;break;case void 0:if(c!==n)d=n;else if(c===n)return}const u={...l,table_frozen_column_index:d};o.frozoneStore.setState({...o.frozoneStore.state,frozenIndex:d}),d&&M().default.logEvent("freeze_columns","true",{from:i}),P().wd({environment:t,collectionContextStore:o,action:void 0===d?"table_unfreeze_columns":"table_freeze_column",entrypoint:i,propertyIndex:d}),B().sW({store:s.getFormatStore(),data:u,transaction:r})}},968377:(e,t,o)=>{o.d(t,{Ct:()=>g,Hl:()=>v,c0:()=>b,fg:()=>h,sp:()=>y});o(670560),o(267602),o(653476),o(731107),o(228244),o(667294);var n=()=>o(933868),i=()=>o(306164),r=()=>o(542487),a=()=>o(788860),s=()=>o(239482),l=()=>o(826955),c=()=>o(465755),d=()=>o(308186),u=()=>o(282662),p=()=>o(636340),m=()=>o(269299),f=o(785893);function g(e){const{environment:t,currentSpaceViewStore:o,orderedTeamIds:n,userAction:r}=e;if(m().createAndCommit({userAction:r,environment:t,canUndo:!0,perform:e=>{p().sW({store:o,data:{joined_teams:n},transaction:e})}}),e.isExplicitUserAction){const{key:n,startPosition:r,endPosition:a}=e.dropArgs,s=l().zX.createChildStore(o,{table:i().e0,id:n});c().er(t,{store:s,start_position:r,end_position:a})}}async function v(e){let{transaction:t,...o}=e;const n=await h(o);if("user_cancelled_move"===n)return"user_cancelled_move";if(0===n.length)return"not_cleared";for(const{blockStore:i,permissions:r}of n)p().sW({store:i,data:{permissions:r},transaction:t});return"cleared"}async function h(e){const{moveToTeam:t,permissionsUpdateItems:o}=function(e){let{moveStores:t,moveTargetStore:o}=e;const n=t.reduce(((e,t)=>(e[t.id]=(0,s().VP)(t),e)),{}),i=(0,s().VP)(o),r=[];for(const a of t){const e=_({blockStore:a,moveFromTeam:n[a.id],moveToTeam:i});e&&r.push(e)}return{moveToTeam:i,permissionsUpdateItems:r}}(e);if(0===o.length)return[];const n=await async function(e){let{numPagesMoved:t,moveToTeam:o,permissionsUpdateItems:n}=e;if(0===n.length)return!0;if(!o)return!0;const i=o.getName(),r=n.some((e=>{let{isRemovingRestricted:t}=e;return!0===t})),s=r&&(0,f.jsx)(a()._H,{id:"teamActions.confirmMoveToTeam.removeRestrictedDescription",defaultMessage:" {numPagesMoved, plural, one {This page} other {These pages}} will no longer have restricted access.",values:{numPagesMoved:t}});return(await d().gt({mode:"wide",message:(0,f.jsx)(a()._H,{defaultMessage:"Move {numPagesMoved, plural, one {this page} other {these pages}} to {moveToTeamName}?",id:"teamActions.confirmMoveToTeam.title",values:{moveToTeamName:i,numPagesMoved:t}}),description:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(a()._H,{id:"teamActions.confirmMoveFromTeam.description",defaultMessage:"This will transfer the permissions on {numPagesMoved, plural, one {this page} other {these pages}} to members of {moveToTeamName}. ",values:{moveToTeamName:i,numPagesMoved:t}}),s]})})).accept}({numPagesMoved:e.moveStores.length,moveToTeam:t,permissionsUpdateItems:o});return n?o:"user_cancelled_move"}function _(e){let{blockStore:t,moveFromTeam:o,moveToTeam:i}=e;if(void 0===o&&void 0===i)return;if((null==o?void 0:o.id)===(null==i?void 0:i.id))return;const a=t.getPermissionItems();let s=!1;const l=a.filter((e=>(0,n().Le)(e)?(s=!0,!1):!(0,n().Ir)(e)&&(!o||!(0,r().J2)(e,o.id)&&!(0,r().jc)(e,o.id))));return a.length!==l.length?{blockStore:t,permissions:l,moveFromTeam:o,isRemovingRestricted:s}:void 0}function b(e){const{store:t,teamStore:o,transaction:n,location:i}=e,r=o.getTeamPagesStore(),a=l().G.createChildStore(r,t.pointer);"append"===i.type?u().R3({parentStore:r,appendStore:a,transaction:n,after:i.after}):"prepend"===i.type&&u().Ce({parentStore:r,prependStore:a,transaction:n,before:i.before})}function y(e){const{store:t,teamStore:o,transaction:n}=e,i=o.getTeamPagesStore(),r=l().G.createChildStore(i,t.pointer);u().Od({childToRemoveStore:r,parentStore:i,transaction:n})}},15672:(e,t,o)=>{o.d(t,{KM:()=>p,WO:()=>m,uj:()=>f});o(267602),o(30005);var n=()=>o(659278),i=()=>o(955620),r=()=>o(349220),a=()=>o(718048),s=()=>o(271308),l=()=>o(339523),c=()=>o(550054),d=()=>o(311170),u=()=>o(945287);function p(e){const{environment:t,multiSelection:o,annotation:n,transaction:i}=e;(0,s().L5)(o).forEach((e=>{let{store:o,selection:r}=e;m({environment:t,store:o,annotation:n,selection:r,transaction:i})}))}function m(e){const{environment:t,store:o,annotation:s,selection:p,transaction:m}=e,f=o.getValue();if(!f)return;const g=i().WO0({textValue:f,selection:p,annotation:s});if(a().FX(o)){!function(e){const{blockStore:t,selection:o,annotation:a,transaction:s,fullTextValue:l}=e;(0,r().T)(t.useCrdt(),"Expected CRDT block");const u=t.getBlockTitleStore().getValue(),p=i().Ulv(u,o);if((0,c().wd)(p))return;const m=(0,r().TO)(t.getFormatTextSliceTree()),f=new(n().W3)(i().eeV(u)),{startIndex:g,endIndex:v}=f.getInclusiveStringRangeForSelection(p),{operations:h,invertedOperations:_}=m.getOperationsForAddAnnotation(g,v,a);d().F({transaction:s,store:t,crdtOperations:h,invertedOperations:_,fullTextValue:l})}({blockStore:(0,r().TO)((0,l().sQ)(o)),selection:p,annotation:s,transaction:m,fullTextValue:g})}else{u().Bj({environment:t,store:o,value:g,transaction:m});const e=o.getRecordStoreAtRootPath();u().tV({environment:t,store:o,oldTextValue:f,newTextValue:g,transaction:m,rootStore:e,removeInlineRecords:!1})}}function f(e){const{environment:t,blocks:o,annotation:n,transaction:i}=e;for(const r of o){const e=r.getTitleStore();if(!e)continue;e.getValue()&&m({environment:t,store:e,annotation:n,selection:{startIndex:0,endIndex:1/0},transaction:i})}}},950305:(e,t,o)=>{o.d(t,{Q:()=>g,S:()=>v});o(267602),o(30005);var n=()=>o(659278),i=()=>o(396136),r=()=>o(955620),a=()=>o(349220),s=()=>o(718048),l=()=>o(271308),c=()=>o(339523),d=()=>o(550054),u=()=>o(826955),p=()=>o(311170),m=()=>o(990966),f=()=>o(945287);function g(e){const{environment:t,multiSelection:o,annotationKey:n,transaction:i}=e;(0,l().L5)(o).forEach((e=>{let{store:o,selection:r}=e;v({environment:t,store:o,annotationKey:n,selection:r,transaction:i,updateSelection:!1})}))}function v(e){const{environment:t,store:o,selection:l,annotationKey:g,transaction:v,updateSelection:h}=e,_=o.getValue();if(!_)return;const b=r().STJ({textValue:_,selection:l,annotationKey:g}),y=o.isTable(i().iU)&&(0,c().sQ)(o)||o.getRecordStoreAtRootPath();y instanceof u().G&&s().Ls({store:o,blockStore:y})?function(e){const{blockStore:t,selection:o,annotationKey:i,transaction:s,fullTextValue:l}=e;(0,a().T)(t.useCrdt(),"Expected CRDT block");const c=t.getBlockTitleStore().getValue(),u=r().Ulv(c,o);if((0,d().wd)(u))return;const m=(0,a().TO)(t.getBlockTitleTextSliceTree()),f=new(n().W3)(r().eeV(c)),{startIndex:g,endIndex:v}=f.getInclusiveStringRangeForSelection(u),{operations:h,invertedOperations:_}=m.getOperationsForRemoveAnnotation(g,v,i);p().F({transaction:s,store:t,crdtOperations:h,invertedOperations:_,fullTextValue:l})}({blockStore:y,selection:l,annotationKey:g,transaction:v,fullTextValue:b}):(f().Bj({environment:t,store:o,value:b,transaction:v}),f().tV({environment:t,store:o,oldTextValue:_,newTextValue:b,transaction:v,rootStore:y,removeInlineRecords:!0})),h&&m().setSelection({store:o,selection:l})}},945287:(e,t,o)=>{o.d(t,{Bj:()=>w,IS:()=>k,tV:()=>I,wh:()=>C});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624);var n=()=>o(571493),i=()=>o(526839),r=()=>o(396136),a=()=>o(542973),s=()=>o(81954),l=()=>o(955620),c=()=>o(349220),d=()=>o(513670),u=()=>o(126672),p=()=>o(785890),m=()=>o(539410),f=()=>o(205228),g=()=>o(718048),v=()=>o(465371),h=()=>o(826955),_=()=>o(491927),b=()=>o(744091),y=()=>o(636340),S=()=>o(269299);function w(e){const{store:t,value:o,transaction:i,expectedVersion:a,onlyLogVersionMismatch:s}=e;(0,c().T)(!g().FX(t),"setValueInTitleStore should not be used for updating the title of a CRDT block");const d=l().Zxt(o);S().applyOperation({transaction:i,store:t,operation:{pointer:t.pointer,path:t.path,command:"set",args:t.table===r().iU?(0,n().pp)(d):d,expectedVersion:a,onlyLogVersionMismatch:s}}),k(e)}function k(e){const{environment:t,store:o}=e;if(!o.isTable("block"))return;if(o.inMemoryRecordCache.isTemporaryData)return;const n=o.getRecordStoreAtRootPath();if(!n.inMemoryRecordCache.isMockTextStore){const e=n.getValue();var i;if(e)_().ct(t,{block_id:e.id,type:e.type,is_toggleable:(0,v()._A)(e.type,e.format),parent_collection_id:n.getAssociatedCollectionId()??(null===(i=n.getParentBlockStore())||void 0===i?void 0:i.getAssociatedCollectionId())})}}function I(e){const{environment:t,oldTextValue:o,newTextValue:n,transaction:i,rootStore:r,removeInlineRecords:a}=e;if(r instanceof h().G){const e=new Set(d().zu(l().llS(o),...l().llS(n)));if((0,p().Z)({blockStore:r,discussionIds:Array.from(e),transaction:i}),r.isType("table_row")){const t=r.getParentBlockStore();t&&(0,p().Z)({blockStore:t,discussionIds:Array.from(e),transaction:i})}const a=new Set(d().zu(l().llS(n),...l().llS(o)));if(x({blockStore:r,discussionIds:a,transaction:i,environment:t}),r.isType("table_row")){x({blockStore:r.getParentBlockStore(),discussionIds:a,transaction:i,environment:t})}}a&&C(e)}function C(e){const{store:t,environment:o,oldTextValue:n,newTextValue:a,transaction:c,rootStore:u}=e;if(u instanceof h().G){const e=u.getValue();if(e){const r=(0,i().m3)({parentBlock:e,oldTextValue:n,newTextValue:a,getRecordValue:t.getRecordValue,baseUrl:f().default.domainBaseUrl,publicDomainName:f().default.publicDomainName});b().lP({environment:o,transaction:c,parentStore:u,inlinePageIds:r})}}const p=d().zu(l().zUo(n),...l().zUo(a));for(const i of p){const e=h().G.createChildStore(u,{table:r().iU,id:i,spaceId:(0,s().J)(u.pointer.spaceId)});y().sW({store:e,data:{alive:!1},transaction:c})}}function x(e){const{blockStore:t,discussionIds:o,transaction:n,environment:i}=e;if(t)for(const r of o){(0,u().t)({transaction:n,blockStore:t,discussionId:r});const e=h().t1.createChildStore(t,{table:a().qF,id:r,spaceId:(0,s().J)(t.pointer.spaceId)});e.isSuggestionDiscussion()&&m().vh({environment:i,transaction:n,discussionStore:e,addModifiedBlockIdsAfter:[t.id]})}}},734558:(e,t,o)=>{o.d(t,{MY:()=>g,P2:()=>v,QT:()=>h});o(670560),o(267602),o(916054),o(470928),o(30005),o(241792),o(228244);var n=()=>o(955620),i=()=>o(298433),r=()=>o(513670),a=()=>o(696459),s=()=>o(539410),l=()=>o(505783),c=()=>o(271308),d=()=>o(550054),u=()=>o(279386),p=()=>o(676922),m=()=>o(15672),f=()=>o(950305);function g(e){const{environment:t,multiSelection:o,annotation:g,transaction:v}=e,h=(0,i().gO)(g),_=(0,c().L5)(o),b=s().DH(o),y=b?u().MT.getMode(b):"default",S=(0,d().KF)([h],o,{}),w=n().LAI(g)&&r().Xy(g,S[h]),k=!n().xw5(g)&&!n().BIG(g)&&!n().LAI(g)&&Boolean(S[h])||w;if("default"!==y&&n().X5l(g)&&"translate_unlocked"!==y&&"ai_co_editing"!==y)if("suggest"===y){const e=s().oG(t,v,o),i=e.id,r=k?[n().GKr.SuggestionUnannotate,i,g]:[n().GKr.SuggestionAnnotate,i,g],a=[];_.forEach((e=>{let{store:o,selection:i}=e;const s=o.getValue(),c=n().Ulv(s,i),d=n().EX_({textValue:s,startIndex:c.startIndex,endIndex:c.endIndex}).find((e=>{let{annotation:i}=e;if(n().u2m(i)||n().Jeu(i)){const e=n().EpE(i);if(1===e.length&&e[0]===h){const e=n().fgJ(i),r=l().cC({store:o,discussionId:e});if(r)return l().Ld(r,t.currentUser)}}}));d&&d.startIndex<=c.startIndex&&d.endIndex>=c.endIndex||(m().WO({environment:t,store:o,annotation:r,selection:c,transaction:v}),a.push(o.id))})),a.length>0&&s().vh({environment:t,transaction:v,discussionStore:e,addModifiedBlockIdsAfter:a})}else"translate_locked"===y?p().Xb():(0,a().t1)(y);else _.forEach((e=>{let{store:o,selection:i}=e;k?f().S({environment:t,store:o,annotationKey:n().c14(g),selection:i,transaction:v,updateSelection:!1}):m().WO({environment:t,store:o,annotation:g,selection:i,transaction:v})}))}function v(e){const{environment:t,blocks:o,annotation:i,transaction:a}=e,s=n().J7s(i),l=r().oA(o.map((e=>{const t=e.getTitleStore();if(!t)return;const o=t.getValue();return o?{block:e,titleStore:t,titleValue:o}:void 0}))),c=l.every((e=>{let{titleValue:t}=e;return t.every((e=>n().hDy(e).some((e=>n().J7s(e)===s))))}));for(const{titleStore:n}of l)h({environment:t,annotation:i,textStore:n,action:c?"removeAnnotationType":"annotate",transaction:a})}function h(e){const{environment:t,annotation:o,transaction:i,textStore:r,action:a}=e;"annotate"===a?m().WO({environment:t,store:r,annotation:o,selection:{startIndex:0,endIndex:1/0},transaction:i}):f().S({environment:t,store:r,annotationKey:n().c14(o),selection:{startIndex:0,endIndex:1/0},transaction:i,updateSelection:!1})}},970105:(e,t,o)=>{o.d(t,{AE:()=>ct,E3:()=>dt,KM:()=>Ze().KM,MY:()=>Ke().MY,N3:()=>We,Nh:()=>gt,O5:()=>lt,ON:()=>ft,Q0:()=>at,QT:()=>Ke().QT,QX:()=>je().Q,ST:()=>je().S,VO:()=>ut,WO:()=>Ze().WO,YV:()=>ot,Zl:()=>vt,aS:()=>nt,ao:()=>Je,bY:()=>mt,f8:()=>bt,fs:()=>tt,g2:()=>it,gc:()=>Xe,gy:()=>ht,hJ:()=>Ge,lZ:()=>rt,mM:()=>$e,n2:()=>et,pe:()=>He,pz:()=>ze,sO:()=>Ye,vE:()=>_t,wA:()=>st});o(821057),o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(470928),o(30005),o(241792),o(228244),o(258429);var n=()=>o(492788),i=()=>o(506347),r=()=>o(731415),a=()=>o(403721),s=()=>o(135857),l=()=>o(659278),c=()=>o(799891),d=()=>o(998411),u=()=>o(334643),p=()=>o(530980),m=()=>o(375255),f=()=>o(572680),g=()=>o(396136),v=()=>o(602299),h=()=>o(542973),_=()=>o(81954),b=()=>o(185610),y=()=>o(955620),S=()=>o(572948),w=()=>o(716676),k=()=>o(349220),I=()=>o(513670),C=()=>o(696459),x=()=>o(916673),T=()=>o(799454),M=()=>o(531149),P=()=>o(629513),A=()=>o(650996),R=()=>o(236692),B=()=>o(717245),E=()=>o(785890),D=()=>o(539410),U=()=>o(8208),F=()=>o(958783),N=()=>o(205228),V=()=>o(643937),L=()=>o(718048),O=()=>o(201741),Z=()=>o(553848),j=()=>o(505783),K=()=>o(641702),z=()=>o(615676),H=()=>o(316834),q=()=>o(250625),W=()=>o(429725),G=()=>o(527278),$=()=>o(191003),Q=()=>o(271308),Y=()=>o(239482),J=()=>o(122479),X=()=>o(852465),ee=()=>o(148126),te=()=>o(832924),oe=()=>o(321930),ne=()=>o(339523),ie=()=>o(590058),re=()=>o(505462),ae=()=>o(550054),se=()=>o(465371),le=()=>o(874210),ce=()=>o(32969),de=()=>o(543934),ue=()=>o(752114),pe=()=>o(35982),me=()=>o(379072),fe=()=>o(687647),ge=()=>o(279386),ve=()=>o(762557),he=()=>o(138912),_e=()=>o(121700),be=()=>o(56810),ye=()=>o(27475),Se=()=>o(482162),we=()=>o(826955),ke=()=>o(127519),Ie=()=>o(445264),Ce=()=>o(311170),xe=()=>o(30238),Te=()=>o(242619),Me=()=>o(220228),Pe=()=>o(198732),Ae=()=>o(676922),Re=()=>o(80072),Be=()=>o(627817),Ee=()=>o(752127),De=()=>o(497065),Ue=()=>o(844085),Fe=()=>o(879952),Ne=()=>o(945287),Ve=()=>o(595426),Le=()=>o(990966),Oe=()=>o(448046),Ze=()=>o(15672),je=()=>o(950305),Ke=()=>o(734558);function ze(e){const{multiSelection:t,environment:o,transaction:n}=e,i=(0,Q().L5)(t);if(0===i.length)return;if(1===i.length){const{store:e,selection:t}=i[0];return He({environment:o,transaction:n,store:e,selection:t})}const r=t.start.store,a=L().FX(r),s=i.some((e=>{let{store:t}=e;return L().FX(t)!==a})),l=(0,Q().Nj)({multiSelection:t,includeNonSelectable:!1});if(!l)return;const{treeRange:d}=l;if(a&&!s){const e=new Set,i=[];for(const t of d.iterateDeletion())if("delete"===t.operation)for(const{childToRemove:e}of(0,oe().XL)({treeOperation:t,deleteFrom:"record-store-parent"}))i.push(e);else if("move"===t.operation)for(const o of t.movingChildren)o.value.store&&e.add(o.value.store);let r=0;for(const t of i)r+=1+(0,X().MI)({blockStore:t,transclusionReferences:"omit",childPages:"omit"}).length;r<=L().kZ?V().Cf({environment:o,transaction:n,multiSelection:t,removedBlocks:i,movedBlocks:e}):c().log({level:"info",from:"deleteMultiSelection",type:"crdt:deleteMultiSelectionOverBlockLimit",data:{miscDataToConvertToString:{blockLimit:L().kZ,numBlocksInSelection:r}}})}const{start:u,end:p}=t;He({environment:o,transaction:n,selection:{startIndex:u.index,endIndex:1/0},store:u.store});const m=(0,ae().x0)(u.store),f=p.store,g=L().FX(f);if(a&&g){const e=(0,k().TO)((0,ne().sQ)(f),"End of selection must be in a block");He({environment:o,transaction:n,selection:{startIndex:0,endIndex:p.index},store:p.store}),V().tE({transaction:n,sourceBlockStore:e,targetStore:r})}else m?Xe({environment:o,transaction:n,sourceStore:p.store,sourceIndex:p.index,targetStore:u.store,targetIndex:m.endIndex}):He({environment:o,transaction:n,store:p.store,selection:{startIndex:p.index,endIndex:1/0}});for(const c of d.iterateDeletion())(0,oe().D_)({transaction:n,treeOperation:c,deleteFrom:"record-store-parent"});Le().setSelection({store:u.store,selection:m}),Fe().eP({environment:o,store:d.start.value.store})}function He(e){qe({...e,updateSelection:!0,removeInlineRecords:!0})}function qe(e){const{environment:t,store:o,selection:n,transaction:i,updateSelection:r,removeInlineRecords:a}=e,s=o.getValue(),c=y().Ulv(s,n);if(c.startIndex===c.endIndex)return void(r&&Le().setSelection({store:o,selection:c}));const d=y()._QS(s,n.startIndex,n.endIndex),u=o.isTable(g().iU)&&(0,ne().sQ)(o)||o.getRecordStoreAtRootPath();if(u instanceof we().G&&L().Ls({store:o,blockStore:u})){const n=(0,k().TO)(u.getBlockTitleTextSliceTree()),r=new(l().W3)(y().eeV(s)),{startIndex:p,endIndex:m}=r.getInclusiveStringRangeForSelection(c),{operations:f,invertedOperations:g}=n.getOperationsForDeleteText(p,m);Ce().F({transaction:i,store:u,crdtOperations:f,invertedOperations:g,fullTextValue:d}),Ne().IS(e),a&&Ne().wh({environment:t,store:o,oldTextValue:s,newTextValue:d,transaction:i,rootStore:u})}else{var p;Ne().Bj({environment:t,store:o,value:d,transaction:i,expectedVersion:null===(p=o.getAncestorBlockStoreAtRootPath())||void 0===p?void 0:p.getVersion(),onlyLogVersionMismatch:!0}),Ne().tV({environment:t,store:o,oldTextValue:s,newTextValue:d,transaction:i,rootStore:u,removeInlineRecords:a})}r&&Le().setSelection({store:o,selection:{startIndex:c.startIndex,endIndex:c.startIndex}})}function We(e){const t=ke().default.state;if("editing"!==t.mode)return;if((0,$().iG)(t.multiSelection))return;const{start:o,end:n}=t.multiSelection,i="start"===e.direction?o:n;ke().default.setState({...t,multiSelection:{start:i,end:i}})}function Ge(e){const{environment:t,editorMode:o,disableMentions:n,disableSlashCommands:i,disableEmojiCommands:a,disableFilters:s,string:c,transaction:d,selectAll:p,usePopupForMentionOnMobile:m,mentionSectionOrdering:f}=e,g=(0,u().lU)(e.disabledMentionTypes);let v;const h=[];if("editing"!==ke().default.state.mode)return;let _="multiSelection"in e?e.multiSelection:(0,$().TD)(e);const b=(0,$().QY)(_);let S=!1;const w=b?{canRestore:!0,oldSelection:b,toTextValue:b.store.getValue()}:{canRestore:!1};"default"===o||"translate_unlocked"===o||"ai_co_editing"===o?ze({environment:t,multiSelection:_,transaction:d}):"suggest"===o?(0,$().iG)(_)||(S=!0,v=D().oG(t,d,_),D().Sz({environment:t,multiSelection:_,transaction:d,discussionStore:v}),_={start:{store:_.end.store,index:_.end.index},end:{store:_.end.store,index:_.end.index}}):"translate_locked"===o?Ae().Xb():(0,C().t1)(o);const k=y().vJ3(c),I=l().p4(k).length;if(0===I)return;const x=(0,ae().bj)(o);if(v&&S&&x.remove([y().GKr.SuggestionRemoveText,v.id]),"suggest"===o){if(v||0!==_.start.index)v||(v=D().oG(t,d,_,{annotations:x,annotationTypes:[y().GKr.SuggestionRemoveText,y().GKr.SuggestionInsertText],currentUser:t.currentUser}));else{const e=(0,H().i)(_.start.store),o=e?(0,ne().sQ)(e):void 0;v=D().oG(t,d,_,{annotations:r().u.fromArray(y().Rkp(null==e?void 0:e.getValue())),annotationTypes:[y().GKr.SuggestionInsertText],currentUser:t.currentUser},o?{blockStore:o,suggestionTypes:["add_line_break"],currentUser:t.currentUser}:void 0)}x.add([y().GKr.SuggestionInsertText,v.id]),x.remove([y().GKr.SuggestionRemoveText,v.id]),h.push(_.start.store.id)}const T=y().V3y(k,x.toArray());Qe({environment:t,store:_.start.store,tokens:[T],index:_.start.index,transaction:d,updateSelection:!1});const M={startIndex:p?_.start.index:_.start.index+I,endIndex:_.start.index+I};Le().setSelection({store:_.start.store,selection:M}),s||Ve().fP({environment:t,editorMode:o,store:_.start.store,transaction:d}),w.canRestore&&(n||Be()._P({environment:t,textStore:w.oldSelection.store,oldSelection:w.oldSelection.selection,oldTextValue:w.toTextValue,disabledMentionTypes:g,usePopupOnMobile:m,mentionSectionOrdering:f}),i||de()._P({environment:t,textStore:w.oldSelection.store,oldSelection:w.oldSelection.selection,oldTextValue:w.toTextValue}),a||Me()._P({environment:t,textStore:w.oldSelection.store,oldSelection:w.oldSelection.selection,oldTextValue:w.toTextValue}),"suggest"===o&&v&&D().vh({environment:t,transaction:d,discussionStore:v,addModifiedBlockIdsAfter:h}),t.device.isMobile&&O().default.state.enabled&&Z().Z.setState(!0))}function $e(e){Qe({...e,updateSelection:!0})}function Qe(e){const{environment:t,store:o,index:n,transaction:i,selectAll:r,updateSelection:a,editorMode:s}=e;let c,d=e.tokens.map(y().Y_F);if(d.length){if("suggest"===s){const e=o.getAncestorBlockStoreAtRootPath();e&&(c=D().oG(t,i,e),d=y().WO0({textValue:d,selection:{startIndex:0,endIndex:1/0},annotation:[y().GKr.SuggestionInsertText,c.id]}))}const r=o.getValue()||[],a=y().P$X(r,d,n);if(L().FX(o)){const t=(0,k().TO)((0,ne().sQ)(o)),r=(0,k().TO)(t.getBlockTitleTextSliceTree()),s=new(l().W3)(y().eeV(o.getValue())).getStringStartIndex(n),{operations:c,invertedOperations:u}=r.getOperationsForInsertTextValue(s,d);Ce().F({transaction:i,store:t,crdtOperations:c,invertedOperations:u,fullTextValue:a}),Ne().IS(e)}else{var u;Ne().Bj({environment:t,store:o,value:a,transaction:i,expectedVersion:null===(u=o.getAncestorBlockStoreAtRootPath())||void 0===u?void 0:u.getVersion(),onlyLogVersionMismatch:!0});const e=o.getRecordStoreAtRootPath();Ne().tV({environment:t,store:o,rootStore:e,transaction:i,oldTextValue:r,newTextValue:a,removeInlineRecords:!1})}if("suggest"===s){const e=o.getAncestorBlockStoreAtRootPath();e&&D().vh({environment:t,transaction:i,discussionStore:(0,k().TO)(c),addModifiedBlockIdsAfter:[e.id]})}}if(a){const e=y().eeV(d).length;Le().setSelection({store:o,selection:{startIndex:r?n:n+e,endIndex:n+e}})}}function Ye(e){const{environment:t,store:o,value:n,transaction:i}=e,r=o.getValue()??[];L().FX(o)?(qe({environment:t,store:o,selection:{startIndex:0,endIndex:1/0},transaction:i,updateSelection:!1,removeInlineRecords:!0}),n&&y().VrM(n)&&Qe({environment:t,store:o,tokens:n,index:0,transaction:i,updateSelection:!1}),Ne().IS(e)):Ne().Bj(e);const a=o.getRecordStoreAtRootPath();if(a instanceof we().G&&r&&"suggest"===ge().MT.getMode(a)){const e=(0,b().K9)(r),n=(0,b().K9)(o.getValue()??[]),s=I().zu(e,...n);(0,E().Z)({discussionIds:s,blockStore:a,transaction:i}),e.forEach((e=>{const o=we().t1.createChildStore(a,{table:h().qF,id:e,spaceId:(0,_().J)(a.pointer.spaceId)});D().vh({environment:t,transaction:i,discussionStore:o})}))}}function Je(e){const{environment:t,store:o,selection:n,transaction:i}=e,r=G().Z.getIntl(),a=p().omK.fromGetRecordValueFn(o.inMemoryRecordCache.makeGetRecordValueFn(t.currentUser.id)),s=o.getValue()??[];let l=0,c=0;for(const u of s){const e=y().J1x(u);if(c<n.startIndex){c+=e;continue}if(c+e>n.endIndex)break;const s=y().hDy(u),p=s.find(y().ZAl);let f;if(p){const n=(0,m().Xh)({textValue:[u],intl:r,getRecordModel:a,userTimeZone:(0,d().r)(),externalIntegrations:he().default.integrations.state});f=y().V3y(n,s.filter((e=>!I().Xy(e,p)))),He({environment:t,store:o,selection:{startIndex:c,endIndex:c+e},transaction:i}),$e({environment:t,store:o,tokens:[f],index:c,transaction:i}),l+=y().J1x(f)-y().J1x(u)}c+=f?y().J1x(f):e}return{startIndex:n.startIndex,endIndex:n.endIndex+l}}function Xe(e){const{environment:t,sourceStore:o,sourceIndex:n,targetStore:i,targetIndex:r,transaction:a}=e,s=y().lzi(o.getValue()),l=y().QaF(s).length,{tokensInsideRange:c}=y().xrQ(s,n,l);c.length>0&&(qe({environment:t,store:o,selection:{startIndex:n,endIndex:l},transaction:a,updateSelection:!0,removeInlineRecords:!1}),$e({environment:t,store:i,tokens:c,index:r,transaction:a}))}function et(e){const{environment:t,shiftKey:o,transaction:i}=e;return function(e){const{transaction:t}=e,o=ke().default.state;if("editing"!==o.mode)return;const{multiSelection:i}=o,r=(0,Q().Nj)({multiSelection:i,includeNonSelectable:!0});if(!r)return;const{tree:a,treeRange:s}=r,l=a.value.store,c=w().o.getIndentOperationsFromTreeRange(s,e.direction);for(const n of c){const{target:e,operation:o}=n,i=(0,oe().kC)({rootStore:l,root:a,target:e});if(void 0===i)throw new Error("Cannot find node to indent");let r=!1;switch(o){case"indentSelf":case"indentSelfAndSubtree":if(i.length>=2){const e=i[i.length-2],n=i[i.length-1];if(n){let i="indentSelf"===o?"self":"subtree";(0,se().BX)(n)&&!Ie().Z.isOpen(n.id)&&(i="subtree");void 0!==Re().dD({blockStore:n,parentStore:e,transaction:t,type:i})&&(r=!0)}}break;case"unindentSelfAndUpdateSiblings":if(i.length>=3){const e=i[i.length-3],o=i[i.length-2],n=i[i.length-1];if(o&&n){void 0!==Re().uv({blockStore:n,parentStore:o,grandparentStore:e,transaction:t})&&(r=!0)}}}r&&w().F.applyMutable(a,n)}n().default.afterNextFlush((()=>{const e=(0,oe().kC)({rootStore:l,root:a,target:s.start}),t=(0,oe().kC)({rootStore:l,root:a,target:s.end}),o=e&&(0,ne().mh)(e[e.length-1]),n=t&&(0,ne().mh)(t[t.length-1]);if(o&&n){const e={start:{store:o,index:i.start.index},end:{store:n,index:i.end.index}};Le().setMultiSelection({multiSelection:e})}}))}({environment:t,transaction:i,direction:o?"unindent":"indent"})}function tt(e){const{transaction:t,direction:o}=e,i=ke().default.state;if("editing"!==i.mode)return!1;const{multiSelection:r}=i,a=(0,Q().tp)({multiSelection:r,filterCommonAncestors:!0,focus:void 0});if(!a)return!1;const s=a.stores;return!("up"===o?Re().A1({transaction:t,blocks:s}):Re().vi({transaction:t,blocks:s}))||(n().default.afterNextFlush((()=>{const[e,t]=ce().C.findSelectablesFromIds([r.start.store.id,r.end.store.id]),o=(null==e?void 0:e.props.store)&&(0,ne().mh)(null==e?void 0:e.props.store),n=(null==t?void 0:t.props.store)&&(0,ne().mh)(null==t?void 0:t.props.store);o&&n&&(Le().setMultiSelection({multiSelection:{start:{store:o,index:r.start.index},end:{store:n,index:r.end.index}},forceEmit:!0}),Ue().Zv())})),!0)}function ot(e){const{transaction:t,environment:o,editorMode:n,multiSelection:i,store:r,newValue:a}=e;let s,c=r,d=a;if("suggest"===n&&i){if(!(0,$().iG)(i)){const e=y().QaF(y().KU1(i.start.store.getValue(),0,i.start.index)),t=e.length,o=y().QaF(y().KU1(i.start.store.getValue(),i.start.index,y().QaF(i.start.store.getValue()).length)),n=l().p4(a),r=y().Vkf(y().KU1(i.end.store.getValue(),i.end.index,y().QaF(i.end.store.getValue()).length)),u=n.slice(t,n.length-r).join(""),p=u.length;d=`${e}${u}${o}`,c=i.start.store,s={start:{store:i.start.store,index:i.start.index+p},end:{store:i.end.store,index:i.end.store===i.start.store?i.end.index+p:i.end.index}}}}else"default"===n&&i&&!(0,$().qS)(i)&&ze({environment:o,transaction:t,multiSelection:i});if(nt({...e,store:c,usingMultiSelection:!0,newValue:d}),s){const e=D().oG(o,t,s);D().Sz({environment:o,transaction:t,multiSelection:s,discussionStore:e})}}function nt(e){const{environment:t,editorMode:o,store:n,newValue:i,disableSlashCommands:r,disableEmojiCommands:a,disableFilters:s,transaction:c,usingMultiSelection:d,disableMentions:u,disabledMentionTypes:p,usePopupForMentionOnMobile:m,mentionSectionOrdering:f}=e,g=n.getValue(),v=y().QaF(g),h=ie().UZ(v,i),_=ke().default.state;if("editing"!==_.mode)return;const b=_.multiSelection.start.index;let S=0;for(let y=0;y<h.length;y++){const e=h[y];if(S+l().p4(e[1]).length>b){if(e[0]===ie().JZ){const t=h[y-1],o=h[y+1];let n=h[y-2],i=h[y+2];if(o&&o[0]===ie().D$)for(i||(i=[ie().JZ,""],h.push(i));S+l().p4(e[1]).length>b&&e[1].endsWith(o[1]);)e[1]=e[1].slice(0,e[1].length-o[1].length),i[1]=o[1]+i[1];else if(t&&t[0]===ie().D$)for(n||(n=[ie().JZ,""],h.unshift(n));S+l().p4(e[1]).length>b&&e[1].startsWith(t[1]);)e[1]=e[1].slice(t[1].length),n[1]=n[1]+t[1],S-=l().p4(t[1]).length}break}S+=l().p4(e[1]).length}let w=!1,k=!1,I=0;for(let T=0;T<h.length;T++){const[e,i]=h[T],d=l().p4(i).length;if(e===ie().D$)w=!0,Ge({environment:t,editorMode:o,store:n,selection:{startIndex:I,endIndex:I},string:i,disableSlashCommands:r,disableEmojiCommands:a,disableFilters:s,transaction:c,disableMentions:u,disabledMentionTypes:p,usePopupForMentionOnMobile:m,mentionSectionOrdering:f}),I+=d;else if(e===ie().NL)if("suggest"===o){const e={start:{store:n,index:I},end:{store:n,index:I+d}},o=y().KU1(n.getValue(),e.start.index,e.end.index),r=y().lzi(o);for(const a of r){const o=y().QaF([a]),r=l().p4(o).length,s=y().hDy(a).filter((e=>{const o=y().fgJ(e),i=j().cC({store:n,discussionId:o});if(i)return j().Ld(i,t.currentUser)})),d=s.find((e=>y().$b8(e))),u=s.find((e=>y().pGj(e)));if(d){I+=r;continue}if(u){w=!0,k=i===y().qyI,He({environment:t,store:n,selection:{startIndex:I,endIndex:I+r},transaction:c});continue}const p=D().oG(t,c,e);D().Sz({environment:t,multiSelection:e,transaction:c,discussionStore:p});const m=e.start.index+r;Le().setSelection({store:e.start.store,selection:{startIndex:m,endIndex:m}}),I+=r}}else"default"===o||"translate_unlocked"===o||"ai_co_editing"===o?(w=!0,k=i===y().qyI,He({environment:t,store:n,selection:{startIndex:I,endIndex:I+d},transaction:c})):"translate_locked"===o?Ae().Xb():(0,C().t1)(o);else e===ie().JZ&&(I+=d)}const x=!t.TextSelectionCompositionStore.state.isComposing;w&&x&&!k&&"suggest"!==o&&it({environment:t,store:n,usingMultiSelection:d})}function it(e){const{environment:t,usingMultiSelection:o,store:n}=e;if(o){const e=re().get(),t=(0,Q().fx)({range:e,contentEditableLeafRegistry:void 0,allowInvisibleEndSelection:!0});t&&Le().setMultiSelection(t)}else{const e=K().Ut(t);e&&(Le().setSelection({store:n,selection:e.selection}),e.forceEmitSelectionStore&&ke().default.emit())}}function rt(e){const{environment:t,editorMode:o,store:n,selection:i,annotation:r,analyticsFrom:a,transaction:s,shareMenuSelection:l}=e;if("suggest"===o)return;He({environment:t,store:n,selection:i,transaction:s});const c=(0,ae().OT)(i,n,o).toArray().filter((e=>e[0]!==y().GKr.Link)),d=[y().YCD(r,c),y().V3y(" ",c)];if($e({environment:t,store:n,tokens:d,index:i.startIndex,transaction:s}),Le().setSelection({store:n,selection:{startIndex:i.startIndex+d.length,endIndex:i.startIndex+d.length}}),y().IWo(r)&&(n.isTable("block")||n.isTable("comment"))){const e=t.currentUser.id,o=y().zEN(r),i=n.getRecordStoreAtRootPath();e&&xe().TI(t,{is_current_user:o===e,user_id:o,user_access_level:(0,J().rc)(o),from:a,block_type:i instanceof we().G?i.getType():void 0,share_menu_selection:l})}else if(y()._bk(r)&&(n.isTable("block")||n.isTable("comment"))){var u;const e=null===(u=y().kxk(r))||void 0===u?void 0:u.groupId,o=n.getRecordStoreAtRootPath();e&&xe().Z0(t,{group_id:e,from:a,block_type:o instanceof we().G?o.getType():void 0})}else if(y().fpG(r)&&(n.isTable("block")||n.isTable("comment"))){const e=y().zyO(r),o=n.getRecordStoreAtRootPath();xe().VN(t,{date:e,from:a,block_type:o instanceof we().G?o.getType():void 0})}else if(y().STW(r)&&(n.isTable("block")||n.isTable("comment"))){const e=y().TOT(r),o=n.getRecordStoreAtRootPath();xe().Qq(t,{page_id:e,from:a,block_type:o instanceof we().G?o.getType():void 0})}}function at(e){const{environment:t,editorMode:o,store:n,selection:i,emoji:r,transaction:a}=e;if("suggest"===o)return;He({environment:t,store:n,selection:i,transaction:a});const s=[l().xo.isCustomEmojiString(r)?y().YCD(y().YWq(l().xo.fromCustomEmojiString(r).pointer)):y().V3y(r)];$e({environment:t,store:n,tokens:s,index:i.startIndex,transaction:a}),Le().setSelection({store:n,selection:{startIndex:i.startIndex+s.length,endIndex:i.startIndex+s.length}})}function st(e){const{environment:t,editorMode:o,shouldStripTokens:n,disableFilters:i,store:r,selection:a,transaction:s}=e,c=(0,ae().fM)(r,a,n),d=n?y().Jcv(r.getValue()):y().QaF(r.getValue());let u=l().p4(d),p=0;for(const l of c)if(p++,0===l)u.unshift("\t");else{const e=l+p;u=[...I().tP(u,0,e),"\t",...I().tP(u,e)]}nt({environment:t,store:r,editorMode:o,newValue:y().vJ3(u.join("")),disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,disableFilters:i,transaction:s}),Le().setSelection({store:r,selection:{startIndex:a.startIndex+1,endIndex:a.endIndex+p}})}function lt(e){const{environment:t,editorMode:o,shouldStripTokens:n,disableFilters:i,store:r,selection:a,transaction:s}=e,c=(0,ae().fM)(r,a,n),d=n?y().Jcv(r.getValue()):y().QaF(r.getValue());let u=l().p4(d),p=0,m=0;for(const l of c){const e=l-p;0===e?"\t"===u[0]?(u=I().tP(u,1),p+=1):" "===u[0]&&" "===u[1]?(u=I().tP(u,2),p+=2):" "===u[0]&&(u=I().tP(u,1),p+=1):"\t"===u[e+1]?(u=[...I().tP(u,0,e+1),...I().tP(u,e+2)],p+=1):" "===u[e+1]&&" "===u[e+2]?(u=[...I().tP(u,0,e+1),...I().tP(u,e+3)],p+=2):" "===u[e+1]&&(u=[...I().tP(u,0,e+1),...I().tP(u,e+2)],p+=1),l<=a.startIndex&&(m=p)}nt({environment:t,store:r,editorMode:o,newValue:y().vJ3(u.join("")),disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,disableFilters:i,transaction:s}),Le().setSelection({store:r,selection:{startIndex:a.startIndex-m,endIndex:a.endIndex-p}})}function ct(e){const{token:t,store:o,readOnly:n}=e;let i=0,r=0;if(t.textValue){let e=0;for(;e<t.tokenIndex;)i+=y().J1x(t.textValue[e]),e++;r=i+y().J1x(t.textValue[e])}Le().setSelection({store:o,selection:{startIndex:i,endIndex:r},readOnly:n})}function dt(e,t){if(!t)return;const o=me().default.getSessionContext(t);if(!o)return;const n=o.getCombinedSteps().find((t=>{var o;return"queryDatabase"===t.type&&(null===(o=t.ephemeralViewData)||void 0===o?void 0:o.assistantQueryDatabaseResultId)===e}));if(null==n||!n.ephemeralViewData)return;const{collectionViewBlockId:i,collectionViewId:r}=n.ephemeralViewData;return B().M.open({collectionViewId:r,collectionViewBlockId:i})}function ut(e){var t;const{environment:o,event:n,interactiveToken:r,store:l,parentStore:c,canEdit:d}=e,u=y().hDy(r.textToken),p=y().rlz(u),m=y().wPk(u),b=y().V8Y(u),w=y().jC0(u),k=y().zrg(u).map((e=>y().h19(e))),I=y().$d7(u).map((e=>y().fgJ(e))),x=y().eQP(u),B=o.RouterStore.state.route,E=Boolean("chat"===B.name);if(y().YrK(r.textToken)&&!n.shiftKey&&!n.altKey){if(n.preventDefault(),!ve().Z.state.open){const e=r.textToken,t=document.createRange(),n=r.node.parentNode,i=r.tokenIndex+1;if(t.setStart(n,r.tokenIndex),t.setEnd(n,i),re().set(t,o.device),it({environment:o,store:l,usingMultiSelection:!0}),"editing"!==ke().default.state.mode)return;const a=(0,$().QY)(ke().default.state.multiSelection);if(!a)return;return void Pe().qn({environment:o,selectedToken:{token:e,position:a.selection},selectionRect:r.node.getBoundingClientRect(),analyticsFrom:"click_token"})}Pe().Wj()}const D=[...k,...I].map((e=>{const t=c||l;return we().t1.createChildStore(t,{table:h().qF,id:e,spaceId:(0,_().J)(t.pointer.spaceId)})}));if(x&&null!==(t=me().default.getActiveSession())&&void 0!==t&&t.hasPendingOperations())return void A().assistantDependency.load().then((e=>{let{assistantMenuActions:t}=e;t.openAssistantFromEdit({environment:o})}));const{unresolved:V}=X().bB(D);let L,O,Z=!1;if(V.length>0){const e=Boolean(p||b),t=fe().Z.state.open||o.device.isMobile,i=(0,ne().sQ)(l);if(e&&t)T().LZ();else if(i){const r=n.target&&n.target.getBoundingClientRect();if(U().Z.reset(),T().Ib({environment:o,blockStore:i,analyticsFrom:"existing_comment",discussionIds:V.map((e=>e.id)),rect:r,shouldFocusDiscussion:!1,recursivelyLoadAllDiscussions:!1,property_id:_e().Z.state.isOpen?_e().Z.state.property:ye().Z.state.isOpen?ye().Z.state.property:void 0}),Z=!0,e&&!t)return void n.preventDefault()}}else{X().dv(l)||le().Z.find((e=>e.isEditing()))||T().LZ()}if(y().ujB(u)){var j;U().Z.setActiveWithSource("text_annotation"),Z&&U().Z.setState({...U().Z.state,overlapsExistingDiscussionMenu:!0});const e=null===(j=te().default.UpdateSidebarCommentScroller)||void 0===j?void 0:j.getNode();e&&e.scrollTo({top:0,behavior:"smooth"})}else U().Z.reset();p&&(L=mt(y().zW$(p)));let K,z=!1;if(b){O=y().TOT(b);const e=we().G.createChildStore(c||l,{table:g().iU,id:O});z=e.isNavigableBlock();const t=(n.altKey||Se().default.isSidePeekOpen())&&!n.metaKey;L=(0,W().ZP)({store:e,openInSidePeek:t,preferPublicLink:(0,ee().Sr)(o),pageVisitSource:i().tY.LinkInPage})}if(w){const e=y().Vv0(w);if("query_database_result"===e.type)return void dt(e.queryDatabaseResultId,l.inMemoryRecordCache.relatedAssistantSessionId);if("slack"===e.type)L=(0,S().St)({baseUrl:e.baseUrl,domain:e.domain,channelId:e.channelId,messageId:e.messageId,threadTs:e.threadTs}),K="slack";else if("google-drive"===e.type)L=e.url,K="google-drive";else if("helpdoc"===e.type)L=e.url,K="helpdoc";else if("github"===e.type)L=e.url,K="github";else if("url"===e.type)L=e.href;else if("jira"===e.type)L=e.url,K="jira";else if((0,C().$K)(e.type)&&"block"!==e.type)(0,C().t1)(e.type);else{const t=e.blockId;if(t){const e=we().G.createChildStore(c||l,{table:g().iU,id:t});z=e.isNavigableBlock();const r=e.getNavigableBlockStore();if(!r)return;L=E&&!n.metaKey?(0,a().tj)({pageVisitSource:i().tY.AIQna,pageId:r.id,scrollToBlockId:r.id!==e.id?e.id:void 0,isMobile:o.device.isMobile}):(0,W().ZP)({store:e,openInSidePeek:!1,preferPublicLink:(0,ee().Sr)(o),pageVisitSource:i().tY.AIQna})}}}if(L){if(F().default.isComposingNewDiscussion())return void n.preventDefault();n.preventDefault(),Le().clear({environment:o}),Oe().lY();const{device:e}=o;if(e.isIOS&&Le().blurActiveElement(),n.shiftKey&&!n.altKey)return;const t=(0,f().parseRoute)({url:L,baseUrl:N().default.domainBaseUrl,publicDomainName:N().default.publicDomainName,isMobile:o.device.isMobile,protocol:N().default.protocol,currentUrl:window.location.href});if((0,f().iJ)(t)||"chat"===t.name){const e=q().DJ(n);if(De().c4({environment:o,url:L,openInNew:e}),b&&O&&xe().SK(o,{page_visit_id:be().$g.getCurrentPageVisitId(),mentioned_page_id:O,source_type:"inline_page_mention_token",hover_preview_enabled:!0,is_navigable_block:z}),l.inMemoryRecordCache.isSyntheticAssistantData){const e=me().default.getActiveAssistantConfigurationState(),n="page"===t.name?t.blockId:t.peekViewBlockId;e&&n&&R().trackQnaResultClicked(o,{configurationState:e,clickedPageId:n,resultType:"page",source:"chat"})}}else{if("aiGtmFavoriteImport"===t.name&&o.currentUser.isLoggedIn())return void(0,P().importGtmFavorite)({environment:o,importArgs:t});if("external"===t.name&&l.inMemoryRecordCache.isSyntheticAssistantData){const e=me().default.getActiveAssistantConfigurationState();e&&K&&R().trackQnaResultClicked(o,{configurationState:e,resultType:K,source:"chat"})}Ee().D({environment:o,url:L})}}else{if(d){const{textToken:e,node:t,tokenIndex:i}=r,a=y().hDy(e);if(y().K9C(a)){const e=l.getAncestorBlockStoreAtRootPath();if(e){if("suggest"===ge().MT.getMode(e))return}return Oe().lY(),M().b(o,{originRect:t.getBoundingClientRect(),textStore:l,tokenIndex:i,allowReminders:"comment"!==l.table}),void n.preventDefault()}}if(m){const e=we().T5.createChildStore(l,{table:v().x_,id:m[1],spaceId:m[2]}),t=e.getModel();if(!t)return;const r=Y().Dg(e);if(!r)return;const a=we().jQ.createChildStore(r,t.getParentPointer()).getModel();if(!a)return;const c=we().G.createChildStore(r,a.getParentPointer()).getModel(),d=c&&"table_row"===c.getType()?c.getParentId():a.getParentId(),u=(0,s().Z)({pageId:r.id,scrollToBlockId:d,pageModel:r.getModel(),baseUrl:void 0,discussionId:a.id,pageVisitSource:i().tY.MentionInPage});n.preventDefault(),De().c4({environment:o,url:u})}d&&y().J82(u)&&(n.preventDefault(),pt(e)),d&&(y().xat(u)||y().hH9(u))&&(n.preventDefault(),pt(e))}}function pt(e){var t;const{event:o,interactiveToken:n,environment:i,store:r}=e,{tokenIndex:a}=n,s=(0,ae().Ts)(r.getValue(),a)??{startIndex:0,endIndex:0},l=Array.from(n.node.getClientRects()),c=pe().em(l),d=(null===(t=c.rects.find((e=>pe().uh(e.original,o.clientX,o.clientY))))||void 0===t?void 0:t.translate)??(0,ue().xS)(),u=c.total.x+c.total.width/2,p=(0,ue().qe)({x:o.clientX,y:o.clientY},d).x>u?s.endIndex:s.startIndex;Le().selectAndEditMultiSelection({environment:i,multiSelection:(0,$().TD)({store:r,selection:{startIndex:p,endIndex:p}}),focus:void 0,forceEmit:!1})}function mt(e){const t=x().Nm({str:e,allowNoProtocol:!0}),o=x().Qc(t);return t&&!t.startsWith("/")&&o&&!o.protocol?`http://${e}`:t}function ft(e){const{environment:t,event:o,interactiveToken:n,store:i,parentStore:r}=e;if(!r)return;const a=y().hDy(n.textToken),s=y().V8Y(a);if(s){const e=y().yrl(s);if(!e)return;const n=we().G.createChildStore(r||i,e);o.preventDefault(),Te().Qn({environment:t,stores:[n],left:o.clientX,top:o.clientY,showInput:!1,actionSectionGroupKey:"page_mention",analyticsFrom:"page_mention_block_menu",pageAnnotationToken:{parentStore:r,pageAnnotation:s}})}}function gt(e){Oe().HM({token:e.interactiveToken,store:e.store})}function vt(e){Oe().lY({relatedNode:e.interactiveToken.node})}function ht(e){const{block:t,transaction:o,tokenIndex:n}=e,i=t.getBlockTitleStore();if(!t.getTitleStore()||!i.isDefined()||!i.getValue()||i.getValue().length<n)return!1;const r=i.getValue(),a=(0,ae().Ts)(r,n);return!!a&&(qe({environment:t.environment,store:i,selection:a,transaction:o,updateSelection:!1,removeInlineRecords:!0}),!0)}function _t(e){var t;const{clipboardActions:o,formulasModule:n,store:i,transaction:r}=e,a=o.getFormulaEditorInformation();if(!a)return;if(!("editing"===ke().default.state.mode&&(null===(t=(0,$().QY)(ke().default.state.multiSelection))||void 0===t?void 0:t.selection)))return;const s=i.getValue();if(!s)return;const l=n.textValueToFormulaTokens({formulasModule:n,getRecordModel:i.getRecordModel,sourceCollection:a.parentCollection,textValue:s,featureGates:(0,z().W)()});Ye({environment:i.environment,store:i,value:l,transaction:r})}function bt(e){const{store:t,transaction:o}=e;Ye({environment:t.environment,store:t,value:void 0,transaction:o})}},940417:(e,t,o)=>{o.d(t,{QE:()=>f,aS:()=>m,bt:()=>g});o(267602),o(731107);var n=()=>o(727207),i=()=>o(513670),r=()=>o(271308),a=()=>o(852465),s=()=>o(550054),l=()=>o(127519),c=()=>o(636340),d=()=>o(970105),u=()=>o(990966),p=()=>o(269299);function m(e){const{environment:t,annotation:o}=e,n=l().default.state;if("editing"!==n.mode)return;if(l().default.isEmptySelection())return void u().toggleExtendAnnotation({annotation:o});const{multiSelection:i}=n;(0,r().L5)(i).length>0&&(p().createAndCommit({userAction:"textAnnotationActions.annotateSelection",environment:t,canUndo:!0,perform:t=>{d().MY({...e,transaction:t,multiSelection:i})}}),u().setMultiSelection({multiSelection:i}))}function f(e){const{environment:t,annotationKey:o,blocks:n,transaction:i}=e;for(const r of(0,a().Sd)({blockStores:n,traverseTransclusionReferences:!1})){const e=r.getBlockTitleStore(),n=(0,s().P2)(e);n&&d().ST({environment:t,store:e,annotationKey:o,selection:n,transaction:i,updateSelection:!1})}}function g(e){const{environment:t,store:o,context:r,transaction:a}=e;if(!o.canEdit())return;const{title:s,...l}=o.getProperties(),u=Object.entries(l).reduce(((e,t)=>{let[o,a]=t;if(a){const t=(0,n().KV)(a,r);i().Xy(a,t)||(e[o]=t)}return e}),{});i().xb(u)||c().sW({store:o.getPropertiesStore(),data:u,transaction:a});const p=o.getTitleValue();if(p){const e=(0,n().KV)(p,r);i().Xy(p,e)||d().sO({environment:t,store:o.getBlockTitleStore(),value:e,transaction:a})}}},491308:(e,t,o)=>{o.d(t,{We:()=>V,YV:()=>z,as:()=>K,ew:()=>O});o(159867),o(267602),o(470928),o(241792);var n=()=>o(492788),i=()=>o(731415),r=()=>o(156642),a=()=>o(532850),s=()=>o(431595),l=()=>o(955620),c=()=>o(349220),d=()=>o(513670),u=()=>o(696459),p=()=>o(539410),m=()=>o(643937),f=()=>o(718048),g=()=>o(505783),v=()=>o(316834),h=()=>o(191003),_=()=>o(339523),b=()=>o(550054),y=()=>o(465371),S=()=>o(156538),w=()=>o(32969),k=()=>o(543934),I=()=>o(639832),C=()=>o(279386),x=()=>o(127519),T=()=>o(421654),M=()=>o(676922),P=()=>o(80072),A=()=>o(282662),R=()=>o(332542),B=()=>o(453999),E=()=>o(879952),D=()=>o(970105),U=()=>o(990966),F=()=>o(541199),N=()=>o(28063);function V(e){const{store:t,block:o,targetStore:n,targetBlock:i}=e;o&&(0,f().Ls)({store:t,blockStore:o})&&i&&(0,f().Ls)({store:n,blockStore:i})?m().tE({...e,targetStore:n,sourceBlockStore:o}):L(e)}function L(e){const{environment:t,transaction:o,store:n,targetStore:i}=e,r=(0,b().x0)(i);r?D().gc({environment:t,sourceStore:n,sourceIndex:0,targetStore:i,targetIndex:r.endIndex,transaction:o}):D().pe({environment:t,transaction:o,store:n,selection:{startIndex:0,endIndex:1/0}})}function O(e){const{environment:t,store:o,transaction:i}=e;i.annotateWithUserAction("textBackspaceActions.annotatedContentBlockBackspaceAtBeginning");const s=(0,_().sQ)(o);if(s){if("callout"===s.getType()&&T().FH({stores:[s],update:{block_color:void 0},transaction:i}),s.isType("to_do")){const e=s.getProperties();e&&a().Ml(e.checked)&&F().c({environment:t,blocks:[s],transaction:i})}let e=s,o=r().Ti.text;if(y().fn(s)){const e=s.getType();e&&(o=e)}e=N().vs({environment:t,block:s,blockType:o,transaction:i}),n().default.afterNextFlush((()=>{const o=w().C.findEditableStoreWithin(e);o&&(U().setSelectionAtStart({store:o}),E().eP({environment:t,store:e}))}))}return o}function Z(e){const{environment:t,editorMode:o,multiSelection:n,transaction:r,deleteForwards:a}=e;if("suggest"===o)return void function(e){const{multiSelection:t}=e,o=(0,_().sQ)(t.start.store);if(!o)throw new(s().p8)("Can not make suggest edits without associated block store");(0,h().iG)(t)?function(e){const{environment:t,multiSelection:o,transaction:n,deleteForwards:r,blockStore:a}=e,c=o.start,d={indexOfAboutToBeDeletedChar:r?c.index:c.index-1,indexOfLeadingChar:r?c.index-1:c.index,annotateSelectionIndex:r?[c.index,c.index+1]:[c.index-1,c.index],newCursorIndex:r?c.index+1:c.index-1},u={start:{store:c.store,index:d.annotateSelectionIndex[0]},end:{store:c.store,index:d.annotateSelectionIndex[1]}},m=(0,b().Mz)(c.store.getValue(),d.indexOfAboutToBeDeletedChar),f=(0,g().k$)(a,i().u.fromArray(m),t.currentUser,l().GKr.SuggestionInsertText);if(f)return D().pz({...e,multiSelection:u}),void(0,p().vh)({environment:t,transaction:n,discussionStore:f.discussionStore});const[v,h]=[d.indexOfAboutToBeDeletedChar,d.indexOfLeadingChar].map((e=>{const t=(0,b().W8)(c.store.getValue(),e,l().GKr.SuggestionRemoveText);if(t&&l().BIG(t))return l().fgJ(t)})),_=l().eeV(c.store.getValue()).length;(r&&c.index<_||!r&&c.index>0)&&j(c.store,d.newCursorIndex);if(v)return;let y;if(h){const e=p().P5(u,h);if(!e)throw new(s().p8)("Could not get discussion store from selection and leadingSuggestRemoveDiscussionId");(0,g().Ld)(e,t.currentUser)&&(y=e)}y||(y=p().oG(t,n,u));p().Sz({environment:t,transaction:n,multiSelection:u,discussionStore:y})}({...e,blockStore:o}):function(e){const{environment:t,transaction:o,multiSelection:n,blockStore:i}=e,r=p().oG(t,o,i);p().Sz({environment:t,transaction:o,multiSelection:n,discussionStore:r}),j(n.start.store,n.start.index)}({...e,blockStore:o})}(e);let c;r.annotateWithUserAction("textBackspaceActions.textBackspaceWithinContent"),c=(0,h().iG)(n)?a?{start:n.start,end:{store:n.start.store,index:n.start.index+1}}:{start:{store:n.start.store,index:n.start.index-1},end:n.start}:n,D().pz({environment:t,multiSelection:c,transaction:r})}function j(e,t){U().setMultiSelection({multiSelection:{start:{store:e,index:t},end:{store:e,index:t}}})}function K(e){const{environment:t,editorMode:o,multiSelection:i,transaction:a,deleteForwards:s,event:m}=e,f=t.device.isApple&&m.metaKey,T=!(t.device.isIOS&&(0,h().iG)(i));U().clearForceExtendAnnotations();const D=(0,h().QY)(i);if(D&&0===D.selection.startIndex&&0===D.selection.endIndex&&!s){const{store:e}=D;m.preventDefault();const i=(0,_().sQ)(e);if(i){const s=i.getModel();if(s){const i=s.isType(r().q7);i&&!f?O({environment:t,store:e,transaction:a}):s.isType(r().Q3)||i&&f?function(e){const{store:t,editorMode:o,transaction:i,environment:r}=e;i.annotateWithUserAction("textBackspaceActions.textBackspaceAtBeginning");const a=(0,_().sQ)(t);if(!a)return;if(I().Z.state.open&&I().Z.state.isAddMenu&&""===l().QaF(t.getValue()))return void k().xv({environment:r,dismissed:!0});const s=(0,_().sQ)(a),c=s&&(0,_().sQ)(s);if(s&&c){const e=s.getRenderableContentIds()??[];if(!(d().Z$(e)!==a.id||s.isTransclusionType()||y().BX(s)&&d().Ps(e)===a.id||"tab"===c.getType())){const e=P().uv({blockStore:a,parentStore:s,grandparentStore:c,transaction:i});if(e)return void n().default.afterNextFlush((()=>{if(e){const t=w().C.findEditableStoreWithin(e);t&&(E().eP({environment:r,store:e}),U().setSelectionAtStart({store:t}))}}))}s.isCalloutV2()&&1===e.length&&B().Cl({environment:r,blocks:[s],transaction:i})}const m=(0,v().i)(t),f=m?(0,_().sQ)(m):void 0;if(m&&a&&f){const e=()=>{const e=(0,b().x0)(m);if(V({environment:r,transaction:i,store:t,block:a,targetStore:m,targetBlock:f}),U().setSelection({store:m,selection:e}),E().eP({environment:r,store:f}),!y().BX(a)&&s){const e=a.getContentStores();for(const o of e)A().Vt({parentStore:s.getContentStore(),beforeStore:a,insertStore:o,transaction:i});const t=a.getContentStore();for(const o of e)A().Od({parentStore:t,childToRemoveStore:o,transaction:i})}B().Od({store:a,transaction:i})},n=()=>{const e=(0,b().x0)(m);U().setSelection({store:m,selection:e})};if("suggest"===o){var h;if("page"===f.getType()||m.path.includes("caption"))return;const o=null===(h=(0,g().YT)({blockStore:f,currentUser:r.currentUser,type:l().GKr.SuggestionInsertText}))||void 0===h?void 0:h.discussionStore,s=(0,g().qM)({blockStore:f,currentUser:r.currentUser,suggestionType:"add_line_break"});if(o)n(),e(),p().vh({environment:r,transaction:i,discussionStore:o,removeModifiedBlockIds:[t.id]});else if(s)0===f.getTitleValue().length?(B().Od({store:f,transaction:i}),U().setSelection({store:t,selection:{startIndex:0,endIndex:0}})):(p().JK({environment:r,transaction:i,blockStore:f,type:"add_line_break",removeDiscussionId:!0}),n());else{const e=0===a.getTitleValue().length;p().N$({environment:r,transaction:i,blockStore:f,createDiscussionStore:()=>p().oG(r,i,f,void 0,e?{blockStore:a,suggestionTypes:["remove_line_break"],currentUser:r.currentUser}:void 0),type:"remove_line_break"}),n()}}else"default"===o||"translate_unlocked"===o||"ai_co_editing"===o?(f.getAddLineBreakSuggestion()?p().JK({environment:r,transaction:i,blockStore:f,type:"add_line_break",removeDiscussionId:!0}):f.getRemoveLineBreakSuggestion()&&p().JK({environment:r,transaction:i,blockStore:f,type:"remove_line_break",removeDiscussionId:!0}),e()):"translate_locked"===o?M().Xb():(0,u().t1)(o)}}({environment:t,editorMode:o,store:e,transaction:a}):D.store.path.includes("caption")&&function(e){const{environment:t,editorMode:o,store:n,transaction:i}=e;if("suggest"===o)return;i.annotateWithUserAction("textBackspaceActions.captionBackspaceAtBeginning");const r=S().E.getMembersByDOMOrder({filter:()=>!0}),a=r.findIndex((e=>e.props.store===n)),s=r.findLast(((e,t)=>t<a&&e.props.canInsertText)),l=null==s?void 0:s.props.store;if(!l)return;const d=(0,c().TO)((0,_().sQ)(n)),u=(0,c().TO)((0,_().sQ)(l)),p=(0,b().x0)(l);L({environment:t,store:n,targetStore:l,transaction:i,targetBlock:d,block:u}),U().setSelection({store:l,selection:p});const m=(0,_().sQ)(l);E().eP({environment:t,store:m})}({environment:t,editorMode:o,store:e,transaction:a})}}}else D&&(0,b().J_)(D.store,D.selection)&&s?(m.preventDefault(),function(e){const{environment:t,editorMode:o,store:n,transaction:i}=e;i.annotateWithUserAction("textBackspaceActions.textDeleteAtEnd");const r=S().E.getMembersByDOMOrder({filter:()=>!0}),a=d().cx(r,(e=>e.props.store===n)),s=r.find(((e,t)=>Boolean(t>a&&e.props.canInsertText))),l=s?s.props.store:void 0,c=(0,_().sQ)(n),m=l?(0,_().sQ)(l):void 0;if(c&&m&&l)if("suggest"===o){if(m.path.includes("caption"))return;const e=(0,v().i)(n),o=e?(0,_().sQ)(e):void 0,r=o&&0===c.getTitleValue().length;p().N$({environment:t,transaction:i,blockStore:c,type:"remove_line_break",createDiscussionStore:()=>p().oG(t,i,c,void 0,r?{blockStore:o,suggestionTypes:["remove_line_break"],currentUser:t.currentUser}:void 0)}),U().setSelection({store:l,selection:{startIndex:0,endIndex:0}})}else if("default"===o||(0,C().a0)(o)||"ai_co_editing"===o)if(c.isEmptyTextBlock()){const e=(0,_().sQ)(c);e&&R().hr({childStore:c,parentStore:e,transaction:i}),U().setMultiSelection({multiSelection:{start:{store:l,index:0},end:{store:l,index:0}}})}else{const e="readOnly"===x().default.state.mode,o="empty"!==x().default.state.mode&&x().default.state.multiSelection;if(V({environment:t,transaction:i,store:l,block:m,targetStore:n,targetBlock:c}),m){const t=(0,_().sQ)(m);if(t){const e=m.getContentStore(),o=m.getContentStores();for(const n of o)A().Od({parentStore:e,childToRemoveStore:n,transaction:i}),A().Vt({parentStore:t.getContentStore(),beforeStore:m,insertStore:n,transaction:i})}B().Od({store:m,transaction:i}),o&&U().setMultiSelection({multiSelection:o,readOnly:e})}}else(0,u().t1)(o)}({environment:t,editorMode:o,store:D.store,transaction:a})):T&&(m.preventDefault(),Z({environment:t,editorMode:o,multiSelection:i,deleteForwards:s,transaction:a}));const F=x().default.state;"editing"===F.mode&&(0,b().ST)(F.multiSelection.start.store.getValue(),F.multiSelection.start.index-1,"c")&&U().setExtendAnnotation({annotation:["c"],extend:!0})}function z(e){const{event:t,multiSelection:o,device:n}=e;return(n.isApple&&t.metaKey||!n.isApple&&t.ctrlKey||n.isApple&&t.altKey)&&!(0,b().dQ)(o)}},346839:(e,t,o)=>{o.d(t,{IO:()=>U,PF:()=>V});o(492176),o(7961),o(241792);var n=()=>o(492788),i=()=>o(731415),r=()=>o(156642),a=()=>o(396136),s=()=>o(185610),l=()=>o(955620),c=()=>o(349220),d=()=>o(696459),u=()=>o(539410),p=()=>o(643937),m=()=>o(505783),f=()=>o(316834),g=()=>o(487270),v=()=>o(191003),h=()=>o(339523),_=()=>o(465371),b=()=>o(279386),y=()=>o(826955),S=()=>o(127519),w=()=>o(445264),k=()=>o(807230),I=()=>o(54512),C=()=>o(676922),x=()=>o(80072),T=()=>o(282662),M=()=>o(636340),P=()=>o(844085),A=()=>o(879952),R=()=>o(970105),B=()=>o(491308),E=()=>o(990966);function D(e){const t=(0,h().sQ)(e.store);if(t&&function(e){var t;const o=e.getType();return!!o&&(!!(0,r().he)(o)&&!(e.id!==(null===(t=e.getParentBlockStore())||void 0===t?void 0:t.getRenderableContentIds().at(-1))))}(t)){const o=x().rB({environment:e.environment,blocks:[t],transaction:e.transaction});if(o)return void n().default.afterNextFlush((()=>{const e=o[0].getTitleStore();e&&E().setMultiSelection({multiSelection:{start:{store:e,index:0},end:{store:e,index:0}}})}))}B().ew(e)}function U(e){const{environment:t,transaction:o,multiSelection:c}=e;(0,k().ww)(t)?((0,h().x7)(c.start.store)?function(e){const{environment:t,editorMode:o,transaction:i}=e;let a=e.multiSelection;const s=(0,h().sQ)(a.start.store);if(!s||s.isCollectionView())return;if("default"===o||(0,b().a0)(o)||"ai_co_editing"===o)R().pz({environment:t,multiSelection:a,transaction:i});else{if("suggest"===o)return;(0,d().t1)(o)}const l=S().default.state;a="editing"===l.mode&&l.multiSelection||a;const c=a.start.store,u={environment:t,type:r().Ti.text,inMemoryRecordCache:c.inMemoryRecordCache,transaction:i,spaceId:s.pointer.spaceId},p=M().j4(u),m=T().Ce({parentStore:s.getContentStore(),prependStore:p,transaction:i}).childStore;V({environment:t,blockStore:s,store:c,targetBlockStore:m,splitAtIndex:a.start.index,transaction:i}),n().default.afterNextFlush((()=>{E().setSelectionAtStart({store:m.getBlockTitleStore()})})),I().W(t,{from:"text_enter",type:r().Ti.text,creating_block_id:p.id,parent_collection_id:p.getParentCollectionIdUpToTwoLevels()})}(e):(0,v().iG)(c)&&(function(e){const t=e.getRecordStoreUIParent();return t instanceof y().G&&e&&t.isType(r().q7)&&0===l().QaF(t.getTitleValue()).length}(c.start.store)||function(e){var t;const o=e.getAncestorBlockStoreAtRootPath();return o&&o.getType()===r().Ti.text&&o.isDirectlyWithinCalloutV2Block()&&0===l().QaF(o.getTitleValue()).length&&o.id===(null===(t=o.getParentBlockStore())||void 0===t?void 0:t.getRenderableContentIds().at(-1))}(c.start.store))?D({environment:t,transaction:o,store:c.start.store}):(0,v().ko)(c)&&F(c.start.store)&&N(c.start.store)?function(e){const{environment:t,transaction:o,multiSelection:c,editorMode:d}=e,p=c.start.store,v=(0,h().sQ)(p);if(!v||!(v.canEdit()||v.isCommentOnly()&&(0,m().xU)({blockStore:v,currentUser:t.currentUser})))return;const _=v.computeWithRecordValues((e=>{let{getRecordValueAndSubscribe:t}=e;return t(v)})),b=(0,h().sQ)(v);if(!_||!b)return;const y=M().j4({environment:t,type:(0,r().he)(_.type)?_.type:r().Ti.text,inMemoryRecordCache:p.inMemoryRecordCache,transaction:o,spaceId:b.pointer.spaceId,properties:_.properties?L(_.properties):void 0,format:_.format?[_.format].map(O).map(s().b8)[0]:void 0,permissions:_.permissions});if(T().Vt({parentStore:b.getContentStore(),beforeStore:v,insertStore:y,transaction:o}).childStore,"suggest"===d){var S;const e=(0,f().i)(p),n=e?(0,h().sQ)(e):void 0,r=(0,u().oG)(t,o,y,{annotations:i().u.fromArray(l().Rkp(null==e?void 0:e.getValue())),annotationTypes:[l().GKr.SuggestionInsertText],currentUser:t.currentUser},n?{blockStore:n,suggestionTypes:["add_line_break"],currentUser:t.currentUser}:void 0);(0,u().n1)(o,y,{type:"add_line_break",id:(0,g().TS)({table:a().iU,environment:t,spaceId:b.pointer.spaceId}),discussionId:r.id}),null!=v&&null!==(S=v.getNavigableBlockStore())&&void 0!==S&&S.isCommentOnly()&&(0,u().n1)(o,y,{type:"insert",id:(0,g().TS)({table:a().iU,environment:t,spaceId:b.pointer.spaceId}),discussionId:r.id}),(0,u().vh)({environment:t,transaction:o,discussionStore:r,addModifiedBlockIdsAfter:[y.id]})}I().W(t,{from:"text_enter",type:r().Ti.text,creating_block_id:y.id,parent_collection_id:y.getParentCollectionIdUpToTwoLevels()}),t.device.isMobile&&n().default.afterNextFlush((()=>P().hQ(t)))}(e):function(e){const{environment:t,editorMode:o,transaction:n,multiSelection:i}=e,a=(0,h().sQ)(i.start.store);if(!a)return;if(!(a.canEdit()||a.isCommentOnly()&&(0,m().xU)({blockStore:a,currentUser:t.currentUser})))return;const s=(0,h().sQ)(a);if(!s)return;if(!(0,v().iG)(i))if("suggest"===o){const o=(0,u().oG)(t,n,i);(0,u().Sz)({...e,discussionStore:o})}else"default"===o||"translate_unlocked"===o||"ai_co_editing"===o?R().pz(e):"translate_locked"===o?C().Xb():(0,d().t1)(o);const l=i.start.store,c=a.getType(),p=a.getContentLength(),f=a.getModel();let g;if((0,_().BX)(a)&&w().Z.isOpen(a.id))g=r().Ti.text;else if(f&&p>0&&f.isType(r().nH)){g=r().Ti.text;const e=a.getContentStores()[0];if(e){const t=e.getType();e.isDefined()&&t&&r().kC[t]&&(g=t)}}else g=!(c&&f&&!f.isType(r().Q2)&&F(l)&&N(l)&&"code"!==c)||f.isType("ai_block")&&f.isSkillBlock()?r().Ti.text:c;const b={environment:t,type:g,inMemoryRecordCache:l.inMemoryRecordCache,transaction:n,spaceId:s.pointer.spaceId},y=M().j4(b),S=s.getRenderableContentIds()||[];let k,x=!1;if((0,_().BX)(a)&&w().Z.isOpen(a.id)){const e=a.getContentStore();x=!0,k=T().Ce({parentStore:e,prependStore:y,transaction:n})}else if(f&&p&&f.isType(r().nH)){const e=a.getContentStore();x=!0,k=T().Ce({parentStore:e,prependStore:y,transaction:n})}else if(null!=f&&f.isType("ai_block")&&f.isSkillBlock()){const e=a.getContentStore();x=!0,k=T().Ce({parentStore:e,prependStore:y,transaction:n})}else k=S.indexOf(a.id)>=0?T().BE({parentStore:s.getContentStore(),afterStore:a,insertStore:y,transaction:n}):T().Ce({parentStore:s.getContentStore(),prependStore:y,transaction:n});const P=k.childStore;if(F(l)&&c&&!x&&!(0,_().BX)(a)){const e=a.getContentStores(),t=a.getContentStore(),o=P.getContentStore();for(const i of e)T().Od({parentStore:t,childToRemoveStore:i,transaction:n}),T().R3({parentStore:o,appendStore:i,transaction:n})}V({environment:t,blockStore:a,store:i.start.store,targetBlockStore:P,splitAtIndex:i.start.index,transaction:n}),(0,u()._T)({environment:t,transaction:n,sourceBlockStore:a,targetBlockStore:P,selectionIsExpanded:!(0,v().iG)(i),editorMode:o}),I().W(t,{from:"text_enter",type:g,creating_block_id:y.id,is_toggleable:(0,_()._A)(g,y.getFormat()),parent_collection_id:y.getParentCollectionIdUpToTwoLevels()})}(e),t.device.isMobile||n().default.afterNextFlush((()=>{P().Zv()}))):(0,k().eD)(t)}function F(e){if(e.table===a().iU){const t=y().G.createChildStore(e,{table:a().iU,id:e.id}).getType();return t&&!(0,r().S9)(t)}return!1}function N(e){if(e.table===a().iU){const t=y().G.createChildStore(e,{table:a().iU,id:e.id}).getModel();return t&&!t.isType(r().oe)&&!t.isType(r().Ok)}return!1}function V(e){const{environment:t,blockStore:o,store:n,targetBlockStore:i,splitAtIndex:r,transaction:a}=e,s={store:n,index:r},l={start:s,end:s};if(o.useCrdt()&&o.getBlockTitleStore()===n&&i.useCrdt()){(0,c().T)(i.useCrdt(),"Calling splitText() with a non-CRDT target block is not currently supported");(0,v().NV)(l)||p().Wc({sourceBlockStore:o,targetBlockStore:i,splitAtGraphemeIndex:r,transaction:a,moveIntoNewBlock:!0})}else R().gc({environment:t,sourceStore:l.end.store,sourceIndex:l.end.index,targetStore:i.getBlockTitleStore(),targetIndex:0,transaction:a});A().eP({environment:t,store:i}),E().setSelectionAtStart({store:i.getBlockTitleStore()})}function L(e){const{title:t,...o}=e;return o}function O(e){const{text_slice_tree:t,text_clocks:o,...n}=e;return n}},595426:(e,t,o)=>{o.d(t,{Ty:()=>J,Gu:()=>$,fP:()=>Q});o(670560),o(267602),o(241792),o(731107),o(228244);var n=()=>o(156642),i=()=>o(659278),r=()=>o(114079),a=()=>o(396136),s=()=>o(955620),l=()=>o(349220),c=()=>o(566232),d=()=>o(513670),u=()=>o(696459),p=()=>o(540413),m=()=>o(53060),f=()=>o(482269);function g(e,t){return i().p4(e.substring(0,t)).length}var v=()=>o(191003),h=()=>o(342923),_=()=>o(339523),b=()=>o(465371),y=()=>o(639832),S=()=>o(826955),w=()=>o(965903),k=()=>o(127519),I=()=>o(491927),C=()=>o(421654),x=()=>o(879952),T=()=>o(15672),M=()=>o(970105),P=()=>o(346839),A=()=>o(990966),R=()=>o(269299),B=()=>o(28063);function E(e){var t;const{environment:o,store:r,toBlockType:a,matchRegex:c,insertTextAfter:d,transaction:u,postTransformAction:f}=e,g="editing"===k().default.state.mode&&(null===(t=(0,v().QY)(k().default.state.multiSelection))||void 0===t?void 0:t.selection);if(!g)return;const h=y().Z.state.open?1:0,C=i().p4(s().QaF(r.getValue())).slice(h,g.endIndex).join(""),T=c.exec(C);if(!T)return;const R=r.getRecordStoreUIParent();if(!(R&&R instanceof S().G))return;const E=R.getType();if(!E)return;if(E!==n().Ti.text&&!n().q7[E])return;const D=a(T);if(void 0===D||D===E)return;let U,F=D;R instanceof S().G&&("toggle"===D&&(0,n().zp)(R.getType())?(F=b().m1(E),U=F):"toggle"===E&&b().JO(D)&&(F=b().m1(D),U=F),B().vs({environment:o,block:R,blockType:F,transaction:u}));const N={startIndex:0,endIndex:T&&i().p4(T[0]).length||0};if(M().pe({environment:o,store:r,selection:N,transaction:u}),d){const e=p().insertBlockBelow({environment:o,selection:w().default.state.stores,createBlockItem:m().Hc[n().Ti.text],analyticsFrom:"divider"===D?"divider_block_transform":"text_filter_actions",transaction:u});e&&(P().PF({environment:o,blockStore:(0,l().TO)((0,_().sQ)(r)),store:r,targetBlockStore:e,splitAtIndex:0,transaction:u}),x().eP({environment:o,store:e}),A().setSelectionAtStart({store:e.getBlockTitleStore()}))}f&&f(T),I().g_(o,{type:D,format_block_type:U,shortcut:C})}function D(e){var t,o;const{environment:n,editorMode:r,store:a,transaction:l,regex:c,length:d,analyticsType:u,replace:p}=e,m="editing"===k().default.state.mode&&(null===(t=(0,v().QY)(k().default.state.multiSelection))||void 0===t?void 0:t.selection);if(!m)return;const f=a.getValue()||[],h=s().QaF(f),_=i().p4(h).slice(0,m.endIndex).join(""),b=c.exec(_);if(!b)return;const y=g(h,b.index),S={startIndex:y,endIndex:y+d},w=a.getValue()||[];if(s().oP(w,S.startIndex,S.endIndex,"c"))return;const C="function"==typeof p?p({match:b,matchIndex:y,textValue:f}):p;if(void 0===C)return;if(M().pe({environment:n,store:a,selection:S,transaction:l}),"editing"!==k().default.state.mode)return;const x=null===(o=(0,v().QY)(k().default.state.multiSelection))||void 0===o?void 0:o.selection;x&&(M().hJ({environment:n,editorMode:r,store:a,selection:x,string:C,disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:l}),I().Af(n,{type:u}))}function U(e){var t;const{environment:o,store:n,delimiter:r,annotation:a,transaction:l}=e,c="editing"===k().default.state.mode&&(null===(t=(0,v().QY)(k().default.state.multiSelection))||void 0===t?void 0:t.selection);if(!c)return;const d=n.getValue(),u=F({delimiter:r,storeValue:d,selectionEndIndex:c.endIndex});if(!u)return;if(!N({delimiter:r,storeValue:d,...u}))return;if(s().p9b(d,u.startIndex,u.endIndex,s().GKr.Code))return;const{textValue:p,startIndex:m,endIndex:f}=u,h=g(p,m),_=p.slice(m,f),b=i().p4(_).length,y={startIndex:h,endIndex:h+r.length};M().pe({environment:o,store:n,selection:y,transaction:l});const S={startIndex:h+b-r.length-r.length,endIndex:h+b-r.length};M().pe({environment:o,store:n,selection:S,transaction:l});const w={startIndex:y.startIndex,endIndex:S.startIndex};T().WO({environment:o,store:n,selection:w,annotation:a,transaction:l});const C=w.endIndex;A().setSelection({store:n,selection:{startIndex:C,endIndex:C}}),A().setExtendAnnotation({annotation:a,extend:!1}),I().tn(o,{type:s().J7s(a)})}function F(e){const{delimiter:t,storeValue:o,selectionEndIndex:n}=e,r=i().p4(s().QaF(o)).slice(0,n).join("");if(0===r.length||!r.endsWith(t))return;const a=r.split(t);if(a.length<=2)return;a.reverse();const[l,...c]=a.slice(1),u=d().Sm(c.map((e=>e.length+t.length)))-t.length;return{textValue:r,matchString:l,startIndex:u,endIndex:u+l.length+2*t.length}}function N(e){const{delimiter:t,matchString:o,startIndex:n,endIndex:i,textValue:r}=e;return o.length>0&&!/\s/g.test(o[0])&&!/\s/g.test(o[o.length-1])&&!o.startsWith(t)&&!o.endsWith(t)&&(!r[n-1]||/[\s(]/g.test(r[n-1]))&&(!r[i]||/[\s)]/g.test(r[i]))}function V(e){var t;const{environment:o,delimiter:n,store:r,transaction:a}=e,l="editing"===k().default.state.mode&&(null===(t=(0,v().QY)(k().default.state.multiSelection))||void 0===t?void 0:t.selection);if(!l)return;const c=r.getValue(),d=F({delimiter:n,storeValue:c,selectionEndIndex:l.endIndex});if(!d)return;if(!function(e){const{storeValue:t,startIndex:o,endIndex:n,delimiter:i}=e;if(!N(e))return!1;const r={[s().GKr.User]:s().GKr.User,[s().GKr.Page]:s().GKr.Page,[s().GKr.CustomEmoji]:s().GKr.CustomEmoji,[s().GKr.Comment]:s().GKr.Comment,[s().GKr.Bot]:s().GKr.Bot,[s().GKr.ExternalObjectInstance]:s().GKr.ExternalObjectInstance,[s().GKr.Date]:s().GKr.Date,[s().GKr.TemporaryPage]:s().GKr.TemporaryPage,[s().GKr.TemplateVariable]:s().GKr.TemplateVariable,[s().GKr.FormulaPageProperty]:s().GKr.FormulaPageProperty,[s().GKr.FormulaContextValue]:s().GKr.FormulaContextValue,[s().GKr.Group]:s().GKr.Group,[s().GKr.Team]:s().GKr.Team,[s().GKr.Citation]:s().GKr.Citation,[s().GKr.LinkMention]:s().GKr.LinkMention,[s().GKr.AssistantInstructionsCollection]:s().GKr.AssistantInstructionsCollection};for(const a of Object.values(r))if(s().oP(t,o,n,a))return!1;if(s().oP(t,o,o+i.length,s().GKr.Code)&&s().oP(t,n-i.length,n,s().GKr.Code))return!1;return!0}({delimiter:n,storeValue:c,...d}))return;const{textValue:u,matchString:p,startIndex:m,endIndex:h}=d,_=g(u,m),b=u.slice(m,h);M().pe({environment:o,store:r,selection:{startIndex:_,endIndex:_+i().p4(b).length},transaction:a});const y=s().qZ6(p);M().mM({environment:o,store:r,tokens:[y],index:_,transaction:a});const S=_+i().p4(s().WiV(y)).length;A().setSelection({store:r,selection:{startIndex:S,endIndex:S}}),I().tn(o,{type:s().GKr.Equation}),f().ND({environment:o,equation:p,from:{type:"create",source:"text_filter",selection:!0}})}const L=["\\.",",",";","\\?","!","\\)","\\]"," "].join("|"),O=new RegExp(` (${L})$`);function Z(e){const t=s().xrQ(e.textValue,e.matchIndex-1,e.matchIndex),o=d().Z$(t.tokensInsideRange);if(o&&s().km_(o))return e.match[1]}const j=[{delimiter:"**",type:s().GKr.Bold},{delimiter:"ï¼Šï¼Š",type:s().GKr.Bold},{delimiter:"*",type:s().GKr.Italic},{delimiter:"ï¼Š",type:s().GKr.Italic},{delimiter:"__",type:s().GKr.Bold},{delimiter:"ï¼¿ï¼¿",type:s().GKr.Bold},{delimiter:"_",type:s().GKr.Italic},{delimiter:"ï¼¿",type:s().GKr.Italic},{delimiter:"~",type:s().GKr.Strike},{delimiter:"ã€œ",type:s().GKr.Strike},{delimiter:"ï½ž",type:s().GKr.Strike}],K=[{toBlockType:()=>n().Ti.toDo,matchRegex:/^(\[\] |\[ \] |\ã€Œ\ã€ã€€)$/,insertTextAfter:!1,expectedBlockType:n().Ti.toDo,getExampleShortcut:()=>"[] "},{toBlockType:()=>n().Ti.subSubHeader,matchRegex:/^(### |ï¼ƒï¼ƒï¼ƒ)$/,insertTextAfter:!1,expectedBlockType:n().Ti.subSubHeader,getExampleShortcut:e=>{let{formatBlockType:t}=e;return t===n().MF.toggleFormatSubSubHeaderBlock?"### > ":"### "}},{toBlockType:()=>n().Ti.subHeader,matchRegex:/^(## |ï¼ƒï¼ƒ)$/,insertTextAfter:!1,expectedBlockType:n().Ti.subHeader,getExampleShortcut:e=>{let{formatBlockType:t}=e;return t===n().MF.toggleFormatSubHeaderBlock?"## > ":"## "}},{toBlockType:()=>n().Ti.header,matchRegex:/^(# |ï¼ƒ)$/,insertTextAfter:!1,expectedBlockType:n().Ti.header,getExampleShortcut:e=>{let{formatBlockType:t}=e;return t===n().MF.toggleFormatHeaderBlock?"# > ":"# "}},{toBlockType:()=>n().Ti.toggle,matchRegex:/^(> |ï¼ž)$/,insertTextAfter:!1,expectedBlockType:n().Ti.toggle,getExampleShortcut:()=>"> "},{toBlockType:()=>n().Ti.quote,matchRegex:/^(\| |\" |\â€œ |\â€)$/,insertTextAfter:!1,expectedBlockType:n().Ti.quote,getExampleShortcut:()=>'" '},{toBlockType:()=>n().Ti.bulletedList,matchRegex:/^(\* |\- |\+ |\ï¼Š|\ãƒ¼|\ï¼‹|\ãƒ»)$/,insertTextAfter:!1,expectedBlockType:n().Ti.bulletedList,getExampleShortcut:e=>{let{locale:t}=e;return"ja-JP"===t?"ãƒ»":"- "}},{toBlockType:()=>n().Ti.divider,matchRegex:/^â€”-|---$/,insertTextAfter:!0,expectedBlockType:n().Ti.divider,getExampleShortcut:()=>"---"}],z={numeric:/^(\d+|[\uff10-\uff19]+)(\. |\ã€‚|\ï¼Ž|\) )$/,roman_numeral:/^([a-z]+)(\. |\ã€‚|\ï¼Ž|\) )$/,alphabet:/^([a-z]+)(\. |\ã€‚|\ï¼Ž|\) )$/},H=[{annotationDelimiter:"`",blockMatchRegex:/^```$/},{annotationDelimiter:"Â´",blockMatchRegex:/^Â´Â´Â´$/},{annotationDelimiter:"ï½€",blockMatchRegex:/^ï½€ï½€ï½€$/}],q={...K.reduce(((e,t)=>{const{expectedBlockType:o,matchRegex:n,getExampleShortcut:i}=t;return e[o]={matchRegexes:[n],getExampleShortcut:i},e}),{}),[n().Ti.numberedList]:{matchRegexes:Object.values(z),getExampleShortcut:()=>"1. "},[n().Ti.code]:{matchRegexes:H.map((e=>{let{blockMatchRegex:t}=e;return t})),getExampleShortcut:e=>{let{formatBlockType:t}=e;return t?"":"```"}}},W=[{regex:/^'$/,length:1,replace:"â€˜",analyticsType:"sentence_start_single_quote"},{regex:/ '$/,length:2,replace:" â€˜",analyticsType:"start_single_quote"},{regex:/'$/,length:1,replace:"â€™",analyticsType:"middle_single_quote"}],G=[{regex:/^"$/,length:1,replace:"â€œ",analyticsType:"sentence_start_double_quote"},{regex:/ "$/,length:2,replace:" â€œ",analyticsType:"start_double_quote"},{regex:/"$/,length:1,replace:"â€",analyticsType:"end_double_quote"},{regex:/--$/,length:2,replace:"â€”",analyticsType:"em_dash"},{regex:/->$/,length:2,replace:"â†’",analyticsType:"right_arrow"},{regex:/<->$/,length:3,replace:"â†”",analyticsType:"right_left_arrow"},{regex:/â†>$/,length:2,replace:"â†”",analyticsType:"right_left_arrow"},{regex:/=>$/,length:2,replace:"â‡’",analyticsType:"right_arrow_double"},{regex:/<-$/,length:2,replace:"â†",analyticsType:"left_arrow"},{regex:/>=$/,length:2,replace:"â‰¥",analyticsType:"greater_than_or_equal_to"},{regex:/<=$/,length:2,replace:"â‰¤",analyticsType:"less_than_or_equal_to"},{regex:/!=$/,length:2,replace:"â‰ ",analyticsType:"not_equal"},{regex:/\.\.\.$/,length:3,replace:"â€¦",analyticsType:"ellipsis"}];function $(e){const{environment:t,editorMode:o,store:l,transaction:p}=e;if("suggest"===o)return;const m=l.getRecordStoreAtRootPath(),f=m instanceof S().G?m.getType():void 0;if("code"!==f||k().default.isEditingCaption()){if("callout"!==f){for(const e of K)E({environment:t,editorMode:o,store:l,toBlockType:e.toBlockType,matchRegex:e.matchRegex,insertTextAfter:e.insertTextAfter,transaction:p});E({environment:t,editorMode:o,store:l,matchRegex:z.numeric,insertTextAfter:!1,transaction:p,toBlockType:t=>{var o;const n=t[1],i=(0,r().DA)(n);return null===(o=Y(e,parseInt(i)))||void 0===o?void 0:o.type},postTransformAction:t=>{var o;const n=t[1],i=(0,r().DA)(n),s=null===(o=Y(e,parseInt(i)))||void 0===o?void 0:o.number;if(l.table!==a().iU)return;const c=l.getRecordStoreAtRootPath();if(!(c instanceof S().G))return;const d=(0,u().$K)(s)&&s>-1?s:void 0;C().FH({stores:[c],update:{list_start_index:d},transaction:p})}}),E({environment:t,editorMode:o,store:l,matchRegex:z.roman_numeral,insertTextAfter:!1,transaction:p,toBlockType:t=>{const o=(0,h().UF)(t[1]),n=Y(e,o);if(1===o||void 0===(null==n?void 0:n.number))return null==n?void 0:n.type},postTransformAction:()=>{m instanceof S().G&&C().FH({stores:[m],update:{list_format:"roman"},transaction:p})}}),E({environment:t,editorMode:o,store:l,matchRegex:z.alphabet,insertTextAfter:!1,transaction:p,toBlockType:t=>{const o=(0,h().yk)(t[1]),n=Y(e,o);if(1===o||void 0===(null==n?void 0:n.number))return null==n?void 0:n.type},postTransformAction:()=>{m instanceof S().G&&C().FH({stores:[m],update:{list_format:"letters"},transaction:p})}});for(const{blockMatchRegex:e}of H)E({environment:t,editorMode:o,store:l,toBlockType:()=>n().Ti.code,matchRegex:e,insertTextAfter:!1,transaction:p})}if(!function(e){var t;const o="editing"===k().default.state.mode&&(null===(t=(0,v().QY)(k().default.state.multiSelection))||void 0===t?void 0:t.selection);if(!o)return!1;const n=e.getValue()||[],i=s().xrQ(n,0,o.endIndex),r=d().qr(i.tokensInsideRange,(e=>s().hDy(e).some((e=>s().fTS(e))))),a=i.tokensInsideRange.slice(-1===r?0:r,i.tokensInsideRange.length),l=s().QaF(a);return Boolean(l.match(/(^| )`[^ ]/))}(l)){for(const n of G)D({environment:t,editorMode:o,store:l,transaction:p,regex:n.regex,length:n.length,replace:n.replace,analyticsType:n.analyticsType});const e=t.device.browserVersion.split(".").map((e=>parseInt(e,10)));if(!t.device.isSafari||(0,c().isGreaterThanOrEqualToVersion)(e,[16,4]))for(const n of W)D({environment:t,editorMode:o,store:l,transaction:p,regex:n.regex,length:n.length,replace:n.replace,analyticsType:n.analyticsType});!function(e){D({environment:e.environment,editorMode:e.editorMode,store:e.store,transaction:e.transaction,regex:O,length:2,replace:Z,analyticsType:"mention_punctuation"})}({environment:t,editorMode:o,store:l,transaction:p})}for(const{annotationDelimiter:e}of H)U({environment:t,editorMode:o,delimiter:e,annotation:[s().GKr.Code],store:l,transaction:p});for(const{delimiter:e,type:n}of j)U({environment:t,editorMode:o,delimiter:e,annotation:[n],store:l,transaction:p});V({environment:t,editorMode:o,delimiter:"$$",store:l,transaction:p}),V({environment:t,editorMode:o,delimiter:"ï¼„ï¼„",store:l,transaction:p}),function(e){var t;const{environment:o,store:n,transaction:r}=e,a="editing"===k().default.state.mode&&(null===(t=(0,v().QY)(k().default.state.multiSelection))||void 0===t?void 0:t.selection);if(!a)return;const l=n.getValue(),c=i().p4(s().QaF(l)).slice(0,a.endIndex).join("");if(s().oP(l,a.startIndex,a.endIndex,"c"))return;const d=/([^ ]+) $/.exec(c);if(!d)return;const u=d[1],p=s().rOz(u);if(!p)return;const{value:m,href:f}=p,h=g(c,c.indexOf(m)),_=h+i().p4(m).length,b={startIndex:h,endIndex:_};s().oP(l,h,_,"a")||(T().WO({environment:o,store:n,annotation:["a",f],selection:b,transaction:r}),A().setSelection({store:n,selection:a}),I().Hc(o,{href:f}))}({environment:t,store:l,transaction:p})}}function Q(e){const{store:t,editorMode:o,transaction:n,environment:i}=e;n.postEnqueueActions.push((()=>{R().createAndCommit({userAction:"textFilterActions.runAllFiltersAfterTransaction",environment:i,canUndo:!0,undoCheckpoint:!0,perform:e=>{$({environment:i,editorMode:o,store:t,transaction:e})}})}))}function Y(e,t){const{store:o}=e;if(o.table!==a().iU)return;const i=o.getRecordStoreAtRootPath();if(!(i instanceof S().G))return;const r=i.getType();if(r===n().Ti.header||r===n().Ti.subHeader||r===n().Ti.subSubHeader)return;const s=i.getParentBlockStore();if(!s)return;const l=s.getContentStores(),c=l.findIndex((e=>e.id===i.id));if(-1===c)return;const d=l.slice(0,c);let p=-1,m=1;for(let a=0;a<d.length;a++){const e=d[a];if(e.getType()!==n().Ti.numberedList)m=1,p=a;else{var f;const t=null===(f=e.getFormat())||void 0===f?void 0:f.list_start_index;(0,u().$K)(t)?m=t+1:m++}}return m===t?{type:n().Ti.numberedList,number:void 0}:c===p+1?{type:n().Ti.numberedList,number:t}:void 0}function J(e){var t;const{hasTransformShortcut:o,blockType:n,formatBlockType:i,locale:r}=e;return o&&n?(null===(t=q[n])||void 0===t?void 0:t.getExampleShortcut({locale:r,formatBlockType:i}))??"":""}},990966:(e,t,o)=>{o.r(t),o.d(t,{arrowDownMultiText:()=>G,arrowLeftMultiText:()=>$,arrowRightMultiText:()=>Q,arrowUpMultiText:()=>W,blurActiveElement:()=>K,clear:()=>z,clearForceExtendAnnotations:()=>E,clearSavedSelectionXPosition:()=>L,editNearestBlock:()=>Y,editNearestBlockOrInsertIfAtBottomOfPage:()=>J,insertIfAtBottomOfColumn:()=>X,maybeHandleExpectedBrowserSelectionUpdate:()=>Z,saveSelectionXPosition:()=>V,selectAllText:()=>N,selectAllTextMulti:()=>F,selectAndEditMultiSelection:()=>ee,setExtendAnnotation:()=>B,setMultiSelection:()=>M,setSelection:()=>A,setSelectionAtEnd:()=>U,setSelectionAtStart:()=>D,setSelectionComposing:()=>P,syncTextSelection:()=>oe,toggleExtendAnnotation:()=>R,updateFromBrowserSelectionAfterTick:()=>j});o(670560),o(267602),o(470928),o(228244);var n=()=>o(492788),i=()=>o(955620),r=()=>o(513670),a=()=>o(748621),s=()=>o(296304),l=()=>o(590162),c=()=>o(191003),d=()=>o(271308),u=()=>o(339523),p=()=>o(505462),m=()=>o(550054),f=()=>o(156538),g=()=>o(32969),v=()=>o(156958),h=()=>o(881688),_=()=>o(749826),b=()=>o(965903),y=()=>o(127519),S=()=>o(198732),w=()=>o(33649),k=()=>o(576828),I=()=>o(879952),C=()=>o(970105),x=()=>o(269299);const T=!1;function M(e){const{multiSelection:t,readOnly:o,forceEmit:n}=e,i=y().default.state,r="empty"!==i.mode&&i.savedSelectionXPosition||void 0,a="editing"===i.mode&&(0,c().e6)(i.multiSelection,t)?i.forceExtendAnnotations:{},s=o?{mode:"readOnly",multiSelection:t,savedSelectionXPosition:r}:{mode:"editing",multiSelection:t,savedSelectionXPosition:r,forceExtendAnnotations:a};if(s.mode!==i.mode||!(0,c()._v)(i.multiSelection,t))return y().default.setState(s),void v().Ps();n&&y().default.emit()}function P(e,t){if(!("always"===(0,d().Aw)(e)))return;const{TextSelectionCompositionStore:o}=e;o.setState({isComposing:t})}function A(e){const{store:t,selection:o,readOnly:n}=e;if(o){return void M({multiSelection:(0,c().TD)({store:t,selection:o}),readOnly:n})}const i={store:t,index:0},r={start:i,end:i};n?y().default.setState({mode:"readOnly",multiSelection:r,savedSelectionXPosition:0}):y().default.setState({mode:"editing",multiSelection:r,forceExtendAnnotations:{},savedSelectionXPosition:0})}function R(e){const{annotation:t}=e;if(i().k87[i().J7s(t)])return;const o=i().gOH(t),n=(0,m().bj)("default").findFirstOfGroupingKey(o);B(n?{annotation:n,extend:!1}:{annotation:t,extend:!0})}function B(e){const{annotation:t,extend:o}=e,n=y().default.state,r=i().J7s(t);"editing"===n.mode&&y().default.setState({...n,forceExtendAnnotations:{...n.forceExtendAnnotations,[r]:{annotation:t,extend:o}}})}function E(){const e=y().default.state;"editing"===e.mode&&y().default.setState({...e,forceExtendAnnotations:{}})}function D(e){const{store:t}=e;A({store:t,selection:{startIndex:0,endIndex:0}})}function U(e){const{store:t}=e;A({store:t,selection:(0,m().x0)(t)})}function F(e){var t;E();const{environment:o,store:n,canSelectAllBlocks:i,contentEditableContextId:r}=e,a=y().default.state,s="empty"===a.mode?{start:{store:n,index:0},end:{store:n,index:0}}:a.multiSelection,l={start:{store:s.start.store,index:0},end:{store:s.end.store,index:(null===(t=(0,m().x0)(s.end.store))||void 0===t?void 0:t.endIndex)||0}};if(!(0,c()._v)(l,s))return void M({multiSelection:l});const d=_().default.checkGate({gateName:"never_select_title_on_select_all"})&&(0,u().Mn)(o.device);if(r&&!d){const e=(0,m().Ov)(),t=e=>{var t;return(null===(t=e.contentEditableContext)||void 0===t?void 0:t.id)===r},o=e.find(t),n=e.reverse().find(t);if(o&&n){const e=o.props.store,t=n.props.store;if(e&&t){var p;return void M({multiSelection:{start:{store:e,index:0},end:{store:t,index:(null===(p=(0,m().x0)(t))||void 0===p?void 0:p.endIndex)||0}}})}}}i&&(0,u().Mn)(o.device)&&I().td(o)}function N(e){var t;E();const{environment:o,store:n,canSelectAllBlocks:i}=e,r=(0,m().x0)(n),a={startIndex:0,endIndex:r?r.endIndex:0};i&&"empty"!==y().default.state.mode&&(0,m().fu)(null===(t=(0,d().xI)("textSelectionActions",y().default.state.multiSelection))||void 0===t?void 0:t.selection,a)?I().td(o):A({store:n,selection:a})}function V(e){const t=y().default.state;"empty"===t.mode||t.savedSelectionXPosition||y().default.setState({...t,savedSelectionXPosition:e.savedSelectionXPosition})}function L(){"empty"!==y().default.state.mode&&y().default.setState({...y().default.state,savedSelectionXPosition:void 0})}let O=[];function Z(e){if(0===O.length)return!1;T&&console.log("maybeHandleExpectedBrowserSelectionUpdate",e);const t=O;O=[];for(const o of t)o();return!0}function j(e){const{store:t,contentEditableLeafRegistry:o,avoidEdgesOfContentEditableRoot:i,selection:r}=e;O.push((()=>{const e=p().get(),n=(0,d().fx)({contentEditableLeafRegistry:o,range:e,allowInvisibleEndSelection:(0,l().y)().shift,avoidEdgesOfContentEditableRoot:i});n?M(n):A({store:t,selection:r})})),n().default.afterNextFlush((()=>Z("renderQueueFlush")))}function K(){const e=document.activeElement;e instanceof HTMLElement&&e.blur()}function z(e){let{environment:t,preventDismissMobileKeyboard:o}=e;p().clear(t),"empty"!==y().default.state.mode&&y().default.setState({mode:"empty"}),!o&&t.device.isIOS&&_().default.checkGate({gateName:"ios_clear_selection_auto_dismiss_keyboard"})&&K()}function H(e){const{currentEditableTopBottomPadding:t,targetEdge:o,targetEditable:n,selectionXPosition:i}=e,s=n.getNode();if(!(s&&s instanceof Element))return;const l=s.getBoundingClientRect(),c=Math.min(Math.max(i,l.left),l.right),d=Math.min(t,n.props.topBottomPadding),u="top"===o?l.top:l.bottom;return function(e,t,o){const n=new Map,i={visibility:"hidden"},s=Object.keys(i);let l;try{for(;l=p().rangeFromPoint(e,t);){if(o.contains(l.commonAncestorContainer))return l;const e=(0,a().R)(l.commonAncestorContainer);if(!e)return;if(n.has(e))return;const t=r().ei(e.style,s);n.set(e,t),Object.assign(e.style,i)}}finally{for(const[e,t]of n)Object.assign(e.style,t)}}(c,"top"===o?u+d:u-d,s)}function q(e){const{focusContainerOffset:t,focusStore:o,edge:n,topBottomPadding:i}=e,r=f().E.findNodeFromStore(o);if(!(r&&r instanceof Element))return;const a=p().getRect(p().rangeFromContainerOffsets({start:t,end:t})),s=r.getBoundingClientRect();if(!a||!s)return;const[l,c]="top"===n?[a.top,s.top]:[a.bottom,s.bottom];return{focusIsAtEdge:Math.abs(l-c)<=i,focusSelectionRect:a,renderedNode:r,renderedNodeRect:s}}function W(e){const{environment:t,event:o,topBottomPadding:n,contentEditableLeafRegistry:i}=e,r=p().get();if(!r)return;E();const a=y().default.state;if("empty"===a.mode)return;const{multiSelection:l}=a,{focus:u,anchor:g}=(0,d().uZ)(l),_=q({focusContainerOffset:p().rangeToContainerOffsets(r).focus,focusStore:u.store,topBottomPadding:n,edge:"top"});if(!_)return;const{focusIsAtEdge:b,focusSelectionRect:S}=_,w=h().UQ(),k=w?h().Q8(w):(0,m().mK)(u.store),C=k&&f().E.findEditableWithStore(k);if(b&&C){var x;const e=Math.max(a.savedSelectionXPosition||0,S.left),i=H({targetEditable:C,targetEdge:"bottom",currentEditableTopBottomPadding:n,selectionXPosition:e}),l=(null===(x=(0,d().fx)({range:i,contentEditableLeafRegistry:void 0,allowInvisibleEndSelection:!0}))||void 0===x?void 0:x.multiSelection)||(0,c().TD)({store:C.props.store,selection:(0,m().x0)(C.props.store)});if(o.shiftKey&&!o.altKey&&l&&(0,s().D1)(C.getNode(),r.commonAncestorContainer))return o.preventDefault(),V({savedSelectionXPosition:e}),void ee({environment:t,multiSelection:(0,d().$r)(l.start,g),focus:l.start,forceEmit:!1});if(!o.shiftKey&&!o.altKey&&l)return o.preventDefault(),V({savedSelectionXPosition:e}),void ee({environment:t,forceEmit:!1,multiSelection:l,focus:"start"})}if(o.shiftKey&&!o.altKey&&(0,m().e7)(u,l.start.store)){if(te(t))return void v().rS({environment:t,direction:"up",bypassExistingTextSelection:!1,expandSelection:!0});const e=(0,d().tp)({multiSelection:l,focus:u,filterCommonAncestors:!0});if(e)return o.preventDefault(),void I().Z5({environment:t,...e})}j({store:u.store,contentEditableLeafRegistry:i,avoidEdgesOfContentEditableRoot:!0})}function G(e){const{environment:t,event:o,topBottomPadding:n,contentEditableLeafRegistry:i}=e,r=p().get();if(!r)return;E();const a=y().default.state;if("empty"===a.mode)return;const{multiSelection:l}=a,{focus:g,anchor:_}=(0,d().uZ)(l),b=q({focusContainerOffset:p().rangeToContainerOffsets(r).focus,focusStore:g.store,topBottomPadding:n,edge:"bottom"});if(!b)return;const{focusIsAtEdge:S,focusSelectionRect:w}=b,k=h().UQ(),C=k?h().a5(k):(0,m().hn)(g.store),x=C&&f().E.findEditableWithStore(C);if(S&&x){var T;const e=Math.max(a.savedSelectionXPosition||0,w.left),i=H({targetEditable:x,targetEdge:"top",currentEditableTopBottomPadding:n,selectionXPosition:e}),l=(null===(T=(0,d().fx)({range:i,contentEditableLeafRegistry:void 0,allowInvisibleEndSelection:!0}))||void 0===T?void 0:T.multiSelection)||(0,c().TD)({store:x.props.store,selection:{startIndex:0,endIndex:0}});if(o.shiftKey&&!o.altKey&&l&&(0,s().D1)(x.getNode(),r.commonAncestorContainer))return o.preventDefault(),V({savedSelectionXPosition:e}),void ee({environment:t,multiSelection:(0,d().$r)(l.start,_),focus:l.start,forceEmit:!1});if(!o.shiftKey&&!o.altKey&&l)return o.preventDefault(),V({savedSelectionXPosition:e}),void ee({environment:t,forceEmit:!1,multiSelection:l,focus:"end"})}const M=(0,u().sQ)(l.start.store);if(o.shiftKey&&!o.altKey&&(0,m().iB)(g,l.end.store)&&M){if(te(t))return void v().rS({environment:t,direction:"down",bypassExistingTextSelection:!1,expandSelection:!0});const e=(0,d().tp)({multiSelection:l,focus:g,filterCommonAncestors:!0});if(e)return o.preventDefault(),void I().Z5({environment:t,...e})}j({store:g.store,contentEditableLeafRegistry:i,avoidEdgesOfContentEditableRoot:!0,selection:(0,m().x0)(g.store)})}function $(e){n().default.afterNextFlush((()=>{L()})),E();const{environment:t,event:o,contentEditableLeafRegistry:r}=e,a=p().get(),l=y().default.state;if("empty"===l.mode)return;const{multiSelection:u}=l,{focus:g,anchor:h}=(0,d().uZ)(u),_=g.store&&f().E.findEditableWithStore(g.store),b=(0,m().mK)(g.store),k=b&&f().E.findEditableWithStore(b);if((0,m().e7)(g,g.store)&&k&&_&&k.props.isDiscussionInput===_.props.isDiscussionInput){const e=(0,c().TD)({store:k.props.store,selection:(0,m().x0)(k.props.store)});if(o.shiftKey&&!o.altKey&&e&&(0,s().D1)(k.getNode(),null==a?void 0:a.commonAncestorContainer))return o.preventDefault(),void ee({environment:t,multiSelection:(0,d().$r)(e.start,h),focus:e.start,forceEmit:!1});if(!o.shiftKey&&!o.altKey&&e&&(0,c().iG)(u))return o.preventDefault(),void ee({environment:t,forceEmit:!1,multiSelection:e,focus:"start"})}if(o.shiftKey&&!o.altKey&&(0,m().e7)(g,u.start.store)){if(te(t))return void v().eh({environment:t,direction:"left",bypassExistingTextSelection:!1,expandSelection:!0});const e=(0,d().tp)({multiSelection:u,focus:g,filterCommonAncestors:!0});if(e)return o.preventDefault(),void I().Z5({environment:t,...e})}if(o.altKey||o.shiftKey||o.ctrlKey||o.metaKey||!a||!a.collapsed)j({store:g.store,contentEditableLeafRegistry:r});else{const e=g.index-1,r=i().b1T(u.start.store.getValue(),e);if(r&&i().tk7(r)){o.preventDefault(),M({multiSelection:{start:{...g,index:e},end:g}});const a={startIndex:e,endIndex:g.index};i().YrK(r)&&n().default.afterNextFlush((()=>{S().qn({environment:t,selectedToken:{token:r,position:a},analyticsFrom:"arrow_keys"})}))}const a=i().hpT(g.store.getValue(),e,((e,t)=>{const o=i().Hze(e);return t?Boolean(o&&i().Hze(t)===o):Boolean(o)}));a&&w().dz({type:"selectionFocus",store:g.store,focus:!1,selection:a})}}function Q(e){n().default.afterNextFlush((()=>{L()})),E();const{environment:t,event:o,contentEditableLeafRegistry:r,editorMode:a}=e,l=p().get(),u=y().default.state;if("empty"===u.mode)return;const{multiSelection:g}=u,{focus:h,anchor:_}=(0,d().uZ)(g),b=h.store&&f().E.findEditableWithStore(h.store),k=(0,m().hn)(h.store),T=k&&f().E.findEditableWithStore(k);if((0,m().ST)(u.multiSelection.start.store.getValue(),u.multiSelection.start.index-1,i().GKr.Code)&&(0,m().iB)(h,h.store)&&(0,c().iG)(g))return o.preventDefault(),void x().createAndCommit({userAction:"textSelectionActions.arrowRightInCodeBlockAtEOL",environment:t,canUndo:!0,perform:e=>{C().hJ({environment:t,editorMode:a,store:h.store,multiSelection:g,string:" ",transaction:e,disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,disableFilters:!0})}});if((0,m().iB)(h,h.store)&&T&&b&&T.props.isDiscussionInput===b.props.isDiscussionInput){const e=(0,c().TD)({store:T.props.store,selection:{startIndex:0,endIndex:0}});if(o.shiftKey&&!o.altKey&&e&&(0,s().D1)(T.getNode(),null==l?void 0:l.commonAncestorContainer))return o.preventDefault(),void ee({environment:t,multiSelection:(0,d().$r)(e.start,_),focus:e.start,forceEmit:!1});if(!o.shiftKey&&!o.altKey&&e&&(0,c().iG)(g))return o.preventDefault(),void ee({environment:t,forceEmit:!1,multiSelection:e,focus:"end"})}if(o.shiftKey&&!o.altKey&&(0,m().iB)(h,g.end.store)){if(te(t))return void v().eh({environment:t,direction:"right",bypassExistingTextSelection:!1,expandSelection:!0});const e=(0,d().tp)({multiSelection:g,focus:h,filterCommonAncestors:!0});if(e)return o.preventDefault(),void I().Z5({environment:t,...e})}if(o.altKey||o.shiftKey||o.ctrlKey||o.metaKey||!l||!l.collapsed)j({store:h.store,contentEditableLeafRegistry:r});else{const e=h.index,r=h.index+1,a=i().b1T(g.start.store.getValue(),e);if(a&&i().tk7(a)){o.preventDefault(),M({multiSelection:{start:h,end:{...h,index:r}}});const s={startIndex:e,endIndex:r};i().YrK(a)&&n().default.afterNextFlush((()=>{S().qn({environment:t,selectedToken:{token:a,position:s},analyticsFrom:"arrow_keys"})}))}const s=i().hpT(h.store.getValue(),e,((e,t)=>{const o=i().Hze(e);return t?Boolean(o&&i().Hze(t)===o):Boolean(o)}));s&&w().dz({type:"selectionFocus",store:h.store,focus:!1,selection:s})}}function Y(e,t){const{x:o,y:n,target:i}=t,r=(0,m().fx)(o,n,i);r&&r.selectable.props.onEditText&&x().createAndCommit({userAction:"textSelectionActions.editNearestBlock",environment:e,canUndo:!0,perform:e=>{r.selectable.props.onEditText&&r.selectable.props.onEditText({isAtStartOfLine:o<=r.rect.left,isClick:!0,transaction:e})}})}function J(e,t,o){const{x:n,y:i,target:r}=t,a=r?b().default.getDefaultContainerFromTarget(r):void 0;if(a&&(0,m().Q3)(i,a)&&k().HO({environment:e,container:a,transaction:o}))return;const s=(0,m().fx)(n,i,r);if(s&&s.selectable.props.onEditText){const e=i<=s.rect.top;s.selectable.props.onEditText({isAtStartOfLine:n<=s.rect.left,isAtStartOfContainer:e,isClick:!0,transaction:o})}}function X(e,t,o,n){const{y:i,target:r}=t,a=r?b().default.getDefaultContainerFromTarget(r):void 0,s=g().C.findSelectableFromStore(o);a&&s&&(0,m().qh)(i,s)&&k().UG({environment:e,container:a,store:o,transaction:n})}function ee(e){const{environment:t,multiSelection:o,forceEmit:n,readOnly:i,focus:r}=e;M({multiSelection:o,forceEmit:n,readOnly:"infer"===i?(0,d().L5)(o).some((e=>{let{editable:t}=e;return!t.props.store.canComment()&&!t.props.store.canEdit()})):i});const a=(0,d().tp)({multiSelection:o,filterCommonAncestors:!1,focus:r});a&&I().Z5({environment:t,phase:b().SelectionPhase.Editing,...a})}function te(e){const t=h().UQ();if(t){const{rowIndex:o,columnIndex:n,simpleTableStore:i}=t.getProps();return v().n5({environment:e,rowIndex:o,columnIndex:n,simpleTableStore:i}),z({environment:e}),!0}return!1}function oe(){var e;const t=p().get(),o=null===(e=(0,d().fx)({range:t,contentEditableLeafRegistry:void 0,allowInvisibleEndSelection:!0}))||void 0===e?void 0:e.multiSelection;if(o){M({readOnly:(0,d().L5)(o).some((e=>{let{editable:t}=e;return t.props.disabled})),multiSelection:o})}}},76254:(e,t,o)=>{o.d(t,{VZ:()=>g,vn:()=>u,Y7:()=>m,LH:()=>f});var n=()=>o(568017);const i="theme";var r=()=>o(696459),a=()=>o(593616),s=()=>o(505121),l=()=>o(231077);const c=15;function d(e,t){const{device:o,ThemeStore:r}=e,{mode:a,usingSystemTheme:d}=t;if(window.notionTheme)return;const u={mode:a};r.setState(u),e.mobileNative&&e.mobileNative.setTheme(a,d),l().setTheme(function(e,t){const o=(0,n().gh)({theme:e});return{mode:e,usingSystemTheme:t,colors:{white:n().ZP.white,blue:n().ZP.blue},borderRadius:4,textColor:o.regularTextColor,popoverBackgroundColor:o.popoverBackground,popoverBoxShadow:o.mediumBoxShadow,inputBoxShadow:o.inputBoxShadow,inputBackgroundColor:o.inputBackground,dividerColor:o.darkDividerColor,shadowOpacity:o.shadowOpacity}}(a,d)),localStorage.setItem(i,JSON.stringify(u)),function(e,t){if(0===e.nativeScrollbarWidth)return;const o=document.getElementById("scroll-properties");o&&(o.innerHTML=`\n\t\t* {\n\t\t\tscrollbar-width: ${c}px;\n\t\t\tscrollbar-color: ${p.scrollbarThumb[t]}  ${p.scrollbarTrack[t]};\n\t\t}\n\t`,s().Z.setState(c))}(o,a),"dark"===a?document.body.classList.add("dark"):document.body.classList.remove("dark")}function u(e){return e.device.prefersDarkInterface?"dark":"light"}const p={scrollbarTrack:{light:"rgba(0, 0, 0, 0)",dark:"rgba(0, 0, 0, 0)"},scrollbarThumb:{light:"#D3D1CB",dark:"rgba(255, 255, 255, 0.2)"},scrollbarThumbHover:{light:"#AEACA6",dark:"rgba(255, 255, 255, 0.3)"}};function m(e){a().Z.setState(e)}function f(e){const t=g(e);switch(t){case"dark":case"light":d(e,{mode:t,usingSystemTheme:!1});break;case"system":!async function(e){const{mobileNative:t}=e;let o="light";o=t&&t.api.getTheme?await t.api.getTheme():u(e),d(e,{mode:o,usingSystemTheme:!0})}(e);break;default:(0,r().t1)(t)}}function g(e){const t=a().Z.state||"system";return"dark"===(o=t)||"light"===o||"system"===o?o:"system";var o}},369637:(e,t,o)=>{o.d(t,{MV:()=>s,Xd:()=>c,m2:()=>l});var n=()=>o(730120),i=()=>o(956057),r=()=>o(513670),a=()=>o(975611);function s(e){const t=e.id??i().Il(),o=e.createdAt??n().ou.now().toMillis(),r={...e,id:t,createdAt:o,presentationType:e.presentationType??"transient"};return a().Z.setState({...a().Z.state,toasts:{...a().Z.state.toasts,[t]:r}}),r}function l(e){const t=e.id;return t&&a().Z.state.toasts[t]?function(e,t){const o=a().Z.state.toasts[e];if(!o)return s(t);const i={...o,...t,updatedAt:n().ou.now().toMillis()};return a().Z.setState({toasts:{...a().Z.state.toasts,[e]:i}}),i}(t,e):s(e)}function c(e,t,o){const n=a().Z.state.toasts[e];if(n){var i,s;if(!t)if(null===(i=n.onDismiss)||void 0===i||i.call(n),o)null===(s=n.onUserDismiss)||void 0===s||s.call(n);a().Z.setState({...a().Z.state,toasts:r().CE({...a().Z.state.toasts},[e])})}}},541199:(e,t,o)=>{o.d(t,{B:()=>a,c:()=>s});var n=()=>o(532850),i=()=>o(491927),r=()=>o(636340);function a(e){const{blocks:t,transaction:o,environment:a}=e;for(const i of t)r().sW({store:i.getPropertiesStore(),data:{checked:n()._I(!0)},transaction:o});i().Jr(a,{is_checked:!0})}function s(e){const{environment:t,blocks:o,transaction:a}=e;for(const i of o)r().sW({store:i.getPropertiesStore(),data:{checked:n()._I(!1)},transaction:a});i().Jr(t,{is_checked:!1})}},94912:(e,t,o)=>{o.d(t,{nz:()=>k,ls:()=>S,LO:()=>I,rd:()=>w,X_:()=>x});o(670560),o(267602),o(916054),o(749411),o(30005),o(241792);var n=()=>o(156642),i=()=>o(35980),r=()=>o(741633),a=()=>o(81954),s=()=>o(513670),l=()=>o(465371),c=()=>o(472753),d=()=>o(445264),u=()=>o(547913),p=()=>o(824462);const m=new(o(973019).Z)({performRequests:async e=>{const{environment:t}=e[0];if(o(749826).default.checkGate({gateName:"load_page_chunk_multi_cell_enabled"})){const n=s().vM(e,(e=>{const t=e.headers;return t[u().HY]||t[u().YM]}));await o(839002).qd(Object.values(n),10,(async e=>{if(e.length>0){const o=await p().callApi({eventName:"loadCachedPageChunks",environment:t,data:{requests:e.map((e=>e.args))},headers:e[0].headers});if("failed"===o.type)throw o.error}}))}else{const o=e.map((e=>e.args)),n=await p().callApi({eventName:"loadCachedPageChunks",environment:t,data:{requests:o},headers:{}});if("failed"===n.type)throw n.error}return[]},batchSize:50,maxWorkers:2,requestDelayMs:20,requestTimeoutMs:10*o(326966).C0});var f=()=>o(384667),g=()=>o(282662),v=()=>o(636340),h=()=>o(879952),_=()=>o(990966);const b="ToggleBlock";function y(e){return`${b}-${e}`}function S(e){const{environment:t,store:o,transaction:i}=e,r=v().j4({environment:t,type:n().Ti.text,inMemoryRecordCache:o.inMemoryRecordCache,transaction:i,spaceId:o.pointer.spaceId});g().R3({parentStore:o.getContentStore(),appendStore:r,transaction:i});const a=o.getContentStores()[0];h().eP({environment:t,store:a});const s=a.getBlockTitleStore();_().setSelectionAtStart({store:s})}function w(e){let{blockId:t,state:o,currentUserId:n}=e;d().Z.setOpen(t,o),i().Z.set({userId:n,key:y(t),value:o})}function k(e){let{blockId:t,currentUserId:o}=e;const n=i().Z.get({userId:o,key:y(t)});d().Z.setOpen(t,n)}function I(e,t){if(!t.isDefaultRecordCache())return;if(!t.hasContent())return;const o=t.pointer;!async function(e,t,o){await m.enqueue({environment:e,args:t,headers:o})}(e,{page:{id:o.id,spaceId:(0,a().J)(o.spaceId)},limit:30,cursor:{stack:[]},verticalColumns:!1},(0,r().Bb)({recordId:o.id,spaceId:o.spaceId}))}function C(e,t){const o=(null==t?void 0:t.toggleBlockIds)||[],i=(null==t?void 0:t.collectionBlockIds)||[],r=e.getType();if((0,l().BX)(e)&&o.push(e.id),"collection_view"!==r&&"collection_view_page"!==r||i.push(e.id),r===n().Ti.transclusionReference){const t=e.getTransclusionReferenceTargetStore();t&&C(t,{toggleBlockIds:o,collectionBlockIds:i})}else{const t=e.getContentStores();for(const e of t)e.isNavigableBlock()||C(e,{toggleBlockIds:o,collectionBlockIds:i}),"collection_view"===e.getType()&&i.push(e.id)}return{toggleBlockIds:o,collectionIds:i}}function x(e,t){const{toggleBlockIds:o,collectionIds:n}=C(t),i=t.environment.currentUser.id;o.forEach((e=>k({blockId:e,currentUserId:i})));const r=s().oA(n.map((e=>function(e){const t=c().R.findCollectionViewBlockFromId(e);if(t&&"collectionContextStore"in t)return t.collectionContextStore}(e)))),a=r.flatMap((e=>e.groupsStore.getAllGroupStates())),l=o.every((e=>d().Z.isOpen(e))),u=a.every((e=>e.toggleStateStore.state)),p=!(l&&u);o.forEach((e=>w({blockId:e,state:p,currentUserId:i}))),function(e,t,o){for(const n of t)for(const t of n.groupsStore.getAllGroupStates())f().uo({environment:e,collectionContextStore:n,groupFormat:t.groupsPointer[0],toggleStateStore:t.toggleStateStore,newValue:o})}(e,r,p)}},448046:(e,t,o)=>{o.d(t,{lY:()=>g,qA:()=>v,HM:()=>f});o(267602),o(653476);var n=()=>o(955620),i=()=>o(572948),r=()=>o(696459),a=(o(241792),()=>o(574767));var s=()=>o(8208),l=()=>o(286338),c=()=>o(350430),d=()=>o(876822),u=()=>o(288981),p=()=>o(197666),m=()=>o(111124);function f(e){var t;if(p().Z.state)return;const o=(0,l().En)(),{token:f,store:v}=e,h=n().hDy(f.textToken),_=null===(t=d().default.state.mainEditorCurrentBlockStore)||void 0===t?void 0:t.getSpaceId(),b=_?n().zrg(h).filter((e=>!(0,i().vz)({annotation:e,spaceId:_,getRecordModel:v.getRecordModel}))):[],y=_?n().$d7(h).filter((e=>!(0,i().vz)({annotation:e,spaceId:_,getRecordModel:v.getRecordModel}))):[],S=n().eQP(h),w=[n().rlz(h),n().K9C(h),n().QGY(h),n().frE(h),n().xat(h),n().J82(h),n().V8Y(h)||void 0,n().LLi(h),n().ujB(h),o&&n().hH9(h)||void 0,...b,...y,n().jC0(h),S].filter(r().$K);w.length>0?(m().Z.setState({type:"token",token:f,store:v,annotations:w}),(b.length>0||y.length>0)&&function(e){let{source:t,discussionAnnotations:o}=e;a().Z.setState({source:t,discussionIds:o.map(n().XIY)})}({discussionAnnotations:[...b,...y],source:"editor"}),S&&!c().Z.containedByAssistantEditCard(f.node)&&u().Z.setState({...u().Z.state,hoveredEditId:S[1]}),n().ujB(h)&&s().Z.setHoverWithSource("text_annotation")):g()}function g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{relatedNode:t}=e;var o,n;m().Z.state&&m().Z.setState(void 0),o="editor",(null===(n=a().Z.state)||void 0===n?void 0:n.source)===o&&a().Z.setState(void 0),s().Z.resetHoverSource("text_annotation"),!u().Z.state.hoveredEditId||t&&c().Z.containedByAssistantEditCard(t)||u().Z.setState({...u().Z.state,hoveredEditId:void 0})}function v(e){e&&m().Z.state&&m().Z.state.store===e&&g()}},269299:(e,t,o)=>{o.r(t),o.d(t,{DEADLOCK_WARNING_TIMEOUT_MS:()=>be,MetadataUpdateManager:()=>Se,applyCrdtTextOperation:()=>Ce,applyCrdtTextOperations:()=>xe,applyOperation:()=>Ie,createAndCommit:()=>Ue,createAndCommitAsync:()=>Ne,createAndCommitOrAppend:()=>De,updateConnectionState:()=>ye});o(821057),o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(916054),o(653476),o(470928),o(749411),o(30005),o(241792),o(228244);var n=()=>o(504008),i=()=>o(387934),r=()=>o(890684),a=()=>o(799891),s=()=>o(942275),l=()=>o(720612),c=()=>o(225339);var d=()=>o(836230),u=()=>o(431595),p=()=>o(530980),m=()=>o(481529),f=()=>o(396035),g=()=>o(827370),v=()=>o(249262),h=()=>o(494616),_=()=>o(922713),b=()=>o(396136),y=()=>o(752778),S=()=>o(139978),w=()=>o(602299),k=()=>o(483791),I=()=>o(255933),C=()=>o(989478),x=()=>o(386616),T=()=>o(680146);var M=()=>o(349220),P=()=>o(513670),A=()=>o(792409),R=()=>o(696459),B=()=>o(326966),E=()=>o(205228),D=()=>o(571493),U=()=>o(308186),F=()=>o(794321),N=()=>o(749826);var V=()=>o(148976),L=()=>o(527278),O=()=>o(239482),Z=()=>o(757590),j=()=>o(10208),K=()=>o(804217),z=()=>o(527135),H=()=>o(148882),q=()=>o(826955),W=()=>o(965903),G=()=>o(127519),$=()=>o(576387),Q=()=>o(606571),Y=()=>o(536279),J=()=>o(690479),X=()=>o(113501);function ee(e){const{transaction:t,inMemoryRecordCache:o,store:n,operation:i}=e,r=i.command;switch(r){case"insertText":case"deleteText":case"addAnnotation":case"removeAnnotation":case"splitText":const e=(0,Y().TO)(n.getBlockTitleTextSliceTree(),Q().o6);return a=n,s=new ie(t,i),X().Z.getPageStoreForBlockStore(a)||re("source",a,s),function(e){const{inMemoryRecordCache:t,store:o,operation:n,textSliceTreeToMutate:i}=e,r=i.getTextValue(),a=n.command;switch(a){case"insertText":i.applyInsertTextOperation({type:a,...n.args});break;case"deleteText":i.applyDeleteOperation({type:a,...n.args});break;case"addAnnotation":case"removeAnnotation":i.applyAnnotationOperation({type:a,...n.args});break;case"splitText":i.applySplitOperation({type:a,...n.args});break;default:(0,R().t1)(a)}const s=te({blockValueOrStore:o,role:ne(t,o),textSliceTree:i,originalTextValue:r});return[s]}({inMemoryRecordCache:o,textSliceTreeToMutate:e,store:n,operation:i});case"moveTextSlice":return oe({transaction:t,inMemoryRecordCache:o,sourceStore:n,operation:i});case"moveTextSliceIntoBlock":return function(e){const{transaction:t,inMemoryRecordCache:o,sourceStore:n,operation:i}=e;return(0,Y().T)(i.args.targetBlockId!==i.pointer.id,"Target block should be different from source block."),oe({transaction:t,inMemoryRecordCache:o,sourceStore:n,operation:{...i,command:"moveTextSlice",args:{...i.args,targetTextInstanceId:i.args.targetBlockId,targetTextSliceEndItemId:"end"}},debugInfo:new ie(t,i)})}({transaction:t,inMemoryRecordCache:o,sourceStore:n,operation:i});case"replaceTextInBlock":throw new Error("replaceTextInBlock operation should not be applied on the client");default:(0,R().t1)(r)}var a,s}function te(e){const{blockValueOrStore:t,textSliceTree:o,role:n,originalTextValue:i}=e,r=t instanceof q().G?(0,Y().TO)(t.getValue(),Q().FG):t,a=P().Xh(r);return J().o_({blockValue:a,textSliceTree:o,originalTextValue:i}),{pointer:{table:b().iU,id:a.id,spaceId:a.space_id},newValue:a,role:n,updatePaths:[["format","text_slice_tree"],["format","text_clocks"],["crdt_data","title"],["properties","title"],["crdt_format_version"],["discussions"]]}}function oe(e){const{transaction:t,inMemoryRecordCache:o,sourceStore:n,operation:i,debugInfo:r}=e,a=(0,Y().TO)(n.getValue(),Q().FG),s=ne(o,n),l=(0,Y().TO)(n.getBlockTitleTextSliceTree(),Q().o6),c=i.args.targetBlockId===n.id?n:new(q().G)(n.environment,{table:b().iU,id:i.args.targetBlockId});return function(e,t,o){const n=X().Z.getPageStoreForBlockStore(e);if(!n)return void re("source",e,o);const i=X().Z.getPageBlockTrackerForPage(n.pointer),r=null==i?void 0:i.getPathToBlock(t.pointer.id);r||re("target",t,o)}(n,c,r??new ie(t,i)),function(e){const{transaction:t,inMemoryRecordCache:o,sourceRole:n,sourceValue:i,sourceRootTextSliceTree:r,targetStore:a,operation:s}=e,l=(0,Y().TO)(r.findTextSliceTreeContainingItemWithId(s.args.textInstanceId,s.args.textSliceStartItemId),Q().zg);(0,Y().T)(l!==r,"Can not move root node of text slice tree.");const c=r.getTextValue();!function(e,t){const o=t.getRecordStoreAtRootPath().getValue(),n=t.getRecordStoreAtRootPath().getRole(),i=e.initialRecordMap.getRole(t.pointer);i||(n?e.initialRecordMap.setValueAndRole(t.pointer,o,n):e.initialRecordMap.delete(t.pointer))}(t,a);const d=s.args.targetBlockId===i.id,u=d?r:(0,Y().TO)(a.getBlockTitleTextSliceTree(),Q().o6),p=(0,Y().TO)(u.findTextSliceTreeContainingItemWithId(s.args.targetTextInstanceId,s.args.targetTextSliceEndItemId,{type:"end"}),Q().zg),m=d?c:u.getTextValue();l.detachFromParent(),p.appendChild(l);const f=te({blockValueOrStore:i,role:n,textSliceTree:r,originalTextValue:c}),g=[f];if(!d){const e=te({blockValueOrStore:a,role:ne(o,a),textSliceTree:u,originalTextValue:m});g.push(e)}return g}({transaction:t,inMemoryRecordCache:o,sourceValue:a,sourceRole:s,sourceRootTextSliceTree:l,targetStore:c,operation:i})}function ne(e,t){return e.getRole({pointer:t.pointer,userId:t.userId})??"editor"}class ie{constructor(e,t){this.transaction=e,this.operation=t}get(){return{transactionName:this.transaction.getUserActionForAnalyticsPurposesOnly(),operationName:this.operation.command}}}function re(e,t,o){const{transactionName:n,operationName:r}=o.get();(0,i().XY)(`The ${e} block store for CRDT text operation "${r}" in transaction "${n}" is not on the page. Undoing the transaction may not work!`,[["block id =",t.id]])}var ae=()=>o(540520),se=()=>o(146630),le=()=>o(231327),ce=()=>o(160916),de=()=>o(217465),ue=()=>o(233878);var pe=()=>o(143346),me=()=>o(207874);const fe={updateSyncedCollectionActions:new(o(677559).Ss)("updateSyncedCollectionActions",(async()=>o.e(78934).then(o.bind(o,983317))))};let ge;const ve=new Set;let he=0;const _e=(0,o(788860).vU)({invalidBlockOperation:{defaultMessage:"Hey there! Blocks cannot be moved inside of themselves.",id:"saveChanges.errorDialog.blocksCannotBeMovedInsideSelf.message"},saveEditsError:{id:"saveEditsError.message",defaultMessage:"There was an issue persisting your edits. Please message us for help."}}),be=25*B().C0;function ye(e){K().default.state.online&&e.currentUser.id&&H().transactionQueue.unpause()}class Se{constructor(e){this.transaction=void 0,this.timeMs=void 0,this.userId=void 0,this.skipUpdatingEditedMetadata=void 0,this.seenStoreIds=void 0,this.operations=void 0,this.transaction=e.transaction,this.timeMs=e.timeMs,this.userId=e.userId,this.skipUpdatingEditedMetadata=e.skipUpdatingEditedMetadata,this.seenStoreIds=new Set,this.operations=new Map}addStoreWithLargeSubtree(e){this.addStoreInternal(e,{shouldDebounceEditedTime:!0})}addStore(e){this.addStoreInternal(e,{shouldDebounceEditedTime:!1})}getAllOperations(){return Array.from(this.operations.entries())}addStoreInternal(e,t){if(e.inMemoryRecordCache.recordHasOverride({pointer:e.pointer,userId:this.transaction.userId}))return;if(this.seenStoreIds.has(e.id))return;this.seenStoreIds.add(e.id);const o={};P().TS(o,this.collectCreationMetadata(e),this.skipUpdatingEditedMetadata?{}:this.collectEditionMetadata(e,t.shouldDebounceEditedTime)),Object.keys(o).length>0&&this.operations.set(e,{pointer:e.pointer,path:[],command:"update",args:o})}collectCreationMetadata(e){const t={};(e.isDefined()?e.getCreatedById():void 0)||(t.created_by_id=this.userId,t.created_by_table=C().KJ);return(e.isDefined()?e.getCreatedTime():void 0)||(t.created_time=this.timeMs),t}collectEditionMetadata(e,t){const o={},n=e.isDefined()?e.getLastEditedTime():-1,i=t?this.hasDebounceEnded(n,this.timeMs):n!==this.timeMs;if(i&&(o.last_edited_time=this.timeMs),e instanceof q().G||e instanceof q().H2||e instanceof q().Mz||e instanceof q().xj||e instanceof q().y){const t=o;((e.isDefined()?e.getLastEditedById():void 0)!==this.userId||i)&&(t.last_edited_by_id=this.userId,t.last_edited_by_table=C().KJ)}return o}hasDebounceEnded(e,t){return B().ud(e)!==B().ud(t)}}function we(e){P().mN(e.stores,(e=>e.id)).forEach((t=>{if(!t.inMemoryRecordCache.recordHasOverride({pointer:t.pointer,userId:e.userId}))if(t.table===b().iU){const o=q().G.fromRecordStore(t);if(o.isDefined()){const t=o.getModel(),n=(0,l().xN)({block:t,secureFileConfigRootpath:E().default.secureFileConfig.rootPath,secureFileConfigHostname:E().default.secureFileConfig.hostname,recordPointer:t.pointer}),i=n.fileIds,r=n.operations,a=o.getFileIds();for(const s of i)a.indexOf(s.id)<0&&Ie({transaction:e,store:o,operation:{pointer:o.pointer,path:["file_ids"],command:"listAfter",args:{id:s.id}}});for(const s of r)(0,x().Qf)(s)?Ce({transaction:e,store:o,operation:s,invertedOperation:void 0}):(0,m().V_)(s)||(0,m().SH)(s)?Ie({transaction:e,store:o,operation:s}):(0,R().t1)(s)}}else if(t.table===y().vF){const o=q().NW.fromRecordStore(t),n=o.getFileIds(),i=o.getIconStore().getValue(),r=o.getCoverStore().getValue();if(o.isDefined()){const t=function(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(t&&!e.file_ids)return[];const i=[],{cover:r,icon:a}=e;if(r){const e=(0,c().ze)(r,o,n);e&&i.push(e)}if(a){const e=(0,c().ze)(a,o,n);e&&i.push(e)}return i}({cover:r,icon:i,file_ids:n},!1,E().default.secureFileConfig.rootPath,E().default.secureFileConfig.hostname),a=n;for(const n of t)a.indexOf(n.id)<0&&Ie({transaction:e,store:o,operation:{pointer:o.pointer,path:["file_ids"],command:"listAfter",args:{id:n.id}}})}}}))}function ke(e){var t,o;const{environment:n,userId:r,userAction:s,cellTarget:l}=e,c=l&&N().default.checkGate({gateName:"transaction-space-id-override"})?"main"===l||null==l?void 0:l.spaceWithId:se().Bs(),d=new Error("Potential transaction deadlock"),u=new(Z().Y)({spaceId:c,userId:r||n.currentUser.id,deadlockTimeoutMs:be,onDeadlockWarning:()=>{ve.delete(u);const e=u.getUserActionForAnalyticsPurposesOnly();(0,i().XY)(`A ${e} transaction hasn't been committed in ${be} ms.`,[["stack =",d.stack]]),T().IE(d,{extra:{operations_count:u.operations.length},tags:{userAction:e}}),ae().y9(n,{operations_count:u.operations.length,user_action:e});const t=u.operations.map((e=>({command:e.command,stringifiedArgs:(0,A().LK)({path:e.path,pointer:e.pointer})})));a().log({level:"warning",from:"transactionActions",type:"transactionDeadlockWarning",data:{userAction:e,operations:t}})},debugLogging:{logToConsole:F().Z.isDebuggingEnabled(),collect:!1}});return null!==(t=u.debugLogging)&&void 0!==t&&t.collect&&u.postEnqueueActions.push((()=>{const e=u.getDebugLog();0===e.length||u.isLocal||a().log({level:"info",from:"transactionActions",type:"transactionDebugLog",data:{transactionId:u.id,userAction:u.getUserActionForAnalyticsPurposesOnly(),userFlow:u.getUserFlowForAnalyticsPurposesOnly(),miscDataToConvertToString:e}})})),u.beforeSelection=W().default.cloneState(),u.beforeTextSelection=G().default.cloneState(),u.annotateWithUserAction(s),ve.add(u),null===(o=F().Z.provider)||void 0===o||o.onTransactionEvent("create",u),u}function Ie(e){const{store:t,operation:o,transaction:n}=e,{inMemoryRecordCache:i}=t;if((0,m().SH)(o)){const r=(0,d().rb)(o,i.makeGetRecordValueFn(n.userId)),a=(0,d().T1)(o,i.makeGetRecordValueFn(n.userId));for(const n of a)o.additionalUpdatedPointers||(o.additionalUpdatedPointers=[]),o.additionalUpdatedPointers.push(n.pointer),Me({...e,operation:n,isInvertible:!1,store:(0,q().Kv)(t,n.pointer)});return n.operations.push(o),void n.invertedOperations.push(...r)}(0,m().V_)(o)?Me({store:t,operation:o,transaction:n,isInvertible:!0}):(0,R().t1)(o)}function Ce(e){const{store:t,operation:o,invertedOperation:n,transaction:i}=e;xe({store:t,operations:[o],invertedOperations:n?[n]:[],transaction:i})}function xe(e){var t;const{store:o,operations:n,transaction:i}=e;i.invertedOperations.push(...e.invertedOperations),null===(t=F().Z.provider)||void 0===t||t.rememberStackTrace(e.invertedOperations);for(const r of n)Me({store:o,operation:r,transaction:i,isInvertible:!0})}const Te="editor";function Me(e){var t;const{store:o,operation:n,transaction:i}=e,{inMemoryRecordCache:r,environment:a,pointer:l,userId:c}=o;if(r.assertUnexpired(),i.annotateWithOperation(n.command),null===(t=F().Z.provider)||void 0===t||t.onApplyOperation(e),i.committed)throw new Error("Transaction has already been committed.");const d=o.getRecordStoreAtRootPath().getValue(),u=o.getRecordStoreAtRootPath().getRole(),m=(0,x().Qf)(n)?[]:e.isInvertible?[f().bv(n,d)].filter(R().$K):[];let g;if(i.initialRecordMap.getRole(l)||(u?i.initialRecordMap.setValueAndRole(l,d,u):i.initialRecordMap.delete(l)),(0,x().Qf)(n))g=ee({transaction:i,inMemoryRecordCache:r,store:(0,M().R9)(o,q().G,`Expected "${q().G.keyName}", got "${o.table}"`),operation:n});else{!function(e,t){if(!D().k8||e.pointer.table!==b().iU)return;const o=t.getUserActionForAnalyticsPurposesOnly();if(null==o||!o.startsWith("revisionActions"))switch(e.command){case"set":if(0===e.path.length)n({operation:e,message:"a new block was not created in a CRDT-aware way!",advice:"Please use a CRDT-aware function instead, such as recordActions.createBlock().",successMessage:"Block created in a CRDT-aware way (this is good)."});else if(P().Xy(e.path,["properties","title"]))n({operation:e,message:"a title update was not performed in a CRDT-aware way!",advice:"Please use a CRDT-aware function instead, such as textActions.setValue().",successMessage:"Title update performed in a CRDT-aware way (this is good)."});else if(P().Xy(e.path,["properties"])||P().Xy(e.path,["format"])){const[t]=e.path;n({operation:e,message:`a ${t} update was not performed in a CRDT-aware way!`,advice:"Please use a CRDT-aware function instead, such as recordActions.updateValue()."})}break;case"update":0===e.path.length&&P().Kn(e.args)&&"properties"in e.args||P().Xy(e.path,["properties"])&&P().Kn(e.args)&&"title"in e.args?n({operation:e,message:"a properties update was not performed in a CRDT-aware way!",advice:"Please use textActions.setValue() to set the title separately from the rest of the properties."}):(0===e.path.length&&P().Kn(e.args)&&"format"in e.args||P().Xy(e.path,["format"])&&P().Kn(e.args)&&("use_crdt"in e.args||"text_slice_tree"in e.args||"text_clocks"in e.args))&&n({operation:e,message:"a format update was not performed in a CRDT-aware way!",advice:"Please use a CRDT-aware function instead, such as recordActions.updateValue()."})}function n(e){const{operation:t,message:n,advice:i,successMessage:r}=e;if((0,D().IG)(t.args))F().Z.isDebuggingEnabled()&&"string"==typeof r&&console.log(r);else{N().default.checkGate({gateName:"show_crdt_warnings"});const e={command:t.command,pointer:t.pointer,path:t.path};T().IE(new Error(n),{tags:{userAction:o,warningType:"possiblyCrdtUnawareOperation"},extra:{operation:e}})}}}(n,i);const e=f().lK(n,d),t=r.getRole({pointer:l,userId:c});!d&&(0,R().DE)(Z().F,l.table)&&o instanceof q().p$[l.table]&&i.newlyCreatedStoresForPermissionInference.set(l,{store:o,inferredPermissionFromParent:void 0});const a="update"===n.command?Object.keys(n.args).map((e=>n.path.concat([e]))):[n.path];g=[{pointer:l,newValue:e,role:t??Te,updatePaths:a}]}for(const f of g){const{pointer:e,newValue:t,role:n,updatePaths:l}=f;if(pe().Wl({environment:a,inMemoryRecordCache:r,pointer:e,userId:c,force:!0,model:p().kk5.fromValue(o.pointer.table,t),role:n,updatePaths:l,debugSource:i.getUserActionForAnalyticsPurposesOnly()??"applyOperation"}),"block"===o.table){const e=t;if(e){const t=(0,s().ky)({block:e,getRecordValue:r.makeGetRecordValueFn(i.userId)});t&&z().Z.setEditedBlock(t.id,e.id)}0}}i.isLocal=!o.shouldCacheSaveTransactions(),i.isLocal&&r.onOperationCallback&&r.onOperationCallback({operation:n,store:o}),e.isInvertible&&(i.operations.push(n),i.invertedOperations.push(...m)),i.stores.push(o),i.annotateWithOperation(void 0),r.appliedTransaction=!0}const Pe=[{type:"userAction",allowedUserAction:"revisionActions.undoRevision"},{type:"userAction",allowedUserAction:"revisionActions.redoRevision"}];function Ae(e){var t;null===(t=F().Z.provider)||void 0===t||t.onTransactionEvent("cancel",e),e.cancelDeadlockWarning(),ve.delete(e);const o=P().mN(e.stores,(e=>e.id));for(const n of o){pe().uo({inMemoryRecordCache:n.inMemoryRecordCache,persistedRecordCache:n.environment.defaultRecordCache.persistedRecordCache,pointer:n.pointer,userId:n.userId,environment:n.environment});const t=e.initialRecordMap.getValue(n.pointer),o=e.initialRecordMap.getRole(n.pointer);o&&pe().Wl({environment:n.environment,inMemoryRecordCache:n.inMemoryRecordCache,pointer:n.pointer,userId:n.userId,updatePaths:[[]],model:p().kk5.fromValue(n.pointer.table,t),role:o,debugSource:"cancelTransaction"})}for(const n of e.postCancelCallbacks)n()}const Re=P().P2(((e,t)=>{ae().Y_(e,{errorType:t.type||t.name}),t.type===o(826480).vZ?U().Hr(t.message):U().Hr(L().Z.formatMessage(_e.saveEditsError))}),3e4);function Be(e){return new Promise((async(t,o)=>{var n,i;ve.delete(e.transaction);const s=Array.from(ve).filter((e=>e.operations.length>0));var l,c;if(s.length>0&&ae().iB(e.environment,{committed_transaction_user_action:e.transaction.getUserActionForAnalyticsPurposesOnly(),first_uncommitted_transaction_user_action:s[0].getUserActionForAnalyticsPurposesOnly(),uncommitted_transaction_count:s.length}),0===e.transaction.operations.length)return null===(l=H().transactionQueue.logEmptyTaskForDebugging)||void 0===l||l.call(H().transactionQueue,e.transaction.getUserActionForAnalyticsPurposesOnly()),e.transaction.committed=!0,e.transaction.done(),null===(c=F().Z.provider)||void 0===c||c.onTransactionEvent("commitEmpty",e.transaction),t();void 0===e.canUndo&&(e.canUndo=!0);const{transaction:d,canUndo:u}=e,m=function(e){for(const t of e.stores)if("block"===t.table){const e=O().Om(t);if(e&&O().eG(e).find((e=>e.table===t.table&&e.id===t.id)))return L().Z.formatMessage(_e.invalidBlockOperation)}}(d);if(m)return Ae(d),U().UW(m),void t();null===(n=ge)||void 0===n||n(e.environment,d),d.cancelDeadlockWarning();for(const e of d.preEnqueueActions)e();if(function(e){const{environment:t,transaction:o,skipUpdatingEditedMetadata:n}=e,i=t.currentUser.adminUserId?C().el.id:t.currentUser.id,a=new Se({transaction:o,userId:i,skipUpdatingEditedMetadata:n,timeMs:Date.now()}),s=P().mN(o.stores,(e=>e.id));for(const l of s)if(l.table===b().iU){const e=q().G.createChildStore(l,l.pointer);if(e.canEdit()&&a.addStore(e),!e.isNavigableBlock()){const t=O().Dg(e);t&&t.canEdit()&&a.addStoreWithLargeSubtree(t)}}else if(l.table===w().x_){if(l.path.length)continue;const e=l.pointer,t=o.initialRecordMap.getValue(e),n=l.getValue();(void 0===t||r().P(p().kk5.fromValue(w().x_,t),p().kk5.fromValue(w().x_,n)))&&a.addStore(q().T5.createChildStore(l,l.pointer))}else if(l.table===I().bx)a.addStoreWithLargeSubtree(q().H2.createChildStore(l,l.pointer));else if(l.table===y().vF){const e=q().NW.createChildStore(l,l.pointer).getParentBlockStore();e&&e.canEdit()&&a.addStore(e)}else if(l.table===S().np){const e=q().Xr.createChildStore(l,l.pointer).getParentBlockStore();e&&e.canEdit()&&a.addStoreWithLargeSubtree(e)}else if(l.table===h().cv){if(l.canEdit()){const e=q().Mz.createChildStore(l,l.pointer);a.addStore(e);const t=e.getParentBlockStore();t&&t.canEdit()&&a.addStore(t)}}else if(l.table===_().Xj){if(l.canEdit()){const e=q().zq.createChildStore(l,l.pointer).getParentStore();e&&e.canEdit()&&a.addStore(e)}}else if(l.table===k().Bh){if(l.canEdit()){const e=q().xj.createChildStore(l,l.pointer);a.addStore(e)}}else if(l.table===v().SS&&l.canEdit()){const e=q().y.createChildStore(l,l.pointer);a.addStore(e)}a.getAllOperations().forEach((e=>{let[t,n]=e;return Ie({transaction:o,store:t,operation:n})}))}({environment:e.environment,transaction:d,skipUpdatingEditedMetadata:e.skipUpdatingEditedMetadata}),we(d),function(e,t){const o=t.operations.filter((e=>e.pointer.table===S().np));o.length>0&&g().dr.uniq(o.map((e=>e.pointer))).map((e=>t.initialRecordMap.getRole(e))).includes(void 0)&&t.postSubmitCallbacks.push((()=>{$().bi(e)}))}(e.environment,d),d.afterSelection=W().default.cloneState(),d.afterTextSelection=G().default.cloneState(),u&&me().K9({transaction:d,undoCheckpoint:e.undoCheckpoint}),null===(i=F().Z.provider)||void 0===i||i.onTransactionEvent("commit",d),(0,V().Uo)())try{const t=await fe.updateSyncedCollectionActions.load();await t.updateSyncedData({transaction:d,environment:e.environment})}catch{return void Ae(d)}if(d.isLocal){for(const e of d.postEnqueueActions)e();d.done(),t()}else{const n=e=>{d.done(e),e?o(e):t()},{LocalBacklinkStore:i,currentUser:r}=e.environment;i&&async function(e,t){const{LocalBacklinkStore:o,currentUser:n}=e;if(0===t.stores.length)return;const i=t.stores[0].inMemoryRecordCache,r=[],a=de().RecordMap.create(),s=new Set;for(const p of t.stores)s.has(p.id)||(s.add(p.id),r.push(p.pointer),a.setValue(p.pointer,p.getRecordStoreAtRootPath().getValue()));const l=ue().DI(t.initialRecordMap),{createdBacklinks:c,deletedBacklinks:d}=await(0,le().xU)({loadRecordValue:ce().zF.fromGetRecordValueFn(i.makeGetRecordValueFn(n.id)),operationPointers:r,getInitialRecordModel:p().omK.fromRecordMap(l),getFinalRecordModel:p().omK.fromRecordMap(a)}),u=o.updateBacklinks({createdBacklinks:c,deletedBacklinks:d,currentUserId:n.id});t.postSubmitCallbacks.push((e=>{e&&o.resetBacklinkState({blockIds:u,currentUserId:n.id})}))}({LocalBacklinkStore:i,currentUser:r},d);const s=Date.now();s<he&&ae().vt(e.environment,{regression_amount:he-s}),he=s,H().transactionQueue.enqueueTask((0,j().JG)({transaction:d,timestamp:s,callback:n})).catch((t=>{a().log({level:"error",from:"transactionActions",type:"enqueueTask",error:(0,A().Ui)(t)}),e.environment.device.isMobileNative&&"SqliteOutOfSpace"===t.name||Re(e.environment,t),Ae(d),n(t)}));for(const e of d.postEnqueueActions)e()}const f=d.userId;for(const[e,r]of d.newlyCreatedStoresForPermissionInference.entries()){const{store:t}=r,o=t.inMemoryRecordCache.getRole({pointer:e,userId:d.userId}),n=Ee({transaction:d,store:t});n!==o&&t.inMemoryRecordCache.setModelAndRole({pointer:e,userId:f},t.getModel(),n)}d.committed=!0}))}function Ee(e){const{transaction:t,store:o}=e,{pointer:n}=o,i=o.inMemoryRecordCache.getRole({pointer:n,userId:t.userId});if(i&&i!==Te)return i;const r=t.newlyCreatedStoresForPermissionInference.get(n);if(!r)return Te;if(r.inferredPermissionFromParent)return r.inferredPermissionFromParent;const a=o.getParentStore();if(!a||a.table!==b().iU||!a.isReady())return Te;const s=Ee({store:a,transaction:t});return r.inferredPermissionFromParent=s,s}function De(e){const{transaction:t,...o}=e;return t?o.perform(t):Ue(o).performResult}function Ue(e){const{userAction:t,environment:o,userId:i,perform:r,canUndo:a,undoCheckpoint:s,transactionTooBigFallback:l,skipUpdatingEditedMetadata:c,skipDefaultPostPerformValidationChecks:d,useSudoMode:p,cellTarget:m}=e;return n().Z.withListenerIgnored((()=>{const n=ke({environment:o,userId:i,userAction:t,cellTarget:m});let f;p&&(n.useSudoMode=!0);try{f=r(n),d||function(e){if(e.isLocal)return;for(const t of e.stores){const o=t.inMemoryRecordCache.checkRecordForTemporaryData(t);if(o)throw new(u().p8)(`Transaction "${e.getUserActionForAnalyticsPurposesOnly()}" is manipulating a store with temporary local changes from an in-memory record cache named "${o.name}"!`)}}(n);for(const e of n.postPerformAssertions)e()}catch(g){throw Ae(n),Fe({transaction:n,type:"createAndCommit",error:g}),g}finally{0}if(l&&(0,j().jQ)(n))return Ae(n),Ue({...e,perform:l,transactionTooBigFallback:void 0,userAction:`${t} transactionTooBigFallback`});return{performResult:f,serverCommitResult:Be({environment:o,transaction:n,canUndo:a,undoCheckpoint:s,skipUpdatingEditedMetadata:c}).catch((e=>{throw Fe({transaction:n,type:"commit",error:e}),e}))}}))}function Fe(e){const{transaction:t,type:o,error:n}=e,i=t.getUserActionForAnalyticsPurposesOnly(),r=t.getUserFlowForAnalyticsPurposesOnly(),s=t.getOperationForAnalyticsPurposesOnly(),l=t.getDebugTagsForAnalyticsPurposesOnly(),c=l&&function(e){const t={};return e.forEach((e=>t[e]=!0)),t}(l),d=T().IE(n,{tags:{userAction:i,userFlow:r,operation:s,...c}});a().log({level:"error",from:"transactionActions",type:o,error:(0,A().Ui)(n),data:{userAction:i,userFlow:r,debugTags:l,spaceId:t.spaceId,transactionId:t.id,miscDataToConvertToString:{transactionDebugLog:t.getDebugLog()}},sentryEventId:d}),E().default.isLocalhost&&(console.group(`A ${i} transaction threw an exception.`),console.error(n),console.log(t),F().Z.provider||console.log("Consider using __console.toggleTransactionDebugging() and re-running this transaction for better logging."),console.groupEnd())}async function Ne(e){const{environment:t,perform:o,waitForServerCommit:n,userAction:i,userId:r,canUndo:s,undoCheckpoint:l,skipUpdatingEditedMetadata:c,useSudoMode:d}=e,u=ke({environment:t,userId:r,userAction:i});let p;d&&(u.useSudoMode=!0);try{p=await o(u);for(const e of u.postPerformAssertions)e()}catch(f){u.cancelDeadlockWarning();const t=u.getUserActionForAnalyticsPurposesOnly(),o=u.getOperationForAnalyticsPurposesOnly();ve.delete(u);const n=u.operations.length>0;throw n&&ae().kY(e.environment,{user_action:t,operation_count:u.operations.length}),T().IE(f,{tags:{userAction:t,operation:o,transactionOperationCount:u.operations.length}}),a().log({level:"error",from:"transactionActions",type:"createAndCommitAsync",error:(0,A().Ui)(f),data:{message:n?`POSSIBLE DATA LOSS: asynchronous transaction had ${u.operations.length} operations`:void 0,userAction:t}}),f}const m=Be({environment:t,transaction:u,canUndo:s,undoCheckpoint:l,skipUpdatingEditedMetadata:c});return n&&await m,{performResult:p,serverCommitResult:m}}},28063:(e,t,o)=>{o.d(t,{vs:()=>k,bh:()=>I});o(267602),o(241792),o(228244);var n=()=>o(156642),i=()=>o(933868),r=()=>o(396136),a=()=>o(955620),s=()=>o(513670),l=()=>o(465371),c=()=>o(262453),d=()=>o(807230),u=()=>o(33150),p=()=>o(282662),m=()=>o(784234),f=()=>o(771678),g=()=>o(636340),v=()=>o(94912),h=(o(653476),()=>o(339523)),_=()=>o(960562),b=()=>o(421654),y=()=>o(576828);function S(e,t){const{store:o,transaction:n,disableAutoChildrenMove:i}=e;return i||function(e){const{environment:t,store:o,transaction:n}=e,i=(0,h().sQ)(o),r=(null==i?void 0:i.getContentStores())||[];let a=!1;const s=r.filter((e=>{return a?(t=e.getType(),n=o.getType(),!(!t||!n||t===n||"divider"===t||"collection_view"===t||"sub_header"===n&&"header"===t||"sub_sub_header"===n&&("header"===t||"sub_header"===t))||(a=!1,!1)):(e===o&&(a=!0),!1);var t,n}));y().LQ({environment:t,targetParentStore:o.getContentStore(),droppedDirection:_().v.Below,droppedStores:s,duplicate:!1,transaction:n})}(e),b().FH({stores:[o],update:{toggleable:t},transaction:n})}var w=()=>o(269299);function k(e){const{environment:t,block:o,blockType:r,transaction:c,isMultiBlockTransformation:h}=e,_=o.getType(),b=o.getFormat(),y=o.recordStoreUIParentStore;if((0,d().ww)(t)&&_&&!function(e,t){const o=e.type,i=e.format;if(l().ih(t)){var r;return"mermaid_code_block"===t?e.type===n().Ti.code&&"Mermaid"===a().QaF(null===(r=e.properties)||void 0===r?void 0:r.language):(0,n().Fx)(t)?l().tZ(t)===e.type&&(0,n().eJ)(o,i):l().tZ(t)===e.type}return e.type===t&&!(0,n().eJ)(o,i)}({type:_,format:b,properties:o.getProperties()},r)){const e=_,a=l().ih(r)?l().tZ(r):r;if(g().sW({store:o,data:{type:a},transaction:c}),(0,n().Fx)(r)&&!l().fn(o)?function(e){S(e,!0)}({environment:t,store:o,transaction:c,disableAutoChildrenMove:Boolean(h)}):!(0,n().Fx)(r)&&l().fn(o)&&function(e){const{store:t}=e;t.recordStoreUIParentStore&&S(e,!1)}({environment:t,store:o,transaction:c,disableAutoChildrenMove:Boolean(h)}),"mermaid_code_block"===r&&u().E5({blocks:[o],language:"Mermaid",transaction:c}),n().Z7[e]&&!n().Z7[r]){o.getPermissionItems().some(i().Le)&&m().MX({environment:t,store:o,transaction:c})}l().BX(o)&&v().rd({blockId:o.id,state:!0,currentUserId:t.currentUser.id});const d=o.getType();d&&y&&_&&(0,n().Um)(_,b)&&!(0,n().Um)(d,o.getFormat())&&function(e){let{environment:t,block:o,parentStore:n}=e;const i=async()=>{const e=o.getContentStores();await Promise.all(e.map((e=>e.load()))),w().createAndCommit({userAction:"transformActions.runAsync",environment:t,canUndo:!0,perform:t=>{const i=s().d9(e).reverse();for(const e of i)p().Od({parentStore:o.getContentStore(),childToRemoveStore:e,transaction:t}),p().BE({parentStore:n,insertStore:e,afterStore:o,transaction:t})}})};i()}({environment:t,parentStore:y,block:o}),f().jf({store:o,transaction:c})}return o}function I(e,t){const o=t.getFormat().alias_pointer;if(!o||o.table!==r().iU)return;const n=t.recordStoreUIParentStore;null!=n&&n.valueIs(c().i)&&w().createAndCommit({userAction:"transformActions.transformAliasBlockIntoPageMention",environment:e,canUndo:!0,perform:i=>{const r=(0,a().YCD)((0,a().$0A)(o.id,o.spaceId)),s=g().j4({environment:e,type:"text",properties:{title:[r]},inMemoryRecordCache:e.defaultRecordCache.inMemoryRecordCache,transaction:i});p().BE({parentStore:n,insertStore:s,afterStore:t,transaction:i}),p().Od({parentStore:n,childToRemoveStore:t,transaction:i})}})}},663366:(e,t,o)=>{o.d(t,{DV:()=>A,Fy:()=>F,Rn:()=>B,Tq:()=>E,Ts:()=>V,Yk:()=>D,gW:()=>U,y8:()=>R});o(670560),o(241792);var n=()=>o(506347),i=()=>o(18902),r=()=>o(431595),a=()=>o(396136),s=()=>o(81954),l=()=>o(429892),c=()=>o(122792),d=()=>o(47443),u=()=>o(594546),p=()=>o(527278),m=()=>o(322539),f=()=>o(793935),g=()=>o(84922),v=()=>o(658096),h=()=>o(876822),_=()=>o(584989),b=()=>o(824462),y=()=>o(308186),S=()=>o(332542),w=()=>o(401411),k=()=>o(497065),I=()=>o(102182),C=()=>o(369637),x=()=>o(269299),T=()=>o(348141),M=()=>o(221662);const P=(0,o(788860).vU)({deletePageConfirmationMessage:{id:"trashActions.deletePagePermanentlyDialog.prompt",defaultMessage:"Are you sure you want to delete this page from Trash?"},deletePageConfirmationButton:{id:"trashActions.deletePagePermanentlyDialog.confirmDeleteButton.label",defaultMessage:"Delete page"},permanentlyDeleteFailedToast:{id:"trashActions.deletePagePermanentlyDialog.actionFailed.toast",defaultMessage:"Failed to delete, please try again later."},permanentlyDeletePermissionsFailure:{id:"trashActions.deletePagePermanentlyDialog.actionFailed.permissions",defaultMessage:"You do not have sufficient permissions to delete this page from Trash."},purgePageConfirmationMessage:{id:"trashActions.purgePageDialog.message",defaultMessage:"Are you sure you want to permanently delete this page?"},purgePageConfirmationDescription:{id:"trashActions.purgePageDialog.description",defaultMessage:"You won't be able to view or restore it."},purgePageConfirmationButton:{id:"trashActions.purgePageDialog.confirm",defaultMessage:"Permanently delete"},purgeFailedToast:{id:"trashActions.purgePageDialog.actionedFailed",defaultMessage:"Failed to permanently delete, please try again later."},restorationFailedToast:{id:"trashActions.restoreDeletedFromTrashPage.actionFailed.toast",defaultMessage:"Failed to restore page, please try again later."},trashDeletionToast:{defaultMessage:"Starting September 19th, pages in Trash will be automatically deleted after {duration}",id:"trashDeletionToast.body"}});async function A(e){const{environment:t,block:o,spaceId:i,from:r,restoreWithoutNavigation:s}=e;g().default.state.excludePages.add(o.id),g().default.emit(),await b().callApi({eventName:"restoreBlock",environment:t,data:{pointer:{table:a().iU,id:o.id,spaceId:i}}});const l=await w().Jv({environment:t,request:{type:"block-space",blockId:o.id,spaceId:i},ignoreLocalResult:!0});v().default.setState({publicPageData:l}),u().K4(t,"restore_trash_page",{from:r}),Boolean(s)||(d()._c({environment:t,store:o,pageVisitSource:n().tY.Restore}),t.device.isMobile&&f().close())}function R(e){const{environment:t,blocks:o,transaction:n,permanentlyDelete:i=!1}=e;for(const r of o)S().zo({blockStore:r,transaction:n});n.postSubmitCallbacks.push((async e=>{e||await b().callApi({eventName:"deleteBlocks",environment:t,data:{blocks:o.map((e=>({id:e.id,spaceId:(0,s().J)(e.pointer.spaceId)}))),permanentlyDelete:i}})}))}function B(e){const{environment:t,handleSuccess:o,blocks:n}=e;u().K4(t,"open_delete_trash_page_modal"),y().vC({message:p().Z.formatMessage(P.deletePageConfirmationMessage),showCancel:!0,keepFocus:!1,items:[{label:p().Z.formatMessage(P.deletePageConfirmationButton),color:"red",onAccept:async()=>{await E(e),null==o||o(n)}}],handleCancel:()=>{u().K4(t,"cancel_delete_trash_page")}})}async function E(e){const{blocks:t,environment:o,from:n}=e,{currentSpaceStore:i}=h().default.state,a=e.environment.currentUser.id;if(i&&a){await b().deleteBlocks(e.environment,{blocks:t.map((e=>({id:e.id,spaceId:(0,s().J)(e.pointer.spaceId)}))),permanentlyDelete:!0}).then((e=>{if("failed"===e.type)throw function(e){let t=P.permanentlyDeleteFailedToast;(0,r().QW)(e)&&(t=P.permanentlyDeletePermissionsFailure);I().oV({label:p().Z.formatMessage(t),durationMs:_().JY})}(e.body),e.error})),u().K4(o,"delete_trash_page",{from:n});for(const e of t)g().default.state.excludePages.add(e.id),g().default.emit();await M().l({environment:o,spaceId:i.id,userId:a}),k().CZ({environment:e.environment,blocks:t})}}function D(e){const{blockStore:t,handleSuccess:o,environment:n}=e;y().vC({message:p().Z.formatMessage(P.purgePageConfirmationMessage),description:p().Z.formatMessage(P.purgePageConfirmationDescription),showCancel:!0,keepFocus:!1,items:[{label:p().Z.formatMessage(P.purgePageConfirmationButton),color:"red",onAccept:async()=>{await b().callApi({eventName:"purgeBlockTree",environment:n,data:{pointer:t.pointer}}).then((e=>{if("failed"===e.type)throw function(){const e=P.purgeFailedToast;I().oV({label:p().Z.formatMessage(e),durationMs:_().JY})}(),e.error;null==o||o(t.id)}))}}],handleCancel:()=>{}})}async function U(e){"failed"!==(await b().restoreBlock(e.environment,{pointer:{id:e.blockStore.id,table:a().iU,spaceId:e.spaceId},deletedFromTrashRestorationOption:"restore_to_private"})).type?(u().K4(e.environment,"restore_trash_page",{from:e.from,destination:"private_pages"}),e.navigateToPage&&d()._c({environment:e.environment,store:e.blockStore,pageVisitSource:n().tY.Restore})):N()}async function F(e){"failed"!==(await b().restoreBlock(e.environment,{pointer:{id:e.blockStore.id,table:a().iU,spaceId:e.spaceId},deletedFromTrashRestorationOption:"restore_original_access"})).type?u().K4(e.environment,"restore_trash_page",{from:e.from,destination:"original_location"}):N()}function N(){const e=P.restorationFailedToast;I().oV({label:p().Z.formatMessage(e),durationMs:_().JY})}function V(e){var t;let{experimentStore:o,currentSpaceStore:n,currentUserSettingsStore:r,intl:a,environment:s}=e;const d=new Date>=new Date("2024-09-19"),f=!(0,c().wP)(n.getSubscriptionTier()),g=null===(t=r.getSettings())||void 0===t?void 0:t.seen_trash_autodeletion_announcement,v=s.device.isMobile;if(!d&&f&&!g&&!v){const e=()=>{(0,u().j)({environment:s,event:{eventName:"trash_deletion_toast",eventProperties:{actionType:"dismissed",subscriptionTier:n.getSubscriptionTier()}}}),x().createAndCommit({userAction:"TrashDeletionToast.handleDismiss",environment:s,canUndo:!0,perform:e=>{T().d2({transaction:e,userSettingsStore:r,data:{seen_trash_autodeletion_announcement:!0}})}})},t=function(e){const{deleteFromTrashDelaySeconds:t,intl:o,onDismiss:n}=e;return{presentationType:"transient",id:"trash_deletion_toast",icon:m().N,message:p().Z.formatMessage(P.trashDeletionToast,{duration:(0,l().uP)(t,o)}),onDismiss:n}}({deleteFromTrashDelaySeconds:(0,i().Tv)(null==n?void 0:n.getModel())/1e3,intl:a,environment:s,onDismiss:e});(0,u().j)({environment:s,event:{eventName:"trash_deletion_toast",eventProperties:{actionType:"viewed",subscriptionTier:n.getSubscriptionTier()}}}),C().m2(t)}}},315917:(e,t,o)=>{o.r(t),o.d(t,{dismissTutorial:()=>d,resetTutorials:()=>u,tutorialAdvanceToStep:()=>p,tutorialAdvanceToStepAfter:()=>m,tutorialGoToNextStep:()=>l,tutorialGoToPrevStep:()=>c});var n=()=>o(19435),i=()=>o(269299),r=()=>o(348141),a=()=>o(731322),s=()=>o(876822);function l(e,t){var o;const{currentUserSettingsStore:n}=s().default.state;if(!n)return;const i=null===(o=n.getSettings())||void 0===o?void 0:o.tutorials;f({userAction:"TutorialActions.nextStep",environment:e,perform:e=>{r().d2({userSettingsStore:n,transaction:e,data:{tutorials:{...i,[t]:(0,a().ox)(n,t)}}})},userId:n.id})}function c(e,t){var o;const{currentUserSettingsStore:n}=s().default.state;if(!n)return;const i=null===(o=n.getSettings())||void 0===o?void 0:o.tutorials;f({userAction:"TutorialActions.prevStep",environment:e,perform:e=>{r().d2({userSettingsStore:n,transaction:e,data:{tutorials:{...i,[t]:(0,a().IJ)(n,t)}}})},userId:n.id})}function d(e,t){var o;const{currentUserSettingsStore:i}=s().default.state;if(!i)return;const a=null===(o=i.getSettings())||void 0===o?void 0:o.tutorials;f({userAction:"TutorialActions.dismissTutorial",environment:e,perform:e=>{r().d2({userSettingsStore:i,transaction:e,data:{tutorials:{...a,[t]:n().lR}}})},userId:i.id})}function u(e){const{currentUserSettingsStore:t}=s().default.state;t&&f({userAction:"TutorialActions.resetTutorialsDebug",environment:e,perform:e=>{r().d2({userSettingsStore:t,transaction:e,data:{tutorials:{}}})},userId:t.id})}function p(e,t,o){var i;const{currentUserSettingsStore:l}=s().default.state;if(!l||(0,a().W$)(l,t))return;const c=(0,a().wF)(l,t);n().eU[t].steps.findIndex((e=>e.id===c))>=n().eU[t].steps.findIndex((e=>e.id===o))||r().d2({userSettingsStore:l,transaction:e,data:{tutorials:{...null===(i=l.getSettings())||void 0===i?void 0:i.tutorials,[t]:o}}})}function m(e,t,o){if((0,a().AK)(o))return;const n=(0,a().Xv)(t,o);n&&p(e,t,n)}function f(e){return i().createAndCommit({...e,canUndo:!1})}},423402:(e,t,o)=>{o.d(t,{KT:()=>Oe,FD:()=>Ke,xv:()=>Ze,jh:()=>$e,pt:()=>Fe,os:()=>et,dY:()=>Ge,pJ:()=>Le,hJ:()=>je,LE:()=>at,UY:()=>qe,yp:()=>He,sz:()=>nt,aV:()=>it,qK:()=>rt});o(821057),o(670560),o(267602),o(653476),o(470928),o(749411),o(30005),o(241792);var n=()=>o(66077),i=()=>o(492788),r=()=>o(156642),a=()=>o(15607),s=()=>o(226413),l=()=>o(43165),c=()=>o(455530),d=()=>o(235484),u=()=>o(249324),p=()=>o(799891),m=()=>o(565271),f=()=>o(530980),g=()=>o(741633),v=()=>o(217465),h=()=>o(396136),_=()=>o(696056),b=()=>o(752778),y=()=>o(139978),S=()=>o(525807),w=()=>o(832438),k=()=>o(85073),I=()=>o(81954),C=()=>o(657120),x=()=>o(955620),T=()=>o(830968),M=()=>o(349220),P=()=>o(513670),A=()=>o(839002),R=()=>o(696459),B=()=>o(916673),E=()=>o(326966),D=()=>o(544607),U=()=>o(282662),F=()=>o(636340),N=()=>o(879952),V=()=>o(970105),L=()=>o(990966),O=()=>o(269299),Z=()=>o(223321),j=()=>o(594546),K=()=>o(718959),z=()=>o(347960);var H=()=>o(286338),q=()=>o(763266),W=()=>o(417746),G=()=>o(667009),$=()=>o(487270),Q=()=>o(527278),Y=()=>o(239482),J=()=>o(852465),X=()=>o(339523),ee=()=>o(505462),te=()=>o(591914),oe=()=>o(620218),ne=()=>o(472753),ie=()=>o(876822),re=()=>o(749826),ae=()=>o(138912),se=()=>o(688789),le=()=>o(862059),ce=()=>o(308939),de=()=>o(543842),ue=()=>o(826955),pe=()=>o(838266),me=()=>o(56424),fe=()=>o(658735),ge=()=>o(643669),ve=()=>o(807230),he=()=>o(286310),_e=()=>o(824462),be=()=>o(146630),ye=()=>o(959137),Se=()=>o(139224),we=()=>o(308186),ke=()=>o(388915),Ie=()=>o(887274),Ce=()=>o(762478),xe=()=>o(332542),Te=()=>o(143346),Me=()=>o(643261),Pe=()=>o(102182);const Ae=!1;const Re=[d().Aw];function Be(e,t){var o;const n=Boolean(e&&Re.includes(e.id));return{hasServerDeterminedOptionTypes:n,canUnfurlAsCollection:Boolean(!n&&(null==t||null===(o=t.additional_types)||void 0===o?void 0:o.collection)),canUnfurlAsImport:Boolean(e&&Ee(e,t))}}function Ee(e,t){switch(e.id){case d().Aw:return!0;case d().f3:return t&&"google_docs"===t.name;case d().aW:return t&&"Report"===t.name;default:return!1}}const De=(0,o(788860).vU)({browse:{id:"externalBlock.mediaPicker.browseTab.title",defaultMessage:"Browse {appName}"},somethingWentWrong:{defaultMessage:"Something went wrong.",id:"externalActions.dialogError.openFilePicker.errorMessage"},copyDebuggingInformation:{id:"externalActions.dialogItem.openFilePicker.copyDebugData",defaultMessage:"Copy debugging information"},copiedDebuggingInfo:{id:"externalActions.dialogError.copiedDebuggingInfo",defaultMessage:"Copied to clipboard."},userReAuth:{id:"externalActions.dialogError.userReAuth",defaultMessage:"Authentication Expired. Please Re-Authenticate to continue."}});let Ue=!1;async function Fe(e){const{environment:t,spaceId:o,force:n}=e;await ie().default.waitUntilRendered();const i=ae().default.state,r=t.currentUser.id;if(!i.loaded&&!i.loading||i.loaded&&o!==i.spaceId||i.loaded&&r!==i.userId||n){const e=!Ue;e&&(Ue=!0,oe().default.DO_NOT_USE_measureFromPageOriginLegacy("external_integration_store.page_origin_to_loading",{environment:t})),ae().default.setState({...ae().default.state,loading:!0});const[n,i]=await Promise.all([Ne({environment:t,spaceId:o}),Ve({environment:t,spaceId:o})]);if("success"!==n.type||"success"!==i.type)throw new Error("Request failed.");const r=v().RecordMapWithRole.create(n.data.recordMap),a=v().RecordMapWithRole.create(i.data.recordMap);ae().default.setState({loaded:!0,loading:!1,spaceId:o,userId:t.currentUser.id,integrations:P().MR(P().oA(n.data.integrationIds.map((e=>r.getValue({table:k().K2,id:e})))),(e=>{let{created_at:t}=e;return t})),externalAuthentications:P().MR(P().oA(i.data.externalAuthenticationIds.map((e=>a.getValue({table:S().PJ,id:e})))),(e=>{let{created_at:t}=e;return t})),bots:P().Xo(P().oA(i.data.botIds.map((e=>a.getValue({table:_().cZ,id:e})))),(e=>{let{last_edited_at:t,created_at:o}=e;return t||o}),"desc"),completeSlackAuthentications:P().MR(P().oA(i.data.completeSlackAuthenticationIds.map((e=>a.getValue({table:S().PJ,id:e})))),(e=>{let{created_at:t}=e;return t})),twoWaySyncExternalEntities:P().MR(P().oA(i.data.externalEntityIds.map((e=>a.getModel({table:w().a,id:e})))),(e=>{let{created_at:t}=e;return t}))}),e&&(Ue=!0,oe().default.DO_NOT_USE_measureFromPageOriginLegacy("external_integration_store.page_origin_to_ready",{environment:t}))}}async function Ne(e){const{environment:t,spaceId:o}=e,n=oe().default.DO_NOT_USE_markLegacy("external_integration_store.get_external_integrations"),i=await _e().callApi({eventName:"getExternalIntegrations",environment:t,data:{spaceId:o}});return"success"===i.type&&oe().default.DO_NOT_USE_measureLegacy(n,{environment:t}),i}async function Ve(e){const{environment:t,spaceId:o}=e;if(!t.currentUser.isLoggedIn())return{type:"success",status:200,headers:{},data:{botIds:[],externalAuthenticationIds:[],recordMap:{},completeSlackAuthenticationIds:[],externalEntityIds:[]}};const n=oe().default.DO_NOT_USE_markLegacy("external_integration_store.get_user_space_external_bots"),i=await _e().getUserSpaceExternalBots({environment:t,data:{spaceId:o},headers:(0,g().Bb)({spaceId:o})});return"success"===i.type&&oe().default.DO_NOT_USE_measureLegacy(n,{environment:t}),i}async function Le(e){const{environment:t}=e,{currentSpaceStore:o}=ie().default.state;o&&await Fe({environment:t,spaceId:o.id,force:!0})}function Oe(e){var t;const{environment:o,blockStore:a,textStore:s,url:l,textValueBeforePaste:u,urlSelection:m}=e,f=ee().get();if(!a||Z().Z.state.open||de().Z.state.open||fe().Z.state.open||!f)return!1;const{currentSpaceStore:g}=ie().default.state,v=(0,c().x$)(l),_=(0,B().Qc)(v);if(!_.host)return!1;const S=o.currentUser.id;if(null==g||!g.isDefined()||!S)return!1;const w=ae().default.integrations.state.filter((e=>e.id!==d().U9)),k=(0,T().ny)({url:v,integrations:w,currentSpaceId:g.id});if("partial"===k.type)return function(e){const{environment:t,parsedUrl:o,urlDomain:n,integrationId:i}=e;he().pp(t,{integrationId:i,urlDomain:n}),p().log({level:"debug",from:"activateFromLinkCreation",type:"linkPreviewUrlMiss",data:{miscDataToConvertToString:{integrationId:i,urlDomain:n,path:o.path}}})}({...k,integrationId:k.integration.id,environment:o}),!1;if("failure"===k.type)return!1;const{integration:M,pattern:A}=k;if(!(0,te().VK)(g,S).isWorkspaceOwner()&&!(0,C().hU)({spaceBotSettings:g.getBotSettingsStore().getValue(),integrationId:M.id,env:"production"}))return!1;const R=(0,q().NP)(M.id),E=function(e){const{integration:t,pattern:o,blockStore:n,textValueBeforePaste:i}=e,a=n&&n.getType()===r().Ti.text&&0===(0,x().QaF)(i).trim().length,{hasServerDeterminedOptionTypes:s,canUnfurlAsCollection:l,canUnfurlAsImport:c}=Be(t,o);if(t){if(a){const e=re().default.getConfigKey("link_paste_order",(null==t?void 0:t.id)||"defaultOrder");return e?(l&&(e.order.includes("collection")||e.order.splice(e.order.length-1,0,"collection")),c&&(e.order.includes("import")||e.order.push("import")),P().oA(e.order)):P().oA(["preview","mention","link",(s||l)&&"collection",c&&"import"])}return P().oA(["mention","preview","link",(s||l)&&"collection",c&&"import"])}return a?P().oA(["preview","mention","link",(s||l)&&"collection",c&&"import"]):P().oA(["mention","preview","link",(s||l)&&"collection",c&&"import"])}({blockStore:a,integration:M,pattern:A,textValueBeforePaste:u}),D=ee().getRect(f);if(!D)return!1;const U=a.getRecordStoreUIParent();if(!U||!(0,J().dz)(U))return!1;const F=new(n().Z)({name:"unfurlingActions.activateFromLinkCreation",isTemporaryData:!0});o.defaultRecordCache.inMemoryRecordCache.addCacheOverride(F);const N=U.clone(F),V=a.clone(F),L=s.table===h().iU&&s===(null===(t=(0,X().sQ)(s))||void 0===t?void 0:t.getBlockTitleStore())?V.getBlockTitleStore():s.clone(F),j=(0,I().J)(a.pointer.spaceId),K=(0,$().$x)({environment:o,table:h().iU,spaceId:j}),z=new(ue().G)(o,K),H=z.clone(F),W=P().w6(T().wh).map((()=>new(ue().G)(o,{table:h().iU,id:(0,$().TS)({environment:o,table:h().iU,spaceId:j}),spaceId:j}))),G=W.map((e=>e.clone(F))),Y=new(ue().NW)(o,(0,$().$x)({environment:o,table:b().vF,spaceId:j})),oe=Y.clone(F);let ne;ne=A.defaultViews?A.defaultViews.map((e=>new(ue().Xr)(o,(0,$().$x)({environment:o,table:y().np,spaceId:j})))):[new(ue().Xr)(o,(0,$().$x)({environment:o,table:y().np,spaceId:j}))];const se=ne.map((e=>e.clone(F))),le=P().w6(T().wh).map((()=>new(ue().NW)(o,(0,$().$x)({environment:o,table:b().vF,spaceId:j})))),ce=le.map((e=>e.clone(F))),pe=P().w6(T().wh).map((()=>new(ue().Xr)(o,(0,$().$x)({environment:o,table:y().np,spaceId:j})))),me=pe.map((e=>e.clone(F)));let ge;return fe().Z.setState({open:!0,url:v,textValueBeforePaste:u,textValueAfterPaste:s.getValue(),urlSelection:m,renderRect:D,integration:M,pattern:A,currentOption:{type:"link"},allOptionTypes:E,temporaryRecordCache:F,stores:{blockStore:a,blockParentStore:U,textStore:s,externalObjectInstanceBlockStore:z,subExternalObjectInstanceBlockStores:W,externalCollectionStore:Y,externalCollectionViewStores:ne,subExternalCollectionStores:le,subExternalCollectionViewStores:pe},temporaryStores:{blockParentStore:N,blockStore:V,textStore:L,externalObjectInstanceBlockStore:H,subExternalObjectInstanceBlockStores:G,externalCollectionStore:oe,externalCollectionViewStores:se,subExternalCollectionStores:ce,subExternalCollectionViewStores:me},unfurlResponse:void 0}),R.length>0&&ze({environment:o,url:l,botIds:R.map((e=>{let{id:t}=e;return t})),integrationId:M.id,externalObjectInstanceBlockStore:z}),he()._x(o,{integrationId:M.id,entity:A.name,domain:_.host,from:"link_paste"}),ge="import"===E[0]?"link":E[0],i().default.afterNextFlush((()=>{const e="drive"!==ge;O().createAndCommit({userAction:"unfurlingActions.activateFromLinkCreation",environment:o,canUndo:!e,perform:t=>{je({environment:o,type:ge,useTemporaryRecordCache:e,transaction:t,intl:Q().Z.getIntl()})}})})),!0}function Ze(e){const{environment:t,setType:o,transaction:n}=e,{currentUserSettingsStore:i}=ie().default.state,r=K().qQ(t),a=fe().Z.state;if(!a.open)return;t.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(a.temporaryRecordCache);const s=(0,q().NP)(a.integration.id).length>0;if(je({environment:t,type:o||a.currentOption.type,useTemporaryRecordCache:!1,transaction:n,intl:Q().Z.getIntl()}),"preview"===a.currentOption.type)N().Z5({environment:t,stores:[a.currentOption.externalObjectInstanceBlockStore]});else if("drive"===a.currentOption.type){var l,d,u,p,m;const e=B().Qc(a.url,{slashesDenoteHost:!0});let o=e.href;if(null!==(l=e.hostname)&&void 0!==l&&l.includes("docs.google.com")&&(null!==(d=e.pathname)&&void 0!==d&&d.includes("presentation")||null!==(u=e.pathname)&&void 0!==u&&u.includes("document")||null!==(p=e.pathname)&&void 0!==p&&p.includes("spreadsheets"))&&null!==(m=e.pathname)&&void 0!==m&&m.includes("/edit")){const t=e.pathname.replace("/edit","/preview");o=B().bf({url:`https://${e.hostname}${t}`,query:{...e.query},hash:e.hash||void 0})}else o=(0,c().x$)(o);D().I(t,{source:o,isDataURL:!1,store:a.stores.blockStore,pageWidth:r,preferredType:"drive"})}if(a.integration&&!s){(null==i?void 0:i.hasDismissedIntegrationPopup({integrationId:a.integration.id}))||me().Z.setState({open:!0,integration:a.integration,externalObjectInstanceBlockId:a.stores.externalObjectInstanceBlockStore.id,unfurlUrl:a.url})}fe().Z.setState({open:!1})}function je(e){const{environment:t,type:o,transaction:n,useTemporaryRecordCache:a}=e,s=fe().Z.state;if(!s.open)return;const l=t.currentUser.id;if(!l)return;const d=a?s.temporaryStores:s.stores;if(a){s.temporaryRecordCache.clearCache();for(const e in s.temporaryStores){const o=s.temporaryStores[e],n=Array.isArray(o)?o:[o];for(const e of n){const o={userId:l,pointer:e.pointer},n=t.defaultRecordCache.inMemoryRecordCache.getRecord(o);n?Te().Wl({environment:t,inMemoryRecordCache:s.temporaryRecordCache,pointer:e.pointer,model:f().kk5.fromValue(e.pointer.table,n.value),role:n.role,updatePaths:[[]],userId:l,force:!0,debugSource:"setUnfurlingOptionType"}):Te().uo({environment:t,inMemoryRecordCache:s.temporaryRecordCache,persistedRecordCache:void 0,pointer:e.pointer,userId:l})}}}const p=(0,c().x$)(s.url),{host:m}=(0,B().Qc)(p);if(m){if("preview"===o||"mention"===o){const e={original_url:p,domain:m};let o;const{unfurlResponse:i}=s;if(i){const a=(0,E().m8)(P().oA(i.relations.map(((e,o)=>{if(e.external_schema)return;const i=d.subExternalObjectInstanceBlockStores[o];return i?((0,M().T)(!i.isDefined(),"Sub external object instance store should not have a value before creation"),F().j4({environment:t,id:i.id,type:r().Ti.externalObjectInstance,spaceId:(0,I().J)(d.blockStore.pointer.spaceId),format:e,inMemoryRecordCache:i.inMemoryRecordCache,transaction:n}),F().sW({store:i,data:{parent_table:h().iU,parent_id:d.externalObjectInstanceBlockStore.id,alive:!0},transaction:n}),[e.uri,i.id]):void 0})))),{external_object_id:s,uri:l,bot_id:c}=i.root;if(s&&l&&c){let t,n;const r=(0,u().o)(i.root.attributes,(0,W().o$)());r&&(t=r.block_width,n=r.block_height),o={...e,...{...i.root,block_width:t,block_height:n,external_schema:void 0},related_external_object_uris_to_instance_ids:a,external_object_id:s,uri:l,bot_id:c}}else{var g;o={...e,attributes:i.root.attributes,error:i.root.error,auth_refresh_in_progress:439===(null===(g=i.root.error)||void 0===g?void 0:g.status_code)||null}}}else o=e;(0,H().WP)()||(0,M().T)(!d.externalObjectInstanceBlockStore.isDefined(),"Preview/mention menu external object instance store should not have a value before creation"),F().j4({environment:t,id:d.externalObjectInstanceBlockStore.id,type:r().Ti.externalObjectInstance,format:o,inMemoryRecordCache:d.externalObjectInstanceBlockStore.inMemoryRecordCache,transaction:n})}else if("collection"===o){const{unfurlResponse:e}=s;let o=d.externalCollectionStore.pointer;const a=d.externalCollectionViewStores.map(((e,t)=>{var o,n,i;return{id:e.id,version:0,space_id:(0,I().J)(d.blockStore.pointer.spaceId),type:(null===(o=s.pattern.defaultViews)||void 0===o?void 0:o[t].type)||"table",format:null===(n=s.pattern.defaultViews)||void 0===n?void 0:n[t].format,query2:null===(i=s.pattern.defaultViews)||void 0===i?void 0:i[t].query2,parent_table:h().iU,parent_id:d.externalObjectInstanceBlockStore.id,alive:!0}}));let l;if(e){const{external_object_id:t,uri:i,bot_id:r}=e.root;if(t&&i&&r)if("collectionId"in e&&e.collectionId){l={id:e.collectionId,version:0,space_id:(0,I().J)(d.blockStore.pointer.spaceId),parent_table:h().iU,parent_id:d.externalObjectInstanceBlockStore.id,alive:!0,schema:{}},o={id:e.collectionId,table:b().vF,spaceId:(0,I().J)(d.blockStore.pointer.spaceId)}}else{const t={};e.relations.forEach(((e,o)=>{const i=d.subExternalCollectionStores[o],r=e,a={id:i.id,version:0,space_id:(0,I().J)(d.blockStore.pointer.spaceId),parent_table:b().vF,parent_id:d.externalCollectionStore.id,alive:!0,format:r,schema:{}};t[e.uri]=i.id,F().sW({store:i,data:a,transaction:n})}));l={id:d.externalCollectionStore.id,version:0,space_id:(0,I().J)(d.blockStore.pointer.spaceId),parent_table:h().iU,parent_id:d.externalObjectInstanceBlockStore.id,alive:!0,format:{original_url:p,domain:m,...e.root,related_external_object_uris_to_instance_ids:{...t}},schema:{}}}else{l={id:d.externalCollectionStore.id,version:0,space_id:(0,I().J)(d.blockStore.pointer.spaceId),parent_table:h().iU,parent_id:d.externalObjectInstanceBlockStore.id,alive:!0,format:{original_url:p,domain:m,error:e.root.error},schema:{}}}}else{l={id:d.externalCollectionStore.id,version:0,space_id:(0,I().J)(d.blockStore.pointer.spaceId),parent_table:h().iU,parent_id:d.externalObjectInstanceBlockStore.id,alive:!0,format:{original_url:p,domain:m},schema:{}}}(0,M().T)(!d.externalObjectInstanceBlockStore.isDefined(),"Collection menu external object instance store should not have a value before creation");const c=F().j4({environment:t,id:d.externalObjectInstanceBlockStore.id,type:r().Ti.collectionView,format:{collection_pointer:o},spaceId:(0,I().J)(d.blockStore.pointer.spaceId),inMemoryRecordCache:d.externalObjectInstanceBlockStore.inMemoryRecordCache,transaction:n});F().sW({store:c,data:{collection_id:o.id,parent_table:h().iU,parent_id:d.blockParentStore.id,alive:!0,view_ids:d.externalCollectionViewStores.map((e=>e.id))},transaction:n});const u=Xe();d.externalCollectionViewStores.forEach(((t,o)=>{e&&"collectionId"in e&&e.collectionId&&a[o].format&&(a[o].format={collection_pointer:{id:e.collectionId,table:b().vF}}),u&&e&&"table"===a[o].type&&(a[o].format={...a[o].format,table_properties:ot(e.root.external_schema)}),F().sW({store:t,data:a[o],transaction:n})})),F().sW({store:d.externalCollectionStore,data:l,transaction:n});const f=s.integration;i().default.afterNextFlush((()=>{const e=ne().R.findCollectionViewBlockFromId(d.externalObjectInstanceBlockStore.id);if(e&&"collectionContextStore"in e){const t=e.collectionContextStore.settingsStore;Se().wl({collectionSettingsStore:t,item:{type:"shareSyncedView",integrationName:f.name,integrationIcon:f.info.icon}})}}))}if("preview"===o){V().sO({environment:t,store:d.textStore,value:s.textValueBeforePaste,transaction:n});const e=ue().G.createChildStore(d.blockParentStore,d.externalObjectInstanceBlockStore.pointer);if(U().BE({parentStore:d.blockParentStore,insertStore:e,afterStore:d.blockStore,transaction:n}),0===(0,x().QaF)(s.textValueBeforePaste).trim().length){const e=ue().G.createChildStore(d.blockParentStore,s.stores.blockStore.pointer);U().Od({parentStore:d.blockParentStore,childToRemoveStore:e,transaction:n})}const i=ue().G.createChildStore(s.stores.blockParentStore,s.stores.externalObjectInstanceBlockStore.pointer);N().ZH({environment:t}),fe().Z.setState({...s,currentOption:{type:o,externalObjectInstanceBlockStore:i}})}else if("mention"===o){const e=(0,x().x36)(d.externalObjectInstanceBlockStore.id),o=(0,x().YCD)(e),i=(0,x().P$X)(s.textValueBeforePaste,[o],s.urlSelection.startIndex),r={startIndex:s.urlSelection.startIndex+1,endIndex:s.urlSelection.startIndex+1};V().sO({environment:t,store:d.textStore,value:i,transaction:n}),F().sW({store:d.externalObjectInstanceBlockStore,data:{parent_id:d.textStore.id,parent_table:h().iU,alive:!0},transaction:n}),N().eP({environment:t,store:s.stores.blockStore}),L().setSelection({store:s.stores.textStore,selection:r}),fe().Z.setState({...s,currentOption:{type:"mention",mentionTokenSelection:r}})}else if("link"===o)fe().Z.setState({...s,currentOption:{type:"link"}}),N().eP({environment:t,store:s.stores.blockStore}),L().setSelection({store:s.stores.textStore,selection:{startIndex:s.urlSelection.endIndex,endIndex:s.urlSelection.endIndex}});else if("drive"===o)fe().Z.setState({...s,currentOption:{type:"drive"}}),N().eP({environment:t,store:s.stores.blockStore}),L().setSelection({store:s.stores.textStore,selection:{startIndex:s.urlSelection.endIndex,endIndex:s.urlSelection.endIndex}});else if("collection"===o){V().sO({environment:t,store:d.textStore,value:s.textValueBeforePaste,transaction:n});const e=ue().G.createChildStore(d.blockParentStore,d.externalObjectInstanceBlockStore.pointer);if(U().BE({parentStore:d.blockParentStore,insertStore:e,afterStore:d.blockStore,transaction:n}),0===(0,x().QaF)(s.textValueBeforePaste).trim().length){const e=ue().G.createChildStore(d.blockParentStore,s.stores.blockStore.pointer);U().Od({parentStore:d.blockParentStore,childToRemoveStore:e,transaction:n})}N().ZH({environment:t}),fe().Z.setState({...s,currentOption:{type:o}})}else(0,R().t1)(o);if(!a){const{unfurlResponse:e}=s;he().Mp(t,{integrationId:s.integration.id,type:o,entity:s.pattern.name,domain:m,from:"unfurl_menu",...e&&{status:null!=e&&e.root.error?"failure":"success"},collection_id:"collection"===o?d.externalCollectionStore.pointer.id:void 0,collection_view_block_id:"collection"===o&&d.blockStore.isCollectionView()?d.blockStore.id:void 0})}}}async function Ke(e){const{environment:t,notionState:o}=e,{externalObjectInstanceBlockId:n,spaceId:i}=o;if(n){const e=new(ue().G)(t,{table:h().iU,id:n,spaceId:i});let o;if(await Promise.all([e.load(),ae().default.waitUntil((()=>ae().default.state.loaded))]),e.isExternalObjectInstanceBlockStore()||e.isExternalObjectInstancePageBlockStore())o=e.getFormat();else if(e.isCollectionView()){var r;o=null===(r=e.getCollectionViewSourceCollectionStore())||void 0===r?void 0:r.getFormat()}if(!o)throw new Error("External object instance has no value.");const a=o.original_url||o.uri;if(!a)throw new Error("External object instance has no original_url.");const s=(0,T().ny)({url:a,integrations:ae().default.integrations.state,currentSpaceId:i});if("success"!==s.type)throw new Error("Could not find integration.");const{integration:l}=s,c=(0,q().NP)(l.id);if(0===c.length)throw new Error("Could not find bot.");if(e.isExternalObjectInstanceBlockStore()||e.isExternalObjectInstancePageBlockStore())await ze({environment:t,url:a,botIds:c.map((e=>{let{id:t}=e;return t})),integrationId:l.id,externalObjectInstanceBlockStore:e});else{if(!e.isCollectionView())throw new Error(`BlockStore is neither an ExternalObject nor a ExternalCollection. It has type: ${e.getType()}`);{const o=e.getCollectionViewSourceCollectionStore();if(!o)throw new Error("Could not find collection store.");await qe({environment:t,url:a,botIds:c.map((e=>{let{id:t}=e;return t})),externalCollectionViewBlockStore:e,externalCollectionStore:o})}}}}async function ze(e){const{environment:t,url:o,botIds:n,integrationId:i,externalObjectInstanceBlockStore:a}=e;ge().Z.add(o);const s=await _e().callApi({eventName:"unfurlUrl",environment:t,data:{url:o,botIds:n,integrationId:i,spaceId:be().Bs()}});ge().Z.delete(o);const l=fe().Z.state,d="success"===s.type?s.data:{root:{error:{status_code:s.status}},relations:[]};if(l.open&&l.stores.externalObjectInstanceBlockStore===a){fe().Z.setState({...l,unfurlResponse:d});const e=function(e,t,o){if(Re.includes(e)&&"collection"===o)return t.root.hasOwnProperty("external_schema")?"collection":"preview";if("import"===o)return"link";return o}(i,d,l.currentOption.type);O().createAndCommit({userAction:"unfurlingActions.startUnfurlRequest",environment:t,canUndo:!1,perform:o=>{je({environment:t,type:e,useTemporaryRecordCache:!0,transaction:o,intl:Q().Z.getIntl()})}})}else if(a.isExternalObjectInstanceBlockStore())!function(e){const{environment:t,unfurlResponse:o,url:n,externalObjectInstanceBlockStore:i}=e,a=i.pointer.spaceId,s=t.currentUser.id;if(!s)return;const l=(0,c().x$)(n),{host:d}=(0,B().Qc)(l);if(!d)return;if("collectionId"in o)return;const p=i.getFormat().related_external_object_uris_to_instance_ids,m=(0,E().m8)(Object.entries(p||{}).map((e=>{let[t,o]=e;return[t,ue().G.createChildStore(i,{id:o,table:h().iU,spaceId:i.getSpaceId()})]})));O().createAndCommit({userAction:"unfurlingActions.createExternalObjectInstanceFromInitialUnfurl",environment:t,canUndo:!0,perform:e=>{const s=(0,E().m8)(P().oA(o.relations.map((o=>{if(o.external_schema)return;let n=m[o.uri];return n?(F().sW({store:n,data:{type:r().Ti.externalObjectInstance,parent_table:h().iU,parent_id:i.id,alive:!0},transaction:e}),F().sW({store:n.getFormatStore(),data:o,transaction:e})):(n=F().j4({environment:t,type:r().Ti.externalObjectInstance,spaceId:a,format:o,inMemoryRecordCache:i.inMemoryRecordCache,transaction:e}),F().sW({store:n,data:{parent_table:h().iU,parent_id:i.id,alive:!0},transaction:e})),[o.uri,n.id]})))),l=i.getFormatStore().getValue();let c,d;if(l&&(c=l.block_width,d=l.block_height),!c&&!d){const e=(0,u().o)(o.root.attributes,(0,W().o$)());e&&(c=e.block_width,d=e.block_height)}F().sW({store:i.getFormatStore(),data:{...{...o.root,block_width:c,block_height:d,external_schema:void 0,integration_id:null,original_url:n,is_placeholder:null,error:o.root.error??null},related_external_object_uris_to_instance_ids:s},transaction:e})}})}({environment:t,unfurlResponse:d,url:o,externalObjectInstanceBlockStore:a}),function(e){const{environment:t,url:o,spaceId:n,status:i}=e,r=(0,W().GQ)(o,n),a=(0,c().x$)(o),s=(0,B().Qc)(a);r&&s.host&&he().Mp(t,{integrationId:r.integration.id,type:"preview",entity:r.pattern.name,domain:s.host,from:"link_preview_placeholder",...i&&{status:i}})}({environment:t,url:o,spaceId:a.getSpaceId(),...d&&{status:d.root.error?"failure":"success"}});else{if(!a.isCollectionView()){if(a.isExternalObjectInstancePageBlockStore())return;throw new Error(`BlockStore is neither an ExternalObject nor a ExternalCollection. It has type: ${a.getType()}`)}{const e=a.getCollectionViewSourceCollectionStore();if(!e)throw new Error("Could not find collection store.");O().createAndCommit({userAction:"unfurlingActions.startUnfurlRequest",environment:t,canUndo:!0,perform:n=>{We({environment:t,unfurlResponse:d,url:o,externalCollectionStore:e,externalCollectionViewBlockStore:a,transaction:n})}})}}}async function He(e){const{environment:t,url:o,botIds:n,userDefinedExternalCollectionStore:i,relatedPageId:a}=e,s=i.getFormat();if(!s.uri||void 0!==s.external_object_id)return;ge().Z.add(o);const l=await _e().callApi({eventName:"unfurlUrl",environment:t,data:{url:o,botIds:n,spaceId:i.getSpaceId(),targetCollectionId:i.id,relatedPageId:a}});if("failed"===l.type)return void we().x2(l);ge().Z.delete(o);const d=l.data;return"pageId"in d&&d.pageId?new(ue().G)(t,{table:h().iU,id:d.pageId,spaceId:i.getSpaceId()}):function(e){const{environment:t,unfurlResponse:o,url:n,rootUserDefinedExternalCollectionStore:i}=e,a=i.pointer.spaceId,s=t.currentUser.id;if(!s)return;const l=(0,c().x$)(n),{host:d}=(0,B().Qc)(l);if(!d)return;if(!o.root.external_object_id)return;const u=o.root;return O().createAndCommit({userAction:"unfurlingActions.createExternalObjectInstancePageFromInitialUnfurl",environment:t,canUndo:!0,perform:e=>{const o=F().j4({environment:t,type:r().Ti.externalObjectInstancePage,spaceId:a,format:u,inMemoryRecordCache:i.inMemoryRecordCache,transaction:e});return xe().zw({parentStore:i,childStore:o,transaction:e}),new(ue().G)(t,o.pointer)}}).performResult}({environment:t,unfurlResponse:d,url:o,rootUserDefinedExternalCollectionStore:i})}async function qe(e){const{environment:t,url:o,botIds:n,externalCollectionStore:i,externalCollectionViewBlockStore:r}=e;ge().Z.add(o);const a=await _e().callApi({eventName:"unfurlUrl",environment:t,data:{url:o,botIds:n,spaceId:be().Bs()}});ge().Z.delete(o);const s="success"===a.type?a.data:{root:{error:{status_code:a.status}},relations:[]};O().createAndCommit({userAction:"unfurlingActions.startUnfurlRequestForCollection",environment:t,canUndo:!0,perform:e=>{We({environment:t,unfurlResponse:s,url:o,externalCollectionStore:i,externalCollectionViewBlockStore:r,transaction:e})}})}function We(e){const{environment:t,unfurlResponse:o,url:n,externalCollectionStore:i,externalCollectionViewBlockStore:r,transaction:l}=e,d=(0,c().x$)(n),{host:u}=(0,B().Qc)(d);if(!u)return;const{external_object_id:p,uri:m,bot_id:f}=o.root;if(!p||!m||!f)return;const g=P().w6(T().wh).map((()=>new(ue().NW)(t,(0,$().$x)({environment:t,table:b().vF,spaceId:(0,I().J)(r.pointer.spaceId)})))),v={};o.relations.forEach(((e,t)=>{const o=g[t],n=e,a={id:o.id,version:0,space_id:(0,I().J)(r.pointer.spaceId),parent_table:b().vF,parent_id:i.id,alive:!0,format:n,schema:{}};v[e.uri]=o.id,F().sW({store:o,data:a,transaction:l})}));const _={id:i.id,version:0,space_id:(0,I().J)(r.pointer.spaceId),parent_table:h().iU,parent_id:r.id,alive:!0,format:{original_url:d,domain:u,...o.root,property_visibility:(S=o.root.external_schema,S&&Object.keys(S).flatMap((e=>(0,s().HF)(e)?[]:{property:`${a().U}${e}`,visibility:"hide_if_empty"}))),related_external_object_uris_to_instance_ids:{...v},is_placeholder:void 0,integration_id:void 0},schema:{}};var S;F().sW({store:i,data:_,transaction:l});if(Xe()&&o){const e=r.getCollectionViewIds();null==e||e.forEach((e=>{const t=ue().Xr.createChildStore(r,{table:y().np,id:e,spaceId:r.getSpaceId()});if("table"===t.getType()){const e={...t.getFormat(),table_properties:ot(o.root.external_schema)};F().sW({store:t,data:{format:e},transaction:l})}}))}}async function Ge(e){const{environment:t}=e,{externalObjectInstanceBlockPointersMap:o,externalCollectionInstancePointersMap:n}=se().default.state,i=[...Object.values(o),...Object.values(n)],r=P().vM(i,(e=>e.spaceId));await(0,A().qd)(Object.entries(r),5,(e=>{let[o,n]=e;return _e().refetchExternalObjectInstanceBlocks({environment:t,data:{recordPointers:n},headers:void 0!==o?(0,g().Bb)({spaceId:o}):void 0})})),se().default.reset()}async function $e(e){const{environment:t,externalAuthenticationValue:o}=e;let n=await _e().callApi({eventName:"getExternalIntegrationAccessToken",environment:t,data:{botId:o.id,integrationId:o.integration_id,spaceId:o.space_id}});if("failed"===n.type){const e=ae().default.integrations.state.find((e=>e.id===o.integration_id));if(!e)return;Pe().oV({label:Q().Z.formatMessage(De.userReAuth)}),await ke().hM({environment:t,integration:e,spaceId:o.space_id,from:"integration_file_picker"});const i=ae().default.bots.state.filter((e=>e.integration_id===o.integration_id))[0];if(!i)return;n=await _e().callApi({eventName:"getExternalIntegrationAccessToken",environment:t,data:{botId:i.id,integrationId:i.integration_id,spaceId:i.space_id}})}return n}function Qe(e){const{integrationType:t,integration:o}=e;return"box"===t?{type:t,title:Q().Z.formatMessage(De.browse,{appName:o.name}),accounts:ae().default.externalAuthentications.state.filter((e=>{let{integration_id:t}=e;return t===o.id})),onSelect:Ye(e)}:"drive"===t?{type:t,title:Q().Z.formatMessage(De.browse,{appName:o.name}),accounts:ae().default.externalAuthentications.state.filter((e=>{let{integration_id:t}=e;return t===o.id})),onSelect:Ye(e)}:void 0}function Ye(e){const{integration:t,environment:o,externalObjectTokenStore:n,externalObjectInstanceBlockStore:i}=e;return async e=>{let r=e?e.id:void 0;if(!e){const{currentSpaceStore:e}=ie().default.state,n=ae().default.integrations.state.find((e=>{let{id:o}=e;return o===t.id}));if(n&&e){const i=ae().default.bots.state;await ke().hM({environment:o,integration:n,spaceId:e.id,from:"integration_file_picker"});const a=function(e,t){const o=ae().default.bots.state;var n;if(e.length!==o.length)return null===(n=o.filter((e=>e.integration_id===t))[0])||void 0===n?void 0:n.id}(i,t.id);a&&(r=a)}}const a=ae().default.externalAuthentications.state.find((e=>e.id===r));if(a){const e=await async function(e,t,o,n,i){if(!ae().default.state.loaded)return;i.setState({error:!1,loading:!0});const r=await $e({environment:e,externalAuthenticationValue:n});if(i.setState({error:!r||"success"!==r.type,loading:!1}),r&&"failed"!==r.type)return r.data;we().vC({message:Q().Z.formatMessage(De.somethingWentWrong),showCancel:!0,keepFocus:!0,items:[{label:Q().Z.formatMessage(De.copyDebuggingInformation),color:void 0,onAccept:async()=>{const t={statusCode:null==r?void 0:r.status,integrationId:o.id,botId:n.id};(await ye().F.clipboardActions.load()).copyString({environment:e,stringValue:JSON.stringify(t,null,2),copiedMessage:De.copiedDebuggingInfo})}}]})}(o,0,t,a,n);e&&(Ce().Z(),await function(e){const{integration:t,tokenDetails:o,environment:n,externalObjectInstanceBlockStore:i,botId:r}=e;if(t.id===d().YM)return async function(e,t){const{access_token:o}=e;try{await(0,z().ZP)("https://cdn01.boxcdn.net/polyfills/core-js/2.5.3/core.min.js",{resourceType:z()._g.Javascript});const e=[{url:"https://cdn01.boxcdn.net/platform/elements/15.0.0/en-US/picker.js",resourcetype:z()._g.Javascript},{url:"https://cdn01.boxcdn.net/platform/elements/15.0.0/en-US/picker.css",resourcetype:z()._g.Stylesheet}];await Promise.all(e.map((e=>{let{url:t,resourcetype:o}=e;return(0,z().ZP)(t,{resourceType:o})})))}catch(a){return void t(!0,"")}const n=document.createElement("div");n.setAttribute("id","box-app-container"),document.body.appendChild(n);const i=new Box.FilePicker;i.show("0",o,{size:"small",container:"#box-app-container",maxSelectable:1,logoUrl:"box"});const r=()=>{i.hide(),n.remove()};i.addListener("choose",(function(e){var o;const n=null==e||null===(o=e[0])||void 0===o?void 0:o.id;n&&t(!1,`https://app.box.com/file/${n}`),r()})),i.addListener("cancel",r)}(o,Je({environment:n,externalObjectInstanceBlockStore:i,botId:r}));if(t.id===d().f3)return(0,G().v)({environment:n,accessToken:o.access_token,callback:Je({environment:n,externalObjectInstanceBlockStore:i,botId:r}),integration:t,from:"link_preview_placeholder"});return void function(){if(Ae){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];console.warn("multiTextSelectionHelpers:",...t)}}(`no matching integration found for external file picker with integration ID ${t.id}}`)}({integration:t,environment:o,externalObjectInstanceBlockStore:i,externalObjectTokenStore:n,botId:a.id,tokenDetails:e}))}}}function Je(e){const{environment:t,externalObjectInstanceBlockStore:o,botId:n}=e;return(e,i)=>{if(e)return we().vC({message:Q().Z.formatMessage(De.somethingWentWrong),showCancel:!0,keepFocus:!0,items:[{label:Q().Z.formatMessage(De.copyDebuggingInformation),color:void 0,onAccept:async()=>{const o={err:e,botId:n};(await ye().F.clipboardActions.load()).copyString({environment:t,stringValue:JSON.stringify(o,null,2),copiedMessage:De.copiedDebuggingInfo})}}]});tt({environment:t,externalObjectInstanceBlockStore:o,url:i,botId:n})}}function Xe(){return re().default.checkGate({gateName:"is_visibility_enabled_for_db_sync"})}function et(e){const{environment:t,originRect:o,externalObjectInstanceBlockStore:n,integration:i}=e,r=[{type:"embed",onChange:o=>{tt({environment:t,url:o,externalObjectInstanceBlockStore:n,placeholderIntegrationId:e.placeholderIntegrationId}),Ce().Z()}}];if(re().default.checkGate({gateName:"ai_source_picker"})&&((null==i?void 0:i.id)===d().Gw||(null==i?void 0:i.id)===d().mC)){const o=(null==i?void 0:i.id)===d().Gw?"/images/external_integrations/github-icon.png":"/images/external_integrations/jira-icon.png";r.push({type:"aiSourcePicker",integration:null==i?void 0:i.id,defaultAvatar:o,onChange:o=>{tt({environment:t,url:o,externalObjectInstanceBlockStore:n,placeholderIntegrationId:e.placeholderIntegrationId}),Ce().Z()},getResults:async(e,o)=>await async function(e){const{environment:t,query:o,integrationId:n,botId:i}=e,r=i?[i]:ae().default.bots.state.filter((e=>e.integration_id===n)).map((e=>{let{id:t}=e;return t}));if(0===r.length)return{root:{error:{status_code:500,messages:["No bot found for this integration"]}},relations:[]};return await async function(e){const{environment:t,query:o,botIds:n}=e,i=await _e().callApi({eventName:"aiSourcePicker",environment:t,data:{query:o,botIds:n,spaceId:be().Bs()}}),r="success"===i.type?i.data:{root:{error:{status_code:i.status}},relations:[]};return"failed"===i.type&&we().x2(i),r}({environment:t,query:o,botIds:r})}({environment:t,query:e,integrationId:o})})}if(i&&!t.device.isMobile){const o=function(e){const{integration:t}=e;return t.id===d().YM?Qe({integrationType:"box",...e}):t.id===d().f3?Qe({integrationType:"drive",...e}):void 0}({integration:i,environment:t,externalObjectInstanceBlockStore:n,externalObjectTokenStore:e.externalObjectTokenStore});o&&r.push(o)}Ce().$(t,{originGap:0,originRect:o,title:"Embed Link Preview",currentTab:"embed",tabs:r})}function tt(e){const{environment:t,url:o,externalObjectInstanceBlockStore:n,placeholderIntegrationId:i,botId:a}=e,s=(0,T().ny)({url:o,integrations:ae().default.integrations.state,currentSpaceId:n.getSpaceId()});if("success"===s.type){const{integration:e,pattern:i}=s,l=a?[a]:ae().default.bots.state.filter((t=>t.integration_id===e.id)).map((e=>{let{id:t}=e;return t}));if(l.length>0){const a=n.getParentId(),s=(0,c().x$)(o),{host:d}=(0,B().Qc)(s);d&&a&&(O().createAndCommit({userAction:"unfurlingActions.startUnfurlFromPlaceholder",environment:t,canUndo:!0,perform:e=>{F().sW({store:n,data:{type:r().Ti.externalObjectInstance},transaction:e}),F().sW({store:n.getFormatStore(),data:{original_url:o,domain:d},transaction:e})}}),he()._x(t,{integrationId:e.id,entity:i.name,domain:d,from:"placeholder"})),ze({environment:t,url:o,botIds:l,integrationId:e.id,externalObjectInstanceBlockStore:n})}else O().createAndCommit({userAction:"unfurlingActions.startUnfurlFromPlaceholder",environment:t,canUndo:!0,perform:e=>{F().sW({store:n.getFormatStore(),data:{integration_id:null,original_url:o,is_placeholder:null},transaction:e})}})}else if("partial"===s.type){const{integration:e}=s;O().createAndCommit({userAction:"unfurlingActions.startUnfurlFromPlaceholder",environment:t,canUndo:!0,perform:t=>{F().sW({store:n.getFormatStore(),data:{is_placeholder:null,integration_id:e.id,original_url:o,error:{status_code:m().Rl.UNPROCESSABLE_ENTITY}},transaction:t})}})}else"failure"===s.type?O().createAndCommit({userAction:"unfurlingActions.startUnfurlFromPlaceholder",environment:t,canUndo:!0,perform:e=>{F().sW({store:n.getFormatStore(),data:{is_placeholder:null,original_url:o,integration_id:i,error:{status_code:m().Rl.UNPROCESSABLE_ENTITY}},transaction:e})}}):(0,R().t1)(s)}function ot(e){return e&&Object.entries(e).flatMap((e=>{let[t,o]=e;return(0,s().HF)(t)?[]:"hidden"===(null==o?void 0:o.visibility)?{property:`${a().U}${t}`,visible:!1}:{property:`${a().U}${t}`,visible:!0}}))}function nt(e){const{environment:t,block:o,transaction:n}=e;if(!o.isDefined()||!(0,ve().ww)(t)||!o.isType(r().Ti.externalObjectInstance))return;const i=(0,$().TS)({environment:t,table:h().iU,spaceId:o.getSpaceId()}),a=F().j4({environment:t,id:i,type:r().Ti.externalObjectInstance,spaceId:o.getSpaceId(),format:o.getFormat(),inMemoryRecordCache:o.inMemoryRecordCache,transaction:n});F().sW({store:a,data:{parent_id:o.id,parent_table:o.table,alive:!0},transaction:n});const s=o.getFormatStore().getKeyStore("related_external_object_uris_to_instance_ids").getValue();if(s)for(const r of Object.values(s)){const e={table:h().iU,id:r,spaceId:o.getSpaceId()};O().applyOperation({store:(0,ue().Kv)(o,e),operation:{pointer:e,path:[],command:"update",args:{parent_table:h().iU,parent_id:i}},transaction:n})}const c=[(0,x().YCD)((0,x().x36)(i))];F().sW({store:o,data:{type:r().Ti.text},transaction:n}),V().sO({environment:t,store:o.getBlockTitleStore(),value:c,transaction:n});const d=l().nY(o.getFormat());F().sW({store:o.getFormatStore(),data:(0,E().Q8)(d,(()=>null)),transaction:n})}function it(e){var t;const{block:o,transaction:n,token:i,parentStore:r}=e,{tokenIndex:a}=i;if(!o.isDefined())return;const s=null===(t=r.getParentBlockStore())||void 0===t?void 0:t.getContentStore();if(!s)return;V().gy({block:r,editorMode:"default",transaction:n,tokenIndex:a})&&U().BE({parentStore:s,insertStore:o,afterStore:r,transaction:n})}function rt(e){const{environment:t,spaceId:o,from:n,store:i,bypassCache:r}=e,a=(0,W().y6)(i),s=(null==a?void 0:a.original_url)||(null==a?void 0:a.uri);if(!s)return;const l=(0,W().GQ)(s,o),c=(0,W().Ue)(s,o);if(!l||0===c.length)return;const u=i.getCollectionStore(),{integration:p,pattern:m}=l;if(i.isCollectionView()&&u)_e().refetchExternalObjectInstanceBlocks({environment:t,data:{recordPointers:[{...u.pointer,spaceId:o}],bypassCache:r},headers:(0,g().Bb)({spaceId:o})});else if(i.isExternalObjectInstancePageBlockStore()){d().tO.includes(p.id)?ze({environment:t,url:s,botIds:c.map((e=>{let{id:t}=e;return t})),integrationId:p.id,externalObjectInstanceBlockStore:i}):_e().refetchExternalObjectInstanceBlocks({environment:t,data:{recordPointers:[{...i.pointer,spaceId:o}],bypassCache:r},headers:(0,g().Bb)({spaceId:o})})}else i.isExternalObjectInstanceBlockStore()&&ze({environment:t,url:s,botIds:c.map((e=>{let{id:t}=e;return t})),integrationId:p.id,externalObjectInstanceBlockStore:i});he().B3(t,{integrationId:p.id,entity:m.name,from:n})}function at(e){var t,o;let{environment:n,integration:i,url:r,blockStore:a}=e;switch(i.id){case d().Aw:pe().default.setState({...pe().default.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"asana",openedFrom:"link_paste"});break;case d().f3:const e=(0,T().Tf)({url:r,integration:i});if(e){const t=e.find((e=>"title"===e.id)),o=null==t?void 0:t.values[0];le().default.setState({...le().default.state,selectedFileId:o})}pe().default.setState({...pe().default.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"gdocs",openedFrom:"link_paste"});break;case d().mC:const s=a&&(null===(t=(0,Y().VP)(a))||void 0===t?void 0:t.id),l=/\/projects\/(\w+)\//,c=null===(o=r.match(l))||void 0===o?void 0:o[1];ce().ZP.setState({...ce().ZP.state,teamSpaceId:s,projectKeys:c?[c]:[]}),Ie().jW({environment:n,from:"external_object_instance_block",action:"show_teamspaces"});const u=ce().ZP.createNewFlowId();(0,j().j)({environment:n,event:{eventName:"external_sync_entry_point",eventProperties:{integration:"jira",from:"link_paste_menu",flowId:u}}});break;case d().aW:Me().rN({url:r,environment:n,from:"external_object_instance_block",integration:i,blockStore:a})}}},109757:(e,t,o)=>{o.d(t,{Q7:()=>L,rX:()=>O,A3:()=>Q,Xo:()=>F,nQ:()=>U,dm:()=>ne,K_:()=>J,y:()=>$,cR:()=>G,W8:()=>Y,yM:()=>K,cT:()=>j,IL:()=>V});o(821057),o(670560),o(267602),o(653476),o(30005),o(241792),o(398858),o(461318),o(33228);var n=()=>o(659278),i=()=>o(225339),r=()=>o(665472),a=()=>o(799891),s=()=>o(956057),l=()=>o(741633),c=()=>o(81954),d=()=>o(122792),u=()=>o(955620),p=()=>o(349220),m=()=>o(720866),f=()=>o(513670),g=()=>o(839002),v=()=>o(855741),h=()=>o(744958),_=()=>o(326966),b=()=>o(594546),y=()=>o(500174),S=()=>o(443269),w=()=>o(527278),k=()=>o(790620),I=()=>o(749826),C=()=>o(9599),x=()=>o(148882),T=()=>o(851713),M=()=>o(482162),P=()=>o(897257);class A{constructor(e){this.environment=void 0,this.startTime=void 0,this.partialTime=void 0,this.bytesSuccessfullySent=void 0,this.curatedFileType=void 0,this.shouldReportMetrics=void 0,this.gateName=void 0,this.environment=e.environment,this.startTime=e.startTime,this.partialTime=e.startTime,this.bytesSuccessfullySent=0,this.curatedFileType=this.getCuratedFileType(e.fileType),this.gateName=e.silentRetryEnabled?"silent_retry_on":"silent_retry_control";this.shouldReportMetrics="image"===this.curatedFileType&&(0,o(150266).lB)(1);const t=A.getCuratedFileSize(e.fileSize);(0,b().j)({environment:this.environment,event:{eventName:"client.file_upload.file_stats",eventProperties:{size:t,type:this.curatedFileType}}}),this.shouldReportMetrics&&(0,b().j)({environment:this.environment,event:{eventName:"client.file_upload.upload_session_start",eventProperties:{gate_name:this.gateName}}})}getCuratedFileType(e){return e?e.includes("image")?"image":"other":"unknown"}reportPermissionCheckCompleted(e){if(!this.shouldReportMetrics)return;const t=e.timeNow-this.partialTime;(0,b().j)({environment:this.environment,event:{eventName:"client.file_upload.latency_permission_check",eventProperties:{latency:t}}}),this.partialTime=e.timeNow}reportGetSignedUrlCompleted(e){if(!this.shouldReportMetrics)return;const t=e.timeNow-this.partialTime;(0,b().j)({environment:this.environment,event:{eventName:"client.file_upload.latency_get_signed_url",eventProperties:{latency:t,success:e.success}}}),this.partialTime=e.timeNow}updateProgress(e){this.bytesSuccessfullySent=e.bytesSuccessfullySent}startNewAttempt(e){this.partialTime=e.timeNow,this.bytesSuccessfullySent=0}reportAttemptFinished(e){this.shouldReportMetrics&&(e.success||(0,b().j)({environment:this.environment,event:{eventName:"client.file_upload.failed_attempt_progress",eventProperties:{progress:this.bytesSuccessfullySent}}}),this.partialTime=e.timeNow)}reportUploadSessionEnd(e){let{timeNow:t,status:o,errorCode:n=-1}=e;if(!this.shouldReportMetrics)return;(0,b().j)({environment:this.environment,event:{eventName:"client.file_upload.upload_session_end",eventProperties:{status_code:n,status:o,gate_name:this.gateName}}});const i=t-this.startTime;(0,b().j)({environment:this.environment,event:{eventName:"client.file_upload.latency_e2e",eventProperties:{latency:i,status:o,gate_name:this.gateName}}})}static getCuratedFileSize(e){return e<0?-1:Math.pow(2,Math.ceil(Math.log2(e)))}}var R=()=>o(286310),B=()=>o(824462),E=()=>o(917801);const D=(0,o(788860).vU)({uploadFileFailed:{defaultMessage:"Upload failed.",id:"uploadActions.uploadFailedError.message"}});function U(e){return e.filter((e=>e.getAlive())).map((e=>{const{source:t,title:o,size:n}=e.getProperties()||{};return{type:"remote",id:e.id,source:u().QaF(t),name:u().QaF(o),size:u().QaF(n),store:e}}))}function F(e){return{...N(e),id:s().Il(),dataURL:URL.createObjectURL(e),type:"local"}}function N(e){return{file:e,name:e.name,size:`${(e.size/1024).toFixed(1)}KB`}}function V(e){var t;const o=e.files.map(N);null===(t=e.onBatchStart)||void 0===t||t.call(e,o);const n=new Map;let i=0;g().jl(e.files,ee,(t=>Promise.all(t.map((t=>{const o=s().Il();return new Promise(((r,a)=>{const s={environment:e.environment,..."secure"===e.bucket?{bucket:e.bucket,record:e.record}:{bucket:e.bucket},file:t,onStart:(t,n)=>{var i;null===(i=e.onSingleFileStart)||void 0===i||i.call(e,t,o,n)},onProgress:t=>{var n,r;let{progressPercent:a,uploadedFiles:s}=t;null===(n=e.onBatchProgress)||void 0===n||n.call(e,{progressPercent:a,uploadedFiles:i}),null===(r=e.onSingleFileProgress)||void 0===r||r.call(e,{progressPercent:a,uploadedFiles:s},o)},onComplete:(a,s,l)=>{var c;i++,n.set(t.name,{fileUrl:a,signedToken:l??""}),null===(c=e.onSingleFileComplete)||void 0===c||c.call(e,a,o),r()},onError:t=>{var n;const i=new Error(t.message);null===(n=e.onSingleFileError)||void 0===n||n.call(e,i,o),a(i)},bypassFreeFileUploadLimitCheck:e.bypassFreeFileUploadLimitCheck,importFileUploadType:e.uploadType,formMetadata:e.formMetadata,spaceId:e.spaceId};"confluence"===e.uploadType||"genericImporter"===e.uploadType?async function(e){const{environment:t,file:o,bypassFreeFileUploadLimitCheck:n,spaceId:i}=e;if(!(o instanceof File))return;const r=o.type||"text/plain; charset=utf-8";if(L({bypassFreeFileUploadLimitCheck:n,environment:t,file:o})){var a;if(!i)return void(null===(a=e.onError)||void 0===a||a.call(e,{message:"Space information is missing.",offline:void 0}));{var s;null===(s=e.onStart)||void 0===s||s.call(e,N(o));const n=Math.floor(o.size/Z)+1,a={bucket:e.bucket,name:o.name,contentType:r,supportExtraHeaders:!0,contentLength:o.size,numberOfFileChunks:n,spaceId:i},g=await B().callApi({eventName:"initiateMultipartUpload",environment:t,data:a,headers:(0,l().Bb)({cellId:void 0,spaceId:i})});var c;if("failed"===g.type)return void(null===(c=e.onError)||void 0===c||c.call(e,{message:g.error.message,offline:g.offline}));const _=await async function(e){const{file:t,signedUrlsForChunks:o}=e,n=[];let i,r,a,s=[];const l=[];for(let p=0;p<o.length;p++){i=p*Z,r=(p+1)*Z,a=p+1<o.length?t.slice(i,r):t.slice(i);const e=o[p],s=fetch(e,{method:"PUT",body:new Blob([a],{type:t.type})});n.push(s)}const c=f().yo(n,3);for(const[p,f]of c.entries()){var d;try{const e=await(0,h().Yb)((()=>Promise.all(f)),[100,1e3,3e3]);s=[...s,...e]}catch(u){return{error:(0,m().t)(u)}}null===(d=e.onProgress)||void 0===d||d.call(e,{progressPercent:Math.floor(p/c.length*100),uploadedFiles:0})}return s.forEach(((e,t)=>{const o=e.headers.get("etag");o&&l.push({ETag:o,PartNumber:t+1})})),{value:l}}({file:o,signedUrlsForChunks:g.data.signedUrlsForChunks,onProgress:e.onProgress});var d;if(v().x.isFail(_))return void(null===(d=e.onError)||void 0===d||d.call(e,{message:_.error.message,offline:void 0}));const b={...a,multipartUploadEtags:_.value,fileKey:g.data.key,uploadId:g.data.uploadId},y=await B().callApi({eventName:"completeMultipartUpload",environment:t,data:b,headers:(0,l().Bb)({cellId:void 0,spaceId:i})});var u,p;if("success"===y.type)null===(u=e.onComplete)||void 0===u||u.call(e,g.data.url,void 0,g.data.signedToken);else null===(p=e.onError)||void 0===p||p.call(e,{message:y.error.message,offline:y.offline})}}else Q(e.environment)}(s):e.formMetadata&&"temporary"===s.bucket?async function(e){var t;const{environment:o,file:n,formMetadata:i}=e;if(!i)return;const r=n.type||"text/plain; charset=utf-8",a=await B().callApi({eventName:"getFormUploadFileUrl",environment:o,data:{name:n.name,contentType:r,contentLength:n.size,spaceId:i.spaceId,formId:i.formId}});if("success"!==a.type){var s;return void(null===(s=e.onError)||void 0===s||s.call(e,{message:(0,S().wf)(w().Z.getIntl(),a),offline:a.offline}))}null===(t=e.onStart)||void 0===t||t.call(e,N(n),{fileName:n.name,token:a.data.token});try{const t=await W({environment:o,getUploadFileUrlResponse:{...a,data:{...a.data,signedUploadPostUrl:a.data.signedPostUrl,signedGetUrl:"",type:"POST"}},file:n,fileType:r,onProgress:e.onProgress,retryCount:0});var l,c;if(t.error)null===(l=e.onError)||void 0===l||l.call(e,t.error);else null===(c=e.onComplete)||void 0===c||c.call(e,a.data.url)}catch(u){var d;null===(d=e.onError)||void 0===d||d.call(e,{message:"File transmission failed",offline:!1})}}(s):z({...s,retryImmediatelyAfterFailure:!1})}))}))))).then((()=>{var t,o;const i=e.files.map((e=>n.get(e.name))).filter((e=>void 0!==e));null===(t=e.onBatchComplete)||void 0===t||t.call(e,i.map((e=>e.fileUrl))),null===(o=e.onBatchCompleteWithToken)||void 0===o||o.call(e,i)})).catch((t=>{var o;"confluence"===e.uploadType&&R().a1(e.environment,{import_source:"confluence",data:{import_type:"file",status:"failure",error:t,fileSize:e.files[0].size},flowId:e.flowId}),null===(o=e.onBatchError)||void 0===o||o.call(e,t)}))}function L(e){const{bypassFreeFileUploadLimitCheck:t,file:o}=e,n=P().subscriptionDataStoreInstance.state;return t||!n||!(0,d().QM)(n.subscriptionTier)||o.size<=X}function O(e,t){const o=(0,i().mD)(e.name);return o&&(0,r().gR)(o)?e.size<=0?{canUpload:!1,reason:"fileSizeIsZero"}:e.size>t*_().eM?{canUpload:!1,reason:"fileSizeTooLarge"}:{canUpload:!0}:{canUpload:!1,reason:"fileExtensionNotAllowed"}}const Z=20971520;function j(e){const{retryWhenOffline:t,backoffController:o=new(k().h)(void 0)}=e,n=o.getFailures()>0;z({...e,isOfflineBackoffRetry:n,onComplete:t=>{var i;n&&I().default.logEvent("upload_offline_success_after_retries",o.getFailures()),null===(i=e.onComplete)||void 0===i||i.call(e,t)},onError:n=>{var i;t&&n.offline?o.backOffOnFailure(10*_().C0).then((()=>{j({...e,backoffController:o})})):null===(i=e.onError)||void 0===i||i.call(e,n)}})}function K(e){const{retryWhenOffline:t,environment:o,backoffController:n=new(k().h)(void 0)}=e;!async function(e){const{environment:t,file:o,bypassFreeFileUploadLimitCheck:n}=e,i=performance.now();e.importFileUploadType&&R().y6(t,{type:e.importFileUploadType,uploadFileSizeBytes:o.size,fromAssistantUpload:!0});const r=o.type||"text/plain; charset=utf-8";if(L({bypassFreeFileUploadLimitCheck:n,environment:t,file:o})){e.onStart&&e.onStart(N(o));const n=await B().callApi({eventName:"getUploadFileUrlForAssistantChatTranscriptUpload",environment:t,data:{name:o.name,contentType:r,assistantChatTranscriptSessionPointer:e.assistantChatTranscriptSessionPointer,contentLength:o.size}});if("failed"===n.type){if(e.onError){const t=(0,S().wf)(w().Z.getIntl(),n);e.onError({message:t,offline:n.offline})}return}return H({...e,getUploadFileUrlResponse:{...n,data:{...n.data,type:"POST"}},fileType:r,performanceStartTime:i,isFromAssistant:!0,retryImmediatelyAfterFailure:!1})}Q(e.environment)}({...e,onComplete:(t,o)=>{var n;null===(n=e.onComplete)||void 0===n||n.call(e,t,o)},onStart:(t,n)=>{var i;null===(i=e.onStart)||void 0===i||i.call(e,t,n),(0,b().j)({environment:o,event:{eventName:"assistant_attachment_upload_started",eventProperties:{}}})},onError:i=>{var r;if(t&&i.offline)return(0,b().j)({environment:o,event:{eventName:"assistant_attachment_upload_retry",eventProperties:{}}}),void n.backOffOnFailure(10*_().C0).then((()=>{K({...e,backoffController:n})}));null===(r=e.onError)||void 0===r||r.call(e,i),(0,b().j)({environment:o,event:{eventName:"assistant_attachment_upload_failed",eventProperties:{message:i.message,offline:i.offline??!1}}})}})}async function z(e){const{environment:t,file:o,bypassFreeFileUploadLimitCheck:n}=e,i=performance.now(),r=!e.isOfflineBackoffRetry&&e.reportRichUploadMetrics?new A({environment:t,fileType:o.type,fileSize:o.size,startTime:i,silentRetryEnabled:q(e)}):void 0;e.importFileUploadType&&R().y6(t,{type:e.importFileUploadType,uploadFileSizeBytes:o.size});const a=o.type||"text/plain; charset=utf-8",s=L({bypassFreeFileUploadLimitCheck:n,environment:t,file:o}),l=performance.now();if(null==r||r.reportPermissionCheckCompleted({timeNow:l}),!s)return null==r||r.reportUploadSessionEnd({timeNow:l,status:"no_permission"}),void Q(e.environment);e.onStart&&e.onStart(N(o));const d="secure"===e.bucket?{bucket:e.bucket,name:o.name,contentType:a,record:{table:e.record.table,id:e.record.id,spaceId:(0,c().J)(e.record.spaceId)},supportExtraHeaders:!0,contentLength:o.size}:{bucket:e.bucket,name:o.name,contentType:a,supportExtraHeaders:!0,contentLength:o.size};"secure"===e.bucket&&await x().transactionQueue.awaitRecordTransaction(e.record);const u=await B().callApi({eventName:"getUploadFileUrl",environment:t,data:d});null==r||r.reportGetSignedUrlCompleted({timeNow:performance.now(),success:"success"!==u.type});return H({...e,getUploadFileUrlResponse:u,fileType:a,performanceStartTime:i,fileUploadsAnalyticReporter:r})}async function H(e){const{getUploadFileUrlResponse:t,isFromAssistant:o,file:n,performanceStartTime:i,environment:r,fileUploadsAnalyticReporter:s}=e;var l;if("success"!==t.type)return void(null===(l=e.onError)||void 0===l||l.call(e,{message:(0,S().wf)(w().Z.getIntl(),t),offline:t.offline}));const{url:c,signedGetUrl:d,signedToken:u}=t.data,p=q(e);try{p?await(0,h().XD)({fn:(o,n)=>W({environment:r,getUploadFileUrlResponse:t,file:e.file,fileType:e.fileType,onProgress:e.onProgress,retryCount:n,fileUploadsAnalyticReporter:s}),handleError:()=>({status:"retry"}),retryAttemptsMS:[1e3,2e3,4e3],retryAttemptRandomOffsetMS:200,initialInput:void 0}):await W({environment:r,getUploadFileUrlResponse:t,file:e.file,fileType:e.fileType,onProgress:e.onProgress,retryCount:0,fileUploadsAnalyticReporter:s})}catch(f){if((0,_().hj)(f)){var m;null==s||s.reportUploadSessionEnd({timeNow:performance.now(),errorCode:f,status:"error"});const t={message:w().Z.formatMessage(D.uploadFileFailed),offline:0===f};null===(m=e.onError)||void 0===m||m.call(e,t)}else null==s||s.reportUploadSessionEnd({timeNow:performance.now(),status:"error"}),console.log("failed to upload file ",f);return}if(null==s||s.reportUploadSessionEnd({timeNow:performance.now(),status:"success"}),e.onComplete&&(e.onComplete(c,d,u),a().log({level:"info",from:"uploadActions",type:"ClientUploadSuccess",data:{miscDataToConvertToString:{url:c}}}),e.importFileUploadType)){const t=performance.now()-i;R().lC(r,{type:e.importFileUploadType,totalTimeMs:t});const a=t/1e3,s=n.size/a,l=n.size/1048576,c=l<=10?"lt10MB":l>10&&l<=100?"lt100MB":"gt100MB";R().tc(r,{type:e.importFileUploadType,size:c,file_upload_latency:s,from_assistant_upload:Boolean(o)})}}function q(e){if(e.isOfflineBackoffRetry)return!1;return!!I().default.checkGate({gateName:"uploads_retry_all_immediately"})||e.retryImmediatelyAfterFailure}async function W(e){const{environment:t,getUploadFileUrlResponse:o,file:n,fileType:i,onProgress:r,retryCount:s,fileUploadsAnalyticReporter:l}=e;null==l||l.startNewAttempt({timeNow:performance.now()});const{type:c,url:d}=o.data;(0,p().T)("success"===o.type,"File upload failed");const u=g().UZ();var m;if(!(n instanceof File))return await(null===(m=t.mobileNative)||void 0===m?void 0:m.uploadFile({file:n,getUploadFileUrlPutResponse:"PUT"===o.data.type?o.data:void 0,getUploadFileUrlPostResponse:"POST"===o.data.type?o.data:void 0}))??{error:{message:"Mobile native upload not supported.",offline:!1}};const f=new XMLHttpRequest;if(f.upload.addEventListener("progress",(e=>{if(!e.lengthComputable)return;null==l||l.updateProgress({bytesSuccessfullySent:e.loaded});const t=Math.round(100*e.loaded/e.total);null==r||r({progressPercent:t,uploadedFiles:0,isNetworkUnreliable:!!s&&s>0})})),f.onabort=function(){a().log({level:"error",from:"uploadActions",type:"ClientUploadError",data:{miscDataToConvertToString:{type:c,status:f.status,statusText:f.statusText,responseText:f.responseText,source:"onabort"}}})},f.onerror=function(){a().log({level:"error",from:"uploadActions",type:"ClientUploadError",data:{miscDataToConvertToString:{type:c,status:f.status,statusText:f.statusText,responseText:f.responseText,source:"onerror"}}})},f.onreadystatechange=function(){if(f.readyState!==XMLHttpRequest.DONE)return;const e=200===f.status||204===f.status;null==l||l.reportAttemptFinished({timeNow:performance.now(),retryCount:s,success:e}),e?u.resolve({value:d}):(a().log({level:"error",from:"uploadActions",type:"ClientUploadError",data:{miscDataToConvertToString:{type:c,status:f.status,statusText:f.statusText,responseText:f.responseText,source:"onreadystatechange"}}}),u.reject(f.status))},"POST"===c){const e=o.data.postHeaders,t=o.data.signedUploadPostUrl;f.open(c,t);for(const o of e)f.setRequestHeader(o.name,o.value);const i=new FormData;for(const n in o.data.fields)i.append(n,o.data.fields[n]);i.append("file",n),f.send(i)}else{const e=o.data.putHeaders,t=o.data.signedPutUrl;f.open(c,t);for(const o of e)f.setRequestHeader(o.name,o.value);f.setRequestHeader("Content-Type",i),f.send(n)}return u.promise}function G(e){oe({...e,onChange:t=>{if(!t.files||0===t.files.length)return;const o=Array.from(t.files);V({environment:e.environment,files:o,..."secure"===e.bucket?{bucket:e.bucket,record:e.record}:{bucket:e.bucket},onBatchStart:e.onStart,onBatchProgress:e.onProgress,onBatchComplete:e.onComplete,onBatchCompleteWithToken:e.onCompleteWithToken,onBatchError:e.onError,bypassFreeFileUploadLimitCheck:e.bypassFreeFileUploadLimitCheck})}})}async function $(e){const t=g().UZ();return oe({...e,onChange:e=>{const o=n().p4(e.files);t.resolve(o)}}),t.promise}function Q(e){E().Bw({bannerStore:M().default.state.open?T().Z:C().Z,id:"SubscriptionEditingBlocker",styleKey:y().v.Red,contentKey:"upload_limit_exceeded"})}function Y(){E().qL({bannerStore:C().Z,id:"SubscriptionEditingBlocker"}),E().qL({bannerStore:T().Z,id:"SubscriptionEditingBlocker"})}const J=5,X=1e6*J,ee=5;let te;function oe(e){te&&te.remove(),te=document.createElement("input"),te.type="file",te.style.opacity="0",te.style.pointerEvents="none",te.style.position="fixed",te.style.left="-1000px",te.style.top="-1000px",te.ariaHidden="true",document.body.appendChild(te),e.multiple?te.setAttribute("multiple",""):te.removeAttribute("multiple"),e.accept&&te.setAttribute("accept",e.accept),te.addEventListener("change",(()=>{e.onChange&&e.onChange(te)})),te.addEventListener("blur",(()=>{e.onBlur&&e.onBlur(te)})),te.addEventListener("click",(e=>{e.stopPropagation()})),te.click(),te.focus({preventScroll:!0})}function ne(e){return e.filter(ie).map((e=>e.file))}function ie(e){return"local"===e.type}},13750:(e,t,o)=>{o.d(t,{f:()=>b,x:()=>_});o(267602),o(653476);var n=()=>o(388322),i=()=>o(506347),r=()=>o(282017),a=()=>o(245015),s=()=>o(47443),l=()=>o(937419),c=()=>o(274879),d=()=>o(796093),u=()=>o(341691),p=()=>o(977481),m=()=>o(741636),f=()=>o(707138),g=()=>o(876822),v=()=>o(826955),h=()=>o(146630);async function _(e){const{newCurrentUserId:t,loggedOutUserId:o,environment:i}=e;await u().setLocalStorageUserId(i,t),(0,r().xj)(t),await c().setCookie(i,{name:"notion_user_id",value:t});const s=i.currentUser.loggedInUserIds.filter((e=>e!==o)),g=await c().getGhostAdminUserId(i),v={...i,currentUser:new(n().CurrentUser)({id:t,loggedInUserIds:s,adminUserId:g})};if(i.updateCurrentUserId){const e={environment:i,currentUserId:t,userIds:s};i.updateCurrentUserId(e)}a().Z.set(d().S,t),p().resetRecordSubscriptions(),f().default.reset(),l().default.reset();return await m().zJ(i)&&m().yH(v),await h().KJ(v,t),v}async function b(e){const{newCurrentUserId:t,environment:o,store:n}=e,{mainEditorCurrentBlockStore:r}=g().default.state,a=await _({environment:o,newCurrentUserId:t});if(r){const e=new(v().G)(a,n.pointer);g().default.setState({...g().default.state,mainEditorCurrentBlockStore:void 0}),s()._c({environment:a,store:e,pageVisitSource:i().tY.SwitchSpace})}}},22628:(e,t,o)=>{o.d(t,{j:()=>_,w:()=>b});o(821057),o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(30005);var n=()=>o(35980),i=()=>o(217465),r=()=>o(396136),a=()=>o(255933),s=()=>o(125571),l=()=>o(691970),c=()=>o(781105),d=()=>o(802870),u=()=>o(391995),p=()=>o(731710),m=()=>o(804217),f=()=>o(749826),g=()=>o(56764),v=()=>o(824462),h=()=>o(143346);function _(e,t){!function(){y&&m().default.removeListener(y);g().Z.reset()}();const o=new AbortController;!async function(e){const{environment:t,userId:o,abortSignal:n}=e,r=await u().A.measure("loadUserContent","(current user)",(()=>async function(e){const{environment:t,abortSignal:o}=e,{defaultRecordCache:n,currentUser:i}=t;if(!n.persistedRecordCache)return;const r=i.id;if(!r)return;const d=[],u=await c().yY({environment:t,recordPointers:[{table:l().dx,id:r}],recurFn:e=>{const t=[],o=e=>{e&&(e.table!==s().zU&&e.table!==l().dx||d.push(e),t.push(e))};return e.table===l().dx?(o(e.getUserPointer()),e.getSpaceViewPointers().forEach(o)):e.table===s().zU?(e.getBookmarkedPagePointers().forEach(o),e.getSharedPagePointers().forEach(o),e.getSharedPagesManualSortPointers().forEach(o),o(e.getSpacePointer())):e.table===a().bx&&e.getPagePointers().forEach(o),t},recordIsRequired:e=>e.table===l().dx||e.table===s().zU});if(o.aborted)return;for(const a of d){const e=u.getModel(a);if(u.getRole(a)&&!e)return void 0}return{recordMap:u.toJson()}}({environment:t,abortSignal:n})));if(!r)return;if(n.aborted)return;const d=i().RecordMapWithRole.create(r.recordMap);h().fL({environment:t,inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,recordMap:d,debugSource:"fetchLocalUserContent"}),g().Z.setState({...g().Z.state,localSpaceInaccessiblePages:w(d,o)}),g().Z.state.readyPromise.resolve()}({environment:e,userId:t,abortSignal:o.signal}),S(e).then((()=>{o.abort()}));let n=m().default.state.online;y=()=>{const t=m().default.state.online;!t||n||g().Z.state.remoteSpaceInaccessiblePages||S(e),n=t},m().default.addListener(y)}async function b(){await g().Z.state.readyPromise.promise}let y;async function S(e){const t=e.currentUser.id,o=f().default.checkGate({gateName:"multi_cell_aware_apis"});if(n().Z.set({userId:e.currentUser.id,key:(0,d().O)("prefetchGetSpaces"),value:o}),o){p().$L("await_get_spaces_end");const o=v().callMultiCellApi({eventName:"getSpaces",environment:e,data:{},headers:{},prefetchCacheKey:"getSpaces"}),n={};for await(const e of o){if("success"!==e.type)throw new Error("Request failed");const t=e.data;for(const[e,o]of Object.entries(t.users))n[e]??=[],n[e].push(i().RecordMapWithRole.create(o))}p().$L("await_get_spaces_end");for(const[r,a]of Object.entries(n)){const o=i().RecordMapWithRole.merge(a);h().fL({environment:e,userId:r,inMemoryRecordCache:e.defaultRecordCache.inMemoryRecordCache,recordMap:o,debugSource:"fetchAllUserSpaces"}),r===t&&(g().Z.setState({...g().Z.state,remoteSpaceInaccessiblePages:w(o,r)}),g().Z.state.readyPromise.resolve())}}else{p().$L("await_get_spaces_start");const o=await v().getSpaces(e,{},void 0,void 0,void 0,"getSpaces");if(p().$L("await_get_spaces_end"),"success"!==o.type)throw o.error;for(const[n,r]of Object.entries(o.data)){const o=i().RecordMapWithRole.create(r);h().fL({environment:e,userId:n,inMemoryRecordCache:e.defaultRecordCache.inMemoryRecordCache,recordMap:o,debugSource:"fetchAllUserSpaces"}),n===t&&(g().Z.setState({...g().Z.state,remoteSpaceInaccessiblePages:w(o,n)}),g().Z.state.readyPromise.resolve())}}}function w(e,t){const o={};for(const{pointer:n}of e.getByTable(a().bx)){const i=n.id,s=e.getValue({table:a().bx,id:i});if(s){const n=new Set;if(s.pages){for(const t of s.pages){e.getValue({table:r().iU,id:t})||n.add(t)}o[t]||(o[t]={}),o[t][i]=n}}}return o}},306743:(e,t,o)=>{o.d(t,{aw:()=>k,j_:()=>S});o(267602),o(731107);var n=()=>o(146947),i=()=>o(799891),r=()=>o(578292),a=()=>o(255393),s=()=>o(814422),l=()=>o(839002),c=()=>o(824462),d=()=>o(205228),u=()=>o(594546),p=()=>o(718959),m=()=>o(177189),f=()=>o(527278),g=()=>o(591914),v=()=>o(43519),h=()=>o(876822),_=()=>o(897257),b=()=>o(407391),y=()=>o(752127);async function S(e){const{environment:t,from:o}=e;b().Ot(t,{from:o});const r=v().default.state;if(t.device.isMobileNative){const e=(0,p().B7)(t),o=`${t.device.os} v${t.device.mobileAppVersion}(${t.device.version})`,n="team@makenotion.com",i=`Help with my account ${null==e?void 0:e.getEmail()} on ${o}`,r=()=>{const e=encodeURIComponent(i);y().D({environment:t,url:`mailto:${n}?subject=${e}`})},a=t.mobileNative;a&&a.api.submitUserFeedback?a.submitUserFeedback({sendToEmailAddress:n,subject:i},r):r()}else if(r.isZendeskEnabled&&(0,u().Ug)()){const{userHighestPlanType:o,isSalesAssistedPlan:a}=(0,m().rf)(t),l=await k({environment:t,isSalesAssistedPlan:a});(0,s().g)({type:"decagon",locale:n().locale,analyticsSettings:r,decagonInitializeArgs:l,onError:e=>{i().log({level:"error",from:"decagonHelpers",type:"initializeDecagon",error:{message:e.message}})},userHighestPlanType:o,isSalesAssistedPlan:a,cookieService:t.cookieService,initialQuery:e.prepopulatedContent}),b().LS(t)}}async function w(e){const{environment:t,workspaceId:o}=e,n=[{key:"countryCode",getterFn:async()=>await async function(e){var t;const o=await c().callApi({eventName:"getGeoIpLocation",environment:e,data:{}});if("success"!==o.type)return;return null===(t=o.data)||void 0===t?void 0:t.countryCodeFromIp}(t)??"US"},{key:"stripeCustomerId",getterFn:async()=>{const e=await c().callApi({eventName:"getExternalCustomerId",environment:t,data:{spaceId:o}});return"success"===e.type?e.data.externalId:""}}],r=await(0,l().qd)(n,n.length,(async e=>{let{key:t,getterFn:o}=e;try{return await o()}catch(n){return void i().log({level:"error",from:"decagonHelpers",type:"fetchAsyncDecagonInitializeArgs",error:{message:n.message}})}}));return n.reduce(((e,t,o)=>{let{key:n}=t;return void 0===r[o]?(i().log({level:"error",from:"decagonHelpers",type:"fetchAsyncDecagonInitializeArgs",error:{message:`Failed to fetch ${n}`}}),e):e={...e,[n]:r[o]}}),{})}async function k(e){var t,o,n,i,s,l;const c=e.environment,u=f().Z.getIntl(),p=null===(t=h().default.state.currentUserStore)||void 0===t?void 0:t.getModel(),m=(null===(o=h().default.state.currentSpaceViewStore)||void 0===o||null===(o=o.getModel())||void 0===o?void 0:o.getSpaceId().toString())??"",v=(null===(n=_().subscriptionDataStoreInstance.state)||void 0===n?void 0:n.addOns)??[],b=(0,a().de)(v),y=c.currentUser.id??"",S=(null==p?void 0:p.getFullName(u))??"",k=(null==p?void 0:p.getEmail())??"",I=null===(i=h().default.state.currentSpaceStore)||void 0===i?void 0:i.getRole(),C=(0,g()._P)(h().default.state.currentSpaceStore,y),x=null==C?void 0:C.getMembershipType(),T=null===(s=_().subscriptionDataStoreInstance.state)||void 0===s?void 0:s.subscriptionTier,M=(null===(l=h().default.state.currentUserSettingsStore)||void 0===l||null===(l=l.getSettings())||void 0===l?void 0:l.preferred_locale)||r().al,P=M.split("-")[0];return{countryCode:"US",...await w({environment:c,workspaceId:m}),planType:T,membershipType:x,workspaceId:m,userId:y,userName:S,email:k,userAccessLevel:I,locale:M,language:P,appVersion:`Notion v${d().default.version}${c.device.desktopAppVersion?` desktop v${c.device.desktopAppVersion}`:""}${c.device.mobileAppVersion?` mobile v${c.device.mobileAppVersion}`:""}`,platform:c.device.deviceType,salesAssistedPlan:e.isSalesAssistedPlan,hasAiAddOn:b}}},188517:(e,t,o)=>{o.d(t,{BW:()=>u,GD:()=>d,sA:()=>p,uO:()=>f});o(670560);var n=()=>o(150266),i=()=>o(749826),r=()=>o(127519);const a=!1,s=15*o(326966).C0,l={user_flow_edit_block:.005,user_flow_edit_page_title:.01,user_flow_create_block:.01,user_flow_delete_block:.01};function c(e){if(a)return!0;const t=l[e];if(void 0!==t)return(0,n().aw)(t);const o=i().default.getConfigKey("event_trail_events",e);if("object"==typeof o&&"number"==typeof o.sampleRate)return(0,n().aw)(o.sampleRate);const r=i().default.getConfigKey("event_trail_events","defaultSampleRateUserFlows");return"number"==typeof r&&(0,n().aw)(r)}class d{constructor(e){this.stage=void 0,this.timeout=void 0,this.error=void 0,this.logDataInCaseOfFailure=void 0,this.postFinishCallbacks=[],this.environment=void 0,this.userFlow=void 0,this.entryPointName=void 0,this.handleTimeout=()=>{this.fail("timeout")};const{environment:t,userFlow:o,entryPointName:n,timeoutMs:i}=e;this.environment=t,this.userFlow=o,this.entryPointName=n;e.isEnabled??c(o)?(this.stage="inProgress",this.timeout=window.setTimeout(this.handleTimeout,i??s),this.debugLog("constructed")):this.stage="disable"}isDisabled(){return"disable"===this.stage}updateLogDataInCaseOfFailure(e){this.logDataInCaseOfFailure={...this.logDataInCaseOfFailure,...e}}succeed(){"inProgress"===this.stage&&this.finish("success")}fail(e){"inProgress"===this.stage&&(this.error=e,this.finish("fail"))}finish(e){this.stage=e,this.debugLog("finish"),"number"==typeof this.timeout&&window.clearTimeout(this.timeout),this.timeout=void 0,o(562109).rT(this.environment,this.userFlow,{status:e,error:this.error,entryPointName:this.entryPointName}),"fail"===e&&o(799891).log({level:"error",from:"userFlowActions",type:"userFlowFailed",data:{userFlow:this.userFlow,userFlowEntrypointName:this.entryPointName,userFlowError:this.error,...this.logDataInCaseOfFailure}});for(const t of this.postFinishCallbacks)t()}debugLog(){if(a){const n=this.entryPointName?`${this.userFlow}.${this.entryPointName}`:this.userFlow;for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];console.groupCollapsed(`${this.constructor.name} ${n} stage=${this.stage}`,...t),console.trace(),console.groupEnd()}}}class u extends d{constructor(e){super(e),this.pointer=void 0,this.succeedOnEnqueue=void 0,this.trackCallbacks=[];const{succeedOnEnqueue:t}=e;this.succeedOnEnqueue=t}track(e,t){if("inProgress"===this.stage&&void 0===this.pointer){this.pointer=e,m({tracker:this,transaction:t,succeedOnEnqueue:this.succeedOnEnqueue});for(const e of this.trackCallbacks)e();this.debugLog("track",e.id)}}}class p extends u{constructor(e,t){super({environment:e,userFlow:"user_flow_create_page",entryPointName:t,succeedOnEnqueue:!1}),this.handleTextSelectionChange=e=>{"inProgress"===this.stage&&this.pointer&&"editing"===e.state.mode&&(0,o(191003).qS)(e.state.multiSelection)&&e.state.multiSelection.start.store.pointer.id===this.pointer.id&&this.succeed()},"inProgress"===this.stage&&this.trackCallbacks.push((()=>{r().default.addListener(this.handleTextSelectionChange),this.postFinishCallbacks.push((()=>{r().default.removeListener(this.handleTextSelectionChange)}))}))}}function m(e){const{tracker:t,transaction:o,succeedOnEnqueue:n}=e;"inProgress"===t.stage&&(t.updateLogDataInCaseOfFailure({transactionId:o.id,transactionUserAction:o.getUserActionForAnalyticsPurposesOnly()}),o.annotateWithUserFlow(t.userFlow),o.postCancelCallbacks.push((()=>{t.fail("cancelled_transaction")})),o.postEnqueueActions.push((()=>{o.isEmpty()?t.fail("empty_transaction"):n&&t.succeed()})))}function f(e,t,o,n){if(!c(t))return;m({tracker:new d({environment:e,userFlow:t,isEnabled:!0,entryPointName:n}),transaction:o,succeedOnEnqueue:!0})}},348141:(e,t,o)=>{o.d(t,{B1:()=>w,Be:()=>k,F4:()=>M,GK:()=>_,N0:()=>I,Nb:()=>v,Y:()=>S,Zf:()=>f,ay:()=>C,d2:()=>m,dM:()=>b,ei:()=>x,fG:()=>p,g2:()=>y,jh:()=>P,rx:()=>g,xu:()=>T,zq:()=>h});o(670560),o(267602),o(653476);var n=()=>o(730120),i=()=>o(698422),r=()=>o(998411),a=()=>o(205228),s=()=>o(572623),l=()=>o(876822),c=()=>o(826955),d=()=>o(636340),u=()=>o(269299);async function p(e){if(a().default.isAdminMode)return;const{currentUserSettingsStore:t}=l().default.state;if(!t)return;await t.load();const o=t.getSettings();if(!o)return;const{device:n}=e,i={};!o.disable_auto_set_timezone&&(0,r().r)()!==o.time_zone&&(i.time_zone=(0,r().r)()),n.isDesktopBrowser&&!o.used_desktop_web_app&&(i.used_desktop_web_app=!0),n.isMobileBrowser&&!o.used_mobile_web_app&&(i.used_mobile_web_app=!0),n.isElectron&&n.isMac&&!o.used_mac_app&&(i.used_mac_app=!0),n.isElectron&&n.isWindows&&!o.used_windows_app&&(i.used_windows_app=!0),n.isMobileNative&&n.isIOS&&!o.used_ios_app&&(i.used_ios_app=!0),n.isMobileNative&&n.isAndroid&&!o.used_android_app&&(i.used_android_app=!0),Object.keys(i).length>0&&u().createAndCommit({userAction:"userSettingsActions.updateUserSettingsOnReset",environment:e,canUndo:!0,cellTarget:"main",perform:e=>{m({userSettingsStore:t,data:i,transaction:e})}})}function m(e){const{userSettingsStore:t,data:o,transaction:n}=e;d().sW({store:t.getSettingsStore(),data:o,transaction:n})}function f(e){u().createAndCommit({userAction:"userSettingsActions.setStartWeekToMonday",environment:e,canUndo:!0,cellTarget:"main",perform:e=>{const{currentUserSettingsStore:t}=l().default.state;t&&m({userSettingsStore:t,data:{start_day_of_week:1},transaction:e})}})}function g(e){u().createAndCommit({userAction:"userSettingsActions.setStartWeekToSunday",environment:e,canUndo:!0,cellTarget:"main",perform:e=>{const{currentUserSettingsStore:t}=l().default.state;t&&m({userSettingsStore:t,data:{start_day_of_week:0},transaction:e})}})}function v(e){const{transaction:t,userSettingsStore:o,spaceId:n,type:i}=e;d().sO({store:(0,c()._J)(o,o.pointer,["settings","sidebar_outliner_settings",n,i,"has_pinned"]),value:!0,transaction:t})}function h(e){var t;const{collectionId:o,databaseType:n,transaction:i}=e,r=null===(t=l().default.state.currentSpaceStore)||void 0===t?void 0:t.id,a=l().default.state.currentUserSettingsStore;if(r&&a){var s,c;const e=(null===(s=a.getSettings())||void 0===s?void 0:s.lastUsedTypedCollections)||{},t=(null===(c=a.getSettings())||void 0===c?void 0:c.lastUsedDatabases)||{},l=e[r]||{},d=t[r]||[],u=n?l[n]??[]:[],p=[o,...u.filter((e=>e!==o))].slice(0,2),f=[o,...d.filter((e=>e!==o))].slice(0,5);m({userSettingsStore:a,transaction:i,data:{lastUsedDatabases:{...t,[r]:f},...n?{lastUsedTypedCollections:{...e,[r]:{...l,[n]:p}}}:{}}})}}function _(e){const{transaction:t,userSettingsStore:o,integrationId:n}=e;d().sO({store:(0,c()._J)(o,o.pointer,["settings","dismissed_link_preview_integration_popup",n]),value:!0,transaction:t})}function b(e,t){const o=(0,i().SY)(),n=(0,i().Q3)();if(!o||!n)return;const r={};n&&(r.fbp=n),o&&(r.click_ids=o),u().createAndCommit({userAction:"userSettingsActions.persistAdClick",environment:e,canUndo:!0,cellTarget:"main",perform:e=>{e.postSubmitCallbacks.push((e=>{e||((0,i().iI)(),(0,i().HR)())})),m({userSettingsStore:t,data:r,transaction:e})}})}function y(e){const{currentUserSettingsStore:t}=l().default.state;if(!t)return;const{environment:o,dismissed:n}=e;u().createAndCommit({environment:o,userAction:"userSettingsActions.setDismissedSuggestModeTooltip",canUndo:!0,cellTarget:"main",perform:e=>{m({userSettingsStore:t,transaction:e,data:{dismissed_suggest_mode_tooltip:n}})}})}function S(e){const t=(0,s().WD)(e);t&&u().createAndCommit({environment:e,userAction:"userSettingsActions.setDismissStudentOrgPrompt",canUndo:!0,cellTarget:"main",perform:e=>{m({userSettingsStore:t,transaction:e,data:{dismissed_sidebar_student_org_prompt:!0}})}})}function w(e){const{environment:t,userSettingsStore:o,dismissed:n}=e;u().createAndCommit({environment:t,userAction:"userSettingsActions.setDismissDictationNewPageNux",canUndo:!0,cellTarget:"main",perform:e=>{m({userSettingsStore:o,transaction:e,data:{dismissed_dictation_new_page_nux:n}})}})}function k(e){const{environment:t}=e,{currentUserSettingsStore:o}=l().default.state;if(o){void 0===o.getSettingsStore().getKeyStore("seen_asana_post_import_tour").getValue()&&u().createAndCommit({environment:t,userAction:"userSettingsActions.setSeenAsanaPostImportTutorial",canUndo:!0,cellTarget:"main",perform:e=>{m({userSettingsStore:o,transaction:e,data:{seen_asana_post_import_tour:!0}})}})}}function I(e){const{environment:t}=e,{currentUserSettingsStore:o}=l().default.state;if(o){void 0===o.getSettingsStore().getKeyStore("seen_forms_share_form_tooltip").getValue()&&u().createAndCommit({environment:t,userAction:"userSettingsActions.setSeenFormsShareFormTooltip",canUndo:!0,cellTarget:"main",perform:e=>{m({userSettingsStore:o,transaction:e,data:{seen_forms_share_form_tooltip:!0}})}})}}function C(e){var t;const o=(0,s().WD)(e);o&&(null!==(t=o.getSettings())&&void 0!==t&&t.inapp_gallery_first_visited_at||u().createAndCommit({environment:e,userAction:"userSettingsActions.setFirstMarketplaceVisitTime",canUndo:!0,cellTarget:"main",perform:e=>{m({userSettingsStore:o,transaction:e,data:{inapp_gallery_first_visited_at:n().ou.now().toMillis()}})}}))}function x(e,t){var o;const{listingId:n}=t,i=(0,s().WD)(e);if(!i)return;let r=null==i||null===(o=i.getSettings())||void 0===o?void 0:o.marketplace_review_nudge;r||(r={});let a=r[n];a||(a=[]),a.push(Date.now()),r[n]=a,u().createAndCommit({environment:e,userAction:"userSettingsActions.markMarketplaceReviewNudgeAsShown",canUndo:!0,cellTarget:"main",perform:e=>{m({userSettingsStore:i,transaction:e,data:{marketplace_review_nudge:r}})}})}function T(e){const{environment:t,skillType:o}=e,n=(0,s().WD)(t);if(!n)return;const i=n.getSettingsStore().getKeyStore("ai_suggested_skill_exposure_tracker").getKeyStore(o),r=i.getKeyStore("interacted_with_timestamps").getValue()??[];u().createAndCommit({environment:t,userAction:"userSettingsActions.markSkillAsUsed",canUndo:!0,cellTarget:"main",perform:e=>{d().sW({transaction:e,store:i,data:{interacted_with_timestamps:[...r,Date.now()]}})}})}function M(e){const{environment:t,skillType:o}=e,n=(0,s().WD)(t);if(!n)return;const i=n.getSettingsStore().getKeyStore("ai_suggested_skill_exposure_tracker").getKeyStore(o),r=i.getKeyStore("suggested_timestamps").getValue()??[];u().createAndCommit({environment:t,userAction:"userSettingsActions.markSkillAsSuggested",canUndo:!0,cellTarget:"main",perform:e=>{d().sW({transaction:e,store:i,data:{suggested_timestamps:[...r,Date.now()]}})}})}function P(e){const t=(0,s().WD)(e);t&&u().createAndCommit({environment:e,userAction:"userSettingsActions.dismissAiPageTranslationPassiveSuggestions",cellTarget:"main",perform:e=>{m({userSettingsStore:t,transaction:e,data:{ai_page_translation_dismissed_at:Date.now()}})}})}},221662:(e,t,o)=>{o.d(t,{h:()=>v,l:()=>h});o(821057),o(241792);var n=()=>o(35980),i=()=>o(183922),r=()=>o(741633),a=()=>o(217465),s=()=>o(396136),l=()=>o(513670),c=()=>o(839002),d=()=>o(781105),u=()=>o(391995),p=()=>o(635596),m=()=>o(54649),f=()=>o(824462),g=()=>o(143346);async function v(e){const{environment:t,userId:o,spaceId:n}=e,r=(0,i().NP)({userId:o,spaceId:n});if(!y||y!==r){let o;!function(e){b&&p().ZP.removeListener(b,e)}(t);const n=(t,n)=>{void 0!==o&&o!==n&&h(e),o=n},i=l().P2(n,5e3);b=p().ZP.addListener(r,i,void 0,t),y=r;if(!m().Z.getSharedPagesState(e))return h(e)}}async function h(e){const{environment:t,userId:o,spaceId:i}=e,l=m().Z.getSharedPagesState(e);if(l&&l.loadingDone)return l.loadingDone;const p=(0,c().UZ)();m().Z.setSharedPagesState({spaceId:i,userId:o,state:{currentPageIds:null==l?void 0:l.currentPageIds,loadingDone:p.promise}});try{const l=async function*(e,t,o){try{const o=await u().A.measure("loadUserSharedPages","(current user)",(()=>async function(e,t){const{id:o}=e.currentUser;if(!o)throw new Error("Must be logged in.");if(!e.defaultRecordCache.persistedRecordCache)throw new Error("No local database found.");const i=n().Z.get({userId:o,key:_({userId:o,spaceId:t.spaceId})})||void 0;if(!i)throw new Error("No local shared pages found.");const r=await d().yY({environment:e,recordPointers:i.map((e=>({table:s().iU,id:e}))),recurFn:()=>[],recordIsRequired:()=>!1});return{pages:i,recordMap:r.toJson()}}(e,{spaceId:t})));g().fL({environment:e,inMemoryRecordCache:e.defaultRecordCache.inMemoryRecordCache,recordMap:a().RecordMapWithRole.create(o.recordMap),debugSource:"loadUserSharedPagesInSpace"}),yield o}catch(l){}const i=await f().callApi({eventName:"getUserSharedPagesInSpace",environment:e,data:{spaceId:t,includeDeleted:!0},userId:o,headers:(0,r().Bb)({cellId:void 0,recordId:void 0,spaceId:t})});"success"===i.type&&(e.defaultRecordCache.persistedRecordCache&&n().Z.set({userId:e.currentUser.id,key:_({userId:o,spaceId:t}),value:i.data.pages}),yield i.data)}(t,i,o);for await(const e of l)m().Z.setSharedPagesState({spaceId:i,userId:o,state:{currentPageIds:e.pages,loadingDone:p.promise}});const c=m().Z.getSharedPagesState(e);c&&c.currentPageIds?m().Z.setSharedPagesState({spaceId:i,userId:o,state:{currentPageIds:c.currentPageIds,loadingDone:void 0}}):m().Z.setSharedPagesState({spaceId:i,userId:o,state:void 0})}catch(v){m().Z.setSharedPagesState({spaceId:i,userId:o,state:void 0})}}function _(e){return`UserSharedPagesInSpace:${e.userId}:${e.spaceId}`}let b,y},404811:(e,t,o)=>{o.d(t,{E:()=>S,j:()=>w});o(267602),o(653476),o(30005),o(241792);var n=()=>o(741633);const i=["2021-05-11","2021-05-13","2021-08-16","2022-02-22","2022-06-28"],r=i[i.length-1];o(124199).literals(...i);var a=()=>o(696056),s=()=>o(989478),l=()=>o(441764),c=()=>o(513670),d=()=>o(286310),u=()=>o(487270),p=()=>o(527278),m=()=>o(876822),f=()=>o(749826),g=()=>o(826955),v=()=>o(824462),h=()=>o(308186),_=()=>o(636340),b=()=>o(269299);const y=(0,o(788860).vU)({webhookUrlError:{id:"webhookActions.webhookUrlError",defaultMessage:"Connection failed. Please wait and try again or try another URL."}});async function S(e){const{environment:t,integration:o,webhookUrl:n,webhookSecret:i,webhookHeaders:f,webhookSubscriptionId:S,onError:w,onSuccess:k=(()=>{})}=e,{currentUserRootStore:I,currentSpaceStore:C}=m().default.state;if(!I||!C)return{error:{success:!1}};const x={};f.map((e=>{const{key:t,value:o}=e;return{key:t.trim(),value:String(o).trim()}})).filter((e=>{let{key:t,value:o}=e;return t&&o})).forEach((e=>{let{key:t,value:o}=e;x[t]=o}));const T={headers:x};if("failed"===(await v().callApi({eventName:"testWebhookConnection",environment:t,data:{integrationId:o.id,webhookUrl:n,webhookSecret:i||void 0,webhookCustomization:T}})).type)return h().UW(p().Z.formatMessage(y.webhookUrlError)),{error:{success:!1}};const{serverCommitResult:M}=b().createAndCommit({userAction:"webhookActions.createWebhookSubscription",environment:t,canUndo:!0,perform:p=>{p.postSubmitCallbacks=[w];const f=Date.now(),v=C.id;if(e.webhookSubscriptionId){const e=m().default.state.currentSpaceStore,r=S&&e?g().n4.createChildStore(e,{id:S,table:l().bf,spaceId:e.id}):void 0;if(r){const e=r.getWebhookUrl()!==n,a=r.getWebhookSecret()!==i,s=!c().Xy(r.getWebhookCustomization(),T);(e||a||s)&&(d().AS(t,{integration_id:o.id,has_updated_webhook_url:e||void 0,has_updated_webhook_secret:a||void 0}),_().sW({transaction:p,data:{webhook_url:n,webhook_secret:i,webhook_customization:T,health:{status:"active"}},store:r}))}}else{const e=(0,u().TS)({environment:t,table:a().cZ,spaceId:v});_().ae({environment:t,table:a().cZ,value:{id:e,space_id:v,parent_id:C.id,parent_table:"space",type:"external",alive:!0,name:o.getName(),icon:o.getInfo().icon,integration_id:o.id,capabilities:o.getCapabilities(),created_at:f,last_edited_at:f,last_edited_by_id:I.id,created_by_id:I.id,created_by_table:s().KJ,last_edited_by_table:s().KJ},inMemoryRecordCache:C.inMemoryRecordCache,transaction:p}),_().ae({environment:t,table:l().bf,value:{id:(0,u().TS)({environment:t,spaceId:v,table:l().bf}),bot_id:e,space_id:v,parent_id:C.id,api_version:r,webhook_url:n,webhook_secret:i,webhook_customization:T,parent_table:"space",last_edited_time:f,last_edited_by_id:I.id,created_by_id:I.id,created_time:f,created_by_table:s().KJ,last_edited_by_table:s().KJ,health:{status:"active"}},inMemoryRecordCache:C.inMemoryRecordCache,transaction:p}),d().eR(t,{integration_id:o.id,configuration_type:"manual",bot_id:e})}}});return await M,k(),{value:{success:!0}}}async function w(e){const t=f().default.checkGate({gateName:"webhooks_beta"}),{environment:o,spaceId:i}=e;if(!o.currentUser.isLoggedIn()||!t)return{webhookSubscriptionIds:[],recordMap:{__version__:3}};const r=await v().callApi({eventName:"getWebhookSubscriptions",environment:o,data:{spaceId:i},headers:(0,n().Bb)({cellId:void 0,spaceId:i})});if("failed"===r.type)throw r.error;return r.data}},626788:(e,t,o)=>{o.d(t,{Cq:()=>F,Y:()=>U,Zi:()=>D});o(667294);var n=()=>o(926724),i=()=>o(156642),r=()=>o(956057),a=()=>o(933868),s=()=>o(396136),l=()=>o(752778),c=()=>o(139978),d=()=>o(955620),u=()=>o(625230),p=()=>o(342792),m=()=>o(543172),f=()=>o(932753),g=()=>o(312446),v=()=>o(594546),h=()=>o(718959),_=()=>o(270315),b=()=>o(487270),y=()=>o(527278),S=()=>o(832924),w=()=>o(90065),k=()=>o(749826),I=()=>o(826955),C=()=>o(584989),x=()=>o(308186),T=()=>o(636340),M=()=>o(102182),P=()=>o(970105),A=()=>o(269299),R=()=>o(28063),B=()=>o(536381),E=o(785893);const D=(0,o(788860).vU)({home:{id:"wikiActions.collectionView.home",defaultMessage:"Home"},allPages:{id:"wikiActions.collectionView.allPages",defaultMessage:"All pages"},pagesIOwn:{id:"wikiActions.collectionView.pagesIOwn",defaultMessage:"Pages I own"},pagePropertyName:{id:"wikiActions.collectionView.pagePropertyName",defaultMessage:"Page"},ownerPropertyName:{id:"wikiActions.collectionView.ownerPropertyName",defaultMessage:"Owner"},tagsPropertyName:{id:"wikiActions.collectionView.tagsPropertyName",defaultMessage:"Tags"},tagsDesignValue:{id:"wikiActions.collectionView.tagsDesignValue",defaultMessage:"Design"},tagsOnboardingValue:{id:"wikiActions.collectionView.tagsOnboardingValue",defaultMessage:"Onboarding"},verificationPropertyName:{id:"wikiActions.collectionView.verificationPropertyName",defaultMessage:"Verification"},undoToast:{id:"wikiActions.convertToWiki.undo.toastMessage",defaultMessage:"Turned {pageName} into a wiki"}});function U(e){const{blocks:t,transaction:o,environment:a,source:u}=e,f=r().Il(),x=t[0];if(!x||!x.isPageBlock())return;const P=x.getSpaceId(),R=(0,b().TS)({environment:a,table:l().vF,spaceId:P}),U=x.getFormat().page_icon,N=(0,m().ZP)(),V=w().EI.Owner,L=w().EI.Verification,O=(0,m().ZP)(),Z={title:{name:y().Z.formatMessage(D.pagePropertyName),type:"title"},[V]:{name:y().Z.formatMessage(D.ownerPropertyName),type:"person",default:"created_by"},[O]:{name:y().Z.formatMessage(D.tagsPropertyName),type:"multi_select",options:[{id:r().Il(),value:y().Z.formatMessage(D.tagsOnboardingValue),color:"blue"},{id:r().Il(),value:y().Z.formatMessage(D.tagsDesignValue),color:"green"}]},[N]:{name:_().SO.last_edited_time,type:"last_edited_time",date_format:"relative"}},j=[{visible:!0,property:"title",width:300},{visible:!0,property:V,width:150},{visible:!0,property:L,width:150},{visible:!0,property:O,width:150},{visible:!0,property:N,width:250}];Z[L]={name:y().Z.formatMessage(D.verificationPropertyName),type:"verification",verifier_property:V};const K={table:l().vF,id:R,spaceId:P};A().applyOperation({store:(0,I().Kv)(x,K),operation:{pointer:K,command:"set",path:[],args:{id:R,version:0,parent_table:s().iU,parent_id:x.id,space_id:P,name:x.getTitleValue(),schema:Z,cover:x.getFormat().page_cover,format:{collection_mode:{type:"page_tree",root_page_pointer:{table:s().iU,id:x.id,spaceId:P}},app_config_uri:n().GZ,property_visibility:[{property:N,visibility:"hide"},{property:O,visibility:"show"},{property:V,visibility:"show"},{property:L,visibility:"show"}],collection_page_properties:j,collection_cover_position:x.getFormat().page_cover_position},icon:U,alive:!0}},transaction:o}),T().nj({store:(0,I().Kv)(x,K),source:{id:x.id,table:s().iU,spaceId:x.getSpaceId()},fileIds:x.getFileIds(),transaction:o});const z=(0,b().TS)({environment:a,table:c().np,spaceId:P}),H=(0,b().TS)({environment:a,table:c().np,spaceId:P}),q=(0,b().TS)({environment:a,table:c().np,spaceId:P});T().sW({store:x,data:{type:i().Ti.collectionViewPage,collection_id:R,view_ids:[z,H,q]},transaction:o}),T().sW({store:x.getFormatStore(),data:{collection_pointer:K,app_config_uri:n().jh,app_uri_map:{[n().GZ]:R},app_id:f},transaction:o});const W={table:c().np,id:z,spaceId:P};A().applyOperation({store:(0,I().Kv)(x,W),operation:{pointer:W,command:"set",path:[],args:{id:z,version:0,type:"page",name:y().Z.formatMessage(D.home),parent_id:x.id,parent_table:"block",space_id:P,format:{page_pointer:{id:(0,p().Mt)(x.id),spaceId:P,table:"block"}},alive:!0}},transaction:o});const G={table:c().np,id:H,spaceId:P};A().applyOperation({store:(0,I().Kv)(x,G),operation:{pointer:G,command:"set",path:[],args:{id:H,version:0,type:"table",name:y().Z.formatMessage(D.allPages),parent_id:x.id,parent_table:"block",space_id:P,format:{table_properties:j},query2:{sort:[{property:N,direction:"descending"}]},alive:!0}},transaction:o});const $={table:c().np,id:q,spaceId:P};A().applyOperation({store:(0,I().Kv)(x,$),operation:{pointer:$,command:"set",path:[],args:{id:q,version:0,type:"table",name:y().Z.formatMessage(D.pagesIOwn),parent_id:x.id,parent_table:"block",space_id:P,format:{table_properties:j,property_filters:[{id:r().Il(),filter:{filter:{value:{type:"relative",value:"me"},operator:"person_contains"},property:V}}]},query2:{sort:[{property:N,direction:"descending"}]},alive:!0}},transaction:o});const Q=S().default.PageScroller;var Y;Q&&(null===(Y=Q.getNode())||void 0===Y||Y.scrollTo({top:0,behavior:"smooth"}));B().rm(o),function(e,t){v().K4(e,"wiki_convert",t),k().default.logEvent("wiki_convert",void 0,t)}(a,{source:u,root_page_id:x.id,collection_id:R}),function(e){const{environment:t,blocks:o}=e,n=o[0];if(!n||!n.isCollectionViewPageWithContent())return;const i=(0,d().QaF)(n.getTitleValue());C().ZP.setState({...C().ZP.state,shouldReset:!1});const r=(0,h().zj)()===n.id;M().oV({label:y().Z.formatMessage(D.undoToast,{pageName:i}),durationMs:C().JY,right:(0,E.jsx)(g().wr,{blockToOpenStore:r?void 0:n,performUndo:()=>{A().createAndCommit({userAction:"wikiActions.wikiConversionToast.undo",environment:t,canUndo:!0,perform:e=>{M().rN(),F({environment:t,blocks:o,transaction:e,source:"snackbar"})}})}})})}({environment:a,blocks:t})}function F(e){var t;const{environment:o,blocks:n,transaction:r,source:s}=e,l=n[0];if(!l||!l.isCollectionView())return void x().RL("Something went wrong");const c=l.getFormat().collection_pointer;if(!c)return void x().RL("Something went wrong");const d=I().NW.createChildStore(l,c),p=null===(t=l.getCover())||void 0===t?void 0:t.cover,m=d.getFormat().collection_cover_position,g=d.getName();R().vs({environment:o,block:l,blockType:i().Ti.page,transaction:r}),T().sW({store:l.getFormatStore(),data:{app_config_uri:null,app_uri_map:null,app_id:null,page_cover:p??null,page_cover_position:m??null},transaction:r}),P().sO({environment:o,store:l.getBlockTitleStore(),value:g,transaction:r});for(const i of l.getPermissionItems())if(a().C2(i)&&"content_only_editor"===i.role&&!a().FB(i)){const e={...i,role:"read_and_write"};A().applyOperation({store:l.getPermissionItemsStore(),operation:{pointer:l.pointer,command:"setPermissionItem",path:l.getPermissionItemsStore().path,args:e},transaction:r})}f().A9({collectionViewBlockStore:l,collectionStore:d,transaction:r}),function(e,t){v().K4(e,"wiki_undo_conversion",t),k().default.logEvent("wiki_undo_conversion",void 0,t),u().j({name:"wiki_undo_conversion",args:t})}(o,{source:s,root_page_id:l.id,collection_id:c.id})}},536381:(e,t,o)=>{o.d(t,{B1:()=>s,FO:()=>c,Rg:()=>l,nX:()=>u,rm:()=>d});var n=()=>o(630611),i=()=>o(876822),r=()=>o(269299),a=()=>o(348141);function s(){const{currentUserSettingsStore:e}=i().default.state;if(!e||!e.isReady())return;const t=e.getSettings();return t?t.wiki_onboarding_phase??"unseen":void 0}function l(e){const t=s();if(void 0===t)return;const o=n().dF.indexOf(t);if(-1!==o&&o<n().dF.length-1){const{currentUserSettingsStore:t}=i().default.state;if(!t)return;r().createAndCommit({userAction:"wikiOnboardingActions.advanceOnboardingStep",environment:e,canUndo:!0,perform:e=>{a().d2({userSettingsStore:t,transaction:e,data:{wiki_onboarding_phase:n().dF[o+1]}})}})}}function c(e){const t=s();if(void 0===t)return;const o=n().dF.indexOf(t);if(-1!==o&&o>1){const{currentUserSettingsStore:t}=i().default.state;if(!t)return;r().createAndCommit({userAction:"wikiOnboardingActions.previousOnboardingStep",environment:e,canUndo:!0,perform:e=>{a().d2({userSettingsStore:t,transaction:e,data:{wiki_onboarding_phase:n().dF[o-1]}})}})}}function d(e){const{currentUserSettingsStore:t}=i().default.state;t&&"unseen"===s()&&a().d2({userSettingsStore:t,transaction:e,data:{wiki_onboarding_phase:"home"}})}function u(e){if("complete"===s())return;const{currentUserSettingsStore:t}=i().default.state;t&&r().createAndCommit({userAction:"wikiOnboardingActions.completeOnboarding",environment:e,canUndo:!0,perform:e=>{a().d2({userSettingsStore:t,transaction:e,data:{wiki_onboarding_phase:"complete"}})},userId:t.id})}},656801:(e,t,o)=>{o.d(t,{ON:()=>g,__:()=>m,fz:()=>v,lZ:()=>_,sy:()=>f,w9:()=>h});o(821057);var n=o(667294),i=()=>o(219727),r=()=>o(142735),a=()=>o(565630),s=()=>o(630611),l=()=>o(269299),c=()=>o(348141),d=()=>o(876822),u=()=>o(95718),p=()=>o(343353);const m=o(263184).default.createValue(void 0,{name:"AiOnboardingQueuedSelectedStore"});function f(){const{currentUserSettingsStore:e}=d().default.state;if(!e||!e.isReady())return;const t=e.getSettings();return t?t.ai_assistant_tooltips_onboarding_phase??"space_for_ai":void 0}function g(e){"space_for_ai"===f()&&v(e)}function v(e){const t=f();if(void 0===t)throw new Error("Assertion failure, AI onboarding state is undefined!");const o=s().AQ.indexOf(t);if(-1===o)throw new Error(`Assertion failure, ${t} is not a valid AI onboarding state!`);if(o<s().AQ.length-1){const{currentUserSettingsStore:t}=d().default.state;if(!t)return;const n=s().AQ[o+1];l().createAndCommit({userAction:"AiOnboardingActions.advanceAIOnboardingStage",environment:e,canUndo:!0,perform:e=>{c().d2({userSettingsStore:t,transaction:e,data:{ai_assistant_tooltips_onboarding_phase:n}})},userId:t.id}),"complete"===n&&(0,p().setAssistantOnboardingPhase)(e,{phase:"complete",transactionUserAction:"AiOnboardingActions.advanceAIAssistantOnboardingPhase.fromAiTooltips",userSettingsStore:t})}}function h(e){const t=(0,i().O7)(),o=(0,r().VK)((()=>{const e=(0,u().Js)();return!!e&&e.isStreaming()}),[]),s="completionPopup"===e.type&&"results"===e.stage&&!e.loading,l="assistantCompletionPopup"===e.type&&"results"===e.stage&&!o,c=s||l,d=(0,a().D9)(c);(0,n.useEffect)((()=>{d&&!c&&"refine_ai_response"===f()&&v(t)}),[c,d,t])}function _(e){const t=(0,i().O7)(),o="results"===e.stage&&e.loading,r=(0,a().D9)(o);(0,n.useEffect)((()=>{o&&!r&&"ask_ai_anything"===f()&&v(t)}),[o,r,t])}},193348:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o(263184).default.createValue(!0,{name:"IsAiEligibleStore"})},343353:(e,t,o)=>{o.r(t),o.d(t,{getJiraAIConnectionStatusAction:()=>T,getJiraSyncControlAction:()=>M,navigateToGithubAIConnectorOnboarding:()=>k,navigateToGoogleDriveUniversalScreen:()=>S,navigateToJiraUniversalScreen:()=>w,navigateToSlackUniversalQnAOnboarding:()=>y,resetGoogleDriveQnaConnectionState:()=>C,resetSlackQnaConnectionState:()=>I,setAssistantOnboardingPhase:()=>h,setLastExposedToQnaAtToCurrentTimestamp:()=>_,setLastUsedAIWriterAtToCurrentTimestamp:()=>b,setQnaOnboardingPhase:()=>v,startJiraBulkIngestionAction:()=>P,startJiraEditFlow:()=>A,updateGoogleDriveQnAConnectionState:()=>R,updateSlackQnAConnectionState:()=>x});var n=()=>o(956057),i=()=>o(741633),r=()=>o(824462),a=()=>o(102182),s=()=>o(269299),l=()=>o(348141),c=()=>o(340531),d=()=>o(68247),u=()=>o(993261),p=()=>o(527278),m=()=>o(36560),f=()=>o(487985),g=()=>o(25694);function v(e,t){const{phase:o,transactionUserAction:n,userSettingsStore:i}=t;s().createAndCommit({environment:e,userAction:n,canUndo:!0,perform:e=>{l().d2({userSettingsStore:i,transaction:e,data:{ai_qna_intro_onboarding_phase:o}})}})}function h(e,t){const{phase:o,transactionUserAction:n,userSettingsStore:i}=t;s().createAndCommit({environment:e,userAction:n,canUndo:!0,perform:e=>{l().d2({userSettingsStore:i,transaction:e,data:{ai_assistant_onboarding_phase:o,ai_assistant_onboarding_phase_last_set_at:Date.now()}})}})}function _(e,t){const{userSettingsStore:o}=t;s().createAndCommit({environment:e,userAction:"aiQnaActions.setLastExposedToQnaAtToCurrentTimestamp",canUndo:!0,perform:e=>{l().d2({userSettingsStore:o,transaction:e,data:{last_exposed_to_ai_qna_at:Date.now()}})}})}function b(e,t){const{userSettingsStore:o}=t;s().createAndCommit({environment:e,userAction:"aiQnaActions.setLastUsedAIWriterAtToCurrentTimestamp",canUndo:!0,perform:e=>{l().d2({userSettingsStore:o,transaction:e,data:{last_used_ai_writer_at:Date.now()}})}})}function y(e){const{analyticsFrom:t}=e,o=e.sessionId??n().Il();u().slackUniversalQnAConnectionStore.setState({...u().slackUniversalQnAConnectionStore.state,currentScreen:"introduction",analyticsFrom:t,sessionId:o})}function S(e){const{screenToShow:t,analyticsFrom:o}=e,i=e.sessionId??n().Il();f().googleDriveConnectionStore.setState({...f().googleDriveConnectionStore.state,analyticsFrom:o,sessionId:i,screenToShow:t})}function w(e){const{analyticsFrom:t,screenToShow:o}=e,i=e.sessionId??n().Il();g().jiraAIConnectionStore.setState({...g().jiraAIConnectionStore.state,analyticsFrom:t,screenToShow:o,sessionId:i})}function k(e){const{analyticsFrom:t}=e,o=e.sessionId??n().Il();m().githubAIConnectorStore.setState({...m().githubAIConnectorStore.state,currentScreen:"introduction",analyticsFrom:t,sessionId:o})}async function I(e){var t;const{currentScreen:o,analyticsFrom:n}=u().slackUniversalQnAConnectionStore.state,i=u().slackUniversalQnAConnectionStore.getInitialState();u().slackUniversalQnAConnectionStore.setState({...i,analyticsFrom:n,currentScreen:o}),await x({environment:null==e?void 0:e.environment,spaceId:null==e||null===(t=e.spaceStore)||void 0===t?void 0:t.getSpaceId()})}function C(e){const{analyticsFrom:t}=f().googleDriveConnectionStore.state,o=f().googleDriveConnectionStore.getInitialState();f().googleDriveConnectionStore.setState({...o,analyticsFrom:t})}async function x(e){const{environment:t,spaceId:o}=e,n=await r().callApi({eventName:"getSlackBulkIngestionStatus",environment:t,data:{spaceId:o},headers:(0,i().Bb)({spaceId:o})});"success"===n.type&&u().slackUniversalQnAConnectionStore.setState({...u().slackUniversalQnAConnectionStore.state,...n.data,ingestionProgress:n.data.isPublicSync?n.data.ingestionProgress||1:void 0});const a=await r().callApi({eventName:"canUserQuerySlack",environment:t,data:{spaceId:o}});"success"===a.type&&u().slackUniversalQnAConnectionStore.setState({...u().slackUniversalQnAConnectionStore.state,canQuery:a.data.canQuery});const s=await r().callApi({eventName:"getConnectedAppsForUniversalQna",environment:t,data:{spaceId:o},headers:(0,i().Bb)({spaceId:o})});"success"===s.type&&(u().slackUniversalQnAConnectionStore.setState({...u().slackUniversalQnAConnectionStore.state,connectedApps:s.data.connectedApps}),d().Z.updateAppsConnectionData(s.data.appsData??[]))}async function T(e){const{environment:t,spaceId:o}=e,n=await r().callApi({eventName:"getJiraAIConnectionStatus",environment:t,data:{spaceId:o},headers:(0,i().Bb)({spaceId:o})});if("success"===n.type)return g().jiraAIConnectionStore.setState({...g().jiraAIConnectionStore.state,jiraSiteId:n.data.jiraSiteId??"",jiraSyncState:n.data.connectionState.status,jiraSyncProgress:n.data.connectionState.percentageComplete,jiraSiteUrl:n.data.jiraSiteUrl??"",isDisconnecting:"disconnecting"===n.data.connectionState.status}),n.data}async function M(e){const{environment:t,spaceId:o,jiraSiteId:n}=e,i=await r().callApi({eventName:"getSyncControlsForJiraConnector",environment:t,data:{spaceId:o,jiraSiteId:n}});if("success"===i.type)return g().jiraAIConnectionStore.setState({...g().jiraAIConnectionStore.state,syncControl:i.data.syncControl}),i}async function P(e){const{environment:t,spaceId:o,jiraSiteId:n,sessionId:i,exclusionList:s,inclusionList:l}=e,c=await r().callApi({eventName:"startJiraBulkIngestion",environment:t,data:{spaceId:o,jiraSiteId:n,sessionId:i,exclusionList:s,inclusionList:l}});if("success"===c.type)return a().oV({label:p().Z.getIntl().formatMessage({defaultMessage:"Jira sync started. This can take up to 36 hours.",id:"jira.sync.started"}),position:"bottom"}),g().jiraAIConnectionStore.setState({...g().jiraAIConnectionStore.state,jiraSyncState:"in_progress",jiraSyncProgress:1}),c;a().oV({label:p().Z.getIntl().formatMessage({defaultMessage:"Something went wrong. Please try again.",id:"jira.sync.failed"}),position:"bottom"})}async function A(e){const{environment:t,spaceId:o,jiraSiteId:n,exclusionList:i,inclusionList:s}=e,l=await r().callApi({eventName:"startJiraEditBulkIngestion",environment:t,data:{spaceId:o,jiraSiteId:n,inclusionList:s,exclusionList:i}});if("success"===l.type)return l.data.patchSuccess?(g().jiraAIConnectionStore.setState({...g().jiraAIConnectionStore.state,jiraSyncState:"editing",jiraSyncProgress:100}),a().oV({label:p().Z.getIntl().formatMessage({defaultMessage:"Project sync list updated, sync started in background.",id:"jira.edit.success"}),position:"bottom"})):a().oV({label:p().Z.getIntl().formatMessage({defaultMessage:"No changes were detected.",id:"jira.edit.noChanges"}),position:"bottom"}),l;a().oV({label:p().Z.getIntl().formatMessage({defaultMessage:"Something went wrong. Please try again.",id:"jira.edit.failed"}),position:"bottom"})}async function R(e){const{environment:t,spaceId:o}=e,n=await r().callApi({eventName:"getGoogleDriveSyncProgress",environment:t,data:{spaceId:o},headers:(0,i().Bb)({spaceId:o})});"success"===n.type&&f().googleDriveConnectionStore.setState({...f().googleDriveConnectionStore.state,initialSyncState:(0,c().pB)(n.data.status),isDisconnecting:"disconnecting"===n.data.status,isEditing:"editing"===n.data.status,syncProgress:n.data.status,syncCurrent:n.data.current,syncTotal:n.data.total,ingestionProgress:n.data.ingestionProgress})}},28185:(e,t,o)=>{o.d(t,{b:()=>l});o(670560);var n=()=>o(956057),i=()=>o(956898),r=()=>o(824462),a=()=>o(876822);function s(e){try{let{environment:t,type:o,inputs:s}=e;return async function*(e){const l=null===(e=a().default.state.currentSpaceStore)||void 0===e?void 0:e.id;if(!l)return;const c=await r().callStreamApi({eventName:"streamCascadeInference",environment:t,data:{type:o,inputs:s,spaceId:l,aiSessionId:n().Il()}});if("success"===c.type&&i().H1.is(c.data))for await(const t of c.data){if("error"===t.type)return;yield t.output}}()}catch(t){return Promise.reject(t)}}async function l(e){let{environment:t,type:o,inputs:n}=e;for await(const i of s({environment:t,type:o,inputs:n}))return i}},559155:(e,t,o)=>{o.d(t,{$_:()=>r});var n=()=>o(18281);const i={isSalesAssisted:void 0};function r(e,t){return i.isSalesAssisted??(0,n().ro)(e,t)}(0,o(100056).exposeDebugEnvironmentValue)("getAssistantOnboardingDebugInfo",(e=>()=>{const{currentUserSettingsStore:t,currentSpaceStore:n}=o(876822).default.state,i=null==t?void 0:t.getSettings();if(!i||!n)return;const{ai_qna_intro_onboarding_phase:a,ai_assistant_onboarding_phase:s,ai_assistant_onboarding_phase_last_set_at:l,ai_assistant_tooltips_onboarding_phase:c,ai_sales_assisted_extra_notification_seen_at:d,last_exposed_to_ai_qna_at:u,qna_reminders_shown_at:p}=i;return{isSalesAssisted:r(e,n.id),relevantUserSettings:{ai_qna_intro_onboarding_phase:a,ai_assistant_onboarding_phase:s,ai_assistant_tooltips_onboarding_phase:c,ai_assistant_onboarding_phase_last_set_at:l,ai_sales_assisted_extra_notification_seen_at:d,last_exposed_to_ai_qna_at:u,qna_reminders_shown_at:p}}}))},869211:(e,t,o)=>{o.r(t),o.d(t,{closeInitialPromptAndEndSession:()=>C,closeInitialPromptButContinueSession:()=>x,openHelpMeWriteGenericPopup:()=>P,retryInitialPrompt:()=>I,showInitialPromptForAIBlock:()=>T,toggleInitialPrompt:()=>M});var n=()=>o(492788),i=()=>o(499411),r=()=>o(956057),a=()=>o(696459),s=()=>o(562109),l=()=>o(824462),c=()=>o(990966),d=()=>o(934305),u=()=>o(982855),p=()=>o(191003),m=()=>o(543934),f=()=>o(876822),g=()=>o(524434),v=()=>o(379072),h=()=>o(845622),_=()=>o(749826),b=()=>o(965903),y=()=>o(127519),S=()=>o(656801),w=()=>o(644329);function k(e,t){if((0,w().Tq)(e),!("completionPopup"!==t.type&&"assistantCompletionPopup"!==t.type||"results"!==t.stage&&"initialPrompt"!==t.stage||"textSelection"!==t.context.type&&"cursor"!==t.context.type)){const e=t.context.textSelection;n().default.afterNextFlush((()=>c().setMultiSelection({multiSelection:e})))}}function I(e){h().default.invalidateLastUpdater();const{environment:t}=e,{state:o}=h().default;if("completionPopup"!==o.type||"results"!==o.stage)return;t.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(o.inMemoryRecordCache);const n={type:"completionPopup",stage:"initialPrompt",prefilledValue:"",context:o.context,aiSessionId:o.aiSessionId,from:o.from,futureRevisions:[...o.revisions,...o.futureRevisions]};h().default.setState(n)}function C(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&k(e,h().default.state),h().default.setState({type:"closed"})}function x(e){const{state:t}=h().default;k(e,t),"completionPopup"===t.type&&"initialPrompt"===t.stage&&h().default.setState({type:"closedWithContext",context:t.context,aiSessionId:t.aiSessionId,futureRevisions:t.futureRevisions}),setTimeout((()=>{"closedWithContext"===h().default.state.type&&h().default.reset()}),1)}function T(e){h().default.setState({...e,type:"completionPopup",stage:"initialPromptForAIBlock",from:"ai_block",prefilledValue:"",aiSessionId:r().Il()}),A({environment:e.environment,promptForAnalytics:e.clientPrompt})}async function M(e){const{environment:t,from:n}=e;let{context:r,prefilledValue:a,sessionId:s}=e;const{assistantDependency:c}=await Promise.resolve().then(o.bind(o,650996)),u=await c.load();if(!(await u.assistantMenuActions.closeAssistantRightHandSideMenu({environment:t})))return;let m={type:"closed"};if("closed"===h().default.state.type||"closedWithContext"===h().default.state.type){if(!r&&b().default.state.stores.length>0){const e=y().default.state;r="empty"===e.mode?(0,d().Xc)():(0,p().iG)(e.multiSelection)?(0,d().FD)():(0,d().Fu)()}r&&(a||(a=""),s||(s=(0,i().Oy)()),m=g().KR.isAssistantInWriterEnabled()?{type:"assistantCompletionPopup",stage:"initialPrompt",context:r,from:n,prefilledValue:a,sessionId:s,loading:!1,hasErrored:!1}:{type:"completionPopup",stage:"initialPrompt",context:r,from:n,prefilledValue:a,aiSessionId:s,futureRevisions:[]},f().default.state.currentSpaceStore&&l().callApi({eventName:"publishAiSession",environment:t,data:{inference_type:"writer",spaceId:f().default.state.currentSpaceStore.id,id:"assistantCompletionPopup"===m.type?s:m.aiSessionId,metadata:{from:n}}}),"spacebar"===n&&(0,S().ON)(t))}h().default.setState(m),A(e)}function P(e){const{title:t,environment:o,prefilledValue:n,from:i}=e,s=(0,d().FD)();if(!s)return;let l;if((0,a().$K)(t)){const e=t?(0,u().qB)({customPrompt:n??t,isPageEmpty:!0}):u().eL;l={promptForAnalytics:e,prefilledValue:(0,d().$W)(e)}}else l={prefilledValue:n,promptForAnalytics:void 0};M({environment:o,from:i??"page_menu",sessionId:r().Il(),context:s,...l})}function A(e){const{environment:t,promptForAnalytics:o}=e,{state:n}=h().default;if(("completionPopup"===n.type||"assistantCompletionPopup"===n.type)&&"results"!==n.stage){"initialPromptForAIBlock"===n.stage||_().default.checkGate({gateName:"mobile_assistant_prevent_clear_selection"})||c().clear({environment:t});const e="assistantCompletionPopup"===n.type?n.sessionId:n.aiSessionId,i=v().default.getSessionContext(e);s().Tl(t,{session_id:"assistantCompletionPopup"===n.type?n.sessionId:n.aiSessionId,prompt_key:(null==o?void 0:o.key)??("completionPopup"!==n.type||n.prefilledValue?"unknown":"alternative_ui_empty_input"),from:n.from,sessionContext:i}),m().xv({dismissed:!1,environment:t})}}},893796:(e,t,o)=>{o.d(t,{Gl:()=>l,JS:()=>c,QC:()=>d,gC:()=>s,kg:()=>u});o(267602),o(653476);var n=()=>o(956057),i=()=>o(348141),r=()=>o(686145);function a(e,t){return e.id===t.id}function s(e,t,o){const n=c(t).slice(),s=n.findIndex((t=>a(e,t)));-1===s?n.unshift(e):n.splice(s,1,e),(0,r().lG)(e.action,t,o),i().d2({userSettingsStore:t,transaction:o,data:{favorite_ai_actions:n}})}function l(e,t){for(const o of c(e))if((0,r().YK)(o.action,t))return o}function c(e){var t;return(null===(t=e.getModel())||void 0===t||null===(t=t.getSettings())||void 0===t?void 0:t.favorite_ai_actions)??[]}function d(e,t,o){const n=c(t).filter((t=>!a(t,e)));i().d2({userSettingsStore:t,transaction:o,data:{favorite_ai_actions:n}})}function u(e){return{id:n().Il(),name:e.promptTitle??"",action:{...e,promptTitle:void 0}}}},629513:(e,t,o)=>{o.r(t),o.d(t,{importGtmFavorite:()=>f});o(667294);var n=()=>o(788860),i=()=>o(562109),r=()=>o(308186),a=()=>o(102182),s=()=>o(269299),l=()=>o(876822),c=()=>o(893796),d=()=>o(846550),u=o(785893);function p(e){const{favorite:t,isReplacingFavorite:o}=e,i=(0,d().yK)((e=>({title:{fontWeight:700,marginBottom:"1em"},prompt:{color:e.lightTextColor,maxHeight:"5em",overflowX:"hidden",overflowY:"scroll",whiteSpace:"pre-wrap"}})),[]),r=o?(0,u.jsx)(n()._H,{defaultMessage:"Overwrite â€œ{favoriteName}â€ AI action?",id:"ai.favoriteActions.importFavorite.overwriteMessage",values:{favoriteName:t.name}}):(0,u.jsx)(n()._H,{defaultMessage:"Add â€œ{favoriteName}â€ AI action?",id:"ai.favoriteActions.importFavorite.addMessage",values:{favoriteName:t.name}}),a=(0,u.jsx)(n()._H,{defaultMessage:"â€œ{favoritePrompt}â€",id:"ai.favoriteActions.importFavorite.prompt",values:{favoritePrompt:t.action.prompt}});return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{style:i.title,children:r}),(0,u.jsx)("div",{style:i.prompt,children:a})]})}var m=()=>o(507335);async function f(e){const{environment:t}=e,o=await(0,m().cx)({environment:t,blockId:e.importArgs.blockId});"error"!==o.type?await async function(e){const{environment:t,newFavorite:o}=e,{currentUserSettingsStore:d}=l().default.state;if(!d)return;const m=(0,c().JS)(d);let f=(0,u.jsx)(n()._H,{defaultMessage:"Add AI action",id:"ai.favoriteActions.importFavorite.addAction"}),g=(0,u.jsx)(n()._H,{defaultMessage:"Cancel",id:"ai.favoriteActions.importFavorite.cancelAction"}),v=(0,u.jsx)(n()._H,{defaultMessage:"â€œ{favoriteName}â€ AI action added to your Favorites.",id:"ai.favoriteActions.importFavorite.favoriteAdded",values:{favoriteName:o.name}}),h=!1;for(const i of m)if(i.name===o.name){if(i.action.type===o.action.type&&i.action.prompt===o.action.prompt)return void a().oV({label:(0,u.jsx)(n()._H,{defaultMessage:"â€œ{favoriteName}â€ AI action is already in your Favorites.",id:"ai.favoriteActions.importFavorite.alreadyInFavorites",values:{favoriteName:o.name}})});o.id=i.id,h=!0,f=(0,u.jsx)(n()._H,{defaultMessage:"Overwrite existing AI action",id:"ai.favoriteActions.importFavorite.overwriteAction"}),g=(0,u.jsx)(n()._H,{defaultMessage:"Keep existing AI action",id:"ai.favoriteActions.importFavorite.keepExistingAction"}),v=(0,u.jsx)(n()._H,{defaultMessage:"â€œ{favoriteName}â€ AI action updated in your Favorites.",id:"ai.favoriteActions.importFavorite.favoriteUpdated",values:{favoriteName:o.name}});break}const{accept:_}=await r().gt({message:(0,u.jsx)(p,{favorite:o,isReplacingFavorite:h}),acceptLabel:f,cancelLabel:g});if(!_)return;s().createAndCommit({userAction:"favoriteActions.handleFavoriteImport",environment:t,canUndo:!0,perform(e){(0,c().gC)(o,d,e)}}),a().oV({label:v}),i().Vo(t,{type:"create_from_url",session_id:void 0,gtm_favorite_id:o.gtmFavoriteId})}({environment:t,newFavorite:o.favorite}):a().oV({label:(0,u.jsx)(n()._H,{defaultMessage:"An error occurred when loading the AI action. ({errorCode})",id:"ai.favoriteActions.importFavorite.favoriteFailedToLoad",values:{errorCode:o.code}})})}},507335:(e,t,o)=>{o.d(t,{OF:()=>g,cx:()=>_});var n=()=>o(956057),i=()=>o(741633),r=()=>o(217465),a=()=>o(955620),s=()=>o(824462),l=()=>o(749826);let c=function(e){return e[e.NoConfig=100]="NoConfig",e[e.LoadPageChunkFailed=101]="LoadPageChunkFailed",e[e.MissingPageRecord=103]="MissingPageRecord",e[e.InvalidPageParent=104]="InvalidPageParent",e[e.MissingTitle=105]="MissingTitle",e[e.MissingPromptText=106]="MissingPromptText",e[e.MissingCollectionSchema=107]="MissingCollectionSchema",e[e.MissingPromptType=108]="MissingPromptType",e[e.InvalidPromptType=109]="InvalidPromptType",e[e.FavoritesDisabled=110]="FavoritesDisabled",e}({});const d="Prompt type",u="Prompt text",p="Run immediately",m="Help me write",f="Help me edit";function g(){{const e=l().default.getConfigKey("gtm_ai_favorites","space_id"),t=l().default.getConfigKey("gtm_ai_favorites","collection_id");if(e&&t)return{spaceId:e,collectionId:t}}}function v(e,t,o){const n=function(e,t,o){for(const i in e){const r=e[i];var n;if(r&&r.name===o)return null===(n=t.properties)||void 0===n?void 0:n[i]}}(e,t,o);if(n)return(0,a().Jcv)(n)}function h(e){return{type:"error",code:e}}async function _(e){var t;const{environment:o,blockId:_}=e;if(await l().default.waitUntilStatsigReady(),!l().default.checkGate({gateName:"ai_favorites"}))return h(c.FavoritesDisabled);const b=g();if(!b)return h(c.NoConfig);const{spaceId:y,collectionId:S}=b,w=l().default.checkGate({gateName:"load_page_chunk_multi_cell_enabled"}),k={environment:o,data:{page:{spaceId:y,id:_},limit:0,cursor:{stack:[]},verticalColumns:!1},headers:(0,i().Bb)({spaceId:y,recordId:_})},I=w?await s().loadCachedPageChunkV2(k):await s().loadCachedPageChunk(k);if("success"!==I.type)return h(c.LoadPageChunkFailed);const C=r().RecordMapWithRole.create(I.data.recordMap),x=C.getValue({table:"block",id:_,spaceId:y});if(!x)return h(c.MissingPageRecord);if(x.parent_id!==S)return h(c.InvalidPageParent);const T=(0,a().Jcv)(null===(t=x.properties)||void 0===t?void 0:t.title);if(!T)return h(c.MissingTitle);const M=await async function(e){const{environment:t,recordMap:o,blockId:n,spaceId:r,collectionId:a}=e,l=o.getValue({table:"collection",id:a,spaceId:r});if(null!=l&&l.schema)return l.schema;const c=await s().callApi({eventName:"getPublicPageData",environment:t,data:{type:"block-space",blockId:n,spaceId:r},headers:(0,i().Bb)({spaceId:r,recordId:n})});return"failed"!==c.type?c.data.collectionSchema:void 0}({environment:o,recordMap:C,blockId:_,spaceId:y,collectionId:S});if(!M)return h(c.MissingCollectionSchema);const P=v(M,x,u);if(!P)return h(c.MissingPromptText);const A=v(M,x,d);if(!A)return h(c.MissingPromptType);const R=(B=A)===f?"helpMeEdit":B===m?"helpMeWrite":void 0;var B;if(!R)return h(c.InvalidPromptType);const E=function(e,t,o){return"Yes"===v(e,t,o)}(M,x,p);return{type:"success",favorite:{id:n().Il(),name:T,executeImmediately:E,gtmFavoriteId:_,action:{type:R,prompt:P,promptTitle:void 0}}}}},644329:(e,t,o)=>{o.d(t,{$b:()=>U,B_:()=>N,Dj:()=>V,Hg:()=>B,RR:()=>P,Tq:()=>D,VZ:()=>R,bJ:()=>M,jq:()=>F,rR:()=>E,wM:()=>A,yR:()=>L});o(267602),o(653476),o(241792);var n=o(667294),i=()=>o(219727),r=()=>o(142735),a=()=>o(846550),s=()=>o(998411),l=()=>o(565630),c=()=>o(375255),d=()=>o(255393),u=()=>o(696459),p=()=>o(959137),m=()=>o(454393),f=()=>o(68247),g=()=>o(141735),v=()=>o(921995),h=()=>o(562402),_=()=>o(527278),b=()=>o(505462),y=()=>o(333264),S=()=>o(876822),w=()=>o(524434),k=()=>o(72041),I=()=>o(855249),C=()=>o(965014),x=()=>o(897257),T=()=>o(559155);function M(){const e=(0,i().O7)(),t=(0,r().VK)((()=>e.device.isPhone),[e]);return(0,a().yK)((e=>{const o="dark"===e.mode?e.accentColors.purple[900]:e.accentColors.purple[400];return{purpleButton:{padding:4,fontWeight:600,color:o},keyboardShortcut:{textTransform:"uppercase",fontWeight:500,fontSize:11,marginLeft:6,color:e.lightTextColor,display:t?"none":void 0},lightweightButton:{display:"flex",alignItems:"baseline",justifyContent:"center",fontSize:14,padding:"5px 8px",borderRadius:6,color:e.mediumTextColor,height:32,marginTop:2},returnIndicatorIconStyles:{width:14,height:14,paddingLeft:4,fill:e.lightIconColor},keyboardShortcutInverted:{color:e.mediumInvertedTextColor,paddingLeft:4},writingLabel:{flex:1,color:o,fontWeight:500,flexDirection:"row",gap:6,display:"flex",alignItems:"center"},inputActions:{height:36,display:"flex",alignSelf:"flex-end",alignItems:"center"},loadingDots:{backgroundColor:o}}}),[t])}function P(e){if("completionPopup"===e.type||"assistantCompletionPopup"===e.type)return e}function A(e){return"assistantCompletionPopup"===e.type}function R(e){return"initialPromptForAIBlock"===e.stage?"aiBlock":e.context.type}function B(e){var t;const{environment:o,spaceId:n,openedFrom:i,from:r,connectorTriggeringUpsell:a}=e,s=(null===(t=x().subscriptionDataStoreInstance.state)||void 0===t?void 0:t.addOns)??[];if(!(0,d().de)(s)){return(0,T().$_)(o,n)?m().r$({openedFrom:i,currentTab:"plans"}):(C().y(o,{from:r,upsell:{type:"product",product:"ai",limit:{type:"none"}}}),f().Z.setState({...f().Z.state,connectorTriggeringUpsell:a,upsellTriggeredAt:Date.now()})),!1}return!0}function E(e){return"initialPromptForAIBlock"===e.stage?"write":function(e){switch(e.type){case"cursor":return"write";case"blockSelection":case"textSelection":return"edit"}}(e.context)}function D(e){b().clear(e)}function U(e){if("initialPromptForAIBlock"===e.stage){const t=e.originRef.current;if(!t)return;return{origin:t.getBoundingClientRect(),scrollerStore:V(e.store.getRecordStoreUIRoot())}}return{origin:e.context.origin,scrollerStore:e.context.scrollerStore}}function F(e){const{areWeLoading:t,scrollerStore:o,resetWhenScrolledToBottom:i}=e,a=(0,l().D9)(t);(0,n.useEffect)((()=>{t!==a&&c(!1)}),[t,a]);const[s,c]=(0,n.useState)(!1),d=(0,r().VK)((()=>(null==o?void 0:o.state.elementRef)??{current:null}),[o]),u=(0,y().j)(d),p=(0,y().Lw)(d),m=(0,y().$0)(d),f=(0,l().D9)(u),g=p-m;return(0,n.useEffect)((()=>{void 0!==f&&void 0!==u&&f-u>1&&c(!0)}),[u,f]),(0,n.useEffect)((()=>{i&&void 0!==u&&void 0!==g&&Math.abs(u-g)<1&&c(!1)}),[g,u,i]),s}function N(e){const{scrollerRef:t,areWeLoading:o,unpauseAfterMs:i}=e,[a,s,l]=function(e){const t=(0,n.useRef)(e),[o,i]=(0,n.useReducer)(((e,o)=>{const n=o instanceof Function?o(e):o;return t.current=n,n}),e);return[o,t,i]}(!1),c=(0,n.useRef)(void 0),d=(0,r().VK)((()=>w().KR.disableWriterAutoFollow()),[]);return(0,n.useEffect)((()=>{const e=t.current;if(e&&!d){if(o){let t;const o=()=>{!1!==i&&(t&&window.clearTimeout(t),t=void 0)},n=()=>{if(!1===i)return;o();const e=c.current;e&&(t=window.setTimeout((()=>{e===c.current&&(c.current=void 0),l(!1)}),Math.max(0,i-(Date.now()-e))))};s.current&&n();const r=e=>{Math.abs(e.deltaY)>0&&0===e.deltaX&&(l(!0),c.current=Date.now(),n())};return e.addEventListener("wheel",r),()=>{o(),e.removeEventListener("wheel",r)}}c.current=void 0,l(!1)}}),[o,t,s,l,i,d]),d||a}function V(e){return e===S().default.state.mainEditorCurrentBlockStore?k().Z:I().Z}async function L(e,t){const o=_().Z.getIntl(),n=(0,c().Xh)({intl:o,textValue:t.getBlockTitleStore().getValue(),getRecordModel:t.getRecordModel,userTimeZone:(0,s().r)()}),i=t.getRenderableContentStores().map((e=>e.getValue())).filter(u().$K),r=await p().F.clipboardActions.load(),a=await g().F.formulas.load();return{title:n,content:[r.serializePagePropertiesAsText({rootBlock:{...t.pointer,spaceId:t.getSpaceId()},getRecordValue:t.getRecordValue}),(0,v().X4)({rootBlock:{...t.pointer,spaceId:t.getSpaceId()},getRecordValue:t.getRecordValue,blockValues:i,isWindows:e.device.isWindows,markdownSerializationOptions:(0,h().KF)(),markdownLinkifyIt:void 0,formulasModule:a}).markdown].filter(u().$K).join("\n\n")}}},106502:(e,t,o)=>{o.d(t,{GC:()=>r,aiDependency:()=>i,oF:()=>s,vK:()=>a});var n=()=>o(677559);const i=new(n().Ss)("ai",(()=>Promise.all([o.e(62743),o.e(52774),o.e(44832),o.e(90698),o.e(84885),o.e(37358),o.e(5242),o.e(7312),o.e(90424),o.e(81580),o.e(84325),o.e(31189),o.e(69343),o.e(46293),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(46616),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63707),o.e(86609),o.e(91253),o.e(4642),o.e(5006),o.e(6612),o.e(61171),o.e(23179),o.e(75377),o.e(31020),o.e(2942),o.e(73682),o.e(58591),o.e(54803),o.e(1953),o.e(10216),o.e(58565),o.e(69197),o.e(42055),o.e(38739),o.e(44751),o.e(81567),o.e(63257),o.e(34291),o.e(1913),o.e(56054),o.e(95076),o.e(82658),o.e(45741)]).then(o.bind(o,529318)))),r=(0,n().kF)(i,(e=>e.CompletionPopup)),a=(0,n().kF)(i,(e=>e.PopupPositionerLocater)),s=(0,n().kF)(i,(e=>e.AiEligibilityUpdater))},686145:(e,t,o)=>{o.d(t,{BG:()=>c,Nv:()=>a,TE:()=>u,YK:()=>r,lG:()=>l,pz:()=>s});o(267602),o(653476);var n=()=>o(348141);const i=100;function r(e,t){return e.prompt===t.prompt&&e.type===t.type}function a(e,t,o){const a=s(t).filter((t=>!r(t,e)));n().d2({userSettingsStore:t,transaction:o,data:{recent_ai_actions:[e,...a].slice(0,i)}})}function s(e){var t;return(null===(t=e.getModel())||void 0===t||null===(t=t.getSettings())||void 0===t?void 0:t.recent_ai_actions)??[]}function l(e,t,o){const i=s(t),a=i.filter((t=>!r(t,e)));i.length!==a.length&&n().d2({userSettingsStore:t,transaction:o,data:{recent_ai_actions:a}})}function c(e){const{clientPrompt:t,additionalContext:o,promptTitle:n}=e,i=null==o?void 0:o.prompt;if(("helpMeWrite"===t.key||"helpMeEdit"===t.key||"helpMeDraft"===t.key)&&i)return{type:"helpMeDraft"===t.key?"helpMeWrite":t.key,prompt:i,promptTitle:n};const r=function(e,t){if(!u(e.key))return;return null==t?void 0:t.topic}(t,o);return r?{type:"helpMeWrite",prompt:r,promptTitle:n}:void 0}const d={brainstormIdeas:!0,blogPost:!0,outline:!0,socialMediaPost:!0,pressRelease:!0,creativeStory:!0,essay:!0,poem:!0,todoList:!0,meetingAgenda:!0,prosConsList:!0,jobDescription:!0,salesEmail:!0,recruitingEmail:!0};function u(e){return d[e]}},595380:(e,t,o)=>{let n;function i(e){n=e}function r(){return n}o.d(t,{$:()=>i,K:()=>r})},166569:(e,t,o)=>{o.d(t,{M:()=>r,Z:()=>i});var n=o(667294);function i(){(0,n.useEffect)((()=>{r()}),[])}const r=o(513670).IH((async function(){const e=await o(954344).F.load();o(338530).Z.setState((0,o(659278).Lq)(e))}))},517670:(e,t,o)=>{o.d(t,{M:()=>r,Z:()=>s});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624);var n=o(667294),i=()=>o(219727);const r=new Set;function a(){for(const e of r)e()}function s(){const e=(0,i().Fy)();(0,n.useEffect)((()=>{if(e.isMobile)return document.addEventListener("scroll",a,!0),()=>{document.removeEventListener("scroll",a,!0)}}),[e.isMobile])}},145990:(e,t,o)=>{o.d(t,{IL:()=>s,ZP:()=>l});var n=o(667294),i=()=>o(219727),r=()=>o(395861),a=()=>o(154057);let s={x:0,y:0,moved:!1,device:"mouse"};function l(){const e=(0,i().O7)();(0,n.useEffect)((()=>(e.device.isMobile?(window.addEventListener("touchstart",c),window.addEventListener("touchmove",d),window.addEventListener("mousedown",u),window.addEventListener("mousemove",p)):(window.addEventListener("mousedown",u),window.addEventListener("mousemove",p)),()=>{e.device.isMobile?(window.removeEventListener("touchstart",c),window.removeEventListener("touchmove",d),window.removeEventListener("mousedown",u),window.removeEventListener("mousemove",p)):(window.removeEventListener("mousedown",u),window.removeEventListener("mousemove",p))})),[e.device.isMobile])}function c(e){const t=e.touches[0];s={moved:!1,x:t.clientX,y:t.clientY,device:(0,a().Nf)(t)}}function d(e){const{x:t,y:o}=s,n=e.touches[0];(0,r().Z)(t,o,n.clientX,n.clientY)>a().Vc[(0,a().Nf)(n)]&&(s={...s,moved:!0})}function u(e){s={moved:!1,x:e.clientX,y:e.clientY,device:"mouse"}}function p(e){const{x:t,y:o}=s;(0,r().Z)(t,o,e.clientX,e.clientY)>a().Vc.mouse&&(s={...s,moved:!0})}},360746:(e,t,o)=>{o.d(t,{Q7:()=>q,NN:()=>H,vD:()=>j,w0:()=>W,RQ:()=>K});o(821057),o(670560),o(267602),o(653476),o(470928),o(30005),o(241792);var n=o(667294),i=()=>o(926724),r=()=>o(197874),a=()=>o(714230),s=()=>o(766933),l=()=>o(956057),c=()=>o(396136),d=()=>o(255933),u=()=>o(306164),p=()=>o(788860),m=()=>o(568017),f=()=>o(513670),g=()=>o(696459),v=()=>o(707513),h=()=>o(250303),_=()=>o(824462),b=()=>o(984871),y=()=>o(308186),S=()=>o(421654),w=()=>o(142735),k=()=>o(846550),I=()=>o(716025),C=()=>o(378907),x=o(785893);function T(e){const{relatedDependencies:t}=e,o=(0,k().Fg)(),i=(0,w().VK)((()=>{const e=null==t?void 0:t.viewDeps;return e?e.map((e=>({name:e.getName(),icon:e.getFormat().collection_view_icon,type:e.getType()}))):[]}),[t.viewDeps]),r=n.useCallback((e=>(0,x.jsxs)("span",{style:{marginRight:10,display:"inline-block"},children:[(0,x.jsx)(I().F,{color:"light",viewIcon:e.icon,viewType:e.type,style:{display:"inline-block",verticalAlign:"middle",marginRight:2,marginBottom:2},size:13}),e.name]},e.name)),[]),a=[{key:"entity_type",header:void 0},{key:"entities",header:void 0}];return(0,x.jsx)(C().Z,{columns:a,rows:(()=>{const e=[],n=null==t?void 0:t.propertyDeps;if(n.length>0){const t=n.map((e=>(0,x.jsxs)("span",{style:{marginRight:10,display:"inline-block"},children:[(0,x.jsx)(s().ZP,{icon:e.icon,type:e.type,size:13,style:{display:"inline-block",verticalAlign:"middle",marginRight:2,marginBottom:2},theme:o}),e.name]},e.name))),i=(0,x.jsx)(p()._H,{id:"appTemplates.featureBundleDelete.properties",defaultMessage:"{count, plural, one {1 property} other {{count} properties}}",values:{count:t.length}});e.push({key:"bundledProperties",columns:[[i],t]})}if(i.length>0){const t=i.map((e=>r(e))),o=(0,x.jsx)(p()._H,{id:"appTemplates.featureBundleDelete.views",defaultMessage:"{count, plural, one {1 view} other {{count} views}}",values:{count:t.length}});e.push({key:"bundledViews",columns:[[o],t]})}return e})(),hideHeader:!0,cellStyle:{width:"40%"}})}var M=()=>o(384241),P=()=>o(544903),A=()=>o(141735),R=()=>o(473244),B=()=>o(478824),E=()=>o(527278),D=()=>o(522919),U=()=>o(802600),F=()=>o(739479),N=()=>o(32969),V=()=>o(109083),L=()=>o(826955),O=()=>o(110232);const Z=(0,p().vU)({multiDBNameConnector:{id:"appTemplateHelpers.multiDBNameConnector",defaultMessage:"and"}});function j(e){const{environment:t,collectionViewBlockStore:o,collectionStore:n,databaseType:a,propertyMapping:s,typedPropertySchemas:c,transaction:d}=e;if(n.isTypedCollection())throw new Error("Collection is already typed");const u=i().LI[a].blockUri,p=a,m={};Object.entries(s).forEach((e=>{let[o,i]=e;if(!i||i===r().bK)return;const a=c[o],s=n.getSchema()[i];if(!s)throw new Error("Mapped property does not exist");a&&a.type!==s.type&&(b().LC({environment:t,collectionStore:n,property:i,type:a.type,transaction:d}),m[i]=s.type)}));const f=Object.entries(s).filter((e=>{let[t,o]=e;return o===r().bK})).map((e=>{let[t,o]=e;return t})),g={};f.forEach((e=>{const t=c[e];t&&(g[e]=t)})),Object.entries(g).forEach((e=>{let[o,i]=e;const r=b().G3({environment:t,collectionStore:n,collectionViewArgs:void 0,propertyName:i.name,propertyType:i.type,transaction:d});s[o]=r})),S().FH({stores:[o],update:{app_id:l().Il(),app_config_uri:u,app_uri_map:{[u]:o.id,[p]:n.id}},transaction:d}),S().FH({stores:[n],update:{app_config_uri:p,app_uri_map:s,mapped_property_types:m},transaction:d})}function K(e){var t;const{environment:o,collectionContextStore:n,transaction:i}=e,r=n.collectionStore(),a=n.collectionViewBlockStore();if(!r||!a)return;const s=(null===(t=r.getFormat())||void 0===t?void 0:t.mapped_property_types)??{};Object.entries(s).forEach((e=>{let[t,n]=e;b().LC({environment:o,collectionStore:r,property:t,type:n,transaction:i})})),S().FH({stores:[a],update:{app_id:void 0,app_config_uri:void 0,app_uri_map:void 0},transaction:i}),S().FH({stores:[r],update:{app_config_uri:void 0,app_uri_map:void 0,mapped_property_types:void 0},transaction:i}),h().g2({environment:o,database_type:void 0,collectionContextStore:n})}async function z(e){const{environment:t,blockStore:o}=e,n=o.getFormat().app_id;if(!n)return[o];const i=await _().callApi({eventName:"getCollectionViewBlocksByAppId",environment:t,data:{spaceId:o.getSpaceId(),appId:n}}),r=o.getParentStore();return"success"!==i.type||void 0===r?[o]:i.data.result.map((e=>L().G.createChildStore(r,{table:c().iU,id:e.blockId,spaceId:o.getSpaceId()})))}async function H(e){const{environment:t,block:o,action:n}=e,r=o.getFormat().app_config_uri||"";if(r===i().NB&&(B().y.locallyMutatedTasksDatabase=!0),O().rC.includes(r)){const e=await async function(e){const{environment:t,blockStore:o}=e,n=o.getParentStore();if(!n)return[o];const i=await z({environment:t,blockStore:o}),r=n.id;return i.filter((e=>{var t;return(null===(t=e.getParentStore())||void 0===t?void 0:t.id)===r}))}({environment:t,blockStore:o});if(e.length<=1)return[o];const i=function(e,t,o){if("delete"===e)return{message:(0,x.jsx)(p()._H,{id:"appTemplateHelpers.multiDBDeleteAlert.message",defaultMessage:"Are you sure you want to delete {dbName}?",values:{dbName:t.getTitleValue()}}),description:(0,x.jsx)(p()._H,{id:"appTemplateHelpers.multiDBDeleteAlert.description",defaultMessage:"{appName} work closely together. You can delete them together, or you might encounter issues after deletion.",values:{appName:o}}),allLabel:(0,x.jsx)("div",{style:{maxWidth:"300",textOverflow:"ellipsis",overflowX:"hidden"},children:(0,x.jsx)(p()._H,{id:"appTemplateHelpers.multiDBDeleteAlert.allLabel",defaultMessage:"Delete {appName}",values:{appName:o}})}),cancelLabel:(0,x.jsx)(p()._H,{id:"appTemplateHelpers.multiDBDeleteAlert.cancelLabel",defaultMessage:"Cancel"}),oneLabel:(0,x.jsx)("div",{style:{maxWidth:"300",textOverflow:"ellipsis",overflowX:"hidden"},children:(0,x.jsx)(p()._H,{id:"appTemplateHelpers.multiDBDeleteAlert.oneLabel",defaultMessage:"Delete {dbName} only",values:{dbName:t.getTitleValue()}})}),actionIcon:F().y};if("move"===e)return{message:(0,x.jsx)(p()._H,{id:"appTemplateHelpers.multiDBMoveAlert.message",defaultMessage:"Are you sure you want to move {dbName}?",values:{dbName:t.getTitleValue()}}),description:(0,x.jsx)(p()._H,{id:"appTemplateHelpers.multiDBMoveAlert.description",defaultMessage:"{appName} work closely together. You can move them together, or you might encounter issues after separating.",values:{appName:o}}),allLabel:(0,x.jsx)(p()._H,{id:"appTemplateHelpers.multiDBMoveAlert.allLabel",defaultMessage:"Move together"}),cancelLabel:(0,x.jsx)(p()._H,{id:"appTemplateHelpers.multiDBMoveAlert.cancelLabel",defaultMessage:"Cancel"}),oneLabel:(0,x.jsx)(p()._H,{id:"appTemplateHelpers.multiDBMoveAlert.oneLabel",defaultMessage:"Only move {dbName}",values:{dbName:t.getTitleValue()}}),actionIcon:D().n};if("duplicate"===e)return{message:(0,x.jsx)(p()._H,{id:"appTemplateHelpers.multiDBDuplicateAlert.message",defaultMessage:"Are you sure you want to duplicate {dbName}?",values:{dbName:t.getTitleValue()}}),description:(0,x.jsx)(p()._H,{id:"appTemplateHelpers.multiDBDuplicateAlert.description",defaultMessage:"{appName} work closely together. You can duplicate them together, or you might encounter issues after separating.",values:{appName:o}}),allLabel:(0,x.jsx)(p()._H,{id:"appTemplateHelpers.multiDBDuplicateAlert.allLabel",defaultMessage:"Duplicate together"}),cancelLabel:(0,x.jsx)(p()._H,{id:"appTemplateHelpers.multiDBDuplicateAlert.cancelLabel",defaultMessage:"Cancel"}),oneLabel:(0,x.jsx)(p()._H,{id:"appTemplateHelpers.multiDBDuplicateAlert.oneLabel",defaultMessage:"Only duplicate {dbName}",values:{dbName:t.getTitleValue()}}),actionIcon:U().a};throw(0,g().t1)(e)}(n,o,function(e){if(1===e.length)return e[0].getTitleValue().toString();let t="";for(let o=0;o<e.length-1;o++)t+=e[o].getTitleValue(),e.length>2?t+=", ":t+=" ";return t+=`${E().Z.formatMessage(Z.multiDBNameConnector)} ${e[e.length-1].getTitleValue()}`,t}(e)),r=await function(e,t){const{message:o,description:n,allLabel:i,cancelLabel:r,oneLabel:s,actionIcon:l}=e;return new Promise((e=>{y().vC({showCancel:!1,keepFocus:!1,message:(0,x.jsxs)("div",{style:{textAlign:"center"},children:[(0,x.jsxs)("span",{style:{display:"inline-block",verticalAlign:"-0.15em",position:"relative"},children:[(0,x.jsx)("img",{src:a().Z.images.appPackages.projectsIconSvg,style:{width:"1.4em",height:"1.4em"}}),l({width:"0.9em",height:"0.9em",position:"absolute",fill:m().O9.red,right:"-0.3em",bottom:"0.05em"})]}),(0,x.jsx)("div",{style:{fontWeight:v().Ue.semibold,margin:"0.7em"},children:o}),(0,x.jsx)("div",{style:{fontSize:14},children:n})]}),items:"delete"===t?[{label:s,color:"red",onAccept:()=>{e("one")}},{label:i,onAccept:()=>{e("all")}},{label:r,onAccept:()=>{e("cancel")}}]:[{label:i,color:"blue",onAccept:()=>{e("all")}},{label:s,onAccept:()=>{e("one")}},{label:r,onAccept:()=>{e("cancel")}}],handleCancel:()=>{e("cancel")}})}))}(i,n);if("cancel"===r)return"user_canceled";const s=[o];if("all"===r)for(const t of e)if(t.id!==o.id){const e=N().C.findSelectablesFromIds([t.id]);e.length>0?s.push(e[0].props.store):s.push(t)}return s}return[o]}async function q(e){var t;const{environment:o,collectionViewBlockStore:n,appParentStore:i}=e,r=n.getFormat().app_id,a=r?await _().callApi({eventName:"getCollectionViewBlocksByAppId",environment:o,data:{spaceId:n.getSpaceId(),appId:r}}):void 0,s=null===(t=V().Z.state.caches[R().he])||void 0===t?void 0:t.inMemoryRecordCache;return(0,g().$K)(null==a?void 0:a.type)&&"failed"!==(null==a?void 0:a.type)&&"success"===(null==a?void 0:a.type)?a.data.result.map((e=>{const t=L().G.createChildStore(i,{table:c().iU,id:e.blockId,spaceId:n.getSpaceId()});return s?t.clone(s):t})).filter((e=>e.isType("collection_view")||e.isType("collection_view_page"))):[n]}async function W(e){var t;let{environment:o,property:n,collectionContextStore:i,theme:r,from:a}=e;const{appTemplatesSetupActions:l,appConfigs:m}=await P().vF.load(),g=i.collectionStore(),h=i.collectionViewBlockStore(),_=null==h?void 0:h.getCollectionViewStores();if(!(g&&h&&_&&h.getFormat().app_config_uri))return!1;const b=g.getSchema()[n],S=g.getFormat().app_config_uri;if(!b||!S)return!1;const w=(0,O().YB)(m(),S);if(!w)return!1;const k=f().oA([...Object.keys(g.getPropertyMapping()||{}),...Object.keys((null===(t=h.getFormat())||void 0===t?void 0:t.app_uri_map)||{})]),I=(0,O().cn)(k,w),C=f().oA([I.find((e=>e.uri===n))]),R=await A().F.formulas.load(),B=(0,O().Af)({validDependencies:C,dependencies:I,collectionStore:g,collectionViewBlockStore:h,viewStores:_,formulasModule:R}),{validDependencies:E}=B;if(0===E.length)return!1;const D=null==h?void 0:h.getParentStore();if(!g||!h||!D||D.table!==d().bx&&D.table!==c().iU&&D.table!==u().e0)return!1;const U=await q({environment:o,collectionViewBlockStore:h,appParentStore:D}),F=[{label:(0,x.jsx)(p()._H,{id:"appTemplatesHelpers.bundledPropertyDelete.deleteMessage",defaultMessage:"{count, plural, one {Delete} other {Delete all}}",values:{count:E.length}}),color:"red",onAccept:()=>l.removeTypedDependencies({environment:o,dependencies:E,appCollectionViewBlockStores:U,from:a})}],N=E.length>1&&(0,x.jsx)(T,{relatedDependencies:B,collectionContextStore:i});return y().vC({message:(0,x.jsxs)("div",{style:{textAlign:"center"},children:[(0,x.jsx)("span",{style:{fontWeight:v().Ue.medium},children:(0,x.jsx)(p()._H,{id:"appTemplateHelpers.bundledPropertyDelete.message",defaultMessage:"Delete {property} property for everyone on {databaseName}?",values:{databaseName:(0,x.jsx)(M().Z,{style:{display:"inline",fontWeight:v().Ue.medium},shouldWrap:!0,store:g}),property:(0,x.jsxs)("span",{children:[(0,x.jsx)(s().ZP,{icon:b.icon,type:b.type,size:18,style:{verticalAlign:"middle",display:"inline-block",marginRight:3,marginBottom:2},theme:r}),b.name]})}})}),E.length>1&&(0,x.jsx)("div",{style:{margin:"0.17em"},children:(0,x.jsx)("span",{style:{fontSize:13,fontWeight:v().Ue.light},children:(0,x.jsx)(p()._H,{id:"appTemplateHelpers.bundledPropertyDelete.description",defaultMessage:"These related entities will also be deleted since they work together."})})})]}),description:N,showCancel:!0,keepFocus:!0,innerStyle:{width:480},items:F}),!0}},110232:(e,t,o)=>{o.d(t,{$L:()=>U,Af:()=>X,Au:()=>E,BQ:()=>C,Dl:()=>I,EE:()=>Z,EU:()=>x,Ep:()=>D,FQ:()=>Q,Hw:()=>O,JN:()=>N,KC:()=>k,Mi:()=>A,R8:()=>j,RN:()=>q,Th:()=>te,Wo:()=>y,YB:()=>w,cR:()=>L,ck:()=>M,cn:()=>F,fm:()=>B,h7:()=>V,hZ:()=>Y,iX:()=>S,kB:()=>G,os:()=>P,rC:()=>J,rm:()=>ee,tX:()=>K});o(821057),o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(916054),o(653476),o(470928),o(749411),o(30005),o(241792),o(228244);var n=()=>o(926724),i=()=>o(474094),r=()=>o(197874),a=()=>o(455947),s=()=>o(570270),l=()=>o(874459),c=()=>o(235484),d=()=>o(998411),u=()=>o(605974),p=()=>o(85073),m=()=>o(496205),f=()=>o(513670),g=()=>o(696459),v=()=>o(521045),h=()=>o(90065),_=()=>o(749826),b=()=>o(138912);function y(e,t){return e.find((e=>e.uri===t))}function S(e,t){return e.find((e=>e.presets.some((e=>e.uri===t))))}function w(e,t){if(!t)return;return e.find((e=>e.allFeatures.find((e=>{if(C(e))for(const o of e.dependencies)if("collection"===o.type&&o.uri===t)return!0}))))}function k(e,t){const o=S(e,t.uri);if(!o)return[];return[...t.requiredFeatures,...t.defaultOnFeatures].filter((e=>{const t=o.allFeatures.find((t=>t.uri===e.featureUri));if(!t)return!1;const{type:n}=e;return"simple"===n?"dependencies"in t:"with_variant"===n?"variants"in t:void(0,g().t1)(n)}))}function I(e){return"variants"in e&&(0,r().dD)(e.collectionUri)}function C(e){return"dependencies"in e&&(0,r().dD)(e.collectionUri)}function x(e){return"dependencies"in e&&(0,r().Tx)(e.collectionUri)}const T=[i().k.Owner,m().EI.Owner];function M(e,t){const o=w(e,t);if(o)for(const n of o.allFeatures)if(C(n)){const e=n.dependencies.find((e=>"collection"===e.type&&e.uri===t));if(e)return e.value.schema??{}}}function P(e){let{featurePointers:t,appConfig:o}=e;const n=f().oA(t.map((e=>{const{type:t}=e;return"simple"===t?e.featureUri:"with_variant"===t?e.defaultVariantUri:void(0,g().t1)(t)}))),i={};for(const s of o.allFeatures)i[s.uri]=s;const r=n.map((e=>i[e])).filter((e=>C(e))),a={};for(const s of r)for(const e of s.dependencies)a[e.uri]=e;return Object.values(a)}function A(e){return e.endsWith(n().WN)}const R={[n().Es.Status]:["status","checkbox","select"]};function B(e,t,o){const n=t.type,i=e in R?R[e]:[n];return Object.entries(o).filter((e=>{let[t,o]=e;if(o)return i.includes(o.type)}))}function E(e,t){const o={};for(const[n,i]of Object.entries(e)){if(!n.startsWith("notion://"))continue;if(null==i?void 0:i.type){const e=B(n,i,t);1===e.length&&(o[n]=e[0][0])}}return o}function D(e){var t,o,n,i,l,c,d,u;const{environment:p,viewDependency:m,collectionStore:f}=e,h=s().aQ.derivePropertyUris((null==f?void 0:f.getSchema())??{},null==f?void 0:f.getPropertyMapping()),_=m.optionalProperties??[],b=e=>!_.includes(e)&&!h.has(e),y=m.value;switch(y.type){case"table":case"list":case"gallery":case"timeline":if(null!==(t=y.format)&&void 0!==t&&t.collection_group_by){const e=y.format.collection_group_by.property;if(!(0,r().Pf)(e)||b(e))return!1}if(null!==(o=y.query2)&&void 0!==o&&o.timeline_by){const e=y.query2.timeline_by;if(!(0,r().Pf)(e)||b(e))return!1}break;case"board":if(null!==(n=y.format)&&void 0!==n&&n.board_columns_by){const e=y.format.board_columns_by.property;if(!(0,r().Pf)(e)||b(e))return!1}if(null!==(i=y.format)&&void 0!==i&&i.collection_group_by){const e=y.format.collection_group_by.property;if(!(0,r().Pf)(e)||b(e))return!1}break;case"calendar":if(null!==(l=y.query2)&&void 0!==l&&l.calendar_by){const e=y.query2.calendar_by;if(!(0,r().Pf)(e)||b(e))return!1}break;case"chart":if(null!==(c=y.format)&&void 0!==c&&c.chart_config){var S;if("placeholder"===(null===(S=y.format)||void 0===S?void 0:S.chart_config.type))return!1;if("groups_reducer"===y.format.chart_config.dataConfig.type){const e=y.format.chart_config.dataConfig.groupBy;if(!(0,r().Pf)(e.property)||b(e.property))return!1}else{const e=y.format.chart_config.dataConfig.nameProperty;if(!(0,r().Pf)(e)||b(e))return!1}}break;case"page":case"form_editor":case"feed":case"chat":return!1;default:(0,g().t1)(y.type)}const w=e=>!!(0,a().Oo)(e)||(0,r().Pf)(e.property)&&!b(e.property);if(null!==(d=y.format)&&void 0!==d&&d.property_filters)for(const r of y.format.property_filters){if(!z(r.filter,w))return!1;if(!(0,v().qf)(p,r.filter,f))return!1}if(null!==(u=y.query2)&&void 0!==u&&u.filter){const e=y.query2.filter;if(e.filters)for(const t of e.filters){if(!H(t,w))return!1}}return!0}function U(e){const{environment:t,appConfig:o,collectionStore:n,collectionViewBlockStore:i}=e,r=o.allFeatures.filter((e=>(e=>{var o;if(!C(e)||1!==e.dependencies.length||"collection_view"!==e.dependencies[0].type)return!1;const r=e.dependencies[0],a=i.getFormat().app_config_uri,s=n.getFormat().app_config_uri,l=(null===(o=i.getFormat())||void 0===o?void 0:o.app_uri_map)??{};return!(!a||!s)&&r.collectionViewBlockUri===a&&r.collectionUri===s&&!(r.uri in l)&&"notion://projects/task_by_status_feature"!==e.uri&&D({environment:t,viewDependency:r,collectionStore:n})})(e)));return f().mN(r,"uri")}function F(e,t){return N(e,t.allFeatures)}function N(e,t){const o=[];for(const n of t)(C(n)||x(n))&&o.push(...n.dependencies);return f().mN(o.filter((t=>e.includes(t.uri))),(e=>e.uri))}function V(e){return"app_container"===e.getFormatStore().getKeyStore("collection_view_sub_type").getValue()}function L(e,t,o,r){if(!(0,h().h$)()&&t===n().GZ&&(o===i().k.Owner||o===m().EI.Owner))return!0;const a=s().aQ.derivePropertyUri(o,r.getPropertyMapping());if(!a)return!1;const l=function(e,t){if(t===n().GZ)return T;const o=M(e,t);return o?Object.keys(o):void 0}(e,t);return!!l&&l.includes(a)}function O(e,t,o){return(0,u().un)(e,t,o)}function Z(e){return e===n().Kk||e===n().tD}function j(e){return e!==n().g3}function K(e,t){const o=[];for(const i of t)"property"===i.type||"database_template"===i.type?e.has(i.collectionUri)&&o.push(i):"block"===i.type?e.has(i.parentUri)&&o.push(i):"collection"!==i.type&&"collection_view"!==i.type||e.has(i.collectionViewBlockUri)&&o.push(i);let n=[];return o.length>0&&(n=K(new Set(o.map((e=>e.uri))),t)),[...o,...n]}function z(e,t){return!!t(e)}function H(e,t){if((0,a().aN)(e)){if(!z(e,t))return!1}else{if((0,a().Mm)(e))return!0;if(e.filters)for(const o of e.filters){if(!H(o,t))return!1}}return!0}function q(e,t){const o=[];if(e.filters)for(const n of e.filters){const e=W(n,t);if(!e)throw new Error("Invalid filter");o.push(e)}return{...e,filters:o}}function W(e,t){if((0,a().aN)(e))return null!=t&&t[e.property]?{...e,property:t[e.property]}:e;if((0,a().Mm)(e))return e;if((0,a().vA)(e)){if(e.filters){const o=[];for(const n of e.filters){const e=W(n,t);if(!e)throw new Error("Invalid filter");o.push(e)}return{operator:e.operator,filters:o}}}else(0,g().t1)(e)}function G(e){const{collectionViewBlockStore:t,dependencyUri:o}=e,n=null==t?void 0:t.getCollectionViewStores();if(!t)return;return null==n?void 0:n.find((e=>e.getAppConfigUri()===o))}function $(e){const{propertyDependency:t,viewDependency:o,collectionViewStore:n,collectionStore:i}=e;if(o.optionalProperties&&o.optionalProperties.includes(t.uri))return!1;const r=n.getQuery(i.getSchema()),s=n.getFormat(),l=null==r?void 0:r.sort;if(l){if(l.some((e=>t.uri===e.property)))return!0}const c=n.getFormat().property_filters;if(c){const e=e=>!(0,a().Oo)(e)&&e.property===t.uri;if(c.some((t=>z(t.filter,e))))return!0}const d=null==r?void 0:r.filter;if(void 0!==d&&d.filters){const e=e=>!!(0,a().Oo)(e)||e.property!==t.uri;for(const t of d.filters){if(!H(t,e))return!0}}switch(n.getType()){case"table":case"list":case"gallery":case"timeline":if(s.collection_group_by){if(s.collection_group_by.property===t.uri)return!0}if(null!=r&&r.timeline_by){if(r.timeline_by===t.uri)return!0}break;case"board":if(s.board_columns_by){if(s.board_columns_by.property===t.uri)return!0}if(s.collection_group_by){if(s.collection_group_by.property===t.uri)return!0}break;case"calendar":if(null!=r&&r.calendar_by){if(r.calendar_by===t.uri)return!0}}return!1}function Q(e,t){const o=(0,d().r)(),n=(0,l().em)(e,1,o);return(0,l().fZ)(n.valueOf(),n.plus({weeks:t}).minus({days:1}).valueOf(),o)}function Y(e,t){const o=(0,l().DF)(e,(0,d().r)()).plus({days:t});return(0,l().ME)(o)}const J=[n().NB,n().Aw,n().J1];function X(e){var t;const{dependencies:o,collectionStore:n,collectionViewBlockStore:i,viewStores:r,validDependencies:a,formulasModule:l}=e,c=o.filter((e=>"property"===e.type)),d=[...c.filter((e=>"rollup"===e.propertySchema.type)),...c.filter((e=>"formula"===e.propertySchema.type))],u=o.filter((e=>"collection_view"===e.type)),p=s().aQ.derivePropertyUris(n.getSchema(),n.getPropertyMapping()),m=null===(t=i.getFormat())||void 0===t?void 0:t.app_uri_map,f={validDependencies:a,propertyDeps:[],viewDeps:[]};if(!p||!m)return f;for(const s of d){if(!p.has(s.uri))continue;const e=n.getSchema()[s.uri];if(e){if("rollup"===e.type){const t=a.some((t=>t.uri===e.relation_property));t&&(a.push(s),f.propertyDeps.push(e))}if("formula"===e.type){const t=l.getFormulaDependencies(e).some((e=>{for(const t of a)if(t.uri===e)return!0}));t&&(a.push(s),f.propertyDeps.push(e))}}}for(const s of u){if(!m[s.uri])continue;const e=r.find((e=>e.id===m[s.uri]));if(!e)continue;a.some((t=>"property"===t.type&&$({propertyDependency:t,viewDependency:s,collectionViewStore:e,collectionStore:n})))&&(a.push(s),f.viewDeps.push(e))}return f.validDependencies=a,f}function ee(){return _().default.checkGate({gateName:"typed_db_migration"})}function te(){return b().default.getIntegrationsAsRecordMap().getModel({table:p().K2,id:c().Dv})&&_().default.checkGate({gateName:"cron_connected_relation"})}},360240:(e,t,o)=>{o.d(t,{A7:()=>_,Mn:()=>m,Q_:()=>g,sN:()=>f,tV:()=>h,x1:()=>v});o(667294);var n=()=>o(197874),i=()=>o(788860),r=()=>o(696459),a=()=>o(527278),s=()=>o(239482),l=()=>o(122479),c=()=>o(876822),d=()=>o(826955),u=o(785893);o(292832).a,o(929625).w,o(840262).D;const p=(0,i().vU)({page:{defaultMessage:"Page",id:"dbTypesHelpers.singlePage.displayName"},tasks:{defaultMessage:"Task",id:"dbTypesHelpers.singleTask.displayName"},projects:{defaultMessage:"Project",id:"dbTypesHelpers.singleProject.displayName"}});p.page,p.tasks,p.projects;function m(e){return a().Z.formatMessage((0,n().J2)(e))}function f(e,t){return a().Z.formatMessage((0,n().tq)(e,t))}function g(e,t){return a().Z.formatMessage((0,n().Xj)(e,t))}function v(e){var t;let{typedCollections:o,spaceStore:n,environment:i}=e;const a={},u={},p={},m={},f={},g=null===(t=c().default.state.currentUserStore)||void 0===t?void 0:t.id;for(const c of o){if(g){if("none"===(0,l().Dt)({userId:g,store:c}).role){u[c.id]=c;continue}}const e=(0,s().u3)(c);if(!e)continue;const t=h({environment:i,spaceStore:n,collectionStore:c});switch(t){case"team":m[e.id]=[...m[e.id]||[],c],e instanceof d().zX&&(f[e.id]=e);break;case"private":a[c.id]=c;break;case"shared":p[c.id]=c;break;default:(0,r().t1)(t)}}return{privateDatabases:a,restrictedDatabases:u,sharedDatabases:p,teamDatabases:m,teamStores:f}}function h(e){let{environment:t,spaceStore:o,collectionStore:n}=e;const i=(0,s().u3)(n);return i&&i.canRead()?i instanceof d().zX?"team":i.isTopLevelPrivatePage({spaceStore:o,environment:t})?"private":"shared":"shared"}function _(e,t){return(0,u.jsx)(i()._H,{...t,defaultMessage:"This property is required for {databaseType}.",id:"database.requiredPropertyExplanation",description:"Educate the users on why this property cannot be deleted.",values:{databaseType:m(e)}})}},384791:(e,t,o)=>{o.d(t,{gD:()=>d,mL:()=>l,qJ:()=>c});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(749411),o(241792);var n=()=>o(570270),i=()=>o(396136),r=()=>o(390886),a=()=>o(239482),s=()=>o(360240);function l(e){let{environment:t,typedDatabases:o,spaceStore:n,joinedTeamIds:i,blocksToFilterParents:r}=e;return function(e){let{environment:t,typedDatabases:o,spaceStore:n,joinedTeamIds:i}=e;const{sharedDatabases:r,privateDatabases:a,restrictedDatabases:l,teamDatabases:c}=(0,s().x1)({environment:t,typedCollections:o,spaceStore:n}),d=Object.values(l),u=Object.values(a),p=Object.values(r),m=function(e){let{teamDatabases:t,joinedTeamIds:o}=e;const n=[];for(const[r,a]of Object.entries(t))for(const e of a)n.push([r,e]);if(0===n.length)return[];const i=new Map([...o,...Object.keys(t).filter((e=>!o.includes(e)))].map(((e,t)=>[e,t])));return Object.entries(t).flatMap((e=>{let[t,o]=e;return o.map((e=>({teamIndex:i.get(t),name:String(e.getName()),store:e})))})).sort(((e,t)=>e.teamIndex-t.teamIndex||e.name.localeCompare(t.name))).map((e=>e.store))}({teamDatabases:c,joinedTeamIds:i});return[...m,...p,...u,...d]}({environment:t,spaceStore:n,typedDatabases:c({typedDatabases:o.filter((e=>{const t=(0,a().VP)(e);return!t||!t.isArchived()})),blocksToFilterParents:r}),joinedTeamIds:i})}function c(e){let{typedDatabases:t,blocksToFilterParents:o}=e;const n=o?new Set((0,r().qB)(o)):void 0;return t.filter((e=>{if(!e.canEdit())return!1;if(!n)return!0;const t=e.getParentPointer();return!t||t.table!==i().iU||!n.has(t.id)}))}function d(e){const t=e.getPropertyMapping(),o=e.getSchema();return n().aQ.toViewSchema(o,t)}},236692:(e,t,o)=>{o.r(t),o.d(t,{trackAIChatTranscriptHistoryChatDeleted:()=>V,trackAIChatTranscriptHistoryItemRestored:()=>F,trackAIChatTranscriptHistoryNewChatCreated:()=>N,trackAcceptAllPill:()=>$,trackAiChatTranscriptHistoryOpenHistoryButtonSelected:()=>L,trackAiDetectedGetSupportPillClick:()=>U,trackAiDetectedGetSupportPillTriggered:()=>D,trackAssistantClosed:()=>g,trackAssistantFollowUpShareButtonClick:()=>de,trackAssistantIntroModalClose:()=>P,trackAssistantIntroModalRead:()=>A,trackAssistantIntroModalTryNow:()=>B,trackAssistantLimitBlurSeen:()=>ce,trackAssistantOpened:()=>f,trackAssistantShareModalCopyImageFailure:()=>me,trackAssistantShareModalCopyImageSuccess:()=>pe,trackAssistantShareModalDismiss:()=>ue,trackAssistantSkillSuggestedButtonClick:()=>oe,trackAssistantSuggestedSkillGroupClick:()=>te,trackAtMentionClick:()=>ee,trackCloseFullPageChatHistory:()=>Z,trackConnectAppsClick:()=>fe,trackDeepFindSearchResultsOnClient:()=>ge,trackDiscardAllPill:()=>Y,trackExpandFullPageChatHistory:()=>O,trackInferenceEnd:()=>b,trackInferenceStart:()=>h,trackInsertPill:()=>G,trackLeapDismissed:()=>ae,trackLeapLinkClick:()=>se,trackLeapPreferenceSelect:()=>ne,trackLeapPresented:()=>re,trackLeapSubmit:()=>ie,trackLearnMoreAboutAssistantClicked:()=>R,trackLeavingFullPageChat:()=>X,trackOpeningHelpFromThreeDotMenu:()=>q,trackOpeningSupportFromThreeDotMenu:()=>W,trackOpeningThreeDotMenu:()=>H,trackQnASilentRetry:()=>w,trackQnaBackToSearch:()=>C,trackQnaCitationsSeeMoreClick:()=>T,trackQnaCitationsToggle:()=>x,trackQnaFeedbackGiven:()=>k,trackQnaReminderShown:()=>E,trackQnaResultClicked:()=>I,trackQnaSessionInitialized:()=>M,trackSavePagePill:()=>Q,trackScopeSearchMenuClose:()=>z,trackScopeSearchMenuOpen:()=>j,trackScopeSearchToggle:()=>K,trackSeeAllSkillsPill:()=>J,trackUserClickedAssistantTryAgain:()=>y,trackUserStoppedAssistantOutput:()=>S});o(670560),o(267602),o(653476);var n=()=>o(903057),i=()=>o(625230),r=()=>o(696459),a=()=>o(726143),s=()=>o(594546),l=()=>o(36560),c=()=>o(524434),d=()=>o(252097),u=()=>o(845622),p=()=>o(25694),m=()=>o(993261);function f(e,t){const{sessionId:o,startTimestamp:n,transcript:r,hasQuery:a,searchSessionId:l,from:d,isReminder:u,reminderType:p}=t,m=c().KR.isXMLAssistantEnabled(),f=c().KR.isLimitedQnaMode(),g=m?"assistant_open":"qna_open";s().K4(e,g,{qna_session_id:o,has_query:a,search_session_id:l,is_limited_qna_session:f,from:d,is_reminder:u,reminder_type:p}),i().j({name:g,args:{qna_session_id:o,from:d,duration:Date.now()-n,questions_asked_in_session:r.filter((e=>"human"===e.type)).length??0,is_reminder:u,reminder_type:p,is_limited_qna_session:f}})}function g(e,t){const{sessionContext:o,from:n}=t,r=null==o?void 0:o.assistantConfigurationState,a=c().KR.isXMLAssistantEnabled(),l=c().KR.isLimitedQnaMode(),d=a?"assistant_close":"qna_close",u=null==r?void 0:r.sessionStartTimestamp;s().K4(e,d,{qna_session_id:null==r?void 0:r.sessionId,qna_session_length:u?Date.now()-u:0,from:n,is_limited_qna_session:l}),i().j({name:d,args:{qna_session_id:(null==r?void 0:r.sessionId)??"",is_limited_qna_session:l,from:n,duration:u?Date.now()-u:-1,questions_asked_in_session:(null==o?void 0:o.evaluator.getTranscript().filter((e=>"human"===e.type)).length)??0}})}function v(e){if(!(0,a().Ii)(e))return d().d.state.from;switch(u().default.state.type){case"closedWithContext":case"closed":return;case"completionPopup":case"assistantCompletionPopup":return u().default.state.from;default:(0,r().t1)(u().default.state)}}function h(e){var t;const{environment:o,configurationState:i,inferenceId:r,source:a,mentionsUsed:l,skillType:d,from:u}=e,p=le(),m=i?i.searchScope:n().Q,f=_(m),g=c().KR.isXMLAssistantEnabled(),h=c().KR.isLimitedQnaMode(),b=(null==i||null===(t=i.temporaryUserInputData)||void 0===t?void 0:t.isRetrying)??!1,y=g?"assistant_inference_start":"qna_inference_start";s().K4(o,y,{qna_session_id:i?i.sessionId:void 0,qna_inference_id:r,is_limited_qna_session:h,is_retry:b,is_suggested_question:"suggested_question"===a,is_reminder_suggested_question:"reminder_suggested_question"===a,is_abandoned_search_suggested_question:"abandoned_search_suggested_question"===a,search_scope_type:m.type,search_scope_id:f,mentions_used:l,skill_type:d,from:u,search_sources:p,assistant_opened_from:v(u)})}function _(e){if("everything"!==e.type&&"workspace"!==e.type&&"notion"!==e.type&&"slack"!==e.type&&"helpdocs"!==e.type&&"ai-knowledge"!==e.type&&"labeler"!==e.type&&"google-drive"!==e.type&&"github"!==e.type&&"jira"!==e.type&&"universal-none"!==e.type&&"notion-none"!==e.type&&"web"!==e.type&&"slackbot"!==e.type&&"universal-workspace"!==e.type)return"teamspace"===e.type?e.teamId:"page"===e.type?e.pageId:"collection"===e.type?e.collectionId:"site"===e.type?e.siteId:(0,r().t1)(e)}function b(e,t){const{configurationState:o,inferenceId:i,timeTook:r,numCitationsShown:a,numSearchResults:l,numSlackSearchResults:d,numGoogleDriveSearchResults:u,searchedHelpdocs:p,topCitationIndex:m,avgCitationIndex:f,citationsBySource:g,resultsBySource:h,selectedSkill:b,assistantActions:y,from:S,observationsBeforeFirstHumanStep:w,observationsAfterFirstHumanStep:k,forcefullyStoppedByUser:I}=t;if(!o)return;const C=c().KR.isXMLAssistantEnabled(),x=le(),T=o.searchScope.type,M=_(o?o.searchScope:n().Q);C?s().j({environment:e,event:{eventName:"assistant_inference_end",eventProperties:{session_id:o.sessionId,inference_id:i,time_took:r,num_citations_shown:a,num_search_results:l,num_slack_search_results:d,num_google_drive_search_results:u,searched_helpdocs:p,top_citation_index:m,avg_citation_index:f,citations_by_source:g,results_by_source:h,selected_skill:b,assistant_actions:(null==y?void 0:y.length)?y:["none"],search_sources:x,search_scope_type:T,observations_before_first_human_step:w,observations_after_first_human_step:k,search_scope_id:M,from:S,assistant_opened_from:v(S),forcefully_stopped_by_user:I}}}):s().K4(e,"qna_inference_end",{qna_session_id:o.sessionId,qna_inference_id:i,time_took:r,num_citations_shown:a,num_search_results:l,num_slack_search_results:d,top_citation_index:m,avg_citation_index:f,citations_by_source:g,search_sources:x,search_scope_type:T,from:S,assistant_opened_from:v(S)})}function y(e,t){s().j({environment:e,event:{eventName:"assistant_user_clicked_try_again",eventProperties:{session_id:t.sessionId,assistant_surface_type:t.assistantSurfaceType}}})}function S(e,t){s().j({environment:e,event:{eventName:"assistant_output_stopped_by_user",eventProperties:{session_id:t.sessionId,assistant_surface_type:t.assistantSurfaceType}}})}function w(e,t){s().K4(e,"qna_silent_retry",{qna_session_id:t.sessionId,event:t.event})}function k(e,t,o,n){t&&s().K4(e,"qna_feedback_given",{qna_session_id:t.sessionId,qna_inference_id:o,sentiment:n})}function I(e,t){const{configurationState:o,clickedPageId:n,resultType:i,source:r}=t;o&&s().K4(e,"qna_result_clicked",{qna_session_id:o.sessionId,search_session_id:o.searchSessionId,clicked_page_id:n,result_type:i,source:r})}function C(e,t){s().K4(e,"qna_back_to_search",{qna_session_id:t.sessionId})}function x(e,t){s().K4(e,"qna_citations_toggle",{qna_session_id:t.sessionId,shown:t.shown})}function T(e,t){s().K4(e,"qna_citations_see_more_click",{qna_session_id:t.sessionId})}function M(e,t){s().K4(e,"qna_session_initialized",{current_initialization_count:t.current_initialization_count})}function P(e,t){s().K4(e,"assistant_intro_modal_close",t)}function A(e,t){s().K4(e,"assistant_intro_modal_read",t)}function R(e,t){s().K4(e,"assistant_learn_more_about_assistant_clicked",t)}function B(e,t){s().K4(e,"assistant_intro_modal_continue",t),f(e,{hasQuery:!1,isReminder:!1,transcript:[],searchSessionId:void 0,sessionId:"",startTimestamp:Date.now(),reminderType:void 0,from:"assistant_intro_modal"})}function E(e,t){s().K4(e,"qna_reminder_shown",{number:t.number})}function D(e,t){s().K4(e,"ai_get_help_triggered",{sessionId:t.sessionId})}function U(e,t){s().K4(e,"ai_get_help_click",{sessionId:t.sessionId})}function F(e,t){s().K4(e,"ai_chat_transcript_history.restored",t)}function N(e,t){s().K4(e,"ai_chat_transcript_history.new_chat_created",t)}function V(e,t){s().K4(e,"ai_chat_transcript_history.chat_deleted",t)}function L(e,t){s().K4(e,"ai_chat_transcript_history.open_history_button_selected",t)}function O(e){s().K4(e,"ai_full_page_chat_history.expand")}function Z(e){s().K4(e,"ai_full_page_chat_history.close")}function j(e,t){s().K4(e,"ai_scoped_search_menu_open",t)}function K(e,t){const{from:o,scope:n}=t;let i;if("everything"===n.type||"workspace"===n.type||"notion"===n.type||"slack"===n.type||"helpdocs"===n.type||"ai-knowledge"===n.type||"labeler"===n.type||"google-drive"===n.type||"jira"===n.type||"universal-none"===n.type||"github"===n.type||"notion-none"===n.type||"web"===n.type||"slackbot"===n.type||"universal-workspace"===n.type);else if("teamspace"===n.type)i=n.teamId;else if("page"===n.type)i=n.pageId;else if("collection"===n.type)i=n.collectionId;else{if("site"!==n.type)return(0,r().t1)(n);i=n.siteId}s().K4(e,"ai_scoped_search_toggle",{from:o,search_scope_type:n.type,search_scope_id:i})}function z(e,t){s().K4(e,"ai_scoped_search_menu_close",t)}function H(e,t){s().K4(e,"ai_three_dot_menu.open",t)}function q(e,t){s().K4(e,"ai_three_dot_menu.accessing_help",t)}function W(e,t){s().K4(e,"ai_three_dot_menu.opening_support",t)}function G(e,t){s().K4(e,"ai_action_pill.insert",t)}function $(e,t){s().K4(e,"ai_action_pill.accept_all_edits",t)}function Q(e,t){s().K4(e,"ai_action_pill.save_page",t)}function Y(e,t){s().K4(e,"ai_action_pill.discard_all_edits",t)}function J(e,t){s().K4(e,"ai_see_all_skills",t)}function X(e){s().K4(e,"ai_full_page_exit")}function ee(e){s().K4(e,"ai_at_mention_click")}function te(e,t){s().K4(e,"assistant_suggested_skill_group_click",t)}function oe(e,t){s().K4(e,"assistant_suggested_skill_option_click",t)}function ne(e,t){s().K4(e,"leap_select",t)}function ie(e,t){s().K4(e,"leap_submit",t)}function re(e){s().K4(e,"leap_presented")}function ae(e){s().K4(e,"leap_dismissed")}function se(e,t){s().K4(e,"leap_open_link",t)}function le(){const e=["notion","helpdocs"];if(c().KR.canShowUniversalSearchScopes()){const{inProgress:t,connectedApps:o}=m().slackUniversalQnAConnectionStore.state;null!=o&&o.includes("slack-admin")&&!t&&e.push("slack")}if(c().KR.canShowUniversalGoogleDriveSearchScope()){const{connectedApps:t}=m().slackUniversalQnAConnectionStore.state;null!=t&&t.includes("google-drive")&&e.push("google-drive")}if(c().KR.canUseUniversalGithubSearchScope()){const{isConnected:t,isPersonalAuthComplete:o,isDisconnecting:n}=l().githubAIConnectorStore.state;t&&o&&!n&&e.push("github")}if(c().KR.canUseUniversalJiraSearchScope()){const{jiraSyncState:t}=p().jiraAIConnectionStore.state;"completed"===t&&e.push("jira")}return e}function ce(e){const{environment:t}=e;s().j({environment:t,event:{eventName:"assistant_limit_blur_seen",eventProperties:{}}})}function de(e){const{environment:t,sessionId:o,assistantSurfaceType:n}=e;s().j({environment:t,event:{eventName:"assistant_follow_up_share_action_user_clicked_button",eventProperties:{session_id:o,assistant_surface_type:n}}})}function ue(e){const{environment:t,sessionId:o,assistantSurfaceType:n}=e;s().j({environment:t,event:{eventName:"assistant_follow_up_share_action_user_dismissed_share_modal",eventProperties:{session_id:o,assistant_surface_type:n}}})}function pe(e){const{environment:t,sessionId:o,assistantSurfaceType:n}=e;s().j({environment:t,event:{eventName:"assistant_follow_up_share_action_user_copied_image_success",eventProperties:{session_id:o,assistant_surface_type:n}}})}function me(e){const{environment:t,sessionId:o,assistantSurfaceType:n}=e;s().j({environment:t,event:{eventName:"assistant_follow_up_share_action_user_copied_image_failure",eventProperties:{session_id:o,assistant_surface_type:n}}})}function fe(e){const{environment:t,sessionId:o,assistantSurfaceType:n,source:i}=e;s().j({environment:t,event:{eventName:"assistant_click_connect_apps",eventProperties:{source:i,session_id:o,assistant_surface_type:n}}})}function ge(e){const{environment:t,sessionId:o,assistantConfigurationStore:n}=e,i=n.state.searchSessionId,r=n.state.searchOpenTimestamp,a=n.state.sessionStartTimestamp;i&&a&&s().j({environment:t,event:{eventName:"deep_find_search_results_on_client",eventProperties:{sessionId:o,searchSessionId:i,searchOpenTimestamp:r,sessionStartTimestamp:a}}})}},576917:(e,t,o)=>{o.d(t,{P:()=>d,l:()=>u});o(667294);var n=()=>o(846550),i=()=>o(788860),r=()=>o(568017),a=()=>o(383507),s=()=>o(73898),l=()=>o(168866),c=o(785893);function d(e){const{variant:t,imgSource:o,style:i,shadowVariant:r="strong",wrapStyle:a}=e,d=e.wrapWithPadding??!0,u=(0,n().yK)((e=>{const o=(0,s().O)(t);return{faceImgWrap:{width:o,height:o,borderRadius:"100%",background:e.assistantCornerButtonBackground,..."strong"===r&&{boxShadow:e.largeLightBoxShadow},..."light"===r&&{borderRadius:"50%",boxShadow:e.lightBoxShadow},overflow:"hidden",...a},faceImg:{height:o,width:o,...d&&{pointerEvents:"none"},...i}}}),[t,r,a,d,i]),p=(0,c.jsx)("img",{style:u.faceImg,src:o??l(),alt:"Notion AI face"});return d?(0,c.jsx)("div",{style:{cursor:"pointer"},children:(0,c.jsx)("div",{style:u.faceImgWrap,children:p})}):p}function u(){const e=(0,n().yK)((e=>({faceIcon:{height:16,width:16,fill:r().ZP.white},spacer:{marginLeft:4},wrapper:{display:"flex",alignItems:"center",cursor:"pointer"}})),[]);return(0,c.jsxs)("div",{style:e.wrapper,children:[(0,a().Q)(e.faceIcon),(0,c.jsx)("div",{style:e.spacer,children:(0,c.jsx)(i()._H,{defaultMessage:"Ask AI",id:"EmbedBlockActions.AskAI"})})]})}},73898:(e,t,o)=>{o.d(t,{O:()=>r});var n=()=>o(696459),i=()=>o(259878);function r(e){return"avatar"===e?i().IX:"xsmall"===e?18:"small"===e?28:"medium"===e?36:"large"===e?50:"xlarge"===e?94:"plans"===e?20:"deep_dive"===e?16:(0,n().t1)(e)}},411768:(e,t,o)=>{function n(e){return void 0!==e.uiLocation.findAncestor((e=>{var t;return(null===(t=e.store.recordStoreOptions)||void 0===t||null===(t=t.inMemoryRecordCache)||void 0===t?void 0:t.isSyntheticAssistantData)??!1})).ancestor}o.d(t,{v:()=>n})},340531:(e,t,o)=>{o.d(t,{i6:()=>p,B3:()=>u,pB:()=>d});o(267602),o(653476);const n=["slack","google_drive","github","jira"];var i=()=>o(696459),r=()=>o(36560),a=()=>o(524434),s=()=>o(487985),l=()=>o(25694),c=()=>o(993261);function d(e){return"completed"===e?"completed":"not_started"===e||"pending_selection"===e?"not_started":"in_progress"}function u(){return p().filter((e=>{if("slack"===e){return!(c().slackUniversalQnAConnectionStore.state.connectedApps||[]).includes("slack-admin")}return"google_drive"===e?"none"===s().googleDriveConnectionStore.state.initialSyncState||"not_started"===s().googleDriveConnectionStore.state.initialSyncState:"github"===e?"not_started"===r().githubAIConnectorStore.state.status:"jira"===e?"not_started"===l().jiraAIConnectionStore.state.jiraSyncState:(0,i().t1)(e)}))}function p(){return n.filter((e=>"slack"===e||("google_drive"===e?a().KR.isGoogleDriveQnaEnabled():"github"===e?a().KR.canUseUniversalGithubSearchScope():"jira"===e?a().KR.isJiraQnaEnabled():(0,i().t1)(e))))}},650996:(e,t,o)=>{o.r(t),o.d(t,{LazyAssistantCollectionSearchInputButton:()=>f,LazyAssistantCollectionViewButton:()=>m,LazyAssistantFullPageChat:()=>r,LazyAssistantMenuPopup:()=>s,LazyAssistantOriginElement:()=>a,LazyAssistantScopedSearchMenuPopup:()=>d,LazyAssistantShareModal:()=>p,LazyMobileAssistantPendingOperationsCollapsedElement:()=>c,LazyReportBadQnAForm:()=>u,LazySearchAssistantPane:()=>l,assistantDependency:()=>i});var n=()=>o(677559);const i=new(n().Ss)("assistant",(()=>Promise.all([o.e(62743),o.e(52774),o.e(44832),o.e(90698),o.e(84885),o.e(37358),o.e(5242),o.e(7312),o.e(90424),o.e(81580),o.e(84325),o.e(31189),o.e(69343),o.e(46293),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(46616),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63707),o.e(86609),o.e(91253),o.e(4642),o.e(5006),o.e(6612),o.e(61171),o.e(23179),o.e(75377),o.e(31020),o.e(2942),o.e(73682),o.e(58591),o.e(54803),o.e(1953),o.e(10216),o.e(58565),o.e(69197),o.e(42055),o.e(38739),o.e(44751),o.e(81567),o.e(63257),o.e(34291),o.e(1913),o.e(56054),o.e(95076),o.e(82658),o.e(45741)]).then(o.bind(o,316773)))),r=(0,n().kF)(i,(e=>e.AssistantFullPageChat)),a=(0,n().kF)(i,(e=>e.AssistantOriginElement)),s=(0,n().kF)(i,(e=>e.AssistantMenuPopup)),l=(0,n().kF)(i,(e=>e.SearchAssistantPane)),c=(0,n().kF)(i,(e=>e.MobileAssistantPendingOperationsCollapsedElement)),d=(0,n().kF)(i,(e=>e.AssistantScopedSearchMenuPopup)),u=(0,n().kF)(i,(e=>e.ReportBadQnAForm)),p=(0,n().kF)(i,(e=>e.AssistantShareModal)),m=(0,n().kF)(i,(e=>e.AssistantCollectionViewButton)),f=(0,n().kF)(i,(e=>e.AssistantCollectionSearchInputButton))},68247:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{connectorTriggeringUpsell:void 0,upsellTriggeredAt:void 0,appsConnectionData:[]}}updateAppsConnectionData(e){this.setState({...this.state,appsConnectionData:e})}}const i=new n},506548:(e,t,o)=>{o.d(t,{JV:()=>n,Pf:()=>r});const n=5;class i extends(()=>o(263184))().default{getInitialState(){return{type:"idle"}}isAvailable(){return"ready"===this.state.type&&this.state.questions.length>0}}const r=new i},993261:(e,t,o)=>{o.d(t,{slackUniversalQnAConnectionStore:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{inProgress:!1,isPublicSync:!1,isPrivateSync:!1,selection:{allSelected:!0,selectedChannels:[],excludedChannels:[],joinFutureChannels:!0,isDisconnecting:!1},isSyncCompleted:!1,currentScreen:"none",sessionId:o(956057).Il(),analyticsFrom:"unknown",authUrl:void 0,canQuery:!0,connectedApps:void 0,noChannelsSelected:void 0,ingestionProgress:void 0,gridSetupUrl:void 0,isSlackGridAiConnectorEnabled:!1}}}const i=new n},637118:(e,t,o)=>{o.d(t,{DZ:()=>S,Ep:()=>b,Jj:()=>h,YC:()=>y,gJ:()=>_});o(821057);var n=o(667294),i=()=>o(142735),r=()=>o(435308),a=()=>o(360517),s=()=>o(788860),l=()=>o(696459),c=()=>o(285755),d=()=>o(141735),u=()=>o(712334),p=()=>o(677559),m=()=>o(807629),f=o(785893);const g=new WeakMap,v=(0,n.createContext)({automationStore:void 0,contextType:void 0,defined:!1,typecheckResult:void 0});v.displayName="AutomationContext";function h(e){const{automationStore:t,children:o,contextType:n}=e,h=(0,s().YB)(),{value:_}=(0,p().XJ)(d().F.formulas),{value:b}=(0,p().XJ)(c().Sm.automationTypecheck),y=(0,i().VK)((()=>{if(!_)return{error:new(a().MO)("Missing formulas dependency")};if(!b)return{error:new(a().MO)("Missing automation dependency")};const e=function(e){const{automationStore:t,automationTypecheckModule:o,contextType:n,formulasModule:i,intl:a}=e,s=g.get(t);if(s)return s;{const e=new(r().default)((()=>{const e=t.getTriggerType();let r=n;return(0,l().$K)(e)&&(0,u().j$)(e)&&(r=(0,u().Uk)(e)),(0,m().k)({automationStore:t,automationTypecheckModule:o,contextType:r,formulasModule:i,intl:a})}),{debugName:"automationContextTypecheckResultCachedStore"});return g.set(t,e),e}}({automationStore:t,automationTypecheckModule:b,contextType:n,formulasModule:_,intl:h});return e.state}),[t,b,n,_,h]);return(0,f.jsx)(v.Provider,{value:{automationStore:t,typecheckResult:y,contextType:n,defined:!0},children:o})}function _(e){const{automationStore:t,children:o}=e,n=(0,i().VK)((()=>{var e;return null===(e=t.getTrigger())||void 0===e?void 0:e.type}),[t]);return(0,f.jsx)(h,{automationStore:t,contextType:(0,u().Uk)(n??"event"),children:o})}function b(e){var t;return null===(t=g.get(e))||void 0===t?void 0:t.state}function y(){const e=n.useContext(v);if(!1===e.defined)throw new Error("No automation context found!");return e}function S(){return n.useContext(v)}},960597:(e,t,o)=>{o.d(t,{Fp:()=>f,Mm:()=>m,SP:()=>_,So:()=>v,TU:()=>g,pM:()=>h});o(267602),o(653476),o(667294);var n=()=>o(142735),i=()=>o(846550),r=()=>o(788860),a=()=>o(513670),s=()=>o(855741),l=()=>o(696459),c=()=>o(466970),d=()=>o(739479),u=()=>o(637118),p=o(785893);const m=(0,r().vU)({missingTargetDatabase:{id:"clientAutomationHelpers.errorMessages.missingTargetDatabase",defaultMessage:"Missing a target database"},missingNotificationCollectionPointer:{id:"clientAutomationHelpers.errorMessages.missingNotificationCollectionPointer",defaultMessage:"Missing database for property target"},missingNotificationTarget:{id:"clientAutomationHelpers.errorMessages.missingNotificationTarget",defaultMessage:"Missing notification recipients"},missingRecipients:{id:"clientAutomationHelpers.errorMessages.missingRecipients",defaultMessage:"Missing notification recipients"},missingEmailSubject:{id:"clientAutomationHelpers.errorMessages.missingEmailSubject",defaultMessage:"Missing email subject"},missingEmailBody:{id:"clientAutomationHelpers.errorMessages.missingEmailBody",defaultMessage:"Missing notification email body"},missingNotificationMessage:{id:"clientAutomationHelpers.errorMessages.missingNotificationMessage",defaultMessage:"Missing notification message"},missingNotificationPropertyId:{id:"clientAutomationHelpers.errorMessages.missingPropertyId",defaultMessage:"Missing target property"},missingNotificationFormulaValue:{id:"clientAutomationHelpers.errorMessages.missingFormulaValue",defaultMessage:"Missing recipients"},invalidNotificationFormulaValue:{id:"clientAutomationHelpers.errorMessages.invalidFormulaValue",defaultMessage:"Invalid recipients"},invalidNotificationPropertyId:{id:"clientAutomationHelpers.errorMessages.invalidPropertyId",defaultMessage:"Invalid property type"},deletedNotificationPropertyId:{id:"clientAutomationHelpers.errorMessages.deletedPropertyId",defaultMessage:"Property was deleted"},missingTargetPage:{id:"clientAutomationHelpers.errorMessages.missingTargetPage",defaultMessage:"Missing a target"},invalidTemplatePage:{id:"clientAutomationHelpers.errorMessages.invalidTemplatePage",defaultMessage:"Invalid template."},noActions:{id:"clientAutomationHelpers.errorMessages.noActions",defaultMessage:"This button has no actions"},createPageButtonError:{id:"clientAutomationHelpers.errorMessages.createPageButtonError",defaultMessage:"Add page is missing a target database"},collectionInTrashButtonError:{id:"clientAutomationHelpers.errorMessages.collectionInTrashButtonError",defaultMessage:"Target database is in trash"},collectionNotFoundButtonError:{id:"clientAutomationHelpers.errorMessages.collectionNotFoundButtonError",defaultMessage:"Target database not found"},blockInTrashButtonError:{id:"clientAutomationHelpers.errorMessages.blockInTrashButtonError",defaultMessage:"Target block is in trash"},createPageButtonTemplateError:{id:"clientAutomationHelpers.errorMessages.createPageWithTemplateError",defaultMessage:"Add page has an invalid template"},openPageOrUrlButtonError:{id:"clientAutomationHelpers.errorMessages.openPageFormOrUrlButtonError",defaultMessage:"Open page, form, or URL is missing a target"},updatePagesButtonError:{id:"clientAutomationHelpers.errorMessages.editPagesButtonError",defaultMessage:"Edit pages is missing a target database"},slackNotificationAuthenticationError:{id:"clientAutomationHelpers.errorMessages.slackNotificationError",defaultMessage:"Slack notification is missing an authentication."},slackNotificationTargetError:{id:"clientAutomationHelpers.errorMessages.slackNotificationTargetError",defaultMessage:"Slack notification is missing a target channel."},sendGmailNotificationMissingAuthenticationError:{id:"clientAutomationHelpers.errorMessages.sendGmailNotificationMissingAuthenticationError",defaultMessage:"Gmail notification is missing an authentication."},sendGmailNotificationInvalidAuthenticationError:{id:"clientAutomationHelpers.errorMessages.sendGmailNotificationInvalidAuthenticationError",defaultMessage:"Requires a re-authentication with Gmail"},noInstructions:{id:"clientAutomationHelpers.errorMessages.noInstructionsError",defaultMessage:"AI action is missing instructions"},missingRequiredRecordError:{id:"clientAutomationHelpers.errorMessages.missingRequiredRecordError",defaultMessage:"Action is missing access to a record"},aiDisabledInSpace:{id:"clientAutomationHelpers.errorMessages.aiDisabledInSpace",defaultMessage:"AI is turned off"},aiDisabledInSpaceSubtitle:{id:"clientAutomationHelpers.errorMessages.aiDisabledInSpaceSubtitle",defaultMessage:"Ask admin to turn on in workspace settings"},aiDisabledForGuest:{id:"clientAutomationHelpers.errorMessages.aiDisabledForGuest",defaultMessage:"Only workspace members can use automations with AI actions"},unsupportedSkill:{id:"clientAutomationHelpers.errorMessages.unsupportedSkill",defaultMessage:"Unsupported settings"},invalidConfig:{id:"clientAutomationHelpers.errorMessages.invalidConfig",defaultMessage:"Unsupported settings"},invalidFormulaParseError:{id:"clientAutomationHelpers.errorMessages.invalidFormulaParseError",defaultMessage:"Formula contains a parsing error"},invalidFormulaTypeError:{id:"clientAutomationHelpers.errorMessages.invalidFormulaTypeError",defaultMessage:"Formula contains a type error"},invalidFormulaMissingReturnType:{id:"clientAutomationHelpers.errorMessages.invalidFormulaMissingReturnType",defaultMessage:"Formula does not have a return type"},invalidSendWebhookActionUrl:{id:"clientAutomationHelpers.errorMessages.invalidSendWebhookActionUrl",defaultMessage:"URL is invalid"},invalidSendWebhookActionCustomHeaderField:{id:"clientAutomationHelpers.errorMessages.invalidSendWebhookActionCustomHeaderField",defaultMessage:"Custom header field is invalid"},tooManyCustomHeaders:{id:"clientAutomationHelpers.errorMessages.tooManyCustomHeaders",defaultMessage:"Too many custom headers"},missingTargetVariable:{id:"clientAutomationHelpers.errorMessages.missingTargetVariable",defaultMessage:"Unable to find target variable"},crossSpaceRelation:{id:"clientAutomationHelpers.errorMessages.crossSpaceRelation",defaultMessage:"Cross-workspace features are restricted in automations and will not work"},crossSpacePropertyInFilter:{id:"clientAutomationHelpers.errorMessages.crossSpacePropertyInFilter",defaultMessage:"Filter contains a cross-workspace property"},invalidFormulaCrossSpace:{id:"clientAutomationHelpers.errorMessages.invalidFormulaCrossSpace",defaultMessage:"Cross-workspace features are restricted in automations and will not work"},requiresSubscription:{id:"clientAutomationHelpers.errorMessages.requiresSubscription",defaultMessage:"Upgrade plan or delete this step to enable the automation"},requiresSubscriptionButton:{id:"clientAutomationHelpers.errorMessages.requiresSubscriptionButton",defaultMessage:"Upgrade plan or delete connected steps to enable the button"},generalErrorMessage:{id:"clientAutomationHelpers.errorMessages.generalErrorMessage",defaultMessage:"Fix any errors or delete this step to enable this automation"},actionIncompleteErrorMessage:{id:"clientAutomationHelpers.errorMessages.actionIncompleteErrorMessage",defaultMessage:"Add a property to edit or delete this step to enable this automation"},destinationInTrashTooltip:{id:"clientAutomationHelpers.errorMessages.destinationInTrashTooltip",defaultMessage:"Restore destination or delete step to enable this automation"},destinationMissingTooltip:{id:"clientAutomationHelpers.errorMessages.destinationMissingTooltip",defaultMessage:"Add destination or delete step to enable this automation"},destinationNotFoundTooltip:{id:"clientAutomationHelpers.errorMessages.destinationNotFoundTooltip",defaultMessage:"Change destination or delete step to enable this automation"},notificationMissingCollectionPointer:{id:"clientAutomationHelpers.errorMessages.notificationMissingCollectionPointer",defaultMessage:"Change destination or delete step to enable this automation"},notificationMissingTarget:{id:"clientAutomationHelpers.errorMessages.notificationMissingTarget",defaultMessage:"Add a recipient or delete step to enable this automation"},notificationMissingRecipients:{id:"clientAutomationHelpers.errorMessages.notificationMissingRecipients",defaultMessage:"Add a recipient or delete step to enable this automation"},notificationMissingEmailSubject:{id:"clientAutomationHelpers.errorMessages.notificationMissingEmailSubject",defaultMessage:"Add an email subject or delete step to enable this automation"},notificationMissingEmailBody:{id:"clientAutomationHelpers.errorMessages.notificationMissingEmailBody",defaultMessage:"Add an email body or delete step to enable this automation"},notificationMissingMessage:{id:"clientAutomationHelpers.errorMessages.notificationMissingNotificationMessage",defaultMessage:"Add an email message or delete step to enable this automation"},notificationMissingPropertyId:{id:"clientAutomationHelpers.errorMessages.notificationMissingPropertyId",defaultMessage:"Change the target property or delete step to enable this automation"},notificationMissingFormulaValue:{id:"clientAutomationHelpers.errorMessages.notificationMissingFormulaValue",defaultMessage:"Add a recipient or delete step to enable this automation"},sendGmailMissingAccount:{id:"clientAutomationHelpers.errorMessages.sendGmailMissingAccount",defaultMessage:"Select an account to send from or delete step to enable this automation"},sendGmailMissingRecipients:{id:"clientAutomationHelpers.errorMessages.sendGmailMissingRecipients",defaultMessage:"Add recipients or delete step to enable this automation"},sendGmailMissingSubject:{id:"clientAutomationHelpers.errorMessages.sendGmailMissingSubject",defaultMessage:"Add email subject or delete step to enable this automation"},sendGmailMissingBody:{id:"clientAutomationHelpers.errorMessages.sendGmailMissingBody",defaultMessage:"Add email body or delete step to enable this automation"}});function f(e){const{failure:t,hasAutomationUpdatedErrorStatesEnabled:o}=e;if("create_page"===t.actionType){if("empty_config"===t.type)return{forAction:o?m.destinationMissingTooltip:m.missingTargetDatabase,forButtonTooltip:m.createPageButtonError};if("collection_not_found"===t.type)return{forAction:o?m.destinationNotFoundTooltip:m.collectionNotFoundButtonError,forButtonTooltip:m.collectionNotFoundButtonError};if("missing_required_config"===t.type){if("collection"===t.key)return{forAction:o?m.destinationMissingTooltip:m.missingTargetDatabase,forButtonTooltip:m.createPageButtonError};(0,l().t1)(t)}else{if("invalid_optional_config"===t.type)return{forAction:m.invalidTemplatePage,forButtonTooltip:m.createPageButtonTemplateError};if("collection_in_trash"===t.type)return{forAction:o?m.destinationInTrashTooltip:m.collectionInTrashButtonError,forButtonTooltip:m.collectionInTrashButtonError,forActionIcon:d().y};if("invalid_formula_parse_error"===t.type)return{forAction:m.invalidFormulaParseError,forButtonTooltip:m.invalidFormulaParseError,forButtonSubtitleTooltip:void 0};if("invalid_formula_type_error"===t.type)return{forAction:m.invalidFormulaTypeError,forButtonTooltip:m.invalidFormulaTypeError,forButtonSubtitleTooltip:void 0};if("invalid_formula_missing_return_type"===t.type)return{forAction:m.invalidFormulaMissingReturnType,forButtonTooltip:m.invalidFormulaMissingReturnType,forButtonSubtitleTooltip:void 0};if("cross_space_relation"===t.type)return{forAction:m.crossSpaceRelation,forButtonTooltip:m.crossSpaceRelation,forButtonSubtitleTooltip:void 0};if("invalid_formula_cross_space"===t.type)return{forAction:m.invalidFormulaCrossSpace,forButtonTooltip:m.invalidFormulaCrossSpace,forButtonSubtitleTooltip:void 0};(0,l().t1)(t)}}else if("update_pages"===t.actionType)if("missing_required_config"===t.type){if("target"===t.key)return{forAction:o?m.destinationMissingTooltip:m.missingTargetDatabase,forButtonTooltip:m.updatePagesButtonError};if("property"===t.key)return{forAction:m.actionIncompleteErrorMessage,forButtonTooltip:m.updatePagesButtonError};(0,l().t1)(t)}else{if("collection_in_trash"===t.type)return{forAction:o?m.destinationInTrashTooltip:m.collectionInTrashButtonError,forButtonTooltip:m.collectionInTrashButtonError,forActionIcon:d().y};if("block_in_trash"===t.type)return{forAction:m.blockInTrashButtonError,forButtonTooltip:m.blockInTrashButtonError};if("invalid_formula_parse_error"===t.type)return{forAction:m.invalidFormulaParseError,forButtonTooltip:m.invalidFormulaParseError,forButtonSubtitleTooltip:void 0};if("invalid_formula_type_error"===t.type)return{forAction:m.invalidFormulaTypeError,forButtonTooltip:m.invalidFormulaTypeError,forButtonSubtitleTooltip:void 0};if("invalid_formula_missing_return_type"===t.type)return{forAction:m.invalidFormulaMissingReturnType,forButtonTooltip:m.invalidFormulaMissingReturnType,forButtonSubtitleTooltip:void 0};if("missing_target_variable"===t.type)return{forAction:m.missingTargetVariable,forButtonTooltip:m.missingTargetVariable,forButtonSubtitleTooltip:void 0};if("cross_space_relation"===t.type)return{forAction:m.crossSpaceRelation,forButtonTooltip:m.crossSpaceRelation,forButtonSubtitleTooltip:void 0};if("invalid_formula_cross_space"===t.type)return{forAction:m.invalidFormulaCrossSpace,forButtonTooltip:m.invalidFormulaCrossSpace,forButtonSubtitleTooltip:void 0};if("cross_space_property_in_filter"===t.type)return{forAction:m.crossSpacePropertyInFilter,forButtonTooltip:m.crossSpacePropertyInFilter,forButtonSubtitleTooltip:void 0};(0,l().t1)(t)}else if("open_page"===t.actionType)if("missing_required_config"===t.type){if("target"===t.key)return{forAction:o?m.destinationNotFoundTooltip:m.missingTargetPage,forButtonTooltip:m.openPageOrUrlButtonError};(0,l().t1)(t)}else(0,l().t1)(t);else if("slack_notification"===t.actionType)if("missing_required_config"===t.type){if("external_bot_id"===t.key)return{forAction:m.slackNotificationAuthenticationError,forButtonTooltip:m.slackNotificationAuthenticationError};if("target"===t.key)return{forAction:m.slackNotificationTargetError,forButtonTooltip:m.slackNotificationTargetError};(0,l().t1)(t)}else if("missing_required_value"===t.type){if("external_bot_id"===t.key)return{forAction:m.slackNotificationAuthenticationError,forButtonTooltip:m.slackNotificationAuthenticationError};(0,l().t1)(t)}else(0,l().t1)(t);else if("send_in_app_notification"===t.actionType)if("missing_required_config"===t.type){if("target"===t.key)return{forAction:o?m.notificationMissingTarget:m.missingNotificationTarget,forButtonTooltip:m.missingNotificationTarget};if("notification_message"===t.key)return{forAction:o?m.notificationMissingMessage:m.missingNotificationMessage,forButtonTooltip:m.missingNotificationMessage};if("collectionPointer"===t.key)return{forAction:o?m.notificationMissingCollectionPointer:m.missingNotificationCollectionPointer,forButtonTooltip:m.missingNotificationCollectionPointer};if("propertyId"===t.key)return{forAction:o?m.notificationMissingPropertyId:m.missingNotificationPropertyId,forButtonTooltip:m.missingNotificationPropertyId};if("formulaValue"===t.key)return{forAction:o?m.notificationMissingFormulaValue:m.missingNotificationFormulaValue,forButtonTooltip:m.missingNotificationFormulaValue};(0,l().t1)(t)}else if("invalid_required_config"===t.type){if("propertyId"===t.key)return{forAction:m.invalidNotificationPropertyId,forButtonTooltip:m.invalidNotificationPropertyId};if("formulaValue"===t.key)return{forAction:m.invalidNotificationFormulaValue,forButtonTooltip:m.invalidNotificationFormulaValue};(0,l().t1)(t)}else if("deleted_required_config"===t.type){if("propertyId"===t.key)return{forAction:o?m.notificationMissingPropertyId:m.deletedNotificationPropertyId,forButtonTooltip:m.deletedNotificationPropertyId};(0,l().t1)(t)}else{if("invalid_formula_parse_error"===t.type)return{forAction:m.invalidFormulaParseError,forButtonTooltip:m.invalidFormulaParseError};if("invalid_formula_type_error"===t.type)return{forAction:m.invalidFormulaTypeError,forButtonTooltip:m.invalidFormulaTypeError};if("invalid_formula_missing_return_type"===t.type)return{forAction:m.invalidFormulaMissingReturnType,forButtonTooltip:m.invalidFormulaMissingReturnType};if("invalid_formula_cross_space"===t.type)return{forAction:m.invalidFormulaCrossSpace,forButtonTooltip:m.invalidFormulaCrossSpace,forButtonSubtitleTooltip:void 0};(0,l().t1)(t)}else if("send_gmail_notification"===t.actionType)if("missing_required_config"===t.type){if("to"===t.key)return{forAction:o?m.sendGmailMissingRecipients:m.missingRecipients,forButtonTooltip:m.missingRecipients};if("email_subject"===t.key)return{forAction:o?m.sendGmailMissingSubject:m.missingEmailSubject,forButtonTooltip:m.missingEmailSubject};if("email_body"===t.key)return{forAction:o?m.sendGmailMissingBody:m.missingEmailBody,forButtonTooltip:m.missingEmailBody};if("formulaValue"===t.key)return{forAction:m.missingNotificationFormulaValue,forButtonTooltip:m.missingNotificationFormulaValue};if("external_bot_id"===t.key)return{forAction:o?m.sendGmailMissingAccount:m.sendGmailNotificationMissingAuthenticationError,forButtonTooltip:m.sendGmailNotificationMissingAuthenticationError};(0,l().t1)(t)}else if("invalid_required_config"===t.type){if("to"===t.key)return{forAction:m.invalidNotificationFormulaValue,forButtonTooltip:m.invalidNotificationFormulaValue};if("cc"===t.key)return{forAction:m.invalidNotificationFormulaValue,forButtonTooltip:m.invalidNotificationFormulaValue};if("bcc"===t.key)return{forAction:m.invalidNotificationFormulaValue,forButtonTooltip:m.invalidNotificationFormulaValue};if("reply_to"===t.key)return{forAction:m.invalidNotificationFormulaValue,forButtonTooltip:m.invalidNotificationFormulaValue};if("external_bot_id"===t.key)return{forAction:m.sendGmailNotificationInvalidAuthenticationError,forButtonTooltip:m.sendGmailNotificationInvalidAuthenticationError};(0,l().t1)(t)}else{if("invalid_formula_parse_error"===t.type)return{forAction:m.invalidFormulaParseError,forButtonTooltip:m.invalidFormulaParseError};if("invalid_formula_type_error"===t.type)return{forAction:m.invalidFormulaTypeError,forButtonTooltip:m.invalidFormulaTypeError};if("invalid_formula_missing_return_type"===t.type)return{forAction:m.invalidFormulaMissingReturnType,forButtonTooltip:m.invalidFormulaMissingReturnType};if("invalid_formula_cross_space"===t.type)return{forAction:m.invalidFormulaCrossSpace,forButtonTooltip:m.invalidFormulaCrossSpace,forButtonSubtitleTooltip:void 0};if("requires_subscription_upgrade"===t.type)return{forAction:m.requiresSubscription,forButtonTooltip:m.requiresSubscriptionButton};(0,l().t1)(t)}else if("assistant_basic"===t.actionType){if("empty_instructions"===t.type)return{forAction:m.noInstructions,forButtonTooltip:m.noInstructions};if("invalid_formula_parse_error"===t.type)return{forAction:m.invalidFormulaParseError,forButtonTooltip:m.invalidFormulaParseError};if("invalid_formula_type_error"===t.type)return{forAction:m.invalidFormulaTypeError,forButtonTooltip:m.invalidFormulaTypeError};if("invalid_formula_missing_return_type"===t.type)return{forAction:m.invalidFormulaMissingReturnType,forButtonTooltip:m.invalidFormulaMissingReturnType};if("invalid_formula_cross_space"===t.type)return{forAction:m.invalidFormulaCrossSpace,forButtonTooltip:m.invalidFormulaCrossSpace,forButtonSubtitleTooltip:void 0};if("ai_disabled_in_space"===t.type)return{forAction:m.aiDisabledInSpace,forButtonTooltip:m.aiDisabledInSpace,forButtonSubtitleTooltip:m.aiDisabledInSpaceSubtitle};if("ai_disabled_for_guest"===t.type)return{forAction:m.aiDisabledForGuest,forButtonTooltip:m.aiDisabledForGuest,forButtonSubtitleTooltip:void 0};if("invalid_config"===t.type)return{forAction:m.invalidConfig,forButtonTooltip:m.invalidConfig,forButtonSubtitleTooltip:void 0};if("unsupported_skill"===t.type)return{forAction:m.unsupportedSkill,forButtonTooltip:m.unsupportedSkill,forButtonSubtitleTooltip:void 0};if("unsupported_context_type"===t.type)return{forAction:m.invalidConfig,forButtonTooltip:m.invalidConfig,forButtonSubtitleTooltip:void 0};(0,l().t1)(t)}else if("define_variables"===t.actionType){if("invalid_formula_parse_error"===t.type)return{forAction:m.invalidFormulaParseError,forButtonTooltip:m.invalidFormulaParseError,forButtonSubtitleTooltip:void 0};if("invalid_formula_type_error"===t.type)return{forAction:m.invalidFormulaTypeError,forButtonTooltip:m.invalidFormulaTypeError,forButtonSubtitleTooltip:void 0};if("invalid_formula_missing_return_type"===t.type)return{forAction:m.invalidFormulaMissingReturnType,forButtonTooltip:m.invalidFormulaMissingReturnType,forButtonSubtitleTooltip:void 0};if("invalid_formula_cross_space"===t.type)return{forAction:m.invalidFormulaCrossSpace,forButtonTooltip:m.invalidFormulaCrossSpace,forButtonSubtitleTooltip:void 0};(0,l().t1)(t)}else if("http_request"===t.actionType){if("invalid_url"===t.type)return{forAction:m.invalidSendWebhookActionUrl,forButtonTooltip:m.invalidSendWebhookActionUrl};if("empty_custom_header_field"===t.type)return{forAction:m.invalidSendWebhookActionCustomHeaderField,forButtonTooltip:m.invalidSendWebhookActionCustomHeaderField};if("requires_subscription_upgrade"===t.type)return{forAction:m.requiresSubscription,forButtonTooltip:m.requiresSubscriptionButton};if("too_many_custom_headers"===t.type)return{forAction:m.tooManyCustomHeaders,forButtonTooltip:m.tooManyCustomHeaders};(0,l().t1)(t)}else if("modal_confirmation"===t.actionType){if("invalid_formula_parse_error"===t.type)return{forAction:m.invalidFormulaParseError,forButtonTooltip:m.invalidFormulaParseError};if("invalid_formula_type_error"===t.type)return{forAction:m.invalidFormulaTypeError,forButtonTooltip:m.invalidFormulaTypeError};if("invalid_formula_missing_return_type"===t.type)return{forAction:m.invalidFormulaMissingReturnType,forButtonTooltip:m.invalidFormulaMissingReturnType};if("invalid_formula_cross_space"===t.type)return{forAction:m.invalidFormulaCrossSpace,forButtonTooltip:m.invalidFormulaCrossSpace,forButtonSubtitleTooltip:void 0};(0,l().t1)(t)}else if("publish_site"===t.actionType)if("missing_required_config"===t.type){if("target"===t.key)return{forAction:m.missingTargetDatabase,forButtonTooltip:m.updatePagesButtonError};(0,l().t1)(t)}else{if("missing_target_variable"===t.type)return{forAction:m.missingTargetVariable,forButtonTooltip:m.missingTargetVariable,forButtonSubtitleTooltip:void 0};if("invalid_formula_type_error"===t.type)return{forAction:m.invalidFormulaTypeError,forButtonTooltip:m.invalidFormulaTypeError};(0,l().t1)(t)}else(0,l().t1)(t)}function g(e){const{actionId:t,shouldShow:o,errorKey:i,errorKeys:s}=e,{typecheckResult:l}=(0,u().DZ)(),d=(0,c().E)("automation_updated_error_states");return(0,n().VK)((()=>{if(!o||!l)return{errorMessage:void 0,errorIcon:void 0,errorMessageDescriptor:void 0};let e=h(l,t);(i||s)&&(e=e.filter((e=>"key"in e&&(e.key===i||(null==s?void 0:s.includes(e.key))))));const n=(0,a().Ps)(e);if(!n)return{errorMessage:void 0,errorIcon:void 0,errorMessageDescriptor:void 0};const c=f({failure:n,hasAutomationUpdatedErrorStatesEnabled:d});return{errorMessage:(0,p.jsx)(v,{content:(0,p.jsx)(r()._H,{...c.forAction})}),errorIcon:c.forActionIcon,errorMessageDescriptor:c.forAction}}),[o,l,t,i,s,d])}function v(e){const{content:t,subtitle:o}=e,n=(0,i().yK)((e=>({wrap:{display:"flex",flexDirection:"column",alignItems:"center"},subtitle:{color:e.mediumInvertedTextColor}})),[]);return(0,p.jsxs)("div",{style:n.wrap,children:[(0,p.jsx)("div",{children:t}),o&&(0,p.jsx)("div",{style:n.subtitle,children:o})]})}function h(e,t){return s().x.isFail(e)?[]:e.value.actionValidationFailures[t]??[]}function _(e){const{shouldShow:t,actionId:o}=e,{typecheckResult:i}=(0,u().DZ)(),s=(0,c().E)("automation_updated_error_states");return(0,n().VK)((()=>{if(!t||!i)return;const e=h(i,o).filter((e=>"requires_subscription_upgrade"===e.type)),n=(0,a().Ps)(e);if(!n)return;const l=f({failure:n,hasAutomationUpdatedErrorStatesEnabled:s});return(0,p.jsx)(r()._H,{...l.forAction})}),[t,i,o,s])}},319857:(e,t,o)=>{o.d(t,{k:()=>r});var n=()=>o(856546),i=()=>o(826955);function r(e,t){const o=i().Mz.createChildStore(e,t);if(!o||!o.isDefined())return!1;const r=o.getActionStores();for(const i of r){if(!i.isDefined())return!1;const e=i.getBlockStores();for(const t of e){if(!n().b(t))return!1}}return!0}},986631:(e,t,o)=>{o.d(t,{t:()=>i});var n=()=>o(826955);function i(e){return Boolean(e.findRecordStoreUIAncestor((e=>e instanceof n().zq&&e.isType("duplicate_blocks"))).ancestor)}},807629:(e,t,o)=>{o.d(t,{k:()=>d});o(267602),o(653476),o(241792);var n=()=>o(360517),i=()=>o(998411),r=()=>o(696459),a=()=>o(982855),s=()=>o(749826),l=()=>o(826955),c=()=>o(697623);function d(e){const{automationStore:t,automationTypecheckModule:o,contextType:d,formulasModule:u,intl:p}=e,m=t.getModel();if(!(0,r().$K)(m))return{error:new(n().MO)("Missing automation model")};const f=t.getActionStores().map((e=>e.getModel())).filter(r().$K);if(f.length!==m.getActionIds().length)return{error:new(n().MO)("Missing automation action models")};const g=(0,a().gM)(t.environment);let v;if("button_block"===d){const e=t.getRecordStoreUIRoot();if(!(e instanceof l().G&&(e.isPageBlock()||e.isCollectionViewPageWithContent())))return{error:new(n().MO)("Missing page block model")};v={actionModels:f,assistantFeatureGate:g,checkExperimentGate:e=>s().default.checkGate({gateName:e}),automationModel:m,contextType:d,formulasModule:u,getRecordModel:t.getRecordModel,getRecordRole:t.getRecordRole,intl:p,isSubscribed:(0,c().sX)(),pageBlockModel:e.getModel(),userTimeZone:(0,i().r)(),valueTypes:[],env:"production"}}else v={actionModels:f,assistantFeatureGate:g,checkExperimentGate:e=>s().default.checkGate({gateName:e}),automationModel:m,contextType:d,formulasModule:u,getRecordModel:t.getRecordModel,getRecordRole:t.getRecordRole,intl:p,isSubscribed:(0,c().sX)(),userTimeZone:(0,i().r)(),valueTypes:[],env:"production"};return o.typecheckAutomation(v)}},269853:(e,t,o)=>{o.d(t,{C6:()=>v,Rg:()=>g,l$:()=>h});var n=()=>o(219727),i=()=>o(142735),r=()=>o(473304),a=()=>o(855741),s=()=>o(696459),l=()=>o(285755),c=()=>o(125659),d=()=>o(141735),u=()=>o(985575),p=()=>o(527278),m=()=>o(677559),f=()=>o(826955);function g(e){const{store:t,automationStore:o}=e,r=(0,n().O7)(),{value:a}=(0,m().XJ)(d().F.formulas),{value:s}=(0,m().XJ)(l().Sm.automationTypecheck),{value:c}=(0,m().XJ)(l().Sm.automationActionRegistry),g=r.currentUser.id;return(0,i().VK)((()=>{const e=t.getRecordStoreUIRoot();if(a&&s&&c&&o&&e instanceof f().G)return(0,u().Gb)({automationActionRegistryModule:c,automationStore:o,automationTypecheckModule:s,blockStore:t,currentUserId:g,isLoggedIn:r.currentUser.isLoggedIn(),formulasModule:a,intl:p().Z.getIntl(),pageStore:e,parentRecordStore:o,type:"button_block"})}),[t,a,s,c,o,g,r.currentUser])}function v(e){const{automationStore:t,propertyId:o,propertySchema:r}=e,a=(0,n().O7)(),s=(0,c().DK)(),f=a.currentUser.id,{value:g}=(0,m().XJ)(d().F.formulas),{value:v}=(0,m().XJ)(l().Sm.automationTypecheck),{value:h}=(0,m().XJ)(l().Sm.automationActionRegistry);return(0,i().VK)((()=>{if(g&&t&&s&&v&&h)return(0,u().Gb)({automationActionRegistryModule:h,automationStore:t,automationTypecheckModule:v,collectionContextStore:s,currentUserId:f,formulasModule:g,intl:p().Z.getIntl(),isLoggedIn:a.currentUser.isLoggedIn(),parentRecordStore:t,propertyId:o,propertySchema:r,type:"button_property"})}),[g,t,s,f,a.currentUser,o,r,h,v])}function h(e){const t=v(e);return(0,i().VK)((()=>{const e=null==t?void 0:t.state;return!!(0,s().$K)(null==e?void 0:e.typecheckResult)&&(!a().x.isFail(e.typecheckResult)&&(0,r().wy)(e.typecheckResult.value))}),[t])}},882886:(e,t,o)=>{o.d(t,{N:()=>r});var n=()=>o(142735),i=()=>o(319857);function r(e,t){return(0,n().VK)((()=>!(!e||!t)&&(0,i().k)(e,t)),[t,e])}},285755:(e,t,o)=>{o.d(t,{IQ:()=>a,On:()=>r,Sm:()=>i,qH:()=>s});var n=()=>o(677559);const i={automations:new(n().Ss)("automations",(()=>Promise.all([o.e(62743),o.e(52774),o.e(44832),o.e(90698),o.e(84885),o.e(37358),o.e(5242),o.e(7312),o.e(90424),o.e(81580),o.e(84325),o.e(31189),o.e(69343),o.e(46293),o.e(94556),o.e(78701),o.e(38804),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(46616),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63707),o.e(86609),o.e(91253),o.e(4642),o.e(5006),o.e(6612),o.e(61171),o.e(23179),o.e(75377),o.e(31020),o.e(2942),o.e(73682),o.e(58591),o.e(54803),o.e(1953),o.e(10216),o.e(58565),o.e(69197),o.e(42055),o.e(38739),o.e(44751),o.e(81567),o.e(63257),o.e(34291),o.e(1913),o.e(56054),o.e(95076),o.e(92341),o.e(82658),o.e(69583),o.e(46945),o.e(10553),o.e(5485),o.e(54307),o.e(65136),o.e(69753),o.e(31655)]).then(o.bind(o,380549)))),automationActionRegistry:new(n().Ss)("automationActionRegistry",(()=>Promise.all([o.e(94556),o.e(78701),o.e(38804),o.e(92341),o.e(69583),o.e(56695)]).then(o.bind(o,969583)))),automationTypecheck:new(n().Ss)("automationTypecheck",(()=>Promise.all([o.e(94556),o.e(78701),o.e(38804),o.e(92341),o.e(69583),o.e(8605)]).then(o.bind(o,752348))))},r=(0,n().kF)(i.automations,(e=>e.PlacedButtonBlockEditor)),a=(0,n().kF)(i.automations,(e=>e.AutomationWorkflowEditor)),s=((0,n().kF)(i.automations,(e=>e.AutomationWorkflowEditorActionSection)),(0,n().kF)(i.automations,(e=>e.ButtonBlockUrlPreviewPopup)))},493686:(e,t,o)=>{o.d(t,{f:()=>r});o(667294);var n=()=>o(846550),i=o(785893);function r(){const e=(0,n().yK)((e=>({span:{marginLeft:2,marginRight:2,color:e.lightTextColor}})),[]);return(0,i.jsx)("span",{style:e.span,children:"/"})}},543227:(e,t,o)=>{o.d(t,{Z:()=>p});o(667294);var n=()=>o(219727),i=()=>o(142735),r=()=>o(846550),a=()=>o(707513),s=()=>o(943620),l=()=>o(384241),c=()=>o(826955),d=()=>o(383694),u=o(785893);function p(e){const{store:t,ignoreMaxLength:o,maxWidth:p,iconSize:m,emojiSize:f,titleStyle:g,iconStyle:v,highlighter:h}=e,{device:_}=(0,n().O7)(),b=m??(_.isMobile?24:20),y=f??b,{hasIcon:S,pageIcon:w,isEmptyPage:k}=(0,i().VK)((()=>({hasIcon:t.hasIcon(),pageIcon:t.getIcon(),isEmptyPage:t instanceof c().G&&t.isEmptyPage()})),[t],{useDeepEqual:!0}),I=(0,r().yK)((()=>({containerStyle:{display:"flex",alignItems:"center",minWidth:0},teamRecordTitle:{maxWidth:p,...g},pageRecordTitle:{maxWidth:o?"none":p,...g},recordIconStyle:{marginRight:6,fontWeight:a().Ue.medium,...v}})),[o,p,g,v]);return t instanceof c().zX?(0,u.jsxs)("div",{style:I.containerStyle,children:[(0,u.jsx)(d().p,{disabled:!0,store:t,size:b,style:I.recordIconStyle}),(0,u.jsx)(l().Z,{store:t,style:I.teamRecordTitle,highlighter:h,enableHover:!0})]}):(0,u.jsxs)("div",{style:I.containerStyle,children:[S&&(0,u.jsx)(s().Z,{disabled:!0,icon:w,isEmptyPage:k,size:b,emojiSize:y,style:I.recordIconStyle,largeIcon:!0}),(0,u.jsx)(l().Z,{store:t,style:I.pageRecordTitle,highlighter:h,enableHover:!0})]},`breadcrumb-recordtitle-${t.id}`)}},922227:(e,t,o)=>{o.d(t,{Z:()=>h});var n=o(667294),i=()=>o(219727),r=()=>o(142735),a=()=>o(846550),s=()=>o(506347),l=()=>o(576828),c=()=>o(269299),d=()=>o(448419),u=()=>o(92175),p=()=>o(307369),m=()=>o(429725),f=()=>o(493686),g=()=>o(543227),v=o(785893);function h(e){const t=(0,i().O7)(),{device:o}=t,{store:h,showDivider:_,maxWidth:b,popupRenderer:y,iconSize:S,emojiSize:w,titleStyle:k,iconStyle:I,highlighter:C,onClick:x}=e,T=(0,a().yK)((()=>({selectable:{display:"flex",alignItems:"center",minWidth:0},button:{display:"flex",minWidth:0,fontSize:"inherit",paddingTop:2,paddingBottom:2,paddingLeft:6,paddingRight:6}})),[]),{url:M,canEdit:P}=(0,r().VK)((()=>({url:(0,m().ZP)({store:h,fullyQualified:!1,pageVisitSource:s().tY.Breadcrumb}),canEdit:h.canEdit()})),[h]),A=(0,n.useCallback)((e=>{const{droppedDirection:o,droppedStores:n,duplicate:i}=e;c().createAndCommit({userAction:"SearchPathBreadcrumb.onDrop",environment:t,canUndo:!0,perform:e=>l().LQ({environment:t,targetParentStore:h.getContentStore(),targetStore:h,droppedDirection:o,droppedStores:n,duplicate:i,transaction:e})})}),[t,h]),R=(0,v.jsx)(g().Z,{store:h,maxWidth:b,iconSize:S,emojiSize:w,titleStyle:k,iconStyle:I,highlighter:C});return(0,v.jsxs)(n.Fragment,{children:[(0,v.jsx)(p().Z,{store:h,canDropOnto:P,onSelectableDrop:A,style:T.selectable,analyticsName:"breadcrumb",shouldShowDropZone:!0,children:y?(0,v.jsx)(d().ZP,{originGap:4,popupType:o.isMobile?d().Z4.SlideUp:d().Z4.Popup,render:y,renderOrigin:e=>(0,v.jsx)(u().Z,{...e,style:T.button,isSmall:!0,shouldShrink:!0,mobileFeedback:o.isMobile,children:R})}):(0,v.jsx)(u().Z,{href:M,external:!1,style:T.button,isSmall:!0,shouldShrink:!0,mobileFeedback:o.isMobile,onClick:x,children:R})}),_&&(0,v.jsx)(f().f,{})]},h.id)}},453059:(e,t,o)=>{o.d(t,{Z:()=>g});var n=o(667294),i=()=>o(219727),r=()=>o(142735),a=()=>o(846550),s=()=>o(448419),l=()=>o(312578),c=()=>o(92175),d=()=>o(63562),u=()=>o(253548),p=()=>o(493686),m=()=>o(543227),f=o(785893);function g(e){const t=(0,i().O7)(),{device:o}=t,{store:g,showDivider:v,popupRenderer:h,iconSize:_,iconStyle:b,highlighter:y}=e,S=(0,a().yK)((()=>({button:{fontSize:"inherit",padding:2},loadingPopupBackground:{width:280,paddingTop:8,paddingBottom:8,display:"flex",justifyContent:"center"}})),[]),w=(0,r().VK)((()=>g.isDefined()),[g]),k=(0,n.useRef)(null);if(!w)return null;return(0,f.jsxs)(n.Fragment,{children:[(0,f.jsx)(s().ZP,{originGap:4,popupType:o.isMobile?s().Z4.SlideUp:s().Z4.Popup,render:h??(e=>(0,f.jsx)(u().Pe,{renderLoading:e=>(0,f.jsx)("div",{style:S.loadingPopupBackground,children:e&&(0,f.jsx)(l().Z,{})}),teamStore:g,parent:e})),renderOrigin:t=>(0,f.jsx)(c().Z,{style:S.button,ref:k,isSmall:!0,shouldShrink:!0,mobileFeedback:o.isMobile,...t,children:(0,f.jsx)(m().Z,{store:g,maxWidth:e.maxWidth,iconSize:_,titleStyle:e.titleStyle,iconStyle:b,highlighter:y})})}),(0,f.jsx)(d().f,{origin:k}),v&&(0,f.jsx)(p().f,{})]},g.id)}},853516:(e,t,o)=>{o.d(t,{fY:()=>r().f,Qe:()=>s().Z,Yo:()=>a().Z,l2:()=>l});var n=()=>o(677559);const i=new(n().Ss)("Breadcrumb",(async()=>{const{default:e}=await o.e(65548).then(o.bind(o,530916));return{Breadcrumb:e}}));var r=()=>o(493686),a=()=>o(453059),s=()=>o(922227);const l=(0,n().kF)(i,(e=>e.Breadcrumb))},28810:(e,t,o)=>{o.d(t,{N:()=>i,n:()=>n});const n="calloutBlockIcon",i="calloutBlockBackground"},523261:(e,t,o)=>{o.d(t,{u:()=>r});var n=()=>o(677559);const i=new(n().Ss)("codeBlockValue",(()=>o.e(84753).then(o.bind(o,729185)))),r=(0,n().kF)(i,(e=>e.CodeBlockValueWithDeps))},526243:(e,t,o)=>{o.d(t,{ZP:()=>s,to:()=>i,wY:()=>a});var n=()=>o(35980);let i=function(e){return e[e.Left=0]="Left",e[e.Right=1]="Right",e}({});class r extends(()=>o(263184))().default{getInitialState(){return{dayStoreMap:new Map,isDragging:!1,startingMonth:0}}static getLocalViewPreferenceKey(e){return`CalendarView:${e}`}static getLocalPreferences(e){let{collectionViewId:t,currentUserId:o}=e;return n().Z.get({userId:o,key:r.getLocalViewPreferenceKey(t)})}static getLocalDateRangeStart(e){let{collectionViewId:t,currentUserId:o}=e;const n=this.getLocalPreferences({collectionViewId:t,currentUserId:o});return n&&n.dateRangeStart?n.dateRangeStart:Date.now()}static setLocalDateRangeStart(e){let{collectionViewId:t,dateRangeStart:o,currentUserId:i}=e;const a=this.getLocalPreferences({collectionViewId:t,currentUserId:i})||{},s=r.getLocalViewPreferenceKey(t),l={...a,dateRangeStart:o};n().Z.set({userId:i,key:s,value:l})}static clearLocalDateRangeStart(e){let{collectionViewId:t,currentUserId:o}=e;const i=r.getLocalViewPreferenceKey(t);n().Z.remove({userId:o,key:i})}}function a(e){return!1===e.isDragging}const s=r},688725:(e,t,o)=>{o.d(t,{formsEditorDependency:()=>n});const n=new(o(677559).Ss)("collectionFormsEditor",(()=>o.e(57036).then(o.bind(o,801670))))},469753:(e,t,o)=>{o.d(t,{B:()=>_,Cu:()=>k,Hz:()=>D,I0:()=>I,J8:()=>N,MW:()=>S,Nb:()=>T,Pz:()=>A,TG:()=>E,h0:()=>b,jj:()=>R,mJ:()=>F,s0:()=>C,sP:()=>P,tU:()=>y,xd:()=>M});o(667294);var n=()=>o(142735),i=()=>o(506347),r=()=>o(226413),a=()=>o(788860),s=()=>o(568017),l=()=>o(696459),c=()=>o(707513),d=()=>o(326966),u=()=>o(308186),p=()=>o(861026),m=()=>o(429725),f=()=>o(527278),g=()=>o(122479),v=()=>o(826955),h=o(785893);const _=5e3,b=500,y=(0,a().vU)({characterLimitReached:{defaultMessage:"Character limit reached.",id:"form.characterLimitReached"},questionLimitReachedTitle:{defaultMessage:"Question limit reached",id:"form.questionLimitReached.title"},questionLimitReachedSubtitle:{defaultMessage:"Please delete a question before creating a new one.",id:"form.questionLimitReached.subtitle"},questionLimitReachedFullMessage:{defaultMessage:"Question limit reached. Please delete a question before creating a new one.",id:"form.questionLimitReached.fullMessage"}}),S=["text","title","select","multi_select","relation","date","person","file","number","checkbox","email","url","phone_number"],w=(0,a().vU)({title:{defaultMessage:"Title",id:"database.questionTypeName.title"},text:{defaultMessage:"Text",id:"database.questionTypeName.text"},number:{defaultMessage:"Number",id:"database.questionTypeName.number"},url:{defaultMessage:"URL",id:"database.questionTypeName.url"},multi_select:{defaultMessage:"Multiple choice",id:"database.questionTypeName.multi_select"},person:{defaultMessage:"Person",id:"database.questionTypeName.person"},email:{defaultMessage:"Email",id:"database.questionTypeName.email"},phone_number:{defaultMessage:"Phone",id:"database.questionTypeName.phone_number"},date:{defaultMessage:"Date",id:"database.questionTypeName.date"},file:{defaultMessage:"Files & media",id:"database.questionTypeName.file"},checkbox:{defaultMessage:"Checkbox",id:"database.questionTypeName.checkbox"},relation:{defaultMessage:"Relation",id:"database.questionTypeName.relation"}}),k={title:f().Z.formatMessage(w.title),text:f().Z.formatMessage(w.text),number:f().Z.formatMessage(w.number),url:f().Z.formatMessage(w.url),multi_select:f().Z.formatMessage(w.multi_select),person:f().Z.formatMessage(w.person),email:f().Z.formatMessage(w.email),phone_number:f().Z.formatMessage(w.phone_number),date:f().Z.formatMessage(w.date),file:f().Z.formatMessage(w.file),checkbox:f().Z.formatMessage(w.checkbox),relation:f().Z.formatMessage(w.relation)};function I(e){return(!(0,r().qQ)(e)||!(0,r().q3)(e))&&(("relation"!==e.type||!e.connectedRelation)&&C(e.type))}function C(e){return(0,l().DE)(S,e)}const x=["relation","person"];function T(e,t){return t?"closed":e?"shared_to_web":"shared_to_space"}function M(e){const{formSharingState:t,isOverBlockLimit:o,spaceName:n}=e;if(o)return(0,h.jsx)(a()._H,{id:"editorFormResponderWarning.overBlockLimit.message",defaultMessage:"You are over the block limit. No new responses can be submitted through this form."});switch(t){case"closed":return(0,h.jsx)(a()._H,{id:"editorFormResponderWarning.closed.message",defaultMessage:"This form is closed. No new responses can be submitted."});case"shared_to_web":return(0,h.jsx)(a()._H,{id:"editorFormResponderWarning.public.message",defaultMessage:"This form is public. Anyone with the link can submit a response."});case"shared_to_space":return(0,h.jsx)(a()._H,{id:"editorFormResponderWarning.internal.message",defaultMessage:"Only members at {spaceName} can fill out this form.",values:{spaceName:n}})}}function P(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.getIsFormPublic()?(0,m().ZP)({store:e,preferPublicLink:!0,pageVisitSource:i().tY.FormPublicPage}):(0,m().ZP)({store:e,openInCenterPeek:t,pageVisitSource:i().tY.FormInternalPage})}function A(e){var t,o;let{collectionContextStore:n,propertyId:i,questionId:r}=e;const a=n?(0,p().Pn)(n):void 0,s=null==n?void 0:n.collectionViewStore(),l=null==s?void 0:s.getFormat(),c=null==l||null===(t=l.form_block_pointer)||void 0===t?void 0:t.id;return{question_type:null==n||null===(o=n.normalizedSchemaStore.state)||void 0===o||null===(o=o[i])||void 0===o?void 0:o.type,question_id:r,form_id:c,...a??{}}}function R(e){const t=null==e?void 0:e.getFormat().form_layout_pointer;if(t)return v().xj.createChildStore(e,t)}const B=new(o(41158).D)({key:"opt_out_form_content_warning",namespace:o(149310).TA,important:!1,trackingType:"preference"});function E(e){const t=B.getState(),o=void 0===t||Date.now()-t>d().A0,n="file"===e.propertyType?(0,h.jsx)(a()._H,{id:"collectionFormHelpers.maybeWarnAboutMaliciousContent.file.message",defaultMessage:"Download file?"}):(0,h.jsx)(a()._H,{id:"collectionFormHelpers.maybeWarnAboutMaliciousContent.url.message",defaultMessage:"Open link?"}),i=(0,h.jsx)(a()._H,{id:"collectionFormHelpers.maybeWarnAboutMaliciousContent.description",defaultMessage:"This content was submitted anonymously. Only proceed if you trust the source."}),r="file"===e.propertyType?(0,h.jsx)(a()._H,{id:"collectionFormHelpers.maybeWarnAboutMaliciousContent.file.confirmLabel",defaultMessage:"Download anyway"}):(0,h.jsx)(a()._H,{id:"collectionFormHelpers.maybeWarnAboutMaliciousContent.url.confirmLabel",defaultMessage:"Open anyway"});o?u().vC({showCancel:!1,showCloseButton:!0,keepFocus:!0,mode:"wide",message:(0,h.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",fontWeight:c().Ue.medium},children:n}),description:(0,h.jsx)("div",{style:{textAlign:"center",fontSize:14},children:i}),items:[{label:r,onAccept:e.onConfirm,color:"red",buttonType:"solid"}],selectionItems:[{key:"opt_out",showBelowLabels:!0,text:(0,h.jsx)("span",{style:{fontWeight:c().Ue.regular,color:s().ZP.mediumTextColor},children:(0,h.jsx)(a()._H,{id:"collectionFormHelpers.maybeWarnAboutMaliciousContent.optOut",defaultMessage:"Don't show again for 24 hours"})}),onSelect:e=>{!0===e?B.setState(Date.now()):B.setState(void 0)}}]}):e.onConfirm()}function D(e){const{environment:t,propertyType:o,propertySchema:n,isPublicForm:i}=e;if(i&&x.includes(o)){if("person"===o)return"invalid_property_type_for_public_form";if("relation"===(null==n?void 0:n.type)){const e=n.collection_pointer;if(e){const o=new(v().NW)(t,e);if(o.isDefined()){if(!(0,g().u$)(o))return"related_collection_not_public"}}}}}const U=(0,a().vU)({checkboxYes:{id:"FormResponseSnapshotModal.Checkbox.Yes",defaultMessage:"Yes"},checkboxNo:{id:"FormResponseSnapshotModal.Checkbox.No",defaultMessage:"No"}});function F(e){return"true"===e?f().Z.formatMessage(U.checkboxYes):f().Z.formatMessage(U.checkboxNo)}function N(e){const{formQuestionStore:t,propertySchema:o}=e;return(0,n().VK)((()=>{var e;if(!t||!o)return!1;return 1===("multi_select"===o.type?null===(e=t.getPropertyTypeSpecificConfig("multi_select"))||void 0===e?void 0:e.maxSelectionCount:void 0)||"select"===(null==o?void 0:o.type)}),[t,o])}},276124:(e,t,o)=>{o.d(t,{z:()=>a});o(267602),o(470928);var n=()=>o(421654),i=()=>o(636340),r=()=>o(749826);function a(e){const{collectionViewBlockStore:t,collectionPointer:o,transaction:a}=e;i().sW({store:t,data:{collection_id:null},transaction:a});if(r().default.checkGate({gateName:"workflow_container"})){const e=t.getCollectionPointers();(null==e?void 0:e.find((e=>e.id===o.id)))||n().FH({stores:[t],update:{collection_pointers:[...e??[],o]},transaction:a})}n().FH({stores:[t],update:{collection_pointer:o},transaction:a})}},91097:(e,t,o)=>{o.d(t,{K:()=>d,U:()=>u});o(241792);var n=()=>o(66077),i=()=>o(530980),r=()=>o(752778),a=()=>o(139978),s=()=>o(513670),l=()=>o(641702),c=()=>o(826955);function d(e,t,o){return e.getSpaceIdCreatorSync(t).deterministicIdInSavedSpace("collection_view",`${o}-settings`)}function u(e){const{environment:t,collectionStore:o}=e,u=t.currentUser.id;if(!u)return;const p=function(e){var t,o;const{collectionStore:n,userId:i,spaceId:a,idCreator:c}=e,u=n.getSchema(),p=Object.keys(u),m=null===(t=n.getModel())||void 0===t?void 0:t.parent_id;if(!m)return;const f=(0,s().MR)(p,((e,t)=>"title"===e?-1:t)).map((e=>({property:e,visible:!0})));return{id:d(c,a,n.id),version:1,parent_id:m,parent_table:"block",alive:!0,space_id:a,created_by_id:i,created_by_table:"notion_user",last_edited_by_id:i,last_edited_by_table:"notion_user",type:"table",name:(0,l().Xh)(null===(o=n.getModel())||void 0===o?void 0:o.getName(),n),format:{table_properties:f,table_wrap:!0,table_frozen_column_index:0,collection_pointer:{table:r().vF,id:n.id,spaceId:a},collection_view_source:{type:"collection",id:n.id,spaceId:a},hide_linked_collection_name:!0},query2:{sort:[],aggregations:[]},page_sort:[]}}({collectionStore:o,userId:t.currentUser.id,spaceId:o.getSpaceId(),idCreator:t.idCreator});if(!p)return;const m={table:a().np,id:p.id,spaceId:o.getSpaceId()},f=new(n().Z)({name:"temporaryCache",isTemporaryData:!0});f.addCacheFallback(t.defaultRecordCache.inMemoryRecordCache),f.setModelAndRole({pointer:m,userId:u},i().kk5.fromCollectionView(p),"editor");return new(c().Xr)(t,{table:a().np,id:m.id},{inMemoryRecordCache:f})}},203890:(e,t,o)=>{o.d(t,{Xx:()=>l,Ze:()=>d,aF:()=>i,bu:()=>s,cI:()=>n,dv:()=>r,f_:()=>c,tA:()=>a});const n=8,i=34,r=42,a=14,s=32,l=s,c=-16,d=400},324877:(e,t,o)=>{o.d(t,{AV:()=>h,H2:()=>x,OG:()=>C,UD:()=>T,ZH:()=>M,bp:()=>g,iZ:()=>k,lO:()=>y,lZ:()=>b,mH:()=>v,oc:()=>w,rM:()=>_,vf:()=>I,vg:()=>S,zp:()=>P});var n=()=>o(156642),i=()=>o(492522),r=()=>o(568017),a=()=>o(707513),s=()=>o(326966),l=()=>o(887430),c=()=>o(954452),d=()=>o(718959),u=()=>o(582835),p=()=>o(589525),m=()=>o(965903),f=()=>o(203890);function g(e,t){return e.col===t.col&&e.row===t.row}const v="text/_notion-table";function h(e){return{minCol:Math.min(e.start.col,e.end.col),maxCol:Math.max(e.start.col,e.end.col),minRow:Math.min(e.start.row,e.end.row),maxRow:Math.max(e.start.row,e.end.row)}}function _(e){let{isMobile:t}=e;return t?36:32}function b(e){let{columnIndex:t,titleColumnIndex:o,indentLevel:n,isSubitemToggleOnTitleColumn:i}=e;if(y({columnIndex:t,titleColumnIndex:o,isSubitemToggleOnTitleColumn:i})&&n>0){return u().Hw*n+5}return 0}function y(e){let{columnIndex:t,titleColumnIndex:o,isSubitemToggleOnTitleColumn:n}=e;return n?t===o:0===t}function S(e){let{collectionViewBlockId:t}=e;const o=m().default.state.stores;return 0!==o.length&&!(0,l().v_)(o,t)}function w(e){const{environment:t,collectionContextStore:o,isPhone:n,stickyLeft:a,theme:s}=e;if(n)return{};const c=o.collectionViewBlockStore(),d=null==c?void 0:c.getParentBlockStore();let u;const m=o.isInPeekRendererStore.state;if("dark"===s.mode&&m&&(u=s.peekModalBackground),"dark"===s.mode&&o.isInHomeWidgetStore.state&&(u=s.accentColors.gray[90]),d&&!o.isFullScreenStore.state&&(null==c||!c.isRootOrDirectChild())){var g;const e=null===(g=d.getModel())||void 0===g?void 0:g.getFormat().block_color;e&&(u=(0,r().fi)(e,s).background)}const v=o.frozoneStore.state.scrollerLeftOffset??0,h=(0,p().Wk)(t),_=Math.max(h-v,0),b=k(t,o)?_:0,y=o.frozoneStore.state.scrollerLeftPadding,S=(0,l().fk)({environment:t,collectionContextStore:o});return{background:u||s.contentBackground,position:"sticky",left:`calc(${(a||0)+b-(y||0)+(S?f().Xx:0)}px + -1 * var(--sticky-horizontal-offset, 0px))`,zIndex:i().I5}}function k(e,t){const o=t.collectionViewBlockStore();return!!o&&(o.isRootOrDirectChild()&&(0,c().fg)(e,o)&&!(0,l()._5)(o)&&!o.isCollectionViewPageWithContent())}function I(e){const{environment:t,propertyFormat:o}=e,n=o.width;if(!t.device.isPhone)return n;const i=t.WindowSizeStore.getSafePaddingLeftPx((0,d().ui)(t)),r=t.WindowSizeStore.getSafePaddingRightPx((0,d().ui)(t)),a=t.WindowSizeStore.state.width-i-r;return n?Math.min(n,a):a}function C(e,t,o){return{start:{col:(0,s().uZ)(e.start.col,0,t-1),row:(0,s().uZ)(e.start.row,0,o-1)},end:{col:(0,s().uZ)(e.end.col,0,t-1),row:(0,s().uZ)(e.end.row,0,o-1)}}}function x(e){const{blockStore:t,isFullScreen:o,environment:i,collectionContextStore:r}=e;if(o)return!1;if(!(0,l().fk)({environment:i,collectionContextStore:r}))return!1;const a=t.getParentBlockStore(),s=null==a?void 0:a.getType(),c=null==a?void 0:a.getFormat();return!(!a||!s)&&(0,n().TT)(s,c)}function T(e){let{theme:t,isMobile:o,hideTextWithTransition:n,hideTextWithoutTransition:i}=e;return{button:{display:"flex",alignItems:"center",height:_({isMobile:o})+1,width:"100%",paddingLeft:f().cI,lineHeight:a().Nv.UIRegular.desktop},buttonInner:{fontSize:14,color:t.lightTextColor,display:"inline-flex",alignItems:"center",position:"sticky",left:o?f().Xx:f().cI+f().Xx,opacity:n?0:1,transition:"opacity 0.2s ease",...i&&{display:"none"}},icon:{width:14,height:14,marginLeft:o?0:1,marginRight:7,fill:t.lightIconColor}}}function M(e,t){const o=P(e,t);return o&&o.table_properties?o.table_properties:[]}function P(e,t){const{temporaryFormat:o}=t.state;return o||e}},173255:(e,t,o)=>{o.d(t,{N:()=>i,Z:()=>a});var n=()=>o(513670);function i(e,t){return e.collectionViewBlockStore===t.collectionViewBlockStore&&n().Xy(e.groupFormat,t.groupFormat)}class r extends(()=>o(263184))().default{getInitialState(){return{isActive:!1}}cloneState(){return n().d9(this.state)}}const a=new r},701182:(e,t,o)=>{o.d(t,{AZ:()=>G,B8:()=>O,BJ:()=>P,C1:()=>Y,DS:()=>H,EW:()=>te,GK:()=>K,Ge:()=>x,Gz:()=>E,H5:()=>R,HZ:()=>we,Ip:()=>W,Ne:()=>ge,PF:()=>z,Qw:()=>ve,S7:()=>S,ST:()=>F,TW:()=>V,Tp:()=>le,Wk:()=>w,XO:()=>L,YE:()=>_e,YP:()=>ue,Zn:()=>me,_Q:()=>re,_e:()=>B,al:()=>Z,bK:()=>j,bk:()=>N,cK:()=>q,d$:()=>Q,e$:()=>D,fc:()=>ie,fj:()=>J,i2:()=>I,lf:()=>k,lx:()=>T,pQ:()=>ce,pe:()=>pe,ph:()=>be,px:()=>C,qG:()=>oe,rr:()=>se,vX:()=>he,x2:()=>U,xI:()=>X,xJ:()=>ee,xP:()=>ae,xd:()=>fe,yk:()=>ne});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(470928),o(731107);var n=()=>o(730120),i=()=>o(146947),r=()=>o(263184),a=()=>o(552221),s=()=>o(721927),l=()=>o(226413),c=()=>o(532850),d=()=>o(803021),u=()=>o(646574),p=()=>o(874459),m=()=>o(109477),f=()=>o(998411),g=()=>o(35980),v=()=>o(696459),h=()=>o(615676),_=()=>o(582835),b=()=>o(749826),y=()=>o(200936);const S=5,w=3,k=2,I=21;let C=function(e){return e[e.LeftResizer=0]="LeftResizer",e[e.RightResizer=1]="RightResizer",e[e.ItemDrag=2]="ItemDrag",e}({});const x=4e3,T=x/4,M=864e5,P={hours:{snapUnit:"fifteen_minutes",primaryDisplayUnit:"fifteen_minutes",secondaryDisplayUnit:"day",activeRangeType:void 0,msPerPixel:M/7e3,primaryDisplayUnitAlignment:"range_start",verticalDividerUnit:"fifteen_minutes",showWeekendIndicators:!1,hidePrimaryIndicatorIntersectionOffset:9,getDateRangePlaceholderDuration:e=>e.plus({hour:1})},day:{snapUnit:"fifteen_minutes",primaryDisplayUnit:"hour",secondaryDisplayUnit:"day",activeRangeType:void 0,msPerPixel:69120,primaryDisplayUnitAlignment:"range_start",verticalDividerUnit:"hour",showWeekendIndicators:!1,hidePrimaryIndicatorIntersectionOffset:2,getDateRangePlaceholderDuration:e=>e.plus({hour:3})},week:{snapUnit:"day",primaryDisplayUnit:"day",secondaryDisplayUnit:"month",activeRangeType:"highlight_days",msPerPixel:48e4,primaryDisplayUnitAlignment:"range_middle",verticalDividerUnit:"day",showWeekendIndicators:!0,hidePrimaryIndicatorIntersectionOffset:void 0,getDateRangePlaceholderDuration:e=>e.plus({day:1})},bi_week:{snapUnit:"day",primaryDisplayUnit:"day",secondaryDisplayUnit:"month",activeRangeType:"highlight_days",msPerPixel:108e4,primaryDisplayUnitAlignment:"range_middle",verticalDividerUnit:void 0,showWeekendIndicators:!0,hidePrimaryIndicatorIntersectionOffset:void 0,getDateRangePlaceholderDuration:e=>e.plus({day:3})},month:{snapUnit:"day",primaryDisplayUnit:"day",secondaryDisplayUnit:"month",activeRangeType:"highlight_days",msPerPixel:216e4,primaryDisplayUnitAlignment:"range_middle",verticalDividerUnit:void 0,showWeekendIndicators:!0,hidePrimaryIndicatorIntersectionOffset:void 0,getDateRangePlaceholderDuration:e=>e.plus({day:5})},quarter:{snapUnit:"day",primaryDisplayUnit:"week",secondaryDisplayUnit:"month",activeRangeType:"display_range",msPerPixel:72e5,primaryDisplayUnitAlignment:"range_start",verticalDividerUnit:"month",showWeekendIndicators:!1,hidePrimaryIndicatorIntersectionOffset:35,getDateRangePlaceholderDuration:e=>e.plus({week:2})},year:{snapUnit:"day",primaryDisplayUnit:"week",secondaryDisplayUnit:"month",activeRangeType:"display_range",msPerPixel:M/5,primaryDisplayUnitAlignment:"range_start",verticalDividerUnit:"month",showWeekendIndicators:!1,hidePrimaryIndicatorIntersectionOffset:6,getDateRangePlaceholderDuration:e=>e.plus({week:4})}},A="month";function R(e){var t;return null===(t=B(e))||void 0===t?void 0:t.property}function B(e){const t=e.normalizedFormatStore.state.timeline_arrows_by;if(null==t||!t.property)return;const o=e.normalizedSchemaStore.state[t.property],n=e.collectionStore();return o&&"relation"===o.type&&o.property&&n&&(0,l().F0)(o)===n.id?{property:t.property,inverse:o.property}:void 0}function E(e){return{zoomLevel:r().default.createValue(A,{name:"zoomLevel"}),currentRange:r().default.createValue({startTimestamp:0,endTimestamp:0},{name:"currentRange"}),dragState:r().default.createValue(void 0,{name:"dragState"}),drawState:r().default.createValue(void 0,{name:"drawState"}),hoveredItem:r().default.createValue(void 0,{name:"hoveredItem"}),dateRangePlaceholder:r().default.createValue({active:!1},{name:"dateRangePlaceholder"}),scrollLeft:r().default.createValue(void 0,{name:"scrollLeft"}),outerSizeObserver:new(y().E),timelineSizeObserver:new(y().E),horizontalScroller:void 0,savePreference:void 0,isFullScreen:e.isFullScreen,isRootChild:e.isRootChild,destroyed:!1}}function D(e,t){return t/P[e].msPerPixel}function U(e,t){return t*P[e].msPerPixel}function F(e){return"fifteen_minutes"===e||"hour"===e}function N(e){const{store:t,query:o,schema:n,userId:i,intl:r,formulasModule:a}=e,c=t.getModel();if(!c)return;const d=t.getAssociatedCollectionStore(),{timeline_by:u,timeline_by_end:m}=o;if(!u)return;const g=n[u];if(!g||!(0,l().Lt)(g))return;const v=new Map,_=new Map,y=(0,s().FT)({property:u,schema:n,block:c,getRecordModel:t.getRecordModel,propertyMapping:null==d?void 0:d.getPropertyMapping(),collectionRequestContext:{userId:i,userTimeZone:(0,f().r)(),depth:0,intl:r,visitedProperties:new Set,resultCache:v,regExpCache:_,experimentService:b().default,collectionFeatureGates:(0,h().W)()},formulasModule:a}).next().value;if("date"!==(null==y?void 0:y.type))return;const S=y.value;if(!m||u===m)return S;{const e=n[m];if(!e||!(0,l().Lt)(e))return;const o=(0,s().FT)({property:m,schema:n,block:c,getRecordModel:t.getRecordModel,propertyMapping:null==d?void 0:d.getPropertyMapping(),collectionRequestContext:{userId:i,userTimeZone:(0,f().r)(),depth:0,intl:r,visitedProperties:new Set,resultCache:v,regExpCache:_,experimentService:b().default,collectionFeatureGates:(0,h().W)()},formulasModule:a}).next().value;if(o&&"date"===o.type){const e=o.value,t=p().rH(S,e);if(t)return p().Qq(t)}}}function V(e){const{store:t,dateValue:o,query:n}=e,{timeline_by:i,timeline_by_end:r}=n;if(!i)return;const s=t.getAssociatedCollectionStore(),u=(null==s?void 0:s.getSchema())??e.schema,p=(null==s?void 0:s.getMappedProperty(i))??i,m=r?(null==s?void 0:s.getMappedProperty(r))??r:void 0,f=u[p];if(f&&(0,l().Lt)(f)){if(!m||p===m)return{[p]:(0,c().d7)(o)};{const e=u[p];if(!e||!(0,l().Lt)(e))return;const n=(0,a().G)(t.getPropertyValue(p)),i=(0,a().G)(t.getPropertyValue(m));if("date"===o.type)return{[p]:(0,c().d7)({type:"date",start_date:o.start_date,reminder:d().V3(n)}),[m]:(0,c().d7)({type:"date",start_date:o.start_date,reminder:d().V3(i)})};if("daterange"===o.type)return{[p]:(0,c().d7)({type:"date",start_date:o.start_date,reminder:d().V3(n)}),[m]:(0,c().d7)({type:"date",start_date:o.end_date,reminder:d().V3(i)})};if("datetime"===o.type)return{[p]:(0,c().d7)({type:"datetime",start_date:o.start_date,start_time:o.start_time,time_zone:o.time_zone,reminder:d()._3(n)}),[m]:(0,c().d7)({type:"datetime",start_date:o.start_date,start_time:o.start_time,time_zone:o.time_zone,reminder:d()._3(i)})};if("datetimerange"===o.type)return{[p]:(0,c().d7)({type:"datetime",start_date:o.start_date,start_time:o.start_time,time_zone:o.time_zone,reminder:d()._3(n)}),[m]:(0,c().d7)({type:"datetime",start_date:o.end_date,start_time:o.end_time,time_zone:o.time_zone,reminder:d()._3(i)})};(0,v().t1)(o)}}}function L(e,t){const o=F(t),n=p().NK(o?e:d().Dy(e),(0,f().r)()),i=H(n.start,t),r=o&&"date"===e.type?n.start.plus({days:1}).startOf("day"):n.end||i;return{start:i,end:o?H(r,t):W(r,t)}}function O(e){return`timeline:${e}`}function Z(e){const{horizontalScroller:t,outerSizeObserver:o}=e,n=e.zoomLevel.state,{startTimestamp:i}=e.currentRange.state;return i+U(n,(t?t.scrollLeft:0)+o.rect.state.width/2)}function j(e){const{environment:t,timestamp:o,timelineState:n,paddingLeft:i,format:r}=e;return o-U(n.zoomLevel.state,X({environment:t,paddingLeft:i,format:r,isFullScreen:n.isFullScreen,isRootChild:n.isRootChild})/2)}function K(e){const{environment:t,timestamp:o,timelineState:n,paddingLeft:i,format:r}=e;return o-U(n.zoomLevel.state,X({environment:t,paddingLeft:i,format:r,isFullScreen:n.isFullScreen,isRootChild:n.isRootChild})-n.outerSizeObserver.rect.state.width/2)}function z(e){const{timestamp:t,timelineState:o}=e;return t+U(o.zoomLevel.state,-o.outerSizeObserver.rect.state.width/2)}function H(e,t){if("fifteen_minutes"===t){const t=15*Math.floor(e.minute/15);return e.set({minute:t}).startOf("minute")}return e.startOf(t)}function q(e,t){if("fifteen_minutes"===t){const t=15*Math.floor(e.minute/15)-15;return e.set({minute:t}).startOf("minute")}return e.startOf(t).minus({[t]:1}).startOf(t)}function W(e,t){if("fifteen_minutes"===t){const t=15*Math.floor(e.minute/15)+15;return e.set({minute:t}).startOf("minute")}return e.plus({[t]:1}).startOf(t)}function G(e){const{startValue:t,snapUnit:o,desiredStart:n,desiredEnd:i}=e;let r=t;const a=d().Ze(t)||(0,f().r)();if(n){const e=$(n,o,"start",a);if("datetime"===e.type)if("date"===r.type){const e={type:"daterange",start_date:r.start_date,end_date:r.start_date};r=p().bD(e,(0,f().r)())}else"daterange"===r.type&&(r=p().bD(r,(0,f().r)()));"date"===r.type?r={...r,type:"daterange",start_date:e.start_date,end_date:r.start_date}:"daterange"===r.type?r={...r,type:"daterange",start_date:e.start_date,end_date:r.end_date}:"datetime"===r.type?r={...r,type:"datetimerange",start_date:e.start_date,start_time:"datetime"===e.type?e.start_time:r.start_time,end_date:r.start_date,end_time:r.start_time}:"datetimerange"===r.type&&(r={...r,type:"datetimerange",start_date:e.start_date,start_time:"datetime"===e.type?e.start_time:r.start_time})}if(i){const e=$(i,o,"end",a);if("datetime"===e.type)if("date"===r.type){const e={type:"daterange",start_date:r.start_date,end_date:r.start_date};r=p().bD(e,(0,f().r)())}else"daterange"===r.type&&(r=p().bD(r,(0,f().r)()));"date"===r.type||"daterange"===r.type?r={...r,type:"daterange",end_date:e.start_date}:"datetime"!==r.type&&"datetimerange"!==r.type||(r={...r,type:"datetimerange",end_date:e.start_date,end_time:"datetime"===e.type?e.start_time:"datetimerange"===r.type?r.end_time:r.start_time})}return d().qW(r)}function $(e,t,o,n){const i=q(e,t),r=H(e,t),a=W(e,t),s=F(t);let l;return l="start"===o?e.valueOf()>=r.valueOf()+(r.valueOf()-i.valueOf())/2?a:r:e.valueOf()>=r.valueOf()+(r.valueOf()-i.valueOf())/2?s?a:r:s?r:i,function(e,t,o){return F(t)?p().CQ(e.valueOf(),o):p().hT(e.valueOf(),o)}(l,t,n)}function Q(e){const{environment:t,isFullScreen:o,isRootChild:n}=e;return(t.device.isDesktop||t.device.isTablet)&&(o||n)}function Y(e){const{environment:t,format:o,isFullScreen:n,isRootChild:i}=e;return Q({environment:t,isFullScreen:n,isRootChild:i})&&Boolean(o.timeline_show_table)}function J(e){const{isFullScreen:t,isRootChild:o}=e;return!t&&o&&Y(e)}function X(e){const{environment:t,paddingLeft:o,format:n,isFullScreen:i,isRootChild:r}=e;if(!Y({environment:t,format:n,isFullScreen:i,isRootChild:r}))return 0;return o+(n.timeline_table_properties||[]).reduce(((e,t)=>(t.width&&t.visible?t.width:0)+e),0)}function ee(){const e=n().ou.now().setLocale(i().locale);return e.toLocaleString(n().ou.TIME_SIMPLE)===e.toLocaleString(n().ou.TIME_24_SIMPLE)}function te(e,t,o){return"day"===o?(0,u().Yx)(t,"month_day_long",e):"month"===o?(0,u().Yx)(t,"month_long",e):void(0,v().t1)(o)}function oe(e,t){return"day"===t?(0,u().Yx)(e,"long",i().locale):"month"===t?(0,u().Yx)(e,"month_year_long",i().locale):void(0,v().t1)(t)}function ne(e,t){const o=p().NK(e,d().Ze(e)||(0,f().r)(),i().locale),{primaryDisplayUnit:n}=P[t],r="fifteen_minutes"===n||"hour"===n?"month_day_time":"month_day";return(0,u().Yx)(o.start.valueOf(),r,i().locale)}function ie(e,t){const o=p().NK(e,d().Ze(e)||(0,f().r)(),i().locale),{primaryDisplayUnit:n}=P[t],r=(o.end||o.start).valueOf(),a="fifteen_minutes"===n||"hour"===n?"month_day_time":"month_day";return(0,u().Yx)(r,a,i().locale)}function re(e,t){const o=p().NK(e,d().Ze(e)||(0,f().r)(),i().locale),{primaryDisplayUnit:n}=P[t],r="fifteen_minutes"===n||"hour"===n?"medium_with_time":"medium",a=(0,u().Yx)(o.start.valueOf(),r,i().locale);return o.end?`${a} â†’ ${(0,u().Yx)(o.end.valueOf(),r,i().locale)}`:a}function ae(e,t){return H(e,t)<e?W(e,t):e}function se(e){return e.device.nativeScrollbarWidth>0||e.device.isFirefox||e.device.isPhone}function le(e){return!(e.device.isFirefox||e.device.isMobile)}function ce(e,t){const o=t.currentUser.id,n=e.getFormat().timeline_preference,i=O(e.id),r=g().Z.get({userId:o,key:i}),a={zoomLevel:A,centerTimestamp:Date.now()};return{zoomLevel:(de(r)||de(n)||a).zoomLevel,centerTimestamp:(de(r)||a).centerTimestamp}}function de(e){if(e&&"number"==typeof e.centerTimestamp&&m().H.includes(e.zoomLevel))return e}function ue(e,t){let o=e.timeline_table_properties||[];if(t){o.find((e=>{let{visible:t}=e;return Boolean(t)}))||(o=(0,m().Rt)(o,"title",!0))}return{timeline_show_table:t,timeline_table_properties:o}}const pe=32,me=32,fe=4,ge=pe+me+fe,ve=96;function he(e){return e?pe:ge}function _e(e,t,o){if(!t)return[];const n=R(e);if(!n)return[];const i=t.getPropertyValue(n),r=o[n];return i&&r&&"relation"===r.type?(0,c().j$)({relationValue:(0,c().rq)(i),propertySchema:r,getRecordModel:t.getRecordModel,includeDeleted:b().default.checkGate({gateName:"relations_show_deleted"}),includeInvalidCollection:b().default.checkGate({gateName:"relations_show_invalid_collection"}),includeNoAccess:b().default.checkGate({gateName:"relations_show_no_access"})}):[]}function be(e,t,o){var n;if(!t)return[];const i=null===(n=(0,_().wf)(e))||void 0===n?void 0:n.property;if(!i)return[];const r=t.getPropertyValue(i),a=o[i];return r&&a&&"relation"===a.type?(0,c().j$)({relationValue:(0,c().rq)(r),propertySchema:a,getRecordModel:t.getRecordModel,includeDeleted:b().default.checkGate({gateName:"relations_show_deleted"}),includeInvalidCollection:b().default.checkGate({gateName:"relations_show_invalid_collection"}),includeNoAccess:b().default.checkGate({gateName:"relations_show_no_access"})}):[]}const ye=2,Se=40;function we(e){const{timelineState:t,placeholderDate:o,subitemPlaceholderDate:n}=e,i=n??e.dateValue;if(!i)return;const r=t.zoomLevel.state,{snapUnit:a}=P[r],{startTimestamp:s,endTimestamp:l}=t.currentRange.state,{start:c,end:d}=L(i,a),u=d.valueOf()>s&&c.valueOf()<l,p=D(r,c.valueOf()-s)+ye,m=n?Math.max(p+Se,0):Math.max(p,0),f=D(r,d.valueOf()-s)-ye,g=D(r,l-s),v=Math.min(f,g),h=v/D(r,l-s);return{visible:u,isPlaceholder:Boolean(o),isExistingSubitemPlaceholder:Boolean(n),left:m,right:v,maskPercent:h}}},932753:(e,t,o)=>{o.d(t,{wG:()=>Kt,MO:()=>Ht,ME:()=>ht,W9:()=>ft,NZ:()=>oo,rl:()=>Bt,HW:()=>Dt,dp:()=>_t,ob:()=>ut,IH:()=>qt,tG:()=>vt,Vz:()=>ao,dj:()=>Nt,lG:()=>Gt,oh:()=>Lt,rm:()=>to,C_:()=>Ut,K_:()=>ro,mS:()=>Ft,fI:()=>Wt,A9:()=>Et,Wu:()=>bt,mc:()=>dt,n1:()=>At,W1:()=>jt,E7:()=>Yt,bu:()=>Qt,f8:()=>Zt,t5:()=>pt,Z5:()=>zt,Rm:()=>wt,$N:()=>It,$D:()=>Ot,xO:()=>kt,iG:()=>yt,Uy:()=>Mt,Es:()=>St,yc:()=>Rt,z2:()=>Ct,Ug:()=>mt});o(821057),o(492176),o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(7961),o(267602),o(653476),o(470928),o(30005),o(241792),o(731107),o(228244);var n=()=>o(730120),i=()=>o(492788),r=()=>o(506347),a=()=>o(926724),s=()=>o(903680),l=()=>o(820271),c=()=>o(790300),d=()=>o(870016),u=()=>o(577223),p=()=>o(455947),m=()=>o(608352),f=()=>o(226413),g=()=>o(520509),v=()=>o(892981),h=()=>o(570270),_=()=>o(336860),b=()=>o(874459),y=()=>o(965800),S=()=>o(817629),w=()=>o(109477),k=()=>o(799891),I=()=>o(998411),C=()=>o(956057),x=()=>o(35980),T=()=>o(530980),M=()=>o(741633),P=()=>o(217465),A=()=>o(605974),R=()=>o(494616),B=()=>o(396136),E=()=>o(752778),D=()=>o(139978),U=()=>o(81954),F=()=>o(245015),N=()=>o(788860),V=()=>o(513670),L=()=>o(150266),O=()=>o(839002),Z=()=>o(543172),j=()=>o(696459),K=()=>o(326966),z=()=>o(576441),H=()=>o(250303),q=()=>o(54512),W=()=>o(824462),G=()=>o(722920),$=()=>o(384667),Q=()=>o(139224),Y=()=>o(308186),J=()=>o(782646),X=()=>o(421654),ee=()=>o(282662),te=()=>o(528918),oe=()=>o(332542),ne=()=>o(636340),ie=()=>o(143346),re=()=>o(47443),ae=()=>o(824034),se=()=>o(794586),le=()=>o(435168),ce=()=>o(990966),de=()=>o(269299),ue=()=>o(423402),pe=()=>o(109757),me=()=>o(526243),fe=()=>o(276124),ge=()=>o(91097),ve=()=>o(141735),he=()=>o(594546),_e=()=>o(718959),be=()=>o(576868),ye=()=>o(861026),Se=()=>o(559729),we=()=>o(270315),ke=()=>o(615676),Ie=()=>o(989134),Ce=()=>o(521045),xe=()=>o(582835),Te=()=>o(487270),Me=()=>o(478824),Pe=()=>o(527278),Ae=()=>o(781105),Re=()=>o(138892),Be=()=>o(275200),Ee=()=>o(714966),De=()=>o(620218),Ue=()=>o(561707),Fe=()=>o(472753),Ne=()=>o(793935),Ve=()=>o(876822),Le=()=>o(972776),Oe=()=>o(341374),Ze=()=>o(419380),je=()=>o(804217),Ke=()=>o(749826),ze=()=>o(688789),He=()=>o(148882),qe=()=>o(826955),We=()=>o(965903),Ge=()=>o(807230);const $e=["clientType","aggregationStatus","requestBackend","isLoadTest","backendOptions"],Qe=["sort","reducerDependencies","upwardTraversalRelation","searchQuery","filter","currentPageInRelatedCollection","reducers","userId","filterToComputeDependencies","maxPreloadedRecords"],Ye=["filter","searchQuery","loadContentCover"],Je=["aggregation","subGroup","hideEmptyAggregationGroups","version"],Xe=["filter"],et=["property","enforceMaxAggregationLimit"];function tt(e,t){for(const o of t)void 0===e[o]&&delete e[o]}var ot=()=>o(887430);const nt=(0,N().vU)({importingCSV:{id:"databaseViewActions.importingCSV.loadingMessage",defaultMessage:"Importing"},uploadingCSV:{id:"databaseViewActions.uploadingCSV.loadingMessage",defaultMessage:"Uploading"},importFailed:{id:"databaseViewActions.importFailedError.message",defaultMessage:"Import failed."}}),it=(0,N().vU)({renameButtonTitle:{defaultMessage:"Rename",id:"database.collectionEditViewButtonPopup.renameButtonTitle"},statusName:{defaultMessage:"Status",id:"database.collectionEditViewButtonPopup.statusNameProperty"},dateName:{defaultMessage:"Date",id:"database.collectionEditViewButtonPopup.dateNameProperty"}}),rt=(0,N().vU)({currentSprintViewDefaultName:{defaultMessage:"Current Sprint",id:"collectionViewActions.typedView.currentSprintViewName"}}),at=10;function st(e,t){if(e||t){if(!e)return"add_filter";if(!t)return"remove_filter";if(!V().Xy(e,t)){if((0,p().aN)(e)&&(0,p().aN)(t))return e.property!==t.property?"change_filter":e.filter.operator!==t.filter.operator?"change_filter_operator":V().Xy(e.filter,t.filter)?void 0:"change_filter_value";if((0,p().Mm)(e)&&(0,p().Mm)(t))return e.timestamp!==t.timestamp?"change_filter":e.filter.operator!==t.filter.operator?"change_filter_operator":V().Xy(e.filter,t.filter)?void 0:"change_filter_value";if(!(0,p().vA)(e)||!(0,p().vA)(t))return"change_filter";{if(e.operator!==t.operator)return"change_filter_operator";function o(e){return(0,p().aN)(e)?`property/${e.property}`:(0,p().Mm)(e)?`property/${e.timestamp}`:(0,p().vA)(e)?`combinator/${e.operator}`:void(0,j().t1)(e)}const n=V().MR(e.filters??[],o),i=V().MR(t.filters??[],o),r=n.length,a=i.length;if(r<a)return"add_filter";if(a<r)return"remove_filter";for(let s=0;s<a;s++){const l=st(n[s],i[s]);if(l)return l}}}}}function lt(e,t){if(void 0===t)return;if(void 0===e)return"initial_load";if(!V().Xy(e.collectionView,t.collectionView))return"change_view";if(!V().Xy(e.loader.searchQuery,t.loader.searchQuery))return"change_search";if(!V().Xy(e.loader.sort,t.loader.sort))return"change_sort";const o=st(e.loader.filter,t.loader.filter);if(o)return o;const n=e.loader.reducers??{},i=t.loader.reducers??{};if(Object.keys(i).find((e=>{const t=n[e],o=i[e];return o&&(!t||!V().Xy(t,o))})))return"change_group";const r={reducers:void 0,filter:void 0,sort:void 0,reducerDependencies:void 0},a={...null==e?void 0:e.loader,...r},s={...null==t?void 0:t.loader,...r};return V().Xy(a,s)?void 0:"change_loader"}function ct(e){const t=e.collectionViewStore();if(!t)return 0;let o=0;const n=t.getFormatStore().getKeyStore("collection_groups").getValue(),i=t.getFormatStore().getKeyStore("board_columns").getValue();return null==n||n.forEach((e=>{!0===e.hidden&&o++})),null==i||i.forEach((e=>{!0===e.hidden&&o++})),o}function dt(e){const{environment:t,collectionViewBlockStore:o,collectionViewStore:a,collectionStore:l,collectionContextStore:c,isFullScreen:u,isRootChild:m,isInPeekRenderer:f,viewsModuleContextType:g,forceLocalQueryCollection:v}=e;ut({collectionContextStore:c});const h=t.currentUser.id;u&&(ae().Pg(t),ae().rM(t));const{remoteRequestStore:y,localResultStore:S}=c;if(a){var w;const e=Boolean(!c.isViewSpecificClientModeEnabledStore.state&&c.isClientModeEnabledStore.state&&l&&l.id===(null===(w=c.collectionStore())||void 0===w?void 0:w.id)),I=n().ou.fromMillis(me().ZP.getLocalDateRangeStart({collectionViewId:a.id,currentUserId:t.currentUser.id}));let T,M,P=0,R=0,B=0;const E=()=>{i().default.afterNextFlush((()=>{const e=y.state;c.isViewSpecificClientModeEnabledStore.state&&M&&e&&!V().Xy(M.loader.filter,e.loader.filter)&&(c.isClientModeEnabledStore.setState(!1),c.isViewSpecificClientModeEnabledStore.setState(!1));const n=lt(M,e);void 0===n||c.isClientModeEnabledStore.state&&!function(e,t,o,n){if(!o)return!1;if(null!=t&&t.loader.filter&&(0,p().SH)(null==t?void 0:t.loader.filter,(e=>(0,p().aN)(e)&&(0,A().zy)(e,o.getSchema()))))return!0;return(0,Ce().ki)(null==t?void 0:t.loader.reducers,o.getSchema(),n)}(0,e,l,o)||(Date.now()-R<=1e3?B++:(R=Date.now(),B=1),B>=25&&Ke().default.checkGate({gateName:"collection_client_log_looping_remote_request"})&&k().log({level:"warning",from:"queryCollectionRemoteRequest",type:"queryCollectionRemoteRequest",data:{miscDataToConvertToString:{data:{viewId:a.id,collectionId:null==l?void 0:l.id,clientModeEnabled:c.isClientModeEnabledStore.state,changedReason:n,lastRemoteRequest:M,nextRemoteRequest:e}}}}),function(e){const{environment:t,collectionContextStore:o,lastRemoteRequestReason:n,lastRemoteRequestHiddenGroupsCount:i,lastRemoteRequest:r,nextRemoteRequest:a}=e,s=(null==r?void 0:r.loader.reducers)??{},l=(null==a?void 0:a.loader.reducers)??{},c=[],d=[];for(const u of Object.keys(l)){const e=s[u],t=l[u];t&&(e||c.push({type:t.type,lastReducer:e,nextReducer:t}),e&&!V().Xy(e,t)&&d.push({type:t.type,lastReducer:e,nextReducer:t}))}if(c.length>0){const e=c.some((e=>{let{type:t}=e;return"results"===t||"aggregation"===t}));"initial_load"===n&&e&&H().aT({environment:t,collectionContextStore:o,request_reason:"hydrate_client"})}d.length>0&&ct(o)>i&&H().aT({environment:t,collectionContextStore:o,request_reason:"hide_group"})}({environment:t,collectionContextStore:c,lastRemoteRequestReason:T,lastRemoteRequestHiddenGroupsCount:P,lastRemoteRequest:M,nextRemoteRequest:e}),T=n,P=ct(c),Nt(t,c,{src:n},v)),M=e}))};y.addListener(E);const D=()=>{if((0,L().lB)(1)){const e=De().default.DO_NOT_USE_markLegacy("database_update_lag");De().default.DO_NOT_USE_measureAfterNextFlushLegacy(e,{environment:t})}};S.addListener(D);const U=function(e){const t=Jt(e.collectionViewId);return x().Z.get({userId:e.userId,key:t})}({userId:h,collectionViewId:a.id}),F=t.device.isPhone||U;c.remoteResultStore.setState(void 0),c.remoteCollectionIdsStore.setState([]),c.isLoadedStore.setState(!1),c.searchQueryStore.setState(""),c.searchOpenStore.setState(!1),c.isFullScreenStore.setState(u),c.isRootChildStore.setState(m),c.reducersStore.setState({}),c.groupsStore.reset(),c.groupsLimitStore.setState(Se().XD),c.boardColumnsLimitStore.setState(Se().XD),c.filtersBarOpenStore.setState(F),c.isInPeekRendererStore.setState(f),c.subitemExpandedStore.setState(new Map),c.chartErrorStore.setState(new Map),c.isClientModeEnabledStore.setState(e),c.wasServerResponseFromCache=void 0,c.requestBackend=void 0,c.isViewSpecificClientModeEnabledStore.setState(!1),c.throttleMsStore.setState(d().m),c.asyncAggregationStatusStore.reset(),c.viewsModuleContextStore.setState(g),c.dateRangeStartStore.setState((0,b().IS)(I.startOf("month").valueOf(),_e().AK.state).valueOf()),c.dateRangeEndStore.setState(u&&!t.device.isMobile?(0,b().V7)(I.endOf("month").plus({month:1}).valueOf(),_e().AK.state).valueOf():(0,b().V7)(I.endOf("month").valueOf(),_e().AK.state).valueOf());const N=null==a?void 0:a.getFormat(),O=null==N?void 0:N.collection_view_source;if("typed"===(null==O?void 0:O.type))c.setContext({type:"collectionTypedView",collectionViewBlockStore:o,databaseType:O.databaseType,collectionViewStore:a,pageVisitSourceOverride:(0,Ue().ib)({blockOrCollectionId:o.id})});else if((0,_().WW)(O)||(0,_().v7)(O))l&&c.setContext({type:"collectionSystemView",collectionViewBlockStore:o,collectionViewStore:a,collectionStore:l,pageVisitSourceOverride:(0,Ue().ib)({blockOrCollectionId:a.id})});else if(O&&"collection"!==O.type)(0,j().t1)(O);else{const e=o.getSpaceId(),n=l?(0,ge().K)(t.idCreator,e,null==l?void 0:l.id):void 0;l&&a.id===n?c.setContext({type:"collectionSettings",collectionViewBlockStore:o,collectionStore:l}):c.setContext({type:"collectionView",collectionViewBlockStore:o,collectionStore:l,collectionViewStore:a,pageVisitSourceOverride:(0,Ue().ib)({blockOrCollectionId:o.id})})}c.remoteRequestStoreCallback=E,c.localResultStoreCallback=D;const Z=eo(a),z=Me().y.get(Z);if(z){const e=0===z.resultSet.blockIds.size,t=c.getPageVisitSourceOverride();(t===r().tY.PersonalHomeTileTasks||t===r().tY.PersonalHomePageTasks)&&(e||Me().y.locallyMutatedTasksDatabase)?Me().y.locallyMutatedTasksDatabase=!1:(c.resetLoadingState(),c.resultSetStore.setState(V().Xh(z.resultSet)),c.remoteCollectionIdsStore.setState(V().Xh(z.collectionIds)),c.remoteResultStore.setState(V().Xh(z.remoteResult)),c.isLoadedStore.setState(!0))}const q=He().transactionQueue.isPendingTransactionForRecord(a.pointer);c.wasCreatedThisSessionStore.setState(q);const W=function(e){let{currentUserId:t,collectionViewId:o,viewsModuleCurrentPageId:n}=e;const i=x().Z.get({userId:t,key:Xt({collectionViewId:o,viewsModuleCurrentPageId:n})});if(i)return(0,K().dj)(i)}({currentUserId:t.currentUser.id,collectionViewId:a.id,viewsModuleCurrentPageId:c.viewsModuleContextStore.isInLayoutBuilder()?void 0:c.viewsModuleContextStore.currentPageInRelatedCollectionId()});c.temporaryStateStore.setState(W||{});const{currentSpaceStore:G}=Ve().default.state;if(u&&!l&&c.hasSingleCollection()&&Q().r$({collectionContextStore:c,collectionSettingsStore:c.settingsStore}),l&&G&&l.getSpaceId()===G.id&&l.isDefaultRecordCache()&&!(0,s().EW)(o.getSystemBlockTypeStore().getValue())&&!c.settingsStore.state.open){!function(e){let{currentUserId:t,spaceId:o,collectionId:n}=e;const i=Gt({currentUserId:t,spaceId:o}),r=V().jj([n,...i]).slice(0,at);x().Z.set({userId:t,key:$t(o),value:JSON.stringify(r)})}({currentUserId:t.currentUser.id,spaceId:G.id,collectionId:l.id})}c.frozoneStore.setState({isScrolled:!1,scrollerWidth:void 0,scrollerLeftOffset:void 0,scrollerLeftPadding:void 0,frozenIndex:void 0,tryShowHiddenFrozenColumn:!1}),c.visitSessionId=C().Il(),c.virtualizedModule.reset(),c.didFireLoadEventsStore.setState(!1),c.timingTracker.reset()}}function ut(e){const{collectionContextStore:t}=e,{localResultStore:o,remoteRequestStore:n,remoteRequestStoreCallback:i,localResultStoreCallback:r}=t;i&&n.removeListener(i),r&&o.removeListener(r),t.infiniteScrollLongTaskObserver.disconnect()}function pt(e){const{dateRangeStart:t,dateRangeEnd:o,collectionContextStore:n}=e;n.dateRangeStartStore.setState(t),n.dateRangeEndStore.setState(o)}function mt(e){const{searchQuery:t,collectionContextStore:o}=e;o.collectionViewStore()&&(o.searchQueryStore.setState(t||""),o.groupsStore.resetAllLimits())}function ft(e){const{environment:t,collectionViewBlockStore:o,collectionView:n,transaction:i,isEphemeral:r=!1}=e,a=ne().ae({environment:t,table:D().np,value:n,inMemoryRecordCache:o.inMemoryRecordCache,transaction:i}),s=qe().Xr.createChildStore(o,{table:D().np,id:a.id,spaceId:o.getSpaceId()});return r||ee().R3({parentStore:o.getCollectionViewsStore(),appendStore:s,transaction:i}),s}function gt(e){const{environment:t,collectionStore:o,property:n,transaction:i}=e,r=o.getSchema()[n];if(!r||!f().D1(r))return;const a=(0,Te().TS)({environment:t,table:R().cv,spaceId:o.getSpaceId()});ne().ae({environment:t,table:R().cv,inMemoryRecordCache:o.inMemoryRecordCache,value:{id:a,parent_id:o.id,parent_table:o.table,alive:!0,space_id:o.getSpaceId(),status:"active",trigger:{id:C().Il(),type:"button"}},transaction:i}),ne().sW({store:o.getSchemaStore(),data:{[n]:{...r,automation_id:a}},transaction:i})}function vt(e){var t;const{environment:o,collectionViewBlockStore:n,collectionViewStore:i,intl:r,transaction:s,copyNameExactly:l=!1}=e;if(!n)return;const c=i.computeWithRecordValues((e=>{let{getRecordValueAndSubscribe:t}=e;return t(i)}));if(!c)return;let d;(null===(t=c.format)||void 0===t?void 0:t.app_config_uri)===a().g3?Pe().Z.formatMessage(rt.currentSprintViewDefaultName):d=l?c.name:(0,S().n)(c.name||r.formatMessage(ot().b1[c.type]));const u=(0,Te().TS)({environment:o,table:D().np,spaceId:n.getSpaceId()});return ft({environment:o,collectionViewBlockStore:n,collectionView:{...c,id:u,name:d},transaction:s})}function ht(e){const{environment:t,collectionContextStore:o,newViewType:n="table",transaction:r,skipOpenSettings:a}=e,s=o.collectionViewBlockStore(),l=o.collectionViewStore(),c=o.settingsStore;if(!s)return;const d=function(e){var t,o;const{environment:n,collectionContextStore:i,collectionViewBlockStore:r,newViewType:a,existingCollectionViewStore:s,transaction:l}=e,c=i.collectionStore(),d=null==c||null===(t=c.getFormat())||void 0===t?void 0:t.collection_default_arrows_by,u=ft({environment:n,collectionViewBlockStore:r,collectionView:{type:a??"table",parent_id:r.id,parent_table:B().iU,alive:!0,space_id:r.getSpaceId(),format:{table_properties:null==s||null===(o=s.getFormat())||void 0===o?void 0:o.table_properties,timeline_arrows_by:d?{property:d}:void 0,table_subitem_toggle_column:"title",...s&&"collectionTypedView"===i.contextType?{collection_view_source:s.getFormat().collection_view_source,property_filters:s.getFormat().property_filters}:{}}},transaction:l});return Tt({environment:n,collectionContextStore:i,collectionViewStore:u,collectionStore:c,newViewType:a,transaction:l}),u}({environment:t,collectionContextStore:o,collectionViewBlockStore:s,newViewType:n,existingCollectionViewStore:l,transaction:r});"chart"===n&&(G().Q({environment:t,collectionContextStore:o,collectionViewId:d.id,from:"new_view_button"}),Ke().default.logEvent("chart_created")),Zt({environment:t,collectionContextStore:o,collectionViewId:d.id,isFullScreen:o.isFullScreenStore.state,isRootChild:o.isRootChildStore.state,isInPeekRenderer:o.isInPeekRendererStore.state}),a||i().default.afterNextFlush((()=>{s.getCollectionViewSourceCollectionStore()?(Q().r$({collectionContextStore:o,collectionSettingsStore:c}),Q().wl({collectionSettingsStore:c,item:{type:"createView"}})):Q().r$({collectionContextStore:o,collectionSettingsStore:c})}))}function _t(e){const{collectionViewBlockStore:t,collectionViewStore:o,transaction:n}=e,i=qe().Xr.createChildStore(t,{table:D().np,id:o.id,spaceId:t.getSpaceId()}),r=o.getFormat().app_config_uri;if(r){var a;const e=null===(a=t.getFormat())||void 0===a?void 0:a.app_uri_map;e&&delete e[r],X().FH({stores:[t],update:{app_uri_map:e},transaction:n})}ee().Od({parentStore:t.getCollectionViewsStore(),childToRemoveStore:i,transaction:n})}function bt(e){const{collectionViewBlockStore:t,newViewIds:o,transaction:n}=e,i=t.getCollectionViewStores(),{beforeOps:r}=(0,y().q)(i.map((e=>e.id)).slice(0,o.length),o);V().Ed(r,((e,i)=>{const r=qe().Xr.createChildStore(t,{table:D().np,id:i,spaceId:t.getSpaceId()});if(e)ee().Vt({parentStore:t.getCollectionViewsStore(),insertStore:r,beforeStore:qe().Xr.createChildStore(t,{table:D().np,id:e,spaceId:t.getSpaceId()}),transaction:n});else{const e=V().Z$(o.filter((e=>e!==i)));ee().BE({parentStore:t.getCollectionViewsStore(),insertStore:r,afterStore:e?qe().Xr.createChildStore(t,{table:D().np,id:e,spaceId:t.getSpaceId()}):void 0,transaction:n})}}))}function yt(e){const{collectionViewStore:t,update:o,transaction:n}=e;ne().sW({store:t,data:o,transaction:n})}function St(e){const{collectionViewStore:t,update:o,transaction:n}=e;ne().sW({store:t.getQueryStore(),data:o,transaction:n})}function wt(e){const{environment:t,collectionStore:o,update:n,transaction:i}=e,r=o.getSchema();n.schema&&(n.schema=f().Fn(n.schema)),n.deleted_schema&&(n.deleted_schema=f().Fn(n.deleted_schema));const a={...n};if(n.deleted_schema){const e=o.getDeletedSchema(),t=(0,h().jf)({schemas:[e,n.deleted_schema],prioritizeLooserLimitRule:!0});t.error?k().log({level:"error",from:"collectionViewActions",type:"updateCollection",error:t.error}):a.deleted_schema=t.value}ne().sW({store:o,data:a,transaction:i}),n.schema&&Ut({environment:t,collectionStore:o,oldSchema:r,newSchema:n.schema,transaction:i})}function kt(e){const{environment:t,collectionStore:o,update:n,transaction:i}=e,r=o.getSchema(),a=f().Fn(n);ne().sW({store:o.getSchemaStore(),data:a,transaction:i}),Ut({environment:t,collectionStore:o,oldSchema:r,newSchema:o.getSchema(),transaction:i})}function It(e){const{collectionStore:t,update:o,transaction:n}=e;ne().sW({store:(0,qe()._J)(t,t.pointer,["deleted_schema"]),data:o,transaction:n})}function Ct(e){const{environment:t,collectionContextStore:o,newViewType:n,transaction:i}=e,r=o.collectionViewStore(),a=o.collectionViewBlockStore(),s=o.collectionStore();if(!r||!a)return;if(n===r.getType()||"page"===n||"form_editor"===n)return;"chart"===n&&G().Q({environment:t,collectionContextStore:o,collectionViewId:r.id,from:"collection_view_type_change"});const l=r.getType();ne().sW({store:r,data:{type:n},transaction:i}),Tt({environment:t,collectionContextStore:o,collectionViewStore:r,collectionStore:s,oldViewType:l,newViewType:n,transaction:i}),Pt({collectionContextStore:o})}function xt(e){var t;const{environment:o,collectionContextStore:n,collectionViewStore:i,collectionStore:r,newViewType:a,schema:s,transaction:l}=e,c=n.permissionScopesStore.state;switch(a){case"board":let e=(null===(t=i.getFormat().collection_group_by)||void 0===t?void 0:t.property)??ot().Se(s);if(r&&!e){e=(0,Z().ZP)();const t=(0,f().I4)("Status",Pe().Z.getIntl());c.canConfigureCollection&&kt({environment:o,collectionStore:r,update:{[e]:t},transaction:l})}return e;case"calendar":let n=ot().PD(s);if(r&&!n){n=(0,Z().ZP)();const e={name:Pe().Z.formatMessage(it.dateName),type:"date"};c.canConfigureCollection&&kt({environment:o,collectionStore:r,update:{[n]:e},transaction:l})}return n;case"timeline":let a=ot().HI(s);if(r&&!a){a=(0,Z().ZP)();const e={name:Pe().Z.formatMessage(it.dateName),type:"date"};c.canConfigureCollection&&kt({environment:o,collectionStore:r,update:{[a]:e},transaction:l})}return a}}function Tt(e){const{environment:t,collectionContextStore:o,collectionViewStore:n,collectionStore:i,oldViewType:r,newViewType:a="table",transaction:s}=e,c=o.normalizedSchemaStore.state,d=o.normalizedFormatStore.state,u=null==i?void 0:i.isSyncedCollection();switch(a){case"table":case"feed":ne().sW({store:n.getQueryStore(),data:{aggregations:[]},transaction:s});break;case"board":const e=n.getFormat().board_columns_by,r=xt({environment:t,collectionContextStore:o,collectionViewStore:n,collectionStore:i,newViewType:a,schema:c,transaction:s}),p=o.normalizedSchemaStore.state,g=r&&p[r];if(!r||!g||!(0,m().LG)(g))break;X().FH({stores:[n],update:{board_columns_by:{...(0,m().fw)({property:r,propertySchema:g,isCollectionTypedView:"collectionTypedView"===o.contextType}),disableBoardColorColumns:null==e?void 0:e.disableBoardColorColumns},collection_group_by:void 0},transaction:s});break;case"calendar":const v=xt({environment:t,collectionContextStore:o,collectionViewStore:n,collectionStore:i,newViewType:a,schema:c,transaction:s});ne().sW({store:n.getQueryStore(),data:{aggregations:[],calendar_by:v},transaction:s});break;case"gallery":X().FH({stores:[n],update:{gallery_cover:{type:"page_content"}},transaction:s}),ne().sW({store:n.getQueryStore(),data:{aggregations:[]},transaction:s});break;case"timeline":const h=xt({environment:t,collectionContextStore:o,collectionViewStore:n,collectionStore:i,newViewType:a,schema:c,transaction:s});ne().sW({store:n.getQueryStore(),data:{aggregations:[],timeline_by:h},transaction:s});break;case"chart":if(!n.getFormat().chart_config){const e=(0,l().K0)({collectionSchema:o.normalizedSchemaStore.state});X().FH({stores:[n],update:{chart_config:e,subitem_display_mode:"flattened"},transaction:s})}break;case"list":if(void 0===d.list_properties){const e=[{property:u?f().bf:f().iw,visible:!0}],t=Object.keys(c).find((e=>{const t=c[e];return Boolean(t&&(0,we().Rb)(t))}));void 0!==t&&e.push({property:t,visible:!0}),X().FH({stores:[n],update:{list_properties:e},transaction:s})}if(d.list_properties&&u){const e=d.list_properties.findIndex((e=>e.property===f().iw));if(-1!==e){const t=d.list_properties[e];d.list_properties[e]={...t,property:f().bf},X().FH({stores:[n],update:{list_properties:d.list_properties},transaction:s})}}ne().sW({store:n.getQueryStore(),data:{aggregations:[]},transaction:s});break;case"chat":break;default:(0,j().t1)(a)}const p=null==i?void 0:i.getFormat().subitem_property;if(p&&!(0,xe().Av)(a)){const e=r&&!(0,xe().Av)(a)?(0,w().oz)(r):void 0,t=(e?n.getFormat()[e]??[]:[]).find((e=>e.property===p))??{property:p,visible:!0},o=(0,w().oz)(a);if(o){const e=n.getFormat()[o]??[];X().FH({stores:[n],update:{[o]:[...e,t]},transaction:s})}}}function Mt(e){const{icon:t,collectionViewStore:o,transaction:n}=e;X().FH({stores:[o],update:{collection_view_icon:t},transaction:n})}function Pt(e){const{collectionContextStore:t}=e,o=t.collectionViewBlockStore();if(!o)return;const n=Fe().R.findCollectionViewBlockFromStore(o);n&&"resetLeftScrollAfterFlush"in n&&n.resetLeftScrollAfterFlush&&n.resetLeftScrollAfterFlush()}function At(e){const{collectionContextStore:t}=e,o=t.collectionViewBlockStore();if(o){const e=Fe().R.findCollectionViewBlockFromStore(o);if(e){const t=e.getNode();t&&(0,Be().Wr)(t,{edgeDist:0,animate:!1})}}}function Rt(e){const{collectionContextStore:t,transaction:o,source:n}=e,i=t.collectionViewStore();if(i&&(X().FH({stores:[i],update:{collection_view_source:n},transaction:o}),"collection"===n.type)){const e=qe().NW.createChildStore(i,{table:E().vF,id:n.id,spaceId:n.spaceId});if(!e.isDefined())return;!function(e){var t,o,n;const{collectionContextStore:i,collectionStore:r,transaction:a}=e,s=i.collectionViewStore();if(!s||!r.isDefined())return;const d=ot().Vv(r),u=null===(t=r.getFormat())||void 0===t?void 0:t.collection_default_arrows_by,p=i.collectionStore(),m=(null==p?void 0:p.pointer.id)!==r.pointer.id,f=r.getSchema();let g=s.getChartConfig();m&&"chart"===s.getType()&&g&&"placeholder"!==g.type&&(g=function(e){let{chartConfig:t,collectionSchema:o}=e;return(0,c().u)(t)?(0,l().K0)({collectionSchema:o,axisChartType:t.type}):"donut"===t.type?(0,l().dq)({collectionSchema:o}):(0,l().K0)({collectionSchema:o,axisChartType:"column"})}({chartConfig:g,collectionSchema:f}));const v={table_properties:null==d||null===(o=d.getFormat())||void 0===o?void 0:o.table_properties,collection_pointer:{table:E().vF,id:r.id,spaceId:r.getSpaceId()},chart_config:g,timeline_arrows_by:u?{property:u}:void 0,table_subitem_toggle_column:"title"},h=null==i?void 0:i.normalizedSchemaStore.state;ne().sW({store:s,data:(0,K().Q2)({format:v,query2:{sort:null==d||null===(n=d.getQuery(h))||void 0===n?void 0:n.sort}}),transaction:a})}({collectionContextStore:t,collectionStore:e,transaction:o})}}function Bt(e){const{environment:t,collectionViewBlockStore:o,transaction:n,collectionValue:i}=e,r=ne().ae({environment:t,table:E().vF,value:{...i,parent_id:o.id,parent_table:B().iU,alive:!0,space_id:o.getSpaceId()},inMemoryRecordCache:o.inMemoryRecordCache,transaction:n}),a=qe().NW.createChildStore(o,r.pointer);return(0,fe().z)({collectionViewBlockStore:o,collectionPointer:a.pointer,transaction:n}),a}function Et(e){const{collectionViewBlockStore:t,collectionStore:o,transaction:n}=e;if(!t.isDefined()||!o.isDefined())return;[t].forEach((e=>{var t;e.getCollectionViewStores().filter((e=>{var t;return(null===(t=e.getCollectionStore())||void 0===t?void 0:t.id)===o.id})).forEach((t=>_t({collectionViewBlockStore:e,collectionViewStore:t,transaction:n}))),(null===(t=e.getFormat().collection_pointer)||void 0===t?void 0:t.id)===o.id&&(ne().sW({store:e,data:{collection_id:null},transaction:n}),ne().sW({store:e.getFormatStore(),data:{collection_pointer:null},transaction:n}))})),oe().hh({childStore:o,transaction:n})}function Dt(e){const{environment:t,collectionStore:o,performTransaction:n}=e;return de().createAndCommit({userAction:"collectionViewActions.createSchemaUpdateTransaction",environment:t,canUndo:!0,perform:e=>{const i=o.getSchema(),r=n(e),a=o.getSchema();return Ut({environment:t,collectionStore:o,oldSchema:i,newSchema:a,transaction:e}),r}}).performResult}function Ut(e){const{environment:t,collectionStore:o,oldSchema:n,newSchema:i,transaction:r}=e,a=f().Fn(n),s=f().Fn(i),l=Object.keys(s),c=Ke().default.checkGate({gateName:"collections_property_type_change_rename_group"});for(const p of l){const e=a[p],n=s[p];if(n){if("status"===n.type&&"status"!==(null==e?void 0:e.type)){let i;i="select"===(null==e?void 0:e.type)||"multi_select"===(null==e?void 0:e.type)?(0,u().r9)(n.name,e.options??[],Pe().Z.getIntl()):n.groups&&n.options&&n.defaultOption?n:f().I4(n.name,Pe().Z.getIntl());const a={...s,[p]:i};if(ne().sW({store:o,data:{schema:a},transaction:r}),"checkbox"===(null==e?void 0:e.type)&&"status"===n.type){const e=i.groups??[],n=e[e.length-1];n&&$().hz({environment:t,collectionStore:o,property:p,oldValue:{type:"checkbox",value:!0},newValue:{type:"status",value:{type:"by_group",group:n.name}},transaction:r,preventPublishAppEventsForBlockUpdates:c})}}if("status"===(null==e?void 0:e.type)&&"checkbox"===n.type){const n=e.groups??[],i=e.options??[],a=n[n.length-1],s=i.filter((e=>{var t;return null==a||null===(t=a.optionIds)||void 0===t?void 0:t.includes(e.id)}));for(const e of s)$().hz({environment:t,collectionStore:o,property:p,newValue:{type:"checkbox",value:!0},oldValue:{type:"status",value:{type:"by_option",option:e.value}},transaction:r,preventPublishAppEventsForBlockUpdates:c})}}}for(const u of l){const e=a[u],n=s[u];!n||e&&f().cu(e)||!f().cu(n)||W().callApi({eventName:"getSelectPropertyValues",environment:t,data:{collection:{id:o.id,spaceId:(0,U().J)(o.pointer.spaceId)},property:u}}).then((e=>{if("failed"===e.type)throw e.error;const{results:i}=e.data,r=n.options||[],a=f().Fn(o.getSchema()),s=V().mN([...r,...i.map((e=>({id:(0,Z().ZP)(),value:e})))],(e=>e.value));for(const t of s)t.color||(t.color=f().TL(s));const l={...n,options:s},c={...a,[u]:l};de().createAndCommit({userAction:"collectionViewActions.handleCollectionSchemaUpdated",environment:t,canUndo:!0,perform:e=>{ne().sW({store:o,data:{schema:c},transaction:e})}})})).catch((()=>{}))}const d=V().jj([...Object.keys(a),...Object.keys(s)]);for(const u of d){const e=a[u],n=s[u],i=e&&f().cu(e)||"status"===(null==e?void 0:e.type),l=n&&f().cu(n)||"status"===(null==n?void 0:n.type);if(i&&l&&e.type===n.type){const i=n,a=e.options||[],s=i.options||[],l=V().jj([...a.map((e=>e.id)),...s.map((e=>e.id))]);for(const c of l){const i=a.find((e=>e.id===c)),l=s.find((e=>e.id===c));if(i&&l&&i.value!==l.value){const a="status"===e.type?{type:"status",value:{type:"by_option",option:i.value}}:{type:e.type,value:i.value},s="status"===n.type?{type:"status",value:{type:"by_option",option:l.value}}:{type:n.type,value:l.value};$().hz({environment:t,collectionStore:o,property:u,oldValue:a,newValue:s,transaction:r,preventPublishAppEventsForBlockUpdates:!1})}}}}for(const u of d){const e=s[u];"button"!==(null==e?void 0:e.type)||e.automation_id||gt({environment:t,collectionStore:o,property:u,transaction:r})}}function Ft(e){const{store:t,environment:o}=e;let n;const i={},r=performance.now();pe().cR({environment:o,bucket:"temporary",onStart:e=>{n=e,te().j({message:nt.uploadingCSV})},onCompleteWithToken:e=>{i.uploadTimeTaken=performance.now()-r,i.firstTimeNavigateToCollection=i.uploadTimeTaken,(async(e,n,i)=>{te().j({message:nt.importingCSV});const r=t.getCollectionStore();if(!r)return;if(!Fe().R.findCollectionViewBlockFromStore(t))return;const a=(0,I().r)(),s=J().Lj(o,z().E,{importType:"MergeIntoCollection",fileURL:e,fileName:n,collection:{id:r.id,spaceId:(0,U().J)(r.pointer.spaceId)},spaceId:(0,U().J)(r.pointer.spaceId),userTimeZone:a,signedToken:i}),l=Ke().default.checkGate({gateName:"csvimport_faster_navigate_to_page_enabled"});let c=!1;for await(const t of s){if(t.error)throw Y().UW(Pe().Z.formatMessage(nt.importFailed)),te().x(),t.error;!c&&l&&"status"in t.value&&"updated_collection"===t.value.status.message&&(c=!0,te().x())}te().x()})(e[0].fileUrl,n[0].name,e[0].signedToken),i.overallTimeTaken=performance.now()-r;for(const[t,n]of Object.entries(i))(0,he().j)({environment:o,event:{eventName:"import_file_finished",eventProperties:{importUploadType:"csv",importType:"MergeIntoCollection",importLatency:n,importSource:"file",importLatencyType:t,importFileCount:1}}});k().log({level:"info",from:"mergeWithCSV",type:"mergeWithCSVFinished",data:{miscDataToConvertToString:{data:{uploadType:"csv",importType:"MergeIntoCollection",importLatencies:i,importSource:"file",fileNames:[n[0].name]}}}})},onError:e=>{te().x(),Y().UW(Pe().Z.formatMessage(nt.importFailed))}})}async function Nt(e,t,o,n){const i=t.collectionViewStore(),{remoteRequestStore:r}=t;if(!r||!i)return;const s=r.state;if(!s)return;const l=t.createUpdateCounter().latestRequestUpdateCounter,c=t.remoteResultStore.state;je().default.state.online&&c&&await He().transactionQueue.drain();const d=i.inMemoryRecordCache;if(!t.shouldUpdate(l))return;t.isLoadingStore.setState(!0),t.remoteErrorStore.setState(void 0);const u=De().default.DO_NOT_USE_markLegacy("collections.remote_query_collection_latency"),p=d===e.defaultRecordCache.inMemoryRecordCache,m=Ke().default.checkGate({gateName:"collections_skip_default_record_cache_check"});let f;if(!n&&je().default.state.online&&(m||p)){const n=t.timingTracker.startRequestTracking(),r="initial_load"===o.src?function(e){const t=(0,V().Xh)(e);tt(t,$e);const{loader:o}=t;if(tt(o,Qe),o.reducers)for(const n of Object.values(o.reducers))switch(n.type){case"results":tt(n,Ye);break;case"groups":tt(n,Je);break;case"aggregation":tt(n,Xe),tt(n.aggregation,et)}return t}(s):s,a=Ke().default.checkGate({gateName:"collections_xws"})?(0,M().Bb)({spaceId:s.source.spaceId}):void 0,c="initial_load"===o.src&&"chart"!==i.getType()&&!Object.values(r.loader.reducers||{}).some((e=>"groups"===e.type)),d=null==i?void 0:i.id,p=(0,Re().Z)(d),m=[];if(c){let i=!1;const c={};Object.entries(r.loader.reducers||{}).forEach((e=>{let[t,o]=e;"aggregation"!==o.type?c[t]=o:i=!0}));const d={...r,loader:{...r.loader,reducers:c},aggregationStatus:i?"stripped":void 0};if(f=W().queryCollection({environment:e,data:d,tracking:o,prefetchCacheKey:p,headers:a}).then((r=>{const a=ye().vS(t,o.src);if(De().default.DO_NOT_USE_measureLegacy(u,{environment:e,data:a}),"success"===r.type)return"initial_load"===o.src&&F().Z.set((0,Re().Z)(s.collectionView.id),d),t.timedOutRequestCounter=0,t.timingTracker.finishRequestTracking(n,"success"),Vt({environment:e,remoteRequest:s,collectionContextStore:t,response:r.data,updateCounterForRequest:l,keepAggregationResults:i});"failed"===r.type&&(t.remoteErrorStore.setState({requestSrc:o.src,errorBody:r.body}),t.timingTracker.finishRequestTracking(n,"failed"),r.status>=500&&r.status<600&&io(t))})),m.push(f),i){t.asyncAggregationStatusStore.setState({...t.asyncAggregationStatusStore.state,calculating:!0});const n=f.then((()=>{const n=t.timingTracker.startRequestTracking();return W().queryCollection({environment:e,data:{...s,aggregationStatus:"full"},tracking:o,prefetchCacheKey:p,headers:a}).then((i=>{if("success"===i.type)return t.timedOutRequestCounter=0,t.timingTracker.finishRequestTracking(n,"success"),Vt({environment:e,remoteRequest:s,collectionContextStore:t,response:i.data,updateCounterForRequest:l});"failed"===i.type&&(t.remoteErrorStore.setState({requestSrc:o.src,errorBody:i.body}),t.timingTracker.finishRequestTracking(n,"failed"),i.status>=500&&i.status<600&&io(t))})).finally((()=>{t.asyncAggregationStatusStore.setState({calculating:!1})}))}));m.push(n)}}else f=W().queryCollection({environment:e,data:r,tracking:o,prefetchCacheKey:p,headers:a}).then((i=>{const r=ye().vS(t,o.src),a="success"===i.type||"failed"===i.type&&!i.offline?i.headers["X-Notion-Request-Id"]:void 0;if(De().default.DO_NOT_USE_measureLegacy(u,{environment:e,data:{...r,request_ids:a?[a]:void 0}}),"success"===i.type)return"initial_load"===o.src&&F().Z.set((0,Re().Z)(s.collectionView.id),s),t.asyncAggregationStatusStore.setState({calculating:!1}),t.timedOutRequestCounter=0,t.timingTracker.finishRequestTracking(n,"success"),Vt({environment:e,remoteRequest:s,collectionContextStore:t,response:i.data,updateCounterForRequest:l});"failed"===i.type&&(t.remoteErrorStore.setState({requestSrc:o.src,errorBody:i.body}),t.timingTracker.finishRequestTracking(n,"failed"),i.status>=500&&i.status<600&&io(t))})),m.push(f);if(!(await(0,O().OI)(1e4,m)).timeout)return}else try{const o=await async function(e,t,o){const{source:n,collectionView:i,loader:r}=t,s=e.currentUser.id;let l;if("collection"!==n.type)throw new Error("TODO: support typed source");l={table:E().vF,id:n.id};const c=Date.now(),d=await Ae().Ye({environment:e,pointer:l,inMemoryRecordCache:o});if(null==d||!d.model)throw new Error("Collection not found.");const u=d.model,p=await Ae().Ye({environment:e,pointer:{table:D().np,id:i.id},inMemoryRecordCache:o});if(null==p||!p.model)throw new Error("Collection view not found.");const m=T().s85.fromMonomorphicFunctionUnsafe((async t=>{const o=await Ae().Ye({environment:e,pointer:t});return null==o?void 0:o.model})),f=p.model,h=P().RecordMap.create(),_=T().omK.fromRecordMap(h),b=u.getNormalizedSchema(),{groupsReducerIds:y,reducerIdsWithNoGroupDependencies:S}=v().x3(r.reducers,r.reducerDependencies),w=Ke().default.getConfigKey("collection_request_settings","clientFormulaTimeoutMs"),k=await ve().F.formulas.load(),I={schema:b,pageSort:(null==f?void 0:f.getPageSort())||[],collectionViewId:i.id,loader:r,userId:s,userStartOfWeek:_e().AK.state,currentTime:c,getRecordModel:_,intl:Pe().Z.getIntl(),isSorted:!1,relativeVariableResult:void 0,currentPageInRelatedCollection:r.currentPageInRelatedCollection,isSprintPlanningView:(null==f?void 0:f.getAppConfigUri())===a().sV,collectionSourceType:n.type,groupsReducerIds:y,reducerIdsWithNoGroupDependencies:S,formulaTimeoutMs:w,resultCache:new Map,regExpCache:new Map,experimentService:Ke().default,collectionFeatureGates:(0,ke().W)(),formulasModule:k},C=u.__IM_SORRY__getValue(),x=v().fk(I),M=(await Ae().ne({environment:e,collection:u,inMemoryRecordCache:o})).filter((e=>{let{model:t}=e;return null==t?void 0:t.alive})),A=V().oA(M.map((e=>{let{model:t}=e;return null==t?void 0:t.__IM_SORRY__getValue()}))),R=(r.reducers?Object.values(r.reducers):[]).some((e=>Boolean("results"===e.type&&e.loadContentCover))),U=new Map,F={};A.forEach((e=>F[e.id]=u));const N=f.getFormat(),L=f.getType(),O=N&&L&&v().ps(N,L,b),Z=await(0,g().Ct)({collectionValueOrModel:C,loader:r,loadAllProperties:!1,recordMap:h,loadRecordModel:m,dependencyCache:U,searchProperties:O});await(0,g().c_)({blocks:A,dependencies:Z,blockIdToAssociatedCollectionModelCache:F,recordMap:h,loadRecordModel:m,dependencyCache:U,resultCache:I.resultCache,regExpCache:I.regExpCache,experimentService:Ke().default,collectionFeatureGates:(0,ke().W)(),userId:r.userId}),R&&await v().jF({blocks:A,loadRecordModel:m,recordMap:h});for(const a of A)v().BW(a,C,I,x);const{result:j}=v().kk(I,x),K=P().RecordMapWithRole.create(),z=v().aW({result:j});return await Promise.all(z.map((async t=>{const n=await Ae().Ye({environment:e,pointer:{table:B().iU,id:t},inMemoryRecordCache:o});n&&K.setModelAndRole({table:B().iU,id:t},n.model,n.role)}))),K.setModelAndRole(l,d.model,d.role),K.setModelAndRole({table:D().np,id:i.id},p.model,p.role),{result:j,recordMap:K.toJson(),relativeVariableResult:void 0,collectionIds:void 0,shouldUseClientMode:!1,isViewSpecificClientMode:!1,allBlockIds:void 0}}(e,s,d),n=P().RecordMapWithRole.create(o.recordMap);ie().fL({environment:e,inMemoryRecordCache:d,recordMap:n,debugSource:"collectionViewActions.fetchRemoteResult (localResponse)"}),Vt({environment:e,collectionContextStore:t,remoteRequest:void 0,response:o,updateCounterForRequest:l})}catch(h){}finally{t.resetLoadingState()}f&&f.catch((e=>{}))}function Vt(e){const{environment:t,remoteRequest:o,collectionContextStore:n,response:i,updateCounterForRequest:r,keepAggregationResults:a}=e,s=n.collectionViewStore();if(!n.shouldUpdate(r))return;const l=n.remoteResultStore.state;if(!l||!V().Xy(l,i.result)){var c;const e=i.result;if("reducer"===i.result.type){if(a){const t=Object.entries((null==l?void 0:l.reducerResults)||{}).filter((e=>{let[t,o]=e;return"aggregation"===o.type})).reduce(((e,t)=>{let[o,n]=t;return e[o]=n,e}),{});e.reducerResults={...t,...e.reducerResults}}n.remoteResultStore.setState(e)}if(void 0===n.wasServerResponseFromCache){var d,u;let e="NA";!0===(null===(d=i.tags)||void 0===d?void 0:d.isLoaded)?e="CACHED":!1===(null===(u=i.tags)||void 0===u?void 0:u.isLoaded)&&(e="UNCACHED"),n.wasServerResponseFromCache=e}var p;if(void 0===n.requestBackend)n.requestBackend=null===(p=i.tags)||void 0===p?void 0:p.backendUsed;const t=null===(c=i.clientSettings)||void 0===c?void 0:c.throttleMs;if(t&&t>n.throttleMsStore.state&&n.throttleMsStore.setState(t),i.shouldUseClientMode)n.isClientModeEnabledStore.setState(!0),n.isViewSpecificClientModeEnabledStore.setState(Boolean(i.isViewSpecificClientMode)),n.resultSetStore.resetWithRemote(i.allBlockIds);else{n.isClientModeEnabledStore.setState(!1),n.isViewSpecificClientModeEnabledStore.setState(Boolean(i.isViewSpecificClientMode));const e=new Set(v().aW({result:i.result,onlyTypes:["results"]}));n.resultSetStore.resetWithRemote(e)}}n.setUpdateCounterWithResponseCounter(r);const m=n.remoteCollectionIdsStore.state,f=i.collectionIds||[];V().Xy(m,f)||n.remoteCollectionIdsStore.setState(f),ze().default.addFromRecordMapWithRoleJson(i.recordMap),ze().default.isEmpty()||ue().dY({environment:t}),n.privateRelativeVariableStore.setState({...n.privateRelativeVariableStore.state,...i.relativeVariableResult});if(n.remoteResultStore.state&&(n.resetLoadingState(),n.isLoadedStore.setState(!0),n.lastRemoteRequestStore.setState(o),s)){const e=eo(s);Me().y.set(e,{remoteResult:n.remoteResultStore.state,resultSet:n.resultSetStore.state,collectionIds:n.remoteCollectionIdsStore.state})}}function Lt(e,t){const o=t.collectionViewStore(),n=t.searchQueryStore.state;if(!o)return;const i=t.currentSubitemFormatStoreForUiDisplayStore.state,r=null==o?void 0:o.getType(),a=(0,be().ze)(t,!0),s=t.currentSortsStore.state,l=function(e){const t=e.reducersStore.state,o={};return V().Ed(t,((e,t)=>{e&&(o[t]=e.reducer)})),o}(t);if(V().xb(l))return;let c;if(t.reducerDependencies.size>0){c={};for(const[e,o]of t.reducerDependencies)c[e]=[...o]}const d=(0,U().J)(o.pointer.spaceId),u=o.getCollectionSource();if(!u)return;const p=t.normalizedSchemaStore.state,m=(null==i?void 0:i.property)&&p[i.property],g=t.viewsModuleContextStore.currentPageInRelatedCollectionId();return{source:u,collectionView:{id:o.id,spaceId:d},loader:{reducers:l,filter:a,sort:s,searchQuery:n,userId:e.currentUser.id,userTimeZone:(0,I().r)(),...m&&(0,f().p_)(m)&&r&&(0,xe().Av)(r)&&{upwardTraversalRelation:m},reducerDependencies:c,currentPageInRelatedCollection:g}}}function Ot(e){const{reducerId:t,instanceId:o,reducer:n,collectionContextStore:i,groupsPointer:r}=e,a=i.reducersStore.state,s=a[t];let l,c;if(r&&r.length>0&&(l=(0,m().KW)(r)),n){if(c={instanceIds:V().jj([...(null==s?void 0:s.instanceIds)||[],o]),reducer:n},l){i.reducerDependencies.has(l)||i.reducerDependencies.set(l,new Set);const e=i.reducerDependencies.get(l);null==e||e.add(t)}}else{if(l){const e=i.reducerDependencies.get(l);e&&(e.delete(t),0===e.size&&i.reducerDependencies.delete(l))}const e=V().zu((null==s?void 0:s.instanceIds)||[],o);c=s&&e.length>0?{instanceIds:e,reducer:s.reducer}:void 0}V().Xy(s,c)||i.reducersStore.setState({...a,[t]:c})}function Zt(e){const{environment:t,collectionViewId:o,openInNew:n,collectionContextStore:i,isFullScreen:a,isRootChild:s,isInPeekRenderer:l}=e,c=i.collectionViewBlockStore();if(c){if(c===Ve().default.state.mainEditorCurrentBlockStore||n)re()._c({environment:t,store:c,openInNew:n,collectionViewId:o,pageVisitSource:r().tY.ChangeCollectionView});else{const e=new(qe().Xr)(t,{table:D().np,id:o},{inMemoryRecordCache:c.inMemoryRecordCache}),n=e.getCollectionStore();dt({environment:t,collectionViewBlockStore:c,collectionViewStore:e,collectionStore:n,collectionContextStore:i,isFullScreen:a,isRootChild:s,isInPeekRenderer:l,viewsModuleContextType:i.viewsModuleContextStore.state,forceLocalQueryCollection:!1}),x().Z.set({userId:t.currentUser.id,key:(0,Ie().oi)(c.id),value:o})}Pt({collectionContextStore:i})}}function jt(e){const{environment:t,collectionContextStore:o}=e;let n=o.collectionStore();const i=o.collectionViewBlockStore();if(!n||!i)return;const{mainEditorCurrentBlockStore:r}=Ve().default.state;r&&o.isFullScreenStore.state&&(n=qe().NW.createChildStore(r,n.pointer)),ce().selectAllText({environment:t,store:n.getNameStore(),canSelectAllBlocks:!1})}function Kt(){le().MO(),function(){const e=Ze().Z.state,t=We().default.state;if(e.isActive&&1===t.stores.length&&t.stores[0].id===e.store.id)return;Ht()}()}function zt(e){const{store:t,transient:o}=e;Ze().Z.setState({isActive:!0,store:t,transient:Boolean(o)})}function Ht(){Ze().Z.setState({...Ze().Z.state,isActive:!1})}function qt(e){const{store:t}=e;"new"===Oe().Z.state.editMode&&Oe().Z.state.store.id===t.id&&Oe().Z.reset()}async function Wt(e){const{environment:t,collectionContextStore:o,blockIdToMinimumVersion:n}=e;await async function(e,t){return await Promise.all((0,j().qP)(t).map((async t=>{let[o,n]=t;return ie().bG({environment:e,inMemoryRecordCache:e.defaultRecordCache.inMemoryRecordCache,pointer:{table:B().iU,id:o},userId:e.currentUser.id,minimumVersion:n})})))}(t,n),o.resultSetStore.addLocalChange(Object.keys(n))}function Gt(e){let{currentUserId:t,spaceId:o}=e;const n=x().Z.get({userId:t,key:$t(o)});if(n){const e=(0,K().dj)(n);return Array.isArray(e)?e:[]}return[]}function $t(e){return`getRecentlyNavigatedCollections:${e}`}function Qt(e){let{currentUserId:t,collectionViewId:o,viewsModuleCurrentPageId:n,temporaryState:i}=e;const r=Xt({collectionViewId:o,viewsModuleCurrentPageId:n});i?x().Z.set({userId:t,key:r,value:JSON.stringify(i)}):x().Z.remove({userId:t,key:r})}function Yt(e){const t=Jt(e.collectionViewId);x().Z.set({userId:e.userId,key:t,value:e.isOpen})}function Jt(e){return`collectionViewFilterBarOpenState:${e}`}function Xt(e){const{collectionViewId:t,viewsModuleCurrentPageId:o}=e;return o?`collectionViewTemporaryState:${t}:${o}`:`collectionViewTemporaryState2:${t}`}function eo(e){const t=e.id,o=e.getCollectionSource();return"trending"===(null==o?void 0:o.type)?{collectionViewId:t,teamId:o.teamId}:{collectionViewId:t}}function to(e){var t;const{store:o,typedDatabases:n,environment:i}=e,r=ot().fm(o);if(!(0,Ge().ww)(i))return;i.device.isMobile&&Ne().close();const a=null===(t=o.getCollectionViewStores().at(0))||void 0===t?void 0:t.id;if(!r&&!a)return;const s=r??new(Le().Z)(i);if(!r&&a){const e=qe().Xr.createChildStore(o,{table:D().np,id:a});dt({environment:i,collectionViewBlockStore:o,collectionViewStore:e,collectionStore:void 0,collectionContextStore:s,isFullScreen:!0,isRootChild:!0,isInPeekRenderer:!1,viewsModuleContextType:void 0,forceLocalQueryCollection:!1}),s.remoteCollectionIdsStore.setState(n.map((e=>e.id)))}else 0===s.collectionStoresStore.state.length&&s.remoteCollectionIdsStore.setState(n.map((e=>e.id)));de().createAndCommit({userAction:"collectionViewActions.handleAddMultiSourceViewPageButtonClick",environment:i,canUndo:!0,perform:e=>{oo({transaction:e,store:o,collectionContextStore:s,environment:i,shouldCoerce:!0,templateStore:s.defaultPageTemplateStore.state,showMoveTo:!0,peekModeOverride:"center_peek",from:{createBlock:"sidebar_new_page_button"}})}})}function oo(e){const{transaction:t,store:o,collectionContextStore:n,environment:i,shouldCoerce:r,templateStore:a,showMoveTo:s,peekModeOverride:l,from:c,isKeyboard:d}=e,u=$().IW({environment:i,collectionContextStore:n,groupsPointer:[],insertAtIndex:0,shouldCoerce:r,templateStore:a,transaction:t,from:c,inMemoryRecordCache:i.defaultRecordCache.inMemoryRecordCache,isKeyboard:d});if(!u)return;const p=l??ot().kr(n);se().CH({environment:i,store:u.newStore,peekMode:p,showMoveTo:s,resultsStore:void 0,collectionContextStore:n,pageVisitSource:no({blockId:o.id,collectionContextStore:n})});const m="collectionTypedView"===n.contextType?u.newStore.getAssociatedCollectionId():void 0;return q().W(i,{from:c.createBlock,type:"page",new_page_id:u.newStore.id,creating_block_id:u.newStore.id,...ye().Pn(n,m)}),u.newStore}function no(e){const{blockId:t,collectionContextStore:o}=e,n=(0,_e().qG)(t),i=(0,_e().X)(t),a=o.isInHomeWidgetStore.state;return i?a?r().tY.PersonalHomeTileCustomDbCreate:r().tY.PersonalHomeCustomDbCreate:n?a?r().tY.PersonalHomeTileTasksCreate:r().tY.PersonalHomeTasksCreate:r().tY.Create}function io(e){if(e.timedOutRequestCounter++,e.timedOutRequestCounter>=3){const t=Ke().default.getConfigKey("query_collection_slow_mode","clientThrottleMs");t>e.throttleMsStore.state&&e.throttleMsStore.setState(t)}}function ro(e){const{collectionStore:t,collectionViewStore:o,collectionViewBlockStore:n,collectionContextStore:i,environment:r}=e,a=null==o?void 0:o.id,s=a?(0,Ee().x)(a):void 0,l=ot().gL({collectionStore:t,sourceCollectionViewBlockStore:n,currentCollectionViewBlockStore:n,currentCollectionViewStore:o,constraints:(0,Ee().x)(o.id)}).find((e=>{var t;return e.id===(null==s||null===(t=s.viewPointer)||void 0===t?void 0:t.id)}));l&&ao({viewToDuplicateStore:l,collectionContextStore:i,collectionViewStore:o,environment:r})}function ao(e){const{viewToDuplicateStore:t,collectionContextStore:o,collectionViewStore:n,environment:i,temporaryStore:r}=e,a=o.collectionStore(),s=t.getType();if(!s||!a)return;const l=t.getName(),c=t.getPageSort(),d=t.getFormat(),u=t.getKeyStore("query2").getValue();de().createAndCommit({userAction:"CollectionSettingsDuplicateExistingView.duplicateViewSettings",environment:i,canUndo:!0,perform:e=>{ne().sW({store:r??n,data:{name:l,type:s,page_sort:c,format:{...d,collection_pointer:a.pointer},query2:u},transaction:e})}}),Pt({collectionContextStore:o})}},716025:(e,t,o)=>{o.d(t,{F:()=>c});o(667294);var n=()=>o(219727),i=()=>o(846550),r=()=>o(445520),a=()=>o(890085),s=()=>o(270315),l=o(785893);function c(e){const{device:t}=(0,n().O7)(),o=(0,i().Fg)(),{color:c,viewIcon:d,viewType:u,size:p,style:m}=e,f=function(e){return{regular:e.regularTextColor,light:e.mediumTextColor,gray:a().Lr[e.mode].gray,lightGray:a().Lr[e.mode].lightgray,blue:e.blueColor}}(o)[c];return u?d?(0,l.jsx)(r().Z,{style:{fill:f,backfaceVisibility:void 0,...m},size:p??(t.isMobile?18:16),theme:o,icon:d}):s().aW[u]({width:p??(t.isMobile?18:16),height:p??(t.isMobile?18:16),backfaceVisibility:void 0,fill:f,...m}):null}},829012:(e,t,o)=>{o.d(t,{Z:()=>p});var n=o(667294),i=o(973935),r=()=>o(142735),a=()=>o(506347),s=()=>o(970105),l=()=>o(614027),c=()=>o(480089),d=o(785893);function u(e,t){const u=(0,o(219727).O7)(),p=(0,n.useContext)(o(41340).Z),m=(0,n.useRef)(null),f=(0,n.useRef)(null),g=(0,c().PE)(e.store,e.disabled),v=(0,c().rv)(e.store),h=(0,n.useCallback)((()=>{o(773725).Z.recordVisit({id:e.store.id,systemBlockType:e.store.getSystemBlockTypeStore().getValue(),type:l().vu.Link,currentUserId:u.currentUser.id}),o(30238).SK(u,{page_visit_id:o(56810).$g.getCurrentPageVisitId(),mentioned_page_id:e.store.id,source_type:"collection_view_page_block",hover_preview_enabled:!0,is_navigable_block:e.store.isNavigableBlock()})}),[u,e.store]),_=(0,n.useCallback)((()=>{if(!f||!f.current)return;const t=i.findDOMNode(f.current);return(0,o(641702).We)(e.store,t)}),[e.store]),b=(0,n.useCallback)((t=>{const o=_(),n=e.store.getTitleStore();n&&o&&s().Nh({environment:u,event:t,interactiveToken:o,store:n,canEdit:g})}),[g,u,_,e.store]),y=(0,n.useCallback)((t=>{const o=_(),n=e.store.getTitleStore();n&&o&&s().Zl({environment:u,event:t,interactiveToken:o,store:n,canEdit:g})}),[g,u,_,e.store]),S=(0,n.useCallback)((()=>{if(p){const t=(0,o(429725).ZP)({store:e.store,pageVisitSource:a().tY.Create});p(t)}else o(47443)._c({environment:u,store:e.store,visitType:l().vu.Link,pageVisitSource:a().tY.Create})}),[u,p,e.store]);(0,n.useEffect)((()=>()=>{o(448046).qA(e.store.getTitleStore())}),[e.store]);const w=(0,r().VK)((()=>{const t=e.store.getCollectionViewSourceCollectionStore();return null==t?void 0:t.isSyncedCollection()}),[e.store]),k=(0,r().VK)((()=>e.store.isCollectionViewAlias()||e.store.recordStoreParentDiffersFromPersistedParent()),[e.store]);return(0,c().ez)(e.store,t,(0,n.useMemo)((()=>({renderedType:"collection_view_page",getNode:()=>m.current,getBlockStore:()=>e.store,activate:S,handleCreated(){S(),o(475335).default.setKeyboardMode(!1)}})),[S,e.store]),(0,d.jsx)(o(58836).p,{allowSelectionWithin:!1,onMouseOver:b,onMouseOut:y,children:(0,d.jsx)(o(649129).Z,{ref:f,store:e.store,style:{...v,...e.style},isAlias:k,disabled:Boolean(e.disabled||w),onClick:h})}))}const p=n.memo(n.forwardRef(u),o(632314).Z)},626534:(e,t,o)=>{function n(e){return"full_page"===(null==e?void 0:e.normalizedFormatStore.state.collection_peek_mode)}o.d(t,{Y:()=>n})},887430:(e,t,o)=>{o.d(t,{$l:()=>We,Bm:()=>qe,Bs:()=>ye,Cc:()=>we,Ch:()=>Me,D:()=>Ce,D2:()=>ve,D8:()=>re,HI:()=>ne,Il:()=>ge,Ks:()=>_e,L5:()=>Te,NG:()=>pe,NU:()=>de,PD:()=>oe,PI:()=>ee,Ql:()=>Ke,SY:()=>Ne,Se:()=>te,Ts:()=>Be,VM:()=>fe,Vv:()=>ke,XO:()=>Pe,YL:()=>xe,_5:()=>be,_z:()=>Oe,ay:()=>De,az:()=>me,b1:()=>He,bW:()=>ze,bd:()=>ue,eD:()=>Ie,fk:()=>Ze,fm:()=>Le,gL:()=>Ge,jw:()=>Ye,kn:()=>$e,kr:()=>Re,mb:()=>Ue,ml:()=>Qe,p1:()=>he,pB:()=>Ee,rD:()=>Se,v_:()=>je,w0:()=>Ae,wK:()=>ce,xy:()=>ae,zm:()=>ie});o(821057),o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(916054),o(653476),o(470928),o(241792);var n=()=>o(142735),i=()=>o(506347),r=()=>o(714230),a=()=>o(403721),s=()=>o(156642),l=()=>o(577223),c=()=>o(226413),d=()=>o(532850),u=()=>o(892981),p=()=>o(965800),m=()=>o(817629),f=()=>o(455530),g=()=>o(109477),v=()=>o(998411),h=()=>o(775283),_=()=>o(494616),b=()=>o(396136),y=()=>o(752778),S=()=>o(139978),w=()=>o(955620),k=()=>o(788860),I=()=>o(568017),C=()=>o(513670),x=()=>o(543172),T=()=>o(360240),M=()=>o(411768),P=()=>o(203890),A=()=>o(324877),R=()=>o(838444),B=()=>o(718959),E=()=>o(576868),D=()=>o(605890),U=()=>o(429725),F=()=>o(487270),N=()=>o(527278),V=()=>o(191586),L=()=>o(942226),O=()=>o(384510),Z=()=>o(465371),j=()=>o(472753),K=()=>o(163085),z=()=>o(589525),H=()=>o(876822),q=()=>o(972776),W=()=>o(749826),G=()=>o(482162),$=()=>o(826955),Q=()=>o(965903),Y=()=>o(461755),J=()=>o(626534);new Set(["gallery","list","calendar"]);const X=(0,k().vU)({addTypedItemTitle:{id:"collectionViewBlock.action.newItem.typedDatabaseTitle",defaultMessage:"New {singleItemName}"},addItemTitle:{id:"collectionViewBlock.action.newItem.nonTypedDatabaseTitle",defaultMessage:"New"}});function ee(e){return"collectionTypedView"===e.contextType?N().Z.formatMessage(X.addTypedItemTitle,{singleItemName:(0,T().sN)(e.databaseType)}):N().Z.formatMessage(X.addItemTitle)}function te(e){const t=Object.keys(e);return t.find((t=>{const o=e[t];return Boolean(o&&"status"===o.type)}))||t.find((t=>{const o=e[t];return Boolean(o&&"select"===o.type)}))||t.find((t=>{const o=e[t];return Boolean(o&&"person"===o.type)}))||t.find((t=>{const o=e[t];return Boolean(o&&"multi_select"===o.type)}))||t.find((t=>{const o=e[t];return Boolean(o&&"relation"===o.type)}))}function oe(e){const t=Object.keys(e);return t.find((t=>{const o=e[t];return Boolean(o&&"date"===o.type)}))||t.find((t=>{const o=e[t];return Boolean(o&&"created_time"===o.type)}))||t.find((t=>{const o=e[t];return Boolean(o&&"last_edited_time"===o.type)}))}function ne(e){return Object.keys(e).find((t=>{const o=e[t];return Boolean(o&&"date"===o.type)}))}function ie(e){const{collectionId:t,schema:o,property:n,targetCollectionStore:i,omitNewSchema:r}=e,a=o[n];if(!a)return;const s={newSchema:r?{}:{...o,[n]:void 0},deletedSchema:{[n]:o[n]}};if("relation"===a.type&&c().F0(a)&&a.property&&!(0,d().Kp)(a))if(c().F0(a)===t&&a.property!==n){const e=r?{}:{...s.newSchema,[a.property]:void 0},t={...s.deletedSchema,[a.property]:o[a.property]};s.newSchema=e,s.deletedSchema=t}else if(c().F0(a)!==t&&null!=i&&i.canEditCollection()&&i.isDefined()){const e=c().oC({id:i.id,schema:i.getSchema(),format:i.getFormat(),space_id:i.getSpaceId()}),t=r?{}:{...e,[a.property]:void 0},o={[a.property]:e[a.property]};s.otherCollectionId=i.id,s.otherCollectionSchema=t,s.otherCollectionDeletedSchema=o}return s}function re(e){const{deletedSchema:t,property:o}=e;if(t[o])return{updateSchema:{[o]:t[o]},updateDeletedSchema:{[o]:null}}}async function ae(e){const{schema:t,properties:o,property:n,propertyGroups:i,parentStore:r,spaceId:a,environment:s}=e,l=t[n];if(!l)return;if(c().dx(l))return;const d=(0,x().ZP)(),u={...l,name:(0,m().n)(l.name)};let p;if("button"===u.type&&u.automation_id){const e=$().Mz.createChildStore(r,{id:u.automation_id,spaceId:a,table:_().cv});await e.load();const t=e.getActionStores();await Promise.all(t.map((e=>e.load())));const o=(0,F().TS)({environment:s,table:_().cv,spaceId:a});u.automation_id=o,p={sourceAutomationStore:e,targetAutomationId:o}}return{newProperty:d,newPropertySchema:u,newProperties:(()=>{if(!o)return[];const e=o.findIndex((e=>e.property===n)),t=o[e],i={property:d,visible:!0,width:t&&t.width},r=[...o];return r.splice(e+1,0,i),r})(),newPropertyGroups:(()=>{if(!i)return;const e=i.find((e=>(0,h().fp)({propertyGroup:e,propertyId:n})));if(!e)return;return(0,h()._)({propertyGroups:i,propertyIds:[d],groupId:e.id,belowPropertyId:n})})(),automationUpdate:p}}function*se(e){const{rootStore:t,depth:o=0}=e;if(t.getType()===s().Ti.transclusionReference){const e=t.getTransclusionReferenceTargetStore();e&&(yield*se({rootStore:e,depth:o}))}else{const n=t.getContentStores();for(const t of n)yield{blockStore:t,depth:o},t.isNavigableBlock()||!e.goIntoToggles&&Z().BX(t)||(yield*se({rootStore:t,depth:t.getType()===s().Ti.columnList||t.getType()===s().Ti.column||t.getType()===s().Ti.transclusionContainer||t.getType()===s().Ti.transclusionReference?o:o+1}))}}function le(e){const{rootStore:t,renderAdditionalBlocks:o,startBlockId:n,tableRenderMode:i}=e,r={image:void 0,blocks:[],isDefined:!0},a=se({rootStore:t,goIntoToggles:void 0!==n});let l=0,c=0,d=!1;for(const{blockStore:p,depth:m}of a){if(n&&!d){if(p.id!==n)continue;d=!0}if(l++,l>u().C7)return r;p.isDefined()||(r.isDefined=!1);const e=p.getType(),t=p.getModel();if(!e||!t)continue;const a=p.getProperties();if(t.isType(s().Ok)&&!r.image&&a){const t=(0,w().QaF)(a.source);if(t&&((0,f().SR)({url:t})||e===s().Ti.image))return r.image={pointer:{table:"block",id:p.id},url:t},r}const g=(0,s().nq)(e),v=p.isCalloutV2(),h=t.isType(s().MV)&&(!p.isEmptyTitle()||g||v);let _=p;n&&p.id===n&&"table_row"===e&&(_=_.getParentBlockStore());const b=o&&_&&void 0!==(0,R().u)({store:_,tableRenderMode:i});(h||b)&&c<u().Uo&&(r.blocks.push({blockStore:p,depth:m}),g||c++)}return r}function ce(e){const{image:t,blocks:o,isDefined:n}=le(e);return t?{image:t,blockIds:[],isDefined:n}:{image:void 0,blockIds:o.map((e=>e.blockStore.id)),isDefined:n}}function de(e){var t,o;const{rootStore:n,renderAdditionalBlocks:i,theme:a}=e;if(i&&n.isCollectionView()&&(null===(t=n.getModel())||void 0===t||!t.hasWikiBlockUri())&&(null===(o=n.getAssociatedCollectionStore())||void 0===o||!o.isPageTreeCollection()))return{image:{url:"dark"===a?r().Z.images.blockRendererCovers.collectionTableDarkPng:r().Z.images.blockRendererCovers.collectionTableLightPng,pointer:{id:n.id,table:n.table,spaceId:n.getSpaceId()}},blockIds:[],isDefined:!0};const{image:l,blocks:c,isDefined:d}=le({rootStore:n,renderAdditionalBlocks:i,tableRenderMode:"image"});if(l)return{image:l,blockIds:[],isDefined:d};return{image:void 0,blockIds:c.filter((e=>{const{blockStore:t,depth:o}=e;return 0===o&&t.getType()!==s().Ti.transclusionReference&&t.getType()!==s().Ti.transclusionContainer})).map((e=>e.blockStore.id)),isDefined:d}}function ue(e){const t=e.isFullScreenStore.state,o=e.collectionViewStore();if(!o)throw new Error("Collection view store not defined.");const n=e.normalizedFormatStore.state,i=o.isDefined()&&o.getType(),r="board"===i,a="table"===i,s="feed"===i,l=n.collection_group_by;if(!t||l||s){const e=g().rx(n.inline_collection_first_load_limit,Boolean(l));if("load_limit"===e.type)return e.limit}if(r)return 20;if(t){if(a&&!Boolean(l)){const e=W().default.getConfigKey("collection_virtualized_load_limits","table");return(null==e?void 0:e.initial_limit)??50}return 50}return 20}function pe(e){const{collectionViewStore:t,isFullScreen:o,currentResultCount:n}=e,i=t.isDefined()&&t.getType(),r="board"===i,a="table"===i,s=t.getFormatStore().getKeyStore("collection_group_by").getValue();if(r)return 20;if(o){if(a&&!Boolean(s)){const e=W().default.getConfigKey("collection_virtualized_load_limits","table");return(null==e?void 0:e.increment_limit)??50}return 50}return n<=50?50:100}function me(e,t){const o=e.collectionViewStore();if(!o)return!1;if("collectionSystemView"===e.contextType)return!1;const n=o.getFormatStore().getKeyStore("collection_group_by").getValue();return!t||Boolean(n)}function fe(e){const{collectionContextStore:t,isFullScreen:o,reducerResult:n}=e;return n&&n.blockIds.length>0&&!((i=n)&&!i.hasMore)&&me(t,o);var i}function ge(e){const{collectionContextStore:t,environment:o,intl:n}=e,{device:i}=o;if(!t||i.isMobile&&!W().default.checkGate({gateName:"packaging_page_linking_mobile"})||!W().default.checkGate({gateName:"packaging_page_linking"}))return!1;const r=t.collectionStore(),a=null==r?void 0:r.getModel(),s=t.viewsModuleContextStore;if(!(r&&a&&s&&s.getViewModuleType()))return!1;const c=(0,E().ze)(t,!1);return!!c&&l().mL({filter:c,userFilterContext:{userId:o.currentUser.id,userTimeZone:(0,v().r)(),userStartOfWeek:B().AK.state},getRecordModel:r.getRecordModel,experimentService:W().default,intl:n,collectionModel:a,currentPageInRelatedCollection:s.currentPageInRelatedCollectionId(),relativeVariableResult:t.relativeVariableStore.state})}function ve(e){const{query:t,schema:o}=e,{timeline_by:n,timeline_by_end:i}=t;if(n){const e=o[n];if(e&&"date"!==e.type)return!1}if(i){const e=o[i];if(e&&"date"!==e.type)return!1}return!0}function he(e){const t=e.getParentBlockStore();return Boolean(t&&t.isLocked())}function _e(e){return G().default.isSidePeekOpen()&&!(0,L().wq)(e)&&!e.isImmediateColumnChild()&&(e.isRootOrDirectChild()||"page"===e.getType())}function be(e){const t=e.getRecordStoreUIRoot();return!!(t&&t instanceof $().G)&&t.isFullWidth()}function ye(e){const{environment:t,isFullScreen:o,store:n,sizeObserver:i,viewType:r,collectionContextStore:a}=e,{device:s,WindowSizeStore:l}=t,c=n.isRootOrDirectChild(),d=!o&&!c,u=K().Z.isBlockInTemplate(n),p=(0,M().v)(n);if("feed"===r&&s.isMobile)return{paddingLeft:22,paddingRight:22};if(d&&"gallery"===r)return{paddingLeft:1,paddingRight:1};if(!c||p){return{paddingLeft:0+(r&&a&&A().H2({blockStore:n,isFullScreen:Boolean(o),environment:t,collectionContextStore:a})?P().Xx:0),paddingRight:0}}if((0,L().wq)(n))return{paddingLeft:G().PeekModePadding.horizontal[G().default.state.mode],paddingRight:G().PeekModePadding.horizontal[G().default.state.mode]};if(s.isPhone)return{paddingLeft:l.getSafePaddingLeftPx((0,B().ui)(t)),paddingRight:l.getSafePaddingRightPx((0,B().ui)(t))};if(o)return{paddingLeft:96,paddingRight:96};if(!u&&!K().Z.isBlockInPageSnapshot(n)||K().Z.isBlockInWiki(n)){if(be(n)||function(e,t){const{WindowSizeStore:o}=e;return o.state.width-((0,z().Wk)(e)+(0,z().ll)(e,t)-(0,z().vJ)(e))<V().zL}(t,(0,L().wq)(n))||_e(n)&&!G().default.isSidePeekClosingStore.state){const e=(0,B().ui)(t);return{paddingLeft:e,paddingRight:e}}{const e=i.rect.state.width;if(0===e)return;const o=(e-(V().zL-2*(0,B().ui)(t)))/2;return{paddingLeft:o,paddingRight:o}}}{const e=i.rect.state.width;if(0===e)return;const t=be(n)&&u?20+Y().wN:20,o=Math.max((e-V().zL)/2,t);return{paddingLeft:o,paddingRight:o}}}function Se(e){switch(e){case"large":return O().Z.card.desktop.large.width;case"small":return O().Z.card.desktop.small.width;default:return O().Z.card.desktop.medium.width}}function we(e){let{collectionViewName:t,collectionViewType:o}=e;return t||N().Z.formatMessage(He[o??"new"])}function ke(e){var t;return((null===(t=e.getParentBlockStore())||void 0===t?void 0:t.getCollectionViewsStore().getValue())||[]).map((t=>$().Xr.createChildStore(e,{table:S().np,id:t}))).find((e=>"table"===e.getType()))}function Ie(e){const{collectionStore:t,collectionViewBlockStore:o,checkNavigableAncestorLocked:n}=e;if(!o||!o.isReady()||null==t||!t.isReady())return!1;if(n&&o.isNavigableAncestorNonEditableState())return!1;const i=null==t?void 0:t.canEditCollection(),r=null==t?void 0:t.getParentBlockStore(),a=null==r?void 0:r.isNonEditableState();return Boolean(i&&!a)}function Ce(e,t){const o=e.getType();if(!o)return!1;if(""===t)return!0;return-1!==we({collectionViewName:e.getName(),collectionViewType:o}).toUpperCase().indexOf(t.toUpperCase())}function xe(e){const{newOptions:t,collectionId:o,property:n,schema:i}=e,r=i[n];if(!r)return;if(!c().cu(r)&&"status"!==r.type)return;const a=r.options||[],s=[],l=C().xH(t),d=a.map((e=>e.value)),{beforeOps:u}=(0,p().q)(d,l);for(const[c,p]of Object.entries(u)){const e=a.find((e=>e.value===c));if(e)if(p){const t=a.find((e=>e.value===p));if(t){const i={pointer:{table:y().vF,id:o},command:"keyedObjectListBefore",path:["schema",n,"options"],args:{value:e,before:{id:t.id}}};s.push(i)}}else{const t={pointer:{table:y().vF,id:o},command:"keyedObjectListAfter",path:["schema",n,"options"],args:{value:e}};s.push(t)}}if("status"===r.type){const e=r.groups??[];for(const[i]of e.entries()){const e=t[i];if(!Array.isArray(e))return;const r=a.filter((t=>e.includes(t.value))).map((e=>e.id)),l={pointer:{table:y().vF,id:o},command:"set",path:["schema",n,"groups",i,"optionIds"],args:r};s.push(l)}}return s.length>0?s:void 0}function Te(e){const{collectionId:t,property:o,propertySchema:n,schema:i,isAscending:r}=e;return xe({newOptions:[...n.options||[]].map((e=>e.value)).sort(((e,t)=>e.localeCompare(t,void 0,{sensitivity:"base"})*(r?1:-1))),collectionId:t,property:o,schema:i})}function Me(e){const{collectionId:t,property:o,propertySchema:n,newOption:i,isAscending:r}=e,a=n.options||[],s=C().cx(a,(e=>e.value.localeCompare(i.value,void 0,{sensitivity:"base"})*(r?1:-1)>=0));return-1!==s?{pointer:{table:y().vF,id:t},command:"keyedObjectListBefore",path:["schema",o,"options"],args:{value:i,before:a[s]}}:{pointer:{table:y().vF,id:t},command:"keyedObjectListAfter",path:["schema",o,"options"],args:{value:i}}}function Pe(e){const{viewType:t,format:o}=e;return"board"===t?g().Lw(o.board_cover):"gallery"===t?g().Lw(o.gallery_cover):"timeline"===t&&g().vP(Boolean(o.timeline_show_table),o.timeline_table_properties||[])}function Ae(e){const{viewType:t,property:o}=e;return"table"===t||("board"===t||"gallery"===t?"title"!==o:"calendar"===t&&"title"===o)}function Re(e){var t;const o=null==e?void 0:e.collectionViewStore(),n=null==o?void 0:o.getType();return null!=o&&null!==(t=o.getUnlistedStatus())&&void 0!==t&&t.isUnlisted&&null!=e&&e.isInlineViewStore.state?"center_peek":(null==e?void 0:e.normalizedFormatStore.state.collection_peek_mode)??(n?D().Ls[n]:"side_peek")}function Be(e){const{stores:t,phase:o}=Q().default.state;return!(o===Q().SelectionPhase.Selected&&t.indexOf(e)>=0)&&(G().default.state.open&&G().default.isSidePeekOpen()&&G().default.state.targetStore.id===e.id)}function Ee(e,t){return t?{background:I().ZP.blueWithAlpha(.025),boxShadow:e.collectionTableOutlineUltraThinBlueInputBoxShadow,borderRadius:6}:{borderRadius:6}}function De(e){const t=e.collectionStore();if(!t)return;const o=t.getParentBlockStore();return o?(0,U().ZP)({store:o,fullyQualified:!1,pageVisitSource:i().tY.Breadcrumb}):void 0}function Ue(e){const{environment:t,store:o,mainEditorCurrentBlockStore:n,collectionContextStore:r,fullyQualified:s,overridePeekMode:l,showMoveTo:c}=e;return!l&&(0,J().Y)(r)?(0,U().ZP)({store:o,fullyQualified:s,pageVisitSource:(null==r?void 0:r.getPageVisitSourceOverride())??i().tY.Expand,showMoveTo:c}):n?(0,U().ZP)({store:n,collectionViewId:null!=r&&r.isFullScreenStore.state?null==r||null===(d=r.collectionViewStore())||void 0===d?void 0:d.id:void 0,fullyQualified:s,peekViewBlockId:o.id,peekMode:Fe({collectionContextStore:r,overridePeekMode:l}),pageVisitSource:(null==r?void 0:r.getPageVisitSourceOverride())??i().tY.PeekOpen,showMoveTo:c}):"chat"===t.RouterStore.state.route.name?(0,a().tj)({pageId:o.id,pageVisitSource:(null==r?void 0:r.getPageVisitSourceOverride())??i().tY.PeekOpen,isMobile:t.device.isMobile,peekModeParam:Fe({collectionContextStore:r,overridePeekMode:l})}):void 0;var d}function Fe(e){const{collectionContextStore:t,overridePeekMode:o}=e,n=null==t?void 0:t.getViewType();let i;i=null!=t&&t.isUnlistedViewStore.state&&null!=t&&t.isInlineViewStore.state?"center_peek":(null==t?void 0:t.normalizedFormatStore.state.collection_peek_mode)??(n?D().Ls[n]:void 0);const r=o??(0,G().getPeekModeFromCollectionPeekModeFormat)(i);return(0,G().getUrlParamFromPeekMode)(r)}function Ne(e){var t;const o=null===(t=e.getCollectionViewStores().find((e=>"page"===e.getType())))||void 0===t?void 0:t.getFormat().page_pointer;if(o)return $().G.createChildStore(e,{table:b().iU,id:null==o?void 0:o.id,spaceId:e.getSpaceId()})}function Ve(e){const t=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return null==e?void 0:e.findRecordStoreUIAncestor((o=>o instanceof $().G&&o.isCollectionView()&&(t||o.id!==e.id))).ancestor}(e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]);if(t)return j().R.findCollectionViewBlockFromId(t.id)}function Le(e){const t=Ve(e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]);if(t&&"collectionContextStore"in t)return t.collectionContextStore}async function Oe(e){let{environment:t,collectionStore:o}=e;const n=o.getParentBlockStore();if(await(null==n?void 0:n.load()),null==n||!n.isCollectionView())throw new Error("collectionViewBlockStore not found");const i=n.getCollectionViewStores();if(0===i.length)throw new Error("collectionViewStores not found");const r=i[0];await r.load();const a=new(q().Z)(t);return a.setContext({type:"collectionView",collectionViewBlockStore:n,collectionStore:o,collectionViewStore:i[0],pageVisitSourceOverride:void 0}),a}function Ze(e){var t,o;let{environment:n,collectionContextStore:i,overrideViewType:r}=e;if(n.device.isMobile)return!1;if("table"!==(null===(t=i.collectionViewStore())||void 0===t?void 0:t.getType()))return!1;if(i.isInHomeWidgetStore.state||i.isUnlistedViewStore.state)return!1;if("feed"===r)return!1;const{currentUserStore:a}=H().default.state,s=Boolean(i.permissionScopesStore.state.canEditContent||"collectionTypedView"===i.contextType&&(null===(o=i.collectionViewBlockStore())||void 0===o?void 0:o.canEdit()));return!!a&&s}function je(e,t){let o=t;return e.every((e=>{if(e.getType()===s().Ti.page||e.getType()===s().Ti.collectionViewPage){var t;const n=null===(t=Ve(e,!1))||void 0===t||null===(t=t.getBlockStore())||void 0===t?void 0:t.id;return!!n&&(void 0===o&&(o=n),n===o)}return!1}))}function Ke(e){return void 0!==e&&e>=0}function ze(e){return void 0!==e?e+1:0}const He=(0,k().vU)({new:{id:"database.viewSettings.createViewTab.title",defaultMessage:"New view"},board:{id:"database.collectionView.untitledName.board",defaultMessage:"Board"},gallery:{id:"database.collectionView.untitledName.gallery",defaultMessage:"Gallery"},timeline:{id:"database.collectionView.untitledName.timeline",defaultMessage:"Timeline"},calendar:{id:"database.collectionView.untitledName.calendar",defaultMessage:"Calendar"},list:{id:"database.collectionView.untitledName.list",defaultMessage:"List"},table:{id:"database.collectionView.untitledName.table",defaultMessage:"Table"},page:{id:"database.collectionView.untitledName.page",defaultMessage:"Page"},chart:{id:"database.collectionView.untitledName.chart",defaultMessage:"Chart"},form_editor:{id:"database.collectionView.untitledName.form_editor",defaultMessage:"Form"},feed:{id:"database.collectionView.untitledName.feed",defaultMessage:"Feed"},chat:{id:"database.collectionView.untitledName.chat",defaultMessage:"Chat"}});function qe(e){let{store:t,collectionContextStore:o}=e;return"collectionSystemView"===o.contextType?o.collectionStore():t.getAssociatedCollectionStore()}function We(e){return"page"===e?"page_view":"chat"===e?"chat_view":e}function Ge(e){const{collectionStore:t,sourceCollectionViewBlockStore:o,currentCollectionViewBlockStore:n,currentCollectionViewStore:i,constraints:r}=e;let a=C().mN([...n.getCollectionViewStores(),...o.getCollectionViewStores()],(e=>e.id)).filter((e=>{var o;return(null===(o=e.getCollectionStore())||void 0===o?void 0:o.id)===t.id&&e.id!==i.id&&"page"!==e.getType()&&"form_editor"!==e.getType()}));if(null!=r&&r.viewType&&(a=[...a.filter((e=>e.getType()===r.viewType)),...a.filter((e=>e.getType()!==r.viewType))]),null!=r&&r.viewPointer){const{id:e}=r.viewPointer,t=a.find((t=>t.pointer.id===e))||$().Xr.createChildStore(o,r.viewPointer);a=[t,...a.filter((t=>t.pointer.id!==e))]}return a}function $e(e,t){var o,n,i;if(t.isMobile)return!0;const r="source"===e.getCollectionViewBlockSourceState(),a=Boolean(null===(o=e.collectionStore())||void 0===o?void 0:o.isSyncedCollection()),s=Boolean(null===(n=e.collectionStore())||void 0===n?void 0:n.isPageTreeCollection()),l=Boolean(null===(i=e.collectionViewBlockStore())||void 0===i?void 0:i.canEditMembership());return!r||a||s||!l}function Qe(e){let{isMobile:t}=e;return t?52:41}function Ye(e,t){return(0,n().VK)((()=>{const o=e.collectionViewBlockStore();if(!o)return;const n=o.findRecordStoreUIAncestor((e=>Boolean(e instanceof $().G&&e.getRecordStoreUIParent()&&e.getFormat().block_color&&!e.isCollectionView()))).ancestor;if(n&&n instanceof $().G){const e=n.getType(),o=n.getFormat().block_color;return e===s().Ti.callout?(0,I().x7)(o,t):(0,I().fi)(o,t)}}),[e,t],{useDeepEqual:!0,debugName:"inheritedBlockColorStore"})}},717245:(e,t,o)=>{o.d(t,{M:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{isOpen:!1}}open(e){const{collectionViewBlockId:t,collectionViewId:o}=e;this.setState({isOpen:!0,type:"already_created",collectionViewBlockId:t,collectionViewId:o})}openAndCreateEphemeralCollectionView(e){const{collectionViewBlockStore:t,collectionViewValue:o}=e;this.setState({isOpen:!0,type:"create_ephemeral",collectionViewBlockStore:t,collectionViewValue:o})}close(){this.setState({isOpen:!1})}}const i=new n},126672:(e,t,o)=>{o.d(t,{t:()=>r});var n=()=>o(269299),i=()=>o(852465);function r(e){const{transaction:t,blockStore:o,discussionId:r}=e,a=i().x8(o);return n().applyOperation({store:a,operation:{pointer:a.pointer,path:a.path,command:"listAfter",args:{id:r}},transaction:t}),a}},52566:(e,t,o)=>{o.d(t,{X:()=>u});var n=()=>o(602299),i=()=>o(282662),r=()=>o(636340),a=()=>o(970105),s=()=>o(487270),l=()=>o(852465),c=()=>o(354988),d=()=>o(533492);function u(e){const{discussionStore:t,files:o,text:u,environment:p,transaction:m}=e,f=(0,s().TS)({environment:p,table:n().x_,spaceId:t.pointer.spaceId}),g=r().Ue({environment:p,table:n().x_,args:{id:f,parent:t.pointer},inMemoryRecordCache:t.inMemoryRecordCache,transaction:m}),v=l().ak(t);i().R3({parentStore:v,appendStore:g,transaction:m});const h=l().zP(g);return a().sO({environment:p,store:h,value:u,transaction:m}),(0,c().J)({commentStore:g,files:o,environment:p,transaction:m}),(0,d().Q)(g,m),g}},155943:(e,t,o)=>{o.d(t,{c:()=>l});var n=()=>o(956057),i=()=>o(81954),r=()=>o(696459),a=()=>o(636340),s=()=>o(52566);function l(e){const{createDiscussionArgs:t,blockStore:o,environment:l,transaction:c,commentTextValue:d,files:u,discussionId:p}=e;let m;"default"===t.type?m={id:p,type:"default",parent_id:o.id,parent_table:o.table,resolved:!1,context:t.context,space_id:(0,i().J)(o.pointer.spaceId),property_id:t.property_id}:"suggestion"===t.type?m={id:p,type:"suggestion",parent_id:o.id,parent_table:o.table,resolved:!1,context:{rejected:!1,modifiedBlockIds:t.modifiedBlockIds,latestSessionId:n().Il(),snapshot:{data:t.snapshotTextValue?[{type:"textValue",value:t.snapshotTextValue}]:[]},splitFrom:t.splitFrom},space_id:(0,i().J)(o.pointer.spaceId)}:(0,r().t1)(t);const f=a().ae({environment:l,table:"discussion",value:m,inMemoryRecordCache:o.inMemoryRecordCache,transaction:c});return{discussionStore:f,commentStore:(0,s().X)({discussionStore:f,text:d,files:u,environment:l,transaction:c})}}},354988:(e,t,o)=>{o.d(t,{J:()=>s});o(267602),o(30005);var n=()=>o(544607),i=()=>o(282662),r=()=>o(718959),a=()=>o(852465);function s(e){const{environment:t,files:o,commentStore:s,transaction:l}=e,c=r().qQ(t),d=a().ig(s);n().z({files:o,environment:t,inMemoryRecordCache:s.inMemoryRecordCache,transaction:l,pageWidth:c,ignoreOversizedFiles:!0,spaceId:d.pointer.spaceId}).forEach((e=>{i().R3({parentStore:d,appendStore:e,transaction:l})}))}},433908:(e,t,o)=>{o.d(t,{d:()=>a});var n=()=>o(718959),i=()=>o(852465),r=()=>o(785890);function a(e){const{discussionStore:t,transaction:o}=e,a=i().HK(t);a&&(0,r().Z)({discussionIds:[t.id],transaction:o,blockStore:a});const s=n().RM();if(s){const e=i().MI({blockStore:s,transclusionReferences:"recurseInto",childPages:"omit"});for(const n of e){if(a&&n.table===a.table&&n.id===a.id)continue;const e=i().x8(n).getValue();null!=e&&e.includes(t.id)&&(0,r().Z)({discussionIds:[t.id],transaction:o,blockStore:n})}}}},785890:(e,t,o)=>{o.d(t,{Z:()=>u});o(267602),o(653476);var n=()=>o(542973),i=()=>o(185610),r=()=>o(955620),a=()=>o(349220),s=()=>o(970105),l=()=>o(269299),c=()=>o(852465),d=()=>o(826955);function u(e){const{discussionIds:t,blockStore:o,transaction:r}=e,s=t.filter((e=>{const t=d().t1.createChildStore(o,{table:n().qF,id:e,spaceId:o.getSpaceId()}),r=(0,a().TO)(o.getModel());return"suggestion"!==t.getType()||!(0,i().xT)({blockModel:r,discussionId:e})}));!function(e){const{blockStore:t,discussionIds:o,transaction:n}=e,i=c().x8(t);for(const r of o)l().applyOperation({store:i,operation:{pointer:i.pointer,path:i.path,command:"listRemove",args:{id:r}},transaction:n})}({blockStore:o,discussionIds:s,transaction:r});for(const n of s)p({store:o,discussionId:n,transaction:r})}function p(e){const{store:t,transaction:o,discussionId:n}=e,i=["m",n],a=r().c14(i);s().ST({environment:t.environment,store:t.getBlockTitleStore(),selection:{startIndex:0,endIndex:1/0},annotationKey:a,transaction:o,updateSelection:!1});for(const r of Object.keys(t.getProperties())){if("title"===r)continue;const e=t.getPropertyStore(r);s().ST({environment:t.environment,store:e,selection:{startIndex:0,endIndex:1/0},annotationKey:a,transaction:o,updateSelection:!1})}}},7186:(e,t,o)=>{o.d(t,{D:()=>d});o(267602),o(653476);var n=()=>o(279865),i=()=>o(248825),r=()=>o(636340),a=()=>o(687647),s=()=>o(781022),l=()=>o(574767),c=()=>o(596308);function d(e){var t,o,d;const{environment:u,commentStore:p,discussionStore:m,transaction:f,discussionLocation:g}=e;if(a().Z.state.open){var v;const e=null===(v=a().Z.state.discussionIds)||void 0===v?void 0:v.filter((e=>e!==m.id));a().Z.setState({...a().Z.state,discussionIds:e,open:((null==e?void 0:e.length)||0)>0})}r().sW({store:m,data:{resolved:!0},transaction:f}),l().Z.setState({...l().Z.state,discussionIds:(null===(t=l().Z.state)||void 0===t||null===(t=t.discussionIds)||void 0===t?void 0:t.filter((e=>e!==m.id)))||[]});const h=n().B7.includes(g),_=null==m||null===(o=m.getParentStore())||void 0===o?void 0:o.getNavigableBlockStore(),b=m.getPropertyId(),y=m.getParentStore(),{property_type:S,collection_id:w,collection_view_id:k,view_type:I,collection_view_block_id:C}=(0,c().o)(b,y);i().hJ(u,{comment_id:null==p?void 0:p.id,discussion_id:m.id,discussion_type:m.getType(),parent_block_id:m.getParentId(),resolution_type:e.resolutionType,from:e.discussionLocation,parent_collection_id:null===(d=m.getParentStore())||void 0===d?void 0:d.getParentCollectionIdUpToTwoLevels(),...h&&{inbox_session_id:s().default.state.sessionId,notification_page_id:null==_?void 0:_.id},property_type:S,collection_id:w,collection_view_id:k,view_type:I,collection_view_block_id:C})}},244060:(e,t,o)=>{o.d(t,{e:()=>a});var n=()=>o(26970),i=()=>o(844085),r=()=>o(600785);function a(e){let{discussionId:t,blockId:o,animate:a=!0}=e;const s=(0,r().L)({discussionId:t,blockId:o}),l=document.getElementsByClassName((0,n().dk)({discussionId:t}))[0];return!(!s||!l)&&(i().bx({element:l,scrollerContext:s.getScrollerContext(),vertical:{reveal:"top"},horizontal:{reveal:"closest"},animate:a}),!0)}},533492:(e,t,o)=>{o.d(t,{Q:()=>a});var n=()=>o(326966),i=()=>o(636340),r=()=>o(852465);function a(e,t){const o=r().bQ(e);i().sO({store:o,value:(0,n().ud)(Date.now()),transaction:t})}},300329:(e,t,o)=>{o.d(t,{C:()=>r});var n=()=>o(8208),i=()=>o(958783);function r(e){const t=i().default.state;t.open?(i().default.setState({open:!1,rect:t.rect}),n().Z.reset()):i().default.setState({...t,from:void 0})}},396651:(e,t,o)=>{o.d(t,{i:()=>k});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624);var n=()=>o(156642),i=()=>o(295617),r=()=>o(177634),a=()=>o(998411),s=()=>o(542973),l=()=>o(955620),c=()=>o(855741),d=()=>o(326966),u=()=>o(248825),p=()=>o(15672),m=()=>o(109757),f=()=>o(615676),g=()=>o(487270),v=()=>o(527278),h=()=>o(749826),_=()=>o(958783),b=()=>o(126672),y=()=>o(155943),S=()=>o(300329),w=()=>o(596308);function k(e){const{environment:t,type:o,blockStore:k,commentTextValue:I,transaction:C,files:x,property_id:T,formulasModule:M}=e,P=e.discussionId??(0,g().TS)({environment:t,table:s().qF,spaceId:k.pointer.spaceId}),{id:A}=t.currentUser;if(!A)return;const R=_().default.state;let B;const{property_type:E,collection_id:D,collection_view_id:U,view_type:F,collection_view_block_id:N}=(0,w().o)(T,k);if(T&&R.open&&"block"===R.type){const e=R.blockStore.getPropertyStore(T);if(B=e.getValue()||[],"status"===E&&0===B.length&&(B=[[v().Z.formatMessage(i().i9.statusOptionNotStarted)]]),"formula"===E&&(B=function(e,t,o,n){var i;const s=t.getAssociatedCollectionStore(),l=null==s?void 0:s.getModel(),u=null==l?void 0:l.getNormalizedSchema()[o],p=null==u||null===(i=u.formula2)||void 0===i?void 0:i.code,m=t.getModel(),g=1*d().hM,_=h().default.getConfigKey("collection_request_settings","clientFormulaTimeoutMs")??g;if(m&&p&&n){const t=n.evaluateCollectionFormula2WithoutCache({block:m,property:o,formulaCode:p,getRecordModel:e.getRecordModel,intl:v().Z.getIntl(),userTimeZone:(0,a().r)(),depth:0,visitedProperties:new Set,formulaTimeoutTimestampMs:Date.now()+_,resultCache:new Map,regExpCache:new Map,experimentService:h().default,collectionFeatureGates:(0,f().W)()});if(t&&c().x.isSuccess(t))return(0,r().j4)(t.value)}return[]}(e,k,T,M)),"text"===E){const o={startIndex:0,endIndex:(0,l().eeV)(B).length};p().WO({environment:t,store:e,selection:o,annotation:[l().GKr.Discussion,P],transaction:C})}}let V;const L=k.getType(),O=k.getFormat();if((0,n().XD)(L,O)&&!(0,n().S9)(L)){const e=k.getTitleValue();V=l().O1u(l().V3g(e,{removeSuggestionAnnotationsAndText:!0,removeSuggestionAnnotations:!0,removeDiscussions:!0}))}T&&B&&(V=B);const{discussionStore:Z,commentStore:j}=(0,y().c)({createDiscussionArgs:"default"===o?{type:"default",context:V,property_id:T}:{type:"suggestion",modifiedBlockIds:[k.pointer.id]},blockStore:k,environment:t,transaction:C,commentTextValue:I,files:m().dm(x),discussionId:P});let K;return(0,b().t)({transaction:C,blockStore:k,discussionId:Z.id}),_().default.state.open?"comment"===_().default.state.content&&(K=_().default.state.from):K=_().default.state.from,u().bR(t,{discussion_id:Z.id,discussion_type:Z.getType(),comment_id:j.id,parent_block_id:Z.getParentId(),from:K,property_id:T,property_type:E,collection_view_id:U,view_type:F,collection_id:D,collection_view_block_id:N}),(0,S().C)(t),Z}},40302:(e,t,o)=>{o.d(t,{l:()=>a});var n=()=>o(492788),i=()=>o(879952),r=()=>o(990966);async function a(e){const{discussionInputStore:t,environment:o}=e;await n().default.afterNextFlush(),i().ZH({preventDismissMobileKeyboard:!0,environment:o}),r().setSelectionAtEnd({store:t.state.textStore})}},596308:(e,t,o)=>{o.d(t,{o:()=>r});var n=()=>o(532850),i=()=>o(887430);function r(e,t){if(!t)return{property_type:void 0,collection_id:void 0,collection_view_id:void 0,view_type:void 0,collection_view_block_id:void 0};let o,r,a,s,l;const c=t.getAssociatedCollectionStore();if(c){var d,u;if(e){const t=(0,n().Qm)({schema:c.getSchema(),property:e});o=null==t?void 0:t.type}r=c.id,l=null===(d=c.getParentBlockStore())||void 0===d?void 0:d.id;const p=null===(u=(0,i().fm)(t))||void 0===u?void 0:u.collectionViewStore();p?(a=null==p?void 0:p.id,s=null==p?void 0:p.getType()):s="page"}return{property_type:o,collection_id:r,collection_view_id:a,view_type:s,collection_view_block_id:l}}},879920:(e,t,o)=>{o.d(t,{jl:()=>m,uK:()=>p});var n=()=>o(696459),i=()=>o(248825),r=()=>o(308186),a=()=>o(527278),s=()=>o(876822),l=()=>o(958783),c=()=>o(300329),d=()=>o(252100);const u=(0,o(788860).vU)({discardCommentConfirmationPrompt:{id:"newDiscussionMenu.discardCommentConfirmationDialog.prompt",defaultMessage:"Do you want to discard the comment?"},discardCommentButtonLabel:{id:"newDiscussionMenu.discardCommentConfirmationDialog.discardButton.label",defaultMessage:"Discard"},draftCommentConfirmationPromptTitle:{id:"newDiscussionMenu.draftCommentConfirmationDialogTitle.prompt",defaultMessage:"Finish your draft comment?"},draftCommentConfirmationStartingNewDescription:{id:"newDiscussionMenu.draftCommentConfirmationStartingNewDescription.prompt",defaultMessage:"You have a draft comment that will be lost if you start a new one"},draftCommentConfirmationNavigateAwayPromptDescription:{id:"newDiscussionMenu.draftCommentConfirmationNavigateAwayPromptDescription.prompt",defaultMessage:"You have a draft comment that will be lost if you leave the page"},returnToPageButtonLabel:{id:"newDiscussionMenu.discardCommentConfirmationDialog.returnToPage.label",defaultMessage:"Return to draft"}});function p(e){const{discussionInputStore:t,environment:o,discussionHelpers:n,reason:s}=e;l().default.isComposingNewDiscussion()?m({environment:o,reason:s??"navigating_away"}):n.hasCommentChanged(t)?(i().lL(o),r().vC({message:a().Z.formatMessage(u.discardCommentConfirmationPrompt),showCancel:!0,handleCancel:()=>i().jX(o),keepFocus:!0,items:[{label:a().Z.formatMessage(u.discardCommentButtonLabel),color:"red",onAccept:()=>{i().Yz(o),(0,c().C)(o)}}]})):(0,c().C)(o)}function m(e){const{environment:t}=e;if(!l().default.isDraftCommentOnValidSelection())return;const o=l().default.getDiscussionInputStore();i().lL(t),r().vC({message:a().Z.formatMessage(u.draftCommentConfirmationPromptTitle),description:(()=>{switch(e.reason){case"starting_new":return a().Z.formatMessage(u.draftCommentConfirmationStartingNewDescription);case"navigating_away":return a().Z.formatMessage(u.draftCommentConfirmationNavigateAwayPromptDescription);default:(0,n().t1)(e.reason)}})(),keepFocus:!0,innerStyle:{textAlign:"center"},showCancel:!1,shouldRenderDraftCommentIcon:!0,items:[{label:a().Z.formatMessage(u.returnToPageButtonLabel),buttonType:"solid",color:"blue",onAccept:()=>{(0,d().U)({currentBlockStore:s().default.state.mainEditorCurrentBlockStore,discussionInputStore:o,environment:t}),i().jX(t)}},{label:a().Z.formatMessage(u.discardCommentButtonLabel),color:"gray",buttonType:"plain",onAccept:()=>{i().Yz(t),(0,c().C)(t)}}]})}},604068:(e,t,o)=>{o.d(t,{Bf:()=>V,Dc:()=>O,Qu:()=>j,WD:()=>L,sY:()=>N});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(470928),o(30005);var n=()=>o(156642),i=()=>o(396136),r=()=>o(542973),a=()=>o(81954),s=()=>o(989478),l=()=>o(955620),c=()=>o(248825),d=()=>o(799454),u=()=>o(762478),p=()=>o(636340),m=()=>o(5244),f=()=>o(15672),g=()=>o(269299),v=()=>o(109757),h=()=>o(150569),_=()=>o(487270),b=()=>o(527278),y=()=>o(271308),S=()=>o(852465),w=()=>o(832924),k=()=>o(505462),I=()=>o(687647),C=()=>o(826955),x=()=>o(3391),T=()=>o(8208),M=()=>o(958783),P=()=>o(126672),A=()=>o(155943),R=()=>o(879077),B=()=>o(300329),E=()=>o(396651),D=()=>o(40302),U=()=>o(596308),F=()=>o(879920);const N=(0,o(788860).vU)({emojiPicker:{defaultMessage:"Reaction",id:"ReactionBar.emojiModalMenu.title"},emojiTitle:{id:"recordIcon.emojiTab.title",defaultMessage:"Emoji"}});function V(e){const{environment:t,blockStore:o,multiSelection:n,rect:i,formulasModule:r}=e;let a=i;if(!a){const e=k().get();if(!e)return;a=k().getRect(e)}if(!a)return;const s=a.width,l=a.height,c=a.right-s;M().default.setState({open:!0,rect:new DOMRect(c,a.top,s,l),type:"inline",content:"reaction",blockStore:o,blockId:o.id,multiSelection:n,emoji:void 0}),u().$(t,{originGap:4,originRect:a,popupWidth:h().FZ,popupHeight:h().kX,isSmallWidth:!1,title:b().Z.formatMessage(N.emojiPicker),currentTab:"emoji",onCancel:()=>M().default.reset(),tabs:[{type:"emoji",title:b().Z.formatMessage(N.emojiTitle),hideRandomButton:!0,onChange:e=>{const o=M().default.state;o.open&&"reaction"===o.content&&(M().default.setState({...o,emoji:e}),O({environment:t,formulasModule:r}),u().Z())}}]})}async function L(e){var t;const{environment:o,blockStore:n,multiSelection:i,rect:r,from:s,property_id:l}=e;if(M().default.hasContent())return void(0,F().jl)({environment:o,reason:"starting_new"});let d=r;if(!d){const e=k().get();if(!e)return;d=k().getRect(e)}if(!d)return;const u=d.width,p=d.height,f=d.right-u,g=new(x().Z)(o,(0,a().J)(n.pointer.spaceId));M().default.setState({open:!0,rect:new DOMRect(f,d.top,u,p),type:"inline",content:"comment",blockStore:n,lastKnownBlockStore:n,blockId:n.id,multiSelection:i,lastEditables:(0,y().L5)(i),discussionInputStore:g,property_id:l,from:s}),null===(t=w().default.UpdateSidebarCommentScroller)||void 0===t||null===(t=t.getNode())||void 0===t||t.scrollTo({top:0,behavior:"smooth"}),T().Z.setActiveWithSource("text_annotation"),m().w(),await(0,D().l)({discussionInputStore:g,environment:o}),c().$5(o,{from:s})}function O(e){const{environment:t,allowActionsWhileCommenting:o,skipOpeningDiscussion:a,formulasModule:u}=e,p=M().default.state;if(p.open){const e="comment"===p.content?p.property_id:void 0,m=M().default.getBlockStore()??M().default.getLastKnownBlockStore();if(M().default.hasContent()&&(!o||m))if("inline"===p.type)g().createAndCommit({userAction:"newDiscussionMenuActions.submitNewDiscussion",environment:t,canUndo:!0,perform:a=>{const s=function(e){const{environment:t,multiSelection:o,transaction:a,allowActionsWhileCommenting:s}=e,{id:c}=t.currentUser;if(!c)return;const d=s?M().default.getLastSelectedEditables():(0,y().L5)(o).filter((e=>{let{store:t}=e;return t.table===i().iU}));if(!d||0===d.length)return;const u=d[0].store.getRecordStoreAtRootPath(),p=(0,_().TS)({environment:t,table:r().qF,spaceId:u.pointer.spaceId}),m=[],g=new Set;d.forEach(((e,o)=>{let{store:i,selection:r}=e;g.add(i.id);const s=i.getRecordStoreAtRootPath();if(!(s instanceof C().G))return;const c=s.getType(),d=s.getFormat();if(c&&(0,n()._T)(c,d))return;let u=i.getValue();const v=l().Ulv(u,r);f().WO({environment:t,store:i,selection:v,annotation:[l().GKr.Discussion,p],transaction:a}),u=i.getValue();const h=l().KU1(u,v.startIndex,v.endIndex),_=0===o?[]:[l().V3y("\n")];m.push(..._,...h)}));const v=(0,y().tp)({multiSelection:o,filterCommonAncestors:!1,focus:void 0});if(v)for(const i of v.stores){if(g.has(i.id))continue;const e=i.getType(),t=i.getFormat();e&&(0,n()._T)(e,t)||(0,P().t)({blockStore:i,discussionId:p,transaction:a})}return{blockStore:u,context:m,discussionId:p}}({environment:t,multiSelection:p.multiSelection,transaction:a,allowActionsWhileCommenting:o});if(!s)return;const{context:d,blockStore:u,discussionId:g}=s;if("comment"===p.content){const n=p.discussionInputStore.state.textStore.getValue()||[],i=p.discussionInputStore.state.files,{discussionStore:r,commentStore:s}=(0,A().c)({createDiscussionArgs:{type:"default",context:d,property_id:e},blockStore:u,environment:t,transaction:a,commentTextValue:n,files:v().dm(i),discussionId:g}),{property_type:l,collection_id:f,collection_view_id:h,view_type:_,collection_view_block_id:b}=(0,U().o)(e,m);c().x6(t,{discussion_id:r.id,discussion_type:r.getType(),comment_id:s.id,parent_block_id:r.getParentId(),from:M().default.state.open&&"comment"===M().default.state.content?M().default.state.from:void 0,property_id:e,property_type:l,collection_view_id:h,view_type:_,collection_id:f,collection_view_block_id:b}),o&&I().Z.addNewDiscussionId(g)}else p.emoji&&Z({context:d,blockStore:u,environment:t,transaction:a,icon:p.emoji,discussionId:g})},skipUpdatingEditedMetadata:!0});else if("block"===p.type)if("comment"===p.content){const n=p.discussionInputStore.state.textStore.getValue()||[],i=p.discussionInputStore.state.files;o?m&&g().createAndCommit({userAction:"newDiscussionMenuActions.submitNewDiscussion",environment:t,canUndo:!0,perform:o=>{(0,E().i)({environment:t,type:"default",blockStore:m,commentTextValue:n||[],files:i,transaction:o,property_id:e,formulasModule:u})},skipUpdatingEditedMetadata:!0}):g().createAndCommit({userAction:"newDiscussionMenuActions.submitNewDiscussion",environment:t,canUndo:!0,perform:o=>{(0,E().i)({environment:t,type:"default",blockStore:p.blockStore,commentTextValue:n||[],files:i,transaction:o,property_id:e,formulasModule:u})},skipUpdatingEditedMetadata:!0})}else{const e=t.currentUser.id,{emoji:o,blockStore:n}=p,i=S().vV(n,{recursivelyLoadAllDiscussions:!1}).find((e=>e.getReactions().length>0));o&&e&&g().createAndCommit({userAction:"newDiscussionMenuActions.submitNewDefaultDiscussion.addReaction",environment:t,canUndo:!0,perform:r=>{null!=i&&i.isDefined()?R().createReaction({environment:t,transaction:r,store:i,icon:o,currentActorPointer:{table:s().KJ,id:e},discussionLocation:"block_menu"}):Z({context:void 0,blockStore:n,environment:t,transaction:r,icon:o})},skipUpdatingEditedMetadata:!0})}(0,B().C)(t);const h=o?m&&m.getAssociatedCollectionStore():p.blockStore.getAssociatedCollectionStore();a||e||!h||d().Ib({environment:t,blockStore:o?m??p.blockStore:p.blockStore,shouldFocusDiscussion:!0,analyticsFrom:"db_page_comments",rect:M().default.state.rect,recursivelyLoadAllDiscussions:!1})}}function Z(e){const{context:t,blockStore:o,environment:n,transaction:i,icon:l}=e,c=e.discussionId??(0,_().TS)({environment:n,table:r().qF,spaceId:o.pointer.spaceId});if(void 0===n.currentUser.id)return;const d=p().ae({environment:n,table:"discussion",value:{type:"default",id:c,parent_id:o.id,parent_table:o.table,resolved:!1,context:t,space_id:(0,a().J)(o.pointer.spaceId)},inMemoryRecordCache:o.inMemoryRecordCache,transaction:i});(0,P().t)({transaction:i,blockStore:o,discussionId:d.id});const u={table:s().KJ,id:n.currentUser.id};return R().createReaction({environment:n,transaction:i,store:d,icon:l,currentActorPointer:u,discussionLocation:"block_menu"}),d}function j(e){const{environment:t}=e;if(!t.currentUser.id)return;const o=M().default.getPropertyId();if(o){var i;const e=null===(i=M().default.getBlockStore())||void 0===i?void 0:i.getPropertyStore(o);if(e)return{blockStore:e,context:e.getValue()}}const r=M().default.getLastSelectedEditables();if(!r||0===r.length)return;const a=r[0].store.getRecordStoreAtRootPath(),s=[],c=new Set;return r.forEach(((e,t)=>{let{store:o,selection:i}=e;c.add(o.id);const r=o.getRecordStoreAtRootPath();if(!(r instanceof C().G))return;const a=r.getType(),d=r.getFormat();if(a&&(0,n()._T)(a,d))return;const u=o.getValue(),p=l().Ulv(u,i),m=l().KU1(u,p.startIndex,p.endIndex),f=0===t?[]:[l().V3y("\n")];s.push(...f,...m)})),{blockStore:a,context:s}}},825270:(e,t,o)=>{o.d(t,{t:()=>c});var n=()=>o(762478),i=()=>o(150569),r=()=>o(527278),a=()=>o(472753),s=()=>o(958783),l=()=>o(604068);function c(e){const{environment:t,blockStore:o,rect:c,skipOpeningDiscussionOnSubmit:d,formulasModule:u}=e,p=c??a().R.getRect(o);if(!p)return;const m=p.width,f=p.height,g=p.right-m;s().default.setState({open:!0,rect:new DOMRect(g,p.top,m,f),type:"block",content:"reaction",blockStore:o,blockId:o.id,emoji:void 0}),n().$(t,{originGap:4,originRect:p,popupWidth:i().FZ,popupHeight:i().kX,isSmallWidth:!1,title:r().Z.formatMessage(l().sY.emojiPicker),currentTab:"emoji",onCancel:()=>s().default.reset(),tabs:[{type:"emoji",title:r().Z.formatMessage(l().sY.emojiTitle),hideRandomButton:!0,onChange:e=>{const o=s().default.state;o.open&&"reaction"===o.content&&(s().default.setState({...o,emoji:e}),(0,l().Dc)({environment:t,skipOpeningDiscussion:d,formulasModule:u}),n().Z())}}]})}},267191:(e,t,o)=>{o.d(t,{y:()=>p});var n=()=>o(81954),i=()=>o(248825),r=()=>o(832924),a=()=>o(472753),s=()=>o(3391),l=()=>o(8208),c=()=>o(958783),d=()=>o(40302),u=()=>o(879920);async function p(e){var t;const{environment:o,blockStore:p,rect:m,property_id:f,from:g}=e;if(c().default.hasContent())return void(0,u().jl)({environment:o,reason:"starting_new"});const v=a().R.getRect(p);if(!v)return;const h=new(s().Z)(o,(0,n().J)(p.pointer.spaceId)),_=v.width,b=v.height,y=v.right-_;c().default.setState({open:!0,rect:m||new DOMRect(y,v.top,_,b),type:"block",content:"comment",blockStore:p,blockId:p.id,discussionInputStore:h,property_id:f,lastKnownBlockStore:p,from:g}),null===(t=r().default.UpdateSidebarCommentScroller)||void 0===t||null===(t=t.getNode())||void 0===t||t.scrollTo({top:0,behavior:"smooth"}),l().Z.setActiveWithSource("text_annotation"),await(0,d().l)({discussionInputStore:h,environment:o}),i().yr(o,{from:g})}},252100:(e,t,o)=>{o.d(t,{U:()=>v,m:()=>g});o(267602),o(653476);var n=()=>o(492788),i=()=>o(844085),r=()=>o(203927),a=()=>o(247724),s=()=>o(275200),l=()=>o(487073),c=()=>o(32969),d=()=>o(589525),u=()=>o(954452),p=()=>o(8208),m=()=>o(958783),f=()=>o(40302);function g(e){let{animate:t}=e;const o=l().Z.filter((()=>!0));if(o&&o.length>0){const e=o[0].getNode();if(e&&e.parentElement){const o=Array.from(e.parentElement.children).indexOf(e);s().Wr(e,{edgeDist:0===o?0:-1,animate:t??!1})}}}async function v(e){let{currentBlockStore:t,discussionInputStore:o,environment:s,dontAffectCursor:l,animateScroll:g}=e;if(!o||!t)return;function v(e){const t=function(e){var t;let o,{blockId:n}=e;const i=null===(t=document.getElementsByClassName(a().dXl))||void 0===t?void 0:t[0];i&&(o=c().C.findSelectableFromChildNode(i)),o||(o=c().C.findScrollToSelectablesFromIds([n])[0]);return o}({blockId:e});if(!t)return;const o=document.getElementsByClassName(a().dXl)[0];return o?i().bx({element:o,scrollerContext:t.getScrollerContext(),vertical:{reveal:"top"},horizontal:{reveal:"closest"},animate:g??!1,centerVertically:!0}):i().XW({handle:t,vertical:{reveal:"top"},horizontal:{reveal:"closest"},animate:g??!1}),t.displaySelectionHalo(750),t}const h=m().default.state.open?m().default.state.blockId:null;if(!h)return;v(h)||(await r().Nz(t,[h]),await n().default.afterNextFlush(),v(h));const _=m().default.getBlockStore();_&&(0,u().az)(s,_)?p().Z.setActiveWithSource("margin_comments"):(0,d().vK)(s)?p().Z.setActiveWithSource("comments_pane"):p().Z.setActiveWithSource("popover_comments"),l||(0,f().l)({discussionInputStore:o,environment:s})}},879077:(e,t,o)=>{o.r(t),o.d(t,{createReaction:()=>b,toggleReaction:()=>_});o(267602),o(653476),o(470928),o(241792),o(228244);var n=()=>o(279865),i=()=>o(542973),r=()=>o(421476),a=()=>o(81954),s=()=>o(989478),l=()=>o(696459),c=()=>o(248825),d=()=>o(282662),u=()=>o(636340),p=()=>o(269299),m=()=>o(487270),f=()=>o(826955),g=()=>o(781022),v=()=>o(433908),h=()=>o(596308);function _(e){const{discussionLocation:t,environment:o,transaction:d,store:u,icon:m}=e,h=function(e){let{store:t,icon:o}=e;const n=(0,f().Vh)(t,t.pointer,"reactions").getValue();if(void 0===n)return;return n.map((e=>{const o=f().t1.createChildStore(t,{table:r().yo,id:e,spaceId:(0,a().J)(t.pointer.spaceId)});if(o.isDefined())return o})).filter(l().$K).find((e=>e.getIcon()===o))}({store:u,icon:m});if(void 0===o.currentUser.id)return;const _={table:s().KJ,id:o.currentUser.id};return null!=h&&h.isDefined()?function(e){var t;let{store:o,actorPointer:r,transaction:a,environment:s,discussionLocation:l}=e;const d={store:o,actorPointer:r,transaction:a,environment:s,discussionLocation:l},u=(null===(t=o.getActors())||void 0===t?void 0:t.some((e=>e.id===r.id)))??!1;return u?(function(e){var t,o;const{store:r,actorPointer:a,discussionLocation:s,transaction:l,environment:d}=e;if(!r.isDefined())return;const u=r.getParentStore(),m=(null==u?void 0:u.table)===i().qF?u:null==u?void 0:u.getParentStore(),h=n().B7.includes(s),_=null==m||null===(t=m.getParentStore())||void 0===t?void 0:t.getNavigableBlockStore(),b=1===f().bh.getUserVisibleReactions(u).length&&1===r.getActors().length&&r.getActors()[0].id===d.currentUser.id;c().Em({environment:d,reaction_value:r.getIcon(),comment_id:r.getParentId(),discussion_id:null==m?void 0:m.id,discussion_type:null==m?void 0:m.getType(),parent_block_id:null==m?void 0:m.getParentId(),parent_collection_id:null==m||null===(o=m.getParentStore())||void 0===o?void 0:o.getParentCollectionIdUpToTwoLevels(),reaction_count:r.getActors().length??0,from:s,...h&&{inbox_session_id:g().default.state.sessionId,notification_page_id:null==_?void 0:_.id}});const y=r.getModel();p().applyOperation({transaction:l,store:r,operation:y.ops.removeActor(a)}),b&&u&&u.table===i().qF&&(0,v().d)({environment:d,discussionStore:u,transaction:l})}(d),"Removed"):(function(e){var t,o;const{store:r,actorPointer:a,discussionLocation:s,transaction:l,environment:d}=e;if(!r.isDefined())return;const u=r.getParentStore(),m=(null==u?void 0:u.table)===i().qF?u:null==u?void 0:u.getParentStore(),f=n().B7.includes(s),v=null==m||null===(t=m.getParentStore())||void 0===t?void 0:t.getNavigableBlockStore();c().pP({environment:d,reaction_value:r.getIcon(),comment_id:r.getParentId(),discussion_id:null==m?void 0:m.id,discussion_type:null==m?void 0:m.getType(),parent_block_id:null==m?void 0:m.getParentId(),parent_collection_id:null==m||null===(o=m.getParentStore())||void 0===o?void 0:o.getParentCollectionIdUpToTwoLevels(),reaction_count:r.getActors().length??0,from:s,...f&&{inbox_session_id:g().default.state.sessionId,notification_page_id:null==v?void 0:v.id}});const h=r.getModel();p().applyOperation({transaction:l,store:r,operation:h.ops.appendActor(a)})}(d),"Added")}({environment:o,store:h,actorPointer:_,transaction:d,discussionLocation:t}):(b({environment:o,transaction:d,store:u,icon:m,currentActorPointer:_,discussionLocation:t}),"Added")}function b(e){var t,o;let{environment:s,transaction:l,store:p,icon:v,currentActorPointer:_,discussionLocation:b}=e;const y=(0,m().$x)({environment:s,table:r().yo,spaceId:(0,a().J)(p.pointer.spaceId)}),S=p.table===i().qF?p:p.getParentStore(),w=n().B7.includes(b),k=null==S||null===(t=S.getParentStore())||void 0===t?void 0:t.getNavigableBlockStore(),I=null==S?void 0:S.getPropertyId(),C=null==S?void 0:S.getParentStore(),{property_type:x,collection_id:T,collection_view_id:M,view_type:P,collection_view_block_id:A}=(0,h().o)(I,C);c().pP({environment:s,reaction_value:v,comment_id:p.id,discussion_id:null==S?void 0:S.id,discussion_type:null==S?void 0:S.getType(),parent_block_id:null==S?void 0:S.getParentId(),parent_collection_id:null==S||null===(o=S.getParentStore())||void 0===o?void 0:o.getParentCollectionIdUpToTwoLevels(),reaction_count:0,from:b,...w&&{inbox_session_id:g().default.state.sessionId,notification_page_id:null==k?void 0:k.id},property_type:x,collection_id:T,collection_view_id:M,view_type:P,collection_view_block_id:A});const R=u().Ue({environment:s,table:y.table,args:{id:y.id,spaceId:y.spaceId,commentId:p.id,icon:v,actorPointer:_},inMemoryRecordCache:p.inMemoryRecordCache,transaction:l}),B=(0,f().Vh)(p,p.pointer,"reactions");d().R3({parentStore:B,appendStore:R,transaction:l})}},547592:(e,t,o)=>{o.d(t,{Cd:()=>m,UZ:()=>p,oK:()=>u});var n=()=>o(492788),i=()=>o(81954),r=()=>o(839002),a=()=>o(248825),s=()=>o(879952),l=()=>o(990966),c=()=>o(3391),d=()=>o(882637);async function u(e){const{environment:t,discussionStore:o,rect:u,blockStore:p,discussionLocation:m,activityId:f,notificationId:g}=e,v=new(c().Z)(t,(0,i().J)(p.pointer.spaceId));d().default.setState({open:!0,rect:u,discussionStore:o,discussionInputStore:v,blockStore:p,discussionLocation:m,activityId:f,notificationId:g}),s().ZH({preventDismissMobileKeyboard:!0,environment:t}),await n().default.afterNextFlush(),await(0,r().Vs)(10),l().setSelectionAtEnd({store:v.state.textStore}),a().Je({environment:t,from:m,activityId:f,notificationId:g})}function p(e){const t=d().default.state;if(t.open){const{discussionLocation:o,activityId:n,notificationId:i}=t;d().default.setState({open:!1,rect:t.rect}),s().ZH({environment:e}),a().Rn({environment:e,from:o,activityId:n,notificationId:i})}}function m(e){const t=d().default.state;if(t.open){0===t.discussionStore.getComments().length&&p(e)}}},539410:(e,t,o)=>{o.d(t,{DH:()=>Q,JK:()=>q,LC:()=>W,N$:()=>G,P5:()=>Y,Sz:()=>re,Yo:()=>K,_T:()=>ae,iT:()=>se,n1:()=>te,oG:()=>ne,vh:()=>J});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(470928),o(749411),o(30005),o(241792);var n=()=>o(731415),i=()=>o(156642),r=()=>o(431595),a=()=>o(956057),s=()=>o(396136),l=()=>o(542973),c=()=>o(81954),d=()=>o(989478),u=()=>o(185610),p=()=>o(955620),m=()=>o(680146),f=()=>o(349220),g=()=>o(513670),v=()=>o(696459),h=()=>o(248825),_=()=>o(961226),b=()=>o(799454),y=()=>o(282662),S=()=>o(636340),w=()=>o(453999),k=()=>o(970105),I=()=>o(491308),C=()=>o(269299),x=()=>o(505783),T=()=>o(316834),M=()=>o(487270),P=()=>o(271308),A=()=>o(239482),R=()=>o(321930),B=()=>o(339523),E=()=>o(550054),D=()=>o(876822),U=()=>o(279386),F=()=>o(826955),N=()=>o(954452),V=()=>o(126672),L=()=>o(155943),O=()=>o(785890),Z=()=>o(7186),j=()=>o(396651);function K(e){const{action:t,environment:o,commentStore:n,discussionStore:i,transaction:s,discussionLocation:l,currentPageStore:c}=e;if(!c)throw new(r().p8)("Expected current page store to be defined");const u=i.getSuggestModifiedBlockStores()??[],{currentUserStore:m}=D().default.state;if(!m)throw new(r().p8)("Expected current user store to be defined");const v=u.filter((e=>{const t=A().fM(e);return c.id===(null==t?void 0:t.id)}));if(v.length!==u.length)return void function(e){const{action:t,blockStoresInPage:o,discussionStore:n,transaction:i,environment:s,discussionLocation:l,currentPageStore:c}=e,d=n.getParentStore();if(!d)throw new(r().p8)("Suggestion should have parent block store");const u=n.getRawContextStore(),m=u.getValue(),v=o.map((e=>e.id));S().sO({store:u,value:{...m,modifiedBlockIds:g().zu(n.getSuggestModifiedBlockIds(),...v),resolvedBlockIds:v},transaction:i});const{discussionStore:h,commentStore:_}=$({environment:s,transaction:i,blockStore:d,modifiedBlockIds:v,splitFrom:n.id,skipAnnotatingTransaction:!0});(function(e){const{environment:t,blockStores:o,oldDiscussionStore:n,newDiscussionStore:i,transaction:r}=e;o.forEach((o=>{(0,O().Z)({transaction:r,blockStore:o,discussionIds:[n.id]}),(0,V().t)({transaction:r,blockStore:o,discussionId:i.id});const s=ee(o,n.id);s&&(oe({environment:t,transaction:r,blockStore:o,blockSuggestionId:s.id,removeDiscussionId:{discussionId:s.discussionId}}),J({environment:t,transaction:r,discussionStore:n}),te(r,o,{id:a().Il(),type:s.type,discussionId:i.id})),function(e){const{blockStore:t,oldDiscussionStore:o,newDiscussionStore:n,transaction:i,environment:r}=e,a=(0,f().TO)(t.getTitleStore()),s=t.getTitleValue();for(let l=0;l<s.length;l++){const e=p().hDy(s[l]);for(const t of e)if(p().BIG(t)&&p().fgJ(t)===o.id){const e=(0,f().TO)(E().Ts(s,l));k().ST({environment:r,store:a,selection:e,annotationKey:p().c14(t),transaction:i,updateSelection:!1});const o=p().c1u(t,n.id);k().WO({environment:r,store:a,selection:e,annotation:o,transaction:i})}}}({...e,blockStore:o})}))})({blockStores:o,oldDiscussionStore:n,newDiscussionStore:h,transaction:i,environment:s}),K({action:t,environment:s,commentStore:_,discussionStore:h,transaction:i,discussionLocation:l,currentPageStore:c})}({action:t,discussionLocation:l,blockStoresInPage:v,discussionStore:i,transaction:s,environment:o,currentPageStore:c});(0,Z().D)({environment:o,commentStore:n,discussionStore:i,transaction:s,discussionLocation:l,resolutionType:t}),function(e){const{blockStores:t,discussionStore:o,environment:n,transaction:i,action:r}=e;for(const a of t){const e=ee(a,o.id);if(e&&(oe({environment:n,transaction:i,blockStore:a,blockSuggestionId:e.id}),("reject"===r&&"insert"===e.type||"accept"===r&&"remove"===e.type)&&w().Cl({environment:n,blocks:[a],transaction:i}),"reject"===r&&"add_line_break"===e.type||"accept"===r&&"remove_line_break"===e.type)){const e=(0,f().TO)(a.getTitleStore()),t=(0,T().z)(e),o=t?(0,B().sQ)(t):void 0;if(t&&o){I().We({environment:n,transaction:i,store:t,block:o,targetStore:e,targetBlock:a});const r=o.getContentStores(),s=(0,f().TO)((0,B().sQ)(a));for(const e of r)y().Vt({parentStore:s.getContentStore(),beforeStore:o,insertStore:e,transaction:i}),y().Od({parentStore:o.getContentStore(),childToRemoveStore:e,transaction:i});w().Cl({environment:n,transaction:i,blocks:[o]})}}}}({environment:o,transaction:s,blockStores:u,discussionStore:i,action:t});for(const a of u){if(a.isType("table_row")){var h;const e=(null===(h=a.getParentBlockStore())||void 0===h?void 0:h.getFormat().table_block_column_order)??[];for(const n of e){z({environment:o,transaction:s,discussionStore:i,titleStore:a.getPropertyStore(n),action:t})}}else{const e=a.getTitleStore(),n=a.getCaptionStore();if(!e&&!n)throw new(r().p8)("Could not get title store or caption store for block");e&&z({environment:o,transaction:s,discussionStore:i,titleStore:e,action:t}),n&&z({environment:o,transaction:s,discussionStore:i,titleStore:n,action:t})}(0,V().t)({transaction:s,blockStore:a,discussionId:i.id})}const _=(0,f().TO)(i.getSuggestionRawContextStore());S().sW({store:_,data:{rejected:"reject"===t,resolvedBy:{id:m.id,table:d().KJ}},transaction:s})}function z(e){const{environment:t,transaction:o,discussionStore:n,titleStore:i,action:a}=e,s=i.getValue();if(s)for(let l=s.length-1;l>=0;l--){const e=p().hDy(s[l]);for(const c of e)if(p().BIG(c)&&p().fgJ(c)===n.id){const e=E().Ts(s,l);if(!e)throw new(r().p8)("Could not generate selection for token");H({annotation:c,action:a,selection:e,environment:t,transaction:o,titleStore:i})}}}function H(e){const{annotation:t,action:o,selection:n,environment:i,transaction:r,titleStore:a}=e,s=p().c14(t);if("accept"===o)if(p().pGj(t))k().ST({environment:i,store:a,selection:n,annotationKey:s,transaction:r,updateSelection:!1});else if(p().$b8(t))k().pe({environment:i,store:a,selection:n,transaction:r});else if(p().u2m(t)||p().Jeu(t)){k().ST({environment:i,store:a,selection:n,annotationKey:s,transaction:r,updateSelection:!1});const e=p().EpE(t);if(p().u2m(t))k().WO({environment:i,store:a,selection:n,annotation:e,transaction:r});else{const t=p().c14(e);k().ST({environment:i,store:a,selection:n,annotationKey:t,transaction:r,updateSelection:!1})}}else(0,v().t1)(t);else"reject"===o?p().$b8(t)||p().u2m(t)||p().Jeu(t)?k().ST({environment:i,store:a,selection:n,annotationKey:s,transaction:r,updateSelection:!1}):p().pGj(t)?k().pe({environment:i,store:a,selection:n,transaction:r}):(0,v().t1)(t):(0,v().t1)(o)}function q(e){const{environment:t,transaction:o,blockStore:n,type:i,removeDiscussionId:r}=e;let a;"add_line_break"===i?a=n.getAddLineBreakSuggestion():"remove_line_break"===i?a=n.getRemoveLineBreakSuggestion():"insert"===i?a=n.getInsertSuggestion():"remove"===i?a=n.getRemoveSuggestion():(0,v().t1)(i),a&&oe({environment:t,transaction:o,blockStore:n,blockSuggestionId:a.id,removeDiscussionId:r?{discussionId:a.discussionId}:void 0})}function W(e){const{environment:t,transaction:o,blockStores:n,formulasModule:i}=e;if(0===n.length)return;const s=(0,j().i)({environment:t,blockStore:n[0],commentTextValue:[[""]],transaction:o,files:[],type:"suggestion",formulasModule:i});if(!s)throw new(r().p8)("Discussion must be created when creating a block with suggestion");return n.forEach((e=>{te(o,e,{id:a().Il(),type:"remove",discussionId:s.id}),J({environment:t,transaction:o,discussionStore:s,addModifiedBlockIdsAfter:[e.id]})})),s}function G(e){const{environment:t,transaction:o,blockStore:n,type:i,createDiscussionStore:s}=e;if(n.getAddLineBreakSuggestion()||n.getRemoveLineBreakSuggestion())return;const l=s();if(te(o,n,{id:a().Il(),type:i,discussionId:l.id}),!l)throw new(r().p8)("Discussion must be created when creating a block with suggestion");return J({environment:t,transaction:o,discussionStore:l,addModifiedBlockIdsAfter:[n.id]}),l}function $(e){var t;const{environment:o,transaction:n,blockStore:i,modifiedBlockIds:a,splitFrom:s,skipAnnotatingTransaction:c}=e;if(!c&&n.getSuggestionDiscussionStore())throw new(r().p8)("Calling createSuggestionDiscussion when already have a suggestion discussion store in the transaction.");const d={createDiscussionArgs:{type:"suggestion",modifiedBlockIds:a,splitFrom:s},blockStore:i,environment:o,transaction:n,commentTextValue:[[""]],files:[],discussionId:(0,M().TS)({environment:o,table:l().qF,spaceId:i.pointer.spaceId})},u=(0,L().c)(d);return c||n.annotationWithSuggestionDiscussionStore(u.discussionStore),h().x6(o,{comment_id:u.commentStore.id,discussion_id:u.discussionStore.id,discussion_type:"suggestion",parent_block_id:u.discussionStore.getParentId(),parent_collection_id:null===(t=u.discussionStore.getParentStore())||void 0===t?void 0:t.getParentCollectionIdUpToTwoLevels()}),u}function Q(e){return(0,B().sQ)(e.start.store)}function Y(e,t){const o=(0,B().sQ)(e.start.store);if(o)return F().t1.createChildStore(o,{table:l().qF,id:t,spaceId:(0,c().J)(o.pointer.spaceId)})}function J(e){var t;const{environment:o,transaction:n,discussionStore:i,addModifiedBlockIdsBefore:a=[],addModifiedBlockIdsAfter:s=[],removeModifiedBlockIds:l=[],addModifiedBlockIdsAfterAnchor:c}=e;if("suggestion"!==i.getType())throw new(r().p8)("This fn only used for suggestion");const d=i.getContext(),p=(0,f().TO)(i.getSuggestionRawContextStore());if(a.length>0||s.length>0||l.length>0){const e=i.getSuggestModifiedBlockIds()??[],t=g().zu(a,...e),o=g().zu(s,...e),{first:r,second:d}=(0,u().gb)(e,c),m=[...t,...r,...o,...d].filter((e=>!l.includes(e)));S().sW({store:p,data:{modifiedBlockIds:m},transaction:n})}let m;const v=i.getSuggestModifiedBlockStores()??[];if(0===v.length)m=void 0;else{const e=v[0],t=A().fM(e);m=t?U().MT.getSessionId(t):void 0}m&&p.getKeyStore("latestSessionId").getValue()!==m&&S().sW({store:p,data:{latestSessionId:m},transaction:n});const h=i.getSuggestionSnapshotStore();if(!h)throw new(r().p8)("Suggestion discussion snapshot store required to update context");const b=null===(t=i.getModel())||void 0===t?void 0:t.getLiveContext(i.getRecordModel);b&&S().sW({store:h,data:{data:b},transaction:n}),d&&d.length>0?_().Kx({environment:o,suggesting_session_id:m,discussion_id:i.id,suggestion_types:X(i),target_block_id:i.getParentId()}):_().eO({environment:o,suggesting_session_id:m,discussion_id:i.id,suggestion_types:X(i),target_block_id:i.getParentId()})}function X(e){const t=e.getContext();if(!t)return[];const o=e.id,n=new Set;for(const i of t)if("textValue"===i.type){const e=i.value.flatMap((e=>p().hDy(e))).filter((e=>p().BIG(e)&&p().fgJ(e)===o));let t=!1,r=!1;for(const o of e)o[0]===p().GKr.SuggestionInsertText?t=!0:o[0]===p().GKr.SuggestionRemoveText?r=!0:o[0]===p().GKr.SuggestionAnnotate?n.add("add_annotation"):o[0]===p().GKr.SuggestionUnannotate&&n.add("remove_annotation");t&&r?n.add("replace_text"):(t&&n.add("add_text"),r&&n.add("remove_text"))}else if("blockSuggestion"===i.type){const e=i.value.type;switch(e){case"insert":n.add("add_block");break;case"remove":n.add("remove_block");break;case"remove_line_break":n.add("remove_line_break");break;case"add_line_break":n.add("add_line_break");break;default:(0,v().t1)(e)}}else(0,v().t1)(i);return Array.from(n)}function ee(e,t){const o=e.getSuggestionsStore().getValue();return null==o?void 0:o.find((e=>e.discussionId===t))}function te(e,t,o){if("page"===t.getType()){const o=new(r().p8)("Page-level suggestion added.");m().rn(o,{from:"suggestionActions",type:"pageLevelSuggestionAdded",data:{miscDataToConvertToString:{blockId:t.id,blockType:t.getType(),userAction:e.getUserActionForAnalyticsPurposesOnly(),oldBlock:t.getCreatedTime()<Date.now()-5e3}}})}const n=t.getFormatStore().getKeyStore("suggestions");C().applyOperation({store:t,operation:{pointer:n.pointer,command:"keyedObjectListAfter",path:n.path,args:{value:o}},transaction:e}),(0,V().t)({transaction:e,blockStore:t,discussionId:o.discussionId})}function oe(e){const{transaction:t,blockStore:o,blockSuggestionId:n,removeDiscussionId:i}=e,r=o.getFormatStore().getKeyStore("suggestions");C().applyOperation({store:o,operation:{pointer:r.pointer,command:"keyedObjectListRemove",path:r.path,args:{remove:{id:n}}},transaction:t}),i&&(0,O().Z)({transaction:t,blockStore:o,discussionIds:[i.discussionId]})}function ne(e,t,o,n,i){const{discussionStore:a,blockStore:s}=function(e,t,o,n,i){let a;if(o instanceof F().G)a=o;else{const e=o.start.store.getAncestorRecordStoreAtRootPath();if(!(e&&e instanceof F().G))throw new(r().p8)("Cannot create a suggestion on a RecordStore that's not a block.");a=e}const s=t.getSuggestionDiscussionStore();if(s)return{discussionStore:s,blockStore:a};const d=a.getInsertSuggestion();if(d){const o=F().t1.createChildStore(a,{table:l().qF,id:d.discussionId,spaceId:(0,c().J)(a.pointer.spaceId)});if((0,x().Ld)(o,e.currentUser))return t.annotationWithSuggestionDiscussionStore(o),{discussionStore:o,blockStore:a}}if(n)for(const r of n.annotationTypes){const e=(0,x().k$)(a,n.annotations,n.currentUser,r);if(e)return{discussionStore:e.discussionStore,blockStore:a}}if(i)for(const r of i.suggestionTypes){const e=i.blockStore.getAllBlockSuggestions().find((e=>{if(e.type===r){const t=F().t1.createChildStore(i.blockStore,{table:l().qF,id:e.discussionId,spaceId:(0,c().J)(i.blockStore.pointer.spaceId)});return(0,x().Ld)(t,i.currentUser)}}));if(e)return{discussionStore:F().t1.createChildStore(i.blockStore,{table:l().qF,id:e.discussionId,spaceId:(0,c().J)(i.blockStore.pointer.spaceId)}),blockStore:a}}const u=$({transaction:t,blockStore:a,modifiedBlockIds:[a.id],environment:e});return{discussionStore:u.discussionStore,blockStore:a}}(e,t,o,n,i);return N().az(e,s)&&b().Ib({environment:e,blockStore:s,shouldFocusDiscussion:!0,analyticsFrom:"new_suggestion",discussionIds:[a.id],recursivelyLoadAllDiscussions:!1}),a}function ie(e){const{environment:t,store:o,discussionStore:n,selection:i,transaction:r}=e,a=p().Sfs({textValue:o.getValue(),startIndex:i.startIndex,endIndex:i.endIndex,groupingKey:p().GKr.SuggestionInsertText}).map((e=>{let{annotation:n,startIndex:r,endIndex:a}=e;const s=p().fgJ(n),l=(0,x().cC)({store:o,discussionId:s});if(l&&(0,x().Ld)(l,t.currentUser))return{startIndex:Math.max(r,i.startIndex),endIndex:Math.min(a,i.endIndex),annotation:n}}));k().WO({environment:t,store:o,annotation:[p().GKr.SuggestionRemoveText,n.id],selection:i,transaction:r}),a.reverse().forEach((e=>{if(e){k().pe({environment:t,store:o,selection:{startIndex:e.startIndex,endIndex:e.endIndex},transaction:r});const n=p().fgJ(e.annotation),i=(0,x().cC)({store:o,discussionId:n});i&&J({environment:t,transaction:r,discussionStore:i})}}))}function re(e){const{environment:t,multiSelection:o,transaction:n,discussionStore:r}=e,s=(0,P().L5)(o);if(0===s.length)return;if(1===s.length){const{store:e,selection:o}=s[0];return ie({environment:t,store:e,selection:o,transaction:n,discussionStore:r}),void J({environment:t,transaction:n,discussionStore:r,addModifiedBlockIdsAfter:[e.id]})}const{start:l,end:c}=o;ie({environment:t,store:l.store,selection:{startIndex:l.index,endIndex:1/0},transaction:n,discussionStore:r}),J({environment:t,transaction:n,discussionStore:r,addModifiedBlockIdsAfter:[l.store.id]});const d=[o.start.store.id],u=(0,P().Nj)({multiSelection:o,includeNonSelectable:!0});if(!u)return;const{treeRange:p}=u;for(const m of p.iterateDeletion())"delete"===m.operation&&(0,R().XL)({treeOperation:m,deleteFrom:"record-store-parent"}).forEach((e=>{let{childToRemove:t}=e;t.id===o.start.store.id||t.id===o.end.store.id||(0,i().S9)((0,f().TO)(t.getType()))||(d.push(t.id),te(n,t,{id:a().Il(),type:"remove",discussionId:r.id}))}));J({environment:t,transaction:n,discussionStore:r,addModifiedBlockIdsAfter:d}),ie({environment:t,store:c.store,selection:{startIndex:0,endIndex:o.end.index},transaction:n,discussionStore:r}),J({environment:t,transaction:n,discussionStore:r,addModifiedBlockIdsAfter:[c.store.id]})}function ae(e){const{environment:t,sourceBlockStore:o,targetBlockStore:i,transaction:r,selectionIsExpanded:d,editorMode:u}=e,m=o.getAddLineBreakSuggestion()??o.getRemoveLineBreakSuggestion();if(m){const e=F().t1.createChildStore(o,{id:m.discussionId,table:l().qF,spaceId:(0,c().J)(o.pointer.spaceId)});S().sW({store:e,data:{parent_id:i.id,parent_table:s().iU},transaction:r}),te(r,i,m),J({environment:t,transaction:r,discussionStore:e,addModifiedBlockIdsBefore:[i.id],removeModifiedBlockIds:[o.id],addModifiedBlockIdsAfterAnchor:o.id}),oe({environment:t,transaction:r,blockStore:o,blockSuggestionId:m.id,removeDiscussionId:{discussionId:m.discussionId}})}if("suggest"===u){var f,g;const e=null===(f=(0,x().YT)({blockStore:o,currentUser:t.currentUser,type:p().GKr.SuggestionInsertText}))||void 0===f?void 0:f.discussionStore;if(null!==(g=i.getNavigableBlockStore())&&void 0!==g&&g.isCommentOnly()){const e=r.getSuggestionDiscussionStore()??ne(t,r,o,{annotations:n().u.fromArray(p().Rkp(o.getTitleValue())),annotationTypes:[p().GKr.SuggestionInsertText],currentUser:t.currentUser});te(r,i,{type:"insert",id:a().Il(),discussionId:e.id}),J({environment:t,transaction:r,discussionStore:e,addModifiedBlockIdsAfter:[i.id],addModifiedBlockIdsAfterAnchor:o.id})}if(!e){const e=r.getSuggestionDiscussionStore()??$({transaction:r,blockStore:o,modifiedBlockIds:[o.id],environment:t}).discussionStore;te(r,o,{id:a().Il(),type:"add_line_break",discussionId:e.id});J({environment:t,transaction:r,discussionStore:e,addModifiedBlockIdsAfter:d?[o.id,i.id]:[o.id],addModifiedBlockIdsAfterAnchor:o.id})}if(0===i.getTitleValue().length||e){const n=r.getSuggestionDiscussionStore()??e??$({transaction:r,blockStore:i,modifiedBlockIds:[i.id],environment:t}).discussionStore;te(r,i,{id:a().Il(),type:"insert",discussionId:n.id}),J({environment:t,transaction:r,discussionStore:n,addModifiedBlockIdsAfter:[i.id],addModifiedBlockIdsAfterAnchor:o.id})}}}function se(e){const{environment:t,transaction:o,currentPageStore:n,blockStore:i}=e,r=g().jj([...i.getAllBlockSuggestions().map((e=>e.discussionId)),...i.getInlineSuggestionDiscussionIds()]);for(const a of r){const e=F().jQ.createChildStore(i,{table:l().qF,id:a,spaceId:i.getSpaceId()});if(!e.isDefined())continue;const r=e.getCommentStores()[0];r&&K({environment:t,transaction:o,action:"reject",discussionStore:e,commentStore:r,discussionLocation:"ai_reject_all_suggestions",currentPageStore:n})}}},527188:(e,t,o)=>{o.d(t,{I4:()=>f,ZP:()=>v});o(667294);var n=()=>o(846550),i=()=>o(788860),r=()=>o(707513),a=()=>o(802911),s=()=>o(58836),l=()=>o(1910),c=()=>o(381622),d=()=>o(344569),u=()=>o(211332),p=o(785893);const m=3;let f=function(e){return e[e.PushContent=0]="PushContent",e[e.FloatRight=1]="FloatRight",e}({});const g=(0,i().vU)({commentsAriaLabel:{defaultMessage:"{count, plural, one {1 comment} other {{count} comments}}",id:"comments.components.discussionindicator.commentAriaLabel"},suggestionsAriaLabel:{defaultMessage:"{count, plural, one {1 suggestion} other {{count} suggestions}}",id:"comments.components.discussionindicator.suggestionAriaLabel"},reactionsAriaLabel:{defaultMessage:"{count, plural, one {1 reaction} other {{count} reactions}}",id:"comments.components.discussionindicator.reactionsAriaLabel"}});function v(e){const t=(0,i().YB)(),{store:o,recursivelyLoadAllDiscussions:s,onlyCountBlockLevelDiscussions:f,property_id:v}=e,{showIndicator:_,formattedReactionCount:b,onlySuggestions:y,icon:S,showReactionsIcon:w,onlyHasDraftIndicator:k,formattedCommentCount:I,handleClick:C,discussionIsSelected:x,commentsCount:T,shouldShowDraftIndicator:M}=(0,d().Z)({store:o,recursivelyLoadAllDiscussions:s,onlyCountBlockLevelDiscussions:f,propertyId:v}),P=(0,n().yK)((e=>({iconButton:{position:"relative",alignSelf:"flex-start",marginLeft:4,marginTop:m,background:x?e.selectLightGray[100]:void 0},draftIconButton:{position:"relative",alignSelf:"flex-start",marginTop:3,background:x?e.selectLightGray[100]:void 0,width:24,marginLeft:5},icon:{height:14,width:14,color:e.lightTextColor},commentCount:{marginLeft:2,color:e.lightTextColor,fontWeight:r().Ue.semibold},draftCommentCount:{marginLeft:2,color:e.icon.tertiary,fontWeight:r().Ue.semibold},reactIcon:{width:16,height:16,marginLeft:"-2px"},relativeDiv:{position:"relative"}})),[x]);return(0,p.jsx)(a().Z,{name:"DiscussionIndicatorInner",children:_&&(0,p.jsxs)(h,{format:e.getFormat(),children:[(T>0||k)&&(0,p.jsxs)("div",{style:P.relativeDiv,children:[(0,p.jsx)(l().Z,{ariaLabel:y?t.formatMessage(g.suggestionsAriaLabel,{count:I}):t.formatMessage(g.commentsAriaLabel,{count:I}),icon:S,style:P.iconButton,iconStyle:P.icon,onClick:C,caption:(0,p.jsx)("span",{style:M?P.draftCommentCount:P.commentCount,children:I})}),M&&(0,p.jsx)(u().Z,{onlyShowDraftDot:!0})]}),w&&(0,p.jsx)(l().Z,{ariaLabel:t.formatMessage(g.reactionsAriaLabel,{count:b}),icon:c().a,style:P.iconButton,iconStyle:P.reactIcon,onClick:C,caption:(0,p.jsx)("span",{style:P.commentCount,children:b})})]})})}function h(e){return e.format===f.FloatRight?(0,p.jsx)(s().p,{allowSelectionWithin:!1,style:{width:0,height:0},children:e.children}):(0,p.jsx)(p.Fragment,{children:e.children})}},211332:(e,t,o)=>{o.d(t,{Z:()=>l});o(667294);var n=()=>o(846550),i=()=>o(906249),r=()=>o(918302),a=o(785893);const s="#CB9433";function l(e){const{onlyShowDraftDot:t,customTop:o,customLeft:l,withBackgroundFill:c}=e,d=(0,n().yK)((e=>({icon:{height:24,width:24,color:e.lightTextColor},sharedDotStyles:{position:"absolute",borderRadius:"50%",color:s,stroke:e.whiteButtonBackground,strokeWidth:"1.2px",pointerEvents:"none"},absoluteDot:{top:o??20,left:l??"calc(50% + 4px)",height:12,width:12},absoluteOnlyDot:{top:o??6,left:l??19,height:8,width:8},withBackgroundFill:{backgroundColor:s,fill:"transparent"},container:{width:"100%",display:"flex",justifyContent:"center",marginBottom:10}})),[l,o]);return t?(0,i().h)({...d.sharedDotStyles,...d.absoluteOnlyDot,...c&&d.withBackgroundFill}):(0,a.jsxs)("div",{style:d.container,children:[(0,r().s)(d.icon),(0,i().h)({...d.sharedDotStyles,...d.absoluteDot})]})}},78449:(e,t,o)=>{o.d(t,{SO:()=>p,VS:()=>f,c_:()=>u,nZ:()=>m});o(267602),o(916054),o(228244);var n=()=>o(156642),i=()=>o(986631),r=()=>o(718959),a=()=>o(191586),s=()=>o(889765),l=()=>o(856929),c=()=>o(95718),d=()=>o(764189);function u(e){let{blocks:t}=e;return!!p({blocks:t})&&(!function(e){let{blocks:t}=e;return t.some((e=>{const t=r().np();return!(!t||!(0,a().Wt)(t))||!!(t&&((0,c().Eo)(t)||null!=t&&t.pathIsDead())&&t.uiContains(e)&&t!==e)}))}({blocks:t})&&(!!(0,s().c)({blocks:t})&&(!!m({blocks:t})&&(!!f({blocks:t})&&(!!function(e){let{blocks:t}=e;if(t.some((e=>e.getAssociatedCollectionStore())))return!0;return t.length>1||!function(e){if(!e)return!1;const t=e.getType(),o=e.getFormat();return Boolean((0,n().XD)(t,o)&&e.isEmptyTitle())}(t[0])}({blocks:t})&&(!(1!==t.length&&!(0,l().K)())&&!t.some(i().t)))))))}function p(e){let{blocks:t}=e;return!d().n.state&&t.every((e=>e.canComment()))}function m(e){let{blocks:t}=e;return!!t.some((e=>e.getAssociatedCollectionStore()))||t.every((e=>!e.isNavigableBlock()))}function f(e){let{blocks:t}=e;return t.every((e=>{const t=e.getType(),o=e.getFormat();return Boolean(!t||!(0,n()._T)(t,o))}))}},954452:(e,t,o)=>{o.d(t,{EM:()=>z,H0:()=>G,QB:()=>E,Uj:()=>j,Vs:()=>A,Z:()=>V,az:()=>H,fS:()=>F,fg:()=>q,gC:()=>Z,oS:()=>K,wo:()=>x});o(670560),o(267602),o(653476),o(30005),o(241792);var n=()=>o(504008),i=()=>o(156642),r=()=>o(26970),a=()=>o(396136),s=()=>o(602299),l=()=>o(696459),c=()=>o(718959),d=()=>o(247724),u=()=>o(767306),p=()=>o(670655),m=()=>o(942226),f=()=>o(852465),g=()=>o(472753),v=()=>o(32969),h=()=>o(123145),_=()=>o(589525),b=()=>o(35982),y=()=>o(876822),S=()=>o(72041),w=()=>o(727475),k=()=>o(482162),I=()=>o(826955),C=()=>o(958783);const x=10,T=10,M="temp-margin-comment-discussion",P="temp-margin-comment-discussion-in-toggle",A=50,R=`.${d().x9t} .notion-collection_view-block`,B=`.${d().OE$}`,E=372,D=10,U=14,F=16,N=1150,V=E-4*F,L=1500,O=1600;function Z(e,t,o){const n=j(e,t);return n>=L||o&&!k().default.isSidePeekClosingStore.state||t?0:(L-n)/2}function j(e,t){return t&&k().default.isSidePeekOpen()?(0,_().vJ)(e):e.WindowSizeStore.state.width-(0,_().Wk)(e)-(0,_().ll)(e,!1)-h().VV()}function K(e,t,o){return(j(e,t)-O)/2+2*F+Z(e,t,o)}const z=new(o(435308).default)((()=>{var e;let t=y().default.state.mainEditorCurrentBlockStore;return null!==(e=t)&&void 0!==e&&e.isCollectionView()&&(t=(0,o(887430).SY)(t)||t),t?(0,f().vV)(t,{recursivelyLoadAllDiscussions:!0,includePropertyDiscussions:!0}).filter((e=>{var o;return e.getParentId()!==(null===(o=t)||void 0===o?void 0:o.id)||void 0!==e.getPropertyId()})):[]}),{debugName:"mainEditorBlockUnresolvedDiscussionStore"});function H(e,t){return(!t.getAssociatedCollectionStore()||!t.getRecordStoreUIParent()||t.id===(0,c().zj)())&&(!e.device.isMobile&&(!(j(e,(0,m().wq)(t))<N)&&(!(0,_().vK)(e)&&(!k().default.isSidePeekOpen()&&(!w().Z.state.open&&Boolean(t.getRecordStoreUIRoot()===y().default.state.mainEditorCurrentBlockStore&&"inline"===(0,p().D7)()))))))}function q(e,t){const o=z.state.length>0,n=C().default.state.open&&C().default.state.rect;return Boolean(H(e,t)&&(o||n))}function W(e,t){return e.offsetTop!==t.offsetTop?e.offsetTop<t.offsetTop?-1:1:e.createdTimeMs&&t.createdTimeMs&&e.createdTimeMs!==t.createdTimeMs?e.createdTimeMs<t.createdTimeMs?-1:1:e.id<t.id?-1:1}const G=(0,o(513670).Ds)((function(e){let{discussionStores:t,pageContentStores:s,marginDiscussionItemRefs:p,selectedDiscussionId:m,newMarginDiscussionArgs:f,marginContainerElement:h,pageViewBlockElement:_,onComputeComplete:y,computedOnce:w,prevSelectedDiscussionId:k,isFullWidth:x,topbarHeight:P,windowHeight:A,previousDiscussionElements:E}=e;const F=new Map;let N=0,V=0;if(!h||!_)return;if(0===t.length&&!f)return;const L=n().Z.withListenerIgnored((()=>{var e;return(null===(e=S().Z.state.elementRef.current)||void 0===e?void 0:e.scrollTop)??0})),O=h.getBoundingClientRect(),Z=$({currentScrollTop:L,rect:O}),j=t.map((e=>function(e){let{discussionStore:t,currentScrollTop:o,topbarHeight:n,windowHeight:i,pageViewBlockElement:s,previousDiscussionElements:l,currentDiscussionElements:d,selectedDiscussionId:u}=e;const p=t.id,m=function(e){const{topbarHeight:t,windowHeight:o,pageViewBlockElement:n,discussionId:i,previousDiscussionElements:a,currentDiscussionElements:s,selectedDiscussionId:l}=e,c=n.getElementsByClassName((0,r().dk)({discussionId:i})),d=e=>(s.set(i,e),e);if(c.length>0){if(l===i){let e;for(let n=0;n<c.length;n++){const i=c[n];if(i instanceof HTMLElement){const n=i.getBoundingClientRect();if(n.bottom<t||n.top>o){if(e)return d(e)}else{if(n.top>t)return d(i);e=i}}}}const e=a.get(i);return e&&Array.from(c).includes(e)?d(e):d(c[0])}}({topbarHeight:n,windowHeight:i,pageViewBlockElement:s,discussionId:p,previousDiscussionElements:l,currentDiscussionElements:d,selectedDiscussionId:u}),f=t.recordStoreUIParentStore;if(!(f&&f.id&&f.table===a().iU&&f instanceof I().G))return;if(!f.isReady())return;const g={offsetTop:0,discussionStore:t,parentBlockStore:f,type:"existing",id:t.id,createdTimeMs:Y(t)};if(m instanceof HTMLElement)return g.offsetTop=$({rect:m.getBoundingClientRect(),currentScrollTop:o}),g;const h=v().C.findNodeFromStore(f);if(h instanceof HTMLElement&&f.id!==(0,c().zj)())return g.offsetTop=$({rect:h.getBoundingClientRect(),currentScrollTop:o}),g;const{node:_,blockStore:b}=v().C.findClosestVisibleParent(f);if(_ instanceof HTMLElement&&b)return g.offsetTop=$({rect:_.getBoundingClientRect(),currentScrollTop:o})+D,g.parentBlockStore=b,g.shouldGroup=!0,g.closestVisibleParentId=b.id,g}({discussionStore:e,currentScrollTop:L,topbarHeight:P,windowHeight:A,pageViewBlockElement:_,previousDiscussionElements:E,currentDiscussionElements:F,selectedDiscussionId:m}))).filter(l().$K),K=f&&function(e){var t;let o,{blockStore:n,discussionInputStore:i,currentScrollTop:r,pageViewBlockElement:a}=e;const s=null===(t=a.getElementsByClassName(d().dXl))||void 0===t?void 0:t[0];let l=!1,c=n;if(s instanceof HTMLElement)o=s.getBoundingClientRect();else{const e=C().default.getBlockStore();if(e)o=g().R.getRect(e);else{const e=C().default.getClosestBlockStore();if(e){const{node:t,parentBlockStore:n}=e;t instanceof HTMLElement&&n&&(o=t.getBoundingClientRect(),l=!0,c=n)}}}if(!o)return;return{offsetTop:$({rect:o,currentScrollTop:r})+U,parentBlockStore:c,discussionInputStore:i,type:"new",id:M,createdTimeMs:Date.now(),shouldGroup:l}}({...f,currentScrollTop:L,pageViewBlockElement:_});let z=null!=K&&K.shouldGroup?Q(j,K):Q(j);null!=K&&K.shouldGroup||K&&z.push(K);const H=K&&o(8208).Z.state.isActivelyComposing?K.id:m;let q;const G=H||k?void 0:function(e){let{pageContentStores:t,currentScrollTop:o,marginContainerRect:n,isFullWidth:r}=e;return t.map((e=>{const t=e.getType();if(!t)return;let o;var a;if((0,l().qg)(i().Ok,t)||"column_list"===t||(0,u().pF)(e))o=null===(a=v().C.findSelectableFromStore(e))||void 0===a||null===(a=a.getNode())||void 0===a?void 0:a.getBoundingClientRect();else if(t===i().Ti.table){var s,c;const t=null===(s=v().C.findSelectableFromStore(e))||void 0===s?void 0:s.getNode(),n=null==t?void 0:t.getBoundingClientRect(),i=null==t||null===(c=t.querySelector(B))||void 0===c?void 0:c.getBoundingClientRect();o=r?n:n&&i?n.width<i.width?n:i:n||i}else if(e.isInlineCollectionView()){var d,p;const t=null===(d=v().C.findSelectableFromStore(e))||void 0===d?void 0:d.getNode();o=r?null==t?void 0:t.getBoundingClientRect():null==t||null===(p=t.querySelector(R))||void 0===p?void 0:p.getBoundingClientRect()}return o&&o.right>n.left?o:void 0})).filter(l().$K).map((e=>{const t=$({rect:e,currentScrollTop:o});return new DOMRect(e.left,t,e.width,e.height)}))}({pageContentStores:s,currentScrollTop:L,marginContainerRect:O,isFullWidth:x}).sort((e=>-e.top));z=z.sort(W).map(((e,t)=>{e.offsetTop-Z>=18&&(e.offsetTop-=18);const o=e.id,n=p.get(e.id);if(!n)return"new"===e.type||w||(e.offsetTop=-9999,e.hide=!0),e;const i=n.getBoundingClientRect(),r=i.height;let a=e.offsetTop;return a<=N&&(a=N),G&&(a=function(e,t){const o={x:e.x,y:e.y,width:e.width,height:e.height,top:e.top,left:e.left,bottom:e.bottom,right:e.right};let n=t[t.length-1];for(;n;)if((0,b().dQ)(o,n))o.top=n.bottom+T,o.bottom=o.top+o.height,t.pop(),n=t[t.length-1];else{if(o.bottom<n.top)return o.top;t.pop(),n=t[t.length-1]}return o.top}(new DOMRect(i.left,a,i.width,i.height),G)),o===H&&0===V&&(V+=a-e.offsetTop,e.selected=!0,q=t),e.offsetTop=a,e.height=r,N=e.offsetTop+r,e}));const J=z.map((e=>(e.offsetTop=e.offsetTop-Z,e)));let X;if(V>0&&void 0!==q){for(let e=q;e>=0;e--){const t=J[e];if(t.height){if(t.id===H)t.offsetTop-=V;else{if(!(X&&X.offsetTop<=t.offsetTop+t.height))break;t.offsetTop-=V}X=t}}for(let e=q+1;e<J.length;e++){const t=J[e];t.offsetTop-=V,X=t}}y({data:J,hasNewDiscussion:Boolean(K),selectedDiscussion:m},F)}),100);function $(e){let{rect:t,currentScrollTop:o}=e;return t.top+o}function Q(e,t){const o=new Map,n=[];e.forEach((e=>{if(e.shouldGroup){const t=o.get(e.parentBlockStore.id)||[];t.push(e),o.set(e.parentBlockStore.id,t)}else n.push(e)}));const i=null==t?void 0:t.parentBlockStore.id,r=i&&o.get(i)||[];return o.forEach((e=>{n.push({offsetTop:e[0].offsetTop,groupedDiscussionsData:e,parentBlockStore:e[0].parentBlockStore,type:"grouped",id:e[0].id,createdTimeMs:e[0].createdTimeMs,newDiscussionData:t})})),t&&0===r.length&&n.push({offsetTop:t.offsetTop,groupedDiscussionsData:[],parentBlockStore:t.parentBlockStore,type:"grouped",id:P,createdTimeMs:t.createdTimeMs,newDiscussionData:t}),n}function Y(e){const t=f().ak(e),o=t.getValue()||[];if(0===o.length)return;const n=o[0];return I().t1.createChildStore(t,{table:s().x_,id:n,spaceId:t.pointer.spaceId}).getCreatedTime()}},600785:(e,t,o)=>{o.d(t,{L:()=>a,_:()=>r});var n=()=>o(26970),i=()=>o(32969);function r(e){var t;let o,{discussionId:r}=e;const a=null===(t=document.getElementsByClassName(`${(0,n().dk)({discussionId:r})}`))||void 0===t?void 0:t[0];return a&&(o=i().C.findSelectableFromChildNode(a)),o}function a(e){let{discussionId:t,blockId:o}=e,n=r({discussionId:t});if(!n){const e=i().C.findScrollToSelectablesFromIds([o]);e.length>0&&(n=e[0])}return n}},344569:(e,t,o)=>{o.d(t,{Z:()=>b});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(241792),o(228244);var n=o(667294),i=()=>o(219727),r=()=>o(142735),a=()=>o(799454),s=()=>o(879952),l=()=>o(718959),c=()=>o(852465),d=()=>o(918302),u=()=>o(275023),p=o(785893);const m=(0,o(827282).IU)("suggestionDiscussionCombo",{viewBox:"0 0 14 13",svg:(0,p.jsxs)("g",{children:[(0,p.jsx)("path",{fillRule:"evenodd",d:"M1.427 7.748c.314.172.674.259 1.081.259h.43V6.963H2.66c-.366 0-.64-.091-.822-.273-.179-.184-.268-.457-.268-.817V2.524c0-.36.09-.631.268-.813.182-.184.456-.276.822-.276h5.682c.363 0 .634.092.813.276.18.18.27.447.272.8h1.127V2.37c0-.446-.087-.83-.26-1.152a1.753 1.753 0 00-.738-.742C9.235.299 8.85.21 8.401.21H2.583c-.448 0-.833.088-1.156.264-.32.172-.565.42-.738.742-.173.323-.26.706-.26 1.152v3.48c0 .445.089.83.264 1.151.18.323.424.572.734.748z",clipRule:"evenodd"}),(0,p.jsx)("path",{d:"M6.492 12.557c-.217 0-.387-.07-.51-.207-.123-.138-.185-.327-.185-.567v-.975h-.28c-.408 0-.768-.087-1.082-.26a1.895 1.895 0 01-.734-.747c-.176-.322-.264-.706-.264-1.151V5.17c0-.446.087-.83.26-1.152.173-.322.419-.57.738-.743.322-.175.708-.263 1.156-.263h5.818c.448 0 .834.088 1.156.263.322.173.568.42.738.743.173.322.26.706.26 1.151v3.48c0 .446-.087.83-.26 1.152a1.78 1.78 0 01-.738.747c-.322.173-.708.26-1.156.26H8.882l-1.485 1.3a2.497 2.497 0 01-.479.343.91.91 0 01-.426.106zm.272-1.257L8.14 9.946a.938.938 0 01.294-.215.96.96 0 01.365-.057h2.544c.364 0 .634-.091.813-.273.182-.184.273-.457.273-.817V5.235c0-.36-.091-.631-.273-.813-.179-.184-.45-.276-.813-.276H5.661c-.366 0-.64.092-.822.276-.178.182-.268.453-.268.813v3.349c0 .36.09.633.268.817.182.182.456.273.822.273h.699c.132 0 .231.03.299.092.07.062.105.166.105.312V11.3zm-.343-3.696a.685.685 0 01-.496-.202.68.68 0 01-.202-.492.67.67 0 01.202-.493.677.677 0 01.496-.206c.194 0 .358.069.493.206a.67.67 0 01.202.493.68.68 0 01-.202.492.67.67 0 01-.493.202zm2.083 0a.685.685 0 01-.496-.202.68.68 0 01-.202-.492.67.67 0 01.202-.493.677.677 0 01.496-.206c.194 0 .358.069.493.206a.663.663 0 01.206.493c0 .19-.069.354-.206.492a.67.67 0 01-.493.202zm2.083 0a.68.68 0 01-.492-.202.68.68 0 01-.202-.492.67.67 0 01.202-.493.672.672 0 01.492-.206c.194 0 .358.069.493.206a.663.663 0 01.206.493c0 .19-.069.354-.206.492a.67.67 0 01-.493.202z"})]})});var f=()=>o(876822),g=()=>o(687647),v=()=>o(252100),h=()=>o(8208),_=()=>o(958783);function b(e){const t=(0,i().O7)(),{store:o,recursivelyLoadAllDiscussions:p,onlyCountBlockLevelDiscussions:b,propertyId:y}=e,S=(0,r().VK)((()=>{const e=_().default.state.open?_().default.state.blockId:null;return!!p&&(0,c().MI)({blockStore:o,transclusionReferences:"recurseInto",childPages:"omit"}).some((t=>t.id===e))}),[o,p]),w=(0,r().VK)((()=>_().default.state.open&&_().default.state.blockId===o.id&&"comment"===_().default.state.content&&(!_().default.state.property_id||_().default.state.property_id===y)),[y,o.id]),k=(0,r().VK)((()=>_().default.getDiscussionInputStore()),[]),I=w||S,C=(0,r().VK)((()=>{const e=c().vV(o,{recursivelyLoadAllDiscussions:p,onlyIncludeBlockLevelDiscussions:b,onlyIncludePropertyDiscussions:Boolean(y)}).filter((e=>e.getPropertyId()===y));if(0===e.length)return{commentsCount:0,numberOfReactions:0,discussionIsSelected:I&&h().Z.state.isActivelyComposing,hasSuggestionDiscussions:!1,hasDefaultDiscussions:!1};const t=new Set(e.map((e=>e.id))),n=g().Z.getFramePageFirstSelectedDiscussionId(),i=Boolean(n&&t.has(n)),r=l().RM();if(r){const e=c().MI({blockStore:r,transclusionReferences:"recurseInto",childPages:"omit"}),n=e.indexOf(o),i=new Set(t);for(let o=n-1;o>=0;o--){const n=e[o],r=c().vV(n,{recursivelyLoadAllDiscussions:!1,excludeSelf:!1,onlyIncludeBlockLevelDiscussions:!1,includeLoadingDiscussions:!0}).map((e=>e.id));for(const e of i)r.includes(e)?t.delete(e):i.delete(e);if(0===t.size)return{commentsCount:0,numberOfReactions:0,discussionIsSelected:!1,hasSuggestionDiscussions:!1,hasDefaultDiscussions:!1};if(0===i.size)break}}const{comments:a,reactions:s,hasSuggestionDiscussions:d,hasDefaultDiscussions:u}=c().c3(o,{recursivelyLoadAllDiscussions:p,onlyIncludeBlockLevelDiscussions:b,onlyIncludePropertyDiscussions:Boolean(y)},y);return{commentsCount:a,numberOfReactions:s,discussionIsSelected:i,hasSuggestionDiscussions:d,hasDefaultDiscussions:u}}),[b,y,p,I,o]),{commentsCount:x,numberOfReactions:T,hasSuggestionDiscussions:M,hasDefaultDiscussions:P}=C,A=(0,n.useCallback)((()=>{if(g().Z.state.open)a().LZ();else if(s().ZH({preventDismissMobileKeyboard:!0,environment:t}),I){if(x>0)h().Z.setActiveWithSource("popover_comments"),h().Z.setState({...h().Z.state,overlapsExistingDiscussionMenu:!0}),a().Ib({environment:t,blockStore:e.store,analyticsFrom:"discussion_indicator",shouldFocusDiscussion:!0,recursivelyLoadAllDiscussions:e.recursivelyLoadAllDiscussions,property_id:e.propertyId});else if(k){const e=f().default.state.mainEditorCurrentBlockStore;(0,v().U)({currentBlockStore:e,discussionInputStore:k,environment:t})}}else a().Ib({environment:t,blockStore:e.store,analyticsFrom:"discussion_indicator",shouldFocusDiscussion:!0,recursivelyLoadAllDiscussions:e.recursivelyLoadAllDiscussions,property_id:e.propertyId})}),[t,I,x,k,e.store,e.recursivelyLoadAllDiscussions,e.propertyId]),R=x>0||T>0||I,B=T>9?"9+":`${T}`,E=M&&!P,D=E?u().I:M&&P?m:d().s,U=x+(I?1:0);return{showIndicator:R,formattedReactionCount:B,onlySuggestions:E,icon:D,showReactionsIcon:T>0&&!I&&0===x,onlyHasDraftIndicator:I&&0===x,commentCountWithDraft:U,formattedCommentCount:U>9?"9+":`${U}`,handleClick:A,discussionIsSelected:C.discussionIsSelected,commentsCount:x,shouldShowDraftIndicator:I}}},874018:(e,t,o)=>{o.d(t,{DU:()=>p,HV:()=>c,Jg:()=>s,Vd:()=>r,commentsDependency:()=>i,gU:()=>a,rI:()=>l,s3:()=>f,tG:()=>m,y4:()=>u,zI:()=>d,zl:()=>g});var n=()=>o(677559);const i=new(n().Ss)("comments",(()=>Promise.all([o.e(62743),o.e(52774),o.e(44832),o.e(90698),o.e(84885),o.e(37358),o.e(5242),o.e(7312),o.e(90424),o.e(81580),o.e(84325),o.e(31189),o.e(69343),o.e(46293),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(46616),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63707),o.e(86609),o.e(91253),o.e(4642),o.e(5006),o.e(6612),o.e(61171),o.e(23179),o.e(75377),o.e(31020),o.e(2942),o.e(73682),o.e(58591),o.e(54803),o.e(1953),o.e(10216),o.e(58565),o.e(69197),o.e(42055),o.e(38739),o.e(44751),o.e(81567),o.e(63257),o.e(34291),o.e(1913),o.e(56054),o.e(95076),o.e(82658),o.e(4163),o.e(14581),o.e(88702),o.e(58324)]).then(o.bind(o,431150)))),r=(0,n().kF)(i,(e=>e.Comment)),a=(0,n().kF)(i,(e=>e.Discussion)),s=(0,n().kF)(i,(e=>e.DiscussionIndicator)),l=(0,n().kF)(i,(e=>e.DiscussionInput)),c=(0,n().kF)(i,(e=>e.MarginCommentsSection)),d=(0,n().kF)(i,(e=>e.NewDiscussionMenu)),u=(0,n().kF)(i,(e=>e.ReplyDiscussionMenu)),p=(0,n().kF)(i,(e=>e.ReactionBar)),m=((0,n().kF)(i,(e=>e.DiscussionReactionBar)),(0,n().kF)(i,(e=>e.CommentFileBlock))),f=(0,n().kF)(i,(e=>e.SuggestionContext)),g=(0,n().kF)(i,(e=>e.PropertyDiscussionIndicator))},574767:(e,t,o)=>{o.d(t,{Z:()=>r});class n extends(()=>o(263184))().default{getInitialState(){}getFirstSelectedDiscussionId(){var e;return null===(e=this.state)||void 0===e||null===(e=e.discussionIds)||void 0===e?void 0:e[0]}}const i=new n;(0,o(947115).exposeDebugValue)("DiscussionHoverStore",i);const r=i},3391:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{constructor(e,t){super(),this.environment=void 0,this.spaceId=void 0,this.environment=e,this.spaceId=t,this.reset()}getInitialState(){if(!this.environment)return;const e=new(o(66077).Z)({name:"DiscussionInputStore",isTemporaryData:!0});return{textStore:new(o(826955).ST)({environment:this.environment,pointer:(0,o(487270).Ii)({environment:this.environment,table:o(602299).x_,spaceId:this.spaceId}),path:["text"],recordStoreOptions:{inMemoryRecordCache:e}}),localRecordCache:e,files:[],showAttachFileIntro:!1,renderFileAttachIntro:!1}}isEmpty(){const e=this.state.textStore.getValue();return!e||0===e.length}hasNewLineCharacter(){const e=this.state.textStore.getValue();return o(955620).QaF(e).includes("\n")}}const i=n},8208:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{isHovered:!1,isActivelyComposing:!1}}setHoverWithSource(e){this.setState({...this.state,isHovered:!0,hoverEntryPoint:e})}setActiveWithSource(e){this.setState({...this.state,isActivelyComposing:!0,clickEntryPoint:e})}resetHoverSource(e){var t;e===(null===(t=this.state)||void 0===t?void 0:t.hoverEntryPoint)&&this.setState({...this.state,isHovered:!1,hoverEntryPoint:void 0})}resetActiveSource(e){var t;e===(null===(t=this.state)||void 0===t?void 0:t.clickEntryPoint)&&this.setState({...this.state,isActivelyComposing:!1,clickEntryPoint:void 0})}resetAllHoverSources(){this.setState({...this.state,isHovered:!1,hoverEntryPoint:void 0})}resetAllActiveSources(){this.setState({...this.state,isActivelyComposing:!1,clickEntryPoint:void 0})}resetEditorActiveSources(){"comments_pane"!==this.state.clickEntryPoint&&this.resetAllActiveSources()}resetEditorHoverSources(){"comments_pane"!==this.state.hoverEntryPoint&&this.resetAllHoverSources()}}const i=new n},958783:(e,t,o)=>{o.d(t,{default:()=>s});o(267602),o(653476);var n=()=>o(472753),i=()=>o(156538);class r extends(()=>o(263184))().default{getInitialState(){return{open:!1,rect:o(35982).bM}}hasContent(){if(this.state.open){if("comment"===this.state.content)return Boolean(this.state.discussionInputStore.state.textStore.getValue())||this.state.discussionInputStore.state.files.length>0;if("reaction"===this.state.content)return void 0!==this.state.emoji}}isComposingNewDiscussion(){return!(!this.state.open||"comment"!==this.state.content)&&!!this.hasContent()}getBlockStore(){if(this.state.open&&this.state.blockId){var e;const t=null===(e=n().R.findBlockFromId(this.state.blockId))||void 0===e?void 0:e.getBlockStore();return t&&"comment"===this.state.content&&t!==this.state.lastKnownBlockStore&&this.setState({...this.state,lastKnownBlockStore:t}),t}}isDraftCommentOnValidSelection(){return this.isTextWithCommentStillPresent()&&this.isBlockStillAlive()}getClosestBlockStore(){if(this.state.open&&"comment"===this.state.content){const{node:e,blockStore:t}=o(32969).C.findClosestVisibleParent(this.state.lastKnownBlockStore);return{node:e,parentBlockStore:t}}}getLastKnownBlockStore(){if(this.state.open&&"comment"===this.state.content)return this.state.lastKnownBlockStore}getLastSelectedEditables(){if(this.state.open&&"inline"===this.state.type&&this.state.multiSelection&&"comment"===this.state.content)return this.state.lastEditables.filter((e=>{let{store:t}=e;return t.table===o(396136).iU}))}getDiscussionInputStore(){if(this.state.open&&"comment"===this.state.content)return this.state.discussionInputStore}getType(){if(this.state.open)return this.state.type}getMultiSelection(){if(this.state.open&&"inline"===this.state.type)return this.state.multiSelection}getPropertyId(){if(this.state.open&&"comment"===this.state.content&&this.state.property_id)return this.state.property_id}isPropertyComment(){return Boolean(this.state.open&&"comment"===this.state.content&&this.state.property_id)}shouldShowPropertyComment(){var e;return Boolean(this.isPropertyComment()&&(null===(e=o(876822).default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.isInsideCollection()))}ifPropertyCommentShouldDisplay(){return!this.isPropertyComment()||this.shouldShowPropertyComment()}isPropertyWithDraftDiscussion(e){const{blockId:t,propertyId:o}=e;return!(!t||!o)&&(this.state.open&&"comment"===this.state.content&&this.state.blockId===t&&this.isPropertyComment()&&this.state.property_id===o)}updateRect(){const e=this.getBlockStore();if(!this.state.open||!e||this.isPropertyComment())return;if(e.isType("code"))return;const t=n().R.getRect(e);if(!t)return;const o=this.state.rect.left,i=this.state.rect.width,r=this.state.rect.height;this.setState({...this.state,rect:new DOMRect(o,t.top,i,r)})}calculateMultitextSelection(){if(this.state.open&&"inline"===this.state.type&&this.state.multiSelection&&!this.getPropertyId()){var e,t;const r=this.state.multiSelection.start.store.id,a=null===(e=n().R.findBlockFromId(r))||void 0===e?void 0:e.getBlockStore(),s=null==a?void 0:a.getTitleStore(),l=this.state.multiSelection.end.store.id,c=null===(t=n().R.findBlockFromId(l))||void 0===t?void 0:t.getBlockStore().getTitleStore();if(s&&c){const e=i().E.findEditableWithStore(s),t=i().E.findEditableWithStore(c);if(r===l&&a&&a.isType(o(156642).oe))return;t&&e&&-1===(0,o(220427).Z)(t.getNode(),e.getNode())?(this.state.multiSelection.start.store=c,this.state.multiSelection.end.store=c):(this.state.multiSelection.start.store=s,this.state.multiSelection.end.store=c)}}}isBlockStillAlive(){if(this.state.open&&"comment"===this.state.content&&this.state.lastKnownBlockStore){const e=this.state.lastKnownBlockStore.pathIsDead();return e&&this.reset(),!e}}isTextWithCommentStillPresent(){if(!this.state.open||"inline"!==this.state.type)return!0;const e=this.getLastSelectedEditables()??[];if(!e.length)return!1;const t=e[0].store.getValue(),n=o(955620).eeV(t),i=this.state.multiSelection.start.index>n.length-1;return i&&this.reset(),!i}}const a=new r;(0,o(947115).exposeDebugValue)("NewDiscussionMenuStore",a);const s=a},882637:(e,t,o)=>{o.d(t,{default:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1,rect:o(35982).bM}}}const i=new n},864880:(e,t,o)=>{o.d(t,{GS:()=>u,Ks:()=>p,jl:()=>f,sy:()=>m});o(667294);var n=()=>o(657320),i=()=>o(142735),r=()=>o(846550),a=()=>o(641702),s=()=>o(982855),l=()=>o(609489),c=()=>o(628370),d=o(785893);function u(e){const{store:t}=e,o=(0,i().VK)((()=>{const e=t.getBlockTitleStore().getValue();if(e)return(0,a().Xh)(e,t)}),[t]);return(0,i().VK)((()=>{const e=(0,s().z1)(),n=e.summarize,i=t.getFormat().ai_prompt_key;if(!i)return{prompt:n,additionalContext:o};const r=e[i];return r?{prompt:r,additionalContext:o}:{prompt:n,additionalContext:o}}),[o,t])}function p(e){const{store:t,isGenerating:o}=e,{prompt:r,additionalContext:a}=u({store:t}),l=(0,n().l)();return(0,i().VK)((()=>{const e=l&&l.publicEditModeStore.state;return!(0,s().GD)(e)||(!!o||(!(t.canEdit()&&!t.isNonEditableState())||"helpMeWrite"===r.key&&!a))}),[o,t,r.key,a,l])}function m(e){const{hoveredOrSelectionState:t,setHaloShouldBeVisible:o,colorVariant:n="purple"}=e,i=(0,r().yK)((e=>({haloContent:{position:"absolute",left:-6,right:-6,top:-3,bottom:-3,pointerEvents:"none",borderRadius:8,border:`2px solid ${"purple"===n?e.aiBlockBorderColor:e.stroke.uiBlueSecondary}`}})),[n]),a=t!==l().x.Default;return(0,d.jsx)(c().Z,{visible:a,initial:{opacity:0,scale:.995},animate:{opacity:t===l().x.Hovered?.45:1,scale:1},exit:{opacity:0,scale:.995},onAnimationStart:()=>{o(!0)},onAnimationEnd:()=>{a||o(!1)},style:i.haloContent})}const f=(0,o(788860).vU)({summarize:{id:"aiBlock.summarize",defaultMessage:"Summarize this page with AI"},findActionItems:{id:"aiBlock.findActionItems",defaultMessage:"Find action items on this page with AI"},helpMeWrite:{id:"aiBlock.helpMeWrite",defaultMessage:"Tell the AI what to writeâ€¦"},summarizeMeetingTranscript:{id:"aiBlock.summarizeMeetingTranscript",defaultMessage:"Summarize this meeting with any action items and decisions taken"}})},802244:(e,t,o)=>{o.d(t,{ym:()=>r});var n=()=>o(677559);const i={aliasBlock:new(n().Ss)("aliasBlock",(()=>Promise.all([o.e(62743),o.e(52774),o.e(44832),o.e(39938),o.e(69197),o.e(63257),o.e(1913),o.e(56054),o.e(4163),o.e(18216),o.e(21820),o.e(50902)]).then(o.bind(o,88820)))),aliasBlockPopupMenu:new(n().Ss)("aliasBlockPopupMenu",(()=>Promise.all([o.e(62743),o.e(52774),o.e(44832),o.e(39938),o.e(69197),o.e(63257),o.e(1913),o.e(56054),o.e(4163),o.e(18216),o.e(21820),o.e(50902)]).then(o.bind(o,703521))))},r=(0,n().iS)(i.aliasBlock,(e=>e.default));(0,n().kF)(i.aliasBlockPopupMenu,(e=>e.default))},154439:(e,t,o)=>{o.d(t,{Z:()=>d});var n=o(667294),i=()=>o(142735),r=()=>o(801812),a=()=>o(513670),s=()=>o(696459),l=o(785893);function c(e){const{performRequest:t,request:o}=e;return{request:function(e){const t=(0,n.useRef)(e);return a().Xy(t.current,e)||(t.current=e),t.current}(o),performRequest:(0,n.useCallback)(t,[o])}}function d(e){const{request:t,performRequest:o,render:d,requestStore:u,debounce:p,throttle:m,interval:f,debugName:g}=e,[v,h]=function(e){const{performRequest:t,request:o,options:n}=e,{performRequest:i,request:a}=c({performRequest:t,request:o});return(0,r().r5)((()=>i(a)),[i,a],n)}({performRequest:o,request:t,options:{debounce:p,throttle:m,interval:f,debugName:g}});(0,n.useEffect)((()=>{if(u){u.refresh=()=>h().then((()=>{}));let e={};"idle"===v.status?e={request:t,ready:!1,loading:!1}:"pending"===v.status?e={request:t,ready:!1,loading:!0}:"resolved"===v.status?e={request:t,error:void 0,result:v.value,ready:!0,loading:!1}:"rejected"===v.status?e={request:t,error:v.error,result:void 0,ready:!0,loading:!1}:(0,s().t1)(v);const o={...u.state,...e};a().Xy(u.state,o)||u.setState(o)}}));const _=(0,i().VK)((()=>d(v.error,v.value,"pending"!==v.status&&"idle"!==v.status)),[d,v.error,v.value,v.status]);return(0,l.jsx)(n.Fragment,{children:void 0===_?null:_})}},247904:(e,t,o)=>{o.d(t,{Z:()=>x});o(241792);var n=o(667294),i=()=>o(219727),r=()=>o(142735),a=()=>o(263184),s=()=>o(788860),l=()=>o(846550),c=()=>o(707513),d=()=>o(122479),u=()=>o(338217),p=()=>o(943620),m=()=>o(627990),f=()=>o(116432),g=o(785893);const v=function(e){let{currentBlockStore:t,backlinkStore:n,scrollToBlockId:a,discussionId:c,showOriginalToken:u,disableCurrentPageToken:p,disableArrow:f}=e;const v=(0,l().Fg)(),w=(0,i().O7)(),k=(0,r().VK)((()=>!(0,d().yi)(w,t)&&(0,d().yi)(w,n)),[w,t,n]),I=(0,r().VK)((()=>o(876822).default.state.mainEditorCurrentBlockStore),[]),C=I&&I.id===n.id,x=(0,r().VK)((()=>(0,o(429725).ZP)({store:n,scrollToBlockId:a,discussionId:c,fullyQualified:!0,preferPublicLink:(0,o(148126).Sr)(w),pageVisitSource:o(506347).tY.LinkInPage})),[n,a,c,w]);return(0,g.jsx)(o(729775).Z,{href:x,external:!1,innerStyle:{paddingLeft:8,paddingRight:16},children:(0,g.jsx)(m().ZP,{childrenStyle:{padding:"4px 2px"},alignment:m().v2.Center,style:{marginBottom:2,marginRight:4},right:(0,g.jsxs)(g.Fragment,{children:[u&&(0,g.jsx)("div",{style:b(w,v),children:(0,g.jsx)(s()._H,{defaultMessage:"Original",id:"backlink.originalTokenLabel"})}),C&&!p&&(0,g.jsx)("div",{style:b(w,v),children:(0,g.jsx)(s()._H,{defaultMessage:"This page",id:"backlink.currentPageTokenLabel"})})]}),children:(0,g.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[!f&&(0,g.jsx)(y,{}),(0,g.jsx)(h,{backlinkStore:n}),(0,g.jsx)(o(384241).Z,{store:n,style:_(v)}),(0,g.jsxs)("div",{style:{marginTop:-2,minWidth:0,display:"flex",alignItems:"baseline",flex:"2 0 40%",paddingTop:"0.1em"},children:[(0,g.jsx)(o(29142).Z,{store:n,style:{paddingLeft:8}}),(0,g.jsx)(S,{isPrivate:k})]})]})})})};function h(e){let{backlinkStore:t}=e;const o=(0,r().VK)((()=>t.getIcon()),[t]),n=(0,r().VK)((()=>t.isEmptyPage()),[t]);return(0,g.jsx)(p().Z,{disabled:!0,icon:o,isEmptyPage:n,size:20,style:{marginLeft:4,marginRight:4}})}function _(e){return{fontWeight:c().Ue.medium,fontSize:c().JB.UIRegular.desktop,lineHeight:1.3,borderBottom:`1px solid ${e.darkDividerColor}`,flexShrink:1}}function b(e,t){const{device:o}=e;return{padding:"2px 6px",borderRadius:4,color:t.mediumTextColor,background:t.legacyDefaultSelectColor,fontSize:o.isMobile?11:9,lineHeight:o.isAndroid?1.5:1,textTransform:"uppercase",letterSpacing:"0.04em",whiteSpace:"nowrap",marginLeft:4}}function y(){const e=(0,l().Fg)();return(0,g.jsx)("div",{style:{marginLeft:4,transform:"rotate(180deg)",fill:e.regularIconColor},children:(0,u().J)({width:15,height:15})})}function S(e){let{isPrivate:t}=e;return t?(0,g.jsx)(f().Z,{style:{paddingRight:4,marginLeft:12}}):null}var w=()=>o(67961);const k=10,I=a().default.createClass(k,{name:"ShowMoreStore"}),C=a().default.createClass(!1,{name:"HoveredStore"});const x=function(e){let{store:t,originalTransclusionStore:a,disableInaccessiblePages:l,headerText:c,disableArrow:d,disableCurrentPageToken:u}=e;const p=(0,i().O7)(),m=(0,r().qz)(void 0,C),f=(0,r().qz)(void 0,I),h=(0,r().VK)((()=>(0,o(935753).L)(t,p)),[t,p]),_=(0,n.useCallback)((()=>function(e){e.setState(e.state+k)}(f)),[f]),b=(0,n.useCallback)((()=>function(e){e.setState(!1)}(m)),[m]),y=(0,n.useCallback)((()=>function(e){e.setState(!0)}(m)),[m]),S=(0,r().Kw)(f),w=(0,r().VK)((()=>a?a.getNavigableBlockStore():void 0),[a]);if(0===h.backlinks.length&&!a)return null;const x=h.backlinks.length>S,M=h.inaccessibleBacklinkCount>0&&!l;return(0,g.jsxs)("div",{onMouseMove:y,onMouseLeave:b,children:[c&&(0,g.jsx)(T,{headerText:c}),a&&w&&(0,g.jsx)(v,{currentBlockStore:t,disableArrow:d,disableCurrentPageToken:u,backlinkStore:w,scrollToBlockId:a.id,showOriginalToken:!0}),h.backlinks.slice(0,S).map((e=>(0,g.jsx)(v,{currentBlockStore:t,disableArrow:d,disableCurrentPageToken:u,...e},e.backlinkStore.id))),(x||M)&&(0,g.jsx)(o(654133).Z,{disableTooltip:x,renderTooltip:()=>(0,g.jsx)(s()._H,{defaultMessage:"Synced in pages that you don't have access to.",id:"page.backlinks.privatePagesTooltip"}),render:e=>(0,g.jsx)(o(92175).Z,{icon:o(314379).o,isGray:!0,onClick:_,style:{padding:`2px ${d?17:14}px`,width:"100%"},disabled:!x,...e,children:x?(0,g.jsx)(s()._H,{defaultMessage:"{count} more",id:"page.backlinks.more",values:{count:h.backlinks.length-S}}):(0,g.jsx)(s()._H,{id:"page.backlinks.privatePages",defaultMessage:"{count, plural, one {{count} private page} other {{count} private pages}}",values:{count:h.inaccessibleBacklinkCount}})})})]})};function T(e){let{headerText:t}=e;return(0,g.jsx)("div",{style:{display:"flex"},children:(0,g.jsx)(w().Z,{isSmall:!0,style:{marginTop:12,marginBottom:8,marginLeft:4,flex:1,paddingLeft:8},children:t})})}},79555:(e,t,o)=>{o.d(t,{Z:()=>p,o:()=>f});o(667294);var n=()=>o(846550),i=()=>o(242619),r=()=>o(879952),a=()=>o(247724),s=()=>o(164079),l=()=>o(913813),c=()=>o(965903),d=()=>o(154186),u=o(785893);const p=function(e){let{tooltipContent:t,fadeIn:n,style:a,hoveredStyle:s,store:l,onClick:d,extraAnalyticsData:p,hideFilterActionsInput:m,actionSectionGroupKey:g,onFocus:v,onBlur:h,iconStyle:_,isFromCollectionView:b}=e;const y=(0,o(219727).O7)();function S(e){!function(e,t,o,n,a,s,l,d){r().Ys({environment:o,store:t}),i().Qn({environment:o,stores:c().default.state.stores,left:e.clientX,top:e.clientY,showInput:!s,actionSectionGroupKey:Boolean(d)?"block_in_collection":l||"default",analyticsFrom:"block_more_menu",optionalAnalyticsProperties:{isFromBulkActionsToolbar:a?a.isFromBulkActionsToolbar:void 0}}),null==n||n()}(e,l,y,d,p,m,g,b)}return t?(0,u.jsx)(o(654133).Z,{renderTooltip:()=>t,delayThreshold:300,render:e=>(0,u.jsx)(f,{environment:y,tooltipEvents:e,fadeIn:n,style:a,hoveredStyle:s,onClick:S,onFocus:v,onBlur:h,iconStyle:_})}):(0,u.jsx)(f,{environment:y,fadeIn:n,style:a,hoveredStyle:s,onClick:S,onFocus:v,onBlur:h,iconStyle:_})};function m(e,t,o){const{device:n}=e;return{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:26,height:26,fill:n.isMobile?t.lightIconColor:t.mediumIconColor,transition:"opacity 200ms ease-in",...o}}function f(e){let{environment:t,tooltipEvents:o={},fadeIn:i,style:r,hoveredStyle:c,onClick:p,onFocus:f,onBlur:g,iconStyle:v,ariaLabel:h}=e;const _=(0,n().Fg)();return(0,u.jsx)(d().Z,{className:i?a().JiD:void 0,style:m(t,_,r),hoveredStyle:c,onClick:p,ariaLabel:h,...(0,s().Z)(o,{onFocus:f,onBlur:g}),children:(0,l().O)({width:16,height:16,...v})})}},316843:(e,t,o)=>{o.d(t,{N:()=>k});o(667294);var n=()=>o(219727),i=()=>o(142735),r=()=>o(846550),a=()=>o(494488),s=()=>o(788860),l=()=>o(707513),c=()=>o(198046),d=()=>o(954452),u=()=>o(247724),p=()=>o(12512),m=()=>o(191003),f=()=>o(540896),g=()=>o(589525),v=()=>o(998901),h=()=>o(127519),_=()=>o(154186),b=()=>o(654133),y=()=>o(345837),S=o(785893);const w=(0,s().vU)({imageCaption:{defaultMessage:"Write a captionâ€¦",id:"block.imageCaption.placeholder"},altText:{defaultMessage:"Add alt text",id:"block.imageCaption.altText.tooltip"}});function k(e){let{captionAriaId:t,disabled:o,store:k}=e;const I=(0,n().O7)(),C=(0,n().Fy)(),x=(0,s().YB)(),T=(0,i().VK)((()=>k.getPropertyStore("caption")),[k]),{shouldShowCaption:M,shouldShowAltTextButton:P}=(0,i().VK)((()=>{var e;const t=T.getValue(),o=!t||0===t.length,n="editing"===h().default.state.mode&&(null===(e=(0,m().QY)(h().default.state.multiSelection))||void 0===e?void 0:e.store)===T;return{shouldShowCaption:!o||n,shouldShowAltTextButton:n&&o&&"image"===k.getType()&&!k.getPropertyValue("alt_text")}}),[T,k]),A=(0,i().VK)((()=>{const{block_full_width:e,block_width:t,block_page_width:o}=k.getFormat();if(C.isMobile)return!1;if(o)return!1;if(e)return!0;const n=(0,d().fg)(I,k);return(t||0)>=I.WindowSizeStore.state.width-(0,g().Wk)(I)-(n&&k.isFullWidth()?d().QB:0)}),[C.isMobile,I,k]),R=(0,f().O)(),B=(0,r().yK)((e=>({root:{fontSize:14,lineHeight:1.4,color:e.mediumTextColor,...!R&&{paddingTop:6,paddingBottom:6},paddingLeft:a().ZD.paddingLeft,...A&&{paddingLeft:26,paddingRight:26}},buttonWrapper:{position:"absolute",top:3.5,right:0,background:e.tint.regular,color:e.text.secondary,borderRadius:6,opacity:P?1:0,transition:C.isSafari?void 0:"opacity 300ms ease-in",overflow:"hidden"},button:{padding:"4px 6px",fontSize:12,fontWeight:l().Ue.medium,letterSpacing:.2}})),[A,C.isSafari,R,P]);return M?(0,S.jsxs)("div",{className:u().VJQ,style:{position:"relative"},children:[(0,S.jsx)(y().Z,{id:t,disabled:o,style:B.root,placeholderStyle:B.root,placeholder:x.formatMessage(w.imageCaption),disableSlashCommands:!0,disableEmbedMenu:!0,disableRightMarginHoverStyling:!0,store:T,pasteBehavior:"block",inPageFind:p().B3.block_match}),(0,S.jsx)("div",{style:B.buttonWrapper,children:(0,S.jsx)(b().Z,{renderTooltip:()=>x.formatMessage(w.altText),placement:v().Placement.Bottom,disableTooltip:!P,render:e=>(0,S.jsx)(_().Z,{...e,ariaLabel:x.formatMessage(w.altText),style:B.button,disabled:!P,onClick:()=>{c().b({blockStore:k,entrypoint:"caption",environment:I})},children:"ALT"})})})]}):null}},406496:(e,t,o)=>{o.d(t,{$f:()=>d,Ep:()=>u,ZP:()=>f});var n=o(667294),i=()=>o(846550),r=()=>o(568017),a=()=>o(707513),s=()=>o(466970),l=()=>o(827973),c=o(785893);function d(e,t){return`inset 0 0 0 ${t?"2px":"1px"} ${e}`}function u(e,t,o){"dark"!==o.mode&&t||"default"!==e&&"default_background"!==e||(e="gray");const n=r().Cs[e];return n?t?o.stroke[`${n}Primary`]:o.stroke[`${n}Secondary`]:o.text.primary}function p(e){const{color:t,selected:o,isHovered:n,overrideStyles:l}=e,p=(0,s().E)("updated_color_picker"),m=(0,r().jS)(t),f=(0,i().yK)((e=>{const i=(0,r().fi)(t,e);if(!p)return{icon:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:22,height:22,textAlign:"center",fontSize:16,borderRadius:4,fontWeight:a().Ue.medium,boxShadow:e.innerBorderBoxShadow,...i,...l}};const s=u(t,o??!1,e);return{icon:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:26,height:26,textAlign:"center",padding:8,margin:0,fontSize:16,borderRadius:6,fontWeight:a().Ue.medium,boxShadow:d(s,o||n),...i,...l}}}),[t,o,p,n,l]);return(0,c.jsx)("div",{style:f.icon,"aria-hidden":"true",children:p&&m?"":"A"})}function m(e,t){const r=(0,o(219727).Fy)(),[a,s]=(0,n.useState)(!1),{color:d,overrideDisplayName:m,right:f,shortcuts:g,selected:v,shouldShowUpdatedColorPicker:h,desktopTitleStyle:_,iconStyle:b,itemMarginLeft:y,itemMarginRight:S,desktopIconStyle:w,rightStyle:k,selectedStyle:I}=e,C=m||o(527278).Z.formatMessage((0,o(527511).qf)(d)),x=!r.isMobile&&g&&g[0],T=(0,i().yK)((e=>{if(!h)return{selected:{width:16,padding:"1px 1px",...I},shortcut:{color:e.lightTextColor,fontSize:12,whiteSpace:"nowrap"},tooltipStyle:{},desktopStyleIcon:{},buttonStyle:{},menuItemStyle:{},disableButtonStyleHoverOrPressed:{}};return{selected:{width:14,height:14,position:"absolute",top:-3,right:-4,borderRadius:"50%",borderStyle:"solid",borderWidth:1,color:u(d,v??!1,e),background:e.popoverBackground,borderColor:e.popoverBackground,...I},tooltipStyle:{display:"inline-block",width:30,margin:"0px 2px",padding:0,lineHeight:1},desktopStyleIcon:{position:"absolute",margin:0,padding:0},buttonStyle:{display:"inline-block",width:"100%",height:"100%",margin:0,padding:"2px 2px",position:"relative"},menuItemStyle:{margin:0,padding:0,minHeight:26},disableButtonStyleHoverOrPressed:{background:"transparent"},shortcut:{}}}),[d,v,h,I]),M=(0,n.useCallback)((()=>(0,c.jsx)(p,{color:d,selected:v,isHovered:a,overrideStyles:b})),[d,a,v,b]);return h?(0,c.jsx)(o(654133).Z,{renderTooltip:()=>(0,c.jsx)("div",{children:C}),render:o=>(0,c.jsx)("div",{style:{...T.tooltipStyle},...o,onMouseEnter:e=>{var t;s(!0),null===(t=o.onMouseEnter)||void 0===t||t.call(o,e)},onMouseLeave:e=>{var t;s(!1),null===(t=o.onMouseLeave)||void 0===t||t.call(o,e)},children:(0,c.jsx)(l().Z,{...e,ref:t,icon:M(),style:T.menuItemStyle,itemMarginLeft:y,itemMarginRight:S,hoveredStyle:T.disableButtonStyleHoverOrPressed,pressedStyle:T.disableButtonStyleHoverOrPressed,desktopIconStyle:w||T.desktopStyleIcon,right:f,buttonStyle:T.buttonStyle,desktopTitleStyle:_,rightStyle:k})})}):(0,c.jsx)(l().Z,{...e,ref:t,title:C,icon:M(),dontShrinkRight:!0,right:f||x&&(0,c.jsx)(o(64260).Z,{name:x,style:T.shortcut})||v&&(0,c.jsx)("div",{style:T.selected,children:(0,o(733641).k)()}),itemMarginLeft:y,itemMarginRight:S,desktopIconStyle:w,desktopTitleStyle:_,rightStyle:k})}const f=n.forwardRef(m)},37399:(e,t,o)=>{o.d(t,{Z:()=>b});var n=o(667294),i=()=>o(219727),r=()=>o(142735),a=()=>o(846550),s=()=>o(156642),l=()=>o(874018),c=()=>o(527188),d=()=>o(954452),u=()=>o(958783),p=()=>o(121058),m=()=>o(239482),f=()=>o(589525),g=()=>o(826955),v=()=>o(727155),h=()=>o(802911),_=o(785893);function b(e){let{disableCommentMenu:t,hideContent:o,hideIfSidebarOrMarginCommentsVisible:b,recursivelyLoadAllDiscussions:y,store:S,property_id:w}=e;const k=(0,i().O7)(),I=(0,i().Fy)(),C=(0,r().VK)((()=>{const e=S.getModel();return Boolean(null==e?void 0:e.isType(s().eh))}),[S]),x=(0,r().VK)((()=>{const e=(0,m().eG)(S);let t,o,n,i;for(const r of e){if(r instanceof g().G&&t){const e=r.getType();if(e&&(0,s().S9)(e)&&r.id!==S.id)break;if("column_list"===e){const e=r.getContentStore().getValue()||[];o=e.indexOf(t.id),n=e.length,i=(0,p().Po)(r,k)}}t=r}return{columnListIndex:o,columnListColumnCount:n,columnListResizable:i}}),[k,S]),T=(0,n.useCallback)((()=>{if(!I.isMobile){if(void 0===x.columnListIndex)return c().I4.FloatRight;if(!x.columnListResizable&&x.columnListColumnCount&&x.columnListIndex===x.columnListColumnCount-1)return c().I4.FloatRight}return c().I4.PushContent}),[x.columnListColumnCount,x.columnListIndex,x.columnListResizable,I.isMobile]),M=(0,r().VK)((()=>(0,f().vK)(k)),[k]),P=(0,r().VK)((()=>(0,d().fg)(k,S)),[k,S]),{blockInsetRight:A}=(0,n.useContext)(v().a),R=(0,a().yK)((e=>({wrapper:T()===c().I4.FloatRight?{position:"relative",left:A}:{}})),[T,A]),B=(0,r().VK)((()=>u().default.getPropertyId()===w),[w]),E=t||o||(C||b)&&(M||P)||B&&M;return(0,_.jsx)(h().Z,{name:"BlockDiscussionIndicator",children:!E&&(0,_.jsx)("div",{style:R.wrapper,children:(0,_.jsx)(l().Jg,{store:S,getFormat:T,recursivelyLoadAllDiscussions:Boolean(y),onlyCountBlockLevelDiscussions:M,property_id:w},"DiscussionIndicator")})})}},495228:(e,t,o)=>{o.d(t,{Qd:()=>p,ZP:()=>g});var n=o(667294),i=()=>o(219727),r=()=>o(846550),a=()=>o(226042),s=()=>o(568017),l=()=>o(921743),c=()=>o(543934),d=()=>o(518242),u=o(785893);let p=function(e){return e[e.Insert=0]="Insert",e[e.TurnInto=1]="TurnInto",e}({});function m(e){const{thumbnail:t,thumbnailPadding:o,iconSize:n,isInsertFormat:i}=e,p=c()._H(),m=(0,r().yK)((e=>({thumbnail:{display:"block",width:i?46:22,height:i?46:22,borderRadius:4,flexGrow:0,flexShrink:0,padding:o||0,boxShadow:e.borderBoxShadow,background:s().ZP.white},simplifiedThumbnail:{display:"block",width:n,height:n,margin:4,flexGrow:0,flexShrink:0,background:s().ZP.white}})),[o,n,i]),f=p?m.simplifiedThumbnail:m.thumbnail,g=(0,l().D)(t)||a().T;return(0,u.jsx)(d().ZP,{src:g,style:f})}function f(e,t){const a=(0,i().Fy)(),d=(0,i().O7)(),f="dark"===(0,r().Fg)().mode,{description:g,format:v,selected:h,title:_,sectionTitle:b,showSectionTitle:y,thumbnail:S,tooltipPhoto:w,thumbnailPadding:k,isDisabled:I,disabledTooltipMessage:C,shortcut:x,icon:T,desktopTitleStyle:M}=e,P=v===p.Insert,A=(0,o(142735).VK)((()=>!!I&&I({environment:d,blocks:o(965903).default.state.stores,publicEditMode:void 0})),[d,I]),R=c()._H(),B=(0,r().yK)((e=>({selected:R?{height:14,width:14,margin:4,color:e.regularTextColor}:{width:16,padding:"1px 1px",color:e.regularTextColor},titleDiv:{display:"flex",alignItems:"center"},shortcut:{color:e.lightTextColor,fontSize:12,whiteSpace:"nowrap"},iconContainer:{display:"flex",alignItems:"center",justifyContent:"center"},icon:{width:20,height:20,fill:e.mediumIconColor,margin:4},title:{marginRight:6},sectionTitle:{color:e.lightTextColor,marginRight:6,...o(707513).Yu}})),[20,6,R]),E=(0,n.useCallback)((()=>(0,u.jsx)(m,{isInsertFormat:P,iconSize:20,thumbnailPadding:k,thumbnail:S})),[S,k,P,20]),{badge:D,...U}=e,F=R&&P&&!!x,N=R&&!!T,V=h&&!P,L=(0,n.useCallback)((e=>(0,u.jsx)(o(827973).Z,{...(0,o(164079).Z)(e||{},U),desktopTitleStyle:M,ref:t,right:V?(0,u.jsx)("div",{style:B.selected,children:(0,o(733641).k)()}):F?(0,u.jsx)("span",{style:B.shortcut,children:x}):void 0,title:(0,u.jsxs)("div",{style:B.titleDiv,children:[y?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("span",{style:B.title,children:_}),(0,u.jsx)("span",{style:B.sectionTitle,children:"Â·"}),(0,u.jsx)("span",{style:B.sectionTitle,children:b})]}):(0,u.jsx)("span",{style:B.title,children:_}),!V&&"new"===D&&(0,u.jsx)(o(663631).Z,{style:{marginLeft:0}}),!V&&"beta"===D&&(0,u.jsx)(o(447832).Z,{}),!V&&!R&&"ai"===D&&(0,u.jsx)("div",{style:{color:s().FN.light.purple[500]},children:(0,u.jsxs)(o(78078).X2,{gap:4,alignItems:"center",children:[(0,o(844958).t)({fill:s().FN.light.purple[500],width:14,height:14}),(0,u.jsx)(o(788860)._H,{id:"blockMenuItem.aiBadge",defaultMessage:"AI"})]})})]}),icon:N?(0,u.jsx)("div",{style:B.iconContainer,children:T(f)(B.icon)}):E(),caption:R?void 0:g,disabled:A,disabledFeedback:A,itemMarginLeft:R?0:void 0,itemMarginRight:!V&&F?4:void 0,desktopIconStyle:R?{marginLeft:4}:void 0,rightStyle:V&&R?{marginRight:4}:{}})),[U,t,V,B.titleDiv,B.iconContainer,B.icon,_,B.title,D,E,g,A,N,T,B.selected,B.shortcut,x,F,R,y,b,B.sectionTitle,f,M]),O=(0,n.useCallback)((()=>{if(A)return(0,u.jsx)("div",{children:C});const e=w?(0,l().D)(w):void 0,t=e||R?140:void 0;return(0,u.jsx)(o(73478).Z,{imageURL:e,imageWidth:t,imageHeight:100,caption:g})}),[A,w,R,g,C]);return a.isMobile?L():(0,u.jsx)(o(654133).Z,{renderTooltip:O,placement:o(998901).Placement.Right,delayThreshold:0,render:e=>L(e)})}const g=n.forwardRef(f)},727155:(e,t,o)=>{o.d(t,{a:()=>n});const n=(0,o(667294).createContext)({blockInsetRight:0});n.displayName="BlockRenderingContext"},70320:(e,t,o)=>{o.d(t,{IS:()=>b,ZP:()=>S,bZ:()=>y});o(821057),o(267602),o(653476),o(470928);var n=o(667294),i=()=>o(156642),r=()=>o(455530),a=()=>o(879952),s=()=>o(718959),l=()=>o(767306),c=()=>o(472753),d=()=>o(163085),u=()=>o(826955),p=()=>o(169523),m=o(785893);const f={[i().Ti.image]:36,[i().Ti.audio]:24,[i().Ti.video]:96,[i().Ti.embed]:96,[i().Ti.drive]:96,[i().Ti.tweet]:96,[i().Ti.framer]:96,[i().Ti.maps]:96,[i().Ti.gist]:96,[i().Ti.invision]:96,[i().Ti.pdf]:96,[i().Ti.drawing]:200},g={[i().Ti.image]:36,[i().Ti.video]:96,[i().Ti.embed]:246,[i().Ti.maps]:96,[i().Ti.framer]:96,[i().Ti.tweet]:250,[i().Ti.gist]:96,[i().Ti.audio]:96,[i().Ti.drive]:300,[i().Ti.invision]:96,[i().Ti.pdf]:96,[i().Ti.columnList]:"page_width",[i().Ti.drawing]:300,[i().Ti.code]:"300.0"},v={display:"contents"},h=96,_=96;let b=function(e){return e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical",e[e.Corner=2]="Corner",e}({}),y=function(e){return e[e.Left=0]="Left",e[e.Right=1]="Right",e}({});const S=function(e){const t=(0,n.useRef)(void 0),s=(0,o(219727).O7)(),f=(0,n.useRef)(null),g=(0,o(142735).qz)(e.blockResizerStore,o(803820).Z),h=(0,n.useCallback)((n=>{n.preventDefault();const r=e.resizeComponent.getNode();if(!(r&&r instanceof Element))return;let m=0;if(f.current){const e=(0,o(275200).VW)(f.current);e&&(m=e.getBoundingClientRect().width)}let v=0;const h=e.store.getRecordStoreUIParent(),_=h&&h.findRecordStoreUIAncestor((e=>e instanceof u().G)).ancestor;if(_){const e=c().R.getRect(_);e&&(v=e.width);const t=_.getRecordStoreUIParent(),o=t&&t.findRecordStoreUIAncestor((e=>e instanceof u().G)).ancestor;if("tab"===(null==o?void 0:o.getType())){const e=c().R.getRect(o);e&&(v=e.width)}}const b=function(e){const t=e.getRecordStoreUIRoot(),o=d().Z.find((e=>e.store===t));if(o)return o.getContentInnerWidth()}(e.store)||0,y=o(965903).default.state.stores.filter((e=>function(e){const t=e&&e.getType();return t&&(i().Ok[t]||(0,l().pF)(e))}(e)));let S;S=o(513670).q9(y,e.store)?y:[e.store];const{block_width:w,block_height:k,block_full_width:I,block_page_width:C}=e.store.getFormat();g.setState({...g.state,dragging:!0,temporaryHeight:k,temporaryWidth:w,temporaryFullWidth:I,temporaryPageWidth:C}),p().Z.setState({...p().Z.state,isResizing:!0}),a().ZH({environment:s});const x=r.getBoundingClientRect();t.current={resizingBlocks:S,startWidth:x.width,startHeight:x.height,parentWidth:v,pageWidth:b,isRootChild:e.store.isChildOfRecordStoreUIRoot(),startScrollerWidth:m,didDragMove:!1}}),[g,s,e.resizeComponent,e.store]),_=(0,n.useCallback)((o=>{let{diffX:n}=o;if(!t.current)return;t.current.didDragMove=!0;const{temporaryHeight:i}=g.state,{width:a,isFullWidth:l,isPageWidth:c}=I({diffX:n,dragState:t.current,resizeHorizontally:e.resizeHorizontally,store:e.store,resizerAlignment:e.resizerAlignment,environment:s});if(e.preserveScale){const e=l?i||r().QA:i;g.setState({...g.state,temporaryWidth:a,temporaryFullWidth:l,temporaryPageWidth:c,temporaryHeight:e})}else g.setState({...g.state,temporaryWidth:a,temporaryFullWidth:l,temporaryPageWidth:c})}),[g,s,e.preserveScale,e.resizeHorizontally,e.resizerAlignment,e.store]),y=(0,n.useCallback)((o=>{let{diffY:n}=o;if(!t.current)return;t.current.didDragMove=!0;const{height:i}=w({diffY:n,dragState:t.current,resizeVertically:e.resizeVertically,store:e.store});g.setState({...g.state,temporaryHeight:i})}),[g,e.resizeVertically,e.store]),S=(0,n.useCallback)((o=>{let{diffX:n,diffY:i}=o;if(!t.current)return;t.current.didDragMove=!0;const{width:r,isFullWidth:a,isPageWidth:l}=I({diffX:n,resizeHorizontally:e.resizeHorizontally,store:e.store,resizerAlignment:e.resizerAlignment,dragState:t.current,environment:s}),{height:c}=w({diffY:i,dragState:t.current,resizeVertically:e.resizeVertically,store:e.store});g.setState({...g.state,temporaryWidth:r,temporaryHeight:c,temporaryFullWidth:a,temporaryPageWidth:l})}),[g,s,e.resizeHorizontally,e.resizeVertically,e.resizerAlignment,e.store]),k=(0,n.useCallback)((t=>e.resizerType===b.Horizontal?_(t):e.resizerType===b.Vertical?y(t):e.resizerType===b.Corner?S(t):void 0),[S,_,y,e.resizerType]),C=(0,n.useCallback)((()=>{g.setState({...g.state,dragging:!1,temporaryPageWidth:void 0,temporaryFullWidth:void 0,temporaryWidth:void 0,temporaryHeight:void 0}),a().ZH({environment:s}),p().Z.setState({...p().Z.state,isResizing:!1}),t.current=void 0}),[g,s]),x=(0,n.useCallback)((n=>{if(!t.current)return;const i=g.state;if(t.current.didDragMove&&i.dragging){const{temporaryPageWidth:n,temporaryFullWidth:i,temporaryWidth:r,temporaryHeight:a}=g.state;o(269299).createAndCommit({userAction:"BlockResizer.handleDragEnd",environment:s,canUndo:!0,perform:e=>{t.current&&o(421654).FH({stores:t.current.resizingBlocks,update:{block_height:a,block_width:r,block_full_width:i,block_page_width:n},transaction:e})}});const l=e.store.getType();l&&o(351972).Wl(s,{block_type:l,block_height:a,block_width:r,block_full_width:i,block_page_width:n})}C()}),[g,C,s,e.store]);return(0,m.jsx)(o(790964).Z,{onDraggableDragStart:h,onDraggableDragMove:k,onDraggableDragEnd:x,onDraggableDragCancel:C,preventSidebar:!0,render:t=>(0,m.jsx)("div",{ref:f,style:v,className:o(247724).Ep8,...t,children:e.children})})};function w(e){const t=function(e){const{dragState:t,diffY:o,resizeVertically:n,store:i}=e;if(t){if(n){const e=i.getType(),n=e&&f[e]||h;return Math.max(t.startHeight+o,n)}return t.startHeight}return 0}(e);return{height:Math.min(t,r().Kz)}}function k(e){const{dragState:t,resizeHorizontally:o,store:n,resizerAlignment:r}=e;let a=e.diffX;if(!t)throw new Error("No start rect.");(function(e){const t=e.getModel();return e.isChildOfRecordStoreUIRoot()&&((null==t?void 0:t.isType(i().ib))||(0,l().pF)(e))})(n)&&(a*=2);let s=t.startWidth;o&&(r===y.Left?s-=a:r===y.Right&&(s+=a));const c=n.getType(),d=c&&g[c]||_,u="page_width"===d?Math.min(t.parentWidth,t.pageWidth):d;return u&&s<u&&(s=u),s}function I(e){const{dragState:t,store:o,environment:n}=e,r=k(e),a=r<144?12:48;const c=Math.round(r/a)*a,d=function(e,t,o){if(e)return e.isRootChild?e.pageWidth<t+o&&e.pageWidth>t-o:e.parentWidth<t+o;return!1}(e.dragState,r,a),u=function(e){const{dragState:t,width:o,round:n,environment:r,store:a}=e;if(t&&t.isRootChild){let e=t.startScrollerWidth;const c=a.getModel();return!c||c.isType(i().GP)||(0,l().pF)(a)||(e-=2*(0,s().ui)(r)),e<o+n}return!1}({dragState:t,width:r,round:a,environment:n,store:o})&&!d;return{width:c,isFullWidth:u,isPageWidth:d}}},389720:(e,t,o)=>{o.d(t,{Z:()=>d});var n=o(667294),i=()=>o(142735),r=()=>o(480089),a=()=>o(627990),s=o(785893);const l=(0,o(788860).vU)({listPlaceholder:{defaultMessage:"List",id:"bulletedListBlock.placeholder.label"}});function c(e,t){const c=(0,n.useRef)(null),d=(0,i().VK)((()=>{var t;const o=null===(t=e.bulletedListFormatStore)||void 0===t?void 0:t.getState();return function(e,t){switch(e){case"disc":return'"â€¢"';case"circle":return'"â—¦"';case"square":return'"â–ª"';default:return t%3==0?'"â€¢"':t%3==1?'"â—¦"':'"â–ª"'}}(null==o?void 0:o.blockIdFormats.get(e.store.id),(null==o?void 0:o.depth)||0)}),[e.bulletedListFormatStore,e.store.id]),u=(0,i().VK)((()=>e.store.getBlockTitleStore()),[e.store]),p=(0,i().VK)((()=>e.store.getContentStore()),[e.store]),m=(0,r().rv)(e.store,!0),f=(0,i().VK)((()=>Boolean(e.store.getInsertSuggestion())),[e.store]),g=(0,o(540896).O)(),v=(0,o(846550).yK)((t=>({root:{...{paddingLeft:o(494488).ZD.paddingLeft},...m,...e.style},titlePlaceHolder:{...f?{color:t.text.uiBlueTertiary,WebkitTextFillColor:"initial"}:{}},title:{...a().R8,...g&&{paddingTop:0,paddingBottom:0}},leftStyle:{...g&&{minHeight:"1.5em"}}})),[m,g,f,e.style]),h=(0,s.jsxs)(a().ZP,{style:v.root,left:(0,s.jsx)("div",{...(0,o(26970).iv)({fontSize:"1.5em",lineHeight:1,marginBottom:0,pseudoBefore:{fontFamily:"Arial",content:d}})}),leftStyle:v.leftStyle,childrenStyle:{display:"flex",flexDirection:"column"},ref:c,children:[(0,s.jsxs)("div",{style:{display:"flex"},children:[(0,s.jsx)(o(345837).Z,{style:v.title,disabled:e.disabled,store:u,placeholder:o(527278).Z.formatMessage(l.listPlaceholder),placeholderStyle:v.titlePlaceHolder,pasteBehavior:"block",legacyTransclusionParentStore:e.legacyTransclusionParentStore,inPageFind:o(12512).B3.block_match,renderWhiteSpaceWhenEmptyOnAndroid:!0}),(0,s.jsx)(o(37399).Z,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store})]}),!e.hideContent&&(0,s.jsx)(o(98275).Z,{disabled:e.disabled,store:p,disableCommentMenu:e.disableCommentMenu,disableHoverMenu:e.disableHoverMenu,disableDrag:e.disableDrag,bulletedListFormatStore:e.bulletedListFormatStore})]});return(0,r().ez)(e.store,t,(0,n.useMemo)((()=>({renderedType:"bulleted_list",getNode:()=>c.current,getBlockStore:()=>e.store})),[e.store]),h)}const d=n.memo(n.forwardRef(c),o(632314).Z)},6254:(e,t,o)=>{o.d(t,{y:()=>w,Z:()=>C});o(670560),o(267602),o(470928),o(749411);var n=o(667294),i=()=>o(219727),r=()=>o(142735),a=()=>o(846550),s=()=>o(788860),l=()=>o(513670),c=()=>o(696459),d=()=>o(879952),u=()=>o(990966),p=()=>o(285755),m=()=>o(960597),f=()=>o(594546),g=()=>o(480089),v=()=>o(677559);class h extends(()=>o(263184))().default{getInitialState(){return{editing:!1,suppressErrorsForActionIds:[]}}startEditing(e){this.setState({editing:!0,suppressErrorsForActionIds:[],placement:e.placement})}stopEditing(){this.setState({editing:!1,suppressErrorsForActionIds:[]})}suppressErrorsForAction(e){this.setState({...this.state,suppressErrorsForActionIds:l().jj([...this.state.suppressErrorsForActionIds,e])})}}const _=h;var b=()=>o(807230),y=()=>o(654133),S=o(785893);const w=(0,s().vU)({addIconButtonAriaLabel:{defaultMessage:"Add icon",id:"buttonBlock.button.addIconButtonAriaLabel"},editButtonAriaLabel:{defaultMessage:"Edit button",id:"buttonBlock.button.editButtonAriaLabel"},buttonPlaceholder:{defaultMessage:"New button",id:"buttonBlock.button.placeholder"},buttonInsufficientPermissions:{defaultMessage:"You donâ€™t have permission to run this button",id:"buttonBlock.button.insufficientPermissions"},buttonLoading:{defaultMessage:"Loading...",id:"buttonBlock.button.loading"},clickToEdit:{defaultMessage:"Click to edit button",id:"buttonBlock.button.clickToEdit"}});function k(e,t){const{store:a}=e,s=(0,r().qz)(void 0,_),l=(0,i().O7)(),[c,m]=(0,o(407544).e)(),f=(0,n.useRef)(null),v=(0,r().VK)((()=>!a.canEdit()||e.disabled),[a,e.disabled]),h=(0,r().VK)((()=>a.getAutomationPointer()),[a]);(0,o(882886).N)(a,h);const b=(0,n.useCallback)((e=>{var t;u().clear({environment:l}),d().ZH({environment:l});(m||(null===(t=c.current)||void 0===t?void 0:t.getBoundingClientRect().width)||0)<300&&!l.device.isPhone&&e?s.startEditing({placement:{type:"popup",originRect:e}}):s.startEditing({placement:{type:"inline"}})}),[s,c,m,l]),y=(0,S.jsxs)(o(58836).p,{allowSelectionWithin:!0,style:{display:"flex"},ref:c,children:[(0,S.jsxs)("div",{style:{flexGrow:1,flexShrink:1,minWidth:0},children:[(0,S.jsx)(I,{store:a,buttonBlockStore:s,onConfigure:b,ref:f,disabledFromEditing:v}),(0,S.jsx)(p().On,{store:a,disabled:v,buttonBlockStore:s})]}),(0,S.jsx)(o(37399).Z,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store,recursivelyLoadAllDiscussions:!0})]});return(0,g().ez)(e.store,t,(0,n.useMemo)((()=>({renderedType:"button",getNode:()=>c.current,getBlockStore:()=>e.store,activate(){var e;null===(e=f.current)||void 0===e||e.activate()},handleCreated(){var e;b(null===(e=f.current)||void 0===e?void 0:e.getBoundingClientRect())}})),[c,b,e.store]),y)}const I=n.forwardRef((function(e,t){const{store:h,buttonBlockStore:_,onConfigure:k,disabledFromEditing:I}=e,C=(0,s().YB)(),x=(0,i().O7)(),{isMobile:T}=(0,i().Fy)(),{value:M}=(0,v().XJ)(o(141735).F.formulas),{value:P}=(0,v().XJ)(p().Sm.automationTypecheck),{value:A}=(0,v().XJ)(p().Sm.automationActionRegistry),[R,B]=(0,n.useState)(!1),[E,D]=(0,n.useState)(!1),U=(0,r().VK)((()=>h.getAutomationStore()),[h]),F=(0,r().VK)((()=>(null==U?void 0:U.getNameStore().getValue())??""),[U]),N=(0,r().VK)((()=>h.getFormat().block_color||"default"),[h]),V=(0,r().VK)((()=>(0,b().ww)(x)),[x]),L=(0,o(568017).p6)(N,(0,a().Fg)()),O=L.background,Z=L.color,j=L.hoveredBackground,K=L.pressedBackground,z=(0,r().VK)((()=>null==U?void 0:U.getIconStore().getValue()),[U]),H=function(e){const{store:t,automationStore:n,buttonBlockStore:i}=e,a=(0,o(466970).E)("automation_updated_error_states"),s=(0,o(269853).Rg)({store:t,automationStore:n});return(0,r().VK)((()=>{const e=null==s?void 0:s.state;if(!e||"loading"===e.executionPermissionStatus)return{type:"loading",tooltip:w.buttonLoading};if("unknown"===e.executionPermissionStatus)return{type:"disabled"};if("insufficient"===e.executionPermissionStatus){if("insufficient"===e.editPermissionStatus)return{type:"disabled",tooltip:w.buttonInsufficientPermissions};{var t;const o=(null===(t=e.typecheckResult)||void 0===t?void 0:t.value.actionValidationFailures)??{},n=Object.values(o).flatMap((e=>e)).find((e=>!1===(null==e?void 0:e.execute))),i=n?(0,m().Fp)({failure:n,hasAutomationUpdatedErrorStatesEnabled:a}):void 0;return{type:"disabled",tooltip:(null==i?void 0:i.forButtonTooltip)??w.buttonInsufficientPermissions,subtitleTooltip:null==i?void 0:i.forButtonSubtitleTooltip}}}if("sufficient"===e.executionPermissionStatus){if(0===((null==n?void 0:n.getActionIds())??[]).length)return{type:"error",tooltip:m().Mm.noActions,hideErrorIconWhenEditorIsOpen:!0};const t=e.typecheckResult.value.actionValidationFailures,r=[];let s=!1;for(const[e,o]of Object.entries(t))o&&(i.state.suppressErrorsForActionIds.includes(e)?s=!0:r.push(...o));const c=l().Ps(r);if(c)return{type:"error",tooltip:(0,m().Fp)({failure:c,hasAutomationUpdatedErrorStatesEnabled:a}).forButtonTooltip};return{type:"enabled",hasSuppressedErrors:s,urlToPreview:(0,o(985575).JS)(n)}}(0,c().t1)(e)}),[s,n,i,a])}({store:h,automationStore:U,buttonBlockStore:_}),q=(0,g().cR)(h),W=(0,g().xb)(h),G=!V||q||W||"disabled"===H.type||"loading"===H.type||R||"error"===H.type&&I,$=(0,r().VK)((()=>"error"===H.type&&!(H.hideErrorIconWhenEditorIsOpen&&_.state.editing)),[H,_]),Q=(0,a().yK)((e=>{const t=T?"52px":"28px";return{wrap:{display:"flex",alignItems:"center",padding:"2px 0"},configureWrap:{display:"flex",alignItems:"center",marginLeft:4},label:{pointerEvents:"none",color:Z,...o(707513).Yu},button:{display:"flex",gap:6,minWidth:50,maxWidth:`calc(100% - ${t})`,padding:"8px 12px",fontWeight:500,...G?{cursor:"not-allowed"}:{}},labelPlaceholder:{color:e.lightTextColor},warningIcon:{width:16,height:16,fill:e.errorText,color:e.errorText},spinnerWrap:{width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",marginLeft:-4}}}),[G,T,Z]),Y=(0,n.useRef)(null),J=(0,n.useCallback)((()=>{D(!0)}),[]),X=(0,n.useCallback)((()=>{D(!1)}),[]),ee=(0,n.useCallback)((()=>{var e;k(null===(e=Y.current)||void 0===e?void 0:e.getBoundingClientRect())}),[k,Y]),te=(0,n.useCallback)((()=>{V||(0,b().eD)(x),_.state.editing?(_.stopEditing(),(0,f().j)({environment:x,event:{eventName:"click_configure_button_done",eventProperties:{block_id:h.id,automation_id:null==U?void 0:U.id}}}),o(749826).default.logEvent("click_configure_button_done")):(ee(),(0,f().j)({environment:x,event:{eventName:"click_configure_button",eventProperties:{block_id:h.id,automation_id:null==U?void 0:U.id}}}))}),[_,h,U,ee,V,x]),oe=(0,r().VK)((()=>{const e=h.getRecordStoreUIRoot();if(!(M&&P&&A&&U&&e instanceof o(826955).G))return;const t=e.isPageBlock()?e:void 0;return{automationStore:U,automationTypecheckModule:P,automationActionRegistryModule:A,blockStore:h,currentUserId:x.currentUser.id,formulasModule:M,intl:o(527278).Z.getIntl(),isLoggedIn:x.currentUser.isLoggedIn(),pageStore:t,parentRecordStore:U,type:"button_block"}}),[h,M,P,A,U,x.currentUser]),ne=(0,n.useCallback)((async()=>{if(oe)if(u().clear({environment:x}),d().ZH({environment:x}),"error"===H.type)I||ee();else if("enabled"===H.type){if(H.hasSuppressedErrors)return void ee();try{var e;B(!0);const{automationExecutionActions:t}=await p().Sm.automations.load();await t.executeClientAutomation({clientContext:oe,environment:x}),null!==(e=x.mobileNative)&&void 0!==e&&e.buzz?x.mobileNative.buzz():window.navigator.vibrate(20)}finally{B(!1)}}else"disabled"===H.type||"loading"===H.type||(0,c().t1)(H)}),[x,H,I,ee,oe]);(0,n.useImperativeHandle)(t,(()=>({activate:()=>{ne()},getBoundingClientRect:()=>{var e;return null===(e=Y.current)||void 0===e?void 0:e.getBoundingClientRect()}})),[ne]);const ie=()=>(0,S.jsx)("div",{style:Q.spinnerWrap,children:(0,S.jsx)(o(312578).Z,{})}),re=e=>(0,S.jsx)(o(943620).Z,{largeIcon:!0,disabled:!0,isEmptyPage:!1,size:20,icon:{icon:e,pointer:h.pointer},style:{marginLeft:F?-4:0}}),ae=[];z&&(R||"loading"===H.type?ae.push({key:"left",comp:ie()}):ae.push({key:"left",comp:re(z)})),F?ae.push({key:"name",comp:(0,S.jsx)("div",{style:Q.label,children:F})}):z||ae.push({key:"placeholder",comp:(0,S.jsx)("div",{style:Q.labelPlaceholder,children:(0,S.jsx)(s()._H,{...w.buttonPlaceholder})})}),z||!R&&"loading"!==H.type||ae.push({key:"right",comp:ie()}),$&&ae.push({key:"error",comp:(0,S.jsx)("div",{children:(0,o(735501).t)(Q.warningIcon)})});const se=e=>(0,S.jsx)(o(661297).Z,{disabled:G,disabledFeedback:!0,style:Q.button,ref:Y,...(0,o(164079).Z)(e??{},{onClick:ne}),backgroundColor:O,hoveredBackgroundColor:j,pressedBackgroundColor:K,children:ae.map((e=>{let{key:t,comp:o}=e;return(0,S.jsx)(n.Fragment,{children:o},t)}))});return(0,S.jsxs)("div",{style:Q.wrap,onMouseMove:J,onMouseLeave:X,children:[H.tooltip?(0,S.jsx)(y().Z,{renderTooltip:()=>{const e=(0,S.jsx)(s()._H,{...H.tooltip});let t=null;return H.subtitleTooltip?t=(0,S.jsx)(s()._H,{...H.subtitleTooltip}):"error"!==H.type||I||(t=(0,S.jsx)(s()._H,{...w.clickToEdit})),(0,S.jsx)(m().So,{content:e,subtitle:t})},delayThreshold:0,render:se,placement:o(998901).Placement.Bottom}):H.urlToPreview?(0,S.jsx)(p().qH,{parentStore:h,renderOrigin:se,urlToPreview:H.urlToPreview}):se(),!I&&(x.device.isMobile||E)&&(0,S.jsxs)("div",{style:Q.configureWrap,children:[!G&&(0,S.jsx)(y().Z,{renderTooltip:()=>(0,S.jsx)(s()._H,{defaultMessage:"Edit button",id:"buttonBlock.configureTemplate.button.label"}),delayThreshold:300,render:e=>(0,S.jsx)(o(1910).Z,{ariaLabel:C.formatMessage(w.editButtonAriaLabel),icon:o(166104).H,onClick:te,...e})}),x.device.isMobile&&(0,S.jsx)(o(79555).Z,{tooltipContent:(0,S.jsx)(s()._H,{defaultMessage:"More actionsâ€¦",id:"buttonBlock.moreActions.button.label"}),store:h,fadeIn:!1})]})]})}));const C=n.memo(n.forwardRef(k),o(632314).Z)},154251:(e,t,o)=>{o.d(t,{Z:()=>b});var n=o(667294),i=()=>o(142735),r=()=>o(494488),a=()=>o(156642),s=()=>o(788860),l=()=>o(568017),c=()=>o(636340),d=()=>o(269299),u=()=>o(949842),p=()=>o(480089),m=()=>o(127519),f=()=>o(727155),g=()=>o(943620),v=o(785893);const h=(0,s().vU)({inputPlaceholder:{defaultMessage:"Type somethingâ€¦",id:"calloutBlock.inputPlaceholder"},changeIconLabel:{defaultMessage:"Change callout icon",id:"calloutBlock.changeIconLabel"},disabledIconLabel:{defaultMessage:"Callout icon",id:"calloutBlock.disabledIconLabel"}});function _(e,t){const _=(0,o(219727).O7)(),b=(0,s().YB)(),y=(0,n.useRef)(null),S=(0,p().PE)(e.store,e.disabled),w=(0,i().VK)((()=>e.store.getBlockTitleStore()),[e.store]),k=(0,i().VK)((()=>e.store.getContentStore()),[e.store]),I=(0,i().VK)((()=>e.store.getFormat().block_color||"default"),[e.store]),C=(0,i().VK)((()=>e.store.getIcon()),[e.store]),x=(0,i().VK)((()=>e.store.isCalloutV2()),[e.store]),T=(0,n.useCallback)((async t=>{const n=e.store.getIconStore();if(!n)return;const{serverCommitResult:i}=d().createAndCommit({userAction:"CalloutBlock.handleEmojiChange",environment:_,canUndo:!0,perform:e=>{var i;c().sO({store:n,value:t,transaction:e}),"url"!==(null===(i=(0,o(109477).Lf)(t))||void 0===i?void 0:i.type)&&o(35980).Z.set({userId:_.currentUser.id,key:o(28810).n,value:t??""})}});await i}),[_,e.store]),M=(0,n.useCallback)((()=>{if(!o(749826).default.checkGate({gateName:"migrate_callout_to_v2_on_click"}))return;if(x)return;if(!S)return;let t,n,i,r;"editing"===m().default.state.mode&&(t=m().default.state.multiSelection.start.store,n=m().default.state.multiSelection.end.store,i=m().default.state.multiSelection.start.index,r=m().default.state.multiSelection.end.index);const s=t===e.store.getBlockTitleStore(),l=n===e.store.getBlockTitleStore();d().createAndCommit({userAction:"CalloutBlock.upgradeFromV1ToV2",environment:_,canUndo:!0,perform:t=>{const n=c().j4({environment:_,type:a().Ti.text,inMemoryRecordCache:_.defaultRecordCache.inMemoryRecordCache,transaction:t,spaceId:e.store.pointer.spaceId,properties:{title:e.store.getBlockTitleStore().getValue()}});o(332542).SH({parentStore:e.store,childStore:n,transaction:t}),o(421654).FH({stores:[e.store],transaction:t,update:{callout_version:2}}),o(970105).sO({environment:_,store:e.store.getBlockTitleStore(),value:[],transaction:t})}}),(s||l)&&void 0!==t&&void 0!==i&&void 0!==n&&void 0!==r&&o(492788).default.afterNextFlush((()=>{var a;const c=null===(a=e.store.getContentStores())||void 0===a?void 0:a[0].getBlockTitleStore();o(990966).setMultiSelection({multiSelection:{start:{store:s?c:t,index:i},end:{store:l?c:n,index:r}}})}))}),[S,_,x,e.store]),P=(0,o(846550).yK)((e=>({root:{display:"flex",width:"100%",borderRadius:4,border:(0,l().jS)(I)&&"default_background"!==I?"1px solid transparent":`1px solid ${e.darkDividerColor}`,backgroundColor:"transparent",paddingLeft:C?12:20,paddingTop:x?12:16,paddingBottom:x?12:16,paddingRight:20,...(0,l().x7)(I,e)}})),[I,x,C]),{blockInsetRight:A}=(0,n.useContext)(f().a),R=(0,i().VK)((()=>{var t;return null===(t=(0,o(239482).fM)(e.store))||void 0===t?void 0:t.getFormat().page_small_text}),[e.store]),B=(0,i().VK)((()=>{var t;return null===(t=e.store.getContentStores())||void 0===t?void 0:t[0]}),[e.store]),E=(0,i().VK)((()=>null==B?void 0:B.getType()),[B]),D=(0,n.useMemo)((()=>{if(x)return E===a().Ti.header?R?8:10:E===a().Ti.subHeader?R?4:6:E===a().Ti.subSubHeader?R?2:3:R?3:4}),[x,E,R]),U=(0,v.jsx)(o(439320).F,{children:(0,v.jsxs)("div",{role:"note",style:{display:"flex"},ref:y,onClick:t=>{M(),!e.store.hasContent()&&x&&(0,u().ZP)({event:t,context:u().Af.EditorClick,callback:()=>{S&&!(0,o(154057).uG)(t)&&d().createAndCommit({userAction:"CalloutBlock.handleEmptyClick",environment:_,canUndo:!0,perform:t=>{o(94912).ls({environment:_,store:e.store,transaction:t})}})}})},children:[(0,v.jsxs)("div",{style:{...e.style,...P.root},children:[void 0!==C&&(0,v.jsx)("div",{style:{marginTop:D},children:(0,v.jsx)(o(58836).p,{allowSelectionWithin:!1,children:S?(0,v.jsx)(g().Z,{bucket:"secure",store:e.store,isEmptyPage:!1,onChange:T,isCallout:!0,icon:C,size:24,disabled:!1,label:b.formatMessage(h.changeIconLabel)}):(0,v.jsx)(g().Z,{icon:C,isEmptyPage:!1,size:24,disabled:!0,label:b.formatMessage(h.disabledIconLabel)})})}),(0,v.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:0,marginLeft:C?8:void 0,width:"100%",minHeight:x?32:void 0},children:[!x&&(0,v.jsx)(o(345837).Z,{style:{paddingLeft:r().ZD.paddingLeft,paddingRight:r().ZD.paddingRight},disabled:e.disabled,store:w,placeholder:b.formatMessage(h.inputPlaceholder),pasteBehavior:"block",inPageFind:o(12512).B3.block_match,renderWhiteSpaceWhenEmptyOnAndroid:!0}),!e.hideContent&&(0,v.jsx)(f().a.Provider,{value:{blockInsetRight:A+P.root.paddingRight},children:(0,v.jsx)(o(98275).Z,{disabled:e.disabled,store:k,disableCommentMenu:e.disableCommentMenu,disableHoverMenu:e.disableHoverMenu,disableFirstItemHoverMenu:x,disableDrag:e.disableDrag})})]})]}),(0,v.jsx)(o(37399).Z,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store,hideIfSidebarOrMarginCommentsVisible:!0})]})});return(0,p().ez)(e.store,t,(0,n.useMemo)((()=>({renderedType:"callout",getNode:()=>y.current,getBlockStore:()=>e.store})),[e.store]),U)}const b=n.memo(n.forwardRef(_),o(632314).Z)},388350:(e,t,o)=>{o.d(t,{b:()=>s,Z:()=>p});var n=o(667294),i=()=>o(219727),r=()=>o(513670),a=()=>o(696459);let s=function(e){return e.Inline="Inline",e.InlineWrap="InlineWrap",e.Textarea="Textarea",e}({}),l=function(e){return e.Submit="Submit",e.Newline="Newline",e}({});function c(e){const{device:t,e:o,action:n,onSubmit:i}=e;if(n===l.Submit)i&&i(o);else if(n===l.Newline){if(!t.isIOS)return;o.preventDefault&&o.preventDefault(),document.execCommand("insertLineBreak")}else(0,a().t1)(n)}var d=()=>o(250625),u=o(785893);const p=(0,n.forwardRef)((function(e,t){const[p,m]=(0,n.useState)(),f=(0,n.useRef)(null),g=(0,i().Fy)(),v=(0,i().O7)(),{onBlur:h,onCancel:_,type:b,onSubmit:y,onLeft:S,onRight:w,onChange:k,getHtml:I,onCompose:C}=e;(0,n.useEffect)((()=>{const e=e=>{var t;const o=null===(t=f.current)||void 0===t?void 0:t.getNode();o&&e.target instanceof Node&&!o.contains(e.target)&&h&&h()};return d().lj(window,"mousedown",e),()=>d().ZV(window,"mousedown",e)}),[h]),(0,n.useEffect)((()=>{e.focus&&!p&&(e.selectAll?m({startIndex:0,endIndex:e.value.length}):m({startIndex:e.value.length,endIndex:e.value.length}))}),[e.focus,e.selectAll,e.value.length,p]);const x=(0,n.useCallback)((()=>{const t=r().YU(e.value+(e.value.length>0?"\n":""));return I?I(t):t}),[I,e.value]),T=(0,n.useCallback)((()=>!!e.disabled||!e.focus),[e.disabled,e.focus]),M=(0,n.useCallback)((()=>p&&{type:"contain",selection:p}),[p]);(0,n.useImperativeHandle)(t,(()=>({getSelection:M})),[M]);const P=(0,n.useCallback)((()=>{const e=o(641702).Ut(v,o(505462).get());e&&(r().Xy(e.selection,p)||m(e.selection),e.forceEmitSelectionStore&&o(127519).default.emit())}),[v,p]),A=(0,n.useCallback)((()=>{o(492788).default.afterNextFlush((()=>{P()}))}),[P]),R=(0,n.useCallback)((e=>{A(),null==_||_(e)}),[A,_]),B=(0,n.useCallback)((e=>{if(T())return;const t=function(e){const{device:t,type:o,e:n}=e;return o===s.Inline?l.Submit:o===s.InlineWrap?t.isPhone?l.Submit:"altKey"in n&&n.altKey||"shiftKey"in n&&n.shiftKey?l.Newline:l.Submit:o===s.Textarea?l.Newline:void(0,a().t1)(o)}({device:g,type:b,e});c({device:g,e,action:t,onSubmit:y})}),[g,T,y,b]),E=(0,n.useCallback)((e=>{g.isIOS&&!("shiftKey"in e)?c({device:g,e,action:l.Newline}):B(e)}),[g,B]),D=(0,n.useCallback)((e=>{T()||(A(),null==S||S(e))}),[T,A,S]),U=(0,n.useCallback)((e=>{T()||(A(),null==w||w(e))}),[T,A,w]),F=(0,n.useCallback)((e=>{let{newValue:t,isComposing:o}=e;P(),null==C||C(o),!o&&k(t)}),[k,P,C]);return(0,u.jsx)(o(94967).Z,{debugName:"ContentEditableInput",capture:!T(),onDelete:A,onBackspace:A,onEnter:B,onShiftEnter:E,onCommandEnter:A,onCommandShiftEnter:A,onUp:A,onDown:A,onLeft:D,onRight:U,onTab:A,onUntab:A,onSelectAll:A,onToggleBold:A,onToggleItalics:A,onToggleStrike:A,onToggleCode:A,onUndo:A,onRedo:A,onEsc:R,onCut:A,onCopy:A,onPaste:A,onKeypress:A,onHome:A,onEnd:A,onGoToBeginningOfLine:A,onGoToEndOfLine:A,onGoForwardOneChar:A,onGoBackwardOneChar:A,children:(0,u.jsx)(o(24216).Z,{ref:f,style:{...e.style,whiteSpace:"pre-wrap"},placeholder:e.placeholder,placeholderStyle:e.placeholderStyle,spellCheck:!1,autoCorrect:e.autoCorrect,autoCapitalize:e.autoCapitalize,isDisabled:T(),getHtml:x,getSelection:M,onMutation:F,suppressNewlineEvents:b===s.Inline,expandSelectionOnTripleClick:!0})})}))},24216:(e,t,o)=>{o.d(t,{Z:()=>v,y:()=>h});o(821057);var n=o(667294),i=()=>o(676457),r=()=>o(504008),a=()=>o(219727),s=()=>o(142735),l=()=>o(696459),c=()=>o(641702),d=()=>o(435441),u=()=>o(505462),p=()=>o(127519),m=o(785893);let f=!1;const g=new(o(263184).default)("FALSE_STORE");g.setState(!1);const v=n.forwardRef((function(e,t){const v=(0,a().Fy)(),b=(0,a().O7)(),y=(0,n.useRef)(null),S=(0,n.useRef)(!1),w=(0,n.useRef)(!1),k=(0,i().D)(),{onContextMenu:I,onDoubleClick:C,onMouseDown:x,onTouchStart:T,placeholder:M,onBlur:P,onFocus:A,onMouseOver:R,onMouseOut:B,suppressNewlineEvents:E,getHtml:D,getSelection:U,expandSelectionOnTripleClick:F,onSelect:N,onMutation:V,onClick:L}=e,O=(0,s().Kw)(e.canEditStore||g,{debugName:"ContentEditableLeaf_canEditStore"}),Z=e.canEditStore?!O:e.isDisabled??!1,j=(0,s().VK)(D,[D],{recomputeSchedule:"eager"}),K=(0,n.useCallback)((()=>Boolean(S.current||(null==k?void 0:k.isComposing()))),[k]),z=(0,n.useCallback)((()=>Z),[Z]),H=(0,o(466970).E)("force_update_celeaf_oncompositionend"),q=(0,o(992231).k)(),W=(0,n.useCallback)((()=>{H&&w.current&&(w.current=!1,q());const t=e.onCompositionEnd;null==t||t()}),[q,H,e.onCompositionEnd]),G=(0,n.useCallback)((t=>{const o=e.onKeyDown;null==o||o(t)}),[e.onKeyDown]),$=(0,n.useCallback)((e=>{K()||null==N||N({endpoint:e,component:le.current})}),[K,N]),Q=(0,n.useCallback)((()=>c().n$(b,y.current)),[b]),Y=(0,n.useCallback)((()=>y.current),[]),J=!(0,o(271308).ri)(v)&&e.spellCheck,X=e.tagName??"div",ee=(0,n.useCallback)((e=>{null==V||V(e),o(492788).default.flush()}),[V]),te=(0,n.useCallback)((()=>{ee({newValue:Q(),insertedLine:!1,isComposing:K()})}),[Q,ee,K]),oe=(0,n.useCallback)((()=>{if(v.isAndroid)return;S.current=!0;const t=e.onCompositionStart;null==t||t()}),[v.isAndroid,e.onCompositionStart]),ne=(0,n.useCallback)((()=>{if(v.isAndroid)return;S.current=!1,te();const t=e.onCompositionEnd;null==t||t()}),[v.isAndroid,te,e.onCompositionEnd]),ie=(0,n.useCallback)((e=>function(e){const{event:t,suppressNewlineEvents:o,rootRef:n,getText:i,handleMutation:r,isComposing:a,device:s}=e;if(!d().kA(t))throw new Error("Invalid event");f;s.isAndroid&&"insertText"===t.inputType&&""===t.data&&t.preventDefault();if(o){var l;if("insertLineBreak"!==t.inputType&&"insertParagraph"!==t.inputType||t.preventDefault(),s.isAndroid&&"insertCompositionText"===t.inputType&&null!==(l=t.data)&&void 0!==l&&l.endsWith("\n")&&t.target===n.current){var c;f;const e=()=>{var t;r({insertedLine:!0,deletedLine:!1,newValue:i(),multiSelection:void 0,isComposing:a()}),null===(t=n.current)||void 0===t||t.removeEventListener("input",e)};null===(c=n.current)||void 0===c||c.addEventListener("input",e)}}}({event:e,suppressNewlineEvents:E,rootRef:y,getText:Q,handleMutation:ee,isComposing:K,device:v})),[v,Q,ee,K,E]),re=(0,n.useCallback)((()=>{$("contain")}),[$]),ae=(0,n.useCallback)((e=>{3===e.nativeEvent.detail&&F&&(c().TQ(v),$("contain")),null==L||L(e)}),[$,v,L,F]);(0,n.useEffect)((()=>{const e=y.current;if(e&&d().OW)return e.addEventListener("beforeinput",ie),()=>e.removeEventListener("beforeinput",ie)}),[ie]);const se=Boolean(!j),le=function(e,t){const r=(0,i().D)(),{getNode:a,delegateCompositionEnd:s,delegateKeyDown:l,delegateBeforeInput:c,delegateMutation:d,delegateSelection:u,getText:p,isComposing:m,isDisabled:f}=t,g=(0,n.useRef)(null);g.current||(g.current={isComposing:m,getText:p,delegateCompositionEnd:s,delegateKeyDown:l,delegateBeforeInput:c,delegateMutation:d,delegateSelection:u,getNode:a,isDisabled:f});return(0,n.useLayoutEffect)((()=>{g.current.getNode=a,g.current.delegateCompositionEnd=s,g.current.delegateKeyDown=l,g.current.delegateBeforeInput=c,g.current.delegateMutation=d,g.current.delegateSelection=u,g.current.getText=p,g.current.isComposing=m,g.current.isDisabled=f}),[c,s,l,d,u,a,p,m,f]),(0,(()=>o(98642))().c)(null==r?void 0:r.contentEditableLeafRegistry,(()=>g.current),[]),(0,n.useImperativeHandle)(e,(()=>g.current),[]),g}(t,{getNode:Y,delegateCompositionEnd:W,delegateKeyDown:G,delegateBeforeInput:ie,delegateMutation:ee,delegateSelection:$,getText:Q,isComposing:K,isDisabled:z});!function(e,t,o,m,f,g,v){const b=(0,n.useRef)(!1),y=(0,n.useRef)(null);y.current||(y.current=document.createElement("div"));const S=(0,n.useRef)(),w=(0,i().D)(),k=(0,a().Fy)(),I=(0,a().O7)(),C=(0,s().VK)(g,[g]),x=function(e){const{disableContentEditableWhenNotEditingTextOnMobile:t=!1,disabled:o,rootRef:s}=e,l=(0,a().Fy)(),c=(0,i().D)(),d=l.isMobile&&t,u=(0,n.useRef)(null);null===u.current&&(u.current=!!d&&r().Z.withListenerIgnored((()=>!p().default.isEditingStore.state)));return(0,n.useEffect)((()=>{if(d){function e(){u.current=!p().default.isEditingStore.state,s.current&&_(s.current,c,o||u.current)}return p().default.isEditingStore.addListener(e),()=>p().default.isEditingStore.removeListener(e)}u.current=!1}),[c,o,s,d]),u}({disabled:m,rootRef:e,disableContentEditableWhenNotEditingTextOnMobile:f});(0,n.useLayoutEffect)((()=>{const n=!b.current;b.current=!0;const i=e.current;if(i)if(_(i,w,m||x.current),o)v.current=!0;else{if(n)h(w,(()=>{i.innerHTML=t}));else{S.current!==t&&(S.current=t,y.current.innerHTML=t);const e=i.innerHTML,o=y.current.innerHTML??"";e!==o&&h(w,(()=>{i.innerHTML=t}))}if(m)return;if(u().isMouseSelecting())return;if(u().isMouseRightClicking())return void u().resetMouseRightClicking();if(C)switch(C.type){case"start":case"end":{null==w||w.tryEnableMultiSelection();const e=c().bD(i,C.index),t={endpoint:C.type,onlyIfEqual:w,position:e};u().setDOMEndpoint(t,k),function(e,t,o){const n=u().get(),i=u().getIncompleteDOMEndpoint();if(n&&i===o)switch(o.endpoint){case"start":return void u().setDOMEndpoint({endpoint:"end",onlyIfEqual:t,position:{container:n.endContainer,offset:n.endOffset}},e);case"end":return void u().setDOMEndpoint({endpoint:"start",onlyIfEqual:t,position:{container:n.startContainer,offset:n.startOffset}},e);default:(0,l().t1)(o.endpoint)}}(k,w,t);break}case"contain":{const e=c().lw(i,C.selection.startIndex,C.selection.endIndex),t=u().get();c().Dn(t,e)||(k.isAndroid&&document.activeElement!==i&&i.focus(),u().set(e,k));break}default:(0,l().t1)(C)}else if(!n){const e=u().get(),t=!k.isAndroid||r().Z.withListenerIgnored((()=>"empty"===p().default.state.mode));e&&e.commonAncestorContainer&&d().UG(e.commonAncestorContainer)&&i.contains(e.commonAncestorContainer)&&t&&u().clear(I)}}}))}(y,j,K(),Z,e.disableContentEditableWhenNotEditingTextOnMobile,U,w);const ce=(0,n.useRef)(Z);return(0,m.jsx)(X,{id:e.id,ref:y,...(0,o(26970).iv)(e.className,se&&e.placeholderStyle?e.placeholderStyle:e.style,!Z&&"notranslate"),onCompositionStart:oe,onCompositionEnd:ne,onInput:te,spellCheck:J,autoCorrect:e.autoCorrect,autoCapitalize:e.autoCapitalize,onSelect:re,onClick:ae,onBlur:P,onFocus:A,onContextMenu:I,onKeyDown:G,onDoubleClick:C,onMouseDown:x,onTouchStart:T,onMouseOver:R,onMouseOut:B,placeholder:M,contentEditable:!ce.current,suppressContentEditableWarning:!0,...o(296304).GF})}));function h(e,t){const o=null==e?void 0:e.domLock;return o?o.mutate(t):t()}function _(e,t,o){const n=e.getAttribute("contenteditable");o?"false"!==n&&h(t,(function(){e.contentEditable="false"})):"true"!==n&&h(t,(function(){e.contentEditable="true"}))}},28832:(e,t,o)=>{o.d(t,{O:()=>T});o(821057),o(670560),o(267602),o(228244);var n=o.n(o(427537)),i=o(667294),r=()=>o(48316),a=()=>o(156642),s=()=>o(696459),l=()=>o(831842),c=()=>o(990966),d=()=>o(296304),u=(o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(30005),()=>o(505462));const p=["initial","keyDown","compositionStart","beforeInput","compositionUpdate","domMutations","input","compositionEnd","keyUp"],m={keyDown:"keyUp",beforeInput:"input",input:"domMutations",domMutations:"input",compositionStart:"compositionEnd"},f={compositionUpdate:"beforeInput"};class g{constructor(){this.flowData=new Map,this.nextFlow=new v,this.currentFlow=void 0,this.previousFlow=void 0,this.listeners=new Set,this.handleSelectionChange=()=>{this.nextFlow.beforeRange=u().toStaticRange(u().get())},this.handleKeyDown=e=>{this.advanceToPhase("keyDown").keyDown={event:e},this.emitUpdate(),this.endIfComplete()},this.handleCompositionStart=e=>{this.advanceToPhase("compositionStart").compositionStart={event:e},this.emitUpdate(),this.endIfComplete()},this.handleBeforeInput=e=>{var t;if(!(0,o(435441).kA)(e))return;const n=(null===(t=e.getTargetRanges)||void 0===t?void 0:t.call(e))||[];this.advanceToPhase("beforeInput").beforeInput={event:e,targetRanges:n},this.emitUpdate(),this.endIfComplete()},this.handleCompositionUpdate=e=>{this.advanceToPhase("compositionUpdate").compositionUpdate={event:e},this.emitUpdate()},this.handleInput=e=>{this.advanceToPhase("input").input={event:e},this.emitUpdate(),this.endIfComplete()},this.handleCompositionEnd=e=>{this.advanceToPhase("compositionEnd").compositionEnd={event:e},this.emitUpdate(),this.endIfComplete()},this.handleKeyUp=e=>{this.advanceToPhase("keyUp").keyUp={event:e},this.emitUpdate(),this.endFlow()},this.handleMutations=e=>{let{currentFlow:t}=this;t&&!t.domMutations||(t=this.advanceToPhase("initial")),t.domMutations={afterPhase:t.phase,mutations:e},this.emitUpdate(),this.endIfComplete()}}attachEventListeners(e){const{div:t,document:o}=e;return o.addEventListener("selectionchange",this.handleSelectionChange),t.addEventListener("input",this.handleInput),t.addEventListener("keydown",this.handleKeyDown),t.addEventListener("keyup",this.handleKeyUp),t.addEventListener("beforeinput",this.handleBeforeInput),t.addEventListener("compositionstart",this.handleCompositionStart),t.addEventListener("compositionupdate",this.handleCompositionUpdate),t.addEventListener("compositionend",this.handleCompositionEnd),()=>{o.removeEventListener("selectionchange",this.handleSelectionChange),t.removeEventListener("input",this.handleInput),t.removeEventListener("keydown",this.handleKeyDown),t.removeEventListener("keyup",this.handleKeyUp),t.removeEventListener("beforeinput",this.handleBeforeInput),t.removeEventListener("compositionstart",this.handleCompositionStart),t.removeEventListener("compositionupdate",this.handleCompositionUpdate),t.removeEventListener("compositionend",this.handleCompositionEnd)}}onInputFlowChange(e){return this.listeners.add(e),()=>this.listeners.delete(e)}isComposing(){var e;return this.currentFlow&&!this.currentFlow.isPhase("initial")?this.currentFlow.isComposing():(null===(e=this.previousFlow)||void 0===e?void 0:e.isComposing())||!1}reset(){this.nextFlow=new v,this.currentFlow=void 0,this.previousFlow=void 0,this.flowData=new Map}getCurrentFlow(){const e=this.currentFlow;if(!e)return;return{flow:e,data:this.getData(e)}}getData(e){const t=this.flowData.get(e);if(t)return t;const o={};return this.flowData.set(e,o),o}endIfComplete(){const{currentFlow:e}=this;e&&e.isComplete()&&this.endFlow()}emitUpdate(){const{currentFlow:e}=this;if(e){const t={type:"update",flow:e,data:this.getData(e)};this.listeners.forEach((e=>e(t)))}}endFlow(){const{currentFlow:e}=this;if(e){const t=this.previousFlow;this.previousFlow=e,this.currentFlow=void 0;const o={type:"end",flow:e,data:this.getData(e)};this.listeners.forEach((e=>e(o))),t&&this.flowData.delete(t)}}advanceToPhase(e){return this.currentFlow&&this.currentFlow.canTransitionToPhase(e)||(this.endFlow(),this.currentFlow=this.nextFlow,this.nextFlow=new v),this.currentFlow.phase=e,this.currentFlow}}class v{constructor(){this.phase="initial",this.beforeRange=u().toStaticRange(u().get()),this.initial=void 0,this.keyDown=void 0,this.compositionStart=void 0,this.beforeInput=void 0,this.compositionUpdate=void 0,this.input=void 0,this.compositionEnd=void 0,this.domMutations=void 0,this.keyUp=void 0}isPhase(e){return this.phase===e}hasEvents(){return Boolean(this.compositionStart||this.compositionEnd||this.compositionUpdate||this.keyDown||this.keyUp||this.beforeInput||this.input)}isComposing(){var e;switch(this.phase){case"compositionStart":case"compositionUpdate":return!0;case"compositionEnd":case"initial":return!1;case"beforeInput":case"input":case"keyDown":case"keyUp":return Boolean(null===(e=this[this.phase])||void 0===e?void 0:e.event.isComposing);default:(0,s().t1)(this.phase)}}transitionToPhase(e,t){return!!this.canTransitionToPhase(e)&&(this.phase=e,this[e]=t,!0)}canTransitionToPhase(e){return!this[e]&&(!(!(0,s().qg)(f,this.phase)||f[this.phase]!==e)||1===function(e,t){const o=p.indexOf(e),n=p.indexOf(t),i=o-n;if(i<0)return-1;if(i>0)return 1;return 0}(e,this.phase))}isComplete(){for(const[e,t]of(0,s().qP)(m))if(this[e]&&!this[t])return!1;return!0}getTargetRanges(){var e;const t=null===(e=this.beforeInput)||void 0===e?void 0:e.targetRanges;return null!=t&&t.length?t:this.beforeRange?[this.beforeRange]:[]}}var h=()=>o(191003),_=()=>o(271308),b=()=>o(550054),y=(o(241792),()=>o(431595));class S{constructor(e){if(this.leftToRight=new Map,this.rightToLeft=new Map,e)for(const[t,o]of e)this.assoc(t,o)}assoc(e,t){const o=[];if(this.leftToRight.has(e)){const t=this.leftToRight.get(e);o.push((()=>this.rightToLeft.delete(t)))}if(this.rightToLeft.has(t)){const e=this.rightToLeft.get(t);o.push((()=>this.leftToRight.delete(e)))}for(const n of o)n();return this.leftToRight.set(e,t),this.rightToLeft.set(t,e),this}getLeft(e){return this.leftToRight.get(e)}getRight(e){return this.rightToLeft.get(e)}hasLeft(e){return this.leftToRight.has(e)}hasRight(e){return this.rightToLeft.has(e)}deleteLeft(e){if(this.leftToRight.has(e)){const t=this.leftToRight.get(e);return this.leftToRight.delete(e),this.rightToLeft.delete(t),!0}return!1}deleteRight(e){if(this.rightToLeft.has(e)){const t=this.rightToLeft.get(e);return this.leftToRight.delete(t),this.rightToLeft.delete(e),!0}return!1}*[Symbol.iterator](){for(const[e,t]of this.leftToRight)yield[e,t]}}class w{constructor(e,t,o){if(this.leftName=void 0,this.rightName=void 0,this.biMap=void 0,e===t)throw new(y().D3)("NamedBiMap left and right names are equal",{data:{name:e}});if(this.leftName=e,this.rightName=t,this.biMap=new S,o)for(const[n,i]of o)this.biMap.assoc(n,i)}assoc(e){const t=e[this.leftName],o=e[this.rightName];return this.biMap.assoc(t,o),this}get(e){if(this.leftName in e){const t=e[this.leftName];return this.biMap.getLeft(t)}if(this.rightName in e){const t=e[this.rightName];return this.biMap.getRight(t)}throw new(y().D3)("NamedBiMap.get fallthrough should never occur",{data:e})}delete(e){if(this.leftName in e){const t=e[this.leftName];return this.biMap.deleteLeft(t)}if(this.rightName in e){const t=e[this.rightName];return this.biMap.deleteRight(t)}throw new(y().D3)("NamedBiMap.delete fallthrough should never occur",{data:e})}has(e){if(this.leftName in e){const t=e[this.leftName];return this.biMap.hasLeft(t)}if(this.rightName in e){const t=e[this.rightName];return this.biMap.hasRight(t)}throw new(y().D3)("NamedBiMap.has fallthrough should never occur",{data:e})}[Symbol.iterator](){return this.biMap[Symbol.iterator]()}}class k extends(()=>o(442))().Z{constructor(){super(...arguments),this.nodeMap=new w("node","ref",new S)}register(e){const t=super.register(e),o=e.getNode();return o?this.nodeMap.assoc({node:o,ref:e}):this.nodeMap.delete({ref:e}),t}unregister(e){super.unregister(e),this.nodeMap.delete({ref:e})}getByDOMOrder(){const e=Array.from(this.nodeMap.biMap.rightToLeft.entries());return e.sort(((e,t)=>{const n=e[1],i=t[1];return(0,o(220427).Z)(n,i)})),e.map((e=>{let[t,o]=e;return{node:o,leaf:t}}))}getParentContentEditableLeaf(e){const t=(0,d().X1)(e),o=t&&this.nodeMap.get({node:t});if(t&&o)return{node:t,leaf:o}}}var I=()=>o(127519),C=o(785893);const x=!1,T=(0,i.forwardRef)((function(e,t){const p=(0,o(788860).YB)(),{children:m,style:f,displayName:v,shouldSelectOnEnter:y}=e,S=!e.disabled,w=(0,i.useRef)(null),T=(0,i.useRef)(0),[B,E]=(0,i.useState)(null),D=(0,i.useRef)(!1),U=(0,i.useRef)(!1),[F]=(0,i.useState)((()=>function(e){return`${e}-${R++}`}(v))),N=(0,i.useRef)(void 0),V=(0,i.useRef)({displayName:F}),[L]=(0,i.useState)((()=>new g)),[O]=(0,i.useState)((()=>new k)),[Z]=(0,i.useState)((()=>new(r().T)({onMutations(e){o(504008).Z.withListenerIgnored((()=>{L.handleMutations(e)}))},enableLogging:!1}))),j=(0,i.useRef)(!1),K=(0,i.useCallback)((e=>{j.current!==e&&(j.current=e,Z.mutate((()=>{var t,o;e?null===(t=w.current)||void 0===t||t.setAttribute(d().HM,"true"):null===(o=w.current)||void 0===o||o.removeAttribute(d().HM)})))}),[Z]),z=(0,i.useRef)(!1),H=(0,i.useCallback)((e=>{z.current!==e&&(z.current=e,Z.mutate((()=>{var t,o;e?null===(t=w.current)||void 0===t||t.setAttribute(d()._F,"true"):null===(o=w.current)||void 0===o||o.removeAttribute(d()._F)})))}),[Z]),q=(0,i.useCallback)((e=>{w.current=e,Z.setNode(e),E(e)}),[Z]);(0,i.useImperativeHandle)(t,(()=>w.current));const W=(0,o(219727).O7)(),G=(0,o(142735).VK)((()=>(0,_().Aw)(W)),[W]);(0,i.useEffect)((()=>{if(B)return L.attachEventListeners({div:B,document:window.document})}),[L,B]);const{isAndroid:$}=W.device;(0,i.useEffect)((()=>{const e=e=>{var t;const o=u().get(),n=(0,_().Zb)({range:o,contentEditableLeafRegistry:O,allowInvisibleEndSelection:!0,constraintToContentEditableRootNode:w.current||void 0}),i=I().default.state,r="editing"===i.mode?i.multiSelection:void 0;return{leafs:n,multiSelection:$&&e.isPhase("beforeInput")&&(!r||(0,h().iG)(r))&&u().isExpanded(o)?null===(t=(0,_().fx)({range:o,contentEditableLeafRegistry:O,allowInvisibleEndSelection:!0}))||void 0===t?void 0:t.multiSelection:r,range:u().toStaticRange(o)}};return L.onInputFlowChange((t=>{var i,a;H(L.isComposing());const{flow:u,type:p,data:m}=t;if("end"===p)return void P("flow ended",m,u);if(x){const t=m.log||=[],o={phase:u.phase,hasMutations:Boolean(u.domMutations),target:e(u),isComposing:u.isComposing()};t.push(o),P("flow updated",u.phase,o)}const f=u.hasEvents(),g=x||o(205228).default.isLocalhost||!f;if("update"!==p||!u.isPhase("beforeInput")&&m.target||(m.target=e(u)),$&&"update"===p&&(0,o(297861).Y)("supportsAlwaysMultiTextSelectionBehavior")&&"Unidentified"===(null===(i=u.keyDown)||void 0===i?void 0:i.event.key)&&"deleteContentBackward"===(null===(a=u.beforeInput)||void 0===a?void 0:a.event.inputType)){var v;u.isPhase("beforeInput")&&!m.beforeInputTarget&&(m.beforeInputTarget=e(u));if(Boolean(null===(v=m.beforeInputTarget)||void 0===v?void 0:v.leafs)){var _;if(u.isPhase("beforeInput")){if(null===(_=u.beforeInput)||void 0===_||_.event.preventDefault(),u.domMutations){m.handledMutations=!0,P("deleteContentBackward: revertDOMMutation");const e=u.domMutations.mutations;for(let t=e.length-1;t>=0;t--)(0,r().A)(e[t],g)}}else if(u.isPhase("keyUp")){var y;const e=function(e){var t;if(!e||0!==e.end.index)return e;let o=e;const n=(0,b().mK)(o.end.store),i=n?null===(t=(0,b().x0)(n))||void 0===t?void 0:t.endIndex:void 0;if(!n||void 0===i)return e;o.start.store===n&&o.start.index===i?(o={start:o.end,end:o.end},P("deleteContentBackward: mutating selection for start of line",o)):(0,h().iG)(o)||0!==o.end.index||(o={start:o.start,end:{store:n,index:i}},P("deleteContentBackward: mutating selection for end of line",o));return o}(null===(y=m.beforeInputTarget)||void 0===y?void 0:y.multiSelection);if(e){const t=(0,h().ko)(e);P("deleteContentBackward: propagateShortcut backspace");const n=()=>{c().setMultiSelection({multiSelection:e}),l().dJ(W,new KeyboardEvent("keydown"),"backspace")};t?n():o(492788).default.afterNextFlush(n)}}return}}if("update"===p&&u.domMutations&&!m.handledMutations){var S,k;m.handledMutations=!0;const t=u.domMutations.mutations,o=m.target||e(u),i=null===(S=o.leafs)||void 0===S?void 0:S.start,a=null===(k=o.leafs)||void 0===k?void 0:k.start,l=null==i?void 0:i.leaf.getText();P("onMutations",m,l,u,i);let c=!1,p=!1,v=!1;for(let e=t.length-1;e>=0;e--){const o=t[e];A(o,i);const n=(0,d().xp)(o.target),a=(0,d().X1)(o.target);if(n===w.current){if((f||"attributes"!==o.type||"style"!==o.attributeName)&&("attributes"!==o.type||"dir"!==o.attributeName))if(i){if("childList"===o.type){const e=Array.from(o.removedNodes);p||=e.some(d().eD)||e.some(d().C7);const t=Array.from(o.addedNodes);v||=t.some(d().eD)}if(a&&a===i.node){switch(o.type){case"attributes":(0,r().A)(o,g);continue;case"characterData":case"childList":break;default:(0,s().t1)(o.type)}c=!0}else(0,r().A)(o,g)}else(0,r().A)(o,g)}else P("allowed mutation on interior region",n,o)}if(a&&(c||p)){var I,C,T,M;if("string"!=typeof l)throw new Error("focusedLeafText must be string");const e=null===(I=u.beforeInput)||void 0===I?void 0:I.event,t=null===(C=u.keyDown)||void 0===C?void 0:C.event.keyCode,o="enter"!==(void 0!==t&&n()(t))&&("insertLineBreak"===(null==e?void 0:e.inputType)||"insertParagraph"===(null==e?void 0:e.inputType)||"insertCompositionText"===(null==e?void 0:e.inputType)&&(null==e||null===(T=e.data)||void 0===T?void 0:T.endsWith("\n"))||$&&v),i={multiSelection:null===(M=m.target)||void 0===M?void 0:M.multiSelection,newValue:l,deletedLine:p,insertedLine:o,isComposing:L.isComposing()};P("delegateMutation",i),a.leaf.delegateMutation(i)}}}))}),[O,W,L,$,H]),(0,i.useEffect)((()=>{const e=w.current;e&&D.current&&Z.mutate((()=>{S?e.contentEditable="true":e.removeAttribute("contentEditable")}))}),[S,Z]);const Q=(0,i.useCallback)((()=>{const e=w.current;return!!e&&(D.current?("always"===G&&K(!0),!1):(Z.mutate((()=>{S?e.contentEditable="true":e.removeAttribute("contentEditable"),(0,_().ri)(W.device)&&(e.spellcheck=!1)})),Z.lock(V.current),D.current=!0,K("gesture"===G),P("enableMultiSelection"),!0))}),[Z,G,K,W.device,S]),Y=(0,i.useCallback)((()=>{const e=w.current;return!(!D.current||!e)&&("always"===G?(K(!1),!1):!L.isComposing()&&(Z.unlock(V.current),e.removeAttribute("contenteditable"),K(!1),P("disableMultiSelection"),D.current=!1,!0))}),[Z,G,K,L]),J=(0,i.useCallback)((()=>{const e=w.current;if(!e)return;const t=u().get();if(null!=t&&t.collapsed&&(0,d().xp)(t.commonAncestorContainer)===e){const e=(0,d().X1)(t.commonAncestorContainer),n=t.startContainer,i=t.startOffset;if(e&&n&&(0,o(641702).Lc)(e,n,i)){const r=e.getElementsByClassName(o(572948).DK)[0];r&&(P("Move collapsed selection before EOL marker",{parentLeafNode:e,caretContainer:n,caretOffset:i}),t.setStartBefore(r),t.setEndBefore(r),u().set(t,W.device))}}}),[W.device]);(0,i.useEffect)((()=>{let e=u().get();function t(){var t;const o=null===(t=u().get())||void 0===t?void 0:t.cloneRange(),n=e;e=o;const i=w.current;i&&u().isExpanded(o)&&!u().isExpanded(n)&&(0,d().xp)(o.commonAncestorContainer)===i&&(0,d().X1)(o.commonAncestorContainer)&&Q()&&(i.focus(),u().isExpanded(u().get())||u().set(o,W.device))}return document.addEventListener("selectionchange",t),document.addEventListener("selectionchange",J),()=>{document.removeEventListener("selectionchange",t),document.removeEventListener("selectionchange",J)}}),[Q,J,W.device]);const X=(0,i.useCallback)((function(){const e=u().get();if(!u().isExpanded(e)&&Y()&&e){const t=M(O,w.current,e);t&&t.node&&t.node instanceof HTMLElement&&t.node.focus(),u().set(e,W.device)}}),[O,Y,W.device]),ee=(0,i.useMemo)((()=>o(513670).Ds(X,50)),[X]),{KeyboardShortcutStackStore:te}=W,oe=(0,i.useRef)(),ne=(0,i.useCallback)((function(e){const t=w.current;if(!t)return;if(!D.current)return;if(c().maybeHandleExpectedBrowserSelectionUpdate("reactSelectionChange"))return void P("maybeHandleExpectedBrowserSelectionUpdate() returned true");const o=u().get();if(P("onSelect (react selection)",u().toStaticRange(o)),!oe.current&&o&&de.current&&o.commonAncestorContainer===de.current)u().clear(W);else if(!(oe.current&&o&&u().areRangesEqual(o,oe.current))){if(oe.current=u().toStaticRange(o),o){const n=o.startContainer===t&&0===o.startOffset&&o.endContainer===t&&0===o.endOffset,i=de.current&&o.startContainer===de.current&&pe.current&&o.endContainer===pe.current,r=W.device.isIOS&&W.device.isMobileNative&&e.timeStamp-T.current>500&&function(e,t,o){if(!e.collapsed||0!==e.startOffset)return!1;const n=(0,_().Zb)({range:e,contentEditableLeafRegistry:t,allowInvisibleEndSelection:!0,constraintToContentEditableRootNode:o}),i=t.getByDOMOrder()[0];return Boolean(i&&n&&n.start.leaf===i.leaf)}(o,O,t);if(n||i||r)return P("onSelect: propagateShortcut selectAll"),void l().dJ({KeyboardShortcutStackStore:te},new KeyboardEvent("keydown"),"selectAll")}if("contextmenu"!==e.nativeEvent.type){if(o&&(u().isExpanded(o)||"always"===G)&&(0,d().xp)(o.commonAncestorContainer)===t){if(U.current)return void(N.current=e);const t=M(O,w.current,o);t&&(P("onSelect: delegateSelection",t),t.leaf.delegateSelection("start"))}u().isExpanded(o)||ee()}}}),[G,O,ee,te,W]);(0,i.useEffect)((()=>{if(!S){function e(){const e=u().get(),t=w.current;if(!t||!e)return;const o=(0,_().fx)({contentEditableLeafRegistry:O,range:e,allowInvisibleEndSelection:!0});o&&(0,d().xp)(e.commonAncestorContainer)===t&&c().selectAndEditMultiSelection({...o,environment:W,focus:"start",readOnly:"infer"})}return document.addEventListener("selectionchange",e),()=>document.removeEventListener("selectionchange",e)}}),[W,S,O]);const ie=(0,i.useCallback)((()=>{U.current=!0,N.current=void 0}),[]),re=(0,i.useCallback)((e=>{const t=N.current;if(U.current=!1,N.current=void 0,T.current=e.timeStamp,t){const e=M(O,w.current);P("handleTouchEnd: delegateSelection",e),null==e||e.leaf.delegateSelection("start")}}),[O]),ae=(0,i.useCallback)((e=>{if(T.current=e.timeStamp,!D.current)return;e.target!==w.current||"Enter"!==e.key||!1!==e.ctrlKey||!1!==e.metaKey||!1!==e.altKey||!1!==e.shiftKey||y&&!y()||void 0!==u().get()||!de.current||u().setOnNode(de.current,W.device);const t=M(O,w.current);P("handleKeyDown: delegateKeyDown",t),null==t||t.leaf.delegateKeyDown(e)}),[O,W.device,y]);(0,i.useEffect)((()=>{const e=w.current;if(e)return e.addEventListener("beforeinput",t),()=>e.removeEventListener("beforeinput",t);function t(e){if(!D.current)return;const t=M(O,w.current);null==t||t.leaf.delegateBeforeInput(e)}}),[O]),(0,i.useEffect)((()=>{"always"!==G||D.current||Q()}),[Q,G]);const se=(0,i.useCallback)((()=>{const e=u().get();return!u().isExpanded(e)&&Y()}),[Y]),le=(0,i.useCallback)((()=>!$&&Boolean(L.isComposing())),[L,$]),ce=(0,o(846550).yK)((e=>{const t={height:1,width:1,caretColor:"transparent"};return{div:{caretColor:e.regularTextColor,...f},whenContentEditable:{WebkitUserModify:"read-write-plaintext-only"},selectionTrapStart:{...t,marginTop:-1},selectionTrapEnd:t}}),[f]),de=(0,i.useRef)(null),ue=(0,C.jsx)("span",{style:ce.selectionTrapStart,ref:de,...d().d_}),pe=(0,i.useRef)(null),me=(0,C.jsx)("span",{style:ce.selectionTrapEnd,ref:pe,...d().d_}),fe=(0,i.useCallback)((()=>{if(!u().get()&&"editing"===I().default.state.mode){const e=I().default.state.multiSelection.start.store;if(e instanceof o(826955).G){const t=e.getType();if(t===a().Ti.linkToPage||t===a().Ti.linkToCollection)return}c().clear({environment:W})}}),[W]),ge=(0,i.useCallback)((()=>{!w.current||u().get()&&"empty"!==I().default.state.mode||w.current.blur()}),[]),ve=(0,i.useRef)(S&&"always"===G);return(0,C.jsx)("div",{role:"textbox","aria-disabled":!S,"aria-label":p.formatMessage({id:"contentEditableRoot.ariaLabel",defaultMessage:"Start typing to edit text"}),"aria-multiline":!0,tabIndex:S?0:void 0,onBlur:W.device.isIOS?fe:void 0,onFocus:W.device.isIOS?ge:void 0,onTouchStart:ie,onTouchEnd:re,onTouchCancel:re,onKeyDown:ae,onCompositionEnd:function(e){if(!D.current)return;const t=M(O,w.current);null==t||t.leaf.delegateCompositionEnd(e)},ref:q,...(0,o(26970).iv)(ce.div,{whenContentEditable:ce.whenContentEditable}),onSelect:ne,contentEditable:ve.current,suppressContentEditableWarning:!0,...d().GZ,children:(0,C.jsxs)(o(676457).c,{id:F,tryEnableMultiSelection:Q,tryDisableMultiSelection:se,isComposing:le,domLock:Z,contentEditableLeafRegistry:O,children:[ue,m,me]})})}));function M(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u().get();const n=(0,_().Zb)({range:o,contentEditableLeafRegistry:e,allowInvisibleEndSelection:!0,constraintToContentEditableRootNode:t||void 0});if(n)return n.start}function P(){if(x){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];console.warn("ContentEditableRoot:",...t)}}function A(e){const t={};if(t.type=e.type,t.target=e.target,t.targetIsText=e.target.nodeType===Node.TEXT_NODE,t.targetIsLeaf=(0,d().eD)(e.target),e.addedNodes.length){const o=Array.from(e.addedNodes);t.added=o,t.addedALeaf=o.some(d().eD),t.addedAText=o.some((e=>e.nodeType===Node.TEXT_NODE))}if(e.removedNodes.length){const o=Array.from(e.removedNodes);t.removed=o,t.removedALeaf=o.some(d().eD),t.removedAText=o.some((e=>e.nodeType===Node.TEXT_NODE))}"characterData"===e.type&&(t.newChars=e.target.textContent,t.oldChars=e.oldValue),t.mutation=e;for(var o=arguments.length,n=new Array(o>1?o-1:0),i=1;i<o;i++)n[i-1]=arguments[i];P("mutation: ",t,...n)}let R=0},58836:(e,t,o)=>{o.d(t,{p:()=>s});var n=o(667294),i=()=>o(676457),r=o(785893);const a={userSelect:"none",pseudoSelection:{background:"transparent"}},s=n.forwardRef(((e,t)=>{const{allowSelectionWithin:n,style:s,className:l,...c}=e,d=(0,i().D)(),u=(0,r.jsx)("div",{ref:t,contentEditable:!1,...(0,o(26970).iv)(l,!n&&a,s),...o(296304).G0,...c});return d?(0,r.jsx)(i().c,{void:!0,children:u}):u}));s.displayName="ContentEditableVoid"},667710:(e,t,o)=>{o.d(t,{Z:()=>x});o(241792);var n=o(667294),i=()=>o(219727),r=()=>o(142735),a=()=>o(846550),s=()=>o(195926),l=()=>o(956108),c=()=>o(788860),d=()=>o(81066),u=()=>o(247724),p=()=>o(352230),m=()=>o(901085),f=()=>o(128119),g=()=>o(827973),v=()=>o(448419),h=()=>o(198829),_=()=>o(255577),b=()=>o(92175),y=()=>o(388284),S=()=>o(471645),w=()=>o(67961),k=o(785893);function I(e){let{hasDismissButton:t,onDismiss:o}=e;const r=(0,i().O7)(),f=(0,a().Fg)(),g=(0,c().YB)(),[v,S]=(0,n.useState)(!1);(0,n.useEffect)((()=>()=>{t||v&&d().qo()}),[g,v,t]);const I=[{key:"trackingTypes",render:e=>(0,k.jsx)(y().Z,{...e,topBorder:0!==e.index}),items:l().m4.map((e=>({key:e,render:t=>(0,k.jsx)(C,{menuListItemProps:t,trackingType:e,setShowReloadOnMenuClose:S,isNativeiOSApp:r.device.isMobileNative&&r.device.isIOS}),action:()=>d().Nh(r,e)})))}];return(0,k.jsxs)(h().Z,{className:u().N7t,menuType:p().o.Popup,width:260,children:[(0,k.jsx)("div",{style:{display:"flex",alignItems:"center",paddingTop:t?4:0},children:t&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(w().Z,{isSmall:!0,isMultiline:!0,style:{width:"80%",paddingLeft:14},children:(0,k.jsx)("b",{children:(0,k.jsx)(c()._H,{...s().ze.customizeCookiesHeader})})}),(0,k.jsx)(b().Z,{style:{float:"right",marginLeft:-8,paddingLeft:8,paddingRight:8,color:f.blueColor},onClick:()=>{d().OM(r,m().Z.getPermission()),o&&o()},children:(0,k.jsx)(c()._H,{...s().ze.cookieDismissButtonLabel})})]})}),(0,k.jsx)(_().Z,{type:_().i.Vertical,initialFocus:void 0,sections:I})]})}function C(e){const{menuListItemProps:t,trackingType:o,setShowReloadOnMenuClose:n,isNativeiOSApp:l}=e,{title:u,caption:p,subtitle:f}=(0,s().G_)(o,l),[{permission:v}]=(0,r().AF)(m().Z),h=(0,a().Fg)(),_=(0,i().O7)();return(0,k.jsx)(g().Z,{...t,title:(0,k.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,k.jsx)("div",{style:{marginRight:0},children:(0,k.jsx)(c()._H,{...u})})}),caption:(0,k.jsxs)("div",{children:[f&&(0,k.jsx)("div",{children:(0,k.jsx)("span",{style:{color:h.errorText},children:(0,k.jsx)(c()._H,{...f})})}),(0,k.jsx)("div",{children:(0,k.jsx)("span",{style:{color:h.mediumTextColor},children:(0,k.jsx)(c()._H,{...p})})})]}),shouldWrapCaption:!0,right:(0,k.jsx)("div",{style:{display:"flex",width:"100%",alignItems:"center",cursor:"pointer"},children:(0,k.jsx)(S().Z,{on:v[o],disabled:"necessary"===o,onClick:()=>{n(!0),d().Nh(_,o)}})})})}const x=function(e){let{renderOrigin:t,hasDismissButton:o,onDismiss:n}=e;return(0,k.jsx)(v().ZP,{popupType:v().Z4.Popup,placementToOrigin:f().Iw.Bottom,alignmentToOrigin:f().lU.Start,renderOrigin:t,render:()=>(0,k.jsx)(I,{hasDismissButton:o,onDismiss:n})})}},537876:(e,t,o)=>{o.d(t,{Z:()=>i});o(667294);var n=o(785893);const i=function(e){let{emojiStore:t,size:i,testId:r}=e;const a=(0,o(219727).O7)(),s=(0,o(846550).yK)((e=>({icon:{fill:e.icon.tertiary,width:i}})),[i]);return(0,o(142735).VK)((()=>t.isDefined()&&t.getAlive()?(0,n.jsx)(o(987165).Z,{emojiId:t.id,emojiName:t.getName(),emojiUrl:t.getUrl(),spaceId:t.pointer.spaceId,size:i,baseUrl:o(205228).default.domainBaseUrl,currentUserId:a.currentUser.id,disableAnimation:a.device.prefersReducedMotion,testId:r}):(0,o(254351).S)(s.icon)),[t,i,a.currentUser.id,a.device.prefersReducedMotion,s.icon,r])}},115098:(e,t,o)=>{o.d(t,{u:()=>y});o(398858),o(461318),o(33228);var n=o(667294),i=()=>o(219727),r=()=>o(142735),a=()=>o(846550),s=()=>o(506347),l=()=>o(396136),c=()=>o(492522),d=()=>o(788860),u=()=>o(568017),p=()=>o(491927),m=()=>o(47443),f=()=>o(497065),g=()=>o(577741);var v=()=>o(720029),h=()=>o(826955),_=()=>o(905263),b=o(785893);function y(e){var t,o,y,w,k,I;let{children:C,step:x,subStep:T,wrapperStyle:M={},highlightStyle:P={}}=e;const A=(0,r().VK)((()=>v().Z.state),[]),R=A.step,B=n.useRef(null),E=(0,a().yK)((e=>({tooltip:{width:250},highlight:{background:"dark"===e.mode?u().ZP.whiteWithAlpha(.05):u().ZP.blackWithAlpha(.05),boxShadow:e.outlineBlueInputBoxShadow,borderRadius:4,position:"relative",zIndex:c().u8,...P},opacityLayer:{position:"absolute",top:0,left:0,height:"100%",width:"100%",zIndex:c().mJ,background:e.surface.wash,opacity:.6}})),[P]),D=void 0!==A.step?null==A||null===(t=A.tooltipTourOutline)||void 0===t||null===(t=t[A.step])||void 0===t?void 0:t.step_type:void 0,U=(0,i().O7)(),F=function(e){const[t,o]=(0,n.useState)(!1),i=(0,n.useMemo)((()=>new IntersectionObserver((e=>{let[t]=e;return o(t.isIntersecting)}))),[]);return(0,n.useEffect)((()=>(e.current&&i.observe(e.current),()=>i.disconnect())),[e,i]),t}(B),N=void 0===R||!A.isActive||!(null!==(o=A.tooltipTourOutline)&&void 0!==o&&o[R])||x!==D&&"demo_signup"!==D,V=!N&&"demo_collection"===D&&T!==(null===(y=A.tooltipTourOutline)||void 0===y?void 0:y[R]).sub_step;return(0,n.useEffect)((()=>{!B.current||F||N||V||B.current.scrollIntoView({behavior:"smooth",block:"center"})}),[R,F,N,V]),N||V?(0,b.jsx)(b.Fragment,{children:C}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{style:E.highlight,children:(0,b.jsx)(S,{ref:B,style:M,children:C})}),(0,b.jsx)("div",{style:E.opacityLayer}),(0,b.jsx)(g().g,{calloutId:"demo_tour",shouldShow:F,children:(0,b.jsx)(_().U,{onBackButtonClick:()=>{var e,t;if(p().nz(U,{action_type:"back",step:R,total_steps:(null===(e=A.tooltipTourOutline)||void 0===e?void 0:e.length)??0,tour_slug:A.slug}),v().Z.decrementStep(),void 0!==x&&"page"===(null===(t=A.tooltipTourOutline)||void 0===t||null===(t=t[R])||void 0===t||null===(t=t.actions)||void 0===t||null===(t=t.back)||void 0===t?void 0:t.type)){var o;const e=null===(o=A.tooltipTourOutline)||void 0===o||null===(o=o[R])||void 0===o||null===(o=o.actions)||void 0===o||null===(o=o.back)||void 0===o?void 0:o.blockId;if(!e)return;const t=new(h().G)(U,{table:l().iU,id:e});m()._c({environment:U,store:t,pageVisitSource:s().tY.DemoTour})}},finalButtonContent:"demo_signup"===D?(0,b.jsx)(d()._H,{id:"TutorialTooltip.signupButton",defaultMessage:"Sign up"}):void 0,onPrimaryButtonClick:()=>{var e,t;if(p().nz(U,{action_type:"next",step:R,total_steps:(null===(e=A.tooltipTourOutline)||void 0===e?void 0:e.length)??0,tour_slug:A.slug}),v().Z.incrementStep(),void 0!==R){if("demo_signup"===D){const e=new URLSearchParams;return e.set("from","demo_tour"),void f().c4({environment:U,url:`/signup?${e.toString()}`})}if(null!==(t=A.tooltipTourOutline)&&void 0!==t&&null!==(t=t[R])&&void 0!==t&&null!==(t=t.actions)&&void 0!==t&&null!==(t=t.next)&&void 0!==t&&t.type){var o,n;const e=null===(o=A.tooltipTourOutline)||void 0===o||null===(o=o[R])||void 0===o||null===(o=o.actions)||void 0===o||null===(o=o.next)||void 0===o?void 0:o.type,t=null===(n=A.tooltipTourOutline)||void 0===n||null===(n=n[R])||void 0===n||null===(n=n.actions)||void 0===n||null===(n=n.next)||void 0===n?void 0:n.blockId;if(!t)return;const i=new(h().G)(U,{table:l().iU,id:t});m()._c({environment:U,store:i,pageVisitSource:s().tY.DemoTour,..."peek"===e?{openInSidePeek:!0}:{}})}}},onSkipButtonClick:()=>{var e;p().nz(U,{action_type:"skip",step:R,total_steps:(null===(e=A.tooltipTourOutline)||void 0===e?void 0:e.length)??0,tour_slug:A.slug}),v().Z.endTour()},header:(0,b.jsx)("div",{children:null===(w=A.tooltipTourOutline)||void 0===w||null===(w=w[R])||void 0===w?void 0:w.title}),origin:B,placementToOrigin:"top",content:null===(k=A.tooltipTourOutline)||void 0===k||null===(k=k[R])||void 0===k?void 0:k.text,onCloseClick:()=>{v().Z.endTour()},numSteps:(null===(I=A.tooltipTourOutline)||void 0===I?void 0:I.length)??0,currStepIndex:R,style:E.tooltip})})]})}const S=n.forwardRef((function(e,t){let{children:o,style:n}=e;return(0,b.jsx)("div",{ref:t,style:n,children:o})}))},732388:(e,t,o)=>{o.d(t,{v:()=>c});o(667294);var n=()=>o(219727),i=()=>o(657320),r=()=>o(142735),a=()=>o(720029),s=()=>o(115098),l=o(785893);function c(e){let{children:t,store:o,step:c}=e;const d=(0,i().l)(),u=(0,n().O7)();return(0,r().VK)((()=>{const e=a().Z.getCurrentStepBlockId(),t=d&&d.publicEditModeStore.state.hasPublicPermission;return!!(a().Z.isActiveDemo()&&t&&null!=o&&o.id)&&(!u.device.isMobile&&e===o.id)}),[d,null==o?void 0:o.id,u.device.isMobile])?(0,l.jsx)(s().u,{step:c,children:t}):t}},129301:(e,t,o)=>{o.d(t,{C:()=>ee});o(267602),o(470928);var n=o(667294),i=()=>o(676457),r=()=>o(492788),a=()=>o(219727),s=()=>o(98642),l=()=>o(142735),c=()=>o(955620),d=()=>o(513670),u=()=>o(696459),p=()=>o(523709),m=()=>o(574089),f=()=>o(82937),g=()=>o(207874),v=()=>o(879952),h=()=>o(990966),_=()=>o(631538),b=()=>o(641702),y=()=>o(949842),S=()=>o(590162),w=()=>o(164079),k=()=>o(154057),I=()=>o(271308),C=()=>o(339523),x=()=>o(505462),T=()=>o(550054),M=()=>o(466970),P=()=>o(156538),A=()=>o(543934),R=()=>o(35982),B=()=>o(960562),E=()=>o(279386),D=()=>o(475335),U=()=>o(482162),F=()=>o(557576),N=()=>o(965903),V=()=>o(127519),L=()=>o(802911),O=()=>o(24216),Z=()=>o(790964),j=()=>o(94967),K=()=>o(10227),z=()=>o(749826),H=o(785893);class q extends K().Z{constructor(){super(...arguments),this.isSelected=!1,this.shouldEditOnClick=!0,this.shouldDisableMultiSelectionOnDragEnd=!1,this.contentEditableLeafRef=n.createRef(),this.wrapperRef=n.createRef(),this.legacyContextKeys=["selectable"].concat(K().a),this.handleDragStart=e=>{const t=this.getContextClosestSelectableStore();e.shiftKey&&!this.isEditingStore.state&&t?(e.preventDefault(),v().Ys({environment:this.environment,store:t,selectMode:v().ji(this.environment)?v().W7.TOGGLE:v().BK()?v().W7.MULTI_SELECT_FROM_FIRST_SELECTED_STORE:void 0}),this.shouldEditOnClick=!1):this.shouldEditOnClick=!0},this.handleDragMove=e=>{if(B().default.state.isDragging)m().td(this.environment,{currentX:e.currentX,currentY:e.currentY});else if(e.shiftKey)k().X9()&&m().f$(this.environment,{startX:e.startX,startY:e.startY,stores:N().default.state.stores,isNativeDrag:!1,getGhostElement:void 0});else if(!F().default.state.isActive){var t;if(!this.props.canSelectionDrag)return;const o=this.getNode();if(!o)return;const n=R().jn(o.getBoundingClientRect(),20);if(R().uh(n,e.currentX,e.currentY))return;"mouse"===e.device&&null!==(t=this.contentEditableContext)&&void 0!==t&&t.tryEnableMultiSelection()&&(this.shouldDisableMultiSelectionOnDragEnd=!0)}},this.handleDragEnd=e=>{var t;this.shouldDisableMultiSelectionOnDragEnd&&(null===(t=this.contentEditableContext)||void 0===t||t.tryDisableMultiSelection(),this.shouldDisableMultiSelectionOnDragEnd=!1);B().default.state.isDragging?m().fX({environment:this.environment,shiftKey:e.shiftKey,optionKey:e.optionKey,commandKey:e.commandKey,analyticsFrom:"page_content"}):h().clearForceExtendAnnotations()},this.handleClick=e=>{const{device:t}=this.environment;(0,y().ZP)({event:e,context:y().Af.EditorClick,callback:()=>{if(this.props.onClick&&this.props.onClick(e),e.defaultPrevented)return;const o=N().default.getDefaultContainerFromTarget(e.target);if(!U().default.isSidePeekOpen()||null!=o&&o.isPeekRenderer()||f().E5(this.environment),this.shouldEditOnClick){const o=this.getContextClosestSelectableStore();if(o?v().eP({environment:this.environment,store:o}):(v().Af({stores:[]}),v().$Y({environment:this.environment,phase:N().SelectionPhase.Selected,preventClearEditingText:!0})),t.isMobile&&!this.isEditingStore.state&&!this.isPartOfSelectionStore.state){const t=this.getNode();if(t){let o;if(this.mutateDOM((()=>{t.classList.add("editor-force-select"),o=x().rangeFromPoint(e.clientX,e.clientY),t.classList.remove("editor-force-select")})),o){const e=function(e,t){return(0,b().Ut)(t,e)}(o,this.environment);var n;if(e)h().setSelection({store:this.props.store,selection:e.selection,readOnly:z().default.checkGate({gateName:"mobile_fix_ai_message_click"})?this.props.disabled||(null===(n=this.getContentEditableLeaf())||void 0===n?void 0:n.isDisabled()):void 0}),e.forceEmitSelectionStore&&V().default.emit()}}}this.saveSerializedTextSelectionAfterFlush()}else this.shouldEditOnClick=!0}})},this.handleEsc=e=>{this.props.onEsc&&(0,y().ZP)({event:e,context:y().Af.EditorEsc,callback:()=>{var t,o;if(null===(t=(o=this.props).onEsc)||void 0===t||t.call(o,e),!e.defaultPrevented)return"unhandled"}})},this.handleContextMenu=e=>{this.props.onContextMenu&&(0,y().ZP)({event:e,context:y().Af.EditorContextMenu,callback:()=>{var t,o;if(null===(t=(o=this.props).onContextMenu)||void 0===t||t.call(o,e),!e.defaultPrevented)return"unhandled"}}),(0,y().ZP)({event:e,context:y().Af.EditorContextMenu,callback:()=>{this.saveSerializedTextSelectionAfterFlush()}})},this.handleSelect=e=>{const{device:t}=this.environment;t.isMobile?this.handleMobileSelect(e):this.handleDesktopSelect(e)},this.handleMobileSelect=e=>{if(!this.props.disabled){if(!x().get())return;const t=this.getContextClosestSelectableStore();this.isEditingStore.state||v().eP({environment:this.environment,store:t}),this.saveSerializedTextSelection(e),r().default.flush()}},this.handleDesktopSelect=e=>{this.props.disabled||!this.isEditingStore.state&&"contain"===e.endpoint||this.saveSerializedTextSelection(e)},this.defaultShortcutHandlers={onEsc:e=>{if(this.props.disabled)return;e.preventDefault();const t="empty"!==V().default.state.mode&&V().default.state.multiSelection,n=t&&(0,I().tp)({multiSelection:t,filterCommonAncestors:!0,focus:void 0});if(n)return void v().Z5({environment:this.environment,...n});const i=this.getContextClosestSelectableStore();if(i){const e=o(32969).C.findSelectableFromStore(i);e&&e.props.canSelect&&v().Z5({environment:this.environment,stores:[i]})}},onUp:e=>{var t;this.props.disabled||h().arrowUpMultiText({environment:this.environment,topBottomPadding:this.props.topBottomPadding,event:e,contentEditableLeafRegistry:null===(t=this.contentEditableContext)||void 0===t?void 0:t.contentEditableLeafRegistry})},onDown:e=>{var t;this.props.disabled||h().arrowDownMultiText({environment:this.environment,topBottomPadding:this.props.topBottomPadding,event:e,contentEditableLeafRegistry:null===(t=this.contentEditableContext)||void 0===t?void 0:t.contentEditableLeafRegistry})},onLeft:e=>{if(this.props.disabled)return;const t=this.getNode();var o,n;z().default.checkGate({gateName:"editor_basic_rtl"})&&t&&"rtl"===getComputedStyle(t).direction?h().arrowRightMultiText({environment:this.environment,event:e,contentEditableLeafRegistry:null===(o=this.contentEditableContext)||void 0===o?void 0:o.contentEditableLeafRegistry,editorMode:Y(this.props.isDiscussionInput,this.props.store)}):h().arrowLeftMultiText({environment:this.environment,event:e,contentEditableLeafRegistry:null===(n=this.contentEditableContext)||void 0===n?void 0:n.contentEditableLeafRegistry})},onRight:e=>{if(this.props.disabled)return;const t=this.getNode();var o,n;z().default.checkGate({gateName:"editor_basic_rtl"})&&t&&"rtl"===getComputedStyle(t).direction?h().arrowLeftMultiText({environment:this.environment,event:e,contentEditableLeafRegistry:null===(o=this.contentEditableContext)||void 0===o?void 0:o.contentEditableLeafRegistry}):h().arrowRightMultiText({environment:this.environment,event:e,contentEditableLeafRegistry:null===(n=this.contentEditableContext)||void 0===n?void 0:n.contentEditableLeafRegistry,editorMode:Y(this.props.isDiscussionInput,this.props.store)})},onSelectAll:e=>{var t;this.props.disabled||(e.preventDefault(),h().selectAllTextMulti({environment:this.environment,store:this.props.store,canSelectAllBlocks:this.props.canSelectAllBlocks,contentEditableContextId:null===(t=this.contentEditableContext)||void 0===t?void 0:t.id}))},onUndo:e=>{e.preventDefault(),g().Yw(this.environment)},onRedo:e=>{e.preventDefault(),g().KX(this.environment)},onGoToBeginningOfLine:e=>{G("start",e.shiftKey)},onGoToEndOfLine:e=>{G("end",e.shiftKey)}},this.saveSerializedTextSelectionAfterFlush=()=>{r().default.afterNextFlush((()=>{this.saveSerializedTextSelection()}))},this.isPartOfSelectionStore=this.createComputedStore((()=>(0,T().ZZ)(this.props.store)),{debugName:"isPartOfSelection"}),this.isEditingStore=this.createComputedStore((()=>(0,T().J5)(this.props.store)),{debugName:"isEditing"})}get registries(){return[P().E]}getContentEditableLeaf(){return this.contentEditableLeafRef.current||void 0}getNode(){return this.wrapperRef.current?this.wrapperRef.current:this.contentEditableLeafRef.current?this.contentEditableLeafRef.current.getNode():super.getNode()}didMountOrUpdate(){this.isEditingStore.state?this.isSelected||(this.isSelected=!0,this.props.onSelected&&this.props.onSelected()):this.isSelected&&(this.isSelected=!1,function(e){e()}(this.props.clearBrowserSelection),this.props.onDeselected&&this.props.onDeselected())}willUnmount(){if(this.isSelected){this.isSelected=!1,this.props.onDeselected&&this.props.onDeselected();const e=this.isEditingStore.state;r().default.afterNextFlush((()=>{const t=P().E.findEditableWithStore(this.props.store),o=this.isEditingStore.state;e&&o&&!this.componentIsMounted&&!t&&h().clear({environment:this.environment})}))}}shouldComponentUpdate(e){return!0}getContextClosestSelectable(){var e;return null===(e=this.context.selectable)||void 0===e?void 0:e.closestSelectable}getContextClosestSelectableStore(){var e;return null===(e=this.context.selectable)||void 0===e||null===(e=e.closestSelectable)||void 0===e||null===(e=e.props)||void 0===e?void 0:e.store}renderComponent(){const{disabled:e,disableUpDownArrows:t,disableEnter:o}=this.props,n=this.isEditingStore.state;return(0,H.jsx)(j().Z,{debugName:"Editable",capture:n&&!e,onDelete:this.getShortcutHandler("onDelete"),onDeleteToEndOfLine:this.getShortcutHandler("onDeleteToEndOfLine"),onDeleteNextWord:this.getShortcutHandler("onDeleteNextWord"),onBackspace:this.getShortcutHandler("onBackspace"),onEnter:o?void 0:this.getShortcutHandler("onEnter"),onShiftEnter:this.getShortcutHandler("onShiftEnter"),onCommandEnter:this.getShortcutHandler("onCommandEnter"),onCommandShiftEnter:this.getShortcutHandler("onCommandShiftEnter"),onUp:t?void 0:this.getShortcutHandler("onUp"),onDown:t?void 0:this.getShortcutHandler("onDown"),onLeft:this.getShortcutHandler("onLeft"),onRight:this.getShortcutHandler("onRight"),onCommandLeft:this.getShortcutHandler("onCommandLeft"),onCommandRight:this.getShortcutHandler("onCommandRight"),onTab:this.getShortcutHandler("onTab"),onUntab:this.getShortcutHandler("onUntab"),onSelectAll:this.getShortcutHandler("onSelectAll"),onToggleUnderline:this.getShortcutHandler("onToggleUnderline"),onToggleHighlight:this.getShortcutHandler("onToggleHighlight"),onToggleBold:this.getShortcutHandler("onToggleBold"),onToggleItalics:this.getShortcutHandler("onToggleItalics"),onToggleStrike:this.getShortcutHandler("onToggleStrike"),onToggleCode:this.getShortcutHandler("onToggleCode"),onUndo:this.getShortcutHandler("onUndo"),onRedo:this.getShortcutHandler("onRedo"),onEsc:this.getShortcutHandler("onEsc"),onCut:this.getShortcutHandler("onCut"),onCopy:this.getShortcutHandler("onCopy"),onPaste:this.getShortcutHandler("onPaste"),onKeypress:this.getShortcutHandler("onKeypress"),onMoveUp:this.getShortcutHandler("onMoveUp"),onMoveDown:this.getShortcutHandler("onMoveDown"),onHome:this.saveSerializedTextSelectionAfterFlush,onEnd:this.saveSerializedTextSelectionAfterFlush,onGoToBeginningOfLine:this.getShortcutHandler("onGoToBeginningOfLine"),onGoToEndOfLine:this.getShortcutHandler("onGoToEndOfLine"),onGoForwardOneChar:this.saveSerializedTextSelectionAfterFlush,onGoBackwardOneChar:this.saveSerializedTextSelectionAfterFlush,children:this.renderDraggable()})}renderDraggable(){const e=this.isEditingStore.state;return(0,H.jsx)(Z().Z,{disabled:this.props.disableDrag,onDraggableDragStart:this.handleDragStart,onDraggableDragMove:this.handleDragMove,onDraggableDragEnd:this.handleDragEnd,onDraggableDragCancel:e=>{return t=this.environment,void(B().default.state.isDragging&&(m().cQ(t),v().ZH({environment:t})));var t},cursor:"text",render:t=>this.props.render((0,w().Z)(t,{leafRef:this.contentEditableLeafRef,wrapperRef:this.wrapperRef,onClick:this.handleClick,onContextMenu:this.handleContextMenu,onKeyDown:$,onDoubleClick:Q,onEsc:this.handleEsc}),this.handleSelect,Boolean(e)),enableAndroidContextMenu:this.props.disabled,disableHorizontalEdgeScroll:this.props.disableHorizontalEdgeScroll})}getShortcutHandler(e){const t=this.props[e],o=this.defaultShortcutHandlers[e];return t??o}saveSerializedTextSelection(e){var t;const o=x().get(),n=(0,I().fx)({contentEditableLeafRegistry:null===(t=this.contentEditableContext)||void 0===t?void 0:t.contentEditableLeafRegistry,range:o,allowInvisibleEndSelection:(0,S().y)().shift});n&&h().selectAndEditMultiSelection({environment:this.environment,...n,readOnly:"infer",focus:void 0})}}q.displayName="Editable";const W=q;function G(e,t){const o=V().default.state;"empty"!==o.mode&&r().default.afterNextFlush((()=>{const{start:n,end:i}=o.multiSelection;switch(e){case"start":{const e=n.store.getValue();if(!e)return;const o=c().Oqk({textValue:e,substring:"\n",ignoreCase:!1}).reverse().find((e=>{let{endIndex:t}=e;return t<=n.index})),r=(null==o?void 0:o.endIndex)??0,a={store:n.store,index:r};h().setMultiSelection({multiSelection:{start:a,end:t?i:a}});break}case"end":{const e=(0,T().x0)(i.store);if(!e)return;const o=n.store.getValue();if(!o)return;const r=c().Oqk({textValue:o,substring:"\n",ignoreCase:!1}).find((e=>{let{startIndex:t}=e;return t>=i.index})),a=(null==r?void 0:r.startIndex)??e.endIndex,s={store:i.store,index:a};h().setMultiSelection({multiSelection:{start:t?n:s,end:s}});break}default:(0,u().t1)(e)}}))}function $(e){if(!e.metaKey&&!e.ctrlKey&&!e.altKey){if((0,A().nB)(e.key))return;D().default.setKeyboardMode(!0)}}function Q(e){(0,y().ZP)({event:e,context:y().Af.EditorDoubleClick,callback:()=>{}})}function Y(e,t){if(e)return"default";const o=(0,C().sQ)(t);return o?E().MT.getMode(o):"default"}function J(e){var t;const{canSelectAllBlocks:o,canSelectionDrag:c,disabled:u,disableDrag:C,disableEnter:A,disableHorizontalEdgeScroll:E,disableUpDownArrows:D,isDiscussionInput:K,onBlur:z,onClick:q,onContextMenu:W,topBottomPadding:G,store:$}=e,Q=(0,a().O7)(),Y=(0,M().E)("editor_basic_rtl"),J=(0,M().E)("mobile_fix_ai_message_click"),X=(0,n.useRef)(!0),ee=(0,n.useRef)(!1),re=(0,n.useRef)(null),ae=(0,n.useRef)(null),se=(0,i().D)(),{closestSelectable:le}=(0,n.useContext)(_().a),ce=null==le||null===(t=le.props)||void 0===t?void 0:t.store,de=(0,n.useCallback)((()=>re.current?re.current:ae.current?ae.current.getNode():null),[]),ue=(0,l().VK)((()=>(0,T().J5)($)),[$],{debugName:"isEditing"}),pe=(0,l().VK)((()=>(0,T().ZZ)($)),[$],{debugName:"isPartOfSelection"}),me=(0,n.useRef)(!1);(0,n.useEffect)((()=>{me.current&&!ue?null==z||z():ue&&(me.current=!0)}),[ue,z]),(0,n.useEffect)((()=>()=>{if("editing"!==V().default.state.mode)return;V().default.state.multiSelection.start.store.id!==$.id||P().E.findEditableWithStore($)||h().clear({environment:Q})}),[Q,$]);const fe=(0,n.useCallback)((e=>{if(u)return;e.preventDefault();const t="empty"!==V().default.state.mode&&V().default.state.multiSelection;if(!t)return;const o=(0,I().tp)({multiSelection:t,filterCommonAncestors:!0,focus:void 0});o?v().Z5({environment:Q,...o}):null!=le&&le.props.canSelect&&v().Z5({environment:Q,stores:[le.props.store]})}),[Q,u,le]),ge=(0,n.useCallback)((e=>{!u&&(0,p().vd)(e)&&h().arrowUpMultiText({event:e,environment:Q,topBottomPadding:G,contentEditableLeafRegistry:null==se?void 0:se.contentEditableLeafRegistry})}),[Q,u,G,null==se?void 0:se.contentEditableLeafRegistry]),ve=(0,n.useCallback)((e=>{!u&&(0,p().vd)(e)&&h().arrowDownMultiText({event:e,environment:Q,topBottomPadding:G,contentEditableLeafRegistry:null==se?void 0:se.contentEditableLeafRegistry})}),[Q,u,G,null==se?void 0:se.contentEditableLeafRegistry]),he=(0,n.useCallback)((e=>{if(u||!(0,p().vd)(e))return;const t=de();Y&&t&&"rtl"===getComputedStyle(t).direction?h().arrowRightMultiText({event:e,environment:Q,contentEditableLeafRegistry:null==se?void 0:se.contentEditableLeafRegistry,editorMode:ie($,K)}):h().arrowLeftMultiText({event:e,environment:Q,contentEditableLeafRegistry:null==se?void 0:se.contentEditableLeafRegistry})}),[Q,Y,u,K,$,null==se?void 0:se.contentEditableLeafRegistry,de]),_e=(0,n.useCallback)((e=>{if(u||!(0,p().vd)(e))return;const t=de();Y&&t&&"rtl"===getComputedStyle(t).direction?h().arrowLeftMultiText({event:e,environment:Q,contentEditableLeafRegistry:null==se?void 0:se.contentEditableLeafRegistry}):h().arrowRightMultiText({event:e,environment:Q,contentEditableLeafRegistry:null==se?void 0:se.contentEditableLeafRegistry,editorMode:ie($,K)})}),[Q,Y,u,K,$,null==se?void 0:se.contentEditableLeafRegistry,de]),be=(0,n.useCallback)((e=>{u||(e.preventDefault(),h().selectAllTextMulti({environment:Q,store:$,canSelectAllBlocks:o,contentEditableContextId:null==se?void 0:se.id}))}),[Q,u,o,$,null==se?void 0:se.id]),ye=(0,n.useCallback)((e=>{e.preventDefault(),g().Yw(Q)}),[Q]),Se=(0,n.useCallback)((e=>{e.preventDefault(),g().KX(Q)}),[Q]),we=(0,n.useCallback)((e=>{ne("start",e.shiftKey)}),[]),ke=(0,n.useCallback)((e=>{ne("end",e.shiftKey)}),[]),Ie=(0,n.useCallback)((e=>{e.shiftKey&&!ue&&ce?(e.preventDefault(),v().Ys({environment:Q,store:ce,selectMode:v().oj(Q)}),X.current=!1):X.current=!0}),[Q,ue,ce]),Ce=(0,n.useCallback)((e=>{if(B().default.state.isDragging)m().td(Q,{currentX:e.currentX,currentY:e.currentY});else if(e.shiftKey)k().X9()&&m().f$(Q,{startX:e.startX,startY:e.startY,stores:N().default.state.stores,isNativeDrag:!1,getGhostElement:void 0});else{if(F().default.state.isActive)return;if(!c||"mouse"!==e.device)return}const t=de();if(!t)return;const o=R().jn(t.getBoundingClientRect(),20);R().uh(o,e.currentX,e.currentY)||null!=se&&se.tryEnableMultiSelection()&&(ee.current=!0)}),[Q,c,de,se]),xe=(0,n.useCallback)((e=>{ee.current&&(null==se||se.tryDisableMultiSelection(),ee.current=!1),B().default.state.isDragging?m().fX({environment:Q,analyticsFrom:"page_content",...d().ei(e,["shiftKey","optionKey","commandKey"])}):h().clearForceExtendAnnotations()}),[Q,se]),Te=(0,n.useCallback)((()=>{B().default.state.isDragging&&(m().cQ(Q),v().ZH({environment:Q}))}),[Q]),Me=(0,n.useCallback)((()=>{const e=x().get(),t=(0,I().fx)({contentEditableLeafRegistry:null==se?void 0:se.contentEditableLeafRegistry,range:e,allowInvisibleEndSelection:(0,S().y)().shift});t&&h().selectAndEditMultiSelection({...t,environment:Q,readOnly:"infer",focus:void 0})}),[Q,null==se?void 0:se.contentEditableLeafRegistry]),Pe=(0,n.useCallback)((()=>{r().default.afterNextFlush(Me)}),[Me]),Ae=(0,n.useCallback)((e=>{(0,y().ZP)({event:e,context:y().Af.EditorClick,callback:()=>{if(null==q||q(e),!e.defaultPrevented)if(function(e){var t;if(!U().default.isSidePeekOpen())return!1;return null===(t=N().default.getDefaultContainerFromTarget(e))||void 0===t?void 0:t.isPeekRenderer()}(e.target)||f().E5(Q),X.current){ce?v().eP({environment:Q,store:ce}):(v().Af({stores:[]}),v().$Y({environment:Q,phase:N().SelectionPhase.Selected,preventClearEditingText:!0}));try{var t;if(!Q.device.isMobile)return;if(ue||pe)return;const o=de();if(!o)return;let n;if((0,O().y)(se,(()=>{o.classList.add("editor-force-select"),n=x().rangeFromPoint(e.clientX,e.clientY),o.classList.remove("editor-force-select")})),!n)return;const i=(0,b().Ut)(Q,n);if(!i)return;h().setSelection({store:$,selection:i.selection,readOnly:J?u||(null===(t=ae.current)||void 0===t?void 0:t.isDisabled()):void 0}),i.forceEmitSelectionStore&&V().default.emit()}finally{Pe()}}else X.current=!0}})}),[Q,J,u,q,$,ue,pe,ce,se,de,Pe]),Re=(0,n.useCallback)((e=>{if(!u)if(Q.device.isMobile){if(!x().get())return;ue||v().eP({environment:Q,store:ce}),Me(),r().default.flush()}else(ue||"contain"!==e.endpoint)&&Me()}),[Q,u,ue,ce,Me]),Be=(0,n.useCallback)((e=>{W&&(0,y().ZP)({event:e,context:y().Af.EditorContextMenu,callback:()=>{if(W(e),!e.defaultPrevented)return"unhandled"}}),(0,y().ZP)({event:e,context:y().Af.EditorContextMenu,callback:Pe})}),[W,Pe]);return(0,s().c)(P().E,(()=>({props:e,contentEditableContext:se,getContentEditableLeaf:()=>ae.current||void 0,getNode:de,getContextClosestSelectable:()=>le,getContextClosestSelectableStore:()=>{var e;return null==le||null===(e=le.props)||void 0===e?void 0:e.store},handleClick:Ae})),[se,le,de,Ae]),(0,H.jsx)(L().Z,{name:"Editable",children:(0,H.jsx)(j().Z,{debugName:"Editable",capture:ue&&!u,onDelete:e.onDelete,onDeleteToEndOfLine:e.onDeleteToEndOfLine,onDeleteNextWord:e.onDeleteNextWord,onBackspace:e.onBackspace,onEnter:A?void 0:e.onEnter,onShiftEnter:e.onShiftEnter,onCommandEnter:e.onCommandEnter,onCommandShiftEnter:e.onCommandShiftEnter,onUp:D?void 0:e.onUp||ge,onDown:D?void 0:e.onDown||ve,onLeft:e.onLeft||he,onRight:e.onRight||_e,onCommandLeft:e.onCommandLeft,onCommandRight:e.onCommandRight,onTab:e.onTab,onUntab:e.onUntab,onSelectAll:e.onSelectAll||be,onToggleUnderline:e.onToggleUnderline,onToggleHighlight:e.onToggleHighlight,onToggleBold:e.onToggleBold,onToggleItalics:e.onToggleItalics,onToggleStrike:e.onToggleStrike,onToggleCode:e.onToggleCode,onUndo:e.onUndo||ye,onRedo:e.onRedo||Se,onEsc:e.onEsc||fe,onCut:e.onCut,onCopy:e.onCopy,onPaste:e.onPaste,onKeypress:e.onKeypress,onMoveUp:e.onMoveUp,onMoveDown:e.onMoveDown,onHome:Pe,onEnd:Pe,onGoToBeginningOfLine:e.onGoToBeginningOfLine||we,onGoToEndOfLine:e.onGoToEndOfLine||ke,onGoForwardOneChar:Pe,onGoBackwardOneChar:Pe,children:(0,H.jsx)(Z().Z,{cursor:"text",disabled:C,disableHorizontalEdgeScroll:E,enableAndroidContextMenu:u,onDraggableDragStart:Ie,onDraggableDragMove:Ce,onDraggableDragEnd:xe,onDraggableDragCancel:Te,render:t=>e.render((0,w().Z)(t,{leafRef:ae,wrapperRef:re,onClick:Ae,onContextMenu:Be,onKeyDown:te,onDoubleClick:oe}),Re,Boolean(ue))})})})}function X(e){const t=(0,M().E)("editable_functional_component")?J:W;return(0,H.jsx)(t,{...e})}const ee=n.memo(X,o(632314).Z);function te(e){e.metaKey||e.ctrlKey||e.altKey||(0,A().nB)(e.key)||D().default.setKeyboardMode(!0)}function oe(e){(0,y().ZP)({event:e,context:y().Af.EditorDoubleClick,callback:()=>{}})}function ne(e,t){const o=V().default.state;"empty"!==o.mode&&r().default.afterNextFlush((()=>{const{start:n,end:i}=o.multiSelection,r=n.store.getValue();if(r)switch(e){case"start":{const e=c().Oqk({textValue:r,substring:"\n",ignoreCase:!1}).reverse().find((e=>{let{endIndex:t}=e;return t<=n.index})),o=(null==e?void 0:e.endIndex)??0,a={store:n.store,index:o};h().setMultiSelection({multiSelection:{start:a,end:t?i:a}});break}case"end":{const e=(0,T().x0)(i.store);if(!e)return;const o=c().Oqk({textValue:r,substring:"\n",ignoreCase:!1}).find((e=>{let{startIndex:t}=e;return t>=i.index})),a=(null==o?void 0:o.startIndex)??e.endIndex,s={store:i.store,index:a};h().setMultiSelection({multiSelection:{start:t?n:s,end:s}});break}default:(0,u().t1)(e)}}))}function ie(e,t){if(t)return"default";const o=(0,C().sQ)(e);return o?E().MT.getMode(o):"default"}},890631:(e,t,o)=>{o.d(t,{Z:()=>y});var n=o(667294),i=()=>o(219727),r=()=>o(142735),a=()=>o(846550),s=()=>o(381839),l=()=>o(788860),c=()=>o(568017),d=()=>o(407391),u=()=>o(148126),p=()=>o(388350),m=()=>o(108714),f=()=>o(967092),g=()=>o(83230),v=o(785893);const h={mobilePreview:{padding:"4px 8px",height:80,display:"flex",alignItems:"center",justifyContent:"center"},mobilePreviewValue:{overflow:"auto"},submitButton:{alignSelf:"flex-start"},enterIcon:{height:14,width:14,fill:"currentColor",marginLeft:6,marginTop:2},errorContainer:{color:c().ZP.redWithAlpha(.8),fontSize:12,padding:"8px 10px"}},_=n.forwardRef((function(e,t){const s=(0,n.useRef)(null),l=(0,i().O7)(),{isOpen:c,onDismiss:d,origin:u,originRect:p,originGap:m,popupStyle:g}=e,h=(0,r().VK)((()=>w(l)),[l]),_=(0,a().yK)((e=>({inputWrapper:{display:"flex",alignItems:"center",padding:"8px 10px",width:"100%",background:e.inputBackground},popup:{width:400,display:"flex",flexDirection:"column"}})),[]);(0,n.useEffect)((()=>{l.KatexStore.loadIfNeeded((()=>[(0,o(955620).qZ6)("")]))}),[l.KatexStore]),(0,n.useImperativeHandle)(t,(()=>({getSelection:()=>{if(!s)return;if(!s.current)return;const e=s.current.getSelection();return"contain"===(null==e?void 0:e.type)?e.selection:void 0}})),[]);const y=(0,v.jsxs)("div",{style:_.inputWrapper,children:[(0,v.jsx)(b,{ref:s,...e}),(0,v.jsx)(I,{error:e.error,disabled:e.disabled,isOpen:e.isOpen,onSubmit:e.onSubmit,onDismiss:e.onDismiss})]}),S=(0,r().VK)((()=>w(l)===f().kQ.SlideUp),[l]);return(0,v.jsx)(f().ZP,{popupType:h,open:c,origin:u,originRect:p,originGap:m,keepFocus:h===f().kQ.SlideUp,onDismiss:d,style:{..._.popup,...g},render:()=>(0,v.jsx)(o(573357).Z,{capture:c,allowEsc:!0,render:()=>S?(0,v.jsxs)(n.Fragment,{children:[(0,v.jsx)(x,{equationValue:e.equationValue,error:e.error,displayMode:e.displayMode,isOpen:e.isOpen}),y]}):(0,v.jsxs)(n.Fragment,{children:[y,(0,v.jsx)(C,{isOpen:e.isOpen,error:e.error})]})})})})),b=n.forwardRef((function(e,t){const{disabled:n,isOpen:l,equationValue:c,onLeft:d,onRight:u,onDismiss:m,displayMode:g}=e,h=(0,i().O7)(),_=(0,r().VK)((()=>w(h)===f().kQ.SlideUp),[h]),b=!n&&!_,y=_?{type:p().b.Textarea}:{type:p().b.InlineWrap,onSubmit:t=>k(t,e.isOpen,e.disabled,e.error,e.onSubmit,e.onDismiss)},I=(0,a().yK)((e=>({base:{fontFamily:o(707513).F5(o(146947).locale).mono,fontSize:14,marginRight:8,flex:1,wordBreak:"break-word",maxHeight:"50vh",overflow:"auto",..."block"===g&&{minHeight:60},..._&&{height:100}},placeHolder:{color:e.lightTextColor}})),[g,_]);return(0,v.jsx)(p().Z,{ref:t,...y,disabled:n,focus:l,selectAll:b,value:c||"",placeholder:S(e.displayMode),getHtml:t=>function(e,t){return t.highlight(o(513670).AK(e),t.languages[s().PrismLanguages.latex],s().PrismLanguages.latex)}(t,e.Prism),onChange:t=>function(e,t,n,i,r){if(!t)return;n(e,o(482269).by({environment:r,equation:e,displayMode:i}))}(t,e.isOpen,e.onChange,e.displayMode,h),onCancel:m,onLeft:d,onRight:u,placeholderStyle:{...I.base,...I.placeHolder},style:I.base,autoCorrect:"off",autoCapitalize:"off"})})),y=_;function S(e){return"block"===e?"|x| = \\begin{cases}Â Â Â Â Â Â Â Â Â Â Â Â Â \nÂ Â x, &\\quad x \\geq 0 \\\\Â Â Â Â Â Â Â Â Â Â Â \nÂ -x, &\\quad x < 0Â Â Â Â Â Â Â Â Â Â Â Â Â \n\\end{cases}":"E = mc^2"}function w(e){const{device:t}=e,o=t.isPhone&&t.isIOS&&t.isMobileBrowser;return t.isPhone&&!o?f().kQ.SlideUp:f().kQ.Popup}function k(e,t,o,n,i,r){e.preventDefault&&e.preventDefault(),o||t&&(n||(i(),r()))}function I(e){let{error:t,disabled:n,isOpen:i,onSubmit:r,onDismiss:a}=e;return n?null:(0,v.jsxs)(o(906651).Z,{onClick:e=>k(e,i,n,t,r,a),disabled:n||Boolean(t),style:h.submitButton,children:[(0,v.jsx)(l()._H,{defaultMessage:"Done",id:"equationInput.submitButton.label"}),(0,o(842595).U)(h.enterIcon)]})}function C(e){let{isOpen:t,error:o}=e;const n=(0,i().O7)(),s=(0,r().VK)((()=>w(n)===f().kQ.Popup),[n]),p=(0,a().yK)((e=>({container:{color:c().ZP.redWithAlpha(.8),fontSize:12,padding:"8px 10px",...s&&{boxShadow:`0 -1px ${e.lightDividerColor}`}},label:{fontWeight:600},learnMoreLink:{display:"inline",textDecoration:"underline"}})),[s]);if(!t)return null;if(!o)return null;const g=o.message.replace("KaTeX parse error: ","");return(0,v.jsxs)("div",{role:"alert",style:p.container,children:[(0,v.jsx)("span",{style:p.label,children:(0,v.jsx)(l()._H,{defaultMessage:"Invalid equation:",id:"equationInput.inputError.label"})})," ",g,". ",(0,v.jsx)(m().Z,{href:(0,u().UY)("guides.equations"),external:!0,onClick:()=>{d().Fs(n,{from:"equation_input"})},style:p.learnMoreLink,children:(0,v.jsx)(l()._H,{defaultMessage:"Learn more",id:"equationInput.inputError.learnMore"})})]})}function x(e){let{equationValue:t,error:o,displayMode:n,isOpen:i}=e;const r=(0,a().Fg)();return t?(0,v.jsx)("div",{style:h.mobilePreview,children:o?(0,v.jsx)(C,{isOpen:i,error:o}):"block"===n?(0,v.jsx)(g().Z,{display:n,equation:t,style:h.mobilePreviewValue,theme:r}):(0,v.jsx)(g().Z,{display:n,equation:t,style:h.mobilePreviewValue,theme:r,index:0,isTemporary:!1})}):null}},83230:(e,t,o)=>{o.d(t,{Z:()=>d});var n=o(667294),i=()=>o(372545),r=()=>o(788860),a=()=>o(555061),s=()=>o(482269),l=()=>o(677559),c=o(785893);function d(e){(0,n.useEffect)((()=>{s().bc()}),[]);const t=(0,r().YB)();return(0,c.jsx)(l().ev,{dependency:a().e,children:o=>(0,c.jsx)(i().MW,{intl:t,katex:o,...e})})}},868744:(e,t,o)=>{o.d(t,{Z:()=>g});var n=o(667294),i=()=>o(219727),r=()=>o(998901),a=()=>o(104088);const s=function(){const[e,t]=n.useState({x:0,y:0});return n.useEffect((()=>{const e=e=>{t({x:e.clientX,y:e.clientY})};return window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousemove",e)}}),[]),e};var l=o(785893);function c(e){let{x:t,mouseX:o}=e;return o>t?void 0:-Math.max(t-o,10)+"px"}function d(e){let{x:t,width:o,mouseX:n}=e;return n>t?-Math.max(n-(t+o),10)+"px":void 0}function u(e){let{x:t,width:o,mouseX:n}=e;return n>t?`${Math.max(n-(t+o),10)}px`:`${Math.max(t-n,10)}px`}function p(e){let{x:t,y:o,height:n,mouseX:i,mouseY:r}=e;return i>t?`polygon(0% 0%, 0% 100%, 100% ${100*(r-o)/n}%)`:`polygon(100% 0%, 0% ${100*(r-o)/n}%, 100% 100%)`}function m(e){const{x:t=0,y:o=0,height:i=0,width:r=0}=e.el.getBoundingClientRect()||{},{x:a,y:m}=s(),f={x:t,y:o,height:i,width:r,mouseX:a,mouseY:m},g=(0,n.useRef)(null),v=n.useCallback((e=>{if(g.current){g.current.style.pointerEvents="none";const t=document.elementFromPoint(e.clientX,e.clientY);if(g.current.style.pointerEvents="auto",t){const o=new MouseEvent(e.nativeEvent.type,e.nativeEvent);t.dispatchEvent(o)}}}),[]),h={right:d(f),left:c(f),height:i,width:u(f),clipPath:p(f)};return(0,l.jsx)("div",{ref:g,onClick:v,style:{cursor:"pointer",position:"absolute",pointerEvents:"auto",top:0,...h}})}function f(e,t){let{onClick:s,renderOrigin:c,renderExtension:d,allowOptionalExtensionMenu:u,...p}=e;const{disableDefaultClick:f,onFocus:g,focused:v,openOnFocus:h,placementToOrigin:_,alignmentToOrigin:b,disableCloseOnEnter:y}=p,S=(0,i().O7)(),w=(0,i().Fy)(),[k,I]=(0,n.useState)(!1),C=(0,n.useRef)(null),x=(0,n.useRef)(null),T=(0,n.useRef)(null),M=(0,n.useRef)(null),P=(0,n.useCallback)((()=>{T.current&&window.clearTimeout(T.current),M.current&&window.clearTimeout(M.current),T.current=null,M.current=null}),[]),A=(0,n.useCallback)((()=>{P(),k||I(!0)}),[k,P]),R=(0,n.useCallback)((()=>{P(),k&&I(!1)}),[k,P]),B=(0,n.useCallback)((e=>{P(),k||(e&&e.preventDefault&&e.preventDefault(),T.current=window.setTimeout(A,120))}),[k,P,A]),E=(0,n.useCallback)((()=>{P(),k&&(M.current=window.setTimeout(R,100))}),[k,R,P]),D=(0,n.useCallback)((e=>{g(),A(),u&&(null==s||s(e),R())}),[g,A,u,s,R]),U=(0,n.useCallback)((()=>{B()}),[B]),F=(0,n.useCallback)((()=>{g(),B()}),[g,B]),N=(0,n.useCallback)((e=>{if(w.isPhone)return;const t=C.current;k&&t&&!t.contains(e.target)&&R()}),[k,R,w.isPhone]),V=(0,n.useCallback)((e=>{13===e.keyCode&&k&&!y&&R()}),[k,R,y]);(0,n.useEffect)((()=>{if(!Boolean(f))return window.addEventListener("click",N),()=>{window.removeEventListener("click",N)}}),[f,N]),(0,n.useEffect)((()=>(window.addEventListener("keydown",V),()=>{window.removeEventListener("keydown",V)})),[V]);const L=(0,n.useRef)(v);(0,n.useEffect)((()=>{h&&!L.current&&v?B():!v&&L.current&&E(),L.current=v}),[v,h,B,E,w.isMobile]);const{WindowSizeStore:O}=S,[Z]=(0,o(142735).VK)((()=>[O.state.paddingTopCSS,O.state.paddingLeftCSS,O.state.paddingRightCSS]),[O]),j=(0,o(409318).L)(),K=(0,o(846550).yK)((e=>({mobilePopupStyle:{borderRadius:12,backgroundColor:e.surface.wash,...j&&{height:"var(--full-viewport-height)",paddingTop:Z}}})),[Z,j]),z={...(0,o(164079).Z)({onMouseEnter:U,onClick:D},p),showExtensionArrow:!0};return(0,l.jsx)(o(94967).Z,{debugName:"ExtensionMenuItem",capture:v,onEnter:k?void 0:B,onRight:B,onLeft:k?E:void 0,onEsc:k?E:void 0,children:(0,l.jsx)(o(967092).ZP,{popupType:w.isPhone?j?a().k.BottomSheet:a().k.SlideUp:a().k.Popup,open:k,origin:c(z,t),placementToOrigin:_??r().Placement.Right,alignmentToOrigin:b??r().Alignment.Center,originGap:0,disableMouseCapture:!0,preventBlockRenderQueueOnEnter:!0,preventScaleTransition:!w.isPhone,preventCaptureEsc:!0,ref:C,render:()=>(0,l.jsxs)(l.Fragment,{children:[x.current&&(0,l.jsx)(m,{el:x.current}),(0,l.jsx)("div",{ref:x,style:{height:"100%"},children:d({onMouseEnter:F},{close:E})})]}),style:{overflow:"visible",...w.isPhone&&K.mobilePopupStyle},trapFocus:!0,onDismiss:R})})}const g=n.forwardRef(f)},989560:(e,t,o)=>{o.d(t,{Z:()=>X});o(267602),o(470928);var n=o(667294),i=()=>o(219727),r=()=>o(142735),a=()=>o(846550),s=()=>o(235484),l=()=>o(788860),c=()=>o(661727),d=()=>o(568017),u=()=>o(707513),p=()=>o(286310),m=()=>o(388915),f=()=>o(453999),g=()=>o(269299),v=()=>o(423402),h=()=>o(677559);const _=new(h().Ss)("ExternalObjectInstanceBlockMenu",(()=>Promise.all([o.e(62743),o.e(44832),o.e(69197),o.e(47509)]).then(o.bind(o,625449)))),b=(0,h().kF)(_,(e=>e.ExternalObjectInstanceBlockMenu));var y=()=>o(763266),S=()=>o(417746),w=()=>o(527278),k=()=>o(615634),I=()=>o(314379),C=()=>o(858856),x=()=>o(315136),T=()=>o(735501),M=()=>o(876822),P=()=>o(138912),A=()=>o(128119),R=()=>o(56424),B=()=>o(154186),E=()=>o(448419),D=()=>o(643051),U=()=>o(92175),F=(o(670560),()=>o(959137)),N=()=>o(308186),V=()=>o(752127),L=()=>o(352230),O=()=>o(148126),Z=()=>o(938183),j=()=>o(739479),K=()=>o(827973),z=()=>o(198829),H=()=>o(255577),q=()=>o(388284),W=o(785893);const G=(0,l().vU)({copiedDebuggingInfo:{id:"externalObjectBlock.errorDropdown.copiedDebuggingInfo",defaultMessage:"Copied to clipboard."}});function $(e){const{state:t,store:o,onUpdate:n,onReplace:c,onAuthenticate:u,onRemove:m,description:f,statusCode:g,errorDescription:v,isInlineMenu:h}=e,{userHasBotForIntegration:_,pattern:b,integration:y,botIds:S,originalUrl:w}=t,k=(0,i().Fy)(),I=(0,i().O7)(),C=(0,a().yK)((e=>({menuIcon:{fill:e.regularIconColor,width:16},redThemeColor:(0,d().fi)("red",e)})),[]),T=(0,r().VK)((()=>{var e;return Boolean(null===(e=M().default.state.currentSpaceStore)||void 0===e?void 0:e.canEdit())}),[]),P=(0,r().VK)((()=>o.isExternalObjectInstanceBlockStore()),[o]),A=(0,r().VK)((()=>o.isExternalObjectInstancePageBlockStore()),[o]);let R;R=k.isMobile?{menuType:L().o.ActionSheet}:{menuType:L().o.Popup,minWidth:220};const B={key:"learn",render:e=>(0,W.jsx)(K().Z,{title:(0,W.jsx)(l()._H,{defaultMessage:"Learn more about this error",id:"unfurling.errorOptions.learnMore.title"}),icon:(0,Z().u)(C.menuIcon),...e}),action:()=>{N().vC({items:[{label:(0,W.jsx)(l()._H,{id:"externalObjectInstanceBlockErrorDropdown.dialogItem.reviewGuide",defaultMessage:"View guide"}),color:"blue",onAccept:()=>{V().D({environment:I,url:(0,O().UY)("guides.unfurling")}),p().SC(I,{integrationId:y.id,entity:null==b?void 0:b.name,statusCode:g})}},{label:(0,W.jsx)(l()._H,{id:"externalObjectInstanceBlockErrorDropdown.dialogItem.copyDebugData",defaultMessage:"Copy debugging information"}),color:void 0,onAccept:async()=>{const e=await F().F.clipboardActions.load(),t={statusCode:g,integrationId:y.id,botIds:S,url:w,debugMessage:v};e.copyString({environment:I,stringValue:JSON.stringify(t,null,2),copiedMessage:G.copiedDebuggingInfo})}}],showCancel:!0,keepFocus:!1,message:f})}},E={key:"remove",render:e=>(0,W.jsx)(K().Z,{title:(0,W.jsx)(l()._H,{defaultMessage:"Remove",id:"unfurling.errorOptions.removeAction.title"}),style:{color:C.redThemeColor.color},icon:(0,j().y)({fill:C.redThemeColor.fill,width:16}),...e}),action:()=>{null==m||m()}},U={key:"replace",render:e=>(0,W.jsx)(K().Z,{title:(0,W.jsx)(l()._H,{defaultMessage:"Change URL",id:"unfurling.errorOptions.replace.title"}),icon:(0,x().b)(C.menuIcon),...e}),action:()=>{c()}},$={key:"update",render:e=>(0,W.jsx)(K().Z,{title:(0,W.jsx)(l()._H,{defaultMessage:"Try again",id:"unfurling.errorOptions.tryAgainAction.title"}),icon:(0,x().b)(C.menuIcon),...e}),action:()=>{null==n||n()}},Q={key:"authenticate",render:e=>(0,W.jsx)(K().Z,{title:_?401===g||439===g?(0,W.jsx)(l()._H,{defaultMessage:"Re-authenticate account",id:"unfurling.errorOptions.authenticateAction.reAuthenticate.title"}):h?(0,W.jsx)(l()._H,{defaultMessage:"Connect a different account",id:"unfurling.errorOptions.authenticateAction.alreadyAuthenticatedCompact.title"}):(0,W.jsx)(l()._H,{defaultMessage:"Connect a different {integration} account",id:"unfurling.errorOptions.authenticateAction.alreadyAuthenticated.title",values:{integration:y.name}}):(0,W.jsx)(l()._H,{defaultMessage:"Connect {integration} account",id:"unfurling.errorOptions.authenticateAction.notAuthenticated.title",values:{integration:y.name}}),icon:(0,W.jsx)(D().Z,{type:"image_url",imageURL:y.icon,size:16}),...e}),action:()=>{null==u||u()}},Y=[B];return T&&("error"===t.type?Y.push(U):("placeholder"===t.type?Y.push(U):Y.push($),(P||A&&[s().f3,s().mQ].includes(y.id))&&Y.push(Q))),m&&Y.push(E),(0,W.jsx)(z().Z,{...R,children:(0,W.jsx)(H().Z,{type:H().i.Vertical,initialFocus:h?void 0:0,sections:[{key:0,render:e=>(0,W.jsx)(q().Z,{...e,disableDesktopPadding:h,title:(0,W.jsx)(l()._H,{defaultMessage:"Try these options",id:"unfurling.errorOptions.menuTitle"})}),items:Y}]})})}function Q(e){const t=(0,r().VK)((()=>{var t;return e.isCollectionView()?null===(t=e.getCollectionStore())||void 0===t||null===(t=t.getFormat().error)||void 0===t?void 0:t.status_code:e.getFormatStore().getKeyStore("error").getKeyStore("status_code").getValue()}),[e]),o=(0,r().VK)((()=>{let t;var o;e.isCollectionView()?t=null===(o=e.getCollectionStore())||void 0===o?void 0:o.getFormat().bot_id:t=e.getFormat().bot_id;const n=P().default.bots.state.find((e=>e.id===t));if(n)return(0,s().s9)(n.integration_id)}),[e]),{message:i,description:a}=n.useMemo((()=>(0,y().xt)(t,o)),[t,o]);return{statusCode:t,message:i,description:a}}function Y(e){const{onAuthenticate:t,onReplace:o,onUpdate:n,state:i,store:r,onRemove:s,style:l}=e,c=(0,a().yK)((e=>({orangeThemeColor:(0,d().fi)("orange",e),dropdownIcon:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]),{statusCode:u,message:p,description:m}=Q(r);return(0,W.jsx)(E().ZP,{popupType:E().Z4.Popup,originGap:4,renderOrigin:e=>439!==u?(0,W.jsxs)(U().Z,{style:l,icon:e=>(0,T().t)({...e,fill:c.orangeThemeColor.fill}),...e,children:[(0,W.jsx)("span",{children:w().Z.formatMessage(p)}),(0,k().i)(c.dropdownIcon)]}):(0,W.jsx)(U().Z,{style:l,...e,children:(0,k().i)(c.dropdownIcon)}),render:e=>(0,W.jsx)($,{state:i,store:r,onUpdate:n?()=>{n(),e.close()}:void 0,onAuthenticate:t?()=>{t(),e.close()}:void 0,onReplace:()=>{o(),e.close()},onRemove:s?()=>{s(),e.close()}:void 0,statusCode:u,errorDescription:m.description,description:w().Z.formatMessage(m,{integrationName:i.integration.name,statusCode:u})})})}function J(e){const{onAuthenticate:t,onReplace:o,onUpdate:n,state:i,store:r,onRemove:s}=e,l=(0,a().yK)((e=>({orangeThemeColor:(0,d().fi)("orange",e)})),[]),{statusCode:c,message:p,description:m}=Q(r);return(0,W.jsxs)("div",{style:{alignSelf:"stretch"},children:[(0,W.jsxs)("div",{style:{display:"flex",alignItems:"center",fontSize:u().JB.UIRegular.desktop,fontWeight:u().Ue.medium,marginBottom:4},children:[(0,T().t)({width:18,height:18,marginRight:6,fill:l.orangeThemeColor.fill}),(0,W.jsx)("span",{children:w().Z.formatMessage(p)})]}),(0,W.jsx)("div",{style:{margin:"0 -14px"},children:(0,W.jsx)($,{state:i,store:r,onUpdate:n,onAuthenticate:t,onReplace:o,onRemove:s,statusCode:c,errorDescription:m.description,description:w().Z.formatMessage(m,{integrationName:i.integration.name,statusCode:c}),isInlineMenu:!0})})]})}const X=function(e){let{store:t,canEdit:n,forceActionForUIDoc:s,postActionCallback:d,openPlaceholderMenu:u,buttonStyle:m,isHoverPreview:v,renderDefaultAction:h}=e;const _=(0,a().Fg)(),b=(0,i().O7)(),w=(0,r().VK)((()=>(0,S()._l)({store:t,isInDarkMode:ee(b),canEdit:n,currentUserId:b.currentUser.id,showAction:s})),[t,b,n,s]),k=(0,r().VK)((()=>ee(b)),[b]),I=(0,o(591914).r_)(),C=(0,r().VK)((()=>Boolean(null==I?void 0:I.isMember())),[I]),x=(0,r().VK)((()=>Boolean(null==I?void 0:I.isWorkspaceOwner())),[I]),T=(0,r().VK)((()=>{var e;return null===(e=M().default.state.currentSpaceStore)||void 0===e?void 0:e.getBotSettingsStore().getValue()}),[]);if(!w)return null;const{integration:P,action:A}=w,{r:R,g:B,b:E}=P.accentColor,F=`rgba(${R},${B},${E},${k?.6:1})`,N=x||(0,o(657120).hU)({spaceBotSettings:T,integrationId:P.id,env:"production"}),V={state:w,store:t,onUpdate:()=>{ne({from:"external_object_instance_block_error_dropdown"},t,b,d)},onAuthenticate:()=>{re({from:"external_object_instance_block_error_dropdown"},b,t,w,d)},onReplace:()=>{null==u||u()}},L={...V,onRemove:()=>{!function(e,t,o,n){var i;g().createAndCommit({userAction:"ExternalObjectInstanceAction.handleRemove",environment:e,canUndo:!0,perform:o=>{f().Cl({environment:e,blocks:[t],transaction:o})}}),p().oQ(e,{integrationId:o.integration.id,entity:null===(i=o.pattern)||void 0===i?void 0:i.name}),null==n||n()}(b,t,w,d)}};return(0,W.jsxs)(W.Fragment,{children:["authenticate"===A&&(0,y().sw)(b)&&C&&N&&(0,W.jsx)(U().Z,{icon:e=>(0,W.jsx)(D().Z,{type:"image_url",imageURL:P.accentIcon,size:20,style:{...e,width:16,height:16,marginRight:8,marginLeft:2}}),onClick:()=>re({from:"external_object_instance_block"},b,t,w,d),style:{...te(_,m),background:F,fontSize:14,height:32,paddingRight:12,color:k?_.regularTextColor:_.regularInvertedTextColor},hoveredStyle:{background:(0,c()._j)(F,.4)},pressedStyle:{background:(0,c()._j)(F,.9)},children:(0,W.jsx)(l()._H,{defaultMessage:"Connect to {integration} to update",id:"unfurling.authenticateButton.title",values:{integration:w.integration.name}})}),"update"===A&&(0,W.jsx)(ie,{store:t,postActionCallback:d,buttonStyle:m,isHoverPreview:v}),"error"===A&&(v?(0,W.jsx)(J,{...V}):(0,W.jsx)(Y,{...L,style:te(_,m)})),!A&&h?(0,W.jsx)(oe,{renderDefaultAction:h,buttonStyle:m,store:t}):null]})};function ee(e){return"dark"===e.ThemeStore.state.mode}function te(e,t){return{marginRight:4,color:e.mediumTextColor,...t}}function oe(e){let{renderDefaultAction:t,buttonStyle:o,store:n}=e;const r=(0,a().Fg)(),s=(0,i().O7)(),{isMobile:c}=s.device;return(0,W.jsx)(E().ZP,{popupType:c?E().Z4.SlideUp:E().Z4.Popup,renderOrigin:e=>(0,W.jsx)(B().Z,{...e,mobileFeedback:c,style:{display:"flex",alignItems:"center",justifyContent:"center",width:c?36:28,height:c?36:28,borderRadius:4,flexShrink:0,opacity:"shown"===t?1:0,...te(r,o)},children:(0,I().o)({width:c?18:14,color:r.mediumIconColor})}),placementToOrigin:A().Iw.Bottom,render:e=>(0,W.jsx)(b,{titleForReloadMenuOption:(0,W.jsx)(l()._H,{id:"linkPreview.reload",defaultMessage:"Reload preview"}),store:n,onAccept:()=>e.close(),extraSecondaryItemKey:"preview_to_mention"})})}function ne(e,t,o,n){var i;const{from:r}=e,a=null===(i=M().default.state.currentSpaceStore)||void 0===i?void 0:i.id;a&&(v().qK({environment:o,from:r,store:t,spaceId:a,bypassCache:"external_object_instance_block_error_dropdown"===r}),null==n||n())}function ie(e){let{store:t,postActionCallback:o,buttonStyle:n,isHoverPreview:r}=e;const s=(0,a().Fg)(),c=(0,i().O7)(),d=(0,W.jsx)(U().Z,{onClick:()=>ne({from:"external_object_instance_block"},t,c,o),style:te(s,n),icon:e=>(0,x().b)({...e}),children:(0,W.jsx)(l()._H,{defaultMessage:"Update",id:"unfurling.updateButton.title"})});return r?(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)("div",{style:{display:"flex",alignItems:"center",fontSize:u().JB.UIRegular.desktop,marginBottom:4},children:[(0,C().D)({width:18,height:18,marginRight:6}),(0,W.jsx)("span",{children:(0,W.jsx)(l()._H,{defaultMessage:"This link preview is out-of-date.",id:"unfurling.updateButton.header"})})]}),d]}):d}function re(e,t,o,n,i){var r;const{from:a}=e,s=n.originalUrl,{currentSpaceStore:l}=M().default.state;if(!l)return;const c=null===(r=(0,S().GQ)(s,l.id))||void 0===r?void 0:r.integration;c&&s&&(m().hM({environment:t,integration:c,spaceId:l.id,unfurlUrl:s,externalObjectInstanceBlockId:o.id,from:a}),R().Z.reset(),null==i||i())}},311598:(e,t,o)=>{o.d(t,{Z:()=>D});var n=o(667294),i=()=>o(219727),r=()=>o(142735),a=()=>o(696459),s=()=>o(423402),l=()=>o(417746),c=()=>o(480089);class d extends(()=>o(263184))().default{getInitialState(){return{error:!1,loading:!1}}}const u=d;var p=()=>o(58836),m=()=>o(846550),f=()=>o(491927),g=(o(241792),()=>o(995867)),v=()=>o(830968),h=()=>o(707513),_=()=>o(677559);const b=new(_().Ss)("TooltipOnSlackEmbed",(async()=>await Promise.all([o.e(62743),o.e(52774),o.e(44832),o.e(90698),o.e(84885),o.e(37358),o.e(5242),o.e(7312),o.e(90424),o.e(81580),o.e(84325),o.e(31189),o.e(69343),o.e(46293),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(46616),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63707),o.e(86609),o.e(91253),o.e(4642),o.e(5006),o.e(6612),o.e(61171),o.e(23179),o.e(75377),o.e(31020),o.e(2942),o.e(73682),o.e(58591),o.e(54803),o.e(1953),o.e(10216),o.e(58565),o.e(69197),o.e(42055),o.e(38739),o.e(44751),o.e(81567),o.e(63257),o.e(34291),o.e(1913),o.e(56054),o.e(95076),o.e(82658),o.e(77793)]).then(o.bind(o,534469)))),y=(0,_().kF)(b,(e=>e.TooltipOnSlackEmbed));var S=()=>o(485569),w=()=>o(643051),k=()=>o(729775),I=o(785893);const C=n.forwardRef((function(e,t){var s;const{state:d,store:u,style:p,externalObjectTokenStore:_,canEdit:b,forceActionForUIDoc:w,onClick:C,showDefaultAction:P}=e,{originalUrl:A,renderConfig:R,integration:B,updating:E,status_code:D}=d,U=(0,i().O7)(),F=(0,n.useRef)(null),N="placeholder"===d.type,V="error"===d.type,L=(0,r().VK)((()=>A&&(0,l().pI)(A,u.pointer.spaceId)),[u.pointer,A]),{botId:O,externalObjectId:Z}=(0,r().VK)((()=>{const e=u.getFormat();return{botId:(null==e?void 0:e.bot_id)||"",externalObjectId:(null==e?void 0:e.external_object_id)||""}}),[u]),j=(0,r().VK)((()=>o(878797).default.isVisible("ai_slack_qna_embed_tooltip")),[]),K=(0,r().VK)((()=>_.state.loading),[_]);(0,n.useEffect)((()=>{f().K9(U,{integrationName:B.name,integrationId:B.id,botId:O,externalObjectId:Z})}),[B,O,Z,U]);const z=(0,c().rv)(u),H=(0,m().yK)((e=>{const t=!(!Boolean(R.previewAttributes)||!R.previewAttributes)&&(0,a().Of)(R.previewAttributes);return{linkBox:{flexGrow:1,minWidth:0,...(N||V)&&{background:e.embedPlaceholderBackground}},linkBoxInner:{display:"flex",alignItems:"center",border:`1px solid ${e.tableDividerColor}`,borderRadius:t?"0px 0px 4px 4px":4,borderLeft:t?"none":`1px solid ${e.tableDividerColor}`,borderRight:t?"none":`1px solid ${e.tableDividerColor}`,padding:"8px 12px",...z,...p},title:{fontWeight:h().Ue.medium,...h().Yu,color:e.regularTextColor},subHeaderContainer:{display:"flex",alignItems:"center",color:e.mediumTextColor,fontSize:12}}}),[N,V,R.previewAttributes,z,p]);return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(k().Z,{style:H.linkBox,innerStyle:H.linkBoxInner,...N||V?{onClick:C}:{href:L,external:!0},children:[(0,I.jsx)("div",{style:{display:"flex",alignSelf:"start",height:32,width:32,marginRight:12,marginLeft:4,marginTop:3,marginBottom:3,position:"relative"},children:(0,I.jsx)(x,{renderConfig:R,integrationIcon:B.icon})}),(0,I.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",flexGrow:1,flexShrink:1,overflow:"hidden"},children:[(0,I.jsxs)("div",{style:{display:"flex",alignItems:"baseline",fontSize:14},children:[(0,g().Z)((null===(s=R.headerAttributes)||void 0===s?void 0:s.map(((e,t)=>(0,I.jsx)(S().ox,{...e,store:u,style:0===t?H.title:{}},`attribute-${t}`))))||[],(e=>(0,I.jsx)("span",{style:{marginRight:6}},`spacer-${e}`))),(E||439===D||K)&&(0,I.jsx)(o(312578).Z,{style:{marginLeft:6}})]}),R.bodyAttribute&&((0,v().O0)(R.bodyAttribute)?(0,I.jsx)(S().t9,{attribute:R.bodyAttribute}):(0,I.jsx)(S().hx,{attribute:R.bodyAttribute,store:u})),(0,I.jsxs)("div",{style:H.subHeaderContainer,children:[R.subheaderIcon&&(0,I.jsx)(T,{attribute:R.subheaderIcon}),R.subheaderAttributes&&(0,g().Z)(R.subheaderAttributes.map((e=>(0,I.jsx)(M,{attributeConfig:e,store:u},e.attribute.id))),(e=>(0,I.jsx)("span",{style:{marginLeft:3,marginRight:3},children:"â€¢"},e)))]})]}),(0,I.jsx)(o(989560).Z,{canEdit:b,forceActionForUIDoc:w,store:u,renderDefaultAction:P?"shown":"invisible",buttonStyle:R.bodyAttribute?{alignSelf:"flex-start",marginTop:4}:{marginLeft:4},openPlaceholderMenu:C})]}),(0,I.jsx)(o(577741).g,{shouldShow:j,calloutId:"ai_slack_qna_embed_tooltip",children:(0,I.jsx)(y,{origin:F,originalUrl:A})})]})}));function x(e){let{renderConfig:t,integrationIcon:n}=e;const i=(0,m().Fg)(),r=o(513670).mN(t.icons||[],(e=>`${e.type}:${e.values[0].toString()}`));return r.length>=2?(0,I.jsxs)("div",{style:{width:32,height:32},children:[(0,I.jsx)(S().lf,{attribute:r[0],isSmall:!0}),(0,I.jsx)(S().lf,{attribute:r[1],isSmall:!0,style:{position:"absolute",bottom:0,right:2}}),(0,I.jsx)(w().Z,{type:"image_url",imageURL:n,size:16,style:{position:"absolute",bottom:-3,right:-3},imageStyle:P(i)})]}):1===r.length?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(S().lf,{attribute:r[0],isSmall:!1}),(0,I.jsx)(w().Z,{type:"image_url",imageURL:n,size:16,style:{position:"absolute",bottom:-2,right:-2},imageStyle:P(i)})]}):(0,I.jsx)(w().Z,{type:"image_url",imageURL:n,size:38})}function T(e){let{attribute:t}=e;const n=(0,m().Fg)();if((0,v().li)(t)){const e=t.values[0];return(0,I.jsx)(o(135499).Z,{isAuthenticated:!1,url:e,width:32,render:(e,t)=>(0,I.jsx)(o(518242).ZP,{src:t,height:12,placeholderLoadedStyle:{width:12,height:12,marginRight:4}})})}if((0,v().hW)(t)){const e=t.values[0],i=e?`rgb(${e.r},${e.g},${e.b})`:"gray",{colorName:r,shade:a}=(0,o(568017).lL)(i);return(0,I.jsx)("div",{style:{width:12,height:12,marginRight:4,background:n.accentColors[r][a],borderRadius:4,flexShrink:0}})}return null}function M(e){let{attributeConfig:t,store:o}=e;return(0,I.jsx)(S().ox,{...t,store:o})}function P(e){return{filter:`\n            drop-shadow(0px 0px 1px ${e.contentBackground})\n            drop-shadow(0px 0px 1px ${e.contentBackground})\n            drop-shadow(0px 0px 1px ${e.contentBackground})\n        `}}const A=n.forwardRef((function(e,t){const{attributes:s,state:l,store:c,blockResizerStore:d,externalObjectTokenStore:u,canEdit:p,forceActionForUIDoc:g,onClick:v,showDefaultAction:h}=e,_=s[0],{values:b,mimeType:y}=_,S=b[0],w=(0,i().O7)(),k=(0,r().VK)((()=>c.isExternalObjectInstanceBlockStore()?c:void 0),[c]),{botId:x,externalObjectId:T}=(0,r().VK)((()=>{const e=c.getFormat();return{botId:(null==e?void 0:e.bot_id)||"",externalObjectId:(null==e?void 0:e.external_object_id)||""}}),[c]);(0,n.useEffect)((()=>{f().K9(w,{integrationName:l.integration.name,integrationId:l.integration.id,botId:x,externalObjectId:T})}),[l.integration,x,T,w]);const M=(0,m().yK)((e=>({container:{overflow:"hidden",borderRadius:6,border:`1px solid ${e.tableDividerColor}`,borderBottom:void 0,position:"relative"}})),[]);let P;"image/*"===y?P="image":"audio/*"===y?P="audio":"video/*"===y?P="video":"application/pdf"===y?P="pdf":"text/html"===y?P="embed":(0,a().t1)(y);const A="image"===P||"pdf"===P||"embed"===P;return k?(0,I.jsx)("div",{style:M.container,children:(0,I.jsx)(o(904912).ZP,{store:k,source:S,showExpandButton:A,mediaType:P,disabled:!1,preserveScale:"image"===P,blockResizerStore:d,contentBelowSource:(0,I.jsx)(C,{state:l,store:c,canEdit:p,externalObjectTokenStore:u,forceActionForUIDoc:g,ref:t,onClick:v,showDefaultAction:h})})}):null}));function R(e){const{originalUrl:t,store:o}=e,n=(0,c().rv)(o),i=(0,m().yK)((e=>({linkBox:{display:"flex",alignItems:"center",border:`1px solid ${e.tableDividerColor}`,borderRadius:4,borderLeft:`1px solid ${e.tableDividerColor}`,borderRight:`1px solid ${e.tableDividerColor}`,padding:"8px 12px",...n}})),[n]);return(0,I.jsxs)(k().Z,{href:t,external:!0,style:{flexGrow:1,minWidth:0},innerStyle:i.linkBox,children:[(0,I.jsx)(B,{style:{width:38,height:38}}),(0,I.jsxs)("div",{style:{display:"flex",flexDirection:"column",flexGrow:1},children:[(0,I.jsx)(B,{style:{width:"50%",height:14,margin:4}}),(0,I.jsx)(B,{style:{width:"40%",height:12,margin:4}})]})]})}function B(e){let{style:t}=e;const o=(0,m().yK)((e=>({container:{overflow:"hidden",position:"relative",background:e.selectLightGray[30],...t},shimmerDiv:{position:"absolute",height:"100%",width:"100%",zIndex:1,animation:"shimmer 1s infinite",background:`linear-gradient(to right, ${e.selectLightGray[30]} 0%, ${e.selectLightGray[50]} 20%, ${e.selectLightGray[30]} 40%, ${e.selectLightGray[30]} 100%)`}})),[t]);return(0,I.jsx)("div",{style:o.container,children:(0,I.jsx)("div",{style:o.shimmerDiv})})}function E(e,t){const{store:d}=e,m=(0,n.useRef)(null),f=(0,i().O7)(),g=(0,c().PE)(d,e.disabled),[v,h]=(0,n.useState)(!1),_=v||f.device.isMobile,b=(0,r().qz)(void 0,u),y=(0,r().qz)(e.blockResizerStore,o(803820).Z),S=(0,n.useCallback)((()=>{h(!0)}),[]),w=(0,n.useCallback)((()=>{h(!1)}),[]),k=(0,r().VK)((()=>(0,l()._l)({store:d,isInDarkMode:U(f),canEdit:g,currentUserId:f.currentUser.id,showAction:e.forceActionForUIDoc})),[g,f,e.forceActionForUIDoc,d],{useDeepEqual:!0}),x=(0,r().VK)((()=>(0,l().y6)(d)),[d]),T=(0,n.useCallback)((()=>{if("placeholder"===(null==k?void 0:k.type)||"error"===(null==k?void 0:k.type)){const e=m.current;if(e&&e instanceof Element)return e}}),[k]),M=(0,n.useCallback)((()=>{const e=T();e&&function(e,t,o,n,i){const r=(0,l().y6)(o);s().os({originRect:e.getBoundingClientRect(),environment:t,externalObjectInstanceBlockStore:o,placeholderIntegrationId:null==r?void 0:r.integration_id,integration:null==i?void 0:i.integration,externalObjectTokenStore:n})}(e,f,d,b,k)}),[f,b,T,d,k]),P=k?"error"!==k.type||null!=x&&x.integration_id?(0,I.jsx)(p().p,{allowSelectionWithin:!0,ref:m,onMouseEnter:S,onMouseLeave:w,children:k.renderConfig.previewAttributes&&(0,a().Of)(k.renderConfig.previewAttributes)?(0,I.jsx)(A,{attributes:k.renderConfig.previewAttributes,blockResizerStore:y,canEdit:g,externalObjectTokenStore:b,state:k,store:d,forceActionForUIDoc:e.forceActionForUIDoc,onClick:M,ref:m,showDefaultAction:_}):(0,I.jsx)(C,{canEdit:g,externalObjectTokenStore:b,state:k,store:d,forceActionForUIDoc:e.forceActionForUIDoc,style:e.style,onClick:M,ref:m,showDefaultAction:_})}):(0,I.jsx)(p().p,{allowSelectionWithin:!0,ref:m,children:(0,I.jsx)(R,{store:d,style:e.style,originalUrl:k.originalUrl})}):(0,I.jsx)(p().p,{allowSelectionWithin:!0,ref:m,children:(0,I.jsx)(R,{store:d,style:e.style,originalUrl:void 0})});return(0,c().ez)(d,t,(0,n.useMemo)((()=>({renderedType:"external_object_instance",getBlockStore:()=>d,getNode:()=>m.current,handleCreated:M})),[M,d]),P)}const D=n.memo(n.forwardRef(E),o(632314).Z);function U(e){return"dark"===e.ThemeStore.state.mode}},125519:(e,t,o)=>{o.d(t,{S:()=>B,Z:()=>D});var n=o(667294),i=()=>o(219727),r=()=>o(142735),a=()=>o(846550),s=()=>o(494488),l=()=>o(225339),c=()=>o(801812),d=()=>o(955620),u=()=>o(788860),p=()=>o(707513),m=()=>o(286310),f=()=>o(426102),g=()=>o(762478),v=()=>o(269299),h=()=>o(433989),_=()=>o(247724),b=()=>o(733193),y=()=>o(480089),S=()=>o(644248),w=()=>o(397643),k=()=>o(920991),I=()=>o(79555),C=()=>o(37399),x=()=>o(154186),T=()=>o(67961),M=()=>o(627990),P=o(785893);const A=(0,u().vU)({fileTitle:{defaultMessage:"File",id:"fileBlock.fileTab.title"},embedButtonText:{defaultMessage:"Embed link",id:"fileBlock.embedButton.label"},embedFilePrompt:{defaultMessage:"Paste a file linkâ€¦",id:"fileBlock.linkPrompt.placeholder"},embedCaption:{defaultMessage:"Works with links of PDFs, Google Drive, Google Maps, CodePenâ€¦",id:"fileBlock.linkPrompt.caption"}});function R(e,t){var a,s;const c=Boolean(e.commentProps),p=null===(a=e.commentProps)||void 0===a?void 0:a.onRemoveBlockFromComment,_=(0,u().YB)(),S=(0,i().O7)(),x=(0,i().Fy)(),T=(0,n.useRef)(null),M=(0,n.useId)(),[R,D]=(0,n.useState)(!1),U=(0,y().PE)(e.store,e.disabled),F=(0,y().rv)(e.store),N=(0,r().VK)((()=>{const t=e.store.getProperties(),o=t&&t.source,n=d().QaF(o),{display_source:i}=e.store.getFormat();return i||n}),[e.store]),V=(0,r().VK)((()=>k().default.getKeyState(k().default.getBlockKey(e.store.id))),[e.store.id]),L=x.isMobile||R,O=(0,r().VK)((()=>e.store.getProperties()),[e.store]),Z=(0,n.useMemo)((()=>d().Jcv(O&&O.title)),[O]),j=(0,n.useMemo)((()=>d().Jcv(O&&O.size)),[O]),K=L&&U&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(E,{fileBlockStore:e.store}),(0,P.jsx)(I().Z,{style:{marginRight:4},store:e.store,fadeIn:!0})]}),z=(0,n.useCallback)((()=>{const t=e.store.getPropertyStore("caption");o(879952).eP({environment:S,store:e.store}),o(990966).setSelectionAtEnd({store:t})}),[S,e.store]),H=(0,n.useCallback)((t=>{const o=t[0];v().createAndCommit({userAction:"FileBlock.handleUpload",environment:S,canUndo:!0,perform:t=>{f().v({environment:S,store:e.store,source:void 0,name:void 0,size:void 0,transaction:t})}}),m().re(S,{source:"upload",file:o.name}),f().c({environment:S,store:e.store,file:o})}),[S,e.store]),q=(0,n.useCallback)((t=>{t.file&&f().c({environment:S,store:e.store,file:t.file})}),[S,e.store]),W=(0,n.useCallback)((()=>{const t=T.current;if(U&&t){const o=t.getBoundingClientRect();g().$(S,{originRect:o,originGap:0,isSmallWidth:!0,showArrow:!0,title:_.formatMessage(A.fileTitle),currentTab:"file",tabs:[{type:"file",fileUpload:!0,imageUpload:x.isAndroid,videoUpload:x.isAndroid,onUpload:H},{type:"embed",buttonText:_.formatMessage(A.embedButtonText),inputPlaceholder:_.formatMessage(A.embedFilePrompt),caption:_.formatMessage(A.embedCaption),onChange:t=>{g().Z(),v().createAndCommit({userAction:"FileBlock.handleOpenMenu",environment:S,canUndo:!0,perform:o=>{f().v({environment:S,store:e.store,source:t,name:void 0,size:void 0,transaction:o})}}),m().re(S,{file:t,source:"embed"}),m().bO(S,{pastedText:t,source:"file_block_menu"})}}]})}}),[U,x.isAndroid,S,H,_,e.store]),G=(0,n.useCallback)((()=>{o(544607).qL(S,{store:e.store,from:"embedded_block_click"})}),[S,e.store]),$=(0,n.useMemo)((()=>({flexGrow:1,minWidth:0,borderRadius:4,...o(513670).CE(F,["fontSize","lineHeight"])})),[F]),Q=(0,P.jsx)("div",{role:"figure","aria-labelledby":M,ref:T,children:(0,P.jsxs)(h().Q,{type:b().jo,dropTargetKey:`file-block-${e.store.id}`,onDropFile:U?q:()=>{},children:[(0,P.jsxs)("div",{onMouseMove:()=>D(!0),onMouseLeave:()=>D(!1),style:{display:"flex"},children:[c?(0,P.jsx)(o(874018).tG,{title:l().rF({title:Z,source:N}),source:N,size:j,store:e.store,onClick:G,showBlockActionMenuButton:!(null!==(s=e.commentProps)&&void 0!==s&&s.shouldHideBlockActionMenu)}):(0,P.jsx)(B,{title:Z,url:N,size:j,onClick:G,right:K,style:$}),(0,P.jsx)(C().Z,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store})]}),(0,P.jsx)(o(316843).N,{store:e.store,captionAriaId:M,disabled:e.disabled})]})}),Y=(0,P.jsx)("div",{ref:T,children:(0,P.jsx)(h().Q,{type:b().jo,dropTargetKey:`file-block-${e.store.id}`,onDropFile:U?q:()=>{},children:(0,P.jsxs)("div",{onMouseMove:()=>D(!0),onMouseLeave:()=>D(!1),style:{display:"flex"},children:[(0,P.jsx)(o(995047).Z,{disabled:e.disabled,iconSvg:w().R,shouldHideRight:!L,right:U&&(0,P.jsx)(I().Z,{store:e.store,fadeIn:!1}),isLoading:Boolean(V),progressPercent:V?V.progressPercent:0,file:V?V.file:void 0,name:V?V.name:void 0,size:V?V.size:void 0,onClick:W,children:(0,P.jsx)(u()._H,{defaultMessage:"Upload or embed a file",id:"fileBlock.uploadOrEmbed.placeholder"})}),(0,P.jsx)(C().Z,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store})]})})}),J=N?Q:Y;return(0,y().ez)(e.store,t,(0,n.useMemo)((()=>({renderedType:"file",getNode:()=>T.current,getBlockStore:()=>e.store,caption:z,handleCreated:W,edit:W,activate:W,replace:W,...p&&{handleRemoveBlockFromComment:()=>p(e.store)}})),[z,W,p,e.store]),J)}function B(e){const{style:t,right:o,title:n,url:i,size:r,onClick:a}=e,c={paddingTop:s().ZD.paddingTop,paddingBottom:s().ZD.paddingBottom,paddingLeft:s().ZD.paddingLeft};return(0,P.jsx)(x().Z,{style:t,onClick:a,children:(0,P.jsx)(M().ZP,{style:c,left:(0,w().R)(),leftStyle:{width:"1.35em",height:"1.35em"},alignment:M().v2.Center,right:o,children:(0,P.jsxs)("div",{style:{display:"flex",alignItems:"baseline"},children:[(0,P.jsx)("div",{style:{...p().Yu},children:l().rF({title:n,source:i})}),r&&(0,P.jsx)(T().Z,{isSmall:!0,style:{marginLeft:6,whiteSpace:"nowrap"},children:r})]})})})}function E(e){const{fileBlockStore:t}=e,[{value:s}]=(0,c().r5)((async()=>{const e=await Promise.resolve().then(o.bind(o,650996));return(await e.assistantDependency.load()).assistantActions}),[]),[l,d]=(0,S().C)(),p=(0,a().yK)((e=>({askAiText:{fontSize:14,color:e.aiPurpleColor,marginRight:4,paddingTop:4,paddingBottom:4,paddingRight:6,paddingLeft:6,borderRadius:6,background:d?e.buttonHoveredBackground:void 0}})),[d]),m=(0,r().VK)((()=>s&&s.isSelectionValidAttachmentSelection([t])),[s,t]),f=(0,i().O7)(),g=(0,n.useCallback)((e=>{s&&(s.initializeSessionFromAttachmentBlockSelection({environment:f,selectedAttachmentStore:t}),e.preventDefault(),e.stopPropagation())}),[s,f,t]);return m?(0,P.jsx)("div",{style:p.askAiText,onClick:g,className:_().JiD,ref:l,children:(0,P.jsx)(u()._H,{defaultMessage:"Ask AI",id:"FileBlock.AssistantChatWithAiTextButton"})}):null}const D=n.memo(n.forwardRef(R),o(632314).Z)},616268:(e,t,o)=>{o.d(t,{Z:()=>m});var n=o(667294),i=()=>o(219727),r=()=>o(142735),a=()=>o(907577),s=()=>o(788860),l=()=>o(465371),c=()=>o(480089),d=o(785893);const u=(0,s().vU)({placeholder:{defaultMessage:"Heading 1",id:"header1Block.placeholder"}});function p(e,t){const p=(0,s().YB)(),m=(0,i().O7)(),f=(0,i().Fy)(),g=(0,n.useRef)(null),v=(0,c().rv)(e.store,!0),h=(0,c().Iy)(e.store),_=(0,r().VK)((()=>e.store.getBlockTitleStore()),[e.store]),b=(0,r().VK)((()=>o(445264).Z.isOpen(e.store.id)&&!e.hideContent),[e.hideContent,e.store.id]),y=(0,r().VK)((()=>Boolean(e.store.getInsertSuggestion())),[e.store]),S=(0,o(540896).O)(),w=(0,o(846550).yK)((t=>{const n=(f.isMobile||e.smallerHeaders?1.5:a().eV)*a().u9,i=f.isMobile||e.smallerHeaders?1.5:a().eV;return{root:{display:"flex",width:"100%",...v},toggle:{...!S&&{height:`${n}em`,marginTop:3}},headerText:{...o(494488).ZD,...!S&&(0,a().DK)({fontSizeValue:i,fontFamily:h}),...S&&{paddingTop:0,paddingBottom:0}},headerTextPlaceholder:{...y?{color:t.text.uiBlueTertiary,WebkitTextFillColor:"initial"}:{WebkitTextFillColor:t.headerBlockPlaceholderTextColor}}}}),[f.isMobile,e.smallerHeaders,v,h,S,y]),k=(0,r().VK)((()=>l().fn(e.store)),[e.store]),I=(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o(345837).Z,{tagName:"h2",disabled:e.disabled,store:_,placeholder:p.formatMessage(u.placeholder),placeholderStyle:w.headerTextPlaceholder,style:w.headerText,pasteBehavior:"block",legacyTransclusionParentStore:e.legacyTransclusionParentStore,inPageFind:o(12512).B3.block_match,renderWhiteSpaceWhenEmptyOnAndroid:!0}),(0,d.jsx)(o(37399).Z,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store,recursivelyLoadAllDiscussions:!b})]});return(0,c().ez)(e.store,t,(0,n.useMemo)((()=>({renderedType:"header",getNode:()=>g.current,getBlockStore:()=>e.store,activate(){l().th(m,e.store,e.hideContent)}})),[m,e.hideContent,e.store]),(0,d.jsx)("div",{ref:g,style:{...w.root,...e.style},children:k?(0,d.jsx)(o(824940).Z,{store:e.store,toggleStyle:w.toggle,childrenStyleWhenToggleable:{display:"flex"},hideContent:e.hideContent,disabled:e.disabled,disableCommentMenu:e.disableCommentMenu,disableHoverMenu:e.disableHoverMenu,disableDrag:e.disableDrag,children:I}):I}))}const m=n.memo(n.forwardRef(p),o(632314).Z)},508181:(e,t,o)=>{o.d(t,{Z:()=>u});o(667294);var n=()=>o(219727),i=()=>o(142735),r=()=>o(846550),a=()=>o(407391),s=()=>o(653457),l=()=>o(827973),c=()=>o(108714),d=o(785893);function u(e){const t=(0,n().O7)();return(0,d.jsx)(c().Z,{href:e.href,external:!0,onClick:()=>a().Fs(t,{from:e.analyticsFrom}),children:(0,d.jsx)(l().Z,{icon:!e.left&&(0,d.jsx)(m,{left:e.left}),title:(0,d.jsx)(p,{title:e.title,left:e.left}),focused:!1})})}function p(e){const t=(0,n().O7)(),o=(0,i().VK)((()=>t.device.isPhone),[t]),a=(0,r().yK)((e=>({title:{fontSize:o?14:12,verticalAlign:1,color:e.lightTextColor}})),[o]);return e.left?(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,d.jsx)("span",{style:{...a.title,marginRight:"auto"},children:e.left}),(0,d.jsx)(m,{left:e.left}),(0,d.jsx)("span",{style:a.title,children:e.title})]}):(0,d.jsx)("span",{style:a.title,children:e.title})}function m(e){let{left:t}=e;const o=(0,r().Fg)(),i=(0,n().MO)();return(0,s().m)({width:i?16:14,fill:o.lightIconColor,marginRight:t?6:0})}},360964:(e,t,o)=>{o.d(t,{Z:()=>l});var n=o(667294),i=()=>o(707513),r=()=>o(653457),a=o(785893);function s(e){let{title:t,href:s,analyticsFrom:l,shouldShrink:c,style:d,buttonStyle:u,iconStyle:p,isBlue:m,onClick:f,onFocus:g,onBlur:v,onMouseDown:h,onMouseEnter:_,onMouseLeave:b,textSize:y,isMobile:S}=e;const w=(0,o(219727).O7)(),k={onFocus:g,onBlur:v,onMouseDown:h,onMouseEnter:_,onMouseLeave:b},I=(0,n.useCallback)((()=>{void 0!==f&&f(),o(407391).Fs(w,{from:l})}),[l,w,f]),C=S?"small"!==y?i().JB.UIRegular.mobile:i().JB.UISmall.mobile:"small"!==y?i().JB.UIRegular.desktop:i().JB.UISmall.desktop;let x="1.2";void 0!==y&&(x=S?"small"!==y?i().Nv.UIRegular.mobile:i().Nv.UISmall.mobile:"small"!==y?i().Nv.UIRegular.desktop:i().Nv.UISmall.desktop);const T=(0,o(846550).yK)((()=>({link:{display:"flex",marginLeft:-6,...d}})),[d]);return(0,a.jsx)(o(108714).Z,{style:T.link,className:"notion-print-ignore",href:s,external:!0,onClick:I,...k,children:t?(0,a.jsx)(o(92175).Z,{icon:r().m,iconStyle:p,isSmall:!0,isBlue:m,isLightGray:!m,shouldShrink:c,style:{...u,fontSize:C,lineHeight:x},children:t}):(0,a.jsx)(o(1910).Z,{icon:r().m,iconStyle:p,isBlue:m,style:u,...k})})}const l=n.memo(s)},733518:(e,t,o)=>{o.d(t,{Z:()=>u});o(313429);var n=o(667294),i=()=>o(546634),r=()=>o(949842),a=o(785893);const s={position:"absolute",left:0,top:0,width:"100%",height:"100%",borderRadius:1};function l(e,t){const r=(0,n.useRef)(null),[s,l]=(0,n.useState)(!1),d=(0,n.useCallback)((()=>{document.activeElement&&document.activeElement===r.current&&document.activeElement.blur()}),[]);(0,n.useEffect)((()=>{d()}));const u=(0,n.useCallback)((()=>{const e=o(960562).default.state.isDragging,t=o(158083).Z.state.isDragging,n=o(557576).default.state.isActive;l(e||t||n)}),[]);return(0,a.jsx)("div",{ref:t,style:e.style,onMouseMove:u,onMouseEnter:u,onMouseLeave:d,children:(0,a.jsx)("div",{style:(0,i().kl)(e),children:(0,a.jsx)(c,{ref:r,...e,disabled:s})})})}const c=n.forwardRef((function(e,t){const{background:l,disabled:c,onContentLoadTimeout:u,renderPreview:p,allow:m,source:f}=e,[g,v]=(0,n.useState)(!1),[h,_]=(0,n.useState)(!1),b=(0,n.useCallback)((e=>{e.preventDefault(),(0,r().ZP)({event:e,context:r().Af.EditorClick,callback:()=>{_(!0)}})}),[]),y=(0,n.useCallback)((()=>{v(!0)}),[]),S=(0,o(846550).yK)((e=>({iframe:{...s,pointerEvents:c?"none":"auto",backgroundColor:l?e.contentBackground:"none"}})),[l,c]);if(function(e,t){if(!window.__webViewTerminatedWhileAppActive)return!1;return!e&&Boolean(t)}(h,p))return(0,a.jsx)("div",{style:{...S.iframe,backgroundColor:"none"},onMouseDown:b,children:null==p?void 0:p()});const w=(0,i().I$)(f);return(0,a.jsx)(o(690122).Z,{innerStyle:{height:"100%",width:"100%"},loaded:g,style:s,spinnerSize:"1em",showSpinnerTimeout:500,children:w&&(0,a.jsx)(d,{ref:t,sourceUrl:w,wrapperStyle:{...S.iframe,backgroundColor:"none"},style:S.iframe,allow:m,onLoad:y,onContentLoadTimeout:u})})})),d=n.forwardRef((function(e,t){const{sourceUrl:i,style:r,allow:s,onLoad:l,onContentLoadTimeout:c,wrapperStyle:d}=e,u=(0,o(219727).O7)(),[p,m]=(0,o(708536).jo)(),f=(0,n.useRef)(void 0),g=(0,o(794623).Z)(t,f),v=(0,n.useRef)(void 0),h=u.device.isElectron?"allow-scripts allow-popups allow-forms allow-same-origin":"allow-scripts allow-popups allow-top-navigation-by-user-activation allow-forms allow-same-origin allow-storage-access-by-user-activation allow-popups-to-escape-sandbox",_=(0,n.useCallback)((()=>{if(o(749826).default.checkGate({gateName:"embed_block_fallback"})){let t;try{t=Boolean(f.current&&f.current.contentWindow&&"about:blank"!==f.current.contentWindow.location.href)}catch(e){if(e instanceof DOMException)return;throw e}t||null==c||c()}}),[c]),b=(0,n.useCallback)((()=>{l(),_()}),[_,l]);return(0,n.useEffect)((()=>(v.current=setTimeout(_,7e3),()=>{clearTimeout(v.current)})),[_]),(0,a.jsx)("div",{ref:p,style:d,children:m&&(0,a.jsx)("iframe",{ref:g,style:r,src:i,frameBorder:"0",onLoad:()=>{clearTimeout(v.current),b()},sandbox:h,allowFullScreen:!0,allow:s})})})),u=n.forwardRef(l)},154293:(e,t,o)=>{o.d(t,{b:()=>f});o(667294);var n=()=>o(219727),i=()=>o(546634),r=()=>o(154439),a=()=>o(846550),s=()=>o(788860),l=()=>o(707513),c=()=>o(26587),d=o(785893);function u(e){let{url:t,metadata:o}=e;const n=(0,a().yK)((e=>({previewWrapper:{display:"flex",flexDirection:"column",border:`1px solid ${e.darkDividerColor}`,borderRadius:"3px",height:"100%"},previewImageArea:{flex:1,backgroundColor:e.embedPlaceholderBackground},previewInfoArea:{padding:"0.75em 1em",backgroundColor:e.regularInvertedTextColor,display:"flex",flexDirection:"column",gap:"0.25em"},previewTitle:{fontWeight:l().Ue.medium,color:e.darkTextColor},previewUrl:{display:"flex",alignItems:"center",gap:"0.75em"},previewUrlText:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:e.lightTextColor},previewUrlFavicon:{width:"1.25em",height:"1.25em"}})),[]),i=null!=o&&o.images&&o.images.length>0?o.images[0].url:void 0;return(0,d.jsxs)("div",{style:n.previewWrapper,children:[(0,d.jsx)("div",{style:n.previewImageArea,children:i?(0,d.jsx)(p,{imageUrl:i}):(0,d.jsx)(m,{})}),(0,d.jsxs)("div",{style:n.previewInfoArea,children:[(null==o?void 0:o.title)&&(0,d.jsx)("div",{style:n.previewTitle,children:o.title}),(0,d.jsxs)("div",{style:n.previewUrl,children:[(null==o?void 0:o.favicon_url)&&(0,d.jsx)("img",{style:n.previewUrlFavicon,src:o.favicon_url}),(0,d.jsx)("div",{style:n.previewUrlText,children:t})]})]})]})}function p(e){let{imageUrl:t}=e;const o=(0,a().yK)((e=>({wrapper:{display:"flex",flexDirection:"column",justifyContent:"flex-end",alignItems:"flex-start",height:"100%",backgroundSize:"cover",backgroundImage:`url(${t})`},pill:{backgroundColor:e.accentColors.gray[800],color:e.accentColors.gray[75],borderRadius:"99em",padding:"0.5em 1em",margin:"1em",display:"flex",alignItems:"center",gap:"0.75em",fontWeight:l().Ue.medium},playButton:{width:"1em",height:"1em",fill:e.accentColors.gray[75]}})),[t]);return(0,d.jsx)("div",{style:o.wrapper,children:(0,d.jsxs)("div",{style:o.pill,children:[(0,c().I)(o.playButton),(0,d.jsx)("span",{children:(0,d.jsx)(s()._H,{defaultMessage:"Load embed",id:"iFramePreview.pillLabel"})})]})})}function m(){const e=(0,a().yK)((e=>({wrapper:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:e.mediumTextColor,height:"100%"},message:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:"0.75em",fontWeight:l().Ue.medium},playButtonWrapper:{backgroundColor:e.mediumTextColor,borderRadius:"2em",width:"2.5em",height:"2.5em",display:"flex",justifyContent:"center",alignItems:"center"},playButton:{marginLeft:"0.1em",width:"1em",height:"1em",fill:e.embedPlaceholderBackground}})),[]);return(0,d.jsx)("div",{style:e.wrapper,children:(0,d.jsxs)("div",{style:e.message,children:[(0,d.jsx)("div",{style:e.playButtonWrapper,children:(0,c().I)(e.playButton)}),(0,d.jsx)("span",{children:(0,d.jsx)(s()._H,{defaultMessage:"Tap to load embed",id:"iFramePreview.imagelessAreaLabel"})})]})})}function f(e){let{source:t}=e;const o=(0,n().O7)(),a={request:t,performRequest:e=>async function(e,t){return(0,i().W4)(t,e)}(e,o),render:(e,o,n)=>(0,d.jsx)(g,{error:e,result:o,ready:n,source:t})};return(0,d.jsx)(r().Z,{...a})}function g(e){let{error:t,result:o,ready:n,source:i}=e;return n?(0,d.jsx)(u,{url:i,metadata:o}):null}},374968:(e,t,o)=>{o.d(t,{Z:()=>v});var n=o(667294),i=()=>o(546634),r=()=>o(949842),a=()=>o(690122),s=()=>o(175756),l=()=>o(494488),c=o(785893);const d=function(e){const{signedUrl:t,dataSize:n,dataName:i,contentWrapStyle:a,disabled:s,viewOriginal:d}=e,u={paddingTop:l().ZD.paddingTop,paddingBottom:l().ZD.paddingBottom,paddingLeft:l().ZD.paddingLeft};return(0,c.jsx)("div",{style:a,onClick:void 0,onMouseDown:r().$0,children:(0,c.jsx)("div",{style:{position:"relative"},children:t&&(0,c.jsx)(o(125519).S,{title:i,url:t,size:n,onClick:s?void 0:d,style:u})})})};var u=()=>o(733518),p=()=>o(15348);const m={position:"absolute",left:0,top:0,width:"100%",height:"100%",borderRadius:1};function f(e){const{render:t,style:o,errorStyle:n,...r}=e,l=(0,i().NX)(e.url);return(0,c.jsx)(p().Z,{...r,render:(r,d,u)=>{let p=l;return r&&!p&&(p=(0,i().sj)(r)??{type:"unknown",source:e.url}),(0,c.jsx)("div",{style:o,children:(0,c.jsx)(a().Z,{innerStyle:{height:"100%",width:"100%"},loaded:u,style:m,spinnerSize:"1em",showSpinnerTimeout:500,children:p?(0,c.jsx)("div",{style:n,children:(0,c.jsx)(s().ZP,{family:"embed",error:p})}):t(d)})})}})}function g(e){const{height:t,source:o,contentStyle:i,dataName:r,dataSize:a,width:s}=e,[l,p]=(0,n.useState)(!1);return(0,c.jsx)(f,{url:o,permissionRecord:e.store.pointer,useS3Url:e.useS3Url,style:{width:"100%",height:"100%"},errorStyle:{height:t,width:s},render:o=>l&&r&&a?(0,c.jsx)(d,{...e,dataName:r,dataSize:a,signedUrl:o}):o&&(0,c.jsx)(u().Z,{source:o,isFullWidth:!0,isFullHeight:!0,height:t,style:i,background:!0,onContentLoadTimeout:()=>p(!0)})})}const v={render:function(e){const{disabled:t,contentStyle:a,contentWrapStyle:s,handleFullScreen:l,handleEmbedComp:p,height:m,preserveScale:g,isFullWidth:v,source:h,dataName:_,dataSize:b}=e,[y,S]=(0,n.useState)(!1),w=(0,i().kl)({height:m,isFullWidth:v,preserveScale:g});return(0,c.jsx)(f,{url:h,permissionRecord:e.store.pointer,useS3Url:e.useS3Url,style:w,errorStyle:{position:"relative",height:m},render:n=>y&&_&&b?(0,c.jsx)(d,{...e,dataName:_,dataSize:b,signedUrl:n}):(0,c.jsx)("div",{style:s,onClick:t?l:void 0,onMouseDown:r().$0,children:(0,c.jsx)("div",{style:{position:"relative"},children:n&&(0,c.jsx)(u().Z,{ref:e=>p(e),source:n,height:m,style:a,preserveScale:g,isFullWidth:v,background:!0,renderPreview:()=>(0,c.jsx)(o(154293).b,{source:(0,i().cJ)(e)}),onContentLoadTimeout:()=>S(!0)})})})})},embedGhost:!0,renderFullScreen:e=>(0,c.jsx)(g,{...e}),resizable:!0}},765513:(e,t,o)=>{o.d(t,{Z:()=>r});o(667294);var n=o(785893);const i={red:"notion-link",purple:"notion-link-ai-version",blue:"notion-link-blue"};const r=function(e){let{href:t,external:r,disableHover:a,onClick:s,onMouseDown:l,onMouseEnter:c,onMouseLeave:d,disableUnderline:u,style:p,hoverColor:m="red",children:f,color:g}=e;const v={display:"inline",textDecoration:"underline",color:g??o(568017).ZP.inherit},h=m?i[m]:i.red;return(0,n.jsx)(o(108714).Z,{href:t,external:r,style:{...v,...p,...u&&{textDecoration:"none"}},onClick:s,className:a?void 0:h,onMouseDown:l,onMouseEnter:c,onMouseLeave:d,children:f})}},951113:(e,t,o)=>{o.d(t,{Z:()=>u});o(667294);var n=()=>o(142735),i=()=>o(799891),r=()=>o(792409),a=()=>o(839002),s=()=>o(804217);class l extends(()=>o(263184))().default{getInitialState(){return{loaded:!1}}}const c=l;var d=o(785893);const u=function(e){let{fetch:t,willRender:l,render:u,loading:p}=e;const m=(0,n().qz)(void 0,c),f=(0,n().Kw)(m);(0,o(732811).K)((()=>{!async function(e,t){let o=1e3;for(;;)try{const o=await e();t.setState({loaded:!0,result:o});break}catch(n){i().log({level:"warning",from:"LazyLoader",type:"fetchError",error:(0,r().Ui)(n),data:{miscDataToConvertToString:{waitMs:o}}}),await a().Vs(o),await s().default.waitUntil((()=>s().default.state.online)),o=Math.min(2*o,3e4)}}(t,m)}));const g=(0,o(729201).Z)(!f.loaded,300,0);return f.loaded?(l&&l(),u(f.result)):p?p(g):g?(0,d.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},children:(0,d.jsx)(o(312578).Z,{})}):null}},98275:(e,t,o)=>{o.d(t,{Z:()=>Q});o(93383),o(670560),o(267602),o(470928),o(241792),o(731107);var n=o(667294),i=()=>o(219727),r=()=>o(657320),a=()=>o(142735),s=()=>o(156642),l=()=>o(396136),c=()=>o(696459),d=()=>o(576828),u=()=>o(269299),p=()=>o(718959),m=()=>o(239482),f=()=>o(122479),g=()=>o(987503),v=()=>o(466970),h=()=>o(26796),_=()=>o(589525),b=()=>o(279386),y=()=>o(132329),S=()=>o(826955),w=()=>o(764189),k=(o(228244),()=>o(513670)),I=()=>o(282662),C=()=>o(887430),x=()=>o(954452),T=()=>o(767306),M=()=>o(121058),P=()=>o(123927),A=()=>o(254213),R=()=>o(505121),B=()=>o(482162),E=()=>o(965903),D=()=>o(461755),U=()=>o(307369),F=()=>o(628965),N=o(785893);o(326966).C0;const V=4,L=4,O={quote:L,code:L,header:L,bookmark:L,external_object_instance:L,file:void 0,video:L,embed:L,tweet:L,drive:L,audio:L,gist:L,maps:L,framer:L,invision:L,figma:L,loom:L,typeform:L,mixpanel:L,codepen:L,equation:L,pdf:L,image:L,sub_header:void 0,sub_sub_header:void 0,page:void 0,collection_view:void 0,collection_view_page:void 0,form:void 0,column_list:void 0,column:void 0,personal_home_page:void 0,breadcrumb:void 0,text:void 0,encrypted_text:void 0,bulleted_list:void 0,numbered_list:void 0,to_do:void 0,toggle:void 0,factory:void 0,copy_indicator:void 0,divider:void 0,link_to_collection:void 0,link_to_page:void 0,alias:void 0,transclusion_container:1,transclusion_reference:1,callout:L,table_of_contents:L,whimsical:L,miro:L,abstract:L,sketch:L,excalidraw:L,replit:L,hex:L,deepnote:L,table:1,table_row:void 0,tab:L,external_object_instance_page:L,button:void 0,ai_block:1,drawing:L,slide:L,post:L,workflow:L,transcription:L},Z={quote:V,code:V,bookmark:V,external_object_instance:V,file:void 0,video:V,embed:V,tweet:V,audio:V,drive:V,gist:V,maps:V,framer:V,invision:V,figma:V,loom:V,typeform:V,codepen:V,equation:V,pdf:V,header:"2em",sub_header:"1.4em",sub_sub_header:"1em",image:V,page:void 0,personal_home_page:void 0,collection_view:void 0,collection_view_page:void 0,form:void 0,column_list:void 0,column:void 0,breadcrumb:void 0,text:void 0,encrypted_text:void 0,bulleted_list:void 0,numbered_list:void 0,to_do:void 0,toggle:void 0,factory:void 0,copy_indicator:void 0,divider:void 0,link_to_collection:void 0,link_to_page:void 0,alias:void 0,transclusion_container:1,transclusion_reference:1,callout:V,table_of_contents:V,whimsical:V,miro:V,abstract:V,mixpanel:V,sketch:V,excalidraw:V,replit:V,table:1,table_row:void 0,tab:V,hex:V,deepnote:V,external_object_instance_page:V,button:void 0,ai_block:1,drawing:V,slide:V,post:V,workflow:V,transcription:V},j={left:"flex-start",center:"center",right:"flex-end"};function K(e){const{store:t,listStore:y,disabled:w,isFirstItem:K,isInsideMarginCollapseContainer:z,canEditList:q,disableSelection:W,disableHoverMenu:G,disableCommentMenu:$,disableDrag:Q,isLastItem:Y,isPageFullWidth:J,maybeEditorWidthIfSiteSettingsEditor:X,sidePeekWidth:ee,shouldShowSidebar:te,canHideOrphanedBlocks:oe,plusButtonBetweenBlocksEnabled:ne}=e,ie=(0,i().O7)(),re=(0,r().l)(),ae=(0,n.useContext)(o(85307).J),se=(0,n.useRef)(),[le]=(0,n.useState)((()=>o(504008).Z.withListenerIgnored((()=>p().hq(t))))),ce=(0,a().qz)(void 0,o(803820).Z),{isPhantomSyncedBlock:de,legacyTransclusionParent:ue}=(0,a().VK)((()=>{const e=t.getParentId(),o=Boolean(e&&y.id!==e),n=o?y.getRecordStoreAtRootPath():void 0;return{isPhantomSyncedBlock:o,legacyTransclusionParent:n&&n instanceof S().G?n:void 0}}),[y,t]),pe=(0,a().VK)((()=>{if(t.isTransclusionType()){if(o(394961).Z.state.unsyncingBlockIds.has(t.id))return!0}return!1}),[t]),me=(0,a().VK)((()=>{const e=re&&re.publicEditModeStore.state;return!w&&(!(0,f().Ix)(e)&&t.canEdit())}),[re,w,t]),fe=(0,a().VK)((()=>{const e=re&&re.publicEditModeStore.state;return q&&!o(421797).OOI({environment:ie,blocks:[t],publicEditMode:e})}),[ie,re,q,t]),ge=(0,a().VK)((()=>b().MT.getMode(t)),[t]),ve=(0,a().VK)((()=>(0,x().fg)(ie,t)),[ie,t]),he=(0,n.useMemo)((()=>(0,o(411768).v)(t)),[t]),_e=(0,g().a)("css_margins"),be="double_space"===_e,ye=(0,v().E)("animated_list_item_block"),Se=(0,a().VK)((()=>{if(!be)return!1;if(void 0===e.index)return!1;if(!t.isType(s().YP))return!1;const o=e.listStore.getValue();if(!o)return!0;const n=o[e.index-1];if(!n)return!0;return!S().G.createChildStore(e.listStore,{table:l().iU,id:n}).isType(s().YP)}),[be,e.index,e.listStore,t]),we=(0,a().VK)((()=>{if(!be)return!1;if(void 0===e.index)return!1;if(!t.isType(s().YP))return!1;const o=e.listStore.getValue();if(!o)return!1;const n=o[e.index+1];if(!n)return!1;return!S().G.createChildStore(e.listStore,{table:l().iU,id:n}).isType(s().YP)}),[be,e.index,e.listStore,t]),ke=(0,a().VK)((()=>{const e=re&&re.publicEditModeStore.state;return!(!e||!e.hasPublicPermission)&&("view"===e.permission||("comment"===e.permission?"suggest"!==ge:"edit"!==e.permission&&void(0,c().t1)(e.permission)))}),[re,ge]),{type:Ie,isFullWidth:Ce,canDropOnto:xe,canDropLeftRight:Te,shouldShowParentHalo:Me,showHoverMenu:Pe,canDrag:Ae,canSelect:Re,shouldShowSelectionHalo:Be,shouldShowCommentMenu:Ee,numSimpleTableComments:De,isInlineCollectionView:Ue,isSimpleTable:Fe,shouldCollapseTopMargin:Ne,isInPeekRenderer:Ve,preventBackgroundDrag:Le,disableForceTouch:Oe,alignStyle:Ze,canTriggerContextMenu:je,isRootChild:Ke,Renderer:ze}=(0,a().VK)((()=>{const{device:e}=ie,n=t.getFormat(),i=t.getType(),{dragging:r,temporaryFullWidth:a}=ce.state,c=(0,o(283403).h)(t),d=r?a:n.block_full_width,u=i===s().Ti.page||i===s().Ti.collectionViewPage||n.alias_pointer&&(0,o(827370).$O)(n.alias_pointer,l().iU)||i&&(0,o(465371)._A)(i,n)&&!o(445264).Z.isOpen(t.id),p=Boolean(i&&(0,s().dM)(i)),m=i===s().Ti.table,f=i===s().Ti.columnList,g=c===o(963310).DZ,v=K&&z&&t.isType(s().D1),h=g,_=t.isRootOrDirectChild(),b=t.getParentStore(),y="block"===(null==b?void 0:b.table)&&b.isType(s().Ti.toggle),S=(_||y)&&!f&&!m&&q&&!e.isPhone,w=re&&re.publicEditModeStore.state,k=g&&t.getCollectionStore();let I=g;if(k){void 0===k.getKeyStore("version").getValue()&&(I=!1)}const C=!W&&t.canRead()&&!m&&!I&&(!fe||"suggest"===ge),x=!ke&&C&&!g&&!m,M=x,P=(i===s().Ti.transclusionContainer||i===s().Ti.transclusionReference||i===s().Ti.aiBlock)&&function(e){return E().default.state.stores.some((t=>t!==e&&e.uiContains(t)))}(t),A=!ke&&!G&&(!f||ne)&&!m&&!P,R=!$&&!p&&!f&&!(0,T().pF)(t)&&!m&&ie.currentUser.isLoggedIn()&&(!G&&t.canComment()||!q&&("comment"===(null==w?void 0:w.permission)||"comment_only"===t.getRole()))&&(0,o(78449).c_)({blocks:[t]}),D=m?o(881688).Xp({simpleTableStore:t,environment:ie,includeInline:!ve}):0;return{type:i,isFullWidth:d,canDropOnto:u,canDropLeftRight:S,shouldShowParentHalo:M,showHoverMenu:A,canDrag:q&&!f&&!Q,canSelect:C,shouldShowSelectionHalo:x,shouldShowCommentMenu:R,numSimpleTableComments:D,isInlineCollectionView:g,isSimpleTable:m,shouldCollapseTopMargin:v,isInPeekRenderer:Boolean(t.findRecordStoreUIAncestor((e=>e===B().default.peekTargetStore.state)).ancestor),preventBackgroundDrag:h,disableForceTouch:"drawing"===i&&(0,o(339523).iZ)(t),alignStyle:n.block_alignment,canTriggerContextMenu:!(0,s().XD)(i,n)&&q&&!f&&!t.inMemoryRecordCache.isSyntheticAssistantData,isRootChild:_,Renderer:c}}),[ce,ge,ie,fe,ve,re,t,K,z,q,W,G,$,Q,ne,ke],{debugName:"renderStateStore"}),He=(0,a().VK)((()=>{const{device:e}=ie,n=ie.WindowSizeStore.state.width,i=(0,_().ll)(ie,Ve)-ee,r=ae||!Ke||he;if(function(e){return Boolean(e.inMemoryRecordCache.snapshotData)}(t)&&!r&&!e.isPhone)return n*(F().rp/100)-F().mD-R().Z.state;if(o(163085).Z.isBlockInTemplate(t)&&!ae&&!e.isPhone)return n*(D().E2/100)-D().dm-R().Z.state;if(h().Z.state.isOpen&&"site-settings-editor"===h().Z.state.mode&&X){const e=H(ie,t,Ie)?2*p().ui(ie):0;return X+e}if(r)return"100%";if(Ve){const e=(0,o(242921).rb)({environment:ie,isInPeek:!0});return B().default.getPeekModeWidth(n)-R().Z.state-e}let a=n-R().Z.state-i;return(0,_().Jr)(ie)?(e.isMobile&&!e.isTablet||!te||(a-=(0,_().Wk)(ie)),!Ue&&ve&&(a-=J?x().QB:2*(0,x().gC)(ie,Ve,(0,C().Ks)(t))),H(ie,t,Ie)||(a-=2*p().ui(ie)),a):a}),[ie,Ve,ee,ae,t,X,te,Ue,ve,Ie,J,Ke,he]),qe=(0,a().VK)((()=>{if(!function(e,t,o){return!!o&&(Boolean(s().Ok[o])||(0,T().pF)(t)||t.isType("column_list")&&(0,M().Po)(t,e)||t.isType("external_object_instance"))}(ie,t,Ie))return null;if(Ie&&(0,o(534580).x)({environment:ie,type:Ie}))return{width:"100%"};const{dragging:e,temporaryWidth:n,temporaryFullWidth:i,temporaryPageWidth:r}=ce.state,{block_width:a,block_full_width:l,block_page_width:c}=t.getFormat(),d=(e?i:l)?He:(e?r:c)?"100%":e?n:a;return void 0!==d?{width:d}:null}),[ce,ie,He,t,Ie]),We=(0,a().VK)((()=>{const{device:e}=ie;let n;if(t.isExternalObjectInstanceBlockStore()){var i;const e=(0,o(417746)._l)({store:t,canEdit:me,currentUserId:ie.currentUser.id,isInDarkMode:"dark"===ie.ThemeStore.state.mode,showAction:void 0});n=(null==e?void 0:e.renderConfig.previewAttributes)&&(null===(i=e.renderConfig.previewAttributes[0])||void 0===i?void 0:i.mimeType)}const r={};if(n?"image/*"!==n&&(r.width="100%"):r.width="100%",r.maxWidth=He,(e.isMobile&&!Ce||ae||!Ke)&&(r.maxWidth="100%"),Ze&&!Ce&&!e.isPhone&&j[Ze]?r.alignSelf=j[Ze]:Ke&&Ie&&(s().ib[Ie]||(0,T().pF)(t))?r.alignSelf="center":Ie&&s().Ok[Ie]&&(r.alignSelf="flex-start"),"control"===_e){r.marginTop=K?2:1,r.marginBottom=Y?0:1;const e=Ie&&(0,s().OY)(Ie)&&!t.getProperties().source;e?r.marginTop=V:Ie&&Z[Ie]&&(r.marginTop=Z[Ie]),e&&!Y?r.marginBottom=L:!Y&&Ie&&O[Ie]&&(r.marginBottom=O[Ie]),Ne&&(r.marginTop=0)}if(Fe&&0===De&&(Ke||e.isPhone)){const e=He;r.maxWidth="center_peek"===B().default.getPeekMode()?`calc(100vw - ${2*B().PeekModeOuterPadding-R().Z.state}px)`:(0,C().Ks)(t)&&!J?A().z:e,r.width=(0,C().Ks)(t)&&!J?A().z:e,r.alignSelf="center"}return Ke&&ve&&Ue&&(r.zIndex=1),(0,P().aX)()&&de&&(r.border="3px dashed deeppink"),(0,P().hF)()&&!1===t.getAlive()&&(r.outline="3px dashed deepSkyBlue"),r}),[ie,He,Ce,ae,t,me,Ze,Ie,K,Y,Fe,De,Ne,ve,Ue,Ke,de,J,_e]),Ge=(0,a().VK)((()=>m().Pj(t)),[t]),$e=(0,n.useCallback)((e=>{se.current&&"edit"in se.current?se.current.edit():d().Bm({environment:ie,targetStore:t,targetParentStore:y,isAtStartOfLine:!1,isClick:!1,transaction:e.transaction})}),[se,ie,y,t]),Qe=(0,n.useCallback)((e=>{const{droppedDirection:o,droppedStores:n,duplicate:i}=e;u().createAndCommit({userAction:"ListItemBlock.handleDrop",environment:ie,canUndo:!0,perform:e=>{d().LQ({environment:ie,targetParentStore:y,targetStore:t,droppedDirection:o,droppedStores:n,duplicate:i,transaction:e})}})}),[ie,y,t]),Ye=(0,n.useCallback)((e=>{const{files:o,droppedDirection:n}=e;u().createAndCommit({userAction:"ListItemBlock.handleNativeDrop",environment:ie,canUndo:!0,perform:e=>d().uQ({environment:ie,files:o,targetParentStore:y,targetStore:t,droppedDirection:n,transaction:e})})}),[ie,y,t]),Je=(0,n.useCallback)((e=>{const{insertStores:o,transaction:n}=e;return k().d9(o).reverse().map((e=>I().BE({parentStore:y,insertStore:e,afterStore:t,transaction:n}).childStore))}),[y,t]),Xe=(0,n.useCallback)((e=>{const{insertStores:o,transaction:n}=e;return k().d9(o).reverse().map((e=>I().Vt({parentStore:y,insertStore:e,beforeStore:t,transaction:n}).childStore))}),[y,t]),et=(0,n.useCallback)((e=>{d().DC({environment:ie,targetStore:t,targetParentStore:y,isAtStartOfLine:e.isAtStartOfLine,isAtStartOfContainer:e.isAtStartOfContainer,isClick:e.isClick,transaction:e.transaction})}),[ie,y,t]),tt=(0,n.useCallback)((e=>{{const{transaction:n}=e,i=t.getRecordStoreUIParent();i&&(i.table!==l().iU&&i.table!==o(255933).bx&&i.table!==o(922713).Xj||!i.valueIs(o(262453).i)||(o(188517).uO(ie,"user_flow_delete_block",n,"ListItemBlock.handleRemove"),I().Od({parentStore:i,childToRemoveStore:t,transaction:n})))}}),[ie,t]),ot=()=>Ue?it():(0,o(84080).Z)(it),nt=(0,n.useMemo)((()=>!("suggest"!==ge)&&(!Ie||!s().BA[Ie])),[ge,Ie]),it=t=>{const{store:n,canEditList:i,isFirstItem:r,isLastItem:a}=e,s={className:"enabled"===_e?o(247724).j96:void 0,style:We,store:n,canSelect:Re,canEditText:me,shouldShowHalo:Be,shouldShowParentHalo:Me,canDrag:Ae,canDropAbove:i&&r,canDropBelow:i,canDropLeft:Te,canDropRight:Te,canDropOnto:i&&xe,isFirstItem:r,isLastItem:a,isStartOfSyntheticList:Se,isEndOfSyntheticList:we,canNativeDropAbove:i&&r,canNativeDropBelow:i,canNativeDropLeft:Te,canNativeDropRight:Te,onSelectableDrop:Qe,onNativeDrop:Ye,canTriggerContextMenu:je,onInsertBelow:Je,onInsertAbove:Xe,canInsertAbove:i,canInsertBelow:i,onEditText:et,onEnter:$e,onRemove:tt,showBlockMenuInput:!0,shouldShowSuggestRemoveHalo:!0,shouldShowSuggestInsertBorder:!0,shouldShowHoverMenu:Pe,disableForceTouch:Oe,shouldShowCommentMenu:Ee,shouldShowDropZone:!Fe,isListContainer:!0,preventBackgroundDrag:Le,analyticsName:"page_content",...t,ignoreForTocSelectionIntersection:"table"===Ie};return ye&&qe?(0,N.jsx)(o(628370).Z,{tag:U().Z,animate:qe,...s,children:rt()}):(0,N.jsx)(U().Z,{...s,children:rt()})},rt=()=>{const{renderItem:t,disabled:o,store:n,disableHoverMenu:i,disableDrag:r,disableCommentMenu:a,numberedListCounterStore:s,bulletedListFormatStore:l}=e;return!Ge&&oe||pe?null:t?t(n):ze?(0,N.jsx)(ze,{ref:se,store:n,disabled:o||nt,isFirstItem:K,isLastItem:Y,blockResizerStore:ce,disableCommentMenu:a,numberedListCounterStore:s,bulletedListFormatStore:l,disableHoverMenu:i,disableDrag:r,legacyTransclusionParentStore:ue,fullWidth:He}):void 0};return le&&Ie===s().Ti.copyIndicator?null:ye?ot():qe?(0,N.jsx)(o(594281).Z,{isVisible:!0,animationStyle:qe,render:ot}):ot()}const z=n.memo(K,o(632314).Z);function H(e,t,o){return!!o&&(s().GP[o]||(0,T().pF)(t)||t.isType("column_list")&&(0,M().Po)(t,e)&&t.getFormat().block_full_width)}const q="emptyDroppableKey",W="placeholder",G=Object.freeze({depth:0,blockIdFormats:new Map});function $(e){const t=(0,n.useContext)(o(100808).e),k=(0,a().VK)((()=>null==t?void 0:t.state),[t]),I=(0,i().O7)(),C=(0,r().l)(),x=(0,a().VK)((()=>{if(e.disabled)return!1;if(w().n.state)return!1;const t=(0,m().n3)(e.store)&&C&&C.publicEditModeStore.state;return!(0,f().Ix)(t)&&e.store.canEdit()}),[C,e.disabled,e.store]),T=(0,a().VK)((()=>!e.disabled&&(!w().n.state&&Boolean(e.store.isCommentOnly()&&(null==C?void 0:C.pageStore)&&"suggest"===b().MT.getMode(null==C?void 0:C.pageStore)))),[e.store,null==C?void 0:C.pageStore,e.disabled]),M=(0,a().VK)((()=>{if(e.forceIsInsideMarginCollapseContainer)return!0;const t=Y(e.store.id,e.store);return(0,s().nY)(t.getType(),t.getFormat())}),[e.store,e.forceIsInsideMarginCollapseContainer]),P=(0,a().VK)((()=>null==C?void 0:C.pageStore.isFullWidth()),[null==C?void 0:C.pageStore]),A=(0,a().VK)((()=>{if(h().Z.state.isOpen&&"site-settings-editor"===h().Z.state.mode)return o(84926).Z.getEditorWidth()}),[]),R=(0,a().VK)((()=>(0,_().vJ)(I)),[I]),B=(0,a().VK)((()=>p().h1(I).shouldShowSidebar),[I]),E=(0,v().E)("hide_orphan_blocks"),D=(0,o(644235).hq)(),F="double_space"===(0,g().a)("css_margins"),V=(t,i,r)=>{if(t===q)return(0,N.jsx)(n.Fragment,{children:L()},t);if(t===W)return(0,N.jsx)(n.Fragment,{children:e.emptyPlaceholder},t);{const a=Y(t,e.store),s=r.findLastIndex((e=>(0,o(342792).e)(e)));return(0,N.jsx)(n.Fragment,{children:(0,N.jsx)(z,{store:a,renderItem:e.renderItem,listStore:e.store,index:F?i:void 0,isFirstItem:0===i,isInsideMarginCollapseContainer:M,isLastItem:i===s,disabled:e.disabled,disableLayout:e.disableLayout,canEditList:x||T,disableSelection:e.disableSelection,disableHoverMenu:!(!e.disableFirstItemHoverMenu||0!==i)||e.disableHoverMenu,disableCommentMenu:e.disableCommentMenu,disableDrag:e.disableDrag,numberedListCounterStore:j,bulletedListFormatStore:Z,isPageFullWidth:P,maybeEditorWidthIfSiteSettingsEditor:A,sidePeekWidth:R,shouldShowSidebar:B,canHideOrphanedBlocks:E,plusButtonBetweenBlocksEnabled:D})},t)}};function L(){const t=S().G.createChildStore(e.store,{table:l().iU,id:e.store.id});return(0,N.jsx)(U().Z,{store:t,canDropBelow:x,canNativeDropBelow:x,onSelectableDrop:t=>function(e,t,o){const{droppedDirection:n,droppedStores:i,duplicate:r}=e;u().createAndCommit({userAction:"List.handleEmptyDrop",environment:o,canUndo:!0,perform:e=>{d().LQ({environment:o,targetParentStore:t,targetStore:void 0,droppedDirection:n,droppedStores:i,duplicate:r,transaction:e})}})}(t,e.store,I),onNativeDrop:t=>function(e,t,o){const{files:n,droppedDirection:i}=e;u().createAndCommit({userAction:"List.handleEmptyNativeDrop",environment:o,canUndo:!0,perform:e=>{d().uQ({environment:o,files:n,targetParentStore:t,targetStore:void 0,droppedDirection:i,transaction:e})}})}(t,e.store,I),style:e.emptyDroppableStyle,analyticsName:"page_content",shouldShowDropZone:!0})}const O=(0,a().VK)((()=>{const t=e.store.getValue()||[];let o=t;const n=function(e){const{limitParents:t}=y().default.state,o=e.id;let n;return e.findRecordStoreUIAncestor((e=>{const i=t.get(e);return!(!i||!i.hasOwnProperty(o))&&(n=i[o],!0)})),n}(e.store),i=0===t.length;return void 0!==n&&(o=o.slice(0,n)),x&&i&&o.push(q),x&&i&&e.emptyPlaceholder&&o.push(W),o}),[x,e.emptyPlaceholder,e.store]),Z=(0,a().SI)((()=>{var t;const o=null===(t=e.bulletedListFormatStore)||void 0===t?void 0:t.getState().depth,n="number"==typeof o?o+1:0,i=new Map;let r;for(const a of O){const t=Y(a,e.store);r=t.getType()===s().Ti.bulletedList?t.getFormat().bullet_list_format||r:void 0,r&&i.set(a,r)}return 0===n&&0===i.size?G:{depth:n,blockIdFormats:i}}),[O,e.bulletedListFormatStore,e.store]);(0,a().Kw)(Z);const j=(0,a().SI)((()=>{var t;const o=[],n=O.length?O[0]:void 0,i=n?Y(n,e.store):void 0,r=null==i?void 0:i.getParentId(),a=null===(t=e.numberedListCounterStore)||void 0===t?void 0:t.state.numberedListBlockIdsWithFormat.find((e=>e.id===r)),l=null==a?void 0:a.format;let d=void 0===(null==a?void 0:a.depth)?0:(null==a?void 0:a.depth)+1,u=l,p=0;for(const m of O)if(m!==q&&m!==W){const t=Y(m,e.store),n=t.getType(),i=t.getFormat();if(u=(null==i?void 0:i.list_format)??u,n===s().Ti.numberedList){let e=i.list_start_index;(0,c().$K)(e)&&0!==p&&(e=void 0),p=(0,c().$K)(e)?e:p+1,o.push({id:m,format:u,depth:d||0,index:p})}else u=void 0,o.push({id:void 0,format:u,depth:0,index:p}),d=0,p=0}return{depth:d||0,numberedListBlockIdsWithFormat:o}}),[O,e.numberedListCounterStore,e.store]);return(0,a().Kw)(j),e.disableContent?null:(0,N.jsx)(o(802911).Z,{name:"List",children:k?O.reduce(((e,t,o,n)=>(k.indexOf(t)>=0&&e.push(V(t,o,n)),e)),[]):O.map(V)})}const Q=n.memo($);function Y(e,t){return S().G.createChildStore(t,{table:l().iU,id:e})}},627990:(e,t,o)=>{o.d(t,{LK:()=>h,R8:()=>_,ZP:()=>C,v2:()=>l});var n=o(667294),i=()=>o(494488),r=()=>o(550054),a=()=>o(58836),s=o(785893);let l=function(e){return e[e.Start=0]="Start",e[e.Center=1]="Center",e[e.End=2]="End",e}({});const{Start:c,Center:d,End:u}=l,p=n.forwardRef((function(e,t){return(0,s.jsxs)("div",{onClick:e.onClick,onMouseMove:e.onMouseMove,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onMouseDown:e.onMouseDown,style:y(e),ref:t,children:[e.left&&m(e),e.children&&(0,s.jsx)("div",{style:I(e),children:e.children}),e.right&&f(e)]})}));function m(e){return(0,s.jsx)(a().p,{...(0,r().td)("start"),allowSelectionWithin:!1,style:w(e),className:o(247724).DKM,children:e.left})}function f(e){return(0,s.jsx)(a().p,{...(0,r().td)("end"),allowSelectionWithin:!1,style:k(e),children:e.right})}const g=4,v=2,h=24,_={...i().ZD,textAlign:"start"},b={[c]:"flex-start",[d]:"center",[u]:"flex-end"};function y(e){return{display:"flex",alignItems:o(326966).z4(e.alignment)?b[l.Start]:b[e.alignment],width:"100%",...e.style}}function S(e){return{display:"flex",alignItems:"center",justifyContent:"center",flexGrow:0,flexShrink:0,...!e.isContentReskinEnabled&&{minHeight:`calc(1.5em + ${i().ZD.paddingTop}px + ${i().ZD.paddingTop}px)`}}}function w(e){return{marginRight:v,width:h,...S(e),...e.leftStyle}}function k(e){return{marginLeft:g,...S(e),...e.rightStyle}}function I(e){return{flexGrow:1,flexShrink:1,flexBasis:0,minWidth:1,...e.childrenStyle}}const C=p},856695:(e,t,o)=>{o.d(t,{Lw:()=>c,ZP:()=>d});var n=o(667294),i=()=>o(146947),r=()=>o(474788),a=()=>o(846550),s=()=>o(707513),l=o(785893);const c={fontSize:12,paddingTop:2,paddingBottom:2};function d(e){const[t,o]=(0,n.useState)(!1),{isInComment:c}=e,d=(0,a().yK)((o=>({root:{width:"100%",fontSize:14,fontFamily:s().F5(i().locale).sans,color:o.mediumTextColor,borderRadius:4,background:o.embedPlaceholderBackground,position:"relative",...e.style},right:{position:"absolute",top:4,right:4,transition:"opacity 200ms ease-in",opacity:e.shouldHideRight&&!t?0:1},inner:{padding:12,paddingRight:36,display:"flex",alignItems:"center",textAlign:"left",width:"100%",overflow:"hidden",...c?{padding:"8px 10px 10px 8px",paddingRight:10,gap:10}:{}},iconContainer:c?{background:o.tint.regular,height:32,width:32,borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0}:{},icon:{width:25,height:25,flexShrink:0,marginRight:12,fill:o.mediumIconColor,...e.iconStyle},children:c?{color:o.text.secondary}:{}})),[e.style,e.shouldHideRight,e.iconStyle,t,c]);return(0,l.jsxs)("div",{style:d.root,onFocus:e=>{const t=e.target;t instanceof HTMLElement&&(0,r().E)(t)&&o(!0)},onBlur:()=>o(!1),children:[(0,l.jsxs)("div",{style:d.inner,children:[(0,l.jsx)("div",{style:d.iconContainer,children:e.iconSvg(d.icon)}),(0,l.jsx)("div",{style:{...s().Yu,...d.children},children:e.children})]}),e.right&&(0,l.jsx)("div",{style:d.right,children:e.right})]})}},837416:(e,t,o)=>{o.d(t,{Z:()=>s});var n=o(667294),i=()=>o(846550),r=()=>o(765513),a=o(785893);function s(e){const{children:t,maxLines:o,onMore:r,onLess:s,clampOverride:c}=e,d=(0,n.useRef)(null),u=(0,n.useRef)(null),p=(0,n.useRef)(null),[m,f]=(0,n.useState)(!1),[g,v]=(0,n.useState)(!o),[h,_]=(0,n.useState)(0),[b,y]=(0,n.useState)(0),S=c&&o&&c.fontSize*c.lineHeight*o+.5,w=Boolean(c);(0,n.useEffect)((()=>{if(m){var e;const t=null===(e=u.current)||void 0===e?void 0:e.getClientRects()[0];_((null==t?void 0:t.height)??0),y((null==t?void 0:t.width)??0)}}),[m]);const k=(0,n.useCallback)((()=>{d.current&&f(d.current.scrollHeight>d.current.clientHeight+5)}),[]);(0,n.useEffect)((()=>{!g&&o&&k()}),[g,o,k]),(0,n.useEffect)((()=>{if(p.current){const e=new MutationObserver((()=>{g||k()})),t=new ResizeObserver((()=>{g||k()}));return t.observe(p.current),e.observe(p.current,{childList:!0,subtree:!0,characterData:!0}),()=>{t.disconnect(),e.disconnect()}}}),[g,k]);const I=(0,n.useCallback)((e=>{r?r(e):(e.preventDefault(),e.stopPropagation(),v(!0))}),[r]),C=(0,n.useCallback)((e=>{s?s(e):(e.preventDefault(),e.stopPropagation(),v(!1))}),[s]),x=(0,n.useMemo)((()=>(0,a.jsx)(l,{style:{position:"absolute",right:0,bottom:0},onClick:I,children:(0,a.jsx)("div",{ref:u,children:e.moreElement})})),[e.moreElement,I]),T=(0,n.useMemo)((()=>(0,a.jsx)(l,{onClick:C,children:e.lessElement})),[e.lessElement,C]),M=(0,i().yK)((e=>({base:{display:"-webkit-box",WebkitBoxOrient:"vertical",...!w&&{WebkitLineClamp:g?void 0:o},...w&&{maxHeight:g?void 0:S}},clamped:{WebkitMaskPosition:"right bottom",WebkitMask:`linear-gradient(0deg,transparent 0,transparent ${h}px,#000 ${h}px),\n\t\t\t\t\t\t\t linear-gradient(270deg,transparent 0,transparent ${b}px,#000 ${2*b}px)`}})),[o,g,h,b,S,w]);return(0,a.jsxs)("div",{style:{position:"relative"},dir:"auto",children:[(0,a.jsxs)("div",{ref:d,style:{...M.base,...m&&!g&&M.clamped,...e.style},children:[(0,a.jsx)("div",{ref:p,children:t}),m&&g&&T]}),m&&!g&&x]})}function l(e){let{onClick:t,style:o,children:n}=e;return(0,a.jsx)(r().Z,{disableUnderline:!0,style:o,onClick:e=>{t(e)},children:n})}},736354:(e,t,o)=>{o.d(t,{Z:()=>g});var n=o(667294),i=()=>o(142735),r=()=>o(788860),a=()=>o(480089),s=()=>o(627990),l=(o(267602),o(470928),()=>o(26970)),c=()=>o(342923),d=o(785893);function u(e){const{rank:t,index:o,listFormat:n}=e;if("numbers"===n)return{index:o,listFormat:n};if("letters"===n)return{index:(0,c().yt)(o),listFormat:n};if("roman"===n)return{index:(0,c().bW)(o),listFormat:n};{const e=t%3;return 0===e?{index:o,listFormat:"numbers"}:1===e?{index:(0,c().yt)(o),listFormat:"letters"}:{index:(0,c().bW)(o),listFormat:"roman"}}}const p=function(e){const t=(0,i().VK)((()=>{if(!e.numberedListCounterStore)return u({rank:0,index:1,listFormat:void 0});const t=e.numberedListCounterStore.state.numberedListBlockIdsWithFormat.find((t=>t.id===e.store.id));return u({rank:(null==t?void 0:t.depth)||0,index:(null==t?void 0:t.index)||0,listFormat:null==t?void 0:t.format})}),[e.numberedListCounterStore,e.store.id]);if("roman"===t.listFormat){const e=t.index;return(0,d.jsx)("span",{...(0,l().iv)({pseudoBefore:{content:`"${e}."`},textAlign:"left",width:(0,c().A8)(e),whiteSpace:"nowrap"})})}{const e=t.index.toString().length;let o=24;return 3===e?o=32:4===e?o=42:e>4&&(o="unset"),(0,d.jsx)("span",{...(0,l().iv)({pseudoBefore:{content:`"${t.index}."`},width:o,textAlign:"center",whiteSpace:"nowrap"})})}};const m=(0,r().vU)({listPlaceholder:{defaultMessage:"List",id:"numberedListBlock.placeholder.label"}});function f(e,t){const l=(0,r().YB)(),c=n.useRef(null),u=(0,i().VK)((()=>e.store.getBlockTitleStore()),[e.store]),f=(0,i().VK)((()=>e.store.getContentStore()),[e.store]),g=(0,a().rv)(e.store,!0),v=(0,i().VK)((()=>Boolean(e.store.getInsertSuggestion())),[e.store]),h=(0,o(540896).O)(),_=(0,o(846550).yK)((t=>({root:{paddingLeft:o(494488).ZD.paddingLeft,...g,...e.style},title:{...s().R8,...h&&{paddingTop:0,paddingBottom:0}},titlePlaceHolder:{...v?{color:t.text.uiBlueTertiary,WebkitTextFillColor:"initial"}:{}},leftStyle:{width:"unset",...h&&{minHeight:"1.5em"}}})),[g,h,v,e.style]),b=(0,d.jsxs)(s().ZP,{style:_.root,left:(0,d.jsx)(p,{store:e.store,numberedListCounterStore:e.numberedListCounterStore}),leftStyle:_.leftStyle,childrenStyle:{display:"flex",flexDirection:"column"},ref:c,children:[(0,d.jsxs)("div",{style:{display:"flex"},children:[(0,d.jsx)(o(345837).Z,{style:_.title,disabled:e.disabled,store:u,placeholder:l.formatMessage(m.listPlaceholder),placeholderStyle:_.titlePlaceHolder,pasteBehavior:"block",legacyTransclusionParentStore:e.legacyTransclusionParentStore,inPageFind:o(12512).B3.block_match,renderWhiteSpaceWhenEmptyOnAndroid:!0}),(0,d.jsx)(o(37399).Z,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store})]}),!e.hideContent&&(0,d.jsx)(o(98275).Z,{disabled:e.disabled,store:f,disableCommentMenu:e.disableCommentMenu,disableHoverMenu:e.disableHoverMenu,disableDrag:e.disableDrag,numberedListCounterStore:e.numberedListCounterStore})]});return(0,a().ez)(e.store,t,(0,n.useMemo)((()=>({renderedType:"numbered_list",getNode:()=>c.current,getBlockStore:()=>e.store})),[e.store]),b)}const g=n.memo(n.forwardRef(f),o(632314).Z)},534580:(e,t,o)=>{o.d(t,{Z:()=>d,x:()=>l});var n=o(667294),i=()=>o(142735),r=()=>o(788860),a=o(785893);const s=(0,r().vU)({embedButtonText:{defaultMessage:"Embed PDF",id:"pdfBlock.embeds.button.label"}});function l(e){const{type:t,environment:o}=e;return"pdf"===t&&o.device.isMobile}function c(e,t){const c=(0,o(219727).O7)(),d=(0,r().YB)(),u=(0,n.useRef)(null),p=(0,i().qz)(e.blockResizerStore,o(803820).Z),m=(0,i().VK)((()=>{const t=e.store.getType();return t&&l({environment:c,type:t})}),[c,e.store])?(0,a.jsx)(o(125519).Z,{store:e.store,disabled:e.disabled}):(0,a.jsx)(o(904912).ZP,{...e,blockResizerStore:p,ref:u,store:e.store,iconSvg:o(621736).B,mediaMenuCurrentTab:"file",mediaMenuTabs:[{type:"file",fileUpload:!0},{type:"embed"}],mediaMenuEmbedCaption:(0,a.jsx)(r()._H,{defaultMessage:"Embed a PDF file",id:"pdfBlock.embeds.caption"}),embedButtonText:d.formatMessage(s.embedButtonText),urlInputPlaceholder:"https://...",children:(0,a.jsx)(r()._H,{defaultMessage:"Embed a PDF",id:"pdfBlock.placeholder"})});return(0,o(480089).ez)(e.store,t,(0,n.useMemo)((()=>({renderedType:"pdf",getNode:()=>{const e=u.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),m)}const d=n.memo(n.forwardRef(c),o(632314).Z)},447650:(e,t,o)=>{o.d(t,{Z:()=>D});o(241792);var n=o(667294),i=()=>o(219727),r=()=>o(142735),a=()=>o(846550),s=()=>o(225339),l=()=>o(568017),c=()=>o(513670),d=()=>o(879952),u=()=>o(677559);const p=new(u().Ss)("react-pdf",(async()=>{const[e]=await Promise.all([Promise.all([o.e(61329),o.e(39295)]).then(o.bind(o,461329)),Promise.all([o.e(61329),o.e(39295)]).then(o.bind(o,211366))]);return e}));var m=()=>o(71410);o(821057),o(398858),o(461318),o(33228);function f(e,t){return{...e,variantOptions:t.opts&&function(e){const t=new URLSearchParams;for(const[o,n]of Object.entries(e))n&&t.append(o,n.toString());return t}(t.opts),variantMode:t.mode}}var g=()=>o(205228);function v(e,t){return function(e,t,o){const n="s3"===t.mode?`${t.bucket}/${t.key}`:t.url;return f({baseUrl:e,sourceMode:t.mode,sourceLocation:n,searchParams:void 0},o)}(g().default.imageProxy.baseUrl,e,t)}function h(e,t){return`${(o=v(e,t)).baseUrl}${[o.sourceMode,o.sourceLocation,o.variantMode].map(encodeURIComponent).concat(void 0!==o.variantOptions?[o.variantOptions.toString()]:[]).join("/")}${o.searchParams?`?${o.searchParams}`:""}`;var o}var _=()=>o(164079),b=()=>o(148126),y=()=>o(520849),S=()=>o(505121),w=()=>o(312578),k=()=>o(842574),I=()=>o(906769),C=()=>o(175756),x=o(785893);const T={position:"absolute",top:"calc(50% - 9px)",left:"calc(50% - 9px)",width:18,height:18},M=200,P=8,A=16,R={PASSWORD_REQUIRED:1,INVALID_PASSWORD:2};function B(e){const{value:t}=(0,u().XJ)(p),o=(0,i().O7)(),{device:f}=o,[g,v]=(0,n.useState)(null),[h,B]=(0,n.useState)({ready:!1,pages:0,showPages:0}),[E,D]=(0,n.useState)(e.width),{showPages:U,pages:F}=h,N=(0,a().yK)((()=>({scroller:{position:"relative",height:e.height,maxHeight:f.isMobile?"75vh":void 0,background:l().ZP.uiExtraLightGray,paddingTop:P,paddingBottom:P,paddingLeft:A,paddingRight:A,overflow:"visible"},lockIcon:{width:18,height:18,paddingRight:4},passwordContainer:{minWidth:80}})),[f.isMobile,e.height]);function V(){d().ZH({environment:o})}(0,n.useEffect)((()=>{const t=setTimeout((()=>{D(e.width)}),1e3);return()=>clearTimeout(t)}),[e.width]);const L=(0,r().VK)((()=>Math.min(window.innerWidth,E)-2*A-S().Z.state),[E]);function O(e,t){const o=parseInt(t,10);if(o===R.INVALID_PASSWORD){e(prompt("Invalid password. Please try again.")??"")}else v({status:"required",onPassword:e,reason:o})}function Z(){if(!g)return;const e=prompt("Enter the password to open this PDF file.");g.onPassword(e??"")}function j(e){e&&e._pdfInfo&&(B({...h,pages:e._pdfInfo.numPages,showPages:1}),v(null))}function K(){B({...h,ready:!0})}function z(e){e<M&&h.ready&&U<F&&B({...h,ready:!1,showPages:U+1})}const{source:H}=e,q=(0,r().VK)((()=>(0,s().x$)(H)&&!(0,b().Sr)(o)),[H,o]);if(!t)return null;const{Document:W,Page:G}=t,$=Boolean(g);return(0,x.jsx)(m().Z,{capture:!0,render:e=>(0,x.jsxs)(k().Z,{type:y().Z.All,style:N.scroller,...(0,_().Z)(e,{onMouseDown:V}),children:[$&&(0,x.jsx)("div",{style:N.passwordContainer,children:(0,x.jsx)(C().ZP,{family:"pdf",error:{type:"document_locked"},onClickLink:Z})}),H&&(0,x.jsx)(W,{file:H,loading:$?(0,x.jsx)("div",{}):(0,x.jsx)(w().Z,{style:T}),onPassword:O,onLoadSuccess:j,options:{cMapUrl:"/notion-assets/cmaps/",cMapPacked:!0,withCredentials:q,isEvalSupported:!1},children:c().w6(h.showPages).map((e=>(0,x.jsx)(G,{pageNumber:e+1,width:L,loading:"",renderAnnotationLayer:!1,renderInteractiveForms:!1,onRenderSuccess:K},e+1)))}),(0,x.jsx)(I().Z,{onChange:z})]})})}function E(e){const{contentWrapStyle:t,width:n,height:r,blockLocation:a,source:l}=e,c=e.store.pointer,d=(0,i().O7)(),[{value:u}]=(0,o(801812).r5)((async()=>{if(await o(148882).transactionQueue.awaitRecordTransaction(c),(0,s().iS)(l)){const e=d.device;return await(0,o(661453).a)(d,{url:l,permissionRecord:c,useS3Url:e.isIOS&&e.isMobileNative},Boolean(o(725751).default.state.isNotionProtocolBugFixed))}return h({mode:"ext",url:l},{mode:"raw",opts:void 0})}),[d,c,l]);return(0,x.jsx)("div",{style:t,children:(0,x.jsx)(B,{source:u,width:n||500,height:r||(o(544607).qC(a)?240:500)})})}const D={render:e=>(0,x.jsx)(E,{...e}),embedGhost:!0,resizable:!0}},649129:(e,t,o)=>{o.d(t,{Z:()=>x});var n=o.n(o(294184)),i=o(667294),r=()=>o(219727),a=()=>o(657320),s=()=>o(142735),l=()=>o(846550),c=()=>o(506347),d=()=>o(494488),u=()=>o(572948),p=()=>o(788860),m=()=>o(636340),f=()=>o(269299),g=()=>o(429725),v=()=>o(122479),h=()=>o(965913),_=()=>o(998901),b=()=>o(158429),y=()=>o(79555),S=()=>o(943620),w=()=>o(654133),k=o(785893);const I={paddingTop:d().ZD.paddingTop,paddingBottom:d().ZD.paddingBottom,paddingLeft:d().ZD.paddingLeft};function C(e,t){const{store:a,onClick:d}=e,m=(0,r().O7)(),f=(0,l().Fg)(),v=(0,p().YB)(),[h,y]=(0,i.useState)(!1),S=(0,o(466970).E)("enable_deleted_page_indicator"),w=(0,s().VK)((()=>{const e=o(239482).wf(a);return S&&e}),[S,a]),C=(0,s().VK)((()=>a.inMemoryRecordCache.isTemporaryData),[a]),x=(0,s().VK)((()=>{const e=b().l.state;if(!e)return!1;return(0,o(955620).QaF)(a.getTitleValue()).toLowerCase().includes(e.toLowerCase())}),[a]),T=(0,s().VK)((()=>{const e=b().V.state;return!!e&&("block"===e.type&&e.id===a.id)}),[a.id]),M=(0,o(480089).cR)(a)&&!C,A=(0,s().VK)((()=>(0,o(90065).tj)(m)),[m]),B=(0,s().VK)((()=>{const e=a.getModel();return(0,o(496205).em)(e)}),[a]),E=(0,l().yK)((t=>({title:{fontWeight:o(707513).Ue.medium,lineHeight:1.3,borderBottom:e.disableUnderline?"none":`1px solid ${x?"transparent":t.darkDividerColor}`,...w&&{color:t.mediumTextColor}}})),[x,e.disableUnderline,w]),D=(0,i.useCallback)((()=>y(!0)),[]),U=(0,i.useCallback)((()=>y(!1)),[]),F=(0,s().VK)((()=>(0,g().Hu)({store:a,fullyQualified:!1,pageVisitSource:c().tY.LinkInPage})),[a]),N=(0,s().VK)((()=>(0,g().Hu)({store:e.store,openInSidePeek:!0,fullyQualified:!1,pageVisitSource:c().tY.PeekOpen})),[e.store]),V=(0,s().VK)((()=>o(482162).default.isSidePeekOpen()),[]);return(0,k.jsx)(o(729775).Z,{ref:t,href:F,altHref:N,forceAltHref:V,external:!1,onClick:d,style:{borderRadius:4,...e.style},children:(0,k.jsx)(o(627990).ZP,{childrenStyle:I,alignment:_().Alignment.Center,right:(0,k.jsx)(P,{aliasStore:e.aliasStore,disabled:e.disabled,store:e.store,hovered:h}),onMouseMove:D,onMouseLeave:U,children:(0,k.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,k.jsx)(R,{store:e.store,disabled:e.disabled,isAlias:e.isAlias,showDeletedPageIndicator:w}),(0,k.jsx)("span",{className:n()(T&&u().qp),style:{overflow:"auto",...x&&(0,u().ni)({theme:f,isSelectedMatch:T})},children:(0,k.jsx)(o(384241).Z,{store:a,style:E.title})}),(0,k.jsx)(o(871607).Z,{theme:f,intl:v,isPageInTrash:M}),A&&(0,k.jsx)(o(75626).O,{theme:f,isPageVerified:B})]})})})}const x=i.forwardRef(C);function T(e){let{isAlias:t}=e;return t?(0,k.jsx)("div",{children:(0,h().Y)({position:"absolute",width:"50%",height:"50%",right:0,bottom:0})}):null}function M(e,t,o){const n=o&&o.publicEditModeStore.state;return!(0,v().Ix)(n)&&(e.canEdit()&&!t)}function P(e){let{aliasStore:t,store:o,disabled:n,hovered:i}=e;const l=(0,a().l)(),c=(0,r().O7)(),{device:d}=c;return(0,s().VK)((()=>M(o,n,l)&&(i||d.isMobile)),[d.isMobile,n,i,l,o])?(0,k.jsx)(y().Z,{store:t??o,tooltipContent:(0,k.jsx)(p()._H,{defaultMessage:"Rename, delete, and moreâ€¦",id:"page.blockActionMenu.tooltip"}),style:{marginRight:4},fadeIn:!0}):null}function A(e){let{store:t,disabled:o}=e;const n=(0,a().l)(),i=(0,r().O7)(),l=(0,s().VK)((()=>t.getIcon()),[t]),c=(0,s().VK)((()=>t.getRole()),[t]),d=(0,s().VK)((()=>t.isEmptyPage()),[t]),u=(0,s().VK)((()=>t.getType()),[t]),g=(0,s().VK)((()=>M(t,o,n)),[o,n,t]);return(0,k.jsx)(w().Z,{renderTooltip:()=>(0,k.jsx)(p()._H,{defaultMessage:"Change icon",id:"page.changeIcon.tooltip"}),placement:_().Placement.Top,disableTooltip:o||!g,render:e=>o||!g?(0,k.jsx)(S().Z,{disabled:!0,icon:l,isEmptyPage:d,role:c,size:22,style:{width:"100%",height:"100%"},...e,largeIcon:!0}):(0,k.jsx)(S().Z,{disabled:!1,bucket:"secure",store:t,icon:l,role:c,isEmptyPage:d,size:22,style:{width:"100%",height:"100%"},iconLoggingData:{recordTable:t.table,source:"subpage",block_type:u},onChange:e=>function(e,t,o){const n=t.getIconStore();n&&f().createAndCommit({userAction:"Page.handleRecordIconChange",environment:o,canUndo:!0,perform:t=>{m().sO({store:n,value:e,transaction:t})}})}(e,t,i),...e,largeIcon:!0})})}function R(e){let{showDeletedPageIndicator:t,store:o,disabled:n,isAlias:i}=e;const a=(0,l().Fg)(),s=(0,r().O7)();if(t){const e=s.device.isSafari||s.device.isIOS;return(0,u().tr)({isSafariOrIOS:e,theme:a})}return(0,k.jsxs)("div",{style:{position:"relative",width:24,height:24,marginRight:4},children:[(0,k.jsx)(A,{store:o,disabled:n}),(0,k.jsx)(T,{isAlias:i})]})}},202834:(e,t,o)=>{o.d(t,{Z:()=>u});var n=o(667294),i=o(973935),r=()=>o(506347),a=()=>o(970105),s=()=>o(614027),l=()=>o(480089),c=o(785893);function d(e,t){const d=(0,o(219727).O7)(),u=(0,n.useContext)(o(41340).Z),p=(0,n.useRef)(null),m=(0,n.useRef)(null),f=(0,l().PE)(e.store,e.disabled),g=(0,l().rv)(e.store),v=(0,n.useCallback)((()=>{o(381140).Se(d),o(30238).SK(d,{page_visit_id:o(56810).$g.getCurrentPageVisitId(),mentioned_page_id:e.store.id,source_type:"page_block",hover_preview_enabled:!0,is_navigable_block:e.store.isNavigableBlock()}),o(773725).Z.recordVisit({id:e.store.id,systemBlockType:e.store.getSystemBlockTypeStore().getValue(),type:s().vu.Link,currentUserId:d.currentUser.id})}),[d,e.store]),h=(0,n.useCallback)((()=>{if(!m||!m.current)return;const t=i.findDOMNode(m.current);return(0,o(641702).We)(e.store,t)}),[e.store]),_=(0,n.useCallback)((t=>{const o=h(),n=e.store.getTitleStore();n&&o&&a().Nh({environment:d,event:t,interactiveToken:o,store:n,canEdit:f})}),[f,d,h,e.store]),b=(0,n.useCallback)((t=>{const o=h(),n=e.store.getTitleStore();n&&o&&a().Zl({environment:d,event:t,interactiveToken:o,store:n,canEdit:f})}),[f,d,h,e.store]),y=(0,n.useCallback)((()=>{if(u){const t=(0,o(429725).ZP)({store:e.store,pageVisitSource:r().tY.Create});u(t)}else o(47443)._c({environment:d,store:e.store,visitType:s().vu.Link,openInSidePeek:o(482162).default.isSidePeekOpen(),pageVisitSource:r().tY.Create})}),[d,u,e.store]);(0,n.useEffect)((()=>()=>{o(448046).qA(e.store.getTitleStore())}),[e.store]);const S=(0,o(142735).VK)((()=>e.store.recordStoreParentDiffersFromPersistedParent()),[e.store]);return(0,l().ez)(e.store,t,(0,n.useMemo)((()=>({renderedType:"page",getNode:()=>p.current,getBlockStore:()=>e.store,activate:y,handleCreated(){y(),o(475335).default.setKeyboardMode(!1)}})),[y,e.store]),(0,c.jsx)(o(58836).p,{allowSelectionWithin:!1,onMouseOver:_,onMouseOut:b,ref:p,children:(0,c.jsx)(o(732388).v,{step:"demo_sub_page",store:e.store,children:(0,c.jsx)(o(649129).Z,{ref:m,store:e.store,style:{...g,...e.style},isAlias:S,disabled:e.disabled,onClick:v})})}))}const u=n.memo(n.forwardRef(d),o(632314).Z)},838444:(e,t,o)=>{o.d(t,{u:()=>P});o(267602),o(731107),o(667294);var n=()=>o(219727),i=()=>o(142735),r=()=>o(846550),a=()=>o(714230),s=()=>o(955620),l=()=>o(696459),c=()=>o(829012),d=()=>o(116338),u=()=>o(802244),p=()=>o(389720),m=()=>o(154251),f=()=>o(643051),g=()=>o(518242),v=()=>o(668001),h=()=>o(616268),_=()=>o(736354),b=()=>o(202834),y=()=>o(686381),S=()=>o(213586),w=()=>o(892968),k=()=>o(42557),I=()=>o(500104),C=()=>o(952628),x=()=>o(911393),T=o(785893);let M;function P(e){const{store:t,restrictedBlockIds:o,tableRenderMode:n}=e,i=t.getType();if(i){if(!M||o){const e={text:k().Z,encrypted_text:k().Z,page:b().Z,collection_view_page:c().Z,bulleted_list:p().Z,numbered_list:_().Z,toggle:C().ZP,quote:y().Z,to_do:I().Z,header:h().Z,sub_header:S().Z,sub_sub_header:w().Z,callout:m().Z,transclusion_container:x().gX,transclusion_reference:x().lC,alias:u().ym},t=(0,l().Yd)({abstract:!0,audio:!0,code:!0,codepen:!0,deepnote:!0,drive:!0,equation:!0,excalidraw:!0,figma:!0,file:!0,framer:!0,gist:!0,hex:!0,invision:!0,loom:!0,maps:!0,miro:!0,mixpanel:!0,pdf:!0,replit:!0,sketch:!0,tweet:!0,typeform:!0,video:!0,whimsical:!0}),i=Object.keys(t).reduce(((e,t)=>(e[t]=A,e)),{}),r={collection_view:B,table:"image"===n?B:R(o)};M={...e,...i,...r,copy_indicator:void 0,personal_home_page:void 0,button:void 0,image:void 0,link_to_page:void 0,link_to_collection:void 0,table_row:void 0,external_object_instance_page:void 0,external_object_instance:void 0,bookmark:void 0,table_of_contents:void 0,tab:void 0,column_list:void 0,column:void 0,embed:void 0,drawing:void 0,slide:void 0,divider:void 0,breadcrumb:void 0,factory:void 0,ai_block:void 0,form:void 0,post:void 0,workflow:void 0,transcription:void 0}}return M[i]}}function A(e){let{store:t}=e;const[o,n]=(0,i().VK)((()=>{var e;const o=t.getType(),n=null===(e=t.getTitleStore())||void 0===e?void 0:e.getValue();return[o,s().QaF(n)]}),[t]),l=(0,r().yK)((e=>({card:{display:"flex",padding:10,borderRadius:6,boxShadow:e.inputBoxShadow,marginBottom:6,gap:10},shimmer:{backgroundColor:e.largeShimmerColor,width:150,borderRadius:6}})),[]),c=function(e){const t=e&&E[e];if("string"==typeof t)return t;return a().Z.images.icons.unknownTypePng}(o);return(0,T.jsxs)("div",{style:l.card,children:[(0,T.jsx)(f().Z,{type:"image_url",imageURL:c,size:25,imageStyle:{marginLeft:4,marginRight:4}}),n.length>0?(0,T.jsx)("span",{children:n}):(0,T.jsx)(v().Z,{emphasized:!0,style:l.shimmer})]})}function R(e){return t=>{let{store:o,...n}=t;const{tableStore:r,isPartialTable:a}=(0,i().VK)((()=>{if(o.isType("table"))return{tableStore:o,isPartialTable:!1};const e=o.getParentBlockStore();return e&&e.isType("table")?{tableStore:e,isPartialTable:!0}:{tableStore:void 0,isPartialTable:!1}}),[o]);return r?(0,T.jsx)(d().W,{...n,store:r,showRowIds:a?e:void 0}):null}}function B(e){let{store:t}=e;const o=(0,n().O7)(),s="collection_view"===(0,i().VK)((()=>t.getType()),[t]),l=(0,r().yK)((e=>({image:{width:"100%",borderRadius:4,border:`1px solid ${e.lightDividerColor}`},container:{marginBottom:6}})),[]),c=(0,i().VK)((()=>"dark"===o.ThemeStore.state.mode),[o.ThemeStore]),d=c?a().Z.images.blockRendererCovers.collectionTableDarkPng:a().Z.images.blockRendererCovers.collectionTableLightPng,u=c?a().Z.images.blockRendererCovers.plainTableDarkPng:a().Z.images.blockRendererCovers.plainTableLightPng;return(0,T.jsx)("div",{style:l.container,children:(0,T.jsx)(g().ZP,{src:s?d:u,style:l.image})})}const E={equation:a().Z.images.blocks.texPng,audio:a().Z.images.blocks.audioPng,file:a().Z.images.blocks.filePng,pdf:a().Z.images.blocks.pdfPng,code:a().Z.images.blocks.codePng,video:a().Z.images.blocks.videoPng,abstract:a().Z.images.blocks.abstractPng,codepen:a().Z.images.blocks.codepenPng,deepnote:a().Z.images.blocks.deepnotePng,drive:a().Z.images.blocks.drivePng,excalidraw:a().Z.images.blocks.excalidrawPng,figma:a().Z.images.externalIntegrations.figmaIconPng,framer:a().Z.images.blocks.framerPng,gist:a().Z.images.blocks.githubPng,hex:a().Z.images.blocks.hexPng,invision:a().Z.images.blocks.invisionPng,loom:a().Z.images.blocks.loomPng,maps:a().Z.images.blocks.mapsPng,miro:a().Z.images.blocks.miroPng,mixpanel:a().Z.images.blocks.mixpanelPng,replit:a().Z.images.blocks.replitPng,sketch:a().Z.images.blocks.sketchPng,typeform:a().Z.images.blocks.typeformPng,tweet:a().Z.images.blocks.twitterPng,whimsical:a().Z.images.blocks.whimsicalPng}},116432:(e,t,o)=>{o.d(t,{Z:()=>a});o(667294);var n=()=>o(788860),i=()=>o(568017),r=o(785893);const a=function(e){let{style:t}=e;return(0,r.jsx)(o(654133).Z,{renderTooltip:()=>(0,r.jsx)(n()._H,{defaultMessage:"Only you can see this page",id:"privatePageBadge.tooltip"}),render:e=>(0,r.jsx)("div",{style:{display:"flex",alignItems:"flex-start",...t||{}},...e,children:(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,r.jsx)("div",{style:{flexShrink:0,marginTop:-1,marginRight:4,fill:i().ZP.red},children:(0,o(821149).b)({width:12})}),(0,r.jsx)("span",{style:{fontSize:12,fontWeight:o(707513).Ue.semibold,color:i().ZP.red},children:(0,r.jsx)(n()._H,{defaultMessage:"Private",id:"privatePageBadge.label"})})]})})})}},686381:(e,t,o)=>{o.d(t,{Z:()=>u});var n=o(667294),i=()=>o(142735),r=()=>o(494488),a=()=>o(480089),s=()=>o(727155),l=o(785893);const c=(0,o(788860).vU)({emptyPlaceholder:{defaultMessage:"Empty quote",id:"quoteBlock.emptyQuote.placeholder"}});function d(e,t){let{disabled:d,disableCommentMenu:u,disableDrag:p,disableHoverMenu:m,hideContent:f,store:g,style:v}=e;const h=(0,n.useRef)(null),_=(0,a().rv)(g),b=(0,i().VK)((()=>{var e;return null===(e=g.getFormat())||void 0===e?void 0:e.quote_size}),[g]),y=(0,i().VK)((()=>g.getBlockTitleStore()),[g]),S=(0,i().VK)((()=>g.getContentStore()),[g]),w=(0,o(846550).yK)((()=>({root:{margin:0,fontSize:"large"===b?"1.2em":"1em",...r().ZD,..._,display:"flex",...v},padding:{paddingLeft:r().ZD.paddingLeft,paddingRight:r().ZD.paddingRight},innerStyle:{borderLeft:"3px solid currentColor",paddingLeft:14,paddingRight:14,width:"100%"}})),[_,b,v]),{blockInsetRight:k}=(0,n.useContext)(s().a),I=(0,l.jsxs)("blockquote",{style:w.root,ref:h,children:[(0,l.jsxs)("div",{style:w.innerStyle,children:[(0,l.jsx)(o(345837).Z,{style:w.padding,placeholderStyle:{left:14,width:"auto",right:14},disabled:d,store:y,placeholder:o(527278).Z.formatMessage(c.emptyPlaceholder),pasteBehavior:"block",inPageFind:o(12512).B3.block_match,renderWhiteSpaceWhenEmptyOnAndroid:!0}),!f&&(0,l.jsx)(s().a.Provider,{value:{blockInsetRight:k+14},children:(0,l.jsx)(o(98275).Z,{disabled:d,store:S,disableCommentMenu:u,disableHoverMenu:m,disableDrag:p})})]}),(0,l.jsx)(o(37399).Z,{disableCommentMenu:u,hideContent:f,store:g})]});return(0,a().ez)(g,t,(0,n.useMemo)((()=>({renderedType:"quote",getNode:()=>h.current,getBlockStore:()=>g})),[g]),I)}const u=n.memo(n.forwardRef(d),o(632314).Z)},307369:(e,t,o)=>{o.d(t,{Z:()=>L,u:()=>F});o(267602),o(470928),o(228244);var n=o.n(o(294184)),i=o(667294),r=()=>o(10227),a=()=>o(219727),s=()=>o(142735),l=()=>o(846550),c=()=>o(435308),d=()=>o(156642),u=()=>o(492522),p=()=>o(568017),m=()=>o(326966),f=()=>o(574089),g=()=>o(879952),v=()=>o(631538),h=()=>o(247724),_=()=>o(949842),b=()=>o(164079),y=()=>o(154057),S=()=>o(339523),w=()=>o(505462),k=()=>o(466970),I=()=>o(32969),C=()=>o(960562),x=()=>o(670320),T=()=>o(885610);class M extends(()=>o(263184))().default{getInitialState(){return{shouldShowSelectionHalo:!1,shouldShowDropParentHalo:!1,shouldShowDropZone:!1,shouldShowDropZoneHint:!1,forceRenderSelectionHalo:!1,showActionIsInFlight:!1}}}const P=M;var A=()=>o(965903),R=()=>o(628370),B=()=>o(790964),E=o(785893);const D=4,U="selectable_ref";function F(e){return e instanceof Object&&"refType"in e&&e.refType===U}class N extends r().Z{constructor(){super(...arguments),this.lastDropZoneHintIndex=void 0,this.selectableDivRef=i.createRef(),this.storeTypes={draggableStore:x().Z,selectableStore:P},this.legacyContextKeys=["scrollerContext","selectable"].concat(r().a),this.selectableContextValueMemoCell=new(o(527327).Uw),this.computedStore=this.createComputedStore((()=>{const e=Q(this.props.store);!m().z4(e)&&e>=0&&(this.lastDropZoneHintIndex=e);const t=ee(this.props.store,this.environment,this.props.shouldShowHalo),o=W(this.props.store,Boolean(this.props.shouldShowHalo)),n=G(this.props.store,Boolean(this.props.shouldShowDropZone)),i=$(this.props.store,Boolean(this.props.shouldShowDropZone)),r=this.lastDropZoneHintIndex,a=this.stores.draggableStore.state.dragging,s=this.stores.draggableStore.hasDragged(),l=this.stores.draggableStore.state.initiator,c=this.stores.selectableStore.state,u=this.props.store.getType()||"unknown",p=this.props.store.isType(d().oe),f=p&&Boolean(this.props.store.getCaptionStore().getValue());return{isDragging:a,initiator:l,hasDragged:s,shouldShowSelectionHalo:t||c.forceRenderSelectionHalo||Boolean(this.props.shouldForceRenderSelectionHalo),shouldShowDropParentHalo:o,currentDropZone:n,dropZoneHint:i,dropZoneHintIndex:r,shouldRenderSelectionHalo:t||c.shouldShowSelectionHalo||c.forceRenderSelectionHalo||Boolean(this.props.shouldForceRenderSelectionHalo),shouldRenderDropParentHalo:o||c.shouldShowDropParentHalo,shouldRenderDropZoneHint:!m().z4(i)||c.shouldShowDropZoneHint,shouldRenderDropZone:!m().z4(n)||c.shouldShowDropZone,propStoreType:u,isCaptionType:p,isCaptionVisible:f,showActionIsInFlight:c.showActionIsInFlight}}))}get refType(){return U}get registries(){return[I().C]}getNode(){return this.props.nodeRef?this.props.nodeRef.current:this.selectableDivRef.current}getContextClosestSelectable(){var e;return null===(e=this.context.selectable)||void 0===e?void 0:e.closestSelectable}getContextSelectableContainer(){var e;return null===(e=this.context.selectable)||void 0===e?void 0:e.selectableContainer}getScrollerContext(){return this.context.scrollerContext}getSelectableStore(){return this.stores.selectableStore}getContentEditableContext(){return this.context.contentEditableContext}renderComponent(){var e;const{isDragging:t,initiator:i,hasDragged:r,shouldShowDropParentHalo:a,shouldShowSelectionHalo:s,currentDropZone:l,dropZoneHint:c,dropZoneHintIndex:u,shouldRenderSelectionHalo:p,shouldRenderDropParentHalo:m,shouldRenderDropZoneHint:f,shouldRenderDropZone:g,propStoreType:_,isCaptionType:y,isCaptionVisible:S,showActionIsInFlight:w}=this.computedStore.state,k=Boolean(this.props.shouldShowSuggestRemoveHalo&&!this.props.store.isType(d().fb)&&this.props.store.getRemoveSuggestion()),I=Boolean(this.props.shouldShowSuggestInsertBorder&&!this.props.store.isType(d().zq)&&this.props.store.getInsertSuggestion()),C=p||m||f||g||k||I,x=n()(h().euV,`notion-${_}-block`,{[h().rny]:this.props.store.isType(d().YP),[h().Sbd]:this.props.isStartOfSyntheticList,[h().IlE]:this.props.isEndOfSyntheticList,[h().w_d]:this.props.isFirstItem,[h().Urg]:this.props.isLastItem,[h().kc9]:y,[h().f7L]:S},this.props.className),{inheritDir:T=!1}=this.props,M=this.renderDraggable((e=>(0,E.jsxs)("div",{ref:this.selectableDivRef,style:te({isPositionRelative:C,isDragging:t,hasDragged:r,initiator:i,showActionIsInFlight:w,shouldRenderSuggestInsertBorder:I},this.theme,this.props.canDrag,this.props.disablePointerEvents,this.props.style),"data-block-id":this.props.store.id,dir:o(749826).default.checkGate({gateName:"editor_basic_rtl"})&&!T?"auto":void 0,className:x,...(0,b().Z)(e||{},{onDoubleClick:e=>oe(e,this.props.canSelect,this.props.onDoubleClick),onContextMenu:e=>de(e,this.props.store,this.environment,this.props.canTriggerContextMenu,this.props.contextMenuAndDragStores,this.props.actionSectionGroupKey,this.props.showBlockMenuInput),onMouseOver:e=>ne(e,this.props.store,this.props.canSelect),onMouseOut:()=>ie(this.props.store),onClick:e=>ce(e,this.props.store,this.environment,this.props.canSelect,this.props.onEditText,this.props.onClick),onMouseMove:this.props.onMouseMove,onMouseDown:this.props.onMouseDown,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave}),children:[this.props.children,p&&(0,E.jsx)(O,{selectableStore:this.stores.selectableStore,style:this.props.haloStyle,isVisible:s,isLastItem:this.props.isLastItem}),k&&(0,E.jsx)(j,{}),m&&(0,E.jsx)(Z,{selectableStore:this.stores.selectableStore,isVisible:a}),f&&(0,E.jsx)(q,{selectableStore:this.stores.selectableStore,direction:c,index:u,aboveDropZoneMargin:this.props.aboveDropZoneMargin,belowDropZoneMargin:this.props.belowDropZoneMargin,dropzoneGap:this.props.dropzoneGap}),g&&(0,E.jsx)(H,{selectableStore:this.stores.selectableStore,direction:l,aboveDropZoneMargin:this.props.aboveDropZoneMargin,belowDropZoneMargin:this.props.belowDropZoneMargin,dropzoneGap:this.props.dropzoneGap})]}))),P=this.selectableContextValueMemoCell.memo((()=>{var e;return{selectableContainer:null===(e=this.context.selectable)||void 0===e?void 0:e.selectableContainer,closestSelectable:this}}),[this,null===(e=this.context.selectable)||void 0===e?void 0:e.selectableContainer]);return(0,E.jsx)(v().l,{value:P,children:M})}displaySelectionHalo(e){this.stores.selectableStore.state.forceRenderSelectionHalo||(this.stores.selectableStore.update((e=>({...e,forceRenderSelectionHalo:!0}))),window.setTimeout((()=>{this.stores.selectableStore.update((e=>({...e,forceRenderSelectionHalo:!1})))}),e))}renderDraggable(e){const{device:t}=this.environment;return this.props.canDrag?(0,E.jsx)(B().Z,{draggableStore:this.stores.draggableStore,forceTouch:t.isMobile&&!this.props.disableForceTouch,touchDragOnly:this.props.touchDragOnly,onDraggableDragStart:e=>re(e,this.environment,this.props.canDrag,this.props.onDraggableDragStart),onDraggableDragMove:e=>ae(e,this.props.store,this.environment,this.props.canDrag,this.props.preventBackgroundDrag,this.props.contextMenuAndDragStores,this.props.getGhostElement,this.props.disableScrollToRevealHorizontal,this.props.onDraggableDragMove),onDraggableDragEnd:e=>se(e,this.props.analyticsName,this.environment,this.props.canDrag,this.props.onDraggableDragEnd),onDraggableDragCancel:e=>le(e,this.environment,this.props.canDrag,this.props.onDraggableDragCancel),disableHorizontalEdgeScroll:this.props.disableHorizontalDragEdgeScroll,render:e}):e(void 0)}}N.displayName="SelectableLegacy";const V=i.forwardRef((function(e,t){const r=(0,a().O7)(),c=(0,i.useContext)(o(939513).U),u=(0,i.useContext)(v().a),p=(0,s().qz)(e.selectableStore,P),f=(0,s().qz)(e.draggableStore,x().Z),g=(0,i.useRef)(void 0),_=(0,i.useRef)(null),y=(0,i.useCallback)((()=>e.nodeRef?e.nodeRef.current:_.current),[e.nodeRef]),S=(0,i.useCallback)((e=>{p.state.forceRenderSelectionHalo||(p.update((e=>({...e,forceRenderSelectionHalo:!0}))),window.setTimeout((()=>{p.update((e=>({...e,forceRenderSelectionHalo:!1})))}),e))}),[p]);const{isDragging:w,initiator:C,hasDragged:T,shouldShowDropParentHalo:M,shouldShowSelectionHalo:A,currentDropZone:R,dropZoneHint:D,dropZoneHintIndex:F,shouldRenderSelectionHalo:N,shouldRenderDropParentHalo:V,shouldRenderDropZoneHint:L,shouldRenderDropZone:K,propStoreType:z,isCaptionType:Y,isCaptionVisible:J,showActionIsInFlight:X}=(0,s().VK)((()=>{const t=Q(e.store);!m().z4(t)&&t>=0&&(g.current=t);const o=ee(e.store,r,e.shouldShowHalo),n=W(e.store,Boolean(e.shouldShowHalo)),i=G(e.store,Boolean(e.shouldShowDropZone)),a=$(e.store,Boolean(e.shouldShowDropZone)),s=g.current,l=f.state.dragging,c=f.hasDragged(),u=f.state.initiator,v=p.state,h=e.store.getType()||"unknown",_=e.store.isType(d().oe),b=_&&Boolean(e.store.getCaptionStore().getValue());return{isDragging:l,initiator:u,hasDragged:c,shouldShowSelectionHalo:o||v.forceRenderSelectionHalo||Boolean(e.shouldForceRenderSelectionHalo),shouldShowDropParentHalo:n,currentDropZone:i,dropZoneHint:a,dropZoneHintIndex:s,shouldRenderSelectionHalo:o||v.shouldShowSelectionHalo||v.forceRenderSelectionHalo||Boolean(e.shouldForceRenderSelectionHalo),shouldRenderDropParentHalo:n||v.shouldShowDropParentHalo,shouldRenderDropZoneHint:!m().z4(a)||v.shouldShowDropZoneHint,shouldRenderDropZone:!m().z4(i)||v.shouldShowDropZone,propStoreType:h,isCaptionType:_,isCaptionVisible:b,showActionIsInFlight:v.showActionIsInFlight}}),[f,r,e.shouldForceRenderSelectionHalo,e.shouldShowDropZone,e.shouldShowHalo,e.store,p]),ue=(0,s().VK)((()=>Boolean(e.shouldShowSuggestRemoveHalo&&!e.store.isType(d().fb)&&e.store.getRemoveSuggestion())),[e.shouldShowSuggestRemoveHalo,e.store]),pe=(0,s().VK)((()=>Boolean(e.shouldShowSuggestInsertBorder&&!e.store.isType(d().zq)&&e.store.getInsertSuggestion())),[e.shouldShowSuggestInsertBorder,e.store]),me=N||V||L||K||ue||pe,fe=(0,s().VK)((()=>n()(h().euV,`notion-${z}-block`,{[h().rny]:e.store.isType(d().YP),[h().Sbd]:e.isStartOfSyntheticList,[h().IlE]:e.isEndOfSyntheticList,[h().w_d]:e.isFirstItem,[h().Urg]:e.isLastItem,[h().kc9]:Y,[h().f7L]:J},e.className)),[Y,J,z,e.className,e.isEndOfSyntheticList,e.isFirstItem,e.isLastItem,e.isStartOfSyntheticList,e.store]),{inheritDir:ge=!1}=e,ve=(0,l().yK)((t=>({draggable:te({isPositionRelative:me,isDragging:w,hasDragged:T,initiator:C,showActionIsInFlight:X,shouldRenderSuggestInsertBorder:pe},t,e.canDrag,e.disablePointerEvents,e.style)})),[T,C,w,me,e.canDrag,e.disablePointerEvents,e.style,pe,X]),he=(0,i.useRef)(null),_e=(0,o(676457).D)();he.current||(he.current={refType:U,getContextClosestSelectable:()=>u.closestSelectable,getContextSelectableContainer:()=>u.selectableContainer,getScrollerContext:()=>c,displaySelectionHalo:S,getNode:y,props:e,getSelectableStore:()=>p,getContentEditableContext:()=>_e}),(0,i.useLayoutEffect)((()=>{he.current={refType:U,getContextClosestSelectable:()=>u.closestSelectable,getContextSelectableContainer:()=>u.selectableContainer,getScrollerContext:()=>c,displaySelectionHalo:S,getNode:y,props:e,getSelectableStore:()=>p,getContentEditableContext:()=>_e}}),[_e,S,y,c,u.closestSelectable,u.selectableContainer,p,e]),(0,i.useImperativeHandle)(t,(()=>he.current)),(0,o(98642).c)(I().C,(()=>he.current),[]);const be=(0,k().E)("editor_basic_rtl"),ye=function(t){const{device:o}=r;return e.canDrag?(0,E.jsx)(B().Z,{draggableStore:f,forceTouch:o.isMobile&&!e.disableForceTouch,touchDragOnly:e.touchDragOnly,onDraggableDragStart:t=>re(t,r,e.canDrag,e.onDraggableDragStart),onDraggableDragMove:t=>ae(t,e.store,r,e.canDrag,e.preventBackgroundDrag,e.contextMenuAndDragStores,e.getGhostElement,e.disableScrollToRevealHorizontal,e.onDraggableDragMove),onDraggableDragEnd:t=>se(t,e.analyticsName,r,e.canDrag,e.onDraggableDragEnd),onDraggableDragCancel:t=>le(t,r,e.canDrag,e.onDraggableDragCancel),disableHorizontalEdgeScroll:e.disableHorizontalDragEdgeScroll,render:t}):t(void 0)}((t=>(0,E.jsxs)("div",{ref:_,style:ve.draggable,"data-block-id":e.store.id,dir:be&&!ge?"auto":void 0,className:fe,...(0,b().Z)(t||{},{onDoubleClick:t=>oe(t,e.canSelect,e.onDoubleClick),onContextMenu:t=>de(t,e.store,r,e.canTriggerContextMenu,e.contextMenuAndDragStores,e.actionSectionGroupKey,e.showBlockMenuInput),onMouseOver:t=>ne(t,e.store,e.canSelect),onMouseOut:()=>ie(e.store),onClick:t=>ce(t,e.store,r,e.canSelect,e.onEditText,e.onClick),onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave}),children:[e.children,N&&(0,E.jsx)(O,{selectableStore:p,style:e.haloStyle,isVisible:A,isLastItem:e.isLastItem}),ue&&(0,E.jsx)(j,{}),V&&(0,E.jsx)(Z,{selectableStore:p,isVisible:M}),L&&(0,E.jsx)(q,{selectableStore:p,direction:D,index:F,aboveDropZoneMargin:e.aboveDropZoneMargin,belowDropZoneMargin:e.belowDropZoneMargin,dropzoneGap:e.dropzoneGap}),K&&(0,E.jsx)(H,{selectableStore:p,direction:R,aboveDropZoneMargin:e.aboveDropZoneMargin,belowDropZoneMargin:e.belowDropZoneMargin,dropzoneGap:e.dropzoneGap})]}))),Se=(0,i.useMemo)((()=>({selectableContainer:u.selectableContainer,closestSelectable:he.current})),[u.selectableContainer]);return(0,E.jsx)(v().l,{value:Se,children:ye})})),L=i.forwardRef((function(e,t){const o=e=>{const o=e||null;"function"==typeof t?t(o):t&&(t.current=o)};return(0,k().E)("enable_selectable_fc")?(0,E.jsx)(V,{...e,ref:o}):(0,E.jsx)(N,{...e,ref:o})}));function O(e){return(0,E.jsx)(R().Z,{visible:e.isVisible,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onAnimationStart:()=>{e.selectableStore.setState({...e.selectableStore.state,shouldShowSelectionHalo:!0})},onAnimationEnd:()=>{e.isVisible||e.selectableStore.setState({...e.selectableStore.state,shouldShowSelectionHalo:!1})},className:h().No6,style:{position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,background:p().ZP.blueWithAlpha(.14),zIndex:u().py,borderRadius:4,...e.style}},"halo")}function Z(e){return(0,E.jsx)(R().Z,{visible:e.isVisible,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onAnimationStart:()=>{e.selectableStore.setState({...e.selectableStore.state,shouldShowDropParentHalo:!0})},onAnimationEnd:()=>{e.isVisible||e.selectableStore.setState({...e.selectableStore.state,shouldShowDropParentHalo:!1})},className:h().No6,style:{position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,background:p().ZP.blueWithAlpha(.07),borderRadius:4}},"parent")}function j(){const e=(0,l().yK)((e=>({halo:{position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,background:e.accentColors.gray[90],borderRadius:4}})),[]);return(0,E.jsx)("div",{className:h().a1k,style:e.halo})}function K(e,t,o){if(void 0===o)return{};const n=e.isMobile?3:2;return o===C().v.Above||o===C().v.Below?{position:"relative",left:-n,width:n,height:D,background:t.contentBackground,transform:"translateZ(100px)"}:{position:"relative",top:-n,width:D,height:n,background:t.contentBackground,transform:"translateZ(100px)"}}function z(e,t,o,n,i){const r={position:"absolute",pointerEvents:"none",background:p().ZP.blueWithAlpha(.43),zIndex:u().S1-t};if(e===C().v.Onto)r.left=0,r.top=0,r.right=0,r.bottom=0,r.background=p().ZP.blueWithAlpha(.14);else if(e===C().v.Above||e===C().v.Below){const t=4;r.left=0,r.right=0,e===C().v.Above?(r.top=-t,o&&(r.top-=o)):(r.bottom=-t,n&&(r.bottom-=n)),r.height=D}else{const t=8;r.top=0,r.bottom=0,e===C().v.Left?r.left=i?-i:-t:r.right=i?-i:-t,r.width=D}return r}function H(e){const t=(0,a().Fy)(),o=(0,l().Fg)(),n=void 0!==e.direction,i=Y(e.direction);return(0,E.jsx)(R().Z,{visible:n,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onAnimationStart:()=>{e.selectableStore.setState({...e.selectableStore.state,shouldShowDropZone:!0})},onAnimationEnd:()=>{n||e.selectableStore.setState({...e.selectableStore.state,shouldShowDropZone:!1})},style:z(e.direction??i,0,e.aboveDropZoneMargin,e.belowDropZoneMargin,e.dropzoneGap),children:e.direction!==C().v.Onto&&(0,E.jsx)("div",{style:K(t,o,e.direction)})},"dropZone")}function q(e){const t=(0,a().Fy)(),o=(0,l().Fg)(),n=!m().z4(e.direction),i=Y(e.direction);return(0,E.jsx)(R().Z,{visible:n,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onAnimationStart:()=>{e.selectableStore.setState({...e.selectableStore.state,shouldShowDropZoneHint:!0})},onAnimationEnd:()=>{n||e.selectableStore.setState({...e.selectableStore.state,shouldShowDropZoneHint:!1})},style:z(e.direction??i,(e.index||0)+1,e.aboveDropZoneMargin,e.belowDropZoneMargin,e.dropzoneGap),children:(0,E.jsx)("div",{style:K(t,o,e.direction)})},"hint")}function W(e,t){if(!t)return!1;const o=C().default.state;if(!o.isDragging)return!1;const{currentParentStore:n,currentHintDropZones:i,currentDropZone:r}=o;return(!r||r.type!==C().D.DropTarget)&&(i.some((e=>e.direction===C().v.Left||e.direction===C().v.Right))?Boolean(r&&r.store===e):n===e)}function G(e,t){const o=C().default.state;if(!o.isDragging)return;const{currentDropZone:n}=o;return n&&n.type===C().D.Selectable&&n.store===e&&t?n.direction:void 0}function $(e,t){const o=C().default.state;if(!o.isDragging)return;const{currentHintDropZones:n}=o;if(n&&t){const t=n.find((t=>t.type===C().D.Selectable&&t.store===e));if(t)return t.direction}}function Q(e){const t=C().default.state;if(!t.isDragging)return;const{currentHintDropZones:o}=t;return o?o.findIndex((t=>t.type===C().D.Selectable&&t.store===e)):void 0}function Y(e){const t=(0,i.useRef)(e);return e&&(t.current=e),t.current}const J=new(c().default)((()=>A().default.state.phase),{debugName:"SelectionPhaseStore"}),X=new(c().default)((()=>{const e=(0,o(644329).RR)(o(845622).default.state);return Boolean(e)}),{debugName:"isCompletionsActiveStore"});function ee(e,t,o){const{device:n}=t;if(!o)return!1;if(!(0,S().Mn)(n)&&!X.state)return!1;if(J.state!==A().SelectionPhase.Selected)return!1;const{stores:i}=A().default.state;return i.indexOf(e)>=0&&!C().default.state.isDragging}function te(e,t,o,n,i){const{isPositionRelative:r,isDragging:a,hasDragged:s,showActionIsInFlight:l,initiator:c,shouldRenderSuggestInsertBorder:d}=e,u={};return"touch"===c&&(u.transition="transform 200ms ease-out",o&&a&&!s&&(u.boxShadow=t.mediumBoxShadow,u.transform="scale(1.05)",u.borderRadius=3)),r&&(u.position="relative"),l&&(u.opacity=.5),n&&(u.pointerEvents="none"),d&&(u.borderWidth=8,u.borderStyle="solid",u.borderColor=t.accentColors.blue[50]),{...u,...i}}function oe(e,t,o){t||(0,_().ZP)({event:e,context:_().Af.EditorDoubleClick,callback:()=>{o&&o(e)}})}function ne(e,t,o){o&&(0,_().ZP)({event:e,context:_().Af.EditorMouseOver,callback:()=>{T().Z.setState({...T().Z.state,hoveredStore:t,lastHoveredStore:t})}})}function ie(e){T().Z.state.hoveredStore===e&&T().Z.setState({...T().Z.state,hoveredStore:void 0})}function re(e,t,o,n){const{mobileNative:i}=t;o&&(e.preventDefault(),i&&i.buzz()),n&&n(e)}function ae(e,t,n,i,r,a,s,l,c){const{device:d}=n;i&&!r?C().default.state.isDragging?f().td(n,{currentX:e.currentX,currentY:e.currentY}):y().X9()&&(g().Ys({environment:n,store:t,selectMode:g().oj(n)}),f().f$(n,{startX:e.startX,startY:e.startY,stores:a||A().default.state.stores,isNativeDrag:!1,getGhostElement:s})):o(557576).default.state.isActive||d.isPhone||o(658325).AI({environment:n,target:e.target,startX:e.startX,startY:e.startY,showSelectionRect:!0,preventSelectStores:[],allowVerticalEdgeScroll:!0,allowHorizontalEdgeScroll:!l}),c&&c(e)}function se(e,t,n,i,r){const{device:a}=n;a.isMobile&&o(158083).Z.state.isDragging&&e.preventDefault(),i&&C().default.state.isDragging&&f().fX({environment:n,shiftKey:e.shiftKey,optionKey:e.optionKey,commandKey:e.commandKey,analyticsFrom:t}),r&&r(e)}function le(e,t,o,n){o&&C().default.state.isDragging&&(f().cQ(t),g().ZH({environment:t})),n&&n(e)}function ce(e,t,n,i,r,a){(0,_().ZP)({event:e,context:_().Af.EditorClick,callback:()=>{var s;if(null!==(s=A().default.getDefaultContainerFromTarget(e.target))&&void 0!==s&&s.isPeekRenderer()||o(82937).E5(n),(0,S().Mn)(n.device))y().X9()||!i||t.isInlineCollectionView()||g().Ys({environment:n,store:t,selectMode:g().oj(n)});else if(r){const t=(0,o(550054).Rb)(e.target);t&&o(269299).createAndCommit({userAction:"Selectable.handleClick",environment:n,canUndo:!0,perform:e=>{r({isAtStartOfLine:"start"===t,isClick:!0,transaction:e})}})}a&&a(e)}})}function de(e,t,n,i,r,a,s){const{device:l}=n;if(l.isAndroid){const n=o(127519).default.state,i=(0,S().mh)(t),r=i&&"empty"!==n.mode&&(0,o(271308).r)(n.multiSelection,i);if("editing"!==n.mode||!r)return w().isExpanded(w().get())||e.preventDefault(),e.stopPropagation(),!1}if(i){var c;const i=(0,o(887430).fm)(t),l=void 0!==t.getAssociatedCollectionStore(),d=null==i||null===(c=i.collectionViewStore())||void 0===c?void 0:c.getType();(0,_().ZP)({event:e,context:_().Af.EditorContextMenu,callback:()=>{e.preventDefault(),g().Ys({environment:n,store:t}),o(242619).Qn({environment:n,stores:r||A().default.state.stores,left:e.clientX,top:e.clientY,actionSectionGroupKey:l?"timeline"===d?"block_in_collection_timeline_view":"block_in_collection":a||"default",showInput:Boolean(s),analyticsFrom:"content_block_menu",optionalAnalyticsProperties:{collectionContextStore:i}})}})}}},299519:(e,t,o)=>{o.d(t,{Z:()=>k});o(267602),o(228244);var n=o(667294),i=()=>o(504008),r=()=>o(142735),a=()=>o(846550),s=()=>o(568017),l=()=>o(513670),c=()=>o(879952),d=()=>o(631538),u=()=>o(247724),p=()=>o(949842),m=()=>o(677559);const f={SelectableHoverMenuOverlay:new(m().Ss)("SelectableHoverMenuOverlay",(async()=>await Promise.all([o.e(62743),o.e(52774),o.e(44832),o.e(39938),o.e(90698),o.e(84885),o.e(37358),o.e(5242),o.e(7312),o.e(90424),o.e(81580),o.e(84325),o.e(31189),o.e(69343),o.e(46293),o.e(94556),o.e(78701),o.e(38804),o.e(17100),o.e(11846),o.e(70355),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(46616),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63707),o.e(86609),o.e(91253),o.e(4642),o.e(5006),o.e(6612),o.e(61171),o.e(23179),o.e(75377),o.e(31020),o.e(2942),o.e(73682),o.e(58591),o.e(54803),o.e(1953),o.e(10216),o.e(58565),o.e(69197),o.e(42055),o.e(38739),o.e(44751),o.e(81567),o.e(63257),o.e(34291),o.e(1913),o.e(56054),o.e(95076),o.e(92341),o.e(82658),o.e(4163),o.e(69583),o.e(22759),o.e(20343),o.e(21820),o.e(46945),o.e(10553),o.e(67019),o.e(27039),o.e(25265),o.e(14581),o.e(38632),o.e(61651),o.e(88702),o.e(54307),o.e(43184),o.e(87647),o.e(75861),o.e(46257),o.e(15819),o.e(45376),o.e(74943),o.e(23721),o.e(58461),o.e(72329),o.e(19592),o.e(3331),o.e(98672),o.e(52658),o.e(44642),o.e(78),o.e(58586)]).then(o.bind(o,915914))))},g=(0,m().kF)(f.SelectableHoverMenuOverlay,(e=>e.default));var v=()=>o(557576),h=()=>o(797522),_=()=>o(965903),b=o(785893);const y=10;function S(e){let t=!0;if(e.length<=y){const{selectableElementRectMap:o}=i().Z.withListenerIgnored((()=>h().default.getState()));t=e.some((e=>function(e,t){const o=t.target instanceof Element?t.target:t.target.parentElement;if(!o)return!0;if(o.closest(`.${u().$Ot}`))return!1;const n=o.closest(`.${u().euV}`);if(!n)return!0;const i=e.get(n);if(!i)return!0;const r=n.getBoundingClientRect();return!(i.x===r.x&&i.y===r.y&&i.width===r.width&&i.height===r.height)}(o,e)))}t&&c().Ch()}function w(e){const{isDefaultContainer:t}=e,{currentRect:o,isActive:n,showSelectionRect:i}=(0,r().VK)((()=>v().default.state.isActive?v().default.state:{currentRect:void 0,isActive:!1,showSelectionRect:!1}),[]),l=(0,a().yK)((()=>({selection:{position:"absolute",pointerEvents:"none",backgroundColor:s().ZP.blueWithAlpha(.14),border:"1px solid transparent",left:null==o?void 0:o.left,top:null==o?void 0:o.top,width:o?o.right-o.left:0,height:o?o.bottom-o.top:0}})),[o]);return n&&i&&t?(0,b.jsx)("div",{style:l.selection}):null}const k=function(e){const{render:t}=e,i=(0,n.useRef)(null),a=(0,n.useRef)({isPeekRenderer:()=>e.isPeekRenderer??!1,getProps:()=>e,getNode:()=>i.current});(0,n.useLayoutEffect)((()=>{a.current.isPeekRenderer=()=>e.isPeekRenderer??!1,a.current.getProps=()=>e,a.current.getNode=()=>i.current}),[e]);const s=(0,o(219727).O7)();(0,o(98642).c)(o(352761).Z,(()=>a.current),[]),(0,n.useLayoutEffect)((()=>{const t=a.current;if(e.isDefaultContainer){const o=e.isRootContainer?l().G0([t],_().default.state.defaultContainerStack||[]):l().G0(_().default.state.defaultContainerStack||[],[t]);_().default.setState({..._().default.state,defaultContainerStack:o,pivot:void 0,anchor:void 0,anchorContainer:void 0})}if(e.droppable){const o=e.isRootContainer?l().G0([t],_().default.state.droppableContainerStack||[]):l().G0(_().default.state.droppableContainerStack||[],[t]);_().default.setState({..._().default.state,droppableContainerStack:o})}let o;return c().Jy(),i.current&&(o=new MutationObserver(S),o.observe(i.current,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),()=>{if(e.isDefaultContainer){const e=l().zu(_().default.state.defaultContainerStack||[],t);_().default.setState({..._().default.state,defaultContainerStack:e,pivot:void 0,anchor:void 0,anchorContainer:void 0})}if(e.droppable){const e=l().zu(_().default.state.droppableContainerStack||[],t);_().default.setState({..._().default.state,droppableContainerStack:e})}o&&o.disconnect()}}),[a,e.droppable,e.isDefaultContainer,e.isRootContainer]);const{closestSelectable:u}=(0,n.useContext)(d().a)??{},m=(0,n.useCallback)((t=>{const{device:n}=s;e.disableRectangularSelection||0!==t.button||(n.isPhone?(0,p().ZP)({event:t,context:p().Af.EditorMouseDown,callback:()=>{c().ZH({environment:s}),o(932753).wG(),o(156958).MO()}}):(0,p().ZP)({event:t,context:p().Af.EditorMouseDown,callback:()=>{if(t.target instanceof Element){if(t.target.closest("button")||t.target.closest('[role="button"]'))return}1!==t.button&&(t.preventDefault(),o(658325).AI({environment:s,target:t.target,startX:t.clientX,startY:t.clientY,showSelectionRect:!0,preventSelectStores:[],allowVerticalEdgeScroll:!0,allowHorizontalEdgeScroll:!1}))}}))}),[s,e.disableRectangularSelection]),f=(0,n.useCallback)((t=>{(function(e){return h().default.hasBeenUpdatedSince(e.timeStamp)})(t)||!e.store.canEdit()||e.store instanceof o(826955).G&&(0,o(95718).Eo)(e.store)||(0,p().ZP)({event:t,context:p().Af.EditorClick,callback:()=>{var n;if(null!==(n=_().default.getDefaultContainerFromTarget(t.target))&&void 0!==n&&n.isPeekRenderer()||o(82937).E5(s),!o(154057).X9()&&!e.disableEditNearestBlock){const{clientX:e,clientY:n,target:i}=t;o(492788).default.afterNextFlush((()=>{o(269299).createAndCommit({userAction:"SelectableContainer.click",environment:s,canUndo:!0,perform:t=>o(990966).editNearestBlockOrInsertIfAtBottomOfPage(s,{x:e,y:n,target:i instanceof Element?i:void 0},t)})}))}}})}),[s,e.disableEditNearestBlock,e.store]),y=(0,r().VK)((()=>Boolean(v().default.state.isActive&&v().default.state.defaultContainer===a.current)),[]),k=(0,r().VK)((()=>(0,b.jsx)("div",{style:{display:"contents"},ref:i,children:t({selectableEvents:{onMouseDown:m,onClick:f},selectableHoverMenuOverlay:(0,b.jsx)(g,{selectableContainer:a.current})})})),[f,m,t]),I=(0,n.useMemo)((()=>({selectableContainer:a.current,closestSelectable:u})),[u]);return(0,b.jsx)(d().l,{value:I,children:(0,b.jsx)(o(748621).Z,{open:y,origin:k,children:(0,b.jsx)(w,{isDefaultContainer:e.isDefaultContainer})})})}},15348:(e,t,o)=>{o.d(t,{Z:()=>u});var n=o(667294),i=()=>o(219727),r=()=>o(225339),a=()=>o(661453),s=()=>o(725751),l=()=>o(148882),c=()=>o(154439),d=o(785893);function u(e){const t=(0,i().O7)(),o=(0,n.useCallback)((async e=>r().iS(e.url)?(e.permissionRecord&&await l().transactionQueue.awaitRecordTransaction(e.permissionRecord),(0,a().a)(t,e,Boolean(s().default.state.isNotionProtocolBugFixed))):e.url),[t]);return(0,d.jsx)(c().Z,{request:{url:e.url,permissionRecord:e.permissionRecord,useS3Url:e.useS3Url},performRequest:o,render:e.render})}},312446:(e,t,o)=>{o.d(t,{Pn:()=>b,k$:()=>w,oR:()=>S,ow:()=>y,wr:()=>k});var n=o(667294),i=()=>o(219727),r=()=>o(846550),a=()=>o(506347),s=()=>o(788860),l=()=>o(207874),c=()=>o(47443),d=()=>o(497065),u=()=>o(102182),p=()=>o(92175),m=()=>o(250625),f=()=>o(614027),g=()=>o(636754),v=()=>o(491174),h=o(785893);const _=(0,s().vU)({open:{defaultMessage:"Open",id:"automations.buttonTrigger.open"},undo:{defaultMessage:"Undo",id:"automations.buttonTrigger.undo"}});function b(e){const t=(0,r().Fg)();return(0,h.jsx)(p().Z,{...e,style:{color:t.regularInvertedTextColor,fontWeight:500,height:void 0,marginLeft:0,...e.style}})}function y(e){const{onUndo:t}=e,o=(0,i().O7)();return(0,h.jsx)(b,{onClick:()=>{l().Yw(o,!0),u().rN(),null==t||t()},children:(0,h.jsx)(s()._H,{defaultMessage:"Undo",id:"snackbar.undo.title"})})}function S(){return(0,h.jsx)(b,{onClick:()=>{},children:(0,h.jsx)(s()._H,{defaultMessage:"Help",id:"snackbar.goToSyncedCollectionHelpButton.title"})})}function w(){const e=(0,i().O7)(),t=(0,n.useCallback)((()=>{d().c4({environment:e,url:"https://notion.so/help/audio-dictation"})}),[e]);return(0,h.jsx)(b,{onClick:t,children:(0,h.jsx)(s()._H,{defaultMessage:"Get help",id:"snackbar.goToGetHelpButton.title"})})}function k(e){const{blockToOpenStore:t,performUndo:o,onOpenBlock:l}=e,d=(0,i().O7)(),u=(0,r().yK)((e=>({icon:{fill:e.regularInvertedTextColor},wrap:{display:"flex",columnGap:8}})),[]),p=(0,n.useMemo)((()=>t?e=>{c()._c({environment:d,openInNew:(0,m().DJ)(e),store:t,visitType:f().vu.Link,pageVisitSource:a().tY.ButtonAutomation}),null==l||l(t)}:void 0),[t,d,l]);return(0,h.jsxs)("div",{style:u.wrap,children:[p&&(0,h.jsx)(b,{onClick:p,icon:e=>(0,g().g)({...e,...u.icon,width:16,height:16}),style:{paddingRight:0},children:(0,h.jsx)(s()._H,{..._.open})}),o&&(0,h.jsx)(b,{onClick:o,icon:e=>(0,v().s)({...e,...u.icon,marginTop:-2,width:16,height:16}),children:(0,h.jsx)(s()._H,{..._.undo})})]})}},213586:(e,t,o)=>{o.d(t,{Z:()=>f});var n=o(667294),i=()=>o(219727),r=()=>o(142735),a=()=>o(494488),s=()=>o(907577),l=()=>o(788860),c=()=>o(465371),d=()=>o(480089),u=o(785893);const p=(0,l().vU)({placeholder:{defaultMessage:"Heading 2",id:"subheaderBlock.placeholder"}});function m(e,t){const m=(0,l().YB)(),f=(0,i().O7)(),g=(0,i().Fy)(),v=(0,n.useRef)(null),h=(0,d().rv)(e.store,!0),_=(0,d().Iy)(e.store),b=(0,r().VK)((()=>e.store.getBlockTitleStore()),[e.store]),y=(0,r().VK)((()=>Boolean(e.store.getInsertSuggestion())),[e.store]),S=(0,o(540896).O)(),w=(0,o(846550).yK)((t=>{const o=(g.isMobile||e.smallerHeaders?1.25:s().Lh)*s().u9,n=g.isMobile||e.smallerHeaders?1.25:s().Lh;return{root:{display:"flex",width:"100%",...h},toggle:{...!S&&{height:`${o}em`,marginTop:g.isMobile?1:a().ZD.paddingTop,marginBottom:a().ZD.paddingBottom}},headerText:{...a().ZD,...!S&&(0,s().HV)({fontSizeValue:n,fontFamily:_}),...S&&{paddingTop:0,paddingBottom:0}},headerTextPlaceholder:{...y?{color:t.text.uiBlueTertiary,WebkitTextFillColor:"initial"}:{WebkitTextFillColor:t.headerBlockPlaceholderTextColor}}}}),[g.isMobile,e.smallerHeaders,h,_,S,y]),k=(0,r().VK)((()=>c().fn(e.store)),[e.store]),I=(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o(345837).Z,{tagName:"h3",disabled:e.disabled,store:b,placeholder:m.formatMessage(p.placeholder),placeholderStyle:w.headerTextPlaceholder,style:w.headerText,pasteBehavior:"block",legacyTransclusionParentStore:e.legacyTransclusionParentStore,inPageFind:o(12512).B3.block_match,renderWhiteSpaceWhenEmptyOnAndroid:!0}),(0,u.jsx)(o(37399).Z,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store})]});return(0,d().ez)(e.store,t,(0,n.useMemo)((()=>({renderedType:"sub_header",getNode:()=>v.current,getBlockStore:()=>e.store,activate(){c().th(f,e.store,e.hideContent)}})),[f,e.hideContent,e.store]),(0,u.jsx)("div",{ref:v,style:{...w.root,...e.style},children:k?(0,u.jsx)(o(824940).Z,{store:e.store,toggleStyle:w.toggle,childrenStyleWhenToggleable:{display:"flex"},hideContent:e.hideContent,disabled:e.disabled,disableCommentMenu:e.disableCommentMenu,disableHoverMenu:e.disableHoverMenu,disableDrag:e.disableDrag,children:I}):I}))}const f=n.memo(n.forwardRef(m),o(632314).Z)},892968:(e,t,o)=>{o.d(t,{Z:()=>f});var n=o(667294),i=()=>o(219727),r=()=>o(142735),a=()=>o(494488),s=()=>o(907577),l=()=>o(788860),c=()=>o(465371),d=()=>o(480089),u=o(785893);const p=(0,l().vU)({placeholder:{defaultMessage:"Heading 3",id:"subsubheaderBlock.placeholder"}});function m(e,t){const m=(0,l().YB)(),f=(0,i().O7)(),g=(0,i().Fy)(),v=(0,n.useRef)(null),h=(0,d().rv)(e.store,!0),_=(0,d().Iy)(e.store),b=(0,r().VK)((()=>e.store.getBlockTitleStore()),[e.store]),y=(0,r().VK)((()=>Boolean(e.store.getInsertSuggestion())),[e.store]),S=(0,o(540896).O)(),w=(0,o(846550).yK)((t=>{const o=(g.isMobile||e.smallerHeaders?1.17:s().C)*s().u9,n=g.isMobile||e.smallerHeaders?1.17:s().C;return{root:{display:"flex",width:"100%",...h},toggle:{...!S&&{height:`${o}em`,marginTop:g.isMobile?1:a().ZD.paddingTop,marginBottom:a().ZD.paddingBottom}},headerText:{...a().ZD,...!S&&(0,s().Jr)({fontSizeValue:n,fontFamily:_}),...S&&{paddingTop:0,paddingBottom:0}},headerTextPlaceholder:{...y?{color:t.text.uiBlueTertiary,WebkitTextFillColor:"initial"}:{WebkitTextFillColor:t.headerBlockPlaceholderTextColor}}}}),[g.isMobile,e.smallerHeaders,h,_,S,y]),k=(0,r().VK)((()=>c().fn(e.store)),[e.store]),I=(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o(345837).Z,{tagName:"h4",disabled:e.disabled,store:b,placeholder:m.formatMessage(p.placeholder),placeholderStyle:w.headerTextPlaceholder,style:w.headerText,pasteBehavior:"block",legacyTransclusionParentStore:e.legacyTransclusionParentStore,inPageFind:o(12512).B3.block_match,renderWhiteSpaceWhenEmptyOnAndroid:!0}),(0,u.jsx)(o(37399).Z,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store})]});return(0,d().ez)(e.store,t,(0,n.useMemo)((()=>({renderedType:"sub_sub_header",getNode:()=>v.current,getBlockStore:()=>e.store,activate(){c().th(f,e.store,e.hideContent)}})),[f,e.hideContent,e.store]),(0,u.jsx)("div",{ref:v,style:{...w.root,...e.style},children:k?(0,u.jsx)(o(824940).Z,{store:e.store,toggleStyle:w.toggle,childrenStyleWhenToggleable:{display:"flex"},hideContent:e.hideContent,disabled:e.disabled,disableCommentMenu:e.disableCommentMenu,disableHoverMenu:e.disableHoverMenu,disableDrag:e.disableDrag,children:I}):I}))}const f=n.memo(n.forwardRef(m),o(632314).Z)},378907:(e,t,o)=>{o.d(t,{Z:()=>s});o(241792),o(667294);var n=o(785893);const i={height:32,width:"100%"},r={paddingTop:8,paddingBottom:8},a={fontWeight:o(707513).Ue.regular,textAlign:"left",paddingTop:8,paddingBottom:8};const s=function(e){let{columns:t,rows:s,cellStyle:d,tableStyle:u,rowStyle:p,tableBodyStyle:m,hideHeader:f,hideTopBorderForFirstRow:g,hideTopBorderForHeader:v}=e;const h=(0,o(846550).Fg)();return(0,n.jsxs)("table",{style:{...l(h,v),...u},children:[!f&&(0,n.jsx)("thead",{children:(0,n.jsx)("tr",{style:i,children:t.map((e=>(0,n.jsx)("th",{style:{...a,...e.style},children:(0,n.jsx)(o(67961).Z,{isSmall:!0,children:e.header})},e.key)))})}),(0,n.jsx)("tbody",{style:m,children:s.map(((e,o)=>(0,n.jsx)("tr",{style:{...c(h),...0===o&&g?{borderTop:void 0}:{},..."function"==typeof p?p({rowIndex:o}):p},children:e.columns.map(((e,i)=>{const a=t[i];return(0,n.jsx)("td",{style:{...r,..."function"==typeof d?d({rowIndex:o,columnIndex:i}):d},children:e},a.key)}))},e.key)))})]})};function l(e,t){return{width:"100%",fontSize:13,borderTop:t?void 0:`1px solid ${e.regularDividerColor}`,borderBottom:`1px solid ${e.regularDividerColor}`}}function c(e){return{width:"100%",borderTop:`1px solid ${e.regularDividerColor}`}}},345837:(e,t,o)=>{o.d(t,{Z:()=>H});o(267602),o(653476),o(749411),o(241792);var n=o(667294),i=()=>o(156642),r=()=>o(26970),a=()=>o(527327),s=()=>o(582900),l=()=>o(396136),c=()=>o(955620),d=()=>o(572948),u=()=>o(509917),p=()=>o(788860),m=()=>o(568017),f=()=>o(970105),g=()=>o(491308),v=()=>o(346839),h=()=>o(990966),_=()=>o(269299),b=()=>o(869211),y=()=>o(8208),S=()=>o(958783),w=()=>o(201741),k=()=>o(641702),I=()=>o(527278),C=()=>o(191003),x=()=>o(271308),T=()=>o(550054),M=()=>o(677559),P=()=>o(639832),A=()=>o(297861),R=()=>o(845622),B=()=>o(720029),E=()=>o(762557),D=()=>o(749826),U=()=>o(158429),F=()=>o(302353),N=()=>o(127519),V=()=>o(934262);const L={CoEditingTaskManager:new(M().Ss)("CoEditingTasksManager",(async()=>await Promise.all([o.e(5242),o.e(68101)]).then(o.bind(o,792931))))};let O;var Z=o(785893);const j=(0,p().vU)({typeTextPlaceholder:{defaultMessage:"Press â€˜/â€™ for commandsâ€¦",id:"text.commandsMenuNotOpen.placeholder"},expandedPlaceholder:{defaultMessage:"Write, press 'space' for AI, 'â€‰/â€‰' for commandsâ€¦",id:"text.expandedPlaceholder"},postBodyPlaceholder:{defaultMessage:"Share your announcement or update...",id:"text.postBody.placeholder"},typeAiTextPlaceholder:{defaultMessage:"Press â€˜spaceâ€™ for AI, â€˜/â€™ for commandsâ€¦",id:"text.commandsMenuNotOpen.placeholder.ai"},typeTextAiPlaceholder:{defaultMessage:"Press â€˜/â€™ for commands, â€˜spaceâ€™ for AIâ€¦",id:"text.commandsMenuNotOpen.placeholder.textAi"},filterPlaceholder:{defaultMessage:"Type to filterâ€¦",id:"text.commandsMenuOpen.placeholder"},nativeMABFilterInsert:{defaultMessage:"Insert",id:"text.nativeMABFilter.insert"},nativeMABFilterTurnInto:{defaultMessage:"Turn into",id:"text.nativeMABFilter.turnInto"}}),K=new(o(435308).default)((()=>"on"===D().default.getEligibleGroup({experimentId:"prioritize_slash_menu_block_placeholder",defaultGroup:"control"})?I().Z.formatMessage(j.typeTextAiPlaceholder):I().Z.formatMessage(j.typeAiTextPlaceholder)),{debugName:"aiTextPlaceholderMessageStore"});class z extends(()=>o(10227))().Z{constructor(e){super(e),this.editor=null,this.mergeEditorRefs=(0,a().sH)(),this.triggeredAnalytics=!1,this.reminderTimers={},this.onTutorialNextButtonClick=()=>{if(!P().Z.state.open&&!this.props.disableSlashCommands){const e=N().default.state;"editing"===e.mode&&_().createAndCommit({userAction:"TourTutorial.slashTooltip",environment:this.props.environment,canUndo:!0,perform:t=>{f().hJ({environment:this.props.environment,editorMode:this.getEditorMode(),string:o(543934).$t,multiSelection:e.multiSelection,disableMentions:!0,disableSlashCommands:!1,disableEmojiCommands:!0,transaction:t})}})}},this.renderContentContainer=(e,t)=>{const n=this.getThemeAndSubscribe(),i=this.getHtmlMemo.memo((()=>this.getHtmlFn(n)),[n]),r=(0,Z.jsx)(o(24216).Z,{...this.classNameAndStyleStore.state,onBlur:this.props.onBlur,onFocus:this.props.onFocus,canEditStore:this.canEditStore,spellCheck:!this.canExclusivelyComment()&&!this.props.disableBrowserSpellcheck,getHtml:i,getSelection:this.getContainerSelection,onMutation:this.handleMutation,onCompositionStart:()=>{return e=this.props.onChange,t=this.props.environment,h().setSelectionComposing(t,!0),void(e&&e());var e,t},onCompositionEnd:this.handleCompositionEnd,onSelect:t,placeholder:this.getCurrentPlaceholder(),onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,suppressNewlineEvents:!0,disableContentEditableWhenNotEditingTextOnMobile:!0,expandSelectionOnTripleClick:!0,id:this.props.id,tagName:this.props.tagName,...e,ref:this.mergeEditorRefs(this.handleEditorRef,e.leafRef)});return this.isPageContentForDemoTutorial()?(0,Z.jsx)(o(115098).u,{step:"demo_text_block",children:r}):this.isPageContentForTourTutorial()?(0,Z.jsx)(o(21062).N,{step:"create_page_type_slash",showSidebarOverlays:!1,onNextButtonClick:this.onTutorialNextButtonClick,children:r}):r},this.handleEditorRef=e=>{this.editor=e},this.isSpaceComposition=()=>{const e=c().eeV(this.getTextValue());return 1===e.length&&("ã€€"===e[0]||" "===e[0])},this.handleCompositionEnd=()=>{h().setSelectionComposing(this.props.environment,!1),"suggest"!==this.getEditorMode()&&f().g2({environment:this.props.environment,store:this.props.store,usingMultiSelection:!0}),this.props.onChange&&this.props.onChange(),this.shouldRenderInteractiveAiPlaceholderStore.state&&this.isSpaceComposition()?b().toggleInitialPrompt({from:"spacebar",environment:this.props.environment}):_().createAndCommit({userAction:"Text.runAllFiltersAfterCompositionEnd",environment:this.props.environment,canUndo:!0,perform:e=>{this.props.disableFilters||o(595426).Gu({environment:this.props.environment,store:this.props.store,editorMode:this.getEditorMode(),transaction:e})}})},this.handleDelete=e=>{if(!this.canEditStore.state)return;if(this.editor&&this.editor.isComposing())return;this.logTypingLag("typing_delete");const{store:t}=this.props,o=N().default.state;if("editing"===o.mode){const n=o.multiSelection;if(n.start.store===t){const t=this.getEditorMode();_().createAndCommit({userAction:"Text.handleDelete",environment:this.props.environment,canUndo:!0,perform:o=>{g().as({environment:this.props.environment,multiSelection:n,deleteForwards:!0,transaction:o,event:e,editorMode:t})}})}}W(),this.props.onChange&&this.props.onChange()},this.handleForwardDeleteAtEndOfLine=e=>{if(!this.canEditStore.state)return;if(this.editor&&this.editor.isComposing())return;const{store:t}=this.props,o=N().default.state;if("editing"!==o.mode)return;const n=o.multiSelection;(0,C().iG)(n)&&(0,T().J_)(t,{startIndex:n.start.index,endIndex:n.end.index})&&this.handleDelete(e)},this.handleBackspace=e=>{if(!this.canEditStore.state||this.editor&&this.editor.isComposing())return;this.logTypingLag("typing_backspace");const{store:t}=this.props,o=N().default.state;if("editing"===o.mode){const n=o.multiSelection;if(n.start.store===t){if(g().YV({device:this.props.environment.device,event:e,multiSelection:n}))return;const t=this.getEditorMode();_().createAndCommit({userAction:"Text.handleBackspace",environment:this.props.environment,canUndo:!0,perform:o=>{g().as({environment:this.props.environment,multiSelection:n,deleteForwards:!1,transaction:o,event:e,editorMode:t})}})}}W(),this.props.onChange&&this.props.onChange(e)},this.handleEnter=e=>{if(!this.canEditStore.state)return;if(this.logTypingLag("typing_enter"),o(435441).IL(e),this.editor&&this.editor.isComposing())return;const t=N().default.state;if("editing"===t.mode)if(this.props.onEnter)this.props.onEnter(e);else{const{multiSelection:e}=t;_().createAndCommit({userAction:"Text.handleEnter",environment:this.props.environment,canUndo:!0,perform:t=>{v().IO({environment:this.props.environment,editorMode:this.getEditorMode(),multiSelection:e,transaction:t})}}),W()}this.props.onChange&&this.props.onChange(e)},this.handleShiftEnter=e=>{if(!this.canEditStore.state)return;if(this.editor&&this.editor.isComposing())return;const t=N().default.state;if("editing"===t.mode){const{device:o}=this.props.environment;if(!("shiftKey"in e)||e.shiftKey&&!o.isIOS){if(this.props.disableShiftEnter)return;_().createAndCommit({userAction:"Text.handleShiftEnter",environment:this.props.environment,canUndo:!0,perform:e=>{f().hJ({environment:this.props.environment,editorMode:this.getEditorMode(),string:"\n",multiSelection:t.multiSelection,disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:e,mentionSectionOrdering:this.props.mentionSectionOrdering})}}),this.props.onChange&&this.props.onChange(e)}else this.handleEnter(e)}},this.handleTab=e=>{if(this.canEditStore.state)if("suggest"!==this.getEditorMode()){if(this.logTypingLag("typing_tab"),this.props.onTab){this.props.onTab(e)||e.preventDefault()}else e.preventDefault(),_().createAndCommit({userAction:"Text.handleTab",environment:this.props.environment,canUndo:!0,perform:e=>{f().n2({environment:this.props.environment,shiftKey:!1,transaction:e})}}),W();this.props.onChange&&this.props.onChange()}else e.preventDefault()},this.handleUntab=e=>{if(this.canEditStore.state)if("suggest"!==this.getEditorMode()){if(this.logTypingLag("typing_untab"),this.props.onUntab){this.props.onUntab(e)||e.preventDefault()}else e.preventDefault(),_().createAndCommit({userAction:"Text.handleUntab",environment:this.props.environment,canUndo:!0,perform:e=>{f().n2({environment:this.props.environment,shiftKey:!0,transaction:e})}}),W();this.props.onChange&&this.props.onChange()}else e.preventDefault()},this.handleAnnotation=(e,t)=>{this.canEditStore.state&&(t.preventDefault(),o(940417).aS({environment:this.props.environment,annotation:e}),W(),this.props.onChange&&this.props.onChange(),o(491927).du(this.props.environment,{type:c().J7s(e)}))},this.handleToggleHighlight=e=>this.handleAnnotation(["h",o(872430).Z.getMostRecentlyUsedColor()],e),this.handleToggleBold=e=>this.handleAnnotation(["b"],e),this.handleToggleItalics=e=>this.handleAnnotation(["i"],e),this.handleToggleStrike=e=>this.handleAnnotation(["s"],e),this.handleToggleUnderline=e=>this.handleAnnotation(["_"],e),this.handleToggleCode=e=>this.handleAnnotation(["c"],e),this.handleClick=e=>{this.handleClickActions(e),this.props.onClick&&this.props.onClick(e)},this.handleContextMenu=e=>{const t=this.parentBlockStore.state;t&&k().li({environment:this.props.environment,event:e,textValue:this.getTextValue(),editorNode:this.getEditorNode(),store:this.props.store,parentStore:t,canEdit:this.canEditStore.state})},this.handleMouseOver=e=>{k().vO({environment:this.props.environment,event:e,textValue:this.getTextValue(),editorNode:this.getEditorNode(),store:this.props.store,parentStore:this.props.parentStore,canEdit:this.canEditStore.state})},this.handleMouseOut=e=>{k().kV({environment:this.props.environment,event:e,textValue:this.getTextValue(),editorNode:this.getEditorNode(),store:this.props.store,parentStore:this.props.parentStore,canEdit:this.canEditStore.state})},this.handleCut=e=>{if(this.canEditStore.state)return this.props.onCut?(this.props.onCut(e),void W()):void(this.props.clipboardActions&&(this.props.clipboardActions.cutWithMaybeConfirmation({environment:this.props.environment,event:e,markdownLinkifyIt:this.props.markdownLinkifyIt}),W(),this.props.onChange&&this.props.onChange()));e.preventDefault()},this.handlePaste=e=>{this.canEditStore.state&&(_().createAndCommit({userAction:"Text.handlePaste",environment:this.props.environment,canUndo:!0,perform:t=>{var o;null===(o=this.props.clipboardActions)||void 0===o||o.paste({environment:this.props.environment,event:e,disableEmbedMenu:Boolean(this.props.disableEmbedMenu),transaction:t,onPasteFiles:this.props.onPasteFiles||this.props.clipboardActions.pasteFilesForBlocks,formulasModule:this.props.formulasModule,markdownLinkifyIt:this.props.markdownLinkifyIt,tinyMceMicrosoftWordPasteFilter:this.props.tinyMceMicrosoftWordPasteFilter})}}),W(),this.props.onChange&&this.props.onChange())},this.handleKeypress=e=>{const t=this.parentBlockStore.state,n=t&&t.getType(),r=Boolean(n&&(0,i().hD)(n));if(" "===e.key&&!e.shiftKey&&!e.ctrlKey&&!e.altKey&&this.isEmpty()&&(this.shouldRenderInteractiveAiPlaceholderStore.state||this.isHorizon1PlaceholderEnabledStore.state)&&!this.props.store.inMemoryRecordCache.isMockTextStore&&r&&!o(524434).KR.isOffline())return e.preventDefault(),void b().toggleInitialPrompt({from:"spacebar",environment:this.props.environment});this.canEditStore.state||e.metaKey&&"c"===e.key||e.preventDefault()},this.handleCopy=e=>{!function(e,t,o,n,i){if(t)return void t(e);null==i||i.copy({environment:n,event:e,markdownLinkifyIt:o})}(e,this.props.onCopy,this.props.markdownLinkifyIt,this.props.environment,this.props.clipboardActions)},this.handleMoveUp=e=>{!function(e,t,o){if(o)return void o(e);_().createAndCommit({userAction:"Text.handleMoveUp",environment:t,canUndo:!0,perform:o=>{f().fs({environment:t,transaction:o,direction:"up"})&&e.preventDefault()}})}(e,this.props.environment,this.props.onMoveUp)},this.handleMoveDown=e=>{!function(e,t,o){if(o)return void o(e);_().createAndCommit({userAction:"Text.handleMoveDown",environment:t,canUndo:!0,perform:o=>{f().fs({environment:t,transaction:o,direction:"down"})&&e.preventDefault()}})}(e,this.props.environment,this.props.onMoveDown)},this.isRightMarginCommentActionHoveredStore=this.createComputedStore((()=>{if(!y().Z.state.isHovered||"right_margin_button"!==y().Z.state.hoverEntryPoint)return!1;const e=o(645805).default.state,t=e.isOpen?e.currentStore:void 0;return(null==t?void 0:t.id)===this.props.store.id})),this.inPageFindFocusedResultStore=this.createComputedStore((()=>{if("none"===this.props.inPageFind.type)return;const e=U().V.state;return(0,o(12512).yy)(e)&&e.id===this.props.store.id?e:void 0}),{debugName:"inPageFindFocusedResultStore"}),this.canEditStore=this.createComputedStore((()=>{if(this.props.disabled)return!1;if(o(764189).n.state)return!1;const e=this.props.pageContext&&this.props.pageContext.publicEditModeStore.state;return e&&e.hasPublicPermission?this.props.isDiscussionInput?"view"!==e.permission:"comment"===e.permission&&"suggest"===this.getEditorMode()||"edit"===e.permission:!(!this.props.store.canComment()||"suggest"!==this.getEditorMode())||this.props.store.canEdit()}),{debugName:"canEditStore"}),this.getThemeAndSubscribe=()=>{var e;const t=this.props.environment.ThemeModeStore.state;return(0,m().gh)({theme:(null===(e=this.props.themeContext)||void 0===e?void 0:e.mode)??t})},this.getHtmlMemo=new(a().Uw),this.getHtmlFn=e=>()=>{var t,i,r,a;const l=Boolean(this.addLineBreakSuggestionStore.state),d=(null===(t=this.addLineBreakSuggestionStore.state)||void 0===t?void 0:t.discussionId)||(null===(i=this.removeLineBreakSuggestionStore.state)||void 0===i?void 0:i.discussionId);let p=this.getTextValue(),m=!1;if(this.props.canTruncate&&void 0!==this.props.maxChars){c().eeV(p).length>this.props.maxChars&&(p=c().KU1(this.getTextValue(),0,this.props.maxChars),m=!0)}if(Boolean(this.props.renderWhiteSpaceWhenEmptyOnAndroid)&&this.props.environment.device.isAndroid&&(0,A().Y)("supportsAndroidEmptyLineSelectionNode")&&this.isEmpty()&&function(){var e,t,o,n;if(!(0,A().Y)("supportsAndroidEmptyLineSelectionNodeExceptionForCJK"))return!0;const i=null===(e=F().default.state.packageName)||void 0===e?void 0:e.includes("com.google.android.inputmethod.latin"),r=(null===(t=F().default.state.activeLocale)||void 0===t?void 0:t.includes("ko"))||(null===(o=F().default.state.activeLocale)||void 0===o?void 0:o.includes("zh"))||(null===(n=F().default.state.activeLocale)||void 0===n?void 0:n.includes("ja"));return Boolean(i&&!r)}())return s().Z.renderToStaticMarkup((0,Z.jsx)("span",{className:u().iE,style:{position:"relative"},placeholder:this.getCurrentPlaceholder(),children:(0,Z.jsx)("br",{})}));const f=k().IY({environment:this.props.environment,textValue:p&&{value:p,spaceId:(0,o(81954).J)(this.props.store.pointer.spaceId)},parentStore:this.props.parentStore||this.props.store,disableHover:!1,disableStyleAnnotations:Boolean(this.props.disableStyleAnnotations),disableInsertedDeletedAnnotations:Boolean(this.props.disableInsertedDeletedAnnotations),disableDateStyleAnnotations:Boolean(null===(r=this.props.disabledMentionTypes)||void 0===r?void 0:r.date),disableSuggestionAnnotations:Boolean(this.props.disableSuggestionAnnotations),disableCommentAnnotations:this.props.disableComment??!1,disabled:!this.canEditStore.state,theme:e,emojiType:(0,o(718611).e_)(this.props.environment),katex:this.props.environment.KatexStore.getKatex(),parentBlockId:G(this.props.store),renderedPageBlockId:null===(a=this.props.pageContext)||void 0===a?void 0:a.pageStore.id,formulaValueTypes:this.props.formulaValueTypes??[]}),g=(0,Z.jsxs)(n.Fragment,{children:[f,m&&$(e),d&&Q(e,l?"add":"remove",d)]});return s().Z.renderToStaticMarkup(g)},this.clearBrowserSelection=()=>{var e;null===(e=this.getEditorNode())||void 0===e||e.blur()},this.getTextValue=()=>[this.getTextValueHelper()].map((e=>k().Rl({store:this.props.store,textValue:e}))).map(this.applyTemporarySuggestRemovalAnnotation).map(this.applyTemporarySuggestInsertAnnotation)[0],this.applyTemporarySuggestRemovalAnnotation=e=>{const t=this.blockRemoveSuggestionStore.state;return e&&t?k().XG({textValue:e,discussionId:t.discussionId}):e},this.applyTemporarySuggestInsertAnnotation=e=>{const t=this.blockInsertSuggestionStore.state;return e&&t?k().zO({textValue:e,discussionId:t.discussionId}):e},this.getTextValueHelper=()=>{if(this.isNewDiscussionMenuTargetStore.state)return k().Gj({store:this.props.store});if(this.props.hasTemporaryDiscussionOnProperty){const e=S().default.getMultiSelection(),t=this.props.store.getValue();if(e)return c().WO0({textValue:t,selection:{startIndex:e.start.index,endIndex:e.end.index},annotation:[c().GKr.TemporaryComment]});if("block"===S().default.getType()){const e=c().eeV(this.props.store.getValue());return c().WO0({textValue:t,selection:{startIndex:0,endIndex:e.length},annotation:[c().GKr.TemporaryComment]})}}if(this.isInlineEquationOverlayTargetStore.state)return k().PY({store:this.props.store,equationStore:E().Z});if(this.isMentionMenuTargetStore.state)return k().Ob({store:this.props.store,stateType:{type:"mentionMenu",state:this.isMentionMenuTargetStore.state}});if(this.isSlashMenuTargetStore.state)return k().Ob({store:this.props.store,stateType:{type:"slashMenu",state:this.isSlashMenuTargetStore.state}});if(this.isRightMarginCommentActionHoveredStore.state&&!this.props.disableRightMarginHoverStyling){const e=c().eeV(this.props.store.getValue());return k().HZ({store:this.props.store,multiSelection:{start:{store:this.props.store,index:0},end:{store:this.props.store,index:e.length}}})}if(this.linkingMenuSelectionStore.state)return k().So({store:this.props.store,selection:this.linkingMenuSelectionStore.state});if(U().l.state&&"none"!==this.props.inPageFind.type&&!this.props.store.inMemoryRecordCache.isSyntheticAssistantData){return k().cD({textValue:this.props.store.getValue(),blockId:this.props.store.id,textProps:this.props.inPageFind,find:U().l.state,currentFocusedResult:this.inPageFindFocusedResultStore.state})}if(this.isCompletionPopupTargetStore.state)return k().fm({store:this.props.store,temporaryAnnotation:c().GKr.TemporarySelection,multiSelection:q()});const e=this.pageAnnotationBlockMenuStore.state;if(e)return e;if(this.isEditingStore.state){const e=N().default.state;if("editing"===e.mode){const t=(0,C().QY)(e.multiSelection);if(t)return k().xX({store:this.props.store,selection:t.selection})}}return this.props.store.getValue()},this.parentBlockStore=this.createComputedStore((()=>{const{store:e}=this.props;if(e.pointer.table===l().iU)return o(826955).G.createChildStore(e,e.pointer)}),{debugName:"parentBlockStore"}),this.isEditingStore=this.createComputedStore((()=>(0,T().J5)(this.props.store)),{debugName:"isEditing"}),this.isSelectionEndpointStore=this.createComputedStore((()=>(0,T().Gq)(this.props.store)),{debugName:"isSelectionEndpoint"}),this.shouldRenderInteractiveAiPlaceholderStore=this.createComputedStore((()=>{var e;if(this.isHorizon1PlaceholderEnabledStore.state)return!1;if(this.props.environment.device.isMobile||this.props.environment.device.isMobileNative)return!1;if(this.props.disabled)return!1;if(null===(e=this.props.pageContext)||void 0===e||!e.arePublicEditCompletionsEnabledStore.state)return!1;const t=this.parentBlockStore.state,n=t&&t.getType();return Boolean(n&&(0,i().hD)(n))&&"contains-selection"===this.isEditingStore.state&&!(t&&(0,o(986631).t)(t))}),{debugName:"shouldRenderInteractiveAiPlaceholder"}),this.isHorizon1PlaceholderEnabledStore=this.createComputedStore((()=>{var e;return!(null===(e=this.props.pageContext)||void 0===e||!e.arePublicEditCompletionsEnabledStore.state)&&!this.props.environment.device.isPhone}),{debugName:"isHorizon1PlaceholderEnabled"}),this.isNewDiscussionMenuTargetStore=this.createComputedStore((()=>{const e=S().default.state;return S().default.calculateMultitextSelection(),e.open&&"inline"===e.type&&Boolean((0,x().r)(e.multiSelection,this.props.store))}),{debugName:"isNewDiscussionMenuTarget"}),this.blockInsertSuggestionStore=this.createComputedStore((()=>{var e;return null===(e=this.parentBlockStore.state)||void 0===e?void 0:e.getInsertSuggestion()}),{debugName:"blockInsertSuggestion"}),this.blockRemoveSuggestionStore=this.createComputedStore((()=>{var e;return null===(e=this.parentBlockStore.state)||void 0===e?void 0:e.getRemoveSuggestion()}),{debugName:"blockRemoveSuggestion"}),this.addLineBreakSuggestionStore=this.createComputedStore((()=>{var e;return null===(e=this.parentBlockStore.state)||void 0===e?void 0:e.getAddLineBreakSuggestion()}),{debugName:"addLineBreakSuggestionStore"}),this.removeLineBreakSuggestionStore=this.createComputedStore((()=>{var e;return null===(e=this.parentBlockStore.state)||void 0===e?void 0:e.getRemoveLineBreakSuggestion()}),{debugName:"removeLineBreakSuggestionStore"}),this.isCompletionPopupTargetStore=this.createComputedStore((()=>{const e=q();if(!e)return!1;const t=R().default.state;if("assistantCompletionPopup"===t.type){const e=o(379072).default.getSessionContext(t.sessionId);if(e&&e.getAllPendingOperations().length>0)return!1}return Boolean((0,x().r)(e,this.props.store))}),{debugName:"isCompletionPopupTarget"}),this.isInlineEquationOverlayTargetStore=this.createComputedStore((()=>{var e;return E().Z.isOpen()&&(null===(e=(0,C().QY)(E().Z.state.savedTextSelectionState.multiSelection))||void 0===e?void 0:e.store)===this.props.store}),{debugName:"isInlineEquationOverlayTarget"}),this.isMentionMenuTargetStore=this.createComputedStore((()=>{const e=o(543842).Z.state;return!!e.open&&(e.textStore===this.props.store&&e)}),{debugName:"isMentionMenuTarget"}),this.isSlashMenuTargetStore=this.createComputedStore((()=>{const e=P().Z.state;return!!e.open&&(e.textStore===this.props.store&&e)}),{debugName:"isSlashMenuTarget"}),this.linkingMenuSelectionStore=this.createComputedStore((()=>{const e=o(385185).Z.state;if(!e.open)return!1;if(!e.focusLinkInput&&!e.focusTitleInput)return!1;if(!this.isEditingStore.state)return!1;const t=(0,C().QY)(e.savedTextSelectionState.multiSelection);return!!t&&t.selection}),{debugName:"linkingMenuSelectionStore"}),this.pageAnnotationBlockMenuStore=this.createComputedStore((()=>{const e=o(340819).Z.state;if(!e.isActive)return;const{clickedPageAnnotation:t}=e;if(!t)return;const{parentStore:n,pageAnnotation:i}=t;if(n!==this.parentBlockStore.state)return;const r=this.props.store.getValue();return r?null==r?void 0:r.map((e=>c().km_(e)?[e[0],e[1].flatMap((e=>c().STW(e)&&e===i?[i,c().EPB()]:[e]))]:e)):void 0}),{debugName:"pageAnnotationBlockMenuStore"}),this.disabledMentionTypes=new(a().Uw),this.getContainerSelection=()=>{const e=Boolean(this.linkingMenuSelectionStore.state);if(this.isSelectionEndpointStore.state){if(e)return;return(0,T().HE)(this.props.store)}if(this.isEditingStore.state&&!e){const{store:e}=this.props,t=N().default.state;if("editing"===t.mode){const o=(0,x().xI)("Text",t.multiSelection);if(o){const{selection:t}=o,n=e.getValue(),i=c().eeV(n).length;return{type:"contain",selection:{startIndex:Math.min(t.startIndex,i),endIndex:Math.min(t.endIndex,i)}}}}}},this.getEndSelection=()=>{const e=c().eeV(this.getTextValue());return{startIndex:e.length,endIndex:e.length}},this.classNameAndStyleStore=this.createComputedStore((()=>(0,r().iv)(this.getStyle(),this.props.className)),{debugName:"classNameAndStyleStore"}),this.showPostPlaceholderStore=this.createComputedStore((()=>{var e,t;const o=null===(e=this.parentBlockStore.state)||void 0===e?void 0:e.getNavigableBlockStore({skipCurrent:!0}),n=(null==o?void 0:o.isPost())&&1===(null==o||null===(t=o.getModel())||void 0===t?void 0:t.getContentLength());return Boolean(n)})),this.handleMutation=this.handleMutation.bind(this)}UNSAFE_willMountOrUpdate(){this.createReminderTimers(),this.props.environment.KatexStore.loadIfNeeded(this.getTextValue)}willUnmount(){this.clearReminderTimers(),o(448046).qA(this.props.store)}isComposing(){return this.editor&&this.editor.isComposing()}createReminderTimers(){const e=this.getTextValue(),t=c().nai(e),n=o(513670).oA(t.map((e=>{const t=(0,o(874459).KR)(e,(0,o(998411).r)());return null==t?void 0:t.toMillis()}))),i=Date.now();for(const r of n){const e=r-i;e>0&&e<o(326966).A0&&(r in this.reminderTimers||(this.reminderTimers[r]=setTimeout(this.enqueueForceUpdate,e)))}for(const o in this.reminderTimers)n.includes(Number.parseInt(o))||(clearTimeout(this.reminderTimers[o]),delete this.reminderTimers[o])}clearReminderTimers(){for(const e in this.reminderTimers)clearTimeout(this.reminderTimers[e]),delete this.reminderTimers[e]}renderComponent(){const{disableInsertText:e,disableStyleAnnotations:t,disableSelectAllBlocks:n,disableSelectionDrag:i,disableDrag:r,disabled:a}=this.props;return(0,Z.jsx)(o(129301).C,{...this.props,clearBrowserSelection:this.clearBrowserSelection,getEndSelection:this.getEndSelection,canInsertText:!a&&!e,onBlur:this.clearBrowserSelection,onClick:this.handleClick,onContextMenu:this.handleContextMenu,onDelete:this.handleDelete,onDeleteToEndOfLine:this.handleForwardDeleteAtEndOfLine,onDeleteNextWord:this.handleForwardDeleteAtEndOfLine,onBackspace:this.handleBackspace,onEnter:this.handleEnter,onShiftEnter:this.handleShiftEnter,onTab:this.handleTab,onUntab:this.handleUntab,onToggleHighlight:this.handleToggleHighlight,onToggleBold:this.handleToggleBold,onToggleItalics:this.handleToggleItalics,onToggleStrike:this.handleToggleStrike,onToggleUnderline:this.handleToggleUnderline,onToggleCode:this.handleToggleCode,onCopy:this.handleCopy,onCut:this.handleCut,onPaste:this.handlePaste,onKeypress:this.handleKeypress,onMoveUp:this.handleMoveUp,onMoveDown:this.handleMoveDown,render:this.renderContentContainer,disableStyleAnnotations:t,canSelectAllBlocks:!n,canSelectionDrag:!i,disableDrag:r,topBottomPadding:9})}getCurrentPlaceholder(){var e;const{device:t}=this.props.environment;if(this.shouldRenderInteractiveAiPlaceholderStore.state)return K.state;if(this.props.placeholder)return this.props.placeholder;if(this.props.disabled||w().TI.state&&this.props.store.id===(null===(e=w().P7.state)||void 0===e?void 0:e.id))return" ";if(this.showPostPlaceholderStore.state)return I().Z.formatMessage(j.postBodyPlaceholder);if(!this.props.disableSlashCommands&&"contains-selection"===this.isEditingStore.state&&this.canEditStore.state)if(P().Z.state.open){if(P().Z.state.isAddMenu)return I().Z.formatMessage(j.filterPlaceholder)}else if(!t.isPhone)return this.isHorizon1PlaceholderEnabledStore.state?I().Z.formatMessage(j.expandedPlaceholder):I().Z.formatMessage(j.typeTextPlaceholder);return" "}isPageContentForTourTutorial(){const{device:e}=this.props.environment;return!!(0,V().tourIsActive)(V().default.state)&&!(this.props.disableSlashCommands||"contains-selection"!==this.isEditingStore.state||!this.canEditStore.state||e.isMobile)}isPageContentForDemoTutorial(){var e;const{device:t}=this.props.environment,o=this.props.pageContext&&this.props.pageContext.publicEditModeStore.state;return!!B().Z.isActiveDemo()&&!(t.isMobile||!o||(null===(e=this.parentBlockStore.getState())||void 0===e?void 0:e.id)!==B().Z.getCurrentStepBlockId())}async handleTriggerAutoCorrect(){var e;if(this.props.isDiscussionInput||null!==(e=this.editor)&&void 0!==e&&e.isComposing())return;if(!D().default.checkGate({gateName:"ai_co_editing"}))return;const t=this.props.store.getAncestorBlockStoreAtRootPath();if(!t)return;if(t.isNavigableBlock()||t.isLocked()||!t.canEdit())return;const o=t.getDiscussionStores().filter((e=>!e.getResolved())).length>0;if(o)return;(await async function(){if(!O){const e=await L.CoEditingTaskManager.load();O=new e.CoEditingTasksManager}return O}()).addRequest({type:"blockImproveWriting",environment:this.props.environment,blockStore:t})}handleMutation(e){if(this.logTypingLag("typing_lag"),!this.canEditStore.state)return;_().createAndCommit({userAction:"Text.handleMutation",environment:this.props.environment,canUndo:!0,perform:t=>{let n=this.props.store;const{multiSelection:i}=e;if(i&&!(0,C().qS)(i))n=i.start.store;else if(this.props.legacyTransclusionParentStore&&this.props.legacyTransclusionActions&&!e.insertedLine&&!e.isComposing&&!e.deletedLine){const e=this.props.legacyTransclusionActions.maybeAutofixLegacyTransclusionProperty({environment:this.props.environment,store:n,parentStore:this.props.legacyTransclusionParentStore,transaction:t});e&&(n=e)}if(f().YV({environment:this.props.environment,store:n,newValue:e.newValue,editorMode:this.getEditorMode(),disableMentions:Boolean(this.props.disableMentions),disabledMentionTypes:this.disabledMentionTypes.memo((()=>(0,o(334643).lU)(this.props.disabledMentionTypes)),[this.props.disabledMentionTypes]),disableSlashCommands:Boolean(this.props.disableSlashCommands),disableEmojiCommands:Boolean(this.props.disableEmojiCommands),disableFilters:this.props.disableFilters||e.isComposing,transaction:t,multiSelection:i,usePopupForMentionOnMobile:this.props.usePopupForMentionOnMobile,mentionSectionOrdering:this.props.mentionSectionOrdering}),e.insertedLine){const e="editing"===N().default.state.mode&&N().default.state.multiSelection;e&&v().IO({environment:this.props.environment,editorMode:this.getEditorMode(),multiSelection:e,transaction:t})}this.props.trackEditsToUserFlow&&!t.isEmpty()&&o(188517).uO(this.props.environment,this.props.trackEditsToUserFlow,t)}}),this.handleTriggerAutoCorrect();const{store:t}=this.props,n=this.parentBlockStore.state;if(n){if(n.getType()){const e=n.getSchema()||{};if("properties"===t.path[0]&&t.path[1]){e[t.path[1]]&&!this.triggeredAnalytics&&(this.triggeredAnalytics=!0)}}}if(this.props.onChange){let e;this.isSpaceComposition()&&(e=new KeyboardEvent("keydown",{key:" ",code:"Space",keyCode:32})),this.props.onChange(e)}}getEditorMode(){var e,t;return this.props.isDiscussionInput||this.props.disableSuggestEdit?"default":null!==(e=this.props.pageContext)&&void 0!==e&&e.pageStore?o(279386).MT.getMode(null===(t=this.props.pageContext)||void 0===t?void 0:t.pageStore):"default"}handleClickActions(e){k().SD({environment:this.props.environment,event:e,textValue:this.getTextValue(),editorNode:this.getEditorNode(),store:this.props.store,parentStore:this.props.parentStore,canEdit:this.canEditStore.state,disableEquationInteraction:this.props.disableEquationInteraction})}canExclusivelyComment(){return e=this.props.disabled,t=this.props.store,!e&&t.canComment()&&!this.canEditStore.state;var e,t}focus(){this.isEditingStore.state||this.props.disableMoveCursorToEndOnFocus||h().setSelectionAtEnd({store:this.props.store})}getEditorNode(){var e;return(null===(e=this.editor)||void 0===e?void 0:e.getNode())||void 0}isEmpty(){return 0===c().lzi(this.getTextValue()).length}logTypingLag(e){const t=!this.props.disabled&&"inline"===this.props.pasteBehavior;(0,o(984975).u)({type:e,environment:this.props.environment,blockStore:this.parentBlockStore.state,store:this.props.store,isInCollectionView:t})}getStyle(){const e=this.getThemeAndSubscribe(),{device:t}=this.props.environment;let o={maxWidth:"100%",width:"100%",whiteSpace:"pre-wrap",wordBreak:"break-word",caretColor:this.canExclusivelyComment()?m().ZP.transparent:e.regularTextColor,...this.props.style};return this.isEmpty()&&(o.minHeight="1em",o={...o,color:e.regularTextColor,WebkitTextFillColor:e.lightTextColor,...this.props.placeholderStyle,...this.showPostPlaceholderStore.state&&{color:e.text.quaternary,WebkitTextFillColor:e.text.quaternary}}),t.isMobile&&this.canEditStore.state&&(this.isEditingStore.state?o.WebkitUserModify="read-write-plaintext-only":(o.userSelect="none",o.whenFocusedEditable={userSelect:"text",WebkitUserModify:"read-write-plaintext-only"})),o}}z.displayName="Text",z.contextType=null;const H=n.memo(n.forwardRef((function(e,t){const{value:i}=(0,M().XJ)(o(964433).p),{value:r}=(0,M().XJ)(o(542058).m),{value:a}=(0,M().XJ)(o(141735).F.formulas),{value:s}=(0,M().XJ)(o(959137).F.clipboardActions),{value:l}=(0,M().XJ)(o(367019).G.legacyTransclusionActions),c=(0,o(219727).O7)(),d=(0,n.useContext)(o(340335).o),u=(0,o(657320).l)();return(0,Z.jsx)(z,{...e,ref:t,clipboardActions:s,formulasModule:a,legacyTransclusionActions:l,markdownLinkifyIt:i,tinyMceMicrosoftWordPasteFilter:r,environment:c,themeContext:d,pageContext:u})})));function q(){const e=R().default.state;return("closedWithContext"===e.type||"completionPopup"===e.type&&"initialPromptForAIBlock"!==e.stage||"assistantCompletionPopup"===e.type)&&"textSelection"===e.context.type?e.context.textSelection:void 0}function W(){o(492788).default.flush()}function G(e){if(e.table===l().iU)return e.id;const{ancestor:t}=e.findRecordStoreUIAncestor((e=>{let{table:t}=e;return t===l().iU}));return t?t.id:void 0}function $(e){return(0,Z.jsxs)(o(765513).Z,{disableUnderline:!0,style:{color:e.mediumTextColor},onClick:e=>{e.preventDefault(),e.stopPropagation()},children:["â€¦",(0,Z.jsx)("span",{children:(0,Z.jsx)(p()._H,{id:"text.truncated.showMoreLabel",defaultMessage:"more"})})]})}function Q(e,t,o){const n={textDecoration:"add"===t?"":"line-through",WebkitTextFillColor:"initial",..."add"===t?(0,d().sZ)(e):(0,d().sM)(e)},i=(0,r().Ws)({type:"add"===t?"update":"remove"}),a=(0,r().dk)({discussionId:o});return(0,Z.jsx)("span",{style:n,className:`${u().DK} ${u().kB} ${i} ${a}`,children:`${c().aVG}`})}},42557:(e,t,o)=>{o.d(t,{Z:()=>l});var n=o(667294),i=()=>o(142735),r=()=>o(480089),a=o(785893);function s(e,t){let{disabled:s,disableCommentMenu:l,disableHoverMenu:d,disableDrag:u,hideContent:p,isFirstItem:m,legacyTransclusionParentStore:f,store:g,style:v}=e;const h=(0,i().VK)((()=>g.getBlockTitleStore()),[g]),_=(0,i().VK)((()=>g.getContentStore()),[g]),b=(0,n.useRef)(null),y=(0,i().VK)((()=>_.getValue()||[]),[_]),S=(0,r().rv)(g),w=(0,i().VK)((()=>{if(o(749826).default.checkGate({gateName:"display_crdt_block_client"})&&g.useCrdt())return{border:"1px dashed green"}}),[g]),k=(0,i().VK)((()=>{if("encrypted_text"===g.getType())return{border:"1px dashed purple"}}),[g]),I=(0,o(540896).O)(),C=(0,o(846550).yK)((()=>({root:{...S,...w,...k,...v},title:{...o(494488).ZD,...I&&{paddingTop:0,paddingBottom:0}}})),[S,w,k,I,v]),x=!p&&y.length>0?(0,a.jsx)("div",{style:c,children:(0,a.jsx)(o(98275).Z,{disabled:s,store:_,disableCommentMenu:l,disableHoverMenu:d,disableDrag:u})}):null,T=(0,a.jsxs)("div",{style:C.root,ref:b,children:[(0,a.jsxs)("div",{style:{display:"flex"},children:[(0,a.jsx)(o(345837).Z,{style:C.title,disabled:s,store:h,pasteBehavior:"block",legacyTransclusionParentStore:f,trackEditsToUserFlow:"user_flow_edit_block",inPageFind:o(12512).B3.block_match,renderWhiteSpaceWhenEmptyOnAndroid:!0}),(0,a.jsx)(o(37399).Z,{disableCommentMenu:l,hideContent:p,store:g})]}),!p&&x]}),M=(0,i().VK)((()=>"encrypted_text"===g.getType()?"encrypted_text":"text"),[g]);return(0,r().ez)(g,t,(0,n.useMemo)((()=>({renderedType:M,getBlockStore:()=>g,getNode:()=>b.current})),[g,M]),T)}const l=n.memo(n.forwardRef(s),o(632314).Z),c={paddingLeft:"1.5em",display:"flex",flexDirection:"column"}},500104:(e,t,o)=>{o.d(t,{Z:()=>g});var n=o(667294),i=()=>o(219727),r=()=>o(142735),a=()=>o(788860),s=()=>o(541199),l=()=>o(269299),c=()=>o(480089),d=()=>o(965903),u=()=>o(627990),p=o(785893);const m=(0,a().vU)({placeholder:{defaultMessage:"To-do",id:"todoBlock.placeholder"}});function f(e,t){const f=(0,a().YB)(),g=(0,i().Fy)(),v=(0,i().O7)(),h=(0,n.useRef)(null),_=(0,n.useId)(),b=(0,c().PE)(e.store,e.disabled),y=(0,c().rv)(e.store,!0),S=(0,r().VK)((()=>e.store.getBlockTitleStore()),[e.store]),w=(0,r().VK)((()=>e.store.getContentStore()),[e.store]),k=(0,r().VK)((()=>{const t=e.store.getProperties();return!!t&&o(532850).Ml(t.checked)}),[e.store]),I=(0,r().VK)((()=>Boolean(e.store.getInsertSuggestion())),[e.store]),C=(0,n.useCallback)((()=>{if(b){let t;t=o(513670).q9(d().default.state.stores,e.store)?d().default.state.stores:[e.store],v.mobileNative&&v.mobileNative.buzz(),k?l().createAndCommit({userAction:"TodoBlock.toggleChecked",environment:v,canUndo:!0,perform:e=>{s().c({environment:v,blocks:t,transaction:e})}}):l().createAndCommit({userAction:"TodoBlock.toggleChecked",environment:v,canUndo:!0,perform:e=>{s().B({environment:v,blocks:t,transaction:e})}})}}),[b,v,k,e.store]),x=(0,o(540896).O)(),T=(0,o(846550).yK)((e=>({root:{paddingLeft:o(494488).ZD.paddingLeft,...y},title:{...u().R8,...x&&{paddingTop:0,paddingBottom:0},width:void 0,flexGrow:1,...k&&{textDecoration:"line-through",textDecorationColor:I?e.text.uiBlueSecondary:e.strikethroughLineColor,opacity:1,color:e.mediumTextColor}},titlePlaceHolder:{...I?{color:e.text.uiBlueTertiary,WebkitTextFillColor:"initial"}:{}},leftStyle:{...x&&{minHeight:"1.5em"}}})),[y,x,k,I]),M=(0,p.jsxs)(u().ZP,{style:{...T.root,...e.style},left:(0,p.jsx)(o(715139).O,{"aria-labelledby":_,checked:k,onClick:C,disabled:!b,size:16,fill:y.color,tapArea:g.isMobile?{size:30}:void 0}),leftStyle:T.leftStyle,childrenStyle:{display:"flex",flexDirection:"column"},ref:h,children:[(0,p.jsxs)("div",{style:{display:"flex"},children:[(0,p.jsx)(o(345837).Z,{id:_,style:T.title,disabled:e.disabled,store:S,placeholder:f.formatMessage(m.placeholder),placeholderStyle:T.titlePlaceHolder,pasteBehavior:"block",legacyTransclusionParentStore:e.legacyTransclusionParentStore,inPageFind:o(12512).B3.block_match,renderWhiteSpaceWhenEmptyOnAndroid:!0}),(0,p.jsx)(o(37399).Z,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store})]}),!e.hideContent&&(0,p.jsx)(o(98275).Z,{disabled:e.disabled,store:w,disableCommentMenu:e.disableCommentMenu,disableHoverMenu:e.disableHoverMenu,disableDrag:e.disableDrag})]});return(0,c().ez)(e.store,t,(0,n.useMemo)((()=>({renderedType:"to_do",getNode:()=>h.current,getBlockStore:()=>e.store,activate:C})),[e.store,C]),M)}const g=n.memo(n.forwardRef(f),o(632314).Z)},952628:(e,t,o)=>{o.d(t,{J9:()=>v,ZP:()=>g,kA:()=>h});var n=o(667294),i=()=>o(142735),r=()=>o(494488),a=()=>o(788860),s=()=>o(94912),l=()=>o(480089),c=()=>o(965903),d=()=>o(98275),u=()=>o(627990),p=o(785893);const m=(0,a().vU)({placeholder:{defaultMessage:"Toggle",id:"toggleBlock.placeholder"}});function f(e,t){const f=(0,o(219727).O7)(),g=(0,a().YB)(),v=(0,n.useRef)(!0);(0,n.useLayoutEffect)((()=>{v.current&&(v.current=!1,s().nz({blockId:e.store.id,currentUserId:f.currentUser.id}),s().LO(f,e.store))}));const h=(0,n.useRef)(null),_=(0,i().VK)((()=>e.store.getBlockTitleStore()),[e.store]),b=(0,i().VK)((()=>e.store.getContentStore()),[e.store]),y=(0,i().VK)((()=>Boolean(e.store.getInsertSuggestion())),[e.store]),S=(0,i().VK)((()=>o(445264).Z.isOpen(e.store.id)&&!e.hideContent),[e.hideContent,e.store.id]),w=(0,i().VK)((()=>!e.store.hasContent()),[e.store]),k=(0,n.useId)(),I=(0,n.useId)(),C=(0,i().VK)((()=>o(856546).b(e.store)||!e.store.isDefaultRecordCache()),[e.store]),x=(0,i().VK)((()=>e.store.getType()),[e.store]);(0,o(580548).J)({loaded:C,blockType:x,isOpen:S});const T=(0,n.useCallback)((()=>{let t;t=o(513670).q9(c().default.state.stores,e.store)?c().default.state.stores:[e.store];const n=!S;for(const e of t)s().rd({blockId:e.id,state:n,currentUserId:f.currentUser.id});o(491927).jR(f,{is_toggled:n})}),[f,S,e.store]),M=(0,n.useCallback)((()=>{o(269299).createAndCommit({userAction:"ToggleBlock.handlePlaceholderClick",environment:f,canUndo:!0,perform:t=>{s().ls({environment:f,store:e.store,transaction:t})}})}),[f,e.store]),P=(0,n.useCallback)((e=>{if(e.shiftKey){const e=o(718959).np();e&&s().X_(f,e)}else T()}),[f,T]),A=(0,l().rv)(e.store,!0),R=(0,o(540896).O)(),B=(0,o(846550).yK)((t=>({root:{paddingLeft:r().ZD.paddingLeft,...A,...e.style},placeholderButton:{fontSize:"inherit",width:"100%",borderRadius:4,caretColor:t.lightTextColor,...r().ZD,marginTop:2},placeholderText:{color:t.lightTextColor},title:{...u().R8,...R&&{paddingTop:0,paddingBottom:0}},titlePlaceHolder:{...y?{color:t.text.uiBlueTertiary,WebkitTextFillColor:"initial"}:{}},leftStyle:{paddingRight:2,...R&&{minHeight:"1.5em"}}})),[A,R,y,e.style]),E=(0,p.jsx)(o(154186).Z,{style:B.placeholderButton,onClick:M,disabled:e.disabled,children:(0,p.jsx)("span",{style:B.placeholderText,children:(0,p.jsx)(a()._H,{defaultMessage:"Empty toggle. Click or drop blocks inside.",id:"toggleBlock.emptyBlock.placeholderText"})})}),D=(0,p.jsxs)(u().ZP,{style:B.root,left:(0,p.jsx)(o(167705).Z,{"aria-describedby":k,"aria-controls":I,isSidebar:!1,open:S,fill:!w,onClick:P,tapArea:f.device.isMobile?{size:30}:void 0}),leftStyle:B.leftStyle,ref:h,children:[(0,p.jsxs)("div",{style:{display:"flex"},children:[(0,p.jsx)(o(345837).Z,{id:k,style:B.title,disabled:e.disabled,store:_,placeholder:g.formatMessage(m.placeholder),placeholderStyle:B.titlePlaceHolder,pasteBehavior:"block",inPageFind:o(12512).B3.block_match,legacyTransclusionParentStore:e.legacyTransclusionParentStore,renderWhiteSpaceWhenEmptyOnAndroid:!0}),(0,p.jsx)(o(37399).Z,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store,recursivelyLoadAllDiscussions:!S})]}),S?(0,p.jsx)(o(690122).Z,{id:I,loaded:C,spinnerSize:"1em",showSpinnerTimeout:500,innerStyle:{display:"flex",flexDirection:"column",width:"100%"},style:{display:"flex"},children:(0,p.jsx)(d().Z,{store:b,emptyPlaceholder:E,disabled:e.disabled,disableCommentMenu:e.disableCommentMenu,disableHoverMenu:e.disableHoverMenu,disableDrag:e.disableDrag})}):(0,p.jsx)(d().Z,{store:b,disabled:e.disabled,disableContent:!0})]});return(0,l().ez)(e.store,t,(0,n.useMemo)((()=>({renderedType:"toggle",getNode:()=>h.current,getBlockStore:()=>e.store,activate(){T()}})),[e.store,T]),D)}const g=n.memo(n.forwardRef(f),o(632314).Z);function v(){return{display:"flex"}}function h(){return{display:"flex",flexDirection:"column",width:"100%"}}},167705:(e,t,o)=>{o.d(t,{Z:()=>s});var n=o(667294),i=()=>o(788860),r=o(785893);const a=(0,i().vU)({open:{defaultMessage:"Open",id:"toggleButton.open"},close:{defaultMessage:"Close",id:"toggleButton.close"}}),s=n.memo((function(e){const t=(0,o(219727).Fy)(),s=(0,i().YB)(),l=(0,n.useMemo)((()=>function(e){let{isSidebar:t,isMobile:o}=e;return t&&!o?20:24}({isSidebar:e.isSidebar,isMobile:t.isMobile})),[t.isMobile,e.isSidebar]),c=(0,o(846550).yK)((()=>{const o=e.color||"inherit",n="chevron"===e.icon?`rotateZ(${e.open?0:-90}deg)`:`rotateZ(${e.open?180:90}deg)`,i="chevron"===e.icon,r=i&&t.isMobile;return{button:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",width:l,height:l,borderRadius:4,...e.style},arrow:{width:r?14:i?12:"0.6875em",height:r?14:i?12:"0.6875em",transition:"transform 200ms ease-out",transform:n,fill:o,opacity:e.fill?1:.5}}}),[t.isMobile,e.color,e.fill,e.icon,e.open,e.style,l]),d=(0,n.useMemo)((()=>"chevron"===e.icon?(0,o(536691).A)(c.arrow):(0,o(488949).L)(c.arrow)),[e.icon,c.arrow]);return(0,r.jsxs)(o(154186).Z,{ariaLabel:e.open?s.formatMessage(a.close):s.formatMessage(a.open),"aria-describedby":e["aria-describedby"],"aria-expanded":e.open,"aria-controls":e.open?e["aria-controls"]:void 0,style:c.button,onClick:e.onClick,onMouseDown:e.onMouseDown,disabled:e.disabled,allowShiftClick:!0,children:[e.tapArea&&(0,r.jsx)("div",{style:{position:"absolute",opacity:0,width:e.tapArea.size,height:e.tapArea.size,top:-(e.tapArea.size-l)/2,left:-(e.tapArea.size-l)/2}}),d]})}))},78014:(e,t,o)=>{o.d(t,{Z:()=>c});var n=o(667294),i=()=>o(846550),r=()=>o(38883),a=()=>o(707513),s=()=>o(998901),l=o(785893);const c=function(e){let{backgroundColor:t,color:a,description:c,disabled:d,disabledFeedback:u,showColoredDot:m,format:f,isRound:g,isSingle:v,isStrikedThrough:h,onClickRemove:_,shouldShrink:b,shouldWrap:y,showRemoveButton:S,showTooltip:w="never",style:k,tooltip:I,tooltipPlacement:C,value:x}=e;const T=(0,i().yK)((e=>{const{height:n,fontSize:i,paddingLeft:s,margin:l}=(0,r().e1)(f),c=g?s+1:s;return{token:{display:v?"inline-flex":"flex",alignItems:"center",flexShrink:v||b?1:0,minWidth:0,maxWidth:"100%",height:n,margin:v?0:l,borderRadius:g?n/2:3,paddingLeft:c,paddingRight:S?0:g?c+2:c,lineHeight:"120%",opacity:d&&u?.4:void 0,fontSize:i,color:a||("light"===e.mode?e.regularTextColor:o(568017).ZP.whiteWithAlpha(.7)),background:t||e.legacyDefaultSelectColor,...y&&{height:void 0,paddingTop:4,paddingBottom:4},...k},tooltipDescription:{color:e.mediumInvertedTextColor}}}),[t,a,d,u,f,g,v,b,y,S,k]),M=(0,n.useRef)(null),P={disabled:d,format:f,isStrikedThrough:h,onClickRemove:_,shouldWrap:y,showColoredDot:m,showRemoveButton:S,value:x};return"always"===w||"overflow"===w&&function(e){return Boolean(e.current&&e.current.offsetWidth<e.current.scrollWidth)}(M)||void 0!==I?(0,l.jsx)(o(654133).Z,{placement:C??s().Placement.Right,renderTooltip:e=>(0,l.jsx)("div",{...e,style:o(514).F6,children:I||(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{children:x}),c&&(0,l.jsx)("div",{style:T.tooltipDescription,children:c})]})}),originGap:C===s().Placement.Top?0:20,textWrap:!0,render:e=>(0,l.jsx)("div",{style:T.token,...e,onMouseEnter:t=>{var o;null===(o=e.onMouseEnter)||void 0===o||o.call(e,t)},children:(0,l.jsx)(p,{ref:M,...P})})}):(0,l.jsx)("div",{style:T.token,children:(0,l.jsx)(p,{...P})})};function d(e){let{format:t,showRemoveButton:n,onClickRemove:i,disabled:a}=e;const s=t===r().lo.Large?10:8,{height:c}=(0,r().e1)(t),d={display:"flex",alignItems:"center",justifyContent:"center",flexGrow:0,flexShrink:0,marginLeft:2,marginRight:2};return n?(0,l.jsx)(o(154186).Z,{onClick:i,style:{...d,width:c,height:c},disabled:a,disabledFeedback:!1,mobileFeedback:!0,className:"notion-token-remove-button",children:(0,o(429587).b)({width:s,height:s,opacity:.5})}):null}function u(e){let{color:t,format:o}=e;const n=(0,i().yK)((e=>{const n=(0,r().Nv)(o),i="default"===t?"gray":t;return{dot:{marginRight:o===r().lo.ExtremeSmall?2:5,borderRadius:99,height:n,width:n,backgroundColor:"light"===e.mode?e.accentColors[i][400]:e.accentColors[i][700],display:"inline-flex",flexShrink:0}}}),[o,t]);return(0,l.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,l.jsx)("div",{style:n.dot})})}const p=n.forwardRef((function(e,t){let{format:o,shouldWrap:n,isStrikedThrough:i,showColoredDot:s,value:c,showRemoveButton:p,onClickRemove:m,disabled:f}=e;const{height:g}=(0,r().e1)(o);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{style:{...n?{overflowWrap:"anywhere"}:a().Yu,textDecoration:i?"line-through":void 0,display:"inline-flex",alignItems:"center",height:g,lineHeight:`${g}px`},children:[s?(0,l.jsx)(u,{color:s,format:o}):null,(0,l.jsx)("span",{style:{...a().Yu},ref:t,children:c})]}),(0,l.jsx)(d,{format:o,showRemoveButton:p,onClickRemove:m,disabled:f})]})}))},73478:(e,t,o)=>{o.d(t,{Z:()=>r});o(667294);var n=()=>o(707513),i=o(785893);const r=function(e){let{imageURL:t,imageWidth:n,imageHeight:r,caption:s,title:l,imageContainerStyle:c}=e;if(t){const e=(0,o(921743).D)(t);return(0,i.jsxs)("div",{style:{width:n||200,marginTop:4,marginBottom:4},children:[(0,i.jsx)("div",{style:{width:"100%",height:r||100,borderRadius:4,backgroundImage:`url(${e})`,backgroundSize:"cover",marginBottom:6,...c}}),(0,i.jsx)(a,{caption:s,title:l})]})}return(0,i.jsx)(a,{caption:s,title:l,style:{width:n}})};function a(e){let{style:t,caption:o,title:r}=e;return(0,i.jsxs)("div",{style:{whiteSpace:"normal",lineHeight:1.4,...t},children:[r&&(0,i.jsx)("header",{style:{fontWeight:n().Ue.bold,marginBottom:4},children:r}),o]})}},283403:(e,t,o)=>{o.d(t,{h:()=>Ia});var n=()=>o(829012),i=()=>o(677559);const r={TranscriptionBlock:new(i().Ss)("TranscriptionBlock",(async()=>({TranscriptionBlock:(await Promise.all([o.e(90698),o.e(84885),o.e(54940),o.e(98721),o.e(52183),o.e(5509),o.e(93191)]).then(o.bind(o,302957))).TranscriptionBlock})))},a=(0,i().iS)(r.TranscriptionBlock,(e=>e.TranscriptionBlock));var s=()=>o(116338),l=()=>o(662807),c=o(667294),d=()=>o(142735),u=()=>o(788860),p=()=>o(632314),m=()=>o(480089),f=()=>o(827282),g=o(785893);const v=(0,f().IU)("abstract",{viewBox:"0 0 32 32",svg:(0,g.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 16C0 3.199 3.199 0 16 0s16 3.199 16 16-3.199 16-16 16S0 28.801 0 16zm9.976 7.71a6.128 6.128 0 003.398 1.043 6.14 6.14 0 006.146-6.127 6.126 6.126 0 10-9.544 5.085zm11.521.79h3.004v-17H7.499v2.997h13.998V24.5zm-5-5.874a3.123 3.123 0 11-6.246 0 3.123 3.123 0 016.246 0z"})});var h=()=>o(803820),_=()=>o(904912);const b=(0,u().vU)({embedButtonText:{defaultMessage:"Embed Abstract",id:"abstractBlock.embeds.button.label"}});function y(e,t){const o=(0,u().YB)(),n=(0,c.useRef)(null),i=(0,d().qz)(e.blockResizerStore,h().Z);return(0,m().ez)(e.store,t,(0,c.useMemo)((()=>({renderedType:"abstract",getNode:()=>{const e=n.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,g.jsx)(_().ZP,{...e,blockResizerStore:i,ref:n,store:e.store,iconSvg:v,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,g.jsx)(u()._H,{defaultMessage:"Works with Abstract links with public access enabled",id:"abstractBlock.embeds.caption"}),embedButtonText:o.formatMessage(b.embedButtonText),urlInputPlaceholder:"https://abstract.com/â€¦",children:(0,g.jsx)(u()._H,{defaultMessage:"Embed Abstract",id:"abstractBlock.placeholder"})}))}const S=c.memo(c.forwardRef(y),p().Z);var w=()=>o(146947),k=()=>o(219727),I=()=>o(846550),C=()=>o(492522),x=()=>o(568017),T=()=>o(707513),M=()=>o(562109),P=()=>o(247724),A=()=>o(609489),R=()=>o(527278),B=()=>o(176691),E=()=>o(615634),D=()=>o(844958),U=()=>o(845622),F=()=>o(960562),N=()=>o(158083),V=()=>o(475335),L=()=>o(557576),O=()=>o(591051),Z=()=>o(58836),j=()=>o(628370),K=()=>o(154186),z=()=>o(78078),H=()=>o(661297),q=()=>o(98275),W=()=>o(864880);const G={AiBlockV2:new(i().Ss)("AiBlockV2",(()=>Promise.all([o.e(62743),o.e(52774),o.e(44832),o.e(90698),o.e(84885),o.e(37358),o.e(5242),o.e(7312),o.e(90424),o.e(81580),o.e(84325),o.e(31189),o.e(69343),o.e(46293),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(46616),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63707),o.e(86609),o.e(91253),o.e(4642),o.e(5006),o.e(6612),o.e(61171),o.e(23179),o.e(75377),o.e(31020),o.e(2942),o.e(73682),o.e(58591),o.e(54803),o.e(1953),o.e(10216),o.e(58565),o.e(69197),o.e(42055),o.e(38739),o.e(44751),o.e(81567),o.e(63257),o.e(34291),o.e(1913),o.e(56054),o.e(95076),o.e(82658),o.e(25277)]).then(o.bind(o,139039))))},$=(0,i().kF)(G.AiBlockV2,(e=>e.AiBlockV2)),Q=c.forwardRef((function(e,t){const{store:n,disabled:i,disableHoverMenu:r,ai:{completionActions:a,completionInitialPromptActions:s},assistant:{AssistantFeatureGateStore:l}}=e,u=(0,k().O7)(),[p,m]=(0,c.useState)(!1),[f,v]=(0,c.useState)(!1),[h,_]=(0,c.useState)(!1),b=(0,c.useRef)(null),y=(0,o(704713).X)(b),S=!y||y.width<400,w=(0,d().VK)((()=>!n.hasContent()),[n]),I=(0,d().VK)((()=>w?A().x.Hovered:(0,A().B)(n,p)),[w,p,n]),C=(0,c.useMemo)((()=>I!==A().x.Default||f||h),[h,f,I]),x=(0,c.useCallback)((e=>{const{prompt:t,clientPrompt:o}=e;s.showInitialPromptForAIBlock({environment:u,store:n,originRef:b,prompt:t,clientPrompt:o})}),[s,u,n]),T=(0,d().VK)((()=>l.isAiBlockConfigurationMenuEnabledForUser()),[l]);return(0,g.jsx)(J,{store:n,setIsHovering:m,showingOverlay:C,forwardedRef:t,containerRef:b,children:T?(0,g.jsx)($,{store:n,hoveredOrSelectionState:I,setHaloShouldBeVisible:v,triggerCompletionForAiBlock:a.triggerCompletionForAiBlock,showInitialPromptForAiBlock:x,showingOverlay:C,isCompact:S,disabled:i,setActionBarShouldBeVisible:_,disableHoverMenu:r}):(0,g.jsx)(Y,{store:n,hoveredOrSelectionState:I,setHaloShouldBeVisible:v,triggerCompletionForAiBlock:a.triggerCompletionForAiBlock,showInitialPromptForAiBlock:x,showingOverlay:C,isCompact:S,disabled:i,setActionBarShouldBeVisible:_,disableHoverMenu:r})})}));function Y(e){const t=(0,k().Fy)(),{store:n,hoveredOrSelectionState:i,setHaloShouldBeVisible:r,showInitialPromptForAiBlock:a,showingOverlay:s,isCompact:l,disabled:p,triggerCompletionForAiBlock:f,setActionBarShouldBeVisible:v,disableHoverMenu:h}=e,_=(0,k().O7)(),{titleStore:b}=(0,d().VK)((()=>{const e=n.getBlockTitleStore();return{titleStore:e,titleValue:e.getValue()}}),[n]),{prompt:y,additionalContext:S}=(0,W().GS)({store:n}),w=(0,c.useCallback)((()=>"helpMeWrite"===y.key?S||R().Z.formatMessage(W().jl.helpMeWrite):R().Z.formatMessage(W().jl[y.key])),[S,y.key]),[C,x]=(0,c.useState)(!1),T=(0,c.useCallback)((()=>{a({prompt:S,clientPrompt:y})}),[a,S,y]),P=(0,c.useCallback)((()=>{M().RL(_,{type:"generate",prompt_key:y.key}),x(!0),f({environment:_,store:n,prompt:y,additionalContext:S?{prompt:S}:void 0}).then((()=>{x(!1)}))}),[_,y,f,n,S]),B=(0,W().Ks)({store:n,isGenerating:C}),E=(0,I().yK)((e=>({icon:{fill:e.accentColors.purple[300],width:21,height:21,position:"relative",top:5},generateButtonStyles:{fontWeight:500,color:e.accentColors.purple[500],opacity:B?.5:1,cursor:B?"not-allowed":"pointer"}})),[B]),F=(0,d().VK)((()=>!n.hasContent()),[n]),N=(0,m().PE)(n,p),V=(0,d().VK)((()=>"completionPopup"===U().default.state.type&&"results"===U().default.state.stage&&U().default.state.loading),[]),L=(0,d().VK)((()=>n.getContentStore()),[n]);var O;return F?(0,g.jsxs)(Z().p,{allowSelectionWithin:!0,children:[(0,g.jsxs)(z().X2,{justifyContent:"space-between",padding:8,gap:8,wrap:l?"wrap":"initial",children:[(0,g.jsxs)(z().X2,{gap:12,alignItems:"baseline",grow:1,children:[(null===(O=y.svg)||void 0===O?void 0:O.call(y,E.icon))??(0,D().t)(E.icon),"helpMeWrite"===y.key?(0,g.jsx)(o(345837).Z,{onFocus:T,disabled:!N,store:b,placeholder:R().Z.formatMessage(W().jl.helpMeWrite),pasteBehavior:"block",style:{flexGrow:1,flexBasis:0},onEnter:P,inPageFind:o(12512).B3.block_match}):w()]}),(0,g.jsx)(H().Z,{disabled:B,onClick:P,style:E.generateButtonStyles,children:C?(0,g.jsx)(u()._H,{id:"aiBlock.generate.loading.label",defaultMessage:"Generatingâ€¦"}):(0,g.jsx)(u()._H,{id:"aiBlock.generate.label",defaultMessage:"Generate"})})]}),(0,g.jsx)(W().sy,{hoveredOrSelectionState:i,setHaloShouldBeVisible:r})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(q().Z,{disabled:p,store:L,disableHoverMenu:h||i!==A().x.SelectedDescendant,disableDrag:t.isMobile}),s&&(0,g.jsx)(W().sy,{hoveredOrSelectionState:i,setHaloShouldBeVisible:r}),!V&&s&&(0,g.jsx)(X,{hoveredOrSelectionState:i,store:n,handleGenerateClick:P,isGenerating:C,setActionBarShouldBeVisible:v,showInitialPromptForAiBlock:a})]})}function J(e){const{children:t,forwardedRef:o,store:n,showingOverlay:i,setIsHovering:r,containerRef:a}=e,s=(0,c.useCallback)((()=>{N().Z.state.isDragging||L().default.state.isActive||r(!0)}),[r]),l=(0,c.useCallback)((()=>{N().Z.state.isDragging||L().default.state.isActive||r(!1)}),[r]),d=(0,g.jsx)("div",{className:P().zov,style:{display:"flex"},ref:a,children:(0,g.jsx)("div",{style:{position:i?"relative":void 0,paddingTop:3,paddingBottom:3,width:"100%",marginTop:4,marginBottom:4},onMouseLeave:l,onMouseEnter:s,children:t})});return(0,m().ez)(n,o,(0,c.useMemo)((()=>({renderedType:"ai_block",getBlockStore:()=>n,getNode:()=>null==a?void 0:a.current})),[a,n]),d)}function X(e){const{hoveredOrSelectionState:t,store:o,showInitialPromptForAiBlock:n,isGenerating:i,handleGenerateClick:r,setActionBarShouldBeVisible:a}=e,s=(0,d().VK)((()=>!(t!==A().x.Selected&&t!==A().x.SelectedDescendant||O().Z.state.isActive||F().default.state.isDragging||L().default.state.isActive||V().default.state.isKeyboardMode)),[t]),{prompt:l,additionalContext:p}=(0,W().GS)({store:o}),m=(0,k().O7)(),f=(0,c.useCallback)((()=>{M().RL(m,{type:"edit_prompt"}),n({prompt:p,clientPrompt:l})}),[n,m,l,p]),v=(0,d().VK)((()=>o.getFormat().ai_last_edited),[o]),h=(0,W().Ks)({store:o,isGenerating:i}),_=(0,I().yK)((e=>({actionBar:{position:"absolute",zIndex:C().t8,top:-40,right:-2,borderRadius:6,height:32,fontSize:14,lineHeight:1.2,display:"flex",whiteSpace:"nowrap",fontFamily:T().F5(w().locale).sans,background:e.popoverBackground,boxShadow:e.mediumBoxShadow},actionButton:{display:"flex",alignItems:"center",padding:"0 8px",borderRight:`1px solid ${x().ZP.whiteWithAlpha(.2)}`,boxShadow:`1px 0 0 ${e.regularDividerColor}`,marginRight:1},actionBarSparklesIcon:{width:16,height:16,fill:e.accentColors.purple[400]},generatedByAiHeader:{color:e.accentColors.purple[500],fontWeight:500},lastEditedTime:{color:e.accentColors.purple[300]},chevronDownIcon:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]);return(0,g.jsx)(j().Z,{visible:s,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onAnimationStart:()=>{a(!0)},onAnimationEnd:()=>{s||a(!1)},style:_.actionBar,children:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(K().Z,{style:{..._.actionButton,display:"flex",gap:4},onClick:f,disabled:h,children:[(0,D().t)(_.actionBarSparklesIcon),(0,g.jsx)("span",{style:_.generatedByAiHeader,children:(0,g.jsx)(u()._H,{id:"aiBlock.generated",defaultMessage:"Generated by AI"})}),v?(0,g.jsx)("span",{style:_.lastEditedTime,children:(0,B().IS)(v,{useLowercase:!0,useCompactFormat:!0,roundDownYears:!0})}):null,h?null:(0,E().i)(_.chevronDownIcon)]}),(0,g.jsx)(K().Z,{onClick:r,disabled:h,style:{..._.actionButton,opacity:h?.5:1,cursor:h?"not-allowed":"pointer"},children:i?(0,g.jsx)(u()._H,{id:"aiBlockBlock.update.loading",defaultMessage:"Updatingâ€¦"}):(0,g.jsx)(u()._H,{id:"aiBlockBlock.update",defaultMessage:"Update"})})]})})}const ee=c.memo(c.forwardRef((function(e,t){const{value:n}=(0,i().XJ)(o(106502).aiDependency),{value:r}=(0,i().XJ)(o(650996).assistantDependency);return(0,g.jsx)(o(802911).Z,{name:"LazyAiBlock",children:n&&r&&(0,g.jsx)(Q,{...e,ai:n,assistant:r,ref:t})})})),p().Z);var te=()=>o(802244);const oe=(0,u().vU)({embedButtonText:{defaultMessage:"Embed audio",id:"audioBlock.embedAudio.button.label"}});function ne(e,t){const n=(0,u().YB)(),i=(0,c.useRef)(null),r=(0,d().qz)(e.blockResizerStore,h().Z);return(0,m().ez)(e.store,t,(0,c.useMemo)((()=>({renderedType:"audio",getNode:()=>{const e=i.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,g.jsx)(_().ZP,{...e,blockResizerStore:r,ref:i,store:e.store,iconSvg:o(619555).l,mediaMenuCurrentTab:"file",mediaMenuTabs:[{type:"file",fileUpload:!0},{type:"embed"}],mediaMenuEmbedCaption:(0,g.jsx)(u()._H,{defaultMessage:"Works with .MP3s, .WAVs, and .OGGs",id:"audioBlock.embed.caption"}),embedButtonText:n.formatMessage(oe.embedButtonText),urlInputPlaceholder:"https://â€¦",children:(0,g.jsx)(u()._H,{defaultMessage:"Add an audio file",id:"audioBlock.placeholder"})}))}const ie=c.memo(c.forwardRef(ne),p().Z);var re=()=>o(955620),ae=()=>o(916673),se=()=>o(326966),le=()=>o(286310),ce=()=>o(762478),de=()=>o(879952),ue=()=>o(990966),pe=()=>o(286338),me=()=>o(641506),fe=()=>o(79555),ge=()=>o(316843),ve=()=>o(37399),he=()=>o(643051),_e=()=>o(518242),be=()=>o(729775),ye=()=>o(312578),Se=()=>o(661641),we=()=>o(135499),ke=()=>o(67961),Ie=()=>o(995047),Ce=()=>o(251932);const xe={width:16,height:16,minWidth:16,marginRight:6},Te={flexGrow:4,flexShrink:1,flexBasis:180,padding:14,paddingTop:12,overflow:"hidden",textAlign:"left"},Me=2*se().hM,Pe=(0,u().vU)({linkPlaceholder:{defaultMessage:"Paste in https://â€¦",id:"bookmarkBlock.editBookmark.linkPlaceholder"},bookmarkTitle:{defaultMessage:"Bookmark",id:"bookmarkBlock.bookmark.title"},errorMessage:{defaultMessage:"Please enter a valid link",id:"bookmarkBlock.invalidLinkError.message"}});function Ae(e,t){const{store:n}=e,i=(0,c.useRef)(null),r=(0,k().O7)(),a=(0,k().Fy)(),s=(0,m().PE)(e.store,e.disabled),l=(0,d().VK)((()=>n.getProperties()),[n]),[p,f]=(0,c.useState)(!1),v=a.isMobile||p,h=(0,d().VK)((()=>(0,pe().no)()),[]),_=(0,c.useCallback)((()=>{const e=n.getPropertyStore("caption");de().eP({environment:r,store:n}),ue().setSelectionAtEnd({store:e})}),[r,n]),b=(0,c.useCallback)((e=>(le().bO(r,{pastedText:e,source:"bookmark_block_menu"}),o(551771).Ke({environment:r,store:n,url:e}))),[r,n]),y=(0,c.useCallback)((()=>{const e=re().QaF((null==l?void 0:l.link)??[]);e&&o(752127).D({environment:r,url:e})}),[r,l]),S=(0,c.useCallback)((e=>b(e)),[b]),w=(0,c.useCallback)((()=>{const e=i.current;if(s){if(!(e&&e instanceof Element))return;const t=e.getBoundingClientRect();ce().$(r,{originRect:t,originGap:0,isSmallWidth:!0,showArrow:!0,title:R().Z.formatMessage(Pe.bookmarkTitle),currentTab:"embed",tabs:[{type:"embed",caption:(0,g.jsx)(u()._H,{defaultMessage:"Create a visual bookmark from a link.",id:"bookmarkBlock.visualBookmark.prompt"}),buttonText:(0,g.jsx)(u()._H,{defaultMessage:"Create bookmark",id:"bookmarkBlock.visualBookmark.create"}),inputPlaceholder:R().Z.formatMessage(Pe.linkPlaceholder),onChange:e=>{const t=o(300822).D(e);o(225771).B(t,"url")?(ce().Z(),S(t)):o(308186).UW(R().Z.formatMessage(Pe.errorMessage))}}]})}}),[s,r,S]),I=null!=l&&l.link?h?(0,g.jsx)(Ue,{ref:i,store:n,canEdit:s,showActionButton:v,setHover:f,hideContent:e.hideContent,disableCommentMenu:e.disableCommentMenu,disabled:e.disabled}):(0,g.jsx)(De,{ref:i,store:n,canEdit:s,showActionButton:v,setHover:f,hideContent:e.hideContent,disableCommentMenu:e.disableCommentMenu,disabled:e.disabled}):(0,g.jsx)(Ee,{ref:i,store:e.store,hideContent:e.hideContent,disableCommentMenu:e.disableCommentMenu,canEdit:s,disabled:e.disabled,showActionButton:v,onClick:w,setHover:f});return(0,m().ez)(e.store,t,(0,c.useMemo)((()=>({renderedType:"bookmark",getBlockStore:()=>n,getNode:()=>i.current,handleCreated:w,edit:w,caption:_,embed:b,activate:y})),[y,_,b,w,n]),I)}const Re=c.memo(c.forwardRef(Ae),p().Z);function Be(e){let{imageURL:t,store:o}=e;const n={display:"block",width:"100%",height:"100%",objectFit:"cover"};return(0,g.jsx)("div",{style:{flexGrow:1,flexShrink:1,flexBasis:180,display:"block",position:"relative"},children:(0,g.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0},children:(0,g.jsx)(we().Z,{url:t,isAuthenticated:!0,permissionRecord:o.pointer,width:250,render:(e,t)=>t&&(0,g.jsx)(_e().ZP,{style:n,src:t})})})})}const Ee=c.forwardRef((function(e,t){const{store:n,hideContent:i,disableCommentMenu:r,canEdit:a,disabled:s,showActionButton:l,onClick:c,setHover:d}=e;return(0,g.jsxs)(Z().p,{ref:t,allowSelectionWithin:!1,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),style:{display:"flex"},children:[(0,g.jsx)(Ie().Z,{iconSvg:o(121530).Q,disabled:s,shouldHideRight:!l,right:a&&(0,g.jsx)(fe().Z,{store:e.store,fadeIn:!1}),onClick:c,isLoading:!1,progressPercent:0,children:(0,g.jsx)(u()._H,{defaultMessage:"Add a web bookmark",id:"bookmarkBlock.addWebBookmark.placeholder"})}),(0,g.jsx)(ve().Z,{disableCommentMenu:r,hideContent:i,store:n})]})})),De=c.forwardRef((function(e,t){const{store:n,setHover:i,showActionButton:r,canEdit:a}=e,s=(0,k().O7)(),l=(0,c.useId)(),p=(0,m().rv)(n),f=(0,d().VK)((()=>n.getProperties()),[n]),v=(0,d().VK)((()=>n.getFormat()),[n]),h=re().Jcv(null==f?void 0:f.description),b=v.bookmark_cover,y=v.bookmark_icon,S=v.bookmark_loading_ttl,w=S?S-Date.now()-Me:0,[C,T]=(0,c.useState)(w>0),M=(0,c.useCallback)((()=>i(!0)),[i]),P=(0,c.useCallback)((()=>i(!1)),[i]);(0,c.useEffect)((()=>{let e;return w>0&&(e=setTimeout((()=>{T(!1)}),w+1e3)),()=>clearTimeout(e)}),[C,w]);const A=(0,I().yK)((e=>({content:{display:"flex",flexWrap:"wrap-reverse",alignItems:"stretch",textAlign:"left",overflow:"hidden",border:`1px solid ${e.darkDividerColor}`,borderRadius:4,position:"relative",...p},loadingLabel:{minHeight:24,marginBottom:2,display:"inline-flex",alignItems:"center",color:e.mediumTextColor},link:{color:e.regularTextColor},menuButton:{position:"absolute",top:4,right:4,background:(0,_().M1)(s)}})),[p,s]),R=re().Jcv(null==f?void 0:f.link);let B=re().Jcv(null==f?void 0:f.title);if(R===B||!B){const e=ae().Qc(R);e.hostname&&(B=e.hostname)}return(0,g.jsxs)(Z().p,{role:"figure",ref:t,"aria-labelledby":l,allowSelectionWithin:!0,children:[(0,g.jsxs)("div",{style:{display:"flex"},children:[(0,g.jsx)(o(15348).Z,{permissionRecord:n.pointer,url:R,render:(t,o)=>(0,g.jsxs)(be().Z,{href:o,external:!0,style:{flexGrow:1,minWidth:0},innerStyle:A.content,onMouseMove:M,onMouseLeave:P,children:[(0,g.jsxs)("div",{style:Te,children:[C?(0,g.jsxs)(ke().Z,{style:A.loadingLabel,children:[(0,g.jsx)(ye().Z,{style:{marginRight:8}})," ",(0,g.jsx)(u()._H,{defaultMessage:"Fetching preview",id:"bookmarkBlock.loadWhileFetching.message"})]}):(0,g.jsx)(ke().Z,{style:{minHeight:24,marginBottom:2},children:B}),h&&(0,g.jsx)(ke().Z,{isSmall:!0,isMultiline:!0,style:{height:32,overflow:"hidden"},children:h}),(0,g.jsxs)("div",{style:{display:"flex",marginTop:6},children:[y&&y.length>0&&(0,g.jsx)(we().Z,{url:y,isAuthenticated:!0,permissionRecord:e.store.pointer,render:(e,t)=>t&&(0,g.jsx)("img",{src:t,style:xe})}),(0,g.jsx)(ke().Z,{style:A.link,isSmall:!0,children:R})]})]}),b&&(0,g.jsx)(Be,{store:e.store,imageURL:b}),r&&a&&(0,g.jsx)(fe().Z,{store:e.store,style:A.menuButton,iconStyle:{fill:x().ZP.white},fadeIn:!0})]})}),(0,g.jsx)(ve().Z,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store})]}),(0,g.jsx)(ge().N,{store:e.store,captionAriaId:l,disabled:e.disabled})]})})),Ue=c.forwardRef((function(e,t){const{store:o,setHover:n,showActionButton:i,canEdit:r}=e,a=(0,c.useId)(),s=(0,k().Fy)(),l=(0,m().rv)(o),u=(0,d().VK)((()=>o.getProperties()),[o]),{imageURL:p,faviconURL:f,loadingTtl:v}=(0,d().VK)((()=>{const e=o.getFormat();return{imageURL:e.bookmark_cover,faviconURL:e.bookmark_icon,loadingTtl:e.bookmark_loading_ttl}}),[o]),h=re().Jcv(null==u?void 0:u.description),_=v?v-Date.now()-Me:0,[b,y]=(0,c.useState)(_>0),S=(0,c.useCallback)((()=>n(!0)),[n]),w=(0,c.useCallback)((()=>n(!1)),[n]);(0,c.useEffect)((()=>{let e;return _>0&&(e=setTimeout((()=>{y(!1)}),_+1e3)),()=>clearTimeout(e)}),[b,_]);const C=(0,I().yK)((e=>({content:{display:"flex",flexWrap:"wrap-reverse",alignItems:"stretch",textAlign:"left",overflow:"hidden",border:`1px solid ${e.darkDividerColor}`,borderRadius:4,position:"relative",...l},loadingLabel:{minHeight:24,marginBottom:2,display:"inline-flex",alignItems:"center",color:e.mediumTextColor},link:{color:e.regularTextColor},menuButton:{position:"absolute",top:4,right:4,border:"1px solid var(--Stroke-Deemphasized, rgba(227, 226, 224, 0.50))",background:"dark"===e.mode?e.accentColors.gray[100]:e.buttonBackground,zIndex:1,cursor:"pointer",transition:"box-shadow 0.1s ease, background 0.1s ease",borderRadius:6},mainContainer:{display:"flex",flexDirection:s.isMobile?"column":"row",flexWrap:"wrap",flexGrow:1,alignItems:"stretch",borderRadius:4,border:`1px solid ${e.tableDividerColor}`,position:"relative",...l},imageContainer:{height:154,position:"relative",flexGrow:1,flexShrink:1,flexBasis:100,overflow:"hidden",display:"block",width:"-webkit-fill-available"},contentContainer:{display:"flex",width:"--webkit-fill-available",padding:"18px 24px 14px 24px",gap:8,flexDirection:"column",flex:"1 0 0",justifyContent:"space-between",alignItems:"flex-start",alignSelf:"stretch",flexGrow:4,flexShrink:1,flexBasis:s.isMobile?145:180,overflow:"hidden",textAlign:"left"}})),[l,s]),T=re().Jcv(null==u?void 0:u.link);let M=re().Jcv(null==u?void 0:u.title);if(T===M||!M){const e=ae().Qc(T);e.hostname&&(M=e.hostname)}return(0,g.jsxs)(Z().p,{role:"figure",ref:t,"aria-labelledby":a,allowSelectionWithin:!0,children:[(0,g.jsxs)(be().Z,{href:T,external:!0,style:C.mainContainer,onMouseMove:S,onMouseLeave:w,children:[p&&(0,g.jsx)("div",{style:C.imageContainer,children:(0,g.jsx)("div",{style:{position:"absolute",inset:0},children:(0,g.jsx)(_e().ZP,{src:p,style:{width:"100%",height:"100%",borderTopLeftRadius:3,borderBottomLeftRadius:3,position:"relative",objectFit:"cover"}})})}),(0,g.jsxs)(Ce().Ht,{style:C.contentContainer,children:[(0,g.jsxs)(Ce().Ht,{style:{alignSelf:"stretch",gap:3},children:[f&&f.length>0&&(0,g.jsx)(he().Z,{type:"image_url",imageURL:f,size:24,style:{margin:1}}),(0,g.jsx)(Se().q,{styleName:"UIHeader-17px/Medium",colorName:"primary",customStyles:{...(0,me().pd)(1),textOverflow:"ellipsis"},children:M}),h&&(0,g.jsx)(Se().q,{styleName:"UIMedium-13px/Regular",colorName:"primary",customStyles:{...(0,me().pd)(2),textOverflow:"ellipsis"},children:h})]}),(0,g.jsx)(Ce().Ht,{style:{alignSelf:"stretch"},children:(0,g.jsx)(Se().q,{styleName:"UIMedium-13px/Regular",colorName:"secondary",customStyles:{...(0,me().pd)(1)},children:T})})]}),i&&r&&(0,g.jsx)(fe().Z,{store:e.store,style:C.menuButton,iconStyle:{fill:x().ZP.uiGray},fadeIn:!0})]}),(0,g.jsx)(ge().N,{store:e.store,captionAriaId:a,disabled:e.disabled})]})}));var Fe=()=>o(494488);function Ne(e,t){const n=(0,c.useRef)(null),i=(0,k().Fy)(),r=(0,m().PE)(e.store,e.disabled),a=(0,d().VK)((()=>e.store.getNavigableBlockStore()),[e.store]),s=a?(0,g.jsxs)(Z().p,{allowSelectionWithin:!0,style:{display:"flex",paddingTop:Fe().ZD.paddingTop,paddingBottom:Fe().ZD.paddingBottom},ref:n,children:[(0,g.jsx)(o(853516).l2,{showCurrentPageControls:!1,ancestorMaxWidth:200,currentPageMaxWidth:300,store:a,maxAncestorCount:3,isMobile:i.isMobile,style:{flexGrow:1,minWidth:0,fontSize:"inherit"}}),i.isMobile&&r&&(0,g.jsx)(fe().Z,{store:e.store,fadeIn:!0,style:{marginTop:2,marginRight:4}}),(0,g.jsx)(ve().Z,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store})]}):null;return(0,m().ez)(e.store,t,(0,c.useMemo)((()=>({renderedType:"breadcrumb",getNode:()=>n.current,getBlockStore:()=>e.store})),[e.store]),s)}const Ve=c.memo(c.forwardRef(Ne),p().Z);var Le=()=>o(389720),Oe=()=>o(6254),Ze=()=>o(154251),je=()=>o(81954),Ke=()=>o(767306),ze=()=>o(254213),He=()=>o(540896),qe=()=>o(70320),We=()=>o(959137),Ge=()=>o(325107),$e=()=>o(777346);function Qe(e){const t=(0,k().O7)(),o=(0,k().Fy)(),n=(0,I().Fg)(),i=(0,m().PE)(e.store,e.disabled),r=(0,c.useCallback)((async()=>{const o=re().Jcv(e.store.getBlockTitleStore().getValue()),n=await We().F.clipboardActions.load();n.copyString({environment:t,stringValue:o,copiedMessage:n.clipboardMessages.copiedCodeToClipboard})}),[t,e.store]),a={height:25,background:n.codeBlockButtonBackground,color:n.regularTextColor,fontWeight:T().Ue.regular,padding:"4px 6px",fontSize:11.5};return(0,g.jsxs)("div",{style:{color:n.mediumTextColor,display:"flex",alignItems:"center",justifyContent:"center",fontSize:12,marginTop:4,marginRight:4},children:[!o.isMobile&&(0,g.jsxs)($e().Z,{onClick:r,style:{...a,borderTopRightRadius:0,borderBottomRightRadius:0},children:[(0,Ge().U)({height:16,width:16,paddingRight:4}),(0,g.jsx)(u()._H,{defaultMessage:"Copy",id:"codeBlock.copyToClipboard.button"})]}),!o.isMobile&&i&&(0,g.jsx)($e().Z,{onClick:e.handleEditCaption,style:{...a,marginLeft:1,marginRight:1,borderRadius:0},children:(0,g.jsx)(u()._H,{defaultMessage:"Caption",id:"codeBlock.caption.button"})}),i&&(0,g.jsx)(fe().Z,{style:{height:25,background:n.codeBlockButtonBackground,borderTopLeftRadius:o.isMobile?3:0,borderBottomLeftRadius:o.isMobile?3:0,paddingLeft:8,paddingRight:8},store:e.store,fadeIn:!1})]})}var Ye=()=>o(696459),Je=()=>o(33150),Xe=()=>o(388284);const et=(0,f().IU)("codePreviewOnly",{viewBox:"0 0 24 20",svg:(0,g.jsx)("path",{d:"M2.608 11.906h1.21v1.032c0 1.463.766 2.215 2.243 2.215h9.33c1.477 0 2.243-.758 2.243-2.215V6.444c0-1.463-.766-2.221-2.242-2.221H14.12V3.197c0-1.463-.772-2.221-2.242-2.221h-9.27C1.132.976.366 1.734.366 3.197v6.494c0 1.457.766 2.215 2.242 2.215zm.082-1.34c-.635 0-.984-.328-.984-.99v-6.27c0-.662.349-.99.984-.99h9.106c.629 0 .984.328.984.99v.917H6.06c-1.476 0-2.242.758-2.242 2.221v4.122H2.69zm3.453 3.254c-.636 0-.985-.335-.985-.998V6.561c0-.664.349-.998.985-.998h9.167c.628 0 .984.334.984.998v6.261c0 .663-.356.998-.984.998H6.143zm2.713-1.77c0 .307.335.437.595.287l3.972-2.324a.372.372 0 00-.007-.643L9.451 7.046c-.26-.15-.595-.027-.595.287v4.717z"})}),tt=(0,f().IU)("splitView",{viewBox:"0 0 24 20",svg:(0,g.jsx)("path",{d:"M13.456 11.143V2.864c0-1.476-.766-2.242-2.222-2.242H2.915C1.452.622.693 1.388.693 2.864v8.278c0 1.477.76 2.243 2.222 2.243h8.32c1.462 0 2.221-.766 2.221-2.242zm-1.34-.083c0 .636-.335.985-.998.985H3.024c-.663 0-.99-.349-.99-.985V7.663h10.082v3.397zM2.033 2.946c0-.629.328-.984.991-.984h8.094c.663 0 .998.355.998.984v3.405H2.033V2.946z"})});var ot=()=>o(38562);const nt=(0,u().vU)({showCodePreviewSection:{id:"action.codePreviewSection.name",defaultMessage:"Show in block"}}),it=(0,ot().cN)({key:"show code",displayName:ot().RE.showOnlyCodeFormat,analyticsName:ot().RE.showOnlyCodeFormat.defaultMessage,svg:o(975584)._,validators:[],closeParentMenu:!0,action:e=>{let{blocks:t,environment:o}=e;Je().pZ({environment:o,blocks:t,previewFormat:"code"})}}),rt=(0,ot().cN)({key:"show preview on code block",displayName:ot().RE.showCodePreviewFormat,analyticsName:ot().RE.showCodePreviewFormat.defaultMessage,svg:et,validators:[],closeParentMenu:!0,action:e=>{let{blocks:t,environment:o}=e;Je().pZ({environment:o,blocks:t,previewFormat:"preview"})}}),at=(0,ot().cN)({key:"show code and preview",displayName:ot().RE.showSplitViewFormat,analyticsName:ot().RE.showSplitViewFormat.defaultMessage,svg:tt,validators:[],closeParentMenu:!0,action:e=>{let{blocks:t,environment:o}=e;Je().pZ({environment:o,blocks:t,previewFormat:"split_view"})}}),st=[{key:"code preview actions block",render:e=>(0,g.jsx)(Xe().Z,{isTitleUppercase:!1,...e}),title:R().Z.formatMessage(nt.showCodePreviewSection),actions:[it,rt,at]}];var lt=()=>o(352230),ct=()=>o(529048),dt=()=>o(128119),ut=(o(492176),o(7961),()=>o(641702));const pt=new(i().Ss)("NotionScriptRenderer",(()=>Promise.all([o.e(59293),o.e(22785),o.e(75760)]).then(o.bind(o,888294)))),mt=(0,i().kF)(pt,(e=>e.NotionScriptRenderer));var ft=()=>o(960721),gt=()=>o(95718),vt=(o(821057),o(398858),o(461318),o(33228),()=>o(956057)),ht=()=>o(720866);const _t=new(i().Ss)("mermaidAPI",(async()=>{const e=(await Promise.all([o.e(81580),o.e(27856),o.e(95552)]).then(o.bind(o,342858))).default;return e.initialize({startOnLoad:!1,securityLevel:"strict",themeVariables:{fontFamily:T().SY}}),e})),bt="\n---\n";var yt=()=>o(765513);const St=(()=>{try{return"true"===new URLSearchParams(window.location.search).get("disableMermaid")}catch(e){return!1}})(),wt={lineHeight:1.16};function kt(e){const{mermaidAPI:t,source:o}=e,n=(0,c.useRef)(null),i=(0,c.useRef)(`mermaid-${vt().Il()}`),[r,a]=(0,c.useState)(),s=(0,I().yK)((e=>({diagram:(0,Ce().xk)({alignContent:"center",justifyContent:"center"})})),[]),l=function(e){switch(e){case"dark":return"dark";case"light":return"neutral";default:(0,Ye().t1)(e)}}((0,I().Fg)().mode),d=(0,c.useMemo)((()=>function(e){const{source:t,theme:o}=e,n=`%%{init: {'theme':'${o}'}}%%\n`;return t.startsWith("---\n")&&t.includes(bt)?t.replace(bt,`${bt}${n}`):`${n}${t}`}({source:o,theme:l})),[o,l]);return(0,c.useLayoutEffect)((()=>{if(!t)return;let e=!1;try{t.render(i.current,d).then((t=>{const o=t.svg,i=t.bindFunctions;if(e)return;if(!n.current)return;n.current.innerHTML=o;const r=n.current.firstChild;r&&r instanceof SVGSVGElement&&r.removeAttribute("height");try{i&&i(n.current),a(void 0)}catch(s){a((0,ht().t)(s))}}),(e=>{a((0,ht().t)(e))}))}catch(o){a((0,ht().t)(o))}return()=>{e=!0}}),[d,t]),(0,g.jsxs)(g.Fragment,{children:[r&&(0,g.jsx)(It,{error:r}),(0,g.jsx)("div",{style:s.diagram,ref:n})]})}function It(e){const{error:t}=e,o=(0,I().yK)((e=>({label:{color:e.errorText,marginBottom:4,whiteSpace:"pre-wrap"}})),[]);return"str"in t?(0,g.jsx)("div",{children:(0,g.jsxs)(ke().Z,{isMultiline:!0,style:o.label,children:[t.str,(0,g.jsx)("div",{children:(0,g.jsx)(yt().Z,{external:!0,href:"https://mermaid-js.github.io/mermaid/#/examples",children:(0,g.jsx)(u()._H,{id:"mermaidRenderer.error.seeMermaidExamples",defaultMessage:"See Mermaid examples"})})})]})}):(0,g.jsx)(ke().Z,{isMultiline:!0,style:o.label,children:(0,g.jsx)(u()._H,{id:"mermaidRenderer.error.unknownError",defaultMessage:"Syntax error in Mermaid diagram: {error}",values:{error:`${t.name}: ${t.message}`}})})}function Ct(e){const t=(0,d().VK)((()=>e.store.getBlockTitleStore()),[e.store]),o="code"===e.currentCodePreviewFormat,n=(0,c.useMemo)((()=>Tt(e.currentLanguage)),[e.currentLanguage]),i=(0,d().VK)((()=>t.getValue()),[t]),r=(0,d().VK)((()=>{const e=(0,gt().f9)().at(0);return!(null==e||!e.isStreaming())&&(t.inMemoryRecordCache.isTemporaryData&&t.inMemoryRecordCache.name.includes(ft().g))}),[t]);if(o||!i||!n)return null;const a=n.component;return(0,g.jsx)("div",{style:Pt(e.currentCodePreviewFormat),children:(0,g.jsx)(a,{source:ut().Xh(i,t),isAssistantDataLoading:r})})}const xt={Mermaid:{component:function(e){const{source:t,isAssistantDataLoading:n}=e,r=(0,o(565630).Kt)(t,300,Object.is),a=(0,i().XJ)(_t),s=St?new Error("Mermaid is disabled because 'disableMermaid=true' was in the query string when the page loaded. Reload the page to re-enable Mermaid."):a.error;return(0,g.jsx)("div",{style:s?void 0:wt,children:s?!n&&(0,g.jsx)(It,{error:s}):(0,g.jsx)(kt,{mermaidAPI:a.value,source:r})})}},NotionScript:{component:mt}};function Tt(e){const t=(0,Ye().qg)(xt,e)?xt[e]:void 0;if(t)return t}function Mt(e){return Boolean(Tt(e))}function Pt(e){switch(e){case"split_view":return{padding:16,flexGrow:1,flexShrink:0};case"preview":return{padding:16,paddingTop:40,alignSelf:"center",flexGrow:1,flexShrink:0};case"code":return{};default:(0,Ye().t1)(e)}}var At=()=>o(149809),Rt=()=>o(448419),Bt=()=>o(198829);function Et(e){const t=(0,k().O7)(),o=(0,k().Fy)(),n=(0,I().Fg)(),i=(0,m().PE)(e.store,e.disabled),r=(0,d().qz)(void 0,ct().Z),a=(0,c.useCallback)((n=>{const i=(0,g.jsx)(At().Z,{context:{blocks:[e.store],environment:t,publicEditMode:void 0},sections:st,initialFocus:["code","preview","split_view"].findIndex((t=>t===e.currentCodePreviewFormat)),onAccept:n.close});let r;return r=o.isMobile?{menuType:lt().o.ActionSheet}:{menuType:lt().o.Popup,width:167,maxHeight:"50vh"},(0,g.jsx)(Bt().Z,{...r,children:i})}),[o.isMobile,t,e.currentCodePreviewFormat,e.store]);return Mt(e.currentLanguage)?(0,g.jsx)(Rt().ZP,{popupType:o.isMobile?Rt().Z4.SlideUp:Rt().Z4.Popup,renderOrigin:t=>(0,g.jsxs)($e().Z,{disabled:!i,style:{marginRight:5},...t,children:[Dt(e.currentCodePreviewFormat),i&&(0,E().i)({width:10,marginLeft:4,fill:n.lightIconColor})]}),buttonPopupStore:r,placementToOrigin:dt().Iw.Bottom,render:a}):null}function Dt(e){let t;switch(e){case"split_view":t=ot().RE.showSplitViewFormat;break;case"preview":t=ot().RE.showCodePreviewFormat;break;case"code":t=ot().RE.showOnlyCodeFormat;break;default:(0,Ye().t1)(e)}return(0,g.jsx)(u()._H,{...t})}o(267602),o(653476),o(241792);var Ut=()=>o(657320),Ft=()=>o(716703),Nt=()=>o(35980),Vt=()=>o(269299),Lt=()=>o(543887),Ot=()=>o(619541),Zt=()=>o(279386),jt=()=>o(827973),Kt=()=>o(740046);function zt(e){const t=(0,Ut().l)(),o=(0,u().YB)(),n=(0,k().O7)(),i=(0,k().Fy)(),r=(0,I().Fg)(),a=(0,d().VK)((()=>t&&t.pageStore?Zt().MT.getMode(t.pageStore):"default"),[t]),s=null!=t&&t.pageStore?a:"default",l=(0,m().PE)(e.store,e.disabled)&&"suggest"!==s,[p,f]=(0,c.useState)(""),v=(0,d().qz)(void 0,ct().Z),h=(0,Lt().Kl)(),_=(0,c.useCallback)((e=>{f(e.target.value)}),[]),b=(0,c.useCallback)((()=>{f("")}),[]),y=(0,c.useCallback)((t=>{Vt().createAndCommit({userAction:"CodeBlock.setPersistedLanguage",environment:n,canUndo:!0,perform:o=>{Je().E5({blocks:[e.store],language:t,transaction:o})}}),Nt().Z.set({userId:n.currentUser.id,key:Ot().T.localLanguagePreferenceKey,value:t})}),[n,e.store]),S=(0,c.useCallback)((t=>{const r=Ft().X0.filter((e=>!(!h&&e===Ft().g1.NotionScript)&&"Java/C/C++/C#"!==e)),a=[{key:0,render:e=>(0,g.jsx)(Xe().Z,{...e}),actions:r.map((e=>{const o={key:e,displayName:e,analyticsName:e,searchName:e,render:t=>(0,g.jsx)(jt().Z,{title:e,...t}),action:()=>{y(e),t.close()},closeParentMenu:!0};return o}))}],s=(0,g.jsx)(At().Z,{filter:p,context:{blocks:[],environment:n,publicEditMode:void 0},sections:a,initialFocus:p?0:r.findIndex((t=>t===e.currentLanguage))}),l=(0,g.jsx)(Xe().Z,{isInput:!0,children:(0,g.jsx)(Kt().ZP,{value:p,onChange:_,focus:!i.isMobile||void 0,placeholder:o.formatMessage(ot().RE.searchPlaceholder),focusAfterAnimation:!0})});let c;return c=i.isMobile?{menuType:lt().o.Modal,title:(0,g.jsx)(u()._H,{defaultMessage:"Language",id:"codeBlock.mobileLanguageMenu.title"}),right:(0,g.jsx)(u()._H,{defaultMessage:"Done",id:"codeBlock.mobileLanguageMenu.doneButton.label"}),onClickRight:t.close,header:l}:{menuType:lt().o.Popup,width:240,maxHeight:"50vh",header:l},(0,g.jsx)(Bt().Z,{...c,children:s})}),[e.currentLanguage,i.isMobile,n,_,o,p,y,h]);return(0,g.jsx)(Rt().ZP,{popupType:i.isMobile?Rt().Z4.SlideUp:Rt().Z4.Popup,renderOrigin:t=>(0,g.jsxs)($e().Z,{disabled:!l,style:{marginRight:5},...t,children:[e.currentLanguage,l&&(0,E().i)({width:10,marginLeft:4,fill:r.lightIconColor})]}),buttonPopupStore:v,placementToOrigin:dt().Iw.Bottom,render:S,onClose:b})}var Ht=()=>o(942578);const qt="opacity 300ms ease-in";function Wt(e,t){const n=(0,k().O7)(),{isMobile:i}=(0,k().Fy)(),r=(0,c.useId)(),a=(0,c.useRef)(null),s=(0,d().qz)(void 0,h().Z),{store:l,disabled:u}=e,p=(0,d().VK)((()=>(0,Ke().G3)(l)),[l]),f=o(748456).W[p],v=(0,d().VK)((()=>(0,Ke().Cn)(l)),[l]),_=(0,d().VK)((()=>l.getFormat().code_wrap),[l]),b=(0,d().VK)((()=>l.getBlockTitleStore()),[l]),[y,S]=(0,c.useState)(!1),[w,C]=(0,c.useState)(!1),x=(0,d().VK)((()=>V().default.state.isKeyboardMode),[]),T="ASCII Art"===p?1:void 0,M=(0,d().VK)((()=>!!l.isRootOrDirectChild()),[l]),P=(0,d().VK)((()=>(0,Ke().pF)(l)),[l]),A=(0,d().VK)((()=>{let e;const t=o(482162).default.isSidePeekOpen(),i=(0,o(942226).wq)(l),r=(0,o(954452).Uj)(n,i),a=o(84926).Z.getWidth(i),s=l.getFormat().block_width;if(!M)return e;if(i)return e;if(t){if(!s||!r||!a)return e;r>=a&&s>=r?r>ze().z?e=r:s>ze().z&&(e=ze().z):a>=r&&s>=a&&(a>ze().z?e=a:s>ze().z&&(e=ze().z))}return e}),[n,M,l]),R=(0,He().O)(),B=(0,I().yK)((t=>({resizableRootContainer:{display:"flex",position:"relative",margin:"auto",overflow:"visible",width:A},resizableContentContainer:{justifyContent:"center",alignItems:"center",width:"100%",maxWidth:"100%",overflow:"scroll"},valueAndPreview:{padding:"34px 22px 34px 22px",...R&&{background:t.codeBlockBackground,borderRadius:4}},wrapper:{flexGrow:1,textAlign:"left",position:"relative",minWidth:0,lineHeight:T,width:"100%",...!R&&{background:t.codeBlockBackground,borderRadius:4},...e.style},languageSelector:{position:"absolute",top:8,left:8,zIndex:1,color:t.mediumTextColor,display:"flex",alignItems:"center",justifyContent:"flex-end",opacity:y||w||i?1:0,transition:qt},header:{position:"absolute",top:3,right:1,zIndex:1,color:t.mediumTextColor,display:"flex",alignItems:"center",justifyContent:"flex-end",height:25,fontSize:11.5,opacity:i||w||!x&&y?1:0,transition:qt},captionContainer:{background:t.contentBackground,paddingRight:105}})),[T,w,y,x,i,e.style,A,R]),E=(0,c.useCallback)((()=>{const e=l.getPropertyStore("caption");de().eP({environment:n,store:l}),ue().setSelectionAtEnd({store:e})}),[n,l]),D=(0,c.useCallback)((e=>{const t=e.target;t instanceof HTMLElement&&(0,o(474788).E)(t)&&C(!0)}),[]),U=(0,c.useCallback)((e=>{C(!1)}),[]),F=(0,c.useCallback)((()=>{S(!0)}),[]),N=(0,c.useCallback)((()=>{S(!1)}),[]),L=(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{onFocus:D,onBlur:U,style:B.languageSelector,children:[(0,g.jsx)(zt,{disabled:e.disabled,store:e.store,currentLanguage:p}),(0,g.jsx)(Et,{disabled:e.disabled,store:e.store,currentLanguage:p,currentCodePreviewFormat:v})]}),(0,g.jsx)("div",{onFocus:D,onBlur:U,style:B.header,children:(0,g.jsx)(Qe,{store:e.store,disabled:e.disabled,handleEditCaption:E})}),(0,g.jsxs)("div",{style:B.valueAndPreview,children:[$t(p,v)&&(0,g.jsx)(o(523261).u,{store:b,blockStore:l,language:f,disabled:u,codeWrap:Boolean(_),isQuickFind:Boolean(e.isQuickFind),parentSpaceId:(0,je().J)(l.pointer.spaceId)}),(0,g.jsx)(Ct,{store:l,disabled:u,currentCodePreviewFormat:v,currentLanguage:p})]}),(0,g.jsx)("div",{style:B.captionContainer,children:(0,g.jsx)(ge().N,{store:e.store,captionAriaId:r,disabled:e.disabled})})]}),O=(0,g.jsx)(g.Fragment,{children:"â€‹"}),j=(0,g.jsx)(ve().Z,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store,hideIfSidebarOrMarginCommentsVisible:!0}),K=P?(0,g.jsxs)("div",{ref:a,style:B.resizableRootContainer,children:[(0,g.jsxs)("div",{style:{width:"100%"},onMouseMove:F,onMouseLeave:N,children:[M&&(0,g.jsx)(Ht().Z,{store:l,resizerType:qe().IS.Horizontal,resizerAlignment:qe().bZ.Left,resizeComponent:a,preserveScale:!1,isHovered:y,blockResizerStore:s},"LeftResizer"),(0,g.jsxs)("div",{style:B.resizableContentContainer,children:[(0,g.jsx)(Z().p,{role:"figure","aria-labelledby":r,allowSelectionWithin:!0,style:B.wrapper,children:L}),O]}),(0,g.jsx)(Ht().Z,{store:l,resizerType:qe().IS.Horizontal,resizerAlignment:qe().bZ.Right,resizeComponent:a,preserveScale:!1,isHovered:y,blockResizerStore:s},"RightResizer")]}),j]}):(0,g.jsxs)("div",{ref:a,style:{display:"flex"},children:[(0,g.jsx)(Z().p,{role:"figure","aria-labelledby":r,allowSelectionWithin:!0,style:B.wrapper,onMouseMove:F,onMouseLeave:N,children:L}),O,j]});return(0,m().ez)(e.store,t,(0,c.useMemo)((()=>({renderedType:"code",getBlockStore:()=>l,getNode:()=>a.current,caption:E})),[E,l]),K)}const Gt=c.memo(c.forwardRef(Wt),p().Z);function $t(e,t){return!Mt(e)||"preview"!==t}const Qt=(0,f().IU)("codepen",{viewBox:"0 0 40 40",svg:(0,g.jsx)("path",{d:"M39.9834,13.7071 C39.8236,12.6665 38.6647,12.1063 37.8655,11.586 C36.4269,10.6255 35.0283,9.70502 33.5897,8.74452 C30.1931,6.46334 26.7564,4.18216 23.3598,1.90098 C22.5606,1.38071 21.7613,0.820424 20.9621,0.300155 C20.4027,-0.100052 19.6434,-0.100052 19.044,0.300155 C16.7663,1.82094 14.4485,3.38175 12.1708,4.90253 L2.10066,11.626 C1.22152,12.1863 0.0626603,12.7466 0.0226996,13.9472 C-0.0172612,15.2679 0.0226996,16.6286 0.0226996,17.9493 L0.0226996,24.3526 C0.0226996,25.5132 -0.217065,26.8739 0.861875,27.5943 C3.41936,29.3552 6.01681,31.036 8.61426,32.7569 C11.8111,34.878 15.008,37.0391 18.2048,39.1602 C19.084,39.7606 19.9631,40.4009 21.0421,39.6805 C21.9611,39.0802 22.8403,38.4799 23.7594,37.8796 C27.3159,35.5184 30.8724,33.1171 34.4289,30.7559 L38.385,28.1145 C38.6248,27.9544 38.9045,27.7944 39.1443,27.5943 C39.7037,27.1941 39.9435,26.6338 39.9435,25.9534 L39.9435,14.9477 C39.9834,14.5075 40.0234,14.1073 39.9834,13.7071 C39.9834,13.7871 39.9834,13.6671 39.9834,13.7071 Z M21.7214,4.94255 L35.1882,13.9472 L29.194,17.9893 L21.7214,12.9867 L21.7214,4.94255 Z M18.2848,4.94255 L18.2848,12.9467 L10.8521,17.9493 L4.81799,13.9472 L18.2848,4.94255 Z M3.45932,17.1489 L7.73512,20.0304 L3.45932,22.9118 L3.45932,17.1489 Z M18.2848,35.1182 L4.81799,26.1135 L10.8121,22.0714 L18.2448,27.074 L18.2448,35.1182 L18.2848,35.1182 Z M20.0031,24.1125 L13.929,20.0304 L20.0031,15.9482 L26.0771,20.0304 L20.0031,24.1125 Z M21.7214,35.1182 L21.7214,27.114 L29.1541,22.1114 L35.1482,26.1535 L21.7214,35.1182 Z M36.5468,22.9118 L32.271,20.0304 L36.5868,17.1489 L36.5468,22.9118 Z"})});function Yt(e,t){const o=(0,c.useRef)(null),n=(0,d().qz)(e.blockResizerStore,h().Z);return(0,m().ez)(e.store,t,(0,c.useMemo)((()=>({renderedType:"codepen",getNode:()=>{const e=o.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,g.jsx)(_().ZP,{...e,blockResizerStore:n,ref:o,store:e.store,iconSvg:Qt,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,g.jsx)(u()._H,{defaultMessage:"Works with any public CodePen linkâ€¦",id:"codepenBlock.embed.caption"}),children:(0,g.jsx)(u()._H,{defaultMessage:"Embed CodePen",id:"codepenBlock.placeholder"})}))}const Jt=c.memo(c.forwardRef(Yt),p().Z);var Xt=()=>o(963310),eo=()=>o(492788),to=()=>o(576828),oo=()=>o(121058),no=()=>o(949842),io=()=>o(797522),ro=()=>o(233417),ao=()=>o(197666);const so={width:46,handleWidth:4};function lo(e){const t=(0,d().qz)(e.mouseStore,ro().Z),{showHandle:o,onMouseDown:n,onTouchStart:i,onContextMenu:r,onDoubleClick:a}=e,s=(0,k().O7)(),l=(0,d().VK)((()=>o&&(t.state.mouseEntered||s.device.isMobile&&ao().Z.state)),[o,t,s.device]),u=(0,c.useCallback)((()=>{t.setState({...t.state,mouseEntered:!1}),ao().Z.removeListener(u)}),[t]),p=(0,c.useCallback)((()=>{ao().Z.removeListener(u),ao().Z.state||t.setState({...t.state,mouseEntered:!0})}),[u,t]),m=(0,c.useCallback)((()=>{ao().Z.state?ao().Z.addListener(u):t.setState({...t.state,mouseEntered:!1})}),[u,t]),f=(0,I().yK)((e=>{const t={position:"relative",width:so.width,flexGrow:0,flexShrink:0,transition:"opacity 200ms ease-out",opacity:0};return{base:t,hovered:{...t,opacity:1,cursor:"col-resize"},handle:{position:"absolute",top:0,bottom:0,left:so.width/2-so.handleWidth/2,width:so.handleWidth,height:"100%",background:e.darkDividerColor}}}),[]),v=l?f.hovered:f.base;return(0,g.jsx)("div",{style:v,onDoubleClick:a,onMouseDown:n,onTouchStart:i,onContextMenu:r,onMouseEnter:p,onMouseLeave:m,children:o&&(0,g.jsx)("div",{style:f.handle})})}const co=c.memo(lo);var uo=()=>o(307369);function po(e,t){const{ratio:n,store:i,isLastItem:r,disabled:a,numColumns:s}=e,l=(0,k().O7)(),u=(0,c.useRef)(!1),p=(0,m().PE)(i,a),f=c.useRef(null),v=(0,d().VK)((()=>1===i.getContentLength()),[i]),h=(0,d().VK)((()=>{const e={width:"100%"};return s>1&&(e.width=`calc((100% - ${so.width*(s-1)}px) * ${n})`),(0,oo().zE)(i,l)||(e.width="100%"),e}),[l,s,n,i]),_=(0,d().VK)((()=>(0,oo().zE)(i,l)),[i,l]),b=(0,g.jsx)(j().Z,{animate:h,ref:f,style:go(_),onMouseDown:e=>{(0,oo().zE)(i,l)&&(0,no().ZP)({event:e,context:no().Af.EditorMouseDown,callback:()=>{u.current=!0,e.preventDefault(),o(658325).AI({environment:l,target:e.target,startX:e.clientX,startY:e.clientY,showSelectionRect:!0,preventSelectStores:[],allowVerticalEdgeScroll:!0,allowHorizontalEdgeScroll:!1})}})},onMouseUp:e=>{if(u.current&&!o(154057).uG(e)){const{clientX:t,clientY:o,target:n}=e;eo().default.afterNextFlush((()=>{ue().editNearestBlock(l,{x:t,y:o,target:n instanceof Element?n:void 0}),u.current=!1}))}},onClick:t=>function(e,t,o){if(io().default.hasBeenUpdatedSince(e.timeStamp))return;if(t.canEdit()){const{clientX:n,clientY:i,target:r}=e;eo().default.afterNextFlush((()=>{Vt().createAndCommit({userAction:"Column.handleClick",environment:o,canUndo:!0,perform:e=>{ue().insertIfAtBottomOfColumn(o,{x:n,y:i,target:r instanceof Element?r:void 0},t,e)}})}))}}(t,e.store,l),children:(0,g.jsx)(o(439320).F,{children:(0,g.jsx)(uo().Z,{store:i,canDropLeft:p&&_,canDropRight:r&&p&&_,onSelectableDrop:t=>function(e,t,o,n){const{droppedDirection:i,droppedStores:r,duplicate:a}=e;Vt().createAndCommit({userAction:"Column.handleDrop",environment:n,canUndo:!0,perform:e=>{to().LQ({environment:n,droppedDirection:i,droppedStores:r,targetParentStore:t.getContentStore(),targetStore:o,duplicate:a,transaction:e})}})}(t,e.columnListStore,e.store,l),analyticsName:"column",style:{display:"flex",flexDirection:"column"},shouldShowDropZone:!0,isListContainer:!0,children:(0,g.jsx)(q().Z,{store:i.getContentStore(),disabled:a,disableLayout:v,disableCommentMenu:e.disableCommentMenu,disableHoverMenu:e.disableHoverMenu,disableDrag:e.disableDrag})})})});return(0,m().ez)(i,t,(0,c.useMemo)((()=>({renderedType:"column",getBlockStore:()=>i,getNode:()=>f.current})),[i]),b)}const mo=c.memo(c.forwardRef(po),p().Z),fo=12;function go(e){const t={paddingTop:fo,paddingBottom:fo};return e?{...t,flexGrow:0,flexShrink:0}:t}o(670560),o(30005);var vo=()=>o(156642),ho=()=>o(513670),_o=()=>o(421654),bo=()=>o(263184);class yo extends bo().default{getInitialState(){return{dragging:!1}}}const So=yo;var wo=()=>o(120420),ko=()=>o(472753),Io=()=>o(491927);function Co(e){const{columnListStore:t}=e;t.setState({dragging:!1})}function xo(e){const{columnListBlockStore:t,diffX:o,columnListStore:n,leftColumnStore:i,rightColumnStore:r}=e;if(n.state.dragging){const{leftColumnStartWidth:e}=n.state,a=(0,wo().Z)(n.state.leftColumnStartRatio,0,1),{rightColumnStartWidth:s}=n.state,l=(0,wo().Z)(n.state.rightColumnStartRatio,0,1),c=e+s,d=a+l,u=(0,wo().Z)(e+o,0,c),p=(0,wo().Z)(s-o,0,c),m=d*(u/c),f=d*(p/c);if(0===u&&0===p)return n.setState({...n.state,temporaryRatios:{}}),{leftColumnNewRatio:a,rightColumnNewRatio:l};{const e=1/(8*t.getContentLength());let o=Math.round(m/e)*e,s=f+(m-o);return o<e&&(o=e,s=a+l-e),s<e&&(s=e,o=l+a-e),n.setState({...n.state,temporaryRatios:{[i.id]:o,[r.id]:s}}),{leftColumnNewRatio:o,rightColumnNewRatio:s}}}}function To(e){const t=(0,d().qz)(e.mouseStore,ro().Z),{canDrag:n,columnListBlockStore:i,leftColumnBlockStore:r,rightColumnBlockStore:a,columnListStore:s}=e,l=(0,k().O7)(),u=(0,c.useCallback)((e=>{n&&(e.preventDefault(),function(e){const{environment:t,columnListStore:o,leftColumnStore:n,rightColumnStore:i}=e,r=ko().R.getRect(n),a=ko().R.getRect(i);r&&a&&(o.setState({dragging:!0,temporaryRatios:{},leftColumnStartWidth:r.width,leftColumnStartRatio:n.getColumnRatio(),rightColumnStartWidth:a.width,rightColumnStartRatio:i.getColumnRatio()}),de().ZH({environment:t}),ue().clear({environment:t}))}({environment:l,columnListStore:s,leftColumnStore:r,rightColumnStore:a}),de().ZH({environment:l}),ue().blurActiveElement())}),[n,l,r,s,a]),p=(0,c.useCallback)((e=>{n&&xo({columnListBlockStore:i,columnListStore:s,leftColumnStore:r,rightColumnStore:a,diffX:e.diffX})}),[n,i,s,r,a]),m=(0,c.useCallback)((e=>{Vt().createAndCommit({userAction:"ColumnDivider.handleDragEnd",environment:l,canUndo:!0,perform:t=>{n&&function(e){const{environment:t,columnListStore:o,transaction:n,leftColumnStore:i,rightColumnStore:r}=e,a=xo(e);if(a){const{leftColumnNewRatio:e,rightColumnNewRatio:s}=a;_o().FH({stores:[i],update:{column_ratio:e},transaction:n}),_o().FH({stores:[r],update:{column_ratio:s},transaction:n}),o.state.dragging&&o.setState({...o.state,temporaryRatios:{}}),Io().wy(t)}}({environment:l,columnListBlockStore:i,columnListStore:s,leftColumnStore:r,rightColumnStore:a,diffX:e.diffX,transaction:t})}}),Co({columnListStore:s})}),[n,i,s,l,r,a]),f=(0,c.useCallback)((()=>{Co({columnListStore:s})}),[s]),v=(0,c.useCallback)((()=>{Vt().createAndCommit({userAction:"ColumnDivider.handleDoubleClick",environment:l,canUndo:!0,perform:e=>{n&&function(e){const{columnListBlockStore:t,transaction:o,environment:n}=e,i=1/t.getContentLength();_o().FH({stores:t.getContentStores(),update:{column_ratio:i},transaction:o}),Io().n2(n)}({environment:l,columnListBlockStore:i,transaction:e})}})}),[n,i,l]);return n?(0,g.jsx)(o(790964).Z,{allowDragWhileTextEditing:!0,onDraggableDragStart:u,onDraggableDragMove:p,onDraggableDragEnd:m,onDraggableDragCancel:f,disableHorizontalEdgeScroll:!0,disableVerticalEdgeScroll:!0,render:e=>(0,g.jsx)(co,{showHandle:!0,mouseStore:t,onDoubleClick:v,...e})}):(0,g.jsx)(co,{mouseStore:t,showHandle:!1})}const Mo=c.memo(To),Po={display:"flex",position:"relative",flexGrow:1};function Ao(e,t){const n=(0,k().O7)(),i=(0,m().PE)(e.store,e.disabled),r=(0,c.useRef)(null),a=(0,d().qz)(void 0,So),s=(0,d().qz)(void 0,h().Z),{store:l}=e,u=(0,d().VK)((()=>(0,oo().zE)(l,n)),[n,l]),p=(0,c.useCallback)((()=>{const e=l.getContentStores()[0];if(e&&e.getType()===vo().Ti.column){const t=e.getContentStores()[0];t&&t.getType()===vo().Ti.text&&(de().eP({environment:n,store:t}),ue().setSelectionAtStart({store:t.getBlockTitleStore()}))}}),[n,l]),f=(0,c.useCallback)((()=>{Vt().createAndCommit({userAction:"ColumnList.handleResizeDoubleClick",environment:n,canUndo:!0,perform:e=>{if(l.canEdit()){const t=!l.getFormat().block_full_width;_o().FH({stores:[l],transaction:e,update:{block_full_width:t}})}}})}),[n,l]),v=(0,d().VK)((()=>{const{limitParents:t}=o(132329).default.state;let n;return e.store.findRecordStoreUIAncestor((o=>{const i=t.get(o);return!!i&&(n=i[e.store.id],!0)})),n}),[e.store]),_=(0,d().VK)((()=>i&&(0,oo().Po)(e.store,n)),[i,n,e.store]);let b=(0,d().VK)((()=>e.store.getContentStores()),[e.store]);const{disabled:y}=e;ho().hj(v)&&(b=ho().tP(b,0,v));let S=(0,d().VK)((()=>b.map(((e,t)=>{let o;return o=a.state.dragging&&a.state.temporaryRatios.hasOwnProperty(e.id)?a.state.temporaryRatios[e.id]:e.getColumnRatio(),o}))),[a,b]);const w=ho().Sm(S);S=S.map((e=>e/w));const I=[];b.forEach(((t,o)=>{const n=0===o,r=o===b.length-1;I.push((0,g.jsx)(mo,{store:t,isFirstItem:n,isLastItem:r,numColumns:b.length,ratio:S[o],disabled:y,columnListStore:e.store},t.id)),r||I.push((0,g.jsx)(Mo,{canDrag:i,columnListBlockStore:e.store,leftColumnBlockStore:t,rightColumnBlockStore:b[o+1],columnListStore:a},`divider${t.id}`))}));const C=(0,d().VK)((()=>{const e=Boolean(l.getFormat().block_full_width),t=e&&s.state.dragging?s.state.temporaryFullWidth:e;return{position:"relative",transition:"padding 0.2s linear",paddingLeft:t?so.width:void 0,paddingRight:t?so.width:void 0}}),[s,l]),x=(0,c.useMemo)((()=>({getNode:()=>r.current})),[]);let T;return T=_?(0,g.jsx)("div",{ref:r,style:C,children:(0,g.jsxs)("div",{style:Po,children:[(0,g.jsx)(qe().ZP,{disabled:!i,blockResizerStore:s,resizeComponent:x,resizerType:qe().IS.Horizontal,resizerAlignment:qe().bZ.Left,preserveScale:!0,resizeHorizontally:!0,resizeVertically:!1,store:e.store,children:(0,g.jsx)("div",{style:Bo("left"),children:(0,g.jsx)(co,{onDoubleClick:f,showHandle:i})})},"divider-left-edge"),I,(0,g.jsx)(qe().ZP,{disabled:!i,resizeComponent:x,resizerType:qe().IS.Horizontal,resizerAlignment:qe().bZ.Right,preserveScale:!0,resizeHorizontally:!0,resizeVertically:!1,store:e.store,blockResizerStore:s,children:(0,g.jsx)("div",{style:Bo("right"),children:(0,g.jsx)(co,{onDoubleClick:f,showHandle:i})})},"divider-right-edge")]})}):(0,g.jsx)("div",{ref:r,style:{display:u?"flex":"block"},children:I}),(0,m().ez)(e.store,t,(0,c.useMemo)((()=>({renderedType:"column_list",getBlockStore:()=>e.store,getNode:()=>r.current,handleCreated:p})),[p,e.store]),(0,g.jsx)(o(85307).J.Provider,{value:!0,children:T}))}const Ro=c.memo(c.forwardRef(Ao),p().Z);function Bo(e){return{display:"flex",position:"absolute",top:0,bottom:0,right:"left"===e?"100%":"auto",left:"right"===e?"100%":"auto"}}function Eo(e,t){const n=c.useRef(null),i=(0,I().yK)((()=>({root:{minHeight:"1.5em",display:"flex",alignItems:"center"},wrapper:{...Fe().ZD},progressBar:{flex:1,margin:"0 8px"}})),[]);return(0,m().ez)(e.store,t,(0,c.useMemo)((()=>({renderedType:"copy_indicator",getNode:()=>n.current,getBlockStore:()=>e.store})),[e.store]),(0,g.jsx)(Z().p,{allowSelectionWithin:!1,style:i.wrapper,ref:n,children:(0,g.jsxs)("div",{style:i.root,children:[(0,g.jsx)(ye().Z,{}),(0,g.jsx)("div",{style:i.progressBar,children:(0,g.jsx)(o(417622).Z,{targetRecordId:e.store.id})})]})}))}const Do=c.memo(c.forwardRef(Eo),p().Z),Uo=(0,f().IU)("deepnote",{viewBox:"0 0 92 92",svg:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("path",{fill:"#fff",d:"M0 0h92v92H0z"}),(0,g.jsx)("path",{fill:"#0265B4",fillRule:"evenodd",d:"M20 73h22.153l12.461-4.673-4.673-18.346-14.365 1.558L20 73z",clipRule:"evenodd"}),(0,g.jsx)("path",{fill:"#002868",fillRule:"evenodd",d:"M42.153 73s7.004-3.695 8.3-10.242c1.296-6.546-5.1-11.22-14.876-11.22 0-.172 8.582-12.114 8.582-12.114l20.84.605-4.622 24.407-8.628 6.74L42.153 73z",clipRule:"evenodd"}),(0,g.jsx)("path",{fill:"#3793EF",fillRule:"evenodd",d:"M20 44.615l17.307-25.614s.424.004 1.385 0c6.784-.03 34.268 1.315 34.268 25.467 0 27.57-30.807 28.53-30.807 28.53s12.865-2.463 12.865-14.687-11.619-13.696-19.095-13.696H20z",clipRule:"evenodd"})]})}),Fo=(0,u().vU)({embedButtonText:{defaultMessage:"Embed Deepnote",id:"deepnoteBlock.embeds.button.label"}});function No(e,t){const o=(0,u().YB)(),n=(0,c.useRef)(null),i=(0,d().qz)(e.blockResizerStore,h().Z);return(0,m().ez)(e.store,t,(0,c.useMemo)((()=>({renderedType:"deepnote",getNode:()=>{const e=n.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,g.jsx)(_().ZP,{...e,blockResizerStore:i,ref:n,store:e.store,iconSvg:Uo,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,g.jsx)(u()._H,{defaultMessage:"Works with Deepnote blocks with public links",id:"deepnoteBlock.embeds.caption"}),embedButtonText:o.formatMessage(Fo.embedButtonText),urlInputPlaceholder:"https://deepnote.com/â€¦",children:(0,g.jsx)(u()._H,{defaultMessage:"Embed Deepnote",id:"deepnoteBlock.placeholder"})}))}const Vo=c.memo(c.forwardRef(No),p().Z);var Lo=()=>o(965903);function Oo(e,t){let{store:n}=e;const i=(0,k().Fy)(),r=(0,k().O7)(),a=(0,c.useRef)(null),s=(0,o(644235).hq)(),l=(0,He().O)(),d=(0,I().yK)((e=>({root:{color:e.darkDividerColor,pointerEvents:"auto",...s?{marginTop:9,marginBottom:8}:{}}})),[s]),u=(0,c.useCallback)((e=>{i.isMobile&&(de().Ys({environment:r,store:n}),o(242619).Qn({environment:r,stores:Lo().default.state.stores,left:e.clientX,top:e.clientY,actionSectionGroupKey:"default",showInput:!0,analyticsFrom:"content_block_menu"}))}),[i.isMobile,r,n]);return(0,m().ez)(n,t,(0,c.useMemo)((()=>({renderedType:"divider",getNode:()=>a.current,getBlockStore:()=>n,handleCreated(){Vt().createAndCommit({userAction:"DividerBlock.handleCreated",environment:r,canUndo:!0,perform:e=>to().Bm({environment:r,targetStore:n,targetParentStore:n.getRecordStoreUIParent(),isAtStartOfLine:!1,isClick:!1,transaction:e})})}})),[r,n]),(0,g.jsx)(o(666414).Z,{className:P().QSt,size:l?15:13,style:d.root,onClick:u,ref:a}))}const Zo=c.memo(c.forwardRef(Oo),p().Z);function jo(e,t){const o=(0,c.useRef)(null),n=(0,k().O7)(),i=(0,pe().A3)()?{source:"https://www.notion.so/product/drawing"}:{};return(0,m().ez)(e.store,t,(0,c.useMemo)((()=>({renderedType:"drawing",getNode:()=>{const e=o.current;return e?e.getNode():null},getBlockStore:()=>e.store,handleCreated(){ue().clear({environment:n}),de().Z5({environment:n,stores:[e.store],phase:Lo().SelectionPhase.Editing})}})),[n,e.store]),(0,g.jsx)(_().ZP,{...e,...i,ref:o,mediaMenuTabs:[],disableMediaMenu:!0,preserveScale:!1,showURLInput:!1}))}const Ko=c.memo(c.forwardRef(jo),p().Z);var zo=()=>o(646574),Ho=()=>o(819026),qo=()=>o(970105),Wo=()=>o(577041),Go=()=>o(667009),$o=()=>o(278469);class Qo extends bo().default{getInitialState(){return{error:!1,loading:!1}}}const Yo=Qo,Jo={flexGrow:1,flexShrink:1,flexBasis:180,overflow:"hidden",textAlign:"left",justifyContent:"center",display:"flex",flexDirection:"column"},Xo={display:"block",width:"100%",height:"100%",objectFit:"cover",objectPosition:"top"},en={position:"absolute",top:0,left:0,right:0,bottom:0},tn={display:"block",position:"relative",width:"100%",paddingBottom:"55%"},on=(0,u().vU)({menuTitle:{defaultMessage:"Embed",id:"googleDriveBlock.mediaMenuActions.embedTab.title"}});function nn(e,t){const{store:n}=e,i=(0,o(538781).Z)(),r=(0,c.useRef)(null),a=(0,k().O7)(),s=(0,m().PE)(e.store,e.disabled),{properties:l,format:p}=(0,d().VK)((()=>({properties:n.getProperties(),format:n.getFormat()})),[n]),f=(0,d().qz)(void 0,Yo),[v,h]=(0,c.useState)(!1),_=(0,c.useCallback)((async e=>{const t=o(546634).id(e);if(!t)return void(await dn(e,n,a));const i=await Ho().Ui({environment:a,store:n,fileId:t});i&&i.auth_error&&(Ho().cR(a,{onSuccess:e=>{yn(t,e,a,n,f)},onFailure:()=>{dn(e,n,a)}}),un("url_embed",a))}),[f,a,n]),b=(0,c.useCallback)((()=>{const{device:e}=a,t=[];return t.push({type:"embed",caption:(0,g.jsx)(u()._H,{defaultMessage:"Works with any file in your Google Drive",id:"googleDriveBlock.embedTab.caption"}),buttonText:(0,g.jsx)(u()._H,{defaultMessage:"Embed Google Drive file",id:"googleDriveBlock.embedTab.embedButton.label"}),onChange:e=>{ce().Z(),_(e)}}),e.isMobile||t.push({type:"drive",title:(0,g.jsx)(u()._H,{defaultMessage:"Browse Google Drive",id:"googleDriveBlock.mediaPicker.googleDriveTab.title"}),onSelect:async e=>{if(ce().Z(),e&&e.token)Sn(e.token,a,n,f),le().uu(a);else{const e=await Ho().qN(a);e&&e.token&&Sn(e.token,a,n,f),un("drive_file_picker",a)}}}),t}),[f,a,_,n]),y=(0,c.useCallback)((()=>{const{device:e}=a;if(s){const t=r.current;if(t&&t instanceof Element){const o=t.getBoundingClientRect();ce().$(a,{originRect:o,originGap:0,isSmallWidth:!1,showArrow:!0,currentTab:e.isMobile?"embed":"drive",tabs:b(),title:R().Z.formatMessage(on.menuTitle),popupWidth:320,maxHeight:420})}}}),[s,a,b]);(0,c.useEffect)((()=>{p&&p.drive_properties&&p.drive_properties.file_id&&p.drive_status&&p.drive_status.last_fetched+5*se().hM<Date.now()&&Ho().WO(a,{id:n.id,spaceId:(0,je().J)(n.pointer.spaceId)})}),[a,p,n.id,n.pointer.spaceId]);const S=(0,c.useCallback)((()=>h(!0)),[h]),w=(0,c.useCallback)((()=>h(!1)),[h]),I=(0,g.jsx)(Z().p,{allowSelectionWithin:!0,ref:r,style:{position:"relative"},children:p&&p.drive_properties&&p.drive_status?(0,g.jsx)(an,{...e,store:n,canEdit:s,captionAriaId:i,fileData:p.drive_properties,driveStore:f,shouldShowActionButton:bn(a,v),handleMouseEnter:S,handleMouseLeave:w}):l&&l.source?(0,g.jsx)(ln,{...e,store:n,handleMouseEnter:S,handleMouseLeave:w}):(0,g.jsx)(sn,{...e,store:n,onClick:y,shouldShowActionButton:bn(a,v),canEdit:s,driveStore:f,handleMouseEnter:S,handleMouseLeave:w})});return(0,m().ez)(n,t,(0,c.useMemo)((()=>({renderedType:"drive",getBlockStore:()=>n,getNode:()=>r.current,handleCreated:y,initializeGoogleDriveBlockFromUrl:_})),[y,_,n]),I)}const rn=c.memo(c.forwardRef(nn),p().Z);function an(e){const{store:t,fileData:o,captionAriaId:n,driveStore:i,canEdit:r,disableCommentMenu:a,hideContent:s,disabled:l,shouldShowActionButton:c,handleMouseEnter:d,handleMouseLeave:u,style:p}=e,f=(0,m().rv)(t),v=(0,I().yK)((e=>({linkBox:{display:"flex",alignItems:"center",border:`1px solid ${e.tableDividerColor}`,borderRadius:4,borderTopLeftRadius:0,borderTopRightRadius:0,flexDirection:"column",width:"100%",...p,...f},title:{fontWeight:T().Ue.medium,...T().Yu,color:e.regularTextColor},uiLabel:{color:e.mediumTextColor,fontSize:12}})),[p,f]);return(0,g.jsxs)("div",{role:"figure","aria-labelledby":n,children:[(0,g.jsxs)("div",{style:{display:"flex"},children:[(0,g.jsxs)(be().Z,{href:o.url,external:!0,style:v.linkBox,onMouseLeave:u,onMouseEnter:d,children:[(0,g.jsx)(_n,{store:t,driveStore:i,fileData:o}),(0,g.jsx)(hn,{fileData:o}),c&&r&&(0,g.jsx)(pn,{store:t})]}),(0,g.jsx)(ve().Z,{disableCommentMenu:a,hideContent:s,store:t})]}),(0,g.jsx)(ge().N,{store:t,captionAriaId:n,disabled:l})]})}function sn(e){const{disabled:t,store:o,canEdit:n,driveStore:i,disableCommentMenu:r,hideContent:a,onClick:s,shouldShowActionButton:l,handleMouseEnter:c,handleMouseLeave:p}=e,m=(0,d().VK)((()=>o.getFormat().drive_status),[o]),f=!(!m||!m.authed),v=(0,d().VK)((()=>i.getState().loading),[i]);return(0,g.jsxs)("div",{onMouseEnter:c,onMouseLeave:p,style:{display:"flex"},children:[(0,g.jsx)(Ie().Z,{iconSvg:$o().c,disabled:t,shouldHideRight:l,right:n&&(0,g.jsx)(fe().Z,{store:o,fadeIn:!1}),onClick:s,isLoading:v,progressPercent:0,children:f?(0,g.jsx)(u()._H,{defaultMessage:"Choose a file to embed from Google Drive",id:"googleDriveBlock.placeholder.authenticated"}):(0,g.jsx)(u()._H,{defaultMessage:"Connect Google Drive to Notion to embed a file",id:"googleDriveBlock.placeholder.notAuthenticated"})}),(0,g.jsx)(ve().Z,{disableCommentMenu:r,hideContent:a,store:o})]})}function ln(e){const{store:t,handleMouseEnter:o,handleMouseLeave:n}=e,i=(0,I().yK)((e=>({container:{overflow:"hidden",borderRadius:6,border:`1px solid ${e.tableDividerColor}`,borderBottom:void 0,position:"relative"}})),[]);return(0,g.jsx)("div",{style:i.container,children:(0,g.jsx)(_().ZP,{...e,store:t,iconSvg:$o().c,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,g.jsx)(u()._H,{defaultMessage:"Works with Google Docs, Google Sheetsâ€¦",id:"googleDriveBlock.legacyLinkInput.caption"}),contentBelowSource:(0,g.jsx)(cn,{...e,handleMouseLeave:n,handleMouseEnter:o}),children:(0,g.jsx)(u()._H,{defaultMessage:"Embed a file from Google Drive",id:"googleDriveBlock.legacy.placeholder"})})})}function cn(e){const{store:t,handleMouseEnter:o,handleMouseLeave:n,style:i}=e,{properties:r,format:a}=(0,d().VK)((()=>({properties:t.getProperties(),format:t.getFormat()})),[t]),s=(0,m().rv)(t),l=(0,I().yK)((e=>({linkBox:{display:"flex",alignItems:"center",border:`1px solid ${e.tableDividerColor}`,borderRadius:4,borderLeft:"none",borderRight:"none",borderTopLeftRadius:0,borderTopRightRadius:0,padding:"8px 12px",...i,...s},title:{fontWeight:T().Ue.medium,...T().Yu,color:e.regularTextColor},uiLabel:{color:e.mediumTextColor,fontSize:12}})),[i,s]),c=re().Jcv(r&&r.source);let u=a.link_title;const p=a.link_provider?`${a.link_provider} Embed`:"Google Drive Embed";c!==u&&u||(u=c.includes("spreadsheets")?"A Google Sheets file":c.includes("document")?"A Google Docs file":c.includes("presentation")?"A Google Slides file":"A Google Drive file");return(0,g.jsxs)(be().Z,{href:c,external:!0,style:{flexGrow:1,minWidth:0},innerStyle:l.linkBox,onMouseMove:o,onMouseLeave:n,children:[(0,g.jsx)("div",{style:{display:"flex",alignSelf:"start",height:32,width:32,marginRight:12,marginLeft:4,marginTop:3,marginBottom:3,position:"relative"},children:(0,g.jsx)(he().Z,{type:"image_url",imageURL:"https://s3-us-west-2.amazonaws.com/public.notion-static.com/8fb58690-ee50-4584-b9fd-ca9b524f56aa/google-drive-icon-19632.png",size:38})}),(0,g.jsxs)("div",{style:Jo,children:[(0,g.jsx)(ke().Z,{style:l.title,children:u}),(0,g.jsx)("div",{style:{display:"flex"},children:(0,g.jsx)(ke().Z,{style:l.uiLabel,isSmall:!0,children:p})})]})]})}async function dn(e,t,o){const n=await(0,Wo().Sk)();Vt().createAndCommit({userAction:"DriveBlock.convertToTextBlock",environment:o,canUndo:!0,perform:i=>{qo().sO({environment:t.environment,store:t.getBlockTitleStore(),value:[re().V3y(e,[re().edl(e)])],transaction:i}),n({environment:o,blocks:[t],blockType:"text",transaction:i})}})}function un(e,t){le().SO(t,{integration_name:"google",from:e})}function pn(e){let{store:t}=e;const o=(0,k().O7)();return(0,g.jsx)(fe().Z,{store:t,style:{position:"absolute",top:4,right:4,background:(0,_().M1)(o)},iconStyle:{fill:x().ZP.white},fadeIn:!0})}function mn(e){return{...tn,paddingBottom:"20%",minHeight:80,background:e.embedPlaceholderBackground}}function fn(e){return{width:"100%",minHeight:60,padding:14,paddingTop:12,overflow:"hidden",borderTop:`1px solid ${e.darkDividerColor}`}}function gn(e){return{fontSize:12,lineHeight:1.3,color:e.mediumTextColor,maxHeight:32,overflow:"hidden"}}function vn(e){let{fileData:t}=e;const o=(0,I().Fg)(),n=t.user_name||t.modified_time?(0,g.jsx)(u()._H,{defaultMessage:"Last modified {hasUserName, select, true {by {userName}} other {}} {hasLastModifiedTime, select, true {{lastModifiedTime}} other {}}",id:"googleDriveBlock.pageDescription",values:{hasUserName:Boolean(t.user_name),userName:t.user_name,hasLastModifiedTime:Boolean(t.modified_time),lastModifiedTime:t.modified_time&&(0,zo().tv)(t.modified_time,w().locale)}}):void 0;return(0,g.jsxs)("div",{style:gn(o),children:[t.trashed&&(0,g.jsx)(u()._H,{defaultMessage:"This file is in trash.",id:"googleDriveBlock.pageDeleted.caption"}),n]})}function hn(e){let{fileData:t}=e;const o=(0,I().Fg)(),n=t.title,i=t.url,r=ae().Qc(i).hostname;return(0,g.jsxs)("div",{style:fn(o),children:[n&&(0,g.jsx)(ke().Z,{style:{marginBottom:2},children:n}),(0,g.jsx)(vn,{fileData:t}),(0,g.jsxs)("div",{style:{display:"flex",alignItems:"center",marginTop:6},children:[t.icon&&(0,g.jsx)("div",{style:(a=t.icon,{flexShrink:0,backgroundImage:`url(${a})`,backgroundSize:"cover",width:16,height:16,marginRight:6})}),(0,g.jsx)(ke().Z,{style:{color:o.regularTextColor},isSmall:!0,children:r})]})]});var a}function _n(e){let{fileData:t,store:o,driveStore:n}=e;const i=(0,I().Fg)(),r=(0,d().qz)(n,Yo),a=t.thumbnail,s=(0,d().VK)((()=>r.state.error),[r]);return a&&!s?(0,g.jsx)("div",{style:tn,children:(0,g.jsx)("div",{style:en,children:(0,g.jsx)(we().Z,{url:a,width:1e3,isAuthenticated:!0,permissionRecord:o.pointer,render:(e,o)=>{if(o){const e=ae().SK(o,{v:t.version});return(0,g.jsx)("img",{src:e,style:Xo,onError:e=>{r.setState({error:!0,loading:!1})}})}e&&r.setState({error:!0,loading:!1})}})})}):(0,g.jsx)("div",{style:mn(i)})}function bn(e,t){const{device:o}=e;return o.isMobile||t}async function yn(e,t,o,n,i){i.setState({loading:!0,error:!1});const r=await Ho().Ui({environment:o,store:n,fileId:e,token:t});i.setState({loading:!1,error:!r||!!r.auth_error})}function Sn(e,t,o,n){Go().v({environment:t,accessToken:e.accessToken,callback:i=>{yn(i,e,t,o,n)}})}const wn=(0,f().IU)("tex",{viewBox:"0 0 32 21",svg:(0,g.jsxs)("g",{children:[" ",(0,g.jsxs)("g",{id:"d7fc5246-3c04-467c-8f25-6c129c5642ac","data-name":"tex",children:[" ",(0,g.jsxs)("g",{id:"ec363c67-067d-4da0-8c27-f8d029e068bd","data-name":"E",children:[" ",(0,g.jsx)("path",{id:"e1948427-1829-4c96-a9f4-14a99a3d5b97","data-name":"path0 fill",d:"M497.33,497.82c-1.2,0-2.11-.06-3-0.06a0.5,0.5,0,0,0-.55.27c0,0.15.17,0.23,0.57,0.32a1.08,1.08,0,0,1,1.06,1.23c0,0.55,0,1,0,3.32s-0.08,4.43-.13,5.21c-0.08,1-.42,1.2-1.39,1.41a0.59,0.59,0,0,0-.53.32c0,0.21.23,0.25,0.59,0.25,0.7,0,1.08-.09,2.13-0.09,2.76,0,6,.13,6.21.13a0.7,0.7,0,0,0,.36-0.21,14.63,14.63,0,0,0,.68-2.07c0-.21,0-0.53-0.15-0.53a0.78,0.78,0,0,0-.48.55,2.41,2.41,0,0,1-1.54,1.41,9,9,0,0,1-1.8.15,10.57,10.57,0,0,1-1.69-.13,0.74,0.74,0,0,1-.38-0.44,7,7,0,0,1-.15-1.56c0-.78,0-2.49.06-2.93a0.26,0.26,0,0,1,.17-0.17c0.53,0,1.29,0,1.9,0,1.06,0.06,1.18.13,1.44,1a0.52,0.52,0,0,0,.32.4c0.15,0,.23-0.19.23-0.53s-0.06-.68-0.06-1.2,0-.84.06-1.35c0-.17,0-0.46-0.17-0.46a0.54,0.54,0,0,0-.36.42c-0.34.87-.38,0.93-2.09,0.93h-1.27a0.18,0.18,0,0,1-.17-0.17c0-.44,0-3.84.08-4.29a0.5,0.5,0,0,1,.27-0.55,21.09,21.09,0,0,1,2.7.1,1.4,1.4,0,0,1,1.25,1.31,0.54,0.54,0,0,0,.3.47,0.46,0.46,0,0,0,.3-0.51c0-.38,0-1.08,0-1.84a0.28,0.28,0,0,0-.17-0.23,14.12,14.12,0,0,1-1.75.08h-2.81Z",transform:"translate(-484.44 -490.06)"})," "]})," ",(0,g.jsxs)("g",{id:"8dfbf0a9-85f0-49da-99d8-6229354b9534","data-name":"T",children:[" ",(0,g.jsx)("path",{id:"8602b8e9-f5d6-42d3-88c6-0649b350ce04","data-name":"path1 fill",d:"M490.48,490.82c-2.18,0-3.91-.06-4.39-0.11a1.32,1.32,0,0,1-.68-0.34,0.85,0.85,0,0,0-.3-0.3,0.39,0.39,0,0,0-.28.32,19.85,19.85,0,0,1-.38,2.55,0.4,0.4,0,0,0,.23.42c0.08,0,.19,0,0.38-0.42a5.64,5.64,0,0,1,.61-1,1.72,1.72,0,0,1,1.35-.44c0.32,0,1.94,0,2.3.09a0.26,0.26,0,0,1,.17.25v2.26c0,1.46-.09,5.3-0.13,6.44-0.06,1.41-.11,1.71-1.41,2a0.47,0.47,0,0,0-.38.34c0,0.11.19,0.23,0.57,0.23s1.33-.13,2.22-0.13,2.13,0.1,2.28.1,0.53,0,.53-0.25a0.65,0.65,0,0,0-.49-0.34c-1.22-.25-1.31-0.53-1.39-1.33s-0.1-2.6-.1-4.81c0-1.63,0-3.61,0-4.5a0.35,0.35,0,0,1,.15-0.25c0.29-.06,2.26-0.06,2.6,0,1.12,0.06,1.37.15,1.5,1.16,0.06,0.48.15,0.61,0.28,0.61a0.43,0.43,0,0,0,.32-0.38,11.69,11.69,0,0,1,.42-2.2c0.1-.27,0-0.44-0.09-0.44a0.72,0.72,0,0,0-.28.13,2.49,2.49,0,0,1-1.33.32C494,490.8,491.49,490.82,490.48,490.82Z",transform:"translate(-484.44 -490.06)"})," "]})," ",(0,g.jsxs)("g",{id:"88168da7-a35d-4a6e-af2a-2bab78b9d062","data-name":"X",children:[" ",(0,g.jsx)("path",{id:"f33958e3-fb20-476c-b2a8-674ffe821a96","data-name":"path2 fill",d:"M504,491a0.52,0.52,0,0,0,.51.36,3,3,0,0,1,1.84,1.14,53.54,53.54,0,0,1,3,4.73,0.22,0.22,0,0,1-.06.27c-1.14,1.58-2.22,2.87-3,3.72a4.47,4.47,0,0,1-2.22,1.27c-0.51.1-.7,0.27-0.7,0.44s0.15,0.21.51,0.21,1.2-.1,2-0.1c0.61,0,1.48.06,2,.06,0.25,0,.46-0.08.46-0.27a0.53,0.53,0,0,0-.46-0.32c-0.74-.27-1-0.47-0.17-1.82,0.53-.78,1.44-2,2.05-2.72a0.15,0.15,0,0,1,.19,0c0.23,0.21,2.09,3.17,2.53,4a0.26,0.26,0,0,1-.08.34,3.18,3.18,0,0,1-.68.23c-0.32.11-.42,0.19-0.42,0.34s0.11,0.25.47,0.25,1-.08,1.58-0.08c1.12,0,2.17.11,2.79,0.11,0.42,0,.57-0.09.57-0.25a0.49,0.49,0,0,0-.44-0.36,3.37,3.37,0,0,1-2.34-1.73c-0.49-.67-2.7-4-2.83-4.31a0.45,0.45,0,0,1,0-.23c0.91-1.27,2.17-2.7,2.85-3.52a3.79,3.79,0,0,1,2.38-1.41,0.5,0.5,0,0,0,.44-0.34,0.44,0.44,0,0,0-.46-0.21c-0.44,0-1.56.06-2,.06s-1.12,0-1.69,0c-0.36,0-.53.1-0.53,0.25a0.49,0.49,0,0,0,.48.34c0.67,0.13,1,.34.72,0.89a32.86,32.86,0,0,1-2.53,3.44,0.14,0.14,0,0,1-.19,0,33.44,33.44,0,0,1-2.3-3.63c-0.21-.38,0-0.59.34-0.68s0.46-.21.46-0.36a0.43,0.43,0,0,0-.47-0.21c-0.55,0-.91,0-1.63,0s-2-.1-2.39-0.1S504,490.84,504,491Z",transform:"translate(-484.44 -490.06)"})," "]})," "]})," "]})});function kn(e,t){const n=(0,k().Fy)(),r=(0,I().Fg)(),a=(0,k().O7)(),{store:s}=e,l=(0,m().PE)(s,e.disabled),p=(0,m().rv)(s),f=(0,c.useRef)(null),[v,h]=(0,c.useState)(!1),[_,b]=(0,c.useState)(!1),[y,S]=(0,c.useState)(!1),w=(0,d().VK)((()=>{const e=s.getBlockTitleStore().getValue();return re().Jcv(e)}),[s]),C=Boolean(w),T=(0,c.useCallback)((()=>{h(!0)}),[]),M=(0,c.useCallback)((()=>{h(!1)}),[]),P=(0,c.useCallback)((()=>{b(!0)}),[]),A=(0,c.useCallback)((()=>{b(!1)}),[]),R=(0,c.useCallback)((()=>{S(!0)}),[]),B=(0,c.useCallback)((()=>{S(!1),de().Ys({environment:a,store:s})}),[a,s]),E=(0,c.useCallback)((()=>{Io().Py(a,{equation:w})}),[a,w]),D=(0,c.useCallback)((e=>{Vt().createAndCommit({userAction:"EquationBlock.handleChange",environment:a,canUndo:!0,perform:t=>{qo().sO({environment:a,store:s.getBlockTitleStore(),value:re().TPx(e),transaction:t})}})}),[a,s]),U=(0,c.useCallback)((()=>{y?B():R()}),[B,R,y]),F=(0,d().VK)((()=>o(482269).by({environment:a,equation:w,displayMode:"block"})),[a,w]),N=(0,I().yK)((e=>{const t=n.isMobile||_||v;return{container:{display:"flex",padding:"4px 8px",width:"100%",flexDirection:C?"column":void 0,overflow:C?"auto":void 0,color:C?void 0:x().ZP.contentPlaceholder,...p},error:{background:e.equationErrorPlaceholderBackground},actionMenuButton:{position:"absolute",top:4,right:4,color:e.mediumTextColor,opacity:t?1:0},button:{position:"relative",width:"100%",borderRadius:4,background:C?void 0:e.surface.wash}}}),[p,n.isMobile,v,_,C]),V=y?{isOpen:!0,equationValue:w,error:F}:{isOpen:!1,equationValue:void 0,error:void 0},L=!l,O=(0,g.jsxs)(Z().p,{ref:f,allowSelectionWithin:!0,style:{display:"flex",position:"relative"},children:[(0,g.jsx)(i().ev,{dependency:o(315605).o,children:e=>(0,g.jsx)(o(890631).Z,{...V,Prism:e,displayMode:"block",disabled:L,origin:(0,g.jsxs)(K().Z,{onMouseMove:P,onMouseLeave:A,onClick:R,style:N.button,children:[w?(0,g.jsx)(o(83230).Z,{theme:r,display:"block",equation:w,style:N.container,errorStyle:{...N.container,...N.error}}):(0,g.jsx)(o(856695).ZP,{iconSvg:wn,iconStyle:{width:28,height:28,marginRight:8},style:{background:void 0},children:(0,g.jsx)(u()._H,{defaultMessage:"Add a TeX equation",id:"equationBlock.empty.placeholder"})},"button"),l&&(0,g.jsx)(fe().Z,{onFocus:T,onBlur:M,store:s,tooltipContent:(0,g.jsx)(u()._H,{defaultMessage:"Rename, delete, and moreâ€¦",id:"equationBlock.actions.tooltip"}),style:N.actionMenuButton,fadeIn:!1})]}),onDismiss:B,onChange:D,onSubmit:E})}),(0,g.jsx)(ve().Z,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store,hideIfSidebarOrMarginCommentsVisible:!0})]});return(0,m().ez)(e.store,t,(0,c.useMemo)((()=>({renderedType:"equation",getBlockStore:()=>e.store,getNode:()=>f.current,handleCreated:R,edit:R,activate:U})),[U,R,e.store]),O)}const In=c.memo(c.forwardRef(kn),p().Z),Cn=(0,f().IU)("excalidraw",{viewBox:"0 0 32 32",svg:(0,g.jsxs)("g",{children:[(0,g.jsx)("path",{d:"m14.2933 1.41174c-.8308.66246-2.1108 1.78526-3.1214 2.75088l-.7972.75228.146.98807c.0786.53895.2246 1.59439.3144 2.33544.101.74105.2021 1.43719.2358 1.53825.0449.13473 0 .2021-.1235.2021-.2134 0-.2246-.05614.3593 1.79654.2133.7073.4154 1.3586.4379 1.4259.0224.0786.1122.1123.2133.0786.1011-.0449.1572-.1347.1235-.2133-.0337-.0898.0225-.1797.1123-.2133.1235-.045.1123-.1348-.0786-.4604-.3032-.5053-1.0779-4.81685-1.1228-6.20913-.0337-.98807-.0337-.9993.3817-1.5607.4043-.55018 1.3362-1.38105 2.7734-2.43649.4042-.30316.8084-.64.9207-.75228.1684-.20211.247-.14597 1.6617 1.35859.8197.86456 1.7292 1.75158 2.0211 1.97614l.5389.40422-.4154.87579c-.2246.47157-1.134 2.29052-2.0323 4.01966-1.8751 3.6379-1.4933 3.2898-3.6716 3.3235l-1.4147.0112-.4716.539c-.494.5726-.5614.7859-.3256 1.1452.0898.1235.1572.3257.1572.4492 0 .2021.0786.2358.5277.2582.2807.0112.539.0449.5726.0786.0337.0337.0786.7298.1123 1.5495l.0449 1.4821-.7522 1.6168c-1.2464 2.6948-1.74039 3.9299-1.74039 4.3341 0 .2133.04491.3929.08982.3929.11227 0 .11227-.0112 4.68207-9.5438 2.1221-4.4239 4.132-8.5895 4.4688-9.27441.3369-.68491.64-1.31369.6625-1.40351.0224-.10105-.7523-.87579-1.9874-1.96491-1.1116-.98807-2.0884-1.88632-2.1782-1.98737-.2583-.314389-.64-.213336-1.325.33684zm.3818 12.91226c-.5165.9993-.539 1.0106-1.9537 1.0779-1.2463.0674-1.2688.0562-1.2688-.1796 0-.1348-.0449-.3144-.101-.4042-.0674-.1011-.0225-.2807.1347-.5278l.247-.3817h1.1228c.6176-.0112 1.325-.0562 1.572-.1011s.4603-.0673.4828-.0561c.0224.0112-.0898.2695-.2358.5726zm-.9432 1.7965c-.0898.2358-.3256.7298-.5165 1.1004-.3143.6287-.348.6512-.4266.393-.0449-.1572-.0786-.6176-.0898-1.033-.0113-.8197-.0337-.8084.9094-.8646l.3032-.0112z"}),(0,g.jsx)("path",{d:"m14.6302 4.08401c-.2021.14597-.2583.29193-.2583.66246 0 .43789.0337.50526.3369.62877s.3817.11228.7298-.12351c.4604-.31439.4716-.39298.1348-.89824-.292-.4379-.5839-.51649-.9432-.26948zm.64.40421c.1796.31439.0674.55018-.2695.55018-.3031 0-.4379-.30316-.2695-.60632.1348-.24701.393-.22456.539.05614z"}),(0,g.jsx)("path",{d:"m21.6702 6.61034c0 .05614-.0674.11228-.146.11228-.0674 0-.2582.31439-.4042.69614-.4491 1.16772-4.9404 10.04914-4.9516 9.76844 0-.146-.0673-.247-.1796-.247-.1572 0-.1797.0898-.1123.5277.0674.5053.0224.6175-1.5719 3.7165-.8983 1.7628-1.8639 3.6042-2.1446 4.0982-.2919.5165-.5165 1.0779-.5389 1.3137-.0337.4042.0112.4604.988 1.3025.5614.494 1.28 1.1115 1.5944 1.3922 1.4147 1.2913 2.0772 1.8078 2.2569 1.7741.2694-.0449 4.435-4.4127 4.4463-4.6597 0-.1122-.2021-1.8189-.4492-3.7951-.4266-3.3684-.8308-7.3094-.7859-7.6912.0337-.2358-.1348-1.4259-.2583-1.9424-.101-.4043-.0561-.5727.7523-2.4141.4716-1.0891 1.0891-2.42524 1.3586-2.96419.2583-.53894.4828-1.01052.4828-1.04421 0-.03368-.0786-.05614-.1684-.05614s-.1684.04492-.1684.11228zm-2.5825 8.38736c.1235.786.3705 2.6723.5502 4.1881.3481 2.7845.7523 5.8723.8646 6.6582.0673.393.0224.4716-.7074 1.28-1.2688 1.426-2.6162 2.8295-3.0765 3.1888l-.4267.3368-2.1894-2.0435c-2.0211-1.8638-2.1895-2.0547-2.066-2.2793.0674-.1235.64-1.1677 1.2688-2.3129.6287-1.1453 1.4596-2.6723 1.8414-3.3909.3929-.7299.7522-1.3586.8196-1.3923.0786-.0449.1011 1.0891.0786 3.5032-.0449 3.6042-.0337 3.6154.3256 3.5368.0449 0 .0786-1.819.0786-4.0309v-4.0196l1.179-2.3579c.6512-1.3025 1.1901-2.3467 1.2126-2.3355.0225.0113.1347.6737.247 1.4709z"})]})}),xn=(0,u().vU)({embedButtonText:{defaultMessage:"Embed Excalidraw",id:"excalidrawBlock.embeds.button.label"}});function Tn(e,t){const o=(0,u().YB)(),n=(0,c.useRef)(null),i=(0,d().qz)(e.blockResizerStore,h().Z);return(0,m().ez)(e.store,t,(0,c.useMemo)((()=>({renderedType:"excalidraw",getNode:()=>{const e=n.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,g.jsx)(_().ZP,{...e,blockResizerStore:i,ref:n,store:e.store,iconSvg:Cn,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,g.jsx)(u()._H,{defaultMessage:"Works with Excalidraw whiteboards.",id:"excalidrawBlock.embeds.caption"}),embedButtonText:o.formatMessage(xn.embedButtonText),urlInputPlaceholder:"https://excalidraw.com/â€¦",children:(0,g.jsx)(u()._H,{defaultMessage:"Embed Excalidraw",id:"excalidrawBlock.placeholder"})}))}const Mn=c.memo(c.forwardRef(Tn),p().Z);var Pn=()=>o(311598),An=()=>o(453999),Rn=()=>o(998901);const Bn=(0,u().vU)({tombstoneLabelNoPermission:{id:"factoryBlock.tombstoneLabelNoPermission",defaultMessage:"Template buttons are no longer supported"},tombstoneLabel:{id:"factoryBlock.tombstoneLabel",defaultMessage:"Template buttons are no longer supported. Click to turn into a button block."},titlePlaceholder:{id:"factoryBlock.titlePlaceholder",defaultMessage:"New button"}});function En(e,t){const{store:n,disabled:i}=e,r=(0,k().O7)(),a=(0,c.useRef)(null),s=(0,o(998411).r)(),l=(0,u().YB)(),p=(0,d().VK)((()=>{var e;return null===(e=n.getModel())||void 0===e?void 0:e.getRenderTitle({getRecordModel:n.getRecordModel,userTimeZone:s,intl:l})}),[l,n,s]),f=(0,d().VK)((()=>i||!n.canEdit()),[n,i]),v=(0,c.useCallback)((async()=>{const e=await Promise.resolve().then(o.bind(o,540413));Vt().createAndCommit({userAction:"FactoryBlock.handleClickUpgrade",environment:r,canUndo:!0,perform:t=>{var o;const i=e.duplicateBlocks({environment:r,blocks:[n],transaction:t,preferDuplicateLocation:"local"});An().Cl({environment:r,blocks:[n],transaction:t}),Io().nX(r,{factory_block_id:n.id,button_block_id:null===(o=i[0])||void 0===o?void 0:o.id})}})}),[r,n]),h=(0,I().yK)((e=>({iconStyle:{fill:e.errorText},buttonStyle:{overflowX:"auto",...f?{cursor:"not-allowed"}:{},...T().Yu,fontWeight:500,margin:"2px 0"}})),[f]),_=(0,g.jsx)(o(654133).Z,{placement:Rn().Placement.Bottom,renderTooltip:()=>(0,g.jsx)(u()._H,{...f?Bn.tombstoneLabelNoPermission:Bn.tombstoneLabel}),render:e=>(0,g.jsx)(H().Z,{disabled:f,disabledFeedback:!0,style:h.buttonStyle,ref:a,icon:o(735501).t,iconStyle:h.iconStyle,onClick:v,...e,children:p??(0,g.jsx)(u()._H,{...Bn.titlePlaceholder})})});return(0,m().ez)(e.store,t,(0,c.useMemo)((()=>({renderedType:"factory",getBlockStore:()=>e.store,getNode:()=>{var e;return(null===(e=a.current)||void 0===e?void 0:e.parentElement)??null}})),[e.store]),_)}const Dn=c.memo(c.forwardRef(En),p().Z),Un=(0,f().IU)("figma",{viewBox:"0 0 36 55",svg:(0,g.jsx)("path",{d:"M19.5,27.5 C19.5,23.08142 23.08142,19.5 27.5,19.5 C31.9186,19.5 35.5,23.08142 35.5,27.5 C35.5,31.9186 31.9186,35.5 27.5,35.5 C23.08142,35.5 19.5,31.9186 19.5,27.5 Z M0.5,46.5 C0.5,42.08142 4.08142,38.5 8.5,38.5 L16.5,38.5 L16.5,46.5 C16.5,50.9186 12.9186,54.5 8.5,54.5 C4.08142,54.5 0.5,50.9186 0.5,46.5 Z M19.5,16.5 L19.5,0.5 L27.5,0.5 C31.9186,0.5 35.5,4.08142 35.5,8.5 C35.5,12.9186 31.9186,16.5 27.5,16.5 L19.5,16.5 Z M8.5,16.5 C4.08142,16.5 0.5,12.9186 0.5,8.5 C0.5,4.08142 4.08142,0.5 8.5,0.5 L16.5,0.5 L16.5,16.5 L8.5,16.5 Z M8.5,35.5 C4.08142,35.5 0.5,31.9186 0.5,27.5 C0.5,23.08142 4.08142,19.5 8.5,19.5 L16.5,19.5 L16.5,35.5 L8.5,35.5 Z"})});function Fn(e,t){const o=(0,c.useRef)(null),n=(0,d().qz)(e.blockResizerStore,h().Z);return(0,m().ez)(e.store,t,(0,c.useMemo)((()=>({renderedType:"figma",getNode:()=>{const e=o.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,g.jsx)(_().ZP,{...e,ref:o,blockResizerStore:n,store:e.store,iconSvg:Un,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,g.jsx)(u()._H,{defaultMessage:"Works with any public Figma shareable link",id:"figmaBlock.caption"}),children:(0,g.jsx)(u()._H,{defaultMessage:"Embed Figma",id:"figmaBlock.placeholder"})}))}const Nn=c.memo(c.forwardRef(Fn),p().Z);var Vn=()=>o(125519);const Ln=(0,f().IU)("framer",{viewBox:"0 0 32 32",svg:(0,g.jsx)("g",{children:(0,g.jsx)("path",{d:"m9 6h14v7h-7zm0 7h7l7 7h-14zm0 7h7v7z"})})}),On=(0,u().vU)({embedButtonText:{defaultMessage:"Embed Framer",id:"framerBlock.embedFramer.button.label"}});function Zn(e,t){const o=(0,u().YB)(),n=(0,c.useRef)(null),i=(0,d().qz)(e.blockResizerStore,h().Z);return(0,m().ez)(e.store,t,(0,c.useMemo)((()=>({renderedType:"framer",getNode:()=>{const e=n.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,g.jsx)(_().ZP,{...e,blockResizerStore:i,ref:n,store:e.store,iconSvg:Ln,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,g.jsx)(u()._H,{defaultMessage:"Works with Framer prototypes",id:"framerBlock.linkInput.caption"}),embedButtonText:o.formatMessage(On.embedButtonText),urlInputPlaceholder:"https://framer.com/â€¦",children:(0,g.jsx)(u()._H,{defaultMessage:"Embed a Framer prototype",id:"framerBlock.placeholder"})}))}const jn=c.memo(c.forwardRef(Zn),p().Z);const Kn=(0,u().vU)({embedButtonText:{defaultMessage:"Embed Gist",id:"gistBlock.embedButton.label"}});function zn(e,t){const n=(0,u().YB)(),i=(0,c.useRef)(null),r=(0,d().qz)(e.blockResizerStore,h().Z);return(0,m().ez)(e.store,t,(0,c.useMemo)((()=>({renderedType:"gist",getNode:()=>{const e=i.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,g.jsx)(_().ZP,{...e,blockResizerStore:r,ref:i,store:e.store,iconSvg:o(77751).f,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,g.jsx)(u()._H,{defaultMessage:"Works with links to Gists on GitHub",id:"gistBlock.linkInput.caption"}),embedButtonText:n.formatMessage(Kn.embedButtonText),urlInputPlaceholder:"https://gist.github.com/â€¦",children:(0,g.jsx)(u()._H,{defaultMessage:"Embed a Gist",id:"gistBlock.placeholder"})}))}const Hn=c.memo(c.forwardRef(zn),p().Z);var qn=()=>o(616268);const Wn=(0,f().IU)("hex",{viewBox:"0 0 92 92",svg:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("path",{fill:"#fff",d:"M0 0h92v92H0z"}),(0,g.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.8 34v8.368h-2.4V34H15v24h8.4V46h2.4v12h8.4V34h-8.4Zm10.7995 24h19.2v-9.6h-8.4v6h-2.4V46h10.8V34h-19.2v24Zm8.4-15.6v-4.8h2.4v4.8h-2.4Zm24.0007 0V34h8.4v6l-3.6 4.2 3.6 4.2V58h-8.4V45.968h-2.4V58h-8.4v-9.6l3.6-4.2-3.6-4.2v-6h8.4v8.4h2.4Z",fill:"#473982"})]})}),Gn=(0,u().vU)({embedButtonText:{defaultMessage:"Embed Hex",id:"hexBlock.embeds.button.label"}});function $n(e,t){const o=(0,u().YB)(),n=(0,c.useRef)(null),i=(0,d().qz)(e.blockResizerStore,h().Z);return(0,m().ez)(e.store,t,(0,c.useMemo)((()=>({renderedType:"hex",getNode:()=>{const e=n.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,g.jsx)(_().ZP,{...e,blockResizerStore:i,ref:n,store:e.store,iconSvg:Wn,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,g.jsx)(u()._H,{defaultMessage:"Works with Hex cell links with public access.",id:"hexBlock.embeds.caption"}),embedButtonText:o.formatMessage(Gn.embedButtonText),urlInputPlaceholder:"https://hex.tech/â€¦",children:(0,g.jsx)(u()._H,{defaultMessage:"Embed Hex",id:"hexBlock.placeholder"})}))}const Qn=c.memo(c.forwardRef($n),p().Z);var Yn=()=>o(544607),Jn=()=>o(102182),Xn=()=>o(433989),ei=()=>o(718959),ti=()=>o(733193);const oi=(0,f().IU)("picture",{viewBox:"0 0 30 30",svg:(0,g.jsx)("path",{d:"M1,4v22h28V4H1z M27,24H3V6h24V24z M18,10l-5,6l-2-2l-6,8h20L18,10z M11.216,17.045l1.918,1.918l4.576-5.491L21.518,20H9 L11.216,17.045z M7,12c1.104,0,2-0.896,2-2S8.104,8,7,8s-2,0.896-2,2S5.896,12,7,12z"})});const ni=(0,u().vU)({urlPlaceholder:{defaultMessage:"Paste the image linkâ€¦",id:"imageBlock.linkInput.placeholder"},embedButtonText:{defaultMessage:"Embed image",id:"imageBlock.embedImage.button.label"}});function ii(e,t){const n=(0,u().YB)(),i=(0,k().O7)(),r=(0,c.useRef)(null),a=(0,d().qz)(e.blockResizerStore,h().Z),s=(0,m().PE)(e.store,e.disabled),l=(0,d().VK)((()=>{const e=[{type:"file",imageUpload:!0},{type:"embed"},{type:"unsplash"}];return o(749826).default.checkGate({gateName:"enable_giphy_feature_gate"})&&e.push({type:"giphy"}),e}),[]);return(0,m().ez)(e.store,t,(0,c.useMemo)((()=>({renderedType:"image",getNode:()=>r.current,getBlockStore:()=>e.store})),[e.store]),(0,g.jsx)("div",{ref:r,children:(0,g.jsx)(Xn().Q,{type:ti().LR,dropTargetKey:`image-block-${e.store.id}`,onDropFile:s?t=>{if("invalidFileDrop"===t.type)return void Jn().oV({label:(0,g.jsx)(u()._H,{id:"imageBlock.invalidImageDrop.wrongTypeErrorMessage",defaultMessage:"Sorry, that file type is not supported."})});const o=ei().qQ(i);Yn().cT({environment:i,store:e.store,file:t.file,pageWidth:o,preferredType:e.store.getType()})}:ho().ZT,children:(0,g.jsx)(_().ZP,{...e,blockResizerStore:a,store:e.store,urlInputPlaceholder:n.formatMessage(ni.urlPlaceholder),iconSvg:oi,preserveScale:!0,mediaMenuCurrentTab:"file",mediaMenuTabs:l,mediaMenuEmbedCaption:(0,g.jsx)(u()._H,{defaultMessage:"Works with any image from the web",id:"imageBlock.linkInput.caption"}),embedButtonText:n.formatMessage(ni.embedButtonText),popupWidth:540,maxHeight:420,children:(0,g.jsx)(u()._H,{defaultMessage:"Add an image",id:"imageBlock.placeholder"})})})}))}const ri=c.memo(c.forwardRef(ii),p().Z),ai=(0,f().IU)("invision",{viewBox:"0 0 215 182",svg:(0,g.jsxs)("g",{stroke:"none",strokeWidth:"1",children:[" ",(0,g.jsxs)("g",{transform:"translate(0.000000, -222.000000)",children:[" ",(0,g.jsxs)("g",{children:[" ",(0,g.jsx)("path",{d:"M98.9196618,401.249534 L67.23738,401.249534 C69.0283748,394.069758 70.787323,387.019973 72.4415558,380.387695 C68.8636285,384.425558 65.4170469,389.032134 61.2582199,392.866884 C50.6503674,402.647395 38.1012175,405.941417 24.0797327,402.23079 C13.9819165,399.55829 7.92421985,391.917675 6.61663119,381.562133 C5.46837247,372.464529 7.41824578,363.782628 9.57890401,355.080416 C13.7219334,338.391847 17.8017725,321.687933 21.9028255,304.989434 C22.0454551,304.409889 22.1339216,303.817254 22.2995706,302.96283 L-0.0003,302.96283 C2.30975824,294.403698 4.53721769,286.151943 6.78995327,277.806756 L60.5229552,277.806756 C60.3491817,278.642223 60.2273147,279.357627 60.0512844,280.059943 C53.0231647,308.023022 45.9535198,335.97572 39.0057421,363.95911 C38.1427426,367.435481 37.6331576,371.059899 37.479244,374.638277 C37.2535643,379.877659 40.2013936,382.783512 45.4935844,382.824134 C53.5440336,382.885068 60.4588621,379.769784 66.3955944,374.554776 C72.743064,368.979131 77.1564578,362.201967 79.1663619,353.808936 C83.0828089,337.452117 87.2971531,321.167064 91.379249,304.850416 C91.5232327,304.276286 91.5715282,303.678686 91.6933952,302.909569 L69.2513464,302.909569 C69.6155936,301.479211 69.9089773,300.269116 70.2316994,299.067145 C71.9843286,292.540938 73.758623,286.020597 75.4882328,279.488522 C75.7789084,278.389461 76.0555918,277.645621 77.5008451,277.651037 C92.8448135,277.709714 108.18833,277.692562 123.531847,277.702492 C123.75166,277.702492 123.97102,277.781931 124.411096,277.867238 C122.458966,286.803255 120.511801,295.717606 118.565087,304.631958 C118.656261,304.671226 118.747887,304.710043 118.838611,304.749311 C120.277996,302.605804 121.639297,300.404524 123.17076,298.328721 C129.752485,289.408051 137.659853,281.997178 148.043831,277.728671 C168.022811,269.515732 188.005402,280.685076 192.142563,302.283534 C193.975534,311.851454 193.064691,321.305631 190.553778,330.628914 C187.175803,343.16994 183.622249,355.664024 180.318748,368.224458 C179.661569,370.722733 179.467484,373.448493 179.624106,376.035235 C179.988804,382.073072 185.463796,384.737899 190.442292,381.268749 C192.360119,379.932273 194.120421,378.060937 195.308399,376.052387 C197.438816,372.450086 199.08989,368.563429 200.922861,364.787355 C201.278532,364.054347 201.552056,363.281168 201.937066,362.346854 C206.06836,363.936993 210.106223,365.491476 214.381049,367.137584 C210.178891,380.337594 205.268551,393.058261 192.248181,399.864312 C181.021966,405.732889 169.389528,405.395272 158.535233,398.5987 C151.013326,393.889214 148.484358,386.186312 148.027131,377.697592 C147.620005,370.133709 149.656088,362.968376 151.693976,355.800786 C154.30148,346.629159 157.031754,337.485517 159.315182,328.232646 C160.272516,324.353211 160.657977,320.20973 160.534756,316.210233 C160.26394,307.425422 153.949871,301.479211 145.147908,301.094201 C135.701404,300.681207 128.636273,304.704626 123.601357,312.562796 C119.514296,318.940958 117.721496,326.162711 115.917863,333.384916 C110.367494,355.603993 104.804488,377.819911 99.2455434,400.036731 C99.157077,400.390597 99.0564238,400.741303 98.9196618,401.249534 Z M28.7006165,241.023028 C28.6658618,230.356047 37.1446512,221.982425 47.9637399,222.000028 C58.6717942,222.017631 67.1365914,230.335285 67.169992,240.873176 C67.2033927,251.467488 58.5991253,259.984192 47.8874602,259.958916 C37.2349231,259.934091 28.7349198,251.545573 28.7006165,241.023028 Z"})," "]})," "]})," "]})}),si=(0,u().vU)({embedButtonText:{defaultMessage:"Embed Invision",id:"invisionBlock.embeds.button.label"}});function li(e,t){const o=(0,u().YB)(),n=(0,c.useRef)(null),i=(0,d().qz)(e.blockResizerStore,h().Z);return(0,m().ez)(e.store,t,(0,c.useMemo)((()=>({renderedType:"invision",getNode:()=>{const e=n.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,g.jsx)(_().ZP,{...e,blockResizerStore:i,ref:n,store:e.store,iconSvg:ai,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,g.jsx)(u()._H,{defaultMessage:"Works with Invision projects",id:"invisionBlock.embeds.caption"}),embedButtonText:o.formatMessage(si.embedButtonText),urlInputPlaceholder:"https://invis.io/â€¦",children:(0,g.jsx)(u()._H,{defaultMessage:"Embed an Invision project",id:"invisionBlock.placeholder"})}))}const ci=c.memo(c.forwardRef(li),p().Z);var di=()=>o(828946),ui=()=>o(98228),pi=()=>o(876822);class mi extends bo().default{getInitialState(){return{query:""}}}const fi=mi;var gi=()=>o(154439),vi=()=>o(94967),hi=()=>o(752778),_i=()=>o(441530),bi=()=>o(76225),yi=()=>o(826955),Si=()=>o(255577),wi=()=>o(838367),ki=()=>o(231219),Ii=()=>o(98642),Ci=()=>o(895310),xi=()=>o(104088),Ti=()=>o(573357),Mi=()=>o(291198),Pi=()=>o(967092);function Ai(e){const{autocompleteStore:t,disableMouseCapture:o,focus:n,format:i,inputPlaceholder:r,inputStyle:a,isOpen:s,onBgClick:l,onInputBlur:u,onInputClick:p,onInputFocus:m,onQueryUpdate:f,popupStyle:v,preventCaptureEsc:h,queryUpdateDebounce:_,renderPopup:b}=e,y=(0,k().Fy)(),S=(0,d().VK)((()=>t.state.query),[t]);(0,Ii().c)(Ci().Z,(()=>({isOpen:s})),[s]);const w=(0,c.useMemo)((()=>ho().Ds((e=>{f&&f({query:e,autocompleteStore:t})}),_)),[f,_,t]);return(0,g.jsx)(Pi().ZP,{alignmentToOrigin:Rn().Alignment.Start,disableDarkOverlayBackground:y.isPhone,disableMouseCapture:o,onDismiss:l,open:s,origin:(0,g.jsx)(Ri,{isOpen:s,value:S,inputPlaceholder:r,focus:n,handleInputChange:e=>{const o=e.target.value;t.setState({...t.state,query:o}),w(o)},handleInputClick:p,handleInputFocus:m,handleInputBlur:u,inputStyle:a,format:i}),originGap:4,placementToOrigin:Rn().Placement.Bottom,popupType:y.isPhone?xi().k.SlideUp:xi().k.Popup,preventCaptureEsc:h,render:b,style:v})}function Ri(e){const{focus:t,format:o,handleInputChange:n,inputPlaceholder:i,inputStyle:r,isOpen:a,handleInputBlur:s,handleInputClick:l,handleInputFocus:c,value:d}=e;return(0,g.jsx)(Ti().Z,{allowMenuList:!0,capture:a,render:e=>(0,g.jsx)(Z().p,{allowSelectionWithin:!0,...e,children:(0,g.jsx)(Mi().Z,{focus:t,format:void 0!==o?o:Mi().B.Transparent,onBlur:s,onChange:n,onClick:l,onFocus:c,placeholder:i,style:r,value:d})})})}const Bi=(0,u().vU)({inputPlaceholder:{defaultMessage:"Search for a databaseâ€¦",id:"linkToCollectionBlock.input.placeholder"}});function Ei(e){const t=(0,u().YB)(),o=(0,k().O7)(),n=(0,k().Fy)(),i=(0,c.useRef)(!1),r=(0,bi().Ij)(),a=(0,c.useCallback)((()=>{const t=(e.results||[]).map((t=>{const n=yi().NW.createChildStore(e.store,{table:hi().vF,id:t});return{key:t,render:e=>(0,g.jsx)(ki().Z,{...e,store:n}),action:()=>{i.current||(i.current=!0,Vt().createAndCommit({userAction:"LinkToCollectionBlock.menuListItem",environment:o,canUndo:!0,perform:t=>{const i=_i().Y_({environment:o,store:e.store,collectionStore:n,collectionViewStore:void 0,transaction:t});i&&de().Z5({environment:o,stores:[i]})}}))}}}));let a,s;return a=e.results&&0===t.length?(0,g.jsx)(Xe().Z,{title:(0,g.jsx)(u()._H,{defaultMessage:"Select a database",id:"linkToCollectionBlock.menuItem.noResults.title"}),loading:!e.ready,children:(0,g.jsx)(wi().Z,{title:(0,g.jsx)(u()._H,{defaultMessage:"No results",id:"linkToCollectionBlock.menuItem.noResults.label"})})}):(0,g.jsx)(Si().Z,{type:Si().i.Vertical,initialFocus:0,sections:[{key:0,render:t=>(0,g.jsx)(Xe().Z,{...t,title:(0,g.jsx)(u()._H,{defaultMessage:"Select a database",id:"linkToCollectionBlock.menuItem.showResults.title"}),loading:!e.ready}),items:t}]}),s=n.isPhone?{menuType:lt().o.ActionSheet,disableBottomPadding:!0,maxHeight:`calc(70vh - ${r}px)`}:{menuType:lt().o.Popup,width:460,maxHeight:"40vh"},(0,g.jsx)(Bt().Z,{...s,children:a})}),[n.isPhone,o,e.ready,e.results,e.store,r]),s=(0,c.useCallback)((()=>{ue().clear({environment:o}),i.current||(i.current=!0,Vt().createAndCommit({userAction:"LinkToCollectionBlock.handleBlur",environment:o,canUndo:!0,perform:t=>{An().Od({store:e.store,transaction:t})}}))}),[o,e.store]);return(0,g.jsx)(Ai,{loading:!e.ready,isOpen:!0,autocompleteStore:e.autocompleteStore,queryUpdateDebounce:ui().vp,inputPlaceholder:t.formatMessage(Bi.inputPlaceholder),focus:!0,inputStyle:{...Di(),borderBottom:void 0},onBgClick:s,renderPopup:a})}function Di(){return{lineHeight:1.3}}function Ui(e,t){const n=(0,k().O7)(),i=(0,c.useRef)(null),r=(0,d().qz)(void 0,fi),a=(0,d().VK)((()=>r.state.query),[r]),s=(0,d().VK)((()=>{const t=o(127519).default.state;return Boolean("editing"===t.mode&&(0,o(191003).qS)(t.multiSelection)&&t.multiSelection.start.store.id===e.store.id)}),[e.store.id]);return(0,m().ez)(e.store,t,(0,c.useMemo)((()=>({renderedType:"link_to_collection",getNode:()=>i.current,getBlockStore:()=>e.store,handleCreated(){de().$Y({environment:n,phase:Lo().SelectionPhase.Editing}),ue().setSelection({store:e.store,selection:void 0})}})),[n,e.store]),s?(0,g.jsx)(gi().Z,{request:a,performRequest:t=>async function(e,t,o){const n=await di().x.searchActions.load(),{currentSpaceStore:i}=pi().default.state,r=await n.searchCollections(o,{query:e,limit:20,source:"link_to_collection_block",spaceStore:i,searchSessionId:void 0});return r.results}(t,e.store,n),debounce:ui().vp,render:(t,o,n)=>(0,g.jsx)(vi().Z,{debugName:"LinkToCollectionBlock",capture:s,children:(0,g.jsx)(Ei,{store:e.store,results:o,ready:n,autocompleteStore:r})})}):null)}const Fi=c.memo(c.forwardRef(Ui),p().Z);o(470928);var Ni=()=>o(933868),Vi=()=>o(396136),Li=()=>o(122479);const Oi=(0,u().vU)({inputPlaceholder:{defaultMessage:"Search for a pageâ€¦",id:"linkToPageBlock.searchPlaceholder"}});function Zi(e){const t=(0,u().YB)(),o=(0,k().O7)(),n=(0,k().Fy)(),i=(0,bi().Ij)(),r=(0,c.useRef)(!1),a=(0,c.useCallback)((()=>{const t=(e.results||[]).map((t=>{const n=yi().G.createChildStore(e.store,{table:Vi().iU,id:t});return{key:t,render:e=>(0,g.jsx)(ki().Z,{...e,store:n}),action:()=>{r.current||(r.current=!0,Vt().createAndCommit({userAction:"LinkToPageBlock.menuListItem",environment:o,canUndo:!0,perform:t=>{const i=_i().hc({environment:o,store:e.store,targetStore:n,transaction:t});i&&de().Z5({environment:o,stores:[i]})}}))}}}));let a,s;return a=e.results&&0===t.length?(0,g.jsx)(Xe().Z,{title:(0,g.jsx)(u()._H,{defaultMessage:"Select a page",id:"linkToPageBlock.selectPrompt"}),loading:!e.ready,children:(0,g.jsx)(wi().Z,{title:(0,g.jsx)(u()._H,{defaultMessage:"No results",id:"linkToPageBlock.noSearchResults"})})}):(0,g.jsx)(Si().Z,{type:Si().i.Vertical,initialFocus:0,sections:[{key:0,render:t=>(0,g.jsx)(Xe().Z,{...t,title:(0,g.jsx)(u()._H,{defaultMessage:"Select a page",id:"linkToPageBlock.selectPrompt.withContents"}),loading:!e.ready}),items:t}]}),s=n.isPhone?{menuType:lt().o.ActionSheet,disableBottomPadding:!0,maxHeight:`calc(70vh - ${i}px)`}:{menuType:lt().o.Popup,width:460,maxHeight:"40vh"},(0,g.jsx)(Bt().Z,{...s,children:a})}),[o,n.isPhone,i,e.ready,e.results,e.store]),s=(0,c.useCallback)((()=>{ue().clear({environment:o}),r.current||(r.current=!0,Vt().createAndCommit({userAction:"LinkToPageBlock.handleBlur",environment:o,canUndo:!0,perform:t=>{An().Od({store:e.store,transaction:t})}}))}),[o,e.store]);return(0,g.jsx)(Ai,{loading:!e.ready,isOpen:!0,autocompleteStore:e.autocompleteStore,queryUpdateDebounce:ui().vp,inputPlaceholder:t.formatMessage(Oi.inputPlaceholder),focus:!0,inputStyle:{...ji(),borderBottom:void 0},onBgClick:s,renderPopup:a})}function ji(){return{lineHeight:1.3}}function Ki(e,t){const n=(0,k().Fy)(),i=(0,k().O7)(),r=(0,c.useRef)(null),a=(0,d().qz)(void 0,fi),s=(0,d().VK)((()=>a.state.query),[a]);return(0,m().ez)(e.store,t,(0,c.useMemo)((()=>({renderedType:"link_to_page",getNode:()=>r.current,getBlockStore:()=>e.store,handleCreated(){de().$Y({environment:i,phase:Lo().SelectionPhase.Editing}),ue().setSelection({store:e.store,selection:void 0}),n.isMobile&&o(302353).default.onShow((()=>o(844085).hQ(i)))}})),[n.isMobile,i,e.store]),(0,g.jsx)(gi().Z,{request:s,performRequest:t=>async function(e,t,o){const{currentSpaceStore:n,mainEditorCurrentBlockStore:i}=pi().default.state,r=(0,Li().YO)(t).find((e=>{let{permissionItem:t}=e;return(0,Ni().$D)(t)}));if(n||r){if(!e)return r&&!n&&i?[i.id]:ei()._u(o).map((e=>e.id));{const t=await di().x.searchActions.load();if(n){return(await t.searchPageIds({environment:o,query:e,limit:20,spaceId:n.id,requireEditPermissions:!1,excludeTemplates:!1,source:"link_to_page_block",boostRecentlyViewedPages:!0})).results}if(r&&r.from.table===Vi().iU){return(await t.searchPageIdsInAncestor({environment:o,query:e,limit:20,ancestorId:r.from.blockId,excludeTemplates:!1,source:"link_to_page_block"})).results}}}return[]}(t,e.store,i),debounce:ui().vp,render:(t,o,n)=>(0,g.jsx)(vi().Z,{debugName:"LinkToPageBlock",capture:!0,children:(0,g.jsx)(Zi,{store:e.store,results:o,ready:n,autocompleteStore:a})})}))}const zi=c.memo(c.forwardRef(Ki),p().Z),Hi=(0,f().IU)("loom",{viewBox:"0 0 190 190",svg:(0,g.jsx)("path",{d:"M189.611 84.2622H134.166L182.184 56.539L171.639 38.2692L123.621 65.9923L151.338 17.9781L133.068 7.42678L105.351 55.4409V0H84.2598V55.4462L56.5322 7.42678L38.2681 17.9728L65.9904 65.987L17.9723 38.2692L7.42658 56.5337L55.4447 84.2569H0V105.349H55.4394L7.42658 133.072L17.9723 151.342L65.9851 123.624L38.2628 171.638L56.5322 182.184L84.2545 134.165V189.611H105.346V134.17L133.063 182.184L151.332 171.638L123.61 123.619L171.628 151.342L182.174 133.072L134.161 105.354H189.6V84.2622H189.611ZM94.8055 123.491C78.9021 123.491 66.0116 110.601 66.0116 94.6968C66.0116 78.7929 78.9021 65.9021 94.8055 65.9021C110.709 65.9021 123.599 78.7929 123.599 94.6968C123.599 110.601 110.709 123.491 94.8055 123.491Z"})});function qi(e,t){const o=(0,c.useRef)(null),n=(0,d().qz)(e.blockResizerStore,h().Z);return(0,m().ez)(e.store,t,(0,c.useMemo)((()=>({renderedType:"loom",getNode:()=>{const e=o.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,g.jsx)(_().ZP,{...e,blockResizerStore:n,ref:o,store:e.store,iconSvg:Hi,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,g.jsx)(u()._H,{defaultMessage:"Works with any Loom shareable link",id:"loomBlock.embed.caption"}),children:(0,g.jsx)(u()._H,{defaultMessage:"Embed Loom",id:"loomBlock.placeholder"})}))}const Wi=c.memo(c.forwardRef(qi),p().Z),Gi=(0,f().IU)("maps",{viewBox:"0 0 160 164",svg:(0,g.jsxs)("g",{children:[" ",(0,g.jsx)("polyline",{points:"16 163.155 76.159 103 136.314 163.155 16 163.155"})," ",(0,g.jsx)("path",{d:"M91.1523093,12 C89.1061243,15.5558234 87.6020864,19.4206238 86.7688642,23.441 C84.8448642,33.084 86.5958642,43.241 91.3038642,51.836 C91.8382207,52.8588753 92.3925227,53.8704894 92.9644441,54.8718184 L0,147.839 L0,24.942 C0,17.799 5.796,12 12.942,12 L91.1523093,12 L91.1523093,12 Z M27.8186945,28.8787927 C20.9826945,31.9947927 15.9026945,38.8067927 15.1686945,46.3227927 C13.7376945,56.9777927 21.5856945,67.7337927 32.0706945,69.9057927 C40.5536945,71.9007927 50.5746945,68.4527927 54.8196945,60.5497927 C57.5256945,56.1347927 57.8816945,50.7917927 57.3626945,45.7587927 C50.5816945,45.0857927 43.5296945,45.6577927 36.6486945,45.4797927 C36.5946945,48.0237927 36.6096945,50.5677927 36.7256945,53.1037927 C40.8396945,53.0417927 44.9526945,53.0807927 49.0736945,53.0727927 C47.8296945,58.9497927 41.9446945,62.9007927 36.0456945,62.2127927 C27.0296945,62.0967927 20.6586945,51.4727927 24.4936945,43.3927927 C27.4236945,35.1807927 39.1766945,32.2347927 45.4326945,38.4437927 C47.4426945,36.5027927 49.4526945,34.5547927 51.4096945,32.5597927 C45.1536945,26.7907927 35.5196945,25.3527927 27.8186945,28.8787927 Z"})," ",(0,g.jsx)("path",{d:"M124.80036,20.6120969 C120.325021,21.6105482 116.569675,25.5689693 116.191987,30.2012296 C115.721991,34.5142624 118.24735,38.8911407 122.112695,40.7949674 C126.304191,43.0118678 131.806442,42.332644 135.307176,39.1288306 C138.574835,36.2380909 139.764822,31.2458343 138.057917,27.2058756 C136.037937,22.1505427 130.041845,19.2713414 124.80036,20.6120969 Z M129.322621,0 C138.754833,0.539994477 147.978584,5.14840888 153.696218,12.7298698 C157.440026,17.5182824 159.529236,23.4620677 160,29.4989291 L160,31.7396754 C159.779233,43.4418634 152.290848,53.047919 145.807068,62.1501336 C138.528681,72.435413 131.801058,83.6445291 129.937231,96.3213226 C129.438005,98.4697621 129.034302,102.445875 127.470333,102.445875 C124.80036,102.3677 123.210376,86.842958 120.185792,80.3707165 C116.755058,72.8300244 111.978183,66.0154787 107.125156,59.3463161 C104.17134,55.3471262 101.384446,51.2079378 99.0798538,46.7964445 C95.4583524,40.1849736 94.1114431,32.3719766 95.591428,24.9543602 C96.8052617,19.097497 99.8698458,13.6698602 104.112879,9.47298004 C109.830513,3.88303721 117.561972,0.499225663 125.538045,0 L129.322621,0 Z"})," ",(0,g.jsx)("path",{d:"M151.652474,72 L151.652474,148.672145 C135.535571,132.464045 127.553192,124.419378 127.705338,124.538145 C131.041338,123.277145 130.263338,119.369145 130.912338,116.576145 C133.335338,100.096145 142.081338,85.5241452 151.543338,72.1531452 C151.579693,72.102109 151.616072,72.0510607 151.652474,72 Z"})," ",(0,g.jsx)("path",{d:"M106.040648,74 L92,88.0399478 L125.952845,121.992793 C123.906994,113.374953 121.723258,103.970177 117.61803,95.9459594 C114.174293,88.3766869 110.811044,80.7912134 106.040648,74 Z"})," "]})}),$i=(0,u().vU)({embedButtonText:{defaultMessage:"Embed Map",id:"googleMapsBlock.embedButton.label"}});function Qi(e,t){const o=(0,u().YB)(),n=(0,c.useRef)(null),i=(0,d().qz)(e.blockResizerStore,h().Z);return(0,m().ez)(e.store,t,(0,c.useMemo)((()=>({renderedType:"maps",getNode:()=>{const e=n.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,g.jsx)(_().ZP,{...e,blockResizerStore:i,ref:n,store:e.store,iconSvg:Gi,urlInputPlaceholder:"https://www.google.com/mapsâ€¦",embedButtonText:o.formatMessage($i.embedButtonText),mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,g.jsx)(u()._H,{defaultMessage:"Works with places on Google Maps",id:"googleMapsBlock.embed.caption"}),children:(0,g.jsx)(u()._H,{defaultMessage:"Embed a Google Map",id:"googleMapsBlock.placeholder"})}))}const Yi=c.memo(c.forwardRef(Qi),p().Z),Ji=(0,f().IU)("miro",{viewBox:"0 0 32 32",svg:(0,g.jsx)("path",{d:"M13.75 20.895l1.761.359v-7.82l-1.76.344v7.117zm4.604-4.28v4.28l1.761.359V16.88c0-.993.56-1.441 1.432-1.607l1.015-.186v-1.835l-1.015.164c-1.935.44-3.193 1.073-3.193 3.197zm-7.446-.256c0-2.313-1.539-3.085-2.777-3.068-.984.014-1.785.423-2.265 1.047-.478-.685-1.325-1.068-2.016-1.068-.85 0-1.597.373-2.09.97v-.806L0 13.778v7.117l1.76.359v-4.895c0-.776.568-1.328 1.418-1.328.836 0 1.403.552 1.403 1.328v4.536l1.76.359v-4.895c0-.776.568-1.328 1.404-1.328.835 0 1.402.552 1.402 1.328v4.536l1.76.359v-4.895h.001zm17.176 5.059c2.356 0 3.916-1.636 3.916-4.081 0-2.446-1.56-4.067-3.916-4.067-2.446 0-4.082 1.62-4.082 4.067 0 2.445 1.636 4.08 4.082 4.08zm0-1.65c-1.366 0-2.281-.976-2.281-2.431 0-1.456.915-2.416 2.281-2.416 1.275 0 2.115.96 2.115 2.416 0 1.455-.84 2.43-2.115 2.43zm-13.416-7.552c.641 0 1.065-.445 1.065-1.11S15.31 10 14.668 10c-.665 0-1.11.44-1.11 1.106 0 .665.445 1.11 1.11 1.11"})}),Xi=(0,u().vU)({embedButtonText:{defaultMessage:"Embed Miro",id:"miroBlock.embeds.button.label"}});function er(e,t){const o=(0,u().YB)(),n=(0,c.useRef)(null),i=(0,d().qz)(e.blockResizerStore,h().Z);return(0,m().ez)(e.store,t,(0,c.useMemo)((()=>({renderedType:"miro",getNode:()=>{const e=n.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,g.jsx)(_().ZP,{...e,blockResizerStore:i,ref:n,store:e.store,iconSvg:Ji,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,g.jsx)(u()._H,{defaultMessage:"Works with Miro links with public access enabled",id:"miroBlock.embeds.caption"}),embedButtonText:o.formatMessage(Xi.embedButtonText),urlInputPlaceholder:"https://miro.com/app/board/â€¦",children:(0,g.jsx)(u()._H,{defaultMessage:"Embed Miro",id:"miroBlock.placeholder"})}))}const tr=c.memo(c.forwardRef(er),p().Z),or=(0,f().IU)("mixpanel",{viewBox:"0 0 101 106",svg:(0,g.jsx)("g",{children:(0,g.jsx)("path",{d:"M31.008 41.412h13.385c-3.342-2.09-4.593-5.021-6.272-10.454l-5.022-18.613C30.803 3.982 28.918.005 19.714.005H.484v5.022H3.21c5.639 0 6.273 2.091 7.952 8.364l4.387 16.315c2.297 7.952 5.861 11.706 15.476 11.706h-.016zm30.968 0h13.37c9.614 0 12.956-3.77 15.27-11.706l4.387-16.315c1.679-6.273 2.502-8.364 7.952-8.364h2.724V.006H86.655c-9.41 0-11.294 3.77-13.385 12.34l-5.02 18.611c-1.68 5.639-2.93 8.363-6.273 10.454zM44.393 58.963h17.584l-.001-17.55H44.393v17.55zM.484 100.369h19.23c9.204 0 11.088-3.976 13.385-12.34l5.022-18.611c1.679-5.434 2.93-8.364 6.272-10.455H31.008c-9.615 0-13.179 3.77-15.475 11.706l-4.388 16.315c-1.68 6.273-2.297 8.364-7.952 8.364H.484v5.021zm86.14 0h19.023v-5.021h-2.724c-5.433 0-6.273-2.091-7.952-8.364L90.583 70.67c-2.296-7.952-5.639-11.706-15.27-11.706H61.976c3.343 2.091 4.546 4.816 6.225 10.455l5.022 18.612c2.09 8.57 3.975 12.339 13.385 12.339h.015z"})})}),nr=(0,u().vU)({embedButtonText:{defaultMessage:"Embed Mixpanel",id:"mixpanelBlock.embeds.button.label"}});function ir(e,t){const o=(0,u().YB)(),n=(0,c.useRef)(null),i=(0,d().qz)(e.blockResizerStore,h().Z);return(0,m().ez)(e.store,t,(0,c.useMemo)((()=>({renderedType:"mixpanel",getNode:()=>{const e=n.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,g.jsx)(_().ZP,{...e,blockResizerStore:i,ref:n,store:e.store,iconSvg:or,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,g.jsx)(u()._H,{defaultMessage:"Works with Mixpanel projects",id:"mixpanelBlock.embeds.caption"}),embedButtonText:o.formatMessage(nr.embedButtonText),urlInputPlaceholder:"https://mixpanel.com/â€¦",children:(0,g.jsx)(u()._H,{defaultMessage:"Embed a Mixpanel project",id:"mixpanelBlock.placeholder"})}))}const rr=c.memo(c.forwardRef(ir),p().Z);var ar=()=>o(736354),sr=()=>o(202834),lr=()=>o(534580),cr=()=>o(686381);const dr=(0,f().IU)("replit",{viewBox:"0 0 793.8 871.5",svg:(0,g.jsx)("g",{children:(0,g.jsx)("path",{d:"M396.9 356.1H227.2c-16.6 0-30-13.4-30-30v-99.8c0-16.6 13.4-30 30-30h139.7c16.6 0 30 13.4 30 30v129.8zm169.7 159.7H396.9V356.1h169.7c16.5 0 29.9 13.4 29.9 29.9v99.8c0 16.6-13.4 30-29.9 30zM366.9 675.6H227.2c-16.5 0-29.9-13.4-29.9-29.9v-99.8c0-16.5 13.4-29.9 29.9-29.9h169.7v129.8c0 16.3-13.4 29.8-30 29.8z"})})}),ur=(0,u().vU)({embedButtonText:{defaultMessage:"Embed a repl",id:"replitBlock.embeds.button.label"}});function pr(e,t){const o=(0,u().YB)(),n=(0,c.useRef)(null),i=(0,d().qz)(e.blockResizerStore,h().Z);return(0,m().ez)(e.store,t,(0,c.useMemo)((()=>({renderedType:"replit",getNode:()=>{const e=n.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,g.jsx)(_().ZP,{...e,blockResizerStore:i,ref:n,store:e.store,iconSvg:dr,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,g.jsx)(u()._H,{defaultMessage:"Works with Replit.",id:"replitBlock.embeds.caption"}),embedButtonText:o.formatMessage(ur.embedButtonText),urlInputPlaceholder:"https://replit.com/â€¦",children:(0,g.jsx)(u()._H,{defaultMessage:"Embed a repl",id:"replitBlock.placeholder"})}))}const mr=c.memo(c.forwardRef(pr),p().Z),fr=(0,f().IU)("sketch",{viewBox:"0 0 46 46",svg:(0,g.jsx)("g",{fillRule:"evenodd",children:(0,g.jsx)("path",{d:"M23.0831783 10.0045301l8.1450351.8960958c.2099814.0231017.4008968.1324906.5270123.3019626l6.0917147 8.1859511c.2137793.2872733.1982297.6847539-.0373384.9544486L23.4296391 36.806161c-.2072579.2372831-.5676296.2616233-.8049127.0543654l-.0543655-.0543654L8.19039805 20.3429882c-.23556813-.2696947-.25111774-.6671753-.03733843-.9544486l6.09171468-8.1859511c.1261155-.169472.3170309-.2788609.5270123-.3019626l8.1450351-.8960958a.76060447.76060447 0 01.1663566 0zm2.0141776 2.4229231c-.0693405-.0648437-.1764661-.0687976-.2504897-.0092454-.081512.0655766-.0939018.1841651-.0276733.2648747l3.8573181 4.7007387c.055083.0671271.085151.1509825.085151.2374739 0 .207984-.1702805.3765884-.3803321.3765884H17.6186701c-.0873512 0-.1720402-.0297721-.2398346-.0843129-.163024-.1311532-.1878035-.3683301-.0553465-.5297494l3.8573181-4.7007387c.0601442-.073295.0561509-.1793661-.0093373-.2480242-.0721132-.0756035-.1924706-.0790085-.2688257-.0076051l-5.750016 5.3771171c-.0774384.0724164-.1819972.1093609-.2882425.1018466-.2095178-.0148182-.3672335-.1950067-.352268-.4024622l.2753824-3.8174045c.0064096-.0888512-.0509385-.1699933-.1374402-.1944648-.1009848-.0285688-.206239.0293302-.2350918.129321L13.1553109 17.98681c-.0869135.3012032-.3194364.539875-.62031.6367138l-2.76499194.8899366c-.07834118.0252148-.13137885.0975058-.13137885.1790711 0 .1039921.08514024.1882942.19016605.1882942h2.66553224c.3250892 0 .6276464.1644528.8021788.4360184L20.3459621 31.28552c.0777639.1209976.2347663.165079.3651002.1025088.1417556-.0680534.2009545-.2370061.1322245-.3773663l-5.0526479-10.3185107c-.0376144-.0768161-.0571558-.1610746-.0571558-.2464434 0-.3119761.2554207-.5648827.5704981-.5648827h13.3920376c.0862174 0 .1713136.0193492.2488932.0565933.2835111.1361069.401909.4740123.2644491.7547328l-5.0526479 10.3185107c-.0631922.129051-.0186726.2845081.1035279.3615065.1329093.0837462.3092182.0449521.3937968-.086649l7.0494549-10.9686759c.1745324-.2715656.4770896-.4360184.8021788-.4360184h2.5849257c.0818532 0 .1545231-.0518618.1804073-.1287503.0332121-.0986555-.0206353-.2052903-.1202715-.2381755l-2.6912281-.888246c-.2977515-.0982735-.5273437-.3357047-.6135671-.6345159l-1.2609059-4.3697316c-.0247148-.0856502-.1066636-.1424338-.196398-.1360873-.1047589.0074091-.1836168.0975033-.176134.2012311l.2753824 3.8174045c.0075889.1051994-.0297228.2087291-.1028592.2854053-.1442263.1512071-.3849411.158017-.5376513.0152103z"})})}),gr=(0,u().vU)({embedButtonText:{defaultMessage:"Embed Sketch",id:"sketchBlock.embeds.button.label"}});function vr(e,t){const o=(0,u().YB)(),n=(0,c.useRef)(null),i=(0,d().qz)(e.blockResizerStore,h().Z);return(0,m().ez)(e.store,t,(0,c.useMemo)((()=>({renderedType:"sketch",getNode:()=>{const e=n.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,g.jsx)(_().ZP,{...e,blockResizerStore:i,ref:n,store:e.store,iconSvg:fr,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,g.jsx)(u()._H,{defaultMessage:"Works with Sketch links with Public Link Access enabled",id:"sketchBlock.embeds.caption"}),embedButtonText:o.formatMessage(gr.embedButtonText),urlInputPlaceholder:"https://sketch.com/â€¦",children:(0,g.jsx)(u()._H,{defaultMessage:"Embed Sketch",id:"sketchBlock.placeholder"})}))}const hr=c.memo(c.forwardRef(vr),p().Z),_r={SlideBlock:new(i().Ss)("SlideBlock",(async()=>await o.e(19985).then(o.bind(o,359073))))},br=(0,i().iS)(_r.SlideBlock,(e=>e.default));var yr=()=>o(213586),Sr=()=>o(892968),wr=()=>o(957991),kr=()=>o(542973),Ir=()=>o(282662),Cr=()=>o(547586),xr=()=>o(574767),Tr=()=>o(239482),Mr=()=>o(275200),Pr=()=>o(521777),Ar=()=>o(32969),Rr=()=>o(520849),Br=()=>o(262453),Er=()=>o(561280),Dr=()=>o(119891),Ur=()=>o(92175),Fr=()=>o(943620),Nr=()=>o(384241),Vr=()=>o(842574),Lr=()=>o(242758);function Or(e){const t=(0,u().YB)(),o=(0,k().O7)(),n=(0,I().Fg)(),i=(0,I().yK)((e=>({baseStyle:{paddingLeft:0,paddingRight:0,marginTop:-6,marginBottom:14},mobileStyle:Hr(e),desktopStyle:zr(e),scrollerOverlayStyle:qr(e)})),[]),r=(0,d().qz)(void 0,Er().Z),a=(0,c.useRef)(null);return(0,g.jsxs)(Z().p,{allowSelectionWithin:!0,style:{...o.device.isMobile?i.mobileStyle:i.desktopStyle,...i.baseStyle},children:[(0,g.jsx)(Vr().Z,{role:"tablist","aria-label":t.formatMessage(Kr.tabListLabel),type:Rr().Z.X,ref:a,store:r,children:(0,g.jsx)(Dr().ZP,{disabled:e.disabled,direction:"horizontal",keys:e.tabs.map((e=>e.id)),renderKey:(t,o)=>(0,g.jsx)(Zr,{index:o,...e}),onDrop:(t,n)=>function(e){const{environment:t,parentStore:o,onDropArgs:n,newTabs:i}=e;Vt().createAndCommit({userAction:"TabBlockMenu.handleTabReorder",environment:t,canUndo:!0,perform:e=>{const{key:t,endPosition:r}=n,a=o.getContentStores().find((e=>e.id===t)),s=i[r-1],l=o.getContentStores().find((e=>e.id===s));a&&Ir().HP({parentStore:o.getContentStore(),afterStore:l,currentStore:a,transaction:e})}})}({environment:o,newTabs:t,parentStore:e.parentStore,onDropArgs:n}),disableHorizontalEdgeScroll:!1})}),(0,g.jsx)(Lr().Z,{store:r,rightOverlayStyle:i.scrollerOverlayStyle}),!e.disabled&&(0,g.jsx)(Ur().Z,{"aria-label":t.formatMessage(Kr.addTab),style:{height:28,width:28,marginTop:6,display:"flex",justifyContent:"center"},onClick:()=>{!function(e,t,o){var n;const{performResult:i}=Vt().createAndCommit({userAction:"TabBlockMenu.newTab",environment:e,canUndo:!0,perform:o=>wr().gG({environment:e,store:t,transaction:o})}),r=()=>{const e=t.getContentStores(),o=e[e.length-1];Cr().$({blockStore:i,renderDelete:!0,originRect:o?Ar().C.getRectFromStore(o):void 0})},a=null===(n=o.current)||void 0===n?void 0:n.getNode();a?(a.scrollTo({left:a.scrollWidth,behavior:"smooth"}),Mr().t4(a,r)):r()}(o,e.parentStore,a)},children:(0,Pr().R)({fill:n.mediumIconColor,width:16,height:16})})]})}function Zr(e){const t=(0,k().O7)(),o=(0,u().YB)(),{index:n,parentStore:i,selectedIndex:r,tabs:a}=e,s=a[n],l=(0,I().yK)((e=>({selectedTab:{...{paddingTop:6,paddingBottom:12,whiteSpace:"nowrap",minWidth:0,flexShrink:0,fontWeight:500},position:"relative"},tab:{paddingTop:6,paddingBottom:12,whiteSpace:"nowrap",minWidth:0,flexShrink:0,fontWeight:500},border:Wr(e)})),[]),c=(0,d().VK)((()=>{const e=xr().Z.getFirstSelectedDiscussionId();if(!e)return!1;const t=yi().jQ.createChildStore(s,{table:kr().qF,id:e,spaceId:s.getSpaceId()});return(0,Tr().eG)(t).map((e=>e.id)).includes(s.id)}),[s]),{device:p}=t,m=r===n,f=n===a.length-1,v=0===n,h=a.length;return(0,g.jsx)(uo().Z,{store:s,analyticsName:"tab",canSelect:!0,canDrag:!1,canDropBelow:!1,canDropLeft:!v,canDropAbove:!1,canNativeDropBelow:!1,canNativeDropLeft:!v,canNativeDropRight:!f,canDropOnto:!0,dropzoneShouldNeverUseOrigin:!0,dropzoneMustBeWithinHorizontalBound:!0,canInsertAbove:!v,canDropRight:!f,canInsertBelow:!f,shouldShowHalo:!0,shouldShowDropZone:!0,shouldShowParentHalo:!0,dropzoneGap:10,onSelectableDrop:e=>{const{droppedDirection:o,droppedStores:n,duplicate:i}=e;Vt().createAndCommit({userAction:"TabBlockMenu.dropOntoTab",environment:t,canUndo:!0,perform:e=>{to().LQ({environment:t,targetParentStore:s.getContentStore(),targetStore:s,droppedDirection:o,droppedStores:n,duplicate:i,transaction:e})}})},onRemove:()=>{!function(e){const{environment:t,parentStore:o,tabStore:n,index:i}=e;Vt().createAndCommit({userAction:"TabBlockMenu.handleRemoveTab",environment:t,canUndo:!0,perform:e=>{const r=o.getContentStores();if(1===r.length){const t=o.getRecordStoreUIParent();"block"!==(null==t?void 0:t.table)&&"space"!==(null==t?void 0:t.table)||null==t||!t.valueIs(Br().i)||Ir().Od({parentStore:t,childToRemoveStore:o,transaction:e})}else{const e=i<r.length-1?r[i+1]:r[i-1];wr().x2({store:o,id:e.id,currentUserId:t.currentUser.id})}Ir().Od({parentStore:o.getContentStore(),childToRemoveStore:n,transaction:e})}})}({environment:t,parentStore:i,tabStore:s,index:n})},children:(0,g.jsxs)("div",{style:{...m?l.selectedTab:l.tab},children:[(0,g.jsxs)(Ur().Z,{role:"tab","aria-selected":m,"aria-controls":m?e.contentAriaId:void 0,"aria-posinset":n+1,"aria-setsize":h,id:m?e.selectedTabAriaId:void 0,style:{fontSize:16},onClick:()=>function(e,t,o){if(e.onChange(t),o&&!e.disabled){const o=e.parentStore.getContentStores()[t];Cr().$({blockStore:o,renderDelete:!0})}}(e,n,m),disabled:e.readOnly,mobileFeedback:p.isMobile,hovered:c,isGray:!m,children:[(0,g.jsx)(jr,{store:s}),(0,g.jsx)(Nr().Z,{store:s,placeholder:o.formatMessage(Kr.untitledTab)})]}),m&&(0,g.jsx)("div",{style:l.border})]},n)},n)}function jr(e){const{store:t}=e,{icon:o,isEmptyPage:n}=(0,d().VK)((()=>({icon:t.hasIcon()&&t.getIcon(),isEmptyPage:t.isEmptyPage()})),[t]);return o?(0,g.jsx)(Fr().Z,{disabled:!0,icon:o,isEmptyPage:n,size:20,style:{marginRight:6}}):null}const Kr=(0,u().vU)({untitledTab:{id:"tabMenuBlock.title.placeholder",defaultMessage:"Untitled"},addTab:{id:"tabMenuBlock.addTab",defaultMessage:"Add tab"},tabListLabel:{defaultMessage:"Tab block",id:"tabBlockMenu.tabListLabel"}});function zr(e){return{display:"flex",fontSize:14,width:"100%",paddingLeft:8,paddingRight:8,boxShadow:`0 1px 0 ${e.regularDividerColor}`,position:"relative",zIndex:1}}function Hr(e){return{display:"flex",fontSize:16,width:"100%",paddingTop:2,paddingLeft:16,paddingRight:16,boxShadow:`0 1px 0 ${e.regularDividerColor}`,position:"relative",zIndex:2,height:44,background:e.popoverBackground}}function qr(e){return{background:e.regularDividerColor,right:28,opacity:1,marginTop:6,marginBottom:12,width:1}}function Wr(e){return{borderBottom:`2px solid ${e.regularTextColor}`,position:"absolute",bottom:0,left:0,right:0}}function Gr(e,t){const{store:n,style:i,disabled:r,disableCommentMenu:a,hideContent:s}=e,l=(0,k().O7)(),u=(0,m().rv)(n,!0),p=(0,I().yK)((()=>({root:{paddingLeft:Fe().ZD.paddingLeft,flex:1,...u,...i},tabContainer:{display:"flex",flexDirection:"column"}})),[i,u]);(0,c.useEffect)((()=>{wr().nz({blockId:n.id,currentUserId:l.currentUser.id})}),[l,n]);const f=(0,c.useId)(),v=(0,c.useId)(),h=(0,d().VK)((()=>n.getContentStores()),[n]),_=(0,d().VK)((()=>wr().jL(n)),[n]),b=(0,m().PE)(n,r),y=(0,d().VK)((()=>o(856546).b(n)),[n]),S=(0,c.useRef)(null),w=(0,g.jsxs)("div",{style:p.root,ref:S,children:[(0,g.jsx)("div",{style:p.tabContainer,children:(0,g.jsx)(Or,{contentAriaId:f,selectedTabAriaId:v,disabled:!b,parentStore:n,tabs:h,selectedIndex:_,onChange:e=>wr().a({store:n,index:e,currentUserId:l.currentUser.id})})}),(0,g.jsx)("div",{role:"tabpanel",id:f,"aria-labelledby":v,style:{position:"relative"},children:(0,g.jsx)(o(690122).Z,{loaded:y,spinnerSize:"1em",showSpinnerTimeout:500,innerStyle:{display:"flex",flexDirection:"column"},children:(0,g.jsx)($r,{...e})})}),(0,g.jsx)(ve().Z,{disableCommentMenu:a,hideContent:s,store:n,hideIfSidebarOrMarginCommentsVisible:!0})]});return(0,m().ez)(n,t,(0,c.useMemo)((()=>({renderedType:"tab",getNode:()=>S.current,getBlockStore:()=>n})),[n]),w)}function $r(e){const{store:t,disabled:o}=e,{selectedContentStore:n,contentStore:i}=(0,d().VK)((()=>{const e=wr().z7(t),o=e.getContentStore();return{selectedContentStore:e,contentStore:o}}),[t]),r=(0,I().yK)((()=>({selectable:{display:"flex",flexDirection:"column"}})),[]),a=(0,m().PE)(t,o);return(0,g.jsx)(uo().Z,{store:n,analyticsName:"page_content",canSelect:!1,canDrag:!1,isListContainer:!0,style:r.selectable,children:(0,g.jsx)(q().Z,{store:i,disabled:o,disableContent:!1,emptyPlaceholder:(0,g.jsx)(Qr,{store:n,canEdit:a})})},n.id)}function Qr(e){const{store:t,canEdit:o}=e,n=(0,I().yK)((e=>({button:{fontSize:"inherit",width:"100%",borderRadius:4,caretColor:e.lightTextColor,...Fe().ZD,marginTop:2},text:{color:e.lightTextColor}})),[]),i=(0,k().O7)(),r=(0,c.useCallback)((()=>{Vt().createAndCommit({userAction:"TabBlock.handlePlaceholderClick",environment:i,canUndo:!0,perform:e=>{wr().ls({environment:i,store:t,transaction:e})}})}),[t,i]);return(0,g.jsx)(K().Z,{style:n.button,onClick:r,disabled:!o,children:(0,g.jsx)("span",{style:n.text,children:(0,g.jsx)(u()._H,{defaultMessage:"Empty tab. Click or drop blocks inside.",id:"tabBlock.emptyBlock.placeholderText"})})})}const Yr=c.memo(c.forwardRef(Gr),p().Z);var Jr=()=>o(970381),Xr=()=>o(846728),ea=()=>o(627990);function ta(e,t){const n=(0,k().O7)(),i=(0,k().Fy)(),r=(0,c.useRef)(null),a=(0,m().PE)(e.store,e.disabled),s=e.disabled||!a,{navigableAncestorStore:l,headerStores:d}=(0,o(825559).m)({parentStore:e.store}),p=(0,I().yK)((e=>({root:{position:"relative"},placeholder:{...ia,paddingTop:Fe().ZD.paddingTop,paddingBottom:Fe().ZD.paddingBottom,color:e.lightTextColor,...!s&&i.isMobile&&{marginRight:36}},actionMenuButton:{position:"absolute",top:3,right:6}})),[i.isMobile,s]),f=(0,g.jsx)("div",{style:p.placeholder,children:(0,g.jsx)(u()._H,{defaultMessage:"Add headings to create a table of contents. <linktohelpbutton>Learn more</linktohelpbutton>.",id:"tableOfContentsBlock.placeholder",values:{linktohelpbutton:e=>(0,g.jsx)(yt().Z,{href:(0,o(148126).UY)("guides.tableOfContents"),external:!0,onClick:()=>o(407391).Fs(n,{from:"table_of_contents_placeholder"}),children:e})}})}),v=(0,g.jsxs)(Z().p,{allowSelectionWithin:!0,style:p.root,ref:r,children:[d.map((t=>(0,g.jsx)(na,{headerStore:t,index:d.indexOf(t),headerStores:d,store:e.store,navigableAncestorStore:l,style:e.style},t.id))),0===d.length&&f,!s&&i.isMobile&&(0,g.jsx)(fe().Z,{style:p.actionMenuButton,tooltipContent:(0,g.jsx)(u()._H,{defaultMessage:"More actionsâ€¦",id:"tableOfContentsBlock.mobileActionMenu.button.label"}),store:e.store,fadeIn:!1})]});return(0,m().ez)(e.store,t,(0,c.useMemo)((()=>({renderedType:"table_of_contents",getNode:()=>r.current,getBlockStore:()=>e.store})),[e.store]),v)}const oa=c.memo(c.forwardRef(ta),p().Z);function na(e){const t=(0,d().VK)((()=>Jr().y({headerBlockId:e.headerStore.id,headerBlockIds:e.headerStores.map((e=>e.id)),index:e.index,getRecordModel:e.store.getRecordModel})),[e.headerStore.id,e.headerStores,e.index,e.store.getRecordModel]),o=(0,m().rv)(e.store),n=(0,I().yK)((()=>({container:o,innerHeader:{...ia,display:"flex",alignItems:"center",marginLeft:ea().LK*t,paddingTop:2*Fe().ZD.paddingTop,paddingBottom:2*Fe().ZD.paddingBottom}})),[o,t]),i=(0,Xr().R)({scrollToBlockId:e.headerStore.id,pageStore:e.navigableAncestorStore});return e.navigableAncestorStore?(0,g.jsx)("div",{style:{...n.container,...e.style},children:(0,g.jsx)(be().Z,{href:i.href,external:!1,children:(0,g.jsx)("div",{style:n.innerHeader,children:(0,g.jsx)(Nr().Z,{store:e.headerStore,shouldWrap:!1,underline:!0})})})}):null}const ia={paddingRight:Fe().ZD.paddingRight,paddingLeft:Fe().ZD.paddingLeft,fontSize:14,lineHeight:1.3};var ra=()=>o(42557),aa=()=>o(500104),sa=()=>o(952628),la=()=>o(911393);const ca=(0,u().vU)({embedButtonText:{defaultMessage:"Embed Tweet",id:"tweetBlock.embedTweet.button.label"}});function da(e,t){const n=(0,u().YB)(),i=(0,c.useRef)(null),r=(0,d().qz)(e.blockResizerStore,h().Z);return(0,m().ez)(e.store,t,(0,c.useMemo)((()=>({renderedType:"tweet",getNode:()=>{const e=i.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,g.jsx)(_().ZP,{...e,blockResizerStore:r,ref:i,store:e.store,iconSvg:o(340628).l,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,g.jsx)(u()._H,{defaultMessage:"Works with links to Tweets",id:"tweetBlock.linkInput.caption"}),embedButtonText:n.formatMessage(ca.embedButtonText),urlInputPlaceholder:"https://twitter.com/â€¦ or https://x.com/",children:(0,g.jsx)(u()._H,{defaultMessage:"Embed a Tweet from X",id:"tweetBlock.placeholder"})}))}const ua=c.memo(c.forwardRef(da),p().Z),pa=(0,f().IU)("typeform",{viewBox:"0 0 30 31",svg:(0,g.jsx)("path",{d:"M15.027 30.53c-4.294-.036-8.467-2.247-11.47-5.222C.553 22.333-.09 19.78.009 15.654.107 11.53 1.2 7.81 4.047 4.68 6.895 1.55 10.121.11 14.25.006c4.129-.103 7.291 1.046 10.44 4.156 3.15 3.11 5.242 7.127 5.31 11.392.067 4.266-1.978 6.94-4.972 9.936-2.994 2.995-5.706 5.077-10 5.04zm-4.891-19.66h3.818v10.304h1.903V10.87h3.818V9.071h-9.54v1.798z"})});function ma(e,t){const o=(0,c.useRef)(null),n=(0,d().qz)(e.blockResizerStore,h().Z);return(0,m().ez)(e.store,t,(0,c.useMemo)((()=>({renderedType:"typeform",getNode:()=>{const e=o.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,g.jsx)(_().ZP,{...e,blockResizerStore:n,ref:o,store:e.store,iconSvg:pa,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,g.jsx)(u()._H,{defaultMessage:"Works with any public Typeform link",id:"typeformBlock.embed.caption"}),children:(0,g.jsx)(u()._H,{defaultMessage:"Embed Typeform",id:"typeformBlock.placeholder"})}))}const fa=c.memo(c.forwardRef(ma),p().Z),ga=(0,f().IU)("video",{viewBox:"0 0 30 30",svg:(0,g.jsx)("path",{d:"M2,2v26h26V2H2z M26,6h-2V4h2V6z M22,14H8V4h14V14z M6,10H4V8h2V10z M6,12v2H4v-2H6z M6,16v2H4v-2H6z M6,20v2H4v-2H6z M8,16 h14v10H8V16z M24,20h2v2h-2V20z M24,18v-2h2v2H24z M24,14v-2h2v2H24z M24,10V8h2v2H24z M6,4v2H4V4H6z M4,24h2v2H4V24z M24,26v-2h2v2 H24z"})}),va=(0,u().vU)({urlPlaceholder:{defaultMessage:"Paste the video linkâ€¦",id:"videoBlock.linkInput.placeholder"},embedButtonText:{defaultMessage:"Embed video",id:"videoBlock.embedVideo.button.label"}});function ha(e,t){const o=(0,u().YB)(),n=(0,k().O7)(),i=(0,c.useRef)(null),r=(0,d().qz)(e.blockResizerStore,h().Z),a=(0,m().PE)(e.store,e.disabled);return(0,m().ez)(e.store,t,(0,c.useMemo)((()=>({renderedType:"video",getNode:()=>i.current,getBlockStore:()=>e.store})),[e.store]),(0,g.jsx)("div",{ref:i,children:(0,g.jsx)(Xn().Q,{type:ti().G7,dropTargetKey:`video-block-${e.store.id}`,onDropFile:a?t=>{if("invalidFileDrop"===t.type)return void Jn().oV({label:(0,g.jsx)(u()._H,{id:"videoBlock.invalidVideoDrop.wrongTypeErrorMessage",defaultMessage:"Sorry, that file type is not supported."})});const o=ei().qQ(n);Yn().cT({environment:n,store:e.store,file:t.file,pageWidth:o,preferredType:e.store.getType()})}:()=>{},children:(0,g.jsx)(_().ZP,{...e,blockResizerStore:r,store:e.store,iconSvg:ga,preserveScale:!0,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"},{type:"file",videoUpload:!0}],mediaMenuEmbedCaption:(0,g.jsx)(u()._H,{defaultMessage:"Works with YouTube, Vimeo, and more",id:"videoBlock.linkInput.caption"}),embedButtonText:o.formatMessage(va.embedButtonText),urlInputPlaceholder:o.formatMessage(va.urlPlaceholder),children:(0,g.jsx)(u()._H,{defaultMessage:"Embed or upload a video",id:"videoBlock.placeholder"})})})}))}const _a=c.memo(c.forwardRef(ha),p().Z),ba=(0,f().IU)("whimsical",{viewBox:"0 0 32 32",svg:(0,g.jsxs)("g",{children:[(0,g.jsx)("path",{opacity:".8",fillRule:"evenodd",clipRule:"evenodd",d:"M12.807 9.772a.497.497 0 00-.705 0L5.76 16.146a.502.502 0 000 .708l6.343 6.374c.195.195.51.195.705 0l6.343-6.374a.503.503 0 000-.708l-6.343-6.374zm.352-2.479a.993.993 0 00-1.41 0l-8.457 8.499a1.005 1.005 0 000 1.416l8.458 8.499a.993.993 0 001.41 0l8.457-8.499c.39-.391.39-1.025 0-1.416l-8.458-8.499z",fill:"#A7A6A2"}),(0,g.jsx)("mask",{id:"a",maskUnits:"userSpaceOnUse",x:"3",y:"7",width:"19",height:"19",children:(0,g.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.807 9.772a.497.497 0 00-.705 0L5.76 16.146a.502.502 0 000 .708l6.343 6.374c.195.195.51.195.705 0l6.343-6.374a.503.503 0 000-.708l-6.343-6.374zm.352-2.479a.993.993 0 00-1.41 0l-8.457 8.499a1.005 1.005 0 000 1.416l8.458 8.499a.993.993 0 001.41 0l8.457-8.499c.39-.391.39-1.025 0-1.416l-8.458-8.499z",fill:"#fff"})}),(0,g.jsx)("g",{filter:"url(#filter0_d)",mask:"url(#a)",children:(0,g.jsx)("path",{d:"M18.84 7.293a.993.993 0 011.41 0l8.458 8.499c.39.39.39 1.025 0 1.416l-8.458 8.499a.993.993 0 01-1.41 0l-8.457-8.499a1.005 1.005 0 010-1.416l8.457-8.499z",fill:"#000",fillOpacity:".01"})}),(0,g.jsx)("path",{d:"M18.84 7.293a.993.993 0 011.41 0l8.458 8.499c.39.39.39 1.025 0 1.416l-8.458 8.499a.993.993 0 01-1.41 0l-8.457-8.499a1.005 1.005 0 010-1.416l8.457-8.499z",fill:"#A7A6A2"}),(0,g.jsx)("defs",{children:(0,g.jsxs)("filter",{id:"filter0_d",x:"8.055",y:"4.964",width:"22.98",height:"23.071",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,g.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,g.jsx)("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,g.jsx)("feOffset",{}),(0,g.jsx)("feGaussianBlur",{stdDeviation:"1.018"}),(0,g.jsx)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.6 0"}),(0,g.jsx)("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow"}),(0,g.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"})]})})]})}),ya=(0,u().vU)({embedButtonText:{defaultMessage:"Embed Whimsical",id:"whimsicalBlock.embeds.button.label"}});function Sa(e,t){const o=(0,u().YB)(),n=(0,c.useRef)(null),i=(0,d().qz)(e.blockResizerStore,h().Z);return(0,m().ez)(e.store,t,(0,c.useMemo)((()=>({renderedType:"whimsical",getNode:()=>{const e=n.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,g.jsx)(_().ZP,{...e,ref:n,store:e.store,iconSvg:ba,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,g.jsx)(u()._H,{defaultMessage:"Works with Whimsical links with Public Link Access enabled",id:"whimsicalBlock.embeds.caption"}),embedButtonText:o.formatMessage(ya.embedButtonText),urlInputPlaceholder:"https://whimsical.com/â€¦",blockResizerStore:i,children:(0,g.jsx)(u()._H,{defaultMessage:"Embed Whimsical",id:"whimsicalBlock.placeholder"})}))}const wa=c.memo(c.forwardRef(Sa),p().Z);let ka;function Ia(e){const t=e.getType();if(t)return"collection_view"===t&&e.recordStoreParentDiffersFromPersistedParent()?n().Z:(ka||(ka={text:ra().Z,encrypted_text:ra().Z,image:ri,video:_a,bookmark:Re,drive:rn,audio:ie,tweet:ua,gist:Hn,maps:Yi,framer:jn,invision:ci,file:Vn().Z,page:sr().Z,to_do:aa().Z,toggle:sa().ZP,bulleted_list:Le().Z,numbered_list:ar().Z,code:Gt,factory:Dn,button:Oe().Z,divider:Zo,column_list:Ro,copy_indicator:Do,embed:_().ZP,breadcrumb:Ve,equation:In,header:qn().Z,sub_header:yr().Z,sub_sub_header:Sr().Z,quote:cr().Z,collection_view:Xt().DZ,collection_view_page:n().Z,link_to_page:zi,link_to_collection:Fi,figma:Nn,loom:Wi,codepen:Jt,typeform:fa,column:mo,pdf:lr().Z,callout:Ze().Z,table_of_contents:oa,whimsical:wa,miro:tr,abstract:S,sketch:hr,excalidraw:Mn,alias:te().ym,transclusion_container:la().gX,transclusion_reference:la().lC,replit:mr,external_object_instance:Pn().Z,external_object_instance_page:void 0,table:s().W,table_row:s().f,tab:Yr,hex:Qn,deepnote:Vo,mixpanel:rr,ai_block:ee,drawing:Ko,slide:br,personal_home_page:void 0,form:void 0,post:void 0,workflow:l().sk,transcription:a}),ka[t])}},904912:(e,t,o)=>{o.d(t,{P9:()=>At,M1:()=>Vt,ZP:()=>Ut,ar:()=>Pt,c2:()=>Bt,lI:()=>Nt,V1:()=>Mt});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(241792);var n=o(667294),i=()=>o(676457),r=()=>o(219727),a=()=>o(142735),s=()=>o(846550),l=()=>o(156642),c=()=>o(455530),d=()=>o(225771),u=()=>o(300822),p=()=>o(955620),m=()=>o(349220),f=()=>o(788860),g=()=>o(568017),v=()=>o(513670),h=()=>o(707513),_=()=>o(916673),b=()=>o(198046),y=()=>o(351972),S=()=>o(286310),w=()=>o(959137),k=()=>o(308186),I=()=>o(231077),C=()=>o(544607),x=()=>o(762478),T=()=>o(453999),M=()=>o(879952),P=()=>o(990966),A=()=>o(269299),R=()=>o(205228),B=()=>o(718959),E=()=>o(247724),D=()=>o(641702),U=()=>o(546634),F=()=>o(527278),N=()=>o(84080),V=()=>o(148126),L=()=>o(480089),O=o(785893);const Z=(0,o(827282).IU)("compass",{viewBox:"0 0 30 30",svg:(0,O.jsx)("path",{d:"M18,4.361V3c0-1.657-1.343-3-3-3s-3,1.343-3,3v1.361C6.27,5.718,2,10.854,2,17c0,7.18,5.82,13,13,13s13-5.82,13-13 C28,10.854,23.73,5.718,18,4.361z M14,3c0-0.552,0.448-1,1-1s1,0.448,1,1v1.051C15.669,4.025,15.338,4,15,4s-0.669,0.025-1,0.051V3z M16,27.949V26h-2v1.949C8.724,27.474,4.526,23.276,4.051,18H6v-2H4.051C4.526,10.724,8.724,6.526,14,6.051V8h2V6.051 c5.276,0.476,9.474,4.673,9.949,9.949H24v2h1.949C25.474,23.276,21.276,27.474,16,27.949z M8,24l10-4l4-10l-10,4L8,24z M18.41,13.59 l-1.949,4.871L11.59,20.41l1.949-4.871L18.41,13.59z"})});var j=()=>o(58988),K=()=>o(677559);const z=new(K().Ss)("imageHyperlink",(()=>o.e(55798).then(o.bind(o,806420)))),H=(0,K().kF)(z,(e=>e.ImageHyperlinkPreview)),q=(0,K().kF)(z,(e=>e.ImageHyperlinkOverlay));var W=()=>o(620218),G=()=>o(998901),$=()=>o(804217),Q=()=>o(263184);class Y extends Q().default{getInitialState(){return{hovered:!1,focused:!1,isInFrame:!1}}}const J=Y;var X=()=>o(920991),ee=()=>o(949842),te=()=>o(197666),oe=()=>o(175756),ne=()=>o(15348);let ie=null;const re=Q().default.createClass(void 0,{name:"ErrorStore"});function ae(e){let{source:t,contentWrapStyle:o,handleEmbedComp:i,contentStyle:r}=e;const s=(0,a().qz)(void 0,re),l=(0,n.useCallback)((e=>function(e,t,o){const n=(0,oe().K9)(e.currentTarget,t);n&&o.setState(n)}(e,t,s)),[t,s]),c=(0,a().VK)((()=>function(e){return{...e,pointerEvents:te().Z.state?"none":"auto",position:"relative"}}(r)),[r]);return(0,O.jsx)("div",{style:o,onMouseDown:ee().$0,onTouchStart:ee().$0,children:(0,O.jsxs)("div",{style:c,children:[(0,O.jsx)("audio",{ref:e=>i(e),style:c,controls:!0,preload:"none",onError:l,onPlay:le,onPause:ce,src:t}),(0,O.jsx)(de,{errorStore:s})]})})}const se={render:function(e){const{contentStyle:t,contentWrapStyle:o,handleEmbedComp:n}=e;return(0,O.jsx)(ne().Z,{url:e.source,permissionRecord:e.store.pointer,useS3Url:e.useS3Url,render:(e,i,r)=>r?i?(0,O.jsx)(ae,{contentStyle:t,contentWrapStyle:o,source:i,handleEmbedComp:n}):void 0:(0,O.jsx)("div",{})})},resizable:!1,hideActions:!0,rendererType:"audio"};function le(e){ie&&ie.pause(),ie=e.currentTarget}function ce(e){ie===e.currentTarget&&(ie=null)}function de(e){let{errorStore:t}=e;const o=(0,a().Kw)(t);return o?(0,O.jsx)(oe().ZP,{family:"audio",error:o,isSmall:!0}):null}var ue=()=>o(79555),pe=()=>o(316843),me=()=>o(37399),fe=()=>o(70320),ge=()=>o(24216),ve=()=>o(58836),he=()=>o(628370),_e=()=>o(154186),be=()=>o(92175),ye=()=>o(654133);const Se=new(K().Ss)("Tldraw",(()=>Promise.all([o.e(43550),o.e(96991)]).then(o.bind(o,287265)))),we=(0,K().kF)(Se,(e=>e.TldrawAdapter));var ke=()=>o(71410);function Ie(e){const t=(0,r().O7)(),i=(0,a().VK)((()=>(0,o(339523).iZ)(e.store)),[e.store]),l=(0,s().yK)((t=>({sizer:{height:e.height,display:"flex",borderRadius:3,paddingTop:2,paddingLeft:10,paddingRight:10,paddingBottom:10},border:{display:"flex",flex:1,margin:2,padding:3,boxShadow:i?t.outlineBlueInputBoxShadow:void 0,outline:`1px solid ${t.regularDividerColor}`,transition:"box-shadow 0.1s ease-in-out",willChange:"box-shadow",borderRadius:3},ignoreClickArea:{flex:1,position:"relative",contain:"paint"}})),[i,e.height]),c=(0,n.useCallback)((()=>{P().clear({environment:t}),M().Z5({environment:t,stores:[e.store],phase:o(965903).SelectionPhase.Editing})}),[t,e.store]),d=(0,n.useCallback)((t=>(0,O.jsx)("div",{...t,style:l.ignoreClickArea,className:"notion-disable-webkit-user-select",children:(0,O.jsx)(we,{...e,isEditing:i})})),[l.ignoreClickArea,e,i]);return(0,O.jsx)("div",{style:l.sizer,onPointerDown:c,children:(0,O.jsx)("div",{style:l.border,children:(0,O.jsx)(o(206352).Z,{debugName:"DrawingBox",capture:i,allowEsc:!0,children:(0,O.jsx)(ke().Z,{capture:!0,render:d})})})})}const Ce={render:e=>(0,O.jsx)(Ie,{...e}),resizable:!0,hideActions:!0,rendererType:"drawing"};var xe=()=>o(801812),Te=()=>o(839002);let Me=0;const Pe="notion_jsonp_callback_";function Ae(e){const t=Te().UZ(),o=document.createElement("script");o.type="text/javascript";const n=function(){const e=Pe+Me;return Me++,e}();window[n]=e=>{delete window[n],o.parentNode&&o.parentNode.removeChild(o),t.resolve(e)};const i=_().SK(e,{callback:n});return o.src=i,o.onerror=e=>{delete window[n],o.parentNode&&o.parentNode.removeChild(o),t.reject(e)},document.head&&document.head.appendChild(o),t.promise}var Re=()=>o(729201),Be=()=>o(312578);const Ee={userSelect:"none",padding:"6px 10px",borderRadius:4,border:"1px solid #dddddd",fontSize:14,width:"100%"},De={loading:!0,error:!1,html:void 0};function Ue(e){const[t,o]=(0,n.useState)(De),i=(0,a().VK)((()=>te().Z.getState()),[]);(0,xe().r5)((async()=>{const t=`https://gist.github.com/${function(e){const{pathname:t}=_().Qc(e);return(t||"").split("/").pop()}(e.source)}.json`;try{const e=await Ae(t);o({loading:!1,error:!1,html:e.div});if(!document.querySelector(`link[href="${e.stylesheet}"]`)){const t=document.createElement("link");t.type="text/css",t.rel="stylesheet",t.href=e.stylesheet,document.head&&document.head.appendChild(t)}}catch(n){o({loading:!1,error:!0,html:void 0})}}),[e.source]);const r=(0,s().yK)((()=>({container:{width:"100%",marginBottom:"-1em",...t.html&&{overflowY:"auto"},...t.html&&{height:"100%"},...t.html&&{pointerEvents:i?"none":"auto"}}})),[t.html,i]);return(0,O.jsx)("div",{children:(0,O.jsx)(ke().Z,{capture:!0,render:o=>(0,O.jsx)("div",{...o,ref:e.handleEmbedComp,style:r.container,children:(0,O.jsx)(Ne,{gistBoxState:t})})})})}const Fe={render:function(e){const{source:t,handleEmbedComp:o}=e;return(0,O.jsx)(Ue,{source:t,handleEmbedComp:o})},renderFullScreen:void 0,resizable:!0,embedGhost:!0,hideActions:!0};function Ne(e){let{gistBoxState:t}=e;const{error:o,html:n,loading:i}=(0,a().VK)((()=>{const{error:e,html:o,loading:n}=t;return{error:e,html:o,loading:n}}),[t]),r=(0,Re().Z)(i,1e3,500);return r||i?(0,O.jsx)("div",{style:{marginBottom:"1em"},children:(0,O.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",opacity:r?1:0,...Ee},children:[(0,O.jsx)(Be().Z,{}),(0,O.jsx)("div",{style:{marginLeft:8},children:(0,O.jsx)(f()._H,{defaultMessage:"Loading gist",id:"githubGistRenderer.loading.message"})})]})}):o?(0,O.jsx)("div",{style:{marginBottom:"1em"},children:(0,O.jsx)("div",{style:Ee,children:(0,O.jsx)(f()._H,{defaultMessage:"Error loading gist",id:"githubGistRenderer.errorLoading.message"})})}):(0,O.jsx)("div",{dangerouslySetInnerHTML:{__html:n??""},className:"notion-gist-block"})}var Ve=()=>o(374968),Le=o.n(o(310517)),Oe=()=>o(225339),Ze=()=>o(466970),je=(o(398858),o(461318),o(33228),()=>o(743359)),Ke=()=>o(747055),ze=()=>o(595989);var He=()=>o(721118),qe=()=>o(518242),We=()=>o(410184),Ge=()=>o(206643),$e=()=>o(995047);function Qe(e){const{file:t,fileName:o,fileSize:n,progressPercent:i}=e;return(0,O.jsx)($e().Z,{disabled:!0,iconSvg:Ge().y,isLoading:!0,progressPercent:i,file:t,name:o,size:n,onClick:v().ZT})}const Ye=Q().default.createClass(void 0,{name:"ErrorStore"});function Je(e){var t,i;const{store:l,dataURL:c,source:d,isFullWidth:u,isRootChild:p,aspectRatio:m,height:f,dragging:v,blockWidth:h,isFullScreen:_,imageBoxRef:b,isPageWidth:y,pageWidth:S,onSrcFailedToLoad:w,onSrcLoad:k,embedRootRef:I,disabled:C}=e,x=(0,r().O7)(),T=(0,a().qz)(void 0,Ye),M=(0,a().Kw)(T),P=(0,a().VK)((()=>X().default.getKeyState(X().default.getBlockKey(l.id))),[l]),B=(0,a().VK)((()=>He().Z.getStatus(l.id)),[l.id]),E=(0,a().VK)((()=>{if("uploading"===B||"completed"===B&&d===He().Z.getSecureFileURL(l.id))return He().Z.getDataURL(l.id)}),[B,l.id,d]),D=function(e){const[t,o]=(0,n.useState)(void 0),i=(0,n.useCallback)((async e=>{var t;const{environment:n,blockStore:i,signal:r}=e;if($().default.state.online||!(0,ze().Jb)(n.device))return;const a=i.getDisplaySource();if(!a)return;const s=je().p0({url:a,baseUrl:R().default.domainBaseUrl,userId:null===(t=n.currentUser)||void 0===t?void 0:t.id,permissionRecord:i.pointer});try{const e=await fetch(s,{cache:"force-cache",signal:r});if(!e.ok)return;const t=await e.blob(),n=URL.createObjectURL(t);n&&o(n)}catch(l){return}}),[]);return(0,n.useEffect)((()=>{const o=new AbortController;return t||i({...e,signal:o.signal}),()=>{t&&URL.revokeObjectURL(t),o.abort()}}),[t,i,e]),t}({environment:x,blockStore:l}),U=(0,n.useRef)(d),F=(0,n.useRef)(void 0),N=(0,n.useRef)(void 0),V=(0,n.useRef)(void 0),L=(0,n.useRef)(!1),Z=Boolean("image/heic"===N.current),j=Z&&(null==c?void 0:c.startsWith("blob:"))&&Boolean(!x.device.isSafari),K=(0,Ze().E)("image_sizing_v2"),z=function(e){const t=e.isFullWidth&&!e.dragging?void 0:e.blockWidth,o=window.innerWidth,n=t?Math.min(t,window.innerWidth):window.innerWidth;return e.isFullScreen?o:n}({isFullWidth:e.isFullWidth,isFullScreen:e.isFullScreen,isRootChild:e.isRootChild,isPageWidth:e.isPageWidth,pageWidth:e.pageWidth,blockWidth:e.blockWidth,dragging:e.dragging}),H=null===(t=I.current)||void 0===t?void 0:t.getBoundingClientRect().width,q=(0,n.useMemo)((()=>K?function(e){const{isFullScreen:t,isFullWidth:o,isPageWidth:n,blockWidth:i,embedContainerWidth:r,dragging:a}=e;if(t)return window.innerWidth;if(a)return Math.min(i??window.innerWidth,window.innerWidth);if(o)return window.innerWidth;let s;s=n&&r&&r>0?r:i;if(s){const e=r&&r>0?r:window.innerWidth;return Math.min(s,e)}return window.innerWidth}({isFullWidth:u,isFullScreen:_,isRootChild:p,isPageWidth:y,pageWidth:S,blockWidth:h,embedContainerWidth:H,dragging:v}):0),[u,_,p,y,S,h,H,v,K]),G=K?q:z,Q=null===(i=e.embedContainerDimensions)||void 0===i?void 0:i.height,Y=K?function(e){const{isFullWidth:t,isRootChild:o,height:n,aspectRatio:i,renderWidth:r,embedContainerHeight:a}=e;return t&&o?n:i&&r?r*i:a}({isFullWidth:u,isRootChild:p,height:e.height,aspectRatio:m,renderWidth:q,embedContainerHeight:Q}):void 0;async function J(t,n){const i=Oe().iS(e.source)?n:e.source;if(null==w||w(),n){const e=await(0,o(709344).default)({url:n,environment:x,method:"HEAD",format:"text"});if("failed"===e.type){const t=(0,oe().cT)(e.error,i);if(t)return T.setState(t),void W().default.DO_NOT_USE_measureLegacy("image_load",{environment:x,data:{success:!1,status:e.status}})}}T.setState({type:"unknown",source:i}),W().default.DO_NOT_USE_measureLegacy("image_load",{environment:x,data:{success:!1,status:0}})}function ee(e){e||(null==k||k(),T.setState(void 0),W().default.DO_NOT_USE_measureLegacy("image_load",{environment:x,data:{success:!0}}))}(0,n.useEffect)((()=>{V.current=W().default.DO_NOT_USE_markLegacy("image_load")}),[]),(0,n.useEffect)((()=>{null!=P&&P.file.type&&!Boolean(N.current)&&(N.current=null==P?void 0:P.file.type)}),[P]),(0,n.useEffect)((()=>{if(c||!d||!x.mobileNative)return;if(F.current&&d===U.current)return;U.current=d;Oe().iS(d)&&(0,o(661453).a)(x,{url:d,download:!1,downloadName:"image",permissionRecord:l.pointer},Boolean(o(725751).default.state.isNotionProtocolBugFixed)).then((e=>{F.current=e}))}),[x,U,F,d,l.pointer,c]),(0,n.useLayoutEffect)((()=>{var e;const t=null===(e=b.current)||void 0===e||null===(e=e.elementRef)||void 0===e?void 0:e.current;t&&!P&&(t.onload=()=>{const e=t.getBoundingClientRect().width;e<=1||e!==h&&(Z||!C&&l.canEdit()&&(h!==t.naturalWidth||e===t.naturalWidth||L.current||(A().createAndCommit({userAction:"ImageRenderer.updateBlockWidth",environment:x,canUndo:!0,perform:t=>{o(421654).FH({stores:[l],update:{block_width:e},transaction:t})}}),L.current=!0)))})}),[Z,h,x,b,l,P,C]);const te=(0,s().yK)((e=>{const t={},o=y?S:Math.min(h??0,S??0);if(q&&Y&&!v&&!_)t.width=q,t.height=Y,t.background=g().ZP.contentGrayBackground,t.borderRadius=2;else if(u&&p||!m||!o)u&&p||!m?f&&(t.height=f,t.background=g().ZP.contentGrayBackground):(t.paddingBottom=100*m+"%",t.background=g().ZP.contentGrayBackground);else{const e=o*m;t.height=Y?"100%":e,t.background=g().ZP.contentGrayBackground}const n={};return _||u||v||(Y&&K&&!E?n.maxHeight=Y:h&&m&&!E&&(n.maxHeight=h*m)),{content:n,placeholder:t,contentWrap:{}}}),[E,u,p,m,f,_,h,v,y,S,Y,q,K]);if(j&&P){const{file:e,name:t,size:o,progressPercent:n}=P;if(e instanceof File)return(0,O.jsx)(Qe,{file:e,fileName:t,fileSize:o,progressPercent:n})}return c?(0,O.jsx)(Xe,{...e,proxyError:void 0,renderURL:c,embedError:M,environment:x,signedOriginalURLRef:F,onImageError:J,onImageLoad:ee,renderHeightV2:Y,useV2Sizing:K,styles:te,enableLoadingShimmer:!1}):D?(0,O.jsx)(Xe,{...e,proxyError:void 0,renderURL:D,embedError:M,environment:x,signedOriginalURLRef:F,onImageError:J,onImageLoad:ee,renderHeightV2:Y,useV2Sizing:K,styles:te,enableLoadingShimmer:!0}):(0,O.jsx)(o(135499).Z,{url:d,width:G,render:(t,o)=>{var n;let i=o;return void 0===o&&void 0!==N.current&&null!==(n=U.current)&&void 0!==n&&n.startsWith("blob:")&&(i=U.current),E&&(i=E),(0,O.jsx)(Xe,{...e,proxyError:t,renderURL:i,embedError:M,environment:x,signedOriginalURLRef:F,onImageError:J,onImageLoad:ee,renderHeightV2:Y,useV2Sizing:K,styles:te,enableLoadingShimmer:!0})},isAuthenticated:!0,permissionRecord:l.pointer},`width-${e.contentStyle.width}`)}function Xe(e){const{proxyError:t,renderURL:o,isFullScreen:i}=e,[r,a]=(0,n.useState)(o);(0,n.useEffect)((()=>{void 0!==o&&o!==r&&a(o)}),[r,o]);const s=(0,oe().cT)(t,void 0)||(0,U().sj)(t)||e.embedError;return i?(0,O.jsx)(tt,{...e,embedError:s,renderURL:r}):(0,O.jsx)(et,{...e,embedError:s,renderURL:r})}function et(e){var t;const{embedError:o,renderURL:i,progressPercent:r,disabled:s,isLoading:l,contentStyle:c,contentWrapStyle:d,handleFullScreen:u,handleEmbedComp:p,isFullWidth:m,isRootChild:f,inlineContentStyle:g,blockLocation:v,imageBoxRef:h,environment:_,onImageError:b,onImageLoad:S,signedOriginalURLRef:w,styles:k,store:I,useV2Sizing:x}=e,[T,A]=(0,n.useState)(!1),B=(0,Ze().E)("imagerenderer_disable_loading_lazy");!function(e){const t=(0,n.useCallback)((async e=>{var t;const{environment:o,blockStore:n,canDownload:i}=e;if(!i||!(0,ze().Jb)(o.device)||!$().default.state.online)return;const r=n.getDisplaySource();if(!r)return;const a=n.getNavigableBlockStore();if(!a)return;const s=Ke().Z.state.offlinePages??{};if(!(a.id in s))return;const l=je().p0({url:r,baseUrl:R().default.domainBaseUrl,userId:null===(t=o.currentUser)||void 0===t?void 0:t.id,permissionRecord:n.pointer});try{await fetch(l)}catch(c){return}}),[]);(0,n.useEffect)((()=>{t(e)}),[t,e])}({blockStore:I,environment:_,canDownload:T});const E=C().qC(v),U=()=>{var e;if(y().QI(_,{from:"embedded_block_click",type:"image"}),!i)return;const t=0===i.indexOf("https:")?i:`${R().default.domainBaseUrl}${i}`;null===(e=_.mobileNative)||void 0===e||e.showLightBox({items:[{type:"image",previewUrl:Le()(t),originalUrl:Le()(w.current??t)}],startingIndex:0,from:"embedded_block_click"}),M().ZH({environment:_}),P().blurActiveElement()},F=_.mobileNative&&!1===(null==i?void 0:i.startsWith("data:")),N=F?U:E?void 0:u,V=F?U:E?t=>nt(t,e.handleFullScreen):void 0,L=E?t=>nt(t,e.handleFullScreen):u,Z=(0,a().VK)((()=>(0,D().Xh)(I.getPropertyValue("alt_text"),I)),[I]),j=(0,a().VK)((()=>{const e=I.getImageHyperlink()||"";return"placeholder"===e?void 0:e}),[I]),K=(0,a().VK)((()=>!!l&&"uploading"!==He().Z.getStatus(I.id)),[l,I.id]),z=(H={isFullWidth:e.isFullWidth,isRootChild:e.isRootChild,height:e.height,renderURL:i,isLoaded:T,embedContainerHeight:null===(t=e.embedContainerDimensions)||void 0===t?void 0:t.height}).isFullWidth&&H.isRootChild?H.height:H.renderURL&&H.isLoaded?void 0:H.embedContainerHeight;var H;let q=e.renderHeightV2;var W;!e.dragging||m&&f||(q=i&&T||null===(W=e.embedContainerDimensions)||void 0===W?void 0:W.height);const G=x?q:z;return(0,O.jsx)("div",{ref:p,style:{...d,...k.contentWrap},onClick:s&&!F?L:void 0,children:(0,O.jsxs)("div",{children:[(0,O.jsx)(qe().ZP,{alt:Z,ref:h,src:i,loading:B?void 0:"lazy",isFullScreen:!1,style:{...c,...k.content,...g},href:j,placeholderStyle:k.placeholder,onDoubleClick:N,onClick:V,height:G,capMaxHeight:m&&f,onError:b,onLoad:e=>{S(e),i&&A(!0)},enableLoadingShimmer:e.enableLoadingShimmer}),o&&(0,O.jsx)(oe().ZP,{error:o,family:"image"}),K&&(0,O.jsxs)("div",{style:qe().IA,children:[(0,O.jsx)(Be().Z,{style:{width:16,height:16,marginRight:4}}),(0,O.jsx)("div",{style:{minWidth:30,textAlign:"right"},children:(0,O.jsx)(We().Z,{percentage:r})})]})]})})}function tt(e){const{contentStyle:t,embedError:o,renderURL:n,onImageError:i,onImageLoad:r,styles:a}=e,s=Math.min(500,window.innerWidth-50);return(0,O.jsx)("div",{style:{alignSelf:"center",margin:0,position:"relative",minWidth:o?s:void 0},children:(0,O.jsxs)("div",{children:[(0,O.jsx)(qe().ZP,{src:n,isFullScreen:!0,style:{...t,...a.content},placeholderStyle:a.placeholder,capMaxHeight:!1,onError:i,onLoad:r,immediatelyDiscardImageWhenSourceChanges:!0}),o&&(0,O.jsx)(oe().ZP,{error:o,family:"image"})]})})}const ot={rendererType:"image",render:e=>(0,O.jsx)(Je,{...e,isFullScreen:!1}),renderFullScreen:e=>(0,O.jsx)(Je,{...e,isFullScreen:!0}),resizable:!0};function nt(e,t){e.stopPropagation(),t()}var it=()=>o(765513),rt=()=>o(733518);const at={render:function(e){const{disabled:t,contentStyle:n,contentWrapStyle:i,handleFullScreen:r,source:a,handleEmbedComp:s,height:l}=e;return(0,O.jsx)("div",{style:i,onClick:t?r:void 0,children:(0,O.jsx)("div",{style:{position:"relative"},children:(0,O.jsx)(rt().Z,{ref:e=>s(e),source:a,height:l,style:n,background:!1,renderPreview:()=>(0,O.jsx)(o(154293).b,{source:(0,U().cJ)(e)})})})})},renderFullScreen:function(e){const{source:t,height:o,contentStyle:n}=e;return(0,O.jsx)(rt().Z,{source:t,isFullWidth:!0,height:o,style:n,background:!0})},resizable:!0},st=at;var lt=o(973935),ct=()=>o(951113);function dt(e){const{handleEmbedComp:t,source:i,fullScreen:r}=e,a=(0,s().Fg)(),l=(0,s().yK)((e=>({main:{width:r?520:"100%",minWidth:"100%",pointerEvents:"auto",margin:r?"-10px auto":"-10px 0"},loading:{userSelect:"none",borderRadius:4,border:"1px solid #dddddd",fontSize:14,width:"100%",padding:"6px 10px"}})),[r]),c=(0,n.useCallback)((async e=>{if(!e)return;const{pathname:t}=_().Qc(i),o=(t||"").split("/")[3],n={dnt:!0,lang:"en",width:"100%",theme:"dark"===a.mode?"dark":"light"};if(o&&window.twttr){e.innerHTML="";if(await window.twttr.widgets.createTweetEmbed(o,e,n))return}lt.render((0,O.jsx)("div",{style:l.loading,children:"Error loading tweet"}),e)}),[i,l.loading,a.mode]);return(0,O.jsx)("div",{style:{display:"flex"},children:(0,O.jsx)("div",{style:{marginLeft:"auto",marginRight:"auto",maxWidth:420,minWidth:0,width:"100%"},children:(0,O.jsx)(ke().Z,{capture:!0,render:e=>(0,O.jsx)("div",{...e,ref:e=>e&&t(e),style:l.main,children:(0,O.jsx)(ct().Z,{fetch:()=>o.e(50898).then(o.t.bind(o,922062,23)),loading:e=>e?(0,O.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",...l.loading},children:[(0,O.jsx)(Be().Z,{}),(0,O.jsx)("div",{style:{marginLeft:8},children:(0,O.jsx)(f()._H,{id:"tweetRenderer.loadingTweet.message",defaultMessage:"Loading Tweet"})})]}):null,render:()=>(0,O.jsx)("div",{ref:c})})})})})})}const ut={render:function(e){const{source:t,handleEmbedComp:o}=e;return(0,O.jsx)(dt,{source:t,handleEmbedComp:o,fullScreen:!1})},renderFullScreen:function(e){const{source:t,handleEmbedComp:o}=e;return(0,O.jsx)(dt,{source:t,handleEmbedComp:o,fullScreen:!0})},resizable:!1,embedGhost:!0,hideActions:!0},pt={position:"absolute",left:"50%",top:"50%",transform:"translate(-30%, -50%)",height:0,width:0,borderStyle:"solid",borderColor:g().ZP.uiBlack,borderRightWidth:0,borderLeftWidth:24.5,borderTopWidth:16.1,borderBottomWidth:16.1,borderTopColor:g().ZP.transparent,borderBottomColor:g().ZP.transparent},mt={position:"relative",height:70,width:70,borderWidth:3,borderStyle:"solid",borderColor:g().ZP.uiBlack,borderRadius:70},ft={position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},gt=Q().default.createClass(!1,{name:"PlayedStore"}),vt=Q().default.createClass(void 0,{name:"ErrorStore"});function ht(e){let{store:t,source:o,contentWrapStyle:i,handleFullScreen:r,aspectRatio:l,height:d,handleEmbedComp:u,isFullWidth:p,preserveScale:m,mediaType:f,useS3Url:g,isRootChild:v,contentStyle:h,blockLocation:_}=e;const b=(0,s().Fg)(),y=(0,n.useRef)(null),S=(0,n.useCallback)((e=>{u(e),y.current=e}),[u]),w=(0,a().qz)(void 0,vt),k=(0,a().qz)(void 0,gt),I=(0,a().VK)((()=>It("embed_url",b,p,v,m,d,h,_,k)),[b,p,v,m,d,h,_,k]);return(0,O.jsx)(ne().Z,{url:o,permissionRecord:t.pointer,useS3Url:g,render:(e,t,n)=>{if(!n)return(0,O.jsx)("div",{});const a=(0,oe().cT)(e,void 0)||w.state;return t?"video"===f||(0,c().xL)({url:o})?(0,O.jsx)("div",{style:i,onMouseDown:ee().$0,children:(0,O.jsxs)("div",{style:{position:"relative"},onDoubleClick:r,children:[(0,O.jsx)(kt,{videoRef:y,setVideoRef:S,source:o,isFullWidth:p,isRootChild:v,preserveScale:m,height:d,contentStyle:h,blockLocation:_,playedStore:k,errorStore:w,signedUrl:t}),a&&(0,O.jsx)(yt,{error:a}),(0,O.jsx)(wt,{videoRef:y,playedStore:k,errorStore:w})]})}):(0,O.jsx)("div",{style:i,onDoubleClick:r,children:(0,O.jsx)("div",{style:{position:"relative"},children:(0,O.jsx)(rt().Z,{ref:e=>u(e),source:t,height:d,style:I,isFullWidth:p,preserveScale:m,aspectRatio:l,background:!0})})}):void 0}})}function _t(e){return(0,O.jsx)("div",{style:{...mt,...e.style},children:(0,O.jsx)("div",{style:pt})})}const bt={render:e=>(0,O.jsx)(ht,{...e}),resizable:!0,embedGhost:!0};function yt(e){let{error:t}=e;return(0,O.jsx)(oe().ZP,{family:"video",error:t})}function St(){const e=(0,r().O7)(),{device:t}=e;return t.isFirefox||t.isMobile?null:(0,O.jsx)(_t,{})}function wt(e){let{videoRef:t,playedStore:o,errorStore:i}=e;const r=(0,n.useCallback)((e=>{const o=t.current;o&&(0,ee().ZP)({event:e,context:ee().Af.EditorClick,callback:()=>{o.play()}})}),[t]);return(0,a().VK)((()=>o.state||i.state),[o,i])?null:(0,O.jsx)("div",{onClick:r,style:ft,children:(0,O.jsx)(St,{})})}function kt(e){let{signedUrl:t,source:o,isFullWidth:i,isRootChild:l,preserveScale:c,height:d,contentStyle:u,blockLocation:p,playedStore:m,errorStore:f,videoRef:g,setVideoRef:v}=e;const h=(0,s().Fg)(),_=(0,r().O7)(),b=(0,n.useCallback)((e=>{const{device:t}=_;t.isMobile&&m.setState(!1)}),[_,m]),y=(0,n.useCallback)((()=>{m.setState(!0)}),[m]),S=(0,n.useCallback)((()=>{const{device:e}=_;e.isAndroid&&document.fullscreenElement&&document.exitFullscreen()}),[_]),w=(0,n.useCallback)((()=>{const{device:e}=_,t=g.current;e.isIOS&&t&&t.pause()}),[_,g]),k=(0,n.useCallback)((e=>{const t=(0,oe().K9)(e.currentTarget,o);t&&f.setState(t)}),[o,f]),I=(0,a().VK)((()=>It("video_file",h,i,l,c,d,u,p,m)),[h,i,l,c,d,u,p,m]);return(0,O.jsx)("video",{ref:v,style:I,autoPlay:_.device.isIOS,playsInline:!0,controls:!0,preload:"metadata",onPause:b,onPlay:y,onEnded:S,onLoadStart:w,onError:k,src:t})}function It(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"embed_url",t=arguments.length>1?arguments[1]:void 0,o=arguments.length>5?arguments[5]:void 0,n=arguments.length>7?arguments[7]:void 0,i=arguments.length>8?arguments[8]:void 0;const r={...arguments.length>6?arguments[6]:void 0};return(arguments.length>2?arguments[2]:void 0)&&(arguments.length>3?arguments[3]:void 0)&&(arguments.length>4?arguments[4]:void 0)&&(r.height=o),"video_file"!==e||i.state||(r.pointerEvents="none"),C().qC(n)&&(r.maxHeight=240),r.backgroundColor=t.embedPlaceholderBackground,r}var Ct=()=>o(167179);function xt(e){const{store:t,mediaType:o,fileUploadState:n,source:i,getRenderArgs:r}=e,s=(0,a().VK)((()=>function(e,t,o,n){var i;return function(e,t,o){if(t)return Bt.image;if(e){if(e.startsWith("data:")||e.startsWith("<img"))return;const t=(0,c().Dz)({url:e,baseUrl:R().default.domainBaseUrl,publicDomainName:R().default.publicDomainName,preferredType:o});if("embed"!==t)return Bt[t]}if(o&&e)return Bt[o];return Ve().Z}(e,null==n?void 0:n.dataURL,t??(null===(i=o)||void 0===i?void 0:i.getType()))}(i,o,t,n)),[n,o,i,t]),l=(0,a().VK)((()=>t.getProperties()),[t]);if(s){const e=r({source:i,store:t,properties:l}),o=s.render;return(0,O.jsx)(o,{...e})}return null}var Tt=()=>o(942578);const Mt={background:"rgba(255, 255, 255, 0.055)"},Pt={display:"flex",alignItems:"center",justifyContent:"center",padding:"4px 6px",borderRight:`1px solid ${g().ZP.whiteWithAlpha(.2)}`},At="opacity 200ms ease-in-out",Rt=230,Bt={tweet:ut,gist:Fe,video:bt,image:ot,audio:se,invision:st,mixpanel:Ve().Z,maps:Ve().Z,drive:Ve().Z,framer:Ve().Z,figma:Ve().Z,loom:Ve().Z,typeform:Ve().Z,codepen:Ve().Z,embed:Ve().Z,pdf:o(447650).Z,whimsical:Ve().Z,miro:Ve().Z,abstract:Ve().Z,sketch:Ve().Z,excalidraw:Ve().Z,replit:Ve().Z,hex:Ve().Z,deepnote:Ve().Z,drawing:Ce},Et=new Set(["pdf","drive"]);function Dt(e,t){const{store:i,disableMediaMenu:l,disabled:f,mediaType:g,blockLocation:h,preserveScale:_,inlineContentStyle:b,centerWrappedContent:S}=e,I=(0,n.useRef)(null),T=(0,L().PE)(i,f),R=(0,r().O7)(),{device:E}=R,D=(0,n.useRef)(null),[N,V]=(0,n.useState)(0),[Z,j]=(0,n.useState)(!1),K=(0,n.useRef)(null),z=(0,a().VK)((()=>i.getType()),[i]),H=(0,a().VK)((()=>i.isNavigableAncestorNonEditableState()),[i]),q=(0,a().VK)((()=>Lt(e.source,i)),[e.source,i]),W=(0,a().VK)((()=>o(255810).default.state.unauthorizedIframeUrls??[]),[]),G=(0,U().qN)({source:q,unauthorizedIframeUrls:W}),$=(0,a().VK)((()=>{const{block_aspect_ratio:e}=i.getFormat();if(e&&!(N<=0))return N*e}),[i,N]),Q=(0,n.useId)(),Y=(0,a().qz)(e.blockResizerStore??void 0,o(803820).Z),ee=(0,a().qz)(void 0,o(529048).Z),te=(0,a().qz)(void 0,J),oe=(0,a().VK)((()=>X().default.getKeyState(X().default.getBlockKey(i.id))),[i.id]),ne=(0,a().VK)((()=>Kt(q,g,i,oe)),[oe,g,q,i]),ie=(0,a().VK)((()=>{const{block_height:e,block_width:t,block_preserve_scale:o,block_full_width:n,block_page_width:r,block_aspect_ratio:a}=i.getFormat(),{dragging:s,temporaryHeight:l,temporaryWidth:d,temporaryFullWidth:u,temporaryPageWidth:p}=Y.state,m=s?d:t??N,f=s?l:e,v=Boolean(s?u:n),h=Boolean(s?p:r);return{blockWidth:t,blockHeight:e,width:m,height:i.isExternalObjectInstanceBlockStore()&&"image"!==g?f||c().QA:f,dragging:s,preserveScale:Boolean(_||o),isFullWidth:v,isPageWidth:h,aspectRatio:a}}),[Y,N,g,_,i]),{popupWidth:re,maxHeight:ae,mediaMenuCurrentTab:se,mediaMenuTabs:le,embedButtonText:ce,mediaMenuEmbedCaption:de,urlInputPlaceholder:ue,onRemoveBlockFromComment:pe}=e,me=(0,n.useCallback)((()=>{if(!l&&T){const e=se||"embed",t=(le||[{type:"embed"},{type:"file",fileUpload:!0,imageUpload:E.isAndroid,videoUpload:E.isAndroid}]).map((e=>function(e,t,o,n,i,r){switch(e.type){case"embed":const a=o||F().Z.formatMessage(Ct().Dt.embedButtonText);return{type:"embed",caption:n||F().Z.formatMessage(Ct().Dt.embedCaption),buttonText:a,inputPlaceholder:i||F().Z.formatMessage(Ct().Dt.pastePrompt),onChange:e=>{const o=(0,u().D)(e);d().B(o,"url")?(x().Z(),Zt(o,r,t)):k().UW(F().Z.formatMessage(Ct().Dt.validLink))}};case"file":return{type:"file",fileUpload:Boolean(e.fileUpload),imageUpload:Boolean(e.imageUpload),videoUpload:Boolean(e.videoUpload),onUpload:e=>async function(e,t,o){(0,m().T)(e.length>0,"Files can't be empty.");const n=t;if(!n)return;const i=B().qQ(o);if(C().cT({environment:o,store:n,file:e[0],pageWidth:i,preferredType:n.getType()}),e.length<=1)return;const r=e.slice(1),a=await w().F.clipboardActions.load();A().createAndCommit({userAction:"EmbedBlock.insertOtherFiles",environment:o,canUndo:!0,perform:e=>{a.pasteFilesForBlocks({environment:o,files:r,transaction:e,insertBelowBlockStore:t})}})}(e,r,t)};case"unsplash":return{type:"unsplash",onChange:e=>{let{url:o}=e;x().Z(),Zt(o,r,t)}};case"giphy":return{type:"giphy",onChange:e=>{let{url:o}=e;x().Z(),Zt(o,r,t)}}}}(e,R,ce,de,ue,i))),o=I.current;if(o&&o instanceof Element){const n=o.getBoundingClientRect();x().$(R,{originRect:n,originGap:0,isSmallWidth:!1,showArrow:!0,currentTab:e,tabs:t,title:F().Z.formatMessage(Ct().Dt.embedTitle),...re?{popupWidth:re}:{},...ae?{maxHeight:ae}:{}})}}}),[T,E.isAndroid,l,R,i,re,ae,se,le,ce,de,ue]),fe=(0,n.useCallback)((()=>{me()}),[me]),ge=(0,n.useCallback)((()=>{me()}),[me]),he=(0,n.useCallback)((()=>{me(),z&&y().Fn(R,{type:"replace",block_type:z,block_id:i.id})}),[z,R,me,i.id]),_e=(0,n.useCallback)((()=>{!function(e,t){const o=e.getPropertyStore("caption");M().eP({environment:t,store:e}),P().setSelectionAtEnd({store:o});const n=e.getType();n&&y().Fn(t,{type:"caption",block_type:n,block_id:e.id})}(i,R)}),[R,i]),be=(0,n.useCallback)((e=>{Zt(e,i,R)}),[R,i]),ye=(0,n.useCallback)((async()=>!!pe&&(await pe(i),!0)),[pe,i]),Se=(0,n.useCallback)((()=>{Kt(Lt(q,i),g,i,oe)?zt(i,h,R):he()}),[h,R,oe,g,he,q,i]),we=(0,n.useCallback)((()=>{const{isFullWidth:e,aspectRatio:t}=ie,o=D.current;if(o&&o instanceof Element){const n=o.getBoundingClientRect();return e&&t?{...v().Go(n),width:n.width,height:n.width*t}:n}}),[ie]),ke=(0,n.useCallback)((()=>!(!ne||!ne.renderFullScreen)),[ne]),Ie=(0,a().VK)((()=>i.getProperties()),[i]),Ce=(0,a().VK)((()=>i.isRootOrDirectChild()),[i]),xe=(0,a().VK)((()=>B().qQ(R)),[R]),Te=(0,a().VK)((()=>Y.state.dragging),[Y]),Me=(0,s().yK)((e=>{const t={position:"relative"};return S&&(t.display="flex",t.justifyContent="center",t.alignItems="center",t.minHeight=220),{content:{display:"block",pointerEvents:Te?"none":"auto",width:"100%"},wrapper:t}}),[Te,S]),Pe=(0,n.useCallback)((e=>{const{source:t,store:o,properties:n}=e,i=p().Jcv(n&&n.title),r=p().Jcv(n&&n.size),{blockWidth:a,blockHeight:s,width:l,height:c,dragging:d,preserveScale:u,isFullWidth:m,isPageWidth:f,aspectRatio:v}=ie,_=xe,S=Ce,{device:w}=R,k=N&&$?{width:N,height:$}:void 0,x={store:o,source:t,blockWidth:a,blockHeight:s,aspectRatio:v,width:l,height:c,dragging:d,preserveScale:u,isFullWidth:m,isPageWidth:f,pageWidth:_,isRootChild:S,dataURL:oe?oe.dataURL:void 0,dataName:i,dataSize:r,disabled:!T,contentStyle:Me.content,contentWrapStyle:Me.wrapper,isLoading:Boolean(oe),progressPercent:oe?oe.progressPercent:0,handleFullScreen:()=>zt(o,h,R),handleEmbedComp:e=>D.current=e,onSrcFailedToLoad:()=>j(!0),onSrcLoad:()=>j(!1),viewOriginal:()=>function(e,t){const o=e;if(o){C().qL(t,{store:o,from:"view_original"});const n=o.getType();n&&y().Fn(t,{type:"original",block_type:n,block_id:e.id})}}(o,R),inlineContentStyle:b,blockLocation:h,mediaType:g,imageBoxRef:K,useS3Url:w.isIOS&&w.isMobileNative,embedContainerDimensions:k,embedRootRef:I};return x}),[ie,xe,Ce,R,N,$,oe,T,Me.content,Me.wrapper,b,h,g,K,j,I]),Ae=(0,n.useCallback)((()=>{if(!q)return;const e=Pe({source:q,properties:Ie,store:i});return ne&&ne.renderFullScreen?ne.renderFullScreen(e):void 0}),[Pe,Ie,ne,q,i]),Re=(0,a().VK)((()=>o(158083).Z.state.isDragging),[]),Be=(0,a().VK)((()=>o(557576).default.state.isActive),[]),Ee=(0,n.useCallback)((()=>{Re||Be||te.setState({...te.state,hovered:!0})}),[te,Be,Re]),De=(0,n.useCallback)((()=>{Re||Be||te.setState({...te.state,hovered:!1})}),[te,Be,Re]),Ue=(0,n.useCallback)((e=>{const t=e.target;t instanceof HTMLElement&&(0,o(474788).E)(t)&&te.setState({...te.state,focused:!0})}),[te]),Fe=(0,n.useCallback)((()=>{te.setState({...te.state,focused:!1})}),[te]),Ne=oe&&oe.dataURL||q;let Ve;return Ve=G||!Ne?(0,O.jsx)(ve().p,{allowSelectionWithin:!1,ref:I,children:(0,O.jsx)(Ft,{embedBlockStore:te,fileUploadState:oe,canEdit:T,store:i,openMenu:me,handleMouseEnter:Ee,handleMouseLeave:De,disabled:e.disabled,iconSvg:e.iconSvg,unauthorizedElectronUrl:G?q:void 0,children:e.children})}):(0,O.jsx)(ve().p,{allowSelectionWithin:!0,ref:I,children:(0,O.jsx)(Ht,{store:i,fileUploadState:oe,blockResizerStore:Y,embedBlockStore:te,alignmentPopupStore:ee,isStoreNavigableAncestorNonEditableState:H,captionAriaId:Q,srcFailedToLoad:Z,dimensions:ie,handleMouseEnter:Ee,handleMouseLeave:De,handleFocus:e=>Ue(e),handleBlur:Fe,setEmbedContainerWidth:V,source:Ne,mediaType:g,blockLocation:h,preserveScale:_,disableResizers:e.disableResizers,hideContent:e.hideContent,disableCommentMenu:e.disableCommentMenu,disableActions:e.disableActions,disabled:f,contentBelowSource:e.contentBelowSource,showExpandButton:e.showExpandButton,getRenderArgs:Pe,canEdit:T})}),(0,L().ez)(i,t,(0,n.useMemo)((()=>({renderedType:"embed",getBlockStore:()=>i,getNode:()=>I.current,handleCreated:fe,caption:_e,edit:ge,activate:Se,replace:he,embed:be,canRenderFullScreen:ke,getFullScreenNodeRect:we,handleRemoveBlockFromComment:ye,renderFullScreenNode:Ae,getBlockLocation:()=>e.blockLocation})),[fe,_e,ge,Se,he,be,ke,we,ye,Ae,i,e.blockLocation]),Ve)}const Ut=n.memo(n.forwardRef(Dt),o(632314).Z);function Ft(e){const{embedBlockStore:t,fileUploadState:o,blockLocation:i,canEdit:l,iconSvg:c,store:d,openMenu:u,disableCommentMenu:p,hideContent:m,centerWrappedContent:g,handleMouseEnter:v,handleMouseLeave:h,unauthorizedElectronUrl:b}=e,y=(0,r().O7)(),{device:S}=y,w=(0,a().VK)((()=>!$().default.state.online),[]),k=(0,a().VK)((()=>S.isMobile||t.state.hovered),[S,t]),x=(0,n.useCallback)((()=>{b&&I().openExternalUrl(b)}),[b]),T=C().qC(i),M=(0,s().yK)((e=>{const t={position:"relative"};g&&(t.display="flex",t.justifyContent="center",t.alignItems="center",t.minHeight=220);const o={display:"flex"};return C().qC(i)&&(o.borderWidth=1,o.borderColor=e.regularDividerColor,o.borderRadius=3,o.marginBottom=0,o.width=214,o.color=e.text.secondary),{placeholder:t,container:o}}),[i,g]);return(0,O.jsxs)("div",{style:M.container,onMouseEnter:v,onMouseLeave:h,children:[(0,O.jsx)($e().Z,{style:M.placeholder,disabled:!l||w,iconSvg:void 0!==c?c:Z,shouldHideRight:!k,right:l&&(0,O.jsx)(Ot,{blockLocation:i,store:d,isPlaceholder:!0}),onClick:b?x:u,isLoading:Boolean(o),progressPercent:o?o.progressPercent:0,file:o?o.file:void 0,name:o?o.name:void 0,size:o?o.size:void 0,isInComment:T,children:b?(0,O.jsx)(f()._H,{id:"embedBlock.isEmbedUrlUnauthorized.placeholder",defaultMessage:"Click to view content from {domain} in the browser. <inlinelink>Learn more</inlinelink>.",values:{domain:_().ge(b),inlinelink:e=>(0,O.jsx)(it().Z,{external:!0,href:(0,V().UY)("guides.connectedApps"),children:e})}}):e.children||(0,O.jsx)(f()._H,{defaultMessage:"Embed anything (PDFs, Google Docs, Google Maps, Spotifyâ€¦)",id:"embedBlock.embedAnything.placeholder"})}),(0,O.jsx)(me().Z,{disableCommentMenu:p,hideContent:m,store:d})]})}function Nt(e){const t=e.getProperties(),o=null==t?void 0:t.source,n=p().QaF(o),{display_source:i}=e.getFormat();return(0,c().Z8)(i||n)}function Vt(e){const{device:t}=e;return t.isMobile?g().ZP.blackWithAlpha(.3):g().ZP.blackWithAlpha(.6)}function Lt(e,t){return e||Nt(t)}function Ot(e){let{isPlaceholder:t,blockLocation:o,store:n}=e;const i=C().qC(o),r=i?"comment_media":"default";return(0,O.jsx)(ue().Z,{store:n,fadeIn:!1,iconStyle:t?void 0:{fill:g().ZP.white},actionSectionGroupKey:r,hideFilterActionsInput:i,hoveredStyle:Mt,tooltipContent:F().Z.formatMessage(Ct().Dt.actionMore)})}function Zt(e,t,o){const n=t;if(!n)return;const i=B().qQ(o);S().bO(o,{pastedText:e,source:"embed_block_menu"});const r=W().default.mark("embed_render_complete");C().I(o,{source:e,isDataURL:!1,store:n,pageWidth:i,preferredType:t.getType(),metric:r})}function jt(e){const{renderer:t,blockLocation:o,isFullWidth:n,dragging:i,srcFailedToLoad:r,isExternalObjectInstanceBlockStore:a}=e,s={display:"flex"};return C().qC(o)&&(s.display="inline-flex",s.maxHeight=240),"audio"===t.rendererType&&(s.display="flex"),"image"===t.rendererType&&(r?s.width="100%":a||n||i||(s.width="fit-content")),s}function Kt(e,t,o,n){var i;return function(e,t,o){if(t)return Bt.image;if(e){if(e.startsWith("data:")||e.startsWith("<img"))return;const t=(0,c().Dz)({url:e,baseUrl:R().default.domainBaseUrl,publicDomainName:R().default.publicDomainName,preferredType:o});if("embed"!==t)return Bt[t]}return o&&e?Bt[o]:Ve().Z}(e,null==n?void 0:n.dataURL,t??(null===(i=o)||void 0===i?void 0:i.getType()))}function zt(e,t,o){T().dK({blocks:[e],blockLocationOfTargetBlock:t});const n=e.getType();n&&y().Fn(o,{type:"full_screen",block_type:n,block_id:e.id})}function Ht(e){const{store:t,blockLocation:o,fileUploadState:s,mediaType:c,source:d,blockResizerStore:u,isStoreNavigableAncestorNonEditableState:p,embedBlockStore:m,alignmentPopupStore:f,captionAriaId:g,srcFailedToLoad:v,disableResizers:h,disableCommentMenu:_,hideContent:y,disableActions:S,disabled:w,contentBelowSource:k,showExpandButton:I,dimensions:x,handleMouseEnter:T,handleMouseLeave:M,handleFocus:P,handleBlur:A,setEmbedContainerWidth:R,getRenderArgs:B,canEdit:U}=e,V=(0,r().O7)(),{device:L}=V,{blockType:Z,altTextTooltipText:j,isExternalObjectInstanceBlockStore:K}=(0,a().VK)((()=>{let e=(0,D().Xh)(t.getPropertyValue("alt_text"),t);return e=e.length>100?`${e.slice(0,100)}...`:e,{isExternalObjectInstanceBlockStore:t.isExternalObjectInstanceBlockStore(),blockType:t.getType(),altTextTooltipText:e}}),[t]),{preserveScale:z,isFullWidth:W,dragging:G}=x,[$,Q]=(0,n.useState)(!0),Y=(0,a().VK)((()=>m.state.hovered),[m]),J=(0,n.useRef)(null),X=(0,n.useRef)(null),ee=(0,a().VK)((()=>t.isRootOrDirectChild()),[t]),te=(0,n.useCallback)((e=>{if(Z&&(0,l().OY)(Z)&&Et.has(Z))return{leftSide:!1,rightSide:!1,bottom:!1,rightCorner:!0,leftCorner:!0};const t=ee,{preserveScale:o,isFullWidth:n}=x,{resizable:i}=e,r=U&&i&&!h&&!v,a=r&&(!o||n&&t)&&!v,s=a&&!n&&!v;return{leftSide:r&&t&&!v,rightSide:r,bottom:a,rightCorner:s,leftCorner:s&&t&&!v}}),[Z,x,h,U,ee,v]),oe=(0,a().VK)((()=>Kt(d,c,t,s)),[s,c,d,t]),ne=(0,i().D)(),ie=(0,n.useCallback)(((e,t)=>{e&&oe&&oe.embedGhost&&(0,ge().y)(ne,(()=>e.setAttribute("embed-ghost","")))}),[ne,oe]);(0,n.useLayoutEffect)((()=>{J.current&&ie(J.current,d)}),[ie,d]),(0,n.useEffect)((()=>{if(!J.current)return;const e=new ResizeObserver((e=>{for(const t of e){const e=t.contentRect.width;e>0&&(R(e),Q(!0))}}));return e.observe(J.current),()=>{e.disconnect()}}),[ie,R,d]);const re=(0,a().VK)((()=>function(e,t){const{block_width:o}=e.getFormat(),{temporaryWidth:n}=t.state;return void 0!==n?n<=Rt:void 0!==o&&o<=Rt}(t,u)),[u,t]);if(oe){const{resizable:e}=oe,{leftSide:n,rightSide:i,bottom:r,leftCorner:a,rightCorner:l}=te(oe),h="external_object_instance"===Z,R="video"===Z,D="image"===Z,Q=Boolean(j&&"image"===Z&&!re&&!C().qC(o)),ee=U&&!p?Ct().Dt.actionEditAltText:Ct().Dt.actionViewAltText;return(0,N().Z)((C=>(0,O.jsxs)("div",{role:"figure","aria-labelledby":g,ref:J,...C,children:[$?(0,O.jsxs)("div",{style:jt({renderer:oe,blockLocation:o,isFullWidth:W,dragging:G,srcFailedToLoad:v,isExternalObjectInstanceBlockStore:K}),ref:X,children:[(0,O.jsxs)("div",{className:E().QSt,style:{position:"relative",overflow:e?"hidden":"visible",flexGrow:1},onFocus:P,onBlur:A,onMouseLeave:M,onMouseEnter:T,children:[(0,O.jsx)(xt,{store:t,mediaType:c,fileUploadState:s,source:d,getRenderArgs:B}),n&&(0,O.jsx)(Tt().Z,{store:t,resizerType:fe().IS.Horizontal,resizerAlignment:fe().bZ.Left,resizeComponent:X,preserveScale:z,isHovered:Y,blockResizerStore:u},"LeftResizer"),i&&(0,O.jsx)(Tt().Z,{store:t,resizerType:fe().IS.Horizontal,resizerAlignment:fe().bZ.Right,resizeComponent:X,preserveScale:z,isHovered:Y,blockResizerStore:u},"RightResizer"),l&&(0,O.jsx)(Tt().Z,{store:t,resizerType:fe().IS.Corner,resizerAlignment:fe().bZ.Right,resizeComponent:X,preserveScale:z,isHovered:Y,blockResizerStore:u},"RightCornerResizer"),a&&(0,O.jsx)(Tt().Z,{store:t,resizerType:fe().IS.Corner,resizerAlignment:fe().bZ.Left,resizeComponent:X,preserveScale:z,isHovered:Y,blockResizerStore:u},"LeftCornerResizer"),r&&(0,O.jsx)(Tt().Z,{store:t,resizerType:fe().IS.Vertical,resizeComponent:X,preserveScale:z,isHovered:Y,blockResizerStore:u},"BottomResizer"),!S&&(0,O.jsx)(Ct().Rr,{store:t,alignmentPopupStore:f,blockResizerStore:u,embedBlockStore:m,fileUploadState:s,isStoreNavigableAncestorNonEditableState:p,mediaType:c,source:d,blockLocation:o,dimensions:x,canEdit:U}),S&&I&&oe.renderFullScreen&&(0,O.jsx)(qt,{store:t,blockLocation:o}),k,D&&(0,O.jsx)(q,{isHovered:Y,store:t}),D&&(0,O.jsx)(H,{isHovered:Y,store:t,hideText:re,disableActions:p||!U}),!(h||R)&&(0,O.jsx)(Wt,{show:Q,tooltipText:j,tooltipSecondaryText:F().Z.formatMessage(ee),buttonText:"ALT",className:E()._Xz,onClickHandler:()=>{b().b({blockStore:t,entrypoint:"block_button",environment:V})}})]}),!W&&!L.isMobile&&(0,O.jsx)(me().Z,{disableCommentMenu:_,hideContent:y,store:t,hideIfSidebarOrMarginCommentsVisible:!0})]}):null,(0,O.jsx)(pe().N,{store:t,captionAriaId:g,disabled:w})]})))}return null}function qt(e){let{store:t,blockLocation:o}=e;const n=(0,r().O7)(),i=(0,s().yK)((e=>({button:{position:"absolute",right:12,top:12,background:e.buttonBackground},hovered:{background:e.buttonHoveredBackground},pressed:{background:e.buttonPressedBackground}})),[]);return(0,O.jsx)(be().Z,{style:i.button,icon:e=>(0,j().s)({...e,width:16,height:16}),hoveredStyle:i.hovered,pressedStyle:i.pressed,onClick:()=>zt(t,o,n),children:(0,O.jsx)(f()._H,{id:"embedBlock.expandFullScreen.button.label",defaultMessage:"Expand"})})}function Wt(e){let{show:t,tooltipText:o,tooltipSecondaryText:n,buttonText:i,onClickHandler:a,className:l}=e;const c=(0,r().O7)(),d=(0,s().yK)((e=>({buttonWrapper:{position:"absolute",bottom:"8px",right:"8px",background:Vt(c),borderRadius:4,overflow:"hidden"},button:{padding:"4px 6px",fontSize:12,fontWeight:h().Ue.medium,letterSpacing:.2,color:"white"},tooltipText:{overflow:"hidden",textOverflow:"ellipsis"},tooltipSecondaryText:{color:e.mediumInvertedTextColor}})),[c]);return(0,O.jsx)(he().Z,{visible:t,initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,O.jsx)("div",{style:d.buttonWrapper,children:(0,O.jsx)(ye().Z,{renderTooltip:()=>(0,O.jsxs)("div",{children:[(0,O.jsx)("div",{style:d.tooltipText,children:o}),n&&(0,O.jsx)("div",{style:d.tooltipSecondaryText,children:n})]}),placement:G().Placement.Bottom,disableTooltip:!t,render:e=>(0,O.jsx)(_e().Z,{className:l,...e,ariaLabel:n,style:d.button,hoveredStyle:Mt,disabled:!t,onClick:a,children:i})})})})}},167179:(e,t,o)=>{o.d(t,{Dt:()=>ne,Rr:()=>re,Sj:()=>ie});var n=o(667294),i=()=>o(146947),r=()=>o(219727),a=()=>o(142735),s=()=>o(846550),l=()=>o(156642),c=()=>o(455530),d=()=>o(801812),u=()=>o(788860),p=()=>o(568017),m=()=>o(707513),f=()=>o(351972),g=()=>o(252428),v=()=>o(799454),h=()=>o(544607),_=()=>o(421654),b=()=>o(453999),y=()=>o(879952),S=()=>o(990966),w=()=>o(269299),k=()=>o(576917),I=()=>o(40302),C=()=>o(267191),x=()=>o(211332),T=()=>o(8208),M=()=>o(958783),P=()=>o(205228),A=()=>o(164079),R=()=>o(852465),B=()=>o(466970),E=()=>o(338217),D=()=>o(455343),U=()=>o(799737),F=()=>o(327193),N=()=>o(765552),V=()=>o(615634),L=()=>o(173555),O=()=>o(884399),Z=()=>o(58988),j=()=>o(721840),K=()=>o(918302),z=()=>o(436929),H=()=>o(998901),q=()=>o(524434),W=()=>o(235453),G=()=>o(721118),$=()=>o(79555),Q=()=>o(154186),Y=()=>o(448419),J=()=>o(654133),X=()=>o(374968),ee=()=>o(904912),te=o(785893);const oe=230,ne=(0,u().vU)({embedButtonText:{defaultMessage:"Embed link",id:"embedBlock.embedButton.label"},askAiText:{defaultMessage:"Ask AI",id:"EmbedBlockActions.AskAI"},embedCaption:{defaultMessage:"Works with links of PDFs, Google Drive, Google Maps, CodePenâ€¦",id:"embedBlock.linkPrompt.caption"},pastePrompt:{defaultMessage:"Paste in https://â€¦",id:"embedBlock.pastePrompt"},validLink:{defaultMessage:"Please enter a valid link.",id:"embedBlock.invalidLinkError.message"},embedTitle:{defaultMessage:"Embed",id:"embedBlock.embedTab.title"},actionComment:{defaultMessage:"Comment",id:"embedBlock.actionButton.tooltip.comment"},actionDownload:{defaultMessage:"Download",id:"embedBlock.actionButton.tooltip.download"},actionOriginal:{defaultMessage:"Original",id:"embedBlock.actionButton.tooltip.original"},actionAlign:{defaultMessage:"Align",id:"embedBlock.actionButton.tooltip.align"},actionCaption:{defaultMessage:"Caption",id:"embedBlock.actionButton.tooltip.caption"},actionExpand:{defaultMessage:"Expand",id:"embedBlock.actionButton.tooltip.expand"},actionMore:{defaultMessage:"More actions",id:"embedBlock.actionButton.tooltip.blockActionMenu"},actionEditImage:{defaultMessage:"Crop image",id:"embedBlock.actionButton.tooltip.cropImage"},actionViewAltText:{defaultMessage:"Click to view alt text",id:"embedBlock.actionButton.tooltip.viewAltText"},actionEditAltText:{defaultMessage:"Click to view and edit alt text",id:"embedBlock.actionButton.tooltip.editAltText"},actionOpenInBrowserText:{defaultMessage:"Open in browser",id:"embedBlock.actionButton.tooltip.openInBrowser"}});function ie(e){let{environment:t,visible:o,height:n}=e;return(0,s().yK)((e=>{const{device:r}=t,{isMobile:a}=r;return{wrapper:{position:"absolute",top:4,right:4,borderRadius:4,color:p().ZP.white,fill:p().ZP.white,fontSize:11.5,background:(0,ee().M1)(t),display:"flex",whiteSpace:"nowrap",alignItems:"center",height:n||26,maxWidth:"calc(100% - 16px)",overflow:"hidden",pointerEvents:o||a?"auto":"none",opacity:o||a?1:0,transition:r.isSafari?void 0:ee().P9,fontFamily:m().F5(i().locale).sans,zIndex:2}}}),[o,t,n]).wrapper}function re(e){const t=(0,r().O7)(),{device:i}=t,m=(0,r().MO)(),_=(0,u().YB)(),{store:w,blockLocation:D,mediaType:U,source:F,blockResizerStore:$,fileUploadState:re,isStoreNavigableAncestorNonEditableState:de,embedBlockStore:ue,alignmentPopupStore:pe,canEdit:me,dimensions:fe}=e,{hasEditPermission:ge,hasCommentPermission:ve,isExternalObjectInstanceBlockStore:he,blockType:_e,originalImageSourceFromStore:be,pathIsDead:ye}=(0,a().VK)((()=>({hasEditPermission:w.canEdit(),hasCommentPermission:w.canComment(),isExternalObjectInstanceBlockStore:w.isExternalObjectInstanceBlockStore(),blockType:w.getType(),originalImageSourceFromStore:w.getOriginalImageSource(),pathIsDead:w.pathIsDead(),imageHyperlink:w.getImageHyperlink()})),[w]),{block_alignment:Se}=(0,a().VK)((()=>w.getFormat()),[w]),{isFullWidth:we,width:ke,isPageWidth:Ie}=fe,Ce=he,xe=(0,a().VK)((()=>function(e,t,o,n){var i;return function(e,t,o){if(t)return ee().c2.image;if(e){if(e.startsWith("data:")||e.startsWith("<img"))return;const t=(0,c().Dz)({url:e,baseUrl:P().default.domainBaseUrl,publicDomainName:P().default.publicDomainName,preferredType:o});if("embed"!==t)return ee().c2[t]}if(o&&e)return ee().c2[o];return X().Z}(e,null==n?void 0:n.dataURL,t??(null===(i=o)||void 0===i?void 0:i.getType()))}(F,U,w,re)),[re,U,F,w]),Te=(0,a().VK)((()=>function(e,t){const{block_width:o}=e.getFormat(),{temporaryWidth:n}=t.state;if(void 0!==n)return n<=oe;if(void 0!==o)return o<=oe;return!1}(w,$)),[$,w]),Me=(0,a().VK)((()=>G().Z.getStatus(w.id)),[w.id]),Pe=(0,a().VK)((()=>$.getState().dragging),[$]),Ae=h().qC(D),Re=!i.isMobile&&!Ae&&!Ce,Be=ke&&!Ie&&!we&&!m&&!Ae,Ee=!i.isMobile&&((null==xe?void 0:xe.renderFullScreen)&&Ce||"image"===_e),De=(0,B().E)("image_cropping"),Ue=(0,a().VK)((()=>M().default.state.open&&"comment"===M().default.state.content?M().default.state.discussionInputStore:null),[]),Fe=(0,a().VK)((()=>M().default.state.open&&"comment"===M().default.state.content&&M().default.state.blockId===w.id),[w.id]),Ne=(0,a().VK)((()=>R().Xp(w,{recursivelyLoadAllDiscussions:!1})),[w]),{focused:Ve,hovered:Le}=(0,a().Kw)(ue),Oe=(0,a().VK)((()=>T().Z),[]),Ze=(0,a().VK)((()=>W().Z),[]),je=(0,a().VK)((()=>w.isRootOrDirectChild()),[w]),[{value:Ke}]=(0,d().r5)((async()=>{const e=await Promise.resolve().then(o.bind(o,650996));return(await e.assistantDependency.load()).assistantActions}),[]),ze=(0,n.useCallback)((()=>Se||(je?"center":"left")),[je,Se]),He=ie({environment:t,visible:Ve||Le}),qe=(0,a().VK)((()=>q().KR.shouldShowAttachmentImageButton()),[]),We=(0,s().yK)((e=>({commentButton:{position:"relative",...ee().ar,...i.isMobile&&{paddingLeft:8,paddingRight:8}}})),[i.isMobile]);if(re&&"uploading"!==Me)return null;if(Pe||xe&&xe.hideActions)return null;{let e=Ne;if(Fe&&(e+=1),"image"!==_e||!de&&me){if(de)return(0,te.jsx)("div",{style:He,children:(0,te.jsx)(Q().Z,{style:ee().ar,hoveredStyle:ee().V1,onClick:()=>ae(w,t),children:(0,te.jsx)(u()._H,{defaultMessage:"View original",id:"embedBlock.viewOriginalLink.button.label"})})});if(Te)return(0,te.jsx)("div",{style:He,children:(0,te.jsx)(se,{blockLocation:D,store:w})});{const o=300,n=H().Placement.Top;let r,a;"image"===_e&&(a=be);const s=De&&!i.isMobile&&!Ae&&"image"===_e&&ge&&a&&(0,z().fA)(a)&&!ye,c=fe.blockWidth??fe.width,d=!Ae&&"image"===_e&&a&&!ye&&!i.isMobile&&qe&&c&&c>300;if(_e&&(0,l().VB)(_e))r=(0,te.jsx)(J().Z,{renderTooltip:()=>_.formatMessage(ne.actionDownload),placement:n,delayThreshold:o,render:e=>(0,te.jsx)(Q().Z,{...e,ariaLabel:_.formatMessage(ne.actionDownload),style:ee().ar,hoveredStyle:ee().V1,onClick:()=>function(e,t){const o=e;if(o){h().TH({environment:t,store:o});const n=o.getType();n&&f().Fn(t,{type:"download",block_type:n,block_id:e.id})}}(w,t),children:(0,O().a)({width:14,height:14,marginRight:0,fill:p().ZP.white})})});else{const e=i.isElectron?ne.actionOpenInBrowserText:ne.actionOriginal;r=(0,te.jsx)(J().Z,{renderTooltip:()=>_.formatMessage(e),placement:n,delayThreshold:o,render:o=>(0,te.jsx)(Q().Z,{...o,ariaLabel:_.formatMessage(e),style:ee().ar,hoveredStyle:ee().V1,onClick:()=>ae(w,t),children:(0,E().J)({width:14,height:14,marginRight:0,fill:p().ZP.white})})})}return(0,te.jsxs)("div",{style:He,children:[d&&Ke&&(0,te.jsx)(Q().Z,{ariaLabel:_.formatMessage(ne.askAiText),style:ee().ar,hoveredStyle:ee().V1,onClick:e=>{a&&(Ke.initializeSessionFromAttachmentBlockSelection({environment:t,selectedAttachmentStore:w}),e.preventDefault(),e.stopPropagation())},children:(0,te.jsx)(k().l,{})}),!Ae&&!Ce&&ve&&(0,te.jsx)(J().Z,{renderTooltip:()=>_.formatMessage(ne.actionComment),placement:n,delayThreshold:o,render:o=>(0,te.jsxs)(Q().Z,{...o,ariaLabel:_.formatMessage(ne.actionComment),style:We.commentButton,hoveredStyle:ee().V1,onClick:()=>{y().ZH({environment:t}),e>0?Fe&&Ue?(Oe.setActiveWithSource("text_annotation"),(0,I().l)({discussionInputStore:Ue,environment:t})):v().Ib({environment:t,blockStore:w,analyticsFrom:"embed_menu",shouldFocusDiscussion:!0,recursivelyLoadAllDiscussions:!1}):(0,C().y)({environment:t,blockStore:w})},children:[(0,K().s)({width:14,height:14,marginRight:e>0?4:0,fill:p().ZP.white}),Fe&&(0,te.jsx)(x().Z,{onlyShowDraftDot:!0,customTop:4,customLeft:15,withBackgroundFill:!0}),e>0&&e]})}),ge&&Be&&(0,te.jsx)(J().Z,{renderTooltip:()=>_.formatMessage(ne.actionAlign),placement:n,delayThreshold:o,render:e=>(0,te.jsx)(Y().ZP,{popupType:Y().Z4.Popup,buttonPopupStore:pe,originGap:1,renderOrigin:t=>(0,te.jsxs)(Q().Z,{ariaLabel:_.formatMessage(ne.actionAlign),style:ee().ar,hoveredStyle:ee().V1,...(0,A().Z)(t,e),children:[le(ze()),(0,V().i)({width:8,fill:p().ZP.white,marginLeft:4})]}),borderRadius:6,render:e=>(0,te.jsx)(ce,{store:w,alignmentPopupStore:pe,buttonPopupParent:e}),popupWrapStyle:{background:(0,ee().M1)(t),display:"flex"}})}),ge&&Re&&(0,te.jsx)(J().Z,{renderTooltip:()=>_.formatMessage(ne.actionCaption),placement:n,delayThreshold:o,render:e=>(0,te.jsx)(Q().Z,{...e,ariaLabel:_.formatMessage(ne.actionCaption),style:ee().ar,hoveredStyle:ee().V1,onClick:()=>function(e,t){const o=e.getPropertyStore("caption");y().eP({environment:t,store:e}),S().setSelectionAtEnd({store:o});const n=e.getType();n&&f().Fn(t,{type:"caption",block_type:n,block_id:e.id})}(w,t),children:(0,N().o)({width:14,height:14,marginRight:0,fill:p().ZP.white})})}),s&&(0,te.jsx)(J().Z,{renderTooltip:()=>_.formatMessage(ne.actionEditImage),placement:n,render:e=>(0,te.jsx)(Q().Z,{...e,ariaLabel:_.formatMessage(ne.actionEditImage),style:ee().ar,hoveredStyle:ee().V1,onClick:()=>{a&&(b().DQ(t,[]),Ze.openModal({blockStore:w,originalSource:a}),g().Z(t,{from:"tooltip"}))},children:(0,L().s)({width:14,height:14,marginRight:0,fill:p().ZP.white})})}),Ee&&(0,te.jsx)(J().Z,{renderTooltip:()=>_.formatMessage(ne.actionExpand),placement:n,delayThreshold:o,render:e=>(0,te.jsx)(Q().Z,{...e,ariaLabel:_.formatMessage(ne.actionExpand),style:ee().ar,hoveredStyle:ee().V1,onClick:()=>function(e,t,o){b().dK({blocks:[e],blockLocationOfTargetBlock:t});const n=e.getType();n&&f().Fn(o,{type:"full_screen",block_type:n,block_id:e.id})}(w,D,t),children:"image"===_e?(0,j().v)({width:14,height:14,marginRight:0,fill:p().ZP.white}):(0,Z().s)({width:14,height:14,marginRight:0,fill:p().ZP.white})})}),!i.isMobile&&r,(0,te.jsx)(se,{blockLocation:D,store:w})]})}}return(0,te.jsx)("div",{style:He,children:(0,te.jsx)(se,{blockLocation:D,store:w})})}}function ae(e,t){const o=e;if(o){h().qL(t,{store:o,from:"view_original"});const n=o.getType();n&&f().Fn(t,{type:"original",block_type:n,block_id:e.id})}}function se(e){let{isPlaceholder:t,blockLocation:o,store:n}=e;const i=(0,u().YB)(),r=h().qC(o),a=r?"comment_media":"default";return(0,te.jsx)($().Z,{store:n,fadeIn:!1,iconStyle:t?void 0:{fill:p().ZP.white},actionSectionGroupKey:a,hideFilterActionsInput:r,hoveredStyle:ee().V1,tooltipContent:i.formatMessage(ne.actionMore)})}function le(e){const t={left:U().$,center:D().L,right:F().g},o={width:14,height:14,marginRight:0,fill:p().ZP.white};return t[e](o)}function ce(e){const{store:t,alignmentPopupStore:o}=e,i=(0,r().O7)(),s=(0,a().VK)((()=>t.getFormat()),[t]),l=(0,a().VK)((()=>t.isRootOrDirectChild()),[t]),c=(0,n.useCallback)((()=>{const{block_alignment:e}=s;return e||(l?"center":"left")}),[s,l]),d=(0,n.useCallback)((e=>{let t=.6;return c()===e&&(t=1),{width:26,height:26,opacity:t}}),[c]);return(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(Q().Z,{style:{...ee().ar,...d("left"),borderRight:"none"},hoveredStyle:{...ee().V1,opacity:1},onClick:()=>de("left",i,t,o),children:le("left")}),(0,te.jsx)("span",{style:{borderRight:`1px solid ${p().ZP.whiteWithAlpha(.2)}`}}),(0,te.jsx)(Q().Z,{style:{...ee().ar,...d("center"),borderRight:"none"},hoveredStyle:{...ee().V1,opacity:1},onClick:()=>de("center",i,t,o),children:le("center")}),(0,te.jsx)("span",{style:{borderRight:`1px solid ${p().ZP.whiteWithAlpha(.2)}`}}),(0,te.jsx)(Q().Z,{style:{...ee().ar,...d("right"),borderRight:"none"},hoveredStyle:{...ee().V1,opacity:1},onClick:()=>de("right",i,t,o),children:le("right")})]})}function de(e,t,o,n){const i=o;n.reset(),i&&w().createAndCommit({userAction:"EmbedBlock.handleAlignment",environment:t,canUndo:!0,perform:o=>{_().hc({environment:t,store:i,alignment:e,transaction:o})}});const r=o.getType(),a=o.getFormat(),s=a.block_alignment,l=a.block_width,c=a.block_height,d=o.isRootOrDirectChild()?"center":"left";r&&f().Fn(t,{type:"alignment",block_type:r,block_id:o.id,block_alignment:e,block_height:c,block_width:l,previous_alignment:s,default_alignment:d}),y().Jy()}},942578:(e,t,o)=>{o.d(t,{Z:()=>m});var n=o(667294),i=()=>o(219727),r=()=>o(142735),a=()=>o(661727),s=()=>o(568017),l=o(785893);const c=(0,o(827282).IU)("cornerResize",{viewBox:"0 0 16 16",svg:(0,l.jsx)("path",{fillRule:"evenodd",strokeWidth:"1.5",d:"M 14 0C 12.8955 0 12 0.895447 12 2L 12 12L 2 12C 0.895508 12 0 12.8954 0 14C 0 15.1046 0.895508 16 2 16L 14 16C 15.1045 16 16 15.1046 16 14L 16 2C 16 0.895447 15.1045 0 14 0Z"})});var d=()=>o(803820),u=()=>o(70320),p=()=>o(904912);function m(e){let{store:t,resizerType:o,resizerAlignment:m,resizeComponent:h,preserveScale:_,isHovered:b,blockResizerStore:y}=e;const S=(0,i().O7)(),w=(0,i().Fy)(),k=(0,r().qz)(y,d().Z),I=(0,r().VK)((()=>!w.isMobile&&b),[w.isMobile,b]),C=(0,r().VK)((()=>{const e={position:"absolute",pointerEvents:I?"auto":"none",display:"flex",alignItems:"center",justifyContent:"center"};return m===u().bZ.Right?e.right=0:m===u().bZ.Left&&(e.left=0),o===u().IS.Horizontal?(e.top=0,e.zIndex=1,e.height="100%",e.width=f,e.cursor="col-resize"):o===u().IS.Vertical?(e.bottom=0,e.zIndex=1,e.width="100%",e.height=f,e.cursor="row-resize"):o===u().IS.Corner&&(e.zIndex=2,e.bottom=0,e.width=e.height=v,m===u().bZ.Left?e.cursor="nesw-resize":m===u().bZ.Right&&(e.cursor="nwse-resize")),e}),[m,o,I]),x=(0,n.useMemo)((()=>{const e={position:"absolute"};return o===u().IS.Vertical||o===u().IS.Corner?e.bottom=g:o===u().IS.Horizontal&&(e.top=g),m===u().bZ.Left?e.left=g:m===u().bZ.Right&&(e.right=g),{...C,style:e}}),[m,C,o]),T=(0,r().VK)((()=>{const{ThemeStore:e}=S,t=e.state.mode,n={opacity:I?1:0,transition:p().P9,borderRadius:20,background:(0,a().Fq)(s().se[t].black,.6),border:`1px solid ${s().ZP.whiteWithAlpha(.9)}`};return o===u().IS.Horizontal?(n.width=6,n.height=48,n.maxHeight="50%"):o===u().IS.Vertical&&(n.height=6,n.width=48,n.maxWidth="50%"),n}),[S,o,I]),M=(0,n.useMemo)((()=>o===u().IS.Corner?c({stroke:s().ZP.whiteWithAlpha(.5),fill:s().ZP.blackWithAlpha(.65),width:v,height:v,transition:`opacity ${p().P9}`,opacity:I?1:0,position:"relative",bottom:3,left:m===u().bZ.Left?3:-3,transform:m===u().bZ.Left?"rotate(90deg)":"none"}):(0,l.jsx)("div",{style:T})),[m,T,o,I]),P=(0,n.useMemo)((()=>({getNode:()=>h.current})),[h]);return(0,l.jsx)(u().ZP,{store:t,preserveScale:_,resizerType:o,resizerAlignment:m,resizeComponent:P,blockResizerStore:k,resizeHorizontally:!0,resizeVertically:!0,disabled:!1,children:(0,l.jsx)("div",{style:x,children:M})})}const f=15,g=0,v=20},175756:(e,t,o)=>{o.d(t,{ZP:()=>I,cT:()=>b,K9:()=>y});var n=o(667294),i=()=>o(225339),r=()=>o(788860),a=()=>o(696459),s=()=>o(916673),l=()=>o(205228),c=()=>o(709344),d=()=>o(148126),u=()=>o(764153),p=()=>o(827282),m=o(785893);const f=(0,p().IU)("imageError",{viewBox:"0 0 32 32",svg:(0,m.jsxs)(n.Fragment,{children:[(0,m.jsx)("path",{d:"M6.39515 31.0485c3.44161 0 6.29115-2.8495 6.29115-6.2911 0-3.4355-2.8557-6.2912-6.29732-6.2912-3.43544 0-6.28495 2.8557-6.28495 6.2912 0 3.4416 2.85568 6.2911 6.29112 6.2911zm-.00617-5.366c-.32689 0-.50575-.1912-.51809-.5181l-.08635-3.0468c-.01233-.3393.24671-.5798.59828-.5798.34539 0 .61677.2467.60444.5859l-.09252 3.0407c-.01233.3331-.1912.5181-.50576.5181zm0 2.2698c-.35773 0-.69078-.2838-.69078-.6662s.32689-.6661.69078-.6661c.3639 0 .69079.2776.69079.6661 0 .3886-.33305.6662-.69079.6662z"}),(0,m.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 17.5539V3h26v26H12.6862c.4113-.6095.7364-1.282.9578-2H28v-4H13.7749c-.1687-.7106-.4373-1.3825-.7902-2H28V5H6v12.1798c-.69548.0352-1.36626.164-2 .3741zM11.3329 19c-.6875-.5905-1.48192-1.0601-2.35027-1.3757L13 12l2 1 5-5 6 11H11.3329zM12 9c0 1.104-.896 2-2 2s-2-.896-2-2 .896-2 2-2 2 .896 2 2zm3.395 6.434l-1.76-.881L11.887 17h10.744l-3.107-5.695-4.129 4.129z"})]})});var g=()=>o(824308);const v=(0,p().IU)("playbackError",{viewBox:"0 0 32 32",svg:(0,m.jsxs)(n.Fragment,{children:[(0,m.jsx)("path",{d:"M6.39515 29.0485c3.44161 0 6.29115-2.8495 6.29115-6.2911 0-3.4355-2.8557-6.2912-6.29732-6.2912-3.43544 0-6.28495 2.8557-6.28495 6.2912 0 3.4416 2.85568 6.2911 6.29112 6.2911zm-.00617-5.366c-.32689 0-.50575-.1912-.51809-.5181l-.08635-3.0468c-.01233-.3393.24671-.5798.59828-.5798.34539 0 .61677.2467.60444.5859l-.09252 3.0407c-.01233.3331-.1912.5181-.50576.5181zm0 2.2698c-.35773 0-.69078-.2838-.69078-.6662s.32689-.6661.69078-.6661c.3639 0 .69079.2776.69079.6661 0 .3886-.33306.6662-.69079.6662z"}),(0,m.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M29.1373 16.1987c0 6.7017-5.542 12.2437-12.2436 12.2437-1.622 0-3.1761-.3246-4.6001-.9118.3323-.4107.6226-.8567.8644-1.3316 1.1612.4325 2.4197.6687 3.7357.6687 5.9082 0 10.6689-4.7608 10.6689-10.669-.0122-5.9082-4.7729-10.65671-10.6812-10.65671-5.5497 0-10.08288 4.20726-10.5961 9.62871-.55173.0075-1.08925.0738-1.60656.193.4362-6.32082 5.78156-11.40862 12.20266-11.40862 6.7139 0 12.2559 5.54199 12.2559 12.24362zm-15.4585 4.4372a7.628 7.628 0 00-.0797-.2566.65573.65573 0 01-.0013-.0424v-8.2764c0-.5004.5859-.7202 1.0498-.4516l6.7016 4.0161c.4395.2686.4517.8911 0 1.1597l-6.7016 3.9917c-.3763.2257-.796.1398-.9688-.1405z"})]})});var h=()=>o(67961);function _(e,t){switch(e){case"image":return f;case"pdf":return"document_locked"===t?g().I:u().l;case"audio":case"video":return v;default:return u().l}}function b(e,t){if(e&&e instanceof c().G){let o=t||e.data.url;return s().j3(o)&&(o=s().O_({relativeUrl:o,baseUrl:l().default.domainBaseUrl})),e.data.offline?s().j3(e.data.url)||e.data.url.startsWith(l().default.domainBaseUrl)?{type:"offline"}:{type:"unknown",source:o}:{type:"http",source:o,statusCode:e.data.status}}}function y(e,t){const o=e.error,n=t||e.src;if(o)return o.code===o.MEDIA_ERR_DECODE||o.code===o.MEDIA_ERR_SRC_NOT_SUPPORTED?{type:"unsupported_content_type",extension:n&&(0,i().mD)(n)}:o.code===o.MEDIA_ERR_NETWORK?{type:"offline"}:void 0}function S(){return(0,m.jsx)(r()._H,{id:"embedError.extension.unknown",defaultMessage:"unknown"})}function w(e){const{source:t,statusCode:o}=e,n=s().Qc(t).hostname;return(0,m.jsx)(r()._H,{defaultMessage:"{hostname} (Error {statusCode})",id:"embedError.hostnameAndStatusCode",values:{hostname:n,statusCode:o}})}function k(e){switch(e){case"audio":return(0,d().UY)("guides.audioFaqs");case"video":return(0,d().UY)("guides.videosFaqs");case"image":return(0,d().UY)("guides.imagesFaqs");default:return(0,d().UY)("guides.embedsFaqs")}}const I=function(e){let{style:t,error:i,family:l,isSmall:c,onClickLink:d}=e;const u=(0,o(846550).Fg)(),p=(0,o(219727).O7)(),f={background:u.embedPlaceholderBackground,cursor:"default",...t||{},position:"absolute",top:0,bottom:0,left:0,right:0,display:"flex",alignContent:"center",alignItems:"center",justifyContent:c?"flex-start":"center",padding:c?"7px 14px":"0.5em 1em",textAlign:"center",flexDirection:c?"row":"column",overflow:"hidden"},g=c?25:48,v=c?"0px 14px 0 0":"0 0 14px 0",b=function(e,t){return"image"===t?"unsupported_content_type"===e.type?(0,m.jsx)(r()._H,{defaultMessage:"This image format ({extension}) can't be played on this device.",id:"embedError.image.unsupportedContentType",values:{extension:e.extension||S()}}):"offline"===e.type?(0,m.jsx)(r()._H,{defaultMessage:"Go online to view this image",id:"embedError.image.offline"}):"unknown"===e.type||"invalid_protocol"===e.type||"invalid_url"===e.type||"document_locked"===e.type?(0,m.jsx)(r()._H,{defaultMessage:"This image couldn't be loaded.",id:"embedError.image.unknown"}):404===e.statusCode?(0,m.jsx)(r()._H,{defaultMessage:"This image couldn't be found.",id:"embedError.image.notFound"}):401===e.statusCode||403===e.statusCode?(0,m.jsx)(r()._H,{id:"embedError.image.permissionDenied",defaultMessage:"Permission denied."}):413===e.statusCode?(0,m.jsx)(r()._H,{id:"embedError.image.imageTooBig",defaultMessage:"Image too big to display."}):(0,m.jsx)(r()._H,{defaultMessage:"This image couldn't be loaded.",id:"embedError.image.serverError"}):"audio"===t?"unsupported_content_type"===e.type?(0,m.jsx)(r()._H,{defaultMessage:"This audio format ({extension}) can't be played on this device.",id:"embedError.audio.unsupportedContentType",values:{extension:e.extension||S()}}):"offline"===e.type?(0,m.jsx)(r()._H,{defaultMessage:"Go online to view this audio",id:"embedError.audio.offline"}):"unknown"===e.type||"invalid_protocol"===e.type||"invalid_url"===e.type||"document_locked"===e.type?(0,m.jsx)(r()._H,{defaultMessage:"This audio couldn't be loaded.",id:"embedError.audio.unknown"}):404===e.statusCode?(0,m.jsx)(r()._H,{defaultMessage:"This audio couldn't be found.",id:"embedError.audio.notFound"}):401===e.statusCode||403===e.statusCode?(0,m.jsx)(r()._H,{id:"embedError.audio.permissionDenied",defaultMessage:"Permission denied."}):(0,m.jsx)(r()._H,{defaultMessage:"This audio couldn't be loaded.",id:"embedError.audio.serverError"}):"video"===t?"unsupported_content_type"===e.type?(0,m.jsx)(r()._H,{defaultMessage:"This video format ({extension}) can't be played on this device.",id:"embedError.video.unsupportedContentType",values:{extension:e.extension||S()}}):"offline"===e.type?(0,m.jsx)(r()._H,{defaultMessage:"Go online to view this video",id:"embedError.video.offline"}):"unknown"===e.type||"invalid_protocol"===e.type||"invalid_url"===e.type||"document_locked"===e.type?(0,m.jsx)(r()._H,{defaultMessage:"This video couldn't be loaded.",id:"embedError.video.unknown"}):404===e.statusCode?(0,m.jsx)(r()._H,{defaultMessage:"This video couldn't be found.",id:"embedError.video.notFound"}):401===e.statusCode||403===e.statusCode?(0,m.jsx)(r()._H,{id:"embedError.video.permissionDenied",defaultMessage:"Permission denied."}):(0,m.jsx)(r()._H,{defaultMessage:"This video couldn't be loaded.",id:"embedError.video.serverError"}):"file"===t?"unsupported_content_type"===e.type?(0,m.jsx)(r()._H,{defaultMessage:"This file format ({extension}) can't be played on this device.",id:"embedError.file.unsupportedContentType",values:{extension:e.extension||S()}}):"offline"===e.type?(0,m.jsx)(r()._H,{defaultMessage:"Go online to view this file",id:"embedError.file.offline"}):"unknown"===e.type||"invalid_protocol"===e.type||"invalid_url"===e.type||"document_locked"===e.type?(0,m.jsx)(r()._H,{defaultMessage:"This file couldn't be loaded.",id:"embedError.file.unknown"}):404===e.statusCode?(0,m.jsx)(r()._H,{defaultMessage:"This file couldn't be found.",id:"embedError.file.notFound"}):401===e.statusCode||403===e.statusCode?(0,m.jsx)(r()._H,{id:"embedError.file.permissionDenied",defaultMessage:"Permission denied."}):(0,m.jsx)(r()._H,{defaultMessage:"This file couldn't be loaded.",id:"embedError.file.serverError"}):"embed"===t?"unsupported_content_type"===e.type?(0,m.jsx)(r()._H,{defaultMessage:"This embed format ({extension}) can't be played on this device.",id:"embedError.embed.unsupportedContentType",values:{extension:e.extension||S()}}):"offline"===e.type?(0,m.jsx)(r()._H,{defaultMessage:"Go online to view this embed",id:"embedError.embed.offline"}):"unknown"===e.type||"invalid_protocol"===e.type||"invalid_url"===e.type||"document_locked"===e.type?(0,m.jsx)(r()._H,{defaultMessage:"This embed couldn't be loaded.",id:"embedError.embed.unknown"}):404===e.statusCode?(0,m.jsx)(r()._H,{defaultMessage:"This embed couldn't be found.",id:"embedError.embed.notFound"}):401===e.statusCode||403===e.statusCode?(0,m.jsx)(r()._H,{id:"embedError.embed.permissionDenied",defaultMessage:"Permission denied."}):(0,m.jsx)(r()._H,{defaultMessage:"This embed couldn't be loaded.",id:"embedError.embed.serverError"}):"pdf"===t?"document_locked"===e.type?(0,m.jsx)(r()._H,{defaultMessage:"This PDF is locked",id:"embedError.pdf.locked"}):(0,m.jsx)(r()._H,{defaultMessage:"This embed couldn't be loaded.",id:"embedError.embed.unknown"}):void(0,a().t1)(t)}(i,l);return(0,n.useEffect)((()=>{o(351972).QU(p,{embedType:l,embedErrorType:i.type})}),[p,i.type,l]),(0,m.jsxs)("div",{style:f,children:[_(l,i.type)({fill:u.lightTextColor,width:g,height:g,margin:v}),(0,m.jsxs)(h().Z,{isSecondaryColor:!0,isMultiline:!c,style:{margin:v},children:[(0,m.jsx)("div",{style:{display:c?"inline-block":"block",marginRight:c?"14px":void 0},children:b}),"offline"!==i.type&&(0,m.jsx)(o(108714).Z,{style:{display:"inline",pointerEvents:"auto",cursor:"auto",borderBottom:`1px solid ${u.lightTextColor}`},href:"document_locked"===i.type?void 0:k(l),external:!0,onClick:()=>{o(407391).Fs(p,{from:"embed_error"}),null==d||d()},children:"document_locked"===i.type?(0,m.jsx)(r()._H,{defaultMessage:"Unlock Document",id:"embedError.unlock"}):(0,m.jsx)(r()._H,{defaultMessage:"Learn more",id:"embedError.learnMore"})})]}),!c&&"http"===i.type&&(0,m.jsx)(h().Z,{isSmall:!0,isSecondaryColor:!0,children:w(i)}),!c&&"unknown"===i.type&&i.source&&(0,m.jsx)(h().Z,{isSmall:!0,isSecondaryColor:!0,children:s().Qc(i.source).hostname})]})}},995047:(e,t,o)=>{o.d(t,{Z:()=>u});o(667294);var n=()=>o(846550),i=()=>o(707513),r=()=>o(874018),a=()=>o(677559),s=()=>o(312578),l=()=>o(410184),c=()=>o(856695),d=o(785893);const u=function(e){let{isLoading:t,file:i,name:r,size:a,progressPercent:s,style:l,iconSvg:u,onClick:m,disabled:f,right:g,shouldHideRight:v,isInComment:h,children:_}=e;const b=(0,n().yK)((e=>({container:{background:e.embedPlaceholderBackground,width:"100%",borderRadius:4},hoveredStyle:h?{background:e.surface.wash}:{}})),[h]);return t?(0,d.jsx)(p,{file:i,name:r,size:a,progressPercent:s,style:l,iconSvg:u,isInComment:h}):(0,d.jsx)("div",{style:b.container,children:(0,d.jsx)(o(154186).Z,{onClick:m,disabled:f,hoveredStyle:b.hoveredStyle,children:(0,d.jsx)(c().ZP,{style:{background:void 0,...l},iconSvg:u,right:g,shouldHideRight:v,isInComment:h,children:_})})})};function p(e){let{file:t,name:o,size:u,progressPercent:p,style:m,iconSvg:f,isInComment:g}=e;const v=(0,n().Fg)(),{value:h}=(0,a().XJ)(r().commentsDependency);let _;if(t){if(!h)return null;const e=h.discussionHelpers.formatFileSize(u);_=(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{style:g?{fontWeight:i().Ue.medium,color:v.text.primary,fontSize:14,lineHeight:"18px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}:{},children:o}),(0,d.jsx)("div",{style:g?{fontSize:12,lineHeight:"15px"}:c().Lw,children:(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",...g?{gap:4}:{}},children:[(0,d.jsx)("div",{style:g?{color:v.text.secondary}:{},children:e}),(0,d.jsx)("div",{style:g?{color:v.text.tertiary}:{marginLeft:3},children:g?"â€”":" â€“ "}),(0,d.jsx)(s().Z,{style:g?{}:{marginLeft:3,marginRight:3}}),(0,d.jsx)(l().Z,{style:g?{color:v.text.tertiary}:{},percentage:p})]})})]},"FileLoadingSpinner")}else _=(0,d.jsx)("div",{children:(0,d.jsx)(s().Z,{style:{marginLeft:3,marginRight:3}})},"LoadingSpinner");return(0,d.jsx)(c().ZP,{style:{...m,...g?{borderRadius:12,background:v.surface.wash}:{}},iconSvg:f,isInComment:g,children:_})}},63562:(e,t,o)=>{o.d(t,{BB:()=>c,BZ:()=>s,LS:()=>d,f:()=>u,ny:()=>r,uI:()=>l});var n=()=>o(677559);const i={PostImportIntroPopup:new(n().Ss)("PostImportInfoPopup",(async()=>await Promise.all([o.e(52774),o.e(10074)]).then(o.bind(o,979675))))},r=(0,n().kF)(i.PostImportIntroPopup,(e=>e.PostImportIntroPopup)),a={AllProjectsTooltip:new(n().Ss)("AllProjectsTooltip",(async()=>await Promise.all([o.e(62743),o.e(52774),o.e(92199)]).then(o.bind(o,948092)))),ProjectCustomizationTooltip:new(n().Ss)("ProjectCustomizationTooltip",(async()=>await Promise.all([o.e(62743),o.e(52774),o.e(92199)]).then(o.bind(o,948092)))),NavigateToProjectTasksTooltip:new(n().Ss)("NavigateToProjectTasksTooltip",(async()=>await Promise.all([o.e(62743),o.e(52774),o.e(92199)]).then(o.bind(o,948092)))),TasksDatabaseViewsTooltip:new(n().Ss)("TasksDatabaseViewsTooltip",(async()=>await Promise.all([o.e(62743),o.e(52774),o.e(92199)]).then(o.bind(o,948092)))),YourCurrentTeamspaceTooltip:new(n().Ss)("YourCurrentTeamspaceTooltip",(async()=>await Promise.all([o.e(62743),o.e(52774),o.e(92199)]).then(o.bind(o,948092))))},s=(0,n().kF)(a.AllProjectsTooltip,(e=>e.AllProjectsTooltip)),l=(0,n().kF)(a.ProjectCustomizationTooltip,(e=>e.ProjectCustomizationTooltip)),c=(0,n().kF)(a.NavigateToProjectTasksTooltip,(e=>e.NavigateToProjectTasksTooltip)),d=(0,n().kF)(a.TasksDatabaseViewsTooltip,(e=>e.TasksDatabaseViewsTooltip)),u=(0,n().kF)(a.YourCurrentTeamspaceTooltip,(e=>e.YourCurrentTeamspaceTooltip))},251932:(e,t,o)=>{o.d(t,{Ht:()=>d,Vg:()=>u,gq:()=>c,xk:()=>s});var n=o(667294),i=()=>o(826955),r=o(785893);function a(e){const{style:t,row:o,column:n,reverse:i,inline:r,...a}=e,s={display:r?"inline-flex":"flex"};return n?s.flexDirection=i?"column-reverse":"column":o?s.flexDirection=i?"row-reverse":"row":i&&(s.flexDirection="row-reverse"),Object.assign(s,a,t)}function s(){return a({...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},row:!0})}function l(){return a({...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},column:!0})}const c=n.forwardRef((function(e,t){const{children:o,className:n,...i}=e;return(0,r.jsx)("div",{className:n,style:s(i),ref:t,children:o})})),d=n.forwardRef((function(e,t){const{children:o,className:n,...i}=e;return(0,r.jsx)("div",{className:n,style:l(i),ref:t,children:o})}));function u(e){let{environment:t,pageBlockStore:o,pathToBlockId:n}=e;const r=new(i().ST)({environment:t,pointer:o.pointer,path:n}).getValue();return new(i().G)(t,{table:"block",spaceId:o.getSpaceId(),id:r})}},628965:(e,t,o)=>{o.d(t,{_Y:()=>i,mD:()=>n,rp:()=>r});const n=275,i=90,r=90},824940:(e,t,o)=>{o.d(t,{Z:()=>I});var n=o(667294),i=()=>o(219727),r=()=>o(142735),a=()=>o(846550),s=()=>o(494488),l=()=>o(788860),c=()=>o(94912),d=()=>o(269299),u=()=>o(856546),p=()=>o(465371),m=()=>o(540896),f=()=>o(445264),g=()=>o(802911),v=()=>o(154186),h=()=>o(690122),_=()=>o(98275),b=()=>o(627990),y=()=>o(952628),S=()=>o(167705),w=()=>o(580548),k=o(785893);function I(e){const t=(0,i().O7)(),o=(0,a().Fg)(),I=(0,n.useRef)(!0);(0,n.useLayoutEffect)((()=>{I.current&&(I.current=!1,c().nz({blockId:e.store.id,currentUserId:t.currentUser.id}),c().LO(t,e.store))}));const C=(0,r().VK)((()=>e.store.getContentStore()),[e.store]),x=(0,r().VK)((()=>f().Z.isOpen(e.store.id)&&!e.hideContent),[e.hideContent,e.store.id]),T=(0,r().VK)((()=>!e.store.hasContent()),[e.store]),M=(0,n.useId)(),P=(0,n.useId)(),A=(0,r().VK)((()=>u().b(e.store)||!e.store.isDefaultRecordCache()),[e.store]),R=(0,r().VK)((()=>e.store.getType()),[e.store]);(0,w().J)({loaded:A,blockType:R,isOpen:x});const B=(0,n.useCallback)((()=>{p().th(t,e.store,e.hideContent)}),[t,e.hideContent,e.store]),E=(0,n.useCallback)((()=>{d().createAndCommit({userAction:"FormatToggleable.handlePlaceholderClick",environment:t,canUndo:!0,perform:o=>{c().ls({environment:t,store:e.store,transaction:o})}})}),[t,e.store]),D=(0,k.jsx)(v().Z,{style:{fontSize:"inherit",width:"100%",borderRadius:4,caretColor:o.lightTextColor,...s().ZD,marginTop:2},onClick:E,disabled:e.disabled,children:(0,k.jsx)("span",{style:{color:o.lightTextColor},children:(0,k.jsx)(l()._H,{defaultMessage:"Empty toggle. Click or drop blocks inside.",id:"toggleBlockFormat.emptyBlock.placeholderText"})})}),U=(0,k.jsx)(S().Z,{"aria-describedby":M,"aria-controls":P,isSidebar:!1,open:x,fill:!T,onClick:B,tapArea:t.device.isMobile?{size:30}:void 0}),F=x?(0,k.jsx)(h().Z,{id:P,loaded:A,spinnerSize:"1em",showSpinnerTimeout:500,innerStyle:(0,y().kA)(),style:(0,y().J9)(),children:(0,k.jsx)(_().Z,{store:C,emptyPlaceholder:D,disabled:e.disabled,disableCommentMenu:e.disableCommentMenu,disableHoverMenu:e.disableHoverMenu,disableDrag:e.disableDrag})}):(0,k.jsx)(_().Z,{store:C,disabled:e.disabled,disableContent:!0}),N=(0,m().O)();return(0,k.jsx)(g().Z,{name:"FormatToggleableHeader",children:(0,k.jsxs)(b().ZP,{style:{paddingLeft:s().ZD.paddingLeft},left:U,leftStyle:{paddingRight:2,...e.toggleStyle},isContentReskinEnabled:N,children:[(0,k.jsx)("div",{id:M,style:e.childrenStyleWhenToggleable,children:e.children}),F]})})}},580548:(e,t,o)=>{o.d(t,{J:()=>a});var n=o(667294),i=()=>o(219727),r=()=>o(620218);function a(e){const{loaded:t,blockType:o,isOpen:a}=e,s=(0,i().O7)(),l=(0,n.useRef)({step:"notMeasured"});(0,n.useEffect)((()=>{if(!0!==a||!1!==t||"notMeasured"!==l.current.step){if(!0===a&&!0===t&&"notMeasured"===l.current.step){const t=performance.now();return e({startTime:t,endTime:t}),void(l.current={step:"complete"})}if(!1!==t||!1!==a||"measuring"!==l.current.step){if(!0===t&&"measuring"===l.current.step)return e({startTime:l.current.loadStartTime}),void(l.current={step:"complete"})}else l.current={step:"complete"}}else l.current={step:"measuring",loadStartTime:performance.now()};function e(e){let{startTime:t,endTime:n}=e;r().default.measure({metricName:"toggle_load",startTime:t,endTime:n},{data:{block_type:o||"unknown"},environment:s})}}),[o,s,t,a])}},259878:(e,t,o)=>{o.d(t,{IX:()=>F,W4:()=>G,ZP:()=>N,qh:()=>Z,dY:()=>q});o(670560),o(267602),o(916054),o(241792);var n=o(667294),i=()=>o(146947),r=()=>o(219727),a=()=>o(142735),s=()=>o(846550),l=()=>o(646574),c=()=>o(989478),d=()=>o(499110),u=()=>o(788860),p=()=>o(568017),m=()=>o(513670),f=()=>o(844085),g=()=>o(632775),v=()=>o(693026),h=()=>o(45909),_=()=>o(758018),b=()=>o(876822),y=()=>o(804217),S=()=>o(725751),w=()=>o(749826),k=()=>o(826955),I=()=>o(428241),C=()=>o(154186),x=()=>o(654133),T=()=>o(67961),M=()=>o(239444),P=()=>o(981583),A=()=>o(635596);const R=function(e){const t=(0,r().O7)(),i=(0,n.useRef)(),a=(0,o(840521).X)(),s=(0,n.useCallback)((async()=>{if(await o(148882).transactionQueue.awaitRecordTransaction(e.blockStore.pointer),!a.current)return;const n=(0,o(183922).pb)(e.blockStore.id);i.current=A().ZP.addListener(n,m().P2((()=>o(853686).Ri(t,{blockStore:e.blockStore,pageVisitStore:e.pageVisitStore,incremental:!0,limit:e.limit})),1e3),void 0,t)}),[t,a,e.blockStore,e.limit,e.pageVisitStore]),l=(0,n.useCallback)((()=>{i.current&&(A().ZP.removeListener(i.current,t),i.current=void 0)}),[t]);return(0,n.useEffect)((()=>(s(),l)),[s,l]),null};var B=o(785893);const E=5,D=25,U=6,F=22;const N=function(e){let{pageVisitStore:t,presenceStore:o,rootStore:n,maxUsers:i}=e;return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(g().at,{rootStore:n}),(0,B.jsx)(G,{rootStore:n,pageVisitStore:t,presenceStore:o,maxUsers:i,isShowingInPostFeed:!1}),(0,B.jsx)(R,{blockStore:n,pageVisitStore:t,limit:1+L(i)+D})]})};function V(e){return m().MR(e,(e=>e.activityTimestampNearestMinuteMs))}function L(e){return e??E}function O(e,t){return k().U6.createChildStore(t,{table:c().KJ,id:e})}function Z(e){const{environment:t,isShowingTabBar:o,isShowingInPostFeed:n}=e;return{...(0,h().X)({noDrag:t.device.isElectron&&!o}),display:"flex",alignItems:"center",position:"relative",flexDirection:"row-reverse",marginLeft:4+U,paddingRight:U,transform:"translateZ(0)",...n&&{maxHeight:54,paddingBottom:12}}}function j(e){return{color:e.mediumInvertedTextColor,fontSize:10,textTransform:"uppercase",letterSpacing:"0.015em"}}function K(e){let{userData:t,isPresent:o,rootStore:n,isShowingInPostFeed:c}=e;const p=(0,s().Fg)(),m=(0,r().O7)(),f=(0,u().YB)(),g=m.currentUser.id,v=(0,a().VK)((()=>O(t.userId,n)),[t,n]),h=(0,a().VK)((()=>v.isDefined()),[v]),_=(0,a().VK)((()=>(0,d().Nz)(f,v.getModel())),[f,v]),b=(0,a().VK)((()=>v.getEmail()),[v]);if(!h)return null;let y;return o?g!==v.id&&(y=t.blockId&&!c?(0,B.jsx)(u()._H,{defaultMessage:"Viewing now. Click to see where they are.",id:"topbar.presenceIndicator.viewingNowWithLocation.tooltip"}):(0,B.jsx)(u()._H,{defaultMessage:"Viewing now",id:"topbar.presenceIndicator.viewingNow.tooltip"})):g!==v.id&&t.activityTimestampNearestMinuteMs&&(y=(0,B.jsx)(u()._H,{defaultMessage:"Last viewed {timeFromNow}",id:"topbar.presenceIndicator.lastViewedTime.tooltip",values:{timeFromNow:(0,l().tv)(Math.min(t.activityTimestampNearestMinuteMs,Date.now()),i().locale)}})),(0,B.jsxs)("div",{children:[(0,B.jsx)("div",{className:"notranslate",children:_}),(0,B.jsx)("div",{style:{fontWeight:400},children:b}),y&&(0,B.jsx)("div",{style:{color:p.mediumInvertedTextColor,minWidth:150,paddingTop:2,paddingBottom:2,lineHeight:1.3},children:y})]})}function z(e){let{userData:t,index:o,rootStore:n}=e;const c=(0,s().Fg)(),d=(0,r().O7)(),u=(0,_().MR)(d,t),p=(0,a().VK)((()=>O(t.userId,n)),[t,n]);if(!(0,a().VK)((()=>p.isDefined()),[p]))return null;let m;!u&&t.activityTimestampNearestMinuteMs&&(m=(0,l().tv)(t.activityTimestampNearestMinuteMs,i().locale));const g=(0,B.jsxs)("div",{style:{display:"flex",alignContent:"flex-end",minWidth:140,width:"100%",marginTop:4},children:[(0,B.jsx)(M().Z,{userStore:p,avatarSize:18,style:{flexGrow:1}}),(0,B.jsx)("div",{style:{marginLeft:"auto",paddingLeft:12,textAlign:"right",flexShrink:1,color:c.mediumInvertedTextColor},children:m})]});if(u&&t.blockId){const e=t.blockId;return(0,B.jsx)(C().Z,{onClick:()=>f().hl([e],!0),style:{display:"flex",alignItems:"center"},children:g})}return(0,B.jsx)("div",{style:{display:"flex",alignItems:"center"},children:g})}function H(e){let{hiddenUsers:t,rootStore:o}=e;const n=(0,s().Fg)(),i=(0,r().O7)();return(0,B.jsx)(x().Z,{allowHover:!0,originGap:7,renderTooltip:e=>{const r=[],a=[];for(const o of t)(0,_().MR)(i,o)?r.push(o):a.push(o);const s=a.slice(0,D-r.length);return(0,B.jsxs)("div",{...e,children:[r.length>0&&(0,B.jsxs)("div",{style:{marginBottom:4},children:[(0,B.jsx)(T().Z,{style:j(n),children:(0,B.jsx)(u()._H,{defaultMessage:"Viewing now",id:"topbar.presenceIndicator.hiddenUsers.viewingNow.tooltip"})}),r.map(((e,t)=>(0,B.jsx)(z,{userData:e,index:t,rootStore:o},t)))]}),s.length>0&&(0,B.jsxs)("div",{style:{marginBottom:4},children:[(0,B.jsx)(T().Z,{style:{...j(n)},children:(0,B.jsx)(u()._H,{defaultMessage:"Last viewed by",id:"topbar.presenceIndicator.hiddenUsers.lastViewedBy.tooltip"})}),s.map(((e,t)=>(0,B.jsx)(z,{userData:e,index:t,rootStore:o},t)))]}),a.length>s.length&&(0,B.jsx)("div",{style:{marginLeft:2,marginTop:2,color:n.mediumInvertedTextColor},children:(0,B.jsx)(u()._H,{defaultMessage:"{notViewingMoreUsersCount} moreâ€¦",id:"topbarPresence.presenceIndicator.hiddenUsers.moreUsersNotViewing.tooltip",values:{notViewingMoreUsersCount:a.length-s.length}})})]})},render:e=>(0,B.jsx)("div",{style:{color:n.mediumTextColor,fontSize:14,marginLeft:2*U,marginRight:-U,whiteSpace:"nowrap"},...e,children:(0,B.jsx)(u()._H,{defaultMessage:"{hiddenUsersCount, plural, one {+{hiddenUsersCount}} other {+{hiddenUsersCount}}}",id:"topbar.presenceIndicator.hiddenUsers.otherCount.message",values:{hiddenUsersCount:t.length}})})})}function q(e,t){return(0,s().yK)((o=>{const n={width:F,height:F,borderRadius:F},i=e(o);return{button:{transition:"all 0.2s ease",transform:"scale(1)"},buttonHovered:{transform:"scale(1.15)",background:"none"},buttonPressed:{transform:"scale(0.9)",background:"none"},uiUserAvatarStyles:{...n},avatarInnerOutline:{...n,outlineStyle:"solid",outlineColor:o.UIUserAvatarInnerOutline,outlineWidth:.5,outlineOffset:-.5},avatarBorder:t?{...n,outlineStyle:"solid",outlineColor:i,outlineWidth:1.5,outlineOffset:-.5}:{},avatarOuterOutline:{...n,outlineStyle:"solid",outlineColor:t?o.UIUserAvatarOuterOutline:o.UIUserAvatarIdleOutline,outlineWidth:.5,outlineOffset:t?1:0,marginRight:-6,position:"relative"},initialColor:{color:t?i:o.icon.secondary}}}),[e,t])}function W(e){const{userData:t,rootStore:o,isShowingInPostFeed:i=!1}=e,s=(0,r().O7)(),{userId:l}=t,c=(0,_().MR)(s,t),d=O(l,o),u=(0,a().VK)((()=>d.isDefined()&&!d.getIsSuspended()),[d]),m=q((0,n.useCallback)((e=>l===s.currentUser.id?e.UIUserAvatarSelfBorder:(0,p().iY)(l,e)),[s.currentUser.id,l]),c);return u?(0,B.jsx)(x().Z,{disableTooltip:i,textWrap:!0,renderTooltip:()=>(0,B.jsx)(K,{rootStore:o,userData:t,isPresent:c,isShowingInPostFeed:i}),render:e=>{const o=(0,B.jsx)("div",{style:m.avatarOuterOutline,children:(0,B.jsx)("div",{style:m.avatarBorder,children:(0,B.jsx)(P().Z,{iconStyle:m.avatarInnerOutline,userStore:d,style:m.uiUserAvatarStyles,isOffline:!c,size:F,avatarShouldShowShadow:!i,initialOverrideStyle:m.initialColor})})});if(c&&t.blockId){const n=t.blockId;return(0,B.jsx)(C().Z,{...e,onClick:()=>f().hl([n],!0),style:m.button,hoveredStyle:m.buttonHovered,pressedStyle:m.buttonPressed,children:o})}return(0,B.jsx)("div",{...e,children:o})}}):null}function G(e){const{rootStore:t,pageVisitStore:o,presenceStore:n,maxUsers:i,isShowingInPostFeed:s}=e,l=(0,r().O7)(),c=l.currentUser.id,{currentSpaceStore:d}=(0,a().VK)((()=>b().default.getState()),[]),u=(0,I().u)(),p=(0,a().VK)((()=>{const e=u.getForSpace(d);return e?e.enabledTrustedEmailDomains:[]}),[u,d]),m=(0,a().VK)((()=>{const e=l.currentUser.id;if(!e)return;const r=s?(0,_().vG)({pageVisitStore:o,presenceStore:n}):(0,_().AQ)({pageVisitStore:o,presenceStore:n,blockStore:t,trustedEmailDomains:p}),a=[],c=[];for(const t of r)t.userId!==e&&((0,_().MR)(l,t)?a.push(t):c.push(t));const d=[...V(a).reverse(),...V(c).reverse()],u=L(i)-1;return{visibleUsers:d.slice(0,u),hiddenUsers:d.slice(u)}}),[o,n,l,i,t,p,s],{useDeepEqual:!0}),{visibleUsers:f,hiddenUsers:h,isEveryUserStoreReady:k}=(0,a().VK)((()=>{if(!c)return{};const{visibleUsers:e=[],hiddenUsers:o=[]}=m??{},n=[c,...e.map((e=>e.userId)),...o.map((e=>e.userId))];return{visibleUsers:e,hiddenUsers:o,isEveryUserStoreReady:n.map((e=>O(e,t))).every((e=>e.isReady()))}}),[c,m,t]),C=(0,a().VK)((()=>Boolean(S().default.state.isShowingTabBar)),[]),x=(0,v().useIsDictatingToPage)(t),T=(0,a().VK)((()=>!y().default.state.online&&w().default.checkGate({gateName:"download_for_offline"})),[]);if(!c||!m||!k||T)return null;if(0===f.length&&0===h.length)return x?(0,B.jsx)("div",{style:Z({environment:l,isShowingTabBar:C,isShowingInPostFeed:s}),children:(0,B.jsx)(g().ew,{enableClickToScroll:!0,rootStore:t})}):null;{const e=[...f];return e.reverse(),(0,B.jsxs)("div",{style:Z({environment:l,isShowingTabBar:C,isShowingInPostFeed:s}),children:[h.length>0&&(0,B.jsx)(H,{rootStore:t,hiddenUsers:h}),e.map((e=>(0,B.jsx)(W,{userData:e,rootStore:t},e.userId))),!s&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(W,{rootStore:t,userData:{userId:c,present:!0}}),(0,B.jsx)(g().ew,{enableClickToScroll:!0,rootStore:t})]})]})}}},911393:(e,t,o)=>{o.d(t,{jI:()=>ye,gX:()=>ie,lC:()=>_e});var n=()=>o(677559),i=(o(267602),o(470928),o(241792),o(667294)),r=()=>o(146947),a=()=>o(219727),s=()=>o(142735),l=()=>o(846550),c=()=>o(263184),d=()=>o(506347),u=()=>o(156642),p=()=>o(492522),m=()=>o(788860),f=()=>o(568017),g=()=>o(632314),v=()=>o(696459),h=()=>o(707513),_=()=>o(308186),b=()=>o(879952),y=()=>o(94912),S=()=>o(269299),w=()=>o(594546),k=()=>o(247724),I=()=>o(429725),C=()=>o(949842),x=()=>o(609489),T=()=>o(352230),M=()=>o(154057),P=()=>o(122479),A=()=>o(148126),R=()=>o(505462),B=()=>o(480089),E=()=>o(607031),D=()=>o(858856),U=()=>o(158083),F=()=>o(482162),N=()=>o(557576),V=()=>o(645805),L=()=>o(247904),O=()=>o(876822);const Z=function(e){const t=(0,a().O7)(),n=(0,s().VK)(j,[]);return(0,i.useEffect)((()=>{if(!n)return t.LocalBacklinkStore.initializeBacklinks({block:{id:e.store.pointer.id,spaceId:(0,o(81954).J)(e.store.pointer.spaceId)},currentUserId:t.currentUser.id,environment:t}),()=>{t.LocalBacklinkStore.destroyBacklinks(e.store.id,t)}}),[t,n,e.store.id,e.store.pointer.id,e.store.pointer.spaceId]),null};function j(){const{mainEditorCurrentBlockStore:e}=O().default.state;return Boolean(e&&"15776535-3f2c-4705-bd45-474e5ba8b46c"===e.id)}var K=()=>o(58836),z=()=>o(628370),H=()=>o(154186),q=()=>o(448419),W=()=>o(729775),G=()=>o(312578),$=()=>o(198829),Q=()=>o(384241),Y=()=>o(388284),J=()=>o(508181),X=()=>o(251932),ee=()=>o(98275),te=o(785893);const oe=(0,m().vU)({copySuccessMessage:{defaultMessage:"Copied! Now paste in any page to sync content.",id:"transclusionContainerBlock.actions.copySuccessMessage"}});function ne(e,t){const n=(0,a().O7)(),r=(0,l().Fg)(),d=(0,i.createRef)(),{disabled:p,referenceStore:g,store:v}=e,h=(0,i.useMemo)((()=>c().default.createValue(!1)),[]),_=(0,i.useMemo)((()=>c().default.createValue(!1)),[]),I=(0,i.useMemo)((()=>c().default.createValue(!1)),[]),T=(0,s().Kw)(h),E=(0,s().VK)((()=>{const t=le(e.store,e.referenceStore);return(0,x().B)(t,T)}),[T,e.referenceStore,e.store]),D=(0,s().VK)((()=>!(E!==x().x.Selected&&E!==x().x.SelectedDescendant||o(591051).Z.state.isActive||o(960562).default.state.isDragging||N().default.state.isActive||o(475335).default.state.isKeyboardMode)),[E]),F=(0,i.useMemo)((()=>new(o(435308).default)((()=>{const t=(0,o(935753).b)(e.store,n);return t.backlinksCount+t.inaccessibleBacklinkCount}),{debugName:"numberOfBacklinksStore"})),[n,e.store]),[V,L]=(0,i.useState)(void 0),O=(0,s().VK)((()=>e.store.getFormatStore().getKeyStore("unsync_transclusion_task_id").getValue()),[e.store]);(0,i.useEffect)((()=>{let e=!1,t=!1;return async function(){if(!O)return;const i=o(782646).GE({environment:n,eventName:o(110344).Z,taskId:O});for await(const o of i){if(e)break;if("success"===o.taskStatus){L("succeeded");break}if("failure"===o.taskStatus){L(t?"failed_show_error":"failed");break}"in_progress"===o.taskStatus&&(t=!0,L("in_progress"))}}(),()=>{e=!0}}),[n,O]);const j=(0,s().VK)((()=>D?F.state:-1),[F,D]),W=(0,s().VK)((()=>!(!g||!g.pathIsDead())||!(!g||!(0,o(95718).Eo)(g))),[g]),G=(0,s().VK)((()=>{if(o(205228).default.isAdminMode)return!1;if(p&&!W)return!0;const e=le(v,g);if(!e.canEdit())return!0;const t=e.findRecordStoreUIAncestor((t=>t!==e&&t instanceof o(826955).G&&t.getType()===u().Ti.transclusionContainer));return Boolean(t.ancestor)}),[W,p,g,v]),$=(0,s().VK)((()=>{if(!g||!v.canEdit()||!g.canEdit())return!1;const e=(0,P().YO)(v).map((e=>{let{permissionItem:t}=e;return t})),t=(0,P().YO)(g).map((e=>{let{permissionItem:t}=e;return t})),n=(0,o(528514).L2)(e,t).created.find((e=>!(0,o(933868).FB)(e)));return Boolean(n)}),[g,v]),Q=(0,s().VK)((()=>o(804217).default.state.online),[]),Y=(0,i.useCallback)((async()=>{b().Z5({environment:n,stores:[le(e.store,e.referenceStore)]});const t=await o(959137).F.clipboardActions.load(),i=d.current;i&&n.device.isSafari?(R().setOnNode(i,n.device),t.triggerBrowserCopy(),R().clear(n)):t.triggerBrowserCopy(),function(e){w().K4(e,"transclusion_container_copy_button")}(n),o(102182).oV({label:o(527278).Z.formatMessage(oe.copySuccessMessage),helpUrl:(0,A().UY)("guides.transclusions")})}),[n,d,e.referenceStore,e.store]),J=(0,i.useCallback)((()=>(0,te.jsx)(ve,{store:e.store,hasDifferingReadPermissionsFromSource:$})),[$,e.store]),X=(0,i.useCallback)((()=>{U().Z.state.isDragging||N().default.state.isActive||G||h.setState(!0)}),[G,h]),ne=(0,i.useCallback)((()=>{U().Z.state.isDragging||N().default.state.isActive||G||h.setState(!1)}),[G,h]),ie=(0,i.useCallback)((()=>{h.setState(!1),b().ZH({environment:n});const t=e.store.getContentStores()[0];t&&t.getType()===u().Ti.text&&(b().eP({environment:n,store:t}),o(990966).setSelectionAtStart({store:t.getBlockTitleStore()}))}),[n,h,e.store]),ae=(0,i.useCallback)((async()=>{if(0===F.state)return{canRemove:!0,canUndo:!0};const e=await re({header:(0,te.jsx)(m()._H,{id:"transclusionContainerBlock.remove.header",defaultMessage:"Delete original?"}),text:(0,te.jsx)(m()._H,{id:"transclusionContainerBlock.remove.text",defaultMessage:"These blocks are synced in {numberOfBacklinks, plural, one {{numberOfBacklinks} other page} other {{numberOfBacklinks} other pages}}. If you delete the original, the blocks will no longer be synced.",values:{numberOfBacklinks:F.state}}),acceptLabel:(0,te.jsx)(m()._H,{id:"transclusionContainerBlock.remove.confirm",defaultMessage:"Delete and unsync copies"})});return{canRemove:e,canUndo:e}}),[F]),se=(0,i.useCallback)((async()=>0===F.state||re({header:(0,te.jsx)(m()._H,{id:"transclusionContainerBlock.unsyncTransclusionReference.header",defaultMessage:"Unsync this?"}),text:(0,te.jsx)(m()._H,{id:"transclusionContainerBlock.unsyncTransclusionReference.text",defaultMessage:"The selected blocks will no longer be synced with the original."}),acceptLabel:(0,te.jsx)(m()._H,{id:"transclusionContainerBlock.unsyncTransclusionReference.confirm",defaultMessage:"Unsync"})})),[F]),me=(0,i.useCallback)((async()=>0===F.state||re({header:(0,te.jsx)(m()._H,{id:"transclusionContainerBlock.unsyncTransclusionContainer.header",defaultMessage:"Unsync all?"}),text:(0,te.jsx)(m()._H,{id:"transclusionContainerBlock.unsyncTransclusionContainer.text",defaultMessage:"{numberOfBacklinks, plural, one {{numberOfBacklinks} other page} other {{numberOfBacklinks} other pages}} will no longer sync with these blocks.",values:{numberOfBacklinks:F.state}}),acceptLabel:(0,te.jsx)(m()._H,{id:"transclusionContainerBlock.unsyncTransclusionContainer.confirm",defaultMessage:"Unsync all"})})),[F]),he=(0,i.useRef)(null),_e=()=>{const{isDesktop:t}=n.device;return(0,te.jsxs)(te.Fragment,{children:[Q&&(0,te.jsx)(q().ZP,{popupType:q().Z4.Popup,onClick:()=>function(e,t,o){b().Z5({environment:t,stores:[le(e,o)]}),function(e,t){w().K4(e,"transclusion_container_open_backlinks",t)}(t,{from:"action_bar"})}(e.store,n,e.referenceStore),originGap:4,renderOrigin:e=>(0,te.jsxs)(H().Z,{style:de(r),...e,children:[j>0?(0,te.jsx)(m()._H,{defaultMessage:"Editing in {icon} {numberOfBacklinks, plural, one {{numberOfBacklinks} other page} other {{numberOfBacklinks} other pages}}",id:"transclusionContainerBlock.editingMultiple",values:{icon:(0,o(338217).J)({width:14,transform:"rotate(180deg)",marginLeft:4,marginRight:4}),numberOfBacklinks:j}}):(0,te.jsx)(m()._H,{id:"transclusionContainerBlock.editingOriginal",defaultMessage:"Editing original"}),$&&(0,o(735501).t)({width:14,fill:(0,f().fi)("orange",r).fill,marginLeft:6}),(0,o(615634).i)({width:10,fill:r.mediumIconColor,marginLeft:4})]}),render:J}),t&&(0,te.jsx)(H().Z,{style:de(r),onClick:Y,children:(0,te.jsx)(m()._H,{id:"transclusionContainerBlock.copy",defaultMessage:"Copy and sync"})}),(0,te.jsx)(o(79555).Z,{store:le(e.store,e.referenceStore),fadeIn:!1,style:{width:30,height:void 0},iconStyle:{marginTop:1,fill:r.regularTextColor}})]})},be=(0,s().VK)((()=>e.store.pathIsDead()),[e.store]),ye=(0,s().VK)((()=>E!==x().x.Default||_.state||I.state),[E,_,I]),Se=(0,s().VK)((()=>!e.store.hasContent()),[e.store]),we=(0,s().VK)((()=>e.disabled||"in_progress"===V),[e.disabled,V]),ke=(()=>{const{store:t}=e,{device:o}=n,i=Boolean(e.referenceStore);return be&&i?(0,te.jsx)(ue,{store:e.store,blockType:"transclusion_container"}):G?(0,te.jsx)(ee().Z,{disabled:we,disableCommentMenu:e.disableCommentMenu,disableHoverMenu:e.disableHoverMenu,store:e.store.getContentStore()}):(0,te.jsxs)("div",{ref:he,className:k().H9Z,style:{display:"flex"},children:[(0,te.jsx)("span",{ref:d,style:{height:"1px",width:"1px"}}),(0,te.jsxs)("div",{style:{display:"flex",flexDirection:"column",position:ye?"relative":void 0,paddingTop:3,paddingBottom:3,width:"100%"},onMouseLeave:ne,onMouseEnter:X,onClick:Se?t=>function(e,t,o){(0,C().ZP)({event:e,context:C().Af.EditorClick,callback:()=>{(0,M().uG)(e)||S().createAndCommit({userAction:"TransclusionContainerBlock.handleEmptyClick",environment:o,canUndo:!0,perform:e=>{y().ls({environment:o,store:t,transaction:e})}})}})}(t,e.store,n):void 0,children:[(0,te.jsx)(pe,{unsyncStatus:V}),(0,te.jsx)(ee().Z,{disabled:we,store:e.store.getContentStore(),emptyPlaceholder:(0,te.jsx)(fe,{}),disableHoverMenu:e.disableHoverMenu||E!==x().x.SelectedDescendant||W,disableDrag:o.isMobile}),(0,te.jsx)(Z,{store:t},t.id),ye&&(0,te.jsx)(ge,{haloShouldBeVisibleStore:_,state:E}),ye&&(0,te.jsx)(K().p,{allowSelectionWithin:!1,children:(0,te.jsx)(z().Z,{visible:D,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onAnimationStart:()=>{I.setState(!0)},onAnimationEnd:()=>{D||I.setState(!1)},style:ce(r),children:_e()})})]})]})})();return(0,B().ez)(e.store,t,(0,i.useMemo)((()=>({renderedType:"transclusion_container",getBlockStore:()=>e.store,getNode:()=>he.current,handleCreated:ie,canRemoveBlock:ae,confirmUnsyncTransclusionReference:se,confirmUnsyncTransclusionContainer:me})),[ae,me,se,ie,e.store]),ke)}const ie=i.memo(i.forwardRef(ne),g().Z);function re(e){const{header:t,text:o,acceptLabel:n}=e;return new Promise((e=>{_().vC({showCancel:!0,keepFocus:!1,message:(0,te.jsxs)("div",{children:[(0,te.jsx)("div",{style:{fontWeight:h().Ue.semibold},children:t}),o]}),items:[{label:n,color:"red",onAccept:()=>{e(!0)}}],handleCancel:()=>{e(!1)}})}))}function ae(){return(0,te.jsx)(m()._H,{defaultMessage:"Learn more about Synced blocks",id:"transclusionContainerBlock.learnMoreLabel"})}function se(){return(0,te.jsx)(Y().Z,{topBorder:!0,children:(0,te.jsx)(J().Z,{title:(0,te.jsx)(ae,{}),href:(0,A().UY)("guides.transclusions"),analyticsFrom:"transclusion_container_block"})})}function le(e,t){return t||e}function ce(e){return{position:"absolute",zIndex:p().t8,top:-40,right:-2,borderRadius:6,height:32,fontSize:14,lineHeight:1.2,display:"flex",whiteSpace:"nowrap",fontFamily:h().F5(r().locale).sans,background:e.popoverBackground,boxShadow:e.mediumBoxShadow}}function de(e){return{display:"flex",alignItems:"center",padding:"0 8px",borderRight:`1px solid ${f().ZP.whiteWithAlpha(.2)}`,boxShadow:`1px 0 0 ${e.regularDividerColor}`,marginRight:1}}function ue(e){let{store:t,blockType:o}=e;const n=(0,l().Fg)(),i=(0,s().VK)((()=>(0,I().ZP)({store:t,fullyQualified:!1,pageVisitSource:d().tY.LinkInPage})),[t]),r=(0,s().VK)((()=>(0,I().ZP)({store:t,openInSidePeek:!0,fullyQualified:!1,pageVisitSource:d().tY.PeekOpen})),[t]),a=(0,s().VK)((()=>F().default.isSidePeekOpen()),[]),c=(0,te.jsx)(W().Z,{href:i,altHref:r,forceAltHref:a,external:!1,inline:!0,underline:!0,children:(0,te.jsx)(m()._H,{id:"transclusionContainerBlock.deletedContainerBanner.viewDeletedPage",defaultMessage:"View deleted page"})});return(0,te.jsxs)(X().gq,{style:{color:n.text.secondary,background:n.accentColors.gray[30],padding:"16px 16px 16px 12px",borderRadius:4},alignItems:"center",children:[(0,D().D)({width:24,height:24,flexShrink:0,marginRight:10,padding:2}),(0,te.jsx)("div",{style:{fontSize:14},children:(0,te.jsx)(me,{pageLink:c,blockType:o})})]})}function pe(e){let{unsyncStatus:t}=e;const o=(0,l().Fg)();if(!t||"failed"===t)return null;return(0,te.jsxs)(X().gq,{style:{color:o.text.secondary,background:o.accentColors.gray[30],padding:"16px 16px 16px 12px",borderRadius:4},alignItems:"center",children:[(0,D().D)({width:24,height:24,flexShrink:0,marginRight:10,padding:2}),(0,te.jsx)("div",{style:{fontSize:14},spellCheck:!1,children:(e=>{switch(e){case"in_progress":return(0,te.jsx)(m()._H,{id:"transclusionContainerBlock.unsyncingInProgressBanner.inProgress",defaultMessage:"Unsync operation in progress"});case"failed_show_error":return(0,te.jsx)(m()._H,{id:"transclusionContainerBlock.unsyncingInProgressBanner.failed",defaultMessage:"Unsync operation failed, please try again."});case"succeeded":return(0,te.jsx)(m()._H,{id:"transclusionContainerBlock.unsyncingInProgressBanner.succeeded",defaultMessage:"Unsync operation completed successfully."});case"failed":return null;default:return(0,v().t1)(e)}})(t)}),(e=>{if("in_progress"===e)return(0,te.jsx)(G().Z,{style:{marginLeft:10}})})(t)]})}function me(e){const{pageLink:t,blockType:o}=e;return o===u().Ti.collectionView?(0,te.jsx)(m()._H,{id:"transclusionContainerBlock.deletedContainerBanner.syncedContentPageDeleted.collection",defaultMessage:"The original database has been deleted and cannot be edited. {pageLink}",values:{pageLink:t}}):o===u().Ti.transclusionContainer?(0,te.jsx)(m()._H,{id:"transclusionContainerBlock.deletedContainerBanner.syncedContentPageDeleted.syncedBlock",defaultMessage:"The page with the original synced block has been deleted. {pageLink}",values:{pageLink:t}}):void(0,v().t1)(o)}function fe(){const e=(0,l().Fg)();return(0,te.jsx)("div",{style:{caretColor:e.lightTextColor,color:e.lightTextColor,paddingTop:4,paddingBottom:4},children:(0,te.jsx)(m()._H,{defaultMessage:"Click or drag blocks here, then paste in another page to sync content.",id:"transclusionContainerBlock.emptyEditingPlaceholder"})})}function ge(e){let{state:t,haloShouldBeVisibleStore:o}=e;const n=(0,s().VK)((()=>V().default.state.isOpen&&V().default.state.isHoveringPlusButton&&t===x().x.Hovered),[t]),i=t!==x().x.Default,r=(0,l().yK)((e=>({halo:{position:"absolute",left:-6,right:-6,top:-3,bottom:-3,pointerEvents:"none",borderRadius:8,border:`2px solid ${e.transclusionBorderColor}`}})),[]);return(0,te.jsx)(z().Z,{visible:i&&!n,initial:{opacity:0},animate:{opacity:t===x().x.Hovered?.45:1,scale:1},exit:{opacity:0},onAnimationStart:()=>{o.setState(!0)},onAnimationEnd:()=>{i||o.setState(!1)},className:k().Lzk,style:r.halo})}function ve(e){let{store:t,hasDifferingReadPermissionsFromSource:o}=e;const n=(0,l().Fg)(),i={menuType:T().o.Popup,width:400},r=(0,s().VK)((()=>t.getNavigableBlockStore()),[t]),a=(0,s().VK)((()=>r&&(0,I().ZP)({store:r,fullyQualified:!1,pageVisitSource:d().tY.Breadcrumb})),[r]),c=o&&r?(0,te.jsx)(W().Z,{underline:!0,inline:!0,href:a,style:{color:n.mediumTextColor},children:(0,te.jsx)(Q().Z,{store:r,style:{display:"inline"},shouldWrap:!0,maxLength:30})}):void 0;return(0,te.jsxs)($().Z,{...i,children:[o&&r&&(0,te.jsx)(Y().Z,{style:{background:n.sidebarSecondaryBackground},children:(0,te.jsxs)("div",{style:{display:"flex",fontSize:12,padding:"6px 16px"},children:[(0,E().B)({width:16,marginTop:6,marginRight:8,color:n.regularIconColor}),(0,te.jsx)("div",{style:{flexGrow:1,minWidth:0},children:(0,te.jsx)("span",{style:{overflowWrap:"break-word"},children:(0,te.jsx)(m()._H,{defaultMessage:"Viewership permissions on this page are different from the original page <page></page>. Some members might not have access.",id:"transclusionContainerBlock.differingPermissionsWarning",values:{page:()=>c}})})})]})}),(0,te.jsx)(Y().Z,{topBorder:o,children:(0,te.jsx)(L().Z,{type:"transclusion_container",store:t,originalTransclusionStore:t,disableArrow:!0})}),(0,te.jsx)(se,{})]})}function he(e,t){const n=(0,m().YB)(),r=(0,i.useRef)(null),a=(0,s().VK)((()=>e.store.getTransclusionReferenceTargetStore()),[e.store]),c=(0,s().VK)((()=>a&&a.canRead()),[a]),d=(0,s().VK)((()=>e.store.useCrdt()!==(null==a?void 0:a.useCrdt())),[e.store,a]),u=(0,l().yK)((e=>({paddedContainer:{paddingTop:8,paddingBottom:8}})),[]),p=(0,s().VK)((()=>null==a?void 0:a.isReady()),[a]);return(0,B().ez)(e.store,t,(0,i.useMemo)((()=>({renderedType:"transclusion_reference",getNode:()=>{const e=r.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(()=>{if(!a||!p)return null;if(!c)return(0,te.jsx)(K().p,{allowSelectionWithin:!1,style:u.paddedContainer,children:(0,te.jsx)(ye,{targetStore:a})});const t=(0,te.jsx)(ie,{store:a,disabled:e.disabled,intl:n,referenceStore:e.store,disableCommentMenu:e.disableCommentMenu,disableHoverMenu:e.disableHoverMenu,ref:r});return d?(0,te.jsx)(K().p,{allowSelectionWithin:!0,children:(0,te.jsx)(o(28832).O,{displayName:"TransclusionReferenceBlock.mixedCrdtTransclusion",disabled:!1,children:t})}):t})())}const _e=i.memo(i.forwardRef(he),g().Z),be={RestrictedTransclusionBlockContent:new(n().Ss)("RestrictedTransclusionBlockContent",(async()=>Promise.all([o.e(62743),o.e(12351),o.e(25249)]).then(o.bind(o,911843))))},ye=(0,n().kF)(be.RestrictedTransclusionBlockContent,(e=>e.default))},726143:(e,t,o)=>{o.d(t,{FP:()=>y,Ii:()=>c,Io:()=>k,JU:()=>w});o(821057);var n,i=o(667294),r=o(785893);const a={fullPage:!0,mobileNative:!0,mobileWeb:!0,commandSearch:!0,mobileSearch:!1,writer:!1,corner:!1,searchPane:!1,mobileWriter:!1},s={mobileNative:!0,mobileWeb:!0,mobileSearch:!0,mobileWriter:!0,fullPage:!1,writer:!1,corner:!1,searchPane:!1,commandSearch:!1},l={writer:!0,mobileWriter:!0,mobileWeb:!1,mobileNative:!1,mobileSearch:!1,fullPage:!1,corner:!1,searchPane:!1,commandSearch:!1};function c(e){return l[e]}const d={corner:!0,searchPane:!0,fullPage:!1,mobileNative:!1,mobileWeb:!1,mobileSearch:!1,commandSearch:!1,writer:!1,mobileWriter:!1},u={corner:!0,searchPane:!0,fullPage:!0,mobileNative:!0,mobileWeb:!0,mobileSearch:!0,commandSearch:!0,writer:!1,mobileWriter:!1},p={corner:!0,searchPane:!1,fullPage:!0,mobileNative:!0,mobileWeb:!1,mobileSearch:!1,commandSearch:!0,writer:!1,mobileWriter:!1},m={corner:!0,searchPane:!0,fullPage:!0,commandSearch:!0,writer:!0,mobileWriter:!0,mobileNative:!1,mobileWeb:!1,mobileSearch:!1},f={corner:!0,searchPane:!0,commandSearch:!0,mobileNative:!0,mobileSearch:!0,mobileWeb:!0,writer:!1,fullPage:!1,mobileWriter:!1},g={corner:!0,writer:!0,mobileWriter:!0,fullPage:!1,searchPane:!1,commandSearch:!1,mobileNative:!1,mobileWeb:!1,mobileSearch:!1},v={corner:!0,fullPage:!0,searchPane:!0,mobileNative:!0,commandSearch:!0,mobileWeb:!0,mobileSearch:!0,writer:!1,mobileWriter:!1},h={corner:!0,fullPage:!0,searchPane:!1,mobileNative:!1,commandSearch:!1,mobileWeb:!1,mobileSearch:!1,writer:!1,mobileWriter:!1},_={corner:!0,fullPage:!0,commandSearch:!1,searchPane:!1,mobileNative:!1,mobileWeb:!1,mobileSearch:!1,writer:!1,mobileWriter:!1},b={corner:!0,fullPage:!1,searchPane:!1,mobileNative:!1,commandSearch:!1,mobileWeb:!1,mobileSearch:!1,writer:!1,mobileWriter:!1};class y{constructor(e){this.type=e}get renderAsFullPage(){return a[this.type]}get isQuickSearchMode(){return this.isType("commandSearch")}get isMobile(){return s[this.type]}get isWriter(){return l[this.type]}isType(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return t.includes(this.type)}get shouldShowExpandToFullPageChat(){return d[this.type]}get isValidSurfaceForAttachmentUploads(){return p[this.type]}get shouldShowChatHistory(){return u[this.type]}get canUseCurrentPageContext(){return m[this.type]}get showCloseButton(){return f[this.type]}get surfaceSupportsContextWithSelection(){return g[this.type]}get surfaceSupportsParameterization(){return v[this.type]}get surfaceSupportsTutorialAction(){return h[this.type]}get surfaceSupportsShareAnswerAction(){return _[this.type]}canShowSessionStarterInContext(e){return y[e.from].isWriter===this.isWriter}get canUseNewExperimentalSkills(){return b[this.type]}}n=y,y.fullPage=new n("fullPage"),y.corner=new n("corner"),y.searchPane=new n("searchPane"),y.commandSearch=new n("commandSearch"),y.mobileNative=new n("mobileNative"),y.writer=new n("writer"),y.mobileWeb=new n("mobileWeb"),y.mobileSearch=new n("mobileSearch"),y.mobileWriter=new n("mobileWriter");const S=i.createContext(void 0);function w(e){return(0,r.jsx)(S.Provider,{value:e.surface,children:e.children})}function k(){const e=i.useContext(S);return e||y.corner}S.displayName="AssistantSurfaceContext"},125659:(e,t,o)=>{o.d(t,{DK:()=>c,L1:()=>s,Y$:()=>l,cu:()=>a});o(821057);var n=o(667294);const i="collectionContextStore",r=(0,o(949744).Q)({displayName:i,legacyContextKey:i,modernContextDefaultValue:void 0}),a=r.context,s=r.Provider;function l(){const e=n.useContext(a);if(void 0===e)throw new Error(`No context provided: ${i}`);return e}function c(){return n.useContext(a)}},566937:(e,t,o)=>{o.d(t,{Dq:()=>s,q$:()=>r});var n=o(667294);const i=(0,o(949744).Q)({displayName:"CollectionPreviewContext",legacyContextKey:"collectionPreviewContext",modernContextDefaultValue:void 0}),r=i.Provider,a=i.context;function s(){return(0,n.useContext)(a)}},85307:(e,t,o)=>{o.d(t,{J:()=>n});const n=(0,o(667294).createContext)(!1);n.displayName="ColumnListContext"},708536:(e,t,o)=>{o.d(t,{Mq:()=>r,jo:()=>a,uf:()=>i});var n=o(667294);const i={track(e,t){t(!0)},untrack(e){}},r=(0,n.createContext)(i);function a(){const e=(0,n.useContext)(r),[t,o]=(0,n.useState)(!1),i=(0,n.useRef)(null);return[(0,n.useCallback)((t=>{i.current&&(e.untrack(i.current),i.current=null),t&&(i.current=t,e.track(t,o))}),[e]),t]}r.displayName="IFrameManagerContext"},41340:(e,t,o)=>{o.d(t,{L:()=>i,Z:()=>r});const n=(0,o(949744).Q)({modernContextDefaultValue:void 0,displayName:"OverrideLinkClickContext",legacyContextKey:"overrideLinkClick"}),i=n.Provider,r=n.context},939513:(e,t,o)=>{o.d(t,{U:()=>r,z:()=>i});const n=(0,o(949744).Q)({displayName:"ScrollerContext",legacyContextKey:"scrollerContext",modernContextDefaultValue:void 0}),i=n.Provider,r=n.context},631538:(e,t,o)=>{o.d(t,{a:()=>a,l:()=>s});const n={selectableContainer:void 0,closestSelectable:void 0},i="selectable",r=(0,o(949744).Q)({modernContextDefaultValue:n,displayName:i,legacyContextKey:i}),a=r.context,s=r.Provider},834372:(e,t,o)=>{o.r(t),o.d(t,{onboardingFlowNameToFlowConfig:()=>p});var n=o.n(o(369282)),i=()=>o(282017),r=()=>o(861864),a=()=>o(528918),s=()=>o(113029),l=()=>o(876822),c=()=>o(749826),d=()=>o(148882),u=()=>o(723721);const p={education_flow:{isEnabledForDesktop:!0,isEnabledForMobile:!1,getDesktopStages:()=>["profile","onboarding_workspace_choose","education_persona_survey","education_category_picker"],onStartFlow:()=>{},shouldShowFlowToUser:e=>{var t;const n=0===(0,s().IU)(l().default.state.currentUserRootStore),i=null===(t=l().default.state.currentUserStore)||void 0===t||null===(t=t.getEmail())||void 0===t?void 0:t.endsWith(".edu"),r=e.device.isMobile,a="en-US"===o(146947).locale;return!(!n||!i||r||!a||"on"!==c().default.getEligibleGroup({experimentId:"contextualized_onboarding_education_flow",defaultGroup:"control"}))}},form_response_onboarding:{isEnabledForDesktop:!0,isEnabledForMobile:!0,getDesktopStages:()=>["profile","onboarding_workspace_choose"],getMobileStages:()=>["mobile_profile","mobile_onboarding_workspace_choose"],onStartFlow:()=>{},onCompleteFlow:async(e,t,i)=>{n()("form_response_onboarding"===t.flowName);const{defaultOnboardingComplete:a}=await r().K.contextualizedOnboardingActions.load();await a(e,i),o(58771).bo(t.formResponseId,t.secretKey,t.formSpaceId)},shouldShowFlowToUser:()=>0===(0,s().IU)(l().default.state.currentUserRootStore)&&(0,o(680887).d)()},mail_onboarding:{isEnabledForDesktop:!0,isEnabledForMobile:!0,getDesktopStages:()=>[],getMobileStages:()=>[],onStartFlow:()=>{},onCompleteFlow:async(e,t,n)=>{const{setAndTrackContextualizedOnboardingComplete:i}=await r().K.contextualizedOnboardingActions.load(),{onboardingData:s,joinableSpaces:l}=t;if(!s)return;const{onboardingStateActions:c}=await o(136684).onboardingActionsDependency.load();if(a().j({message:c.messages.creatingWorkspace}),0===l.length&&s.canUserCreateSpace){const n=o(527278).Z.getIntl(),r=s.userStore.getFullName(n);await o(224597).wh({environment:e,planType:"personal",name:(0,o(686350).eW)(r||"",n),userRootStore:s.userRootStore,analyticsFrom:"onboarding",icon:void 0,userPersona:"unfilled"}),i({environment:e,onboardingState:t,userStore:s.userStore,spaceJoinOrCreate:"create",permissionLevel:"member"})}await d().transactionQueue.drain(),a().x(),await(0,o(260794).h)({environment:e,from:"contextualizedOnboarding",targetSelf:!0})},shouldShowFlowToUser:()=>"mail"===(0,i().cr)()},calendar_onboarding:{isEnabledForDesktop:!0,isEnabledForMobile:!0,getDesktopStages:()=>["profile"],getMobileStages:()=>["mobile_profile"],onStartFlow:()=>{},onCompleteFlow:async(e,t,n)=>{await d().transactionQueue.drain(),await(0,o(827510).B9)({environment:e,url:`${o(205228).default.domainBaseUrl}/calendarAuth/`,from:"contextualizedOnboarding",targetSelf:!0})},shouldShowFlowToUser:()=>0===(0,s().IU)(l().default.state.currentUserRootStore)&&"calendar"===(0,i().cr)()},new_user_package_onboarding:{isEnabledForDesktop:!0,isEnabledForMobile:!1,getDesktopStages:()=>["profile","onboarding_workspace_choose","onboarding_plan_type_and_survey","team_onboarding_invite","team_onboarding_invite"],onStartFlow:()=>{},shouldShowFlowToUser:()=>!1},performance_marketing_term_onboarding:{isEnabledForDesktop:!0,isEnabledForMobile:!1,getDesktopStages:()=>["profile","onboarding_workspace_choose","onboarding_plan_type_choose","onboarding_collaborative_intent_choose","team_onboarding_invite"],onStartFlow:()=>{},onCompleteFlow:async(e,t,o)=>{const{defaultOnboardingComplete:n}=await r().K.contextualizedOnboardingActions.load();await n(e,o)},shouldShowFlowToUser:e=>!e.device.isMobile&&("gantt"===(0,u().f4)()||"crm"===(0,u().f4)()||"projectManagement"===(0,u().f4)())},default:{isEnabledForDesktop:!0,isEnabledForMobile:!0,getDesktopStages:()=>c().default.checkGate({gateName:"onboarding_split_intent_question"})?["profile","onboarding_workspace_choose","onboarding_plan_type_choose","onboarding_collaborative_intent_choose","onboarding_category_survey","team_onboarding_persona_survey","team_onboarding_use_cases","team_onboarding_workspace_create","team_onboarding_invite","team_onboarding_timed_trial"]:["profile","onboarding_workspace_choose","onboarding_plan_type_choose","team_onboarding_persona_survey","team_onboarding_workspace_create","team_onboarding_invite","team_onboarding_timed_trial","onboarding_category_survey"],getMobileStages:e=>{const t=c().default.checkGate({gateName:"onboarding_split_intent_question"})?["mobile_profile","mobile_onboarding_workspace_choose","mobile_onboarding_plan_type_choose","mobile_onboarding_collaborative_intent_choose","mobile_team_onboarding_persona_survey","mobile_onboarding_category_survey","mobile_team_onboarding_use_cases","mobile_team_onboarding_workspace_create","mobile_team_onboarding_invite"]:["mobile_profile","mobile_onboarding_workspace_choose","mobile_onboarding_plan_type_choose","mobile_team_onboarding_persona_survey","mobile_onboarding_category_survey","mobile_team_onboarding_workspace_create","mobile_team_onboarding_invite"],n=(0,o(286338).dS)({environment:e});return[...t,...(()=>{switch(n){case"v1":return["mobile_onboarding_home","mobile_onboarding_creation","mobile_onboarding_share","mobile_onboarding_multi_platform"];case"v2":return["mobile_onboarding_home","mobile_onboarding_creation","mobile_onboarding_share"];case"v3":return["mobile_onboarding_skill_mab","mobile_onboarding_skill_filing","mobile_onboarding_skill_swipe"];default:return["mobile_onboarding_editor","mobile_onboarding_sidebar","mobile_onboarding_desktop","mobile_onboarding_web_clipper","mobile_onboarding_app_download"]}})()]},onStartFlow:()=>{},shouldShowFlowToUser:e=>(void 0===(0,s().IU)(l().default.state.currentUserRootStore)&&(0,o(594546).j)({environment:e,event:{eventName:"onboarding_undefined_space_view_count",eventProperties:{}}}),!0)},undefined:{isEnabledForDesktop:!0,isEnabledForMobile:!0,getDesktopStages:()=>[],getMobileStages:()=>[],onStartFlow:()=>{},onCompleteFlow:async()=>{},shouldShowFlowToUser:()=>!1}}},870738:(e,t,o)=>{o.r(t),o.d(t,{getContextualizedOnboardingFlowName:()=>c,shouldShowContextualizedOnboardingOnOnboardingLoad:()=>l});o(267602),o(228244);var n=()=>o(35980),i=()=>o(903222),r=()=>o(876822),a=()=>o(834372),s=()=>o(937419);function l(e){var t;const o=n().Z.get({userId:null===(t=r().default.state.currentUserStore)||void 0===t?void 0:t.id,key:s().f});return!(!o||"undefined"===o.flowName||o.isInvalidRedirect)||Object.values(a().onboardingFlowNameToFlowConfig).some((t=>t.shouldShowFlowToUser(e)))}function c(e){for(const t of i().X$){if(a().onboardingFlowNameToFlowConfig[t].shouldShowFlowToUser(e))return t}return i().H}},680887:(e,t,o)=>{o.d(t,{d:()=>i});var n=()=>o(282017);function i(){return!!n().NT()}},861864:(e,t,o)=>{o.d(t,{K:()=>i});var n=()=>o(677559);const i={contextualizedOnboardingHelpers:new(n().Ss)("contextualizedOnboardingHelpers",(async()=>o.e(95366).then(o.bind(o,829119)))),contextualizedOnboardingFlowHelpers:new(n().Ss)("contextualizedOnboardingFlowHelpers",(async()=>Promise.resolve().then(o.bind(o,870738)))),contextualizedOnboardingStageHelpers:new(n().Ss)("contextualizedOnboardingStageHelpers",(async()=>Promise.all([o.e(62743),o.e(90698),o.e(84885),o.e(17100),o.e(39879),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(46616),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63707),o.e(86609),o.e(5006),o.e(20343),o.e(14733),o.e(81780),o.e(3955)]).then(o.bind(o,872839)))),contextualizedOnboardingActions:new(n().Ss)("contextualizedOnboardingActions",(async()=>Promise.all([o.e(90698),o.e(84885),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(46616),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63707),o.e(86609),o.e(5006),o.e(14733),o.e(81780)]).then(o.bind(o,789641)))),contextualizedOnboardingStateActions:new(n().Ss)("contextualizedOnboardingStateActions",(async()=>Promise.all([o.e(62743),o.e(90698),o.e(84885),o.e(17100),o.e(39879),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(46616),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63707),o.e(86609),o.e(5006),o.e(20343),o.e(14733),o.e(81780),o.e(3955)]).then(o.bind(o,213515)))),contextualizedOnboardingFlowDefinitions:new(n().Ss)("contextualizedOnboardingFlowDefinitions",(async()=>Promise.resolve().then(o.bind(o,834372)))),contextualizedOnboardingStageDefinitions:new(n().Ss)("contextualizedOnboardingStageDefinitions",(async()=>Promise.all([o.e(62743),o.e(90698),o.e(84885),o.e(17100),o.e(39879),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(46616),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63707),o.e(86609),o.e(5006),o.e(20343),o.e(14733),o.e(81780),o.e(3955)]).then(o.bind(o,333891))))}},937419:(e,t,o)=>{o.d(t,{default:()=>l,f:()=>i});var n=()=>o(861864);const i="contextualizedOnboardingStateKeyV2";function r(e,t){if("undefined"===e.flowName||e.isInvalidRedirect)return;const{onboardingData:n,password:r,...a}=e;o(35980).Z.set({userId:t,key:i,value:a})}class a extends(()=>o(263184))().default{setState(e){var t;super.setState(e);const n=null===(t=o(876822).default.state.currentUserStore)||void 0===t?void 0:t.id;n&&r(e,n)}getInitialState(){return{flowId:o(956057).Il(),flowName:"undefined",currentStageIndex:0,isFirstTimeOnboarding:void 0,joinableSpaces:[],isPasswordRequired:!0}}async goToNextStage(e){const t=await n().K.contextualizedOnboardingHelpers.load(),o=await n().K.contextualizedOnboardingStageHelpers.load();let i=this.state.currentStageIndex+1;const r=t.getStages({flowName:this.state.flowName,environment:e});for(;i<=r.length-1&&o.shouldSkipCurrentStage({flowName:this.state.flowName,stageIndex:i,environment:e});)i++;if(i<=r.length-1)this.setState({...this.state,currentStageIndex:i});else{if("undefined"===this.state.flowName)return;await this.completeOnboarding(e,"create")}}async goToPreviousStage(e){const t=(await n().K.contextualizedOnboardingStageHelpers.load()).getPreviousStageIndex({flowName:this.state.flowName,stageIndex:this.state.currentStageIndex,environment:e});t>=0&&this.setState({...this.state,currentStageIndex:t})}async completeOnboarding(e,t){const{onboardingFlowNameToFlowConfig:o}=await n().K.contextualizedOnboardingFlowDefinitions.load(),{defaultOnboardingComplete:i,clearAllOnboardingStates:r}=await n().K.contextualizedOnboardingActions.load(),a=o[this.state.flowName];a.onCompleteFlow?await a.onCompleteFlow(e,this.state,t):await i(e,t),r(e)}}const s=new a;(0,o(947115).exposeDebugValue)("contextualizedOnboardingStore",s);const l=s},545821:(e,t,o)=>{o.r(t),o.d(t,{showAsyncModal:()=>a,showAsyncModalComponent:()=>s,testOnly:()=>g});o(267602),o(653476),o(470928),o(241792);var n=o(667294),i=()=>o(956057),r=()=>o(687358);function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r().c;return new Promise(((o,n)=>{try{l({asyncModal:p({renderModal:e,promiseResolve:o,promiseReject:n,store:t}),store:t})}catch(i){n(i)}}))}function s(e){return a((t=>n.createElement(e,t)),arguments.length>1&&void 0!==arguments[1]?arguments[1]:r().c)}function l(e){const{asyncModal:t,store:o=r().c}=e;o.update((e=>({asyncModals:[...e.asyncModals,t]})))}function c(e){const{id:t,promiseResolve:o,store:n=r().c}=e;return e=>{const i=m({id:t,store:n});null!=i&&i.isOpen&&(f({id:t,store:n,update:{isOpen:!1}}),o(e))}}function d(e){const{id:t,promiseResolve:o,store:n=r().c}=e;return()=>{const e=m({id:t,store:n});null!=e&&e.isOpen&&(f({id:t,store:n,update:{isOpen:!1}}),o())}}function u(e){const{id:t,store:o=r().c}=e;return()=>{o.update((e=>({asyncModals:e.asyncModals.filter((e=>e.id!==t))})))}}function p(e){const{renderModal:t,promiseResolve:o,promiseReject:n,store:a=r().c}=e,s=i().Il(),l=u({id:s,store:a}),p=d({id:s,promiseResolve:o,store:a}),m=c({id:s,promiseResolve:o,store:a});return{id:s,internalRenderModal:e=>{try{return t({isOpen:e,onClosed:l,onDismiss:p,resolve:m})}catch(o){throw n(o),o}},isOpen:!0}}function m(e){const{id:t,store:o=r().c}=e;return o.state.asyncModals.find((e=>e.id===t))}function f(e){const{id:t,update:o,store:n=r().c}=e;n.update((e=>({asyncModals:e.asyncModals.map((e=>e.id!==t?e:{...e,...o}))})))}const g={addAsyncModal:l,createAsyncModal:p,createOnClosed:u,createOnDismiss:d,createResolve:c,getAsyncModal:m,updateAsyncModal:f}},687358:(e,t,o)=>{o.d(t,{c:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{asyncModals:[]}}}const i=new n},631842:(e,t,o)=>{o.d(t,{j:()=>a,o:()=>s()});o(241792);var n=o(667294),i=()=>o(687358),r=o(785893);const a=n.memo((function(e){const{store:t=i().c}=e,a=(0,o(142735).VK)((()=>t.state.asyncModals),[t]);return(0,r.jsx)(r.Fragment,{children:a.map((e=>{const{id:t,internalRenderModal:o,isOpen:i}=e,a=o(i);return(0,r.jsx)(n.Fragment,{children:a},t)}))})}));var s=()=>o(545821)},975388:(e,t,o)=>{o.d(t,{y:()=>s});o(267602),o(653476),o(241792);var n=()=>o(513670),i=()=>o(696459),r=()=>o(774756);function a(e){let t=0,o=Number.MAX_SAFE_INTEGER;for(const i of e){if(!i)continue;const e=(0,r().r6)(i),a=(0,n().uZ)(e.max,0,Number.MAX_SAFE_INTEGER),s=(0,n().uZ)(e.min,0,a);t=Math.max(t,s),o=Math.min(o,a)}const a=function(e){let t;for(const o of e){const e=null==o?void 0:o.scroll;switch(e){case"disallow":return"disallow";case"allow":t="allow";break;case void 0:break;default:(0,i().t1)(e)}}return t}(e);return{type:"range",min:(0,n().uZ)(t,0,o),max:o,scroll:a}}function s(e){const t=e.filter(Boolean);return{width:a(t.map((e=>null==e?void 0:e.width))),height:a(t.map((e=>null==e?void 0:e.height)))}}},774756:(e,t,o)=>{o.d(t,{Fg:()=>r,fr:()=>s,r6:()=>i});var n=()=>o(696459);function i(e){if(!e)return{type:"range",min:0,max:Number.MAX_SAFE_INTEGER};if("range"===e.type)return e;let t=0,o=Number.MAX_SAFE_INTEGER;switch(e.type){case"fill":t=Number.MAX_SAFE_INTEGER;break;case"fixed":t=e.length,o=e.length;break;case"unlimited":break;case"min":t=e.length;break;case"max":o=e.length;break;default:(0,n().t1)(e)}return{type:"range",min:t,max:o,scroll:e.scroll}}function r(e){return{width:i(null==e?void 0:e.width),height:i(null==e?void 0:e.height)}}function a(e){switch(null==e?void 0:e.type){case"fill":case"fixed":return!1;case"range":return e.min!==e.max;case"max":case"min":case"unlimited":case void 0:return!0;default:(0,n().t1)(e)}}function s(e){return{width:a(null==e?void 0:e.width),height:a(null==e?void 0:e.height)}}},839717:(e,t,o)=>{o.d(t,{s:()=>i});var n=()=>o(696459);function i(e){const{partial:t,defaultLength:o=0}=e;switch(null==t?void 0:t.type){case"sides":return{type:"sides",left:t.left??o,right:t.right??o,top:t.top??o,bottom:t.bottom??o};case"axes":return{type:"sides",left:t.horizontal??o,right:t.horizontal??o,top:t.vertical??o,bottom:t.vertical??o};case"all":return{type:"sides",left:t.length??o,right:t.length??o,top:t.length??o,bottom:t.length??o};case void 0:return{type:"sides",left:o,right:o,top:o,bottom:o};default:(0,n().t1)(t)}}},73333:(e,t,o)=>{o.d(t,{w:()=>i});var n=o(667294);function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const[o,i]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{i(!1)}),[...t]),(0,n.useEffect)((()=>{const t=setTimeout((()=>{i(!0)}),e);return()=>{clearTimeout(t)}})),o}},977821:(e,t,o)=>{o.d(t,{pp:()=>m,Wf:()=>a,tg:()=>v,Mb:()=>_});var n=o(667294),i=()=>o(219727),r=()=>o(846550);const a=(0,n.createContext)({constrainedSize:{minWidth:0,minHeight:0,maxWidth:void 0,maxHeight:void 0},actualSize:{width:0,height:0},isWidthScrollbarVisible:!1,isHeightScrollbarVisible:!1});a.displayName="ConstrainSizeContext";var s=()=>o(326966);var l=()=>o(774756),c=()=>o(73333),d=()=>o(632314),u=()=>o(965865);var p=o(785893);function m(e){const{children:t,isSizeTransitionAnimated:o,onSizeChanged:m}=e,f=(0,n.useMemo)((()=>(0,l().Fg)(e.areaConstraint)),[e.areaConstraint]),{preferredSize:g,ref:v}=function(e){const t=(0,n.useRef)(null),[o,i]=(0,n.useState)(),r=(0,u().yU)(t),a=e.width.min,s=e.width.max,l=e.height.min,c=e.height.max;return(0,n.useLayoutEffect)((()=>{const e=t.current;if(!e)return;const o=function(e){const{div:t,minWidth:o,maxWidth:n,minHeight:i,maxHeight:r}=e,a={minWidth:t.style.minWidth,maxWidth:t.style.maxWidth,minHeight:t.style.minHeight,maxHeight:t.style.maxHeight,width:t.style.width,height:t.style.height,overflow:t.style.overflow};t.style.width="fit-content",t.style.height="fit-content",t.style.overflow="hidden",t.style.minWidth=`${o}px`,t.style.maxWidth=`${n}px`,t.style.minHeight=`${i}px`,t.style.maxHeight=`${r}px`;const s={width:t.scrollWidth,height:t.scrollHeight};return t.style.width=a.width,t.style.height=a.height,t.style.overflow=a.overflow,t.style.minWidth=a.minWidth,t.style.maxWidth=a.maxWidth,t.style.minHeight=a.minHeight,t.style.maxHeight=a.maxHeight,s}({div:e,minWidth:a,maxWidth:s,minHeight:l,maxHeight:c});i((e=>(0,d().Z)(e,o)?e:o))}),[r,a,s,l,c]),{ref:t,preferredSize:o}}(f),h=(0,n.useMemo)((()=>function(e){const{areaConstraint:t,preferredSize:o}=e;return{width:(0,s().uZ)((null==o?void 0:o.width)??0,t.width.min,t.width.max),height:(0,s().uZ)((null==o?void 0:o.height)??0,t.height.min,t.height.max)}}({areaConstraint:f,preferredSize:g})),[f,g]),_=function(e){const{actualSize:t,preferredSize:o,areaConstraint:n}=e,i="allow"===n.width.scroll,r="allow"===n.height.scroll,a=i&&void 0!==(null==o?void 0:o.width)&&t.width<o.width,s=r&&void 0!==(null==o?void 0:o.width)&&t.height<o.height,l={minWidth:n.width.min,maxWidth:i?void 0:n.width.max,minHeight:n.height.min,maxHeight:r?void 0:n.height.max};return{actualSize:t,constrainedSize:l,isWidthScrollbarVisible:a,isHeightScrollbarVisible:s}}({actualSize:h,preferredSize:g,areaConstraint:f}),b=function(e){const{actualSize:t,areaConstraint:o,isSizeTransitionAnimated:n}=e,a=(0,c().w)(100),{prefersReducedMotion:s}=(0,i().Fy)(),d=(0,l().fr)(o);return(0,r().yK)((()=>{const e="allow"===o.width.scroll,i="allow"===o.height.scroll;return{wrapper:{position:"relative"},content:{height:null==t?void 0:t.height,overflowX:e?"auto":"clip",overflowY:i?"auto":"clip",WebkitOverflowScrolling:"touch",width:null==t?void 0:t.width,transition:n&&a&&!s?"0.25s ease width, 0.25s ease height":void 0},measure:{display:"flex",flexDirection:"column",height:d.height?"fit-content":"100%",maxHeight:o.height.max,maxWidth:o.width.max,minHeight:o.height.min,minWidth:o.width.min,width:d.width?"fit-content":"100%"}}}),[t,o,n,a,s,d])}({actualSize:h,areaConstraint:f,isSizeTransitionAnimated:o});return(0,n.useEffect)((()=>{null==m||m(h,g)}),[h,m,g]),(0,p.jsx)(a.Provider,{value:_,children:(0,p.jsx)("div",{style:b.wrapper,children:(0,p.jsx)("div",{style:b.content,children:(0,p.jsx)("div",{ref:v,className:"measure",style:b.measure,children:t})})})})}var f=()=>o(142735),g=()=>o(505121);function v(){const e=(0,n.useContext)(a),t=(0,f().Kw)(g().Z);return null!=e&&e.isHeightScrollbarVisible?t:0}var h=()=>o(808577);function _(e){const{minimumOutsideSpacing:t}=e,o=(0,h().iP)();return(0,n.useMemo)((()=>{const e={type:"max",length:o.width-t.left-t.right},n={type:"max",length:o.height-t.top-t.bottom};return(0,l().Fg)({width:e,height:n})}),[t.bottom,t.left,t.right,t.top,o.height,o.width])}},620768:(e,t,o)=>{o.d(t,{U:()=>u});var n=o(667294),i=()=>o(846550),r=()=>o(1910),a=()=>o(527278),s=()=>o(688049),l=()=>o(977821),c=()=>o(29177),d=o(785893);function u(e){const{onClick:t,onDismiss:o,style:u,hoveredStyle:m,showBackground:f=!0}=e,g=function(e,t){const o=(0,l().tg)();return(0,i().yK)((n=>({button:{alignItems:"center",background:t?n.buttonHoveredBackground:"none",borderRadius:"100%",display:"flex",height:22,justifyContent:"center",position:"absolute",right:10+o,top:10,width:22,zIndex:10,...e},buttonHovered:{background:t?n.buttonPressedBackground:n.buttonHoveredBackground}})),[t,e,o])}(u,f),v=(0,n.useContext)(c().g),h=function(e){const{onClick:t,onDismiss:o}=e,i=(0,n.useCallback)((e=>{null==t||t(e),null==o||o()}),[t,o]);return t||o?i:void 0}({onClick:t,onDismiss:o??v});return h?(0,d.jsx)(r().Z,{ariaLabel:a().Z.formatMessage(p.dismissModalAriaLabel),icon:s().D,onClick:h,style:g.button,hoveredStyle:{...g.buttonHovered,...m}}):null}const p=(0,o(788860).vU)({dismissModalAriaLabel:{id:"dismiss.dismissButton.label",defaultMessage:"Dismiss"}})},525454:(e,t,o)=>{o.d(t,{a:()=>u});var n=o(667294),i=()=>o(788860),r=()=>o(696459),a=()=>o(198829),s=()=>o(352230),l=()=>o(29177),c=()=>o(620768),d=o(785893);function u(e){const{children:t,title:o,displayMode:u}=e,p=(0,n.useContext)(l().g);switch(u){case"phone":return(0,d.jsx)(a().Z,{menuType:s().o.Modal,onClickRight:p,title:o,whiteBackground:!0,disableBottomPadding:!0,right:p?(0,d.jsx)(i()._H,{defaultMessage:"Done",id:"appearanceSettings.modal.done"}):null,children:t});case"desktop":return(0,d.jsxs)(d.Fragment,{children:[t,(0,d.jsx)(c().U,{})]});default:(0,r().t1)(u)}}},29177:(e,t,o)=>{o.d(t,{g:()=>n});const n=(0,o(667294).createContext)(void 0);n.displayName="DismissContext"},916095:(e,t,o)=>{o.d(t,{U4:()=>i().U,a5:()=>n().a,gv:()=>r().g});var n=()=>o(525454),i=()=>o(620768),r=()=>o(29177)},965865:(e,t,o)=>{o.d(t,{n4:()=>u,yU:()=>d,c7:()=>c});o(821057);var n=o(667294),i=(o(670560),o(267602),o(653476),()=>o(632314));const r=/auto|scroll/;function a(e){const t=getComputedStyle(e),o="border-box"===t.boxSizing,n=r.test(t.overflowY||""),i=r.test(t.overflowX||""),a=parseFloat(t.paddingTop||"0"),s=parseFloat(t.paddingRight||"0"),l=parseFloat(t.paddingBottom||"0"),c=parseFloat(t.paddingLeft||"0"),d=parseFloat(t.borderTopWidth||"0"),u=parseFloat(t.borderRightWidth||"0"),p=parseFloat(t.borderBottomWidth||"0"),m=c+s,f=a+l,g=parseFloat(t.borderLeftWidth||"0")+u,v=d+p,h=i?e.offsetHeight-v-e.clientHeight:0,_=n?e.offsetWidth-g-e.clientWidth:0,b=o?m+g:0,y=o?f+v:0;return{borderBoxWidth:parseFloat(t.width||"0")-b-_+m+_+g,borderBoxHeight:parseFloat(t.height||"0")-y-h+f+h+v}}let s,l;function c(e,t){s=s??new WeakMap,l=l??function(e){return new ResizeObserver((t=>{const o=new Map;for(const e of t)o.set(e.target,e);for(const n of o.values()){const t=n.target,o=e.get(t);if(!o||0===o.length)continue;let i;if("borderBoxSize"in n){const e=n.borderBoxSize[0];i={width:e.inlineSize,height:e.blockSize}}else{const{borderBoxWidth:e,borderBoxHeight:o}=a(t);i={width:e,height:o}}for(const e of o)e(i)}}))}(s),(0,n.useEffect)((()=>{const o=e.current;if(o){var n;if(s.has(o))null===(n=s.get(o))||void 0===n||n.push(t);else l.observe(o),s.set(o,[t]);return()=>{const e=(s.get(o)??[]).filter((e=>e!==t));0===e.length?(l.unobserve(o),s.delete(o)):s.set(o,e)}}}),[t,e])}function d(e){const[t,o]=(0,n.useState)(void 0);return c(e,(0,n.useCallback)((e=>{o((t=>(0,i().Z)(t,e)?t:e))}),[])),t}function u(e){const{children:t,onSizeChange:o}=e,i=(0,n.useRef)(null),r=d(i);(0,n.useEffect)((()=>{o&&r&&o(r)}),[r,o]);const a=n.Children.only(t);return n.cloneElement(a,{ref:i})}},348909:(e,t,o)=>{o.d(t,{U:()=>n});class n{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;this.value=e,this.textInstanceId=t;const o=n.overrides.get(t);o&&e>o&&this.updateOverride()}get(){return n.overrides.get(this.textInstanceId)??this.value}set(e){const t=this.get();(0,o(536279).T)(e>=t,"Clock value must be non-decreasing"),this.value=e,this.updateOverride()}updateOverride(){n.overrides.set(this.textInstanceId,this.value)}static TEST_ONLY__clearOverrides(){this.overrides.clear()}}n.overrides=new Map},268752:(e,t,o)=>{o.d(t,{y:()=>u});o(821057);var n=()=>o(481529),i=()=>o(396136),r=()=>o(386616),a=()=>o(513670),s=()=>o(636340),l=()=>o(970105),c=()=>o(269299),d=()=>o(826955);function u(e){const{environment:t,operation:o,transaction:u,inMemoryRecordCache:p}=e;if(o.pointer.table!==i().iU)throw new Error("Expected block operation");const m=new(d().G)(t,o.pointer,{inMemoryRecordCache:p});(0,n().V_)(o)?function(e){const{environment:t,operation:o,store:n,transaction:i}=e;if("update"===o.command&&a().Xy(o.path,["properties"])&&"title"in o.args){const{title:e,...r}=o.args;l().sO({environment:t,store:n.getBlockTitleStore(),value:e,transaction:i}),Object.keys(r).length>0&&s().sW({store:n.getPropertiesStore(),data:r,transaction:i})}else if("set"===o.command&&a().Xy(o.path,["properties","title"]))l().sO({environment:t,store:n.getBlockTitleStore(),value:o.args,transaction:i});else{if("update"===o.command&&0===o.path.length&&"properties"in o.args||"set"===o.command&&a().Xy(o.path,["properties"]))throw new Error("Woah woah woah - this is a collaborative app here. We can't just overwrite the entire properties object!");c().applyOperation({store:n,operation:o,transaction:i})}}({environment:t,operation:o,store:m,transaction:u}):(0,r().Qf)(o)?c().applyCrdtTextOperation({store:m,operation:o,invertedOperation:void 0,transaction:u}):c().applyOperation({store:m,operation:o,transaction:u})}},643937:(e,t,o)=>{o.d(t,{Cf:()=>g,Wc:()=>v,tE:()=>f});var n=()=>o(156642),i=()=>o(606571),r=()=>o(536279),a=()=>o(659278),s=()=>o(431595),l=()=>o(955620),c=()=>o(970105),d=()=>o(269299),u=()=>o(852465),p=()=>o(339523),m=()=>o(718048);function f(e){const{transaction:t,targetStore:o,sourceBlockStore:n}=e,a=(0,r().TO)(n.getBlockTitleTextSliceTree(),i().o6),l=(0,p().sQ)(o);if(!l||!m().Ls({store:o,blockStore:l}))throw new(s().p8)("Previous block should exist and use CRDT");const c=a.getOperationsForSplitForMerge();(0,r().T)(0===c.textSliceTreesToMove.length,"Root nodes should have no siblings to move"),h({sourceBlockStore:n,targetBlockStore:l,splitInfo:c,isMerge:!0,transaction:t})}function g(e){const{environment:t,transaction:o,multiSelection:i,removedBlocks:a,movedBlocks:s}=e,l=i.start.store;function d(e){if((0,r().T)(!s.has(e),"Block being reparented should not be deleted"),!(0,n().XD)(e.getType(),e.getFormat()))return;const i=e.getBlockTitleStore();(0,r().T)(m().FX(i),"Expected CRDT block title"),c().pe({environment:t,transaction:o,selection:{startIndex:0,endIndex:1/0},store:i}),f({transaction:o,sourceBlockStore:e,targetStore:l})}(0,r().T)(m().FX(l),"Expected CRDT block title");const g=(0,p().sQ)(i.end.store);for(const n of a){if(n===g)return;d(n);for(const e of(0,u().MI)({blockStore:n,transclusionReferences:"omit",childPages:"omit"})){if(e===g)return;d(e)}}}function v(e){const{sourceBlockStore:t,targetBlockStore:o,splitAtGraphemeIndex:n,transaction:s,moveIntoNewBlock:c}=e;(0,r().T)(t.useCrdt(),"Expected CRDT source block"),(0,r().T)(o.useCrdt(),"Expected CRDT target block");const u=t.getBlockTitleStore().getValue(),p=new(a().W3)(l().eeV(u)).getStringStartIndex(n),m=(0,r().TO)(t.getBlockTitleTextSliceTree(),i().o6).getOperationsForSplitAtIndex(p);!function(e){const{blockStore:t,splitInfo:o,transaction:n}=e,i=t.getBlockTitleStore().getValue()??[],r=o.textSliceTreesToMove,a="splitWithinNode"===o.type?o.textSliceTreeToSplit:o.newTextSliceTree;for(const s of r){const e=s.getTextSlice().getSearchLabel(),o=s.getTextSlice().getStartItem().id,r=t.id,l=a.getTextSlice().textInstanceId,c=a.getTextSlice().getSearchLabel(),u=a.getTextSlice().getEndItem().id;d().applyCrdtTextOperation({transaction:n,store:t,operation:{command:"moveTextSlice",pointer:t.pointer,path:[],args:{textInstanceId:s.getTextSlice().textInstanceId,sourceSearchLabel:e,textSliceStartItemId:o,targetBlockId:r,targetTextInstanceId:l,targetSearchLabel:c,targetTextSliceEndItemId:u,forDowngrade:{fullSourceTextValue:i,fullTargetTextValue:i}}},invertedOperation:void 0})}}({blockStore:t,splitInfo:m,transaction:s}),c?function(e){const{sourceBlockStore:t,targetBlockStore:o,splitInfo:n,transaction:a}=e;let s,c,u,p,m;if("splitNodeEnd"===n.type){const e=n.newTextSliceTree;s=e.getTextSlice().textInstanceId,c=e.getTextSlice().getSearchLabel(),u=e.getTextSlice().getStartItem().id;const t=n.previousTextSliceTree.getTextSlice();p=t.textInstanceId,m=t.getEndItem().id}else d().applyCrdtTextOperation({transaction:a,store:t,operation:{command:"splitText",pointer:t.pointer,path:[],args:n.splitOp},invertedOperation:void 0}),s=n.splitOp.textInstanceId,c=n.splitOp.searchLabel,u=n.splitOp.id,p=n.splitOp.textInstanceId,m=n.splitOp.id;const f=(0,r().TO)(t.getBlockTitleTextSliceTree(),i().o6),g=(0,r().TO)(f.getGraphemeIndicesOfSlice({boundary:"start",textInstanceId:s,start:u}),i().zg).startIndex,v=f.getTextValue(),h=l().KU1(v,0,g),_=l().KU1(v,g,l().VrM(v));d().applyCrdtTextOperation({transaction:a,store:t,operation:{command:"moveTextSliceIntoBlock",path:[],pointer:t.pointer,args:{textInstanceId:s,sourceSearchLabel:c,textSliceStartItemId:u,targetBlockId:o.id,targetSearchLabel:"",forDowngrade:{fullSourceTextValue:h,fullTargetTextValue:_}}},invertedOperation:{command:"invertedMoveTextSlice",path:[],pointer:t.pointer,args:{textInstanceId:s,textSliceStartItemId:u,targetTextInstanceId:p,targetTextSliceEndItemId:m,sourceBlockId:o.id,previousSourceTextValue:o.getBlockTitleStore().getValue()??[],targetBlockId:t.id,previousTargetTextValue:t.getBlockTitleStore().getValue()??[]}}})}({sourceBlockStore:t,targetBlockStore:o,splitInfo:m,transaction:s}):h({sourceBlockStore:t,targetBlockStore:o,splitInfo:m,isMerge:!1,transaction:s})}function h(e){const{sourceBlockStore:t,targetBlockStore:o,splitInfo:n,isMerge:a,transaction:s}=e;let c,u,p,m,f;if("splitNodeEnd"===n.type){const e=n.newTextSliceTree;c=e.getTextSlice().textInstanceId,p=e.getTextSlice().getSearchLabel(),u=e.getTextSlice().getStartItem().id;const t=n.previousTextSliceTree.getTextSlice();m=t.textInstanceId,f=t.getEndItem().id}else d().applyCrdtTextOperation({transaction:s,store:t,operation:{command:"splitText",pointer:t.pointer,path:[],args:n.splitOp},invertedOperation:void 0}),c=n.splitOp.textInstanceId,p=n.splitOp.searchLabel,u=n.splitOp.id,m=n.splitOp.textInstanceId,f=n.splitOp.id;const g=(0,r().TO)(t.getBlockTitleTextSliceTree(),i().o6),v=(0,r().TO)(g.getGraphemeIndicesOfSlice({boundary:"start",textInstanceId:c,start:u}),i().zg).startIndex,h=g.getTextValue(),_=l().KU1(h,0,v),b=l().KU1(h,v,l().VrM(h)),y=o.getBlockTitleStore().getValue()??[],S=l().Zxt(l().P$X(y,b,l().VrM(y))),w=(0,r().TO)(o.getBlockTitleTextSliceTree(),i().o6).getLastTextSliceTreeInPreOrderTraversal(),k=w.getTextSlice().getSearchLabel();d().applyCrdtTextOperation({transaction:s,store:t,operation:{command:"moveTextSlice",path:[],pointer:t.pointer,args:{textInstanceId:c,textSliceStartItemId:u,sourceSearchLabel:p,targetBlockId:o.id,targetTextInstanceId:w.getTextSlice().textInstanceId,targetSearchLabel:k,targetTextSliceEndItemId:w.getTextSlice().getEndItem().id,isMerge:a,forDowngrade:{fullSourceTextValue:_,fullTargetTextValue:S}}},invertedOperation:{command:"invertedMoveTextSlice",path:[],pointer:t.pointer,args:{textInstanceId:c,textSliceStartItemId:u,targetTextInstanceId:m,targetTextSliceEndItemId:f,sourceBlockId:o.id,previousSourceTextValue:y,targetBlockId:t.id,previousTargetTextValue:t.getBlockTitleStore().getValue()??[]}}})}},576808:(e,t,o)=>{o.d(t,{b:()=>r});var n=()=>o(636340),i=()=>o(970105);function r(e){const{environment:t,store:o,properties:r,transaction:a}=e;"title"in r&&i().sO({environment:t,store:o.getBlockTitleStore(),value:r.title??void 0,transaction:a});const{title:s,...l}=r;Object.keys(l).length>0&&n().sW({store:o.getPropertiesStore(),data:l,transaction:a})}},718048:(e,t,o)=>{o.d(t,{FX:()=>c,Ls:()=>l,WA:()=>d,ek:()=>s,kZ:()=>a});var n=()=>o(396136),i=()=>o(339523),r=()=>o(876822);const a=100,s=(0,o(300675)._5)();function l(e){const{store:t,blockStore:o}=e;return o.useCrdt()&&o.getBlockTitleStore()===t}function c(e){if(!e.isTable(n().iU))return!1;const t=(0,i().sQ)(e);return!!t&&l({store:e,blockStore:t})}function d(e){var t;const o=(null==e?void 0:e.getCrdtStatus())??(null===(t=r().default.state.currentSpaceStore)||void 0===t?void 0:t.getCrdtStatus())??"off";return"on"===o||"migrating"===o}},950208:(e,t,o)=>{o.d(t,{ys:()=>s,VV:()=>l,MZ:()=>a,VR:()=>r});var n=()=>o(524434),i=()=>o(749826);function r(e){const{configurationState:t}=e;return t.deepFindRequested&&n().KR.isDeepFindEnabled()}function a(e){const{configurationState:t,assistantSurface:o}=e;return r({configurationState:t})&&o.isType("fullPage")}function s(){const e=function(e,t,o){return{universalBlendingEnabled:e.isDeepFindUniversalBlendingEnabled(),queryGenEnabled:e.isDeepFindQueryGenEnabled(),notionSourceNumResults:t("notionSourceNumResults"),enableRequestTracing:o("deep_find_enable_request_tracing"),renderAndHydrateNotionPages:o("deep_find_render_and_hydrate_notion_pages"),maxPagesToDecorate:t("maxPagesToDecorate"),maxResultsPerSourceToBlendedRanking:t("maxResultsPerSourceToBlendedRanking"),maxFinalResults:t("maxFinalResults"),useQueryGenForNotionSearch:o("deep_find_use_query_gen_for_notion_search"),shouldShowStreamingUx:o("deep_find_should_show_streaming_ux")}}(n().KR.state,(e=>i().default.getConfigKey("deep_find_config",e)),(e=>i().default.checkGate({gateName:e})));return e}const l=new(o(435308).default)((()=>{var e;const t=n().KR.isDeepFindEnabled(),i=Boolean(null===(e=o(379072).default.getActiveAssistantConfigurationState())||void 0===e?void 0:e.deepFindRequested);return t&&i}),{debugName:"isDeepFindActiveStore"})},544903:(e,t,o)=>{o.d(t,{D8:()=>r,OG:()=>a,ri:()=>s,vF:()=>i});var n=()=>o(677559);const i=new(n().Ss)("AppTemplates",(async()=>{const[{AppInitializationOverlay:e},t,n,i,r,{appConfigs:a},{default:s},{HorizontalTemplatePicker:l}]=await Promise.all([Promise.all([o.e(62743),o.e(52774),o.e(44832),o.e(39938),o.e(84885),o.e(2971),o.e(53335),o.e(71896),o.e(46616),o.e(63707),o.e(86609),o.e(63257),o.e(1913),o.e(56054),o.e(4163),o.e(18216),o.e(21820),o.e(69753),o.e(63203),o.e(67310)]).then(o.bind(o,604772)),Promise.all([o.e(62743),o.e(52774),o.e(44832),o.e(39938),o.e(84885),o.e(2971),o.e(53335),o.e(71896),o.e(46616),o.e(63707),o.e(86609),o.e(63257),o.e(1913),o.e(56054),o.e(4163),o.e(18216),o.e(21820),o.e(69753),o.e(63203),o.e(67310)]).then(o.bind(o,241174)),Promise.all([o.e(62743),o.e(52774),o.e(44832),o.e(39938),o.e(84885),o.e(2971),o.e(53335),o.e(71896),o.e(46616),o.e(63707),o.e(86609),o.e(63257),o.e(1913),o.e(56054),o.e(4163),o.e(18216),o.e(21820),o.e(69753),o.e(63203),o.e(67310)]).then(o.bind(o,763707)),Promise.all([o.e(62743),o.e(52774),o.e(44832),o.e(39938),o.e(84885),o.e(2971),o.e(53335),o.e(71896),o.e(46616),o.e(63707),o.e(86609),o.e(63257),o.e(1913),o.e(56054),o.e(4163),o.e(18216),o.e(21820),o.e(69753),o.e(63203),o.e(67310)]).then(o.bind(o,680688)),Promise.all([o.e(62743),o.e(52774),o.e(44832),o.e(39938),o.e(84885),o.e(2971),o.e(53335),o.e(71896),o.e(46616),o.e(63707),o.e(86609),o.e(63257),o.e(1913),o.e(56054),o.e(4163),o.e(18216),o.e(21820),o.e(69753),o.e(63203),o.e(67310)]).then(o.bind(o,180921)),Promise.all([o.e(62743),o.e(52774),o.e(44832),o.e(39938),o.e(84885),o.e(2971),o.e(53335),o.e(71896),o.e(46616),o.e(63707),o.e(86609),o.e(63257),o.e(1913),o.e(56054),o.e(4163),o.e(18216),o.e(21820),o.e(69753),o.e(63203),o.e(67310)]).then(o.bind(o,2971)),Promise.all([o.e(62743),o.e(52774),o.e(44832),o.e(39938),o.e(84885),o.e(2971),o.e(53335),o.e(71896),o.e(46616),o.e(63707),o.e(86609),o.e(63257),o.e(1913),o.e(56054),o.e(4163),o.e(18216),o.e(21820),o.e(69753),o.e(63203),o.e(67310)]).then(o.bind(o,568981)),Promise.all([o.e(62743),o.e(52774),o.e(44832),o.e(39938),o.e(90698),o.e(84885),o.e(37358),o.e(5242),o.e(7312),o.e(90424),o.e(81580),o.e(84325),o.e(31189),o.e(69343),o.e(46293),o.e(94556),o.e(78701),o.e(38804),o.e(17100),o.e(11846),o.e(70355),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(46616),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63707),o.e(86609),o.e(91253),o.e(4642),o.e(5006),o.e(6612),o.e(61171),o.e(23179),o.e(75377),o.e(31020),o.e(2942),o.e(73682),o.e(58591),o.e(54803),o.e(1953),o.e(10216),o.e(58565),o.e(69197),o.e(42055),o.e(38739),o.e(44751),o.e(81567),o.e(63257),o.e(34291),o.e(1913),o.e(56054),o.e(95076),o.e(92341),o.e(82658),o.e(4163),o.e(69583),o.e(22759),o.e(20343),o.e(21820),o.e(46945),o.e(10553),o.e(67019),o.e(27039),o.e(25265),o.e(14581),o.e(38632),o.e(61651),o.e(88702),o.e(54307),o.e(43184),o.e(87647),o.e(75861),o.e(46257),o.e(15819),o.e(45376),o.e(74943),o.e(23721),o.e(58461),o.e(72329),o.e(19592),o.e(3331),o.e(98672),o.e(52658),o.e(44642),o.e(78),o.e(58586)]).then(o.bind(o,732171))]);return{AppInitializationOverlay:e,templatePickerItems:t,appTemplatesSetupActions:n,untypedFeaturesSetupActions:i,appTemplatesSprintBoardActions:r,appConfigs:a,TemplatePickerTemplateList:s,HorizontalTemplatePicker:l}})),r=(0,n().kF)(i,(e=>e.AppInitializationOverlay)),a=(0,n().kF)(i,(e=>e.TemplatePickerTemplateList)),s=(0,n().kF)(i,(e=>e.HorizontalTemplatePicker))},954344:(e,t,o)=>{o.d(t,{F:()=>n});const n=new(o(677559).Ss)("emojiData",(async()=>(await o.e(65616).then(o.bind(o,740045))).default))},153831:(e,t,o)=>{o.d(t,{h:()=>n});const n=new(o(677559).Ss)("isTemplate",(async()=>await o.e(96047).then(o.bind(o,658956))))},555061:(e,t,o)=>{o.d(t,{e:()=>i});var n=()=>o(347960);const i=new(o(677559).Ss)("katex",(async()=>{const[e]=await Promise.all([Promise.all([o.e(41008),o.e(12793)]).then(o.bind(o,541008)),(0,n().ZP)(o(714230).Z.katex.katexMinCss,{resourceType:n()._g.Stylesheet})]);return await Promise.all([o.e(41008),o.e(12793)]).then(o.bind(o,967854)),e.default}))},964433:(e,t,o)=>{o.d(t,{p:()=>n});const n=new(o(677559).Ss)("markdown-linkify-it",(async()=>{const[e,t]=await Promise.all([o.e(31189).then(o.t.bind(o,809980,23)),o.e(31189).then(o.t.bind(o,968337,23))]);return{MarkdownIt:e.default,LinkifyIt:t.default}}))},770455:(e,t,o)=>{o.d(t,{Gr:()=>u,Js:()=>d,WW:()=>c,Wq:()=>a,eU:()=>p,nP:()=>r,qV:()=>m,r4:()=>l,rZ:()=>s});var n=()=>o(677559);const i=new(n().Ss)("mobile",(async()=>{const[{TopLevelMobileComponents:e},{MobileNativeFullPageComponents:t},{default:n},{default:i},{MobileActionBar:r},{NativeMobileActionBar:a},{default:s},{default:l},{default:c}]=await Promise.all([Promise.all([o.e(62743),o.e(52774),o.e(44832),o.e(39938),o.e(90698),o.e(84885),o.e(37358),o.e(5242),o.e(7312),o.e(90424),o.e(81580),o.e(84325),o.e(31189),o.e(69343),o.e(46293),o.e(17100),o.e(11846),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(46616),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63707),o.e(86609),o.e(91253),o.e(4642),o.e(5006),o.e(6612),o.e(61171),o.e(23179),o.e(75377),o.e(31020),o.e(2942),o.e(73682),o.e(58591),o.e(54803),o.e(1953),o.e(10216),o.e(58565),o.e(69197),o.e(42055),o.e(38739),o.e(44751),o.e(81567),o.e(63257),o.e(34291),o.e(1913),o.e(56054),o.e(95076),o.e(82658),o.e(4163),o.e(22759),o.e(21820),o.e(52183),o.e(14581),o.e(88702),o.e(5509),o.e(43184),o.e(35332),o.e(46257),o.e(73538),o.e(74943),o.e(34004),o.e(58461),o.e(83258),o.e(3331),o.e(67092),o.e(82249),o.e(95733),o.e(25008)]).then(o.bind(o,263569)),Promise.all([o.e(62743),o.e(52774),o.e(44832),o.e(39938),o.e(90698),o.e(84885),o.e(37358),o.e(5242),o.e(7312),o.e(90424),o.e(81580),o.e(84325),o.e(31189),o.e(69343),o.e(46293),o.e(17100),o.e(11846),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(46616),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63707),o.e(86609),o.e(91253),o.e(4642),o.e(5006),o.e(6612),o.e(61171),o.e(23179),o.e(75377),o.e(31020),o.e(2942),o.e(73682),o.e(58591),o.e(54803),o.e(1953),o.e(10216),o.e(58565),o.e(69197),o.e(42055),o.e(38739),o.e(44751),o.e(81567),o.e(63257),o.e(34291),o.e(1913),o.e(56054),o.e(95076),o.e(82658),o.e(4163),o.e(22759),o.e(21820),o.e(52183),o.e(14581),o.e(88702),o.e(5509),o.e(43184),o.e(35332),o.e(46257),o.e(73538),o.e(74943),o.e(34004),o.e(58461),o.e(83258),o.e(3331),o.e(67092),o.e(82249),o.e(95733),o.e(25008)]).then(o.bind(o,723912)),Promise.all([o.e(62743),o.e(52774),o.e(44832),o.e(39938),o.e(90698),o.e(84885),o.e(37358),o.e(5242),o.e(7312),o.e(90424),o.e(81580),o.e(84325),o.e(31189),o.e(69343),o.e(46293),o.e(17100),o.e(11846),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(46616),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63707),o.e(86609),o.e(91253),o.e(4642),o.e(5006),o.e(6612),o.e(61171),o.e(23179),o.e(75377),o.e(31020),o.e(2942),o.e(73682),o.e(58591),o.e(54803),o.e(1953),o.e(10216),o.e(58565),o.e(69197),o.e(42055),o.e(38739),o.e(44751),o.e(81567),o.e(63257),o.e(34291),o.e(1913),o.e(56054),o.e(95076),o.e(82658),o.e(4163),o.e(22759),o.e(21820),o.e(52183),o.e(14581),o.e(88702),o.e(5509),o.e(43184),o.e(35332),o.e(46257),o.e(73538),o.e(74943),o.e(34004),o.e(58461),o.e(83258),o.e(3331),o.e(67092),o.e(82249),o.e(95733),o.e(25008)]).then(o.bind(o,414236)),Promise.all([o.e(62743),o.e(52774),o.e(44832),o.e(39938),o.e(90698),o.e(84885),o.e(37358),o.e(5242),o.e(7312),o.e(90424),o.e(81580),o.e(84325),o.e(31189),o.e(69343),o.e(46293),o.e(17100),o.e(11846),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(46616),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63707),o.e(86609),o.e(91253),o.e(4642),o.e(5006),o.e(6612),o.e(61171),o.e(23179),o.e(75377),o.e(31020),o.e(2942),o.e(73682),o.e(58591),o.e(54803),o.e(1953),o.e(10216),o.e(58565),o.e(69197),o.e(42055),o.e(38739),o.e(44751),o.e(81567),o.e(63257),o.e(34291),o.e(1913),o.e(56054),o.e(95076),o.e(82658),o.e(4163),o.e(22759),o.e(21820),o.e(52183),o.e(14581),o.e(88702),o.e(5509),o.e(43184),o.e(35332),o.e(46257),o.e(73538),o.e(74943),o.e(34004),o.e(58461),o.e(83258),o.e(3331),o.e(67092),o.e(82249),o.e(95733),o.e(25008)]).then(o.bind(o,166350)),Promise.all([o.e(62743),o.e(52774),o.e(44832),o.e(39938),o.e(90698),o.e(84885),o.e(37358),o.e(5242),o.e(7312),o.e(90424),o.e(81580),o.e(84325),o.e(31189),o.e(69343),o.e(46293),o.e(17100),o.e(11846),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(46616),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63707),o.e(86609),o.e(91253),o.e(4642),o.e(5006),o.e(6612),o.e(61171),o.e(23179),o.e(75377),o.e(31020),o.e(2942),o.e(73682),o.e(58591),o.e(54803),o.e(1953),o.e(10216),o.e(58565),o.e(69197),o.e(42055),o.e(38739),o.e(44751),o.e(81567),o.e(63257),o.e(34291),o.e(1913),o.e(56054),o.e(95076),o.e(82658),o.e(4163),o.e(22759),o.e(21820),o.e(52183),o.e(14581),o.e(88702),o.e(5509),o.e(43184),o.e(35332),o.e(46257),o.e(73538),o.e(74943),o.e(34004),o.e(58461),o.e(83258),o.e(3331),o.e(67092),o.e(82249),o.e(95733),o.e(25008)]).then(o.bind(o,42809)),Promise.all([o.e(62743),o.e(52774),o.e(44832),o.e(39938),o.e(90698),o.e(84885),o.e(37358),o.e(5242),o.e(7312),o.e(90424),o.e(81580),o.e(84325),o.e(31189),o.e(69343),o.e(46293),o.e(17100),o.e(11846),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(46616),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63707),o.e(86609),o.e(91253),o.e(4642),o.e(5006),o.e(6612),o.e(61171),o.e(23179),o.e(75377),o.e(31020),o.e(2942),o.e(73682),o.e(58591),o.e(54803),o.e(1953),o.e(10216),o.e(58565),o.e(69197),o.e(42055),o.e(38739),o.e(44751),o.e(81567),o.e(63257),o.e(34291),o.e(1913),o.e(56054),o.e(95076),o.e(82658),o.e(4163),o.e(22759),o.e(21820),o.e(52183),o.e(14581),o.e(88702),o.e(5509),o.e(43184),o.e(35332),o.e(46257),o.e(73538),o.e(74943),o.e(34004),o.e(58461),o.e(83258),o.e(3331),o.e(67092),o.e(82249),o.e(95733),o.e(25008)]).then(o.bind(o,320662)),Promise.all([o.e(62743),o.e(52774),o.e(44832),o.e(39938),o.e(90698),o.e(84885),o.e(37358),o.e(5242),o.e(7312),o.e(90424),o.e(81580),o.e(84325),o.e(31189),o.e(69343),o.e(46293),o.e(17100),o.e(11846),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(46616),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63707),o.e(86609),o.e(91253),o.e(4642),o.e(5006),o.e(6612),o.e(61171),o.e(23179),o.e(75377),o.e(31020),o.e(2942),o.e(73682),o.e(58591),o.e(54803),o.e(1953),o.e(10216),o.e(58565),o.e(69197),o.e(42055),o.e(38739),o.e(44751),o.e(81567),o.e(63257),o.e(34291),o.e(1913),o.e(56054),o.e(95076),o.e(82658),o.e(4163),o.e(22759),o.e(21820),o.e(52183),o.e(14581),o.e(88702),o.e(5509),o.e(43184),o.e(35332),o.e(46257),o.e(73538),o.e(74943),o.e(34004),o.e(58461),o.e(83258),o.e(3331),o.e(67092),o.e(82249),o.e(95733),o.e(25008)]).then(o.bind(o,997823)),Promise.all([o.e(62743),o.e(52774),o.e(44832),o.e(39938),o.e(90698),o.e(84885),o.e(37358),o.e(5242),o.e(7312),o.e(90424),o.e(81580),o.e(84325),o.e(31189),o.e(69343),o.e(46293),o.e(17100),o.e(11846),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(46616),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63707),o.e(86609),o.e(91253),o.e(4642),o.e(5006),o.e(6612),o.e(61171),o.e(23179),o.e(75377),o.e(31020),o.e(2942),o.e(73682),o.e(58591),o.e(54803),o.e(1953),o.e(10216),o.e(58565),o.e(69197),o.e(42055),o.e(38739),o.e(44751),o.e(81567),o.e(63257),o.e(34291),o.e(1913),o.e(56054),o.e(95076),o.e(82658),o.e(4163),o.e(22759),o.e(21820),o.e(52183),o.e(14581),o.e(88702),o.e(5509),o.e(43184),o.e(35332),o.e(46257),o.e(73538),o.e(74943),o.e(34004),o.e(58461),o.e(83258),o.e(3331),o.e(67092),o.e(82249),o.e(95733),o.e(25008)]).then(o.bind(o,399528)),Promise.all([o.e(62743),o.e(52774),o.e(44832),o.e(39938),o.e(90698),o.e(84885),o.e(37358),o.e(5242),o.e(7312),o.e(90424),o.e(81580),o.e(84325),o.e(31189),o.e(69343),o.e(46293),o.e(17100),o.e(11846),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(46616),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63707),o.e(86609),o.e(91253),o.e(4642),o.e(5006),o.e(6612),o.e(61171),o.e(23179),o.e(75377),o.e(31020),o.e(2942),o.e(73682),o.e(58591),o.e(54803),o.e(1953),o.e(10216),o.e(58565),o.e(69197),o.e(42055),o.e(38739),o.e(44751),o.e(81567),o.e(63257),o.e(34291),o.e(1913),o.e(56054),o.e(95076),o.e(82658),o.e(4163),o.e(22759),o.e(21820),o.e(52183),o.e(14581),o.e(88702),o.e(5509),o.e(43184),o.e(35332),o.e(46257),o.e(73538),o.e(74943),o.e(34004),o.e(58461),o.e(83258),o.e(3331),o.e(67092),o.e(82249),o.e(95733),o.e(25008)]).then(o.bind(o,470386))]);return{TopLevelMobileComponents:e,MobileNativeFullPageComponents:t,MobileBottomBar:n,MobileActionBarWrapper:i,MobileActionBar:r,NativeMobileActionBar:a,TopbarMobile:s,MobileCalendarDayMenu:l,MobileModal:c}})),r=(0,n().kF)(i,(e=>e.TopLevelMobileComponents)),a=(0,n().kF)(i,(e=>e.MobileNativeFullPageComponents)),s=(0,n().iS)(i,(e=>e.MobileModal)),l=(0,n().kF)(i,(e=>e.MobileCalendarDayMenu)),c=(0,n().kF)(i,(e=>e.TopbarMobile)),d=(0,n().kF)(i,(e=>e.MobileActionBar)),u=(0,n().kF)(i,(e=>e.MobileActionBarWrapper)),p=(0,n().kF)(i,(e=>e.NativeMobileActionBar)),m=(0,n().kF)(i,(e=>e.MobileBottomBar))},361223:(e,t,o)=>{o.d(t,{KO:()=>a,rq:()=>i,xm:()=>r});var n=()=>o(677559);const i=new(n().Ss)("payments",(async()=>{const[{CheckoutUpgradeModal:e},{default:t},{PlansModalContent:n},{BillingModalContent:i},r,a]=await Promise.all([Promise.all([o.e(62743),o.e(90698),o.e(84885),o.e(17100),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(46616),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63707),o.e(86609),o.e(5006),o.e(20343),o.e(71025),o.e(5014),o.e(15819),o.e(70206),o.e(43070),o.e(52576),o.e(87983)]).then(o.bind(o,52576)),Promise.all([o.e(62743),o.e(17100),o.e(20343),o.e(46550)]).then(o.bind(o,612317)),Promise.all([o.e(62743),o.e(90698),o.e(84885),o.e(17100),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(46616),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63707),o.e(86609),o.e(5006),o.e(20343),o.e(71025),o.e(5014),o.e(15819),o.e(70206),o.e(43070),o.e(52576),o.e(87983)]).then(o.bind(o,97081)),Promise.all([o.e(62743),o.e(90698),o.e(84885),o.e(17100),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(46616),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63707),o.e(86609),o.e(5006),o.e(20343),o.e(71025),o.e(5014),o.e(15819),o.e(70206),o.e(43070),o.e(52576),o.e(87983)]).then(o.bind(o,568427)),Promise.all([o.e(62743),o.e(90698),o.e(84885),o.e(17100),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(46616),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63707),o.e(86609),o.e(5006),o.e(20343),o.e(71025),o.e(5014),o.e(15819),o.e(70206),o.e(43070),o.e(52576),o.e(87983)]).then(o.bind(o,97081)),Promise.all([o.e(62743),o.e(90698),o.e(84885),o.e(17100),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(46616),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63707),o.e(86609),o.e(5006),o.e(20343),o.e(71025),o.e(5014),o.e(15819),o.e(70206),o.e(43070),o.e(52576),o.e(87983)]).then(o.bind(o,568427)),Promise.all([o.e(62743),o.e(90698),o.e(84885),o.e(17100),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(46616),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63707),o.e(86609),o.e(5006),o.e(20343),o.e(71025),o.e(5014),o.e(15819),o.e(70206),o.e(43070),o.e(52576),o.e(87983)]).then(o.t.bind(o,629756,23)),Promise.all([o.e(62743),o.e(90698),o.e(84885),o.e(17100),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(46616),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63707),o.e(86609),o.e(5006),o.e(20343),o.e(71025),o.e(5014),o.e(15819),o.e(70206),o.e(43070),o.e(52576),o.e(87983)]).then(o.bind(o,38812))]);return{CheckoutUpgradeModal:e,ClaimAndUpgradeModal:t,PlansModalContent:n,BillingModalContent:i,plans:r,billing:a}})),r=(0,n().kF)(i,(e=>e.CheckoutUpgradeModal)),a=(0,n().kF)(i,(e=>e.ClaimAndUpgradeModal))},315605:(e,t,o)=>{o.d(t,{o:()=>n});const n=new(o(677559).Ss)("prismjs",(async()=>{const e=await Promise.resolve().then(o.bind(o,381839));return await e.importPrism()}))},253548:(e,t,o)=>{o.d(t,{Pe:()=>r,S:()=>s,SG:()=>a});var n=()=>o(677559);const i=new(n().Ss)("teamspaceMenus",(async()=>{const[{default:e},{OutlinerTeamOverflow:t,TeamOverflowMenu:n}]=await Promise.all([Promise.all([o.e(2971),o.e(53335),o.e(46616),o.e(44642),o.e(66860)]).then(o.bind(o,874936)),Promise.all([o.e(2971),o.e(53335),o.e(46616),o.e(44642),o.e(66860)]).then(o.bind(o,384255))]);return{TeamBreadcrumbPopup:e,OutlinerTeamOverflow:t,TeamOverflowMenu:n}})),r=(0,n().kF)(i,(e=>e.TeamBreadcrumbPopup)),a=(0,n().kF)(i,(e=>e.OutlinerTeamOverflow)),s=(0,n().kF)(i,(e=>e.TeamOverflowMenu))},542058:(e,t,o)=>{o.d(t,{m:()=>n});const n=new(o(677559).Ss)("tinymce-word-paste-filter",(async()=>(await o.e(51109).then(o.bind(o,715526))).default))},594281:(e,t,o)=>{o.d(t,{Z:()=>v});o(821057),o(670560),o(267602),o(30005),o(667294);var n=o(973935),i=()=>o(492788),r=()=>o(263184),a=()=>o(513670),s=()=>o(696459),l=o(785893);const c={opacity:1},d={opacity:!0},u={width:!0,height:!0,maxWidth:!0,maxHeight:!0,paddingTop:!0,paddingRight:!0,paddingLeft:!0,paddingBottom:!0,marginTop:!0,marginRight:!0,marginLeft:!0,marginBottom:!0},p=200,m=0,f="ease";class g extends(()=>o(10227))().Z{constructor(){super(...arguments),this.node=null,this.paused=!1,this.currentStyle={},this.initialStyle={},this.animationTimeout=void 0,this.isVisible=!1,this.didBecomeVisible=!1,this.lastSavedChild=void 0,this.clearCSSAnimation=e=>{this.animationTimeout&&(clearTimeout(this.animationTimeout),this.animationTimeout=void 0,e&&this.handleAnimationEnd())},this.handleAnimationStyleStoreChange=()=>{const e=_(this.props.isVisible,this.props.animationStyle,this.props.exitAnimationStyle);this.applyAnimatedStyle({style:e,animate:!0})}}UNSAFE_willMountOrUpdate(e){!this.isVisible&&e.isVisible&&(this.isVisible=!0,this.didBecomeVisible=!0)}didMount(){const e=h(this.props);e&&e.addListener(this.handleAnimationStyleStoreChange)}didUpdate(e){const t=h(e),o=h(this.props);t!==o&&(t&&t.removeListener(this.handleAnimationStyleStoreChange),o&&o.addListener(this.handleAnimationStyleStoreChange))}didMountOrUpdate(){const e=this.node;if(this.node=b(n.findDOMNode(this)),this.didBecomeVisible)this.initialStyle=this.props.enterAnimationStyle||_(this.props.isVisible,this.props.animationStyle,this.props.exitAnimationStyle),this.applyAnimatedStyle({style:this.initialStyle,animate:!1,force:!0});else if(this.node!==e){const t=e?this.currentStyle:this.initialStyle;this.applyAnimatedStyle({style:t,animate:!1,force:!0})}this.applyAnimatedStyle({style:_(this.props.isVisible,this.props.animationStyle,this.props.exitAnimationStyle),animate:!0}),this.didBecomeVisible&&(this.didBecomeVisible=!1)}willUnmount(){const e=h(this.props);e&&e.removeListener(this.handleAnimationStyleStoreChange),this.paused&&(this.paused=!1,i().default.unpause())}renderComponent(){if(this.isVisible){let e,t=!1;return this.isVisible&&!this.props.isVisible?(t=!0,e=this.lastSavedChild):(e=this.props.render(),this.lastSavedChild=e),(0,l.jsx)(o(895910).P.Provider,{value:t,children:e})}}applyAnimatedStyle(e){const{style:t,animate:o,force:n}=e;if(!n&&a().Xy(this.currentStyle,t))return;this.currentStyle=t;Object.prototype.hasOwnProperty.call(setTimeout,"clock");o&&!this.props.skipAnimation?(this.clearCSSAnimation(!1),this.handleAnimationStart(),window.requestAnimationFrame((()=>{this.mutateDOM((()=>{var e,o,n;const i={durationMS:(null===(e=this.props.animationConfig)||void 0===e?void 0:e.durationMS)??p,delayMS:(null===(o=this.props.animationConfig)||void 0===o?void 0:o.delayMS)??m,timingFunction:(null===(n=this.props.animationConfig)||void 0===n?void 0:n.timingFunction)??f};this.renderNodeStyle({properties:t,animationConfig:i}),this.animationTimeout=setTimeout((()=>{this.clearCSSAnimation(!0)}),i.durationMS)}))}))):(this.clearCSSAnimation(!0),this.mutateDOM((()=>{this.renderNodeStyle({properties:t})})))}renderNodeStyle(e){const{properties:t,animationConfig:n}=e,i=this.node;if(!i)return[];let r=!1,l="";const p=this.props.forceTransformStyle,m=[];(0,s().Yd)(t).forEach((e=>{const n=t[e],f=0!==n||p,g=1!==n||p;if("transformOrigin"===e&&a().HD(n))r=!0,i.style.transformOrigin=n;else if(a().HD(n))i.style.setProperty(e,n),m.push(e);else if("opacity"===e)i.style.opacity=`${(0,o(120420).Z)(n,0,1)}`,m.push("opacity");else if((0,s().qg)(u,e))i.style[e]=`${n}px`,m.push(e);else if((0,s().qg)(d,e)){const t=(0,s().qg)(c,e);(!t||t&&c[e]!==n)&&i.style.setProperty(e,String(n))}else"translateX"===e?(r=!0,f&&(l+=`translateX(${n}px) `)):"translateXPercent"===e?(r=!0,f&&(l+=`translateX(${n}%) `)):"translateXCalc"===e?(r=!0,f&&(l+=`translateX(calc(${n})) `)):"translateY"===e?(r=!0,f&&(l+=`translateY(${n}px) `)):"translateYPercent"===e?(r=!0,f&&(l+=`translateY(${n}%) `)):"translateYViewHeight"===e?(r=!0,f&&(l+=`translateY(${n}vh) `)):"translateYCalc"===e?(r=!0,f&&(l+=`translateY(calc(${n})) `)):"scale"===e?(r=!0,g&&(l+=`scale(${Math.max(n??0,0)}) `)):"scaleX"===e?(r=!0,g&&(l+=`scaleX(${Math.max(n??0,0)}) `)):"scaleY"===e&&(r=!0,g&&(l+=`scaleY(${Math.max(n??0,0)}) `))}));const f=t.opacity,g=a().hj(f)&&0!==f&&1!==f;if(this.props.useCompositeLayer&&(""!==l||g)&&(l+="translateZ(0)"),""!==l||r){m.push("transform");const e=i.style;e.mozTransform=e.msTransform=e.webkitTransform=e.transform=l}if(n){const{durationMS:e,delayMS:t,timingFunction:o}=n;return i.style.transitionProperty=m.join(", "),i.style.transitionDuration=`${e}ms`,i.style.transitionDelay=`${t}ms`,i.style.transitionTimingFunction=o,m}{const e=i.style;e.transitionProperty=null,e.transitionDuration=null,e.transitionTimingFunction=null}return[]}handleAnimationStart(){this.didBecomeVisible&&this.props.blockRenderQueueOnEnter&&!1===this.paused&&(this.paused=!0,i().default.pause()),this.props.onAnimationStart&&this.props.onAnimationStart(this.isVisible)}handleAnimationEnd(){this.paused&&(this.paused=!1,i().default.unpause()),this.isVisible&&!this.props.isVisible&&(this.isVisible=!1,this.enqueueForceUpdate()),this.props.onAnimationEnd&&this.props.onAnimationEnd(this.isVisible)}}g.displayName="Animated";const v=g;function h(e){const t=e.animationStyle;if(t instanceof r().default)return t}function _(e,t,n){return e?t instanceof r().default?o(504008).Z.withListenerIgnored((()=>t.state)):t||{}:n||{}}function b(e){if(e instanceof HTMLElement){const t=e?window.getComputedStyle(e):void 0;if("contents"===(null==t?void 0:t.display)){if(e.childElementCount>1){const e=new Error("Animated: Can't animate multiple nodes at once");o(680146).IE(e)}return b((null==e?void 0:e.firstElementChild)??null)}return e}return Text,null}},71410:(e,t,o)=>{o.d(t,{Z:()=>r});var n=()=>o(142735),i=()=>o(687982);function r(e){let{capture:t,render:o}=e;const r=(0,i().Z)(t);return(0,n().VK)((()=>o(r)),[r,o])}},695284:(e,t,o)=>{o.d(t,{Z:()=>i});var n=()=>o(36296);function i(e){let{children:t,...o}=e;return(0,n().Z)(o),t}},233417:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{mouseEntered:!1,mousePressed:!1}}enter(){this.setState({...this.state,mouseEntered:!0})}exit(){this.setState({...this.state,mouseEntered:!1})}}const i=n},114976:(e,t,o)=>{o.d(t,{LB:()=>n,Zh:()=>i,gg:()=>r,oB:()=>a});const n=o(956057).Il(),i="denied",r="no_devices",a="unknown_error"},23338:(e,t,o)=>{o.d(t,{d:()=>r});var n=()=>o(876822),i=()=>o(749826);function r(){const{currentSpaceStore:e}=n().default.state;return Boolean(window.isSecureContext&&(null==e?void 0:e.canRead())&&e.isAiEnabledOnSpace()&&"on"===i().default.getEligibleGroup({experimentId:"dictation_experiment_v2",defaultGroup:"control"}))}},693026:(e,t,o)=>{o.r(t),o.d(t,{useIsDictatingToPage:()=>r});var n=()=>o(142735),i=()=>o(201741);function r(e){return(0,n().VK)((()=>i().TI.state&&(null==e?void 0:e.id)===i().mn.state),[e])}},632775:(e,t,o)=>{o.d(t,{AZ:()=>a,Xb:()=>i,at:()=>r,ew:()=>c,vo:()=>l,wI:()=>s});var n=()=>o(677559);const i=new(n().Ss)("dictation",(()=>Promise.all([o.e(62743),o.e(52774),o.e(44832),o.e(90698),o.e(84885),o.e(37358),o.e(5242),o.e(7312),o.e(90424),o.e(81580),o.e(84325),o.e(31189),o.e(69343),o.e(46293),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(46616),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63707),o.e(86609),o.e(91253),o.e(4642),o.e(5006),o.e(6612),o.e(61171),o.e(23179),o.e(75377),o.e(31020),o.e(2942),o.e(73682),o.e(58591),o.e(54803),o.e(1953),o.e(10216),o.e(58565),o.e(69197),o.e(42055),o.e(38739),o.e(44751),o.e(81567),o.e(63257),o.e(34291),o.e(1913),o.e(56054),o.e(95076),o.e(82658),o.e(52183),o.e(5509),o.e(67092),o.e(45830)]).then(o.bind(o,454573)))),r=(0,n().kF)(i,(e=>e.StopDictationButton)),a=(0,n().kF)(i,(e=>e.StopDictationListener)),s=(0,n().kF)(i,(e=>e.StopDictationButtonMobile)),l=(0,n().kF)(i,(e=>e.DictationBubble)),c=(0,n().kF)(i,(e=>e.DictationAvatar))},201741:(e,t,o)=>{o.d(t,{CX:()=>c,P7:()=>d,QH:()=>s,TI:()=>a,default:()=>f,dg:()=>m,ht:()=>p,mn:()=>l,w7:()=>u});var n=()=>o(435308);class i extends(()=>o(263184))().default{getInitialState(){return{audioRecorder:void 0,audioSessionBlockWriters:new Map,pageBlock:void 0,block:void 0,enabled:!1,talking:!1,environment:void 0,transcribedTexts:[],blockRenderedInPage:!1,blockRenderedInPeekView:!1,loading:!1,isDictationBubbleOnScreen:!1,dictationBubbleScrollPosition:void 0,dictationBubbleRelativeToScreen:void 0}}}const r=new i,a=(new(n().default)((()=>r.state.loading),{debugName:"DictationLoadingStore"}),new(n().default)((()=>r.state.enabled),{debugName:"DictationEnabledStore"})),s=new(n().default)((()=>r.state.pageBlock),{debugName:"DictationPageBlock"}),l=new(n().default)((()=>{var e;return null===(e=r.state.pageBlock)||void 0===e?void 0:e.id}),{debugName:"DictationPageBlockIdStore"}),c=new(n().default)((()=>{var e;return null===(e=r.state.block)||void 0===e?void 0:e.id}),{debugName:"DictationBlockIdStore"}),d=new(n().default)((()=>r.state.block),{debugName:"DictationBlockStore"}),u=new(n().default)((()=>r.state.blockRenderedInPage||r.state.blockRenderedInPeekView),{debugName:"DictationBlockVisibleStore"}),p=new(n().default)((()=>r.state.blockRenderedInPage),{debugName:"DictationBlockInPageStore"}),m=(new(n().default)((()=>r.state.talking),{debugName:"IsTalkingStore"}),new(n().default)((()=>r.state.blockRenderedInPeekView),{debugName:"DictationBlockInPeekViewStore"}),new(n().default)((()=>!r.state.blockRenderedInPeekView&&"inScreen"!==r.state.dictationBubbleRelativeToScreen),{debugName:"showScrollToFaceButtonStore"}),new(n().default)((()=>r.state.dictationBubbleRelativeToScreen),{debugName:"DictationBubbleRelativeToScreenStore"}),new(n().default)((()=>r.state.audioSessionBlockWriters.size>0),{debugName:"IsInferencingStore"})),f=((0,o(59391).Z)(),r)},553848:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o(263184).default.createValue(!1)},872308:(e,t,o)=>{o.r(t),o.d(t,{attemptServerBackedLocalDuplicate:()=>pe,duplicateBlock:()=>me,loadLocalSubtree:()=>fe,localDuplicate:()=>de,serverDuplicate:()=>ue,shouldUseDuplicateAndTranslateTemplateBlock:()=>ve,shouldUseDuplicateTemplateBlock:()=>ge});o(821057),o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(916054),o(653476),o(30005),o(241792);var n=()=>o(156642),i=()=>o(43165),r=()=>o(817629),a=()=>o(799891),s=()=>o(998411),l=()=>o(431595),c=()=>o(526839),d=()=>o(530980),u=()=>o(972054),p=()=>o(217465),m=()=>o(827370),f=()=>o(494616),g=()=>o(922713),v=()=>o(396136),h=()=>o(752778),_=()=>o(139978),b=()=>o(602299),y=()=>o(542973),S=()=>o(26645),w=()=>o(483791),k=()=>o(151097),I=()=>o(81954),C=()=>o(306164),x=()=>o(361929),T=()=>o(955620),M=()=>o(792409),P=()=>o(839002),A=()=>o(855741),R=()=>o(696459),B=()=>o(134043),E=()=>o(830742);const D=(0,E().LS)("duplicateAndTranslateTemplateBlock"),U=(0,E().LS)("duplicateTemplateBlock");var F=()=>o(406799),N=()=>o(54512),V=()=>o(540520),L=()=>o(824462),O=()=>o(132156),Z=()=>o(308186),j=()=>o(782646),K=()=>o(676922),z=()=>o(812324),H=()=>o(771678),q=()=>o(636340),W=()=>o(143346),G=()=>o(970105),$=()=>o(269299),Q=()=>o(663366),Y=()=>o(205228),J=()=>o(769972),X=()=>o(443269),ee=()=>o(709344),te=()=>o(487270),oe=()=>o(123927),ne=()=>o(527278),ie=()=>o(465371),re=()=>o(876822),ae=()=>o(804217),se=()=>o(749826),le=()=>o(826955);const ce=(0,o(788860).vU)({offlineError:{id:"duplicateActions.offlineError.message",defaultMessage:"Please go online to copy this block."},unknownError:{id:"duplicateActions.unknownError.message",defaultMessage:"An unknown error occurred."}});function de(e){var t,o,n;const{environment:i,sourceBlockId:s,targetBlockPointer:l,sourceBlockSubtree:c,targetInMemoryRecordCache:d,addCopyName:u,deepCopyTransclusionContainers:p,duplicateDiscussions:m,shallowCopyNavigableBlock:f,resolveTemplateVariables:g,transaction:h,preventLegacyTransclusions:_,duplicateOnlyCollectionSchema:b,convertExternalObjectInstancesToPlaceholders:y,installationImprint:S,isTemplateInstantiation:w,actionStartTimestamp:k}=e,I=l.spaceId,C=null===(t=c.getModel({id:s,table:v().iU}))||void 0===t?void 0:t.spaceId,x=[],T=k??performance.now(),M=I??(null===(o=re().default.state.currentSpaceStore)||void 0===o?void 0:o.id)??(null===(n=re().default.state.mainEditorCurrentBlockStore)||void 0===n?void 0:n.getSpaceId()),P=M?i.idCreator.getSpaceIdCreatorSync(M):void 0,{targetBlockStore:A,originalToDuplicate:R,subtreeSize:B}=O().Z({environment:i,sourceBlockId:s,targetBlockPointer:l,sourceBlockSubtree:c,targetRecordCache:d,transaction:h,deepCopyTransclusionContainers:p,duplicateDiscussions:m,shallowCopyNavigableBlock:f,resolveTemplateVariables:g,preventLegacyTransclusions:_,createLegacyTransclusionCopyIndicator:{onCreate(e){x.push(e)}},installationImprint:S,isTemplateInstantiation:w,spaceIdCreator:P});if(he({environment:i,userAction:h.getUserActionForAnalyticsPurposesOnly()||"",startTime:T,isLocal:!0,totalBlocks:B,succeeded:!0}),I!==C&&a().log({level:"info",from:"localDuplicate",type:"local_duplicate_across_spaces",data:{sourceSpaceId:C,targetSpaceId:I,sourceBlockId:s,subTreeSize:c.getSize()}}),u&&A&&A.isNavigableBlock()){const e=A.getTitleStore();if(e){const t=e.getValue(),o=(0,r().e)(t);G().sO({environment:i,store:e,value:o,transaction:h})}}if(x.length){const t=!ae().default.state.online;t&&Z().UW(ne().Z.formatMessage(ce.offlineError));for(const o of x){const t=A.getSpaceId(),n=le().G.createChildStore(A,{table:v().iU,id:o.duplicateBlockId});ue({environment:i,targetSpaceId:t,targetInMemoryRecordCache:d,transaction:h,userActionSuffix:" (legacy transclusion fix)",sourceBlocks:[{id:o.sourceBlockId,spaceId:t}],copyIndicators:[n],addCopyName:!1,deepCopyTransclusionContainers:p,resolveTemplateVariables:g,duplicateOnlyCollectionSchema:b,convertExternalObjectInstancesToPlaceholders:y??!1,shouldAttemptServerBackedLocalDuplication:!1,shouldTranslate:e.shouldTranslate,sourceLanguage:e.sourceLanguage,targetLanguage:e.targetLanguage})}V().Sl(i,{offline:t,num_blocks_duplicated:x.length,user_action:h.getUserActionForAnalyticsPurposesOnly()})}return{targetBlockStore:A,originalToDuplicate:R}}function ue(e){const{environment:t,sourceBlocks:o,targetInMemoryRecordCache:i,addCopyName:r,deepCopyTransclusionContainers:a,resolveTemplateVariables:c,transaction:d,targetSpaceId:u,convertExternalObjectInstancesToPlaceholders:m,duplicateOnlyCollectionSchema:f,userActionSuffix:g,installationImprint:h,createActivities:_,templateInstallationMetadata:b={},applyTranslationMap:y,isTemplateInstantiation:S,shouldAttemptServerBackedLocalDuplication:w,actionStartTimestamp:k}=e;if(0===o.length)throw new Error("Must duplicate at least one block");if((0,R().$K)(y)&&1!==o.length)throw new Error("applyTranslationMap currently only supported for single (page) block duplication");const C=e.copyIndicators??function(e){const{environment:t,sourceBlocks:o,targetRecordCache:i,transaction:r,spaceId:a}=e,s=o.map(((e,o)=>q().j4({environment:t,type:n().Ti.copyIndicator,inMemoryRecordCache:i,transaction:r,spaceId:a})));if(s.length!==o.length)throw new Error("copyIndicators must be same length as source blocks");if(!(0,R().Of)(s))throw new Error("copyIndicators must cannot be empty");return s}({environment:t,sourceBlocks:o,targetRecordCache:i,transaction:d,spaceId:u});let x=!0;const T=P().UZ(),M=k??performance.now();return d.postSubmitCallbacks.push((async n=>{if(n)!function(e,t){const o=(0,l().Jx)(e)?(0,X().nX)(ne().Z.getIntl(),e):void 0;t.resolve({status:"error",errorMessage:o??ne().Z.formatMessage(ce.unknownError),error:e})}(n,T);else{const n=`${d.getUserActionForAnalyticsPurposesOnly()}${g?` ${g}`:""}`;if(function(e){for(const t of e)z().j2(t.id)}(C),w&&1===o.length){const{success:e}=await pe({environment:t,sourceBlockPointer:o[0],targetBlockStore:C[0],userAction:n,deepCopyTransclusionContainers:a,convertExternalObjectInstancesToPlaceholders:m,addCopyName:r,resolveTemplateVariables:c,isTemplateInstantiation:!!S,actionStartTimestamp:M,awaitTransactionResult:!0});if(e)return _e(C),void T.resolve({status:"success"})}const l=ge(b.source),u=ve(e.shouldTranslate,e.sourceLanguage,e.targetLanguage),k={sourceBlocks:o,targetBlocks:C.map((e=>({id:e.id,spaceId:e.getSpaceId()}))),addCopyName:r,deepCopyTransclusionContainers:a,convertExternalObjectInstancesToPlaceholders:m,duplicateOnlyCollectionSchema:f,userAction:n,createActivities:_,resolveTemplateVariables:!!c&&{currentUserId:t.currentUser.id,currentTimeZone:(0,s().r)()}},P=l?j().Lj(t,U,{...k,source:b.source,context:b.context,isEmailShared:b.isEmailShared,isFromDuplicateParam:b.isFromDuplicateParam}):u?j().Lj(t,D,{...k,sourceLanguage:e.sourceLanguage,targetLanguage:e.targetLanguage}):j().Lj(t,B().u,{...k,installationImprint:h,returnRecordIdMapJson:(0,R().$K)(y)});let E;try{for await(const e of P)be(e,C),F().f5(t,e),E=e}catch(i){x=!1}finally{he({environment:t,userAction:n,startTime:M,succeeded:x,isLocal:!1,totalBlocks:E&&A().x.isSuccess(E)?E.value.totalBlocks:0})}if(_e(C),E&&!E.error||(L().callApi({eventName:"deleteBlocks",environment:t,data:{blocks:C.filter((e=>e.useCrdt())).map((e=>({id:e.id,spaceId:(0,I().J)(e.pointer.spaceId)}))),permanentlyDelete:!1}}),Q().Tq({environment:t,blocks:C.filter((e=>!e.useCrdt()))})),!E)return void T.resolve({status:"error",errorMessage:ne().Z.formatMessage(ce.unknownError),error:new Error(ne().Z.formatMessage(ce.unknownError))});if(E.error){const e=(0,X().HV)(ne().Z.getIntl(),E.error);T.resolve({status:"error",errorMessage:e,error:E.error})}else{const e=E.value.recordIdMapJson;if((0,R().$K)(y)&&(0,R().$K)(e)){const o=p().RecordMapLegacy.create(e),n=K().t9({translationMap:y,recordIdMap:o});$().createAndCommit({userAction:"serverDuplicate.applyTranslationMap",environment:t,canUndo:!0,perform(e){const o=C[0];for(const[i,r]of Object.entries(n)){const n=le().G.createChildStore(o,{table:v().iU,id:i,spaceId:o.getSpaceId()});let a;if("title"===r.mapping)a=n.getBlockTitleStore();else if("caption"===r.mapping)a=n.getPropertyStore("caption");else{if("unmapped"===r.mapping)continue;if("properties"===r.mapping){Object.entries(r.properties??{}).forEach((o=>{let[i,r]=o;const a=n.getPropertyStore(i);G().sO({environment:t,store:a,value:r.value,transaction:e})}));continue}(0,R().t1)(r.mapping)}G().sO({environment:t,store:a,value:r.value,transaction:e})}}})}T.resolve({status:"success"})}}})),[C,T.promise]}async function pe(e){const{environment:t,sourceBlockPointer:o,targetBlockStore:n,userAction:i,deepCopyTransclusionContainers:r,convertExternalObjectInstancesToPlaceholders:s,resolveTemplateVariables:l,addCopyName:c,isTemplateInstantiation:d,recordLimit:u=500,actionStartTimestamp:m,awaitTransactionResult:f}=e;let g,v;const h=(0,oe().hC)(),_={blockId:o.id,allowCopyCollections:!0,requireFullSubtree:!0,skipTransclusionContainerChildren:!r,allowCopyExternalObjectInstances:!s,includeLegacyTransclusionBlockValues:h};if(v=fe(t,{..._,inMemoryRecordCache:n.inMemoryRecordCache}),g=v.recordMap,!g)try{const e=await L().callApi({eventName:"loadBlockSubtree",environment:t,data:{block:{id:o.id,spaceId:o.spaceId},shallow:!1,recordCountLimit:u}});if("success"!==e.type){const t=(0,ee().p)(e);return a().log({level:"warning",from:"attemptServerBackedLocalDuplicate",type:"subtreeLoadFailure",data:{message:"Error loading subtree",miscDataToConvertToString:{error:t,sourceBlockPointer:o,cacheSize:n.inMemoryRecordCache.size,targetBlockPointer:{id:n.id,spaceId:n.getSpaceId(),type:n.getType()},userAction:i}}}),{success:!1,size:void 0,pageStore:n}}{const o=p().RecordMapWithRole.create(e.data.subtreeRecordMap);await W().fL({environment:t,inMemoryRecordCache:n.inMemoryRecordCache,recordMap:o,debugSource:i}),v=fe(t,{..._,inMemoryRecordCache:n.inMemoryRecordCache}),g=v.recordMap}}catch(w){return a().log({level:"error",from:"attemptServerBackedLocalDuplicate",type:"subtreeLoadError",error:(0,M().Ui)(w),data:{message:"Failed to load subtree",miscDataToConvertToString:{sourceBlockPointer:o,cacheSize:n.inMemoryRecordCache.size,targetBlockPointer:{id:n.id,spaceId:n.getSpaceId(),type:n.getType()},userAction:i}}}),{success:!1,size:void 0,pageStore:n}}if(!g)return a().log({level:"warning",from:"attemptServerBackedLocalDuplicate",type:"subtreeLoadError",data:{message:"Failed to load subtree",miscDataToConvertToString:{sourceBlockPointer:o,cacheSize:n.inMemoryRecordCache.size,reason:"error"===v.type?v.reason:void 0,targetBlockPointer:{id:n.id,spaceId:n.getSpaceId(),type:n.getType()},missingRecord:"error"===v.type?v.pointer:void 0,userAction:i}}}),{success:!1,size:void 0,pageStore:n};var b;if(F().uq({sourceSpaceId:o.spaceId,targetSpaceId:n.getSpaceId(),sourceBlockSubtree:g}))return{success:!1,size:null===(b=g)||void 0===b?void 0:b.getSize(),pageStore:n};try{var y;const{serverCommitResult:e}=$().createAndCommit({userAction:i,environment:t,canUndo:!0,perform:e=>de({environment:t,sourceBlockId:o.id,targetBlockPointer:n.pointer,sourceBlockSubtree:g,targetInMemoryRecordCache:n.inMemoryRecordCache,transaction:e,preventLegacyTransclusions:h,deepCopyTransclusionContainers:r,addCopyName:c,resolveTemplateVariables:l,isTemplateInstantiation:d,actionStartTimestamp:m})});return f&&await e,{success:!0,size:null===(y=g)||void 0===y?void 0:y.getSize(),pageStore:n,transactionPromise:e}}catch(w){var S;return a().log({level:"error",from:"attemptServerBackedLocalDuplicate",type:"subtreeLoadError",error:(0,M().Ui)(w),data:{message:"Failed to load subtree",miscDataToConvertToString:{sourceBlockPointer:o,targetBlockPointer:{id:n.id,spaceId:n.getSpaceId(),type:n.getType()},userAction:i}}}),{success:!1,size:null===(S=g)||void 0===S?void 0:S.getSize(),pageStore:n}}}function me(e){const{environment:t,stores:o,addCopyName:n,deepCopyTransclusionContainers:i,resolveTemplateVariables:r,transaction:a,targetSpaceId:s,preferDuplicateLocation:l,analyticsFrom:c,duplicateOnlyCollectionSchema:d,installationImprint:u,createActivities:p,applyTranslationMap:m,shouldAttemptServerBackedLocalDuplication:f,templateInstallationMetadata:g}=e,h=performance.now();if(0===o.length)throw new Error("Must duplicate at least one block");const _=o[0].getSpaceId();if(!o.every((e=>e.getSpaceId()===_)))throw new Error("All stores must be in the same space");if(o.length>1&&!o.every((e=>e.isTypedCollectionViewBlock())))throw new Error("Multiple source blocks only supported for grouped typed DB duplication");if((0,R().$K)(m)&&1!==o.length&&!o[0].isPageBlock())throw new Error("applyTranslationMap currently only supported for single page block duplication");for(const v of o){const e=v.getRecordStoreAtRootPath().getValue();let o;const{currentSpaceStore:n}=re().default.getState();var b;if(n&&(null==e?void 0:e.parent_table)===C().e0&&(o=le().zX.createChildStore(n,{table:C().e0,id:e.parent_id})),e)N().W(t,{from:c??"copy",type:e.type,teamStore:o,is_toggleable:(0,ie()._A)(e.type,e.format),collection_id:v.getAssociatedCollectionId()??(null===(b=v.getCollectionStore())||void 0===b?void 0:b.id),new_page_id:"page"===e.type?v.id:void 0,creating_block_id:v.id,parent_collection_id:v.getParentCollectionIdUpToTwoLevels(),form_id:v.getFirstFormIdInCollectionViewBlock()})}const y=_!==s,S=g&&(0,k().sB)(g.source)&&g.isListedTemplate;if("local"===l&&1===o.length&&!S){const e=o[0],l=(0,oe().hC)(),c=fe(t,{blockId:e.id,inMemoryRecordCache:e.inMemoryRecordCache,allowCopyCollections:!1,requireFullSubtree:!0,skipTransclusionContainerChildren:!i,allowCopyExternalObjectInstances:!y,includeLegacyTransclusionBlockValues:l}).recordMap;if(c&&!F().uq({sourceSpaceId:_,targetSpaceId:s,sourceBlockSubtree:c})){const{targetBlockStore:o}=de({environment:t,sourceBlockId:e.id,targetBlockPointer:(0,te().Ii)({environment:t,table:v().iU,spaceId:s}),sourceBlockSubtree:c,targetInMemoryRecordCache:e.inMemoryRecordCache,addCopyName:n,deepCopyTransclusionContainers:i,resolveTemplateVariables:r,transaction:a,preventLegacyTransclusions:l,installationImprint:u,actionStartTimestamp:h});return"ai_block"===o.getType()&&H().JJ.setState(o.pointer.id),[[o],Promise.resolve({status:"success"})]}}for(const v of o)if(v.inMemoryRecordCache!==t.defaultRecordCache.inMemoryRecordCache)throw new Error("Can only server duplicate from the environment.defaultRecordCache.inMemoryRecordCache.");const w=t.defaultRecordCache.inMemoryRecordCache;ae().default.state.online||Z().UW(ne().Z.formatMessage(ce.offlineError));const I=ue({environment:t,sourceBlocks:o.map((e=>({id:e.id,spaceId:e.getSpaceId()}))),targetInMemoryRecordCache:w,addCopyName:n,transaction:a,deepCopyTransclusionContainers:i,resolveTemplateVariables:r,targetSpaceId:s,convertExternalObjectInstancesToPlaceholders:y,duplicateOnlyCollectionSchema:d,installationImprint:u,createActivities:p,templateInstallationMetadata:g,applyTranslationMap:m,shouldAttemptServerBackedLocalDuplication:f,actionStartTimestamp:h,shouldTranslate:e.shouldTranslate,sourceLanguage:e.sourceLanguage,targetLanguage:e.targetLanguage});return async function(){const[e,t]=I;if("success"===(await t).status)for(const o of e)if("ai_block"===o.getType())return void H().JJ.setState(o.pointer.id)}(),I}function fe(e,t){const{blockId:o,inMemoryRecordCache:r,allowCopyCollections:a,requireFullSubtree:s,skipTransclusionContainerChildren:l,allowCopyExternalObjectInstances:k,skipBlockContent:I,skipNavigableChildren:C,excludeCrdtData:M,includeLegacyTransclusionBlockValues:P,includeDiscussions:A,includeComments:B}=t,E=e.currentUser.id,D=p().RecordMap.create(),U=new Set,F=[{pointer:{table:v().iU,id:o},parentId:"doesn't matter"}];for(;F.length>0;){const e=F.shift();if(!e)continue;if(U.has(e.pointer.id))continue;const t=o===e.pointer.id;if((0,m().$O)(e.pointer,v().iU)){var N,V,L,O;const o=r.getRecord({pointer:e.pointer,userId:E});if(null==o||!o.value){if(s)return{type:"error",reason:"missing_record",pointer:e.pointer};continue}const a=M?i().cX(o.value):o.value;if(P){if(!t&&a.parent_id!==e.parentId&&!e.isBlockContentChild)continue}else if(!t&&a.parent_id!==e.parentId)continue;if(a.type===n().Ti.externalObjectInstance&&!k)return{type:"error",reason:"encountered_external_object_instance",pointer:e.pointer};var Z;if(D.setValue(e.pointer,a),!C)if(null!==(Z=a.format)&&void 0!==Z&&Z.collection_pointer&&F.push({pointer:a.format.collection_pointer,parentId:a.id}),a.collection_id&&F.push({pointer:{table:h().vF,id:a.collection_id},parentId:a.id}),a.view_ids)for(const e of a.view_ids)F.push({pointer:{table:_().np,id:e,spaceId:a.space_id},parentId:a.id});if(!(I||l&&"transclusion_container"===a.type||C&&(0,n().S9)(a.type))){const e=d().kk5.fromBlock(a).getRenderableContentIds();for(const t of e)F.push({pointer:{table:v().iU,id:t},parentId:a.id,isBlockContentChild:!0})}const u=d().kk5.fromBlock(a).getNonContentChildren();for(const e of u)F.push({pointer:{table:v().iU,id:e},parentId:a.id,isBlockContentChild:!0});if(a.type===n().Ti.externalObjectInstance){var j,K;const e=(null===(j=a.format)||void 0===j?void 0:j.related_external_object_uris_to_instance_ids)&&Object.values(null===(K=a.format)||void 0===K?void 0:K.related_external_object_uris_to_instance_ids)||[];for(const t of e)F.push({pointer:{table:v().iU,id:t,spaceId:a.space_id},parentId:a.id})}if(!C&&a.properties){const e=Object.values(a.properties).filter(R().$K);for(const t of e)for(const e of t)for(const t of T().hDy(e)){if(T().STW(t)){const e=T().TOT(t);F.push({pointer:{table:v().iU,id:e},parentId:a.id})}if(T().j0F(t)){const e=T().zW$(t),o=(0,c().A5)({url:e,baseUrl:Y().default.domainBaseUrl,publicDomainName:Y().default.publicDomainName});o&&F.push({pointer:{table:v().iU,id:o},parentId:a.id})}if(T().nSN(t)){const e=T().frW(t);e&&F.push({pointer:{table:v().iU,id:e,spaceId:a.space_id},parentId:a.id})}}}if("form"===a.type&&null!==(N=a.format)&&void 0!==N&&N.form_layout_pointer&&F.push({pointer:a.format.form_layout_pointer,parentId:a.id}),null!==(V=a.format)&&void 0!==V&&V.automation_id&&F.push({pointer:{table:f().cv,id:a.format.automation_id,spaceId:a.space_id},parentId:a.id}),null!==(L=a.format)&&void 0!==L&&L.workflow_id&&F.push({pointer:{table:x().An,id:a.format.workflow_id,spaceId:a.space_id},parentId:a.id}),null!==(O=a.format)&&void 0!==O&&O.ai_instructions_page_pointer&&F.push({pointer:a.format.ai_instructions_page_pointer,parentId:a.id}),A&&a.discussions)for(const e of a.discussions)F.push({pointer:{table:y().qF,id:e,spaceId:a.space_id},parentId:a.id})}else if((0,m().$O)(e.pointer,h().vF)){var z,H;if(!a)return{type:"error",reason:"encountered_collection",pointer:e.pointer};const t=r.getRecord({pointer:e.pointer,userId:E});if(null==t||!t.value){if(s)return{type:"error",reason:"missing_record",pointer:e.pointer};continue}if(t.value.parent_id!==e.parentId)continue;const o=t.value;D.setValue(e.pointer,o),r.forEachRecord(E,(t=>{let{model:o}=t;o.table===v().iU&&o&&o.parent_id===e.pointer.id&&o.alive&&F.push({pointer:o.pointer,parentId:e.pointer.id})}));const n=(null===(z=o.format)||void 0===z?void 0:z.automation_ids)??[];for(const e of n)F.push({pointer:{table:f().cv,id:e,spaceId:o.space_id},parentId:o.id});o.schema&&Object.values(o.schema).forEach((e=>{e&&"button"===e.type&&e.automation_id&&F.push({pointer:{id:e.automation_id,spaceId:o.space_id,table:f().cv},parentId:o.id})})),null!==(H=o.format)&&void 0!==H&&H.layout_pointer&&F.push({pointer:o.format.layout_pointer,parentId:o.id})}else if((0,m().$O)(e.pointer,_().np)){var q;const t=r.getRecord({pointer:e.pointer,userId:E});if(null==t||!t.value){if(s)return{type:"error",reason:"missing_record",pointer:e.pointer};continue}if(t.value.parent_id!==e.parentId)continue;"form_editor"===t.value.type&&null!==(q=t.value.format)&&void 0!==q&&q.form_block_pointer&&F.push({pointer:t.value.format.form_block_pointer,parentId:t.value.id}),D.setValue(e.pointer,t.value)}else if((0,m().$O)(e.pointer,f().cv)){const t=r.getRecord({pointer:e.pointer,userId:E});if(null==t||!t.value){if(s)return{type:"error",reason:"missing_record",pointer:e.pointer};continue}if(t.value.parent_id!==e.parentId)continue;D.setValue(e.pointer,t.value);for(const e of t.value.action_ids??[])F.push({pointer:{table:g().Xj,id:e,spaceId:t.value.space_id},parentId:t.value.id})}else if((0,m().$O)(e.pointer,g().Xj)){const t=r.getRecord({pointer:e.pointer,userId:E});if(null==t||!t.value){if(s)return{type:"error",reason:"missing_record",pointer:e.pointer};continue}if(t.value.parent_id!==e.parentId)continue;D.setValue(e.pointer,t.value);for(const e of t.value.blocks??[])F.push({pointer:{table:v().iU,id:e,spaceId:t.value.space_id},parentId:t.value.id})}else if((0,m().$O)(e.pointer,x().An)){const t=r.getRecord({pointer:e.pointer,userId:E});if(null==t||!t.value){if(s)return{type:"error",reason:"missing_record",pointer:e.pointer};continue}if(t.value.parent_id!==e.parentId)continue;D.setValue(e.pointer,t.value)}else if((0,m().$O)(e.pointer,y().qF)){const t=r.getRecord({pointer:e.pointer,userId:E});if(null==t||!t.value){if(s)return{type:"error",reason:"missing_record",pointer:e.pointer};continue}if(t.value.parent_id!==e.parentId)continue;if(D.setValue(e.pointer,t.value),B)for(const e of t.value.comments??[])F.push({pointer:{table:b().x_,id:e,spaceId:t.value.space_id},parentId:t.value.id})}else if((0,m().$O)(e.pointer,b().x_)){const t=r.getRecord({pointer:e.pointer,userId:E});if(null==t||!t.value){if(s)return{type:"error",reason:"missing_record",pointer:e.pointer};continue}if(t.value.parent_id!==e.parentId)continue;D.setValue(e.pointer,t.value);for(const e of t.value.content??[])F.push({pointer:{table:v().iU,id:e,spaceId:t.value.space_id},parentId:t.value.id})}else if((0,m().$O)(e.pointer,w().Bh)){const t=r.getRecord({pointer:e.pointer,userId:E}),o=null==t?void 0:t.value;if(!o){if(s)return{type:"error",reason:"missing_record",pointer:e.pointer};continue}D.setValue(e.pointer,o);const n=d().kk5.fromValue(w().Bh,o);for(const i of n.getBlockChildrenPointers())F.push({pointer:i,parentId:e.pointer.id});(0,u().M)(o.modules,(t=>{if("formQuestion"===t.type){const n={id:t.formQuestionId,table:S().L_,spaceId:o.space_id};F.push({pointer:n,parentId:e.pointer.id})}}))}else if((0,m().$O)(e.pointer,S().L_)){const t=r.getRecord({pointer:e.pointer,userId:E});if(null==t||!t.value){if(s)return{type:"error",reason:"missing_record",pointer:e.pointer};continue}D.setValue(e.pointer,t.value)}U.add(e.pointer.id)}return{type:"success",recordMap:D}}function ge(e){if(!e)return!1;const t=se().default.getConfigKey("enabled_installation_sources_for_duplicate_template_block",e);return Boolean(t)}function ve(e,t,o){return Boolean(e&&t&&o)&&se().default.checkGate({gateName:"translate_template_top_bar"})}function he(e){const{environment:t,userAction:o,startTime:n,succeeded:i,totalBlocks:r,isLocal:a}=e,s=se().default.checkGate({gateName:"duplicate_block_await_post_submit_transaction"}),l=se().default.checkGate({gateName:"duplicate_block_skip_free_chart_post_submit_transaction"});(0,J().X)({environment:t,success:i,time:performance.now()-n,user_action:o,is_duplication_local:a,is_skip_free_chart_post_submit_transaction:l,is_await_post_submit_transaction:s,duplication_size:r})}function _e(e){for(const t of e)z().h8(t.id)}function be(e,t){for(const o of t)z().RO(e,o.id)}},540413:(e,t,o)=>{o.r(t),o.d(t,{duplicateBlocks:()=>M,duplicateBlocksWithMaybeConfirmation:()=>T,insertBlockAbove:()=>A,insertBlockAndEdit:()=>R,insertBlockBelow:()=>P,insertTextAbove:()=>E,insertTextBelow:()=>B});o(492176),o(670560),o(7961);var n=()=>o(492788),i=()=>o(956057),r=()=>o(81954),a=()=>o(513670),s=()=>o(406799),l=()=>o(236087),c=()=>o(132156),d=()=>o(308186),u=()=>o(844085),p=()=>o(453999),m=()=>o(269299),f=()=>o(188517),g=()=>o(360746),v=()=>o(887430),h=()=>o(539410),_=()=>o(205228),b=()=>o(582835),y=()=>o(53060),S=()=>o(924390),w=()=>o(543934),k=()=>o(279386),I=()=>o(965903),C=()=>o(807230),x=()=>o(872308);async function T(e){const{environment:t,blocks:o,duplicateOnlyCollectionSchema:i}=e;if(!(0,C().ww)(t))return;let r=o;if(1===o.length){const e=await g().NN({environment:t,block:o[0],action:"duplicate"});if("user_canceled"===e)return;r=e}const a=r.at(0);if(!a)return;const s=(0,v().fm)(a);(0,b().vJ)(a,s)?await l().W9({blocks:r,environment:t,analyticsFrom:"subitem_duplication"}):m().createAndCommit({userAction:"actionRegistry.duplicateToSelection",environment:t,canUndo:!0,perform:e=>{M({environment:t,blocks:r,transaction:e,preferDuplicateLocation:"local",duplicateOnlyCollectionSchema:i})},transactionTooBigFallback:e=>{M({environment:t,blocks:r,transaction:e,preferDuplicateLocation:"server",duplicateOnlyCollectionSchema:i})}}),n().default.afterNextFlush((()=>{u().Zv()}))}function M(e){const{environment:t,blocks:o,transaction:n,preferDuplicateLocation:i,lastTopLevelBlockStore:l,preventSetSelection:c,duplicateOnlyCollectionSchema:u}=e,m=a().vM(o,(e=>e.getFormat().app_id??e.id)),f=[];return a().Ed(m,(e=>{const o=e[0],a=!o.isTransclusionType(),[l,c]=x().duplicateBlock({environment:t,stores:e,addCopyName:(0,S().Z)(o),transaction:n,deepCopyTransclusionContainers:a,resolveTemplateVariables:!(o.isInsideTemplate()||o.isInsideFactoryOrDuplicateBlocksAction()),targetSpaceId:(0,r().J)(o.pointer.spaceId),baseUrl:_().default.domainBaseUrl,publicDomainName:_().default.publicDomainName,preferDuplicateLocation:i,duplicateOnlyCollectionSchema:u});f.push(...l),c.then((e=>{if("error"===e.status){const o=e.error;s().nr(o)?s().qR(t,{product:o.clientData.metadata.product}):d().UW(e.errorMessage)}}))})),p().BM({blocksToInsert:f,target:l?[l]:o,environment:t,transaction:n,replaceEmptyTextBlock:!1,preventSetSelection:c}),f}function P(e){const{environment:t,createBlockItem:o,selection:n,transaction:i,analyticsFrom:r,preventSetSelection:a}=e,s=I().default.getCurrentRecordCache(),l=new(f().BW)({environment:t,userFlow:"page"===(null==o?void 0:o.blockType)?"user_flow_create_page":"user_flow_create_block",succeedOnEnqueue:!0});let d;if((0,C().ww)(t)&&o&&s){const e=c().f({environment:t,createBlockItem:o,transaction:i,inMemoryRecordCache:s,from:r,selection:n});l.track(e.pointer,i),d=p().BM({environment:t,blocksToInsert:[e],target:n,transaction:i,replaceEmptyTextBlock:!1,preventSetSelection:a})[0]}else l.fail("invalid_state");return d}function A(e){const{environment:t,createBlockItem:o,selection:n,transaction:i,analyticsFrom:r,preventSetSelection:a}=e,s=I().default.getCurrentRecordCache();let l;if((0,C().ww)(t)&&o&&s){const e=c().f({environment:t,createBlockItem:o,transaction:i,inMemoryRecordCache:s,from:r,selection:n});l=p().sl({environment:t,blocks:[e],selection:n,transaction:i,preventSetSelection:a})[0]}return l}function R(e){const{environment:t,selection:o,transaction:n}=e,r=P({...e,preventSetSelection:!0});if(r){var a;p().DV({environment:t,insertedStores:[r],isCreated:!0});const e=k().MT.getMode(r);if("suggest"===e){const e=h().oG(t,n,r);h().n1(n,r,{id:i().Il(),type:"insert",discussionId:e.id}),h().vh({environment:t,transaction:n,discussionStore:e,addModifiedBlockIdsAfter:[r.id]})}"suggest"===e&&null!==(a=r.getNavigableBlockStore({skipCurrent:!0}))&&void 0!==a&&a.isCommentOnly()||p().MD({transaction:n,blocks:o})}return r}function B(e){const{blocks:t,transaction:o,environment:i,skipAnalytics:r}=e,a=r?void 0:"text_insert_below",s=P({environment:i,selection:t,createBlockItem:y().Hc.text,analyticsFrom:a,transaction:o});return s&&n().default.afterNextFlush((()=>{w().hb({environment:i,blockStore:s,insertedTextBlockLocation:"below"})})),s}function E(e){const{blocks:t,transaction:o,environment:i,skipAnalytics:r}=e,a=r?void 0:"text_insert_below",s=A({environment:i,selection:t,createBlockItem:y().Hc.text,analyticsFrom:a,transaction:o});return s&&n().default.afterNextFlush((()=>{w().hb({environment:i,blockStore:s,insertedTextBlockLocation:"above"})})),s}},577041:(e,t,o)=>{o.d(t,{Sk:()=>r,dF:()=>s,j3:()=>i,mk:()=>a,uP:()=>l});var n=()=>o(677559);const i={duplicateActions:new(n().Ss)("duplicateActions",(async()=>await Promise.resolve().then(o.bind(o,872308)))),selectableBlockActions:new(n().Ss)("selectableBlockActions",(async()=>await Promise.resolve().then(o.bind(o,540413))))};async function r(){return(await o.e(14705).then(o.bind(o,630903))).transformBlocks}async function a(){return(await o.e(14705).then(o.bind(o,630903))).maybeTurnCollectionViewIntoCollectionViewPage}async function s(){const e=await i.duplicateActions.load();return{duplicateBlock:e.duplicateBlock,localDuplicate:e.localDuplicate,loadLocalSubtree:e.loadLocalSubtree,shouldUseDuplicateTemplateBlock:e.shouldUseDuplicateTemplateBlock}}async function l(){const e=await o.e(92174).then(o.bind(o,978783));return{createAndDuplicatePageInSpace:e.createAndDuplicatePageInSpace,messages:e.messages}}},754668:(e,t,o)=>{o.d(t,{Z:()=>a});o(667294);var n=()=>o(142735),i=()=>o(659278),r=o(785893);const a=function(e){let{char:t,size:a,sprite:s,testId:l}=e;const c=(0,o(219727).O7)(),d=(0,n().VK)((()=>s||(0,o(718611).e_)(c)),[c,s]),u=(0,o(338530).C)(),p=i().xo.isCustomEmojiString(t),m=(0,n().VK)((()=>{if(p){const e=i().xo.fromCustomEmojiString(t).pointer;return(0,o(606757).KX)({parentStore:void 0,pointer:e})}}),[t,p]);return p?m?(0,r.jsx)(o(537876).Z,{emojiStore:m,size:a??"1em",testId:l}):null:(0,r.jsx)(o(216131).Z,{char:t,size:a,type:d,emojiData:u,testId:l})}},150569:(e,t,o)=>{o.d(t,{$P:()=>b,FZ:()=>g,II:()=>a,IQ:()=>n,Nm:()=>r,PS:()=>f,T8:()=>l,VJ:()=>_,WB:()=>c,d8:()=>m,fG:()=>h,jo:()=>u,kX:()=>p,mz:()=>d,pq:()=>s,qJ:()=>y,tg:()=>i,vP:()=>v});const n=12,i=9,r=2,a=12,s=16,l=32,c=24,d=44,u=32,p=356,m=390,f=12,g=l*n+2*f,v=9,h=g,_=305,b=10,y=2},718611:(e,t,o)=>{o.d(t,{e_:()=>a,kw:()=>s,sg:()=>l});var n=()=>o(219727),i=()=>o(142735),r=()=>o(876822);function a(e){const{device:t}=e;return t.isAndroid&&t.browserVersion.startsWith("73.")&&t.browserName.startsWith("Chrome")||t.isAndroid?"google":t.isWindows||t.isLinux?"twitter":"raw"}function s(){const e=(0,n().O7)();return(0,i().VK)((()=>a(e)),[e])}function l(){var e;return null===(e=r().default.state)||void 0===e||null===(e=e.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.emoji_picker_skin_tone}},338530:(e,t,o)=>{o.d(t,{C:()=>s,Z:()=>a});var n=()=>o(142735);class i extends(()=>o(263184))().default{getInitialState(){return{positionalEmojiData:{},emojiByName:{},emojiByCategory:{},emojiByColorRaw:{},emojiByColorProcessed:{}}}async waitUntilLoaded(){await(0,o(166569).M)()}}const r=new i,a=r;function s(){return(0,n().Kw)(r)}},223321:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1}}}const i=new n},234049:(e,t,o)=>{o.d(t,{JI:()=>P,Ki:()=>M,LL:()=>A,QQ:()=>T});o(821057);var n=()=>o(506347),i=()=>o(799891),r=()=>o(364052),a=()=>o(151097),s=()=>o(346249),l=()=>o(839002),c=()=>o(855741),d=()=>o(406799),u=()=>o(8101),p=()=>o(824462),m=()=>o(308186),f=()=>o(291338),g=()=>o(528918),v=()=>o(47443),h=()=>o(102182),_=()=>o(224597),b=()=>o(369637),y=()=>o(577041),S=()=>o(614027),w=()=>o(527278),k=()=>o(443471),I=()=>o(876822),C=()=>o(21688),x=()=>o(616963);async function T(e){const{spaceViewStore:t}=e;await _().y3({...e,userSettingsStore:I().default.state.currentUserSettingsStore,userRootStore:I().default.state.currentUserRootStore,pageVisitSource:n().tY.DuplicateTemplateSwitchSpace,navigationType:"switchingToOrLoadingSpace"}),x().default.setState({...x().default.state,spaceStore:t.getSpaceStore(),spaceViewStore:t,teamStore:void 0})}async function M(e){const{open:t,blockStore:o,teamStore:n,spaceStore:i,spaceViewStore:r}=x().default.state;if(t&&o&&i&&r)return P({environment:e,blockStore:o,spaceStore:i,spaceViewStore:r,teamStore:n})}async function P(e){const{environment:t,blockStore:o,spaceStore:n,spaceViewStore:r,teamStore:p,hideModal:v=!1,from:S,templateId:I,duplicationStartedToastProps:C={},duplicationFinishedToastProps:T={},isEmailShared:M,isMobile:P=!1,showDuplicationStartedToast:B=!0,showDuplicationFinishedToast:E=!0}=e,D=w().Z.getIntl(),U=await A(t,o.id);B&&function(e){const{intl:t,toastProps:o={},isMobile:n=!1}=e;if(n)return void h().oV({label:t.formatMessage({id:"inApp.template.duplication.started.toast.mobile.message",defaultMessage:"Template is being added to your private space. We will let you know when itâ€™s ready to use."}),position:"bottom",style:{maxWidth:"calc(100% - 40px)",justifyContent:"center",textAlign:"center"}});b().m2({id:"template_duplication_toast",title:t.formatMessage({id:"inApp.template.duplication.started.toast.title",defaultMessage:"Template is being added"}),message:t.formatMessage({id:"inApp.template.duplication.started.toast.message",defaultMessage:"We will let you know when itâ€™s ready to use in your workspace"}),presentationType:"transient",icon:k().r,...o})}({intl:D,toastProps:C,isMobile:P});const F=Date.now();let N,V=!1;const L=x().default.state.isFromTemplateGallery||"inApp"===S||"mobileApp"===S||"notion_template_gallery"===S||"public_page"===S&&!!U&&(0,s().e_)(U);try{await Promise.all([_().ce({environment:t,spaceViewStore:r}),(0,l().Vs)(0).then((()=>{x().default.setState({...x().default.state,open:!1})}))]);const e=function(e,t){const o=t?{id:e.idCreator.idInMain(a().mK),table:a().mK}:void 0;return o}(t,L),i=x().default.state.isFromTemplateGallery||"notion_template_gallery"===S?"web_gallery":"inApp"===S?"in_app":"mobileApp"===S?"mobile_app":"public_page",s={duplicateOnlyCollectionSchema:!1,addCopyName:!1,appendWithoutAfter:!0,unlockPage:!0,event:void 0,installationImprint:e},{shouldUseDuplicateTemplateBlock:d}=await(0,y().dF)();if(d(i)||await f().Qk({environment:t,blockId:o.id,spaceId:n.id,templateId:I,installationId:null==e?void 0:e.id,source:i,context:"public_page_duplicate_multiple_workspace",isEmailShared:M}),N=await f().fD({environment:t,store:o,newParentStore:p||n,templateInstallationMetadata:{source:i,context:"public_page_duplicate_multiple_workspace",isEmailShared:M,isListedTemplate:!!U,isFromDuplicateParam:x().default.state.isFromDuplicateParam},...s}),!N||c().x.isFail(N))throw new Error("Failed to duplicate template");const u=c().x.unwrap(N);if(null==u||!u.length)throw new Error("Failed to duplicate template");if(V=!0,E){const e=Date.now()-F;e>=5e3?R({environment:t,template:U,intl:D,blockStores:u,toastProps:T,isMobile:P}):await new Promise((o=>{setTimeout((()=>{R({environment:t,template:U,intl:D,blockStores:u,toastProps:T,isMobile:P}),o()}),5e3-e)}))}return u[0]}catch(O){v?i().log({from:"client/checkoutActions",level:"error",type:"aiUpgrade.duplicationFailed",data:{message:"AI Upgrade duplication failed.  Block store not found"}}):N&&c().x.isFail(N)&&d().nr(N.error.error)?d().y1({product:N.error.error.clientData.metadata.product}):m().UW(D.formatMessage({id:"forkPageModalActions.duplicateToHelper.failed",defaultMessage:"Template duplication failed"}))}finally{const e=Date.now()-F;u().Xy(t,{from:"notion_template_gallery"!==S&&"public_page"!==S&&S?S:"publicPage",success:V,template_id:I??(null==U?void 0:U.id),template_block_id:o.id,target_space_id:n.id,context:"public_page_duplicate_multiple_workspace",template_duplication_duration_ms:e,template_duplication_duration_with_minimum_ms:e,public_template_name:(null==U?void 0:U.name)??""}),g().x()}}async function A(e,t){let o;const n=await p().callApi({eventName:"inAppGetTemplateByBlockId",environment:e,data:{blockId:t}});return"success"===n.type&&n.data.success&&n.data.template&&(o=n.data.template),o}function R(e){const{template:t,intl:o,environment:i,blockStores:a,toastProps:s={},isMobile:l=!1}=e;if(l)return h().rN(),void h().d8({blockToOpenStore:a[0],onOpenBlock:()=>{C().Z.setState({...C().Z.state,open:!1})},item:{label:o.formatMessage({id:"inApp.template.duplication.finished.toast.mobile.message",defaultMessage:"Template installation successful. You can now use it in your workspace."}),position:"bottom",style:{maxWidth:"calc(100% - 40px)",justifyContent:"center",textAlign:"center"}}});b().m2({id:"template_duplication_toast",title:o.formatMessage({id:"inApp.template.duplication.finished.toast.title",defaultMessage:"Template is ready"}),message:t?o.formatMessage({id:"inApp.template.duplication.finished.toast.templateName.message",defaultMessage:"''{templateName}'' has been added to your workspace"},{templateName:t.name}):o.formatMessage({id:"inApp.template.duplication.finished.toast.message",defaultMessage:"This template has been added to your workspace"}),presentationType:"persistent",iconGroup:r().F,iconGroupColorName:"greenPrimary",iconGroupVariant:"default",actions:{primary:{title:o.formatMessage({id:"inApp.template.duplication.finished.toast.seeTemplate.button",defaultMessage:"See template"}),onAction:()=>{v()._c({environment:i,store:a[0],visitType:S().vu.Link,pageVisitSource:n().tY.Duplicate}),b().Xd("template_duplication_toast")}}},...s})}},616963:(e,t,o)=>{o.d(t,{default:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1}}}const i=new n},141735:(e,t,o)=>{o.d(t,{F:()=>i});var n=()=>o(677559);const i={formulas:new(n().Ss)("formulas",(async()=>await Promise.all([o.e(94556),o.e(78701),o.e(38804),o.e(92341),o.e(39447)]).then(o.bind(o,22183)))),formulaAnalytics:new(n().Ss)("formulas",(async()=>await o.e(58049).then(o.bind(o,958969)))),simpleFormulas:new(n().Ss)("simpleFormulas",(async()=>await Promise.all([o.e(94556),o.e(78701),o.e(38804),o.e(92341),o.e(53568)]).then(o.bind(o,907874)))),formulaConstants:new(n().Ss)("formulaConstants",(async()=>await Promise.resolve().then(o.bind(o,92960)))),formulaEditor:new(n().Ss)("formulaEditor",(async()=>await Promise.all([o.e(94556),o.e(78701),o.e(38804),o.e(92341),o.e(47295)]).then(o.bind(o,881068)))),formulaPermissions:new(n().Ss)("formulaPermissions",(async()=>await Promise.all([o.e(94556),o.e(78701),o.e(81898)]).then(o.bind(o,853031)))),collectionFormulaHelpers:new(n().Ss)("collectionFormulaHelpers",(async()=>await Promise.resolve().then(o.bind(o,834458))))}},826480:(e,t,o)=>{o.d(t,{XH:()=>v,pz:()=>m,qv:()=>p,vZ:()=>c,zp:()=>u});o(821057);var n=()=>o(337599),i=()=>o(799891),r=()=>o(720866),a=()=>o(792409),s=()=>o(839002),l=()=>o(527278);const c="NotionTransactionTimeout",d=(0,o(788860).vU)({ReloadAllTabs:{defaultMessage:"Try closing and re-opening all Notion tabs or windows. Contact support if that doesnâ€™t fix the issue.",id:"localDatabase.errorFixes.reloadAllTabs"},ReloadThisTab:{defaultMessage:"Try reloading Notion. Contact support if that doesnâ€™t fix the issue.",id:"localDatabase.errorFixes.reloadThisTab"},AppProfileCorrupted:{defaultMessage:"Notion's local storage may be damaged. See (?) > Help & documentation > Reset Notion. Contact support if that doesnâ€™t fix the issue.",id:"localDatabase.errorFixes.helpAndSupportPrompt"},FirefoxProfileCorrupted:{defaultMessage:"Your Firefox profile may be damaged. Visit https://firefox-storage-test.glitch.me/ to diagnose. Contact support if that doesnâ€™t fix the issue.",id:"localDatabase.errorFixes.firefoxSettingsDamaged"},ChromeProfileCorrupted:{defaultMessage:"Your Chrome profile may be damaged. If you changed any chrome://flags then please reset them, then restart your browser. If issues persist, try making a new Chrome user. Contact support if that doesnâ€™t fix the issue.",id:"localDatabase.errorFixes.chromeSettingsDamaged"},ChromeIndexedDBBucketError:{defaultMessage:"Your Chrome profile may be damaged. For a more consistent experience download the Notion desktop app: https://www.notion.com/desktop",id:"localDatabase.errorFixes.chromeUpgradeCorruptedSettings"},noDiskSpace:{defaultMessage:"No disk space remaining. Contact support if that doesnâ€™t fix the issue.",id:"localDatabase.erroMessages.noDiskSpaceRemaining"},noDiskSpaceBrowserLimit:{defaultMessage:"No disk space remaining. Your browser settings may restrict the storage Notion can use. Contact support if that doesnâ€™t fix the issue.",id:"localDatabase.erroMessages.noDiskSpaceRemainingBrowserLimit"}});function u(e){return e}function p(e){return Promise.all(e)}class m{constructor(e,t,o,n){this.databaseName=void 0,this.databaseVersion=void 0,this.debugLogger=new(i().BatchedLogger)({from:"IndexedDBWrapper",type:"BulkDebug",level:"info",maxLength:100,logToConsole:false}),this.latestTransactionId=0,this.openDbCallbacks=void 0,this.db=void 0,this.getDBPromise=void 0,this.environment=e,this.databaseName=t,this.databaseVersion=o,this.openDbCallbacks=n}async reset(){try{return await(0,n().Lj)(this.databaseName),{value:void 0}}catch(e){return{error:f({environment:this.environment,error:(0,r().t)(e),details:`Failed to reset database ${this.databaseName}`,closed:!1,aborted:!1})}}finally{this.teardown()}}async startTransaction(e,t){const o="startTransaction";let n,i=0;const r=`${e.name}.${this.latestTransactionId++}`;do{try{const l=`${r} attempt #${i+1}`;if(this.debugLogInfo(o,`${l} starting`),n=await this.startTransactionAttempt({...e,name:r},t),!n.error){this.debugLogInfo(o,`${l} succeeded`);break}const c=`${l} errored, type=${n.error.type}`;if(!n.error.closed){this.debugLogInfo(o,`${c}, closed=false`);break}if(this.debugLogInfo(o,`${c}, closed=true`),this.db)try{this.db.close()}catch(a){this.debugLogInfo(o,`db.close() threw ${a}`)}if(this.teardown(),4===i)break;await s().Vs(250)}catch(a){return{error:a}}i++}while(i<5);return n}async startTransactionAttempt(e,t){const{storeNames:o,name:n,mode:s,timeoutMs:l}=e,c=`${n} failed`,d="startTransactionAttempt",u=await this.getDB();if(u.error)return u;const p=u.value,g=[];let v;try{v=p.transaction(o,s);const e=Date.now(),t=window.setTimeout((()=>{const t=Date.now()-e,o=`${n} has not completed after ${t} ms, which may prevent other transactions from running.`;this.debugLogInfo(d,o),i().log({from:"IndexedDBWrapper",type:"LongRunningTransactionWarning",level:"warning",data:{message:o,miscDataToConvertToString:{transactionLog:g}}})}),m.longRunningTimeoutMs);v.addEventListener("complete",(function(){window.clearTimeout(t)}));const r=e=>{e.stopPropagation(),window.clearTimeout(t)};v.addEventListener("error",r),v.addEventListener("abort",r)}catch(_){const e=(0,r().t)(_);return{error:f({environment:this.environment,details:`Failed to create ${s} transaction on ${this.databaseName}.${o}`,error:e,aborted:!0,closed:"InvalidStateError"===e.name})}}const h=await this.runTransaction(v,t,n,l,(e=>{i().pushWithMaxLength(g,e,100)}));if("error"in h||h.abort){this.debugLogInfo(d,`${n} command returned failed/aborted status`);try{v.abort()}catch(b){this.debugLogInfo(d,`transaction.abort() threw ${b}`)}return v.done.catch((e=>{e&&i().log({from:"IndexedDBWrapper",type:"TransactionFailure",level:"error",error:(0,a().Ui)(f({environment:this.environment,details:c,error:e,aborted:!0,closed:!1}))})})),h}if(this.debugLogInfo(d,`${n} command returned successful status`),"readwrite"===s)try{await v.done}catch(b){return{error:f({environment:this.environment,error:(0,r().t)(b),details:`In await transaction.done: ${c}`,aborted:null===b,closed:!1})}}else v.done.catch((e=>{i().log({from:"IndexedDBWrapper",type:"ReadOnlyTransactonFailureIgnored",level:"error",error:(0,a().Ui)(f({environment:this.environment,error:e,details:c,aborted:null===e,closed:!1}))})}));return{value:h.value}}freezeListener(){Boolean(this.db)&&(this.debugLogInfo("freezeListener"),i().log({level:"warning",from:"IndexedDBWrapper",type:"document.freeze",data:{dbName:this.databaseName,dbVersion:this.databaseVersion}}))}teardown(){this.debugLogInfo("teardown"),this.db=void 0,this.getDBPromise=void 0,document.removeEventListener("freeze",this.freezeListener)}debugLogInfo(e,t){this.debugLogger.log({from:"IndexedDBWrapper",level:"info",type:e,data:{message:t}})}async initDB(){try{this.debugLogInfo("initDB","Starting openDB()");const e=await(0,n().X3)(this.databaseName,this.databaseVersion,this.openDbCallbacks);return this.debugLogInfo("initDB","Completed openDB()"),document.addEventListener("freeze",this.freezeListener),e.addEventListener("close",(e=>{i().log({level:"warning",from:"IndexedDBWrapper",type:"db.onclose",data:{dbName:this.databaseName,dbVersion:this.databaseVersion},error:(0,a().Ui)(g(e))}),this.teardown()})),e.addEventListener("abort",(e=>{i().log({level:"warning",from:"IndexedDBWrapper",type:"db.onabort",data:{dbName:this.databaseName,dbVersion:this.databaseVersion}})})),e.addEventListener("error",(e=>{i().log({level:"error",from:"IndexedDBWrapper",type:"db.onerror",data:{dbName:this.databaseName,dbVersion:this.databaseVersion},error:(0,a().Ui)(g(e))})})),e.addEventListener("versionchange",(()=>{i().log({level:"warning",from:"IndexedDBWrapper",type:"db.onversionchange",data:{dbName:this.databaseName,dbVersion:this.databaseVersion}}),e.close(),this.teardown()})),{value:e}}catch(e){return{error:f({environment:this.environment,details:"Unable to initialize database",error:(0,r().t)(e),aborted:!1,closed:!1})}}}async getDB(){let e=this.db;if(!e){this.getDBPromise||(this.getDBPromise=this.initDB().then((e=>(e.error?this.teardown():(this.db=e.value,this.getDBPromise=void 0),e)),(e=>(this.teardown(),{error:{type:"InitDBException",message:"An unexpected error occurred trying to create the database.",details:"Exception in initDB",error:e,closed:!1,aborted:!1}}))));const t=await this.getDBPromise;if(t&&t.error)return t;e=t.value}return{value:e}}async runTransaction(e,t,o,n,i){try{const r=Date.now(),a=t(e,(e=>{this.debugLogInfo("runTransaction",`${o} command: ${e}`),i(e)}));if(void 0!==n&&n>=0){const e=await s().aM(a,n);if(e.timeout){const e=Date.now()-r,t=new Error(`Timeout after ${e}ms: exceeded limit ${n}ms by ${e-n}ms`);throw t.name=c,this.debugLogInfo("runTransaction",`${o} ${t.name}: ${t.message}`),this.debugLogger.flush(),t}return e.result}i("Awaiting commandResultPromise.");const l=await a;return i("Done awaiting commandResultPromise."),l}catch(a){return{error:f({environment:this.environment,error:(0,r().t)(a),details:`In runTransaction catch: ${o} failed`,closed:!1,aborted:!1})}}}}function f(e){const{environment:t,error:o,details:n,closed:i,aborted:r}=e;if(o){if(o.name===c)return{type:c,details:n,message:`Storage operation did not complete. ${l().Z.formatMessage(d.ReloadAllTabs)}`,error:o,closed:!1,aborted:!1};if("TimeoutError"===o.name&&"Transaction timed out due to inactivity."===o.message)return{type:"TransactionTimeout",details:n,message:`IndexedDB access attempt timed out. ${l().Z.formatMessage(d.ReloadThisTab)}`,error:o,closed:i,aborted:r};if("VersionError"===o.name)return{type:"OutdatedSchemaVersion",details:n,message:`This tab is running an outdated version of Notion. ${l().Z.formatMessage(d.ReloadThisTab)}`,error:o,closed:i,aborted:r};if("UnknownError"===o.name&&"Internal error opening backing store for indexedDB.open."===o.message)return{type:"ChromeUnknownInternalError",details:n,message:`Cannot open IndexedDB. ${t.device.isNative?l().Z.formatMessage(d.AppProfileCorrupted):l().Z.formatMessage(d.ChromeProfileCorrupted)}`,error:o,closed:i,aborted:r};if(t.device.isBrowser&&"UnknownError"===o.name&&"Internal error retrieving bucket data directory."===o.message)return{type:"ChromeUnknownInternalError",details:n,message:l().Z.formatMessage(d.ChromeIndexedDBBucketError),error:o,closed:i,aborted:r};if("SecurityError"===o.name&&"IDBFactory.open() called in an invalid security context"===o.message)return{type:"SafariIframeSecurityError",details:n,message:"Cannot access IndexedDB in an iframe in your browser. Try opening Notion in a new window or use a different browser.",error:o,closed:i,aborted:r};if("UnknownError"===o.name&&"Connection to Indexed Database server lost. Refresh the page to try again"===o.message)return{type:"SafariIndexedDatabaseServerLost",details:n,message:`Cannot access IndexedDB due to a bug in Safari/WebKit. ${l().Z.formatMessage(d.ReloadThisTab)}`,error:o,closed:i,aborted:r};if("InvalidStateError"===o.name&&"A mutation operation was attempted on a database that did not allow mutations."===o.message)return{type:"FirefoxPrivateBrowsing",details:n,message:"Firefox does not allow IndexedDB in Private Browsing. Try opening Notion in a normal window.",error:o,closed:i,aborted:r};if("NotFoundError"===o.name&&"The operation failed because the requested database object could not be found. For example, an object store did not exist but was being opened."===o.message)return{type:"FirefoxObjectStoreNotFound",details:n,message:`An IndexedDB object store does not exist. ${l().Z.formatMessage(d.ReloadAllTabs)} ${l().Z.formatMessage(d.FirefoxProfileCorrupted)}`,error:o,closed:!0,aborted:r};if("QuotaExceededError"===o.name){let e=l().Z.formatMessage(d.noDiskSpace);return t.device.isBrowser&&(e=l().Z.formatMessage(d.noDiskSpaceBrowserLimit)),{type:"QuotaFull",details:n,message:e,error:o,closed:i,aborted:r}}if(window.navigator.userAgent.includes("WindowsWechat")&&"AbortError"===o.name&&"Version change transaction was aborted in upgradeneeded event handler."===o.message)return{type:"UnsupportedWechat",details:n,message:"This device or application is unsupported.",error:o,closed:i,aborted:r}}return{type:"UnknownIndexedDBError",details:n,message:`An unknown IndexedDB error occurred. ${l().Z.formatMessage(d.ReloadThisTab)}`,error:o||new Error("createIndexedDBError: error was falsy"),closed:i,aborted:r}}function g(e){if(e&&e.target&&"error"in e.target){const t=e.target.error;if(!t)return;return`${t.name}: ${t.message}`}}function v(e,t){if(e.stack)return e;try{const o=new Error(`${e.message} (${t})`);throw o.name=e.name,o}catch(o){return e.stack=(0,r().t)(o).stack,e}}m.longRunningTimeoutMs=5*o(326966).hM,(0,o(947115).exposeDebugValue)("idbUnwrap",n().Wg)},148976:(e,t,o)=>{o.d(t,{$s:()=>v,Eg:()=>p,K6:()=>l,Uo:()=>g,Zh:()=>_,bd:()=>f,dv:()=>c,jh:()=>b,oA:()=>d,pv:()=>m,uY:()=>u});var n=()=>o(926724),i=()=>o(226413),r=()=>o(434255),a=()=>o(749826),s=()=>o(527278);function l(){return"on"===a().default.getEligibleGroup({experimentId:"jira_import_and_sync",defaultGroup:"control"})}function c(){return"on"===a().default.getEligibleGroup({experimentId:"jira_sync_data_center_integration",defaultGroup:"control"})}function d(){return a().default.checkGate({gateName:"jira_dc_members_flow_enabled"})}function u(){return a().default.checkGate({gateName:"jira_dc_basic_auth_enabled"})}function p(){return a().default.checkGate({gateName:"disable_jira_sync_source_for_members"})}function m(){return a().default.checkGate({gateName:"jira_onboarding_tour"})}function f(){return a().default.checkGate({gateName:"jira_dc_streaming_projects"})&&c()}function g(){return a().default.checkGate({gateName:"jira_2_way_sync"})}function v(e){let t=null,o=null;if(!e)return{projectCollectionPointer:t,taskCollectionPointer:o};const r=e.getFormat();if(r.app_config_uri===n().wW){t=e.pointer;const r=e.getSchema()[n().zI.ProjectToTaskRelation];r&&(0,i().p_)(r)&&r.collection_pointer&&(o=r.collection_pointer)}else if(r.app_config_uri===n().Ym){o=e.pointer;const r=e.getSchema()[n().Es.TaskToProjectRelation];r&&(0,i().p_)(r)&&r.collection_pointer&&(t=r.collection_pointer)}return{projectCollectionPointer:t,taskCollectionPointer:o}}const h=(0,o(788860).vU)({issueKeyNotFound:{id:"jiraSyncedCollectionUpdateError.issueKeyNotFound",defaultMessage:"Could not find jira issue key from Notion task"},collectionPageNotFound:{id:"jiraSyncedCollectionUpdateError.collectionPageNotFound",defaultMessage:"Found error getting collection page"},collectionNotFound:{id:"jiraSyncedCollectionUpdateError.collectionNotFound",defaultMessage:"Found error getting collection"},invalidPropertyId:{id:"jiraSyncedCollectionUpdateError.invalidPropertyId",defaultMessage:"Invalid property id"},unsupportedPropertyForTwoWaySync:{id:"jiraSyncedCollectionUpdateError.unsupportedPropertyForTwoWaySync",defaultMessage:"Unsupported property for two way sync"},invalidPropertyValue:{id:"jiraSyncedCollectionUpdateError.invalidPropertyValue",defaultMessage:"Invalid property value"},updateFailed:{id:"jiraSyncedCollectionUpdateError.updateFailed",defaultMessage:"Failed to update Jira issue"},permissionDeniedOrResourceNotFound:{id:"jiraSyncedCollectionUpdateError.permissionDeniedOrResourceNotFound",defaultMessage:"Permission denied or resource not found in Jira"},unknownError:{id:"jiraSyncedCollectionUpdateError.unknownError",defaultMessage:"Failed to update jira"},transitionNotFound:{id:"jiraSyncedCollectionUpdateError.transitionNotFound",defaultMessage:"Status not found in the Jira issue workflow"},jiraUserNotFound:{id:"jiraSyncedCollectionUpdateError.jiraUserNotFound",defaultMessage:"Jira user not found"},notionUserNotFound:{id:"jiraSyncedCollectionUpdateError.notionUserNotFound",defaultMessage:"Notion user not found"},convertNotionCommentToJiraCommentBodyFailed:{id:"jiraSyncedCollectionUpdateError.convertNotionCommentToJiraCommentBodyFailed",defaultMessage:"Failed to convert notion comment to jira comment body"}});function _(e){const{errorCode:t}=e,o=s().Z.getIntl();switch(t){case"issue_key_not_found":return o.formatMessage(h.issueKeyNotFound);case"collection_page_not_found":return o.formatMessage(h.collectionPageNotFound);case"collection_not_found":return o.formatMessage(h.collectionNotFound);case"invalid_property_id":return o.formatMessage(h.invalidPropertyId);case"unsupported_property_for_two_way_sync":return o.formatMessage(h.unsupportedPropertyForTwoWaySync);case"invalid_property_value":return o.formatMessage(h.invalidPropertyValue);case"update_failed":return o.formatMessage(h.updateFailed);case"permission_denied_or_resource_not_found":return o.formatMessage(h.permissionDeniedOrResourceNotFound);case"transition_not_found":return o.formatMessage(h.transitionNotFound);case"jira_user_not_found":return o.formatMessage(h.jiraUserNotFound);case"notion_user_not_found":return o.formatMessage(h.notionUserNotFound);case"convert_notion_comment_to_jira_comment_body_failed":return o.formatMessage(h.convertNotionCommentToJiraCommentBodyFailed);default:return o.formatMessage(h.unknownError)}}function b(e){var t;return null===(t=(0,r().D1)(e))||void 0===t?void 0:t.split(".")[0]}},527278:(e,t,o)=>{o.d(t,{Z:()=>r});var n=()=>o(146947),i=()=>o(788860);const r=new class{constructor(){this.intl=void 0;const e=(0,i().Sn)();this.intl=(0,i().dp)({locale:n().locale,defaultLocale:"en-US",messages:n().s},e)}formatMessage(e,t){return this.intl.formatMessage(e,t)}formatNumber(e,t){return this.intl.formatNumber(e,t)}getIntl(){return this.intl}isEnglish(){return n().locale.toLowerCase().startsWith("en")}}},214445:(e,t,o)=>{o.d(t,{SP:()=>l,ZV:()=>u,_y:()=>c,hB:()=>p,s$:()=>s,x1:()=>d,xA:()=>a});o(670560),o(267602),o(30005),o(241792);var n=()=>o(513670),i=()=>o(773725),r=()=>o(146109);function a(e){let{spaceId:t,userId:o,pageId:n}=e;const i=r().Z.getStore({spaceId:t,userId:o}).getState();if(!i)return;const a=i.pages[n];return a?{totalVisits:a.t,visits:a.v.map((e=>f(i.config,e)))}:void 0}function s(e){let{spaceId:t,userId:o,pageId:i,now:r,weightForVisit:s}=e;const l=a({spaceId:t,userId:o,pageId:i});if(!l)return;const c=l.visits.map((e=>s({now:r,visitedAt:e})));return l.totalVisits*(0,n().J6)(c)}function l(e){let{spaceId:t,userId:o,pageId:n,visitedAt:i}=e;c({spaceId:t,userId:o,visits:[{pageId:n,visitedAt:i}]})}function c(e){let{spaceId:t,userId:o,visits:n,isFromRecentPageVisits:a,isBackfill:s}=e;r().Z.getStore({spaceId:t,userId:o}).update((e=>{if(s&&null!=e&&e.config.isBackfilledFromRecentPageVisits)return e;const t=s?{config:{maxEvents:1e3,minPages:100,maxVisitsPerPage:7,visitTimestampGranularity:"minute",isBackfilledFromRecentPageVisits:!1},pages:{},lastFrecencyUpdateFromRecentPageVisitsTime:0}:e??{config:{maxEvents:1e3,minPages:100,maxVisitsPerPage:7,visitTimestampGranularity:"minute",isBackfilledFromRecentPageVisits:!1},pages:{},lastFrecencyUpdateFromRecentPageVisitsTime:0};if(s&&(n.push(...function(e){let{userId:t}=e;const o=i().Z.getVisitedIds(t),n=[];return o.forEach((e=>{i().Z.getVisits(t,e).forEach((t=>n.push({pageId:e,visitedAt:t.timestamp})))})),n}({userId:o})),t.config.isBackfilledFromRecentPageVisits=!0,t.config.backfillTime=Date.now()),n.sort(m),a&&n.length){const e=n[n.length-1];t.lastFrecencyUpdateFromRecentPageVisitsTime=Math.max(t.lastFrecencyUpdateFromRecentPageVisitsTime,e.visitedAt)}let r=!1;for(const o of n){const e=o.pageId,n=g(t.config,o.visitedAt);if(v({state:t,pageId:e,truncatedVisitedAt:n}))continue;const i=t.pages[e]??{t:0,v:[]};r=!0,i.t+=1,i.v.push(n),i.v.sort(),i.v.length>t.config.maxVisitsPerPage&&i.v.shift(),t.pages[e]=i}if(!r)return t;const l=function(e){const t=[],o=Object.keys(e.pages);return o.forEach((o=>{(e.pages[o].v??[]).forEach((e=>t.push({pageId:o,visitedAt:e})))})),t.sort(m),t}(t);let c=l.length,d=Object.keys(t.pages).length;for(let o=0;c>t.config.maxEvents&&d>=t.config.minPages&&o<l.length;o++){const e=l[o],n=t.pages[e.pageId];if(c--,!n)continue;const i=n.v.shift();n.v.length||(d<=t.config.minPages&&i?(n.v.push(i),c++):(d--,delete t.pages[e.pageId]))}return t}))}function d(e){var t;let{spaceId:o,userId:n}=e;return null===(t=r().Z.getStore({spaceId:o,userId:n}).getState())||void 0===t?void 0:t.lastFrecencyUpdateFromRecentPageVisitsTime}function u(e){var t;let{spaceId:o,userId:n}=e;return!0===(null===(t=r().Z.getStore({spaceId:o,userId:n}).getState())||void 0===t?void 0:t.config.isBackfilledFromRecentPageVisits)}function p(e){let{spaceId:t,userId:o}=e;const n=r().Z.getStore({spaceId:t,userId:o}).getState();if(!n||!n.config.isBackfilledFromRecentPageVisits)return;const i=[];return Object.keys(n.pages).forEach((e=>{const t=n.pages[e].v??[];i.push({pageId:e,visitedAt:f(n.config,t[t.length-1])})})),i.sort(((e,t)=>t.visitedAt-e.visitedAt))}function m(e,t){return e.visitedAt-t.visitedAt!=0?e.visitedAt-t.visitedAt:e.pageId.localeCompare(t.pageId)}function f(e,t){return"minute"===e.visitTimestampGranularity?60*t*1e3:(e.visitTimestampGranularity,0)}function g(e,t){return"minute"===e.visitTimestampGranularity?Math.floor(t/60/1e3):(e.visitTimestampGranularity,0)}function v(e){let{state:t,pageId:o,truncatedVisitedAt:n}=e;const i=t.pages[o]??void 0;if(!i)return!1;const r=i.v??void 0;return!!r&&r.includes(n)}},757590:(e,t,o)=>{o.d(t,{F:()=>n,Y:()=>i});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624);const n=[o(396136).iU];class i{constructor(e){this.id=o(956057).Il(),this.spaceId=void 0,this.userId=void 0,this.committed=!1,this.isLocal=!1,this.useSudoMode=void 0,this.deadlockWarningTimeout=void 0,this.operations=[],this.stores=[],this.initialRecordMap=o(217465).RecordMapWithRole.create(),this.debugLogging=void 0,this.debugLog=[],this.invertedOperations=[],this.postPerformAssertions=[],this.preEnqueueActions=[],this.postEnqueueActions=[],this.postSubmitCallbacks=[],this.postCancelCallbacks=[],this.newlyCreatedStoresForPermissionInference=new(o(747381).Z)({getKey:e=>(0,o(216939).dn)(e)}),this.userAction=void 0,this.userFlow=void 0,this.operation=void 0,this.tags=void 0,this.suggestionDiscussionStore=void 0;const{spaceId:t,userId:n,deadlockTimeoutMs:i,onDeadlockWarning:r,debugLogging:a}=e;t&&n&&(this.spaceId=t,this.userId=n),r&&(this.deadlockWarningTimeout=window.setTimeout(r,i)),this.debugLogging=a}getDebugLog(){return this.debugLog}logDebugMessage(e){var t,o;if(null!==(t=this.debugLogging)&&void 0!==t&&t.collect&&this.debugLog.push({operationsIndex:this.operations.length,message:e}),null!==(o=this.debugLogging)&&void 0!==o&&o.logToConsole){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];console.log(e,...i)}}isEmpty(){return 0===this.operations.length}annotateWithUserAction(e){this.userAction=e}annotateWithUserFlow(e){this.userFlow=e}annotateWithOperation(e){this.operation=e}annotationWithSuggestionDiscussionStore(e){if(this.suggestionDiscussionStore)throw new(o(431595).p8)("Already annotated with DiscussionStore");this.suggestionDiscussionStore=e}getSuggestionDiscussionStore(){return this.suggestionDiscussionStore}getUserActionForAnalyticsPurposesOnly(){return this.userAction}getUserFlowForAnalyticsPurposesOnly(){return this.userFlow}getOperationForAnalyticsPurposesOnly(){return this.operation}annotateWithDebugTag(e){this.tags||(this.tags=new Set),this.tags.add(e)}copyDebugTagsFrom(e){if(e.tags)for(const t of e.tags)this.annotateWithDebugTag(t)}getDebugTagsForAnalyticsPurposesOnly(){if(this.tags)return Array.from(this.tags)}cancelDeadlockWarning(){void 0!==this.deadlockWarningTimeout&&(window.clearTimeout(this.deadlockWarningTimeout),this.deadlockWarningTimeout=void 0)}done(e){this.cancelDeadlockWarning();for(const t of this.postSubmitCallbacks)t(e)}}},790620:(e,t,o)=>{o.d(t,{h:()=>i});var n=()=>o(839002);class i{constructor(e){this.SCALE=1.5,this.MAX=15,this.waitable=new(n().a6),this.failures=0,this.observer=e}getDelay(e){return Math.min(this.MAX,Math.pow(this.SCALE,e))}reset(){var e;this.waitable.trigger(),this.waitable=new(n().a6),this.failures=0,null===(e=this.observer)||void 0===e||e.onReset()}async backOffOnFailure(e,t){var o;const i=this.failures;this.failures++;const r=e*this.getDelay(i)-e;null===(o=this.observer)||void 0===o||o.onBackoff(r,t),await this.waitable.wait(e,r),this.waitable=new(n().a6)}getFailures(){return this.failures}}},907501:(e,t,o)=>{o.d(t,{Os:()=>i,Ud:()=>r,V_:()=>a});var n=()=>o(326966);function i(e,t){t.startsWith("offline -")?t="offline":t.startsWith("mobileNativeError -")&&(t="mobileNativeError");const o=e[t]||0;e[t]=o+1,e._total+=1}const r=1*n().C0,a=.5*n().C0;n().C0,n().C0},267629:(e,t,o)=>{o.d(t,{E$:()=>s,L1:()=>c,RP:()=>l,sG:()=>a,vG:()=>d});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(916054),o(653476),o(241792);var n=()=>o(619186),i=()=>o(513670);const r=25;function a(e){const{sections:t,context:o,query:a}=e;let s=a.trim().toLowerCase();if(s.startsWith("/")&&(s=s.slice(1)),!s)return c(t,o);const l=function(e){return e.map((e=>({...e,actions:e.actions.map((t=>{const o=t.searchName||t.displayName||"",n=[o,e.searchTitle||e.title||"",o].join(" ");return{...t,searchName:n}}))})))}(function(e,t){const o=[];for(const n of e){const e={...n,actions:[]};for(const i of n.actions)if(d(i,t))if(i.subActions){const r=c(i.subActions(t),t);if(i.hideSubActions){e.actions.push(i);continue}if(i.collapseSubActionsIntoParent){for(const t of r)for(const o of t.actions)e.actions.push(o);continue}const a=r.map((e=>({...e,key:`${n.key} ${i.key} ${e.key}`,title:e.title||i.displayName,searchTitle:[i.searchName||i.displayName,e.searchTitle||e.title].filter(Boolean).join(" ")})));for(const e of a)o.push(e)}else e.actions.push(i);e.actions.length&&o.push(e)}return o}(t,o)),u=[],p=new Map;for(const n of l)for(const e of n.actions)p.set(e,n),u.push(e);const m=(0,n().ZP)(s,u,(e=>e.searchName||""),{minThreshold:r,getSortScore:e=>-e.score*(e.original.sortScoreMultiplier??1)}),f=new Set(m),g=u.filter((e=>Boolean(e.alwaysShowInSearch)&&!f.has(e))),v=g.filter((e=>"start"===e.alwaysShowInSearch)),h=g.filter((e=>"end"===e.alwaysShowInSearch)),_=i().vM([...v,...m,...h],(e=>{const t=p.get(e);if(t)return t.title})),b=[];for(const n of Object.keys(_)){const e=_[n],t=p.get(e[0]);t&&b.push({...t,actions:e})}return b}function s(e,t){if(!t)return e;let o=0;const n=[];for(const i of e){if(o>=t)break;const e=i.actions.slice(0,t-o);e.length>0&&(o+=e.length,n.push({...i,actions:e}))}return n}function l(e,t){const o=[];for(const n of e){const e=n.actions.filter(t);e.length>0&&o.push({...n,actions:e})}return o}function c(e,t){return l(e,(e=>d(e,t)))}function d(e,t){if(e.validators){return e.validators.every((e=>e(t)))}return!0}},421797:(e,t,o)=>{o.d(t,{S4z:()=>Po,xDy:()=>Ae,AKv:()=>Zo,j2U:()=>zo,Eok:()=>Pt,v_H:()=>Ko,wFS:()=>yt,rol:()=>wt,WCc:()=>Lo,sRS:()=>_o,O4s:()=>ho,cWe:()=>bo,nWT:()=>Je,zzA:()=>Ye,U4I:()=>mo,Jji:()=>Zn,U_8:()=>Ke,eot:()=>He,OOI:()=>Yo,J5S:()=>je,k5s:()=>ze,iBZ:()=>On,KEd:()=>Ne,MaU:()=>Fe,NWv:()=>ro,vyP:()=>ao,Zk8:()=>$o,ITt:()=>At,FSO:()=>lt,YBx:()=>Mt,iR0:()=>Oe,EWv:()=>Ze,iJI:()=>io,TKz:()=>no,IC9:()=>Bn,Zuh:()=>zn,xks:()=>ot,ryx:()=>tt,KbU:()=>Wo,Jlb:()=>Go,Khw:()=>so,T29:()=>lo,lrK:()=>Un,sp0:()=>ti,OTA:()=>_n,W3A:()=>Sn,p4X:()=>yn,zOn:()=>kn,OoW:()=>Kn,l$5:()=>ht,OOd:()=>mt,z22:()=>bn,EJd:()=>wn,W5_:()=>vn,y9X:()=>jo,iKo:()=>Mo,_Tt:()=>jt,lA5:()=>dt,b47:()=>ut,DtP:()=>Ft,k6d:()=>rn,xDj:()=>$e,CJE:()=>yo,tls:()=>at,UI7:()=>xo,W2t:()=>vt,fy9:()=>Cn,xwj:()=>$t,YGm:()=>Xt,f7f:()=>Qt,dM3:()=>oo,p5B:()=>Rn,YO6:()=>Oo,OOv:()=>To,Vfv:()=>ct,uY7:()=>Fo,mjl:()=>Ct,VBw:()=>gt,P5O:()=>Pn,muB:()=>bt,FYR:()=>_t,DaG:()=>po,ROK:()=>qo,daU:()=>Rt,ar_:()=>Bt,VcC:()=>En,eCK:()=>Ln,ZNI:()=>an,QLY:()=>xt,K5G:()=>qe,LHu:()=>We,Jtb:()=>Qe,$H4:()=>pt,tiK:()=>Fn,J8b:()=>Tt,jBR:()=>mn,WWj:()=>fn,l2t:()=>Yn,tz$:()=>Qn,tpq:()=>Jn,Mgm:()=>to,nJQ:()=>vo,UQV:()=>It,gnQ:()=>Ut,Or$:()=>jn,US8:()=>hn,Vc5:()=>Jt,gt6:()=>zt,GKf:()=>Ht,NnH:()=>Eo,vjj:()=>eo,OXD:()=>Dn,ESL:()=>st,OPg:()=>rt,sVB:()=>Yt,wTx:()=>en,GzT:()=>kt,szW:()=>Ue,HBU:()=>An,p1d:()=>nt,b1c:()=>wo,jlf:()=>qt,V5r:()=>Dt,Cjo:()=>ft,Iay:()=>Ho,tqC:()=>Vt,Fxc:()=>Nt,_z:()=>it,ECq:()=>De,q4$:()=>Vo,tYA:()=>Ot,Hjo:()=>So,DFt:()=>Uo,KHO:()=>fo,$w6:()=>Ee,vdd:()=>ko,YZb:()=>Zt,Id2:()=>pn,$I3:()=>Gt,lvA:()=>Ao,vM3:()=>In,Ggh:()=>Wt,zNC:()=>Bo,tIA:()=>ei,Q_M:()=>Ge,hrD:()=>Kt,Mnk:()=>Lt,SYI:()=>oi,$bF:()=>Ro,ATo:()=>Nn,lPL:()=>Vn,Xa0:()=>Xe,_nA:()=>gn,U7o:()=>Be,j61:()=>Hn,zqE:()=>on,plk:()=>xn,c2G:()=>et,STD:()=>qn,ypk:()=>Ve,$cr:()=>tn,Zi3:()=>go,MAw:()=>nn,NB0:()=>Le,S0S:()=>Xn,P99:()=>St,EDF:()=>Et,fAV:()=>ni,OFQ:()=>cn,YPq:()=>ln,urk:()=>dn,Rd2:()=>un,tJc:()=>sn,DUX:()=>co,ffD:()=>Re,or:()=>Pe,Txk:()=>Do,eMw:()=>Qo,uqO:()=>Jo,zME:()=>Xo,m1H:()=>Gn,J6K:()=>Wn,cFU:()=>No,jp9:()=>Mn,KSG:()=>Tn,QYD:()=>uo,zl0:()=>Co});o(492176),o(7961),o(267602),o(916054),o(653476),o(470928),o(241792),o(228244);var n=()=>o(156642),i=()=>o(903680),r=()=>o(532850),a=()=>o(569427),s=()=>o(225339),l=()=>o(705214),c=()=>o(528514),d=()=>o(933868);const u=["TypeScript","JavaScript","GraphQL","HTML","CSS","Scss","JSON","XML","Rust"];var p=()=>o(572680),m=()=>o(396136),f=()=>o(752778),g=()=>o(602299),v=()=>o(255933),h=()=>o(306164),_=()=>o(657120),b=()=>o(629719),y=()=>o(542487),S=()=>o(955620),w=()=>o(513670),k=()=>o(326966),I=()=>o(193348),C=()=>o(986631),x=()=>o(887430),T=()=>o(205228),M=()=>o(223321),P=()=>o(718959),A=()=>o(123927),R=()=>o(605067),B=()=>o(942226),E=()=>o(122479),D=()=>o(148126),U=()=>o(91502),F=()=>o(591914),N=()=>o(436929),V=()=>o(378773),L=()=>o(26796),O=()=>o(772529),Z=()=>o(472753),j=()=>o(972079),K=()=>o(926434),z=()=>o(881688),H=()=>o(457325),q=()=>o(772084),W=()=>o(639832),G=()=>o(658096),$=()=>o(876822),Q=()=>o(524434),Y=()=>o(95718),J=()=>o(845622),X=()=>o(804217),ee=()=>o(279386),te=()=>o(725751),oe=()=>o(656769),ne=()=>o(749826),ie=()=>o(214488),re=()=>o(158429),ae=()=>o(785738),se=()=>o(543842),le=()=>o(482162),ce=()=>o(890324),de=()=>o(458335),ue=()=>o(826955),pe=()=>o(609306),me=()=>o(965903),fe=()=>o(764189),ge=()=>o(127519),ve=()=>o(286338),he=()=>o(582835),_e=()=>o(670655),be=()=>o(832144),ye=()=>o(344056),Se=()=>o(148976),we=()=>o(906591),ke=()=>o(191586),Ie=()=>o(239482),Ce=()=>o(515329),xe=()=>o(345918),Te=()=>o(550054),Me=()=>o(760651);function Pe(e){return t=>e.some((e=>e(t)))}function Ae(e){return t=>e.every((e=>e(t)))}function Re(e){return t=>!e(t)}function Be(e){return e.blocks&&1===e.blocks.length}function Ee(e){if(!Be(e))return!1;const{publicPageData:t}=G().default.state;return Boolean(null==t?void 0:t.isDLSViewer)}function De(e){return e.blocks&&e.blocks.length>1}function Ue(e){return!!(0,A().aX)()&&e.blocks.every((e=>{const t=e.getParentId(),o=e.recordStoreUIParentStore,n=null==o?void 0:o.id;return t&&n&&t!==n}))}function Fe(e){return e.blocks.every((t=>{const o=t.recordStoreUIParentStore;if(!o)return!1;const n=e.publicEditMode?e.publicEditMode:(0,Ie().n3)(o)&&ce().Z.getMode(e.environment,o);return!E().Ix(n)&&o.canEdit()}))}function Ne(e){const{environment:t}=e;return e.blocks.every((e=>E().KE({environment:t,blockStore:e})))}function Ve(e){return void 0!==e.blocks.find((e=>"suggest"===ee().MT.getMode(e)))}function Le(e){return void 0!==e.blocks.find((e=>(0,ee().a0)(ee().MT.getMode(e))))}function Oe(e){if(fe().n.state)return!1;if($n())return!1;if(e.publicEditMode){const t=e.publicEditMode.permission;return"edit"===t||"comment"===t}return!Le(e)&&e.blocks.every((e=>!e.pathIsDead()&&(!(0,Y().Eo)(e)&&e.canComment())))}function Ze(e){if(fe().n.state)return!1;if($n())return!1;if(e.publicEditMode){const t=e.publicEditMode.permission;return"edit"===t||"comment"===t}return e.blocks.every((e=>"suggest"===ee().MT.getMode(e)&&(!e.pathIsDead()&&(!(0,Y().Eo)(e)&&e.canComment()))))}function je(e){return!fe().n.state&&(!$n()&&(!Le(e)&&e.blocks.every((t=>"suggest"!==ee().MT.getMode(t)&&(!E().Ix(e.publicEditMode)&&(!t.pathIsDead()&&(!(0,Y().Eo)(t)&&(!(0,ke().Ow)(t)&&t.canEdit()))))))))}function Ke(e){return!fe().n.state&&e.blocks.every((t=>{if(E().Ix(e.publicEditMode))return!1;const o=_e().$0();return o?o.canEditCollection():t.canEdit()}))}function ze(e){return!fe().n.state&&(!$n()&&e.blocks.every((t=>!E().Ix(e.publicEditMode)&&(!t.pathIsDead()&&(!t.isPlaceholderWorkflowTemplateBlock()&&(t.isCollectionView()?t.canEditCollection():t.canEdit()))))))}function He(e){let{environment:t,publicEditMode:o,blocks:n}=e;if(fe().n.state)return!1;const{id:i}=t.currentUser;return!!i&&(!E().Ix(o)&&n.every((e=>{const o=(0,E().WE)({userId:i,store:e}).filter((t=>{let{type:o,role:n}=t;if(!n)return!1;const i=e.isCollectionView()||e.isTemplate()?d().D7(n):d().J5(n);return"public_permission"!==o&&i}));return o.length>0&&E().KE({environment:t,blockStore:e})})))}function qe(e){if(e.blocks&&1===e.blocks.length){const[o]=e.blocks;if(o.isCollectionView()){var t;const e=null===(t=o.getCollectionStore())||void 0===t?void 0:t.getValue();if(e)return(0,a().Gq)(e)||(0,a().Ev)(e)||(0,a().OY)(e)}}return!1}function We(e){if(e.blocks&&1===e.blocks.length){const[o]=e.blocks;if(o.isCollectionView()){var t;const e=null===(t=o.getCollectionStore())||void 0===t?void 0:t.getValue();if(e)return(0,a().Ev)(e)}}return!1}function Ge(e){return e.blocks.every((e=>(0,ke().Wt)(e)))}function $e(e){return e.blocks.every((e=>(0,ke().Ow)(e)))}function Qe(e){return!!(0,Se().K6)()&&e.blocks.every((e=>{if(!e.isCollectionView())return!1;const t=e.getCollectionStore();return!!t&&t.isExternallyImportedAndSyncedCollection()}))}function Ye(e){return!fe().n.state&&e.blocks.every((e=>e.canAdmin()))}function Je(e){return e.blocks.some((e=>Boolean(Z().R.findBlockFromStoreWithMethod(e,"activate"))))}function Xe(e){return e.blocks.every((e=>e.isRestricted()))}function et(e){var t;const{currentSpaceStore:o}=$().default.state,{currentUser:n}=e.environment;return void 0!==n.id&&Boolean(null===(t=(0,F()._P)(o,n.id))||void 0===t?void 0:t.isWorkspaceOwner())}function tt(){const e=P().np();return!e||!e.isLocked()}function ot(){const e=P().np();return Boolean(null==e?void 0:e.getAssociatedCollectionStore())}function nt(e){return e.blocks.length>0&&e.blocks.some((e=>e.isLocked()))}function it(e){return e.blocks.length>0}function rt(e){return e.blocks.some((e=>{const t=P().np();return!(!t||!(0,ke().Wt)(t))||!!(t&&t.isNonEditableState()&&t.uiContains(e)&&t!==e)}))}function at(e){return!!$n()||e.blocks.some((e=>e.pathIsDead()))}function st(e){return e.blocks.some((e=>{const{mainEditorCurrentBlockStore:t}=$().default.state,o=Z().R.findCollectionViewBlockFromStore(e),n=o&&"collectionContextStore"in o?o.collectionContextStore:void 0;return!(!n||n.permissionScopesStore.state.canEditContent)||Boolean(t&&t.isCollectionView()&&t.isNonEditableState()&&t.uiContains(e)&&t!==e)}))}function lt(e){return e.blocks.every((e=>{const t=e.getType(),o=e.getFormat();return Boolean((0,n().XD)(t,o)&&!(0,n().S9)(t))}))}function ct(e){var t;const o=null===(t=$().default.state.mainEditorCurrentBlockStore)||void 0===t?void 0:t.id,i=e.blocks.at(0);if(i){const e=i.getType(),t=i.getFormat(),r=i.id;return Boolean(r===o&&(0,n().XD)(e,t))}return!1}function dt(e){return e.blocks.every((e=>{const t=e.getRecordStoreUIParent();return Boolean(t&&e.isDefined()&&e.getParentId()!==t.id)}))}function ut(e){return e.blocks.every((e=>{const t=e.getRecordStoreUIParent();return Boolean(t&&t.canEdit()&&e.isDefined()&&e.getParentId()!==t.id)}))}function pt(e){if(e.blocks){const t=e.blocks.at(0);return Boolean(t&&t.isDefined()&&t.getType()===n().Ti.file&&t.getProperties().source)}return!1}function mt(e){if(!e.blocks)return!1;const t=e.blocks.at(0),o=t&&t.getProperties().source;if(!o)return!1;const n=r().zB(o);return!!n&&s().iS(n)}function ft(e){if(e.blocks){const t=e.blocks.at(0);return Boolean((null==t?void 0:t.isType(n().Ok))&&t.getProperties())}return!1}function gt(e){if(e.blocks){const t=e.blocks.at(0),o=null==t?void 0:t.getType();return Boolean(o&&(0,n().VB)(o))}return!1}function vt(e){if(e.blocks){var t;const o=e.blocks.at(0);return Boolean(null==o||null===(t=o.getModel())||void 0===t?void 0:t.isType(n().oe))}return!1}function ht(e){return t=>{if(t.blocks){const o=t.blocks.at(0);return Boolean(null==o?void 0:o.getProperties()[e])}return!1}}ht("source");function _t(e){if(e.blocks){const t=e.blocks.at(0);if(!t)return!1;if(t.pathIsDead())return!1;if((0,Y().Eo)(t))return!1;if(t.getType()===n().Ti.transclusionReference){const e=t.getTransclusionReferenceTargetStore();return Boolean(e&&e.canEdit())}return!1}return!1}function bt(e){if(e.blocks){const t=e.blocks.at(0);return!!t&&(!t.pathIsDead()&&(!(0,Y().Eo)(t)&&t.getType()===n().Ti.transclusionContainer))}return!1}function yt(e){return e.blocks.every((e=>{const t=e.getModel(),o=e.getRecordStoreUIParent();return Boolean(t&&t.isType(n().Zi)&&t.getType()!==n().Ti.transclusionContainer&&e.getParentTable()!==f().vF&&o&&o.id===e.getParentId())}))}function St(e){return t=>{if(!t.blocks)return!1;const o=t.blocks.at(0);return Boolean(o&&w().mf(o.getType)&&o.getType()===e)}}function wt(e){return t=>w().yW(t.blocks,(t=>t&&w().mf(t.getType)&&t.getType()===e))}function kt(e){const t=e.blocks.at(0);if(!t)return!1;const{language:o}=t.getProperties(),n=(0,S().QaF)(o);return u.includes(n)}function It(e){const t=e.blocks.at(0);if(!t)return!1;const{language:o}=t.getProperties();return"HTML"===(0,S().QaF)(o)}function Ct(e){return!1}function xt(e){return()=>ne().default.checkGate({gateName:e})}function Tt(e){return t=>{if(1!==t.blocks.length)return!1;const o=t.blocks.at(0);if(!o)return!1;const n=o.getParentBlockStore(),i=null==n?void 0:n.getContentStores(),r=null==i?void 0:i.map((t=>t.getType()===e));if(!r||0===(null==r?void 0:r.length))return!1;const a=null==i?void 0:i.map((e=>e.id)).indexOf(o.id);return void 0!==a&&(0===a||!r[a-1])}}function Mt(e){return e.blocks.every((e=>{const t=null==e?void 0:e.getModel();return Boolean((null==t?void 0:t.isType(n().Zj))&&e.getParentTable()!==f().vF)}))}function Pt(e){const t=P().RM();return!!t&&e.blocks.every((e=>t.uiContains(e)&&t.id!==e.id))}function At(e){return e.blocks.every((e=>{const t=Z().R.findBlockFromStoreWithMethod(e,"canRenderFullScreen");return Boolean(t&&t.canRenderFullScreen())}))}function Rt(e){let{environment:{device:t}}=e;return t.isElectron}function Bt(){return Boolean(te().default.state.isElectronHandlingZoom)}function Et(e){let{environment:{device:t}}=e;return t.isWindows}function Dt(e){let{environment:{device:t}}=e;return t.isMac}function Ut(e){let{environment:{device:t}}=e;return t.isIOS}function Ft(e){let{environment:{device:t}}=e;return t.isAndroid}function Nt(e){let{environment:{device:t}}=e;return t.isMobileNative}function Vt(e){let{environment:{device:t}}=e;return t.isMobile}function Lt(e){let{environment:{device:t}}=e;return t.isPhone}function Ot(e){let{environment:{device:t}}=e;return t.isNative}function Zt(e){let{environment:{device:t}}=e;return!t.isMobile}function jt(){return T().default.isAdminMode}function Kt(){const e=P().np();return(0,O().WE)(e)}function zt(){return L().Z.state.isOpen}function Ht(){return Boolean(re().default.state.open)}function qt(e){let{environment:t}=e;return Boolean(t.currentUser.isLoggedIn()||t.publicDomainUserId)}function Wt(){return X().default.state.online}function Gt(e){return!e.blocks.every((t=>{const o=t.inMemoryRecordCache===e.environment.defaultRecordCache.inMemoryRecordCache,n=t.inMemoryRecordCache.cacheFallbacks.has(e.environment.defaultRecordCache.inMemoryRecordCache);return o||n}))}function $t(e){return e.blocks.some((e=>e.isTemplate()))}function Qt(e){return e.blocks.some((e=>e.isCollectionViewPageWithContent()))}function Yt(e){return e.blocks.some((e=>e.isAssociatedCollectionAPageTree()))}function Jt(e){return e.blocks.every((()=>!function(){const e=P().np();return null==e?void 0:e.isCollectionViewPageWithContent()}()||zo("page",!1)(e)))}function Xt(e){if(e.blocks&&1===e.blocks.length){const[t]=e.blocks;return t.isCollectionView()}return!1}function eo(e){if(e.blocks&&1===e.blocks.length){const[t]=e.blocks;return t.isType(n().Ti.collectionView)}return!1}function to(e){if(e.blocks&&1===e.blocks.length){const[t]=e.blocks;return t.isType(n().Ti.collectionViewPage)}return!1}function oo(e){return t=>{if(t.blocks&&1===t.blocks.length){const[o]=t.blocks,n=Z().R.findCollectionViewBlockFromStore(o);if(n&&"collectionContextStore"in n)return n.collectionContextStore.getViewType()===e}return!1}}function no(e){if(e.blocks&&1===e.blocks.length){const[t]=e.blocks;return 1===t.getCollectionViewStores().length}return!1}function io(e){if(e.blocks&&1===e.blocks.length){const[t]=e.blocks,o=t.getCollectionStore();if(!o)return!1;const n=o.getSchema();return Object.values(n).map((e=>null==e?void 0:e.type)).every((e=>e&&z().k7[e]))}return!0}function ro(e){return D().NW(e.environment)}function ao(e){return D().vy(e.environment)}function so(){return oe().Z.state.open}function lo(){return M().Z.state.open}function co(){return se().Z.state.open}function uo(){return W().Z.state.open}function po(){return"editing"===ge().default.state.mode}function mo(){return!((0,Te().J6)(S().GKr.User)||(0,Te().J6)(S().GKr.Bot)||(0,Te().J6)(S().GKr.Date)||(0,Te().J6)(S().GKr.Page))}function fo(){return me().default.state.stores.length>0}function go(e){return e.blocks.every((e=>e.isTopLevel()))}function vo(e){const t=$().default.state.currentSpaceStore;return(0,xe().Cx)(t)}function ho(e){return e.blocks.every((e=>Boolean(j().Z.findOutlinerItemFromStore(e))))}function _o(e){return e.blocks.every((e=>{const t=j().Z.findOutlinerItemFromStore(e);return Boolean(t&&t.isTopLevelItem&&"bookmarks"===t.type)}))}function bo(e){return e.blocks.every((e=>{const t=j().Z.findOutlinerItemFromStore(e);return Boolean(t&&t.isTopLevelItem&&"shared"===t.type)}))}function yo(e){const t=e.blocks.at(0);if(!t)return!1;const o=t.getParentBlockStore();return!!o&&o.isNonEditableState()}function So(e){return e.blocks.some((e=>e.isNavigableBlockLocked()))}function wo(e){return!ko(e)}function ko(e){if(!(0,U().bq)())return!0;const t=e.blocks.at(0);if(t){if(t.getParentTable()===h().e0){const o=(0,Ie().VP)(t);if(!o||!(0,we().si)({teamStore:o,environment:e.environment}))return!1}}return!0}function Io(e){if(!e)return;const t=e.getParentPointer(),o=e.getRecordStoreUIParent();return(null==t?void 0:t.table)===h().e0&&o?ue().zX.createChildStore(o,t):Io(e.getParentBlockStore())}function Co(e){const{id:t}=e.environment.currentUser;return!!t&&e.blocks.every((e=>{const o=e.getPermissionItems();return(0,c().ws)(o,t)}))}function xo(e){const{currentSpaceViewStore:t}=$().default.state,o=e.blocks.at(0);return Boolean(t&&o&&(0,ye().Z)({spaceViewStore:t,pageId:o.id}))}function To(e){const t=P().np(),o=e.blocks.at(0);return Boolean((null==o?void 0:o.id)===(null==t?void 0:t.id))}function Mo(e){return e.blocks.every((t=>Boolean(E().IJ(e.environment,t))))}function Po(e){return e.blocks.every((e=>E().S4(e)))}function Ao(e){return Boolean($().default.state.mainEditorCurrentBlockStore)}function Ro(){var e,t;const o=P().np(),n=null==o||null===(e=o.getSiteStore())||void 0===e?void 0:e.getModel();return!!n&&Boolean(null===(t=n.getHeader())||void 0===t?void 0:t.hideSearch)}function Bo(e){var t;const o=e.blocks.at(0);return Boolean((null==o?void 0:o.id)===(null===(t=le().default.peekTargetStore.state)||void 0===t?void 0:t.id))}function Eo(e){var t;const o=e.blocks.at(0);return Boolean(B().Tx()&&(null==o?void 0:o.id)===(null===(t=le().default.peekTargetStore.state)||void 0===t?void 0:t.id))}function Do(e){return B().Tx()}function Uo(e){return e.blocks.every((e=>e.isNavigableBlock()))}function Fo(e){return e.blocks.some((e=>e.pathIsDead()))}function No(e){const t=e.blocks.at(0);return!!t&&(!!T().default.isAdminMode||!!t.canEdit()&&!e.environment.device.isMobile)}function Vo(e){if(1!==e.blocks.length)return!1;const t=e.blocks.at(0);return!!t&&(0,P().qG)(t.id)}function Lo(e){return!e.blocks.some((e=>{const t=null==e?void 0:e.getSystemBlockTypeStore().getValue();return(0,i().u7)(t)}))}function Oo(e){return e.blocks.some((e=>{e.useCrdt()}))}function Zo(e){return e.blocks.every((e=>Boolean(e.findRecordStoreUIAncestor((e=>e instanceof ue().Xr||e instanceof ue().G&&e.isCollectionView())).ancestor)))}function jo(e){let{blocks:t}=e;const o=null==t?void 0:t.at(0);return Boolean(o&&(0,he().bX)(o))}function Ko(e){let{blocks:t}=e;return x().v_(t)}function zo(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return o=>o.blocks.every((o=>{const n=x().fm(o,t),i=null==n?void 0:n.collectionViewStore();return(null==i?void 0:i.getType())===e}))}function Ho(){const{currentSpaceStore:e}=$().default.state;return Boolean(e&&e.canRead())}function qo(){const{currentSpaceStore:e}=$().default.state;return Boolean(e&&e.canEdit())}function Wo(e){if(T().default.isAdminMode)return!0;if(e.blocks.some((e=>{const t=(0,K().B)({blockId:e.id,setting:"disableExport"});return Boolean(null==t?void 0:t.disabled)})))return!1;if(vo()&&!Ye(e))return!1;const t=function(e){let{environment:t}=e;const{currentSpaceStore:o}=$().default.state;if(!o)return!1;const n=de().Z.getData(t,{spaceId:o.id});return o.isDefined()?!o.getDisableExport():n?!n.disableExport:jt()}(e),{environment:o,blocks:n}=e;return n.every((e=>{const n=(0,Ie().VP)(e),i=null==n?void 0:n.getModel();return n&&i?(!o.currentUser.id||!(0,y().s8)({team:i,userId:o.currentUser.id}))&&!n.getDisableExport():t}))}function Go(){const{currentSpaceStore:e}=$().default.state;return!!e&&!e.getDisableMoveToSpace()}function $o(e){return!fe().n.state&&(!!e.blocks.every((e=>e.canEdit()))&&!!Mo(e))}function Qo(e){return e.blocks.every((t=>{var o;return"edit"===(null===(o=ce().Z.getMode(e.environment,t))||void 0===o?void 0:o.permission)}))}function Yo(e){if(!Fe(e))return!1;const t=e.blocks.filter((e=>{const t=e.recordStoreUIParentStore,o=e.getParentStore();return t&&o&&t.id===o.id}));return 0===t.length||je({...e,blocks:t})}function Jo(e){let{environment:t}=e;const o=(0,P().k_)(t).state;return Boolean(o&&o.showSharedOverflowButton)}function Xo(){return(0,ve().yT)()}function en(e){let{blocks:t}=e;return t.some((e=>Boolean(e.findRecordStoreUIAncestor((e=>e instanceof ue().G&&e.isTransclusionType())).ancestor)))}function tn(e){let{environment:t}=e;return ne().default.checkGate({gateName:"lucy-in-the-sky-with-tab-blocks"})}function on(e){let{environment:t}=e;return ne().default.checkGate({gateName:"slide_block"})}function nn(){return ne().default.checkGate({gateName:"meeting_notes"})}function rn(e){let{blocks:t}=e;const o=t.at(0);if(!o)return!1;const i=o.getType(),r=o.getFormat();return Boolean(r.block_width)&&!Boolean(r.block_page_width)&&!Boolean(r.block_full_width)&&Boolean(i&&(0,n()._7)(i))}function an(e){let{environment:t}=e;return(0,be().Z)()}function sn(e){var t;let{blocks:o}=e;const n=o.at(0);return!!n&&Boolean(null===(t=(0,Ce().Jk)(n))||void 0===t||null===(t=t.slackIntegrationStore)||void 0===t?void 0:t.isReady())}function ln(){var e;const{currentSpaceStore:t}=$().default.state,o=null==t||null===(e=t.getBotSettingsStore())||void 0===e?void 0:e.getValue();return!(0,_().CJ)(o)||Boolean((null==o?void 0:o.integration_approval_statuses)&&o.integration_approval_statuses[l().T0])}function cn(e){var t;let{blocks:o}=e;const n=o.at(0);if(!n)return!1;const{slackIntegrationStore:i}=(0,Ce().Jk)(n);return Boolean(i.isReady()&&!(null!=i&&null!==(t=i.getKeyStore("enabled"))&&void 0!==t&&t.getValue()))}function dn(e){var t;let{blocks:o}=e;const n=o.at(0);if(!n)return!1;const{blockStore:i,slackIntegrationStore:r}=(0,Ce().Jk)(n);return Boolean(r.isReady()&&(null==r||null===(t=r.getKeyStore("enabled"))||void 0===t?void 0:t.getValue())&&i.id!==n.id)}function un(e){var t;let{blocks:o}=e;const n=o.at(0);if(!n)return!1;const{blockStore:i,slackIntegrationStore:r}=(0,Ce().Jk)(n);return Boolean(r.isReady()&&(null==r||null===(t=r.getKeyStore("enabled"))||void 0===t?void 0:t.getValue())&&i.id===n.id)}function pn(e){var t;let{blocks:o}=e;return(null===(t=o.at(0))||void 0===t?void 0:t.getSpaceId())!==v().N3}function mn(e){var t;return 1===e.blocks.length&&(null===(t=e.blocks.at(0))||void 0===t?void 0:t.getType())===n().Ti.form}function fn(e){var t;const{environment:o}=e,n=e.blocks.at(0);return!(!n||!n.isFormBlock())&&(o.currentUser.id===n.getCreatedById()&&Boolean(null===(t=n.getFormBlockParentBlockStore())||void 0===t?void 0:t.canEditCollection()))}function gn(e){var t;return 1===e.blocks.length&&(null===(t=e.blocks.at(0))||void 0===t?void 0:t.getType())===n().Ti.table}function vn(e){const t=H().Z.state;return t.isActive&&1===e.blocks.length&&e.blocks.at(0)===t.simpleTableStore}function hn(e){let{blocks:t}=e;return t.some((e=>Boolean(e.isImmediateColumnChild())))}function _n(e){const t=H().Z.state;if(!t.isActive)return!1;const{simpleTableStore:o}=t;return z().WN(o)>1}function bn(e){const t=H().Z.state;if(!t.isActive)return!1;const{simpleTableStore:o,selection:n}=t,i=0===n.start.row&&n.end.row===z().bm(o)-1,r=0<=n.start.col&&n.start.col<=n.end.col&&n.start.col<=z().WN(o)-1;return"column"===n.type&&r&&i}function yn(e){const t=H().Z.state;if(!t.isActive)return!1;const{simpleTableStore:o,selection:n}=t,i=0===n.start.row&&n.end.row===z().bm(o)-1,r=0===n.start.col&&0===n.end.col;return"column"===n.type&&r&&i}function Sn(e){const t=H().Z.state;if(!t.isActive)return!1;const{simpleTableStore:o}=t;return z().bm(o)>1}function wn(e){const t=H().Z.state;if(!t.isActive)return!1;const{simpleTableStore:o,selection:n}=t,i=0===n.start.col&&n.end.col===z().WN(o)-1,r=0<=n.start.row&&n.start.row<=n.end.row&&n.start.row<=z().bm(o)-1;return"row"===n.type&&r&&i}function kn(e){const t=H().Z.state;if(!t.isActive)return!1;const{simpleTableStore:o,selection:n}=t,i=0===n.start.col&&n.end.col===z().WN(o)-1,r=0===n.start.row&&0===n.end.row;return"row"===n.type&&r&&i}function In(e){var t;let{environment:o}=e;const{currentSpaceStore:n}=$().default.state;if(null==n||!n.id)return!1;const i=null===(t=ie().Z.getData(o,{spaceId:null==n?void 0:n.id}))||void 0===t?void 0:t.billingData;return"free"===(0,b().zt)(null==i?void 0:i.subscription)}function Cn(e){if(1!==e.blocks.length)return!1;const t=e.blocks.at(0);if(!t)return!1;const o=t.getParentStore();return!(!o||o.table!==m().iU)&&o.isType(n().Ti.tab)}function xn(e){const t=e.blocks.at(0);return Boolean(t&&t.isCollectionView()&&t.getCollectionViewSourceCollectionStore())}function Tn(e){if(!Be(e))return!1;const t=e.blocks.at(0);return!!t&&(0,Me().z)(t)}function Mn(e){return function(e){let{environment:t,blocks:o}=e;if(!(0,U().bq)())return!1;if(!R().lQ({environment:t,blocks:o}))return!1;const n=t.currentUser.id,{currentSpaceStore:i}=$().default.state;if(!n||null==i||!i.isDefined())return!1;if(!(0,U().Xq)({environment:t,spaceStore:i}))return!1;for(const a of o){var r;if(!a.isPageBlock())return!1;if("team"!==(null===(r=j().Z.findOutlinerItemFromStore(a))||void 0===r?void 0:r.type))return!1;const e=Io(a);if(null==e||!e.isOwner(n))return!1}return!0}(e)&&Zt(e)}function Pn(){const{currentSpaceStore:e}=$().default.state,t=null==e?void 0:e.getBotSettingsStore().getValue();return!(0,_().CJ)(t)||Boolean((null==t?void 0:t.integration_approval_statuses)&&t.integration_approval_statuses[l()._o])}function An(e){var t;return Boolean(null===(t=e.blocks.at(0))||void 0===t?void 0:t.getFormat().is_placeholder)}function Rn(e){var t;return Boolean((null===(t=e.blocks.at(0))||void 0===t||null===(t=t.getFormat().alias_pointer)||void 0===t?void 0:t.table)===g().x_)}function Bn(){const e=P().np();if(!e||!e.hasContent())return!1;if(1===e.getContentLength()){const t=e.getContentStores()[0].getTitleStore();if(W().Z.state.open&&W().Z.state.textStore===t)return!1;if(J().default.isEditingEmptyBlock())return!1}return!0}function En(){return Boolean(te().default.state.isElectronUsingCommandNumber)}function Dn(e){return e.blocks.some(C().t)}function Un(e){return e.blocks.every((e=>{const t=null==e?void 0:e.getModel();return Boolean(null==t?void 0:t.isType(n().Nn))}))}function Fn(e){return e.blocks[0].isFirstBlockInCalloutV2Block()}function Nn(){return pe().default.state.open}function Vn(e){const{environment:t}=e,{device:o}=t,n="quickSearch"===t.RouterStore.state.route.name;return o.isElectron&&n}function Ln(e){const{environment:t}=e,o=t.RouterStore.state.route;return(0,p().FK)(o)}function On(e){const{environment:t}=e;return e.blocks.some((e=>(0,V().N)({environment:t,blockStore:e})))}function Zn(e){const t=e.blocks.at(0);return Boolean((null==t?void 0:t.isType("image"))&&(0,N().fA)(t.getOriginalImageSource()))}function jn(e){const t=e.blocks.at(0);return Boolean(null==t?void 0:t.isType("image"))}function Kn(e){const t=e.blocks.at(0);return Boolean(null==t?void 0:t.getFormat().image_hyperlink)}function zn(){const e=P().np();return"page"===(null==e?void 0:e.getType())}function Hn(e){var t;return Boolean(1===e.blocks.length&&(null===(t=e.blocks.at(0))||void 0===t?void 0:t.isDictatableBlock()))}function qn(e){const t=e.blocks.at(0);return Boolean((null==t?void 0:t.isType("copy_indicator"))&&Date.now()-t.getCreatedTime()>k().A0)}function Wn(e){const t=e.blocks.at(0);return!!t&&!q().pq(t)}function Gn(e){const t=e.blocks.at(0);return!!t&&!q().iZ(t)}function $n(){const e=P().np();return Boolean(null==e?void 0:e.pathIsDead())}function Qn(e){return Yn(e.blocks.at(0))}function Yn(e){if(!e)return!1;if(!e.isType(n().Ti.alias))return!1;const t=e.getAliasTargetStore();return Boolean((null==t?void 0:t.isTable(m().iU))&&t instanceof ue().G&&t.isType(n().Ti.form))}function Jn(){return Boolean(Q().KR.isFullPageTranslateEnabled())}function Xn(e){const t=e.blocks.at(0);return xt("translate_template_top_bar")(e)&&function(e){if(!e)return!1;const t=I().Z.state;return ae().h.isTemplateListing(e.id)&&t}(t)}function ei(e){const t=e.blocks.at(0);return!!t&&t.isPageBlock()}function ti(){return(0,U().az)()>0}function oi(e){const t=e.blocks.at(0);return!!t&&t.isPlaceholderWorkflowTemplateBlock()}function ni(e){return!!ne().default.checkGate({gateName:"workflow_container"})&&ne().default.checkGate({gateName:"workflows"})}},113029:(e,t,o)=>{o.d(t,{GE:()=>N,IU:()=>j,pv:()=>K});o(670560),o(267602),o(653476),o(470928),o(241792),o(228244);var n=()=>o(756280);const i="not_defined";let r=function(e){return e.BASE_SPACE_DATA="base_space_data",e.SPACE_MEMBER_DATA="space_member_data",e.SPACE_NONMEMBER_DATA="space_nonmember_data",e.SPACE_DATA_NOT_LOADED="space_data_not_loaded",e}({});var a=()=>o(933868),s=()=>o(282017),l=()=>o(768050),c=()=>o(513670),d=()=>o(839002),u=()=>o(342792),p=()=>o(696459),m=()=>o(595380),f=()=>o(153831),g=()=>o(718959),v=()=>o(239482),h=()=>o(942226),_=()=>o(43519),b=()=>o(658096),y=()=>o(876822),S=()=>o(749826),w=()=>o(482162),k=()=>o(458335),I=()=>o(826955),C=()=>o(192425),x=()=>o(18281),T=()=>o(697623),M=()=>o(897257),P=()=>o(394501),A=()=>o(594546),R=()=>o(274879),B=()=>o(892306),E=()=>o(265903),D=()=>o(148149),U=()=>o(122479),F=()=>o(345918);async function N(e,t,o){const r=await(0,A().of)(e),{preboot:s,dontWait:l}=o||{},d="currentUser"in e;l||s||!d||await async function(e){e.currentUser.isLoggedIn()&&y().default.state.mainEditorCurrentBlockStore&&(await y().default.waitUntil((()=>Boolean(y().default.state.mainEditorCurrentBlockStore&&y().default.state.mainEditorCurrentBlockStore.isReady))),y().default.state.currentSpaceStore&&await M().subscriptionDataStoreInstance.waitUntilLoaded());_().default.shouldRefresh(e.currentUser.id)&&await(0,A().pH)(e)}(e);const m=!l&&d?await K(e):void 0,S=(0,A().eR)(),{currentUserStore:k,currentSpaceStore:C}=y().default.state,x=(0,E().getMobileNativeDeviceInfo)(),T=(0,D().getMobileNativeSessionInfo)(),F=await(0,B().getDesktopDeviceInfo)(),N=await async function(e,t){const o=await(0,R().hasPermissionForThirdPartyService)("amplitude",e),i=(0,n().l$)(t);return{is_user_consent_to_track:o,tid:i}}(e,t),j=await async function(){const e=w().default.state,t=h().mH(),o=g().np();if(o){const n=U().YO(o).map((e=>{let{permissionItem:t}=e;return t})),r=n.find((e=>"public_permission"===e.type)),s=n.find((e=>"space_permission"===e.type)),l=n.filter((e=>"user_permission"===e.type&&(0,a().rz)(e.role))),d=n.filter((e=>"user_permission"===e.type&&(0,a().J5)(e.role))),m=await async function(e){const t=await f().h.load(),o=v().uJ(e),n=[],i=c().xH(o.map((e=>{if(e instanceof I().zX)return;const o=e.getCopiedFromPointer();return o&&t.isTemplate(o)&&n.push(o.id),n})).filter(p().$K));return i}(o),g=Boolean(m)&&m.length>0,h=e.open?void 0:y().default.state.currentCollectionViewStore,{publicPageData:_}=b().default.state,S=await f().h.load(),w=o.getCopiedFromPointer();let k;return k=n.some(a().gG)?"deleted_from_trash":o.pathIsDead()?"in_trash":"live",{page_id:o.id,page_public_role:r?r.role:i,page_space_role:s?s.role:i,page_all_collaborator_count:d.length+l.length,page_editor_collaborator_count:d.length,page_read_only_collaborator_count:l.length,page_content_count:o.getContentLength(),page_current_user_role:o.getRole(),page_is_peek:t,page_copied_from:w?(0,u().F9)(w.id):void 0,page_is_notion_template:!!w&&S.isTemplate(w),page_is_template:o.isTemplate(),page_is_prepopulated:g,page_prepopulated_template_ids:m,page_is_database:o.isCollectionView(),page_view_type:h?h.getType():void 0,page_user_has_explicit_access:_?_.userHasExplicitAccess:i,page_deletion_status:k}}}(),z=(null==m?void 0:m.space_id)||void 0;return{data:{...O(),...r,...m,...j,...(0,A().Ts)(),...Z(),...L(),client_initialization_id:P().R,...V({userId:null==k?void 0:k.id,spaceId:null==C?void 0:C.id}),...F,...x,...T,...S,...N,...q(),...(G={spaceId:z,userId:(0,A().oT)(),deviceId:r.device_id,eventName:t},{unique_event_marker:H(G)}),...W(),hardware_concurrency:navigator.hardwareConcurrency,hardware_memory:navigator.deviceMemory},spaceId:null==m?void 0:m.space_id};var G}function V(e){const{userId:t,spaceId:o}=e;if(!t||!o)return;const n=(0,A().Cd)({userId:t,spaceId:o});return n?{notion_session_id:n.id,notion_session_start_ts:n.sessionStartTime,tab_id:(0,s().c$)(),tab_count:(0,m().K)()}:void 0}function L(){const e=C().Z.state;if(e)return{queryId:e.queryId}}function O(){const{currentSpaceViewStore:e}=y().default.state;return e&&e.isDefined()?{notify_desktop:e.getNotifyDesktop(),notify_email:e.getNotifyEmail(),notify_mobile:e.getNotifyMobile(),notify_email_digest:e.getNotifyEmailDigest()}:{}}function Z(){const{mainEditorCurrentBlockStore:e}=y().default.state;if(e){const t=v().VP(e);if(t)return{team_id:(0,u().cj)(t.id)}}return{}}function j(e){return e&&e.isReady()?c().jj(e.getSpaceViewStores().filter((e=>e.getJoined())).map((e=>e.getSpaceId()))).length:void 0}async function K(e){var t;await(0,d().OI)(2e3,Promise.all([M().subscriptionDataStoreInstance.waitUntilLoaded(),b().default.waitUntilLoaded()]));const o=M().subscriptionDataStoreInstance.state,{currentUserStore:n,currentSpaceStore:i}=y().default.state,{publicPageData:a}=b().default.state,s=(0,g().zj)(),p=s?(0,u().F9)(s):void 0,{mainEditorCurrentBlockStore:m}=y().default.state,f=null!=i&&i.isDefined()?{id:null==i?void 0:i.id,settings:null==i?void 0:i.getSettings(),email_domains:null==i?void 0:i.getEmailDomains(),plan_type:null==i?void 0:i.getPlanType(),initial_use_cases:null==i?void 0:i.getInitialUseCases(),invite_link_enabled:null==i?void 0:i.getInviteLinkEnabled(),created_by_id:null==i?void 0:i.getCreatedById(),created_time:i.getCreatedTime()}:void 0,v=(null==i?void 0:i.id)||(null==a?void 0:a.spaceId)||(null==m?void 0:m.getSpaceId()),h=Boolean(null==f||null===(t=f.settings)||void 0===t?void 0:t.is_teams_enabled),_=(S=y().default.state.currentUserRootStore)&&S.isReady()?c().jj(S.getSpaceViewStores().map((e=>e.getSpaceId()))).length:void 0;var S;if(v&&n&&i&&o){const t=k().Z.getData(e,{spaceId:v}),n=x().YK(o),a=x().CM(o).length||0,s=await x().DI(e,v,o),d=await x().wB(e,v,o),m=o.hasPaidNonzero,g=t?t.domain:void 0,b=f&&f.email_domains?f.email_domains:void 0,y=x().zl(o,e,v,s),S=(0,F().Ib)(t),w=(0,F().ww)(t),I=c().hj(y)&&!Number.isNaN(y)&&y!==1/0?y:0;return{space_analytics_data_type:r.SPACE_MEMBER_DATA,subscription_tier:(0,T().zt)(),page_id:p,space_id:(0,u().F9)(v),space_is_subscribed:n,space_visible_total:a,space_visible_members:s,space_visible_guests:d,space_visible_members_bucketized:(0,l().aT)(s),space_block_usage:x().Lz(e,v,o,s),space_block_usage_over_limit:x().Ln(e,v,o,s),space_role:i.getRole(),space_block_usage_percent:I,space_timeline_view_usage:x()._9(o)?o.timelineViewUsage:void 0,space_created_time:S,available_credit:0,space_domain:g,space_email_domains:b,space_has_paid_nonzero:m,space_plan_type:w,space_initial_use_cases:f?f.initial_use_cases:void 0,space_invite_link_enabled:null==f?void 0:f.invite_link_enabled,space_created_by:null!=f&&f.created_by_id?(0,u().F9)(f.created_by_id):void 0,teams_is_enabled:h,current_space_view_count:_}}if(a){const t=a.spaceId?k().Z.getData(e,{spaceId:a.spaceId}):void 0,o=(0,F().Ib)(t),n=(0,F().ww)(t);return{space_analytics_data_type:r.SPACE_NONMEMBER_DATA,space_id:v?(0,u().F9)(v):void 0,space_domain:a.spaceDomain,page_id:p,subscription_tier:(0,T().zt)(),space_created_time:o,space_plan_type:n,space_invite_link_enabled:null==f?void 0:f.invite_link_enabled,space_created_by:null!=f&&f.created_by_id?(0,u().F9)(f.created_by_id):void 0,teams_is_enabled:h,current_space_view_count:_}}return f?{space_analytics_data_type:r.BASE_SPACE_DATA,space_id:(0,u().F9)(f.id),space_created_time:f.created_time,space_plan_type:f.plan_type,space_invite_link_enabled:f.invite_link_enabled,space_created_by:f.created_by_id?(0,u().F9)(f.created_by_id):void 0,teams_is_enabled:h,current_space_view_count:_}:{space_analytics_data_type:r.SPACE_DATA_NOT_LOADED,space_id:null!=i&&i.id?(0,u().F9)(null==i?void 0:i.id):void 0,current_space_view_count:_}}const z={};function H(e){const{spaceId:t,userId:o,deviceId:n,eventName:i}=e,r=(0,u().Ul)(`${t}:${o}:${n}:${i}`),a=z[r],s=Date.now();if(!a)return z[r]=s,!0;const l=new Date(a),c=new Date(s);return l.getUTCDate()!==c.getUTCDate()?(z[r]=s,!0):void 0}function q(){let e;return S().default.state.isLoaded&&(e=S().default.getStatsigExperimentsMap()),{experiments:e,experimentStoreLoaded:S().default.state.isLoaded}}function W(){if(navigator.connection)return{net_downlink:navigator.connection.downlink,net_effective_type:navigator.connection.effectiveType,net_rtt:navigator.connection.rtt,net_save_data:navigator.connection.saveData}}},394501:(e,t,o)=>{o.d(t,{R:()=>n});const n=(0,o(342792).ZP)()},594546:(e,t,o)=>{o.d(t,{K4:()=>Y,NM:()=>q,ls:()=>me,mc:()=>X,Cd:()=>ye,of:()=>ie,Ts:()=>se,eR:()=>le,cG:()=>ge,nZ:()=>pe,Vi:()=>$,nB:()=>be,oT:()=>fe,fK:()=>z,$A:()=>H,Jq:()=>W,pH:()=>de,Ug:()=>_e,ci:()=>Se,j:()=>Q,A3:()=>ne,fW:()=>J,lu:()=>te,Zf:()=>G});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(241792),o(228244);var n=()=>o(492788),i=(o(470928),()=>o(782496)),r=()=>o(18610),a=()=>o(696459);const s="v2";function l(e){let t=[];if(e.length>0){if(t=e.filter((e=>{let{code:t}=e;return(0,r().Qh)(t)})),0===t.length)return"en-US";const o=t[0].quality,n=t.filter((e=>{let{quality:t}=e;return t===o}));let i=n.find((e=>"en"===e.code));return i||(i=n[0]),function(e){let t=(0,a().qg)(r().vi,e.code)?r().vi[e.code]:r().vi.en;return"es"===e.code?t="ES"===e.region?"es-ES":"es-LA":"zh"===e.code&&(t="TW"===e.region||"HK"===e.region?"zh-TW":"zh-CN"),t}(i)}return"en-US"}function c(e){const t=function(e){return l(i().parse(e))}(e);return`${s}/${t}`}o(30005);var d=()=>o(926161);function u(e){return o=["user_id","device_id"],(t=e)?(o.forEach((e=>{e in t&&(t[e]=t[e]?t[e].replace(/-/g,""):void 0)})),(0,d().Z)(t,"ignore-class-instances")):t;var t,o}var p=()=>o(599292),m=()=>o(947115),f=()=>o(534200),g=()=>o(799891),v=()=>o(956057),h=()=>o(35980),_=()=>o(282017),b=()=>o(122792),y=()=>o(542487),S=()=>o(513670),w=()=>o(150266),k=()=>o(342792),I=()=>o(916673),C=()=>o(205228),x=()=>o(718959),T=()=>o(707138),M=()=>o(141938),P=()=>o(43519),A=()=>o(876822),R=()=>o(804217),B=()=>o(720029),E=()=>o(749826),D=()=>o(18281),U=()=>o(113029),F=()=>o(394501),N=()=>o(274879),V=()=>o(345918);var L=()=>o(903591);const O=18e5;let Z=!1;function j(){Z=!0,localStorage.setItem("__console.enableVerboseAnalytics","true")}function K(){return C().default.isAdminMode||Z}async function z(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=K();if(await f().fK({traits:e}),t)for(const o of e)console.log("track:%c identify","font-weight: bold;",o)}async function H(e){const{environment:t,userId:o,traits:n}=e,i=P().default.shouldRefresh(o)?await de(t):P().default.state,r=function(e){const t=le();if(!t.user_id)return;const{user_id:o,email:n,name:i,...r}=e;return{...r,user_id:t.user_id,email:t.email,name:t.name}}(n);if(!r)return void g().rateLimitedLog({level:"warning",from:"analyticsHelpers",type:"noCleanAnalyticsUser"});const a=(0,k().F9)(r.user_id);if(null!=i&&i.isLoggingEnabled){const e=(0,x().VU)().map(k().F9),o=await(0,U().pv)(t),n=await ie(t),{accept_language_raw:i,accept_language_preference:s}=n,l=(0,d().Z)({accept_language_raw:i,accept_language_preference:s},"ignore-class-instances"),c={...n,space_has_paid_nonzero:!(!o||!("space_has_paid_nonzero"in o))&&o.space_has_paid_nonzero,integrations:{All:!0}},u={...r,user_email:r.email,...l,...c};f().$A({userId:a,traits:u,spaceIds:e})}K()&&console.log("identify:",JSON.stringify(n))}async function q(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K();await f().HX(),e&&console.log("deidentify user")}async function W(e){const t=await(0,U().pv)(e);t&&P().default.state.isLoggingEnabled&&f().Jq({spaceId:t.space_id,spaceData:t})}async function G(e,t){if(!e.currentUser.id)return;const o=(0,k().F9)(e.currentUser.id);return H({environment:e,userId:o,traits:{...t,user_id:o}})}(0,m().exposeDebugValue)("enableVerboseAnalytics",j),(0,m().exposeDebugValue)("disableVerboseAnalytics",(function(){Z=!1,localStorage.setItem("__console.enableVerboseAnalytics","false")})),"undefined"!=typeof window&&"true"===localStorage.getItem("__console.enableVerboseAnalytics")&&j();async function $(e){const{eventName:t,eventProperties:o,sampling:i}=e;if("decided"===i.behavior)return i.sampleDecision;if("custom"===i.behavior)return!!(0,w().aw)(i.sampleRate)&&"custom";await n().default.afterNextFlush();const r=E().default.getConfigKey("event_trail_events",t);let s=w().aw;if("object"==typeof r&&"string"==typeof r.sampleMethod&&"client_init_id"===r.sampleMethod&&(s=w().GV.bind(null,F().R)),"object"==typeof r&&"object"==typeof r.sampleRateByProperty){const{sampleRateByProperty:e}=r;for(const[t,n]of Object.entries(e)){const e=n[null==o?void 0:o[t]];if(void 0!==e)return!!s(e)&&"by_property"}}if("object"==typeof r&&"number"==typeof r.sampleRate)return!!s(r.sampleRate)&&"by_event";if("custom"===i.fallbackBehavior)return!!s(i.fallbackSampleRate)&&"fallback_in_code";const l=E().default.getConfigKey("event_trail_events","defaultSampleRate");if("number"==typeof l)return!!s(l)&&"default";const{statsigNotAvailableBehavior:c}=i;switch(c){case"track":return"statsig_not_available";case"drop":return!1;default:(0,a().t1)(c)}}function Q(e){const{environment:t,event:o,opts:n}=e,{eventName:i,eventProperties:r}=o;Y(t,i,r,n)}async function Y(e,t,o,n){try{const r=(null==n?void 0:n.sampling)||{behavior:"statsig",fallbackBehavior:"custom",fallbackSampleRate:1},a=await $({eventName:t,eventProperties:o,sampling:r});if(!a)return;0;const{data:s,spaceId:l}=await(0,U().GE)(e,t,n),c={eventName:t,eventData:{...u((0,d().Z)(S().Xh({...o,...s,...null==n?void 0:n.forceOverrideAutomaticEventData,sample_decision:a}),"ignore-class-instances")),__context:{locale:s.preferred_locale,page:{referrer:window.document.referrer,search:window.location.search}},sharedUUID:v().Il()},spaceId:l};f().j(c);var i;if(K()&&console.log(`track:%c ${t}`,"font-weight: bold;",o),e.device.isMobileNative&&E().default.checkGate({gateName:"debug_analytics"}))null===(i=e.mobileNative)||void 0===i||i.debugLog(`ðŸ¦ analytic event: ${t} | ${JSON.stringify(o)}`)}catch(r){g().log({level:"error",from:"analyticsHelpers",type:"track",data:{eventName:t,miscDataToConvertToString:{e:r}}})}}function J(e){const{environment:t,eventName:o,eventProperties:n,opts:i}=e;Y(t,o,n,{...i,sampling:(null==i?void 0:i.sampling)||{behavior:"statsig",fallbackBehavior:"statsig",statsigNotAvailableBehavior:"drop"}})}function X(e){return{DO_NOT_USE_commonTrackEvent:t=>{Y(e,t.eventName,t.properties)}}}const ee={};function te(e,t,o,n,i,r){const a=ee[o],s=Date.now();return(!a||s-a>1e3*n)&&(ee[o]=s,Y(e,t,i,r),!0)}const oe={};function ne(e,t,o,n,i,r){const a=oe[o];a&&(clearTimeout(a),delete oe[o]),oe[o]=setTimeout((()=>{delete oe[o],Y(e,t,i,r)}),1e3*n)}async function ie(e){var t,o,n,i;const{device:r}=e,a="currentUser"in e,s=a?e.RouterStore:void 0,l=null==s||null===(t=s.getState())||void 0===t||null===(t=t.route)||void 0===t?void 0:t.name,c=a?e.WindowSizeStore:void 0,d=null==c?void 0:c.state.width,u=null==c?void 0:c.state.height,m=!!a&&function(e){const t=function(e){var t;return(null==e||null===(t=e.currentUser)||void 0===t?void 0:t.id)||e.publicDomainUserId}(e);return Boolean(t)}(e),f=await ge(e),{pathname:g,...v}=(0,I().nx)(null===(o=document.location)||void 0===o?void 0:o.href,(0,_().x6)())||{},h={app_version:r.version,desktop_app_version:r.desktopAppVersion,mobile_app_version:r.mobileAppVersion,is_desktop_app_or_browser:!r.isMobile,is_desktop:r.isElectron,is_mobile:r.isMobile,is_tablet:r.isTablet,is_react_native:r.isMobileNative,is_ios:r.isIOS,is_logged_in:m,deviceType:r.os,device_type:r.deviceType,device_os:r.os,platform:r.platform,browser:r.browserName,browser_version:r.browserVersion,browser_version_bucketized:ae(r.browserVersion,r.browserName),dnt:r.doNotTrackEnabled,device_id:f&&(0,k().F9)(f),tags:(0,_().mM)(),host:null===(n=document.location)||void 0===n?void 0:n.host,route_name:l,notion_top_level_domain:(0,p().Q)(null===(i=document.location)||void 0===i?void 0:i.hostname),referrer:document.referrer||"none",accept_language_raw:ve(),accept_language_preference:he(),...v,windowWidth:d,windowHeight:u,isActive:M().Z.state.active,is_foreground:document.hasFocus(),fired_during_onboarding:T().default.state.isOnboarding,is_experimental_build:"clientExperimental"===C().default.buildTarget,is_demo:B().Z.state.isActive,is_online:R().default.state.online};return{...S().GM(h,S().o8),appSource:"client"}}const re=new Set(["Safari","Mobile Safari"]);function ae(e,t){const o=e.split(".");return re.has(t)?o.slice(0,2).join("."):o[0]}function se(){const{currentUserSettingsStore:e}=A().default.state;if(e&&e.isDefined()){let o={};const n=e.getSettings();return n&&(o={user_persona:n.persona,user_source:n.source,user_use_case:n.use_case,time_zone:n.time_zone,time_zone_region:"string"==typeof n.time_zone?(t=n.time_zone,"N/A"===t?t:t.split("/")[0]):void 0,locale:n.locale,preferred_locale:n.preferred_locale,signup_time:n.signup_time,used_desktop_web_app:n.used_desktop_web_app,used_mobile_web_app:n.used_mobile_web_app,used_mac_app:n.used_mac_app,used_windows_app:n.used_windows_app,used_ios_app:n.used_ios_app,used_android_app:n.used_android_app,user_session_count:(0,L().g)(e.id)}),S().GM(o,S().o8)}var t}function le(){const e={user_id:fe(),user_email:P().default.state.user_email,email:P().default.state.user_email,name:P().default.state.user_name};return S().GM(e,S().o8)}const ce=new Map;async function de(e){const t=e.currentUser.id;if(t){if(!ce.has(t)){const o=ue(e,{loggedIn:!0});ce.set(t,o),o.then((()=>{ce.delete(t)})).catch((e=>{throw ce.delete(t),e}))}return ce.get(t)}return ue(e,{loggedIn:!1})}async function ue(e,t){t.loggedIn&&await A().default.waitUntilRendered();const{getUserAnalyticsSettings:n}=await Promise.resolve().then(o.bind(o,824462)),i=await n(e,{});if("success"!==i.type)return void g().log({level:"warning",from:"analyticsHelpers",type:"fetchAnalyticsSettings",data:{miscDataToConvertToString:{response:i}}});const r=i.data;return P().default.setState(r),r}function pe(e){return e.map((e=>(0,V().cD)(e))).filter(a().lm).some((e=>b().QM(e)))}function me(e){const t=e.map((e=>(0,V().cD)(e))),o=new Set(S().oA(t));return o.has("enterprise")?"enterprise":o.has("business")?"business":o.has("plus")?"plus":o.has("personal")?"personal_pro":o.has("team_free")?"team_free":o.has("personal_free")?"personal_free":o.has("free")?"free":"none"}function fe(){const e=P().default.state.user_id;return e?(0,k().F9)(e):void 0}async function ge(e){const t=await(0,N().getBrowserId)(e);return t&&(0,k().F9)(t)}function ve(){return E().default.getAcceptLanguageHeader()}function he(){return c(ve()||"")}function _e(){return"on"===E().default.getEligibleGroup({experimentId:"zendesk",defaultGroup:"unassigned"})}function be(e){var t;const o=e.id,n=e.getSettingsStore().getValue();if(!e.isDefined()||void 0===n)return{team_id:(0,k().cj)(o),no_team_value:!0};const i=e.getMemberInfoUsingSpaceMembers((0,D().Io)())??[];return{team_id:(0,k().cj)(o),team_current_size:i.length,team_current_num_users:i.filter((e=>"user"===e.entity_type)).length,team_current_num_groups:i.filter((e=>"group"===e.entity_type)).length,team_access_level:(0,y().B5)(n),team_is_default:e.isDefault(),team_has_description:Boolean(e.getDescription()),team_has_icon:Boolean(e.getIcon()),team_top_pages:(null===(t=e.getTeamPagesStore().getValue())||void 0===t?void 0:t.length)??0}}function ye(e){const t=h().Z.get({userId:e.userId,key:`${e.spaceId}:analytics_session`});if(!(t&&Date.now()-t.lastFocusedTime>O))return t}function Se(e){h().Z.set({userId:e.userId,key:`${e.spaceId}:analytics_session`,value:e.session})}},718959:(e,t,o)=>{o.d(t,{h1:()=>H,_H:()=>V,qQ:()=>ie,sH:()=>ne,zj:()=>N,Fv:()=>U,np:()=>F,RF:()=>Z,RM:()=>O,Xb:()=>W,VU:()=>se,B7:()=>L,_u:()=>G,Zy:()=>de,CP:()=>oe,ui:()=>te,Pw:()=>pe,o:()=>le,hq:()=>$,VV:()=>ae,JE:()=>re,X:()=>K,qG:()=>j,kw:()=>J,rq:()=>me,tu:()=>q,_O:()=>ue,R3:()=>ee,k_:()=>Y,AK:()=>ce,cX:()=>X});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(470928),o(241792);var n=()=>o(435308),i=()=>o(156642),r=()=>o(540699),a=()=>o(566232);function s(e,t){const o=t.deviceType,n=t.mobileAppVersion;if(!(0,r().wv)(e)||"local"===e||!t.isMobileNative||!n)return!1;const i=function(e){const{environmentName:t,deviceType:o,mobileAppVersion:n,androidVersions:i,iosVersions:r}=e,s=(0,a().parseMobileAppVersion)(n,"android"===o);if(!s)return!1;if("android"===o&&!i||"ios"===o&&!r)return!1;let l;if("android"===o){if(!i)return!1;l=(0,a().parseMobileAppVersion)(i[t],!0)}else{if(!r)return!1;l=(0,a().parseMobileAppVersion)(r[t],!1)}return!!l&&(0,a().isLessThanVersion)(s,l)}({environmentName:e,deviceType:o,mobileAppVersion:n,iosVersions:{staging:"0.1.1022",development:"0.5.1168",production:"0.4.1021"}});return i}var l=()=>o(993407),c=()=>o(81954),d=()=>o(989478),u=()=>o(513670),p=()=>o(205228),m=()=>o(254213),f=()=>o(772529),g=()=>o(163085),v=()=>o(297861),h=()=>o(520849),_=()=>o(876822),b=()=>o(109083),y=()=>o(475335),S=()=>o(148882),w=()=>o(121700),k=()=>o(27475),I=()=>o(482162),C=()=>o(826955),x=()=>o(965903),T=()=>o(127519),M=()=>o(286338),P=()=>o(473244),A=()=>o(906591),R=()=>o(942226),B=()=>o(275200),E=()=>o(345918),D=()=>o(91502);function U(){if(_().default.state.mainEditorCurrentBlockStore)return{id:_().default.state.mainEditorCurrentBlockStore.id,spaceId:(0,c().J)(_().default.state.mainEditorCurrentBlockStore.pointer.spaceId)}}function F(){var e;const t=I().default.state,o=R().mH(),n=t.open&&o?t.targetStore:_().default.state.mainEditorCurrentBlockStore,i=null===(e=b().Z.state.caches[P().he])||void 0===e?void 0:e.inMemoryRecordCache;return i?null==n?void 0:n.clone(i):n}function N(){if(_().default.state.mainEditorCurrentBlockStore)return _().default.state.mainEditorCurrentBlockStore.id}function V(){return R().Tx()?k().Z:w().Z}function L(e){let t;return _().default.state.currentUserStore?t=_().default.state.currentUserStore:e.currentUser.id&&(t=new(C().U6)(e,{table:d().KJ,id:e.currentUser.id})),t}function O(){const e=x().default.getCurrentRootStore();if(e&&e instanceof C().G)return e}function Z(){const e=x().default.getCurrentRootStore();if(e&&e instanceof C().G)return e;const{currentSpaceStore:t}=_().default.state;return t||void 0}function j(e){return"myTasks"===(0,f().G)({blockOrCollectionId:e})}function K(e){return"customDb"===(0,f().G)({blockOrCollectionId:e})}const z=new(o(431687).P)({debugName:"getAppRenderState",memoizeRecursion:!0,deepEquals:!1,compute:function(e){var t;const{mainEditorCurrentBlockStore:n,initialized:i}=_().default.state,r=e.currentUser.isLoggedIn(),a=e.RouterStore.state.route,s=Boolean(n&&n.canRead()&&n.isDefined()),l=Boolean(n&&n.canEdit()&&n.isDefined()),c=Boolean(n&&(0,o(852465).Oh)(n)),d=n&&s&&(0,o(122479).IJ)(e,n),u=Boolean(d),p=d&&(0,o(933868).J5)(d.permissionItem.role),m=l&&!p,g=(null==n||null===(t=n.getModel())||void 0===t?void 0:t.isNonverifiedContentClassification())&&!(n&&o(972218).Z.bypassedPage(n.id))&&!m,{publicPageData:v}=o(658096).default.state,h=!i||!c,b=Boolean(n&&n.isReady()&&!s),y=(0,f().WE)(n),S="page"===a.name&&!a.blockId&&a.slug,w=i&&!n&&!S,k=(null==n?void 0:n.isPlaceholderWorkflowTemplateBlock())??!1,I=Boolean((0,o(572680).HK)(a)&&(w||b&&!y||g||k||(null==v?void 0:v.requireInterstitial)||(null==v?void 0:v.requireLogin)&&!r));I&&(0,M().et)()&&o(799891).log({level:"info",from:"appHelpers",type:"shouldShowError",data:{miscDataToConvertToString:{currRoute:a,publicPageData:v,shouldErrorForMissingCurrentBlockStore:w,isPageLoadedButCantRead:b,isPersonalHomeStore:y,shouldShowContentClassification:g,isMainEditorCurrentBlockStoreStillLoadingSlug:S,initialized:i,isLoggedIn:r,mainBlock:Boolean(n),mainBlockCanRead:null==n?void 0:n.canRead(),mainBlockDefined:null==n?void 0:n.isDefined()}}});const C=b&&y;return{shouldShowSidebar:function(){if((0,o(148126).Sr)(e))return Boolean(null==v?void 0:v.template);if((0,o(589525).pW)()&&"sidebar"===o(749826).default.getEligibleGroup({experimentId:"sharing_logged_out_view_awtl",defaultGroup:"control"}))return!0;const t=F()&&(null==v?void 0:v.isDLSViewer),n="quickSearch"===a.name,i=("marketplace"===a.name||"gallery"===a.name)&&e.device.isMobile,d=o(26796).Z.getState().isOpen;return Boolean(!d&&!n&&!I&&!i&&r&&(h||s&&(l&&!u||c&&!u)&&!g&&!(null!=v&&v.requireInterstitial)&&!t))}(),shouldShowFrame:"team"===a.name||"chat"===a.name||!I,shouldShowError:I,shouldRedirectFromHome:C}}});function H(e){return z.getStateFor(e)}const q=new(n().default)((()=>{const{mainEditorCurrentBlockStore:e}=_().default.state,t=e&&e.isCollectionView();return y().default.state.isKeyboardMode&&!o(406012).Z.state&&!o(795820).default.isActive()&&!t&&!o(609306).default.state.open&&!o(158429).default.state.open&&!(0,o(40484).n)()&&0===o(9599).Z.state.banners.length&&!o(201741).TI.state}),{debugName:"appHelpers.shouldHideTopbarStore"});function W(e){const{currentSpaceViewStore:t}=_().default.state;if(t){return u().G0(t.getWorkspacePages(),(0,E().KA)(e,t),t.getPrivatePages(e)).filter((e=>e.isNavigableBlock()))}return[]}function G(e){const{currentSpaceViewStore:t}=_().default.state;return t?u().mN([...t.getBookmarkedPages(),...t.getWorkspacePages(),...(0,E().KA)(e,t),...t.getPrivatePages(e)],"id"):[]}function $(e){return e.getType()===i().Ti.copyIndicator&&!S().transactionQueue.isPendingTransactionForRecord(e.pointer)}function Q(e){const{currentSpaceStore:t,currentSpaceViewStore:n,currentUserRootStore:i,currentUserSettingsStore:r}=_().default.state;if(!(n&&i&&t&&r))return;const a=(0,M().mq)(e),s=(0,o(18281).Io)(),c=n.getBookmarkedPages(),d=n.getWorkspacePages(),u=n.getTeamsStores(),{allPagesStores:p,visiblePagesStores:m}=(0,E()._o)({environment:e,spaceViewStore:n,userSettingsStore:r,type:"shared"}).state,{allPagesStores:f,visiblePagesStores:g}=(0,E()._o)({environment:e,spaceViewStore:n,userSettingsStore:r,type:"private"}).state,v=(0,E().Cx)(t),h=1===s.length&&0===d.length&&"personal"===t.getPlanType(),b=c.length>0,y=ee({isGuest:v,numWorkspacePages:d.length}),S=p.length>0,w=r.hasUserPinnedToOutliner({spaceId:t.id,type:"shared"}),k=(0,A().S4)({spaceViewStore:n,type:"teamspaces"}),I=k.truncationLimit===l().Ng?u:u.slice(0,k.truncationLimit),C=(0,D().bq)()&&I.length>0,x=(0,A().S4)({spaceViewStore:n,type:"shared"}),T=a?p.length>x.truncationLimit&&x.truncationLimit!==l().Ng:p.length>E().G$||w,P=(0,A().S4)({spaceViewStore:n,type:"private"}),R=f.length>P.truncationLimit&&P.truncationLimit!==l().Ng,B=!v,U=!(b||y||S||C),F=c.length+p.length+d.length+f.length>=8,N=[b,y,S,B,C].filter(Boolean).length;return{isGuest:v,isPersonalSpace:h,showBookmarksSection:b,showWorkspaceSection:y,showSharedSection:S,showPrivateSection:B,showOnlyPrivateSection:U,showSharedOverflowButton:T,showPrivateOverflowButton:R,shownSidebarSectionCount:N,stickTemplateItemsToBottom:F,allSharedPagesStores:p,allPrivatePagesStores:f,visibleSharedPagesStores:m,visiblePrivatePagesStores:g,showTeamSection:C,userJoinedTeamsStores:u,visibleTeamsStores:I}}const Y=u().HP((e=>new(n().default)((()=>Q(e)),{useDeepEqual:!0,debugName:"sidebarStateStore"}))),J=new(n().default)((()=>y().default.state.isKeyboardMode||o(557576).default.state.isActive||o(960562).default.state.isDragging||o(639832).Z.state.open||o(543842).Z.state.open||o(656769).Z.state.open||o(788206).Z.state.open||o(369320).Z.hasOpenMouseCapturePopup()||w().Z.state.isOpen&&!I().default.isCenterPeekOpen()||k().Z.state.isOpen||o(47375).default.state.open||o(202842).Z.state.isPinned||o(819828).Z.state.isHovered),{debugName:"menuIsOpenStore"}),X=new(n().default)((()=>{const{currentSpaceViewStore:e,currentUserStore:t}=_().default.state,n=new Set;if(!e||!t)return n;for(const i of e.getTeamsStores()){i.isMemberOrGuest(t.id,o(619779).Z.state.spacePermissionGroupIds)&&n.add(i.id)}return n}),{useDeepEqual:!0,debugName:"userTeamsInCurrentSpace"});function ee(e){let{isGuest:t,numWorkspacePages:o}=e;return!t&&!(0,D().bq)()&&o>0}function te(e){return e.device.isPhone?24:96}function oe(e){return te(e)}function ne(e){const t=x().default.getCurrentDefaultContainer();if(t)return g().Z.find((e=>e.store===t.getProps().store))}function ie(e){const t=m().z-2*te(e),o=ne();if(o){const e=o.getContentInnerWidth();if(e)return Math.min(t,e)}return t}function re(){const e=F(),t=T().default.state;if("editing"!==t.mode)return!1;const o=t.multiSelection.start.store;return Boolean(e&&e.id===o.id&&(e.getBlockTitleStore()===o||u().Xy(e.getBlockTitleStore().path,o.path)))}function ae(){const e=T().default.state;if("editing"!==e.mode)return!1;const t=e.multiSelection.start.store,o="collection"===t.table;return t.path.includes("name")&&o||!1}function se(){const{currentUserRootStore:e}=_().default.state;if(e){const t=e.getSpaceViewStores();return u().oA(t.map((e=>e.getSpaceId())))}return[]}function le(e){return u().mN(e.getSpaceViewStores(),(e=>e.getSpaceId())).filter((e=>{const t=e.getSpaceStore();return e.isDefined()&&t&&t.canEdit()}))}const ce=new(n().default)((function(){const{currentUserSettingsStore:e}=_().default.state,t=(0,o(874459).aN)();if(e){const o=e.getSettings();return void 0===(null==o?void 0:o.start_day_of_week)?t:null==o?void 0:o.start_day_of_week}return t}),{debugName:"userSettingsStartOfWeek"});function de(e){const{environment:t,store:o}=e;return o.isCollectionView()?(0,B().eA)(t)?h().Z.All:h().Z.Y:!R().wq(o)&&I().default.isSidePeekOpen()?h().Z.All:h().Z.Y}function ue(e){return s("production",e.device)||!(0,v().Y)("supportsNativeSearch")}function pe(e){const{currentUserRootStore:t,mainEditorCurrentBlockStore:o}=_().default.state;return"quickSearch"===e.RouterStore.state.route.name&&t||t||o}function me(){p().default.isAdminMode||console.log("%c\n\tnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn\n\tnnnn                         nnnn\n\tnnnnnnn                          nnnn\n\tnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn\n\tnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn\n\tnnnnnnnn                           nnn\n\tnnnnnnnn    nnnnnnnn     nnnnnnn   nnn\n\tnnnnnnnn      nnnnnnn      nnn     nnn\n\tnnnnnnnn      nnnnnnnn     nnn     nnn\n\tnnnnnnnn      nnnnnnnnnn   nnn     nnn\n\tnnnnnnnn      nnn nnnnnnn  nnn     nnn\n\tnnnnnnnn      nnn  nnnnnnnnnnn     nnn\n\tnnnnnnnn      nnn   nnnnnnnnnn     nnn\n\tnnnnnnnn      nnn     nnnnnnnn     nnn\n\tnnnnnnnn      nnn      nnnnnnn     nnn\n\tnnnnnnnn    nnnnnnnn    nnnnnn     nnn\n\t  nnnnnn                           nnn\n\t\tnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn\t\tWe're hiring!\n\t\t  nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn\t\tnotion.so/careers\n\t\t\t\t ","font-family: monospace")}},848643:(e,t,o)=>{o.d(t,{HU:()=>u,IJ:()=>c,Q7:()=>l,eC:()=>d,k2:()=>p});var n=()=>o(540699),i=()=>o(448768),r=()=>o(205228),a=()=>o(749826),s=()=>o(148126);function l(e){return!!e.device.isMobileNative&&(e.device.isIOS&&"on"===a().default.getEligibleGroup({experimentId:"ios_3rd_party_login_with_external_browser",defaultGroup:"control"})||e.device.isAndroid&&"on"===a().default.getEligibleGroup({experimentId:"android_3rd_party_login_with_external_browser",defaultGroup:"control"}))}function c(e){const{device:t}=e,o=l(e);if(t.isMobileNative){return{redirectToAuth:!1,callbackType:o?"nativeredirect":"native"}}if(t.isElectronAny){return{redirectToAuth:!1,callbackType:t.isElectronMail?"nativemailredirect":t.isElectronCalendar?"nativecalendarredirect":"nativeredirect"}}return{redirectToAuth:!0,callbackType:"redirect"}}function d(e){const{device:t}=e,o=l(e);if(t.isMobileNativeCalendar){return{redirectToAuth:!1,callbackType:"nativecalendarredirect"}}if(t.isMobileNative){return{redirectToAuth:!1,callbackType:o?"nativeredirect":"native"}}if(t.isElectronAny){return{redirectToAuth:!1,callbackType:t.isElectronMail?"nativemailredirect":t.isElectronCalendar?"nativecalendarredirect":"nativeredirect"}}if(t.isMobileBrowser||(0,s().Sr)(e)){return{redirectToAuth:!0,callbackType:"redirect"}}return{redirectToAuth:!0,callbackType:"popup"}}async function u(e,t,o){if(e.device.isHttpApp){const e=await fetch(t);return(await e.json()).url}{const e=await fetch(i().NV({httpUrl:t,protocol:r().default.protocol,includePort:o}));return(await e.json()).url}}function p(e){return i().jP({url:n().tu[e],isLocalHost:"local"===e})}},935753:(e,t,o)=>{o.d(t,{b:()=>_,L:()=>h});o(241792);var n=()=>o(816512),i=()=>o(231327),r=(o(267602),o(30005),()=>o(422894));function a(e){const t=new(r().X);return e&&e.forEach((e=>{e&&t.add(e.pointer)})),t}var s=()=>o(396136),l=()=>o(602299),c=()=>o(81954),d=()=>o(989478),u=()=>o(513670),p=()=>o(696459),m=()=>o(587565),f=()=>o(826955);function g(e,t){const o=u().oA(e.map((e=>function(e,t){if("comment_mention"===e.mentioned_from.type){const o=f().t1.createChildStore(t,{table:l().x_,id:e.mentioned_from.comment_id,spaceId:(0,c().J)(void 0)});if(!o.isDefined())return;const n=f().t1.createChildStore(t,o.getParentPointer());if(!n.isDefined())return;const i=f().G.createChildStore(t,{table:s().iU,id:n.getParentId()}),r=i.getNavigableBlockStore();if(!r)return;return i.id===r.id?{backlinkStore:r,timestamp:o.getLastEditedTime()}:{backlinkStore:r,scrollToBlockId:i.id,discussionId:n.id,timestamp:o.getLastEditedTime()}}if("reference"===e.mentioned_from.type){const o=f().G.createChildStore(t,{table:s().iU,id:e.mentioned_from.parent_block_id}).getNavigableBlockStore();if(!o)return;const n=o.getLastEditedTime();return{backlinkStore:o,scrollToBlockId:e.block_id,timestamp:n||0}}if("property_mention"===e.mentioned_from.type){const{block_id:o}=e.mentioned_from,n=f().G.createChildStore(t,{table:s().iU,id:o});if(!n.isDefined())return;const i=n.getNavigableBlockStore();if(!i)return;return i.id===n.id?{backlinkStore:i,timestamp:n.getLastEditedTime()}:{backlinkStore:i,scrollToBlockId:n.id,timestamp:n.getLastEditedTime()}}if("collection_reference"===e.mentioned_from.type){const{block_id:o}=e.mentioned_from,n=f().G.createChildStore(t,{table:s().iU,id:o});if(!n.isDefined())return;const i=n.getNavigableBlockStore();if(!i)return;return i.id===n.id?{backlinkStore:i,timestamp:n.getLastEditedTime()}:{backlinkStore:i,scrollToBlockId:n.id,timestamp:n.getLastEditedTime()}}if("alias"===e.mentioned_from.type||"transclusion_reference"===e.mentioned_from.type){const o=f().G.createChildStore(t,{table:s().iU,id:e.mentioned_from.pointer.id}),n=o.getNavigableBlockStore();if(!n)return;return{backlinkStore:n,scrollToBlockId:o.id,timestamp:n.getLastEditedTime()}}(0,p().t1)(e.mentioned_from)}(e,t)))),n=u().vM(o,(e=>{let{backlinkStore:t}=e;return t.id})),i=Object.values(n).map((e=>u().MR(e,(e=>e.discussionId?2:e.scrollToBlockId?1:0))[0]));return i.sort(((e,t)=>t.timestamp-e.timestamp)),i}function v(e,t,o){const n=e.pointer,s=t.backlinks.map(i().dq).concat([n]),l=(0,m().bi)({actorPointers:a([o]),recordPointers:new(r().X)(s),getRecordModel:e.getRecordModel});return(0,i().I3)({actor:o,backlinks:t.backlinks,getRecordModel:e.getRecordModel,actorHasPermissionViaPublicAccessOnlyFn:e=>{const{actor:t,recordPointer:o}=e;return(0,m().r$)({actor:t,recordPointer:o,permissionsContext:l})},sourceBlockRecordPointer:n})}function h(e,t){const{id:o}=t.currentUser;let i;if(o){const t=e.getRecordModel({table:d().KJ,id:o});t&&(i=(0,n().dp)(t))}const r=t.LocalBacklinkStore.getBacklinkState({blockId:e.id,currentUserId:o});if(0===r.backlinks.length)return{backlinks:[],inaccessibleBacklinkCount:0};const a=v(e,r,i);return 0===a.length?{backlinks:[],inaccessibleBacklinkCount:r.inaccessibleBacklinkCount}:{backlinks:g(a,e),inaccessibleBacklinkCount:r.inaccessibleBacklinkCount}}function _(e,t){const{id:o}=t.currentUser;let i;if(o){const t=e.getRecordModel({table:d().KJ,id:o});t&&(i=(0,n().dp)(t))}const r=t.LocalBacklinkStore.getBacklinkState({blockId:e.id,currentUserId:o});return 0===r.backlinks.length?{backlinksCount:0,inaccessibleBacklinkCount:0}:{backlinksCount:v(e,r,i).length,inaccessibleBacklinkCount:r.inaccessibleBacklinkCount}}},500174:(e,t,o)=>{o.d(t,{X:()=>i,v:()=>n});let n=function(e){return e.Red="red",e.Blue="blue",e.Beige="beige",e.White="white",e.Purple="purple",e.LightRed="light-red",e.Yellow="yellow",e.PageNotification="page-notification",e.ImportNotification="import-notification",e.LightBlue="light-blue",e.LightGray="light-gray",e}({});function i(e){switch(e){case n.Red:return"red";case n.Blue:return"blue";case n.Beige:return"yellow";case n.White:return"gray";case n.Purple:return"blue";case n.LightRed:return"red";case n.Yellow:return"yellow";case n.PageNotification:return"gray";case n.ImportNotification:case n.LightBlue:return"blue";case n.LightGray:default:return"gray"}}},907005:(e,t,o)=>{o.d(t,{$B:()=>C,Fr:()=>H,Jy:()=>V,Mg:()=>x,S7:()=>O,UG:()=>K,Xq:()=>M,Yu:()=>D,ZW:()=>j,_Z:()=>N,ax:()=>I,dq:()=>q,iC:()=>U,iD:()=>z,n_:()=>L,sU:()=>F,sw:()=>k});o(492176),o(7961),o(241792);var n=()=>o(730120),i=()=>o(820271),r=()=>o(226413),a=()=>o(532850),s=()=>o(295617),l=()=>o(874459),c=()=>o(998411),d=()=>o(956057),u=()=>o(217465),p=()=>o(396136),m=()=>o(752778),f=()=>o(955620),g=()=>o(788860),v=()=>o(513670),h=()=>o(543172),_=()=>o(696459),b=()=>o(527278),y=()=>o(876822),S=()=>o(749826);const w=(0,g().vU)({addNewTodoTitle:{defaultMessage:"Add a new to-do",id:"blockTemplates.templateButton.addNewTodoTitle"}});function k(){return u().RecordMapLegacy.create({block:{root:{id:"root",version:27,type:"factory",properties:{title:[[b().Z.formatMessage(w.addNewTodoTitle)]]},content:["to_do"]},to_do:{id:"to_do",version:4,type:"to_do",parent_table:"block",parent_id:"root",alive:!0}}})}function I(){return u().RecordMapLegacy.create({block:{root:{id:"root",version:0,type:"button",format:{automation_id:"automation"}}},automation:{automation:{id:"automation",parent_id:"root",parent_table:p().iU,alive:!0,status:"active",trigger:{id:d().Il(),type:"button"},action_ids:[],properties:{name:""}}}})}function C(){return u().RecordMapLegacy.create({block:{root:{id:"root",version:0,type:"workflow",format:{workflow_id:"workflow"}}},workflow:{workflow:{id:"workflow",parent_id:"root",parent_table:p().iU}}})}const x=(0,g().vU)({namePropertyTitle:{defaultMessage:"Name",id:"blockTemplates.table.namePropertyTitle"},tagsPropertyTitle:{defaultMessage:"Tags",id:"blockTemplates.table.tagsPropertyTitle"}});const T=(0,g().vU)({responderPropertyTitle:{defaultMessage:"Respondent",id:"blockTemplates.form.responderPropertyTitle"},createdTimePropertyName:{defaultMessage:"Submission time",id:"blockTemplates.form.createdTimePropertyName"},formInitialQuestionPropertyTitle:{defaultMessage:"Question 1",id:"blockTemplates.form.formInitialQuestionPropertyTitle"},formInitialQuestionPropertySelect:{defaultMessage:"Question 2",id:"blockTemplates.form.formInitialQuestionPropertySelect"},formInitialQuestionPropertySelectOption1:{defaultMessage:"Option 1",id:"blockTemplates.form.formInitialQuestionPropertySelectOption1"},formInitialQuestionPropertySelectOption2:{defaultMessage:"Option 2",id:"blockTemplates.form.formInitialQuestionPropertySelectOption2"},formInitialQuestionPropertySelectOption3:{defaultMessage:"Option 3",id:"blockTemplates.form.formInitialQuestionPropertySelectOption3"}});function M(e){const{isInline:t,name:o}=e,n=(0,h().ZP)(),i=(0,h().ZP)(),r=(0,h().ZP)(),a=(0,h().ZP)(),s=(0,h().ZP)(),l=(0,h().ZP)();return u().RecordMapLegacy.create({block:{root:{id:"root",type:t?"collection_view":"collection_view_page",collection_id:"collection",format:{collection_pointer:{table:m().vF,id:"collection"}},view_ids:[],alive:!0}},collection:{collection:{id:"collection",name:o,schema:{title:{name:b().Z.formatMessage(T.formInitialQuestionPropertyTitle),type:"title"},[n]:{name:b().Z.formatMessage(T.responderPropertyTitle),type:"created_by"},[i]:{name:b().Z.formatMessage(T.createdTimePropertyName),type:"created_time"},[r]:{name:b().Z.formatMessage(T.formInitialQuestionPropertySelect),type:"select",options:[{id:a,value:b().Z.formatMessage(T.formInitialQuestionPropertySelectOption1),color:"blue"},{id:s,value:b().Z.formatMessage(T.formInitialQuestionPropertySelectOption2),color:"yellow"},{id:l,value:b().Z.formatMessage(T.formInitialQuestionPropertySelectOption3),color:"red"}]}},format:{},parent_id:"root",parent_table:"block",alive:!0}}})}const P=(0,g().vU)({viewTitle:{defaultMessage:"Board view",id:"blockTemplates.board.viewTitle"},namePropertyTitle:{defaultMessage:"Name",id:"blockTemplates.board.namePropertyTitle"},assignPropertyTitle:{defaultMessage:"Assign",id:"blockTemplates.board.assignPropertyTitle"},statusPropertyTitle:{defaultMessage:"Status",id:"blockTemplates.board.statusPropertyTitle"},card1Title:{defaultMessage:"Card 1",id:"blockTemplates.board.card1Title"},card2Title:{defaultMessage:"Card 2",id:"blockTemplates.board.card2Title"},card3Title:{defaultMessage:"Card 3",id:"blockTemplates.board.card3Title"}});const A=(0,g().vU)({viewTitle:{defaultMessage:"Calendar view",id:"blockTemplates.calendar.viewTitle"},namePropertyTitle:{defaultMessage:"Name",id:"blockTemplates.calendar.namePropertyTitle"},datePropertyTitle:{defaultMessage:"Date",id:"blockTemplates.calendar.datePropertyTitle"},tagsPropertyTitle:{defaultMessage:"Tags",id:"blockTemplates.calendar.tagsPropertyTitle"}});const R=(0,g().vU)({viewTitle:{defaultMessage:"Timeline view",id:"blockTemplates.timeline.viewTitle"},datePropertyTitle:{defaultMessage:"Date",id:"blockTemplates.timeline.datePropertyTitle"}});const B=(0,g().vU)({viewTitle:{defaultMessage:"Gallery view",id:"blockTemplates.gallery.viewTitle"},namePropertyTitle:{defaultMessage:"Name",id:"blockTemplates.gallery.namePropertyTitle"},tagsPropertyTitle:{defaultMessage:"Tags",id:"blockTemplates.gallery.tagsPropertyTitle"},createdPropertyTitle:{defaultMessage:"Created",id:"blockTemplates.gallery.createdPropertyTitle"},page1Title:{defaultMessage:"Page 1",id:"blockTemplates.gallery.page1Title"},page2Title:{defaultMessage:"Page 2",id:"blockTemplates.gallery.page2Title"},page3Title:{defaultMessage:"Page 3",id:"blockTemplates.gallery.page3Title"},page1TodoTitle:{defaultMessage:"To-do",id:"blockTemplates.gallery.page1TodoTitle"},page1CompletedTodoTitle:{defaultMessage:"Completed To-do",id:"blockTemplates.gallery.page1CompletedTodoTitle"}});const E=(0,g().vU)({viewTitle:{defaultMessage:"List view",id:"blockTemplates.list.viewTitle"},namePropertyTitle:{defaultMessage:"Name",id:"blockTemplates.list.namePropertyTitle"},tagsPropertyTitle:{defaultMessage:"Tags",id:"blockTemplates.list.tagsPropertyTitle"},createdPropertyTitle:{defaultMessage:"Created",id:"blockTemplates.list.createdPropertyTitle"},page1Title:{defaultMessage:"Page 1",id:"blockTemplates.list.page1Title"},page2Title:{defaultMessage:"Page 2",id:"blockTemplates.list.page2Title"},page3Title:{defaultMessage:"Page 3",id:"blockTemplates.list.page3Title"}});function D(e){const{environment:t,isInline:o,viewType:d,name:p,chartType:f}=e;return"table"===d?function(e){var t;const{isInline:o,name:n,skipDefaultRowsAndColumns:i}=e,r=(0,h().ZP)(),a=!(i||null!==(t=y().default.state.currentUserSettingsStore)&&void 0!==t&&null!==(t=t.getSettings())&&void 0!==t&&t.no_default_rows_or_columns_for_new_databases||"on"===S().default.getEligibleGroup({experimentId:"packaging_db_empty_states"}));return u().RecordMapLegacy.create({block:{root:{id:"root",type:o?"collection_view":"collection_view_page",collection_id:"collection",format:{collection_pointer:{table:m().vF,id:"collection"}},view_ids:["view"],alive:!0},...a&&{item_1:{id:"item_1",type:"page",parent_id:"collection",parent_table:"collection",alive:!0},item_2:{id:"item_2",type:"page",parent_id:"collection",parent_table:"collection",alive:!0},item_3:{id:"item_3",type:"page",parent_id:"collection",parent_table:"collection",alive:!0}}},collection_view:{view:{id:"view",version:0,type:"table",format:{collection_pointer:{table:m().vF,id:"collection"},table_properties:[{property:"title",visible:!0,width:276},{property:r,visible:!0}],table_wrap:!0},page_sort:a?["item_1","item_2","item_3"]:[],parent_id:"root",parent_table:"block",alive:!0}},collection:{collection:{id:"collection",name:n,schema:{title:{name:b().Z.formatMessage(x.namePropertyTitle),type:"title"},...a&&{[r]:{name:b().Z.formatMessage(x.tagsPropertyTitle),type:"multi_select"}}},format:{...a&&{collection_page_properties:[{property:r,visible:!0}]}},parent_id:"root",parent_table:"block",alive:!0}}})}({environment:t,isInline:o,name:p}):"board"===d?function(e){const{isInline:t,name:o}=e,n=(0,h().ZP)(),i=(0,h().ZP)(),a="on"!==S().default.getEligibleGroup({experimentId:"packaging_db_empty_states"});return u().RecordMapLegacy.create({block:{root:{id:"root",type:t?"collection_view":"collection_view_page",collection_id:"collection",format:{collection_pointer:{table:m().vF,id:"collection"}},view_ids:["view"],alive:!0},...a&&{item_1:{id:"item_1",type:"page",parent_id:"collection",parent_table:"collection",alive:!0,properties:{title:[[b().Z.formatMessage(P.card1Title)]]}},item_2:{id:"item_2",type:"page",parent_id:"collection",parent_table:"collection",alive:!0,properties:{title:[[b().Z.formatMessage(P.card2Title)]]}},item_3:{id:"item_3",type:"page",parent_id:"collection",parent_table:"collection",alive:!0,properties:{title:[[b().Z.formatMessage(P.card3Title)]]}}}},collection_view:{view:{id:"view",version:0,type:"board",name:b().Z.formatMessage(P.viewTitle),query2:{aggregations:[{aggregator:"count"}]},format:{collection_pointer:{table:m().vF,id:"collection"},board_columns_by:{property:n,type:"status",groupBy:"option",sort:{type:"ascending"}},board_columns:[{property:n,value:{type:"status",value:{type:"by_option",option:b().Z.formatMessage(s().i9.statusOptionNotStarted)}}},{property:n,value:{type:"status",value:{type:"by_option",option:b().Z.formatMessage(s().i9.statusOptionInProgress)}}},{property:n,value:{type:"status",value:{type:"by_option",option:b().Z.formatMessage(s().i9.statusOptionDone)}}}],board_properties:[{property:n,visible:!1},{property:i,visible:!0}]},page_sort:a?["item_1","item_2","item_3"]:[],parent_id:"root",parent_table:"block",alive:!0}},collection:{collection:{id:"collection",name:o,schema:{title:{name:b().Z.formatMessage(P.namePropertyTitle),type:"title"},[i]:{name:b().Z.formatMessage(P.assignPropertyTitle),type:"person"},[n]:(0,r().I4)(b().Z.formatMessage(P.statusPropertyTitle),b().Z.getIntl())},format:{collection_page_properties:[{property:n,visible:!0},{property:i,visible:!0}]},parent_id:"root",parent_table:"block",alive:!0}}})}({environment:t,isInline:o,name:p}):"calendar"===d?function(e){const{isInline:t,name:o}=e,n=(0,h().ZP)(),i=(0,h().ZP)();return u().RecordMapLegacy.create({block:{root:{id:"root",type:t?"collection_view":"collection_view_page",collection_id:"collection",format:{collection_pointer:{table:m().vF,id:"collection"}},view_ids:["view"],alive:!0}},collection_view:{view:{id:"view",version:0,type:"calendar",name:b().Z.formatMessage(A.viewTitle),format:{collection_pointer:{table:m().vF,id:"collection"}},query2:{calendar_by:n},parent_id:"root",parent_table:"block",alive:!0}},collection:{collection:{id:"collection",name:o,schema:{title:{name:b().Z.formatMessage(A.namePropertyTitle),type:"title"},[n]:{name:b().Z.formatMessage(A.datePropertyTitle),type:"date"},[i]:{name:b().Z.formatMessage(A.tagsPropertyTitle),type:"multi_select"}},parent_id:"root",parent_table:"block",alive:!0}}})}({environment:t,isInline:o,name:p}):"list"===d?function(e){const{isInline:t,name:o}=e,n=(0,h().ZP)(),i=(0,h().ZP)(),r="on"!==S().default.getEligibleGroup({experimentId:"packaging_db_empty_states"});return u().RecordMapLegacy.create({block:{root:{id:"root",type:t?"collection_view":"collection_view_page",collection_id:"collection",format:{collection_pointer:{table:m().vF,id:"collection"}},view_ids:["view"],alive:!0},...r&&{item_1:{id:"item_1",type:"page",parent_id:"collection",parent_table:"collection",alive:!0,properties:{title:[[b().Z.formatMessage(E.page1Title)]]}},item_2:{id:"item_2",type:"page",parent_id:"collection",parent_table:"collection",alive:!0,properties:{title:[[b().Z.formatMessage(E.page2Title)]]}},item_3:{id:"item_3",type:"page",parent_id:"collection",parent_table:"collection",alive:!0,properties:{title:[[b().Z.formatMessage(E.page3Title)]]}}}},collection_view:{view:{id:"view",version:0,type:"list",name:b().Z.formatMessage(E.viewTitle),query2:{aggregations:[{aggregator:"count"}]},format:{collection_pointer:{table:m().vF,id:"collection"},list_properties:[{property:n,visible:!0}]},page_sort:r?["item_1","item_2","item_3"]:[],parent_id:"root",parent_table:"block",alive:!0}},collection:{collection:{id:"collection",name:o,schema:{title:{name:b().Z.formatMessage(E.namePropertyTitle),type:"title"},[n]:{name:b().Z.formatMessage(E.tagsPropertyTitle),type:"multi_select",options:[]},[i]:{name:b().Z.formatMessage(E.createdPropertyTitle),type:"created_time"}},format:{collection_page_properties:[{property:i,visible:!0},{property:n,visible:!0}]},parent_id:"root",parent_table:"block",alive:!0}}})}({environment:t,isInline:o,name:p}):"gallery"===d?function(e){const{isInline:t,name:o}=e,n=(0,h().ZP)(),i=(0,h().ZP)(),r="on"!==S().default.getEligibleGroup({experimentId:"packaging_db_empty_states"});return u().RecordMapLegacy.create({block:{root:{id:"root",type:t?"collection_view":"collection_view_page",collection_id:"collection",format:{collection_pointer:{table:m().vF,id:"collection"}},view_ids:["view"],alive:!0},...r&&{item_1:{id:"item_1",type:"page",parent_id:"collection",parent_table:"collection",alive:!0,properties:{title:[[b().Z.formatMessage(B.page1Title)]]},content:["to_do_1","to_do_2"]},item_2:{id:"item_2",type:"page",parent_id:"collection",parent_table:"collection",alive:!0,properties:{title:[[b().Z.formatMessage(B.page2Title)]]}},item_3:{id:"item_3",type:"page",parent_id:"collection",parent_table:"collection",alive:!0,properties:{title:[[b().Z.formatMessage(B.page3Title)]]}},to_do_1:{id:"to_do_1",type:"to_do",parent_id:"item_1",parent_table:"block",alive:!0,properties:{title:[[b().Z.formatMessage(B.page1TodoTitle)]]}},to_do_2:{id:"to_do_2",type:"to_do",parent_id:"item_1",parent_table:"block",alive:!0,properties:{title:[[b().Z.formatMessage(B.page1CompletedTodoTitle)]],checked:[["Yes"]]}}}},collection_view:{view:{id:"view",version:0,type:"gallery",name:b().Z.formatMessage(B.viewTitle),query2:{aggregations:[{aggregator:"count"}]},format:{collection_pointer:{table:m().vF,id:"collection"},gallery_cover:{type:"page_content"}},page_sort:r?["item_1","item_2","item_3"]:[],parent_id:"root",parent_table:"block",alive:!0}},collection:{collection:{id:"collection",name:o,schema:{title:{name:b().Z.formatMessage(B.namePropertyTitle),type:"title"},[n]:{name:b().Z.formatMessage(B.tagsPropertyTitle),type:"multi_select",options:[]},[i]:{name:b().Z.formatMessage(B.createdPropertyTitle),type:"created_time"}},format:{collection_page_properties:[{property:i,visible:!0},{property:n,visible:!0}]},parent_id:"root",parent_table:"block",alive:!0}}})}({environment:t,isInline:o,name:p}):"timeline"===d?function(e){const{isInline:t,name:o}=e,i=(0,h().ZP)(),s=(0,h().ZP)(),d=(0,h().ZP)();return u().RecordMapLegacy.create({block:{root:{id:"root",type:t?"collection_view":"collection_view_page",collection_id:"collection",format:{collection_pointer:{table:m().vF,id:"collection"}},view_ids:["view"],alive:!0},item_1:{id:"item_1",type:"page",parent_id:"collection",parent_table:"collection",properties:{title:[[b().Z.formatMessage(P.card1Title)]],[i]:(0,a().d7)((0,l().fZ)(n().ou.now().minus({days:5}).startOf("day").valueOf(),n().ou.now().minus({days:1}).startOf("day").valueOf(),(0,c().r)()))},alive:!0},item_2:{id:"item_2",type:"page",parent_id:"collection",parent_table:"collection",properties:{title:[[b().Z.formatMessage(P.card2Title)]],[i]:(0,a().d7)((0,l().fZ)(n().ou.now().minus({days:3}).startOf("day").valueOf(),n().ou.now().plus({days:1}).startOf("day").valueOf(),(0,c().r)()))},alive:!0},item_3:{id:"item_3",type:"page",parent_id:"collection",parent_table:"collection",properties:{title:[[b().Z.formatMessage(P.card3Title)]],[i]:(0,a().d7)((0,l().fZ)(n().ou.now().minus({days:1}).startOf("day").valueOf(),n().ou.now().plus({days:3}).startOf("day").valueOf(),(0,c().r)()))},alive:!0}},collection_view:{view:{id:"view",version:0,type:"timeline",name:b().Z.formatMessage(R.viewTitle),format:{collection_pointer:{table:m().vF,id:"collection"},timeline_show_table:!t,timeline_properties:[{property:"title",visible:!0}],timeline_table_properties:[{property:"title",visible:!0,width:280},{property:i,visible:!1,width:180},{property:s,visible:!1,width:180},{property:d,visible:!1,width:180}]},page_sort:["item_1","item_2","item_3"],parent_id:"root",parent_table:"block",alive:!0}},collection:{collection:{id:"collection",name:o,schema:{title:{name:b().Z.formatMessage(P.namePropertyTitle),type:"title"},[i]:{name:b().Z.formatMessage(R.datePropertyTitle),type:"date"},[s]:{name:b().Z.formatMessage(P.assignPropertyTitle),type:"person"},[d]:(0,r().I4)(b().Z.formatMessage(P.statusPropertyTitle),b().Z.getIntl())},format:{collection_page_properties:[{property:i,visible:!0},{property:s,visible:!0},{property:d,visible:!0}]},parent_id:"root",parent_table:"block",alive:!0}}})}({environment:t,isInline:o,name:p}):"page"!==d?"chart"===d?function(e){const{isInline:t,name:o,chartType:n}=e,s=(0,h().ZP)(),d=(0,h().ZP)(),p=(0,r().I4)(b().Z.formatMessage(P.statusPropertyTitle),b().Z.getIntl()),f="line"===n?{title:{name:b().Z.formatMessage(x.namePropertyTitle),type:"title"},[d]:{name:b().Z.formatMessage(A.datePropertyTitle),type:"date"}}:{title:{name:b().Z.formatMessage(x.namePropertyTitle),type:"title"},[s]:p},g="donut"===n?(0,i().dq)({collectionSchema:f}):(0,i().K0)({collectionSchema:f,axisChartType:n}),v=(0,c().r)(),_={type:"date",start_date:(0,l().BC)((0,l().Uu)(v).minus({days:4}))},y={type:"date",start_date:(0,l().BC)((0,l().Uu)(v).minus({days:3}))},S={type:"date",start_date:(0,l().BC)((0,l().Uu)(v).minus({days:2}))},w={type:"date",start_date:(0,l().BC)((0,l().Uu)(v).minus({days:1}))},k="line"===n?[{[d]:(0,a().d7)(_)},{[d]:(0,a().d7)(y)},{[d]:(0,a().d7)(S)},{[d]:(0,a().d7)(S)},{[d]:(0,a().d7)(S)},{[d]:(0,a().d7)(w)}]:[{[s]:[[p.options.at(0).value]]},{[s]:[[p.options.at(1).value]]},{[s]:[[p.options.at(1).value]]},{[s]:[[p.options.at(2).value]]}];return u().RecordMapLegacy.create({block:{root:{id:"root",type:t?"collection_view":"collection_view_page",collection_id:"collection",format:{collection_pointer:{table:m().vF,id:"collection"}},view_ids:["view"],alive:!0},item_1:{id:"item_1",type:"page",parent_id:"collection",parent_table:"collection",properties:k[0],alive:!0},item_2:{id:"item_2",type:"page",parent_id:"collection",parent_table:"collection",properties:k[1],alive:!0},item_3:{id:"item_3",type:"page",parent_id:"collection",parent_table:"collection",properties:k[2],alive:!0},item_4:{id:"item_4",type:"page",parent_id:"collection",parent_table:"collection",properties:k[3],alive:!0},..."line"===n&&{item_5:{id:"item_5",type:"page",parent_id:"collection",parent_table:"collection",properties:k[4],alive:!0},item_6:{id:"item_6",type:"page",parent_id:"collection",parent_table:"collection",properties:k[5],alive:!0}}},collection_view:{view:{id:"view",version:0,type:"chart",format:{collection_pointer:{table:m().vF,id:"collection"},chart_config:g,subitem_display_mode:"flattened",hide_linked_collection_name:!0},page_sort:[],parent_id:"root",parent_table:"block",alive:!0}},collection:{collection:{id:"collection",name:o,schema:f,format:{collection_page_properties:[{property:s,visible:!0}]},parent_id:"root",parent_table:"block",alive:!0}}})}({environment:t,isInline:o,name:p,chartType:f}):void("form_editor"!==d&&"feed"!==d&&"chat"!==d&&(0,_().t1)(d)):void 0}function U(e){const{isInline:t,viewType:o,chartType:n}=e;return u().RecordMapLegacy.create({block:{root:{id:"root",type:t?"collection_view":"collection_view_page",view_ids:["view"],alive:!0}},collection_view:{view:{id:"view",version:0,type:o,parent_id:"root",parent_table:"block",alive:!0,format:n?{chart_config:{type:"placeholder",placeHolderType:n}}:{}}}})}function F(e){const{isInline:t,viewType:o,integrationId:n}=e;return u().RecordMapLegacy.create({block:{root:{id:"root",type:t?"collection_view":"collection_view_page",collection_id:"collection",format:{collection_pointer:{table:m().vF,id:"collection"}},view_ids:["view"],alive:!0}},collection:{collection:{id:"collection",name:void 0,schema:{},format:{is_placeholder:!0,integration_id:n},parent_id:"root",parent_table:"block",alive:!0}},collection_view:{view:{id:"view",version:0,type:o,format:{collection_pointer:{table:m().vF,id:"collection"}},parent_id:"root",parent_table:"block",alive:!0}}})}function N(){return u().RecordMapLegacy.create({block:{root:{id:"root",type:"transclusion_container",content:["empty_text"],alive:!0},empty_text:{id:"empty_text",type:"text",parent_id:"root",parent_table:"block",alive:!0}}})}function V(e){return u().RecordMapLegacy.create({block:{root:{id:"root",type:"ai_block",content:[],alive:!0,format:{ai_prompt_key:e}}}})}function L(e){const t=v().DZ(e,(e=>`column${e+1}`));return u().RecordMapLegacy.create({block:{root:{id:"root",type:"column_list",content:t,alive:!0},...Object.assign({},...t.map((t=>{const o=`${t}_text`;return{[t]:{id:t,type:"column",parent_id:"root",parent_table:"block",content:[o],alive:!0,format:{column_ratio:1/e}},[o]:{id:o,type:"text",parent_id:t,parent_table:"block",alive:!0}}})))}})}function O(){const e=[(0,h().ZP)(),(0,h().ZP)()];return u().RecordMapLegacy.create({block:{root:{id:"root",type:"table",content:["row_1","row_2","row_3"],alive:!0,format:{table_block_column_order:e}},row_1:{id:"row_1",type:"table_row",parent_id:"root",parent_table:"block",alive:!0},row_2:{id:"row_2",type:"table_row",parent_id:"root",parent_table:"block",alive:!0},row_3:{id:"row_3",type:"table_row",parent_id:"root",parent_table:"block",alive:!0}}})}const Z=(0,g().vU)({tab1Title:{defaultMessage:"Tab 1",id:"blockTemplates.list.tab1Title"},tab2Title:{defaultMessage:"Tab 2",id:"blockTemplates.list.tab2Title"},tab3Title:{defaultMessage:"Tab 3",id:"blockTemplates.list.tab3Title"}});function j(){return u().RecordMapLegacy.create({block:{root:{id:"root",type:"tab",alive:!0,content:["tab1","tab2","tab3"]},tab1:{id:"tab1",parent_id:"root",parent_table:"block",type:"text",alive:!0,properties:{title:[[b().Z.formatMessage(Z.tab1Title)]]}},tab2:{id:"tab2",parent_id:"root",parent_table:"block",type:"text",alive:!0,properties:{title:[[b().Z.formatMessage(Z.tab2Title)]]}},tab3:{id:"tab3",parent_id:"root",parent_table:"block",type:"text",alive:!0,properties:{title:[[b().Z.formatMessage(Z.tab3Title)]]}}}})}function K(e){return u().RecordMapLegacy.create({[p().iU]:{root:{id:"root",type:e,format:{toggleable:!0}}}})}function z(e,t){return u().RecordMapLegacy.create({[p().iU]:{root:{id:"root",type:"code",properties:{title:f().TPx(t),language:f().TPx(e)}}}})}function H(){return u().RecordMapLegacy.create({[p().iU]:{root:{id:"root",type:"drawing",format:{drawing_value:void 0,block_page_width:!0,block_height:480}}}})}function q(){return S().default.checkGate({gateName:"create_v2_callouts"})?u().RecordMapLegacy.create({block:{root:{id:"root",type:"callout",content:["empty_text"],format:{callout_version:2},alive:!0},empty_text:{id:"empty_text",type:"text",parent_id:"root",parent_table:"block",alive:!0}}}):u().RecordMapLegacy.create({block:{root:{id:"root",type:"callout",alive:!0}}})}},247724:(e,t,o)=>{o.d(t,{$Ot:()=>M,$ji:()=>io,$rJ:()=>ht,AJv:()=>Do,AWi:()=>Xt,A_D:()=>V,Apy:()=>go,Aur:()=>xt,B8p:()=>L,BEs:()=>Be,BKn:()=>Ye,BaY:()=>Xe,C18:()=>$e,CZG:()=>we,C_N:()=>ro,Cjq:()=>St,D$4:()=>ut,D4r:()=>Jt,DKM:()=>Bo,Dkf:()=>Yt,EGJ:()=>Lt,EYp:()=>Go,Ep8:()=>b,F4o:()=>Ne,FJA:()=>Q,FSd:()=>it,FoE:()=>ye,G6g:()=>ue,GNl:()=>J,GZn:()=>Oo,GbT:()=>z,Gcz:()=>Ft,GfL:()=>X,H9Z:()=>Fo,HKr:()=>se,HwD:()=>ao,I2F:()=>re,I9j:()=>at,IAq:()=>It,IG:()=>lo,Iiy:()=>ho,IlE:()=>xo,J2F:()=>Tt,JR_:()=>Nt,JiD:()=>r,JiT:()=>ge,JkF:()=>Ee,K3y:()=>K,K4T:()=>Kt,KA2:()=>ie,KLh:()=>j,LP$:()=>et,LoZ:()=>de,Lzk:()=>No,MD7:()=>Z,MU2:()=>Le,M_0:()=>vo,Mdu:()=>Ge,Mfh:()=>Me,Mpz:()=>Ct,MsS:()=>p,N7t:()=>be,NFf:()=>Se,Nn$:()=>_,No6:()=>T,OE$:()=>yo,OK_:()=>f,Oau:()=>q,PBs:()=>v,Phn:()=>Ho,QS0:()=>E,QSt:()=>n,Qcf:()=>C,Qgj:()=>_t,Quo:()=>d,RG3:()=>Ke,RIA:()=>no,S94:()=>Y,S9A:()=>ko,Sbd:()=>Co,TAd:()=>Je,TYv:()=>Qe,U9U:()=>zo,UBk:()=>O,Uhm:()=>yt,Urg:()=>Mo,Uwd:()=>ze,V6y:()=>At,VJQ:()=>Ro,VMO:()=>Et,Voi:()=>kt,Wh_:()=>R,Wiy:()=>D,Wy1:()=>bt,XEp:()=>co,Xgx:()=>mt,Xj_:()=>m,Xjk:()=>Lo,Xsh:()=>st,Y3l:()=>jo,Y6l:()=>qe,YHn:()=>te,YOJ:()=>Zo,YPt:()=>S,Z87:()=>wt,ZHw:()=>F,ZmO:()=>oe,_Xz:()=>qo,_so:()=>Pt,a1k:()=>A,a6i:()=>ve,aL4:()=>Oe,afv:()=>ee,aiP:()=>a,alX:()=>i,b_f:()=>G,blN:()=>Ue,boI:()=>rt,c$K:()=>P,c7X:()=>Ot,cFM:()=>ct,dXl:()=>wo,euV:()=>x,exn:()=>Te,f0e:()=>fo,f7L:()=>Ao,f8P:()=>pe,fHd:()=>w,fOh:()=>So,fe0:()=>Re,fto:()=>B,gGc:()=>ne,gec:()=>gt,gjL:()=>ae,gug:()=>c,hBn:()=>h,hIF:()=>so,hKO:()=>he,hzx:()=>le,i25:()=>Mt,irE:()=>zt,j35:()=>Ve,j96:()=>Uo,jWx:()=>He,kDE:()=>qt,kUP:()=>Bt,kc9:()=>Po,l24:()=>Fe,lIT:()=>U,lUC:()=>Wo,lmr:()=>Ko,mJW:()=>y,mSZ:()=>N,mWS:()=>Ut,myM:()=>pt,nM$:()=>Zt,nU_:()=>ke,o4s:()=>Gt,oTt:()=>Eo,ovr:()=>Wt,p0b:()=>H,p1Q:()=>I,p4m:()=>me,pMC:()=>l,psr:()=>Ce,q1J:()=>De,qSF:()=>nt,qnV:()=>_o,qr0:()=>tt,qxR:()=>We,rAK:()=>uo,rIE:()=>je,rIj:()=>dt,rIs:()=>po,rKl:()=>s,rTm:()=>to,rVO:()=>oo,rcG:()=>Ie,rli:()=>Pe,rny:()=>Io,s$o:()=>lt,sbt:()=>jt,sqL:()=>Ht,srZ:()=>W,tQh:()=>$,tXr:()=>_e,tfM:()=>Rt,ulv:()=>Vo,wFE:()=>ce,wG0:()=>mo,wKH:()=>g,wXs:()=>Vt,w_d:()=>To,wnm:()=>ft,x2W:()=>vt,x4y:()=>u,x9t:()=>Qt,xvU:()=>eo,y3y:()=>k,y4j:()=>bo,yNE:()=>Ze,ykc:()=>xe,zYS:()=>Ae,z_z:()=>$t,zar:()=>ot,zov:()=>fe,zwY:()=>Dt});const n="notion-cursor-default",i="hidden",r="notion-fadein",a="notion-mobile",s="notion-fadein-fast",l="notion-desktop-drag-area",c="notion-front-page",d="analytics-scroll-point",u="notion-login",p="notion-light-theme",m="notion-dark-theme",f="notion-scroller",g="vertical",v="horizontal",h="ignore-scrolling-container",_="notion-history-modal",b="notion-block-resizer",y="notion-overlay-container",S="notion-default-overlay-container",w="notion-page-template-modal",k="notion-modal-underlay",I="notion-peek-renderer",C="notion-text-action-menu",x="notion-selectable",T="notion-selectable-halo",M="notion-selectable-hover-menu-item",P="notion-selectable-drag-handle",A="notion-suggest-remove",R="notion-focusable-within",B="notion-focusable-within-error-outline",E="notion-page-content",D="notion-frame",U="notion-topbar",F="notion-topbar-mobile",N="notion-topbar-more-button",V="notion-topbar-action-buttons",L="notion-share-menu",O="notion-share-menu-publish-tab",Z="notion-topbar-share-menu",j="notion-updates-menu",K="notion-topbar-updates-button",z="notion-topbar-favorite-button",H="notion-topbar-comments-button",q="notion-search-menu",W="notion-embed-menu",G="notion-unfurling-menu",$="notion-media-menu",Q="notion-invite",Y="notion-record-icon",J="notion-calendar-header-days",X="notion-board-group",ee="notion-block-permission-settings-workspace-access",te="notion-block-permission-settings-team-access",oe="notion-block-permission-settings-team-access",ne="notion-block-permission-settings-group-access",ie="notion-page-view-discussion",re="notion-updates-button-mentions",ae="notion-updates-button-all-updates",se="notion-updates-button-archive",le="notion-discussion-input-edit-existing-comment",ce="notion-discussion-input",de="notion-discussion-reply-menu",ue="notion-comment-overflow-menu",pe="notion-shimmer",me="notion-link",fe="ai-block",ge="peek-top-hover-area",ve="notion-sharing-permission-role-select",he="notion-language-picker",_e="notion-dictation-language-picker",be="notion-cookie-selector",ye="notion-activity-section-icon",Se="notion-activity-section-header",we="notion-activity-section-time",ke="notion-activity-section-children",Ie="notion-sidebar",Ce="layout-content",xe="notion-sidebar-mobile",Te="notion-open-sidebar",Me="notion-close-sidebar",Pe="notion-sidebar-switcher",Ae="notion-space-settings",Re="notion-outliner-bookmarks",Be="notion-outliner-workspace",Ee="notion-outliner-shared",De="notion-outliner-private",Ue="notion-outliner-offline",Fe="notion-outliner-team",Ne="notion-outliner-bookmarks-header",Ve="notion-outliner-workspace-header",Le="notion-outliner-shared-header",Oe="notion-outliner-private-header",Ze="notion-outliner-offline-header",je="notion-outliner-team-header",Ke="notion-outliner-joined-team-header",ze="notion-outliner-unjoined-team-header",He="notion-outliner-search-team-header",qe="notion-outliner-public-page-template-includes-header",We="notion-outliner-team-context-menu-button",Ge="notion-outliner-team-context-menu",$e="notion-updates-menu",Qe="notion-sidebar-trash-menu",Ye="notion-password-modal",Je="notion-scim-table-revoke-button",Xe="notion-subscription-checkout-title",et="notion-subscription-post-upgrade-title",tt="notion-subscription-checkout-description",ot="notion-update-sidebar",nt="notion-update-sidebar-tab-comments-filter-control",it="notion-update-sidebar-tab-comments-filter-button-open",rt="notion-update-sidebar-tab-comments-filter-button-resolved",at="notion-update-sidebar-tab-comments-header",st="notion-update-sidebar-tab-comments-comments-scroller",lt="notion-update-sidebar-tab-comments-discussion-item",ct="notion-update-sidebar-tab-updates-header",dt="notion-team-settings-modal",ut="notion-add-members-modal",pt="notion-new-team",mt="notion-use-case-onboarding-profile",ft="notion-use-case-onboarding-persona-survey",gt="notion-workspace-choose",vt="notion-workspace-plan-choose",ht="notion-workspace-collaborative-intent-choose",_t="notion-workspace-create",bt="notion-workspace-invite",yt="notion-onboarding-error",St="notion-onboarding-popup",wt="notion-onboarding-button",kt="notion-onboarding-plan-type-team",It="notion-onboarding-persona-survey-persona",Ct="notion-onboarding-persona-survey-role",xt="notion-onboarding-persona-survey-companysize",Tt="notion-onboarding-persona-survey-usecases",Mt="notion-onboarding-timed-trial-upsell",Pt="notion-table-view",At="notion-table-view-add-column",Rt="notion-table-view-add-row",Bt="notion-table-view-header-row",Et="notion-table-view-header-cell",Dt="notion-table-view-row",Ut="notion-table-view-cell",Ft="notion-table-view-empty-placeholder",Nt="notion-table-view-drag-and-fill-handle",Vt="notion-table-view-frozen-column-repositioner",Lt="notion-board-view",Ot="notion-calendar-view",Zt="notion-list-view",jt="notion-gallery-view",Kt="notion-collection-item",zt="notion-calendar-view-day",Ht="notion-collection-view-item-add",qt="notion-timeline-view",Wt="notion-timeline-item",Gt="notion-timeline-item-row",$t="notion-timeline-item-properties",Qt="notion-collection-view-body",Yt="notion-view-settings-sidebar",Jt="notion-view-settings-popup-background",Xt="notion-layout-add-module-button",eo="notion-collection-edit-view",to="notion-collection-view-tab-button",oo="notion-collection-add-view",no="notion-collection-automation-edit-view",io="notion-template-picker-item",ro="notion-template-picker-item-action-menu",ao="draggable-ghost-section",so="forms-properties-load-more",lo="forms-share-menu",co="notion-automation-builder-modal",uo="notion-modal-overlay-collection-view",po="developer-integrations-container",mo="developer-integration-not-found",fo="notion-table-row-selector",go="notion-table-column-selector",vo="notion-table-row",ho="notion-table-cell",_o="notion-table-cell-text",bo="notion-table-selection-overlay",yo="notion-table-tbody-selectable",So="notion-table-content",wo="notion-temporary-comment",ko="notion-margin-discussion-item",Io="notion-synthetic-group-block",Co="start-of-list",xo="end-of-list",To="start-of-content",Mo="end-of-content",Po="notion-caption-type-block",Ao="caption-visible",Ro="notion-block-caption",Bo="notion-list-item-box-left",Eo="m-default",Do="m-content-reskin",Uo="notion-list-item-block",Fo="notion-transclusion-block-component",No="notion-transclusion-block-halo",Vo="search-query-result-item",Lo="search-result-body-section-title",Oo="search-result-mobile-body-scroller",Zo="notion-completions-feedback-popup",jo="assistant-grouped-edit-chat-container",Ko="notion-help-button",zo="notion-ai-button",Ho="notion-assistant-corner-origin-container",qo="altTextBlockButton",Wo="notion-floating-table-of-contents",Go="popup-origin-wrapper"},921743:(e,t,o)=>{o.d(t,{D:()=>r});var n=()=>o(146947),i=()=>o(226042);function r(e){return i().D(e,n().locale)}},985575:(e,t,o)=>{o.d(t,{$5:()=>S,Gb:()=>h,JS:()=>k,Rr:()=>w,jq:()=>b,uV:()=>y});o(492176),o(7961),o(267602),o(916054),o(653476),o(241792),o(228244);var n=()=>o(435308),i=()=>o(782827),r=()=>o(871379),a=()=>o(870910),s=()=>o(528514),l=()=>o(696056),c=()=>o(855741),d=()=>o(696459),u=()=>o(807629),p=()=>o(749826),m=()=>o(826955),f=()=>o(697623),g=()=>o(982855);const v=new WeakMap;function h(e){const t=v.get(e.automationStore);if(t)return t;{const t=new(n().default)((()=>b(e)),{debugName:"buttonAutomationAnalysisCachedStore"});return v.set(e.automationStore,t),t}}function _(e){const{action:t,automation:o,automationActionRegistryModule:n,formulasModule:r,automationStore:l,isLoggedIn:c,parentPage:d,typecheckContextValues:u}=e;if("http_request"===t.getType()&&!c)return{value:!1};const p=n.getActionRegistryItem(t.getType()),f=(0,i().C)({automationModel:o,parentPage:d,formulasModule:r,formulaValueTypes:u}),g=a().R.runSync(l.getRecordModel,p.resolveExecutionDependencies(f,t));for(const i of g){const e=(0,m().Kv)(l,i.pointer);if(!e.isReady())return{error:"records_not_loaded"};const t=e.getRole();if(!t||(0,s().gr)(t,i.minimumRole)||!c&&(0,s().xO)(i.minimumRole,"reader"))return{value:!1}}return{value:!0}}function b(e){const t=e.automationStore.getModel();if(!t)return{editPermissionStatus:"unknown",executionPermissionStatus:"unknown",typecheckResult:void 0};const o=e.automationStore.getActionStores().map((e=>e.getModel()));if(!o.every((0,d().AO)((e=>(0,d().$K)(e)?{true:e}:{false:e}))))return{editPermissionStatus:"insufficient",executionPermissionStatus:"insufficient",typecheckResult:void 0};const n=(0,u().k)({automationStore:e.automationStore,automationTypecheckModule:e.automationTypecheckModule,contextType:e.type,formulasModule:e.formulasModule,intl:e.intl});if(c().x.isFail(n))return{editPermissionStatus:"unknown",executionPermissionStatus:"unknown",typecheckResult:n};for(const r of o){var i;const o=_({action:r,automation:t,automationActionRegistryModule:e.automationActionRegistryModule,formulasModule:e.formulasModule,automationStore:e.automationStore,isLoggedIn:e.isLoggedIn,parentPage:"button_block"===e.type?null===(i=e.pageStore)||void 0===i?void 0:i.getModel():void 0,typecheckContextValues:n.value.valueTypes});if("records_not_loaded"===o.error)return{editPermissionStatus:"loading",executionPermissionStatus:"loading",typecheckResult:void 0};if(!o.value)return{editPermissionStatus:"insufficient",executionPermissionStatus:"insufficient",typecheckResult:n}}return{editPermissionStatus:(0,r().fz)({automationValue:t.getMinimumFieldsForPermissions(),actionValues:o.map((e=>({config:e.getConfig(),type:e.getType(),space_id:e.getSpaceId()})))}).some((t=>{const o=(0,m().Kv)(e.parentRecordStore,t.pointer).getRole();return!o||(0,s().gr)(o,t.minimumRequiredRole)}))?"insufficient":"sufficient",executionPermissionStatus:Object.values(n.value.actionValidationFailures).some((e=>{const t=e??[];return 0!==t.length&&t.some((e=>(0,d().$K)(e.execute)&&!e.execute))}))?"insufficient":"sufficient",typecheckResult:n}}function y(e,t){var o;const n=e.getModel(),i=null===(o=e.getSpaceStore())||void 0===o?void 0:o.getModel(),r=e.getActionStores(),a=r.filter((e=>e.isDefined())).map((e=>e.getModel())).filter(d().$K);if(!n||a.length!==r.length)return;const s=(0,g().gM)(e.environment);return{automation:n,automationActions:a,checkExperimentGate:e=>p().default.checkGate({gateName:e}),checkExperimentGroup:e=>p().default.getGroup(e),contextType:t,checkType:"canAddAction",isSubscribed:(0,f().sX)(),spaceModel:i,assistantFeatureGate:s}}function S(e){const{automationStore:t,automationActionRegistryModule:o,automationTypecheckModule:n,contextType:i,formulasModule:a,intl:p,isLoggedIn:m}=e,g=t.getValue(),v=t.getModel();if(!v||!g)return{editPermissionStatus:"unknown",reason:"missing_automation_model"};if(!a)return{editPermissionStatus:"unknown",reason:"missing_formulas_dependency"};if(!o||!n)return{editPermissionStatus:"unknown",reason:"missing_automations_dependency"};const h=t.getActionStores().map((e=>e.getModel()));if(!h.every((0,d().AO)((e=>(0,d().$K)(e)?{true:e}:{false:e}))))return{editPermissionStatus:"unknown",reason:"missing_automation_action_model"};const b=(0,u().k)({automationStore:t,automationTypecheckModule:n,contextType:i,formulasModule:a,intl:p});if(c().x.isFail(b))return{editPermissionStatus:"unknown",reason:"typecheck_error"};const y=h.length>0&&h.some((e=>!e.isType("slack_notification")));if(v.isType("event")&&y&&!(0,f().sX)())return{editPermissionStatus:"insufficient",reason:"free_workspace"};const S=h.filter((e=>e.isType("slack_notification")||e.isType("send_gmail_notification"))).filter((e=>{const n=_({action:e,automation:v,automationActionRegistryModule:o,formulasModule:a,automationStore:t,isLoggedIn:m,typecheckContextValues:b.value.valueTypes});return c().x.isFail(n)||!n.value})).at(0);if((0,d().$K)(S)){var w;const e=null===(w=S.getConfig())||void 0===w?void 0:w.external_bot_id;return{editPermissionStatus:"insufficient",reason:"missing_permissions",relatedPointer:e?{table:l().cZ,id:e}:void 0}}const k=(0,r().fz)({automationValue:g,actionValues:h.map((e=>({config:e.getConfig(),type:e.getType()})))});for(const r of k){const e=t.getRecordRole(r.pointer);if(!e||(0,s().gr)(e,r.minimumRequiredRole))return{editPermissionStatus:"insufficient",reason:"missing_permissions",relatedPointer:r.pointer}}return{editPermissionStatus:"sufficient"}}function w(e){const{contextType:t,environment:o}=e,{device:n}=o,i=n.isIOS&&n.isMobileNative;return"event"===t&&!i}function k(e){const t=(null==e?void 0:e.getActionStores())??[];for(const n of t)if(n.isType("open_page")){var o;const e=n.getConfig();if("url"===(null==e||null===(o=e.target)||void 0===o?void 0:o.type))return e.target.url}}},576868:(e,t,o)=>{o.d(t,{CN:()=>R,Gz:()=>A,H_:()=>S,IX:()=>B,Me:()=>M,Mj:()=>T,Nq:()=>C,OC:()=>b,Pi:()=>P,RL:()=>k,Zh:()=>I,m1:()=>E,mu:()=>F,ox:()=>w,qd:()=>y,tJ:()=>D,yU:()=>x,ze:()=>U});o(670560),o(267602),o(916054),o(653476),o(470928),o(241792),o(228244);var n=()=>o(455947),i=()=>o(226413),r=()=>o(532850),a=()=>o(892981),s=()=>o(570270),l=()=>o(926161),c=()=>o(965800),d=()=>o(998411),u=()=>o(513670),p=()=>o(696459),m=()=>o(110232),f=()=>o(718959),g=()=>o(32072),v=()=>o(615676),h=()=>o(582835),_=()=>o(527278);const b="notion://database/hide_subitems_filter";function y(e){const{schema:t,filters:o,getRecordModel:i}=e,r=[];for(const n of Object.keys(t)){const e=S({property:n,schema:t,getRecordModel:i});e&&r.push(e)}const a=r.filter((e=>!o.find((t=>(0,n().aN)(t.filter)&&t.filter.property===e.property))));return u().MR(a,(e=>{const o=t[e.property];return(null==o?void 0:o.name)||""}))}function S(e){const{property:t,schema:o,getRecordModel:n}=e,i=o[t];if(i&&!(0,r().Kf)(i))return;return{property:t,filter:(0,g().zZ)({property:t,schema:o,getRecordModel:n})}}function w(){return(e,t)=>{const o=!(0,n().Oo)(e.filter),i=!(0,n().Oo)(t.filter);return o&&i?0:o?-1:1}}function k(e){var t;const{collectionContextStore:o,applySubitemFilter:r,filterOutHideSubitemsQuickFilter:a}=e;let s=o.currentPropertyFiltersStore.state;const l=o.currentCombinatorFilterStore.state,c=r&&o.currentSubitemFormatStoreForUiDisplayStore.state,d=o.normalizedSchemaStore.state,p=c&&d[c.property],m=p&&"relation"===p.type&&(0,i().F0)(p)===(null===(t=o.collectionStore())||void 0===t?void 0:t.id)&&p.property,f=m?{property:m,filter:{operator:"is_empty"}}:void 0;a&&(s=s.filter((e=>e.id!==b)));const g=(0,n().OH)({propertyFilters:s,combinatorFilter:l,schema:d});return u().oA([f,...g])}function I(e,t){var o,i,r;const s=e.collectionViewStore();if(!s)return{combinatorFilter:void 0,filters:{moveOps:[],removed:[],updated:[],moved:[],added:[]},sorts:void 0};const d="persisted"===t?s.getQueryStore().getKeyStore("sort").getValue()||[]:(null===(o=e.normalizedQueryStore.state)||void 0===o?void 0:o.sort)||[],p=e.currentSortsStore.state,m="persisted"===t?s.getQueryStore().getKeyStore("filter").getValue():null===(i=e.normalizedQueryStore.state)||void 0===i?void 0:i.filter,f=e.currentCombinatorFilterStore.state,g="persisted"===t?(null===(r=s.getPropertyFiltersStore().getValue())||void 0===r?void 0:r.sort(w()))||[]:function(e){const t=e.normalizedSchemaStore.state,o=e.normalizedFormatStore.state.property_filters||[];return u().oA(o.filter((o=>{const i=(0,a().dN)(o.filter,t),r=e.collectionViewBlockStore();if(t[o.filter.property]&&i&&(0,n().J5)(t,o.filter.property,i.filter,null==r?void 0:r.getRecordModel))return i&&{id:o.id,filter:i}})).sort(w()))}(e),v=e.currentPropertyFiltersStore.state,h=g.map((e=>e.id)),_=v.map((e=>e.id)),{beforeOps:b,removeOps:y}=(0,c().q)(h,_),S=Array.from(y).filter((e=>!_.includes(e))),k=Object.keys(b).map((e=>({id:e,beforeId:b[e]}))),I=k.filter((e=>{let{id:t}=e;return h.includes(t)})).map((e=>{let{id:t}=e;return t})),C=k.filter((e=>{let{id:t}=e;return!h.includes(t)})).map((e=>{let{id:t}=e;return t})),x=v.filter((e=>g.find((t=>{if(e.id!==t.id)return!1;const o=u().Xh(t),n=u().Xh(e);return!u().Xy((0,l().Z)(n,"ignore-class-instances"),(0,l().Z)(o,"ignore-class-instances"))})))).map((e=>e.id));return{combinatorFilter:u().Xy(m,f)?void 0:{value:f},filters:{moveOps:k,removed:S,updated:x,moved:I,added:C},sorts:u().Xy(d,p)?void 0:{value:p}}}function C(e){const t=e.localStateDiffStore.state;return Boolean(t.filters.moved.length>0||t.filters.added.length>0||t.filters.removed.length>0||t.filters.updated.length>0||void 0!==t.combinatorFilter||void 0!==t.sorts)}function x(e){const t=e.localStateDiffStore.state;return Boolean(t.filters.moved.length>0||t.filters.added.length>0||t.filters.removed.length>0||t.filters.updated.length>0||void 0!==t.combinatorFilter)}function T(e){const t=e.localStateDiffStore.state;return Boolean(void 0!==t.sorts)}function M(e){return{property:(0,i().uS)(e),filter:{operator:"string_contains",value:{type:"exact",value:void 0}}}}function P(e){const t=e.currentCombinatorFilterStore.state,o=e.currentPropertyFiltersStore.state.filter((e=>!F(e.id))).map((e=>e.filter)),n=[...(null==t?void 0:t.filters)||[],...o];return{...t,filters:n,operator:"and"}}function A(e,t){const o=e.currentCombinatorFilterStore.state,n=e.currentPropertyFiltersStore.state.filter((e=>e.id!==t.id)),i=[...(null==o?void 0:o.filters)||[],t.filter];return{combinatorFilter:{operator:"and",...o,filters:i},propertyFilters:n}}function R(e,t,o,n){let i=o.filter((e=>"is_group"===e.type)).map((t=>e.find((e=>e.name===t.value)))).filter(p().$K),r=o.filter((e=>"is_option"===e.type)).map((e=>t.find((t=>t.value===e.value)))).filter(p().$K);for(const a of e){const e=a.optionIds??[];if(i.some((e=>e.id===a.id)))r=r.filter((t=>!e.includes(t.id)));else if(e.length>0){const t=r.filter((t=>!e.includes(t.id)));t.length+e.length===r.length&&(r=t,i=[...i,a])}}if("is_option"===n.type){const o=t.find((e=>e.value===n.value));if(!o)return;const a=r.filter((e=>e.id!==o.id));if(a.length<r.length)r=a;else{const n=e.find((e=>{var t;return null===(t=e.optionIds)||void 0===t?void 0:t.includes(o.id)})),a=i.find((e=>e.id===(null==n?void 0:n.id)));if(a){const e=t.filter((e=>{var t;return(null===(t=a.optionIds)||void 0===t?void 0:t.includes(e.id))&&e.id!==o.id}));i=i.filter((e=>e.id!==a.id)),r=[...r,...e]}else{r=[...r,o];const e=(null==n?void 0:n.optionIds)??[];if(n&&e.length>0){const t=r.filter((t=>!e.includes(t.id)));t.length+e.length===r.length&&(r=t,i=[...i,n])}}}}else if("is_group"===n.type){const t=e.find((e=>e.name===n.value));if(!t)return;const o=i.filter((e=>e.id!==t.id));if(o.length<i.length)i=o;else{const e=t.optionIds??[];i=[...i,t],r=r.filter((t=>!e.includes(t.id)))}}else(0,p().t1)(n.type);return[...i.map((e=>({type:"is_group",value:e.name}))),...r.map((e=>({type:"is_option",value:e.value})))]}function B(e){const{group:t,options:o,filterValues:n}=e,i=n.some((e=>"is_group"===e.type&&e.value===t.name)),r=o.filter((e=>{var o;return null===(o=t.optionIds)||void 0===o?void 0:o.includes(e.id)})),a=new Map;for(const d of r){const e=n.some((e=>"is_option"===e.type&&e.value===d.value))||i;a.set(d.id,e)}const s=Array.from(a.values()),l=s.some((e=>e)),c=s.every((e=>e))&&s.length>0;return{groupCheckState:!(!i&&!c)||!!l&&"partial",optionCheckedInfo:a}}function E(e){var t;const{collectionStore:o,collectionContextStore:i,environment:r}=e,a=i.relativeVariableStore.state,l=i.currentPropertyFiltersStore.state,c=i.currentCombinatorFilterStore.state,u=l.filter((e=>!(0,n().Oo)(e.filter))).map((e=>e.filter));if(0===u.length&&!c)return;const p=null==o?void 0:o.getModel(),m=null===(t=i.collectionViewStore())||void 0===t?void 0:t.getCollectionSource(),g=i.normalizedSchemaStore.state,h=i.viewsModuleContextStore.currentPageInRelatedCollectionId(),b={schema:p&&m?(0,s().Hs)(m.type,g,p):g,userId:r.currentUser.id,userTimeZone:(0,d().r)(),userStartOfWeek:f().AK.state,intl:_().Z.getIntl(),relativeVariableResult:a,currentPageInRelatedCollection:h,collectionFeatureGates:(0,v().W)()};return{filter:{filters:c?[...u,c]:u,operator:"and"},propertyMapping:void 0,context:b}}function D(e,t,o){const{property:n}=t,r=e[n];if(!(r&&"rollup"===r.type&&r.relation_property&&r.target_property))return r;{const t=e[r.relation_property];if(t&&(0,i().p_)(t)){const e=(0,i().j0)(t);if(e){const t=o.getRecordModel(e);if(!t)return;const n=t.getNormalizedSchema();if(n){const e=n[r.target_property];if(e&&"rollup"!==e.type)return e}}}}}function U(e,t){const o=e.collectionViewStore(),i=e.currentSubitemFormatStoreForUiDisplayStore.state,r=null==o?void 0:o.getType(),a=k({collectionContextStore:e,applySubitemFilter:t&&Boolean(i)&&!(r&&(0,h().Av)(r)),filterOutHideSubitemsQuickFilter:!t});return(0,n().kk)(a)}function F(e){return(0,m().EE)(e)||e===b}},286338:(e,t,o)=>{o.d(t,{$t:()=>T,A3:()=>I,En:()=>C,F$:()=>w,H3:()=>_,L0:()=>B,L6:()=>S,Rv:()=>b,WP:()=>L,Xj:()=>O,Ye:()=>g,b9:()=>h,d3:()=>R,dS:()=>F,et:()=>Z,eu:()=>v,hN:()=>U,hm:()=>m,k1:()=>D,mq:()=>P,no:()=>E,oj:()=>M,p1:()=>u,r3:()=>p,rd:()=>y,uF:()=>f,wE:()=>k,wd:()=>x,xf:()=>N,yT:()=>A,yU:()=>V});o(267602),o(228244);var n=()=>o(146947),i=()=>o(243225),r=()=>o(749826),a=()=>o(826955),s=()=>o(18281),l=()=>o(697623),c=()=>o(345918),d=()=>o(91502);function u(){return s().ye()&&"on"===r().default.getEligibleGroup({experimentId:"request_membership",defaultGroup:"control"})}function p(e){return"en-US"===n().locale||r().default.checkGate({gateName:"onboarding_use_cases_step_non_english_locales"})?r().default.getEligibleGroup({experimentId:"onboarding_use_cases_step",defaultGroup:"control"}):"control"}function m(e){return"en-US"!==n().locale||e.device.isMobile||"control"===p()?"control":r().default.getEligibleGroup({experimentId:"onboarding_create_workflow_templates",defaultGroup:"control"})}function f(e){let{environment:t,disableExposureLogging:o=!1}=e;const i=function(e){let{environment:t,disableExposureLogging:o=!1}=e;return t.device.isMobile||"en-US"!==n().locale?"control":r().default.getEligibleGroup({experimentId:"workflow_template_customization_onboarding",defaultGroup:"control",disableExposureLogging:o})}({environment:t,disableExposureLogging:o});return"onboarding_customize_workflow_templates"===i||"onboarding_land_and_customize_workflow_templates"===i}function g(){return s().ye()&&!(0,l().wP)()}function v(e){let{environment:t,spaceStore:o,userRootStore:n}=e;return h({spaceStore:o,userRootStore:n,environment:t})&&"on"===r().default.getEligibleGroup({experimentId:"guest_sidebar_locked_v2",defaultGroup:"control"})}function h(e){let{environment:t,spaceStore:o,userRootStore:n}=e;const i=null==o?void 0:o.getPublicSpaceData();return!(!(o&&n&&i&&(0,c().Cx)(o))||(0,l().wP)()||t.device.isMobile||!g()||i.disableGuestMembershipRequests||_({userRootStore:n}))&&"on"===r().default.getEligibleGroup({experimentId:"guest_sidebar_locked",defaultGroup:"control"})}function _(e){let{userRootStore:t}=e;return t.getSpaceViewStores().some((e=>a().y3.createChildStore(e,i().v8({userId:t.id,spaceId:e.getSpaceId()})).isMember()))}function b(){return(0,l().Mk)()}function y(){return"on"===r().default.getEligibleGroup({experimentId:"import_google_contacts",defaultGroup:"control"})&&(0,l().Mk)()}function S(){return"on"===r().default.getEligibleGroup({experimentId:"improve_onboarding_profile_step",defaultGroup:"control"})}function w(){return(0,d().bq)()&&"on"===r().default.getEligibleGroup({experimentId:"teamspace_guests",defaultGroup:"control"})}function k(e){return!e.device.isMobile&&!(0,l().wP)()}function I(){return r().default.checkGate({gateName:"drawing_block"})}function C(){return!1}function x(){return r().default.checkGate({gateName:"guest_invite_requests"})}function T(){return"on"===r().default.getEligibleGroup({experimentId:"grant_access_via_mentions",defaultGroup:"control"})}function M(e){return!(!e.device.isMobileNative||e.device.isTablet)&&r().default.checkGate({gateName:"mobile_quick_capture_icons_redesign"})}function P(e){return!e.device.isMobile&&A()}function A(){return r().default.checkGate({gateName:"horizon_1_sidebar_panel_rollout"})}function R(){return r().default.checkGate({gateName:"enable_link_mention_hover"})}function B(){return r().default.checkGate({gateName:"hyperlink_hovers"})}function E(){return r().default.checkGate({gateName:"new_bookmark"})}function D(){return r().default.checkGate({gateName:"new_hover_designs_lp"})}function U(e){return!e.device.isMobile&&r().default.checkGate({gateName:"persisted_secondary_sidebar_state"})}function F(e){const{environment:t}=e;return!t.device.isMobileNative||t.device.isTablet||"en-US"!==n().locale?"control":r().default.getEligibleGroup({experimentId:"mobile_onboarding_educational_refresh",defaultGroup:"control"})}function N(e){const{environment:t}=e;return!(!t.device.isMobileNative||t.device.isTablet)&&r().default.checkGate({gateName:"mobile_user_activation_template_gallery_refresh_gate"})}function V(e){const{environment:t}=e;return!(!t.device.isMobileNative||t.device.isTablet)&&(t.device.isIOS?r().default.checkGate({gateName:"mobile_user_activation_ios_template_pills_gate"}):!!t.device.isAndroid&&(r().default.checkGate({gateName:"mobile_user_activation_android_template_pills_gate"})||r().default.checkGate({gateName:"mobile_user_activation_android_template_pills_new_user_gate"})))}function L(){return r().default.checkGate({gateName:"unfurl_disable_store_verify"})}function O(){return r().default.checkGate({gateName:"gmail_action_redirect_improvements"})}function Z(){return r().default.checkGate({gateName:"log_show_error_page"})}},505783:(e,t,o)=>{o.d(t,{Ld:()=>p,YT:()=>f,cC:()=>u,k$:()=>d,qM:()=>m,xU:()=>g});o(267602),o(470928);var n=()=>o(731415),i=()=>o(396136),r=()=>o(542973),a=()=>o(81954),s=()=>o(989478),l=()=>o(955620),c=()=>o(826955);function d(e,t,o,n){for(const i of t.findByGroupingKey(n)){if(!l().BIG(i))continue;const t=l().fgJ(i),n=c().t1.createChildStore(e,{table:r().qF,id:t,spaceId:(0,a().J)(e.pointer.spaceId)});if(p(n,o))return{discussionStore:n,annotation:i}}}function u(e){const{store:t,discussionId:o}=e,n=t.getAncestorRecordStoreAtRootPath();if(!n||n.table!==i().iU)return;return n.getDiscussionStores().find((e=>e.id===o))}function p(e,t){const o=e.getCommentStores();if(!o[0])return!1;const n=o[0].getCreatedByPointer();return(null==n?void 0:n.table)===s().KJ&&(null==n?void 0:n.id)===t.id}function m(e){const{blockStore:t,suggestionType:o,currentUser:n}=e;let i;if("insert"===o?i=t.getInsertSuggestion():"remove"===o?i=t.getRemoveSuggestion():"add_line_break"===o?i=t.getAddLineBreakSuggestion():"remove_line_break"===o&&(i=t.getRemoveSuggestion()),i){return p(c().t1.createChildStore(t,{table:r().qF,id:i.discussionId,spaceId:(0,a().J)(t.pointer.spaceId)}),n)}}function f(e){const{blockStore:t,currentUser:o,type:i}=e,r=t.getTitleValue(),a=l().Rkp(r);return d(t,n().u.fromArray(a),o,i)}function g(e){const{blockStore:t,currentUser:o}=e,n=t.getInsertSuggestion();if(n){return p(c().t1.createChildStore(t,{table:r().qF,id:n.discussionId,spaceId:(0,a().J)(t.pointer.spaceId)}),o)}return!1}},641702:(e,t,o)=>{o.d(t,{C6:()=>J,Dn:()=>de,Gj:()=>ve,HZ:()=>be,IY:()=>Q,Lc:()=>re,Ob:()=>we,PY:()=>ye,Qb:()=>ae,Rl:()=>xe,SD:()=>ue,So:()=>Ce,TQ:()=>Me,Ut:()=>se,WF:()=>Ae,We:()=>Pe,XG:()=>ke,Xh:()=>Y,bD:()=>$,cD:()=>he,fm:()=>_e,kV:()=>fe,li:()=>pe,lw:()=>le,n$:()=>ie,vO:()=>me,xX:()=>Se,zO:()=>Ie});o(670560),o(267602),o(653476),o(470928),o(30005),o(241792);var n=()=>o(216131),i=()=>o(659278),r=()=>o(799891),a=()=>o(998411),s=()=>o(375255),l=()=>o(396136),c=()=>o(955620),d=()=>o(572948),u=()=>o(568017),p=()=>o(513670),m=()=>o(326966),f=()=>o(970105),g=()=>o(448046),v=()=>o(958783),h=()=>o(205228),_=()=>o(950208),b=()=>o(114976),y=()=>o(338530),S=()=>o(527278),w=()=>o(191003),k=()=>o(663132),I=()=>o(639832),C=()=>o(749826),x=()=>o(138912),T=()=>o(826955),M=()=>o(127519),P=()=>o(296304),A=()=>o(767608),R=()=>o(435441),B=()=>o(482269),E=()=>o(12512),D=()=>o(271308),U=()=>o(852465),F=()=>o(440721),N=()=>o(505462);function V(e){return R().kK(e)&&e.classList.contains(d().Eu)}function L(e){return R().kK(e)&&e.classList.contains(d().DK)}function O(e){return R().kK(e)&&e.classList.contains(d().tL)}function Z(e){return function(e){const t=R().sh(e,(e=>(0,B().Xu)(e)||(0,P().eD)(e)));if(t&&V(t))return t}(e)||K(e)||function(e){const t=R().sh(e,(e=>O(e)||(0,P().eD)(e)));if(t&&O(t))return t}(e)}function j(e){return R().kK(e)&&e.classList.contains(n().P)}function K(e){const t=R().sh(e,(e=>(0,B().Xu)(e)||(0,P().eD)(e)));if(t&&(0,B().Xu)(t))return t}function z(e){return R().kK(e)&&e.classList.contains(d().mb)}function H(e){if(z(e))return!0;try{return z(e.parentNode)}catch(t){return!1}}function q(e){try{const t=R().sh(e,(e=>Boolean(e.getAttribute&&e.getAttribute("contenteditable"))||(0,P().eD)(e)));return t&&t.isContentEditable}catch(t){return!1}}function W(e,t){if(e===t.container){if(R().Gs(e)){const o=e.textContent||"";return(0,i().p4)(o.substring(0,t.offset)).length}{const o=Array.from(e.childNodes).slice(0,t.offset).map((e=>te(X(e)))).join("");return(0,i().p4)(o).length}}let o=0;for(const n of Array.from(e.childNodes)){if(n.contains(t.container))return o+W(n,t);o+=(0,i().p4)(te(X(n))).length}return o}function G(e,t){const o=(0,P().X1)(e);if(!o)return 0;const n=function(e,t){const o=Z(e);if(o){const e=o.parentNode,n=Array.from(e.childNodes).indexOf(o);return{container:e,offset:0===t?n:n+1}}if(z(e)||z(e.parentNode))return{container:e,offset:(e.textContent||" ").length-1};return{container:e,offset:t}}(e,t);return W(o,n)}function $(e,t){if(0===t)return!(e.childNodes.length>0)||V(e.childNodes[0])||j(e.childNodes[0])||(0,B().Xu)(e.childNodes[0])||O(e.childNodes[0])||L(e.childNodes[0])?{container:e,offset:0}:{container:e.childNodes[0],offset:0};const o=p().cx(e.childNodes,L),n=o>=0?o-1:e.childNodes.length-1;let r=t;for(let a=0;a<=n;a++){const t=e.childNodes[a],o=te(X(t)),s=(0,i().p4)(o).length;if(a===n?r-s<=0:r-s<0){if(V(t)||(0,B().Xu)(t)||j(t)||z(t)||O(t)){const e=R().oG(t.parentNode,t);return{container:t.parentNode,offset:e}}if(t.nodeType===Node.TEXT_NODE){return{container:t,offset:p().tP((0,i().p4)(o),0,r).join("").length}}return $(t,r)}r-=s}return{container:e,offset:0}}function Q(e){const{environment:t,textValue:o,parentStore:n,disableHover:i,disableStyleAnnotations:r,disableInsertedDeletedAnnotations:s,disableDateStyleAnnotations:l,disableSuggestionAnnotations:c,disableCommentAnnotations:p,disabled:m,emojiType:f,highlightDiscussionId:g,renderedPageBlockId:v,parentBlockId:w,theme:M,katex:P,disableLinks:R,disableFormulaVariableStyles:B,formulaValueTypes:E,stopLinkPropagation:D,linkTargetBlank:U}=e,{device:F,currentUser:N}=t,V=C().default.checkGate({gateName:"enable_deleted_page_indicator"}),L=I().Z.state.open&&I().Z.state.isAddMenu,{blockColor:O,isBlockStore:Z}=(()=>{if(n.isTable("block")){var e;const t=n.getRecordStoreUIParent(),o=t?T().G.createChildStore(t,n.pointer):void 0;return{blockColor:(null==o||null===(e=o.getFormat())||void 0===e?void 0:e.block_color)||"default",isBlockStore:t instanceof T().G}}return{blockColor:"default",isBlockStore:!1}})(),j=(0,u().jS)(O)?"default":O,K=(()=>{if((0,u().jS)(O))return O;let e=n.getRecordStoreUIAncestor(2);for(;e&&e.isTable("block");){var t,o;const n=e.getRecordStoreUIParent(),i=n?T().G.createChildStore(n,e.pointer):void 0;if(null!=i&&null!==(t=i.getFormat())&&void 0!==t&&t.block_color&&"default"!==(null==i||null===(o=i.getFormat())||void 0===o?void 0:o.block_color))return i.getFormat().block_color;e=e.getRecordStoreUIAncestor(1)}return"default"})(),z=_().VV.state;return d().IY({textValue:o,getRecordModel:n.getRecordModel,getRecordRole:n.getRecordRole,disableHover:i,disableStyleAnnotations:r,disableInsertedDeletedAnnotations:s,disableDateStyleAnnotations:l,disableSuggestionAnnotations:c,disableCommentAnnotations:p,disableLinks:R||!1,userTimeZone:(0,a().r)(),disabled:m,isAndroid:F.isAndroid,isSafariOrIOS:F.isSafari||F.isIOS,isWindows:F.isWindows,showEmojiInline:F.isWindows,emojiType:f,highlightDiscussionId:g,theme:M,intl:S().Z.getIntl(),renderedPageBlockId:v,parentBlockId:w,katex:P,isClient:!0,baseUrl:h().default.domainBaseUrl,publicDomainName:h().default.publicDomainName,currentUserId:N.id,getPublicBaseUrlForPage:k().aR(t),externalIntegrations:x().default.integrations.state,disableFormulaVariableStyles:B,formulaValueTypes:E,enableDeletedPageIndicator:V,stopLinkPropagation:D,linkTargetBlank:U,emojiData:y().Z.state,getToday:A().HL,isMobileNative:F.isMobileNative,isMobileNativeExternalLinkFixEnabled:C().default.checkGate({gateName:"mobile_native_external_link_fix"}),displayInUserTimezone:C().default.checkGate({gateName:"display_date_in_user_timezone"}),dictationId:b().LB,isAddMenu:L,blockTextColor:j,blockBackgroundColor:K,isBlockStore:Z,disableAnimation:F.prefersReducedMotion,isPageVerificationEnabled:C().default.checkGate({gateName:"page_verification"}),disableAssistantCitationNumbers:z})}function Y(e,t){return(0,s().Xh)({textValue:e,getRecordModel:t.getRecordModel,userTimeZone:(0,a().r)(),intl:S().Z.getIntl()})}function J(e,t,o,n,i){const{device:r,currentUser:l}=e,u=c().lzi(o),p=[];for(const[m,f]of u.entries()){const e=c().hDy(f),o=c().J82(e);o?p.push(d().A0({customEmojiAnnotation:o,tokenAnnotations:e,index:m,getRecordModel:n.getRecordModel,getRecordRole:n.getRecordRole,disableHover:!0,isAndroid:r.isAndroid,isSafariOrIOS:r.isSafari||r.isIOS,theme:t,baseUrl:h().default.domainBaseUrl,currentUserId:l.id,disableAnimation:r.prefersReducedMotion})):p.push((0,s().Xh)({textValue:[f],getRecordModel:n.getRecordModel,userTimeZone:(0,a().r)(),intl:S().Z.getIntl(),disableInsertedAnnotations:i}))}return p}function X(e){let t="";if(V(e))t+=c().qyI;else if((0,B().Xu)(e))t=c().fuX;else if(j(e))t+=e.alt;else if(function(e){return R().kK(e)&&"br"===e.tagName.toLowerCase()}(e))t+="\n";else if(R().Gs(e))t+=e.textContent;else if(O(e));else for(const o of Array.from(e.childNodes))t+=X(o);return L(e)&&(t=t.replace(ne,"")),t}const ee=new RegExp(d().U3,"g");function te(e){return e.replace(ee,"")}const oe={[c().qyI]:{deleteEndToken:new RegExp(`${c().qyI}$`,"g"),deleteToken:new RegExp(`(${c().qyI})([^${d().U3}])`,"g"),existingToken:new RegExp(`${c().qyI}${d().U3}`,"g")},[c().fuX]:{deleteEndToken:new RegExp(`${c().fuX}$`,"g"),deleteToken:new RegExp(`(${c().fuX})([^${d().U3}])`,"g"),existingToken:new RegExp(`${c().fuX}${d().U3}`,"g")}},ne=new RegExp(`${c().aVG}$`,"g");function ie(e,t){if(!t)return"";let o=X(t);if(e.device.isAndroid)for(const[n,i]of Object.entries(oe))o=o.replace(i.deleteEndToken,"").replace(i.deleteToken,"$2").replace(i.existingToken,n);return"\n"===o[o.length-1]&&(o=o.substring(0,o.length-1)),o}function re(e,t,o){if(!e)return!1;let n=t;for(;n!==e&&!L(n);){const{parentNode:e}=n;if(!e)break;n=e}if(L(n))return o>0;const i=p().cx(e.childNodes,L);return!(i<0)&&(t===e&&o>i)}function ae(e,t){const o=(0,P().X1)(e);if(!o)return;const n=G(e,t),i=Z(e);return{index:n,forceEmit:Boolean(i),afterEndOfLine:re(o,e,t)}}function se(e,t){if(t||(t=N().get()),t){const e=G(t.startContainer,t.startOffset),o=G(t.endContainer,t.endOffset),n=Z(t.startContainer)||Z(t.endContainer);return{selection:{startIndex:e,endIndex:o},forceEmitSelectionStore:Boolean(n)}}}function le(e,t,o){const n=$(e,t),i=$(e,o);return N().rangeFromContainerOffsets({start:n,end:i})}function ce(e,t,o,n){if(e===o&&t===n)return!0;if(H(e)!==H(o))return!1;if(K(e)!==K(o))return!1;const i=(0,P().X1)(e),r=(0,P().X1)(o);if(i!==r)return!1;if(G(e,t)!==G(o,n))return!1;return re(i,e,t)===re(r,o,n)}function de(e,t){return!e&&!t||!(!e||!t)&&(e.startOffset===t.startOffset&&e.endOffset===t.endOffset&&e.startContainer===t.startContainer&&e.endContainer===t.endContainer||q(e.startContainer)&&q(t.startContainer)&&ce(e.startContainer,e.startOffset,t.startContainer,t.startOffset)&&ce(e.endContainer,e.endOffset,t.endContainer,t.endOffset))}function ue(e){const{environment:t,event:o,textValue:n,editorNode:i,store:r,canEdit:a,disableEquationInteraction:s}=e,l=ge({event:o,textValue:n,editorNode:i});(t.device.isFirefox||"editing"!==M().default.state.mode||M().default.isEmptySelection()||l&&(0,B().Xu)(l.node))&&l&&(s&&(0,B().Xu)(l.node)||f().VO({environment:t,event:o,interactiveToken:l,store:r,canEdit:a}))}function pe(e){const{environment:t,event:o,textValue:n,editorNode:i,store:r,parentStore:a,canEdit:s}=e,l=ge({event:o,textValue:n,editorNode:i});l&&f().ON({environment:t,event:o,interactiveToken:l,store:r,parentStore:a,canEdit:s})}function me(e){const{environment:t,event:o,textValue:n,editorNode:i,store:r,canEdit:a}=e,s=ge({event:o,textValue:n,editorNode:i});s&&f().Nh({environment:t,event:o,interactiveToken:s,store:r,canEdit:a})}function fe(e){const{environment:t,event:o,textValue:n,editorNode:i,store:r,canEdit:a}=e;if(o.target===i)return void g().lY({relatedNode:i});const s=ge({event:o,textValue:n,editorNode:i});s&&f().Zl({environment:t,event:o,interactiveToken:s,store:r,canEdit:a})}function ge(e){const{event:t,textValue:o,editorNode:n}=e,i=R().sh(t.target,(e=>Boolean(e.getAttribute&&e.getAttribute("data-token-index"))));if(i&&null!=n&&n.contains(i)){const e=i.getAttribute("data-token-index");if(e){const t=Number.parseInt(e,10);if(o){const e=o[t];if(e)return{textValue:o,tokenIndex:t,textToken:e,node:i}}}}}function ve(e){return _e({store:e.store,temporaryAnnotation:c().GKr.TemporaryComment,multiSelection:v().default.getMultiSelection()})}function he(e){const{blockId:t,textProps:o,find:n,currentFocusedResult:i}=e;let{textValue:r}=e;if(!r||"none"===o.type||0===n.length)return r;return(0,E().ub)({textValue:r,find:n,intl:S().Z.getIntl()}).forEach(((e,n)=>{let{selection:a}=e,s=!1;if("block_match"===o.type&&"block"===(null==i?void 0:i.type)){s=t===i.id&&p().Xy(a,i.selection)}else if("comment_match"===o.type&&"comment"===(null==i?void 0:i.type)){s=o.commentId===i.id&&p().Xy(a,i.selection)}else if("page_property_value_match"===o.type&&"page_property_value"===(null==i?void 0:i.type)){s=i.propertyId===o.propertyId&&p().Xy(a,i.selection)&&i.id===t}else if("simple_table_cell_match"===o.type&&"simple_table_cell"===(null==i?void 0:i.type)){const e=o.propertyId===i.propertyId&&i.id===t;p().Xy(a,i.selection),s=e}const l=s?c().GKr.TemporarySelectedFindHighlight:c().GKr.TemporaryFindHighlight;r=c().WO0({textValue:r,selection:a,annotation:[l]})})),r}function _e(e){const{store:t,temporaryAnnotation:o,multiSelection:n}=e,i=t.getValue();if(n){const e=(0,D().L5)(n).find((e=>{let{store:o}=e;return o===t}));if(e){const{selection:t}=e;return c().WO0({textValue:i,selection:t,annotation:[o]})}}return i}function be(e){const{store:t,multiSelection:o}=e,n=t.getValue();if(o){const e=(0,D().L5)(o).find((e=>{let{store:o}=e;return o===t}));if(e){const{selection:t}=e;return c().WO0({textValue:n,selection:t,annotation:[c().GKr.TemporaryCommentHighlight]})}}return n}function ye(e){const{store:t,equationStore:o}=e;if(!o.isOpen())return;const n=(0,w().QY)(o.state.savedTextSelectionState.multiSelection);if(!n)return;const{store:i,selection:r}=n;if(t!==i)return;const a=i.getValue(),s=r.startIndex===r.endIndex?a:c()._QS(a,r.startIndex,r.endIndex),l=B().qZ({equationState:o.state,isTemporary:!0});return l?c().P$X(s,[l],r.startIndex):void 0}function Se(e){const{store:t,selection:o}=e,n=t.getValue();if(o.startIndex+1!==o.endIndex)return n;const i=c().b1T(n,o.startIndex);if(!i||!c().eOb(i))return n;const r=o.startIndex===o.endIndex?n:c()._QS(n,o.startIndex,o.endIndex),a=(0,m().uh)(i[1],c().rIb),s=[i[0],[...a,c().EPB()]];return c().P$X(r,[s],o.startIndex)}function we(e){const{store:t,stateType:o}=e,{state:n,type:i}=o,r=t.getValue();if(n.textStore!==t)return r;const a="mentionMenu"===i?n.temporaryInputData.state:n.temporaryInputDataStore.state;if(!a)return r;if("slashMenu"===o.type&&o.state.isAddMenu&&""===a.prefix)return[c().V3y(`${c().QaF(r)}`,[c().mF$(a)])];const s=(0,F().O2)(t,n.oldTextValue,a.prefix);if(s&&s.prefix){const{tokensBeforeRange:e,tokensInsideRange:t,tokensAfterRange:o}=c().xrQ(r,s.prefix.startIndex,s.filter.endIndex),n=c().QaF(t);return[...e,c().V3y(n,[c().mF$(a)]),...o]}return r}function ke(e){const{textValue:t,discussionId:o}=e;return c().WO0({textValue:t,selection:{startIndex:0,endIndex:Number.POSITIVE_INFINITY},annotation:[c().GKr.SuggestionRemoveText,o]})}function Ie(e){const{textValue:t,discussionId:o}=e;return c().WO0({textValue:t,selection:{startIndex:0,endIndex:Number.POSITIVE_INFINITY},annotation:[c().GKr.SuggestionInsertText,o]})}function Ce(e){const{store:t,selection:o}=e,n=t.getValue(),{tokensBeforeRange:i,tokensInsideRange:r,tokensAfterRange:a}=c().xrQ(n,o.startIndex,o.endIndex),s=c().QaF(r);return[...i,c().V3y(s,[[c().GKr.TemporarySelection]]),...a]}function xe(e){let{store:t,textValue:o}=e;if(!o)return o;if(t.table!==l().iU)return o;const n=T().G.createChildStore(t,{table:t.table,id:t.id});if(n.isInsideCollection()||n.isType("callout")||n.isType("code"))return o;let i=o;return(0,U().bB)((0,U().yJ)(n)).unresolved.forEach((e=>{const t=["m",e.id];i=c().WO0({textValue:i,annotation:t,selection:{startIndex:0,endIndex:Number.POSITIVE_INFINITY}})})),i}function Te(e){if(e.nodeType===Node.TEXT_NODE)return e;if(R().kK(e)&&"false"===e.getAttribute("contentEditable"))return e;let t;const o=R().kd(e);return o.forEach((e=>{null!==e.textContent&&e.textContent.indexOf("\n")>=0&&(t=e)})),t||(o.length>0?o[o.length-1]:e)}function Me(e){const t=N().get();if(!t)return;const o=t.startContainer,n=(0,P().X1)(o),i=null==n?void 0:n.childNodes;if(!i||0===i.length)return;const a=(0,P().g4)(o,n),s=p().cx(i,(e=>e===a));var l;if(-1===s)return void r().log({level:"warning",from:"clientTextRenderHelpers",type:"setSelectionToParagraph",data:{message:"Selection ancestor not found from node's siblings",miscDataToConvertToString:{currentSelectionNodeName:o.nodeName,currentSelectionContentEditableLeafNodeName:a.nodeName,currentSelectionContentEditableIsSameNode:a.isSameNode(o),currentSelectionContentEditableLeafParentIsSameNode:null===(l=a.parentNode)||void 0===l?void 0:l.isSameNode(n)}}});let c,d,u=!0,m=o,f=t.startOffset;if(0===f)for(let r=s-1;u&&r>=0;r--){const e=Te(i[r]);if(e.nodeType===Node.TEXT_NODE){var g;const t=null===(g=e.textContent)||void 0===g?void 0:g.lastIndexOf("\n");var v,h;if(void 0!==t&&t>=0)null!==(v=e.textContent)&&void 0!==v&&v.length&&t+1<(null===(h=e.textContent)||void 0===h?void 0:h.length)&&(m=e,f=t+1),u=!1;else m=e,f=0}else m=e,f=0}u=!0;for(let r=s;u&&r<i.length;r++){const e=Te(i[r]);if(e.nodeType===Node.TEXT_NODE){let t;var _,b,y,S;if(m===e)t=null===(_=e.textContent)||void 0===_?void 0:_.indexOf("\n",f);else t=null===(b=e.textContent)||void 0===b?void 0:b.indexOf("\n");if(void 0!==t&&t>=0)c=e,d=t+1===(null===(y=e.textContent)||void 0===y?void 0:y.length)?t:t+1,u=!1;else c=e,d=(null===(S=e.textContent)||void 0===S?void 0:S.length)||0}else{var w;c=e,d=(null===(w=e.textContent)||void 0===w?void 0:w.length)||0}}if(m&&c){const t=N().rangeFromContainerOffsets({start:{container:m,offset:f},end:{container:c,offset:d||0}});N().set(t,e)}}function Pe(e,t){const o=c().$0A(e.id,e.getSpaceId()),n=c().YCD(o);return{textValue:[n],tokenIndex:0,textToken:n,node:t}}function Ae(e){var t;return(null===(t=e.match(/\S+/g))||void 0===t?void 0:t.length)??0}},763266:(e,t,o)=>{o.d(t,{NP:()=>s,QS:()=>f,mO:()=>c,sw:()=>m,xt:()=>p});o(267602),o(653476);var n=()=>o(565271),i=()=>o(788860),r=()=>o(749826),a=()=>o(138912);function s(e){const t=a().default.state;return t.loaded?t.bots.filter((t=>t.integration_id===e)):[]}const l=(0,i().vU)({invalidRequest:{id:"unfurlingHelpers.authenticatedErrorDescription.invalidRequest",defaultMessage:"The authentication request is invalid. Please contact support if issue persists."},unauthorizedClient:{id:"unfurlingHelpers.unauthorizedClient.",defaultMessage:"The client is not authorized to request an authorization code using this method. Please contact support if issue persists."},accessDenied:{id:"unfurlingHelpers.authenticatedErrorDescription.accessDenied",defaultMessage:"The resource owner or authorization server denied the request. Check with your organization or resource owner to ensure OAuth installation is enabled."},unsupportedResponseType:{id:"unfurlingHelpers.authenticatedErrorDescription.unsupportedResponseType",defaultMessage:"The authorization server does not support obtaining an authorization code using this method. Please contact support if issue persists."},invalidScope:{id:"unfurlingHelpers.authenticatedErrorDescription.invalidScope",defaultMessage:"The requested scope is invalid. Please contact support if issue persists."},serverError:{id:"unfurlingHelpers.authenticatedErrorDescription.serverError",defaultMessage:"The authorization server encountered an unexpected condition that prevented it from fulfilling the request. Please contact support if issue persists."},temporarilyUnavailable:{id:"unfurlingHelpers.authenticatedErrorDescription.temporarilyUnavailable",defaultMessage:"The authorization server is currently unable to handle the request due to a temporary overloading or maintenance of the server. Please contact support if issue persists."},githubAppRequestAccessUnsupported:{id:"unfurlingHelpers.authenticatedErrorDescription.githubAppRequestAccessUnsupported",defaultMessage:"Request Access is not supported. You must be both a GitHub Admin and Notion Workspace Admin to connect the two apps."},unknownError:{id:"unfurlingHelpers.authenticatedErrorDescription.unknownError",defaultMessage:"The authorization server responded with an unknown error (`{value}`). Please contact support if issue persists."}});function c(e){return"invalid_request"===e?l.invalidRequest:"unauthorized_client"===e?l.unauthorizedClient:"access_denied"===e?l.accessDenied:"unsupported_response_type"===e?l.unsupportedResponseType:"invalid_scope"===e?l.invalidScope:"server_error"===e?l.serverError:"temporarily_unavailable"===e?l.temporarilyUnavailable:"github_app_request_access_unsupported"===e?l.githubAppRequestAccessUnsupported:l.unknownError}const d=(0,i().vU)({unknownError:{id:"unfurlingHelpers.unfurlResponseError.unknownError",defaultMessage:"Can't load preview"},accessDenied:{id:"unfurlingHelpers.unfurlResponseError.accessDenied",defaultMessage:"Access denied"},reAuthenticate:{id:"unfurlingHelpers.unfurlResponseError.reAuthenticate",defaultMessage:"Re-authentication necessary"},notFound:{id:"unfurlingHelpers.unfurlResponseError.notFound",defaultMessage:"Content not found"},unprocessableEntity:{id:"unfurlingHelpers.unfurlResponseError.unprocessableEntity",defaultMessage:"Unrecognized URL"},rateLimited:{id:"unfurlingHelpers.unfurlResponseError.rateLimited",defaultMessage:"Too many requests"},serverError:{id:"unfurlingHelpers.unfurlResponseError.serverError",defaultMessage:"Can't load preview"},invalidRequest:{id:"unfurlingHelpers.unfurlResponseError.invalidRequest",defaultMessage:"Can't load preview"},authRefresh:{id:"unfurlingHelpers.unfurlResponseError.authRefresh",defaultMessage:"Fetching Preview"},githubNotAcceptable:{id:"unfurlingHelpers.unfurlResponseError.githubNotAcceptable",defaultMessage:"Need owner role"},jiraNotAcceptable:{id:"unfurlingHelpers.unfurlResponseError.jiraNotAcceptable",defaultMessage:"Synced in another workspace"},notAcceptable:{id:"unfurlingHelpers.unfurlResponseError.notAcceptable",defaultMessage:"Not Acceptable"},databaseSyncLimit:{id:"unfurlingHelpers.unfurlResponseError.databaseSyncLimit",defaultMessage:"Synced Database limit reached"}}),u=(0,i().vU)({unknownError:{id:"unfurlingHelpers.unfurlResponseErrorDescription.unknownError",defaultMessage:'There was an error trying to get information for this resource. Received error code "{statusCode}".'},accessDenied:{id:"unfurlingHelpers.unfurlResponseErrorDescription.accessDenied",defaultMessage:"You do not have appropriate permission to access this resource."},reAuthenticate:{id:"unfurlingHelpers.unfurlResponseErrorDescription.reAuthenticate",defaultMessage:"You need to re-authenticate your account to access this resource."},notFound:{id:"unfurlingHelpers.unfurlResponseErrorDescription.notFound",defaultMessage:"The resource information for this link could not be found. It may no longer exist or you may not have appropriate permission to access it."},unprocessableEntity:{id:"unfurlingHelpers.unfurlResponseErrorDescription.unprocessableEntity",defaultMessage:"This url is not currently embedable by this integration."},rateLimited:{id:"unfurlingHelpers.unfurlResponseErrorDescription.rateLimited",defaultMessage:'"{integrationName}" received too many requests for you or your organization. Please wait a few minutes and try again.'},serverError:{id:"unfurlingHelpers.unfurlResponseErrorDescription.serverError",defaultMessage:'Oh no! Seems like there was a "{integrationName}" server error. Received error code "{statusCode}".'},invalidRequest:{id:"unfurlingHelpers.unfurlResponseErrorDescription.invalidRequest",defaultMessage:'There was an error trying to get information for this resource. Received error code "{statusCode}".'},authRefresh:{id:"unfurlingHelpers.unfurlResponseErrorDescription.authRefresh",defaultMessage:"Fetching Preview via Login Update, please wait."},githubNotAcceptable:{id:"unfurlingHelpers.unfurlResponseErrorDescription.githubNotAcceptable",defaultMessage:"You do not have appropriate permission to sync this resource. You need to have an owner role."},jiraNotAcceptable:{id:"unfurlingHelpers.unfurlResponseErrorDescription.jiraNotAcceptable",defaultMessage:"You have synced this resource in another workspace."},notAcceptable:{id:"unfurlingHelpers.unfurlResponseErrorDescription.notAcceptable",defaultMessage:"You do not have appropriate permission to sync this resource. You need to have an owner role."},databaseSyncLimit:{id:"unfurlingHelpers.unfurlResponseErrorDescription.databaseSyncLimit",defaultMessage:"Your workspace has hit the Synced Database limit."}});function p(e,t){return void 0===e?{message:d.unknownError,description:u.unknownError}:401===e?{message:d.reAuthenticate,description:u.reAuthenticate}:439===e?{message:d.authRefresh,description:u.authRefresh}:403===e?{message:d.accessDenied,description:u.accessDenied}:404===e?{message:d.notFound,description:u.notFound}:422===e?{message:d.unprocessableEntity,description:u.unprocessableEntity}:429===e?{message:d.rateLimited,description:u.rateLimited}:406===e?"jira"===t?{message:d.jiraNotAcceptable,description:u.jiraNotAcceptable}:"github"===t?{message:d.githubNotAcceptable,description:u.githubNotAcceptable}:{message:d.notAcceptable,description:u.notAcceptable}:417===e?{message:d.databaseSyncLimit,description:u.databaseSyncLimit}:(0,n().Ms)(e)?{message:d.serverError,description:u.serverError}:{message:d.invalidRequest,description:u.invalidRequest}}function m(e){return!e.device.isMobileBrowser}function f(){return r().default.checkGate({gateName:"beta-developers-external"})}},572623:(e,t,o)=>{o.d(t,{JF:()=>a,QZ:()=>r,WD:()=>l,e2:()=>s});var n=()=>o(575861),i=()=>o(876822);function r(){const{currentUserSettingsStore:e,currentSpaceStore:t}=i().default.state,o=(null==e?void 0:e.getSettings())||{},n=null==t?void 0:t.getPlanType();return"professional"===o.domain_type&&"team"===n}function a(){const{currentUserSettingsStore:e}=i().default.state;return((null==e?void 0:e.getSettings())||{}).domain_type}function s(e){const t=e.getSettings(),o=null==t?void 0:t.signup_time;return o?(0,n().O5)(o):null}function l(e){const{currentUserSettingsStore:t}=i().default.state;if(t&&t.id===e.currentUser.id)return t}},921995:(e,t,o)=>{o.d(t,{Ef:()=>C,FQ:()=>x,Gp:()=>b,IU:()=>v,Li:()=>h,X4:()=>S,ZI:()=>k,ax:()=>I,nZ:()=>y,tt:()=>_,xF:()=>g});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(241792),o(731107);var n=()=>o(506347),i=()=>o(135857),r=()=>o(998411),a=()=>o(665553),s=()=>o(481529),l=()=>o(160916),c=()=>o(396136),d=()=>o(696459),u=()=>o(205228),p=()=>o(749826),m=()=>o(615676),f=()=>o(527278);const g="paste";function v(e){let t,o;const n=new Set,i=new Set;for(const r of e){const e=r.getParentBlockStore();if(e&&"column"===e.getType()){n.add(e.id),i.add(r.id);const a=e.getParentBlockStore();if(a&&"column_list"===a.getType()){o=a.getSpaceId();const e=a.id;if(void 0===t&&(t=e),t!==e)return}}}if(t&&n.size>1&&o)return{columnListId:t,columnIds:n,blockIds:i,spaceId:o}}function h(e,t){if(!e.clipboardData)return;const o=e.clipboardData.getData("text/html");e.clipboardData.setData("text/html",`${o}${b(t)}`)}function _(e){if(!e.clipboardData)return;return y(e.clipboardData.getData("text/html"))}function b(e){return`\x3c!-- notionvc: ${e} --\x3e`}function y(e){const t=e.match(/\<\!-- notionvc\: ([0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}) --\>$/i);return t?t[1]:void 0}function S(e){const{blockValues:t,rootBlock:o,getRecordValue:n,isWindows:i,markdownSerializationOptions:r,markdownLinkifyIt:s,formulasModule:l}=e;let c=a().on(t,{...I({rootBlock:o,getRecordValue:n,formulasModule:l}),transformAnnotation:null==r?void 0:r.transformAnnotation,transformBlockMapping:null==r?void 0:r.transformBlockMapping});const d={markdown:void 0,html:void 0};if(c){c=c.replaceAll(w,"$1"),d.markdown=k(i,c);const e=s&&a().c8({...s,markdown:c});e&&(d.html=k(i,e))}return d}const w=/\[(https?:\/\/[^\])]+)\]\(\1\)/g;function k(e,t){return e?t.split("\r\n").reduce(((e,t)=>[...e,...t.split("\n")]),[]).join("\r\n"):t}function I(e){const{rootBlock:t,getRecordValue:o,formulasModule:a}=e;return{root:t,navigableBlockId:t.id,renderParentBlockId:void 0,blockId:t.id,userTimeZone:(0,r().r)(),intl:f().Z.getIntl(),getRecordValue:o,numberedListCache:{},bulletedListCache:{},getRecordsWithParent:()=>[],getExportedPathToFile:e=>{let{toFileURI:t}=e;return t},getExportedRenderAsset:e=>{let{toFileURI:t}=e;return t},getExportedPathToPage:e=>{let{toPageId:t}=e;return(0,i().Z)({pageId:t,pageValue:o({table:c().iU,id:t}),baseUrl:u().default.domainBaseUrl,pageVisitSource:n().tY.Export})},baseUrl:u().default.domainBaseUrl,publicDomainName:u().default.publicDomainName,resultCache:new Map,regExpCache:new Map,experimentService:p().default,collectionFeatureGates:(0,m().W)(),formulasModule:a}}function C(e){const{rootBlock:t,clipboardData:o,isWindows:n,fallbackGetRecordValue:i,markdownSerializationOptions:r,markdownLinkifyIt:a,formulasModule:s}=e,{tree:c,blockSelection:u}=o,p=l().mF.tryUntilFound(...u.blocks.map((e=>e.blockSubtree&&l().mF.fromRecordMap(e.blockSubtree))).filter(d().$K),i),m=c.value,f=u.blocks.map((e=>p({...m,id:e.blockId}))).filter(d().$K);return S({rootBlock:t,getRecordValue:p,blockValues:f,isWindows:n,markdownSerializationOptions:r,markdownLinkifyIt:a,formulasModule:s})}function x(e){const t=e.pointerPath[e.pointerPath.length-1];return[s().op.set({pointer:t,path:e.attributePath,args:e.copiedText})]}},767306:(e,t,o)=>{o.d(t,{Cn:()=>u,G3:()=>d,pF:()=>c});var n=()=>o(156642),i=()=>o(716703),r=()=>o(532850),a=()=>o(722917),s=()=>o(619541),l=()=>o(749826);function c(e){if(!e.isType(n().Ti.code))return!1;const t=d(e),o=(0,i().Q3)(t),r=u(e);return o&&("preview"===r||"split_view"===r)&&l().default.checkGate({gateName:"resizable_code_block"})}function d(e){const t=e.getProperties()||{},o=r().Sj(t.language,a().eg);return o&&(0,i().L9)(o)?o:s().T.defaultLanguage}function u(e){const t=d(e);return(0,i().Q3)(t)?e.getFormat().code_preview_format??"split_view":s().T.defaultCodePreviewFormat}},861026:(e,t,o)=>{o.d(t,{aL:()=>E,Pn:()=>I,vS:()=>T,yr:()=>R,Pp:()=>B,ZO:()=>M,Y5:()=>A});o(267602),o(653476),o(470928),o(30005);var n=()=>o(506347),i=()=>o(990352),r=(o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(241792),o(731107),o(228244),()=>o(696459)),a=()=>o(326966),s=()=>o(455947),l=()=>o(608352),c=()=>o(226413),d=()=>o(56718);function u(e,t,o){return void 0!==e&&((0,s().vA)(e)?Boolean(null===(n=e.filters)||void 0===n?void 0:n.some((e=>u(e,t,o)))):!!(0,s().aN)(e)&&o.has(e.property));var n}function p(){return(0,a().m8)(c().DN.map((e=>[e,0])))}function m(e,t){const o=p();if(void 0===e)return o;var n;if((0,s().vA)(e))return(null===(n=e.filters)||void 0===n?void 0:n.reduce(((e,o)=>{const n=m(o,t);for(const[t,i]of(0,r().qP)(n))e[t]+=i;return e}),o))||o;if((0,s().aN)(e)){var i;const n=null===(i=t[e.property])||void 0===i?void 0:i.type;return n&&(o[n]+=1),o}if((0,s().Mm)(e))return o[e.timestamp]+=1,o;(0,r().t1)(e)}function f(e,t){const o=new Set;if((0,s().aN)(e)){var n;const i=e.filter.operator;"relation"===(null===(n=t[e.property])||void 0===n?void 0:n.type)&&(0,s().ZM)(i)&&o.add(i)}else(0,s().vA)(e)?e.filters&&e.filters.forEach((e=>f(e,t).forEach((e=>o.add(e))))):(0,s().Mm)(e)||(0,r().t1)(e);return o}function g(e,t,o,n){const i=(0,r().Yd)(e),a=new Set;for(const r of i){var s;(null===(s=e[r])||void 0===s?void 0:s.type)===n&&a.add(r)}const l=u(t,e,a),c=Boolean(o&&o.some((e=>a.has(e.property))));return l&&c?"in_filter_and_sort":c?"in_sort":l?"in_filter":void 0}var v=()=>o(892981),h=()=>o(795910),_=()=>o(683938),b=()=>o(876822),y=()=>o(642966),S=()=>o(749826),w=()=>o(601952),k=()=>o(138892);function I(e,t){const o=null==e?void 0:e.collectionViewBlockStore(),i=null==e?void 0:e.collectionStore(),r=null==e?void 0:e.collectionViewStore(),a=null==e?void 0:e.filtersBarOpenStore.state,s=null==r?void 0:r.getType(),l=(null==e?void 0:e.settingsStore)&&(0,y().n)(null==e?void 0:e.settingsStore),c=null==r?void 0:r.getChartType(),d=null==r?void 0:r.getChartPlaceholderType(),u=null==r?void 0:r.getFormId(),p=null==o?void 0:o.id,m=null==e?void 0:e.getPageVisitSourceOverride();return{view_type:s,context_type:null==e?void 0:e.contextType,is_full_screen:null==e?void 0:e.isFullScreenStore.state,settings_menu:null!=e&&e.settingsStore.state.open&&l?l.type:void 0,collection_id:t||(null==i?void 0:i.id),collection_view_id:null==r?void 0:r.id,collection_view_block_id:p,filters_bar_open:a,is_in_wiki:null==o?void 0:o.isCollectionViewPageWithContent(),personal_home_type:m?(0,n().xt)(m):void 0,database_visit_id:null==e?void 0:e.visitSessionId,chart_type:"placeholder"===c?d:c,is_chart_placeholder:"placeholder"===c,form_id:u}}const C="missing_context_store",x="missing_schema";function T(e,t){var o,n,i,a,s,c,u,h;if(!e)return{view_type:C,row_count_category:C,column_count_category:C,has_relation_column:C,has_rollup_column:C,has_formula_column:C,formula_property_state:C,rollup_property_state:C,is_client_mode_enabled:C,tracking_source:void 0,collection_view_block_id:C,collection_view_id:C,collection_id:C,collection_type:C,collection_request_backend:C,has_groups:C,has_aggregations:C,has_estimated_aggregations:C,group_reducer_version:C,database_visit_id:C,is_full_screen:C,is_multi_source_view:C,uses_subitems:C,property_visibility:C,property_sort:C,property_filter:C,property_groups:C,relation_loader_status:C,group_sorts:C,is_wiki:C};const _=e.isClientModeEnabledStore.state,b=e.isFullScreenStore.state,y=(null===(o=e.collectionViewBlockStore())||void 0===o?void 0:o.id)||"missing",S=e.collectionViewStore(),w=(null==S?void 0:S.id)||"missing",k=(null===(n=e.collectionStore())||void 0===n?void 0:n.id)||"missing",I=null==S?void 0:S.getCollectionSource(),T=null===(i=e.collectionStore())||void 0===i?void 0:i.getSchema(),A=e.requestBackend,R=e.isMultiSourceView;if(!T)return{view_type:x,row_count_category:x,column_count_category:x,has_relation_column:x,has_rollup_column:x,has_formula_column:x,formula_property_state:x,rollup_property_state:x,is_client_mode_enabled:_,tracking_source:t,collection_view_block_id:y,collection_view_id:w,collection_id:k,collection_type:(null==I?void 0:I.type)||"missing",collection_request_backend:A,has_groups:x,has_aggregations:x,has_estimated_aggregations:x,group_reducer_version:x,database_visit_id:e.visitSessionId,is_full_screen:b,is_multi_source_view:R,uses_subitems:x,property_visibility:x,property_sort:x,property_filter:x,property_groups:x,relation_loader_status:x,group_sorts:x,is_wiki:x};const{has_relation_column:B,has_rollup_column:E,has_formula_column:D}=function(e){if(void 0===e)return{has_relation_column:x,has_rollup_column:x,has_formula_column:x};let t=!1,o=!1,n=!1;for(const i of Object.values(e))if("relation"===(null==i?void 0:i.type)&&(t=!0),"rollup"===(null==i?void 0:i.type)&&(o=!0),"formula"===(null==i?void 0:i.type)&&(n=!0),t&&o&&n)break;return{has_relation_column:t,has_rollup_column:o,has_formula_column:n}}(T),U=null===(a=e.remoteRequestStore.state)||void 0===a?void 0:a.loader;let F="missing",N="missing",V="missing";U&&(F=v().LU(U),N=v().NM(U),V=v().rY(U));const L=e.getPropertyFormatKey(),O=p();let Z=0;if(S&&L){var j;const e=null==S||null===(j=S.getPropertyFormatsStore(L))||void 0===j?void 0:j.getValue();e&&e.forEach((e=>{if(e.visible){var t;Z+=1;const o=null===(t=T[e.property])||void 0===t?void 0:t.type;o&&(O[o]+=1)}}))}const K=Boolean(null===(s=e.collectionStore())||void 0===s?void 0:s.getFormat().subitem_property),z=O,H=function(e,t){const o=p();return void 0===e||e.forEach((e=>{var n;const i=null===(n=t[e.property])||void 0===n?void 0:n.type;i&&(o[i]+=1)})),o}(null==U?void 0:U.sort,T),q=m(null==U?void 0:U.filter,T),W=function(e){const t=p();if(null==e||!e.reducers)return t;const o=Object.values(e.reducers).filter((e=>"groups"===e.type));if(0===o.length)return t;for(const n of o)t[n.groupBy.type]+=1,void 0!==n.subGroup&&(t[n.subGroup.groupBy.type]+=1);return t}(U),G=function(e){const t={manual:0,ascending:0,descending:0};if(null==e||!e.reducers)return t;const o=(0,r().qP)(e.reducers).filter((e=>{let[t,o]=e;return(0,d().d4)(o)}));if(0===o.length)return t;for(const[n,i]of o)(0,d().d4)(i)&&!n.startsWith(l().rT)&&(t[("formula"===i.groupBy.type?i.groupBy.groupBy:i.groupBy).sort.type]+=1);return t}(U),$=function(e,t){const o={is_empty:!1,is_not_empty:!1,relation_contains:!1,relation_does_not_contain:!1,in_group:!1};if(!e)return o;if(e.filter&&f(e.filter,t).forEach((e=>o[e]=!0)),!e.reducers)return o;for(const i of Object.values(e.reducers)){var n;(0,d().d4)(i)&&(o.in_group="relation"===i.groupBy.type||"relation"===(null===(n=i.subGroup)||void 0===n?void 0:n.groupBy.type)),((0,d().w7)(i)||(0,d().xC)(i))&&i.filter&&f(i.filter,t).forEach((e=>o[e]=!0))}return o}(U,T),Q=Boolean(null===(c=e.collectionStore())||void 0===c?void 0:c.isPageTreeCollection()),Y=null===(u=Object.values((null==U?void 0:U.reducers)??{}).find((e=>"groups"===e.type)))||void 0===u?void 0:u.version;return{view_type:e.getViewType()||"unknown",row_count_category:M(null===(h=e.remoteResultStore.state)||void 0===h?void 0:h.sizeHint),column_count_category:P(Z),has_relation_column:B,has_rollup_column:E,has_formula_column:D,formula_property_state:g(T,null==U?void 0:U.filter,null==U?void 0:U.sort,"formula"),rollup_property_state:g(T,null==U?void 0:U.filter,null==U?void 0:U.sort,"rollup"),is_client_mode_enabled:_,tracking_source:t,collection_view_block_id:y,collection_view_id:w,collection_id:k,collection_type:(null==I?void 0:I.type)||"missing",collection_request_backend:A,has_groups:F,has_aggregations:N,has_estimated_aggregations:V,group_reducer_version:Y,database_visit_id:e.visitSessionId,is_full_screen:b,is_multi_source_view:R,uses_subitems:K,property_visibility:z,property_sort:H,property_filter:q,property_groups:W,relation_loader_status:$,group_sorts:G,is_wiki:Q}}function M(e){return void 0===e?"unknown":(t=e)<=1e3?"0-1K":t<=2500?"1K-2.5K":t<=5e3?"2.5K-5K":t<=1e4?"5K-10K":t<=25e3?"10K-25K":t<=5e4?"25K-50K":t<=1e5?"50K-100K":t<=2e5?"100K-200K":t<=5e5?"200K-500K":t<=1e6?"500K-1M":"1M+";var t}function P(e){return void 0===e?"unknown":e<=5?"0-5":e<=10?"6-10":e<=20?"10-20":e<=50?"20-50":"51_or_more"}function A(e){const{from:t,collectionContextStore:o,sizeHintAtStart:n}=e,i=T(o),{row_count_category:r,...a}=i;return{...a,from:t,property_type:"property_type"in e?e.property_type:void 0,did_trigger_fetch:o?o.isLoadingStore.state:C,row_count_category:M(n)}}function R(e){const{collectionContextStore:t,is_native_drop:o,is_empty:n}=e;return{...T(t),is_native_drop:o,is_empty:n}}function B(e){var t,o;const{environment:n,collectionContextStore:r,visibleItemsCount:a,isPrewarmedTab:s}=e,l=T(r),c=r.remoteResultStore.state?v().aW({result:r.remoteResultStore.state}).length:0,d=0===c?void 0:a/c,u=null===(t=b().default.state.currentSpaceStore)||void 0===t?void 0:t.getSpaceId(),p=r.collectionViewStore(),m=null==p?void 0:p.id,f=(0,k().Z)(m),g=null===(o=n.prefetchCache)||void 0===o?void 0:o.getPrefetchAnalytic(f);return{...l,percentage_of_remote_result_visible:void 0===d?"empty_remote_result":0===d?"0":d<=.25?"0-25":d<=.5?"25-50":d<=.75?"50-75":d<1?"75-100":1===d?"100":"greater_than_100",wasm_sqlite_initialized:w().default.state.metricDataStore.state.wasm_sqlite_initialized,wasm_sqlite_storage:w().default.state.metricDataStore.state.wasm_sqlite_storage,did_prefetch:"hit-match"===(null==g?void 0:g.type),prefetch_analytic_type:null==g?void 0:g.type,is_mobile_background_launch:(0,_().Z)(),was_server_response_from_cache:r.wasServerResponseFromCache,was_initial_render_empty:e.wasInitialRenderEmpty,collection_request_backend:r.requestBackend,workspace_tag:void 0!==u?h().aX[u]:void 0,includes_page_origin_to_app_start:!0,time_origin_to_app_start:i().getAppStartTime(),is_load_cached_page_chunk_v2:S().default.checkGate({gateName:"load_cached_page_chunk_multi_cell_enabled"}),is_prewarmed_tab:s}}function E(e){const t=e.collectionViewStore(),o=null==t?void 0:t.getChartConfig();return{new_data_config:"placeholder"===(null==o?void 0:o.type)||null==o?void 0:o.dataConfig,chart_type:null==t?void 0:t.getChartType()}}},32072:(e,t,o)=>{o.d(t,{$7:()=>y,D0:()=>k,Fc:()=>S,HL:()=>x,IF:()=>A,KV:()=>G,Qz:()=>$,SW:()=>Y,Sb:()=>w,Sj:()=>b,WC:()=>h,_T:()=>R,cq:()=>D,ip:()=>T,li:()=>H,qh:()=>K,rn:()=>m,x:()=>C,xe:()=>J,zZ:()=>g});o(267602),o(916054),o(653476),o(241792);var n=()=>o(332143),i=()=>o(455947),r=()=>o(235819),a=()=>o(177634),s=()=>o(496205),l=()=>o(788860),c=()=>o(513670),d=()=>o(696459),u=()=>o(527278);const p={text:{operator:"string_contains",value:{type:"exact",value:void 0}},relation:{operator:"relation_contains",value:{type:"exact",value:void 0}},url:{operator:"string_contains",value:{type:"exact",value:void 0}},checkbox:{operator:"checkbox_is",value:{type:"exact",value:void 0}},created_by:{operator:"person_contains",value:{type:"exact",value:void 0}},last_edited_by:{operator:"person_contains",value:{type:"exact",value:void 0}},select:{operator:"enum_is",value:{type:"exact",value:void 0}},multi_select:{operator:"enum_contains",value:{type:"exact",value:void 0}},status:{operator:"status_is",value:{type:"is_group",value:void 0}},person:{operator:"person_contains",value:{type:"exact",value:void 0}},number:{operator:"number_equals",value:{type:"exact",value:void 0}},auto_increment_id:{operator:"number_equals",value:{type:"exact",value:void 0}},date:{operator:"date_is_relative_to",value:{type:"relative",value:"surrounding",unit:"week"}},created_time:{operator:"date_is",value:{type:"exact",value:void 0}},last_edited_time:{operator:"date_is",value:{type:"exact",value:void 0}},last_visited_time:{operator:"date_is",value:{type:"exact",value:void 0}},email:{operator:"string_contains",value:{type:"exact",value:void 0}},phone_number:{operator:"string_contains",value:{type:"exact",value:void 0}},title:{operator:"string_contains",value:{type:"exact",value:void 0}},file:{operator:"is_not_empty"},location:{operator:"location_is",value:{type:"exact",value:void 0}},verification:{operator:"verification_is",value:{type:"exact",value:void 0}}};function m(e){return p[e]}function f(e){return"v2"===e.version?function(e){if(!e.formula2)return{operator:"is_empty"};const t=e.formula2.result_type;if("array"===t.type){const e=(0,a().B8)(t.of);return"array"===e.type||"function"===e.type?{operator:"is_empty"}:"block"===e.type||"unknown"===e.type?{operator:"any",subfilter:m("text")}:{operator:"any",subfilter:m(e.type)}}if("unknown"===t.type||"block"===t.type)return m("text");return m(t.type)}(e):function(e){return e.formula&&e.formula.result_type?m(e.formula.result_type):{operator:"is_empty"}}(e)}function g(e){const{property:t,schema:o}=e,a=o[t];if(!a||"button"===a.type)return{operator:"is_empty"};if("formula"===a.type)return f(a);if("rollup"===a.type){if(a.aggregation&&"show_unique"!==a.aggregation){return m((0,n().W6)((0,n().gu)(a.aggregation)))}{const t=(0,r().gT)(e);if(!t){return{operator:"any",subfilter:{operator:"is_empty"}}}if("rollup"===t.targetPropertySchema.type){return{operator:"any",subfilter:{operator:"is_empty"}}}if("formula"===t.targetPropertySchema.type){const e=f(t.targetPropertySchema);if((0,i().a_)(e))return e;return{operator:"any",subfilter:e}}if("button"===t.targetPropertySchema.type)return{operator:"is_empty"};return{operator:"any",subfilter:m(t.targetPropertySchema.type)}}}return m(a.type)}const v=(0,l().vU)({date_is_within:{defaultMessage:"Is between",id:"collectionFilterMenuHelpers.operator.dateIsWithin"},date_is_relative_to:{defaultMessage:"Is relative to today",id:"collectionFilterMenuHelpers.operator.dateIsRelativeTo"},is_empty:{defaultMessage:"Is empty",id:"collectionFilterMenuHelpers.operator.isEmpty"},is_not_empty:{defaultMessage:"Is not empty",id:"collectionFilterMenuHelpers.operator.isNotEmpty"},string_is:{defaultMessage:"Is",id:"collectionFilterMenuHelpers.operator.stringIs"},string_is_not:{defaultMessage:"Is not",id:"collectionFilterMenuHelpers.operator.stringIsNot"},string_contains:{defaultMessage:"Contains",id:"collectionFilterMenuHelpers.operator.stringContains"},string_does_not_contain:{defaultMessage:"Does not contain",id:"collectionFilterMenuHelpers.operator.stringDoesNotContain"},string_starts_with:{defaultMessage:"Starts with",id:"collectionFilterMenuHelpers.operator.stringStartsWith"},string_ends_with:{defaultMessage:"Ends with",id:"collectionFilterMenuHelpers.operator.stringEndsWith"},checkbox_is:{defaultMessage:"Is",id:"collectionFilterMenuHelpers.operator.checkboxIs"},checkbox_is_not:{defaultMessage:"Is not",id:"collectionFilterMenuHelpers.operator.checkboxIsNot"},enum_is:{defaultMessage:"Is",id:"collectionFilterMenuHelpers.operator.enumIs"},enum_is_not:{defaultMessage:"Is not",id:"collectionFilterMenuHelpers.operator.enumIsNot"},enum_contains:{defaultMessage:"Contains",id:"collectionFilterMenuHelpers.operator.enumContains"},enum_does_not_contain:{defaultMessage:"Does not contain",id:"collectionFilterMenuHelpers.operator.enumDoesNotContain"},status_is:{defaultMessage:"Is",id:"collectionFilterMenuHelpers.operator.statusIs"},status_is_not:{defaultMessage:"Is not",id:"collectionFilterMenuHelpers.operator.statusIsNot"},person_contains:{defaultMessage:"Contains",id:"collectionFilterMenuHelpers.operator.personContains"},person_does_not_contain:{defaultMessage:"Does not contain",id:"collectionFilterMenuHelpers.operator.personDoesNotContain"},relation_contains:{defaultMessage:"Contains",id:"collectionFilterMenuHelpers.operator.relationContains"},relation_does_not_contain:{defaultMessage:"Does not contain",id:"collectionFilterMenuHelpers.operator.relationDoesNotContain"},location_is:{defaultMessage:"Is",id:"collectionFilterMenuHelpers.operator.locationIs"},location_is_not:{defaultMessage:"Is not",id:"collectionFilterMenuHelpers.operator.locationIsNot"},number_equals:{defaultMessage:"=",id:"collectionFilterMenuHelpers.operator.numberEquals"},number_does_not_equal:{defaultMessage:"â‰ ",id:"collectionFilterMenuHelpers.operator.numberDoesNotEqual"},number_greater_than:{defaultMessage:">",id:"collectionFilterMenuHelpers.operator.numberGreaterThan"},number_less_than:{defaultMessage:"<",id:"collectionFilterMenuHelpers.operator.numberLessThan"},number_greater_than_or_equal_to:{defaultMessage:"â‰¥",id:"collectionFilterMenuHelpers.operator.numberGreaterThanOrEqualTo"},number_less_than_or_equal_to:{defaultMessage:"â‰¤",id:"collectionFilterMenuHelpers.operator.numberLessThanOrEqualTo"},date_is:{defaultMessage:"Is",id:"collectionFilterMenuHelpers.operator.dateIs"},date_is_before:{defaultMessage:"Is before",id:"collectionFilterMenuHelpers.operator.dateIsBefore"},date_is_after:{defaultMessage:"Is after",id:"collectionFilterMenuHelpers.operator.dateIsAfter"},date_is_on_or_before:{defaultMessage:"Is on or before",id:"collectionFilterMenuHelpers.operator.dateIsOnOrBefore"},date_is_on_or_after:{defaultMessage:"Is on or after",id:"collectionFilterMenuHelpers.operator.dateIsOnOrAfter"},any:{defaultMessage:"Any",id:"collectionFilterMenuHelpers.operator.any"},none:{defaultMessage:"None",id:"collectionFilterMenuHelpers.operator.none"},every:{defaultMessage:"Every",id:"collectionFilterMenuHelpers.operator.every"},string_has_no_alphabet_prefix:{defaultMessage:"(Not used)",id:"collectionFilterMenuHelpers.operator.stringHasNoAlphabetPrefix"},verification_is:{defaultMessage:"Is",id:"collectionFilterMenuHelpers.operator.verificationStateIs"},verification_is_not:{defaultMessage:"Is not",id:"collectionFilterMenuHelpers.operator.verificationStateIsNot"}});function h(e){return u().Z.formatMessage(v[e])}const _=(0,l().vU)({today:{defaultMessage:"Today",id:"collectionFilterMenuHelpers.relativeDates.today"},tomorrow:{defaultMessage:"Tomorrow",id:"collectionFilterMenuHelpers.relativeDates.tomorrow"},yesterday:{defaultMessage:"Yesterday",id:"collectionFilterMenuHelpers.relativeDates.yesterday"},one_week_ago:{defaultMessage:"One week ago",id:"collectionFilterMenuHelpers.relativeDates.oneWeekAgo"},one_week_from_now:{defaultMessage:"One week from now",id:"collectionFilterMenuHelpers.relativeDates.oneWeekFromNow"},one_month_ago:{defaultMessage:"One month ago",id:"collectionFilterMenuHelpers.relativeDates.oneMonthAgo"},one_month_from_now:{defaultMessage:"One month from now",id:"collectionFilterMenuHelpers.relativeDates.oneMonthFromNow"}}),b=(0,l().vU)({past:{defaultMessage:"Past",id:"collectionFilterMenuHelpers.relativeDates.past"},future:{defaultMessage:"Next",id:"collectionFilterMenuHelpers.relativeDates.next"}}),y=(0,l().vU)({direction:{defaultMessage:"Direction",id:"collectionFilterMenuHelpers.relativeDates.direction"},unit:{defaultMessage:"Unit",id:"collectionFilterMenuHelpers.relativeDates.unit"}}),S=(0,l().vU)({this:{defaultMessage:"This",id:"collectionFilterMenuHelpers.relativedates.this"}}),w=(0,l().vU)({day:{defaultMessage:"day",id:"collectionFilterMenuHelpers.relativeDates.day"},week:{defaultMessage:"week",id:"collectionFilterMenuHelpers.relativeDates.week"},month:{defaultMessage:"month",id:"collectionFilterMenuHelpers.relativeDates.month"},year:{defaultMessage:"year",id:"collectionFilterMenuHelpers.relativeDates.year"}}),k=(0,l().vU)({day:{defaultMessage:"days",id:"collectionFilterMenuHelpers.relativeDates.days"},week:{defaultMessage:"weeks",id:"collectionFilterMenuHelpers.relativeDates.weeks"},month:{defaultMessage:"months",id:"collectionFilterMenuHelpers.relativeDates.months"},year:{defaultMessage:"years",id:"collectionFilterMenuHelpers.relativeDates.years"}}),I=(0,l().vU)({exactDate:{defaultMessage:"Custom date",id:"collectionFilterMenuHelpers.relativeDates.exactDate"},exactDateRange:{defaultMessage:"Exact dates",id:"collectionFilterMenuHelpers.relativeDates.exactDateRange"}});function C(e){return"exact"===e.type?u().Z.formatMessage(I.exactDate):u().Z.formatMessage(_[e.value])}const x=(0,l().vU)({custom:{defaultMessage:"Relative range",id:"collectionFilterMenuHelpers.relativeDates.range"},surrounding:{defaultMessage:"Surrounding range",id:"collectionFilterMenuHelpers.relativeDates.customRange"},this_week:{defaultMessage:"This week",id:"collectionFilterMenuHelpers.relativeDates.thisWeek"},the_past_week:{defaultMessage:"The past week",id:"collectionFilterMenuHelpers.relativeDates.thePastWeek"},the_past_month:{defaultMessage:"The past month",id:"collectionFilterMenuHelpers.relativeDates.thePastMonth"},the_past_year:{defaultMessage:"The past year",id:"collectionFilterMenuHelpers.relativeDates.thePastYear"},the_next_week:{defaultMessage:"The next week",id:"collectionFilterMenuHelpers.relativeDates.theNextWeek"},the_next_month:{defaultMessage:"The next month",id:"collectionFilterMenuHelpers.relativeDates.theNextMonth"},the_next_year:{defaultMessage:"The next year",id:"collectionFilterMenuHelpers.relativeDates.theNextYear"}});function T(e){return"custom"===e.value?function(e){const t=u().Z.formatMessage(b[e.direction]),o=1===e.count?u().Z.formatMessage(w[e.unit]):u().Z.formatMessage(k[e.unit]);return 1===e.count?`${t} ${o}`:`${t} ${e.count} ${o}`}(e):"surrounding"===e.value?function(e){const t=u().Z.formatMessage(w[e.unit]);return`${u().Z.formatMessage(S.this)} ${t}`}(e):"exact"===e.type?u().Z.formatMessage(I.exactDateRange):"relative"===e.type?u().Z.formatMessage(x[e.value]):void(0,d().t1)(e)}const M=(0,l().vU)({start_date:{defaultMessage:"Start date",id:"collectionFilterMenuHelpers.dateFilterModes.start_date"},end_date:{defaultMessage:"End date",id:"collectionFilterMenuHelpers.dateFilterModes.end_date"}}),P=(0,l().vU)({start_date:{defaultMessage:"For date ranges, filters on the start date. For individual dates, filters on the date.",id:"collectionFilterMenuHelpers.dateFilterModesTooltip.start_date"},end_date:{defaultMessage:"For date ranges, filters on the end date. For individual dates, filters on the date.",id:"collectionFilterMenuHelpers.dateFilterModesTooltip.end_date"}});function A(e){return u().Z.formatMessage(M[e])}function R(e){return u().Z.formatMessage(P[e])}const B=(0,l().vU)({and:{defaultMessage:"And",id:"collectionFilterMenuHelpers.combinatorOperators.and"},or:{defaultMessage:"Or",id:"collectionFilterMenuHelpers.combinatorOperators.or"}}),E=(0,l().vU)({checked:{defaultMessage:"Checked",id:"collectionFilterMenuHelpers.checkbox.checked"},unchecked:{defaultMessage:"Unchecked",id:"collectionFilterMenuHelpers.checkbox.unchecked"}});function D(e){return e.value?u().Z.formatMessage(s().A3(e.value)):""}function U(e){let{filter:t,schema:o}=e;return j({filter:t.subfilter,schema:o})}function F(e){let{filter:t}=e;return C(t.value)}function N(e){let{filter:t}=e;return T(t.value)}function V(e){let{filter:t}=e;return`"${t.value.value||""}"`}function L(e){let{filter:t}=e;return void 0===t.value.value?void 0:t.value.value.toString()}function O(e){let{filter:t}=e;return function(e){const t=e.value?E.checked:E.unchecked;return u().Z.formatMessage(t)}(t.value)}const Z={is_empty:()=>{},is_not_empty:()=>{},string_is:V,string_is_not:V,string_contains:V,string_does_not_contain:V,string_starts_with:V,string_ends_with:V,checkbox_is:O,checkbox_is_not:O,enum_is:V,enum_is_not:V,enum_contains:V,enum_does_not_contain:V,status_is:V,status_is_not:V,relation_contains:()=>{},relation_does_not_contain:()=>{},person_contains:()=>{},person_does_not_contain:()=>{},location_is:()=>{},location_is_not:()=>{},number_equals:L,number_does_not_equal:L,number_greater_than:L,number_less_than:L,number_greater_than_or_equal_to:L,number_less_than_or_equal_to:L,date_is:F,date_is_before:F,date_is_after:F,date_is_on_or_before:F,date_is_on_or_after:F,date_is_within:N,date_is_relative_to:N,any:U,none:U,every:U,string_has_no_alphabet_prefix:()=>{},verification_is:V,verification_is_not:V};function j(e){const{filter:t}=e,o=h(t.operator),n=Z[t.operator](e);return c().oA([o,n]).join(" ")}function K(e){const{filter:t,schema:o}=e;if((0,i().vA)(t)){const e=t.filters||[],n=c().oA(e.map((e=>{const t=K({filter:e,schema:o});if(t)return(0,i().vA)(e)?`(${t})`:t}))),r=u().Z.formatMessage(B[t.operator]);return n.join(` ${r} `)}if((0,i().aN)(t)){const e=o[t.property];if(!e)return;const n=t.filter,i=e.name,r=j({filter:n,schema:o});return c().oA([i,r]).join(" ")}}const z={text:function(e,t){return(0,i()._N)(t)?{operator:t}:(0,i().mv)(e)?{operator:t,value:{type:"exact",value:void 0}}:"string_has_no_alphabet_prefix"===e.operator?{operator:t}:{operator:t,value:e.value}},number:function(e,t){return(0,i()._N)(t)?{operator:t}:(0,i().mv)(e)?{operator:t,value:{type:"exact",value:void 0}}:{operator:t,value:e.value}},checkbox:function(e,t){return{operator:t,value:e.value}},select:function(e,t){return(0,i()._N)(t)?{operator:t}:(0,i().mv)(e)?{operator:t,value:{type:"exact",value:void 0}}:{operator:t,value:e.value}},multi_select:function(e,t){return(0,i()._N)(t)?{operator:t}:(0,i().mv)(e)?{operator:t,value:{type:"exact",value:void 0}}:{operator:t,value:e.value}},status:function(e,t){return(0,i()._N)(t)?{operator:t}:(0,i().mv)(e)?{operator:t,value:{type:"is_option",value:void 0}}:{operator:t,value:e.value}},relation:function(e,t){return(0,i()._N)(t)?{operator:t}:(0,i().mv)(e)?{operator:t,value:{type:"exact",value:void 0}}:{operator:t,value:e.value}},person:function(e,t){return(0,i()._N)(t)?{operator:t}:(0,i().mv)(e)?{operator:t,value:{type:"exact",value:void 0}}:{operator:t,value:e.value}},date:function(e,t,o){if((0,i()._N)(t))return{operator:t};const n=(0,i().mv)(e)?void 0:e.use_end;return"date_is_within"===t?"date_is_within"!==e.operator?{operator:t,value:{type:"exact",value:void 0},use_end:n}:e:"date_is_relative_to"===t?"date_is_relative_to"!==e.operator?{operator:t,value:{type:"relative",value:"surrounding",unit:"week"},use_end:n}:e:(0,i().TQ)(e)?"combinator"===o?{operator:t,value:{type:"relative",value:"today"},use_end:n}:{operator:t,value:{type:"exact",value:void 0},use_end:n}:(0,i().mv)(e)?{operator:t,value:{type:"exact",value:void 0}}:{operator:t,value:e.value,use_end:n}},file:function(e,t){return{operator:t}},location:function(e,t){return{operator:t,value:e.value}},verification:function(e,t){return{operator:t,value:e.value}}};function H(e,t,o,n){return(0,z[e])(t,o,n)}const q=(0,l().vU)({and:{defaultMessage:"And",id:"database.filterOperators.and"},or:{defaultMessage:"Or",id:"database.filterOperators.or"}}),W=(0,l().vU)({and:{defaultMessage:"All filters must match",id:"database.filterOperators.andCaption"},or:{defaultMessage:"At least one filter must match",id:"database.filterOperators.orCaption"}});function G(e,t){return"and"===e?t.formatMessage(q.and):t.formatMessage(q.or)}function $(e,t){return"and"===e?t.formatMessage(W.and):t.formatMessage(W.or)}const Q=(0,l().vU)({any:{defaultMessage:"Any",id:"database.filterOperators.any"},every:{defaultMessage:"Every",id:"database.filterOperators.every"},none:{defaultMessage:"None",id:"database.filterOperators.none"}});function Y(e,t){return"any"===e?t.formatMessage(Q.any):"every"===e?t.formatMessage(Q.every):t.formatMessage(Q.none)}const J=(0,l().vU)({number:{id:"collectionFilterMenuFilter.filterOperators.number.order",defaultMessage:"{operator}{operatorValue}"},text:{id:"collectionFilterMenuFilter.filterOperators.text.order",defaultMessage:"{operator}{operatorValue}"},checkbox:{id:"collectionFilterMenuFilter.filterOperators.checkbox.order",defaultMessage:"{operator}{operatorValue}"},select:{id:"collectionFilterMenuFilter.filterOperators.select.order",defaultMessage:"{operator}{operatorValue}"},multi_select:{id:"collectionFilterMenuFilter.filterOperators.multi_select.order",defaultMessage:"{operator}{operatorValue}"},status:{id:"collectionFilterMenuFilter.filterOperators.status.order",defaultMessage:"{operator}{operatorValue}"},relation:{id:"collectionFilterMenuFilter.filterOperators.relation.order",defaultMessage:"{operator}{operatorValue}"},location:{id:"collectionFilterMenuFilter.filterOperators.location.order",defaultMessage:"{operator}{operatorValue}"},person:{id:"collectionFilterMenuFilter.filterOperators.person.order",defaultMessage:"{operator}{operatorValue}"},date:{id:"collectionFilterMenuFilter.filterOperators.date.order",defaultMessage:"{operator}{operatorValue}"},file:{id:"collectionFilterMenuFilter.filterOperators.file.order",defaultMessage:"{operator}{operatorValue}"},verification:{id:"collectionFilterMenuFilter.filterOperators.verification.order",defaultMessage:"{operator}{operatorValue}"}})},559729:(e,t,o)=>{o.d(t,{Cz:()=>E,F6:()=>V,II:()=>F,Wr:()=>P,XD:()=>w,_1:()=>N,ar:()=>R,ej:()=>M,ew:()=>I,fZ:()=>x,h6:()=>U,h8:()=>O,kW:()=>k,nX:()=>C,nr:()=>A,qW:()=>B,xg:()=>T});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(470928),o(241792),o(731107),o(228244);var n=()=>o(926724),i=()=>o(834458),r=()=>o(608352),a=()=>o(226413),s=()=>o(56718),l=()=>o(646574),c=()=>o(874459),d=()=>o(942275),u=()=>o(998411),p=()=>o(114079),m=()=>o(788860),f=()=>o(568017),g=()=>o(513670),v=()=>o(696459),h=()=>o(749826),_=()=>o(270315),b=()=>o(521045),y=()=>o(527278),S=()=>o(129338);const w=10,k=10,I=50,C=(0,m().vU)({unsupportedGroupAction:{id:"collectionGroupHelpers.unsupportedGroupAction",defaultMessage:"Selected group is not available for this task."},emptyGroupLabel:{id:"database.boardView.uncategorizedColumnTitle",defaultMessage:"No {name}"},today:{id:"database.collectionGroupValue.dateGroup.today",defaultMessage:"Today"},yesterday:{id:"database.collectionGroupValue.dateGroup.yesterday",defaultMessage:"Yesterday"},last_7_days:{id:"database.collectionGroupValue.dateGroup.last7Days",defaultMessage:"Last 7 days"},last_30_days:{id:"database.collectionGroupValue.dateGroup.last_30Days",defaultMessage:"Last 30 days"},tomorrow:{id:"database.collectionGroupValue.dateGroup.tomorrow",defaultMessage:"Tomorrow"},next_7_days:{id:"database.collectionGroupValue.dateGroup.next7Days",defaultMessage:"Next 7 days"},next_30_days:{id:"database.collectionGroupValue.dateGroup.next30Days",defaultMessage:"Next 30 days"},week_differingStartAndEndYear:{id:"database.collectionGroupValue.dateGroup.week.differingStartAndEndYear",defaultMessage:"{startMonth} {startDay} {startYear}â€‰â€“â€‰{endMonth} {endDay} {endYear}"},week_differingStartAndEndMonth:{id:"database.collectionGroupValue.dateGroup.week.differingStartAndEndMonth",defaultMessage:"{startMonth} {startDay}â€‰â€“â€‰{endMonth} {endDay} {startYear}"},week_sameStartAndEndMonth:{id:"database.collectionGroupValue.dateGroup.week.sameStartAndEndMonth",defaultMessage:"{startMonth} {startDay}â€‰â€“â€‰{endDay} {startYear}"},out_of_range:{id:"database.collectionGroupValue.numberGroup.outOfRange",defaultMessage:"Out of range"},range:{id:"database.collectionGroupValue.numberGroup.range",defaultMessage:"{start} to {end}"}});function x(e){let{intl:t,value:o}=e;if("today"===o.type)return t.formatMessage(C.today);if("yesterday"===o.type)return t.formatMessage(C.yesterday);if("last_7_days"===o.type)return t.formatMessage(C.last_7_days);if("last_30_days"===o.type)return t.formatMessage(C.last_30_days);if("tomorrow"===o.type)return t.formatMessage(C.tomorrow);if("next_7_days"===o.type)return t.formatMessage(C.next_7_days);if("next_30_days"===o.type)return t.formatMessage(C.next_30_days);if("day"===o.type){const e=(0,c().NK)(o.range,(0,u().r)(),t.locale);return(0,l().ZW)({value:e.start,preset:"medium"})}if("week"===o.type){const e=(0,c().NK)(o.range,(0,u().r)(),t.locale),n=(0,l().ZW)({value:e.start,preset:"month_short"}),i=(0,l().ZW)({value:e.start,preset:"day"}),r=e.start.year,a=(0,l().ZW)({value:e.end,preset:"month_short"}),s=(0,l().ZW)({value:e.end,preset:"day"}),d=e.end.year;return r!==d?t.formatMessage(C.week_differingStartAndEndYear,{startMonth:n,startDay:i,endMonth:a,endDay:s,startYear:r,endYear:d}):n!==a?t.formatMessage(C.week_differingStartAndEndMonth,{startMonth:n,startDay:i,endMonth:a,endDay:s,startYear:r}):t.formatMessage(C.week_sameStartAndEndMonth,{startMonth:n,startDay:i,endDay:s,startYear:r})}if("month"===o.type){const e=(0,c().NK)(o.range,(0,u().r)(),t.locale);return(0,l().ZW)({value:e.start,preset:"month_year_short"})}if("year"===o.type){return(0,c().NK)(o.range,(0,u().r)(),t.locale).start.year.toString()}(0,v().t1)(o)}function T(e){let{intl:t,value:o,format:n}=e;if("out_of_range"===o.type)return t.formatMessage(C.out_of_range);if("range"===o.type){const e=p().uf(o.start,n,t),i=p().uf(o.end,n,t);return t.formatMessage(C.range,{start:e,end:i})}if("unique"===o.type){return p().uf(o.value,n,t)}(0,v().t1)(o)}function M(e){const{groupBy:t,schema:o,format:n,groupsFormatKey:i,limit:a}=e,s=o[t.property];if(!s||!(0,r().LG)(s))return;const l=n[i]||[],c=P(t,n);if(h().default.checkGate({gateName:"collection_group_reducer_visible"})){return{type:"groups",version:"v2",groupBy:c,groupSortPreference:l,limit:a}}const d=l.reduce(((e,t)=>(0,r().eF)(t)?e+1:e),0);return{type:"groups",version:void 0,groupBy:c,groupSortPreference:l.map((e=>e.value)),limit:a+d}}function P(e,t){const o=g().Xh(e),n=t.start_week_on??0;return(0,r().ib)(o)&&"week"===o.groupBy?o.startDayOfWeek=n:"formula"===o.type&&(0,r().ib)(o.groupBy)&&"week"===o.groupBy.groupBy&&(o.groupBy.startDayOfWeek=n),o}function A(e,t,o){const n=e.filter((e=>!(0,r().ZH)(e,t))),i=n.filter((e=>!(0,r().eF)(e))),a=n.filter((e=>(0,r().eF)(e)));return[...i.slice(0,o-1),t,...i.slice(o-1),...a]}function R(e,t){const o=e.filter((e=>!(0,r().ZH)(e,t))),n=o.filter((e=>!(0,r().eF)(e))),i=o.filter((e=>(0,r().eF)(e)));return[...n,t,...i]}function B(e){return!e.device.isPhone&&(e.isFullScreen||e.isRootChild)}function E(e){const{schema:t,groupBy:o,schemaGroups:a,reducerResults:l,relativeVariableResult:c,getRecordModel:d,viewAppConfigUri:u,allowedCollectionStores:p,renderGroupsFromAggregationArgs:m,removeUncategorized:f}=e;if(!o)return[];const v=t[o.property];if(!v||!(0,r().LG)(v))return[];const h=new Set(p.map((e=>e.id))),b=[...e.formatGroups,...a&&!l?a.map((e=>({property:o.property,value:e}))):[]];let y;if("manual"!==(0,r().mu)(o).type||m){let e=l;l&&m&&(e=function(e,t){const o=t.aggregationResults,n=t.yAxisSortOrder;return o&&n?g().Xo(e,(e=>{var o;const n=e.value,i=(0,r().Hd)(n);return null===(o=t.groupTotals.get(i))||void 0===o?void 0:o.total}),[n]):e}(l,m));const t=new Map;for(const o of b)t.set((0,r().mD)(o),o);y=e?e.map((e=>{let{value:n}=e;return t.get((0,r().Hd)(n))||{property:o.property,value:n}})):[];for(const o of b)y.push(o)}else{if(y=b,l)for(const{value:e}of l){const t={property:o.property,value:e};y.push(t)}if(u===n().sV){const t=y.map((e=>({value:e.value,type:e.value.type,title:void 0,total:0,aggregationState:void 0})));y=(0,s().gd)(t,e.formatGroups.map((e=>e.value))).map((e=>({property:o.property,value:e.value})))}}if(l){if(o.hideEmptyGroups){const e=new Set,t=new Set;for(const o of l){const n=(0,r().Hd)(o.value);0===o.total?t.add(n):e.add(n)}y=y.map((o=>{const n=(0,r().mD)(o);if(t.has(n))return{...o,emptyHidden:!0};if(e.has(n)){const e={...o};return delete e.emptyHidden,e}return o}))}else y=y.map((e=>{if(e.emptyHidden){const t={...e};return delete t.emptyHidden,t}return e}));y=u===n().sV&&o.property===n().Es.TaskToSprintRelation?y.map((e=>"relation"===e.value.type&&(0,r().t2)(e.value.value)||void 0===e.value||void 0===e.value.value?e:{...e,hiddenByDefault:!0})):y.map((e=>{if(e.hiddenByDefault){const t={...e};return delete t.hiddenByDefault,t}return e}))}const S=y.filter((e=>{if(e.property!==o.property)return!1;const t=e.value;if(t.type!==v.type)return!1;if(f&&void 0===t.value)return!1;if(m&&m.hideZeroAggregations){var n;const e=(0,r().Hd)(t),o=null===(n=m.groupTotals.get(e))||void 0===n?void 0:n.total;if(void 0!==o&&0===o)return!1}if(void 0===t.value)return!(0,_().Dt)(v);if("formula"===v.type){const t=(0,i().getFormulaPropertySchemaResultType)(v);if(!v.formula&&!v.formula2||"unknown"===t)return!1;if("formula"!==e.value.type||"formula"!==o.type)return!1;const n=e.value.value;if(!n)return!0;if("block"===t&&"text"===n.type)return!0;if(n.type!==t)return!1;const a=o.groupBy;return"relation"===a.type?function(e,t,o){if(!e||!e.value)return!0;if("relation"!==t.type||"relation"!==e.type)return!1;if((0,r().t2)(e.value))return!1;const n=o(e.value);return null==n?void 0:n.alive}(n,{...a,property:o.property},d):D({groupValue:n,groupBy:{property:o.property,...a},getRecordModel:d,relativeVariableResult:c})}return!("location"===t.type&&t.value&&!h.has(t.value.id))&&D({groupValue:t,groupBy:o,getRecordModel:d,relativeVariableResult:c,propertySchema:v})}));return g().mN(S,(e=>(0,r().mD)(e)))}function D(e){const{groupValue:t,groupBy:o,getRecordModel:n,relativeVariableResult:i,propertySchema:a}=e;if(!t.value)return!0;const s=o.type;if("formula"===s)return!1;if("select"===s){if("select"!==(null==a?void 0:a.type))return!1;return(a.options??[]).some((e=>e.value===t.value))}if("multi_select"===s){if("multi_select"!==(null==a?void 0:a.type))return!1;return(a.options??[]).some((e=>e.value===t.value))}if("status"===s){if("status"!==(null==a?void 0:a.type))return!1;const e=a.options??[],n=a.groups??[];if("status"!==t.type)return!1;const{value:i}=t;return"by_group"===i.type?("status"!==s||"group"===o.groupBy)&&n.some((e=>e.name===i.group)):"by_option"===i.type&&(("status"!==s||"option"===o.groupBy)&&e.some((e=>e.value===i.option)))}return(0,r().A1)(s)?function(e,t){if(!e||!e.value)return!0;if(!(0,r().ib)(t)||!(0,r().Mc)(e)||!t.groupBy)return!1;const o=e.value.type;if("relative"===t.groupBy)return"today"===o||"yesterday"===o||"last_7_days"===o||"last_30_days"===o||"tomorrow"===o||"next_7_days"===o||"next_30_days"===o||"month"===o;if("day"===t.groupBy)return"day"===o;if("week"===t.groupBy)return"week"===o;if("month"===t.groupBy)return"month"===o;if("year"===t.groupBy)return"year"===o;(0,v().t1)(t.groupBy)}(t,o):(0,r().HB)(s)?function(e,t){if(!e||!e.value)return!0;if(!(0,r().aB)(t)||!(0,r().R7)(e)||!t.groupBy)return!1;const o=e.value.type;if("alphabet_prefix"===t.groupBy)return"alphabet_prefix"===o||"other"===o;if("exact"===t.groupBy)return"exact"===o;(0,v().t1)(t.groupBy)}(t,o):"number"===s?function(e,t){if(!e||!e.value)return!0;if("number"!==t.type||"number"!==e.type)return!1;const o=e.value;if("out_of_range"===o.type)return o.start===t.start&&o.end===t.end;if("range"===o.type){const e=(0,r().n6)(o.start,t.start,t.end,t.size);return e&&"range"===e.type&&e.start===o.start}if("unique"===o.type){const e=(0,r().n6)(o.value,t.start,t.end,t.size,t.groupBy);return e&&"unique"===e.type&&e.value===o.value}(0,v().t1)(o)}(t,o):"relation"===s?"relation"===(null==a?void 0:a.type)&&function(e,t,o,n,i){var a;if(!t||!t.value)return!0;if("relation"!==o.type||"relation"!==t.type)return!1;if((0,r().t2)(t.value)){var s,l;const o=e.collection_pointer&&n(e.collection_pointer);if(!i||!o)return!1;const r=null==o||null===(s=o.getFormat())||void 0===s?void 0:s.app_config_uri,a=null===(l=i[o.id])||void 0===l?void 0:l[t.value.value.variable],c=null==o?void 0:o.getSchema();return(0,b().Sh)(c,r)&&a}const c=n(t.value);if(!c)return!1;const u=(0,d().ky)({block:c,getRecordModel:n});if(i&&u){if((0,r().qQ)({relativeVariableValues:i[null==u?void 0:u.id],pointer:c.pointer}).length>0)return!1}return Boolean(c.alive&&((null==u?void 0:u.id)===e.collection_id||(null==u?void 0:u.id)===(null===(a=e.collection_pointer)||void 0===a?void 0:a.id)))}(a,t,o,n,i):"location"===s?function(e,t,o){if(!e||!e.value)return!0;if("location"!==t.type||"location"!==e.type)return!1;const n=o(e.value);return Boolean(n)}(t,o,n):!(!(0,r().pd)(s)&&"checkbox"!==s)||void(0,v().t1)(s)}function U(e){var t;const o=null===(t=e.board_columns_by)||void 0===t?void 0:t.disableBoardColorColumns;return void 0===o||o}function F(e){const{environment:t,groupFormat:o,schema:i,format:s,theme:l,ignoreDisableColorColumns:c}=e,d=!c&&U(s);if(s.collection_group_by||!d){if(o){const e=i[o.property];if(e&&!d){const i=o.value;if((0,a().cu)(e)){const t=(e.options||[]).find((e=>e.value===i.value));return(0,f().bw)(l,null==t?void 0:t.color)}if("status"===e.type&&"status"===i.type){var u,p;let t;if("by_group"===(null===(u=i.value)||void 0===u?void 0:u.type)){var m;const o=i.value.group;var g;if(t=null===(m=e.groups)||void 0===m||null===(m=m.find((e=>e.name===o)))||void 0===m?void 0:m.color,void 0===t)t=null===(g=(0,a().I4)(e.name,y().Z.getIntl()).groups)||void 0===g||null===(g=g.find((e=>e.name.toLowerCase()===o.toLowerCase())))||void 0===g?void 0:g.color}else if("by_option"===(null===(p=i.value)||void 0===p?void 0:p.type)){var v;const o=i.value.option;t=null===(v=e.options)||void 0===v||null===(v=v.find((e=>e.value===o)))||void 0===v?void 0:v.color}return(0,f().bw)(l,t)}if("relation"===e.type&&"relation"===i.type&&(0,r().t2)(i.value)){const o=(0,S().gO)(e,t),r=(0,S().uJ)(e,t),a=null==o?void 0:o.getPropertyMapping(),s=null==a?void 0:a[n().b0.StatusV2],c=r&&s&&r[s];if(c&&"status"===c.type){var h;const e=i.value.value.variable,t=null===(h=c.options)||void 0===h||null===(h=h.find((t=>t.id===e)))||void 0===h?void 0:h.color;if(t)return(0,f().bw)(l,t)}}}}return(0,f().bw)(l,"default")}}function N(e){return!("board"===e.viewType&&"board_columns_by"===e.groupByKey)&&"chart"!==e.viewType}function V(e){const{stores:t,collectionContextStore:o}=e,n=o.collectionStoresStore.state.map((e=>e.id));return"collectionTypedView"===o.contextType?t.filter((e=>{const t=e.getAssociatedCollectionStore();return t&&n.includes(t.id)})):t}const L=(0,m().vU)({manual:{defaultMessage:"Manual",id:"database.viewSettings.groupTab.sortType.manual"},oldestFirst:{defaultMessage:"Oldest first",id:"database.viewSettings.groupTab.sortType.chronological"},alphabetical:{defaultMessage:"Alphabetical",id:"database.viewSettings.groupTab.sortType.alphabetical"},ascending:{defaultMessage:"Ascending",id:"database.viewSettings.groupTab.sortType.ascending"},newestFirst:{defaultMessage:"Newest first",id:"database.viewSettings.groupTab.sortType.reverseChronological"},reverseAlphabetical:{defaultMessage:"Reverse alphabetical",id:"database.viewSettings.groupTab.sortType.reverseAlphabetical"},descending:{defaultMessage:"Descending",id:"database.viewSettings.groupTab.sortType.descending"}});function O(e,t){return"manual"===t?L.manual:"ascending"===t?(0,r().ib)(e)||"formula"===e.type&&"date"===e.groupBy.type?L.oldestFirst:(0,r().aB)(e)||"relation"===e.type||"select"===e.type||"multi_select"===e.type||"formula"===e.type&&"text"===e.groupBy.type?L.alphabetical:L.ascending:"descending"===t?(0,r().ib)(e)||"formula"===e.type&&"date"===e.groupBy.type?L.newestFirst:(0,r().aB)(e)||"relation"===e.type||"select"===e.type||"multi_select"===e.type||"formula"===e.type&&"text"===e.groupBy.type?L.reverseAlphabetical:L.descending:void(0,v().t1)(t)}},270315:(e,t,o)=>{o.d(t,{yZ:()=>C,_W:()=>W,Sb:()=>q,_Y:()=>N,DL:()=>U,oy:()=>F,Km:()=>V,Bh:()=>E,aW:()=>D,r_:()=>G,W3:()=>K,TP:()=>z,k4:()=>$,eI:()=>O,Z9:()=>P,BX:()=>J,JI:()=>L,K8:()=>Z,Dt:()=>Q,wP:()=>H,tH:()=>X,Rb:()=>R,Gu:()=>Y,SO:()=>T});o(821057),o(267602),o(916054),o(653476),o(470928),o(228244);var n=()=>o(156642),i=()=>o(15607),r=()=>o(226413),a=()=>o(532850),s=()=>o(580397),l=()=>o(989478),c=()=>o(255393),d=()=>o(955620),u=()=>o(788860),p=()=>o(527278),m=()=>o(909679),f=()=>o(749115),g=(o(667294),o(785893));const v=(0,o(827282).IU)("collectionPieChart",{viewBox:"0 0 18 17",svg:(0,g.jsx)("path",{d:"M9 16.4297C4.58594 16.4297 0.929688 12.7812 0.929688 8.35938C0.929688 3.94531 4.57812 0.289062 8.99219 0.289062C13.4141 0.289062 17.0703 3.94531 17.0703 8.35938C17.0703 12.7812 13.4141 16.4297 9 16.4297ZM9 14.8438C10.5469 14.8438 11.9688 14.3047 13.0781 13.4062L8.59375 9.03125C8.44531 8.88281 8.38281 8.73438 8.38281 8.52344V1.90625C5.07812 2.21094 2.52344 4.96875 2.52344 8.35938C2.52344 11.9531 5.40625 14.8438 9 14.8438ZM9.625 7.57031L14.4375 4.8125C13.3828 3.21094 11.6484 2.10156 9.625 1.90625V7.57031ZM10.1406 8.71094L13.9922 12.5078C14.9219 11.3828 15.4844 9.9375 15.4844 8.35938C15.4844 7.49219 15.3125 6.67188 15.0078 5.92188L10.1406 8.71094Z"})});var h=()=>o(26796),_=()=>o(876822),b=()=>o(890324),y=()=>o(897257),S=()=>o(982855),w=()=>o(549813),k=()=>o(91502),I=()=>o(90065);const C=32,x=(0,u().vU)({title:{defaultMessage:"Title",id:"database.propertyTypeName.title"},text:{defaultMessage:"Text",id:"database.propertyTypeName.text"},number:{defaultMessage:"Number",id:"database.propertyTypeName.number"},url:{defaultMessage:"URL",id:"database.propertyTypeName.url"},select:{defaultMessage:"Select",id:"database.propertyTypeName.select"},multi_select:{defaultMessage:"Multi-select",id:"database.propertyTypeName.multi_select"},status:{defaultMessage:"Status",id:"database.propertyTypeName.status"},person:{defaultMessage:"Person",id:"database.propertyTypeName.person"},email:{defaultMessage:"Email",id:"database.propertyTypeName.email"},phone_number:{defaultMessage:"Phone",id:"database.propertyTypeName.phone_number"},date:{defaultMessage:"Date",id:"database.propertyTypeName.date"},file:{defaultMessage:"Files & media",id:"database.propertyTypeName.file"},checkbox:{defaultMessage:"Checkbox",id:"database.propertyTypeName.checkbox"},formula:{defaultMessage:"Formula",id:"database.propertyTypeName.formula"},relation:{defaultMessage:"Relation",id:"database.propertyTypeName.relation"},rollup:{defaultMessage:"Rollup",id:"database.propertyTypeName.rollup"},created_time:{defaultMessage:"Created time",id:"database.propertyTypeName.created_time"},created_by:{defaultMessage:"Created by",id:"database.propertyTypeName.created_by"},last_edited_time:{defaultMessage:"Last edited time",id:"database.propertyTypeName.last_edited_time"},last_edited_by:{defaultMessage:"Last edited by",id:"database.propertyTypeName.last_edited_by"},last_visited_time:{defaultMessage:"Last visited time",id:"database.propertyTypeName.last_visited_time"},button:{defaultMessage:"Button",id:"database.propertyTypeName.button"},auto_increment_id:{defaultMessage:"ID",id:"database.propertyTypeName.auto_increment_id"},location:{defaultMessage:"Location",id:"database.propertyTypeName.location"},verification:{defaultMessage:"Verification",id:"database.propertyTypeName.verification"},ai_summary:{defaultMessage:"AI summary",id:"database.propertyTypeName.text.summarizeWithAi"},ai_custom_prompt:{defaultMessage:"AI custom autofill",id:"database.propertyTypeName.text.customPromptWithAI"},ai_extract:{defaultMessage:"AI key info",id:"database.propertyTypeName.text.extractInfoWithAI"},ai_translate:{defaultMessage:"AI translation",id:"database.propertyTypeName.text.translateWithAI"},ai_keywords:{defaultMessage:"AI keywords",id:"database.propertyTypeName.text.keywordsWithAI"}}),T={title:p().Z.formatMessage(x.title),text:p().Z.formatMessage(x.text),number:p().Z.formatMessage(x.number),url:p().Z.formatMessage(x.url),select:p().Z.formatMessage(x.select),multi_select:p().Z.formatMessage(x.multi_select),status:p().Z.formatMessage(x.status),person:p().Z.formatMessage(x.person),email:p().Z.formatMessage(x.email),phone_number:p().Z.formatMessage(x.phone_number),date:p().Z.formatMessage(x.date),file:p().Z.formatMessage(x.file),checkbox:p().Z.formatMessage(x.checkbox),formula:p().Z.formatMessage(x.formula),relation:p().Z.formatMessage(x.relation),rollup:p().Z.formatMessage(x.rollup),created_time:p().Z.formatMessage(x.created_time),created_by:p().Z.formatMessage(x.created_by),last_edited_time:p().Z.formatMessage(x.last_edited_time),last_edited_by:p().Z.formatMessage(x.last_edited_by),last_visited_time:p().Z.formatMessage(x.last_visited_time),button:p().Z.formatMessage(x.button),auto_increment_id:p().Z.formatMessage(x.auto_increment_id),location:p().Z.formatMessage(x.location),verification:p().Z.formatMessage(x.verification),ai_summary:p().Z.formatMessage(x.ai_summary),ai_custom_prompt:p().Z.formatMessage(x.ai_custom_prompt),ai_extract:p().Z.formatMessage(x.ai_extract),ai_translate:p().Z.formatMessage(x.ai_translate),ai_keywords:p().Z.formatMessage(x.ai_keywords)},M=(0,u().vU)({text:{defaultMessage:"A single line of text.",id:"database.propertyTypeDescription.text"},number:{defaultMessage:"A number, with options to format as currency, percent, and more.",id:"database.propertyTypeDescription.number"},url:{defaultMessage:"A link to a page on the web.",id:"database.propertyTypeDescription.url"},select:{defaultMessage:"Select from a list of options.",id:"database.propertyTypeDescription.select"},multi_select:{defaultMessage:"Tag with values from a list of options.",id:"database.propertyTypeDescription.multi_select"},status:{defaultMessage:"Tag with a list of custom options with groups",id:"database.propertyTypeDescription.status"},person:{defaultMessage:"Reference a person on your team.",id:"database.propertyTypeDescription.person"},email:{defaultMessage:"Reference an email address.",id:"database.propertyTypeDescription.email"},phone_number:{defaultMessage:"Reference a phone number.",id:"database.propertyTypeDescription.phone_number"},date:{defaultMessage:"A date, with options to format and include time.",id:"database.propertyTypeDescription.date"},file:{defaultMessage:"Upload files and images.",id:"database.propertyTypeDescription.file"},checkbox:{defaultMessage:"Track status with a single checkbox.",id:"database.propertyTypeDescription.checkbox"},formula:{defaultMessage:"Compute a formula using other properties of a page.",id:"database.propertyTypeDescription.formula"},relation:{defaultMessage:"Allow pages in this database to reference pages in another.",id:"database.propertyTypeDescription.relation"},rollup:{defaultMessage:"Display and summarize data from a relation.",id:"database.propertyTypeDescription.rollup"},created_time:{defaultMessage:"Reference the date and time a page was created.",id:"database.propertyTypeDescription.created_time"},created_by:{defaultMessage:"Reference the person that created a page.",id:"database.propertyTypeDescription.created_by"},last_edited_time:{defaultMessage:"Reference the date and time a page was last edited.",id:"database.propertyTypeDescription.last_edited_time"},last_edited_by:{defaultMessage:"Reference the person that last edited a page.",id:"database.propertyTypeDescription.last_edited_by"},last_visited_time:{defaultMessage:"Reference the date and time a page was last visited by you.",id:"database.propertyTypeDescription.last_visited_time"},button:{defaultMessage:"A clickable button that can be configured to perform any action.",id:"database.propertyTypeDescription.button"},auto_increment_id:{defaultMessage:"An auto-increment ID.",id:"database.propertyTypeDescription.auto_increment_id"},location:{defaultMessage:"A location.",id:"database.propertyTypeDescription.location"},verification:{defaultMessage:"Verified status.",id:"database.propertyTypeDescription.verification"}});function P(e){return p().Z.formatMessage(M[e])}const A=["select","multi_select","status","person","date","created_time","created_by","last_edited_time","last_edited_by"];function R(e){return A.includes(e.type)}const B=(0,u().vU)({tableDisplayName:{defaultMessage:"Table",id:"collectionHelpers.table.displayName"},boardDisplayName:{defaultMessage:"Board",id:"collectionHelpers.board.displayName"},calendarDisplayName:{defaultMessage:"Calendar",id:"collectionHelpers.calendar.displayName"},listDisplayName:{defaultMessage:"List",id:"collectionHelpers.list.displayName"},galleryDisplayName:{defaultMessage:"Gallery",id:"collectionHelpers.gallery.displayName"},timelineDisplayName:{defaultMessage:"Timeline",id:"collectionHelpers.timline.displayName"},pageDisplayName:{defaultMessage:"Page",id:"collectionHelpers.page.displayName"},chartDisplayName:{defaultMessage:"Chart",id:"collectionHelpers.chart.displayName"},formEditorDisplayName:{defaultMessage:"Form",id:"collectionHelpers.formEditor.displayName"},chatDisplayName:{defaultMessage:"Chat",id:"collectionHelpers.chat.displayName"}}),E={table:p().Z.formatMessage(B.tableDisplayName),board:p().Z.formatMessage(B.boardDisplayName),calendar:p().Z.formatMessage(B.calendarDisplayName),list:p().Z.formatMessage(B.listDisplayName),gallery:p().Z.formatMessage(B.galleryDisplayName),timeline:p().Z.formatMessage(B.timelineDisplayName),page:p().Z.formatMessage(B.pageDisplayName),chart:p().Z.formatMessage(B.chartDisplayName),form_editor:p().Z.formatMessage(B.formEditorDisplayName),feed:"Feed",chat:p().Z.formatMessage(B.chatDisplayName)},D={table:o(676232).t,board:o(241227).i,calendar:o(697288).N,list:f().O,gallery:o(118329).n,timeline:o(809273)._,page:f().O,chart:v,form_editor:m().E,feed:m().E,chat:o(997141).n},U={table:void 0,board:"board_cover",calendar:void 0,list:void 0,gallery:"gallery_cover",timeline:void 0,page:void 0,chart:void 0,form_editor:void 0,feed:void 0,chat:void 0},F={table:void 0,board:"board_cover_size",calendar:void 0,list:void 0,gallery:"gallery_cover_size",timeline:void 0,page:void 0,chart:void 0,form_editor:void 0,feed:void 0,chat:void 0},N={table:void 0,board:"board_cover_aspect",calendar:void 0,list:void 0,gallery:"gallery_cover_aspect",timeline:void 0,page:void 0,chart:void 0,form_editor:void 0,feed:void 0,chat:void 0},V={table:!0,board:!1,calendar:!1,list:!0,gallery:!0,timeline:!0,page:!1,chart:!0,form_editor:!1,feed:!1,chat:!1};function L(e){const t=e.getType(),o=e.getTitleStore();return t&&(0,n().dM)(t)&&o?o:e.getBlockTitleStore()}function O(e){let t=[];switch(e.viewType){case"table":t=e.format.table_properties??[];break;case"gallery":t=e.format.gallery_properties??[];break;case"board":t=e.format.board_properties??[];break;case"calendar":t=e.format.calendar_properties??[];break;case"list":t=e.format.list_properties??[];break;case"timeline":t=e.format.timeline_properties??[];break;case"page":t=e.format.collection_page_properties??[]}return t.filter((t=>t.visible===e.visible))}function Z(e,t){let o=[];switch(t){case"gallery":e.gallery_properties&&(o=e.gallery_properties??[]);break;case"board":e.board_properties&&(o=e.board_properties??[])}const n=o.find((e=>{let{property:t}=e;return"title"===t}));return!!n&&Boolean(n.visible)}const j=["text","number","select","multi_select","status","date","person","file","checkbox","url","email","phone_number","formula","relation","rollup","created_time","created_by","last_edited_time","last_edited_by","button","auto_increment_id","location","verification"];function K(e){let{collectionContextStore:t,environment:o}=e;const n=t.collectionStore();if(!n)return[];const i=b().Z.getMode(o,n);return(0,S().mX)(o,i,n)?["ai_summary","ai_custom_prompt","ai_translate","ai_keywords"]:[]}function z(e){let{collectionContextStore:t,environment:o}=e;return j.filter((e=>{if("location"===e&&(!(0,k().QI)()||"collectionTypedView"!==t.contextType))return!1;if("verification"===e){var o,n;const e=Boolean(null===(o=t.collectionViewBlockStore())||void 0===o?void 0:o.isCollectionViewPageWithContent());if((0,I().h$)()&&!e)return!1;const i=null===(n=t.collectionStore())||void 0===n?void 0:n.getSchema();if(!i||H(i,"verification"))return!1}return"auto_increment_id"!==e||!h().Z.state.isOpen}))}function H(e,t){for(const n in e){var o;if((null===(o=e[n])||void 0===o?void 0:o.type)===t)return!0}return!1}function q(e){let{propertySchema:t,property:o,blockStores:n,collectionSchema:s}=e;return!(0===n.length||!(0,a().GL)(t))&&((0,r().iE)(t)?n.every((e=>W(t,e,s))):!(0,r().ZY)(t.type)&&!(0,i().w)(o))}function W(e,t,o){const n=e.verifier_property;if(!n)return!1;const i=t.getPropertyValue(n),r=(0,a().DW)({textValue:i,propertySchema:o[n],blockCreatorPointer:t.getCreatedByPointer()}),s=_().default.state.currentUserRootStore;return!!s&&r.some((e=>e.id===s.id&&e.table===l().KJ))}function G(e){const{collectionStore:t,environment:o,intl:n,queryForFilter:i}=e;if(""===i)return!0;return(0,w().vU)({environment:o,intl:n,store:t}).toUpperCase().includes(i.toUpperCase())}function $(){var e;const t=(null===(e=y().subscriptionDataStoreInstance.state)||void 0===e?void 0:e.addOns)??[];return(0,c().de)(t)}function Q(e){return"status"===e.type&&void 0!==e.defaultOption||"person"===e.type&&void 0!==e.default}function Y(e){const{collectionContextStore:t,newValue:o,property:n}=e,i=J(t),r=Object.keys(i).find((e=>{var t;return e!==n&&(null===(t=i[e])||void 0===t?void 0:t.name)===o}));return Boolean(r)}function J(e){const t=e.collectionStore();return t?t.getSchema():e.normalizedSchemaStore.state||{}}function X(e,t,o,n){var i;const r=o.getAssociatedCollectionStore();if(!r||"collection"!==r.table||!r.getSchema())return!1;if("text"!==(null===(i=(0,a().Qm)({schema:r.getSchema(),property:n}))||void 0===i?void 0:i.type))return!0;return(0,d().eeV)((0,s().Bb)({discussionContextData:e.getContext()??[],discussionType:e.getType()??"default",discussionId:e.id,intl:t})).length===(0,d().eeV)(o.getPropertyStore(n).getValue()).length}},605890:(e,t,o)=>{o.d(t,{LQ:()=>u,Ls:()=>l,RI:()=>p,RO:()=>m});var n=()=>o(788860),i=()=>o(929071),r=()=>o(39530),a=()=>o(466043),s=()=>o(527278);const l={table:"side_peek",board:"side_peek",calendar:"center_peek",list:"side_peek",gallery:"center_peek",timeline:"side_peek",page:"side_peek",chart:"side_peek",form_editor:"side_peek",feed:"side_peek",chat:"side_peek"},c=(0,n().vU)({side_peek:{defaultMessage:"Side peek",id:"database.viewPropertiesMenu.peekMode.sidePeek"},center_peek:{defaultMessage:"Center peek",id:"database.viewPropertiesMenu.peekMode.centerPeek"},full_page:{defaultMessage:"Full page",id:"database.viewPropertiesMenu.peekMode.fullPage"}}),d=(0,n().vU)({side_peek:{defaultMessage:"Open pages on the side. Keeps the view behind interactive.",id:"database.viewPropertiesMenu.peekMode.description.sidePeek"},center_peek:{defaultMessage:"Open pages in a focused, centered modal.",id:"database.viewPropertiesMenu.peekMode.description.centerPeek"},full_page:{defaultMessage:"Open pages in full page.",id:"database.viewPropertiesMenu.peekMode.description.fullPage"}});function u(e){switch(e){case"side_peek":return s().Z.formatMessage(c.side_peek);case"center_peek":return s().Z.formatMessage(c.center_peek);case"full_page":return s().Z.formatMessage(c.full_page)}}function p(e){switch(e){case"side_peek":return s().Z.formatMessage(d.side_peek);case"center_peek":return s().Z.formatMessage(d.center_peek);case"full_page":return s().Z.formatMessage(d.full_page)}}function m(e){switch(e){case"side_peek":return a().y;case"center_peek":return i().Q;case"full_page":return r().M}}},712334:(e,t,o)=>{o.d(t,{Uk:()=>a,Xd:()=>r,j$:()=>i});var n=()=>o(696459);const i=(0,n().AO)((e=>"event"===e||"notification_event"===e||"recurrence"===e?{true:e}:{false:e}));function r(e){const t=e.getTrigger();return(0,n().$K)(t)&&i(t.type)}function a(e){return"event"===e||"notification_event"===e?"event":"recurrence"===e?"recurrence":void(0,n().t1)(e)}},582835:(e,t,o)=>{o.d(t,{A7:()=>B,Af:()=>U,Av:()=>C,CJ:()=>T,Cr:()=>ee,EK:()=>W,F0:()=>k,Hw:()=>w,JR:()=>Z,Kg:()=>J,Ll:()=>z,Ns:()=>E,SM:()=>D,T2:()=>$,bX:()=>x,dI:()=>M,fd:()=>O,g0:()=>j,gY:()=>S,kC:()=>A,kG:()=>K,ko:()=>H,ls:()=>X,nK:()=>Q,qb:()=>Y,uU:()=>V,vJ:()=>q,wI:()=>te,wP:()=>G,wf:()=>I,xb:()=>P,yU:()=>N,yr:()=>R,zV:()=>F});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(30005),o(241792),o(228244);var n=()=>o(156642),i=()=>o(455947),r=()=>o(226413),a=()=>o(532850),s=()=>o(943181),l=()=>o(998411),c=()=>o(426546),d=()=>o(513670),u=()=>o(887430),p=()=>o(141735),m=()=>o(472753),f=()=>o(32969),g=()=>o(972776),v=()=>o(749826),h=()=>o(826955),_=()=>o(718959),b=()=>o(615676),y=()=>o(527278);const S=4,w=24,k=10;function I(e){var t;const o=null===(t=e.collectionStore())||void 0===t?void 0:t.getFormat().subitem_property,n=e.collectionStore();if(!n||!n.getSchema()||!o)return;const i=n.getSchema()[o];if(!i||"relation"!==i.type||r().F0(i)!==n.id)return;const a=i.property;if(!a)return;const s=n.getSchema()[a];return s&&"relation"===s.type?{property:o,inverse:a}:void 0}function C(e){return"table"===e||"timeline"===e||"list"===e}function x(e){var t;const o=(0,u().fm)(e),n=null==o||null===(t=o.collectionViewStore())||void 0===t?void 0:t.getType();return Boolean((null==o?void 0:o.currentSubitemFormatStoreForUiDisplayStore.state)&&n&&C(n))}function T(e){const{store:t,subitemFormat:o,propertySchema:n}=e,i=t.getPropertyValue(o.property),r=(0,a().rq)(i),s=t.getRecordModel;return a().j$({relationValue:r,propertySchema:n,getRecordModel:s})}function M(e){const{store:t,subitemFormat:o,originAction:n}=e,i=t.getPropertyValue(o.property),r=(0,a().rq)(i),s=t.getRecordModel;return a().kc({relationValue:r,getRecordModel:s,originAction:n})}function P(e){const{store:t,subitemFormat:o,propertySchema:n}=e,i=t.getPropertyValue(o.inverse),r=(0,a().rq)(i),s=t.getRecordModel;return a().j$({relationValue:r,propertySchema:n,getRecordModel:s})}function A(e){const{store:t,collectionStore:o,collectionContextStore:n,subitemFormat:r,subitemPathKey:a,propertyFilters:s,combinatorFilter:c,currentUserId:d,resultCache:u,regExpCache:p,formulasModule:m}=e,f=o.getSchema()[r.property];if(!f||"relation"!==f.type)return[];const g=T({store:t,subitemFormat:r,propertySchema:f});if(0===g.length)return[];let v=g.filter((e=>!a.includes(e.id))).map((e=>h().G.createChildStore(t,e)));const S=n.relativeVariableStore.state,w={schema:n.normalizedSchemaStore.state,userId:d,userTimeZone:(0,l().r)(),userStartOfWeek:_().AK.state,intl:y().Z.getIntl(),relativeVariableResult:S,currentPageInRelatedCollection:n.viewsModuleContextStore.currentPageInRelatedCollectionId(),collectionFeatureGates:(0,b().W)()};if(s&&s.length>0||c){const e=(0,i().q)({filter:{filters:c?[...s.filter((e=>!(0,i().Oo)(e.filter))).map((e=>e.filter)),c]:s.filter((e=>!(0,i().Oo)(e.filter))).map((e=>e.filter)),operator:"and"},propertyMapping:void 0,context:w});v=v.filter((t=>L({blockStore:t,compiledFilter:e,subitemFormat:r,propertySchema:f,visitedIds:new Set,resultCache:u,regExpCache:p,formulasModule:m})))}return v}function R(e,t){var o,n;const i=e.currentSubitemFormatStoreForUiDisplayStore.state;if(!i)return new(c().DG)([]);const a=e.collectionStore();if(!a)return new(c().DG)([]);const u=e.currentSortsStore.state,p=a.getRecordModel,m=e.formulasCodeStore.state,f=s().$m({userTimeZone:(0,l().r)(),intl:y().Z.getIntl(),userSorts:u,userId:e.getCurrentUserId(),apiSorts:[],schema:e.normalizedSchemaStore.state,formulasModule:m}),g=e.normalizedSchemaStore.state[i.property],h=g&&"relation"===g.type&&r().F0(g)===(null===(o=e.collectionStore())||void 0===o?void 0:o.id)&&g.property,_=null===(n=e.collectionViewStore())||void 0===n?void 0:n.getType(),S=!h||_&&C(_)?void 0:{property:h,filter:{operator:"is_empty"}},w=[...S&&h?[{id:h,filter:S}]:[],...e.currentPropertyFiltersStore.state],k=e.currentCombinatorFilterStore.state,I=e.subitemExpandedStore.state,x=d().xH(e.groupsStore.getAllGroupStates().map((e=>e.resultsStore.state))),T=new Map,M=new Map;return new(c().DG)(x.map((o=>{const n=D(o);return(0,c().MW)(n,(o=>{let{store:n,pathKey:r}=o;const l=I.get(r);if(!l)return{value:{store:n,pathKey:r},children:[]};const c=function(e){const{store:t,collectionStore:o,collectionContextStore:n,subitemFormat:i,querySorts:r,limit:a,subitemPathKey:l,propertyFilters:c,combinatorFilter:u,currentUserId:p,getRecordModel:m,resultCache:f,regExpCache:g,formulasModule:h}=e,_=A({store:t,collectionStore:o,collectionContextStore:n,subitemFormat:i,subitemPathKey:l,propertyFilters:c,combinatorFilter:u,currentUserId:p,resultCache:f,regExpCache:g,formulasModule:h});if(!_)return[];const y=new(s().EO)([...r,...s().Xm(_.map((e=>e.id))??[])]),S=(0,b().W)();_.forEach((e=>{y.updateBlock({block:e.getModel(),schema:o.getSchema(),propertyMapping:void 0,getRecordModel:m,resultCache:f,regExpCache:g,experimentService:v().default,collectionFeatureGates:S})}));const w=_.map((e=>e.id))??[],k=s().Qx(w,y),I={};return k.forEach(((e,t)=>{I[e]=t})),d().MR(_,(e=>I[e.id])).slice(0,a)}({store:n,collectionStore:a,collectionContextStore:e,subitemFormat:i,querySorts:f,limit:l.limit,subitemPathKey:r,propertyFilters:w,combinatorFilter:k,currentUserId:t,getRecordModel:p,resultCache:T,regExpCache:M,formulasModule:m}).map((e=>({store:e,pathKey:F(r,e)})));return{value:{store:n,pathKey:r},children:c}}))})))}function B(e,t){const o=e?[e]:[],n=t.groupsStore.getGroupState(o);if(!n)return[];const i=n.resultsStore.state;if(!t.currentSubitemFormatStoreForUiDisplayStore.state)return i;const r=[],a=t.subitemTreeStore.state.children.filter((e=>i.includes(e.value.store)));for(const s of a)N({results:r,tree:s});return r}function E(e){return(0,c().CY)(e.children[e.children.length-1])}function D(e){return{store:e,pathKey:U([e.pointer])}}function U(e){return e.map((e=>e.id)).join(",")}function F(e,t){return e?`${e},${t.id}`:t.id}function N(e){const{results:t,tree:o}=e;t.push(o.value.store);for(const n of o.children)N({results:t,tree:n})}function V(e){var t,o;const{block:n,collectionContextStore:i}=e,s=null==i||null===(t=i.currentSubitemFormatStoreForUiDisplayStore.state)||void 0===t?void 0:t.inverse;if(!s)return!1;const l=i.normalizedSchemaStore.state[s];if(!l||!(0,r().p_)(l))return!1;const c=null===(o=i.collectionViewBlockStore())||void 0===o?void 0:o.getRecordModel;if(!c)return!1;return(0,a().Ds)({block:n,propertySchema:l,getRecordModel:c,collectionFeatureGates:(0,b().W)()}).length>0}function L(e){const{blockStore:t,compiledFilter:o,subitemFormat:n,propertySchema:i,visitedIds:r,resultCache:a,regExpCache:s,formulasModule:l}=e;r.add(t.id);const c=t.getModel();if(!c)return!1;if(o({block:c,getRecordModel:t.getRecordModel,propertyMapping:void 0,resultCache:a,regExpCache:s,experimentService:v().default,formulasModule:l}))return!0;const d=T({store:t,subitemFormat:n,propertySchema:i});return 0!==d.length&&d.map((e=>h().G.createChildStore(t,e))).filter((e=>!r.has(e.id))).some((e=>L({blockStore:e,compiledFilter:o,subitemFormat:n,propertySchema:i,visitedIds:r,resultCache:a,regExpCache:s,formulasModule:l})))}async function O(e){const{blockStore:t,compiledFilter:o,subitemFormat:n,propertySchema:i,subitemExpandedStore:r,pathKey:s,forceStoresToLoad:l,visitedIds:c,resultCache:d,regExpCache:u}=e;if(await t.load(),c.has(t.id))return;c.add(t.id);const m=l?await async function(e){const{store:t,subitemFormat:o,propertySchema:n}=e,i=t.getPropertyValue(o.property),r=(0,a().rq)(i);await Promise.all(r.map((e=>h().G.createChildStore(t,e).load())));const s=t.getRecordModel;return a().j$({relationValue:r,propertySchema:n,getRecordModel:s,includeDeleted:v().default.checkGate({gateName:"relations_show_deleted"}),includeInvalidCollection:v().default.checkGate({gateName:"relations_show_invalid_collection"}),includeNoAccess:v().default.checkGate({gateName:"relations_show_no_access"})})}({store:t,subitemFormat:n,propertySchema:i}):T({store:t,subitemFormat:n,propertySchema:i});if(0!==m.length){r.state.set(s,{isExpanded:!0,limit:20});for(const e of m){const a=h().G.createChildStore(t,e),m=a.getModel();if(!m)continue;const f=await p().F.formulas.load();o({block:m,getRecordModel:a.getRecordModel,propertyMapping:void 0,resultCache:d,regExpCache:u,experimentService:v().default,formulasModule:f})||await O({blockStore:a,compiledFilter:o,subitemFormat:n,propertySchema:i,subitemExpandedStore:r,pathKey:F(s,a),forceStoresToLoad:l,visitedIds:c,resultCache:d,regExpCache:u})}}}function Z(e){if(!e.collectionStore())return;const t=e.currentSubitemFormatStoreForCollectionStore.state,o=e.normalizedSchemaStore.state,n=(null==t?void 0:t.inverse)&&o[t.inverse],i=(null==t?void 0:t.property)&&o[t.property];if(!(i&&(0,r().p_)(i)&&n&&(0,r().p_)(n)))return;const a=n.property,s=i.property;return a&&s?{childRelationProperty:a,parentRelationProperty:s,childRelationSchema:n,parentRelationSchema:i,subitemFormat:t}:void 0}function j(e){const t=(0,u().fm)(e);if(t)return Z(t)}function K(e,t){const o=z(e,t);if(o)return Z(o)}function z(e,t){if(!e)return;if(!(e.isType(n().Ti.collectionViewPage)||e.isType(n().Ti.page)))return;const o=e.getAssociatedCollectionStore();if(!o)return;const i=new(g().Z)(t);return i.setContext({type:"collectionPage",collectionViewBlockStore:void 0,collectionStore:o}),i}function H(e){const t=e.getFormat().subitem_property;if(!t)return;const o=e.getSchema()[t];if(!o||"relation"!==o.type)return;const n=o.property;return n?{property:t,inverse:n}:void 0}function q(e,t){if(!e.isType("page")||e.isTemplate())return!1;if(!t)return!1;return!!t.collectionStore()&&Boolean(t.currentSubitemFormatStoreForCollectionStore.state)}function W(e){var t,o;const{blockId:n,collectionContextStore:i}=e,r=null===(t=i.currentSubitemFormatStoreForCollectionStore)||void 0===t?void 0:t.state,a=null==r?void 0:r.inverse;if(!r||!a)return!1;const s=e.blockStore??(null===(o=m().R.findBlockFromId(n))||void 0===o?void 0:o.getBlockStore());if(!s)return!1;const l=s.getSchema();if(!l)return!1;const c=l[a];return!(!c||"relation"!==c.type)&&P({store:s,subitemFormat:r,propertySchema:c}).length>0}function G(e){var t;const{collectionContextStore:o,blockStore:n}=e,i=null===(t=o.currentSubitemFormatStoreForCollectionStore)||void 0===t?void 0:t.state,r=null==i?void 0:i.property;if(!i||!r)return!1;const a=n.getSchema();if(!a)return!1;const s=a[r];return!(!s||"relation"!==s.type)&&T({store:n,subitemFormat:i,propertySchema:s}).length>0}function $(e){let{blocks:t,parentRelationProperty:o,parentRelationSchema:n,collectionViewBlockStore:i}=e;const r=new Set;for(const a of t)r.add(a.id);return d().xH(t.map((e=>{const t=(e=>{const t=e.getPropertyValue(o);return a().j$({relationValue:a().rq(t),propertySchema:n,getRecordModel:e.getRecordModel})})(e),s=t.map((e=>e.id));if(0===t.length)return[h().G.createChildStore(i,e.pointer)];return f().C.findAllSelectablesFromIds(s.filter((e=>!r.has(e)))).map((e=>e.props.store)).map((t=>h().G.createChildStore(t,e.pointer)))})))}function Q(e,t){const o=e.subitemTreeStore,n=(0,c().DY)(o.state.children,(e=>e.value.store===t)),i=n?U(n.map((e=>e.value.store))):"";return e.subitemExpandedStore.state.get(i)}function Y(e,t){const o=J(e,t);return e.filter(((e,t)=>o.includes(t)))}function J(e,t){const o=new Set;e.forEach((e=>{o.add(e.pointer.id)}));const n=[];return e.forEach(((e,i)=>{const r=e.getPropertyValue(t.inverse);a().rq(r).some((e=>o.has(e.id)))||n.push(i)})),n}function X(e){var t;let{collectionContextStore:o}=e;return I(o)&&"flattened"===(null===(t=o.collectionViewStore())||void 0===t?void 0:t.getFormat().subitem_display_mode)}function ee(e){let{collectionContextStore:t,blockStore:o}=e;return X({collectionContextStore:t})&&W({blockId:o.id,collectionContextStore:t,blockStore:o})}function te(e){let{collectionContextStore:t,blockStore:o}=e;return function(e){var t;let{collectionContextStore:o}=e;return I(o)&&"hidden"===(null===(t=o.collectionViewStore())||void 0===t?void 0:t.getFormat().subitem_display_mode)}({collectionContextStore:t})&&G({collectionContextStore:t,blockStore:o})}},615676:(e,t,o)=>{o.d(t,{W:()=>r});o(267602),o(731107);var n=()=>o(560384),i=()=>o(749826);function r(){return n().k.reduce(((e,t)=>(e[t]=i().default.checkGate({gateName:t}),e)),{})}},989134:(e,t,o)=>{o.d(t,{Zs:()=>a,jD:()=>i,oi:()=>r});var n=()=>o(35980);const i="CollectionView:";function r(e){return`${i}${e}`}function a(e){let{userId:t,viewBlockId:o}=e;if(t)return n().Z.get({userId:t,key:r(o)})}},514:(e,t,o)=>{o.d(t,{F6:()=>n,aB:()=>r,pT:()=>i});const n={maxWidth:280,width:"max-content",overflowWrap:"break-word",textWrap:"wrap",whiteSpace:"pre-line"},i=280,r=(0,o(788860).vU)({addPropertyDescriptionTooltip:{id:"database.viewSettings.propertyTab.description.addDescriptionTooltip",defaultMessage:"Add property description"},editPropertyDescriptionTooltip:{id:"database.viewSettings.propertyTab.description.editDescriptionTooltip",defaultMessage:"Edit property description"}})},521045:(e,t,o)=>{o.d(t,{As:()=>p,Sh:()=>u,iL:()=>m,ki:()=>g,qf:()=>f});o(267602),o(653476),o(228244);var n=()=>o(455947),i=()=>o(721927),r=()=>o(226413),a=()=>o(605974),s=()=>o(396136),l=()=>o(752778),c=()=>o(826955),d=()=>o(129338);function u(e,t){return(0,a().oN)(e,t)}function p(e,t,o,n){const i=e.relativeVariableStore.state;if(i){const e=i[o.id],r=null==e?void 0:e[t];if(r){return c().G.createChildStore(n,{table:s().iU,id:r,spaceId:o.spaceId})}}}function m(e){var t;const{blockStore:o,collectionId:r,appConfigUri:s,variable:l,schema:c}=e;if((null===(t=o.getAssociatedCollectionStore())||void 0===t?void 0:t.id)!==r)return!1;const d=a().qB[s][l].reducer,u=d.getProperty(),p=c[u],m=o.getPropertyValue(u),f=d.getPropertyFilter(c,l);return!!(0,n().CA)({filter:f,filterType:"status",relativeVariableValues:void 0})((0,i().yK)({propertySchema:p,propertyValue:m}))}function f(e,t,o){if((0,n().e)(t.filter)){if(((0,n().vR)(t.filter)?(0,n().YO)(t.filter):[]).some((e=>"relative"===e.type)))return function(e,t,o){const n=o.getSchema()[t];return!(!n||!(0,r().p_)(n))&&(0,a().oN)((0,d().uJ)(n,e),(0,d().ke)(n,o))}(e,t.property,o)}return!0}function g(e,t,o){return!!e&&Object.values(e).some((e=>{if("groups"===e.type&&"relation"===e.groupBy.type){const n=e.groupBy.property,i=t[n];if(i.collection_pointer){const e=c().NW.createChildStore(o,{table:l().vF,id:i.collection_pointer.id}),t=e.getFormat().app_config_uri;return t&&a().qB[t]&&e.isDefined()&&(0,a().oN)(e.getSchema(),t)}}return!1}))}},527511:(e,t,o)=>{o.d(t,{Vn:()=>a,qf:()=>c});var n=()=>o(788860),i=()=>o(527278);const r=(0,n().vU)({default:{defaultMessage:"Light gray",id:"colors.select.lightGray"},gray:{defaultMessage:"Gray",id:"colors.select.gray"},brown:{defaultMessage:"Brown",id:"colors.select.brown"},orange:{defaultMessage:"Orange",id:"colors.select.orange"},yellow:{defaultMessage:"Yellow",id:"colors.select.yellow"},green:{defaultMessage:"Green",id:"colors.select.green"},blue:{defaultMessage:"Blue",id:"colors.select.blue"},purple:{defaultMessage:"Purple",id:"colors.select.purple"},pink:{defaultMessage:"Pink",id:"colors.select.pink"},red:{defaultMessage:"Red",id:"colors.select.red"}});function a(e){const t=r[e]||r.gray;return i().Z.formatMessage(t)}const s=(0,n().vU)({foregroundColorDefault:{id:"action.foregroundColor.default.name",defaultMessage:"Default text"},foregroundColorGray:{id:"action.foregroundColor.gray.name",defaultMessage:"Gray text"},foregroundColorBrown:{id:"action.foregroundColor.brown.name",defaultMessage:"Brown text"},foregroundColorOrange:{id:"action.foregroundColor.orange.name",defaultMessage:"Orange text"},foregroundColorYellow:{id:"action.foregroundColor.yellow.name",defaultMessage:"Yellow text"},foregroundColorGreen:{id:"action.foregroundColor.green.name",defaultMessage:"Green text"},foregroundColorBlue:{id:"action.foregroundColor.blue.name",defaultMessage:"Blue text"},foregroundColorPurple:{id:"action.foregroundColor.purple.name",defaultMessage:"Purple text"},foregroundColorPink:{id:"action.foregroundColor.pink.name",defaultMessage:"Pink text"},foregroundColorRed:{id:"action.foregroundColor.red.name",defaultMessage:"Red text"},backgroundColorGray:{id:"action.backgroundColor.gray.name",defaultMessage:"Gray background"},backgroundColorBrown:{id:"action.backgroundColor.brown.name",defaultMessage:"Brown background"},backgroundColorOrange:{id:"action.backgroundColor.orange.name",defaultMessage:"Orange background"},backgroundColorYellow:{id:"action.backgroundColor.yellow.name",defaultMessage:"Yellow background"},backgroundColorGreen:{id:"action.backgroundColor.green.name",defaultMessage:"Green background"},backgroundColorBlue:{id:"action.backgroundColor.blue.name",defaultMessage:"Blue background"},backgroundColorPurple:{id:"action.backgroundColor.purple.name",defaultMessage:"Purple background"},backgroundColorPink:{id:"action.backgroundColor.pink.name",defaultMessage:"Pink background"},backgroundColorRed:{id:"action.backgroundColor.red.name",defaultMessage:"Red background"},backgroundColorDefault:{id:"action.backgroundColor.default.name",defaultMessage:"Default background"}}),l={default:{...s.foregroundColorDefault},gray:{...s.foregroundColorGray},brown:{...s.foregroundColorBrown},orange:{...s.foregroundColorOrange},yellow:{...s.foregroundColorYellow},teal:{...s.foregroundColorGreen},blue:{...s.foregroundColorBlue},purple:{...s.foregroundColorPurple},pink:{...s.foregroundColorPink},red:{...s.foregroundColorRed},default_background:{...s.backgroundColorDefault},gray_background:{...s.backgroundColorGray},brown_background:{...s.backgroundColorBrown},orange_background:{...s.backgroundColorOrange},yellow_background:{...s.backgroundColorYellow},teal_background:{...s.backgroundColorGreen},blue_background:{...s.backgroundColorBlue},purple_background:{...s.backgroundColorPurple},pink_background:{...s.backgroundColorPink},red_background:{...s.backgroundColorRed}};function c(e){return l[e]}},121058:(e,t,o)=>{o.d(t,{Po:()=>c,hF:()=>s,zE:()=>l});var n=()=>o(589525),i=()=>o(482162),r=()=>o(191586),a=()=>o(942226);function s(e){let t=e;for(;t&&(!t||!t.isNavigableBlock());){if("column"===t.getType())return!0;t=t.getParentBlockStore()}return!1}function l(e,t){const{device:o}=t;if(o.isPhone)return!1;if((0,a().wq)(e)){if((0,r().yp)(e))return(0,n().vJ)(t)>i().SIDEPEEK_NO_COLUMN_WIDTH;if(i().default.isCenterPeekOpen())return(0,a().MI)(t)>i().SIDEPEEK_NO_COLUMN_WIDTH}return!0}function c(e,t){var o;return!t.device.isMobile&&(e.isType("column_list")&&e.isChildOfRecordStoreUIRoot()&&l(e,t)&&!(null!==(o=e.getParentBlockStore())&&void 0!==o&&o.isFullWidth())&&!(0,a().wq)(e))}},934305:(e,t,o)=>{o.d(t,{$W:()=>m,FD:()=>g,Fu:()=>v,Xc:()=>f});var n=()=>o(513670),i=()=>o(696459),r=()=>o(644329),a=()=>o(686145),s=()=>o(156538),l=()=>o(826955),c=()=>o(965903),d=()=>o(127519),u=()=>o(527278),p=()=>o(339523);function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u().Z.getIntl();if("helpMeEdit"===e.key||"helpMeDraft"===e.key||"helpMeWrite"===e.key){var o;const n=null===(o=e.steps)||void 0===o?void 0:o[0],i="text"===(null==n?void 0:n.type)&&n.prefilledValue;return i?t.formatMessage({id:"completionPopup.prefilledValue",defaultMessage:"Write about {prefilledValue} "},{prefilledValue:i}):""}if(!(0,a().TE)(e.key))return"";switch(e.key){case"brainstormIdeas":return t.formatMessage({id:"completionPopup.brainStorm.prefilledValue",defaultMessage:"Brainstorm ideas on "});case"blogPost":return t.formatMessage({id:"completionPopup.blogPost.prefilledValue",defaultMessage:"Write a blog post about "});case"outline":return t.formatMessage({id:"completionPopup.outline.prefilledValue",defaultMessage:"Write an outline about "});case"socialMediaPost":return t.formatMessage({id:"completionPopup.socialMediaPost.prefilledValue",defaultMessage:"Write a social media post about "});case"pressRelease":return t.formatMessage({id:"completionPopup.pressRelease.prefilledValue",defaultMessage:"Write a press release about "});case"creativeStory":return t.formatMessage({id:"completionPopup.creativeStory.prefilledValue",defaultMessage:"Write a creative story about "});case"essay":return t.formatMessage({id:"completionPopup.essay.prefilledValue",defaultMessage:"Write an essay about "});case"poem":return t.formatMessage({id:"completionPopup.poem.prefilledValue",defaultMessage:"Write a poem about "});case"todoList":return t.formatMessage({id:"completionPopup.todoList.prefilledValue",defaultMessage:"Write a todo list about "});case"meetingAgenda":return t.formatMessage({id:"completionPopup.meetingAgenda.prefilledValue",defaultMessage:"Write a meeting agenda about "});case"prosConsList":return t.formatMessage({id:"completionPopup.prosConsList.prefilledValue",defaultMessage:"Write a pros and cons list about "});case"jobDescription":return t.formatMessage({id:"completionPopup.jobDescription.prefilledValue",defaultMessage:"Write a job description about "});case"salesEmail":return t.formatMessage({id:"completionPopup.salesEmail.prefilledValue",defaultMessage:"Write a sales email about "});case"recruitingEmail":return t.formatMessage({id:"completionPopup.recruitingEmail.prefilledValue",defaultMessage:"Write a recruiting email about "});default:(0,i().t1)(e.key)}}function f(){const{stores:e}=c().default.state,t=e[0],o=n().Z$(e),i=t?t.getRecordStoreUIRoot():void 0;if(i&&i instanceof l().G&&o){return{type:"blockSelection",stores:e,currentPage:i,origin:o,scrollerStore:(0,r().Dj)(i)}}}function g(){const e=d().default.state;if("editing"!==e.mode)return;const t=e.multiSelection,o=t.start.store,n=o.getRecordStoreUIRoot(),i=s().E.findNodeFromStore(o),a=(0,p().sQ)(o),c=null==a?void 0:a.getRecordStoreUIParent(),u=(0,r().Dj)(n),m=a&&a instanceof l().G&&a!==n?a:void 0,f=m??i;if(!(n&&n instanceof l().G&&f))return;return{type:"cursor",textSelection:t,currentPage:n,currentBlock:m,origin:f,currentParent:c,scrollerStore:u,isPageTitle:n.id===o.id}}function v(){const{stores:e}=c().default.state,t=d().default.state,o="empty"!==t.mode?t.multiSelection:void 0,n="empty"!==t.mode?t.multiSelection.start.store:void 0;let i=n?n.getRecordStoreUIRoot():void 0;if(!(i instanceof l().G)){let e,t=null==n?void 0:n.getRecordStoreUIParent();for(;null!=t;)t instanceof l().G&&(e=t),t=t.getRecordStoreUIParent();e&&(i=e)}if(o&&i&&i instanceof l().G){const t=(0,p().sQ)(o.end.store),n=null==t?void 0:t.getRecordStoreUIParent(),a=(0,r().Dj)(i);if(t&&n){return{type:"textSelection",stores:e,textSelection:o,currentPage:i,origin:t,endBlock:t,endBlockParent:n,scrollerStore:a}}}}},562402:(e,t,o)=>{o.d(t,{$A:()=>b,Ie:()=>I,KF:()=>h,N9:()=>k});o(670560);var n=o.n(o(940591)),i=()=>o(156642),r=()=>o(459422),a=()=>o(321160),s=()=>o(665553),l=()=>o(989478),c=()=>o(955620),d=()=>o(499110),u=()=>o(527278),p=()=>o(209628);const m=!1;function f(){if(m){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];console.log("completionMarkdownHelpers:",...t)}}function g(e,t){return(0,d().Nz)(e,t).replace(/ /g,"")}function v(e,t){const{getRecordValue:o,intl:n}=t;let i;if(c().IWo(e)){const t=c().zEN(e);i=`@${g(n,o({table:l().KJ,id:t}))}`}else if(c().fpG(e)){i=c().zyO(e).start_date}return i&&f(`Transforming annotation for completion: ${i}`),i}function h(){let e=0,t=0;function o(o){e+=1,e>t&&(t=e);try{return s().Lk(o)}finally{e-=1}}function n(){return":".repeat(t-e+2)}return{transformAnnotation:v,transformBlockMapping:{callout(e){var t;const{block:i,exportArgs:r}=e,l=s().WB({block:i,exportArgs:r}),c=null===(t=i.format)||void 0===t?void 0:t.page_icon,d=(0,a().Z)(c)?c:"",u=o(e),p=n();return{text:`${p} aside ${d}\n\n${l}`.trim(),breakLines:!0,children:u,suffix:p}},toggle(e){const{block:t,exportArgs:i}=e,r=s().WB({block:t,exportArgs:i}),a=o(e),l=n();return{text:`${l} â–¶ ${r}\n\n`.trim(),breakLines:!0,children:a,suffix:l}}}}}const _=(0,p().V9)({unicode:()=>/@\p{Letter}+/gu,fallback:/@[A-Za-z]+/g});async function b(e,t,o){const n=e.matchAll(_),i=[];for(const r of n){const e=r[0].slice(1);if(void 0===o.get(e)){const n=async()=>{const n=await y(t,e);n?(f(`Found user result for mention "${e}": ${n.email}`),o.set(e,n)):(f(`Found no user result for mention "${e}".`),o.set(e,null))};i.push(n())}}await Promise.all(i)}async function y(e,t){const o=await e(t),n=u().Z.getIntl();let i;for(const r of o){if(g(n,r)===t){if(i)return;i=r}}return i}function S(e){const{md:t,name:o,regex:n,createTokens:i}=e,{arrayReplaceAt:r}=t.utils;function a(e,t,r){let a=0;const s=[];if(e.replace(n,(function(n){const l=Array.from(arguments);let c=l.length-1;"string"!=typeof l[c]&&(c-=1);const d=l[c],u=l[c-1];if(u>0&&(0,p().D_)(d[u-1]))return"";if(u+n.length<d.length&&(0,p().D_)(d[u+n.length]))return"";const m=i(n,t);if(!m)return"";if(u>a){const t=new r("text","",0);t.content=e.slice(a,u),s.push(t)}for(const{type:e,attrs:t,tag:i,level:a,content:p}of m){const n=new r(e,"",0);if(t)for(const[e,o]of Object.entries(t))n.attrPush([e,o]);i&&(n.tag=i,n.markup=o),void 0!==a&&(n.level=a),p&&(n.content=p),s.push(n)}return a=u+n.length,""})),a<e.length){const t=new r("text","",0);t.content=e.slice(a),s.push(t)}return s}t.core.ruler.after("linkify",o,(e=>{let t=0;const o=e.tokens;for(let i=0;i<o.length;i++){const s=o[i].children;if("inline"===o[i].type&&s)for(let l=s.length-1;l>=0;l--){const c=s[l];"link_open"!==c.type&&"link_close"!==c.type||"auto"===c.info&&(t-=c.nesting),"text"===c.type&&0===t&&n.test(c.content)&&(o[i].children=r(s,l,a(c.content,c.level,e.Token)))}}return!0}))}function w(e){return t=>{!function(e){S({md:e,name:"date_mentions",regex:/20\d\d-\d\d-\d\d/g,createTokens:(e,t)=>[{type:"date_mention_open",tag:"time",attrs:{datetime:e,[r().KD.dateFormat]:"relative"},level:t+1},{type:"text",content:e},{type:"date_mention_close",tag:"/time",level:t}]})}(t),function(e,t){S({md:e,name:"user_mentions",regex:_,createTokens(e,o){const n=e.slice(1),i=t.get(n);if(i)return[{type:"user_mention_open",tag:"a",level:o+1,attrs:{[r().KD[c().GKr.User]]:i.id}},{type:"text",content:e},{type:"user_mention_close",tag:"/a",level:o}]}})}(t,e),function(e){const t=/^aside\s+(.*)$/,o={validate:e=>Boolean(e.trim().match(t)),render(o,n){if(1===o[n].nesting){const s=o[n].info.trim().match(t);let l=(null==s?void 0:s[1])??"";(0,a().Z)(l)||(l="");const c="gray_background",d=function(e,t){const o=[];for(const[n,i]of t)o.push(`${n}="${e.utils.escapeHtml(i)}"`);return o.join(" ")}(e,[[r().KD[i().Ti.callout],""],[r().KD.calloutBackground,c],[r().KD.calloutIcon,l]]);return`<div ${d}>`}return"</div>"}};e.use(n(),"callout_block",o)}(t),function(e){const t=/^â–¶\s+(.*)$/,o={validate:e=>Boolean(e.trim().match(t)),render(o,n){if(1===o[n].nesting){const i=o[n].info.trim().match(t),r=(null==i?void 0:i[1])??"";return`<details><summary>${e.utils.escapeHtml(r)}</summary>`}return"</details>"}};e.use(n(),"toggle_block",o)}(t)}}function k(e){return{plugin:w(e)}}function I(e){return/\[.+\]\([^)]*$/.test(e)}},31772:(e,t,o)=>{o.d(t,{D:()=>i,d:()=>n});const n={text:!0,bulleted_list:!0,numbered_list:!0,quote:!0,to_do:!0,header:!0,sub_header:!0,sub_sub_header:!0,callout:!0,toggle:!0,table:!0,equation:!0,code:!0,file:!0,pdf:!0,image:!0},i={...n}},982855:(e,t,o)=>{o.d(t,{eL:()=>y,It:()=>b,kL:()=>M,GD:()=>C,qB:()=>S,G9:()=>w,z1:()=>k,gM:()=>A,AC:()=>R,RT:()=>T,Zt:()=>x,mX:()=>P,Gw:()=>B,lV:()=>E});const n="5ee0e0b5-7f0a-4788-a438-f37644514636";var i=()=>o(505226),r=()=>o(568017),a=()=>o(513670),s=()=>o(621378),l=()=>o(152930),c=()=>o(34812),d=()=>o(844958),u=()=>o(772084),p=()=>o(876822),m=()=>o(524434),f=()=>o(749826),g=()=>o(890324),v=()=>o(148126),h=()=>o(345918);const _=(0,o(788860).vU)({helpMeWrite:{defaultMessage:"Ask AI to write...",id:"id.completions.helpMeWrite"},helpMeWritePlaceholder:{defaultMessage:'What would you like to write about?\nFor example, "5 reasons why we should hire a dedicated designer"',id:"id.completions.helpMeWritePlaceholder"},helpMeDraftPlaceholder:{defaultMessage:'What would you like to write about?\nFor example, "article about the benefits of learning a new language"',id:"id.completions.helpMeDraftPlaceholder"},summarize:{defaultMessage:"Summarize",id:"id.completions.summarize"},findActionItems:{defaultMessage:"Find action items",id:"id.completions.findActionItems"},summarizeMeetingTranscript:{id:"id.completions.summarizeMeetingTranscript",defaultMessage:"Summarize meeting"}}),b={key:"helpMeWrite",category:"writeWithAI",name:_.helpMeWrite,svg:d().t,svgFill:r().FN.light.purple[400],requiresContent:!0,steps:[{key:"prompt",name:_.helpMeWritePlaceholder,placeholder:_.helpMeWritePlaceholder,type:"text"}]},y={key:"helpMeDraft",category:"draftWithAI",name:_.helpMeWrite,svg:d().t,svgFill:r().FN.light.purple[400],requiresNoContent:!0,steps:[{key:"prompt",name:_.helpMeDraftPlaceholder,placeholder:_.helpMeDraftPlaceholder,type:"text"}]};function S(e){const{customPrompt:t,isPageEmpty:o}=e;return{key:o?"helpMeDraft":"helpMeWrite",category:"writeWithAI",name:_.helpMeWrite,svg:s().d,svgFill:r().FN.light.purple[400],steps:[{key:"prompt",name:_.helpMeWritePlaceholder,placeholder:_.helpMeWritePlaceholder,type:"text",prefilledValue:t}]}}function w(){return[{key:"summarize",category:"extractFromContent",name:_.summarize,svg:c().Y,svgFill:r().FN.light.purple[400]},{key:"findActionItems",category:"extractFromContent",name:_.findActionItems,svg:l().O,svgFill:r().FN.light.purple[400]},b]}function k(){return a().KX(w(),"key")}function I(){const e=p().default.state.currentSpaceStore;return!!e&&e.isAiEnabledOnSpace()}function C(e){if(f().default.checkGate({gateName:"disable_ai_big_red_button"}))return!1;if(f().default.checkGate({gateName:"enable_public_qna_sites"})){var t;const o=p().default.state.mainEditorCurrentBlockStore&&(null===(t=(0,u().gR)(p().default.state.mainEditorCurrentBlockStore))||void 0===t||null===(t=t.getSiteStore())||void 0===t||null===(t=t.getSettings())||void 0===t?void 0:t.enableQna);if(null!=e&&e.hasPublicPermission&&!(0,v().jt)()&&o)return!0}const o=p().default.state.currentSpaceStore;if((0,h().Cx)(o))return!1;const n=null==o?void 0:o.canRead();return!(e&&e.hasPublicPermission&&!n)&&I()}function x(e){return I()}function T(e,t){return C(e)&&t.canEdit()}function M(){return C(void 0)&&f().default.checkGate({gateName:"enable_ai_suggested_properties"})}function P(e,t,o){return C(t)&&o.canEditCollection()}function A(e){return new(i().m)({isInitialized:!0,getEligibleGroup:e=>f().default.getEligibleGroup({experimentId:e}),isAiEnabled:()=>{const t=p().default.state.mainEditorCurrentBlockStore;return C(t&&g().Z.getMode(e,t))},isZeroRetentionEnabled:()=>{const e=p().default.state.currentSpaceStore;return!!e&&e.getZeroRetentionEnabled()},getCanSearchWorkspaceWithCollectionIdFilter:()=>{var e;return!(null===(e=p().default.state.currentSpaceStore)||void 0===e||null===(e=e.getSettings())||void 0===e||!e.embedding_index_is_live)||(f().default.checkGate({gateName:"enable_limited_qna"}),!1)},getIsAssistantSpaceSettingEnabled:()=>{var e;return(null===(e=p().default.state.currentSpaceStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.is_assistant_experience_enabled)??!1},getSearchBackend:()=>{var e;return null!==(e=p().default.state.currentSpaceStore)&&void 0!==e&&null!==(e=e.getSettings())&&void 0!==e&&e.embedding_index_is_live?"vector":f().default.checkGate({gateName:"enable_limited_qna"})?"limited_qna":void 0},checkGate:e=>f().default.checkGate({gateName:e}),getSubscriptionTier:()=>{var e;return null===(e=p().default.state.currentSpaceStore)||void 0===e?void 0:e.getSubscriptionTier()}})}function R(e){m().KR.getIsInitialized()||m().KR.setState(A(e))}function B(){var e;return(null===(e=p().default.state.currentSpaceStore)||void 0===e?void 0:e.id)===n}function E(){return!1}},726046:(e,t,o)=>{o.d(t,{$6:()=>a,CN:()=>i,SL:()=>s,Tc:()=>r});var n=()=>o(749826);const i=5;function r(e){return"on"===n().default.getEligibleGroup({experimentId:"parallel_confluence_importer_via_api",defaultGroup:"control"})}function a(e){return n().default.getEligibleGroup({experimentId:"special_case_confluence_file_size",defaultGroup:i.toString()})}function s(e){return"on"===n().default.getEligibleGroup({experimentId:"migrate_confluence_into_teamspace",defaultGroup:"control"})}},40484:(e,t,o)=>{o.d(t,{L:()=>a,n:()=>s});var n=()=>o(804217),i=()=>o(764189);const r=1*o(326966).hM;function a(){var e;if(n().default.state.online){if(null!==(e=i().default.state.connectionError)&&void 0!==e&&e.startTime){var t;if(Date.now()-(null===(t=i().default.state.connectionError)||void 0===t?void 0:t.startTime)<r)return}return i().default.state.connectionError}}function s(){return Boolean(a())}},296304:(e,t,o)=>{o.d(t,{C7:()=>v,D1:()=>y,G0:()=>m,GF:()=>r,GZ:()=>s,HM:()=>d,Hd:()=>g,X1:()=>_,_F:()=>u,d_:()=>c,eD:()=>f,g4:()=>b,xp:()=>S});var n=()=>o(435441);const i="data-content-editable-leaf",r={[i]:!0},a="data-content-editable-root",s={[a]:!0},l="data-content-editable-root-tiny-selection-trap",c={[l]:!0},d="data-content-editable-selecting",u="data-content-editable-composing",p="data-content-editable-void",m={[p]:!0};function f(e){return n().kK(e)&&e.hasAttribute(i)}function g(e){return n().kK(e)&&e.hasAttribute(l)}function v(e){return Boolean(n().kK(e)&&e.querySelector(`[${i}]`))}function h(e){return n().kK(e)&&e.hasAttribute(a)}function _(e){return n().sh(e,f)}function b(e,t){return e.parentElement===t?e:n().sh(e,(e=>e.parentElement===t))||e}function y(e,t){if(!e||!t)return!1;const o=S(e),n=S(t);return Boolean(o&&o===n)}function S(e){const t=n().sh(e,(e=>h(e)||function(e){return n().kK(e)&&e.hasAttribute(p)}(e)));if(t&&h(t))return t}},53060:(e,t,o)=>{o.d(t,{O5:()=>Xe,Hc:()=>Je,tg:()=>Ye,MU:()=>Ge});o(267602),o(470928),o(228244);var n=()=>o(492788),i=()=>o(714230),r=()=>o(156642),a=()=>o(217465),s=()=>o(396136),l=()=>o(527278),c=(o(667294),()=>o(677559)),d=o(785893);function u(e,t){const o=new(c().Ss)(e,t);return Object.assign(((e,t)=>(0,d.jsx)(c().ev,{dependency:o,children:o=>o(e,t)})),{__dependency:o})}const p=u("abstractColorDarkIcon",(()=>o.e(23182).then(o.bind(o,93424)).then((e=>e.abstractColorDarkIcon)))),m=u("abstractColorLightIcon",(()=>o.e(23182).then(o.bind(o,564837)).then((e=>e.abstractColorLightIcon))));var f=()=>o(827282);const g=(0,f().IU)("aiBlock",{viewBox:"0 0 20 20",svg:(0,d.jsxs)("g",{children:[(0,d.jsx)("path",{d:"M12.622 5.779c.084-.372.613-.372.697 0 .144.636.645 1.13 1.283 1.267.377.08.377.618 0 .699a1.673 1.673 0 00-1.283 1.266c-.084.372-.613.372-.697 0a1.673 1.673 0 00-1.283-1.266c-.377-.08-.377-.62 0-.7a1.673 1.673 0 001.283-1.266zm-2.718 1.81c-.151-.668-1.103-.668-1.254 0a3.388 3.388 0 01-2.598 2.566l-.042.008c-.68.145-.68 1.117 0 1.261l.042.01a3.388 3.388 0 012.598 2.565c.15.668 1.103.668 1.254 0a3.388 3.388 0 012.598-2.566l.041-.008c.68-.146.68-1.117 0-1.262l-.041-.008a3.388 3.388 0 01-2.598-2.566z"}),(0,d.jsx)("path",{fillRule:"evenodd",d:"M15.75 16.5a2.75 2.75 0 002.75-2.75v-7.5a2.75 2.75 0 00-2.75-2.75H4.25A2.75 2.75 0 001.5 6.25v7.5a2.75 2.75 0 002.75 2.75h11.5zM17 13.75c0 .69-.56 1.25-1.25 1.25H4.25C3.56 15 3 14.44 3 13.75v-7.5C3 5.56 3.56 5 4.25 5h11.5c.69 0 1.25.56 1.25 1.25v7.5z",clipRule:"evenodd"})]})}),v=(0,f().IU)("arrowRightContained",{viewBox:"0 0 20 20",svg:(0,d.jsxs)("g",{children:[(0,d.jsx)("path",{d:"M11.673 13.387a.75.75 0 01-1.06-1.06l1.576-1.577H6a.75.75 0 010-1.5h6.19l-1.577-1.577a.75.75 0 111.06-1.06L14.53 9.47a.75.75 0 010 1.06l-2.857 2.857z"}),(0,d.jsx)("path",{fillRule:"evenodd",d:"M4.25 3.5A2.75 2.75 0 001.5 6.25v7.5a2.75 2.75 0 002.75 2.75h11.5a2.75 2.75 0 002.75-2.75v-7.5a2.75 2.75 0 00-2.75-2.75H4.25zM3 6.25C3 5.56 3.56 5 4.25 5h11.5c.69 0 1.25.56 1.25 1.25v7.5c0 .69-.56 1.25-1.25 1.25H4.25C3.56 15 3 14.44 3 13.75v-7.5z",clipRule:"evenodd"})]})}),h=u("asanaColorIcon",(()=>o.e(23182).then(o.bind(o,57357)).then((e=>e.asanaColorIcon)))),_=(0,f().IU)("audioBlock",{viewBox:"0 0 20 20",svg:(0,d.jsxs)("g",{children:[(0,d.jsx)("path",{fillRule:"evenodd",d:"M8.897 3.238c.798-.746 2.103-.18 2.103.913v11.697c0 1.094-1.305 1.66-2.103.914L5.673 13.75H2.75A.75.75 0 012 13V7a.75.75 0 01.75-.75h2.923l3.224-3.012zm.603 1.49l-3.02 2.82a.75.75 0 01-.511.202H3.5v4.5h2.469a.75.75 0 01.512.202l3.019 2.82V4.728z",clipRule:"evenodd"}),(0,d.jsx)("path",{d:"M12.77 6.424a.75.75 0 011.056.096 5.436 5.436 0 010 6.96.75.75 0 11-1.152-.96 3.936 3.936 0 000-5.04.75.75 0 01.096-1.056z"}),(0,d.jsx)("path",{d:"M16.364 4.57a.75.75 0 10-1.228.86 7.969 7.969 0 010 9.14.75.75 0 001.228.86 9.469 9.469 0 000-10.86z"})]})}),b=(0,f().IU)("bookmarkBlock",{viewBox:"0 0 20 20",svg:(0,d.jsx)("path",{fillRule:"evenodd",d:"M13.75 1.5a2.75 2.75 0 012.75 2.75v11.305c0 1.501-1.766 2.306-2.898 1.32L10 13.745l-3.602 3.132c-1.132.985-2.898.18-2.898-1.32V4.25A2.75 2.75 0 016.25 1.5h7.5zM15 4.25C15 3.56 14.44 3 13.75 3h-7.5C5.56 3 5 3.56 5 4.25v11.305c0 .215.252.33.414.189l4.094-3.56a.75.75 0 01.984 0l4.094 3.56a.25.25 0 00.414-.189V4.25z",clipRule:"evenodd"})}),y=(0,f().IU)("bulletedList",{viewBox:"0 0 20 20",svg:(0,d.jsx)("path",{d:"M6.5 6A1.75 1.75 0 113 6a1.75 1.75 0 013.5 0zm3-.75a.75.75 0 000 1.5H17a.75.75 0 000-1.5H9.5zm0 8a.75.75 0 000 1.5H17a.75.75 0 000-1.5H9.5zm-4.75 2.5a1.75 1.75 0 100-3.5 1.75 1.75 0 000 3.5z"})}),S=(0,f().IU)("callout",{viewBox:"0 0 20 20",svg:(0,d.jsxs)("g",{children:[(0,d.jsx)("path",{d:"M7 6.3h6a.7.7 0 01.7.7v1a.7.7 0 11-1.4 0v-.3h-1.6v4.6h.2a.7.7 0 110 1.4H9.1a.7.7 0 110-1.4h.2V7.7H7.7V8a.7.7 0 11-1.4 0V7a.7.7 0 01.7-.7z"}),(0,d.jsx)("path",{fillRule:"evenodd",d:"M5.074 2.25A2.824 2.824 0 002.25 5.074v9.852a2.824 2.824 0 002.824 2.824h9.852a2.824 2.824 0 002.824-2.824V5.074a2.824 2.824 0 00-2.824-2.824H5.074zM3.75 5.074c0-.731.593-1.324 1.324-1.324h9.852c.731 0 1.324.593 1.324 1.324v9.852c0 .731-.593 1.324-1.324 1.324H5.074a1.324 1.324 0 01-1.324-1.324V5.074z",clipRule:"evenodd"})]})}),w=(0,f().IU)("codeBlock",{viewBox:"0 0 20 20",svg:(0,d.jsx)("path",{d:"M11.741 3.614a.75.75 0 00-1.482-.228l-2 13a.75.75 0 001.482.228l2-13zM18.247 10l-3.933 4.494a.75.75 0 11-1.128-.988L16.253 10l-3.067-3.506a.75.75 0 111.128-.988L18.247 10zm-16.994.077l3.933-4.494a.75.75 0 111.128.988l-3.067 3.506 3.067 3.506a.75.75 0 11-1.128.988l-3.933-4.494z"})}),k=u("codepenColorDarkIcon",(()=>o.e(23182).then(o.bind(o,215625)).then((e=>e.codepenColorDarkIcon)))),I=u("codepenColorLightIcon",(()=>o.e(23182).then(o.bind(o,144246)).then((e=>e.codepenColorLightIcon)))),C=u("confluenceColorDarkIcon",(()=>o.e(23182).then(o.bind(o,623133)).then((e=>e.confluenceColorDarkIcon)))),x=u("confluenceColorLightIcon",(()=>o.e(23182).then(o.bind(o,100858)).then((e=>e.confluenceColorLightIcon)))),T=(0,f().IU)("csv",{viewBox:"0 0 20 20",svg:(0,d.jsxs)("g",{children:[(0,d.jsx)("path",{fillRule:"evenodd",d:"M5 4.25C5 3.56 5.56 3 6.25 3H9.5v2.75a2.75 2.75 0 0 0 2.75 2.75H15V9a.75.75 0 0 0 1.5 0V7.664c0-.464-.184-.909-.513-1.237l-4.414-4.414a1.75 1.75 0 0 0-1.237-.513H6.25A2.75 2.75 0 0 0 3.5 4.25v11.5a2.75 2.75 0 0 0 2.75 2.75h9.25a.75.75 0 0 0 0-1.5H6.25C5.56 17 5 16.44 5 15.75zm6-.69v2.19c0 .69.56 1.25 1.25 1.25h2.19z",clipRule:"evenodd"}),(0,d.jsx)("path",{d:"M14.011 12.932c-.333-.282-.789-.446-1.31-.546-.431-.082-.642-.19-.737-.272-.064-.054-.089-.102-.089-.205 0-.025.004-.073.103-.14.111-.074.315-.144.605-.144.559 0 .77.234.819.305a.625.625 0 0 0 1.03-.708c-.285-.414-.883-.847-1.849-.847-.472 0-.934.111-1.3.355-.376.252-.658.659-.658 1.18 0 .442.166.848.53 1.158.334.282.79.446 1.311.546.431.082.642.19.737.272.064.054.089.102.089.205 0 .025-.004.073-.104.14-.11.074-.315.144-.605.144-.558 0-.77-.234-.818-.305a.625.625 0 1 0-1.03.708c.285.414.883.847 1.848.847.472 0 .935-.111 1.3-.355.377-.252.659-.659.659-1.18 0-.442-.166-.848-.53-1.158ZM9.807 10.71c-.669-.377-1.62-.457-2.42-.13-.86.351-1.512 1.159-1.512 2.42s.652 2.069 1.512 2.42c.8.327 1.751.247 2.42-.13a.625.625 0 0 0-.614-1.09c-.336.19-.885.246-1.333.063-.389-.159-.735-.508-.735-1.263s.346-1.104.735-1.263c.448-.183.997-.127 1.333.062a.625.625 0 1 0 .614-1.088Zm6.28.243a.625.625 0 0 0-1.174.427l1.333 3.667a.625.625 0 0 0 1.175 0l1.333-3.667a.625.625 0 1 0-1.175-.427l-.746 2.052z"})]})}),M=(0,f().IU)("cursorHover",{viewBox:"0 0 20 20",svg:(0,d.jsxs)("g",{children:[(0,d.jsx)("path",{d:"M4.25 5C3.56 5 3 5.56 3 6.25v7.5c0 .69.56 1.25 1.25 1.25h1a.75.75 0 0 1 0 1.5h-1a2.75 2.75 0 0 1-2.75-2.75v-7.5A2.75 2.75 0 0 1 4.25 3.5h11.5a2.75 2.75 0 0 1 2.75 2.75v7.5a2.75 2.75 0 0 1-2.75 2.75h-.5a.75.75 0 0 1 0-1.5h.5c.69 0 1.25-.56 1.25-1.25v-7.5C17 5.56 16.44 5 15.75 5z"}),(0,d.jsx)("path",{d:"M6.364 10.11a.25.25 0 0 0-.348.308l2.612 7.186a.25.25 0 0 0 .469.005l.757-1.987 2.793 3.055a.748.748 0 1 0 1.108-1.009l-2.852-3.12 1.934-.696a.25.25 0 0 0 .027-.457z"})]})}),P=(0,f().IU)("deepnoteColor",{viewBox:"0 0 20 20",svg:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("path",{fill:"#3793EF",fillRule:"evenodd",d:"M7.353 1c-.327.002-.471 0-.471 0L1 9.538h5.412c.46 0 .966.017 1.487.068l-1.606 2.24L1 19h7.538-.008S19 18.68 19 9.49C19 1.44 9.66.991 7.352 1Z",clipRule:"evenodd"}),(0,d.jsx)("path",{fill:"#1560AB",fillRule:"evenodd",d:"M8.53 19s4.373-.822 4.373-4.896c0-3.337-2.65-4.27-5.005-4.498l-1.604 2.24L1 19zm2.285-2.101.013-.02z",clipRule:"evenodd"}),(0,d.jsx)("path",{fill:"#012447",fillRule:"evenodd",d:"M6.294 11.847c3.322 0 5.496 1.557 5.056 3.74C10.909 17.768 8.53 19 8.53 19s4.373-.822 4.373-4.896c0-3.337-2.65-4.27-5.004-4.498l-1.605 2.24Z",clipRule:"evenodd"})]})}),A=(0,f().IU)("divider",{viewBox:"0 0 20 20",svg:(0,d.jsx)("path",{fillRule:"evenodd",d:"M2.25 10A.75.75 0 013 9.25h14.5a.75.75 0 010 1.5H3a.75.75 0 01-.75-.75z",clipRule:"evenodd"})}),R=(0,f().IU)("drawingBlock",{viewBox:"0 0 20 20",svg:(0,d.jsxs)("g",{children:[(0,d.jsx)("path",{d:"M17.297 3.112a.852.852 0 011.233-.01c.314.325.306.852-.02 1.2l-8.5 9.118a1.1 1.1 0 01-.387.267l-.973.4-.106.02a.351.351 0 01-.343-.46l.326-.982c.05-.15.132-.29.24-.404l8.531-9.15z"}),(0,d.jsx)("path",{d:"M8.132 4.75c-.368 0-.73.086-1.059.25l-.658.33a.75.75 0 00.67 1.34l.659-.328a.868.868 0 01.388-.092h.09a.777.777 0 01.33 1.482L3.518 10.08A3.5 3.5 0 005 16.75h.08a3.58 3.58 0 002.53-1.048l.171-.172a.75.75 0 00-1.06-1.06l-.172.171c-.39.39-.918.609-1.47.609H5a2 2 0 01-.845-3.81l5.032-2.35a2.277 2.277 0 00-.963-4.34h-.091z"})]})}),B=u("dropboxPaperColorIcon",(()=>o.e(23182).then(o.bind(o,81492)).then((e=>e.dropboxPaperColorIcon)))),E=(0,f().IU)("duplicateSquares",{viewBox:"0 0 20 20",svg:(0,d.jsx)("path",{fillRule:"evenodd",d:"M15.25 4.75v-.472a2.53 2.53 0 0 0-2.528-2.528H4.278A2.53 2.53 0 0 0 1.75 4.278v8.444a2.53 2.53 0 0 0 2.528 2.528h.472v.472a2.53 2.53 0 0 0 2.528 2.528h8.444a2.53 2.53 0 0 0 2.528-2.528V7.278a2.53 2.53 0 0 0-2.528-2.528zM4.278 3.25c-.568 0-1.028.46-1.028 1.028v8.444c0 .568.46 1.028 1.028 1.028h.472V7.278A2.53 2.53 0 0 1 7.278 4.75h6.472v-.472c0-.568-.46-1.028-1.028-1.028zM6.25 7.278c0-.568.46-1.028 1.028-1.028h8.444c.568 0 1.028.46 1.028 1.028v8.444c0 .568-.46 1.028-1.028 1.028H7.278c-.568 0-1.028-.46-1.028-1.028z",clipRule:"evenodd"})}),D=(0,f().IU)("embedBlock",{viewBox:"0 0 20 20",svg:(0,d.jsxs)("g",{children:[(0,d.jsx)("path",{d:"M16.75 6a.75.75 0 0 0 1.5 0V4.5a2.75 2.75 0 0 0-2.75-2.75H12a.75.75 0 0 0 0 1.5h3.5c.69 0 1.25.56 1.25 1.25zm-13.5 6a.75.75 0 0 0-1.5 0v3.5a2.75 2.75 0 0 0 2.75 2.75H6a.75.75 0 0 0 0-1.5H4.5c-.69 0-1.25-.56-1.25-1.25zM2.5 8.75A.75.75 0 0 0 3.25 8V4.5c0-.69.56-1.25 1.25-1.25H8a.75.75 0 0 0 0-1.5H4.5A2.75 2.75 0 0 0 1.75 4.5V8c0 .414.336.75.75.75m11.42.484a1.66 1.66 0 0 1 2.346 2.347l-1.278 1.277a.75.75 0 0 0 1.06 1.061l1.279-1.278a3.16 3.16 0 1 0-4.468-4.468L11.58 9.451a.75.75 0 0 0 1.06 1.06l1.278-1.277Zm-4.686 7.032a1.66 1.66 0 0 0 2.347 0l1.278-1.278a.75.75 0 0 1 1.06 1.06l-1.277 1.279a3.16 3.16 0 0 1-4.469-4.469l1.278-1.277a.75.75 0 1 1 1.06 1.06L9.235 13.92a1.66 1.66 0 0 0 0 2.347Z"}),(0,d.jsx)("path",{d:"M14.771 11.79a.75.75 0 0 0-1.06-1.061l-2.982 2.981a.75.75 0 0 0 1.06 1.061z"})]})}),U=(0,f().IU)("equationBlock",{viewBox:"0 0 20 20",svg:(0,d.jsxs)("g",{children:[(0,d.jsx)("path",{d:"M12.5 6.75H8.375l2.28 2.171c.5.477.519 1.269.042 1.769l-2.444 2.56H12.5a.75.75 0 010 1.5H7.668c-1.1 0-1.663-1.318-.904-2.113L9.44 9.835l-2.551-2.43c-.817-.778-.266-2.155.862-2.155h4.75a.75.75 0 010 1.5z"}),(0,d.jsx)("path",{fillRule:"evenodd",d:"M5.074 2.25A2.824 2.824 0 002.25 5.074v9.852a2.824 2.824 0 002.824 2.824h9.852a2.824 2.824 0 002.824-2.824V5.074a2.824 2.824 0 00-2.824-2.824H5.074zM3.75 5.074c0-.731.593-1.324 1.324-1.324h9.852c.731 0 1.324.593 1.324 1.324v9.852c0 .731-.593 1.324-1.324 1.324H5.074a1.324 1.324 0 01-1.324-1.324V5.074z",clipRule:"evenodd"})]})}),F=u("evernoteColorIcon",(()=>o.e(23182).then(o.bind(o,125333)).then((e=>e.evernoteColorIcon)))),N=u("excalidrawColorDarkIcon",(()=>o.e(23182).then(o.bind(o,282949)).then((e=>e.excalidrawColorDarkIcon)))),V=u("excalidrawColorLightIcon",(()=>o.e(23182).then(o.bind(o,310622)).then((e=>e.excalidrawColorLightIcon)))),L=u("figmaColorIcon",(()=>o.e(23182).then(o.bind(o,20043)).then((e=>e.figmaColorIcon)))),O=(0,f().IU)("fileBlock",{viewBox:"0 0 20 20",svg:(0,d.jsx)("path",{fillRule:"evenodd",d:"M10.146 3.179a3.75 3.75 0 115.304 5.303L9.793 14.14a2.25 2.25 0 11-3.182-3.182L9.439 8.13A.75.75 0 0110.5 9.19l-2.828 2.829a.75.75 0 101.06 1.06l5.657-5.656a2.25 2.25 0 10-3.182-3.182L5.55 9.896a3.75 3.75 0 105.304 5.304l4.95-4.95a.75.75 0 011.06 1.06l-4.95 4.95A5.25 5.25 0 014.49 8.836l5.656-5.657z",clipRule:"evenodd"})}),Z=(0,f().IU)("fileHash",{viewBox:"0 0 20 20",svg:(0,d.jsxs)("g",{children:[(0,d.jsx)("path",{fillRule:"evenodd",d:"M7.75 10.625a.625.625 0 100 1.25h.752l-.269 1.75H7.25a.625.625 0 100 1.25h.79l-.158 1.03a.625.625 0 001.236.19l.187-1.22h1.736l-.159 1.03a.625.625 0 101.236.19l.188-1.22H13a.625.625 0 100-1.25h-.502l.269-1.75h.733a.625.625 0 100-1.25h-.54l.158-1.03a.625.625 0 00-1.236-.19l-.187 1.22H9.959l.159-1.03a.625.625 0 00-1.236-.19l-.187 1.22H7.75zm2.017 1.25l-.27 1.75h1.736l.27-1.75H9.766z",clipRule:"evenodd"}),(0,d.jsx)("path",{fillRule:"evenodd",d:"M16.5 15.75V7.664c0-.464-.184-.909-.513-1.237l-4.414-4.414a1.75 1.75 0 00-1.237-.513H6.25A2.75 2.75 0 003.5 4.25v11.5a2.75 2.75 0 002.75 2.75h7.5a2.75 2.75 0 002.75-2.75zM6.25 3C5.56 3 5 3.56 5 4.25v11.5c0 .69.56 1.25 1.25 1.25h7.5c.69 0 1.25-.56 1.25-1.25V8.5h-2.75A2.75 2.75 0 019.5 5.75V3H6.25zm6 4h2.19L11 3.56v2.19c0 .69.56 1.25 1.25 1.25z",clipRule:"evenodd"})]})}),j=(0,f().IU)("fiveColumns",{viewBox:"0 0 20 20",svg:(0,d.jsx)("path",{fillRule:"evenodd",d:"M1.5 6a2.75 2.75 0 012.75-2.75h11.5A2.75 2.75 0 0118.5 6v7.5a2.75 2.75 0 01-2.75 2.75H4.25A2.75 2.75 0 011.5 13.5V6zm2.75-1.25C3.56 4.75 3 5.31 3 6v7.5c0 .69.56 1.25 1.25 1.25h.186v-10H4.25zm3.39 10H5.936v-10H7.64v10zm4.703 0h1.704v-10h-1.704v10zm-1.5 0v-10H9.14v10h1.703zm4.907 0h-.203v-10h.203c.69 0 1.25.56 1.25 1.25v7.5c0 .69-.56 1.25-1.25 1.25z",clipRule:"evenodd"})}),K=(0,f().IU)("folderWithTabs",{viewBox:"0 0 20 20",svg:(0,d.jsx)("path",{fillRule:"evenodd",d:"M4.25.25A2.75 2.75 0 001.5 3v10.75a2.75 2.75 0 002.75 2.75h11.5a2.75 2.75 0 002.75-2.75v-7.5c0-.055-.002-.11-.005-.164A.756.756 0 0018.5 6V3A2.75 2.75 0 0015.75.25H4.25zM3 3c0-.69.56-1.25 1.25-1.25h2c.69 0 1.25.56 1.25 1.25v1.25c0 .414.336.75.75.75h7.5c.69 0 1.25.56 1.25 1.25v7.5c0 .69-.56 1.25-1.25 1.25H4.25C3.56 15 3 14.44 3 13.75V3zm5.7-1.25c.192.375.3.8.3 1.25v.5h3.5V3c0-.69-.56-1.25-1.25-1.25H8.7zM14 3.5h1.75a2.739 2.739 0 011.25.3V3c0-.69-.56-1.25-1.25-1.25H13.7c.192.375.3.8.3 1.25v.5z",clipRule:"evenodd"})}),z=(0,f().IU)("fourColumns",{viewBox:"0 0 20 20",svg:(0,d.jsx)("path",{fillRule:"evenodd",d:"M4.25 3.25A2.75 2.75 0 001.5 6v7.5a2.75 2.75 0 002.75 2.75h11.5a2.75 2.75 0 002.75-2.75V6a2.75 2.75 0 00-2.75-2.75H4.25zM3 6c0-.69.56-1.25 1.25-1.25h1v10h-1c-.69 0-1.25-.56-1.25-1.25V6zm3.75 8.75h2.5v-10h-2.5v10zm6.5 0h-2.5v-10h2.5v10zm1.5 0h1c.69 0 1.25-.56 1.25-1.25V6c0-.69-.56-1.25-1.25-1.25h-1v10z",clipRule:"evenodd"})}),H=u("framerColorDarkIcon",(()=>o.e(23182).then(o.bind(o,837502)).then((e=>e.framerColorDarkIcon)))),q=u("framerColorLightIcon",(()=>o.e(23182).then(o.bind(o,708676)).then((e=>e.framerColorLightIcon)))),W=u("githubColorDarkIcon",(()=>o.e(23182).then(o.bind(o,206989)).then((e=>e.githubColorDarkIcon)))),G=u("githubColorLightIcon",(()=>o.e(23182).then(o.bind(o,637213)).then((e=>e.githubColorLightIcon)))),$=u("googleDocsColorDarkIcon",(()=>o.e(23182).then(o.bind(o,337614)).then((e=>e.googleDocsColorDarkIcon)))),Q=u("googleDocsColorLightIcon",(()=>o.e(23182).then(o.bind(o,523886)).then((e=>e.googleDocsColorLightIcon))));const Y=(0,f().IU)("heading1",{viewBox:"0 0 20 20",svg:(0,d.jsx)("path",{d:"M3.75 4.87a.75.75 0 10-1.5 0v10.5a.75.75 0 001.5 0v-4.25h5.5v4.25a.75.75 0 001.5 0V4.87a.75.75 0 00-1.5 0v4.75h-5.5V4.87zM15.2 6.147a.75.75 0 01.55.723v7.75h1a.75.75 0 010 1.5H13a.75.75 0 110-1.5h1.25V8.663a2.52 2.52 0 01-1 .207.75.75 0 010-1.5c.357 0 .688-.187.871-.493l.236-.393a.75.75 0 01.843-.337z"})}),J=(0,f().IU)("heading2",{viewBox:"0 0 20 20",svg:(0,d.jsx)("path",{d:"M3.75 4.87a.75.75 0 10-1.5 0v10.5a.75.75 0 001.5 0v-4.25h5.5v4.25a.75.75 0 001.5 0V4.87a.75.75 0 00-1.5 0v4.75h-5.5V4.87zm13.5 11.25H12.5a.75.75 0 01-.557-1.252l3.904-4.338a1.57 1.57 0 00.403-1.05 1.36 1.36 0 00-1.36-1.36h-.136c-.687 0-1.285.467-1.452 1.133l-.074.299a.75.75 0 01-1.456-.364l.075-.298a2.996 2.996 0 012.907-2.27h.136a2.86 2.86 0 012.86 2.86c0 .758-.28 1.49-.788 2.054l-2.778 3.086h3.066a.75.75 0 010 1.5z"})}),X=(0,f().IU)("heading3",{viewBox:"0 0 20 20",svg:(0,d.jsx)("path",{d:"M3.75 4.87a.75.75 0 10-1.5 0v10.5a.75.75 0 001.5 0v-4.25h5.5v4.25a.75.75 0 001.5 0V4.87a.75.75 0 00-1.5 0v4.75h-5.5V4.87zm8.5 2.5a.75.75 0 01.75-.75h3.5a.75.75 0 01.576 1.23l-1.62 1.945a3.37 3.37 0 012.294 3.194v.135a2.996 2.996 0 01-5.903.727l-.075-.299a.75.75 0 111.456-.364l.074.299a1.496 1.496 0 002.948-.363v-.135a1.87 1.87 0 00-1.87-1.869H14a.75.75 0 01-.576-1.23l1.475-1.77H13a.75.75 0 01-.75-.75z"})}),ee=u("hexColorDarkIcon",(()=>o.e(23182).then(o.bind(o,110266)).then((e=>e.hexColorDarkIcon)))),te=u("hexColorLightIcon",(()=>o.e(23182).then(o.bind(o,628785)).then((e=>e.hexColorLightIcon)))),oe=(0,f().IU)("htmlBrackets",{viewBox:"0 0 20 20",svg:(0,d.jsx)("path",{fillRule:"evenodd",d:"M14.314 14.494 18.247 10l-3.933-4.494a.75.75 0 1 0-1.128.988L16.253 10l-3.067 3.506a.75.75 0 1 0 1.128.988m-9.128-8.91-3.933 4.493 3.933 4.494a.75.75 0 1 0 1.128-.988l-3.067-3.506L6.314 6.57a.75.75 0 1 0-1.128-.988Z",clipRule:"evenodd"})}),ne=(0,f().IU)("imageBlock",{viewBox:"0 0 20 20",svg:(0,d.jsxs)("g",{children:[(0,d.jsx)("path",{d:"M9.75 7.5a1.75 1.75 0 11-3.5 0 1.75 1.75 0 013.5 0z"}),(0,d.jsx)("path",{fillRule:"evenodd",d:"M18.25 13.5a2.75 2.75 0 01-2.75 2.75H4a2.75 2.75 0 01-2.75-2.75V6A2.75 2.75 0 014 3.25h11.5A2.75 2.75 0 0118.25 6v7.5zM4 4.75c-.69 0-1.25.56-1.25 1.25v5.69l2.22-2.22a.75.75 0 011.06 0l2.22 2.22 4.47-4.47a.75.75 0 011.06 0l2.97 2.97V6c0-.69-.56-1.25-1.25-1.25H4zm12.75 7.56l-3.5-3.5-4.47 4.47a.75.75 0 01-1.06 0L5.5 11.06l-2.719 2.72A1.25 1.25 0 004 14.75h11.5c.69 0 1.25-.56 1.25-1.25v-1.19z",clipRule:"evenodd"})]})}),ie=u("invisionColorIcon",(()=>o.e(23182).then(o.bind(o,893681)).then((e=>e.invisionColorIcon))));const re=u("loomColorIcon",(()=>o.e(23182).then(o.bind(o,637241)).then((e=>e.loomColorIcon)))),ae=u("mapsColorIcon",(()=>o.e(23182).then(o.bind(o,1250)).then((e=>e.mapsColorIcon)))),se=(0,f().IU)("mermaidTail",{viewBox:"0 0 20 20",svg:(0,d.jsx)("path",{fillRule:"evenodd",d:"M1.963 3.477a.75.75 0 01.671-.215l3.106.565A6.75 6.75 0 0110 6.51a6.75 6.75 0 014.26-2.683l3.106-.565a.75.75 0 01.868.891l-.624 2.998a5.764 5.764 0 01-4.118 4.383c-.512.14-.867.606-.867 1.137V16a.75.75 0 01-.75.75h-3.75a.75.75 0 01-.75-.75v-3.33c0-.53-.355-.995-.867-1.136A5.764 5.764 0 012.39 7.151l-.624-2.998a.75.75 0 01.197-.676zm1.498 1.46l.398 1.909a4.264 4.264 0 003.046 3.242 2.678 2.678 0 011.97 2.583v2.579h2.25v-2.58c0-1.206.806-2.263 1.97-2.582a4.264 4.264 0 003.046-3.242l.398-1.909-2.01.366a5.25 5.25 0 00-3.333 2.113l-.586.82a.75.75 0 01-1.22 0l-.586-.82a5.25 5.25 0 00-3.333-2.113l-2.01-.366z",clipRule:"evenodd"})});const le=u("miroColorIcon",(()=>o.e(23182).then(o.bind(o,814227)).then((e=>e.miroColorIcon)))),ce=u("mixpanelColorDarkIcon",(()=>o.e(23182).then(o.bind(o,620997)).then((e=>e.mixpanelColorDarkIcon)))),de=u("mixpanelColorLightIcon",(()=>o.e(23182).then(o.bind(o,78638)).then((e=>e.mixpanelColorLightIcon)))),ue=u("mondayColorIcon",(()=>o.e(23182).then(o.bind(o,220048)).then((e=>e.mondayColorIcon)))),pe=(0,f().IU)("numberedList",{viewBox:"0 0 20 20",svg:(0,d.jsx)("path",{d:"M5.126 2.961c.19.113.308.318.308.539v4a.625.625 0 11-1.25 0V4.562l-.13.073a.625.625 0 11-.608-1.093l1.06-.588a.625.625 0 01.62.007zM8.5 5.25a.75.75 0 000 1.5H16a.75.75 0 000-1.5H8.5zm0 8a.75.75 0 000 1.5H16a.75.75 0 000-1.5H8.5zM6 16.625H3.5a.625.625 0 01-.474-1.032l1.923-2.24a.614.614 0 00.148-.4.26.26 0 00-.206-.255l-.164-.035a.48.48 0 00-.213.003l-.029.008a.499.499 0 00-.37.38.625.625 0 11-1.228-.234 1.748 1.748 0 011.303-1.36l.03-.008a1.73 1.73 0 01.765-.01l.164.034a1.51 1.51 0 011.197 1.478c0 .445-.16.876-.45 1.214L4.86 15.375H6a.625.625 0 110 1.25z"})});const me=u("quipColorDarkIcon",(()=>o.e(23182).then(o.bind(o,172411)).then((e=>e.quipColorDarkIcon)))),fe=u("quipColorLightIcon",(()=>o.e(23182).then(o.bind(o,959286)).then((e=>e.quipColorLightIcon)))),ge=(0,f().IU)("quoteBlock",{viewBox:"0 0 20 20",svg:(0,d.jsx)("path",{d:"M7.038 5.25a4.788 4.788 0 00-4.788 4.789v.576a4.211 4.211 0 004.212 4.212 3.058 3.058 0 10-2.712-4.472v-.316A3.288 3.288 0 017.038 6.75h.577a.75.75 0 100-1.5h-.577zm3.442 4.789a4.788 4.788 0 014.79-4.789h.576a.75.75 0 010 1.5h-.577a3.288 3.288 0 00-3.288 3.289v.316a3.057 3.057 0 112.711 4.472 4.211 4.211 0 01-4.211-4.212v-.576z"})}),ve=u("replitColorDarkIcon",(()=>o.e(23182).then(o.bind(o,696864)).then((e=>e.replitColorDarkIcon)))),he=u("replitColorLightIcon",(()=>o.e(23182).then(o.bind(o,990540)).then((e=>e.replitColorLightIcon)))),_e=u("sketchColorDarkIcon",(()=>o.e(23182).then(o.bind(o,325053)).then((e=>e.sketchColorDarkIcon)))),be=u("sketchColorLightIcon",(()=>o.e(23182).then(o.bind(o,169623)).then((e=>e.sketchColorLightIcon)))),ye=(0,f().IU)("syncedBlock",{viewBox:"0 0 20 20",svg:(0,d.jsx)("path",{d:"M1.75 4.5a.75.75 0 01.75-.75H15a.75.75 0 010 1.5H2.5a.75.75 0 01-.75-.75zm0 4a.75.75 0 01.75-.75H7a.75.75 0 010 1.5H2.5a.75.75 0 01-.75-.75zM13.9 9.748a3.375 3.375 0 00-4.06 2.056h.3a.623.623 0 01.441 1.066l-1.143 1.143a.625.625 0 01-.883 0L7.412 12.87a.623.623 0 01-.004-.88l.008-.007a.623.623 0 01.438-.18h.675a4.626 4.626 0 018.316-1.369.625.625 0 01-1.04.694 3.375 3.375 0 00-1.905-1.38zm4.684 4.265a.624.624 0 01-.442.183h-.675a4.62 4.62 0 01-2.494 2.987 4.624 4.624 0 01-5.822-1.617.625.625 0 111.04-.694 3.375 3.375 0 005.964-.676h-.299a.623.623 0 01-.625-.625.622.622 0 01.188-.446l1.138-1.138a.625.625 0 01.884 0l1.143 1.143a.621.621 0 010 .883z"})});const Se=(0,f().IU)("tableOfContents",{viewBox:"0 0 20 20",svg:(0,d.jsx)("path",{d:"M9.75 15a.75.75 0 01.75-.75H18a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM8.5 9.25a.75.75 0 000 1.5H16a.75.75 0 000-1.5H8.5zm-2-5a.75.75 0 000 1.5H14a.75.75 0 000-1.5H6.5zm-3 5a.75.75 0 000 1.5h2a.75.75 0 000-1.5h-2zM.75 5a.75.75 0 01.75-.75h2a.75.75 0 010 1.5h-2A.75.75 0 01.75 5zm4.75 9.25a.75.75 0 000 1.5h2a.75.75 0 000-1.5h-2z"})}),we=(0,f().IU)("text",{viewBox:"0 0 20 20",svg:(0,d.jsx)("path",{d:"M4.25 4A.75.75 0 015 3.25h10a.75.75 0 01.75.75v2a.75.75 0 01-1.5 0V4.75h-3.5v10.5h.75a.75.75 0 010 1.5h-3a.75.75 0 010-1.5h.75V4.75h-3.5V6a.75.75 0 01-1.5 0V4z"})}),ke=(0,f().IU)("textLines",{viewBox:"0 0 20 20",svg:(0,d.jsx)("path",{fillRule:"evenodd",d:"M2.25 6A.75.75 0 0 1 3 5.25h14a.75.75 0 0 1 0 1.5H3A.75.75 0 0 1 2.25 6m0 4A.75.75 0 0 1 3 9.25h14a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1-.75-.75m0 4a.75.75 0 0 1 .75-.75h8.615a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1-.75-.75",clipRule:"evenodd"})});const Ie=(0,f().IU)("todoList",{viewBox:"0 0 20 20",svg:(0,d.jsx)("path",{d:"M8.064 4.494a.75.75 0 00-1.128-.988L4.024 6.833l-.94-1.17a.75.75 0 00-1.169.94l1.5 1.867a.75.75 0 001.15.024l3.5-4zm0 8a.75.75 0 00-1.128-.988l-2.912 3.327-.94-1.17a.75.75 0 00-1.169.94l1.5 1.867a.75.75 0 001.15.024l3.5-4zM8.75 6a.75.75 0 01.75-.75H17a.75.75 0 010 1.5H9.5A.75.75 0 018.75 6zm.75 7.25a.75.75 0 000 1.5H17a.75.75 0 000-1.5H9.5z"})}),Ce=(0,f().IU)("toggleHeading1",{viewBox:"0 0 20 20",svg:(0,d.jsx)("path",{d:"M7.75 5a.75.75 0 00-1.5 0v10.5a.75.75 0 001.5 0v-4.272h4.5V15.5a.75.75 0 001.5 0V5a.75.75 0 00-1.5 0v4.728h-4.5V5zm-5.349 7.634a.76.76 0 01-1.151-.652V9.018a.76.76 0 011.151-.652l2.47 1.482a.76.76 0 010 1.304l-2.47 1.482zM18.216 8.95a.7.7 0 00-1.04-.612l-1.766.981a.7.7 0 00.68 1.224l.726-.403v5.48a.7.7 0 101.4 0V8.95z"})}),xe=(0,f().IU)("toggleHeading2",{viewBox:"0 0 20 20",svg:(0,d.jsx)("path",{d:"M7 4.25a.75.75 0 01.75.75v4.728h4.5V5a.75.75 0 011.5 0v10.5a.75.75 0 01-1.5 0v-4.272h-4.5V15.5a.75.75 0 01-1.5 0V5A.75.75 0 017 4.25zm-5.75 7.732a.76.76 0 001.151.652l2.47-1.482a.76.76 0 000-1.304l-2.47-1.482a.76.76 0 00-1.151.652v2.964zm17.25 4.243h-3a.625.625 0 01-.505-.993l2.305-3.17c.157-.216.242-.476.242-.742v-.064a.644.644 0 00-.487-.623l-.037-.01a.67.67 0 00-.346.007.746.746 0 00-.531.594l-.024.145a.625.625 0 01-1.234-.205l.025-.145c.126-.76.68-1.38 1.42-1.591a1.92 1.92 0 01.993-.017l.037.01c.843.21 1.434.967 1.434 1.835v.064c0 .53-.169 1.048-.481 1.477l-1.584 2.178H18.5a.625.625 0 110 1.25z"})}),Te=(0,f().IU)("toggleHeading3",{viewBox:"0 0 20 20",svg:(0,d.jsx)("path",{d:"M7 4.25a.75.75 0 01.75.75v4.728h4.5V5a.75.75 0 011.5 0v10.5a.75.75 0 01-1.5 0v-4.272h-4.5V15.5a.75.75 0 01-1.5 0V5A.75.75 0 017 4.25zm-5.75 7.732a.76.76 0 001.151.652l2.47-1.482a.76.76 0 000-1.304l-2.47-1.482a.76.76 0 00-1.151.652v2.964zm14.333-2.607a.625.625 0 100 1.25h1.109l-.948 1.308a.625.625 0 00.506.992h.254c.62 0 1.121.502 1.121 1.121v.09a.872.872 0 01-1.719.211l-.05-.199a.625.625 0 00-1.212.304l.05.199a2.123 2.123 0 004.181-.515v-.09a2.372 2.372 0 00-1.515-2.212l1.063-1.467a.625.625 0 00-.506-.992h-2.334z"})}),Me=(0,f().IU)("toggleList",{viewBox:"0 0 20 20",svg:(0,d.jsx)("path",{d:"M2.5 7.688a.56.56 0 00.841.485l2.882-1.688a.563.563 0 000-.97L3.34 3.827a.56.56 0 00-.841.485v3.376zm6-2.438a.75.75 0 000 1.5H16a.75.75 0 000-1.5H8.5zm0 8a.75.75 0 000 1.5H16a.75.75 0 000-1.5H8.5zm-5.159 2.923a.56.56 0 01-.841-.485v-3.376a.56.56 0 01.841-.485l2.882 1.688c.37.217.37.753 0 .97L3.34 16.173z"})}),Pe=u("trelloColorDarkIcon",(()=>o.e(23182).then(o.bind(o,392433)).then((e=>e.trelloColorDarkIcon)))),Ae=u("trelloColorLightIcon",(()=>o.e(23182).then(o.bind(o,396613)).then((e=>e.trelloColorLightIcon)))),Re=u("twitterColorDarkIcon",(()=>o.e(23182).then(o.bind(o,557048)).then((e=>e.twitterColorDarkIcon)))),Be=u("twitterColorLightIcon",(()=>o.e(23182).then(o.bind(o,770497)).then((e=>e.twitterColorLightIcon)))),Ee=(0,f().IU)("twoColumns",{viewBox:"0 0 20 20",svg:(0,d.jsx)("path",{fillRule:"evenodd",d:"M4.25 3.25A2.75 2.75 0 001.5 6v7.5a2.75 2.75 0 002.75 2.75h11.5a2.75 2.75 0 002.75-2.75V6a2.75 2.75 0 00-2.75-2.75H4.25zM3 6c0-.69.56-1.25 1.25-1.25h5v10h-5c-.69 0-1.25-.56-1.25-1.25V6zm7.75 8.75h5c.69 0 1.25-.56 1.25-1.25V6c0-.69-.56-1.25-1.25-1.25h-5v10z",clipRule:"evenodd"})}),De=u("typeformColorDarkIcon",(()=>o.e(23182).then(o.bind(o,242812)).then((e=>e.typeformColorDarkIcon)))),Ue=u("typeformColorLightIcon",(()=>o.e(23182).then(o.bind(o,337386)).then((e=>e.typeformColorLightIcon)))),Fe=(0,f().IU)("videoBlock",{viewBox:"0 0 20 20",svg:(0,d.jsxs)("g",{children:[(0,d.jsx)("path",{d:"M7.25 12.804c0 .344.376.558.675.385l4.852-2.805a.443.443 0 000-.768L7.925 6.81a.449.449 0 00-.675.385v5.608z"}),(0,d.jsx)("path",{fillRule:"evenodd",d:"M15.75 16.5a2.75 2.75 0 002.75-2.75v-7.5a2.75 2.75 0 00-2.75-2.75H4.25A2.75 2.75 0 001.5 6.25v7.5a2.75 2.75 0 002.75 2.75h11.5zM17 13.75c0 .69-.56 1.25-1.25 1.25H4.25C3.56 15 3 14.44 3 13.75v-7.5C3 5.56 3.56 5 4.25 5h11.5c.69 0 1.25.56 1.25 1.25v7.5z",clipRule:"evenodd"})]})}),Ne=u("whimsicalColorDarkIcon",(()=>o.e(23182).then(o.bind(o,273936)).then((e=>e.whimsicalColorDarkIcon)))),Ve=u("whimsicalColorLightIcon",(()=>o.e(23182).then(o.bind(o,726887)).then((e=>e.whimsicalColorLightIcon)))),Le=u("wordColorIcon",(()=>o.e(23182).then(o.bind(o,596624)).then((e=>e.wordColorIcon)))),Oe=u("workflowyColorDarkIcon",(()=>o.e(23182).then(o.bind(o,592932)).then((e=>e.workflowyColorDarkIcon)))),Ze=u("workflowyColorLightIcon",(()=>o.e(23182).then(o.bind(o,222542)).then((e=>e.workflowyColorLightIcon))));var je=()=>o(749826),Ke=()=>o(838266),ze=()=>o(421797),He=()=>o(907005),qe=()=>o(121058);const We=(0,o(788860).vU)({textTitle:{id:"newBlock.text.title",defaultMessage:"Text"},encryptedTextTitle:{id:"newBlock.encryptedText.title",defaultMessage:"Encrypted Text"},textDescription:{id:"newBlock.text.description",defaultMessage:"Just start writing with plain text."},encryptedTextDescription:{id:"newBlock.encryptedText.description",defaultMessage:"Just start writing...and your text will be stored encrypted!"},textKeywords:{id:"newBlock.text.fuzzySearchKeywords",defaultMessage:"Text"},pageTitle:{id:"newBlock.page.title",defaultMessage:"Page"},pageDescription:{id:"newBlock.page.description",defaultMessage:"Embed a sub-page inside this page."},pageKeywords:{id:"newBlock.page.fuzzySearchKeywords",defaultMessage:"Page"},linkToPageTitle:{id:"newBlock.linkToPage.title",defaultMessage:"Link to page"},linkToPageDescription:{id:"newBlock.linkToPage.description",defaultMessage:"Link to an existing page."},linkToPageKeywords:{id:"newBlock.linkToPage.fuzzySearchKeywords",defaultMessage:"Link to page ltp"},linkedDatabaseDescription:{id:"newBlock.linkToCollection.description",defaultMessage:"Add an existing database to this page."},transclusionContainerTitle:{id:"newBlock.transclusionContainer.title",defaultMessage:"Synced block"},transclusionContainerDescription:{id:"newBlock.transclusionContainer.description",defaultMessage:"Sync content across pages."},transclusionContainerKeywords:{id:"newBlock.transclusionContainer.fuzzySearchKeywords",defaultMessage:"synced block reference portal block embed group"},toDoTitle:{id:"newBlock.toDo.title",defaultMessage:"To-do list"},toDoDescription:{id:"newBlock.toDo.description",defaultMessage:"Track tasks with a to-do list."},toDoKeywords:{id:"newBlock.toDo.fuzzySearchKeywords",defaultMessage:"Todo To-Do Checkbox List"},headerTitle:{id:"newBlock.header.title",defaultMessage:"Heading 1"},headerDescription:{id:"newBlock.header.description",defaultMessage:"Big section heading."},headerKeywords:{id:"newBlock.header.fuzzySearchKeywords",defaultMessage:"Heading 1 h1"},subHeaderTitle:{id:"newBlock.subHeader.title",defaultMessage:"Heading 2"},subHeaderDescription:{id:"newBlock.subHeader.description",defaultMessage:"Medium section heading."},subHeaderKeywords:{id:"newBlock.subHeader.fuzzySearchKeywords",defaultMessage:"sub heading 2 h2 two"},subSubHeaderTitle:{id:"newBlock.subSubHeader.title",defaultMessage:"Heading 3"},subSubHeaderDescription:{id:"newBlock.subSubHeader.description",defaultMessage:"Small section heading."},subSubHeaderKeywords:{id:"newBlock.subSubHeader.fuzzySearchKeywords",defaultMessage:"subsub heading 3 h3 three"},imageTitle:{id:"newBlock.image.title",defaultMessage:"Image"},imageDescription:{id:"newBlock.image.description",defaultMessage:"Upload or embed with a link."},imageKeywords:{id:"newBlock.image.fuzzySearchKeywords",defaultMessage:"Image Picture Gif Giphy Photo img"},bookmarkTitle:{id:"newBlock.bookmark.title",defaultMessage:"Web bookmark"},bookmarkDescription:{id:"newBlock.bookmark.description",defaultMessage:"Save a link as a visual bookmark."},bookmarkKeywords:{id:"newBlock.bookmark.fuzzySearchKeywords",defaultMessage:"Web Link Bookmark"},dividerTitle:{id:"newBlock.divider.title",defaultMessage:"Divider"},dividerDescription:{id:"newBlock.divider.description",defaultMessage:"Visually divide blocks."},dividerKeywords:{id:"newBlock.divider.fuzzySearchKeywords",defaultMessage:"Horizontal Rule Divider line section separator â€”-"},codeTitle:{id:"newBlock.code.title",defaultMessage:"Code"},codeDescription:{id:"newBlock.code.description",defaultMessage:"Capture a code snippet."},codeKeywords:{id:"newBlock.code.fuzzySearchKeywords",defaultMessage:"Code"},quoteTitle:{id:"newBlock.quote.title",defaultMessage:"Quote"},quoteDescription:{id:"newBlock.quote.description",defaultMessage:"Capture a quote."},quoteKeywords:{id:"newBlock.quote.fuzzySearchKeywords",defaultMessage:"Quote â€"},bulletedListTitle:{id:"newBlock.bulletedList.title",defaultMessage:"Bulleted list"},bulletedListDescription:{id:"newBlock.bulletedList.description",defaultMessage:"Create a simple bulleted list."},bulletedListKeywords:{id:"newBlock.bulletedList.fuzzySearchKeywords",defaultMessage:"Bulleted List"},numberedListTitle:{id:"newBlock.numberedList.title",defaultMessage:"Numbered list"},numberedListDescription:{id:"newBlock.numberedList.description",defaultMessage:"Create a list with numbering."},numberedListKeywords:{id:"newBlock.numberedList.fuzzySearchKeywords",defaultMessage:"Numbered List"},toggleTitle:{id:"newBlock.toggle.title",defaultMessage:"Toggle list"},toggleDescription:{id:"newBlock.toggle.description",defaultMessage:"Toggles can hide and show content inside."},toggleKeywords:{id:"newBlock.toggle.fuzzySearchKeywords",defaultMessage:"Toggle list expand collapse details"},fileTitle:{id:"newBlock.file.title",defaultMessage:"File"},fileDescription:{id:"newBlock.file.description",defaultMessage:"Upload or embed with a link."},fileKeywords:{id:"newBlock.file.fuzzySearchKeywords",defaultMessage:"File upload attach"},videoTitle:{id:"newBlock.video.title",defaultMessage:"Video"},videoDescription:{id:"newBlock.video.description",defaultMessage:"Embed from YouTube, Vimeo..."},videoKeywords:{id:"newBlock.video.fuzzySearchKeywords",defaultMessage:"Video"},audioTitle:{id:"newBlock.audio.title",defaultMessage:"Audio"},audioDescription:{id:"newBlock.audio.description",defaultMessage:"Embed from SoundCloud, Spotify..."},audioKeywords:{id:"newBlock.audio.fuzzySearchKeywords",defaultMessage:"Audio Sound Music"},embedTitle:{id:"newBlock.embed.title",defaultMessage:"Embed"},embedDescription:{id:"newBlock.embed.description",defaultMessage:"For PDFs, Google Maps, and more."},embedKeywords:{id:"newBlock.embed.fuzzySearchKeywords",defaultMessage:"Embed iFrame"},driveTitle:{id:"newBlock.drive.title",defaultMessage:"Google Drive"},driveDescription:{id:"newBlock.drive.description",defaultMessage:"Embed a Google Doc, Google Sheet..."},driveKeywords:{id:"newBlock.drive.fuzzySearchKeywords",defaultMessage:"Google Drive"},figmaTitle:{id:"newBlock.figma.title",defaultMessage:"Figma"},figmaDescription:{id:"newBlock.figma.description",defaultMessage:"Embed a Figma file."},figmaKeywords:{id:"newBlock.figma.fuzzySearchKeywords",defaultMessage:"Figma"},loomTitle:{id:"newBlock.loom.title",defaultMessage:"Loom"},loomDescription:{id:"newBlock.loom.description",defaultMessage:"Embed a Loom recording."},loomKeywords:{id:"newBlock.loom.fuzzySearchKeywords",defaultMessage:"Loom"},typeformTitle:{id:"newBlock.typeform.title",defaultMessage:"Typeform"},typeformDescription:{id:"newBlock.typeform.description",defaultMessage:"Embed a Typeform."},typeformKeywords:{id:"newBlock.typeform.fuzzySearchKeywords",defaultMessage:"Typeform"},codepenTitle:{id:"newBlock.codepen.title",defaultMessage:"CodePen"},codepenDescription:{id:"newBlock.codepen.description",defaultMessage:"Embed a CodePen."},codepenKeywords:{id:"newBlock.codepen.fuzzySearchKeywords",defaultMessage:"CodePen"},tweetTitle:{id:"newBlock.tweet.title",defaultMessage:"Tweet"},tweetDescription:{id:"newBlock.tweet.description",defaultMessage:"Embed a Tweet."},tweetKeywords:{id:"newBlock.tweet.fuzzySearchKeywords",defaultMessage:"Tweet"},gistTitle:{id:"newBlock.gist.title",defaultMessage:"GitHub Gist"},gistDescription:{id:"newBlock.gist.description",defaultMessage:"Embed a Gist from GitHub."},gistKeywords:{id:"newBlock.gist.fuzzySearchKeywords",defaultMessage:"GitHub Gist"},mapsTitle:{id:"newBlock.maps.title",defaultMessage:"Google Maps"},mapsDescription:{id:"newBlock.maps.description",defaultMessage:"Embed a Google Map."},mapsKeywords:{id:"newBlock.maps.fuzzySearchKeywords",defaultMessage:"Google Maps"},framerTitle:{id:"newBlock.framer.title",defaultMessage:"Framer"},framerDescription:{id:"newBlock.framer.description",defaultMessage:"Embed a Framer prototype."},framerKeywords:{id:"newBlock.framer.fuzzySearchKeywords",defaultMessage:"Framer"},invisionTitle:{id:"newBlock.invision.title",defaultMessage:"Invision"},invisionDescription:{id:"newBlock.invision.description",defaultMessage:"Embed an Invision project."},invisionKeywords:{id:"newBlock.invision.fuzzySearchKeywords",defaultMessage:"Invision"},mixpanelTitle:{id:"newBlock.mixpanel.title",defaultMessage:"Mixpanel"},mixpanelDescription:{id:"newBlock.mixpanel.description",defaultMessage:"Embed a Mixpanel project."},mixpanelKeywords:{id:"newBlock.mixpanel.fuzzySearchKeywords",defaultMessage:"Mixpanel"},equationTitle:{id:"newBlock.equation.title",defaultMessage:"Block equation"},equationDescription:{id:"newBlock.equation.description",defaultMessage:"Display a standalone math equation."},equationKeywords:{id:"newBlock.equation.fuzzySearchKeywords",defaultMessage:"LaTeX Math Block Equation $$ Formula"},pdfTitle:{id:"newBlock.pdf.title",defaultMessage:"PDF"},pdfDescription:{id:"newBlock.pdf.description",defaultMessage:"Embed a PDF."},pdfKeywords:{id:"newBlock.pdf.fuzzySearchKeywords",defaultMessage:"PDF"},factoryTitle:{id:"newBlock.factory.title",defaultMessage:"Template button"},factoryDescription:{id:"newBlock.factory.description",defaultMessage:"Duplicate blocks with a click."},factoryKeywords:{id:"newBlock.factory.fuzzySearchKeywords",defaultMessage:"Template Duplicate Button"},buttonTitle:{id:"newBlock.button.title",defaultMessage:"Button"},buttonDescription:{id:"newBlock.button.description",defaultMessage:"Run custom automations with a click."},buttonKeywords:{id:"newBlock.button.fuzzySearchKeywords",defaultMessage:"Button automation template duplicate"},workflowTitle:{id:"newBlock.workflow.title",defaultMessage:"Workflow"},workflowDescription:{id:"newBlock.workflow.description",defaultMessage:"Create custom automations."},workflowKeywords:{id:"newBlock.workflow.fuzzySearchKeywords",defaultMessage:"Workflow"},breadcrumbTitle:{id:"newBlock.breadcrumb.title",defaultMessage:"Breadcrumb"},breadcrumbDescription:{id:"newBlock.breadcrumb.description",defaultMessage:"Show the current page location."},breadcrumbKeywords:{id:"newBlock.breadcrumb.fuzzySearchKeywords",defaultMessage:"Breadcrumb"},calloutTitle:{id:"newBlock.callout.title",defaultMessage:"Callout"},calloutDescription:{id:"newBlock.callout.description",defaultMessage:"Make writing stand out."},calloutKeywords:{id:"newBlock.callout.fuzzySearchKeywords",defaultMessage:"Callout"},table_of_contentsTitle:{id:"newBlock.tableOfContents.title",defaultMessage:"Table of contents"},table_of_contentsDescription:{id:"newBlock.tableOfContents.description",defaultMessage:"Show an outline of your page."},table_of_contentsKeywords:{id:"newBlock.tableOfContents.fuzzySearchKeywords",defaultMessage:"TOC Table of Contents"},whimsicalTitle:{id:"newBlock.whimsical.title",defaultMessage:"Whimsical"},whimsicalDescription:{id:"newBlock.whimsical.description",defaultMessage:"Embed a Whimsical board."},whimsicalKeywords:{id:"newBlock.whimsical.fuzzySearchKeywords",defaultMessage:"Whimsical"},hexTitle:{id:"newBlock.hex.title",defaultMessage:"Hex"},hexDescription:{id:"newBlock.hex.description",defaultMessage:"Embed a Hex cell."},hexKeywords:{id:"newBlock.hex.fuzzySearchKeywords",defaultMessage:"Hex"},deepnoteTitle:{id:"newBlock.deepnote.title",defaultMessage:"Deepnote"},deepnoteDescription:{id:"newBlock.deepnote.description",defaultMessage:"Embed a Deepnote block."},deepnoteKeywords:{id:"newBlock.deepnote.fuzzySearchKeywords",defaultMessage:"Deepnote"},miroTitle:{id:"newBlock.miro.title",defaultMessage:"Miro"},miroDescription:{id:"newBlock.miro.description",defaultMessage:"Embed a Miro board."},miroKeywords:{id:"newBlock.miro.fuzzySearchKeywords",defaultMessage:"Miro"},abstractTitle:{id:"newBlock.abstract.title",defaultMessage:"Abstract"},abstractDescription:{id:"newBlock.abstract.description",defaultMessage:"Embed an Abstract project."},abstractKeywords:{id:"newBlock.abstract.fuzzySearchKeywords",defaultMessage:"Abstract"},sketchTitle:{id:"newBlock.sketch.title",defaultMessage:"Sketch"},sketchDescription:{id:"newBlock.sketch.description",defaultMessage:"Embed a Sketch document."},sketchKeywords:{id:"newBlock.sketch.fuzzySearchKeywords",defaultMessage:"Sketch"},excalidrawTitle:{id:"newBlock.excalidraw.title",defaultMessage:"Excalidraw"},excalidrawDescription:{id:"newBlock.excalidraw.description",defaultMessage:"Embed an Excalidraw whiteboard."},excalidrawKeywords:{id:"newBlock.excalidraw.fuzzySearchKeywords",defaultMessage:"Excalidraw"},replitTitle:{id:"newBlock.replit.title",defaultMessage:"Replit"},replitDescription:{id:"newBlock.replit.description",defaultMessage:"Embed a repl."},replitKeywords:{id:"newBlock.replit.fuzzySearchKeywords",defaultMessage:"Replit"},databaseTitle:{id:"newBlock.database.title",defaultMessage:"Database"},databaseDescription:{id:"newBlock.database.description",defaultMessage:"Create a new database."},inlineTimelineDatabaseTitle:{id:"newBlock.inlineTimelineDatabase.title",defaultMessage:"Timeline database - Inline"},inlineTimelineDatabaseDescription:{id:"newBlock.inlineTimelineDatabase.description",defaultMessage:"Add a Timeline database to this page."},inlineTimelineDatabaseKeywords:{id:"newBlock.inlineTimelineDatabase.fuzzySearchKeywords",defaultMessage:"Timeline database Inline"},fullPageTableDatabaseTitle:{id:"newBlock.fullPageTableDatabase.title",defaultMessage:"Table database - Full page"},fullPageTableDatabaseDescription:{id:"newBlock.fullPageTableDatabase.description",defaultMessage:"Add a Table database as a sub-page."},fullPageTableDatabaseKeywords:{id:"newBlock.fullPageTableDatabase.fuzzySearchKeywords",defaultMessage:"Table database Full page"},fullPageBoardDatabaseTitle:{id:"newBlock.fullPageBoardDatabase.title",defaultMessage:"Board database - Full page"},fullPageBoardDatabaseDescription:{id:"newBlock.fullPageBoardDatabase.description",defaultMessage:"Add a Board database as a sub-page."},fullPageBoardDatabaseKeywords:{id:"newBlock.fullPageBoardDatabase.fuzzySearchKeywords",defaultMessage:"Board database Full page"},fullPageGalleryDatabaseTitle:{id:"newBlock.fullPageGalleryDatabase.title",defaultMessage:"Gallery database - Full page"},fullPageGalleryDatabaseDescription:{id:"newBlock.fullPageGalleryDatabase.description",defaultMessage:"Add a Gallery database as a sub-page."},fullPageGalleryDatabaseKeywords:{id:"newBlock.fullPageGalleryDatabase.fuzzySearchKeywords",defaultMessage:"Gallery database - Full page"},fullPageListDatabaseTitle:{id:"newBlock.fullPageListDatabase.title",defaultMessage:"List database - Full page"},fullPageListDatabaseDescription:{id:"newBlock.fullPageListDatabase.description",defaultMessage:"Add a List database as a sub-page."},fullPageListDatabaseKeywords:{id:"newBlock.fullPageListDatabase.fuzzySearchKeywords",defaultMessage:"List database Full page"},fullPageCalendarDatabaseTitle:{id:"newBlock.fullPageCalendarDatabase.title",defaultMessage:"Calendar database - Full page"},fullPageCalendarDatabaseDescription:{id:"newBlock.fullPageCalendarDatabase.description",defaultMessage:"Add a Calendar database as a sub-page."},fullPageCalendarDatabaseKeywords:{id:"newBlock.fullPageCalendarDatabase.fuzzySearchKeywords",defaultMessage:"Calendar database Full page"},fullPageTimelineDatabaseTitle:{id:"newBlock.fullPageTimelineDatabase.title",defaultMessage:"Timeline database - Full page"},fullPageTimelineDatabaseDescription:{id:"newBlock.fullPageTimelineDatabase.description",defaultMessage:"Add a Timeline database as a sub-page."},fullPageTimelineDatabaseKeywords:{id:"newBlock.fullPageTimelineDatabase.fuzzySearchKeywords",defaultMessage:"Timeline database Full page"},simpleTableTitle:{id:"newBlock.simple_table.title",defaultMessage:"Table"},simpleTableDescription:{id:"newBlock.simple_table.description",defaultMessage:"Add simple tabular content to your page."},simpleTableKeywords:{id:"newBlock.simple_table.fuzzySearchKeywords",defaultMessage:"Table"},tabTitle:{id:"newBlock.tab.title",defaultMessage:"Tabs"},tabDescription:{id:"newBlock.tab.description",defaultMessage:"Organize content in tabs."},tabKeywords:{id:"newBlock.tab.keywords",defaultMessage:"tab tabs tabbed switch toggle"},toggleFormatHeaderTitle:{id:"newBlock.toggleFormatHeader.title",defaultMessage:"Toggle heading 1"},toggleFormatHeaderDescription:{id:"newBlock.toggleFormatHeader.description",defaultMessage:"Hide content inside a large heading."},toggleFormatHeaderKeywords:{id:"newBlock.toggleFormatHeader.fuzzySearchKeywords",defaultMessage:"toggle heading expand 1 h1"},toggleFormatSubHeaderTitle:{id:"newBlock.toggleFormatSubHeader.title",defaultMessage:"Toggle heading 2"},toggleFormatSubHeaderDescription:{id:"newBlock.toggleFormatSubHeader.description",defaultMessage:"Hide content inside a medium heading."},toggleFormatSubHeaderKeywords:{id:"newBlock.toggleFormatSubHeader.fuzzySearchKeywords",defaultMessage:"toggle sub heading expand 2 h2 two"},toggleFormatSubSubHeaderTitle:{id:"newBlock.toggleFormatSubSubHeader.title",defaultMessage:"Toggle heading 3"},toggleFormatSubSubHeaderDescription:{id:"newBlock.toggleFormatSubSubHeader.description",defaultMessage:"Hide content inside a small heading."},toggleFormatSubSubHeaderKeywords:{id:"newBlock.toggleFormatSubSubHeader.fuzzySearchKeywords",defaultMessage:"toggle subsub heading expand 3 h3 three"},columnListTitle:{id:"newBlock.columnList.title",defaultMessage:"Columns"},columnListDescription:{id:"newBlock.columnList.description",defaultMessage:"Create columns of blocks."},columnListKeywords:{id:"newBlock.columnList.fuzzySearchKeywords",defaultMessage:"col column columns block vertical"},column2Title:{id:"newBlock.column2.title",defaultMessage:"2 columns"},column2Description:{id:"newBlock.column2.description",defaultMessage:"Create 2 columns of blocks."},column2Keywords:{id:"newBlock.column2.fuzzySearchKeywords",defaultMessage:"col c2 col2 columns block vertical 2col two"},column3Title:{id:"newBlock.column3.title",defaultMessage:"3 columns"},column3Description:{id:"newBlock.column3.description",defaultMessage:"Create 3 columns of blocks."},column3Keywords:{id:"newBlock.column3.fuzzySearchKeywords",defaultMessage:"col c3 col3 column3 columns 3col three"},column4Title:{id:"newBlock.column4.title",defaultMessage:"4 columns"},column4Description:{id:"newBlock.column4.description",defaultMessage:"Create 4 columns of blocks."},column4Keywords:{id:"newBlock.column4.fuzzySearchKeywords",defaultMessage:"col c4 col4 column4 columns 4col four"},column5Title:{id:"newBlock.column5.title",defaultMessage:"5 columns"},column5Description:{id:"newBlock.column5.description",defaultMessage:"Create 5 columns of blocks."},column5Keywords:{id:"newBlock.column5.fuzzySearchKeywords",defaultMessage:"col c5 col5 column5 columns 5col five"},mermaidCodeTitle:{id:"newBlock.mermaidCode.title",defaultMessage:"Code - Mermaid"},mermaidCodeDescription:{id:"newBlock.mermaidCode.description",defaultMessage:"Create a diagram by writing code."},mermaidCodeKeywords:{id:"newBlock.mermaidCode.fuzzySearchKeywords",defaultMessage:"mermaid diagram graphviz flowchart code"},aiFreePromptBlockTitle:{id:"newBlock.aiFreePromptBlock.title",defaultMessage:"Custom AI Block"},aiFreePromptDescription:{id:"newBlock.aiFreePromptBlock.description",defaultMessage:"Generate content from any instruction."},aiFreePromptKeywords:{id:"newBlock.aiFreePromptBlock.fuzzySearchKeywords",defaultMessage:"ask help question prompt ai custom block content"},drawingTitle:{id:"newBlock.drawing.title",defaultMessage:"Drawing"},drawingDescription:{id:"newBlock.drawing.description",defaultMessage:"Draw and diagram on an infinite canvas."},drawingKeywords:{id:"newBlock.drawing.fuzzySearchKeywords",defaultMessage:"drawing diagram canvas illustration draw sketch tldraw doodle mindmap architecture paint pen"},slideTitle:{id:"newBlock.slide.title",defaultMessage:"Slide"},slideDescription:{id:"newBlock.slide.description",defaultMessage:"Create a presentable slide."},slideKeywords:{id:"newBlock.slide.fuzzySearchKeywords",defaultMessage:"slide present presentation"},transcriptionTitle:{id:"newBlock.transcription.title",defaultMessage:"Transcription"},transcriptionDescription:{id:"newBlock.transcription.description",defaultMessage:"Record and transcribe audio"},transcriptionKeywords:{id:"newBlock.transcription.fuzzySearchKeywords",defaultMessage:"transcription dictation audio speech"},aiSectionBlockTitle:{id:"newBlock.aiSection.title",defaultMessage:"AI Section"},aiSectionKeywords:{id:"newBlock.aiSection.fuzzySearchKeywords",defaultMessage:"ai section heading meeting note summary action items"},asanaImportTitle:{id:"newBlock.asanaImport.import",defaultMessage:"Asana"},asanaImportDescription:{id:"newBlock.asanaImport.description",defaultMessage:"Bring projects and tasks form Asana into Notion."},asanaImportKeywords:{id:"newBlock.asanaImport.fuzzySearchKeywords",defaultMessage:"Asana Projects Tasks Import"},confluenceApiImportTitle:{id:"newBlock.confluenceApiImport.import",defaultMessage:"Confluence"},confluenceApiImportDescription:{id:"newBlock.confluenceApiImport.description",defaultMessage:"Bring documents from Confluence via API into Notion."},confluenceApiImportKeywords:{id:"newBlock.confluenceApiImport.fuzzySearchKeywords",defaultMessage:"Confluence"},googleDocsImportTitle:{id:"newBlock.googleDocsImport.import",defaultMessage:"Google Docs"},googleDocsImportDescription:{id:"newBlock.googleDocsImport.description",defaultMessage:"Bring documents from Google Docs into Notion."},googleDocsImportKeywords:{id:"newBlock.googleDocsImport.fuzzySearchKeywords",defaultMessage:"Google Docs Import"},dropboxPaperImportTitle:{id:"newBlock.dropboxPaperImport.import",defaultMessage:"Dropbox Paper"},dropboxPaperImportDescription:{id:"newBlock.dropboxPaperImport.description",defaultMessage:"Bring documents from Dropbox Paper into Notion."},dropboxPaperImportKeywords:{id:"newBlock.dropboxPaperImport.fuzzySearchKeywords",defaultMessage:"Dropbox Paper Import"},evernoteImportTitle:{id:"newBlock.evernoteImport.import",defaultMessage:"Evernote"},evernoteImportDescription:{id:"newBlock.evernoteImport.description",defaultMessage:"Bring notes from Evernote into Notion."},evernoteImportKeywords:{id:"newBlock.evernoteImport.fuzzySearchKeywords",defaultMessage:"Evernote Import"},wordImportTitle:{id:"newBlock.wordImport.import",defaultMessage:"Word"},wordImportDescription:{id:"newBlock.wordImport.description",defaultMessage:"Bring documents from Microsoft Word into Notion."},wordImportKeywords:{id:"newBlock.wordImport.fuzzySearchKeywords",defaultMessage:"Word Import"},workflowyImportTitle:{id:"newBlock.workflowyImport.import",defaultMessage:"Workflowy"},workflowyImportDescription:{id:"newBlock.workflowyImport.description",defaultMessage:"Bring documents from Workflowy into Notion."},workflowyImportKeywords:{id:"newBlock.workflowyImport.fuzzySearchKeywords",defaultMessage:"Workflowy Import"},mondayImportTitle:{id:"newBlock.mondayImport.import",defaultMessage:"Monday"},mondayImportDescription:{id:"newBlock.mondayImport.description",defaultMessage:"Bring projects & tasks from Monday into Notion."},mondayImportKeywords:{id:"newBlock.mondayImport.fuzzySearchKeywords",defaultMessage:"Monday Import"},trelloImportTitle:{id:"newBlock.trelloImport.import",defaultMessage:"Trello"},trelloImportDescription:{id:"newBlock.trelloImport.description",defaultMessage:"Bring projects & tasks from Trello into Notion."},trelloImportKeywords:{id:"newBlock.trelloImport.fuzzySearchKeywords",defaultMessage:"Trello Import"},quipImportTitle:{id:"newBlock.quipImport.import",defaultMessage:"Quip"},quipImportDescription:{id:"newBlock.quipImport.description",defaultMessage:"Bring documents from Quip into Notion."},quipImportKeywords:{id:"newBlock.quipImport.fuzzySearchKeywords",defaultMessage:"Quip Import"},csvImportTitle:{id:"newBlock.csvImport.import",defaultMessage:"CSV"},csvImportDescription:{id:"newBlock.csvImport.description",defaultMessage:"Bring data from CSV into Notion."},csvImportKeywords:{id:"newBlock.csvImport.fuzzySearchKeywords",defaultMessage:"CSV Import"},genericImportTitle:{id:"newBlock.genericImport.import",defaultMessage:"ZIP"},genericImportDescription:{id:"newBlock.genericImport.description",defaultMessage:"Bring data from other tools into Notion."},genericImportKeywords:{id:"newBlock.genericImport.fuzzySearchKeywords",defaultMessage:"Generic Universal Zip Import"},htmlImportTitle:{id:"newBlock.htmlImport.import",defaultMessage:"HTML"},htmlImportDescription:{id:"newBlock.htmlImport.description",defaultMessage:"Bring data from HTML into Notion."},htmlImportKeywords:{id:"newBlock.htmlImport.fuzzySearchKeywords",defaultMessage:"HTML Import"},markdownImportTitle:{id:"newBlock.markdownImport.import",defaultMessage:"Text and Markdown"},markdownImportDescription:{id:"newBlock.markdownImport.description",defaultMessage:"Bring data from text and markdown into Notion."},markdownImportKeywords:{id:"newBlock.markdownImport.fuzzySearchKeywords",defaultMessage:"Text Markdown Import"},pdfImportTitle:{id:"newBlock.pdfImport.import",defaultMessage:"PDF"},pdfImportDescription:{id:"newBlock.pdfImport.description",defaultMessage:"Bring data from PDF into Notion."},pdfImportKeywords:{id:"newBlock.pdfImport.fuzzySearchKeywords",defaultMessage:"PDF Import"}});function Ge(e){const{key:t,displayName:o,fuzzySearchKeywords:n,blockType:i,thumbnail:r,mobileNativeThumbnail:c,thumbnailPadding:d,tooltipPhoto:u,description:p,createTemplate:m,shouldShow:f,isDisabled:g,disabledTooltipMessage:v,badge:h,postCreateCallback:_,collectionViewType:b,isToggleable:y,icon:S}=e,w=l().Z.formatMessage(n),k=w!==n.defaultMessage?`${w} ${n.defaultMessage}`:w;return{key:t,displayName:l().Z.formatMessage(o),analyticsName:o.defaultMessage,searchName:k,thumbnail:r,mobileNativeThumbnail:c,thumbnailPadding:d,tooltipPhoto:u,description:p?l().Z.formatMessage(p):void 0,templateRootBlockId:"root",blockType:i,formatBlockType:$e(t),createTemplate:m||(()=>a().RecordMapLegacy.create({[s().iU]:{root:{id:"root",type:i}}})),shouldShow:f,isDisabled:g,disabledTooltipMessage:v,badge:h,postCreateCallback:_,collectionViewType:b,isToggleable:y,hasTransformShortcut:s().qB[i],icon:S}}function $e(e){if((0,r().ih)(e))return e}function Qe(e){const{key:t,displayName:o,fuzzySearchKeywords:n,thumbnail:i,icon:r,tooltipPhoto:a,description:s,shouldShow:c,badge:d,postCreateCallback:u,collectionViewType:p,isToggleable:m,action:f}=e,g=l().Z.formatMessage(n),v=g!==n.defaultMessage?`${g} ${n.defaultMessage}`:g;return{key:t,displayName:l().Z.formatMessage(o),analyticsName:o.defaultMessage,searchName:v,thumbnail:i,icon:r,tooltipPhoto:a,description:s?l().Z.formatMessage(s):void 0,templateRootBlockId:"root",shouldShow:c,badge:d,postCreateCallback:u,collectionViewType:p,isToggleable:m,action:f}}const Ye={[r().tD.asanaImport]:Qe({key:r().tD.asanaImport,displayName:We.asanaImportTitle,fuzzySearchKeywords:We.asanaImportKeywords,thumbnail:i().Z.images.import.asanaPng,icon:()=>h,description:We.asanaImportDescription,action:()=>{Ke().default.setState({...Ke().default.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"asana",openedFrom:"slash_command"})},shouldShow:e=>et()}),[r().tD.confluenceApiImport]:Qe({key:r().tD.confluenceApiImport,displayName:We.confluenceApiImportTitle,fuzzySearchKeywords:We.confluenceApiImportKeywords,thumbnail:i().Z.images.import.confluencePng,icon:e=>e?C:x,description:We.confluenceApiImportDescription,action:()=>{Ke().default.setState({...Ke().default.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"confluenceApi",openedFrom:"slash_command"})},shouldShow:e=>et()}),[r().tD.googleDocsImport]:Qe({key:r().tD.googleDocsImport,displayName:We.googleDocsImportTitle,fuzzySearchKeywords:We.googleDocsImportKeywords,thumbnail:i().Z.images.import.googleDocsPng,icon:e=>e?$:Q,description:We.googleDocsImportDescription,badge:"new",action:()=>{Ke().default.setState({...Ke().default.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"gdocs",openedFrom:"slash_command"})},shouldShow:e=>et()}),[r().tD.dropboxPaperImport]:Qe({key:r().tD.dropboxPaperImport,displayName:We.dropboxPaperImportTitle,fuzzySearchKeywords:We.dropboxPaperImportKeywords,thumbnail:i().Z.images.import.dropboxPaperPng,icon:()=>B,description:We.dropboxPaperImportDescription,action:()=>{Ke().default.setState({...Ke().default.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"dropbox",openedFrom:"slash_command"})},shouldShow:e=>et()}),[r().tD.evernoteImport]:Qe({key:r().tD.evernoteImport,displayName:We.evernoteImportTitle,fuzzySearchKeywords:We.evernoteImportKeywords,thumbnail:i().Z.images.import.evernotePng,icon:()=>F,description:We.evernoteImportDescription,action:()=>{Ke().default.setState({...Ke().default.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"evernote",openedFrom:"slash_command"})},shouldShow:e=>et()}),[r().tD.mondayImport]:Qe({key:r().tD.mondayImport,displayName:We.mondayImportTitle,fuzzySearchKeywords:We.mondayImportKeywords,thumbnail:i().Z.images.import.mondayPng,icon:()=>ue,description:We.mondayImportDescription,action:()=>{Ke().default.setState({...Ke().default.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"monday",openedFrom:"slash_command"})},shouldShow:e=>et()&&(0,o(458121).d)()}),[r().tD.quipImport]:Qe({key:r().tD.quipImport,displayName:We.quipImportTitle,fuzzySearchKeywords:We.quipImportKeywords,thumbnail:i().Z.images.import.quipPng,icon:e=>e?me:fe,description:We.quipImportDescription,action:()=>{Ke().default.setState({...Ke().default.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"quip",openedFrom:"slash_command"})},shouldShow:e=>et()}),[r().tD.trelloImport]:Qe({key:r().tD.trelloImport,displayName:We.trelloImportTitle,fuzzySearchKeywords:We.trelloImportKeywords,thumbnail:i().Z.images.import.trelloPng,icon:e=>e?Pe:Ae,description:We.trelloImportDescription,action:()=>{Ke().default.setState({...Ke().default.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"trello",openedFrom:"slash_command"})},shouldShow:e=>et()}),[r().tD.workflowyImport]:Qe({key:r().tD.workflowyImport,displayName:We.workflowyImportTitle,fuzzySearchKeywords:We.workflowyImportKeywords,thumbnail:i().Z.images.import.workflowyPng,icon:e=>e?Oe:Ze,description:We.workflowyImportDescription,action:()=>{Ke().default.setState({...Ke().default.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"workflowy",openedFrom:"slash_command"})},shouldShow:e=>et()}),[r().tD.wordImport]:Qe({key:r().tD.wordImport,displayName:We.wordImportTitle,fuzzySearchKeywords:We.wordImportKeywords,thumbnail:i().Z.images.import.wordPng,icon:()=>Le,description:We.wordImportDescription,action:()=>{Ke().default.setState({...Ke().default.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"docx",openedFrom:"slash_command"})},shouldShow:e=>et()}),[r().tD.csvImport]:Qe({key:r().tD.csvImport,displayName:We.csvImportTitle,fuzzySearchKeywords:We.csvImportKeywords,thumbnail:i().Z.images.import.csvPng,icon:()=>T,description:We.csvImportDescription,action:()=>{Ke().default.setState({...Ke().default.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"csv",openedFrom:"slash_command"})},shouldShow:e=>et()}),[r().tD.htmlImport]:Qe({key:r().tD.htmlImport,displayName:We.htmlImportTitle,fuzzySearchKeywords:We.htmlImportKeywords,thumbnail:i().Z.images.import.htmlPng,icon:()=>oe,description:We.htmlImportDescription,action:()=>{Ke().default.setState({...Ke().default.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"html",openedFrom:"slash_command"})},shouldShow:e=>et()}),[r().tD.markdownImport]:Qe({key:r().tD.markdownImport,displayName:We.markdownImportTitle,fuzzySearchKeywords:We.markdownImportKeywords,thumbnail:i().Z.images.import.textPng,icon:()=>ke,description:We.markdownImportDescription,action:()=>{Ke().default.setState({...Ke().default.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"markdown",openedFrom:"slash_command"})},shouldShow:e=>et()}),[r().tD.genericImport]:Qe({key:r().tD.genericImport,displayName:We.genericImportTitle,fuzzySearchKeywords:We.genericImportKeywords,thumbnail:i().Z.images.import.importPng,description:We.genericImportDescription,action:()=>{Ke().default.setState({...Ke().default.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"genericImporter",openedFrom:"slash_command"})},shouldShow:e=>et()&&(0,o(849668).tt)()}),[r().tD.pdfImport]:Qe({key:r().tD.pdfImport,displayName:We.pdfImportTitle,fuzzySearchKeywords:We.pdfImportKeywords,thumbnail:i().Z.images.import.pdfSvg,description:We.pdfImportDescription,badge:"beta",action:()=>{Ke().default.setState({...Ke().default.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"pdf",openedFrom:"slash_command"})},shouldShow:e=>et()&&(0,o(189629).n)()})},Je={[r().Ti.text]:Ge({key:r().Ti.text,blockType:r().Ti.text,displayName:We.textTitle,fuzzySearchKeywords:We.textKeywords,thumbnail:i().Z.images.blocks.textPng,icon:()=>we,mobileNativeThumbnail:()=>i().Z.images.mab.blocks.textSvg,description:We.textDescription,tooltipPhoto:i().Z.images.tooltips.blocks.textPng}),[r().Ti.encryptedText]:Ge({key:r().Ti.encryptedText,blockType:r().Ti.encryptedText,displayName:We.encryptedTextTitle,fuzzySearchKeywords:We.textKeywords,thumbnail:i().Z.images.blocks.textPng,icon:()=>o(629489)._,mobileNativeThumbnail:()=>i().Z.images.mab.blocks.encryptedTextSvg,description:We.encryptedTextDescription,tooltipPhoto:i().Z.images.tooltips.blocks.textPng}),[r().Ti.page]:Ge({key:r().Ti.page,blockType:r().Ti.page,displayName:We.pageTitle,fuzzySearchKeywords:We.pageKeywords,thumbnail:i().Z.images.blocks.pagePng,icon:()=>o(360325).U,mobileNativeThumbnail:()=>i().Z.images.mab.blocks.pageSvg,description:We.pageDescription,tooltipPhoto:i().Z.images.tooltips.blocks.pagePng}),[r().Ti.linkToPage]:Ge({key:r().Ti.linkToPage,blockType:r().Ti.linkToPage,displayName:We.linkToPageTitle,fuzzySearchKeywords:We.linkToPageKeywords,thumbnail:i().Z.images.blocks.linkPng,icon:()=>o(421534).C,mobileNativeThumbnail:()=>i().Z.images.mab.blocks.linkToPageSvg,description:We.linkToPageDescription,tooltipPhoto:i().Z.images.tooltips.blocks.linkToPagePng}),[r().Ti.transclusionContainer]:Ge({key:r().Ti.transclusionContainer,blockType:r().Ti.transclusionContainer,displayName:We.transclusionContainerTitle,fuzzySearchKeywords:We.transclusionContainerKeywords,thumbnail:i().Z.images.blocks.transclusionPng,icon:()=>ye,mobileNativeThumbnail:()=>i().Z.images.mab.advanced.syncedBlockSvg,description:We.transclusionContainerDescription,tooltipPhoto:i().Z.images.tooltips.blocks.transclusionPng,shouldShow:e=>!(0,ze().wTx)(e),createTemplate:e=>He()._Z()}),[r().Ti.toDo]:Ge({key:r().Ti.toDo,blockType:r().Ti.toDo,displayName:We.toDoTitle,fuzzySearchKeywords:We.toDoKeywords,thumbnail:i().Z.images.blocks.toDoPng,icon:()=>Ie,mobileNativeThumbnail:()=>i().Z.images.mab.blocks.toDoSvg,description:We.toDoDescription,tooltipPhoto:i().Z.images.tooltips.blocks.toDoListPng}),[r().Ti.header]:Ge({key:r().Ti.header,blockType:r().Ti.header,displayName:We.headerTitle,fuzzySearchKeywords:We.headerKeywords,thumbnail:i().Z.images.blocks.headerPng,icon:()=>Y,mobileNativeThumbnail:()=>i().Z.images.mab.blocks.headerH1Svg,description:We.headerDescription,tooltipPhoto:i().Z.images.tooltips.blocks.headerPng}),[r().Ti.subHeader]:Ge({key:r().Ti.subHeader,blockType:r().Ti.subHeader,displayName:We.subHeaderTitle,fuzzySearchKeywords:We.subHeaderKeywords,thumbnail:i().Z.images.blocks.subheaderPng,mobileNativeThumbnail:()=>i().Z.images.mab.blocks.headerH2Svg,icon:()=>J,description:We.subHeaderDescription,tooltipPhoto:i().Z.images.tooltips.blocks.subHeaderPng}),[r().Ti.subSubHeader]:Ge({key:r().Ti.subSubHeader,blockType:r().Ti.subSubHeader,displayName:We.subSubHeaderTitle,fuzzySearchKeywords:We.subSubHeaderKeywords,thumbnail:i().Z.images.blocks.subsubheaderPng,icon:()=>X,mobileNativeThumbnail:()=>i().Z.images.mab.blocks.headerH3Svg,description:We.subSubHeaderDescription,tooltipPhoto:i().Z.images.tooltips.blocks.subsubheaderPng}),[r().Ti.image]:Ge({key:r().Ti.image,blockType:r().Ti.image,displayName:We.imageTitle,fuzzySearchKeywords:We.imageKeywords,description:We.imageDescription,tooltipPhoto:i().Z.images.tooltips.blocks.imagePng,thumbnail:i().Z.images.blocks.imagePng,icon:()=>ne,mobileNativeThumbnail:()=>i().Z.images.mab.media.imageBlockSvg}),[r().Ti.bookmark]:Ge({key:r().Ti.bookmark,blockType:r().Ti.bookmark,displayName:We.bookmarkTitle,fuzzySearchKeywords:We.bookmarkKeywords,thumbnail:i().Z.images.blocks.webBookmarkPng,icon:()=>b,mobileNativeThumbnail:()=>i().Z.images.mab.media.bookmarkSvg,description:We.bookmarkDescription,tooltipPhoto:i().Z.images.tooltips.blocks.webBookmarkPng}),[r().Ti.divider]:Ge({key:r().Ti.divider,blockType:r().Ti.divider,displayName:We.dividerTitle,fuzzySearchKeywords:We.dividerKeywords,thumbnail:i().Z.images.blocks.dividerPng,icon:()=>A,mobileNativeThumbnail:()=>i().Z.images.mab.blocks.dividerSvg,description:We.dividerDescription,tooltipPhoto:i().Z.images.tooltips.blocks.dividerPng}),[r().Ti.code]:Ge({key:r().Ti.code,blockType:r().Ti.code,displayName:We.codeTitle,fuzzySearchKeywords:We.codeKeywords,thumbnail:i().Z.images.blocks.codePng,icon:()=>w,mobileNativeThumbnail:()=>i().Z.images.mab.media.codeSvg,description:We.codeDescription,tooltipPhoto:i().Z.images.tooltips.blocks.codePng}),[r().Ti.quote]:Ge({key:r().Ti.quote,blockType:r().Ti.quote,displayName:We.quoteTitle,fuzzySearchKeywords:We.quoteKeywords,thumbnail:i().Z.images.blocks.quotePng,icon:()=>ge,mobileNativeThumbnail:()=>i().Z.images.mab.blocks.quoteSvg,description:We.quoteDescription,tooltipPhoto:i().Z.images.tooltips.blocks.quotePng}),[r().Ti.bulletedList]:Ge({key:r().Ti.bulletedList,blockType:r().Ti.bulletedList,displayName:We.bulletedListTitle,fuzzySearchKeywords:We.bulletedListKeywords,thumbnail:i().Z.images.blocks.bulletedListPng,icon:()=>y,mobileNativeThumbnail:()=>i().Z.images.mab.blocks.bulletedListSvg,description:We.bulletedListDescription,tooltipPhoto:i().Z.images.tooltips.blocks.bulletedListPng}),[r().Ti.numberedList]:Ge({key:r().Ti.numberedList,blockType:r().Ti.numberedList,displayName:We.numberedListTitle,fuzzySearchKeywords:We.numberedListKeywords,thumbnail:i().Z.images.blocks.numberedListPng,icon:()=>pe,mobileNativeThumbnail:()=>i().Z.images.mab.blocks.numberedListSvg,description:We.numberedListDescription,tooltipPhoto:i().Z.images.tooltips.blocks.numberedListPng}),[r().Ti.toggle]:Ge({key:r().Ti.toggle,blockType:r().Ti.toggle,displayName:We.toggleTitle,fuzzySearchKeywords:We.toggleKeywords,thumbnail:i().Z.images.blocks.togglePng,icon:()=>Me,mobileNativeThumbnail:()=>i().Z.images.mab.blocks.toggleListSvg,description:We.toggleDescription,tooltipPhoto:i().Z.images.tooltips.blocks.toggleListPng,isToggleable:!0}),[r().Ti.file]:Ge({key:r().Ti.file,blockType:r().Ti.file,displayName:We.fileTitle,fuzzySearchKeywords:We.fileKeywords,thumbnail:i().Z.images.blocks.filePng,icon:()=>O,mobileNativeThumbnail:()=>i().Z.images.mab.media.fileSvg,tooltipPhoto:i().Z.images.tooltips.blocks.filePng,description:We.fileDescription}),[r().Ti.video]:Ge({key:r().Ti.video,blockType:r().Ti.video,displayName:We.videoTitle,fuzzySearchKeywords:We.videoKeywords,thumbnail:i().Z.images.blocks.videoPng,icon:()=>Fe,mobileNativeThumbnail:()=>i().Z.images.mab.media.videoSvg,tooltipPhoto:i().Z.images.tooltips.blocks.videoPng,description:We.videoDescription}),[r().Ti.audio]:Ge({key:r().Ti.audio,blockType:r().Ti.audio,displayName:We.audioTitle,fuzzySearchKeywords:We.audioKeywords,thumbnail:i().Z.images.blocks.audioPng,icon:()=>_,mobileNativeThumbnail:()=>i().Z.images.mab.media.audioSvg,description:We.audioDescription}),[r().Ti.embed]:Ge({key:r().Ti.embed,blockType:r().Ti.embed,displayName:We.embedTitle,fuzzySearchKeywords:We.embedKeywords,thumbnail:i().Z.images.blocks.embedPng,icon:()=>D,mobileNativeThumbnail:()=>i().Z.images.mab.embeds.embedsSvg,description:We.embedDescription}),[r().Ti.drive]:Ge({key:r().Ti.drive,blockType:r().Ti.drive,displayName:We.driveTitle,fuzzySearchKeywords:We.driveKeywords,thumbnail:i().Z.images.blocks.drivePng,icon:()=>o(959328).c,description:We.driveDescription,shouldShow:e=>(0,ze().P5O)()}),[r().Ti.figma]:Ge({key:r().Ti.figma,blockType:r().Ti.figma,displayName:We.figmaTitle,fuzzySearchKeywords:We.figmaKeywords,thumbnail:i().Z.images.blocks.figmaPng,icon:()=>L,description:We.figmaDescription}),[r().Ti.loom]:Ge({key:r().Ti.loom,blockType:r().Ti.loom,displayName:We.loomTitle,fuzzySearchKeywords:We.loomKeywords,thumbnail:i().Z.images.blocks.loomPng,thumbnailPadding:2,icon:()=>re,description:We.loomDescription}),[r().Ti.typeform]:Ge({key:r().Ti.typeform,blockType:r().Ti.typeform,displayName:We.typeformTitle,fuzzySearchKeywords:We.typeformKeywords,thumbnail:i().Z.images.blocks.typeformPng,icon:e=>e?De:Ue,description:We.typeformDescription}),[r().Ti.codepen]:Ge({key:r().Ti.codepen,blockType:r().Ti.codepen,displayName:We.codepenTitle,fuzzySearchKeywords:We.codepenKeywords,thumbnail:i().Z.images.blocks.codepenPng,icon:e=>e?k:I,description:We.codepenDescription}),[r().Ti.tweet]:Ge({key:r().Ti.tweet,blockType:r().Ti.tweet,displayName:We.tweetTitle,thumbnailPadding:8,fuzzySearchKeywords:We.tweetKeywords,thumbnail:i().Z.images.blocks.twitterPng,icon:e=>e?Re:Be,description:We.tweetDescription}),[r().Ti.gist]:Ge({key:r().Ti.gist,blockType:r().Ti.gist,displayName:We.gistTitle,fuzzySearchKeywords:We.gistKeywords,thumbnail:i().Z.images.blocks.githubPng,thumbnailPadding:2,icon:e=>e?W:G,description:We.gistDescription}),[r().Ti.maps]:Ge({key:r().Ti.maps,blockType:r().Ti.maps,displayName:We.mapsTitle,fuzzySearchKeywords:We.mapsKeywords,thumbnail:i().Z.images.blocks.mapsPng,icon:()=>ae,description:We.mapsDescription}),[r().Ti.framer]:Ge({key:r().Ti.framer,blockType:r().Ti.framer,displayName:We.framerTitle,fuzzySearchKeywords:We.framerKeywords,thumbnail:i().Z.images.blocks.framerPng,icon:e=>e?H:q,description:We.framerDescription}),[r().Ti.invision]:Ge({key:r().Ti.invision,blockType:r().Ti.invision,displayName:We.invisionTitle,fuzzySearchKeywords:We.invisionKeywords,thumbnail:i().Z.images.blocks.invisionPng,icon:()=>ie,description:We.invisionDescription}),[r().Ti.equation]:Ge({key:r().Ti.equation,blockType:r().Ti.equation,displayName:We.equationTitle,fuzzySearchKeywords:We.equationKeywords,thumbnail:i().Z.images.blocks.texPng,icon:()=>U,mobileNativeThumbnail:()=>i().Z.images.mab.advanced.blockEquationSvg,tooltipPhoto:i().Z.images.tooltips.blocks.mathPng,description:We.equationDescription}),[r().Ti.pdf]:Ge({key:r().Ti.pdf,blockType:r().Ti.pdf,displayName:We.pdfTitle,fuzzySearchKeywords:We.pdfKeywords,thumbnail:i().Z.images.blocks.pdfPng,thumbnailPadding:6,description:We.pdfDescription}),[r().Ti.factory]:Ge({displayName:We.factoryTitle,fuzzySearchKeywords:We.factoryKeywords,thumbnail:i().Z.images.blocks.templateButtonPng,icon:()=>E,key:r().Ti.factory,blockType:r().Ti.factory,description:We.factoryDescription,tooltipPhoto:i().Z.images.tooltips.blocks.templateButtonPng,createTemplate:He().sw,shouldShow:()=>!1}),[r().Ti.button]:Ge({displayName:We.buttonTitle,fuzzySearchKeywords:We.buttonKeywords,thumbnail:i().Z.images.blocks.templateButtonPng,icon:()=>v,mobileNativeThumbnail:()=>i().Z.images.mab.advanced.buttonSvg,key:r().Ti.button,blockType:r().Ti.button,description:We.buttonDescription,tooltipPhoto:i().Z.images.tooltips.blocks.templateButtonPng,createTemplate:He().ax}),[r().Ti.workflow]:Ge({displayName:We.workflowTitle,fuzzySearchKeywords:We.workflowKeywords,thumbnail:i().Z.images.blocks.templateButtonPng,icon:()=>v,mobileNativeThumbnail:()=>i().Z.images.mab.advanced.workflowSvg,key:r().Ti.workflow,blockType:r().Ti.workflow,description:We.workflowDescription,tooltipPhoto:i().Z.images.tooltips.blocks.templateButtonPng,shouldShow:()=>je().default.checkGate({gateName:"workflows"}),createTemplate:He().$B}),[r().Ti.breadcrumb]:Ge({displayName:We.breadcrumbTitle,thumbnail:i().Z.images.blocks.breadcrumbPng,icon:()=>Z,mobileNativeThumbnail:()=>i().Z.images.mab.advanced.breadcrumbSvg,tooltipPhoto:i().Z.images.tooltips.blocks.breadcrumbPng,description:We.breadcrumbDescription,fuzzySearchKeywords:We.breadcrumbKeywords,key:r().Ti.breadcrumb,blockType:r().Ti.breadcrumb}),[r().Ti.callout]:Ge({key:r().Ti.callout,blockType:r().Ti.callout,displayName:We.calloutTitle,thumbnail:i().Z.images.blocks.calloutPng,icon:()=>S,mobileNativeThumbnail:()=>i().Z.images.mab.blocks.calloutSvg,description:We.calloutDescription,fuzzySearchKeywords:We.calloutKeywords,tooltipPhoto:i().Z.images.tooltips.blocks.calloutPng,createTemplate:He().dq}),[r().Ti.tableOfContents]:Ge({displayName:We.table_of_contentsTitle,fuzzySearchKeywords:We.table_of_contentsKeywords,thumbnail:i().Z.images.blocks.tableOfContentsPng,icon:()=>Se,mobileNativeThumbnail:()=>i().Z.images.mab.advanced.tableOfContentsSvg,tooltipPhoto:i().Z.images.tooltips.blocks.tableOfContentsPng,description:We.table_of_contentsDescription,key:r().Ti.tableOfContents,blockType:r().Ti.tableOfContents}),[r().Ti.slide]:Ge({key:r().Ti.slide,blockType:r().Ti.slide,displayName:We.slideTitle,thumbnail:i().Z.images.blocks.slideblockPng,icon:()=>M,description:We.slideDescription,fuzzySearchKeywords:We.slideKeywords,tooltipPhoto:i().Z.images.blocks.slideblockPng,shouldShow:e=>(0,ze().zqE)(e)}),[r().Ti.transcription]:Ge({key:r().Ti.transcription,blockType:r().Ti.transcription,displayName:We.transcriptionTitle,thumbnail:i().Z.images.blocks.templateButtonPng,icon:()=>o(233227).q,description:We.transcriptionDescription,fuzzySearchKeywords:We.transcriptionKeywords,shouldShow:()=>(0,ze().MAw)()}),[r().Ti.whimsical]:Ge({key:r().Ti.whimsical,blockType:r().Ti.whimsical,displayName:We.whimsicalTitle,fuzzySearchKeywords:We.whimsicalKeywords,thumbnail:i().Z.images.blocks.whimsicalPng,icon:e=>e?Ne:Ve,description:We.whimsicalDescription}),[r().Ti.mixpanel]:Ge({key:r().Ti.mixpanel,blockType:r().Ti.mixpanel,displayName:We.mixpanelTitle,fuzzySearchKeywords:We.mixpanelKeywords,thumbnail:i().Z.images.blocks.mixpanelPng,thumbnailPadding:10,icon:e=>e?ce:de,description:We.mixpanelDescription}),[r().Ti.miro]:Ge({key:r().Ti.miro,blockType:r().Ti.miro,displayName:We.miroTitle,fuzzySearchKeywords:We.miroKeywords,thumbnail:i().Z.images.blocks.miroPng,icon:()=>le,description:We.miroDescription}),[r().Ti.abstract]:Ge({key:r().Ti.abstract,blockType:r().Ti.abstract,displayName:We.abstractTitle,thumbnail:i().Z.images.blocks.abstractPng,icon:e=>e?p:m,description:We.abstractDescription,fuzzySearchKeywords:We.abstractKeywords}),[r().Ti.sketch]:Ge({key:r().Ti.sketch,blockType:r().Ti.sketch,displayName:We.sketchTitle,thumbnail:i().Z.images.blocks.sketchPng,icon:e=>e?_e:be,description:We.sketchDescription,fuzzySearchKeywords:We.sketchKeywords}),[r().Ti.excalidraw]:Ge({key:r().Ti.excalidraw,blockType:r().Ti.excalidraw,displayName:We.excalidrawTitle,thumbnail:i().Z.images.blocks.excalidrawPng,thumbnailPadding:6,icon:e=>e?N:V,description:We.excalidrawDescription,fuzzySearchKeywords:We.excalidrawKeywords}),[r().Ti.replit]:Ge({key:r().Ti.replit,blockType:r().Ti.replit,displayName:We.replitTitle,thumbnail:i().Z.images.blocks.replitPng,thumbnailPadding:2,icon:e=>e?ve:he,description:We.replitDescription,fuzzySearchKeywords:We.replitKeywords}),[r().Ti.table]:Ge({key:r().Ti.table,blockType:r().Ti.table,displayName:We.simpleTableTitle,thumbnail:i().Z.images.blocks.simpleTablePng,icon:()=>o(320808).d,mobileNativeThumbnail:()=>i().Z.images.mab.blocks.simpleTableSvg,description:We.simpleTableDescription,fuzzySearchKeywords:We.simpleTableKeywords,tooltipPhoto:i().Z.images.tooltips.blocks.simpleTablePng,createTemplate:()=>He().S7()}),[r().Ti.tab]:Ge({key:r().Ti.tab,blockType:r().Ti.tab,displayName:We.tabTitle,thumbnail:i().Z.images.blocks.tabsPng,icon:()=>K,mobileNativeThumbnail:()=>i().Z.images.mab.advanced.tabsSvg,tooltipPhoto:i().Z.images.tooltips.blocks.tabsPng,description:We.tabDescription,fuzzySearchKeywords:We.tabKeywords,createTemplate:()=>He().ZW(),shouldShow:e=>(0,ze().$cr)(e)}),[r().Ti.hex]:Ge({key:r().Ti.hex,blockType:r().Ti.hex,displayName:We.hexTitle,thumbnail:i().Z.images.blocks.hexPng,icon:e=>e?ee:te,description:We.hexDescription,fuzzySearchKeywords:We.hexKeywords}),[r().Ti.deepnote]:Ge({key:r().Ti.deepnote,blockType:r().Ti.deepnote,displayName:We.deepnoteTitle,thumbnail:i().Z.images.blocks.deepnotePng,icon:()=>P,description:We.deepnoteDescription,fuzzySearchKeywords:We.deepnoteKeywords}),[r().MF.toggleFormatHeaderBlock]:Ge({key:r().MF.toggleFormatHeaderBlock,blockType:r().Ti.header,displayName:We.toggleFormatHeaderTitle,fuzzySearchKeywords:We.toggleFormatHeaderKeywords,thumbnail:i().Z.images.blocks.toggleHeading1Png,icon:()=>Ce,mobileNativeThumbnail:()=>i().Z.images.mab.advanced.toggleHeading1Svg,description:We.toggleFormatHeaderDescription,tooltipPhoto:i().Z.images.tooltips.blocks.toggleH1Png,createTemplate:()=>He().UG(r().Ti.header),isToggleable:!0}),[r().MF.toggleFormatSubHeaderBlock]:Ge({key:r().MF.toggleFormatSubHeaderBlock,blockType:r().Ti.subHeader,displayName:We.toggleFormatSubHeaderTitle,fuzzySearchKeywords:We.toggleFormatSubHeaderKeywords,thumbnail:i().Z.images.blocks.toggleHeading2Png,icon:()=>xe,mobileNativeThumbnail:()=>i().Z.images.mab.advanced.toggleHeading2Svg,description:We.toggleFormatSubHeaderDescription,tooltipPhoto:i().Z.images.tooltips.blocks.toggleH2Png,createTemplate:()=>He().UG(r().Ti.subHeader),isToggleable:!0}),[r().MF.toggleFormatSubSubHeaderBlock]:Ge({key:r().MF.toggleFormatSubSubHeaderBlock,blockType:r().Ti.subSubHeader,displayName:We.toggleFormatSubSubHeaderTitle,fuzzySearchKeywords:We.toggleFormatSubSubHeaderKeywords,thumbnail:i().Z.images.blocks.toggleHeading3Png,icon:()=>Te,mobileNativeThumbnail:()=>i().Z.images.mab.advanced.toggleHeading3Svg,description:We.toggleFormatSubSubHeaderDescription,tooltipPhoto:i().Z.images.tooltips.blocks.toggleH3Png,createTemplate:()=>He().UG(r().Ti.subSubHeader),isToggleable:!0}),[r().Ti.columnList]:Ge({key:r().Ti.columnList,blockType:r().Ti.columnList,displayName:We.columnListTitle,fuzzySearchKeywords:We.columnListKeywords,thumbnail:i().Z.images.blocks.columnListPng,description:We.columnListDescription,tooltipPhoto:i().Z.images.tooltips.blocks.columnListPng,createTemplate:()=>He().n_(2),shouldShow:e=>!e.environment.device.isPhone}),[r().MF.column2Block]:Ge({key:r().MF.column2Block,blockType:r().Ti.columnList,displayName:We.column2Title,fuzzySearchKeywords:We.column2Keywords,thumbnail:i().Z.images.blocks.columnListPng,icon:()=>Ee,mobileNativeThumbnail:()=>i().Z.images.mab.advanced.twoColumnSvg,description:We.column2Description,tooltipPhoto:i().Z.images.tooltips.blocks.columnListPng,createTemplate:()=>He().n_(2),shouldShow:e=>!e.environment.device.isPhone&&!e.blocks.some(qe().hF)}),[r().MF.column3Block]:Ge({key:r().MF.column3Block,blockType:r().Ti.columnList,displayName:We.column3Title,fuzzySearchKeywords:We.column3Keywords,thumbnail:i().Z.images.blocks.columnListPng,icon:()=>o(375033).i,mobileNativeThumbnail:()=>i().Z.images.mab.advanced.threeColumnSvg,description:We.column3Description,tooltipPhoto:i().Z.images.tooltips.blocks.columnListPng,createTemplate:()=>He().n_(3),shouldShow:e=>!e.environment.device.isPhone&&!e.blocks.some(qe().hF)}),[r().MF.column4Block]:Ge({key:r().MF.column4Block,blockType:r().Ti.columnList,displayName:We.column4Title,fuzzySearchKeywords:We.column4Keywords,thumbnail:i().Z.images.blocks.columnListPng,icon:()=>z,mobileNativeThumbnail:()=>i().Z.images.mab.advanced.fourColumnSvg,description:We.column4Description,tooltipPhoto:i().Z.images.tooltips.blocks.columnListPng,createTemplate:()=>He().n_(4),shouldShow:e=>!e.environment.device.isPhone&&!e.blocks.some(qe().hF)}),[r().MF.column5Block]:Ge({key:r().MF.column5Block,blockType:r().Ti.columnList,displayName:We.column5Title,fuzzySearchKeywords:We.column5Keywords,thumbnail:i().Z.images.blocks.columnListPng,icon:()=>j,mobileNativeThumbnail:()=>i().Z.images.mab.advanced.fiveColumnSvg,description:We.column5Description,tooltipPhoto:i().Z.images.tooltips.blocks.columnListPng,createTemplate:()=>He().n_(5),shouldShow:e=>!e.environment.device.isPhone&&!e.blocks.some(qe().hF)}),[r().MF.mermaidCodeBlock]:Ge({key:r().MF.mermaidCodeBlock,blockType:r().Ti.code,displayName:We.mermaidCodeTitle,fuzzySearchKeywords:We.mermaidCodeKeywords,thumbnail:i().Z.images.blocks.codePng,icon:()=>se,mobileNativeThumbnail:()=>i().Z.images.mab.advanced.codeMermaidSvg,description:We.mermaidCodeDescription,tooltipPhoto:i().Z.images.tooltips.blocks.codePng,createTemplate:()=>He().iD("Mermaid","graph TD\n  Mermaid --\x3e Diagram"),postCreateCallback:e=>{n().default.afterNextFlush((()=>{n().default.afterNextFlush((async()=>{const t=await Promise.resolve().then(o.bind(o,990966)),n=o(32969).C.find((t=>t.props.store.id===e.id)),i=null==n?void 0:n.props.store,r=i&&(0,o(339523).mh)(i);if(r){var a;const e=(0,o(191003).TD)({store:r,selection:{startIndex:0,endIndex:(null===(a=(0,o(550054).x0)(r))||void 0===a?void 0:a.endIndex)??0}});t.setMultiSelection({multiSelection:e})}}))}))}}),[r().MF.aiFreePromptBlock]:Ge({key:r().MF.aiFreePromptBlock,blockType:r().Ti.aiBlock,displayName:We.aiFreePromptBlockTitle,fuzzySearchKeywords:We.aiFreePromptKeywords,thumbnail:i().Z.images.blocks.calloutPng,icon:()=>g,description:We.aiFreePromptDescription,badge:"ai",createTemplate:()=>He().Jy("helpMeWrite"),shouldShow:e=>!e.environment.device.isPhone&&function(e){let{publicEditMode:t}=e;return(0,o(982855).GD)(t)}(e)}),[r().Ti.drawing]:Ge({key:r().Ti.drawing,blockType:r().Ti.drawing,displayName:We.drawingTitle,fuzzySearchKeywords:We.drawingKeywords,thumbnailPadding:8,thumbnail:i().Z.images.externalIntegrations.acmeIconPng,icon:()=>R,mobileNativeThumbnail:()=>i().Z.images.mab.media.drawingSvg,description:We.drawingDescription,shouldShow:e=>(0,o(286338).A3)(),createTemplate:()=>He().Fr()})},Xe=(Je[r().Ti.callout],Je[r().Ti.toggle],[r().MF.aiFreePromptBlock]);function et(){return"on"===je().default.getEligibleGroup({experimentId:"slash_command_import",defaultGroup:"control"})}},624712:(e,t,o)=>{o.d(t,{Im:()=>c,NX:()=>l,xK:()=>d});var n=()=>o(730120),i=()=>o(142735),r=()=>o(998411);function a(){const e=(0,r().m)(),t=n().vF.create(e);return Object.freeze({timeZone:e,zone:t})}const s=o(263184).default.createValue(a(),{name:"currentTimeZoneStore"});function l(){return s.state}function c(){return(0,i().VK)((()=>l()),[])}function d(){const e=a();s.state.timeZone!==e.timeZone&&s.setState(e)}},606757:(e,t,o)=>{o.d(t,{Jy:()=>r,KX:()=>a,Zr:()=>s});var n=()=>o(876822),i=()=>o(718959);function r(){const e=(0,i().np)(),t=n().default.state.currentSpaceStore;return e&&e.getSpaceId()!==(null==t?void 0:t.id)?null==e?void 0:e.getSpaceStore():t}function a(e){const t=e.parentStore??r();return null==t?void 0:t.getRecordStore(t,e.pointer)}function s(e){const{spaceStore:t}=e;return!!t&&(t.canAdmin()||t.canRead()&&!t.getSetting("custom_emoji_creation_only_admin"))}},670655:(e,t,o)=>{o.d(t,{$0:()=>c,AN:()=>g,D7:()=>m,Fl:()=>f,kq:()=>_,p1:()=>h,pJ:()=>v,uX:()=>u,vC:()=>p});var n=()=>o(532850),i=()=>o(109477),r=()=>o(696459),a=()=>o(876822),s=()=>o(482162);function l(){const{mainEditorCurrentBlockStore:e}=a().default.state;return s().default.state.open&&s().default.state.targetStore||e}function c(){var e;return null===(e=l())||void 0===e?void 0:e.getAssociatedCollectionStore()}function d(){const e=l();return c()||e}function u(){const e=d();if(!e)return;return p(e.getFormat().page_section_visibility)}function p(e){return(null==e?void 0:e.comments)??i().dN.comments}function m(){const e=d();if(!e)return;return f(e.getFormat().page_section_visibility)}function f(e){return(null==e?void 0:e.margin_comments)??i().dN.margin_comments}function g(e){return"always_show"===e?"always_show":"section_hide"===e||"inline"===e||"minimal"===e?"section_hide":"section_show"===e||"section_collapsed"===e?"section_collapsed":void(0,r().t1)(e)}function v(e){return g((null==e?void 0:e.backlinks)??i().dN.backlinks)}function h(){var e,t;const o=(null===(e=c())||void 0===e||null===(e=e.getParentBlockStore())||void 0===e?void 0:e.isLocked())??!1;return((null===(t=l())||void 0===t?void 0:t.isLocked())??!1)||o}function _(e){const{propertySchema:t}=e,{type:o}=t,i=(0,n().gC)(t);return!(["created_time","created_by","last_edited_time","last_edited_by"].includes(o)||i)}},767608:(e,t,o)=>{o.d(t,{Fp:()=>c,HL:()=>l,u6:()=>d});var n=()=>o(142735),i=()=>o(263184),r=()=>o(874459),a=()=>o(624712);const s=new Map;function l(e){if(!s.has(e)){const t=i().default.createValue((()=>(0,r().Uu)(e)),{name:"store"});s.set(e,t)}return s.get(e).state}function c(){return(0,n().VK)((()=>{const{zone:e}=(0,a().NX)();return l(e)}),[])}function d(){for(const[e,t]of s){const o=(0,r().Uu)(e);t.state.equals(o)||t.setState(o)}}},656573:(e,t,o)=>{o.d(t,{H:()=>a,W:()=>r});var n=()=>o(643432),i=()=>o(916673);function r(e){const t=(0,i().Qc)(e);return t.query[n().JF]="true",(0,i().bf)({url:(0,i().WU)(t),query:t.query,hash:t.hash||void 0})}function a(e){const t=(0,i().Qc)((0,i().T1)(e));return t.query[n().f6]="true",(0,i().bf)({url:(0,i().WU)(t),query:t.query,hash:t.hash||void 0})}},892306:(e,t,o)=>{async function n(){const e={};if(!window.__isElectron)return{};const t=window.__desktopDeviceInfo;if(t)e.desktopOsVersion=t.os,e.desktopKernelVersion=t.kernel,e.desktopElectronVersion=t.electron,e.desktopChromiumVersion=t.chromium,e.desktopArch=t.arch,e.desktopPlatform=t.platform;else{const t=["architecture","fullVersionList","platformVersion"],n=await navigator.userAgentData.getHighEntropyValues(t);e.desktopArch="arm"===(o=n.architecture)?"arm64":o,e.desktopOsVersion=n.platformVersion,e.desktopPlatform=window.__platform;const i=navigator.userAgent.match(/Chrome\/([\d.]+)/);e.desktopChromiumVersion=i?i[1]:"Unknown";const r=navigator.userAgent.match(/Electron\/([\d.]+)/);e.desktopElectronVersion=r?r[1]:"Unknown"}var o;return e}o.r(t),o.d(t,{getDesktopDeviceInfo:()=>n})},265075:(e,t,o)=>{o.d(t,{$Z:()=>r,GU:()=>n,OS:()=>a,cr:()=>i});o(670560);function n(e){const{ids:t,table:o,userStore:n}=e,r=[];for(const i of t){const e=n.getRecordModel({id:i,table:o});e&&r.push(e)}return i(r)}function i(e){return e.slice().sort(((e,t)=>t.created_at-e.created_at))}const r=["all","internal","public"],a={[o(696056).cZ]:"internal",[o(85073).K2]:"public"}},395861:(e,t,o)=>{function n(e,t,o,n){return Math.sqrt((e-o)*(e-o)+(t-n)*(t-n))}o.d(t,{Z:()=>n})},435441:(e,t,o)=>{o.d(t,{Gs:()=>a,IL:()=>p,OW:()=>u,UG:()=>r,kA:()=>m,kK:()=>s,kd:()=>c,oG:()=>d,r3:()=>f,sh:()=>l});o(670560);var n=()=>o(659278),i=()=>o(513670);function r(e){try{return Boolean(e&&void 0!==e.nodeType)}catch(t){return!1}}function a(e){return r(e)&&e.nodeType===Node.TEXT_NODE}function s(e){return r(e)&&e.nodeType===Node.ELEMENT_NODE}function l(e,t){for(;r(e)&&!t(e);)e=e.parentNode;return e}function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(r(e)){for(const o of n().p4(e.childNodes))a(o)?t.push(o):o.childNodes&&c(o,t);return t}return[]}function d(e,t){return r(e)&&r(t)?i().cx(e.childNodes,(e=>e===t)):-1}const u=function(){if("undefined"==typeof window)return!0;if(window.InputEvent&&"function"==typeof window.InputEvent.prototype.getTargetRanges)return!0;const e=window.document.createElement("div");return e.contentEditable="true","onbeforeinput"in e}();function p(e){!u&&e.preventDefault&&e.preventDefault()}function m(e){return"inputType"in e}function f(e,t){return e!==t&&e.contains(t)}},473244:(e,t,o)=>{o.d(t,{AO:()=>a,he:()=>n,i7:()=>i,uw:()=>r});const n="PageLayoutEditorContext",i="WorkflowTemplatesOnboarding",r="ChartDrilldownContext";function a(e){return e.name===i}},769972:(e,t,o)=>{o.d(t,{X:()=>i});var n=()=>o(594546);function i(e){(0,n().j)({environment:e.environment,event:{eventName:"duplicate_block_duration",eventProperties:{time:e.time,success:e.success,user_action:e.user_action,is_duplication_local:e.is_duplication_local,duplication_size:e.duplication_size,is_await_post_submit_transaction:e.is_await_post_submit_transaction,is_skip_free_chart_post_submit_transaction:e.is_skip_free_chart_post_submit_transaction}}})}},316834:(e,t,o)=>{o.d(t,{i:()=>a,z:()=>r});o(267602),o(470928);var n=()=>o(513670),i=()=>o(156538);function r(e){const t=i().E.getMembersByDOMOrder({filter:e=>!e.props.store.inMemoryRecordCache.isMockTextStore}),o=n().cx(t,(t=>t.props.store===e)),r=t.find(((e,t)=>t>o&&e.props.canInsertText));return null==r?void 0:r.props.store}function a(e){const t=i().E.getMembersByDOMOrder({filter:e=>!e.props.store.inMemoryRecordCache.isMockTextStore}),o=n().cx(t,(t=>t.props.store===e)),r=n().dF(t,((e,t)=>t<o&&e.props.canInsertText));return null==r?void 0:r.props.store}},45909:(e,t,o)=>{function n(e){return"drag"in e&&e.drag?{WebkitAppRegion:"drag"}:"noDrag"in e&&e.noDrag?{WebkitAppRegion:"no-drag"}:{}}o.d(t,{X:()=>n})},546634:(e,t,o)=>{o.d(t,{bf:()=>k,qN:()=>g,kl:()=>C,NX:()=>w,sj:()=>S,W4:()=>f,id:()=>h,cJ:()=>_,I$:()=>I,Es:()=>x,YG:()=>y});o(821057),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(228244),o(398858),o(461318),o(33228);var n=()=>o(156642),i=()=>o(532850),r=()=>o(799891),a=(o(670560),o(30005),()=>o(916673));var s=()=>o(839002),l=()=>o(205228),c=()=>o(749826),d=()=>o(709344);const u=3,p=1e4;async function m(e){const{environment:t,sourceURL:o}=e;let n;n=`https://embed.notion.co/api/iframely?key=${l().default.iframely_prod.key}&url=${o}`;const i={environment:t,method:"GET",url:n,format:"json"},{result:c}=await s().W(u,p,(()=>(0,d().default)(i)));if(c&&"success"===c.type)return function(e,t){const o=e;return Object.keys(e).forEach((n=>{if("meta"===n&&(e[n].title&&(o.title=e[n].title),e[n].description&&(o.description=e[n].description),e[n].site&&(o.provider_name=e[n].site),e[n].author&&(o.author_name=e[n].author)),"html"===n){const i=/<iframe[^>]+src="([^"]+)/,r=e[n].match(i);if(r){const e=r[1];o.iframe=e}const a=/height:\s*([^px;]+)/,s=e[n].match(a),l=s?parseInt(s[1].trim()):null,c=/padding-bottom:\s*([^%;]+)/,d=e[n].match(c),u=d?parseInt(d[1].trim()):null,p=/padding-top:\s*([^px;]+)/,m=e[n].match(p),f=m?parseInt(m[1].trim()):null;l&&t&&(o.height=l),u&&t&&(o.padding=u),f&&t&&(o.padding_top=f)}if("url"===n&&(o.url=e[n]),"links"===n){if(e[n].thumbnail&&e[n].thumbnail.length>0){o.images=[];const t={width:Number,height:Number,url:String};t.width=e[n].thumbnail[0].media&&e[n].thumbnail[0].media.width?e[n].thumbnail[0].media.width:480,t.height=e[n].thumbnail[0].media&&e[n].thumbnail[0].media.height?e[n].thumbnail[0].media.height:1080,t.url=e[n].thumbnail[0]&&e[n].thumbnail[0].href?e[n].thumbnail[0].href:"",o.images.push(t)}e[n].icon&&e[n].icon.length>0&&(o.favicon_url=e[n].icon[0].href)}})),t||(o.title||(o.title=a().Qc(o.url).hostname),delete o.author_name,delete o.provider_name,delete o.iframe),o}(c.data);r().log({level:"error",from:"embedHelpers",type:"getExtractedData",error:null==c?void 0:c.error,data:{miscDataToConvertToString:{provider:"iframely"}}})}async function f(e,t){const o=encodeURIComponent(t.trim());return"on"===c().default.getEligibleGroup({experimentId:"iframely_switch",defaultGroup:"control"})?await m({environment:e,sourceURL:o}):await async function(e,t){const o={environment:e,method:"GET",url:`https://api.embed.ly/1/extract?key=${l().default.embedly.key}&url=${t}`,format:"json"},{result:n}=await s().W(u,p,(()=>(0,d().default)(o)));if(n&&"success"===n.type)return n.data;r().log({level:"error",from:"embedHelpers",type:"getExtractedData",error:null==n?void 0:n.error,data:{miscDataToConvertToString:{provider:"embedly"}}})}(e,o)}function g(e){let{source:t,unauthorizedIframeUrls:o}=e;return!!t&&o.some((e=>a().WF(t,e)&&a().ie(t,e)))}const v=/(\/d\/|id=)([-\w]{25,})/;function h(e){const t=e.match(v);if(t&&!(t.length<3))return t[2]}function _(e){return i().zB(e.store.getProperties().source)||e.source}const b=new Set(["http:","https:","blob:","data:"]);function y(e){const t=new URL(e,l().default.domainBaseUrl).protocol;return b.has(t)}function S(e){if(e&&e instanceof k)return{type:"invalid_protocol",protocol:e.protocol}}function w(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.protocol;const o=I(e);if(!o)return{type:"invalid_url",source:e};const n=new URL(o).protocol;return"https:"===t&&"http:"===n?{type:"invalid_protocol",protocol:n}:void 0}class k extends Error{constructor(e){const t=new URL(e,l().default.domainBaseUrl).protocol;super(`Invalid URL protocol: "${t}"`),this.name=void 0,this.protocol=void 0,this.protocol=t,this.name="InvalidUrlProtocolError"}}function I(e){let t=a().yn(e);if(t||e.includes(":")||(t=a().yn(`https:${e}`)),t&&new URL(t).origin!==window.location.origin)return t}function C(e){const{aspectRatio:t,isFullWidth:o,isFullHeight:n,preserveScale:i,height:r,paddingTop:a}=e,s={position:"relative",display:"flex",justifyContent:"center",width:"100%",minHeight:100};return n?(s.height="100%",s.position=void 0):o||!i?s.height=r:(s.height=0,s.paddingBottom=100*(t||.75)+"%",s.paddingTop=a),s}function x(e){const t=e.getType();return!!t&&(0,n().Io)(t)}},832144:(e,t,o)=>{o.d(t,{Z:()=>n});function n(){return!1}},482269:(e,t,o)=>{o.d(t,{D9:()=>_,JT:()=>k,Jf:()=>I,ND:()=>b,TJ:()=>S,Xu:()=>y,bc:()=>h,by:()=>w,nk:()=>C,qZ:()=>x});o(241792);var n=()=>o(714230),i=()=>o(372545),r=()=>o(659278),a=()=>o(347960),s=()=>o(955620),l=()=>o(572948),c=()=>o(513670),d=()=>o(696459),u=()=>o(326966),p=()=>o(491927),m=()=>o(435441),f=()=>o(191003),g=()=>o(505462),v=()=>o(550054);function h(){return(0,a().ZP)(n().Z.katex.katexMinCss,{resourceType:a()._g.Stylesheet})}function _(e){const{source:t,currentEquationToken:o,selectedText:n}=e;return"rich_text_menu"===t?o?{type:"edit",source:t}:{type:"create",source:t,selection:!0}:"input_keyboard_shortcut"===t?o?{type:"edit",source:t}:{type:"create",source:t,selection:Boolean(n)}:"slash_menu"===t?{type:"create",source:t,selection:!1}:"click_token"===t||"arrow_keys"===t?{type:"edit",source:t}:"text_filter"===t?{type:"create",source:t,selection:!0}:void(0,d().t1)(t)}function b(e){const{environment:t,equation:o,from:n}=e;p().iA(t,{equation:o,equationNewlineCount:o.split("\n").length-1,equationBackslashCount:o.split("\\").length-1,equationLength:r().p4(o).length,from:n})}function y(e){return m().kK(e)&&e.classList.contains(l().et)}function S(e){const{selection:t,environment:o}=e,n=g().getRect(t);if(!n){return m().sh(t.startContainer,m().kK).getBoundingClientRect()}if(o.device.isChrome){const e=t.startContainer.childNodes[t.startOffset];return e&&y(e)?e.getBoundingClientRect():m().kK(t.startContainer)?new DOMRect(n.left,n.top,n.width,t.startContainer.getBoundingClientRect().height):new DOMRect(n.left,n.top,n.width,22)}return n}function w(e){const{environment:t,equation:o,displayMode:n}=e,r=t.KatexStore.getKatex();return r&&(0,i().CY)({katex:r,equation:o,options:{displayMode:"block"===n}}).error}function k(e){if("editing"!==e.mode)return;const t=(0,f().QY)(e.multiSelection);if(!t)return;const{store:o,selection:n}=t,{tokensBeforeRange:i,tokensInsideRange:r}=s().xrQ(o.getValue(),n.startIndex,n.endIndex);let a=c().Sm(i.map(s().J1x));for(const l of r){const e=s().J1x(l),t={startIndex:a,endIndex:a+e};if(s().YrK(l))return{token:l,position:t};a+=e}}function I(e){let t=e;for(let o=0;o<2;o+=1){const e=/^\$(.*)\$$/m.exec(t);if(!e||!e[1])break;t=e[1]}return t}function C(e){const t=(0,f().QY)(e.multiSelection);if(!t)return[];const{selection:o,store:n}=t,i=n.getValue();if(!i)return[];const r=v().wd(o)&&o.startIndex>0?[o.startIndex-1]:[o.startIndex];return v().oc(r,i)[0]||[]}function x(e){const{equationState:t,isTemporary:o}=e,n=t.editingToken?u().uh(s().hDy(t.editingToken),(e=>s().kuv(e)||s().QVC(e))):u().uh(t.annotations,(e=>s().kuv(e)||s().QVC(e)||s().ZAl(e))),i=c().oA([o&&s().W9d(),...n]);return s().qZ6(t.value,i)}},443269:(e,t,o)=>{o.d(t,{$5:()=>d,Em:()=>m,Gk:()=>k,HV:()=>re,Ql:()=>g,Uh:()=>c,XN:()=>ie,cq:()=>ne,mH:()=>ee,nX:()=>te,wf:()=>oe,xf:()=>h,zP:()=>u,zU:()=>a});var n=()=>o(431595),i=()=>o(788860),r=()=>o(696459);const a=(0,i().vU)({public_access_not_allowed:{id:"transactionErrors.publicAccessNotAllowed.message",defaultMessage:"This workspace does not allow pages with public access."},public_access_not_allowed_in_team:{id:"transactionErrors.publicAccessNotAllowedInTeam.message",defaultMessage:"This teamspace does not allow pages with public access."},public_permission_item_invalid_role:{id:"transactionErrors.publicPermissionItemInvalidRole.message",defaultMessage:"Invalid role for public permission item."},block_permissions_max_size:{id:"transactionErrors.blockPermissionsMaxSize.message",defaultMessage:"You have exceeded the maximum permissions per page."},guests_over_limit:{id:"transactionErrors.guestsoverLimit.message",defaultMessage:"This workspace has reached the maximum number of guests (5)."},guests_not_allowed:{id:"transactionErrors.guestsNotAllowed.message",defaultMessage:"This workspace doesn't allow guests."},team_level_guests_not_allowed:{id:"transactionErrors.teamLevelGuestsNotAllowed.message",defaultMessage:"This teamspace does not allow guests."},guest_invite_request_required:{id:"transactionError.guestInviteRequestRequired.message",defaultMessage:"Guests can only be invited by request"},workspace_top_level_operation_not_allowed:{id:"transactionErrors.workspaceTopLevelOperationNotAllowed.message",defaultMessage:"This workspace has locked modifying the workspace section of the sidebar."},team_page_edit_operation_not_allowed:{id:"transactionErrors.teamPageEditOperationNotAllowed.message",defaultMessage:"Sorry, you cannot add or remove pages to this teamspace."},team_top_level_page_mismatch:{id:"transactionErrors.teamTopLevelPageMismatch.message",defaultMessage:"This page has fallen out of sync with its teamspace."},blocks_inside_themselves_not_allowed:{id:"transactionErrors.blocksInsideThemselvesNotAllowed.message",defaultMessage:"Oops! Blocks cannot be moved inside of themselves."},moving_pages_to_other_workspaces_not_allowed:{id:"transactionErrors.movingPagesToOtherWorkspacesNotAllowed.message",defaultMessage:"This workspace has disabled moving pages to other workspaces."},space_domain_not_available:{id:"transactionErrors.spaceDomainNotAvailable.message",defaultMessage:"Sorry, this domain is not available."},space_education_email_domain_not_allowed:{id:"transactionErrors.spaceEducationalEmailDomainNotAllowed.message",defaultMessage:"Sorry, education domains are not allowed: {domain}"},space_email_domain_not_allowed:{id:"transactionErrors.spaceEmailDomainNotAllowed.message",defaultMessage:"Sorry, this domain is not allowed: {domain}"},space_allowed_email_domain_matches_no_members:{id:"transactionErrors.spaceAllowedEmailDomainMatchesNoMembers.message",defaultMessage:"Allowed email domain must match at least one member."},comment_only_access_cant_move_page:{id:"transactionErrors.commentOnlyAccessCantMovePage.message",defaultMessage:"Sorry, you cannot move this page because you only have Comment-Only access."},search_engine_indexing_not_allowed:{id:"transactionErrors.searchEngineIndexingNotAllowed.message",defaultMessage:"This workspace does not allow public pages to be search indexed."},block_content_max_size:{id:"transactionErrors.blockContentMaxSize.message",defaultMessage:"You have exceeded the maximum contents per page."},block_properties_max_size:{id:"transactionErrors.blockPropertiesMaxSize.message",defaultMessage:"You have exceeded the maximum properties size per page."},activity_edits_max_size:{id:"transactionErrors.activityEditsMaxSize.message",defaultMessage:"You have exceeded the maximum edits per page."},cannot_archive_only_default_team:{id:"transactionErrors.cannotArchiveOnlyDefaultTeam.message",defaultMessage:"Canâ€™t archive this teamspace because it is the only default teamspace in this workspace."},cannot_join_closed_team:{id:"transactionErrors.cannotJoinClosedTeam.message",defaultMessage:"Canâ€™t join a closed teamspace. Contact the teamspaceâ€™s owner to be invited."},cannot_join_private_team:{id:"transactionErrors.cannotJoinPrivateTeam.message",defaultMessage:"Canâ€™t join a private teamspace. Contact the teamspaceâ€™s owner to be invited."},cannot_join_as_team_guest_if_space_member:{id:"transactionErrors.cannotJoinAsTeamGuestIfSpaceMember.message",defaultMessage:"Canâ€™t join a team as a teamspace guest if you are a member of the space."},team_name_empty:{id:"transactionErrors.teamNameEmpty.message",defaultMessage:"Teamspace name canâ€™t be empty."},team_name_too_long:{id:"transactionErrors.teamNameTooLong.message",defaultMessage:"Teamspace name must be under {maxTeamNameLength} characters."},team_description_too_long:{id:"transactionErrors.teamDescriptionTooLong.message",defaultMessage:"Teamspace description must be under {maxTeamDescriptionLength} characters."},at_least_one_default_team:{id:"transactionErrors.atLeastOneDefaultTeam.message",defaultMessage:"There needs to be at least one default teamspace in your workspace."},at_least_one_admin_in_workspace:{id:"transactionErrors.atLeastOneAdminInWorkspace.message",defaultMessage:"There needs to be at least one admin in your workspace."},cant_add_new_members_from_this_jurisdiction:{id:"transactionErrors.cantAddNewMembersFromThisJurisdiction",defaultMessage:"We are currently not allowing customers to add new members from this jurisdiction."},cannot_invite_space_guests_as_team_owners_or_members:{id:"transactionErrors.cannotInviteGuestsToTeam",defaultMessage:"Canâ€™t invite people who are not members of this workspace to this teamspace."},cannot_invite_guests_by_non_admin_and_non_team_owner:{id:"transactionErrors.cannotInviteGuestsByNonAdminAndNonTeamOwner",defaultMessage:"Only teamspace owners who are also workspace (membership) admin can invite people as teamspace guests."},non_owners_cannot_set_is_default:{id:"transactionErrors.nonOwnersCannotSetIsDefault",defaultMessage:"Only teamspace owners can set the default status on a teamspace."},database_syncs_over_limit:{id:"transactionErrors.databaseSyncsOverLimit",defaultMessage:"You have hit your Synced Database limit."},no_permission_to_move:{id:"transactionErrors.noPermissionToMove",defaultMessage:"You donâ€˜t have access to move this page to the desired location."},duplicate_guest_membership_request:{id:"transactionErrors.duplicateGuestMembershipRequest",defaultMessage:"You have already submitted a membership request."},guest_membership_request_setting_off:{id:"transactionErrors.guestMembershipRequestOff",defaultMessage:"Guest membership requests have been turned off for this workspace."},external_membership_request_setting_off:{id:"transactionErrors.externalMembershipRequestOff",defaultMessage:"External membership requests have been turned off for this workspace."},corrupt_collection_property:{id:"transactionErrors.corruptCollectionProperty",defaultMessage:"Your property change can not be saved because it causes corruption to the metadata."},duplicate_auto_increment_id_property:{id:"transactionErrors.duplicateAutoIncrementIdProperty",defaultMessage:"A database can only have one ID property"},convert_to_auto_increment_id_property:{id:"transactionErrors.convertToAutoIncrementIdProperty",defaultMessage:"Other properties can not be converted to an ID property"},convert_from_auto_increment_id_property:{id:"transactionErrors.convertFromAutoIncrementIdProperty",defaultMessage:"The ID property can not be converted to any other property"},wiki_forbidden_auto_increment_id_property:{id:"transactionErrors.wikiForbiddenAutoIncrementIdProperty",defaultMessage:"A wiki cannot have an ID property"},synced_database_forbidden_auto_increment_id_property:{id:"transactionErrors.syncedDatabaseForbiddenAutoIncrementIdProperty",defaultMessage:"A synced database cannot have an ID property"},cannot_invite_space_members_as_team_guests:{id:"transactionErrors.cannotInviteSpaceMembersAsTeamGuests",defaultMessage:"Can't invite workspace members as teamspace guests."},cannot_invite_team_guests_if_space_disable_team_guests:{id:"transactionErrors.cannotInviteTeamGuestsIfSpaceDisableTeamGuests",defaultMessage:"Canâ€™t invite teamspace guests if the space setting is disabled."},cannot_invite_team_guests_with_matching_email_domains:{id:"transactionErrors.cannotInviteTeamGuestsWithMatchingEmailDomains",defaultMessage:"Can't invite teamspace guests whose emails match space allowed domain."},cannot_delete_wiki_owner_property:{id:"transactionErrors.cannotDeleteWikiOwnerProperty",defaultMessage:"Owner property can not be deleted from wiki."},missing_wiki_owner_property:{id:"transactionErrors.missingWikiOwnerProperty",defaultMessage:"Wiki is missing owner property."},cannot_delete_sprints_status_property_schema:{id:"transactionErrors.cannotDeleteSprintsStatusPropertySchema",defaultMessage:"Status property cannot be deleted from Sprints schema."},cannot_mutate_sprints_status_property_schema:{id:"transactionErrors.cannotMutateSprintsStatusPropertySchema",defaultMessage:"Sprint status property schema cannot be modified."},formula_property_invalid:{id:"transactionErrors.formulaPropertyInvalid",defaultMessage:"Formula property is invalid."},cannot_delete_tasks_current_sprint_property_filter:{id:"transactionErrors.cannotDeleteTasksCurrentSprintPropertyFilter",defaultMessage:"Tasks current sprint view has a current sprint status property filter that cannot be deleted."},cannot_delete_typed_collection_required_property:{id:"transactionErrors.cannotDeleteTypedCollectionRequiredProperty",defaultMessage:"This property can not be deleted from a typed collection."},cannot_edit_typed_property_type:{id:"transactionErrors.cannotEditTypedPropertyType",defaultMessage:"This property cannot change its type."},cannot_edit_typed_property_relation:{id:"transactionErrors.cannotEditTypedPropertyRelation",defaultMessage:"This property cannot change its relation."},cannot_edit_typed_property_rollup:{id:"transactionErrors.cannotEditTypedPropertyRollup",defaultMessage:"This property cannot change its rollup."},cannot_mutate_tasks_current_sprint_property_filter:{id:"transactionErrors.cannotMutateTasksCurrentSprintPropertyFilter",defaultMessage:"Tasks current sprint view has a current sprint status property filter that cannot be modified."},ai_inference_prompt_exceeds_max_length:{id:"transactionErrors.aiInferencePromptExceedsMaxLength",defaultMessage:"AI property prompt is too long."},ai_inference_schema_invalid:{id:"transactionErrors.aiInference.invalid",defaultMessage:"AI property is invalid."},cannot_delete_tasks_backlog_empty_sprint_property_filter:{id:"transactionErrors.cannotDeleteTasksBacklogEmptySprintPropertyFilter",defaultMessage:"Tasks backlog sprint view has an empty sprint status property filter that cannot be deleted."},cannot_mutate_tasks_backlog_empty_sprint_property_filter:{id:"transactionErrors.cannotMutateTasksBacklogEmptySprintPropertyFilter",defaultMessage:"Tasks backlog sprint view has an empty sprint status property filter that cannot be mutated."},cannot_edit_pages_in_trash:{id:"transactionErrors.cannotEditPagesInTrash",defaultMessage:"Pages in trash cannot be edited."},cannot_create_empty_page_layout:{id:"transactionErrors.cannot_create_empty_page_layout",defaultMessage:"Cannot create an empty layout for a page."},cannot_remove_undeletable_module:{id:"transactionErrors.cannot_remove_undeletable_module",defaultMessage:"Cannot remove an undeletable module."},discontinued_module:{id:"transactionErrors.discontinued_module",defaultMessage:"Cannot use discontinued modules"},cannot_move_unmoveable_module:{id:"transactionErrors.cannot_move_unmoveable_module",defaultMessage:"Cannot move an unmoveable object."},unallowed_module_in_area:{id:"transactionErrors.unallowed_module_in_area",defaultMessage:"Module not allowed in area."},cannot_delete_page_layout:{id:"transactionErrors.cannot_delete_page_layout",defaultMessage:"Cannot delete page layout."},space_allowed_email_domain_cannot_be_trusted_domain:{id:"transactionErrors.space_allowed_email_domain_cannot_be_trusted_domain",defaultMessage:"Allowed email domain cannot be a shared email domain."},collection_sharing_enabled_relation_exceeds_count:{id:"transactionErrors.collection_sharing_enabled_relation_exceeds_count",defaultMessage:"Databases can have, at most, one sharing enabled relation."},collection_sharing_enabled_relation_invalid_wiki_collection:{id:"transactionErrors.collection_sharing_enabled_relation_wiki_collection",defaultMessage:"Cannot create a sharing enabled relation in a wiki database."},collection_sharing_enabled_relation_invalid_target_collection:{id:"transactionErrors.collection_sharing_enabled_relation_invalid_target_collection",defaultMessage:"Sharing enabled relation points to an invalid database."},collection_sharing_enabled_relation_invalid_space:{id:"transactionErrors.collection_sharing_enabled_relation_invalid_space",defaultMessage:"Cannot create a sharing enabled relation that points to a database in a different space"},collection_sharing_enabled_relation_two_way_unsupported:{id:"transactionErrors.collection_sharing_enabled_relation_two_way_unsupported",defaultMessage:"A sharing enabled relation's target database cannot have a relation back to this database."},collection_sharing_enabled_relation_invalid_limit:{id:"transactionErrors.collection_sharing_enabled_relation_invalid_limit",defaultMessage:"A sharing enabled relation must have a limit of 1."},collection_sharing_enabled_relation_invalid_target_collection_subitems:{id:"transactionErrors.collection_sharing_enabled_relation_invalid_target_collection_subitems",defaultMessage:"A sharing enabled relation's target database cannot have subitems"},collection_sharing_enabled_relation_cycle:{id:"transactionErrors.collection_sharing_enabled_relation_cycle",defaultMessage:"A sharing enabled relation cannot form a cycle"},collection_schema_too_large:{id:"transactionErrors.collection_schema_too_large",defaultMessage:"You have exceeded the maximum schema size. Please delete some properties and try again."},collection_sharing_enabled_relation_target_invalid_wiki_collection:{id:"transactionErrors.collection_sharing_enabled_relation_target_invalid_wiki_collection",defaultMessage:"A database cannot be a wiki if it is the target of a sharing enabled relation"},collection_invalid_property_deletion:{id:"transactionErrors.collection_invalid_property_deletion",defaultMessage:"A property cannot be deleted without being moved to the deleted schema."},collection_invalid_title_property_deletion:{id:"transactionErrors.collection_invalid_title_property_deletion",defaultMessage:"Title property cannot be deleted from a database."}}),s=(0,i().vU)({email_domain_already_configured:{id:"samlErrors.emailDomainAlreadyConfigured.message",defaultMessage:"Email domain is already configured for SAML on existing workspace."},email_domain_workspace_creation_is_education_domain:{id:"samlErrors.emailDomainWorkspaceCreationIsEducationDomain.message",defaultMessage:"Cannot prevent creation of workspaces based on an education email domain."},could_not_parse_idp_metadata_xml:{id:"samlErrors.couldNotParseIdentityProviderMetadataXML.message",defaultMessage:"Could not parse IDP metadata XML."},invalid_idp_url:{id:"samlErrors.invalidIDPURL.message",defaultMessage:"The IDP metadata URL is an invalid URL."},saml_sso_required:{id:"samlErrors.samlRequired.message",defaultMessage:"You must use SAML SSO to log in to Notion"},could_not_parse_idp_metadata:{id:"samlErrors.couldNotParseIdpMetadata.message",defaultMessage:"Could not parse SAML IDP metadata. Please check that your IDP metadata is correct."},could_not_download_idp_metadata:{id:"samlErrors.couldNotDownloadIdpMetadata.message",defaultMessage:"SAML IDP metadata could not be downloaded. Please check that your IDP Metadata URL is correct."},saml_url_incorrect:{id:"samlErrors.incorrectURL.message",defaultMessage:"Audience in SAML assertion needs to be {correctUrl}"},incorrectly_configured_saml:{id:"samlErrors.incorrectlyConfiguredSaml.message",defaultMessage:"Incorrectly configured SAML SSO. Please contact your administrator."},saml_name_id_email_required:{id:"samlErrors.samlNameIdEmailRequired.message",defaultMessage:"The SAML Name ID attribute must be an email address. Please contact your administrator."},email_not_configured_for_saml_sso:{id:"samlErrors.emailNotConfiguredForSamlSso.message",defaultMessage:"This email is not configured for SAML SSO to this workspace. Please contact your administrator."},invalid_saml_configuration:{id:"samlErrors.invalidSamlConfiguration.message",defaultMessage:"Invalid SAML Configuration. Please contact your administrator."},domain_verification_dns_failed:{id:"samlErrors.domainVerificationDnsFailed.message",defaultMessage:"DNS record does not contain the correct notion-verification-code TXT record."},domain_verification_invalid_domain:{id:"samlErrors.domainVerificationInvalidDomain.message",defaultMessage:"Invalid value for domain. Please correctly format and ensure the domain is not reserved: {domain}"},domain_verification_config_has_domain:{id:"samlErrors.domainVerificationConfigHasDomain.message",defaultMessage:"SAML configuration already has the attempted domain."},domain_verification_has_pending_verifications:{id:"samlErrors.domainVerificationhasPending.message",defaultMessage:"There is already a pending domain verification for this domain."},disable_toggling_page_access_requests_for_non_members:{id:"samlErrors.disableTogglingPageAccessRequestsForNonMembers",defaultMessage:"Page access requests for non-members of a workspace is currently disabled."},signed_request:{id:"samlErrors.signedRequest.message",defaultMessage:"IDP metadata cannot accept signed requests."},user_not_added_to_space:{id:"samlErrors.userNotAddedToSpace.message",defaultMessage:"Cannot use SAML to log in. Please try again later."},cannot_use_saml_to_log_in:{id:"samlErrors.cannotUseSamlToLogIn.message",defaultMessage:"Cannot use SAML to log in. Please try logging in without SAML."}}),l=(0,i().vU)({invalid_email_address:{id:"emailErrors.invalidEmailAddress.message",defaultMessage:"Invalid email address"},destination_email_address_not_verified:{id:"emailErrors.destinationEmailAddressNotVerified.message",defaultMessage:"You must change a user's email to another verified email domain."},invalid_email_entered:{id:"emailErrors.invalidEmailEntered.message",defaultMessage:"Please enter a valid email."},user_with_email_already_exists:{id:"emailErrors.userAlreadyExists.message",defaultMessage:"A user with this email already exists."},invalid_or_expired_password:{id:"emailErrors.invalidOrExpiredPassword.message",defaultMessage:"Your login code was incorrect. Please try again."},email_does_not_have_existing_account:{id:"emailErrors.noExistingAccountForEmailAddress.message",defaultMessage:"This email does not have an existing account."},email_unreachable:{id:"emailErrors.emailUnreachable.message",defaultMessage:"We could not reach the email address you provided. Please try again with a different email."},incorrect_password:{id:"emailErrors.incorrectPassword.message",defaultMessage:"Incorrect password."},invalid_email_domain:{id:"emailErrors.invalidEmailDomain.message",defaultMessage:"Invalid email domain"}}),c=(0,i().vU)({enex_import_not_supported:{id:"importErrors.enexFileNotSupported.message",defaultMessage:"Evernote .enex import not supported."},only_docx_extension_supported:{id:"importErrors.onlyDocxExtensionSupported.message",defaultMessage:"Import failed: file type not supported."},corrupt_file:{id:"importErrors.corruptFile.message",defaultMessage:"Import failed: unable to open file."},pdf_to_docx_timeout:{id:"importErrors.pdfToDocxTimeout.message",defaultMessage:"Import failed: pdf2docx conversion timed out."},incorrect_file_format:{id:"importErrors.incorrectFileFormat.message",defaultMessage:"Import failed: incorrect file format."}}),d=(0,i().vU)({csv_import_inconsistent_columns:{id:"csvImportErrors.inconsistentColumns.message",defaultMessage:"Inconsistent number of columns in CSV file, {numBadRows} rows had problems. Header row had {numTitleColumns} columns. Row {firstBadRowIndex} was first inconsistent row with {firstBadRowLength} columns. Parsed row {firstBadRowIndex}: {firstBadRow}"}}),u=(0,i().vU)({upload_file_size_exceeded:{id:"confluenceImportErrors.uploadFileSizeExceeded.message",defaultMessage:"Import file cannot exceed {maxSize}."},failed_to_extract_zip:{id:"confluenceImportErrors.failedToExtractZip.message",defaultMessage:"Failed to extract ZIP file."},no_index_html_file:{id:"confluenceImportErrors.noIndexHtmlFile.message",defaultMessage:"Could not find index file in ZIP."},index_html_missing_available_pages:{id:"confluenceImportErrors.indexHtmlMissingAvailablePages.message",defaultMessage:"Invalid index file: could not find available pages."},no_confluence_id_in_page_link:{id:"confluenceImportErrors.noConfluenceIdInPageLink.message",defaultMessage:"Could not extract page ID from file name."},failed_to_find_element:{id:"confluenceImportErrors.failedToFindElement.message",defaultMessage:"Failed to parse upload."},found_element_is_incorrect_type:{id:"confluenceImportErrors.foundElementIsIncorrectType.message",defaultMessage:"Failed to parse upload."},buffer_upload_failed:{id:"confluenceImportErrors.bufferUploadFailed.message",defaultMessage:"Failed to upload attachment from buffer."},attachment_not_found:{id:"confluenceImportErrors.attachmentNotFound.message",defaultMessage:"Failed to find attachment in ZIP file."},attachment_upload_failed:{id:"confluenceImportErrors.attachmentUploadFailed.message",defaultMessage:"Failed to upload attachment from file."},failed_to_build_page:{id:"confluenceImportErrors.failedToBuildPage.message",defaultMessage:"Failed to import page."},api_error:{id:"confluenceImportErrors.apiError.message",defaultMessage:"Failed to fetch data from api."},invalid_site_url_format:{id:"confluenceImportErrors.invalidSiteUrlFormat.message",defaultMessage:"Please enter a valid site URL. Example: https://example.com"}}),p=(0,i().vU)({file_upload_generic_error:{id:"fileUploadErrors.generic.message",defaultMessage:"File upload is not allowed."}}),m=(0,i().vU)({file_size_exceeded:{id:"importActions.fileImportFailedError.customSizeTooLarge.message",defaultMessage:"Import file cannot exceed {maxSize}."},row_limit_exceeded:{id:"row_limit_exceeded",defaultMessage:"Row limit cannot exceed {maxRows}"},column_limit_exceeded:{id:"column_limit_exceeded",defaultMessage:"Column limit cannot exceed {maxColumns}"}}),f=(0,i().vU)({invite_link_disabled:{id:"inviteLinkErrors.inviteLinkDisabled.message",defaultMessage:"Invites are disabled, contact the administrator of this space."},unable_to_join_space:{id:"inviteLinkErrors.unableToJoinSpace.message",defaultMessage:"Please ask an administrator to invite you directly to this space."}}),g=(0,i().vU)({password_too_short:{id:"passwordSettings.passwordTooShortError.message",defaultMessage:"Please make your password longer."},password_missing_letter:{id:"passwordSettings.passwordMissingLetter.message",defaultMessage:"Please include a letter, or use a longer password."},password_missing_number:{id:"passwordSettings.passwordMissingNumber.message",defaultMessage:"Please include a number, or use a longer password."},password_missing_letter_and_number:{id:"passwordSettings.passwordMissingLetterAndNumber.message",defaultMessage:"Please include a letter and a number, or use a longer password."},password_too_consistent:{id:"passwordSettings.passwordTooConsistent.message",defaultMessage:"Please include additional unique characters."},password_not_entered:{id:"passwordSettings.passwordNotEntered.message",defaultMessage:"Please enter your password."},password_not_set:{id:"passwordSettings.passwordNotSet.message",defaultMessage:"No password set."}}),v=(0,i().vU)({rate_limited:{id:"rateLimitError.message",defaultMessage:"Please try again later."},duplicate_rate_limited:{id:"duplicateRateLimitError.message",defaultMessage:"Rate limit reached, please try again later."},export_audit_log_rate_limited:{id:"export_audit_log_rate_limited.message",defaultMessage:"Rate limit reached for exporting audit logs, please try after your current exports are finished."},export_user_analytics_rate_limited:{id:"exportUserAnalytics.rateLimited.message",defaultMessage:"Rate limit reached for exporting member analytics, please try after your current exports are finished."},export_content_analytics_rate_limited:{id:"exportContentAnalytics.rateLimited.message",defaultMessage:"Rate limit reached for exporting content analytics, please try after your current exports are finished."},export_admin_content_search_rate_limited:{id:"exportAdminContentSearch.rateLimited.message",defaultMessage:"Rate limit reached for exporting content search, please try after your current exports are finished."}}),h=(0,i().vU)({login_generic_error:{id:"loginErrors.generic.message",defaultMessage:"There was a problem logging in."},login_try_again:{id:"loginErrors.tryAgain.message",defaultMessage:"Please log in again."},login_csrf_error:{id:"loginErrors.csrf.message",defaultMessage:"If youâ€™re logging in via a link, please open the link in the same browser that you requested the link from."},login_admin_mode_unsupported:{id:"loginErrors.adminModeUnsupported.message",defaultMessage:"Unsupported in Admin Mode"},login_invalid_email:{id:"loginErrors.invalidEmail.message",defaultMessage:"Invalid email."},login_options_invalid:{id:"loginErrors.invalidOptions.message",defaultMessage:"Unable to login, please try again."},login_from_restricted_region:{id:"loginErrors.restrictedRegion.message",defaultMessage:"You are attempting to access our service from a restricted jurisdiction."},login_banned_user:{id:"loginErrors.bannedUser.message",defaultMessage:"This account has been banned from accessing Notion."},login_inactivity_user:{id:"loginErrors.inactivityUser.message",defaultMessage:"Your account has been locked for inactivity. Please contact inactiveaccount@makenotion.com to get access restored."},login_suspended_user:{id:"loginErrors.suspendedUser.message",defaultMessage:"Your account has been suspended by your Notion administrator."},login_custom_session_expired:{id:"loginErrors.customSessionExpired.message",defaultMessage:"You've been logged out due to a session duration set by your Workspace Owner."},login_generic_session_expired:{id:"loginErrors.genericSessionExpired.message",defaultMessage:"Your session has expired. Please login again."}}),_=(0,i().vU)({generic_mfa_error:{id:"authErrors.genericMfaError.message",defaultMessage:"Something went wrong, please try again"},reused_mfa_code:{id:"authErrors.reusedMfaCode.message",defaultMessage:"Provided code has already been used. Please try again."},invalid_mfa_code:{id:"authErrors.invalidMfaCode.message",defaultMessage:"The code didnâ€™t work, try typing it again or resend code"},mfa_duplicate_friendly_name:{id:"authErrors.duplicateFriendlyName",defaultMessage:"Authenticator name is already in use"},mfa_empty_friendly_name:{id:"authErrors.emptyFriendlyName",defaultMessage:"Authenticator name cannot be empty"},mfa_bad_friendly_name:{id:"authErrors.badFriendlyName",defaultMessage:"Authenticator name cannot be used"},mfa_sms_unsupported_country_code_for_enrollment:{id:"authErrors.unsupportedCountryCode",defaultMessage:"SMS authentication is currently not supported for this country. You may consider using an authenticator app as an alternative authentication method."},email_code_login_required:{id:"authErrors.emailCodeLoginRequired",defaultMessage:"You must login with an email login code"},dev_invalid_domain:{id:"authErrors.devInvalidDomain",defaultMessage:"This is a development version of Notion. Please download the latest Notion desktop app at https://www.notion.com/desktop"},invalid_phone_number:{id:"authErrors.invalidPhoneNumber.message",defaultMessage:"The phone number is not valid"},invalid_country_code:{id:"authErrors.invalidCountryCode.message",defaultMessage:"The country code is not valid"},already_verified_phone_number:{id:"authErrors.alreadyVerifiedPhoneNumber.message",defaultMessage:"This phone number has already been verified"},max_num_of_mfa_methods_reached:{id:"authErrors.maxMethods.message",defaultMessage:"You've reached the maximum number of MFA methods for the given type."},admin_tool_insufficient_permissions:{id:"authErrors.adminToolInsufficientPermissions.message",defaultMessage:"You don't have the right role to access this Admin Mode tool."},phone_number_setup_limit_reached:{id:"authErrors.phoneNumberLimitReached.message",defaultMessage:"This phone number can no longer be used to setup new 2-step verification methods."},no_temporary_verification:{id:"authErrors.noTemporaryVerification.message",defaultMessage:"Notion must verify your password or MFA to continue, exit this modal and try again"},twilio_generic_error:{id:"authErrors.twilioGenericError.message",defaultMessage:"Something went wrong, please reach out to customer support"},twilio_cannot_verify_phone_number:{id:"authErrors.twilioCannotVerifyPhoneNumber.message",defaultMessage:"We cannot verify your phone number, please check the number and try again"},twilio_cannot_fetch_phone_number:{id:"authErrors.twilioCannotFetchPhoneNumber.message",defaultMessage:"There is no record of this phone number, please check the number and try again"}}),b=(0,i().vU)({apple_api_status_error:{id:"appleErrors.api.statusError",defaultMessage:"There was a problem with the Apple service."},apple_api_token_error:{id:"appleErrors.api.tokenError",defaultMessage:"There was a problem verifying your identity with Apple."},apple_api_missing_id_error:{id:"appleErrors.api.missingIdError",defaultMessage:"There was a problem getting user information from Apple."},apple_api_missing_access_token_error:{id:"appleErrors.api.missingAccessTokenError",defaultMessage:"Apple failed to authorize the login."},apple_api_missing_beta_app_review_submission:{id:"appleErrors.api.missingBetaAppReviewSubmission",defaultMessage:"Cannot find betaAppReviewSubmission entry."},apple_api_missing_pre_release_version:{id:"appleErrors.api.missingPreReleaseVersion",defaultMessage:"Cannot find preReleaseVersion entry."}}),y=((0,i().vU)({google_drive_token_error:{id:"googleErrors.googleDriveTokenError",defaultMessage:"Error from Google Drive: {errorMessage}"}}),(0,i().vU)({student_github_grant_error:{id:"grantErrors.studentGithubGrantError",defaultMessage:"Error applying the grant to your workspace. Please try again."},student_github_existing_workspace:{id:"grantErrors.studentGithubGrant.existingWorkspace",defaultMessage:"You have already redeemed the GitHub Student Developer Pack on a different workspace."},student_github_not_eligible:{id:"grantErrors.studentGithubGrant.notEligible",defaultMessage:"We cannot verify your GitHub student account."},student_github_already_received_grant:{id:"grantErrors.studentGithubGrant.alreadyReceivedGrant",defaultMessage:"Each GitHub account can only redeem the grant once."}}),(0,i().vU)({non_stripe_subscription:{id:"subscriptionErrors.nonStripeSubscriptionError",defaultMessage:"You have an existing mobile subscription. Please go to the app to manage your subscription."},missing_address:{id:"subscriptionErrors.missingAddressError",defaultMessage:"Address line 1 must exist."},subscription_personal_plan_more_than_one_member:{defaultMessage:"In order to use the Personal plan, your workspace can have only one member.",id:"subscriptionErrors.personalPlanMoreThanOneMember"},invalid_vat:{id:"subscriptionErrors.invalidVatError",defaultMessage:"VAT/GST number is invalid."},coupon_already_applied:{id:"subscriptionErrors.couponAlreadyApplied",defaultMessage:"This coupon has already been applied"},subscription_attempt_from_restricted_region:{id:"updatingSubscriptionDetails.restrictedRegion.genericErrorMessage",defaultMessage:"We are currently not allowing customers to upgrade their subscription from this jurisdiction."},new_subscription_attempt_from_restricted_region:{id:"updatingSubscriptionDetails.restrictedRegion.newSubscriptionErrorMessage",defaultMessage:"We are currently not accepting new customers from this jurisdiction."},billing_address_change_to_restricted_region:{id:"updatingSubscriptionDetails.restrictedRegion.billingAddressErrorMessage",defaultMessage:"We are currently not allowing customers to update their billing address to this jurisdiction."},payment_method_from_restricted_region:{id:"updatingSubscriptionDetails.restrictedRegion.paymentMethodErrorMessage",defaultMessage:"We are currently not accepting payment methods from this jurisdiction."},new_subscription_attempt_using_legacy_plus_price:{id:"subscriptionErrors.createWithLegacyPlusPrice",defaultMessage:"Something went wrong. Please reload Notion and try again. No charges have been made."},add_on_subscription_attempt_from_restricted_region:{id:"updatingSubscriptionDetails.restrictedRegion.addOnSubscriptionErrorMessage",defaultMessage:"We are currently not allowing customers to purchase add-ons from this jurisdiction."},non_admin_insufficient_permissions:{id:"subscriptionErrors.insufficientPermissions",defaultMessage:"You have a subscription that was added on your behalf by Notion. Please reach out to team@makenotion.com to make any changes to this subscription."},invalid_plan:{id:"subscriptionErrors.invalidPlan",defaultMessage:"The plan you have selected is not available."},collection_method_not_allowed:{id:"subscriptionErrors.collectionMethodNotAllowed",defaultMessage:"You cannot select this payment collection method in the app. Please reach out to support."},payment_failed:{id:"subscriptionErrors.paymentFailed",defaultMessage:"Your payment failed. Please try again, try a different payment method, or contact support."},payment_failed_with_invoice_url:{id:"subscriptionErrors.paymentFailedWithInvoiceUrl",defaultMessage:"There was a problem with your payment."},native_invoice_payment_failed:{id:"subscriptionErrors.nativeInvoicePaymentFailed",defaultMessage:"There was a problem with your payment. Please try again."},missing_plan_and_add_ons:{id:"subscriptionErrors.missingPlanAndAddOns",defaultMessage:"A new subscription requires either a plan or add-ons."},cancel_add_ons_without_subscription:{id:"subscriptionErrors.cancelAddOnsWithoutSubscription",defaultMessage:"Can't request add-on cancellation without an active subscription."},cancel_non_existent_add_on:{id:"subscriptionErrors.cancelNonExistentAddOn",defaultMessage:"You can't cancel a non-existent add-on {addOnId}."},inconsistent_billing_intervals:{id:"subscriptionErrors.inconsistentAddOnBillingIntervals",defaultMessage:"All subscription items must have the same billing interval."},subscription_unpaid:{id:"subscriptionErrors.subscriptionUnpaid",defaultMessage:"Your subscription has unpaid invoices. Please pay them before making any changes."},payment_processing:{id:"subscriptionErrors.paymentProcessing",defaultMessage:"Your payment is still processing. Please wait until your payment has completed before making any changes."},missing_mandate_data:{id:"subscriptionErrors.missingMandateData",defaultMessage:"Your payment method could not be updated. Please try again or contact support."},setup_intent_failed:{id:"subscriptionErrors.setupIntentFailed",defaultMessage:"Your payment method could not be updated. Please try again or contact support."},payment_method_declined:{id:"subscriptionErrors.paymentMethodDeclined",defaultMessage:"Your payment method was declined. Please check that the information you entered is correct, or contact your provider."},ai_add_on_not_allowed_for_hipaa:{id:"subscriptionErrors.aiAddOnNotAllowedForHipaa",defaultMessage:"Unable to add AI add-on for HIPAA compliant workspaces."},timed_trials_invalid_plan:{id:"subscriptionErrors.invalidPlan.enterprise.message",defaultMessage:"Please contact Sales for a trial of the Enterprise plan."},timed_trials_not_eligible:{id:"subscriptionErrors.notEligible.message",defaultMessage:"This space is not eligible for a free trial."},no_subscription:{id:"subscriptionErrors.noSubscription",defaultMessage:"This space does not have an active subscription."},invalid_payment_method:{id:"subscriptionErrors.setDefaultPaymentMethod.invalidPaymentMethod",defaultMessage:"The payment method you provided is invalid. Please try another payment method on your account."},set_default_payment_method_failed:{id:"subscriptionErrors.setDefaultPaymentMethod.apiError",defaultMessage:"Your payment method could not be updated. Please try again or contact support."},subscription_not_updatable:{id:"subscriptionErrors.subscriptionNotUpdatable",defaultMessage:"Your subscription requires additional attention. Please contact Notion to make changes."}})),S=(0,i().vU)({referral_user_already_signed_up:{defaultMessage:"User has already signed up.",id:"activateReferral.dialogError.userAlreadySignedUp.errorMessage"},referral_already_activated:{defaultMessage:"Referral has already been activated.",id:"activateReferral.dialogError.referralAlreadyActivated.errorMessage"},referral_no_valid_referral_found:{defaultMessage:"No valid referral found.",id:"activateReferral.dialogError.noValidReferral.errorMessage"},referral_referring_user_not_found:{defaultMessage:"Referring user not found.",id:"activateReferral.dialogError.referringUserNotFound.errorMessage"},referral_cannot_invite_yourself:{defaultMessage:"You cannot invite yourself",id:"activateReferral.dialogError.cannotInviteSelf.errorMessage"},referral_email_not_eligible:{defaultMessage:"This email is not eligible for the referral program. If you think this is a mistake please contact support.",id:"activateReferral.dialogError.emailNotEligible.errorMessage"},referral_already_applied_credit:{defaultMessage:"You have already applied an invitation credit.",id:"activateReferral.dialogError.invitationCreditAlreadyApplied.errorMessage"}}),w=(0,i().vU)({slack_block_not_found:{defaultMessage:"Block not found.",id:"slackAuthorizationErrors.blockNotFound.errorMessage"},slack_user_missing_edit_permission:{defaultMessage:"User cannot edit block.",id:"slackAuthorizationErrors.missingEditPermission.errorMessage"},slack_webhook_not_found:{defaultMessage:"Slack webhook not found.",id:"slackAuthorizationErrors.webhookNotFound.errorMessage"}}),k=(0,i().vU)({generic_error:{defaultMessage:"Something went wrong.",id:"genericErrors.genericErrorMessage"},generic_insufficient_permissions:{defaultMessage:"You do not have permissions to this feature in the requested space.",id:"genericErrors.insufficientPermissions.errorMessage"},generic_insufficient_plan_type:{defaultMessage:"The feature is not available on your current plan type.",id:"genericErrors.insufficientPlanType.errorMessage"}}),I=((0,i().vU)({apply_offer:{defaultMessage:"Error applying the offer to your account. Please try again.",id:"offerErrors.applyOfferError"},get_offer:{defaultMessage:"Error getting the offers you qualify for. Please try again.",id:"offerErrors.getOfferError"}}),(0,i().vU)({offline:{defaultMessage:"Offline.",id:"offlineErrors.offlineErrorMessage"}})),C=(0,i().vU)({invalid_name_error:{defaultMessage:"Invalid name.",id:"invalidNameErrors.errorMessage"}}),x=(0,i().vU)({domain_verification_integration_already_verified:{id:"integrationErrors.domainAlreadyVerified.errorMessage",defaultMessage:"The integration has already verified this domain."}}),T=(0,i().vU)({datadog_token_exists:{id:"externalAuthErrors.datadog.tokenAlreadyExists",defaultMessage:"Another workspace is already connected to your Datadog organization. Please revoke the API key from the Organization settings in Datadog and try again."},datadog_not_an_admin:{id:"externalAuthErrors.error.installDatadogNotAnAdmin",defaultMessage:"You are trying to install this integration to your Datadog organization, but you are not an admin. Please contact your Datadog organization admin to install this integration."},access_token_retrieval_failed:{id:"externalAuthErrors.accessTokenRetrievalFailed",defaultMessage:"Failed to connect to third party service."}}),M=(0,i().vU)({workspace_transfer_reattempt_wrong_user:{id:"workspaceTransferErrors.reattemptWrongUser.errorMessages",defaultMessage:"Not allowed to reattempted transfers to a different user account."},workspace_transfer_invalid_corporate_email:{id:"workspaceTransferErrors.invalidCorporateEmail.errorMessages",defaultMessage:"Cannot transfer workspace to a corporate user account."},workspace_transfer_transfering_state_failed:{id:"workspaceTransferErrors.failedTransfer.errorMessages",defaultMessage:"Transferring workspace failed. Please re-attempt the transfer."},workspace_transfer_no_user_found:{id:"workspaceTransferErrors.noUserFound.errorMessages",defaultMessage:"Cannot transfer workspace to an email without an associated Notion account. Please create a new account with this email, or try another email."},workspace_transfer_change_email_pending_transfer:{id:"workspaceTransferErrors.changeEmail.errorMessages",defaultMessage:"You need to complete the workspace transfer for {workspaceName} before being able change emails."}}),P=(0,i().vU)({workspace_analytics_insufficient_permissions:{id:"workspaceAnalytics",defaultMessage:"You do not have permissions to analytics for the requested space."},audit_log_disabled:{id:"auditLogDisabled",defaultMessage:"Audit log is currently disabled."},managed_user_account_deletion_disabled:{id:"enterpriseErrors.managedUserDeletionDisabled",defaultMessage:"You can't delete your account because it is being managed by your organization."},last_organization_owner_deletion_disabled:{id:"enterpriseErrors.lastOrganizationOwnerDeletionDisabled",defaultMessage:"You can't delete your account because you are the only owner of an organization."},enterprise_only_feature:{id:"enterpriseErrors.enterpriseOnlyFeature",defaultMessage:"This feature is available on Enterprise plans only"},guest_invite_request_requestor_insufficient_permissions:{id:"enterpriseErrors.guestInviteRequestRequestorInsufficientPermissions",defaultMessage:"Requesting user does not have valid permissions to invite a guest to this page."},guest_invite_request_guest_invalid:{id:"enterpriseErrors.guestInviteRequestGuestInvalid",defaultMessage:"User is not valid to be invited as a guest."},guest_invite_request_disabled:{id:"enterpriseErrors.guestInviteRequestDisabled",defaultMessage:"Guest invite requests are currently disabled."},user_cannot_delete_account:{id:"enterpriseErrors.userCannotDeleteAccount",defaultMessage:"This account cannot be deleted."}}),A=(0,i().vU)({active_space_content_duplication:{id:"spaceContentDuplication.activeRequest",defaultMessage:"Cannot edit content while this workspace's contents are being duplicated."},completed_space_content_duplication:{id:"spaceContentDuplication.completed",defaultMessage:"Cannot edit content for a workspace that has been migrated to another workspace."}}),R=(0,i().vU)({domain_settings_prevent_space_join:{id:"managedUsersDisallowedOperationErrorMessages.domainSettingsPreventSpaceJoin",defaultMessage:"Users from {disallowedEmailDomains} cannot join or be invited to external workspaces due to administrative restrictions. For more information, they should contact their organization's administrator."}}),B=(0,i().vU)({template_not_exists:{id:"templateSubmissionErrorMessages.templateNotExists",defaultMessage:"This does not seem to be a valid template. Try a different link?"},template_not_valid_block_id:{id:"templateSubmissionErrorMessages.templateNotValidBlockId",defaultMessage:"This does not seem to be a valid template. Try a different link?"},template_not_owned_by_user:{id:"templateSubmissionErrorMessages.templateNotOwnedByUser",defaultMessage:"You can only publish a template created by yourself."},template_not_page:{id:"templateSubmissionErrorMessages.templateNotPage",defaultMessage:"This template is not a page. Try a different link?"},template_creation_failed:{id:"templateSubmissionErrorMessages.templateCreateFailed",defaultMessage:"Could not submit the template. Please contact templates@makenotion.com or try it later."},template_over_rate_limit:{id:"templateSubmissionErrorMessages.templateOverRateLimit",defaultMessage:"Please try again after 1 minute."},template_not_published:{id:"templateSubmissionErrorMessages.templateNotPublished",defaultMessage:"The template has not been published to web."},template_not_allowed_for_duplicate:{id:"templateSubmissionErrorMessages.templateNotAllowedForDuplicate",defaultMessage:"The template has not been allowed for duplication."},user_is_not_template_creator:{id:"templateSubmissionErrorMessages.userIsNotTemplateCreator",defaultMessage:"We cannot locate your template creator profile. Please create a profile first."},template_not_on_public_domain:{id:"templateSubmissionErrorMessages.templateNotOnPublicDomain",defaultMessage:"The template link is not on a public domain. Please use your notion.site link in publish tab."},template_missing_name:{id:"templateSubmissionErrorMessages.templateMissingName",defaultMessage:"Please enter a name for your template."},template_name_too_long:{id:"templateSubmissionErrorMessages.templateNameTooLong",defaultMessage:"Your template name is too long. Please limit it to 50 characters."},template_name_invalid_words:{id:"templateSubmissionErrorMessages.templateNameInvalidWords",defaultMessage:'Please remove "{word}" from your template name.'},template_invalid_price:{id:"templateSubmissionErrorMessages.templateInvalidPrice",defaultMessage:"Please enter a valid price for your template."},template_below_minimum_price:{id:"templateSubmissionErrorMessages.templatePriceTooHigh",defaultMessage:"Paid templates must be at least $0.99."},template_above_maximum_price:{id:"templateSubmissionErrorMessages.templatePriceTooLow",defaultMessage:"Paid templates must be less than $5000.00."},template_missing_description:{id:"templateSubmissionErrorMessages.templateMissingDescription",defaultMessage:"Please add a description for your template."},template_description_too_long:{id:"templateSubmissionErrorMessages.templateDescriptionTooLong",defaultMessage:"Your description is too long. Please limit it to 280 characters."},template_missing_categories:{id:"templateSubmissionErrorMessages.templateMissingCategories",defaultMessage:"Please select at least one category for your template"},template_categories_too_long:{id:"templateSubmissionErrorMessages.templateCategoriesTooLong",defaultMessage:"Please select no more than 3 categories for your template."},template_insecure_url:{id:"templateSubmissionErrorMessages.templateInsecureUrl",defaultMessage:"Please enter a secure URL to purchase your template."},template_limit_too_large:{id:"templateSubmissionErrorMessages.templateLimitTooLarge",defaultMessage:"Limit is too large"},template_offset_too_large:{id:"templateSubmissionErrorMessages.templateOffsetTooLarge",defaultMessage:"Offset is too large"},template_invalid_purchase_url:{id:"templateSubmissionErrorMessages.templateInvalidPurchaseUrl",defaultMessage:"Please enter a valid URL. Example: https://www.example.com/"},template_notion_domain_as_purchase_url:{id:"templateSubmissionErrorMessages.templateNotionDomainAsPurchaseUrl",defaultMessage:"Please provide a link to a third-party payment platform."},template_invalid_payment_destination:{id:"templateSubmissionErrorMessages.templateInvalidPaymentProcessor",defaultMessage:"This payment platform is not supported. Please use another."},template_url_too_long:{id:"templateSubmissionErrorMessages.templatePurchaseUrlTooLong",defaultMessage:"This link is too long. Please use a shorter one."},template_missing_purchase_url:{id:"templateSubmissionErrorMessages.templateMissingPurchaseUrl",defaultMessage:"Please enter a purchase URL for your template."},template_missing_long_description:{id:"templateSubmissionErrorMessages.templateMissingLongDescription",defaultMessage:"Please add a detailed description for your template."},template_long_description_too_long:{id:"templateSubmissionErrorMessages.templateLongDescriptionTooLong",defaultMessage:"You description is too long. Please limit it to 5000 characters"},check_template_exists_failed:{id:"templateSubmissionErrorMessages.checkTemplateExistsFailed",defaultMessage:"We could not verify if the template has been published. Please try again later."},template_already_exists:{id:"templateSubmissionErrorMessages.templateAlreadyExists",defaultMessage:"This template has already been published or in review. Please try another one."},template_draft_edit_not_allowed:{id:"templateDraftSubmissionErrorMessages.editNotAllowed",defaultMessage:"Users cannot edit template drafts in review."},template_draft_not_found:{id:"templateDraftSubmissionErrorMessages.templateDraftNotExists",defaultMessage:"The template draft to submit does not exist!"},template_slug_too_long:{id:"templateSubmissionErrorMessages.templateSlugTooLong",defaultMessage:"Your template slug is too long. Please limit it to 60 characters."},template_slug_invalid:{id:"templateSubmissionErrorMessages.templateSlugInvalid",defaultMessage:"Your template slug can only contain lowercase letters, numbers, and hyphens(-)."},template_slug_invalid_hyphens:{id:"templateSubmissionErrorMessages.templateSlugInvalidHyphens",defaultMessage:"Your template slug cannot start or end with a hyphen(-). Also, it cannot have two consecutive hyphens(-)."},template_slug_invalid_words:{id:"templateSubmissionErrorMessages.templateSlugInvalidWords",defaultMessage:"Please don't use 'templates' or 'notion' in your template slug."},template_slug_already_exists:{id:"templateSubmissionErrorMessages.templateSlugAlreadyExists",defaultMessage:"This template slug has already been used. Please try another one."},template_draft_status_invalid_for_user:{id:"templateDraftSubmissionErrorMessages.statusInvalid",defaultMessage:"Users can only modify template draft status to draft or in review."},template_screenshots_limit:{id:"templateDraftSubmissionErrorMessage.screenshotsLimit",defaultMessage:"Template can only have a max of 5 screenshots."},template_slug_empty:{id:"templateSubmissionErrorMessages.templateSlugEmpty",defaultMessage:"Template slug cannot be empty."},template_locale_change_not_allowed:{id:"templateSubmissionErrorMessage.localeChangeNotAllowed",defaultMessage:"Locale cannot be changed after the template has been published."},template_draft_id_invalid:{id:"templateDraftSubmissionErrorMessages.templateDraftIdInvalid",defaultMessage:"Template draft id is not a valid UUID."},template_draft_not_owned_by_user:{id:"templateDraftSubmissionErrorMessages.templateDraftNotOwnedByUser",defaultMessage:"You can only modify a template draft created by yourself."},template_invalid_image_url:{id:"templateSubmissionErrorMessages.templateInvalidImageUrl",defaultMessage:"Submitted images must be hosted by Notion."},template_invalid_custom_email_snippet:{id:"templateSubmissionErrorMessages.templateInvalidCustomEmailSnippet",defaultMessage:"Invalid custom email snippet."}}),E=(0,i().vU)({template_missing_url:{id:"templateImageUploaderErrorMessages.templateMissingUrl",defaultMessage:"Template URL cannot be empty."},template_not_child_of_parent:{id:"templateImageUploaderErrorMessages.templateNotChildOfParent",defaultMessage:"This link doesnâ€™t seem to belong to the same template. Please try again."}}),D=(0,i().vU)({template_video_link_invalid:{id:"templateVideoUploaderErrorMessages.templateVideoLinkInvalid",defaultMessage:"This doesnâ€™t look like a YouTube or Vimeo link. Please try again."}}),U=(0,i().vU)({template_to_delete_not_exists:{id:"templateDeletionErrorMessages.templateToDeleteNotExists",defaultMessage:"The template to delete does not exist. Please try another one."},template_draft_to_delete_not_exists:{id:"templateDeletionErrorMessages.templateDeletionFailed",defaultMessage:"Could not delete the template draft. Please contact templates@makenotion.com for help."},template_to_delete_not_owned_by_requesting_user:{id:"templateDeletionErrorMessages.templateNotOwnedByRequestingUser",defaultMessage:"You can only delete a template created by yourself. Please try another one."},template_draft_to_delete_in_review:{id:"templateDeletionErrorMessages.templateDraftInReview",defaultMessage:"The template draft is in review. Please try to delete after it is published or rejected."},template_draft_to_delete_not_owned_by_requesting_user:{id:"templateDeletionErrorMessages.templateDraftNotOwnedByRequestingUser",defaultMessage:"You can only delete a template draft created by yourself. Please try another one."},template_draft_to_delete_cannot_roll_back:{id:"templateDeletionErrorMessages.templateDraftCannotRollBack",defaultMessage:"The template draft cannot be rolled back."}}),F=(0,i().vU)({email_verification_required:{id:"microsoftErrorMessages.emailVerificationRequired",defaultMessage:"You must do a one-time verification of your Microsoft-associated email to login to Notion."}}),N=(0,i().vU)({marketplace_seller_test_webhook_rate_limit:{id:"templateCreatorProfileFormErrorMessages.templateCreatorTestWebhookRateLimit",defaultMessage:"Please wait before testing your webhook again."},template_creator_missing_name:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorMissingName",defaultMessage:"Please enter a display name for your profile."},template_creator_name_too_long:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorNameTooLong",defaultMessage:"Your display name is too long. Please limit it to 50 characters."},template_creator_missing_handle:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorMissingHandle",defaultMessage:"Please enter a handle for your profile. It will be used in your profile URL."},template_creator_invalid_handle:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorInvalidHandle",defaultMessage:"Your handle can only contain lowercase letters, numbers, underscores, and dashes."},template_creator_handle_too_long:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorHandleTooLong",defaultMessage:"Your handle is too long. Please limit it to 50 characters."},template_creator_missing_email:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorMissingEmail",defaultMessage:"Please enter a contact email address for your profile."},template_creator_invalid_email:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorInvalidEmail",defaultMessage:"Please enter a valid contact email address."},template_creator_missing_description:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorMissingDescription",defaultMessage:"Please add a description for your profile."},template_creator_webhook_url_invalid:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorWebhookUrlInvalid",defaultMessage:"Invalid URL"},template_creator_description_too_long:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorDescriptionTooLong",defaultMessage:"Your description is too long. Please limit it to 280 characters."},template_creator_invalid_link:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorInvalidLink",defaultMessage:"Please enter a valid link. Links must start with https://."},template_creator_link_too_long:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorLinkTooLong",defaultMessage:"This link is too long. Please use a shorter one."},template_creator_name_not_allowed:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorNameNotAllowed",defaultMessage:"This name is not allowed. Please try another one."},template_creator_name_reserved:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorNameReserved",defaultMessage:'Names containing reserved brand names or "notion" cannot be used. Please contact templates@makenotion.com.'},template_creator_creation_failed:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorCreationFailed",defaultMessage:"Could not create the creator. Please contact templates@makenotion.com or try it later."},template_creator_update_failed:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorUpdateFailed",defaultMessage:"Could not update the creator. Please contact templates@makenotion.com or try it later."},check_handle_exists_failed:{id:"templateCreatorSubmissionValidationErrorMessages.checkHandleExistsFailed",defaultMessage:"We could not verify if the submitted handle exists. Please try later."},handle_already_exists:{id:"templateCreatorSubmissionValidationErrorMessages.handleAlreadyExists",defaultMessage:'The creator handle "{handle}" already exists. Please try another one.'},template_creator_user_id_not_match:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorUserIdNotMatch",defaultMessage:"User id does not match the creator's user id."},template_creator_invalid_image_url:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorInvalidImageUrl",defaultMessage:"Please upload a valid image through the /profile page."}}),V=(0,i().vU)({duplicated_pinned_templates:{id:"templateUpdatePinnedTemplatesErrorMessages.duplicatedPinnedTemplates",defaultMessage:"There are duplicated pinned templates. Please remove duplication and try again."},too_many_pinned_templates:{id:"templateUpdatePinnedTemplatesErrorMessages.tooManyPinnedTemplates",defaultMessage:"You can only pin up to 4 templates. Please remove some and try again."},pinned_templates_not_exist:{id:"templateUpdatePinnedTemplatesErrorMessages.pinnedTemplatesNotExist",defaultMessage:"Some pinned templates do not exist. Please remove them and try again."},pinned_templates_not_owned_by_requesting_user:{id:"templateUpdatePinnedTemplatesErrorMessages.pinnedTemplatesNotOwnedByRequestingUser",defaultMessage:"You can only pin templates created by yourself."}}),L=(0,i().vU)({airtable_unexpected_response:{id:"airtableError.unexpectedResponse",defaultMessage:"Failed to submit application. Please try again later."}}),O=(0,i().vU)({startup_input_empty:{id:"startupApplicationError.inputMissing",defaultMessage:"This field is required."},startup_unselected:{id:"startupApplicationError.unselected",defaultMessage:"A selection is required."},startup_invalid_email:{id:"startupApplicationError.invalidEmail",defaultMessage:"The email address is invalid."},startup_personal_email:{id:"startupApplicationError.personalEmail",defaultMessage:"A work email is required."},startup_invalid_url:{id:"startupApplicationError.invalidUrl",defaultMessage:"The provided URL is invalid."},startup_invalid_country:{id:"startupApplicationError.invalidCountry",defaultMessage:"The provided country is not supported."},startup_missing_field_server_side:{id:"startupApplicationError.missingField",defaultMessage:"A required field is missing."},startup_invalid_partner:{id:"startupApplicationError.invalidPartner",defaultMessage:"The provided referral partner is not valid."},startup_not_admin_of_space:{id:"startupApplicationError.notAdmin",defaultMessage:"User is not an admin of the space."}}),Z=(0,i().vU)({student_group_url_invalid:{id:"studentGroupSignupError.urlInvalid",defaultMessage:"This url is invalid."},student_group_response_missing:{id:"studentGroupSignupError.responseMissing",defaultMessage:"This field is required."},student_group_response_too_long:{id:"studentGroupSignupError.responseTooLong",defaultMessage:"Your response is too long. Please limit your answers to 2000 characters."},student_institution_domain_mismatch:{id:"studentGroupSignupError.institutionDomainMismatch",defaultMessage:"This institution does not match your email domain. Please make sure you're logged in to a Notion account registered with your student email."},student_institution_not_in_allowlist:{id:"studentGroupSignupError.institutionNotInAllowlist",defaultMessage:"Institution not found in list."},student_group_user_not_found:{id:"studentGroupSignupError.userNotFound",defaultMessage:"User not found."},student_group_space_not_found:{id:"studentGroupSignupError.spaceNotFound",defaultMessage:"Space not found."},student_email_not_admin_of_space:{id:"studentGroupSignupError.notAdminOfSpace",defaultMessage:"User is not an admin of the space."},education_group_application_over_rate_limit:{id:"studentGroupSignupError.overRateLimit",defaultMessage:"You have submitted too many times, please try again later."},student_group_link_to_organization_domain_mismatch:{id:"studentGroupSignupError.linkToOrganizationDomainMismatch",defaultMessage:"Please enter a link that is on your institution's official domain."}}),j=(0,i().vU)({marketplace_refund_custom_reason_body_required:{id:"marketplaceRefundError.customReasonBodyRequired",defaultMessage:"A reason is required"},marketplace_refund_custom_reason_too_long:{id:"marketplaceRefundError.customReasonTooLong",defaultMessage:"Provided reason is too long"},marketplace_refund_custom_reason_too_short:{id:"marketplaceRefundError.customReasonTooShort",defaultMessage:"Provided reason is too short"},marketplace_refund_requires_valid_acquisition:{id:"marketplaceRefundError.requiresValidAcquisition",defaultMessage:"Acquisition must be valid"},marketplace_refund_acquisition_too_old:{id:"marketplaceRefundError.acquisitionTooOld",defaultMessage:"Acquisition is too old, refunds must be requested within 14 days of purchase"},marketplace_refund_acquisition_free:{id:"marketplaceRefundError.acquisitionFree",defaultMessage:"Unable to refund free acquisitions"},marketplace_refund_acquisition_already_has_active_refund:{id:"marketplaceRefundError.acquisitionAlreadyHasActiveRefund",defaultMessage:"This purchase already has an active refund"},marketplace_refund_only_acquirer_can_request:{id:"marketplaceRefundError.onlyAcquirerCanRequest",defaultMessage:"Only the acquirer can request a refund"},marketplace_refund_acquisition_missing_succeeded_time:{id:"marketplaceRefundError.acquisitionMissingSucceededTime",defaultMessage:"Acquisition does not have a succeeded time"}}),K=(0,i().vU)({marketplace_coupon_not_found:{id:"marketplaceCouponError.notFound",defaultMessage:"This is an invalid coupon code."},marketplace_coupon_expired:{id:"marketplaceCouponError.expired",defaultMessage:"The coupon code has expired."},marketplace_coupon_max_uses_reached:{id:"marketplaceCouponError.maxUsesReached",defaultMessage:"The coupon code has reached its maximum usage."}}),z=(0,i().vU)({marketplace_coupon_submission_invalid_code:{id:"marketplaceCouponSubmissionError.invalidCode",defaultMessage:"Invalid coupon code."},marketplace_coupon_submission_invalid_discount:{id:"marketplaceCouponSubmissionError.invalidDiscount",defaultMessage:"Invalid discount."},marketplace_coupon_submission_invalid_date:{id:"marketplaceCouponSubmissionError.invalidDate",defaultMessage:"Date is invalid."},marketplace_coupon_submission_invalid_date_in_past:{id:"marketplaceCouponSubmissionError.invalidDateInPast",defaultMessage:"Date cannot be in the past."},marketplace_coupon_submission_start_date_end_date_out_of_order:{id:"marketplaceCouponSubmissionError.startDateEndDateOutOfOrder",defaultMessage:"Start date cannot be after end date."},marketplace_coupon_submission_invalid_usage_limit:{id:"marketplaceCouponSubmissionError.invalidUsageLimit",defaultMessage:"Invalid usage limit."},marketplace_coupon_submission_invalid_usage_limit_already_surpassed:{id:"marketplaceCouponSubmissionError.invalidUsageLimitAlreadySurpassed",defaultMessage:"Invalid usage limit, coupon has already been used more than this limit allows."},marketplace_coupon_submission_code_already_in_use:{id:"marketplaceCouponSubmissionError.codeAlreadyInUse",defaultMessage:"Coupon code already in use."},marketplace_coupon_submission_invalid_eligible_listing_ids:{id:"marketplaceCouponSubmissionError.invalidEligibleListingIds",defaultMessage:"You must select at least one template to proceed."}}),H=(0,i().vU)({marketplace_listing_review_invalid_rating:{id:"marketplaceReviewError.noRatingError",defaultMessage:"Please give this template a rating"},marketplace_listing_review_existing_review:{id:"marketplaceReviewError.existingReviewError",defaultMessage:"A review already exists"},marketplace_listing_review_title_too_short:{id:"marketplaceReviewError.titleTooShort",defaultMessage:"Your title is too short. Please enter at least 3 characters."},marketplace_listing_review_title_too_long:{id:"marketplaceErrors.marketplaceListingReviewTitleTooLong",defaultMessage:"Your review title is too long. Please limit it to 100 characters."},marketplace_listing_review_description_too_short:{id:"marketplaceErrors.marketplaceListingReviewDescriptionTooShort",defaultMessage:"Your review is too short. Please enter at least 50 characters."},marketplace_listing_review_description_too_long:{id:"marketplaceErrors.marketplaceListingReviewDescriptionTooLong",defaultMessage:"Your review is too long. Please limit it to 1,500 characters."},marketplace_listing_review_name_too_short:{id:"marketplaceErrors.marketplaceListingReviewNameTooShort",defaultMessage:"Please enter a name to display on your review."},marketplace_listing_review_name_too_long:{id:"marketplaceErrors.marketplaceListingReviewNameTooLong",defaultMessage:"Your name is too long. Please limit it to 40 characters."},marketplace_listing_review_creator_response_too_short:{id:"marketplaceReviewError.creatorResponseTooShort",defaultMessage:"Your response is too short. Please enter at least 5 characters."},marketplace_listing_review_creator_response_too_long:{id:"marketplaceReviewError.creatorResponseTooLong",defaultMessage:"Your response is too long. Please limit it to 1,500 characters."}}),q=(0,i().vU)({user_not_a_creator:{defaultMessage:"Onboarding is not available as you are not a template creator.",id:"marketplaceErrors.userNotACreator.message"},marketplace_metrics_no_access:{defaultMessage:"No access to this creator or listing",id:"marketplaceErrors.metricsNoAccess.message"},onboarding_disabled:{defaultMessage:"Onboarding is disabled for your account. Please contact support if you believe this is an error.",id:"marketplaceErrors.onboardingDisabled.message"},marketplace_default_error:{defaultMessage:"Something went wrong. Please try again later.",id:"marketplaceErrors.defaultError.message"},marketplace_product_not_available:{defaultMessage:"Product not available on Notion Marketplace.",id:"marketplaceErrors.productNotAvailable.message"},marketplace_invalid_tax_id:{defaultMessage:"Invalid tax ID.",id:"marketplaceErrors.invalidTaxId.message"},marketplace_already_refunded:{defaultMessage:"You have already refunded this product",id:"marketplaceErrors.alreadyRefunded.message"},marketplace_purchasing_disabled:{defaultMessage:"This content does not exist",id:"marketplaceErrors.purchasingDisabled.message"},marketplace_metrics_creator_or_listing_not_found:{defaultMessage:"Creator or listing not found",id:"marketplaceErrors.metricsCreatorOrListingNotFound.message"},marketplace_sanctioned_country:{defaultMessage:"You cannot make Marketplace purchases from this country.",id:"marketplaceErrors.billingAddressRestricted.message"},marketplace_guest_user_error:{defaultMessage:"Guest users are not allowed to purchase products.",id:"marketplaceErrors.guestUserError.message"}}),W=(0,i().vU)({space_does_not_exist:{defaultMessage:"Workspace must exist",id:"publicDomainError.invalidSpace.message"},public_domain_does_not_exist:{defaultMessage:"Domain must exist",id:"publicDomainError.invalidDomain.message"},public_domain_disallowed:{defaultMessage:"Domain not allowed",id:"publicDomainError.disallowedDomain.message"},public_domain_unavailable:{defaultMessage:"Domain not available",id:"publicDomainError.unavailableDomain.message"},public_domain_name_invalid:{defaultMessage:"Domain name is not valid",id:"publicDomainError.invalidDomainName.message"},incorrect_custom_public_domain_format:{defaultMessage:"Include a subdomain (e.g., www.example.org) ",id:"publicDomainError.missingSubdomainForCustomDomain.message"},public_domain_cannot_rename_custom:{defaultMessage:"Cannot rename a custom domain",id:"publicDomainError.cannotRenameDomain.message"},public_domain_non_custom_validation:{defaultMessage:"Cannot validate domain",id:"publicDomainError.cannotValidateDomain.message"},default_public_domain_exists:{defaultMessage:"Default domain exists",id:"publicDomainError.existingDefaultDomain.message"},maximum_public_domains_reached:{defaultMessage:"Maximum domains created",id:"publicDomainError.maxDomainsCreated.message"},payment_required:{defaultMessage:"Payment required",id:"publicDomainError.paymentRequired.message"},default_public_domain_deletion:{defaultMessage:"Default domain cannot be deleted",id:"publicDomainError.defaultDomainDeletion.message"}}),G=(0,i().vU)({setting_overridden_by_organization:{id:"organizationErrors.settingOverriddenByOrganization",defaultMessage:"You can't update this setting because it's being overridden by your organization."}}),$=(0,i().vU)({default:{id:"fallbackHttpErrorMessages.default",defaultMessage:"Oops, something went wrong. ({errorCode})"},defaultTryAgainLater:{id:"fallbackHttpErrorMessages.defaultTryAgainLater",defaultMessage:"Oops, something went wrong. Please try again in a few minutes. ({errorCode})"}}),Q=(0,i().vU)({sanctioned_entity:{defaultMessage:"You may not access Notion from a prohibited jurisdiction.",id:"sanctionErrors.sanctionedEntityProhibited.errorMessage"}}),Y=(0,i().vU)({block_purged:{defaultMessage:"This page has passed the retention period and has been permanently deleted.",id:"blockRestorationErrors.blockPurged.errorMessage"}}),J=(0,i().vU)({marketplace_export_purchases_csv_over_rate_limit:{defaultMessage:"You can only export purchases CSV once every hour.",id:"marketplaceExportPurchasesCSVError.overRateLimit"}}),X=(0,i().vU)({slug_unavailable:{defaultMessage:"Sorry, slug is taken by {pageName}",id:"updateSlug.unavailableSlug"},slug_invalid:{defaultMessage:"Sorry, slug is not valid",id:"updateSlug.invalidSlug"}});function ee(e){const{type:t}=e;return(0,r().qg)(a,t)&&a[t]||(0,r().qg)(s,t)&&s[t]||(0,r().qg)(l,t)&&l[t]||(0,r().qg)(c,t)&&c[t]||(0,r().qg)(p,t)&&p[t]||(0,r().qg)(g,t)&&g[t]||(0,r().qg)(v,t)&&v[t]||(0,r().qg)(y,t)&&y[t]||(0,r().qg)(S,t)&&S[t]||(0,r().qg)(w,t)&&w[t]||(0,r().qg)(k,t)&&k[t]||(0,r().qg)(f,t)&&f[t]||(0,r().qg)(h,t)&&h[t]||(0,r().qg)(b,t)&&b[t]||(0,r().qg)(I,t)&&I[t]||(0,r().qg)(C,t)&&C[t]||(0,r().qg)(x,t)&&x[t]||(0,r().qg)(T,t)&&T[t]||(0,r().qg)(M,t)&&M[t]||(0,r().qg)(P,t)&&P[t]||(0,r().qg)(A,t)&&A[t]||(0,r().qg)(R,t)&&R[t]||(0,r().qg)(_,t)&&_[t]||(0,r().qg)(B,t)&&B[t]||(0,r().qg)(N,t)&&N[t]||(0,r().qg)(F,t)&&F[t]||(0,r().qg)(U,t)&&U[t]||(0,r().qg)(E,t)&&E[t]||(0,r().qg)(D,t)&&D[t]||(0,r().qg)(Q,t)&&Q[t]||(0,r().qg)(Z,t)&&Z[t]||(0,r().qg)(L,t)&&L[t]||(0,r().qg)(O,t)&&O[t]||(0,r().qg)(H,t)&&H[t]||(0,r().qg)(q,t)&&q[t]||(0,r().qg)(V,t)&&V[t]||(0,r().qg)(W,t)&&W[t]||(0,r().qg)(G,t)&&G[t]||(0,r().qg)(V,t)&&V[t]||(0,r().qg)(Y,t)&&Y[t]||(0,r().qg)(J,t)&&J[t]||(0,r().qg)(j,t)&&j[t]||(0,r().qg)(X,t)&&X[t]||(0,r().qg)(K,t)&&K[t]||(0,r().qg)(z,t)&&z[t]||void 0}function te(e,t){const o=ie(e,ne(t.clientData));if(o)return o}function oe(e,t){const o=t.body;if((0,n().Jx)(o)){const t=te(e,o);if(t)return t}if(t.offline)return e.formatMessage(I.offline);switch(t.status){case 429:case 502:case 503:case 504:return e.formatMessage($.defaultTryAgainLater,{errorCode:t.status});default:return e.formatMessage($.default,{errorCode:t.status})}}function ne(e){return(0,n().oE)(e)&&e.errors[0].clientData?e.errors[0].clientData:e}function ie(e,t){const o=ee(t);if(o)return"messageValues"in t?e.formatMessage(o,t.messageValues):e.formatMessage(o)}function re(e,t){if((0,n().a3)(t)){const o=ee(t.clientData);if(o)return"messageValues"in t.clientData?e.formatMessage(o,t.clientData.messageValues):e.formatMessage(o)}return e.formatMessage(k.generic_error)}},250625:(e,t,o)=>{o.d(t,{DJ:()=>a,ZV:()=>r,lj:()=>i});let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("test",(()=>{}),e)}catch(s){}function i(e,t,o,i){n?e.addEventListener(t,o,{passive:!0,capture:Boolean(i)}):e.addEventListener(t,o,Boolean(i))}function r(e,t,o,n){e.removeEventListener(t,o,Boolean(n))}function a(e){if(void 0!==e)return"shiftKey"in e&&"altKey"in e&&e.shiftKey&&e.altKey?"window":"button"in e&&1===e.button||"metaKey"in e&&e.metaKey||"ctrlKey"in e&&e.ctrlKey?"tab":void 0}},417746:(e,t,o)=>{o.d(t,{GQ:()=>f,Ue:()=>m,_F:()=>v,_l:()=>g,j7:()=>b,o$:()=>_,pI:()=>h,y6:()=>p});o(267602),o(653476),o(470928),o(241792);var n=()=>o(437187),i=()=>o(278606),r=()=>o(249324),a=()=>o(830968),s=()=>o(696459),l=()=>o(876822),c=()=>o(749826),d=()=>o(138912),u=()=>o(643669);function p(e){if(e.isCollectionView()){var t,o;if(null===(t=e.getCollectionStore())||void 0===t||!t.isSyncedCollection())return;return null===(o=e.getCollectionStore())||void 0===o?void 0:o.getFormat()}return e.getFormat()}function m(e,t){const o=d().default.state;if(!e||!o.loaded)return[];const n=(0,a().ny)({url:e,integrations:d().default.integrations.state,currentSpaceId:t});return"success"!==n.type?[]:o.bots.filter((e=>e.integration_id===n.integration.id))}function f(e,t){if(!e)return;const o=(0,a().ny)({url:e,integrations:d().default.integrations.state,currentSpaceId:t});return"success"===o.type?o:void 0}function g(e){const{store:t,isInDarkMode:o}=e,i=p(t);if(null!=i&&i.is_placeholder||null!=i&&i.error){const e=d().default.integrations.state.find((e=>{let{id:t}=e;return i.integration_id===t}));if(e){const t=d().default.bots.state.filter((t=>t.integration_id===e.id)).map((e=>{let{id:t}=e;return t})),{icon:s,dark_icon:c,accent_color:u,accent_icon:p}=e.info,m=o&&c?c:s;if(!m||!u||!p)return;const f=i.original_url;let g;if(f){var r;const t=(0,a().ny)({url:f,integrations:[e],currentSpaceId:null===(r=l().default.state.currentSpaceStore)||void 0===r?void 0:r.id});"success"===t.type&&(g=t.pattern)}return{type:null!=i&&i.is_placeholder?"placeholder":"error",userHasBotForIntegration:t.length>0,renderConfig:{headerAttributes:[{formatter:n().V1.placeholder,attribute:{id:"title",name:"Title",type:"inline",values:[e.name],format:{type:"title"}}}]},action:f&&!g?"error":void 0,updating:!1,originalUrl:f,pattern:g,integration:{id:e.id,icon:m,name:e.name,accentColor:u,accentIcon:p},botIds:t}}}return v({...e,getRenderFn:e=>e.block})}function v(e){var t;const{store:o,isInDarkMode:n,canEdit:r,currentUserId:c,showAction:d,getRenderFn:g}=e,v=p(o);if(!v||v.is_placeholder)return;if(void 0===v.external_object_id&&void 0!==v.uri)return;const h=v.original_url||v.uri;if(!o.isDefined())return;const _=f(h,o.getSpaceId()??(null===(t=l().default.state.currentSpaceStore)||void 0===t?void 0:t.id));if(!h||!_)return;const b=m(h,o.getSpaceId()),y=b.length>0,S=o.getExternalObjectSubInstanceStores(),w=S.map((e=>e.getFormat())).filter(s().$K);if(w.length!==S.length)return;const{integration:k,pattern:I}=_,{icon:C,dark_icon:x,accent_color:T,accent_icon:M}=k.info,P=n&&x?x:C;if(!P||!T||!M)return;const A=(0,i().U)(I.name),R=(0,a().Tf)({url:h,integration:k}),B=g(A)({integrationIcon:P,root:v,relations:w,parsedAttributes:R});if(!B)return;const E=u().Z.state.updatingUrls.has(h);let D;var U;o.isCollectionView()?D=null===(U=o.getCollectionStore())||void 0===U||null===(U=U.getFormat().error)||void 0===U?void 0:U.status_code:D=o.getFormatStore().getKeyStore("error").getKeyStore("status_code").getValue();const F=Date.now(),N=Boolean(o.getCreatedById()!==c&&o.getCreatedTime()&&F-o.getCreatedTime()<6e4);let V;return!E&&r&&c&&(d?V=d:v.error?V="error":(null==v||!v.stale)&&v.attributes||N||(V=y?"update":"authenticate")),{type:"active",renderConfig:B,action:V,updating:E,status_code:D,originalUrl:h,integration:{id:k.id,icon:P,name:k.name,accentColor:T,accentIcon:M},pattern:I,userHasBotForIntegration:y,botIds:b.map((e=>{let{id:t}=e;return t}))}}function h(e,t){if(!t)return e;const o=f(e,t);return"success"!==(null==o?void 0:o.type)?e:(0,r().l)({url:e,integration:o.integration,pattern:o.pattern})}function _(){return"on"===c().default.getEligibleGroup({experimentId:"link_preview_resizing_api",defaultGroup:"control"})}function b(e){const t=c().default.checkGate({gateName:"use_eap_secureexternalpreview"});return e.includes("eap/proxy/files")&&t}},485569:(e,t,o)=>{o.d(t,{hx:()=>O,lf:()=>N,ox:()=>U,r4:()=>F,t9:()=>V});o(267602),o(470928);var n=o(667294),i=()=>o(146947),r=()=>o(219727),a=()=>o(142735),s=()=>o(846550),l=()=>o(5234),c=()=>o(716703),d=()=>o(38883),u=()=>o(646574),p=()=>o(874459),m=()=>o(998411),f=()=>o(748456),g=()=>o(830968),v=()=>o(788860),h=()=>o(568017),_=()=>o(696459),b=()=>o(707513),y=()=>o(827618),S=()=>o(643051),w=()=>o(475120),k=()=>o(518242),I=()=>o(135499),C=()=>o(837416),x=()=>o(78014),T=()=>o(315605),M=()=>o(718611),P=()=>o(677559),A=()=>o(641702),R=()=>o(527278),B=o(785893);function E(e){const{title:t,color:o,icon:n}=e,i=(0,s().Fg)(),r=o?(0,h().MJ)(`rgb(${o.r},${o.g},${o.b})`):void 0,a=(0,h().KR)(i,r);return(0,B.jsx)(x().Z,{format:d().lo.Medium,value:n?(0,B.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,B.jsx)(I().Z,{isAuthenticated:!1,url:n,width:32,render:(e,t)=>(0,B.jsx)(k().ZP,{src:t,height:12,placeholderLoadedStyle:{width:12,height:12,marginRight:4}})}),(0,B.jsx)(y().Z,{children:(0,l().Z)(t)})]}):(0,B.jsx)(y().Z,{children:(0,l().Z)(t)}),showRemoveButton:!1,color:a.textColor,backgroundColor:a.backgroundColor,isSingle:!0,style:{display:"flex",whiteSpace:"break-spaces",flex:"0 0 auto"}})}function D(e){var t,o,n;const{uri:i,store:r,...s}=e,l=(0,a().VK)((()=>{const e=r.getExternalObjectSubInstanceStores().find((e=>{const t=e.getKeyStore("format").getKeyStore("uri").getValue();return t&&t===i}));if(e)return e.getFormat()}),[r,i]);if(!l)return null;const c=null===(t=l.attributes)||void 0===t?void 0:t.find(g().Id),d=null===(o=l.attributes)||void 0===o?void 0:o.find(g().li),u=null===(n=l.attributes)||void 0===n?void 0:n.find(g().hW);return c?u?(0,B.jsx)(E,{title:c.values[0],color:u.values[0],icon:null==d?void 0:d.values[0]}):c?(0,B.jsxs)("span",{style:{display:"flex",alignItems:"center"},children:[d&&(0,B.jsx)(S().Z,{type:"image_url",imageURL:d.values[0],size:16,style:{marginRight:4},imageStyle:s.avatarStyle}),(0,B.jsx)(U,{attribute:c,store:r,...s})]},i):null:null}function U(e){const{attribute:t,formatter:o,store:n,style:i,avatarStyle:r}=e,a=(0,s().Fg)();if(!t)return null;if((0,g().Id)(t)){var l;const e=t.values[0];if("enum"===(null===(l=t.format)||void 0===l?void 0:l.type)){const{color:o}=t.format;return(0,B.jsx)(E,{title:e,color:o})}{const t=e.replace(/[\r\n]/g,"").trim(),n=o?R().Z.formatMessage(o,{value:t}):t;return(0,B.jsx)("div",{spellCheck:!1,style:{whiteSpace:"nowrap",color:a.mediumTextColor,...i},children:n})}}if((0,g().OM)(t))return(0,B.jsx)(D,{uri:t.values[0],store:n,style:i,avatarStyle:r});if((0,g().Gc)(t))return(0,B.jsx)(F,{attribute:t,formatter:e.formatter,style:e.style,dateStyle:"relative"});if((0,g().An)(t)){const e=t.values[0];return(0,B.jsx)("div",{style:{color:a.mediumTextColor,fontSize:12,...i},children:o?R().Z.formatMessage(o,{value:e}):String(e)})}return null}function F(e){const{attribute:t,formatter:o,style:n,dateStyle:r}=e,a=(0,v().YB)(),l=(0,s().Fg)(),c=t.values[0];let d;if("datetimerange"===c.type)d=(0,u().ZV)({allowRelativeDates:!1,displayInUserTimezone:!0,intl:a,value:c});else{const e=(0,p().uO)(c,(0,m().r)());r&&"relative"!==r?"exact_time"===r?d=(0,u().Yx)(e,"medium_with_time",i().locale):"exact_date"===r?d=(0,u().Yx)(e,"medium",i().locale):(0,_().t1)(r):d=(0,u().tv)(e,i().locale)}const f=o?R().Z.formatMessage(o,{value:d}):d;return(0,B.jsx)("div",{style:{color:l.mediumTextColor,fontSize:12,whiteSpace:"nowrap",...n},children:f})}function N(e){const t=(0,s().Fg)(),{attribute:o,isSmall:n,isUltraSmall:i}=e,r=i?16:n?22:34,a={...e.style,borderRadius:r,boxShadow:t.avatarBoxShadow};return(0,g().li)(o)?(0,B.jsx)(S().Z,{type:"image_url",imageURL:o.values[0],size:r,imageStyle:a}):(0,g().Id)(o)?(0,B.jsx)("div",{style:{...a,borderRadius:r,overflow:"hidden",boxShadow:t.avatarBoxShadow,height:30,width:30},children:(0,B.jsx)(w().Z,{size:r,title:o.values[0]})}):null}function V(e){var t;const{attribute:o}=e,{value:r}=(0,P().XJ)(T().o),a=(0,s().yK)((e=>({code:{whiteSpace:"pre-wrap",wordBreak:"break-all",fontFamily:b().F5(i().locale).githubMono,fontSize:"12px",tabSize:2,minWidth:0,textAlign:"left",lineHeight:1.5},text:{fontSize:"85%",flexGrow:1,flexShrink:1,minHeight:"1em"},buttons:{fontWeight:b().Ue.medium}})),[]),l=o.values[0],d=null===(t=o.format)||void 0===t?void 0:t.language,u=n.useMemo((()=>{if(r&&d&&(0,c().L9)(d)&&"Plain Text"!==d){const e=f().W[d],t=r.highlight(l,r.languages[e],d);return(0,B.jsx)("div",{spellCheck:!1,style:a.code,dangerouslySetInnerHTML:{__html:t}})}return(0,B.jsx)("div",{spellCheck:!1,style:a.code,children:(0,B.jsx)("code",{children:l})})}),[r,l,d,a.code]);return(0,B.jsx)("div",{style:{marginTop:4,marginRight:4,marginBottom:4,width:"100%"},children:(0,B.jsx)(C().Z,{moreElement:(0,B.jsxs)(B.Fragment,{children:["â€¦","Â ",(0,B.jsx)("span",{style:{...a.text,...a.buttons},children:(0,B.jsx)(v()._H,{id:"externalObjectInstance.bodyAttribute.moreLabel",defaultMessage:"more"})})]}),lessElement:(0,B.jsx)("span",{style:{...a.text,...a.buttons},children:(0,B.jsx)(v()._H,{id:"externalObjectInstance.bodyAttribute.showLessLabel",defaultMessage:"show less"})}),maxLines:16,clampOverride:{fontSize:12,lineHeight:1.5},children:u})})}function L(e){const{attribute:t,store:o}=e,n=(0,s().Fg)(),i=(0,r().O7)(),l=(0,a().VK)((()=>(0,g().Id)(t)?t.values[0]:(0,A().IY)({environment:i,textValue:{value:t.values,spaceId:o.id},disableHover:!0,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!1,disableLinks:!1,disabled:!1,katex:i.KatexStore.getKatex(),parentStore:o,emojiType:(0,M().e_)(i),formulaValueTypes:[],theme:n})),[i,o,n,t]);return(0,B.jsx)("div",{children:l})}function O(e){const t=(0,s().yK)((e=>({text:{color:e.regularTextColor,fontSize:12,lineHeight:1.45},buttons:{fontWeight:b().Ue.medium}})),[]);return(0,B.jsx)("div",{style:{marginRight:4,marginBottom:4,width:"100%"},children:(0,B.jsx)(C().Z,{moreElement:(0,B.jsxs)(B.Fragment,{children:["â€¦","Â ",(0,B.jsx)("span",{style:{...t.text,...t.buttons},children:(0,B.jsx)(v()._H,{id:"externalObjectInstance.bodyAttribute.moreLabel",defaultMessage:"more"})})]}),lessElement:(0,B.jsx)("span",{style:{...t.text,...t.buttons},children:(0,B.jsx)(v()._H,{id:"externalObjectInstance.bodyAttribute.showLessLabel",defaultMessage:"show less"})}),maxLines:3,clampOverride:{fontSize:t.text.fontSize,lineHeight:t.text.lineHeight},children:(0,B.jsx)("div",{spellCheck:!1,style:t.text,children:(0,B.jsx)(L,{attribute:e.attribute,store:e.store})})})})}},399523:(e,t,o)=>{o.d(t,{LX:()=>c,Vu:()=>d,XT:()=>p,ZP:()=>m,fe:()=>u,il:()=>l});o(670560),o(267602),o(653476),o(241792),o(731107),o(228244);var n=()=>o(899133),i=()=>o(513670),r=()=>o(326966);function a(e){const t=[];let o=!1,i=e;for(;""!==i;){const e=o?n().dK:n().Um,r=i.indexOf(e);if(-1===r)return t.push(s(i,!1)),t;const a=i.substring(0,r),l=i.slice(r+e.length);""!==a&&t.push(s(a,o)),i=l,o=!o}return t}function s(e,t){return t?[e,"highlight"]:[e]}function l(e){return 2===e.length&&"highlight"===e[1]}function c(e){return e[0]}function d(e){return e.reduce(((e,t)=>{if(0===e.length)return[t];const o=e[e.length-1];return l(o)===l(t)?[...e.slice(0,e.length-1),s(c(o)+c(t),l(t))]:[...e,t]}),[])}function u(e){if(!e)return[];let t=a(e);t.some((e=>l(e)&&1===c(e).length))&&(t=d(t));const o=t.filter(l).map(c);return i().jj(o)}function p(e){const{text:t,patterns:o,uniqueTokenHighlighterContext:n}=e,a=i().jj(o.filter((e=>e.length>0)));if(0===a.length)return[s(t,!1)];const l=i().MR(a,(e=>-e.length)).map(i().hr);return function(e,t,o){const n=(0,r().uO)(t,e);if(0===n.length)return[s(e,!1)];let i=0;const a=[];for(let r=0;r<n.length;r++){const t=n[r];if(!t)continue;let l;void 0===o||!o.has(t[0].toLowerCase())?(void 0!==o&&o.add(t[0].toLowerCase()),i!==t.index&&a.push(s(e.slice(i,t.index),!1)),a.push(s(t[0],!0)),l=t.index+t[0].length):l=i;n[r+1]||l===e.length||a.push(s(e.slice(l),!1)),i=l}return a}(t,new RegExp(l.join("|"),"ig"),n)}const m=a},845111:(e,t,o)=>{o.d(t,{W:()=>r});var n=()=>o(156642),i=()=>o(826955);function r(e){return e.findRecordStoreUIAncestor((e=>e instanceof i().G&&e.getType()===n().Ti.factory)).ancestor}},177189:(e,t,o)=>{o.d(t,{A3:()=>c,rf:()=>l});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(241792),o(228244);var n=o(667294),i=()=>o(513670),r=()=>o(876822),a=()=>o(458335),s=()=>o(345918);function l(e){const{currentUserRootStore:t}=r().default.state,o=null==t?void 0:t.getSpaceViewStores(),n=i().oA(null==o?void 0:o.map((e=>e.getSpaceId()))).map((t=>a().Z.getData(e,{spaceId:t}))),l=function(e){const t=e.map((e=>(0,s().cD)(e))),o=new Set(i().oA(t));return o.has("enterprise")?"enterprise":o.has("business")?"business":o.has("plus")?"plus":o.has("team_free")?"team_free":o.has("student")?"student":o.has("personal")?"personal":o.has("personal_free")?"personal_free":(o.has("free"),"free")}(n);return{userHighestPlanType:l,isSalesAssistedPlan:i().hX(n,{subscriptionTier:l}).some((e=>{if("none"!==(null==e?void 0:e.role)&&!0===(null==e?void 0:e.is_sales_assisted))return!0}))}}function c(){const[e,t]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{function e(e){var o,n;"forethoughtWidgetOpened"===(null==e||null===(o=e.data)||void 0===o?void 0:o.event)?t(!0):"forethoughtWidgetClosed"===(null==e||null===(n=e.data)||void 0===n?void 0:n.event)&&t(!1)}return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}})),e}},820978:(e,t,o)=>{o.d(t,{A1:()=>a,M5:()=>r,sY:()=>i});var n=()=>o(998411);const i=(0,o(788860).vU)({whereToDuplicate:{id:"forkPageModal.title",defaultMessage:"Where would you like to add {blockTitle}?"},selectWorkspace:{id:"forkPageModal.selectWorkspace",defaultMessage:"Select a workspace"},untitledBlockRecordTitle:{defaultMessage:"Untitled",id:"forkPageActions.untitledBlockRecordTitle"},untitledSpaceRecordTitle:{defaultMessage:"Untitled",id:"forkPageActions.untitledSpaceRecordTitle"},loadingStateDisplayText:{defaultMessage:"Duplicating {blockTitle} to {spaceTitle}â€¦",id:"forkPageActions.loadingStateDisplayText"}});function r(e,t){var o;const r=null==e||null===(o=e.getModel())||void 0===o?void 0:o.getRenderTitleWithPlaceholder({getRecordModel:e.getRecordModel,userTimeZone:(0,n().r)(),intl:t});return r||t.formatMessage(i.untitledBlockRecordTitle)}function a(e,t){var o;const n=null==e||null===(o=e.getModel())||void 0===o?void 0:o.getRenderTitleWithEmojiOrPlaceholder({intl:t});return n||t.formatMessage(i.untitledSpaceRecordTitle)}},532146:(e,t,o)=>{o.d(t,{W:()=>r});var n=()=>o(527278);const i=(0,o(788860).vU)({twoItems:{id:"formatSettings.twoItems",defaultMessage:"{item1} and {item2}"},threeOrMoreItems:{id:"formatSettings.threeOrMoreItems",defaultMessage:"{item1}, and {numberOfOther} others"},twoItemsWithAmpersand:{id:"formatSettings.twoItems.withAmpersand",defaultMessage:"{item1} & {item2}"},threeOrMoreItemsWithRemoveComma:{id:"formatSettings.threeOrMoreItems.withRemoveComma",defaultMessage:"{item1} and {numberOfOther} others"},threeOrMoreItemsWithAmpersand:{id:"formatSettings.threeOrMoreItems.withAmpersand",defaultMessage:"{item1}, & {numberOfOther} others"},threeOrMoreItemsWithAmpersandAndRemoveComma:{id:"formatSettings.threeOrMoreItems.withAmpersandAndRemoveComma",defaultMessage:"{item1} & {numberOfOther} others"}});function r(e,t){const{removeComma:o,useAmpersand:r}=t||{};if(0===e.length)return"";const a=e[0];if(1===e.length)return a;const s=e[1];if(2===e.length)return r?n().Z.formatMessage(i.twoItemsWithAmpersand,{item1:a,item2:s}):n().Z.formatMessage(i.twoItems,{item1:a,item2:s});const l=e.length-1;return r?o?n().Z.formatMessage(i.threeOrMoreItemsWithAmpersandAndRemoveComma,{item1:a,numberOfOther:l}):n().Z.formatMessage(i.threeOrMoreItemsWithAmpersand,{item1:a,numberOfOther:l}):n().Z.formatMessage(i.threeOrMoreItems,{item1:a,numberOfOther:l})}},57687:(e,t,o)=>{o.d(t,{Cl:()=>g,il:()=>v});o(398858),o(461318),o(33228);var n=o(667294),i=()=>o(219727),r=()=>o(142735),a=()=>o(956057),s=()=>o(530980),l=()=>o(396136),c=()=>o(989478),d=()=>o(513670),u=()=>o(342792),p=()=>o(142109),m=()=>o(876822),f=()=>o(826955);function g(e){const{initialValue:t,onChange:o,source:g="title",properties:v}=e,h=(0,r().VK)((()=>{var e;return null===(e=m().default.getState().currentSpaceStore)||void 0===e?void 0:e.id}),[]),_=(0,i().O7)(),b=(0,p().$)("formulaPrototypeHelpers.useMockTextStore",{isMockTextStore:!0,overrideDefaultRecordCache:!0}),y=function(e){const{initialValue:t,inMemoryRecordCache:o,source:r,properties:d,spaceId:p}=e,m=(0,i().O7)(),g=(0,n.useMemo)((()=>t),[]);return(0,n.useMemo)((()=>{const e=m.currentUser.id??u()._6,t={id:a().Il(),table:l().iU},{model:n}=s().yJh.create({createdBy:{id:e,table:c().KJ},id:t.id,parent:{id:u()._6,table:l().iU},properties:{[r]:g,...d},space_id:p??u()._6,type:"page"},{useCrdt:!1});o.setModelAndRole({pointer:n.pointer,userId:e},n,"editor");const i=new(f().ST)({environment:m,path:["properties",r],pointer:t,recordStoreOptions:{inMemoryRecordCache:o,userId:e}});return o.emitRecord(t,[]),i}),[d,m,o,g,r,p])}({initialValue:t,inMemoryRecordCache:b,source:g,spaceId:h,properties:v}),S=(0,n.useRef)(t),w=(0,n.useCallback)((e=>{const t=_.currentUser.id,o=y.getRecordStoreAtRootPath();if(o instanceof f().G){const n=o.getValue();n&&(b.setRecord({pointer:y.pointer,userId:t},{role:"editor",value:{...n,properties:{...null==n?void 0:n.properties,[g]:e}}}),b.emitRecord(y.pointer,[]))}}),[_.currentUser.id,y,b,g]);return(0,r().VK)((()=>{const e=y.getValue();d().Xy(S.current,e)||(S.current=e,null==o||o(e))}),[y,o]),{store:y,setValue:w}}const v=(()=>{try{return"true"===new URLSearchParams(window.location.search).get("disableFormulas")}catch(e){return!1}})()},614027:(e,t,o)=>{o.d(t,{MV:()=>d,_R:()=>u,uP:()=>s,vu:()=>a});o(670560),o(241792);var n=()=>o(730120),i=()=>o(513670),r=()=>o(15981);let a=function(e){return e.Default="Default",e.Link="Link",e.Favorite="Favorite",e.Search="Search",e}({});const s=3,l={BONUS:{DEFAULT:100,LINK:120,SEARCH:200,FAVORITE:140},BONUS_NORMALIZER:100,TIME_BUCKETS:[{days:4,weight:100},{days:14,weight:70},{days:31,weight:50},{days:90,weight:30}],DEFAULT_BUCKET_WEIGHT:10};function c(e){const{BONUS:t}=l;switch(e){case a.Default:return t.DEFAULT;case a.Link:return t.LINK;case a.Favorite:return t.FAVORITE;case a.Search:return t.SEARCH;default:(0,o(696459).t1)(e)}}function d(e){let{now:t,visitedAt:o}=e;const{TIME_BUCKETS:i,DEFAULT_BUCKET_WEIGHT:r}=l,a=n().ou.fromMillis(t).diff(n().ou.fromMillis(o),"days").get("days");return a<=i[0].days?i[0].weight:a<=i[1].days?i[1].weight:a<=i[2].days?i[2].weight:a<=i[3].days?i[3].weight:r}class u{constructor(e){var t=this;this.maxStoredVisits=void 0,this.visits=void 0,this.recordVisit=e=>{const{id:t,type:n,timestampForTestingOnly:a}=e,s=this.createVisit(n,a),l=this.visits.get(t);if(l.error)return;if((0,r().bi)()){const{currentSpaceStore:e}=o(876822).default.state,n=e&&e.id,i=e&&e.userId;n&&i&&((0,r().eJ)({spaceId:n,pageId:t,visitedAt:s.timestamp}),(0,o(214445).SP)({spaceId:n,userId:i,pageId:t,visitedAt:s.timestamp}))}const c=l.value||this.createVisitCacheEntry();var d,u,p;c.totalVisits+=1,c.recentVisits=(d=c.recentVisits,u=s,p=this.maxStoredVisits,[...(0,i().pm)(d,p-1),u]),this.visits.set(t,c)},this.getVisits=e=>{const t=this.visits.get(e);if(!t.error)return t.value},this.getVisitedIds=()=>{const e=this.visits.keys();return e.error?[]:e.value},this.getFrecencyScore=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();const n=t.getVisits(e);if(!n)return u.UNVISITED_FRECENCY_SCORE;const{totalVisits:r,recentVisits:a}=n;if(0===r||0===a.length)return u.UNVISITED_FRECENCY_SCORE;const s=a.map((e=>{const{type:t,timestamp:n}=e,i=c(t);return d({now:o,visitedAt:n})*(i/l.BONUS_NORMALIZER)})),p=(0,i().Sm)(s)/s.length;return Math.ceil(r*p)};const{maxBlocks:n,maxStoredVisits:a,store:s,version:p}=e;this.maxStoredVisits=a,this.visits=new(o(511839).Z)({prefix:e.prefix||"FrecencyStore",maxSize:n,store:s,version:p})}initialize(){this.visits.updateVersionAndGC()}sortFrecencyHighToLow(e){const{items:t,now:o,recordFrecency:n}=e;return(0,i().MR)(t,(e=>{const t="number"==typeof e.score?e.score:1,i=this.getFrecencyScore(e.id,o);n&&(e.frecencyScore=i);const r=e.personalizationBoost??1;return-1*t*Math.max(i,r)}))}createVisitCacheEntry(){return{totalVisits:0,recentVisits:[]}}createVisit(e,t){return{type:e,timestamp:"number"==typeof t?t:Date.now()}}clear(){const e=[];this.visits.scan((t=>e.push(t)));for(const t of e)this.visits.remove(t)}}u.UNVISITED_FRECENCY_SCORE=1},926410:(e,t,o)=>{o.d(t,{Us:()=>r,XR:()=>a});var n=()=>o(146947),i=()=>o(580708);Boolean("en-US"===n().locale);function r(e){const t="https://www.notion.so";return"en-US"!==n().locale?`${t}/${n().locale.toLocaleLowerCase()}${e}`:`${t}${e}`}function a(e,t){if(e.device.isElectron||e.device.isMobileNative)return!1;const o=(0,i().XU)(t,e.currentUser.isLoggedIn());return!!o&&"devOnly"!==o}},849668:(e,t,o)=>{o.d(t,{RT:()=>a,bk:()=>s,tt:()=>r});var n=()=>o(749826),i=()=>o(726046);function r(){return"on"===n().default.getEligibleGroup({experimentId:"generic_importer",defaultGroup:"control"})}function a(){return n().default.checkGate({gateName:"zip_importer_enabled"})}function s(e){const t=n().default.getEligibleGroup({experimentId:"special_case_generic_file_size",defaultGroup:i().CN.toString()});return Number(t)}},429725:(e,t,o)=>{o.d(t,{Hu:()=>y,Lr:()=>S,ZP:()=>w});var n=()=>o(135857),i=()=>o(728670),r=()=>o(285670),a=()=>o(161002),s=()=>o(572680),l=()=>o(916673),c=()=>o(205228),d=()=>o(663132),u=()=>o(772084),p=()=>o(726912),m=()=>o(876822),f=()=>o(749826),g=()=>o(482162),v=()=>o(989134),h=()=>o(239482),_=()=>o(148126);function b(e){let t,o,n;const{store:r}=e,a=(r.getSpaceId()&&r.getSpaceStore())??m().default.state.currentSpaceStore,s=(0,h().fJ)(r),l=(0,i().$t)(s),g=(0,_().Sr)(r.environment);return l&&(e.preferPublicLink||g)?((e.fullyQualified||e.preferPublicLink&&!g||u().fx(r))&&(o=d().Lr(r)),e.disableSlug||(n=function(e){const t=u().Mo(e);if((null==t?void 0:t.public_home_page)===e.id&&f().default.checkGate({gateName:"sites_use_homepage_url_without_slugs"}))return"/";return e.getSlug()}(r),n&&p().Z.setBlockIdForSlug(n,r.id))):(t=null==a?void 0:a.getEditDomain(),e.fullyQualified&&(o=c().default.domainBaseUrl)),{spaceDomain:t,baseUrl:o,slug:n}}function y(e){var t,o;const{store:i,collectionViewId:l,showMoveTo:c,saveParent:d,duplicate:u,pageVisitSource:p,queryId:f,embedded:_}=e;let y;if(l)y=l;else if(i&&i.isCollectionView()){const e=(0,v().Zs)({userId:i.environment.currentUser.id,viewBlockId:i.id});if(e)y=e;else{const e=i.getCollectionViewsStore().getValue();e&&(y=e[0])}}const{spaceDomain:S,baseUrl:w,slug:k}=b({fullyQualified:!0,...e});let I=i,C=e.scrollToBlockId;if(i.isReady()&&!i.isNavigableBlock()){const e=(0,h().Dg)(i);e&&(I=e,C=i.id)}const x=m().default.state.mainEditorCurrentBlockStore;let T,M,P;if(I.canRead()?x&&e.openInSidePeek?(T=x,M=I.id,P=(0,g().getUrlParamFromPeekMode)(r().R)):x&&e.openInCenterPeek?(T=x,M=I.id,P=(0,g().getUrlParamFromPeekMode)(r().l)):(T=I,M=e.peekViewBlockId,P=e.peekMode):(T=I,M=e.peekViewBlockId,P=e.peekMode),i.isPost()&&void 0===e.openInCenterPeek&&void 0===P){const e=(0,h().VP)(i);if(e)return(0,a().y)({teamId:e.id,peekInfo:{peekViewBlockId:i.id,peekMode:"c"},pageVisitSource:p,baseUrl:w})}const A=null===(t=e.demoSettingsStore)||void 0===t||null===(o=t.isActiveDemo)||void 0===o?void 0:o.call(t);return(0,n().Z)({pageId:T.id,pageModel:T.getModel(),pageVisitSource:p,queryId:f,scrollToBlockId:C,peekViewBlockId:M,peekMode:P,workflowViewType:e.workflowViewType,workflowViewKey:e.workflowViewKey,collectionViewId:y,discussionId:e.discussionId,spaceDomain:S,baseUrl:w,showMoveTo:c,saveParent:d,duplicate:u,templateGalleryItem:e.templateGalleryItem,projectManagementLaunch:e.projectManagementLaunch,demoWorkspaceMode:A,slug:k,embedded:void 0===_?(0,s().FK)(i.environment.RouterStore.state.route):_})}function S(e){let t;const o=m().default.state.mainEditorCurrentBlockStore,n=null==o?void 0:o.getRecordStore(o,e);if(n){const{baseUrl:e,spaceDomain:o}=b({store:n,fullyQualified:!0});e&&(t=(0,l().DB)(e,o||""))}return t}const w=y},687982:(e,t,o)=>{o.d(t,{Z:()=>r});var n=()=>o(513670),i=()=>o(949842);function r(e){return e?a:s}const a=Object.freeze({onMouseDown:e=>{(0,i().ZP)({event:e,context:i().Af.EditorMouseDown,callback:n().yR})},onClick:e=>{(0,i().ZP)({event:e,context:i().Af.EditorClick,callback:n().yR})},onDoubleClick:e=>{(0,i().ZP)({event:e,context:i().Af.EditorDoubleClick,callback:n().yR})},onContextMenu:e=>{(0,i().ZP)({event:e,context:i().Af.EditorContextMenu,callback:n().yR})}}),s=Object.freeze({onMouseDown:n().ZT,onClick:n().ZT,onDoubleClick:n().ZT,onContextMenu:n().ZT})},782202:(e,t,o)=>{o.d(t,{Z:()=>n});const n=function(){const e=document.documentElement;return new(o(35982).iL)(0,0,e.clientWidth,e.clientHeight)}},667009:(e,t,o)=>{o.d(t,{I:()=>u,v:()=>c});var n=()=>o(347960),i=()=>o(572680),r=()=>o(286310),a=()=>o(231077),s=()=>o(205228),l=()=>o(749826);async function c(e){const{environment:t,accessToken:o}=e;if(r().D6(t,{from:e.from}),t.device.isElectron){const t=await a().openGoogleDrivePickerPopup({url:(0,i().zN)(s().default.domainBaseUrl,{token:o,viewType:e.viewType})});if(!t)return;"integration"in e?e.callback(!1,t.url):e.callback(t.id)}else await(0,n().ZP)("https://apis.google.com/js/api.js"),"integration"in e?window.gapi.load("picker",(()=>d({environment:t,accessToken:o,callback:e.callback,integration:e.integration,viewType:e.viewType}))):window.gapi.load("picker",(()=>d({environment:t,accessToken:o,callback:e.callback,viewType:e.viewType})))}function d(e){const{environment:t,accessToken:o}=e,n=`${window.location.protocol}//${window.location.host}`;(new window.google.picker.PickerBuilder).enableFeature(window.google.picker.Feature.SUPPORT_DRIVES).setOAuthToken(o).hideTitleBar().addView(new window.google.picker.DocsView(e.viewType)).setOrigin(n).setCallback((o=>{if(o.action===window.google.picker.Action.PICKED&&o.docs&&o.docs.length>0){const n=o.docs[0];"integration"in e?e.callback(!1,n.url):e.callback(n.id),r().D6(t,{from:"link_preview_placeholder"})}})).build().setVisible(!0)}function u(){return l().default.checkGate({gateName:"google_doc_importer"})}},949842:(e,t,o)=>{o.d(t,{$0:()=>s,Af:()=>n,Jx:()=>a,Wi:()=>l,ZP:()=>c,sg:()=>r});let n=function(e){return e[e.ButtonMouseDown=0]="ButtonMouseDown",e[e.EditorMouseDown=1]="EditorMouseDown",e[e.EditorMouseUp=2]="EditorMouseUp",e[e.EditorClick=3]="EditorClick",e[e.MenuListClick=4]="MenuListClick",e[e.EditorContextMenu=5]="EditorContextMenu",e[e.EditorMouseOver=6]="EditorMouseOver",e[e.EditorHoverMouseMove=7]="EditorHoverMouseMove",e[e.EditorDropMouseMove=8]="EditorDropMouseMove",e[e.EditorDoubleClick=9]="EditorDoubleClick",e[e.SidebarMouseMove=10]="SidebarMouseMove",e[e.ManageTeamsRowClick=11]="ManageTeamsRowClick",e[e.MobileTap=12]="MobileTap",e[e.CollectionSettingsClick=13]="CollectionSettingsClick",e[e.BaseTableRowClick=14]="BaseTableRowClick",e[e.NotificationClick=15]="NotificationClick",e[e.CollectionAutomationSettingsClick=16]="CollectionAutomationSettingsClick",e[e.PageTitleClick=17]="PageTitleClick",e[e.AssistantGroupedEditClick=18]="AssistantGroupedEditClick",e[e.PermissionItemClick=19]="PermissionItemClick",e[e.ToggleTrustedDomainPermission=20]="ToggleTrustedDomainPermission",e[e.PerformanceToolbarMouseMove=21]="PerformanceToolbarMouseMove",e[e.CopyToClipboard=22]="CopyToClipboard",e[e.EditorEsc=23]="EditorEsc",e}({});const i={};function r(e){const t=i[e.context],o=e.event.nativeEvent||e.event;if((null==t?void 0:t.deref())!==o){var n;i[e.context]=new WeakRef(o);"unhandled"===(null===(n=e.callback)||void 0===n?void 0:n.call(e))&&(i[e.context]=t)}}async function a(e){const t=i[e.context],o=e.event.nativeEvent||e.event;if((null==t?void 0:t.deref())!==o){var n;i[e.context]=new WeakRef(o);"unhandled"===await(null===(n=e.callback)||void 0===n?void 0:n.call(e))&&(i[e.context]=t)}}function s(e){r({event:e,context:n.EditorMouseDown,callback:()=>{}})}function l(e){r({event:e,context:n.EditorClick,callback:()=>{}})}const c=r},181758:(e,t,o)=>{o.d(t,{C3:()=>P,x7:()=>M});o(821057),o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(30005),o(241792);var n=()=>o(947115),i=()=>o(799891),r=()=>o(431595),a=()=>o(956057),s=()=>o(741633),l=()=>o(513670),c=()=>o(792409),d=()=>o(839002),u=()=>o(696459),p=()=>o(540520),m=()=>o(824462),f=()=>o(308186),g=()=>o(749826),v=()=>o(921995),h=()=>o(443269),_=()=>o(709344),b=()=>o(527278),y=()=>o(278589),S=()=>o(935439),w=()=>o(794321),k=()=>o(10208);let I=0;const C=(0,o(788860).vU)({requestTooLarge:{id:"transactionHelpers.requestTooLargeError.message",defaultMessage:"Sorry, that request was too large."},requestTooLargeTryImportInstead:{id:"transactionHelpers.requestTooLargeError.message.tryImportInstead",defaultMessage:"Sorry, that request was too large. Try import instead?"}});let x=!1;(0,n().exposeDebugValue)("toggleTransactionQueue",(()=>{x=!x,console.info(x?"Transactions paused":"Transactions resumed")}));let T=0;(0,n().exposeDebugValue)("setTransactionQueueApiLatencyMs",(e=>{T=e,0===e?console.info("Disabling saveTransactions API latency simulation."):console.info(`Simulating saveTransactions API latency of ${e} ms.`)}));class M extends Error{constructor(e){super(e.message),this.retryDelay=void 0,this.retryReason=void 0,this.savedTasks=void 0,this.failedTasks=void 0,this.clientData=void 0,this.name="HandleSaveTransactionsError",this.retryDelay=e.retryDelay,this.retryReason=e.retryReason,this.savedTasks=e.savedTasks,this.failedTasks=e.failedTasks,this.clientData=e.clientData}}async function P(e){var t;if(x)return{value:[]};const{environment:o,tasks:n}=e,S=function(e,t){const o=new Set(t.map((e=>e.timestamp))),n=t.length-o.size;return n>0&&p().LA(e,{collision_count:n}),n}(o,n),{userId:P,tasks:D}=k().w(n),U=D.map((e=>({id:e.id,spaceId:e.spaceId,debug:e.debug,operations:e.operations,inSudoMode:e.useSudoMode}))),F=a().Il(),N=g().default.checkGate({gateName:"client_http_gzip"})?"gzip":void 0,V=null===(t=w().Z.provider)||void 0===t?void 0:t.onSaveTransactions(n,U);let L;if("currentSpace"===e.cellType?L=await m().callApi({eventName:"saveTransactionsFanout",environment:o,data:{requestId:F,transactions:U},userId:P,encoding:N,headers:{}}):"space"===e.cellType?L=await m().callApi({eventName:"saveTransactionsFanout",environment:o,data:{requestId:F,transactions:U},userId:P,encoding:N,headers:(0,s().Bb)({spaceId:e.spaceId})}):"main"===e.cellType?L=await m().callApi({eventName:"saveTransactionsMain",environment:o,data:{requestId:F,transactions:U},userId:P,encoding:N,headers:{}}):"legacy"===e.cellType?L=await m().saveTransactions(o,{requestId:F,transactions:U},P,void 0,void 0,void 0,N):(0,u().t1)(e.cellType),T>0&&(console.info(`saveTransactions returned; simulating ${T}ms extra latency.`),await(0,d().Vs)(T)),null==V||V(L),"success"===L.type)return I=0,{value:D};const O="Notion is unavailable, please try again later."===L.error.message;if(!O&&!L.error.data.offline||Math.random()<.01){const e=[...new Set(U.map((e=>e.spaceId??"NO_SPACE_ID")))];i().log({level:"error",from:"transactionActions",type:"ClientTransactionError",error:{miscErrorString:(0,c().LK)(L)},data:{requestId:F,miscDataToConvertToString:{transactions:U},userId:o.currentUser.id,spaceIds:e}})}if(413===L.status){let e,t;const n=D.length;D.forEach((o=>{var n,i;null!==(n=o.debug)&&void 0!==n&&n.userAction&&(e=o.debug.userAction),null!==(i=o.debug)&&void 0!==i&&i.userFlow&&(t=o.debug.userFlow)})),i().log({level:"error",from:"transactionActions",type:"ClientTransaction413Error",data:{totalTaskCount:n,userId:o.currentUser.id,requestId:F,userAction:e,userFlow:t}});const r=JSON.stringify(U);p().F4(o,{totalTaskCount:n,payloadLength:r.length,userAction:e});const a=Math.ceil(r.length/k()._V);for(let s=0;s<a;s++)i().log({level:"error",from:"transactionActions",type:"ClientTransaction413ErrorRecovery",data:{userId:o.currentUser.id,totalTaskCount:n,requestId:F,miscDataToConvertToString:{chunkTotal:a,chunkIndex:s,operationChunk:r.slice(s*k()._V,(s+1)*k()._V)}}});f().UW(b().Z.formatMessage(e===v().xF?C.requestTooLargeTryImportInstead:C.requestTooLarge))}const Z=e=>{const t=I;if(e.failedTasks.length>0&&(I+=1),!O&&!L.error.data.offline){var n,r,a;const s=e.failedTasks.length>0?e.failedTasks[0]:void 0;s&&"space_not_found_in_record_path"===(null===(n=e.clientData)||void 0===n?void 0:n.type)&&i().log({level:"error",from:"transactionActions",type:"ClientTransactionSpaceNotFoundError",error:(0,c().Ui)(e),data:{userId:o.currentUser.id,requestId:F,miscDataToConvertToString:(0,y().getDebugSourcesForIdsInOperations)(o,s.operations)}}),p().mc(o,{status:L.status,message:(0,_().p)(L),previous_consecutive_rollbacks:t,saved_tasks:e.savedTasks.length,failed_tasks:e.failedTasks.length,first_failed_task_user_action:null==s||null===(r=s.debug)||void 0===r?void 0:r.userAction,first_failed_task_debug_tags:null==s||null===(a=s.debug)||void 0===a?void 0:a.tags,will_retry:e.retryDelay>0,retry_reason:e.retryReason,timestamp_collision_count:S})}return{error:e}};if((0,r().Rp)(L.body)){if((0,r().oE)(L.body.clientData)){const{errors:e}=L.body.clientData,t=e[0],n=D.findIndex((e=>e.id===t.id));if(n<0)return R(o,F,t),Z(new M({message:t.name,clientData:t.clientData,retryDelay:0,retryReason:void 0,savedTasks:[],failedTasks:[]}));const i=D.slice(0,n),r=[],a=[],s=[];let l=n,c=0,d=0;for(const u of e){const e=D[l];u.id===e.id?(u.retryable?(a.push({error:u,task:e}),d+=1):(c+=1,await A(o,e,F),r.push(e),s.push({error:u,task:e})),l++):R(o,F,u)}const p=[`${i.length} successful`,c>0?`${c} failed unretryable (data loss)`:void 0,d>0?`${d} retryable`:void 0].filter(u().$K).join(", "),m=[`API error for ${D.length} transactions: ${p}.`,B(s,"unretryable"),B(a,"retryable"),L.body.debugMessage?`Debug message: "${L.body.debugMessage}"`:void 0].filter(u().$K).join(" ");let f,g=0;return a.length>0&&(g=2e3,f=a[0].error.name),Z(new M({savedTasks:i,failedTasks:r,message:m,retryDelay:g,retryReason:f,clientData:t.clientData}))}if(l().q9(E,L.status))return await Promise.all(D.map((e=>A(o,e,F)))),Z(new M({savedTasks:[],failedTasks:D,message:(0,h().wf)(b().Z.getIntl(),L),retryDelay:0,retryReason:void 0}))}let j=`http${L.status}`;return L.error.data.offline?j="offline":O&&(j="notionUnavailable"),Z(new M({savedTasks:[],failedTasks:[],message:(0,h().wf)(b().Z.getIntl(),L),retryDelay:5e3,retryReason:j}))}async function A(e,t,o){try{await(0,S().L)(e,t)}catch(n){i().log({level:"error",from:"transactionActions",type:"ClientTransactionCleanupError",error:(0,c().Ui)(n),data:{userId:e.currentUser.id,requestId:o}})}}function R(e,t,o){i().log({level:"error",from:"transactionActions",type:"ClientTransactionNotFoundError",error:(0,c().Ui)(o),data:{userId:e.currentUser.id,requestId:t}})}function B(e,t){if(e.length>0){var o;const{error:n,task:i}=e[0];return`First ${t} error: ${n.name} for transaction ${i.id} created by ${null===(o=i.debug)||void 0===o?void 0:o.userAction}.`}}const E=[400,413]},609489:(e,t,o)=>{o.d(t,{B:()=>l,x:()=>s});o(267602),o(916054);var n=()=>o(960562),i=()=>o(475335),r=()=>o(645805),a=()=>o(965903);let s=function(e){return e[e.Default=0]="Default",e[e.Hovered=1]="Hovered",e[e.Selected=2]="Selected",e[e.SelectedDescendant=3]="SelectedDescendant",e}({});function l(e,t){var o;const l=a().default.state.stores,c=r().default.state;if(1===l.length&&l.includes(e))return s.Selected;if(l.length>0&&l.every((t=>e.uiContains(t))))return s.SelectedDescendant;const d=n().default.state;return d&&d.isDragging&&d.currentParentStore&&e.uiContains(d.currentParentStore)||d&&d.isDragging&&d.currentDropZone&&d.currentDropZone.type===n().D.Selectable&&null!==(o=d.currentDropZone)&&void 0!==o&&o.store&&e.uiContains(d.currentDropZone.store)||c.isOpen&&c.currentStore===e||t&&!i().default.state.isKeyboardMode?s.Hovered:s.Default}},487270:(e,t,o)=>{o.d(t,{$x:()=>p,Ii:()=>u,TS:()=>d,l5:()=>m});var n=()=>o(504008),i=()=>o(956057),r=()=>o(827370),a=()=>o(24945),s=()=>o(491927),l=()=>o(178180),c=()=>o(260169);function d(e){const{environment:t,table:o,spaceId:r}=e;return n().Z.withListenerIgnored((()=>{if(!(0,a().LV)(o))return t.idCreator.idInMain(o);if(!r)return s().dw(t,{has_short_id:!1,has_spaceid:!1}),i().Il();const e=l().Z.getState();if(e&&r in e){const n=e[r];return s().dw(t,{has_short_id:!0,has_spaceid:!0,debug_msg:"localStorage"}),t.idCreator.idWithSpaceShortId(Number(n),o)}const n=(0,c().aV)({defaultRecordCache:t.defaultRecordCache,userId:t.currentUser.id,spaceId:r});return n&&n.short_id_str?(s().dw(t,{has_short_id:!0,has_spaceid:!0}),t.idCreator.idWithSpaceShortId(Number(n.short_id_str),o)):(s().dw(t,{has_short_id:!1,has_spaceid:!0}),i().Il())}))}function u(e){const{environment:t,table:o,spaceId:n}=e;return r().dr.fromPointerLike({table:o,id:d({table:o,spaceId:n,environment:t}),spaceId:n})}function p(e){const{environment:t,table:o,spaceId:n}=e;return{table:o,id:d({table:o,spaceId:n,environment:t}),spaceId:n}}function m(e){const{environment:t,spaceId:o}=e;if(void 0===o)return;const n=(0,c().aV)({defaultRecordCache:t.defaultRecordCache,userId:t.currentUser.id,spaceId:o});return n&&n.short_id_str?Number(n.short_id_str):void 0}},733193:(e,t,o)=>{o.d(t,{G7:()=>a,Gh:()=>l,LR:()=>r,gU:()=>s,jo:()=>i});var n=()=>o(696459);const i="fileTypeAnyFiles",r="fileTypeImages",a="fileTypeVideos",s="fileTypeNone";function l(e){let{fileMimeType:t,allowedType:o}=e;switch(o){case i:return!0;case r:return function(e){return e.startsWith("image")&&!e.includes("photoshop")}(t);case a:return function(e){return e.startsWith("video")}(t);case s:return!1;default:(0,n().t1)(o)}}},472719:(e,t,o)=>{o.d(t,{Cz:()=>p,Gq:()=>u,az:()=>m,eT:()=>l,hi:()=>c,jl:()=>f,z_:()=>d});var n=()=>o(824462),i=()=>o(199114),r=()=>o(862059),a=()=>o(698850),s=()=>o(667009);async function l(e){const t=await n().callApi({eventName:"getTrelloAccount",environment:e,data:{}});return"success"===t.type?t.data:(console.error(t.error),{})}async function c(){return Promise.resolve({areAccountsFetched:r().default.state.areAccountsFetched,accountsResponse:r().default.state.accountsResponse,isGoogleDocImporterEnabled:(0,s().I)(),selectedFileId:r().default.state.selectedFileId})}async function d(e){i().default.setState({...i().default.state,isFetchingAsanaAccount:!0});const t=await n().callApi({eventName:"getAsanaAccount",environment:e,data:{}});if("success"===t.type){const{account:e}=t.data;return i().default.setState({...i().default.state,account:e,isFetchingAsanaAccount:!1}),e?t.data:{}}return console.error(t.error),i().default.setState({...i().default.state,isFetchingAsanaAccount:!1}),{}}async function u(e){try{const t=await n().callApi({eventName:"getEvernoteAccount",environment:e,data:{}});if("success"===t.type){const{userInfo:e}=t.data;return{userInfo:e}}return console.error(t.error),{userInfo:void 0}}catch(t){return console.error(t),{userInfo:void 0}}}async function p(e,t){const o=await n().callApi({eventName:"getConfluenceAccount",environment:e,data:{spaceId:t}});return"success"===o.type?o.data:(console.error(o.error),{})}async function m(e,t){a().default.setState({...a().default.state,isFetchingMondayAccount:!0});const o=await n().callApi({eventName:"getMondayUser",environment:e,data:{spaceId:t}});var i,r;return"success"===o.type?null!==(i=o.data.user)&&void 0!==i&&i.email?(a().default.setState({...a().default.state,isFetchingMondayAccount:!1,account:null===(r=o.data.user)||void 0===r?void 0:r.email}),o.data):{user:void 0}:(a().default.setState({...a().default.state,isFetchingMondayAccount:!1}),console.error(o.error),{user:void 0})}async function f(e,t){const o=await n().callApi({eventName:"getJiraAccount",environment:e,data:{spaceId:t}});return"success"===o.type?o.data:(console.error(o.error),{})}},12512:(e,t,o)=>{o.d(t,{B3:()=>y,En:()=>x,jd:()=>I,tn:()=>k,ub:()=>S,uk:()=>C,yy:()=>T});o(670560),o(267602),o(653476),o(470928),o(749411),o(30005),o(241792);var n=()=>o(156642),i=()=>o(892981),r=()=>o(659278),a=()=>o(305580),s=()=>o(955620),l=()=>o(572948),c=()=>o(513670),d=()=>o(696459),u=()=>o(887430),p=()=>o(70191),m=()=>o(881688),f=()=>o(876822),g=()=>o(890324),v=()=>o(128076),h=()=>o(449705),_=()=>o(277533),b=()=>o(852465);const y={none:{type:"none"},block_match:{type:"block_match"}};function S(e){const{find:t,textValue:o,intl:n}=e,i=function(e){const{textValue:t,substring:o}=e;let n=0,i=0;const a=[];if(!t)return a;const l=(0,r().p4)(o.toLowerCase()),d=(0,s().O1u)(t);return(0,s().lzi)(d).forEach((e=>{i=n+(0,s().J1x)(e);if(!((0,s().QJH)(e)||(0,s().AJd)(e)))return void(n=i);const t=(0,s().WiV)(e).toString(),o=function(e){const{subsetArray:t,fullArray:o,offset:n=0}=e,i=[];for(let r=0;r<o.length&&!(t.length+r>o.length);r++){c().Xy(c().tP(o,r,r+t.length),t)&&i.push({startIndex:r+n,endIndex:r+t.length+n})}return i}({fullArray:(0,r().p4)(t.toLowerCase()),subsetArray:l,offset:n});a.push(...o),n=i})),a}({textValue:o,substring:t}).map((e=>({selection:e,allowReplace:!0}))),a=function(e){const{textValue:t,find:o,intl:n}=e,i=(0,s().P0m)(t),r=f().default.state.currentUserStore;if(0===i.length||!r)return[];const a=i.map((e=>{let t,{pointer:i,selection:a}=e;if("notion_user"===i.table)t=_().U.createChildStore(r,i);else{if("bot"!==i.table)return void i.table;t=h().Q.createChildStore(r,i)}if(t.getDisplayName(n).toLowerCase().includes(o.toLowerCase()))return a}));return c().oA(a)}({textValue:o,intl:n,find:t}).map((e=>({selection:e,allowReplace:!1}))),u=(0,s().Un8)({textValue:o,find:t,intl:n}).map((e=>({selection:e,allowReplace:!1}))),p=function(e){const{find:t,textValue:o}=e,n=(0,s().HC)(o),i=f().default.state.currentSpaceStore;if(!i)return[];const r=n.map((e=>{let{pointer:o,selection:n}=e;const r=v().G.createChildStore(i,o);if((0,s().QaF)(r.getTitleValue()).substring(0,l().l0).toLowerCase().includes(t.toLowerCase()))return n}));return c().oA(r)}({textValue:o,find:t}).map((e=>({selection:e,allowReplace:!1}))),m=function(e){const{find:t,textValue:o}=e,n=(0,s().Xyp)(o);if(!f().default.state.currentSpaceStore||0===n.length||0===t.length)return[];const i=n.map((e=>{let{metadata:o,selection:n}=e;const i=Object.values(o).filter(d().$K);if(Boolean(i.find((e=>e.toLowerCase().includes(t.toLowerCase())))))return n}));return c().oA(i)}({textValue:o,find:t}).map((e=>({selection:e,allowReplace:!1})));return[...i,...a,...p,...u,...m].sort(((e,t)=>e.selection.startIndex-t.selection.startIndex))}function w(e){const{block:t,find:o,intl:n}=e;if("table_row"!==t.getType())return[];const i=t.getParentBlockStore(),r=[],a=t.getProperties(),s=i?(0,m().h4)(i):Object.keys(a);return null==s||s.forEach((e=>{const i=a[e];if(!i)return;const s=S({find:o,intl:n,textValue:i}).map((o=>({allowReplace:o.allowReplace,selection:o.selection,blockStore:t,type:"simple_table_cell",propertyId:e})));s.length>0&&r.push(...s)})),r}function k(e){const{find:t,childBlocks:o,intl:r}=e;if(!o||0===t.length)return[];const a=[];for(const l of o){const e=l.getType(),o=l.getFormat();if(!e)continue;const m=(0,n().XD)(e,o)||(0,n().W2)(e);if(!(m||"table_row"===e||"collection_view"===e))continue;const f=l.getProperties(),{title:g,caption:v,description:h}=f;if("table_row"===e){const e=c().oA(w({block:l,find:t,intl:r}));e&&a.push(...e)}else if(m){const e={title:g,caption:v,description:h};(0,d().qP)(e).forEach((e=>{let[o,n]=e;if(!n)return;const i={type:"block",blockId:l.id,propertyType:o,blockStore:l},s=S({textValue:n,find:t,intl:r}).map((e=>({...e,...i,allowReplace:!l.isNavigableBlock()&&e.allowReplace})));a.push(...s)}))}else if("collection_view"===e){var s;const e=(0,u().fm)(l);if(!e)continue;const o=e.collectionViewStore();if(!o)continue;const n=o.getType();if(!n)continue;const d=o.getFormat(),m=e.normalizedSchemaStore.state,g=Object.keys(m).filter((e=>{var t,o;return"text"===(null===(t=m[e])||void 0===t?void 0:t.type)||"title"===(null===(o=m[e])||void 0===o?void 0:o.type)})),v=c().jj((0,i().ps)(d,n,m));if(!v)continue;const h=v.filter((e=>g.includes(e))),_={};((null===(s=o.getCollectionStore())||void 0===s?void 0:s.getFormat().property_visibility)??[]).forEach((e=>{const t=e.property;if(!h.includes(t))return;const o="show"===e.visibility||"hide_if_empty"===e.visibility&&Boolean(null==f?void 0:f[t]);_[t]=o}));e.groupsStore.state.forEach((e=>{const n=e.resultsStore.state.flatMap((e=>{var n;const i=e.getPropertiesStore().getValue();if(!i)return[];const a=null==e||null===(n=e.getAssociatedCollectionStore())||void 0===n?void 0:n.getLayoutStore();return h.flatMap((n=>{const s=i[n];if(!s)return[];const c=S({textValue:s,intl:r,find:t}),{isPropertyInPageDetails:d,isPropertyInGroup:u}=a?(0,p().Uo)({layoutStore:a,propertyId:n}):{isPropertyInPageDetails:!1,isPropertyInGroup:!1};return c.map((t=>({propertyId:n,selection:t.selection,allowReplace:!1,type:"page_property_value",inlineCollectionId:l.id,inlineCollectionViewId:o.id,blockStore:e,visible:Boolean(_[n]),isMatchInLayoutPageDetails:d,isPropertyInGroup:u})))}))}));a.push(...c().jj(n))}))}}return a}function I(e){var t;const{find:o,pageStore:n,intl:i}=e,r=n.getAssociatedCollectionStore();if(0===o.length||!r)return[];const s=n.getProperties(),l=(null===(t=n.getAssociatedCollectionStore())||void 0===t?void 0:t.getFormat().property_visibility)??[],c=n.getSchema(),d=(0,a().n)({schema:c,propertyFormats:l,titleProperty:"disallow"}),u={};l.forEach((e=>{const t=e.property,o="show"===e.visibility||"hide_if_empty"===e.visibility&&Boolean(null==s?void 0:s[t]);u[t]=o}));const m=[],f=null==r?void 0:r.getLayoutStore();return d.forEach(((e,t)=>{var r,a;let{property:l}=e;const d=null===(r=c[l])||void 0===r?void 0:r.name.toLowerCase(),g=null==d?void 0:d.includes(o.toLowerCase()),{isPropertyInPageDetails:v,isPropertyInGroup:h}=f?(0,p().Uo)({layoutStore:f,propertyId:l}):{isPropertyInPageDetails:!1,isPropertyInGroup:!1};g&&m.push({type:"page_property_name",allowReplace:!1,propertyId:l,visible:u[l]??!0,isMatchInLayoutPageDetails:v,isPropertyInGroup:h});const _="text"===(null===(a=c[l])||void 0===a?void 0:a.type)?null==s?void 0:s[l]:void 0;if(!_)return;const b=S({textValue:_,find:o,intl:i}),y=n.getAssociatedCollectionId();y&&b.forEach((e=>{m.push({type:"page_property_value",inlineCollectionId:y,selection:e.selection,visible:u[l]??!0,propertyId:l,blockStore:n,allowReplace:!1,isMatchInLayoutPageDetails:v,isPropertyInGroup:h})}))})),m}function C(e){const{match:t,pageStore:o,environment:n}=e;if(!t.allowReplace||!o)return!1;const{blockStore:i}=t,r=i.canEdit(),a=o.isLocked(),s=g().Z.getMode(n,o),l=!s.hasPublicPermission||s.hasPublicPermission&&"edit"===s.permission;return!(!r||a||!l)}function x(e){const{pageStore:t,find:o,intl:n}=e,i=[],r=[];if(0===o.length)return[];const a=(0,b().al)(t,{recursivelyLoadAllDiscussions:!0});return(0,b().bB)(a).unresolved.forEach((e=>{i.push(...e.getCommentStores())})),i.forEach((e=>{const t=e.getText(),i=e.getParentBlockStore(),a=e.getParentId();if(!t||!i||!a)return;S({find:o,textValue:t,intl:n}).forEach((t=>r.push({type:"comment",selection:t.selection,commentId:e.id,allowReplace:!1,blockStore:i,discussionId:a})))})),r}function T(e){return!!e&&("block"===e.type||"comment"===e.type||"simple_table_cell"===e.type||"page_property_value"===e.type)}},901447:(e,t,o)=>{function n(e,t){const{device:o}=e;o.isAndroid&&t.focus(),t.select()}o.d(t,{O:()=>n})},379936:(e,t,o)=>{o.d(t,{K$:()=>u,e2:()=>d,s0:()=>c});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(241792);var n=()=>o(163262),i=()=>o(85073),r=()=>o(921787),a=()=>o(696459),s=()=>o(876822),l=()=>o(640007);function c(e){const{currentUserRootStore:t}=s().default.state;if(!t||!e)return!1;const o=(0,l().Kv)(t,{id:e,table:i().K2}).getKeyStore("capabilities").getValue();return(0,n().ms)(o)}function d(e){const t={},o={};for(const n of e){const e=n.getIntegrationId();if(n.isInternalBot()||!e)continue;(0,r().EY)(e)?(t[e]??=[],t[e].push(n.id)):(o[e]??=[],o[e].push(n.id))}return{compliance:t,nonCompliance:o}}function u(e){return new Set(e.filter((e=>e.isDefined()&&!e.isInternalBot())).map((e=>e.getIntegrationId())).filter(a().$K))}},59407:(e,t,o)=>{o.d(t,{Z:()=>r});o(267602),o(228244);var n=o.n(o(427537)),i=()=>o(513670);const r=function e(t,o,r){if(Array.isArray(r))return r.some((n=>e(t,o,n)));{const e=r.toLowerCase().split("+");if(t.device.isWindows||t.device.isLinux){if((i().q9(e,"command")||i().q9(e,"ctrl"))!==o.ctrlKey)return!1}else{if(i().q9(e,"command")!==o.metaKey)return!1;if(i().q9(e,"ctrl")!==o.ctrlKey)return!1}return i().q9(e,"shift")===o.shiftKey&&(i().q9(e,"alt")===o.altKey&&i().yW(e,(e=>{if("command"===e||"shift"===e||"ctrl"===e||"alt"===e)return!0;const t="code:";if(e.startsWith(t)&&o.code){const t=e.substr(5);return o.code.toLowerCase()===t}return n()(o.keyCode)===e})))}}},344056:(e,t,o)=>{o.d(t,{Z:()=>n});const n=function(e){const{spaceViewStore:t,pageId:o}=e;return!(!t||!o)&&-1!==t.getBookmarkedPageIds().indexOf(o)}},590162:(e,t,o)=>{o.d(t,{y:()=>i});const n={shift:!1,option:!1,control:!1,command:!1};function i(){return n}function r(e){n.shift=Boolean(e.shiftKey),n.option=Boolean(e.altKey),n.control=Boolean(e.ctrlKey),n.command=Boolean(e.metaKey)}window.addEventListener("keydown",r),window.addEventListener("keyup",r),window.addEventListener("mousemove",r),window.addEventListener("focus",(function(e){n.shift=!1,n.option=!1,n.control=!1,n.command=!1}))},363165:(e,t,o)=>{o.d(t,{Nt:()=>a,mB:()=>s});o(241792);var n=()=>o(244222),i=()=>o(5234),r=()=>o(696459);function a(e){const{environment:t,forTooltip:o}=e;let n;n=o?t.device.isMac?"command":"control":t.device.isMac?"âŒ˜":"ctrl";let i,r="shift";o||(r="â‡§"),i=o?t.device.isMac?"option":"alt":t.device.isMac?"âŒ¥":"alt";let a="control";return o||(a="âŒƒ"),{command:n,enter:"â†µ",delete:"del",backspace:"del",esc:"escape",left:"â†",right:"â†’",up:"â†‘",down:"â†“",tab:"â‡¥",alt:i,shift:r,ctrl:a}}function s(e){const{name:t,environment:o,onlyShowFirst:s,forTooltip:l}=e,c=function(e,t){let o=(0,n().b)(t.device,e);return Array.isArray(o)||(o=[o]),o.map((e=>e.split("+")))}(t,o),d=a({environment:o,forTooltip:l});return c.map((e=>e.map((e=>function(e){const{shortcut:t,shortcutItemMap:o}=e;let n=t;return(0,r().qg)(o,t)&&(n=o[t]),(0,i().Z)(n)}({shortcutItemMap:d,shortcut:e}))).join("+"))).slice(0,s?1:void 0).join(" or ")}},123927:(e,t,o)=>{o.d(t,{aX:()=>a,hC:()=>d,hF:()=>c});var n=()=>o(504008),i=()=>o(205228),r=()=>o(749826);function a(){return void 0===s&&n().Z.withListenerIgnored((()=>{s=i().default.isAdminMode||"on"===r().default.getEligibleGroup({experimentId:"highlight_legacy_transclusions",defaultGroup:"control"})})),s}let s,l;function c(){return void 0===l&&n().Z.withListenerIgnored((()=>{l=i().default.isAdminMode||r().default.checkGate({gateName:"highlight_quasi_alive_blocks_enabled"})})),l}function d(){return r().default.checkGate({gateName:"fix_legacy_transclusions_on_duplicate"})}},493954:(e,t,o)=>{o.d(t,{FV:()=>m,Fs:()=>h,Ts:()=>_,Z8:()=>u,ZG:()=>v,cX:()=>f,dY:()=>y,hy:()=>g,ny:()=>d,uP:()=>b});var n=()=>o(572680),i=()=>o(955620),r=()=>o(696459),a=()=>o(916673),s=()=>o(205228),l=()=>o(189288),c=()=>o(385185);function d(){const e=c().Z.state,t=l().Z.state;return e.open?e:t.open?t:void 0}function u(e){switch(e.type){case"text":return!!e.editingToken;case"image":return!!e.imageHyperlink;default:(0,r().t1)(e)}}function p(e,t){const o=d();if(o&&o.focusLinkInput!==e)switch(o.type){case"text":c().Z.setState({...o,focusLinkInput:e,url:t?"":o.url});break;case"image":l().Z.setState({...o,focusLinkInput:e,url:t?"":o.url});break;default:(0,r().t1)(o)}}function m(){p(!0);const e=d();e&&"text"===e.type&&v(!1)}function f(){p(!1)}function g(){p(!1,!0)}function v(e){const t=c().Z.state;t.open&&t.focusTitleInput!==e&&c().Z.setState({...t,focusTitleInput:e})}function h(e){if("image"===e.type)return e.imageHyperlink;const t="text"===e.type?e.editingToken:void 0;if(!t)return;const o=i().hDy(t),n=i().rlz(o);return n?i().zW$(n):void 0}function _(e){if(!e)return;const t=i().hDy(e);return i().rlz(t)?i().WiV(e):void 0}function b(e){return e.url||""}function y(e){const t=i().rOz(e);if(t&&"url"===t.type){const e=(0,n().parseRoute)({url:t.href,baseUrl:s().default.domainBaseUrl,publicDomainName:s().default.publicDomainName,isMobile:!1,protocol:void 0,currentUrl:void 0});return(0,n().iJ)(e)?{type:"notion",url:t.href,notionPage:e}:{type:"web",url:t.href}}const o=(0,a().yn)(e);if(o)return{type:"other",url:o}}},111599:(e,t,o)=>{o.d(t,{HI:()=>T,RC:()=>x,e$:()=>R,e9:()=>B,fV:()=>A});o(821057),o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(30005),o(241792);var n=()=>o(619995),i=()=>o(799891),r=()=>o(725466),a=()=>o(35980),s=()=>o(994883),l=()=>o(217465),c=()=>o(396136),d=()=>o(81954),u=()=>o(696459),p=()=>o(824462),m=()=>o(205228),f=()=>o(594546),g=()=>o(781105),v=()=>o(391995),h=()=>o(977481),_=()=>o(263168),b=()=>o(991007),y=()=>o(747055),S=()=>o(749826),w=()=>o(512258),k=()=>o(111599),I=()=>o(239482),C=()=>o(802870);async function x(e){const{environment:t,request:o,headers:n}=e;return p().callApi({eventName:"loadPageChunkV2ForOfflineSync",environment:t,data:o,headers:n})}async function T(e){const{environment:t,request:o,abortSignal:n,prefetchCacheKey:i,headers:r}=e;return(0,w().updateLoadCachedPageChunkCalledAt)(),h().isConnected()||h().isConnecting()?M(t)?p().callApi({eventName:"loadCachedPageChunkV2",environment:t,data:o,abortSignal:n,prefetchCacheKey:i,headers:r}):p().callApi({eventName:"loadCachedPageChunk",environment:t,data:o,abortSignal:n,prefetchCacheKey:i,headers:r}):M(t)?p().callApi({eventName:"loadPageChunkV2",environment:t,data:P(o),abortSignal:n,prefetchCacheKey:i,headers:r}):p().callApi({eventName:"loadPageChunk",environment:t,data:P(o),abortSignal:n,prefetchCacheKey:i,headers:r})}function M(e){const t=a().Z.get({userId:e.currentUser.id,key:(0,C().O)("prefetchLoadCachedPageChunk")}),o=S().default.checkGate({gateName:"load_cached_page_chunk_multi_cell_enabled"});return t!==o&&a().Z.set({userId:e.currentUser.id,key:(0,C().O)("prefetchLoadCachedPageChunk"),value:o}),t}function P(e){return{...e,page:{id:e.page.id,spaceId:(0,d().J)(void 0)}}}async function A(e){const{mode:t,environment:o,request:a,isFirstChunk:d,abortSignal:u}=e;"inMemoryAndDiskCacheWithInexactPreload"===t&&await k().e$(o,{id:a.page.id,table:c().iU});const p=l().RecordMapWithRole.create(),h=[];let _=!1;const S=new Set,w=await r().z({...a,cursor:a.cursor||{stack:[]},baseUrl:m().default.domainBaseUrl,publicDomainName:m().default.publicDomainName},s().s.fromMonomorphicFunctionUnsafe((async e=>{const i=await g().Ye({environment:o,pointer:e,abortSignal:u,useInMemoryCacheOnly:"inMemoryOnly"===t});if(null!=u&&u.aborted)throw new Error("Abort signal received");if(i)return p.setModelAndRole(e,i.model,i.role),i.model;if("inMemoryOnly"===t)throw new Error(`Record not found: ${e.table},${e.id}`);if((0,n().t)(e)&&!S.has(e.id)&&d){if(void 0===y().Z.state.offlinePages)return h.push(e),void(_=!0);if(void 0===y().Z.state.offlinePages||!b()._(a.page.id))throw new Error(`Record not found: ${e.table},${e.id}`);h.push(e)}})),((e,t,o,n)=>{v().A.enableLogging&&console.log(`Spidering from ${e.table}:${e.id} to ${t.table}:${t.id} (${o})`),null!=n&&n.suppressErrorOnClient&&S.add(t.id)}));if(_&&(await y().Z.waitUntil((()=>void 0!==y().Z.state.offlinePages)),!b()._(a.page.id))){const[e]=h;throw new Error(`Record not found: ${e.table},${e.id}`)}if(h.length>0&&(0,f().Vi)({eventName:"offline_page_was_missing_records_in_cache",sampling:{behavior:"statsig",fallbackBehavior:"statsig",statsigNotAvailableBehavior:"drop"}}).then((e=>{(0,f().j)({environment:o,event:{eventName:"offline_page_was_missing_records_in_cache",eventProperties:{}},opts:{sampling:{behavior:"decided",sampleDecision:e}}}),e&&i().log({level:"error",from:"loadingHelpers",type:"offlinePageWasMissingRecordsInCache",data:{pageId:a.page.id,missingRecords:h}})})),null!=u&&u.aborted)throw new Error("Abort signal received");return{recordMap:p.toJson(),cursor:w.cursorValue}}async function R(e,t){const o=e.currentUser.id;if(!o||!e.defaultRecordCache.persistedRecordCache)return Promise.resolve(void 0);(await e.defaultRecordCache.persistedRecordCache.getPageBlocksByParent({page:t,userId:o})).forEach((t=>{e.defaultRecordCache.inMemoryRecordCache.setRecord({pointer:t.pointer,userId:t.userId},t.value),e.defaultRecordCache.inMemoryRecordCache.emitRecord(t.pointer,[]),_().unsubscribeAfterDelay({environment:e,pointer:t.pointer,userId:t.userId})}))}function B(e){if(!S().default.checkGate({gateName:"load_page_chunk_omit_existing_record_versions"}))return;const t=l().RecordMapLegacy.create();let o=0;const n=()=>o>=50,i=e=>{"space"!==(null==e?void 0:e.table)&&(n()||e&&void 0===t.get(e.pointer)&&(t.set(e.pointer,e.getVersion()),o++))};if(e.isReady())for(const a of(0,I().fJ)(e))i(a);if(e.userId){const t=e.environment.defaultRecordCache.inMemoryRecordCache.data.getUserRecordMap(e.userId);i(t.getModel({table:"notion_user",id:e.userId}));let o=0;for(const e of t.getPointersByTable("notion_user")){if(n()||o>=10)break;o++,i(t.getModel(e))}}const r=Array.from(t).map((e=>{let{pointer:t,value:o}=e;if(void 0!==o)return{pointer:t,version:o}})).filter(u().$K);return r.length?r:void 0}},478824:(e,t,o)=>{o.d(t,{y:()=>i});function n(e){return e.teamId?`${e.collectionViewId}-${e.teamId}`:e.collectionViewId}const i=new class{constructor(){this.cache=new Map,this._locallyMutatedTasksDatabase=!1}get locallyMutatedTasksDatabase(){return this._locallyMutatedTasksDatabase}set locallyMutatedTasksDatabase(e){this._locallyMutatedTasksDatabase=e}get(e){const t=n(e);return this.cache.get(t)}set(e,t){const o=n(e);for(this.cache.delete(o),this.cache.set(o,t);this.cache.size>25;){const e=this.cache.keys().next().value;e&&this.cache.delete(e)}}}},43721:(e,t,o)=>{o.d(t,{U:()=>l,v:()=>c});var n=()=>o(876822),i=()=>o(63317),r=()=>o(485014),a=()=>o(146109),s=()=>o(768905);function l(e){var t;const{environment:o,overrideSpaceStore:l,overrideSpaceViewStore:d,overrideLocalSearchableBlocksCache:u}=e,p=l??n().default.state.currentSpaceStore,m=d??n().default.state.currentSpaceViewStore,f=Boolean(p),g=Boolean(m),v=o.currentUser.id,h=null==p?void 0:p.id,_=u??r().Z.state.localSearchableBlocksCache,b=h&&v?s().default.getUserSignals({spaceId:h,userId:v}):void 0,{userSignalsLoaded:y,userSignalsStats:S}={userSignalsLoaded:Boolean(b),userSignalsStats:b?{recentPages:null==b?void 0:b.recentPages.length,similarUserRecentPages:Object.keys(null==b?void 0:b.similarUserRecentPages).length,topPages7dPageView:null==b?void 0:b.topPages7dPageView.length,editedPages:null==b?void 0:b.editedPages.length,similarUsersEditedPages:null==b?void 0:b.similarUsersEditedPages.length}:void 0},w=h?i().Z.get(h):void 0,k=Boolean(w),I=(null==w?void 0:w.length)||0,C=h&&v?null===(t=a().Z.getStore({spaceId:h,userId:v}))||void 0===t?void 0:t.getState():void 0,x=Boolean(null==C?void 0:C.pages),T=Object.keys((null==C?void 0:C.pages)??{}).length,M=Boolean(null==C?void 0:C.config.isBackfilledFromRecentPageVisits),P=null==C?void 0:C.config.backfillTime;return{currentSpaceLoaded:f,currentSpaceViewLoaded:g,globalRecentPagesLoaded:k,globalRecentPagesSize:I,...c(_),userSignalsLoaded:y,userSignalsStats:S,searchFrecencyLoaded:x,searchFrecencySize:T,searchFrecencyBackfilled:Boolean(M),searchFrecencyBackfillTime:P,userId:v,spaceId:h}}function c(e){var t;return{localSearchableBlocksCacheLoaded:Boolean(e),localSearchableBlocksCacheSize:(null==e||null===(t=e.blocks)||void 0===t?void 0:t.documentCount)||0,localSearchableBlocksCacheBlockSourceCount:(null==e?void 0:e.blockSourceCount)||void 0}}},37428:(e,t,o)=>{o.d(t,{Bb:()=>g,CN:()=>f,GO:()=>h,ci:()=>v});o(267602),o(653476),o(241792),o(667294);var n=()=>o(306164),i=()=>o(788860),r=()=>o(513670),a=()=>o(696459),s=()=>o(308186),l=()=>o(897373),c=()=>o(876822),d=()=>o(436614),u=()=>o(826955),p=()=>o(555813),m=o(785893);function f(e){let{data:t,sortColumn:o,sortAscending:i}=e;const s=[i?"asc":"desc"],l=[i?"desc":"asc"];switch(o){case d().BR:return r().Xo(t,(e=>e.name),l);case d().KP:return r().Xo(t,(e=>n().bx.indexOf(e.accessLevel)),s);case d().Aw:return r().Xo(t,(e=>e.lastUpdated),s);default:(0,a().t1)(o)}}async function g(e){let{newSettingValue:t,environment:o,workspaceSecuritySettings:n,spaceStore:r}=e;const a="allowTeamCreation"===t?(0,m.jsx)(i()._H,{id:"manageTeamsHelpers.confirmChangeSecuritySetting.allowTeamCreation",defaultMessage:"Allow all members of this workspace to create teamspaces?"}):(0,m.jsx)(i()._H,{id:"manageTeamsHelpers.confirmChangeSecuritySetting.workspaceOwners.disableTeamCreation",defaultMessage:"Limit teamspace creation to only workspace owners?"}),{accept:c}=await s().gt({message:a});return!!c&&(l().n(o,{securitySettingsState:{...n,disableTeamCreation:"disableTeamCreation"===t},spaceStore:r}),!0)}async function v(e){let{addedTeams:t,removedTeams:o,environment:n,spaceStore:i}=e;if(!i.isDefined())return!1;return await p().lH({addedStores:t.map((e=>{let{store:t}=e;return t})),removedStores:o.map((e=>{let{store:t}=e;return t})),environment:n,spaceStore:i,createNewTeamFlowId:void 0,from:"workspace_settings"})}function h(e){let{environment:t,teamIds:o,spaceStore:i}=e;const{currentSpaceStore:r,currentUserStore:s}=c().default.state,l=r||i;return l&&s?o.map((e=>{const o=u().zX.createChildStore(l,{table:n().e0,id:e,spaceId:l.id});if(o.canRead())return o;const i=r&&p().Dv({environment:t,teamId:o.id,spaceStore:r,from:"manage_teams_table"});return null!=i&&i.canRead()?i:void 0})).filter(a().$K):[]}},352230:(e,t,o)=>{o.d(t,{o:()=>i,p:()=>r});var n=o(667294);let i=function(e){return e[e.Modal=0]="Modal",e[e.ActionSheet=1]="ActionSheet",e[e.Popup=2]="Popup",e}({});const r=(0,n.createContext)({menuType:void 0});r.displayName="MenuContext"},123658:(e,t,o)=>{o.d(t,{$6:()=>a,Ds:()=>i,_K:()=>r,tM:()=>s});o(267602),o(241792),o(731107);var n=()=>o(513670);function i(e,t){let o=0;for(let n=0;n<t.length;n+=1){const i=t[n];if(e>o+i.items.length-1){o+=i.items.length;continue}const r=e-o,a=i.items[r];if(!a)return;return{item:a,index:{section:n,indexLocal:r}}}}function r(e,t){const o=t[e.section];if(!o)return;const n=o.items[e.indexLocal];return n||void 0}function a(e,t){return n().Sm(t.slice(0,e.section).map((e=>e.items.length)))+e.indexLocal}function s(e){return e.reduce(((e,t)=>e+t.items.length),0)}},164079:(e,t,o)=>{o.d(t,{Z:()=>r});o(267602),o(30005);var n=()=>o(523733),i=()=>o(513670);function r(e,t){if(!t)return e;const o={...e};return Object.keys(t).forEach((r=>{const a=t[r],s=e[r];s&&r.startsWith("on")&&i().mf(a)?o[r]=function(){s(...arguments),a(...arguments)}:s&&("ref"===r||r.endsWith("Ref"))&&a?o[r]=(0,n().lq)(s,a):s||(o[r]=a||s)})),o}},233936:(e,t,o)=>{o.d(t,{Bo:()=>pe,eQ:()=>me,QG:()=>ye,ol:()=>Te,fn:()=>_e,_W:()=>Me,vs:()=>Re,O2:()=>fe,UF:()=>xe,Z3:()=>be,w1:()=>Be,rZ:()=>he,s0:()=>ve,GH:()=>Ie,hc:()=>we,hD:()=>ke,T5:()=>Ae,em:()=>Pe,pk:()=>Se,i2:()=>Ce,$$:()=>ge,$3:()=>le,c7:()=>ue,Tz:()=>ce,oQ:()=>de,Oh:()=>Ee,zd:()=>se});o(821057),o(267602),o(228244);var n=()=>o(492788),i=()=>o(317924),r=()=>o(532850),a=()=>o(799891),s=()=>o(998411),l=()=>o(98934),c=()=>o(955620),d=()=>o(353141),u=()=>o(8101),p=()=>o(242619),m=()=>o(198732),f=()=>o(33649),g=()=>o(627817),v=()=>o(718959),h=()=>o(749826),_=()=>o(965903),b=()=>o(544607),y=()=>o(453999),S=()=>o(879952),w=()=>o(269299),k=()=>o(109757);const I={pageTemplateModalActions:new(o(677559).Ss)("pageTemplateModalActions",(async()=>Promise.all([o.e(2971),o.e(53335),o.e(46616)]).then(o.bind(o,241516))))};var C=()=>o(332542),x=()=>o(207874),T=()=>o(970105),M=()=>o(940417),P=()=>o(990966),A=()=>o(869211),R=()=>o(644329),B=()=>o(604068),E=()=>o(267191),D=()=>o(201741),U=()=>o(271308),F=()=>o(589525),N=()=>o(291335),V=()=>o(156958),L=()=>o(881688),O=()=>o(543934),Z=()=>o(297861),j=()=>o(876822),K=()=>o(379072),z=()=>o(845622),H=()=>o(369320),q=()=>o(543842),W=()=>o(253225),G=()=>o(121700),$=()=>o(21688),Q=()=>o(609306),Y=()=>o(452842),J=()=>o(127519),X=()=>o(421797),ee=()=>o(527278),te=()=>o(191003),oe=()=>o(122479),ne=()=>o(148126),ie=()=>o(339523),re=()=>o(550054);let ae=!1;function se(e){ae=e}function le(e,t,o){var n,a;const{NativeMobileActionBarStore:s}=e,l=ae||Boolean(null==s?void 0:s.state.enableShouldShowDebugging);if(!function(e,t,o){var n;const{device:a,NativeMobileActionBarStore:s,TabbedRouterStore:l}=e,c=ae||Boolean(null==s?void 0:s.state.enableShouldShowDebugging);if(!a.isMobile)return De(c,"canShowMobileActionBar = false (reason: !device.isMobile)"),!1;if((0,ne().__)(e)&&h().default.checkGate({gateName:"mab_consider_navigation_top_page"})){const e=(0,i().w_)(l.state);if("web"!==e.type||"page"!==(0,i()._r)(e).route.name)return De(c,"canShowMobileActionBar = false (reason: top page is not a web page)"),!1}if(Q().default.state.open)return De(c,"canShowMobileActionBar = false (reason: quickFindOpen)"),!1;if(!a.isMobileNative&&q().Z.state.open)return De(c,"canShowMobileActionBar = false (reason: !device.isMobileNative && MentionMenuStore.state.open)"),!1;if(a.isMobileNative&&D().default.state.enabled)return De(c,"canShowMobileActionBar = false (reason: !device.isMobileNative && DictationStore.state.open)"),!1;if(J().default.isEditingComment())return De(c,"canShowMobileActionBar = false (reason: TextSelectionStore.isEditingComment())"),!1;const d=(0,R().RR)(z().default.state),u=null===(n=K().default.getActiveSession())||void 0===n?void 0:n.hasPendingOperations();if(d||u)return De(c,"canShowMobileActionBar = false (reason: isCompletionsPopupActive || hasPendingEdits)"),!1;if(!G().Z.state.isOpen&&e.device.isMobileNative&&H().Z.hasOpenPopups())return De(c,"canShowMobileActionBar = false (reason: !PageTemplateModalStore.state.open && environment.device.isMobileNative && GlobalPopupStore.hasOpenPopups() > 0)"),!1;if(G().Z.state.isOpen){var p;const e=G().Z.state,t=null===(p=e.collectionContextStore)||void 0===p?void 0:p.normalizedSchemaStore.state;if(!t)return De(c,"canShowMobileActionBar = false (reason: !collectionSchema)"),!1;const o=(0,r().Qm)({schema:t,property:e.property});if(!o||"text"!==o.type||o.ai_inference)return De(c,"canShowMobileActionBar = false (reason: PageBlockPropertyValueOverlayStore.state.isOpen && propertySchema.type !== text)"),!1}return!t.isFormBlock()&&(F().in(e)&&N().sidebarOpenStore.state?(De(c,"canShowMobileActionBar = false (reason: sidebarHelpers.sidebarIsExpanded(environment) && sidebarOpenStore.get()"),!1):(0,X().ryx)()?!!(0,X().J5S)({environment:e,blocks:[t],publicEditMode:o})||(De(c,"canShowMobileActionBar = false (reason: !_canEdit)"),!1):(De(c,"canShowMobileActionBar = false (reason: !currentPageIsNotLocked())"),!1))}(e,t,o))return De(l,"shouldShowMobileActionBar = false (reason: !canShowMobileActionBar)"),{canShow:!1,canShowNativeBar:!1,shouldShow:!1};const c=e.device.isMobileNative;if(s&&null!==(n=s.state.menu)&&void 0!==n&&n.type&&!(0,v().JE)())return De(l,"shouldShowMobileActionBar = true (reason: NativeMobileActionBarStore && NativeMobileActionBarStore.state.menu?.type"),{canShow:!0,canShowNativeBar:c,shouldShow:!0};const d=J().default.state;if("editing"!==d.mode)return De(l,"shouldShowMobileActionBar = false (reason: TextSelectionStore.state.mode !== editing"),{canShow:!0,canShowNativeBar:c,shouldShow:!1};const u=d.multiSelection,p=(0,U().L5)(u),m=p.some((e=>e.editable.props.disableStyleAnnotations)),f=p.some((e=>e.editable.props.disableMobileActionBar)),g=p.some((e=>e.editable.props.disableComment));return p&&f?(De(l,"shouldShowMobileActionBar = false (reason: !renderedBlocks || !disableMobileActionBar)"),{canShow:!0,canShowNativeBar:c,shouldShow:!1}):(De(l,"shouldShowMobileActionBar = true"),{shouldShow:!0,canShowNativeBar:c,disableStyleAnnotations:m,disableComment:g,isEmpty:(0,te().iG)(u)&&0===u.end.index&&0===(null===(a=(0,re().x0)(u.end.store))||void 0===a?void 0:a.endIndex)})}function ce(e){const{environment:t,store:o}=e,{isPhone:n}=t.device,i=t.currentUser.isLoggedIn(),r=o.isCollectionView(),a=o.getAssociatedCollectionStore(),s=$().Z.state.open,l=j().default.state.currentLoadingContainerStore,c=t.RouterStore.state.route,d="page"===c.name&&c.showMoveTo,u=o.getContentStores()[0],p=u&&!u.isEmptyTextBlock();return Boolean(n&&o.isDefined()&&o.canEdit()&&i&&!a&&!r&&!s&&d&&!p&&l&&l.state.ready)}function de(e,t,o,n){const i=o?o.getType():void 0,r=J().default.state;if("editing"===r.mode)return!t.state.isComposing&&!(0,te().iG)(r.multiSelection)||L().UQ()||n&&("quote"===i||"table"===i);const a=e.state.savedTextSelectionStoreState;return!(!a||"editing"!==a.mode)&&!(0,te().iG)(a.multiSelection)}function ue(e){var t;const{NativeMobileActionBarStore:o,device:n}=e;return Boolean(o&&(null===(t=o.state.menu)||void 0===t?void 0:t.type)&&!n.isTablet&&!n.isAndroid&&!(0,Z().Y)("supportsMobileActionBarNativeActionMenuWithoutIgnoreSelectionArea"))}function pe(e){if((0,oe().Ix)(e))return!1;const{stores:t}=_().default.state;return t.length>0&&t[0].canEdit()&&!t[0].isNavigableBlock()&&!Boolean(L().UQ())}function me(e,t){return!(0,oe().Ix)(e)&&t.canEdit()}function fe(e){"editing"===J().default.state.mode&&(w().createAndCommit({userAction:"mobileActionBarHelpers.handleIndent",environment:e,canUndo:!0,perform:t=>{T().n2({environment:e,transaction:t,shiftKey:!1})}}),Ee(e,"indent"))}function ge(e){"editing"===J().default.state.mode&&(w().createAndCommit({userAction:"mobileActionBarHelpers.handleUnindent",environment:e,canUndo:!0,perform:t=>{T().n2({environment:e,transaction:t,shiftKey:!0})}}),Ee(e,"unindent"))}function ve(e){w().createAndCommit({userAction:"mobileActionBarHelpers.handleMoveUp",environment:e,canUndo:!0,perform:t=>{T().fs({environment:e,transaction:t,direction:"up"})}}),Ee(e,"move-up")}function he(e){w().createAndCommit({userAction:"mobileActionBarHelpers.handleMoveDown",environment:e,canUndo:!0,perform:t=>{T().fs({environment:e,transaction:t,direction:"down"})}}),Ee(e,"move-down")}function _e(e){const t=_().default.state.stores[0],o=J().default.state;if(t&&"editing"===o.mode){const{multiSelection:n}=o,i=(0,re().hn)(n.end.store)||(0,re().mK)(n.start.store),r=t.getParentBlockStore(),a=r&&r.isCalloutV2()&&1===r.getContentLength();w().createAndCommit({userAction:"mobileActionBarHelpers.handleDelete",environment:e,canUndo:!0,perform:e=>{if(a){const t=r.getParentBlockStore();t&&C().hr({childStore:r,parentStore:t,transaction:e})}else y().Od({store:t,transaction:e})}});if(L().UQ())w().createAndCommit({userAction:"mobileActionBarHelpers.handleDelete",environment:e,canUndo:!0,perform:t=>{V().W5({environment:e,transaction:t})}});else if(i){const t=(0,ie().sQ)(i);S().eP({environment:e,store:t}),S().Db(e)}else S().ZH({environment:e});Ee(e,"remove")}}function be(e){g().lZ({environment:e,mentionTypes:{page:!0,heading:!0,createPage:!0,user:!0,inviteUserToWorkspace:!1,inviteUserToPage:!0,bot:!0,date:!0,reminder:!0,templateVariable:!0,group:!0,team:!0,formulaContextVariable:!0}}),Ee(e,"mention")}function ye(e){const t=J().default.state;if("empty"===t.mode){const t=(0,v().RM)();if(!t)throw new Error("No root store.");S().Ys({environment:e,store:t})}else if((0,te().iG)(t.multiSelection)){const o=(0,ie().sQ)(t.multiSelection.start.store);o&&!o.isEmptyEditableBlock()&&S().Ys({environment:e,store:o})}(0,A().toggleInitialPrompt)({from:"mobile_action_bar",environment:e}),Ee(e,"ai")}function Se(e,t){M().aS({environment:e,annotation:t}),Ee(e,t[0])}function we(e,t,o){const{NativeMobileActionBarStore:n}=e;null==n||n.update((e=>({...e,menu:t,shouldRestoreSelectionForMenu:o})))}function ke(e,t,o){const{NativeMobileActionBarStore:n}=e;null==n||n.update((e=>({...e,isSubMenuOverridden:o,subMenu:t}))),void 0===t?O().xv({environment:e,dismissed:!0}):Ee(e,t.type)}function Ie(e){x().KX(e),Ee(e,"redo")}function Ce(e){x().Yw(e),Ee(e,"undo")}function xe(e){f().dz({type:"focusOnly",focus:!0}),Ee(e,c().GKr.Link)}function Te(e,t,o){const n=_().default.state.stores[0];if(!n)return;const i=J().default.state,r="empty"!==i.mode&&i.multiSelection;r&&!(0,te().iG)(r)?(B().WD({environment:e,blockStore:n,multiSelection:r,formulasModule:o}),Ee(e,"comment",t)):((0,E().y)({environment:e,blockStore:n}),Ee(e,"discuss",t))}function Me(e){m().qn({environment:e,analyticsFrom:"rich_text_menu"}),Ee(e,"equation")}function Pe(e){S().ZH({environment:e}),P().blurActiveElement(),W().Z.setState({open:!0}),Ee(e,"templates")}async function Ae(e,t){var o;const{currentSpaceViewStore:n,currentSpaceStore:i,mainEditorCurrentBlockStore:r}=j().default.state;if(!n||!i||!r)return;const a=ee().Z.getIntl(),c=(0,s().r)(),d=(0,l().G)(t,a),p=((null===(o=r.getModel())||void 0===o||null===(o=o.getRenderTitle({getRecordModel:r.getRecordModel,userTimeZone:c,intl:a}))||void 0===o?void 0:o.length)??0)>0;let m=!1;const f=Date.now();try{Y().Z.setState({isDuplicating:!0});const t=await I.pageTemplateModalActions.load();await t.loadAndDuplicatePageTemplate({environment:e,isPrivate:!1,item:d,spaceStore:i,spaceViewStore:n,useMinimalTemplates:!1,initializeStore:r}),m=!0}finally{Y().Z.setState({isDuplicating:!1});const t=Date.now()-f;u().Xy(e,{from:"mobileApp",success:m,context:"template_pill",template_block_id:d.rootId,target_space_id:i.id,template_duplication_duration_ms:t,public_template_name:d.name,has_existing_title:p})}}function Re(e){!async function(e){var t;const o=_().default.state.stores,n=e.mobileNative&&h().default.checkGate({gateName:"mobile_native_file_upload"})?null===(t=await e.mobileNative.openFilePicker({types:["image","video"]}))||void 0===t?void 0:t.files:await k().y({multiple:!0,accept:e.device.isIOS?"image/*, video/*":"image/*"}),i=_().default.getCurrentRecordCache(),r=v().qQ(e);n&&0!==n.length&&i&&w().createAndCommit({userAction:"mobileActions.takePicture",environment:e,canUndo:!0,perform:t=>{var a;const s=b().z({environment:e,files:n,inMemoryRecordCache:i,pageWidth:r,transaction:t,spaceId:0!==o.length?o[0].pointer.spaceId:null===(a=(0,v().RM)())||void 0===a?void 0:a.pointer.spaceId});y().BM({environment:e,blocksToInsert:s,target:o,transaction:t,replaceEmptyTextBlock:!0}),S().ZH({environment:e})}})}(e),Ee(e,"take_picture")}function Be(e){const{device:t}=e,o=t.isMobileNative&&t.isIOS&&t.isPhone;o||S().Z5({environment:e,stores:_().default.state.stores}),p().$Z({environment:e,stores:_().default.state.stores,actionSectionGroupKey:"default",showInput:!1,analyticsFrom:"mobile_more_menu"}),Ee(e,"more"),n().default.afterNextFlush((()=>{o&&P().blurActiveElement()}))}function Ee(e,t,o){d().YO(e,{itemName:t,from:o})}function De(e,t){e&&(console.log(t),a().log({level:"info",from:"mobileActionBarHelpers.ts",type:"logShouldShowReason",data:{message:t}}))}},814139:(e,t,o)=>{o.d(t,{S$:()=>s,Y2:()=>a,nd:()=>r});var n=()=>o(566232),i=()=>o(297861);let r=function(e){return e[e.Bottom=0]="Bottom",e[e.Floating=1]="Floating",e}({});function a(e){const{environment:t}=e;return!t.device.isIOS&&!t.device.isAndroid}function s(e){var t;const{environment:o}=e;if(null===(t=o.mobileNative)||void 0===t||!t.api.openUpgradeModal)return!1;if((0,i().Y)("supportsPlusIAP"))return!0;if(!o.device.isIOS)return!1;{if(!o.device.mobileAppVersion)return!1;const e=n().parseVersion(o.device.mobileAppVersion),t=n().parseVersion("0.4.165");if(!e||!t)return!1;return!n().isLessThanVersion(e,t)}}},148149:(e,t,o)=>{o.r(t),o.d(t,{getMobileNativeSessionInfo:()=>i,mobileNativeSessionInfoKey:()=>n});const n="__mobileNativeSessionInfo";function i(){return window[n]??{}}},458121:(e,t,o)=>{o.d(t,{d:()=>i,u:()=>r});var n=()=>o(749826);function i(){return"on"===n().default.getEligibleGroup({experimentId:"monday_importer",defaultGroup:"control"})}function r(){return n().default.checkGate({gateName:"monday_v2_enabled"})}},154057:(e,t,o)=>{o.d(t,{N9:()=>s,Nf:()=>l,Vc:()=>i,X9:()=>c,uG:()=>d});var n=()=>o(145990);const i={mouse:6,finger:0,stylus:6},r=3,a=4;function s(e){return e.button===r||e.button===a}function l(e){return e&&"stylus"===e.touchType?"stylus":"finger"}function c(){return n().IL.moved}function d(e){return!!e.isTrusted&&c()}},605067:(e,t,o)=>{o.d(t,{Kg:()=>P,lQ:()=>V,hD:()=>N,cJ:()=>O,HE:()=>D,uw:()=>L,EC:()=>R,ah:()=>B,vz:()=>F,ru:()=>Z,ed:()=>j});o(821057),o(267602),o(916054),o(653476),o(470928),o(228244),o(667294);var n=()=>o(156642),i=()=>o(874459),r=()=>o(993407),a=()=>o(396136),s=()=>o(752778),l=()=>o(255933),c=()=>o(306164),d=()=>o(788860),u=()=>o(696459),p=()=>o(308186),m=()=>o(360964),f=()=>o(876822),g=()=>o(960562),v=()=>o(826955),h=()=>o(764189),_=()=>o(594546),b=()=>o(527278),y=()=>o(906591),S=()=>o(239482),w=()=>o(122479),k=()=>o(148126),I=()=>o(345918),C=()=>o(760651),x=()=>o(707513),T=o(785893);async function M(){return p().gt({message:(0,T.jsx)("span",{children:(0,T.jsx)(d()._H,{defaultMessage:"Make this page private?",id:"confirmDialog.movePageToPrivate.message",values:{boldtext:e=>(0,T.jsx)("span",{style:{fontWeight:x().Ue.semibold},children:e})}})}),description:(0,T.jsx)(d()._H,{defaultMessage:"Only you will be able to access this page.",id:"confirmDialog.movePageToPrivate.description"}),acceptLabel:(0,T.jsx)(d()._H,{defaultMessage:"Move to private",id:"confirmDialog.movePageToPrivate.confirmButton.label"})})}const P=20,A=(0,d().vU)({privateDestinationName:{id:"moveToHelpers.destinationName.private",defaultMessage:"Private"},numPagesDescriptorString:{id:"moveToHelpers.movePageDescriptorString",defaultMessage:"{numPagesMoved, plural, one {# page} other {# pages}}"},numPagesWithSubitemsDescriptorString:{id:"moveToHelpers.movePagesWithSubitemsDescriptorString",defaultMessage:"{numPagesMoved, plural, one {# page} other {# pages}} and {numSubitemsMoved, plural, one {# sub-item} other {# sub-items}}"},numBlocksDescriptorString:{id:"moveToHelpers.moveBlocksDescriptorString",defaultMessage:"{numBlocksMoved, plural, one {# block} other {# blocks}}"},bookmarksDestinationName:{id:"moveToHelpers.destinationName.favorites",defaultMessage:"Favorites"},movedMessagesWithDestinationToast:{id:"moveToHelpers.afterBulkMoveCompleteToastMessageWithDestination",defaultMessage:"Moved {pageDescriptor} to {destinationName}"},movedToDestinationShortToast:{id:"moveToHelpers.afterMoveCompleteOnMobileToastMessageWithDestination",defaultMessage:"Moved to {destinationName}"},movedMessagesToast:{id:"moveToHelpers.afterBulkMoveCompleteToastMessage",defaultMessage:"Moved {pageDescriptor}"}});function R(e){const{movedItems:t,numSubitems:o}=e;if(!(t.filter((e=>e.isNavigableBlock())).length===t.length))return b().Z.formatMessage(A.numBlocksDescriptorString,{numBlocksMoved:t.length});if(1===t.length){const e=E(t[0]);if(e)return e}return o?b().Z.formatMessage(A.numPagesWithSubitemsDescriptorString,{numPagesMoved:t.length-o,numSubitemsMoved:o}):b().Z.formatMessage(A.numPagesDescriptorString,{numPagesMoved:t.length})}function B(e){const{environment:t,movedItems:o,moveToLocation:n,numSubitems:i}=e,r=R({movedItems:o,numSubitems:i}),a=function(e){const{environment:t,moveToLocation:o}=e,{currentSpaceStore:n}=f().default.getState();if(void 0===o||void 0===n)return;switch(o.type){case"moveToBlock":return E(o.blockStore);case"moveToCollection":return E(o.collectionStore);case"moveToCurrentWorkspace":return(0,I().rn)(t,n);case"moveToPrivatePages":return b().Z.formatMessage(A.privateDestinationName);case"moveToTeam":return E(o.teamStore);case"moveToOtherWorkspace":return(0,I().rn)(t,o.spaceStore);case"moveToBookmarks":case"moveToShared":return;default:(0,u().t1)(o)}}({environment:t,moveToLocation:n});return a?t.device.isPhone?b().Z.formatMessage(A.movedToDestinationShortToast,{destinationName:a}):b().Z.formatMessage(A.movedMessagesWithDestinationToast,{pageDescriptor:r,destinationName:a}):b().Z.formatMessage(A.movedMessagesToast,{pageDescriptor:r})}function E(e){var t;const o=b().Z.getIntl();if(e)return null===(t=e.getModel())||void 0===t?void 0:t.getRenderTitle({getRecordModel:e.getRecordModel,userTimeZone:i().x7,intl:o})}function D(e,t){const{currentSpaceStore:o}=f().default.getState(),n=("space"===e.type?e.id:e.spaceId)??(null==o?void 0:o.id);if(void 0===o||void 0===n)return;const i=function(e){var t;const{currentUserRootStore:o,currentSpaceStore:n}=f().default.state;return(null==n?void 0:n.id)===e?n:null==o||null===(t=o.getSpaceViewStores())||void 0===t||null===(t=t.find((t=>{var o;return(null===(o=t.getSpaceStore())||void 0===o?void 0:o.id)===e})))||void 0===t?void 0:t.getSpaceStore()}(n);if(i){if(i.id!==o.id)return{type:"moveToOtherWorkspace",spaceStore:i,targetParentId:"space-private-pages"!==e.type?e.id:i.id};switch(e.type){case"page":{const t=f().default.state.mainEditorCurrentBlockStore;if(!t)return;return{type:"moveToBlock",blockStore:v().G.createChildStore(t,{table:a().iU,id:e.id})}}case"collection":return{type:"moveToCollection",collectionStore:v().NW.createChildStore(i,{table:s().vF,id:e.id})};case"space":return{type:"moveToCurrentWorkspace"};case"space-private-pages":return{type:"moveToPrivatePages"};case"team":return{type:"moveToTeam",teamStore:v().zX.createChildStore(i,{table:c().e0,id:e.id})};default:(0,u().t1)(e)}}}function U(e){switch(e){case"workspace":return{type:"moveToCurrentWorkspace"};case"bookmarks":return{type:"moveToBookmarks"};case"private":return{type:"moveToPrivatePages"};case"shared":return{type:"moveToShared"};case"team":case r().kg:case r().PT:case r().cz:case r().mu:case r().g$:return;default:(0,u().t1)(e)}}function F(e){const{droppedDirection:t,targetStore:o,outlinerSectionType:n}=e,{currentSpaceStore:i}=f().default.getState();if(!i||!n)return;let r=o;if("block"===(null==o?void 0:o.table)&&t!==g().v.Onto){if("bookmarks"===n)return{type:"moveToBookmarks"};if("shared"===n)return{type:"moveToShared"};r=null==o?void 0:o.getParentStore()}if(void 0===r)return;if(i.id===r.id)return U(n);switch(r.table){case"block":return{type:"moveToBlock",blockStore:r};case"team":return{type:"moveToTeam",teamStore:r};case"space":return U(n)}}function N(e){let{environment:t,blocks:o}=e;if(h().n.state)return{canMoveBlocks:!1,reason:{key:"unknown"}};for(const n of o){if(n.getParentTable()===c().e0){const e=(0,S().VP)(n);if(!e||!(0,y().si)({teamStore:e,environment:t}))return{canMoveBlocks:!1,reason:{key:"lockedTopLevelTeamPage"}}}if(!n.canAdmin())return{canMoveBlocks:!1,reason:{key:"needsFullAccess"}};if(!w().KE({environment:t,blockStore:n})){const e=n.getParentStore();return{canMoveBlocks:!1,reason:{key:"needsEditAccessOnParent",parentStore:e instanceof v().G?e:void 0}}}}return{canMoveBlocks:!0}}function V(e){let{environment:t,blocks:o}=e;return N({environment:t,blocks:o}).canMoveBlocks}function L(e){const{type:t}=e,{mainEditorCurrentBlockStore:o,currentSpaceStore:n}=f().default.state;if(!n)throw new Error("currentSpaceStore not found");const i=o||n;if("space"!==t&&e.spaceId&&e.spaceId!==n.id)return v().H2.createChildStore(i,{table:l().bx,id:e.spaceId});switch(t){case"space-private-pages":return v().H2.createChildStore(i,{table:l().bx,id:n.id});case"space":return v().H2.createChildStore(i,{table:l().bx,id:e.id});case"page":return v().G.createChildStore(i,{table:a().iU,id:e.id});case"collection":return v().NW.createChildStore(i,{table:s().vF,id:e.id});case"team":return v().zX.createChildStore(n,{table:c().e0,id:e.id,spaceId:n.id});default:(0,u().t1)(t)}}async function O(){const{accept:e}=await p().gt({mode:"wide",message:(0,T.jsx)("b",{children:(0,T.jsx)(d()._H,{id:"moveToHelpers.duplicateToSpaceConfirmTitle",defaultMessage:"Some content and settings may be broken on the duplicated page"})}),description:(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("div",{style:{marginBottom:8},children:(0,T.jsx)(d()._H,{id:"moveToHelpers.duplicateToSpaceConfirmDescription1",defaultMessage:"This may include: links, relations, permissions, page history, and more."})}),(0,T.jsx)(d()._H,{id:"moveToHelpers.duplicateToSpaceConfirmDescription2",defaultMessage:"This page will remain unchanged in the current workspace, and a duplicate version will be created in the workspace you have chosen."}),(0,T.jsx)(m().Z,{title:(0,T.jsx)("div",{children:(0,T.jsx)(d()._H,{id:"moveToHelpers.duplicateToSpaceConfirmHelpLink",defaultMessage:"Learn more"})}),href:(0,k().UY)("guides.duplicateToSpace"),analyticsFrom:"move_to_confirm_duplicate_to_space",style:{marginTop:12}})]}),acceptLabel:(0,T.jsx)(d()._H,{id:"moveToHelpers.duplicateToSpaceConfirmAcceptLabel",defaultMessage:"I understand, duplicate"})});return e}function Z(e){let{targets:t,destination:o,direction:i,draggingOutlinerType:r}=e;if(i===g().v.Onto&&t.some((e=>e.id===o.id)))return!0;const a=void 0!==(0,S()._A)(o);return!(!t.some((e=>(0,C().A)(e)))||!a)||(!("bookmarks"===r||!function(e){let{targets:t,destination:o,direction:i}=e;const r=t.some((e=>e.isCollectionView()||!e.isType(n().Zi)));if(!r)return!1;if(o.isCollectionView()&&!(0,C().A)(o)){if(i===g().v.Onto)return!0;if(!o.getRecordStoreUIParent())return!0}const a=o.getAssociatedCollectionStore();if(i!==g().v.Onto&&a&&!a.isPageTreeCollection())return!0;return!1}({targets:t,destination:o,direction:i}))||!(!o.isLocked()||!o.isPageBlock()))}async function j(e){const t=function(e){const{from:t,environment:o}=e;if("moveTo"===t){const{moveToValue:t}=e.moveToArgs;return D(t)}if("dragAndDrop"===t){const{destination:t,direction:n,destinationOutlinerType:i}=e.dropArgs;return F({targetStore:t,droppedDirection:n,outlinerSectionType:i,environment:o})}}(e),o=await async function(e){const{blocks:t,environment:o,moveToLocation:n,from:i}=e;if(!n||"moveToOtherWorkspace"===n.type||"moveToBookmarks"===n.type)return{confirmed:!0,shouldClearPagePermissions:!1};const r="moveToPrivatePages"===n.type,a="moveTo"===i?e.moveToArgs.destination:e.dropArgs.destination,s=a&&K({stores:[a],environment:o});if(!r&&!s)return{confirmed:!0,shouldClearPagePermissions:!1};if(!K({stores:t,environment:o})){const{accept:e}=await M();return e?{confirmed:!0,shouldClearPagePermissions:!0}:{confirmed:!1}}if(t.every((e=>e.isTopLevel())))return{confirmed:!0,shouldClearPagePermissions:!1};if(!r)return{confirmed:!0,shouldClearPagePermissions:!1};const l=o.currentUser.id;if(t.some((e=>{const t=e.getPermissionItems();return 0!==t.length&&(1!==t.length||"user_permission"!==t[0].type||t[0].user_id!==l)}))){const{accept:e}=await M();return e?{confirmed:!0,shouldClearPagePermissions:!0}:{confirmed:!1}}return{confirmed:!0,shouldClearPagePermissions:!1}}({...e,moveToLocation:t});if(!o.confirmed)return{confirmed:!1};const n=await async function(e){const{environment:t,moveToLocation:o,from:n,blocks:i}=e;if(!o)return{confirmed:!0,shouldUpdateToManualSort:!1};if("moveTo"===n)return{confirmed:!0,shouldUpdateToManualSort:!1};const r="moveToPrivatePages"===o.type||"moveToShared"===o.type;if(!r)return{confirmed:!0,shouldUpdateToManualSort:!1};if(e.dropArgs.isDroppingOnFullSection)return{confirmed:!0,shouldUpdateToManualSort:!1};const a="moveToPrivatePages"===o.type?"private":"shared";if("private"===a){if(!K({stores:i,environment:t}))return{confirmed:!0,shouldUpdateToManualSort:!1}}const{currentSpaceViewStore:s}=f().default.state;if(!s||"lastEdited"!==(0,y().S4)({spaceViewStore:s,type:a}).sortOption)return{confirmed:!0,shouldUpdateToManualSort:!1};(0,_().j)({environment:t,event:{eventName:"sidebar_manual_sort_modal_open",eventProperties:{outliner_type:a}}});const{accept:l}=await async function(e){return p().gt({message:(0,T.jsx)(d()._H,{defaultMessage:"Would you like to switch to manual sort?",id:"confirmDialog.manualSortForSidebarSection.message"}),description:"private"===e?(0,T.jsx)(d()._H,{defaultMessage:"This will discard your previous manual sort in Private.",id:"confirmDialog.manualSortForPrivate.description"}):(0,T.jsx)(d()._H,{defaultMessage:"This will discard your previous manual sort in Shared.",id:"confirmDialog.manualSortForShared.description"}),acceptLabel:(0,T.jsx)(d()._H,{defaultMessage:"Switch to manual",id:"confirmDialog.manualSortForSidebarSection.confirmButton.label"})})}(a);if(!l)return(0,_().j)({environment:t,event:{eventName:"sidebar_manual_sort_modal_cancel",eventProperties:{outliner_type:a}}}),{confirmed:!1};return(0,_().j)({environment:t,event:{eventName:"sidebar_manual_sort_modal_confirm",eventProperties:{outliner_type:a}}}),{confirmed:!0,shouldUpdateToManualSort:!0}}({...e,moveToLocation:t});if(!n.confirmed)return{confirmed:!1};const{shouldClearPagePermissions:i}=o,{shouldUpdateToManualSort:r}=n;return{confirmed:!0,shouldClearPagePermissions:i,shouldUpdateToManualSort:r}}function K(e){const{stores:t,environment:o}=e,{currentSpaceStore:n}=f().default.state;if(!n)return!1;for(const i of t){const e=(0,S().u3)(i);if(!((null==e?void 0:e.table)===a().iU&&e.isTopLevelPrivatePage({spaceStore:n,environment:o})))return!1}return!0}},390886:(e,t,o)=>{o.d(t,{Hn:()=>m,XN:()=>f,XQ:()=>u,Xk:()=>d,qB:()=>p});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476);var n=()=>o(156642),i=()=>o(396136),r=()=>o(752778),a=()=>o(960562),s=()=>o(241449),l=()=>o(826955),c=()=>o(605067);function d(e,t){return!(!e.isNavigableBlock()&&e.getType()!==n().Ti.alias)&&(!e.isLinkedCollectionView()&&(!e.getMovedStore().getValue()&&!(0,c().ru)({targets:t,destination:e,direction:a().v.Onto})))}function u(e){let{recentPageResults:t,blockResults:o,suggestedPages:n}=e;const i=new Set;for(const r of n){const e=r instanceof l().NW?r.getParentId():r.id;e&&i.add(e)}return[...t.filter((e=>!i.has(e.blockId))),...o.filter((e=>!i.has(e.blockId)))]}function p(e){const t=[];for(const n of e){const e=n.getParentPointer();if(e)if(e.table===i().iU)t.push(e.id);else if(e.table===r().vF){var o;const e=null===(o=n.getAssociatedCollectionStore())||void 0===o?void 0:o.getParentPointer();e&&e.table===i().iU&&t.push(e.id)}}return t}function m(){const e=s().default.getDatabaseType();return"typed"===s().default.getVariant()&&e&&"notion://wiki_collection"!==e}function f(){return s().default.state.isOpen&&s().default.state.targets.length>0}},191003:(e,t,o)=>{o.d(t,{NV:()=>u,QY:()=>m,TD:()=>f,_v:()=>a,e6:()=>p,iG:()=>c,k_:()=>s,ko:()=>d,qS:()=>l,yt:()=>v});var n=()=>o(696459),i=()=>o(550054);function r(e,t){return e.store===t.store&&e.index===t.index}function a(e,t){return!e&&!t||!(!e||!t)&&(r(e.start,t.start)&&r(e.end,t.end))}function s(e){return{start:{...e.start},end:{...e.end}}}function l(e){return!e||e.start.store===e.end.store}function c(e){return l(e)&&e.start.index===e.end.index}function d(e){return 0===e.start.index&&c(e)}function u(e){return c(e)&&(0,i().J_)(e.start.store,{startIndex:e.start.index,endIndex:e.end.index})}function p(e,t){const o=[e.start.store,e.end.store];return o.includes(t.start.store)||o.includes(t.end.store)}function m(e){if(e)return l(e)?{store:e.start.store,selection:{startIndex:e.start.index,endIndex:e.end.index}}:void 0}function f(e){const{store:t,selection:o}=e;if(t&&o)return{start:{store:t,index:o.startIndex},end:{store:t,index:o.endIndex}}}const g=(0,n().AO)((e=>e&&"object"==typeof e&&"store"in e&&"index"in e?{true:e}:{false:e})),v=(0,n().AO)((e=>{if("object"==typeof e&&e&&"start"in e&&"end"in e){const{start:t,end:o}=e;if(g(t)&&g(o))return{true:e}}return{false:e}}))},271308:(e,t,o)=>{o.d(t,{$r:()=>F,Aw:()=>V,L5:()=>C,Nj:()=>B,W9:()=>A,Zb:()=>T,fx:()=>D,r:()=>I,ri:()=>L,tp:()=>R,uZ:()=>N,xI:()=>w});o(821057),o(267602),o(653476),o(470928),o(241792);var n=()=>o(220427),i=()=>o(387934),r=()=>o(156642),a=()=>o(799891),s=()=>o(739021),l=()=>o(163836),c=()=>o(156538),d=()=>o(32969),u=()=>o(297861),p=()=>o(128076),m=()=>o(641702),f=()=>o(296304),g=()=>o(191003),v=()=>o(321930),h=()=>o(339523),_=()=>o(505462),b=()=>o(550054);const y=!1;function S(){if(y){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];console.warn("multiTextSelectionHelpers:",...t)}}function w(e,t){const o=(0,g().QY)(t);return o||a().rateLimitedLog({from:"multiTextSelectionHelpers",type:"TODO",level:"warning",data:{name:e,message:e}}),o}const k={startIndex:0,endIndex:1/0};function I(e,t){const{start:o,end:i}=e;if((0,g().qS)(e))return o.store===t?"contained-within":void 0;if(o.store===t)return"starts-at";if(i.store===t)return"ends-at";const r=c().E.findNodeFromStore(o.store),a=c().E.findNodeFromStore(i.store),s=c().E.findNodeFromStore(t);return r&&a&&s&&1===(0,n().Z)(s,r)&&-1===(0,n().Z)(s,a)?"covers":void 0}function C(e){const{start:t,end:o}=e,n=(0,g().QY)(e);if(n){const e=c().E.findEditableWithStore(n.store);if(e){return[{editable:e,...n}]}return[]}const i=x(t),r=x(o);if(!i||!r){const e=i||r;if(!e)return[];return[{editable:e.editable,store:e.position.store,selection:{startIndex:e.position.index,endIndex:e.position.index}}]}const a=(0,b().yR)(i.editable).filter((e=>{var t,o,n;return(null===(t=e.contentEditableContext)||void 0===t?void 0:t.id)===(null===(o=i.editable.contentEditableContext)||void 0===o?void 0:o.id)&&(null===(n=e.getNode())||void 0===n?void 0:n.isConnected)})),s=a.findIndex((e=>e.props.store.id===i.editable.props.store.id)),l=a.findIndex((e=>e.props.store.id===r.editable.props.store.id));if(-1===s){throw Object.assign(new Error("Start editable not found in DOM order array"),i)}if(-1===l){throw Object.assign(new Error("End editable not found in DOM order array"),r)}if(!(s<=l))throw new Error(`Start (index ${s}) must be before end (index ${l}) in DOM`);const d=a.slice(s,l+1);return d.map(((e,t)=>{if(0===t){const{position:t}=i;return{editable:e,store:e.props.store,selection:{startIndex:t.index,endIndex:1/0}}}if(t===d.length-1){const{position:t}=r;return{editable:e,store:e.props.store,selection:{startIndex:0,endIndex:t.index}}}return{editable:e,store:e.props.store,selection:k}}))}function x(e){const t=c().E.findEditableWithStore(e.store);if(t)return{editable:t,position:e}}function T(e){var t;const{range:o,contentEditableLeafRegistry:n,allowInvisibleEndSelection:i,constraintToContentEditableRootNode:r,avoidEdgesOfContentEditableRoot:a}=e;if(!o)return;if(r&&r!==(0,f().xp)(o.commonAncestorContainer))return;if(a&&(0,f().Hd)(o.commonAncestorContainer))return void S("not snapping - range is at edge of content editable root");let s,l=!1,c=n.getParentContentEditableLeaf(o.startContainer);c||(s??=n.getByDOMOrder(),c=(0,_().snapContainerOffsetToNode)({nodesInDomOrder:s,containerOffset:{container:o.startContainer,offset:o.startOffset},snapTowards:"end"}),l=!0,S("snapped start",o.startContainer,o.startOffset,"to",c));let d=n.getParentContentEditableLeaf(o.endContainer);if(!d||!i&&d&&0===o.endOffset&&o.endContainer===d.node&&d.node!==(null===(t=c)||void 0===t?void 0:t.node)){s??=n.getByDOMOrder();const e=s.findIndex((e=>{var t;let{node:o}=e;return o===(null===(t=c)||void 0===t?void 0:t.node)})),t=-1!==e?s.slice(e):s,r=d&&!i?t.filter((e=>{var t;let{node:o}=e;return o!==(null===(t=d)||void 0===t?void 0:t.node)})):t;d=(0,_().snapContainerOffsetToNode)({nodesInDomOrder:r,containerOffset:{container:o.endContainer,offset:o.endOffset},snapTowards:"start"}),l=!0,S("snapped end",o.endContainer,o.endOffset,"inside",t,"to",d)}if(!c||!d){const e=c??d;if(!e)return;return{start:e,end:e,forceEmit:!0}}return{start:c,end:d,forceEmit:l}}function M(e){const t=e.getTitleStore();if(t){if(c().E.findNodeFromStore(t))return t}}function P(e){for(const t of e){const e=M(t);if(e&&t.getType()!==r().Ti.code)return{blockStore:t,titleStore:e}}}function A(e){const t=P(e);if(!t)return;const o=function(e){return P([...e].reverse())}(e);if(!o)return;const n=(0,v().dq)({includeNonSelectableListContainer:!1,rootStore:t.blockStore.getHighestContentBlockUIAncestor()});if(!n)return;const i=(0,v().Ib)(o.blockStore,n);if(!i)return;let r;for(const a of(0,s().JK)(i)){const e=a.value.store.getTitleStore();if(e){const t=(0,b().x0)(e);t&&(r={store:e,index:t.endIndex})}}if(!r)return;return{start:{store:t.titleStore,index:0},end:r}}function R(e){var t;const{multiSelection:o,filterCommonAncestors:n,focus:i}=e;if((0,g().qS)(o)){var a;let e=(0,h().sQ)(o.start.store);if((null===(a=e)||void 0===a?void 0:a.getType())===r().Ti.tableRow){var l;const t=null===(l=e.getRecordStoreUIParent())||void 0===l?void 0:l.recordStoreUIParentStore;t&&t instanceof p().G&&(e=t)}if(!e)return;return{stores:[e]}}const c=B({multiSelection:o,includeNonSelectable:!1});if(!c)return;const d=n?(0,s().tL)(c.treeRange):(0,s().bu)(c.treeRange),u=Array.from(d),m=u[0],f=null==m||null===(t=m.value.component)||void 0===t||null===(t=t.getContentEditableContext())||void 0===t?void 0:t.id,v=u.filter((e=>{var t;return(null===(t=e.value.component)||void 0===t||null===(t=t.getContentEditableContext())||void 0===t?void 0:t.id)===f||e.value.store.getType()===r().Ti.table})).map((e=>e.value.store));return{stores:v,pivot:"end"===i||i===o.end||void 0===i&&!(0,_().selectionIsBackwards)()?v[v.length-1]:v[0]}}function B(e){const{multiSelection:t,includeNonSelectable:o}=e,n=(0,h().sQ)(t.start.store),i=(0,h().sQ)(t.end.store);if(!n||!i)return;const r=n.getHighestContentBlockUIAncestor(),a=d().C.findSelectableFromStore(n),s=(0,v().dq)({includeNonSelectableListContainer:o,rootStore:r,container:null==a?void 0:a.getContextSelectableContainer()});if(!s)return;const c=(0,v().v5)(n,[s]),u=(0,v().v5)(i,[s]);if(!c||!u)return;const p=l().T.fromNearestCommonAncestor(c,u);return p?{tree:s,treeRange:p}:void 0}function E(e){const{leafNode:t,rangeContainer:o,defaultEndIndex:i}=e;S("Range outside of leaf, attempting to recover",t,o);const r=(0,n().Z)(t,o);let a=0;if(-1===r)a=i;else{if(1!==r)throw new Error("Invalid relativeStartPosition. index should not be inside leaf");a=0}return{index:a,forceEmit:!0,afterEndOfLine:!1}}function D(e){var t,o,n,i;const{range:r,contentEditableLeafRegistry:a,allowInvisibleEndSelection:s,avoidEdgesOfContentEditableRoot:l}=e;if(!r)return;let d,u,p=!1;if(a&&a.hasMembers()){const e=T({range:r,contentEditableLeafRegistry:a,allowInvisibleEndSelection:s,constraintToContentEditableRootNode:void 0,avoidEdgesOfContentEditableRoot:l});e&&(d=e.start.node,u=e.end.node,p||=e.forceEmit),S("getMultiTextSelectionFromRange: snapped to leafs",e,r)}else d=(0,f().X1)(r.startContainer),u=(0,f().X1)(r.endContainer),S("getMultiTextSelectionFromRange: found parent leafs",d,u,r);const g=d?c().E.find((e=>{var t;return(null===(t=e.getContentEditableLeaf())||void 0===t?void 0:t.getNode())===d})):void 0,v=u?c().E.find((e=>{var t;return(null===(t=e.getContentEditableLeaf())||void 0===t?void 0:t.getNode())===u})):void 0;if(!g||!v)return void S("getMultiTextSelectionFromRange: missing editable",{startMissing:!g,endMissing:!v});const h=!r.collapsed,_=g.props.store;let y=v.props.store;const{startContainer:w,endContainer:k}=r,I=(null===(t=(o=v.props).getEndSelection)||void 0===t?void 0:t.call(o).endIndex)??0,C=(null===(n=d)||void 0===n?void 0:n.contains(r.startContainer))&&(0,m().Qb)(r.startContainer,r.startOffset)||E({leafNode:d,rangeContainer:w,defaultEndIndex:I});let x=(null===(i=u)||void 0===i?void 0:i.contains(r.endContainer))&&(0,m().Qb)(r.endContainer,r.endOffset)||E({leafNode:u,rangeContainer:k,defaultEndIndex:I});if(h&&x.afterEndOfLine){const e=(0,b().hn)(y);e&&(S("end after EOL",r.endContainer,r.endOffset),y=e,x={index:0,forceEmit:!0,afterEndOfLine:!1})}return{multiSelection:{start:{store:_,index:C.index},end:{store:y,index:x.index}},forceEmit:p||C.forceEmit||x.forceEmit}}function U(e,t){if(!e&&!t)return 0;if(!t)return-1;if(!e)return 1;if(e.store===t.store)return e.index-t.index;const o=c().E.findNodeFromStore(e.store),i=c().E.findNodeFromStore(t.store);return(0,n().Z)(o,i)}function F(e,t){const[o,n]=[e,t].sort(U);return{start:o,end:n}}function N(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,_().selectionIsBackwards)())?{focus:e.start,anchor:e.end}:{focus:e.end,anchor:e.start}}function V(e){return e.device.isAndroid?(0,u().Y)("supportsAlwaysMultiTextSelectionBehavior")?"always":"gesture":"always"}function L(e){return e.isChrome&&96===parseInt(e.browserVersion,10)}(0,o(947115).exposeDebugValue)("multiTextSelectionToBlockSelection",R),(0,i().Rw)({canFormat:e=>(0,g().yt)(e),header(e){const{table:t,tr:o,td:n,object:r,CONTAINER_STYLE:a}=i().devToolsHyperscript,s=c().E.findNodeFromStore(e.start.store),l=c().E.findNodeFromStore(e.end.store);return t(a,o({},n({},"start:"),n({},r(e.start.index)," in"),n({},r(e.start.store)),n({},r(s))),o({},n({},"end:"),n({},r(e.end.index)," in"),n({},r(e.end.store)),n({},r(l))))},hasBody:e=>!1,body:e=>null})},342923:(e,t,o)=>{o.d(t,{A8:()=>_,AM:()=>b,UF:()=>p,bW:()=>u,yk:()=>c,yt:()=>l});o(670560);var n=()=>o(156642),i=()=>o(659278),r=()=>o(396136),a=()=>o(696459),s=()=>o(826955);function l(e){if(0===e)return"a";let t=0,o=0,n="";for(;e>0;)t=(e-1)/26,o=(e-1)%26,e=Math.floor(t),n=String.fromCharCode(97+o)+n;return n}function c(e){let t=0,o=0;const n=e.split("").reverse();for(const i of n){t+=(i.charCodeAt(0)-96)*26**o,o+=1}return t}const d={"mÌ„":1e6,"dÌ„":5e5,"cÌ„":1e5,"lÌ„":5e4,"xÌ„":1e4,"vÌ„":5e3,m:1e3,cm:900,d:500,cd:400,c:100,xc:90,l:50,xl:40,x:10,ix:9,v:5,iv:4,i:1};function u(e){let t="";if(0===e)return"0";for(const o of(0,a().Yd)(d)){const n=Math.floor(e/d[o]);if(n>=0)for(let e=0;e<n;e++)t+=o;e%=d[o]}return t}function p(e){const t=i().p4(e);let o,n,r,a,s=0;for(let i=0;i<t.length;i++){if(o=t[i],n=o?d[o]:void 0,r=t[i+1],a=r?d[r]:void 0,!n)return-1;a&&n<a?s-=n:s+=n}return s}const m=4.44,f={i:3.64,v:8.36,x:8.08,l:3.73,c:8.64,d:9.52,m:13.61,"mÌ„":13.61,"dÌ„":9.52,"cÌ„":8.64,"lÌ„":3.73,"xÌ„":8.08,"vÌ„":8.36};function g(e){const t=i().p4(e);let o=0;for(const n of t)o+=f[n];return o+m}const v=[24],h=14;function _(e){const t=p(e);if(t<=v.length)return v[t-1];let o=v[v.length-1];for(let n=v.length+1;n<=t;n++){const e=g(u(n));e>o&&(o=e+h),v.push(o)}return o}function b(e){const{blockIds:t,parentStore:o}=e,i=[];let a=0;for(;a<t.length;){let e=t[a],l=s().G.createChildStore(o,{table:r().iU,id:e});if(l.getType()===n().Ti.numberedList){const c=[{blockId:e,idx:1}],d=[{id:e,format:void 0,depth:c.length-1,index:c[0].idx}];for(a+=1;a<t.length&&(e=t[a],l=s().G.createChildStore(o,{table:r().iU,id:e}),l.getType()===n().Ti.numberedList);){{const t=l.getParentId();if(l.getParentId()===c[c.length-1].blockId)c.push({blockId:e,idx:1});else{let o=c[c.length-1].idx;for(;c.length>0&&c[c.length-1].blockId!==t;)o=c[c.length-1].idx,c.pop();c.push({blockId:e,idx:o+1})}d.push({id:e,format:void 0,depth:c.length-1,index:c[c.length-1].idx})}a+=1}i.push(d)}else a+=1}return i}},781105:(e,t,o)=>{o.d(t,{Dx:()=>m,Ye:()=>p,ne:()=>f,yY:()=>u});o(821057),o(670560),o(241792);var n=()=>o(619995),i=()=>o(530980),r=()=>o(217465),a=()=>o(233878),s=()=>o(396136),l=()=>o(513670),c=()=>o(620218),d=()=>o(749826);async function u(e){const{environment:t,recordPointers:o,recurFn:s,recordIsRequired:l}=e,c=r().RecordMapWithRole.create();return await a().uf({recordPointers:o,recordMap:c,recurFn:(e,t)=>s(e,t),loadRecordModel:async e=>{const o=t.defaultRecordCache.inMemoryRecordCache.getModelAndRole({pointer:e,userId:t.currentUser.id});if(o)return o;const r=t.defaultRecordCache.persistedRecordCache;if(r&&(0,n().t)(e)){const o=await r.get({pointer:e,userId:t.currentUser.id});if(o)return{model:i().kk5.fromValue(e.table,o.value),role:o.role}}if(l(e))throw new Error(`Failed to load a required record: ${e.table}, ${e.id}, ${e.spaceId}.`)}}),c}async function p(e){const{environment:t,abortSignal:o,skipAccessWrites:r}=e,a=e.environment.currentUser.id;if(e.inMemoryRecordCache)return e.inMemoryRecordCache.getModelAndRole({pointer:e.pointer,userId:a});const s=t.defaultRecordCache.inMemoryRecordCache.getModelAndRole({pointer:e.pointer,userId:a});if(void 0!==s)return s;if(e.useInMemoryCacheOnly)return;const{persistedRecordCache:l}=e.environment.defaultRecordCache;if(l&&(0,n().t)(e.pointer)){const t=await l.get({pointer:e.pointer,userId:a,skipAccessWrites:r});if(null!=o&&o.aborted)throw new Error("Abort signal received");if(t)return{model:i().kk5.fromValue(e.pointer.table,t.value),role:t.role}}}async function m(e){const{parent:t,inMemoryRecordCache:o,environment:n}=e,r=[],a=e.environment.currentUser.id,l=e.environment.defaultRecordCache.persistedRecordCache;if(l&&o===n.defaultRecordCache.inMemoryRecordCache){return(await l.getBlocksWithParent({parent:t,userId:a})).map((e=>({model:i().kk5.fromValue(s().iU,e.value),role:e.role})))}return o.forEachRecord(a,(e=>{let{model:o,role:n}=e;o.table===s().iU&&o.parent_table===t.table&&o.parent_id===t.id&&r.push({model:o,role:n})})),r}async function f(e){const{environment:t,inMemoryRecordCache:o}=e,n=i().kk5.fromCollection(e.collection);if(!n)return[];const r=n.pointer;if(!n.isPageTreeCollection()){const e=c().default.DO_NOT_USE_markLegacy("collections.get_local_pages_in_collection"),n=m({environment:t,parent:r,inMemoryRecordCache:o});return c().default.DO_NOT_USE_measureLegacy(e,{environment:t}),n}const a=n.getRootPagePointer(),p=d().default.checkGate({gateName:"wiki_perf_improvement_local_enabled"}),f=c().default.DO_NOT_USE_markLegacy("collections.get_local_pages_in_collection_wiki"),g=p?await async function(e){const{rootPagePointer:t,environment:o}=e,n=[],i=(e,o)=>e.table!==s().iU?[]:(e.pointer.id===t.id||"page"!==e.type&&"collection_view_page"!==e.type||n.push({model:e,role:o}),e.getContentIds().map((t=>({table:s().iU,id:t,spaceId:e.spaceId}))));return await u({environment:o,recordPointers:[t],recurFn:i,recordIsRequired:()=>!1}),n}({environment:t,rootPagePointer:a}):await async function(e){const{rootPagePointer:t,environment:o,inMemoryRecordCache:n}=e;let i=[t];const r=[];for(;i.length>0;){const e=i.map((e=>m({environment:o,parent:e,inMemoryRecordCache:n}))),t=(await Promise.all(e)).flat();for(const o of t){var a;const e=null==o||null===(a=o.model)||void 0===a?void 0:a.type;"page"!==e&&"collection_view_page"!==e||r.push(o)}i=l().oA(t.map((e=>{var t;return null===(t=e.model)||void 0===t?void 0:t.pointer})))}return r}({environment:t,rootPagePointer:a,inMemoryRecordCache:o});return c().default.DO_NOT_USE_measureLegacy(f,{environment:t,data:{status:p?"v2":"v1"}}),g}},906591:(e,t,o)=>{o.d(t,{B8:()=>$,BY:()=>N,DP:()=>Q,EE:()=>R,N:()=>E,Nb:()=>K,P4:()=>B,Pl:()=>P,Ps:()=>U,Q2:()=>x,S4:()=>Z,TM:()=>z,Wu:()=>j,Yz:()=>D,iE:()=>H,jz:()=>V,l6:()=>I,si:()=>A,vs:()=>C});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(916054),o(653476),o(241792);var n=()=>o(506347),i=()=>o(156642),r=()=>o(874459),a=()=>o(998411),s=()=>o(35980),l=()=>o(993407),c=()=>o(396136),d=()=>o(602299),u=()=>o(306164),p=()=>o(513670),m=()=>o(696459),f=()=>o(876822),g=()=>o(773725),v=()=>o(826955),h=()=>o(718959),_=()=>o(614027),b=()=>o(527278),y=()=>o(605067),S=()=>o(345918);const w=new Set([i().Ti.page,i().Ti.collectionView,i().Ti.collectionViewPage,i().Ti.alias]),k=new Set([i().Ti.factory]);function I(e){const{allPages:t,state:o,intl:n}=e,{query:i}=o;return t.map((e=>{if(!e.isDefined())return;const t=e.getLastEditedTime()||e.getCreatedTime();if(!t)return;const o=e.getLastEditedByPointer()??e.getCreatedByPointer();return(0,l().fY)({block:e.getModel(),query:i,getRecordModel:e.getRecordModel,userTimeZone:(0,a().r)(),intl:n})?{blockId:e.id,store:e,timestamp:t,authorPointer:o}:void 0})).filter(m().$K)}function C(e){const{pageItems:t}=e;return p().MR(t,(e=>{let{timestamp:t}=e;return t})).reverse()}function x(e){const{rootStore:t}=e,o=e.shouldSkipItemTypes??k,n=e.shouldShowItemTypes??w,i=[],r=new Set,a=[t];for(;a.length>0;){const e=a.shift();if(r.has(e.id))continue;r.add(e.id);const s=M(e,t,o,n);i.push(...s.outlinerItems),a.unshift(...s.subtree)}return i}const T=new(o(431687).P)({debugName:"getOutlinerItemsStoresInSubtreePageMentions",memoizeRecursion:!1,deepEquals:!1,compute(e){var t;const n=null===(t=e.getTitleStore())||void 0===t?void 0:t.getValue(),i=o(955620).cCA(n);return e.getRecordStoreArray(e,i).filter((t=>t.getParentId()===e.id)).concat(e.getContentStores())}});function M(e,t,o,n){var r;const a=e.getType();if(a&&o.has(a)||(null===(r=e.getModel())||void 0===r||null===(r=r.getAliasTargetPointer())||void 0===r?void 0:r.table)===d().x_)return{outlinerItems:[],subtree:[]};if(a&&e!==t&&n.has(a))return{outlinerItems:[e],subtree:[]};const s=e.getType()===i().Ti.transclusionReference?e.getTransclusionReferenceTargetStore():e;if(!s)return{outlinerItems:[],subtree:[]};return{outlinerItems:[],subtree:T.getStateFor(s)}}function P(e){let{environment:t,draggingStores:o,parentStore:n,currentSpaceStore:i}=e;if(!t.currentUser.id)return!1;if(!o.every((e=>e.isNavigableBlock())))return!1;if(!(0,y().lQ)({environment:t,blocks:o}))return!1;if((null==n?void 0:n.table)===u().e0){return A({environment:t,teamStore:v().zX.createChildStore(i,{table:u().e0,id:n.id,spaceId:i.id})})}return!0}function A(e){let{environment:t,teamStore:o}=e;const n=t.currentUser.id;if(!o.isDefined())return!1;return!(o.getDisableTeamPageEdits()&&n&&!o.isOwner(n))&&o.canAddOrRemoveTopLevelPages()}function R(e){let{typeWithTeam:t,currentSpaceViewStore:o,sidebarState:n}=e;switch(t.type){case"team":return t.teamStore.getTeamPagesStores();case"bookmarks":return o.getBookmarkedPages();case"workspace":return o.getWorkspacePages();case"shared":return n.visibleSharedPagesStores;case"private":return n.visiblePrivatePagesStores;default:(0,m().t1)(t)}}function B(e){let{typeWithTeam:t,currentSpaceStore:o,currentSpaceViewStore:n}=e;switch(t.type){case"team":return t.teamStore.getTeamPagesStore();case"bookmarks":return n.getBookmarkedPagesStore();case"workspace":return o.getPagesStore();case"shared":return n.getSharedPagesStore();case"private":return n.getPrivatePagesStore();default:(0,m().t1)(t)}}function E(e){let{type:t,from:o}=e;switch(t){case"bookmarks":return n().tY.SidebarBookmark;case"workspace":return n().tY.SidebarWorkspace;case"shared":return"main_sidebar"===o?n().tY.SidebarShared:n().tY.SidebarSharedPane;case"private":return"main_sidebar"===o?n().tY.SidebarPrivate:n().tY.SidebarPrivatePane;case"team":return n().tY.SidebarTeam;case"teamSidebar":case"teamBrowserSearch":case"teamBrowserUnjoinedTeams":case"teamBrowserJoinedTeams":return n().tY.SidebarTeamBrowser;case l().g$:return n().tY.SidebarPublicPageTemplateIncludes;default:(0,m().t1)(t)}}function D(e){return x({rootStore:v().G.createChildStore(e,{table:c().iU,id:e.id}),shouldSkipItemTypes:k,shouldShowItemTypes:w})}function U(e){const{store:t,toOpen:o,environment:n,isTopLevelItem:i}=e;i&&s().Z.set({userId:n.currentUser.id,key:`Outliner-${t.id}`,value:o})}const F=(0,o(788860).vU)({updatedToday:{id:"sharedWithMePopover.updatedTodaySection.label",defaultMessage:"Updated today"},today:{id:"sharedWithMePopover.todaySection.label",defaultMessage:"Today"},updatedPastWeek:{id:"sharedWithMePopover.updatedPastWeekSection.label",defaultMessage:"Updated in the past week"},pastWeek:{id:"sharedWithMePopover.pastWeekSection.label",defaultMessage:"Past week"},updatedEarlier:{id:"sharedWithMePopover.updatedEarlierSection.label",defaultMessage:"Updated earlier"},earlier:{id:"sharedWithMePopover.earlierSection.label",defaultMessage:"Earlier"}});function N(e){const{section:t,isFirst:o}=e;switch(t){case"today":return o?b().Z.formatMessage(F.updatedToday):b().Z.formatMessage(F.today);case"past-week":return o?b().Z.formatMessage(F.updatedPastWeek):b().Z.formatMessage(F.pastWeek);case"earlier":return o?b().Z.formatMessage(F.updatedEarlier):b().Z.formatMessage(F.earlier);case"all":return;default:throw(0,m().t1)(t)}}function V(e){const t="today",o="past-week",n="earlier",i=(0,r().Uu)((0,a().r)()),s=i.valueOf(),l=i.minus({week:1}).valueOf(),c=p().vM(e,(e=>{let{timestamp:i}=e;return i>s?t:i>l?o:n}));let d=-1;return p().oA([t,o,n].map((e=>{const t=c[e];if(t&&0!==t.length)return{key:e,pages:t.map((e=>(d+=1,{...e,index:d})))}})))}const L=new Date("May 16 2024 08:00:00 GMT+0000").getTime();function O(){var e;const{currentUserSettingsStore:t,currentSpaceStore:o}=f().default.state;if(!o)return!0;const n=null==t||null===(e=t.getSettings())||void 0===e?void 0:e.signup_time,i=null==o?void 0:o.getCreatedTime();return(0,m().$K)(n)&&n>L||(0,m().$K)(i)&&i>L}function Z(e){const{spaceViewStore:t,type:o}=e,{currentUserSettingsStore:n}=f().default.state,i=t.getSpaceStore(),r=((null==i?void 0:i.getMemberCountFromPublicSpaceData())||0)<=1?10:5,a=i&&(null==n?void 0:n.hasUserPinnedToOutliner({spaceId:i.id,type:"shared"})),s={sortOption:{private:O()?"lastEdited":"manual",shared:a?"manual":"lastEdited"},truncationLimit:{private:r,shared:r,teamspaces:r}},l=p().TS(p().Xh(s),null==t?void 0:t.getSidebarSectionMenuConfig());return{sortOption:l.sortOption[o]??"manual",truncationLimit:l.truncationLimit[o]??5}}function j(e){const{spaceViewStore:t}=e;return"lastEdited"===Z({spaceViewStore:t,type:"private"}).sortOption}function K(e){let t,{environment:o,store:n,type:i}=e;switch(i){case"bookmarks":t=_().vu.Favorite;break;case"team":case"workspace":case"shared":case"private":t=_().vu.Link;break;default:(0,m().t1)(i)}g().Z.recordVisit({id:n.id,systemBlockType:n.getSystemBlockTypeStore().getValue(),type:t,currentUserId:o.currentUser.id})}const z={bookmarks:"favorites",team:"teamspaces",workspace:"workspace",shared:"shared",private:"private",teamSidebar:void 0,teamBrowserSearch:void 0,teamBrowserUnjoinedTeams:void 0,teamBrowserJoinedTeams:void 0,publicPageTemplateIncludes:void 0},H={favorites:"bookmarks",teamspaces:"team",workspace:"workspace",shared:"shared",private:"private"},q=["favorites","workspace","teamspaces","shared","private"],W=["favorites","private","teamspaces","shared"],G=["favorites","teamspaces","shared","private"];function $(){const{currentSpaceStore:e,currentSpaceViewStore:t}=f().default.state,o=O(),n=(0,h().R3)({isGuest:(0,S().Cx)(e),numWorkspacePages:(null==t?void 0:t.getWorkspacePages().length)||0})?q:o?W:G;if(!t)return n;const i=t.getSidebarOrder(),r=p().jj(i),a=n.filter((e=>!r.includes(e)));return[...r,...a]}function Q(e){let{sidebarOrder:t,sidebarState:o,lockedSidebarExpEnabled:n}=e;if(!o)return t;return t.filter((e=>{switch(e){case"workspace":return o.showWorkspaceSection;case"favorites":return o.showBookmarksSection;case"private":return o.showPrivateSection;case"shared":return o.showSharedSection||n;case"teamspaces":return o.showTeamSection||n;default:(0,m().t1)(e)}}))}},459805:(e,t,o)=>{o.d(t,{G$:()=>a,MF:()=>s,PP:()=>i,Z3:()=>r});const n=4,i="150ms ease";function r(){return{borderRadius:6}}function a(e){let{isMobile:t}=e;return t?{}:{borderRadius:6,display:"flex",marginLeft:0,marginRight:0,transition:`background ${i}`}}function s(){return{paddingLeft:12-n,paddingRight:12-n}}},254213:(e,t,o)=>{o.d(t,{z:()=>n});const n=900},191586:(e,t,o)=>{o.d(t,{CX:()=>S,OZ:()=>C,Ow:()=>y,RH:()=>x,Wt:()=>_,a_:()=>h,bm:()=>b,di:()=>P,du:()=>k,kC:()=>w,mO:()=>I,uU:()=>M,y6:()=>v,yp:()=>T,zL:()=>g});o(670560),o(267602),o(30005);var n=()=>o(156642),i=()=>o(109477),r=()=>o(305580),a=()=>o(752778),s=()=>o(942226),l=()=>o(275200),c=()=>o(311562),d=()=>o(482162),u=()=>o(826955),p=()=>o(718959),m=()=>o(148976),f=()=>o(239482);const g=900;function v(e){const t=e.getAssociatedCollectionStore();if(!t)return;const o=e.getSchema(),n=t.getFormat();return(0,r().i)(n,o,void 0,i().j5.Collection)}function h(e){if(e.isCollectionView()){const t=e.getCollectionViewSourceCollectionStore();return!!t&&t.isSyncedCollection()}return e.isType(n().Ti.externalObjectInstancePage)}function _(e){if(!(0,m().K6)())return!1;const t=e.getParentStore();if((null==t?void 0:t.table)===a().vF){const e=t.getFormat();return!(null==e||!e.external_collection_type)}return!1}function b(e){if(!(0,m().Uo)())return!1;const t=e.getAssociatedCollectionStore();if(t){const e=t.getFormatStore(),o=e.getKeyStore("sync_state").getValue(),n=e.getKeyStore("app_config_uri").getValue();if(null!=o&&o.enable_two_way_sync&&(null==o||!o.syncing)&&"notion://tasks_collection"===n)return!0}return!1}function y(e){if(!(0,m().K6)())return!1;const t=f().uJ(e),o=[];t.forEach((e=>{e instanceof u().zX||o.push(e)}));const n=o.find((e=>_(e)));return Boolean(n)}function S(e){return!e.hasContent()&&(!e.isCollectionView()||e.isType("collection_view_page")&&e.isCollectionViewPageWithContent())}function w(e,t){const o={width:"100%",display:"flex",flexDirection:"column",alignItems:"center",flexShrink:0,flexGrow:0};return e.isCollectionView()&&(e.isNonEditableState()&&(o.cursor="default"),l().eA(t)&&(o.position="sticky",o.left=0)),o}function k(e,t,o){return I(e,t,o)?"100%":g}function I(e,t,o){if(t===c().S.CollectionPageView)return!0;const{device:n}=o,{isPhone:i}=n,r=e.isFullWidth(),a=e.isCollectionView(),s=C(t);return r&&!i||a||s||i}function C(e){return e===c().S.PeekView}function x(e,t){if(e===c().S.PeekView){const e=d().default.getPeekMode();return d().PeekModePadding.horizontal[e]}return(0,p().ui)(t)}function T(e){return(0,s().wq)(e)&&(d().default.isSidePeekOpen()||d().default.isSidePeekClosingStore.state)}function M(e,t){return t.device.isMobile?16:C(e)||e===c().S.Form?32:80}function P(e){return e.device.isMobile?12:4}},693622:(e,t,o)=>{o.d(t,{E:()=>s,c:()=>l});var n=()=>o(824462),i=()=>o(738483),r=()=>o(363127),a=()=>o(838266);function s(e){const{environment:t,onSubmit:o,onCancel:n}=e;t.device.isMobile?i().Z.setState({open:!0}):a().default.setState({open:!0,openedFrom:"login",currentTab:"profile",defaultSubtab:void 0,highlightedSetting:void 0}),r().default.setState({open:!0,setNewPassword:!0,password:"",repeatPassword:"",isSet:!1,onSubmit:o,onCancel:n})}async function l(e){const{environment:t,userEmail:o}=e,i=await n().callApi({eventName:"getLoginOptions",environment:t,data:{email:o}});if("failed"===i.type)return{error:i.error};const r=i.data;return{value:{isSamlEnforced:"required"===r.samlSignIn,didLogInWithSaml:"available"===r.samlSignIn&&"saml"===r.lastLoginMethod,hasPassword:"required"!==r.samlSignIn&&r.passwordSignIn}}}},239482:(e,t,o)=>{o.d(t,{AT:()=>M,D0:()=>Y,Dg:()=>N,Eb:()=>B,KU:()=>j,Om:()=>D,Pj:()=>O,RC:()=>X,VP:()=>Z,YV:()=>q,_A:()=>z,e3:()=>$,eG:()=>A,fJ:()=>R,fM:()=>V,fl:()=>H,n3:()=>Q,nR:()=>W,oZ:()=>J,s:()=>E,tM:()=>K,u3:()=>L,uJ:()=>U,wf:()=>F,yI:()=>G});o(670560),o(267602),o(916054),o(653476),o(470928),o(30005),o(241792),o(228244);var n=()=>o(156642),i=()=>o(728670),r=()=>o(933868),a=()=>o(160916),s=()=>o(217465),l=()=>o(715228),c=()=>o(494616),d=()=>o(922713),u=()=>o(396136),p=()=>o(321394),m=()=>o(752778),f=()=>o(139978),g=()=>o(602299),v=()=>o(542973),h=()=>o(483791),_=()=>o(278191),b=()=>o(255933),y=()=>o(306164),S=()=>o(513670),w=()=>o(696459),k=()=>o(876822),I=()=>o(826955),C=()=>o(852465);function x(e,t){const{table:o,id:n,spaceId:i}=t,r=i||e.pointer.spaceId;if(o===m().vF)return I().NW.createChildStore(e,{table:m().vF,id:n});if(o===b().bx)return I().H2.createChildStore(e,{table:b().bx,id:n});if(o===u().iU)return I().G.createChildStore(e,{table:u().iU,id:n});if(o===f().np)return I().Xr.createChildStore(e,{table:f().np,id:n,spaceId:r});if(o===g().x_){if(r)return I().T5.createChildStore(e,{table:g().x_,id:n,spaceId:r})}else if(o===v().qF){if(r)return I().jQ.createChildStore(e,{table:v().qF,id:n,spaceId:r})}else if(o===y().e0){if(r)return I().zX.createChildStore(e,{table:y().e0,id:n,spaceId:r})}else if(o===d().Xj){if(r)return I().zq.createChildStore(e,{table:d().Xj,id:n,spaceId:r})}else if(o===c().cv){if(r)return I().Mz.createChildStore(e,{table:c().cv,id:n,spaceId:r})}else if(o===p().pC&&r)return I().b4.createChildStore(e,{table:p().pC,id:n,spaceId:r})}function T(e){const t=k().default.state.mainEditorCurrentBlockStore;return t?t.inMemoryRecordCache!==e.inMemoryRecordCache?e:t:e}function M(e){const t=T(e);return((o=e)instanceof I().G||o instanceof I().H2||o instanceof I().NW||o instanceof I().T5||o instanceof I().jQ||o instanceof I().zX||o instanceof I().zq||o instanceof I().Mz||o instanceof I().b4)&&e.getRecordStoreUIParent()===t?e:x(t,e.pointer);var o}const P=new(o(431687).P)({debugName:"getPermissionsPathStores",memoizeRecursion:!0,deepEquals:!1,compute:function(e,t){const n=e.getValue();if(!n||!(0,o(251887).oK)(n))return[e];const i=e instanceof I().G&&e.getPermissionsParentPointer()||o(827370).dr.getParentPointerFromRecordWithParent(n),r=x(T(e),i);return r?[e].concat(t(r)):[e]}});function A(e){const t=M(e);return t?P.getStateFor(t):[]}function R(e){return S().oA(A(e).map((e=>{if("space"===e.table){if(!(0,C().Mm)(e))return;return e.getModel()}if("block"===e.table){const{pointer:t}=e,o=(0,I().Vh)(e,t,"alive").getValue(),n=(0,I().Vh)(e,t,"parent_id").getValue(),i=(0,I().Vh)(e,t,"type").getValue();if(void 0!==o&&void 0!==n&&void 0!==i)return e.getModel()}else if(e.table===y().e0){const{pointer:t}=e;if(!(0,I().Vh)(e,t,"settings").getValue())return;return e.getModel()}})))}function B(e){const{store:t,teamPermissionItems:o}=e,n=s().RecordMap.create(),i=O(t)||k().default.state.currentSpaceStore;return i&&o.forEach((e=>{const t=I().zX.createChildStore(i,{table:y().e0,id:e.team_id,spaceId:i.id});n.setModel({id:t.id,table:y().e0,spaceId:i.id},t.getModel())})),n}async function E(e){const t=[];return await i().ne(e.pointer,a().zF.fromMonomorphicFunctionUnsafe((async o=>{let n;if(o.table===m().vF?n=I().NW.createChildStore(e,o):o.table===b().bx?n=I().H2.createChildStore(e,o):o.table===u().iU?n=I().G.createChildStore(e,o):o.table===f().np?n=I().Xr.createChildStore(e,o):o.table===g().x_?n=I().T5.createChildStore(e,o):o.table===v().qF&&(n=I().jQ.createChildStore(e,o)),n)return t.push(n),await n.load(),n.getValue()}))),t}function D(e){const t=I().t1.fromV1(e);if(t instanceof I().G||t instanceof I().NW){const e=t.getParentTable(),o=t.getParentId();if(e&&o){if(e===m().vF)return I().NW.createChildStore(t,{table:m().vF,id:o});if(e===b().bx)return I().H2.createChildStore(t,{table:b().bx,id:o});if(e===u().iU)return I().G.createChildStore(t,{table:u().iU,id:o});if(e===g().x_)return I().T5.createChildStore(t,{table:g().x_,id:o,spaceId:t.getSpaceId()});if(e===y().e0)return I().zX.createChildStore(t,{table:y().e0,id:o});if(e===d().Xj)return I().zq.createChildStore(t,{table:d().Xj,id:o,spaceId:t.getSpaceId()});if(e===_().AT)return I().Vf.createChildStore(t,{table:_().AT,id:o,spaceId:t.getSpaceId()});if(e===f().np)return I().Xr.createChildStore(t,{table:f().np,id:o,spaceId:t.getSpaceId()});if(e===h().Bh)return I().xj.createChildStore(t,{table:h().Bh,id:o,spaceId:t.getSpaceId()});if(e===p().pC)return I().b4.createChildStore(t,{table:p().pC,id:o,spaceId:t.getSpaceId()});if(e===l().t_)return I().uj.createChildStore(t,{table:l().t_,id:o,spaceId:t.getSpaceId()});(0,w().t1)(e)}}}function U(e){return A(e).filter(((e,t)=>{if(!e.canRead())return!1;if(e instanceof I().G){const o=e.getType();return e.isPostCollectionBlock()?0===t:o&&(0,n().S9)(o)}return e instanceof I().zX}))}function F(e){const t=A(e).find((e=>{let t;return(e instanceof I().G||e instanceof I().NW)&&(t=e.getAlive()),!1===t}));return Boolean(t)}function N(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const o=U(e)[t];return o instanceof I().zX?N(o,t+1):o}function V(e){return e.findRecordStoreUIAncestor((e=>e instanceof I().G&&(0,n().S9)(e.getType()))).ancestor}function L(e){const t=U(e);return t[t.length-1]}function O(e){return A(e).find((e=>e.table===b().bx))}function Z(e){const t=A(e);return t.find((e=>e.table===y().e0))}function j(e){return e.find((e=>e.table===y().e0))}function K(e){const t=A(e);if(t.some((e=>e.table===u().iU&&e.isPost())))return t.find((e=>e.table===y().e0))}function z(e){return A(e).find((e=>{var t;return e.table===u().iU&&(null===(t=e.getCollectionStore())||void 0===t?void 0:t.isPageTreeCollection())}))}function H(e){for(const t of e)if((t instanceof I().G||t instanceof I().NW)&&(!t.isDefined()||!t.getAlive()))return!1;return!0}function q(e){for(const t of e)if(t instanceof I().G||t instanceof I().NW){if(!t.isDefined())continue;if(!t.getAlive())return t}}function W(e){for(const t of e)if(t instanceof I().G){if(!t.isDefined())continue;if(t.getPermissionItems().some(r().gG))return t}}function G(e){return Boolean(q(e))}function $(e){for(const t of e)if(t instanceof I().G){if(!t.isDefined())continue;const e=t.getMovedStore().getValue();if(void 0!==e)return{store:t,moved:e}}}function Q(e){return"block"===e.table||"space"===e.table||"collection"===e.table||"comment"===e.table||"discussion"===e.table||"team"===e.table||"automation_action"===e.table||"automation"===e.table||"skill"===e.table||"collection_view"===e.table||"layout"===e.table||"channel"===e.table||"assistant_chat_session"===e.table}function Y(e){const t=A(e).find((e=>{if(e.table===y().e0)return Boolean(e.getArchivedBy())}));return Boolean(t)}function J(e){const t=A(e);for(const o of t)if(o.table===b().bx)return o.getSettings().space_request}function X(e){const{environment:t,store:o}=e,n=t.currentUser.id;if(!n)return!1;const i=A(o),a=i.every((e=>Boolean(e.isReady())));if(!a)return;const s=!i.some((e=>Boolean(e instanceof I().G&&!e.isDefined())));if(!s)return!1;const l=i.some((e=>{if(e instanceof I().G){const t=(e.getPermissionItemsStore().getValue()||[]).find((e=>(0,r().$D)(e)||(0,r().hV)(e)||(0,r().Ir)(e)||(0,r().RI)(e)||(0,r().ZQ)(e)||(0,r().jg)(e)&&e.user_id!==n));return Boolean(t)}return e instanceof I().zX}));return!l}},189629:(e,t,o)=>{o.d(t,{n:()=>i});var n=()=>o(749826);function i(){return"on"===n().default.getEligibleGroup({experimentId:"pdf_importer",defaultGroup:"control"})}},942226:(e,t,o)=>{o.d(t,{KA:()=>a,MI:()=>u,Tx:()=>s,mH:()=>l,my:()=>d,wq:()=>c});var n=()=>o(505121),i=()=>o(482162),r=()=>o(965903);const a=120;function s(){return i().default.isCenterPeekOpen()||r().default.isInPeekRenderer()}function l(){const e=i().default.state;return e.open&&(s()||e.isOpening)}function c(e){return Boolean(e.findRecordStoreUIAncestor((e=>e===i().default.peekTargetStore.state)).ancestor)}function d(){const e=window.innerWidth;return e>2*i().SIDEPEEK_MIN_WIDTH?e*(2/3):e}function u(e){const t=n().Z.state;return Math.min(e.WindowSizeStore.state.width-2*i().PeekModeOuterPadding,i().CenterPeekModeOuterWidth+t)}},122479:(e,t,o)=>{o.d(t,{Aw:()=>le,Dt:()=>ee,EY:()=>se,IJ:()=>N,Ix:()=>$,JI:()=>K,KE:()=>Q,RL:()=>oe,S4:()=>O,SO:()=>W,U7:()=>Y,UK:()=>j,WE:()=>ne,Xu:()=>H,YO:()=>F,Z9:()=>q,eL:()=>ce,mU:()=>J,r_:()=>G,rc:()=>X,u$:()=>Z,uY:()=>ie,yi:()=>z,zT:()=>ae});o(159867),o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(470928),o(30005),o(241792),o(228244);var n=o.n(o(39593)),i=()=>o(435308),r=()=>o(799891),a=()=>o(530980),s=()=>o(728670),l=()=>o(80685),c=()=>o(528514),d=()=>o(933868),u=()=>o(217465),p=()=>o(422894),m=()=>o(396136),f=()=>o(255933),g=()=>o(611940),v=()=>o(243225),h=()=>o(306164),_=()=>o(989478),b=()=>o(513670),y=()=>o(342792),S=()=>o(696459),w=()=>o(591914),k=()=>o(587565),I=()=>o(876822),C=()=>o(467806),x=()=>o(257934),T=()=>o(890324),M=()=>o(826955),P=()=>o(18281),A=()=>o(697623),R=()=>o(897257),B=()=>o(718959),E=()=>o(239482),D=()=>o(852465),U=()=>o(345918);function F(e){const t=E().fJ(e),o=c().KJ(t);return c().YO(o)}function N(e,t){if(e.defaultRecordCache.inMemoryRecordCache!==t.inMemoryRecordCache)return L(e,t);const o=`${e.currentUser.id}:${t.table}:${t.id}`,n=V.get(o);if(n)return n.state;const r=new(i().default)((()=>L(e,t)),{debugName:`userHasPermissionViaPublicAccess:${t.id}`});return V.set(o,r),r.state}const V=new(n())({max:30,maxAge:o(326966).hM,updateAgeOnGet:!0});function L(e,t){const{id:o}=e.currentUser;if((0,U().C)()&&(0,U().Fn)(e))return;let n;o&&(n={table:_().KJ,id:o});const i=(0,E().AT)(t)||t,r=(0,k().bi)({recordPointers:new(p().X)([t.pointer]),actorPointers:new(p().X)(void 0===n?[]:[n]),getRecordModel:i.getRecordModel}),{currentUserStore:a}=I().default.state;return(0,k().r$)({actor:null==a?void 0:a.getModel(),recordPointer:t.pointer,permissionsContext:r})}function O(e){return F(e).map((e=>{let{permissionItem:t}=e;return t})).some((e=>d().$D(e)&&d().YX(e.role)&&(void 0===e.allow_duplicate||!0===e.allow_duplicate)))}function Z(e){return F(e).map((e=>{let{permissionItem:t}=e;return t})).some((e=>d().$D(e)))}function j(e){return F(e).map((e=>{let{permissionItem:t}=e;return t})).some((e=>d().Ir(e)))}async function K(e){const{currentUserRootStore:t}=I().default.state;if(!t)return!1;if(!(0,y().e)(e))return!1;const o=M().G.createChildStore(t,{table:m().iU,id:e});return await o.load(),Z(o)}function z(e,t){const o=F(t);if(1===o.length){const t=o[0].permissionItem;return"user_permission"===t.type&&d().zz(t.role)&&t.user_id===e.currentUser.id}return!1}function H(e){const{subscriptionData:t,newGuestIds:o}=e;if(!t)return!1;const n=(0,A().c4)(t);if(void 0===n)return!1;const i=P().ND(t).map((e=>e.userId)),r=P().hn(t).map((e=>e.userId)),a=new Set([...i,...o]);for(const l of r)a.delete(l);const s=Math.max(n,i.length);return a.size>s}function q(e,t){if(!e)return!1;const o=(0,A().c4)(e);return void 0===o||t<o}function W(e){const{store:t,permissionItems:o}=e;if(t instanceof M().H2)return!1;const n=R().subscriptionDataStoreInstance.state;if(!n)return!1;return H({subscriptionData:n,newGuestIds:o.filter(d().jg).filter((e=>"none"!==e.role)).map((e=>e.user_id))})}function G(e){return{editor:"Full access",read_and_write:"Can edit",comment_only:"Can comment",reader:"Can read",none:"No access"}[e]}function $(e){return!!e&&(e.hasPublicPermission&&"edit"!==e.permission)}function Q(e){let{environment:t,blockStore:o}=e;const n=o.getParentStore();if(!n)return!1;return!$(E().n3(n)&&T().Z.getMode(t,n))&&n.canEdit()}function Y(){const{currentSpaceStore:e}=I().default.state;return"enterprise"===(null==e?void 0:e.getSubscriptionTier())}async function J(e,t){const o=new Set;var n;if((0,D().Y)(e))null===(n=e.getPermissionItems())||void 0===n||n.forEach((e=>{d().jg(e)&&o.add(e.user_id)}));else if(e instanceof M().G)e.getPermissionItems().forEach((e=>{d().jg(e)&&o.add(e.user_id)}));else if(e instanceof M().H2){const n=t.filter(x().fZ).map((t=>(0,w().VK)(e,t.value.id)));for(const e of n)await e.load(),e.isDefined()&&e.isMember()&&o.add(e.getUserId())}else(0,S().t1)(e);return t.filter((e=>"existingUser"!==e.type||!o.has(e.value.id)))}function X(e){const t=(0,B().np)();if(!t||!e)return;const o=ee({userId:e,store:t}).role;return o&&!c().oF(o)?o:void 0}function ee(e){let{userId:t,store:o}=e;return ne({userId:t,store:o})[0]}function te(e){const{explicitTeamsRecordMap:t,actorPointers:o,getRecordModelFnFallback:n,logErrorFn:i}=e,s=e.ancestorsRecordMap?e.ancestorsRecordMap:u().RecordMap.create(),c=a().omK.fromRecordMap(s),d=a().omK.fromRecordMap(t),m=a().omK.tryUntilFound(c,d,n),f=new(p().X)(o),g=(0,l().GK)({recordMap:s,getRecordModelFnWithMaybeMissingRecords:m,actorPointers:f,logErrorFn:i??(e=>{const{from:t,type:o,error:n,data:i}=e;r().log({level:"error",from:t,type:o,error:{name:n.name,message:n.message,stack:n.stack},data:{miscDataToConvertToString:i}})})});return{ancestorsRecordMap:s,explicitTeamsRecordMap:t,actorPointersSet:f,actorMemberships:g,spacesForSpaceMemberComputation:oe({ancestorsRecordMap:s,getRecordModel:m}),enabledTrustedDomainMap:void 0}}function oe(e){const{ancestorsRecordMap:t,getRecordModel:o}=e,n=new Set;for(const{pointer:a}of t)if(a.table===v().WU){const{spaceId:e}=(0,v().KQ)(a.id);n.add(e)}else if(a.table===g().Zx){const{spaceId:e}=(0,g().td)(a.id);n.add(e)}for(const a of n){const e={table:f().bx,id:a};t.has(e)&&n.delete(a)}if(n.size<=0)return;const i=Array.from(n),r=u().RecordMap.create();return i.forEach((e=>{const t={table:f().bx,id:e},n=o(t);n&&r.addModel(n)})),r}function ne(e){let{userId:t,store:o}=e;const n=s().DW(o.pointer,o.getRecordModel),i=E().Pj(o)||I().default.state.currentSpaceStore,r=i&&i.isDefined()&&!n.findLast(c().zX)?[...n,i.getModel()]:n,a=u().RecordMap.create();r.forEach((e=>{a.setModel(e.pointer,e)}));const l=F(o),p=E().VP(o),m=l.filter((e=>{let{permissionItem:t}=e;return(d().zU(t)||d().LW(t))&&t.team_id!==(null==p?void 0:p.id)})).map((e=>e.permissionItem)),f=E().Eb({store:o,teamPermissionItems:m}),g={table:_().KJ,id:t},v=te({actorPointers:[g],explicitTeamsRecordMap:f,ancestorsRecordMap:a,getRecordModelFnFallback:o.getRecordModel}),h=(0,k().qY)({actorPointer:g,ancestors:r,permissionsContext:v}).map((e=>e.permissionItem));if(0===h.length)return[{type:"user_permission",role:"none",user_id:t}];const y=b().oA(h.map((e=>e.role))),S=c().nl(...y);return h.filter((e=>e.role===S)).sort(re)}function ie(e){let{userId:t,store:o,userPermissionGroupIds:n}=e;const i=s().DW(o.pointer,o.getRecordModel),r=E().Pj(o)||I().default.state.currentSpaceStore,a=r&&r.isDefined()&&!i.findLast(c().zX)?[...i,r.getModel()]:i,l=u().RecordMap.create();a.forEach((e=>{l.setModel(e.pointer,e)}));const p=F(o),f=E().VP(o),g=p.filter((e=>{let{permissionItem:t}=e;return(d().zU(t)||d().LW(t))&&t.team_id!==(null==f?void 0:f.id)})).map((e=>e.permissionItem)),v=E().Eb({store:o,teamPermissionItems:g}),b={table:_().KJ,id:t},y=te({actorPointers:[b],explicitTeamsRecordMap:v,ancestorsRecordMap:l,getRecordModelFnFallback:o.getRecordModel}),S=(0,k().qY)({actorPointer:b,ancestors:a,permissionsContext:y}),w=[...S];S.find((e=>"user_permission"===e.permissionItem.type))||w.push({permissionItem:{type:"user_permission",role:"none",user_id:t},from:{table:m().iU,blockId:o.id}});const C=R().subscriptionDataStoreInstance.state,x=new Set(C?P().ND(C).map((e=>e.userId)):[]);if(null!=x&&x.has(t))return w.sort(((e,t)=>re(e.permissionItem,t.permissionItem))).reverse().sort(((e,t)=>d().xm[t.permissionItem.role??"none"]-d().xm[e.permissionItem.role??"none"]));!S.find((e=>"explicit_team_permission"===e.permissionItem.type&&e.permissionItem.team_id===(null==f?void 0:f.id)))&&f&&f.isNonGuestMember(t,n)&&w.push({permissionItem:{type:"explicit_team_permission",role:"none",team_id:f.id},from:{table:h().e0,teamId:f.id}});!S.find((e=>"explicit_team_owner_permission"===e.permissionItem.type&&e.permissionItem.team_id===(null==f?void 0:f.id)))&&f&&f.isOwner(t)&&w.push({permissionItem:{type:"explicit_team_owner_permission",role:"none",team_id:f.id},from:{table:h().e0,teamId:f.id}});return S.find((e=>"space_permission"===e.permissionItem.type))||w.push({permissionItem:{type:"space_permission",role:"none"},from:{table:m().iU,blockId:o.id}}),w.sort(((e,t)=>re(e.permissionItem,t.permissionItem))).reverse().sort(((e,t)=>d().xm[t.permissionItem.role??"none"]-d().xm[e.permissionItem.role??"none"]))}function re(e,t){const o=d().jg(e),n=d().jg(t);if(o||n)return o&&n?0:o?-1:1;const i=d().hV(e),r=d().hV(t);if(i||r)return i&&r?0:i?-1:1;const a=d().Lq(e),s=d().Lq(t);return a||s?a&&s?0:a?-1:1:0}function ae(e){const{botStore:t,addPermission:o}=e,n=o?c().uH(t.getCapabilities()):"none",i=t.getParentId(),r=t.getParentTable();let a={type:"bot_permission",bot_id:t.id,role:n};return i&&r&&(a={type:"bot_permission",bot_id:t.id,role:n,parent_id:i,parent_table:r}),a}function se(e){const t=e.getParentBlockStore();return!t||t.pathIsDead()}function le(e){const t=e.getParentBlockStore();return(null==t?void 0:t.isLocked())??!0}function ce(){return C().Z.state.permissionGroupsAndMemberCounts.length}},88476:(e,t,o)=>{o.d(t,{Aw:()=>T,Bu:()=>R,DF:()=>B,Ji:()=>O,NN:()=>A,Nd:()=>M,OA:()=>N,ZK:()=>L,Zp:()=>E,a_:()=>F,cm:()=>P,fR:()=>K,gQ:()=>Z,t0:()=>j,xT:()=>U,z5:()=>D});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(470928),o(30005),o(241792),o(228244),o(667294);var n=()=>o(163262),i=()=>o(956057),r=()=>o(933868),a=()=>o(396136),s=()=>o(255933),l=()=>o(499110),c=()=>o(788860),d=()=>o(568017),u=()=>o(696459),p=()=>o(707513),m=()=>o(930085),f=()=>o(308186),g=()=>o(591914),v=()=>o(876822),h=()=>o(896014),_=()=>o(826955),b=()=>o(18281),y=()=>o(697623),S=()=>o(897257),w=()=>o(718959),k=()=>o(527278),I=()=>o(852465),C=()=>o(907099),x=o(785893);async function T(e){let{environment:t,permissionsInviteStoreState:o,from:n}=e;const i=(0,x.jsx)(c()._H,{id:"permissionsInvite.closeInviteDialog.confirmationMessage",defaultMessage:"Your changes have not been saved. Discard changes?"}),r=(0,x.jsx)(c()._H,{id:"permissionsInvite.closeInviteDialog.confirmationButton.label",defaultMessage:"Yes"}),a=(0,x.jsx)(c()._H,{id:"permissionsInvite.closeInviteDialog.cancelButton.label",defaultMessage:"Cancel"});if(o.inviteTargets.length>0){const{accept:e}=await f().gt({message:i,acceptLabel:r,cancelLabel:a});return m().q_(t,{...F(t,o),from:n,discard_changes:e}),!e}return!1}function M(e){const{target:t,permissionsInviteStore:o}=e;return o.state.inviteTargets.find((e=>"newUser"===t.type?"newUser"===e.type&&t.value.email===e.value.email:"group"===t.type?e.type===t.type&&e.value.group_id===t.value.group_id:e.type===t.type&&e.value.id===t.value.id))}function P(e){const{targetStore:t,permissionsInviteStore:o,userTarget:n}=e;return!!M({permissionsInviteStore:o,target:n})||"existingUser"===n.type&&E({target:n,store:t})}function A(e){const{targetStore:t,permissionsInviteStore:o,currentInviteActors:i}=e;if(!i)return{inviteUsers:[],inviteGroups:[],inviteBots:[]};if((0,I().R$)(t))return i;const r=i.inviteUsers.filter((e=>!P({targetStore:t,permissionsInviteStore:o,userTarget:e})));return{inviteBots:i.inviteBots.filter((e=>!(!e.value.alive||M({permissionsInviteStore:o,target:e})||!(0,n().oA)(e.value)&&!(0,n().c9)(e.value))&&!E({target:e,store:t}))),inviteGroups:i.inviteGroups.filter((e=>!M({permissionsInviteStore:o,target:e})&&!E({target:e,store:t}))),inviteUsers:r,importedContacts:i.importedContacts}}function R(e,t){if(!e||!t||0===e.length||0===t.length)return t;const o=new Set(e.map((e=>e.value.email.toLowerCase())));return t.filter((e=>!o.has(e.value.email.toLowerCase())))}function B(e){const{intl:t,target:o}=e;switch(o.type){case"newUser":return o.value.email;case"existingUser":return(0,l().Nz)(t,o.value);case"bot":return(0,n().Mh)(o.value);case"group":return(0,C().kF)({intl:t,groupName:o.value.name});default:(0,u().t1)(o)}}function E(e){const{target:t,store:o}=e;if(!o.isDefined())return!1;if((0,I().Y)(o)){const e=t.type;if("existingUser"===e){const e=o.getRawMembership().find((e=>"user"===e.entity_type&&e.user_id===t.value.id));return Boolean(e&&"none"!==e.type)}return"group"===e?o.getRawMembership().some((e=>"group"===e.entity_type&&e.group_id===t.value.group_id)):("bot"===e||"newUser"===e||(0,u().P)(e),!1)}return o instanceof _().G?o.getPermissionItems().some((e=>{switch(t.type){case"existingUser":return(0,r().jg)(e)&&e.user_id===t.value.id;case"bot":return(0,r().FB)(e)&&e.bot_id===t.value.id;case"group":return(0,r().hV)(e)&&e.group_id===t.value.group_id;case"newUser":return!1;default:return(0,u().t1)(t)}})):o instanceof _().H2?"existingUser"===t.type?Boolean((0,g().VK)(o,t.value.id).isMember()):"bot"===t.type&&Boolean((0,g().Wz)(o,t.value.id).isMember()):!(0,I().R$)(o)&&void(0,u().t1)(o)}function D(e){const{environment:t,permissionsInviteStore:o,store:n,renderInShareModal:r}=e;o.setState({modalOpen:!r,tokenQuery:"",inviteTargets:[],inviteRole:U(e),isInviteTargetsEmpty:!0,table:(0,I().Mm)(n)?s().bx:a().iU,flowId:i().Il(),inputFocus:"invitee",emailMessage:""}),(0,I().Mm)(n)?m().$z(t):m().Mq(t,{...F(t,e.permissionsInviteStore.state)})}function U(e){const{store:t,isSubscribed:o}=e;return(0,I().Mm)(t)?o?"read_and_write":"editor":(0,y().Mk)()?"editor":"read_and_write"}function F(e,t){var o;const{isInviteTargetsEmpty:n,inviteRole:i,flowId:r}=t,a=(0,w().np)(),s=null==a?void 0:a.getRole(),l=null===(o=v().default.state.currentSpaceStore)||void 0===o?void 0:o.getRole(),{inviteTargets:c,emailMessage:d}=t,u=(0,y().zt)(),p={invite_flow_id:r,user_count:0,is_bot:!1,invite_message_length:(null==d?void 0:d.length)??0,...s&&{page_current_user_role:s},...l&&{space_role:l},...u&&{subscription_tier:u}};if(n)return p;if(0===c.length)return p;if(function(e){return e.length>0&&"bot"===e[0].type}(c))return{...p,is_bot:!0};const m=c.filter(h().cl).length,f=c.filter(h().fZ).length+m;return{...p,role:i,user_count:f,new_user_count:m}}function N(e){return"newUser"===e.type||"existingUser"===e.type&&("none"===e.spaceRole||"not_in_space"===e.spaceRole)}const V=(0,c().vU)({workspaceOwnerTooltip:{id:"inviteUserModal.userRole.workspaceOwnerBadge.tooltip",defaultMessage:"{ userNameAndEmail} is a workspace owner in this workspace"},workspaceOwnerBadge:{id:"inviteUserModal.userRole.workspaceOwnerBadge.label",defaultMessage:"Workspace Owner"},adminTooltip:{id:"inviteUserModal.userRole.adminBadge.tooltip",defaultMessage:"{ userNameAndEmail} is an admin in this workspace"},adminBadge:{id:"inviteUserModal.userRole.adminBadge.label",defaultMessage:"Admin"},membershipAdminTooltip:{id:"inviteUserModal.userRole.membershipAdminBadge.tooltip",defaultMessage:"{ userNameAndEmail} is a membership admin in this workspace"},membershipAdminBadge:{id:"inviteUserModal.userRole.membershipAdminBadge.label",defaultMessage:"Membership admin"},memberTooltip:{id:"inviteUserModal.userRole.memberBadge.tooltip",defaultMessage:"{ userNameAndEmail} is a member in this workspace"},memberBadge:{id:"inviteUserModal.userRole.memberBadge.label",defaultMessage:"Member"},guestTooltip:{id:"inviteUserModal.userRole.guest.tooltip",defaultMessage:"{ userNameAndEmail} is a guest in this workspace"},guestBadge:{id:"inviteUserModal.userRole.guestBadge.label",defaultMessage:"Guest"}});function L(e){const{environment:t,customStyle:o}=e,{device:n}=t;return{display:"inline-flex",height:18,textTransform:"uppercase",fontSize:10,marginBottom:2,fontWeight:p().Ue.medium,letterSpacing:1,color:d().ZP.uiLightGray,border:`1px solid ${d().ZP.uiLightGray}`,minWidth:70,alignItems:"center",justifyContent:"center",paddingTop:n.isAndroid?2:1,paddingBottom:1,paddingLeft:3,paddingRight:3,borderRadius:4,...o}}function O(e){const{role:t,intl:o,nameOrEmail:n}=e,i=n||o.formatMessage({id:"userTypeTooltip.generalPerson",defaultMessage:"This person"});switch(t){case"editor":return{tooltip:o.formatMessage(V.workspaceOwnerTooltip,{userNameAndEmail:i}),userRoleBadge:o.formatMessage(V.workspaceOwnerBadge)};case"membership_admin":return{tooltip:o.formatMessage(V.membershipAdminTooltip,{userNameAndEmail:i}),userRoleBadge:o.formatMessage(V.membershipAdminBadge)};case"read_and_write":return{tooltip:o.formatMessage(V.memberTooltip,{userNameAndEmail:i}),userRoleBadge:o.formatMessage(V.memberBadge)};case"none":return{tooltip:o.formatMessage(V.guestTooltip,{userNameAndEmail:i}),userRoleBadge:o.formatMessage(V.guestBadge)};default:(0,u().t1)(t)}}function Z(e){return N(e)?"rgba(246, 192, 80, 0.26)":void 0}function j(e){var t;const{inviteTargets:o,recordStore:n,canEditSpaceMembership:i}=e;if(0===o.length)return null;if(!n)return null;const{inviteTargetGuests:r,inviteTargetMembers:a}=function(e){const t=[],o=[];return e.forEach((e=>{N(e)?t.push(e):o.push(e)})),{inviteTargetGuests:t,inviteTargetMembers:o}}(o),s=i?[...a,...r]:a,l=i?[]:r,d=k().Z.getIntl(),u=(0,I().OY)(n)?null===(t=n.getBlockTitleStore())||void 0===t?void 0:t.getValue():n.getName();return i||0===l.length?(0,x.jsx)(c()._H,{id:"permissionsInvite.inviteConfirmationToast.usersAddedMessage",defaultMessage:"{numberOfTargets, plural, one {Added {targetName} to {recordName}} other {Added {numberOfTargets} people to {recordName}}}",values:{numberOfTargets:s.length,targetName:B({intl:d,target:s[0]}),recordName:u}}):0===s.length?(0,x.jsx)(c()._H,{id:"permissionsInvite.inviteConfirmationToast.inviteRequestedMessage",defaultMessage:"{numberOfTargets, plural, one {Requested {targetName} for approval} other {Requested {numberOfTargets} invites for approval}}",values:{numberOfTargets:l.length,targetName:B({intl:d,target:l[0]})}}):(0,x.jsx)(c()._H,{id:"permissionsInvite.inviteConfirmationToast.userAddedAndRequestedText",defaultMessage:"{numberOfAddedTargets, plural, one {Added {addedTargetName}} other {Added {numberOfAddedTargets} people}} & {numberOfRequestedTargets, plural, one {requested {requestedTargetName} for approval} other {requested {numberOfRequestedTargets} people for approval}}",values:{numberOfAddedTargets:s.length,addedTargetName:B({intl:d,target:s[0]}),numberOfRequestedTargets:l.length,requestedTargetName:B({intl:d,target:l[0]})}})}function K(e){if("existingUser"!==e.type)return;const t=S().subscriptionDataStoreInstance.state,o=(t?b().CM(t):[]).find((t=>t.userId===e.value.id));return o?o.role:"not_in_space"}},565276:(e,t,o)=>{o.d(t,{Br:()=>c,Xt:()=>r,Yj:()=>l,al:()=>d,eO:()=>u,jM:()=>s,yT:()=>a});var n=()=>o(247724),i=()=>o(435441);function r(e){const{menuElement:t,clickedElement:o}=e;return t!==o&&!t.contains(o)&&(!o.classList.contains("notion-link")&&!(o.closest(`.${n().mJW}`)&&!o.closest(`.${n().p1Q}`)&&!o.closest(`.${n().Nn$}`)&&!o.closest(`.${n().fHd}`)))}function a(e){if((0,i().sh)(e,(e=>e.classList&&(e.classList.contains(n().p1Q)||e.classList.contains(n().Nn$)||e.classList.contains(n().fHd)||e.classList.contains(n().XEp)||e.classList.contains(n().rAK)))))return!1;const t=(0,i().sh)(e,(e=>e.classList&&e.classList.contains(n().mJW)));return Boolean(t)}function s(e){const t=(0,i().sh)(e,(e=>e.classList&&e.classList.contains(n().Dkf)));return Boolean(t)}function l(e){const t=(0,i().sh)(e,(e=>e.classList&&e.classList.contains(n().D4r)));return Boolean(t)}function c(e){const t=(0,i().sh)(e,(e=>e.classList&&e.classList.contains(n().y3y)));return Boolean(t)}function d(e){const t=(0,i().sh)(e,(e=>e.classList&&e.classList.contains(n().RIA)));return Boolean(t)}function u(e){const t=(0,i().sh)(e,(e=>e.classList&&e.classList.contains(n().AWi)));return Boolean(t)}},758018:(e,t,o)=>{o.d(t,{vG:()=>g,AQ:()=>f,EB:()=>p,MR:()=>m});o(670560),o(267602),o(653476),o(241792);var n=()=>o(933868),i=()=>o(989478),r=()=>o(513670),a=()=>o(326966),s=()=>o(826955),l=()=>o(18281),c=()=>o(897257),d=()=>o(446866);var u=()=>o(122479);function p(e){if(e&&e.blockId)return e.blockId}function m(e,t){const o=e.currentUser.id;return t.userId===o||t.present}function f(e){const{pageVisitStore:t,presenceStore:o,blockStore:i,trustedEmailDomains:s}=e,d=c().subscriptionDataStoreInstance.state,{remotePresenceData:p,rootStore:m}=o.state;if(!m||!m.canEdit()||!d)return[];let f=[];p&&r().M6(p,(e=>{e&&e.userId&&f.push(e)}));const{pageId:g,lastViewTime:h,lastExitTime:_,...b}=t.state;r().M6(b,(e=>{e.isDefined()&&f.push({userId:e.getUserId(),activityTimestampNearestMinuteMs:(0,a().ud)(e.getVisitedAt()),present:!1})})),f=r().mN(f,(e=>e.userId));const y=(0,u().YO)(m).map((e=>{let{permissionItem:t}=e;return t})),S=y.filter(n().jg).map((e=>e.user_id)),w=(0,l().CM)(d).map((e=>e.userId)),k=r().G0(S,w);let I=[];for(const n of f)k.includes(n.userId)?(n.present||b[n.userId])&&I.push(n):v({userId:n.userId,blockPermissionItems:y,blockStore:i,trustedEmailDomains:s})&&(n.onTrustedDomain=!0,I.push(n));return I=r().MR(I,(e=>{let{activityTimestampNearestMinuteMs:t}=e;return t?-t:0})),I}function g(e){const{pageVisitStore:t,presenceStore:o}=e,{remotePresenceData:n}=o.state;let i=[];n&&r().M6(n,(e=>{e&&e.userId&&i.push(e)}));const{pageId:s,lastViewTime:l,lastExitTime:c,...d}=t.state;return r().M6(d,(e=>{e.isDefined()&&i.push({userId:e.getUserId(),activityTimestampNearestMinuteMs:(0,a().ud)(e.getVisitedAt()),present:!1})})),i=r().mN(i,(e=>e.userId)),r().MR(i,(e=>{let{activityTimestampNearestMinuteMs:t}=e;return t?-t:0}))}function v(e){let{userId:t,blockPermissionItems:o,blockStore:r,trustedEmailDomains:a}=e;if(!a)return!1;if(0===o.filter(n().RO).length)return!1;return function(e,t){const o=t.getEmail();if(!o)return!1;for(const n of e)if(n===(0,d().Gd)(o))return!0;return!1}(a,s().U6.createChildStore(r,{id:t,table:i().KJ}))}},84080:(e,t,o)=>{o.d(t,{V:()=>r,Z:()=>a});var n=()=>o(793935),i=()=>o(949842);function r(e){(0,i().ZP)({event:e,context:i().Af.SidebarMouseMove,callback:()=>{n().close()}})}const a=function(e){return e({onMouseMove:r})}},647295:(e,t,o)=>{o.d(t,{ZT:()=>c,lX:()=>a,rq:()=>s});var n=()=>o(35980),i=()=>o(396136),r=()=>o(255933);async function a(e){let{currentUserId:t,spaceStore:o}=e;const i=n().Z.get({userId:t,key:l(o.id)});return u(o,o.loadRecordModel,i)}function s(e){let{currentUserId:t,spaceId:o,value:i}=e;n().Z.set({userId:t,key:l(o),value:i})}function l(e){return`quickAddParent3:${e}`}function c(e){let{currentUserId:t,spaceId:o,parent:i,databaseType:r}=e;n().Z.set({userId:t,key:d(o,r),value:i})}function d(e,t){return`quickAddTypedParent:${e}:${t||"default"}`}async function u(e,t,o){let n;if(o)if("page"===o.type){await t({table:i().iU,id:o.id})&&(n=o)}else if("space"===o.type){await t({table:r().bx,id:o.id})&&(n=o)}return n||{type:"space-private-pages",spaceId:e.id}}},15981:(e,t,o)=>{o.d(t,{Wk:()=>g,X4:()=>d,_5:()=>f,_k:()=>m,bi:()=>v,eJ:()=>p,nu:()=>c,y$:()=>u,yg:()=>h});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(30005),o(241792),o(228244);var n=()=>o(396136),i=()=>o(590166),r=()=>o(876822),a=()=>o(63317),s=()=>o(485014),l=()=>o(128076);const c=1e3,d=new(o(435308).default)((()=>{const{currentSpaceStore:e}=r().default.state;if(!e)return[];return a().Z.getWithoutSubscribing(e.id).slice(0,c).filter((e=>e.store&&!e.store.pathIsDead()))}),{debugName:"recentAlivePagesStore"});function u(e,t,o){const i=r().default.state.currentSpaceStore,a=new Map(e.map((e=>[e.pageId,e])));return t.forEach((e=>{const{pageId:t,visitedAt:r}=e,s=a.get(t);s?(s.visitedAt<r&&(s.visitedAt=r),a.set(t,s)):i&&a.set(t,{pageId:t,visitedAt:r,store:l().G.createChildStore(i.getPagesStore(),{table:n().iU,id:t,spaceId:o})})})),Array.from(a.values()).sort(((e,t)=>t.visitedAt-e.visitedAt)).slice(0,c)}function p(e){let{spaceId:t,pageId:o,visitedAt:n}=e;const l=a().Z.getWithoutSubscribing(t),c=l.some((e=>e.pageId===o)),u=function(e){let{newRecentPage:t,currentRecentPages:o}=e;const n=o.filter((e=>e.pageId!==t.pageId)),i=n;let r=0;for(;r<n.length;r++)if(t.visitedAt>=n[r].visitedAt){i.splice(r,0,t);break}r===n.length&&i.push(t);return i}({newRecentPage:{pageId:o,visitedAt:n},currentRecentPages:l});a().Z.set(t,u),d.setShouldRecompute(),!c&&v()&&async function(e){var t;let{pageId:o}=e;const{currentSpaceStore:n}=r().default.state;if(!n)return;const a=await(0,i().Nc)({currentSpaceStore:n,id:o,source:new Set(["recentVisit"])}),l=null===(t=s().Z.getState().localSearchableBlocksCache)||void 0===t?void 0:t.blocks;if(!l||!a)return;l.has(a.id)||l.add(a)}({pageId:o})}const m=["today","yesterday","past_week","past_30_days","older"];function f(e){const t=Date.now(),o=864e5,n=t-e,i=new Date(e).getDay(),r=new Date(t).getDay(),a=new Date(t);a.setDate(a.getDate()-1);const s=a.getDay();return i===r&&n<=o?"today":i===s&&n<=1728e5?"yesterday":n<=6048e5?"past_week":n<=2592e6?"past_30_days":"older"}function g(e){return null==e?void 0:e.map((e=>({visitedAt:e.visitedAt,pageId:e.pageId}))).sort(((e,t)=>t.visitedAt-e.visitedAt)).slice(0,50)}function v(){return!0}function h(){return 100}},278589:(e,t,o)=>{o.r(t),o.d(t,{getDebugSourcesForIdsInOperations:()=>c,setBlockIdDebugSource:()=>s,setupRecordCacheDebugging:()=>a});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(241792);var n=o.n(o(39593));let i=!1;const r=new(n())({max:1e4});function a(e){e.isMobile||(i=!0)}function s(e,t){i&&(r.has(e)||r.set(e,t))}const l=/[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}/g;function c(e,t){const o={blocks:{},isIdSourceCacheFull:r.itemCount===r.max},n=JSON.stringify(t),i=new Set(Array.from(n.matchAll(l)).map((e=>e[0])));for(const s of i){var a;let t=!1;const n={},i=r.get(s);i&&(t=!0,n.debugSource=i);const l=e.defaultRecordCache.inMemoryRecordCache.getRecord({pointer:{table:"block",id:s},userId:e.currentUser.id});null!=l&&null!==(a=l.value)&&void 0!==a&&a.type&&(t=!0,n.blockType=l.value.type),t&&(o.blocks[s]=n)}return o}},852465:(e,t,o)=>{o.d(t,{D4:()=>O,De:()=>te,GP:()=>q,HK:()=>Z,M1:()=>X,MI:()=>T,Mm:()=>$,Nm:()=>N,No:()=>W,OY:()=>y,Oh:()=>J,PF:()=>V,R$:()=>Q,SJ:()=>k,Sd:()=>M,Xp:()=>U,Y:()=>b,ak:()=>L,al:()=>R,bB:()=>D,bQ:()=>z,c3:()=>F,dv:()=>A,dz:()=>ee,ig:()=>K,le:()=>j,mY:()=>E,sl:()=>G,vV:()=>B,x8:()=>w,yJ:()=>S,zP:()=>H});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(749411),o(241792),o(731107);var n=()=>o(580397),i=()=>o(827370),r=()=>o(114882),a=()=>o(396136),s=()=>o(602299),l=()=>o(630315),c=()=>o(255933),d=()=>o(306164),u=()=>o(955620),p=()=>o(349220),m=()=>o(513670),f=()=>o(826955),g=()=>o(431687),v=()=>o(527278),h=()=>o(239482);const _=128;function b(e){return e.table===d().e0}function y(e){return e.table===a().iU}function S(e){return R(e,{recursivelyLoadAllDiscussions:!1}).filter(te)}function w(e){return(0,f().Vh)(e,e.pointer,"discussions")}function k(e){let t=0;return e.findRecordStoreUIAncestor((o=>(o!==e&&e.id&&o.id===e.id&&o.table===e.table&&m().Xy(e.path,o.path)&&t++,!1))),t>1}const I=new(g().P)({debugName:"recursiveChildBlocks",memoizeRecursion:!0,deepEquals:!1,compute:function(e,t){return C({blockStore:e,traverseTransclusionReferences:!0}).flatMap((e=>[e,..."page"===e.getType()?[]:t(e)]))}});function C(e){const{blockStore:t,traverseTransclusionReferences:n}=e;if(k(t))return[];return t.getContentStores().map((e=>{const t=e.getType();if(t){if("transclusion_reference"===t){if(!n)return;const t=e.getTransclusionReferenceTargetStore();return t||void 0}return e}})).filter(o(696459).$K)}const x=new(g().P)({debugName:"recursiveWihTransclusionChildBlocks",memoizeRecursion:!0,deepEquals:!1,compute:function(e,t){return C({blockStore:e,traverseTransclusionReferences:!1}).flatMap((e=>[e,..."page"===e.getType()?[]:t(e)]))}});function T(e){const{blockStore:t,transclusionReferences:o,childPages:n}=e,i=("recurseInto"===o?I:x).getStateFor(t);return"includeWithoutRecursion"===n?i:i.filter((e=>!e.isType("page")))}function*M(e){const{blockStores:t,traverseTransclusionReferences:o}=e;for(const n of t){yield n;for(const e of T({blockStore:n,transclusionReferences:o?"recurseInto":"omit",childPages:"omit"}))yield e}}const P=new(g().P)({debugName:"loadedDiscussionStores",memoizeRecursion:!1,deepEquals:!1,compute:function(e){const t=w(e),n=((null==t?void 0:t.getValue())||[]).map((t=>f().t1.createChildStore(e,i().dr.fromPointerLike({table:o(542973).qF,id:t,spaceId:e.pointer.spaceId}))));return n.reverse(),n}});function A(e){return e.table===s().x_}function R(e,t){const o=t.excludeSelf?[]:[e],n=null!=t&&t.recursivelyLoadAllDiscussions?[...o,...T({blockStore:e,transclusionReferences:"recurseInto",childPages:"omit"})]:o,i=new Set;return n.flatMap(P.getStateFor).filter((e=>{if(!(null!=t&&t.includeLoadingDiscussions||e.isDefined()))return!1;if(i.has(e.id))return!1;if(null!=t&&t.onlyIncludePropertyDiscussions){if(void 0===e.getPropertyId())return!1}else if((null==t||!t.includePropertyDiscussions)&&void 0!==e.getPropertyId())return!1;return i.add(e.id),!0}))}function B(e,t){return D(R(e,t)).unresolved}function E(e,t){return D(R(e,t)).resolved}function D(e){const t=e.filter((e=>e.isDefined())),[o,n]=m().uK(t,(e=>e.getResolved()));return{resolved:o,unresolved:n}}function U(e,t){return(Array.isArray(e)?e:B(e,t)).reduce(((e,o)=>{const n=o.getModel();return n?t.onlyIncludeBlockLevelDiscussions&&!te(o)?e:e+(n.getComments()||[]).length:e}),0)}function F(e,t,o){let n=Array.isArray(e)?e:B(e,t);return o&&(n=n.filter((e=>e.getPropertyId()===o))),n.reduce(((e,o)=>{const n=o.getModel();return n?t.onlyIncludeBlockLevelDiscussions&&!te(o)?e:{comments:e.comments+(n.getComments()||[]).length,reactions:e.reactions+f().bh.getUserVisibleReactions(o).length,hasSuggestionDiscussions:!!e.hasSuggestionDiscussions||"suggestion"===n.getType(),hasDefaultDiscussions:!!e.hasDefaultDiscussions||"default"===n.getType()}:e}),{comments:0,reactions:0,hasSuggestionDiscussions:!1,hasDefaultDiscussions:!1})}function N(e){return!!V(e)&&0===function(e,t){return B(e,t).length}(e,{recursivelyLoadAllDiscussions:!1})}function V(e){if("text"!==e.getType())return!1;const t=e.getBlockTitleStore().getValue();return(!t||!t.length)&&!e.hasContent()}function L(e){return(0,f().Vh)(e,e.pointer,"comments")}function O(e){if(!e)return[];const t=L(e);return(t.getValue()||[]).map((e=>f().T5.createChildStore(t,{table:s().x_,id:e,spaceId:t.pointer.spaceId})))}function Z(e){if(e.isDefined())return f().t1.createChildStore(e,e.getParentPointer())}function j(e){const t=K(e);return(t.getValue()||[]).map((o=>f().G.createChildStore(t,i().dr.fromPointerLike({table:a().iU,id:o,spaceId:e.pointer.spaceId}))))}function K(e){return(0,f().Vh)(e,e.pointer,"content")}function z(e){return(0,f().Vh)(e,e.pointer,"last_edited_time")}function H(e){return(0,f().Vh)(e,e.pointer,"text")}function q(e){if(e.isDefined())return f().t1.createChildStore(e,e.getParentPointer())}function W(e,t,o){return f().t1.createChildStore(e,{table:r().TY,id:t,spaceId:o})}function G(e){if(e.isDefined())return W(e,e.getActivityId(),e.getSpaceId())}function $(e){return e.table===c().bx}function Q(e){return e.table===l().V7}(0,o(947115).exposeDebugValue)("getDiscussionStores",R);const Y=m().P2((e=>{o(799891).log(e)}),500);function J(e){let t=e,o=0;for(;t;){if(!t.isReady())return!1;if(o>=_)return Y({level:"error",from:"recordStoreHelpers",type:"areAncestorsLoaded",data:{message:"max depth reached",miscDataToConvertToString:{maxDepth:_,id:e.id,table:e.table,currentStoreId:t.id,currentTable:t.table}}}),!1;o+=1,t=(0,h().Om)(t)}return!0}async function X(e){let t=e,o=0;for(;t;){if(t.isReady()||await t.load(),o>=_)return Y({level:"error",from:"recordStoreHelpers",type:"loadAncestors",data:{message:"max depth reached",miscDataToConvertToString:{maxDepth:_,id:e.id,table:e.table,currentStoreId:t.id,currentTable:t.table}}}),!1;o+=1,t=(0,h().Om)(t)}}function ee(e){return e.table===a().iU&&m().Xy(e.path,["content"])}function te(e){if(!e.isDefined())return!1;if("suggestion"===e.getType())return!1;if(e.getPropertyId())return!1;const t=e.getContext(),o=t?(0,n().Bb)({discussionContextData:t,discussionType:(0,p().TO)(e.getType()),discussionId:e.id,intl:v().Z.getIntl()}):void 0;if(!o)return!0;return function(e){return 0===u().llS(e).length}(u().VP_(o,(t=>!u().xw5(t)||u().h19(t)===e.id)))}},549813:(e,t,o)=>{o.d(t,{JL:()=>m,NO:()=>f,V:()=>v,bj:()=>g,vU:()=>h});var n=()=>o(437187),i=()=>o(998411),r=()=>o(139978),a=()=>o(955620),s=()=>o(568017),l=()=>o(887430),c=()=>o(826955),d=()=>o(641702),u=()=>o(270315),p=()=>o(345918);const m=(0,o(696459).AO)((e=>e instanceof c().G||e instanceof c().H2||e instanceof c().NW||e instanceof c().Xr||e instanceof c().zX?{true:e}:{false:e}));function f(e,t){if(e.isDefined())return e.getModel().getEmptyTitlePlaceholder({getRecordModel:e.getRecordModel,userTimeZone:(0,i().r)(),intl:t})}function g(e,t,o){if(e instanceof c().G&&!e.isWorkflowPage()||e instanceof c().NW&&!e.isSystemCollection()){if("none"===e.getRole())return n().x(t);const i=e instanceof c().G?e.getTitleValue():e.getName(),r=(0,s().gh)({theme:o.ThemeModeStore.state});if(!i||!r||0===(0,a().eeV)(i).length)return;return(0,d().C6)(o,r,i,e,!0)}return v(e,t,o,!0)}function v(e,t,o,r){if(e instanceof c().zX)return e.getName();if(e instanceof c().H2)return(0,p().rn)(o,e);if(e instanceof c().Xr){const t=e.getName();if(t)return t;const o=e.getType();return o?u().Bh[o]:void 0}if(!e||!e.isDefined())return;return"none"===e.getRole()?n().x(t):e.getRenderTitle({userTimeZone:(0,i().r)(),intl:t,disableInsertedAnnotations:r})}function h(e){const{environment:t,intl:o,untitledFallback:i,store:a}=e,s=i?o.formatMessage(i):function(e,t){if(e.table===r().np){const o=e.getType();if(o&&"page"!==o&&l().b1[o])return t.formatMessage(l().b1[o])}return n().Q2(t)}(a,o);return v(a,o,t,!1)||f(a,o)||s}},233646:(e,t,o)=>{o.d(t,{Bq:()=>I,l7:()=>f,W3:()=>g,uM:()=>k,qi:()=>b,Gt:()=>_,cn:()=>C,OH:()=>y,g3:()=>S,K9:()=>w,vi:()=>x,nB:()=>h,Tq:()=>v,dH:()=>m});var n=()=>o(788860),i=()=>o(696459),r=()=>o(360240),a=()=>o(165741),s=(o(667294),()=>o(827282)),l=o(785893);const c=(0,s().IU)("hand",{viewBox:"0 0 28 28",svg:(0,l.jsx)("path",{d:"M13.6572 23.1553C16.918 23.1553 19.1943 21.415 20.416 17.9873L21.9893 13.584C22.1035 13.2588 22.1562 12.9512 22.1562 12.6611C22.1562 11.6592 21.4092 10.9209 20.416 10.9209C19.7832 10.9209 19.2119 11.2812 18.9131 11.9668L18.4385 13.1182C18.4209 13.1533 18.4033 13.1709 18.3682 13.1709C18.3242 13.1709 18.3066 13.1445 18.3066 13.1006V6.35059C18.3066 5.23438 17.5771 4.51367 16.4961 4.51367C16.1621 4.51367 15.8545 4.61914 15.6172 4.82129C15.4414 3.93359 14.8174 3.38867 13.9121 3.38867C13.0332 3.38867 12.3916 3.94238 12.207 4.80371C11.9873 4.61035 11.7061 4.51367 11.4072 4.51367C10.3965 4.51367 9.70215 5.2168 9.70215 6.2627V7.08008C9.48242 6.86914 9.16602 6.75488 8.83203 6.75488C7.82129 6.75488 7.10938 7.51074 7.10938 8.58301V16.2822C7.10938 20.5361 9.72852 23.1553 13.6572 23.1553ZM13.6133 21.6523C10.4668 21.6523 8.54199 19.6484 8.54199 16.124V8.75C8.54199 8.41602 8.75293 8.1875 9.06934 8.1875C9.39453 8.1875 9.62305 8.41602 9.62305 8.75V13.2764C9.62305 13.6543 9.93066 13.918 10.2822 13.918C10.6426 13.918 10.9502 13.6543 10.9502 13.2764V6.48242C10.9502 6.14844 11.1611 5.91992 11.4863 5.91992C11.8027 5.91992 12.04 6.14844 12.04 6.48242V12.8105C12.04 13.1885 12.3389 13.4609 12.6904 13.4609C13.0508 13.4609 13.3584 13.1885 13.3584 12.8105V5.36621C13.3584 5.04102 13.5869 4.79492 13.9033 4.79492C14.2197 4.79492 14.4482 5.04102 14.4482 5.36621V12.7051C14.4482 13.0654 14.7383 13.3467 15.0986 13.3467C15.4678 13.3467 15.7666 13.0654 15.7666 12.7051V6.48242C15.7666 6.14844 15.9863 5.91992 16.3115 5.91992C16.6279 5.91992 16.8564 6.14844 16.8564 6.48242V15.2451C16.8564 15.7549 17.1816 16.0449 17.6035 16.0361C17.9551 16.0361 18.2715 15.8779 18.4824 15.4121L19.748 12.5732C19.8975 12.2305 20.1963 12.125 20.4688 12.2217C20.7676 12.3359 20.8643 12.626 20.7236 13.0039L19.0889 17.5127C17.999 20.501 16.1621 21.6523 13.6133 21.6523Z"})}),d=(0,s().IU)("overlap",{viewBox:"0 0 20 20",svg:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("path",{d:"M4.917 14.496h1.729v-1.1H4.93c-.342 0-.604-.091-.786-.274-.182-.182-.273-.45-.273-.806V5.52c0-.356.09-.625.273-.807.182-.182.444-.273.786-.273h6.83c.336 0 .596.09.779.273.186.182.28.451.28.807v1.497h1.1V5.459c0-.702-.18-1.23-.54-1.586-.355-.355-.888-.533-1.6-.533H4.918c-.716 0-1.254.178-1.614.533-.355.351-.533.88-.533 1.586v6.918c0 .707.178 1.237.533 1.593.36.35.898.526 1.614.526zm3.315 3.165h6.863c.711 0 1.244-.177 1.6-.533.36-.355.54-.884.54-1.586V8.624c0-.702-.18-1.23-.54-1.586-.356-.355-.889-.533-1.6-.533H8.232c-.716 0-1.253.178-1.613.533-.356.351-.534.88-.534 1.586v6.918c0 .707.178 1.235.534 1.586.36.356.897.533 1.613.533zm.014-1.1c-.342 0-.604-.091-.787-.274-.182-.182-.273-.45-.273-.806V8.686c0-.356.091-.625.273-.807.183-.182.445-.273.787-.273h6.829c.337 0 .597.09.779.273.187.182.28.451.28.807v6.795c0 .355-.093.624-.28.806-.182.183-.442.274-.78.274H8.247z"}),(0,l.jsx)("path",{d:"M13.976 12.448l-1.832 1.36c-.192.147-.379.183-.561.11-.182-.073-.273-.225-.273-.458v-.848H9.7a.533.533 0 01-.383-.15.521.521 0 01-.157-.383c0-.145.053-.27.157-.376s.233-.157.383-.157h1.61v-.827c0-.246.093-.401.28-.465.187-.068.371-.034.554.103l1.832 1.374a.43.43 0 01.184.362.423.423 0 01-.184.356z"})]})}),u=(0,n().vU)({dependenciesPropertySelectDefaultOptionCaption:{id:"database.viewSettings.relationFeatures.dependencies.propertySelectPopup.default.caption",defaultMessage:"This property will be used for dependencies in new views, and will set date shifting behavior across all views."},deleteDependenciesAcceptModalTitle:{id:"collectionSettings.relationFeatures.deleteDependenciesAcceptModal.title",defaultMessage:"Turn off dependencies?"},dependenciesMenuTitle:{id:"database.viewSettings.dependenciesTab.title",defaultMessage:"Dependencies"},dateShiftingSectionCaption:{id:"collectionSettings.dependenciesView.dateShiftingSection.caption",defaultMessage:"Automatic date shifting"},datePropertyPickerTitle:{id:"database.viewSettings.relationFeatures.datePropertyPicker.title",defaultMessage:"Shift using"},startDate:{id:"database.viewSettings.relationFeatures.datePropertyPicker.startDate",defaultMessage:"Start date"},endDate:{id:"database.viewSettings.relationFeatures.datePropertyPicker.endDate",defaultMessage:"End date"},advancedSettings:{id:"database.viewSettings.dependenciesAdvancedSettingsTab.title",defaultMessage:"Advanced settings"},newDateProperty:{id:"collectionSettings.dependenciesFeature.newDateProperty.name",defaultMessage:"Date"},doNotShiftButton:{id:"collectionSettings.dependenciesView.dateShiftingButton.doNotShift.label",defaultMessage:"Do not automatically shift"},consumeGapButton:{id:"collectionSettings.dependenciesView.dateShiftingButton.consumeGap.label",defaultMessage:"Shift only when dates overlap"},avoidWeekendsSwitcherTitle:{id:"collectionSettings.dependenciesView.dateShiftingSection.avoidWeekends.switcher.title",defaultMessage:"Avoid weekends"},hideDependenciesInView:{id:"CollectionSettingsViewRelationFeatures.hideDependenciesInView",defaultMessage:"Hide dependencies in view"},showDependenciesInView:{id:"CollectionSettingsViewRelationFeatures.showDependenciesInView",defaultMessage:"Show dependencies in view"},turnOnDependenciesButton:{id:"collectionSettings.dependenciesView.turnOnDependenciesButton.label",defaultMessage:"Turn on dependencies"},turnOffDependenciesButton:{id:"database.viewSettings.relationsPropertyTab.removeDependenciesButton.title",defaultMessage:"Turn off dependencies"},dateShiftSuccess:{id:"collectionDateActions.dateShiftSuccess",defaultMessage:"Shifted the dates of {numDependenciesUpdated, plural, one {1 dependent {item}} other {{numDependenciesUpdated} dependent {items}}}"},dateShiftSomeNotUpdatedDueToPermissions:{id:"collectionDateActions.dateShiftSomeNotUpdatedDueToPermissions",defaultMessage:"Shifted the dates of {numDependenciesUpdated, plural, one {1 dependent {item}} other {{numDependenciesUpdated} dependent {items}}}. Others could not be shifted because you do not have permission"},dateShiftAllNotUpdatedDueToPermissions:{id:"collectionDateActions.dateShiftAllNotUpdatedDueToPermissions",defaultMessage:"The dates of dependent {items} could not be shifted because you do not have permission"},shiftingNotApplicableNoShiftingMessage:{id:"CollectionSettingsViewRelationFeatures.shiftingNotApplicableNoShiftingMessage",defaultMessage:"The dates of dependent {items} in this view will not automatically shift. To change the date shifting behavior, update the default relation property in Advanced settings."},shiftingNotApplicableConsumeGapMessage:{id:"CollectionSettingsViewRelationFeatures.shiftingNotApplicableConsumeGapMessage",defaultMessage:"The dates of dependent {items} in this view will shift when {item} dates overlap. To change the date shifting behavior, update the default relation property in Advanced settings."},shiftingNotApplicablePreserveGapMessage:{id:"CollectionSettingsViewRelationFeatures.shiftingNotApplicablePreserveGapMessage",defaultMessage:"The dates of dependent {items} in this view will shift maintaining the time between {items}. To change the date shifting behavior, update the default relation property in Advanced settings."},preserveGapButton:{id:"collectionSettings.dependenciesView.dateShiftingButton.preserveGap.label",defaultMessage:"Shift & maintain time between {items}"},avoidWeekendsSwitcherCaption:{id:"collectionSettings.dependenciesView.dateShiftingSection.avoidWeekends.switcher.description",defaultMessage:"Prevent shifted {items} from starting or ending on weekends"},dependenciesMenuDescription:{id:"database.viewSettings.relationsPropertyTab.dependencies.description",defaultMessage:"Use dependencies to show {items} that are blocking â€” or blocked by â€” other {items}."},dependenciesPropertyPickerCaption:{id:"database.viewSettings.relationsPropertyTab.dependencies.relationPropertyPicker.caption",defaultMessage:"Choose the relation property that represents the {items} that are blocked. We use â€œBlockingâ€ as our default."}}),p=(0,n().vU)({hideSubitemsInView:{id:"CollectionSettingsViewRelationFeatures.hideSubitemsInView",defaultMessage:"Hide sub-{items} in view"},showSubitemsInView:{id:"CollectionSettingsViewRelationFeatures.showSubitemsInView",defaultMessage:"Show sub-{items} in view"},turnOnSubItemsButton:{id:"collectionSettings.subitemsView.turnOnSubitemsButton.label",defaultMessage:"Turn on sub-{items}"},turnOffSubItemsButton:{id:"database.viewSettings.relationsPropertyTab.removeSubItemsButton.title",defaultMessage:"Turn off sub-{items}"},subItemsMenuTitle:{id:"database.viewSettings.subItemsTab.title",defaultMessage:"Sub-{items}"},subItemsMenuDescription:{id:"database.viewSettings.relationsPropertyTab.subitems.description",defaultMessage:"Break down {items} in toggles"},deleteSubItemsAcceptModalTitle:{id:"collectionSettings.relationFeatures.deleteSubItemsAcceptModal.title",defaultMessage:"Remove related properties when turning off sub-{items}?"},subItemsPropertyPickerCaption:{id:"database.viewSettings.relationsPropertyTab.subitems.relationPropertyPicker.caption",defaultMessage:"Choose the relation property that represents the sub-{items}. We use â€œSub-{item}â€ as our default."},subItemsPropertySelectDefaultOptionCaption:{id:"database.viewSettings.relationFeatures.subitems.propertySelectPopup.default.caption",defaultMessage:"This property will be used for sub-{items} in new views."},toggleNestingOnTitleMenuItemTooltip:{id:"database.viewSettings.relationFeatures.subitems.toggleNestingOnTitleMenuItemTooltip.default.caption",defaultMessage:"Whether nesting and the toggle button should always be on the title column or the left-most column. Only relevant for table views"}}),m=(0,n().vU)({relationFeatureShownMessage:{id:"database.viewSettings.mainTab.feature.shown",defaultMessage:"Shown"},relationFeatureOnMessage:{id:"database.viewSettings.mainTab.feature.on",defaultMessage:"On"},relationFeatureOffMessage:{id:"database.viewSettings.mainTab.feature.off",defaultMessage:"Off"},relationFeatureHiddenMessage:{id:"database.viewSettings.mainTab.relationFeatureHidden",defaultMessage:"Hidden"},removePropertiesTitle:{id:"collectionSettings.relationFeatures.removePropertiesTitle",defaultMessage:"Remove properties"},keepPropertiesTitle:{id:"collectionSettings.relationFeatures.keepPropertiesTitle",defaultMessage:"Keep properties"},removePropertiesDescription:{id:"collectionSettings.relationFeatures.removePropertiesDescription",defaultMessage:"Delete {property} and {inverseProperty}."},turnOff:{id:"collectionSettings.relationFeatures.turnOffFeatureAllViewsButton.label",defaultMessage:"Turn off"},...u,...p});function f(e){return"consume_gap"===e?d:"preserve_gap"===e?a().$:c}function g(e){let t;return t="consume_gap"===e.dateShiftingMode?m.consumeGapButton:"preserve_gap"===e.dateShiftingMode?m.preserveGapButton:m.doNotShiftButton,{...t,values:{items:(0,r().Q_)(e.databaseType,!0)}}}function v(e){let t;return"timeline_arrows_by"===e.feature?t=m.turnOnDependenciesButton:"subitem"===e.feature?t=m.turnOnSubItemsButton:(0,i().t1)(e.feature),{...t,values:{items:(0,r().Q_)(e.databaseType,!0)}}}function h(e){let t;return"timeline_arrows_by"===e.feature?t=m.turnOffDependenciesButton:"subitem"===e.feature?t=m.turnOffSubItemsButton:(0,i().t1)(e.feature),{...t,values:{items:(0,r().Q_)(e.databaseType,!0)}}}function _(e){let t;return"timeline_arrows_by"===e.feature?t=m.dependenciesMenuTitle:"subitem"===e.feature?t=m.subItemsMenuTitle:(0,i().t1)(e.feature),{...t,values:{items:(0,r().Q_)(e.databaseType,!0)}}}function b(e){let t;return"timeline_arrows_by"===e.feature?t=m.dependenciesMenuDescription:"subitem"===e.feature?t=m.subItemsMenuDescription:(0,i().t1)(e.feature),{...t,values:{items:(0,r().Q_)(e.databaseType,!0)}}}function y(e){let t;return"timeline_arrows_by"===e.feature?t=m.deleteDependenciesAcceptModalTitle:"subitem"===e.feature?t=m.deleteSubItemsAcceptModalTitle:(0,i().t1)(e.feature),{...t,values:{items:(0,r().Q_)(e.databaseType,!0)}}}function S(e){let t;return"timeline_arrows_by"===e.feature?t=m.dependenciesPropertyPickerCaption:"subitem"===e.feature?t=m.subItemsPropertyPickerCaption:(0,i().t1)(e.feature),{...t,values:{item:(0,r().sN)(e.databaseType,!0),items:(0,r().Q_)(e.databaseType,!0)}}}function w(e){let t;return"timeline_arrows_by"===e.feature?t=m.dependenciesPropertySelectDefaultOptionCaption:"subitem"===e.feature?t=m.subItemsPropertySelectDefaultOptionCaption:(0,i().t1)(e.feature),{...t,values:{item:(0,r().sN)(e.databaseType,!0),items:(0,r().Q_)(e.databaseType,!0)}}}function k(e){let t;return(0,i().$K)(e.currentDateShiftConfig)?"preserve_gap"===e.currentDateShiftConfig.mode?t=m.shiftingNotApplicablePreserveGapMessage:"consume_gap"===e.currentDateShiftConfig.mode?t=m.shiftingNotApplicableConsumeGapMessage:(0,i().t1)(e.currentDateShiftConfig.mode):t=m.shiftingNotApplicableNoShiftingMessage,{...t,values:{items:(0,r().Q_)(e.databaseType,!0)}}}function I(e){return{...m.avoidWeekendsSwitcherCaption,values:{items:(0,r().Q_)(e,!0)}}}function C(e){const{feature:t,isOn:o,databaseType:n}=e;let a;return"timeline_arrows_by"===t?a=o?m.hideDependenciesInView:m.showDependenciesInView:"subitem"===t?a=o?m.showSubitemsInView:m.hideSubitemsInView:(0,i().t1)(t),{...a,values:{items:(0,r().Q_)(n,!0)}}}function x(e){const t={numDependenciesUpdated:e.result.numDependenciesUpdated,item:(0,r().sN)(e.databaseType,!0),items:(0,r().Q_)(e.databaseType,!0)};return e.result.numCouldNotUpdateDueToPermissions>0?e.result.numDependenciesUpdated>0?{message:{...m.dateShiftSomeNotUpdatedDueToPermissions,values:t},canUndo:!0}:{message:{...m.dateShiftAllNotUpdatedDueToPermissions,values:{}},canUndo:!1}:e.result.numDependenciesUpdated>0?{message:{...m.dateShiftSuccess,values:t},canUndo:!0}:void 0}},129338:(e,t,o)=>{o.d(t,{BI:()=>k,DB:()=>N,KV:()=>b,Mu:()=>_,NA:()=>B,ND:()=>E,OP:()=>y,Pi:()=>S,U1:()=>A,ZI:()=>P,aI:()=>T,gO:()=>F,gZ:()=>C,ke:()=>D,m8:()=>M,ny:()=>I,pR:()=>w,rj:()=>x,uJ:()=>U});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(470928),o(241792);var n=()=>o(226413),i=()=>o(443510),r=()=>o(235484),a=()=>o(109477),s=()=>o(998411),l=()=>o(305580),c=()=>o(321160),d=()=>o(530980),u=()=>o(35277),p=()=>o(696459),m=()=>o(360240),f=()=>o(887430),g=()=>o(109083),v=()=>o(826955),h=()=>o(473244);const _=32;function b(e,t){return e.normalizedSchemaStore.state[t]}function y(e,t,o){const i=b(e,t);if(!i||"relation"!==i.type||!i.property)return!1;const r=e.collectionStore(),a=i.property===t&&(0,n().F0)(i)===(null==r?void 0:r.id);if(!o.isDefined())return!a;const s=o.getSchema();return n().$u({propertySchema:i,sourceCollectionId:null==r?void 0:r.id,property:t,targetCollectionSchema:s})}function S(e){const t=(0,p().qP)(e).find((e=>{let[t,o]=e;if(o&&(0,n().NK)(o))return o.connectedRelation.integration_id===r().U9}));if(t&&t[1]&&(0,n().NK)(t[1]))return t[1]}function w(e){return Boolean(S(e))}function k(e,t){if(!e)return!1;const o=e[t];return Boolean(o&&(0,n().NK)(o)&&o.connectedRelation.integration_id===r().U9)}function I(e,t){var o;if("relation"!==(null==t?void 0:t.type))return;const n=null===(o=g().Z.state.caches[h().he])||void 0===o?void 0:o.inMemoryRecordCache,i=null==t?void 0:t.collection_pointer,r=e.collectionViewBlockStore(),a=i&&r?v().NW.createChildStore(r,i):void 0;return n?null==a?void 0:a.clone(n):a}function C(e){return f().eD({collectionStore:e,collectionViewBlockStore:e.getParentBlockStore(),checkNavigableAncestorLocked:!1})}function x(e){const{inverseName:t,collectionStore:o,propertySchema:n,intl:i,targetCollectionStore:r,from:a}=e;return t||(o.isDefined()&&n?T(i,{sourceCollection:o.getModel(),isSelfRelation:o.id===r.id,targetCollectionStore:r,createUnique:!0,from:a}):"")}function T(e,t){var o;const{sourceCollection:n,isSelfRelation:r,targetCollectionStore:a,createUnique:l,from:u}=t,p=d().kk5.fromCollection(n),f=e.formatMessage({id:"relationHelpers.autoInverseRelation.untitledDatabase",defaultMessage:"Untitled Database"}),g=null===(o=p.getRenderIcon({getRecordModel:d().omK.constant(void 0)}))||void 0===o?void 0:o.icon,v=p.getRenderTitle({getRecordModel:a.getRecordModel,userTimeZone:(0,s().r)(),intl:e})||f,h=p.getDatabaseType();let _;if(r)if("subitem"===u){const t=(0,m().sN)(h,!0);_=e.formatMessage({defaultMessage:"Parent {item}",id:"relationHelpers.autoSelfRelationInverseToggle.typedName"},{item:t})}else _="timeline_arrows_by"===u?e.formatMessage({defaultMessage:"Blocked by",id:"relationHelpers.autoSelfRelationInverseArrow.name"},{sourceCollectionName:v}):e.formatMessage({defaultMessage:"Related back to {sourceCollectionName}",id:"relationHelpers.autoSelfRelationInverse.name"},{sourceCollectionName:v});else _=g&&(0,c().Z)(g)?e.formatMessage({defaultMessage:"{sourceCollectionIcon} {sourceCollectionName}",id:"relationHelpers.autoInverseRelationWithIcon.name"},{sourceCollectionIcon:g,sourceCollectionName:v}):e.formatMessage({defaultMessage:"{sourceCollectionName}",id:"relationHelpers.autoInverseRelationSimple.name"},{sourceCollectionName:v});const b=a.getSchema();return b&&l?(0,i().Z)(_,(e=>!Object.values(b).find((t=>Boolean(t&&t.name===e))))):_}function M(e,t){var o,n;const{targetCollectionStore:r,isSelfRelation:a,sourceSchema:l,createUnique:u,from:p}=t,f=null===(o=r.getModel())||void 0===o||null===(o=o.getRenderIcon({getRecordModel:d().omK.constant(void 0)}))||void 0===o?void 0:o.icon,g=e.formatMessage({id:"relationHelpers.autoInverseRelation.untitledDatabase",defaultMessage:"Untitled Database"}),v=(null===(n=r.getModel())||void 0===n?void 0:n.getRenderTitle({getRecordModel:r.getRecordModel,userTimeZone:(0,s().r)(),intl:e}))||g,h=r.getDatabaseType();let _;if(a)if("subitem"===p){const t=(0,m().sN)(h,!0);_=e.formatMessage({defaultMessage:"Sub-{item}",id:"relationHelpers.autoSelfRelationNest.typedName"},{item:t})}else _="timeline_arrows_by"===p?e.formatMessage({defaultMessage:"Blocking",id:"relationHelpers.autoSelfRelationTimelineArrow.name"},{targetCollectionName:v}):e.formatMessage({defaultMessage:"Related {targetCollectionName}",id:"relationHelpers.autoSelfRelation.name"},{targetCollectionName:v});else _=f&&(0,c().Z)(f)?e.formatMessage({defaultMessage:"{targetCollectionIcon} {targetCollectionName}",id:"relationHelpers.autoRelationWithIcon.name"},{targetCollectionIcon:f,targetCollectionName:v}):e.formatMessage({defaultMessage:"{targetCollectionName}",id:"relationHelpers.autoRelation.name"},{targetCollectionName:v});const b=Object.values(l);return u?(0,i().Z)(_,(e=>!b.find((t=>Boolean(t&&t.name===e))))):_}function P(e){const t=(0,l().i)(e.getFormat(),e.getSchema(),void 0,a().j5.Relation);return t?t.collection_relation_options??{}:{}}function A(e){var t;const{collectionStore:o,property:n}=e;return(null===(t=P(o)[n])||void 0===t?void 0:t.related_properties)??[]}function R(e,t){return Object.entries(t).map((o=>{let[i,r]=o;if(!r||!(0,n().p_)(r))return;const a=(0,n().j0)(r),s=e.collectionStore();if(!a||a.id!==(null==s?void 0:s.pointer.id)||!s||!y(e,i,s))return;const l=r.property;if(!l)return;const c=t[l];if(!c||"relation"!==c.type)return;const d=(0,n().j0)(c);return d&&d.id===(null==s?void 0:s.pointer.id)?{propertyID:i,inversePropertyID:l}:void 0})).filter(p().$K)}function B(e,t){return R(e,t).map((e=>e.propertyID))}function E(e,t){const o=R(e,t),n=new Set,i=[];for(const{propertyID:r,inversePropertyID:a}of o)n.has(r)||n.has(a)||(i.push([r,a]),n.add(r),n.add(a));return i}function D(e,t){const o=(0,n().j0)(e);if(!o)return;const i=v().NW.createChildStore(t,o);return i?null==i?void 0:i.getFormat().app_config_uri:void 0}function U(e,t){const o=(0,n().j0)(e);if(!o)return;const i=new(v().NW)(t,o);return i?null==i?void 0:i.getSchema():void 0}function F(e,t){const o=(0,n().j0)(e);if(!o)return;const i=new(v().NW)(t,o);return i||void 0}function N(e){var t;if(e.patternName){if(e.integration.id===r().aW){const t=(0,u().Hw)(e.patternName);if(new RegExp(t).test(e.url))return(0,u().qJ)(e.patternName)}return null===(t=e.integration.info)||void 0===t||null===(t=t.original_url_patterns)||void 0===t?void 0:t.filter((t=>{var o;return t.name===e.patternName&&(null===(o=t.additional_types)||void 0===o?void 0:o.connectedRelation)})).find((t=>{let{regex:o}=t;return new RegExp(o).test(e.url)}))}}},935439:(e,t,o)=>{o.d(t,{L:()=>a});o(267602),o(749411),o(241792);var n=()=>o(481529),i=()=>o(513670),r=()=>o(143346);async function a(e,t){const o=i().mN(t.operations.flatMap((e=>[e.pointer,...(0,n().SH)(e)?e.additionalUpdatedPointers??[]:[]])),(e=>e.id));await Promise.all(o.map((o=>r().HB({environment:e,inMemoryRecordCache:e.defaultRecordCache.inMemoryRecordCache,pointer:o,userId:t.userId}))))}},275200:(e,t,o)=>{o.d(t,{$e:()=>w,N0:()=>S,Oc:()=>m,SD:()=>c,VW:()=>d,Wr:()=>f,bP:()=>y,cS:()=>k,eA:()=>h,hI:()=>p,n5:()=>_,t4:()=>I,ug:()=>x,xH:()=>u});o(670560);var n=()=>o(696459),i=()=>o(749826),r=()=>o(302353),a=()=>o(247724);const s=8,l={auto:!0,scroll:!0};function c(e){return e&&e instanceof HTMLElement?e:e&&e.parentElement?e.parentElement:void 0}function d(e){const t=c(e);if(t)return v(t,a().wKH)}function u(e){const t=c(e);if(t)return v(t,a().PBs)}function p(e){let t=e;const o=[];do{const e=window.getComputedStyle(t);e&&(e.overflow&&l[e.overflow]||e.overflowY&&l[e.overflowY]||e.overflowX&&l[e.overflowX])&&o.push(t),t=t.parentElement}while(t);return o}function m(e){const{environment:t,el:o,windowHeight:n,minEdgeDist:i=s}=e,a=d(o);if(!a||!a.getBoundingClientRect)return;const l=o.getBoundingClientRect(),c=a.getBoundingClientRect(),u=n-r().default.mobileNativeBottomPadding(t),p=Math.min(c.bottom,u);l.top<c.top?a.scrollTop=a.scrollTop-(c.top-l.top)-i:l.bottom>p&&(a.scrollTop=a.scrollTop+(l.bottom-p)+i)}function f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{edgeDist:0,animate:!1};const o=d(e),{animate:n,edgeDist:i}=t;if(!o||!o.getBoundingClientRect)return;const r=e.getBoundingClientRect(),a=o.getBoundingClientRect();if(n){const e=500,t=o.scrollTop-(a.top-r.top)-i,n=o.scrollTop,s=t-n,l=16;let c=0;const d=()=>{var t,i,r;c+=l,o.scrollTop=(t=c,i=n,r=s,(t/=e/2)<1?r/2*t*t+i:-r/2*(--t*(t-2)-1)+i),c<e&&requestAnimationFrame(d)};d()}else o.scrollTop=o.scrollTop-(a.top-r.top)-i}function g(e){return e&&e.overflowY&&l[e.overflowY]}function v(e,t){if(!e)return;let o=e;if(o)do{const e=window.getComputedStyle(o);if((o.classList&&o.classList.contains(a().OK_)&&o.classList.contains(t)||g(e))&&(!o.classList||!o.classList.contains(a().hBn)))return o;o=o.parentElement||void 0}while(o);return document.body}function h(e){return e.device.isDesktop&&!e.device.isSafari}function _(e){const{element:t,additionalPadding:o={},blockAlignment:n,inlineAlignment:i,behavior:r="smooth"}=e,{top:a=0,bottom:s=0,left:l=0,right:c=0}=o,d=p(t)[0],u=t.getBoundingClientRect(),m=u.top-a,f=u.bottom+s,g=u.left-l,v=u.right+c;if(!d)return;const h=d.getBoundingClientRect(),_=m>=h.top&&f<=h.bottom,y=g>=h.left&&v<=h.right;if(_&&y)return;const S=d.scrollTop,w=d.scrollTop+d.clientHeight,k=d.scrollLeft,I=d.scrollLeft+d.clientWidth,C=b({start:_?S:S+(m-h.top),end:_?w:w+(f-h.bottom),scrollStart:S,scrollEnd:w,containerSize:d.clientHeight,alignment:n??"nearest"}),x=b({start:y?k:k+(g-h.left),end:y?I:I+(v-h.right),scrollStart:k,scrollEnd:I,containerSize:d.clientHeight,alignment:i??"nearest"});d.scrollTo({top:C,left:x,behavior:r})}function b(e){let{start:t,end:o,scrollStart:i,scrollEnd:r,containerSize:a,alignment:s}=e;switch(s){case"start":return t;case"end":return o-a;case"center":return t+(o-t)/2-a/2;case"nearest":const e=o-t>a,l=Math.abs(t-i)<Math.abs(o-r);return e||l?t:o-a;default:(0,n().t1)(s)}}function y(e){return e.scrollHeight-(e.scrollTop+e.clientHeight)}function S(e){return Math.abs(y(e))<10}function w(e){return Math.abs(e.scrollTop)<10}function k(e){return e.scrollTop<=0}function I(e,t){let o=null;const n=e.scrollTop,i=e.scrollLeft;let r=n,a=i;const s=setTimeout((()=>{o&&(cancelAnimationFrame(o),o=null,t())}),500),l=()=>{o=null,e.scrollTop===r&&e.scrollTop!==n&&e.scrollLeft===a&&e.scrollLeft!==i?(clearTimeout(s),t()):o=requestAnimationFrame(l),r=e.scrollTop,a=e.scrollLeft};o=requestAnimationFrame(l)}let C;function x(){return void 0===C&&(C=i().default.checkGate({gateName:"functional_scroller"})),C}},832924:(e,t,o)=>{o.d(t,{default:()=>n});const n={}},750858:(e,t,o)=>{function n(){return!1}function i(e){return"quickSearch"===e.RouterStore.state.route.name}o.d(t,{X:()=>n,b:()=>i})},8:(e,t,o)=>{o.d(t,{AX:()=>q,De:()=>C,FN:()=>x,IV:()=>j,MQ:()=>H,MS:()=>D,Nu:()=>Z,VA:()=>T,VD:()=>I,YB:()=>V,_Q:()=>R,b9:()=>N,bC:()=>z,dy:()=>W,g8:()=>K,gC:()=>E,oO:()=>L,p6:()=>M,pG:()=>O,uL:()=>F,zD:()=>B});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(470928),o(241792),o(228244);var n=()=>o(803021),i=()=>o(646574),r=()=>o(874459),a=()=>o(998411),s=()=>o(396136),l=()=>o(899133),c=()=>o(513670),d=()=>o(824462),u=()=>o(876822),p=()=>o(749826),m=()=>o(773725),f=()=>o(247724),g=()=>o(614027),v=()=>o(239482),h=()=>o(122479),_=()=>o(15981),b=()=>o(148126),y=()=>o(214445);function S(e){return Boolean(e&&e.length>0)}function w(e){return Boolean(e.starting||e.ending)}function k(e){return Boolean(e)}const I={requireEditPermissions:k,isDeletedOnly:k,excludeTemplates:k,navigableBlockContentOnly:k,ancestors:S,parentId:function(e){return void 0!==e},createdBy:S,editedBy:S,verificationOwners:S,lastEditedTime:w,createdTime:w,isAdminModeDeletedPageSearch:k,blockTypes:function(e){return Boolean(e&&e.length>0)},inTeams:function(e){return S(l().iY(e))},includePublicPagesWithoutExplicitAccess:k,audience:function(e){return Boolean(e)},dev_excludedPages:S,dev_excludedTeams:S,databaseType:S,adminContentSearchDeletionStatus:S};function C(e){return e?{requireEditPermissions:I.requireEditPermissions(e.requireEditPermissions),isDeletedOnly:I.isDeletedOnly(e.isDeletedOnly),excludeTemplates:I.excludeTemplates(e.excludeTemplates),navigableBlockContentOnly:I.navigableBlockContentOnly(e.navigableBlockContentOnly),ancestors:I.ancestors(e.ancestors),parentId:I.parentId(e.parentId),createdBy:I.createdBy(e.createdBy),editedBy:I.editedBy(e.editedBy),createdTime:I.createdTime(e.createdTime),lastEditedTime:I.lastEditedTime(e.lastEditedTime),blockTypes:I.blockTypes(e.blockTypes),inTeams:I.inTeams(e.inTeams),dev_excludedPages:I.dev_excludedPages(e.dev_excludedPages),dev_excludedTeams:I.dev_excludedTeams(e.dev_excludedTeams)}:{requireEditPermissions:!1,isDeletedOnly:!1,excludeTemplates:!1,navigableBlockContentOnly:!1,ancestors:!1,parentId:!1,createdBy:!1,editedBy:!1,createdTime:!1,lastEditedTime:!1,blockTypes:!1,inTeams:!1,dev_excludedPages:!1,dev_excludedTeams:!1}}function x(e){const t=C(e);return Object.values(t).some((e=>Boolean(e)))}function T(e){const t=C(e),{navigableBlockContentOnly:o,...n}=t;return Object.values(n).some((e=>Boolean(e)))}function M(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n().sF;const a=r().OQ.notionDateToLuxon(e,{locale:t.locale});return(0,i().Cp)(a,o)}function P(e,t){const o=r().OQ.notionDateTimeToLuxon(e,t.locale);return(0,i().ZW)({value:o,preset:"medium_with_time"})}const A=(0,o(788860).vU)({startAndEnd:{defaultMessage:"{startDate} - {endDate}",id:"searchHelpers.betweenStartAndEndDates"},afterStart:{defaultMessage:"After {startDate}",id:"searchHelpers.afterStartDate"},beforeEnd:{defaultMessage:"Before {endDate}",id:"searchHelpers.beforeEndDate"}});function R(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n().sF,i="",r="";return e.starting&&(i="date"===e.starting.type?M(e.starting,t,o):P(e.starting,t)),e.ending&&(r="date"===e.ending.type?M(e.ending,t,o):P(e.ending,t)),i&&r?t.formatMessage(A.startAndEnd,{startDate:i,endDate:r}):i?t.formatMessage(A.afterStart,{startDate:i}):t.formatMessage(A.beforeEnd,{endDate:r})}function B(e){return Boolean(e.target&&e.target instanceof HTMLElement&&e.target.classList.contains("rdp-day"))}function E(e){const{environment:t,input:o,spaceId:n,publicAccessPermissionAncestorBlockId:i,searchSessionId:r,searchSessionFlowNumber:a,source:s,forcedClusterPattern:c,searchExperimentOverrides:d,recentPagesForBoosting:u,forcedBlockIds:p,excludedBlockIds:m}=e,{query:f,limit:g,debug:v}=o;return(0,b().Sr)(t)||!n?i?{type:l().n8.BlocksInAncestor,query:f.text.trim(),ancestorId:i,filters:f.filters,sort:f.sort,limit:g,source:s||"quick_find_public",debug:v,searchExperimentOverrides:d,searchSessionId:r,searchSessionFlowNumber:a,forcedClusterPattern:c,forcedBlockIds:p,excludedBlockIds:m}:void 0:{type:l().n8.BlocksInSpace,query:f.text.trim(),spaceId:n,limit:g,filters:f.filters,sort:f.sort,source:s||"quick_find",debug:v,searchExperimentOverrides:d,searchSessionId:r,searchSessionFlowNumber:a,forcedClusterPattern:c,recentPagesForBoosting:(0,_().Wk)(u),forcedBlockIds:p,excludedBlockIds:m}}function D(e){const{environment:t}=e,o=E(e);return!!o&&d().callApi({eventName:"search",environment:t,data:o})}class U{constructor(e){this.startingTimestamp=void 0,this.endingTimestamp=void 0,this.startingTimestamp=e.starting&&r().uO(e.starting,(0,a().r)()),this.endingTimestamp=e.ending&&r().uO(e.ending,(0,a().r)())}matches(e){return void 0!==e&&(!(void 0!==this.startingTimestamp&&e<this.startingTimestamp)&&!(void 0!==this.endingTimestamp&&e>this.endingTimestamp))}}class F{constructor(e){this.filters=void 0,this.activeFilters=void 0,this.ancestorFilterIds=void 0,this.parentFilterId=void 0,this.createdTimeMatcher=void 0,this.lastEditedTimeMatcher=void 0,this.teamFilterIds=void 0,this.dev_notInTeamFilterIds=void 0,this.dev_notInPagesFilterIds=void 0,this.filters=e,this.activeFilters=C(e),this.ancestorFilterIds=new Set(e.ancestors),this.parentFilterId=e.parentId,this.createdTimeMatcher=new U(e.createdTime),this.lastEditedTimeMatcher=new U(e.lastEditedTime),this.teamFilterIds=new Set(l().iY(e.inTeams)??[]),this.dev_notInTeamFilterIds=new Set(e.dev_excludedTeams),this.dev_notInPagesFilterIds=new Set(e.dev_excludedPages)}matches(e){let{blockModel:t,path:o}=e;if(!Boolean(this.activeFilters.isDeletedOnly)!==t.alive)return!1;if(this.activeFilters.excludeTemplates&&t.is_template)return!1;if(this.activeFilters.editedBy){const e=t.last_edited_by_id||t.last_edited_by;if(!e||!this.filters.editedBy.includes(e))return!1}if(this.activeFilters.createdBy){const e=t.created_by_id||t.created_by;if(!e||!this.filters.createdBy.includes(e))return!1}if(this.activeFilters.ancestors&&!o.some((e=>{let{value:t}=e;return this.ancestorFilterIds.has(t.id)})))return!1;if(this.activeFilters.parentId){if(o.length<2)return!1;const[e,{value:{id:t}}]=o;return this.parentFilterId===t}if(this.activeFilters.lastEditedTime&&!this.lastEditedTimeMatcher.matches(t.last_edited_time))return!1;if(this.activeFilters.createdTime&&!this.createdTimeMatcher.matches(t.created_time))return!1;if(this.activeFilters.inTeams){var n;const e=v().KU(o),t=null==e||null===(n=e.value)||void 0===n?void 0:n.id;if(!t||!this.teamFilterIds.has(t))return!1}if(this.activeFilters.blockTypes){const e=this.filters.blockTypes;if(!e)return!0;if(!e.includes(t.type))return!1}return!0}}function N(e){if(e&&!e.error)return e.value}function V(e){let{sort:t,unsorted:o,batchSize:n,currentUserId:i}=e;const r=Date.now();if("relevance"!==t.field)return o;const{currentSpaceStore:a}=u().default.state,s=a&&a.id;if(i&&s&&"search_frecency_store"===p().default.getGroup("search_local_ranking_new_frecency_and_score")){const e=e=>{const t="number"==typeof e.score?e.score:1,o=(0,y().s$)({spaceId:s,userId:i,pageId:e.id,now:r,weightForVisit:g().MV})??1;e.frecencyScore=o;const n=e.personalizationBoost??1;return-1*t*Math.max(o,n)};return c().MR(o,e)}const l=c().yo(o,n).map((e=>m().Z.sortFrecencyHighToLow({items:e,now:r,currentUserId:i,recordFrecency:!0})));return c().xH(l)}function L(e){const{localResults:t,serverResults:o}=e;if(t||o){if(t&&o){const e=new Set(t.map((e=>e.id)));return t.map((e=>{const t=(n=e.id,null==o?void 0:o.find((e=>e.id===n)));var n;const i=(null==(r=t)?void 0:r.originalPosition)??e.originalPosition;var r;const a=[...new Set([...e.badges??[],...(null==t?void 0:t.badges)??[]])];return{...e,originalPosition:i,serverEventProperties:(null==t?void 0:t.serverEventProperties)??e.serverEventProperties,sources:[...e.sources,...(s=t,(null==s?void 0:s.sources)??[])],badges:a};var s})).concat(o.filter((t=>!e.has(t.id))))}return t??o}}function O(e){var t,o;const{focusedIndex:n,searchResultStore:i}=e,r=L({localResults:null===(t=i.state.localResults)||void 0===t?void 0:t.results,serverResults:null===(o=i.state.serverResults)||void 0===o?void 0:o.results}),a=null==n?void 0:n.global,s=null==n?void 0:n.local;if(void 0===a||void 0===s)return;const l=[...i.state.fixedActionResults??[],...i.state.queryBasedActionResults??[]],c=a<l.length?l[a]:void 0;if(c)return c;const d=a-l.length;if(!r||r.length<=0||d<0)return;const u=r[d];return u?{type:"page_result",value:{index:{global:a,local:s},selectedResult:u}}:void 0}function Z(e){const{existingResults:t,newPageResults:o}=e;if(void 0!==t||void 0!==o){if(t&&o){const e=[...t.results],n=new Set(t.results.map((e=>e.id)));return e.push(...o.results.filter((e=>!(e.sources.includes(l().vp.ElasticsearchRandom)&&e.originalPosition<t.results.length)&&!n.has(e.id)))),{...o,results:e,total:o.total}}return t??o}}function j(e){const{intentBasedGrouping:t,localResults:o,serverResults:n}=e,i=L({localResults:o,serverResults:n})??[],r=i.filter((e=>e.sources.includes(l().vp.ElasticsearchUniqueID))),a=i.filter((e=>!e.sources.includes(l().vp.ElasticsearchUniqueID)));return t?{type:"intent-based-grouping",sections:{uniqueIdSearchResults:r,jumpBackInSearchResults:a.filter((e=>e.sources.includes(l().vp.Local))),serverOnlySearchResults:a.filter((e=>!e.sources.includes(l().vp.Local)))},allSearchResults:i}:r.length>0?{type:"unique-id",sections:{uniqueIdSearchResults:r,nonUniqueIdSearchResults:a},allSearchResults:i}:{type:"all",sections:{allSearchResults:i},allSearchResults:i}}function K(e,t){const o=e.device.isMobile?2:5;return t.slice(0,o)}function z(e){const{mainEditorCurrentBlockStore:t}=u().default.state,o=t&&h().IJ(e,t);return{hasPublicAccessPermission:Boolean(o),publicAccessPermissionAncestorBlockId:(null==o?void 0:o.from.table)===s().iU?null==o?void 0:o.from.blockId:void 0}}function H(e){let{environment:t,searchResultsSection:o,modalBodyMenu:n,searchFilterMenu:i,actionItemCount:r}=e;if(!o)return 0;let a=0;if(t.device.isMobile){if(n instanceof Element&&null!==i){const e=n.getElementsByClassName(f().GZn)[0];e instanceof Element&&(a=e.clientHeight-i.getClientHeight()+e.scrollTop)}}else a=o.getBoundingClientRect().height+o.scrollTop;let s=0,l=0;const c=o.getElementsByClassName(f().Xjk);for(let u=0;u<c.length;u++){l+=c[u].clientHeight}const d=o.getElementsByClassName(f().ulv);for(let u=0;u<d.length;u++){const e=d[u];if(!(a-l>e.clientHeight/2))break;s+=1,l+=e.clientHeight}return s-r}function q(e){if(void 0===e)return[];return e.map((e=>({id:e.id,score:e.score,localSource:e.localSource,sources:e.sources,spaceId:e.spaceId})))}function W(e){var t;if(void 0!==(null==e?void 0:e.highlightBlockId)&&void 0===(null===(t=e.highlight)||void 0===t?void 0:t.title))return e.highlightBlockId}},321930:(e,t,o)=>{o.d(t,{Bj:()=>v,D_:()=>y,Ib:()=>g,XL:()=>b,dq:()=>h,kC:()=>_,v5:()=>f});o(670560),o(267602),o(653476),o(470928),o(749411),o(30005),o(241792);var n=()=>o(220427),i=()=>o(387934),r=()=>o(396136),a=()=>o(426546),s=()=>o(843200),l=()=>o(696459),c=()=>o(282662),d=()=>o(32969),u=()=>o(965903),p=()=>o(718959),m=()=>o(435441);function f(e,t){return(0,a().DY)(t,(t=>t.value.store===e))}function g(e,t){const o=f(e,[t]);if(o&&o.length>0)return o[o.length-1]}function v(e){const t=e.container??u().default.getCurrentDefaultContainer();if(!t)return new(a().DG)([]);const o=[];d().C.forEach((n=>{const i=n.getNode();if(!i)return;if(n.getContextSelectableContainer()!==t)return;if(!(n.props.canSelect||e.includeNonSelectableListContainer&&n.props.isListContainer))return;const r=n.props.store;o.push({node:i,store:r,component:n})}));var i;return(i=o,(0,a().Yc)({values:i,compareOrder:(e,t)=>(0,n().Z)(e.node,t.node),isAncestor:(e,t)=>m().r3(e.node,t.node)}))||new(a().DG)([])}function h(e){let{rootStore:t,...o}=e;const n=t||(0,p().RM)();if(!n)return;const i=v(o);return new(a().mp)({store:n,node:void 0,component:void 0},i.children)}function _(e){const{rootStore:t,root:o,target:n}=e,i=(0,a().DY)(o.children,(e=>e===n));if(void 0===i)return;const r=[t];let s=t;for(const a of i){const e=a.value.store;if(!e)return;const t=s.getTransclusionReferenceTargetStore()??s;let o=t.getContentStores();const n=t.getAutomationStore();if(n){const e=n.getActionStores();o=o.concat(e.flatMap((e=>e.getBlockStores())))}const i=o.find((t=>t.id===e.id));if(!i)return;r.push(i),s=i}return r}function b(e){var t;const{treeOperation:o,deleteFrom:n}=e,i=[],a=null===(t=o.deleteFromParent.value.store)||void 0===t?void 0:t.getContentStore(),s=o.deletingChildren.map((e=>e.value.store)).filter(l().$K);for(const l of s){const e=l.getRecordStoreUIParent(),t=e&&e.table===r().iU&&1===e.path.length&&"content"===e.path[0]&&e,o="record-store-parent"===n&&t||a;o&&i.push({parent:o,childToRemove:l})}return i}function y(e){const{transaction:t,treeOperation:o,deleteFrom:n,observer:i,preferHighLevelOperations:r}=e;switch(o.operation){case"delete":return void b({treeOperation:o,deleteFrom:n}).forEach((e=>{let{parent:n,childToRemove:r}=e;const a={parentStore:n,childToRemoveStore:r,transaction:t};c().Od(a),null==i||i.onRemove(o,a)}));case"insert":{var a;const e=o.insertIntoParent.value.store,n="transclusion_reference"===(null==e?void 0:e.getType())?e.getTransclusionReferenceTargetStore():e,i=null==n?void 0:n.getContentStore(),s=null===(a=o.adjacentSibling)||void 0===a?void 0:a.value.store,l=o.insertChildren.map((e=>e.value.store));("listAfter"===o.direction&&s||"listBefore"===o.direction&&!s)&&l.reverse();for(const a of l)if(i&&a)if("listAfter"===o.direction){const e={insertStore:a,parentStore:i,transaction:t,afterStore:s,preferHighLevelOperations:r};c().BE(e)}else{const e={insertStore:a,parentStore:i,transaction:t,beforeStore:s};c().Vt(e)}return}case"move":for(const e of(0,s().Z)(o))y({transaction:t,treeOperation:e,deleteFrom:n,observer:void 0,preferHighLevelOperations:r});return void(null==i||i.onMove(o));default:(0,l().t1)(o)}}!function(){const{span:e,object:t,div:o,CONTAINER_STYLE:n}=i().devToolsHyperscript;(0,i().Rw)({canFormat:e=>Boolean(e&&e instanceof a().mp),header:(i,r)=>e(n,e({},t(i,{useDefaultFormatter:!0})),o({},t(i.value.store)),i.children.length?o({},t(i.children)):void 0),hasBody:(e,t)=>!1,body:e=>null})}()},339523:(e,t,o)=>{o.d(t,{J2:()=>g,Mn:()=>m,iZ:()=>_,jn:()=>y,mh:()=>v,sQ:()=>f,sY:()=>b,x7:()=>h});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(241792),o(228244);var n=()=>o(156642),i=()=>o(881688),r=()=>o(876822),a=()=>o(960562),s=()=>o(482162),l=()=>o(826955),c=()=>o(965903),d=()=>o(271308),u=()=>o(239482),p=()=>o(550054);function m(e){return!e.isPhone}function f(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&e instanceof l().G)return e;let t=e;for(;;){if(t=t.getRecordStoreUIParent(),!t)return;if(t&&t instanceof l().G&&t!==e)return t}}function g(e){const t=f(e);if(t)return u().Dg(t)}function v(e){const t=e.getType(),o=e.getFormat(),r=e.getModel(),a=e.getProperties();if(t&&r)return t&&(0,n().XD)(t,o)&&"factory"!==t&&!(0,n().S9)(t)?e.getBlockTitleStore():r.isInlineCollectionView()?e.getTitleStore():r.isType(n().oe)&&a&&a.caption?e.getCaptionStore():t===n().Ti.table?i().f8({simpleTableStore:e,rowIndex:0,columnIndex:0}):void 0}function h(e){const t=f(e);if(t)return t&&(t===r().default.state.mainEditorCurrentBlockStore||s().default.state.open&&t===s().default.state.targetStore||t.isPost())}function _(e){const{stores:t,phase:o}=c().default.state;return 1===t.length&&t[0]===e&&o===c().SelectionPhase.Editing}function b(e){const{stores:t,phase:o}=c().default.state,n=new Set(t.map((e=>e.id))),i=u().eG(e),r=n.has(e.id),s=i.some((e=>n.has(e.id))),l=r||s;return!(o!==c().SelectionPhase.Selected||!l||a().default.state.isDragging)}function y(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){const t=(0,d().W9)(e);if(t){const e={multiSelection:t,mode:"editing",forceExtendAnnotations:{}};return(0,p().lV)(e)}}return e.map((e=>e.getTitleValue())).join("\n")}},714966:(e,t,o)=>{o.d(t,{u:()=>r,x:()=>i});const n=new Map;function i(e){return n.get(e)}function r(e,t){n.set(e,t)}},332504:(e,t,o)=>{o.d(t,{d:()=>s,f:()=>a});var n=()=>o(446866),i=()=>o(876822),r=()=>o(749826);function a(e){return e?32:18}function s(){var e;if(r().default.checkGate({gateName:"ks_dev_settings"}))return!1;const t=null===(e=i().default.state.currentUserStore)||void 0===e?void 0:e.getEmail();return"makenotion.com"===(0,n().Gd)(t??"")}},924390:(e,t,o)=>{o.d(t,{Z:()=>n});const n=function(e){return!(e.getParentTable()===o(752778).vF)||e.isTemplate()}},515329:(e,t,o)=>{o.d(t,{F6:()=>m,Jk:()=>d,SG:()=>p,kC:()=>f,oI:()=>g});o(670560);var n=()=>o(235484),i=()=>o(939112),r=()=>o(657120),a=()=>o(876822),s=()=>o(749826),l=()=>o(826955),c=()=>o(239482);function d(e){const t=c().eG(e),o=[];for(const n of t)"block"===n.table&&o.push({blockStore:n,slackIntegrationStore:(0,l().Kv)(e,{table:i().s_,id:n.id})});for(const{blockStore:n,slackIntegrationStore:i}of o)if(i.isReady()){if(i.getKeyStore("enabled").getValue())return{blockStore:n,slackIntegrationStore:i}}return{blockStore:e,slackIntegrationStore:(0,l().Kv)(e,{table:i().s_,id:e.id})}}function u(){var e;const t=null===(e=a().default.state.currentSpaceStore)||void 0===e?void 0:e.getBotSettingsStore().getValue();return(0,r().hU)({spaceBotSettings:t,integrationId:n().nO,env:"production"})}function p(){return s().default.checkGate({gateName:"legacy_slack_notifications"})}function m(){return u()||!1}function f(){return u()||!1}function g(){return!!u()&&s().default.checkGate({gateName:"enable_notion_activity_notifications_in_slack"})}},345918:(e,t,o)=>{o.d(t,{G$:()=>ee,cJ:()=>ue,zP:()=>ke,Q6:()=>Ae,w3:()=>me,rg:()=>J,ly:()=>pe,g4:()=>fe,a2:()=>ne,_o:()=>oe,kO:()=>Re,KA:()=>ae,Wd:()=>le,XD:()=>de,rn:()=>ce,TC:()=>be,lQ:()=>_e,C:()=>Se,Fn:()=>ye,di:()=>he,Q9:()=>Ie,HR:()=>Ee,kt:()=>Pe,Cx:()=>ge,XY:()=>De,Dj:()=>Be,j9:()=>we,CV:()=>ve,iX:()=>se,Ib:()=>xe,QS:()=>Me,ww:()=>Ce,cD:()=>Te});o(821057),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(470928),o(241792);var n=()=>o(435308),i=()=>o(506347),r=()=>o(575861),a=()=>o(235484),s=()=>o(527327),l=()=>o(530980),c=()=>o(993407),d=()=>o(396136),u=()=>o(255933),p=()=>o(989478),m=()=>o(691970),f=()=>o(630611),g=()=>o(282017),v=()=>o(657120),h=()=>o(9835),_=()=>o(513670),b=()=>o(696459),y=()=>o(291338),S=()=>o(13382),w=()=>o(401411),k=()=>o(22628),I=()=>o(221662),C=()=>o(205228),x=()=>o(591914),T=()=>o(836842),M=()=>o(707138);var P=()=>o(772529),A=()=>o(589525),R=()=>o(731710),B=()=>o(297861),E=()=>o(876822),D=()=>o(54649),U=()=>o(467806),F=()=>o(619779),N=()=>o(749826),V=()=>o(458335),L=()=>o(826955),O=()=>o(431687),Z=()=>o(56764),j=()=>o(18281),K=()=>o(718959),z=()=>o(286338),H=()=>o(429725),q=()=>o(527278),W=()=>o(6006),G=()=>o(906591),$=()=>o(239482),Q=()=>o(852465),Y=()=>o(91502);async function J(e,t){var o;const n=e.currentUser.id,i=t.getSpaceStore();if(!i||!n)return;await t.load();t.hasRemoteSharedPages()||await I().l({environment:e,spaceId:i.id,userId:n});const r=(0,K().k_)(e).state;if(!r)return;const a=(0,G().B8)(),s=(0,G().DP)({sidebarOrder:a,sidebarState:r,lockedSidebarExpEnabled:!1});for(const d of s)switch(d){case"favorites":return t.getBookmarkedPages()[0];case"teamspaces":const e=X(t);if(e)return e;break;case"shared":return r.visibleSharedPagesStores[0];case"private":const o=r.visiblePrivatePagesStores;if(o.length>0)return o[0];break;case"workspace":return t.getWorkspacePages()[0];default:(0,b().t1)(d)}const l=X(t);if(l)return l;const c=D().Z.getSharedPagesState({spaceId:i.id,userId:n}),u=null==c||null===(o=c.currentPageIds)||void 0===o?void 0:o[0];return u?L().G.createChildStore(i,{table:d().iU,id:u,spaceId:i.id}):void 0}function X(e){const t=e.getTeamsStores();for(const o of t){const e=o.getTeamPagesStores();if(e.length>0)return e[0]}}const ee=7,te={};function oe(e){const t=e.type,o=te[t]??new(s().Uw);return te[t]||(te[t]=o),o.memo((()=>new(n().default)((()=>ne(e)),{debugName:"pageContextStore"})),[e.environment,e.spaceViewStore,e.userSettingsStore])}function ne(e){const{environment:t,spaceViewStore:o,userSettingsStore:n,type:i}=e,r=o.getSpaceId();let a="shared"===i?ae(t,o):function(e,t){const o=t.getPrivatePages(e),n=(0,G().Wu)({spaceViewStore:t});if(n)return ie(o);return o}(t,o);if(a=a.filter((e=>{const{isCopyIndicator:t,shouldShowAsLoadingSpinner:o}=(0,A().ah)(e);return!t||t&&o})),!r)return{allPagesStores:a,visiblePagesStores:a};if("private"===i||"shared"===i&&(0,z().mq)(t)){const e=(0,G().S4)({spaceViewStore:o,type:i});return{allPagesStores:a,visiblePagesStores:e.truncationLimit===c().Ng?a:a.slice(0,e.truncationLimit)}}if(!n.hasUserPinnedToOutliner({type:G().iE[i],spaceId:r}))return{allPagesStores:a,visiblePagesStores:a.slice(0,ee)};const s=new Set(a.map((e=>{let{id:t}=e;return t})));return{allPagesStores:a,visiblePagesStores:o.getPinnedSharedPages().filter((e=>{let{id:t}=e;return s.has(t)}))}}function ie(e){const t=e.map((e=>{if(!e.isDefined())return;const t=e.getLastEditedTime()||e.getCreatedTime();return t?{store:e,timestamp:t}:void 0})).filter(b().$K);return _().MR(t,(e=>{let{timestamp:t}=e;return t})).reverse().map((e=>e.store))}const re=new(s().Uw);function ae(e,t){const o=e.currentUser.id,n=t.getSpaceStore();if(n&&o){const i=D().Z.getSharedPagesState({spaceId:n.id,userId:o}),r=i&&i.currentPageIds?i.currentPageIds:[],a=re.memo((()=>function(e,t){return new(O().P)({debugName:"isValidSharedRemotePage",memoizeRecursion:!1,deepEquals:!1,compute:function(o){const n=e.currentUser.id;if(!n)return!1;const i=(0,x().VK)(t,n),r=(0,$().u3)(o);let a=!1;return r&&((0,Q().OY)(r)?a=!(0,Y().bq)()&&e.currentUser.id&&t.isDefined()&&o.hasSpacePermission()?Boolean(i.isMember()):r.id!==o.id&&r.canRead():(0,Q().Y)(r)&&(a=Boolean(r.isMemberOrGuest(e.currentUser.id,F().Z.state.spacePermissionGroupIds))&&r.canRead())),!(!((0,Q().Oh)(o)&&o.canRead()&&o.isNavigableBlock()&&o.isSharedPage(t,e))||(0,$().wf)(o)||a)}})}(e,n)),[e,n]),s=_().oA(r.map((e=>{const t=L().G.createChildStore(n.getPagesStore(),{table:d().iU,id:e,spaceId:n.id});if(a.getStateFor(t))return t}))),l=new Set(s.map((e=>e.id)));let c;const u=t.getSharedPageStores(),p=0===u.length;if(p){c=de(e,n).filter((e=>{l.has(e.id)}))}else c=u.filter((e=>!(0,$().wf)(e)&&l.has(e.id)));(0,R().As)({use_legacy_shared_pages_ordering:p&&c.length>0});const m=[...c,...s],f=_().mN(m,(e=>e.id));if((0,z().mq)(e)){const{sortOption:e}=(0,G().S4)({spaceViewStore:t,type:"shared"});if("lastEdited"===e)return ie(f)}return f}return[]}async function se(e){const{disableRedirectUrl:t,environment:o,blockNoAccessRedirect:n}=e;o.device.isMobileNative&&(0,T().XG)("mobile_app_launch_blank_page")||await k().w();const{id:r}=o.currentUser,{url:a,spaceId:s,route:c}=await S().Ie(o),d=y().qd(r),v=w().th(r),h=g().DD();if(!r)throw new Error("User not logged in.");const I=new(L().U6)(o,{table:p().KJ,id:r}),C=new(L().r9)(o,{table:m().dx,id:r}),x=new(L().vO)(o,{table:f().Sr,id:r}),[M,A]=await Promise.all([I.awaitNonNullValue(),C.awaitNonNullValue(),x.awaitNonNullValue()]),R=s?me(s):void 0,E=function(e){const{environment:t,lastVisitedUrl:o}=e,n=t.RouterStore.state.initialRoute;if("page"===n.name)return{url:o,isPersonalHomeUrl:!1};if(t.device.isMobileNative&&t.device.isPhone&&(0,T().XG)("mobile_app_launch_blank_page"))return{url:"/blank",isPersonalHomeUrl:!1};return function(e){const{environment:t,lastVisitedUrl:o,lastVisitedSpaceView:n,lastVisitedSpace:r}=e,a=fe(t,{space:null==r?void 0:r.getModel(),spaceView:null==n?void 0:n.getModel()});switch(a){case"last_visited_page":return o?{url:o,isPersonalHomeUrl:!1}:void 0;case"first_page":case"chat":return;case"personal_home":if(!n)return;const e=P().Al(n);if(!e)return;return{url:(0,H().ZP)({store:e,preferPublicLink:!1,pageVisitSource:i().tY.DefaultHome}),isPersonalHomeUrl:!0};default:(0,b().t1)(a)}}(e)}({environment:o,lastVisitedUrl:a,lastVisitedSpaceView:R,lastVisitedSpace:s?L().H2.createChildStore(C,{table:u().bx,id:s}):void 0}),D=null==E?void 0:E.url,U=!!M&&Boolean(M.onboarding_completed),F=function(e){const{userValue:t}=e;if(!t)return!1;if(Boolean(t.mobile_onboarding_completed))return!0;return(0,B().Y)("isAutomatedQABuild")}({userValue:M}),N=function(e,t){const o=l().kk5.fromValue(m().dx,e),n=o.getSpaceViewPointers();return n&&n.length>0?L().V9.createChildStore(t,n[0]):void 0}(A,C);N&&await N.load();const V=N?N.getSpaceStore():void 0;if(c&&!t){const e=await w().Jv({environment:o,request:{type:"block-space",spaceId:s,...c}});if(e){const t="page"===c.name&&c.blockId?c.blockId:void 0;let i=!1;if(n&&"page"===c.name){const{blockId:e,spaceId:t}=c;if(e){const n=new(L().G)(o,{table:"block",id:e,spaceId:t});await n.load(),i="none"===n.getRole()}}const r=["read_and_write","comment_only","reader"].includes(e.publicAccessRole);if(!i&&e&&!_().xb(e)&&(e.canJoinSpace||e.userHasExplicitAccess||!r))return{userStore:I,userSettingsStore:x,userRootStore:C,firstSpace:V,firstSpaceView:N,lastVisitedSpaceView:R,redirectUrl:D,forkPageBlockId:d,publicAccessPageId:v,oauthAuthorizationParams:h,redirectPageId:t,hasExplicitAccessToRedirectPage:e.userHasExplicitAccess,canRequestAccessToRedirectPage:e.canRequestAccess,redirectSpaceName:e.spaceName,redirectSpaceId:e.spaceId,canJoinRedirectSpace:e.canJoinSpace,onboardingCompleted:U,mobileOnboardingCompleted:F,isPersonalHomeRedirect:(null==E?void 0:E.isPersonalHomeUrl)??!1,lastVisitedUrl:a,inviteCode:void 0}}}return{userStore:I,userSettingsStore:x,userRootStore:C,firstSpace:V,firstSpaceView:N,lastVisitedSpaceView:R,forkPageBlockId:d,publicAccessPageId:v,oauthAuthorizationParams:h,redirectUrl:void 0,redirectPageId:void 0,hasExplicitAccessToRedirectPage:void 0,canRequestAccessToRedirectPage:void 0,redirectSpaceId:void 0,canJoinRedirectSpace:void 0,onboardingCompleted:U,mobileOnboardingCompleted:F,redirectSpaceName:void 0,isPersonalHomeRedirect:!1,lastVisitedUrl:void 0,inviteCode:void 0}}function le(e,t){return L().t1.fromV1(t).getIcon()}function ce(e,t){const o=t.getName(),n=q().Z.getIntl().formatMessage({defaultMessage:"Untitled workspace",id:"spaceHelpers.getSpaceName.untitledWorkspace.name"});if(o)return o||n;{const o=V().Z.getData(e,{spaceId:t.id});if(o)return o.name||n}return n}function de(e,t){const o=t.getPagesStore();return function(e,t){const o=e.currentUser.id,n=t.getPagesStore().getValue();if(n&&o){const e=Z().Z.getSpaceInaccessiblePages(t.id,o);return e?n.filter((t=>!e.has(t))):n}return[]}(e,t).map((e=>L().G.createChildStore(o,{table:d().iU,id:e})))}function ue(e,t,o){const n=V().Z.getData(e,{spaceId:t}),i=!Boolean(null==n?void 0:n.domainIsAutogenerated),r=_().oA([i&&(null==n?void 0:n.domain),"invite",o]).join("/");return`${C().default.domainBaseUrl}/${r}`}function pe(e){let{environment:t,spaceStore:o,inviteLinkCode:n}=e;if(void 0===n)return;return ue(t,o.id,n)}function me(e){const{currentUserRootStore:t}=E().default.state;return null==t?void 0:t.getSpaceViewStores().find((t=>t.getSpaceId()===e))}function fe(e,t){var o;let{space:n,spaceView:i}=t;const r=function(e,t){var o,n;if(null!==(o=e.mobileNative)&&void 0!==o&&o.supportsNativeHomeOnPhone())return{setting:"last_visited_page",fromExplicitSetting:!1};const i=null==t||null===(n=t.getSettings())||void 0===n?void 0:n.on_app_start;if((0,b().$K)(i))return{setting:i,fromExplicitSetting:!0};const{isPhone:r,isMobileNative:a}=e.device,s=!(r&&a||function(){const e=E().default.state.spaceTransitionStatus;let t;switch(e){case"joiningOrCreatingSpace":t=!0;break;case"switchingToOrLoadingSpace":case"notTransitioning":t=!1;break;default:(0,b().t1)(e)}return t||M().default.state.isOnboarding}());return{setting:s?"personal_home":"last_visited_page",fromExplicitSetting:!1}}(e,i);if("personal_home"!==r.setting){const e=r.setting;return(0,W().pJ)({spaceView:i,preference:e}),e}const a=null==i?void 0:i.getSpaceId(),s=null==i?void 0:i.getUserId(),l=!N().default.isStatsigEnabledAndInitialized()||!a||!s||a!==(null===(o=E().default.state.currentSpaceStore)||void 0===o?void 0:o.id)||s!==e.currentUser.id;let c;c=r.fromExplicitSetting?l?function(e){var t;const o=null==e||null===(t=e.getPersonalHomeSettings())||void 0===t?void 0:t.home_landing_page_enabled;switch(o){case"home_landing_page_with_default":case"home_landing_page_without_default":return!0;case"no_home_landing_page":case void 0:return!1;default:(0,b().t1)(o)}}(i):(0,Y().QI)():l?function(e){var t;const o=null==e||null===(t=e.getPersonalHomeSettings())||void 0===t?void 0:t.home_landing_page_enabled;switch(o){case"home_landing_page_with_default":return!0;case"home_landing_page_without_default":case"no_home_landing_page":case void 0:return!1;default:(0,b().t1)(o)}}(i):(0,Y().MS)(n);const d=c?"personal_home":"last_visited_page";return(0,W().pJ)({spaceView:i,preference:d}),d}function ge(e){return!!e&&!e.canRead()}function ve(e){return!!e&&e.getZeroRetentionEnabled()}function he(e,t){const o=(0,j().CM)(t)||[],n=e.currentUser.id;for(const i of o)if(i.userId===n&&"none"===i.role&&i.isTeamGuest)return!0;return!1}function _e(e){return!!e&&e.canAdmin()}function be(e){var t;let{groupId:o}=e;return null===(t=U().Z.state.permissionGroupsAndMemberCounts.find((e=>e.group.group_id===o)))||void 0===t?void 0:t.group}function ye(e){const t=E().default.state.currentSpaceStore,o=e.currentUser.id;return Boolean(t&&o&&(0,x().VK)(t,o).isWorkspaceOwner())}function Se(){const e=E().default.state.currentSpaceStore;return!(null==e||!e.isDefined())&&"enterprise"===e.getSubscriptionTier()}function we(e){const t=e.getSubscriptionTier();return"plus"===t||"business"===t||"enterprise"===t}function ke(e){const t=null==e?void 0:e.getCreatedTime();return t?(0,r().O5)(t):null}function Ie(e){const t=ke(e);return null!==t&&t<=7}function Ce(e){return(0,b().lm)(e)&&"none"!==e.role?e.planType:void 0}function xe(e){return(0,b().lm)(e)&&"none"!==e.role?e.createdTime:void 0}function Te(e){return(0,b().lm)(e)&&"none"!==e.role?e.subscriptionTier:void 0}function Me(e){return(0,b().lm)(e)&&"none"!==e.role?e.memberCount:void 0}function Pe(e){return N().default.checkGate({gateName:"guest_invite_requests"})&&(null==e?void 0:e.getEnableGuestInviteRequest())}function Ae(e){return Boolean(Pe(e))&&!Boolean(null==e?void 0:e.canAdmin())}function Re(){var e,t,o,n,i,r,a,s,l,c,d,u,p,m;const{currentSpaceStore:f,currentSpaceViewStore:g}=E().default.state,v=null==f?void 0:f.getSpaceSurveyData(),_=null==g?void 0:g.getUserSurveyData();return{function:null!=_&&null!==(e=_.function)&&void 0!==e&&e.value?(0,h().L5)(null==_||null===(t=_.function)||void 0===t?void 0:t.value):void 0,role:null!=_&&null!==(o=_.role)&&void 0!==o&&o.value?(0,h().Gy)(null==_||null===(n=_.role)||void 0===n?void 0:n.value):void 0,educationRole:null==_||null===(i=_.education_role)||void 0===i?void 0:i.value,educationLevel:null==_||null===(r=_.education_level)||void 0===r?void 0:r.value,useCases:null!=v&&null!==(a=v.use_cases)&&void 0!==a&&a.value?(0,h().On)(null==v||null===(s=v.use_cases)||void 0===s?void 0:s.value):void 0,companySize:null!=v&&null!==(l=v.company_size)&&void 0!==l&&l.value?(0,h().jU)(null==v||null===(c=v.company_size)||void 0===c?void 0:c.value):void 0,intent:null!=v&&null!==(d=v.intent)&&void 0!==d&&d.value?(0,h().Kj)(null==v||null===(u=v.intent)||void 0===u?void 0:u.value):void 0,categories:null==_||null===(p=_.categories)||void 0===p?void 0:p.value,collaborativeIntent:null==v||null===(m=v.collaborative_intent)||void 0===m?void 0:m.value}}function Be(e){return e.getSetting("disable_notion_calendar")}function Ee(e){return Boolean(e.getSetting("self_serve_enterprise_eligible"))}function De(e){let{env:t,spaceStore:o}=e;return!(0,v().hU)({spaceBotSettings:o.getBotSettings(),integrationId:a().Dv,env:t})||ge(o)||Be(o)}},907099:(e,t,o)=>{o.d(t,{N5:()=>m,c7:()=>u,kF:()=>d,rm:()=>p});o(267602),o(653476),o(470928),o(241792);var n=()=>o(933868),i=()=>o(989478),r=()=>o(513670),a=()=>o(591914),s=()=>o(467806),l=()=>o(277533);const c=(0,o(788860).vU)({untitledGroupName:{defaultMessage:"Untitled",id:"spaceBasicSettings.spacePermissionsSettings.groupsTab.defaultNewGroupName"}});function d(e){const{intl:t,groupName:o}=e;return o||t.formatMessage(c.untitledGroupName)}function u(e){var t;return(null===(t=s().Z.state.permissionGroupsAndMemberCounts.find((t=>t.group.group_id===e.groupId)))||void 0===t?void 0:t.memberCount)??0}function p(e){const{userIds:t,limit:o,spaceStore:n}=e;if(!n)return{countRemainingUsers:0,limitedUserStores:[]};const a=o?t.slice(0,o):t;return{limitedUserStores:r().oA(a.map((e=>l().U.createChildStore(n,{table:i().KJ,id:e})))),countRemainingUsers:t.length-a.length}}function m(e){let{userStores:t,spaceStore:o,intl:i}=e;return r().MR(t,(e=>e.getSearchName(i))).sort(((e,t)=>{if(!o)return 0;const i=(0,a().VK)(o,e.id).getMembershipTypeAsRoleOrNone(),r=(0,a().VK)(o,t.id).getMembershipTypeAsRoleOrNone();return i&&r?n().Av.indexOf(r)-n().Av.indexOf(i):0}))}},963332:(e,t,o)=>{o.r(t),o.d(t,{getDataForStatsigUser:()=>u,waitForStatsigInitialization:()=>d});var n=()=>o(730120),i=()=>o(629719),r=()=>o(839002),a=()=>o(345918),s=()=>o(836842),l=()=>o(876822),c=()=>o(214488);async function d(e){const{environment:t,initializeStatsigResult:o}=e;if(o.initializedOnServer)try{const{timeout:e}=await(0,r().OI)(function(e){const{environment:t}=e;if(t.device.isMobile)return 0;switch(t.device.platform){case"browser":switch(t.device.os){case"chrome":return 604;case"linux":return 613;case"mac":return 550;case"windows":return 633}break;case"electron":switch(t.device.os){case"chrome":return 1555;case"mac":return 1680;case"windows":return 1931}}return 700}({environment:t}),o.finishInitializePromise);return{didStatsigBootupTimeout:e}}catch(n){return{didStatsigBootupTimeout:!1}}return{didStatsigBootupTimeout:!1}}function u(e){var t,o,r,d,u;const{environment:p,deviceId:m,browserId:f}=e,{device:g,currentUser:v}=p,{currentUserStore:h,currentUserSettingsStore:_,currentSpaceStore:b}=l().default.getState(),y=v.id,S=null==h?void 0:h.getEmail(),w=null==b?void 0:b.id,{function:k,role:I,companySize:C,useCases:x}=a().kO(),T=w?null===(t=c().Z.getData(p,{spaceId:w}))||void 0===t?void 0:t.billingData:void 0;return{stableId:null===(o=s().StatsigInitializer.statsigStageTwoUser.customIDs)||void 0===o?void 0:o.stableID,userId:y,device:g,spaceId:w,userEmail:S,deviceId:m,browserId:f,locale:null==_||null===(r=_.getSettings())||void 0===r?void 0:r.preferred_locale,spaceCreatedTime:null==b?void 0:b.getCreatedTime(),spaceCreatedDate:null!=b&&b.getCreatedTime()?n().ou.fromMillis(null==b?void 0:b.getCreatedTime()).toFormat("yyyy-MM-dd"):void 0,subscriptionTier:(0,i().zt)(null==T?void 0:T.subscription),isSalesAssistedPlan:(0,i().Rd)(null==T?void 0:T.subscription),planType:null==b?void 0:b.getPlanType(),signupTime:null==_||null===(d=_.getSettings())||void 0===d?void 0:d.signup_time,domainType:null==_||null===(u=_.getSettings())||void 0===u?void 0:u.domain_type,persona:k,teamRole:I,useCases:x,companySize:C}}},506348:(e,t,o)=>{o.d(t,{ZL:()=>m,lr:()=>c,mn:()=>p,sK:()=>l});var n=()=>o(799891),i=()=>o(35980),r=()=>o(687117),a=()=>o(593616),s=()=>o(773725);async function l(){if("storage"in navigator&&"estimate"in navigator.storage){const{quota:e,usage:t}=await navigator.storage.estimate();if("number"==typeof e&&"number"==typeof t)return{quota:e,usage:t}}if("webkitPersistentStorage"in navigator){const e=navigator.webkitPersistentStorage;if("queryUsageAndQuota"in e)return new Promise((t=>{e.queryUsageAndQuota(((e,o)=>{t("number"==typeof o&&"number"==typeof e?{usage:e,quota:o}:void 0)}),(()=>t(void 0)))}))}}async function c(){if(navigator.storage&&navigator.storage.persist)try{const e=await navigator.storage.persist();return n().clientLogglyEnvironmentData.isPersistent=e,e}catch(e){console.trace("Persistence is disabled",e)}}const d=.9,u=15*o(326966).js;function p(e){const{quota:t,usage:o}=e;return o/t<=d&&t>=u}function m(e){const{isMobileNative:t,userId:o}=e??{},n=a().Z.state;let l;!0===t&&(l=r().Z.get()),o?(s().Z.clearForUser(o),i().Z.clearStorageForUser(o)):localStorage.clear(),a().Z.setState(n),!0===t&&l&&r().Z.set(l)}},641506:(e,t,o)=>{o.d(t,{Dp:()=>s,jy:()=>u,mK:()=>r,pd:()=>l,wK:()=>c,x6:()=>d,yv:()=>a});o(241792);var n=()=>o(696459),i=()=>o(707513);const r={listStyleType:"none",padding:0,margin:0};i().Ue.regular;function a(e,t){const o="UIRegular"===t?i().JB.UIRegular:"UISmall"===t?i().JB.UISmall:(0,n().t1)(t);return e.device.isMobile?o.mobile:o.desktop}function s(e,t){const o="UIRegular"===t?i().Nv.UIRegular:"UISmall"===t?i().Nv.UISmall:(0,n().t1)(t);return e.device.isMobile?o.mobile:o.desktop}function l(e){return{display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical",WebkitLineClamp:e}}function c(e){let{topLeft:t,topRight:o,bottomLeft:n,bottomRight:i}=e;return[t,o,i,n].map((e=>e?`${e}px`:"0")).join(" ")}function d(e){let{width:t,color:o}=e;if(t>1){const e=(t-.5)/2;return{boxShadow:`0px 0px 0px ${e}px ${o}, inset 0px 0px 0px ${e}px ${o}`,borderWidth:.5,borderColor:o}}return{boxShadow:`0px 0px 0px 0px ${o}, inset 0px 0px 0px 0.5px ${o}`,borderWidth:.5,borderColor:o}}const u={position:"absolute",overflow:"hidden",clip:"rect(1px, 1px, 1px, 1px)",whiteSpace:"nowrap",height:1,width:1}},856546:(e,t,o)=>{o.d(t,{b:()=>n,r:()=>i});o(241792);function n(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e.isReady())return!1;if(o[e.id])return!0;if(o[e.id]=!0,r(e,t))return!0;const i=e.getContentStores();let a=!0;for(const r of i)n(r,!1,o)||(a=!1);return a}async function i(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(await e.load(),o[e.id])return;if(o[e.id]=!0,r(e,t))return;const n=e.getContentStores();await Promise.all(n.map((e=>i(e,!1,o))))}function r(e,t){return!(!e.isPageBlock()||t)||!!e.isCollectionView()}},338855:(e,t,o)=>{o.d(t,{Dv:()=>P,Jb:()=>D,MW:()=>V,Ng:()=>k,Nm:()=>I,SK:()=>R,SN:()=>N,Xp:()=>C,b8:()=>x,c_:()=>E,cw:()=>F,d4:()=>M,dY:()=>U,hN:()=>B,lQ:()=>T,ni:()=>w,q2:()=>A,wY:()=>b});o(821057),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(667294);var n=()=>o(235484),i=()=>o(109477),r=()=>o(530980),a=()=>o(396136),s=()=>o(955620),l=()=>o(830968),c=()=>o(788860),d=()=>o(342792),u=()=>o(696459),p=()=>o(138912),m=()=>o(826955),f=()=>o(636228),g=()=>o(148976),v=()=>o(527278),h=()=>o(239482),_=o(785893);function b(e,t){const o=y(e),n=null==o?void 0:o.name,i=function(e,t){if(!e)return;const o=(0,l().ny)({url:e,integrations:p().default.integrations.state,currentSpaceId:t});if("success"!==o.type)return;if(!o.pattern.collectionItemType)return;switch(o.pattern.collectionItemType){case"project":return(0,_.jsx)(c()._H,{defaultMessage:"Project",id:"syncedCollectionIndicators.project.label"});case"pull_request":return(0,_.jsx)(c()._H,{defaultMessage:"Pull Requests",id:"syncedCollectionIndicators.pullRequests.label"});case"issue":return(0,_.jsx)(c()._H,{defaultMessage:"Issues",id:"syncedCollectionIndicators.issues.label"});case"calendar":return(0,_.jsx)(c()._H,{defaultMessage:"Calendar",id:"syncedCollectionIndicators.calendar.label"});case"release":return(0,_.jsx)(c()._H,{defaultMessage:"Releases",id:"syncedCollectionIndicators.releases.label"});default:(0,u().t1)(o.pattern.collectionItemType)}}(e,t);return i?n?(0,_.jsx)(c()._H,{id:"syncedCollectionIndicators.originalUrlWithIntegration",defaultMessage:"{collectionType} in {integrationName}",values:{integrationName:n,collectionType:i}}):(0,_.jsx)("span",{children:n}):(0,_.jsx)(c()._H,{defaultMessage:"Link to original url",id:"syncedCollectionIndicators.originalUrl"})}function y(e,t){if(!e)return;const o=(0,l().ny)({url:e,integrations:p().default.integrations.state,currentSpaceId:t});return"success"===o.type?o.integration:void 0}const S=(0,c().vU)({github_pull:{defaultMessage:"Oauth Pull Request",id:"syncedCollectionIndicators.oauthGithubPullRequest.label"},github_issue:{defaultMessage:"Oauth Issue",id:"syncedCollectionIndicators.oauthGithubIssue.label"},Event:{defaultMessage:"Event",id:"syncedCollectionIndicators.event.label"},figma_file:{defaultMessage:"File",id:"syncedCollectionIndicators.figmaFile.label"},google_drive_file:{defaultMessage:"File",id:"syncedCollectionIndicators.googleDriveFile.label"},zendesk_ticket:{defaultMessage:"Ticket",id:"syncedCollectionIndicators.zendeskTicket.label"},salesforce_account:{defaultMessage:"Account",id:"syncedCollectionIndicators.salesforceAccount.label"},salesforce_contact:{defaultMessage:"Contact",id:"syncedCollectionIndicators.salesforceContact.label"},salesforce_opportunity:{defaultMessage:"Opportunity",id:"syncedCollectionIndicators.salesforceOpportunity.label"},slack_channel:{defaultMessage:"Channel",id:"syncedCollectionIndicators.slackChannel.label"},slack_message:{defaultMessage:"Message",id:"syncedCollectionIndicators.slackMessage.label"}});function w(e){const{pattern:t,integration:o}=e;return`${r().kk5.isAnyModel(o)?o.getName():o.name} ${function(e){switch(e.name){case"Event":return v().Z.formatMessage(S.Event);case"figma_file":return v().Z.formatMessage(S.figma_file);case"github_pull":return v().Z.formatMessage(S.github_pull);case"github_issue":return v().Z.formatMessage(S.github_issue);case"google_drive_file":return v().Z.formatMessage(S.google_drive_file);case"zendesk_ticket":return v().Z.formatMessage(S.zendesk_ticket);case"slack_channel":return v().Z.formatMessage(S.slack_channel);case"slack_message":return v().Z.formatMessage(S.slack_message);default:return e.name}}(t)}`}function k(e){const t=y(e);return(null==t?void 0:t.id)===n().mC}function I(e,t){return t===i().Vj.Jira&&e.type===i().Vj.Jira?{self:e.self,accountId:e.accountId,name:e.name,displayName:e.displayName,accountType:"app",emailAddress:e.emailAddress,active:!0,notionUserId:e.notionUserId,type:i().Vj.Jira}:e}function C(e){const{syncCollectionType:t,errorCode:o,intl:n}=e;return t===i().Vj.Jira?(0,g().Zh)({errorCode:o}):n.formatMessage({id:"syncedCollectionUpdateError.unknownError",defaultMessage:"Failed to update"})}function x(e){const{pageId:t,propertyId:o}=e;return(0,d().Ul)(`${t}:${o}`)}function T(e){const{uniquePropertyId:t}=e;f().Z.setState({...f().Z.getState(),syncingProperties:new Set([...f().Z.getState().syncingProperties,t])})}function M(e){const t=f().Z.getState().syncingProperties;t.delete(e),f().Z.setState({...f().Z.getState(),syncingProperties:new Set(t)})}function P(e){var t;const{transaction:o,updateOperation:n,environment:i}=e,a=null==o||null===(t=o.initialRecordMap)||void 0===t?void 0:t.getModel(n.pointer);if(!(a&&a instanceof r().yJh))return!1;const s=a.getParentPointer();if("comment"!==s.table)return!1;const l=A({transaction:o,commentPointer:s,environment:i});return!!l&&{...l,commentPointer:s}}function A(e){var t;const{commentPointer:o,environment:n}=e,i=new(m().T5)(n,o),r=null===(t=h().Dg(i))||void 0===t?void 0:t.getAssociatedCollectionStore(),a=i.getParentBlockStore();return!!(r&&a&&r.isExternallyImportedAndSyncedCollection())&&{collectionStore:r,collectionPagePointer:a.pointer}}function R(e){var t;const{transaction:o,updateOperation:n,environment:i}=e,a=null==o||null===(t=o.initialRecordMap)||void 0===t?void 0:t.getModel(n.pointer);if(!(a&&a instanceof r().yJh&&a.isInsideCollection()))return!1;const s=a.getParentPointer(),l=new(m().NW)(i,{id:s.id,table:"collection"});return!(null==l||!l.isExternallyImportedAndSyncedCollection())&&l}function B(e){const{updateOperation:t,transaction:o,collectionStore:n,collectionPagePointer:i}=e,r=JSON.stringify(t.args);if(!r)throw new Error("Could not extract comment content from update operation");const a=n.getFormat().external_collection_type;if(!a)throw new Error("Collection is not an external synced collection");return{syncType:a,syncCollectionUpdates:[{commentData:r,collectionPagePointer:i,updateType:"CREATE_COMMENT",notionCommentId:t.pointer.id,numberOfAttachments:o.operations.filter((e=>{var t;return"set"===e.command&&"embed"===(null===(t=e.args)||void 0===t?void 0:t.type)})).length}],spaceId:o.spaceId}}function E(e){const{updateOperation:t,transaction:o,collectionStore:n}=e,i=function(e,t){var o,n,i;if(2!==e.path.length)return;const r=e.path[1].toString();switch(e.command){case"set":if("person"===(null===(o=t[r])||void 0===o?void 0:o.type)&&Array.isArray(e.args)&&1===e.args.length){var a;const t=null===(a=e.args[0])||void 0===a||null===(a=a[1])||void 0===a?void 0:a[0];return s().IWo(t)?{propertyId:r,propertyUpdatedValue:{type:"person",value:s().zEN(t)}}:void 0}return{propertyId:r,propertyUpdatedValue:{type:"text",value:s().QaF(e.args)}};case"addPersonAfter":return{propertyId:r,propertyUpdatedValue:{type:"person",value:"me"===(null===(n=e.args)||void 0===n?void 0:n.pointer)?"me":null===(i=e.args)||void 0===i?void 0:i.pointer.id}};case"removePerson":return{propertyId:r,propertyUpdatedValue:{type:"person",value:void 0}};default:return}}(t,n.getSchema());if(!i)throw new Error("Unsupported update for synced collection");const{propertyId:r,propertyUpdatedValue:l}=i,c=n.getFormat().external_collection_type;if(!c)throw new Error("Collection is not an external synced collection");return{syncType:c,syncCollectionUpdates:[{propertyId:r,propertyUpdatedValue:l,updateType:"UPDATE_PROPERTY",collectionPagePointer:{table:a().iU,id:t.pointer.id,spaceId:t.pointer.spaceId}}],spaceId:o.spaceId}}function D(e){const{commentId:t}=e;f().Z.setState({...f().Z.getState(),syncingComments:new Set([...f().Z.getState().syncingComments,t])})}function U(e){const t=f().Z.getState().syncingComments;t.delete(e),f().Z.setState({...f().Z.getState(),syncingComments:new Set(t)})}function F(e){return f().Z.getState().syncingComments.has(e)}function N(){return f().Z.getState().syncingProperties.size>0||f().Z.getState().syncingComments.size>0}function V(e){return"Jira"===e&&(0,g().Uo)()}},423557:(e,t,o)=>{o.d(t,{A8:()=>u,Bj:()=>b,Bt:()=>w,Fy:()=>v,T0:()=>m,Xg:()=>S,ZH:()=>p,bD:()=>g,hC:()=>y,hL:()=>_,iT:()=>f,wG:()=>h});o(267602),o(470928),o(241792),o(228244),o(667294);var n=()=>o(788860),i=()=>o(513670),r=()=>o(696459),a=()=>o(417205),s=()=>o(308186),l=()=>o(467806),c=()=>o(91502),d=o(785893);async function u(e){let{isCurrentUser:t,teamName:o,memberName:i}=e;return await s().gt({message:t?(0,d.jsx)(n()._H,{defaultMessage:"Leave {teamName}?",id:"teamActions.leaveTeam.confirmDialogMessage.removingYourself",values:{teamName:o}}):(0,d.jsx)(n()._H,{id:"teamActions.leaveTeam.confirmDialogMessage.removingSomeoneElse",defaultMessage:"Remove {memberName} from {teamName}?",values:{memberName:i,teamName:o}}),description:t?(0,d.jsx)(n()._H,{id:"teamActions.leaveTeam.confirmDialogDescription.removingYourself",defaultMessage:"You'll no longer see this teamspace in your sidebar and you may lose permissions to the teamspace's pages."}):(0,d.jsx)(n()._H,{id:"teamActions.leaveTeam.confirmDialogDescription.removingSomeoneElse",defaultMessage:"This change won't apply to any restricted pages in the teamspace."}),acceptLabel:t?(0,d.jsx)(n()._H,{defaultMessage:"Leave Teamspace",id:"teamActions.leaveTeam.confirmDialogAcceptLabel.removingYourself"}):(0,d.jsx)(n()._H,{defaultMessage:"Remove",id:"teamActions.leaveTeam.confirmDialogAcceptLabel"}),cancelLabel:(0,d.jsx)(n()._H,{id:"teamActions.leaveTeam.confirmDialogCancelLabel.removingSomeoneElse",defaultMessage:"Cancel"})}).then((e=>e.accept))}function p(){s().PV({message:(0,d.jsx)(n()._H,{id:"teamActions.leaveTeam.onlyTeamMemberLeftDialogMessage",defaultMessage:"Invite another teamspace owner to leave this teamspace"})})}function m(e){s().PV({message:(0,d.jsx)(n()._H,{id:"teamActions.leaveTeam.userMembershipFromGroupDialogMessage",defaultMessage:"You can't leave this teamspace because you're a member of {groupNames}.",values:{groupNames:i().oA(e.map((e=>`"${e.name}"`))).join(", ")}})})}function f(e){var t;let{group:o,onAccept:i}=e;const r=(null===(t=l().Z.state.permissionGroupsAndMemberCounts.find((e=>e.group.group_id===o.group_id)))||void 0===t?void 0:t.memberCount)??0;s().vC({message:o.name?(0,d.jsx)(n()._H,{id:"TeamSettings.groups.removeGroupModal.title",defaultMessage:"Remove {groupName}?",values:{groupName:o.name}}):(0,d.jsx)(n()._H,{id:"TeamSettings.groups.removeGroupModal.title.noGroupName",defaultMessage:"Remove this group?"}),description:(0,d.jsx)(n()._H,{id:"TeamSettings.groups.removeGroupModal.description",defaultMessage:"{numGroupMembers} {numGroupMembers, plural, one {member} other {members}} from this group will be removed from this teamspace.",values:{numGroupMembers:r}}),showCancel:!0,keepFocus:!1,handleCancel:s().lo,items:[{label:(0,d.jsx)(n()._H,{id:"TeamSettings.groups.removeGroupModal.confirmationButton",defaultMessage:"Remove group"}),color:"red",onAccept:i}]})}function g(){s().PV({message:(0,d.jsx)(n()._H,{id:"teamActions.removeGroup.showRemoveOnlyGroupOwnerDialogMessage",defaultMessage:"Invite another teamspace owner to remove this group from the teamspace"})})}async function v(e,t){return await a().b({title:(0,d.jsx)(n()._H,{id:"teamActions.archiveTeam.confirmDialogTitle",defaultMessage:"Archive this teamspace?"}),message:t?(0,d.jsx)(n()._H,{id:"teamActions.archiveTeam.transitionToZeroTeams.confirmDialogDescription",defaultMessage:'This is your last default teamspace. Archiving will remove the "Teamspaces" section in your sidebar. Type the teamspace name to confirm.'}):(0,d.jsx)(n()._H,{id:"teamActions.archiveTeam.confirmDialogDescription",defaultMessage:"Archiving this teamspace will remove access and hide it in the sidebar for all teamspace members. Type the teamspace name to confirm."}),acceptLabel:(0,d.jsx)(n()._H,{id:"teamActions.archiveTeam.confirmDialogAcceptLabel",defaultMessage:"Archive teamspace"}),requiredInputValue:e,width:432})}async function h(e){return await s().gt({message:(0,d.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:(0,d.jsx)(n()._H,{id:"teamActions.movePagesFromArchivedTeam.confirmDialogTitle",defaultMessage:'Would you like to move pages under {teamName} to the "Private" and "Shared" sections in your sidebar?',values:{teamName:e}})}),acceptLabel:(0,d.jsx)(n()._H,{id:"teamActions.movePagesFromArchivedTeam.confirmDialogAcceptLabel",defaultMessage:"Move pages"}),cancelLabel:(0,d.jsx)(n()._H,{id:"teamActions.movePagesFromArchivedTeam.confirmDialogCancelLabel",defaultMessage:"Proceed without moving pages"})}).then((e=>e.accept))}async function _(e){let{teamName:t,currentIsDefault:o,accessLevel:i,isDefault:a,numberOfTeamGuests:l}=e;const c=(0,d.jsx)("div",{style:{marginTop:8},children:(0,d.jsx)(n()._H,{id:"teamActions.confirmTeamAccessDialog.disableDefaultTeamLabel",defaultMessage:"{teamName} will also no longer be a default teamspace and auto-add workspace members.",values:{teamName:t}})});let u,p;return"private"===i?(u=(0,d.jsx)(n()._H,{defaultMessage:"Make {teamName} private?",id:"teamActions.confirmTeamAccessChangeDialog.privateTeam.titleWithName",values:{teamName:t}}),p=(0,d.jsxs)("div",{children:[(0,d.jsx)(n()._H,{id:"teamActions.teamScreen.privateTeam.description",defaultMessage:"Only members will be able to see the teamspace and its content."}),o&&c]})):a?l>0?(u=(0,d.jsx)(n()._H,{id:"teamActions.confirmTeamAccessChangeDialog.defaultTeamWithGuests.titleWithName",defaultMessage:"Make {teamName} a default teamspace?",values:{teamName:t}}),p=(0,d.jsx)(n()._H,{id:"teamActions.teamScreen.defaultTeamWithGuests.description",defaultMessage:"Everyone in the workspace and future workspace members will be added to this teamspace. Additionally, {numberOfTeamGuests} teamspace guests will be removed.",values:{numberOfTeamGuests:l}})):(u=(0,d.jsx)(n()._H,{id:"teamActions.confirmTeamAccessChangeDialog.defaultTeam.titleWithName",defaultMessage:"Make {teamName} a default teamspace?",values:{teamName:t}}),p=(0,d.jsx)(n()._H,{id:"teamActions.teamScreen.defaultTeam.description",defaultMessage:"Everyone in the workspace and future workspace members will be added to this teamspace."})):"open"===i?(u=(0,d.jsx)(n()._H,{defaultMessage:"Make {teamName} open?",id:"teamActions.confirmTeamAccessChangeDialog.openTeam.titleWithName",values:{teamName:t}}),p=(0,d.jsxs)("div",{children:[!o&&(0,d.jsx)(n()._H,{id:"teamActions.teamScreen.openTeam.description",defaultMessage:"Everyone in the workspace will have access to the teamspace and its content."}),o&&c]})):"closed"===i?(u=(0,d.jsx)(n()._H,{defaultMessage:"Make {teamName} closed?",id:"teamActions.confirmTeamAccessChangeDialog.closedTeam.titleWithName",values:{teamName:t}}),p=(0,d.jsxs)("div",{children:[(0,d.jsx)(n()._H,{id:"teamActions.teamScreen.closedTeam.description",defaultMessage:"The teamspace will still be discoverable, but joining will be invite-only."}),o&&c]})):(0,r().t1)(i),await s().gt({message:u,description:p}).then((e=>e.accept))}async function b(e){let t,o,i="normal";switch(e){case"disable_guests":t=(0,d.jsx)(n()._H,{id:"teamSettings.disableGuests.confirmationTitle",defaultMessage:"Disable guests?"}),o=(0,d.jsx)(n()._H,{id:"teamSettings.disableGuests.confirmationDescription",defaultMessage:"All page guests in this teamspace will be removed."});break;case"disable_public_access":t=(0,d.jsx)(n()._H,{id:"teamSettings.disablePublicPages.confirmationTitle",defaultMessage:"Disable publishing sites and forms?"}),o=(0,d.jsx)(n()._H,{id:"teamSettings.disablePublicPages.confirmationDescription",defaultMessage:"This will remove access for anyone who is not a member or guest of the workspace from all pages in this teamspace."}),i="wide";break;case"disable_export":case"disable_team_page_edits":return!0;default:(0,r().t1)(e)}return await s().gt({message:t,description:o,mode:i}).then((e=>e.accept))}async function y(e){let t,o;switch(e){case"disable_guests":t=(0,d.jsx)(n()._H,{id:"teamSettings.disableGuestsOverride.confirmationTitle",defaultMessage:"Allow guests on this teamspace?"}),o=(0,d.jsx)(n()._H,{id:"teamSettings.disableGuestsOverride.confirmationDescription",defaultMessage:"By default, guests are not allowed on teamspaces in this workspace."});break;case"disable_public_access":t=(0,d.jsx)(n()._H,{id:"teamSettings.disablePublicPagesOverride.confirmationTitle",defaultMessage:"Allow teamspace pages to be made public?"}),o=(0,d.jsx)(n()._H,{id:"teamSettings.disablePublicPagesOverride.confirmationDescription",defaultMessage:"By default, pages in this workspace cannot be made public."});break;case"disable_export":t=(0,d.jsx)(n()._H,{id:"teamSettings.disableExportOverride.confirmationTitle",defaultMessage:"Allow teamspace pages to be exported?"}),o=(0,d.jsx)(n()._H,{id:"teamSettings.disableExportOverride.confirmationDescription",defaultMessage:"By default, pages in this workspace cannot be exported."});break;case"disable_team_page_edits":return!0;default:(0,r().t1)(e)}return await s().gt({message:t,description:o,acceptLabel:(0,d.jsx)(n()._H,{id:"teamSettings.workspaceSettingOverride.confirmationButtonLabel",defaultMessage:"Override workspace setting"})}).then((e=>e.accept))}async function S(e){let{environment:t,spaceStore:o,teamName:i}=e;const r=t.currentUser.id;if(!r||!o)return!0;return!(await(0,c().F0)({environment:t,spaceStore:o,currentUserId:r})).some((e=>{var t;return(null===(t=e.getName())||void 0===t?void 0:t.trim())===i.trim()}))||await s().gt({message:(0,d.jsx)(n()._H,{id:"teamSettings.confirmDuplicateTeamName.message",defaultMessage:"A teamspace with the same name already exists. Are you sure you want to name this teamspace â€œ{teamName}â€?",values:{teamName:i}}),cancelLabel:(0,d.jsx)(n()._H,{id:"teamSettings.confirmDuplicateTeamName.cancelLabel",defaultMessage:"Cancel"})}).then((e=>e.accept))}async function w(){return await s().gt({message:(0,d.jsx)(n()._H,{id:"teamSettings.setTeamPermissions.ClearCustomTeamPermissionsDialogMessage",defaultMessage:"Raising the permission level for all teamspace members will remove some custom permissions. Are you sure you want to proceed?"}),cancelLabel:(0,d.jsx)(n()._H,{id:"teamSettings.setTeamPermissions.cancelLabel",defaultMessage:"Cancel"})}).then((e=>e.accept))}},729717:(e,t,o)=>{o.d(t,{$$:()=>d,CC:()=>f,JB:()=>g,K9:()=>p,Ke:()=>v,_t:()=>c,e6:()=>u,zs:()=>m});o(267602),o(749411);var n=()=>o(102182),i=()=>o(584989),r=()=>o(532146),a=()=>o(527278);const s=(0,o(788860).vU)({leftTeam:{id:"teamPermissionsActions.leftTeam",defaultMessage:"Left {teamName}"},leftTeamNoName:{id:"teamPermissionsActions.leftTeamNoName",defaultMessage:"Left teamspace"},leftYetStillInTeam:{id:"teamPermissionsActions.leftYetStillInTeam",defaultMessage:"You are still in {hasTeamName, select, true {{teamName}} other {the teamspace}} because you are a member of the following groups: {groupsString}"},removedYetStillInTeam:{id:"teamPermissionsActions.removedYetStillInTeam",defaultMessage:"{hasMemberName, select, true {{memberName}} other {The removed user}} is still in {hasTeamName, select, true {{teamName}} other {the teamspace}} because they are a member of the following groups: {groupsString}"},joinedTeam:{id:"teamPermissionsActions.joinedTeam",defaultMessage:"Joined {teamName}"},joinedTeamUsingAdminPrivileges:{id:"teamPermissionsActions.joinedTeamUsingAdminPrivileges",defaultMessage:"Joined {teamName} using admin privileges"},upgradedSelfToOwner:{id:"teamPermissionsActions.upgradedSelfToOwnerUsingAdminPrivileges",defaultMessage:"Became owner of {teamName} using admin privileges"},archivedTeam:{id:"teamPermissionsActions.archivedTeam",defaultMessage:"Archived {teamName}"},restoredTeam:{id:"teamPermissionsActions.restoredTeam",defaultMessage:"Restored {teamName}"},restoredTeamNoName:{id:"teamPermissionsActions.restoredTeamNoName",defaultMessage:"Restored teamspace"},duplicatedTeam:{id:"teamPermissionsActions.duplicatedTeam",defaultMessage:"Duplicated {teamName}"},duplicatedTeamNoName:{id:"teamPermissionsActions.duplicatedTeamNoName",defaultMessage:"Duplicated teamspace"}});function l(e,t,o){const i=a().Z.formatMessage(e,{...t});n().oV({label:i,durationMs:o})}function c(e){return l(s.upgradedSelfToOwner,{teamName:e})}function d(e){let{teamName:t,usingAdminPrivileges:o}=e;return l(o?s.joinedTeamUsingAdminPrivileges:s.joinedTeam,{teamName:t})}function u(e){return e?l(s.leftTeam,{teamName:e}):l(s.leftTeamNoName)}function p(e,t){const o=(0,r().W)(t.flatMap((e=>e.name||[])));l(s.leftYetStillInTeam,{hasTeamName:void 0!==e,teamName:e,groupsString:o},i().JY)}function m(e,t,o){const n=(0,r().W)(o.flatMap((e=>e.name||[])));l(s.removedYetStillInTeam,{hasMemberName:void 0!==e,hasTeamName:void 0!==t,memberName:e,teamName:t,groupsString:n},i().JY)}function f(e){return l(s.archivedTeam,{teamName:e})}function g(e){return e?l(s.restoredTeam,{teamName:e}):l(s.restoredTeamNoName)}function v(e){return e?l(s.duplicatedTeam,{teamName:e}):l(s.duplicatedTeamNoName)}},91502:(e,t,o)=>{o.d(t,{q9:()=>ne,$r:()=>ee,ZN:()=>te,oI:()=>F,Xq:()=>W,KP:()=>X,W8:()=>ie,Pr:()=>G,az:()=>pe,qX:()=>L,F0:()=>z,sj:()=>Z,B$:()=>O,tu:()=>le,oT:()=>J,s4:()=>j,y2:()=>ue,W9:()=>de,ku:()=>U,MS:()=>E,QI:()=>D,U2:()=>re,bq:()=>V,Hu:()=>q,tV:()=>ae,C2:()=>H,$:()=>Q,OX:()=>Y,r8:()=>se});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(470928),o(241792),o(731107);var n=()=>o(219727),i=()=>o(142735);const r=Symbol("unset");class a{constructor(e){this.cacheMs=void 0,this.fetch=void 0,this.useLastValue=void 0,this.promise=void 0,this.lastFetched=void 0,this.lastValue=void 0;const{cacheMs:t,fetch:o,useLastValue:n}=e;this.cacheMs=t,this.fetch=o,this.promise=void 0,this.useLastValue=n,this.lastValue=r}async getWithState(){if(this.isReady())return{value:this.lastValue,state:"cached"};if(this.promise)return{value:await this.promise,state:"cached"};this.promise=this.fetch().catch((e=>{if(this.useLastValue&&this.lastValue!==r)return this.lastValue;throw e}));try{const e=await this.promise;return this.lastFetched=Date.now(),this.lastValue=e,{value:e,state:"fetched"}}finally{this.promise=void 0}}async get(){const{value:e}=await this.getWithState();return e}isReady(){const e=Date.now();return Boolean(this.lastFetched&&this.lastValue!==r&&this.lastFetched>e-this.cacheMs)}}var s=()=>o(799891),l=()=>o(741633),c=()=>o(528514),d=()=>o(933868),u=()=>o(217465),p=()=>o(306164),m=()=>o(989478),f=()=>o(629719),g=()=>o(542487),v=()=>o(513670),h=()=>o(696459),_=()=>o(824462),b=()=>o(205228),y=()=>o(591914),S=()=>o(876822),w=()=>o(467806),k=()=>o(619779),I=()=>o(749826),C=()=>o(826955),x=()=>o(700696),T=()=>o(18281),M=()=>o(162213),P=()=>o(606021),A=()=>o(37428),R=()=>o(122479),B=()=>o(345918);function E(e){return!!D()&&(!!D("dev_only")||Boolean(null==e?void 0:e.getSettings().was_in_personal_home_default_treatment))}function D(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dev_beta_and_ga";if(!(null===(e=S().default.state.currentSpaceStore)||void 0===e?void 0:e.canRead()))return!1;switch(t){case"dev_beta_and_ga":return!0;case"dev_only":return!1;default:(0,h().t1)(t)}}function U(){return I().default.checkGate({gateName:"sidebar_pages_hide_toggles"})}function F(){return b().default.isAdminMode}const N=v().HP((()=>new(o(435308).default)((()=>{const{currentSpaceStore:e}=S().default.state;return!!e&&e.isTeamsEnabled()}),{debugName:"teamsEnabledStore"})));function V(){return N().state}async function L(e){let{environment:t,spaceStore:o,includeArchived:n=!1,currentUserId:i}=e;return(await O({environment:t,spaceStore:o,includeArchived:n,currentUserId:i})).teams}async function O(e){let{environment:t,spaceStore:o,includeArchived:n=!1,currentUserId:i}=e;const r=await _().callApi({eventName:"getTeams",environment:t,data:{spaceId:o.id,includeArchived:n},userId:i,headers:(0,l().Bb)({cellId:void 0,recordId:void 0,spaceId:o.id})});return"failed"===r.type?(s().rateLimitedLog({from:"teamsHelpers",level:"error",type:"getTeamsFailed"}),{teams:[],teamAggregateData:{}}):{teams:r.data.teamIds.map((e=>C().zX.createChildStore(o,{table:p().e0,id:e}))),teamAggregateData:r.data.teamAggregateData}}async function Z(e){let{spaceStore:t,currentUserId:o,includeArchived:n,minRoleOnTeamStores:i,environment:r}=e;if(!t||!o)return[];const a=await _().getAllTeamsInSpaceForAdmin(r,{spaceId:t.id,includeArchived:n},o);if("failed"===a.type)return[];const s=a.data.teamIds.map((e=>C().zX.createChildStore(t,{table:p().e0,id:e}))),l=[],d=[];for(const u of s){const e=u.getRole()??"none";(0,c().gr)(e,i)?d.push(u.id):l.push(u)}const m=u().RecordMap.create(a.data.recordMap);M().Z.initialize({environment:r,userId:o,spaceId:t.id,teamIds:a.data.teamIds,getRecordWithRole:e=>({role:i,value:m.getValue(e)})});const f=d.map((e=>M().Z.createTeamStoreFromCache({environment:r,teamId:e,spaceId:t.id,userId:o}))).filter(h().$K);return[...l,...f]}function j(e){return x().default.state.teams.filter((t=>t.isMemberOrGuest(e,new Set)))}const K=new Map;async function z(e){let{environment:t,spaceStore:o,includeArchived:n=!1,currentUserId:i}=e;const r=`${o.id}:${n}`,s=K.get(r);if(s)return s.get();const l=new a({cacheMs:3e4,fetch:async()=>L({environment:t,spaceStore:o,includeArchived:n,currentUserId:i}),useLastValue:!0});return K.set(r,l),l.get()}function H(e){return!!e&&"private"===(0,g().B5)(e)}function q(e){return e&&(0,g().jI)(e)}function W(e){let{environment:t,spaceStore:o}=e;return!!o&&(!(0,B().Cx)(o)&&((0,B().Fn)(t)||!o.getDisableTeamCreation()))}function G(e){const t=(0,R().YO)(e).map((e=>e.permissionItem)),o=t.find(d().Ir),n=(null==o?void 0:o.role)??"none",i=(0,T().Io)().reduce(((e,t)=>(e.add(t.userId),e)),new Set),r=t.filter((e=>!(!(0,d().jg)(e)||!i.has(e.user_id))||!!(0,d().hV)(e))),a=function(e){if(0===e.length)return;return e.reduce(((e,t)=>(0,c().SL)(t,e)?t:e),e[0])}(r.map((e=>e.role)))??"read_and_write";return{accessLevel:"none"===n?"private":"closed",spacePermissionRole:n,teamPermissionRole:(0,c().nl)(a,n),members:r.map((e=>{const{type:t}=e;return"user_permission"===t?{entity_type:"user",type:"member",user_id:e.user_id}:"group_permission"===t?{entity_type:"group",type:"member",group_id:e.group_id}:void(0,h().t1)(t)}))}}function $(e){let{environment:t,currentSpaceStore:o,billingData:n}=e;return!!o&&(!t.device.isMobile&&!o.isTeamsEnabled()&&!(0,f().TK)(n)&&(0,B().lQ)(o))}function Q(e,t){const{currentSpaceStore:o}=S().default.state;return $({environment:e,currentSpaceStore:o,billingData:t})}function Y(e){const t=(0,n().O7)();return(0,i().VK)((()=>{const{currentSpaceStore:o}=S().default.state;return $({environment:t,currentSpaceStore:o,billingData:e})}),[t,e])}function J(e){const t=e.id;if(t in x().default.state.teamAggregateData)return x().default.state.teamAggregateData[t]}function X(e,t){return e.isDefault()?-1:t.isDefault()?1:0}const ee=["owner","member"],te=["owner","member","team_level_guest"],oe=(0,o(788860).vU)({ownerLabel:{id:"teamPermissionsMenu.ownerItem.label",defaultMessage:"Teamspace owner"},ownerCaption:{id:"teamPermissionsMenu.ownerItem.caption",defaultMessage:"Can edit teamspace settings and full access to teamspace pages."},memberLabel:{id:"teamPermissionsMenu.memberItem.label",defaultMessage:"Teamspace member"},memberCaption:{id:"teamPermissionsMenu.memberItem.caption",defaultMessage:"Cannot edit teamspace settings and can access teamspace pages."},guestLabel:{id:"teamPermissionsMenu.guestItem.label",defaultMessage:"Teamspace guest"},guestCaption:{id:"teamPermissionsMenu.guestItem.caption",defaultMessage:"Only has access to invited teamspaces."}}),ne={owner:{label:oe.ownerLabel,caption:oe.ownerCaption},member:{label:oe.memberLabel,caption:oe.memberCaption},team_level_guest:{label:oe.guestLabel,caption:oe.guestCaption}};function ie(e){return`${b().default.domainBaseUrl}/team/${e}/join`}function re(e){var t;return!(null===(t=e.getSettings())||void 0===t||!t.disable_invite_link)}function ae(e){const t=[],o=[];for(const n of e)n.isDefined()&&(void 0===n.getArchivedBy()?o.push(n):t.push(n));return{archivedTeams:t,unarchivedTeams:o}}function se(e){const t=(0,n().O7)(),{unarchivedTeams:o,isLoaded:r}=(0,i().VK)((()=>{const o=P().Z.state;switch(o.loadingState){case"uninitialized":case"loading":return{unarchivedTeams:[],isLoaded:!1};case"loaded":return{unarchivedTeams:(0,A().GO)({environment:t,teamIds:o.unarchivedTeamIds,spaceStore:e}),isLoaded:!0};default:(0,h().t1)(o)}}),[t,e]);return{unarchivedTeams:o,isLoaded:r}}function le(e){let{currentUserStore:t,currentSpaceStore:o,teamStore:n,members:i}=e;return v().oA(i.map((e=>{const{entity_type:o}=e;return"user"===o?function(e){let{currentUserStore:t,teamStore:o,member:n}=e;if(!t)return;const i=ce({teamStore:o,member:n}),r=C().U6.createChildStore(t,{table:m().KJ,id:n.user_id});return{type:"user",memberInfo:n,permissionItem:{type:"user_permission",user_id:n.user_id,role:i},userStore:r}}({currentUserStore:t,teamStore:n,member:e}):"group"===o?function(e){var t;let{teamStore:o,member:n}=e;const i=null===(t=w().Z.state.permissionGroupsAndMemberCounts.find((e=>e.group.group_id===n.group_id)))||void 0===t?void 0:t.group;if(!i||!i.isAlive())return;const r=ce({teamStore:o,member:n});return{type:"group",memberInfo:n,permissionItem:{type:"group_permission",group_id:i.group_id,role:r},permissionGroup:i}}({teamStore:n,member:e}):void(0,h().t1)(o)})))}function ce(e){let{teamStore:t,member:o}=e;const n=t.getPermissionItems();if(!n)return"none";const i=function(e){let{permissions:t,member:o}=e;const n=null==t?void 0:t.find((e=>(0,d().hV)(e)&&"group"===o.entity_type&&e.group_id===o.group_id||(0,d().jg)(e)&&"user"===o.entity_type&&o.user_id===e.user_id));return null==n?void 0:n.role}({permissions:n,member:o});return i||(0,g().xC)({id:t.id,permissions:t.getPermissionItems()})}function de(e){const{environment:t,teamStore:o,spaceStore:n}=e,i=t.currentUser.id;if(void 0===i)return!1;const{ownerUserIds:r,ownerGroupIds:a}=o.getAllOwnerIds();return!(r.length>0&&a.length>0)&&(!!(0,y().VK)(n,i).isWorkspaceOwner()&&("private"!==o.getTeamAccessLevel()||("enterprise"===n.getSubscriptionTier()||Boolean(o.isNonGuestMember(i,k().Z.state.spacePermissionGroupIds)))))}function ue(e,t){const{currentSpaceStore:o}=S().default.state;return o&&!o.isTeamsEnabled()&&(0,B().lQ)(o)&&!(0,f().TK)(t)}function pe(){return x().default.state.teams.filter((e=>!e.isArchived())).length}},590058:(e,t,o)=>{o.d(t,{D$:()=>s,JZ:()=>l,NL:()=>a,UZ:()=>c});o(821057),o(267602),o(653476),o(241792);var n=o.n(o(452027)),i=()=>o(659278);const r=new(n()),{DIFF_DELETE:a,DIFF_INSERT:s,DIFF_EQUAL:l}=n();function c(e,t){const o=d(e,{count:0,encoding:{},decoding:{}}),n=o.encodedString,i=d(t,o.cypher),a=i.encodedString,s=i.cypher,l=function(e,t){return e.map((e=>{let[o,n]=e;return[o,u(n,t)]}))}(r.diff_main(n,a),s);return l.filter((e=>{let[t,o]=e;return""!==o}))}function d(e,t){const o=i().p4(e).map((e=>{const o=t.encoding[e];if(o)return o;{const o=String.fromCharCode(t.count);return t.count++,t.encoding[e]=o,t.decoding[o]=e,o}}));if(t.count>65535)throw new Error("This string has way too many different characters.");const n=o.join("");return{cypher:t,encodedString:n}}function u(e,t){return e.split("").map((e=>t.decoding[e])).join("")}},440721:(e,t,o)=>{o.d(t,{O2:()=>a,Ye:()=>c,ug:()=>s,zK:()=>l});o(267602),o(653476);var n=()=>o(659278),i=()=>o(955620),r=()=>o(513670);function a(e,t,o){const a=e.getValue(),s=i().eeV(t),l=i().eeV(a);if(0===s.length&&0===l.length)return""===o?{filter:{startIndex:0,endIndex:0}}:void 0;const c=r().d9(s).reverse(),d=r().d9(l).reverse(),u=l.findIndex(((e,t)=>e!==s[t])),p=d.findIndex(((e,t)=>e!==c[t]));if(-1===u||-1===p)return;const m=n().p4(o),f={filter:{startIndex:u+(m.length>0?1:0),endIndex:u+l.length-s.length}};if(m.length>0){const e=f.filter.startIndex-m.length,t=f.filter.startIndex;l.slice(e,t).join("")===o&&(f.prefix={startIndex:e,endIndex:t})}return f}function s(e,t){if(!t)return;const o=e.getValue();return i().eeV(o).slice(t.filter.startIndex,t.filter.endIndex).join("")}function l(e,t,o){return s(e,a(e,t,o?"@":""))}function c(e,t,o,n,a){if(void 0===e)return!0;if(t&&0===o&&n>3)return!0;if(1===e.length){const t=r().Z$(e);if(t){if(/\s/g.test(t)){const e=a.getValue();if(e&&e.length>=1){const t=i().QaF(e);return!(2===t.length&&t.startsWith("/"))}}}}else if(e.length>=2){return e.endsWith("  ")}return!1}},505462:(e,t,o)=>{o.r(t),o.d(t,{areRangesEqual:()=>D,clear:()=>w,containerOffsetIsBetweenNodes:()=>B,get:()=>h,getIncompleteDOMEndpoint:()=>y,getRect:()=>k,getSelectionRect:()=>I,isExpanded:()=>T,isMouseRightClicking:()=>j,isMouseSelecting:()=>Z,rangeFromContainerOffsets:()=>M,rangeFromPoint:()=>C,rangeToContainerOffsets:()=>R,resetMouseRightClicking:()=>K,selectionIsBackwards:()=>V,set:()=>_,setDOMEndpoint:()=>S,setOnNode:()=>x,snapContainerOffsetToNode:()=>E,startListeners:()=>N,toRange:()=>A,toStaticRange:()=>P});o(821057);var n=()=>o(220427),i=()=>o(387934),r=()=>o(492788),a=()=>o(947115),s=()=>o(799891),l=()=>o(720866),c=()=>o(513670),d=()=>o(35982);const u=!1;new WeakMap;let p;const m=c().HP((()=>window.__isElectron?f:()=>window))();function f(){return!p||window.document.hasFocus()?(g("getWindow(): Returning main window because it has focus."),window):p?(g("getWindow(): Returning focused child window."),p):(g("getWindow(): Returning main window because nothing has focus"),window)}function g(){u&&console.log(...arguments)}var v=()=>o(250625);function h(){const e=m().getSelection();if(e&&e.rangeCount>0){return e.getRangeAt(0)}}function _(e,t){b.reset();const o=window.getSelection();if(o){if(t.isAndroid){const t=h();if(t&&D(t,e))return}if(!(t.isFirefox&&parseFloat(t.browserVersion)<92))try{return function(e,t){const{focus:o,anchor:n}=R(t);e.collapse(n.container,n.offset),e.extend(o.container,o.offset)}(o,e)}catch(n){s().log({from:"textSelection",type:"textSelectionSet",level:"error",error:(0,l().t)(n)})}return function(e,t){const o=document.createRange();o.setStart(t.startContainer,t.startOffset),o.setEnd(t.endContainer,t.endOffset),e.removeAllRanges(),e.addRange(o)}(o,e)}}const b=new class{constructor(e){this.state=void 0,this.debugName=e,(0,a().exposeDebugInstance)("endpointLatch",this)}complete(e){if(this.state&&this.state.endpoint!==e.endpoint&&this.state.onlyIfEqual===e.onlyIfEqual){const t="start"===this.state.endpoint?this.state:e,o="end"===this.state.endpoint?this.state:e;return this.state=void 0,{start:t,end:o}}if(this.state){let t=`${this.debugName}: cannot complete latch:`;const o=this.state.endpoint===e.endpoint,n=this.state.onlyIfEqual!==e.onlyIfEqual;o&&(t+=` same endpoint ${e.endpoint}`),n&&(t+=" different tokens"),s().log({level:"warning",from:"EndpointLatch",type:"cannotCompleteLatch",data:{name:this.debugName,message:t,miscDataToConvertToString:{sameEndpoint:o,differentTokens:n}}})}this.state=e}reset(){this.state&&(s().log({level:"warning",from:"EndpointLatch",type:"resetPartialLatch",data:{name:this.debugName,message:`reset latch with endpoint ${this.state.endpoint}`}}),this.state=void 0)}}("domSelection");function y(){return b.state}function S(e,t){const o=b.complete(e);if(!o)return;const{start:n,end:i}=o;_(M({start:n.position,end:i.position}),t)}function w(e){b.reset();const t=window.getSelection();t&&(e.device.isMobile&&e.device.isAndroid?t.collapse(null,void 0):t.removeAllRanges())}function k(e){if(e){if(e.collapsed&&e.getClientRects){const t=c().Go(e.getClientRects()[0]);if(!c().xb(t))return t}else if(e.getBoundingClientRect){const t=c().Go(e.getBoundingClientRect());if(!c().xb(t))return t}if(e.startContainer.nodeType===Node.ELEMENT_NODE){if(0===e.startOffset){const t=e.startContainer.getBoundingClientRect();return new(d().iL)(t.left,t.top,0,t.height)}const t=e.startContainer.childNodes[e.startOffset-1];if(t&&t.nodeType===Node.ELEMENT_NODE){const e=t.getBoundingClientRect();return new(d().iL)(e.left,e.top,0,e.height)}const o=e.startContainer.childNodes[e.startOffset];if(o&&o.nodeType===Node.ELEMENT_NODE){const e=o.getBoundingClientRect();return new(d().iL)(e.left,e.top,0,e.height)}}}}function I(){const e=h();if(e)return k(e)}function C(e,t){if(document.caretRangeFromPoint){return document.caretRangeFromPoint(e,t)??void 0}if(document.caretPositionFromPoint){const o=document.caretPositionFromPoint(e,t);if(null===o)return;const n=document.createRange();return n.setStart(o.offsetNode,o.offset),n.setEnd(o.offsetNode,o.offset),n}throw new Error("Browser does not support method caretRangeFromPoint or caretPositionFromPoint")}function x(e,t){const o=document.createRange();o.selectNode(e),_(o,t)}function T(e){return Boolean(e&&!e.collapsed)}function M(e){const{start:t,end:o}=e,n=document.createRange();if(t.container)try{n.setStart(t.container,t.offset)}catch(i){console.info(i)}if(o.container)try{n.setEnd(o.container,o.offset)}catch(i){console.info(i)}return n}function P(e){if(!e)return;const{startContainer:t,startOffset:o,endContainer:n,endOffset:i,collapsed:r}=e;return{startContainer:t,startOffset:o,endContainer:n,endOffset:i,collapsed:r}}function A(e){if(!e)return;const t=document.createRange();return t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),t}function R(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:V();const o={container:e.startContainer,offset:e.startOffset},n={container:e.endContainer,offset:e.endOffset},[i,r]=t?[o,n]:[n,o];return{start:o,end:n,focus:i,anchor:r}}function B(e,t,o){if(!t&&!o)return!1;if(!t&&o){const t=document.createRange();return t.selectNode(o),-1===t.comparePoint(e.container,e.offset)}if(t&&!o){const o=document.createRange();return o.selectNode(t),1===o.comparePoint(e.container,e.offset)}if(t&&o){const n=document.createRange();return n.setStartAfter(t),n.setEndBefore(o),0===n.comparePoint(e.container,e.offset)}return!1}function E(e){const{nodesInDomOrder:t,containerOffset:o,snapTowards:n}=e;for(let i=0;i<=t.length;i++){const e=t[i-1],r=t[i];if(B(o,null==e?void 0:e.node,null==r?void 0:r.node))return"start"===n?e:r}}function D(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset&&e.collapsed===t.collapsed}const U=new class{constructor(){this.currentHasNonEmptySelection=!1,this.currentIsBackwards=void 0,this.mouseDownSelection=void 0}selectionIsBackwards(){return Boolean(this.currentHasNonEmptySelection&&this.currentIsBackwards)}updateSelectionDirection(e,t){if(!e||!t||t.collapsed)return this.currentHasNonEmptySelection=!1,void(this.currentIsBackwards=void 0);if(this.currentHasNonEmptySelection=!0,void 0===this.currentIsBackwards){const o=1===t.startContainer.childNodes.length&&t.startContainer.childNodes[0].TEXT_NODE&&t.startContainer.childNodes[0]===e.startContainer;if(e.startContainer===t.startContainer||o)this.currentIsBackwards=t.startOffset<e.startOffset;else{const o=(0,n().Z)(t.startContainer,e.startContainer);this.currentIsBackwards=-1===o}}}startListeners(){window.addEventListener("mousedown",(()=>{r().default.afterNextFlush((()=>{this.mouseDownSelection=h()}))})),window.addEventListener("mouseup",(()=>{r().default.afterNextFlush((()=>{const e=h();this.updateSelectionDirection(this.mouseDownSelection,e)}))})),window.addEventListener("keydown",(()=>{const e=h();r().default.afterNextFlush((()=>{const t=h();this.updateSelectionDirection(e,t)}))}))}},F=new class{constructor(){this.mouseDown=!1,this.keysDown=0,this.wasBackwards=!1,this.device=void 0,this.debugDrawRects=()=>{const e=h();if(T(e)){const{focus:t,anchor:o}=R(e,this.wasBackwards),n=k(M({start:t,end:t}));n&&(0,i().yX)(n,"FOCUS","red");const r=k(M({start:o,end:o}));r&&(0,i().yX)(r,"ANCHOR","blue")}},this.handleSelectionChange=()=>{var e;(this.mouseDown||this.keysDown||null!==(e=this.device)&&void 0!==e&&e.isAndroid)&&(this.wasBackwards=function(){const e=window.getSelection();if(!e)return!1;const{focusNode:t,focusOffset:o,anchorNode:i,anchorOffset:r}=e;if(t===i)return o<r;return-1===(0,n().Z)(t,i)}())},this.handleKeyDown=()=>{this.keysDown++},this.handleKeyUp=()=>{this.keysDown--},this.handleMouseDown=()=>{this.mouseDown=!0},this.handleMouseUp=()=>{this.mouseDown=!1}}startListeners(e){return this.device=e,document.addEventListener("selectionchange",this.handleSelectionChange),window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp),window.addEventListener("mousedown",this.handleMouseDown),window.addEventListener("mouseup",this.handleMouseUp),()=>{document.removeEventListener("selectionchange",this.handleSelectionChange),window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp),window.removeEventListener("mousedown",this.handleMouseDown),window.removeEventListener("mouseup",this.handleMouseUp)}}};function N(e){U.startListeners(),F.startListeners(e)}function V(){return U.currentIsBackwards||F.wasBackwards}(0,a().exposeDebugGetter)("selectionIsBackwards",V);let L=!1,O=!1;function Z(){return L}function j(){return O}function K(){return O=!1}(0,v().lj)(window,"mousedown",(e=>{0===e.button?L=!0:2===e.button&&(O=!0)}),!0),(0,v().lj)(window,"mouseup",(e=>{0===e.button?L=!1:2===e.button&&(O=!1)}),!0)},550054:(e,t,o)=>{o.d(t,{Gq:()=>oe,HE:()=>ne,J5:()=>te,J6:()=>R,J_:()=>Z,KF:()=>A,Ld:()=>P,Mz:()=>F,OT:()=>B,Ov:()=>K,P2:()=>N,Q3:()=>Q,Rb:()=>C,ST:()=>D,Ts:()=>ae,W8:()=>U,ZZ:()=>ee,bj:()=>E,dQ:()=>ie,e7:()=>L,fM:()=>J,fu:()=>O,fx:()=>$,hn:()=>W,iB:()=>j,lV:()=>X,mK:()=>q,oc:()=>M,qK:()=>re,qh:()=>Y,td:()=>I,wd:()=>x,x0:()=>V,yR:()=>z});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(470928),o(241792),o(228244);var n=()=>o(220427),i=()=>o(731415),r=()=>o(156642),a=()=>o(659278),s=()=>o(396136),l=()=>o(955620),c=()=>o(426546),d=()=>o(349220),u=()=>o(513670),p=()=>o(696459),m=()=>o(156538),f=()=>o(32969),g=()=>o(35982),v=()=>o(279386),h=()=>o(797522),_=()=>o(965903),b=()=>o(127519),y=()=>o(191003),S=()=>o(271308),w=()=>o(321930);const k="data-text-edit-side";function I(e){return{[k]:e}}function C(e){if(e instanceof HTMLElement){const t=e.closest(`[${k}]`),o=null==t?void 0:t.getAttribute(k);if("start"===o||"end"===o)return o}}function x(e){return e.startIndex===e.endIndex}function T(e){const{startIndex:t}=e;let o;return o=x(e)?[t-1]:function(e){return u().w6(e.startIndex,e.endIndex)}(e),o}function M(e,t){const o=l().lzi(t);if(1===e.length&&-1===e[0]){const e=o[0];return e?[l().hDy(e).filter(l().Nxc)]:[]}const n=o.map((e=>a().p4(l().WiV(e))));return e.map((e=>{let t=0;const i=n.findIndex((o=>(t+=o.length,t>e))),r=o[i];return r?l().hDy(r):[]}))}function P(e){if("editing"===b().default.state.mode)return function(e,t,o){const n=l().F7H(e),i=A(n,t,o);for(const r of n){const e=i[r];if(e)return e}}(e,b().default.state.multiSelection,b().default.state.forceExtendAnnotations)}function A(e,t,o){const n={};if(0===e.length)return n;if((0,y().iG)(t)){for(const t of e){const e=o[(0,l().DgZ)(t)];if(null!=e&&e.extend){const o=e.annotation;n[t]=o}}return n}const i=new Set(e);let r=!0;const a=(0,S().L5)(t);for(const{store:s,selection:c}of a){const e=s.getValue(),t=l().Ulv(e,c),{tokensInsideRange:o}=l().xrQ(e,t.startIndex,t.endIndex);for(const a of o){const e=l().hDy(a);for(const t of i){const o=e.find((e=>l().gOH(e)===t));if(r&&o)(0,d().T)(void 0===n[t],"Duplicate annotation type"),n[t]=o;else if(o);else if(delete n[t],i.delete(t),0===i.size)return n}r=!1}}return n}function R(e){const t=b().default.state;if("editing"!==t.mode)return!1;const{multiSelection:o}=t;if((0,y().iG)(o))return!1;const n=(0,S().L5)(o);for(const{store:i,selection:r}of n){const t=i.getValue();if(!t)continue;const o=l().lzi(t);let n=0;for(const i of o){const t=a().p4(l().WiV(i));if(n>=r.startIndex&&n<r.endIndex||n<r.startIndex&&n+t.length>r.startIndex){if(l().hDy(i).some((t=>l().J7s(t)===e)))return!0}n+=t.length}}return!1}function B(e,t,o){const n=T(e),r=t.getValue()||[];return function(e,t,o,n){const r=new(i().u),a=e[0]||[];for(const i of a)if(!l().ZAl(i))if("suggest"===n)if(l().uP$(i)){const e=D(t,o.endIndex,l().J7s(i));l().$b8(i)&&!e?r.add([l().GKr.SuggestionInsertText,l().fgJ(i)]):r.add(i)}else l().PYu(i)||l().LPs(i)?D(t,o.startIndex,l().J7s(i))&&r.add(i):(0,p().t1)(i);else if(!n||"default"===n||(0,v().a0)(n)||"ai_co_editing"===n)if(l().Nxc(i))r.add(i);else if(l().lFw(i)||l().EqZ(i)){const e=l().J7s(i);!l().$nX(e)&&D(t,o.startIndex,e)&&r.add(i)}else(0,p().t1)(i);else(0,p().t1)(n);return r}(M(n,r),r,e,o)}function E(e){const t=b().default.state;if("editing"!==t.mode)return new(i().u);const{multiSelection:o,forceExtendAnnotations:n}=t,r=(0,S().L5)(o);if(0===r.length)return new(i().u);const{store:a,selection:s}=r[0],c=a.getValue(),d=c?l().VrM(c):0,p=B(s.endIndex===1/0?{startIndex:s.startIndex,endIndex:d}:s,a,e);return u().M6(n,((e,t)=>{e&&(e.extend?p.add(e.annotation):p.remove(e.annotation))})),p}function D(e,t,o){return Boolean(U(e,t,o))}function U(e,t,o){return F(e,t).find((e=>l().J7s(e)===o))}function F(e,t){const o=l().b1T(e,t);return l().hDy(o)??[]}function N(e){const t=V(e);if(t)return{startIndex:0,endIndex:t.endIndex}}function V(e){const t=m().E.findEditableWithStore(e);var o,n;if(t)return null===(o=(n=t.props).getEndSelection)||void 0===o?void 0:o.call(n);const i=l().eeV(e.getValue());return{startIndex:i.length,endIndex:i.length}}function L(e,t){return e.store===t&&0===e.index}function O(e,t){return!e&&!t||e&&t&&(e.startIndex===t.startIndex||!e.startIndex&&!t.startIndex)&&(e.endIndex===t.endIndex||!e.endIndex&&!t.endIndex)}function Z(e,t){return O(t,V(e))}function j(e,t){var o;return e.store===t&&e.index===(null===(o=V(t))||void 0===o?void 0:o.endIndex)}function K(){const e=_().default.getCurrentDefaultContainer();return m().E.getMembersByDOMOrder({filter:t=>{const o=t.getContextClosestSelectable();if(!o)return!1;const n=o.getContextSelectableContainer();return n&&n===e}})}function z(e){const t=e.getNode(),o=t?_().default.getDefaultContainerFromTarget(t):_().default.getCurrentDefaultContainer();return m().E.getMembersByDOMOrder({filter:e=>{const t=e.getContextClosestSelectable();if(!t)return!1;const n=t.getContextSelectableContainer();return n&&n===o}})}function H(e){return K().filter((e=>!e.props.disabled)).map((e=>e.props.store))}function q(e){const t=H(),o=t.indexOf(e);return-1===o?null:t[o-1]}function W(e){const t=H(),o=t.indexOf(e);return-1===o?null:t[o+1]}function G(e){const t=[];for(const o of e){const e=u().cx(t,(e=>{const t=e[0];return g().Kr(o.rect,t.rect)}));e>=0?t[e].push(o):t.push([o])}return t}function $(e,t,o){const{selectableRectMap:i}=h().default.state,r=o?_().default.getDefaultContainerFromTarget(o):void 0,a=_().default.getCurrentDefaultContainer(),s=r||a,l=f().C.getMembersByDOMOrder({filter:e=>e.props.canSelect&&e.props.canEditText&&e.getContextSelectableContainer()===s}),c=[];for(const n of l){const e=i.get(n);e&&c.push({selectable:n,rect:e})}const d=c.filter((e=>{let{rect:o}=e;return o.top<=t}));d.reverse();const p=G(d).map((e=>e.sort(((e,t)=>-1*(0,n().Z)(e.selectable.getNode(),t.selectable.getNode())))[0])),m=u().F(p,(t=>{let{rect:o}=t;return Math.min(Math.abs(o.left-e),Math.abs(o.right-e))}));if(m)return m;const g=G(c.filter((e=>e.rect.bottom>=t&&d.indexOf(e)<0))).map((e=>e.sort(((e,t)=>(0,n().Z)(e.selectable.getNode(),t.selectable.getNode())))[0])),v=u().F(g,(t=>{let{rect:o}=t;return Math.min(Math.abs(o.left-e),Math.abs(o.right-e))}));return v||void 0}function Q(e,t){const{selectableRectMap:o}=h().default.state,n=f().C.getMembersByDOMOrder({filter:e=>e.getContextSelectableContainer()===t});for(let i=n.length-1;i>=0;i--){const t=o.get(n[i]);if(t&&t.bottom>e)return!1}return!0}function Y(e,t){const o=(0,w().dq)({includeNonSelectableListContainer:!0,container:t.getContextSelectableContainer()});if(!o)return!1;const n=u().Z$((0,c().DY)([o],(e=>e.value.component===t)));if(!n)return!1;const{selectableRectMap:i}=h().default.state;return!(0,c().Yz)(n,(o=>{const n=o.component&&i.get(o.component);return!!(n&&e<=n.bottom&&o.component!==t)}))}function J(e,t,o){const n=e.getValue(),i=[],r=o?l().Jcv(n):l().QaF(n),{startIndex:s,endIndex:c}=t,d=a().p4(r),p=u().tP(d,0,s),m=u().qr(p,(e=>"\n"===e));m>=0?i.push(m):i.push(0);for(let a=s;a<c;a++){"\n"===d[a]&&i.push(a)}return i}function X(e){const{multiSelection:t}=e;return(0,S().L5)(t).map((e=>{let{store:t,selection:o}=e;const n=l().lzi(t.getValue()),i=l().Ulv(n,o),{tokensInsideRange:r}=l().xrQ(n,i.startIndex,i.endIndex);return l().QaF(r)})).join("\n\n")}function ee(e){const t=b().default.state;return"empty"!==t.mode&&Boolean((0,S().r)(t.multiSelection,e))}function te(e){const t=b().default.state;return"editing"===t.mode&&(t.multiSelection.start.store===e&&(t.multiSelection.end.store===e?"contains-selection":"contains-selection-start"))}function oe(e){const t=b().default.state;if("editing"!==t.mode)return!1;const{start:o,end:n}=t.multiSelection;return o.store===e||n.store===e}function ne(e){const t=b().default.state;if("empty"===t.mode)return;const o=(0,y().QY)(t.multiSelection);if(o)return o.store===e?{type:"contain",selection:l().Ulv(e.getValue(),o.selection)}:void 0;const{start:n,end:i}=t.multiSelection;if(n.store===e){const t=l().eeV(e.getValue()).length;return{type:"start",index:Math.min(n.index,t)}}if(i.store===e){const t=l().eeV(e.getValue()).length;return{type:"end",index:Math.min(i.index,t)}}}function ie(e){if(!(0,y().iG)(e))return!1;const{store:t,index:o}=e.start;return 0===o||"\n"===l().eeV(t.getValue())[o-1]}function re(){if("editing"!==b().default.state.mode)return!1;const e=(0,y().QY)(b().default.state.multiSelection);if(!e)return!1;if(!e.store.isTable(s().iU))return!1;if(0===_().default.state.stores.length)return!1;return e.store.getRecordStoreAtRootPath().getType()===r().Ti.code&&(b().default.isEditingCaption()?"caption":"body")}function ae(e,t){const o=l().lzi(e);if(t<0||t>=o.length)return;let n=0;for(let i=0;i<o.length;i++){if(i===t)return{startIndex:n,endIndex:n+l().J1x(o[i])};n+=l().J1x(o[i])}}},384510:(e,t,o)=>{o.d(t,{Z:()=>n});const n={unit:8,borderRadius:4,card:{desktop:{small:{width:180,height:100},medium:{width:260,height:148},large:{width:320,height:180}},mobile:{width:"100%"}},vertical:{micro:2,tiny:4,small:8,medium:12,large:24},horizontal:{micro:2,tiny:4,small:8,medium:12,large:24}}},176691:(e,t,o)=>{o.d(t,{IS:()=>d,gs:()=>m,hH:()=>u,uy:()=>p});var n=()=>o(575861),i=()=>o(788860),r=()=>o(326966),a=()=>o(527278);const s=(0,i().vU)({year:{id:"timeUtils.durationDescriptor.year",defaultMessage:"{numYears, plural, one {{numYears} year ago} other {{numYears} years ago}}"},day:{id:"timeUtils.durationDescriptor.day",defaultMessage:"{numDays, plural, one {{numDays} day ago} other {{numDays} days ago}}"},week:{id:"timeUtils.durationDescriptor.week",defaultMessage:"{numWeeks, plural, one {{numWeeks} week ago} other {{numWeeks} weeks ago}}"},hour:{id:"timeUtils.durationDescriptor.hour",defaultMessage:"{numHours, plural, one {{numHours} hour ago} other {{numHours} hours ago}}"},minute:{id:"timeUtils.durationDescriptor.minute",defaultMessage:"{numMinutes, plural, one {{numMinutes} minute ago} other {{numMinutes} minutes ago}}"},second:{id:"timeUtils.durationDescriptor.second",defaultMessage:"Just now"}}),l=(0,i().vU)({year:{id:"timeUtils.durationDescriptor.ultraCompactYear",defaultMessage:"{numYears}y"},day:{id:"timeUtils.durationDescriptor.ultraCompactDay",defaultMessage:"{numDays}d"},week:{id:"timeUtils.durationDescriptor.ultraCompactWeek",defaultMessage:"{numWeeks}w"},hour:{id:"timeUtils.durationDescriptor.ultraCompactHour",defaultMessage:"{numHours}h"},minute:{id:"timeUtils.durationDescriptor.ultraCompactMinute",defaultMessage:"{numMinutes}m"},second:{id:"timeUtils.durationDescriptor.ultraCompactSeconds",defaultMessage:"Just now"}}),c=(0,i().vU)({year:{id:"timeUtils.durationDescriptor.compactYear",defaultMessage:"{numYears}y ago"},day:{id:"timeUtils.durationDescriptor.compactDay",defaultMessage:"{numDays}d ago"},week:{id:"timeUtils.durationDescriptor.compactWeek",defaultMessage:"{numWeeks}w ago"},hour:{id:"timeUtils.durationDescriptor.compactHour",defaultMessage:"{numHours}h ago"},minute:{id:"timeUtils.durationDescriptor.compactMinute",defaultMessage:"{numMinutes}m ago"},second:{id:"timeUtils.durationDescriptor.compactSecond",defaultMessage:"Just now"}});function d(e){let{useCompactFormat:t,useUltraCompactFormat:o,useLowercase:n,roundDownYears:i,useWeeks:d}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const u=o?l:t?c:s,p=new Date(e),m=a().Z.getIntl().locale,f=new Date,g=+f-e;if(g>=r()._I&&i){const e=Math.floor(g/r()._I);return a().Z.formatMessage(u.year,{numYears:e})}if(p.getFullYear()!==f.getFullYear()){const e={year:"numeric",month:"short",day:"numeric"},t={year:"numeric",month:"2-digit",day:"2-digit"};return p.toLocaleDateString(m,o?t:e)}const v=Math.floor(g/r().A0);if(v<28&&v>7&&d){const e=Math.floor(v/7);return a().Z.formatMessage(u.week,{numWeeks:e})}if(v>=3)return p.toLocaleDateString(m,{month:"short",day:"numeric"});if(v>=1)return a().Z.formatMessage(u.day,{numDays:v});const h=Math.floor(g/r().U6);if(h>=1)return a().Z.formatMessage(u.hour,{numHours:h});const _=Math.floor(g/r().hM);return _>=1?a().Z.formatMessage(u.minute,{numMinutes:_}):n?a().Z.formatMessage(u.second).toLocaleLowerCase():a().Z.formatMessage(u.second)}function u(e,t){const o=t-e,i=Math.floor(o/r()._I),s=Math.floor(o/r().A0),l=Math.floor(o/r().U6),c=Math.floor(o/r().hM),d=Math.floor(o/r().C0);return i>=1?a().Z.formatMessage(n().eG.year,{numYears:i}):s>=1?a().Z.formatMessage(n().eG.day,{numDays:s}):l>=1?a().Z.formatMessage(n().eG.hour,{numHours:l}):c>=1?a().Z.formatMessage(n().eG.minute,{numMinutes:c}):a().Z.formatMessage(n().eG.second,{numSeconds:d})}function p(e,t){return new Date(e).toLocaleDateString(a().Z.getIntl().locale,{month:"long",year:"numeric",day:"2-digit",hour:"numeric",minute:"2-digit",second:t?void 0:"2-digit"})}function m(e){return new Date(e).toLocaleDateString(a().Z.getIntl().locale,{month:"short",year:"numeric",day:"numeric"})}},465371:(e,t,o)=>{o.d(t,{BX:()=>p,JO:()=>c,_A:()=>l,fn:()=>m,ih:()=>s,m1:()=>u,tZ:()=>d,th:()=>f});var n=()=>o(156642),i=()=>o(94912),r=()=>o(965903),a=()=>o(445264);function s(e){return Boolean(n().ZY[e])}function l(e,t){return Boolean("toggle"===e||n().wZ[e]&&(null==t?void 0:t.toggleable))}function c(e){return Boolean(n().wZ[e])}function d(e){return n().ZY[e]}function u(e){return n().wZ[e]}function p(e){return"toggle"===e.getType()||m(e)}function m(e){const t=e.getType(),o=e.getFormat();return Boolean(void 0!==t&&(0,n().eJ)(t,o))}function f(e,t,o){let n;n=r().default.state.stores.includes(t)?r().default.state.stores:[t];const s=!(a().Z.isOpen(t.id)&&!o);for(const r of n)i().rd({blockId:r.id,state:s,currentUserId:e.currentUser.id})}},794321:(e,t,o)=>{o.d(t,{Z:()=>n});const n={provider:void 0,logInvertedTextOperationError(e){const{invertedOperation:t,maybeRemappedInvertedOperation:n,transaction:i,errorCode:r}=e;if(this.provider)return this.provider.logInvertedTextOperationError(e);const a=i.getUserActionForAnalyticsPurposesOnly(),{command:s}=t,l=`Applying inverted text operation "${s}" from transaction "${a}" failed with error "${r}".`;o(799891).log({level:"error",from:"transactionDebugHelpers",type:"crdt:logInvertedTextOperationError",error:{message:l},data:{userAction:a,operation:s,errorName:r}})},isDebuggingEnabled(){return Boolean(this.provider&&!0)}}},10208:(e,t,o)=>{o.d(t,{JG:()=>r,_V:()=>s,jQ:()=>a,w:()=>i});o(670560);var n=()=>o(513670);function i(e){if(0===e.length)return{tasks:[]};const t={tasks:[],userId:e[0].userId};for(const o of e){if(t.userId!==o.userId)return t;const e=JSON.stringify(n().VS(t.tasks,(e=>e.operations))).length;if(e>=s)return 0===t.tasks.length&&t.tasks.push(o),t;t.tasks.push(o)}return t}function r(e){const{transaction:t,timestamp:o,callback:n}=e;return{id:t.id,userId:t.userId,spaceId:t.spaceId,debug:{userAction:t.getUserActionForAnalyticsPurposesOnly(),userFlow:t.getUserFlowForAnalyticsPurposesOnly(),tags:t.getDebugTagsForAnalyticsPurposesOnly()},timestamp:o,operations:t.operations,callback:n,useSudoMode:t.useSudoMode}}function a(e){const t=r({transaction:e,timestamp:Date.now(),callback:void 0});return JSON.stringify(t).length>s}const s=1e5},731322:(e,t,o)=>{o.d(t,{AK:()=>a,IJ:()=>c,W$:()=>r,Xv:()=>s,ox:()=>l,wF:()=>d});var n=()=>o(19435),i=()=>o(513670);function r(e,t){return a(d(e,t))}function a(e){return void 0!==e&&(e===n().FW||e===n().lR)}function s(e,t){if(a(t))return;const o=n().eU[e],i=o.steps.findIndex((e=>e.id===t));return-1===i?o.steps[0].id:i===o.steps.length-1?n().FW:o.steps[i+1].id}function l(e,t){const o=d(e,t);if(o&&!a(o))return s(t,o)}function c(e,t){const o=d(e,t);if(o)return function(e,t){const o=n().eU[e];var r;if(a(t))return null===(r=(0,i().Z$)(o.steps))||void 0===r?void 0:r.id;const s=o.steps.findIndex((e=>e.id===t));return-1!==s&&0!==s?o.steps[s-1].id:void 0}(t,o)}function d(e,t){var o;if(!e)return;const i=((null===(o=e.getSettings())||void 0===o?void 0:o.tutorials)||{})[t];return void 0===i?n().eU[t].steps[0].id:i}},984975:(e,t,o)=>{o.d(t,{u:()=>a});var n=()=>o(620218),i=()=>o(482162),r=()=>o(410329);function a(e){const{environment:t,type:o,blockStore:a,store:s,isInCollectionView:l}=e,c=n().default.DO_NOT_USE_markLegacy(o),d=null==a?void 0:a.getType(),u=null==a?void 0:a.useCrdt();n().default.DO_NOT_USE_measureAfterNextFlushLegacy(c,{environment:t,getData:()=>{const e=null==a?void 0:a.getType(),t=a&&"properties"===s.path[0]&&"title"===s.path[1],o=a&&"properties"===s.path[0]&&"caption"===s.path[1];return{table:s.table,block_property:t?"title":o?"caption":void 0,block_type:e,use_crdt:u,block_type_initial:e!==d?d:void 0,peek_mode:i().default.state.mode,is_in_collection_view:l,profiling_tool:r().getProfilingToolForSession()}},sendToStatsig:!0})}},209628:(e,t,o)=>{function n(e){const{unicode:t,fallback:o}=e;try{return t()}catch(n){return o}}o.d(t,{D_:()=>a,V9:()=>n,cb:()=>s});const i=n({unicode:()=>/\p{L}/u,fallback:/[a-zA-Z]/}),r=n({unicode:()=>/\p{Z}/u,fallback:/\s/});function a(e){return i.test(e)}function s(e){return r.test(e)}},903591:(e,t,o)=>{o.d(t,{_:()=>a,g:()=>s});var n=()=>o(646574),i=()=>o(35980);const r="userSessionCount";function a(e){const t=c(e);if(!t)return void l({userId:e,count:1});const{count:o,updatedAt:i}=t;(0,n().$6)(i,!0)!==(0,n().$6)(Date.now(),!0)&&l({userId:e,count:o+1})}function s(e){if(!e)return 0;const t=c(e);return(null==t?void 0:t.count)||0}function l(e){let{userId:t,count:o}=e;const n={count:o,updatedAt:Date.now()};i().Z.set({userId:t,key:r,value:n})}function c(e){return i().Z.get({userId:e,key:r})}},889765:(e,t,o)=>{o.d(t,{c:()=>n});o(492176),o(7961),o(267602),o(916054);function n(e){let{blocks:t}=e;const o=t.at(0),n=null==o?void 0:o.getRecordStoreUIRoot();return!!n&&t.every((e=>n.uiContains(e)&&n.id!==e.id))}},856929:(e,t,o)=>{o.d(t,{K:()=>i});var n=()=>o(127519);function i(){return!n().default.isEmptySelection()}},90065:(e,t,o)=>{o.d(t,{$v:()=>b,EI:()=>g,QV:()=>C,Sb:()=>x,T7:()=>y,TJ:()=>k,e_:()=>w,h$:()=>h,l9:()=>_,sA:()=>I,tj:()=>v,zV:()=>S});o(267602),o(30005),o(228244);var n=()=>o(142735),i=()=>o(474094),r=()=>o(226413),a=()=>o(532850),s=()=>o(396136),l=()=>o(899133),c=()=>o(496205),d=()=>o(466970),u=()=>o(279386),p=()=>o(749826),m=()=>o(270315),f=()=>o(527278);const g={Owner:"verification_owner",Verification:"verification"};function v(e){return!e.device.isMobile&&p().default.checkGate({gateName:"page_verification"})}function h(){return p().default.checkGate({gateName:"page_verification_packaging"})&&p().default.checkGate({gateName:"page_verification"})}function _(e){var t;let{environment:o,blockStore:n}=e;const{device:i}=o;if(!v(o))return!1;const r=null==n||null===(t=n.getSpaceStore())||void 0===t?void 0:t.getModel();if(!r||!(0,c().$T)(r))return!1;const a=null==n?void 0:n.getPropertyStore(g.Verification);return(null==a||!a.isDefined())&&((null==n||!n.pathIsDead())&&(!(null==n||!n.canEdit())&&("suggest"!==u().MT.getMode(n)&&!i.isMobile)))}function b(e){var t;let{blockStore:o}=e;if(!p().default.checkGate({gateName:"page_verification"}))return!1;const n=null==o||null===(t=o.getSpaceStore())||void 0===t?void 0:t.getModel();if(!n||!(0,c().$T)(n))return!1;const i=null==o?void 0:o.getPropertyStore(g.Verification);return Boolean(null==i?void 0:i.isDefined())}function y(e){const t=e.getPropertyStore(g.Verification).getValue(),o=(0,c()._w)(t);return(0,c().WN)(o)}function S(e){let{blockStore:t}=e;const o=t.getPropertyStore(g.Owner).getValue(),n=(0,a().DW)({textValue:o,propertySchema:{type:"person",name:"verifier"},blockCreatorPointer:void 0});if(0===n.length){const e=t.getCreatedByPointer();return e?{verificationOwners:[e],isCreatedByDefault:!0}:{verificationOwners:[]}}return{verificationOwners:n}}function w(e){return e===g.Owner||e===i().k.Owner}function k(e){let{collectionStore:t,propertyId:o}=e;const n=t.getSchema()[o];return!!n&&r().iE(n)}function I(e){const t=e.getSchema(),o=Object.keys(t).some(w),n=(0,m().wP)(t,"verification");return o&&n}function C(e){const{results:t,recordMap:o}=e;if(!p().default.checkGate({gateName:"page_verification"}))return;const n={type:"verified",label:f().Z.formatMessage(l().Pe.verified),properties:{}};t.forEach((e=>{const{id:t,badges:i}=e;if(Boolean(i&&i.some((e=>"verified"===e.type))))return;const r=o.getModel({table:s().iU,id:t});(0,c().em)(r)&&(e.badges=[...i||[],n])}))}function x(e){const t=(0,d().E)("page_verification_centralized_view"),o=(0,n().VK)((()=>{const t=e.getModel();return!!t&&(0,c().$T)(t)}),[e]);return t&&o}},760651:(e,t,o)=>{function n(e){return e.isType("page")&&!e.isNonEditableState()&&!e.isCollectionView()&&!e.isInsideCollection()&&!e.isAssociatedCollectionAPageTree()&&e.canAdmin()}function i(e){var t;return(null===(t=e.getCollectionStore())||void 0===t?void 0:t.isPageTreeCollection())??!1}o.d(t,{A:()=>i,z:()=>n})},480089:(e,t,o)=>{o.d(t,{FS:()=>P,Iy:()=>T,Jy:()=>C,PE:()=>k,Pl:()=>I,cR:()=>M,ez:()=>w,rv:()=>x,xb:()=>A});var n=o(667294),i=()=>o(146947),r=()=>o(219727),a=()=>o(657320),s=()=>o(98642),l=()=>o(142735),c=()=>o(846550),d=()=>o(572948),u=()=>o(568017),p=()=>o(707513),m=()=>o(954452),f=()=>o(802911),g=()=>o(122479),v=()=>o(852465),h=()=>o(472753),_=()=>o(95718),b=()=>o(826955),y=()=>o(764189),S=o(785893);function w(e,t,o,i){(0,n.useImperativeHandle)(t,(()=>o),[o]),(0,s().c)(h().R,(()=>o),[o]);const r=e&&!(0,v().SJ)(e);return(0,S.jsx)(f().Z,{name:o.renderedType,children:r?i:null})}function k(e,t){const o=(0,a().l)();return(0,l().VK)((()=>{if(t)return!1;if(y().n.state)return!1;const n=o&&o.publicEditModeStore.state;return!(0,g().Ix)(n)&&e.canEdit()}),[t,o,e])}function I(e){const t=(0,r().O7)();return(0,l().VK)((()=>(0,m().fg)(t,e)),[t,e])}function C(e,t){const o=(0,a().l)();return(0,l().VK)((()=>{if(t)return!1;if(y().n.state)return!1;const n=o&&o.publicEditModeStore.state;return!(0,g().Ix)(n)&&e.canEditCollection()}),[t,o,e])}function x(e,t){const o=(0,c().Fg)();return(0,l().VK)((()=>{if(t&&e.getInsertSuggestion())return{color:(0,d().sZ)(o).color};const n=e.getFormat().block_color||"default";return(0,u().fi)(n,o)}),[t,e,o])}function T(e){return(0,l().VK)((()=>{const t=e.getRecordStoreUIRoot();if(!(t instanceof b().G))return;const o=t.getFormatStore().getKeyStore("page_font").getValue();return p().pe({pageFont:o,locale:i().locale})}),[e])}function M(e){return(0,l().VK)((()=>Boolean(e&&e.pathIsDead())),[e])}function P(e){return(0,l().VK)((()=>e&&e.getClosestNonAliveAncestor()),[e])}function A(e){return(0,l().VK)((()=>Boolean(e&&(0,_().Eo)(e))),[e])}},333264:(e,t,o)=>{o.d(t,{$0:()=>c,$E:()=>i,B2:()=>u,Lw:()=>r,T2:()=>l,T7:()=>s,j:()=>p});var n=o(667294);function i(e){const[t,o]=(0,n.useState)(0);return a(e,(0,n.useCallback)((()=>{const t=e.current;t&&o(t.scrollWidth)}),[e])),t}function r(e){const[t,o]=(0,n.useState)(0);return a(e,(0,n.useCallback)((()=>{const t=e.current;t&&o(t.scrollHeight)}),[e])),t}function a(e,t){(0,n.useEffect)((()=>{const o=e.current;if(o){const n=new ResizeObserver(t);function i(){if(o)for(const e of Array.from(o.children))n.observe(e)}t(),i();const r=new MutationObserver(i);return r.observe(o,{childList:!0}),()=>{r.disconnect(),n.disconnect()}}}),[e,t])}function s(e){const[t,o]=(0,n.useState)(0);return d(e,"content-box",(0,n.useCallback)((()=>{const t=e.current;t&&o(t.clientWidth)}),[e])),t}function l(e){const[t,o]=(0,n.useState)(0);return d(e,"border-box",(0,n.useCallback)((()=>{const t=e.current;t&&o(t.offsetWidth)}),[e])),t}function c(e){const[t,o]=(0,n.useState)(0);return d(e,"border-box",(0,n.useCallback)((()=>{const t=e.current;t&&o(t.offsetHeight)}),[e])),t}function d(e,t,o){(0,n.useEffect)((()=>{const n=e.current;if(n){const e=new ResizeObserver(o);return o(),e.observe(n,{box:t}),()=>e.disconnect()}}),[e,o,t])}function u(e){const[t,o]=(0,n.useState)(0);return m(e,(0,n.useCallback)((()=>{const t=e.current;t&&o(t.scrollLeft)}),[e])),t}function p(e){var t;const[o,i]=(0,n.useState)((null===(t=e.current)||void 0===t?void 0:t.scrollTop)??0);return m(e,(0,n.useCallback)((()=>{const t=e.current;t&&i(t.scrollTop)}),[e])),o}function m(e,t){(0,n.useEffect)((()=>{const o=e.current;if(o)return t(),o.addEventListener("scroll",t),()=>o.removeEventListener("scroll",t)}),[e,t])}},838810:(e,t,o)=>{o.d(t,{R:()=>a});var n=o(667294);const i=!1;let r=0;function a(e){const{getElement:t,onRequestAnimationFrameForDebugging:o}=e,[a,s]=(0,n.useState)(),l=Boolean(t);(0,n.useEffect)((()=>{l||s(void 0)}),[l]);const c=(0,n.useCallback)((()=>{if(!t)return;null==o||o();const e=t();if(e){const t=e.getBoundingClientRect();let o=!0;if(a){a.x===t.x&&a.y===t.y&&a.width===t.width&&a.height===t.height&&(o=!1)}o&&s(t)}else s(void 0)}),[t,o,a]);var d;return d=t?c:void 0,(0,n.useEffect)((()=>{if(!d)return;const e=++r;let t,o=!1;const n=()=>{d(),o?i&&console.log(`#${e} (raf=${t}): raf loop cancelled, returning early`):t=window.requestAnimationFrame(n)};return t=window.requestAnimationFrame(n),i&&console.log(`#${e} (raf=${t}): starting raf loop`),()=>{i&&console.log(`#${e} (raf=${t}): ending raf loop`),o=!0,window.cancelAnimationFrame(t)}}),[d]),a}},549748:(e,t,o)=>{o.d(t,{Q:()=>r});var n=()=>o(904440),i=()=>o(616433);function r(){const e=(0,i().J)();return(0,n().g)()?e?"unavailable":"requestAccessNoFreeCredits":e?"upsell":"requestAccess"}},407544:(e,t,o)=>{o.d(t,{e:()=>a});var n=o(667294),i=()=>o(142735),r=()=>o(200936);function a(){const[e,t]=(0,n.useState)(0),[o]=(0,n.useState)((()=>new(r().E))),a=(0,n.createRef)();return(0,n.useEffect)((()=>{if(a.current)return o.observe(a.current),()=>{o.destroy()}}),[a,o]),(0,i().VK)((()=>{e!==o.rect.state.width&&t(o.rect.state.width)}),[e,o.rect]),[a,e]}},704713:(e,t,o)=>{o.d(t,{X:()=>r});var n=o(667294),i=()=>o(200936);function r(e,t){const[o,r]=(0,n.useState)(void 0),a=e.current;return(0,n.useEffect)((()=>{if(!a)return;const e=new(i().E)({throttleMs:t});return e.observe(a),e.rect.addListener((e=>{r(e.state)})),()=>{e.destroy()}}),[a,t]),o}},987503:(e,t,o)=>{o.d(t,{a:()=>r});var n=()=>o(142735),i=()=>o(749826);function r(e){return(0,n().VK)((()=>i().default.getGroup(e)),[e])}},466970:(e,t,o)=>{o.d(t,{E:()=>r});var n=()=>o(142735),i=()=>o(749826);function r(e){const t=i().default.getGateCheckStore({gateName:e});return(0,n().Kw)(t).gate}},36296:(e,t,o)=>{o.d(t,{Z:()=>a});var n=o(667294),i=()=>o(492788),r=()=>o(424817);function a(e){let{capture:t,preventType:o}=e;(0,n.useEffect)((()=>{if(t){const e={preventType:o};return i().default.afterNextFlush((()=>{r().Z.state.capturingAreas.add(e),r().Z.emit()})),()=>{i().default.afterNextFlush((()=>{r().Z.state.capturingAreas.delete(e),r().Z.emit()}))}}}),[t,o])}},142109:(e,t,o)=>{o.d(t,{$:()=>a});var n=o(667294),i=()=>o(66077),r=()=>o(219727);function a(e,t){const{cacheFallback:o,isMockTextStore:a,isTemporaryData:s,onOperationCallback:l,overrideDefaultRecordCache:c}=t??{},d=(0,r().O7)(),{inMemoryRecordCache:u}=d.defaultRecordCache,p=(0,n.useMemo)((()=>{const t=new(i().Z)({isTemporaryData:Boolean(s),name:e});return t.isMockTextStore=Boolean(a),o&&t.addCacheFallback(o),c&&u.addCacheOverride(t),t}),[o,u,a,s,e,c]);return(0,n.useEffect)((()=>{p.onOperationCallback=l}),[p,l]),(0,n.useEffect)((()=>function(){o&&p.removeCacheFallback(o),c&&u.removeCacheOverride(p)}),[o,u,p,c]),p}},540896:(e,t,o)=>{o.d(t,{O:()=>i});var n=()=>o(987503);function i(){return"double_space"===(0,n().a)("css_margins")}},644248:(e,t,o)=>{o.d(t,{C:()=>i});var n=o(667294);function i(){const e=(0,n.useRef)(null),[t,o]=(0,n.useState)(!1),i=(0,n.useCallback)((()=>{const t=e.current;t&&o(t.matches(":hover"))}),[]);return[(0,n.useCallback)((t=>{t?(t.addEventListener("mouseenter",i),t.addEventListener("mouseleave",i),e.current=t,i()):e.current&&(e.current.removeEventListener("mouseenter",i),e.current.removeEventListener("mouseleave",i),e.current=null)}),[i]),t,e]}},904440:(e,t,o)=>{o.d(t,{g:()=>l,q:()=>s});var n=()=>o(219727),i=()=>o(142735),r=()=>o(876822),a=()=>o(18281);function s(e,t){return(0,i().VK)((()=>a().ff(e,t.state)),[e,t])}function l(){const e=(0,n().O7)(),t=(0,i().VK)((()=>{var e;return null===(e=r().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]);return(0,i().VK)((()=>a().ro(e,t)),[e,t])}},616433:(e,t,o)=>{o.d(t,{J:()=>r});var n=()=>o(142735),i=()=>o(876822);function r(){const{currentSpaceStore:e}=(0,n().Kw)(i().default);return(0,n().VK)((()=>(null==e?void 0:e.canAdmin())??!1),[e])}},236029:(e,t,o)=>{o.d(t,{Z:()=>i});var n=o(667294);function i(e){return(0,n.useMemo)((()=>({onMouseDown:t=>{if(e){if(r(t.target))return;r(document.activeElement)&&t.preventDefault()}}})),[e])}function r(e){return e instanceof HTMLElement&&("true"===e.contentEditable||"input"===e.tagName.toLowerCase())}},26103:(e,t,o)=>{o.d(t,{Z:()=>i});var n=o(667294);function i(e){const[t,o]=n.useState((()=>window.matchMedia(e).matches));return n.useEffect((()=>{const t=window.matchMedia(e);function n(){o(t.matches)}return n(),t.addEventListener("change",n),()=>{t.removeEventListener("change",n)}}),[e]),t}},485491:(e,t,o)=>{o.d(t,{Q:()=>a,f:()=>s});var n=()=>o(458196),i=()=>o(657169),r=()=>o(826955);function a(e){const{spaceStore:t,groupId:o}=e;return r().Q4.createChildStore(t,(0,n().iA)({spacePermissionGroupId:o,spaceId:t.id}))}function s(e){const{spaceStore:t,groupId:o,userId:n}=e;return r().FF.createChildStore(t,(0,i().Ss)({spacePermissionGroupId:o,spaceId:t.id,userId:n}))}},591914:(e,t,o)=>{o.d(t,{VK:()=>d,Wz:()=>p,_P:()=>u,r_:()=>c});var n=()=>o(219727),i=()=>o(142735),r=()=>o(611940),a=()=>o(243225),s=()=>o(876822),l=()=>o(826955);function c(e){const t=(0,n().O7)();return(0,i().VK)((()=>{var o;const n=null===(o=t.currentUser)||void 0===o?void 0:o.id;return n?u(e??s().default.state.currentSpaceStore,n):void 0}),[t,e])}function d(e,t){return l().y3.createChildStore(e,a().v8({userId:t,spaceId:e.id}))}function u(e,t){return e?d(e,t):void 0}function p(e,t){return l().vs.createChildStore(e,r().HY({botId:t,spaceId:e.id}))}},729201:(e,t,o)=>{o.d(t,{Z:()=>i});var n=o(667294);function i(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const[r,a]=(0,n.useState)(i),s=(0,n.useRef)(null),l=(0,n.useRef)(null);return(0,n.useLayoutEffect)((()=>{null!==l.current&&window.clearTimeout(l.current),null!==s.current&&window.clearTimeout(s.current),l.current=null,s.current=null,e?0===t?a(!0):s.current=window.setTimeout((()=>{s.current=null,a(!0)}),t):0===o?a(!1):l.current=window.setTimeout((()=>{l.current=null,a(!1)}),o)}),[e,t,o]),r}},808577:(e,t,o)=>{o.d(t,{AS:()=>s,iP:()=>l});var n=o(667294),i=()=>o(219727),r=()=>o(142735);const a=(0,n.createContext)(void 0);function s(e){const t=(0,r().VK)((()=>e.state.height),[e]),o=(0,n.useContext)(a)||window;return o!==window?o.innerHeight:t}function l(){const{WindowSizeStore:e}=(0,i().O7)();return(0,r().VK)((()=>{const{width:t,height:o}=e.state;return{width:t,height:o}}),[e])}a.displayName="ModalWindowContext"},621378:(e,t,o)=>{o.d(t,{d:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("aiImproveWriting",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M8.68359 1.22168V3.32031C8.68359 3.68945 8.36914 4.00391 7.99316 4.00391C7.62402 4.00391 7.30957 3.68945 7.30957 3.32031V1.22168C7.30957 0.845703 7.62402 0.53125 7.99316 0.53125C8.36914 0.53125 8.68359 0.845703 8.68359 1.22168ZM10.8506 4.22266L12.3203 2.75293C12.5801 2.48633 13.0244 2.48633 13.2842 2.74609C13.5508 3.0127 13.5508 3.45703 13.291 3.7168L11.8213 5.18652C11.5615 5.45312 11.1104 5.45312 10.8506 5.19336C10.5908 4.92676 10.584 4.48242 10.8506 4.22266ZM4.16504 5.18652L2.70898 3.70996C2.44922 3.4502 2.44922 3.00586 2.70898 2.74609C2.96875 2.48633 3.41309 2.49316 3.67969 2.75293L5.13574 4.22266C5.39551 4.48242 5.39551 4.92676 5.12891 5.19336C4.86914 5.45312 4.4248 5.44629 4.16504 5.18652ZM13.4414 14.7705L6.94727 8.24219C6.62598 7.91406 6.61914 7.37402 6.94727 7.02539C7.26855 6.69043 7.83594 6.69043 8.16406 7.02539L14.6582 13.5537C14.9863 13.8887 14.9863 14.4287 14.6582 14.7705C14.3438 15.1055 13.7764 15.1055 13.4414 14.7705ZM1.1709 7.35352H3.27637C3.65234 7.35352 3.9668 7.66797 3.9668 8.03711C3.9668 8.40625 3.65234 8.7207 3.27637 8.7207H1.1709C0.801758 8.7207 0.487305 8.40625 0.487305 8.03711C0.487305 7.66797 0.801758 7.35352 1.1709 7.35352ZM14.8154 8.7207H12.7168C12.3477 8.7207 12.0332 8.40625 12.0332 8.03711C12.0332 7.66797 12.3477 7.35352 12.7168 7.35352H14.8154C15.1914 7.35352 15.5059 7.66797 15.5059 8.03711C15.5059 8.40625 15.1914 8.7207 14.8154 8.7207ZM9.5791 10.04L9.96191 9.65723L7.91113 7.60645C7.76758 7.46289 7.59668 7.42871 7.47363 7.54492C7.33691 7.68164 7.38477 7.8457 7.52148 7.98242L9.5791 10.04ZM2.70215 12.3506L4.17188 10.8945C4.43164 10.6348 4.87598 10.6348 5.13574 10.8945C5.39551 11.1611 5.39551 11.5986 5.12891 11.8652L3.66602 13.3281C3.39941 13.5879 2.95508 13.5811 2.68848 13.3145C2.43555 13.0547 2.43555 12.6104 2.70215 12.3506ZM8.68359 12.7607V14.8594C8.68359 15.2354 8.36914 15.5498 7.99316 15.5498C7.62402 15.5498 7.30957 15.2354 7.30957 14.8594V12.7607C7.30957 12.3916 7.62402 12.0771 7.99316 12.0771C8.36914 12.0771 8.68359 12.3916 8.68359 12.7607Z"})})},338217:(e,t,o)=>{o.d(t,{J:()=>n().J});var n=()=>o(843403)},455343:(e,t,o)=>{o.d(t,{L:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("alignCenter",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M14.44 15.325H1.554a.598.598 0 01-.602-.602c0-.335.267-.601.602-.601H14.44c.334 0 .608.266.608.601a.604.604 0 01-.608.602zm0-13.447H1.554a.598.598 0 01-.602-.601c0-.335.267-.602.602-.602H14.44c.334 0 .608.267.608.602a.604.604 0 01-.608.601zm-8.736 10.34h4.738c1.12 0 1.776-.65 1.776-1.905V5.687c0-1.254-.656-1.905-1.922-1.905H5.704c-1.266 0-1.922.65-1.922 1.905v4.626c0 1.254.656 1.905 1.922 1.905zm.07-1.149c-.545 0-.843-.28-.843-.85V5.78c0-.568.298-.85.843-.85h4.452c.539 0 .843.282.843.85v4.44c0 .568-.304.85-.697.85H5.774z"})})},799737:(e,t,o)=>{o.d(t,{$:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("alignLeft",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M14.44 15.325H1.554a.598.598 0 01-.602-.602c0-.335.267-.601.602-.601H14.44c.334 0 .608.266.608.601a.604.604 0 01-.608.602zm0-13.447H1.554a.598.598 0 01-.602-.601c0-.335.267-.602.602-.602H14.44c.334 0 .608.267.608.602a.604.604 0 01-.608.601zM3.372 12.218H8.11c1.12 0 1.776-.65 1.776-1.905V5.687c0-1.254-.657-1.905-1.922-1.905H3.372c-1.266 0-1.922.65-1.922 1.905v4.626c0 1.254.656 1.905 1.922 1.905zm.07-1.149c-.545 0-.844-.28-.844-.85V5.78c0-.568.3-.85.844-.85h4.451c.54 0 .844.282.844.85v4.44c0 .568-.305.85-.697.85H3.442z"})})},327193:(e,t,o)=>{o.d(t,{g:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("alignRight",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M14.44 15.325H1.554a.598.598 0 01-.602-.602c0-.335.267-.601.602-.601H14.44c.334 0 .608.266.608.601a.604.604 0 01-.608.602zm0-13.447H1.554a.598.598 0 01-.602-.601c0-.335.267-.602.602-.602H14.44c.334 0 .608.267.608.602a.604.604 0 01-.608.601zm-6.408 10.34h4.738c1.12 0 1.776-.65 1.776-1.905V5.687c0-1.254-.657-1.905-1.922-1.905H8.032c-1.266 0-1.922.65-1.922 1.905v4.626c0 1.254.656 1.905 1.922 1.905zm.07-1.149c-.545 0-.844-.28-.844-.85V5.78c0-.568.3-.85.844-.85h4.451c.54 0 .844.282.844.85v4.44c0 .568-.305.85-.697.85H8.102z"})})},522919:(e,t,o)=>{o.d(t,{n:()=>n().n});var n=()=>o(374844)},152930:(e,t,o)=>{o.d(t,{O:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("assistFindActionItems",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M3.17383 7.13477C1.52637 7.13477 0.15918 5.76758 0.15918 4.12695C0.15918 2.47266 1.51953 1.10547 3.17383 1.10547C4.81445 1.10547 6.18164 2.47266 6.18164 4.12695C6.18164 5.76758 4.81445 7.13477 3.17383 7.13477ZM2.81152 5.74023C2.96875 5.74023 3.09863 5.66504 3.1875 5.53516L4.64355 3.27246C4.71191 3.16992 4.73242 3.08105 4.73242 2.98535C4.73242 2.79395 4.56152 2.63672 4.35645 2.63672C4.21973 2.63672 4.10352 2.70508 4.01465 2.8418L2.79785 4.79688L2.27148 4.14062C2.18262 4.01758 2.08691 3.96289 1.9502 3.96289C1.74512 3.96289 1.58105 4.12695 1.58105 4.33887C1.58105 4.45508 1.6084 4.53711 1.68359 4.62598L2.44922 5.54199C2.55176 5.66504 2.66113 5.74023 2.81152 5.74023ZM8.34863 4.72852C8.01367 4.72852 7.75391 4.46191 7.75391 4.12695C7.75391 3.79199 8.01367 3.52539 8.34863 3.52539H15.2256C15.5605 3.52539 15.834 3.79199 15.834 4.12695C15.834 4.46191 15.5605 4.72852 15.2256 4.72852H8.34863ZM3.17383 15.0371C1.52637 15.0371 0.15918 13.6699 0.15918 12.0225C0.15918 10.375 1.51953 9.00781 3.17383 9.00781C4.81445 9.00781 6.18164 10.3682 6.18164 12.0225C6.18164 13.6699 4.81445 15.0371 3.17383 15.0371ZM3.17383 13.875C4.17188 13.875 5.02637 13.0273 5.02637 12.0225C5.02637 11.0176 4.17188 10.1631 3.17383 10.1631C2.16895 10.1631 1.32129 11.0176 1.32129 12.0225C1.32129 13.0273 2.16211 13.875 3.17383 13.875ZM8.34863 12.6377C8.01367 12.6377 7.75391 12.3711 7.75391 12.0361C7.75391 11.7012 8.01367 11.4346 8.34863 11.4346H15.2256C15.5605 11.4346 15.834 11.7012 15.834 12.0361C15.834 12.3711 15.5605 12.6377 15.2256 12.6377H8.34863Z"})})},34812:(e,t,o)=>{o.d(t,{Y:()=>n().Y});var n=()=>o(918579)},619555:(e,t,o)=>{o.d(t,{l:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("audio",{viewBox:"0 0 23.5 24",svg:(0,n.jsx)("path",{d:"M5.258 14.008a.661.661 0 01-.485-.203.702.702 0 01-.195-.492v-2.899c0-.187.065-.351.195-.492a.65.65 0 01.485-.211.67.67 0 01.5.21.694.694 0 01.203.493v2.899a.687.687 0 01-.203.492.68.68 0 01-.5.203zm2.695 3.148a.684.684 0 01-.688-.695V7.266c0-.193.066-.357.196-.493a.66.66 0 01.492-.21c.198 0 .362.07.492.21a.67.67 0 01.203.493v9.195a.67.67 0 01-.203.492.654.654 0 01-.492.203zm2.688 3.032a.645.645 0 01-.485-.204.667.667 0 01-.195-.492V4.234c0-.198.065-.364.195-.5a.645.645 0 01.485-.203.68.68 0 01.5.203.68.68 0 01.203.5v15.258a.654.654 0 01-.203.492.68.68 0 01-.5.203zm2.695-4.047a.684.684 0 01-.492-.196.684.684 0 01-.196-.492v-7.18a.684.684 0 01.688-.695.67.67 0 01.492.203.67.67 0 01.203.492v7.18a.684.684 0 01-.695.688zm2.695 2.328a.68.68 0 01-.695-.696V5.953c0-.193.065-.357.195-.492a.667.667 0 01.5-.211c.193 0 .354.07.485.21a.67.67 0 01.203.493v11.82a.67.67 0 01-.203.493.645.645 0 01-.485.203zm2.688-3.852a.654.654 0 01-.492-.203.675.675 0 01-.196-.484V9.797c0-.188.065-.35.196-.485.13-.14.294-.21.492-.21a.66.66 0 01.492.21.661.661 0 01.203.485v4.133a.661.661 0 01-.203.484.67.67 0 01-.492.203z"})})},765516:(e,t,o)=>{o.d(t,{U:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("blockColor",{viewBox:"0 0 30 30",svg:(0,n.jsx)("path",{d:"M25,5c0-2.2-1.8-4-4-4H6C3.8,1,2,2.8,2,5H1v2h1c0,2.2,1.8,4,4,4h15c2.2,0,4-1.8,4-4h2v6H14v4h-2v9c0,1.657,1.344,3,3,3 s3-1.343,3-3v-9h-2v-2h13V5H25z M23,7c0,1.103-0.896,2-2,2H6C4.896,9,4,8.103,4,7V5c0-1.103,0.896-2,2-2h15c1.104,0,2,0.897,2,2V7z M16,26c0,0.552-0.449,1-1,1s-1-0.448-1-1v-7h2V26z"})})},121530:(e,t,o)=>{o.d(t,{Q:()=>n().Q});var n=()=>o(115807)},765552:(e,t,o)=>{o.d(t,{o:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("caption",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M2.87 8.975h6.74c1.119 0 1.775-.65 1.775-1.904V2.444c0-1.254-.656-1.904-1.922-1.904H2.871C1.605.54.949 1.19.949 2.444V7.07c0 1.254.656 1.904 1.922 1.904zm.07-1.148c-.544 0-.843-.282-.843-.85v-4.44c0-.568.299-.849.844-.849h6.451c.54 0 .844.281.844.85v4.44c0 .567-.305.849-.697.849H2.94zm-1.39 4.386h12.893a.604.604 0 00.608-.601.604.604 0 00-.608-.602H1.55a.598.598 0 00-.601.602c0 .335.266.601.601.601zm8.49 3.247H1.55a.598.598 0 01-.601-.601c0-.335.266-.602.601-.602h8.49c.336 0 .609.267.609.602a.604.604 0 01-.608.601z"})})},997141:(e,t,o)=>{o.d(t,{n:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("chat",{viewBox:"0 0 32 32",svg:(0,n.jsx)("path",{d:"M7.52 28.727c.591 0 .993-.205 1.706-.842l3.732-3.41c.802.898 2.017 1.375 3.566 1.375h3.844l3.721 3.252c.68.591 1.048.898 1.582.898.77 0 1.204-.557 1.204-1.421V25.85h.468c2.796 0 4.657-1.716 4.657-4.695v-6.719c0-2.978-1.86-4.695-4.657-4.695h-1.75v-.864C25.593 5.785 23.8 4 20.77 4H4.825C1.916 4 0 5.785 0 8.877v10.47c0 3.093 1.916 4.878 4.825 4.878h1.47v3.103c0 .876.435 1.399 1.226 1.399zm.458-5.264c0-.648-.38-.955-.87-.955H4.937c-1.972 0-3.142-1.091-3.142-3.217V8.934c0-2.115 1.17-3.229 3.142-3.229h15.721c1.973 0 3.142 1.114 3.142 3.229v.807h-7.275c-2.92 0-4.647 1.717-4.647 4.695v6.72c0 .613.067 1.17.212 1.682l-4.111 3.865v-3.24zm17.225 4.48l-3.576-3.275c-.446-.398-.713-.523-1.326-.523h-3.666c-1.86 0-2.975-1.034-2.975-3.047l.011-6.605c0-2 1.103-3.047 2.964-3.047h10.607c1.85 0 2.964 1.046 2.964 3.047v6.605c0 2.013-1.114 3.047-2.964 3.047h-1.18c-.48 0-.859.284-.859.932v2.865z"})})},15409:(e,t,o)=>{o.d(t,{e:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("check",{viewBox:"0 0 14 14",svg:(0,n.jsx)("polygon",{points:"5.5 11.9993304 14 3.49933039 12.5 2 5.5 8.99933039 1.5 4.9968652 0 6.49933039"})})},484883:(e,t,o)=>{o.d(t,{g:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("checkPartial",{viewBox:"0 0 14 14",svg:(0,n.jsx)("rect",{x:"1.75",y:"6.125",width:"10.5",height:"1.75"})})},887199:(e,t,o)=>{o.d(t,{v:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("checkboxCircle",{viewBox:"0 0 22 23",svg:(0,n.jsx)("circle",{cx:"11",cy:"11.5",r:"10",stroke:"#E2E1DE",strokeWidth:"2"})})},231750:(e,t,o)=>{o.d(t,{z:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("checkboxSquare",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M1.5,1.5 L1.5,14.5 L14.5,14.5 L14.5,1.5 L1.5,1.5 Z M0,0 L16,0 L16,16 L0,16 L0,0 Z"})})},615634:(e,t,o)=>{o.d(t,{i:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("chevronDown",{viewBox:"0 0 30 30",svg:(0,n.jsx)("polygon",{points:"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 "})})},536691:(e,t,o)=>{o.d(t,{A:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("chevronDownRoundedThick",{viewBox:"0 0 12 12",svg:(0,n.jsx)("path",{d:"M6.02734 8.80274C6.27148 8.80274 6.47168 8.71484 6.66211 8.51465L10.2803 4.82324C10.4268 4.67676 10.5 4.49609 10.5 4.28125C10.5 3.85156 10.1484 3.5 9.72363 3.5C9.50879 3.5 9.30859 3.58789 9.15234 3.74902L6.03223 6.9668L2.90722 3.74902C2.74609 3.58789 2.55078 3.5 2.33105 3.5C1.90137 3.5 1.55469 3.85156 1.55469 4.28125C1.55469 4.49609 1.62793 4.67676 1.77441 4.82324L5.39258 8.51465C5.58789 8.71973 5.78808 8.80274 6.02734 8.80274Z"})})},179512:(e,t,o)=>{o.d(t,{k:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("chevronLeftRounded",{viewBox:"0 0 24 24",svg:(0,n.jsx)("path",{d:"M7.1875 11.8594C7.1875 12.0547 7.25781 12.2266 7.40625 12.375L13.6016 18.4297C13.7344 18.5703 13.9062 18.6406 14.1094 18.6406C14.5156 18.6406 14.8281 18.3359 14.8281 17.9297C14.8281 17.7266 14.7422 17.5547 14.6172 17.4219L8.92969 11.8594L14.6172 6.29688C14.7422 6.16406 14.8281 5.98438 14.8281 5.78906C14.8281 5.38281 14.5156 5.07812 14.1094 5.07812C13.9062 5.07812 13.7344 5.14844 13.6016 5.28125L7.40625 11.3438C7.25781 11.4844 7.1875 11.6641 7.1875 11.8594Z"})})},696347:(e,t,o)=>{o.d(t,{o:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("chevronRight",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M12.375 8.06445C12.375 7.83203 12.2861 7.63379 12.1084 7.45605L6.77637 2.24023C6.62598 2.08984 6.44141 2.01465 6.22266 2.01465C5.77832 2.01465 5.42285 2.35645 5.42285 2.80078C5.42285 3.01953 5.51172 3.21777 5.66211 3.375L10.4746 8.06445L5.66211 12.7539C5.51855 12.9043 5.42285 13.1025 5.42285 13.3213C5.42285 13.7725 5.77832 14.1143 6.22266 14.1143C6.44141 14.1143 6.62598 14.0391 6.77637 13.8887L12.1084 8.67285C12.293 8.49512 12.375 8.29688 12.375 8.06445Z"})})},654723:(e,t,o)=>{o.d(t,{X:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("clearInput",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M7.993 15.528a7.273 7.273 0 01-2.923-.593A7.633 7.633 0 012.653 13.3a7.797 7.797 0 01-1.633-2.417 7.273 7.273 0 01-.593-2.922c0-1.035.198-2.01.593-2.922A7.758 7.758 0 015.063.99 7.273 7.273 0 017.985.395a7.29 7.29 0 012.93.593 7.733 7.733 0 012.417 1.64 7.647 7.647 0 011.64 2.41c.396.914.594 1.888.594 2.923 0 1.035-.198 2.01-.593 2.922a7.735 7.735 0 01-4.058 4.05 7.272 7.272 0 01-2.922.594zM5.59 11.06c.2 0 .371-.066.513-.198L8 8.951l1.904 1.911a.675.675 0 00.498.198.667.667 0 00.491-.198.67.67 0 00.205-.49.64.64 0 00-.205-.491L8.981 7.969l1.92-1.911a.686.686 0 00.204-.491.646.646 0 00-.205-.484.646.646 0 00-.483-.205.67.67 0 00-.49.205L8 6.995 6.081 5.083a.696.696 0 00-.49-.19.682.682 0 00-.491.198.651.651 0 00-.198.49c0 .181.068.342.205.484l1.912 1.904-1.912 1.92a.646.646 0 00-.205.483c0 .19.066.354.198.49.136.132.3.198.49.198z"})})},518530:(e,t,o)=>{o.d(t,{U:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("close",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M2.89795 13.3428C3.18799 13.6262 3.6626 13.6262 3.93945 13.3494L7.99341 9.29541L12.0474 13.3494C12.3308 13.6262 12.8054 13.6328 13.0889 13.3428C13.3723 13.0593 13.3723 12.5847 13.0955 12.3079L9.0415 8.24731L13.0955 4.19336C13.3723 3.9165 13.3789 3.4353 13.0889 3.15845C12.7988 2.875 12.3308 2.875 12.0474 3.15186L7.99341 7.20581L3.93945 3.15186C3.6626 2.875 3.1814 2.86841 2.89795 3.15186C2.6145 3.44189 2.62109 3.9231 2.89795 4.19336L6.9519 8.24731L2.89795 12.3079C2.62109 12.5781 2.6145 13.0659 2.89795 13.3428Z"})})},688049:(e,t,o)=>{o.d(t,{D:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("closeSmall",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M3.732 11.052c-.303.308-.32.877.011 1.202.33.33.894.32 1.203.011L8 9.21l3.05 3.05c.32.325.872.32 1.197-.011a.857.857 0 00.01-1.197L9.21 8.002l3.05-3.056a.857.857 0 00-.01-1.197.857.857 0 00-1.198-.01L8 6.788 4.946 3.732c-.31-.303-.878-.32-1.203.01-.325.331-.314.895-.01 1.203l3.055 3.056-3.056 3.05z"})})},429587:(e,t,o)=>{o.d(t,{b:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("closeThick",{viewBox:"0 0 8 8",svg:(0,n.jsx)("polygon",{points:"8 1.01818182 6.98181818 0 4 2.98181818 1.01818182 0 0 1.01818182 2.98181818 4 0 6.98181818 1.01818182 8 4 5.01818182 6.98181818 8 8 6.98181818 5.01818182 4"})})},975584:(e,t,o)=>{o.d(t,{_:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("codeOnly",{viewBox:"0 0 24 20",svg:(0,n.jsx)("path",{d:"M8.093 13.62c.458.123.875-.123 1.011-.58l3.364-11.533c.13-.43-.082-.855-.54-.978-.451-.123-.848.075-.998.581L7.58 12.595c-.137.465.041.895.513 1.025zM.115 7.064c0 .233.103.472.301.643l4.423 3.992c.362.328.848.322 1.148-.02.308-.342.267-.834-.082-1.149L2.077 7.064l3.828-3.472c.349-.315.39-.8.082-1.142-.3-.342-.786-.348-1.148-.02L.416 6.415a.879.879 0 00-.3.65zm19.763 0a.878.878 0 00-.3-.649L15.153 2.43c-.362-.328-.847-.322-1.148.02-.308.342-.267.827.082 1.142l3.828 3.472-3.828 3.466c-.349.315-.39.807-.082 1.149.3.341.786.348 1.148.02l4.423-3.992c.198-.17.3-.41.3-.643z"})})},241227:(e,t,o)=>{o.d(t,{i:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("collectionBoard",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M2.39697 14.4634H13.5964C15.0532 14.4634 15.8311 13.6921 15.8311 12.2485V4.24609C15.8311 2.80249 15.0532 2.03125 13.5964 2.03125H2.39697C0.940186 2.03125 0.162354 2.7959 0.162354 4.24609V12.2485C0.162354 13.6987 0.940186 14.4634 2.39697 14.4634ZM2.52222 12.9934C1.94214 12.9934 1.63232 12.7034 1.63232 12.0969V4.39771C1.63232 3.79126 1.94214 3.50122 2.52222 3.50122H4.92822V12.9934H2.52222ZM6.34546 12.9934V3.50122H9.64795V12.9934H6.34546ZM13.4712 3.50122C14.0447 3.50122 14.3611 3.79126 14.3611 4.39771V12.0969C14.3611 12.7034 14.0447 12.9934 13.4712 12.9934H11.0652V3.50122H13.4712Z"})})},697288:(e,t,o)=>{o.d(t,{N:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("collectionCalendar",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M3.29688 14.4561H12.7031C14.1797 14.4561 14.9453 13.6904 14.9453 12.2344V3.91504C14.9453 2.45215 14.1797 1.69336 12.7031 1.69336H3.29688C1.82031 1.69336 1.05469 2.45215 1.05469 3.91504V12.2344C1.05469 13.6973 1.82031 14.4561 3.29688 14.4561ZM3.27637 13.1162C2.70898 13.1162 2.39453 12.8154 2.39453 12.2207V5.9043C2.39453 5.30273 2.70898 5.00879 3.27637 5.00879H12.71C13.2842 5.00879 13.6055 5.30273 13.6055 5.9043V12.2207C13.6055 12.8154 13.2842 13.1162 12.71 13.1162H3.27637ZM6.68066 7.38086H7.08398C7.33008 7.38086 7.41211 7.30566 7.41211 7.05957V6.66309C7.41211 6.41699 7.33008 6.3418 7.08398 6.3418H6.68066C6.44141 6.3418 6.35938 6.41699 6.35938 6.66309V7.05957C6.35938 7.30566 6.44141 7.38086 6.68066 7.38086ZM8.92285 7.38086H9.31934C9.56543 7.38086 9.64746 7.30566 9.64746 7.05957V6.66309C9.64746 6.41699 9.56543 6.3418 9.31934 6.3418H8.92285C8.67676 6.3418 8.59473 6.41699 8.59473 6.66309V7.05957C8.59473 7.30566 8.67676 7.38086 8.92285 7.38086ZM11.1582 7.38086H11.5547C11.8008 7.38086 11.8828 7.30566 11.8828 7.05957V6.66309C11.8828 6.41699 11.8008 6.3418 11.5547 6.3418H11.1582C10.9121 6.3418 10.8301 6.41699 10.8301 6.66309V7.05957C10.8301 7.30566 10.9121 7.38086 11.1582 7.38086ZM4.44531 9.58203H4.84863C5.09473 9.58203 5.17676 9.50684 5.17676 9.26074V8.86426C5.17676 8.61816 5.09473 8.54297 4.84863 8.54297H4.44531C4.20605 8.54297 4.12402 8.61816 4.12402 8.86426V9.26074C4.12402 9.50684 4.20605 9.58203 4.44531 9.58203ZM6.68066 9.58203H7.08398C7.33008 9.58203 7.41211 9.50684 7.41211 9.26074V8.86426C7.41211 8.61816 7.33008 8.54297 7.08398 8.54297H6.68066C6.44141 8.54297 6.35938 8.61816 6.35938 8.86426V9.26074C6.35938 9.50684 6.44141 9.58203 6.68066 9.58203ZM8.92285 9.58203H9.31934C9.56543 9.58203 9.64746 9.50684 9.64746 9.26074V8.86426C9.64746 8.61816 9.56543 8.54297 9.31934 8.54297H8.92285C8.67676 8.54297 8.59473 8.61816 8.59473 8.86426V9.26074C8.59473 9.50684 8.67676 9.58203 8.92285 9.58203ZM11.1582 9.58203H11.5547C11.8008 9.58203 11.8828 9.50684 11.8828 9.26074V8.86426C11.8828 8.61816 11.8008 8.54297 11.5547 8.54297H11.1582C10.9121 8.54297 10.8301 8.61816 10.8301 8.86426V9.26074C10.8301 9.50684 10.9121 9.58203 11.1582 9.58203ZM4.44531 11.7832H4.84863C5.09473 11.7832 5.17676 11.708 5.17676 11.4619V11.0654C5.17676 10.8193 5.09473 10.7441 4.84863 10.7441H4.44531C4.20605 10.7441 4.12402 10.8193 4.12402 11.0654V11.4619C4.12402 11.708 4.20605 11.7832 4.44531 11.7832ZM6.68066 11.7832H7.08398C7.33008 11.7832 7.41211 11.708 7.41211 11.4619V11.0654C7.41211 10.8193 7.33008 10.7441 7.08398 10.7441H6.68066C6.44141 10.7441 6.35938 10.8193 6.35938 11.0654V11.4619C6.35938 11.708 6.44141 11.7832 6.68066 11.7832ZM8.92285 11.7832H9.31934C9.56543 11.7832 9.64746 11.708 9.64746 11.4619V11.0654C9.64746 10.8193 9.56543 10.7441 9.31934 10.7441H8.92285C8.67676 10.7441 8.59473 10.8193 8.59473 11.0654V11.4619C8.59473 11.708 8.67676 11.7832 8.92285 11.7832Z"})})},909679:(e,t,o)=>{o.d(t,{E:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("collectionForm",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M5.50195 4.75635C5.37435 4.75635 5.26953 4.71305 5.1875 4.62646C5.10547 4.53988 5.06445 4.43734 5.06445 4.31885C5.06445 4.1958 5.10547 4.09326 5.1875 4.01123C5.26953 3.9292 5.37435 3.88818 5.50195 3.88818H10.5059C10.6289 3.88818 10.7314 3.9292 10.8135 4.01123C10.8955 4.09326 10.9365 4.1958 10.9365 4.31885C10.9365 4.43734 10.8955 4.53988 10.8135 4.62646C10.7314 4.71305 10.6289 4.75635 10.5059 4.75635H5.50195ZM5.50195 7.0874C5.37435 7.0874 5.26953 7.04639 5.1875 6.96436C5.10547 6.87777 5.06445 6.77295 5.06445 6.6499C5.06445 6.53141 5.10547 6.43115 5.1875 6.34912C5.26953 6.26709 5.37435 6.22607 5.50195 6.22607H10.5059C10.6289 6.22607 10.7314 6.26709 10.8135 6.34912C10.8955 6.43115 10.9365 6.53141 10.9365 6.6499C10.9365 6.77295 10.8955 6.87777 10.8135 6.96436C10.7314 7.04639 10.6289 7.0874 10.5059 7.0874H5.50195ZM5.50195 9.42529C5.37435 9.42529 5.26953 9.38428 5.1875 9.30225C5.10547 9.22021 5.06445 9.11995 5.06445 9.00146C5.06445 8.87842 5.10547 8.77588 5.1875 8.69385C5.26953 8.60726 5.37435 8.56396 5.50195 8.56396H7.92188C8.04948 8.56396 8.1543 8.60726 8.23633 8.69385C8.31836 8.77588 8.35938 8.87842 8.35938 9.00146C8.35938 9.11995 8.31836 9.22021 8.23633 9.30225C8.1543 9.38428 8.04948 9.42529 7.92188 9.42529H5.50195ZM2.13867 13.1577V2.84229C2.13867 2.10856 2.32552 1.55257 2.69922 1.17432C3.07292 0.791504 3.62663 0.600098 4.36035 0.600098H11.6406C12.3743 0.600098 12.9281 0.791504 13.3018 1.17432C13.6755 1.55257 13.8623 2.10856 13.8623 2.84229V13.1577C13.8623 13.896 13.6755 14.4543 13.3018 14.8325C12.9281 15.2108 12.3743 15.3999 11.6406 15.3999H4.36035C3.62663 15.3999 3.07292 15.2108 2.69922 14.8325C2.32552 14.4543 2.13867 13.896 2.13867 13.1577ZM3.48535 13.0757C3.48535 13.3901 3.56738 13.6317 3.73145 13.8003C3.89551 13.9689 4.14388 14.0532 4.47656 14.0532H11.5312C11.8639 14.0532 12.1123 13.9689 12.2764 13.8003C12.4404 13.6317 12.5225 13.3901 12.5225 13.0757V2.93115C12.5225 2.61214 12.4404 2.36833 12.2764 2.19971C12.1123 2.02653 11.8639 1.93994 11.5312 1.93994H4.47656C4.14388 1.93994 3.89551 2.02653 3.73145 2.19971C3.56738 2.36833 3.48535 2.61214 3.48535 2.93115V13.0757Z"})})},118329:(e,t,o)=>{o.d(t,{n:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("collectionGallery",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M2.0542 7.75952H5.96973C7.00464 7.75952 7.50562 7.25854 7.50562 6.19727V3.58691C7.50562 2.53223 7.00464 2.03125 5.96973 2.03125H2.0542C1.01929 2.03125 0.518311 2.53223 0.518311 3.58691V6.19727C0.518311 7.25854 1.01929 7.75952 2.0542 7.75952ZM10.0303 7.75952H13.9392C14.9741 7.75952 15.4751 7.25854 15.4751 6.19727V3.58691C15.4751 2.53223 14.9741 2.03125 13.9392 2.03125H10.0303C8.98877 2.03125 8.48779 2.53223 8.48779 3.58691V6.19727C8.48779 7.25854 8.98877 7.75952 10.0303 7.75952ZM2.06079 6.55322C1.83008 6.55322 1.71802 6.44116 1.71802 6.20386V3.58032C1.71802 3.34961 1.83008 3.23755 2.06079 3.23755H5.96313C6.18726 3.23755 6.30591 3.34961 6.30591 3.58032V6.20386C6.30591 6.44116 6.18726 6.55322 5.96313 6.55322H2.06079ZM10.0369 6.55322C9.79956 6.55322 9.69409 6.44116 9.69409 6.20386V3.58032C9.69409 3.34961 9.79956 3.23755 10.0369 3.23755H13.9392C14.1633 3.23755 14.2754 3.34961 14.2754 3.58032V6.20386C14.2754 6.44116 14.1633 6.55322 13.9392 6.55322H10.0369ZM2.0542 14.4634H5.96973C7.00464 14.4634 7.50562 13.969 7.50562 12.9077V10.2974C7.50562 9.24268 7.00464 8.7417 5.96973 8.7417H2.0542C1.01929 8.7417 0.518311 9.24268 0.518311 10.2974V12.9077C0.518311 13.969 1.01929 14.4634 2.0542 14.4634ZM10.0303 14.4634H13.9392C14.9741 14.4634 15.4751 13.969 15.4751 12.9077V10.2974C15.4751 9.24268 14.9741 8.7417 13.9392 8.7417H10.0303C8.98877 8.7417 8.48779 9.24268 8.48779 10.2974V12.9077C8.48779 13.969 8.98877 14.4634 10.0303 14.4634ZM2.06079 13.2637C1.83008 13.2637 1.71802 13.1516 1.71802 12.9143V10.2974C1.71802 10.0601 1.83008 9.94141 2.06079 9.94141H5.96313C6.18726 9.94141 6.30591 10.0601 6.30591 10.2974V12.9143C6.30591 13.1516 6.18726 13.2637 5.96313 13.2637H2.06079ZM10.0369 13.2637C9.79956 13.2637 9.69409 13.1516 9.69409 12.9143V10.2974C9.69409 10.0601 9.79956 9.94141 10.0369 9.94141H13.9392C14.1633 9.94141 14.2754 10.0601 14.2754 10.2974V12.9143C14.2754 13.1516 14.1633 13.2637 13.9392 13.2637H10.0369Z"})})},749115:(e,t,o)=>{o.d(t,{O:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("collectionList",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M2.08716 5.15576C2.64087 5.15576 3.08911 4.70752 3.08911 4.15381C3.08911 3.6001 2.64087 3.15186 2.08716 3.15186C1.53345 3.15186 1.08521 3.6001 1.08521 4.15381C1.08521 4.70752 1.53345 5.15576 2.08716 5.15576ZM5.29736 4.85254H14.2161C14.605 4.85254 14.9148 4.54272 14.9148 4.15381C14.9148 3.76489 14.605 3.45508 14.2161 3.45508H5.29736C4.90845 3.45508 4.59863 3.7583 4.59863 4.15381C4.59863 4.54272 4.90186 4.85254 5.29736 4.85254ZM2.08716 9.24927C2.64087 9.24927 3.08911 8.80103 3.08911 8.24731C3.08911 7.6936 2.64087 7.24536 2.08716 7.24536C1.53345 7.24536 1.08521 7.6936 1.08521 8.24731C1.08521 8.80103 1.53345 9.24927 2.08716 9.24927ZM5.29736 8.94604H14.2161C14.605 8.94604 14.9148 8.64282 14.9148 8.24731C14.9148 7.8584 14.605 7.54858 14.2161 7.54858H5.29736C4.90845 7.54858 4.59863 7.8584 4.59863 8.24731C4.59863 8.63623 4.90186 8.94604 5.29736 8.94604ZM2.08716 13.3428C2.64087 13.3428 3.08911 12.8945 3.08911 12.3408C3.08911 11.7937 2.64087 11.3389 2.08716 11.3389C1.53345 11.3389 1.08521 11.7937 1.08521 12.3408C1.08521 12.8945 1.53345 13.3428 2.08716 13.3428ZM5.29736 13.0396H14.2161C14.605 13.0396 14.9148 12.7363 14.9148 12.3408C14.9148 11.9519 14.605 11.6487 14.2161 11.6487H5.29736C4.90845 11.6487 4.59863 11.9519 4.59863 12.3408C4.59863 12.7297 4.90186 13.0396 5.29736 13.0396Z"})})},676232:(e,t,o)=>{o.d(t,{t:()=>n().t});var n=()=>o(644602)},809273:(e,t,o)=>{o.d(t,{_:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("collectionTimeline",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5964 14.4634H2.39697C0.940186 14.4634 0.162354 13.6987 0.162354 12.2485V4.24609C0.162354 2.7959 0.940186 2.03125 2.39697 2.03125H13.5964C15.0532 2.03125 15.8311 2.80249 15.8311 4.24609V12.2485C15.8311 13.6921 15.0532 14.4634 13.5964 14.4634ZM1.63232 12.0969C1.63232 12.7034 1.94214 12.9934 2.52222 12.9934H13.4712C14.0447 12.9934 14.3611 12.7034 14.3611 12.0969V4.39771C14.3611 3.79126 14.0447 3.50122 13.4712 3.50122H2.52222C1.94214 3.50122 1.63232 3.79126 1.63232 4.39771V12.0969ZM8.92711 6.13826H2.71776C2.44986 6.13826 2.23645 5.91123 2.23645 5.64787C2.23645 5.37997 2.44986 5.15747 2.71776 5.15747H8.92711C9.19955 5.15747 9.40842 5.37542 9.40842 5.64787C9.40842 5.91577 9.19955 6.13826 8.92711 6.13826ZM11.3757 8.49036H4.75992C4.49201 8.49036 4.2786 8.26332 4.2786 7.99996C4.2786 7.73206 4.49201 7.50957 4.75992 7.50957H11.3757C11.6482 7.50957 11.857 7.72752 11.857 7.99996C11.857 8.26332 11.6482 8.49036 11.3757 8.49036ZM13.2822 10.8424H8.24608C7.97818 10.8424 7.76477 10.6109 7.76477 10.352C7.76477 10.0841 7.97818 9.85711 8.24608 9.85711H13.2822C13.5547 9.85711 13.7636 10.0796 13.7636 10.352C13.7636 10.6154 13.5547 10.8424 13.2822 10.8424Z"})})},325107:(e,t,o)=>{o.d(t,{U:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("copy",{viewBox:"0 0 14 16",svg:(0,n.jsx)("path",{d:"M2.404 15.322h5.701c1.26 0 1.887-.662 1.887-1.927V12.38h1.154c1.254 0 1.91-.662 1.91-1.928V5.555c0-.774-.158-1.266-.626-1.74L9.512.837C9.066.387 8.545.21 7.865.21H5.463c-1.254 0-1.91.662-1.91 1.928v1.084H2.404c-1.254 0-1.91.668-1.91 1.933v8.239c0 1.265.656 1.927 1.91 1.927zm7.588-6.62c0-.792-.1-1.161-.592-1.665L6.225 3.814c-.452-.462-.844-.58-1.5-.591V2.215c0-.533.28-.832.843-.832h2.38v2.883c0 .726.386 1.113 1.107 1.113h2.83v4.998c0 .539-.276.832-.844.832H9.992V8.701zm-.79-4.29c-.206 0-.288-.088-.288-.287V1.594l2.771 2.818H9.201zM2.503 14.15c-.563 0-.844-.293-.844-.832V5.232c0-.539.281-.837.85-.837h1.91v3.187c0 .85.416 1.26 1.26 1.26h3.14v4.476c0 .54-.28.832-.843.832H2.504zM5.79 7.816c-.24 0-.346-.105-.346-.345V4.547l3.223 3.27H5.791z"})})},173555:(e,t,o)=>{o.d(t,{s:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("crop",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M15.571 11.703c0 .187-.063.34-.191.458a.68.68 0 01-.492.177H4.21a.573.573 0 01-.424-.157.573.573 0 01-.157-.424V1.127c0-.205.064-.371.191-.499A.646.646 0 014.306.43c.196 0 .357.066.485.198a.675.675 0 01.191.5v9.734c0 .127.066.191.199.191h9.707c.205 0 .369.06.492.178a.613.613 0 01.191.472zM.43 4.306c0-.187.061-.34.184-.458a.68.68 0 01.492-.184h10.692a.56.56 0 01.581.588v10.622a.67.67 0 01-.198.506.658.658 0 01-.486.192.657.657 0 01-.485-.192.684.684 0 01-.191-.506V5.147c0-.132-.066-.198-.199-.198H1.106c-.2 0-.364-.06-.492-.178a.616.616 0 01-.184-.465z"})})},165741:(e,t,o)=>{o.d(t,{$:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("dateInterval",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M4.345 10.359l1.832 1.36c.191.146.378.182.56.11.183-.074.274-.226.274-.459v-.847H8.96a.52.52 0 00.54-.533.513.513 0 00-.157-.376.521.521 0 00-.383-.158H7.01V8.63c0-.246-.093-.4-.28-.465-.186-.068-.371-.034-.553.103L4.345 9.64a.43.43 0 00-.185.362c0 .146.062.264.185.356zm11.31 0l-1.832 1.36c-.191.146-.378.182-.56.11-.183-.074-.274-.226-.274-.459v-.847H11.04a.533.533 0 01-.383-.15.521.521 0 01-.157-.383c0-.146.052-.272.157-.376a.521.521 0 01.383-.158h1.95V8.63c0-.246.093-.4.28-.465.186-.068.371-.034.553.103l1.832 1.374a.43.43 0 01.185.362.423.423 0 01-.185.356zM3.378 15.16c.183 0 .33-.051.445-.16a.553.553 0 00.17-.42V5.449a.592.592 0 00-.17-.438.601.601 0 00-.445-.17.592.592 0 00-.437.17.592.592 0 00-.171.438v9.132c0 .173.057.31.17.42s.26.16.438.16zm13.24 0c.183 0 .33-.051.445-.16a.552.552 0 00.17-.42V5.447a.592.592 0 00-.17-.437.6.6 0 00-.445-.17.592.592 0 00-.437.17.593.593 0 00-.171.437v9.132c0 .173.057.31.17.42.115.11.26.16.438.16z"})})},906249:(e,t,o)=>{o.d(t,{h:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("dot",{viewBox:"0 0 5 4",svg:(0,n.jsx)("circle",{cx:"2.5",cy:"2",r:"2"})})},314379:(e,t,o)=>{o.d(t,{o:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("dots",{viewBox:"0 0 13 3",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M3,1.5A1.5,1.5,0,1,1,1.5,0,1.5,1.5,0,0,1,3,1.5Z"}),(0,n.jsx)("path",{d:"M8,1.5A1.5,1.5,0,1,1,6.5,0,1.5,1.5,0,0,1,8,1.5Z"}),(0,n.jsx)("path",{d:"M13,1.5A1.5,1.5,0,1,1,11.5,0,1.5,1.5,0,0,1,13,1.5Z"})]})})},884399:(e,t,o)=>{o.d(t,{a:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("download",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M8.215 15.126c3.862 0 7.061-3.192 7.061-7.062 0-3.862-3.199-7.061-7.068-7.061-3.862 0-7.055 3.2-7.055 7.061 0 3.87 3.2 7.062 7.062 7.062zm0-1.388a5.654 5.654 0 01-5.667-5.674 5.642 5.642 0 015.66-5.667 5.66 5.66 0 015.68 5.667 5.66 5.66 0 01-5.673 5.674zm0-9.174c-.342 0-.602.247-.602.588v3.234l.062 1.401-.622-.766-.766-.8a.557.557 0 00-.41-.177.54.54 0 00-.56.547c0 .164.054.3.163.41l2.256 2.283c.15.157.294.226.479.226.191 0 .335-.075.485-.226l2.256-2.283a.557.557 0 00.164-.41.539.539 0 00-.56-.547.523.523 0 00-.41.178l-.766.793-.622.779.054-1.408V5.152c0-.341-.253-.588-.601-.588z"})})},420431:(e,t,o)=>{o.d(t,{D:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("dragHandle",{viewBox:"0 0 10 10",svg:(0,n.jsx)("path",{d:"M3,2 C2.44771525,2 2,1.55228475 2,1 C2,0.44771525 2.44771525,0 3,0 C3.55228475,0 4,0.44771525 4,1 C4,1.55228475 3.55228475,2 3,2 Z M3,6 C2.44771525,6 2,5.55228475 2,5 C2,4.44771525 2.44771525,4 3,4 C3.55228475,4 4,4.44771525 4,5 C4,5.55228475 3.55228475,6 3,6 Z M3,10 C2.44771525,10 2,9.55228475 2,9 C2,8.44771525 2.44771525,8 3,8 C3.55228475,8 4,8.44771525 4,9 C4,9.55228475 3.55228475,10 3,10 Z M7,2 C6.44771525,2 6,1.55228475 6,1 C6,0.44771525 6.44771525,0 7,0 C7.55228475,0 8,0.44771525 8,1 C8,1.55228475 7.55228475,2 7,2 Z M7,6 C6.44771525,6 6,5.55228475 6,5 C6,4.44771525 6.44771525,4 7,4 C7.55228475,4 8,4.44771525 8,5 C8,5.55228475 7.55228475,6 7,6 Z M7,10 C6.44771525,10 6,9.55228475 6,9 C6,8.44771525 6.44771525,8 7,8 C7.55228475,8 8,8.44771525 8,9 C8,9.55228475 7.55228475,10 7,10 Z"})})},802600:(e,t,o)=>{o.d(t,{a:()=>n().a});var n=()=>o(44037)},913813:(e,t,o)=>{o.d(t,{O:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("ellipsis",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M2.887 9.014c.273 0 .52-.064.738-.192.219-.132.394-.307.526-.526.133-.219.199-.46.199-.725 0-.405-.142-.747-.424-1.025a1.41 1.41 0 00-1.04-.417c-.264 0-.505.066-.724.198a1.412 1.412 0 00-.718 1.244c0 .265.064.506.192.725.132.219.307.394.526.526.219.128.46.192.725.192zm5.113 0a1.412 1.412 0 001.244-.718c.132-.219.198-.46.198-.725 0-.405-.14-.747-.423-1.025A1.386 1.386 0 008 6.129c-.264 0-.506.066-.725.198a1.412 1.412 0 00-.718 1.244c0 .265.064.506.192.725.132.219.308.394.526.526.22.128.46.192.725.192zm5.106 0c.265 0 .506-.064.725-.192.219-.132.394-.307.526-.526.133-.219.199-.46.199-.725 0-.405-.142-.747-.424-1.025a1.394 1.394 0 00-1.026-.417 1.474 1.474 0 00-1.265.718c-.127.218-.19.46-.19.724 0 .265.063.506.19.725.133.219.308.394.527.526.223.128.47.192.738.192z"})})},842595:(e,t,o)=>{o.d(t,{U:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("enter",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M5.38965 14.1667C5.81812 14.1667 6.10156 13.8767 6.10156 13.468C6.10156 13.2571 6.01587 13.0989 5.89062 12.967L4.18994 11.3125L3.02979 10.3369L4.55908 10.4028H12.7922C14.4402 10.4028 15.1389 9.65796 15.1389 8.04297V4.13403C15.1389 2.48608 14.4402 1.78735 12.7922 1.78735H9.13379C8.70532 1.78735 8.4021 2.11035 8.4021 2.50586C8.4021 2.90137 8.69873 3.22437 9.13379 3.22437H12.7593C13.4316 3.22437 13.7151 3.50781 13.7151 4.17358V7.99683C13.7151 8.67578 13.425 8.95923 12.7593 8.95923H4.55908L3.02979 9.03174L4.18994 8.04956L5.89062 6.39502C6.01587 6.26978 6.10156 6.11157 6.10156 5.89404C6.10156 5.48535 5.81812 5.19531 5.38965 5.19531C5.21167 5.19531 5.01392 5.27441 4.8689 5.41943L1.08521 9.1438C0.933594 9.28882 0.854492 9.48657 0.854492 9.68433C0.854492 9.87549 0.933594 10.0732 1.08521 10.2183L4.8689 13.9492C5.01392 14.0876 5.21167 14.1667 5.38965 14.1667Z"})})},58988:(e,t,o)=>{o.d(t,{s:()=>n().s});var n=()=>o(630078)},607031:(e,t,o)=>{o.d(t,{B:()=>n().B});var n=()=>o(717956)},383507:(e,t,o)=>{o.d(t,{Q:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("face",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.00992 2.5822C7.37564 1.60345 5.34973 1.8529 4.00205 3.05811C3.69329 3.33423 3.66683 3.80837 3.94295 4.11712C4.21906 4.42588 4.6932 4.45234 5.00196 4.17622C5.874 3.39637 7.18434 3.23731 8.23923 3.86907C8.49682 4.02334 8.71888 4.21224 8.90393 4.42579C9.17518 4.73883 9.64885 4.7727 9.96188 4.50144C10.2749 4.23018 10.3088 3.75652 10.0375 3.44348C9.7497 3.11132 9.40554 2.81913 9.00992 2.5822ZM10.5773 5.23958C11.7812 3.22935 14.3868 2.57569 16.397 3.77958C17.031 4.15924 17.5315 4.6799 17.8804 5.27786C18.0892 5.6356 17.9685 6.09487 17.6107 6.30365C17.253 6.51244 16.7937 6.39169 16.5849 6.03394C16.3601 5.64878 16.038 5.31297 15.6264 5.06646C14.3268 4.2882 12.6425 4.71076 11.8642 6.01027L6.20294 15.4633L10.5234 16.1636C10.9322 16.2299 11.21 16.615 11.1437 17.0239C11.0774 17.4328 10.6922 17.7105 10.2834 17.6443L4.87132 16.767C4.62587 16.7272 4.41609 16.5684 4.31125 16.3429C4.2064 16.1175 4.22013 15.8547 4.34788 15.6414L10.5773 5.23958ZM14.4038 8.94146C14.2934 9.6229 13.6514 10.0858 12.97 9.97532C12.2885 9.86487 11.8257 9.22291 11.9361 8.54147C12.0466 7.86003 12.6885 7.39716 13.37 7.50761C14.0514 7.61806 14.5143 8.26002 14.4038 8.94146ZM7.81488 7.87364C7.70443 8.5551 7.06245 9.01799 6.38099 8.90754C5.69953 8.79708 5.23663 8.15511 5.34709 7.47364C5.45755 6.79218 6.09952 6.32929 6.78099 6.43975C7.46245 6.5502 7.92534 7.19218 7.81488 7.87364Z"})})},397643:(e,t,o)=>{o.d(t,{R:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("file",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M4.35645 15.4678H11.6367C13.0996 15.4678 13.8584 14.6953 13.8584 13.2256V7.02539C13.8584 6.0752 13.7354 5.6377 13.1406 5.03613L9.55176 1.38574C8.97754 0.804688 8.50586 0.667969 7.65137 0.667969H4.35645C2.89355 0.667969 2.13477 1.44043 2.13477 2.91016V13.2256C2.13477 14.7021 2.89355 15.4678 4.35645 15.4678ZM4.46582 14.1279C3.80273 14.1279 3.47461 13.7793 3.47461 13.1436V2.99219C3.47461 2.36328 3.80273 2.00781 4.46582 2.00781H7.37793V5.75391C7.37793 6.73145 7.86328 7.20312 8.83398 7.20312H12.5186V13.1436C12.5186 13.7793 12.1836 14.1279 11.5205 14.1279H4.46582ZM8.95703 6.02734C8.67676 6.02734 8.56055 5.9043 8.56055 5.62402V2.19238L12.334 6.02734H8.95703ZM8.59473 12.7266V10.6279L8.54004 9.56152L9.06641 10.1152L9.59277 10.6484C9.68848 10.7646 9.8457 10.833 9.98926 10.833C10.2969 10.833 10.5293 10.6143 10.5293 10.3066C10.5293 10.1357 10.4678 10.0127 10.3379 9.90332L8.45117 8.16699C8.29395 8.02344 8.16406 7.96191 7.99316 7.96191C7.8291 7.96191 7.69922 8.02344 7.54199 8.16699L5.65527 9.90332C5.52539 10.0127 5.46387 10.1357 5.46387 10.3066C5.46387 10.6143 5.68945 10.833 6.00391 10.833C6.14746 10.833 6.29785 10.7646 6.40039 10.6484L6.92676 10.1152L7.45312 9.56152L7.39844 10.6279V12.7266C7.39844 13.0547 7.67188 13.3008 7.99316 13.3008C8.32129 13.3008 8.59473 13.0547 8.59473 12.7266Z"})})},764153:(e,t,o)=>{o.d(t,{l:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("genericError",{viewBox:"0 0 32 32",svg:(0,n.jsx)("path",{d:"M16.0242 29.0485c7.1251 0 13.0243-5.8992 13.0243-13.0243C29.0485 8.91198 23.1365 3 16.0115 3 8.89922 3 3 8.91198 3 16.0242c0 7.1251 5.91198 13.0243 13.0242 13.0243zm-.0127-11.1089c-.6768 0-1.0471-.3959-1.0726-1.0726l-.1788-6.3078c-.0255-.70232.5108-1.20031 1.2386-1.20031.7151 0 1.2769.51076 1.2514 1.21301l-.1916 6.2951c-.0255.6895-.3958 1.0726-1.047 1.0726zm0 4.6989c-.7406 0-1.4301-.5874-1.4301-1.379 0-.7917.6767-1.3791 1.4301-1.3791.7533 0 1.4301.5746 1.4301 1.3791 0 .8044-.6895 1.379-1.4301 1.379z"})})},77751:(e,t,o)=>{o.d(t,{f:()=>n().f});var n=()=>o(138531)},278469:(e,t,o)=>{o.d(t,{c:()=>n().c});var n=()=>o(565337)},959328:(e,t,o)=>{o.d(t,{c:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("googleDriveColor",{viewBox:"0 0 87.3 78",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{fill:"#0066da",d:"M6.6 66.85l3.85 6.65c.8 1.4 1.95 2.5 3.3 3.3L27.5 53H0c0 1.55.4 3.1 1.2 4.5z"}),(0,n.jsx)("path",{fill:"#00ac47",d:"M43.65 25L29.9 1.2c-1.35.8-2.5 1.9-3.3 3.3l-25.4 44A9.06 9.06 0 000 53h27.5z"}),(0,n.jsx)("path",{fill:"#ea4335",d:"M73.55 76.8c1.35-.8 2.5-1.9 3.3-3.3l1.6-2.75L86.1 57.5c.8-1.4 1.2-2.95 1.2-4.5H59.798l5.852 11.5z"}),(0,n.jsx)("path",{fill:"#00832d",d:"M43.65 25L57.4 1.2C56.05.4 54.5 0 52.9 0H34.4c-1.6 0-3.15.45-4.5 1.2z"}),(0,n.jsx)("path",{fill:"#2684fc",d:"M59.8 53H27.5L13.75 76.8c1.35.8 2.9 1.2 4.5 1.2h50.8c1.6 0 3.15-.45 4.5-1.2z"}),(0,n.jsx)("path",{fill:"#ffba00",d:"M73.4 26.5l-12.7-22c-.8-1.4-1.95-2.5-3.3-3.3L43.65 25 59.8 53h27.45c0-1.55-.4-3.1-1.2-4.5z"})]})})},932710:(e,t,o)=>{o.d(t,{P:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("handleIcon",{viewBox:"0 0 38 5",svg:(0,n.jsx)("g",{children:(0,n.jsx)("rect",{width:"38",height:"5",fill:"#E3E2E0",rx:"2.5"})})})},653457:(e,t,o)=>{o.d(t,{m:()=>n().m});var n=()=>o(456681)},938183:(e,t,o)=>{o.d(t,{u:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("helpButtonGuide",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M8 2.77344C7.39844 2.0625 6.05859 1.42676 4.48633 1.42676C2.3877 1.42676 0.692383 2.51367 0.241211 3.5459V13.8066C0.241211 14.4766 0.678711 14.7363 1.16406 14.7363C1.52637 14.7363 1.73145 14.627 1.96387 14.4561C2.42871 14.0801 3.1875 13.6426 4.48633 13.6426C5.79199 13.6426 6.68066 14.0801 7.07715 14.415C7.2959 14.5791 7.54883 14.7363 8 14.7363C8.45117 14.7363 8.69727 14.5654 8.92285 14.415C9.34668 14.1006 10.208 13.6426 11.5137 13.6426C12.8125 13.6426 13.585 14.0869 14.0361 14.4561C14.2686 14.627 14.4736 14.7363 14.8359 14.7363C15.3213 14.7363 15.7588 14.4766 15.7588 13.8066V3.5459C15.3076 2.51367 13.6191 1.42676 11.5137 1.42676C9.94141 1.42676 8.6084 2.0625 8 2.77344ZM1.72461 4.01758C1.90918 3.56641 2.9209 2.80078 4.48633 2.80078C6.05176 2.80078 7.09766 3.57324 7.26172 4.01758V13.0342C6.55762 12.5283 5.55273 12.2549 4.48633 12.2549C3.41309 12.2549 2.41504 12.5283 1.72461 13.0547V4.01758ZM14.2754 4.01758V13.0547C13.585 12.5283 12.5869 12.2549 11.5137 12.2549C10.4473 12.2549 9.44238 12.5283 8.73828 13.0342V4.01758C8.90234 3.57324 9.94824 2.80078 11.5137 2.80078C13.0791 2.80078 14.0908 3.56641 14.2754 4.01758Z"})})},443471:(e,t,o)=>{o.d(t,{r:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("hourglass",{viewBox:"0 0 16 16",svg:(0,n.jsx)("g",{children:(0,n.jsx)("path",{d:"M5.521 13.475c-.316 0-.566-.09-.75-.27-.183-.176-.275-.43-.275-.762v-.111c0-.36.08-.719.24-1.078a5.66 5.66 0 01.61-1.037 9.91 9.91 0 01.756-.908c.261-.274.486-.506.673-.698.192-.183.29-.38.293-.591.008-.211-.09-.415-.293-.61a85.634 85.634 0 01-.673-.697c-.258-.274-.51-.574-.756-.902a5.767 5.767 0 01-.61-1.032 2.682 2.682 0 01-.24-1.09v-.093c0-.336.092-.592.275-.768.184-.18.434-.27.75-.27h4.946c.32 0 .572.09.756.27.183.176.275.432.275.768v.093c0 .364-.082.727-.246 1.09a5.34 5.34 0 01-.61 1.032c-.245.328-.497.628-.755.902-.258.273-.483.506-.674.697-.2.195-.295.399-.287.61.008.21.103.408.287.591.191.192.416.424.674.698.258.273.51.576.756.908.246.328.449.674.609 1.037.164.36.246.719.246 1.078v.111c0 .332-.092.586-.275.762-.184.18-.436.27-.756.27H5.52zm2.936-6.422c.105-.09.248-.225.428-.405.18-.183.37-.386.574-.609.207-.223.4-.443.58-.662.18-.223.32-.42.422-.592.066-.105.086-.197.059-.275-.024-.078-.092-.117-.205-.117H5.674c-.106 0-.172.039-.2.117-.027.078-.01.17.053.275.106.172.248.37.428.592.18.219.371.44.574.662.203.223.395.426.575.61.183.18.326.314.427.404.168.14.323.21.463.21.145 0 .299-.07.463-.21z"})})})},206643:(e,t,o)=>{o.d(t,{y:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("image",{viewBox:"0 0 30 30",svg:(0,n.jsx)("path",{d:"M2,2v26h26V2H2z M26,26H4v-4h22V26z M26,20H4V4h22V20z M8,10c1.104,0,2-0.896,2-2S9.104,6,8,6S6,6.896,6,8S6.896,10,8,10z M18,7l-5,5l-2-1l-5,7h18L18,7z M11.635,13.553l1.76,0.881l4.129-4.129L20.631,16H9.887L11.635,13.553z"})})},858856:(e,t,o)=>{o.d(t,{D:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("info",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M7.97266 14.9453C11.7871 14.9453 14.9453 11.7803 14.9453 7.97266C14.9453 4.1582 11.7803 1 7.96582 1C4.1582 1 1 4.1582 1 7.97266C1 11.7803 4.16504 14.9453 7.97266 14.9453ZM7.97266 13.7832C4.74609 13.7832 2.16895 11.1992 2.16895 7.97266C2.16895 4.74609 4.73926 2.16211 7.96582 2.16211C11.1924 2.16211 13.7764 4.74609 13.7832 7.97266C13.79 11.1992 11.1992 13.7832 7.97266 13.7832ZM7.91113 5.53906C8.41016 5.53906 8.7998 5.14258 8.7998 4.64355C8.7998 4.14453 8.41016 3.74805 7.91113 3.74805C7.41895 3.74805 7.02246 4.14453 7.02246 4.64355C7.02246 5.14258 7.41895 5.53906 7.91113 5.53906ZM6.77637 11.7324H9.55859C9.83887 11.7324 10.0576 11.5273 10.0576 11.2471C10.0576 10.9805 9.83887 10.7686 9.55859 10.7686H8.71094V7.28906C8.71094 6.91992 8.52637 6.67383 8.17773 6.67383H6.89258C6.6123 6.67383 6.39355 6.88574 6.39355 7.15234C6.39355 7.43262 6.6123 7.6377 6.89258 7.6377H7.62402V10.7686H6.77637C6.49609 10.7686 6.27734 10.9805 6.27734 11.2471C6.27734 11.5273 6.49609 11.7324 6.77637 11.7324Z"})})},322539:(e,t,o)=>{o.d(t,{N:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("infoFilled",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M7.99634 15.5659C6.96118 15.5659 5.98706 15.3682 5.07397 14.9727C4.16089 14.582 3.35522 14.0376 2.65698 13.3394C1.96362 12.6411 1.41919 11.8354 1.02368 10.9224C0.628174 10.0093 0.43042 9.03516 0.43042 8C0.43042 6.96484 0.628174 5.99072 1.02368 5.07764C1.41919 4.16455 1.96362 3.36133 2.65698 2.66797C3.35522 1.96973 4.15845 1.42285 5.06665 1.02734C5.97974 0.631836 6.95386 0.434082 7.98901 0.434082C9.02905 0.434082 10.0056 0.631836 10.9187 1.02734C11.8318 1.42285 12.6375 1.96973 13.3357 2.66797C14.0339 3.36133 14.5808 4.16455 14.9763 5.07764C15.3718 5.99072 15.5696 6.96484 15.5696 8C15.5696 9.03516 15.3718 10.0093 14.9763 10.9224C14.5808 11.8354 14.0339 12.6411 13.3357 13.3394C12.6375 14.0376 11.8318 14.582 10.9187 14.9727C10.0056 15.3682 9.03149 15.5659 7.99634 15.5659ZM6.65601 12.2114H9.7395C9.91528 12.2114 10.0618 12.1577 10.179 12.0503C10.2961 11.938 10.3547 11.7939 10.3547 11.6182C10.3547 11.4521 10.2961 11.313 10.179 11.2007C10.0618 11.0835 9.91528 11.0249 9.7395 11.0249H8.89722V7.43604C8.89722 7.20654 8.84106 7.021 8.72876 6.87939C8.61646 6.73779 8.45288 6.66699 8.23804 6.66699H6.78784C6.61694 6.66699 6.4729 6.72559 6.35571 6.84277C6.23853 6.95996 6.17993 7.09912 6.17993 7.26025C6.17993 7.43604 6.23853 7.58008 6.35571 7.69238C6.4729 7.7998 6.61694 7.85352 6.78784 7.85352H7.55688V11.0249H6.65601C6.48511 11.0249 6.33862 11.0835 6.21655 11.2007C6.09937 11.313 6.04077 11.4521 6.04077 11.6182C6.04077 11.7939 6.09937 11.938 6.21655 12.0503C6.33862 12.1577 6.48511 12.2114 6.65601 12.2114ZM7.95239 5.48779C8.24536 5.48779 8.49194 5.38525 8.69214 5.18018C8.89233 4.9751 8.99243 4.73096 8.99243 4.44775C8.99243 4.1499 8.89233 3.90088 8.69214 3.70068C8.49194 3.49561 8.24536 3.39307 7.95239 3.39307C7.66431 3.39307 7.41772 3.49561 7.21265 3.70068C7.00757 3.90088 6.90503 4.1499 6.90503 4.44775C6.90503 4.73096 7.00757 4.9751 7.21265 5.18018C7.41772 5.38525 7.66431 5.48779 7.95239 5.48779Z"})})},599631:(e,t,o)=>{o.d(t,{N:()=>n().N});var n=()=>o(237874)},421534:(e,t,o)=>{o.d(t,{C:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("linkToPage",{viewBox:"0 0 20 20",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{fillRule:"evenodd",d:"M6.25 3C5.56 3 5 3.56 5 4.25v11.5c0 .69.56 1.25 1.25 1.25H7a.75.75 0 010 1.5h-.75a2.75 2.75 0 01-2.75-2.75V4.25A2.75 2.75 0 016.25 1.5h4.086c.464 0 .909.184 1.237.513l4.414 4.414c.329.328.513.773.513 1.237V9A.75.75 0 0115 9v-.5h-2.75A2.75 2.75 0 019.5 5.75V3H6.25zM11 5.75V3.56L14.44 7h-2.19C11.56 7 11 6.44 11 5.75z",clipRule:"evenodd"}),(0,n.jsx)("path",{d:"M16.5 16.036a.75.75 0 01-1.5 0V13.56l-4.72 4.72a.75.75 0 11-1.06-1.061l4.72-4.72h-2.476a.75.75 0 010-1.5h4.286a.75.75 0 01.75.75v4.286z"})]})})},821149:(e,t,o)=>{o.d(t,{b:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("locked",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M4.79395 14.7227H11.1992C12.252 14.7227 12.7783 14.1963 12.7783 13.0479V8.20801C12.7783 7.19629 12.3682 6.66992 11.541 6.56055V4.96094C11.541 2.36328 9.81152 1.1123 7.99316 1.1123C6.18164 1.1123 4.45215 2.36328 4.45215 4.96094V6.56055C3.625 6.66992 3.21484 7.19629 3.21484 8.20801V13.0479C3.21484 14.1963 3.73438 14.7227 4.79395 14.7227ZM5.75098 4.83105C5.75098 3.22461 6.76953 2.35645 7.99316 2.35645C9.2168 2.35645 10.2422 3.22461 10.2422 4.83105V6.54004H5.75098V4.83105ZM4.99219 13.5059C4.69141 13.5059 4.54102 13.3623 4.54102 13V8.25586C4.54102 7.89355 4.69141 7.76367 4.99219 7.76367H11.0078C11.3086 7.76367 11.4521 7.89355 11.4521 8.25586V13C11.4521 13.3623 11.3086 13.5059 11.0078 13.5059H4.99219Z"})})},824308:(e,t,o)=>{o.d(t,{I:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("lockedDocument",{viewBox:"0 0 27 33",svg:(0,n.jsx)("path",{d:"M9.281 26.605c0 .878.406 1.318 1.216 1.318h6.02c.811 0 1.216-.44 1.216-1.318V21.99c0-.79-.327-1.216-.981-1.274v-1.348c0-1.084-.298-1.958-.894-2.622-.595-.664-1.377-.996-2.343-.996-.967 0-1.748.332-2.344.996-.596.664-.894 1.538-.894 2.622v1.348c-.664.058-.996.483-.996 1.274v4.615zm2.359-5.919v-1.45c0-.654.17-1.176.512-1.567.342-.4.796-.6 1.363-.6.566 0 1.015.2 1.347.6.342.39.513.913.513 1.567v1.45H11.64zM5.692 32.288h15.601c1.572 0 2.759-.41 3.56-1.23.8-.81 1.2-2.002 1.2-3.575V14.197c0-.683-.038-1.26-.117-1.728a3.829 3.829 0 00-.454-1.304c-.214-.4-.537-.815-.966-1.245L16.84 2.112c-.41-.42-.81-.737-1.201-.952a3.822 3.822 0 00-1.275-.454 8.661 8.661 0 00-1.611-.132h-7.06c-1.573 0-2.76.41-3.56 1.23C1.332 2.616.932 3.808.932 5.38v22.104c0 1.582.4 2.779 1.2 3.59.802.81 1.988 1.215 3.56 1.215zm.235-2.886c-.703 0-1.23-.18-1.582-.542-.352-.361-.528-.879-.528-1.552V5.569c0-.673.176-1.196.528-1.567.351-.371.884-.557 1.596-.557h6.24v8.028c0 1.045.255 1.826.762 2.343.518.518 1.3.777 2.344.777h7.896v12.715c0 .673-.176 1.191-.528 1.552-.351.362-.884.542-1.596.542H5.927zm9.638-17.343c-.302 0-.522-.069-.659-.205-.127-.137-.19-.357-.19-.66V3.841l8.071 8.218h-7.222z"})})},168441:(e,t,o)=>{o.d(t,{Q:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("lockedFilled",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M4.69141 14.6338H11.3018C12.2178 14.6338 12.6689 14.1826 12.6689 13.1914V8.08496C12.6689 7.18945 12.293 6.72461 11.541 6.64941V4.96094C11.541 2.36328 9.81152 1.1123 7.99316 1.1123C6.18164 1.1123 4.45215 2.36328 4.45215 4.96094V6.67676C3.74805 6.78613 3.32422 7.2373 3.32422 8.08496V13.1914C3.32422 14.1826 3.77539 14.6338 4.69141 14.6338ZM5.75098 4.83105C5.75098 3.22461 6.76953 2.35645 7.99316 2.35645C9.2168 2.35645 10.2422 3.22461 10.2422 4.83105V6.64258L5.75098 6.64941V4.83105Z"})})},629489:(e,t,o)=>{o.d(t,{_:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("lockedKeyhole",{viewBox:"0 0 64 64",svg:(0,n.jsx)("path",{d:"m44,26v-6c0-7.4-4.6-12-12-12s-12,4.6-12,12v6h-8v30h40v-30h-8Zm-18-6c0-4.09,1.91-6,6-6s6,1.91,6,6v6h-12v-6Zm11,28v2h-10v-2l2.51-6.69c-1.49-.86-2.51-2.46-2.51-4.31,0-2.76,2.24-5,5-5s5,2.24,5,5c0,1.85-1.02,3.45-2.51,4.31l2.51,6.69Z"})})},424097:(e,t,o)=>{o.d(t,{z:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("loop",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M5.80371 3.12305C5.81006 3.50391 6.05762 3.74512 6.47656 3.74512H11.3643C11.9546 3.74512 12.2783 4.0498 12.2783 4.66553V11.2925L11.377 10.3149L10.8628 9.80078C10.5962 9.54688 10.2344 9.52783 9.96777 9.78809C9.71387 10.0483 9.72021 10.4229 9.98047 10.6831L12.145 12.8413C12.6211 13.311 13.167 13.311 13.6431 12.8413L15.8076 10.6831C16.0679 10.4229 16.0742 10.0483 15.8203 9.78809C15.5537 9.52783 15.1919 9.54688 14.9253 9.80078L14.4111 10.3149L13.5161 11.2861V4.56396C13.5161 3.20557 12.8052 2.50098 11.4341 2.50098H6.47656C6.05762 2.50098 5.79736 2.74219 5.80371 3.12305ZM0.186035 7.05859C0.446289 7.3252 0.808105 7.30615 1.07471 7.0459L1.59521 6.53809L2.48389 5.56689V12.2891C2.48389 13.6475 3.19482 14.3521 4.56592 14.3521H9.52344C9.94238 14.3521 10.2026 14.1108 10.1963 13.73C10.1899 13.3428 9.94238 13.1079 9.52344 13.1079H4.64209C4.05176 13.1079 3.72803 12.7969 3.72803 12.1812V5.5542L4.62305 6.53809L5.14355 7.0459C5.40381 7.30615 5.77197 7.3252 6.03223 7.05859C6.29248 6.79834 6.28613 6.43018 6.01953 6.16992L3.85498 4.01172C3.37891 3.53564 2.83936 3.53564 2.36328 4.01172L0.19873 6.16992C-0.0678711 6.43018 -0.0742188 6.79834 0.186035 7.05859Z"})})},721840:(e,t,o)=>{o.d(t,{v:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("magnifyingGlass",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M1.321 6.28c0 .751.142 1.458.424 2.118a5.52 5.52 0 001.176 1.737 5.51 5.51 0 001.736 1.175 5.326 5.326 0 002.12.424c.592 0 1.157-.09 1.695-.273a5.639 5.639 0 001.476-.752l3.364 3.37a.8.8 0 00.266.171c.1.041.205.062.315.062a.766.766 0 00.683-.397.83.83 0 00.041-.718.715.715 0 00-.164-.253L11.11 9.581c.351-.456.625-.964.82-1.524.201-.56.301-1.153.301-1.778 0-.752-.14-1.456-.423-2.112a5.497 5.497 0 00-2.92-2.919A5.284 5.284 0 006.777.824c-.752 0-1.458.141-2.119.424a5.52 5.52 0 00-2.912 2.919 5.284 5.284 0 00-.424 2.112zm1.17 0A4.204 4.204 0 013.74 3.25a4.286 4.286 0 011.367-.923 4.179 4.179 0 011.668-.335 4.13 4.13 0 011.662.335 4.19 4.19 0 011.367.923c.392.392.7.848.922 1.367a4.13 4.13 0 01.335 1.661c0 .593-.111 1.149-.335 1.668a4.357 4.357 0 01-2.29 2.283 4.13 4.13 0 01-1.66.335 4.179 4.179 0 01-1.669-.335 4.357 4.357 0 01-2.29-2.283A4.254 4.254 0 012.49 6.28zM6.79 9.15c.114 0 .187-.066.219-.198.068-.369.137-.683.205-.943.068-.26.153-.474.253-.643.1-.173.23-.314.39-.424a2.01 2.01 0 01.628-.26 8.31 8.31 0 01.964-.184c.137-.018.205-.091.205-.219 0-.127-.068-.205-.205-.232a8.214 8.214 0 01-.97-.178 2.217 2.217 0 01-.643-.266 1.355 1.355 0 01-.403-.417 2.49 2.49 0 01-.246-.643 10.063 10.063 0 01-.178-.93c-.023-.136-.096-.205-.219-.205s-.2.066-.232.198c-.073.374-.144.69-.212.95A2.49 2.49 0 016.1 5.2c-.1.169-.233.308-.397.417a2.14 2.14 0 01-.622.26c-.255.064-.574.12-.957.17-.141.028-.212.106-.212.233 0 .123.07.196.212.22.479.05.864.12 1.155.211.292.087.518.216.677.39.164.173.287.41.37.71.086.297.163.675.232 1.135.009.06.034.11.075.15a.228.228 0 00.157.055z"})})},233227:(e,t,o)=>{o.d(t,{q:()=>n().q});var n=()=>o(825886)},241653:(e,t,o)=>{o.d(t,{V:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("mobileTopbarChevronLeft",{viewBox:"0 0 26 26",svg:(0,n.jsxs)("svg",{width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M8.45117 13.0001L16.2512 5.20012",strokeWidth:"1.5",strokeLinecap:"round"}),(0,n.jsx)("path",{d:"M8.45117 13.0001L16.2512 20.8001",strokeWidth:"1.5",strokeLinecap:"round"})]})})},168509:(e,t,o)=>{o.d(t,{S:()=>n().S});var n=()=>o(934935)},360325:(e,t,o)=>{o.d(t,{U:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("pageBlock",{viewBox:"0 0 20 20",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M6.625 11.25c0-.345.28-.625.625-.625h5.5a.625.625 0 110 1.25h-5.5a.625.625 0 01-.625-.625zm.625 2.375a.625.625 0 100 1.25h5.5a.625.625 0 100-1.25h-5.5z"}),(0,n.jsx)("path",{fillRule:"evenodd",d:"M16.5 15.75a2.75 2.75 0 01-2.75 2.75h-7.5a2.75 2.75 0 01-2.75-2.75V4.25A2.75 2.75 0 016.25 1.5h4.086c.464 0 .909.184 1.237.513l4.414 4.414c.329.328.513.773.513 1.237v8.086zM5 4.25C5 3.56 5.56 3 6.25 3H9.5v2.75a2.75 2.75 0 002.75 2.75H15v7.25c0 .69-.56 1.25-1.25 1.25h-7.5C5.56 17 5 16.44 5 15.75V4.25zM14.44 7h-2.19C11.56 7 11 6.44 11 5.75V3.56L14.44 7z",clipRule:"evenodd"})]})})},292832:(e,t,o)=>{o.d(t,{a:()=>n().a});var n=()=>o(169352)},965913:(e,t,o)=>{o.d(t,{Y:()=>n().Y});var n=()=>o(811977)},621736:(e,t,o)=>{o.d(t,{B:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("pdf",{viewBox:"0 0 23.5 23.5",svg:(0,n.jsx)("path",{d:"M8.61 10.922a.44.44 0 01-.313-.11.422.422 0 01-.117-.312.9.9 0 01.054-.273l1.07-2.985c.12-.354.342-.531.665-.531.338 0 .568.177.687.531l1.07 2.985c.032.114.047.205.047.273a.44.44 0 01-.109.313c-.073.072-.18.109-.32.109-.219 0-.365-.133-.438-.399l-.242-.68H9.281l-.226.68c-.068.266-.216.399-.446.399zm.85-1.75h1.032L10 7.609h-.047l-.492 1.563zm3.657-1.11a.514.514 0 01-.367-.14.503.503 0 01-.14-.36c0-.14.046-.257.14-.351a.514.514 0 01.367-.14h2.195a.477.477 0 01.5.492c0 .14-.046.26-.14.359a.487.487 0 01-.36.14h-2.195zm0 2.618a.514.514 0 01-.367-.14.503.503 0 01-.14-.36c0-.14.046-.258.14-.352a.514.514 0 01.367-.14h2.195a.477.477 0 01.5.492c0 .14-.046.26-.14.36a.487.487 0 01-.36.14h-2.195zm-4.953 6.234V13.25c0-.333.089-.583.266-.75.182-.172.435-.258.758-.258h5.632c.677 0 1.016.336 1.016 1.008v3.586h-.547l-1.492-1.719a.58.58 0 00-.242-.172.84.84 0 00-.282-.047c-.177 0-.348.073-.515.22l-1.547 1.366-.617-.562a.68.68 0 00-.461-.188.617.617 0 00-.438.188l-.984.992h-.547zm2.492-1.797a.78.78 0 00.57-.242.78.78 0 00.243-.57c0-.23-.081-.42-.242-.57a.823.823 0 00-.57-.243.737.737 0 00-.579.227.812.812 0 00-.234.586c0 .218.078.409.234.57a.79.79 0 00.578.242zm-5.36 2.64V5.97c0-.839.214-1.474.641-1.907.428-.437 1.06-.656 1.899-.656h8.32c.839 0 1.472.219 1.899.656.427.433.64 1.068.64 1.907v11.789c0 .844-.213 1.482-.64 1.914-.427.432-1.06.648-1.899.648h-8.32c-.839 0-1.471-.216-1.899-.648-.427-.432-.64-1.07-.64-1.914zm1.54-.093c0 .36.094.635.281.828.188.193.472.29.852.29h8.062c.38 0 .664-.097.852-.29.187-.193.281-.469.281-.828V6.07c0-.364-.094-.643-.281-.836-.188-.198-.471-.296-.852-.296H7.97c-.38 0-.664.098-.852.296-.187.193-.281.472-.281.836v11.594z"})})},929071:(e,t,o)=>{o.d(t,{Q:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("peekModeCenter",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M2.1416 14.4492H13.8516C15.3281 14.4492 16.0938 13.6904 16.0938 12.2344V3.9082C16.0938 2.45215 15.3281 1.69336 13.8516 1.69336H2.1416C0.665039 1.69336 -0.100586 2.44531 -0.100586 3.9082V12.2344C-0.100586 13.6904 0.665039 14.4492 2.1416 14.4492ZM2.22363 13.1094C1.58789 13.1094 1.23926 12.7812 1.23926 12.1182V4.02441C1.23926 3.36133 1.58789 3.02637 2.22363 3.02637H13.7695C14.3984 3.02637 14.7539 3.36133 14.7539 4.02441V12.1182C14.7539 12.7812 14.3984 13.1094 13.7695 13.1094H2.22363ZM4.33594 11.0654H11.6504C12.0742 11.0654 12.2588 10.8809 12.2588 10.4502V5.69238C12.2588 5.25488 12.0742 5.07715 11.6504 5.07715H4.33594C3.91211 5.07715 3.72754 5.25488 3.72754 5.69238V10.4502C3.72754 10.8809 3.91211 11.0654 4.33594 11.0654Z"})})},39530:(e,t,o)=>{o.d(t,{M:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("peekModeFull",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M2.1416 14.4492H13.8516C15.3281 14.4492 16.0938 13.6904 16.0938 12.2344V3.9082C16.0938 2.45215 15.3281 1.69336 13.8516 1.69336H2.1416C0.665039 1.69336 -0.100586 2.44531 -0.100586 3.9082V12.2344C-0.100586 13.6904 0.665039 14.4492 2.1416 14.4492ZM2.22363 13.1094C1.58789 13.1094 1.23926 12.7812 1.23926 12.1182V4.02441C1.23926 3.36133 1.58789 3.02637 2.22363 3.02637H13.7695C14.3984 3.02637 14.7539 3.36133 14.7539 4.02441V12.1182C14.7539 12.7812 14.3984 13.1094 13.7695 13.1094H2.22363ZM2.77734 12.1113H13.2158C13.5645 12.1113 13.7559 11.9131 13.7559 11.5645V4.57812C13.7559 4.22949 13.5645 4.02441 13.2158 4.02441H2.77734C2.42871 4.02441 2.2373 4.22949 2.2373 4.57812V11.5645C2.2373 11.9131 2.42871 12.1113 2.77734 12.1113Z"})})},466043:(e,t,o)=>{o.d(t,{y:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("peekModeSide",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M2.1416 14.4492H13.8516C15.3281 14.4492 16.0938 13.6904 16.0938 12.2344V3.9082C16.0938 2.45215 15.3281 1.69336 13.8516 1.69336H2.1416C0.665039 1.69336 -0.100586 2.44531 -0.100586 3.9082V12.2344C-0.100586 13.6904 0.665039 14.4492 2.1416 14.4492ZM2.22363 13.1094C1.58789 13.1094 1.23926 12.7812 1.23926 12.1182V4.02441C1.23926 3.36133 1.58789 3.02637 2.22363 3.02637H13.7695C14.3984 3.02637 14.7539 3.36133 14.7539 4.02441V12.1182C14.7539 12.7812 14.3984 13.1094 13.7695 13.1094H2.22363ZM8.51953 12.1113H13.2158C13.5986 12.1113 13.7559 11.9541 13.7559 11.5645V4.57812C13.7559 4.18848 13.5986 4.02441 13.2158 4.02441H8.51953C8.13672 4.02441 7.98633 4.18848 7.98633 4.57812V11.5645C7.98633 11.9541 8.13672 12.1113 8.51953 12.1113Z"})})},421887:(e,t,o)=>{o.d(t,{f:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("person",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M7.7832 8.00195C9.27344 8.00195 10.5381 6.67578 10.5381 4.95996C10.5381 3.28516 9.2666 2 7.7832 2C6.29297 2 5.01465 3.30566 5.02148 4.97363C5.02148 6.67578 6.28613 8.00195 7.7832 8.00195ZM3.51758 14.3594H12.0352C13.1631 14.3594 13.5527 14.0176 13.5527 13.3887C13.5527 11.6318 11.3242 9.21191 7.77637 9.21191C4.23535 9.21191 2 11.6318 2 13.3887C2 14.0176 2.38965 14.3594 3.51758 14.3594Z"})})},956765:(e,t,o)=>{o.d(t,{X:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("personCrossedOut",{viewBox:"0 0 44 44",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M5.4857 44H0L44 8.56549V13.0061L5.4857 44Z"}),(0,n.jsx)("path",{d:"M39.8048 44H8.66491L25.6448 30.4378C26.9394 30.6489 28.1581 30.9719 29.3009 31.4067C31.5362 32.2374 33.4346 33.326 34.9964 34.6723C36.5725 36.0044 37.7761 37.4367 38.6071 38.9692C39.4525 40.5018 39.8752 41.9555 39.8752 43.3305C39.8752 43.5675 39.8517 43.7906 39.8048 44Z"}),(0,n.jsx)("path",{d:"M30.3971 16.7973C30.3971 16.8668 30.3965 16.9359 30.3952 17.0048L19.3828 25.9192C18.7467 25.7134 18.1339 25.4228 17.5446 25.0473C16.2408 24.2023 15.1876 23.0708 14.3853 21.6528C13.5972 20.2205 13.2032 18.6163 13.2032 16.8403C13.2032 15.0929 13.5972 13.5174 14.3853 12.1137C15.1876 10.7101 16.2408 9.60007 17.5446 8.78366C18.8485 7.96725 20.267 7.55905 21.8001 7.55905C23.3332 7.55905 24.7517 7.96009 26.0556 8.76218C27.3595 9.56426 28.4054 10.6671 29.1935 12.0708C29.9959 13.4601 30.3971 15.0356 30.3971 16.7973Z"})]})})},26587:(e,t,o)=>{o.d(t,{I:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("play",{viewBox:"0 0 14 16",svg:(0,n.jsx)("path",{d:"M1.34699 16C1.73805 16 2.07697 15.8756 2.52017 15.6089L12.8703 9.47556C13.6437 9.01333 14 8.62222 14 8C14 7.37778 13.6437 6.98667 12.8703 6.52444L2.52017 0.391111C2.07697 0.133333 1.73805 0 1.34699 0C0.582247 0 0 0.595556 0 1.57333V14.4356C0 15.4044 0.582247 16 1.34699 16Z"})})},521777:(e,t,o)=>{o.d(t,{R:()=>n().R});var n=()=>o(159732)},840262:(e,t,o)=>{o.d(t,{D:()=>n().D});var n=()=>o(430366)},381622:(e,t,o)=>{o.d(t,{a:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("reaction",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M7.99414 14.0723C7.16602 14.0723 6.38672 13.9141 5.65625 13.5977C4.92578 13.2852 4.28125 12.8496 3.72266 12.291C3.16797 11.7324 2.73242 11.0879 2.41602 10.3574C2.09961 9.62695 1.94141 8.84766 1.94141 8.01953C1.94141 7.19141 2.09961 6.41211 2.41602 5.68164C2.73242 4.95117 3.16797 4.30859 3.72266 3.75391C4.28125 3.19531 4.92383 2.75781 5.65039 2.44141C6.38086 2.125 7.16016 1.9668 7.98828 1.9668C8.82031 1.9668 9.60156 2.125 10.332 2.44141C11.0625 2.75781 11.707 3.19531 12.2656 3.75391C12.8242 4.30859 13.2617 4.95117 13.5781 5.68164C13.8945 6.41211 14.0527 7.19141 14.0527 8.01953C14.0527 8.84766 13.8945 9.62695 13.5781 10.3574C13.2617 11.0879 12.8242 11.7324 12.2656 12.291C11.707 12.8496 11.0625 13.2852 10.332 13.5977C9.60156 13.9141 8.82227 14.0723 7.99414 14.0723ZM7.99414 12.877C8.66992 12.877 9.30078 12.752 9.88672 12.502C10.4727 12.252 10.9883 11.9043 11.4336 11.459C11.8789 11.0137 12.2266 10.498 12.4766 9.91211C12.7266 9.32617 12.8516 8.69531 12.8516 8.01953C12.8516 7.34766 12.7266 6.71875 12.4766 6.13281C12.2266 5.54297 11.8789 5.02539 11.4336 4.58008C10.9883 4.13477 10.4707 3.78711 9.88086 3.53711C9.29492 3.28711 8.66406 3.16211 7.98828 3.16211C7.31641 3.16211 6.68555 3.28711 6.0957 3.53711C5.50977 3.78711 4.99609 4.13477 4.55469 4.58008C4.11328 5.02539 3.76758 5.54297 3.51758 6.13281C3.26758 6.71875 3.14258 7.34766 3.14258 8.01953C3.14258 8.69531 3.26758 9.32617 3.51758 9.91211C3.76758 10.498 4.11328 11.0137 4.55469 11.459C5 11.9043 5.51562 12.252 6.10156 12.502C6.69141 12.752 7.32227 12.877 7.99414 12.877ZM7.98828 10.9023C7.58203 10.9023 7.22266 10.8301 6.91016 10.6855C6.60156 10.5371 6.36133 10.3672 6.18945 10.1758C6.02148 9.98438 5.9375 9.82422 5.9375 9.69531C5.9375 9.625 5.96484 9.57617 6.01953 9.54883C6.07812 9.51758 6.14062 9.51758 6.20703 9.54883C6.42188 9.66211 6.66602 9.77148 6.93945 9.87695C7.21289 9.98242 7.5625 10.0352 7.98828 10.0352C8.41406 10.0352 8.76367 9.98242 9.03711 9.87695C9.31445 9.77148 9.55859 9.66211 9.76953 9.54883C9.83594 9.51758 9.89844 9.51758 9.95703 9.54883C10.0156 9.57617 10.0449 9.625 10.0449 9.69531C10.0449 9.82422 9.95898 9.98438 9.78711 10.1758C9.61523 10.3672 9.375 10.5371 9.06641 10.6855C8.75781 10.8301 8.39844 10.9023 7.98828 10.9023ZM6.25977 7.49219C6.07617 7.49219 5.91602 7.41797 5.7793 7.26953C5.64648 7.12109 5.58008 6.92969 5.58008 6.69531C5.58008 6.46484 5.64648 6.27539 5.7793 6.12695C5.91602 5.97461 6.07617 5.89844 6.25977 5.89844C6.44336 5.89844 6.60547 5.97461 6.74609 6.12695C6.88672 6.27539 6.95703 6.46484 6.95703 6.69531C6.95703 6.92969 6.88672 7.12109 6.74609 7.26953C6.60547 7.41797 6.44336 7.49219 6.25977 7.49219ZM9.7168 7.49219C9.5332 7.49219 9.37305 7.41797 9.23633 7.26953C9.10352 7.12109 9.03711 6.92969 9.03711 6.69531C9.03711 6.46484 9.10352 6.27539 9.23633 6.12695C9.37305 5.97461 9.5332 5.89844 9.7168 5.89844C9.90039 5.89844 10.0625 5.97461 10.2031 6.12695C10.3438 6.27539 10.4141 6.46484 10.4141 6.69531C10.4141 6.92969 10.3438 7.12109 10.2031 7.26953C10.0625 7.41797 9.90039 7.49219 9.7168 7.49219Z"})})},954593:(e,t,o)=>{o.d(t,{V:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("reactionAdd",{viewBox:"0 0 20 20",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M12 14.3516C12 14.1875 12.0573 14.0482 12.1719 13.9336C12.2891 13.8164 12.4297 13.7578 12.5938 13.7578H14.7617V11.5938C14.7617 11.4297 14.819 11.2904 14.9336 11.1758C15.0482 11.0586 15.1875 11 15.3516 11C15.5156 11 15.6549 11.0586 15.7695 11.1758C15.8867 11.2904 15.9453 11.4297 15.9453 11.5938V13.7578H18.1133C18.2747 13.7578 18.4128 13.8164 18.5273 13.9336C18.6445 14.0482 18.7031 14.1875 18.7031 14.3516C18.7031 14.5156 18.6445 14.6562 18.5273 14.7734C18.4128 14.888 18.2747 14.9453 18.1133 14.9453H15.9453V17.1133C15.9453 17.2747 15.8867 17.4128 15.7695 17.5273C15.6549 17.6445 15.5156 17.7031 15.3516 17.7031C15.1875 17.7031 15.0482 17.6445 14.9336 17.5273C14.819 17.4128 14.7617 17.2747 14.7617 17.1133V14.9453H12.5938C12.4297 14.9453 12.2891 14.888 12.1719 14.7734C12.0573 14.6562 12 14.5156 12 14.3516Z"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0615 17.123C9.09538 17.123 8.1862 16.9385 7.33398 16.5693C6.48177 16.2048 5.72982 15.6966 5.07812 15.0449C4.43099 14.3932 3.92285 13.6413 3.55371 12.7891C3.18457 11.9368 3 11.0277 3 10.0615C3 9.09538 3.18457 8.1862 3.55371 7.33398C3.92285 6.48177 4.43099 5.7321 5.07812 5.08496C5.72982 4.43327 6.47949 3.92285 7.32715 3.55371C8.17936 3.18457 9.08854 3 10.0547 3C11.0254 3 11.9368 3.18457 12.7891 3.55371C13.6413 3.92285 14.3932 4.43327 15.0449 5.08496C15.6966 5.7321 16.207 6.48177 16.5762 7.33398C16.9453 8.1862 17.1299 9.09538 17.1299 10.0615C17.1299 10.6193 17.0684 11.1581 16.9453 11.678V11.5938C16.9453 11.1646 16.7813 10.7706 16.4767 10.4687C16.2657 10.2558 16.0099 10.1116 15.7285 10.0441C15.7263 9.26677 15.5805 8.53887 15.291 7.86035C14.9993 7.1722 14.5938 6.56836 14.0742 6.04883C13.5547 5.5293 12.9508 5.1237 12.2627 4.83203C11.5791 4.54036 10.8431 4.39453 10.0547 4.39453C9.27083 4.39453 8.53483 4.54036 7.84668 4.83203C7.16309 5.1237 6.5638 5.5293 6.04883 6.04883C5.53385 6.56836 5.13053 7.1722 4.83887 7.86035C4.5472 8.54395 4.40137 9.27767 4.40137 10.0615C4.40137 10.8499 4.5472 11.5859 4.83887 12.2695C5.13053 12.9531 5.53385 13.5547 6.04883 14.0742C6.56836 14.5938 7.16992 14.9993 7.85352 15.291C8.54167 15.5827 9.27767 15.7285 10.0615 15.7285C10.5739 15.7285 11.0641 15.6669 11.5321 15.5438C11.8272 15.8056 12.1958 15.9453 12.5938 15.9453H13.7617V16.0641C13.4535 16.2554 13.1293 16.4238 12.7891 16.5693C11.9368 16.9385 11.0277 17.123 10.0615 17.123ZM10.0547 13.4248C9.58073 13.4248 9.16146 13.3405 8.79688 13.1719C8.43685 12.9987 8.15658 12.8005 7.95605 12.5771C7.76009 12.3538 7.66211 12.167 7.66211 12.0166C7.66211 11.9346 7.69401 11.8776 7.75781 11.8457C7.82617 11.8092 7.89909 11.8092 7.97656 11.8457C8.22721 11.9779 8.51204 12.1055 8.83105 12.2285C9.15006 12.3516 9.55794 12.4131 10.0547 12.4131C10.5514 12.4131 10.9593 12.3516 11.2783 12.2285C11.6019 12.1055 11.8867 11.9779 12.1328 11.8457C12.2103 11.8092 12.2832 11.8092 12.3516 11.8457C12.4199 11.8776 12.4541 11.9346 12.4541 12.0166C12.4541 12.167 12.3538 12.3538 12.1533 12.5771C11.9528 12.8005 11.6725 12.9987 11.3125 13.1719C10.9525 13.3405 10.5332 13.4248 10.0547 13.4248ZM8.03809 9.44629C7.82389 9.44629 7.63704 9.3597 7.47754 9.18652C7.32259 9.01335 7.24512 8.79004 7.24512 8.5166C7.24512 8.24772 7.32259 8.02669 7.47754 7.85352C7.63704 7.67578 7.82389 7.58691 8.03809 7.58691C8.25228 7.58691 8.44141 7.67578 8.60547 7.85352C8.76953 8.02669 8.85156 8.24772 8.85156 8.5166C8.85156 8.79004 8.76953 9.01335 8.60547 9.18652C8.44141 9.3597 8.25228 9.44629 8.03809 9.44629ZM12.0713 9.44629C11.8571 9.44629 11.6702 9.3597 11.5107 9.18652C11.3558 9.01335 11.2783 8.79004 11.2783 8.5166C11.2783 8.24772 11.3558 8.02669 11.5107 7.85352C11.6702 7.67578 11.8571 7.58691 12.0713 7.58691C12.2855 7.58691 12.4746 7.67578 12.6387 7.85352C12.8027 8.02669 12.8848 8.24772 12.8848 8.5166C12.8848 8.79004 12.8027 9.01335 12.6387 9.18652C12.4746 9.3597 12.2855 9.44629 12.0713 9.44629Z"})]})})},502893:(e,t,o)=>{o.d(t,{H:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("rename",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M14.7881 2.5752L15.3008 2.04199C15.5605 1.76855 15.5742 1.39941 15.3213 1.13965L15.1436 0.955078C14.9111 0.722656 14.5283 0.763672 14.2754 1.00977L13.749 1.5293L14.7881 2.5752ZM6.68066 9.87598L8.0752 9.28809L14.2891 3.06738L13.25 2.03516L7.03613 8.25586L6.4209 9.60254C6.35254 9.75977 6.52344 9.9375 6.68066 9.87598ZM4.09668 14.4355H12.0674C13.373 14.4355 14.1387 13.6768 14.1387 12.2207V4.99512L12.7988 6.33496V12.1045C12.7988 12.7676 12.4434 13.1025 11.9854 13.1025H4.17871C3.54297 13.1025 3.19434 12.7676 3.19434 12.1045V4.49609C3.19434 3.83301 3.54297 3.49805 4.17871 3.49805H10.0234L11.3633 2.1582H4.09668C2.62695 2.1582 1.85449 2.91699 1.85449 4.37988V12.2207C1.85449 13.6836 2.62695 14.4355 4.09668 14.4355Z"})})},256101:(e,t,o)=>{o.d(t,{Z:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("roundedCheck",{viewBox:"0 0 14 14",svg:(0,n.jsx)("path",{d:"M6.00879 11.4033C5.70605 11.4033 5.45378 11.2829 5.25195 11.042L2.73242 7.99023C2.64453 7.88932 2.58268 7.79167 2.54688 7.69727C2.51107 7.60286 2.49316 7.50521 2.49316 7.4043C2.49316 7.17318 2.56966 6.98275 2.72266 6.83301C2.87891 6.68001 3.07422 6.60352 3.30859 6.60352C3.56901 6.60352 3.78548 6.70931 3.95801 6.9209L5.98926 9.43555L9.97852 3.13184C10.0794 2.97884 10.1836 2.87142 10.291 2.80957C10.4017 2.74447 10.5368 2.71191 10.6963 2.71191C10.9307 2.71191 11.1243 2.78678 11.2773 2.93652C11.4303 3.08626 11.5068 3.27507 11.5068 3.50293C11.5068 3.58757 11.4922 3.67546 11.4629 3.7666C11.4336 3.85775 11.388 3.95215 11.3262 4.0498L6.78027 11.0078C6.60124 11.2715 6.34408 11.4033 6.00879 11.4033Z"})})},241962:(e,t,o)=>{o.d(t,{y:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("roundedCheckPartial",{viewBox:"0 0 14 14",svg:(0,n.jsx)("path",{d:"M5.33496 7.91016C4.85645 7.91016 4.5 7.63672 4.5 7.14355C4.5 6.64551 4.85645 6.37695 5.33496 6.37695H8.66016C9.14355 6.37695 9.5 6.64551 9.5 7.14355C9.5 7.63672 9.14355 7.91016 8.66016 7.91016H5.33496Z"})})},530743:(e,t,o)=>{o.d(t,{O:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("roundedSquareCheckbox",{viewBox:"0 0 14 14",svg:(0,n.jsx)("rect",{x:"0.5",y:"0.5",width:"13",height:"13",rx:"2.5"})})},166104:(e,t,o)=>{o.d(t,{H:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("settings",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M7.30957 15.4814H8.69043C9.25781 15.4814 9.70215 15.1328 9.83203 14.5928L10.1123 13.3828L10.29 13.3145L11.3428 13.9639C11.8213 14.2646 12.3818 14.1895 12.7783 13.7861L13.7354 12.8291C14.1455 12.4258 14.2139 11.8652 13.9131 11.3936L13.2637 10.3477L13.3252 10.1768L14.5352 9.89648C15.0684 9.75977 15.4238 9.31543 15.4238 8.75488V7.4082C15.4238 6.84766 15.0752 6.40332 14.5352 6.2666L13.3389 5.97949L13.2705 5.80176L13.9199 4.75586C14.2207 4.28418 14.1455 3.73047 13.7422 3.31348L12.7852 2.35645C12.3887 1.95996 11.8281 1.88477 11.3564 2.17871L10.3037 2.82129L10.1123 2.74609L9.83203 1.53613C9.70215 0.996094 9.25781 0.647461 8.69043 0.647461H7.30957C6.73535 0.647461 6.29785 0.996094 6.16797 1.53613L5.8877 2.74609L5.69629 2.82129L4.64355 2.17871C4.16504 1.88477 3.60449 1.95996 3.20801 2.35645L2.25098 3.31348C1.84766 3.73047 1.77246 4.28418 2.07324 4.75586L2.72949 5.80176L2.6543 5.97949L1.46484 6.2666C0.917969 6.40332 0.576172 6.84766 0.576172 7.4082V8.75488C0.576172 9.31543 0.924805 9.75977 1.46484 9.89648L2.66797 10.1768L2.73633 10.3477L2.08008 11.3936C1.7793 11.8652 1.85449 12.4258 2.25781 12.8291L3.21484 13.7861C3.61816 14.1895 4.17871 14.2646 4.65039 13.9639L5.70312 13.3145L5.8877 13.3828L6.16797 14.5928C6.29785 15.1328 6.73535 15.4814 7.30957 15.4814ZM7.47363 14.2441C7.35742 14.2441 7.30273 14.1895 7.28223 14.0869L6.87891 12.4053C6.44141 12.3027 6.03125 12.1318 5.69629 11.9199L4.21973 12.8291C4.1377 12.8838 4.05566 12.877 3.9668 12.7949L3.24219 12.0703C3.16699 11.9951 3.16016 11.9131 3.22168 11.8242L4.13086 10.3477C3.93945 10.0264 3.75488 9.61621 3.65234 9.18555L1.96387 8.78223C1.86133 8.76172 1.81348 8.70703 1.81348 8.59082V7.56543C1.81348 7.44238 1.86133 7.39453 1.96387 7.36719L3.65234 6.9707C3.75488 6.5127 3.95312 6.08887 4.11719 5.79492L3.21484 4.3252C3.15332 4.22949 3.15332 4.14746 3.23535 4.06543L3.95996 3.34766C4.04883 3.27246 4.11719 3.25879 4.21973 3.31348L5.68945 4.20898C5.99707 4.02441 6.44824 3.83301 6.87891 3.72363L7.28223 2.04199C7.30273 1.93945 7.35742 1.88477 7.47363 1.88477H8.52637C8.64258 1.88477 8.69727 1.93262 8.71094 2.04199L9.12109 3.7373C9.56543 3.83984 9.96875 4.02441 10.3037 4.21582L11.7734 3.32031C11.876 3.26562 11.9443 3.27246 12.0264 3.35449L12.7578 4.07227C12.8398 4.14746 12.8398 4.22949 12.7783 4.3252L11.876 5.79492C12.04 6.08887 12.2451 6.5127 12.3477 6.9707L14.0293 7.36719C14.1387 7.39453 14.1865 7.44238 14.1865 7.56543V8.59082C14.1865 8.70703 14.1318 8.76172 14.0293 8.78223L12.3408 9.18555C12.2383 9.61621 12.0537 10.0264 11.8691 10.3477L12.7715 11.8242C12.8262 11.9131 12.8262 11.9951 12.751 12.0635L12.0264 12.7949C11.9375 12.877 11.8555 12.8838 11.7734 12.8291L10.2969 11.9199C9.96191 12.1318 9.57227 12.3027 9.12109 12.4053L8.71094 14.0869C8.69727 14.1963 8.64258 14.2441 8.52637 14.2441H7.47363ZM8 10.6621C9.42188 10.6621 10.5908 9.49316 10.5908 8.06445C10.5908 6.64941 9.42188 5.48047 8 5.48047C6.57812 5.48047 5.40234 6.64941 5.40234 8.06445C5.40234 9.49316 6.57129 10.6621 8 10.6621ZM8 9.49316C7.2207 9.49316 6.57812 8.85059 6.57812 8.06445C6.57812 7.29199 7.2207 6.65625 8 6.65625C8.76562 6.65625 9.40137 7.29199 9.40137 8.06445C9.40137 8.84375 8.76562 9.49316 8 9.49316Z"})})},636754:(e,t,o)=>{o.d(t,{g:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("settingsConnectedApps",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M16.492 3.922C15.695 3.125 14.57 3 13.234 3H7.148c-1.312 0-2.437.125-3.234.922C3.117 4.719 3 5.836 3 7.14v6.03c0 1.337.117 2.446.914 3.243.797.797 1.922.922 3.25.922h6.07c1.336 0 2.461-.125 3.258-.922.797-.797.914-1.906.914-3.242V7.164c0-1.336-.117-2.453-.914-3.242zm-.344 3.023v6.438c0 .812-.101 1.64-.578 2.117-.468.469-1.312.578-2.117.578h-6.5c-.805 0-1.648-.11-2.125-.578-.469-.477-.57-1.305-.57-2.117V6.969c0-.82.101-1.664.57-2.133.477-.477 1.328-.578 2.149-.578h6.476c.805 0 1.649.11 2.117.578.477.476.578 1.305.578 2.11zm-3.492 5.149c.344 0 .57-.266.57-.625V7.78c0-.46-.25-.64-.648-.64h-3.71c-.368 0-.602.226-.602.57s.242.57.617.57h1.422l1.156-.125-1.219 1.133-2.875 2.883a.62.62 0 00-.187.422c0 .351.226.578.57.578.188 0 .336-.07.445-.18l2.875-2.875 1.125-1.203-.117 1.219v1.351c0 .368.227.61.578.61z"})})},844958:(e,t,o)=>{o.d(t,{t:()=>n().t});var n=()=>o(828042)},918302:(e,t,o)=>{o.d(t,{s:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("speechBubbleFilled",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M4.32 15.424c.39 0 .677-.192 1.149-.609l2.344-2.064h4.116c2.057 0 3.213-1.19 3.213-3.22V4.22c0-2.03-1.156-3.22-3.213-3.22H3.213C1.163 1 0 2.19 0 4.22V9.53c0 2.037 1.196 3.22 3.165 3.22h.28v1.675c0 .608.322.998.875.998zm.342-1.531v-1.949c0-.403-.178-.56-.56-.56H3.26c-1.285 0-1.9-.65-1.9-1.894V4.26c0-1.243.615-1.893 1.9-1.893h8.627c1.278 0 1.893.65 1.893 1.894v5.23c0 1.243-.615 1.893-1.893 1.893h-4.15c-.417 0-.622.068-.909.369l-2.167 2.14zm-.567-8.668h6.884a.433.433 0 00.423-.438.425.425 0 00-.423-.417H4.095a.419.419 0 00-.417.417c0 .24.184.438.417.438zm0 2.167h6.884a.427.427 0 000-.855H4.095a.425.425 0 00-.417.424c0 .24.184.43.417.43zm0 2.173h4.484c.24 0 .424-.191.424-.423 0-.24-.185-.431-.424-.431H4.095a.422.422 0 00-.417.43.42.42 0 00.417.424z"})})},333166:(e,t,o)=>{o.d(t,{n:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("sub",{viewBox:"0 0 30 30",svg:(0,n.jsx)("path",{d:"M5 3V20H23.187L19.594 16.406L21 15L27 21L21 27L19.594 25.594L23.187 22H3V3H5Z"})})},275023:(e,t,o)=>{o.d(t,{I:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("suggestion",{viewBox:"0 0 16 16",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M8.651 8.465l-1.397.54c-.088.035-.17.018-.244-.053-.07-.07-.086-.15-.046-.237l.567-1.378 5.945-5.939 1.127 1.12-5.952 5.947zm6.447-6.427L13.97.91l.567-.567a.702.702 0 01.474-.217.615.615 0 01.468.165l.198.184c.136.14.2.306.191.495a.718.718 0 01-.217.494l-.554.574z"}),(0,n.jsx)("path",{d:"M14.084 5.065V9.65c0 .611-.152 1.072-.455 1.384-.299.308-.76.462-1.384.462h-4.1a1.37 1.37 0 00-.488.072 1.147 1.147 0 00-.389.277l-2.09 2.07v-1.879c0-.197-.043-.336-.131-.415-.084-.083-.218-.125-.402-.125H3.74c-.62 0-1.08-.154-1.384-.462-.299-.312-.448-.773-.448-1.384V4.62c0-.606.15-1.063.448-1.37.303-.313.765-.469 1.384-.469h6.36l1.3-1.298H3.71c-.664 0-1.227.123-1.688.369-.457.246-.806.6-1.048 1.061C.73 3.37.61 3.926.61 4.581v5.115c0 .655.121 1.213.363 1.675.246.457.595.808 1.048 1.054.457.246 1.004.37 1.641.37h.356v1.621c0 .294.073.527.218.699.15.171.356.257.62.257.184 0 .358-.049.52-.145a3.65 3.65 0 00.58-.435l2.255-1.998h4.073c.66 0 1.22-.123 1.681-.369a2.492 2.492 0 001.055-1.054c.242-.462.363-1.02.363-1.675V4.581c0-.267-.02-.518-.06-.752l-.208.215-1.031 1.021z"})]})})},315136:(e,t,o)=>{o.d(t,{b:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("sync",{viewBox:"0 0 30 30",svg:(0,n.jsx)("path",{d:"M27.93 13.81h-1.54c-.606-5.717-5.536-10.265-11.387-10.265-3.425 0-6.514 1.55-8.625 3.987-.427.483-.37 1.078.079 1.392.438.315.965.214 1.336-.202a9.57 9.57 0 017.21-3.268 9.503 9.503 0 019.456 8.356h-1.673c-.798 0-1 .539-.573 1.156l2.516 3.583c.359.516.898.528 1.269 0l2.504-3.572c.45-.628.236-1.167-.573-1.167zM2.064 16.202h1.55c.607 5.716 5.526 10.253 11.388 10.253 3.425 0 6.525-1.561 8.636-3.987.416-.483.36-1.09-.078-1.404-.438-.314-.977-.202-1.337.214-1.74 2.01-4.324 3.268-7.221 3.268a9.496 9.496 0 01-9.467-8.344H7.22c.798 0 1-.55.573-1.157l-2.516-3.583c-.359-.516-.898-.527-1.269 0l-2.515 3.572c-.438.617-.236 1.168.572 1.168z"})})},320808:(e,t,o)=>{o.d(t,{d:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("tableBlock",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{fillRule:"evenodd",d:"M4.25 16.5a2.75 2.75 0 01-2.75-2.75v-7.5A2.75 2.75 0 014.25 3.5h11.5a2.75 2.75 0 012.75 2.75v7.5a2.75 2.75 0 01-2.75 2.75H4.25zM3 6.25C3 5.56 3.56 5 4.25 5h5v2.5H3V6.25zM3 9h6.25v2H3V9zm0 3.5v1.25c0 .69.56 1.25 1.25 1.25h5v-2.5H3zm7.75 0V15h5c.69 0 1.25-.56 1.25-1.25V12.5h-6.25zM17 11V9h-6.25v2H17zm-6.25-3.5H17V6.25C17 5.56 16.44 5 15.75 5h-5v2.5z",clipRule:"evenodd"})})},786687:(e,t,o)=>{o.d(t,{s:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("tableHeaderColumn",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M13.7847 14H2.21528C0.756437 14 0 13.2862 0 11.9164V4.0836C0 2.7074 0.756437 2 2.21528 2H13.7847C15.2436 2 16 2.71383 16 4.0836V11.9164C16 13.2862 15.2436 14 13.7847 14ZM14.6762 4.19293C14.6762 3.56913 14.325 3.25402 13.7037 3.25402H7V5.60772H14.6762V4.19293ZM7 6.81672V9.18328H14.6762V6.81672H7ZM13.7037 12.7395C14.325 12.7395 14.6762 12.4309 14.6762 11.8071V10.3923H7V12.7395H13.7037Z"})})},171745:(e,t,o)=>{o.d(t,{f:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("tableHeaderRow",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M13.7847 14H2.21528C0.756437 14 0 13.2862 0 11.9164V4.0836C0 2.7074 0.756437 2 2.21528 2H13.7847C15.2436 2 16 2.71383 16 4.0836V11.9164C16 13.2862 15.2436 14 13.7847 14ZM1.32377 6.81672V9.18328H7.34825V6.81672H1.32377ZM8.645 6.81672V9.18328H14.6762V6.81672H8.645ZM1.32377 11.8071C1.32377 12.4309 1.66821 12.7395 2.29633 12.7395H7.34825V10.3923H1.32377V11.8071ZM13.7037 12.7395C14.325 12.7395 14.6762 12.4309 14.6762 11.8071V10.3923H8.645V12.7395H13.7037Z"})})},929625:(e,t,o)=>{o.d(t,{w:()=>n().w});var n=()=>o(672039)},733641:(e,t,o)=>{o.d(t,{k:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("thinCheck",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M6.385 14.162c.362 0 .642-.15.84-.444L13.652 3.71c.144-.226.205-.417.205-.602 0-.485-.341-.82-.833-.82-.335 0-.54.123-.746.444l-5.926 9.4-3.042-3.903c-.205-.267-.417-.376-.718-.376-.492 0-.848.348-.848.827 0 .212.075.417.253.629l3.541 4.416c.24.3.492.437.848.437z"})})},941777:(e,t,o)=>{o.d(t,{H:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("thinCheckboxCircle",{viewBox:"0 0 22 23",svg:(0,n.jsx)("circle",{cx:"11",cy:"11.5",r:"10",stroke:"#E2E1DE",strokeWidth:"1"})})},771050:(e,t,o)=>{o.d(t,{E:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("thinCheckboxCircleDark",{viewBox:"0 0 22 23",svg:(0,n.jsx)("circle",{cx:"11",cy:"11.5",r:"10",stroke:"#5A5A5A",strokeWidth:"1"})})},375033:(e,t,o)=>{o.d(t,{i:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("threeColumns",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{fillRule:"evenodd",d:"M1.5 6a2.75 2.75 0 012.75-2.75h11.5A2.75 2.75 0 0118.5 6v7.5a2.75 2.75 0 01-2.75 2.75H4.25A2.75 2.75 0 011.5 13.5V6zm2.75-1.25C3.56 4.75 3 5.31 3 6v7.5c0 .69.56 1.25 1.25 1.25H6.5v-10H4.25zm7.75 10H8v-10h4v10zm1.5 0h2.25c.69 0 1.25-.56 1.25-1.25V6c0-.69-.56-1.25-1.25-1.25H13.5v10z",clipRule:"evenodd"})})},739479:(e,t,o)=>{o.d(t,{y:()=>n().y});var n=()=>o(95886)},488949:(e,t,o)=>{o.d(t,{L:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("triangle",{viewBox:"0 0 100 100",svg:(0,n.jsx)("polygon",{points:"5.9,88.2 50,11.8 94.1,88.2 "})})},340628:(e,t,o)=>{o.d(t,{l:()=>n().l});var n=()=>o(509768)},491174:(e,t,o)=>{o.d(t,{s:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("undo",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M14.542 10.6826C14.542 7.96875 12.71 6.10254 9.59961 6.10254H5.29297L3.70703 6.1709L4.91016 5.15234L6.67383 3.43652C6.80371 3.30664 6.89258 3.14258 6.89258 2.91699C6.89258 2.5 6.59863 2.19238 6.1543 2.19238C5.96973 2.19238 5.76465 2.28125 5.61426 2.4248L1.69043 6.29395C1.5332 6.4375 1.45117 6.64258 1.45117 6.84766C1.45117 7.05273 1.5332 7.25098 1.69043 7.40137L5.61426 11.2705C5.76465 11.4141 5.96973 11.5029 6.1543 11.5029C6.59863 11.5029 6.89258 11.1953 6.89258 10.7715C6.89258 10.5527 6.80371 10.3887 6.67383 10.252L4.91016 8.53613L3.70703 7.52441L5.29297 7.59277H9.64746C11.8486 7.59277 13.0586 8.84375 13.0586 10.6211C13.0586 12.4053 11.8486 13.7109 9.64746 13.7109H8.05469C7.60352 13.7109 7.2959 14.0459 7.2959 14.4629C7.2959 14.873 7.61035 15.208 8.05469 15.208H9.69531C12.751 15.208 14.542 13.4102 14.542 10.6826Z"})})},257013:(e,t,o)=>{o.d(t,{T:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("unsync",{viewBox:"0 0 30 30",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.768 23.295l1.353 1.351a11.298 11.298 0 01-6.118 1.81c-5.862 0-10.781-4.538-11.387-10.254h-1.55c-.809 0-1.011-.55-.573-1.168l2.516-3.572c.37-.527.91-.516 1.269 0l2.515 3.583c.427.606.225 1.157-.572 1.157H5.536a9.496 9.496 0 009.467 8.344c1.74 0 3.366-.454 4.765-1.251zM10.233 6.723l-1.361-1.36a11.26 11.26 0 016.131-1.818c5.851 0 10.782 4.548 11.388 10.265h1.539c.808 0 1.021.539.572 1.167l-2.504 3.572c-.37.528-.91.516-1.27 0l-2.515-3.583c-.427-.617-.224-1.156.573-1.156h1.673a9.503 9.503 0 00-9.456-8.356 9.55 9.55 0 00-4.77 1.27z"}),(0,n.jsx)("path",{d:"M27.067 28.551c.41.41 1.094.41 1.49 0 .41-.41.41-1.08 0-1.49L2.937 1.454a1.06 1.06 0 00-1.505 0c-.396.396-.396 1.08 0 1.49l25.635 25.607z"})]})})},735501:(e,t,o)=>{o.d(t,{t:()=>n().t});var n=()=>o(521913)},436929:(e,t,o)=>{o.d(t,{fA:()=>l,tc:()=>c});var n=()=>o(225339),i=()=>o(349220),r=()=>o(135499),a=()=>o(657206);const s=["png","jpg","jpeg","webp","heic","heif"];function l(e){if(!e)return!1;const t=n().mD(e);if(!t)return!1;const o=n().iS(e),i=s.includes(t.toLowerCase());return o&&i}async function c(e,t){const o=e.getOriginalImageSource();if((0,i().TO)(o),!o)return;const n=await(0,r().b)({url:o,isAuthenticated:!0,permissionRecord:e.pointer},t),{imageEditActions:s}=await a().J.load();return s.cropAndUploadImage({store:e,environment:t,proxiedOriginalUrl:n})}},657206:(e,t,o)=>{o.d(t,{J:()=>i,P:()=>r});var n=()=>o(677559);const i=new(n().Ss)("imageEdit",(()=>o.e(78138).then(o.bind(o,908907)))),r=(0,n().kF)(i,(e=>e.ImageEditModal))},624528:(e,t,o)=>{o.d(t,{$s:()=>c,KB:()=>l,kJ:()=>d,rm:()=>u});var n=()=>o(421654),i=()=>o(970105),r=()=>o(269299),a=()=>o(472753),s=()=>o(189288);function l(e){const{store:t}=e,o=t.getImageHyperlink()||"",n="placeholder"!==o?o:void 0,i=a().R.getRect(t);s().Z.setState({open:!0,url:"",type:"image",selectionRect:i,store:t,imageHyperlink:n,focusLinkInput:!0})}function c(){s().Z.setState({open:!1,type:"image"})}function d(e){const{url:t,transaction:o}=e,r=s().Z.state;if(!r.open)return;const a=i().bY(t);n().FH({stores:[r.store],update:{image_hyperlink:a},transaction:o}),s().Z.setState({...r,imageHyperlink:a,url:""})}function u(e){const t=s().Z.state;t.open&&(r().createAndCommit({userAction:"imageHyperlink.unlinkImage",environment:e,canUndo:!0,perform:e=>{n().FH({stores:[t.store],update:{image_hyperlink:null},transaction:e})}}),s().Z.reset())}},189288:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1,type:"image"}}}const i=new n},803728:(e,t,o)=>{o.d(t,{_c:()=>M,pl:()=>x,Gi:()=>C,Go:()=>I,ES:()=>k,IY:()=>N,yM:()=>D,K8:()=>U,W3:()=>B,IW:()=>T,PV:()=>S,QI:()=>F,Bo:()=>w,AO:()=>R,Dd:()=>A});o(267602),o(653476),o(241792);var n=()=>o(730120),i=()=>o(930494),r=()=>o(843957),a=()=>o(954949),s=()=>o(824462),l=()=>o(261930),c=()=>o(269299),d=()=>o(348141),u=()=>o(876822);o(670560);class p{constructor(e){if(this.exposures=void 0,this.exposures=new Map,e)for(const t of e){const e=(0,i().M0)(t.placement);if(e&&t.timestamps){const o=this.exposures.get(e);o?o.push(...t.timestamps):this.exposures.set(e,[...t.timestamps])}}}get(e){return this.exposures.get(e)??[]}add(e,t){let o=this.get(e);o.push(t),o.sort(((e,t)=>e-t)),o.length>10&&(o=o.slice(o.length-10)),this.exposures.set(e,o)}exportUserSetting(){return Array.from(this.exposures.entries()).map((e=>{let[t,o]=e;return{placement:t,timestamps:o}}))}}var m=()=>o(326966);class f{constructor(e){this.name=void 0,this.name=e}}o(228244);class g extends f{constructor(e,t,o){super("FrequencyCapRule"),this.placement=void 0,this.cap=void 0,this.window=void 0,this.placement=e,this.cap=t,this.window=o}check(e,t){var o;const i=null===(o=u().default.state.currentUserSettingsStore)||void 0===o?void 0:o.getSettings();if(!i)return!1;const r=new p(null==i?void 0:i.callout_placement_exposures);let a;a="all"===this.placement?Array.from(r.exposures.values()).flat():r.get(this.placement);const s=n().ou.now().toMillis()-this.window;return a.filter((e=>e>=s)).length<this.cap}}var v=()=>o(878797);class h extends f{constructor(e){super("MaxConcurrentRule"),this.maxConcurrent=void 0,this.maxConcurrent=e}check(e,t){const o=(0,i().SI)(t);return v().default.getMessagesForPlacement(o).length<this.maxConcurrent}}const _=[new class extends f{constructor(){super("DismissalRule")}check(e,t){const o=(0,i().iu)(t);if("once_per_user"===o){var n,r;const e=null===(n=u().default.state.currentUserSettingsStore)||void 0===n?void 0:n.getSettings();return!!e&&!(null!==(r=e.callout_dismissal_timestamps)&&void 0!==r&&r.some((e=>e.name===t.key)))}if("once_per_space"===o){var a,s;const e=null===(a=u().default.state.currentSpaceViewStore)||void 0===a?void 0:a.getSettings();return!!e&&!(null!==(s=e.callout_dismissal_timestamps)&&void 0!==s&&s.some((e=>e.name===t.key)))}return!0}},new class extends f{constructor(){super("BlocklistRule")}check(e,t){const n=o(749826).default.getConfigKey("callout_config","callout_blocklist");return!n||!n.includes(t.key)}},new class extends f{constructor(){super("CorrectPlatformRule")}check(e,t){const o=(0,i().gM)(e.device);return(0,i().RT)(t).includes(o)}}],b={Modal:[new class extends f{constructor(e){super("MinimumAccountAgeRule"),this.minimumAccountAge=void 0,this.minimumAccountAge=e}check(e,t){var o;const i=null===(o=u().default.state.currentUserSettingsStore)||void 0===o?void 0:o.getSettings();if(!i||!i.signup_time)return!1;return n().ou.now().toMillis()-i.signup_time>this.minimumAccountAge}}(4*m().A0),new g("Modal",1,m().DS),new h(1)],SidebarFooter:[new h(1)],Tooltip:[new g("Tooltip",1,m().A0)],None:[]};var y=()=>o(706443);function S(e,t,o){if(!o){const o=function(e,t){for(const n of _)if(!n.check(e,t))return{success:!1,error:n.name};const o=(0,i().SI)(t);for(const n of b[o])if(!n.check(e,t))return{success:!1,error:n.name};return{success:!0}}(e,t);if(!o.success)return o}if(!u().default.state.inAppCalloutStore.updateCalloutStatus({calloutId:t.key,visible:!0,validateCanShow:!o}))return{success:!1,error:"InAppCalloutStore"};const n=(0,i().SI)(t);if("Modal"===n||"SidebarFooter"===n)for(const[r,a]of v().default.state.messages)(0,i().SI)(a)===n&&v().default.removeMessage(a.key);return v().default.addMessage(t,o),{success:!0}}function w(e,t){return S(e,{id:"",type:"static",key:t,props:{}})}function k(e,t){I(e,{id:"",type:"static",key:t,props:{}})}function I(e,t){S(e,t,!0)}function C(e,t){x(e,{id:"",key:t,type:"static",props:{}})}function x(e,t){if(v().default.isVisible(t.key)){const o=(0,i().SI)(t);v().default.removeMessage(t.key),function(e,t){const o=u().default.state.currentUserSettingsStore,i=null==o?void 0:o.getSettings();if(!i||!o)return;const r=new p(i.callout_placement_exposures);for(const a of t)r.add(a,n().ou.now().toMillis());c().createAndCommit({environment:e,userAction:"messageActions.addPlacementExposures",canUndo:!0,perform:e=>{d().d2({userSettingsStore:o,transaction:e,data:{callout_placement_exposures:r.exportUserSetting()}})}})}(e,[o]),P(e,t),u().default.state.inAppCalloutStore.updateCalloutStatus({calloutId:t.key,visible:!1}),"static"!==t.type&&async function(e,t){const o=y().Z.getConfig(t)||{};if(o.message){const t=o.message;await s().callApi({eventName:"updateInAppMessage",environment:e,data:{messageId:t.id,state:"done"}})}}(e,t.key)}}function T(e){const t=u().default.state.currentUserSettingsStore;if(!t)return;const o=new p;c().createAndCommit({environment:e,userAction:"messageActions.addPlacementExposures",canUndo:!0,perform:e=>{d().d2({userSettingsStore:t,transaction:e,data:{callout_placement_exposures:o.exportUserSetting()}})}})}function M(e,t){P(e,{id:"",key:t,type:"static",props:{}})}function P(e,t){const o=(0,i().iu)(t);"once_per_user"===o?function(e,t){const o=u().default.state.currentUserSettingsStore,i=null==o?void 0:o.getSettings();if(!o||!i)return;const r=i.callout_dismissal_timestamps??[],a=new Map(r.map((e=>[e.name,e])));a.has(t.key)||a.set(t.key,{name:t.key,timestamp:n().ou.now().toMillis()});c().createAndCommit({environment:e,userAction:"messageActions.addUserSettingsDismissal",canUndo:!0,perform:e=>{d().d2({userSettingsStore:o,transaction:e,data:{callout_dismissal_timestamps:Array.from(a.values())}})}})}(e,t):"once_per_space"===o&&function(e,t){const o=u().default.state.currentSpaceViewStore,i=null==o?void 0:o.getSettings();if(!o||!i)return;const r=i.callout_dismissal_timestamps??[],a=new Map(r.map((e=>[e.name,e])));a.has(t.key)||a.set(t.key,{name:t.key,timestamp:n().ou.now().toMillis()});c().createAndCommit({environment:e,userAction:"messageActions.addSpaceViewDismissal",canUndo:!0,perform:e=>{l().VD(o,e,{callout_dismissal_timestamps:Array.from(a.values())})}})}(e,t)}function A(e){const t=e.callout_dismissal_timestamps??[];for(const o of t){if(!o.name)continue;const e=(0,a().Si)(o.name);if(!e)continue;"once_per_user"===r().xm[e].dismissal_type&&(v().default.isVisible(e)&&!v().default.isForced(e)&&v().default.removeMessage(e))}}function R(e){const t=e.callout_dismissal_timestamps??[];for(const o of t){if(!o.name)continue;const e=(0,a().Si)(o.name);if(!e)continue;"once_per_space"===r().xm[e].dismissal_type&&(v().default.isVisible(e)&&!v().default.isForced(e)&&v().default.removeMessage(e))}}function B(e,t){const{currentUserSettingsStore:o,currentSpaceViewStore:n}=u().default.state,i=null==o?void 0:o.getSettings();if(o&&i&&i.callout_dismissal_timestamps){let n=i.callout_dismissal_timestamps;n=n.filter((e=>e.name!==t)),c().createAndCommit({environment:e,userAction:"messageActions.resetDismissal",canUndo:!0,perform:e=>{d().d2({userSettingsStore:o,transaction:e,data:{callout_dismissal_timestamps:n}})}})}const r=null==n?void 0:n.getSettings();if(n&&r){let o=r.callout_dismissal_timestamps??[];o=o.filter((e=>e.name!==t)),c().createAndCommit({environment:e,userAction:"messageActions.resetDismissal",canUndo:!0,perform:e=>{l().VD(n,e,{callout_dismissal_timestamps:o})}})}}const E=new(o(677559).Ss)("inAppMessages",(()=>o.e(16006).then(o.bind(o,500221))));async function D(e,t){const o=await E.load(),{shown:n}=await o.maybeShowMessagesImpl(e,[t]);return n.length>0}async function U(e,t){const o=await E.load();await o.maybeShowMessagesImpl(e,t)}async function F(e){const t=await E.load();await t.showStartupMessagesImpl(e)}async function N(e,t){const o=await E.load(),{eligibleKeys:n}=await o.getEligibleStaticMessages(e,[t]);return n.length>0}},878797:(e,t,o)=>{o.r(t),o.d(t,{default:()=>i});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(258429);class n extends(()=>o(263184))().default{getInitialState(){return{messages:new Map,forcedMessages:new Set}}isVisible(e){return void 0!==this.state.messages.get(e)}isForced(e){return this.state.forcedMessages.has(e)}getMessagesForPlacement(e){return Array.from(this.state.messages.values()).filter((t=>(0,o(930494).SI)(t)===e))}addMessage(e,t){const o=new Map(this.state.messages);o.set(e.key,e);const n=new Set(this.state.forcedMessages);t&&n.add(e.key),this.setState({messages:o,forcedMessages:n})}removeMessage(e){const t=new Map(this.state.messages),o=new Set(this.state.forcedMessages);o.has(e)&&o.delete(e),t.has(e)&&t.delete(e),this.setState({messages:t,forcedMessages:o})}emptyMessages(){return this.state.messages.values().filter((e=>"empty"===e.type)).toArray()}}const i=new n},706443:(e,t,o)=>{o.d(t,{Z:()=>i});var n=()=>o(263184);const i=new class{constructor(){this.configStores=void 0,this.configStores=new Map}getConfig(e){var t;if(!this.configStores.has(e)){const t=new(n().default);this.configStores.set(e,t)}return null===(t=this.configStores.get(e))||void 0===t?void 0:t.getState()}setConfig(e,t){var o;if(!this.configStores.has(e)){const t=new(n().default);this.configStores.set(e,t)}null===(o=this.configStores.get(e))||void 0===o||o.setState(t)}}},391995:(e,t,o)=>{o.d(t,{A:()=>i});var n=()=>o(781105);const i=(0,o(947115).exposeDebugValue)("offlineDebugger",new class{constructor(){var e=this;this.enableLogging=!1,this.operationLatency={},this.log=function(t){if(e.enableLogging){for(var o=arguments.length,n=new Array(o>1?o-1:0),i=1;i<o;i++)n[i-1]=arguments[i];console.groupCollapsed(t,...n),console.trace(),console.groupEnd()}},this.generateLocalRecordMap=n().yY,this.getLocalRecord=n().Ye,this.getLocalBlocksWithParent=n().Dx}async measure(e,t,n){var i=this;const r=`OFFLINE: ${e}:`;return this.operationLatency[e]||(this.operationLatency[e]=new(o(265704).s)((function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return i.log(r,...t)}))),this.operationLatency[e].measureErrors(t,"hit","miss",n)}trace(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];this.log("OFFLINE:",...t)}debug(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];this.log("OFFLINE:",...t)}traceMiss(e,t){for(var o=arguments.length,n=new Array(o>2?o-2:0),i=2;i<o;i++)n[i-2]=arguments[i];this.trace(`missed: record ${e}:${t}`,...n)}clearMemory(){o(143346).LK(window.__console.environment)}})},341691:(e,t,o)=>{o.r(t),o.d(t,{actuallyLogoutAndDeleteMostLocalData:()=>Oe,buildHeadersForLoginWithEmail:()=>Ie,clearCurrentUser:()=>Le,clearMostUserStorageAndState:()=>ke,handleLoginFailureIfMicrosoftVerificationRequired:()=>Ye,handleLoginFailureIfSamlRequired:()=>Qe,handleLoginSuccess:()=>Ze,handleLoginWithMfa:()=>Ke,handleLoginWithTemporaryPasscodeSuccess:()=>Me,initialize:()=>qe,loginPasswordReset:()=>De,loginSamlUser:()=>Ue,loginSamlUserWithToken:()=>Ee,loginUserWithPasskeyVerifyChallenge:()=>Fe,loginWithAppleAuth:()=>Pe,loginWithGoogleAuth:()=>Ae,loginWithMicrosoftAuth:()=>Re,loginWithTemporaryPasscode:()=>Te,logout:()=>Ve,logoutSingleAccount:()=>Ne,openBrowserInMobileNative:()=>xe,redirectToSaml:()=>Be,requestLoginWithGoogleOneTap:()=>Ce,setLocalStorageUserId:()=>He,shouldCreatePassword:()=>Ge,showSamlRedirectMessage:()=>Je});o(821057),o(670560),o(267602),o(653476),o(241792),o(903650);var n=()=>o(388322),i=()=>o(698422),r=()=>o(506347),a=()=>o(21955),s=()=>o(926161),l=()=>o(446866),c=()=>o(799891),d=()=>o(431595),u=()=>o(572680),p=()=>o(836273),m=()=>o(989478),f=()=>o(282017),g=()=>o(245015),v=()=>o(629719),h=()=>o(96642),_=()=>o(513670),b=()=>o(792409),y=()=>o(839002),S=()=>o(342792),w=()=>o(696459),k=()=>o(916673),I=()=>o(491927),C=()=>o(824462),x=()=>o(146630),T=()=>o(308186),M=()=>o(231077),P=()=>o(50219),A=()=>o(405851),R=()=>o(291338),B=()=>o(13382),E=()=>o(528918),D=()=>o(279762),U=()=>o(143346),F=()=>o(58771),N=()=>o(497065),V=()=>o(586730),L=()=>o(224597),O=()=>o(13750),Z=()=>o(205228),j=()=>o(680887),K=()=>o(937419),z=()=>o(594546),H=()=>o(848643),q=()=>o(274879),W=()=>o(443269),G=()=>o(796093),$=()=>o(527278),Q=()=>o(265903),Y=()=>o(693622),J=()=>o(148126),X=()=>o(506348),ee=()=>o(274328),te=()=>o(977481),oe=()=>o(827510),ne=()=>o(260794),ie=()=>o(707138),re=()=>o(267344),ae=()=>o(620218),se=()=>o(704259),le=()=>o(385875),ce=()=>o(222685),de=()=>o(43519),ue=()=>o(876822),pe=()=>o(518019),me=()=>o(749826),fe=()=>o(148882),ge=()=>o(826955),ve=()=>o(965903),he=()=>o(127519),_e=()=>o(723721),be=()=>o(594723),ye=()=>o(291550),Se=()=>o(846441);const we=(0,o(788860).vU)({unsavedChanges:{id:"loginActions.dialogError.logoutUnsavedChanges.message",defaultMessage:"You have unsaved changes. If you log out now, you could lose them."},logoutWithoutSaving:{defaultMessage:"Discard edits and log out",id:"loginActions.dialogError.logoutUnsavedChanges.confirmButton.label"},signupPendingMessage:{defaultMessage:"Creating Notion accountâ€¦",id:"loginActions.signup.pending.message"},loginPendingMessage:{defaultMessage:"Logging in to Notionâ€¦",id:"loginActions.login.pending.message"},redirectSamlMessage:{defaultMessage:"SAML SSO required. Redirecting to the configured login page.",id:"loginActions.login.redirect.saml.message"}});async function ke(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=[];if(t){const e=(0,f().DD)();sessionStorage.clear(),(0,f().In)(e)}else sessionStorage.clear();X().ZL({isMobileNative:e.device.isMobileNative}),o&&n.push(Le(e)),n.push(I().NM()),e.mobileNative&&(n.push(e.mobileNative.logoutOfGoogle()),n.push(e.mobileNative.cancelUserBackgroundTasks())),e.device.isElectron&&(M().clearBrowserHistory(),t||M().clearCookies()),ue().default.reset(),ve().default.reset(),he().default.reset(),U().LK(e),te().resetRecordSubscriptions(),se().default.reset(),de().default.reset(),ie().default.reset(),K().default.reset(),ye().v.reset(),n.push(fe().transactionQueue.reset()),me().default.reset(),await Promise.all(n)}function Ie(e){try{if(!me().default.checkGate({gateName:"send_email_domain_header_to_login_with_email"}))return{};if(!e)return{};const t=(0,l().H3)(e);if(!t)return{};const o=(0,l().Gd)(t);return o?{[a().ky]:o}:{}}catch(t){return c().log({level:"error",from:"loginActions",type:"buildHeadersForLoginWithEmailError",error:(0,b().Ui)(t),data:{}}),{}}}async function Ce(e){const{environment:t,idToken:o,store:n,frontPathName:i,googleLoginTimeMetric:r}=e,a=await(0,G().loadCurrentUserId)(t);Se().XM(t);const s=await C().callApi({eventName:"loginWithGoogleJwt",environment:t,data:{idToken:o}});if("success"===s.type){const{isNewSignup:e,userId:o}=s.data;return ae().default.measure(r,{environment:t}),await Ze({environment:t,isNewSignup:e,userId:o,previousPersistedUserId:a,loginMethod:"login-with-google-onetap",frontPathName:i}),{status:"success"}}{await Qe(t,s);const e=(0,W().wf)($().Z.getIntl(),s);return n.setState({...n.state,alert:e}),{status:"fail"}}}function xe(e,t){e.mobileNative&&((0,H().Q7)(e)?e.mobileNative.openAuthSessionBrowser(t):e.mobileNative.openInAppBrowser(t))}async function Te(e){const{environment:t,state:o,password:n,redirectURL:i,webBrowserDeviceId:r,passcodeEnterMethod:a,showInvitationVersion:s,temporaryPasscodeLoginTimeMetric:l,email:c}=e,d=await(0,G().loadCurrentUserId)(t),u=Ie(c),m=await C().callApi({eventName:"loginWithEmail",environment:t,data:{state:o,password:n},headers:u});if(ae().default.DO_NOT_USE_measureLegacy(l,{environment:t}),"success"===m.type){const{isNewSignup:e,userId:o}=m.data;if(function(e){let{environment:t,isNewSignup:o,webBrowserDeviceId:n}=e;const i=t.device.isElectronAny,r=i&&o&&!n;if(!r)return!1;return me().default.checkGate({gateName:"desktop_app_login_with_email_redirect"})}({environment:t,isNewSignup:e,webBrowserDeviceId:r})){let e=!1;const o=k().$U(k().bf({url:`${Z().default.domainBaseUrl}${p()._j.loginSuccess}`}));return t.device.isElectronAny&&(e=!0,P().m(o)),{status:"success",redirectedToWebToRelogin:e,redirectURL:o}}return await Me({environment:t,isNewSignup:e,userId:o,redirectURL:i,previousPersistedUserId:d,loginMethod:"temporary-passcode",webBrowserDeviceId:r,passcodeEnterMethod:a,showInvitationVersion:s}),{status:"success",redirectedToWebToRelogin:!1}}await Qe(t,m);return{status:"fail",errorMessage:(0,W().wf)($().Z.getIntl(),m)}}async function Me(e){const{environment:t}=e;await Ze(e);const[o,n,i]=await Promise.all([Ge(t),$e(t),We()]);(o&&n||o&&i)&&Y().E({environment:t})}async function Pe(e){const{environment:t,code:o,encryptedToken:n,encryptedNonce:i,encryptedUserObject:r,webBrowserDeviceId:a,appleLoginTimeMetric:s}=e,l=await(0,G().loadCurrentUserId)(t),c=await C().callApi({eventName:"loginWithAppleAuth",environment:t,data:{code:o,encryptedToken:n,encryptedNonce:i,encryptedUserObject:r}});if("success"!==c.type)return await Qe(t,c),(0,W().wf)($().Z.getIntl(),c);{ae().default.measure(s,{environment:t});const{isNewSignup:e,userId:o}=c.data;await Ze({environment:t,isNewSignup:e,userId:o,previousPersistedUserId:l,loginMethod:"login-with-apple",webBrowserDeviceId:a})}}async function Ae(e){const{environment:t,encryptedToken:o,code:n,callbackType:i,webBrowserDeviceId:r,source:a}=e,s=await(0,G().loadCurrentUserId)(t),l=await C().callApi({eventName:"loginWithGoogleAuth",environment:t,data:{code:n,encryptedToken:o,callbackType:i,source:a}});if("success"!==l.type)return await Qe(t,l),(0,W().wf)($().Z.getIntl(),l);{const{isNewSignup:e,userId:o}=l.data;await Ze({environment:t,isNewSignup:e,userId:o,previousPersistedUserId:s,loginMethod:"login-with-google",webBrowserDeviceId:r})}}async function Re(e){const{environment:t,encryptedToken:o,encryptedNonce:n,code:i,callbackType:r,state:a,webBrowserDeviceId:s,source:l}=e,c=await(0,G().loadCurrentUserId)(t),d=await C().callApi({eventName:"loginWithMicrosoftAuth",environment:t,data:{code:i,encryptedToken:o,encryptedNonce:n,callbackType:r,state:a,source:l}});if("success"===d.type){const{isNewSignup:e,userId:o}=d.data;await Ze({environment:t,isNewSignup:e,userId:o,previousPersistedUserId:c,loginMethod:"login-with-microsoft",webBrowserDeviceId:s})}else{await Qe(t,d);if(!Ye(t,d)){const e=(0,W().wf)($().Z.getIntl(),d);ee().Z.setState({...ee().Z.state,alert:e})}}}function Be(e,t){Se().V_(e),e.mobileNative?xe(e,t):e.device.isElectronAny?(c().log({level:"info",from:"loginActions",type:"redirectToSamlOnDesktop",data:{miscDataToConvertToString:{redirectUrl:t}}}),P().m(t)):window.location.href=t}async function Ee(e){const{environment:t,csrfState:o,token:n,isNewSignup:i,email:r}=e,a=await(0,G().loadCurrentUserId)(t),s=await q().getBrowserId(t);o||n||c().log({level:"error",type:"loginSamlUserWithToken",from:"loginActions",error:{stack:(new Error).stack},data:{miscDataToConvertToString:{deviceId:s,isNewSignup:i}}});const l=Ie(r),d=await C().callApi({eventName:"loginWithEmail",environment:t,data:{state:o,password:n},headers:l});if("success"!==d.type)return await Qe(t,d),(0,W().wf)($().Z.getIntl(),d);{const{userId:e}=d.data;await Ze({environment:t,isNewSignup:i,userId:e,previousPersistedUserId:a,loginMethod:"saml"})}}async function De(e){const{environment:t,csrfState:o,password:n,loginStore:i}=e,r=await(0,G().loadCurrentUserId)(t);if(!o){const e=await q().getCookie(t,"notion_browser_id");c().log({level:"error",type:"loginPasswordReset",from:"loginActions",error:{stack:(new Error).stack},data:{miscDataToConvertToString:{deviceId:e,previousPersistedUserId:r}}})}const{email:a}=i.state,s=Ie(a),l=await C().callApi({eventName:"loginWithEmail",environment:t,data:{state:o,password:n,passwordReset:!0},headers:s});if("success"!==l.type)return await Qe(t,l),(0,W().wf)($().Z.getIntl(),l);{const{userId:e,enabledMfaSettings:o}=l.data;o&&o.length>0?(Ke({environment:t,isNewSignup:!1,userId:e,previousPersistedUserId:r,loginMethod:"password-reset",loginStore:i,mfaSettings:o}),N().navigateOnBaseUrl({environment:t,url:p()._j.login}),Y().E({environment:t})):(await Ze({environment:t,isNewSignup:!1,userId:e,previousPersistedUserId:r,loginMethod:"password-reset"}),Y().E({environment:t}))}}async function Ue(e){const{environment:t,userId:o,previousUserId:n,isNewSignup:i}=e;await Ze({environment:t,isNewSignup:i,userId:o,previousPersistedUserId:n,loginMethod:"saml"})}async function Fe(e){const{environment:t,attestation:o,attemptId:n,passkeyLoginTimeMetric:i,showInvitationVersion:r}=e,a=await(0,G().loadCurrentUserId)(t),s=await C().callApi({eventName:"loginWithPasskeyVerifyChallenge",environment:t,data:{attemptId:n,attestation:o}});return"success"===s.type&&(!(!s.data.verified||!s.data.userId)&&void(await Ze({environment:t,isNewSignup:!1,userId:s.data.userId,loginMethod:"passkey",previousPersistedUserId:a,showInvitationVersion:r,loginTimeMetric:i})))}async function Ne(e){const{environment:t,userId:o,logoutOrigin:n,fcmToken:i}=e,{nextUserId:a,nextSpaceViewStore:s}=function(e){const{environment:t,userId:o}=e,n=t.currentUser.id;if(o===n){const e=le().Z.getAllSpaceViewStores(t).filter((e=>{const t=e.getUserRootParentId();return t&&t!==o}))[0];return{nextUserId:e&&e.getUserRootParentId(),nextSpaceViewStore:e}}{const{currentSpaceViewStore:e}=ue().default.state;return{nextUserId:n,nextSpaceViewStore:e}}}(e);if(a&&s){if(await fe().transactionQueue.hasTasksForUser(o)){const{accept:e}=await T().gt({message:$().Z.formatMessage(we.unsavedChanges),acceptLabel:$().Z.formatMessage(we.logoutWithoutSaving)});if(!e)return}i&&D().invalidateToken({environment:t,userId:o,token:i}),await C().callApi({eventName:"logout",environment:t,data:{userId:o,logoutOrigin:n}}),await fe().transactionQueue.clearForUser(o),X().ZL({isMobileNative:t.device.isMobileNative,userId:o});const e=await O().x({environment:t,newCurrentUserId:a,loggedOutUserId:o}),{currentUserRootStore:l,currentUserSettingsStore:c}=ue().default.state;if(l&&c){t.currentUser.id===o&&L().y3({environment:e,spaceViewStore:s,userSettingsStore:c,userRootStore:l,pageVisitSource:r().tY.Login,navigationType:"switchingToOrLoadingSpace"})}M().refreshAll({includeFocusedWindow:!1})}else await Ve(t),M().refreshAll({includeFocusedWindow:!1})}async function Ve(e){if(await fe().transactionQueue.anySessionHasTasks()){const{accept:e}=await T().gt({message:$().Z.formatMessage(we.unsavedChanges),acceptLabel:$().Z.formatMessage(we.logoutWithoutSaving)});if(!e)return}if((0,J().Sr)(e))return void(window.location.href=`${Z().default.domainBaseUrl}/logout`);if(!me().default.checkGate({gateName:"dot_com_cookie_sync"})||e.device.isElectron||e.device.isNative)N().c4({environment:e,url:p()._j.logout});else{const o=`${Z().default.front.domainBaseUrl}/front-api/status`;let n;try{n=await fetch(o)}catch(t){return void N().c4({environment:e,url:p()._j.logout})}if(!n||200!==n.status)return void N().c4({environment:e,url:p()._j.logout});const i=`${Z().default.front.domainBaseUrl}/front-api/cookie-sync?logout=true&original_url=/logout`;N().c4({environment:e,url:i})}}async function Le(e){if(e.mobileNative&&await e.mobileNative.unregisterPushNotifications(),e.updateCurrentUserId){const t={environment:e,currentUserId:void 0,userIds:[]};e.updateCurrentUserId(t)}return{...e,currentUser:new(n().CurrentUser)}}async function Oe(e){const{environment:t,nextLocation:o,userId:n,doNotRedirect:i,logoutOrigin:r}=e;n?await C().callApi({eventName:"logout",environment:t,data:{userId:n,logoutOrigin:r}}):await C().callApi({eventName:"logout",environment:t,data:{logoutOrigin:r}}),await ke(t),M().clearGoogleAuthCookies(),M().refreshAll({includeFocusedWindow:!1}),i||(window.location.href=o||p()._j.root)}async function Ze(e){const{environment:t,isNewSignup:o,userId:n,redirectURL:r,previousPersistedUserId:a,frontPathName:l,webBrowserDeviceId:d,passcodeEnterMethod:m,showInvitationVersion:g,loginTimeMetric:v}=e,h=window.top!==window.self&&me().default.checkGate({gateName:"marketing_signup_front_app"});h&&window.parent.postMessage({loginSuccess:!0},window.location.origin);let _=p()._j.root;o?E().j({message:we.signupPendingMessage}):((0,_e().pV)()&&re().Z.setState({open:!0,isExistingUser:!0}),E().j({message:we.loginPendingMessage}));try{var b,k,T;const E=be().kH(t);U().LK(t),t.device.isElectron&&(M().clearBrowserHistory(),M().refreshAll({includeFocusedWindow:!1}));const D=me().default.checkGate({gateName:"enable_oauth_from_desktop_ux_v2"}),L=(0,f().r4)({config:D?Z().default:void 0,fileHostProtocol:Z().default.secureFileConfig.protocol,fileHostName:Z().default.secureFileConfig.hostname});if(a&&a!==n){const e=await fe().transactionQueue.getTotalNumberOfTasks();e>5&&c().log({level:"warning",from:"loginActions",type:"setLoggedInUserId",data:{userId:n,currentUserId:a,clearedTransactionCount:e}}),await ke(t,E,!t.currentUser.loggedInUserIds.includes(a))}if(!a){const e=R().qd(void 0);R().nM({currentUserId:n,blockId:e}),R().nM({currentUserId:void 0,blockId:void 0})}const O=await ze(t,n);if(Se().lJ(O,{is_new_signup:o,login_method:e.loginMethod,front_pathname:l}),o){I().ie(O,{user_id:n,tags:(0,f().mM)(),origin_initial_page:V().getInitialPage(n)});const t=await(0,z().of)(O),i=(0,j().d)();await(0,y().OI)(200,C().initializeUserAnalyticsEmptySync(O,{isNewSignup:o,analyticsProperties:(0,s().Z)({...(0,z().Ts)(),...(0,z().eR)(),...(0,Q().getMobileNativeDeviceInfo)(),...t,experiments:me().default.getExperimentsMap(),login_method:e.loginMethod,signup_from:t.route_name,front_pathname:l,web_browser_device_id:d,passcode_enter_method:m,is_form_signup:i},"ignore-class-instances")}))}else f().YA();let K=r;K||"other"!==(null==L?void 0:L.type)||(K=L.result,(0,f().Rq)());const H=f().NT();let W;if(H&&!o&&(F().bo(H.formResponseId,H.formSecretKey,H.formSpaceId),f().Oi()),K&&(W=u().parseRoute({url:K,isMobile:O.device.isMobile,baseUrl:Z().default.domainBaseUrl,publicDomainName:Z().default.publicDomainName,protocol:Z().default.protocol,currentUrl:window.location.href})),W)if("space"===W.name||"page"===W.name&&!W.shouldDuplicate)B().nr({route:W,userId:n,spaceId:W.spaceId});else if(W&&"oauthAuthorization"===W.name){const{responseType:e,redirectUri:t,integrationId:o,state:n,owner:i,userId:r,spaceId:a}=W;(0,f().In)({responseType:e,redirectUri:t,integrationId:o,state:n,owner:i,userId:r,spaceId:a})}const G=me().default.checkGate({gateName:"login_delay_app_reset"});var P;if(G||x().mc(O),A().mc(),await A().Yh(O),await(0,y().OI)(2e3,A()._c(O)),o)me().default.logEvent("sign_up",void 0,{login_method:e.loginMethod,device_type:t.device.deviceType,redirect_route_name:null===(P=W)||void 0===P?void 0:P.name}),me().default.logEvent("sign_up_by_login_method",e.loginMethod),me().default.logEvent("sign_up_by_device_type",t.device.deviceType);if(Se().wt(O,{is_new_signup:o,login_method:e.loginMethod,logged_in_user_ids:O.currentUser.loggedInUserIds.map((e=>(0,S().F9)(e))),most_recent_user_id:(0,S().F9)(n),web_browser_device_id:d,passcode_enter_method:m,userId:n}),v&&ae().default.measure(v,{environment:O}),i().j({device:O.device,event:{facebook:{eventName:"ViewContent"},google:{eventName:"loggedIn"}},cookieService:t.cookieService}),h&&window.parent.postMessage({loginAnalyticsFinished:!0},window.location.origin),Z().default.isAdminMode){if(!(await q().getGhostAdminUserId(t)))return _="/__admin",void N().c4({environment:t,url:_})}const $=!(null===(b=K)||void 0===b||!b.startsWith(`${Z().default.mail.domainBaseUrl}/`)),Y=t.device.isElectronMail,J=!(null===(k=K)||void 0===k||!k.startsWith(`${Z().default.calendar.domainBaseUrl}/`))||!(null===(T=K)||void 0===T||!T.startsWith(`${Z().default.domainBaseUrl}/calendarAuth/`));if("oauth"===(null==L?void 0:L.type)||"file"===(null==L?void 0:L.type)||"global_oauth"===(null==L?void 0:L.type))(0,f().Rq)(),null!=L&&L.result&&(await fe().transactionQueue.drain(),_=null==L?void 0:L.result,je({environment:O,reload:!0,url:_,shouldDelayAppReset:G}));else if(!E&&a&&a!==n)_=p()._j.root,je({environment:O,reload:!0,url:_,shouldDelayAppReset:G});else if(o)g?(_=p()._j.onboarding,je({environment:O,url:_,shouldDelayAppReset:G})):(_=p()._j.root,je({environment:O,url:_,shouldDelayAppReset:G}));else if(!K||!W||$||J||Y||!(0,w().qg)(p().VP,W.name)&&"page"!==W.name&&"samlAuthCallback"!==t.RouterStore.state.initialRoute.name&&"passkeyAuthCallback"!==t.RouterStore.state.initialRoute.name)if(K&&$)_=`${K}#activeUserID=${n}`,je({environment:O,url:_,shouldDelayAppReset:G});else if(K&&J||"calendar"===f().cr()&&!o)await fe().transactionQueue.drain(),await(0,oe().B9)({environment:O,url:`${Z().default.domainBaseUrl}/calendarAuth/`,from:"handleLoginSuccessRedirect",targetSelf:!0}),f().UK();else if(K&&Y&&("googleAuthCallback"===t.RouterStore.state.route.name||"appleAuthCallback"===t.RouterStore.state.route.name||"samlAuthCallback"===t.RouterStore.state.route.name||"passkeyAuthCallback"===t.RouterStore.state.route.name))_=`${K}#activeUserID=${n}`,je({environment:O,url:_,shouldDelayAppReset:G});else if("mail"!==f().cr()||o){_=(0,f().sC)()??p()._j.root,je({environment:O,url:_,shouldDelayAppReset:G}),(0,f().CV)()}else await fe().transactionQueue.drain(),await(0,ne().h)({environment:O,from:"handleLoginSuccessRedirect",targetSelf:!0});else _=K,je({environment:O,url:_,shouldDelayAppReset:G})}finally{E().x(),h&&window.parent.postMessage({loginActionsFinished:!0,redirectPath:_},window.location.origin)}}function je(e){const{environment:t,url:o,reload:n,shouldDelayAppReset:i}=e;n?window.location.href=o:(i&&x().mc(t),N().c4({environment:t,url:o}))}function Ke(e){const{loginStore:t,userId:o}=e,n=new(ge().U6)(e.environment,{table:m().KJ,id:o},{userId:o});t.setState({...t.state,settings:e.mfaSettings,loginType:"mfa",redirectURL:e.redirectURL,previousPersistedUserId:e.previousPersistedUserId,userStore:n})}async function ze(e,t){await async function(e,t){await He(e,t)}(e,t);let o=[t];const i=await(0,G().p)(e);i&&(i.push(t),o=_().jj(i));const r=await q().getGhostAdminUserId(e),a={...e,currentUser:new(n().CurrentUser)({id:t,loggedInUserIds:o,adminUserId:r})};if(e.updateCurrentUserId){const n={environment:e,currentUserId:t,userIds:o};await e.updateCurrentUserId(n)}return a.device.isFirefox||X().lr(),a}async function He(e,t){const o=await(0,G().p)(e);o&&!o.includes(t)||g().Z.set(G().S,t)}async function qe(e){const t=await(0,G().loadCurrentUserId)(e),{mobileNative:o}=e;if(o&&o.sqliteConnection)try{await ce().y6(o.sqliteConnection,t||h().I)}catch(n){c().log({level:"error",from:"loginAction.ts",type:"backfillRecordsWithUserId",error:(0,b().Ui)(n),data:{}})}return t?await ze(e,t):e}async function We(){var e;const{currentUserStore:t}=ue().default.state;if(!t)return!1;if(!t.getEmail())return!1;const{currentUserSettingsStore:o}=ue().default.state;return!!o&&(await o.load(),Boolean(null===(e=o.getSettings())||void 0===e?void 0:e.should_set_password_on_login))}async function Ge(e){const{currentUserStore:t}=ue().default.state;if(!t)return!1;const o=t.getEmail();if(!o)return!1;const n=await Y().c({environment:e,userEmail:o});if(n.error)throw n.error;return!n.value.isSamlEnforced&&!n.value.hasPassword&&!n.value.didLogInWithSaml}async function $e(e){var t;const o=null===(t=ue().default.state.currentSpaceStore)||void 0===t?void 0:t.id;if(!o)return!1;const n=await pe().Z.awaitData(e,{spaceId:o});return"student"===(0,v().zt)(null==n?void 0:n.subscription)}async function Qe(e,t){var o,n;if("saml_sso_required"===(null===(o=t.body.clientData)||void 0===o?void 0:o.type)&&null!==(n=t.body.clientData)&&void 0!==n&&n.redirectUrl){await Je(2e3);Be(e,t.body.clientData.redirectUrl)}}function Ye(e,t){if((0,d().Jx)(t.body)&&"email_verification_required"===t.body.clientData.type){const{email:o,thirdPartyToken:n}=t.body.clientData;return ee().Z.setState({...ee().Z.state,loginType:"microsoft_login",email:o,thirdPartyToken:n,needsSendTemporaryPasswordReason:"microsoft_login_verification"}),N().navigateOnBaseUrl({environment:e,url:p()._j.login}),!0}return!1}async function Je(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;E().j({message:we.redirectSamlMessage}),await(0,y().Vs)(e),E().x()}},846441:(e,t,o)=>{o.d(t,{Be:()=>c,TR:()=>_,V_:()=>m,WA:()=>b,XM:()=>u,_5:()=>p,ag:()=>d,lJ:()=>g,nk:()=>h,wt:()=>v,z_:()=>l});var n=()=>o(863119),i=()=>o(462928),r=()=>o(594546),a=()=>o(749826);function s(e,t){r().K4(e,t)}function l(e){s(e,"request_login_with_apple"),f(e,"login-with-apple")}function c(e){s(e,"request_login_with_google"),f(e,"login-with-google")}function d(e){s(e,"request_login_with_microsoft"),f(e,"login-with-microsoft")}function u(e){s(e,"request_login_with_google_onetap"),f(e,"login-with-google-onetap")}function p(e){s(e,"send_temporary_password"),f(e,"temporary-passcode")}function m(e){s(e,"redirect_to_saml_login"),f(e,"saml")}function f(e,t){r().j({environment:e,event:{eventName:"login_attempt",eventProperties:{login_method:t}}}),a().default.logEvent("login_attempt",t,{})}function g(e,t){i().o7(e,"signup_login_button_clicked",t),a().default.logEvent("signup_login_button_clicked",t.login_method,t)}function v(e,t){r().K4(e,"login_success",t,{dontWait:!0}),n().wt(e),a().default.logEvent("login_success",t.login_method,{...t,device_type:e.device.deviceType})}function h(e,t){const{isBannedGoogleSSOUserAgent:o,isSignup:r}=t;i().o7(e,"onboarding_landing_page",{is_banned_google_sso_user_agent:o,is_signup:r,isPerfmarkTrialSignup:t.isPerfmarkTrialSignup}),r&&n().T1(e)}function _(e,t){const{actionType:o,isSignup:n}=t;r().K4(e,"google_one_tap_login_button_click",{is_signup:Boolean(n),action_type:o},{dontWait:!0})}function b(e,t){r().lu(e,"login_email_input_updates","login_email_input_updates",1)}},594723:(e,t,o)=>{o.d(t,{$O:()=>m,S4:()=>c,ex:()=>p,kH:()=>l,qh:()=>u,qr:()=>f,u$:()=>g,xf:()=>v});var n=()=>o(146947),i=()=>o(836273),r=()=>o(282017),a=()=>o(274879),s=()=>o(749826);function l(e){const{mobileNative:t}=e;if(t){const o=Boolean(t.sqliteConnection),n=a().canSetCookie(e);return o&&n}return!0}function c(e){return"en-US"===n().locale&&(e.device.isElectron&&s().default.checkGate({gateName:"desktop_app_signup_hide_passcode"})||e.device.isMobileNative&&e.device.isIOS&&s().default.checkGate({gateName:"ios_app_signup_hide_passcode"}))}function d(){return s().default.checkGate({gateName:"mail_signup_flow"})}function u(){const e=h();return e===i()._j.signupMail||e===i()._j.loginMail}function p(){return u()&&!d()}function m(){return u()&&d()}function f(){const e=h();return e===i()._j.signupCalendar||e===i()._j.loginCalendar}function g(){return f()&&s().default.checkGate({gateName:"calendar_auth_mmvp"})}function v(){m()?r().ZP("mail"):g()&&r().ZP("calendar")}function h(){return window.location.pathname.endsWith("/")?window.location.pathname.slice(0,window.location.pathname.length-1):window.location.pathname}},274328:(e,t,o)=>{o.d(t,{Z:()=>n});const n=new(o(279174).Z)},210673:(e,t,o)=>{o.d(t,{default:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{}}}const i=new n},291550:(e,t,o)=>{o.d(t,{Z:()=>r,v:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1}}}const i=new n,r=n},279174:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{loginType:"email",email:"",password:"",showPassword:!1,signUpLinkSent:!1,hiddenPasscode:!1,forceAdminSamlLogin:!1}}isGoogle(){return"google"===this.state.loginType}isEmail(){return"email"===this.state.loginType}isReverifying(){return"reverify"===this.state.loginType}isTemporaryPasscode(){return"temporary"===this.state.loginType}isExclusiveLoginLinkTemporaryPasscode(){return"temporary"===this.state.loginType&&Boolean(this.state.hiddenPasscode)}isPassword(){return"password"===this.state.loginType}isForgotPassword(){return"forgot"===this.state.loginType}isPasswordResetSent(){return"reset"===this.state.loginType}isSaml(){return"saml"===this.state.loginType}isMfa(){return"mfa"===this.state.loginType}isMicrosoftLogin(){return"microsoft_login"===this.state.loginType}isMicrosoftVerification(){return"microsoft_verification"===this.state.loginType}isTemporaryPasscodeOrMicrosoftVerification(){return"temporary"===this.state.loginType||"microsoft_verification"===this.state.loginType}}const i=n},791642:(e,t,o)=>{o.d(t,{N9:()=>v,Qj:()=>g,V0:()=>f,bR:()=>_,fo:()=>C,iw:()=>x,jO:()=>S,kq:()=>m,l3:()=>h,xy:()=>w,zh:()=>k});o(267602),o(653476),o(241792);var n=()=>o(741633),i=()=>o(346249),r=()=>o(8101),a=()=>o(824462),s=()=>o(497065),l=()=>o(234049),c=()=>o(594546),d=()=>o(749826),u=()=>o(473147);const p=6,m=12,f=12;async function g(e){const{environment:t,locale:o,includeCreator:i,includeCategories:r,userIntent:s,currentSpaceId:l}=e,c=await a().callApi({eventName:"inAppGetTemplates",environment:t,data:{locale:o,limit:p,featured:!0,includeCreator:i,includeCategories:r,userIntent:s,isMobile:t.device.isMobile},headers:(0,n().Bb)({spaceId:l})});return"success"===c.type&&c.data.success?c.data.templates:[]}async function v(e){const{environment:t,locale:o,slug:i,includeCreator:r,includeCategories:s,includeAllLocales:l,acquisitionDestinationId:c,currentSpaceId:d}=e,u=await a().callApi({eventName:"inAppGetTemplateBySlug",environment:t,data:{locale:o,slug:i,includeCreator:r,includeCategories:s,includeAllLocales:l,acquisitionDestinationId:c},headers:(0,n().Bb)({spaceId:d})});if("success"===u.type&&u.data.success){return{...u.data.template,creator:u.data.creator,categories:u.data.categories,allLocales:u.data.allLocales}}}async function h(e){const{environment:t,locale:o,id:i,includeCreator:r,includeCategories:s,currentSpaceId:l}=e,c=await a().callApi({eventName:"inAppGetTemplates",environment:t,data:{locale:o,limit:1,filterBy:{ids:[i]},includeCreator:r,includeCategories:s},headers:(0,n().Bb)({spaceId:l})});if("success"===c.type&&c.data.success){const e=c.data.templates[0];return{...e,creator:e.creator,categories:e.categories}}}async function _(e){const{environment:t,locale:o,creatorContentfulId:i,includeCreator:r,includeCategories:s,offset:l,limit:c=m,excludePinnedTemplates:d,contentfulIds:u,currentSpaceId:p}=e,f=await a().callApi({eventName:"inAppGetTemplates",environment:t,data:{locale:o,limit:c,orderBy:"popular",filterBy:{creatorId:i,excludePinnedTemplates:d,contentfulIds:u},offset:l,includeCreator:r,includeCategories:s,includeCount:!0},headers:(0,n().Bb)({spaceId:p})});return"success"===f.type&&f.data.success?{templates:f.data.templates,count:f.data.count}:{templates:[],count:0}}function b(e){return 2===e.length||null==e?void 0:e[0]}function y(e){return 2===e.length||null==e?void 0:e[0]}async function S(e){const{environment:t,locale:o,hasAllCategories:i,offset:r,hasAnyCategories:s,includeCreator:l,hasAtLeastOneCategoryPerGroup:c,madeBy:d,orderBy:u,paid:p,locales:m,excludeContentfulIds:g,currentSpaceId:v}=e,h=await a().callApi({eventName:"inAppGetTemplates",environment:t,data:{locale:o,limit:f,filterBy:{hasAllCategories:i,hasAnyCategories:s,hasAtLeastOneCategoryPerGroup:c,excludeContentfulIds:g,madeBy:b(d),paid:y(p)},orderBy:u,offset:r,excludeDefaultLocale:"user_locale"===m,includeCreator:l,includeCount:!0,isMobile:t.device.isMobile},headers:(0,n().Bb)({spaceId:v})});return"success"===h.type&&h.data.success?{templates:h.data.templates,count:h.data.count}:{templates:[],count:0}}function w(e){const{environment:t,template:o}=e,n={product_type:"template",is_paid:(0,i().ZI)(o),template_id:o.id};(0,c().j)({environment:t,event:{eventName:"marketplace_external_link_click",eventProperties:n}}),d().default.logEvent("marketplace_external_link_click",1,n),window.open(o.attributes.purchase_url)}function k(e){const{environment:t,slug:o,openInNewTab:n,makeTabActive:i,route:r,creator:a}=e;s().c4({environment:t,url:(0,u().aD)(o,r,a),makeTabActive:Boolean(i),...n&&{openInNew:"tab"}})}const I=100;async function C(e){const{environment:t,locale:o,contentfulIds:i,includeCreator:r,limit:s}=e,l=await a().callApi({eventName:"inAppGetTemplates",environment:t,data:{filterBy:{contentfulIds:i},locale:o,limit:s??I,includeCreator:r},headers:(0,n().Bb)({spaceId:void 0})});if("success"===l.type&&l.data.success){const e=new Map;for(const t of l.data.templates)e.set(t.contentful_id,t);return i.map((t=>e.get(t))).filter((e=>void 0!==e))}return[]}async function x(e){const{environment:t,template:o,templateBlockStore:n,currentSpaceStore:a,currentSpaceViewStore:s,teamStore:d,duplicationStartedToastProps:u={},duplicationFinishedToastProps:p={},isEmailShared:m,from:f="inApp",isMobile:g=!1}=e,v=Date.now(),h=await(0,l().JI)({environment:t,blockStore:n,spaceStore:a,spaceViewStore:s,teamStore:d,from:f,templateId:o.id,duplicationStartedToastProps:u,duplicationFinishedToastProps:p,isEmailShared:m,isMobile:g}),_=Date.now()-v;r().en(t,{destination:d?"team":"private",template_block_id:o.block_id,template_duplication_duration_ms:_,team_id:null==d?void 0:d.id,created_page_id:null==h?void 0:h.id}),r().HU(t,{from:e.from||"notion_in_app_template_gallery",is_paid:(0,i().ZI)(o),is_first_party:(0,i().e_)(o),template_block_id:o.block_id,template_id:o.id,public_template_name:o.name}),(0,c().j)({environment:t,event:{eventName:"marketplace_installation_attempt",eventProperties:{product_type:"template",product_id:o.id,block_id:o.block_id,is_paid:(0,i().ZI)(o),is_first_party:(0,i().e_)(o)}}})}},957861:(e,t,o)=>{o.d(t,{Z:()=>i});o(821057);var n=()=>o(66077);const i=new class{constructor(){this.pendingEvictions=void 0,this.environmentProvider=void 0,this.environmentProvider=()=>{throw new Error("Environment not ready")},this.pendingEvictions=new Map}getPendingEvictionCount(){return this.pendingEvictions.size}updateEnvironment(e){this.environmentProvider=()=>e}addToPendingEvictions(e,t){const o=(0,n().R)(e),i={...e,timestamp:t};this.pendingEvictions.set(o,i)}removeFromPendingEvictions(e){this.pendingEvictions.delete((0,n().R)(e))}forEachPendingEviction(e){for(const{pointer:t,userId:o,timestamp:n}of this.pendingEvictions.values())e({userId:o,pointer:t,timestamp:n,environment:this.environmentProvider()})}}},560038:(e,t,o)=>{o.d(t,{Z:()=>i});o(821057);var n=()=>o(66077);const i=new class{constructor(){this.subscribedRecords=void 0,this.pendingUnsubscribeRecords=void 0,this.environmentProvider=void 0,this.environmentProvider=()=>{throw new Error("Environment not ready")},this.subscribedRecords=new Map,this.pendingUnsubscribeRecords=new Map}getPendingUnsubscribeCount(){return this.pendingUnsubscribeRecords.size}updateEnvironment(e){this.environmentProvider=()=>e}getSubscriptionForRecord(e){return this.subscribedRecords.get((0,n().R)(e))}isSubscribedToRecord(e){const t=this.subscribedRecords.get((0,n().R)(e));return Boolean(t)}addToSubscribedRecords(e){const t=(0,n().R)(e),o={...e};this.subscribedRecords.set(t,o)}removeFromSubscribedRecords(e){const t=(0,n().R)(e);this.subscribedRecords.delete(t)}addToPendingUnsubscribeRecords(e,t){const o=(0,n().R)(e),i={...e,timestamp:t};this.pendingUnsubscribeRecords.set(o,i)}removeFromPendingUnsubscribeRecords(e){this.pendingUnsubscribeRecords.delete((0,n().R)(e))}forEachPendingUnsubscribeRecord(e){for(const{pointer:t,userId:o,timestamp:n}of this.pendingUnsubscribeRecords.values())e({userId:o,pointer:t,timestamp:n,environment:this.environmentProvider()})}reset(){this.subscribedRecords=new Map,this.pendingUnsubscribeRecords=new Map}safelyGetEnvironment(){try{return this.environmentProvider()}catch(e){return}}getSubscribedBlockDebuggingData(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.safelyGetEnvironment();if(!t)return;const n={loadedBlockTypes:{},loaded:0,notLoaded:0};for(const[i,r]of this.subscribedRecords.entries())if((e||!this.pendingUnsubscribeRecords.has(i))&&r.pointer.table===o(396136).iU){const e=t.defaultRecordCache.inMemoryRecordCache.getRecord(r);if(e&&e.value){const t=e.value.type;t in n.loadedBlockTypes||(n.loadedBlockTypes[t]=0),n.loadedBlockTypes[t]+=1,n.loaded+=1}else n.notLoaded+=1}return n}}},977481:(e,t,o)=>{o.r(t),o.d(t,{isConnected:()=>r().Mb,isConnecting:()=>r().J9,resetRecordSubscriptions:()=>a,updateEnvironment:()=>s});var n=()=>o(957861),i=()=>o(560038),r=()=>o(97331);function a(){i().Z.reset()}function s(e){i().Z.updateEnvironment(e),n().Z.updateEnvironment(e)}},97331:(e,t,o)=>{o.d(t,{vj:()=>Ee,mb:()=>F,cO:()=>Ae,C$:()=>N,EM:()=>he,ZN:()=>_e,Tm:()=>ve,gE:()=>be,Mb:()=>de,J9:()=>ue,id:()=>pe,Ap:()=>Be,eg:()=>De,Tg:()=>xe,Ji:()=>Pe,Ld:()=>Fe,hd:()=>Ue,r1:()=>Ve,L4:()=>Me,g4:()=>me});o(821057),o(670560),o(267602),o(653476),o(470928),o(30005),o(241792);var n=()=>o(799891),i=()=>o(956057),r=(o(228244),()=>o(79179)),a=()=>o(839002),s=()=>o(158418);const l=class{constructor(e){this.performRequests=void 0,this.batchSize=void 0,this.maxWorkers=void 0,this.maxDelayMs=void 0,this.timeSource=void 0,this.queue=[],this.workerTasks=new Map,this.nextWorkerId=0,this.currentWorkers=0,this.requestsRunning=0,this.awaitingTimeout=!1,this.dequeue=async()=>{if(this.currentWorkers>=this.maxWorkers||0===this.queue.length)return;const e=this.nextWorkerId;this.nextWorkerId++,this.currentWorkers++;const t=this.queue.splice(0,this.batchSize),n=t.map((e=>e[0]));let i,r;this.workerTasks.set(e,t),this.requestsRunning+=t.length;try{i=await this.performRequests(n)}catch(a){r=(0,o(720866).t)(a)}try{if(r)for(let e=0;e<t.length;e++){t[e][1].reject(r)}else if(i)for(let e=0;e<t.length;e++){const o=t[e],n=i[e];o[1].resolve(n)}}catch(a){}this.currentWorkers--,this.workerTasks.delete(e),this.requestsRunning-=t.length,this.dequeueAfterFilledBatchOrTimeout()};const{performRequests:t,batchSize:n,maxWorkers:i,maxDelayMs:r}=e;this.performRequests=t,this.batchSize=n,this.maxWorkers=i,this.maxDelayMs=r,this.timeSource=s().O}getStats(){return{queue:this.queue.length,running:this.requestsRunning,workers:this.currentWorkers}}updateTimeSource(e){this.timeSource=e}updateBatchSize(e){this.batchSize=e}updateMaxDelayMs(e){this.maxDelayMs=e}updateMaxWorkers(e){this.maxWorkers=e,this.dequeueAfterFilledBatchOrTimeout()}enqueue(e){const t=a().UZ();return this.queue.push([e,t]),this.dequeueAfterFilledBatchOrTimeout(),(0,r().m)({promise:t.promise,canCancel:()=>this.queue.some((e=>e[1]===t)),cancel:e=>{const o=this.queue.findIndex((e=>e[1]===t));o>=0&&(this.queue.splice(o,1),t.reject(e))}})}dequeueAfterFilledBatchOrTimeout(){this.queue.length>=this.batchSize?this.dequeue():this.awaitingTimeout||(this.awaitingTimeout=!0,this.timeSource.setTimeout((()=>{this.awaitingTimeout=!1,this.dequeue()}),this.maxDelayMs))}cancel(){const e=this.workerTasks,t=this.queue;this.workerTasks=new Map,this.queue=[];for(const o of e.values())for(const e of o)e[1].reject(new Error("CanceledTask."));for(const o of t)o[1].reject(new Error("CanceledTask."))}};var c=()=>o(370590),d=()=>o(183922),u=()=>o(680146),p=()=>o(513670),m=()=>o(792409),f=()=>o(326966),g=()=>o(957042),v=()=>o(594546),h=()=>o(749826),_=()=>o(378698);var b=()=>o(205228),y=()=>o(620218),S=()=>o(804217);const w=window.location.host.endsWith(b().default.publicDomainName);var k=()=>o(492788);function I(e,t){k().default.afterNextFlush((()=>{h().default.checkGate({gateName:"message_store_client_send_request_metric_enabled"})&&v().K4(e,"message_store.client.send_request",t)}))}const C=async()=>Promise.all([o.e(52183),o.e(87168)]).then(o.bind(o,329461)),x=!1,T=90*f().C0,M=.5*f().C0,P=30*f().C0,A=3e3,R=10*f().C0,B={versions:!0,collection:!0,activity:!0,notification:!0,teams_in_space:!0,user_page_visit:!0,backlinks:!0,user_content:!0,page_visit:!0,user_shared_pages_in_space:!0,presence:!0,user_joined_teams_in_space:!0,teams_migration_completed_in_space:!0,diagnosticPing:!0,_other:!0};function E(e){const t=e.indexOf("/");if(-1===t)return"_other";const o=e.substring(0,t);return o in B?o:"_other"}function D(e,t){var o;const n=E(t),i=null===(o=(0,d().pz)(t))||void 0===o?void 0:o.table,r=e[n];if(r){if(i){const e=r[i];if(!e)return void Qe(`Warning: "${n}.${i}" has no existing counters!`);r[i]=e-1}r._total-=1,e._total-=1}else Qe(`Warning: "${n}" has no existing counters!`)}function U(e){return{_id:e,charactersSent:0,requestsSent:0,requestsTimedOut:0,responsesReceivedWithoutHandlers:0,successfulResponsesReceived:0,unsuccessfulResponsesReceived:0,invalidMessagesReceived:0,notificationsReceived:0,messagesReceived:0}}function F(){return{...ie}}function N(e){const t=ie;if(e._id===t._id)return{charactersSent:t.charactersSent-e.charactersSent,requestsSent:t.requestsSent-e.requestsSent,requestsTimedOut:t.requestsTimedOut-e.requestsTimedOut,responsesReceivedWithoutHandlers:t.responsesReceivedWithoutHandlers-e.responsesReceivedWithoutHandlers,successfulResponsesReceived:t.successfulResponsesReceived-e.successfulResponsesReceived,unsuccessfulResponsesReceived:t.unsuccessfulResponsesReceived-e.unsuccessfulResponsesReceived,invalidMessagesReceived:t.invalidMessagesReceived-e.invalidMessagesReceived,notificationsReceived:t.notificationsReceived-e.notificationsReceived,messagesReceived:t.messagesReceived-e.messagesReceived}}const V=new Map,L=new Map;class O extends Map{isCancelable(e){return Boolean(this.getCancelable(e))}getCancelable(e){const t=this.get(e);if(null!=t&&t.canCancel())return t}}const Z=new O,j=new O,K=new Map,z=new Map,H=Date.now();let q={_total:0};const W="messageStoreInternals",G=new(n().BatchedLogger)({from:W,type:"BulkDebug",level:"info",maxLength:250,logToConsole:x});let $,Q,Y,J,X,ee=0,te=0,oe=0,ne=0,ie=U(0),re=0,ae=s().O,se=!1,le="uninitialized",ce=!0;function de(){return"open"===le}function ue(){return"uninitialized"===le||"opening"===le}const pe=!0;function me(e,t){let o=z.get(e);o||(o={},z.set(e,o)),Object.assign(o,t)}function fe(e){G.log({level:"info",from:W,type:e})}function ge(){Q=we(this),fe(`ping:${Q}`),$=Date.now(),Qe(`Incoming primus ping received from server via ${Q}.`)}function ve(){return q}function he(){return{...Le.getStats(),batchSubscribeQueue:Ze.getStats(),batchUnsubscribeQueue:je.getStats()}}function _e(e){const{lastOfflineTimestamp:t}=S().default.getState(),o=he(),{batchSubscribeQueue:n,batchUnsubscribeQueue:i}=o;return{currentConnectionCounters:ie,timeSinceLastIncomingPing:$&&e-$,lastIncomingPingTransportType:Q,timeSinceLastResponseReceived:Y&&e-Y,timeSinceLastReadyStateChange:J&&e-J,timeSinceLastOffline:t&&e-t,largestMessageSize:re||void 0,messageStoreRequestsQueued:o.queue,messageStoreRequestsRunning:o.running,batchSubscribeQueue:n,batchUnsubscribeQueue:i,messageStoreConnectionState:le,uptime:e-H,subscriptionCounters:q,primusEndEventsReceived:te,primusErrorEventsReceived:oe,connectionResetsDueToFailedRequests:ne}}function be(){const e=[];L.forEach(((t,o,n)=>{const i=(0,d().pz)(o);i&&t.value&&e.push({id:i.id,table:i.table,version:t.value})}));const t=p().vM(e,(e=>e.table)),o={};return Object.entries(t).map((e=>{let[t,o]=e;const n={};return o.forEach((e=>{n[e.id]=e.version})),{table:t,value:n}})).forEach((e=>{o[e.table]=e.value})),o}function ye(e){switch(G.log({level:"info",from:W,type:"readyStateChange",data:{message:e}}),J=Date.now(),e){case"end":le="closed";break;case"open":le="open";break;case"opening":le="opening"}}const Se=p().HP((e=>async function(e){if(w)return;ee+=1;const{createClient:t}=await C(),r=h().default.getConfigKey("message_store_client_config","min_reconnect_delay_secs"),a=h().default.getConfigKey("message_store_client_config","max_reconnect_delay_secs"),s=t({minReconnectDelayMs:r*f().C0,maxReconnectDelayMs:a*f().C0});return s.on("data",(t=>function(e,t){ie.messagesReceived+=1;const o=(0,g().Gu)(c().yx,e);if(o)return ie.invalidMessagesReceived+=1,void n().rateLimitedLog({level:"warning",from:W,type:"ValidationError",data:{miscDataToConvertToString:e},error:(0,m().Ui)(o)});const r=e;if("response"===r.type){var a;const{requestId:e,status:t,result:o}=r,n=K.get(e);if(K.delete(e),G.log({level:"info",from:W,type:"responseReceived",data:{requestId:e,response:t,time:n&&Date.now()-n.sendTime,internalProcessingTimeMs:null===(a=r.result)||void 0===a?void 0:a.internalProcessingTimeMs}}),!n)return void(ie.responsesReceivedWithoutHandlers+=1);Y=Date.now(),window.clearTimeout(n.timeout),"ok"===t?(ie.successfulResponsesReceived+=1,n.resolve(o)):(ie.unsuccessfulResponsesReceived+=1,n.reject(new $e(o)))}else{ie.notificationsReceived+=1;const{ackId:e,key:o,value:a,version:l,passThroughData:c}=r;e&&async function(e){if(w)return;const{method:t,request:o,environment:n}=e,r=await We(n);(function(e,t){k().default.afterNextFlush((()=>{h().default.checkGate({gateName:"send_request_ack_metric_enabled"})&&v().j({environment:e,event:{eventName:"message_store.client.send_request_ack",eventProperties:t}})}))})(n,{primus_transport_type:r}),Le.enqueue((()=>(Ge({message:{type:`${b().default.messageStore.api}/${t}`,requestId:i().Il(),...o},environment:n}),Promise.resolve({}))))}({method:"ackNotification",request:{ackId:e},environment:t});const d=V.get(o);if(!d)return;L.set(o,{version:l,value:a,passThroughData:c});for(const{listener:t}of d)try{t(o,a,c,l)}catch(s){n().log({level:"warning",from:W,type:"ListenerError",error:(0,m().Ui)(s)})}}}(t,e))),s.on("open",(()=>{fe("open"),function(e){(function(e){const t=_().Z.state.numConnectionAttempts;h().default.checkGate({gateName:"log_messagestore_attempts"})&&(0,v().j)({environment:e,event:{eventName:"message_store.client.num_connection_attempts",eventProperties:{num_connection_attempts:t}}}),_().Z.setState({isConnected:!0,numConnectionAttempts:0})})(e),ie=U(ie._id+1),ce?(ce=!1,ke(e)):(X&&window.clearTimeout(X),X=window.setTimeout((()=>{de()&&ke(e)}),1e3));x&&function(){const e=Date.now(),t=20;function o(){const n=he();function i(e){return 0===e.queue&&0===e.running}if(i(n)&&i(n.batchSubscribeQueue)&&i(n.batchUnsubscribeQueue))return Qe(`Queues emptied after ${Date.now()-e} ms`),void(Ie=void 0);Ie=window.setTimeout(o,t)}Ie&&window.clearTimeout(Ie);Qe("Starting measurement of time until send queues are empty."),o()}()}(e)})),s.on("reconnected",(e=>{Te(),G.log({level:"info",from:W,type:"reconnected",data:{message:`Reconnected in ${null==e?void 0:e.duration} ms`}})})),s.on("reconnect",(()=>{fe("reconnect")})),s.on("reconnect scheduled",(e=>{_().Z.update((e=>({isConnected:!1,numConnectionAttempts:e.numConnectionAttempts+1}))),G.log({level:"info",from:W,type:"reconnect scheduled",data:{message:`Reconnecting in ${null==e?void 0:e.scheduled} ms, attempt ${null==e?void 0:e.attempt} of ${null==e?void 0:e.retries}`}})})),s.on("reconnect timeout",(()=>{fe("reconnect timeout")})),s.on("reconnect failed",(()=>{fe("reconnect failed")})),s.on("timeout",(()=>{fe("timeout")})),s.on("destroy",(()=>{fe("destroy")})),s.on("close",(()=>{fe("close")})),s.on("online",(()=>{fe("online")})),s.on("offline",(()=>{fe("offline")})),s.on("error",(e=>{let t;t="TransportError"===e.type?{level:"info",from:W,type:"primusTransportError",error:(0,m().Ui)(e)}:{level:"error",from:W,type:"unknownPrimusError",error:(0,m().Ui)(e)};(0,o(150266).lB)(1)&&n().rateLimitedLog(t),G.log(t),oe+=1})),s.on("incoming::ping",ge),s.on("readyStateChange",ye),s.on("end",(()=>{fe("end"),s.off("readyStateChange",ye),te+=1,async function(e,t){var o,i;n().log({level:"info",from:W,type:"messageStoreEnd",error:{message:`SocketId: ${null==e||null===(o=e.socket)||void 0===o?void 0:o.id} Query:${null==e||null===(i=e.transport)||void 0===i?void 0:i.query}`}}),X&&(window.clearTimeout(X),X=void 0);Te(),ae.setTimeout((()=>{void 0!==e&&e.destroy()}),0);const r=await Se(t);if(e!==r)return;Se.cache.clear(),ae.setTimeout((()=>{Se(t)}),2*f().C0)}(s,e)})),window.__primusClient=s,s}(e)),(function(){return"primus"}));function we(e){var t;const o=null==e||null===(t=e.socket)||void 0===t||null===(t=t.transport)||void 0===t||null===(t=t.query)||void 0===t?void 0:t.transport;if("websocket"===o||"polling"===o)return o}function ke(e){X&&(window.clearTimeout(X),X=void 0),V.forEach(((t,o)=>{const i=L.get(o);Re(o,i?i.version:-1,e).catch((e=>{n().log({level:"warning",from:W,type:"ReconnectSubscriptionError",error:(0,m().Ui)(e)})}))}))}let Ie,Ce;function xe(e){if(Ce)throw new Error("Having more than one onRestartMessageStoreConnectionHandler is not currently supported");Ce=e}function Te(){var e;se=!1,Ze.cancel(),je.cancel(),function(){for(const e of K.values())window.clearTimeout(e.timeout);K.clear()}(),Z.clear(),j.clear(),Ke.cancel(),Le.cancel(),z.clear(),q={_total:0},null===(e=Ce)||void 0===e||e()}async function Me(e){var t;const{key:o,field:n,updates:i,ttl:r,environment:a,onDisconnectFields:s}=e,l=await We(a);await(null===(t=qe({method:"updateField",request:{key:o,field:n,updates:i,ttl:r,onDisconnectFields:s},environment:a,primusTransportType:l}))||void 0===t?void 0:t.response)}async function Pe(e){var t;const{key:o,field:n,value:i,ttl:r,environment:a}=e,s=await We(a);await(null===(t=qe({method:"setField",request:{key:o,field:n,value:i,ttl:r},environment:a,primusTransportType:s}))||void 0===t?void 0:t.response)}async function Ae(e){if(w)return{type:"messageStoreDisabled"};const t=i().Il(),{environment:o}=e,n=(0,d().JK)(t),r="diagnosticPing",s=a().UZ(),l=e.logToConsole??x,c={};function p(e,t){c[e]=t,l&&console.log(`diagnosticPing ${e}=${t}`)}const m=await a().aM(async function(){var e;const i=await We(o),a=performance.now();await Fe(n,((e,t)=>{t&&s.resolve(performance.now())}),r,o);const l=performance.now(),d=l-a;p("registerSubscriptionResponseMs",d);const u=await(null===(e=qe({method:"diagnosticPing",request:{id:t},environment:o,primusTransportType:i,onRequestSent:()=>{p("diagnosticPingEnqueuedMs",performance.now()-l)}}))||void 0===e?void 0:e.response);if(!u)return{type:"canceled",key:n,...c};const m=function(e){const t=c[e];if(void 0===t)throw new Error(`Assertion failure, expected timing for "${e}" to be defined`);return t}("diagnosticPingEnqueuedMs"),f=u.setValueTime;p("diagnosticPingServerSideSetValueMs",f);const g=performance.now()-l;p("diagnosticPingResponseMs",g);const v=await s.promise-l;p("diagnosticPingNotificationMs",v);const h=performance.now();await Ve(n,r,o);const _=performance.now();return{type:"success",key:n,registerSubscriptionResponseMs:d,diagnosticPingEnqueuedMs:m,diagnosticPingServerSideSetValueMs:f,diagnosticPingResponseMs:g,diagnosticPingNotificationMs:v,unregisterSubscriptionResponseMs:_-h,totalMs:_-a}}().catch((e=>(u().rn(e,{from:W,type:"diagnosticPingError",data:{key:n}}),{type:"error",key:n,...c}))),P);return m.timeout?{type:"timeout",key:n,...c}:m.result}async function Re(e,t,o){pe&&me(e,{latestRegisterSubscriptionRequestTimestamp:Date.now()}),function(e,t){var o;const n=E(t),i=null===(o=(0,d().pz)(t))||void 0===o?void 0:o.table;let r=e[n];if(r||(r={_total:0},e[n]=r),i){const e=r[i]||0;r[i]=e+1}r._total+=1,e._total+=1}(q,e);const n=j.getCancelable(e);if(n)n.cancel(new Error("Cancelled by sendRegisterSubscription()"));else{const n={key:e,version:t},i=Ze.enqueueCancelable({request:n,environment:o});if(i){Z.set(e,i.asyncQueuePromise);try{await i.response}finally{Z.delete(e)}}}pe&&me(e,{latestRegisterSubscriptionResponseTimestamp:Date.now()})}function Be(e){return Z.isCancelable(e)}function Ee(e,t){const o=Z.getCancelable(e);if(!o)throw new Error(`Assertion failure, subscription request for key ${e} does not exist or is not cancelable`);Ne(e,t)&&(D(q,e),o.cancel(new Error("Cancelled by cancelRegisterSubscription()")),pe&&z.delete(e))}async function De(e,t,o){var n;const i=await We(o);await(null===(n=qe({method:"registerOnDisconnect",request:{disconnectId:e,operations:t},environment:o,primusTransportType:i}))||void 0===n?void 0:n.response)}async function Ue(e,t){var o;const n=await We(t);await(null===(o=qe({method:"unregisterOnDisconnect",request:{disconnectId:e},environment:t,primusTransportType:n}))||void 0===o?void 0:o.response)}async function Fe(e,t,o,n){if(w)return;let i=V.get(e);if(!i||0===i.length)return i=[{listener:t,listenerId:o}],V.set(e,i),void(de()?await Re(e,-1,n):"uninitialized"===le&&await Se(n));if(i.find((e=>e.listenerId===o)))i=[...i.filter((e=>e.listenerId!==o)),{listener:t,listenerId:o}],V.set(e,i);else{i=[...i,{listener:t,listenerId:o}],V.set(e,i);const n=L.get(e);n&&t(e,n.value,n.passThroughData)}}function Ne(e,t){if(w)return!1;const o=V.get(e);if(!o)return!1;const n=o.filter((e=>e.listenerId!==t));return n.length!==o.length&&(0===n.length?(V.delete(e),L.delete(e),!0):(V.set(e,n),!1))}async function Ve(e,t,o){Ne(e,t)&&de()&&await async function(e,t){pe&&me(e,{latestUnregisterSubscriptionRequestTimestamp:Date.now()}),D(q,e);const o=Z.getCancelable(e);if(o)o.cancel(new Error("Cancelled by sendUnregisterSubscription()"));else{const o={key:e},n=je.enqueueCancelable({request:o,environment:t});if(n){j.set(e,n.asyncQueuePromise);try{await n.response}finally{j.delete(e)}}}pe&&z.delete(e)}(e,o)}const Le=new(r().z)(20);class Oe{constructor(e,t){this.queue=void 0,this.wrappedPerformRequests=async e=>{const t=e[0].environment;Qe(`Sending a batch of ${e.length} ${this.methodName} requests.`);const o=this.performRequests(t,e.map((e=>e.request)));if(!o)throw new Error("MessageStore is disabled.");const n=await o;if(!n)throw new Error("Request cancelled.");return n},this.methodName=e,this.performRequests=t,this.queue=new l({performRequests:this.wrappedPerformRequests,batchSize:250,maxDelayMs:M,maxWorkers:1})}updateTimeSource(e){this.queue.updateTimeSource(e)}getStats(){return this.queue.getStats()}cancel(){this.queue.cancel()}enqueueCancelable(e){if(w)return;const t=this.queue.enqueue(e),o=t.catch((e=>{Qe(`enqueueCancelable() for ${this.methodName} cancelled (${e.message})`)}));return{asyncQueuePromise:t,response:o}}}const Ze=new Oe("registerSubscription",((e,t)=>Ke.enqueue((async()=>{var o;const n=await We(e),i=qe({method:"registerBatchSubscriptions",request:{subscriptions:t},environment:e,primusTransportType:n});return null===(o=await(null==i?void 0:i.response))||void 0===o?void 0:o.responses})))),je=new Oe("unregisterSubscription",((e,t)=>Ke.enqueue((async()=>{var o;const n=await We(e),i=qe({method:"unregisterBatchSubscriptions",request:{keys:t.map((e=>e.key))},environment:e,primusTransportType:n});return null===(o=await(null==i?void 0:i.response))||void 0===o?void 0:o.keys.map((e=>({key:e})))})))),Ke=new(r().z)(1);let ze;function He(){if(!ze)return;const{totalRequests:e,requestCounts:t,startTime:o}=ze;Qe("checkRequestThroughputForBurstWarning requestCounts =",t),e>A&&n().log({level:"warning",from:W,type:"BurstThroughputExceeded",data:{time:Date.now()-o,totalRequests:e,requestCounts:t}}),ze=void 0}function qe(e){if(w)return;const{method:t,request:o,environment:n,primusTransportType:r}=e,s=y().default.DO_NOT_USE_markLegacy("message_store.client.send_request.in_queue_time");I(n,{status:"enqueued",primus_transport_type:r,endpoint:t}),pe&&function(e){ze||(ze={startTime:Date.now(),totalRequests:0,requestCounts:{}},ae.setTimeout(He,R)),ze.totalRequests+=1,ze.requestCounts[e]=(ze.requestCounts[e]||0)+1}(t);const l=Le.enqueue((()=>{var l;const c=i().Il();!function(e,t){k().default.afterNextFlush((()=>{h().default.checkGate({gateName:"message_store_client_send_request_metric_enabled"})&&(v().K4(e,"message_store.client.send_request.queue_running_size",{value:t.running}),v().K4(e,"message_store.client.send_request.queue_backup_size",{value:t.queue}))}))}(n,Le.getStats());const d=y().default.DO_NOT_USE_markLegacy("message_store.client.send_request.round_trip_time");y().default.DO_NOT_USE_measureLegacy(s,{environment:n,data:{endpoint:t}});const u=a().UZ(),p=Date.now(),m=pe?window.setTimeout((()=>{"open"===le&&(ie.requestsTimedOut+=1,G.log({level:"info",from:W,type:"requestTimeout",data:{requestId:c,time:Date.now()-p}}))}),T):void 0;K.set(c,{resolve:u.resolve,reject:u.reject,timeout:m,sendTime:p}),G.log({level:"info",from:W,type:"requestSent",data:{requestId:c,method:t}});const f={type:`${b().default.messageStore.api}/${t}`,requestId:c,...o};return ie.requestsSent+=1,Ge({message:f,environment:n}),null===(l=e.onRequestSent)||void 0===l||l.call(e),u.promise.then((e=>{y().default.DO_NOT_USE_measureLegacy(d,{environment:n,data:{endpoint:t}}),I(n,{status:"success",primus_transport_type:r,endpoint:t})})).catch((e=>{const o=Le.getStats();I(n,{status:"failure",primus_transport_type:r,endpoint:t,queue_running_size:o.running,queue_backup_size:o.queue})})),u.promise}));return{response:l.catch((e=>{e instanceof $e&&!se?(se=!0,ne+=1,fe("connectionResetDueToFailedRequest"),Se(n).then((e=>{null==e||e.end()})),Qe(`sendRequest() for ${t} returned server error (${e.message}), resetting connection`,o)):Qe(`sendRequest() cancelled or errored for ${t} (${e.message})`,o)})),asyncQueuePromise:l}}async function We(e){const t=await Se(e);if(t){const e=we(t);if(e)return e}return"unknown"}async function Ge(e){const{message:t,environment:o}=e,n=JSON.stringify(t);ie.charactersSent+=n.length,re<n.length&&(re=n.length);const i=await Se(o);null==i||i.write(t)}class $e extends Error{constructor(e){super(e),this.name="FailedMessageStoreRequestError"}}function Qe(){if(x){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];console.info("messageStoreInternals:",...t)}}},635596:(e,t,o)=>{o.d(t,{Qk:()=>l,ZP:()=>s});o(267602),o(653476),o(30005);var n=()=>o(842343),i=()=>o(97331);class r{constructor(){this.uniqueIdCounter=0}addListener(e,t,o,r){if((0,n().Z)(e))return o||(o=this.computeNewSubscriptionId()),i().Ld(e,t,o,r),{key:e,subscriptionId:o}}removeListener(e,t){let{key:o,subscriptionId:r}=e;(0,n().Z)(o)&&i().r1(o,r,t)}async updateField(e,t,o,n,r,a){await i().L4({key:e,field:t,updates:o,ttl:n,environment:r,onDisconnectFields:a})}async setField(e,t,o,n,r){await i().Ji({key:e,field:t,value:o,ttl:n,environment:r})}async onDisconnect(e,t,o,n){const r=`${o}/${e}`;await i().eg(r,t,n)}async clearOnDisconnect(e,t,o){const n=`${t}/${e}`;await i().hd(n,o)}computeNewSubscriptionId(){return this.uniqueIdCounter+=1,`subscription:${this.uniqueIdCounter}`}}class a{constructor(){this.isQueuingListeners=!0,this.queuedListeners=[],this.defaultMessageDispatcher=new r}addListener(e,t,o,n){return this.isQueuingListeners?(o||(o=this.defaultMessageDispatcher.computeNewSubscriptionId()),this.queuedListeners=[...this.queuedListeners.filter((t=>t.key!==e||t.subscriptionId!==o)),{key:e,listener:t,subscriptionId:o}],{key:e,subscriptionId:o}):this.defaultMessageDispatcher.addListener(e,t,o,n)}removeListener(e,t){let{key:o,subscriptionId:n}=e;this.isQueuingListeners?this.queuedListeners=this.queuedListeners.filter((e=>e.key!==o&&e.subscriptionId!==n)):this.defaultMessageDispatcher.removeListener({key:o,subscriptionId:n},t)}updateField(e,t,o,n,i){return Promise.resolve()}setField(e,t,o,n,i){return Promise.resolve()}onDisconnect(e,t,o,n){return Promise.resolve()}clearOnDisconnect(e,t,o){return Promise.resolve()}stopQueueingSubscriptions(e){this.isQueuingListeners&&(this.queuedListeners.forEach((t=>{this.defaultMessageDispatcher.addListener(t.key,t.listener,t.subscriptionId,e)})),this.queuedListeners=[],this.isQueuingListeners=!1)}}const s=window.location.pathname===o(836273).VP.quickSearch?new a:new r;function l(e){let t=!1;return function(){if(t)return e(...arguments);t=!0}}},263168:(e,t,o)=>{o.r(t),o.d(t,{cancelEviction:()=>M,subscribe:()=>x,unsubscribe:()=>B,unsubscribeAfterDelay:()=>U,unsubscribeForAllUsers:()=>A});o(821057);var n=()=>o(492788),i=()=>o(799891),r=()=>o(183922),a=()=>o(842343),s=()=>o(326966),l=()=>o(143346),c=()=>o(749826),d=()=>o(148882),u=(o(670560),o(241792),()=>o(560038)),p=()=>o(97331);const m=!1,f=!1,g=60*s().C0,v=15*s().C0;s().C0;class h{constructor(e){this.map=new Map,this.timeoutMs=e}set(e){const{key:t,onTimeout:o,onClear:n,value:i}=e;this.clear(t);const r=window.setTimeout((()=>{this.map.delete(t),null==o||o()}),this.timeoutMs);this.map.set(t,{timeout:r,value:i,onClear:n})}get(e){var t;return null===(t=this.map.get(e))||void 0===t?void 0:t.value}clear(e){const t=this.map.get(e);var o;void 0!==t&&(window.clearTimeout(t.timeout),this.map.delete(e),null===(o=t.onClear)||void 0===o||o.call(t))}has(e){return this.map.has(e)}}const _=new h(g),b=new h(v);var y=()=>o(957861),S=()=>o(635596);const w="recordSubscriptionActions";function k(e,t,o){const n=r().pz(t);n?null===o||"number"==typeof o?(p().id&&((0,p().g4)(t,{latestUpdateTimestamp:Date.now()}),function(e){if(m&&f)return;const t=_.get(e);t&&(t.latestUpdate=Date.now()),b.clear(e)}(t)),I({environment:e,pointer:n,version:o})):i().rateLimitedLog({level:"warning",from:"handleRemoteVersionUpdate",type:"ValidationError",data:{key:t,miscDataToConvertToString:{pointer:n,version:o}}}):i().rateLimitedLog({level:"warning",from:"handleRemoteVersionUpdate",type:"ValidationError",data:{key:t,miscDataToConvertToString:{version:o}}})}function I(e){const{environment:t,pointer:o,version:n}=e,i=[void 0,...t.currentUser.loggedInUserIds];for(const r of i){if(u().Z.getSubscriptionForRecord({userId:r,pointer:o})){const i=t.defaultRecordCache.inMemoryRecordCache.getVersion({pointer:o,userId:r});if(d().transactionQueue.isPendingTransactionForRecord(o))return void(c().default.checkGate({gateName:"defer_remote_version_update_for_pending_tx"})&&C.deferUntilTransactionIsDone(e));if(c().default.getConfigKey("always_force_refetch_for_specific_tables","tables").includes(o.table))return void l().HB({environment:t,inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,pointer:o,userId:r});(null===n||n>i)&&l().bG({environment:t,inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,pointer:o,userId:r})}}}const C=new class{constructor(e){this.recordUpdates=new Map,this.handleRemoteVersionUpdateForPointer=e}deferUntilTransactionIsDone(e){const{pointer:t,version:n}=e,i=o(827370).dr.toKey(t).toString(),r=this.recordUpdates.get(i);if(r)null===r.version||(null===n||n>r.version)&&this.recordUpdates.set(i,e);else{if(!d().transactionQueue.isPendingTransactionForRecord(t))throw new Error("Pending transaction must exist for record");this.recordUpdates.set(i,e),d().transactionQueue.awaitRecordTransaction(t).then((()=>{const e=(0,o(349220).TO)(this.recordUpdates.get(i),"Pending record update for key must exist");this.recordUpdates.delete(i),this.handleRemoteVersionUpdateForPointer(e)}))}}}(I);function x(e){const{pointer:t,userId:o,environment:i}=e,r={pointer:t,userId:o};T(t)||(M({pointer:t,userId:o}),u().Z.isSubscribedToRecord(r)||(u().Z.addToSubscribedRecords(r),n().default.afterNextFlush((()=>{const n=i.defaultRecordCache.inMemoryRecordCache.getRecord(r);n?P({record:n,...e}):l().bG({environment:i,inMemoryRecordCache:i.defaultRecordCache.inMemoryRecordCache,userId:o,pointer:t}).then((t=>{P({record:t,...e})}),(()=>{u().Z.removeFromSubscribedRecords(r)}))}))))}function T(e){return!e.id||!e.table||("emptyDroppableKey"===e.id||"placeholder"===e.id)}function M(e){const{pointer:t,userId:o}=e,n={pointer:t,userId:o};T(t)||(u().Z.removeFromPendingUnsubscribeRecords(n),y().Z.removeFromPendingEvictions(n))}function P(e){const{environment:t,pointer:o,userId:n,record:s}=e,l={pointer:o,userId:n};if(!u().Z.isSubscribedToRecord(l))return;const c=r().ZS(o);(0,a().Z)(c)&&(o.id&&o.table?S().ZP.addListener(c,((e,o)=>k(t,e,o)),w,t):i().rateLimitedLog({level:"warning",from:"recordSubscriptionActions:subscribe",type:"KeyValidationError",data:{pointer:o,miscDataToConvertToString:{record:s,key:l,versionsKey:c}}}))}function A(e){for(const t of e.environment.currentUser.loggedInUserIds)B({...e,userId:t})}function R(e){const{pointer:t}=e;if(T(t))return!1;if(!u().Z.isSubscribedToRecord(e))return!1;u().Z.removeFromSubscribedRecords(e);const o=r().ZS(t);return!!(0,a().Z)(o)&&(!(!t.id||!t.table)||(i().rateLimitedLog({level:"warning",from:"recordSubscriptionActions:unsubscribe",type:"KeyValidationError",data:{pointer:t,miscDataToConvertToString:{versionsKey:o}}}),!1))}function B(e){const{environment:t}=e;R(e)&&S().ZP.removeListener({key:r().ZS(e.pointer),subscriptionId:w},t)}const E=2*s().hM,D=E;function U(e){const{pointer:t,environment:o,userId:n}=e;if(T(t))return;if(o.defaultRecordCache.inMemoryRecordCache.hasListener(t))return;const i=r().ZS(t);if((0,p().Ap)(i)){const e={pointer:t,userId:n};return y().Z.addToPendingEvictions(e,Date.now()+D),void(R(e)&&(0,p().vj)(i,w))}u().Z.addToPendingUnsubscribeRecords(e,Date.now()+E)}function F(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];u().Z.forEachPendingUnsubscribeRecord((o=>{let{pointer:n,userId:i,timestamp:r,environment:a}=o;if(r<e){u().Z.removeFromPendingUnsubscribeRecords({pointer:n,userId:i});const e={pointer:n,userId:i};t&&console.log("Unsubscribing and evicting",JSON.stringify(n)),B({pointer:n,userId:i,environment:a}),a.defaultRecordCache.inMemoryRecordCache.deleteRecord(e)}})),y().Z.forEachPendingEviction((o=>{let{pointer:n,userId:i,timestamp:r,environment:a}=o;if(r<e){y().Z.removeFromPendingEvictions({pointer:n,userId:i});const e={pointer:n,userId:i};t&&console.log("Evicting",JSON.stringify(n)),R(e),a.defaultRecordCache.inMemoryRecordCache.deleteRecord(e)}}))}setInterval((()=>{F(Date.now())}),1e4),(0,o(947115).exposeDebugValue)("forceUnsubscribeAndEvictPendingRecords",(()=>{F(1/0,!0)})),setTimeout((()=>{(0,p().Tg)((()=>{u().Z.forEachPendingUnsubscribeRecord((e=>{let{pointer:t,userId:o,timestamp:n,environment:i}=e;B({pointer:t,userId:o,environment:i});const r={pointer:t,userId:o};y().Z.addToPendingEvictions(r,n),u().Z.removeFromPendingUnsubscribeRecords(r)}))}))}),0)},429102:(e,t,o)=>{o.d(t,{n:()=>c});var n=()=>o(317924),i=()=>o(707138),r=()=>o(297861),a=()=>o(876822),s=()=>o(369320),l=()=>o(105381);function c(e){var t,o;const{currentUserStore:c}=a().default.state,d=Boolean(null==c?void 0:c.id),u=i().default.state.isOnboarding,p=(0,r().Y)("supportsNativeBottomBarOverlappingWebView")?s().Z.hasOpenMobileSlideUps():s().Z.hasOpenPopups(),m=l().Z.state.open,f=(0,n().w_)(e.TabbedRouterStore.state),g="web"!==f.type,v="web"===f.type&&("nativeTab"===f.route.name&&["members","trash","help","offline","settings"].includes(f.route.tab)||"nativeTab"===(null===(t=f.redirectedTo)||void 0===t?void 0:t.route.name)&&["members","trash","help","offline","settings"].includes(null===(o=f.redirectedTo)||void 0===o?void 0:o.route.tab)),h=d&&!m&&!u&&!p&&!v;return(0,r().Y)("supportsWebManagedTabNavigation")&&!!g||h}},687117:(e,t,o)=>{o.d(t,{Z:()=>n});const n=new class{constructor(){this.lruKeyStore=new(o(41158).D)({key:"frequentlyUsedActions",namespace:"NativeMobileActionBar",important:!1,trackingType:"necessary"})}load(){const e=this.lruKeyStore.state;let t={};try{t=e&&JSON.parse(e)||{}}catch(o){}return t}get(){return this.load()}set(e){this.lruKeyStore.setState(JSON.stringify(e))}track(e){const t=this.load(),o=t[e];void 0!==(null==o?void 0:o.frequency)&&void 0!==(null==o?void 0:o.lastAccessed)?(o.frequency+=1,o.lastAccessed=Date.now()):t[e]={frequency:1,lastAccessed:Date.now()},this.set(t)}}},76225:(e,t,o)=>{o.d(t,{Ij:()=>f,aE:()=>v,aT:()=>g});var n=o(667294),i=()=>o(629013),r=()=>o(219727),a=()=>o(142735),s=()=>o(846550),l=()=>o(707513),c=()=>o(990966),d=()=>o(191003),u=()=>o(656769),p=()=>o(302353),m=()=>o(127519);function f(){const e=(0,r().O7)();return(0,a().VK)((()=>p().default.mobileNativeBottomPadding(e)),[e])}function g(){const e=(0,r().O7)(),{isMobileNative:t,isAndroid:o}=(0,r().Fy)(),{RouterStore:s,NativeMobileActionBarStore:l}=e,f=(0,a().VK)((()=>{var e;if(!t||!o)return!1;if("page"!==s.state.route.name)return!1;if(p().default.state.phase!==p().i.hidden)return!1;if(u().Z.state.open)return!1;if(Boolean(null==l||null===(e=l.state)||void 0===e?void 0:e.menu))return!1;const n=m().default.state,i="editing"===n.mode?n.multiSelection:void 0;return!(i&&!(0,d().iG)(i))}),[s,o,t,l]),g=(0,i().y)(((e,t)=>{t&&c().clear({environment:e})}),150);(0,n.useEffect)((()=>{g(e,f)}),[e,f,g])}function v(){const e=(0,r().Fy)();return(0,s().yK)((t=>({popup:{...e.isMobile&&{borderTopLeftRadius:12,borderTopRightRadius:12,overflow:"hidden"}},menuScroller:e.isMobile?{background:t.surface.wash}:{},header:e.isMobile?{display:"flex",justifyContent:"center",alignItems:"center",fontSize:16,fontWeight:l().Ue.semibold,background:t.surface.wash,height:45}:{paddingLeft:16,paddingRight:16,paddingTop:10,fontWeight:l().Ue.semibold},subheader:e.isMobile?{display:"flex",justifyContent:"start",alignItems:"center",fontSize:15,fontWeight:l().Ue.medium,background:t.surface.wash,height:45,color:t.text.secondary,paddingLeft:16,paddingRight:16}:{paddingLeft:16,paddingRight:16,paddingTop:10,fontWeight:l().Ue.semibold},sectionMenuItem:e.isMobile?{overflow:"hidden",background:t.buttonBackground,borderRadius:12,marginLeft:16,marginRight:16,marginBottom:16,borderWidth:1,borderStyle:"solid",borderColor:t.stroke.secondary,padding:void 0}:{},buttonMenuItem:e.isMobile?{backgroundColor:t.surface.elevated,paddingTop:12,paddingBottom:12,borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:t.stroke.secondary}:{},buttonMenuItemPressed:{background:t.buttonPressedBackground},transparentButtonMenuItemBorder:{borderBottomColor:"transparent"},title:e.isMobile?{fontSize:16}:{},icon:{...e.isMobile?{height:24,width:24}:{height:20,width:20}},checkIcon:{...e.isMobile?{height:20,width:20}:{height:16,width:16}}})),[e])}},417622:(e,t,o)=>{o.d(t,{Z:()=>i});o(667294);var n=o(785893);const i=function(e){let{targetRecordId:t,style:i}=e;const r=(0,o(142735).VK)((()=>o(897606).Z.state[t]),[t]),a=(0,o(846550).yK)((()=>({warning:{maxWidth:200,margin:8}})),[]);if(!r)return null;const{taskStatus:s,completeBlocks:l,totalBlocks:c}=r,d=(c??0)>3e4,u=(0,n.jsx)(o(67961).Z,{isSecondaryColor:!0,isSmall:!0,isMultiline:!0,style:a.warning,children:(0,n.jsx)(o(788860)._H,{defaultMessage:"Looks like you're trying to move a lot of content ({blocks, plural, one {# block} other {# blocks}})! Please do not refresh your page or close the window until the process completes.",id:"moveOrDuplicateProgress.warning",values:{blocks:c}})}),p=(()=>{switch(s){case"not_started":case"failure":return;case"success":return 100;case"in_progress":if("number"!=typeof l||"number"!=typeof c)return;if(0===c)return;const e=l/c;return 1===e?99:Math.round(100*e)}})();return"number"!=typeof p?d?u:null:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o(86048).k,{percentage:p,style:i}),d?u:void 0]})}},192956:(e,t,o)=>{o.d(t,{X:()=>m});var n=o(667294),i=()=>o(219727),r=()=>o(142735),a=()=>o(506347),s=()=>o(788860),l=()=>o(47443),c=()=>o(312446),d=()=>o(250625),u=()=>o(614027),p=o(785893);function m(e){const{hideUndoButton:t}=e,o=(0,i().O7)(),n=(0,r().VK)((()=>o.device.isPhone),[o]);return(0,p.jsxs)(p.Fragment,{children:[!n&&(0,p.jsx)(f,{...e}),!t&&(0,p.jsx)(c().ow,{})]})}function f(e){let{moveToLocation:t,movedItems:o}=e;const r=(0,i().O7)(),m=(0,n.useCallback)((e=>{var n;if(t&&"moveToBlock"===t.type)l()._c({environment:r,openInNew:d().DJ(e),store:t.blockStore,scrollToBlockId:null===(n=o[0])||void 0===n?void 0:n.id,visitType:u().vu.Link,pageVisitSource:a().tY.Move})}),[r,t,o]);return t&&"moveToBlock"===t.type?(0,p.jsx)(c().Pn,{onClick:m,children:(0,p.jsx)(s()._H,{defaultMessage:"Visit",id:"moveToHelpers.afterMoveToast.viewButton"})}):null}},732491:(e,t,o)=>{o.d(t,{j:()=>r,Z:()=>a});var n=()=>o(677559);const i=new(n().Ss)("moveTo",(()=>Promise.all([o.e(62743),o.e(2971),o.e(53335),o.e(71896),o.e(63707),o.e(86609),o.e(27039),o.e(23721),o.e(94670)]).then(o.bind(o,609458)))),r=(0,n().kF)(i,(e=>e.MoveToMenuRenderer));async function a(){return(await o.e(61218).then(o.bind(o,128646))).moveToTeamImpl}},763589:(e,t,o)=>{o.d(t,{$x:()=>s,Fz:()=>l,T6:()=>m,h_:()=>c,mx:()=>p});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(30005);var n=()=>o(707513),i=()=>o(326966),r=()=>o(105649),a=()=>o(97904);function s(e,t){const o=i().vM(e,(e=>{let{notification:t}=e;return t.navigable_block_id??t.id}));return o.forEach(((e,n)=>{const i=[],r=new Set;e.forEach((e=>{const{activity:t}=e;"commented"!==t.type&&i.push(e);const o=t.discussion_id;void 0===o||r.has(o)||(i.push(e),r.add(o))}));const a=i.filter((e=>{let{notification:o}=e;return("mentions"!==t||!o.visited)&&!("archive"===t&&!o.visited)}));0!==a.length?o.set(n,a):o.delete(n)})),o}function l(){const e=a().ZP.state.filter||a().uZ;return a().j5.includes(e)?e:a().uZ}function c(){return{fontWeight:n().Ue.medium}}function d(e,t){const o=void 0===e?new Date:new Date(e);return o.setDate(o.getDate()-t),o.setHours(0,0,0,0),o.getTime()}function u(e,t){const o=void 0===e?new Date:new Date(e),n=o.getDay();return o.setDate(o.getDate()-n-7*t),o.setHours(0,0,0,0),o.getTime()}function p(e){return[{name:"today",cutoffTime:d(e,0)},{name:"this_week",cutoffTime:u(e,0)},{name:"last_week",cutoffTime:u(e,1)},{name:"older"}]}function m(){const{contentType:e,openState:t}=r().default.state;return"inbox"===e?t:"closed"}},827510:(e,t,o)=>{o.d(t,{B9:()=>M,N$:()=>A,WS:()=>B,eC:()=>S,fW:()=>C,jt:()=>P,sT:()=>I,sh:()=>k,tE:()=>R,vn:()=>w});o(267602),o(653476),o(398858),o(461318),o(33228);var n=()=>o(956057),i=()=>o(836273),r=()=>o(513670),a=()=>o(342792),s=()=>o(916673),l=()=>o(880026),c=()=>o(824462),d=()=>o(231077),u=()=>o(752127),p=()=>o(269299),m=()=>o(348141),f=()=>o(205228),g=()=>o(594546),v=()=>o(803728),h=()=>o(772529),_=()=>o(749826),b=()=>o(909859),y=()=>o(942625);async function S(e){const{environment:t,from:o,notionAnalyticsSessionId:n}=e;await M({environment:t,url:await I({environment:t,baseUrl:f().default.calendar.createEventUrl,spaceStore:void 0,collectionViewStore:void 0,from:o,notionAnalyticsSessionId:n}),from:o})}async function w(e){const{environment:t,from:o}=e;await M({environment:t,url:await I({environment:t,baseUrl:f().default.calendar.calendarSettingsUrl,spaceStore:void 0,collectionViewStore:void 0,from:o}),from:o})}async function k(e){const{environment:t,spaceStore:o,collectionViewStore:r,from:l}=e,c=(0,b().Rk)();if(!!o&&!(0,b().tE)())return void async function(e){const{environment:t,spaceStore:o,collectionViewStore:r,from:l,notionLoginEnabled:c}=e,d=await T({environment:t,spaceStore:o,collectionViewStore:r,from:l,notionLoginEnabled:c});if("homeSignupClick"===l&&t.device.isElectron){const e=h().J2("main"),o=s().bf({url:f().default.calendar.notionAuthUrl,query:{...d,csrf:"",autolink:"false",notionDesktopRedirectPageId:e?(0,a().cj)(e.id):void 0}});return void u().D({environment:t,url:o})}if(t.device.isElectron){const e=s().bf({url:`${f().default.domainBaseUrl}${i()._j.signup}`,query:{showNotionCalendarModal:"true"}});return void u().D({environment:t,url:e})}const p=n().Il(),m=s().bf({url:c?`${f().default.domainBaseUrl}${i()._j.calendarAuth}`:f().default.calendar.notionAuthUrl,query:{...d,csrf:p}});await(0,b().PQ)({environment:t,csrf:p}),y().Z.setState({isConnectingCalendar:!0}),u().D({environment:t,url:m})}({...e,notionLoginEnabled:c});const d=r?f().default.calendar.openNotionDatabaseUrl:f().default.calendar.domainBaseUrl;M({environment:t,url:await I({environment:t,baseUrl:d,spaceStore:o,collectionViewStore:r,from:l}),from:l})}async function I(e){const{environment:t,baseUrl:o,spaceStore:n,collectionViewStore:r,from:a,notionAnalyticsSessionId:l}=e,c=(0,b().Rk)(),d=await T({environment:t,collectionViewStore:r,spaceStore:n,from:a,notionAnalyticsSessionId:l,notionLoginEnabled:c});return s().bf({url:c?`${f().default.domainBaseUrl}${i()._j.calendarAuth}`:o,query:d})}async function C(e){const{environment:t,csrf:o,calendarCsrf:n,spaceId:i,integration:a,redirectUri:s,state:d}=e;if(!(await(0,b().Bs)({environment:t,csrf:o})))return void x({environment:t,redirectUri:s,query:r().GM({state:d},r().o8)});const u=await c().callApi({eventName:"createOauthAuthorizationCode",environment:t,data:{integrationId:a.id,spaceId:i,redirectUri:s,acceptedIntegrationCapabilities:a.capabilities}});if("failed"===u.type)return void x({environment:t,redirectUri:s,query:r().GM({state:d},r().o8)});await l().dl(t);const p={code:u.data.code,calendarCsrf:n,state:d};x({environment:t,redirectUri:s,query:r().GM(p,r().o8)})}function x(e){const{environment:t,redirectUri:o,query:n}=e,i=s().bf({url:o,query:n});u().D({environment:t,url:i,targetSelf:!0})}async function T(e){const{environment:t,spaceStore:o,collectionViewStore:n,from:i,notionAnalyticsSessionId:a,notionLoginEnabled:s}=e,l=await(0,g().cG)(t),c=new URLSearchParams;if(c.set("provider","notion-centralized-auth"),i&&c.set("from",i),l&&c.set("notionDeviceId",l),null!=o&&o.id&&c.set("workspaceId",null==o?void 0:o.id),null!=n&&n.id&&c.set("collectionViewId",null==n?void 0:n.id),!o&&!n)return{notionDeviceId:l,from:i,notionAnalyticsSessionId:a,...s?{state:c.toString()}:{}};const d={env:"production",collection_view_id:null==n?void 0:n.id,user_id:null==o?void 0:o.userId,workspace_id:null==o?void 0:o.id,notionDeviceId:l,from:i,notionAnalyticsSessionId:a,...s?{state:c.toString()}:{}};return r().GM(d,r().o8)}async function M(e){const{environment:t,url:o,targetSelf:n}=e;if((0,g().K4)(e.environment,"open_notion_calendar",{from:e.from}),!t.device.isElectron)return u().D({environment:t,url:o,targetSelf:n});const{desktopProtocol:i}=f().default.calendar;if(!(await d().isProtocolRegistered(i)))return u().D({environment:t,url:o,targetSelf:n});const r=o.replace(/^https?:/,`${i}:`);d().openExternalUrl(r)}async function P(e){let t,{environment:o,url:n}=e;if(!o.device.isElectron||!_().default.checkGate({gateName:"calendar_home_tile_open_in_zoom_app"}))return!1;try{t=new URL(n)}catch{return!1}const i=t.pathname.split("/").filter(Boolean).pop();if(!i||!i.match(/\d{9,11}/))return!1;const{desktopProtocol:r}=f().default.zoom,a=new URLSearchParams(t.search);a.set("confno",i);const s=`${r}://${t.host}/join?${a.toString()}`;return await d().openExternalUrl(s)}function A(e){v().ES(e,"notion_calendar_launch_promo")}function R(e){const{environment:t,userSettingsStore:o}=e;p().createAndCommit({environment:t,userAction:"NotionCalendarLaunchModal.clickCancel",canUndo:!0,perform:e=>{m().d2({userSettingsStore:o,transaction:e,data:{notion_calendar_launch_modal_dismissed_at:Date.now(),notion_calendar_launch_modal_phase:"dismissed_modal"}})}})}function B(e,t){const{phase:o,transactionUserAction:n,userSettingsStore:i}=t;p().createAndCommit({environment:e,userAction:n,canUndo:!0,perform:e=>{m().d2({userSettingsStore:i,transaction:e,data:{notion_calendar_launch_modal_phase:o}})}})}},909859:(e,t,o)=>{o.d(t,{Bs:()=>g,PQ:()=>f,RI:()=>d,Rk:()=>v,ZH:()=>u,tE:()=>p});o(267602),o(653476),o(470928);var n=()=>o(235484),i=()=>o(342792),r=()=>o(274879),a=()=>o(148126),s=()=>o(345918),l=()=>o(749826),c=()=>o(138912);function d(){return c().default.bots.state.filter((e=>e.integration_id===n().Dv))}function u(e){const{environment:t,collectionContextType:o,spaceStore:n}=e;return!!n&&(!(0,s().XY)({env:"production",spaceStore:n})&&(!t.device.isMobile&&(!(0,a().Sr)(t)&&("collectionTypedView"!==o&&"collectionSystemView"!==o))))}function p(){const{bots:e,externalAuthentications:t}=c().default,o=e.state.find((e=>e.integration_id===n().Dv));if(!o)return!1;const i=t.state.find((e=>e.parent_id===o.id));return Boolean(i)}const m="notion_calendar_csrf";async function f(e){const{environment:t,csrf:o}=e;await(0,r().setCookie)(t,{name:m,value:o})}async function g(e){const{environment:t,csrf:o}=e,n=await(0,r().getCookie)(t,m),a=!!n&&(0,i().t)(n)&&n===o;return(0,r().removeCookie)(m),a}function v(){return l().default.checkGate({gateName:"calendar_auth_mmvp"})&&!0}},942625:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{}}}const i=new n},260794:(e,t,o)=>{o.d(t,{h:()=>a});var n=()=>o(231077),i=()=>o(752127),r=()=>o(205228);async function a(e){const{environment:t,targetSelf:o}=e,i=r().default.mail.domainBaseUrl,a=`${i}/inbox#activeUserID=${t.currentUser.id}`;if(t.device.isElectron){const{protocol:e}=r().default.mail;if(!(await n().isProtocolRegistered(e)))return void s({environment:t,url:a,targetSelf:o});const i=a.replace(/^https?:/,`${e}:`);n().openExternalUrl(i)}else s({environment:t,url:`${i}/inbox#activeUserID=${t.currentUser.id}`,targetSelf:o})}function s(e){const{environment:t,url:o,targetSelf:n}=e;return i().D({environment:t,url:o,targetSelf:n})}},543887:(e,t,o)=>{o.d(t,{FZ:()=>i,Kl:()=>a});var n=()=>o(142735);const i="notionscript";function r(){return!1}function a(){return(0,n().VK)(r,[])}},784552:(e,t,o)=>{o.r(t),o.d(t,{readAndCacheOfflinePages:()=>b,readAndCacheOfflinePagesMemo:()=>y,toggleAvailableOffline:()=>v});o(821057),o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624);var n=()=>o(998411),i=()=>o(396136),r=()=>o(680146),a=()=>o(513670),s=()=>o(839002),l=()=>o(696459),c=()=>o(824462),d=()=>o(594546),u=()=>o(620218),p=()=>o(826955),m=()=>o(991007),f=()=>o(320057),g=()=>o(747055);async function v(e){const{store:t,environment:{currentUser:o,defaultRecordCache:{persistedRecordCache:n}}}=e;if(!n||!o.id)return;const i=t.id,c=m()._(i)?"removePage":"addPage";g().Z.setState({...g().Z.state,isSlowWrite:!1});const p="addPage"===c?h({...e,from:"toggleAvailableOffline",originPageId:i,visitedBlockIds:new Set}):"removePage"===c?async function(e){var t;const{store:o,environment:{currentUser:{id:n},defaultRecordCache:{persistedRecordCache:i}}}=e;if(!i||!n)return;const s=o.id,l=null===(t=g().Z.state.offlinePages)||void 0===t?void 0:t[s];g().Z.setState({...g().Z.state,offlinePages:a().CE(g().Z.state.offlinePages,s)});let c=[];try{c=await i.getImpactedPageIdsByOriginPageId({originPageId:s,userId:n})}catch(v){}const{saveDidSucceed:p}=await _({operation:"removePage",pageId:s,userId:n,persistedRecordCache:i,environment:e.environment,trackAnalytics:!0});if(!p)return void g().Z.setState({...g().Z.state,offlinePages:{...g().Z.state.offlinePages,[s]:l}});(0,d().j)({environment:e.environment,event:{eventName:"offline_toggle_off",eventProperties:{}}});const m=performance.now();async function f(){if(i&&void 0!==n){await i.deleteOfflineActionsWithOriginPageId({originPageId:s,userId:n});for(const t of c){if(0===await i.countOfflineActionsByImpactedPageId({impactedPageId:t,userId:n})){const{saveDidSucceed:o}=await _({operation:"removePage",pageId:t,userId:n,persistedRecordCache:i,environment:e.environment,trackAnalytics:!1});o&&g().Z.setState({...g().Z.state,offlinePages:a().CE(g().Z.state.offlinePages,t)})}}}}f().then((()=>{u().default.measure({metricName:"offline_toggle_off_non_blocking",startTime:m,endTime:performance.now()},{environment:e.environment})})).catch((t=>{r().rn(t,{from:"toggleUnavailableOffline",type:"deleteRowsFromDbError",data:{pageId:s}}),(0,d().j)({environment:e.environment,event:{eventName:"offline_toggle_off_non_blocking_failure",eventProperties:{}}})})).finally((async()=>{try{await b({userId:n,persistedRecordCache:i})}catch(v){}g().Z.setState({...g().Z.state,shouldPublishUpdate:!0})}))}(e):(0,l().t1)(c);try{(await(0,s().OI)(200,p)).timeout&&g().Z.setState({...g().Z.state,isSlowWrite:!0}),await p}finally{g().Z.setState({...g().Z.state,isSlowWrite:!1})}}async function h(e){const{from:t,store:o,environment:{currentUser:{id:m},defaultRecordCache:{persistedRecordCache:v}},originPageId:y,visitedBlockIds:S}=e;if(!v||!m)return;const w=o.id,k=o.isCollectionView()?"collection_view_page":"page",I=performance.now();if(S.has(w))return void(w===y&&r().rn(new Error("Potential infinite loop prevented in makePageAvailableOffline()"),{from:"makePageAvailableOffline",type:"infiniteLoopPrevented",data:{pageId:y}}));S.add(w),g().Z.setState({...g().Z.state,offlinePages:{...g().Z.state.offlinePages,[w]:{lastDownloadedAt:void 0,lastDownloadedVersion:void 0,isLocked:!1}}});const{saveDidSucceed:C}=await _({operation:"addPage",pageId:w,userId:m,persistedRecordCache:v,environment:e.environment,trackAnalytics:!0,lastDownloadedAt:void 0,lastDownloadedVersion:void 0,originPageId:y,pageType:k});async function x(){if(!v||void 0===m)return;const a=performance.now(),[g,_]=await Promise.all([async function(){try{const t=await(0,f().sp)({pageStore:o,environment:e.environment,lastDownloadedVersion:void 0});return y===w&&await(0,s().qd)(t.collectionViewBlocks,1,(async t=>{await h({from:"makePageAvailableOffline",store:t,environment:e.environment,originPageId:y,visitedBlockIds:S})})),{shouldUpdateMetadata:!0,lastDownloadedVersion:t.downloadedVersion,didSucceed:!0,pageDownloadTime:t.pageDownloadTime,imagesDownloadTime:t.imagesDownloadTime,imageCount:t.imageCount}}catch(t){return r().rn(t,{from:"toggleAvailableOffline",type:"loadRemotePageAndImagesError",data:{pageId:w}}),{shouldUpdateMetadata:!1,didSucceed:!1}}}(),async function(){if("collection_view_page"!==k)return{didSucceed:!0};try{const t=performance.now(),r=await async function(e){const{store:t,environment:o,originPageId:r,visitedBlockIds:a}=e,d=o.defaultRecordCache.persistedRecordCache,u=o.currentUser.id;if(!d||!u)return{collectionChildrenCount:0};const m=t.getCollectionPointer(),f=[];if(m)f.push({fn:"makeSourceCollectionChildrenAvailableOffline",args:{store:t,environment:o,originPageId:r,visitedBlockIds:a}});else{const e=new Set;for(const n of t.getCollectionViewStores()){const t=n.getCollectionStore();if(!t)continue;const i=t.getParentBlockStore();i&&!e.has(i.id)&&(f.push({fn:"makePageAvailableOffline",args:{from:"makeCollectionChildrenAvailableOffline",store:i,environment:o,originPageId:r,visitedBlockIds:a}}),e.add(i.id))}}let g=0;return await(0,s().qd)(f,10,(async e=>{if("makePageAvailableOffline"===e.fn)await h(e.args);else if("makeSourceCollectionChildrenAvailableOffline"===e.fn){const t=await async function(e){const{store:t,environment:o,originPageId:r,visitedBlockIds:a}=e,l=o.defaultRecordCache.persistedRecordCache,d=o.currentUser.id;if(!l||!d)return{collectionChildrenCount:0};const u=t.getCollectionPointer();if(!u||!u.spaceId)return{collectionChildrenCount:0};const m=t.getCollectionViewIds();if(0===m.length)return{collectionChildrenCount:0};const f=m[0],g={filter:void 0,sort:void 0,userId:d,userTimeZone:(0,n().r)(),searchQuery:void 0,reducers:{offline_pages:{type:"results",limit:1e3}}},v=await c().queryCollection({environment:o,data:{source:{type:"collection",id:u.id,spaceId:u.spaceId},collectionView:{id:f,spaceId:u.spaceId},loader:g},tracking:{src:"download_for_offline"}});if("success"!==v.type)return{collectionChildrenCount:0};const _=v.data.result.reducerResults.offline_pages;if("results"!==_.type)return{collectionChildrenCount:0};const b=[],y=_.blockIds;for(const n of y){const e=new(p().G)(o,{id:n,table:i().iU,spaceId:u.spaceId});b.push({fn:"makePageAvailableOffline",args:{from:"makeSourceCollectionChildrenAvailableOffline",store:e,environment:o,originPageId:r,visitedBlockIds:a}})}return await(0,s().qd)(b,10,(e=>h(e.args))),{collectionChildrenCount:y.length}}(e.args);g+=t.collectionChildrenCount}else(0,l().t1)(e)})),{collectionChildrenCount:g}}({store:o,environment:e.environment,originPageId:y,visitedBlockIds:S});return{didSucceed:!0,collectionChildrenCount:r.collectionChildrenCount,collectionChildrenDownloadTime:performance.now()-t}}catch(t){return r().rn(t,{from:"toggleAvailableOffline",type:"makeCollectionChildrenAvailableOfflineError",data:{pageId:w}}),{didSucceed:!1}}}()]);g.shouldUpdateMetadata&&await v.updateOfflinePageLastDownloadedMetadata({pageId:w,userId:m,lastDownloadedAt:Date.now(),lastDownloadedVersion:g.lastDownloadedVersion}),"toggleAvailableOffline"===t&&(g.didSucceed&&_.didSucceed?u().default.measure({metricName:"offline_toggle_on_non_blocking",startTime:a,endTime:performance.now()},{environment:e.environment,data:{sub_metrics:{page_download:g.pageDownloadTime??0,images_download:g.imagesDownloadTime??0,collection_children_download:_.collectionChildrenDownloadTime??0},number_of_collection_children:_.collectionChildrenCount??0,number_of_images_fetched:g.imageCount??0,page_type:k}}):(0,d().j)({environment:e.environment,event:{eventName:"offline_toggle_on_non_blocking_failure",eventProperties:{load_remote_page_and_images_failed:!g.didSucceed,make_collection_children_available_offline_failed:!_.didSucceed}}}))}C?(u().default.measure({metricName:"offline_toggle_on",startTime:I,endTime:performance.now()},{environment:e.environment}),"toggleAvailableOffline"===t?x().finally((async()=>{try{await b({userId:m,persistedRecordCache:v})}catch(e){}g().Z.setState({...g().Z.state,shouldPublishUpdate:!0})})):await x()):g().Z.setState({...g().Z.state,offlinePages:a().CE(g().Z.state.offlinePages,w)})}async function _(e){const{operation:t,pageId:o,userId:n,persistedRecordCache:i,environment:a,trackAnalytics:s}=e;let c=!1;try{"addPage"===t?await i.addOrUpdateOfflinePage({pageId:o,userId:n,lastDownloadedAt:e.lastDownloadedAt,lastDownloadedVersion:e.lastDownloadedVersion,originPageId:e.originPageId,pageType:e.pageType,downloadStatus:"downloaded",collectionStatus:void 0}):"removePage"===t?await i.removeOfflinePage({pageId:o,userId:n}):(0,l().t1)(t),c=!0}catch(u){s&&(r().rn(u,{from:t,type:"performOfflinePageOperationInDbError",data:{pageId:o}}),(0,d().j)({environment:a,event:{eventName:"offline_toggle_failure",eventProperties:{action:"addPage"===t?"add_page":"remove_page"}}}))}return{saveDidSucceed:c}}async function b(e){const{userId:t,persistedRecordCache:o}=e,n={},i=await o.getOfflinePages({userId:t});for(const[r,a]of i)n[r]=a;g().Z.setState({...g().Z.state,offlinePages:n})}const y=a().HP(b,(e=>e.userId))},991007:(e,t,o)=>{o.d(t,{_:()=>i,r:()=>r});var n=()=>o(747055);function i(e){var t;return Boolean(null===(t=n().Z.state.offlinePages)||void 0===t?void 0:t[e])}function r(e){var t;return Boolean(null===(t=n().Z.state.offlinePages)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.isLocked)}},320057:(e,t,o)=>{o.d(t,{sp:()=>f});o(821057),o(670560),o(267602),o(653476),o(241792);var n=()=>o(156642),i=()=>o(743359),r=()=>o(741633),a=()=>o(728670),s=()=>o(217465),l=()=>o(396136),c=()=>o(81954),d=()=>o(839002),u=()=>o(205228),p=()=>o(111599),m=()=>o(826955);async function f(e){const{pageStore:t,environment:o,lastDownloadedVersion:c}=e,p=performance.now();let f=0,h=[];const _=await async function(e){const{pageStore:t,environment:o,incrementChunkSize:i,initialChunkSize:c,lastDownloadedVersion:u}=e,p=[],f=(0,r().Bb)({recordId:t.id,spaceId:t.getSpaceId()}),h=await v({limit:c,cursor:void 0,headers:f,pageStore:t,environment:o,lastDownloadedVersion:u});if("clientAlreadyFresh"in h)return{serverPageVersion:h.serverPageVersion,collectionViewBlocks:[]};p.push(h.recordMap);let _=h.cursors.filter((e=>e.stack.length>0));for(;_.length>0;){const e=await d().qd(_,10,(async e=>{const n=(0,r().Bb)({cellId:e.cellId}),a=await v({limit:i,cursor:e,headers:n,environment:o,pageStore:t,lastDownloadedVersion:u});return"recordMap"in a&&p.push(a.recordMap),a}));_=e.filter(g).map((e=>e.cursors)).flat().filter((e=>e.stack.length>0))}const b=s().RecordMapWithRole.merge(p),y=function(e,t,o){const i=(e,o)=>{if(e.getType()!==n().Ti.collectionView)return!1;const i=(0,a().om)(e.pointer,o);for(const n of i.slice(1))if(n.id===t.id)return!0;return!1},r=o.getModelsByTable(l().iU).filter((e=>i(e,o))).map((t=>new(m().G)(e,t.pointer)));return r}(o,t,b);return{serverPageVersion:h.serverPageVersion,collectionViewBlocks:y}}({pageStore:t,environment:o,incrementChunkSize:30,initialChunkSize:30,lastDownloadedVersion:c}),b=_.serverPageVersion;h=_.collectionViewBlocks;const y=performance.now(),S=t.getModel();if(S){const e=function(e,t){const o=[],r=[...e.getRenderableContentPointers()];for(;r.length;){const e=r.shift();if(!e)continue;const a=t.defaultRecordCache.inMemoryRecordCache.getRecordModel({pointer:e,userId:t.currentUser.id});if(a){if(a.getType()===n().Ti.image){const e=a.getFormatValue("display_source"),n=i().p0({url:e??"",baseUrl:u().default.domainBaseUrl,userId:t.currentUser.id,permissionRecord:a.pointer});n&&o.push(n)}if(!a.isNavigableBlock())if(a.getType()===n().Ti.transclusionReference){const e=a.getTransclusionReferenceTargetPointer();if(!e)continue;const o=t.defaultRecordCache.inMemoryRecordCache.getRecordModel({pointer:e,userId:t.currentUser.id});if(!o)continue;r.push(...o.getRenderableContentPointers())}else r.push(...a.getRenderableContentPointers())}}return o}(S,o);f=e.length;for(const t of e)await fetch(t)}return{imageCount:f,downloadedVersion:b,collectionViewBlocks:h,pageDownloadTime:y-p,imagesDownloadTime:performance.now()-y}}function g(e){return"cursors"in e&&"recordMap"in e}async function v(e){const{pageStore:t,environment:o,limit:n,cursor:i,headers:r,lastDownloadedVersion:a}=e,l=(0,c().J)(t.pointer.spaceId),d={page:{id:t.id,spaceId:l},limit:n,cursor:i||{stack:[]},verticalColumns:o.device.isMobile,version:a??0},u=await p().RC({environment:o,request:d,headers:r});if("success"===u.type)return"clientAlreadyFresh"in u.data?u.data:{recordMap:s().RecordMapWithRole.create(u.data.recordMap),cursors:u.data.cursors,serverPageVersion:u.data.serverPageVersion};throw new Error("No successful load result found.")}},595989:(e,t,o)=>{o.d(t,{JD:()=>x,Jb:()=>C});o(821057),o(267602),o(653476),o(241792);var n=o(667294),i=()=>o(219727),r=()=>o(142735),a=()=>o(947115),s=()=>o(565630),l=()=>o(396136),c=()=>o(680146),d=()=>o(150266),u=()=>o(839002),p=()=>o(620218),m=()=>o(876822),f=()=>o(804217),g=()=>o(749826),v=()=>o(601952),h=()=>o(826955),_=()=>o(784552),b=()=>o(320057),y=()=>o(747055);const S=o(263184).default.createValue(12e5),w=20,k=5;async function I(e,t,o){const{defaultRecordCache:{persistedRecordCache:n},currentUser:{id:i}}=e,r=performance.now();if(!n||!i)return;const a=await n.getOfflinePages({userId:i,orderBy:"mostStaleFirst"}),s=a.slice(0,w);if(M((()=>`Out of ${Object.keys(y().Z.state.offlinePages||{}).length} offline pages, will fetch ${s.length} in batches of ${k}.`)),M((()=>`Fetching ids: ${s.map((e=>{let[t]=e;return t})).join(", ")}`)),M((()=>"--------------------------------")),0===s.length)return;let m=0,f=!0;if(await u().qd(s,k,(async o=>{var r;let[a,s]=o;if(!f){if(!(await n.getOfflinePages({userId:i})).map((e=>{let[t]=e;return t})).includes(a))return}f=!1;const d=new(h().G)(e,{id:a,table:l().iU,spaceId:t}),u=null===(r=y().Z.state.offlinePages)||void 0===r||null===(r=r[a])||void 0===r?void 0:r.lastDownloadedVersion;M((()=>`Fetching page ${a}. Last downloaded version: ${u}.`));let p,g=!1,v=0;try{const t=await(0,b().sp)({pageStore:d,environment:e,lastDownloadedVersion:u});v=t.imageCount,m+=v,p=t.downloadedVersion,g=!0}catch(_){M((()=>`Fetch page ${a} failed.${_ instanceof Error?` Error: ${_.message}`:""}`)),c().rn(_,{from:"useRefetchOfflinePages",type:"loadRemotePageAndImagesError",data:{pageId:d.id}})}g&&(await n.updateOfflinePageLastDownloadedMetadata({pageId:a,userId:i,lastDownloadedAt:Date.now(),lastDownloadedVersion:p}),M((()=>`Fetched and saved page ${a}, and ${v} images. Last downloaded version: ${u}. Version from server: ${p}.`)))})),(0,_().readAndCacheOfflinePages)({userId:i,persistedRecordCache:n}).finally((()=>{y().Z.setState({...y().Z.state,shouldPublishUpdate:!0})})),o){const t=(0,d().C2)(a.map((e=>{let[,t]=e;return t.lastDownloadedAt})).filter((e=>void 0!==e)));p().default.measure({metricName:"background_refetch_offline_pages",startTime:r,endTime:performance.now()},{environment:e,data:{fetch_interval_ms:S.state,number_of_offline_pages_fetched:w,total_number_of_offline_pages:Object.keys(y().Z.state.offlinePages??{}).length,median_last_updated_at:t,number_of_images_fetched:m}})}}function C(e){return e.isElectron&&g().default.checkGate({gateName:"refetch_offline_pages"})&&g().default.checkGate({gateName:"download_for_offline"})}function x(){const e=(0,i().O7)(),t=(0,r().VK)((()=>{var e;return null===(e=m().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),o=(0,n.useCallback)((()=>{if(!v().default.state.initialRenderCompleted)return!1;if(!C(e.device))return!1;if(!f().default.state.online)return!1;const t=navigator.connection;return!t||!t.saveData&&!["slow-2g","2g"].includes(t.effectiveType??"")}),[e.device]),a=(0,r().Kw)(S),l=(0,n.useRef)(!1),c=(0,s().D9)(e.currentUser.id);Boolean(e.currentUser.id)&&e.currentUser.id!==c&&(l.current=!0),(0,n.useEffect)((()=>{async function n(){await navigator.locks.request("refetch_offline_pages",{ifAvailable:!0},(async o=>{o&&await I(e,t,!0)}))}o()&&l.current&&(n(),l.current=!1);const i=window.setInterval((()=>{o()&&n()}),a);return()=>{window.clearInterval(i)}}),[o,e,t,a])}let T=!1;function M(e){T&&console.log(`[useRefetchOfflinePages] ${e()}`)}(0,a().exposeDebugValue)("debugAttemptFetch",(function(e){var t;if(!e)throw new Error("Pass in `__console.environment` as the first param.");I(e,null===(t=m().default.state.currentSpaceStore)||void 0===t?void 0:t.id,!1)})),(0,a().exposeDebugValue)("changeOfflineRefetchInterval",(function(e){"number"==typeof e?(S.setState(e),console.log(`Offline refetch interval set to ${e} ms.`)):(S.reset(),console.log("Offline refetch interval set to default."))})),(0,a().exposeDebugValue)("toggleOfflineRefetchDebugLogs",(function(){T=!T,console.log(T?"Offline refetch debug logs enabled.":"Offline refetch debug logs disabled.")}))},747055:(e,t,o)=>{o.d(t,{Z:()=>r});class n extends(()=>o(263184))().default{getInitialState(){return{offlinePages:void 0,isSlowWrite:!1,shouldPublishUpdate:!1}}}const i=new n;(0,o(947115).exposeDebugValue)("OfflinePagesStore",i);const r=i},741636:(e,t,o)=>{o.d(t,{op:()=>G,xN:()=>K,VW:()=>Q,EV:()=>$,lp:()=>W,yH:()=>j,Mf:()=>H,Ex:()=>z,zJ:()=>O,Qt:()=>Y,I1:()=>q});var n=o.n(o(369282)),i=(o(667294),()=>o(799891)),r=()=>o(431595),a=()=>o(35980),s=()=>o(362154),l=()=>o(836273),c=()=>o(255933),d=()=>o(125571),u=()=>o(989478),p=()=>o(788860),m=()=>o(720866),f=()=>o(462928),g=()=>o(308186),v=()=>o(13382),h=()=>o(528918),_=()=>o(636340),b=()=>o(497065),y=()=>o(96271),S=()=>o(13750),w=()=>o(67961),k=()=>o(861864),I=()=>o(870738),C=()=>o(937419);const x=new(o(677559).Ss)("onboardingStateActions",(async()=>Promise.all([o.e(62743),o.e(90698),o.e(84885),o.e(17100),o.e(39879),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(46616),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63707),o.e(86609),o.e(5006),o.e(20343),o.e(14733),o.e(81780),o.e(3955),o.e(67053)]).then(o.bind(o,70662))));var T=()=>o(594546),M=()=>o(443269),P=()=>o(709344),A=()=>o(527278),R=()=>o(345918),B=()=>o(341691),E=()=>o(620218),D=()=>o(793935),U=()=>o(876822),F=()=>o(826955),N=()=>o(686350),V=()=>o(707138),L=o(785893);async function O(e,t){if(!e.currentUser.id)return!1;const o=Z(e);return!!N().BB(o)||(t||(t=new(F().U6)(e,{table:u().KJ,id:e.currentUser.id}),await t.awaitNonNullValue()),!t.getOnboardingCompleted())}function Z(e){return{...a().Z.get({userId:e.currentUser.id,key:V().onboardingPreferenceKey}),currentUserId:e.currentUser.id,stageStats:{startedTimeStampMs:Date.now()}}}async function j(e,t){const{state:o}=V().default;if(o.isLoading||o.isOnboarding||!e.currentUser.id)return;const n=Z(e);if(!n.isOnboarding)return;if(N().NT(n)&&t&&(null==t?void 0:t.id)!==n.spaceViewId)return;const{flow:r}=n,a="desktop_join_or_create_space"===r||"mobile_join_or_create_space"===r,s=await N().dD({environment:e,disableRedirects:a});s&&(n.onboardingData=s),V().default.setState(n);const{spaceId:l}=n;if(l&&(e.device.isMobileNative&&i().log({level:"info",from:"onboardingActions",type:"SpaceSwitchingDebug",data:{message:"onboardingActions.restoreOnboardingState setting space",spaceId:l}}),U().default.setState({...U().default.state,currentSpaceStore:new(F().H2)(e,{table:c().bx,id:l})})),n.isOnboarding&&"spaceViewId"in n&&n.spaceViewId){const t=new(F().V9)(e,{table:d().zU,id:n.spaceViewId});U().default.setState({...U().default.state,currentSpaceViewStore:t})}J(e,n)}async function K(e){await q(e,{type:"create-or-join",source:"create_or_join_space"})}function z(e){const{userStore:t,transaction:o}=e;_().sW({store:t,data:{onboarding_completed:!0},transaction:o})}function H(e){const{userStore:t,transaction:o}=e;_().sW({store:t,data:{mobile_onboarding_completed:!0},transaction:o})}async function q(e,t){(0,T().j)({environment:e,event:{eventName:"start_onboarding",eventProperties:{type:t.type,redirect_url:t.redirectUrl,disable_redirect_url:t.disableRedirectUrl,source:t.source}}});try{b().c4({environment:e,url:l()._j.onboarding});const o=E().default.DO_NOT_USE_markLegacy("onboarding.load_dependencies"),n=await N().dD({environment:e,disableRedirects:Boolean(t.disableRedirectUrl)||"create-or-join"===t.type}),i=N().Pn(n),r=await x.load(),a=await r.getInitialState({environment:e,startOnboardingArgs:t,onboardingData:n,redirectData:i});E().default.DO_NOT_USE_measureLegacy(o,{environment:e,data:{flow:"flow"in a?a.flow:void 0}}),a&&a.isOnboarding&&("invalid"===i.type&&(a.stage="error"),V().default.setState(a),I().shouldShowContextualizedOnboardingOnOnboardingLoad(e)?await async function(e,t,o){const{initializeOrRestoreContextualizedOnboardingState:n,memoizeAndTrackContextualizedOnboardingStageWithHistoricalContext:i}=await k().K.contextualizedOnboardingStateActions.load();await n({environment:e,onLoadDependencies:()=>{},isInvalidRedirect:t,shouldRestoreOnboardingState:!1});const r=C().default.state;o&&(r.shouldNavigateToStandardOnboarding=!0);const{getContextualizedOnboardingAnalyticsData:a}=await k().K.contextualizedOnboardingHelpers.load(),s=a({onboardingState:r,environment:e});f().NG(e,s),f().y6(e,s),i(e,r)}(e,"invalid"===i.type,"mobile-onboarding"===t.type):function(e,t){const o=N().jn(e);f().NG(t,o),f().y6(t,o),J(t,e)}(a,e),a.isNewUser&&f().Io(e))}catch(o){const t=(0,m().t)(o);!function(e,t,o){V().default.setState({...V().default.state,isLoading:!1}),f().Gk(e,{...N().jn(V().default.state),errorMessage:t.message}),i().log({level:"error",from:"onboardingActions",type:"handleError",error:{message:`Found onboarding error: ${t.message}`}});const n=o?async()=>await B().actuallyLogoutAndDeleteMostLocalData({environment:e,logoutOrigin:s().F.OnboardingError}):void 0;g().PV({message:t.message,onAccept:n})}(e,t,"WorkspaceCreationError"===t.name&&(0,r().Zw)(t)&&t.data.newUser)}}async function W(e,t){if(t.isOnboarding)try{f().jB(e,N().jn(t));const o=await x.load();let n=await o.updateAndGetNextState(t,e);n.isOnboarding?(n={...n,stageStats:{startedTimeStampMs:Date.now()}},V().default.setState(n),J(e,n)):V().default.setState(n),f().y6(e,N().jn(n))}catch(o){$(e,(0,m().t)(o))}}async function G(e,t){if(t.isOnboarding)try{f().jB(e,N().jn(t),!0);let o=(await x.load()).updateAndGetPreviousState(t,e);n()(null!==o),o.isOnboarding?(o={...o,stageStats:{startedTimeStampMs:Date.now()}},V().default.setState(o),J(e,o,!0)):V().default.setState(o),f().qq(e,{...N().jn(t)}),f().y6(e,N().jn(o))}catch(o){$(e,(0,m().t)(o))}}async function $(e,t){if(V().default.setState({...V().default.state,isLoading:!1}),i().log({level:"error",from:"onboardingActions",type:"handleOnboardingError",error:{message:`Found onboarding error: ${t.message}`,stack:String(t.stack)}}),h().x(),t instanceof P().G&&(0,r().Rp)(t.data.responseBody)&&"UnauthorizedError"===t.data.responseBody.name)return void f().ho(e,{...N().jn(V().default.state),errorMessage:t.message,debugMessage:"UnauthorizedError"});let o;if(t instanceof P().G){var n;const e=null==t||null===(n=t.data)||void 0===n||null===(n=n.responseBody)||void 0===n?void 0:n.clientData;e&&(o=(0,M().XN)(A().Z.getIntl(),e))}f().ho(e,{...N().jn(V().default.state),errorMessage:t.message,debugMessage:o||"undefined"});const{accept:a}=await g().gt({message:(0,L.jsxs)("div",{children:[(0,L.jsx)(w().Z,{style:{fontSize:17,fontWeight:500,lineHeight:"24px",paddingBottom:8},children:(0,L.jsx)(p()._H,{defaultMessage:"Oops, something went wrong.",id:"onboardingActions.onboardingErrorDialog.message"})}),(0,L.jsx)("div",{children:o??t.message})]}),acceptLabel:(0,L.jsx)(p()._H,{defaultMessage:"Start over",id:"onboardingActions.onboardingErrorDialog.startOverButton.label"}),cancelLabel:(0,L.jsx)(p()._H,{defaultMessage:"Close",id:"onboardingActions.onboardingErrorDialog.closeButton.label"})});a&&function(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:q;const n=V().default.state;N().n0(n)?o(e,{type:"new-user",disableRedirectUrl:!0,source:"redirect_to_onboarding_start"}):N().y7(n)?o(e,{type:"create-or-join",disableRedirectUrl:!0,source:"redirect_to_onboarding_start"}):e.device.isMobile?o(e,{type:"mobile-onboarding",disableRedirectUrl:!0,source:"redirect_to_onboarding_start"}):i().log({level:"error",from:"onboardingActions",type:"handleOnboardingError",error:{message:`Could not redirect onboarding: ${t.message}`,stack:String(t.stack)}})}(e,t)}async function Q(e){const{state:t}=V().default;if(N().n0(t)){const{accept:o}=await g().gt({message:(0,L.jsxs)("div",{style:{display:"block"},children:[(0,L.jsx)("div",{style:{fontWeight:600},children:(0,L.jsx)(p()._H,{defaultMessage:"Cancel new account setup?",id:"onboardingActions.closeOnboardingDialog.newUser.title"})}),(0,L.jsx)("div",{children:(0,L.jsx)(p()._H,{defaultMessage:"You'll be taken back to the Notion home page.",id:"onboardingActions.closeOnboardingDialog.newUser.subtitle"})})]}),acceptLabel:(0,L.jsx)(p()._H,{defaultMessage:"Return to home page",id:"onboardingActions.closeOnboardingDialog.newUser.confirmCloseButton.label"}),cancelLabel:(0,L.jsx)(p()._H,{defaultMessage:"Continue setup",id:"onboardingActions.closeOnboardingDialog.newUser.continueButton.label"})});if(!o)return;f().jw(e,N().jn(t)),await B().actuallyLogoutAndDeleteMostLocalData({environment:e,logoutOrigin:s().F.OnboardingExit,userId:e.currentUser.id})}else{const{accept:n}=await g().gt({message:(0,L.jsxs)("div",{style:{display:"block"},children:[(0,L.jsxs)("div",{style:{fontWeight:600},children:[" ",(0,L.jsx)(p()._H,{defaultMessage:"Cancel new workspace setup?",id:"onboardingActions.closeOnboardingDialog.existingUser.title"})]}),(0,L.jsx)("div",{style:{wordBreak:"keep-all"},children:(0,L.jsx)(p()._H,{defaultMessage:"You'll be taken back to your previous workspace.",id:"onboardingActions.closeOnboardingDialog.existingUser.subtitle"})})]}),acceptLabel:(0,L.jsx)(p()._H,{defaultMessage:"Back to previous workspace",id:"onboardingActions.closeOnboardingDialog.existingUser.confirmCloseButton.label"}),cancelLabel:(0,L.jsx)(p()._H,{defaultMessage:"Continue setup",id:"onboardingActions.closeOnboardingDialog.existingUser.continueButton.label"})});if(!n)return;f().jw(e,N().jn(t));const{mainEditorCurrentBlockStore:r}=U().default.state,a=null==r?void 0:r.getSpaceId(),s=a&&(0,R().w3)(a);if(s){const t=s.getSpaceStore();e.device.isMobileNative&&i().log({level:"info",from:"onboardingActions",type:"SpaceSwitchingDebug",data:{message:"onboardingActions.handleCloseOnboarding set space",spaceId:null==t?void 0:t.id}}),U().default.setState({...U().default.state,currentSpaceStore:t,currentSpaceViewStore:s})}const{url:l,userId:c}=v().Vr(e);let d=e;if(c&&c!==e.currentUser.id&&(d=await S().x({environment:e,newCurrentUserId:c})),l){var o;D().close();const e=()=>{const e={isOnboarding:!1,isLoading:!1,currentUserId:c};V().default.setState(e)};b().c4({environment:d,url:l}),null!==(o=d.mobileNative)&&void 0!==o&&o.supportsNativeHomeOnPhone()?y().navigateToHomeTab(d,e):e()}}}function Y(e){const{state:t}=V().default;f().J7(e,N().jn(t)),V().default.setState({isOnboarding:!1,isLoading:!1,currentUserId:e.currentUser.id})}function J(e,t,o){if(!t.isOnboarding)return;const n=[...t.historicalStages||[],{stageName:t.stage,stageNumber:t.stageNumber,timestamp:Date.now()}];V().default.setState({...t,historicalStages:n.length>20?[{stageName:"truncated",stageNumber:-1,timestamp:Date.now()}]:n}),f().o7(e,"onboarding_stage",{...N().jn(t),historical_stages:n,back:o})}},686350:(e,t,o)=>{o.d(t,{$U:()=>Y,At:()=>$,BB:()=>U,Bu:()=>N,Ck:()=>O,Fz:()=>pe,NT:()=>F,Pn:()=>W,SN:()=>Q,VW:()=>L,Vb:()=>ue,WX:()=>J,Xi:()=>ne,YH:()=>ae,_J:()=>G,bM:()=>de,bN:()=>X,bm:()=>ce,dD:()=>Z,eW:()=>D,ey:()=>z,fz:()=>B,iF:()=>j,jF:()=>K,jn:()=>q,lr:()=>V,n0:()=>R,og:()=>oe,pd:()=>se,rT:()=>te,t6:()=>re,tr:()=>P,uO:()=>le,vA:()=>ee,xk:()=>ie,y7:()=>A});o(267602),o(653476),o(470928),o(241792);var n=()=>o(991460),i=()=>o(446866),r=()=>o(799891),a=()=>o(100135),s=()=>o(255933),l=()=>o(9835),c=()=>o(568017),d=()=>o(513670),u=()=>o(696459),p=()=>o(462928),m=()=>o(824462),f=()=>o(784234),g=()=>o(636340),v=()=>o(224597),h=()=>o(261930),_=()=>o(269299),b=()=>o(594546),y=()=>o(527278),S=()=>o(345918),w=()=>o(341691),k=()=>o(297861),I=()=>o(876822),C=()=>o(749826),x=()=>o(826955),T=()=>o(723721),M=()=>o(707138);function P(e,t){return`/tutorial/${e}${"dark"===t.state.mode?"-dark":""}.png`}function A(e){return e.isOnboarding&&("desktop_join_or_create_space"===e.flow||"mobile_join_or_create_space"===e.flow)}function R(e){return e.isOnboarding&&("desktop_cold_start"===e.flow||"mobile_cold_start"===e.flow||"desktop_joinable_spaces"===e.flow||"mobile_joinable_spaces"===e.flow||"desktop_redirect"===e.flow||"mobile_redirect"===e.flow)}function B(e){const{state:t}=e;return R(t)}const E=(0,o(788860).vU)({personalWorkspaceName:{defaultMessage:"{userName}'s Notion",id:"onboardingHelpers.personalWorkspaceName"}});function D(e,t){return t.formatMessage(E.personalWorkspaceName,{userName:e.trim()})}function U(e){return e.isOnboarding&&Boolean(a().i.find((t=>t===e.stage)))}function F(e){return e.isOnboarding&&(Boolean(a().i.find((t=>t===e.stage)))||"invite"===e.stage)}function N(e){return e.isOnboarding&&"template_optout"===e.stage}function V(e){const t=e.userStore.getEmail();if(t&&e.isUserDomainJoinable)return(0,i().Gd)(t)}function L(e){return"team"===e}function O(e){return e.device.isMobileNative&&(0,k().Y)("supportsNativeHome")&&("on"===C().default.getGroup("mobile_user_activation_android_land_on_home_v2_exp")||"on"===C().default.getGroup("mobile_user_activation_ios_land_on_home")||"on"===C().default.getGroup("mobile_user_activation_ios_land_on_home_new_user"))}async function Z(e){var t,o;M().default.setState({...M().default.state,isLoading:!0});const{disableRedirects:i,environment:a}=e;r().log({level:"info",from:"onboardingHelpers",type:"loadOnboardingData",data:{message:"initializeOnboardingDataLoad"}});const[s,l,c,d,p,f,g]=await Promise.all([m().callApi({eventName:"getJoinableSpaces",environment:a,data:{}}),(0,S().iX)({environment:a,disableRedirectUrl:i}),m().callApi({eventName:"isUserDomainJoinable",environment:a,data:{}}),m().callApi({eventName:"isEmailEducation",environment:a,data:{}}),m().callApi({eventName:"validateUserCanCreateWorkspace",environment:a,data:{}}),m().callApi({eventName:"getVerifiedEmailDomain",environment:a,data:{}}),m().callApi({eventName:"getGeoIpLocation",environment:a,data:{}})]);r().log({level:"info",from:"onboardingHelpers",type:"loadOnboardingData",data:{message:"completedOnboardingDataLoad",miscDataToConvertToString:{joinableSpacesResponseType:s.type,joinableSpacesResponseStatus:s.status,joinableSpacesResponseResultsLength:"success"===s.type?s.data.results.length:void 0,userRedirectDataId:l.userRootStore.id,userRedirectDataFirstSpaceViewId:null===(t=l.firstSpaceView)||void 0===t?void 0:t.id,userRedirectDataLastVisitedSpaceViewId:null===(o=l.lastVisitedSpaceView)||void 0===o?void 0:o.id,isUserDomainJoinableResponseType:c.type,isUserDomainJoinableResponseStatus:c.status,validateUserCanCreateWorkspaceStatus:p.status}}}),M().default.setState({...M().default.state,isLoading:!1});const v={isUserDomainJoinable:"success"===c.type&&c.data.isJoinable,isEducationPlanEligible:"success"===d.type&&d.data.isEligible,canUserCreateSpace:"success"!==p.type||p.data.canUserCreateSpace,isUserUsingVerifiedDomain:"success"===f.type&&(0,u().$K)(f.data.id),...l,countryCode:"success"===g.type&&(0,n().GC)(g.data.countryCodeFromIp)?g.data.countryCodeFromIp:void 0,performanceMarketingTerm:(0,T().f4)()};return"success"===s.type?{joinableSpaceData:s.data,...v}:{joinableSpaceData:{results:[]},...v}}async function j(e){const t=await m().callApi({eventName:"getGeoIpLocation",environment:e,data:{}});return"success"===t.type&&(0,n().GC)(t.data.countryCodeFromIp)?t.data.countryCodeFromIp:void 0}function K(e){if(A(e)){const{userRootStore:t}=e.onboardingData;if("timed_trial_upsell"===e.stage)return!1;const o=t.getSpaceViewPointers();if(o)return o.length>0}return!1}function z(e){const{onboardingData:t,isNewUserFlow:o}=e,{userRootStore:n}=t,{results:i}=t.joinableSpaceData,r=n.getSpaceViewStores().map((e=>e.getSpaceId()));return o?i:i.filter((e=>r.indexOf(e.id)<0))}function H(e){return e.isOnboarding&&"profile"!==e.stage&&"error"!==e.stage}function q(e){var t,o,n;const{currentSpaceStore:i}=I().default.state,r=(0,S().kO)(),a="userPersona"in e?e.userPersona:r.function,s="userRole"in e?e.userRole:r.role,l="companySize"in e?e.companySize:r.companySize,c="planSelection"in e?e.planSelection:r.intent,d="useCases"in e?e.useCases:r.useCases,u="categories"in e?e.categories:r.categories,p="collaborativeIntent"in e?e.collaborativeIntent:r.collaborativeIntent;return{flow_name:e.isOnboarding?e.flow:"not_defined",flow_id:e.isOnboarding?e.flowId:void 0,stage:e.isOnboarding?e.stage:"not_defined",initial_workspace_type:H(e)?e.spaceJoinOrCreate:void 0,is_new_onboarding:te(e),is_create_or_join:A(e),stage_number:e.isOnboarding?e.stageNumber:void 0,num_of_joinable_spaces:e.isOnboarding&&"workspace_choose"===e.stage?(null===(t=e.joinableSpaces)||void 0===t?void 0:t.length)||0:void 0,historical_stages:e.isOnboarding?e.historicalStages:void 0,selectedPresets:e.isOnboarding&&"workspace_setup"===e.stage?e.selectedPresets:void 0,user_persona:a,user_team_role:s,user_use_cases:d,user_categories:u,user_company_size:l,plan_selection:c,plan_type:null==i?void 0:i.getPlanType(),collaborative_intent:p,stage_duration_in_ms:e.isOnboarding&&null!==(o=e.stageStats)&&void 0!==o&&o.startedTimeStampMs?Date.now()-(null===(n=e.stageStats)||void 0===n?void 0:n.startedTimeStampMs):void 0,onboarding_templates:void 0,trial_id:e.isOnboarding?e.trialId:void 0,performance_marketing_term:e.isOnboarding?e.performanceMarketingTerm:void 0}}function W(e){const{redirectSpaceId:t,redirectPageId:o,forkPageBlockId:n,hasExplicitAccessToRedirectPage:i,canJoinRedirectSpace:r,publicAccessPageId:a,oauthAuthorizationParams:s,inviteCode:l}=e;return s?{type:"oauth_authorization_redirect",...s}:n?{type:"fork_page",pageId:n}:!a||i||r?!t||i||r?t&&o&&i&&!r?{type:"guest_redirect",pageId:o,spaceId:t}:t&&o&&r?{type:"redirect_page",pageId:o,spaceId:t}:t&&l&&r?{type:"team_invite_redirect",spaceId:t,inviteCode:l}:t&&r?{type:"redirect_space",spaceId:t}:e.performanceMarketingTerm?{type:"performance_marketing_template",pageId:e.redirectPageId}:{type:"getting_started_page"}:{type:"invalid"}:{type:"public_access_page_redirect",pageId:a}}async function G(e,t){const{onboardingData:o,name:n,profilePhoto:i,password:r,emailOptIn:a}=e,s=o.userStore;b().Zf(t,{email_optin_product_tips_and_news:a,email_optin_resources_and_events:a,email_optin_notion_for_startups:a}),_().createAndCommit({userAction:"onboardingHelpers.setProfileData",environment:t,canUndo:!0,perform:e=>{const t={...i&&{profile_photo:i}};t.name=n,g().sW({store:s,data:t,transaction:e})}});const l=await w().shouldCreatePassword(t)&&!ee();r&&l&&await m().callApi({eventName:"setPassword",environment:t,data:{newPassword:r,sendEmail:!1}})}function $(e){if(!C().default.checkGate({gateName:"survey_data_writes"}))return;const{environment:t,state:o,spaceStore:n,spaceViewStore:i}=e,r=(new Date).getTime();if(i){const e=l().Dh({maybeFunction:o.userPersona,guessedFunctionVersion:4,maybeRole:o.userRole,guessedRoleVersion:2,maybeCategories:o.categories,guessedCategoriesVersion:1,maybeEducationRole:o.userEducationRole,guessedEducationRoleVersion:1,maybeEducationLevel:o.userEducationLevel,guessedEducationLevelVersion:1,maybeNotionUseFrequency:o.notionUseFrequency,guessedNotionUseFrequencyVersion:1,collectedFrom:"onboarding",collectedAt:r});void 0!==e&&h().Q1(t,e,i)}if(n){const e=l().K0({maybeCollaborativeIntent:o.collaborativeIntent,guessedCollaborativeIntentVersion:1,maybeIntent:o.planSelection,guessedIntentVersion:1,maybeCompanySize:o.companySize,guessedCompanySizeVersion:2,maybeUseCases:o.useCases,guessedUseCasesVersion:3,collectedFrom:"onboarding",collectedAt:r});void 0!==e&&v().wg(t,e,n)}}async function Q(e,t){const{spaceId:o,onboardingData:n}=e;if(!o)return;const i=x().H2.createChildStore(n.userRootStore,{table:s().bx,id:o});await async function(e,t,o){t.isChecked&&t.joinableUserEmailDomain&&await v().$F({environment:e,emailDomains:[t.joinableUserEmailDomain],spaceStore:o})}(t,e,i);const{emails:r}=e,a=d().jj(r).map((e=>({type:"newUser",value:{email:e},source:"email"})));r.length>0&&(await f().n_({environment:t,store:i,inviteTargets:a,inviteRole:"editor",isOnboarding:!0,invite:{inviteOrigin:"onboarding_invite"}}),p().qJ(t,{...q(e),emails:e.emails,auto_join_space:e.isChecked,is_bulk_invite:e.isBulkInvite}))}function Y(e){const{userStore:t}=e,o=y().Z.getIntl(),n=t.getFullName(o),i=t.getProfilePhoto()||null;if(n)return{name:n,profilePhoto:i,password:null,prefilled:!0}}const J="inviteCode";function X(e){return(e.isBulkInvite?e.emailTokens:e.emailInputs.filter((e=>""!==e.sanitizedEmail))).length>0}function ee(){var e;const{currentUserSettingsStore:t}=I().default.state;return t&&t.isReady()&&"email-password"===(null===(e=t.getSettings())||void 0===e?void 0:e.mobile_ads_signup_variant)}function te(e){return e.isOnboarding&&e.isNewUser}function oe(e){return e.device.isMobileBrowser}function ne(e){return!!e&&!e.canJoinSpace&&e.guestPageIds.length>0}function ie(e){return"guest_redirect"===e.type?"guest":"member"}function re(e){if(ne(e)){const t={type:"guest_redirect",pageId:e.guestPageIds[0],spaceId:e.id};return{spaceId:e.id,redirectData:t,spaceJoinOrCreate:"join"}}return{spaceId:e.id,spaceJoinOrCreate:"join"}}const ae={fontSize:12,color:c().ZP.mediumTextColor,fontWeight:o(707513).Ue.medium,lineHeight:"135%",marginTop:20,marginBottom:4},se={marginTop:14,marginBottom:14},le={marginTop:8,marginBottom:8};function ce(e){return{color:e.mediumTextColor}}const de={width:60},ue={marginTop:14,marginBottom:8,fontSize:16,fontWeight:600},pe={boxShadow:`0 0 0 1px ${c().ZP.red}`}},136684:(e,t,o)=>{o.d(t,{onboardingActionsDependency:()=>n});const n=new(o(677559).Ss)("onboardingActions",(()=>Promise.all([o.e(90698),o.e(84885),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(46616),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63707),o.e(86609),o.e(5006),o.e(14733),o.e(3502)]).then(o.bind(o,73377))))},707138:(e,t,o)=>{o.r(t),o.d(t,{default:()=>s,onboardingPreferenceKey:()=>r,onboardingStagesWithBack:()=>i});var n=()=>o(35980);const i=["workspace_plan_choose","workspace_collaborative_intent_choose","persona_survey","workspace_create","timed_trial_upsell","mobile_editor","mobile_sidebar","mobile_desktop","mobile_web_clipper","mobile_app_download"],r="lastOnboardingStateKeyV1";class a extends(()=>o(263184))().default{setState(e){super.setState(e),function(e){if(e.isOnboarding)if("profile"===e.stage){const{onboardingData:t,isLoading:o,password:i,passwordErrorData:a,currentUserId:s,...l}=e;n().Z.set({userId:s,key:r,value:l})}else{const{onboardingData:t,isLoading:o,currentUserId:i,...a}=e;delete a.password,n().Z.set({userId:i,key:r,value:a})}else{const{currentUserId:t,...o}=e;n().Z.set({userId:t,key:r,value:o})}}(e)}constructor(){super();const e={isOnboarding:!1,isLoading:!1,currentUserId:void 0};super.setState(e)}}const s=new a},267344:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o(263184).default.createValue({open:!1,isExistingUser:!0},{name:"PerfmarkTrialIneligibleToastStore"})},528770:(e,t,o)=>{o.d(t,{U:()=>u,n:()=>p});var n=()=>o(752778),i=()=>o(696459),r=()=>o(793935),a=()=>o(590972),s=()=>o(791388),l=()=>o(242921),c=()=>o(521635),d=()=>o(655260);function u(e){m({...e,state:"open"})}function p(e){m({...e,state:"closed"})}function m(e){const{environment:t,layoutStore:o,from:u,state:p,panelLocation:m,preventPeekWidthResize:f}=e,g=null==o?void 0:o.getParentStore();let v;if((null==g?void 0:g.table)===n().vF&&(v=g.id),"open"===p?(0,d().iM)({environment:t,collectionId:v,layoutId:null==o?void 0:o.id}):"closed"===p?(0,d().YN)({environment:t,collectionId:v,layoutId:null==o?void 0:o.id}):(0,i().t1)(p),"sidebar"!==c().Z.getPanelState(m).displayStyle)if("popup"!==c().Z.getPanelState(m).displayStyle)if("static_sidebar"!==c().Z.getPanelState(m).displayStyle);else if("open"===p){const{clampedWidth:e,hadEffect:o}=(0,l().NL)("openDetailsSidebar",f);c().Z.setSidebarIncreasedSizeOfPeekView(o),o?(r().setPeekWidth({width:e,environment:t,preventPersistWidth:!0}),window.requestAnimationFrame((()=>{c().Z.setOpen(m)}))):c().Z.setOpen(m)}else{if(c().Z.setClosed(m),c().Z.state.detailsSidebarIncreasedSizeOfPeekView){const{clampedWidth:e}=(0,l().NL)("closeDetailsSidebar");r().setPeekWidth({width:e,environment:t})}c().Z.setSidebarIncreasedSizeOfPeekView(!1)}else"open"===p?(s().Z.setState({open:!0}),c().Z.setOpen(m)):(s().Z.setState({open:!1}),c().Z.setClosed(m));else"open"===p?(r().setUpdateSidebarTab(a().gY.Info),c().Z.setOpen(m),r().setUpdateExpand({environment:t,isExpanded:!0,from:u,saveDetailsSidebarPreference:!1})):(c().Z.setClosed(m),r().setUpdateExpand({environment:t,isExpanded:!1,from:u,saveDetailsSidebarPreference:!1}))}},655260:(e,t,o)=>{o.d(t,{qe:()=>u,tV:()=>l,Ry:()=>d,DZ:()=>c,m_:()=>p,Rt:()=>s,Kv:()=>m,YN:()=>g,iM:()=>f});var n=()=>o(215134),i=()=>o(594546),r=()=>o(639708);function a(e){let{module:t,sessionId:o}=e;const n={type:t.type,session_id:o};return(0,r().f)(t)?{...n,property_id:t.propertyId,property_type:t.type}:n}function s(e){let{environment:t,context:o,from:n,sessionId:r,collectionId:a,existingLayoutId:s,collectionViewId:l}=e;(0,i().j)({environment:t,event:{eventName:"page_builder_opened",eventProperties:{context:o,from:n,sessions_id:r,collection_id:a,existing_layout_id:s,collection_view_id:l}}})}function l(e){let{environment:t,context:o,sessionId:n,collectionId:r,existingLayoutId:a,layoutSaved:s}=e;(0,i().j)({environment:t,event:{eventName:"page_builder_closed",eventProperties:{context:o,layout_saved:s,sessions_id:n,collection_id:r,existing_layout_id:a}}})}function c(e){let{environment:t,context:o,sessionId:n,module:r,collectionId:s,layoutId:l,area:c}=e;(0,i().j)({environment:t,event:{eventName:"page_builder_module_removed",eventProperties:{...a({module:r,sessionId:n}),context:o,collection_id:s,layout_id:l,area:c}}})}function d(e){let{environment:t,context:o,module:n,sessionId:r,collectionId:s,layoutId:l,isPropertyCreation:c,area:d}=e;(0,i().j)({environment:t,event:{eventName:"page_builder_module_added",eventProperties:{...a({module:n,sessionId:r}),context:o,collection_id:s,layout_id:l,is_property_created:c,area:d}}})}function u(e){let{modulesByArea:t,moduleId:o,newPosition:i}=e;const r=(0,n().B1)(t,(e=>e.id===o));if(r)return"page_main"===r.area&&"page_details"===i.area?"move_to_sidebar":"page_details"===r.area&&"page_main"===i.area?"move_to_main_page":r.area===i.area?"reorder":void 0}function p(e){let{environment:t,context:o,sessionId:n,collectionId:r,layoutId:a,action:s,moduleType:l}=e;(0,i().j)({environment:t,event:{eventName:"page_builder_module_reordered",eventProperties:{context:o,session_id:n,collection_id:r,layout_id:a,action:s,module_type:l}}})}function m(e){let{environment:t,context:o,sessionId:n,collectionId:r,layoutId:a}=e;(0,i().j)({environment:t,event:{eventName:"page_builder_reset_to_default",eventProperties:{context:o,session_id:n,collection_id:r,layout_id:a}}})}function f(e){let{environment:t,collectionId:o,layoutId:n}=e;(0,i().j)({environment:t,event:{eventName:"details_sidebar_open",eventProperties:{collection_id:o,layout_id:n}}})}function g(e){let{environment:t,collectionId:o,layoutId:n}=e;(0,i().j)({environment:t,event:{eventName:"details_sidebar_closed",eventProperties:{collection_id:o,layout_id:n}}})}},170075:(e,t,o)=>{o.d(t,{CE:()=>g,D_:()=>v,K$:()=>d,N7:()=>p,N8:()=>u,Nk:()=>c,Xh:()=>f,xN:()=>m});o(821057),o(267602),o(653476),o(241792);var n=()=>o(775283),i=()=>o(722917),r=()=>o(543172),a=()=>o(70191),s=()=>o(421654);class l extends Error{constructor(e,t){super();const o=`Collection with id ${t} had no property groups on format.property_groups`;this.message=`${e} -- ${o}`}}function c(e){var t;let{collectionStore:o,groupId:i,propertyId:r,transaction:a}=e;const c=null===(t=o.getFormat())||void 0===t?void 0:t.property_groups;if(!c)throw new l("cannot reorder properties",o.id);const d=(0,n().zh)({propertyGroups:c,groupId:i,propertyIds:[r]});s().FH({stores:[o],update:{property_groups:d},transaction:a})}function d(e){let{collectionStore:t,propertyId:o,transaction:i}=e;const r=t.getNormalizedPropertyGroups();if(!r)return;const a=(0,n().O4)({propertyGroups:r,propertyId:o});s().FH({stores:[t],update:{property_groups:a},transaction:i})}function u(e){let{collectionStore:t,newPartialPropertyIds:o,groupId:i,transaction:r}=e;const a=t.getNormalizedPropertyGroups();if(!a)throw new l("cannot reorder properties",t.id);const c=(0,n().en)({propertyGroups:a,groupId:i,errorMessageIfMissing:"cannot reorder properties"}),{id:d,...u}=(0,n().oH)({propertyGroup:c,newPartialProperties:o}),p=(0,n().x8)({propertyGroups:a,groupId:d,newValue:u});s().FH({stores:[t],update:{property_groups:p},transaction:r})}function p(e){let{collectionStore:t,newGroups:o,transaction:i}=e;s().FH({stores:[t],update:{property_groups:(0,n().fE)(o)},transaction:i})}function m(e){let{collectionStore:t,newGroupTitle:o,transaction:n}=e;const l=t.getNormalizedPropertyGroups(),c={title:o,id:(0,r().ZP)()};if(!l){const e=(0,a().zz)({format:t.getFormat(),propertyGroupId:void 0,propertyIds:void 0}).map((e=>{let{property:t}=e;return t})).filter((e=>!(0,i().S4)(e)));c.propertyIds=e}const d=[c,...l||[]];return s().FH({stores:[t],update:{property_groups:d},transaction:n}),c.id}function f(e){let{collectionStore:t,groupId:o,transaction:i}=e;const r=t.getNormalizedPropertyGroups();if(!r)return;const l=(0,a().zz)({propertyIds:void 0,propertyGroups:t.getNormalizedPropertyGroups(),propertyGroupId:o,format:t.getFormat()}),c=(0,n().tZ)({propertyGroups:r,groupId:o});s().FH({stores:[t],update:{property_groups:c,...Boolean(null==c?void 0:c.length)?void 0:{collection_page_properties:l}},transaction:i})}function g(e){let{collectionStore:t,groupId:o,transaction:i}=e;const r=t.getNormalizedPropertyGroups();if(!r)return;const a=(0,n().oC)({propertyGroups:r,groupId:o});s().FH({stores:[t],update:{property_groups:a},transaction:i})}function v(e){let{collectionStore:t,groupId:o,transaction:i}=e;const r=t.getNormalizedPropertyGroups();if(!r)return;const a=(0,n().ln)({propertyGroups:r,groupId:o});s().FH({stores:[t],update:{property_groups:a},transaction:i})}},893695:(e,t,o)=>{o.d(t,{h:()=>s,i:()=>a});var n=()=>o(696459),i=()=>o(242921),r=()=>o(267553);const a=24;function s(e){const t=(0,r().f8)(e);let o;switch(t){case"xSmall":case"small":case"medium":o=300;break;case"large":o=380;break;case"xLarge":o=i().li+2*a;break;default:(0,n().t1)(t)}return{totalWidth:o,widthMinusPadding:o-2*a}}},242921:(e,t,o)=>{o.d(t,{GH:()=>y,Iy:()=>b,NL:()=>k,NQ:()=>h,UI:()=>w,kJ:()=>x,li:()=>v,rb:()=>S,xx:()=>C});var n=o(667294),i=()=>o(142735),r=()=>o(565630),a=()=>o(513670),s=()=>o(696459),l=()=>o(887430),c=()=>o(942226),d=()=>o(590972),u=()=>o(482162),p=()=>o(521635),m=()=>o(26796),f=()=>o(893695),g=()=>o(70191);const v=380,h=280,_=1040;function b(){return u().SIDEPEEK_MIN_WIDTH+h}function y(e){let{environment:t,isInPeek:o}=e;return m().Z.state.isOpen?(0,f().h)(t).widthMinusPadding:o?"side_peek"===u().default.getPeekMode()&&u().default.getSidePeekWidth(t.WindowSizeStore.state.width)>_?v:h:d().default.state.width}function S(e){var t;let{environment:o,isInPeek:n}=e;if(m().Z.state.isOpen)return y({environment:o,isInPeek:!1});const i=null===(t=u().default.peekTargetStore.state)||void 0===t||null===(t=t.getAssociatedCollectionStore())||void 0===t?void 0:t.getLayoutStore();return i&&"static_sidebar"===p().Z.getPanelState("peek").displayStyle&&p().Z.getPanelState("peek").isOpen&&0!==i.getModules().page_details.length?y({environment:o,isInPeek:n}):0}function w(e,t){const o="peek",a=(0,i().VK)((()=>e.WindowSizeStore.state.width),[e.WindowSizeStore]),s=(0,i().VK)((()=>u().default.state.preferredSidePeekWidth),[]),l=(0,i().VK)((()=>b()),[]),c=(0,i().VK)((()=>l),[l]),[d,m]=(0,n.useState)(!1),{displayStyle:f,isOpen:g}=(0,i().VK)((()=>{const e=p().Z.getPanelState(o);return{displayStyle:e.displayStyle,isOpen:e.isOpen}}),[]),v=(0,r().D9)(s),h=(0,r().D9)(a),_=(0,r().D9)(f),y=(0,i().VK)((()=>Boolean(t)),[t]);(0,n.useEffect)((()=>{y&&void 0!==v&&v!==s&&(s<l?g&&(p().Z.setClosed(o),m(!0)):d&&(p().Z.setOpen(o),m(!1)))}),[g,y,l,s,v,d]),(0,n.useEffect)((()=>{if(!t)return;if(void 0===h||h===a)return;const e="center_peek"===u().default.getPeekMode();a<c||e&&s<c?(p().Z.setDisplayStyle({displayStyle:"popup",panelLocation:o}),p().Z.setClosed(o)):(p().Z.setDisplayStyle({displayStyle:"static_sidebar",panelLocation:o}),"popup"===_&&s<l&&p().Z.setClosed(o))}),[t,c,l,a,o,s,_,h]),(0,n.useEffect)((()=>()=>{if(!p().Z.state.detailsSidebarIncreasedSizeOfPeekView)return;const{clampedWidth:t}=k("closeDetailsSidebar"),o=e.WindowSizeStore.state.width;u().default.setSidePeekWidth(t,o),p().Z.setSidebarIncreasedSizeOfPeekView(!1)}),[e])}function k(e){let t;if("openDetailsSidebar"===e){t=I(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?Math.max(h+u().SIDEPEEK_MIN_WIDTH,u().default.state.preferredSidePeekWidth):u().default.state.preferredSidePeekWidth+h)}else"closeDetailsSidebar"===e?t=I(u().default.state.preferredSidePeekWidth-h):(0,s().t1)(e);return{clampedWidth:t,hadEffect:t!==u().default.state.preferredSidePeekWidth}}function I(e){return(0,a().uZ)(e,u().SIDEPEEK_MIN_WIDTH,(0,c().my)())}function C(e){const t=e.getLayoutStore();return!!t&&t.getModules().page_details.length>0}function x(e){const{collectionStore:t}=e;if(!C(t))return!1;const{count:o,isPropertiesModuleInPageDetails:n}=(0,g().nJ)({collectionStore:t});if(o>0)return!0;if(n&&e.skipSpecialCaseForEmptyPropertiesGroup)return!1;return l().eD({collectionStore:t,collectionViewBlockStore:t.getParentBlockStore(),checkNavigableAncestorLocked:!1})&&n}},378773:(e,t,o)=>{o.d(t,{N:()=>c,V:()=>d});var n=()=>o(142735),i=()=>o(396136),r=()=>o(122479),a=()=>o(279386),s=()=>o(311562),l=()=>o(890324);function c(e){let{environment:t,blockStore:o,from:n,blockContext:c}=e;const{device:d,currentUser:u}=t;if(!u.isLoggedIn()||(0,r().IJ)(t,o)&&!l().Z.state.editing)return!1;if(d.isMobile)return!1;if(c===s().S.InPageSnapShot)return!1;if("suggest"===a().MT.getMode(o))return!1;if(o.pathIsDead())return!1;if(o.isCollectionView()&&"topControls"!==n)return Boolean(o.canEditCollection()&&o.getCollectionViewSourceCollectionStore()&&!o.isCollectionViewPageWithContent()&&!o.isLocked());if(o.isPageBlock()||o.isExternalObjectInstancePageBlockStore()){const e=o.getAssociatedCollectionStore(),t=null==e?void 0:e.getParentStore();return Boolean(!o.isLocked()&&e&&e.canEditCollection()&&!e.isPageTreeCollection()&&(null==t?void 0:t.table)===i().iU&&!t.isLocked())}return!1}function d(e){let{environment:t,blockStore:o,from:i,blockContext:r}=e;return(0,n().VK)((()=>!!o&&c({environment:t,blockStore:o,from:i,blockContext:r})),[r,o,t,i])}},267553:(e,t,o)=>{o.d(t,{DJ:()=>n,f8:()=>a});o(267602),o(470928);const n=900,i={xSmall:n,small:1040,medium:1200,large:1500,xLarge:1/0},r=(0,o(696459).qP)(i).sort(((e,t)=>e[1]-t[1]));function a(e){var t;const o=e.WindowSizeStore.state.width;return(null===(t=r.find((e=>{let[,t]=e;return o<=t})))||void 0===t?void 0:t[0])??"large"}},70191:(e,t,o)=>{o.d(t,{Uo:()=>S,WM:()=>y,d0:()=>w,nJ:()=>k,t5:()=>b,zD:()=>I,zz:()=>_});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(470928),o(30005),o(241792),o(731107),o(228244);var n=()=>o(142735),i=()=>o(421551),r=()=>o(532850),a=()=>o(109477),s=()=>o(998411),l=()=>o(305580),c=()=>o(582025),d=()=>o(293836),u=()=>o(775283),p=()=>o(639708),m=()=>o(722917),f=()=>o(696459),g=()=>o(615676),v=()=>o(57687),h=()=>o(749826);function _(e){let{propertyGroups:t,propertyIds:o,propertyGroupId:n,format:i}=e;const r=o?o.map((e=>({property:e,visible:!0}))):void 0;if(r)return r;if(n){if(!t)return[];const e=(0,u().vX)({propertyGroups:t,groupId:n});return null!=e&&e.propertyIds?e.propertyIds.map((e=>({property:e,visible:!0}))):[]}return(i.collection_page_properties||[]).filter((e=>{var t;return null===(t=i.collection_page_sections)||void 0===t||!t.some((t=>t.section===e.property&&("inline"===t.visibility||"minimal"===t.visibility)))}))}function b(e){let{collectionStore:t,modulesByArea:o}=e;const n=(0,l().i)(t.getFormat(),t.getSchema(),void 0,a().j5.Page),i=_({propertyGroups:[],propertyIds:void 0,propertyGroupId:void 0,format:n}),r=new Set((0,d().m)({modulesByArea:o,collectionSchema:t.getSchema(),collectionFormat:n}));return i.filter((e=>!r.has(e.property)))}function y(e){let{store:t,format:o,schema:n,collectionStore:i,propertyIds:c,propertyGroupId:d,intl:u,environment:p,formulasModule:m}=e;const f=t.getModel(),b=(0,l().i)(o,n,void 0,a().j5.Page),y=_({propertyGroups:i.getNormalizedPropertyGroups({publicPageDataFallbackEnabled:!0}),propertyIds:c,propertyGroupId:d,format:b}),S=b&&b.property_visibility;if(S){return y.map((e=>{const o=n[e.property];let i;return i=("formula"!==(null==o?void 0:o.type)||!v().il)&&!Boolean(f&&r().wV({block:f,property:e.property,schema:n,getRecordModel:t.getRecordModel,userId:p.currentUser.id,userTimeZone:(0,s().r)(),intl:u,experimentService:h().default,collectionFeatureGates:(0,g().W)(),formulasModule:m})),{visibility:"show",hasValue:i,name:(null==o?void 0:o.name)??"",...e,...S.find((t=>t.property===e.property))}}))}return y?y.map((e=>{var o;return{...e,visibility:"show",hasValue:Boolean(t.getPropertyValue(e.property)),name:(null===(o=n[e.property])||void 0===o?void 0:o.name)??""}})):[]}function S(e){const{layoutStore:t,propertyId:o}=e;let n=!1,i=!1;const r=t.getModules(),a=Boolean(r.page_main.some((e=>(0,p().f)(e)?o===e.propertyId:"normalizedTitleWithIcon"===e.type&&e.propertyIds.includes(o))));return a||(i=!!r.page_details.some((e=>!!(0,p().f)(e)&&o===e.propertyId))),n=!a&&!i,n&&(i=!!r.page_details.find((e=>{let{type:t}=e;return"properties"===t}))),{isPropertyInPageDetails:i,isPropertyInGroup:n}}function w(e){const{propertyId:t,store:o}=e;return(0,n().VK)((()=>{var e;const n=null==o||null===(e=o.getAssociatedCollectionStore())||void 0===e?void 0:e.getLayoutStore();return n&&t?S({layoutStore:n,propertyId:t}):{isPropertyInPageDetails:!1,isPropertyInGroup:!1}}),[t,o])}function k(e){var t;const{collectionStore:o}=e,n=o.getLayoutStore(),r=null==n?void 0:n.getModules();if(null==r||null===(t=r.page_details)||void 0===t||!t.length)return{count:0,isPropertiesModuleInPageDetails:!1};const a=o.getSchema(),s=o.getFormat(),l=(0,i().n)({format:s,schema:a,visibilityLevels:["inline","minimal"]}).map((e=>e.section));let d=!1;const u=new Set,g=new Set;r.page_main.forEach((e=>{if((0,c().B)(e,"page_main"))if((0,p().f)(e))u.add(e.propertyId);else if((0,p().Cj)(e))l.forEach((e=>u.add(e)));else if("normalizedTitleWithIcon"!==e.type)switch(e.type){case"deleted_property":case"inlinePageSections":case"expandedBacklinks":case"discussions":case"cover":case"editor":case"views":case"viewsMain":case"transcript":case"bottomControls":case"placeholder":case"properties":return;default:(0,f().t1)(e)}else e.propertyIds.forEach((e=>{u.add(e)}))})),r.page_details.forEach((e=>{(0,c().B)(e,"page_details")&&((0,p().z1)(e)?d=!0:(0,p().f)(e)?g.add(e.propertyId):"deleted_property"!==e.type&&(0,f().t1)(e))}));const v=o.getSchema();return{count:Object.keys(v).reduce(((e,t)=>{const o=v[t];return o?(0,m().S4)(o.type)?e:g.has(t)||!u.has(t)&&d?e+1:e:e}),0),isPropertiesModuleInPageDetails:d}}function I(e){const{module:t,collectionSchema:o}=e;return t.propertyIds.filter((e=>Boolean(o[e])))}},521635:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{panelStates:{mainPage:{isOpen:!1,displayStyle:void 0,isMouseHoveringPanel:!1},peek:{isOpen:!1,displayStyle:void 0,isMouseHoveringPanel:!1}}}}updatePanelState(e,t){this.setState({...this.state,panelStates:{...this.state.panelStates,[e]:{...this.state.panelStates[e],...t}}})}resetPanelState(e){this.setState({...this.state,panelStates:{...this.state.panelStates,[e]:this.getInitialState().panelStates[e]}})}setOpen(e){this.state.panelStates[e].isOpen||this.updatePanelState(e,{isOpen:!0})}setClosed(e){this.state.panelStates[e].isOpen&&this.updatePanelState(e,{isOpen:!1})}setDisplayStyle(e){const{panelLocation:t,displayStyle:o}=e;this.state.panelStates[t].displayStyle!==o&&this.updatePanelState(t,{displayStyle:o})}setIsMouseHoveringPanel(e){const{panelLocation:t,isMouseHoveringPanel:o}=e;this.state.panelStates[t].isMouseHoveringPanel!==o&&this.updatePanelState(t,{isMouseHoveringPanel:o})}setSidebarIncreasedSizeOfPeekView(e){e!==this.state.detailsSidebarIncreasedSizeOfPeekView&&this.setState({...this.state,detailsSidebarIncreasedSizeOfPeekView:e})}getPanelState(e){return this.state.panelStates[e]}}const i=new n},26796:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{isOpen:!1}}getSessionId(){return this.state.isOpen?this.state.sessionId:void 0}}const i=new n},538230:(e,t,o)=>{o.d(t,{Z:()=>a,y:()=>i});const n=new(o(41158).D)({key:"property_groups_module_state",namespace:o(149310).$p,important:!0,trackingType:"necessary"});function i(){return{propertyGroupOpenOverridesMap:{},...n.getState()}}class r extends(()=>o(263184))().default{setState(e){super.setState(e),n.setState(e)}setPropertyGroupExpandedOverride(e){var t;const{groupId:o,override:n}=e;this.setState({...this.state,propertyGroupOpenOverridesMap:{...null==this||null===(t=this.state)||void 0===t?void 0:t.propertyGroupOpenOverridesMap,[o]:n}})}getPropertyGroupExpandedOverride(e){var t;const{groupId:o}=e;return null==this||null===(t=this.state)||void 0===t||null===(t=t.propertyGroupOpenOverridesMap)||void 0===t?void 0:t[o]}isPropertyGroupExpanded(e){const{groupId:t}=e,o=this.getPropertyGroupExpandedOverride({groupId:t});return void 0===o||"open"===o}togglePropertyGroupExpanded(e){const{groupId:t}=e,o=this.isPropertyGroupExpanded({groupId:t})?"closed":"open";this.setPropertyGroupExpandedOverride({groupId:t,override:o})}}const a=new r},113501:(e,t,o)=>{o.d(t,{Z:()=>l});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624);var n=()=>o(349220),i=(o(821057),o(670560),o(241792),()=>o(513670));class r extends(()=>o(444263))().Z{constructor(e){super(),this.blocks=void 0,this.liveBlocks=void 0,this.rootBlock=void 0,this.detachedRootBlocks=void 0,this.blocks=new Map,this.liveBlocks=new Map,this.rootBlock=this.createBlock(e,"page"),this.detachedRootBlocks=new Map}hasBlock(e){return this.blocks.has(e)}getBlock(e){return(0,n().TO)(this.blocks.get(e))}createBlock(e,t){(0,n().T)(!this.hasBlock(e.id),"Block already exists on page");const o=new a({blockStore:e,tracker:this,reference:t,onCreated:e=>{this.blocks.set(e.getId(),e)}});return o.hasLiveReference()&&this.addLiveBlock(o),o}removeBlock(e){(0,n().T)(this.hasBlock(e),"Block must exist on page"),(0,n().T)(!this.liveBlocks.has(e),"Should not be possible to remove a live block"),this.blocks.delete(e)}getLiveBlocks(){return[...this.liveBlocks.values()]}addLiveBlock(e){(0,n().T)(!this.liveBlocks.has(e.getId()),"Block already added to live blocks"),this.liveBlocks.set(e.getId(),e),this.emit({type:"add_block",blockStore:e.blockStore})}removeLiveBlock(e){this.liveBlocks.delete(e.getId()),this.emit({type:"remove_block",blockId:e.getId()})}destroy(){for(const e of this.blocks.values())e.destroy();this.blocks.clear(),this.liveBlocks.clear(),this.detachedRootBlocks.clear()}getClosestPageAndTransclusionReferenceAncestorIds(e){const t=this.liveBlocks.get(e);return t?t.getClosestPageAndTransclusionReferenceAncestors().map((e=>e.getId())):[]}getPathToBlock(e){const t=this.liveBlocks.get(e);if(!t)return;const o=[];let n=t;for(;n;){o.unshift(n.getId());const e=n.liveReferences.values().next().value;if("page"===e)return o;e&&(n=e)}throw new Error("Block should have a page ancestor")}}class a{constructor(e){this.tracker=void 0,this.blockStore=void 0,this.liveReferences=void 0,this.detachedReferences=void 0,this.childBlocks=void 0,this.childBlocksList=void 0,this.contentStoreListener=void 0;const{blockStore:t,tracker:o,reference:n,onCreated:i}=e;this.tracker=o,this.blockStore=t,this.liveReferences=new Set,this.detachedReferences=new Set,"page"===n||n.hasLiveReference()?this.liveReferences.add(n):this.detachedReferences.add(n),this.childBlocks=new Map,this.childBlocksList=[],i(this),this.contentStoreListener=()=>this.handleContentStoreChange(),this.blockStore.getKeyStore("type").addListener(this.contentStoreListener),this.blockStore.getContentStore().addListener(this.contentStoreListener),this.blockStore.getFormatStore().getKeyStore("transclusion_reference_pointer").addListener(this.contentStoreListener),this.handleContentStoreChange()}handleContentStoreChange(){const e=[...this.childBlocks.keys()],t=new Map,r=this.blockStore.getType();if(this.liveReferences.has("page")||r&&!(0,o(156642).S9)(r))for(const n of(0,o(527666).y)(this.blockStore))t.set(n.id,n);const a=[...t.keys()],s=i().e5(a,e),l=i().e5(e,a);for(const o of s)if(this.tracker.hasBlock(o)){const e=this.tracker.getBlock(o);e.addReference(this),this.childBlocks.set(o,e)}else{const e=this.tracker.createBlock((0,n().TO)(t.get(o)),this);this.childBlocks.set(o,e)}for(const o of l){const e=(0,n().TO)(this.childBlocks.get(o));this.childBlocks.delete(o),e.removeReference(this)}this.childBlocksList=[...t.keys()].map((e=>(0,n().TO)(this.childBlocks.get(e))))}getId(){return this.blockStore.id}hasLiveReference(){return this.liveReferences.size>0}addReference(e){e.hasLiveReference()?this.addLiveReference(e):this.addDetachedReference(e)}addLiveReference(e){if((0,n().T)(!this.liveReferences.has(e),"Reference already exists for block"),this.liveReferences.add(e),1===this.liveReferences.size){this.tracker.addLiveBlock(this);for(const e of this.childBlocks.values())e.updateReference(this)}}addDetachedReference(e){this.detachedReferences.add(e)}removeReference(e){e.hasLiveReference()?this.removeLiveReference(e):this.removeDetachedReference(e)}removeLiveReference(e){if(this.liveReferences.delete(e),this.detachedReferences.add("detached"),this.tracker.detachedRootBlocks.set(this.getId(),this),0===this.liveReferences.size){this.tracker.removeLiveBlock(this);for(const e of this.childBlocks.values())e.updateReference(this)}return this}removeDetachedReference(e){if(this.detachedReferences.delete(e),0===this.liveReferences.size&&0===this.detachedReferences.size){for(const[e,t]of this.childBlocks.entries())this.childBlocks.delete(e),t.removeReference(this);this.tracker.removeBlock(this.getId()),this.destroy()}}updateReference(e){const t=this.hasLiveReference();this.liveReferences.has(e)&&!e.hasLiveReference()?(this.liveReferences.delete(e),this.detachedReferences.add(e)):this.detachedReferences.has(e)&&e.hasLiveReference()&&(this.liveReferences.add(e),this.detachedReferences.delete(e));const o=this.hasLiveReference();if(t!==o){o?this.tracker.addLiveBlock(this):this.tracker.removeLiveBlock(this);for(const e of this.childBlocks.values())e.updateReference(this)}return this}getClosestPageAndTransclusionReferenceAncestors(){if(0===this.liveReferences.size)return[];if(this===this.tracker.rootBlock)return[this];const e=new Set,t=new Set,o=[this];for(;o.length>0;){const i=(0,n().TO)(o.shift());if(t.has(i))continue;const r=i.liveReferences;for(const t of r)"page"===t?e.add(i):"transclusion_reference"===t.blockStore.getType()?e.add(t):o.push(t);t.add(i)}return(0,n().T)(e.size>0,"Block must have one or more ancestors"),[...e]}destroy(){this.contentStoreListener&&(this.blockStore.getKeyStore("type").removeListener(this.contentStoreListener),this.blockStore.getContentStore().removeListener(this.contentStoreListener),this.blockStore.getFormatStore().getKeyStore("transclusion_reference_pointer").removeListener(this.contentStoreListener),this.contentStoreListener=void 0)}}class s{constructor(e){this.blockTextInstanceMap=void 0,this.textInstanceBlockMap=void 0,this.blockTextSliceTreeListenerMap=void 0,this.pageBlockTracker=void 0,this.pageBlockTrackerListener=void 0,this.blockTextInstanceMap=new Map,this.textInstanceBlockMap=new Map,this.blockTextSliceTreeListenerMap=new Map,this.pageBlockTracker=e,this.pageBlockTrackerListener=e=>this.handlePageEvent(e),this.pageBlockTracker.addListener(this.pageBlockTrackerListener);for(const{blockStore:t}of e.getLiveBlocks())this.addBlock(t)}handlePageEvent(e){const t=e.type;switch(t){case"add_block":this.addBlock(e.blockStore);break;case"remove_block":this.removeBlock(e.blockId);break;default:(0,o(696459).t1)(t)}}addBlock(e){const t=e.id;if(this.blockTextSliceTreeListenerMap.has(t))return;const o=()=>{this.handleTextSliceTreeChange(t,e.getBlockTitleTextSliceTree())};e.getSerializedTextSliceTreeStore().addListener(o),e.getLegacySerializedTextSliceTreeStore().addListener(o),this.blockTextSliceTreeListenerMap.set(t,{blockStore:e,textSliceTreeListener:o}),this.handleTextSliceTreeChange(t,e.getBlockTitleTextSliceTree())}removeBlock(e){this.removeMappingForBlock(e);const{blockStore:t,textSliceTreeListener:o}=(0,n().TO)(this.blockTextSliceTreeListenerMap.get(e));t.getSerializedTextSliceTreeStore().removeListener(o),t.getLegacySerializedTextSliceTreeStore().removeListener(o),this.blockTextSliceTreeListenerMap.delete(e)}handleTextSliceTreeChange(e,t){if(this.removeMappingForBlock(e),t)for(const o of t.getTextInstanceIds())this.addBlockTextInstanceMapping(e,o)}removeMappingForBlock(e){const t=this.blockTextInstanceMap.get(e);if(t)for(const o of t)this.removeBlockTextInstanceMapping(e,o)}addBlockTextInstanceMapping(e,t){const o=this.blockTextInstanceMap.get(e)??new Set;o.add(t),this.blockTextInstanceMap.set(e,o);const n=this.textInstanceBlockMap.get(t)??new Set;n.add(e),this.textInstanceBlockMap.set(t,n)}removeBlockTextInstanceMapping(e,t){const o=(0,n().TO)(this.blockTextInstanceMap.get(e));o.delete(t),0===o.size&&this.blockTextInstanceMap.delete(e);const i=(0,n().TO)(this.textInstanceBlockMap.get(t));i.delete(e),0===i.size&&this.textInstanceBlockMap.delete(t)}getTextInstanceIdsForBlock(e){return this.blockTextInstanceMap.has(e)?[...(0,n().TO)(this.blockTextInstanceMap.get(e))]:[]}getBlockIdsForTextInstance(e){return this.textInstanceBlockMap.has(e)?[...(0,n().TO)(this.textInstanceBlockMap.get(e))]:[]}getBlockIdForTextInstanceItemId(e,t,o){const i=this.getBlockIdsForTextInstance(e);for(const r of i){const i=(0,n().TO)(this.blockTextSliceTreeListenerMap.get(r)).blockStore;if((0,n().TO)(i.getBlockTitleTextSliceTree()).findTextSliceTreeContainingItemWithId(e,t,o))return i.id}}destroy(){for(const e of this.blockTextSliceTreeListenerMap.keys())this.removeBlock(e);this.pageBlockTracker.removeListener(this.pageBlockTrackerListener)}}const l=new class{constructor(){this.pageInfoMap=new(o(747381).Z)({getKey:e=>(0,o(216939).dn)(e)})}trackPage(e){if(this.pageInfoMap.has(e.pointer))return void(0,n().TO)(this.pageInfoMap.get(e.pointer)).pageStores.add(e);const t=new r(e),o=new s(t),i=new Set([e]);this.pageInfoMap.set(e.pointer,{pageBlockTracker:t,pageTextInstanceTracker:o,pageStores:i})}untrackPage(e){const t=e.pointer,o=(0,n().TO)(this.pageInfoMap.get(t));var i;(o.pageStores.delete(e),0===o.pageStores.size)&&(o.pageBlockTracker.destroy(),null===(i=o.pageTextInstanceTracker)||void 0===i||i.destroy(),this.pageInfoMap.delete(t))}clear(){for(const[t,o]of this.pageInfoMap){var e;o.pageBlockTracker.destroy(),null===(e=o.pageTextInstanceTracker)||void 0===e||e.destroy(),this.pageInfoMap.delete(t)}}getPageStoreForBlockStore(e){for(const[t,o]of this.pageInfoMap)for(const n of o.pageStores)if(n.uiLocation.contains(e.uiLocation))return n;for(const[t,o]of this.pageInfoMap)for(const n of o.pageStores){const t=this.pageInfoMap.get(n.pointer);if(null!=t&&t.pageBlockTracker&&t.pageBlockTracker.hasBlock(e.pointer.id))return n}}getPageBlockTrackerForPage(e){var t;return null===(t=this.pageInfoMap.get(e))||void 0===t?void 0:t.pageBlockTracker}getPageTextInstanceTrackerForPage(e){var t;return null===(t=this.pageInfoMap.get(e))||void 0===t?void 0:t.pageTextInstanceTracker}}},527666:(e,t,o)=>{o.d(t,{y:()=>i});var n=()=>o(696459);function i(e){const t=e.getType();if(!t)return[];const o=e.getRenderableContentStores();if(o.length>0)return o;switch(t){case"transclusion_reference":const o=e.getTransclusionReferenceTargetStore();return o?[o]:[];case"text":case"encrypted_text":case"page":case"personal_home_page":case"bulleted_list":case"numbered_list":case"toggle":case"quote":case"factory":case"button":case"to_do":case"column_list":case"column":case"embed":case"framer":case"tweet":case"gist":case"drive":case"audio":case"maps":case"invision":case"mixpanel":case"image":case"video":case"file":case"bookmark":case"equation":case"code":case"header":case"sub_header":case"sub_sub_header":case"collection_view":case"collection_view_page":case"breadcrumb":case"copy_indicator":case"divider":case"link_to_page":case"link_to_collection":case"figma":case"loom":case"typeform":case"codepen":case"pdf":case"callout":case"table_of_contents":case"whimsical":case"miro":case"abstract":case"sketch":case"excalidraw":case"replit":case"alias":case"transclusion_container":case"external_object_instance":case"table":case"table_row":case"tab":case"external_object_instance_page":case"hex":case"deepnote":case"ai_block":case"drawing":case"slide":case"form":case"post":case"workflow":case"transcription":return[];default:(0,n().t1)(t)}}},620218:(e,t,o)=>{o.r(t),o.d(t,{NotionPerformanceClass_TEST_ONLY:()=>S,default:()=>y});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(30005);var n=()=>o(492788),i=()=>o(990352),r=()=>o(683938),a=()=>o(680146),s=()=>o(594546),l=()=>o(897138),c=()=>o(512258),d=()=>o(410329),u=()=>o(749826),p=()=>o(601952),m=()=>o(150266);const f=Object.entries({jsHeapSizeLimit:"browser.mem.heap_size_limit",totalJSHeapSize:"browser.mem.total_heap_size",usedJSHeapSize:"browser.mem.used_heap_size"});function g(e,t,n){const{computedStoreCount:i,computedStoreSubscriptionCount:r,computedStoreRecomputesTotal:a,computedStoreRerendersTotal:s}=(0,o(435308).m8)();v(e,t,{eventName:"computed_store_metrics",eventProperties:{computed_store_metrics:{"computed_store.instances.total":i,"computed_store.subscriptions.total":r,"computed_store.recomputes.total":a,"computed_store.rerenders.total":s},collected_during:t,...n}})}function v(e,t,o,n){var i;const r=n??Math.random(),a=u().default.getConfigKey("event_trail_events",o.eventName),l=a&&"sampleRatesByMetric"in a&&"object"==typeof a.sampleRatesByMetric&&(null===(i=a.sampleRatesByMetric)||void 0===i?void 0:i[t])||0;(0,m().aw)(l,(()=>r))&&(0,s().j)({environment:e,event:o,opts:{sampling:{behavior:"custom",sampleRate:1}}})}const h=new Set(["navigation_page_render","navigation_database_render","typing_lag"]);class _{constructor(){this.startTimesByMetricName={},this.lastVisibilityChange=0,o(660293).Z.addListener((()=>{this.lastVisibilityChange=performance.now()}))}DO_NOT_USE_markLegacy(e){return this.mark(e)}mark(e){var t;let o;if(Boolean(null===(t=performance)||void 0===t?void 0:t.mark)){const t=performance.mark(e);if(t)o=t.startTime;else{const t=performance.getEntriesByName(e);o=t[t.length-1].startTime}}else o=performance.now();const n="sentry"===d().getProfilingToolForSession()&&h.has(e)?a().Yr({name:e}):void 0;return this.startTimesByMetricName[e]={startTime:o,sentryTransaction:n},{metricName:e,startTime:o,sentryTransaction:n}}DO_NOT_USE_markAllOfLegacy(e){this.markAllOf(e)}markAllOf(e){if(0===e.length)return;const t=performance.now();for(const o of e)this.startTimesByMetricName[o]={startTime:t,sentryTransaction:"sentry"===d().getProfilingToolForSession()&&h.has(o)?a().Yr({name:o}):void 0}}DO_NOT_USE_measureLegacy(e,t){this.measure(e,t)}measure(e,t){this._measure(e,t)}DO_NOT_USE_measureAfterNextFlushLegacy(e,t){this.measureAfterNextFlush(e,t)}measureAfterNextFlush(e,t){n().default.afterNextFlush((()=>{const o="getData"in t?t.getData():void 0;"getData"in t&&void 0===o||this._measure(e,{...t,data:o})}))}DO_NOT_USE_measureFromPageOriginLegacy(e,t){this.measureFromPageOrigin(e,t)}measureFromPageOrigin(e,t){if((0,r().Z)())return;const o="object"==typeof e?e.metricName:e,n=b(t.environment);"number"==typeof n&&this.measure({metricName:o,startTime:n,..."object"==typeof e?{endTime:e.endTime}:{}},t)}measureFromAppStart(e,t){if((0,r().Z)())return;const o="object"==typeof e?e.metricName:e,n="RouterStore"in(a=t.environment)&&(0,c().isPrewarmedTabInitialRender)(a)?p().default.state.prewarmedTabAppStartTimeOverride:i().getAppStartTime();var a;"number"==typeof n&&this.measure({metricName:o,startTime:n,..."object"==typeof e?{endTime:e.endTime}:{}},t)}DO_NOT_USE_measureFromPageOriginAfterNextFlushLegacy(e,t){this.measureFromPageOriginAfterNextFlush(e,t)}measureFromPageOriginAfterNextFlush(e,t){if((0,r().Z)())return;const o="object"==typeof e?e.metricName:e;n().default.afterNextFlush((()=>{const n="getData"in t?t.getData():void 0;if("getData"in t&&void 0===n)return;const i=b(t.environment);"number"==typeof i&&this._measure({metricName:o,startTime:i,..."object"==typeof e?{endTime:e.endTime}:{}},{...t,data:n})}))}_measure(e,t){const{shouldExcludeFromTimeline:n}=t;if("object"==typeof e){const{startTime:o,endTime:i,metricName:r,sentryTransaction:a}=e;this.startTimesByMetricName[r]=void 0;const s=this.getDuration({metricName:r,startTime:o,endTime:i,shouldExcludeFromTimeline:n});a&&a.finish(i),this.trackDuration({metricName:r,startTime:o,duration:s,options:t})}else if("string"==typeof e){const o=e,i=this.startTimesByMetricName[o];if(!i)return;const{startTime:r,sentryTransaction:a}=i;this.clearStartTimesByMetricName(o);const s=this.getDuration({metricName:o,startTime:r,shouldExcludeFromTimeline:n});a&&a.finish(),this.trackDuration({metricName:o,startTime:r,duration:s,options:t})}else(0,o(696459).t1)(e)}clearStartTimesByMetricName(e){this.startTimesByMetricName[e]&&(this.startTimesByMetricName[e]=void 0)}getDuration(e){const{metricName:t,startTime:o,shouldExcludeFromTimeline:n}=e,i="number"==typeof e.endTime?e.endTime:performance.now();if(!n)try{return performance.measure(t,{start:o,end:i}).duration}catch(r){}return i-o}async trackDuration(e){const{metricName:t,duration:o,startTime:n,options:i}=e,{environment:r,preboot:a,sendToStatsig:c}=i,d="data"in i?i.data:void 0;if(document.hidden)return;if("number"==typeof this.lastVisibilityChange&&n<this.lastVisibilityChange)return;const p=void 0!==i.sampleDecision?i.sampleDecision:await s().Vi({eventName:t,eventProperties:d,sampling:{behavior:"statsig",fallbackBehavior:"statsig",statsigNotAvailableBehavior:i.shouldSendIfStatsigNotInitialized?"track":"drop"}});if(p){if(r.device.isElectron&&l().C&&l().C.windowIsVisible){if(!(await l().C.windowIsVisible()))return}if(r.device.isElectron&&l().C&&l().C.isActiveTab){if(!(await l().C.isActiveTab.get()))return}s().j({environment:r,event:{eventName:t,eventProperties:{time:o,...d,sample_decision:p}},opts:{preboot:a,sampling:{behavior:"decided",sampleDecision:p}}}),c&&u().default.logEvent(t,o),function(e,t,o){if(!("memory"in(window.performance||{})))return;const n=Math.random();f.forEach((i=>{let[r,a]=i;if(!(r in window.performance.memory))return;const s={eventName:a,eventProperties:{bytes:window.performance.memory[r],collected_during:t,...o}};v(e,t,s,n)}))}(r,t,d),g(r,t,d)}}}function b(e){return"RouterStore"in e&&(0,c().isPrewarmedTabInitialRender)(e)?p().default.state.prewarmedTabAppStartTimeOverride:i().getPageOriginTime()}const y=new _;class S extends _{}},587565:(e,t,o)=>{o.d(t,{ZO:()=>g,bi:()=>v,qY:()=>_,r$:()=>h});o(159867),o(267602),o(30005),o(228244);var n=()=>o(799891),i=()=>o(530980),r=()=>o(728670),a=()=>o(80685),s=()=>o(528514),l=()=>o(933868),c=()=>o(217465),d=()=>o(422894),u=()=>o(306164),p=()=>o(989478),m=()=>o(122479),f=()=>o(876822);function g(e){const{store:t,userId:o,updatedPermissionItems:n}=e,a=t.getModel();if(!a)return!1;const s=o?{table:p().KJ,id:o}:void 0,u=c().RecordMap.create();u.setValue(t.pointer,{...a.__IM_SORRY__getValue(),permissions:n});const m=i().omK.tryUntilFound(i().omK.fromRecordMap(u),t.getRecordModel);return _({actorPointer:s,ancestors:(0,r().DW)(t.pointer,m),permissionsContext:v({actorPointers:new(d().X)(void 0===s?[]:[s]),recordPointers:new(d().X)([t.pointer]),getRecordModel:m})}).some((e=>{const t=e.permissionItem.role;return t&&(0,l().zz)(t)}))}function v(e){const{actorPointers:t,getRecordModel:o,recordPointers:i}=e,s=c().RecordMap.create();for(const n of i)if(!s.has(n)){(0,r().DW)(n,o).forEach((e=>{s.setModel(e.pointer,e)}))}const l=c().RecordMap.create(),p=(0,a().QZ)({recordMapFromWhichToFindRelevantEntities:s});for(const n in p.relevantTeamIds){const e={table:u().e0,id:n};s.has(e)||l.setModel(e,o(e))}const f=(0,a().GK)({recordMap:s,getRecordModelFnWithMaybeMissingRecords:o,actorPointers:t,logErrorFn:e=>{const{from:t,type:o,error:i,data:r}=e;n().log({level:"error",from:t,type:o,error:{name:i.name,message:i.message,stack:i.stack},data:{miscDataToConvertToString:r}})}});return{actorPointersSet:new(d().X)(t),actorMemberships:f,ancestorsRecordMap:s,explicitTeamsRecordMap:l,spacesForSpaceMemberComputation:(0,m().RL)({ancestorsRecordMap:s,getRecordModel:o}),enabledTrustedDomainMap:void 0}}function h(e){const{actor:t,recordPointer:o,permissionsContext:n}=e,i=(0,r().uv)(o,n.ancestorsRecordMap),a=f().default.state.currentSpaceStore,c=a&&a.isDefined()&&!i.findLast(s().zX)?[...i,a.getModel()]:i,d=_({actorPointer:null==t?void 0:t.pointer,ancestors:c,permissionsContext:n});if(1===d.length){const e=d[0];if((0,l().$D)(e.permissionItem)&&(0,l().YX)(e.permissionItem.role))return e}}function _(e){const{actorPointer:t,ancestors:o,ignorePublicPermissions:n,permissionsContext:i}=e;return(0,s().X0)({actorPointer:t,userActorEmail:void 0,ancestors:o,ignorePublicPermissions:n,permissionsContext:i})}},384334:(e,t,o)=>{o.d(t,{$X:()=>r,Ai:()=>h,Aq:()=>u,Ay:()=>d,BX:()=>c,PQ:()=>f,Rt:()=>p,SJ:()=>m,cY:()=>l,g8:()=>g,gF:()=>_,lj:()=>s,uD:()=>v,uY:()=>a,x8:()=>b});var n=()=>o(594546),i=()=>o(589525);function r(e){let{environment:t,from:o}=e;(0,n().K4)(t,"open_home",{from:o,...(0,i().UF)({environment:t})})}function a(e){let{environment:t,args:o}=e;(0,n().K4)(t,"home_loaded",o)}function s(e){let{environment:t}=e;(0,n().K4)(t,"open_home_more_menu",{})}function l(e){const{environment:t,show:o,feature:i,from:r}=e;(0,n().K4)(t,"toggle_home_feature",{show:o,feature:i,from:r})}function c(e){let{environment:t,oldValue:o,newValue:i,from:r}=e;(0,n().K4)(t,"change_start_page",{old_value:o,new_value:i,from:r})}function d(e){let{environment:t,index:o,teamId:i}=e;(0,n().K4)(t,"change_home_trending_source",{source_type:i?"team":"space",selected_index:o,selected_team_id:i})}function u(e){let{environment:t,from:o}=e;(0,n().K4)(t,"click_empty_my_tasks",{from:o})}function p(e){let{environment:t,from:o}=e;(0,n().j)({environment:t,event:{eventName:"click_empty_custom_db",eventProperties:{from:o}}})}function m(e){let{environment:t,from:o}=e;(0,n().K4)(t,"close_task_migration_modal",{from:o})}function f(e,t){(0,n().K4)(e,"open_home_tip",t)}function g(e,t){(0,n().K4)(e,"check_home_tip",t)}function v(e,t){(0,n().K4)(e,"show_completed_home_tips",t)}function h(e,t){(0,n().K4)(e,"home_tips_modal_error",t)}function _(e){let{environment:t}=e;(0,n().K4)(t,"visit_home_help_page")}function b(e){let{environment:t,firstUnloadedCachePageIndex:o}=e;(0,n().j)({environment:t,event:{eventName:"home.recents.first_unloaded_cache_page_index",eventProperties:{first_unloaded_cache_page_index:o}}})}},561707:(e,t,o)=>{o.d(t,{ib:()=>s,t3:()=>l});var n=()=>o(506347),i=()=>o(696459),r=()=>o(876822),a=()=>o(772529);function s(e){let{blockOrCollectionId:t}=e;const o=l({blockOrCollectionId:t});switch(o){case"home":return n().tY.PersonalHomePage;case"home_tile_recents":return n().tY.PersonalHomeTileRecents;case"home_tile_trending":return n().tY.PersonalHomeTileTrending;case"home_tile_tips":return n().tY.PersonalHomeTileTips;case"home_tile_tasks":return n().tY.PersonalHomeTileTasks;case"home_tasks":return n().tY.PersonalHomePageTasks;case"home_tile_custom_db":return n().tY.PersonalHomeTileCustomDb;case"home_custom_db":return n().tY.PersonalHomePageCustomDb;case"home_tile_similar_users":return n().tY.PersonalHomeTileSimilarUsers;case"home_tile_most_visited":return n().tY.PersonalHomeTileMostVisited;case"home_tile_last_edited":return n().tY.PersonalHomeTileLastEdited;case"home_tile_favorites":return n().tY.PersonalHomeTileFavorites;case"home_unknown":return n().tY.PersonalHomeUnknown;case"home_tile_notes":return n().tY.PersonalHomeNotes;case void 0:return;default:(0,i().t1)(o)}}function l(e){let{blockOrCollectionId:t}=e;const o=(0,a().G)({blockOrCollectionId:t}),{mainEditorCurrentBlockStore:n}=r().default.state;if(o)switch(o){case"main":return"home";case"myTasksAssignedToMeCollectionView":case"myTasks":return(0,a().WE)(n)?"home_tile_tasks":"home_tasks";case"customDbCollectionView":case"customDb":return(0,a().WE)(n)?"home_tile_custom_db":"home_custom_db";case"trendingCollectionView":return"home_tile_trending";case"similarUsersCollectionView":return"home_tile_similar_users";case"mostVisitedCollectionView":return"home_tile_most_visited";case"lastEditedCollectionView":return"home_tile_last_edited";case"favoritesCollectionView":return"home_tile_favorites";case"trending":case"trendingCollection":case"similarUsers":case"similarUsersCollection":case"mostVisited":case"mostVisitedCollection":case"lastEdited":case"lastEditedCollection":case"favorites":case"favoritesCollection":case"posts":case"postsCollectionView":return"home_unknown";default:(0,i().t1)(o)}}},772529:(e,t,o)=>{o.d(t,{Al:()=>v,Ep:()=>h,G:()=>m,J2:()=>_,Kj:()=>f,WE:()=>g,_B:()=>b,su:()=>y});o(267602),o(470928);var n=()=>o(285670),i=()=>o(396136),r=()=>o(752778),a=()=>o(139978),s=()=>o(513670),l=()=>o(696459),c=()=>o(876822),d=()=>o(826955);const u=(0,s().HP)(((e,t)=>o(336662).hH({userId:e,spaceId:t})),(function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return JSON.stringify(t)})),p=(0,s().HP)(((e,t,o)=>{if(!e||!t||!o)return;const[n]=(0,l().qP)(u(t,o)).find((t=>{let[o,n]=t;return n===e}))??[];return n}),(function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return JSON.stringify(t)}));function m(e){var t,o;let{blockOrCollectionId:n}=e;const i=null===(t=c().default.state.currentUserStore)||void 0===t?void 0:t.id,r=null===(o=c().default.state.currentSpaceStore)||void 0===o?void 0:o.id;if(i&&r&&n)return p(n,i,r)}function f(e){return(0,l().$K)(m({blockOrCollectionId:e}))}function g(e){return!!e&&"main"===m({blockOrCollectionId:e.id})}function v(e){const t=null==e?void 0:e.getParentId(),o=null==e?void 0:e.getSpaceId();if(!t||!o||!e)return;const n=u(t,o).main,r=e.getSpaceStore();return n&&r?d().G.createChildStore(r,{table:i().iU,id:n,spaceId:r.id}):void 0}function h(e){var t,o;const n=null===(t=c().default.state.currentUserStore)||void 0===t?void 0:t.id,i=null===(o=c().default.state.currentSpaceStore)||void 0===o?void 0:o.id;if(n&&i)return u(n,i)[e]}function _(e){const t=c().default.state.currentSpaceStore;if(!t)return;const o=t.id;switch(e){case"main":case"myTasks":case"customDb":case"trending":case"similarUsers":case"mostVisited":case"lastEdited":case"favorites":case"posts":const n=h(e);return n?d().G.createChildStore(t,{table:i().iU,id:n,spaceId:o}):void 0;case"myTasksAssignedToMeCollectionView":case"customDbCollectionView":case"similarUsersCollectionView":case"trendingCollectionView":case"mostVisitedCollectionView":case"lastEditedCollectionView":case"favoritesCollectionView":case"postsCollectionView":const s=h(e);return s?d().Xr.createChildStore(t,{table:a().np,id:s,spaceId:o}):void 0;case"trendingCollection":case"similarUsersCollection":case"mostVisitedCollection":case"lastEditedCollection":case"favoritesCollection":const c=h(e);return c?d().NW.createChildStore(t,{table:r().vF,id:c,spaceId:o}):void 0;default:(0,l().t1)(e)}}function b(){return{hide_linked_collection_name:!0,collection_peek_mode:n().l,inline_collection_first_load_limit:{type:"load_limit",limit:20}}}const y=(0,o(148126).UY)("guides.taskDatabases")},142589:(e,t,o)=>{o.d(t,{U:()=>r,x:()=>a});var n=()=>o(297861),i=()=>o(749826);function r(e){const{isMobileNative:t}=e,o=e.disableExposureLogging??!1;return t?(0,n().Y)("supportsPosts"):"on"===i().default.getEligibleGroup({experimentId:"posts_prototype",defaultGroup:"control",disableExposureLogging:o})}function a(e){const t=e.disableExposureLogging??!1;return"on"===i().default.getEligibleGroup({experimentId:"feed_collection_view",defaultGroup:"control",disableExposureLogging:t})}},350430:(e,t,o)=>{o.d(t,{Z:()=>i});o(267602),o(470928);class n extends(()=>o(442))().Z{containedByAssistantEditCard(e){return Boolean(this.find((t=>{const n=t.getNode();return n instanceof HTMLElement&&(0,o(435441).r3)(n,e)})))}getEditById(e){for(const t of this.members)for(const n of t.getGroups())if("updatedPage"===n.type){if(!n.didCreatePage)for(const t of n.groupedEdits)if(t.editId===e)return t}else"removedPage"===n.type||(0,o(696459).t1)(n)}}const i=new n},983993:(e,t,o)=>{o.d(t,{Z:()=>i});o(267602),o(470928);class n extends(()=>o(914149))().B{findBlockPropertyValue(e,t,o){return this.find((n=>n.props.store===e&&n.props.property===t&&(!o||n.props.format===o)))}findBlockPropertyValueByBlockId(e,t,o){return this.find((n=>n.props.store.id===e&&n.props.property===t&&(!o||n.props.format===o)))}getRect(e,t){const o=this.findBlockPropertyValue(e,t);if(o){const e=o.getNode();if(e&&e instanceof Element)return e.getBoundingClientRect()}}}const i=new n},472753:(e,t,o)=>{o.d(t,{R:()=>i});o(267602),o(653476),o(470928);class n extends(()=>o(442))().Z{findBlockFromStore(e){return this.find((t=>t.getBlockStore()===e))}findAllBlocksFromStore(e){return this.filter((t=>t.getBlockStore()===e))}findBlockFromStoreWithMethod(e,t){return this.find((o=>o.getBlockStore()===e&&"function"==typeof o[t]))}findBlockFromId(e){return this.find((t=>{const o=t.getBlockStore();return o&&o.id===e}))}findNodeFromStore(e){const t=this.findBlockFromStore(e);if(t)return t.getNode()}getRect(e){const t=this.findNodeFromStore(e);if(t&&t instanceof Element)return t.getBoundingClientRect()}findCollectionViewBlockFromStore(e){return this.find((t=>t.getBlockStore()===e&&("collection_view"===t.renderedType||"collection_view_page"===t.renderedType)&&"collectionContextStore"in t))}findCollectionViewBlockFromId(e){return this.find((t=>{var o;return Boolean((null===(o=t.getBlockStore())||void 0===o?void 0:o.id)===e&&("collection_view"===t.renderedType||"collection_view_page"===t.renderedType)&&"collectionContextStore"in t)}))}}const i=new n;(0,o(947115).exposeDebugValue)("GlobalBlockRegistry",i)},874210:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(442))().Z{}const i=new n},244826:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(442))().Z{}const i=new n},105602:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(442))().Z{}const i=new n},677556:(e,t,o)=>{o.d(t,{Z:()=>r});o(267602),o(653476),o(470928);class n extends(()=>o(442))().Z{constructor(){super(...arguments),this.isDropTargetForKey=(e,t)=>e.props.dropTargetKey===t}findDropTargetFromKey(e){return this.find((t=>this.isDropTargetForKey(t,e)))}findDropTargetsFromKey(e){return this.filter((t=>this.isDropTargetForKey(t,e)))}}const i=new n;(0,o(947115).exposeDebugValue)("GlobalDropTargetRegistry",i);const r=i},156538:(e,t,o)=>{o.d(t,{E:()=>i});o(267602),o(470928);class n extends(()=>o(442))().Z{findEditableWithinSelectable(e){return this.find((t=>t.getContextClosestSelectable()===e))}findEditableWithStore(e){return this.find((t=>t.props.store===e))}findNodeFromStore(e){const t=this.findEditableWithStore(e);if(t)return t.getNode()}findStoreFromNode(e){const t=this.find((t=>t.getNode()===e));if(t)return t.props.store}}const i=new n},664128:(e,t,o)=>{o.d(t,{Z:()=>i});o(267602),o(470928);class n extends(()=>o(914149))().B{shouldPreventMobileAutoScroll(e){const t=this.find((t=>t.capture&&!(t.allowMobileAutoScroll&&e.device.isMobile)));return Boolean(t)}}const i=new n},895310:(e,t,o)=>{o.d(t,{Z:()=>i});o(267602),o(470928);class n extends(()=>o(914149))().B{isInlineAutocompleteOpen(){const e=this.find((e=>e.isOpen));return Boolean(e)}}const i=new n},487073:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(442))().Z{}const i=new n},972079:(e,t,o)=>{o.d(t,{Z:()=>i});o(670560),o(267602),o(470928),o(30005);class n extends(()=>o(442))().Z{findOutlinerItemFromStore(e){if(e)return this.find((t=>t.store===e))}findOutlinerItemsFromId(e){const t=[];return this.forEach((o=>{o.store.id===e&&t.push(o)})),t}}const i=new n},163085:(e,t,o)=>{o.d(t,{Z:()=>r});o(267602),o(470928);var n=()=>o(311562);class i extends(()=>o(442))().Z{isBlockInFrame(e){const t=e.getRecordStoreUIRoot();return Boolean(this.find((e=>e.blockContext===n().S.Frame&&e.store===t)))}isBlockInTemplate(e){const t=e.getRecordStoreUIRoot();return Boolean(this.find((e=>e.blockContext===n().S.InAppTemplatePreview&&e.store===t)))}isBlockInPageSnapshot(e){const t=e.getRecordStoreUIRoot();return Boolean(this.find((e=>e.blockContext===n().S.InPageSnapShot&&e.store===t)))}isBlockInWiki(e){const t=e.getRecordStoreUIRoot();return Boolean(this.find((e=>(0,o(760651).A)(e.store)&&e.store===t)))}openNewPageDiscussionInput(e){const t=this.find((t=>t.store.id===e.id));if(!t)return;const{pageViewBlockStore:o}=t;o.setState({...o.state,forceDiscussionOpen:!0})}}const r=new i},984933:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(442))().Z{}const i=new n},352761:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(442))().Z{}const i=new n},32969:(e,t,o)=>{o.d(t,{C:()=>a});o(267602),o(653476),o(470928),o(241792);var n=()=>o(513670),i=()=>o(965903);class r extends(()=>o(442))().Z{getMembersByDOMOrder(e){let{filter:t}=e;return super.getMembersByDOMOrder({filter:e=>!e.props.isHoverMenu&&t(e)})}findSelectableFromStore(e){return this.find((t=>t.props.store===e))}findScrollToSelectableFromStore(e){return this.find((t=>t.props.store===e&&t.props.canSelect&&!t.props.disableScrollToReveal&&t.getContextSelectableContainer()===i().default.getCurrentDefaultContainer()))}findScrollToSelectablesFromIds(e){return this.filter((t=>e.includes(t.props.store.id)&&t.props.canSelect&&!t.props.disableScrollToReveal&&t.getContextSelectableContainer()===i().default.getCurrentDefaultContainer()))}findSelectablesFromStore(e){return this.filter((t=>t.props.store===e))}findNodeFromStore(e){const t=this.findSelectableFromStore(e);if(t)return t.getNode()}getRectFromStore(e){const t=this.findNodeFromStore(e);if(t&&t instanceof Element)return t.getBoundingClientRect()}findEditableStoreWithin(e){const t=this.findSelectableFromStore(e);if(t){const e=o(156538).E.findEditableWithinSelectable(t);if(e)return e.props.store}}findSelectablesFromIds(e){const t=i().default.getCurrentDefaultContainer(),o=this.getMembersByDOMOrder({filter:()=>!0});return n().oA(e.map((e=>o.find((o=>{const n=o.props.store,i=o.getContextSelectableContainer();return Boolean(n&&n.id===e&&i===t)})))))}findAllSelectablesFromIds(e){const t=i().default.getCurrentDefaultContainer(),o=this.getMembersByDOMOrder({filter:()=>!0});return n().xH(e.map((e=>o.filter((o=>{const n=o.props.store,i=o.getContextSelectableContainer();return Boolean(n&&n.id===e&&i===t)})))))}findNodeFromBlockId(e){var t;const o=this.findSelectablesFromIds([e]);return null==o||null===(t=o[0])||void 0===t?void 0:t.getNode()}findSelectableFromChildNode(e){const t=this.getMembersByDOMOrder({filter:t=>{var o;return null===(o=t.getNode())||void 0===o?void 0:o.contains(e)}});return t[t.length-1]}findClosestVisibleParent(e){let t=e.getParentBlockStore();for(;t;){const e=t.getParentBlockStore();if(!e)return{};const o=this.findNodeFromBlockId(t.id);if(o)return{node:o,blockStore:t};t=e}return{}}}const a=new r;(0,o(947115).exposeDebugValue)("GlobalSelectableRegistry",a)},98228:(e,t,o)=>{o.d(t,{E5:()=>i,rE:()=>r,vp:()=>n});const n=300,i=75,r=225},828946:(e,t,o)=>{o.d(t,{x:()=>n});const n={searchActions:new(o(677559).Ss)("searchActions",(async()=>Promise.all([o.e(62743),o.e(52774),o.e(44832),o.e(90698),o.e(84885),o.e(37358),o.e(5242),o.e(7312),o.e(90424),o.e(81580),o.e(84325),o.e(31189),o.e(69343),o.e(46293),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(46616),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63707),o.e(86609),o.e(91253),o.e(4642),o.e(5006),o.e(6612),o.e(61171),o.e(23179),o.e(75377),o.e(31020),o.e(2942),o.e(73682),o.e(58591),o.e(54803),o.e(1953),o.e(10216),o.e(58565),o.e(69197),o.e(42055),o.e(38739),o.e(44751),o.e(81567),o.e(63257),o.e(34291),o.e(1913),o.e(56054),o.e(95076),o.e(82658),o.e(45741)]).then(o.bind(o,729675))))}},735039:(e,t,o)=>{o.d(t,{Qu:()=>r,RA:()=>p,U3:()=>u,pv:()=>d});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(241792);var n=()=>o(513670);const i=new(o(677559).Ss)("minisearch",(async()=>await o.e(95214).then(o.bind(o,565370)))),r=3,a=5,s=new Set(["a","an","and","are","as","at","be","but","by","for","if","in","is","it","of","on","or","that","the","to","was","will","with"]);function l(e,t,o){return e.length>=r}function c(e,t,o){return e.length>=a&&.2}function d(e){return e.split(/[^\w]+/g).filter((e=>!s.has(e)))}async function u(){const{default:e}=await i.load(),t=new e({fields:["text","id","inits"],storeFields:["block"],searchOptions:{prefix:l,fuzzy:c},tokenize:(e,t)=>e.split(/\s/g),processTerm:(e,t)=>{const o=e.toLowerCase();if(!s.has(e))switch(t){case"text":{const e=d(o).filter((e=>e.length>r));return(0,n().jj)([o,...e])}case"inits":return[...Array(e.length).keys()].slice(0,e.length-r+1).map(((e,t)=>o.slice(t)));default:return o}}});return{index:t,getAllBlocks:()=>t.search(e.wildcard)}}function p(e,t,o){const n=e.normalize().toLowerCase(),i=t.normalize().toLowerCase();if(n===i)return o.exactMatch;const r=i.indexOf(n);return 0===r?o.prefixMatch:" "===i[r-1]?o.wordPrefixMatch:r>-1?o.substringMatch:1}},590166:(e,t,o)=>{o.d(t,{Nc:()=>M,S1:()=>T});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(470928),o(30005),o(241792);var n=()=>o(364402),i=()=>o(156642),r=()=>o(647834),a=()=>o(530980),s=()=>o(728670),l=()=>o(251887),c=()=>o(160916),d=()=>o(217465),u=()=>o(233878),p=()=>o(396136),m=()=>o(513670),f=()=>o(781105),g=()=>o(239482),v=()=>o(214445),h=()=>o(345918),_=()=>o(749826),b=()=>o(773725),y=()=>o(63317),S=()=>o(826955),w=()=>o(768905),k=()=>o(735039);const I=432e5,C=1e3;async function x(e){let{currentSpaceStore:t,environment:o,blockSourceLookup:i,recordsIdsToSubscribe:v}=e;const h=performance.now(),_=t.id,b=d().RecordMapWithRole.create(),y=Array.from(i.keys()).map((e=>({table:p().iU,id:e,spaceId:_}))),w=new Set;await(0,u().uf)({recordPointers:y,recordMap:b,loadRecordModel:async e=>{const n=await(0,f().Ye)({environment:o,pointer:e});if(!n){w.add(e.id);const o=S().t1.createChildStore(t,e);await o.load();const n=o.getRole(),i=o.getModel();if(n)return{model:i,role:n}}return n},recurFn:e=>m().oA([(0,l().tz)(e)&&e.getParentPointer(),e.table===p().iU&&e.getCollectionPointer()])});const k=performance.now(),I=c().mF.fromRecordMapWithRole(b),x=a().omK.fromGetRecordValueFn(I),T=new Array;for(const[a,l]of i.entries()){const e={table:p().iU,id:a,spaceId:_};let o;v.has(a)&&(o=S().t1.createChildStore(t,e));const i=x(e);if(!i)continue;const c=(0,s().Wq)(e,b);if(0===c.length)continue;if(i.getSpaceId()!==t.id)continue;if(!l)continue;const d=(0,g().KU)(c);if(d&&Boolean(d.value.archived_by))continue;const u=(0,r().$B)((0,n().ut)({blockValue:i,getRecordValue:I}).text);if(!u)continue;const m=u.substring(0,C).trim();T.push({blockModel:i,text:m,path:c,source:l,blockStore:o})}return{indexRecords:T.map((e=>{return{id:e.blockModel.id,text:e.text,inits:(t=e.text,t.split(" ").map((e=>Array.from(e).slice(0,1))).join("")),block:e};var t})),recordMap:b,numRecordsRequiredSync:w.size,recordsLoadedMs:k-h,textGeneratedMs:performance.now()-k}}async function T(e){const{environment:t,currentSpaceStore:o,currentSpaceViewStore:n}=e,r=performance.now(),{id:a}=o,s=new Map,l=new Set;function c(e,t){var o;s.has(e)?null===(o=s.get(e))||void 0===o||o.add(t):s.set(e,new Set([t]))}const d=(new Date).getTime();if(n)for(const i of n.getBookmarkedPageIds())c(i,"bookmarkedPage");const u=t.currentUser.id;if(n){for(const{id:o}of(0,h().KA)(t,n))c(o,"sharedPage");const e=d-I;t.defaultRecordCache.inMemoryRecordCache.forEachRecord(u,(t=>{let{model:n}=t;if(n.table===p().iU&&a===o.id){const{id:t,last_edited_time:o,last_edited_by_id:r,type:a}=n;(0,i().S9)(a)&&r===u&&o&&o>e&&(c(t,"defaultRecordCache"),l.add(t))}}))}const m=b().Z.getVisitedIds(u);for(const i of m)c(i,"frecencyStore"),l.add(i);if(u)for(const i of(0,v().hB)({spaceId:a,userId:u})??[])c(i.pageId,"frecencyStore"),l.add(i.pageId);if(a&&u){var f;const e=w().default.getUserSignals({spaceId:a,userId:u});var g,S;if(Object.values((null==e?void 0:e.similarUserRecentPages)??{}).forEach((e=>{let{pageId:t}=e;c(t,"similarUser1dRecentPages"),l.add(t)})),null==e||null===(f=e.topPages7dPageView)||void 0===f||f.forEach((e=>{let{pageId:t}=e;c(t,"topPages7dPageView"),l.add(t)})),"on"===_().default.getGroup("search-include-all-local-sources"))null==e||null===(g=e.editedPages)||void 0===g||g.forEach((e=>{let{pageId:t}=e;c(t,"editedPages1d"),l.add(t)})),null==e||null===(S=e.similarUsersEditedPages)||void 0===S||S.forEach((e=>{let{pageId:t}=e;c(t,"similarUsersEditedPages1d"),l.add(t)}))}const C=y().Z.get(a);C&&C.forEach((e=>{let{pageId:t}=e;c(t,"recentVisit"),l.add(t)}));const T={spacePage:0,recentVisit:0,bookmarkedPage:0,sharedPage:0,frecencyStore:0,teamPage:0,defaultRecordCache:0,unknown:0,similarUser1dRecentPages:0,topPages7dPageView:0,editedPages1d:0,similarUsersEditedPages1d:0};s.forEach((e=>{e.forEach((e=>{T[e]+=1}))}));const M=performance.now(),{indexRecords:P,recordMap:A,numRecordsRequiredSync:R,recordsLoadedMs:B,textGeneratedMs:E}=await x({currentSpaceStore:o,environment:t,blockSourceLookup:s,recordsIdsToSubscribe:l}),{index:D,getAllBlocks:U}=await(0,k().U3)(),F=performance.now();await D.addAllAsync(P);const N=performance.now();return{spaceId:o.id,blocks:D,getAllBlocks:U,recordMap:A,blockSourceCount:T,buildStartTime:r,numRecordsRequiredSync:R,timings:{blocksGatheredMs:M-r,recordsLoadedMs:B,textGeneratedMs:E,indexMs:N-F}}}async function M(e){let{currentSpaceStore:t,id:o,source:n}=e;const i=new Map;i.set(o,n);const r=new Set([o]),a=t.environment,{indexRecords:s}=await x({currentSpaceStore:t,environment:a,blockSourceLookup:i,recordsIdsToSubscribe:r});return s.find((e=>e.id===o))}},815532:(e,t,o)=>{o.d(t,{TN:()=>b,DD:()=>_,bP:()=>S,AP:()=>y,rQ:()=>w});var n=()=>o(956057),i=()=>o(696459),r=()=>o(253502),a=()=>o(82937),s=()=>o(286338),l=()=>o(793935),c=()=>o(589525),d=()=>o(291335),u=()=>o(482162),p=()=>o(690664),m=()=>o(105649),f=()=>o(381140),g=()=>o(465755);function v(e){const{environment:t,contentType:o,autoLoaded:n}=e,s=d().sidebarExpandedStore.state;d().sidebarOpenStore.state&&!s&&l().close(),c().Sx(t)&&l().setUpdateExpand({environment:t,isExpanded:!1,from:"close_for_space",saveDetailsSidebarPreference:!1}),u().default.isSidePeekOpen()&&a().xv({environment:t,from:"secondary_sidebar_expand"}),function(e){const{environment:t,contentType:o,autoLoaded:n}=e;switch(o){case"inbox":r().l2({environment:t,auto_loaded:n});break;case"activity":case"none":break;case"private_pages":f().PR(t,{outliner_type:"private",auto_loaded:n});break;case"shared_pages":f().PR(t,{outliner_type:"shared",auto_loaded:n});break;case"assistant":f().P0(t,{auto_loaded:n});break;case"teams":g().pi(t,{from:"sidebar_browse_team_item",auto_loaded:n});break;default:(0,i().t1)(o)}}({environment:t,contentType:o,autoLoaded:n})}function h(e){const{environment:t,contentType:o}=e;switch(o){case"inbox":r().Br({environment:t});break;case"activity":case"private_pages":case"shared_pages":case"assistant":case"teams":case"none":break;default:(0,i().t1)(o)}}function _(e){const{environment:t,contentType:o,skipAnimation:i,autoLoaded:r}=e;m().default.isVisible()&&h({environment:t,contentType:m().default.state.contentType}),v({environment:t,contentType:o,autoLoaded:Boolean(r)});const{modeByContentType:a}=p().default.state,l=a[o],c="assistant"===o&&"panel"===l,d=(0,s().hN)(t)||c?l:"peek";m().default.setState({...m().default.state,contentType:o,openState:i?"open":"opening",mode:d,flowId:n().Il()}),p().default.setState({...p().default.state,openState:"open",contentType:o,mode:d})}function b(e){const{environment:t,skipAnimation:o,autoClose:n}=e;m().default.isVisible()&&(m().default.setState({...m().default.state,openState:o?"closed":"closing",autoClosed:Boolean(n)}),p().default.setState({...p().default.state,openState:"closed"}),h({environment:t,contentType:m().default.state.contentType}))}function y(e){const{environment:t,contentType:o}=e,n=m().default.isOpen(),i=m().default.state.contentType;n&&i===o?b({environment:t}):_({environment:t,contentType:o})}function S(){const{mode:e,contentType:t}=m().default.state;let o;switch(e){case"peek":o="panel";break;case"panel":o="peek";break;default:(0,i().t1)(e)}const{modeByContentType:n}=p().default.state;return m().default.setState({...m().default.state,mode:o,modeByContentType:{...n,[t]:o}}),p().default.setState({...p().default.state,mode:o,modeByContentType:{...n,[t]:o}}),o}function w(e){const{environment:t}=e;m().default.isOpen()&&"peek"===m().default.state.mode&&b({environment:t})}},123145:(e,t,o)=>{o.d(t,{EA:()=>c,VV:()=>s,dc:()=>l,l_:()=>a});var n=()=>o(846550),i=()=>o(690664),r=()=>o(105649);function a(){return i().default.getWidth()}function s(){const e=r().default.state.openState,t=r().default.state.mode;return"closed"===e||"closing"===e||"peek"===t?0:a()}function l(){return(0,n().yK)((e=>({button:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,height:28,width:28},icon:{fill:e.mediumIconColor,width:16,height:16}})),[])}function c(){return r().default.isOpen()&&"assistant"===r().default.state.contentType}},690664:(e,t,o)=>{o.d(t,{default:()=>f,o:()=>s,u:()=>a});var n=()=>o(245015),i=()=>o(513670),r=()=>o(105649);const a=320,s=470,l="secondary_sidebar",c={openState:"closed",contentType:"none",mode:"peek",modeByContentType:{none:"peek",inbox:"peek",activity:"peek",private_pages:"peek",shared_pages:"peek",assistant:"peek",teams:"peek"},widths:{none:320,inbox:390,activity:320,private_pages:320,shared_pages:320,assistant:320,teams:320}};function d(e){n().Z.set(l,e)}function u(){const e=n().Z.get(l),t=void 0===i().U2(e,["widths","inbox"]),r=i().TS(i().Xh(c),e);if(t){const e=n().Z.get(o(97904).Jr),t=i().U2(e,["width"]);if(void 0!==t){r.widths.inbox=t;try{d(r)}catch{}}}return r}class p extends(()=>o(263184))().default{getInitialState(){return u()}getWidth(){const e=r().default.state.contentType,t=this.state.widths[e];return t<=a?a:t>=s?s:t}setWidth(e){const t=r().default.state.contentType;this.setState({...this.state,widths:{...this.state.widths,[t]:e}})}}const m=new p;m.addListener((e=>{try{d(e.state)}catch{}}));const f=m},105649:(e,t,o)=>{o.r(t),o.d(t,{default:()=>r});var n=()=>o(696459);class i extends(()=>o(263184))().default{getInitialState(){return{mode:"peek",modeByContentType:{none:"peek",inbox:"peek",activity:"peek",private_pages:"peek",shared_pages:"peek",assistant:"peek",teams:"peek"},openState:"closed",contentType:"none",isResizerHovered:!1,isResizing:!1,isMouseEntered:!1,flowId:o(956057).Il(),autoClosed:!1}}isOpen(){const{openState:e}=this.state;switch(e){case"open":case"opening":return!0;case"closed":case"closing":return!1;default:(0,n().t1)(e)}}isVisible(){const{openState:e}=this.state;switch(e){case"open":case"opening":case"closing":return!0;case"closed":return!1;default:(0,n().t1)(e)}}isTransitioningState(){const{openState:e}=this.state;switch(e){case"opening":case"closing":return!0;case"open":case"closed":return!1;default:(0,n().t1)(e)}}isPeekDismissableState(){return"peek"===this.state.mode&&this.isVisible()}isPanelPinnedState(){return"panel"===this.state.mode&&this.isOpen()}isTogglingToPanelModeState(){return"open"===this.state.openState&&"panel"===this.state.mode}}const r=new i},644235:(e,t,o)=>{o.d(t,{Ae:()=>g,NO:()=>v,WA:()=>p,hq:()=>h,ld:()=>f,nl:()=>m});var n=()=>o(156642),i=()=>o(696459),r=()=>o(718959),a=()=>o(466970),s=()=>o(32969),l=()=>o(749826),c=()=>o(826955),d=()=>o(797522),u=()=>o(14585);function p(e){var t,o,i;const{environment:a,store:l,selectableBoundingRect:u}=e,p=l.getType();if(!p||!(0,n().OY)(p))return(null==u?void 0:u.width)??0;const m=null===(t=l.getParentBlockStore())||void 0===t?void 0:t.getType();if("page"===m)return r().qQ(a);const f=null===(o=l.getRecordStoreUIParent())||void 0===o||null===(o=o.findRecordStoreUIAncestor((e=>Boolean(e instanceof c().G&&e.isPath([])&&s().C.findSelectableFromStore(e)))))||void 0===o?void 0:o.ancestor,g=f&&f instanceof c().G?s().C.findSelectableFromStore(f):void 0,v=g?null===(i=d().default.state.selectableRectMap.get(g))||void 0===i?void 0:i.width:(null==u?void 0:u.width)??0,h=m?function(e){switch(e){case"bulleted_list":case"toggle":case"to_do":case"numbered_list":return 26;case"callout":return 60;default:return 0}}(m):0;return(v??0)-h}function m(e){const{store:t,selectableBoundingRect:o,containerWidth:r}=e,a=t.getType();if(!(o&&r&&a&&(0,n().OY)(a)))return 0;const s=(e=>{const o=null===(e=t.getFormat())||void 0===e?void 0:e.block_alignment;if(!o){return t.isRootOrDirectChild()?"center":"left"}return o})();switch(s){case"right":const e=r/2;return o.width-e-e;case"center":return(o.width-r)/2;case"left":return 0;default:(0,i().t1)(s)}}function f(e){if(!l().default.checkGate({gateName:"selectable_top_margin"}))return 0;const t=e.getNode();return t?parseInt(getComputedStyle(t).marginTop):0}function g(){return v()?u().Ub:u().CL}function v(){return l().default.checkGate({gateName:"plus_button_between_blocks"})}function h(){return(0,a().E)("plus_button_between_blocks")}},14585:(e,t,o)=>{o.d(t,{CL:()=>a,Ew:()=>l,Ub:()=>r,eD:()=>s});var n=()=>o(661727),i=()=>o(864266);const r=i().C+6,a=i().C,s=i().G;function l(e,t){return{fill:t?e.icon.secondary:(0,n().Fq)(e.icon.secondary,.5),transition:"0.15s"}}},926434:(e,t,o)=>{o.d(t,{B:()=>i});var n=()=>o(658096);function i(e){var t;let{blockId:o,setting:i}=e;const{publicPageData:r}=n().default.state;if((null==r?void 0:r.pageId)!==o)return;return null===(t=r.securitySettings)||void 0===t?void 0:t[i]}},365872:(e,t,o)=>{o.d(t,{a6:()=>m,lG:()=>p,zd:()=>f});o(267602),o(653476),o(241792),o(667294);var n=()=>o(788860),i=()=>o(491927),r=()=>o(308186),a=()=>o(836756),s=()=>o(482162),l=()=>o(114642),c=()=>o(342267),d=()=>o(681832),u=o(785893);function p(e){d().default.reset(),s().default.state.open?l().Z.setState({...l().Z.state,open:!0}):c().Z.setState({...c().Z.state,open:!0}),i().DB(e,{share_menu_session_id:d().default.state.sessionId})}function m(e){s().default.state.open?l().Z.setState({...l().Z.state,open:!1}):c().Z.setState({...c().Z.state,open:!1}),a().Z.setState({...a().Z.state,siteSettingContentType:"initial"}),i().Rb(e,{share_menu_session_id:d().default.state.sessionId})}async function f(e){const{inviteTargetsStore:t}=e,o=(0,u.jsx)(n()._H,{id:"shareMenu.closeInviteDialog.confirmationMessage",defaultMessage:"Your changes have not been saved. Discard changes?"}),i=(0,u.jsx)(n()._H,{id:"shareMenu.closeInviteDialog.confirmationButton.label",defaultMessage:"Yes"}),a=(0,u.jsx)(n()._H,{id:"shareMenu.closeInviteDialog.cancelButton.label",defaultMessage:"Cancel"});if(t.state.inviteTargets.length>0){return(await r().gt({message:o,acceptLabel:i,cancelLabel:a})).accept}return!1}},779733:(e,t,o)=>{o.d(t,{E1:()=>a,LY:()=>i,wZ:()=>r});var n=()=>o(749826);function i(e){const t=(null==e?void 0:e.disableLogging)??!1;return"on"===n().default.getEligibleGroup({experimentId:"share_menu_searchable_toggle",defaultGroup:"control",disableExposureLogging:t})}function r(e){const t=(null==e?void 0:e.disableLogging)??!1;return"on"===n().default.getEligibleGroup({experimentId:"share_menu_cleanup_experiment_v2",defaultGroup:"control",disableExposureLogging:t})}function a(){return n().default.checkGate({gateName:"share_menu_cleanup_ga"})}},333023:(e,t,o)=>{o.d(t,{HB:()=>b,Lc:()=>k,Np:()=>_,RY:()=>I,Xz:()=>C,bQ:()=>h,gi:()=>y,mk:()=>x,pR:()=>S,up:()=>v});o(267602),o(653476),o(470928),o(30005),o(228244);var n=()=>o(528514),i=()=>o(933868),r=()=>o(396136),a=()=>o(255933),s=()=>o(306164),l=()=>o(513670),c=()=>o(239482),d=()=>o(122479),u=()=>o(876822),p=()=>o(467806),m=()=>o(749826),f=()=>o(826955),g=()=>o(779733);function v(e){const{store:t,showRestrictedPermissionBanner:o}=e,{canAccessParent:n}=b({store:t});return n&&(o||_({store:t}))}function h(e){const{store:t}=e;if(t.getParentTable()===a().bx)return;const o=(0,c().Om)(t);if(!o)return;const r=(0,n().Wo)((0,c().fJ)(o));for(const n of r)if((0,i().Ir)(n))return n}function _(e){const{store:t}=e;if(t.getParentTable()===a().bx)return!1;const o=(0,c().Om)(t),r=o?(0,n().Wo)((0,c().fJ)(o)):[],s=t.getPermissionItems(),l={};for(const i of r)l[(0,n().OC)(i)]=i;for(const a of s){const e=a.role,t=l[(0,n().OC)(a)];if(t){if((0,i().iC)(e)&&(0,i().iC)(t.role)&&(0,n().xO)(e,t.role))return!0;if(i().tx(t)&&!i().tx(a))return!0}else if((0,i().Ir)(a)||(0,i().ZQ)(a)||(0,i().RI)(a)||(0,i().RO)(a))return!0}return!1}function b(e){const{store:t}=e,o=(0,c().uJ)(t)[1];return{parentStore:o,canAccessParent:o&&o.canRead()}}function y(e){const{store:t}=e,o=(0,c().uJ)(t),n=o.find((e=>e instanceof f().G&&e.isRestricted())),i=o[o.length-1];return n||i&&i.getParentTable()===a().bx&&i.canRead()}function S(e){const{store:t}=e,o=(0,c().VP)(t),n=u().default.state.currentSpaceStore;return Boolean((null==n?void 0:n.getDisableGuests())||(null==o?void 0:o.getDisableGuests()))}function w(e){const{mostPermissivePermissions:t,store:o,ancestorTeamId:n,type:a}=e;if(!n)return;const s=t.find((e=>{let{permissionItem:t}=e;return t.type===a&&t.team_id===n}));if(s)return s;const l=t.find((e=>{let{permissionItem:t}=e;return i().Le(t)}));return"explicit_team_guest_permission"!==a||l?{permissionItem:{type:a,role:"none",team_id:n},from:(null==l?void 0:l.from)??{table:r().iU,blockId:o.id}}:void 0}function k(e){let{trustedDomainsStore:t}=e;if(t){var o;const e=u().default.state.currentSpaceStore;return((null===(o=t.getForSpace(e))||void 0===o?void 0:o.enabledTrustedEmailDomains)??[]).length>0}return!1}function I(){return(0,g().wZ)()&&m().default.checkGate({gateName:"trusted_domain_redesign"})}function C(e){const{permissionItem:t,store:o}=e,n=t.from,i=n.table===r().iU?n.blockId:n.teamId;return!(n.table===o.table&&i===o.id)}function x(e){const{store:t,environment:o,trustedDomainsStore:n}=e,a=(0,d().YO)(t),u=c().VP(t),m=function(e){let{mostPermissivePermissions:t,store:o}=e;const n=t.find((e=>{let{permissionItem:t}=e;return i().$D(t)}));return n||{permissionItem:{type:"public_permission",role:"none"},from:{table:r().iU,blockId:o.id}}}({mostPermissivePermissions:a,store:t}),f=function(e){let{mostPermissivePermissions:t,store:o}=e;const n=t.find((e=>{let{permissionItem:t}=e;return i().RO(t)}));return n||{permissionItem:{type:"trusted_domain_permission",role:"none"},from:{table:r().iU,blockId:o.id}}}({mostPermissivePermissions:a,store:t}),v=function(e){let{mostPermissivePermissions:t,mostPermissiveTrustedDomainItem:o,store:n,teamStore:a,trustedDomainsStore:l}=e;const c=t.find((e=>{let{permissionItem:t}=e;return i().Ir(t)}));if("none"===(null==c?void 0:c.permissionItem.role)&&k({trustedDomainsStore:l})&&"none"!==o.permissionItem.role)return{permissionItem:{type:"space_permission",role:"reader",unlisted_timestamp:Date.now()},from:{...o.from}};if(c)return c;const d=t.find((e=>i().Le(e.permissionItem)));return{permissionItem:{type:"space_permission",role:"none"},from:null!=d&&d.from||!a||"none"!==a.getSpacePermissionRole()?(null==d?void 0:d.from)??{table:r().iU,blockId:n.id}:{table:s().e0,teamId:a.id}}}({mostPermissivePermissions:a,mostPermissiveTrustedDomainItem:f,store:t,teamStore:u,trustedDomainsStore:n}),h=w({mostPermissivePermissions:a,store:t,ancestorTeamId:null==u?void 0:u.id,type:"explicit_team_guest_permission"}),_=w({mostPermissivePermissions:a,store:t,ancestorTeamId:null==u?void 0:u.id,type:"explicit_team_permission"}),b=w({mostPermissivePermissions:a,store:t,ancestorTeamId:null==u?void 0:u.id,type:"explicit_team_owner_permission"});let S=a.filter((e=>{let{permissionItem:t}=e;return i().hV(t)}));S=l().MR(S,(e=>{const t=p().Z.state.permissionGroupsAndMemberCounts.findIndex((t=>t.group.getGroupId()===e.permissionItem.group_id));return t>=0?t:e.permissionItem.group_id}));let I=a.filter((e=>{let{permissionItem:t}=e;return(i().zU(t)||i().LW(t))&&t.team_id!==(null==u?void 0:u.id)}));const C=new Map;I.forEach(((e,t)=>{let{permissionItem:o}=e;C.has(o.team_id)||C.set(o.team_id,t)})),I=l().MR(I,[e=>{let{permissionItem:t}=e;return C.get(t.team_id)||0},e=>{let{permissionItem:t}=e;return"explicit_team_owner_permission"===t.type?0:1}]);const x=function(e){var t;let{store:o,currentUserId:n,mostPermissivePermissions:a}=e;const s=a.filter((e=>{let{permissionItem:t}=e;return i().jg(t)})),c=s.find((e=>{let{permissionItem:t}=e;return t.user_id===n}));if(!(0,g().wZ)()||c||!n)return s;const u=(0,d().Dt)({userId:n,store:o}),p=null===(t=a.find((e=>{let{permissionItem:t}=e;return l().Xy(t,u)})))||void 0===t?void 0:t.from,m={from:p??{table:r().iU,blockId:o.id},permissionItem:{type:"user_permission",role:u.role,user_id:n}};return[...s,m]}({store:t,currentUserId:o.currentUser.id,mostPermissivePermissions:a}),T=Boolean(null==u?void 0:u.isDefined()),M="none"!==v.permissionItem.role,P=k({trustedDomainsStore:n})&&(M||"none"!==f.permissionItem.role),A=M||(0,g().wZ)(),R="none"!==m.permissionItem.role,B=(0,g().wZ)()||A||T||R||x.length>1||x.length&&!i().zz(x[0].permissionItem.role)||S.length||i().YX(v.permissionItem.role)||!y({store:t});return{showRestrictedPermissionBanner:a.some((e=>i().Le(e.permissionItem)&&e.from.table===r().iU&&e.from.blockId===t.id)),showTeamPermission:T,showSitePublicPermission:R,showSpacePermission:A,showTrustedDomainPermission:P,mostPermissivePublicItem:m,mostPermissiveTrustedDomainItem:f,mostPermissiveAncestorTeamOwnerItem:b,mostPermissiveAncestorTeamMemberItem:_,mostPermissiveAncestorTeamGuestItem:h,mostPermissiveSpaceItem:v,pagePermissionUIModel:{showUserPermissions:B,mostPermissiveGroupPermissions:S,mostPermissiveTeamPermissions:I,mostPermissiveUserPermissions:x},permissionItemsCount:(B?x.length:0)+I.length+S.length+(A?1:0)+(T?1:0)}}},681832:(e,t,o)=>{o.d(t,{Sw:()=>s,T5:()=>a,XF:()=>n,Xd:()=>r,default:()=>c,wV:()=>i});let n=function(e){return e.Share="share",e.Publish="publish",e}({}),i=function(e){return e.MainShareMenu="mainShareMenu",e.Invite="invite",e.Publish="publish",e}({}),r=function(e){return e.InviteBackButton="invite_back_navigation",e.ShareTopbarButton="share_topbar_button_click",e.ShareTab="share_tab_click",e}({}),a=function(e){return e.Notion="notion",e.Slack="slack",e.Google="google",e}({}),s=function(e){return e.Search="search",e.Message="message",e}({});class l extends(()=>o(263184))().default{getInitialState(){return{sessionId:o(956057).Il(),display:i.MainShareMenu,tab:n.Share,isInitialized:!1,source:r.ShareTopbarButton}}getIsInitialized(){return this.state.isInitialized}}const c=new l},793935:(e,t,o)=>{o.r(t),o.d(t,{AssistantChatHistoryWidthThreshold:()=>le,OnlyOneSidebarVisibleWidthThreshold:()=>ae,SidePeekCloseLeftSidebarFrameWidthThreshold:()=>se,bookmarkPage:()=>be,cancelSidebarInitialRenderLog:()=>Fe,close:()=>de,closeAssistantChatHistoryIfTooNarrow:()=>Ve,closeSidebarFromTopbarUnexpandButton:()=>Oe,handleSidebarButtonClick:()=>pe,handleSidebarSectionDrop:()=>Le,initialize:()=>Re,leaveBlocks:()=>_e,newPageMessages:()=>Ce,open:()=>ce,openAssistantChatHistoryIfWideEnough:()=>Ne,pinSharedPage:()=>Se,quickAddPage:()=>Ie,setExpand:()=>ue,setPeekWidth:()=>he,setUpdateExpand:()=>me,setUpdateSidebarCommentsMode:()=>Ee,setUpdateSidebarCommentsTypeMode:()=>De,setUpdateSidebarTab:()=>Be,setUpdateWidth:()=>ve,setWidth:()=>ge,toggleBothSidebars:()=>Ue,toggleLeftSidebarByWindowSize:()=>fe,unbookmarkPage:()=>ye,unpinSharedPage:()=>we});o(267602),o(653476),o(241792);var n=()=>o(492788),i=()=>o(506347),r=()=>o(396136),a=()=>o(81954),s=()=>o(245015),l=()=>o(54512),c=()=>o(381140),d=()=>o(824462),u=()=>o(799454),p=()=>o(295274),m=()=>o(282662),f=()=>o(525038),g=()=>o(711608),v=()=>o(82937),h=()=>o(636340),_=()=>o(47443),b=()=>o(497065),y=()=>o(145284),S=()=>o(269299),w=()=>o(188517),k=()=>o(348141),I=()=>o(286338),C=()=>o(605067),x=()=>o(647295),T=()=>o(148126),M=()=>o(345918),P=()=>o(521635),A=()=>o(538230),R=()=>o(620218),B=()=>o(677556),E=()=>o(815532),D=()=>o(123145),U=()=>o(690664),F=()=>o(105649),N=()=>o(297861),V=()=>o(876822),L=()=>o(340819),O=()=>o(762557),Z=()=>o(749826),j=()=>o(369320),K=()=>o(890881),z=()=>o(241449),H=()=>o(959005),q=()=>o(133333),W=()=>o(482162),G=()=>o(830261),$=()=>o(826955),Q=()=>o(557576),Y=()=>o(795820),J=()=>o(577325),X=()=>o(807230),ee=()=>o(934262),te=()=>o(589525),oe=()=>o(291335),ne=()=>o(72279),ie=()=>o(956789),re=()=>o(590972);const ae=1024,se=430,le=600;function ce(e){let{fromElectron:t}=e;oe().sidebarOpenStore.state||Q().default.state.isActive||O().Z.isOpen()||F().default.isOpen()||(oe().sidebarOpenStore.setState(!0),t&&oe().sidebarElectronMousePeekStore.setState(!0))}function de(){!oe().sidebarOpenStore.state||K().Z.state.open||J().Z.state.open||ie().Z.state.open||ne().Z.state.open||L().Z.state.isActive||Y().default.state.clonedBlockStore||oe().sidebarResizingStore.state.isResizing||H().Z.state.open||!(0,q().c)()||j().Z.state.namedOpenPopups.has("team_more_actions")||j().Z.state.namedOpenPopups.has("outliner_add_page")||(oe().sidebarMousePeekXStore.setState(0),oe().sidebarOpenStore.setState(!1),oe().sidebarElectronMousePeekStore.setState(!1))}function ue(e){if((0,N().Y)("supportsNativeHome"))return;(0,ee().tourIsActiveInSidebarStep)(ee().default.state)&&!e.isExpanded&&ee().default.setState({type:"inactive"});const t=R().default.DO_NOT_USE_markLegacy("sidebar.toggle_expanded_lag");oe().sidebarExpandedStore.setState(e.isExpanded),Pe(),W().default.setSidebarExpandedStoreState(e.isExpanded);const o=Z().default.checkGate({gateName:"tablet_refresh_gate"});!e.isExpanded&&o&&e.environment.device.isMobile&&oe().sidebarOpenStore.setState(!1),e.isExpanded&&e.environment.WindowSizeStore.state.width<ae&&(0,te().Sx)(e.environment)&&me({environment:e.environment,isExpanded:!1,from:"close_for_space",saveDetailsSidebarPreference:e.saveDetailsSidebarPreference}),e.isExpanded&&(0,te().$3)(e.environment)<se&&v().xv({environment:e.environment,from:"sidebar_expand"}),e.isExpanded?c().LM(e.environment):c().Qd(e.environment),R().default.DO_NOT_USE_measureAfterNextFlushLegacy(t,{environment:e.environment,getData:()=>({is_expanded:e.isExpanded,from:e.from})})}function pe(e,t,o,n){const r=W().default.state.open,{currentTab:a}=re().default.state,s=a!==o||a===o&&!(0,te().Sx)(e),l=o===re().gY.Comments&&(a!==o||!(0,te().Sx)(e));Be(o),l&&re().default.update((e=>({...e,timeOpenedComments:Date.now()}))),r?(_()._c({environment:e,store:t,pageVisitSource:i().tY.Expand}),me({environment:e,isExpanded:!0,from:n,saveDetailsSidebarPreference:!0})):me({environment:e,isExpanded:s,from:n,saveDetailsSidebarPreference:!0})}function me(e){var t;const{isExpanded:o,environment:n,from:i}=e;o||u().LZ();let a=re().default.state.currentTab;if(o){n.WindowSizeStore.state.width<ae&&(0,te().in)(n)&&ue({environment:n,isExpanded:!1,from:`set_update_expand_${e.from}`,saveDetailsSidebarPreference:!1}),F().default.isOpen()&&E().TN({environment:n});const t={origin:W().default.state.open?"peek_view":"page",from:i};a===re().gY.Comments?c().v$(n,t):a===re().gY.Updates&&c().ph(n,t)}const s=W().default.state.open&&W().default.state.targetStore.id||(null===(t=V().default.state.mainEditorCurrentBlockStore)||void 0===t?void 0:t.id),l=function(e){const t=V().default.state.mainEditorCurrentBlockStore;if(t&&e){const o=$().G.createChildStore(t,{id:e,table:r().iU});if(!o)return;const n=o.getAssociatedCollectionStore();if(!n)return;return n.getLayoutStore()}}(s);l||a!==re().gY.Info||(a=re().gY.Comments),o?a===re().gY.Info&&P().Z.setOpen("mainPage"):P().Z.setClosed("mainPage"),re().default.setState({...re().default.state,expanded:o,mouseEntered:!!o||re().default.state.mouseEntered,openedOnBlockId:s,canRender:!0,currentTab:a}),Ae()}function fe(e){W().default.state.savedSidebarExpandedStoreState&&!oe().sidebarExpandedStore.state&&function(e){if(oe().sidebarExpandedStore.state||!W().default.state.savedSidebarExpandedStoreState)return;W().default.isSidePeekOpen()&&(0,te().$3)(e)-(0,te().qG)(e)>=se&&oe().sidebarExpandedStore.setState(!0)}(e),oe().sidebarExpandedStore.state&&function(e){const t=oe().sidebarExpandedStore.state&&0===(0,te().Wk)(e),o=t?e.WindowSizeStore.state.width-oe().sidebarWidthStore.state-(0,te().ll)(e,!1):(0,te().$3)(e);W().default.isSidePeekOpen()&&W().default.state.savedSidebarExpandedStoreState&&oe().sidebarExpandedStore.state&&o<se&&(oe().sidebarExpandedStore.setState(!1),W().default.setSidebarExpandedStoreState(!0))}(e)}function ge(e){oe().sidebarWidthStore.setState(e.width),(0,te().$3)(e.environment)<se&&v().xv({environment:e.environment,from:"sidebar_expand"}),Pe()}function ve(e){re().default.setState({...re().default.state,width:e.width}),Ae()}function he(e){if(W().default.state.open&&W().default.isSidePeekOpen()){const t=e.environment.WindowSizeStore.state.width;W().default.setSidePeekWidth(e.width,t),e.preventPersistWidth||function(){const{preferredSidePeekWidth:e}=W().default.state,t={width:e};s().Z.set(Me,t)}(),fe(e.environment)}}async function _e(e){const{blocks:t,transaction:o,environment:n}=e,{currentSpaceViewStore:i}=V().default.state;if(i)for(const r of t)m().Od({parentStore:i.getSharedPagesStore(),childToRemoveStore:r,transaction:o});b().CZ({environment:n,blocks:t}),await Promise.all(t.map((e=>d().callApi({eventName:"leaveBlock",environment:n,data:{block:{id:e.id,spaceId:(0,a().J)(e.pointer.spaceId)}}}))))}function be(e){const{store:t,spaceViewStore:o,transaction:n}=e,i=o.getBookmarkedPagesStore(),r=$().G.createChildStore(i,t.pointer);Z().default.checkGate({gateName:"append_favorites"})?m().R3({parentStore:i,appendStore:r,transaction:n}):m().Ce({parentStore:i,prependStore:r,transaction:n})}function ye(e){const{store:t,spaceViewStore:o,transaction:n}=e,i=o.getBookmarkedPagesStore(),r=$().G.createChildStore(i,t.pointer);m().Od({parentStore:i,childToRemoveStore:r,transaction:n})}function Se(e){const{store:t,spaceViewStore:o,transaction:n}=e;ke(e);const i=o.getSharedPagesStore(),r=$().G.createChildStore(i,t.pointer);m().Ce({parentStore:i,prependStore:r,transaction:n})}function we(e){const{store:t,spaceViewStore:o,transaction:n}=e;ke(e);const i=o.getSharedPagesStore(),r=$().G.createChildStore(i,t.pointer);m().Od({parentStore:i,childToRemoveStore:r,transaction:n})}function ke(e){const{environment:t,spaceViewStore:o,userSettingsStore:n,transaction:i}=e,r=o.getSpaceId();if(!r||n.hasUserPinnedToOutliner({spaceId:r,type:"shared"}))return;const{visiblePagesStores:a}=(0,M().a2)({environment:t,spaceViewStore:o,userSettingsStore:n,type:"shared"}),s=a.map((e=>{let{id:t}=e;return t}));h().sW({store:o,data:{shared_pages:s},transaction:i}),k().Nb({userSettingsStore:n,spaceId:r,type:"shared",transaction:i})}async function Ie(e){const{from:t,environment:o,redirect:r,event:a,pageVisitSource:s,navigateOnCreate:c=!0}=e,{currentSpaceStore:d,currentSpaceViewStore:u}=V().default.state,m=new(w().sA)(o,"quickAddPage");if(!((0,X().ww)(o)&&d&&d.canEdit()&&u))return(0,X().ww)(o)||(0,X().eD)(o),void m.fail("invalid_state");z().default.setState({...z().default.state,lastPageId:V().default.state.mainEditorCurrentBlockStore?V().default.state.mainEditorCurrentBlockStore.id:void 0});const v=await async function(e){const{newPageTracker:t,quickAddParentOverride:o,environment:n,prependPrivatePage:i}=e,{currentSpaceStore:r,currentSpaceViewStore:a}=V().default.state;if(!r)return void t.fail("invalid_state");const s=o||await(0,x().lX)({spaceStore:r,currentUserId:n.currentUser.id}),l=C().uw(s);if("space-private-pages"===s.type||l.canAdmin()){const e=await S().createAndCommitAsync({environment:n,userAction:"sidebarActions.quickAddPage.directMoveToAdd",waitForServerCommit:!1,perform:async e=>{if("space-private-pages"===s.type&&i&&a){return{createdPage:y().KE({environment:n,spaceStore:r,spaceViewStore:a,isPrivate:!0,prepend:!0,transaction:e,tracker:t})}}const o=h().j4({environment:n,type:"page",inMemoryRecordCache:n.defaultRecordCache.inMemoryRecordCache,transaction:e,spaceId:r.id,tracker:t}),l=await f().Ws({environment:n,targets:[o],value:s,transaction:e});if(l&&"collection"===l.table){const t=l.getDefaultTemplatePageStore();t&&p().ob({title:"template",environment:n,store:o,templateStore:t,isKeyboard:!1,isCreateIn:!1,transaction:e,from:"sidebar_actions"})}return{createdPage:o}}});return e.performResult.createdPage}if(!l.canAdmin()&&l.canEdit()){const{performResult:{createdPage:e}}=await S().createAndCommitAsync({environment:n,userAction:"sidebarActions.quickAddPage.moveToAdd",waitForServerCommit:!1,perform:async e=>{const o=h().j4({environment:n,type:"page",inMemoryRecordCache:n.defaultRecordCache.inMemoryRecordCache,transaction:e,spaceId:r.id});return t.track(o.pointer,e),await f().Ws({environment:n,targets:[o],value:{type:"space-private-pages",spaceId:r.id},transaction:e}),{createdPage:o}}});return await S().createAndCommitAsync({environment:n,userAction:"sidebarActions.quickAddPage.moveToMove",waitForServerCommit:!1,perform:async t=>{const o=await f().kj({environment:n,targets:[e],value:s,transaction:t});if(o&&"collection"===o.table){const i=o.getDefaultTemplatePageStore();i&&p().ob({title:"template",environment:n,store:e,templateStore:i,isKeyboard:!1,isCreateIn:!1,transaction:t,from:"sidebar_actions"})}}}),e}t.fail("invalid_state")}({...e,newPageTracker:m,event:a});return v?(o.device.isMobile?(_()._c({environment:o,store:v,showMoveTo:!0,saveParent:!0,redirect:r,pageVisitSource:s||i().tY.SidebarQuickAdd}),de()):c&&(_().Rp(v),_()._c({environment:o,store:v,showMoveTo:!0,saveParent:!0,redirect:r,pageVisitSource:s||i().tY.SidebarQuickAdd}),de()),g().Eo({environment:o,spaceViewStore:u,type:"private",newIsHidden:!1,outlinerToggleButtonStore:G().Z,shouldPersistToggleState:!0}),l().W(o,{from:t,type:"page",new_page_id:v.id,creating_block_id:v.id}),n().default.afterNextFlush((()=>{const e=B().Z.findDropTargetFromKey("Outliner-private"),t=null==e?void 0:e.getNode();t&&t instanceof HTMLElement&&t.scrollIntoView({behavior:"smooth",block:"nearest"})})),v):void 0}const Ce=(0,o(788860).vU)({label:{id:"sidebar.newPage.button",defaultMessage:"New page"},tooltip:{id:"sidebar.newPage.tooltip",defaultMessage:"Create a new page"}}),xe="sidebar",Te="updateSidebar",Me="sidePeek";function Pe(){const e={expanded:oe().sidebarExpandedStore.state,width:oe().sidebarWidthStore.state};s().Z.set(xe,e)}function Ae(){const{expanded:e,width:t,openedOnBlockId:o,currentTab:n,currentSubTab:i}=re().default.state,r={expanded:e,width:t,openedOnBlockId:o,currentTab:n,currentSubTab:i};s().Z.set(Te,r)}function Re(e){const t=s().Z.get(xe),o=(0,A().y)(),n=s().Z.get(Te),i=s().Z.get(Me),r=U().default.state;if(o&&A().Z.setState(o),(0,N().Y)("supportsNativeHome")?(oe().sidebarExpandedStore.setState(!1),oe().sidebarWidthStore.setState(0)):t?(void 0!==t.expanded&&oe().sidebarExpandedStore.setState(t.expanded),void 0!==t.width&&t.width>=oe().SIDEBAR_MIN_WIDTH&&oe().sidebarWidthStore.setState(t.width)):(0,T().jt)()||oe().sidebarExpandedStore.setState(!1),n){const e=n.width&&n.width>=re().AO?n.width:re().AO;re().default.setState({...re().default.state,...n,width:e,...n.currentTab===re().gY.Info?{expanded:!1}:void 0}),window.innerWidth<ae&&oe().sidebarExpandedStore.setState(!1)}if(i&&W().default.setSidePeekWidth(i.width,window.innerWidth),(0,I().hN)(e)){const{openState:t,mode:o,contentType:n}=r;"open"===t&&"panel"===o&&(0,E().DD)({environment:e,contentType:n,skipAnimation:!0,autoLoaded:!0})}}function Be(e){const{currentTab:t}=re().default.state;re().default.setState({...re().default.state,currentTab:e}),e!==re().gY.Info&&P().Z.setClosed("mainPage"),t===re().gY.Comments&&e!==t&&u().LZ()}function Ee(e){re().default.setState({...re().default.state,commentsMode:e})}function De(e){re().default.setState({...re().default.state,commentsTypeMode:e})}function Ue(e){(0,te().Sx)(e)||oe().sidebarExpandedStore.state?(ue({environment:e,isExpanded:!1,from:"toggle_both_sidebars",saveDetailsSidebarPreference:!0}),me({environment:e,isExpanded:!1,from:"keyboard_default",saveDetailsSidebarPreference:!0})):(me({environment:e,isExpanded:!0,from:"keyboard_default",saveDetailsSidebarPreference:!0}),ue({environment:e,isExpanded:!0,from:"toggle_both_sidebars",saveDetailsSidebarPreference:!0}))}function Fe(){oe().sidebarShouldLogInitialRenderStore.setState(!1)}function Ne(e){const{environment:t,isResizing:o}=e;if((0,D().EA)()||Boolean(o)&&!F().default.state.autoClosed)return;(0,te().z5)(t)>=le&&((0,E().DD)({environment:t,contentType:"assistant",skipAnimation:!0}),F().default.isPanelPinnedState()||(0,E().bP)())}function Ve(e){if(!(0,D().EA)())return;(0,te().z5)(e)<le&&((0,te().in)(e)?oe().sidebarExpandedStore.setState(!1):E().TN({environment:e,autoClose:!0}))}function Le(e){let{environment:t,newSidebarOrder:o,previousSidebarOrder:n,dropArgs:i,spaceViewStore:r,sidebarState:a}=e;const s=a.showWorkspaceSection?o:o.filter((e=>"workspace"!==e));S().createAndCommit({userAction:"SidebarOutliner.reorderSection",environment:t,canUndo:!0,perform:e=>{h().sW({store:r,data:{sidebar_order:s},transaction:e}),c().mv(t,{section:i.key,previous_order:n,new_order:s,from:"drag"})}})}function Oe(e){ue({environment:e,isExpanded:!1,from:"sidebar_unexpand_button",saveDetailsSidebarPreference:!0}),F().default.isVisible()&&de()}},589525:(e,t,o)=>{o.d(t,{$3:()=>L,Bb:()=>$,Fl:()=>ee,GD:()=>Y,H3:()=>T,J5:()=>U,Jr:()=>R,L:()=>Z,MY:()=>x,Nc:()=>I,O6:()=>P,Q$:()=>M,Qu:()=>ne,Sx:()=>V,UF:()=>oe,Wk:()=>j,YR:()=>H,Yj:()=>N,ah:()=>ie,em:()=>G,fg:()=>re,hr:()=>A,in:()=>E,js:()=>W,ll:()=>K,ou:()=>J,pW:()=>B,qG:()=>O,ty:()=>F,vF:()=>X,vJ:()=>z,vK:()=>D,wE:()=>Q,z5:()=>q});o(241792);var n=()=>o(219727),i=()=>o(142735),r=()=>o(846550),a=()=>o(35980),s=()=>o(467171),l=()=>o(707513),c=()=>o(718959),d=()=>o(459805),u=()=>o(148126),p=()=>o(242921),m=()=>o(123145),f=()=>o(105649),g=()=>o(876822),v=()=>o(749826),h=()=>o(897606),_=()=>o(148882),b=()=>o(482162),y=()=>o(291335),S=()=>o(590972),w=()=>o(980316);const k=320,I=800,C=20,x=22,T=30,M=8,P=4;function A(){const e=(0,n().Fy)().isMobile;return(0,r().yK)((t=>({topButtonIcon:{fill:e?t.mediumIconColor:t.sidebarSecondaryColor,width:C,height:C},bottomButtonIcon:{fill:e?t.mediumIconColor:t.sidebarSecondaryColor,width:C,height:C},baseSidebarItem:{...(0,d().G$)({isMobile:e}),fontWeight:l().Ue.medium},currentSelectedSidebarItem:{background:t.sidebarItemSelectedBackground,color:t.text.primary,...e&&{boxShadow:`\n                            0 1px 0 ${t.buttonHoveredBackground}\n                        `}},currentSelectedSidebarIcon:{fill:t.sidebarSecondaryColor}})),[e])}function R(e){return!!e.device.isDesktop||!!e.device.isTablet}function B(){return v().default.checkGate({gateName:"sharing_anyone_with_the_link"})}function E(e){return((0,u().Sr)(e)||B()||e.currentUser.isLoggedIn())&&y().sidebarExpandedStore.state}function D(e){return V(e)&&S().default.state.currentTab===S().gY.Comments}function U(e){return V(e)&&S().default.state.currentTab===S().gY.Updates}function F(e){return V(e)&&S().default.state.currentTab===S().gY.Info}function N(e){const{tab:t}=e,o=(0,n().O7)();return(0,i().VK)((()=>V(o)&&S().default.state.currentTab===t),[o,t])}function V(e){var t;if((null===(t=g().default.state.mainEditorCurrentBlockStore)||void 0===t?void 0:t.id)!==S().default.state.openedOnBlockId)return!1;const o=e.currentUser.isLoggedIn()||S().default.state.currentTab===S().gY.Info||B();return!e.device.isMobile&&o&&S().default.state.expanded||w().Z.state.open}function L(e){return e.WindowSizeStore.state.width-j(e)-K(e,!1)}function O(e){const{isDesktop:t,isMobile:o,isTablet:n}=e.device,{WindowSizeStore:i}=e,r=i.isLandscape(),a=v().default.checkGate({gateName:"tablet_refresh_gate"}),s=o&&!n&&r;return t||n&&a?y().sidebarWidthStore.state:s||n&&!a?Math.min(k,.87*e.WindowSizeStore.state.width):.87*e.WindowSizeStore.state.width}function Z(e){const{shouldShowSidebar:t}=(0,c().h1)(e),o=E(e);return t&&o&&R(e)?O(e):0}function j(e){const{shouldShowSidebar:t}=(0,c().h1)(e),o=E(e);return t&&o&&R(e)?O(e)+m().VV():t&&!o&&f().default.isOpen()?m().VV():0}function K(e,t){return t&&b().default.state.open?0:function(e){if(e.device.isMobile)return 0;if(z(e)>0){return(0,p().rb)({environment:e,isInPeek:!0})}return V(e)?S().default.state.width:0}(e)+z(e)}function z(e){if(!b().default.state.open||b().default.state.isClosing)return 0;const t=(0,p().rb)({environment:e,isInPeek:!0});return b().default.isSidePeekOpen()?b().default.getSidePeekWidth(e.WindowSizeStore.state.width)-t:0}function H(e){return e.device.isAndroid&&!e.device.isTablet||e.device.isTablet&&e.WindowSizeStore.isPortrait()}function q(e){const t=j(e)+m().VV()+z(e);return e.WindowSizeStore.state.width-t}const W=(0,o(788860).vU)({createOrJoinWorkspace:{defaultMessage:"Create or join workspace",id:"sidebarSwitcher.createOrJoinWorkspaceButton.prompt"},personalPlan:{defaultMessage:"Personal Plan",id:"sidebarSwitcher.personalPlan.label"},proPlan:{defaultMessage:"Personal Pro Plan",id:"sidebarSwitcher.proPlan.label"},educationPlan:{defaultMessage:"Personal Pro Plan (Education)",id:"educationPlan.title"},educationPlusPlan:{defaultMessage:"Education Plus Plan",id:"sidebarSwitcher.educationPlusPlan.label"},freePlan:{defaultMessage:"Free Plan",id:"sidebarSwitcher.freePlan.label"},teamTrialPlan:{defaultMessage:"Team Plan (Trial)",id:"teamTrialPlan.title"},teamPlan:{defaultMessage:"Team Plan",id:"teamPlan.title"},plusPlan:{defaultMessage:"Plus Plan",id:"plusPlan.title"},businessPlan:{id:"businessPlan.title",defaultMessage:"Business Plan"},enterprisePlan:{defaultMessage:"Enterprise Plan",id:"sidebarSwitcher.enterprisePlan.label"},legacyPlan:{defaultMessage:"Legacy Plan",id:"sidebarSwitcher.legacyPlan.label"},workspaceSubtitleWithMembers:{id:"sidebarSwitcher.workspaceSubtitleWithMembers.label",defaultMessage:"{planType} Â· {numberOfWorkspaceMembers, plural, one {{numberOfWorkspaceMembers} member} other {{numberOfWorkspaceMembers} members}}"},workspaceSubtitleWithoutMembers:{id:"sidebarSwitcher.workspaceSubtitleWithoutMembers.label",defaultMessage:"{planType}"}});function G(e){switch(e){case"team_free":case"personal_free":case"free":return W.freePlan;case"personal":case"plus":return W.plusPlan;case"student":return W.educationPlusPlan;case"business":return W.businessPlan;case"enterprise":return W.enterprisePlan;default:return W.legacyPlan}}function $(e){return e.canRead()&&"copy_indicator"!==e.getType()}function Q(e){let{isExpanded:t,isFullScreenDesktop:o,isShowingTabBar:n,isElectron:i}=e;return!n&&function(e){let{isExpanded:t,isFullScreenDesktop:o,isElectron:n}=e;return n&&t&&!o}({isExpanded:t,isFullScreenDesktop:o,isElectron:i})}function Y(e){let{isExpanded:t,isFullScreenDesktop:o,isShowingTabBar:n,isElectron:i}=e;return t&&!n&&!Q({isExpanded:t,isFullScreenDesktop:o,isShowingTabBar:n,isElectron:i})}const J=15;function X(e){return s().R6(e.device.isElectronMac)+J}function ee(e,t){return`${e.id}:${t}`}function te(e){let{environment:t,section:o,isSectionShown:n,spaceViewId:i}=e;if(!n)return null;return!0!==a().Z.get({userId:t.currentUser.id,key:ee({id:i},o)})}function oe(e){var t;let{environment:o}=e;const n=null===(t=g().default.state.currentSpaceViewStore)||void 0===t?void 0:t.id,i=(0,c().k_)(o).state,r=y().sidebarExpandedStore.state;if(!n||!i)return{is_sidebar_open:r};const{showBookmarksSection:a,showSharedSection:s,showTeamSection:l,showPrivateSection:d}=i;return{is_sidebar_open:r,sidebar_state:{is_bookmark_expanded:te({environment:o,isSectionShown:a,section:"bookmarks",spaceViewId:n}),is_team_expanded:te({environment:o,isSectionShown:l,section:"teamSidebar",spaceViewId:n}),is_shared_expanded:te({environment:o,isSectionShown:s,section:"shared",spaceViewId:n}),is_private_expanded:te({environment:o,isSectionShown:d,section:"private",spaceViewId:n})}}}function ne(e){return(0,i().VK)((()=>ie(e)),[e])}function ie(e){const t="copy_indicator"===e.getType();return{isCopyIndicator:t,shouldShowAsLoadingSpinner:t&&Boolean(_().transactionQueue.isPendingTransactionForRecord(e.pointer)||h().Z.state[e.pointer.id])}}function re(e){let{newVisibleOrder:t,previousFullOrder:o}=e,n=0;return o.map((e=>{if(t.includes(e)){const e=t[n];return n++,e}return e}))}},731710:(e,t,o)=>{o.d(t,{$L:()=>s,As:()=>c,hV:()=>d,ls:()=>u});o(267602),o(228244);var n=()=>o(990352),i=()=>o(513670),r=()=>o(512258);const a={};function s(e){void 0===a[e]&&(a[e]=performance.now())}const l={};function c(e){Object.assign(l,e)}function d(){return l}function u(){const{app_start_to_main_start:e,main_start_to_prefetch_initiated:t,prefetch_initiated_to_statsig_bootup_blocking_start:o,statsig_bootup_blocking:s,render_start_to_render_end:l}=(0,r().getSubMetricsAndMetricDataForTracking)({isPrewarmedTab:!1}).sub_metrics,c=(0,n().getAppStartTime)(),d={app_start_to_await_get_spaces_start:p(c,a.await_get_spaces_start),app_start_to_await_get_spaces_end:p(c,a.await_get_spaces_end),app_start_to_browser_repaint_start:p(c,a.browser_repaint_start),app_start_to_browser_repaint_end:p(c,a.browser_repaint_end)},u=i().GM({app_start_to_main_start:e,main_start_to_prefetch_initiated:t,prefetch_initiated_to_statsig_bootup_blocking_start:o,statsig_bootup_blocking:s,render_start_to_render_end:l,...d},i().o8),m=[e,t,o,s,l];return m.some(i().o8)||(u.app_start_to_render_end=i().Sm(m)),u}function p(e,t){return void 0===e||void 0===t?void 0:t-e}},577128:(e,t,o)=>{o.d(t,{F:()=>n,default:()=>r});let n=function(e){return e[e.Team=0]="Team",e[e.Members=1]="Members",e}({});class i extends(()=>o(263184))().default{getInitialState(){return{open:!1,screen:n.Team,description:"",accessLevel:"open",isDefault:!1,name:"",icon:void 0,flowId:o(956057).Il(),pageNumber:1,onClose:void 0}}}const r=new i},738483:(e,t,o)=>{o.d(t,{Y:()=>n,Z:()=>i});let n=function(e){return e.Updates="updates",e.Home="home",e}({});const i=new(o(529048).Z)},172635:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{constructor(){super(...arguments),this.isSwipingStore=new(o(435308).default)((()=>this.state.swiping),{debugName:"SidebarMobileSwipeStore_isSwipingStore"})}getInitialState(){return{touching:!1,swiping:!1}}}const i=new n},704259:(e,t,o)=>{o.d(t,{default:()=>r});o(267602),o(470928);var n=()=>o(876822);class i extends(()=>o(263184))().default{getInitialState(){return{results:[]}}getUnreadCountForCurrentSpace(){const{currentSpaceStore:e}=n().default.state,{results:t}=this.state;if(e){const o=t.find((t=>t.spaceId===e.id));if(o)return o.unread}return{mentions:0,following:0,highPriority:0,comments:0,activity:0}}getUnreadMentionsCountForOtherSpaces(){const{currentSpaceStore:e}=n().default.state,t=e&&e.id,{results:o}=this.state;let i=0;for(const n of o)n.spaceId!==t&&(i+=n.unread.mentions);return i}getTotalUnreadMentionsCount(){return this.getTotalUnreadCountForType("mentions")}getTotalUnreadCountForType(e){const{results:t}=this.state;let o=0;for(const i of t){var n;o+=(null===(n=i.unread)||void 0===n?void 0:n[e])??0}return o}}const r=new i},291335:(e,t,o)=>{o.r(t),o.d(t,{SIDEBAR_MIN_WIDTH:()=>i,sidebarElectronMousePeekStore:()=>f,sidebarExpandedStore:()=>c,sidebarMouseEnterYStore:()=>l,sidebarMouseEnteredStore:()=>d,sidebarMousePeekXStore:()=>s,sidebarOpenStore:()=>a,sidebarResizingStore:()=>u,sidebarShouldLogInitialRenderStore:()=>m,sidebarSizeObserver:()=>p,sidebarWidthStore:()=>r});var n=()=>o(263184);const i=248,r=n().default.createValue(240,{name:"sidebarWidthStore"}),a=n().default.createValue(!1,{name:"sidebarOpenStore"}),s=n().default.createValue(0,{name:"sidebarMousePeekXStore"}),l=n().default.createValue(0,{name:"sidebarMouseEnterYStore"}),c=n().default.createValue(!0,{name:"sidebarExpandedStore"}),d=n().default.createValue(!1,{name:"sidebarMouseEnteredStore"}),u=n().default.createValue({isResizing:!1,isResizerHovered:!1},{name:"sidebarResizingStore"}),p=new(o(200936).E),m=n().default.createValue(!0,{name:"sidebarShouldLogInitialRenderStore"}),f=n().default.createValue(!1,{name:"sidebarElectronMousePeekStore"})},72279:(e,t,o)=>{o.d(t,{Z:()=>n});const n=new(o(529048).Z)},385875:(e,t,o)=>{o.d(t,{Z:()=>r});o(267602),o(653476),o(241792),o(731107),o(228244);var n=()=>o(826955);class i extends(()=>o(263184))().default{getInitialState(){return{createType:void 0}}getAllSpaceViewStores(e){return e.currentUser.loggedInUserIds.reduce(((t,o)=>[...t,...this.getSpaceViewStores(e,o)]),[])}hasAtLeastOneTeamPlan(e){return this.getAllSpaceViewStores(e).map((e=>{const t=e.getSpaceStore();if(t)return t.getPlanType()})).some((e=>"team"===e))}getSpaceViewStores(e,t){const i=new(n().r9)(e,{table:o(691970).dx,id:t},{userId:t}).getSpaceViewStores();return o(513670).mN(i,(e=>e.isDefined()&&e.getSpaceId())).filter((t=>Boolean(t.isDefined())&&Boolean(t.getAlive())&&!this.isSpaceDeleted(e,t)))}isSpaceDeleted(e,t){const n=t.getSpaceStore();if(null!=n&&n.isDefined())return!1;const i=t.getSpaceId(),r=o(458335).Z.getData(e,{spaceId:i});return(0,o(326966).z4)(r)}isGuestWithZeroSharedPages(e){const t=e.getUserRootParentId(),n=e.getSpaceStore();if(!t||!n)return!1;if(n.canRead())return!1;const i=o(54649).Z.getSharedPagesState({spaceId:n.id,userId:t});if(!i||i.loadingDone)return!1;return 0===(i.currentPageIds??[]).length}getUserEmailAddress(e,t){return new(n().U6)(e,{table:o(989478).KJ,id:t},{userId:t}).getEmail()}}const r=new i},270895:(e,t,o)=>{o.d(t,{a:()=>n,default:()=>r});let n=function(e){return e[e.General=0]="General",e[e.Members=1]="Members",e[e.Security=2]="Security",e}({});class i extends(()=>o(263184))().default{getInitialState(){return{open:!1,limitMembers:!0,memberFilterQuery:"",tab:void 0}}getTeamStore(){return this.state.open?this.state.viewingUnjoinedPrivateTeamAsEnterpriseAdmin?this.state.unjoinedPrivateTeamStore:this.state.teamStore:void 0}}const r=new i},956789:(e,t,o)=>{o.d(t,{Z:()=>n});const n=new(o(529048).Z)},84922:(e,t,o)=>{o.d(t,{A:()=>n,L:()=>r,default:()=>a});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624);const n=["all_pages","in_current_page","last_edited_by_me"];class i extends(()=>o(263184))().default{constructor(){super(...arguments),this.loadMoreOffset=200,this.startLimit=20,this.limitIncrement=20}getInitialState(){return{filter:"",teamspaceIds:[],lastEditedByIds:[],inPageIds:[],currentTab:"all_pages",loading:!0,limit:this.startLimit,excludePages:new Set,isInitialLastEditedByState:!0}}}function r(e,t){return"last_edited_by_me"===e.currentTab?t?[t]:[]:e.isInitialLastEditedByState&&t?[t]:e.lastEditedByIds}const a=new i},590972:(e,t,o)=>{o.d(t,{AO:()=>a,IT:()=>n,default:()=>c,gY:()=>i,uF:()=>r});const n={comments:"default",suggestions:"suggestion"};let i=function(e){return e[e.Comments=0]="Comments",e[e.Updates=1]="Updates",e[e.Info=2]="Info",e}({}),r=function(e){return e[e.Updates=0]="Updates",e[e.Analytics=1]="Analytics",e}({});const a=385;class s extends(()=>o(263184))().default{getInitialState(){return{width:a,expanded:!1,isResizerHovered:!1,isResizing:!1,mouseEntered:!1,currentTab:i.Comments,currentSubTab:r.Updates,commentsMode:"unresolved",commentsTypeMode:"commentsAndSuggestions",isAnimating:!1,canRender:!0}}}const l=new s;(0,o(947115).exposeDebugValue)("UpdateSidebarStore",l);const c=l},980316:(e,t,o)=>{o.d(t,{Z:()=>n});const n=new(o(529048).Z)},156958:(e,t,o)=>{o.d(t,{FV:()=>me,Fi:()=>he,Fn:()=>ee,Fv:()=>Le,Hf:()=>ne,Hh:()=>ve,I9:()=>ae,Iu:()=>oe,Jc:()=>Ce,LB:()=>we,M5:()=>Be,MO:()=>$,Md:()=>be,Or:()=>te,Ps:()=>G,Q:()=>Ee,Qs:()=>pe,W5:()=>Fe,WO:()=>Ne,_C:()=>ye,ce:()=>re,co:()=>ue,eh:()=>Q,fT:()=>W,fn:()=>X,g4:()=>Ae,gP:()=>Me,hh:()=>xe,ih:()=>Pe,il:()=>ke,iz:()=>fe,lm:()=>Ze,m1:()=>le,m6:()=>q,n5:()=>z,nS:()=>ge,p2:()=>Ie,pB:()=>H,rS:()=>J,sR:()=>Oe,selectColumn:()=>K,selectRow:()=>j,sr:()=>je,uM:()=>se,vk:()=>Ke,x$:()=>ie,xy:()=>ce,y1:()=>Te,ys:()=>ze});o(821057),o(670560),o(267602),o(916054),o(653476),o(470928),o(241792),o(731107),o(228244);var n=()=>o(492788),i=()=>o(156642),r=()=>o(659089),a=()=>o(226413),s=()=>o(532850),l=()=>o(396136),c=()=>o(752778),d=()=>o(139978),u=()=>o(81954),p=()=>o(955620),m=()=>o(513670),f=()=>o(543172),g=()=>o(326966),v=()=>o(54512),h=()=>o(421654),_=()=>o(282662),b=()=>o(332542),y=()=>o(636340),S=()=>o(879952),w=()=>o(970105),k=()=>o(990966),I=()=>o(269299),C=()=>o(205228),x=()=>o(576808),T=()=>o(872308),M=()=>o(641702),P=()=>o(487270),A=()=>o(527278),R=()=>o(852465),B=()=>o(475335),E=()=>o(826955),D=()=>o(965903),U=()=>o(127519),F=()=>o(881688),N=()=>o(87744),V=()=>o(608085),L=()=>o(867024),O=()=>o(457325);const Z=(0,o(788860).vU)({turnIntoCollectionTitle:{defaultMessage:"Title",id:"simpleTableActions.collectionTitle"},turnIntoCollectionColumnTitle:{defaultMessage:"Column {columnIndex}",id:"simpleTableActions.collectionColumnTitle"}});function j(e){const{environment:t,index:o,simpleTableStore:n}=e,i=F().bm(n);if(0===i)return $(),void k().clear({environment:t});const r=(0,g().uZ)(o,0,i-1);O().Z.setState({isActive:!0,simpleTableStore:n,selection:{start:{col:0,row:r},end:{col:F().WN(n)-1,row:r},type:"row"}}),S().Z5({environment:t,stores:[n],phase:D().SelectionPhase.Editing}),k().clear({environment:t})}function K(e){const{environment:t,index:o,simpleTableStore:n}=e,i=F().WN(n);if(0===i)return $(),void k().clear({environment:t});const r=(0,g().uZ)(o,0,i-1);O().Z.setState({isActive:!0,simpleTableStore:n,selection:{start:{col:r,row:0},end:{col:r,row:F().bm(n)-1},type:"column"}}),S().Z5({environment:t,stores:[n],phase:D().SelectionPhase.Editing}),k().clear({environment:t})}function z(e){const{environment:t,rowIndex:o,columnIndex:n,simpleTableStore:i}=e;O().Z.setState({isActive:!0,simpleTableStore:i,selection:{start:{col:n,row:o},end:{col:n,row:o},type:"cell"}}),S().Z5({environment:t,stores:[i],phase:D().SelectionPhase.Editing})}function H(e){const{environment:t,start:o,end:n,simpleTableStore:i}=e;O().Z.setState({isActive:!0,simpleTableStore:i,selection:{start:o,end:n,type:"cell"}}),S().Z5({environment:t,stores:[i],phase:D().SelectionPhase.Editing}),k().clear({environment:t})}function q(e){const{environment:t,rowIndex:o,columnIndex:n,simpleTableStore:i}=e;H({environment:t,start:O().Z.state.isActive?O().Z.state.selection.start:{col:n,row:o},end:{col:n,row:o},simpleTableStore:i})}function W(e){z(e);const t=F().f8(e);t&&k().setSelectionAtEnd({store:t})}function G(){if("editing"!==U().default.state.mode)return;const e=F().UQ();if(!e)return void $();const{columnIndex:t,rowIndex:o,simpleTableStore:n}=e.getProps(),i=O().Z.state;if(i.isActive){const{start:e,end:r}=i.selection;!(e.col===r.col&&e.row===r.row)||e.col===t&&e.row===o&&i.simpleTableStore===n||z({environment:n.environment,rowIndex:o,columnIndex:t,simpleTableStore:n})}else z({environment:n.environment,rowIndex:o,columnIndex:t,simpleTableStore:n})}function $(){O().Z.setState({isActive:!1})}function Q(e){const{environment:t,direction:o,bypassExistingTextSelection:n,expandSelection:i}=e;if(!n&&F().UQ())return;const r=O().Z.state;if(r.isActive){const{selection:e,simpleTableStore:a}=r;if(i){const{rowIndex:n,columnIndex:i}=Y({selection:e,simpleTableStore:a,direction:o,wrapRow:!1});return void q({environment:t,rowIndex:n,columnIndex:i,simpleTableStore:a})}if(F().u({selection:e,columnIndex:e.start.col,rowCount:(0,F().bm)(a)})){const{columnIndex:n}=Y({selection:e,simpleTableStore:a,direction:o,wrapRow:!1});K({environment:t,index:n,simpleTableStore:a})}else{const i="editing"===U().default.state.mode;n&&k().clear({environment:t});const{rowIndex:r,columnIndex:s}=Y({selection:e,simpleTableStore:a,direction:o,wrapRow:!0});if(i)return void W({environment:t,rowIndex:r,columnIndex:s,simpleTableStore:a});z({environment:t,rowIndex:r,columnIndex:s,simpleTableStore:a})}}B().default.setKeyboardMode(!0)}function Y(e){const{selection:t,simpleTableStore:o,direction:n,wrapRow:i}=e,r=F().WN(o)-1,a=F().bm(o)-1,{col:s,row:l}=t.end;return"right"===n?s===r&&l===a?{columnIndex:r,rowIndex:a}:s===r?i?{columnIndex:0,rowIndex:l+1}:{columnIndex:s,rowIndex:l}:{columnIndex:s+1,rowIndex:l}:0===s&&0===l?{columnIndex:0,rowIndex:0}:0===s?i?{columnIndex:r,rowIndex:l-1}:{columnIndex:s,rowIndex:l}:{columnIndex:s-1,rowIndex:l}}function J(e){const{environment:t,direction:o,bypassExistingTextSelection:n,expandSelection:i}=e;if(!n&&F().UQ())return;const r=O().Z.state;if(r.isActive){const{selection:e,simpleTableStore:a}=r,{rowIndex:s,columnIndex:l}=function(e){const{selection:t,simpleTableStore:o,direction:n}=e,i=F().bm(o)-1,{col:r,row:a}=t.end,s="down"===n?Math.min(i,a+1):Math.max(0,a-1);return{columnIndex:r,rowIndex:s}}({selection:e,simpleTableStore:a,direction:o});if(i)return void q({environment:t,rowIndex:s,columnIndex:l,simpleTableStore:a});F().Ax({selection:e,rowIndex:e.start.row,columnCount:(0,F().WN)(a)})?j({environment:t,index:s,simpleTableStore:a}):(n&&k().clear({environment:t}),z({environment:t,rowIndex:s,columnIndex:l,simpleTableStore:a}))}B().default.setKeyboardMode(!0)}function X(e){if(F().UQ())return;const t=O().Z.state;if(!t.isActive)return;const{environment:o,transaction:n}=e,{selection:i,simpleTableStore:r}=t;if(F().u({selection:i,columnIndex:i.start.col,rowCount:(0,F().bm)(r)}))Ne(e),Re({index:i.start.col,simpleTableStore:r,transaction:n}),K({environment:o,index:i.start.col,simpleTableStore:r});else if(F().Ax({selection:i,rowIndex:i.start.row,columnCount:(0,F().WN)(r)})){De({rowID:r.getRenderableContentIds()[i.start.row],simpleTableStore:r,transaction:n}),j({environment:o,index:i.start.row,simpleTableStore:r})}else F().ok(i)?Fe({environment:o,transaction:n}):Ne({environment:o,transaction:n})}function ee(e){if(F().UQ())return;const t=O().Z.state;if(!t.isActive)return;const{selection:o,simpleTableStore:n}=t,i=n.getContentStores()[o.end.row],r=F().h4(n);if(!r)return;const{environment:a,transaction:s,key:l}=e,c=i.getPropertyStore(r[o.end.col]);if(l&&1===l.length){const e=c.getValue(),t=p().TPx(l);w().sO({environment:a,store:c,value:e?e.concat(t):t,transaction:s}),k().setSelectionAtEnd({store:c})}}function te(e){if(F().UQ())return;const t=O().Z.state;if(!t.isActive)return;const{environment:o,transaction:n}=e,{selection:i,simpleTableStore:r}=t;F().u({selection:i,columnIndex:i.start.col,rowCount:(0,F().bm)(r)})?ve({transaction:n}):F().Ax({selection:i,rowIndex:i.start.row,columnCount:(0,F().WN)(r)})&&he({environment:o,transaction:n})}function oe(e){const{simpleTableStore:t,annotation:o}=e,n=O().Z.state;if(!n.isActive||n.simpleTableStore!==t)return;const{selection:i}=n,r=[],a=Math.min(i.start.row,i.end.row),s=Math.max(i.start.row,i.end.row),l=Math.min(i.start.col,i.end.col),c=Math.max(i.start.col,i.end.col);for(let p=a;p<=s;p++)for(let e=l;e<=c;e++){const o=F().f8({simpleTableStore:t,rowIndex:p,columnIndex:e}),n=null==o?void 0:o.getValue();o&&n&&r.push({textStore:o,textValue:n})}const d=p().J7s(o),u=r.every((e=>{let{textValue:t}=e;return t.every((e=>p().hDy(e).some((e=>p().J7s(e)===d))))}));for(const{textStore:p}of r)w().QT({...e,textStore:p,action:u?"removeAnnotationType":"annotate"})}function ne(e){if(Se())return;const{x:t,y:o,simpleTableStore:n}=e;V().Z.setState({isActive:!0,simpleTableStore:n,hover:{x:t,y:o,showResizer:!1,resizing:!1,type:"cell"}})}function ie(e){if(Se())return;const{type:t,simpleTableStore:o,index:n}=e;V().Z.setState({isActive:!0,simpleTableStore:o,hover:{type:t,index:n}})}function re(e){const{simpleTableStore:t,resizer:o}=e;V().Z.setState({isActive:!0,simpleTableStore:t,hover:{type:"resizer",resizer:o}})}function ae(){Se()||V().Z.setState({isActive:!1})}function se(e){const t=O().Z.state;if(!t.isActive)return;const{selection:o,simpleTableStore:n}=t,{environment:i,transaction:r}=e;de({index:o.start.col,simpleTableStore:n,transaction:r}),W({environment:i,rowIndex:0,columnIndex:o.start.col,simpleTableStore:n})}function le(e){const{count:t,simpleTableStore:o,transaction:n}=e;if(t<1)return;const i=F().WN(o);for(let r=0;r<t;r++)de({index:i+r,simpleTableStore:o,transaction:n})}function ce(e){const t=O().Z.state;if(!t.isActive)return;const{selection:o,simpleTableStore:n}=t,{environment:i,transaction:r}=e;de({index:o.end.col+1,simpleTableStore:n,transaction:r}),W({environment:i,rowIndex:0,columnIndex:o.end.col+1,simpleTableStore:n})}function de(e){const{index:t,simpleTableStore:o,transaction:n,columnID:i,format:r}=e,a=F().h4(o)||[],s=F().FA(o),l=i||(0,f().ZP)(),c=[...a.slice(0,t),l,...a.slice(t)],d=r?{...s,[l]:r}:s;h().FH({stores:[o],update:{table_block_column_order:c,table_block_column_format:d},transaction:n})}function ue(e){const t=O().Z.state;if(!t.isActive)return;const{selection:o,simpleTableStore:n}=t,{environment:i,transaction:r}=e;fe({environment:i,index:o.start.row,simpleTableStore:n,transaction:r}),W({environment:i,rowIndex:o.start.row,columnIndex:0,simpleTableStore:n})}function pe(e){const t=O().Z.state;if(!t.isActive)return;const{selection:o,simpleTableStore:n}=t,{environment:i,transaction:r}=e;fe({environment:i,index:o.end.row+1,simpleTableStore:n,transaction:r}),W({environment:i,rowIndex:o.end.row+1,columnIndex:0,simpleTableStore:n})}function me(e){const{environment:t,count:o,simpleTableStore:n,transaction:i,analyticsFrom:r}=e;if(o<1)return;const a=F().bm(n);for(let s=0;s<o;s++)fe({environment:t,index:a+s,simpleTableStore:n,transaction:i,analyticsFrom:r})}function fe(e){const{environment:t,index:o,simpleTableStore:n,transaction:i,analyticsFrom:r}=e,a=n.getContentStore();if(!(0,R().dz)(a))throw new Error("Block has an invalid parent.");const s=y().j4({environment:t,type:"table_row",properties:{},inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,transaction:i,spaceId:n.pointer.spaceId}),l=E().G.createChildStore(a,s.pointer);if(r&&v().W(t,{from:r,type:"table_row",creating_block_id:s.id}),o<=0)b().SH({parentStore:a,childStore:l,transaction:i});else{const e=n.getContentStores();b().jG({parentStore:a,childStore:l,transaction:i,after:e[o-1].id})}return l}function ge(e){const{environment:t,simpleTableStore:o,transaction:n}=e,i=o.getContentStore();if(!(0,R().dz)(i))throw new Error("Block has an invalid parent.");const r=y().j4({environment:t,type:"table_row",properties:{},inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,transaction:n,spaceId:o.pointer.spaceId}),a=E().G.createChildStore(i,r.pointer);return b().jG({parentStore:i,childStore:a,transaction:n}),a}function ve(e){const t=O().Z.state;if(!t.isActive)return;const{selection:o,simpleTableStore:n}=t,i=F().h4(n),r=F().FA(n);if(!i)return;const a=i.slice(o.start.col,o.end.col+1);if(!a)return;const s=[],{transaction:l}=e;for(let c=o.start.col;c<=o.end.col;c++){const e=a[c-o.start.col],t=(0,f().ZP)();s.push(t),de({index:o.end.col+1,simpleTableStore:n,transaction:l,columnID:t,format:r?r[e]:void 0})}for(const c of n.getContentStores())_e({rowStore:c,columnIDs:a,newColumnIDs:s,transaction:l})}function he(e){const t=O().Z.state;if(!t.isActive)return;const{selection:o,simpleTableStore:n}=t,i=n.getRenderableContentIds(),{environment:r,transaction:a}=e;for(let s=o.start.row;s<=o.end.row;s++){const e=E().G.createChildStore(n,{table:l().iU,id:i[s]}),[t]=T().duplicateBlock({environment:r,stores:[e],addCopyName:!1,transaction:a,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!1,targetSpaceId:(0,u().J)(e.pointer.spaceId),baseUrl:C().default.domainBaseUrl,publicDomainName:C().default.publicDomainName,preferDuplicateLocation:"local"}),o=t[0];_().BE({parentStore:n.getContentStore(),insertStore:o,afterStore:e,transaction:a})}}function _e(e){const{rowStore:t,columnIDs:o,newColumnIDs:n,transaction:i}=e,r={...t.getPropertiesStore().getValue(),...(0,g().m8)(n.map(((e,n)=>[e,t.getPropertyValue(o[n])])))};x().b({environment:t.environment,store:t,properties:r,transaction:i})}function be(e){const t=V().Z.state;if(!t.isActive)return;const{hover:o}=t;"cell"===o.type&&V().Z.setState({...t,hover:{...o,showResizer:e}})}function ye(e){const t=V().Z.state;if(!t.isActive)return;const{hover:o}=t;"cell"===o.type&&V().Z.setState({...t,hover:{...o,resizing:e}})}function Se(){const e=V().Z.state;return e.isActive&&"resizing"in e.hover&&e.hover.resizing}function we(e){const{tableBlockColumnFormat:t,simpleTableStore:o,transaction:n}=e;h().FH({stores:[o],update:{table_block_column_format:t},transaction:n})}function ke(e){const t=O().Z.state;if(!t.isActive||"row"!==t.selection.type)return;const{selection:o}=t;O().Z.setState({...t,selection:{...o,end:{col:e,row:o.end.row}}})}function Ie(e){const t=O().Z.state;if(!t.isActive||"column"!==t.selection.type)return;const{selection:o}=t;O().Z.setState({...t,selection:{...o,end:{col:o.end.col,row:e}}})}function Ce(e){const{environment:t,simpleTableStore:o,id:n,index:i,type:r,rowStore:a,theme:s,selectorStartPx:l,mouseOffsetPx:c}=e;let d=[];"column"===r?(K({environment:t,index:i,simpleTableStore:o}),d=N().Z.findCellsInColumnFromStore(o,n)):(j({environment:t,index:i,simpleTableStore:o}),d=N().Z.findCellsInRowFromStore(a));const u=F().To({cells:d,type:r,theme:s});L().default.setState({isActive:!0,simpleTableStore:o,source:{id:n,type:r,index:i,draggedCells:u,selectorStartPx:l,mouseOffsetPx:c},destIndex:i,selectorDragPx:l,moved:!1})}function xe(e){const{destIndex:t,selectorDragPx:o}=e,n=L().default.state;n.isActive&&L().default.setState({...n,destIndex:t,selectorDragPx:o,moved:!0})}function Te(){L().default.reset()}function Me(e){const{environment:t,format:o,simpleTableStore:i,transaction:r,type:a}=e,s=L().default.state;if(!s.isActive)return;const{source:l,destIndex:c}=s;if(s.source.type!==a||s.simpleTableStore!==i)return;const d={environment:t,simpleTableStore:i,source:l,destIndex:c,transaction:r};"column"===a?function(e){const{environment:t,columnOrder:o,source:i,destIndex:r,simpleTableStore:a,transaction:s}=e;if(!o)return;$();const l=[...o.slice(0,i.index),...o.slice(i.index+1)],c=[...l.slice(0,r),i.id,...l.slice(r)];h().FH({stores:[a],update:{table_block_column_order:c},transaction:s}),n().default.afterNextFlush((()=>{K({environment:t,index:r,simpleTableStore:a})}))}({...d,columnOrder:o.table_block_column_order}):function(e){const{environment:t,source:o,destIndex:i,simpleTableStore:r,transaction:a}=e,s=r.getRenderableContentIds(),l=i>o.index?i:i-1;let c=i>0?s[l]:void 0;c===o.id&&(c=s[l+1]);$();const d=r.getContentStores().find((e=>e.id===o.id)),u=r.getContentStores().find((e=>e.id===c));if(d){const e=r;u?b().jG({parentStore:e,after:u.id,childStore:d,transaction:a}):b().SH({parentStore:e,childStore:d,transaction:a}),n().default.afterNextFlush((()=>{j({environment:t,index:i,simpleTableStore:r})}))}}(d)}function Pe(e){const t=O().Z.state;if(!t.isActive)return;Ne(e);const{selection:o,simpleTableStore:n}=t,{environment:i,transaction:r}=e;for(let a=o.start.col;a<=o.end.col;a++)Re({index:a,simpleTableStore:n,transaction:r});K({environment:i,index:o.start.col,simpleTableStore:n})}function Ae(e){const{simpleTableStore:t,columnOrder:o,transaction:n}=e;h().FH({stores:[t],update:{table_block_column_order:o},transaction:n})}function Re(e){const{index:t,simpleTableStore:o,transaction:n}=e,i=F().h4(o);if(!i||1===i.length)return;const r=[...i.slice(0,t),...i.slice(t+1)];h().FH({stores:[o],update:{table_block_column_order:r},transaction:n})}function Be(e){const t=O().Z.state;if(!t.isActive)return;const{selection:o,simpleTableStore:n}=t,i=n.getRenderableContentIds(),{environment:r,transaction:a}=e;for(let s=o.start.row;s<=o.end.row;s++)De({rowID:i[s],simpleTableStore:n,transaction:a});j({environment:r,index:o.start.row,simpleTableStore:n})}function Ee(e){const{simpleTableStore:t,numRowsToDelete:o,transaction:n}=e,i=t.getRenderableContentIds();for(let r=i.length-o;r<i.length;r++)De({rowID:i[r],simpleTableStore:t,transaction:n})}function De(e){const{rowID:t,simpleTableStore:o,transaction:n}=e,i=o.getContentStore();if(!(0,R().dz)(i))throw new Error("Block has an invalid parent.");if(F().bm(o)<=1)return;const r={table:l().iU,id:t};Ue({rowStore:E().G.createChildStore(i,r),simpleTableStore:o,transaction:n})}function Ue(e){const{rowStore:t,simpleTableStore:o,transaction:n}=e,i=o.getContentStore();b().hr({parentStore:i,childStore:t,transaction:n})}function Fe(e){const t=O().Z.state;if(!t.isActive)return;const{selection:o}=t;if(!F().ok(o))return;const{environment:n,transaction:i}=e;Ne({environment:n,transaction:i})}function Ne(e){const t=O().Z.state;if(!t.isActive)return;const{selection:o,simpleTableStore:n}=t,i=F().h4(n);if(!i)return;const r=n.getContentStores(),{environment:a,transaction:s}=e,l=Math.min(o.start.row,o.end.row),c=Math.max(o.start.row,o.end.row),d=Math.min(o.start.col,o.end.col),u=Math.max(o.start.col,o.end.col);for(let p=l;p<=c;p++)Ve({rowStore:r[p],startIndex:d,endIndex:u,columnOrder:i,transaction:s});k().clear({environment:a})}function Ve(e){const{rowStore:t,startIndex:o,endIndex:n,columnOrder:i,transaction:r}=e,a=i.slice(o,n+1);if(!a)return;const s=(0,g().m8)(a.map((e=>[e,null])));x().b({environment:t.environment,store:t,properties:s,transaction:r})}function Le(e){const{environment:t,simpleTableStore:o,transaction:n}=e,r=F().h4(o)||[],s=F().FA(o)||{},{headerRow:u}=F()._j(o),p=o.getContentStores();if(!r.length)return;const m=r[0],f=o.getSpaceId(),v=(0,P().TS)({environment:t,table:c().vF,spaceId:f}),h=(0,P().TS)({environment:t,table:d().np,spaceId:f}),_=u?p[0]:void 0,S=(0,g().m8)(r.map(((e,t)=>function(e){const{columnID:t,columnIndex:o,titleColumnID:n,headerRowStore:i}=e;let r=t,a="text",s=Z.turnIntoCollectionColumnTitle;t===n&&(r="title",a="title",s=Z.turnIntoCollectionTitle);const l=A().Z.getIntl();return[r,{name:i?M().Xh(i.getPropertyValue(t),i):l.formatMessage(s,{columnIndex:o}),type:a}]}({columnID:e,columnIndex:t,titleColumnID:m,headerRowStore:_})))),k={id:v,version:0,parent_table:l().iU,parent_id:o.id,space_id:f,name:void 0,schema:S,alive:!0},C=y().ae({environment:t,table:"collection",value:k,inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,transaction:n});y().sW({store:o,data:{type:i().Ti.collectionView,view_ids:[h],collection_id:v},transaction:n}),y().sW({store:o.getFormatStore(),data:{collection_pointer:{table:c().vF,id:v,spaceId:f}},transaction:n}),p.map(((e,r)=>{if(u&&0===r)return void Ue({rowStore:e,simpleTableStore:o,transaction:n});const a=e.getProperties();y().sW({store:e,data:{type:i().Ti.page},transaction:n}),w().sO({environment:t,store:e.getBlockTitleStore(),value:a[m],transaction:n}),y().sW({store:e.getPropertiesStore(),data:{[m]:void 0},transaction:n}),b().zw({childStore:e,parentStore:C,transaction:n})}));const x={id:h,version:0,type:"table",name:void 0,parent_id:o.id,parent_table:"block",space_id:f,format:{table_properties:r.map((e=>({visible:!0,property:e===m?"title":e,width:s&&e in s?s[e].width:void 0})))},page_sort:p.map((e=>e.id)).slice(0,a().gq),alive:!0},T={table:d().np,id:h,spaceId:f};I().applyOperation({store:(0,E().Kv)(o,T),operation:{pointer:T,command:"set",path:[],args:x},transaction:n})}function Oe(e){var t;const{environment:o,collectionViewBlockStore:n,pageStores:a,transaction:l}=e,c=n.getCollectionViewSourceCollectionStore();if(!c)return;if(a.length>F().HY||a.some((e=>e.hasContent())))return;const[d]=n.getCollectionViewStores(),u=c.getSchema(),p=(d.getFormat().table_properties||[]).filter((e=>e.visible&&e.property in u));if(!p)return;const m=n.getContentStore(),v=(0,f().ZP)();y().sW({store:n,data:{type:i().Ti.table,collection_id:null},transaction:l}),y().sW({store:n.getFormatStore(),data:{table_block_column_order:p.map((e=>"title"===e.property?v:e.property)),table_block_column_format:(0,g().m8)(p.map((e=>["title"===e.property?v:e.property,{width:e.width}]))),table_block_column_header:!0,collection_pointer:null},transaction:l});const h=y().j4({environment:o,type:"table_row",properties:(0,g().m8)(p.map((e=>{const t=e.property,o=t in u?u[t]:void 0;return["title"===t?v:t,o?[[o.name]]:[]]}))),inMemoryRecordCache:o.defaultRecordCache.inMemoryRecordCache,transaction:l,spaceId:n.pointer.spaceId}),_=E().G.createChildStore(m,h.pointer);b().SH({parentStore:m,childStore:_,transaction:l});const S=(0,r().$z)(u),k=S.length>0?null===(t=c.getRecordKeyStore())||void 0===t?void 0:t.getRecordKey():void 0;a.map(((e,t)=>{const n=E().G.createChildStore(m,e.pointer),a=e.getProperties(),c=S.reduce((function(e,t){const o=(0,r().wf)(k,s().ah(a[t]));return e[t]=[[o]],e}),{});y().sW({store:n,data:{type:i().Ti.tableRow},transaction:l}),y().sW({store:n.getPropertiesStore(),data:{...c,[v]:n.getBlockTitleStore().getValue()},transaction:l}),w().sO({environment:o,store:n.getBlockTitleStore(),value:void 0,transaction:l}),b().jG({parentStore:m,childStore:n,transaction:l})})),y().sW({store:c,data:{alive:!1},transaction:l}),y().sW({store:d,data:{alive:!1},transaction:l})}function Ze(e){const{simpleTableStore:t,transaction:o}=e,n=t.getFormat(),i=!Boolean(n.table_block_column_header);h().FH({stores:[t],update:{table_block_column_header:i},transaction:o})}function je(e){const{simpleTableStore:t,transaction:o}=e,n=t.getFormat(),i=!Boolean(n.table_block_row_header);h().FH({stores:[t],update:{table_block_row_header:i},transaction:o})}function Ke(e,t,o){const n=O().Z.state;if(!n.isActive)return;const i="default"===t?void 0:t,{selection:r,simpleTableStore:a}=n;if("row"===r.type){const e=a.getContentStores()[r.start.row];h().FH({stores:[e],update:{block_color:i},transaction:o})}if("column"===r.type){const e=F().h4(a),t=(0,m().Xh)(F().FA(a)||{});if(!e)return;const n=e[r.start.col];n in t?t[n].color=i:t[n]={color:i},h().FH({stores:[a],update:{table_block_column_format:t},transaction:o})}D().default.state.phase!==D().SelectionPhase.Selected||e.device.isMobile||S().ZH({environment:e})}function ze(e){const{simpleTableStore:t,parentWidth:o,transaction:n}=e,i=F().h4(t);if(!i)return;const r=F().FA(t),a=(o-18)/i.length,s=(0,g().m8)(i.map((e=>[e,{width:a,color:r&&r[e]?r[e].color:void 0}])));h().FH({stores:[t],update:{table_block_column_format:s},transaction:n})}},881688:(e,t,o)=>{o.d(t,{Ax:()=>P,FA:()=>C,HY:()=>Z,KA:()=>L,Mp:()=>T,Q8:()=>K,To:()=>D,Ts:()=>U,UQ:()=>R,WN:()=>k,Xp:()=>N,ZB:()=>j,_j:()=>x,a5:()=>z,bm:()=>I,f7:()=>F,f8:()=>E,h4:()=>w,k7:()=>O,mv:()=>B,ok:()=>A,u:()=>M,zi:()=>V});o(267602),o(653476),o(241792),o(228244);var n=()=>o(998411),i=()=>o(396136),r=()=>o(81954),a=()=>o(568017),s=()=>o(839002),l=()=>o(696459),c=()=>o(824462),d=()=>o(574089),u=()=>o(718611),p=()=>o(247724),m=()=>o(641702),f=()=>o(852465),g=()=>o(550054),v=()=>o(589525),h=()=>o(826955),_=()=>o(127519),b=()=>o(87744),y=()=>o(68396),S=()=>o(579980);function w(e){var t;return null===(t=e.getFormat())||void 0===t?void 0:t.table_block_column_order}function k(e){var t;return(null===(t=w(e))||void 0===t?void 0:t.length)||0}function I(e){return e.getContentLength()}function C(e){var t;return null===(t=e.getFormat())||void 0===t?void 0:t.table_block_column_format}function x(e){var t,o;return{headerColumn:null==e||null===(t=e.getFormat())||void 0===t?void 0:t.table_block_row_header,headerRow:null==e||null===(o=e.getFormat())||void 0===o?void 0:o.table_block_column_header}}function T(e){const t=["table","table_row"];return e.map((e=>e.getType())).some((e=>e&&t.includes(e)))}function M(e){const{selection:t,columnIndex:o,rowCount:n}=e,i=t.start.col<=o&&o<=t.end.col;return"column"===t.type&&i&&0===t.start.row&&t.end.row===n-1}function P(e){const{selection:t,rowIndex:o,columnCount:n}=e,i=t.start.row<=o&&o<=t.end.row;return"row"===t.type&&i&&0===t.start.col&&t.end.col===n-1}function A(e){return e.start.col===e.end.col&&e.start.row===e.end.row}function R(){const e="editing"===_().default.state.mode&&_().default.state.multiSelection;if(e)return b().Z.findCellFromTextStore(e.start.store)}function B(){const e="editing"===_().default.state.mode&&_().default.state.multiSelection;if(e)return y().Z.findFromTextStore(e.start.store)}function E(e){const{simpleTableStore:t,rowIndex:o,columnIndex:n}=e,i=t.getContentStores()[o];if(!i)return;const r=w(t);if(!r)return;const a=r[n];return a?i.getPropertyStore(a):void 0}function D(e){const{cells:t,type:o,theme:n}=e;return t.map((e=>function(e){const{cell:t,type:o,theme:n}=e,i=t.getNode();if(!i)return;const r=d().eN(t.getNode()),s=r.cloned.querySelector(`.${p().Apy}`),l=r.cloned.querySelector(`.${p().f0e}`);"column"===o?(s&&(s.style.left="calc(50% - 15px)",s.style.fill=a().ZP.white,s.style.background=n.simpleTableSelectionBorder),l&&(l.style.visibility="hidden")):(l&&(l.style.top="calc(50% - 15px)",l.style.left="-7px",l.style.fill=a().ZP.white,l.style.background=n.simpleTableSelectionBorder),s&&(s.style.visibility="hidden"));return{cloned:r.cloned,rect:DOMRect.fromRect(r.rect)}}({cell:e,type:o,theme:n}))).filter(l().$K)}function U(e,t){const o=S().Z.state;if(o.isActive&&o.simpleTableStore===e&&(!t||o.resize===t))return o}function F(e){const{environment:t,cellValue:o,spaceId:n,parentStore:i,theme:r,disableStyleAnnotations:a,disableSuggestionAnnotations:s}=e;return m().IY({environment:t,textValue:o?{value:o,spaceId:n}:void 0,parentStore:i,disableStyleAnnotations:a??!0,disableInsertedDeletedAnnotations:!0,disableDateStyleAnnotations:!0,disableSuggestionAnnotations:s??!1,disableHover:!0,disabled:!0,theme:r,emojiType:(0,u().e_)(t),katex:t.KatexStore.getKatex(),formulaValueTypes:[]})}function N(e){const{simpleTableStore:t,environment:o,includeInline:n}=e;return f().Xp(t,{recursivelyLoadAllDiscussions:n,onlyIncludeBlockLevelDiscussions:(0,v().Sx)(o)})}function V(e){const{simpleTableStore:t,lastN:o}=e,n=t.getContentStores(),i=w(t);if(!n||!i)return!1;for(let r=n.length-1;r>Math.max(n.length-1-o,0);r--){const e=n[r].getProperties();if(e&&i.some((t=>t in e&&e[t])))return!0}return!1}function L(e){const{simpleTableStore:t,lastN:o}=e,n=t.getContentStores(),i=w(t);if(!n||!i)return!1;const r=i.slice(-o);return n.some((e=>{const t=e.getProperties();return t&&r.some((e=>e in t&&t[e]))}))}const O={title:!0,text:!0,url:!0,email:!0,person:!0,number:!0,date:!0,phone_number:!0,select:!0,multi_select:!0,status:!0,auto_increment_id:!0,file:!1,checkbox:!1,relation:!1,rollup:!1,formula:!1,created_by:!1,created_time:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,button:!1,location:!1,verification:!1},Z=200;async function j(e){const{environment:t,collectionViewBlockStore:o}=e,a=o.getCollectionViewSourceCollectionStore();if(!a)return[];const[l]=o.getCollectionViewStores(),d={source:{type:"collection",id:a.id,spaceId:(0,r().J)(a.pointer.spaceId)},collectionView:{id:l.id,spaceId:(0,r().J)(l.pointer.spaceId)},loader:{reducers:{results:{type:"results",limit:Z+1,loadContentCover:!1}},searchQuery:void 0,userId:t.currentUser.id,userTimeZone:(0,n().r)()}},u=c().callApi({eventName:"queryCollection",environment:t,data:d,tracking:{src:"simple_tbl_transform"}}),p=await(0,s().OI)(1e4,u);if(!p.timeout){const{result:e}=p;if("success"===e.type){const t=e.data.result.reducerResults.results;return(t&&"results"===t.type?t.blockIds:[]).map((e=>h().G.createChildStore(a,{id:e,table:i().iU})))}}return[]}function K(e){let t;if(0===e.getProps().rowIndex){const o=E({simpleTableStore:e.getProps().simpleTableStore,rowIndex:0,columnIndex:0});o&&(t=(0,g().mK)(o))}else t=E({simpleTableStore:e.getProps().simpleTableStore,rowIndex:e.getProps().rowIndex-1,columnIndex:e.getProps().columnIndex});return t}function z(e){let t;const o=I(e.getProps().simpleTableStore);if(e.getProps().rowIndex===o-1){const n=k(e.getProps().simpleTableStore),i=E({simpleTableStore:e.getProps().simpleTableStore,rowIndex:o-1,columnIndex:n-1});i&&(t=(0,g().hn)(i))}else t=E({simpleTableStore:e.getProps().simpleTableStore,rowIndex:e.getProps().rowIndex+1,columnIndex:e.getProps().columnIndex});return t}},116338:(e,t,o)=>{o.d(t,{W:()=>He,f:()=>ye});o(267602),o(653476),o(241792);var n=o(667294),i=()=>o(219727),r=()=>o(98642),a=()=>o(142735),s=()=>o(120420),l=()=>o(568017),c=()=>o(632314),d=()=>o(696459),u=()=>o(887430),p=()=>o(677559);const m=new(p().Ss)("SpreadsheetPrototype",(()=>o.e(55407).then(o.bind(o,661219))));(0,p().kF)(m,(e=>e.SpreadsheetPrototypeNotInProd));var f=()=>o(307369),g=()=>o(247724),v=()=>o(949842),h=()=>o(480089),_=()=>o(200936),b=()=>o(881688);const y=18;class S extends(()=>o(263184))().default{getInitialState(){return{}}setTemporaryFormat(e){this.update((t=>({...t,temporaryFormat:e})))}updateColumnOrder(e){this.update((t=>({...t,temporaryFormat:{...t.temporaryFormat,table_block_column_order:e}})))}}const w=S;var k=()=>o(608085),I=()=>o(867024),C=()=>o(457325),x=()=>o(846550),T=()=>o(788860),M=()=>o(707513),P=()=>o(269299),A=()=>o(154186),R=()=>o(827973),B=()=>o(448419),E=()=>o(255577),D=()=>o(471645),U=()=>o(654133),F=o(785893);const N=(0,o(827282).IU)("arrowsOut",{viewBox:"0 0 30 30",svg:(0,F.jsx)("path",{d:"M7.09101 20.6434C7.50813 20.2263 7.49239 19.6124 7.07527 19.1953L6.41418 18.5342L3.51009 15.9449L7.75998 16.0551L12.6237 16.0709C12.8992 16.0787 13.1353 15.9685 13.3242 15.7797C13.7728 15.3311 13.8121 14.7093 13.3714 14.2686C13.1589 14.0561 12.8992 13.938 12.6159 13.938L7.75998 13.9459L3.51009 14.0561L6.42205 11.4589L7.07527 10.8057C7.49239 10.3886 7.52387 9.77473 7.09888 9.34974C6.6739 8.92476 6.06002 8.9405 5.63503 9.36548L1.2671 13.7334C0.464339 14.5362 0.464339 15.4649 1.2671 16.2676L5.63503 20.6356C6.04428 21.0448 6.6739 21.0605 7.09101 20.6434ZM24.3739 20.6592L28.7418 16.2912C29.5446 15.4885 29.5524 14.5519 28.7497 13.7492L24.3818 9.38123C23.9725 8.97198 23.3429 8.95624 22.9179 9.38123C22.5087 9.79047 22.5165 10.4122 22.9336 10.8293L23.5947 11.4904L26.5067 14.0718L22.2489 13.9695L17.3931 13.9459C17.1176 13.938 16.8736 14.0561 16.6847 14.245C16.244 14.6857 16.1968 15.3153 16.6375 15.7561C16.85 15.9685 17.1176 16.0787 17.4009 16.0787L22.2489 16.0787L26.5067 15.9607L23.5947 18.5578L22.9336 19.2189C22.5165 19.636 22.485 20.2499 22.91 20.6749C23.335 21.0999 23.9568 21.0763 24.3739 20.6592Z"})});var V=()=>o(998901),L=()=>o(475335),O=()=>o(965903),Z=()=>o(156958),j=()=>o(579980);const K=n.forwardRef((function(e,t){var n;const{simpleTableStore:r,rootSizeObserver:s,offset:l,hoverSizeObserver:c}=e,d=(0,i().O7)(),u=(0,x().Fg)(),p=(0,a().VK)((()=>o(32969).C.findScrollToSelectableFromStore(r)),[r]),m=null==p||null===(n=p.getNode())||void 0===n?void 0:n.getBoundingClientRect(),f=(0,a().VK)((()=>s.rect.state.width),[s]),g=(0,a().VK)((()=>c.rect.state.width),[c]),h=(0,a().VK)((()=>Math.min((null==m?void 0:m.width)||0,f,g)+l),[m,f,g,l]);return m?(0,F.jsx)("div",{style:{width:0,position:"absolute",insetInlineStart:h,zIndex:o(492522).t8,...e.style},onMouseDown:v().$0,ref:t,children:(0,F.jsx)("div",{style:H(u),children:(0,F.jsxs)("div",{style:{display:"flex"},dir:"ltr",children:[(0,F.jsx)(U().Z,{placement:V().Placement.Top,render:e=>(0,F.jsx)(A().Z,{...e,style:q(u),onClick:()=>{P().createAndCommit({userAction:"SimpleTableActionBar.ActionBarContent",environment:d,canUndo:!0,perform:e=>{Z().ys({simpleTableStore:r,parentWidth:c.rect.state.width,transaction:e})}})},children:N({width:20,fill:u.regularIconColor})}),renderTooltip:()=>(0,F.jsx)(T()._H,{defaultMessage:"Fit table to page width",id:"simpleTable.actionBar.fitToPage"})}),(0,F.jsx)(B().ZP,{popupType:B().Z4.Popup,originGap:4,renderOrigin:e=>(0,F.jsxs)(A().Z,{style:q(u),...e,children:[(0,F.jsx)(T()._H,{id:"simpleTable.actionBar.options",defaultMessage:"Options"}),(0,o(615634).i)({width:10,fill:u.mediumIconColor,marginLeft:4})]}),render:()=>(0,F.jsx)(z,{simpleTableStore:r})}),(0,F.jsx)(o(79555).Z,{store:r,fadeIn:!1,style:{display:"flex",justifyContent:"center",alignSelf:"center",width:30,height:void 0,padding:"9px 8px"},iconStyle:{fill:u.regularTextColor}})]})})}):null}));function z(e){const{simpleTableStore:t}=e,n=(0,i().O7)(),r=(0,x().Fg)(),a=[{key:"header row",action:()=>{P().createAndCommit({userAction:"SimpleTableActionBar.menuItems",environment:n,canUndo:!0,perform:e=>{Z().lm({simpleTableStore:t,transaction:e})}})},render:e=>(0,F.jsx)(R().Z,{...e,icon:(0,o(171745).f)({width:16,fill:r.regularIconColor}),title:(0,F.jsx)(T()._H,{id:"action.columnHeader.title",defaultMessage:"Header row"}),right:(0,F.jsx)(D().Z,{on:b()._j(t).headerRow||!1,onClick:e.onClick})})},{key:"header column",action:()=>{P().createAndCommit({userAction:"SimpleTableActionBar.menuItems",environment:n,canUndo:!0,perform:e=>{Z().sr({simpleTableStore:t,transaction:e})}})},render:e=>(0,F.jsx)(R().Z,{...e,icon:(0,o(786687).s)({width:16,fill:r.regularIconColor}),title:(0,F.jsx)(T()._H,{id:"SimpleTableActionBar.action.rowHeader.title",defaultMessage:"Header column"}),right:(0,F.jsx)(D().Z,{on:b()._j(t).headerColumn||!1,onClick:e.onClick})})}];return(0,F.jsx)(o(198829).Z,{menuType:o(352230).o.Popup,width:240,maxHeight:n.device.isMobile?70:void 0,children:(0,F.jsx)(E().Z,{type:E().i.Vertical,sections:[{key:"appearance section",render:e=>(0,F.jsx)(o(388284).Z,{...e}),items:a}],initialFocus:void 0})})}function H(e){return{position:"absolute",top:-40,insetInlineEnd:0,borderRadius:4,height:32,fontSize:14,lineHeight:1.2,whiteSpace:"nowrap",fontFamily:M().F5(o(146947).locale).sans,background:e.popoverBackground,boxShadow:e.mediumBoxShadow}}function q(e){return{display:"flex",alignItems:"center",padding:"0 8px",borderRight:`1px solid ${l().ZP.whiteWithAlpha(.2)}`,boxShadow:`1px 0 0 ${e.regularDividerColor}`}}const W=function(e){const{disabled:t,canEdit:n,simpleTableStore:i}=e,r=(0,a().VK)((()=>{const e=C().Z.state,t=k().Z.state,o=j().Z.state,n=L().default.state,r=O().default.state,a=e.isActive&&e.simpleTableStore===i,s=1===r.stores.length&&r.stores[0]===i,l=t.isActive&&t.simpleTableStore===i&&"cell"===t.hover.type&&t.hover.resizing,c=o.isActive&&o.simpleTableStore===i;return(a||s)&&!l&&!c&&!n.isKeyboardMode}),[i]);return t||!n?null:(0,F.jsx)(o(628370).Z,{tag:K,visible:r,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},...e})};var G=()=>o(959137),$=()=>o(435168),Q=()=>o(970105),Y=()=>o(990966);const J=new(p().Ss)("exportJsxRenderer",(async()=>await o.e(59293).then(o.bind(o,380386))));var X=()=>o(964433),ee=()=>o(141735),te=()=>o(191003),oe=()=>o(127519),ne=()=>o(87744),ie=(o(30005),()=>o(790964)),re=()=>o(505462);function ae(e){const t=(0,n.useRef)(),r=(0,i().O7)(),s=(0,a().VK)((()=>Boolean(b().Ts(e.simpleTableStore))),[e.simpleTableStore]),{columnIndex:c,simpleTableStore:d,columnID:u,getWidth:p,onTemporaryResize:m,onAccept:f,onCancel:v}=e,h=(0,a().VK)((()=>{const e=k().Z.state;return!!e.isActive&&(e.simpleTableStore===d&&("cell"===e.hover.type&&(!s&&(e.hover.x===c&&(e.hover.showResizer||e.hover.resizing)))))}),[c,s,d]),_=(0,x().yK)((e=>({wrapper:{position:"absolute",right:0,width:0,top:0,flexGrow:0,height:"100%",zIndex:1},innerStyle:{position:"absolute",width:3,marginLeft:-1,marginTop:-1,height:"calc(100% + 2px)",transition:"background 150ms ease 50ms",cursor:s?void 0:"col-resize",background:h?e.simpleTableSelectionBorder:l().ZP.blueWithAlpha(0)}})),[s,h]),y=(0,n.useCallback)((e=>{e.preventDefault();const o=b().FA(d);t.current=o&&u in o?o[u]:{},t.current.width=p(),Z()._C(!0)}),[u,p,d]),S=(0,n.useCallback)((e=>{var n;if(null!==(n=t.current)&&void 0!==n&&n.width){const n=Math.max(t.current.width+e.diffX,o(109477).lw);return{...t.current,width:n}}}),[]),w=(0,n.useCallback)((e=>{const t=S(e);t&&m(t)}),[S,m]),I=(0,n.useCallback)((e=>{const t=S(e);t&&f(t),Z()._C(!1)}),[S,f]),C=(0,n.useCallback)((()=>{v(),t.current=void 0,Z()._C(!1)}),[v]),T=(0,n.useCallback)((()=>{const t=ne().Z.findCellsInColumnFromStore(e.simpleTableStore,e.columnId),n=o(513670).oA(t.map((e=>{var t;const o=null===(t=e.getNode())||void 0===t?void 0:t.querySelector(`.${g().Iiy}`);if(o)return function(e){const t=window.getComputedStyle(e),o=e.cloneNode(!0),n=o;n.id="notion-table-cell-shadow",Array.from(t).forEach((e=>n.style.setProperty(e,t.getPropertyValue(e),t.getPropertyPriority(e)))),n.style.opacity="0",n.style.width="100%",n.style.pointerEvents="none",document.body.appendChild(o);const i=n.querySelector(`.${g().qnV}`);if(!i)return void n.remove();i.style.width="",i.style.display="inline-block";const r=window.document.createRange();r.selectNode(i);const a=re().getRect(r);return n.remove(),null!=a&&a.width?a.width+he:void 0}(o)})));P().createAndCommit({userAction:"SimpleTableColumnResizer.handleDoubleClick",environment:r,canUndo:!0,perform:t=>{Z().LB({tableBlockColumnFormat:{...le(e.format,e.formatStore).table_block_column_format,[e.columnId]:{width:Math.max(...n)}},simpleTableStore:e.simpleTableStore,transaction:t})}})}),[r,e.columnId,e.format,e.formatStore,e.simpleTableStore]),M=(0,n.useCallback)((()=>Z().Md(!0)),[]),A=(0,n.useCallback)((()=>Z().Md(!1)),[]),R=(0,n.useCallback)((e=>(0,F.jsx)("div",{style:_.innerStyle,onDoubleClick:T,...e})),[T,_.innerStyle]);return(0,F.jsx)("div",{style:_.wrapper,onMouseMove:M,onMouseLeave:A,children:(0,F.jsx)(ie().Z,{onDraggableDragStart:y,onDraggableDragMove:w,onDraggableDragEnd:I,onDraggableDragCancel:C,disableVerticalEdgeScroll:!0,disableHorizontalEdgeScroll:!0,render:R})})}const se=n.memo(ae);function le(e,t){const{temporaryFormat:o}=t;return o||e}function ce(e){const{rowIndex:t,columnIndex:o,simpleTableStore:n}=e,i=(0,a().VK)((()=>{const e=I().default.state;if(e.isActive&&e.simpleTableStore===n&&e.moved&&e.source.index!==e.destIndex)return{destIndex:e.destIndex,sourceIndex:e.source.index,type:e.source.type}}),[n],{useDeepEqual:!0}),{destIndex:r,sourceIndex:s,type:l}=i||{destIndex:0,sourceIndex:0},c=(0,x().yK)((e=>({sharedStyle:{position:"absolute",flexGrow:0,zIndex:2,background:e.simpleTableSelectionBorder},rowStyle:{top:s>r?0:void 0,bottom:s<r?0:void 0,left:-1,width:"calc(100% + 2px)",height:3},columnStyle:{top:-1,left:s>r?0:void 0,right:s<r?0:void 0,width:3,height:"calc(100% + 2px)"}})),[s,r]);return i?"row"===l&&r===t?(0,F.jsx)("div",{style:{...c.sharedStyle,...c.rowStyle}}):"column"===l&&r===o?(0,F.jsx)("div",{style:{...c.sharedStyle,...c.columnStyle}}):null:null}const de=n.memo(ce);var ue=()=>o(242619);class pe extends(()=>o(442))().Z{findSelectorsOfTypeFromStore(e,t){return this.filter((o=>{const n=o.getProps();return n.simpleTableStore===t&&n.type===e}))}}const me=new pe;const fe=function(e){const t=(0,i().O7)(),s=(0,n.useRef)(),l=(0,n.useRef)(null),c=(0,x().Fg)();(0,r().c)(me,(()=>({getProps:()=>e,getNode:()=>l.current??null})),[e]);const u=()=>{s.current=void 0,Z().y1()},p=o=>{ue().Qn({environment:t,stores:["column"===e.type?e.simpleTableStore:e.rowStore],left:o.startX,top:o.startY,showInput:!0,actionSectionGroupKey:"simple_table",analyticsFrom:"simple_table_menu"})},{simpleTableStore:m,type:f,index:g}=e,v=(0,a().VK)((()=>{const{isMobile:e}=t.device;if(e)return function(e,t,o){const n=C().Z.state;if(!n.isActive)return!1;if(n.simpleTableStore!==e)return!1;const{selection:i}=n;if(b().ok(i)){if("column"===t)return i.start.col===o;if("row"===t)return i.start.row===o}return!1}(m,f,g);const{isKeyboardMode:o}=L().default.state;if(o)return!1;if(I().default.state.isActive)return!1;const n=k().Z.state;if(!n.isActive)return!1;if(n.simpleTableStore!==m)return!1;if(b().Ts(m))return!1;const i=O().default.state;if(i.stores[0]===m&&i.phase===O().SelectionPhase.Selected)return!1;const r=n.hover;return"cell"!==r.type?r.type===f&&r.index===g:"column"===f?r.x===g:"row"===f&&r.y===g}),[t.device,g,m,f],{useDeepEqual:!0}),h=e.isSelected||v;return(0,F.jsx)(ie().Z,{allowDragWhileTextEditing:!0,onDraggableDragStart:h?o=>{var n;const{type:i}=e;o.preventDefault();const r=null===(n=l.current)||void 0===n?void 0:n.parentNode;if(!(r&&r instanceof Element))return;const a=r.getBoundingClientRect();s.current="column"===i?a.x:a.y;const d="column"===i?o.startX-a.x:o.startY-a.y;Z().Jc({...e,environment:t,theme:c,selectorStartPx:s.current,mouseOffsetPx:d})}:void 0,onDraggableDragMove:h?t=>{const{type:o}=e;if(!s.current)return;const n=I().default.state;if(!n.isActive)return;const i="column"===o?t.diffX:t.diffY;if(0!==i){const t=s.current+i,o=function(e,t,o){const{delta:n,selectorDragPx:i}=e,r=me.findSelectorsOfTypeFromStore(o,t);if(n>0){const e=r.map((e=>{var t;const n=null===(t=e.getNode())||void 0===t?void 0:t.parentNode;if(!(n&&n instanceof Element))return;const i=n.getBoundingClientRect();return"column"===o?null==i?void 0:i.x:null==i?void 0:i.y})).filter(d().$K);e.sort(((e,t)=>e-t));for(let t=e.length-1;t>=0;t--)if(i>e[t])return t;return 0}const a=r.map((e=>{var t;const n=null===(t=e.getNode())||void 0===t?void 0:t.parentNode;if(!(n&&n instanceof Element))return;const i=n.getBoundingClientRect();return"column"===o?i.x+i.width:i.y+i.height})).filter(d().$K);return a.sort(((e,t)=>e-t)),a.filter(d().$K).findIndex((e=>i<e))}({delta:i,selectorDragPx:t+n.source.mouseOffsetPx},e.simpleTableStore,e.type);Z().hh({destIndex:o,selectorDragPx:t})}}:void 0,onDraggableDragEnd:h?n=>{const{isMobile:i}=t.device,{simpleTableStore:r,type:a,format:s}=e;if(!I().default.state.isActive)return;const{source:l,destIndex:c}=I().default.state;l.index===c?i||p(n):(P().createAndCommit({userAction:"SimpleTableRowColumnSelector.handleDragEnd",environment:t,canUndo:!0,perform:e=>{Z().gP({environment:t,simpleTableStore:r,transaction:e,format:s,type:a})}}),"row"===a&&o(491927).RO(t,{from:"selection_menu",draggedTypes:["table_row"],asCopy:!1})),u()}:void 0,onDraggableDragCancel:h?()=>{u()}:void 0,disableVerticalEdgeScroll:!0,disableHorizontalEdgeScroll:!0,render:t=>(0,F.jsx)(ge,{ref:l,enabled:h,isSelected:e.isSelected,draggableEvents:t,type:e.type,index:e.index,simpleTableStore:e.simpleTableStore,rowStore:e.rowStore})})},ge=(0,n.forwardRef)((function(e,t){const n=(0,T().YB)(),{type:r,enabled:s,isSelected:c,draggableEvents:d}=e,u=(0,i().O7)(),p=(0,a().VK)((()=>I().default.state.isActive),[],{useDeepEqual:!0}),m=()=>{const{simpleTableStore:t,type:o,index:n}=e;Z().x$({type:o,simpleTableStore:t,index:n})},f=()=>{Z().I9()},v=(0,x().yK)((t=>({base:{opacity:s?1:0,pointerEvents:s?void 0:"none",transition:"opacity 150ms ease",fill:t.lightIconColor,position:"absolute",display:"flex",alignItems:"center",cursor:p?"grab":"pointer",justifyContent:"center",borderRadius:4,background:t.whiteButtonBackground,boxShadow:e.isSelected?void 0:t.lightBoxShadow,zIndex:4},column:{...ve(e.isSelected,t),top:-8,left:"calc(50% - 13px)",height:16,width:26,padding:"2px 4px"},row:{...ve(e.isSelected,t),top:"calc(50% - 13px)",left:-8,width:16,height:26,padding:"4px 2px"},hovered:{background:t.whiteButtonHoveredBackground,...ve(e.isSelected,t)},pressed:{...ve(e.isSelected,t,!0)}})),[s,p,e.isSelected]);return(0,F.jsx)(A().Z,{"aria-label":"column"===r?n.formatMessage({id:"simpleTable.rowColumnSelector.moveColumn",defaultMessage:"Move column"}):n.formatMessage({id:"simpleTable.rowColumnSelector.moveRow",defaultMessage:"Move row"}),ref:t,className:"column"===r?g().Apy:g().f0e,style:{...v.base,...v[r]},hoveredStyle:v.hovered,pressedStyle:v.pressed,onClick:t=>function(e,t,n,i,r,a){const{isMobile:s}=a.device;o(340819).Z.state.isActive||ue().Qn({environment:a,stores:[r],left:e.clientX,top:e.clientY,showInput:!0,actionSectionGroupKey:"simple_table",analyticsFrom:"simple_table_menu"});if(s){const{selectColumn:e,selectRow:o}=Z();("column"===t?e:o)({environment:a,index:n,simpleTableStore:i})}}(t,e.type,e.index,e.simpleTableStore,"column"===e.type?e.simpleTableStore:e.rowStore,u),onTouchStart:m,onTouchEnd:f,onMouseEnter:m,onMouseLeave:f,...d,disallowTabbing:!0,children:(0,o(420431).D)({fill:c?l().ZP.white:void 0,width:14,height:14,transform:"column"===r?"rotate(90deg)":void 0})})}));function ve(e,t){return e||arguments.length>2&&void 0!==arguments[2]&&arguments[2]?{background:t.simpleTableSelectionBorder}:void 0}const he=1,_e=n.memo((function(e){const t=(0,n.useRef)(null),s=(0,n.useRef)(null),{value:c}=(0,p().XJ)(J),{value:d}=(0,p().XJ)(X().p),{columnID:u,columnIndex:m,columnFormatWidth:f,formatStore:h,simpleTableStore:_,rowIndex:y,store:S,format:w,disabled:k,canEdit:T,legacyTransclusionParentStore:A,isColumnSelected:R,isRowSelected:B,isHeaderColumnEnabled:E,isHeaderRowEnabled:D}=e,U=(0,i().Fy)(),N=(0,i().O7)(),V=!k&&T,L=(0,a().VK)((()=>null==S?void 0:S.getPropertyStore(u)),[u,S]);(0,r().c)(ne().Z,(()=>({getProps:()=>e,getNode:()=>t.current,getTextStore:()=>L})),[e,L]);const O=(0,n.useCallback)((e=>{k||(0,v().ZP)({event:e,context:v().Af.EditorClick,callback:()=>{T&&e.shiftKey?Z().m6({environment:N,rowIndex:y,columnIndex:m,simpleTableStore:_}):T?Z().fT({environment:N,rowIndex:y,columnIndex:m,simpleTableStore:_}):Z().n5({environment:N,rowIndex:y,columnIndex:m,simpleTableStore:_})}})}),[T,m,k,N,y,_]),j=(0,n.useCallback)((e=>{k||(0,v().ZP)({event:e,context:v().Af.EditorContextMenu,callback:()=>{Z().n5({environment:N,rowIndex:y,columnIndex:m,simpleTableStore:_})}})}),[m,k,N,y,_]),K=(0,n.useCallback)((e=>{k||T&&e.shiftKey&&Z().m6({environment:N,rowIndex:y,columnIndex:m,simpleTableStore:_})}),[T,m,k,N,y,_]),z=(0,n.useCallback)((()=>{k||Z().Hf({x:m,y,simpleTableStore:_})}),[m,k,y,_]),H=(0,n.useCallback)((()=>{k||Z().I9()}),[k]),q=(0,n.useCallback)((e=>{h.setTemporaryFormat({...h.state.temporaryFormat||w,table_block_column_format:{...(h.state.temporaryFormat||w).table_block_column_format,[u]:e}})}),[u,h,w]),W=(0,n.useCallback)((()=>{var e;return(null===(e=t.current)||void 0===e?void 0:e.getBoundingClientRect().width)||0}),[]),ie=(0,n.useCallback)((()=>{var e;const t=null===(e=h.state.temporaryFormat)||void 0===e?void 0:e.table_block_column_format;P().createAndCommit({userAction:"SimpleTableCell.handleColumnResizeAccept",environment:N,canUndo:!0,perform:e=>{Z().LB({tableBlockColumnFormat:t||{},simpleTableStore:_,transaction:e})}}),h.setTemporaryFormat(void 0)}),[N,h,_]),re=(0,n.useCallback)((()=>{h.setTemporaryFormat(void 0)}),[h]),ae=(0,n.useCallback)((e=>{var t;if(e.preventDefault(),null===(t=s.current)||void 0===t||!t.isComposing())if(U.isMobile){if(k||!T)return;const e=oe().default.state;if("editing"===e.mode){const t="default";P().createAndCommit({userAction:"SimpleTableCell.mobileEnter",environment:N,canUndo:!0,perform:o=>{Q().hJ({environment:N,editorMode:t,string:"\n",multiSelection:e.multiSelection,disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:o})}})}}else{"editing"===oe().default.state.mode&&Z().rS({environment:N,direction:"down",bypassExistingTextSelection:!0})}}),[T,U.isMobile,k,N]),le=(0,n.useCallback)((e=>{e.preventDefault(),Z().eh({environment:N,direction:"right",bypassExistingTextSelection:!0})}),[N]),ce=(0,n.useCallback)((e=>{e.preventDefault(),Z().eh({environment:N,direction:"left",bypassExistingTextSelection:!0})}),[N]),ue=(0,n.useCallback)((e=>{k||(e.preventDefault(),Y().clear({environment:N}))}),[N,k]),pe=(0,n.useCallback)((async e=>{const t=C().Z.state;if(!t.isActive)return;const{selection:o,simpleTableStore:n}=t,i=b().h4(n);if(!i)return;(await G().F.clipboardActions.load()).copy({environment:N,event:e,markdownLinkifyIt:d});const r="editing"===oe().default.state.mode&&oe().default.state.multiSelection;if(!r||(0,te().iG)(r)){const t=await ee().F.formulas.load();$().qn({environment:N,simpleTableStore:n,selection:o,currentRows:n.getContentStores(),columnOrder:i,event:e,exportJsxRenderer:c,formulasModule:t})}}),[N,c,d]),me=(0,n.useCallback)((async e=>{if(k||!T)return;await pe(e);const t="editing"===oe().default.state.mode&&oe().default.state.multiSelection;t&&!(0,te().iG)(t)?P().createAndCommit({userAction:"SimpleTableCell.handleCut",environment:N,canUndo:!0,perform:e=>{Q().pz({environment:N,multiSelection:t,transaction:e})}}):P().createAndCommit({userAction:"SimpleTableCell.handleCut",environment:N,canUndo:!0,perform:e=>{Z().W5({environment:N,transaction:e})}})}),[T,k,N,pe]),ge=(0,a().VK)((()=>{if(!S)return!1;const e=I().default.state;if(!e.isActive||e.simpleTableStore!==_||!e.moved)return!1;const{type:t,id:o}=e.source;return"column"===t?o===u:o===S.id}),[u,_,S]),{blockColor:ve,columnFormat:_e}=(0,a().VK)((()=>({blockColor:null==S?void 0:S.getFormat().block_color,columnFormat:b().FA(_)})),[S,_]),be=(0,n.useMemo)((()=>({type:"simple_table_cell_match",propertyId:u})),[u]),ye=(0,x().yK)((e=>{const t=function(e){const{columnFormat:t,rowIndex:o,columnIndex:n,columnID:i,theme:r,isHeaderColumnEnabled:a,isHeaderRowEnabled:s,blockColor:c}=e;let d=c||"default";if(t&&i in t){var u;const e=null===(u=t[i])||void 0===u?void 0:u.color;e&&(d=e)}if(0===o&&s||0===n&&a)return"default"!==d?{...(0,l().fi)(d,r),fontWeight:M().Ue.medium}:{background:r.tableHeaderRowColumnBackground,fontWeight:M().Ue.medium};return(0,l().fi)(d,r)}({columnFormat:_e,rowIndex:y,columnIndex:m,isHeaderColumnEnabled:E,isHeaderRowEnabled:D,columnID:u,blockColor:ve,theme:e});return{cell:{...t,border:`${he}px solid ${e.tableDividerColor}`,isolation:"auto",position:"relative",verticalAlign:"top",textAlign:"start",minWidth:f??120,maxWidth:f??240,minHeight:32},contents:{width:"100%",height:"100%",...t},text:{padding:"7px 9px",backgroundColor:"transparent",fontSize:14,lineHeight:"20px"}}}),[ve,_e,f,u,m,E,D,y]),Se=(0,F.jsxs)(F.Fragment,{children:[ge&&(0,F.jsx)("div",{style:ye.contents}),(0,F.jsxs)("div",{className:g().Iiy,style:{isolation:"auto",visibility:ge?"hidden":void 0},children:[S&&0===y&&V&&(0,F.jsx)(fe,{index:m,type:"column",simpleTableStore:_,isSelected:R,id:u,format:w,rowStore:S}),S&&0===m&&V&&(0,F.jsx)(fe,{index:y,type:"row",simpleTableStore:_,isSelected:B,id:S.id,format:w,rowStore:S}),L?(0,F.jsx)(o(345837).Z,{ref:s,disabled:k,store:L,disableSlashCommands:!0,onClick:K,onEnter:ae,onTab:le,onUntab:ce,onEsc:ue,onCut:me,onCopy:pe,style:ye.text,pasteBehavior:"inline",className:g().qnV,disableDrag:!0,legacyTransclusionParentStore:A,inPageFind:be}):(0,F.jsx)("div",{style:ye.text,children:"Â "}),!U.isMobile&&V&&(0,F.jsx)(se,{format:e.format,formatStore:e.formatStore,columnId:e.columnID,columnIndex:m,columnID:u,simpleTableStore:_,getWidth:W,onTemporaryResize:q,onAccept:ie,onCancel:re}),!U.isMobile&&V&&(0,F.jsx)(de,{simpleTableStore:_,rowIndex:y,columnIndex:m})]})]}),we={style:ye.cell,onClick:O,onContextMenu:j,onMouseEnter:z,onMouseLeave:H};return D&&0===y?(0,F.jsx)("th",{ref:t,scope:"col",...we,children:Se}):E&&0===m?(0,F.jsx)("th",{ref:t,scope:"row",...we,children:Se}):(0,F.jsx)("td",{ref:t,...we,children:Se})}));function be(e,t){let{columnOrder:i,store:r,rowIndex:s,rowStore:l,selection:c,formatStore:d,disabled:u,rowCount:p,columnCount:m,isHeaderColumnEnabled:f,isHeaderRowEnabled:v,canEdit:_,format:y}=e;const S=(0,n.useRef)(null),w=(0,a().VK)((()=>Boolean(l)&&l.getParentId()!==r.id),[l,r.id]),k={isolation:"auto",border:(0,o(123927).aX)()&&w?"3px dashed deeppink":void 0},I=!!c&&(0,b().Ax)({selection:c,rowIndex:s,columnCount:m}),C=(0,a().VK)((()=>{var e;return(null==d||null===(e=d.state)||void 0===e?void 0:e.temporaryFormat)||y}),[y,d]);return(0,h().ez)(r,t,(0,n.useMemo)((()=>({renderedType:"table",getNode:()=>S.current,getBlockStore:()=>r})),[r]),i?(0,F.jsx)("tr",{className:g().M_0,style:k,ref:S,children:i.map(((e,t)=>{var o;return(0,F.jsx)(_e,{disabled:u,canEdit:_,columnID:e,columnIndex:t,columnFormatWidth:(null===(o=C.table_block_column_format)||void 0===o||null===(o=o[e])||void 0===o?void 0:o.width)??null,rowIndex:s,store:l,simpleTableStore:r,isColumnSelected:!!c&&(0,b().u)({selection:c,columnIndex:t,rowCount:p}),isRowSelected:I,formatStore:d,format:y,legacyTransclusionParentStore:w?r:void 0,isHeaderColumnEnabled:f,isHeaderRowEnabled:v},e)}))}):null)}const ye=n.memo(n.forwardRef(be),c().Z);o(470928);var Se=()=>o(184989),we=()=>o(879952),ke=()=>o(94967),Ie=()=>o(542058),Ce=()=>o(872430);function xe(e){const{store:t,children:o,selection:r,disabled:a,canEdit:s}=e,l=(0,i().O7)(),{value:c}=(0,p().XJ)(ee().F.formulas),d=(0,n.useCallback)((e=>{e.preventDefault&&e.preventDefault(),Z().eh({environment:l,direction:"left",bypassExistingTextSelection:!1,expandSelection:e.shiftKey})}),[l]),u=(0,n.useCallback)((e=>{e.preventDefault&&e.preventDefault(),Z().eh({environment:l,direction:"right",bypassExistingTextSelection:!1,expandSelection:e.shiftKey})}),[l]),m=(0,n.useCallback)((e=>{e.preventDefault&&e.preventDefault(),Z().rS({environment:l,direction:"up",bypassExistingTextSelection:!1,expandSelection:e.shiftKey})}),[l]),f=(0,n.useCallback)((e=>{e.preventDefault&&e.preventDefault(),Z().rS({environment:l,direction:"down",bypassExistingTextSelection:!1,expandSelection:e.shiftKey})}),[l]),g=(0,n.useCallback)((e=>{e.preventDefault&&e.preventDefault();const t=C().Z.state;if(t.isActive){const{selection:e,simpleTableStore:o}=t;b().ok(e)&&Z().fT({environment:l,rowIndex:e.start.row,columnIndex:e.start.col,simpleTableStore:o})}}),[l]),v=(0,n.useCallback)((e=>{var t;null===(t=e.preventDefault)||void 0===t||t.call(e);const o=C().Z.state;if(!o.isActive)return;const{selection:n,simpleTableStore:i}=o;b().ok(n)&&n.end.row===b().bm(i)-1&&P().createAndCommit({userAction:"SimpleTableSelectionOverlay.handleShiftEnter",environment:l,canUndo:!0,perform:e=>{const t=n.end.row+1;Z().iz({environment:l,transaction:e,index:t,simpleTableStore:i}),Z().fT({environment:l,rowIndex:t,columnIndex:n.start.col,simpleTableStore:i})}})}),[l]),h=(0,n.useCallback)((e=>{e.preventDefault&&e.preventDefault();const o=C().Z.state;if(!o.isActive)return;const{selection:n,simpleTableStore:i}=o;b().UQ()?Y().clear({environment:l}):b().ok(n)?Z().selectRow({environment:l,index:n.start.row,simpleTableStore:i}):(Z().MO(),we().Z5({environment:l,stores:[t]}))}),[l,t]),_=(0,n.useCallback)((e=>{P().createAndCommit({userAction:"SimpleTableSelectionOverlay.handleDelete",environment:l,canUndo:!0,perform:e=>{Z().fn({environment:l,transaction:e})}})}),[l]),y=(0,n.useCallback)((e=>{!e.key||e.metaKey||e.ctrlKey||(L().default.setKeyboardMode(!0),P().createAndCommit({userAction:"SimpleTableSelectionOverlay.handleKeypress",environment:l,canUndo:!0,perform:t=>{Z().Fn({environment:l,editorMode:"default",transaction:t,key:e.key})}}))}),[l]),{value:S}=(0,p().XJ)(J),w=(0,n.useCallback)((e=>{const t=C().Z.state;if(!t.isActive)return;const{selection:o,simpleTableStore:n}=t,i=b().h4(n);i&&$().qn({environment:l,simpleTableStore:n,selection:o,currentRows:n.getContentStores(),columnOrder:i,event:e,exportJsxRenderer:S,formulasModule:c})}),[l,S,c]),k=(0,n.useCallback)((e=>{!a&&s&&(w(e),P().createAndCommit({userAction:"SimpleTableSelectionOverlay.handleCut",environment:l,canUndo:!0,perform:e=>{Z().WO({environment:l,transaction:e})}}))}),[l,a,s,w]),{value:I}=(0,p().XJ)(X().p),{value:x}=(0,p().XJ)(Ie().m),{value:T}=(0,p().XJ)(G().F.clipboardActions),M=(0,n.useCallback)((e=>{if(a||!s||!T)return;const t=C().Z.state;if(!t.isActive)return;const{selection:o,simpleTableStore:n}=t,i=b().h4(n);i&&P().createAndCommit({userAction:"SimpleTableSelectionOverlay.handlePaste",environment:l,canUndo:!0,perform:t=>{$().j0({environment:l,simpleTableStore:n,selection:o,currentRows:n.getContentStores(),columnOrder:i,event:e,transaction:t,markdownLinkifyIt:I,tinyMceMicrosoftWordPasteFilter:x,clipboardActions:T})}})}),[l,a,s,I,x,T]),A=(0,n.useCallback)((e=>{e.preventDefault(),P().createAndCommit({userAction:"SimpleTableSelectionOverlay.handleDuplicate",environment:l,canUndo:!0,perform:e=>{Z().Or({environment:l,transaction:e})}})}),[l]),R=(0,n.useCallback)(((e,o)=>{!a&&s&&(o.preventDefault(),P().createAndCommit({userAction:"SimpleTableSelectionOverlay.handleAnnotation",environment:l,canUndo:!0,perform:o=>{Z().Iu({environment:l,editorMode:"default",simpleTableStore:t,annotation:e,transaction:o})}}))}),[l,a,s,t]),B=(0,n.useCallback)((e=>R(["h",Ce().Z.getMostRecentlyUsedColor()],e)),[R]),E=(0,n.useCallback)((e=>R(["b"],e)),[R]),D=(0,n.useCallback)((e=>R(["i"],e)),[R]),U=(0,n.useCallback)((e=>R(["s"],e)),[R]),N=(0,n.useCallback)((e=>R(["_"],e)),[R]),V=(0,n.useCallback)((e=>R(["c"],e)),[R]);return(0,F.jsx)(ke().Z,{debugName:"SimpleTableKeyboardArea",capture:Boolean(r)&&!a&&s,onLeft:d,onRight:u,onUntab:d,onTab:u,onUp:m,onDown:f,onEnter:g,onShiftEnter:v,onEsc:h,onDelete:_,onBackspace:_,onKeypress:y,onCut:k,onCopy:w,onPaste:M,onDuplicate:A,onToggleHighlight:B,onToggleBold:E,onToggleItalics:D,onToggleStrike:U,onToggleUnderline:N,onToggleCode:V,children:o})}const Te=(0,T().vU)({tooltipContent:{id:"simpleTable.resizer.dimensions",defaultMessage:"{num_columns} Ã— {num_rows}"}});const Me=function(e){const t=(0,n.useRef)(null),r=(0,i().O7)(),{store:s,type:c,formatStore:d}=e,[u,p]=(0,n.useState)(!1),m=()=>{P().createAndCommit({userAction:"SimpleTableResizer.handleResizeClick",environment:r,canUndo:!0,perform:e=>{"row"!==c&&Z().m1({count:1,simpleTableStore:s,transaction:e}),"column"!==c&&Z().FV({environment:r,count:1,simpleTableStore:s,transaction:e,analyticsFrom:"resize_click"})}})},f=(0,a().VK)((()=>Boolean(b().Ts(s,c))),[s,c]),g=(0,a().VK)((()=>{const e=b().Ts(s,c);return null==e?void 0:e.tooltipOriginRect}),[s,c]),v=(0,a().VK)((()=>{const e=s.getFormat(),{temporaryFormat:t}=d.state;return(t||e).table_block_column_order}),[d,s]),h=(0,a().VK)((()=>{const t=b().Ts(e.store);return t?t.rowsDelta:0}),[e.store]),_=(0,a().VK)((()=>{const t=k().Z.state,o=b().Ts(e.store,e.type);return!L().default.state.isKeyboardMode&&(function(e,t,o){if(!e.isActive||e.simpleTableStore!==o)return!1;const{hover:n}=e;if("cell"===n.type){const e=n.y===b().bm(o)-1,i=n.x===b().WN(o)-1;return"row"===t?e:("column"===t||e)&&i}return"resizer"===n.type&&n.resizer===t}(t,e.type,e.store)||Boolean(o))||u}),[u,e.store,e.type]),y=(0,x().yK)((e=>({button:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:f?e.simpleTableSelectionBorder:e.lightDividerColor},plusIcon:{width:12,height:12,fill:f?l().ZP.white:e.mediumIconColor,padding:"auto"},outer:{},inner:{display:"flex",flexDirection:"row"===c?"row":void 0,width:"100%",height:"100%",opacity:_?1:0,pointerEvents:_?void 0:"none",transition:"opacity 150ms ease 50ms"}})),[f,_,c]);return(0,F.jsx)("div",{style:Re(e.type),onFocus:e=>{const t=e.target;t instanceof HTMLElement&&(0,o(474788).E)(t)&&p(!0)},onBlur:()=>{p(!1)},onMouseEnter:()=>{const{store:t,type:o}=e;Z().ce({simpleTableStore:t,resizer:o})},onMouseLeave:()=>{Z().I9()},ref:t,children:(0,F.jsx)(ie().Z,{onDraggableDragStart:e=>{var o;e.preventDefault();const n=null===(o=t.current)||void 0===o?void 0:o.getBoundingClientRect();j().Z.setState({isActive:!0,simpleTableStore:s,resize:c,rowsDelta:0,columnsDelta:0,tooltipOriginRect:n}),d.setTemporaryFormat(s.getFormat())},onDraggableDragMove:n=>{var i;const r=b().Ts(s,c);if(!r)return;const a=null===(i=t.current)||void 0===i?void 0:i.getBoundingClientRect();if("row"!==c){const t=n.diffX>0?Math.ceil((n.diffX-30)/120):Math.floor((n.diffX+30)/120);if(t<0&&b().KA({simpleTableStore:s,lastN:Math.abs(t)}))return;j().Z.setState({...r,columnsDelta:t,tooltipOriginRect:a});const i=function(t){const{store:n}=e,i=v||[],r=b().h4(n)||[];if(t>0){const e=t-(i.length-r.length);if(e>0){const t=[...Array(e).keys()].map((e=>(0,o(543172).ZP)()));return[...i,...t]}return i.slice(0,i.length+e)}return r.slice(0,Math.max(1,r.length-Math.abs(t)))}(t);d.updateColumnOrder(i),Z().il(i.length-1)}if("column"!==c){const e=n.diffY>0?Math.ceil((n.diffY-8)/32):Math.max(-(b().bm(s)-1),Math.floor((n.diffY+8)/32));if(e<0&&b().zi({simpleTableStore:s,lastN:Math.abs(e)}))return;j().Z.setState({...r,rowsDelta:e,tooltipOriginRect:a}),Z().p2(b().bm(s)+e-1)}},onDraggableDragEnd:t=>{const o=b().WN(s);P().createAndCommit({userAction:"SimpleTableResizer.handleDragEnd",environment:r,canUndo:!0,perform:e=>{"row"!==c&&v&&(v.length>o?Z().m1({count:v.length-o,simpleTableStore:s,transaction:e}):v.length<o&&Z().g4({simpleTableStore:s,columnOrder:v,transaction:e})),"column"!==c&&(h>0?Z().FV({environment:r,count:h,simpleTableStore:s,transaction:e,analyticsFrom:"resize_drag"}):h<0&&Z().Q({numRowsToDelete:Math.abs(h),simpleTableStore:s,transaction:e}))}}),Ae(e.formatStore)},onDraggableDragCancel:()=>{Ae(e.formatStore)},disableVerticalEdgeScroll:!0,disableHorizontalEdgeScroll:!0,render:t=>(0,F.jsx)("div",{style:y.inner,...t,children:(0,F.jsx)(U().Z,{renderTooltip:()=>(0,F.jsx)(Pe,{type:c,isResizing:f,columnOrder:v||[],rowCount:b().bm(s)+h}),placement:V().Placement.Bottom,delayThreshold:0,originRect:g,forceVisibleState:!0===f||void 0,render:t=>(0,F.jsx)(A().Z,{onClick:m,style:Be(!0,e.type),hoveredStyle:Be(!0,e.type),...t,children:(0,F.jsx)("div",{style:y.button,children:(0,o(521777).R)(y.plusIcon)})})})})})})};function Pe(e){const t=(0,T().YB)(),{type:o,isResizing:n,columnOrder:i,rowCount:r}=e,a=(0,x().yK)((e=>({wrapper:{display:"flex",flexDirection:"column",alignItems:"center",color:e.mediumInvertedTextColor},boldText:{color:e.regularInvertedTextColor}})),[]);if(!n){const e=e=>(0,F.jsx)("b",{style:a.boldText,children:e});return(0,F.jsxs)("div",{style:a.wrapper,children:[(0,F.jsxs)("div",{children:["row"===o&&(0,F.jsx)(T()._H,{id:"simpleTable.resizer.tooltipRow",defaultMessage:"<b>Click</b> to add a new row",values:{b:e}}),"column"===o&&(0,F.jsx)(T()._H,{id:"simpleTable.resizer.tooltipColumn",defaultMessage:"<b>Click</b> to add a new column",values:{b:e}}),"corner"===o&&(0,F.jsx)(T()._H,{id:"simpleTable.resizer.tooltipCorner",defaultMessage:"<b>Click</b> to add a new row and column",values:{b:e}})]}),(0,F.jsxs)("div",{children:["row"===o&&(0,F.jsx)(T()._H,{id:"simpleTable.resizer.tooltipSubtitleRow",defaultMessage:"<b>Drag</b> to quickly add or remove rows",values:{b:e}}),"column"===o&&(0,F.jsx)(T()._H,{id:"simpleTable.resizer.tooltipSubtitleColumn",defaultMessage:"<b>Drag</b> to quickly add or remove columns",values:{b:e}}),"corner"===o&&(0,F.jsx)(T()._H,{id:"simpleTable.resizer.tooltipSubtitleCorner",defaultMessage:"<b>Drag</b> to quickly add or remove rows and columns",values:{b:e}})]})]})}const s=i||[],l=t.formatMessage(Te.tooltipContent,{num_columns:s.length,num_rows:r});return(0,F.jsx)("div",{children:l})}function Ae(e){e.reset(),j().Z.reset()}function Re(e){const t={position:"absolute",display:"flex"};return"row"===e?{...t,flexDirection:"row",bottom:-y,left:0,right:0}:"column"===e?{...t,insetInlineEnd:-y,top:0,bottom:0}:{...t,bottom:-y,insetInlineEnd:-y}}function Be(e,t){const o=e?16:20,n="100%";return"column"===t?{flex:1,width:o,height:n,cursor:"col-resize",borderRadius:4,overflow:"hidden"}:"row"===t?{flex:1,width:n,height:o,cursor:"row-resize",borderRadius:4,overflow:"hidden"}:{flex:1,width:o,height:o,cursor:"nwse-resize",borderRadius:"50%",overflow:"hidden"}}const Ee=9,De=26;function Ue(e){const{position:t,onDraggableDragStart:o,onDraggableDragMove:n,onDraggableDragEnd:r,onDraggableDragCancel:a}=e,s=(0,i().Fy)().isMobile?De:Ee,c=(0,x().yK)((e=>({tapArea:{position:"absolute",top:"top-left"===t?-s/2:void 0,left:"top-left"===t?-s/2:void 0,bottom:"bottom-right"===t?-s/2:void 0,right:"bottom-right"===t?-s/2:void 0,width:s,height:s,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",background:"transparent",pointerEvents:"auto",cursor:"nwse-resize",zIndex:10},dragHandle:{width:Ee,height:Ee,border:`2px solid ${l().ZP.blueWithAlpha(.57)}`,background:e.contentBackground,borderRadius:"50%"}})),[t,s]);return(0,F.jsx)(ie().Z,{allowDragWhileTextEditing:!0,onDraggableDragStart:o,onDraggableDragMove:n,onDraggableDragEnd:r,onDraggableDragCancel:a,render:e=>(0,F.jsx)("div",{...e,style:c.tapArea,children:(0,F.jsx)("div",{style:c.dragHandle})})})}const Fe=function(e){const t=(0,i().O7)(),r=(0,n.useRef)(null),l=(0,n.useRef)(void 0),{children:c,store:d,selection:u,formatStore:p,disabled:m,canEdit:f,columnOrder:g}=e,v=(0,a().VK)((()=>{const{device:e}=t;return!(m||!f||e.isMobile)&&!(o(960562).default.state.isDragging||function(e){const t=k().Z.state;if(!t.isActive)return!1;if(t.simpleTableStore!==e)return!1;if("cell"!==t.hover.type)return!1;return t.hover.resizing}(d)||function(e){const t=I().default.state;return t.isActive&&t.simpleTableStore===e}(d))}),[f,m,t,d]),h=(0,a().SI)((()=>{if(u&&r.current&&g)return Ne({cell:u.start,tableElement:r.current,store:d,columnOrder:g})}),[g,u,d],{useDeepEqual:!0}),_=(0,a().SI)((()=>{if(u&&r.current&&g)return Ne({cell:u.end,tableElement:r.current,store:d,columnOrder:g})}),[g,u,d],{useDeepEqual:!0}),b=(0,a().Kw)(h),y=(0,a().Kw)(_);(0,n.useEffect)((()=>{const e=()=>{h.enqueueRecompute(),_.enqueueRecompute()};if(r.current){const t=new MutationObserver(e);return t.observe(r.current,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),()=>t.disconnect()}}),[_,h]);const S=(0,a().VK)((()=>{const t=I().default.state;if(!t.isActive)return;if(t.simpleTableStore!==e.store)return;if(!r.current)return;const{source:o,selectorDragPx:n,moved:i}=t;if(o.selectorStartPx===n&&!i)return;if(!o.draggedCells[0])return;const a=o.draggedCells[0].rect,l=r.current.getBoundingClientRect(),c="column"===o.type?0:(0,s().Z)(n-l.top,-8,l.height-32);return{left:"column"===o.type?(0,s().Z)(n-l.left,-a.width/3,l.width-2/3*a.width):0,top:c,draggedCells:o.draggedCells,type:o.type}}),[e.store]),w=(0,a().VK)((()=>!e.disabled&&(b&&y||S)),[S,e.disabled,y,b]);return(0,F.jsx)(xe,{store:d,selection:u,disabled:m,canEdit:f,children:(0,F.jsx)(ie().Z,{onDraggableDragStart:t=>{e.canEdit&&(t.shiftKey&&e.selection?l.current=e.selection.start:l.current=je(t.startX,t.startY,e.store))},onDraggableDragMove:n=>{if(!e.canEdit||!l.current)return;const i=l.current,r=je(n.currentX,n.currentY,e.store);(0,o(324877).bp)(i,r)?Z().n5({environment:t,rowIndex:i.row,columnIndex:i.col,simpleTableStore:e.store}):Z().pB({environment:t,start:i,end:r,simpleTableStore:e.store})},render:e=>(0,F.jsxs)("div",{ref:r,style:{position:u||v?"relative":void 0},...e,children:[c,w&&(0,F.jsxs)("div",{style:{position:"absolute",top:0,left:0,pointerEvents:"none"},children:[(0,F.jsx)(Ve,{store:d,dragState:S,tableElement:r.current}),b&&y&&(0,F.jsx)(Le,{startRect:b,endRect:y,dragState:S,canEdit:f,selection:u,store:d})]}),v&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Me,{store:d,type:"column",formatStore:p},"column"),(0,F.jsx)(Me,{store:d,type:"row",formatStore:p},"row"),(0,F.jsx)(Me,{store:d,type:"corner",formatStore:p},"corner")]})]})})})};function Ne(e){const{cell:t,tableElement:o,store:n,columnOrder:i}=e,r=n.getContentStores()[t.row],a=ne().Z.findCellsInRowFromStore(r,n,t.row),s=(l=a,c=i[t.col],null===(d=l.find((e=>e.getProps().columnID===c)))||void 0===d||null===(d=d.getNode())||void 0===d?void 0:d.getBoundingClientRect());var l,c,d;if(!s)return;const u=o.getBoundingClientRect(),p=s.top-u.top,m=s.left-u.left,f=s.width,g=function(e){return Math.max(...e.map((e=>{var t;return(null===(t=e.getNode())||void 0===t||null===(t=t.getBoundingClientRect())||void 0===t?void 0:t.height)||0})))}(a);return new DOMRect(m-2,p-2,f+4,g+4)}function Ve(e){const{tableElement:t,dragState:o}=e,i=(0,n.useMemo)((()=>{const e=null==t?void 0:t.getBoundingClientRect();if(!o||!e)return null;const{draggedCells:n,type:i}=o;return n.map((t=>"column"===i?{cloned:t.cloned,rect:new DOMRect(0,t.rect.top-e.top,t.rect.width,t.rect.height)}:{cloned:t.cloned,rect:new DOMRect(t.rect.left-e.left,0,t.rect.width,t.rect.height)}))}),[o,t]);return i&&o&&t?(0,F.jsx)("div",{"data-drag-overlay":!0,style:{position:"absolute",left:o.left,top:o.top,zIndex:5},children:i.map(((e,t)=>(0,F.jsx)(Se().Z,{element:e,opacity:.9},t)))}):null}function Le(e){const{startRect:t,endRect:o,dragState:r,selection:a,store:s}=e,l=(0,i().O7)(),c=(0,i().Fy)(),d=Math.min(t.left,o.left),u=Math.min(t.top,o.top),p=Math.max(t.right,o.right),m=Math.max(t.top+t.height,o.top+o.height),f=(0,n.useRef)(void 0);function v(e){if(!a)return;const{start:t,end:o}=a;f.current={col:"top-left"===e?Math.max(t.col,o.col):Math.min(t.col,o.col),row:"top-left"===e?Math.max(t.row,o.row):Math.min(t.row,o.row)}}const h=t=>{if(!f.current)return;const o=je(t.currentX,t.currentY,s);Z().pB({environment:l,start:f.current,end:o,simpleTableStore:e.store})},_=(0,x().yK)((e=>({base:{position:"absolute",left:r&&"column"===r.type?r.left:d+1.5,top:r&&"row"===r.type?r.top:u+1.5,width:p-d-3,height:m-u-3},wrapper:{zIndex:r?4:2,backgroundColor:r?e.contentBackground:void 0,opacity:r?.9:void 0,boxShadow:r?e.mediumBoxShadow:void 0,borderRadius:2},inner:{border:`solid ${e.simpleTableSelectionBorder}`,borderWidth:2,borderRadius:2,zIndex:r?5:3}})),[3,r,m,p,d,u]);return t&&o?(0,F.jsxs)("div",{className:g().y4j,children:[(0,F.jsx)("div",{style:{..._.base,..._.wrapper}}),(0,F.jsx)("div",{style:{..._.base,..._.inner},children:e.canEdit&&(0,F.jsxs)(F.Fragment,{children:[!c.isMobile&&(0,F.jsx)(Ue,{position:"top-left",onDraggableDragStart:()=>v("top-left"),onDraggableDragMove:h}),(0,F.jsx)(Ue,{position:"bottom-right",onDraggableDragStart:()=>v("bottom-right"),onDraggableDragMove:h})]})})]}):null}function Oe(e,t){const o=ne().Z.findCellsInRowFromStore(void 0,t,0).sort(((e,t)=>e.getProps().columnIndex-t.getProps().columnIndex));for(let n=0;n<o.length;n++){if(e<=o[n].getNode().getBoundingClientRect().right)return n}return o.length-1}function Ze(e,t){const o=ne().Z.findCellsInColumnFromStore(t,0).sort(((e,t)=>e.getProps().rowIndex-t.getProps().rowIndex));for(let n=0;n<o.length;n++){if(e<=o[n].getNode().getBoundingClientRect().bottom)return n}return o.length-1}function je(e,t,o){return{col:Oe(e,o),row:Ze(t,o)}}const Ke=y,ze={isolation:"auto"},He=(0,n.memo)((0,n.forwardRef)((function(e,t){const{store:c,disabled:p,disableHoverMenu:m,showRowIds:y,style:S,disableCommentMenu:x,hideContent:T,isLastItem:M}=e,P=(0,i().O7)(),{currentUser:A}=P,R=(0,i().Fy)(),B=(0,h().PE)(c,p),E=(0,o(657320).l)(),D=(0,n.useContext)(o(85307).J),U=(0,a().qz)(void 0,w),N=(0,h().Pl)(c),V=(0,n.useRef)(null),L=(0,n.useRef)(null),O=(0,n.useMemo)((()=>new(_().E)),[]),Z=(0,n.useMemo)((()=>new(_().E)),[]);(0,n.useEffect)((()=>()=>{O.destroy(),Z.destroy()}),[O,Z]);const j=(0,a().VK)((()=>b().Xp({simpleTableStore:c,environment:P,includeInline:!0})),[c,P],{useDeepEqual:!0}),K=(0,a().VK)((()=>{const e={width:"100%",position:"relative",alignSelf:"center"};return(R.isMobile||D||!c.isRootOrDirectChild())&&(e.maxWidth=j?"calc(100% - 40px)":"100%"),e}),[R,j,c,D]),z=(0,a().VK)((()=>c.getFormat()),[c]),H=z.block_color||"default",q=(0,a().VK)((()=>({...(0,l().fi)(H,(0,l().gh)({theme:"light"})),...S,position:"relative",display:"flex",...(0,u().Ks)(c)&&{width:(0,o(589525).$3)(P),position:"sticky",left:0}})),[c,P,S,H]),G=(0,a().VK)((()=>(U.state.temporaryFormat||z).table_block_column_order),[z,U]),$=(0,a().VK)((()=>{const e=b().Ts(c);return e?e.rowsDelta:0}),[c]),Q=(0,a().VK)((()=>b().bm(c)),[c]),Y=(0,a().VK)((()=>b().WN(c)),[c]),J=(0,a().VK)((()=>{const e=C().Z.state;if(e.isActive&&e.simpleTableStore===c){const t=(null==G?void 0:G.length)||Y,o=Q+$,{selection:{start:n,end:i,type:r}}=e;return{start:{col:(0,s().Z)(n.col,0,t-1),row:(0,s().Z)(n.row,0,o-1)},end:{col:(0,s().Z)(i.col,0,t-1),row:(0,s().Z)(i.row,0,o-1)},type:r}}}),[c,null==G?void 0:G.length,Y,Q,$],{useDeepEqual:!0}),X=(0,a().VK)((()=>{const e=k().Z.state;if(e.isActive&&e.simpleTableStore===c){const{hover:t}=e;if("cell"===t.type&&t.resizing)return"col-resize"}const t=b().Ts(c);if(t){if("column"===t.resize)return"col-resize";if("row"===t.resize)return"row-resize";if("corner"===t.resize)return"nwse-resize"}const o=I().default.state;if(o.isActive&&o.simpleTableStore===c)return"grab"}),[c]),ee=(0,a().VK)((()=>(0,u().Bs)({environment:P,store:c,isFullScreen:!1,sizeObserver:O,collectionContextStore:void 0})),[P,c,O]),te=(null==ee?void 0:ee.paddingLeft)||0,oe=(0,a().VK)((()=>(0,o(345918).Fn)(P)),[P]),ne=(0,a().VK)((()=>!p&&("comment_only"===c.getRole()||"comment"===(null==E?void 0:E.publicEditModeStore.state.permission))&&A.isLoggedIn()),[c,p,E,A]),ie=(0,a().VK)((()=>{const e=c.getContentStores(),t=$<0?e.length+$:e.length,o=(0,d().$K)(y)?e.filter((e=>null==y?void 0:y.includes(e.id))):e;return o.slice(0,t)}),[c,$,y]),re=(0,a().VK)((()=>o(844085).Q7(P)),[P]),ae=(0,a().VK)((()=>null==G?void 0:G.map((e=>ie.map((t=>t.getPropertyStore(e)))))),[ie,G]),{headerColumn:se,headerRow:le}=(0,a().VK)((()=>(0,b()._j)(c)),[c]);(0,r().c)(o(68396).Z,(()=>({selection:J,textStores:ae})),[]);const ce=(0,n.useCallback)((e=>{R.isMobile||(0,v().ZP)({event:e,context:v().Af.EditorMouseDown,callback:()=>{e.preventDefault(),o(658325).AI({environment:P,target:e.target,startX:e.clientX,startY:e.clientY,showSelectionRect:!0,preventSelectStores:[],allowVerticalEdgeScroll:!0,allowHorizontalEdgeScroll:!0})}})}),[P,R.isMobile]),de=(0,n.useCallback)((e=>{e&&O.observe(e)}),[O]),ue=(0,n.useCallback)((e=>{const t=null==e?void 0:e.getNode();t&&Z.observe(t)}),[Z]),pe=(0,a().qz)(void 0,o(561280).Z);const me=(0,F.jsx)(o(37399).Z,{disableCommentMenu:x,hideContent:T,store:c,recursivelyLoadAllDiscussions:!N,hideIfSidebarOrMarginCommentsVisible:!0}),fe=Boolean(me)&&j>0||D,ge=(0,o(466970).E)("simple_table_buffer")?20:0,ve=(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(o(842574).Z,{type:o(520849).Z.X,preventType:re,style:{flexGrow:1,paddingLeft:ge,marginLeft:-ge},store:pe,children:function(e){if(!G)return;const t=!R.isPhone,o=(0,F.jsx)("div",{style:{display:"flex"},children:(0,F.jsx)("div",{style:{paddingTop:8,paddingBottom:Ke,paddingInlineEnd:Ke},children:(0,F.jsx)(f().Z,{store:c,shouldShowHalo:!0,canSelect:!0,canDropLeft:t,canDropRight:t,canDropAbove:!1,canDropBelow:!1,aboveDropZoneMargin:4,belowDropZoneMargin:4,analyticsName:"page_content",shouldShowDropZone:!0,style:{position:"relative"},inheritDir:!0,className:g().OE$,shouldShowCommentMenu:ne,nodeRef:L,children:(0,F.jsx)(Fe,{store:c,selection:J,columnOrder:G,formatStore:U,disabled:p,canEdit:B,children:(0,F.jsx)("table",{style:ze,children:(0,F.jsxs)("tbody",{ref:L,style:ze,children:[ie.map(((e,t)=>(0,F.jsx)(ye,{rowIndex:t,rowStore:e,store:c,disabled:p,columnOrder:G,selection:"cell"!==(null==J?void 0:J.type)?J:void 0,formatStore:U,rowCount:Q,columnCount:Y,isHeaderColumnEnabled:se,isHeaderRowEnabled:le,canEdit:B,format:z},e.id))),$>0&&void 0===y&&[...Array($).keys()].map(((e,t)=>(0,F.jsx)(ye,{rowIndex:Q+t,store:c,rowStore:void 0,disabled:p,columnOrder:G,selection:"cell"!==(null==J?void 0:J.type)?J:void 0,formatStore:U,rowCount:Q,columnCount:Y,isHeaderColumnEnabled:se,isHeaderRowEnabled:le,canEdit:B,format:z},t)))]})})})})})});return(0,F.jsx)("div",{className:g().fOh,style:{cursor:X,...e?{paddingRight:20}:ee},children:e?o:(0,F.jsx)(f().Z,{store:c,inheritDir:!0,shouldShowCommentMenu:ne,shouldShowHoverMenu:!m&&(B||oe),style:K,analyticsName:"page_content",ref:ue,isLastItem:M,children:o})})}(fe)}),(0,F.jsx)(o(242758).Z,{store:pe,leftOverlayStyle:{left:(fe?0:-te)-ge,top:8,bottom:Ke},rightOverlayStyle:{top:8,bottom:Ke}})]}),he=(0,F.jsx)("div",{ref:V,children:(0,F.jsxs)(o(58836).p,{allowSelectionWithin:!0,style:q,ref:de,onMouseDown:ce,children:[fe?(0,F.jsx)(f().Z,{store:c,shouldShowHoverMenu:!m&&(B||oe),shouldShowCommentMenu:ne,style:K,analyticsName:"page_content",ref:ue,ignoreForTocSelectionIntersection:!0,children:ve}):ve,me,(0,F.jsx)(W,{disabled:p,canEdit:B,simpleTableStore:c,rootSizeObserver:O,offset:fe?0:te,hoverSizeObserver:Z})]})});(0,a().VK)((()=>(o(77785).Z.getState()??{})[c.id]),[c]);return(0,h().ez)(c,t,(0,n.useMemo)((()=>({renderedType:"table",getNode:()=>V.current,getBlockStore:()=>c})),[c]),he)})),c().Z)},87744:(e,t,o)=>{o.d(t,{Z:()=>i});o(267602),o(653476),o(470928);class n extends(()=>o(442))().Z{findCellsInRowFromStore(e,t,o){return this.filter((n=>{const i=n.getProps();return e?i.store===e:i.simpleTableStore===t&&i.rowIndex===o}))}findCellsInColumnFromStore(e,t){return this.filter((o=>{const n=o.getProps();return n.simpleTableStore===e&&("number"==typeof t&&n.columnIndex===t||"string"==typeof t&&n.columnID===t)}))}findCellFromTextStore(e){return this.find((t=>t.getTextStore()===e))}findCellFromElement(e,t){return this.find((o=>o.getProps().simpleTableStore===t&&o.getNode()===e))}}const i=new n},68396:(e,t,o)=>{o.d(t,{Z:()=>i});o(267602),o(470928),o(228244);class n extends(()=>o(914149))().B{findFromTextStore(e){return this.find((t=>{var o;return null===(o=t.textStores)||void 0===o?void 0:o.some((t=>t.includes(e)))}))}}const i=new n},608085:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{isActive:!1}}cloneState(){return o(513670).d9(this.state)}}const i=new n},867024:(e,t,o)=>{o.d(t,{default:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{isActive:!1}}cloneState(){return o(513670).d9(this.state)}}const i=new n},579980:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{isActive:!1}}cloneState(){return o(513670).d9(this.state)}}const i=new n},457325:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{isActive:!1}}cloneState(){return o(513670).d9(this.state)}}const i=new n},479875:(e,t,o)=>{o.d(t,{$:()=>s,N:()=>a});o(398858),o(461318),o(33228);var n=()=>o(916673),i=()=>o(429725),r=()=>o(663132);function a(e){const{domainBaseLoginUrl:t,currentUrl:o,forceLandLastVisitedPage:i}=e,r=new URL(o);return i&&r.searchParams.set("target","sites_publish"),(0,n().bf)({url:t,query:{redirectURL:r.toString()}})}function s(e){const{store:t,pageVisitSource:o,embedded:n}=e,a=r().rl(t.getSpaceStore(),t.id);let s="";return s=a&&!n?`http://${r().Bk({domainName:a.getDomainName()||"",domainType:a.getDomainType()})}`:(0,i().ZP)({store:t,preferPublicLink:!0,pageVisitSource:o,disableSlug:n,embedded:n}),{url:s,isHomepage:Boolean(a)}}},772084:(e,t,o)=>{o.d(t,{LC:()=>g,Mo:()=>p,Qn:()=>b,UM:()=>u,fx:()=>m,gR:()=>d,iE:()=>_,iZ:()=>h,pZ:()=>f,pq:()=>v});o(670560),o(267602),o(470928);var n=()=>o(528514),i=()=>o(933868),r=()=>o(396136),a=()=>o(239482),s=()=>o(663132),l=()=>o(658096),c=()=>o(826955);function d(e){const t=e.getSpaceStore();if(!t)return;const o=t.id,s=a().fJ(e);let l;const d=n().KJ(s);for(const n of d){const{from:e,permissions:a}=n;if(e.table===r().iU){if(a.find((e=>(0,i().$D)(e)))){const n=e.blockId,i=c().t1.createChildStore(t,{id:n,table:r().iU,spaceId:o});l=i;if(i.getSiteStore())return i}}}return l}function u(e){var t;const o=null===(t=d(e))||void 0===t?void 0:t.getSiteStore();if(o&&o.isDefined()){const t=null==o?void 0:o.getDomainId(),n=s().Nc(e.getSpaceStore(),t);return n?n.id:void 0}}function p(e){var t;const o=null===(t=d(e))||void 0===t?void 0:t.getSiteStore();if(o&&o.isDefined()){const t=null==o?void 0:o.getDomainId();return s().Nc(e.getSpaceStore(),t)}}function m(e){var t;const{publicPageData:o}=l().default.state;if(!o)return!1;if(o.spaceId!==e.getSpaceId())return!0;const n=null===(t=p(e))||void 0===t?void 0:t.domain_name;return!(!n||!o.publicDomainName||o.publicDomainName===n)}function f(e,t,o,n,r){const a=r?[...r]:[];return o||a.push("search"),t&&a.push("duplicate"),i().RF(e.role)&&a.push("comment"),i().J5(e.role)&&a.push("edit"),a.push("more"),n||a.push("signUpOrLogIn"),a}function g(e,t){const o=null==e?void 0:e.getSiteStore();if(!o)return t.allow_search_engine_indexing;return void 0!==o.isSearchEngineIndexingEnabled()?o.isSearchEngineIndexingEnabled():t.allow_search_engine_indexing}function v(e){var t;const o=d(e),n=null==o?void 0:o.getSiteStore();return!!n&&(!n.isDefined()||(null===(t=n.getHeader())||void 0===t?void 0:t.hideWatermark))}function h(e){var t;const o=d(e),n=null==o?void 0:o.getSiteStore();return!!n&&(!n.isDefined()||(null===(t=n.getHeader())||void 0===t?void 0:t.hideSearch))}function _(e,t){var o;const n=null===(o=e.getSpaceStore())||void 0===o?void 0:o.canAdmin(),i=b(e,t);return Boolean(!i||n)}function b(e,t){var o;const n=s().Nc(e.getSpaceStore(),null===(o=t.getSiteStore())||void 0===o?void 0:o.getDomainId());return n&&n.getPublicHomePage()===e.id}},836756:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{siteSettingContentType:"initial"}}}const i=new n},726912:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{cache:{}}}getBlockIdForSlug(e){return this.state.cache[e]}setBlockIdForSlug(e,t){this.state.cache[e]||this.setState({cache:{...this.state.cache,[e]:t}})}}const i=new n},7132:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{url:"",status:"draft",name:""}}}const i=new n},663132:(e,t,o)=>{o.d(t,{Bk:()=>d,Co:()=>p,DY:()=>y,Lr:()=>m,Nc:()=>h,Or:()=>g,VA:()=>b,Vg:()=>v,aR:()=>f,g2:()=>u,ih:()=>_,rl:()=>S});o(267602),o(470928),o(241792);var n=()=>o(135857),i=()=>o(987655),r=()=>o(513670),a=()=>o(205228),s=()=>o(148126),l=()=>o(772084),c=()=>o(876822);function d(e){let{domainName:t,domainType:o="default"}=e;return"default"===o?`${t}${u()}`:t}function u(){return`.${a().default.publicDomainName}`}function p(e){const{spaceStore:t,domainId:o}=e;if(!t)return"";const n=h(t,o);return d(n?{domainName:n.getDomainName()||"",domainType:n.getDomainType()}:{domainName:(null==t?void 0:t.getPublicContentDomain())||"",domainType:"default"})}function m(e,t){const o=e.getSpaceStore(),i=l().Mo(e);if(i)return(0,n().P)({config:a().default,domainName:i.domain_name,isCustomHostname:"custom"===i.domain_type});{const e=null==o?void 0:o.getPublicContentDomain();if(e)return(0,n().P)({config:a().default,domainName:e,isCustomHostname:!1})}}function f(e){return t=>{if((0,s().Sr)(e)){const e=c().default.state.mainEditorCurrentBlockStore,o=null==e?void 0:e.getRecordStore(e,t);return o?m(o):void 0}}}function g(e,t){if((0,s().Sr)(e))return m(t)}function v(e){if(!e)return[];return(0,r().oA)(e.getPublicDomainIds().map((t=>e.getRecordModel({id:t,table:i().X,spaceId:e.id})))).sort(((e,t)=>{const o=null==e?void 0:e.getCreatedTime(),n=null==t?void 0:t.getCreatedTime();return o&&n?o-n:o?1:n?-1:0}))}function h(e,t){var o;if(e)return null===(o=y(e))||void 0===o?void 0:o.find((e=>e.id===t))}function _(e,t){var o;if(e)return null===(o=y(e))||void 0===o?void 0:o.find((e=>e.getDomainName()===t))}function b(e){var t;if(e)return null===(t=y(e))||void 0===t?void 0:t.find((e=>e.isDefault()))}function y(e){return e?(0,r().oA)(e.getPublicDomainIds().map((t=>e.getRecordModel({id:t,table:i().X,spaceId:e.id})))):[]}function S(e,t){var o;return null===(o=y(e))||void 0===o?void 0:o.find((e=>e.getPublicHomePage()===t))}},543934:(e,t,o)=>{o.d(t,{$t:()=>R,RL:()=>N,_P:()=>U,xv:()=>V,hb:()=>F,QT:()=>j,nB:()=>D,mm:()=>L,Us:()=>Z,_H:()=>O});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476);var n=()=>o(142735),i=()=>o(263184),r=()=>o(156642),a=()=>o(956057),s=()=>o(955620),l=()=>o(491927),c=()=>o(54512),d=()=>o(879952),u=()=>o(970105),p=()=>o(990966),m=()=>o(223321),f=()=>o(594546),g=()=>o(339523),v=()=>o(440721),h=()=>o(505462),_=()=>o(465371),b=()=>o(209628),y=()=>o(32969),S=()=>o(656769),w=()=>o(749826),k=()=>o(475335),I=()=>o(543842),C=()=>o(965903),x=(o(241792),()=>o(876822)),T=()=>o(760797),M=()=>o(934262);var P=()=>o(708574),A=()=>o(639832);const R="/",B=new Set([R,"ï¼"]);const E={"ja-JP":new Set(["ï¼›"])}[o(146947).locale]||new Set;function D(e){return!!B.has(e)||!!E.has(e)}function U(e){const{environment:t,textStore:o,oldSelection:n,oldTextValue:r}=e,l=s().eeV(o.getValue()||[]),c=n.startIndex,d=l[c];if(!D(d))return;const u=s().gPn(l,c-10,c).join("");if(/[0-9]$/.test(u[u.length-1]))return;if(u.endsWith("http:")||u.endsWith("http:/")||u.endsWith("https:")||u.endsWith("https:/"))return;if(0!==c&&!(0,b().cb)(u[u.length-1])&&k().default.state.isKeyboardMode)return;if(A().Z.state.open||m().Z.state.open||I().Z.state.open||S().Z.state.open)return;if(t.device.isPhone&&!t.device.isIpad)return;const p=h().get();if(!p)return;let g=h().getRect(p);if(!g)return;(B.has(d)||E.has(d))&&(g={...g,left:g.left-11}),(0,M().tourIsActive)(M().default.state)&&"create_page_type_slash"===M().default.state.step&&function(){var e;if(!(0,M().tourIsActive)(M().default.state))return;const t=M().default.state.type,o=M().default.state.step,n=(0,T().zr)(t),i={teamStoreIds:((null===(e=x().default.state.currentSpaceViewStore)||void 0===e?void 0:e.getTeamsStores())||[]).map((e=>e.id)),initialTeamStoreId:M().default.state.initialTeamStoreId},r=(0,T().Q)(n,o,i);var a,s;null===r?(null===(a=(s=M().default.state).onCompleteOrClose)||void 0===a||a.call(s),M().default.setState({type:"inactive"})):M().default.setState({...M().default.state,type:t,step:r})}();const v=a().Il();A().Z.setState({id:v,open:!0,isAddMenu:!1,collapsed:!0,textStore:o,oldTextValue:r,oldSelection:n,selectionRect:g,lettersAtLastResult:0,filter:"",temporaryInputDataStore:i().default.createValue(void 0,{name:"temporaryInputData"}),insertedTextBlockLocation:"none"}),(0,f().j)({environment:t,event:{eventName:"open_slash_menu",eventProperties:{id:v,source:"slash_command"}}})}function F(e){const{environment:t,blockStore:o,insertedTextBlockLocation:n}=e,r=A().Z.state;if(d().eP({environment:t,store:o}),p().setSelectionAtStart({store:o.getBlockTitleStore()}),!r.open&&!t.device.isPhone){const e=o.getBlockTitleStore(),r=y().C.getRectFromStore(o),s=a().Il();r&&(A().Z.setState({id:s,open:!0,isAddMenu:!0,collapsed:!0,textStore:e,oldTextValue:e.getValue(),oldSelection:{startIndex:0,endIndex:0},selectionRect:r,lettersAtLastResult:0,filter:"",temporaryInputDataStore:i().default.createValue(void 0,{name:"temporaryInputData"}),insertedTextBlockLocation:n}),p().clear({environment:t}),p().setSelectionAtStart({store:e}),(0,f().j)({environment:t,event:{eventName:"open_slash_menu",eventProperties:{id:s,source:"add_button"}}}))}}function N(e){const{transaction:t,environment:o,action:n,sectionKey:i,searchEventSource:r,itemIndex:a}=e,s=A().Z.state;if(s.open){const{textStore:e,oldTextValue:c,oldSelection:m,filter:v,id:h}=s,b=C().default.state.stores[0];if(b){const e=b.getType(),t=b.getFormat();l().dh(o,{analyticsName:n.analyticsName,action_type:n.analyticsActionType,from:"slash_menu",block_id:b.id,block_type:e,is_toggleable:e?(0,_()._A)(e,t):void 0,slash_menu_filter_length:v.length,slash_menu_section:i,parent_collection_id:b.getParentCollectionIdUpToTwoLevels(),slash_menu_id:h})}u().sO({environment:o,store:e,value:c,transaction:t});const y=void 0!==a?a+1:void 0;(0,f().j)({environment:o,event:{eventName:"slash_menu_search",eventProperties:{id:s.id,source:r||(s.filter?{type:"query",query:s.filter}:{type:"scroll",rank:y})}}}),P().Z.track(n),V({dismissed:!1});const S=(0,g().sQ)(e);S&&d().eP({environment:o,store:S}),p().setSelection({store:e,selection:m})}}function V(e){const{dismissed:t,environment:o}=e,n=A().Z.state;if(n.open&&n.isAddMenu&&o&&t&&"none"!==n.insertedTextBlockLocation){const e="above"===n.insertedTextBlockLocation?"text_insert_above":"text_insert_below";c().W(o,{from:e,type:r().Ti.text,creating_block_id:void 0})}A().Z.setState({open:!1,previousFilter:n.open?n.filter:void 0})}function L(){const e=w().default.getEligibleGroup({experimentId:"slash_menu_experiment_3_existing_users"}),t=w().default.getEligibleGroup({experimentId:"slash_menu_experiment_3_new_users"});return"simplified_menu"===e||"default_suggestions"===e||"personalized_suggestions"===e||"simplified_menu"===t||"default_suggestions"===t||"personalized_suggestions"===t}function O(){return(0,n().VK)((()=>L()),[])}function Z(){return(0,n().VK)((()=>function(){const e=w().default.getEligibleGroup({experimentId:"slash_menu_experiment_3_existing_users"}),t=w().default.getEligibleGroup({experimentId:"slash_menu_experiment_3_new_users"});return"default_suggestions"===e||"personalized_suggestions"===e||"default_suggestions"===t||"personalized_suggestions"===t}()),[])}function j(e){return v().zK(e.textStore,e.oldTextValue,!e.isAddMenu)}},708574:(e,t,o)=>{o.d(t,{Z:()=>n});const n=new class{constructor(){this.lruKeyStore=new(o(41158).D)({key:"frequentlyUsedSlashMenuActions",namespace:"SlashMenu",important:!1,trackingType:"necessary"})}load(){const e=this.lruKeyStore.state;let t={};try{t=e&&JSON.parse(e)||{}}catch(o){}return t}get(){return this.load()}track(e){const t=this.load(),o=t[e.key];void 0!==(null==o?void 0:o.frequency)&&void 0!==(null==o?void 0:o.lastAccessed)?(o.frequency+=1,o.lastAccessed=Date.now()):t[e.key]={frequency:1,lastAccessed:Date.now()},this.lruKeyStore.setState(JSON.stringify(t))}}},639832:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1}}}const i=new n},222685:(e,t,o)=>{o.d(t,{Y3:()=>Z,y6:()=>R,gQ:()=>G,G$:()=>Q,Rf:()=>$,pl:()=>q,Hv:()=>j,lR:()=>L,C:()=>W,Xc:()=>K,GF:()=>O,Q6:()=>V,b3:()=>Y,Oo:()=>H,Bv:()=>z});o(821057),o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(470928),o(30005),o(241792);var n=()=>o(251887),i=()=>o(827370),r=()=>o(396136),a=()=>o(14388),s=()=>o(231522),l=()=>o(657387),c=()=>o(513670),d=()=>o(696459);const u={table:r().iU,recordColumnTypes:{id:a().Z.UUID,space_id:a().Z.UUID,version:a().Z.Number,last_version:a().Z.Number,type:a().Z.String,properties:a().Z.JSON,crdt_data:a().Z.JSON,crdt_format_version:a().Z.Number,content:a().Z.StringArray,non_content_children:a().Z.UUIDArray,discussions:a().Z.StringArray,view_ids:a().Z.StringArray,collection_id:a().Z.UUID,permissions:a().Z.JSON,created_time:a().Z.Number,last_edited_time:a().Z.Number,copied_from:a().Z.UUID,file_ids:a().Z.StringArray,ignore_block_count:a().Z.Boolean,is_template:a().Z.Boolean,parent_id:a().Z.UUID,parent_table:a().Z.String,alive:a().Z.Boolean,moved:a().Z.JSON,format:a().Z.JSON,created_by:a().Z.UUID,last_edited_by:a().Z.UUID,created_by_table:a().Z.String,created_by_id:a().Z.UUID,last_edited_by_table:a().Z.String,last_edited_by_id:a().Z.UUID,content_classification:a().Z.String,moved_to_trash_table:a().Z.String,moved_to_trash_id:a().Z.UUID,moved_to_trash_time:a().Z.Number,deleted_from_trash_time:a().Z.Number,deleted_from_trash_table:a().Z.String,deleted_from_trash_id:a().Z.UUID},metaColumnTypes:{meta_user_id:a().Z.UUID,meta_last_access_timestamp:a().Z.Number,meta_role:a().Z.String}};const p={table:o(752778).vF,recordColumnTypes:{id:a().Z.UUID,version:a().Z.Number,last_version:a().Z.Number,name:a().Z.JSON,description:a().Z.JSON,icon:a().Z.String,cover:a().Z.String,schema:a().Z.JSON,format:a().Z.JSON,parent_id:a().Z.UUID,parent_table:a().Z.String,alive:a().Z.Boolean,file_ids:a().Z.StringArray,template_pages:a().Z.StringArray,copied_from:a().Z.UUID,migrated:a().Z.Boolean,space_id:a().Z.UUID,deleted_schema:a().Z.JSON},metaColumnTypes:{meta_user_id:a().Z.UUID,meta_role:a().Z.String}};const m={table:o(139978).np,recordColumnTypes:{id:a().Z.UUID,version:a().Z.Number,last_version:a().Z.Number,type:a().Z.String,name:a().Z.String,page_sort:a().Z.UUIDArray,parent_id:a().Z.UUID,parent_table:a().Z.String,alive:a().Z.Boolean,format:a().Z.JSON,query2:a().Z.JSON,space_id:a().Z.UUID},metaColumnTypes:{meta_user_id:a().Z.UUID,meta_role:a().Z.String}};const f={table:o(602299).x_,recordColumnTypes:{id:a().Z.UUID,version:a().Z.Number,last_version:a().Z.Number,parent_id:a().Z.UUID,parent_table:a().Z.String,text:a().Z.JSON,created_time:a().Z.Number,last_edited_time:a().Z.Number,alive:a().Z.Boolean,created_by_table:a().Z.String,created_by_id:a().Z.UUID,space_id:a().Z.UUID,content:a().Z.UUIDArray,reactions:a().Z.UUIDArray},metaColumnTypes:{meta_user_id:a().Z.UUID,meta_role:a().Z.String}};const g={table:o(717740).p,recordColumnTypes:{id:a().Z.UUID,version:a().Z.Number,last_version:a().Z.Number,space_id:a().Z.UUID,name:a().Z.String,url:a().Z.String,file_ids:a().Z.StringArray,created_time:a().Z.Number,created_by_id:a().Z.UUID,created_by_table:a().Z.String,alive:a().Z.Boolean},metaColumnTypes:{meta_user_id:a().Z.UUID,meta_role:a().Z.String}};const v={table:o(542973).qF,recordColumnTypes:{id:a().Z.UUID,type:a().Z.String,version:a().Z.Number,last_version:a().Z.Number,parent_id:a().Z.UUID,parent_table:a().Z.String,context:a().Z.JSON,resolved:a().Z.Boolean,comments:a().Z.StringArray,space_id:a().Z.UUID,reactions:a().Z.UUIDArray,property_id:a().Z.String},metaColumnTypes:{meta_user_id:a().Z.UUID,meta_role:a().Z.String}};const h={table:o(779565).uX,recordColumnTypes:{id:a().Z.UUID,version:a().Z.Number,last_version:a().Z.Number,user_id:a().Z.UUID,activity_id:a().Z.UUID,received:a().Z.Boolean,read:a().Z.Boolean,visited:a().Z.Boolean,emailed:a().Z.Boolean,invalid:a().Z.Boolean,space_id:a().Z.UUID,navigable_block_id:a().Z.UUID,collection_id:a().Z.UUID,discussion_id:a().Z.UUID,type:a().Z.String,end_time:a().Z.String,channel:a().Z.String,archived_at:a().Z.Number},metaColumnTypes:{meta_user_id:a().Z.UUID,meta_role:a().Z.String}};const _={table:o(989478).KJ,recordColumnTypes:{id:a().Z.UUID,version:a().Z.Number,last_version:a().Z.Number,email:a().Z.String,given_name:a().Z.String,family_name:a().Z.String,profile_photo:a().Z.String,onboarding_completed:a().Z.Boolean,mobile_onboarding_completed:a().Z.Boolean,clipper_onboarding_completed:a().Z.Boolean,reverify:a().Z.Boolean,name:a().Z.String,is_banned:a().Z.Boolean,suspended_time:a().Z.Number},metaColumnTypes:{meta_user_id:a().Z.UUID,meta_role:a().Z.String}};const b={table:o(421476).yo,recordColumnTypes:{id:a().Z.UUID,space_id:a().Z.UUID,version:a().Z.Number,last_version:a().Z.Number,created_time:a().Z.Number,parent_id:a().Z.UUID,parent_table:a().Z.String,icon:a().Z.String,actors:a().Z.JSON},metaColumnTypes:{meta_user_id:a().Z.UUID,meta_role:a().Z.String}};const y={table:o(657169).Py,recordColumnTypes:{id:a().Z.String,space_id:a().Z.UUID,space_permission_group_id:a().Z.UUID,user_id:a().Z.UUID,version:a().Z.Number,last_version:a().Z.Number,removed_at:a().Z.Number},metaColumnTypes:{meta_user_id:a().Z.UUID,meta_role:a().Z.String}};const S={table:o(458196).GQ,recordColumnTypes:{id:a().Z.String,version:a().Z.Number,last_version:a().Z.Number,name:a().Z.String,icon:a().Z.String,space_id:a().Z.UUID,group_id:a().Z.UUID,created_by_id:a().Z.UUID,created_by_table:a().Z.String,created_at:a().Z.Number,last_edited_by_table:a().Z.String,last_edited_by_id:a().Z.UUID,last_edited_at:a().Z.Number,deleted_at:a().Z.Number},metaColumnTypes:{meta_user_id:a().Z.UUID,meta_role:a().Z.String}};const w={table:o(255933).bx,recordColumnTypes:{id:a().Z.UUID,version:a().Z.Number,last_version:a().Z.Number,name:a().Z.String,email_domains:a().Z.StringArray,pages:a().Z.StringArray,icon:a().Z.String,disable_public_access:a().Z.Boolean,disable_public_access_requests:a().Z.Boolean,disable_guests:a().Z.Boolean,disable_move_to_space:a().Z.Boolean,disable_export:a().Z.Boolean,disable_space_page_edits:a().Z.Boolean,beta_enabled:a().Z.Boolean,created_time:a().Z.Number,last_edited_time:a().Z.Number,deleted_by:a().Z.UUID,permanently_deleted_time:a().Z.Number,created_by_table:a().Z.String,created_by_id:a().Z.UUID,last_edited_by_table:a().Z.String,last_edited_by_id:a().Z.UUID,admin_disable_public_access:a().Z.Boolean,space_pages:a().Z.UUIDArray,plan_type:a().Z.String,invite_link_enabled:a().Z.Boolean,initial_use_cases:a().Z.String,public_home_page:a().Z.String,bot_settings:a().Z.JSON,settings:a().Z.JSON,subscription_tier:a().Z.String,disable_team_creation:a().Z.Boolean,overdue_subscription:a().Z.JSON,short_id:a().Z.Number,short_id_str:a().Z.String},metaColumnTypes:{meta_user_id:a().Z.UUID,meta_role:a().Z.String}};const k={table:o(125571).zU,recordColumnTypes:{id:a().Z.UUID,version:a().Z.Number,last_version:a().Z.Number,space_id:a().Z.UUID,bookmarked_pages:a().Z.StringArray,shared_pages:a().Z.StringArray,shared_pages_manual_sort:a().Z.StringArray,visited_templates:a().Z.StringArray,sidebar_hidden_templates:a().Z.StringArray,notify_mobile:a().Z.Boolean,notify_desktop:a().Z.Boolean,notify_email:a().Z.Boolean,notify_email_always:a().Z.Boolean,created_getting_started:a().Z.Boolean,parent_id:a().Z.UUID,parent_table:a().Z.String,alive:a().Z.Boolean,created_onboarding_templates:a().Z.Boolean,private_pages:a().Z.UUIDArray,joined:a().Z.Boolean,joined_teams:a().Z.UUIDArray,settings:a().Z.JSON,ai_suggestions:a().Z.JSON,assistant_session_starters:a().Z.UUIDArray,sidebar_order:a().Z.StringArray,first_joined_space_time:a().Z.Number},metaColumnTypes:{meta_user_id:a().Z.UUID,meta_role:a().Z.String}};const I={table:o(306164).e0,recordColumnTypes:{id:a().Z.UUID,version:a().Z.Number,last_version:a().Z.Number,space_id:a().Z.UUID,name:a().Z.String,description:a().Z.String,icon:a().Z.String,created_time:a().Z.Number,created_by_table:a().Z.String,created_by_id:a().Z.UUID,last_edited_time:a().Z.Number,last_edited_by_table:a().Z.String,last_edited_by_id:a().Z.UUID,archived_by:a().Z.UUID,archived_at:a().Z.Number,team_pages:a().Z.UUIDArray,pinned_pages:a().Z.UUIDArray,parent_id:a().Z.UUID,parent_table:a().Z.String,settings:a().Z.JSON,is_default:a().Z.Boolean,membership:a().Z.JSON,permissions:a().Z.JSON},metaColumnTypes:{meta_user_id:a().Z.UUID,meta_role:a().Z.String}};const C={table:o(691970).dx,recordColumnTypes:{id:a().Z.UUID,version:a().Z.Number,last_version:a().Z.Number,space_views:a().Z.StringArray,space_view_pointers:a().Z.JSON,left_spaces:a().Z.StringArray,deleted_email:a().Z.String},metaColumnTypes:{meta_user_id:a().Z.UUID,meta_role:a().Z.String}};const x={table:o(630611).Sr,recordColumnTypes:{id:a().Z.UUID,version:a().Z.Number,last_version:a().Z.Number,settings:a().Z.JSON},metaColumnTypes:{meta_user_id:a().Z.UUID,meta_role:a().Z.String}},T=[u,w,k,C,_,m,p,I,x,h,f,v,b,S,y,g],M=new Set(T.map((e=>e.table))),P={Records:{tableName:"records",idColumn:"record_id",priorityColumns:"importance, timestamp",priorityColumnsOrderBy:"importance DESC, timestamp DESC"},Block:{tableName:"block",idColumn:"id",priorityColumns:"meta_last_access_timestamp",priorityColumnsOrderBy:"meta_last_access_timestamp DESC"}},A=Object.keys({record_table:!0,record_id:!0,record_value:!0,space_id:!0,timestamp:!0,parent_table:!0,parent_id:!0,importance:!0,user_id:!0});async function R(e,t){await(0,s().G$)({connection:e,statements:[{sql:"\n\t\t\t\tUPDATE records SET user_id = ? WHERE user_id is null\n\t\t\t\t",args:[t]}],queryName:"backfillRecordsWithUserId"})}function B(e){const t=c().vM(e.records,(e=>e.pointer.table)),o=[];return Object.entries(t).forEach((t=>{let[n,i]=t;const r=T.find((e=>e.table===n));if(!r)return;const a=(0,d().Yd)(r.recordColumnTypes),l=(0,d().Yd)(r.metaColumnTypes),u=[...a,...l];c().yo(i,Math.floor(s().mz/u.length)).forEach((t=>{const i=`(${u.join(",")})`,r=Array(t.length).fill(`(${"?, ".repeat(u.length-1)}?)`).join(",");let s;s=e.maybeStaleRecords&&u.includes("version")?`INSERT INTO ${n} ${i} VALUES ${r}`.concat("ON CONFLICT (id, meta_user_id) DO UPDATE SET").concat("\n").concat(u.map((e=>`${e} = excluded.${e}`)).join(",")).concat("\n").concat(`WHERE excluded.version > ${n}.version`):`INSERT OR REPLACE INTO ${n} ${i} VALUES ${r}`;const p=c().xH(t.map((e=>{let{value:t,timestamp:o,userId:n}=e;if(!t)return[];const i=t.value;if(!i)return[];const r=a.map((e=>function(e){if(null==e)return null;if("string"==typeof e||"number"==typeof e)return e;if("boolean"==typeof e)return e?1:0;return JSON.stringify(e)}((0,d().qg)(i,e)?i[e]:void 0))),s=l.map((e=>{switch(e){case"meta_user_id":return n;case"meta_role":return t.role;case"meta_last_access_timestamp":return o;default:throw new Error(`Unknown meta column ${e}`)}}));return r.concat(s)})));o.push({sql:s,args:p})}))})),o}function E(e){const[t,o]=c().uK(e.records,(e=>J(e))),i=B({records:t,maybeStaleRecords:e.maybeStaleRecords}),r=function(e){const{records:t,maybeStaleRecords:o}=e;return c().yo(t,Math.floor(s().mz/A.length)).map((e=>{let t=`\n\t\t\tINSERT INTO records\n\t\t\t(\n\t\t\t\trecord_table,\n\t\t\t\trecord_id,\n\t\t\t\trecord_value,\n\t\t\t\ttimestamp,\n\t\t\t\tparent_table,\n\t\t\t\tparent_id,\n\t\t\t\timportance,\n\t\t\t\tuser_id,\n\t\t\t\tspace_id\n\t\t\t)\n\t\t\tVALUES ${Array(e.length).fill("(?, ?, ?, ?, ?, ?, ?, ?, ?)").join(",")}`;return t=o?t.concat("\n\t\t\t\tON CONFLICT (record_table, record_id, user_id) DO UPDATE SET\n\t\t\t\t\trecord_value =\n\t\t\t\t\t\tCASE WHEN json_extract(excluded.record_value, '$.value.version') > json_extract(records.record_value, '$.value.version')\n\t\t\t\t\t\tTHEN excluded.record_value\n\t\t\t\t\t\tELSE records.record_value\n\t\t\t\t\t\tEND,\n\t\t\t\t\ttimestamp =\n\t\t\t\t\t\tCASE WHEN json_extract(excluded.record_value, '$.value.version') > json_extract(records.record_value, '$.value.version')\n\t\t\t\t\t\tTHEN excluded.timestamp\n\t\t\t\t\t\tELSE records.timestamp\n\t\t\t\t\t\tEND,\n\t\t\t\t\tparent_table =\n\t\t\t\t\t\tCASE WHEN json_extract(excluded.record_value, '$.value.version') > json_extract(records.record_value, '$.value.version')\n\t\t\t\t\t\tTHEN excluded.parent_table\n\t\t\t\t\t\tELSE records.parent_table\n\t\t\t\t\t\tEND,\n\t\t\t\t\tparent_id =\n\t\t\t\t\t\tCASE WHEN json_extract(excluded.record_value, '$.value.version') > json_extract(records.record_value, '$.value.version')\n\t\t\t\t\t\tTHEN excluded.parent_id\n\t\t\t\t\t\tELSE records.parent_id\n\t\t\t\t\t\tEND,\n\t\t\t\t\timportance =\n\t\t\t\t\t\tCASE WHEN json_extract(excluded.record_value, '$.value.version') > json_extract(records.record_value, '$.value.version')\n\t\t\t\t\t\tTHEN excluded.importance\n\t\t\t\t\t\tELSE records.importance\n\t\t\t\t\t\tEND,\n\t\t\t\t\tuser_id =\n\t\t\t\t\t\tCASE WHEN json_extract(excluded.record_value, '$.value.version') > json_extract(records.record_value, '$.value.version')\n\t\t\t\t\t\tTHEN excluded.user_id\n\t\t\t\t\t\tELSE excluded.user_id\n\t\t\t\t\t\tEND,\n\t\t\t\t\t-- space_id never changes.\n\t\t\t\t\tspace_id = COALESCE(records.space_id, excluded.space_id)"):t.concat("\n\t\t\t\tON CONFLICT (record_table, record_id, user_id) DO UPDATE SET\n\t\t\t\t\trecord_value = excluded.record_value,\n\t\t\t\t\ttimestamp = excluded.timestamp,\n\t\t\t\t\tparent_table = excluded.parent_table,\n\t\t\t\t\tparent_id = excluded.parent_id,\n\t\t\t\t\timportance = excluded.importance,\n\t\t\t\t\tuser_id = excluded.user_id,\n\t\t\t\t\t-- space_id never changes.\n\t\t\t\t\tspace_id = COALESCE(records.space_id, excluded.space_id)"),{sql:t,args:c().xH(e.map((e=>{let{pointer:t,value:o,timestamp:i,importance:r,userId:a}=e,l=null,c=null;return o&&o.value&&(0,n().oK)(o.value)&&(l=o.value.parent_id,c=o.value.parent_table),[t.table,t.id,(0,s().gI)(o),i,c,l,"number"==typeof r?r:null,a,t.spaceId||null]})))}}))}({records:o,maybeStaleRecords:e.maybeStaleRecords});return[...D(t),...U(o.filter((e=>M.has(e.pointer.table)))),...i,...r]}function D(e){return c().yo(e,Math.floor(s().mz/(2*e.length))).map((e=>{const t=l().h.or(e.map((e=>l().h`(records.record_id = ${e.pointer.id} AND records.user_id = ${e.userId})`)));return l().h`DELETE FROM records WHERE ${t}`.asWrite()}))}function U(e){const t=c().vM(e,(e=>e.pointer.table)),o=[];return Object.entries(t).forEach((e=>{let[t,n]=e;c().yo(n,Math.floor(s().mz/(2*n.length))).forEach((e=>{const n=l().h.or(e.map((e=>l().h`(id = ${e.pointer.id} AND meta_user_id = ${e.userId})`)));o.push(l().h`DELETE FROM ${l().h.ident(t)} WHERE ${n}`.asWrite())}))})),o}async function F(e,t){if(0===t.length)return[];const o=c().vM(t,(e=>e.pointer.table)),n=[];Object.entries(o).forEach((t=>{let[o,r]=t;const a=T.find((e=>e.table===o));if(!a)return;const l=Array(r.length).fill("(id = ? AND meta_user_id = ?)").join(" OR "),d=c().VS(r,(e=>{let{pointer:{table:t,id:o},userId:n}=e;return[o,n]}));n.push(async function(){const[t]=await(0,s().G$)({connection:e,statements:[{sql:`\n\t\t\t\tSELECT * FROM ${o}\n\t\t\t\tWHERE ${l}`,args:d,getData:!0}],queryName:"getRecordsFromSeparateTables"});return t.data.map((e=>function(e,t,o){return{pointer:i().dr.fromPointerLike({table:e,id:t.id,spaceId:t.space_id||void 0}),value:{role:t.meta_role,value:N(t,o)},timestamp:t.meta_last_access_timestamp,importance:0,userId:t.meta_user_id}}(o,e,a)))}())}));const r=await Promise.all(n);return c().xH(r)}function N(e,t){const o={};return(0,d().Yd)(t.recordColumnTypes).forEach((n=>{const i=t.recordColumnTypes[n];if(null!==e[n])switch(i){case a().Z.UUID:case a().Z.String:case a().Z.Number:o[n]=e[n];break;case a().Z.StringArray:case a().Z.JSON:o[n]=JSON.parse(e[n]);break;case a().Z.XML:o[n]=e[n];break;case a().Z.UUIDArray:o[n]=JSON.parse(e[n]);break;case a().Z.Boolean:o[n]=1===e[n];break;case a().Z.CIDR:o[n]=e[n];break;case a().Z.NumberArray:o[n]=JSON.parse(e[n]);break;case a().Z.Blob:o[n]=e[n];break;default:(0,d().t1)(i)}})),o}async function V(e,t){const[o,n]=c().uK(t,(e=>M.has(e.pointer.table))),r=await F(e,o),a=new Set(r.map((e=>i().P2.toKey({pointer:e.pointer,userId:e.userId})))),l=o.filter((e=>!a.has(i().P2.toKey(e)))),d=await async function(e,t){if(0===t.length)return[];const o=Array(t.length).fill("(record_table = ? AND record_id = ? AND user_id = ?)").join(" OR "),n=c().VS(t,(e=>{let{pointer:{table:t,id:o},userId:n}=e;return[t,o,n]})),[r]=await(0,s().G$)({connection:e,statements:[{sql:`\n\t\t\t\tSELECT * FROM records\n\t\t\t\tWHERE ${o}`,args:n,getData:!0}],queryName:"getRecordsFromRecordsTable"});return r.data.map((e=>({pointer:i().dr.fromPointerLike({table:e.record_table,id:e.record_id,spaceId:e.space_id||void 0}),value:JSON.parse(e.record_value),timestamp:e.timestamp,importance:"number"==typeof e.importance?e.importance:void 0,userId:e.user_id})))}(e,n.concat(l)),u=d.filter((e=>!J(e)));return r.concat(u)}async function L(e,t){const o=l().h`
  SELECT * FROM block
  WHERE parent_table = ${t.parent.table}
  AND parent_id = ${t.parent.id}
  AND meta_user_id = ${t.userId}
  `.asRead(),n=l().h`
  UPDATE block
  SET meta_last_access_timestamp = ${t.timestamp}
  WHERE parent_table = ${t.parent.table}
  AND parent_id = ${t.parent.id}
  AND meta_user_id = ${t.userId}
  `.asWrite(),[a]=await(0,s().G$)({connection:e,statements:[o,n],queryName:"getBlocksWithParent"});return a.data.map((e=>({pointer:i().dr.fromPointerLike({table:r().iU,id:e.id,spaceId:e.space_id||void 0}),value:{role:e.meta_role,value:N(e,u)},userId:t.userId})))}async function O(e,t){const o=l().h`
    WITH RECURSIVE page_blocks AS (
      SELECT * FROM block
      WHERE id = ${t.page.id}
      AND meta_user_id = ${t.userId}

      UNION

      SELECT block.*
      FROM
        block INDEXED BY block_parent_id,
        page_blocks
      WHERE
      (
        page_blocks.id = ${t.page.id}
        OR page_blocks.type NOT IN ('page', 'toggle')
      )
      AND block.parent_table = 'block'
      AND block.parent_id = page_blocks.id
      AND block.meta_user_id = ${t.userId}
    )
    SELECT * FROM page_blocks
    `,n=await o.all(e,"getPageBlocksByParent");return 0===n.length?[]:n.map((e=>({pointer:i().dr.fromPointerLike({table:r().iU,id:e.id,spaceId:e.space_id||void 0}),value:{role:e.meta_role,value:N(e,u)},userId:t.userId})))}async function Z(e,t){const o=t.filter((e=>"set"===e.type&&!e.maybeStaleRecord)),n=t.filter((e=>"set"===e.type&&e.maybeStaleRecord)),i=t.filter((e=>{let{type:t}=e;return"access"===t})),a=t.filter((e=>{let{type:t}=e;return"delete"===t})),c=[];if(i.forEach((e=>{const t=e.record.pointer.table;J(e.record)?t===r().iU&&c.push(l().h`
	        UPDATE block
	        SET meta_last_access_timestamp = ${e.record.timestamp}
	        WHERE id = ${e.record.pointer.id}
	        AND meta_user_id = ${e.record.userId}
	        `.asWrite()):c.push({sql:"UPDATE records\n          SET timestamp = ?\n          WHERE record_table = ?\n          AND record_id = ?\n          AND user_id = ?",args:[e.record.timestamp,t,e.record.pointer.id,e.record.userId]})})),o.length>0||n.length>0){if(o.length>0){const e=o.map((e=>e.record));c.push(...E({records:e,maybeStaleRecords:!1}))}if(n.length>0){const e=n.map((e=>e.record));c.push(...E({records:e,maybeStaleRecords:!0}))}}if(a.length>0){const e=a.map((e=>e.record));c.push(...function(e){const t=U(e.filter((e=>M.has(e.pointer.table)))),o=D(e);return t.concat(o)}(e))}0!==c.length&&await(0,s().G$)({connection:e,statements:c,queryName:"applyRecordCacheOperations"})}async function j(e){const{connection:t,tables:o,maxSize:n,offlineRecordIds:i}=e;if(0===o.length)return;const r=o.map((e=>function(e){const{table:t,maxSize:o,offlineRecordIds:n}=e,{tableName:i,idColumn:r,priorityColumns:a,priorityColumnsOrderBy:s}=P[t],l=`\n\t\tWITH offline_record_ids(id) AS (\n\t\t\t${n.length>0?`VALUES ${n.map((()=>"(?)")).join(", ")}`:"SELECT 1 WHERE false"}\n\t\t)\n\n\t`,c=`\n\t\t\n\t\tSELECT\n\t\t\t${r},\n\t\t\t0 as preservation_priority,\n\t\t\t${a}\n\t\tFROM ${i}\n\t\tWHERE ${r} IN (SELECT id FROM offline_record_ids)\n\t\n\t\tUNION\n\t\t\n\t\tSELECT\n\t\t\t${r},\n\t\t\t1 as preservation_priority,\n\t\t\t${a}\n\t\tFROM ${i}\n\t\tWHERE ${r} NOT IN (SELECT id FROM offline_record_ids)\n\t\n\t\tORDER BY preservation_priority ASC, ${s}\n\t\tLIMIT ${Math.max(o,n.length)}\n\t`;return{sql:`\n\t\t\t${l}\n\t\t\tDELETE FROM ${i}\n\t\t\tWHERE ${r} NOT IN (\n\t\t\t\tSELECT ${r} FROM (\n\t\t\t\t\t${c}\n\t\t\t\t)\n\t\t\t)\n\t\t`,args:n}}({table:e,maxSize:n,offlineRecordIds:i})));await(0,s().G$)({connection:t,statements:r,queryName:"evictTables"})}async function K(e){const{connection:t,userId:o,orderBy:n}=e,[{data:i}]=await(0,s().G$)({connection:t,statements:[{sql:`\n\t\t\t\t\tSELECT\n\t\t\t\t\t\tid,\n\t\t\t\t\t\tlast_downloaded_at,\n\t\t\t\t\t\tlast_downloaded_version,\n\t\t\t\t\t\tCASE \n\t\t\t\t\t\t\t\tWHEN EXISTS (\n\t\t\t\t\t\t\t\t\tSELECT 1 FROM offline_action\n\t\t\t\t\t\t\t\t\tWHERE offline_action.impacted_page_id = offline_page.id\n\t\t\t\t\t\t\t\t\tAND offline_action.origin_page_id <> offline_page.id\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\tTHEN 1\n\t\t\t\t\t\t\t\tELSE 0\n\t\t\t\t\t\tEND AS is_locked\n\t\t\t\t\tFROM offline_page\n\t\t\t\t\tWHERE meta_user_id = ?\n\t\t\t\t\t${"mostStaleFirst"===n?"ORDER BY last_downloaded_at ASC":""}\n\t\t\t\t`,args:[o],getData:!0}]}),r=[];for(const a of i)(0,d().Kn)(a)&&(0,d().qg)(a,"id")&&"string"==typeof a.id&&r.push([a.id,{isLocked:1===a.is_locked,lastDownloadedAt:"number"==typeof a.last_downloaded_at?a.last_downloaded_at:void 0,lastDownloadedVersion:"number"==typeof a.last_downloaded_version?a.last_downloaded_version:void 0}]);return r}async function z(e){const{connection:t,pageId:o,userId:n,lastDownloadedAt:i,lastDownloadedVersion:r,originPageId:a,pageType:c,downloadStatus:d,collectionStatus:u}=e,p=[l().h`INSERT OR REPLACE INTO offline_page (
			id,
			meta_user_id,
			last_downloaded_at,
			last_downloaded_version,
			type,
			download_status,
			collection_status
		) VALUES (
			${o},
			${n},
			${"number"==typeof i?i:null},
			${"number"==typeof r?r:null},
			${c},
			${d},
			${u??null})`.asWrite()];if(void 0!==a){const e=l().h`
			INSERT OR REPLACE INTO offline_action
			(meta_user_id, origin_page_id, impacted_page_id)
			SELECT ${n}, ${a}, ${o}
		`.asWrite();p.push(e)}await(0,s().G$)({connection:t,statements:p})}async function H(e){const{connection:t,pageId:o,userId:n,lastDownloadedAt:i,lastDownloadedVersion:r}=e,a=[l().h`
			UPDATE offline_page
			SET
				last_downloaded_at = ${i},
				last_downloaded_version = ${r??null}
			WHERE id = ${o}
			AND meta_user_id = ${n}
		`.asWrite()];await(0,s().G$)({connection:t,statements:a})}async function q(e){const{connection:t,pageId:o,userId:n}=e;await(0,s().G$)({connection:t,statements:[l().h`DELETE FROM offline_action WHERE ${l().h.and([l().h`meta_user_id = ${n}`,l().h`origin_page_id = ${o}`])}`.asWrite(),l().h`DELETE FROM offline_page WHERE ${l().h.and([l().h`id = ${o}`,l().h`meta_user_id = ${n}`])}`.asWrite()]})}async function W(e){const{connection:t,originPageId:o,userId:n}=e,[{data:i}]=await(0,s().G$)({connection:t,statements:[l().h`SELECT impacted_page_id FROM offline_action WHERE ${l().h.and([l().h`meta_user_id = ${n}`,l().h`origin_page_id = ${o}`])}`.asRead()]});return i.map((e=>e.impacted_page_id))}async function G(e){const{connection:t,impactedPageId:o,userId:n}=e,[{data:i}]=await(0,s().G$)({connection:t,statements:[l().h`SELECT COUNT(*) FROM offline_action WHERE ${l().h.and([l().h`meta_user_id = ${n}`,l().h`impacted_page_id = ${o}`])}`.asRead()]});return c().U2(i,"[0][COUNT(*)]")}async function $(e){const{connection:t,originPageId:o,userId:n}=e;await(0,s().G$)({connection:t,statements:[l().h`DELETE FROM offline_action WHERE ${l().h.and([l().h`meta_user_id = ${n}`,l().h`origin_page_id = ${o}`])}`.asWrite()]})}async function Q(e){await async function(e){const t=[];M.forEach((e=>{t.push(l().h`DELETE FROM ${l().h.ident(e)}`.asWrite())})),await(0,s().G$)({connection:e,statements:t,queryName:"deleteAllCachedRecordsFromSeparateTables"})}(e),await async function(e){await(0,s().sf)({connection:e,sql:"DELETE FROM records",queryName:"deleteAllCachedRecordsFromRecordsTable"})}(e),await async function(e){await(0,s().G$)({connection:e,statements:[l().h`DELETE FROM offline_action`.asWrite(),l().h`DELETE FROM offline_page`.asWrite()],queryName:"deleteAllCachedRecordsFromOfflineTables"})}(e)}async function Y(e){const{connection:t,maxSize:o}=e,n={Records:{sql:`SELECT COUNT(*) FROM ${P.Records.tableName}`,getData:!0},Block:{sql:`SELECT COUNT(*) FROM ${P.Block.tableName}`,getData:!0}},i=await(0,s().G$)({connection:t,statements:Object.values(n),queryName:"getTablesThatNeedEviction"}),r=c().U2(i,"[0][data][0][COUNT(*)]"),a=c().U2(i,"[1][data][0][COUNT(*)]");if("number"!=typeof r||"number"!=typeof a)throw new Error("getTablesThatNeedEviction query returned malformed results.");return[...r>o?["Records"]:[],...a>o?["Block"]:[]]}function J(e){return M.has(e.pointer.table)&&void 0!==e.value&&void 0!==e.value.value}},998901:(e,t,o)=>{o.d(t,{Alignment:()=>i,Placement:()=>n});let n=function(e){return e[e.Top=0]="Top",e[e.Bottom=1]="Bottom",e[e.Left=2]="Left",e[e.Right=3]="Right",e[e.Center=4]="Center",e}({}),i=function(e){return e[e.Start=0]="Start",e[e.Center=1]="Center",e[e.End=2]="End",e}({})},520849:(e,t,o)=>{o.d(t,{Z:()=>i});var n=function(e){return e[e.All=0]="All",e[e.X=1]="X",e[e.Y=2]="Y",e[e.None=3]="None",e}(n||{});const i=n},619541:(e,t,o)=>{o.d(t,{T:()=>n,l:()=>i});const n={localLanguagePreferenceKey:"CodeBlockDefaultLanguage",localCodeWrapPreferenceKey:"CodeBlockDefaultCodeWrap",defaultLanguage:"JavaScript",defaultCodePreviewFormat:"code"},i={localSizePreferenceKey:"QuoteBlockDefaultSize"}},499823:(e,t,o)=>{o.d(t,{O:()=>n});const n=44},752114:(e,t,o)=>{o.d(t,{T7:()=>n,qe:()=>i,xS:()=>r});function n(e,t){return{x:e.x-t.x,y:e.y-t.y}}function i(e,t){return{x:e.x+t.x,y:e.y+t.y}}function r(){return{x:0,y:0}}(0,o(947115).exposeDebugValue)("Point",{pointMinus:n,pointPlus:i,pointZero:r})},104088:(e,t,o)=>{o.d(t,{k:()=>n});let n=function(e){return e[e.Popup=0]="Popup",e[e.SlideUp=1]="SlideUp",e[e.BottomSheet=2]="BottomSheet",e}({})},35982:(e,t,o)=>{o.d(t,{iL:()=>a,jn:()=>v,AM:()=>h,kK:()=>p,Kr:()=>m,dQ:()=>f,Ep:()=>l,MU:()=>_,em:()=>w,AV:()=>y,uh:()=>c,TF:()=>d,kL:()=>u,bM:()=>s});o(670560),o(267602),o(241792),o(731107);class n{constructor(e){this.parentOf=void 0,this.sizeOf=void 0,this.parentOf=[],this.sizeOf=[],this.ensureCapacity(e)}get capacity(){return this.parentOf.length}ensureCapacity(e){if(!(e<=this.capacity))for(let t=this.parentOf.length;t<e;t++)this.parentOf[t]=t,this.sizeOf[t]=1}getNodeSize(e){return this.ensureCapacity(e+1),this.sizeOf[e]}getSets(){const e=[],t=[];for(let o=0;o<this.capacity;o++){const n=this.findRoot(o);n===o&&e.push(o),t[n]??=[],t[n].push(o)}return e.map((e=>t[e]))}unionContainingSets(e,t){return this.ensureCapacity(Math.max(e,t)+1),this.unionContainingSetsInternal(e,t)}unionContainingSetsInternal(e,t){if((e=this.findRootInternal(e))===(t=this.findRootInternal(t)))return e;const[o,n]=this.sizeOf[e]>this.sizeOf[t]?[e,t]:[t,e];return this.parentOf[n]=o,this.sizeOf[o]=this.sizeOf[o]+this.sizeOf[n],o}findRoot(e){return this.ensureCapacity(e+1),this.findRootInternal(e)}findRootInternal(e){for(;this.parentOf[e]!==e;){const t=this.parentOf[e];this.parentOf[e]=this.parentOf[this.parentOf[e]],e=t}return e}isRoot(e){return this.parentOf[e]===e}}var i=()=>o(513670),r=()=>o(752114);class a{static from(e){return new a(e.left,e.top,e.width,e.height)}constructor(e,t,o,n){this.x=e,this.y=t,this.width=o,this.height=n,this.top=this.height<0?this.y+this.height:this.y,this.bottom=this.height<0?this.y:this.y+this.height,this.left=this.width<0?this.x+this.width:this.x,this.right=this.width<0?this.x:this.x+this.width}toJSON(){return{...this}}}const s=new a(0,0,0,0);function l(e){return Boolean(e&&(i().hj(e.top)||i().hj(e.left)))}function c(e,t,o){return e.left<=t&&t<=e.right&&e.top<=o&&o<=e.bottom}function d(e,t){return e.left<=t.left&&e.right>=t.right}function u(e,t){return e.top<=t.top&&e.bottom>=t.bottom}function p(e,t){return!(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top)}function m(e,t){return!(e.right<=t.left||t.right<=e.left)}function f(e,t){return!(e.bottom<=t.top||t.bottom<=e.top)}function g(e,t,o){return new a(e.left+t,e.top+o,e.width,e.height)}function v(e,t){return new a(e.left-t,e.top-t,e.width+2*t,e.height+2*t)}function h(e,t){return new a(e.left-t.left,e.top-t.top,t.left+e.width+t.right,t.top+e.height+t.bottom)}function _(e){const t=e.top+e.height/2,o=e.left+e.width/2;return new a(o,t,0,0)}function b(e){const t=e.slice();return t.sort(((e,t)=>{const o=e.top-t.top;if(0!==o)return o;const n=e.left-t.left;if(0!==n)return n;const i=t.width-e.width;return 0!==i?i:t.height-e.height})),t}function y(e,t){const o=Math.min(e.left,t.left),n=Math.min(e.top,t.top),i=Math.max(e.right,t.right),r=Math.max(e.bottom,t.bottom);return new a(o,n,i-o,r-n)}function S(e){const t=new n(e.length),o=b(e);for(let n=0;n<o.length;n++)for(let e=n+1;e<o.length;e++)p(o[n],o[e])&&t.unionContainingSets(n,e);return b(t.getSets().map((e=>e.map((e=>o[e])).reduce(((e,t)=>y(e,t))))))}function w(e){const t=S(e);if(0===t.length)return{total:new a(0,0,0,0),rects:[]};if(1===t.length){const e=a.from(t[0]);return{total:e,rects:[{original:e,translate:(0,r().xS)(),translated:e}]}}const[o,...n]=t;let i=a.from(o);const s=[{original:o,translate:(0,r().xS)(),translated:o}];for(const a of n){if(f(o,a)){i=y(i,a),s.push({original:a,translate:(0,r().xS)(),translated:a});continue}const e={x:i.right,y:i.top},t=(0,r().T7)(e,a),n=g(a,t.x,t.y);s.push({original:a,translate:t,translated:n}),i=y(i,n)}return{total:i,rects:s}}(0,o(947115).exposeDebugValue)("Rect",{ComparableRect:a,simplifyIntersectingRects:S,intersects:p,undoTextWrapping:w})},141938:(e,t,o)=>{o.d(t,{Z:()=>i});o(241792);class n extends(()=>o(263184))().default{constructor(){super(...arguments),this.pause=()=>{this.setState({active:!1,onActive:[]})},this.resume=()=>{this.state.onActive.map((e=>e())),this.setState({active:!0,onActive:[]})}}getInitialState(){return{active:!0,onActive:[]}}whenActive(e){this.state.active?e():this.setState({...this.state,onActive:o(513670).jj([...this.state.onActive,e])})}}const i=new n},495439:(e,t,o)=>{o.d(t,{default:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1}}}const i=new n},43519:(e,t,o)=>{o.r(t),o.d(t,{default:()=>r});var n=()=>o(342792);class i extends(()=>o(263184))().default{getInitialState(){return{isLoaded:!1,isLoggingEnabled:!1,isAmplitudeEnabled:!1,isSegmentEnabled:!1,isZendeskEnabled:!1,isIntercomEnabled:!1,intercomAppId:void 0,intercomUserHash:void 0,noIntercomUserId:!1,isSprigEnabled:!1,zendeskToken:void 0,endpoint:""}}shouldRefresh(e){return!this.state.isLoaded||Boolean(e)!==Boolean(this.state.user_id)||Boolean(e&&this.state.user_id&&(0,n().cj)(this.state.user_id)!==(0,n().cj)(e))}}const r=new i},658096:(e,t,o)=>{o.d(t,{default:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{}}waitUntilLoaded(){return this.waitUntil((()=>Boolean(this.state.publicPageData)))}}const i=new n},106815:(e,t,o)=>{o.d(t,{Z:()=>i});o(267602),o(30005);var n=()=>o(513670);const i=new class{constructor(e,t){this.messageDispatcher=void 0,this.requestToDependencies=void 0,this.dependencyToRequests=void 0,this.requestKeyToRequest=void 0,this.dependencyToListener=void 0,this.keyFn=void 0,this.fetchingStore=void 0,this.messageDispatcher=o(635596).ZP,this.requestToDependencies={},this.dependencyToRequests={},this.requestKeyToRequest={},this.dependencyToListener={},this.keyFn=e,this.fetchingStore=new(o(168469).q)(e,(async(e,o)=>{const n=await t(e,o);if(n)return this.register(e,o,n.dependencies??[]),n.value}))}getData(e,t){return this.fetchingStore.getData(e,t)}async awaitData(e,t){return await this.fetchingStore.awaitData(e,t)}register(e,t,o){const i=this.keyFn(t),r=this.requestToDependencies[i]??[],a=(0,n().e5)(o,r),s=(0,n().e5)(r,o);this.requestKeyToRequest[i]=t,this.requestToDependencies[i]=o,a.forEach((t=>{const o=this.dependencyToRequests[t]??[];if(this.dependencyToRequests[t]=(0,n().jj)([...o,i]),0===o.length){const o=this.messageDispatcher.addListener(t,(()=>{this.invalidateDependency(e,t)}),void 0,e);this.dependencyToListener[t]=o}})),s.forEach((t=>{const o=this.dependencyToRequests[t]??[],r=(0,n().e5)(o,[i]);this.dependencyToRequests[t]=r;const a=this.dependencyToListener[t];0===r.length&&a&&this.messageDispatcher.removeListener(a,e)}))}async invalidateDependency(e,t){const n=this.dependencyToRequests[t];await(0,o(839002).qd)(n,10,(t=>{const o=this.requestKeyToRequest[t];return this.fetchingStore.resetData(e,o)}))}TEST_ONLY__getInternals(){return{requestToDependencies:this.requestToDependencies,dependencyToRequests:this.dependencyToRequests,requestKeyToRequest:this.requestKeyToRequest,dependencyToListener:this.dependencyToListener,fecthingStore:this.fetchingStore}}TEST_ONLY__addListener(e,t){this.fetchingStore.TEST_ONLY__addListener(e,t)}TEST_ONLY__setMessageDispatcher(e){this.messageDispatcher=e}}((e=>{let{spaceId:t}=e;return t}),(async(e,t)=>{const n=await Promise.resolve().then(o.bind(o,824462)),i=await n.callApi({eventName:"getSubscriptionBanner",environment:e,data:t,headers:(0,o(741633).Bb)({cellId:void 0,spaceId:t.spaceId})}),r=(0,o(183922).TA)(t);return"success"===i.type?{value:i.data,dependencies:[r]}:void 0}))},293760:(e,t,o)=>{o.d(t,{default:()=>i});class n extends(()=>o(263184))().default{}const i=new n},54649:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{}}getSharedPagesState(e){const{userId:t,spaceId:o}=e;let n=this.state[t];n||(n={},this.state[t]=n);return n[o]}setSharedPagesState(e){const{userId:t,spaceId:o,state:n}=e;let i=this.state[t];i||(i={},this.state[t]=i),i[o]=n,this.emit()}}const i=new n},593616:(e,t,o)=>{o.d(t,{Z:()=>n});const n=new(o(41158).D)({key:"appearanceSettingStorageKey",namespace:o(149310).$p,important:!0,trackingType:"necessary"})},199114:(e,t,o)=>{o.d(t,{default:()=>r});class n extends(()=>o(263184))().default{getInitialState(){return{isModalOpen:!1,currentTab:"selectData",account:void 0,isAccountLinkingInProgress:!1,isAccountDelinkingInProgress:!1,workspaces:[],teamsAndProjects:[],selectedWorkspace:void 0,selectedProjectsAndTeamspaces:{},selectedTeamspacesAndProperties:{},importCompletedTasks:!0,teams:void 0,loadMoreClicks:0,isLoadingProjects:!1,isLoadingAsanaWorkspaces:!1,result:void 0,isComplete:!1,loggerPageId:void 0,templateCreationInProgress:!1,isFetchingAsanaAccount:!1,useSectionAsStatus:!1,choosingWorkspacesCompleted:!1,showOnboardingTour:!1}}resetImport(){const{account:e,workspaces:t}=this.getState();this.setState({...this.getInitialState(),account:e,workspaces:t})}}const i=new n,r=i;(0,o(947115).exposeDebugValue)("AsanaImportStore",i)},960721:(e,t,o)=>{o.d(t,{Q:()=>r,g:()=>i});var n=()=>o(66077);const i="AssistantCaches";class r{constructor(){this.updatesCache=void 0,this.diffCache=void 0,this.updatesCache=new(n().Z)({name:`${i}.updatesCache`,isTemporaryData:!0}),this.diffCache=new(n().Z)({name:`${i}.diffCache`,isTemporaryData:!0})}getDiffCacheOnlyForTests(){return this.diffCache}ensureDefaultCacheOverride(e){const t=e.defaultRecordCache.inMemoryRecordCache;this.updatesCache.addCacheFallback(t),t.cacheUsingThisInstanceAsAnOverride||t.addCacheOverride(this.diffCache)}removeDefaultCacheOverride(e){this.clear();const t=e.defaultRecordCache.inMemoryRecordCache;t.removeCacheOverride(this.diffCache),this.updatesCache.removeCacheFallback(t)}clear(){this.updatesCache.clearCache(),this.diffCache.clearCache()}commitTransaction(e){const{transactionActions:t,environment:o,perform:n,...i}=e,r=this;t.createAndCommit({environment:o,perform(e){n(e,r.updatesCache,!0),n(e,r.diffCache,!1)},...i})}commitDiffPreviewTransaction(e){const{transactionActions:t,environment:o,perform:n,...i}=e,{diffCache:r}=this;t.createAndCommit({environment:o,perform(e){n(e,r,!1)},...i})}makeGetRecordValueFnFromUpdatesCache(e){return this.updatesCache.makeGetRecordValueFn(e)}makeGetRecordValueFnFromDiffCache(e){return this.diffCache.makeGetRecordValueFn(e)}}},524434:(e,t,o)=>{o.d(t,{KR:()=>l,cp:()=>s,r4:()=>a});var n=()=>o(696459),i=()=>o(749826);class r extends(()=>o(263184))().default{getInitialState(){return new(o(505226).m)({isInitialized:!1,getEligibleGroup:()=>"control",isAiEnabled:()=>!1,isZeroRetentionEnabled:()=>!1,getCanSearchWorkspaceWithCollectionIdFilter:()=>!1,getSearchBackend(){},checkGate:()=>!1,getSubscriptionTier(){},getIsAssistantSpaceSettingEnabled:()=>!1})}getIsInitialized(){return Boolean(this.state.getIsInitialized()&&i().default.isStatsigReady())}isAiEnabled(){return this.state.isAiEnabled()}isOffline(){return!o(804217).default.state.online&&i().default.checkGate({gateName:"download_for_offline"})}isEphemeralViewDatabaseQueryingEnabled(){return this.modeIsAtMost("assistant_0.3")}isDatabaseQueryingEnabled(){return this.state.isDatabaseQueryingEnabled()}isDatabaseScopedSearchEnabled(){return this.state.isDatabaseScopedSearchEnabled()}isQnATooltipsVisible(e,t){if(!t||!t.isReady())return!1;if(e.isMobile)return!1;if(this.isXMLAssistantEnabled())return!1;const o=t.getSettings();return!!o&&"tooltip"===o.ai_qna_intro_onboarding_phase}shouldDisableForMobileBrowser(e){return e.isMobileBrowser&&!this.modeIsNotControl()}shouldShowSearchMenuItemAskAI(e){return this.modeIsNotControl()}isAssistantThumbsUpDownFeedbackBarActionEnabled(e){return e&&this.modeIsNotControl()}showRemindersToUseQnA(){return this.state.showRemindersToUseQnA()}canSeeGoogleDriveUniversalQnaAnnouncementModal(){return this.state.canUseUniversalGoogleDriveSearchScope()}canSeeGithubAIConnectorAnnouncementModal(){return this.state.canUseUniversalGithubSearchScope()}isWorkspaceLeapEligible(){return this.state.isWorkspaceLeapEligible()}shouldShowAttachmentImageButton(){return this.isAttachmentUploadEnabledForUser()&&i().default.checkGate({gateName:"attachment_show_ask_ai_in_images"})}disableWriterAutoFollow(){return this.state.disableWriterAutoFollow()}isSlackQnaNotificationEnabled(){return this.state.isSlackQnaNotificationEnabled()}shouldShowAnimatedAssistantFace(e){return e.isMobile&&!e.isIOS?this.modeIsAtMost("development"):this.modeIsNotControl()}shouldUseNewExperimentalSkillCopy(e){return"control"!==i().default.getEligibleGroup({experimentId:"new_assistant_corner_chat_suggestions",defaultGroup:"control"})&&e.canUseNewExperimentalSkills}shouldShowNewYearsResolutionSkill(){return this.modeIsAtMost("development")||i().default.checkGate({gateName:"assistant_new_years_resolution_skill"})}canShowWebSearchScope(){return this.state.isWebSearchEnabledForUser()}canLoadWebPageURLs(){return this.state.isLoadingWebUrlsEnabledForUser()}shouldUseMarkdown(){return i().default.checkGate({gateName:"ai_assistant_markdown"})}isAssistantSummarizeThisPageEnabledForUser(){return this.state.isAssistantSummarizeThisPageEnabledForUser()}isAiBlockConfigurationMenuEnabledForUser(){return this.modeIsAtMost("development")&&i().default.checkGate({gateName:"ai_template_filling_use_new_ai_blocks"})}isQnaAbandonedSearchReminderEnabledForUser(){if(!this.modeIsNotControl())return!1;const e=i().default.getConfigKey("qna_ai_reminders","abandonedSearchReminderProbability");return(0,o(150266).aw)(e)&&"on"===i().default.getEligibleGroup({experimentId:"qna_abandoned_search_reminders",defaultGroup:"unassigned"})}shouldShowAssistantBadge(){const e=this.getMode();switch(e){case"assistant_0.3":case"development":case"exploratory":return!0;case"control":case"assistant_0.25_with_marketing":return!1;default:(0,n().t1)(e)}return"control"!==e}getNamespace(){return this.state.getNamespace()}showAiSearchQueryRecommendationTreatment(e){const{disableExposureLogging:t}=e;t||i().default.manuallyLogExperimentExposure("ai_search_query_expansion");const o=i().default.getEligibleGroup({experimentId:"ai_search_query_expansion",disableExposureLogging:t});return o||"control"}getNavigationTargetForTryAssistantNowButton(){const e=i().default.getEligibleGroup({experimentId:"025m_ai_launch_entrypoints",defaultGroup:"control"});return void 0===e?"fullPage":"corner"===e?"corner":"writer"===e?"writer":"control"===e?"fullPage":void(0,n().t1)(e)}showSearchDebugTools(){return this.modeIsAtMost("development")}canUseAssistantDebugTools(){return i().default.checkGate({gateName:"run_assistant_allow_dev_only_args"})}showsLimitedQnaLabel(){return"control"!==i().default.getEligibleGroup({experimentId:"qna_vectorless_enabled",defaultGroup:"control"})&&i().default.checkGate({gateName:"show_limited_qna_label"})&&this.isLimitedQnaMode()}isLimitedQnaMode(){return"limited_qna"===this.state.getSearchBackend()}isParameterizationAndEmptyStateEnabled(){return this.modeIsNotControl()}isRichTextMenuSuggestionEnabled(){return this.isAssistantInWriterEnabled()}isBottomBarSuggestionsEnabled(){return this.isAssistantInWriterEnabled()}isFullPageTranslateEnabled(){return this.state.isFullPageTranslateEnabled()}shouldRouteToWriterOrPlansAfterSignup(){return"control"===i().default.getEligibleGroup({experimentId:"ai_signup_redirect_to_writer",defaultGroup:"control"})?"plans":"writer"}areAiActionsOnPasteEnabled(){return this.state.areAiActionsOnPasteEnabled()}isReplaceSelectionEnabled(){return this.state.isReplaceSelectionEnabled()}isAmbientFullPageTranslateSuggestionEnabled(){return this.state.isAmbientFullPageTranslateSuggestionEnabled()}isMoveToCornerEnabled(){return this.state.isMoveToCornerEnabled()}canShowUniversalSearchScopes(){return this.state.canUseUniversalSearchScopes()}isGoogleDriveQnaEnabled(){return this.state.isGoogleDriveQnaEnabled()}isJiraQnaEnabled(){return this.state.canUseUniversalJiraSearchScope()}canShowUniversalGoogleDriveSearchScope(){return this.state.canUseUniversalGoogleDriveSearchScope()}canUseUniversalGithubSearchScope(){return this.state.canUseUniversalGithubSearchScope()}canUseUniversalJiraSearchScope(){return this.state.canUseUniversalJiraSearchScope()}canUseMicrosoftTeamsSearchScope(){return this.state.canUseMicrosoftTeamsSearchScope()}getCollectionViewEntrypointVariant(e){let{device:t}=e;if(t.isMobile)return"none";if(!this.isAiEnabled())return"none";if(this.modeIsAtMost("assistant_0.3")){const e=i().default.getEligibleGroup({experimentId:"ai_collection_view_entrypoint"});return"button"===e||"search_input"===e?e:"none"}return"none"}isDeepFindQueryGenEnabled(){return this.state.isDeepFindQueryGenEnabled()}isDeepFindUniversalBlendingEnabled(){return this.state.isDeepFindUniversalBlendingEnabled()}canShowHelpdocsScope(){return i().default.checkGate({gateName:"ai_assistant_helpdocs_scoped_search"})}sessionStartersEnabledInChat(){return!1}canEditAssistantWriterFavorite(){return this.modeIsNotControl()}canSeeExploratoryAiReportsUi(){return this.modeIsAtMost("exploratory")}isDeepFindEnabled(){return this.state.isDeepFindEnabled()}isQuickFindEnabled(){return this.state.isQuickFindEnabled()}isUnifiedFindDebugToolsEnabled(){return this.state.isUnifiedFindDebugToolsEnabled()}getUnifiedFindMode(){return this.state.getUnifiedFindMode()}isAttachmentUploadEnabledForUser(){return this.modeIsNotControl()&&i().default.checkGate({gateName:"assistant_enable_attachment_upload"})}isFullPageAssistantChatEnabled(e){return this.modeIsNotControl()&&!e.isMobile}isFullPageAssistantInStartOptions(){return this.modeIsNotControl()}isAssistantInWriterEnabled(){return this.modeIsNotControl()}isXMLAssistantEnabled(){return this.state.isXMLAssistantEnabled()}isInPageFindQnaOptionEnabledForUser(){return this.modeIsNotControl()}shouldEnablePageTitleDiffs(e){return this.modeIsNotControl()&&!e.isMobile}shouldShowAssistantFace(){return this.modeIsNotControl()}showAssistantNotionAiCopy(){return this.isXMLAssistantEnabled()}canSeeAssistantFeaturePromotionalModal(){return this.modeIsNotControl()}isShowingQNAOnMobile(){return this.modeIsNotControl()}showSearchAiFeatures(){return this.modeIsNotControl()}isShowingAssistantInsteadOfHelpCenterInBottomRight(){return this.modeIsNotControl()}shouldShowAssistantInCorner(e){return!(e.isMobileNative&&e.isPhone)&&this.modeIsNotControl()}isQnaRightSideDeeplinkEnabled(){return this.modeIsNotControl()}getMode(){return this.state.getMode()}isMode(e){return this.state.isMode(e)}modeIsAtMost(e){return this.state.modeIsAtMost(e)}modeIsNotControl(){return this.state.modeIsNotControl()}}const a=new(o(435308).default)((()=>l.shouldShowAssistantFace()),{debugName:"ShouldShowAssistantFaceStore"});function s(){return i().default.checkGate({gateName:"compute_related_content"})}const l=new r;(0,o(947115).exposeDebugValue)("AssistantFeatureGateStore",l)},288981:(e,t,o)=>{o.d(t,{Z:()=>r});class n extends(()=>o(263184))().default{getInitialState(){return{edits:[],hoveredEditId:void 0}}getHoveredEdit(){if(this.state.hoveredEditId)return o(350430).Z.getEditById(this.state.hoveredEditId)}}const i=new n,r=i;(0,o(947115).exposeDebugValue)("AssistantHoverStore",i)},252097:(e,t,o)=>{o.d(t,{d:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1,currentView:"chat",from:void 0,isAssistantInputEmpty:!0}}}const i=new n;(0,o(947115).exposeDebugValue)("AssistantMenuStore",i)},379072:(e,t,o)=>{o.r(t),o.d(t,{default:()=>l});o(821057);var n=()=>o(499411),i=()=>o(947115);const r=10*o(326966).hM;class a extends(()=>o(263184))().default{constructor(){super(...arguments),this.nextSessionId=void 0}getInitialState(){return{activeAiSessionId:void 0,sessions:{},lastSessionInitializedUnixEpochTime:Date.now()}}clearAllSessions(){this.reset()}getActiveSessionId(){return this.state.activeAiSessionId}getNextSessionId(){return this.nextSessionId||(this.nextSessionId=(0,n().Oy)()),this.nextSessionId}getNextSessionIdAndIncrement(){const e=this.getNextSessionId();return this.nextSessionId=(0,n().Oy)(),e}getActiveSession(){const e=this.state.activeAiSessionId;if(e)return this.state.sessions[e]}getActiveAssistantConfigurationStore(){var e;return null===(e=this.getActiveSession())||void 0===e?void 0:e.assistantConfigurationStore}getActiveAssistantConfigurationState(){var e;return null===(e=this.getActiveAssistantConfigurationStore())||void 0===e?void 0:e.state}getSessionContext(e){return this.state.sessions[e]}getSessionContextOrThrow(e){const t=this.getSessionContext(e);if(!t)throw new Error("No assistant context for given session");return t}setActiveSessionId(e){this.update((t=>({...t,activeAiSessionId:e})))}setNewActiveSession(e){const{sessionId:t,context:o}=e;this.update((e=>({...e,activeAiSessionId:t,sessions:{...e.sessions,[t]:o},lastSessionInitializedUnixEpochTime:Date.now()})))}addNewSession(e){const{sessionId:t,context:o}=e;this.update((e=>({...e,sessions:{...e.sessions,[t]:o}})))}endCurrentSession(){this.update((e=>({...e,activeAiSessionId:void 0})))}setLastSessionInitializedUnixEpochTime(){this.update((e=>({...e,lastSessionInitializedUnixEpochTime:Date.now()})))}wasActiveSessionLastOpenedOutsideOfHistorySavedWindow(){const e=this.state.lastSessionInitializedUnixEpochTime;return!e||Date.now()-e>=r}}const s=new a,l=s;(0,i().exposeDebugValue)("AssistantRegistryStore",s),(0,i().exposeDebugValue)("getTranscript",(()=>{var e;const t=(null===(e=s.getActiveSession())||void 0===e?void 0:e.evaluator.getTranscript())??[];return JSON.stringify(t)}))},55558:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{banners:[]}}}const i=n},518019:(e,t,o)=>{o.d(t,{Z:()=>i});o(821057);const n=new(o(168469).q)((e=>{let{spaceId:t}=e;return t}),(async(e,t)=>{let{spaceId:n}=t;if(n.includes("|"))throw new Error("Invalid spaceId, you're likely passing a spaceUserId instead");const i=await Promise.resolve().then(o.bind(o,824462)),r=await i.callApi({eventName:"getBillingData",environment:e,data:{spaceId:n},headers:(0,o(741633).Bb)({cellId:void 0,spaceId:n})});if("success"!==r.type)return;if(!r.data.billingData)return;const a=(0,o(515323).m)(r.data.billingData);return"admin"===a.type?a:void 0}));o(947115).exposeDebugValue("BillingDataStore",n);const i=n},687647:(e,t,o)=>{o.d(t,{Z:()=>a,u:()=>n});let n=function(e){return e[e.Open=0]="Open",e[e.Resolved=1]="Resolved",e[e.NewThread=2]="NewThread",e}({});class i extends(()=>o(263184))().default{getInitialState(){return{open:!1,rect:o(35982).bM,recursivelyLoadAllDiscussions:!1}}getFramePageFirstSelectedDiscussionId(){var e,t;return this.state.open&&(o(163085).Z.isBlockInFrame(this.state.blockStore)||this.state.blockStore.id===(null===(e=o(876822).default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.id))?null===(t=this.state.discussionIds)||void 0===t?void 0:t[0]:void 0}addNewDiscussionId(e){this.state.open&&this.setState({...this.state,discussionIds:[...this.state.discussionIds??[],e],keepNewDiscussionAtBottom:!0})}}const r=new i;(0,o(947115).exposeDebugValue)("BlockDiscussionMenuStore",r);const a=r},340819:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{isActive:!1}}}const i=new n},482970:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1}}}const i=new n},738957:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{isOpen:!1}}}const i=n},803820:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{dragging:!1}}}const i=n},529048:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1}}}const i=n},505121:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o(263184).default.createValue(0)},972776:(e,t,o)=>{o.d(t,{Z:()=>$});o(670560),o(267602),o(916054),o(653476),o(470928),o(241792),o(731107),o(228244);var n=()=>o(435308),i=()=>o(263184),r=()=>o(926724),a=()=>o(455947),s=()=>o(608352),l=()=>o(226413),c=()=>o(892981),d=()=>o(570270),u=()=>o(336860),p=()=>o(605974),m=()=>o(396136),f=()=>o(752778),g=()=>o(722917),v=()=>o(513670),h=()=>o(696459);o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624);function _(e){switch(e){case"trending":case"similarUsers":case"mostVisited":case"lastEdited":case"favorites":return{title:{name:"Name",type:"title"}};case"myTasks":case"customDb":case"posts":return{};default:(0,h().t1)(e)}}function b(e){let{source:t,collectionId:o}=e;const{type:n}=t;return{id:o,parent_table:m().iU,parent_id:n,version:1,alive:!0,space_id:t.spaceId,format:{},schema:_(n)}}var y=()=>o(530980),S=()=>o(718959),w=()=>o(861026),k=()=>o(582835),I=()=>o(527278),C=()=>o(620218),x=()=>o(772529),T=()=>o(749826),M=()=>o(527135),P=()=>o(826955);var A=()=>o(887430),R=(o(821057),()=>o(680146));function B(e,t,o){R().vd("collections"),R().rn(new Error("Callback waited over time limit for item to be rendered"),{from:"CollectionItemMountedCallbacks",type:e,data:{miscDataToConvertToString:{blockPointer:t,delayMs:o}}})}class E{constructor(){this.callbackMap=void 0,this.storeTimeoutMap=void 0,this.callbackMap=new WeakMap,this.storeTimeoutMap=new WeakMap}registerCallback(e,t){var o;this.callbackMap.has(e)||this.callbackMap.set(e,[]),null===(o=this.callbackMap.get(e))||void 0===o||o.push(t);const n=this.storeTimeoutMap.get(e);n&&clearTimeout(n.timeoutId);const i=window.setTimeout((()=>{this.callbackMap.has(e)&&B("TimeoutError",e.pointer,15e3)}),15e3);this.storeTimeoutMap.set(e,{timeoutId:i,registeredAt:performance.now()})}executeCallbacks(e){const t=this.callbackMap.get(e)??[],o=performance.now();for(const i of t)i();this.callbackMap.delete(e);const n=this.storeTimeoutMap.get(e);if(n){clearTimeout(n.timeoutId);const t=o-n.registeredAt;t>5e3&&B("SlowExecutionError",e.pointer,t),this.storeTimeoutMap.delete(e)}}}class D{constructor(){this.timings=void 0,this.trackTimings=void 0,this.timings={queryCollectionRequests:[],collectionReducerRequests:{}},this.trackTimings=!0}startRequestTracking(){if(this.trackTimings)return{start:performance.now()}}finishRequestTracking(e,t){if(!this.trackTimings||!e)return;const o=performance.now(),n=o-e.start;this.timings.queryCollectionRequests.push({start:e.start,end:o,duration_ms:n,status:t})}mountCollectionReducerRequest(e,t){this.trackTimings&&!this.timings.collectionReducerRequests[e]&&(this.timings.collectionReducerRequests[e]={id:e,reducer_type:t,mounted_at:performance.now()})}unmountCollectionReducerRequest(e){this.trackTimings&&this.timings.collectionReducerRequests[e]&&(this.timings.collectionReducerRequests[e].unmounted_at=performance.now())}getMetrics(e){return this.trackTimings=!1,{render_started_at:e.cvbBlockRenderStart,mounted_at:e.cvbBlockRenderMount,items_started_at:e.itemsStart,items_visible:e.itemsVisible,query_request_count:this.timings.queryCollectionRequests.length,query_request_times:this.timings.queryCollectionRequests,collection_reducer_request_count:Object.keys(this.timings.collectionReducerRequests).length,collection_reducer_request_times:Object.values(this.timings.collectionReducerRequests)}}reset(){this.timings={queryCollectionRequests:[],collectionReducerRequests:{}},this.trackTimings=!0}}class U extends i().default{getInitialState(){return 0}}class F{constructor(){this._cache=Object.create(null)}get cache(){return this._cache}reset(){this._cache={}}getBlockHeightStore(e){return this.getBlockEntry(e).heightStore}getPropertyHeightStore(e,t){return this.getPropertyEntry(e,t).heightStore}getBlockHeightCache(e){return this.cache[e]}cacheRowHeight(e,t){const o=this.getBlockEntry(e).heightStore;o.state<t&&o.setState(t)}propertyCanExpandStore(e,t){return this.getPropertyEntry(e,t).canExpandStore}cachePropertyHeight(e,t,o){this.getPropertyEntry(e,t).heightStore.setState(o)}expandHeightToTallestCached(e){if(!this.cache[e])return;const t=this.getBlockEntry(e),{height:o}=this.findTallestProperty(t);t.heightStore.setState(o)}propertyCanExpand(e,t){if(!e||!t||!this.cache[e])return!1;const o=this.getBlockEntry(e);return(this.getPropertyEntry(e,t).heightStore.state??0)>o.heightStore.state}findTallestProperty(e){let t="",o=0;for(const[n,{heightStore:i}]of Object.entries(e.propertyHeights))i.state>o&&(o=i.state,t=n);return{height:o,property:t}}getBlockEntry(e){return this.cache[e]||(this.cache[e]={heightStore:new U,propertyHeights:Object.create(null)}),this.cache[e]}getPropertyEntry(e,t){const o=this.getBlockEntry(e);return o.propertyHeights[t]||(o.propertyHeights[t]={heightStore:new U,canExpandStore:new(n().default)((()=>this.propertyCanExpand(e,t)),{debugName:"PropertyCanExpandStore"})}),o.propertyHeights[t]}}class N{constructor(e){this.rowVirtualizer=void 0,this.collectionContextStore=void 0,this.horizontalScrollerRef=void 0,this.horizontalScrollerRefStore=void 0,this.blockHeightsCache=void 0,this.collectionContextStore=e,this.blockHeightsCache=new F,this.horizontalScrollerRefStore=i().default.createValue(void 0)}reset(){this.rowVirtualizer=void 0,this.blockHeightsCache.reset()}setRowVirtualizer(e){this.rowVirtualizer=e}setHorizontalScrollerRefStore(e){this.horizontalScrollerRefStore.setState(e)}getHorizontalScrollerRefStore(){return this.horizontalScrollerRefStore}getBlockHeightsCache(){return this.blockHeightsCache}async waitToScrollToBlock(e,t){if(!this.rowVirtualizer)return;const o=this.collectionContextStore.groupsStore.getGroupState(e);if(!o)return;const n=o.resultsStore.state.findIndex((e=>e===t));if(!(n>=0))return new Promise((e=>{const n=i=>{if(!this.rowVirtualizer)return o.resultsStore.removeListener(n),void e();const r=i.state.findIndex((e=>e===t));r>=0&&(this.rowVirtualizer.scrollToIndex(r,{behavior:"smooth"}),o.resultsStore.removeListener(n),e())};o.resultsStore.addListener(n)}));this.rowVirtualizer.scrollToIndex(n,{behavior:"smooth"})}}var V=()=>o(594546),L=()=>o(576868),O=()=>o(559729),Z=()=>o(521045);class j{constructor(e){this.supportsLongTask=void 0,this.entriesObserved=void 0,this.observer=void 0,this.observing=!1,this.supportsLongTask=PerformanceObserver.supportedEntryTypes.includes("longtask"),this.entriesObserved=[],this.observer=new PerformanceObserver((t=>{this.entriesObserved.push(...t.getEntries()),e&&e(t,this.observer)}))}observe(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.supportsLongTask&&(this.observer.observe({type:"longtask",buffered:e}),this.observing=!0)}get isObserving(){return this.observing}disconnect(){this.observer.disconnect(),this.observing=!1}takeRecords(){const e=this.entriesObserved;return this.entriesObserved=[],e}}var K=()=>o(876822);class z extends i().default{constructor(e){super(),this.collectionContextStore=e}getInitialState(){return new Map}getGroupState(e){const t=Array.isArray(e)?e:void 0!==e?[e]:[],o=(0,s().KW)(t),r=this.state.get(o);if(r)return r;const a=function(e,t){const o=i().default.createValue(void 0,{name:"reducerResultStore"}),r=e.collectionViewBlockStore();if(!r)return;let a;t.length>0?(a=r.clone(),a.setRecordStoreUIParent(r)):a=r;const s=A().bd(e),l=new(n().default)((()=>{const e=o.state;return(e&&"results"===e.type?e.blockIds:[]).map((e=>P().G.createChildStore(a,{id:e,table:m().iU})))}),{debugName:"resultsStore"});return{groupsPointer:t,groupUiParentStore:a,reducerResultStore:o,resultsStore:l,currentLimit:i().default.createValue(s,{name:"currentLimit"}),toggleStateStore:i().default.createValue(!1,{name:"toggleStateStore"})}}(this.collectionContextStore,t);return a?(this.state.set(o,a),this.emit(),a):void 0}getAllGroupStates(){return[...this.state.values()]}anyGroupHasResults(){for(const e of this.state.values())if(e.reducerResultStore.state)return!0;return!1}anyGroupHasNonEmptyResults(){for(const t of this.state.values()){var e;if(null!==(e=t.reducerResultStore.state)&&void 0!==e&&null!==(e=e.blockIds)&&void 0!==e&&e.length)return!0}return!1}anySpecifiedGroupHasResults(e){for(const t of e){const e=this.getGroupState(t);if(null!=e&&e.reducerResultStore.state)return!0}return!1}resetAllLimits(){const e=A().bd(this.collectionContextStore);for(const t of this.state.values())t.currentLimit.setState(e)}setLimitIfGreater(e,t){const o=this.getGroupState(e),n=null==o?void 0:o.currentLimit;n&&t>n.state&&n.setState(t)}incrementLimit(e){const{isFullScreen:t,currentResultCount:o,groupsPointer:n,incrementLimitsInRelatedGroups:i}=e,r=this.collectionContextStore.collectionViewStore();if(!r)return;const a=this.getGroupState(n);if(!a)return;const l=i?[...this.state.values()].filter((e=>1===n.length?1===e.groupsPointer.length:2===n.length&&(0,s().ZH)(n[0],e.groupsPointer[0]))):[a];for(const s of l){const e=s.currentLimit,n=e.state+A().NG({collectionViewStore:r,isFullScreen:t,currentResultCount:o});e.setState(n)}}}class H extends i().default{getInitialState(){return{hasLocalUpdates:!1,blockIds:new Set}}addLocalChange(e){for(const t of e)this.state.blockIds.add(t);this.state.hasLocalUpdates=!0,this.emit()}resetWithRemote(){const e=this.getInitialState();for(var t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];e.blockIds=new Set(...o),this.setState(e)}}var q=()=>o(138912);class W extends i().default{getInitialState(){}isInLayoutBuilder(){var e;return"layoutBuilder"===(null===(e=this.state)||void 0===e?void 0:e.type)}getViewModuleType(){var e;return null===(e=this.state)||void 0===e?void 0:e.viewsModule.getType()}currentPageInRelatedCollectionStore(){var e;return null===(e=this.state)||void 0===e?void 0:e.currentPageInRelatedCollectionStore}currentPageInRelatedCollectionId(){var e;return null===(e=this.state)||void 0===e?void 0:e.currentPageInRelatedCollectionStore.id}canEditCollectionView(){return!this.state||("layoutBuilder"===this.state.type||"page"!==this.state.type&&void(0,h().t1)(this.state))}get type(){var e;return null===(e=this.state)||void 0===e?void 0:e.type}viewsModule(){var e;return null===(e=this.state)||void 0===e?void 0:e.viewsModule}}class G{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.contextStore=i().default.createValue(void 0,{name:"contextStore"}),this.reducersStore=i().default.createValue({},{name:"reducersStore"}),this.reducerDependencies=new Map,this.shouldDelayRenderStore=i().default.createValue(!1,{name:"shouldDelayRenderStore"}),this.resultSetStore=new H,this.remoteResultStore=i().default.createValue(void 0,{name:"remoteResultStore"}),this.remoteErrorStore=i().default.createValue(void 0,{name:"remoteErrorStore"}),this.remoteCollectionIdsStore=i().default.createValue([],{name:"remoteCollectionIdsStore"}),this.lastRemoteRequestStore=i().default.createValue(void 0,{name:"lastRemoteRequestStore"}),this.searchOpenStore=i().default.createValue(!1,{name:"searchOpenStore"}),this.searchQueryStore=i().default.createValue("",{name:"searchQueryStore"}),this.isLoadingStore=i().default.createValue(!1,{name:"isLoadingStore"}),this.isLoadedStore=i().default.createValue(!1,{name:"isLoadedStore"}),this.didFireLoadEventsStore=i().default.createValue(!1,{name:"didFireLoadEvents"}),this.isCreatingNewChartCollectionStore=i().default.createValue(!1,{name:"isCreatingNewChartCollectionStore"}),this.loadingDetailsStore=i().default.createValue({type:"load_general"},{name:"loadingDetailsStore"}),this.wasCreatedThisSessionStore=i().default.createValue(!1,{name:"wasCreatedThisSessionStore"}),this.isFullScreenStore=i().default.createValue(!1,{name:"isFullScreenStore"}),this.isRootChildStore=i().default.createValue(!1,{name:"isRootChildStore"}),this.isInPeekRendererStore=i().default.createValue(!1,{name:"isInPeekRendererStore"}),this.relationResultsCacheStore=i().default.createValue(new Map,{name:"relationResultsCacheStore"}),this.privateRelativeVariableStore=i().default.createValue({},{name:"privateRelativeVariableStore"}),this.groupsStore=new z(this),this.groupsLimitStore=i().default.createValue(O().XD,{name:"groupsLimitStore"}),this.boardColumnsLimitStore=i().default.createValue(O().XD,{name:"boardColumnsLimitStore"}),this.settingsStore=i().default.createValue({open:!1,stack:[]},{name:"settingsStore"}),this.filtersBarOpenStore=i().default.createValue(void 0,{name:"filtersBarOpenStore"}),this.temporaryStateStore=i().default.createValue({},{name:"temporaryStateStore"}),this.filterBarItemSettingsStoreMap=new Map,this.frozoneStore=i().default.createValue({isScrolled:!1,scrollerWidth:void 0,scrollerLeftOffset:void 0,scrollerLeftPadding:void 0,frozenIndex:void 0,tryShowHiddenFrozenColumn:!1},{name:"frozoneStore"}),this.filterBarSortSettingsStore=i().default.createValue({open:!1,stack:[]},{name:"filterBarSortSettingsStore"}),this.filterBarCombinatorFilterSettingsStore=i().default.createValue({open:!1,stack:[]},{name:"filterBarCombinatorFilterSettingsStore"}),this.filterOptionsItemSettingsStoreMap=new Map,this.filterOptionsCombinatorFilterSettingsStore=i().default.createValue({open:!1,stack:[]},{name:"filterOptionsCombinatorFilterSettingsStore"}),this.dateRangeStartStore=i().default.createValue(Date.now(),{name:"dateRangeStartStore"}),this.dateRangeEndStore=i().default.createValue(Date.now(),{name:"dateRangeEndStore"}),this.subitemExpandedStore=i().default.createValue(new Map,{name:"subitemExpandedStore"}),this.chartErrorStore=i().default.createValue(new Map,{name:"chartErrorStore"}),this.updateFreeChartsResultStore=i().default.createValue(new Map,{name:"updateFreeChartsResultStore"}),this.numberChildrenReceivedStore=i().default.createValue(0,{name:"numberChildrenReceivedStore"}),this.numberChildrenUnfurledStore=i().default.createValue(0,{name:"numberChildrenUnfurledStore"}),this.formsBaseLayoutEditorContextValueStore=i().default.createValue(void 0,{name:"formsBaseLayoutEditorContextValueStore"}),this.formsSpecificLayoutEditorContextValueStore=i().default.createValue(void 0,{name:"formsSpecificLayoutEditorContextValueStore"}),this.formShareMenuButtonPopupStore=new(o(529048).Z),this.renderEmitter=new(o(444263).Z),this.remoteRequestStoreCallback=void 0,this.localResultStoreCallback=void 0,this.updateCounter={latestRequestUpdateCounter:0,setRemoteResultCounter:void 0},this.isClientModeEnabledStore=i().default.createValue(!1,{name:"isClientModeEnabledStore"}),this.wasServerResponseFromCache=void 0,this.requestBackend=void 0,this.isViewSpecificClientModeEnabledStore=i().default.createValue(!1,{name:"isViewSpecificClientModeEnabledStore"}),this.throttleMsStore=i().default.createValue(o(870016).m,{name:"throttleMsStore"}),this.timedOutRequestCounter=0,this.asyncAggregationStatusStore=i().default.createValue({calculating:!1,aggregation:void 0,changingType:!1},{name:"asyncAggregationStatusStore"}),this.infiniteScrollLongTaskObserver=new j,this.visitSessionId=o(956057).Il(),this.viewsModuleContextStore=new W,this.collectionStoresStore=new(n().default)((()=>{const e=this.collectionViewBlockStore();if(!e)return[];const t=this.collectionStore();return t?[t]:this.remoteCollectionIdsStore.state.map((t=>P().NW.createChildStore(e,{table:f().vF,id:t})))}),{debugName:"collectionStoresStore"}),this.localResultStore=new(n().default)((()=>function(e,t){const{blockIds:n,hasLocalUpdates:i}=t.resultSetStore.state,a=t.collectionViewStore(),s=e.currentUser.id,l=t.remoteRequestStore.state,p=t.remoteResultStore.state;if(!a||!a.isDefined()||!l)return;const g=Date.now(),_=I().Z.getIntl(),A=a.getRecordModel,R=a.getFormat(),B=a.getType(),E=a.getCollectionSource();if(!E)return;const D=t.collectionStoresStore.state,U=[];for(const o of D){const e=A(o);e&&U.push(e)}if(0===U.length)return;if(t.isLoadedStore.setState(!1),!U.some((e=>M().Z.getEditedBlocksForCollection(e.id).size>0))&&p&&!i&&(0,v().Xy)(t.lastRemoteRequestStore.state,l))return t.isLoadedStore.setState(!0),p;const F=C().default.DO_NOT_USE_markLegacy("collections.compute_local_result_latency");let N={};switch(t.contextType){case"collectionTypedView":const e=t.databaseType,o=e?(0,r().TY)(e,_):{},n=(0,d().jf)({schemas:[...U.map((e=>{var t;const o=null==e||null===(t=e.getFormat())||void 0===t?void 0:t.app_uri_map,n=e.getNormalizedSchema();return d().aQ.toViewSchema(n,o)})),o],onlyPropertyIds:Object.keys(o),prioritizeLooserLimitRule:!0});if(n.error)throw n.error;N=n.value;break;case"collectionSystemView":case"collectionView":case"collectionPage":case"collectionSettings":case void 0:N=U[0].getNormalizedSchema();break;default:(0,h().t1)(t.contextType)}const V=c().ps(R,B,N),L=t.relativeVariableStore.state,{groupsReducerIds:O,reducerIdsWithNoGroupDependencies:Z}=c().x3(l.loader.reducers,l.loader.reducerDependencies),j=T().default.getConfigKey("collection_request_settings","clientFormulaTimeoutMs"),K=t.formulasCodeStore.state,z={pageSort:a.getPageSort(),schema:N,loader:l.loader,userId:s,userStartOfWeek:S().AK.state,currentTime:g,getRecordModel:A,intl:I().Z.getIntl(),isSorted:!1,visibleProperties:V,relativeVariableResult:L,currentPageInRelatedCollection:t.viewsModuleContextStore.currentPageInRelatedCollectionId(),isSprintPlanningView:R.app_config_uri===r().sV,collectionSourceType:E.type,groupsReducerIds:O,reducerIdsWithNoGroupDependencies:Z,formulaTimeoutMs:j,resultCache:new Map,regExpCache:new Map,experimentService:T().default,collectionFeatureGates:(0,o(615676).W)(),formulasModule:K},H={...z,loader:{...l.loader,filter:void 0}},q=p?new Set(c().aW({result:p,onlyTypes:["results"]})):new Set,W=c().fk(z),G=e.idCreator.getSpaceIdCreatorSync(E.spaceId);for(const r of n){const e=P().G.createChildStore(a,{table:m().iU,id:r}),n=e.getAssociatedCollectionStore();if(u().Sl.hasCollections(E)&&(!n||!D.find((e=>{let{id:t}=e;return n.id===t}))))continue;const i=A(e);let s;switch(t.contextType){case"collectionSystemView":if((0,u().WW)(E)){const e=(0,o(763243).J8)(E.type,G);s=A({table:f().vF,id:e,spaceId:E.spaceId})}else if((0,u().v7)(E)){const e=(0,x().Ep)((0,o(336662).Eq)(E));s=e&&y().kk5.fromCollection(b({source:E,collectionId:e}))}else E.type;break;case"collectionTypedView":case"collectionView":case"collectionPage":case"collectionSettings":case void 0:s=n&&A(n);break;default:(0,h().t1)(t.contextType)}if(!s||!i)continue;const p={...l.loader.upwardTraversalRelation&&q.has(r)&&(0,k().uU)({block:y().kk5.fromBlock(i),collectionContextStore:t})&&!t.isClientModeEnabledStore.state?H:z,schema:(0,d().Hs)(E.type,N,s)};c().BW(i,s,p,W)}for(const o of U){const e=M().Z.getEditedBlocksForCollection(o.id),t=(0,d().Hs)(E.type,N,o);for(const i of e){if(n.has(i))continue;const e=A(P().G.createChildStore(a,{table:m().iU,id:i}));e&&c().BW(e,o,{...z,schema:t},W)}}const{result:$}=c().kk(z,W);if(t.isLoadedStore.setState(!0),"reducer"!==$.type)return;const Q=w().vS(t);return C().default.DO_NOT_USE_measureLegacy(F,{environment:e,data:Q}),$}(this.environment,this)),{useDeepEqual:!0,debugName:"localResultStore"}),this.isEmptyStore=new(n().default)((()=>{var e;if(this.isLoadingStore.state||this.shouldShowSpinnerStore.state||v().xb(this.reducersStore.state))return!1;const t=this.localResultStore.state,o=this.remoteResultStore.state,n=this.wasCreatedThisSessionStore.state;if(!t&&o&&0===this.collectionStoresStore.state.length)return!0;const i=null===(e=this.collectionViewStore())||void 0===e?void 0:e.getCollectionSource();if(((0,u().WW)(i)||(0,u().v7)(i))&&o){if(Object.values(o.reducerResults).every((e=>"results"===e.type&&0===e.blockIds.length)))return!0}if(!t||"reducer"!==t.type||!o||"reducer"!==o.type)return!1;const r=Object.values(t.reducerResults).filter((e=>"results"===e.type)),a=Object.values(o.reducerResults).filter((e=>"results"===e.type));return!(!n&&0===a.length)&&(0!==r.length&&r.every((e=>"results"===e.type&&0===e.blockIds.length)))}),{debugName:"isEmptyStore"}),this.remoteRequestStore=new(n().default)((()=>o(932753).oh(this.environment,this)),{debugName:"remoteRequestStore"}),this.normalizedFormatStore=new(n().default)((()=>{const e=this.collectionViewBlockStore(),t=this.collectionViewStore(),o=null==t?void 0:t.getType(),n=this.normalizedQueryStore.state,i=this.normalizedSchemaStore.state,r=null==t?void 0:t.getNormalizedFormat(i);return e&&t&&o&&n&&r?this.isInHomeWidgetStore.state?{...r,...(0,x()._B)()}:r:{}}),{useDeepEqual:!0,debugName:"normalizedFormatStore"}),this.normalizedSchemaStore=new(n().default)((()=>{const e=this.contextStore.state;switch(null==e?void 0:e.type){case"collectionTypedView":const t=(0,r().Or)(e.databaseType,I().Z.getIntl())??{};if(!this.collectionViewBlockStore())return t;const n=this.collectionStoresStore.state;if(0===n.length)return t;const i=(0,d().jf)({schemas:[...n.map(o(384791).gD),t],onlyPropertyIds:Object.keys(t),prioritizeLooserLimitRule:!0});return i.error?t:i.value;case"collectionSystemView":case"collectionView":case"collectionPage":case"collectionSettings":case void 0:const a=this.collectionStore();return a?a.getSchema():(0,g().Kc)(I().Z.getIntl());default:(0,h().t1)(e)}}),{useDeepEqual:!0,debugName:"normalizedSchemaStore"}),this.normalizedDeletedSchemaStore=new(n().default)((()=>{if("collectionTypedView"===this.contextType)return{};const e=this.collectionStore();return e?e.getDeletedSchema():(0,g().Kc)(I().Z.getIntl())}),{useDeepEqual:!0,debugName:"normalizedDeletedSchemaStore"}),this.normalizedQueryStore=new(n().default)((()=>{const e=this.collectionViewStore();if(e){const t=e.getType();if(t){const o=this.normalizedSchemaStore.state;return(0,c().Qo)({type:t,query2:e.getQueryStore().getValue()},o)}}}),{useDeepEqual:!0,debugName:"normalizedQueryStore"}),this.subitemTreeStore=new(n().default)((()=>(0,k().yr)(this,this.environment.currentUser.id)),{debugName:"subitemTreeStore"}),this.shouldShowSpinnerStore=new(n().default)((()=>{var e,t,o,n;if(!this.isLoadingStore.state)return!1;const i=null===(e=this.lastRemoteRequestStore.state)||void 0===e?void 0:e.loader,r=null===(t=this.remoteRequestStore.state)||void 0===t?void 0:t.loader;if(!v().Xy(null==i?void 0:i.filter,null==r?void 0:r.filter))return!0;if(!v().Xy(null==i?void 0:i.sort,null==r?void 0:r.sort))return!0;if(!v().Xy(null==i?void 0:i.searchQuery,null==r?void 0:r.searchQuery))return!0;if(!v().Xy(null===(o=this.lastRemoteRequestStore.state)||void 0===o?void 0:o.source,null===(n=this.remoteRequestStore.state)||void 0===n?void 0:n.source))return!0;const a=(null==i?void 0:i.reducers)||{},s=(null==r?void 0:r.reducers)||{};for(const l in s){const e=s[l],t=a[l];if(!v().Xy(e,t))return!0}return!1}),{debugName:"shouldShowSpinner"}),this.shouldShowSourceStore=new(n().default)((()=>{const e=this.collectionViewBlockStore(),t=this.collectionViewStore(),o=this.collectionStore();if(!e||!t||!o)return!1;if("form_editor"===t.getType())return!1;return!(e.getCollectionViewSourceCollectionStore()&&this.isFullScreenStore.state||this.normalizedFormatStore.state.hide_linked_collection_name)}),{debugName:"shouldShowSource"}),this.isInlineViewStore=new(n().default)((()=>!this.isFullScreenStore.state),{debugName:"isInlineView"}),this.isUnlistedViewStore=new(n().default)((()=>{var e;return(null===(e=this.collectionViewStore())||void 0===e||null===(e=e.getUnlistedStatus())||void 0===e?void 0:e.isUnlisted)??!1}),{debugName:"isUnlistedView"}),this.isInHomeWidgetStore=new(n().default)((()=>{const e=this.collectionViewBlockStore(),t=null==e?void 0:e.getParentBlockStore();return!(!e||!t)&&((0,x().WE)(K().default.state.mainEditorCurrentBlockStore)&&(0,x().WE)(t)&&!this.isInPeekRendererStore.state&&!this.isUnlistedViewStore.state&&!o(163085).Z.isBlockInTemplate(e))}),{debugName:"isInHomeWidget"}),this.isEditableHomeCollectionStore=new(n().default)((()=>{var e;const t=null===(e=this.collectionViewBlockStore())||void 0===e?void 0:e.id;return!!t&&((0,S().qG)(t)||(0,S().X)(t))}),{debugName:"isEditableHomeCollection"}),this.isInTrashStore=new(n().default)((()=>{const e=this.collectionStore(),t=null==e?void 0:e.getParentBlockStore(),o=Boolean(null==t?void 0:t.pathIsDead()),n=this.collectionViewBlockStore(),i=Boolean(null==n?void 0:n.pathIsDead());return o||i}),{debugName:"isInTrash"}),this.permissionScopesStore=new(n().default)((()=>{const e=this.collectionStore(),t=this.collectionViewStore(),n=this.collectionViewBlockStore(),i=this.isFullScreenStore.state,r=null==e?void 0:e.getParentBlockStore(),a=Boolean(null==r?void 0:r.pathIsDead()),s=Boolean(null==n?void 0:n.pathIsDead()),l=this.viewsModuleContextStore.isInLayoutBuilder(),c=a||s;let d=!c&&(A().eD({collectionStore:e,collectionViewBlockStore:n,checkNavigableAncestorLocked:!i})||"collectionTypedView"===this.contextType);this.viewsModuleContextStore.isInLayoutBuilder()&&(d=!1);const u=Boolean(null==n?void 0:n.isLocked()),p=Boolean(null==e?void 0:e.isSyncedCollection()),m=Boolean(null==e?void 0:e.isExternallyImportedAndSyncedCollection())&&"on"===T().default.getEligibleGroup({experimentId:"jira_import_and_sync",defaultGroup:"control"});if(this.options.isPreviewing)return{canConfigureCollection:!1,canConfigureBlock:!1,canEditContent:!1,isLocked:!1,isSyncedCollection:!1,isExternallyImportedAndSyncedCollection:!1};if(!t||!n)return{canConfigureCollection:d,canConfigureBlock:Boolean((null==n?void 0:n.canEditCollection())&&!n.isNonEditableState()),canEditContent:Boolean((null==n?void 0:n.canEditCollection())||(null==n?void 0:n.canEditContentOnly()))&&!c&&!l,isLocked:u,isSyncedCollection:p,isExternallyImportedAndSyncedCollection:m};if("collectionSettings"===this.contextType)return{canConfigureCollection:!0,canConfigureBlock:!0,canEditContent:!1,isLocked:!1,isSyncedCollection:!1,isExternallyImportedAndSyncedCollection:!1};if(!this.viewsModuleContextStore.canEditCollectionView())return{canConfigureCollection:!1,canConfigureBlock:!1,canEditContent:Boolean((null==n?void 0:n.canEditCollection())||(null==n?void 0:n.canEditContentOnly()))&&!c&&!l,isLocked:u,isSyncedCollection:p,isExternallyImportedAndSyncedCollection:m};const f=!i&&n.isNavigableAncestorNonEditableState(),g=Boolean(n.inMemoryRecordCache.snapshotData),v=o(890324).Z.getMode(this.environment,n);if(f||g||"comment"===(null==v?void 0:v.permission)||"view"===(null==v?void 0:v.permission))return{canConfigureCollection:d,canConfigureBlock:!1,canEditContent:!1,isLocked:u,isSyncedCollection:p,isExternallyImportedAndSyncedCollection:m};const h=n.canEditCollection()&&!(u||s);let _=!c&&!l&&("collectionTypedView"===this.contextType||Boolean(e&&e.canEdit()));if((null==n?void 0:n.isLinkedCollectionView())&&!l){const e=null==n?void 0:n.getRole(),i=t.getFormatStore().getKeyStore("collection_pointer").getValue();if(i){const t=new(P().NW)(this.environment,i).getParentBlockStore(),n=null==t?void 0:t.getRole();e&&n&&(0,o(528514).z4)(n,e)&&(_=(0,o(933868).J5)(e))}}return this.isUnlistedViewStore.state&&(_=!1),{canConfigureCollection:d,canConfigureBlock:h,canEditContent:_,isLocked:u,isSyncedCollection:p,isExternallyImportedAndSyncedCollection:m}}),{debugName:"permissionScopes"}),this.localStateDiffStore=new(n().default)((()=>(0,L().Zh)(this,"normalized")),{useDeepEqual:!0,debugName:"localStateDiffStore"}),this.currentCombinatorFilterStore=new(n().default)((()=>{var e;const t=this.temporaryStateStore.state.combinatorFilter;return t?t.value:null===(e=this.normalizedQueryStore.state)||void 0===e?void 0:e.filter}),{useDeepEqual:!0,debugName:"currentCombinatorFilterStore"}),this.currentSubitemFormatStoreForUiDisplayStore=new(n().default)((()=>{var e,t;const o=(null===(e=this.collectionViewStore())||void 0===e?void 0:e.getFormat().subitem_display_mode)??"show";if("disabled"===o||"hidden"===o||"flattened"===o)return;const n=(0,k().wf)(this),i=null===(t=this.collectionViewStore())||void 0===t?void 0:t.getType(),r=(0,L().RL)({collectionContextStore:this,applySubitemFilter:!1,filterOutHideSubitemsQuickFilter:!1}),s=(0,a().kk)(r);return s&&(0,a().SH)(s,(e=>!!(0,a().aN)(e)&&(e.property===(null==n?void 0:n.property)||e.property===(null==n?void 0:n.inverse))))&&i&&!(0,k().Av)(i)?void 0:n}),{useDeepEqual:!0,debugName:"currentSubitemFormatStoreForUiDisplay"}),this.currentSubitemFormatStoreForCollectionStore=new(n().default)((()=>(0,k().wf)(this)),{useDeepEqual:!0,debugName:"currentSubitemFormatStoreForCollection"}),this.currentArrowsByFormatStore=new(n().default)((()=>(0,o(701182).H5)(this)),{useDeepEqual:!0,debugName:"currentArrowsByFormatStore"}),this.currentPropertyFiltersStore=new(n().default)((()=>{const e=this.normalizedSchemaStore.state,t=this.temporaryStateStore.state.propertyFilters;return(t?t.value||[]:this.normalizedFormatStore.state.property_filters||[]).map((t=>{const o=(0,c().dN)(t.filter,e),n=this.collectionViewBlockStore();if(e[t.filter.property]&&o&&(0,a().J5)(e,t.filter.property,o.filter,null==n?void 0:n.getRecordModel))return o&&{id:t.id,filter:o}})).filter(h().$K).sort((0,L().ox)())}),{useDeepEqual:!0,debugName:"currentPropertyFiltersStore"}),this.currentSortsStore=new(n().default)((()=>{var e;const t=this.temporaryStateStore.state.sorts;return t?t.value||[]:(null===(e=this.normalizedQueryStore.state)||void 0===e?void 0:e.sort)||[]}),{useDeepEqual:!0,debugName:"currentSortsStore"}),this.defaultPageTemplateStore=new(n().default)((()=>{var e,t;const o=this.collectionStore(),n=this.collectionViewStore(),i=v().oA([null==n||null===(e=n.getFormat())||void 0===e?void 0:e.collection_view_default_template,null==o||null===(t=o.getFormat())||void 0===t?void 0:t.collection_default_template]),r=null==o?void 0:o.getTemplatePageStores();for(const a of i){if("empty"===a)return;const e=null==r?void 0:r.find((e=>e.id===a.template_page_id));if(null!=e&&e.getAlive())return e}}),{debugName:"defaultPageTemplateStore"}),this.relativeVariableStore=new(n().default)((()=>{const e=this.contextStore.state;if(!e)return;const t=e.collectionViewBlockStore;if(!t)return;const o={},n=this.privateRelativeVariableStore.state;for(const[i,r]of(0,h().qP)(n)){const e=P().NW.createChildStore(t,{id:i,table:f().vF}),n=e.getSchema(),a=null==e?void 0:e.getFormat().app_config_uri;if(a&&(0,p().oN)(n,a)){o[i]={};for(const[t,s]of(0,h().qP)(r)){const r=P().G.createChildStore(e,{id:s,table:m().iU});r.isDefined()&&((0,Z().iL)({blockStore:r,collectionId:i,appConfigUri:a,variable:t,schema:n})&&(o[i][t]=s))}}}return o}),{useDeepEqual:!0,debugName:"relativeVariableStore"}),this.relativeVariablesAreStaleStore=new(n().default)((()=>{const e=this.contextStore.state;if(!e)return!1;const t=e.collectionViewBlockStore;if(!t)return!1;const o=this.privateRelativeVariableStore.state;for(const[n,i]of(0,h().qP)(o)){const e=P().NW.createChildStore(t,{id:n,table:f().vF}),o=e.getSchema(),r=null==e?void 0:e.getFormat().app_config_uri;if(r&&(0,p().oN)(o,r))for(const[t,a]of(0,h().qP)(i)){const i=P().G.createChildStore(e,{id:a,table:m().iU});if(i.isDefined()&&!(0,Z().iL)({blockStore:i,collectionId:n,appConfigUri:r,variable:t,schema:o}))return!0}}return!1}),{debugName:"relativeVariablesAreStale"}),this.aliveAutomationCountStore=new(n().default)((()=>{const e=this.collectionStore();if(!e)return 0;const t=e.getAutomationStores();let o=0;for(const n of t)n.isDisplayableInCollectionSettings()&&n.getAlive()&&(o+=1);return o}),{debugName:"aliceAutomationCount"}),this.completeSprintButtonContextStore=new(n().default)((()=>{var e,t;if((null===(e=this.collectionViewStore())||void 0===e?void 0:e.getFormatStore().getKeyStore("app_config_uri").getValue())!==r().g3)return;const o=this.sprintSettingsContextStore.state;if(!o||!o.sprintCollectionStore)return;if(!o.automationContext)return;const{sprintCollectionStore:n,taskCollectionStore:i,automationContext:a}=o,s=this.getAutomationCollectionValue(i),l=this.getAutomationCollectionValue(n),c=null==l||null===(t=l.format)||void 0===t?void 0:t.app_config_uri,d=n.getSchema();return(0,p().PB)({appUri:c,collectionSchema:d})&&s&&l?{...o,sprintCollectionStore:n,taskCollectionValue:s,sprintCollectionValue:l,sprintCollectionSchema:d,automationContext:a}:void 0}),{useDeepEqual:!0,debugName:"getCompleteSprintButtonContext"}),this.sprintSettingsContextStore=new(n().default)((()=>{const e=(()=>{var e;const t=this.collectionStore(),o=this.collectionViewBlockStore();if(!o||!t)return;const n=t.getParentBlockStore();if(!n||!Boolean(n.pathIsAccessibleAndAlive()))return;const i=t.getDatabaseType();if(i!==r().p$&&i!==r().Ym)return;let a,s,c,d;if(i===r().Ym){var u;a=t,s=n;const e=null===(u=a.getFormatStore().getKeyStore("app_uri_map").getValue())||void 0===u?void 0:u[r().Es.TaskToSprintRelation];if(!e)return{currentCollectionViewBlockStore:o,taskCollectionStore:a,taskCollectionViewBlockStore:s,sprintCollectionStore:void 0,sprintCollectionViewBlockStore:void 0,automationContext:void 0,automationContextLoaded:!0};const i=a.getSchemaStore().getKeyStore(e).getValue();if(!i||!l().p_(i))return;const p=l().j0(i);if(!p)return{currentCollectionViewBlockStore:o,taskCollectionStore:a,taskCollectionViewBlockStore:s,sprintCollectionStore:void 0,sprintCollectionViewBlockStore:void 0,automationContext:void 0,automationContextLoaded:!0};if(c=P().NW.createChildStore(o,p),d=c.getParentBlockStore(),!d)return{currentCollectionViewBlockStore:o,taskCollectionStore:a,taskCollectionViewBlockStore:s,sprintCollectionStore:void 0,sprintCollectionViewBlockStore:void 0,automationContext:void 0,automationContextLoaded:!0};if(c.getDatabaseType()!==r().p$)return}else if(i===r().p$){var p;c=t,d=n;const e=null===(p=c.getFormatStore().getKeyStore("app_uri_map").getValue())||void 0===p?void 0:p[r().b0.SprintToTaskRelation];if(!e)return;const i=c.getSchemaStore().getKeyStore(e).getValue();if(!i||!l().p_(i))return;const u=l().j0(i);if(!u)return;if(a=P().NW.createChildStore(o,u),s=a.getParentBlockStore(),a.getDatabaseType()!==r().Ym||!s)return}else(0,h().t1)(i);if(!Boolean(a.getAlive())||!s.pathIsAccessibleAndAlive())return;if(!Boolean(c.getAlive())||!d.pathIsAccessibleAndAlive())return{currentCollectionViewBlockStore:o,taskCollectionStore:a,taskCollectionViewBlockStore:s,sprintCollectionStore:void 0,sprintCollectionViewBlockStore:void 0,automationContext:void 0,automationContextLoaded:!0};const m=null===(e=c)||void 0===e?void 0:e.getAutomationStores();if(null!=m&&m.some((e=>!e.isDefined())))return{currentCollectionViewBlockStore:o,taskCollectionStore:a,taskCollectionViewBlockStore:s,sprintCollectionStore:void 0,sprintCollectionViewBlockStore:void 0,automationContext:void 0,automationContextLoaded:!0};let f;for(const r of m)if(Boolean(r.getAlive())&&r.isCompleteSprintAutomation()){const e=r.getActionStores();if(1===e.length&&Boolean(e[0].getAlive())&&e[0].isType("complete_sprint")){f={automationStore:r,automationActionStore:e[0]};break}}const g=c.isDefined()&&m.every((e=>e.isDefined()&&e.getActionStores().every((e=>e.isDefined()))));return{currentCollectionViewBlockStore:o,taskCollectionStore:a,taskCollectionViewBlockStore:s,sprintCollectionStore:c,sprintCollectionViewBlockStore:d,automationContext:f,automationContextLoaded:g}})(),t=(e=>{var t;if(!e)return;if(!e.taskCollectionViewBlockStore.canEditCollection())return{canEdit:!1};const o=e.sprintCollectionViewBlockStore,n=Boolean(null===(t=e.sprintCollectionViewBlockStore)||void 0===t?void 0:t.canEditCollection());return o&&!n?{canEdit:!1}:!e.sprintCollectionViewBlockStore||n&&!e.automationContext?{canEdit:!0,sprintsEnabled:!1}:n&&e.automationContext?{canEdit:!0,sprintsEnabled:!0}:void 0})(e);return e&&t?{...e,permissionsContext:t}:void 0}),{useDeepEqual:!0,debugName:"sprintSettingsContextStore"}),this.formulasCodeStore=i().default.createValue(void 0,{name:"formulasCodeStore"}),this.itemMountedCallbacks=new E,this.databaseItemsVisibleTracker=void 0,this.onItemMount=e=>{var t;null===(t=this.databaseItemsVisibleTracker)||void 0===t||t.handleItemMount(),this.trackInfiniteScrollLongTasksDebounced(),e&&this.itemMountedCallbacks.executeCallbacks(e)},this.trackInfiniteScrollLongTasksDebounced=v().Ds(this.trackInfiniteScrollLongTasks,1e3),this.groupsForTypedDatabasesStore=new(n().default)((()=>{const e=K().default.state.currentSpaceStore;if(e&&"collectionTypedView"===this.contextType)return(0,o(360240).x1)({environment:this.environment,typedCollections:this.collectionStoresStore.state,spaceStore:e})}),{debugName:"groupsForTypedDatabasesStore"}),this._virtualizedModule=new N(this),this.timingTracker=new D,this.externalSyncStore=new(n().default)((()=>{const e=this.collectionStore();if(!e)return;if(!e||!e.isExternallyImportedAndSyncedCollection())return;const t=T().default.checkGate({gateName:"jira_2_way_sync"}),n=e.getFormat().synced_collection_instance_type,{synced_collection_external_url:i}=e.getFormatStore().getValue()||{},r=q().default.twoWaySyncExternalEntitiesStore.state.filter((e=>{var t;if(e.external_integration_id!==o(235484).mC)return!1;const n=Object.keys((null===(t=e.getMetainfo())||void 0===t?void 0:t.supportedSites)||{});return!!n.length&&(i&&n.includes(i))}));return{shouldAllowUserToEditSyncedCollection:()=>{var o;if(!t)return!1;if(r.length>0&&"DataCenter"!==n)return!0;const i=null===(o=e.getFormat())||void 0===o?void 0:o.bot_id;return!!i&&!!q().default.externalAuthentications.getState().find((e=>e.parent_id===i))}}}),{debugName:"externalSyncStore"}),this.environment=e,this.options=t}setContext(e){this.contextStore.setState(e)}get contextType(){var e;return null===(e=this.contextStore.state)||void 0===e?void 0:e.type}get isMultiSourceView(){return"collectionTypedView"===this.contextType}get databaseType(){const e=this.contextStore.state;if(e){if("collectionTypedView"===e.type)return e.databaseType;if("collectionView"===e.type){const t=e.collectionStore;return null==t?void 0:t.getDatabaseType()}}}collectionViewStore(){const e=this.contextStore.state,t=null==e?void 0:e.type;if(t)switch(t){case"collectionTypedView":case"collectionView":case"collectionSystemView":return e.collectionViewStore;case"collectionPage":return;case"collectionSettings":const n=e.collectionStore,i=(0,o(91097).U)({environment:this.environment,collectionStore:n});if(!i)return;return i;default:(0,h().t1)(t)}}collectionStore(){const e=this.contextStore.state;if(e&&"collectionTypedView"!==e.type)return"collectionSystemView"===e.type||"collectionView"===(null==e?void 0:e.type)||"collectionPage"===(null==e?void 0:e.type)||"collectionSettings"===(null==e?void 0:e.type)?e.collectionStore:void(0,h().t1)(e)}hasSingleCollection(){switch(this.contextType){case"collectionTypedView":case"collectionSystemView":return!1;case"collectionSettings":case"collectionPage":case"collectionView":case void 0:return!0;default:(0,h().t1)(this.contextType)}}collectionViewBlockStore(){const e=this.contextStore.state;return null==e?void 0:e.collectionViewBlockStore}formatStore(){const e=this.contextStore.state;if(e)return"collectionPage"===e.type?e.collectionStore:"collectionView"===e.type||"collectionTypedView"===e.type||"collectionSystemView"===e.type?e.collectionViewStore:void("collectionSettings"!==e.type&&(0,h().t1)(e))}getPropertyFormatKey(){const e=this.contextStore.state;if("collectionPage"===(null==e?void 0:e.type))return"collection_page_properties";if("collectionView"===(null==e?void 0:e.type)||"collectionTypedView"===(null==e?void 0:e.type)){const t=e.collectionViewStore.getType();if(!t)return;return o(109477).oz(t)}}getPropertyFormat(e){var t;const o=null===(t=this.formatStore())||void 0===t?void 0:t.getFormat(),n=null==this?void 0:this.getPropertyFormatKey();if(!o||!n)return;return(o[n]??[]).find((t=>t.property===e))}createUpdateCounter(){return this.updateCounter.latestRequestUpdateCounter++,this.updateCounter}shouldUpdate(e){return T().default.checkGate({gateName:"collection_view_update_counter"})?!this.updateCounter.setRemoteResultCounter||this.updateCounter.setRemoteResultCounter<=e:this.updateCounter.latestRequestUpdateCounter===e}setUpdateCounterWithResponseCounter(e){this.updateCounter.setRemoteResultCounter=Math.max(e,this.updateCounter.setRemoteResultCounter??0)}getCurrentUserId(){return this.environment.currentUser.id}getViewType(){const e=this.collectionViewStore();if(null!=e&&e.isDefined())return e.getType();const t=this.contextStore.state;return"collectionPage"===(null==t?void 0:t.type)?"page":void 0}currentViewHasSort(){const e=this.normalizedQueryStore.state;return Boolean(e&&e.sort&&e.sort.length>0)}resetLoadingState(){this.isLoadingStore.setState(!1),this.loadingDetailsStore.reset()}getCollectionViewBlockSourceState(){const e=this.collectionViewBlockStore();if(!e)return"uninitialized";if(e.getCollectionViewSourceCollectionStore())return"source";return e.getCollectionViewStores().some((e=>Boolean(e.getCollectionStore())))||this.isEditableHomeCollectionStore.state?"linked":"uninitialized"}getFilterBarItemSettingsStore(e){let t=this.filterBarItemSettingsStoreMap.get(e.id);return t||(t=i().default.createValue({open:!1,stack:[]}),this.filterBarItemSettingsStoreMap.set(e.id,t)),t}getFilterOptionsItemSettingsStore(e){let t=this.filterOptionsItemSettingsStoreMap.get(e.id);return t||(t=i().default.createValue({open:!1,stack:[]}),this.filterOptionsItemSettingsStoreMap.set(e.id,t)),t}allowScrollingWhenCollectionSettingsSidebarOpen(){return"form_editor"===this.getViewType()}viewIsFlushToTopbar(){if(!this.collectionStore())return!1;if(this.shouldShowSourceStore.state)return!1;if(this.filtersBarOpenStore.state)return!1;return void 0===this.completeSprintButtonContextStore.state}shouldAllowNewItemCreation(e){var t;const o=this.permissionScopesStore.state,n="collectionTypedView"===this.contextType;return(null===(t=this.collectionStore())||void 0===t||!t.isExternallyImportedAndSyncedCollection()||"on"!==T().default.getEligibleGroup({experimentId:"jira_import_and_sync",defaultGroup:"control"}))&&(!o.isSyncedCollection&&(o.canEditContent||n&&(null==e?void 0:e.overrideAllowForTypedViews)))}shouldShowPageIcon(){var e;return(null===(e=this.collectionViewStore())||void 0===e?void 0:e.shouldShowPageIcon())??!0}getAutomationCollectionValue(e){if(e.isDefined())return{id:e.id,space_id:e.getSpaceId(),schema:e.getSchema(),format:e.getFormat()}}registerCallbackForItemMounted(e,t){this.itemMountedCallbacks.registerCallback(e,t)}async trackInfiniteScrollLongTasks(){if(!this.infiniteScrollLongTaskObserver.isObserving)return;this.infiniteScrollLongTaskObserver.disconnect();const e=this.infiniteScrollLongTaskObserver.takeRecords(),t=w().vS(this),o=await V().Vi({eventName:"collections.infinite_scroll_long_tasks.max_duration",eventProperties:t,sampling:{behavior:"statsig",fallbackBehavior:"statsig",statsigNotAvailableBehavior:"drop"}});if(!o)return;const n=e.reduce(((e,t)=>(e.entryCount++,e.maxDuration=Math.max(e.maxDuration,t.duration),e)),{maxDuration:0,entryCount:0});V().K4(this.environment,"collections.infinite_scroll_long_tasks.count",{count:n.entryCount,...t,sample_decision:o},{sampling:{behavior:"decided",sampleDecision:o}}),n.entryCount>0&&V().K4(this.environment,"collections.infinite_scroll_long_tasks.max_duration",{time:n.maxDuration,...t,sample_decision:o},{sampling:{behavior:"decided",sampleDecision:o}})}getPageVisitSourceOverride(){var e;switch(null===(e=this.contextStore.state)||void 0===e?void 0:e.type){case"collectionTypedView":case"collectionSystemView":case"collectionView":return this.contextStore.state.pageVisitSourceOverride;case"collectionPage":case"collectionSettings":case void 0:return;default:(0,h().t1)(this.contextStore.state)}}getGroupByAndGroupFormats(){const e=this.getViewType(),t=this.normalizedFormatStore.state,o="board"===e?{groupByKey:"board_columns_by",groupsFormatKey:"board_columns"}:{groupByKey:"collection_group_by",groupsFormatKey:"collection_groups"};return{groupBy:t[o.groupByKey],groupFormats:t[o.groupsFormatKey]??[]}}resultsInViewOrder(e){var t;const o=this.collectionViewBlockStore(),n=this.collectionViewStore(),i=this.collectionStoresStore.state;if(!o||!n||!i.length)return[];const{groupBy:r,groupFormats:a}=this.getGroupByAndGroupFormats(),l=this.normalizedSchemaStore.state,c=(0,h().$K)(r)?(0,s().Qq)({schema:l,groupBy:r}):[],d=Object.values((null===(t=this.localResultStore.state)||void 0===t?void 0:t.reducerResults)??{}).find((e=>"groups"===e.type));if(!d)return[];const u="v2"===d.version?a:(0,O().Cz)({getRecordModel:o.getRecordModel,schema:l,groupBy:r,formatGroups:a,schemaGroups:c,reducerResults:(null==d?void 0:d.results)??[],relativeVariableResult:this.relativeVariableStore.state,viewAppConfigUri:n.getFormat().app_config_uri,allowedCollectionStores:i});let p,m;if(0===u.length){const e=this.localResultStore.state;if(e){const t=Object.values(e.reducerResults).find((e=>"results"===e.type));p=((null==t?void 0:t.blockIds)??[]).map((e=>P().G.createChildStore(n,{table:"block",id:e})))}else p=[]}else{p=[];for(const e of u){const t=this.groupsStore.getGroupState(e),o=null==t?void 0:t.resultsStore.state;p.push(...o??[])}}if(p=v().mN(p,(e=>e.id)),this.currentSubitemFormatStoreForUiDisplayStore.state){m=[];const t=this.subitemTreeStore.state;for(const o of p){if(void 0!==e&&m.length>=e)break;const n=t.children.find((e=>e.value.store.id===o.id));if(n){const e=[];(0,k().yU)({results:e,tree:n}),m.push(...e)}}}else m=p;return void 0!==e?m.slice(0,e):m}collectionStoreResultsInViewOrder(){if("collectionTypedView"!==this.contextType){const e=this.collectionStore();return e?[e]:[]}const e=this.resultsInViewOrder(void 0);return v().oA(v().mN(e.map((e=>e.getAssociatedCollectionStore())),"id"))}get virtualizedModule(){return this._virtualizedModule}}G.incrementScrollOffset=600;const $=G},642966:(e,t,o)=>{o.d(t,{n:()=>i});var n=()=>o(513670);function i(e){const t=e.state;return n().Z$(t.stack)}},341374:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{editMode:void 0,store:void 0}}cloneState(){return o(513670).d9(this.state)}}const i=new n},419380:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{isActive:!1}}cloneState(){return o(513670).d9(this.state)}}const i=new n},845622:(e,t,o)=>{o.r(t),o.d(t,{default:()=>r});o(821057);class n extends(()=>o(263184))().default{constructor(){super(...arguments),this.lastUpdater=0}getInitialState(){return{type:"closed"}}setState(e){if("completionPopup"===this.state.type&&"results"===this.state.stage&&("completionPopup"!==e.type||"results"!==e.stage)){const{inMemoryRecordCache:e,context:t}=this.state;if(e.cacheUsingThisInstanceAsAnOverride){const n=`CompletionsStore transitioning away from completionPopup results while inMemoryRecord cache is still overriding ${e.cacheUsingThisInstanceAsAnOverride===t.currentPage.inMemoryRecordCache?"page's in-memory cache":"an unknown cache"}!`;o(680146).rn(new Error(n),{from:"CompletionsStore",type:"dangerousStateTransition"})}}super.setState(e)}createUpdater(){const e=++this.lastUpdater;return t=>{if(e===this.lastUpdater)return t()}}invalidateLastUpdater(){this.lastUpdater+=1}resetStore(e){const{environment:t}=e;this.invalidateLastUpdater();const o=this.state;"completionPopup"!==o.type&&"assistantCompletionPopup"!==o.type||("completionPopup"===o.type&&"initialPromptForAIBlock"!==o.stage&&"initialPrompt"!==o.stage&&t.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(o.inMemoryRecordCache),this.setState({type:"closed"}))}getExistingAISessionId(){return"closed"!==this.state.type?"assistantCompletionPopup"===this.state.type?this.state.sessionId:this.state.aiSessionId:void 0}isEditingEmptyBlock(){var e;const t=this.state;return Boolean(("completionPopup"===t.type||"assistantCompletionPopup"===t.type)&&"initialPrompt"===t.stage&&"cursor"===t.context.type&&(null===(e=t.context.currentBlock)||void 0===e?void 0:e.isEmptyEditableBlock()))}}const i=new n;(0,o(947115).exposeDebugValue)("CompletionsStore",i);const r=i},666830:(e,t,o)=>{o.d(t,{Z:()=>a});var n=()=>o(435308);class i extends(()=>o(263184))().default{constructor(){super(...arguments),this.integrations=new(n().default)((()=>{const e=this.state;return e.loaded?e.integrations:[]}),{debugName:"ComplianceIntegrationStore.integrations"}),this.webhookSubscriptions=new(n().default)((()=>{const e=this.state;return e.loaded?e.webhookSubscriptions:[]}),{debugName:"ComplianceIntegrationStore.webhookSubscriptions"})}getInitialState(){return{loaded:!1,loading:!1}}}const r=new i;(0,o(947115).exposeDebugValue)("ComplianceIntegrationStore",r);const a=r},866893:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1}}}const i=new n},972218:(e,t,o)=>{o.d(t,{Z:()=>i});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624);class n extends(()=>o(263184))().default{getInitialState(){return{bypassedPageIds:new Set}}bypassedPage(e){return this.state.bypassedPageIds.has(e)}bypassPage(e){this.state.bypassedPageIds.add(e),this.emit()}}const i=new n},901085:(e,t,o)=>{o.d(t,{Z:()=>r});var n=()=>o(274879);class i extends(()=>o(263184))().default{getInitialState(){return{permission:o(195926).UE}}getId(){return this.getState().id}getPermission(){return this.getState().permission}setPermission(e){this.setState({...this.state,permission:e})}async setCookieConsent(e,t){this.setState(t),await(0,n().setCookieConsentCookie)(e,t)}clearCookieConsent(){this.reset(),(0,n().removeCookieConsentCookie)()}}const r=new i},997489:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1}}}const i=new n},908102:(e,t,o)=>{o.d(t,{Z:()=>i});o(267602),o(30005);class n extends(()=>o(263184))().default{getInitialState(){return{pageId:void 0,lastInteractionTimes:{}}}resetIfNotCurrentPage(e){e!==this.state.pageId&&this.reset()}markDiscussionsInteractedWith(e){const t={};e.forEach((e=>{t[e]=Date.now()})),this.setState({...this.state,lastInteractionTimes:t})}}const i=new n},467806:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{permissionGroupsAndMemberCounts:[],lastEmitData:{value:-1,spaceId:void 0}}}shouldRefetch(e){let{currentSpaceId:t,emitValue:o}=e;const{spaceId:n,value:i}=this.state.lastEmitData;return t!==n||o!==i}}const i=new n},619779:(e,t,o)=>{o.d(t,{Z:()=>i});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624);class n extends(()=>o(263184))().default{getInitialState(){return{spacePermissionGroupIds:new Set,lastEmitData:{value:-1,spaceId:void 0,userId:void 0}}}shouldRefetch(e){let{currentUserId:t,currentSpaceId:o,emitValue:n}=e;const{spaceId:i,userId:r,value:a}=this.state.lastEmitData;return o!==i||(t!==r||n!==a)}}const i=new n},144321:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{isOpen:!1}}}const i=new n},170722:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1}}}const i=new n},230637:(e,t,o)=>{o.d(t,{Z:()=>n});const n=new(o(130729).Z)},720029:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{isActive:!1}}isActiveDemo(){return this.state.isActive}decrementStep(){if(void 0===this.state.step||0===this.state.step)return;const e=this.state.step-1;this.setState({...this.state,step:e})}incrementStep(){const{step:e,tooltipTourOutline:t}=this.state;if(void 0===e||!t)return;const o=e+1;o>=t.length?this.endTour():this.setState({...this.state,step:o})}endTour(){this.setState({...this.state,isActive:!1})}getCurrentStepBlockId(){if(this.state.tooltipTourOutline&&void 0!==this.state.step)return this.state.tooltipTourOutline[this.state.step].blockId}getCurrentStepSubStep(){if(!this.state.tooltipTourOutline||void 0===this.state.step)return;const e=this.state.tooltipTourOutline[this.state.step];return"demo_collection"===e.step_type||"demo_share"===e.step_type?e.sub_step:void 0}}const i=new n},47375:(e,t,o)=>{o.d(t,{default:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1,items:[],showCancel:!0,keepFocus:!1}}}const i=new n},960562:(e,t,o)=>{o.d(t,{D:()=>i,default:()=>a,v:()=>n});let n=function(e){return e[e.Above=0]="Above",e[e.Below=1]="Below",e[e.Left=2]="Left",e[e.Right=3]="Right",e[e.Onto=4]="Onto",e}({}),i=function(e){return e[e.Selectable=0]="Selectable",e[e.DropTarget=1]="DropTarget",e}({});class r extends(()=>o(263184))().default{getInitialState(){return{isDragging:!1}}}const a=new r},280977:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{isDragging:!1,willDrag:!1}}}const i=n},670320:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{initiator:"none",dragging:!1,waiting:!1}}hasDragged(){return this.state.dragging&&!o(513670).Xy(this.state.startingPoint,this.state.currentPoint)}}const i=n},158083:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{initiator:"none",isDragging:!1,disableVerticalEdgeScroll:!1,disableHorizontalEdgeScroll:!1}}}const i=new n},27762:(e,t,o)=>{o.d(t,{default:()=>r});class n extends(()=>o(263184))().default{getInitialState(){return{dropTargetRectMap:new Map}}}const i=new n;(0,o(947115).exposeDebugValue)("GlobalDropTargetRectStore",i);const r=i},245845:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{shouldUseEdgeCache:!1}}}const i=new n},279386:(e,t,o)=>{o.d(t,{MT:()=>i,a0:()=>a,hV:()=>r});o(821057);class n extends(()=>o(263184))().default{getInitialState(){return{blockStoreMode:{}}}getStateForBlock(e){if(e in this.state.blockStoreMode)return this.state.blockStoreMode[e]}setStateForBlock(e,t){this.update((o=>({...o,blockStoreMode:{...o.blockStoreMode,[e]:t}})))}clearStateForBlock(e){e in this.state.blockStoreMode&&(delete this.state.blockStoreMode[e],this.emit())}getMode(e,t){var o,n;if(t)return(null===(n=this.getStateForBlock(e.id))||void 0===n?void 0:n.mode)??"default";const i=null===(o=e.getNavigableBlockStore())||void 0===o?void 0:o.id;var r;return i?(null===(r=this.getStateForBlock(i))||void 0===r?void 0:r.mode)??"default":"default"}hasModeSet(e){let t=e;if(!e.isNavigableBlock()){const o=e.getNavigableBlockStore();if(!o)throw new Error("Store doesn't have a navigable block store.");t=o}return Boolean(this.getStateForBlock(t.id))}getSessionId(e){var t;if(!e.isNavigableBlock())throw new Error("getSessionId must be called with a navigable block.");return null===(t=this.getStateForBlock(e.id))||void 0===t?void 0:t.sessionId}getTranslateModeForBlock(e){const t=this.getStateForBlock(e);if(t)return r(t)?t:void 0}isBlockModeInTranslation(e){return Boolean(this.getTranslateModeForBlock(e))}}const i=new n;function r(e){return!!e&&a(e.mode)}(0,o(947115).exposeDebugValue)("EditorModeStore",i);const a=(0,o(696459).AO)((e=>"translate_locked"===e||"translate_unlocked"===e?{true:e}:{false:e}))},84926:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{editorWidth:void 0,peekViewEditorWidth:void 0}}setWidth(e,t){t?this.setPeekViewEditorWidth(e):this.setEditorWidth(e)}setEditorWidth(e){this.setState({...this.state,editorWidth:e})}setPeekViewEditorWidth(e){this.setState({...this.state,peekViewEditorWidth:e})}getWidth(e){return e?this.getPeekViewEditorWidth():this.getEditorWidth()}getEditorWidth(){return this.state.editorWidth}getPeekViewEditorWidth(){return this.state.peekViewEditorWidth}}const i=new n},725751:(e,t,o)=>{o.d(t,{default:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{}}}const i=new n},255810:(e,t,o)=>{o.d(t,{default:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{tabs:[],currentTab:{isPinned:!1},unauthorizedIframeUrls:[]}}}const i=new n},656769:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1,willOpen:!1,loading:!1}}}const i=new n},762557:(e,t,o)=>{o.d(t,{P:()=>n,Z:()=>a});let n=function(e){return e.Forward="Forward",e.Backward="Backward",e}({});class i extends(()=>o(263184))().default{getInitialState(){return{open:!1}}isOpen(){if(this.state.open){this.state;return!0}return!1}}const r=new i;o(947115).exposeDebugValue("EquationAnnotationStore",r);const a=r},749826:(e,t,o)=>{o.r(t),o.d(t,{ExperimentStoreV3:()=>u,default:()=>p,localExperimentsV2Key:()=>c});o(821057),o(267602),o(470928),o(30005);var n=()=>o(801916),i=()=>o(640157),r=()=>o(513670),a=()=>o(696459);function s(e){const t={};return e?((0,a().qP)(e).forEach((e=>{let[o,n]=e;null!=o&&null!=n&&(t[String(o)]=r().HD(n)?n:JSON.stringify(n))})),t):t}var l=()=>o(517632);const c="experimentsSettingsV2";class d extends(()=>o(263184))().default{getInitialState(){return{isLoaded:!1}}updateState(e,t){!e.test&&this.state.isLoaded&&this.state.test||(this.setState(e),o(35980).Z.set({userId:e.userId,key:c,value:e}))}setState(e){super.setState(e)}getExperimentsForCurrentSpace(){if(!this.state.isLoaded)return[];if(this.state.test)return this.state.experiments;const e=o(876822).default.state.currentSpaceStore;return e&&this.state.experimentsBySpace[e.id]||this.state.experimentsWithoutSpace}getGroup(e){if(n().TS.has(e))return i().Le;let t;if(this.state.isLoaded){const o=this.getExperimentsForCurrentSpace().find((t=>t.experimentId===e));if(!o)return i().Le;t=o.group}return t||i().Le}getExperimentsMap(){const e={};return this.state.isLoaded&&this.getExperimentsForCurrentSpace().forEach((t=>{e[t.experimentId]=t.group})),e}getExperimentMap(){const e=new Map;return this.state.isLoaded&&this.getExperimentsForCurrentSpace().forEach((t=>{e.set(t.experimentId,t)})),e}getUsedNonControlExperimentsMap(){const e={};return this.state.isLoaded&&this.getExperimentsForCurrentSpace().forEach((t=>{"control"!==t.group&&(0,n().DP)(t.experimentId)&&(e[t.experimentId]=t.group)})),e}getAcceptLanguageHeader(){if(this.state.isLoaded)return this.state.acceptLanguageHeader}}class u extends d{constructor(){super(),this.statsigExposureCacheForAnalytics={},this.computedStoreMap=new Map,this.isStatsigEnabled()&&l().C.addListener((()=>{this.recomputeAllGroupStores()}))}isStatsigEnabled(){var e;return Boolean(null===(e=o(205228).default.statsig)||void 0===e?void 0:e.apiKey)}isStatsigEnabledAndInitialized(){return this.isStatsigEnabled()&&l().C.isInitialized()}isLoaded(){return this.state.isLoaded}getGroup(e,t){return(0,n().YY)(e)?this.getEligibleGroup({experimentId:e,defaultGroup:i().Le,disableExposureLogging:null==t?void 0:t.disableExposureLogging}):i().Le}getEligibleGroup(e){const{experimentId:t,defaultGroup:o,parameter:n=l().Z,disableExposureLogging:i=!1}=e,r=(null==n?void 0:n.toLowerCase())===l().Z,s=this.getExperimentOverrideForBrowserTest(t);if((0,a().$K)(s))return s[n];const c=e.actor;this.validateActor(c),this.state.isLoaded;const d=`eligibleGroup.${t}.${n}${i?".disableLogging":""}`;return this.createComputedGroupStore(d,(()=>{if(!this.isStatsigEnabledAndInitialized())return;const e=this.validateGroupIsString(l().C.getGroup(t,i));return void 0!==e&&(this.statsigExposureCacheForAnalytics[`statsig-${t}`]=e),r?e:l().C.getGroup(t,i,n,o)})).state.group??o}manuallyLogExperimentExposure(e){l().C.manuallyLogExperimentExposure(e)}validateActor(e){if(void 0!==e&&e!==n().pX){const t=this.isStatsigEnabledAndInitialized()&&l().C.state.currentUserId?{table:o(989478).KJ,id:l().C.state.currentUserId}:void 0;if(t&&e!==t)throw new Error("Invalid user: actor does not match currentUser")}}checkGate(e){return this.getGateCheckStore(e).state.gate}getGateCheckStore(e){const{gateName:t,disableExposureLogging:o=!1}=e,n=e.actor;return this.validateActor(n),this.createComputedGateStore(`gate.${t}${o?".disableLogging":""}`,(()=>{const e=this.getFeatureGateOverrideForBrowserTest(t);if((0,a().$K)(e))return e;const n=this.getFeatureGateOverrideForUnitTest(t);if((0,a().$K)(n))return n;if(!this.isStatsigEnabledAndInitialized())return!1;const i=l().C.checkGate(t,o);return this.statsigExposureCacheForAnalytics[`statsig-${t}`]=i,i}))}getConfigKey(e,t,o){const i=n().LI[e][t];return this.createComputedDynamicConfigKeyStore(e,t,(()=>{var n;return this.isStatsigEnabledAndInitialized()?(null===(n=l().C.getConfig(e,o))||void 0===n?void 0:n.get(String(t),i))??i:i})).state.value}logEvent(e,t,n){return this.isStatsigEnabledAndInitialized()?l().C.logEvent(e,t,s(n)):(o(799891).log({level:"error",from:"ExperimentStore.ts",type:"statsigIsNotInitialized",data:{miscDataToConvertToString:{eventName:e,value:t,metadata:s(n),isStatsigEnabled:this.isStatsigEnabled(),isInitialized:l().C.isInitialized()}}}),!1)}getExperimentsMap(){return{...super.getExperimentsMap(),...this.getStatsigExperimentsMap()}}getStatsigExperimentsMap(){return this.getBootstrappedExperimentGroups(),this.statsigExposureCacheForAnalytics}updateState(e,t){(void 0===e.userId||this.state.isLoaded&&this.state.userId!==e.userId)&&(this.statsigExposureCacheForAnalytics={}),super.updateState(e,t)}reset(){super.reset(),this.statsigExposureCacheForAnalytics={},this.recomputeAllGroupStores()}async waitUntilStatsigReady(){this.isStatsigEnabled()&&await l().C.waitUntil((()=>l().C.state.ready))}isStatsigReady(){return l().C.state.ready}recomputeAllGroupStores(){this.computedStoreMap.forEach((e=>e.enqueueRecompute()))}createComputedGroupStore(e,t){return this.createComputedStore(e,(()=>({group:t(),lastUpdatedMinute:(new Date).getMinutes()})))}createComputedGateStore(e,t){return this.createComputedStore(e,(()=>({gate:t(),lastUpdatedMinute:(new Date).getMinutes()})))}createComputedDynamicConfigKeyStore(e,t,o){return this.createComputedStore(`config.${e}.${String(t)}`,(()=>({value:o(),lastUpdatedMinute:(new Date).getMinutes()})))}createComputedStore(e,t){let n=this.computedStoreMap.get(e);return n||(n=new(o(435308).default)(t,{debugName:`ExperimentStore.${e}`}),n.addListener(r().ZT),this.computedStoreMap.set(e,n)),n}getFeatureGateOverrideForBrowserTest(e){}getExperimentOverrideForBrowserTest(e){}getFeatureGateOverrideForUnitTest(e){}validateGroupIsString(e){return"string"==typeof e?e:void 0}getBootstrappedExperimentGroups(){for(const e of n().T_){if(void 0!==this.statsigExposureCacheForAnalytics[`statsig-${e}`])continue;const t=(0,o(836842).XG)(e);null!==t&&(this.statsigExposureCacheForAnalytics[`statsig-${e}`]=t)}}}const p=new u},138912:(e,t,o)=>{o.d(t,{default:()=>s});o(267602),o(30005);var n=()=>o(435308),i=()=>o(217465);class r extends(()=>o(263184))().default{constructor(){super(...arguments),this.integrations=new(n().default)((()=>{const e=this.state;return e.loaded?e.integrations:[]}),{debugName:"ExternalIntegrationStore.integrations"}),this.bots=new(n().default)((()=>{const e=this.state;return e.loaded?e.bots:[]}),{debugName:"ExternalIntegrationStore.bots"}),this.externalAuthentications=new(n().default)((()=>{const e=this.state;return e.loaded?e.externalAuthentications:[]}),{debugName:"ExternalIntegrationStore.externalAuthentications"}),this.completeSlackAuthentications=new(n().default)((()=>{const e=this.state;return e.loaded?e.completeSlackAuthentications:[]}),{debugName:"ExternalIntegrationStore.completeSlackAuthentications"}),this.twoWaySyncExternalEntitiesStore=new(n().default)((()=>{const e=this.state;return e.loaded?e.twoWaySyncExternalEntities:[]}),{debugName:"ExternalIntegrationStore.twoWaySyncExternalEntities"})}getInitialState(){return{loaded:!1,loading:!1}}getIntegrationsAsRecordMap(){const e=i().RecordMap.create();return this.integrations.state.forEach((t=>e.setValue({table:o(85073).K2,id:t.id},t))),e}getBotsAsRecordMap(){const e=i().RecordMap.create();return this.bots.state.forEach((t=>e.setValue({table:o(696056).cZ,id:t.id},t))),e}getExternalEntitiesAsRecordMap(){const e=i().RecordMap.create();this.twoWaySyncExternalEntitiesStore.state.forEach((t=>e.setModel({table:o(832438).a,id:t.id},t)))}}const a=new r;(0,o(947115).exposeDebugValue)("ExternalIntegrationStore",a);const s=a},688789:(e,t,o)=>{o.d(t,{default:()=>d});o(267602),o(653476),o(241792);var n=()=>o(156642),i=()=>o(396136),r=()=>o(752778),a=()=>o(696459),s=()=>o(326966),l=()=>o(138912);class c extends(()=>o(263184))().default{getInitialState(){return{externalObjectInstanceBlockPointersMap:{},externalCollectionInstancePointersMap:{}}}addFromRecordMapWithRoleJson(e){this.addFromRecordMapWithRole(o(217465).RecordMapWithRole.create(e))}addFromRecordMapWithRole(e){const t=e.getByTable(r().vF).filter((e=>{var t;let{value:o}=e;return null==o||null===(t=o.value)||void 0===t||null===(t=t.format)||void 0===t?void 0:t.external_object_id})).map((e=>{let{value:t}=e;return(null==t?void 0:t.value)&&{id:t.value.id,table:r().vF,spaceId:t.value.space_id}})).filter(a().$K),c=l().default.getBotsAsRecordMap(),d=e.getByTable(i().iU).filter((e=>{let{value:t}=e;if(!(t&&t.value&&t.value.format&&t.value.format.external_object_id))return!1;if(t.value.type!==n().Ti.externalObjectInstancePage&&t.value.type!==n().Ti.externalObjectInstance)return!1;const i=t.value.format.bot_id;if(!i)return!1;if(!0===l().default.state.loaded){const e=c.getValue({table:o(696056).cZ,id:i});if(e&&e.integration_id&&e.integration_id===o(235484).U9)return!1}return!0})).map((e=>{let{value:t}=e;return null==t?void 0:t.value})).filter(a().$K),u=o(513670).oA(d.map((e=>{if(e.type===n().Ti.externalObjectInstancePage&&e.parent_table===r().vF)return{id:e.parent_id,table:e.parent_table,spaceId:e.space_id}}))),p=(0,s().m8)(d.map((e=>{const t={id:e.id,table:i().iU,spaceId:e.space_id};return[e.id,t]}))),m=(0,s().m8)([...t,...u].map((e=>[e.id,e])));this.setState({externalObjectInstanceBlockPointersMap:{...this.state.externalObjectInstanceBlockPointersMap,...p},externalCollectionInstancePointersMap:{...this.state.externalCollectionInstancePointersMap,...m}})}reset(){this.setState({externalObjectInstanceBlockPointersMap:{},externalCollectionInstancePointersMap:{}})}isEmpty(){return 0===Object.keys(this.state.externalCollectionInstancePointersMap).length&&0===Object.keys(this.state.externalObjectInstanceBlockPointersMap).length}}const d=new c},214488:(e,t,o)=>{o.d(t,{Z:()=>i});o(821057);const n=new(o(168469).q)((e=>{let{spaceId:t}=e;return t}),(async(e,t)=>{let{spaceId:n}=t;if(n.includes("|"))throw new Error("Invalid spaceId, you're likely passing a spaceUserId instead");const i=await Promise.resolve().then(o.bind(o,824462)),r=await i.callApi({eventName:"getFeatureBillingData",environment:e,data:{spaceId:n},headers:(0,o(741633).Bb)({cellId:void 0,spaceId:n})});if("success"===r.type)return r.data}));o(947115).exposeDebugValue("FeatureBillingDataStore",n);const i=n},168469:(e,t,o)=>{o.d(t,{X:()=>a,q:()=>r});var n=()=>o(263184),i=()=>o(35980);class r{constructor(e,t){this.nextVersion=1,this.keyFn=void 0,this.promiseMap=void 0,this.versionMap=void 0,this.storeMap=void 0,this.fetchFn=void 0,this.fetch=async(e,t,o)=>{const n=this.keyFn(t),i=this.nextVersion++;this.versionMap[n]=i;const r=await this.fetchFn(e,t,o);return this.versionMap[n]!==i?this.promiseMap[n]:(this.storeMap[n].setState(r),r)},this.storeMap={},this.promiseMap={},this.versionMap={},this.fetchFn=t,this.keyFn=e}getData(e,t){var o;let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=this.keyFn(t);return i&&(this.promiseMap[r]=void 0),this.storeMap[r]??=n().default.createValue(void 0),this.promiseMap[r]??=this.fetch(e,t,i),null===(o=this.storeMap[r])||void 0===o?void 0:o.state}awaitData(e,t){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=this.keyFn(t);return o&&(this.promiseMap[i]=void 0),this.storeMap[i]??=n().default.createValue(void 0),this.promiseMap[i]??=this.fetch(e,t,o),this.promiseMap[i]}resetData(e,t){const o=this.keyFn(t),n=this.storeMap[o];if(n&&n.listenerCount()>0){const n=this.fetch(e,t,!0);return this.promiseMap[o]=n,n.then((()=>{}))}return this.promiseMap[o]=void 0,Promise.resolve(void 0)}TEST_ONLY__setData(e,t){const o=this.keyFn(e);this.promiseMap[o]=Promise.resolve(t),this.storeMap[o]??=n().default.createValue(void 0),this.storeMap[o].setState(t)}TEST_ONLY__getData(e){var t;const o=this.keyFn(e);return null===(t=this.storeMap[o])||void 0===t?void 0:t.state}TEST_ONLY__hasData(e){const t=this.keyFn(e);return void 0!==this.storeMap[t]}TEST_ONLY__addListener(e,t){const o=this.keyFn(e);this.storeMap[o]??=n().default.createValue(void 0),this.storeMap[o].addListener(t)}}async function a(e){let{environment:t,namespace:o,key:n,getValue:r,forceRefetch:a}=e;const s=t.currentUser.id,l=`{${o}}:${n}`;a&&i().Z.set({userId:t.currentUser.id,key:l,value:null});const c=i().Z.get({userId:s,key:l});if(c)return c;const d=await r();return i().Z.set({userId:t.currentUser.id,key:l,value:d}),d??void 0}},37405:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{isLoading:!1,progressPercent:0}}}const i=n},158429:(e,t,o)=>{o.d(t,{V:()=>c,default:()=>a,l:()=>s});var n=()=>o(263184);class i extends n().default{getInitialState(){return{open:!1,findQuery:"",focused:!1,showReplaceInput:!1,textSelectionOnOpen:void 0}}isOpen(){return this.state.open}hasFindQuery(){return this.state.findQuery.length>0}isFocused(){return this.state.focused}}const r=new i,a=r,s=new(o(435308).default)((()=>{const e=r.state;return e.open&&e.findQuery.length>0?e.findQuery:void 0}),{debugName:"FindAndReplaceOpenQueryStore"});class l extends n().default{getInitialState(){}}const c=new l},722116:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1}}}const i=new n},732466:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1,formResponseId:void 0,secretKey:void 0,formSpaceId:void 0}}}const i=new n},9599:(e,t,o)=>{o.d(t,{Z:()=>n});const n=new(o(55558).Z)},72041:(e,t,o)=>{o.d(t,{Z:()=>i});const n=new(o(561280).Z);(0,o(947115).exposeDebugValue)("FrameScrollerStore",n);const i=n},773725:(e,t,o)=>{o.d(t,{Z:()=>a});var n=()=>o(614027);const i=new class{constructor(){this.frecencyStore=void 0,this.spaceId=void 0,this.userId=void 0}get(e){const{currentSpaceStore:t}=o(876822).default.state,i=t&&t.id;return void 0===i||void 0===e?(this.userId=void 0,this.spaceId=void 0,void(this.frecencyStore=void 0)):(this.spaceId===i&&this.userId===e||(this.spaceId=i,this.userId=e,this.frecencyStore=new(n()._R)({store:localStorage,prefix:`BlockFrecency:${e}:${i}`,maxBlocks:100,maxStoredVisits:10,version:n().uP}),this.frecencyStore.initialize()),this.frecencyStore)}};const r={lazyFrecencyStore:i,recordVisit:function(e){const{id:t,type:n,timestampForTestingOnly:r,currentUserId:a,systemBlockType:s}=e;if((0,o(903680).EW)(s))return;const l=i.get(a);return l?l.recordVisit({id:t,type:n,timestampForTestingOnly:r}):void 0},sortFrecencyHighToLow:function(e){const{currentUserId:t,items:o,now:n,recordFrecency:r}=e,a=i.get(t);return a?a.sortFrecencyHighToLow({items:o,now:n,recordFrecency:r}):o},getVisitedIds:function(e){const t=i.get(e);return t?t.getVisitedIds():[]},clearForUser:function(e){for(let t=0;t<localStorage.length;t++){const o=localStorage.key(t);o&&o.startsWith(`BlockFrecency:${e}`)&&localStorage.removeItem(o)}},getVisits:function(e,t){const o=i.get(e);if(o){const e=o.getVisits(t);return e?e.recentVisits:[]}return[]}};(0,o(947115).exposeDebugValue)("FrecencyStore",r);const a=r},255313:(e,t,o)=>{o.d(t,{default:()=>r});class n extends(()=>o(263184))().default{getInitialState(){return{isOpen:!1,fullscreenNodeAnimationComplete:!0,startScrollTop:0,skipAnimations:!1,isSaving:!1,zoomScale:1,panStartPosition:{x:0,y:0},panOffset:{x:0,y:0}}}}const i=new n;(0,o(947115).exposeDebugValue)("GlobalFullScreenStore",i);const r=i},844659:(e,t,o)=>{o.d(t,{Z:()=>n});const n=new(o(529048).Z)},920991:(e,t,o)=>{o.r(t),o.d(t,{GlobalFileUploadStore:()=>n,default:()=>i});o(398858),o(461318),o(33228);class n extends(()=>o(263184))().default{getInitialState(){return{}}getKeyState(e){return this.state[e]}setKeyState(e,t){const o=this.state;let n;if(t){var i;const a=t.file.type.indexOf("image")>=0;var r;if(t.file!==(null===(i=o[e])||void 0===i?void 0:i.file)&&a&&t.file instanceof File)n=null===(r=o[e])||void 0===r?void 0:r.dataURL,t.dataURL=URL.createObjectURL(t.file);o[e]={...t,dataURL:t.dataURL}}else{var a;n=null===(a=o[e])||void 0===a?void 0:a.dataURL,delete o[e]}if(n){const e=n;setTimeout((()=>{URL.revokeObjectURL(e)}),1e3)}this.emit()}isUploading(e){const t=this.state,o=Object.keys(t);for(const n of o){if(e&&!e(n))continue;if(t[n])return!0}return!1}getBlockKey(e){return e}}const i=new n},197666:(e,t,o)=>{o.d(t,{Z:()=>n});const n=new(o(435308).default)((()=>o(158083).Z.state.isDragging||o(960562).default.state.isDragging||o(504446).Z.state.isDragging||o(557576).default.state.isActive),{debugName:"GlobalIsDraggingStore"})},109083:(e,t,o)=>{o.d(t,{Z:()=>i});o(267602),o(228244);class n extends(()=>o(263184))().default{getInitialState(){return{caches:{}}}initializeCache(e,t){this.setState({caches:{...this.state.caches,[e]:{hasUnsavedChanges:!1,inMemoryRecordCache:t}}})}updateUnsavedCacheState(e,t){var o;(null===(o=this.state.caches[e])||void 0===o?void 0:o.hasUnsavedChanges)!==t&&this.setState({caches:{...this.state.caches,[e]:{...this.state.caches[e],hasUnsavedChanges:t}}})}clearCache(e){var t;const o={...this.state.caches};null===(t=o[e])||void 0===t||t.inMemoryRecordCache.clearCache(),o[e].hasUnsavedChanges=!1,this.setState({caches:o})}expire(e){var t;const o={...this.state.caches};null===(t=o[e])||void 0===t||t.inMemoryRecordCache.expire(),delete o[e],this.setState({caches:o})}doesAnyCacheHaveUnsavedChanges(){return(0,o(696459).qP)(this.state.caches).some((e=>{let[t,o]=e;return o.hasUnsavedChanges}))}}const i=new n},688381:(e,t,o)=>{o.d(t,{Z:()=>r});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624);class n extends(()=>o(263184))().default{getInitialState(){return{openModals:new Set}}}const i=new n,r=i;(0,o(947115).exposeDebugValue)("GlobalModalStore",i)},369320:(e,t,o)=>{o.d(t,{Z:()=>a});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(228244);var n=()=>o(104088);class i extends(()=>o(263184))().default{getInitialState(){return{openPopups:new Set,namedOpenPopups:new Set}}hasOpenPopups(){const{openPopups:e,namedOpenPopups:t}=this.getState();return e.size>0||t.size>0}hasOpenMobileSlideUps(){const{openPopups:e,namedOpenPopups:t}=this.getState();if(t.size>0)return!0;for(const o of e){if(o.current.hidesMobileNativeBottomBar)return!0;if((o.current.popupType===n().k.SlideUp||o.current.popupType===n().k.BottomSheet)&&!o.current.preventSlideUpTransition)return!0}return!1}hasOpenMouseCapturePopup(){const{openPopups:e}=this.state;return e.size>0&&Array.from(e.values()).some((e=>!e.current.disableMouseCapture))}closeAll(){for(const o of this.state.openPopups){var e,t;null===(e=(t=o.current).onDismiss)||void 0===e||e.call(t,null)}}addNamedPopup(e){this.state.namedOpenPopups.add(e),this.emit()}removeNamedPopup(e){this.state.namedOpenPopups.delete(e),this.emit()}}const r=new i;(0,o(947115).exposeDebugValue)("GlobalPopupStore",r);const a=r},63317:(e,t,o)=>{o.d(t,{Z:()=>r});o(241792);class n extends(()=>o(263184))().default{getInitialState(){return{recentPages:new Map,initialized:!1,numDaysForLazyLoading:void 0,recentPageRefreshTimer:void 0,recentPageRefreshIntervalTimer:void 0,userPageVisitListenerReference:void 0}}getIsInitialized(){return this.state.initialized}cleanup(e){this.update((t=>(t.userPageVisitListenerReference&&(o(635596).ZP.removeListener(t.userPageVisitListenerReference,e),t.userPageVisitListenerReference=void 0),t.recentPageRefreshTimer&&(clearTimeout(this.state.recentPageRefreshTimer),t.recentPageRefreshTimer=void 0),t.recentPageRefreshIntervalTimer&&(clearInterval(this.state.recentPageRefreshIntervalTimer),t.recentPageRefreshIntervalTimer=void 0),t)))}getRecentPagesWithStores(e,t){const n=o(876822).default.state.currentSpaceStore;return n?t.map((t=>({...t,store:o(826955).G.createChildStore(n.getPagesStore(),{table:o(396136).iU,id:t.pageId,spaceId:e})}))):[]}set(e,t){const o=this.getRecentPagesWithStores(e,t);this.update((t=>(t.recentPages.set(e,o),t.initialized=!0,t))),this.emit()}get(e){return this.state.recentPages.get(e)}getWithoutSubscribing(e){return o(504008).Z.withListenerIgnored((()=>this.get(e)))||[]}}const i=new n;(0,o(947115).exposeDebugValue)("globalRecentPagesStore",i);const r=i},201696:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1}}}const i=new n},862059:(e,t,o)=>{o.d(t,{default:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{loading:!1,areAccountsFetched:!1,accountsResponse:{accounts:[]}}}}const i=new n},487985:(e,t,o)=>{o.d(t,{googleDriveConnectionStore:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{screenToShow:"none",availableSyncControlOptions:[],syncControlSelection:void 0,initialSyncState:"none",isDisconnecting:!1,isEditing:!1,sessionId:o(956057).Il(),analyticsFrom:"unknown",syncProgress:"not_started",syncCurrent:0,syncTotal:0,ingestionProgress:void 0,connectedSpaceId:""}}}const i=new n},976973:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1,stage:"landing"}}open(){this.setState({open:!0,stage:"landing"})}close(){this.setState({open:!1,stage:"landing"})}}const i=new n},890881:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o(529048).Z.createValue({open:!1},{})},872430:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{recentlyUsedColors:[...o(504008).Z.withListenerIgnored((()=>o(694419).Z.getState()||["yellow_background"]))]}}getMostRecentlyUsedColor(){return(0,o(349220).T)(this.state.recentlyUsedColors.length>0,"No recently used colors"),this.state.recentlyUsedColors[0]}}const i=new n},727475:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1}}}const i=new n},202842:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{isPinned:!1}}}const i=new n},885610:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{}}}const i=new n},424817:(e,t,o)=>{o.d(t,{Z:()=>r});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(30005);var n=()=>o(520849);class i extends(()=>o(263184))().default{getInitialState(){return{capturingAreas:new Set}}getPreventScrollType(){let e=!1,t=!1,o=!1;return this.state.capturingAreas.forEach((i=>{i.preventType===n().Z.All?e=!0:i.preventType===n().Z.X?t=!0:i.preventType===n().Z.Y&&(o=!0)})),e||t&&o?n().Z.All:t?n().Z.X:o?n().Z.Y:n().Z.None}}const r=new i},235453:(e,t,o)=>{o.d(t,{Z:()=>s});var n=()=>o(135596),i=()=>o(721118);const r={open:!0,isImageLoaded:!1,saveButtonLoading:!1,imageRef:void 0,fixedAspectSelection:void 0,aspectSelectionFlipped:!1,outerContainerSize:void 0,innerContainerSize:void 0};class a extends(()=>o(263184))().default{getInitialState(){return{open:!1}}openModal(e){const{originalSource:t,blockStore:o}=e,a="uploading"===i().Z.getStatus(o.id)&&i().Z.getMetadataByBlockId(o.id)||{...n().Wm,...o.getImageEditMetadata()};this.setState({...r,blockStore:o,originalSource:t,editMetadata:a,cropAspect:"Circle"===a.mask?1:void 0})}setSaveButtonLoading(e){this.state.open&&this.setState({...this.state,saveButtonLoading:e})}closeModal(e){var t;null==e||null===(t=e.onClose)||void 0===t||t.call(e),this.setState({open:!1})}getEditMetadata(){return this.state.open&&this.state.editMetadata||n().Wm}getIsImageLoaded(){return!!this.state.open&&this.state.isImageLoaded}setIsImageLoaded(e){this.state.open&&this.setState({...this.state,isImageLoaded:!0,imageRef:e})}setCrop(e){if(this.state.open){const t={...this.state.editMetadata,crop:e};this.setState({...this.state,editMetadata:t})}}setMask(e){if(this.state.open)switch(this.setState({...this.state,fixedAspectSelection:void 0,aspectSelectionFlipped:!1}),e){case"None":return void this.setFreeform();case"Circle":return void this.setCircleMask();default:(0,o(696459).t1)(e)}}async setFixedAspectRatio(e,t){if(!this.state.open)return;const{width:o,height:i}=n().V3[e],r=t?i/o:o/i,a=this.state.editMetadata,s=await this.getAspectCrop(a,r);s&&this.setState({...this.state,cropAspect:r,editMetadata:{...a,crop:s,mask:"None"},fixedAspectSelection:e,aspectSelectionFlipped:t})}setFreeform(){if(!this.state.open)return;const e=this.state.editMetadata;this.setState({...this.state,cropAspect:void 0,editMetadata:{...e,mask:"None"}})}async setCircleMask(){if(!this.state.open)return;const e=this.state.editMetadata,t=await this.getAspectCrop(e,1);t&&this.setState({...this.state,cropAspect:1,editMetadata:{crop:t,mask:"Circle"}})}async getAspectCrop(e,t){if(this.state.open){var n;const i=null===(n=this.state.imageRef)||void 0===n?void 0:n.current,r=null==e?void 0:e.crop;if(!i||!r)return;const{makeAspectCrop:a}=await o(657206).J.load();return a(r,t,i.width,i.height)}}resetCrop(){this.state.open&&(this.setCrop(n().Wm.crop),this.setMask(n().Wm.mask))}}const s=new a},721118:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{images:{}}}getMetadataByBlockId(e){if(!this.hasKey(e))return;return this.state.images[e].editMetadata}setStatusPending(e,t){const o={editMetadata:t,editStatus:"pending"};this.setState({images:{...this.state.images,[e]:o}})}getStatus(e){if(!this.hasKey(e))return"completed";return this.state.images[e].editStatus}setStatusDrawing(e){if(!this.hasKey(e))return;const t={...this.state.images[e],editStatus:"drawing"};this.setState({images:{...this.state.images,[e]:t}})}setStatusUploading(e,t){if(!this.hasKey(e))return;const o={...this.state.images[e],editStatus:"uploading",dataURL:t};this.setState({images:{...this.state.images,[e]:o}})}setStatusCompleted(e,t){if(!this.hasKey(e))return;const o=this.state.images[e];if("uploading"!==o.editStatus)return;const n={...o,editStatus:"completed",secureFileURL:t};this.setState({images:{...this.state.images,[e]:n}})}setStatusError(e){if(!this.hasKey(e))return!1;const t={...this.state.images[e],editStatus:"error"};this.setState({images:{...this.state.images,[e]:t}})}getDataURL(e){if(!this.hasKey(e))return;const t=this.state.images[e];return"uploading"===t.editStatus||"completed"===t.editStatus?t.dataURL:void 0}getSecureFileURL(e){if(!this.hasKey(e))return;const t=this.state.images[e];return"completed"===t.editStatus?t.secureFileURL:void 0}hasKey(e){return this.state.images.hasOwnProperty(e)}}const i=new n},596658:(e,t,o)=>{o.d(t,{H:()=>i});var n=()=>o(245015);class i{static getNumber(e){const t=n().Z.get(e);if("number"==typeof t&&!isNaN(t))return t}static getLatest(){return this.getNumber(this.LAST_TIMEOUT_STORAGE_KEY)}static trackPersistently(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();n().Z.set(this.LAST_TIMEOUT_STORAGE_KEY,e);const t=this.getTotal()??0;n().Z.set(this.TOTAL_TIMEOUTS_STORAGE_KEY,t+1)}static getTotal(){return this.getNumber(this.TOTAL_TIMEOUTS_STORAGE_KEY)}static clear(){n().Z.remove(this.LAST_TIMEOUT_STORAGE_KEY),n().Z.remove(this.TOTAL_TIMEOUTS_STORAGE_KEY)}static hasOccurredRecently(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();const t=this.getLatest();return"number"==typeof t&&e-t<this.RECENT_TIME_WINDOW_MS}}i.LAST_TIMEOUT_STORAGE_KEY="latestNotionTransactionTimeout",i.TOTAL_TIMEOUTS_STORAGE_KEY="totalNotionTransactionTimeouts",i.RECENT_TIME_WINDOW_MS=7*o(326966).A0,(0,o(947115).exposeDebugValue)("IndexedDBTimeoutTracker",i)},995951:(e,t,o)=>{o.d(t,{D:()=>f});o(267602),o(241792),o(228244);var n,i=()=>o(799891),r=()=>o(680146),a=()=>o(513670),s=()=>o(792409),l=()=>o(839002),c=()=>o(326966),d=()=>o(826480),u=()=>o(907501),p=()=>o(804217),m=()=>o(764189);class f{constructor(e){this.debug=!1,this.shouldStopLooping=!1,this.attemptedToClaimSessions=!1,this.isProcessingTask=!1,this.lastTaskTimestamp=0,this.events=new(o(871663).Z),this.waiter=void 0,this.transactionBackoffController=new(o(790620).h)(o(601322)._W),this.retryReasonCounters={_total:0},this.errorCounts={},this.startTime=Date.now(),this.disableStorageManagerEstimate=!1,this.dependencies=void 0,this.transactionStore=void 0,this.sessionId=void 0,this.debugLogger=void 0,this.enableHeartbeatTimeout=void 0;const{dependencies:t,transactionStore:n,sessionId:r,debugLogger:a,enableHeartbeatTimeout:s}=e;this.dependencies=t,this.transactionStore=n,this.sessionId=r,this.debugLogger=a,this.enableHeartbeatTimeout=s,i().clientLogglyEnvironmentData.idbSessionId=this.sessionId,this.disableStorageManagerEstimate=o(749826).default.checkGate({gateName:"disable_storage_manager_estimate",disableExposureLogging:!0}),this.debugLogger.log({level:"debug",from:"IndexedDBTransactionQueue",type:"createdIndexedDBTransactionQueue",data:{sessionId:this.sessionId}})}startLoop(){setTimeout((()=>{this.heartbeatLoop()}),1),setTimeout((()=>{this.txLoop()}),1),setTimeout((()=>{this.healthcheckLoop()}),1)}stopLoop(){this.debugLogger.log({level:"debug",from:"IndexedDBTransactionQueue",type:"stopLoop",data:{message:"Stopping loop."}}),this.shouldStopLooping=!0}hasAttemptedToClaimSessions(){return this.attemptedToClaimSessions}logEmptyTaskForDebugging(e){this.debugLogger.log({level:"debug",from:"IndexedDBTransactionQueue",type:"logEmptyTaskForDebugging",data:{message:`Task created by ${e} was empty.`}})}async enqueueTask(e){const t=await this.transactionStore.saveTask(this.sessionId,e,this.getIndexedDBTimeoutMs());if(this.lastTaskTimestamp=Math.max(e.timestamp,this.lastTaskTimestamp),t.error)throw this.incrementErrors(t.error,"enqueueTask"),this.debugLogger.flush(),i().log({level:"error",from:"IndexedDBTransactionQueue",type:"enqueueTask",error:(0,s().Ui)(t.error)}),t.error;this.clearErrors("enqueueTask"),this.getWaitable(!1).trigger()}unpause(){this.transactionBackoffController.reset(),this.getWaitable(!1).trigger()}pause(){}getLastTaskTimestamp(){return this.lastTaskTimestamp}hasTasks(){return!!this.transactionStore&&this.transactionStore.hasTasks()}async hasTasksForUser(e){const t=await this.transactionStore.hasTasksForUser(e,this.getIndexedDBTimeoutMs());return t.error?(this.debugLogger.flush(),i().log({level:"error",from:"IndexedDBTransactionQueue",type:"IndexedDBTransactionStore.hasTasksForUser",error:(0,s().Ui)(t.error)}),!1):t.value}async anySessionHasTasks(){const e=await this.transactionStore.anySessionHasTasks(this.getIndexedDBTimeoutMs());return e.error?(this.debugLogger.flush(),i().log({level:"error",from:"IndexedDBTransactionQueue",type:"IndexedDBTransactionStore.anySessionHasTasks",error:(0,s().Ui)(e.error)}),!1):e.value}async drain(){return this.hasTasks()||this.isProcessingTask?new Promise((e=>{this.events.addOnceListener("drain",e)})):void 0}async awaitRecordTransaction(e){this.isPendingTransactionForRecord(e)&&await this.drain()}isPendingTransactionForRecord(e){return this.hasTask((t=>t.operations.some((t=>(0,o(827370).qo)(t.pointer,e)))))}async reset(){await this.transactionStore.reset()}async clearForUser(e){await this.transactionStore.clearTasksForUser(e)}async checkObjectStores(){return await this.transactionStore.checkObjectStores()}async getTotalNumberOfTasks(){const e=await this.transactionStore.getTotalNumberOfTasks(this.getIndexedDBTimeoutMs());return e.error?(i().log({level:"error",from:"IndexedDBTransactionQueue",type:"getTotalNumberOfTasks",error:(0,s().Ui)(e.error)}),0):e.value}startSyncing(){p().default.setState({...p().default.state,syncing:!0})}updateDependencies(e){this.dependencies=e}DEV_ONLY_deadlockDb(e){return this.transactionStore.DEV_ONLY_deadlockDb(e)}debugLog(){if(this.debug){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];console.log("IndexedDBTransactionQueue:",...t)}}async wait(e,t){await this.getWaitable(!1).wait(e,t),this.getWaitable(!0)}async txLoop(){for(;!this.shouldStopLooping;)try{await this.txLoopIteration(),this.clearErrors("txLoop")}catch(e){this.incrementErrors(e,"txLoop"),(0,u().Os)(this.retryReasonCounters,"txLoopException"),this.debugLogger.flush(),i().log({level:"error",from:"IndexedDBTransactionQueue",type:"txLoopIteration",error:(0,s().Ui)(e)}),r().IE(e),await l().Vs(15e3)}}async txLoopIteration(){const e=await this.getTasks();if(!e)return this.events.emit("drain"),void(await this.wait(...this.getMinMaxLoopDelay(!1)));const{tasks:t,sessionId:o}=e;if(0===t.length){const e=await this.transactionStore.deleteSession({currentSessionId:this.sessionId,sessionId:o});return void(e.error&&(this.debugLogger.flush(),i().log({level:"error",from:"IndexedDBTransactionQueue",type:"IndexedDBTransactionStore.deleteSession",data:{sessionId:o},error:(0,s().Ui)(e.error)})))}this.startSyncing(),this.debugLogger.log({level:"debug",from:"IndexedDBTransactionQueue",type:"handleSubmitTransactionAttempt",data:{message:`for session ${o}: attempt submitTransaction with ${t.length} tasks`,sessionId:o,taskIds:g(t)}}),await this.useSaveTransactionsApi(t,o);const n=this.hasTasks();n||(this.doneSyncing(),this.events.emit("drain")),await this.wait(...this.getMinMaxLoopDelay(n))}getMinMaxLoopDelay(e){return Boolean(e)?[u().V_,u().V_]:[u().V_,u().Ud]}async useSaveTransactionsApi(e,t){const o=await this.dependencies.handleSaveTransactions(e);if(o.error){const{savedTasks:e,failedTasks:n,message:r,retryDelay:a,retryReason:l}=o.error;l?(0,u().Os)(this.retryReasonCounters,l):this.retryReasonCounters={_total:0},e.length>0&&(this.debugLogger.log({level:"debug",from:"IndexedDBTransactionQueue",type:"handlePartialSaveTransactionsSuccess",data:{message:`for session ${t}: will delete ${e.length} saved tasks`,taskIds:g(e),sessionId:t}}),await this.cleanupTasks(e,void 0)),n.length>0?(this.debugLogger.flush(),i().log({level:"warning",from:"IndexedDBTransactionQueue",type:"handleSaveTransactionsError",data:{message:`for session ${t}: ${r}`,taskIds:g(n),sessionId:t},error:(0,s().Ui)(o.error)}),await this.cleanupTasks(n,o.error)):this.debugLogger.log({level:"debug",from:"IndexedDBTransactionQueue",type:"handleSaveTransactionsRetryableError",data:{message:`for session ${t}: ${r}`,sessionId:t}}),a>0?await this.transactionBackoffController.backOffOnFailure(a-u().V_,o.error.retryReason):this.transactionBackoffController.reset()}else{const e=o.value;this.retryReasonCounters={_total:0},this.debugLogger.log({level:"debug",from:"IndexedDBTransactionQueue",type:"handleSaveTransactionsSuccess",data:{message:`for session ${t}: will delete ${e.length} saved tasks`,taskIds:g(e),sessionId:t}}),await this.cleanupTasks(e,void 0),this.transactionBackoffController.reset()}}incrementErrors(e,t){this.debugLog("incrementErrors",e,t),void 0===this.errorCounts[t]?this.errorCounts[t]=1:this.errorCounts[t]+=1;const o=a().Fp(Object.values(this.errorCounts))||0;this.errorCounts[t]===f.maxErrors+1&&(this.debugLogger.flush(),i().log({level:"error",from:"IndexedDBTransactionQueue",type:`maxErrors.${t}`,error:(0,s().Ui)(e)})),o>f.maxErrors&&m().default.setState({...m().default.state,transactionQueueError:e}),e.type===d().vZ&&this.events.emit("timeout")}clearErrors(e){this.errorCounts[e]&&delete this.errorCounts[e];(a().Fp(Object.values(this.errorCounts))||0)<=f.maxErrors&&void 0!==m().default.state.transactionQueueError&&m().default.setState({...m().default.state,transactionQueueError:void 0})}async heartbeatLoop(){for(;!this.shouldStopLooping;)try{await this.heartbeat(),await l().Vs(f.heartbeatInterval)}catch(e){this.debugLogger.flush(),i().log({level:"error",from:"IndexedDBTransactionQueue",type:"heartbeatLoopIteration",error:(0,s().Ui)(e)}),await l().Vs(f.heartbeatInterval)}}async heartbeat(){const e=this.enableHeartbeatTimeout?this.getIndexedDBTimeoutMs():void 0;{this.debugLog("heartbeat");const t=await this.transactionStore.heartbeat({currentSessionId:this.sessionId,isActive:!0,timeoutMs:e});if(t.error)return this.debugLogger.flush(),i().log({level:"error",from:"IndexedDBTransactionQueue",type:"IndexedDBTransactionStore.heartbeat",error:(0,s().Ui)(t.error)}),void this.incrementErrors(t.error,"heartbeat");this.clearErrors("heartbeat")}{const t=Date.now()-f.claimSessionDelay,o=await this.transactionStore.claimSessions({currentSessionId:this.sessionId,staleSessionTimeoutMs:t,transactionTimeoutMs:e});if(o.error)return this.debugLogger.flush(),i().log({level:"error",from:"IndexedDBTransactionQueue",type:"IndexedDBTransactionStore.claimSessions",error:(0,s().Ui)(o.error)}),void(o.error.type===d().vZ&&this.incrementErrors(o.error,"claimSessions"));this.clearErrors("claimSessions"),this.attemptedToClaimSessions=!0}this.checkStorageQuota()}async checkStorageQuota(){if(this.disableStorageManagerEstimate)return;const e=await(0,o(506348).sK)();e&&(i().clientLogglyEnvironmentData.storageQuotaEstimate=e.quota,i().clientLogglyEnvironmentData.storageUsageEstimate=e.usage,(0,o(632314).Z)(m().default.state.storageUsageEstimate,e)||m().default.setState({...m().default.state,storageUsageEstimate:e}))}doneSyncing(){p().default.setState({...p().default.state,syncing:!1})}hasTask(e){return this.transactionStore.hasTask(e)}async getTasks(){const e=await this.transactionStore.getTasks(this.sessionId,!0);if(e.error)throw e.error;return e.value}async cleanupTasks(e,t){for(const r of e)if(r.callback)try{r.callback(t)}catch(n){this.debugLogger.flush(),i().log({level:"error",from:"IndexedDBTransactionQueue",type:"cleanupTask",data:{taskId:r.id},error:(0,s().Ui)(n)})}const o=await this.transactionStore.deleteTasks(e);o.error&&(this.debugLogger.flush(),i().log({level:"error",from:"IndexedDBTransactionQueue",type:"IndexedDBTransactionStore.deleteTasks",error:(0,s().Ui)(o.error)}))}getWaitable(e){return this.waiter&&!e||(this.waiter=new(l().a6)),this.waiter}async healthcheckLoop(){for(;!this.shouldStopLooping;){try{var e;const t=await this.transactionStore.getTotalNumberOfTasks(f.defaultIndexedDBTimeoutMs),o={queue_type:"IndexedDBTransactionQueue",uptime:Date.now()-this.startTime,queue_size:t.error?void 0:t.value,error_type:null===(e=t.error)||void 0===e?void 0:e.type,is_considered_online:p().default.state.online,retry_reasons:this.retryReasonCounters};(o.queue_size&&o.queue_size>f.transactionSizeHealthcheckThreshold||o.error_type)&&(this.debugLogger.flush(),i().log({level:"info",from:"IndexedDBTransactionQueue",type:"transactionSizeHealthcheck",data:{miscDataToConvertToString:o}}),this.dependencies.handleHealthcheck(o))}catch(t){this.debugLogger.flush(),i().log({level:"error",from:"IndexedDBTransactionQueue",type:"healthcheckLoopIteration",error:(0,s().Ui)(t)}),r().IE(t)}await l().Vs(f.healthcheckInterval)}}getIndexedDBTimeoutMs(){return f.defaultIndexedDBTimeoutMs}}function g(e){return e.map((e=>{var t;return null!==(t=e.debug)&&void 0!==t&&t.userAction?`${e.id} (${e.debug.userAction})`:e.id}))}n=f,f.heartbeatInterval=2.5*c().C0,f.claimSessionDelay=5*n.heartbeatInterval,f.healthcheckInterval=15*c().hM,f.transactionSizeHealthcheckThreshold=1e3,f.defaultIndexedDBTimeoutMs=180*c().C0,f.maxErrors=5},686621:(e,t,o)=>{o.d(t,{Z:()=>i});var n=()=>o(995951);class i{constructor(e,t){this.activeQueue=void 0,this.inMemoryTransactionQueue=void 0,this.handleIndexedDbTimeout=()=>{const e=(0,o(349220).R9)(this.activeQueue,n().D,'Expected "IndexedDBTransactionQueue"');e.hasTasks()||(e.stopLoop(),e.events.removeListener("timeout",this.handleIndexedDbTimeout),o(764189).default.reset(),this.inMemoryTransactionQueue.startLoop(),this.activeQueue=this.inMemoryTransactionQueue,o(799891).log({level:"warning",from:"IndexedDBWithInMemoryFallbackTransactionQueue",type:"handleIndexedDbTimeout",data:{message:"IndexedDB timeout occurred while the transaction queue is empty. Switching over to InMemoryTransactionQueue."}}))},this.activeQueue=e,this.inMemoryTransactionQueue=t,e.events.addListener("timeout",this.handleIndexedDbTimeout)}startLoop(){this.activeQueue.startLoop()}logEmptyTaskForDebugging(e){var t,o;null===(t=(o=this.activeQueue).logEmptyTaskForDebugging)||void 0===t||t.call(o,e)}enqueueTask(e){return this.activeQueue.enqueueTask(e)}unpause(){this.activeQueue.unpause()}pause(){this.activeQueue.pause()}getLastTaskTimestamp(){return this.activeQueue.getLastTaskTimestamp()}hasTasks(){return this.activeQueue.hasTasks()}anySessionHasTasks(){return this.activeQueue.anySessionHasTasks()}getTotalNumberOfTasks(){return this.activeQueue.getTotalNumberOfTasks()}hasTasksForUser(e){return this.activeQueue.hasTasksForUser(e)}drain(){return this.activeQueue.drain()}awaitRecordTransaction(e){return this.activeQueue.awaitRecordTransaction(e)}isPendingTransactionForRecord(e){return this.activeQueue.isPendingTransactionForRecord(e)}reset(){return this.activeQueue.reset()}clearForUser(e){return this.activeQueue.clearForUser(e)}updateDependencies(e){this.activeQueue.updateDependencies(e),this.inMemoryTransactionQueue!==this.activeQueue&&this.inMemoryTransactionQueue.updateDependencies(e)}getIndexedDBTransactionQueue(){if(this.activeQueue instanceof n().D)return this.activeQueue}}},160904:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{focused:!1}}}const i=n},788206:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1}}}const i=new n},257934:(e,t,o)=>{o.d(t,{KU:()=>i,ZP:()=>a,fZ:()=>n});o(267602),o(916054);function n(e){return"existingUser"===e.type}function i(e){return"newUser"===e.type&&"email"!==e.source}class r extends(()=>o(263184))().default{getInitialState(){return{tokenQuery:"",inviteTargets:[]}}}const a=r},111124:(e,t,o)=>{o.d(t,{Z:()=>r});class n extends(()=>o(263184))().default{getInitialState(){}}const i=new n;(0,o(947115).exposeDebugValue)("ItemHoverStore",i);const r=i},25694:(e,t,o)=>{o.d(t,{jiraAIConnectionStore:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{screenToShow:"none",analyticsFrom:"unknown",sessionId:o(956057).Il(),jiraSiteId:"",jiraSiteUrl:"",jiraSyncState:"not_started",jiraSyncProgress:0,syncControl:{exclusionList:[],inclusionList:[],createdAt:Date.now(),updatedAt:Date.now()},isDisconnecting:!1}}}const i=new n},308939:(e,t,o)=>{o.d(t,{LT:()=>n,P:()=>i,ZP:()=>s});let n=function(e){return e.Cloud="Cloud",e.DataCenter="DataCenter",e}({}),i=function(e){return e.Basic="Basic",e.Bearer="Bearer",e}({});class r extends(()=>o(263184))().default{getInitialState(){return{open:!1,loading:!1,adminTokenError:!1,site:void 0,flowId:void 0,botId:void 0,defaultExternalCollectionSetting:void 0,spaceId:void 0,teamSpaceId:void 0,projectKeys:[],instanceValue:n.Cloud,isMemberAuthSuccessForDataCenter:!1,authenticationType:i.Bearer,notionState:void 0}}createNewFlowId(){const e=(0,o(956057).Il)();return this.setState({...this.state,flowId:e}),e}getFlowId(){return this.state.flowId?this.state.flowId:this.createNewFlowId()}}const a=new r,s=a;(0,o(947115).exposeDebugValue)("jiraImportStore",a)},475335:(e,t,o)=>{o.d(t,{default:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{isEnabled:!0,isKeyboardMode:!1}}setEnabled(e){this.setState({...this.state,isEnabled:e})}setKeyboardMode(e){this.state.isEnabled&&this.setState({isEnabled:!0,isKeyboardMode:e})}}const i=new n},385185:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1,type:"text"}}}const i=new n},132329:(e,t,o)=>{o.d(t,{default:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{limitParents:new WeakMap}}setLimitParents(e,t){this.state.limitParents.set(e,t),this.emit()}removeLimitParents(e){this.state.limitParents.delete(e),this.emit()}}const i=new n},105381:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1}}}const i=new n},527135:(e,t,o)=>{o.d(t,{Z:()=>i});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624);class n extends(()=>o(263184))().default{getInitialState(){return{}}getEditedBlocksForCollection(e){const t=this.state[e];if(t)return t;{const t=new Set;return this.state[e]=t,t}}setEditedBlock(e,t){this.getEditedBlocksForCollection(e).add(t),this.emit()}}const i=new n},485014:(e,t,o)=>{o.d(t,{Z:()=>r});class n extends(()=>o(263184))().default{getInitialState(){return{elector:void 0,broadcastChannel:void 0,localSearchableBlocksCache:void 0,version:void 0}}}const i=new n;(0,o(947115).exposeDebugValue)("localSearchablePagesStore",i);const r=i},436614:(e,t,o)=>{o.d(t,{Aw:()=>a,BR:()=>n,GR:()=>i,KP:()=>r,R7:()=>f,TI:()=>p,XI:()=>u,a9:()=>s,ii:()=>c,nu:()=>d,uY:()=>m,xj:()=>l,yj:()=>g,yl:()=>h});const n="teamColumn",i="ownersColumn",r="AccessLevelColumn",a="lastUpdatedColumn",s="contextMenuColumn",l=[n,r,a],c="filterAccessAny",d="filterAccessOnlyOpen",u="filterAccessOnlyClosed",p="filterAccessOnlyPrivate",m="filterOwnerAny",f="filterOwnerShowOrphaned",g="filterOwnerById";class v extends(()=>o(263184))().default{getInitialState(){return{searchQuery:"",sortColumn:a,sortAscending:!1,showOnlyArchivedTeams:!1,filterByOwner:{type:m},filterAccess:c,showTeamsWithSecurityOverrides:!1}}}const h=new v},785738:(e,t,o)=>{o.d(t,{h:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{blockStoreMode:{},siteTemplateStatus:{}}}getStateForBlock(e){if(e in this.state.blockStoreMode)return this.state.blockStoreMode[e]}setStateForBlock(e,t){this.update((o=>({...o,blockStoreMode:{...o.blockStoreMode,[e]:t}})))}setSiteTemplateStatus(e,t){this.update((o=>({...o,siteTemplateStatus:{[e]:t}})))}isTemplateListing(e){var t;return(null===(t=this.state.siteTemplateStatus[e])||void 0===t?void 0:t.templateListingExists)??!1}clearStateForBlock(e){e in this.state.blockStoreMode&&(delete this.state.blockStoreMode[e],this.emit())}}const i=new n;(0,o(947115).exposeDebugValue)("MarketplaceTemplateStore",i)},145702:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{isActive:!1}}}const i=new n},543842:(e,t,o)=>{o.d(t,{K:()=>i,Z:()=>a});var n=()=>o(853648);const i=["date","user","page","team","group","heading","bot","formula","custom-formula","createPage"];class r extends(()=>o(263184))().default{getInitialState(){return{open:!1,sessionId:void 0,userRequestStore:new(n().Z),botRequestStore:new(n().Z),pageRequestStore:new(n().Z),localPageRequestStore:new(n().Z),emptyQueryUserRequestStore:new(n().Z),mentionTypes:{page:!1,heading:!1,createPage:!1,user:!1,inviteUserToWorkspace:!1,inviteUserToPage:!1,bot:!1,date:!1,reminder:!1,templateVariable:!1,group:!1,team:!1,formulaContextVariable:!1}}}updateOpenState(e){const t=this.state;t.open&&this.setState({...t,...e})}getMentionMenuContext(){const e=this.state;if(e.open)return e.textStore.table===o(396136).iU?"block":"comment"}getInviteOrigin(){return"comment"===this.getMentionMenuContext()?"comment_mention":"inline_mention"}getIsMockText(){var e;const t=this.state;return t.open&&(null===(e=t.textStore)||void 0===e?void 0:e.inMemoryRecordCache.isMockTextStore)}}const a=new r},150356:(e,t,o)=>{o.d(t,{default:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{numServerRequests:0,numLocalRequests:0}}}const i=new n},692304:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{focus:{section:void 0,indexLocal:void 0,indexGlobal:void 0,footerFocused:!1,isInitialized:!1}}}setState(e){super.setState({...e,focus:{...e.focus,isInitialized:!0}})}update(e){this.setState(e({...this.state}))}unsetFocus(){this.setState({...this.state,focus:{section:void 0,indexLocal:void 0,indexGlobal:void 0,footerFocused:!1}})}}const i=n},378698:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{isConnected:!1,numConnectionAttempts:1}}}const i=new n},147542:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{surface:"default",position:"sidebar",query:"",isOpen:!1,isNewElectronTab:!1,openedTimeMs:void 0,sessionId:void 0,previousTextSelection:void 0}}closeAndResetMetricsState(){this.update((e=>({...e,isOpen:!1,openedTimeMs:void 0,sessionId:void 0})))}}const i=new n},302353:(e,t,o)=>{o.d(t,{default:()=>s,i:()=>r});var n=()=>o(513670),i=()=>o(297861);let r=function(e){return e[e.willHide=0]="willHide",e[e.hidden=1]="hidden",e[e.willShow=2]="willShow",e[e.shown=3]="shown",e}({});class a extends(()=>o(263184))().default{constructor(){super(...arguments),this.updateKeyboardPhaseDebounced300=n().Ds(((e,t)=>{this.setState({...this.state,phase:e,estimatedKeyboardWebViewOverlap:t})}),300),this.updateKeyboardPhaseDebounced150=n().Ds(((e,t)=>{this.setState({...this.state,phase:e,estimatedKeyboardWebViewOverlap:t})}),150),this.updateKeyboardPhase=(e,t,n)=>{const{device:r,RouterStore:a}=e;if(!(0,i().Y)("supportsAlwaysMultiTextSelectionBehavior")){const e="page"===a.state.route.name,i=r.isAndroid&&r.isMobileNative,s="editing"===o(127519).default.state.mode;if(e&&i&&!s)return void this.updateKeyboardPhaseDebounced300(t,n)}if((0,i().Y)("supportsDebouncingKeyboardDuringOnboarding")){const e="onboarding"===a.state.route.name,o=r.isIOS&&r.isMobileNative;if(e&&o)return void this.updateKeyboardPhaseDebounced150(t,n)}this.setState({...this.state,phase:t,estimatedKeyboardWebViewOverlap:n})},this.updateKeyboardConfig=(e,t)=>{this.update((o=>({...o,packageName:e,activeLocale:t})))},this.keyboardHeight=()=>this.state.estimatedKeyboardWebViewOverlap,this.mobileNativeBottomPadding=e=>{const t=(0,i().Y)("supportsFixedSizeWebView")?this.state.estimatedKeyboardWebViewOverlap:0;if(t>0)return t;const{WindowSizeStore:n,TabbedRouterStore:r}=e;let a=0;if((0,i().Y)("supportsNativeBottomBarOverlappingWebView")){const t=(0,o(429102).n)(e),n=r.state.modal.length>0;t&&!n&&(a=this.state.nativeBottomBarHeight??48)}return n.state.paddingBottom+a}}getInitialState(){return{phase:r.hidden,estimatedKeyboardWebViewOverlap:0,nativeBottomBarHeight:void 0,packageName:void 0,activeLocale:void 0}}async onShow(e){await this.waitUntil((()=>this.state.phase===r.shown)),e()}async onHide(e){await this.waitUntil((()=>this.state.phase===r.hidden)),e()}}const s=new a},253225:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1}}}const i=new n},427779:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1,openAnimationCompleted:!0,closeAnimationCompleted:!0}}}const i=n},698850:(e,t,o)=>{o.d(t,{default:()=>i});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624);class n extends(()=>o(263184))().default{getInitialState(){return{isModalOpen:!1,account:void 0,selectedImportType:"FullImport",workspaces:[],isLoadingProjects:!1,selectedProjectsAndTeamspaces:{},templateCreationInProgress:!1,currentTab:"selectData",loggerPageId:void 0,showAuthPopup:!1,email:void 0,APIToken:void 0,result:void 0,isComplete:!1,selectedWorkspace:void 0,isLoadingMondayWorkspaces:!1,isFetchingMondayAccount:!1,excludeProjectsAndTasks:!1,isLoadingHierarchy:!1,isLoadingBoards:!1,fetchedHierarchy:!1,selectedTeamspacesForFullImport:{},selectedFolderIdsForFullImport:new Set,selectedBoardIdsForFullImport:new Set,mondayFoldersDetailsMap:{},mondayBoardsDetailsMap:{}}}resetImport(){const{account:e,workspaces:t}=this.getState();this.setState({...this.getInitialState(),account:e,workspaces:t})}}const i=new n},897606:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{}}}const i=new n},241449:(e,t,o)=>{o.d(t,{default:()=>a,o:()=>n,r:()=>r});const n=["page","space","team","space-private-pages"];class i extends(()=>o(263184))().default{getInitialState(){return{isOpen:!1,lastPageId:void 0}}getVariant(){if(this.state.isOpen)return this.state.variant}getDatabaseType(){return this.getOverrideDatabaseType()??this.getTargetsDatabaseType()}getOverrideDatabaseType(){if(this.state.isOpen&&"typed"===this.state.variant)return this.state.overrideDatabaseType}getTargetsDatabaseType(){if(this.state.isOpen)return r(this.state.targets)}}function r(e){var t;if(0===e.length)return;const o=null===(t=e[0].getAssociatedCollectionStore())||void 0===t?void 0:t.getDatabaseType();if(o){for(const t of e){var n;if(o!==(null===(n=t.getAssociatedCollectionStore())||void 0===n?void 0:n.getDatabaseType()))return}return o}}const a=new i},148882:(e,t,o)=>{o.r(t),o.d(t,{TEST_ONLY__setTransactionQueue:()=>Q,isIndexedDbGracefulFallbackToInMemoryEnabled:()=>q,setupTransactionQueue:()=>$,transactionQueue:()=>G});o(821057),o(670560),o(267602),o(241792),o(228244);var n=()=>o(799891),i=()=>o(956057),r=()=>o(720866),a=()=>o(513670),s=()=>o(792409),l=()=>o(839002),c=()=>o(326966),d=(o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(30005),()=>o(696459)),u=()=>o(764189),p=()=>o(826480);const m="Transaction",f="bySessionId",g="byTimestamp",v="byId",h="byUserId",_="Session",b="bySessionId",y="byUpdatedAt",S="byOwnerSessionId";const w=45*c().C0;class k{constructor(e,t){this.db=void 0,this.debugLogger=void 0,this.runOptimizedScans=!0,this.activeTasks=new Map,this.ownedSessionIds=new Set,this.db=new(p().pz)(t,"TransactionStore",2,{upgrade(e,t,o,n){if(t<1&&function(e){const t=e.createObjectStore(_,{keyPath:d().MN("index"),autoIncrement:!0});t.createIndex(y,d().MN("updatedAt"),{unique:!1}),t.createIndex(S,d().MN("ownerSessionId"),{unique:!1}),t.createIndex(b,d().MN("sessionId"),{unique:!0});const o=e.createObjectStore(m,{keyPath:d().MN("index"),autoIncrement:!0});o.createIndex(g,d().MN("timestamp"),{unique:!1}),o.createIndex(f,[d().MN("sessionId"),d().MN("timestamp")],{unique:!1}),o.createIndex(v,d().MN("id"),{unique:!0})}(e),t<2){n.objectStore(m).createIndex(h,d().MN("userId"))}}}),this.debugLogger=e,this.runOptimizedScans=!t.device.isEdgeHTML}async DEV_ONLY_deadlockDb(e){throw new Error("This function is only available in development builds.")}async heartbeat(e){const{currentSessionId:t,isActive:o,timeoutMs:i}=e,r=o?[_,m]:[_],a=await this.db.startTransaction({storeNames:r,mode:"readwrite",name:"IndexedDBTransactionStore.heartbeat",timeoutMs:i},(async(e,i)=>{const r=new Set,a=e.objectStore(_);let l=await a.index(S).openCursor(t);i("Obtained session cursor.");let c=0;for(;l;){c+=1;const e=l.value;e.sessionId!==t&&r.add(e.sessionId);const o={...e,updatedAt:Date.now()};l.update(o),l=await l.continue()}if(i(`Finished processing ${c} sessions.`),o){const t=e.objectStore(m).index(v),o=Date.now()-w;i(`Processing ${this.activeTasks.size} active tasks.`),this.activeTasks.forEach((async e=>{if(e.timestamp>=o)return;if(!(await t.get(e.id))){if(e.callback)try{e.callback(void 0)}catch(i){this.debugLogger.flush(),n().log({level:"error",from:"IndexedDBTransactionStore",type:"activeTaskGarbageCollectCleanupError",error:(0,s().Ui)(i)})}this.debugLogger.flush(),n().log({level:"warning",from:"IndexedDBTransactionStore",type:"activeTaskGarbageCollect",data:{miscDataToConvertToString:{task:e,expireTime:o}}}),this.activeTasks.delete(e.id)}}))}return{value:r}}));return a.error?a:(this.ownedSessionIds=a.value,{value:void 0})}async claimSessions(e){const{currentSessionId:t,staleSessionTimeoutMs:o,transactionTimeoutMs:n}=e,i=await this.db.startTransaction({storeNames:[_],mode:"readwrite",name:"IndexedDBTransactionStore.claimSessions",timeoutMs:n},(async(e,n)=>{const i=[],r=e.objectStore(_);let a=await r.index(y).openCursor(IDBKeyRange.upperBound(o));for(n("Obtained session cursor.");a;){const e=a.value,o={...e,ownerSessionId:t,updatedAt:Date.now()};i.push(e.sessionId),n(`Taking ownership of session ${e.sessionId}.`);const r=Date.now()-e.updatedAt;this.debugLogger.log({from:"IndexedDBTransactionStore",level:"debug",type:"claimSession",data:{message:`claimed ${e.sessionId} updated ${r}ms ago`,sessionId:e.sessionId,sinceLastUpdate:r}}),a.update(o),a=await a.continue()}return{value:i}}));if(i.error)return i;for(const r of i.value)this.ownedSessionIds.add(r);return{value:void 0}}getTasks(e,t){return this.db.startTransaction({storeNames:[_,m],mode:"readonly",name:"IndexedDBTransactionStore.getTasks",timeoutMs:void 0},(async(n,i)=>{let r;const a=[],s=n.objectStore(_);let l=await s.index(S).openCursor(e);for(i("Obtained session cursor.");l;){const e=l.value;a.push(e),l=await l.continue()}if(i(`Found ${a.length} owned sessions.`),0===a.length)return{value:void 0};a.sort(((e,t)=>e.index-t.index));const c=a[0].sessionId,d=[];let u=await this.createTransactionCursor(n,c);for(;u;){const e=u.value;(0,o(481529).dj)(e.operations);const t=this.activeTasks.get(e.id);e.sessionId===c&&d.push({...e,callback:t&&t.callback}),u=await u.continue()}return i(`Found ${d.length} tasks.`),r={sessionId:c,tasks:d},t?r.tasks.sort(((e,t)=>e.index&&t.index?e.index-t.index:e.timestamp-t.timestamp)):r.tasks.sort(((e,t)=>e.timestamp-t.timestamp)),{value:r}}))}saveTask(e,t,o){const n={id:t.id,userId:t.userId,spaceId:t.spaceId,sessionId:e,timestamp:t.timestamp,debug:t.debug,operations:t.operations,useSudoMode:t.useSudoMode};return u().default.setOrIncTotal(this.activeTasks.size+1),this.activeTasks.set(n.id,t),this.db.startTransaction({storeNames:[_,m],mode:"readwrite",name:"IndexedDBTransactionStore.saveTask",timeoutMs:o},(async(t,o)=>{const i=t.objectStore(_),a=await i.index(b).get(e);if(o("Obtained session cursor."),!a){const t={sessionId:e,updatedAt:Date.now(),ownerSessionId:e};o(`Adding session ${t.sessionId}.`);try{await i.add(t)}catch(s){throw(0,p().XH)((0,r().t)(s),`session ${t.sessionId}`)}}try{await t.objectStore(m).add(n)}catch(s){throw(0,p().XH)((0,r().t)(s),`task ${n.id}`)}return this.debugLogger.log({from:"IndexedDBTransactionStore",type:"saveTask",level:"debug",data:{message:`create task ${n.id} in ${a?"existing":"NEW"} session ${e}`,sessionId:e,taskId:n.id,isNewSession:!Boolean(a)}}),{value:void 0}}))}async deleteSession(e){const{currentSessionId:t,sessionId:o}=e,n=await this.db.startTransaction({storeNames:[_,m],mode:"readwrite",name:"IndexedDBTransactionStore.deleteSession",timeoutMs:void 0},(async(e,n)=>{let i=await this.createTransactionCursor(e,o);for(n("Obtained transaction cursor.");i;){if(i.value.sessionId===o)return{value:`Attempt to delete non-empty session: has task ${i.value.id}`,abort:!0};i=await i.continue()}const r=e.objectStore(_),a=await r.index(b).get(o);if(!a)return{value:"Session is missing",abort:!0};const s=a;return s.ownerSessionId!==t?{value:`Attempt to delete another tab's session: owned by ${s.ownerSessionId}`,abort:!0}:(r.delete(s.index),{value:void 0})}));return n.error?n:n.value?{error:{type:"LogicalError",message:n.value,userDetails:"Could not perform an operation due to a logical error."}}:{value:void 0}}hasTasks(){return this.activeTasks.size>0||this.ownedSessionIds.size>0}getTotalNumberOfTasks(e){return this.db.startTransaction({storeNames:[m],mode:"readonly",name:"IndexedDBTransactionStore.getTotalNumberOfTasks",timeoutMs:e},(async e=>{const t=e.objectStore(m);return{value:await t.count()}}))}getTotalNumberOfTasksForUser(e,t){return this.db.startTransaction({storeNames:[m],mode:"readonly",name:"IndexedDBTransactionStore.getTotalNumberOfTasksForUser",timeoutMs:t},(async t=>{const o=t.objectStore(m).index(h);return{value:await o.count(e)}}))}async anySessionHasTasks(e){const t=await this.getTotalNumberOfTasks(e);return t.error?t:{value:t.value>0}}async hasTasksForUser(e,t){const o=await this.getTotalNumberOfTasksForUser(e,t);return o.error?o:{value:o.value>0}}hasTask(e){for(const[,t]of this.activeTasks)if(e(t))return!0;return!1}async deleteTasks(e){const t=await this.db.startTransaction({storeNames:[m,_],mode:"readwrite",name:"IndexedDBTransactionStore.deleteTasks",timeoutMs:void 0},(async(t,o)=>{const i=[],r=[],a=new Set,s=t.objectStore(m),l=s.index(v),c=t.objectStore(_);await(0,p().qv)(e.map((0,p().zp)((async e=>{i.push(e.id);const t=await l.openCursor(e.id);if(o(`Obtained transaction cursor for task ${e.id}.`),t){a.add(t.value.sessionId),await t.delete(),o(`Deleted task ${e.id}.`);const n=String(e.id);this.debugLogger.log({from:"IndexedDBTransactionStore",type:"deleteTasksDeleteTask",level:"debug",data:{message:`delete task ${e.id}`,taskId:n}})}else this.debugLogger.flush(),n().log({from:"IndexedDBTransactionStore",type:"deleteTasksTaskNotExist",level:"warning",data:{message:`could not delete task not stored in indexeddb ${e.id}`,taskId:e.id}})}))));const d=s.index(f);return a.forEach((async e=>{let o=0;if(this.runOptimizedScans)o=await d.count(this.getTransactionRange(e));else{let n=await this.createTransactionCursor(t,e);for(;n;){if(n.value.sessionId===e){o++;break}n=await n.continue()}}if(0===o){const t=await c.index(b).openCursor(e);t&&(r.push(t.value.sessionId),t.delete(),this.debugLogger.log({from:"IndexedDBTransactionStore",type:"deleteTasksDeleteSession",level:"debug",data:{message:`delete empty session ${e}`,sessionId:e}}))}})),{value:{deletedTaskIds:i,deletedSessionIds:r}}}));if(t.error)return t;const{deletedTaskIds:o,deletedSessionIds:i}=t.value;for(const n of o)this.activeTasks.delete(n);for(const n of i)this.ownedSessionIds.delete(n);return u().default.updateRemaining(this.activeTasks.size),{value:void 0}}async checkObjectStores(){const e="IndexedDBTransactionStore.checkObjectStores",t=this.db.startTransaction({storeNames:["Session"],mode:"readonly",name:`${e}: read from Session object store`,timeoutMs:void 0},(async()=>Promise.resolve({value:"created IndexedDB transaction"}))),o=this.db.startTransaction({storeNames:["Transaction"],mode:"readonly",name:`${e}: read from Transaction object store`,timeoutMs:void 0},(async()=>Promise.resolve({value:"created IndexedDB transaction"}))),[n,i]=await Promise.all([t,o]);return{session:n,transaction:i}}async reset(){await this.db.reset(),this.activeTasks.clear(),this.ownedSessionIds.clear(),u().default.updateRemaining(0)}async clearTasksForUser(e){const t=await this.db.startTransaction({storeNames:[m],mode:"readwrite",name:"IndexedDBTransactionStore.clearTasksForUser",timeoutMs:void 0},(async(t,o)=>{const n=[],i=t.objectStore(m);let r=await i.index(h).openCursor(IDBKeyRange.only(e));for(o("Obtained transaction cursor.");r;)n.push(r.value.id),await r.delete(),r=await r.continue();return{value:{deletedTaskIds:n}}}));if(t.error)return t;const{deletedTaskIds:o}=t.value;for(const n of o)this.activeTasks.delete(n);u().default.updateRemaining(this.activeTasks.size)}getTransactionRange(e){return IDBKeyRange.bound([e,0],[e,Number.MAX_VALUE],!0,!0)}createTransactionCursor(e,t){const o=e.objectStore("Transaction");return this.runOptimizedScans?o.index(f).openCursor(this.getTransactionRange(t),"next"):o.openCursor()}}var I=()=>o(506348),C=(o(653476),()=>o(871663)),x=()=>o(827370),T=()=>o(680146),M=()=>o(907501),P=()=>o(804217),A=()=>o(601322),R=()=>o(231522),B=()=>o(657387);const E="NativeBackedTransactionQueue";class D{constructor(e,t,o){this.lastTaskTimestamp=0,this.tasks=new Map,this.sessionId="00000000-0000-0000-0000-000000000000",this.events=new(C().Z),this.retryReasonCounters={_total:0},this.startTime=Date.now(),this.debugLogger=new(n().BatchedLogger)({from:E,type:"BulkDebug",level:"info",maxLength:250}),this.connection=e,this.dependencies=t,n().log({from:E,level:"debug",type:"NativeBackedTransactionQueueCreated"}),o.subscribeToUpdateTransactionState((e=>this.updateTransactionState(e)))}async enqueueTask(e){this.lastTaskTimestamp=Math.max(e.timestamp,this.lastTaskTimestamp);const t=0===this.tasks.size;var o;(this.tasks.set(e.id,{...e,sessionId:this.sessionId}),this.hasTooManyOperations(e))&&n().log({from:E,type:"enqueueTask",level:"warning",data:{message:`enqueing task with operation count > ${D.operationCountWarningThreshold}`,sessionId:this.sessionId,taskId:e.id,isNewSession:t,userAction:null===(o=e.debug)||void 0===o?void 0:o.userAction,miscDataToConvertToString:{operationsCount:e.operations.length}}});const i=JSON.stringify(e.operations).length;var r;this.stringifiedOperationSizeIsTooLarge(i)&&n().log({from:E,type:"enqueueTask",level:"warning",data:{message:`enqueing task with stringified operation count > ${D.stringifiedOperationSizeByteThreshold} bytes`,sessionId:this.sessionId,taskId:e.id,isNewSession:t,userAction:null===(r=e.debug)||void 0===r?void 0:r.userAction,miscDataToConvertToString:{operationsCount:e.operations.length,stringifiedOperationsSize:i}}});await async function(e,t){await B().h`
		INSERT OR REPLACE INTO transactions (
		    id,
		    user_id,
		    space_id,
		    operations,
		    timestamp,
			debug
		)
		VALUES (
		    ${t.id},
		    ${t.userId||null},
		    ${t.spaceId||null},
		    ${JSON.stringify(t.operations)},
		    ${t.timestamp},
			${t.debug?JSON.stringify(t.debug):null}
		)
	`.run(e)}(this.connection,e),this.debugLogger.log({from:E,type:"enqueueTask",level:"debug",data:{message:`save task ${e.id} in memory (${this.tasks.size} total now)`,sessionId:this.sessionId,taskId:e.id,isNewSession:t}})}startLoop(){this.dependencies.timeSource.setTimeout((()=>this.healthcheckLoop()),1)}unpause(){}pause(){}getLastTaskTimestamp(){return this.lastTaskTimestamp}hasTasks(){return this.tasks.size>0}async hasTasksForUser(e){const t=await async function(e,t){return(await(0,R().gU)({connection:e,sql:"SELECT COUNT(*) AS count FROM transactions WHERE user_id = ?",args:[t]}))[0].count}(this.connection,e);return t>0}async getTotalNumberOfTasks(){return await async function(e){return(await(0,R().gU)({connection:e,sql:"SELECT COUNT(*) AS count FROM transactions"}))[0].count}(this.connection)}async anySessionHasTasks(){return await this.getTotalNumberOfTasks()>0}async reset(){await async function(e){await B().h`DELETE FROM transactions`.run(e)}(this.connection),this.tasks.clear()}async clearForUser(e){const t=await async function(e,t){const[o]=await(0,R().G$)({connection:e,statements:[{sql:"SELECT * FROM transactions WHERE user_id = ?",args:[t],getData:!0},{sql:"DELETE FROM transactions WHERE user_id = ?",args:[t]}],queryName:"deleteTransactionsForUser"});return o.data.map((e=>e.id))}(this.connection,e);for(const o of t)this.tasks.delete(o)}updateDependencies(e){this.dependencies=e}async awaitRecordTransaction(e){this.isPendingTransactionForRecord(e)&&await this.drain()}isPendingTransactionForRecord(e){return Array.from(this.tasks.values()).some((t=>t.operations.some((t=>(0,x().qo)(t.pointer,e)))))}hasTooManyOperations(e){return e.operations.length>=D.operationCountWarningThreshold}stringifiedOperationSizeIsTooLarge(e){return e>=D.stringifiedOperationSizeByteThreshold}async drain(){return this.tasks.size>0?new Promise((e=>{this.events.addOnceListener("drain",e)})):void 0}async healthcheckLoop(){for(;;){try{const e=await this.getTotalNumberOfTasks();e>D.transactionSizeHealthcheckThreshold&&(this.debugLogger.flush(),n().log({level:"info",from:"NativeBackedSqliteTransactionQueue",type:"transactionSizeHealthcheck",data:{miscDataToConvertToString:{queueSize:e}}}),this.dependencies.handleHealthcheck({queue_type:"NativeBackedSqliteTransactionQueue",uptime:Date.now()-this.startTime,queue_size:e,error_type:void 0,is_considered_online:P().default.state.online,retry_reasons:this.retryReasonCounters}))}catch(e){this.debugLogger.flush(),n().log({level:"error",from:"NativeBackedSqliteTransactionQueue",type:"healthcheckLoopIteration",error:(0,s().Ui)(e)}),T().IE(e)}await l().Vs(D.healthcheckInterval,this.dependencies.timeSource)}}updateTransactionState(e){(e.syncing||this.hasTasks())&&P().default.setState({...P().default.state,syncing:!0});let t=[],o=[];if(e.saveTransactionResult)if(e.saveTransactionResult.error){const{retryReason:n}=e.saveTransactionResult.error;n?(0,M().Os)(this.retryReasonCounters,n):this.retryReasonCounters={_total:0},t=e.saveTransactionResult.error.savedTasks.map((e=>this.tasks.get(e.id))).filter(d().$K),o=e.saveTransactionResult.error.failedTasks.map((e=>this.tasks.get(e.id))).filter(d().$K),(0,A().o)({backoffEstimate:void 0,retryReason:n})}else this.retryReasonCounters={_total:0},t=e.saveTransactionResult.value.map((e=>this.tasks.get(e.id))).filter(d().$K),o=[],(0,A().Om)();t.forEach((e=>{if(e.callback)try{e.callback(void 0)}catch(t){this.debugLogger.flush(),n().log({level:"error",from:"NativeBackedTransactionQueue",type:"updateTransactionStateSavedTask",data:{taskId:e.id},error:(0,s().Ui)(t)})}this.tasks.delete(e.id)})),o.forEach((e=>{if(e.callback)try{e.callback(new Error(`Failed to save transaction with id: ${e.id}`))}catch(t){this.debugLogger.flush(),n().log({level:"error",from:"NativeBackedTransactionQueue",type:"updateTransactionStateFailedTask",data:{taskId:e.id},error:(0,s().Ui)(t)})}this.tasks.delete(e.id),this.dependencies.rollbackTask(e)})),e.syncing||this.hasTasks()||(P().default.setState({...P().default.state,syncing:!1}),this.events.emit("drain"))}}D.healthcheckInterval=5*c().hM,D.transactionSizeHealthcheckThreshold=1e3,D.operationCountWarningThreshold=500,D.stringifiedOperationSizeByteThreshold=1e5;var U=()=>o(596658),F=()=>o(995951);class N{constructor(e,t){this.activeQueue=void 0,this.inMemoryTransactionQueue=void 0,this.indexedDBDrainListener=void 0,this.debugLogger=void 0,this.activeQueue=e,this.inMemoryTransactionQueue=t,this.indexedDBDrainListener=()=>this.handleIndexedDBQueueDrain(),this.debugLogger=new(n().BatchedLogger)({from:"IndexedDBToInMemoryTransactionQueue",type:"BulkDebug",level:"info",maxLength:250}),setTimeout((()=>{this.activeQueue instanceof F().D&&(this.debugLogger.log({level:"error",from:"IndexedDBToInMemoryTransactionQueue",type:"constructor",data:{message:"IndexedDBTransactionQueue has not drained after 5 minutes."}}),this.debugLogger.flush())}),5*c().hM)}startLoop(){if(this.activeQueue instanceof F().D){this.activeQueue.events.addListener("drain",this.indexedDBDrainListener)}this.activeQueue.startLoop()}handleIndexedDBQueueDrain(){const e=(0,o(349220).R9)(this.activeQueue,F().D,'Expected "IndexedDBTransactionQueue"');e.hasAttemptedToClaimSessions()&&(e.stopLoop(),e.events.removeListener("drain",this.indexedDBDrainListener),this.inMemoryTransactionQueue.startLoop(),this.activeQueue=this.inMemoryTransactionQueue,this.debugLogger.log({level:"info",from:"IndexedDBToInMemoryTransactionQueue",type:"constructor",data:{message:"Switching over from IndexedDBTransactionQueue to InMemoryTransactionQueue."}}))}logEmptyTaskForDebugging(e){var t,o;null===(t=(o=this.activeQueue).logEmptyTaskForDebugging)||void 0===t||t.call(o,e)}enqueueTask(e){return this.activeQueue.enqueueTask(e)}unpause(){this.activeQueue.unpause()}pause(){this.activeQueue.pause()}getLastTaskTimestamp(){return this.activeQueue.getLastTaskTimestamp()}hasTasks(){return this.activeQueue.hasTasks()}anySessionHasTasks(){return this.activeQueue.anySessionHasTasks()}getTotalNumberOfTasks(){return this.activeQueue.getTotalNumberOfTasks()}hasTasksForUser(e){return this.activeQueue.hasTasksForUser(e)}drain(){return this.activeQueue.drain()}awaitRecordTransaction(e){return this.activeQueue.awaitRecordTransaction(e)}isPendingTransactionForRecord(e){return this.activeQueue.isPendingTransactionForRecord(e)}reset(){return this.activeQueue.reset()}clearForUser(e){return this.activeQueue.clearForUser(e)}updateDependencies(e){this.activeQueue.updateDependencies(e),this.inMemoryTransactionQueue!==this.activeQueue&&this.inMemoryTransactionQueue.updateDependencies(e)}}var V=()=>o(686621);const L="InMemoryTransactionQueue";class O{constructor(e){this.isProcessingTask=!1,this.lastTaskTimestamp=0,this.tasks=new Map,this.events=new(C().Z),this.waiter=void 0,this.transactionBackoffController=new(o(790620).h)(A()._W),this.sessionId="00000000-0000-0000-0000-000000000000",this.retryReasonCounters={_total:0},this.startTime=Date.now(),this.debugLogger=new(n().BatchedLogger)({from:L,type:"BulkDebug",level:"info",maxLength:250}),this.dependencies=e}startLoop(){this.dependencies.timeSource.setTimeout((()=>this.txLoop()),1),this.dependencies.timeSource.setTimeout((()=>this.healthcheckLoop()),1)}enqueueTask(e){this.lastTaskTimestamp=Math.max(e.timestamp,this.lastTaskTimestamp);const t=0===this.tasks.size;return this.tasks.set(e.id,{...e,sessionId:this.sessionId}),u().default.setOrIncTotal(this.tasks.size),this.debugLogger.log({from:L,type:"saveTask",level:"debug",data:{message:`save task ${e.id} in memory (${this.tasks.size} total now)`,sessionId:this.sessionId,taskId:e.id,isNewSession:t}}),this.getWaitable(!1).trigger(),Promise.resolve()}unpause(){this.transactionBackoffController.reset(),this.getWaitable(!1).trigger()}pause(){}getLastTaskTimestamp(){return this.lastTaskTimestamp}hasTasks(){return this.tasks.size>0}async hasTasksForUser(e){return Promise.resolve(Array.from(this.tasks.values()).some((t=>t.userId===e)))}updateDependencies(e){this.dependencies=e}async getTotalNumberOfTasks(){return Promise.resolve(this.tasks.size)}async anySessionHasTasks(){return Promise.resolve(this.hasTasks())}async drain(){return this.hasTasks()||this.isProcessingTask?new Promise((e=>{this.events.addOnceListener("drain",e)})):void 0}async awaitRecordTransaction(e){this.isPendingTransactionForRecord(e)&&await this.drain()}isPendingTransactionForRecord(e){return Array.from(this.tasks.values()).some((t=>t.operations.some((t=>(0,x().qo)(t.pointer,e)))))}async reset(){return this.tasks=new Map,u().default.updateRemaining(0),Promise.resolve()}async clearForUser(e){const t=Array.from(this.tasks.values()).filter((t=>t.userId===e));for(const o of t)this.tasks.delete(o.id);return u().default.updateRemaining(this.tasks.size),Promise.resolve()}async txLoop(){for(;;)try{await this.txLoopIteration()}catch(e){(0,M().Os)(this.retryReasonCounters,"txLoopException"),this.debugLogger.flush(),n().log({level:"error",from:L,type:"txLoopIteration",error:(0,s().Ui)(e)}),T().IE(e),await l().Vs(15e3,this.dependencies.timeSource)}}async txLoopIteration(){this.hasTasks()||(this.doneSyncing(),this.events.emit("drain")),await this.wait(M().V_,M().Ud);const e=Array.from(this.tasks.values()),t=Array.from(e).sort(((e,t)=>e.timestamp-t.timestamp));if(0===t.length)return;const o=[];for(let n=0;n<t.length;n++)t[n]!==e[n]&&o.push(n);o.length>0&&n().log({from:L,level:"warning",type:"TasksNotOrdered",data:{miscDataToConvertToString:{unsortedTaskIds:e.map((e=>e.id)),mismatch:o},taskIds:t.map((e=>e.id))}}),this.startSyncing(),await this.useSaveTransactionsApi(t)}async useSaveTransactionsApi(e){const t=await this.dependencies.handleSaveTransactions(e);if(t.error){const{savedTasks:e,failedTasks:i,message:r,retryDelay:a,retryReason:l}=t.error;var o;if(l?(0,M().Os)(this.retryReasonCounters,l):this.retryReasonCounters={_total:0},e.length>0&&(this.debugLogger.log({level:"debug",from:L,type:"handlePartialSaveTransactionsSuccess",data:{message:`will delete ${e.length} saved tasks`,taskIds:e.map((e=>e.id))}}),await this.cleanupTasks(e,void 0)),i.length>0?(this.debugLogger.flush(),n().log({level:"warning",from:L,type:"handleSaveTransactionsError",data:{message:r,taskIds:i.map((e=>e.id))},error:(0,s().Ui)(t.error)}),await this.cleanupTasks(i,t.error)):this.debugLogger.log({level:"debug",from:L,type:"handleSaveTransactionsRetryableError",data:{message:r}}),a>0)await this.transactionBackoffController.backOffOnFailure(a-M().V_,null===(o=t.error)||void 0===o?void 0:o.retryReason);else this.transactionBackoffController.reset()}else{const e=t.value;this.retryReasonCounters={_total:0},this.debugLogger.log({level:"debug",from:L,type:"handleSaveTransactionsSuccess",data:{message:`will clean up ${e.length} submitted tasks`,taskIds:e.map((e=>e.id))}}),this.transactionBackoffController.reset(),await this.cleanupTasks(e,void 0)}}async cleanupTasks(e,t){for(const i of e)if(i.callback)try{i.callback(t)}catch(o){this.debugLogger.flush(),n().log({level:"error",from:"InMemoryTransactionQueue",type:"cleanupTask",data:{taskId:i.id},error:(0,s().Ui)(o)})}for(const n of e)this.debugLogger.log({from:L,type:"deleteTasksDeleteTask",level:"debug",data:{message:`delete task ${n.id}`,taskId:n.id}}),this.tasks.delete(n.id);return u().default.updateRemaining(this.tasks.size),Promise.resolve()}getWaitable(e){return this.waiter&&!e||(this.waiter=new(l().a6)(this.dependencies.timeSource)),this.waiter}async wait(e,t){await this.getWaitable(!1).wait(e,t),this.getWaitable(!0)}startSyncing(){P().default.setState({...P().default.state,syncing:!0})}doneSyncing(){P().default.setState({...P().default.state,syncing:!1})}async healthcheckLoop(){for(;;){try{const e=await this.getTotalNumberOfTasks();if(e>O.transactionSizeHealthcheckThreshold){const t={queue_type:"InMemoryTransactionQueue",uptime:Date.now()-this.startTime,queue_size:e,error_type:void 0,is_considered_online:P().default.state.online,retry_reasons:this.retryReasonCounters};this.debugLogger.flush(),n().log({level:"info",from:"InMemoryTransactionQueue",type:"transactionSizeHealthcheck",data:{miscDataToConvertToString:{queueSize:e}}}),this.dependencies.handleHealthcheck(t)}}catch(e){this.debugLogger.flush(),n().log({level:"error",from:"InMemoryTransactionQueue",type:"healthcheckLoopIteration",error:(0,s().Ui)(e)}),T().IE(e)}await l().Vs(O.healthcheckInterval,this.dependencies.timeSource)}}}O.healthcheckInterval=15*c().hM,O.transactionSizeHealthcheckThreshold=1e3;const Z=O;var j=()=>o(268343);const K="FeatureFlagTransactionQueue",z="00000000-0000-0000-0000-000000000000";async function H(e){if(!window.indexedDB)return{available:!1,message:"The IndexedDB API is missing or disabled on this platform."};if(e.device.isFirefox){const e="FirefoxFeatureCheck";if(!(await new Promise((t=>{const o=window.indexedDB.open(e);o.onerror=()=>t(!1),o.onsuccess=()=>{t(!0),window.indexedDB.deleteDatabase(e)}}))))return{available:!1,message:"IndexedDB is disabled in Firefox Private Browsing."}}if(e.device.isChrome&&parseInt(e.device.browserVersion,10)>=99){const e="Chrome99FeatureCheck";let o=!1;try{if(o=await new Promise((t=>{const o=window.indexedDB.open(e);o.onerror=()=>t(!1),o.onsuccess=()=>{t(!0),window.indexedDB.deleteDatabase(e)}})),!o)return{available:!1,message:"IndexedDB is unstable in Chrome 99."}}catch(t){return{available:!1,message:(0,r().t)(t).message}}}return q()&&U().H.hasOccurredRecently()?{available:!1,message:"A NotionTransactionTimeout has happened recently, avoiding use of IndexedDB.",previousTimeouts:U().H.getTotal()}:{available:!0}}const q=a().HP((()=>"on"===(0,o(836842).kW)("indexeddb_graceful_fallback_to_in_memory_queue")));async function W(e){const t=new(j().TransactionQueueDependenciesImpl)(e);async function o(){const o=await H(e);if(!o.available)return n().log({from:K,level:"warning",type:"preferIndexedDBUnavailable",data:{previousTimeouts:o.previousTimeouts,miscDataToConvertToString:{message:o.message,userAgent:navigator.userAgent}}}),r();n().log({from:K,type:"preferIndexedDB",level:"info"});const l=function(e,t){const o="react-native"===e.device.platform?z:i().Il(),r=new(n().BatchedLogger)({from:"IndexedDBTransactionQueue",type:"BulkDebug",level:"info",maxLength:250}),a=new k(r,e);return new(F().D)({dependencies:t,transactionStore:a,sessionId:o,debugLogger:r,enableHeartbeatTimeout:q()})}(e,t),c=await(0,I().sK)();if(c&&!(0,I().mn)(c)){let e=!1;try{e=await l.anySessionHasTasks(),n().log({from:K,type:"indexedDBStorageVeryFull",level:"warning",data:{storage:{hasTasks:e,...c}}})}catch(d){n().log({from:K,level:"error",type:"indexedDBStorageReadError",data:{storage:c},error:(0,s().Ui)(d)})}if(!e)return new Z(t)}if(e.device.isFirefox)try{const e=await l.checkObjectStores(),o=a().oA([e.transaction,e.session].map((e=>e.error)));if(o.length>0){const i=[];return e.transaction.error&&i.push("Transaction"),e.session.error&&i.push("Session"),n().log({from:K,level:"error",type:"FirefoxHealthCheckFailed",error:{miscErrorString:(0,s().LK)(o)},data:{message:`Can't read ${i}. Using InMemoryTransactionQueue instead.`}}),new Z(t)}}catch(d){return n().log({from:K,level:"error",type:"indexedDBHealthCheckError",error:(0,s().Ui)(d)}),new Z(t)}return q()?(l.events.addListener("timeout",(()=>{U().H.trackPersistently()})),new(V().Z)(l,new Z(t))):l}function r(){return n().log({from:K,type:"preferInMemory",level:"info"}),new Z(t)}const{device:d,mobileNative:u}=e;if(d.isBrowser&&d.isDesktop){if(d.isChrome||d.isFirefox)return o();if(d.isSafari){if(parseInt(d.browserVersion,10)<17)return o();const e=await o();if(e instanceof F().D){if((await l().OI(15*c().C0,e.anySessionHasTasks())).result)return n().log({from:K,type:"Safari17.usingIndexedDBToInMemoryTransactionQueue",level:"info"}),new N(e,r())}return n().log({from:K,type:"Safari17.usingInMemoryTransactionQueue",level:"info"}),r()}return r()}return d.isBrowser&&d.isMobile?r():d.isElectron?o():d.isMobileNative&&u&&u.sqliteConnection?new D(u.sqliteConnection,t,u):r()}(0,o(100056).exposeDebugEnvironmentValue)("getIndexedDBAvailability",(e=>()=>H(e)));let G=new class{constructor(e,t){this.getActiveQueueName=void 0,this.queues=void 0,this.createQueues=void 0,this.getActiveQueueName=e,this.createQueues=t}getQueues(){const e=this.queues?this.queues:this.createQueues();return this.queues=e,e}applyToAllQueues(e){return Object.values(this.getQueues()).map(e)}applyToActiveQueue(e){return e(this.getQueues()[this.getActiveQueueName()])}startLoop(){this.applyToAllQueues((e=>e.startLoop()))}enqueueTask(e){return this.applyToActiveQueue((t=>t.enqueueTask(e)))}unpause(){this.applyToAllQueues((e=>e.unpause()))}pause(){this.applyToAllQueues((e=>e.pause()))}getLastTaskTimestamp(){return this.applyToActiveQueue((e=>e.getLastTaskTimestamp()))}hasTasks(){return this.applyToAllQueues((e=>e.hasTasks())).some(Boolean)}async hasTasksForUser(e){return(await Promise.all(this.applyToAllQueues((t=>t.hasTasksForUser(e))))).some((e=>e))}updateDependencies(e){this.applyToAllQueues((t=>t.updateDependencies(e)))}async anySessionHasTasks(){for(const e of this.applyToAllQueues((e=>e.anySessionHasTasks())))if(await e)return!0;return!1}async getTotalNumberOfTasks(){return a().Sm(await Promise.all(this.applyToAllQueues((e=>e.getTotalNumberOfTasks()))))}async drain(){await Promise.all(this.applyToAllQueues((e=>e.drain())))}awaitRecordTransaction(e){return this.applyToActiveQueue((t=>t.awaitRecordTransaction(e)))}isPendingTransactionForRecord(e){return this.applyToAllQueues((t=>t.isPendingTransactionForRecord(e))).some(Boolean)}async reset(){await Promise.all(this.applyToAllQueues((e=>e.reset())))}async clearForUser(e){await Promise.all(this.applyToAllQueues((t=>t.clearForUser(e))))}}((()=>"error"),(()=>{throw new Error("Need to await setupTransactionQueue")}));async function $(e){return G=await W(e),G}function Q(e){G=e}},235044:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{isMeasuring:!1}}}const i=new n},842918:(e,t,o)=>{o.d(t,{Z:()=>a});var n=()=>o(963310);function i(){var e;const t=null===(e=o(876822).default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.getType();if(t)return"collection_view_page"===t||"collection_view"===t?"collection":"page"}function r(e){const t=null===(o=n().Xm.CollectionViewBlock.getLoadingMetrics())||void 0===o?void 0:o.resolvedAt;var o;return!!t&&(e?e<t:void 0)}const a=new class{constructor(){this._timings=void 0,this._navigatingFrom=void 0,this._switchingView=void 0}popTimings(){const e=this._timings;return this._timings=void 0,e}markNavigationStartTime(e,t){this._timings={navigationStart:performance.now()},this._navigatingFrom=void 0,this._switchingView=void 0,"page"===e.name&&"page"===t.name&&e.blockId&&e.blockId&&(this._navigatingFrom=i(),this._switchingView=e.blockId===t.blockId&&e.collectionViewId!==t.collectionViewId)}markRequestFirstChunkStart(){this._timings&&(this._timings={...this._timings,requestFirstChunkStart:performance.now()})}markRequestFirstChunkEnd(e){this._timings&&(this._timings={...this._timings,requestFirstChunkEnd:performance.now(),requestFirstChunkSource:e})}markPageViewBlockRender(e){this._timings&&(this._timings={...this._timings,pageViewBlockRender:e})}getDatabaseNavigationMetrics(e){return{cvb_bundle_loaded:r(e),navigating_from:this._navigatingFrom,navigating_to:i(),switching_view:this._switchingView}}}},97904:(e,t,o)=>{o.d(t,{Jr:()=>s,ZP:()=>c,j5:()=>r,uZ:()=>i});var n=()=>o(245015);const i="unread_and_read",r=["unread_and_read","unread_only","archived_only","all_updates"],a={filter:i},s="notification_inbox_panel";const l=o(263184).default.createValue(function(){const e=n().Z.get(s);return{...a,...e}}(),{name:"preferenceStore"});l.addListener((e=>{try{t=e.state,n().Z.set(s,t)}catch{}var t}));const c=l},801072:(e,t,o)=>{o.d(t,{Z:()=>i});const n=new(o(168469).q)((e=>{let{spaceId:t}=e;return t}),(async(e,t)=>{var n;let{spaceId:i}=t;if(null===(n=o(876822).default.state.currentSpaceStore)||void 0===n||!n.canAdmin())return;const r=await Promise.resolve().then(o.bind(o,824462)),a=await r.callApi({eventName:"getCustomerOffersReceived",environment:e,data:{spaceId:i},headers:(0,o(741633).Bb)({cellId:void 0,spaceId:i})});return"success"===a.type&&(0,o(696459).Of)(a.data)?a.data:void 0}));o(947115).exposeDebugValue("OffersReceivedStore",n);const i=n},522323:(e,t,o)=>{o.d(t,{Z:()=>n});const n=new(o(41158).D)({key:"openInDesktopApp",namespace:o(149310).$p,important:!0,trackingType:"necessary"})},483637:(e,t,o)=>{o.d(t,{m:()=>n});const n=o(263184).default.createValue(!1,{name:"OpenPageUpdatesTabFromEmailStore"})},959005:(e,t,o)=>{o.d(t,{Z:()=>n});const n=new(o(529048).Z)},34670:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{isHidden:!1}}}const i=n},133333:(e,t,o)=>{o.d(t,{L:()=>r,c:()=>a});o(267602),o(916054);var n=()=>o(263184);const i=new Map;function r(e){const t=i.get(e);if(t)return t;{const t=n().default.createValue(!1,{name:"newStore"});return i.set(e,t),t}}function a(){const e=Array.from(i.entries());return 0===e.length||e.every((e=>!e[1].state))}},130729:(e,t,o)=>{o.d(t,{Z:()=>r});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624);var n=()=>o(263184);class i extends n().default{constructor(){super(...arguments),this.containerDomNodeStore=n().default.createValue(null,{name:"containerDomNodeStore"})}getInitialState(){return{overlays:new Set}}}const r=i},121700:(e,t,o)=>{o.d(t,{Z:()=>n});const n=new(o(738957).Z)},822851:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{ready:!1,initialRequestCompleted:!1,loading:!1,endOfResultsReached:!1,error:void 0,currentCursor:void 0,currentCursors:[]}}}const i=n},763058:(e,t,o)=>{o.d(t,{A_:()=>d,UK:()=>c,my:()=>l,pB:()=>r});var n=()=>o(263184),i=()=>o(482162);class r extends n().default{getInitialState(){return{forceShowProperties:!1,searchOpen:!1,searchQuery:""}}}const a="unnamed";class s extends n().default{getInitialState(){return{pagePropertiesStoreMap:{}}}getNewEditorPagePropertiesStore(e){var t;const o=e||a;if(null!==(t=this.state.pagePropertiesStoreMap)&&void 0!==t&&t[o])return this.state.pagePropertiesStoreMap[o];const n=new r,i={pagePropertiesStoreMap:{...this.state.pagePropertiesStoreMap,[o]:n}};return this.setState(i),n}}const l=new s,c=new s;function d(e){const t=e||a;return(i().default.state.open?c:l).state.pagePropertiesStoreMap[t]}},346392:(e,t,o)=>{o.d(t,{Z:()=>i});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624);class n extends(()=>o(263184))().default{getInitialState(){return{pages:new Set}}setStatus(e,t){t?this.state.pages.add(e):this.state.pages.delete(e),this.emit()}}const i=new n},21688:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1}}}const i=new n},311562:(e,t,o)=>{o.d(t,{S:()=>n,Z:()=>r});let n=function(e){return e[e.Frame=0]="Frame",e[e.PeekView=1]="PeekView",e[e.InAppTemplatePreview=2]="InAppTemplatePreview",e[e.InPageSnapShot=3]="InPageSnapShot",e[e.CollectionPageView=4]="CollectionPageView",e[e.SitePreview=5]="SitePreview",e[e.Form=6]="Form",e[e.Post=7]="Post",e}({});class i extends(()=>o(263184))().default{getInitialState(){return{forceDiscussionOpen:!1}}}const r=i},660293:(e,t,o)=>{o.d(t,{X:()=>a,Z:()=>s});var n=()=>o(263184);class i extends n().default{getInitialState(){return{isVisible:!0}}}class r extends n().default{getInitialState(){return!1}}const a=new r,s=new i},56810:(e,t,o)=>{o.d(t,{$g:()=>i,jx:()=>r});class n extends(()=>o(263184))().default{getInitialState(){return{visitId:void 0,startMilliseconds:void 0}}initializeNewPageVisitId(){this.setState({visitId:o(956057).Il(),startMilliseconds:Date.now()})}getCurrentPageVisitId(){return this.getState().visitId}getCurrentPageVisitDuration(){const e=this.getState().startMilliseconds;return void 0===e?void 0:Date.now()-e}}const i=new n,r=new n},363127:(e,t,o)=>{o.d(t,{default:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1,hasPassword:!1}}isSetNewPasswordModal(){const e=this.state;return!0===e.setNewPassword&&!1===e.isSet}isPasswordSetModal(){const e=this.state;return!0===e.setNewPassword&&!0===e.isSet}isRemovePasswordModal(){const e=this.state;return!0===e.removePassword&&!1===e.isSuccess}isRemovePasswordSuccessModal(){const e=this.state;return!0===e.removePassword&&!0===e.isSuccess}isVerifyIdentityWithMfaModal(){return!0===this.state.verifyIdentity}isPasswordModalClosed(){return!this.state.open}}const i=new n},851713:(e,t,o)=>{o.d(t,{Z:()=>n});const n=new(o(55558).Z)},27475:(e,t,o)=>{o.d(t,{Z:()=>n});const n=new(o(738957).Z)},482162:(e,t,o)=>{o.r(t),o.d(t,{CenterPeekModeOuterWidth:()=>s,PeekModeOuterPadding:()=>a,PeekModePadding:()=>r,SIDEPEEK_INITIAL_MAX_WIDTH:()=>u,SIDEPEEK_MIN_WIDTH:()=>m,SIDEPEEK_NO_COLUMN_WIDTH:()=>p,default:()=>g,getPeekModeFromCollectionPeekModeFormat:()=>c,getPeekModeFromUrlParam:()=>l,getUrlParamFromPeekMode:()=>d});var n=()=>o(435308),i=()=>o(285670);const r={horizontal:{center_peek:126,side_peek:76}},a=72,s=708+2*r.horizontal[i().l];function l(e){switch(e){case"s":return i().R;case"c":return i().l}}function c(e){switch(e){case"side_peek":return i().R;case"center_peek":return i().l}}function d(e){switch(e){case i().R:return"s";case i().l:return"c"}}const u=980,p=640,m=564;class f extends(()=>o(263184))().default{constructor(){super(...arguments),this.isSidePeekOpeningStore=new(n().default)((()=>this.state.open&&this.isSidePeekOpen()&&this.state.isOpening),{debugName:"isSidePeekOpening"}),this.isSidePeekClosingStore=new(n().default)((()=>this.state.open&&this.state.isClosing),{debugName:"isSidePeekClosing"}),this.peekTargetStore=new(n().default)((()=>this.state.open?this.state.targetStore:void 0),{debugName:"peekTarget"})}getInitialState(){return{open:!1,mode:i().l,preferredSidePeekWidth:0,savedSidebarExpandedStoreState:!1,topHoverAreaEntered:!1}}getCollectionModeFormat(){switch(this.state.mode){case i().R:return"side_peek";case i().l:return"center_peek"}}getPeekMode(){return this.state.open?this.state.mode:i().R}getPeekModeWidth(e){return this.isCenterPeekOpen()?s:this.getSidePeekWidth(e)}getSidePeekWidth(e){const t=Math.min(e/2,u),o=this.state.preferredSidePeekWidth||t,n=Math.max(o,m);return Math.min(n,e)}setSidePeekWidth(e,t){const o=Math.min(Math.max(e,m),t);this.setState({...this.state,preferredSidePeekWidth:o})}isCenterPeekOpen(){return this.state.open&&this.state.mode===i().l}isSidePeekOpen(){return this.state.open&&this.state.mode===i().R&&!this.state.isClosing}setSidebarExpandedStoreState(e){this.setState({...this.state,savedSidebarExpandedStoreState:e})}setTopHoverAreaEntered(e){this.setState({...this.state,topHoverAreaEntered:e})}}const g=new f},791388:(e,t,o)=>{o.d(t,{Z:()=>n});const n=new(o(529048).Z)},61548:(e,t,o)=>{o.d(t,{Z:()=>n});const n=new(o(529048).Z)},114642:(e,t,o)=>{o.d(t,{Z:()=>n});const n=new(o(529048).Z)},844641:(e,t,o)=>{o.d(t,{Z:()=>n});const n=new(o(529048).Z)},855249:(e,t,o)=>{o.d(t,{Z:()=>n});const n=(0,o(947115).exposeDebugValue)("PeekViewScrollerStore",new(o(561280).Z))},896014:(e,t,o)=>{o.d(t,{Db:()=>s,cl:()=>i,fZ:()=>n,oM:()=>r,ow:()=>a});o(267602),o(916054);function n(e){return"existingUser"===e.type}function i(e){return"newUser"===e.type}function r(e){return"newUser"===e.type||"existingUser"===e.type}function a(e){const t=e.inviteTargets[0];return!(!t||"bot"!==t.type)}function s(e){return e.inviteTargets.every((e=>"existingUser"===e.type||"newUser"===e.type||"group"===e.type))}},128119:(e,t,o)=>{o.d(t,{FJ:()=>u,Iw:()=>c,ZP:()=>m,lU:()=>d});var n=()=>o(998901);const{Top:i,Bottom:r,Left:a,Right:s,Center:l}=n().Placement,c=n().Placement,d=n().Alignment;function u(e){switch(e){case i:return r;case r:return i;case a:return s;case s:return a;case l:return l}}class p extends(()=>o(263184))().default{getInitialState(){return{open:!1,placementFlipped:!1,offsetX:0,offsetY:0,originRect:o(35982).bM}}}const m=p},830261:(e,t,o)=>{o.d(t,{Z:()=>n});const n=new(o(34670).Z)},890324:(e,t,o)=>{o.d(t,{Z:()=>a,m:()=>i});var n=()=>o(933868);const i={disabled:{hasPublicPermission:!1},view:{hasPublicPermission:!0,permission:"view"},comment:{hasPublicPermission:!0,permission:"comment"},edit:{hasPublicPermission:!0,permission:"edit"}};Object.freeze(i),Object.freeze(i.disabled),Object.freeze(i.view),Object.freeze(i.comment),Object.freeze(i.edit);class r extends(()=>o(263184))().default{getInitialState(){return{editing:!1,commenting:!1}}getMode(e,t){const o=this.getModeType(e,t)||"disabled";return i[o]}getModeType(e,t){if(!t.isDefaultRecordCache()||!(0,o(122479).IJ)(e,t))return;const i=t.getRole(),r=!i||(0,n().J5)(i),a=!i||(0,n().RF)(i),s=e.currentUser.isLoggedIn();return r&&s&&this.state.editing?"edit":a&&s?"comment":"view"}}const a=new r},458335:(e,t,o)=>{o.d(t,{Z:()=>l});var n=()=>o(547913),i=()=>o(168469),r=()=>o(178180);function a(e,t){o(504008).Z.withListenerIgnored((()=>{e&&t&&r().Z.setState({...r().Z.state,[e]:t})}))}const s=new(i().q)((e=>{let{spaceId:t}=e;return t}),(async function(e,t){let{spaceId:r}=t,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const l=await Promise.resolve().then(o.bind(o,824462));if((0,o(548812).sd)()){const t=await l.callApi({eventName:"getPublicSpaceData",environment:e,data:{type:"space-ids",spaceIds:[r]},headers:{[n().YM]:r}});var c,d;if("success"===t.type&&t.data.results.length>0&&t.data.results[0])a(null===(c=t.data.results[0])||void 0===c?void 0:c.id,null===(d=t.data.results[0])||void 0===d?void 0:d.spaceShortId);return"success"===t.type?t.data.results[0]??void 0:void 0}return(0,i().X)({environment:e,namespace:"PublicSpaceData",key:r,forceRefetch:s,getValue:async()=>{const t=await l.callApi({eventName:"getPublicSpaceData",environment:e,data:{type:"space-ids",spaceIds:[r]},headers:{[n().YM]:r}});var o,i;"success"===t.type&&t.data.results.length>0&&t.data.results[0]&&a(null===(o=t.data.results[0])||void 0===o?void 0:o.id,null===(i=t.data.results[0])||void 0===i?void 0:i.spaceShortId);return"success"===t.type?t.data.results[0]??void 0:void 0}})}));o(947115).exposeDebugValue("PublicSpaceDataStore",s);const l=s},21965:(e,t,o)=>{o.d(t,{Z:()=>s});o(267602),o(653476),o(241792);const n=new class{constructor(){this.recentlyMentionedPagesStore=void 0,this.spaceId=void 0,this.userId=void 0}get(e){const{currentSpaceStore:t}=o(876822).default.state,n=t&&t.id;return void 0===n||void 0===e?(this.userId=void 0,this.spaceId=void 0,void(this.recentlyMentionedPagesStore=void 0)):(this.spaceId===n&&this.userId===e||(this.spaceId=n,this.userId=e,this.recentlyMentionedPagesStore=new i({maxPages:50,prefix:`RecentlyMentioned:${e}:${n}`,store:localStorage,version:r}),this.recentlyMentionedPagesStore.initialize()),this.recentlyMentionedPagesStore)}};class i{constructor(e){this.mentions=void 0;const{maxPages:t,prefix:n,store:i,version:r}=e;this.mentions=new(o(511839).Z)({maxSize:t,prefix:n,store:i,version:r})}initialize(){this.mentions.updateVersionAndGC()}recordMention(e,t){this.mentions.set(e,t)}getMentionedIds(){const e=this.mentions.entries();if(e.error)return[];const t=Date.now()-864e5;return Array.from(e.value).filter((e=>{let[o,n]=e;return n>=t})).map((e=>{let[t,o]=e;return t}))}}const r=1,a={lazyRecentlyMentionedPagesStore:n,recordMention:function(e){const{id:t,timestamp:o,currentUserId:i}=e,r=n.get(i);if(r)return r.recordMention(t,o)},getMentionedIds:function(e){const t=n.get(e);return t?t.getMentionedIds():[]}};(0,o(947115).exposeDebugValue)("RecentlyMentionedPagesStore",a);const s=a},694419:(e,t,o)=>{o.d(t,{Z:()=>n});const n=new(o(41158).D)({key:"recentlyUsedHighlightColors",namespace:o(149310).$p,important:!0,trackingType:"necessary"})},557576:(e,t,o)=>{o.r(t),o.d(t,{default:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{isActive:!1}}}const i=new n},431687:(e,t,o)=>{o.d(t,{P:()=>n});class n{constructor(e){this.memo=new WeakMap,this.debugName=void 0,this.hits=0,this.misses=0,this.getStateFor=e=>this.computeMemo(e),this.computeMemo=e=>{let t=this.memo.get(e);return t?this.hits++:(this.misses++,t=new(o(435308).default)((()=>this.options.compute(e,this.options.memoizeRecursion?this.computeMemo:this.computeNonMemo)),{debugName:this.debugName}),this.memo.set(e,t)),t.getState()},this.computeNonMemo=e=>this.options.compute(e,this.computeNonMemo),this.options=e,this.debugName=`RecursiveComputedStore.${e.debugName}`,(0,o(947115).exposeDebugInstance)(this.debugName,this)}}},794923:(e,t,o)=>{o.d(t,{default:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{}}isActive(){return Boolean(this.state.blockStore)}}const i=new n},795820:(e,t,o)=>{o.d(t,{default:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{}}isActive(){return Boolean(this.state.clonedBlockStore)}}const i=new n},853648:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{ready:!1,loading:!1}}}const i=n},169523:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{isResizing:!1}}}const i=new n},910135:(e,t,o)=>{o.r(t),o.d(t,{default:()=>l,groupIntervalMs:()=>a});var n=()=>o(536279),i=()=>o(696459);class r{constructor(){this.idMap=new(o(747381).Z)({getKey:e=>{let{textInstanceId:t,opId:o}=e;return`${t},${o[0]},${o[1]}`}})}remapIdsForReinsertedText(e,t){(0,n().T)(t.args.textInstanceId===e.args.textInstanceId,"Inverted operation text instance ID does not match"),(0,n().T)(o(513670).Xy(t.args.originId,e.args.originId),"Inverted operation origin ID does not match"),(0,n().T)(t.args.content.length===e.args.deletedIds.length,"Inverted operation deleted IDs must be equal to inserted text length");const i=t.args.id,r=t.args.content;for(let o=0;o<r.length;o++)this.addMapping({textInstanceId:e.args.textInstanceId,opId:e.args.deletedIds[o]},{textInstanceId:t.args.textInstanceId,opId:[i[0],i[1]+o]})}addMapping(e,t){(0,n().T)(!this.idMap.has(e),"Old text instance ID already exists in inverted text operation mapper"),(0,n().T)(!this.idMap.has(t),"New text instance ID already exists in inverted text operation mapper"),(0,n().T)(e.textInstanceId===t.textInstanceId,"IDs can only be remapped within the same text instance"),this.idMap.set(e,t)}getMappedId(e){let t,o=e;for(;o=this.idMap.get(o);)t=o;return t}getInvertedTextOperationWithMaybeRemappedIds(e){switch(e.command){case"invertedInsertText":{var t,o;const n=null===(t=this.getMappedId({textInstanceId:e.args.textInstanceId,opId:e.args.startId}))||void 0===t?void 0:t.opId,i=null===(o=this.getMappedId({textInstanceId:e.args.textInstanceId,opId:e.args.endId}))||void 0===o?void 0:o.opId;return n||i?{...e,args:{...e.args,startId:n??e.args.startId,endId:i??e.args.endId}}:e}case"invertedAddAnnotation":case"invertedRemoveAnnotation":{var n,r;const t=null===(n=this.getMappedId({textInstanceId:e.args.startTextInstanceId,opId:e.args.startId}))||void 0===n?void 0:n.opId,o=null===(r=this.getMappedId({textInstanceId:e.args.endTextInstanceId,opId:e.args.endId}))||void 0===r?void 0:r.opId;if("invertedAddAnnotation"===e.command)return t||o?{...e,args:{...e.args,startId:t??e.args.startId,endId:o??e.args.endId}}:e;if("invertedRemoveAnnotation"===e.command)return t||o?{...e,args:{...e.args,startId:t??e.args.startId,endId:o??e.args.endId}}:e;(0,i().t1)(e);break}case"invertedDeleteText":{var a;const t=null===(a=this.getMappedId({textInstanceId:e.args.textInstanceId,opId:e.args.originId}))||void 0===a?void 0:a.opId;return t?{...e,args:{...e.args,originId:t??e.args.originId}}:e}case"invertedMoveTextSlice":return e;default:(0,i().t1)(e)}}}const a=700;class s extends(()=>o(263184))().default{getInitialState(){return{undoStack:[],redoStack:[],invertedTextOperationIdMapper:new r}}}const l=new s},591051:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{isActive:!1,isAnimatingClosed:!1,top:0,left:0}}}const i=(0,o(947115).exposeDebugValue)("RichTextMenuStore",new n)},495699:(e,t,o)=>{o.d(t,{Z:()=>n});const n=new(o(529048).Z)},561280:(e,t,o)=>{o.d(t,{Z:()=>i});o(267602),o(30005);class n extends(()=>o(263184))().default{getInitialState(){return{isScrolling:!1,scrollTop_DEPRECATED:0,elementRef:{current:null}}}measureSize(){const e=this.state.elementRef;if(e.current){const t=e.current;let n=o(35982).iL.from(t.getBoundingClientRect());o(984933).Z.forEach((e=>{const o=e.getNode();o&&t.contains(o)&&(n=e.customizeEdgeScrollRect(n))}));const i={...this.state,clientRect:n,scrollTop_DEPRECATED:t.scrollTop};return o(513670).Xy(this.state,i)||this.setState(i),n}}}const i=n},76792:(e,t,o)=>{o.d(t,{BJ:()=>p,default:()=>f,gq:()=>m,v_:()=>u});var n=()=>o(35980),i=()=>o(471125),r=()=>o(513670),a=()=>o(205228);const s="SearchDebugStorePersistenceKey";class l extends(()=>o(263184))().default{setState(e){super.setState(e),function(e){let{newState:t,key:o}=e;n().Z.set({userId:"global",key:o,value:t})}({newState:e,key:this.getPersistenceKey()})}setStateWithoutPersisting(e){super.setState(e)}reloadFromDisk(){const e=n().Z.get({userId:"global",key:this.getPersistenceKey()});super.setState({...this.getInitialState(),...e})}}class c extends l{constructor(e){super(),this.column=void 0,this.getPersistenceKey=()=>`${s}:${this.column}`,this.updateForcedClusterPattern=e=>{this.setState({...this.state,forcedClusterPattern:e})},this.updateForcedBlockIds=e=>{this.setState({...this.state,forcedBlockIds:e})},this.column=e}getInitialState(){return{forcedClusterPattern:void 0,forcedBlockIds:void 0,searchExperimentOverrides:{},visible:!0}}hasDebugOverrides(){return!r().xb(this.state.forcedClusterPattern)||!r().xb(this.state.searchExperimentOverrides)||!r().xb(this.state.forcedBlockIds)}}const d=new class extends l{constructor(){super(...arguments),this.getPersistenceKey=()=>s}getInitialState(){return{showDebugInfo:!1,debug:void 0}}getDebugLevel(){return this.state.debug??(this.state.showDebugInfo?"explain":void 0)}},u=new c("left"),p=new c("right");function m(e){let{device:t}=e;return(0,i().x5)(a().default)&&!t.isMobile&&(u.hasDebugOverrides()||p.hasDebugOverrides()||u.state.forcedClusterPattern||p.state.forcedClusterPattern)&&p.state.visible}const f=d},146109:(e,t,o)=>{o.d(t,{Z:()=>c,_:()=>s});var n=()=>o(263184),i=()=>o(876822);class r extends n().default{getInitialState(){return{stores:{}}}getStore(e){let{spaceId:t,userId:n,version:i}=e;const r=function(e){let{spaceId:t,userId:o,version:n}=e;return`searchFrecency:${t}:${o}:${n??0}`}({spaceId:t,userId:n,version:i});return this.instanceState.stores[t]||(s()?this.instanceState.stores[t]=new(o(41158).D)({key:r,namespace:o(149310).$p,important:!0,trackingType:"necessary"}):this.instanceState.stores[t]=new a),this.instanceState.stores[t]}eraseStore_TEST_ONLY(e){let{spaceId:t,userId:o,version:n}=e;this.getStore({spaceId:t,userId:o,version:n}).setState(void 0),delete this.instanceState.stores[t]}}class a extends n().default{getInitialState(){}}function s(){var e;const t=l.state.shouldPersist;return void 0!==t?t:!(null===(e=i().default.getState().currentSpaceStore)||void 0===e||!e.environment.defaultRecordCache.persistedRecordCache)}const l=new r;(0,o(947115).exposeDebugValue)("globalSearchFrecencyStore",l);const c=l},609306:(e,t,o)=>{o.r(t),o.d(t,{default:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1,openAsPage:!1,openedTimeMs:void 0,sessionId:void 0,isPublicPageSearch:!1,searchMode:"default"}}closeAndResetMetricsState(){this.update((e=>({...e,open:!1,openAsPage:!1,openedTimeMs:void 0,sessionId:void 0})))}isOpen(){return this.state.open||this.state.openAsPage}}const i=new n},64572:(e,t,o)=>{o.r(t),o.d(t,{default:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{selectedQueryResult:!1,numKeystrokes:0,numServerRequests:0,numLocalRequests:0,hadMetaClick:!1,firstKeyStrokeTimeMs:void 0}}}const i=new n},192425:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){}}const i=new n},625820:(e,t,o)=>{o.d(t,{Xv:()=>i,ZP:()=>s});var n=()=>o(899133);const i=20;let r=function(e){return e.Default="Default",e.Results="Results",e}({});class a extends(()=>o(263184))().default{constructor(){super(...arguments),this.resetQuery=e=>{let{resetFilters:t}=e;this.setState({...this.state,query:{...this.state.query,text:"",...t&&{filters:(0,n().u4)()}},limit:i,source:"quick_find_input_change"})},this.resetFilters=()=>{this.update((e=>({...e,query:{...e.query,filters:(0,n().u4)()}})))},this.updateFilters=e=>{const t=this.state.query.filters,o=(0,n().jl)(t,e);this.setState({...this.state,query:{...this.state.query,filters:o},limit:i,source:"quick_find_filters"})},this.setIsAnyPopupOpen=e=>{this.update((t=>({...t,isPopupOpen:e})))},this.expandFilterBar=()=>{this.updateFilterBarVisibilityState(!0)},this.collapseFilterBar=()=>{this.updateFilterBarVisibilityState(!1)},this.updateFilterBarVisibilityState=e=>{var t;this.update((t=>({...t,filterBar:{...t.filterBar,show:e}})));const n=null===(t=o(876822).default.state.currentUserStore)||void 0===t?void 0:t.id;n&&o(35980).Z.set({userId:n,key:o(196442).rE,value:e})},this.updateQueryText=e=>{this.setState({...this.state,query:{...this.state.query,text:e},limit:i,source:"quick_find_input_change"})},this.switchToSearchPane=()=>{this.setState({...this.state,mode:"search"})}}getInitialState(){return{mode:"search",isSidePeekPanelOpen:!1,isDebugSidebarOpen:!1,query:{text:"",filters:(0,n().u4)(),sort:{field:"relevance"}},limit:i,source:"quick_find",hasScrolled:!1,filterBar:{order:["titleToggle","personFilter","teamsFilter","pageFilter","dateFilter","dev_notInPageFilter","dev_notInTeamFilter"],show:!0},isPopupOpen:!1}}updateFilterOrder(e){this.setState({...this.state,filterBar:{...this.state.filterBar,order:e}})}hasQuery(){return Boolean(this.state.query.text)}isDebugSidebarOpen(){return this.state.isDebugSidebarOpen}enableNavigationalMode(){const e=this.state.query.filters,t=(0,n().jl)(e,{navigableBlockContentOnly:!0});this.setState({...this.state,query:{...this.state.query,filters:t},source:"quick_find_navigational_mode"})}disableNavigationalMode(){const e=this.state.query.filters,t=(0,n().jl)(e,{navigableBlockContentOnly:!1});this.setState({...this.state,query:{...this.state.query,filters:t},source:"quick_find"})}}a.Mode=r;const s=new a},645805:(e,t,o)=>{o.r(t),o.d(t,{HOVER_REGIONS:()=>r,default:()=>h,getExactSelectableRect:()=>g,getExpandedSelectableRect:()=>f,getHoverRegionOfRect:()=>m});o(267602),o(731107);var n=()=>o(696459),i=()=>o(35982);const r=["top-left-corner","bottom-left-corner","above-content","below-content"],a=.7,s=150,l=150,c=12,d=4,u=16,p=8;function m(e,t,o,i,r){const l=e.left+(i??0);switch(t){case"top-left-corner":return new DOMRect(Math.max(0,l-s),e.top-Math.max(c,r??0),l-Math.max(0,l-s),Math.max(u,r??0));case"bottom-left-corner":return new DOMRect(Math.max(0,l-s),e.bottom-d,l-Math.max(0,l-s),u);case"above-content":return new DOMRect(l,e.top-Math.max(p,r??0),(o??e.width)*a,Math.max(p,r??0));case"below-content":return new DOMRect(l,e.bottom,(o??e.width)*a,p);default:(0,n().t1)(t)}}function f(e,t,o,n,a){return[...r.map((t=>m(e,t,o,n,a))),g(e,t)].reduce(((e,t)=>i().AV(e,t)),e)}function g(e,t){return i().AM(e,{top:0,bottom:0,left:s,right:t?l:0})}class v extends(()=>o(263184))().default{getInitialState(){return{isOpen:!1}}isRightMarginCommentHovered(){const e=this.state,t=e.isOpen&&e.selectableBoundingRect;if(t){var o;if(null!==(o=e.currentStore)&&void 0!==o&&o.isImmediateColumnChild())return!1;const n=t.width*a+t.x;return e.mouseX>n}return!1}}const h=new v},797522:(e,t,o)=>{o.r(t),o.d(t,{default:()=>r});class n extends(()=>o(263184))().default{getInitialState(){return{selectableRectMap:new Map,selectableContainerRectMap:new Map,selectableElementRectMap:new Map,lastUpdate:0}}hasBeenUpdatedSince(e){return this.state.lastUpdate>e}}const i=new n;(0,o(947115).exposeDebugValue)("SelectableRectStore",i);const r=i},965903:(e,t,o)=>{o.r(t),o.d(t,{SelectionPhase:()=>i,default:()=>a});o(267602),o(653476),o(470928),o(241792);var n=()=>o(482162);let i=function(e){return e[e.Selected=0]="Selected",e[e.Editing=1]="Editing",e}({});class r extends(()=>o(263184))().default{getInitialState(){return{stores:[],phase:i.Selected}}cloneState(){return{stores:[...this.state.stores],phase:this.state.phase}}getEditing(){if(this.state.phase===i.Editing)return this.state.stores[0]}isSelected(){return this.state.stores.length>0&&this.state.phase===i.Selected}getNodes(){return this.state.stores.map((e=>o(32969).C.findNodeFromStore(e)||void 0)).filter(o(696459).$K)}getCurrentRootStore(){var e,t;const n=null===(e=this.getCurrentDefaultContainer())||void 0===e?void 0:e.getProps().store;return n&&n instanceof o(826955).G?n:null===(t=this.getDefaultContainer())||void 0===t||null===(t=t.getProps())||void 0===t?void 0:t.store}getCurrentRecordCache(){const e=this.getCurrentRootStore();if(e)return e.inMemoryRecordCache}getDefaultContainerFromTarget(e){return o(352761).Z.find((t=>{const o=t.getNode();return Boolean(o&&o.contains(e))}))}getCurrentDefaultContainer(){const e=this.state.anchorContainer;return e||this.getDefaultContainer()}getDefaultContainer(){const e=this.state.defaultContainerStack;if(e&&e.length>0)return e[e.length-1]}isInPeekRenderer(){if(this.state.anchorContainer)return Boolean(this.state.anchorContainer.isPeekRenderer());{var e;const t=Boolean(null===(e=this.state.anchor)||void 0===e?void 0:e.isPageBlock()),o=n().default.state.open&&this.state.anchor===n().default.state.targetStore;return t&&o}}}const a=new r},200936:(e,t,o)=>{o.d(t,{E:()=>i});var n=()=>o(35982);class i{constructor(e){this.rect=o(263184).default.createValue(n().bM,{name:"rect"}),this.el=void 0,this.resizeObserver=void 0,this.recomputeThrottled=void 0,this.recompute=()=>{var e;const t=(null===(e=this.el)||void 0===e?void 0:e.getBoundingClientRect())??n().bM;return this.rect.setState(t),t};const t=(null==e?void 0:e.throttleMs)??10;t&&(this.recomputeThrottled=o(513670).P2(this.recompute,t,{leading:!0,trailing:!0}))}observe(e){var t;this.el!==e&&(null===(t=this.resizeObserver)||void 0===t||t.disconnect(),this.el=e,"undefined"!=typeof ResizeObserver&&(this.resizeObserver=new ResizeObserver(this.getRecomputeFn()),this.resizeObserver.observe(this.el)),this.recompute())}destroy(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=void 0),this.el=void 0}getRecomputeFn(){return this.recomputeThrottled||this.recompute}}},584989:(e,t,o)=>{o.d(t,{JY:()=>i,Ty:()=>n,ZP:()=>a});const n=5e3,i=1e4;class r extends(()=>o(263184))().default{getInitialState(){return{currentItem:void 0,shouldReset:!0}}}const a=new r},72950:(e,t,o)=>{o.d(t,{Q:()=>n,Z:()=>r});let n=function(e){return e.Members="members",e.Groups="groups",e.Guests="guests",e.Reprovisioning="reprovisioning",e.Requests="requests",e}({});class i extends(()=>o(263184))().default{getInitialState(){return{currentTab:n.Members,limitMembers:!0,limitGuests:!0,limitTeamGuests:!0,membersFilter:"",guestsFilter:"",teamGuestsFilter:"",groupsFilter:"",groupNameInputValue:"",upsellModalOpen:!1,sorts:{members:{group:"members",by:"role",asc:!1},guests:void 0,team_guests:void 0}}}}const r=i},838266:(e,t,o)=>{o.d(t,{R:()=>n,default:()=>r});let n=function(e){return e[e.OpenInDesktopApp=0]="OpenInDesktopApp",e[e.TwoStepVerification=1]="TwoStepVerification",e[e.LanguageSetting=2]="LanguageSetting",e[e.StudentPlanOffer=3]="StudentPlanOffer",e}({});class i extends(()=>o(263184))().default{getInitialState(){return{open:!1,currentTab:"settings",defaultSubtab:void 0,highlightedSetting:void 0,openedFrom:void 0}}}const r=new i},145613:(e,t,o)=>{o.d(t,{U:()=>n,Z:()=>r});let n=function(e){return e.CurrentSpace="current-space",e.TargetSpace="domain-claim-upgrade-team-plan-workspace",e}({});class i extends(()=>o(263184))().default{getInitialState(){return{open:!1,type:n.CurrentSpace}}closeWithSuccess(){this.setState({open:!1,succeeded:!0})}closeWithFailure(){this.setState({open:!1,succeeded:!1})}open(e){const{subscriptionTier:t,addOnFeature:o,billingInterval:i,coupon:r,isTrial:a,sessionId:s,dismissMobilePlansModal:l}=e;this.setState({open:!0,temporaryBillingInterval:i,temporaryAddress:{name:"",businessName:"",addressLine1:"",addressLine2:"",zipCode:"",city:"",state:"",country:""},appliedPromo:void 0,error:void 0,subscriptionTier:t,vatApplicable:!1,calculatingTax:!1,payButtonState:"enabled",type:n.CurrentSpace,addOnFeature:o,onlyShowAddOn:void 0!==o,sessionId:s,coupon:r,isTrial:a,dismissMobilePlansModal:l})}setAddressField(e){this.state.open&&this.setState({...this.state,temporaryAddress:{...this.state.temporaryAddress,...e},taxCalculationError:void 0})}}const r=new i},77785:(e,t,o)=>{o.d(t,{Z:()=>n});const n=new(o(41158).D)({key:"spreadsheet_prototype_store",namespace:o(149310).$p,important:!1,trackingType:"necessary"})},764189:(e,t,o)=>{o.d(t,{default:()=>a,n:()=>r});class n extends(()=>o(263184))().default{constructor(){super(...arguments),this.updateRemaining=e=>{this.state.remainingPending!==e&&(0===e?this.setState({...this.state,totalPending:0,remainingPending:0}):this.setState({...this.state,remainingPending:e}))}}getInitialState(){return{totalPending:0,remainingPending:0,transactionQueueError:void 0,storageUsageEstimate:void 0,connectionError:void 0}}percentComplete(e){if(this.state.totalPending>0){const t=1-this.state.remainingPending/this.state.totalPending;return e.formatNumber(t,{style:"percent",maximumFractionDigits:0})}return e.formatNumber(1,{style:"percent"})}setOrIncTotal(e){this.state.totalPending>e?this.setState({...this.state,totalPending:this.state.totalPending+1}):this.setState({...this.state,totalPending:e})}}const i=new n,r=new(o(435308).default)((()=>Boolean(i.state.transactionQueueError)),{debugName:"transactionQueueUnhealthyStore"}),a=i},601322:(e,t,o)=>{o.d(t,{Om:()=>i,_W:()=>a,o:()=>r});var n=()=>o(764189);function i(){n().default.setState({...n().default.state,connectionError:void 0})}function r(e){const{connectionError:t}=n().default.state,o=Date.now(),i=void 0===e.backoffEstimate?void 0:e.backoffEstimate+o;n().default.setState({...n().default.state,connectionError:{startTime:(null==t?void 0:t.startTime)??o,numAttempts:t?t.numAttempts+1:1,approximateBackoffDelayEndTime:i,retryReason:e.retryReason??(null==t?void 0:t.retryReason)}})}const a={onReset:i,onBackoff(e,t){r({backoffEstimate:e,retryReason:t})}}},636228:(e,t,o)=>{o.d(t,{Z:()=>i});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624);class n extends(()=>o(263184))().default{getInitialState(){return{syncingProperties:new Set,syncingComments:new Set}}}const i=new n},677006:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o(263184).default.createValue(void 0,{name:"TeamHighlightStore"})},700696:(e,t,o)=>{o.d(t,{default:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{teams:[],teamAggregateData:{},lastEmitData:{value:"no value saved yet",spaceId:void 0,userId:void 0}}}}const i=new n},452842:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{isDuplicating:!1}}}const i=new n},127519:(e,t,o)=>{o.r(t),o.d(t,{TextSelectionStore:()=>l,default:()=>c});var n=()=>o(435308),i=()=>o(513670),r=()=>o(632314),a=()=>o(191003),s=()=>o(826955);class l extends(()=>o(263184))().default{constructor(){super(...arguments),this.isEditingStore=new(n().default)((()=>"editing"===this.state.mode),{debugName:"isEditingStore"}),this.isExpandedStore=new(n().default)((()=>"empty"!==this.state.mode&&!(0,a().iG)(this.state.multiSelection)),{debugName:"isExpandedStore"})}getInitialState(){return{mode:"empty"}}setState(e){if("empty"===e.mode||"empty"===this.instanceState.mode)return super.setState(e);if(!(0,r().Z)(this.instanceState,e)){const{savedSelectionXPosition:t,...n}=this.instanceState,{savedSelectionXPosition:i,...a}=e;this.instanceState=e,o(198863).logStoreSet(this,e),(0,r().Z)(n,a)||this.emit()}}cloneState(){return"editing"===this.state.mode?{mode:"editing",multiSelection:(0,a().k_)(this.state.multiSelection),savedSelectionXPosition:this.state.savedSelectionXPosition,forceExtendAnnotations:i().Xh(this.state.forceExtendAnnotations)}:"readOnly"===this.state.mode?{mode:"readOnly",multiSelection:(0,a().k_)(this.state.multiSelection),savedSelectionXPosition:this.state.savedSelectionXPosition}:{mode:"empty"}}isEmptySelection(){if(!this.hasSelection())return!0;const{multiSelection:e}=this.state;return(0,a().iG)(e)}isEditingComment(){return"editing"===this.state.mode&&("comment"===this.state.multiSelection.start.store.table||"comment"===this.state.multiSelection.end.store.table)}isEditingFormQuestion(){return"editing"===this.state.mode&&("form_question"===this.state.multiSelection.start.store.table||"form_question"===this.state.multiSelection.end.store.table)}isEditingCaption(){return"editing"===this.state.mode&&(i().Xy(this.state.multiSelection.start.store.path,["properties","caption"])||i().Xy(this.state.multiSelection.end.store.path,["properties","caption"]))}hasSelection(){return"empty"!==this.state.mode}isEditingEmptyBlock(){return!(!this.hasSelection()||!this.isEmptySelection())&&!this.state.multiSelection.start.store.isDefined()}getRootBlockStoreOfSelection(){const e=this.hasSelection()&&this.state.multiSelection&&this.state.multiSelection.start.store.getAncestorRecordStoreAtRootPath();return e&&e instanceof s().G?e:void 0}getRootFormQuestionStoreOfSelection(){const e=this.hasSelection()&&this.isEditingFormQuestion()&&this.state.multiSelection.start.store.getAncestorRecordStoreAtRootPath();return e&&e instanceof s().cq?e:void 0}}const c=new l},975611:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{toasts:{}}}}const i=new n},445264:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{}}setOpen(e,t){this.setState({...this.state,[e]:t})}toggle(e){this.setState({...this.state,[e]:!this.isOpen(e)})}isOpen(e){return!!this.state[e]}}const i=new n},499829:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{focused:!1,hovered:!1}}}const i=n},406012:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o(263184).default.createValue(!1)},374469:(e,t,o)=>{o.d(t,{Z:()=>n});const n=new(o(529048).Z)},342267:(e,t,o)=>{o.d(t,{Z:()=>n});const n=new(o(529048).Z)},89073:(e,t,o)=>{o.d(t,{Z:()=>n});const n=new(o(529048).Z)},504446:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{isDragging:!1}}}const i=new n},268343:(e,t,o)=>{o.r(t),o.d(t,{TransactionQueueDependenciesImpl:()=>d,splitSaveTransactionsRequest:()=>m});o(670560),o(241792);var n=()=>o(799891),i=()=>o(126139),r=()=>o(255933),a=()=>o(128129),s=()=>o(181758);o(267602),o(653476);function l(e){const{environment:t,multiCellBatches:n}=e,i=n.length,r=n.filter((e=>"main"===e.type)).length,a=n.filter((e=>"currentSpace"===e.type)).length,s=(0,o(513670).jj)(n.filter((e=>"space"===e.type)).map((e=>e.spaceId))).length,l=0===s?"zero":s>1?"multi":"match",c=r>0?"main":"zero";o(594546).j({environment:t,event:{eventName:"saveTransactions.multi_cell.num_batches",eventProperties:{num_batches:i,main_cardinality:c,space_cardinality:l,is_missing_space_id:a>0}}})}var c=()=>o(749826);class d{constructor(e){this.timeSource=o(158418).O,this.environment=e}getExperimentGroup(e){return c().default.getGroup(e)}async handleSaveTransactions(e){const t=c().default.checkGate({gateName:"multi_cell_savetransactions"}),n=(0,o(836842).localUserOnlyGetConfig)("multi_cell_savetransactions_metrics"),i=(null==n?void 0:n.get("batch_sample_percent",0))??0,r=(0,o(150266).lB)(i);if(t||r){const o=m(e);if(r&&l({environment:this.environment,multiCellBatches:o}),t){const e=[];for(const[t,n]of o.entries()){const i=n.transactions,r=await(0,s().C3)({environment:this.environment,cellType:n.type,spaceId:"space"===n.type?n.spaceId:void 0,tasks:i});if(r.error){const n=o.slice(t+1);let i=r.error.retryReason,a=r.error.retryDelay;return n.length>0&&!i&&(i="UntriedTransactionError",a=2e3),{error:new(s().x7)({message:r.error.message,clientData:r.error.clientData,retryDelay:a,retryReason:i,savedTasks:[...e,...r.error.savedTasks],failedTasks:[...r.error.failedTasks]})}}e.push(...r.value)}return{value:e}}}return(0,s().C3)({environment:this.environment,tasks:e,cellType:"legacy"})}handleHealthcheck(e){o(540520).h2(this.environment,e)}async rollbackTask(e){try{await(0,o(935439).L)(this.environment,e)}catch(t){n().log({level:"error",from:"TransactionQueueDependencies",type:"ClientTransactionCleanupError",error:(0,o(792409).Ui)(t),data:{userId:this.environment.currentUser.id}})}}}const u="curSpaceId",p="mainCellId";function m(e){const t=[];let o=u,i=[];for(const r of e){let e;r.spaceId&&(e=r.spaceId);for(const t of r.operations){if(!(0,a().IO)(t.pointer.table)||g(t)){e=p;break}if(t.pointer.spaceId){if(void 0!==e&&e!==t.pointer.spaceId){e=p;break}e=t.pointer.spaceId}}e!==r.spaceId&&n().log({level:"warning",from:"TransactionQueueDependencies",type:"MultiSpaceTransactionWarning",data:{message:`Top level space id does not match final space id. Transaction pointers: ${JSON.stringify(r.operations.map((e=>e.pointer)))}`,miscDataToConvertToString:{spaceIdForTransaction:e,transactionSpaceId:r.spaceId,debug:r.debug}}}),e||(e=u),o!==e?(i.length>0&&t.push(f({transactions:i,spaceIdForBatch:o})),i=[r],o=e):(o=e,i.push(r))}return i.length>0&&t.push(f({transactions:i,spaceIdForBatch:o})),0===t.length&&t.push({transactions:e,type:"currentSpace"}),t}function f(e){const{transactions:t,spaceIdForBatch:o}=e;return o===p?{transactions:t,type:"main"}:o===u?{transactions:t,type:"currentSpace"}:{transactions:t,spaceId:o,type:"space"}}function g(e){return e.pointer.table===i().Tu&&"update"===e.command&&e.args.target_table===r().bx&&1===e.args.version}},394961:(e,t,o)=>{o.d(t,{Z:()=>r});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624);class n extends(()=>o(263184))().default{getInitialState(){return{unsyncingBlockIds:new Set}}addUnsyncingBlockId(e){this.getState().unsyncingBlockIds.add(e),this.emit()}removeUnsyncingBlockId(e){this.getState().unsyncingBlockIds.has(e)&&(this.getState().unsyncingBlockIds.delete(e),this.emit())}}const i=new n;(0,o(947115).exposeDebugValue)("TransclusionBlockStore",i);const r=i},289039:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{trustedDomainPointers:[],enabledTrustedEmailDomains:[],lastEmitData:{value:-1,spaceId:void 0}}}getForSpace(e){if(!e)return;const{enabledTrustedEmailDomains:t,trustedDomainPointers:o,lastEmitData:n}=this.state;return n.spaceId===e.id?{enabledTrustedEmailDomains:t,trustedDomainPointers:o}:void 0}shouldRefetchTrustedDomains(e){let{currentSpaceId:t,emitValue:o}=e;const{spaceId:n,value:i}=this.state.lastEmitData;return t!==n||o!==i}}const i=n},515323:(e,t,o)=>{o.d(t,{U:()=>i,m:()=>r});o(821057),o(241792);var n=()=>o(730120);const i=new(o(168469).q)((e=>{let{spaceId:t}=e;return t}),(async(e,t)=>{let{spaceId:n}=t;if(n.includes("|"))throw new Error("Invalid spaceId, you're likely passing a spaceUserId instead");const i=await Promise.resolve().then(o.bind(o,824462)),a=await i.callApi({eventName:"getBillingData",environment:e,data:{spaceId:n},headers:(0,o(741633).Bb)({cellId:void 0,spaceId:n})});if("success"===a.type&&a.data.billingData)return r(a.data.billingData)}));function r(e){return"admin"===e.type?{type:e.type,externalId:e.externalId,email:e.email,address:e.address,provider:e.provider,clock:{now:n().ou.fromISO(e.clock.now),externalId:e.clock.externalId},paymentMethod:e.paymentMethod,invoices:e.invoices.map((e=>({externalId:e.externalId,status:e.status,paymentIntent:e.paymentIntent,overrides:e.overrides,externalSubscriptionId:e.externalSubscriptionId,dueDate:e.dueDate?n().ou.fromISO(e.dueDate):void 0,createdAt:n().ou.fromISO(e.createdAt)}))),subscription:e.subscription?{externalId:e.subscription.externalId,status:e.subscription.status,items:e.subscription.items,unrepresentableReason:e.subscription.unrepresentableReason,startDate:n().ou.fromISO(e.subscription.startDate),trialEnd:e.subscription.trialEnd?n().ou.fromISO(e.subscription.trialEnd):void 0,currentPeriodEnd:n().ou.fromISO(e.subscription.currentPeriodEnd),pending:e.subscription.pending?{items:e.subscription.pending.items,startDate:n().ou.fromISO(e.subscription.pending.startDate)}:void 0}:void 0,lockedCurrencyCode:e.lockedCurrencyCode,taxIds:e.taxIds,accountBalances:e.accountBalances}:{type:e.type,provider:e.provider,subscription:e.subscription}}o(947115).exposeDebugValue("TypedBillingDataStore",i)},56424:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1}}}const i=new n},658735:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1}}}const i=new n},643669:(e,t,o)=>{o.d(t,{Z:()=>i});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624);class n extends(()=>o(263184))().default{getInitialState(){return{updatingUrls:new Set}}add(e){this.state.updatingUrls.add(e),this.emit()}delete(e){this.state.updatingUrls.delete(e),this.emit()}}const i=new n},577325:(e,t,o)=>{o.d(t,{Z:()=>n});const n=new(o(529048).Z)},781022:(e,t,o)=>{o.d(t,{default:()=>s,g:()=>r,n:()=>l});var n=()=>o(263184),i=()=>o(696459);function r(e){return"mentions"===e||"allPages"!==e&&"archive"!==e&&void(0,i().t1)(e)}class a extends n().default{getInitialState(){return{currentTab:"mentions",isCurrentTabEmpty:!0,containsBothReadAndUnreadNotifications:!1,containsUnreadNotifications:!1,loadingId:void 0,sessionId:void 0,showOnlyUnreadNotifications:!1,unreadNotificationIds:[]}}startSession(){let{forceRestart:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(void 0===this.state.sessionId||e)&&this.setState({...this.state,sessionId:o(956057).Il()})}endSession(){this.setState({...this.state,sessionId:void 0})}startLoading(){const e=Math.random().toString();return this.setState({...this.state,loadingId:e}),e}endLoading(e){e===this.state.loadingId&&this.setState({...this.state,loadingId:void 0})}isFilteredToUnreadOnly(){if("mentions"===this.state.currentTab)return this.state.showOnlyUnreadNotifications}}const s=new a,l=n().default.createValue(!0,{name:"UpdatesScrolledToTopStore"})},56764:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{readyPromise:(0,o(839002).UZ)(),localSpaceInaccessiblePages:void 0,remoteSpaceInaccessiblePages:void 0}}getSpaceInaccessiblePages(e,t){const o=this.state;return o.remoteSpaceInaccessiblePages&&o.remoteSpaceInaccessiblePages[t]?o.remoteSpaceInaccessiblePages[t][e]:o.localSpaceInaccessiblePages&&o.localSpaceInaccessiblePages[t]?o.localSpaceInaccessiblePages[t][e]:void 0}}const i=new n},620252:(e,t,o)=>{o.d(t,{x:()=>n});const n=new(o(168469).q)((e=>{let{spaceId:t}=e;return t}),(async function(e,t){let{spaceId:n}=t;const i=await Promise.resolve().then(o.bind(o,824462)),r=await i.callApi({eventName:"countUsers",environment:e,data:{spaceId:n}});return"success"===r.type?r.data.counts:void 0}));o(947115).exposeDebugValue("UserCountsStore",n)},768905:(e,t,o)=>{o.r(t),o.d(t,{USER_SIGNALS_KEYS:()=>r,default:()=>u,getInitialUserSignalsState:()=>a,shouldPersistUserSignals:()=>c});var n=()=>o(263184),i=()=>o(876822);const r=["recentPages","similarUserRecentPages","topPages7dPageView","editedPages","similarUsersEditedPages"];function a(){return{lastUpdatedTime:void 0,recentPages:[],similarUserRecentPages:{},topPages7dPageView:[],editedPages:[],similarUsersEditedPages:[]}}class s extends n().default{getInitialState(){return{lastUpdatedTime:void 0,recentPages:[],similarUserRecentPages:{},topPages7dPageView:[],editedPages:[],similarUsersEditedPages:[]}}}class l extends n().default{getInitialState(){return{stores:{},refreshIntervalId:void 0}}getStore(e){let{spaceId:t,userId:n,version:i}=e;const r=function(e){let{spaceId:t,userId:o,version:n}=e;return`userSignals:${t}:${o}:${n??0}`}({spaceId:t,userId:n,version:i});return this.state.stores[r]||(c()?(this.instanceState.stores[r]=new(o(41158).D)({key:r,namespace:o(149310).$p,important:!0,trackingType:"necessary"}),void 0===this.instanceState.stores[r].state&&this.instanceState.stores[r].setState({lastUpdatedTime:void 0,recentPages:[],similarUserRecentPages:{},topPages7dPageView:[],editedPages:[],similarUsersEditedPages:[]})):this.state.stores[r]=new s),this.state.stores[r]}getUserSignals(e){const t=this.getStore(e).state;return o(513670).CE(t,"lastUpdatedTime")}setUserSignals(e){const{spaceId:t,userId:o,userSignals:n,initialize:i}=e,r=this.getStore({spaceId:t,userId:o});let a={lastUpdatedTime:void 0,recentPages:[],similarUserRecentPages:{},topPages7dPageView:[],editedPages:[],similarUsersEditedPages:[]};!i&&r.state&&(a=r.state),r.setState({...a,...n,lastUpdatedTime:Date.now()})}}function c(){var e;const t=d.state.shouldPersist;return void 0!==t?t:!(null===(e=i().default.getState().currentSpaceStore)||void 0===e||!e.environment.defaultRecordCache.persistedRecordCache)}const d=new l,u=d},365609:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{pageMap:{}}}setStatus(e,t){const{pageMap:o}=this.state;t?o[e]=!0:delete o[e],this.emit()}}const i=new n},36560:(e,t,o)=>{o.d(t,{githubAIConnectorStore:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{currentScreen:"none",selection:{allSelected:!0,selectedRepos:[],excludedRepos:[],ingestNewRepos:!0},status:"not_started",sessionId:o(956057).Il(),analyticsFrom:"unknown",authUrl:void 0,githubOrg:void 0,isConnected:!1,isPersonalAuthComplete:!1,isDisconnecting:!1,forceShowGithubAuthNotificationTriggeredAt:void 0}}}const i=new n},95718:(e,t,o)=>{o.d(t,{D:()=>g,Eo:()=>d,GA:()=>p,Js:()=>m,UV:()=>u,f9:()=>l,wY:()=>f,xR:()=>c});o(267602),o(653476),o(241792),o(228244);var n=()=>o(572680),i=()=>o(513670),r=()=>o(696459),a=()=>o(379072),s=()=>o(845622);function l(){return i().oA([a().default.getActiveSession(),m()])}function c(e){return l().some((t=>t.groupedPendingOperations.state.some((t=>t.pageId===e))))}function d(e){const t=e.getNavigableBlockStore();return Boolean(t&&c(t.id))}function u(e){const t=e.getNavigableBlockStore();if(!t)return!1;const o=t.id;return l().some((e=>e.groupedPendingOperations.state.some((e=>"updatedPage"===e.type&&e.pageId===o&&e.didCreatePage))))}function p(e){const t=a().default.getActiveSession();if(!t)return[];const o=(0,n().NK)(e.RouterStore.state.route);return t.groupedPendingOperations.state.filter((0,r().AO)((e=>"updatedPage"===e.type&&e.didCreatePage?{true:e}:{false:e}))).filter((e=>o.includes(e.pageId)))}function m(){const e=s().default.state;if("assistantCompletionPopup"===e.type)return a().default.getSessionContext(e.sessionId)}function f(){const e=a().default.getActiveSession();if(!e)return;return e.groupedPendingOperations.state.filter((e=>"updatedPage"===e.type&&e.didCreatePage)).map((e=>e.pageId))}function g(){return l().some((e=>e.getAllPendingNonCreateExecutableOperations().length>0))}},533915:(e,t,o)=>{o.d(t,{Z:()=>r});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1}}getFlowId(){return this.state.open&&this.state.flowId}}const i=new n,r=i;(0,o(947115).exposeDebugValue)("SalesforceStore",i)},517632:(e,t,o)=>{o.d(t,{C:()=>a,Z:()=>i});o(821057);var n=()=>o(836842);const i="group";class r extends(()=>o(263184))().default{constructor(){super(...arguments),this.environment=void 0}getInitialState(){return{currentUserId:void 0,currentSpaceId:void 0,ready:!0}}isInitialized(){return n().StatsigInitializer.isComplete}getStatsigClient(){if(!this.isInitialized())return;const e=n().statsigClientLoader.getPhaseTwoInstanceSync();return e||void 0}isReadyWithUserAndSpaceId(){return!0}getGroup(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i;const r=Date.now(),a=this.getStatsigClient();if(!a)return;let s;try{return s=t?a.getExperiment(e,{disableExposureLog:!0}):a.getExperiment(e),this.trackMetric("statsig_client_get_group_success",{experiment_id:e}),(0,o(801916).NC)(s,n)}catch(l){this.trackMetric("statsig_client_get_group_error",{experiment_id:e}),this.logError("getGroup",l,{experimentId:e,expConfig:JSON.stringify(s)})}finally{this.trackMetric("statsig_client_get_group_duration",{time:Date.now()-r})}}manuallyLogExperimentExposure(e){const t=this.getStatsigClient();t&&t.getExperiment(e)}checkGate(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const o=Date.now(),n=this.getStatsigClient();if(!n)return!1;let i;try{return i=t?n.checkGate(e,{disableExposureLog:!0}):n.checkGate(e),this.trackMetric("statsig_client_check_gate_success",{gate_name:e}),i}catch(r){const t=r instanceof Error?r.message:void 0;return this.logError("checkGate",r,{gateName:e,...t&&{errorMessage:t}}),this.trackMetric("statsig_client_check_gate_error",{gate_name:e}),!1}finally{this.trackMetric("statsig_client_check_gate_duration",{time:Date.now()-o})}}getConfig(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const o=Date.now(),n=this.getStatsigClient();if(!n)return;let i;try{return i=t?n.getDynamicConfig(e):n.getDynamicConfig(e,{disableExposureLog:!0}),this.trackMetric("statsig_client_get_config_success",{config_name:e}),i}catch(r){const t=r instanceof Error?r.message:void 0;return this.logError("getConfig",r,{dynamicConfigName:e,...t&&{errorMessage:t}}),void this.trackMetric("statsig_client_get_config_error",{config_name:e})}finally{this.trackMetric("statsig_client_get_config_duration",{time:Date.now()-o})}}logEvent(e,t,o){const n=Date.now(),i=this.getStatsigClient();if(!i)return!1;try{return i.logEvent(e,t,o),this.trackMetric("statsig_client_log_event_success",{event_name:e}),!0}catch(r){const n=r instanceof Error?r.message:void 0;return this.logError("logEvent",r,{eventName:e,value:String(t),...o,...n&&{errorMessage:n}}),this.trackMetric("statsig_client_log_event_error",{event_name:e}),!1}finally{this.trackMetric("statsig_client_log_event_duration",{time:Date.now()-n})}}getLocalOverride(e){var t;const o=null===(t=this.getOverrideAdapter())||void 0===t||null===(t=t.getAllOverrides())||void 0===t?void 0:t.experiment[e];return null==o?void 0:o[i]}getAllLocalOverrides(){var e;return null===(e=this.getOverrideAdapter())||void 0===e?void 0:e.getAllOverrides()}updateLocalOverrideConfig(e,t){var o;null===(o=this.getOverrideAdapter())||void 0===o||o.overrideExperiment(e,{[i]:t})}updateLocalOverrideGate(e,t){var o;null===(o=this.getOverrideAdapter())||void 0===o||o.overrideGate(e,"true"===t)}getIsExperimentActive(e){var t;const o=this.getStatsigClient();return!!o&&!(null===(t=o.getExperiment(e).__evaluation)||void 0===t||!t.is_experiment_active)}removeAllLocalOverrides(){var e;null===(e=this.getOverrideAdapter())||void 0===e||e.removeAllOverrides()}getOverrideAdapter(){var e;const t=null===(e=this.getStatsigClient())||void 0===e?void 0:e.overrideAdapter;return t&&t.setPreSaveFunction((()=>{this.emit()})),t}logError(e,t,n){o(799891).log({level:"error",from:"statsig",type:e,error:(0,o(792409).Ui)(t),data:{miscDataToConvertToString:{...n,...this.state}}})}trackMetric(e,t){this.environment&&e.endsWith("_error")&&o(594546).K4(this.environment,e,{...t,statsig_init_method:"classic"})}}const a=new r},538992:(e,t,o)=>{o.d(t,{Cl:()=>S,jw:()=>w,k2:()=>b,lx:()=>k,v5:()=>y});o(821057),o(267602),o(653476),o(241792);var n=()=>o(956057),i=()=>o(933868),r=()=>o(989478),a=()=>o(657120),s=()=>o(381348),l=()=>o(680146),c=()=>o(513670),d=()=>o(696459),u=()=>o(979614),p=()=>o(876822),m=()=>o(826955),f=()=>o(18281),g=()=>o(547526),v=()=>o(404791),h=()=>o(897257),_=()=>o(965014);function b(e){g().default.setState({open:!0,addOnFeature:e,stage:"limit_reached",addOnUpgradeId:n().Il(),tax:0})}function y(){g().default.setState({open:!1})}function S(e){const t=g().default.state;t.open&&g().default.setState({...t,stage:"confirm_purchase",coupon:e&&(0,s().pp)(e)?e:void 0})}async function w(e){const{environment:t,spaceStore:o,from:n}=e,s=function(){const e=h().subscriptionDataStoreInstance.state,t=(e?f().CM(e):[]).filter((e=>(0,a().nB)(e)&&(0,i().zz)(e.role))).map((e=>e.userId));if(!t||0===t.length)throw new Error("No admins found in the current space");return(0,c().UP)(t)}(),d=o.getName(),p=m().U6.createChildStore(o,{table:r().KJ,id:s});await p.load();const g=p.getEmail();g?u().bf(t,{admin_id:s,admin_email:g,space_name:d,from:n}):l().IE(new Error("Could not get email for admin in sendMemberRequestForAddOn"))}function k(e){const{environment:t,upsellType:o,isAssistantEnabled:n}=e;if("upsell"===o)(0,_().y)(t,{from:n?"ai_assistant_limit_in_app":"ai_qna_limit_in_app",upsell:{type:"product",product:"ai",limit:{type:"none"}}});else if("requestAccess"===o||"requestAccessNoFreeCredits"===o){const e=p().default.state.currentSpaceStore;if(!e)return;w({environment:t,spaceStore:e,from:n?"ai_assistant_limit_in_app":"ai_qna_limit_in_app"});const o=v().Z.state;o&&!o.isEligible&&v().Z.setState({...o,requestedAccess:!0})}else(0,d().t1)(o)}},807230:(e,t,o)=>{o.d(t,{hT:()=>T,eD:()=>C,ww:()=>x});o(667294);var n=()=>o(475593),i=()=>o(836273),r=()=>o(788860),a=()=>o(979614),s=()=>o(917801),l=()=>o(308186),c=()=>o(369637),d=()=>o(500174),u=()=>o(527278),p=()=>o(148126),m=()=>o(876822),f=()=>o(9599),g=()=>o(548812),v=()=>o(18281),h=()=>o(93543),_=()=>o(30795),b=()=>o(897257);const y=(0,o(827282).CZ)("creditCard",{default:{loader:()=>o.e(67190).then(o.bind(o,567190))},small:{loader:()=>o.e(67190).then(o.bind(o,567190))},mini:{loader:()=>o.e(67190).then(o.bind(o,567190))},large:{loader:()=>o.e(67190).then(o.bind(o,567190))}});var S=()=>o(454393),w=o(785893);var k=()=>o(965014);const I=(0,r().vU)({overFreeBlockLimitMobileNativeDialog:{id:"subscriptionActions.overFreeBlockLimit.mobileNativeDialog",defaultMessage:"Your free blocks have been used up. Unfortunately, unlimited blocks cannot be purchased on mobile."}});function C(e){if((0,h().K)(e))return c().m2(function(){const e=(0,v().GJ)(b().subscriptionDataStoreInstance.state);return{id:"unpaid_invoice_toast",presentationType:"transient",iconGroup:y,iconGroupVariant:"default",iconGroupColorName:"tertiary",title:(0,w.jsx)(r()._H,{id:"subscriptionActions.unpaidInvoice.toast.title",defaultMessage:"Payment not processed"}),message:e?(0,w.jsx)(r()._H,{id:"subscriptionActions.unpaidInvoice.toast.admin.message",defaultMessage:"Go to the Billing tab in Settings to verify your payment method."}):(0,w.jsx)(r()._H,{id:"subscriptionActions.unpaidInvoice.member.toast.message",defaultMessage:"Contact a workspace owner to verify your payment method so you can continue using Notion."}),actions:e?{primary:{title:(0,w.jsx)(r()._H,{id:"subscriptionActions.unpaidInvoice.toast.upgradeCta",defaultMessage:"Manage payment"}),onAction:()=>{S().r$({currentTab:"billing"}),c().Xd("unpaid_invoice_toast")}}}:void 0}}());c().m2(function(e){return{id:"out_of_blocks_toast",presentationType:"transient",iconGroup:n().g,iconGroupVariant:"default",iconGroupColorName:"uiBluePrimary",title:(0,w.jsx)(r()._H,{id:"subscriptionActions.overBlockLimit.toast.title",defaultMessage:"Upgrade to continue creating and collaborating on Notion"}),actions:{primary:{title:(0,w.jsx)(r()._H,{id:"subscriptionActions.overBlockLimit.toast.upgradeCta",defaultMessage:"Learn more"}),onAction:()=>{(0,k().y)(e,{from:"out_of_blocks_toast",upsell:{type:"product",product:"plus",limit:{type:"none"}}}),c().Xd("out_of_blocks_toast")}}}}}(e))}function x(e){var t;const o=b().subscriptionDataStoreInstance.state,n=g().YT(),i=null===(t=m().default.state.currentSpaceStore)||void 0===t?void 0:t.id;if(o&&i){const t=(0,_().W)(e,i,o),r=g().vT(t);if(g().du(t))return T(e),!0;if(r&&null!==n&&n>3)return T(e),!1;if(v().Ln(e,i,o,t))return a().lj(e),T(e),!1;v().XZ(o,e,i,t)&&a().z2(e)}return!h().K(e)&&(s().qL({bannerStore:f().Z,id:"SubscriptionEditingBlocker"}),!0)}function T(e){if(p().__(e)&&"new"===e.RouterStore.state.route.name){async function t(){const{navigateToHomeTab:t}=await Promise.resolve().then(o.bind(o,96271)),{navigateOnBaseUrl:n}=await Promise.resolve().then(o.bind(o,497065));t(e),n({environment:e,url:i()._j.root})}l().PV({message:u().Z.formatMessage(I.overFreeBlockLimitMobileNativeDialog),onAccept:()=>{t()}})}else s().Bw({id:"SubscriptionEditingBlocker",bannerStore:f().Z,styleKey:d().v.Red,contentKey:"over_free_block_limit"})}},788396:(e,t,o)=>{o.d(t,{Kl:()=>d,ju:()=>c,nx:()=>l});var n=()=>o(824462),i=()=>o(345918),r=()=>o(686350),a=()=>o(876822),s=()=>o(839197);function l(e){let{initialQuestion:t,openedFrom:o}=e;s().Z.setState({open:!0,initialQuestion:t,openedFrom:o})}async function c(e){let{environment:t,data:o,urlAnalytics:r}=e;const s=p(r),l=await u(t),c=a().default.state.currentSpaceStore;return await n().callApi({eventName:"submitMarketoForm",environment:t,data:{type:"contactSalesInApp",firstName:o.firstName,lastName:o.lastName,email:o.email,companyName:c?(0,i().rn)(t,c):"Untitled",companySize:f(o.companySize),country:l??"US",demoReason:g(o.question),message:o.additionalFeedback??void 0,ipCountry:l,...s}})}async function d(e){let{environment:t,data:o,urlAnalytics:r}=e;const{externalOrgSummary:s}=o,l=p(r),c=await u(t),d=a().default.state.currentSpaceStore,f=a().default.state.currentUserStore;if(!f||!d)return;const g=f.getName(),v=f.getEmail();if(!g||!v)return;const h=function(e){return"domain"in e?e.domain:void 0}(s),{firstName:_,lastName:b}=function(e){const[t,o]=e.trim().split(/\s+/);return{firstName:t,lastName:o}}(g);return await n().callApi({eventName:"submitMarketoForm",environment:t,data:{type:"pingSales",spaceId:d.id,firstName:_,lastName:b,email:v,domain:h,companyName:d?(0,i().rn)(t,d):"Untitled",companySize:m(s),country:c??"US",ipCountry:c,...l}})}async function u(e){return await(0,r().iF)(e)}function p(e){const{utm_source:t,utm_medium:o,utm_content:n,utm_campaign:i,utm_term:r,gclid:a}=e??{};return{gclid:a,utm_source:v(t),utm_medium:v(o),utm_content:v(n),utm_campaign:v(i),utm_term:v(r)}}function m(e){const t="company_employee_count"in e?parseInt(e.company_employee_count??0):0;return t<100?1:t<299?100:t<1999?300:2e3}function f(e){switch(e){case"<100":return 1;case"100-299":return 100;case"300-1999":return 300;case"2000+":return 2e3}}function g(e){switch(e){case"interest_in_enterprise":case"interest_in_business":return"enterprise";case"live_demo":return"demo";case"plan_help":return"pricing";case"manage_guests":case"other":return"other"}}function v(e){return"none"!==e?e:void 0}},444297:(e,t,o)=>{o.d(t,{n:()=>i});var n=()=>o(824462);async function i(e){const t=await n().callApi({eventName:"getExternalOrgData",environment:e,data:{}});if("failed"===t.type)return!1;const o=t.data;return"company_employee_count"in o&&parseInt(o.company_employee_count)>99}},576387:(e,t,o)=>{o.d(t,{EO:()=>d,Fp:()=>g,I0:()=>f,KD:()=>_,Mg:()=>i,OR:()=>u,TV:()=>a,XW:()=>c,Xb:()=>v,bi:()=>p,eS:()=>r,qg:()=>s,r7:()=>b,sv:()=>h,y3:()=>l,zb:()=>m});const n={subscriptionActions:new(o(677559).Ss)("subscriptionActions",(()=>Promise.all([o.e(17100),o.e(70206),o.e(97127)]).then(o.bind(o,70206))))},i=S(y("updateSubscription")),r=S(y("trackSubscriptionUpdate")),a=S(y("updatePaymentMethod")),s=S(y("payUnpaidInvoice")),l=S(y("updateAddress")),c=S(y("updateVatId")),d=(S(y("updateBillingEmail")),S(y("cancelSubscription"))),u=S(y("updateCurrentSpace")),p=S(y("refresh")),m=S(y("refreshBillingHistory")),f=S(y("openSubscriptionUpgradeModal")),g=S(y("closeSubscriptionUpgradeModal")),v=S(y("openSubscriptionUpgradeModalForClaimAndUpgrade")),h=S(y("handlePlanChangeClick")),_=S(y("handlePaymentIntentNextActions")),b=(S(y("applyStudentGitHubGrant")),S(y("updateSubscriptionToEducationPlan")));async function y(e){return await n.subscriptionActions.load().then((t=>t[e]))}function S(e){return function(){for(var t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];return e.then((e=>e(...o)))}}},254687:(e,t,o)=>{o.d(t,{Zz:()=>s,aQ:()=>c,yD:()=>l});o(821057),o(241792);var n=()=>o(161428),i=()=>o(680146),r=()=>o(824462),a=()=>o(419157);async function s(e){const{environment:t,spaceId:o}=e;if("init"!==a().Z.state.status)return;a().Z.didStartLoading();const s=await r().callApi({eventName:"listPrices",environment:t,data:{spaceId:o,countryCode:undefined}});if("success"!==s.type)return void a().Z.resetExceptSelectedCurrencyCode();const l=s.data.prices;l&&0!==l.length||i().IE(new Error("Received empty price list")),a().Z.setPrices(l.map((e=>new(n().tA)(e))),s.data.preferredDefaultCurrency)}function l(e){a().Z.availableCurrencyCodes.includes(e)&&a().Z.update((t=>({...t,selectedCurrencyCode:e})))}async function c(e){let{environment:t,spaceId:o}=e;return await s({environment:t,spaceId:o}),a().Z.state.prices}},768064:(e,t,o)=>{o.d(t,{SP:()=>I,W_:()=>S,km:()=>C,l_:()=>w,nf:()=>k,yA:()=>M,zW:()=>T});o(267602),o(653476),o(241792);var n=()=>o(875120),i=()=>o(629719),r=()=>o(948505),a=()=>o(681941),s=()=>o(122792),l=()=>o(513670),c=()=>o(696459),d=()=>o(824462),u=()=>o(205228),p=()=>o(876822),m=()=>o(518019),f=()=>o(145613),g=()=>o(18281),v=()=>o(547526),h=()=>o(46135),_=()=>o(419157),b=()=>o(634632),y=()=>o(897257);async function S(e){var t;let{environment:o,billingData:r,billingInterval:s,vatId:l,addOn:u,onlyShowAddOn:m}=e;const v=f().Z.state,h=y().subscriptionDataStoreInstance.state;if(!v.open||!h||!r)return;const b=(null==r?void 0:r.address)??v.temporaryAddress;if(!(0,n().A)(b))return;f().Z.update((e=>({...e,calculatingTax:!0})));const S=s??v.temporaryBillingInterval??"year",w=u??v.addOnFeature,k=m??v.onlyShowAddOn,I=null===(t=p().default.state.currentSpaceStore)||void 0===t?void 0:t.id;if(!I)return;const C=await(0,g().DI)(o,I,h),{planAmount:T,promoInfo:M,accountBalance:P}=(0,g().uN)({memberCount:C,promo:v.appliedPromo,currencyCode:_().Z.selectedCurrencyCode,billingData:r,addOnFeature:w,onlyShowAddOn:k,subscriptionTier:v.subscriptionTier,taxAmount:v.taxAmount,calculatingTax:v.calculatingTax,billingInterval:S,coupon:v.coupon}),A=Math.max(0,T-M.amount+P),R=[v.subscriptionTier,v.addOnFeature].map((e=>{switch(e){case void 0:return;case"ai":case"sites_custom_hostnames":return e;default:return(0,a().KE)(e)}})).map((e=>{const t=_().Z.getPrice(o,(t=>t.product===e&&t.billingInterval===s));return null==t?void 0:t.result})).map(x).filter(c().$K),B=await d().callApi({eventName:"calculateTax",environment:o,data:{address:b,lineItems:R,price:A,vatId:l??v.vatApplicable?v.temporaryVatCode:void 0,customerId:(0,i().KU)(r)}});if("failed"===B.type)f().Z.update((e=>({...e,taxAmount:void 0,calculatingTax:!1})));else{const e=B.data;e.valid?f().Z.update((t=>({...t,taxAmount:e.taxAmount,calculatingTax:!1,taxCalculationError:void 0}))):f().Z.update((t=>({...t,taxAmount:void 0,calculatingTax:!1,taxCalculationError:e.error})))}}async function w(e,t){var o;const a=h().default.state,s=y().subscriptionDataStoreInstance.state;if(!a.open||!s)return;const l=a.temporaryAddress;if(!(0,n().A)(l))return;h().default.update((e=>({...e,calculatingTax:!0})));const c=(null===(o=a.totalUpgradeCost)||void 0===o?void 0:o.amount)||0,u=await d().callApi({eventName:"calculateTax",environment:e,data:{address:l,price:c,vatId:a.vatApplicable?a.temporaryVatCode:void 0,customerId:(0,i().KU)(t)}});if("failed"===u.type)h().default.update((e=>({...e,taxAmount:void 0,calculatingTax:!1})));else{const e=u.data;e.valid?h().default.update((t=>({...t,taxAmount:r().n.fromValue({amount:e.taxAmount,currencyCode:_().Z.selectedCurrencyCode}),calculatingTax:!1,taxCalculationError:void 0}))):h().default.update((t=>({...t,taxAmount:void 0,calculatingTax:!1,taxCalculationError:e.error})))}}async function k(e){const{environment:t,priceForTaxCalculation:o,address:n,customerId:i,vatId:r}=e,a=v().default.state,s=await d().callApi({eventName:"calculateTax",environment:t,data:{address:n,customerId:i,vatId:r,price:o}});if("failed"===s.type);else{const e=s.data;e.valid&&a.open&&v().default.update((t=>({...t,tax:Math.max(0,e.taxAmount)})))}}async function I(e){var t,o;const r=b().Z.state,a=y().subscriptionDataStoreInstance.state,l=null===(t=p().default.state.currentSpaceStore)||void 0===t?void 0:t.id,c=l?await m().Z.awaitData(e,{spaceId:l}):void 0;if(!r.open||!a)return;if("subscribed_admin"!==a.type&&"unsubscribed_admin"!==a.type)return;const u=null===(o=a.customerData)||void 0===o?void 0:o.stripe;if(!u)return;const f=null==c?void 0:c.address;if(!f||!(0,n().A)(f))return;b().Z.update((e=>({...e,calculatingTax:!0})));const v=r.temporarySubscriptionTier??r.subscriptionTier,h=(0,s().QM)(v)&&r.addOnFeature?"month":"year",S=r.temporaryBillingInterval??r.billingInterval??h,w=!(0,s().QM)(v)&&Boolean(r.addOnFeature);if(!l)return;const k=await(0,g().DI)(e,l,a),{payAmount:I}=(0,g().uN)({billingData:c,memberCount:k,promo:void 0,currencyCode:_().Z.selectedCurrencyCode,addOnFeature:r.addOnFeature,onlyShowAddOn:w,subscriptionTier:v,taxAmount:r.taxAmount,calculatingTax:r.calculatingTax,billingInterval:S,coupon:r.coupon}),C=await d().callApi({eventName:"calculateTax",environment:e,data:{address:f,price:I.amount,vatId:u.vatId,customerId:(0,i().KU)(c)}});if("failed"===C.type)return void b().Z.update((e=>({...e,taxAmount:void 0,calculatingTax:!1,taxCalculationError:C.error})));const x=C.data;x.valid?b().Z.update((e=>({...e,taxAmount:x.taxAmount,calculatingTax:!1}))):b().Z.update((e=>({...e,taxAmount:void 0,calculatingTax:!1})))}async function C(e){const{environment:t,billingData:o,stripeData:r,taxableAmount:a,lineItems:s}=e,{address:l}=null!=o&&o.address?{address:null==o?void 0:o.address}:e,c=null==r?void 0:r.vatId;if(!l||!(0,n().A)(l))return;const u=(0,i().KU)(o),p=await d().callApi({eventName:"calculateTax",environment:t,data:{address:l,price:a.amount,vatId:c,customerId:u,lineItems:s}});if("failed"===p.type)return;const m=p.data;return m.valid?m.taxAmount:void 0}function x(e){if(!e)return;if(void 0===e.unitAmount)return;const t=u().default.pricing[e.product];return"productId"in t?{amount:e.unitAmount.amount,productId:t.productId}:void 0}function T(e){const t=u().default.pricing[e.price.product];if("productId"in t)return{amount:e.price.unitAmount.amount*e.quantity,productId:t.productId}}function M(e){let{line:t,defaultProductId:o=u().default.pricing.plus.productId}=e;const n=(0,l().Cn)(t.discount_amounts??[],"amount"),i=t.price?"string"==typeof(r=t.price.product)?r:r.id:o;var r;return{amount:t.amount-n,productId:i}}},587510:(e,t,o)=>{o.d(t,{y5:()=>B,Zo:()=>U,cM:()=>M,OT:()=>A,Pz:()=>E,bX:()=>P,af:()=>T,Mg:()=>R});o(821057);var n=()=>o(956057),i=()=>o(629719),r=()=>o(976102),a=()=>o(381348),s=()=>o(681941),l=()=>o(979614),c=()=>o(308186),d=()=>o(528918),u=()=>o(454393),p=()=>o(102182),m=()=>o(876822),f=()=>o(518019),g=()=>o(801072),v=()=>o(339538),h=()=>o(18281),_=()=>o(697623);const b=(0,o(788860).vU)({cancellingTrial:{defaultMessage:"Cancelling your trial.",id:"cancelTrial.error.message"},cancellationConfirmationMessage:{defaultMessage:"Are you sure you want to cancel your trial?",id:"cancelTrial.confirmation.message"},yes:{defaultMessage:"Yes, cancel my trial",id:"cancelTrial.yes.confirmation.message"}});var y=()=>o(939985),S=()=>o(419157),w=()=>o(634632),k=()=>o(897257),I=()=>o(576387),C=()=>o(254687),x=()=>o(768064);function T(e){const{environment:t,from:o,view:i,temporarySubscriptionTier:r,temporaryBillingInterval:a,billingInterval:s,addOnFeature:c,pageSection:d,onSuccess:u,legacyAnnualPrice:p}=e,m=n().Il();l().YT(t,{from:o,pageSection:d,view:i,modal_id:m,currency_code:S().Z.selectedCurrencyCode}),w().Z.setState({open:!0,modalId:m,view:i,subscriptionTier:(0,_().zt)(),temporarySubscriptionTier:r,billingInterval:s,temporaryBillingInterval:a,calculatingTax:!1,isExpandedView:!1,addOnFeature:c,legacyAnnualPrice:p,onSuccess:u}),x().SP(t)}function M(e){const t=w().Z.state;t.open&&(l().q7(e,{state:t}),w().Z.setState({open:!1}))}function P(e){const t=w().Z.state;t.open&&(l().y$(e,{state:t}),w().Z.setState({...t,isExpandedView:!0}))}function A(e){const t=w().Z.state;t.open&&(l().k1(e,{state:t}),w().Z.setState({...t,isExpandedView:!1}))}async function R(e,t,o){var n;const c=m().default.state.currentSpaceStore;if(!c)return;const d=w().Z.state;if(!d.open)return;l().nd(e,{state:d});const{view:u,onSuccess:_}=d,b=k().subscriptionDataStoreInstance.state,x=await C().aQ({spaceId:c.id,environment:e}),T=await f().Z.awaitData(e,{spaceId:null==c?void 0:c.id});if(!T)throw new Error("Billing data not loaded");const P=(0,i().Lg)(T),A=d.temporarySubscriptionTier,R=d.addOnFeature,B=d.temporaryBillingInterval??"year",E=(0,i().Hw)(P)??d.billingInterval??"year",U=S().Z.selectedCurrencyCode,F=b?await(0,h().DI)(e,c.id,b):0,N=null===(n=(0,i().a7)(T.subscription,"sites_custom_hostnames"))||void 0===n?void 0:n.quantity;let V,L=P;const O=(0,s().Vj)({prices:x,quantity:F,domainsQuantity:N??0});if("add_ons"===u&&R){const e={product:R,interval:E,currency:U};L=(0,r().dP)(O,L,e),V=v().aQ({addOnFeature:R})}else if("billing_interval"===u)L=(0,r().Zl)(x,L,B),V=v().Nj({billingInterval:B});else{if("plans"!==u||!A)return void M(e);{const e={product:A,interval:E,currency:U};L=(0,r().dP)(O,L,e),V=v().s6({newTier:A})}}if(D((0,a().s6)(g().Z.getData(e,{spaceId:null==c?void 0:c.id})),d.subscriptionTier,A,d.billingInterval,d.temporaryBillingInterval)){if(!(await(0,y().D)(e)))return}const Z=await I().Mg({environment:e,from:"space_settings-plans_tab",spaceStore:c,desiredState:L,inAppOffer:o});await I().KD({paymentIntentData:Z,stripe:t,onSuccess:_}),M(e),V&&p().oV(V)}async function B(e){var t;const{environment:o,billingData:n}=e,r=m().default.state.currentSpaceStore;if(!r)return;if(null===(t=n.subscription)||void 0===t||!t.pending)return c().UW((0,v().iS)());if(!r)return c().UW((0,v().iS)());const a=(0,i().iv)(n);return await I().Mg({environment:o,from:"space_settings-billing_tab",spaceStore:r,desiredState:a}),p().oV({label:(0,v().UW)()}),await I().bi(o)}function E(e){const{environment:t,currentState:o,desiredState:n}=e,r=m().default.state.currentSpaceStore;if(!r)return;return D((0,a().s6)(g().Z.getData(t,{spaceId:null==r?void 0:r.id})),(0,i().zt)(o),(0,i().zt)(n),(0,i().Hw)(o),(0,i().Hw)(n))}function D(e,t,o,n,i){return!!e&&(!!(0,a().CF)("resurrection_offer",t,n)&&!!(o&&o!==t||i&&n!==i))}async function U(e){const t=m().default.state.currentSpaceStore;t&&(d().j({message:b.cancellingTrial}),await I().EO({environment:e,spaceStore:t,from:"space_settings-plans_tab"}),d().x(),u().r$({currentTab:"billing"}))}},965014:(e,t,o)=>{o.d(t,{y:()=>S});o(667294);var n=()=>o(255393),i=()=>o(629719),r=()=>o(788860),a=()=>o(696459),s=()=>o(979614),l=()=>o(308186),c=()=>o(454393),d=()=>o(361223),u=()=>o(814139),p=()=>o(297861),m=()=>o(876822),f=()=>o(518019),g=()=>o(18281),v=()=>o(539306),h=()=>o(897257),_=()=>o(788396),b=()=>o(576387),y=o(785893);async function S(e,t){if("contact_sales"===t.upsell.type)return void(0,_().nx)({openedFrom:t.from});if("contact_account_manager"===t.upsell.type){const e=(0,y.jsx)(r()._H,{id:"upsellActions.referToSalesRep",defaultMessage:"This workspace is part of a managed account. Please contact your account representative to discuss any changes to your subscription."});return void l().UW(e)}const o=t.upsell.product,S=m().default.state.currentSpaceStore;if(!S)return;const w=await f().Z.awaitData(e,{spaceId:S.id}),{addOnFeature:k,for_subscription_tier:I}=function(e){let{billingData:t,product:o}=e;return(0,a().DE)(n().gV,o)?{addOnFeature:o,for_subscription_tier:(0,i().zt)(null==t?void 0:t.subscription)}:{for_subscription_tier:o}}({billingData:w,product:o});s().sA(e,{from:t.from,for_subscription_tier:I,addOnFeature:k});if(!(0,i().KX)(null==w?void 0:w.subscription)&&["block_limit_sidebar","block_limit_settings","block_limit_banner","database_chart_paywall","delete_blocks_modal","slash_menu","out_of_blocks_toast","forms_increase_file_limit","forms_notion_branding","forms_customize_settings","lic_offer_sidebar"].includes(t.from)&&!k){if(e.device.isMobileBrowser){const o=await d().rq.load();return void(await o.plans.showPlans({environment:e,from:t.from}))}return void c().r$({openedFrom:"upsell",upsellType:t.from,currentTab:"plans"})}const C=(0,u().S$)({environment:e})&&("personal"===o||"ai"===o);if(e.device.isMobileNative){if("ai"===o&&!(0,p().Y)("supportsAiIAP")){const t=(0,u().Y2)({environment:e})?(0,y.jsx)(r()._H,{id:"upsellActions.noIAPForAIWithExternalPurchaseOption",defaultMessage:"Your workspace does not have unlimited AI. Visit on desktop to purchase Notion AI and go unlimited."}):(0,y.jsx)(r()._H,{id:"upsellActions.noIAPForAIWithoutExternalPurchaseOption",defaultMessage:"Your workspace does not have unlimited AI. Unfortunately, unlimited AI cannot be purchased on mobile."});return void l().UW(t)}if(!C)return}if(!S.canAdmin())return;await b().bi(e);const x=h().subscriptionDataStoreInstance.state;if(x)if("unsubscribed_admin"===x.type||"subscribed_admin"===x.type)if((0,i().ri)(w))l().UW((0,y.jsx)(r()._H,{id:"subscriptions.paymentMethodUnverified",defaultMessage:"Your payment is being processed. Please try again when your payment has completed."}));else if(g().ff(w,x)){const e=(0,y.jsx)(r()._H,{id:"upsellActions.referToSalesRep",defaultMessage:"This workspace is part of a managed account. Please contact your account representative to discuss any changes to your subscription."});l().UW(e)}else if(C){if(!e.mobileNative)return;if(await g().DI(e,S.id,x)>1){const e=(0,y.jsx)(r()._H,{id:"upsellActions.cannotPurchaseOnMobile",defaultMessage:"Unfortunately, your workspace has multiple members and cannot be upgraded on mobile"});return void l().UW(e)}if("stripe"===(null==w?void 0:w.provider)||"mixed"===(null==w?void 0:w.provider))return;e.mobileNative.openUpgradeModal(S.id,t.from)}else if("app_store"!==(null==w?void 0:w.provider)&&"play_store"!==(null==w?void 0:w.provider))await(0,v().l)({environment:e,spaceStore:S,billingData:w,product:o,from:t.from,pageSection:t.pageSection,coupon:t.coupon,isTrial:t.isTrial,dismissMobilePlansModal:t.dismissMobilePlansModal});else{const e=(0,y.jsx)(r()._H,{id:"upsellActions.switchPlanFromInAppPurchase",defaultMessage:"You're currently subscribed through an in-app purchase. To switch plans, cancel your subscription on your mobile device."});l().UW(e)}else t.dontOpenPlansOnCancel||c().r$({openedFrom:"upsell",upsellType:t.from,currentTab:"plans"})}},563460:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1}}open(e){this.setState({open:!0,...e})}}const i=new n},28886:(e,t,o)=>{o.d(t,{m:()=>s,z:()=>l});var n=()=>o(956057),i=()=>o(979614),r=()=>o(419157),a=()=>o(563460);function s(e,t){const o=n().Il();i().YT(e,{modal_id:o,currency_code:r().Z.selectedCurrencyCode,...t.analyticsArgs}),a().Z.open({modalId:o,...t})}function l(e,t){i().q7(e,{state:{modalId:t}}),a().Z.setState({open:!1})}},339538:(e,t,o)=>{o.d(t,{Nj:()=>R,Tg:()=>I,UW:()=>y,YZ:()=>T,Z_:()=>C,aQ:()=>B,bQ:()=>M,iS:()=>b,ig:()=>w,nx:()=>k,rO:()=>x,s6:()=>A});o(670560),o(267602),o(470928),o(228244),o(667294);var n=()=>o(146947),i=()=>o(646574),r=()=>o(629719),a=()=>o(122792),s=()=>o(788860),l=()=>o(696459),c=()=>o(527278),d=()=>o(15409),u=()=>o(18281),p=o(785893);const m=(0,s().vU)({cancellationError:{id:"midtermSubscriptionHelpers.cancellationFailed",defaultMessage:"There was an error attempting to cancel your pending changes. Please try again."},unableToCancelError:{id:"midtermSubscriptionHelpers.unableToCancel",defaultMessage:"We cannot cancel your scheduled changes right now. Please contact support for more help."},cancellationSuccess:{id:"midtermSubscriptionHelpers.cancellationSucceeded",defaultMessage:"Pending changes have been canceled"},invalidSubscriptionId:{id:"midtermSubscriptionHelpers.invalidSubscriptionId",defaultMessage:"Unable to cancel your pending changes. Something was wrong with your pending subscription changes."}});function f(e){return(0,a().QM)(e)?"free":(0,a().iJ)(e)?"education":(0,a().Aw)(e)?"singlePlayerPlus":(0,a().eR)(e)?"plus":(0,a().NG)(e)?"business":(0,u().gG)(e)?"enterprise":"legacy"}const g=(0,s().vU)({personalFreePlan:{defaultMessage:"Personal Plan",id:"personalFreePlan.title"},personalFree:{defaultMessage:"Personal",id:"personalFree.title"},teamTrialPlan:{defaultMessage:"Team Plan (Trial)",id:"teamTrialPlan.title"},freePlan:{defaultMessage:"Free Plan",id:"freePlan.title"},free:{defaultMessage:"Free",id:"free.title"},personalPlan:{defaultMessage:"Personal Pro Plan",id:"personalPlan.label"},personal:{defaultMessage:"Personal Pro",id:"personal.label"},singlePlayerPlusPlan:{defaultMessage:"Plus Plan with a 1-member limit",id:"singlePlayerPlusPlan.title"},educationPlan:{defaultMessage:"Personal Pro Plan (Education)",id:"personalEducationPlan.title"},educationPlusPlan:{defaultMessage:"Education Plus Plan",id:"educationPlusPlan.title"},teamPlan:{defaultMessage:"Team Plan",id:"teamPlan.title"},team:{defaultMessage:"Team",id:"team.title"},plusPlan:{defaultMessage:"Plus Plan",id:"plusPlan.title"},plus:{defaultMessage:"Plus",id:"plus.title"},businessPlan:{id:"businessPlan.title",defaultMessage:"Business Plan"},business:{id:"business.title",defaultMessage:"Business"},enterprisePlan:{defaultMessage:"Enterprise Plan",id:"enterprisePlan.label"},enterprise:{defaultMessage:"Enterprise",id:"enterprise.label"},legacyPlan:{defaultMessage:"Legacy Plan",id:"legacyPlan.label"}}),v={free:{planTitle:g.freePlan},singlePlayerPlus:{planTitle:g.plusPlan},education:{planTitle:g.educationPlusPlan},plus:{planTitle:g.plusPlan},business:{planTitle:g.businessPlan},enterprise:{planTitle:g.enterprisePlan},legacy:{planTitle:g.legacyPlan}},h=(0,s().vU)({notionAI:{defaultMessage:"Notion AI",id:"notionAI.title"},removeAI:{defaultMessage:"Remove AI",id:"notionAI.remove.title"}}),_=(0,s().vU)({month:{defaultMessage:"Monthly billing",id:"billingInterval.monthly"},year:{defaultMessage:"Annual billing",id:"billingInterval.annual"}});function b(){return c().Z.formatMessage(m.unableToCancelError)}function y(){return c().Z.formatMessage(m.cancellationSuccess)}function S(e){var t;const o=null==e||null===(t=e.subscription)||void 0===t?void 0:t.pending;if(!o)return;const n=(0,r().iv)(e),i=(0,r().Lg)(e);return{oldTier:(0,r().zt)(n)??"free",newTier:(0,r().zt)(i)??"free",oldAIAddOn:(0,r().xi)(n).find((e=>"ai"===e)),newAIAddOn:(0,r().xi)(i).find((e=>"ai"===e)),oldInterval:(0,r().Hw)(n),newInterval:(0,r().Hw)(i),phaseOneEndDate:o.startDate}}function w(e){const t=S(e);return!(!t||!t.newInterval)&&t.oldInterval!==t.newInterval}function k(e){const t=S(e);return!!t&&t.oldTier!==t.newTier}function I(e){const t=S(e),o=[];if(!t)return{scheduledChanges:o,periodEndDate:null};const{newTier:n,oldTier:i,oldAIAddOn:r,newAIAddOn:a,oldInterval:s,newInterval:l,phaseOneEndDate:d}=t;var u,p;return i!==n&&o.push(function(e,t){const o=f(e),n=c().Z.formatMessage(v[o].planTitle);if(!t)return"";const i=f(t);return`${n} â†’ ${c().Z.formatMessage(v[i].planTitle)}`}(i,n)),r!==a&&o.push((u=r,p=a,`${c().Z.formatMessage(u?h.notionAI:h.removeAI)} â†’ ${c().Z.formatMessage(p?h.notionAI:h.removeAI)}`)),s!==l&&o.push(function(e,t){return e&&t?`${c().Z.formatMessage("month"===e?_.month:_.year)} â†’ ${c().Z.formatMessage("month"===t?_.month:_.year)}`:""}(s,l)),{scheduledChanges:o,periodEndDate:d}}function C(e,t,o){return"billing_interval"===e&&"year"===t&&"month"===o}function x(e,t,o){return"plans"===e||"add_ons"===e||"billing_interval"===e&&"month"===t&&"year"===o}function T(e,t){if(!e)return;const o=(0,r().iv)(e).items,n=(0,r().Lg)(e).items;var i;return(0,r().dK)(o,n).some((e=>{let[o,n]=e;return(0,r().tw)(o??n)===t&&o&&!n}))?null===(i=e.subscription)||void 0===i||null===(i=i.pending)||void 0===i?void 0:i.startDate:void 0}function M(e){if(!e)return;var t;return 0===(0,r().Lg)(e).items.length?null===(t=e.subscription)||void 0===t||null===(t=t.pending)||void 0===t?void 0:t.startDate:void 0}function P(e){return(0,p.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,d().e)({width:12}),e.children]})}function A(e){const{newTier:t}=e;switch(t){case"plus":return{label:(0,p.jsx)(P,{children:(0,p.jsx)(s()._H,{id:"midtermChangeHelpers.snackbar.upgradePlan.plus",defaultMessage:"You have successfully upgraded to the Plus plan"})})};case"business":return{label:(0,p.jsx)(P,{children:(0,p.jsx)(s()._H,{id:"midtermChangeHelpers.snackbar.upgradePlan.business",defaultMessage:"You have successfully upgraded to the Business plan"})})};case"enterprise":return{label:(0,p.jsx)(P,{children:(0,p.jsx)(s()._H,{id:"midtermChangeHelpers.snackbar.upgradePlan.enterprise",defaultMessage:"You have successfully upgraded to the Enterprise plan"})})};case"student":return{label:(0,p.jsx)(P,{children:(0,p.jsx)(s()._H,{id:"midtermChangeHelpers.snackbar.upgradePlan.student",defaultMessage:"You have successfully upgraded to the Student plan"})})};case"free":case"personal":case"personal_free":case"team_free":return;default:(0,l().t1)(t)}}function R(e){const{billingInterval:t,effectiveDateEpochMs:o}=e,r=o?(0,i().Yx)(o,"medium",n().locale):void 0;return r?{label:(0,p.jsx)(s()._H,{id:"midtermChangeHelpers.snackbar.billingInterval.future",defaultMessage:"{billingInterval, select, year {Yearly} other {Monthly}} billling will be effective {date}",values:{billingInterval:t,date:r}})}:{label:(0,p.jsx)(P,{children:(0,p.jsx)(s()._H,{id:"midtermChangeHelpers.snackbar.billingInterval.success",defaultMessage:"You have successfully changed to {billingInterval, select, year {yearly} other {monthly}} billing",values:{billingInterval:t}})})}}function B(e){const{addOnFeature:t}=e;switch(t){case"ai":return{label:(0,p.jsx)(P,{children:(0,p.jsx)(s()._H,{id:"midtermChangeHelpers.snackbar.purchaseAddOn.ai",defaultMessage:"You have successfully added Notion AI"})})};case"sites_custom_hostnames":return{label:(0,p.jsx)(P,{children:(0,p.jsx)(s()._H,{id:"midtermChangeHelpers.snackbar.purchaseAddOn.sites",defaultMessage:"Successfully purchased Custom domain add-on"})})};default:(0,l().t1)(t)}}},548812:(e,t,o)=>{o.d(t,{$u:()=>w,EQ:()=>y,G2:()=>C,LT:()=>E,TN:()=>M,Ue:()=>g,Un:()=>B,X3:()=>R,YT:()=>u,a7:()=>I,bQ:()=>b,dn:()=>S,du:()=>p,fQ:()=>m,fX:()=>P,fc:()=>_,jK:()=>x,mu:()=>A,oB:()=>k,px:()=>v,sd:()=>h,vT:()=>f,zS:()=>T});var n=()=>o(575861),i=()=>o(122792),r=()=>o(876822),a=()=>o(749826),s=()=>o(897257),l=()=>o(697623);const c=3,d=-1;function u(){const{currentSpaceStore:e}=r().default.state,t=null==e?void 0:e.getSettings().reach_block_limit_time;return t?(0,n().O5)(t):null}function p(e){const t=u();return null!==t&&(f(e)&&t<c)}function m(){const e=u();return null!==e&&c-e>0?c-e:d}function f(e){var t;const o=null===(t=r().default.state.currentSpaceStore)||void 0===t?void 0:t.id,n=s().subscriptionDataStoreInstance.state;return!(!o||!n)&&(1!==e&&(!!(0,l().QM)()&&"on"===a().default.getEligibleGroup({experimentId:"block_management",defaultGroup:"control"})))}function g(){return Boolean(a().default.checkGate({gateName:"midterm_refresh"}))}function v(e,t){var o,n;if(e.device.isMobile)return!1;const c=s().subscriptionDataStoreInstance.state;if(!c)return!1;if(("subscribed_admin"===c.type||"unsubscribed_admin"===c.type)&&null!==(o=c.customerData)&&void 0!==o&&o.stripe&&Boolean(c.customerData.stripe.promo))return!1;if(!(null===(n=r().default.state.currentSpaceStore)||void 0===n?void 0:n.id))return!1;const d=t??(0,l().zt)();return!(!(0,i().mq)(d)||!Boolean("on"===a().default.getGroup("largesse")))}function h(){return Boolean(a().default.checkGate({gateName:"public_space_data_store_local_cache_disabled"}))}function _(){return Boolean(a().default.checkGate({gateName:"low_guest_limit"}))}function b(){return Boolean("on"===a().default.getGroup("mobile_web_subscriptions"))}function y(){return Boolean(a().default.checkGate({gateName:"native_invoice_payment"}))}function S(){return a().default.getEligibleGroup({experimentId:"lic",defaultGroup:"control"})}function w(){return Boolean(a().default.checkGate({gateName:"apply_offer_migration"}))}function k(){return Boolean("on"===a().default.getEligibleGroup({experimentId:"new_year_2025",defaultGroup:"control"}))}function I(){return Boolean(a().default.checkGate({gateName:"resurrection_offer"}))}function C(){return Boolean(a().default.checkGate({gateName:"test_clocks"}))}function x(e){return!e.device.isMobile&&Boolean("on"===a().default.getEligibleGroup({experimentId:"mp_lairt",defaultGroup:"control"}))}function T(e,t){switch(e){case"perfmark":return function(e){return!e.mobileNative}(t);case"upwork":case"plus":case"business":return!0}}function M(e){return!e.device.isMobile&&Boolean("on"===a().default.getGroup("lairt"))}function P(){return Boolean(a().default.checkGate({gateName:"advanced_security_in_enterprise"}))}function A(){return Boolean(a().default.checkGate({gateName:"people_tab_date_added_column"}))}function R(){return Boolean(a().default.checkGate({gateName:"post_upgrade_modal"}))}function B(e){return!e.device.isMobile&&Boolean(a().default.checkGate({gateName:"uncollectible_experience_enabled"}))}function E(){return Boolean(a().default.checkGate({gateName:"in_app_request_upgrades"}))}},18281:(e,t,o)=>{o.d(t,{A7:()=>te,AX:()=>K,Bu:()=>A,CM:()=>ne,DI:()=>ee,FG:()=>L,Fu:()=>ce,GD:()=>j,GJ:()=>C,Io:()=>oe,KB:()=>D,Ln:()=>se,Lz:()=>V,M9:()=>z,Md:()=>O,ND:()=>Q,Nf:()=>me,Ok:()=>F,VF:()=>k,XX:()=>I,XZ:()=>U,YK:()=>P,_9:()=>ae,ff:()=>ie,gG:()=>M,h1:()=>x,hE:()=>W,hn:()=>X,lo:()=>q,m_:()=>le,o9:()=>de,pu:()=>Z,qF:()=>R,qb:()=>E,ro:()=>re,s1:()=>J,uN:()=>G,vS:()=>T,wB:()=>Y,y$:()=>ue,ye:()=>B,zl:()=>$});o(670560),o(267602),o(653476),o(241792),o(667294);var n=()=>o(933868),i=()=>o(750737),r=()=>o(657120),a=()=>o(629719),s=()=>o(948505),l=()=>o(320080),c=()=>o(122792),d=()=>o(788860),u=()=>o(205228),p=()=>o(814139),m=()=>o(876822),f=()=>o(518019),g=()=>o(245845),v=()=>o(214488),h=()=>o(620252),_=()=>o(897257),b=()=>o(548812),y=()=>o(697623),S=o(785893);const w=.75,k=1;function I(e){if(e&&"subscribed_admin"===e.type&&function(e){return void 0!==e.plan}(e.customerData.stripe))return e.customerData.stripe}function C(e){return"subscribed_admin"===(null==e?void 0:e.type)||"unsubscribed_admin"===(null==e?void 0:e.type)}function x(e){const t=I(e),o=t?t.plan:void 0;return Boolean(o&&i().VJ.includes(o))}function T(e){const t=I(e),o=t?t.plan:void 0;return Boolean(o&&i().Du.includes(o))}function M(e){return e.startsWith("enterprise")}function P(e){return Boolean(e&&"unsubscribed_admin"!==e.type&&"unsubscribed_member"!==e.type&&"unsubscribed_guest"!==e.type)}function A(e){return!P(e)}function R(e){return!pe(e,["personal","student","personal_free"])}function B(){return(0,y().mq)()}function E(e,t){return t===(0,y().zt)()}function D(e,t,o,n){const i=(0,b().vT)(n),r=(0,b().YT)();return!(!(0,y().QM)()||1===n)&&(!!(i&&null!==r&&r>=0)||$(e,t,o,n)>=w)}function U(e,t,o,n){return $(e,t,o,n)>=w}async function F(e){const{environment:t,userRootStore:o}=e;if(!o)return[];return(await Promise.all(o.getAdminSpaceIds().map((e=>f().Z.awaitData(t,{spaceId:e}))))).map((e=>(0,a().zt)(null==e?void 0:e.subscription)??"free"))}function N(e,t,o,n){return(0,y().QM)()&&n>1}function V(e,t,o,n){return A(o)&&N(0,0,0,n)?o.blockUsage:0}function L(e,t,o,n){return N(0,0,0,n)?Math.max(0,(0,c().v5)()-V(0,0,o,n)):void 0}function O(e,t,o){const{currentUserStore:n}=m().default.state,i=null!=n&&n.isDefined()?n.getEmail():void 0;return e.temporaryBillingEmail||(null==o?void 0:o.email)||i}function Z(e){const t=_().subscriptionDataStoreInstance.state,{currentUserStore:o}=m().default.state,n=null!=o&&o.isDefined()?null==o?void 0:o.getEmail():void 0;return t&&(null==e?void 0:e.email)||n}function j(e){return e||"month"}function K(e){var t;return(null===(t=I(e))||void 0===t?void 0:t.interval)??"year"}function z(e){return!!(0,y().QM)()&&((0,p().S$)({environment:e})?"personal":"plus")}function H(e){const{memberCount:t,subscriptionTier:o,addOnFeature:n,isAddOnFeature:i,billingInterval:r,coupon:a}=e,s=function(e){const{subscriptionTier:t,addOnFeature:o,isAddOnFeature:n}=e;if(!u().default.pricing)return;if(n&&void 0!==o)return u().default.pricing[o].productId;const i=u().default.pricing[t];if("productId"in i)return i.productId}({subscriptionTier:o,addOnFeature:n,isAddOnFeature:i});let l,c,d;return s===u().default.pricing.ai.productId?(l=u().default.pricing.ai.yearlyPricePerMember,c=u().default.pricing.ai.monthlyPricePerMember,"ai_fifty_percent"===a&&(l-=4800,c-=500),d="year"===r?l*t:c*t):s===u().default.pricing.personal.productId?(l=u().default.pricing.personal.yearlyPrice,c=u().default.pricing.personal.monthlyPrice,d="year"===r?l:c):s===u().default.pricing.plus.productId?(l=u().default.pricing.plus.yearlyPricePerMember,c=u().default.pricing.plus.monthlyPricePerMember,d="year"===r?l*t:c*t):s===u().default.pricing.business.productId?(l=u().default.pricing.business.yearlyPricePerMember,c=u().default.pricing.business.monthlyPricePerMember,d="year"===r?l*t:c*t):(l=u().default.pricing.enterprise.yearlyPricePerMember,c=u().default.pricing.enterprise.monthlyPricePerMember,d="year"===r?l*t:c*t),{yearlyUnitPrice:l,monthlyUnitPrice:c,planAmount:d}}function q(e,t){var o;if(e&&e.isLoaded)return null===(o=e.result)||void 0===o||null===(o=o.getMonthlyUnitCost(t))||void 0===o?void 0:o.toMoneyValue()}function W(e,t){return e===u().default.pricing.personal.productId||(0,a().TK)(t)?"personal":e===u().default.pricing.student.productId?"student":e===u().default.pricing.plus.productId?"plus":e===u().default.pricing.business.productId?"business":e===u().default.pricing.enterprise.productId?"enterprise":e===u().default.pricing.ai.productId?"ai":e===u().default.pricing.sites_custom_hostnames.productId?"sites_custom_hostnames":"legacy"}function G(e){const{billingData:t,subscriptionTier:o,memberCount:n,currencyCode:i,promo:r,onlyShowAddOn:c,calculatingTax:u,taxAmount:p,addOnFeature:m,billingInterval:f,coupon:g}=e,v=(0,a().Et)(t,i).amount;let h=0,_=0,b=0;const y=void 0!==m;if(!c){const e=H({subscriptionTier:o,memberCount:n,isAddOnFeature:!1,billingInterval:f});h+=e.yearlyUnitPrice,_+=e.monthlyUnitPrice,b+=e.planAmount}if(y){const e=H({subscriptionTier:o,memberCount:n,isAddOnFeature:!0,addOnFeature:m,billingInterval:f,coupon:g});h+=e.yearlyUnitPrice,_+=e.monthlyUnitPrice,b+=e.planAmount}const w=(0,l().uN)(b,r),k=s().n.fromValue({amount:b-w.amount+v+(p&&!u?p:0),currencyCode:i}).zeroIfNegative(),I=[{type:"standard",name:(0,S.jsx)(d()._H,{id:"subscriptionHelpers.lineItems.subTotal",defaultMessage:"Subtotal"}),price:s().n.fromValue({amount:b,currencyCode:i})}];return I.push({type:u?"calculating":"standard",name:(0,S.jsx)(d()._H,{id:"subscriptionHelpers.lineItems.taxIfApplicable.title",defaultMessage:"Tax if applicable"}),price:s().n.fromValue({amount:b,currencyCode:i})}),0!==w.amount&&I.push({type:"promotion",name:(0,S.jsx)(d()._H,{id:"subscriptionHelpers.lineItems.promo",defaultMessage:"Coupon"}),price:s().n.fromValue({amount:w.amount,currencyCode:i}),subtitle:w.monthsRemaining?(0,S.jsx)(d()._H,{id:"subscriptionHelpers.lineItems.promo.subtitle",defaultMessage:"Valid for {durationInMonths} months",values:{durationInMonths:w.monthsRemaining}}):void 0}),v<0&&I.push({type:"promotion",name:(0,S.jsx)(d()._H,{id:"subscriptionHelpers.lineItems.balance",defaultMessage:"Balance"}),price:s().n.fromValue({amount:-v,currencyCode:i})}),{yearlyUnitPrice:h,monthlyUnitPrice:_,planAmount:b,payAmount:k,accountBalance:v,lineItems:I,promoInfo:w}}function $(e,t,o,n){return V(0,0,e,n)/(0,c().v5)()}function Q(e){return ne(e).filter(r().FN)}async function Y(e,t,o){var n;return g().Z.state.shouldUseEdgeCache?(null===(n=await h().x.awaitData(e,{spaceId:t}))||void 0===n?void 0:n.page_guest)??0:Q(o).length}function J(e,t,o){var n;return g().Z.state.shouldUseEdgeCache?(null===(n=h().x.getData(e,{spaceId:t}))||void 0===n?void 0:n.page_guest)??0:Q(o).length}function X(e){return ne(e).filter((e=>(0,n().Jy)(e.role)))}async function ee(e,t,o){if(g().Z.state.shouldUseEdgeCache){const o=await h().x.awaitData(e,{spaceId:t}),n=((null==o?void 0:o.member)??0)+((null==o?void 0:o.membership_admin)??0)+((null==o?void 0:o.owner)??0);return 0===n?1:n}return X(o).length}function te(){const e=_().subscriptionDataStoreInstance.state;return e?Q(e):[]}function oe(){const e=_().subscriptionDataStoreInstance.state;return e?X(e):[]}function ne(e){return"visibleUsers"in e?e.visibleUsers:e.users}function ie(e,t){return Boolean(t&&"subscribed_admin"===t.type&&(0,a().Rd)(null==e?void 0:e.subscription))}function re(e,t){if(!t)return!1;const o=v().Z.getData(e,{spaceId:t});return!!o&&(0,a().Rd)(o.billingData.subscription)}function ae(e){return"unsubscribed_member"===e.type||"unsubscribed_admin"===e.type||"subscribed_member"===e.type||"subscribed_admin"===e.type||"subscribed_membership_admin"===e.type}function se(e,t,o,n){return V(0,0,o,n)>=(0,c().v5)()}function le(e){return c().wP(e)?"interest_in_enterprise":c().NG(e)?"interest_in_business":void 0}function ce(e){return!1}function de(e){return c().QM(e)}function ue(){return(0,y().sX)()}function pe(e,t){const o=(0,y().zt)();return!!o&&t.includes(o)}function me(e){const{billingData:t,spaceStore:o}=e;return!(0,a().TK)(t)&&((null==o?void 0:o.canAdmin())??!1)}},697623:(e,t,o)=>{o.d(t,{Aw:()=>g,Mk:()=>p,NG:()=>l,QM:()=>u,Rs:()=>c,c4:()=>_,eR:()=>m,iJ:()=>v,mq:()=>f,p4:()=>h,sX:()=>s,wP:()=>d,zt:()=>a});var n=()=>o(122792),i=()=>o(897257),r=()=>o(548812);function a(){var e;return n().O9(null===(e=i().subscriptionDataStoreInstance.state)||void 0===e?void 0:e.subscriptionTier)}function s(){return n().sX(a())}function l(){return n().NG(a())}function c(){return n().Rs(a())}function d(){return n().wP(a())}function u(){return n().QM(a())}function p(){return n().Mk(a())}function m(){return n().eR(a())}function f(){return n().mq(a())}function g(){return n().Aw(a())}function v(){return n().iJ(a())}function h(e){return n().eZ(a(),e)}function _(e){return e?(0,r().fc)()?n().lu:n().kE(e.subscriptionTier??"free"):0}},93543:(e,t,o)=>{o.d(t,{K:()=>s,o:()=>l});var n=()=>o(876822),i=()=>o(106815),r=()=>o(293760),a=()=>o(826955);function s(e){var t;const o=n().default.state.currentSpaceStore;if(!o)return!1;const s=null===(t=i().Z.getData(e,{spaceId:o.id}))||void 0===t?void 0:t.bannerIds;if(o&&s&&s.length>0){const e=s[0];if("uncollectible_unpaid"===a().$I.createChildStore(o,{id:e,table:"subscription_banner",spaceId:o.id}).getBannerKey())return!0}return!!r().default.state.editsBlocked}function l(e){if(void 0!==e)return()=>{e&&window.open(e,"_blank")}}},297959:(e,t,o)=>{o.d(t,{W:()=>s});var n=()=>o(142735),i=()=>o(381348),r=()=>o(876822),a=()=>o(463560);function s(){const e=(0,n().VK)((()=>{var e;return null===(e=r().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),t=(0,a().D)({spaceId:e});if(t)return(0,i().XU)(t,"trial")}},30795:(e,t,o)=>{o.d(t,{V:()=>c,W:()=>d});var n=()=>o(219727),i=()=>o(142735),r=()=>o(876822),a=()=>o(245845),s=()=>o(620252),l=()=>o(18281);function c(e){const t=(0,n().O7)();return(0,i().VK)((()=>{const o=r().default.state.currentSpaceStore;return o&&e?d(t,o.id,e):1}),[t,e])}function d(e,t,o){if(a().Z.state.shouldUseEdgeCache){const o=s().x.getData(e,{spaceId:t}),n=((null==o?void 0:o.member)??0)+((null==o?void 0:o.membership_admin)??0)+((null==o?void 0:o.owner)??0);return 0===n?1:n}return(0,l().hn)(o).length}},463560:(e,t,o)=>{o.d(t,{D:()=>s});var n=()=>o(219727),i=()=>o(142735),r=()=>o(876822),a=()=>o(801072);function s(e){let{spaceId:t}=e;const o=(0,n().O7)(),s=(0,i().VK)((()=>{var e;return null===(e=r().default.state.currentSpaceStore)||void 0===e?void 0:e.canEdit()}),[]);return(0,i().VK)((()=>{if(t&&s)return a().Z.getData(o,{spaceId:t})}),[o,t,s])}},939985:(e,t,o)=>{o.d(t,{D:()=>v});o(667294);var n=()=>o(824462),i=()=>o(771474),r=()=>o(631842),a=()=>o(594546),s=()=>o(876822),l=()=>o(605716),c=()=>o(788860),d=()=>o(830581),u=()=>o(765513),p=()=>o(148126),m=o(785893);function f(e){let{onAccept:t}=e;return(0,m.jsx)(d().sR,{header:(0,m.jsx)(d().vI,{iconAndTitle:(0,m.jsx)(d().kC,{iconGroup:l().h,iconColorName:"uiRedPrimary",title:(0,m.jsx)(c()._H,{id:"voidOfferModal.title",defaultMessage:"Are you sure?"})}),description:(0,m.jsx)(c()._H,{id:"voidOfferModal.subtitle",defaultMessage:"If you continue, your current discount will no longer be applied. See <terms>terms and conditions</terms> for more information.",values:{terms:e=>(0,m.jsx)(u().Z,{external:!0,href:(0,p().UY)("resurrectionLearnMore"),children:e})}})}),footer:(0,m.jsx)(d().a6,{layout:"vertical",primaryButtons:[{buttonType:"destructive",label:(0,m.jsx)(c()._H,{id:"voidOfferModal.primaryAction",defaultMessage:"Yes and remove discount"}),onClick:t}],secondaryButtons:[{buttonType:"dismiss",label:(0,m.jsx)(c()._H,{id:"voidOfferModal.cancelButton",defaultMessage:"Cancel"})}]})})}const g=406;async function v(e){var t;const o=null===(t=s().default.state.currentSpaceStore)||void 0===t?void 0:t.id;return await r().o.showAsyncModal((t=>(0,m.jsx)(i().c,{isOpen:t.isOpen,onDismiss:()=>{(0,a().j)({environment:e,event:{eventName:"void_offer_modal_dismiss",eventProperties:{}}}),t.onDismiss()},onClosed:t.onClosed,areaConstraint:{width:{type:"min",length:g},height:{type:"unlimited",scroll:"allow"}},render:()=>(0,m.jsx)(f,{onAccept:async()=>{(0,a().j)({environment:e,event:{eventName:"void_offer_modal_accept",eventProperties:{}}}),o&&await n().callApi({eventName:"voidCustomerOffer",environment:e,data:{spaceId:o}}),t.resolve("accepted")}})})))}},539306:(e,t,o)=>{o.d(t,{l:()=>R});var n=()=>o(255393),i=()=>o(629719),r=()=>o(345918),a=()=>o(788396),s=()=>o(444297),l=()=>o(576387),c=()=>o(587510),d=()=>o(28886),u=()=>o(548812),p=()=>o(182946),m=(o(667294),()=>o(921981)),f=()=>o(631842),g=()=>o(142735),v=()=>o(846550);const h=(0,o(827282).CZ)("arrowUpCircleBadgeClock",{default:{loader:()=>o.e(63703).then(o.bind(o,263703))},small:{loader:()=>o.e(58489).then(o.bind(o,858489))},mini:{loader:()=>o.e(44587).then(o.bind(o,744587))},large:{loader:()=>o.e(37304).then(o.bind(o,337304))}});var _=()=>o(381348),b=()=>o(122792),y=()=>o(788860),S=()=>o(212493),w=()=>o(830581),k=()=>o(661641),I=()=>o(916095),C=()=>o(383507),x=()=>o(297959),T=()=>o(404791),M=o(785893);function P(e){let{onDismiss:t}=e;const o=(0,y().YB)(),n=(0,x().W)(),i=(0,v().yK)((e=>({icon:{width:32,height:32,color:e.icon.secondary}})),[]),r=(0,g().VK)((()=>{const e=T().Z.state;return e?e.spaceLimit-e.spaceUsage:void 0}),[]);if(void 0===r||!n)return null;const a=(0,b().v$)((0,_().Ib)(n),o);return(0,M.jsxs)(S().jX,{gap:24,padding:"24px 24px 20px 24px",children:[(0,M.jsx)(w().vI,{iconAndTitle:r>0?(0,M.jsxs)(S().jX,{align:"top-center",gap:12,children:[(0,C().Q)(i.icon),(0,M.jsx)(k().q,{styleName:"Heading-17px/Semibold",colorName:"primary",style:{textAlign:"center"},children:(0,M.jsx)(y()._H,{id:"ineligibleForAiPurchaseModal.title",defaultMessage:"You still have {responsesLeft, plural, one {{responsesLeft} free AI response} other {{responsesLeft} free AI responses}}",values:{responsesLeft:r}})})]}):(0,M.jsx)(w().kC,{iconGroup:h,iconColorName:"secondary",title:(0,M.jsx)(y()._H,{id:"ineligibleForAiPurchaseModal.title.outOfResponses",defaultMessage:"Youâ€™ll be able to purchase AI in {daysLeft, plural, one {{daysLeft} day} other {{daysLeft} days}}",values:{daysLeft:(0,_().b_)(n)}})}),description:(0,M.jsx)(k().q,{styleName:"UIMedium-13px/Regular",colorName:"primary",children:r>0?(0,M.jsx)(y()._H,{id:"ineligibleForAiPurchaseModal.description.responsesLeft",defaultMessage:"Youâ€™ll be able to purchase unlimited Notion AI after finishing your free {planName} plan trial",values:{planName:a}}):(0,M.jsx)(y()._H,{id:"ineligibleForAiPurchaseModal.description",defaultMessage:"Since youâ€™re on a free {planName} plan trial, you can only purchase unlimited AI after the trial ends",values:{planName:a}})})}),(0,M.jsx)(w().a6,{layout:"vertical",primaryButtons:[{buttonType:"outline",label:(0,M.jsx)(y()._H,{id:"ineligibleForAiPurchaseModal.primaryAction",defaultMessage:"Got it"}),onClick:t}]}),(0,M.jsx)(I().U4,{})]})}const A=354;async function R(e){const{environment:t,spaceStore:o,billingData:g,product:v,from:h,pageSection:_,isTrial:b,dismissMobilePlansModal:y,coupon:S}=e;if(o)if("ai"===v&&(0,p().Cf)(g))!async function(e){await f().o.showAsyncModal((t=>(0,M.jsx)(m().c,{isOpen:t.isOpen,onDismiss:t.onDismiss,onClosed:t.onClosed,areaConstraint:{width:{type:"min",length:A},height:{type:"unlimited",scroll:"allow"}},render:()=>(0,M.jsx)(P,{onDismiss:t.onDismiss,...e}),animateSizeTransition:!1})))}({environment:t});else{if("enterprise"===v){if(await(0,s().n)(t)&&!(0,r().HR)(o))return void(0,a().nx)({initialQuestion:"interest_in_enterprise",openedFrom:e.from})}if(null!=g&&g.subscription&&null!=g&&g.paymentMethod){if(!(0,u().Ue)())return n().Qv(v)?void c().af({environment:t,from:h,view:"add_ons",addOnFeature:v,billingInterval:(0,i().Hw)(g.subscription),pageSection:_}):void c().af({environment:t,from:h,view:"plans",temporarySubscriptionTier:v,billingInterval:(0,i().Hw)(g.subscription),pageSection:_});(0,d().m)(t,{desiredProducts:[v],analyticsArgs:{from:h,view:n().Qv(v)?"add_ons":"plans",pageSection:_}})}else{const{subscriptionTier:e,addOnFeature:o}=n().Qv(v)?{subscriptionTier:(0,i().zt)(null==g?void 0:g.subscription),addOnFeature:v}:{subscriptionTier:v,addOnFeature:void 0};await(0,l().I0)(t,{subscriptionTier:e,addOnFeature:o,from:h,coupon:S,isTrial:b,dismissMobilePlansModal:y})}}}},546464:(e,t,o)=>{o.d(t,{$W:()=>c,DE:()=>f,EG:()=>l,KQ:()=>m,Rv:()=>p,eB:()=>d,oo:()=>u});var n=()=>o(219727),i=()=>o(142735),r=()=>o(799891),a=()=>o(677559);const s={PremiumFeatures:new(a().Ss)("PremiumFeatures",(()=>Promise.all([o.e(41455),o.e(2850)]).then(o.bind(o,86834))))};function l(e,t){const o=v("computeFeatureData"),n=v("featureDataLoaders"),i=v("sharedGetPremiumFeatureAvailability");if(!(o&&n&&i))return;const a=o(e,n,t);return a&&"loading"!==a?i(r().log.bind(r()),a):void 0}async function c(e,t){const o=await h("featureDataLoaders"),n=await h("sharedGetPremiumFeatureAvailability"),i=await h("awaitFeatureData"),a=await i(e,o,t);return n(r().log.bind(r()),a)}function d(e){const t=_("sharedGetPremiumFeatureAvailabilityForDesiredState"),o=g(_("featureDataLoaders"),e);if(!o||!t)return;const n=e.state;return t(r().log.bind(r()),{...o,state:n})}function u(e){const t=_("sharedGetPremiumFeatureAvailability"),o=g(_("featureDataLoaders"),e);if(o&&t)return t(r().log.bind(r()),o)}function p(e){const t=_("featureDataLoaders"),o=_("sharedHasPremiumFeature"),n=g(t,e);if(n&&o)return o(r().log.bind(r()),n)}async function m(e,t){const o=await c(e,t);return(await h("isAvailable"))(o)}function f(e,t){const o=l(e,t),n=v("isAvailable");return!(!o||!n)&&n(o)}function g(e,t){const o=(0,n().O7)(),r=_("computeFeatureData");return(0,i().VK)((()=>{if(!e)return;const n=null==r?void 0:r(o,e,t);return"loading"===n?void 0:n}),[o,t,e,r])}function v(e){const t=s.PremiumFeatures.getLoadingState();if("resolved"===t.status)return t.value[e]}async function h(e){return await s.PremiumFeatures.load().then((t=>t[e]))}function _(e){var t;const o=(0,a().XJ)(s.PremiumFeatures);return null==o||null===(t=o.value)||void 0===t?void 0:t[e]}},404791:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){}didRequest(){const e=this.state;return!(!e||e.isEligible)&&Boolean(e.requestedAccess)}}const i=new n},547526:(e,t,o)=>{o.d(t,{default:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1}}}const i=new n},46135:(e,t,o)=>{o.d(t,{default:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1,succeeded:!1}}close(){this.setState({open:!1,succeeded:!1})}closeWithSuccess(){this.setState({open:!1,succeeded:!0})}open(e){this.setState({open:!0,temporaryBillingInterval:"month",temporaryAddress:{name:"",businessName:"",addressLine1:"",addressLine2:"",zipCode:"",city:"",state:"",country:""},appliedPromo:void 0,error:void 0,vatApplicable:!1,calculatingTax:!1,payButtonState:"disabled",subscriptionTier:"enterprise",targetPlan:void 0,targetSpace:e,totalUpgradeCost:void 0,onlyShowAddOn:!1,sessionId:o(956057).Il(),type:o(145613).U.TargetSpace})}setAddressField(e){this.state.open&&this.setState({...this.state,temporaryAddress:{...this.state.temporaryAddress,...e},taxCalculationError:void 0})}}const i=new n},839197:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o(263184).default.createValue({open:!1},{name:"ContactSalesModalStore"})},419157:(e,t,o)=>{o.d(t,{Z:()=>i});o(267602),o(653476),o(470928),o(241792);class n extends(()=>o(263184))().default{constructor(){var e;let t,n;super(),e=this;const i=()=>{if("ready"!==this.state.status)return;const e=this.state.prices.map((e=>{const t=Math.floor(100*Math.random()),n=Math.floor(e.unitAmount.amount/100);return new(o(161428).tA)({external_id:e.externalId,product:e.product,billing_interval:e.billingInterval,currency:e.currencyCode,state:e.state,unit_amount:100*n+t})}));this.setPrices(e,this.state.selectedCurrencyCode)};(0,o(947115).exposeDebugValue)("randomizePrices",(function(){let o=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if("ready"!==e.state.status)return;o!==Boolean(n)&&(n&&(clearInterval(n),n=void 0),o?(t=e.state.prices,n=setInterval(i,1e3),i()):t&&e.setPrices(t,e.state.selectedCurrencyCode))}))}getInitialState(){return{status:"init",prices:[],availableCurrencyCodes:["USD"],selectedCurrencyCode:void 0}}resetExceptSelectedCurrencyCode(){this.update((e=>({...this.getInitialState(),selectedCurrencyCode:e.selectedCurrencyCode})))}waitUntilReady(){return this.waitUntil((()=>"ready"===this.state.status))}setPrices(e,t){this.update((n=>({...n,status:"ready",prices:e,availableCurrencyCodes:(0,o(326966).jj)(e.map((e=>e.currencyCode))),selectedCurrencyCode:this.state.selectedCurrencyCode||t})))}didStartLoading(){this.update((e=>({...e,status:"loading"})))}getPrice(e,t){const{status:n,selectedCurrencyCode:i}=this.state;if("init"===n){var r;const t=null===(r=o(876822).default.state.currentSpaceStore)||void 0===r?void 0:r.id;t&&o(254687).Zz({environment:e,spaceId:t})}if("ready"!==n)return{isLoaded:!1,result:void 0};const a=this.state.prices.filter((e=>e.currencyCode===i));return{isLoaded:!0,result:a.find(t)}}get selectedCurrencyCode(){return this.state.selectedCurrencyCode??"USD"}get availableCurrencyCodes(){return this.state.availableCurrencyCodes}get prices(){return this.state.prices}}const i=new n},634632:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1}}}const i=new n},897257:(e,t,o)=>{o.r(t),o.d(t,{SubscriptionDataStore:()=>n,subscriptionDataStoreInstance:()=>i});class n extends(()=>o(263184))().default{constructor(){super(...arguments),this.spaceId=void 0}getInitialState(){}waitUntilLoaded(){return this.waitUntil((()=>Boolean(this.state)))}}const i=new n;(0,o(947115).exposeDebugValue)("subscriptionDataStoreInstance",i)},182946:(e,t,o)=>{o.d(t,{Cf:()=>s,U6:()=>c,eq:()=>l});var n=()=>o(730120),i=()=>o(146947),r=()=>o(646574),a=()=>o(205228);function s(e){var t;const o=null==e||null===(t=e.subscription)||void 0===t?void 0:t.trialEnd;return!!o&&n().ou.now()<o}function l(e,t){return e?(0,r().Yx)(e.toMillis(),t??"long",i().locale):void 0}function c(e){return e?a().default.trials[e.id].duration:a().default.trials.default.duration}},723721:(e,t,o)=>{o.d(t,{f4:()=>h,Hy:()=>m,yt:()=>f,kx:()=>p,O1:()=>c,pV:()=>v,Re:()=>g,XG:()=>u,zQ:()=>d});o(398858),o(461318),o(33228);var n=()=>o(282017),i=()=>o(149310);const r=new class{constructor(e,t){this.localStorageStore=void 0,this.localStorageStore=new(i().ZP)({namespace:e,important:t,trackingType:"necessary"})}get(e){return this.localStorageStore.get(e)}set(e,t){return this.localStorageStore.set(e,t)}remove(e){return this.localStorageStore.remove(e)}}(i().$p,!1);var a=()=>o(979881),s=()=>o(916673),l=()=>o(548812);function c(e){return Boolean("upwork"===e)}function d(e,t){(0,l().zS)(e,t)&&r.set("trialUpsell",e)}function u(){const e=(0,s().nx)(new URL(window.location.href).toString(),(0,n().x6)());null!=e&&e.trial_source&&(e.trial_source=void 0,(0,n().NW)(e)),r.remove("trialUpsell")}function p(){var e;const t=null===(e=(0,n().x6)())||void 0===e?void 0:e.trial_source;return t&&c(t)?t:r.get("trialUpsell")??"plus"}function m(){return"business"===p()?"business":"plus"}function f(e){const t=p(),o=(0,a().Rk)();return e&&"upwork"!==t?o.enterprise:t&&"upwork"===t?o.upwork:o.default}function g(){return"upwork"===p()}function v(){return"perfmark"===p()}function h(){return r.get("performanceMarketingTerm")}},925713:(e,t,o)=>{o.d(t,{Ir:()=>i,SW:()=>a,u_:()=>r});var n=()=>o(677559);const i={trialActions:new(n().Ss)("trialActions",(()=>o.e(37554).then(o.bind(o,334510)))),TrialInfoModal:new(n().Ss)("TrialInfoModal",(()=>o.e(27127).then(o.bind(o,514665)))),TrialEndModal:new(n().Ss)("TrialEndModal",(()=>o.e(20272).then(o.bind(o,374722))))},r=(0,n().kF)(i.TrialInfoModal,(e=>e.TrialInfoModal)),a=(0,n().kF)(i.TrialEndModal,(e=>e.TrialEndModal))},825559:(e,t,o)=>{o.d(t,{m:()=>d});o(241792);var n=o(667294),i=()=>o(657320),r=()=>o(142735),a=()=>o(396136),s=()=>o(970381),l=()=>o(466970),c=()=>o(826955);function d(e){const{parentStore:t}=e,o=(0,i().l)(),d=e.pageStore??(null==o?void 0:o.pageStore),u=t.getRecordModel,p=(0,l().E)("toc_nested_headings"),m=(0,r().VK)((()=>d?s().Q(d.id,u,p):[]),[d,u,p]),f=(0,n.useMemo)((()=>m.map((e=>c().G.createChildStore(t,{table:a().iU,id:e})))),[t,m]);return{navigableAncestorStore:d,headerStores:f}}},846728:(e,t,o)=>{o.d(t,{R:()=>d});var n=()=>o(142735),i=()=>o(506347),r=()=>o(285670),a=()=>o(429725),s=()=>o(942226),l=()=>o(466970),c=()=>o(482162);function d(e){const{scrollToBlockId:t,pageStore:o,isFloatingToc:d}=e,u=(0,n().VK)((()=>Boolean(o&&(0,s().wq)(o))),[o]),p=(0,n().VK)((()=>c().default.getPeekMode()),[]),m=(0,l().E)("floating_table_of_contents");return{href:(0,n().VK)((()=>{if(void 0!==o&&void 0!==t)return(0,a().Hu)({store:o,scrollToBlockId:t,fullyQualified:!1,pageVisitSource:d?i().tY.PageTableOfContents:i().tY.LinkInPage,...m?{openInSidePeek:u&&p===r().R,openInCenterPeek:u&&p===r().l}:{openInSidePeek:u}})}),[u,m,d,o,p,t]),replaceHistoryState:!0}}},819828:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{isHovered:!1}}}const i=new n},555813:(e,t,o)=>{o.d(t,{wT:()=>le,aQ:()=>Se,ED:()=>Te,mX:()=>X,w6:()=>fe,Ui:()=>Ie,Xy:()=>Me,Wi:()=>pe,Uj:()=>me,um:()=>de,s:()=>he,Dv:()=>ve,lo:()=>se,hI:()=>xe,mN:()=>be,WO:()=>_e,X0:()=>ie,YH:()=>we,JX:()=>Ce,Ju:()=>re,$J:()=>J,jg:()=>ae,xI:()=>Y,lH:()=>$,fs:()=>W,$x:()=>G,d:()=>ke,W8:()=>te,Ce:()=>ee,RF:()=>ge});o(821057),o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(916054),o(653476),o(470928),o(749411),o(241792),o(228244);var n=()=>o(506347),i=()=>o(464140),r=()=>o(799891),a=()=>o(528514),s=()=>o(933868),l=()=>o(255933),c=()=>o(306164),d=()=>o(989478),u=()=>o(542487),p=()=>o(792409),m=()=>o(696459),f=()=>o(326966),g=()=>o(912732),v=()=>o(465755),h=()=>o(824462),_=()=>o(308186),b=()=>o(784234),y=()=>o(636340),S=()=>o(47443),w=()=>o(224597),k=()=>o(968377),I=()=>o(269299),C=()=>o(221662),x=()=>o(718959),T=()=>o(527278),M=()=>o(832924),P=()=>o(423557),A=()=>o(729717),R=()=>o(591914),B=()=>o(677556),E=()=>o(577128),D=()=>o(270895),U=()=>o(876822),F=()=>o(619779),N=()=>o(369320),V=()=>o(826955),L=()=>o(677006),O=()=>o(576387),Z=()=>o(18281),j=()=>o(697623),K=()=>o(934262),z=()=>o(895192),H=()=>o(162213),q=()=>o(813426);function W(e){const{store:t,update:o,transaction:n}=e;y().sW({store:t,data:(0,f().Q2)(o),transaction:n})}function G(e){let{environment:t,store:o,update:n,transaction:i}=e;const r=function(e){let{store:t,update:o}=e;const n=t.getSettingsStore().getValue();if(!n)return{};const i={};for(const r in o)i[r]=n[r];return i}({store:o,update:n});y().sW({store:o.getSettingsStore(),data:(0,f().Q2)(n),transaction:i}),v().OR(t,{store:o,old_settings:r,updated_settings:n})}async function $(e){let{environment:t,spaceStore:o,addedStores:n,removedStores:i,createNewTeamFlowId:r,from:a}=e;const s=t.currentUser.id;if(!s||n.some((e=>!e.isDefined())))return!1;const l=(0,R().VK)(o,s);if(await l.load(),!l.isWorkspaceOwner())throw new Error("Only admins can update default teams");const{performResult:{results:c},serverCommitResult:d}=I().createAndCommit({environment:t,userAction:"teamActions.updateDefaultTeams",canUndo:!0,perform:e=>{const o=[];for(const i of n){const n=Q({environment:t,transaction:e,teamStore:i,isDefault:!0,from:a,createNewTeamFlowId:r});o.push(n)}for(const n of i){const i=Q({environment:t,transaction:e,teamStore:n,isDefault:!1,from:a,createNewTeamFlowId:r});o.push(i)}return{results:o}}});return await d,await O().bi(t),c.every((e=>e))}function Q(e){let{environment:t,transaction:o,teamStore:n,isDefault:i,from:r,createNewTeamFlowId:a}=e;if(n.isArchived()&&i)throw new Error("Archived team cannot be set as default team.");return n.isDefault()===i||(y().sW({store:n,data:{is_default:i},transaction:o}),o.postSubmitCallbacks.push((e=>{e||v().cX(t,{store:n,is_default_team:i,create_new_team_flow_id:a,from:r})}))),!0}function Y(e){var t;const{environment:o,teamStore:n,newRole:i,transaction:r,permissionsToClear:a}=e,l=a.map((e=>({...e,role:"none"}))),c=(null===(t=n.getTeamPermission())||void 0===t?void 0:t.role)??"none",d={type:"explicit_team_permission",team_id:n.id,role:i};l.push(d),b().$G({environment:o,store:n,permissionItems:l,transaction:r}),n.isDefault()&&b().$G({environment:o,store:n,permissionItems:[{type:"space_permission",role:i}],transaction:r}),(0,s().J5)(c)||!(0,s().J5)(i)||n.getDisableTeamPageEdits()||G({environment:o,store:n,update:{disable_team_page_edits:!0},transaction:r})}function J(e){const{environment:t,teamStore:o,newRole:n,transaction:i,permissionsToClear:r}=e,a=r.map((e=>({...e,role:"none"}))),s={type:"explicit_team_guest_permission",team_id:o.id,role:n};a.push(s),b().$G({environment:t,store:o,permissionItems:a,transaction:i})}function X(e){let{memberInfo:t,teamStore:o,transaction:n,environment:i,permissionRole:r}=e;const s=o.getMembershipDefinedOnTeam();if("member"===t.type)return!1;if(!o.isDefined())return!1;const l=o.getPermissionItems(),c=o.id;if(r&&(0,a().bk)({teamValue:{id:c,permissions:l},permissionRole:r}))throw new Error("Cannot set member's permission to be lower than default team permission.");const{userIds:d,groupIds:p}=(0,u().XO)({membership:s});if("user"===t.entity_type){if(!d.includes(t.user_id))throw new Error("Specified user is not an owner of the team")}else if("group"===t.entity_type&&!p.includes(t.group_id))throw new Error("Specified group is not an owner of the team");let m=!1;if(s.length>0){const e=o.getMembershipDefinedOnTeam().filter((e=>!oe(e,t)));m=s.length!==e.length;const r=[{...t,type:"member"},...e];I().applyOperation({store:o,operation:{pointer:o.pointer,path:["membership"],command:"set",args:r},transaction:n}),g().mz(i,{store:o,memberInfo:t,team_role:"member"})}let f=r||"none";const v=(0,u().xC)({id:c,permissions:l});return v&&r===v&&(f="none"),b().$G({environment:i,store:o,permissionItems:[ne({memberInfo:t,newRole:f})],transaction:n,skipAnalytics:m})}function ee(e){let{environment:t,userId:o,teamStore:n,spaceStore:i,transaction:r,newTeamRole:a}=e;if(!n.isDefined())return!1;const s=n.getRawMembership().find((e=>"user"===e.entity_type&&e.user_id===o));return void 0!==s&&(s.type!==a&&(I().applyOperation({store:n,operation:{pointer:n.pointer,path:["membership"],command:"setTeamMembershipItem",args:{entity_type:"user",type:a,user_id:o}},transaction:r}),b().tQ({environment:t,spaceStore:i,permissionItems:[{type:"user_permission",role:"read_and_write",user_id:o}],transaction:r}),ie({environment:t,memberInfo:s,teamStore:n,transaction:r}),!0))}function te(e){let{environment:t,memberInfo:o,teamStore:n,transaction:i}=e;if("owner"===o.type)return!1;if(!n.isDefined())return!1;const r=n.getMembershipDefinedOnTeam().filter((e=>!oe(e,o))),a=[{...o,type:"owner"},...r];return I().applyOperation({store:n,operation:{pointer:n.pointer,path:["membership"],command:"set",args:a},transaction:i}),g().mz(t,{store:n,memberInfo:o,team_role:"owner"}),ie({environment:t,memberInfo:o,teamStore:n,transaction:i}),!0}function oe(e,t){return"user"===e.entity_type&&"user"===t.entity_type?e.user_id===t.user_id:"group"===e.entity_type&&"group"===t.entity_type&&e.group_id===t.group_id}function ne(e){let{memberInfo:t,newRole:o}=e;return"user"===t.entity_type?{type:"user_permission",user_id:t.user_id,role:o}:{type:"group_permission",group_id:t.group_id,role:o}}function ie(e){let{environment:t,memberInfo:o,teamStore:n,transaction:i}=e;return!!n.getPermissionItems()&&(b().$G({environment:t,store:n,permissionItems:[ne({memberInfo:o,newRole:"none"})],transaction:i}),!0)}async function re(e){let{store:t,environment:o,accessLevel:n,teamName:i,from:r,isDefault:a}=e;const{currentSpaceStore:s}=U().default.getState();if(!s)throw new Error("currentSpaceStore does not exist");const l=t.isDefault()??!1,c=t.getTeamAccessLevel(),d=(0,u().Hf)({membership:t.getRawMembership()}).length;if(n===c&&a===l)return!1;if(!(await P().hL({teamName:i,accessLevel:n,currentIsDefault:l,isDefault:a,numberOfTeamGuests:d})))return!1;const p=t.getPermissionItems(),m=t.getSettingsStore().getValue();if(!m||!p)return!1;const f=(0,u().AW)({teamValue:{id:t.id,permissions:p,settings:m},accessLevel:n,isDefault:a}),{performResult:{result:g}}=I().createAndCommit({userAction:"teamActions.setTeamAccessLevel",environment:o,canUndo:!0,perform:e=>{Q({environment:o,transaction:e,teamStore:t,isDefault:"invite_only"!==f.settings.space_member_join_access&&a,from:r,createNewTeamFlowId:void 0});const n=b().$G({environment:o,store:t,permissionItems:f.permissions,transaction:e});return y().sW({store:t.getSettingsStore(),data:f.settings,transaction:e}),{result:n}}});return g&&v().BW(o,{store:t,old_access_level:c,new_access_level:n,from:r}),g}function ae(e){let{memberInfo:t,teamStore:o,transaction:n,environment:i,permissionRole:r}=e;if("owner"===t.type)return X({memberInfo:t,teamStore:o,transaction:n,environment:i,permissionRole:r});if(!o.isDefined())return!1;const s=o.id,l=o.getPermissionItems();if(r&&(0,a().bk)({teamValue:{id:s,permissions:l},permissionRole:r}))throw new Error("Cannot set member's permission to be lower than default team permission.");const c="user"===t.entity_type&&o.isMemberOrGuest(t.user_id,new Set),d="group"===t.entity_type&&o.getRawMembership().some((e=>"group"===e.entity_type&&e.group_id===t.group_id));if(!c&&!d)throw new Error("Specified memberInfo not found on team");let p=r||"none";const m=(0,u().xC)({id:s,permissions:l});return m&&r===m&&(p="none"),b().$G({environment:i,store:o,permissionItems:[ne({memberInfo:t,newRole:p})],transaction:n})}function se(e,t){E().default.setState({...E().default.state,open:!0,from:e}),E().default.state.onClose=null==t?void 0:t.onClose}async function le(e){let{environment:t,currentSpaceStore:o,teamStore:n,from:i,action:r}=e;const a=t.currentUser.id;if(!a||!o||!(0,z().o)({userId:a,spaceStore:o,entrypoint:i}))return!1;if(!(await async function(e){return!q().Z.state.open&&await new Promise((t=>{q().Z.setState({open:!0,type:e,onAccept:()=>t(!0),onCancel:()=>t(!1)})}))}(r)))return!1;const s=await h().callApi({eventName:"setAdminPrivilegedTeamMembership",environment:t,data:{spaceId:o.id,teamId:n.id,teamRole:ce(r)}});if("failed"===s.type)return Me(s),!1;switch(r){case"joinTeamAsOwner":case"joinClosedOrPrivateTeamAsMember":ue({environment:t,teamStore:n,from:i,newRole:"joinTeamAsOwner"===r?"owner":"member",usingAdminPrivileges:!0,andNavigateToTeamHome:!1});break;case"upgradeToOwner":g().mz(t,{memberInfo:{entity_type:"user",user_id:a,type:"member"},team_role:"owner",store:n});const e=n.getName();e&&(0,A()._t)(e);break;default:(0,m().t1)(r)}return!0}function ce(e){switch(e){case"joinTeamAsOwner":case"upgradeToOwner":return"owner";case"joinClosedOrPrivateTeamAsMember":return"member";default:(0,m().t1)(e)}}async function de(e){let{environment:t,currentSpaceStore:o,teamStore:n,from:i,andNavigateToTeamHome:r}=e;const a=t.currentUser.id;if(!a)return!1;const s=await h().callApi({eventName:"updateTeamMembers",environment:t,data:{spaceId:o.id,teamId:n.id,newMembersOrGuestsToAdd:[{type:"member",entity_type:"user",user_id:a}]}});return"failed"===s.type?(Me(s),!1):(ue({environment:t,teamStore:n,from:i,newRole:"member",usingAdminPrivileges:!1,andNavigateToTeamHome:r}),!0)}function ue(e){let{environment:t,teamStore:o,from:n,newRole:i,usingAdminPrivileges:r,andNavigateToTeamHome:a}=e;const s=t.currentUser.id,l=U().default.state.currentSpaceStore,c=U().default.state.currentSpaceViewStore;if(!s||!l||!c)return!1;!function(e){var t;let{environment:o,currentSpaceViewStore:n,teamId:i}=e;const r=null===(t=(0,x().k_)(o).state)||void 0===t?void 0:t.userJoinedTeamsStores;if(!r||!n)return!1;const a=[...r.map((e=>{let{id:t}=e;return t})).filter((e=>e!==i)),i];k().Ct({environment:o,currentSpaceViewStore:n,orderedTeamIds:a,userAction:"TeamBrowserOutliner",isExplicitUserAction:!1})}({environment:t,currentSpaceViewStore:c,teamId:o.id}),v().UD(t,{store:o,joined_role:i,from:n}),C().l({environment:t,userId:s,spaceId:l.id});const d=o.getName();a?(xe({environment:t,teamStore:o,shouldScroll:!1}),d&&new Promise((e=>setTimeout(e,500))).then((()=>{(0,A().$$)({teamName:d,usingAdminPrivileges:r})}))):d&&(0,A().$$)({teamName:d,usingAdminPrivileges:r})}async function pe(e){let{environment:t,teamId:o,spaceId:n,teamUserInfo:i,isSettingDefaultTeam:r,inviterId:a}=e;const s=t.currentUser.id;if(!n||!s)return!1;return"failed"!==(await h().updateTeamMembers(t,{spaceId:n,teamId:o,newMembersOrGuestsToAdd:[i],isSettingDefaultTeam:r,addNewMembersToSpace:!1},a)).type}async function me(e){let{environment:t,teamStore:o,teamMemberInfos:n,isSettingDefaultTeam:i,createNewTeamFlowId:r}=e;const a=o.getSpaceId();if(!a)return!1;const s=t.currentUser.id;if(!a||!s)return!1;if("failed"===(await h().updateTeamMembers(t,{spaceId:a,teamId:o.id,newMembersOrGuestsToAdd:n,isSettingDefaultTeam:i,addNewMembersToSpace:(0,j().Mk)()},s)).type)return!1;if(!i){const e=n.flatMap((e=>"user"!==e.entity_type?[]:e.user_id)),i=e.length,a=n.filter((e=>"group"===e.entity_type)).length;i>0&&v().ix(t,{store:o,num_members_invited:i,create_new_team_flow_id:r,members_invited:e}),a>0&&v().$1(t,{store:o,num_groups_invited:a,create_new_team_flow_id:r})}return!0}function fe(e){switch(e){case"team_browser":case"duplicate_team":case"create_team_from_page":case"permission_item":case"teams_dropdown_for_team_guest":case"teams_dropdown_for_team_member":case"teams_dropdown_for_group":case"teamSidebar":case"teamBrowserSearch":case"teamBrowserUnjoinedTeams":case"teamBrowserJoinedTeams":case"team_breadcrumb_popup":case"team_menu_header":case"sidebar_team_modal":case"team_invite_link":case"teams_dropdown_space_settings_people":case"share_menu":case"team_home":return!1;case"manage_teams_table":case"team_settings_members":return!0;default:(0,m().t1)(e)}}function ge(e){let{environment:t,teamId:o,tab:n,from:i,buttonPopupStore:r}=e;const a=U().default.state.currentSpaceStore;if(!a)return;const s=V().zX.createChildStore(a,{table:c().e0,id:o});if(s.canRead())D().default.update((e=>({...e,open:!0,tab:n,teamStore:s,viewingUnjoinedPrivateTeamAsEnterpriseAdmin:!1})));else{const e=ve({environment:t,spaceStore:a,teamId:o,from:i});if(!e)return;D().default.update((t=>({...t,open:!0,tab:n,unjoinedPrivateTeamStore:e,viewingUnjoinedPrivateTeamAsEnterpriseAdmin:!0})))}r&&(N().Z.removeNamedPopup("team_more_actions"),r.setState({...r.state,open:!1}))}function ve(e){var t;let{environment:o,spaceStore:n,teamId:r,from:a}=e;if(!fe(a))return;const s=n.getModel(),l=null===(t=U().default.state.currentUserStore)||void 0===t?void 0:t.id;if(!l)return;const c=(0,R().VK)(n,l).getModel();if(!(0,i().RI)({space:s,spaceUser:c}))return;const d=H().Z.createTeamStoreFromCache({environment:o,teamId:r,spaceId:n.id,userId:l}),p=null==d?void 0:d.getModel(),m=F().Z.state.spacePermissionGroupIds;return null!=d&&d.canRead()&&p&&(0,u().Ei)({spaceUserModel:c,teamModel:p,spaceModel:s,userPermissionGroups:m})?d:void 0}async function he(e){let{environment:t,teamStore:o,from:n,userGroupsInTeam:i}=e;const r=t.currentUser.id;return!!r&&await _e({environment:t,teamStore:o,userId:r,from:n,userGroupsInTeam:i})}async function _e(e){let{environment:t,teamStore:o,userId:n,from:i,userGroupsInTeam:r}=e;const a=o.getSpaceId();if(!o.isDefined()||!t.currentUser.id||!a)return!1;const{ownerUserIds:s,ownerGroupIds:l}=o.getAllOwnerIds(),c=s.length+l.length===1,u=s[0]===n;if(u&&c)return P().ZH(),!1;if(void 0===o.getRawMembership().find((e=>"user"===e.entity_type&&e.user_id===n)))return P().T0(r),!1;const p=V().t1.createChildStore(o,{table:d().KJ,id:n}),m=n===t.currentUser.id,f=o.getName()??"",g=p.getDisplayName(T().Z.getIntl());if(!(await P().A8({isCurrentUser:m,teamName:f,memberName:g})))return!1;const _=[{entity_type:"user",type:u?"owner":"member",user_id:n}],b=await h().callApi({eventName:"updateTeamMembers",environment:t,data:{spaceId:a,teamId:o.id,existingMembersOrGuestsToRemove:_}});return"failed"===b.type?(Me(b),!1):(v().$(t,{store:o,is_leaving_team:m,num_members_removed:_.length,from:i}),r.length>0?m?(0,A().K9)(f,r):(0,A().zs)(g,f,r):m&&(0,A().e6)(f),C().l({environment:t,userId:n,spaceId:a}),!0)}function be(e){let{environment:t,teamStore:o,group:n}=e;const i=o.getSpaceId();if(!i)return;const r=o.getRawMembership().find((e=>"group"===e.entity_type&&e.group_id===n.group_id));if(!r)return;const{ownerUserIds:a,ownerGroupIds:s}=o.getAllOwnerIds(),l=a.length+s.length===1;if(1===s.length&&s[0]===n.group_id&&l)return(0,P().bD)(),!1;P().iT({group:n,onAccept:async()=>{const e=[r],n=await h().callApi({eventName:"updateTeamMembers",environment:t,data:{spaceId:i,teamId:o.id,existingMembersOrGuestsToRemove:e}});"failed"!==n.type?v().mi(t,{store:o,num_groups_removed:e.length}):Me(n)}})}function ye(e){return{archived_by:e,archived_at:Date.now(),is_default:!1}}async function Se(e){const{currentSpaceStore:t,currentSpaceViewStore:o}=U().default.getState();if(!t)throw new Error("currentSpaceStore does not exist");if(!o)throw new Error("currentSpaceViewStore does not exist");const{environment:n,teamStore:i,from:r}=e,c=n.currentUser.id,d=i.getName()||"",u=t.getSettingsStore();if(!c)return;const p=(0,a().wN)({userId:c,teamsThatUserIsANonGuestMemberOf:o.getNonGuestTeamsStores().map((e=>e.getModel())).filter(m().$K),spaceMembers:(0,Z().Io)()});if(await P().Fy(d,p)){if(p){const e=await P().wG(d);I().createAndCommit({userAction:"teamsHelpers.archiveLastTeam",environment:n,canUndo:!0,perform:o=>{if(W({store:i,update:ye(c),transaction:o}),y().sW({store:u,data:{is_teams_enabled:!1},transaction:o}),w().oy({planType:"personal",spaceStore:t,transaction:o}),e){const e=i.getTeamPagesStores()??[];for(const n of e){const e=n.getRole();if(!e)continue;const i={type:"user_permission",user_id:c,role:e},r=[...n.getPermissionItems().filter((e=>!s().fG(e)&&!s().Le(e)&&!s().Ir(e))),i];y().sW({store:n,data:{parent_id:t.id,parent_table:l().bx,permissions:r},transaction:o})}y().sW({store:i,data:{team_pages:[]},transaction:o})}}}),v().mF(n,{store:i,from:r})}else I().createAndCommit({userAction:"teamsHelpers.archiveTeam",environment:n,canUndo:!0,perform:e=>{W({store:i,update:ye(c),transaction:e})}});v().Gp(n,{store:i,from:r}),(0,K().tourIsActiveInSidebarStep)(K().default.state)&&K().default.setState({type:"inactive"}),D().default.setState({open:!1,limitMembers:!0,memberFilterQuery:"",tab:void 0}),(0,A().CC)(d)}}function we(e){let{environment:t,teamStore:o,teamName:n,from:i}=e;I().createAndCommit({userAction:"teamsHelpers.restoreArchivedTeam",environment:t,canUndo:!0,perform:e=>{W({store:o,update:{archived_by:void 0,archived_at:void 0},transaction:e})}}),v().IW(t,{store:o,from:i}),(0,A().JB)(n)}async function ke(e){let{settingName:t,newTeamSettingValue:o,spaceSettingValue:n,environment:i,store:r}=e;let a=!0;return"disable"===n&&"allow"===o?a=await P().hC(t):"disable"===o&&(a=await P().Bj(t)),!!a&&(I().createAndCommit({userAction:"teamsHelpers.changeTeamSetting",environment:i,canUndo:!0,perform:e=>{G({environment:i,store:r,update:{[t]:"disable"===o},transaction:e})}}),!0)}function Ie(e){return`TeamToggle_${e.id}`}function Ce(e){let{teamStore:t,environment:o}=e;if(o.device.isMobile)return;const n=Ie(t),i=B().Z.findDropTargetFromKey(n);if(i){const e=i.getNode();if(!(e instanceof HTMLElement))return;if(M().default.SidebarScroller){var r;const o=(null===(r=M().default.SidebarScroller.getNode())||void 0===r?void 0:r.offsetTop)||0,n=M().default.SidebarScroller.getNode();n&&n.scrollTo({top:e.offsetTop-o,left:0,behavior:"smooth"}),L().Z.setState(t.id),setTimeout((()=>{L().Z.state===t.id&&L().Z.setState(void 0)}),1500)}}}function xe(e){const{environment:t,teamStore:o,shouldScroll:i}=e;i&&Ce({teamStore:o,environment:t});const r=o.getTeamPagesStores();!r||r.length<1||(S()._c({environment:t,store:r[0],pageVisitSource:n().tY.JoinTeam}),v().SJ(t,{store:o}))}function Te(e){let{environment:t,from:o,teamStore:n}=e;const{state:i}=E().default;var r,a;(v().Pr(t,{screen:i.screen,team_id:i.teamId,team_has_icon:Boolean(i.icon),team_has_name:Boolean(i.name),team_has_description:Boolean(i.description),team_access_level:i.accessLevel,flow_id:i.flowId,from:o,store:n}),i.teamId)&&(null===(r=(a=E().default.state).onClose)||void 0===r||r.call(a,i.teamId));E().default.reset()}function Me(e){_().x2(e),r().log({level:"error",from:"teamActions",type:"TeamApiError",error:(0,p().Ui)(e.error),data:{miscDataToConvertToString:{body:e.body,status:e.status}}})}},997593:(e,t,o)=>{o.d(t,{RW:()=>l,k7:()=>s,oO:()=>c});o(267602),o(731107);var n=()=>o(35980),i=()=>o(381140),r=()=>o(34670),a=()=>o(934262);function s(e){const{environment:t,spaceViewStore:o,teamStore:r,outlinerToggleButtonStore:s,newIsHidden:c,shouldPersistToggleState:d,isExplicitUserAction:u}=e;s.setState({...s.state,isHidden:c}),u&&i().MR(t,{store:r,is_toggled:!c,outliner_type:e.teamOutlinerType}),d&&n().Z.set({userId:o.environment.currentUser.id,key:l(o,r.id),value:c}),c&&a().default.setState({type:"inactive"})}function l(e,t){return`Team_Outliner_Item_${e.id}:${t}`}function c(e){let{oldState:t,teamIds:o,spaceId:i,userId:a}=e;return o.reduce(((e,o)=>{if(o in e)return e;if(o in t)return e[o]=t[o],e;const s=l({id:i},o),c=n().Z.get({userId:a,key:s});return e[o]=new(r().Z),e[o].setState({isHidden:c??!1}),e}),{})}},111631:(e,t,o)=>{o.d(t,{I:()=>l,m:()=>c});o(821057);var n=()=>o(741633),i=()=>o(513670),r=()=>o(824462),a=()=>o(91502),s=()=>o(502175);async function l(e){let{environment:t,spaceId:o,userId:n}=e;if(!t.currentUser.loggedInUserIds.includes(n))throw new Error("Must be logged in user.");(0,a().bq)()&&(s().Z.getUserJoinedTeamsState({userId:n,spaceId:o})||await c({environment:t,spaceId:o,userId:n}))}async function c(e){var t;let{environment:o,spaceId:a,userId:l,emitValue:c}=e;if(!o.currentUser.loggedInUserIds.includes(l))throw new Error("Must be logged in user.");s().Z.setHasFetched({userId:l,spaceId:a});const d=await r().callApi({eventName:"getTeams",environment:o,data:{spaceId:a,onlyJoined:!0},userId:l,headers:(0,n().Bb)({cellId:void 0,recordId:void 0,spaceId:a})});if("failed"===d.type)return;const u=d.data.teamIds,p=(null===(t=s().Z.getUserJoinedTeamsState({userId:l,spaceId:a}))||void 0===t?void 0:t.joinedTeamsIds)||[];u.length===p.length&&0===i().e5(u,p).length&&0===i().e5(p,u).length||s().Z.setUserJoinedTeamsState({userId:l,spaceId:a,state:{joinedTeamsIds:u,lastEmitValue:c}})}},383694:(e,t,o)=>{o.d(t,{p:()=>m});o(667294);var n=()=>o(219727),i=()=>o(142735),r=()=>o(846550),a=()=>o(890085),s=()=>o(321160),l=()=>o(943620),c=()=>o(345918),d=()=>o(876822),u=()=>o(826955),p=o(785893);function m(e){const{store:t,size:o=16,innerInitialSize:m,innerEmojiOrFlatIconSize:f,style:g,iconContainerStyles:v,iconBoxStyles:h,disabled:_=!1,onChange:b=(()=>{})}=e,y=(0,n().O7)(),{name:S,icon:w}=(0,i().VK)((()=>{const o=e.parentSpaceStore??d().default.state.currentSpaceStore;return t?t instanceof u().zX?{name:t.getName(),icon:e.icon??t.getIcon()}:{name:(0,c().rn)(y,t),icon:e.icon??(0,c().Wd)(y,t)}:{name:o&&`team-icon-${o.id}`,icon:e.icon}}),[t,y,e.icon,e.parentSpaceStore],{useDeepEqual:!0}),k=!(null!=w&&w.icon)||(0,a().V2)(w.icon)||(0,s().Z)(w.icon),I=!(null!=w&&w.icon),C=(0,r().yK)((e=>({backgroundContainer:{...k?{background:w&&(0,a().V2)(w.icon)?(0,a().Pk)({icon:w.icon,mode:e.mode,useLightGrayColor:!1}):e.regularDividerColor,width:o,height:o,...v}:{},...g},iconBox:{background:"unset",...h}})),[w,h,v,k,o,g]),x=e.iconLoggingData||t&&{recordTable:t.table,source:"team_settings"},T=k&&(!I||m);return(0,p.jsx)(l().Z,{title:S,icon:w,size:T?m??.9*o:o,emojiSize:k?f??.78*o:o,isEmptyPage:!1,style:C.backgroundContainer,iconBoxStyles:C.iconBox,isLarge:!0,largeIcon:!0,iconLoggingData:x,..._?{disabled:!0}:{disabled:!1,onChange:b,bucket:"public"},mediaPickerTabs:["icon","emoji","custom"]})}},895192:(e,t,o)=>{o.d(t,{o:()=>c,r:()=>d});var n=()=>o(219727),i=()=>o(142735),r=()=>o(464140),a=()=>o(591914),s=()=>o(876822),l=()=>o(555813);function c(e){var t;let{entrypoint:o,userId:n,spaceStore:i}=e;const s=null==i?void 0:i.getModel();if(!n||!s)return!1;const c=null===(t=(0,a()._P)(i,n))||void 0===t?void 0:t.getModel();if(!c)return!1;return(0,r().RI)({space:s,spaceUser:c})&&l().w6(o)}function d(e){const t=(0,n().O7)().currentUser.id;return(0,i().VK)((()=>{const{currentSpaceStore:o}=s().default.state;return c({entrypoint:e,spaceStore:o,userId:t})}),[t,e])}},162213:(e,t,o)=>{o.d(t,{Z:()=>r});o(267602),o(653476),o(241792);var n=()=>o(306164);class i extends(()=>o(263184))().default{getInitialState(){return{initialized:!1}}createTeamStoreFromCache(e){let{environment:t,teamId:i,spaceId:r,userId:a}=e;if(this.state.initialized&&r&&a&&this.state.spaceId===r&&this.state.userId===a)return new(o(197202).z)(t,{table:n().e0,id:i},{inMemoryRecordCache:this.state.inMemoryCache})}initialize(e){let{environment:t,userId:i,spaceId:r,teamIds:a,getRecordWithRole:s}=e;const l=new(o(66077).Z)({name:"GlobalEnterpriseAdminTeamsStore"});for(const o of a){const e={table:n().e0,id:o};l.setRecord({pointer:e,userId:i},s(e))}return this.setState({initialized:!0,spaceId:r,userId:i,inMemoryCache:l}),a.map((e=>this.createTeamStoreFromCache({environment:t,teamId:e,spaceId:r,userId:i}))).filter(o(696459).$K)}}const r=new i},606021:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{loadingState:"uninitialized"}}}const i=new n},813426:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1}}}const i=new n},502175:(e,t,o)=>{o.d(t,{Z:()=>r});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(241792);class n extends(()=>o(263184))().default{getInitialState(){return{joinedTeamsStates:{},hasFetched:new Set}}getJoinedTeamStores(e){var t;let{userId:n,spaceStore:i}=e;return((null===(t=this.getUserJoinedTeamsState({userId:n,spaceId:i.id}))||void 0===t?void 0:t.joinedTeamsIds)??[]).map((e=>o(826955).zX.createChildStore(i,{id:e,table:o(306164).e0,spaceId:i.id})))}getUserJoinedTeamsState(e){let{userId:t,spaceId:o}=e;const n=i({userId:t,spaceId:o});return this.state.joinedTeamsStates[n]}setUserJoinedTeamsState(e){let{userId:t,spaceId:o,state:n}=e;const r=i({userId:t,spaceId:o});this.state.joinedTeamsStates[r]=n,this.emit()}getHasFetched(e){let{userId:t,spaceId:o}=e;const n=i({userId:t,spaceId:o});return this.state.hasFetched.has(n)}setHasFetched(e){let{userId:t,spaceId:o}=e;const n=i({userId:t,spaceId:o});this.state.hasFetched.add(n)}}function i(e){let{userId:t,spaceId:o}=e;return`${t}:${o}`}const r=new n},461755:(e,t,o)=>{o.d(t,{E2:()=>n,dm:()=>i,wN:()=>r});const n=90,i=275,r=32},150719:(e,t,o)=>{o.d(t,{N:()=>a,v:()=>r});var n=()=>o(696459);const i={invertedInsertText:!0,invertedDeleteText:!0,invertedMoveTextSlice:!0,invertedAddAnnotation:!0,invertedRemoveAnnotation:!0};function r(e){return Boolean(i[e.command])}function a(e){const{pointer:t,invertedCrdtOperation:o,previousTextValue:i}=e,r=o.type;switch(r){case"invertedInsertText":return{command:"invertedInsertText",pointer:t,path:[],args:{...o,previousTextValue:i}};case"invertedDeleteText":return{command:"invertedDeleteText",pointer:t,path:[],args:{...o,previousTextValue:i}};case"invertedAddAnnotation":return{command:"invertedAddAnnotation",pointer:t,path:[],args:{...o,previousTextValue:i}};case"invertedRemoveAnnotation":return{command:"invertedRemoveAnnotation",pointer:t,path:[],args:{...o,previousTextValue:i}};default:(0,n().t1)(r)}}},311170:(e,t,o)=>{o.d(t,{F:()=>a});o(241792);var n=()=>o(386616),i=()=>o(269299),r=()=>o(150719);function a(e){const{transaction:t,store:o,crdtOperations:a,invertedOperations:s,fullTextValue:l}=e;i().applyCrdtTextOperations({transaction:t,store:o,operations:a.map((e=>(0,n().W5)({pointer:o.pointer,crdtOperation:e,fullTextValue:l}))),invertedOperations:s.map((e=>(0,r().N)({pointer:o.pointer,invertedCrdtOperation:e,previousTextValue:o.getBlockTitleStore().getValue()??[]})))})}},21062:(e,t,o)=>{o.d(t,{N:()=>f});var n=o(667294),i=()=>o(142735),r=()=>o(846550),a=()=>o(492522),s=()=>o(568017),l=()=>o(677559);const c=new(l().Ss)("tourTutorial",(()=>o.e(50467).then(o.bind(o,615e3)))),d=(0,l().kF)(c,(e=>e.TourTutorialContent));var u=()=>o(577741),p=()=>o(934262),m=o(785893);function f(e){let{children:t,step:o,wrapperStyle:l={},highlightStyle:c={},isFullWidth:f=!0,showSidebarOverlays:v=!0,showContentOverlays:h=!0,onBackButtonClick:_,onNextButtonClick:b,tutorialMetadata:y}=e;const S=(0,i().VK)((()=>p().default.state),[]),w=n.useRef(null),k=(0,r().yK)((e=>({highlight:{background:"dark"===e.mode?s().ZP.whiteWithAlpha(.05):s().ZP.blackWithAlpha(.05),boxShadow:e.outlineBlueInputBoxShadow,borderRadius:4,position:"relative",zIndex:a().u8,...c},opacityLayer:{position:"absolute",top:0,left:0,height:"100%",width:"100%",zIndex:a().mJ,background:e.surface.wash,opacity:.6}})),[c]);return"inactive"===S.type||S.step!==o?t:(0,m.jsxs)(m.Fragment,{children:[f?(0,m.jsx)(g,{ref:w,style:l,children:t}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{style:k.highlight,children:(0,m.jsx)(g,{ref:w,style:l,children:t})}),h&&(0,m.jsx)("div",{style:k.opacityLayer})]}),(0,m.jsx)(u().g,{calloutId:"sidebar_tour",shouldShow:!0,children:(0,m.jsx)(d,{step:S.step,contentRef:w,showSidebarOverlays:!!f&&v,onNextButtonClick:b,onBackButtonClick:_,tutorialMetadata:y})})]})}const g=n.forwardRef((function(e,t){let{children:o,style:n}=e;return(0,m.jsx)("div",{ref:t,style:n,children:o})}))},760797:(e,t,o)=>{o.d(t,{Q:()=>u,fc:()=>f,zr:()=>m});o(267602),o(653476),o(241792),o(228244);var n=o(667294),i=()=>o(142735),r=()=>o(696459),a=()=>o(876822),s=()=>o(934262);const l={prebuilt_templates:e=>!!e.initialTeamStoreId&&e.teamStoreIds.some((t=>t===e.initialTeamStoreId))};function c(e,t){const o=l[e];return!o||o(t)}function d(e,t){return e.filter((e=>c(e,t)))}function u(e,t,o){const n=e.indexOf(t);if(n<=-1||n>=e.length-1)return null;const i=e[n+1];return c(i,o)?i:u(e,i,o)}function p(e,t,o){const n=e.indexOf(t);if(n<=0)return null;const i=e[n-1];return c(i,o)?i:p(e,i,o)}function m(e){let t;switch(e){case"team_creator":t=s().orderedTeamSidebarTourSteps;break;case"home_checklist_workspace_tour":t=s().orderedHomeChecklistWorkspaceTourSteps;break;case"home_available":t=["home"];break;case"create_page":t=s().orderedCreatePageHomeChecklistTourSteps;break;case"chat_with_ai":t=s().orderedChatWithAiHomeChecklistTourSteps;break;case"collaborate":t=s().orderedCollaborateTourSteps;break;case"explore_community_templates":t=s().orderedExploreCommunityTemplatesTourSteps;break;case"explore_template_marketplace":t=s().orderedExploreCommunityTemplatesInAppTourSteps;break;case"explore_team_template":t=s().orderedExploreDocsTemplateTourSteps;break;case"explore_private_template":t=s().orderedExplorePrivateTemplateTourSteps;break;case"explore_personal_template":t=s().orderedExplorePersonalTemplateTourSteps;break;case"explore_getting_started_template":t=s().orderedExploreGettingStartedTemplateTourSteps;break;case"home_topbar_action_button":t=s().orderedHomeTopbarActionButtonTourSteps;break;case"team_workflow_templates":t=s().orderedTeamWorkflowTemplatesTourSteps;break;default:(0,r().t1)(e)}return t}function f(e,t){const o=(0,i().VK)((()=>{var e;return((null===(e=a().default.state.currentSpaceViewStore)||void 0===e?void 0:e.getTeamsStores())||[]).map((e=>e.id))}),[]),r=(0,i().VK)((()=>s().default.state.initialTeamStoreId),[]);return n.useMemo((()=>{const n=m(e),i={teamStoreIds:o,initialTeamStoreId:r};return[d(n,i),p(n,t,i),u(n,t,i)]}),[o,r,t,e])}},934262:(e,t,o)=>{o.r(t),o.d(t,{default:()=>y,orderedChatWithAiHomeChecklistTourSteps:()=>a,orderedCollaborateTourSteps:()=>s,orderedCreatePageHomeChecklistTourSteps:()=>r,orderedExploreCommunityTemplatesInAppTourSteps:()=>p,orderedExploreCommunityTemplatesTourSteps:()=>u,orderedExploreDocsTemplateTourSteps:()=>l,orderedExploreGettingStartedTemplateTourSteps:()=>m,orderedExplorePersonalTemplateTourSteps:()=>d,orderedExplorePrivateTemplateTourSteps:()=>c,orderedHomeChecklistWorkspaceTourSteps:()=>i,orderedHomeTopbarActionButtonTourSteps:()=>f,orderedTeamSidebarTourSteps:()=>n,orderedTeamWorkflowTemplatesTourSteps:()=>g,tourIsActive:()=>h,tourIsActiveInSidebarStep:()=>_});const n=["welcome","actions","teamspaces","prebuilt_templates","private","ai_assistant"],i=["actions","teamspaces","private"],r=["create_page_sidebar","create_page_start_with_title","create_page_type_slash","create_page_beyond_text"],a=["chat_with_ai"],s=["collaborate","collaborate_copy_link","collaborate_add_member"],l=["explore_team_template"],c=["explore_private_template"],d=["explore_personal_template"],u=["explore_templates","browse_templates"],p=["explore_templates"],m=["explore_getting_started_template"],f=["home_topbar_action_button"],g=["teamspaces"],v=["welcome","actions","teamspaces","prebuilt_templates","private","explore_templates","home","create_page_sidebar","chat_with_ai","explore_team_template"];function h(e){return"inactive"!==e.type}function _(e){return"inactive"!==e.type&&v.includes(e.step)}class b extends(()=>o(263184))().default{getInitialState(){return{type:"inactive"}}dismissTourTutorial(){this.setState({...this.state,type:"inactive"})}isTutorialStepActive(e){return"inactive"!==this.state.type&&this.state.step===e}}const y=new b},56348:(e,t,o)=>{o.d(t,{v:()=>x,j:()=>C});var n=()=>o(431595),i=()=>o(680146),r=()=>o(720866),a=o(667294),s=()=>o(219727),l=()=>o(142735),c=()=>o(788860),d=()=>o(696459),u=()=>o(102182),p=()=>o(312446),m=()=>o(549748),f=()=>o(524434),g=()=>o(538992),v=()=>o(404791),h=o(785893);function _(){const e=(0,m().Q)(),t=(0,l().VK)((()=>v().Z.didRequest()),[]);return"unavailable"===e?(0,h.jsx)(c()._H,{id:"translation.snackbar.paymentRequired.message",defaultMessage:"Reach out to your account representative to purchase the Notion AI add-on."}):"upsell"===e?(0,h.jsx)(c()._H,{id:"translate.snackbar.upsell.message",defaultMessage:"Youâ€™ve run out of free AI responses."}):"requestAccess"===e||"requestAccessNoFreeCredits"===e?t?(0,h.jsx)(c()._H,{id:"translate.snackbar.requestAccess.didRequest",defaultMessage:"Youâ€™ve run out of free AI responses. Weâ€™ve sent your request to the workspace owner for the Notion AI add-on."}):(0,h.jsx)(c()._H,{id:"translate.snackbar.requestAccess.message",defaultMessage:"Youâ€™ve run out of free AI responses."}):void(0,d().t1)(e)}function b(){const e=(0,s().O7)(),t=(0,m().Q)(),o=(0,l().VK)((()=>v().Z.didRequest()),[]),n=(0,l().VK)((()=>f().KR.isXMLAssistantEnabled()),[]),i=(0,a.useCallback)((()=>{(0,g().lx)({upsellType:"requestAccess",environment:e,isAssistantEnabled:n})}),[e,n]),r=(0,a.useCallback)((()=>{(0,g().lx)({upsellType:"upsell",environment:e,isAssistantEnabled:n})}),[e,n]);return"unavailable"===t?null:"requestAccess"===t||"requestAccessNoFreeCredits"===t?o?null:(0,h.jsx)(p().Pn,{onClick:i,children:(0,h.jsx)(c()._H,{id:"translate.snackbar.requestAccess.button",defaultMessage:"Request access"})}):"upsell"===t?(0,h.jsx)(p().Pn,{onClick:r,children:(0,h.jsx)(c()._H,{id:"translate.snackbar.upsell.button",defaultMessage:"Get unlimited AI"})}):void(0,d().t1)(t)}function y(){u().oV({label:(0,h.jsx)(S,{})})}function S(){return(0,h.jsx)(c()._H,{id:"translation.snackbar.retryable.error",defaultMessage:"There was an issue translating the page, please try again in a few minutes."})}function w(){return(0,h.jsx)(c()._H,{id:"translation.snackbar.payloadTooLarge.error",defaultMessage:"The page is too large to translate. Please try again with a smaller page."})}function k(){return(0,h.jsx)(c()._H,{defaultMessage:"Failed to translate page",id:"translation.snackbar.error"})}function I(){return(0,h.jsx)(c()._H,{defaultMessage:"Failed to duplicate translated page",id:"translation.snackbar.duplicate.error"})}function C(e){const t=(0,r().t)(e);(0,n().JU)(t)?u().oV({label:(0,h.jsx)(_,{}),right:(0,h.jsx)(b,{})}):(0,n().z1)(t)&&"Quota exceeded"===t.message?y():(0,n().z1)(t)&&"Payload too large"===t.message?u().oV({label:(0,h.jsx)(w,{})}):(0,n().eE)(t)?y():u().oV({label:(0,h.jsx)(k,{})}),i().rn(t,{from:"fullPageTranslationActions.generateAndApplyTranslationMapToPage",type:"error"})}function x(e){const t=(0,r().t)(e);u().oV({label:(0,h.jsx)(I,{})}),i().rn(t,{from:"fullPageTranslationActions.duplicateTranslatedPage",type:"error"})}},428241:(e,t,o)=>{o.d(t,{E:()=>i,u:()=>r});var n=o(667294);const i=(0,n.createContext)(new(o(289039).Z));function r(){return(0,n.useContext)(i)}i.displayName="TrustedDomainsContext"},293307:(e,t,o)=>{o.d(t,{B0:()=>c,So:()=>r,Vh:()=>d,_1:()=>s,cB:()=>a,gb:()=>l,iL:()=>u});var n=()=>o(677559);const i={WorkflowSettingsViews:new(n().Ss)("WorkflowSettingsViews",(()=>Promise.all([o.e(62743),o.e(90698),o.e(84885),o.e(80741),o.e(72586),o.e(71896),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63257),o.e(92329),o.e(57757)]).then(o.bind(o,581204)))),WorkflowTemplatesTooltip:new(n().Ss)("WorkflowTemplatesTooltip",(()=>Promise.all([o.e(80741),o.e(36738)]).then(o.bind(o,393218)))),WorkflowSettingsLinkedCollections:new(n().Ss)("WorkflowSettingsLinkedCollections",(()=>Promise.all([o.e(62743),o.e(90698),o.e(84885),o.e(80741),o.e(72586),o.e(71896),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63257),o.e(92329),o.e(59362)]).then(o.bind(o,699620)))),WorkflowSettingsConfirmAddTemplate:new(n().Ss)("WorkflowSettingsConfirmAddTemplate",(()=>Promise.all([o.e(62743),o.e(80741),o.e(72586),o.e(71896),o.e(49396),o.e(98032),o.e(63257),o.e(92329),o.e(92228)]).then(o.bind(o,792329)))),WorkflowTemplatesOnboardingModal:new(n().Ss)("WorkflowTemplatesOnboardingModal",(()=>Promise.all([o.e(62743),o.e(44832),o.e(90698),o.e(84885),o.e(37358),o.e(7312),o.e(98905),o.e(80741),o.e(72586),o.e(71896),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(32680),o.e(70907)]).then(o.bind(o,437395))))},r=(0,n().kF)(i.WorkflowSettingsViews,(e=>e.WorkflowSettingsViews)),a=(0,n().kF)(i.WorkflowTemplatesTooltip,(e=>e.WorkflowTemplatesTooltip)),s=(0,n().kF)(i.WorkflowSettingsLinkedCollections,(e=>e.WorkflowSettingsLinkedCollections)),l=(0,n().kF)(i.WorkflowSettingsConfirmAddTemplate,(e=>e.WorkflowSettingsConfirmAddTemplate)),c=(0,n().kF)(i.WorkflowTemplatesOnboardingModal,(e=>e.WorkflowTemplatesOnboardingModal)),d=new(n().Ss)("workflowTemplatesHelpers",(()=>Promise.all([o.e(80741),o.e(72586),o.e(95986)]).then(o.bind(o,281236)))),u=new(n().Ss)("loadWorkflowTemplateInstances",(async()=>o.e(81317).then(o.bind(o,491585))))},114104:(e,t,o)=>{o.d(t,{P$:()=>r,ZJ:()=>s,tx:()=>a,ul:()=>l});var n=()=>o(677559);const i={OnboardingLandingTemplateButton:new(n().Ss)("OnboardingLandingTemplateButton",(async()=>await Promise.all([o.e(62743),o.e(80741),o.e(72586),o.e(78923)]).then(o.bind(o,275152)))),OnboardingLandingTemplateButton2:new(n().Ss)("OnboardingLandingTemplateButton2",(async()=>await Promise.all([o.e(62743),o.e(80741),o.e(72586),o.e(78923)]).then(o.bind(o,373160)))),WorkflowTemplateThumbnail:new(n().Ss)("WorkflowTemplateThumbnail",(async()=>await Promise.all([o.e(62743),o.e(80741),o.e(72586),o.e(32680),o.e(1711)]).then(o.bind(o,460620))))},r=(0,n().kF)(i.OnboardingLandingTemplateButton,(e=>e.OnboardingLandingTemplateButton)),a=(0,n().kF)(i.OnboardingLandingTemplateButton2,(e=>e.OnboardingLandingTemplateButton2)),s=new(n().Ss)("workflowTemplatesOnboardingActions",(async()=>await Promise.all([o.e(90698),o.e(84885),o.e(80741),o.e(72586),o.e(71896),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(30795)]).then(o.bind(o,833186)))),l=(0,n().kF)(i.WorkflowTemplateThumbnail,(e=>e.WorkflowTemplateThumbnail))},662807:(e,t,o)=>{o.d(t,{Gn:()=>a,Jp:()=>s,sk:()=>r,tC:()=>l});var n=()=>o(677559);const i={WorkflowLinkBlock:new(n().Ss)("WorkflowLinkBlock",(async()=>await o.e(52668).then(o.bind(o,464982)))),WorkflowPageBlock:new(n().Ss)("WorkflowPageBlock",(async()=>await Promise.all([o.e(62743),o.e(52774),o.e(44832),o.e(90698),o.e(84885),o.e(37358),o.e(5242),o.e(7312),o.e(90424),o.e(81580),o.e(84325),o.e(31189),o.e(69343),o.e(46293),o.e(94556),o.e(78701),o.e(38804),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(46616),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63707),o.e(86609),o.e(91253),o.e(4642),o.e(5006),o.e(6612),o.e(61171),o.e(23179),o.e(75377),o.e(31020),o.e(2942),o.e(73682),o.e(58591),o.e(54803),o.e(1953),o.e(10216),o.e(58565),o.e(69197),o.e(42055),o.e(38739),o.e(44751),o.e(81567),o.e(63257),o.e(34291),o.e(1913),o.e(56054),o.e(95076),o.e(92341),o.e(82658),o.e(69583),o.e(46945),o.e(67019),o.e(5485),o.e(74324),o.e(65136),o.e(5086),o.e(81299)]).then(o.bind(o,186479)))),WorkflowTopbarActions:new(n().Ss)("WorkflowTopbarActions",(async()=>await Promise.all([o.e(90698),o.e(84885),o.e(53335),o.e(54940),o.e(98721),o.e(67019),o.e(17894)]).then(o.bind(o,504325)))),ChatCollectionView:new(n().Ss)("ChatCollectionView",(async()=>await Promise.all([o.e(62743),o.e(52774),o.e(44832),o.e(90698),o.e(84885),o.e(37358),o.e(5242),o.e(7312),o.e(90424),o.e(81580),o.e(84325),o.e(31189),o.e(69343),o.e(46293),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(46616),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63707),o.e(86609),o.e(91253),o.e(4642),o.e(5006),o.e(6612),o.e(61171),o.e(23179),o.e(75377),o.e(31020),o.e(2942),o.e(73682),o.e(58591),o.e(54803),o.e(1953),o.e(10216),o.e(58565),o.e(69197),o.e(42055),o.e(38739),o.e(44751),o.e(81567),o.e(63257),o.e(34291),o.e(1913),o.e(56054),o.e(95076),o.e(82658),o.e(67019),o.e(74324),o.e(27517)]).then(o.bind(o,331277))))},r=(0,n().iS)(i.WorkflowLinkBlock,(e=>e.default)),a=(0,n().kF)(i.WorkflowPageBlock,(e=>e.default)),s=(0,n().kF)(i.WorkflowTopbarActions,(e=>e.default)),l=(0,n().kF)(i.ChatCollectionView,(e=>e.ChatCollectionView))},79179:(e,t,o)=>{o.d(t,{z:()=>i,m:()=>r});o(821057),o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(30005),o(241792),o(228244);var n=()=>o(839002);class i{static map(e,t,o){return n().qd(t,e,o)}constructor(e){this.queue=[],this.waitingList=[],this.running=[],this.afterFlushes=[],this.afterClogs=[],this.waiting=!1,this.parallel=e}getStats(){return{running:this.running.length,queue:this.queue.length,waitingList:this.queue.length}}isEmpty(){return 0===this.running.length&&0===this.waitingList.length&&0===this.queue.length}isWaiting(){return this.waiting}setParallelism(e){this.parallel=e,this.flush()}getParallelism(){return this.parallel}enqueue(e){const t=n().UZ(),o=()=>e().then(t.resolve).catch((e=>{t.reject(e)}));this.waiting?this.waitingList.push({deferred:t,action:o}):this.queue.push({deferred:t,action:o}),this.flush();return r({promise:t.promise,canCancel:()=>this.queue.some((e=>e.deferred===t))||this.waitingList.some((e=>e.deferred===t)),cancel:e=>{const o=this.queue.findIndex((e=>e.deferred===t));if(o>=0)return this.queue.splice(o,1),void t.reject(e);return this.waitingList.findIndex((e=>e.deferred===t))>=0?(this.waitingList.splice(o,1),void t.reject(e)):void 0}})}wait(){this.waiting=!0;for(let e=0;e<this.queue.length;e++)this.waitingList.push(this.queue[e]);this.queue.length=0}resume(){this.waiting=!1;for(let e=0;e<this.waitingList.length;e++)this.queue.push(this.waitingList[e]);this.waitingList.length=0,this.flush()}async*mapAsyncIterable(e,t){const o=new Set,n=new Set;e.map((e=>{const i=this.enqueue((()=>t(e)));o.add(i);const r=i.finally((()=>{o.delete(i),n.delete(r)}));return n.add(r),r}));try{for(;n.size>0;)yield await Promise.race(n)}catch(i){throw o.forEach((e=>e.cancel(i))),i}finally{o.forEach((e=>e.cancel(new Error("CanceledTask."))))}}wrap(e){var t=this;return function(){for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return t.enqueue((()=>e(...n)))}}enqueueImmediate(e){const t=e(),o=n().UZ();return t.then(o.resolve).catch(o.reject),this.queue.push({action:()=>t,deferred:o}),this.flush(),t}flush(){if(0===this.queue.length){if(0===this.running.length&&0===this.waitingList.length){for(const e of this.afterFlushes)e.resolve(null);this.afterFlushes=[]}if(this.running.length<this.parallel){for(const e of this.afterClogs)e.resolve(null);this.afterClogs=[]}return}if(this.running.length>=this.parallel)return;const e=this.queue.splice(0,this.parallel-this.running.length);for(const t of e)this.running.push(t);for(const t of e)t.action().then((()=>{this.running.splice(this.running.indexOf(t),1),this.flush()}))}afterFlush(){const e=n().UZ();return this.afterFlushes.push(e),this.flush(),e.promise}afterClog(){const e=n().UZ();return this.afterClogs.push(e),this.flush(),e.promise}cancel(){const e=this.running,t=this.queue,o=this.waitingList;this.running=[],this.queue=[],this.waitingList=[];for(const n of e)n.deferred.reject(new Error("CanceledTask."));for(const n of t)n.deferred.reject(new Error("CanceledTask."));for(const n of o)n.deferred.reject(new Error("CanceledTask."))}}function r(e){const{promise:t,canCancel:o,cancel:n}=e,i=t;return i.canCancel=o,i.cancel=n,i}},577219:(e,t,o)=>{o.d(t,{kB:()=>d});o(821057),o(267602),o(653476),o(241792);var n=()=>o(696459),i=()=>o(326966),r=()=>o(124199);const a=Symbol("JSON Schema"),s=Symbol("JSON Schema Components"),l=Symbol("No JSON Schema"),c={isNull:()=>({type:"null",[s]:{}}),boolean:()=>({type:"boolean",[s]:{}}),number:()=>({type:"number",[s]:{}}),integer:()=>({type:"integer",[s]:{}}),string:()=>({type:"string",[s]:{}}),dateString:()=>({type:"string",format:"date",[s]:{}}),literal:e=>({enum:[e],[s]:{}}),literals:function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return{enum:t,[s]:{}}},uuid:()=>({type:"string",format:"uuid",[s]:{}}),uuidWithoutDashes:()=>({type:"string",format:"uuid",[s]:{}}),any:()=>u,array:e=>({type:"array",items:e[a],[s]:e[a][s]}),tuple:e=>({type:"tuple",items:!1,prefixItems:e.map((e=>e[a])).filter((e=>e!==l)),[s]:Object.assign({},...e.map((e=>e[a][s])))}),record:(e,t)=>({type:"object",additionalProperties:t[a],[s]:t[a][s]}),object:e=>{let{required:t,optional:o,exact:n}=e;return{type:"object",properties:(0,i().m8)(Object.entries({...t,...o}).filter((e=>{let[t,o]=e;return o[a]!==l})).map((e=>{let[t,o]=e;return[t,o[a]]}))),...n&&{additionalProperties:!1},...Object.keys(t).length>0&&{required:Object.keys(t)},[s]:Object.assign({},...Object.values({...t,...o}).map((e=>e[a][s])))}},union:e=>({anyOf:e.map((e=>e[a])).filter((e=>e!==l)),[s]:Object.assign({},...e.map((e=>e[a][s])))}),gte:(e,t)=>{const o=e[a];return o!==l?{...o,minimum:t}:o},lte:(e,t)=>{const o=e[a];return o!==l?{...o,maximum:t}:o},maxLength:(e,t)=>{const o=e[a];if(o===l)return o;if("type"in o){if("string"===o.type)return{...o,maxLength:t};if("array"===o.type)return{...o,maxItems:t}}throw new Error("Unknown type for max length.")},minLength:(e,t)=>{const o=e[a];if(o===l)return o;if("type"in o){if("string"===o.type)return{...o,minLength:t};if("array"===o.type)return{...o,minItems:t}}throw new Error("Unknown type for min length.")},nonEmpty:e=>{const t=e[a];if(t===l)return t;if("type"in t){if("string"===t.type)return{...t,minLength:1};if("object"===t.type)return{...t,minProperties:1};if("array"===t.type)return{...t,minItems:1}}throw new Error("Unknown non-emptyable type.")},nullable:e=>{const t=e[a];if(t===l)return t;if("type"in t)if(Array.isArray(t.type)){if("null"===t.type[1])return t;(0,n().t1)(t.type[1])}else{if("string"===t.type)return{...t,type:[t.type,"null"]};if("object"===t.type)return{...t,type:[t.type,"null"]};if("array"===t.type)return{...t,type:[t.type,"null"]};if("tuple"===t.type)return{...t,type:[t.type,"null"]};if("boolean"===t.type)return{...t,type:[t.type,"null"]};if("integer"===t.type)return{...t,type:[t.type,"null"]};if("number"===t.type)return{...t,type:[t.type,"null"]};if("null"===t.type)return t;(0,n().t1)(t.type)}else{if("const"in t)return{...t,enum:[t.const,null]};if("enum"in t)return{...t,enum:[...t.enum,null]};if("anyOf"in t)return{...t,anyOf:t.anyOf.map((e=>c.nullable({[a]:e})))};if("$ref"in t)return{anyOf:[t,{type:"null"}],[s]:t[s]};if(o=t,(0,n().Kn)(o)&&0===Object.keys(o).length)return t;(0,n().t1)(t)}var o}},d=(0,i().m8)(Object.entries(c).map((e=>{let[t,o]=e;return[t,function(){for(var e=arguments.length,i=new Array(e),l=0;l<e;l++)i[l]=arguments[l];return 1===i.length&&(0,n().Kn)(i[0])&&("id"in i[0]||"description"in i[0])?function(){const{description:e,examples:n,id:l}=i[0];let c={description:e,...n&&{examples:n},...o(...arguments)};return l&&(c={$ref:`#/components/schemas/${l}`,[s]:{...c[s],[l]:c}}),{[a]:c,...r()[t](...arguments)}}:{[a]:o(...i),...r()[t](...i)}}]})));Symbol("Exact empty object ({})"),d.object({id:"emptyObject"})({required:{},optional:{},exact:!0});const u={}},973019:(e,t,o)=>{o.d(t,{Z:()=>i});o(821057),o(670560),o(241792);var n=()=>o(839002);const i=class{constructor(e){this.performRequests=void 0,this.batchSize=void 0,this.maxWorkers=void 0,this.requestDelayMs=void 0,this.requestTimeoutMs=void 0,this.queue=[],this.currentWorkers=0,this.currentSetTimeouts=0,this.dequeue=async()=>{if(this.currentSetTimeouts=0,this.currentWorkers>=this.maxWorkers||0===this.queue.length)return;this.currentWorkers++;const e=this.queue.splice(0,this.batchSize),t=e.map((e=>e.request));let i,r;try{if(this.requestTimeoutMs){const e=await n().OI(this.requestTimeoutMs,this.performRequests(t));if(e.timeout)throw new Error("Timed out.");i=e.result}else i=await this.performRequests(t)}catch(a){r=(0,o(720866).t)(a)}try{if(r)for(let t=0;t<e.length;t++){e[t].deferred.reject(r)}else if(i)for(let t=0;t<e.length;t++){const o=e[t],n=i[t];o.deferred.resolve(n)}}catch(s){}this.currentWorkers--,this.queue.length>=this.batchSize?this.dequeue():this.dequeueAfterTimeout()};const{performRequests:t,batchSize:i,maxWorkers:r,requestDelayMs:a,requestTimeoutMs:s}=e;this.performRequests=t,this.batchSize=i,this.maxWorkers=r,this.requestDelayMs=a||0,this.requestTimeoutMs=s}getQueueSize(){return this.queue.length}updateBatchSize(e){this.batchSize=e}updateRequestDelayMs(e){this.requestDelayMs=e}getMaxWorkers(){return this.maxWorkers}updateMaxWorkers(e){this.maxWorkers=e,this.dequeueAfterTimeout()}enqueue(e){const t=n().UZ();return this.queue.push({request:e,deferred:t}),this.dequeueAfterTimeout(),t.promise}dequeueAfterTimeout(){this.currentSetTimeouts<this.maxWorkers&&(this.currentSetTimeouts++,setTimeout(this.dequeue,this.requestDelayMs))}}},871663:(e,t,o)=>{o.d(t,{Z:()=>n});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(30005);const n=class{constructor(){this.listeners={}}addListener(e,t){let o=this.listeners[e];o||(o=new Set,this.listeners[e]=o),o.add(t)}addOnceListener(e,t){var o=this;const n=function(){o.removeListener(e,n),t(...arguments)};this.addListener(e,n)}removeListener(e,t){const o=this.listeners[e];o&&(o.delete(t),0===o.size&&delete this.listeners[e])}emit(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),n=1;n<t;n++)o[n-1]=arguments[n];const i=this.listeners[e];i&&i.forEach((e=>e(...o)))}listenerCount(e){const t=this.listeners[e];return t?t.size:0}}},830742:(e,t,o)=>{o.d(t,{LS:()=>n});Symbol("eventName");function n(e){return e}},265704:(e,t,o)=>{o.d(t,{s:()=>n});o(670560);class n{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{};this.buckets={},this.count=0,this.total=0,this.unique=0,this.startedAt=new Map,this.logger=e}async measureErrors(e,t,o,n){const i=`${e} ${++this.unique}`;this.start(i);try{const e=await n();return this.end(i,t),e}catch(r){throw this.end(i,o,r),r}}get average(){return Math.floor(this.total/this.count)}get summary(){const e=[];e.push(`avg ${this.average}ms for ${this.count} calls`);for(const[t,n]of(0,o(696459).qP)(this.buckets)){if(!n)continue;const o=Math.floor(n.total/n.count),i=(n.count/this.count*100).toFixed(2);e.push(`[${t}: ${i}% avg ${o}ms]`)}return e.join(" ")}start(e){this.startedAt.set(e,"object"==typeof performance?performance.now():Date.now())}end(e,t){const o=this.startedAt.get(e);if(!o)return;this.startedAt.delete(e);const n=("object"==typeof performance?performance.now():Date.now())-o;this.count++,this.total=this.total+n;let i=this.buckets[t];i||(i={count:0,total:0},this.buckets[t]=i),i.count++,i.total=i.total+n;for(var r=arguments.length,a=new Array(r>2?r-2:0),s=2;s<r;s++)a[s-2]=arguments[s];this.logger(`end ${e} ${t}: ${n}ms`,...a)}}},511839:(e,t,o)=>{o.d(t,{Z:()=>i});o(821057),o(670560);var n=()=>o(720866);const i=class{constructor(e){let{maxSize:t,prefix:o,store:n,version:i}=e;this.prefix=void 0,this.maxSize=void 0,this.store=void 0,this.version=void 0,this.serializedKeys=void 0,this.namespace=void 0,this.lastVersion=void 0,this.createInternalKey=e=>`${this.namespace}${e}`,this.maxSize=t,this.prefix=o,this.store=n,this.version=i.toString(),this.namespace=`${o}:${i}::`,this.serializedKeys=`${o}:${i}:keys`,this.lastVersion=`${o}:version`}set(e,t){try{this.setInternal(e,t),this.promote(e)}catch(o){return{error:(0,n().t)(o)}}return{value:void 0}}get(e){try{const t=this.getInternal(e);if(null!==t)return{value:t}}catch(t){return{error:(0,n().t)(t)}}return{value:void 0}}remove(e){try{this.getKeys().indexOf(e)>-1&&(this.removeInternal(e),this.evict(e))}catch(t){return{error:(0,n().t)(t)}}return{value:void 0}}clear(){try{const e=this.getKeys();for(const t of e)this.removeInternal(t);this.setKeys([])}catch(e){return{error:(0,n().t)(e)}}return{value:void 0}}scan(e){try{const t=this.getKeys();for(const o of t){const t=this.getInternal(o);if(null===t)throw new Error(`Item not found: ${o}`);e(o,t)}}catch(t){return{error:(0,n().t)(t)}}return{value:void 0}}entries(){const e=[],t=this.scan(((t,o)=>{e.push([t,o])}));return t.error?{error:t.error}:{value:e}}keys(){try{return{value:this.getKeys()}}catch(e){return{error:(0,n().t)(e)}}}slowGC(){const e=[],t=e=>e!==this.serializedKeys&&(!!e.endsWith("keys")&&this.isOldKey(e));for(let o=0;o<this.store.length;o+=1){const n=this.store.key(o);null!==n&&((this.isOldKey(n)||t(n))&&e.push(n))}for(const o of e)this.store.removeItem(o)}updateVersionAndGC(){const e=this.store.getItem(this.lastVersion);if(null!==e){const t=parseInt(e,10),o=parseInt(this.version,10),n=!Number.isNaN(t),i=!Number.isNaN(o);n&&i&&t<o&&this.slowGC()}this.store.setItem(this.lastVersion,this.version)}isOldKey(e){if(!e.startsWith(`${this.prefix}:`))return!1;const t=e.substring(`${this.prefix}:`.length),o=parseInt(t,10);if(Number.isNaN(o))return!1;return o<parseInt(this.version,10)}getKeys(){const e=this.store.getItem(this.serializedKeys);if(null===e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}setKeys(e){const t=JSON.stringify(e);this.store.setItem(this.serializedKeys,t)}promote(e){const t=this.getKeys(),o=t.indexOf(e);if(o>-1)t.splice(o,1),t.unshift(e);else if(t.unshift(e),t.length>this.maxSize){const e=t.splice(this.maxSize);for(const t of e)this.removeInternal(t)}this.setKeys(t)}evict(e){const t=this.getKeys(),o=t.indexOf(e);o>-1&&t.splice(o,1),this.setKeys(t)}setInternal(e,t){this.store.setItem(this.createInternalKey(e),JSON.stringify(t))}getInternal(e){const t=this.store.getItem(this.createInternalKey(e));return null===t?null:JSON.parse(t)}removeInternal(e){this.store.removeItem(this.createInternalKey(e))}}},370590:(e,t,o)=>{o.d(t,{mI:()=>A,uP:()=>P,yx:()=>M});var n=()=>o(124199);const i=n().union([n().number(),n().string(),n().boolean(),n().isNull(),n().array(n().string())]),r=n().undefinable(i),a=n().union([i,n().record(n().string(),i)]),s=n().union([r,n().record(n().string(),r)]),l=n().union([s,n().record(n().string(),s)]),c=l,d=n().without(n().without(n().nonEmpty(n().string()),"{"),"}");n().object({required:{key:d,value:a,ttl:n().undefinable(n().number())},optional:{}}),n().object({required:{key:d,value:s,version:n().number()},optional:{}}),n().object({required:{key:d,value:n().number(),ttl:n().undefinable(n().number())},optional:{}}),n().object({required:{key:d,value:n().number(),version:n().number()},optional:{}}),n().object({required:{key:d,amount:n().number(),ttl:n().undefinable(n().number())},optional:{passThroughData:c}}),n().object({required:{key:d,value:n().number(),version:n().number()},optional:{}}),n().object({required:{key:d,field:n().string(),value:s,ttl:n().undefinable(n().number())},optional:{}}),n().object({required:{key:d,field:n().string(),value:l,version:n().number()},optional:{}}),n().object({required:{id:n().string()},optional:{}}),n().object({required:{setValueTime:n().number()},optional:{}}),n().object({required:{ackId:n().string()},optional:{}}),n().object({required:{},optional:{}}),n().object({required:{key:d,field:n().string(),updates:n().record(n().string(),r),ttl:n().undefinable(n().number())},optional:{onDisconnectFields:n().undefinable(n().object({required:{presenceOnDisconnectFlag:n().literals("register","clear"),subscriptionId:n().string(),pageVisitId:n().undefinable(n().string()),spaceId:n().string(),pageId:n().string()},optional:{}}))}}),n().object({required:{key:d,field:n().string(),value:l,version:n().number()},optional:{}});const u=n().object({required:{blockId:n().string(),userId:n().string(),spaceId:n().string(),operation:n().literal("logPageExit"),pageVisitId:n().undefinable(n().string()),ts:n().number()},optional:{}}),p=(n().object({required:{key:d},optional:{}}),n().object({required:{key:d,value:s,version:n().number()},optional:{}}),n().object({required:{operation:n().literal("setValue"),key:d,value:n().string(),ttl:n().undefinable(n().number())},optional:{}})),m=n().object({required:{operation:n().literal("setValue"),key:d,value:s,version:n().number()},optional:{}}),f=n().object({required:{operation:n().literal("increment"),key:d,amount:n().number(),ttl:n().undefinable(n().number())},optional:{passThroughData:c}}),g=n().object({required:{operation:n().literal("increment"),key:d,value:n().number(),version:n().number()},optional:{}}),v=n().object({required:{operation:n().literal("setIfGreater"),key:d,value:n().number(),ttl:n().undefinable(n().number())},optional:{}}),h=n().object({required:{operation:n().literal("setIfGreater"),key:d,value:n().number(),version:n().number()},optional:{}}),_=n().object({required:{operation:n().literal("setField"),key:d,field:n().string(),value:s,ttl:n().undefinable(n().number())},optional:{}}),b=n().object({required:{operation:n().literal("setField"),key:d,field:n().string(),value:l,version:n().number()},optional:{}}),y=n().object({required:{operation:n().literal("updateField"),key:d,field:n().string(),updates:n().record(n().string(),r),ttl:n().undefinable(n().number())},optional:{onDisconnectFields:n().undefinable(n().object({required:{presenceOnDisconnectFlag:n().literals("register","clear"),subscriptionId:n().string(),pageVisitId:n().undefinable(n().string()),spaceId:n().string(),pageId:n().string()},optional:{}}))}}),S=n().object({required:{operation:n().literal("updateField"),key:d,field:n().string(),value:l,version:n().number()},optional:{}}),w=n().object({required:{operation:n().literal("logPageExit"),spaceId:n().string(),userId:n().string(),blockId:n().string(),pageVisitId:n().undefinable(n().string())},optional:{}}),k=n().object({required:{operation:n().literal("logPageExit")},optional:{}}),I={setValue:p,increment:f,setIfGreater:v,setField:_,updateField:y,logPageExit:w},C=n().union(Object.values(I)),x={setValue:m,increment:g,setIfGreater:h,setField:b,updateField:S,logPageExit:k},T=n().union(Object.values(x)),M=(n().object({required:{operations:n().array(C)},optional:{}}),n().object({required:{responses:n().array(T)},optional:{}}),n().object({required:{subscriptions:n().array(n().object({required:{key:d,version:n().number()},optional:{}}))},optional:{}}),n().object({required:{responses:n().array(n().object({required:{key:d,wasNotified:n().boolean()},optional:{}})),internalProcessingTimeMs:n().number()},optional:{}}),n().object({required:{key:d,version:n().number()},optional:{}}),n().object({required:{key:d,wasNotified:n().boolean()},optional:{}}),n().object({required:{keys:n().array(d)},optional:{}}),n().object({required:{keys:n().array(d),internalProcessingTimeMs:n().number()},optional:{}}),n().object({required:{key:d},optional:{}}),n().object({required:{key:d},optional:{}}),n().object({required:{disconnectId:n().string(),operations:n().array(C)},optional:{}}),n().object({required:{disconnectId:n().string(),hadDisconnect:n().boolean()},optional:{}}),n().object({required:{disconnectId:n().string()},optional:{}}),n().object({required:{disconnectId:n().string(),wasRemoved:n().boolean()},optional:{}}),n().union([n().object({required:{type:n().literal("notification"),key:d,value:l,version:n().number()},optional:{ackId:n().string(),passThroughData:c}}),n().object({required:{type:n().literal("response"),status:n().literals("ok","error"),requestId:n().string(),result:n().any()},optional:{}})])),P=n().object({required:{userId:n().string(),present:n().boolean()},optional:{activityTimestamp:n().number(),blockId:n().union([n().isNull(),n().string()]),onTrustedDomain:n().boolean()}}),A=n().object({required:{spaceId:n().string(),blockId:n().string(),visitedAt:n().number()},optional:{}});n().object({required:{max_records:n().number()},optional:{}}),n().object({required:{values:n().array(u)},optional:{}}),n().object({required:{last_length:n().number(),new_length:n().number(),added:n().boolean()},optional:{}})},285670:(e,t,o)=>{o.d(t,{R:()=>i,l:()=>n});const n="center_peek",i="side_peek"},672719:(e,t,o)=>{o.d(t,{M:()=>n});class n{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;this.lastTickTimeMs=void 0,this.tickIntervalMs=void 0,this.lastTickTimeMs=Date.now(),this.tickIntervalMs=e}async maybeYield(){const e=Date.now();e-this.lastTickTimeMs>this.tickIntervalMs&&(await(0,o(839002).AJ)(),this.lastTickTimeMs=e)}}},426546:(e,t,o)=>{o.d(t,{CY:()=>m,DG:()=>i,DY:()=>c,MW:()=>s,Sr:()=>d,Xf:()=>u,YL:()=>p,Yc:()=>l,Yz:()=>a,lj:()=>f,mp:()=>r,qF:()=>h,si:()=>g,ub:()=>v});o(670560),o(267602),o(653476),o(749411),o(241792),o(228244);var n=()=>o(696459);class i{constructor(e){this.children=e}map(e){const t=this.children.map((t=>t.map(e)));return new i(t)}toString(){return`DetachedTreeRoots([${this.children}])`}}class r{constructor(e,t){this.value=e,this.children=t}map(e){return s(this,(t=>({value:e(t.value),children:t.children})))}toString(){return`Tree(${this.value}, [${this.children}])`}}function a(e,t){return t(e.value)||e.children.some((e=>a(e,t)))}function s(e,t){const o=t(e);if(!o)return;const{value:i,children:a}=o,l=a?a.map((e=>s(e,t))).filter(n().$K):[];return new r(i,l)}function l(e){const{values:t,isAncestor:o,compareOrder:n}=e;if(0===t.length)return;const a=(e,t)=>{for(const n of e)if(o(n.value,t))return void a(n.children,t);e.push(new r(t,[]))},s=t.slice().sort(n),l=[];for(const i of s)a(l,i);return new i(l)}function c(e,t){for(const o of e){if(t(o))return[o];{const e=c(o.children,t);if(e)return[o,...e]}}}function d(e,t){if(t&&t.length>0){const o=t[t.length-1],n=t[t.length-2]||e,i=n.children.findIndex((e=>e===o));if(i>0)return{prev:n.children[i-1]};if(n!==e)return{parent:n}}return{}}function u(e,t){if(t&&t.length>0){const o=t[t.length-1],n=t[t.length-2]||e,i=n.children.findIndex((e=>e===o));return i<n.children.length-1?{next:n.children[i+1]}:u(e,t.slice(0,t.length-1))}return{}}function p(e,t){if(t&&t.length>0){const o=t[t.length-1],n=t[t.length-2]||e,i=n.children.findIndex((e=>e===o));if(i>0){return{prev:m(n.children[i-1])}}if(n!==e)return{parent:n}}return{}}function m(e){for(;e.children.length>0;)e=e.children[e.children.length-1];return e}function f(e,t){if(t&&t.length>0){const o=t[t.length-1];if(o.children.length>0){return{next:o.children[0]}}const{next:n}=u(e,t);return{next:n}}return{}}function g(e){if(e&&e.length>0){const t=e[e.length-1];if(t.children.length>0)return t.children[0]}}function v(e){if(e&&e.length>1)return e[e.length-2]}function h(e,t){if(0===e.length||0===t.length)return-1;for(let o=Math.min(e.length,t.length)-1;o>-1;o--){if(e[o]===t[o])return o}return-1}},716676:(e,t,o)=>{o.d(t,{F:()=>r,o:()=>a});o(821057),o(670560);var n=()=>o(696459),i=()=>o(739021);const r={applyMutable:function(e,t){const i=(0,o(426546).DY)(e.children,(e=>e===t.target));if(void 0===i)return!1;if(0===i.length)throw new Error("findPathInTree: empty path");const r=1===i.length?e.children:i[i.length-2].children,a=r.indexOf(t.target);if(-1===a)throw new Error("findPathInTree: cannot find node");switch(t.operation){case"indentSelf":return function(e,t){if(0===t)return!1;const o=e[t],n=e[t-1];return e.splice(t,1),n.children.push(o,...o.children),o.children=[],!0}(r,a);case"indentSelfAndSubtree":return function(e,t){if(0===t)return!1;const o=e[t],n=e[t-1];return e.splice(t,1),n.children.push(o),!0}(r,a);case"unindentSelf":{if(1===i.length)return!1;const t=2===i.length?e.children:i[i.length-3].children,o=i[i.length-2],n=t.indexOf(o);if(-1===n)throw new Error("findPathInTree: cannot find node");return function(e,t,o){const n=e[t],i=n.children[o];return n.children.splice(o,1),e.splice(t+1,0,i),!0}(t,n,a)}case"unindentSelfAndUpdateSiblings":{if(1===i.length)return!1;const t=2===i.length?e.children:i[i.length-3].children,o=i[i.length-2],n=t.indexOf(o);if(-1===n)throw new Error("findPathInTree: cannot find node");return function(e,t,o){const n=e[t],i=n.children[o],r=n.children.splice(o+1,n.children.length-o-1);return i.children.push(...r),n.children.splice(o,1),e.splice(t+1,0,i),!0}(t,n,a)}default:(0,n().t1)(t.operation)}}};const a={getIndentOperationsFromTreeRange:(e,t)=>"indent"===t?function(e){const t=[];for(const o of(0,i().bu)(e))t.push({operation:"indentSelf",target:o});return t}(e):"indentSelfAndSubtree"===t?function(e){const t=[];for(const o of(0,i().bu)(e))t.push({operation:"indentSelfAndSubtree",target:o});return t}(e):"unindent"===t?function(e){const t=[];for(const o of(0,i().bu)(e))t.push({operation:"unindentSelfAndUpdateSiblings",target:o});return t.reverse()}(e):"unindentSelf"===t?function(e){const t=[];for(const o of(0,i().bu)(e))t.push({operation:"unindentSelf",target:o});return t.reverse()}(e):void(0,n().t1)(t)}},739021:(e,t,o)=>{o.d(t,{JK:()=>i,bu:()=>a,tL:()=>r});o(821057);var n=()=>o(696459);function*i(e){yield e;for(const t of e.children)yield*i(t)}function*r(e){for(let t=e.startPath.length-1;t>=0;t--){const o=e.getStartBoundary(t);if(!o)throw new Error("Start boundary must be defined");t===e.startPath.length-1?yield o.parent:yield*o.childrenInsideRange}}function*a(e){for(const{position:t,tree:o}of function*(e){for(let t=e.startPath.length-1;t>=0;t--){const o=e.getStartBoundary(t);if(o&&(t===e.startPath.length-1&&(yield{position:"start",tree:o.parent}),t>0))for(const e of o.childrenInsideRange)yield{position:"within",tree:e}}for(let t=0;t<e.endPath.length;t++){const o=e.getEndBoundary(t);if(o)for(const t of o.childrenInsideRange)e.isInEndPath(t)?yield{position:"endPath",tree:t}:yield{position:"within",tree:t}}}(e))switch(t){case"start":case"endPath":yield o;break;case"within":yield*i(o);break;default:(0,n().t1)(t)}}},843200:(e,t,o)=>{o.d(t,{Z:()=>i,f:()=>r});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476);var n=()=>o(696459);function i(e){return[{operation:"delete",deleteFromParent:e.moveFromParent,deletingChildren:e.movingChildren,debug:e.debug},{operation:"insert",insertIntoParent:e.moveToParent,insertChildren:e.movingChildren,adjacentSibling:e.moveToAdjacentSibling,direction:e.moveToDirection,debug:e.debug}]}const r={applyMutable:function(e){switch(e.operation){case"delete":return a(e);case"insert":return s(e);case"move":const[t,o]=i(e),r=a(t),l=s(o);return r||l;default:(0,n().t1)(e)}}};function a(e){const{deleteFromParent:t,deletingChildren:o}=e;if(0===o.length)return!1;const n=new Set(o),i=t.children.filter((e=>!n.has(e)));return i.length!==t.children.length&&(t.children=i,!0)}function s(e){const{direction:t,insertChildren:o,insertIntoParent:i,adjacentSibling:r}=e;if(0===o.length)return!1;const a=r?i.children.indexOf(r):-1,s=(()=>{switch(t){case"listBefore":return Math.max(0,a);case"listAfter":return-1===a?i.children.length:a+1;default:(0,n().t1)(t)}})();return i.children.splice(s,0,...o),!0}},163836:(e,t,o)=>{o.d(t,{T:()=>n});o(821057),o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(470928);class n{constructor(e,t,o){if(this.maxDepth=void 0,this.start=void 0,this.end=void 0,this.startPathSet=void 0,this.endPathSet=void 0,this.isInStartPath=e=>this.startPathSet.has(e),this.isInEndPath=e=>this.endPathSet.has(e),this.commonAncestor=e,this.startPath=t,this.endPath=o,0===this.startPath.length||0===this.endPath.length)throw new Error(`Cannot create TreeRange with empty path: ${this.startPath} ${this.endPath}`);this.start=this.startPath[this.startPath.length-1],this.end=this.endPath[this.endPath.length-1],this.startPathSet=new Set(t),this.endPathSet=new Set(o),this.maxDepth=Math.max(this.startPath.length,this.endPath.length)}static fromNearestCommonAncestor(e,t){const n=(0,o(426546).qF)(e,t);if(!(n<0))return new this(e[n],e.slice(n),t.slice(n))}getStartBoundary(e){if(e>=this.startPath.length||e<0)return;const t=this.startPath[e];if(0===e&&this.startPath.length<=1&&this.endPath.length<=1)return{parentType:"commonAncestor",parent:t,childrenBeforeRange:[],childrenInsideRange:[],childrenAfterRange:t.children.slice()};const o=t.children.findIndex(this.isInStartPath)+1,n=t.children.findIndex(this.isInEndPath),i=t.children.slice(0,o),r=t.children.slice(o,-1===n?void 0:n+1),a=-1===n?[]:t.children.slice(n+1);return 0===e?{parentType:"commonAncestor",parent:t,childrenBeforeRange:i,childrenInsideRange:r,childrenAfterRange:a}:{parentType:"startPath",parent:t,childrenBeforeRange:i,childrenInsideRange:r}}getEndBoundary(e){if(e>=this.endPath.length||e<0)return;if(0===e)return this.getStartBoundary(0);const t=this.endPath[e],o=t.children.findIndex(this.isInStartPath)+1,n=t.children.findIndex(this.isInEndPath)+1,i=t.children.slice(o,n),r=t.children.slice(n);return{parentType:"endPath",parent:t,childrenInsideRange:i,childrenAfterRange:r}}getAnalagousNodesAtOffset(e){const t=this.startPath.length-1-e,o=this.endPath.length-1-e;return{start:this.getStartBoundary(t),end:this.getEndBoundary(o)}}*iterateAnalogousNodes(){for(let e=0;e<this.maxDepth;e++)yield this.getAnalagousNodesAtOffset(e)}getDeletionAtOffset(e){const{start:t,end:o}=this.getAnalagousNodesAtOffset(e),n=[];t&&t.childrenInsideRange.length>0&&n.push({operation:"delete",deleteFromParent:t.parent,deletingChildren:t.childrenInsideRange});const i=(null==t?void 0:t.parent)||this.commonAncestor;if(i&&o&&o.parent!==this.commonAncestor&&o.parent!==i&&o.childrenAfterRange.length>0){const e=i.children.find(this.isInStartPath);n.push({operation:"move",moveFromParent:o.parent,movingChildren:o.childrenAfterRange,moveToParent:i,moveToAdjacentSibling:e,moveToDirection:e?"listAfter":"listBefore"})}return n}*iterateDeletion(){for(let e=0;e<this.maxDepth;e++)yield*this.getDeletionAtOffset(e)}getInsertionAtOffset(e,t,o){const n=Math.max(0,e.length-1-t),i=e[n],r=e[n+1],{start:a,end:s}=this.getAnalagousNodesAtOffset(t),l=[];if(a&&a.childrenInsideRange.length>0){const e=o.get(i)||r;l.push({operation:"move",moveFromParent:a.parent,movingChildren:a.childrenInsideRange,moveToParent:i,moveToAdjacentSibling:e,moveToDirection:e?"listAfter":"listBefore"});const t=a.childrenInsideRange[a.childrenInsideRange.length-1];o.set(i,t)}const c=this.startPath.length-1-t,d=Math.min(c,this.endPath.length-1),u=this.getEndBoundary(d);if(u&&u.parent!==this.commonAncestor&&i!==e[0]){const e=i.children.indexOf(r)+1,t=i.children.slice(e);if(t.length){const e=0===u.childrenInsideRange.length&&u.childrenAfterRange.length>0,o=e?u.childrenAfterRange[0]:u.childrenInsideRange[u.childrenInsideRange.length-1];l.push({operation:"move",moveFromParent:i,movingChildren:t,moveToParent:u.parent,moveToAdjacentSibling:o,moveToDirection:e?"listBefore":"listAfter"})}}return s&&s.parent!==this.commonAncestor&&s.childrenAfterRange.length>0&&l.push({operation:"delete",deleteFromParent:s.parent,deletingChildren:s.childrenAfterRange}),l}*iterateInsertionAt(e){const t=new Map,o=[];for(let n=0;n<this.maxDepth;n++)o.push(...this.getInsertionAtOffset(e,n,t));yield*o}}},96642:(e,t,o)=>{o.d(t,{I:()=>n,o:()=>i});const n="guest";class i{constructor(e){this.data=void 0,this.data=e??{}}get size(){return Object.keys(this.data).length}getUserRecordMap(e){const t=e??n;let i=this.data[t];return i||(i=o(217465).RecordMapWithRole.create(),this.data[t]=i),i}getValue(e){return this.getUserRecordMap(e.userId).getValue(e.pointer)}getRole(e){return this.getUserRecordMap(e.userId).getRole(e.pointer)}getModelWithBackfilledSpaceId(e){return this.getUserRecordMap(e.userId).getModelWithBackfilledSpaceId(e.pointer)}setValueAndRole(e,t,o){return this.getUserRecordMap(e.userId).setValueAndRole(e.pointer,t,o),this}setModelAndRole(e,t,o){return this.getUserRecordMap(e.userId).setModelAndRole(e.pointer,t,o),this}delete(e){this.getUserRecordMap(e.userId).delete(e.pointer)}*[Symbol.iterator](){for(const[e,t]of(0,o(696459).qP)(this.data))for(const{pointer:o,model:i,role:r}of t)void 0!==i&&(yield{pointer:o,model:i,role:r,userId:e===n?void 0:e})}}},875120:(e,t,o)=>{o.d(t,{A:()=>r});const n=/^\d{5}(-\d{4})?$/,i=/^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJKLMNPRSTVWXYZ] ?\d[ABCEGHJKLMNPRSTVWXYZ]\d$/i;function r(e){if(!e||!e.country)return!1;switch(e.country){case"US":return n.test(e.zipCode);case"CA":return i.test(e.zipCode);default:return!0}}},698422:(e,t,o)=>{o.d(t,{HR:()=>S,Q3:()=>y,SY:()=>_,iI:()=>b,j:()=>g,k3:()=>w,rQ:()=>f,xx:()=>h});o(670560),o(267602),o(30005),o(241792);var n=()=>o(792409),i=()=>o(696459),r=()=>o(916673),a=()=>o(289525),s=()=>o(799891),l=()=>o(245015),c=()=>o(767751);let d,u,p=[],m="/";async function f(e){const{device:t,config:o,cookieService:n}=e;u=!["staging","production"].includes(o.env),await a().vO({trackingType:"targeting",cookieService:n})&&(t.isNative||t.doNotTrackEnabled||(m=function(e){if(e.isLocalhost)return"http://localhost:3000";return"https://aif.notion.so"}(o),function(e){if(!m)return;const t=document.createElement("iframe");t.setAttribute("sandbox","allow-scripts allow-same-origin"),t.setAttribute("style","position: absolute; opacity: 0; width: 1px; height: 1px; top: 0; left: 0; border: none; display: block; z-index: -1;"),t.setAttribute("aria-hidden","true"),t.setAttribute("tabindex","-1"),t.setAttribute("referrerpolicy","no-referrer"),t.setAttribute("src",e.aif.url),document.body.appendChild(t),t.addEventListener("load",(()=>{d=t;for(const e of p)v(t,e);p=[]}))}(o)))}async function g(e){const{device:t,event:o,cookieService:i,source:r}=e;if((!i||await a().vO({trackingType:"targeting",cookieService:i}))&&!(u&&o.google||t&&(t.isNative||t.doNotTrackEnabled)))try{!function(e){const{event:t}=e,o=e.source??"client";if("front"===o){if(t.google&&"custom"===t.google.eventName){(window.dataLayer=window.dataLayer||[]).push({event:t.google.data.event,data:t.google.data.data})}}else d?d.contentWindow&&d.contentWindow.postMessage(t,m):p.push(t)}({event:o,source:r})}catch(l){s().log({level:"error",from:"adAnalyticsHelpers",type:"analyticsTrack",error:(0,n().Ui)(l)})}}function v(e,t){(function(e){var t,o;return"CompleteRegistration"===(null===(t=e.facebook)||void 0===t?void 0:t.eventName)||"registration"===(null===(o=e.google)||void 0===o?void 0:o.eventName)})(t)&&s().log({level:"info",from:"adAnalyticsHelpers",type:"analyticsTrackSignupIFramePostCall"}),e.contentWindow&&e.contentWindow.postMessage(t,m)}function h(e){if("facebook"===e.type){const t=`fb.1.${Date.now()}.${e.id}`;c().Z.set("adClick",{type:"facebook",id:t})}else"google"===e.type?c().Z.set("adClick",{type:"google",id:e.id}):(0,i().t1)(e)}function _(){return c().Z.get("adClick")}function b(){c().Z.remove("adClick")}function y(){return c().Z.get("fbp")}function S(){l().Z.remove("fbp")}async function w(e){var t;const{device:o,email:n,cookieService:i}=e,a=(0,r().DP)(null===(t=document.location)||void 0===t?void 0:t.href),s=null==a?void 0:a.get("cid"),l=null==a?void 0:a.get("metadata_cid");var c;if(l)return g({device:o,event:{metadataio:{eventName:"sign_up",data:{email:n,cid:s,mcid:l,url:null===(c=document.location)||void 0===c?void 0:c.href}}},cookieService:i})}},575741:(e,t,o)=>{o.d(t,{e:()=>i});var n=()=>o(696459);function i(e,t){const{notificationId:o,activityId:i,sessionId:r,from:a,alreadyRead:s}=t,l=function(e){const{alreadyRead:t,from:o}=e;switch(o){case"mark_as_unread":return t?"unread":"no_change";case"read_on_page":case"email":case"mark_as_read":case"add_reaction":case"remove_reaction":case"title":case"body":case"frame":case"archive":case"unarchive":case"open_reply_menu":case"mark_all_as_read":case"open_automation_view_all_notifications_menu":case"open_automation_view_error_raised_notification":case"main":case"approve_request_access":case"deny_request_access":return t?"no_change":"read";default:return(0,n().t1)(o)}}({alreadyRead:s,from:a});if("no_change"===l)return;const c={notificationId:o,activityId:i,sessionId:r,from:a,target:l};e.DO_NOT_USE_commonTrackEvent({eventName:"mark_notification_as_read",properties:c})}},599292:(e,t,o)=>{function n(e){var t;return null==e||null===(t=e.split(".notion."))||void 0===t?void 0:t[1]}o.d(t,{Q:()=>n})},279865:(e,t,o)=>{o.d(t,{B7:()=>i,Pu:()=>n});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624);const n="render_duration",i=(new Set(["destinations","emergencyThrottlePercentage","amplitudeOptions","datadogOptions","snowflakeOptions","statsigOptions","customerIoOptions"]),o(124199).literals("connected_apps_settings","compliance_connected_apps_settings","external_object_instance_block","external_object_instance_inline_popup","external_object_instance_block_error_dropdown","placeholder_root_external_collection_view_block","connected_relation_property_menu","source_picker_connect_another_account","integration_gallery","collection_settings_property_type","integration_file_picker","send_to_notion","unfurl","messages_tab","install_redirect","all_updates","notifications_and_settings","collection_view_settings","share_menu","space_settings","workspace_connections_redirect","import_settings"),["reply_menu_mentions_comments","reply_menu_archive","reply_menu_all_updates","updates_menu_mentions_comments","updates_menu_archive","updates_menu_all_updates"]),r=["platform","deviceType","device_os","is_mobile_beta","desktopArch"],a=["app_version","mobile_app_version","desktop_app_version","desktopOsVersion","desktopElectronVersion","mobileNativeSystemVersion","mobileNativeAppVersion","is_experimental_build"]},403721:(e,t,o)=>{o.d(t,{GF:()=>c,tj:()=>d,u3:()=>l});o(398858),o(461318),o(33228);var n=()=>o(342792),i=()=>o(916673),r=()=>o(506347),a=()=>o(643432),s=()=>o(836273);function l(e){const t=s()._j.chat,o={};return e.configureOpenInDesktopApp&&(o.configureOpenInDesktopApp="true"),e.pageVisitSource&&(o[r().$X]=String(e.pageVisitSource)),e.peekMode&&(o.pm=e.peekMode),e.peekViewBlockId&&(o[a().UJ]=(0,n().cj)(e.peekViewBlockId)),"assistantQueryPrefill"in e&&e.assistantQueryPrefill&&(o.aq=e.assistantQueryPrefill),(0,i().bf)({url:t,query:o})}function c(e){const{currentUrl:t,assistantQueryPrefill:o,assistantTargetRedirect:n}=e,i=new URL(t);return void 0!==o&&i.searchParams.set("aq",o),void 0!==n&&i.searchParams.set("target",n),i.toString()}function d(e){const{pageId:t,scrollToBlockId:o,pageVisitSource:s,isMobile:l,peekModeParam:c}=e,d={};return s&&(d[r().$X]=String(s)),l?(0,i().bf)({url:`/${(0,n().cj)(t)}`,hash:o&&(0,n().cj)(o)}):(c&&(d.pm=c),d[a().UJ]=(0,n().cj)(t),(0,i().bf)({url:"/chat",query:d,hash:o&&(0,n().cj)(o)}))}},499411:(e,t,o)=>{o.d(t,{Ld:()=>d,Oy:()=>l,PX:()=>a,UI:()=>c,e$:()=>u,oi:()=>s});var n=()=>o(957042),i=()=>o(124199),r=()=>o(956057);function a(){return r().Ar()}const s=(0,n().Z$)((e=>i().uuid().validator(e)),i().uuid().toString);function l(){return r().Ar()}const c=(0,n().Z$)((e=>i().uuid().validator(e)),i().uuid().toString);function d(e){return e}function u(e){return r().Ar()}},903057:(e,t,o)=>{o.d(t,{Q:()=>n});const n={type:"everything"}},505226:(e,t,o)=>{o.d(t,{m:()=>i});o(267602),o(470928);var n=()=>o(801916);n().KM;class i{constructor(e){this.getSearchBackend=void 0,this.getEligibleGroup=void 0,this.isAiEnabledFn=void 0,this.isZeroRetentionEnabledFn=void 0,this.getCanSearchWorkspaceWithCollectionIdFilter=void 0,this.checkGate=void 0,this.getSubscriptionTier=void 0,this.getIsAssistantSpaceSettingEnabled=void 0,this.isInitialized=void 0,this.getEligibleGroup=e.getEligibleGroup,this.isAiEnabledFn=e.isAiEnabled,this.isZeroRetentionEnabledFn=e.isZeroRetentionEnabled,this.getCanSearchWorkspaceWithCollectionIdFilter=e.getCanSearchWorkspaceWithCollectionIdFilter,this.getSearchBackend=e.getSearchBackend,this.checkGate=e.checkGate,this.getSubscriptionTier=e.getSubscriptionTier,this.getIsAssistantSpaceSettingEnabled=e.getIsAssistantSpaceSettingEnabled,this.isInitialized=e.isInitialized}isAiEnabled(){return this.isAiEnabledFn()}isZeroRetentionEnabled(){return this.isZeroRetentionEnabledFn()}isXMLAssistantEnabled(){return this.modeIsNotControl()}isPdfImageConversionEnabledForUser(){return this.checkGate("assistant_chat_with_pdf_use_images")}getNamespace(){return"prompt_only_server"}showRemindersToUseQnA(){return this.modeIsNotControl()}isAssistantSummarizeThisPageEnabledForUser(){return"on"===this.getEligibleGroup("assistant_show_summarize_this_page_reminder")&&this.modeIsNotControl()}isWebSearchEnabledForUser(){return this.checkGate("ai_assistant_universal_qna_web_search")&&!this.isDeepFindEnabled()}isLoadingWebUrlsEnabledForUser(){return this.checkGate("load-web-page-rollout")}isWorkspaceLeapEligible(){return this.modeIsNotControl()&&Boolean(this.getSubscriptionTier())&&"enterprise"!==this.getSubscriptionTier()&&!this.isZeroRetentionEnabled()}isSlackQnaNotificationEnabled(){return this.checkGate("slack_qna_notification_tooltip_enabled")}isAiAutomationButtonEnabledForUser(){return this.modeIsAtMost("assistant_0.3")&&this.checkGate("ai_button_automation_enabled")}canUseUniversalSearchScopes(){const e=this.getSubscriptionTier();return this.checkGate("is_third_party_qna_enabled")&&(0,o(122792).mq)(e)&&this.isAiEnabled()}isGoogleDriveQnaEnabled(){return this.checkGate("google_drive_qna_ingestion")}isJiraQnaEnabled(){return this.checkGate("jira_qna_ingestion")}isGithubQnaEnabled(){return this.checkGate("github_qna")}isMicrosoftTeamsQnaEnabled(){return this.checkGate("microsoft_teams_qna")}canUseUniversalJiraSearchScope(){return this.isJiraQnaEnabled()&&this.canUseUniversalSearchScopes()}canUseUniversalGoogleDriveSearchScope(){return this.isGoogleDriveQnaEnabled()&&this.canUseUniversalSearchScopes()}canUseUniversalGithubSearchScope(){return this.isGithubQnaEnabled()&&this.canUseUniversalSearchScopes()}canUseMicrosoftTeamsSearchScope(){return this.isMicrosoftTeamsQnaEnabled()&&this.canUseUniversalSearchScopes()}isRouterV2SearchEnabledForLEAP(){return this.checkGate("ai_assistant_router_v2_search_leap")}isRouterV2SearchEnabled(){return this.checkGate("ai_assistant_router_v2_search")}isRouterV2ActionEnabledForLEAP(){return this.checkGate("ai_assistant_router_v2_action_leap")}isRouterV2ActionEnabled(){return this.checkGate("ai_assistant_router_v2_action")}isDatabaseQueryingEnabled(){return this.modeIsAtMost("assistant_0.3")}isDatabaseScopedSearchEnabled(){return this.modeIsAtMost("assistant_0.3")&&this.checkGate("ai_assistant_router_v2_search_in_database")}isMoveToCornerEnabled(){return this.modeIsAtMost("exploratory")}canUseCollectionIdForDBScopedSearch(){return this.getCanSearchWorkspaceWithCollectionIdFilter()}canReceiveAssistantLaunchGrant(){return this.modeIsAtMost("development")}isFullPageTranslateEnabled(){return this.modeIsNotControl()&&!this.isZeroRetentionEnabled()&&this.checkGate("full_page_translate")}canUseAssistantDebugTools(){return this.checkGate("run_assistant_allow_dev_only_args")}areAiActionsOnPasteEnabled(){return this.modeIsNotControl()&&"on"===this.getEligibleGroup("ai_actions_on_paste_experiment")}isReplaceSelectionEnabled(){return this.checkGate("assistant_replace_selection")}isDeepFindEnabled(){return(0,n().TL)({mode:"deep_dive",currentMode:this.getUnifiedFindMode()})&&"quick_find"!==this.getUnifiedFindMode()}isQuickFindEnabled(){return(0,n().TL)({mode:"end_to_end",currentMode:this.getUnifiedFindMode()})||"quick_find"===this.getUnifiedFindMode()}isUnifiedFindDebugToolsEnabled(){return this.checkGate("unified_find_debug_tools")&&(0,n().TL)({mode:"deep_dive",currentMode:this.getUnifiedFindMode()})}isAmbientFullPageTranslateSuggestionEnabled(){return this.isFullPageTranslateEnabled()&&this.checkGate("ambient_full_page_translate_suggestion")}isConflictContentEnabled(){return this.checkGate("compute_related_content")&&this.modeIsAtMost("assistant_0.3")}disableWriterAutoFollow(){return this.modeIsNotControl()&&this.checkGate("ai_disable_writer_auto_follow")}canUseHigherContextLength(){return this.modeIsNotControl()}getMode(){if(!this.isAiEnabledFn())return"control";const e=this.getEligibleGroup("assistant_variant");return e&&n().KM.find((t=>t===e))?e:this.getIsAssistantSpaceSettingEnabled()?"assistant_0.3":n().AL}getUnifiedFindMode(){if("control"===this.getMode())return"control";const e=this.getEligibleGroup("unified_find_variant");return e&&n().pz.find((t=>t===e))?e:"control"}isDeepFindQueryGenEnabled(){return this.checkGate("deep_find_enable_query_gen")}isDeepFindUniversalBlendingEnabled(){return this.checkGate("deep_find_enable_universal_blending")}areDeepFindThirdPartySourcesEnabled(){return this.checkGate("deep_find_enable_3p_sources")}isMode(e){return this.getMode()===e}modeIsAtMost(e){return(0,n().i1)({mode:e,currentMode:this.getMode()})}modeIsNotControl(){return"control"!==this.getMode()}getIsInitialized(){return this.isInitialized}}},782827:(e,t,o)=>{o.d(t,{C:()=>i});var n=()=>o(750239);function i(e){const{formulasModule:t,formulaValueTypes:o,...i}=e,r=e.automationModel.getSpaceId();return{...i,getFormulaContextValueDependencies:e=>(0,n().rX)({...e,formulasModule:t,formulaValueTypes:o}),getFormulaContentsDependencies:e=>(0,n().Jf)({formulasModule:t,typecheckContextValues:o,permission:{minimumRole:e.minimumRole,value:e.value},spaceId:r})}}},360517:(e,t,o)=>{o.d(t,{Do:()=>d,EP:()=>b,Fd:()=>s,H2:()=>I,Hb:()=>u,L:()=>v,MO:()=>i,Nz:()=>y,O3:()=>c,Ox:()=>m,Pn:()=>p,Qq:()=>h,_w:()=>k,_z:()=>S,fH:()=>a,gr:()=>w,iR:()=>f,mK:()=>l,mz:()=>_,sF:()=>r,x6:()=>g});o(821057);var n=()=>o(855741);class i extends Error{}class r extends Error{constructor(){super("Recurrence trigger missing schedule!")}}class a extends Error{constructor(e,t){super(t),this.automationId=void 0,this.type=e}}function s(e,t){return async o=>{const i=await e(o);return n().x.isFail(i)&&(i.error.automationId=t(o)),i}}class l extends a{constructor(e){super("invalid_record_pointer","Invalid record pointer"),this.data=e}}class c extends a{constructor(e){super("record_pointer_in_trash","Record pointer is in trash"),this.data=e}}class d extends a{constructor(e){super("invalid_record","Invalid record"),this.data=e}}class u extends a{constructor(e){super("invalid_variable_type","Invalid variable type"),this.data=e}}class p extends a{constructor(e){super(e.type,e.message),this.data=e}}class m extends a{constructor(e){super("invalid_property_schema","Invalid property schema"),this.data=e}}class f extends a{constructor(e){super("unsupported_context","Unsupported context"),this.data=e}}class g extends a{constructor(e){super("formula_execution_failed","Formula execution failed"),this.data=e}}class v extends a{constructor(e){super("missing_context_value","Missing context value"),this.data=e}}class h extends a{constructor(e){super("missing_action_config","Missing automation action config"),this.data=e}}class _ extends a{constructor(e){super("notification_unresolvable_target_error","One or more of the send-in-app-notification targets could not be resolved to a user ID."),this.data=e}}class b extends a{constructor(e){super("misc",e.message),this.data=e}}class y extends a{constructor(e){super("execute_server_side_effect_error",e.message),this.data=e}}class S extends a{constructor(e){super("mismatch_trigger_context",e.message),this.data=e}}class w extends a{constructor(e){super("timeout","Automation execution timed out"),this.data=e}}Error;class k extends a{constructor(e){super("missing_current_sprint","No current sprint, unable to execute automation"),this.data=e}}class I extends a{constructor(e){super("unsupported_sprint_schema","Unsupported sprint schema, the collection may be using sprints V1"),this.data=e}}},750239:(e,t,o)=>{o.d(t,{Jf:()=>u,rX:()=>f,xg:()=>g});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624);var n=()=>o(226413),i=()=>o(216939),r=()=>o(870910),a=()=>o(92960),s=()=>o(216316),l=()=>o(407589),c=()=>o(610856),d=()=>o(528514);function u(e){return p({...e,depth:0,visitedPointers:new Set})}function*p(e){const{depth:t,formulasModule:o,permission:i,spaceId:r,typecheckContextValues:l,visitedPointers:d}=e,u=[];if(t>a().FORMULA_MAX_DEPTH)return u;const p=(0,c().fK)({formulas:o,formulaTypecheckContextValues:l,spaceId:r,value:i.value});for(const a of p){const e=(0,s().M)(a);if(!d.has(e))if((0,n().rv)(a)){const e=yield*m({depth:t,formulasModule:o,minimumRole:i.minimumRole,pointer:a,spaceId:r,typecheckContextValues:l,visitedPointers:d});u.push(...e)}else d.add(e),u.push({minimumRole:i.minimumRole,pointer:{id:a.id,spaceId:a.spaceId,table:a.table},type:"record_permission"})}return u}function*m(e){const{depth:t,formulasModule:o,minimumRole:i,pointer:c,spaceId:d,typecheckContextValues:u,visitedPointers:f}=e,g=[],v=(0,s().M)(c);if(f.has(v))return g;f.add(v),g.push({minimumRole:i,pointer:{id:c.id,spaceId:c.spaceId,table:c.table},type:"record_permission"});const h=yield*r().R.fetchRecord(c);if(!h)return g;const _=h.getNormalizedSchema(),b=_[c.propertyId];if(!b)return g;if((0,n().p_)(b)){const e=(0,n().j0)(b);e&&g.push({minimumRole:i,pointer:e,type:"record_permission"})}else if((0,n().no)(b)){if(!b.relation_property||!b.target_property)return g;const e=_[b.relation_property];if(!e||"relation"!==e.type)return g;const a=(0,n().j0)(e);if(!a)return g;const s=yield*r().R.fetchRecord(a);g.push({minimumRole:i,pointer:a,type:"record_permission"});const l=(null==s?void 0:s.getNormalizedSchema())??{};if(b.target_property_type){const e=l[b.target_property];if(e&&b.target_property_type===e.type){const n="formula"===e.type?t+1:t,r=yield*m({depth:n,formulasModule:o,minimumRole:i,pointer:{...a,propertyId:b.target_property},spaceId:d,typecheckContextValues:u,visitedPointers:f});g.push(...r)}}}else if((0,n().AF)(b))if("v2"===b.version){var y;if(null!==(y=b.formula2)&&void 0!==y&&y.code){const e=yield*p({depth:t+1,formulasModule:o,permission:{minimumRole:i,value:{type:"formula",value:b.formula2.code}},spaceId:d,typecheckContextValues:[{kind:a().FormulaContextValueKind.ThisRow,type:{collection:c,type:"block"}}],visitedPointers:f});g.push(...e)}}else{const e=(0,l().b$)(b.formula);for(const n of e){const e=_[n];if(!e)continue;const r="formula"===e.type?t+1:t,a=yield*m({depth:r,formulasModule:o,minimumRole:i,pointer:{...c,propertyId:n},spaceId:d,typecheckContextValues:u,visitedPointers:f});g.push(...a)}}return g}function f(e){const{formulaValueTypes:t,minimumRole:o,targetId:n,formulasModule:i}=e,r=i.findFormulaTypecheckContextValue(t,n);if(r){const e=r.type;if("array"===e.type&&"block"===e.of.type&&e.of.collection)return[{type:"record_permission",pointer:e.of.collection,minimumRole:o??"reader"}];if("block"===e.type&&e.collection)return[{type:"record_permission",pointer:e.collection,minimumRole:o??"reader"}]}return[]}function g(e){const t=new Map;for(const o of e){const e=(0,i().Pq)(o.pointer),n=t.get(e);n&&!(0,d().IF)(o.minimumRole,n.minimumRole)||t.set(e,o)}return[...t.values()]}},473304:(e,t,o)=>{o.d(t,{AK:()=>v,E2:()=>c,FP:()=>s,JL:()=>r,PQ:()=>f,Pv:()=>i,Xp:()=>g,lK:()=>l,o9:()=>u,ss:()=>m,wy:()=>h,xZ:()=>p,z8:()=>d});o(267602),o(653476),o(241792);var n=()=>o(513670);const i="COMPLETE_SPRINT_NEXT_SPRINT_DATE_RANGE",r="COMPLETE_SPRINT_ACTION_TYPE",a={duplicate_blocks:{display:!0},create_page:{display:!0},modal_confirmation:{display:!0},open_page:{display:!0},query_collection:{display:!0},slack_notification:{display:!0},update_pages:{display:!0},send_in_app_notification:{display:!0},send_gmail_notification:{display:!0},assistant_basic:{display:!0},define_variables:{display:!0},http_request:{display:!0},publish_site:{display:!0},complete_sprint:{display:!1}};function s(e){return Object.entries(a).filter((t=>{let[o,n]=t;return n[e]})).map((e=>{let[t]=e;return t}))}function l(e,t){return a[e][t]}const c=["replace","append","remove","toggle"],d="replace";function u(e){return(null==e?void 0:e.action)||d}const p=100,m=50;function f(e){const{isGenericRecurrenceAllowed:t}=e;return{recurrence:t?{min:1,max:"default_bound"}:{min:1,max:1},notification_event:{min:1,max:1},button:{min:0,max:"default_bound"},event:{min:1,max:"default_bound"}}}function g(e){return l(e.type,"display")}function v(e){return"recurrence"===e.automation.getTriggerType()&&e.checkExperimentGate("automation_generalized_recurrence")}function h(e){return(0,n().Sm)(Object.values(e.actionValidationFailures).map((e=>(null==e?void 0:e.length)??0)))>0}},764052:(e,t,o)=>{o.d(t,{R:()=>y,e:()=>h});o(670560),o(267602),o(653476),o(228244);var n=o.n(o(369282)),i=()=>o(513670),r=()=>o(696459),a=()=>o(849743),s=()=>o(216316),l=()=>o(530980),c=()=>o(827370),d=()=>o(422894),u=()=>o(396136),p=()=>o(752778);function m(e,t){n()(e.table===t,`Expected space shard record pointer of table ${t} but got ${e.table}`),n()((0,r().$K)(e.spaceId),"Expected space shard record pointer but missing spaceId")}const f={assistant_basic:e=>({config:e.config,remappedRecordPointers:new(d().X)}),complete_sprint:e=>{const{config:t,preventClearingConfig:o,visitors:n}=e,a=new(d().X);if(!t)return{config:void 0,remappedRecordPointers:a};const s=(0,i().Xh)(t);if(t.sprint_collection){const e=n.visitRecordPointer(t.sprint_collection);if("replace"===e.type){if(e.value)m(e.value,p().vF),a.add(e.value),s.sprint_collection=e.value;else if(!(0,r().$K)(e.value)&&!o)return{config:void 0,remappedRecordPointers:a}}else"keep"===e.type||(0,r().t1)(e)}if(t.task_collection){const e=n.visitRecordPointer(t.task_collection);if("replace"===e.type){if(e.value)m(e.value,p().vF),a.add(e.value),s.task_collection=e.value;else if(!(0,r().$K)(e.value)&&!o)return{config:void 0,remappedRecordPointers:a}}else"keep"===e.type||(0,r().t1)(e)}return{config:s,remappedRecordPointers:a}},create_page:e=>{const{config:t,preventClearingConfig:o,visitors:n}=e;let a=new(d().X);if(!t)return{config:void 0,remappedRecordPointers:a};const l=(0,i().Xh)(t),f=l.collection;if(l.collection){const e=n.visitRecordPointer(l.collection);"replace"===e.type?e.value?(m(e.value,p().vF),a.add(e.value),l.collection=e.value):(0,r().$K)(e.value)||(l.collection=void 0):"keep"===e.type||(0,r().t1)(e)}if(!o&&!l.collection)return{config:void 0,remappedRecordPointers:a};if(l.template_page_id){const e=l.template_page_id,t=n.visitRecordPointer(c().dr.fromPointerLike({id:l.template_page_id,table:u().iU}));"replace"===t.type?t.value?(m(t.value,u().iU),a.add(t.value),l.template_page_id=t.value.id):(0,r().$K)(t.value)||(l.template_page_id=void 0):"keep"===t.type||(0,r().t1)(t);(0,r().$K)(f)&&(0,r().$K)(l.collection)&&!c().dr.isEqualIdTable(f,l.collection)&&e===l.template_page_id&&(l.template_page_id=void 0)}if(l.properties&&l.properties.length>0){const e=[];for(const t of l.properties){const o=n.visitCollectionProperty(t);"replace"===o.type?(0,r().$K)(o.value)&&e.push(o.value):"keep"===o.type?e.push(t):(0,r().t1)(o)}l.properties=e}if(l.values){const t={};for(const[o,c]of Object.entries(l.values)){var g;const l=n.visitCollectionProperty(o),d="keep"===l.type?o:l.value;if(!d)continue;const u=(0,i().Xh)(c);if((0,r().$K)(null==u||null===(g=u.value)||void 0===g?void 0:g.value)){const{remappedRecordPointers:t,value:o}=(0,s().RA)({baseUrl:e.baseUrl,formula:u.value.value,publicDomainName:e.publicDomainName,spaceId:e.sourceSpaceId,visitors:n});u.value.value=o,a=a.union(t)}t[d]=u}l.values=t}return{config:l,remappedRecordPointers:a}},define_variables:e=>{const{config:t}=e;let o=new(d().X);if(!t)return{config:void 0,remappedRecordPointers:o};const n=(0,i().Xh)(t);if(!n.values)return{config:n,remappedRecordPointers:o};for(const i of Object.values(n.values)){if(!(0,r().$K)(i.value)||!i.value.value)continue;const{remappedRecordPointers:t,value:n}=(0,s().RA)({baseUrl:e.baseUrl,formula:i.value.value,publicDomainName:e.publicDomainName,spaceId:e.sourceSpaceId,visitors:e.visitors});i.value.value=n,o=o.union(t)}return{config:n,remappedRecordPointers:o}},duplicate_blocks:e=>({config:e.config,remappedRecordPointers:new(d().X)}),http_request:e=>({config:e.config,remappedRecordPointers:new(d().X)}),modal_confirmation:e=>{const{config:t}=e;let o=new(d().X);if(!t)return{config:void 0,remappedRecordPointers:o};const n=(0,i().Xh)(t);if(!n.text||!n.text.value)return{config:n,remappedRecordPointers:o};const{remappedRecordPointers:r,value:a}=(0,s().RA)({baseUrl:e.baseUrl,formula:n.text.value,publicDomainName:e.publicDomainName,spaceId:e.sourceSpaceId,visitors:e.visitors});return n.text.value=a,o=o.union(r),{config:n,remappedRecordPointers:o}},open_page:e=>{const{config:t,visitors:o}=e,n=new(d().X);if(!t)return{config:void 0,remappedRecordPointers:n};const a=(0,i().Xh)(t);if(!a.target)return{config:a,remappedRecordPointers:n};if("variable"===a.target.type){const e=o.visitFormulaContextValue(a.target.id);"replace"===e.type&&(e.value?a.target.id=e.value:a.target=void 0)}else if("page"===a.target.type){const e=o.visitRecordPointer(a.target.page);if("replace"===e.type){const t=e.value;t?(m(t,u().iU),n.add(t),a.target.page=t):a.target=void 0}}else"url"===a.target.type||(0,r().t1)(a.target);return{config:a,remappedRecordPointers:n}},publish_site:e=>({config:e.config,remappedRecordPointers:new(d().X)}),query_collection:e=>{const{config:t,preventClearingConfig:o,visitors:n}=e,s=new(d().X);if(!t)return{config:void 0,remappedRecordPointers:s};const l=(0,i().Xh)(t);if(!l.collection)return{config:void 0,remappedRecordPointers:s};const c=n.visitRecordPointer(l.collection);if("replace"===c.type){const e=c.value;e?(m(e,p().vF),s.add(e),l.collection=e):l.collection=void 0}if(!o&&!l.collection)return{config:void 0,remappedRecordPointers:s};if(null!=l&&l.filter&&((0,a().d)(l.filter,(e=>{const t=n.visitRecordPointer(e);if("replace"===t.type){if((0,r().$K)(t.value))return s.add(t.value),t.value.id}else{if("keep"===t.type)return e.id;(0,r().t1)(t)}})),(0,a().a)(l.filter,(t=>{const o=e.visitors.visitCollectionProperty(t);return"replace"===o.type?o.value:"keep"===o.type?t:void(0,r().t1)(o)}))),null!=l&&l.sort&&l.sort.length>0){const t=[];for(const o of l.sort){const n=e.visitors.visitCollectionProperty(o.property);"replace"===n.type?(0,r().$K)(n.value)&&t.push({...o,property:n.value}):"keep"===n.type?t.push({...o}):(0,r().t1)(n)}l.sort=t}return{config:l,remappedRecordPointers:s}},send_gmail_notification:e=>{var t,o,n,r,a,l,c;const{config:u}=e;let p=new(d().X);if(!u)return{config:void 0,remappedRecordPointers:p};const m=(0,i().Xh)(u);if(null!==(t=m.to)&&void 0!==t&&null!==(t=t.value)&&void 0!==t&&t.value){const{remappedRecordPointers:t,value:o}=(0,s().RA)({baseUrl:e.baseUrl,formula:m.to.value.value,publicDomainName:e.publicDomainName,spaceId:e.sourceSpaceId,visitors:e.visitors});m.to.value.value=o,p=p.union(t)}if(null!==(o=m.cc)&&void 0!==o&&null!==(o=o.value)&&void 0!==o&&o.value){const{remappedRecordPointers:t,value:o}=(0,s().RA)({baseUrl:e.baseUrl,formula:m.cc.value.value,publicDomainName:e.publicDomainName,spaceId:e.sourceSpaceId,visitors:e.visitors});m.cc.value.value=o,p=p.union(t)}if(null!==(n=m.bcc)&&void 0!==n&&null!==(n=n.value)&&void 0!==n&&n.value){const{remappedRecordPointers:t,value:o}=(0,s().RA)({baseUrl:e.baseUrl,formula:m.bcc.value.value,publicDomainName:e.publicDomainName,spaceId:e.sourceSpaceId,visitors:e.visitors});m.bcc.value.value=o,p=p.union(t)}if(null!==(r=m.reply_to)&&void 0!==r&&null!==(r=r.value)&&void 0!==r&&r.value){const{remappedRecordPointers:t,value:o}=(0,s().RA)({baseUrl:e.baseUrl,formula:m.reply_to.value.value,publicDomainName:e.publicDomainName,spaceId:e.sourceSpaceId,visitors:e.visitors});m.reply_to.value.value=o,p=p.union(t)}if(null!==(a=m.from_name)&&void 0!==a&&a.value){const{remappedRecordPointers:t,value:o}=(0,s().RA)({baseUrl:e.baseUrl,formula:m.from_name.value,publicDomainName:e.publicDomainName,spaceId:e.sourceSpaceId,visitors:e.visitors});m.from_name.value=o,p=p.union(t)}if(null!==(l=m.email_subject)&&void 0!==l&&l.value){const{remappedRecordPointers:t,value:o}=(0,s().RA)({baseUrl:e.baseUrl,formula:m.email_subject.value,publicDomainName:e.publicDomainName,spaceId:e.sourceSpaceId,visitors:e.visitors});m.email_subject.value=o,p=p.union(t)}if(null!==(c=m.email_body)&&void 0!==c&&c.value){const{remappedRecordPointers:t,value:o}=(0,s().RA)({baseUrl:e.baseUrl,formula:m.email_body.value,publicDomainName:e.publicDomainName,spaceId:e.sourceSpaceId,visitors:e.visitors});m.email_body.value=o,p=p.union(t)}return{config:m,remappedRecordPointers:p}},send_in_app_notification:e=>{const{config:t,visitors:o}=e;let n=new(d().X);if(!t)return{config:void 0,remappedRecordPointers:n};const a=(0,i().Xh)(t);if(a.target){const t=a.target;if("property"===t.type){if(t.propertyId&&t.collectionPointer){const e=o.visitCollectionPropertyPointer({...t.collectionPointer,propertyId:t.propertyId});if("replace"===e.type){const t=e.value;if(t){m(t,p().vF);const e=c().dr.fromSpaceShardRecordId({id:t.id,spaceId:t.spaceId},t.table);n.add(e),a.target={collectionPointer:e,propertyId:t.propertyId,type:"property"}}else(0,r().$K)(t)||(a.target=void 0)}else"keep"===e.type||(0,r().t1)(e)}}else if("formula"===t.type){if(t.value&&t.value.value){const{remappedRecordPointers:o,value:i}=(0,s().RA)({baseUrl:e.baseUrl,formula:t.value.value,publicDomainName:e.publicDomainName,spaceId:e.sourceSpaceId,visitors:e.visitors});t.value.value=i,n=n.union(o)}}else(0,r().t1)(t)}if(a.notification_message&&a.notification_message.value){const{remappedRecordPointers:t,value:o}=(0,s().RA)({baseUrl:e.baseUrl,formula:a.notification_message.value,publicDomainName:e.publicDomainName,spaceId:e.sourceSpaceId,visitors:e.visitors});a.notification_message.value=o,n=n.union(t)}return{config:a,remappedRecordPointers:n}},slack_notification:e=>{const{sourceSpaceId:t,targetSpaceId:o}=e,n=new(d().X);return t!==o?{config:void 0,remappedRecordPointers:n}:{config:e.config,remappedRecordPointers:n}},update_pages:e=>{const{config:t,visitors:o}=e;let n=new(d().X);if(!t)return{config:void 0,remappedRecordPointers:n};const l=(0,i().Xh)(t);if(!l.target)return{config:void 0,remappedRecordPointers:n};if(l.target)if("variable"===l.target.type){const e=o.visitFormulaContextValue(l.target.id);"replace"===e.type&&(e.value?l.target.id=e.value:l.target=void 0)}else if("page"===l.target.type){const e=o.visitRecordPointer(l.target.page);if("replace"===e.type){const t=e.value;t?(m(t,u().iU),n.add(t),l.target.page=t):l.target=void 0}}else if("collection"===l.target.type){var c,f;const t=o.visitRecordPointer(l.target.collection);if("replace"===t.type){const e=t.value;e?(m(e,p().vF),n.add(e),l.target.collection=e):l.target=void 0}else"keep"===t.type||(0,r().t1)(t);if(null!==(c=l.target)&&void 0!==c&&c.filter&&((0,a().d)(l.target.filter,(e=>{const t=o.visitRecordPointer(e);if("replace"===t.type){if((0,r().$K)(t.value))return n.add(t.value),t.value.id}else{if("keep"===t.type)return e.id;(0,r().t1)(t)}})),(0,a().a)(l.target.filter,(t=>{const o=e.visitors.visitCollectionProperty(t);return"replace"===o.type?o.value:"keep"===o.type?t:void(0,r().t1)(o)}))),null!==(f=l.target)&&void 0!==f&&f.sort&&l.target.sort.length>0){const t=[];for(const o of l.target.sort){const n=e.visitors.visitCollectionProperty(o.property);"replace"===n.type?(0,r().$K)(n.value)&&t.push({...o,property:n.value}):"keep"===n.type?t.push({...o}):(0,r().t1)(n)}l.target.sort=t}}else(0,r().t1)(l.target);if(!e.preventClearingConfig&&!l.target)return{config:void 0,remappedRecordPointers:n};if(l.properties&&l.properties.length>0){const t=[];for(const o of l.properties){const n=e.visitors.visitCollectionProperty(o);"replace"===n.type?(0,r().$K)(n.value)&&t.push(n.value):"keep"===n.type?t.push(o):(0,r().t1)(n)}l.properties=t}if(l.values){const t={};for(const[o,a]of Object.entries(l.values??{})){var g;const l=e.visitors.visitCollectionProperty(o),c="keep"===l.type?o:l.value;if(!c)continue;const d=(0,i().Xh)(a);if((0,r().$K)(null==d||null===(g=d.value)||void 0===g?void 0:g.value)){const{remappedRecordPointers:t,value:o}=(0,s().RA)({baseUrl:e.baseUrl,formula:d.value.value,publicDomainName:e.publicDomainName,spaceId:e.sourceSpaceId,visitors:e.visitors});d.value.value=o,n=n.union(t)}t[c]=d}l.values=t}return{config:l,remappedRecordPointers:n}}};function g(e){const{automationActionModel:t,baseUrl:o,preventClearingConfig:n,publicDomainName:i,sourceSpaceId:r,visitors:a}=e,s=t.getType(),l=t.getConfig(),c=function(e){return f[e]}(s);return c({baseUrl:o,config:l,preventClearingConfig:n,publicDomainName:i,sourceSpaceId:r,targetSpaceId:t.space_id,visitors:a})}function v(){return{type:"keep"}}function h(e){const{automationActionModel:t,baseUrl:o,preventClearingConfig:n,publicDomainName:i,sourceSpaceId:r,visitors:a}=e,s={visitCollectionProperty:a.visitCollectionProperty??v,visitCollectionPropertyPointer:a.visitCollectionPropertyPointer??v,visitFormulaContextValue:a.visitFormulaContextValue??v,visitFormulaPageProperty:a.visitFormulaPageProperty??v,visitRecordPointer:a.visitRecordPointer??v},{config:c,remappedRecordPointers:d}=g({automationActionModel:t,baseUrl:o,preventClearingConfig:n,publicDomainName:i,sourceSpaceId:r,visitors:s}),{model:u}=l().IN_.create({alive:!0,config:c??{},id:t.id,parent_id:t.parent_id,parent_table:t.parent_table,space_id:t.space_id,type:t.type,version:t.getVersion()});return{remappedRecordPointers:d,value:u}}const _={button:e=>({config:e.config,remappedRecordPointers:new(d().X)}),event:e=>{const{config:t,visitors:n}=e,s=new(d().X),l=(0,i().Xh)(t);if(!l.event.source)return{config:l,remappedRecordPointers:s};if("collection"===l.event.source.type){const e=n.visitRecordPointer(l.event.source.pointer);if("replace"===e.type){const t=e.value;t?(m(t,p().vF),s.add(t),l.event.source={pointer:t,type:"collection"}):l.event.source=void 0}}else if("collection_view"===l.event.source.type){const e=n.visitRecordPointer(l.event.source.pointer);if("replace"===e.type){const t=e.value;t?(m(t,o(139978).np),s.add(t),l.event.source={pointer:t,type:"collection_view"}):l.event.source=void 0}}else"filter"===l.event.source.type||(0,r().t1)(l.event.source);if("some"===l.event.pagePropertiesEdited.type){const t=[];for(const o of l.event.pagePropertiesEdited.some??[]){const s=(0,i().Xh)(o),l=n.visitCollectionProperty(s.property);if("replace"===l.type){if(!(0,r().$K)(l.value))continue;s.property=l.value}else"keep"===l.type||(0,r().t1)(l);if("changes_to_any"!==s.filter.operator){const t={property:s.property,filter:s.filter};(0,a().d)(t,(e=>{const t=n.visitRecordPointer(e);if("replace"===t.type){if((0,r().$K)(t.value))return t.value.id}else{if("keep"===t.type)return e.id;(0,r().t1)(t)}})),(0,a().a)(t,(t=>{const o=e.visitors.visitCollectionProperty(t);return"replace"===o.type?o.value:"keep"===o.type?t:void(0,r().t1)(o)}))}t.push(s)}l.event.pagePropertiesEdited.some=t}else if("all"===l.event.pagePropertiesEdited.type){const t=[];for(const o of l.event.pagePropertiesEdited.all??[]){const s=(0,i().Xh)(o),l=n.visitCollectionProperty(s.property);if("replace"===l.type){if(!(0,r().$K)(l.value))continue;s.property=l.value}else"keep"===l.type||(0,r().t1)(l);if("changes_to_any"!==s.filter.operator){const t={property:s.property,filter:s.filter};(0,a().d)(t,(e=>{const t=n.visitRecordPointer(e);if("replace"===t.type){if((0,r().$K)(t.value))return t.value.id}else{if("keep"===t.type)return e.id;(0,r().t1)(t)}})),(0,a().a)(t,(t=>{const o=e.visitors.visitCollectionProperty(t);return"replace"===o.type?o.value:"keep"===o.type?t:void(0,r().t1)(o)}))}t.push(s)}l.event.pagePropertiesEdited.all=t}else"none"===l.event.pagePropertiesEdited.type||"any"===l.event.pagePropertiesEdited.type||(0,r().t1)(l.event.pagePropertiesEdited);return{config:l,remappedRecordPointers:s}},notification_event:e=>({config:e.config,remappedRecordPointers:new(d().X)}),recurrence:e=>({config:e.config,remappedRecordPointers:new(d().X)})};function b(e){const{automationModel:t,visitors:o}=e,n=t.getTriggerType(),i=t.getTrigger(),r=function(e){return _[e]}(n);return r({config:i,visitors:o})}function y(e){const{automationModel:t,visitors:o}=e,n={visitCollectionProperty:o.visitCollectionProperty??v,visitRecordPointer:o.visitRecordPointer??v},{remappedRecordPointers:i,config:r}=b({automationModel:t,visitors:n}),{model:a}=l().iw5.create({alive:!0,createdBy:t.getCreatedByPointer(),id:t.id,lastEditedBy:t.getLastEditedByPointer(),parent_id:t.parent_id,parent_table:t.parent_table,space_id:t.space_id,status:t.getStatus(),trigger:r,version:t.getVersion()});return{remappedRecordPointers:i,value:a}}},231327:(e,t,o)=>{o.d(t,{I3:()=>k,dq:()=>w,xU:()=>_});o(670560),o(267602),o(653476),o(241792),o(228244);var n=()=>o(513670),i=()=>o(632314),r=()=>o(696459),a=()=>o(156642),s=()=>o(226413),l=()=>o(950724),c=()=>o(942275),d=()=>o(530980),u=()=>o(728670),p=()=>o(827370),m=()=>o(396136),f=()=>o(602299),g=()=>o(542973),v=()=>o(81954),h=()=>o(955620);async function _(e){const{loadRecordValue:t,operationPointers:o,getInitialRecordModel:i,getFinalRecordModel:r}=e,a=[],s=[],c=async(o,n)=>{var i;const r=e.getSpaceIdFromBlockId?await e.getSpaceIdFromBlockId(o,n):void 0;if(r)return r;return null===(i=await t({table:m().iU,id:o,spaceId:n}))||void 0===i?void 0:i.space_id};return await Promise.all(o.map((async o=>{if((0,p().$O)(o,m().iU)){const p=i.getRecordValue(o),f=r.getRecordValue(o),S=null==f?void 0:f.space_id,C={...o,spaceId:(0,v().J)(S)};let x;if(p&&(x=d().kk5.fromBlock(p).getCollectionPointer()),(!p||!x)&&f){const o=d().kk5.fromBlock(f).getCollectionPointer();if(o){let n=r.getRecordValue(o);if(n||(n=await t(o)),n&&n.parent_id!==f.id){const t=n.space_id;var u;if(!t)null===(u=e.logBacklinkUpdatesMissingSpaceId)||void 0===u||u.call(e,{updateType:"create",backlinkType:"collection_reference",sourceBlockId:n.parent_id,referencePointer:{id:f.id,spaceId:f.space_id,table:m().iU}});a.push({space_id:t,block_id:n.parent_id,mentioned_from:{type:"collection_reference",block_id:f.id,pointer:{id:f.id,spaceId:f.space_id,table:m().iU}}})}}}const T=(0,l().N)(y(p),y(f),b);for(const{blockId:t,propertyId:n}of T.created){const i=await c(t,S);var g;if(!i)null===(g=e.logBacklinkUpdatesMissingSpaceId)||void 0===g||g.call(e,{updateType:"create",backlinkType:"property_mention",sourceBlockId:t,referencePointer:C});a.push({space_id:i,block_id:t,mentioned_from:{type:"property_mention",block_id:o.id,property_id:n,pointer:C}})}for(const{blockId:t,propertyId:n}of T.deleted){const i=await c(t,S);var h;if(!i)null===(h=e.logBacklinkUpdatesMissingSpaceId)||void 0===h||h.call(e,{updateType:"delete",backlinkType:"property_mention",sourceBlockId:t,referencePointer:C});s.push({space_id:i,block_id:t,mentioned_from:{type:"property_mention",block_id:o.id,property_id:n,pointer:C}})}const A=M(p),R=M(f);if(A&&!n().Xy(A,R)){const t=A.spaceId;var _;if(!t)null===(_=e.logBacklinkUpdatesMissingSpaceId)||void 0===_||_.call(e,{updateType:"delete",backlinkType:"alias",sourceBlockId:A.id,referencePointer:C});s.push({space_id:t,block_id:A.id,mentioned_from:{type:"alias",pointer:C}})}if(R&&!n().Xy(A,R)){const t=R.spaceId;var w;if(!t)null===(w=e.logBacklinkUpdatesMissingSpaceId)||void 0===w||w.call(e,{updateType:"create",backlinkType:"alias",sourceBlockId:R.id,referencePointer:C});a.push({space_id:t,block_id:R.id,mentioned_from:{type:"alias",pointer:C}})}const B=P(p),E=P(f);if(B&&!n().Xy(B,E)){const t=B.spaceId;var k;if(!t)null===(k=e.logBacklinkUpdatesMissingSpaceId)||void 0===k||k.call(e,{updateType:"delete",backlinkType:"transclusion_reference",sourceBlockId:B.id,referencePointer:C});s.push({space_id:t,block_id:B.id,mentioned_from:{type:"transclusion_reference",pointer:C}})}if(E&&!n().Xy(B,E)){const t=E.spaceId;var I;if(!t)null===(I=e.logBacklinkUpdatesMissingSpaceId)||void 0===I||I.call(e,{updateType:"create",backlinkType:"transclusion_reference",sourceBlockId:E.id,referencePointer:C});a.push({space_id:t,block_id:E.id,mentioned_from:{type:"transclusion_reference",pointer:C}})}}else if((0,p().$O)(o,f().x_)){const t=i.getRecordValue(o),n=r.getRecordValue(o),d=null==n?void 0:n.space_id,u={...o,spaceId:(0,v().J)(d)},p=(0,l().E)(S(t),S(n));for(const i of p.created){const t=await c(i,d);var C;if(!t)null===(C=e.logBacklinkUpdatesMissingSpaceId)||void 0===C||C.call(e,{updateType:"create",backlinkType:"comment_mention",sourceBlockId:i,referencePointer:u});a.push({space_id:t,block_id:i,mentioned_from:{type:"comment_mention",comment_id:o.id,pointer:u}})}for(const i of p.deleted){const t=await c(i,d);var x;if(!t)null===(x=e.logBacklinkUpdatesMissingSpaceId)||void 0===x||x.call(e,{updateType:"delete",backlinkType:"comment_mention",sourceBlockId:i,referencePointer:u});s.push({space_id:t,block_id:i,mentioned_from:{type:"comment_mention",comment_id:o.id,pointer:u}})}}}))),{createdBacklinks:a,deletedBacklinks:s}}function b(e){return`${e.blockId}${e.propertyId}`}function y(e){const t=d().kk5.fromValue(m().iU,e),o=[];if(!t)return o;const n=t.getProperties();if(!n)return o;for(const i in n){const e=h().jDe(t.getProperty(i));for(const t of e)o.push({propertyId:i,blockId:t})}return o}function S(e){const t=d().kk5.fromValue(f().x_,e);return t&&t.alive?h().jDe(t.getText()):[]}function w(e){var t,o,n,i;return"comment_mention"===e.mentioned_from.type?{table:f().x_,id:e.mentioned_from.comment_id,spaceId:(0,v().J)(null===(t=e.mentioned_from.pointer)||void 0===t?void 0:t.spaceId)}:"reference"===e.mentioned_from.type?{table:m().iU,id:e.mentioned_from.parent_block_id,spaceId:(0,v().J)(null===(o=e.mentioned_from.parent_pointer)||void 0===o?void 0:o.spaceId)}:"property_mention"===e.mentioned_from.type?{table:m().iU,id:e.mentioned_from.block_id,spaceId:(0,v().J)(null===(n=e.mentioned_from.pointer)||void 0===n?void 0:n.spaceId)}:"collection_reference"===e.mentioned_from.type?{table:m().iU,id:e.mentioned_from.block_id,spaceId:(0,v().J)(null===(i=e.mentioned_from.pointer)||void 0===i?void 0:i.spaceId)}:"alias"===e.mentioned_from.type||"transclusion_reference"===e.mentioned_from.type?e.mentioned_from.pointer:void(0,r().t1)(e.mentioned_from)}function k(e){const{backlinks:t,getRecordModel:o,sourceBlockRecordPointer:i}=e,r=(0,u().DW)(i,o),a=n().Z$(r),s=r[0];return a&&"block"===s.table?t.filter((t=>{const n=w(t),i=(0,u().fh)(n,o),r=(0,u().DW)(n,o);return i&&I({...e,mentionedFromRecordPointer:n,shouldCheckSourceBlockPublicPermission:{sourceBlockRecordPointer:s}})&&C({mentionedFromRecordPath:r})&&x({...e,backlink:t,shouldPerformRelationCheck:{sourceBlock:s}})&&T({...e,backlink:t,mentionedFromRecordPath:r})})):[]}function I(e){const{actor:t,actorHasPermissionViaPublicAccessOnlyFn:o,mentionedFromRecordPointer:n,shouldCheckSourceBlockPublicPermission:r}=e,a=o({actor:t,recordPointer:n});if(a){if(!r)return!1;{const e=o({actor:t,recordPointer:r.sourceBlockRecordPointer});if(!e)return!1;if(!(0,i().Z)(a.from,e.from))return!1}}return!0}function C(e){const{mentionedFromRecordPath:t}=e;return!t.some((e=>e.table===g().qF&&e.resolved))}function x(e){const{getRecordModel:t,backlink:o,shouldPerformRelationCheck:n}=e;if("property_mention"===o.mentioned_from.type){var i;const e=t({table:m().iU,id:o.mentioned_from.block_id,spaceId:(0,v().J)(null===(i=o.mentioned_from.pointer)||void 0===i?void 0:i.spaceId)});if(!e)return!1;const r=(0,c().ky)({block:e,getRecordModel:t});if(r){const e=d().kk5.fromCollection(r);if("title"!==o.mentioned_from.property_id){const i=s().MY(r),a=o.mentioned_from.property_id,l=i[a];if(!l)return!1;if("relation"===l.type){if(!n)return!1;{const o=n.sourceBlock,i=(0,c().ky)({block:o,getRecordModel:t}),r=s().F0(l);if(!i||i.id!==r)return!1;if(s().EY({...e.pointer,propertyId:a,propertySchema:l},i))return!1}}else if("title"!==l.type&&"text"!==l.type)return!1}}else if("title"===o.mentioned_from.property_id){if(!(0,a().XD)(e.type,e.getFormat()))return!1}else{if("caption"!==o.mentioned_from.property_id)return!1;if(!d().kk5.fromBlock(e).isType(a().oe))return!1}}return!0}function T(e){const{getRecordModel:t,backlink:o,mentionedFromRecordPath:n}=e,i=(0,u().zN)(n)[0],r=(0,u().uJ)({table:m().iU,id:o.block_id},t)[1];return!i||!r||i.id!==r.id}function M(e){const t=d().kk5.fromValue(m().iU,e);if(t&&"alias"===t.type)return t.getAliasTargetPointer()}function P(e){const t=d().kk5.fromValue(m().iU,e);if(t&&"transclusion_reference"===t.type)return t.getTransclusionReferenceTargetPointer()}},494488:(e,t,o)=>{o.d(t,{N7:()=>r,ZD:()=>a});var n=()=>o(568017),i=()=>o(707513);function r(e){return{color:n().ZP.defaultText,fill:"currentColor",lineHeight:1.5,fontFamily:i().F5(e).sans}}const a={paddingTop:3,paddingBottom:3,paddingLeft:2,paddingRight:2}},18902:(e,t,o)=>{o.d(t,{A1:()=>u,A7:()=>c,FT:()=>f,KH:()=>g,Tv:()=>m,iv:()=>s,vF:()=>d,xR:()=>p,yB:()=>l});var n=()=>o(326966),i=()=>o(728670),r=()=>o(396136),a=()=>o(122792);const s=1714158352e3,l=17240832e5,c=30*n().Lq,d=30*n().Lq;function u(e,t){const o=(0,i().yC)(e,t);if((null==o?void 0:o.table)===r().iU)return o.getDeletedFromTrashTime()}function p(e,t){const o=(0,i().OJ)({recordPointer:e,getRecordModel:t});if((null==o?void 0:o.table)===r().iU)return o.getMovedToTrashTime()}function m(e){if(!e||!(0,a().wP)(e.getSubscriptionTier()))return 1e3*c;return 1e3*(e.getSetting("delete_from_trash_delay_seconds")??c)}function f(e){if(!e||!(0,a().wP)(e.getSubscriptionTier()))return 1e3*d;return 1e3*(e.getSetting("purge_delay_seconds")??d)}function g(e){let{movedToTrashTime:t,deleteFromTrashDelayMs:o,cdrrDeletionEnabledTimestamp:n}=e;const i=t??s;return(i<n?n:i)+o}},364402:(e,t,o)=>{o.d(t,{ut:()=>c});o(241792);var n=()=>o(156642),i=()=>o(532850),r=()=>o(530980),a=()=>o(396136),s=()=>o(752778),l=()=>o(955620);function c(e){const{getRecordValue:t,blockValue:o}=e;let c="";const d={user:new Map},u=r().kk5.fromBlock(o),p=r().omK.fromGetRecordValueFn(t);if(u.isCollectionView()){const e=function(e){const{getRecordModel:t,model:o}=e,n=o.getRenderFormatPointer(t);if(!n)return;const r=t(n);if(!r)return;if(r.table===a().iU)return(0,i().wS)(r,"title")||[];if(r.table===s().vF)return r.getNormalizedName()}({model:u,getRecordModel:p});e&&e.length>0&&(c=l().Qh7(e,p,d).text)}else if(u.isType("file")){c=`${l().Qh7(u.getProperty("title"),p,d).text} ${l().Qh7(u.getProperty("caption"),p,d).text}`}else if(u.isType("bookmark")){c=`${l().Qh7(u.getProperty("title"),p,d).text} ${l().Qh7(u.getProperty("description"),p,d).text} ${l().Qh7(u.getProperty("caption"),p,d).text}`}else if(u.isType(n().Ok)){const e=u.getProperty("caption");c=l().Qh7(e,p,d).text}else if(u.isType(n().Ti.tableRow)){const e=function(e){const{blockModel:t,getRecordModel:o}=e,n=o({table:a().iU,id:t.getParentId(),spaceId:t.getSpaceId()});return null==n?void 0:n.getFormatValue("table_block_column_order")}({blockModel:u,getRecordModel:p});if(e){c=e.map((e=>l().Qh7(u.getProperty(e),p,d).text)).join(" ")}}else{const e=(0,i().wS)(o,"title");c=l().Qh7(e,p,d).text}return{text:c.trim()||void 0,mentions:d}}},903680:(e,t,o)=>{o.d(t,{EW:()=>i,R5:()=>r,bv:()=>a,u7:()=>s});var n=()=>o(696459);function i(e){switch(e){case"home_main":case"home_trending":case"home_similar_users":case"home_my_tasks":case"home_custom_db":case"home_most_visited":case"home_last_edited":case"home_favorites":case"home_posts":return!0;case void 0:return!1;default:(0,n().t1)(e)}}function r(e){const t=null==e?void 0:e.getSystemBlockType();switch(t){case"home_main":case"home_trending":case"home_similar_users":case"home_most_visited":case"home_last_edited":case"home_my_tasks":case"home_custom_db":case"home_favorites":case"home_posts":return!0;case void 0:return!1;default:(0,n().t1)(t)}}function a(e){switch(e){case"home_main":case"home_trending":case"home_similar_users":case"home_most_visited":case"home_last_edited":case"home_my_tasks":case"home_favorites":case"home_posts":return!0;case"home_custom_db":case void 0:return!1;default:(0,n().t1)(e)}}function s(e){switch(e){case"home_main":case"home_trending":case"home_similar_users":case"home_most_visited":case"home_last_edited":case"home_favorites":return!0;case"home_my_tasks":case"home_custom_db":case"home_posts":case void 0:return!1;default:(0,n().t1)(e)}}},820271:(e,t,o)=>{o.d(t,{HT:()=>f,K0:()=>s,_i:()=>h,dq:()=>l,ib:()=>d});o(267602),o(653476);var n=()=>o(834458),i=()=>o(608352),r=()=>o(532850),a=()=>o(964120);function s(e){let{collectionSchema:t,axisChartType:o}=e;const n=c({collectionSchema:t});if(!n)return;const i=d({property:n,collectionSchema:t,hideEmptyGroups:!1});if(!i)return;const r="formula"===i.type?i.groupBy.sort:i.sort;let s="column";switch(o){case"bar":s="bar";break;case"line":s="line";break;case"column":case void 0:s="column"}return{chartFormat:{axisHideEmptyGroups:i.hideEmptyGroups,mainSort:(0,a().H9)(r)},type:o??"column",dataConfig:{type:"groups_reducer",groupBy:i,aggregationConfig:{aggregation:{aggregator:"count"},seriesFormat:{displayType:s},stackOptions:void 0}}}}function l(e){let{collectionSchema:t}=e;const o=c({collectionSchema:t});if(!o)return;const n=d({property:o,collectionSchema:t,hideEmptyGroups:!0});if(!n)return;const i=(0,r().Qm)({schema:t,property:o});if(!i)return;const s="formula"===n.type?n.groupBy.sort:n.sort;return{chartFormat:{axisHideEmptyGroups:n.hideEmptyGroups,mainSort:i&&(0,a().jn)(i)?a().MN.yDescending:(0,a().H9)(s)},type:"donut",dataConfig:{type:"groups_reducer",groupBy:n,aggregationConfig:{aggregation:{aggregator:"count"}}}}}function c(e){let{collectionSchema:t}=e;return Object.keys(t).filter((e=>{const o=(0,r().Qm)({schema:t,property:e});return!!o&&(0,i().LG)(o)})).sort(((e,o)=>function(e,t,o){const n=(0,r().Qm)({schema:o,property:e}),a=(0,r().Qm)({schema:o,property:t});if(!(n&&(0,i().sM)(n.type)&&a&&(0,i().sM)(a.type)))return 0;const s=u[n.type],l=u[a.type];return void 0===s||void 0===l?0:s-l}(e,o,t)))[0]}function d(e){let{property:t,collectionSchema:o,hideEmptyGroups:a}=e;const s=(0,r().Qm)({schema:o,property:t});if(s&&(0,i().LG)(s)){if((0,i().A1)(s.type))return{type:s.type,property:t,groupBy:"day",sort:{type:"ascending"}};if("number"===s.type)return{type:s.type,property:t,groupBy:{type:"unique"},start:-1,end:-1,size:-1,sort:{type:"ascending"}};if("formula"===s.type){const e=(0,n().getFormulaPropertySchemaResultType)(s);if("number"===e)return{type:"formula",property:t,groupBy:{type:"number",groupBy:{type:"unique"},start:-1,end:-1,size:-1,sort:{type:"ascending"}}};if("date"===e)return{type:s.type,property:t,groupBy:{type:"date",groupBy:"day",sort:{type:"ascending"}}}}return(0,i().fw)({property:t,propertySchema:s,hideEmptyGroups:a})}}const u={select:0,multi_select:0,status:0,date:1,number:1,person:1,relation:2,checkbox:3,created_time:3,created_by:3,last_edited_by:3,last_edited_time:3,last_visited_time:3,text:3,title:3,url:4,email:4,phone_number:4,formula:5},p=["title","text"];function m(e){return p.includes(e)}function f(e){if("formula"===e.type){const t=(0,n().getFormulaPropertySchemaResultType)(e);return"array"!==t&&"block"!==t&&"unknown"!==t&&m(t)}return m(e.type)}const g=["number"];function v(e){return g.includes(e)}function h(e){if("formula"===e.type){const t=(0,n().getFormulaPropertySchemaResultType)(e);return"array"!==t&&"block"!==t&&"unknown"!==t&&v(t)}return v(e.type)}},964120:(e,t,o)=>{o.d(t,{H9:()=>r,MN:()=>i,jn:()=>a});var n=()=>o(226413);let i=function(e){return e.manual="manual",e.resultsAdvanced="results-advanced",e.yAscending="y-ascending",e.yDescending="y-descending",e.xAscending="x-ascending",e.xDescending="x-descending",e}({});function r(e){switch(null==e?void 0:e.type){case"manual":return i.manual;case"descending":return i.xDescending;default:return i.xAscending}}function a(e){return!(0,n().Lt)(e)}},560384:(e,t,o)=>{o.d(t,{k:()=>n});const n=["relations_show_deleted","relations_show_invalid_collection","relations_show_no_access","collections_xws"]},855855:(e,t,o)=>{o.d(t,{Q:()=>r});o(267602),o(731107);var n=()=>o(801916),i=()=>o(560384);function r(e){const{experimentService:t,actor:o,spaceId:r}=e;return i().k.reduce(((e,i)=>(e[i]=t.checkGate({actor:o??n().pX,gateName:i,customIDs:{spaceId:r}}),e)),{})}},870016:(e,t,o)=>{o.d(t,{m:()=>n});const n=1e3},577223:(e,t,o)=>{o.d(t,{Ko:()=>E,ND:()=>V,RA:()=>A,WL:()=>N,Xq:()=>H,hz:()=>q,mL:()=>P,r9:()=>$,wg:()=>W,zk:()=>R});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(470928),o(241792),o(228244);var n=()=>o(513670),i=()=>o(696459),r=()=>o(855855),a=()=>o(455947),s=()=>o(721927),l=()=>o(608352),c=()=>o(226413),d=()=>o(532850),u=()=>o(570270),p=()=>o(803021),m=()=>o(874459),f=()=>o(801916),g=()=>o(72539),v=()=>o(956057),h=()=>o(995867),_=()=>o(530980),b=()=>o(396035),y=()=>o(160916),S=()=>o(827370),w=()=>o(396136),k=()=>o(989478),I=()=>o(722917),C=()=>o(955620);function x(e){const t=[],o=[];for(const[n,i]of Object.entries(e))i&&((0,I().S4)(n)||("person"===i.type?t.push(n):"date"===i.type&&o.push(n)));return{date:o,person:t}}const T=C().V3y(", ");function M(e,t){const o={command:"update",args:t,pointer:{table:w().iU,id:e.id},path:["properties"]};return _().kk5.fromValue(e.table,(0,b().lK)(o,e.__IM_SORRY__getValue()))}function P(e){const{filter:t,userFilterContext:o,getRecordModel:n,experimentService:i,intl:r,collectionModel:a,currentPageInRelatedCollection:s,relativeVariableResult:l}=e,c=a.getNormalizedSchema(),d=a.spaceId;if(!d)return!1;const{model:u}=_().yJh.create({id:"fake-id",type:"page",properties:{},space_id:d,parent:a.pointer,createdBy:g().P_},{useCrdt:!1}),{coercionSucceeded:p}=A({block:u,schema:c,propertyMapping:a.getPropertyMapping(),groupBy:void 0,userFilterContext:o,intl:r,filter:t,getRecordModel:n,groupsPointer:[],relativeVariableResult:l,currentPageInRelatedCollection:s,resultCache:new Map,regExpCache:new Map,experimentService:i});return p}function A(e){const{block:t,schema:o,propertyMapping:i,filter:s,userFilterContext:l,groupBy:c,groupsPointer:d,relativeVariableResult:u,currentPageInRelatedCollection:p,getRecordModel:m,intl:f,resultCache:g,regExpCache:v,experimentService:h}=e,{userId:b,userTimeZone:S,userStartOfWeek:I}=l;let C=t;const x=_().omK.tryUntilFound(_().omK.fromMonomorphicFunctionUnsafe((e=>{let{table:t,id:o}=e;if(t===w().iU&&o===C.id)return C}),y().mF.fromMonomorphicFunctionUnsafe((e=>{let{table:t,id:o}=e;if(t===w().iU&&o===C.id)return C.__IM_SORRY__getValue()}))),m),T={};for(const n of d)Object.assign(T,L({block:C,getRecordModel:x,schema:o,propertyMapping:i,group:n,groupBy:c,intl:f,userFilterContext:l,relativeVariableResult:u,currentPageInRelatedCollection:p,resultCache:g,regExpCache:v,experimentService:h})),C=M(t,T);if(s){const e=j({block:C,schema:o,filter:s,propertyMapping:i,userFilterContext:l,relativeVariableResult:u,currentPageInRelatedCollection:p,getRecordModel:m,intl:f,resultCache:g,regExpCache:v,experimentService:h}),n="failsFilter"===e.type||"coercedByFilter"===e.type?e.update??{}:{};Object.assign(T,n),C=M(t,T)}for(const n of d)Object.assign(T,L({block:C,getRecordModel:x,schema:o,propertyMapping:i,groupBy:c,group:n,intl:f,userFilterContext:l,relativeVariableResult:u,currentPageInRelatedCollection:p,resultCache:g,regExpCache:v,experimentService:h})),C=M(t,T);const P=M(C,T),A=n().yW(d.map((e=>{const n=R({group:e,groupBy:void 0,propertyMapping:i,schema:o,timeZone:S,experimentService:h}),s=n?(0,a().q)({context:{schema:o,userId:b,userTimeZone:S,userStartOfWeek:I,relativeVariableResult:u,currentPageInRelatedCollection:p,intl:f,collectionFeatureGates:(0,r().Q)({experimentService:h,actor:b?{table:k().KJ,id:b}:void 0,spaceId:t.spaceId})},propertyMapping:i,filter:n}):void 0;return Boolean(s&&s({block:P,getRecordModel:m,propertyMapping:i,resultCache:g,regExpCache:v,experimentService:h,formulasModule:void 0}))}))),B=s?(0,a().q)({filter:s,propertyMapping:i,context:{schema:o,userId:b,userTimeZone:S,userStartOfWeek:I,relativeVariableResult:u,currentPageInRelatedCollection:p,intl:f,collectionFeatureGates:(0,r().Q)({experimentService:h,actor:b?{table:k().KJ,id:b}:void 0,spaceId:t.spaceId})}}):void 0,E=!B||B({block:P,getRecordModel:m,propertyMapping:i,resultCache:g,regExpCache:v,experimentService:h,formulasModule:void 0});return{coercionSucceeded:A&&E,update:T}}function R(e){const t=E(e);return t?(0,a().vA)(t)?t:{operator:"and",filters:[t]}:void 0}function B(e,t){var o;return t?(null===(o=u().aQ.fromViewPropertyIds([e.property],t))||void 0===o?void 0:o[0])??e.property:e.property}function E(e){const{schema:t,group:o,groupBy:n,propertyMapping:r,timeZone:a,experimentService:s}=e,c=B(o,r),d=t[c];if(!d)return;const u=o.value;if((0,l().LG)(d)&&u.type===d.type){if(void 0===u.value)return{property:c,filter:{operator:"is_empty"}};if("select"===d.type)return"string"==typeof u.value?{property:c,filter:{operator:"enum_is",value:{type:"exact",value:u.value}}}:void 0;if("status"===d.type)return void 0!==u.value&&"status"===u.type?{property:c,filter:{operator:"status_is",value:"by_group"===u.value.type?{type:"is_group",value:u.value.group}:{type:"is_option",value:u.value.option}}}:void 0;if((0,l().pd)(d.type))return"object"==typeof u.value&&u.type===d.type?{property:c,filter:{operator:"person_contains",value:{type:"exact",value:u.value}}}:void 0;if("relation"===d.type)return"object"==typeof u.value&&"relation"===u.type?function(e,t){if((0,l().RA)(t.value))return{property:e,filter:{operator:"relation_contains",value:{type:"exact",value:t.value.id}}};if((0,l().t2)(t.value))return{property:e,filter:{operator:"relation_contains",value:{type:"relative",value:{type:"builtin",variable:t.value.value.variable}}}}}(c,u):void 0;if("location"===d.type)return"object"==typeof u.value&&"location"===u.type?{property:c,filter:{operator:"location_is",value:{type:"exact",value:u.value.id}}}:void 0;if("multi_select"===d.type)return"string"==typeof u.value?{property:c,filter:{operator:"enum_contains",value:{type:"exact",value:u.value}}}:void 0;if((0,l().A1)(d.type)){if(u.type!==d.type)return;const e=s.checkGate({gateName:"collection_groups_round_date_group_reducers",actor:f().pX});return D(n&&"date"===n.type&&e?n.groupBy:void 0,u.value,c,a)}if((0,l().HB)(d.type)){if(u.type!==d.type)return;return U(u.value,c)}if("number"===d.type){if("number"!==u.type)return;return F(u.value,c)}if("checkbox"===d.type){if("checkbox"!==u.type)return;return{property:c,filter:{operator:"checkbox_is",value:{type:"exact",value:u.value}}}}if("formula"===d.type){if("formula"!==u.type)return;const e=u.value;if(void 0===e.value)return;if((0,l().R7)(e))return U(e.value,c);if("number"===e.type)return F(e.value,c);if("checkbox"===e.type)return{property:c,filter:{operator:"checkbox_is",value:{type:"exact",value:e.value}}};if((0,l().Mc)(e))return D(n&&"date"===n.type?n.groupBy:void 0,e.value,c,a);if((0,l().q6)(e))return function(e,t){return{property:e,filter:{operator:"person_contains",value:{type:"exact",value:t.value}}}}(c,e);if((0,l().tL)(e))return(0,l().RA)(e.value)?{property:c,filter:{operator:"relation_contains",value:{type:"exact",value:e.value.id}}}:void 0;(0,i().t1)(e)}(0,i().t1)(d.type)}}function D(e,t,o,n){const i=(0,l().Hk)(t,n),r="relative"===e&&"month"===t.type?function(e){const{groupValueStart:t,groupValueEnd:o,timeZone:n}=e,i=(0,m().Uu)(n),r=i.minus({days:30}),a=i.plus({days:30}),s=t.valueOf()>i.valueOf();return{start:s&&a.valueOf()>t.valueOf()?a.plus({days:1}):t,end:!s&&o.valueOf()>r.valueOf()?r.minus({days:1}):o}}({groupValueStart:i.start,groupValueEnd:i.end,timeZone:n}):i;return{property:o,filter:{operator:"date_is_within",value:{type:"exact",value:m().OQ.toPersistedDateRange(r,n)}}}}function U(e,t){if("alphabet_prefix"===e.type){const o=e.value;return isNaN(parseInt(o))?{operator:"or",filters:[{property:t,filter:{operator:"string_starts_with",value:{type:"exact",value:e.value.toUpperCase()}}},{property:t,filter:{operator:"string_starts_with",value:{type:"exact",value:e.value.toLowerCase()}}}]}:{property:t,filter:{operator:"string_starts_with",value:{type:"exact",value:e.value}}}}return"other"===e.type?{property:t,filter:{operator:"string_has_no_alphabet_prefix"}}:"exact"===e.type?{property:t,filter:{operator:"string_is",value:{type:"exact",value:e.value}}}:void(0,i().t1)(e)}function F(e,t){if("range"===e.type){const{start:o,end:n}=e;return{operator:"and",filters:[{property:t,filter:{operator:"number_greater_than_or_equal_to",value:{type:"exact",value:o}}},{property:t,filter:{operator:"number_less_than",value:{type:"exact",value:n}}}]}}if("out_of_range"===e.type){const{start:o,end:n}=e;return{operator:"or",filters:[{property:t,filter:{operator:"number_less_than",value:{type:"exact",value:o}}},{property:t,filter:{operator:"number_greater_than_or_equal_to",value:{type:"exact",value:n}}}]}}if("unique"===e.type)return{property:t,filter:{operator:"number_equals",value:{type:"exact",value:e.value}}};(0,i().t1)(e)}function N(e,t){const o=e.property,n=null==t?void 0:t[o];if(null!=n&&n.derived_property_record_metadata)return!1;if(n&&d().A0(n))return!1;const r=e.value;return!r.value||("select"===r.type||"multi_select"===r.type||"status"===r.type||"person"===r.type||"checkbox"===r.type||"relation"===r.type||"date"===r.type||"number"===r.type||((0,l().R7)(r)?"exact"===r.value.type:"formula"!==r.type&&"created_by"!==r.type&&"last_edited_by"!==r.type&&"created_time"!==r.type&&"last_edited_time"!==r.type&&"location"!==r.type&&"last_visited_time"!==r.type&&void(0,i().t1)(r.type)))}function V(e){const{schema:t,propertyMapping:o,group:n,block:r,resultCache:a,regExpCache:s,experimentService:c}=e;if(!N(n,t))return{};const d=function(e){const{schema:t,group:o,propertyMapping:n}=e,r=B(o,n),a=t[r];if(!a)return;const s=o.value;return(0,l().LG)(a)&&s.type===a.type&&void 0!==s.value?"person"===a.type?"object"==typeof s.value&&"person"===s.type?{property:r,filter:{operator:"person_does_not_contain",value:{type:"exact",value:s.value}}}:void 0:"relation"===a.type?"relation"===s.type&&(0,l().RA)(s.value)?{property:r,filter:{operator:"relation_does_not_contain",value:{type:"exact",value:s.value.id}}}:"relation"===s.type&&(0,l().t2)(s.value)?{property:r,filter:{operator:"relation_does_not_contain",value:{type:"relative",value:{type:"builtin",variable:s.value.value.variable}}}}:void 0:"location"===a.type?"object"==typeof s.value&&"location"===s.type?{property:r,filter:{operator:"location_is_not",value:{type:"exact",value:s.value.id}}}:void 0:"multi_select"===a.type?"string"==typeof s.value?{property:r,filter:{operator:"enum_does_not_contain",value:{type:"exact",value:s.value}}}:void 0:void("select"!==a.type&&"status"!==a.type&&"checkbox"!==a.type&&"date"!==a.type&&"text"!==a.type&&"title"!==a.type&&"url"!==a.type&&"email"!==a.type&&"phone_number"!==a.type&&"number"!==a.type&&"formula"!==a.type&&"created_by"!==a.type&&"last_edited_by"!==a.type&&"created_time"!==a.type&&"last_edited_time"!==a.type&&"last_visited_time"!==a.type&&(0,i().t1)(a)):void 0}({schema:t,group:n,propertyMapping:o});if(!d)return{};const u=K({...e,property:d.property,filter:d.filter,schema:t,block:r,resultCache:a,regExpCache:s,experimentService:c});return("failsFilter"===u.type||"coercedByFilter"===u.type)&&u.update||{}}function L(e){const{schema:t,propertyMapping:o,group:n,groupBy:i,block:r,userFilterContext:s,experimentService:l}=e,{userTimeZone:c}=s;if(!N(n,t))return{};const d=E({schema:t,group:n,groupBy:i,propertyMapping:o,timeZone:c,experimentService:l});if(!d||!(0,a().aN)(d))return{};const u=K({...e,property:d.property,filter:d.filter,schema:t,block:r});return("failsFilter"===u.type||"coercedByFilter"===u.type)&&u.update||{}}function O(e){const{dateValue:t,timestamp:o,userTimeZone:n}=e;if("date"===t.type)return{...m().hT(o,n),reminder:t.reminder};if("datetime"===t.type)return{...m().CQ(o,n),reminder:t.reminder};if("daterange"===t.type){const e=m().DF(p().Nh(t),n).valueOf(),i=m().DF(p().v3(t),n).valueOf()-e;return{...m().fZ(o,o+i,n),reminder:t.reminder}}if("datetimerange"===t.type){const e=m().Sy(p().C1(t)).valueOf(),i=m().Sy(p().C1(t)).valueOf()-e;return{...m().iC(o,o+i,n),reminder:t.reminder}}(0,i().t1)(t)}const Z={text:function(e){const{filter:t,value:o}=e;if("is_empty"===t.operator)return{type:"text",value:void 0};if("is_not_empty"===t.operator)return;if("string_has_no_alphabet_prefix"===t.operator)return;const n=(t.value.value||"").trim();return"string_is_not"===t.operator||"string_does_not_contain"===t.operator?{type:"text",value:void 0}:"string_is"===t.operator?{type:"text",value:n}:"string_contains"===t.operator||"string_ends_with"===t.operator?{type:"text",value:(o.value||"")+n}:"string_starts_with"===t.operator?{type:"text",value:n+(o.value||"")}:void(0,i().t1)(t.operator)},checkbox:function(e){const{filter:t}=e,o=t.value;return"checkbox_is"===t.operator?{type:"checkbox",value:Boolean(o.value)}:"checkbox_is_not"===t.operator?{type:"checkbox",value:!Boolean(o.value)}:void(0,i().t1)(t.operator)},select:function(e){var t;const{filter:o,propertySchema:n}=e;if("is_empty"===o.operator)return{type:"select",value:void 0};if("is_not_empty"===o.operator)return{type:"select",value:n.options&&n.options.length>0?n.options[0].value:void 0};const r=null===(t=(0,a().mg)(o)[0])||void 0===t?void 0:t.value;return void 0!==r?"enum_is"===o.operator?{type:"select",value:r}:"enum_is_not"===o.operator?{type:"select",value:void 0}:void(0,i().t1)(o.operator):void 0},multi_select:function(e){var t;const{filter:o,propertySchema:n,value:r}=e;if("is_empty"===o.operator)return{type:"multi_select",value:void 0};if("is_not_empty"===o.operator)return{type:"multi_select",value:n.options&&n.options.length>0?[n.options[0].value]:void 0};const s=null===(t=(0,a().qC)(o)[0])||void 0===t?void 0:t.value;if(void 0===s)return;const l=r.value||[];return"enum_contains"===o.operator?{type:"multi_select",value:[...l,s]}:"enum_does_not_contain"===o.operator?{type:"multi_select",value:l.filter((e=>e!==s))}:void(0,i().t1)(o.operator)},status:function(e){const{filter:t,propertySchema:o}=e,n=o.groups??[],r=o.options??[];if("is_empty"===t.operator)return{type:"status",option:void 0,group:void 0};if("is_not_empty"===t.operator)return{type:"status",option:o.options&&o.options.length>0?o.options[0].value:void 0,group:o.groups&&o.groups.length>0?o.groups[0].name:void 0};const s=(0,a().wB)(t);if(0===s.length)return;const l=n.map((e=>{const t=r.filter((t=>{var o;return null===(o=e.optionIds)||void 0===o?void 0:o.includes(t.id)}));return{group:e,groupOptions:t}}));if("status_is"===t.operator){const{type:e,value:t}=s[0];if("is_group"===e){var c;const e=n.findIndex((e=>e.name.toLowerCase()===(null==t?void 0:t.toLowerCase()))),o=e>=0?l[e]:void 0;return{type:"status",group:null==o?void 0:o.group.name,option:null==o||null===(c=o.groupOptions[0])||void 0===c?void 0:c.value}}if("is_option"===e){const e=r.find((e=>e.value===t)),o=e&&n.find((t=>{var o;return null===(o=t.optionIds)||void 0===o?void 0:o.includes(e.id)}));return{type:"status",group:null==o?void 0:o.name,option:null==e?void 0:e.value}}(0,i().t1)(e)}if("status_is_not"===t.operator)return{type:"status",group:void 0,option:void 0};(0,i().t1)(t.operator)},relation:function(e){var t;const{filter:o,value:n,propertySchema:r,relativeVariableResult:s,currentPageInRelatedCollection:l}=e;if("is_empty"===o.operator)return{type:"relation",value:void 0};if("is_not_empty"===o.operator)return;const c=(0,a().YO)(o),d=null===(t=c[0])||void 0===t?void 0:t.type;let u;var p;if("exact"===d)u=null===(p=c[0])||void 0===p?void 0:p.value;else if("relative"===d){var m,f,g;const e=null===(m=r.collection_pointer)||void 0===m?void 0:m.id;if(!e||!s)return;var v;if("builtin"===(null===(f=c[0])||void 0===f?void 0:f.value.type))u=s[e][null===(v=c[0])||void 0===v?void 0:v.value.variable];else"current_page_in_related_collection"===(null===(g=c[0])||void 0===g?void 0:g.value.type)&&(u=l)}if(void 0===u)return;const h=n.value||[];return"relation_contains"===o.operator?{type:"relation",value:[...h,{id:u,table:w().iU,spaceId:0!==h.length?h[0].spaceId:void 0}]}:"relation_does_not_contain"===o.operator?{type:"relation",value:h.filter((e=>e.id!==u))}:void(0,i().t1)(o.operator)},person:function(e){const{filter:t,userFilterContext:o,value:r}=e,{userId:s}=o;if("is_empty"===t.operator)return{type:"person",value:void 0};if("is_not_empty"===t.operator)return s?{type:"person",value:[{table:k().KJ,id:s}]}:void 0;const l=(0,a().R8)(t)[0];if(!l)return;const c=(0,a().l$)({operatorValue:l,userId:s});if(void 0===c)return;const d=r.value||[];return"person_contains"===t.operator?{type:"person",value:[...d,c]}:"person_does_not_contain"===t.operator?{type:"person",value:d.filter((e=>!n().Xy(e,c)))}:void(0,i().t1)(t.operator)},number:function(e){const{filter:t}=e;if("is_empty"===t.operator)return{type:"number",value:void 0};if("is_not_empty"===t.operator)return{type:"number",value:0};const o=t.value.value;return void 0===o||n().i2(o)?void 0:"number_equals"===t.operator||"number_greater_than_or_equal_to"===t.operator||"number_less_than_or_equal_to"===t.operator?{type:"number",value:o}:"number_less_than"===t.operator?{type:"number",value:o-1}:"number_greater_than"===t.operator?{type:"number",value:o+1}:"number_does_not_equal"===t.operator?{type:"number",value:void 0}:void(0,i().t1)(t.operator)},date:function(e){const{filter:t,userFilterContext:o,value:n}=e,{userTimeZone:r,userStartOfWeek:s}=o;if("is_empty"===t.operator)return{type:"date",value:void 0};if("is_not_empty"===t.operator)return{type:"date",value:m().Lg(r)};const l=n.value;if((0,a().TQ)(t)){const e=(0,a().sw)({operatorValue:t.value,userTimeZone:r,userStartOfWeek:s});if(void 0===l){const t=m().Lg(r),o=m().NK(t,r).start.valueOf();return void 0!==e.start&&void 0!==e.end&&o>=e.start&&o<=e.end?{type:"date",value:t}:void 0!==e.start?{type:"date",value:m().hT(e.start,r)}:void 0!==e.end?{type:"date",value:m().hT(e.end,r)}:void 0}const o=m().NK(l,r).start.valueOf();return void 0!==e.end&&o>e.end?{type:"date",value:O({dateValue:l,timestamp:e.end,userTimeZone:r})}:void 0!==e.start&&o<e.start?{type:"date",value:O({dateValue:l,timestamp:e.start,userTimeZone:r})}:void 0}const c=t.value,d=(0,a().og)({operatorValue:c,userTimeZone:r});if(void 0!==d){if("date_is"===t.operator||"date_is_on_or_before"===t.operator||"date_is_on_or_after"===t.operator)return l?{type:"date",value:O({dateValue:l,timestamp:d,userTimeZone:r})}:{type:"date",value:m().hT(d,r)};if("date_is_before"===t.operator){const e=m().Xz({date:d,daysToAdd:-1});return l?{type:"date",value:O({dateValue:l,timestamp:e,userTimeZone:r})}:{type:"date",value:m().hT(e,r)}}if("date_is_after"===t.operator){const e=m().Xz({date:d,daysToAdd:1});return l?{type:"date",value:O({dateValue:l,timestamp:e,userTimeZone:r})}:{type:"date",value:m().hT(e,r)}}(0,i().t1)(t.operator)}},file:function(e){const{filter:t}=e;if("is_empty"===t.operator)return{type:"file",value:void 0};"is_not_empty"!==t.operator&&(0,i().t1)(t)},location:()=>{},verification:function(e){const{filter:t}=e;if("verification_is"===t.operator)return{type:"verification",value:void 0};"verification_is_not"!==t.operator&&(0,i().t1)(t.operator)}};function j(e){const{filter:t,block:o,schema:n,propertyMapping:s,userFilterContext:l,relativeVariableResult:c,currentPageInRelatedCollection:d,getRecordModel:u,intl:p,resultCache:m,regExpCache:f,experimentService:g}=e,{userId:v,userTimeZone:h,userStartOfWeek:b}=l,S=t.filters||[];if(0===S.length)return{type:"passesFilter"};if((0,a().q)({context:{schema:n,userId:v,userTimeZone:h,userStartOfWeek:b,relativeVariableResult:c,currentPageInRelatedCollection:d,intl:p,collectionFeatureGates:(0,r().Q)({experimentService:g,actor:v?{table:k().KJ,id:v}:void 0,spaceId:o.spaceId})},propertyMapping:s,filter:t})({block:o,getRecordModel:u,propertyMapping:s,resultCache:m,regExpCache:f,experimentService:g,formulasModule:void 0}))return{type:"passesFilter"};if("or"===t.operator){const e=S.map((e=>(0,a().aN)(e)?K({intl:p,block:o,schema:n,propertyMapping:s,property:e.property,filter:e.filter,userFilterContext:l,getRecordModel:u,relativeVariableResult:c,currentPageInRelatedCollection:d,resultCache:m,regExpCache:f,experimentService:g}):(0,a().Mm)(e)?{type:"failsFilter"}:(0,a().vA)(e)?j({filter:e,intl:p,block:o,schema:n,propertyMapping:s,userFilterContext:l,relativeVariableResult:c,currentPageInRelatedCollection:d,getRecordModel:u,resultCache:m,regExpCache:f,experimentService:g}):void(0,i().t1)(e)));if(e.some((e=>"passesFilter"===e.type)))return{type:"passesFilter"};const t=e.find((e=>"coercedByFilter"===e.type));return t||(e.find((e=>"failsFilter"===e.type))||{type:"failsFilter"})}const I=[...S];I.reverse();let C="passesFilter";const x={};let T=o;const P=_().omK.tryUntilFound(_().omK.fromMonomorphicFunctionUnsafe((e=>{let{table:t,id:o}=e;if(t===w().iU&&o===T.id)return T}),y().mF.fromMonomorphicFunctionUnsafe((e=>{let{table:t,id:o}=e;if(t===w().iU&&o===T.id)return T.__IM_SORRY__getValue()}))),u);for(const i of I){if((0,a().Mm)(i))continue;const e=(0,a().aN)(i)?K({intl:p,block:T,schema:n,propertyMapping:s,property:i.property,filter:i.filter,userFilterContext:l,getRecordModel:P,relativeVariableResult:c,currentPageInRelatedCollection:d,resultCache:m,regExpCache:f,experimentService:g}):j({filter:i,intl:p,block:T,schema:n,propertyMapping:s,userFilterContext:l,relativeVariableResult:c,currentPageInRelatedCollection:d,getRecordModel:P,resultCache:m,regExpCache:f,experimentService:g});"coercedByFilter"===e.type&&"passesFilter"===C&&(C="coercedByFilter"),"failsFilter"===e.type&&(C="failsFilter"),("coercedByFilter"===e.type||"failsFilter"===e.type&&e.update)&&(Object.assign(x,e.update),T=M(o,x))}return"passesFilter"===C?{type:C}:{type:C,update:x}}function K(e){const{filter:t,block:o,property:n,schema:i,propertyMapping:l,userFilterContext:c,getRecordModel:u,relativeVariableResult:p,currentPageInRelatedCollection:m,intl:f,resultCache:g,regExpCache:v,experimentService:h}=e,{userId:_,userTimeZone:b,userStartOfWeek:y}=c;if((0,a().Y1)({context:{schema:i,userId:_,userTimeZone:b,userStartOfWeek:y,relativeVariableResult:p,currentPageInRelatedCollection:m,intl:f,collectionFeatureGates:(0,r().Q)({experimentService:h,actor:_?{table:k().KJ,id:_}:void 0,spaceId:o.spaceId})},filter:t,property:n,propertyMapping:l,depth:0})({block:o,getRecordModel:u,propertyMapping:l,resultCache:g,regExpCache:v,experimentService:h,formulasModule:void 0}))return{type:"passesFilter"};if((0,a().a_)(t))return{type:"failsFilter"};const S=(null==l?void 0:l[n])??n,w=i[S];if(!w)return{type:"failsFilter"};if(!(0,s().BJ)(w))return{type:"failsFilter"};const I=(0,s().vc)(w.type),C=(0,s().ML)({filterValueType:I,block:o,propertyValue:d().wS(o,S,u),propertySchema:w,getRecordModel:u,collectionRequestContext:{userId:_,userTimeZone:b,intl:f,depth:0,visitedProperties:new Set,resultCache:g,regExpCache:v,experimentService:h,collectionFeatureGates:(0,r().Q)({experimentService:h,actor:_?{table:k().KJ,id:_}:void 0,spaceId:o.spaceId})},skipDefault:!0}),x=(0,Z[I])({filter:t,value:C,propertySchema:w,userFilterContext:c,relativeVariableResult:p,currentPageInRelatedCollection:m});if(void 0===x)return{type:"failsFilter"};return{type:"coercedByFilter",update:{[S]:(0,s().qg)({propertyType:w.type,filterValue:x})}}}function z(e,t){const o=e.name.trim().toLowerCase(),i=t.name.trim().toLowerCase(),r=n().hr(o),a=new RegExp(`^${r}( [0-9]*)?$`,"g"),s=n().hr(i),l=i?new RegExp(`^${s}( [0-9]*)?$`,"g"):void 0;return Boolean(i.match(a)||l&&o.match(l))}function H(e){const{blockProperties:t,oldSchema:o,newSchema:n,typesMatch:i,oldPropertyMapping:r,newPropertyMapping:a}=e,s=Object.keys(o),l=Object.keys(n),c=function(e){const{blockProperties:t,oldSchema:o,newSchema:n}=e,i={},r=null==t?void 0:t.title,a=C().lcG(r),[s]=C().nai(r),{person:[l],date:[c]}=x(n),{person:[d],date:[u]}=x(o);if(l&&(null==t||!t[l])&&!d&&a.length>0){const e=Array.from(new Set(a));i[l]=(0,h().Z)(e.map((e=>C().YCD(C().tEo(e)))),(()=>T))}return!c||null!=t&&t[c]||u||!s||(i[c]=[C().YCD(C().pZr(s))]),i}({blockProperties:t,oldSchema:o,newSchema:n}),d={propertyUpdate:c,newSchema:n},p=["relation","auto_increment_id","verification"];for(const m of s){const e=o[m],s=null==t?void 0:t[m];if(e&&!p.includes(e.type)){if(i){const e=u().aQ.derivePropertyUri(m,r),o=e?null==a?void 0:a[e]:void 0;if(o&&o!==m){d.propertyUpdate[o]=(null==t?void 0:t[m])||null,d.propertyUpdate[m]=null;continue}}if(s){const i=l.find((e=>m===e))||l.find((t=>{const o=n[t];if(void 0!==o&&e.type===o.type)return z(e,o)}));if(i&&d.propertyUpdate)i!==m&&(d.propertyUpdate[i]=t[m]||null,d.propertyUpdate[m]=null);else{const e=v().Il(),n=o[m];d.newSchema={...d.newSchema,[e]:n},d.propertyUpdate&&(d.propertyUpdate[e]=t[m]||null,d.propertyUpdate[m]=null)}}}}return d}function q(e){const{block:t,schema:o,property:r,oldValue:a,newValue:s}=e;if(void 0===a.value)return{};if(void 0===s.value)return{};const c=t.getProperties();if(!c)return{};const u=c[r];if(!u)return{};const p=o[r];if(!p)return{};if(!(0,l().LG)(p))return{};if("status"===p.type||"select"===p.type||"multi_select"===p.type||"checkbox"===p.type)return function(e){const{propertySchema:t,property:o,oldValue:n,newValue:r,propertyValue:a}=e;if(void 0===n.value)return{};if(void 0===r.value)return{};if(!(0,l().LG)(t))return{};if("select"===t.type){if("select"!==n.type||"select"!==r.type)return{};if(void 0===r.value)return{};const e=d().Ak(a);return 0===e.length&&void 0===n.value||e.some((e=>(e||"").trim().toLowerCase()===(n.value||"").trim().toLowerCase()))?{[o]:d().O2(r.value)}:{}}if("multi_select"===t.type){if("multi_select"!==n.type||"multi_select"!==r.type)return{};if(void 0===r.value)return{};const e=d().Ak(a);if(!e.some((e=>e.trim().toLowerCase()===(n.value||"").trim().toLowerCase())))return{};const t=r.value,i=e.map((e=>e.trim().toLowerCase()===(n.value||"").trim().toLowerCase()?t:e));return{[o]:d().zq(i)}}if("status"===t.type){const e=t.groups??[],i=t.options??[];if("checkbox"===n.type&&"status"===r.type){if(d().Ml(a)!==n.value)return{};let t;if("by_group"===r.value.type){const o=r.value.group,n=e.find((e=>e.name===o)),a=i.find((e=>{var t;return e.id===(null==n||null===(t=n.optionIds)||void 0===t?void 0:t[0])}));t=null==a?void 0:a.value}else t=r.value.option;if(t)return{[o]:d().Is(t)}}var s;return"status"===n.type&&"status"===r.type?"by_option"!==n.value.type||"by_option"!==r.value.type||(null===(s=d().Ak(a))||void 0===s?void 0:s[0])!==n.value.option?{}:{[o]:d().Is(r.value.option)}:{}}if("checkbox"===t.type)return"status"!==n.type||"checkbox"!==r.type||"by_option"!==n.value.type?{}:d().Ak(a).includes(n.value.option)?{[o]:d()._I(r.value)}:{};(0,i().t1)(t)}({propertySchema:p,property:r,propertyValue:u,oldValue:a,newValue:s});if("person"===p.type){if("person"!==a.type||"person"!==s.type)return{};if(void 0===a.value)return{};if(void 0===s.value)return{};const e=s.value,o=a.value,i=_().kk5.fromBlock(t),l=d().DW({textValue:u,propertySchema:p,blockCreatorPointer:i.getCreatedByPointer()});if(!l.some((e=>n().Xy(e,o))))return{};const c=l.map((t=>n().Xy(t,o)?e:t));return{[r]:d().C1(c)}}if("relation"===p.type){if("relation"!==a.type||"relation"!==s.type||void 0===a.value||void 0===s.value)return{};if((0,l().t2)(a.value)||(0,l().t2)(s.value))return{};const e=s.value,t=a.value,o=d().rq(u);if(!o.some((e=>(0,S().qo)(e,t))))return{};const n=o.map((o=>(0,S().qo)(o,t)?e:o));return{[r]:d().ow(n)}}if((0,l().HB)(p.type)){if(a.type!==p.type||s.type!==p.type||void 0===a.value||void 0===s.value||"exact"!==a.value.type||"exact"!==s.value.type)return{};return C().QaF(u)!==a.value.value?{}:{[r]:(0,C().TPx)(s.value.value)}}if("date"===p.type||"number"===p.type||"formula"===p.type||"created_by"===p.type||"last_edited_by"===p.type||"created_time"===p.type||"last_edited_time"===p.type||"location"===p.type||"last_visited_time"===p.type)return{};(0,i().t1)(p.type)}function W(e){const{block:t,schema:o,property:n,groupBy:i,value:r,timeZone:s,intl:c,getRecordModel:d,resultCache:u,regExpCache:p,experimentService:f,collectionFeatureGates:g}=e,v=o[n];if(!v||!(0,l().LG)(v)||t.is_template)return!1;const h=E({schema:o,propertyMapping:void 0,group:{property:n,value:r},groupBy:i,timeZone:s,experimentService:f});if(!h)return!1;return(0,a().q)({filter:{operator:"and",filters:[h]},propertyMapping:void 0,context:{schema:o,intl:c,userId:void 0,userTimeZone:"UTC",userStartOfWeek:(0,m().aN)(),relativeVariableResult:void 0,currentPageInRelatedCollection:void 0,collectionFeatureGates:g}})({block:t,getRecordModel:d,propertyMapping:void 0,resultCache:u,regExpCache:p,experimentService:f,formulasModule:void 0})}const G={Todo:"To-do","To-do":"To-do","To do":"To-do","Not started":"To-do",Backlog:"To-do",Incomplete:"To-do",Waiting:"To-do","On hold":"To-do",Later:"To-do",Blocked:"To-do","In progress":"In progress",Building:"In progress",Designing:"In progress",Research:"In progress",Scoping:"In progress",Planning:"In progress","Needs review":"In progress",Reviewed:"In progress",Review:"In progress",Pending:"In progress",Recurring:"In progress","Review needed":"In progress","Edits needed":"In progress",Editing:"In progress",Complete:"Complete",Completed:"Complete",Done:"Complete",Finished:"Complete",Archive:"Complete",Archived:"Complete",Deleted:"Complete",Published:"Complete",Reverted:"Complete"};function $(e,t,o){var i;const r=(0,c().I4)(e,o),a=r.groups??[],s=r.options??[],l=n().Cw(G,((e,t)=>t.toLowerCase())),d=new Set,u=new Set;for(const n of t){const e=s.findIndex((e=>e.value.toLowerCase()===n.value.toLowerCase()));if(e>-1){const t=s[e];if(!d.has(t.id)){u.add(n.id),d.add(t.id),s[e]={...n,id:t.id};continue}}const t=l[n.value.toLowerCase()],o=a.find((e=>e.name===t));var p;if(o)null===(p=o.optionIds)||void 0===p||p.push(n.id),u.add(n.id)}for(const[n,c]of a.entries()){var m;const e=null===(m=c.optionIds)||void 0===m?void 0:m.some((e=>u.has(e)));c.optionIds=(c.optionIds??[]).filter((t=>!(!u.has(t)&&!d.has(t))||!e))}null==a||null===(i=a[0].optionIds)||void 0===i||i.push(...t.filter((e=>!u.has(e.id))).map((e=>e.id)));const f=[...s,...t],g=[];for(const n of a)for(const e of n.optionIds??[]){const t=f.find((t=>t.id===e));t&&g.push(t)}return{type:"status",name:e,groups:a,options:g}}},863112:(e,t,o)=>{o.d(t,{Hb:()=>n,lm:()=>r,wG:()=>i});const n={text:!0,title:!0,select:!0,multi_select:!0,relation:!0,date:!0,person:!0,file:!0,number:!0,checkbox:!0,email:!0,url:!0,phone_number:!0,created_by:!1,last_edited_by:!1,last_edited_time:!1,created_time:!1,status:!1,auto_increment_id:!1,button:!1,formula:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1};function i(){return[{type:"space_permission",role:"reader",unlisted_timestamp:Date.now()}]}function r(e,t,o){return void 0===e||t||o?"none":e}},421551:(e,t,o)=>{o.d(t,{d:()=>s,n:()=>a});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(30005);var n=()=>o(109477),i=()=>o(305580);function r(e){let{format:t,schema:o,visibilityLevels:r}=e;const a=(0,i().i)(t,o,void 0,n().j5.Collection);if(null==a||!a.collection_page_sections)return[];const s=new Set(r);return a.collection_page_sections.filter((e=>s.has(e.visibility)))}function a(e){let{format:t,schema:o,visibilityLevels:n}=e;return r({format:t,schema:o,visibilityLevels:n}).filter((e=>o[e.section]))}function s(e){const{format:t,schema:o,visibilityLevels:n}=e,i=r({format:t,schema:o,visibilityLevels:n}),a=[];return i.forEach((e=>{o[e.section]&&a.push(e.section)})),a}},520509:(e,t,o)=>{o.d(t,{Ct:()=>B,WU:()=>P,c_:()=>E,yf:()=>D});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(30005),o(241792),o(228244);var n=()=>o(513670),i=()=>o(839002),r=()=>o(696459),a=()=>o(332143),s=()=>o(455947),l=()=>o(226413),c=()=>o(532850),d=()=>o(570270),u=()=>o(889646),p=()=>o(92960),m=()=>o(942275),f=()=>o(530980),g=()=>o(994883),v=()=>o(617872),h=()=>o(251887),_=()=>o(217465),b=()=>o(233878),y=()=>o(827370),S=()=>o(480425),w=()=>o(396136),k=()=>o(752778),I=()=>o(271839);async function C(e){let{record:t,dependencies:n,blockIdToAssociatedCollectionModelCache:i,getRecordModel:r,loadRecordModel:a,userTimeZone:s,intl:l,formulaTimeoutMs:d,logFormulaStatsFn:g,logFormulaTimeoutFn:v,checkCancellation:h,dependencyCache:_,resultCache:b,regExpCache:C,experimentService:x,collectionFeatureGates:T,userId:M}=e;h&&h();const P=[],A=t.value;if(A.parent_table&&A.parent_id&&P.push(y().dr.getParentPointerFromRecordWithParent(A)),t.table!==w().iU||!t.value)return P;const R=t.value,B=f().kk5.fromBlock(R),E=B.getCollectionPointer();E&&P.push(E);const U=i[B.id]??await(0,m().Rd)({block:B,loadRecordModel:a});if(!U)return P;B.id in i||(i[B.id]=U);const F=n.get(U.id);if(null==F||!F.size)return P;const N=[...(null==F?void 0:F.get("title"))??[],...(null==F?void 0:F.get("text"))??[]].map((e=>{let{property:t}=e;return t}));for(const o of N){var V;const e=null===(V=R.properties)||void 0===V?void 0:V[o];e&&P.push(...(0,S().Og)(e))}(null==F?void 0:F.get("created_by"))&&R.created_by_table&&R.created_by_id&&P.push({table:R.created_by_table,id:R.created_by_id,spaceId:R.space_id});(null==F?void 0:F.get("last_edited_by"))&&R.last_edited_by_table&&R.last_edited_by_id&&P.push({table:R.last_edited_by_table,id:R.last_edited_by_id,spaceId:R.space_id});(null==F?void 0:F.get("auto_increment_id"))&&P.push((0,u().We)({spaceId:R.space_id,parentTable:k().vF,parentId:U.id}));const L=null==F?void 0:F.get("last_visited_time");if(M&&L){const e=(0,I().Pv)({parent_id:R.id,user_id:M});P.push({table:I().UI,id:e,spaceId:R.space_id})}if(!(0,c().Gk)(R))return P;const O=F.get("relation");if(O)for(const o of O){const e=(0,c().wS)(R,o.property),t=(0,c().LL)(e);for(const n of t)P.push({table:w().iU,id:n,spaceId:o.collectionPointer.spaceId})}const Z=F.get("person");if(Z)for(const o of Z){const e=(0,c().wS)(R,o.property),t=(0,c().DW)({textValue:e,propertySchema:o.propertySchema,bypassLimit:!0,blockCreatorPointer:B.getCreatedByPointer()});for(const o of t)P.push(o)}const j=F.get("formula");if(j&&s&&l){const e=await Promise.all([o.e(94556),o.e(78701),o.e(38804),o.e(92341),o.e(39447)]).then(o.bind(o,22183));for(const t of j){var K;const o=performance.now();h&&h();const n=t.propertySchema;if(void 0===n.version||void 0===n.formula2)return P;let c;const u=e.getFormula2ResultCache({resultCache:b,blockId:R.id,property:t.property});if(void 0!==u)c={value:e.formulaValueToCollectionFormulaValue(u)};else{const o={values:[{kind:p().FormulaContextValueKind.ThisRow,value:{type:"block",value:{table:"block",id:R.id}}}],handleDataRequest:D(r,a,x,T,d,v,g,h,_,b,C,i),intl:l,userTimeZone:s,depth:0,visitedProperties:new Set,formulaTimeoutTimestampMs:d&&Date.now()+d,logFormulaTimeoutFn:v,resultCache:b,regExpCache:C,experimentService:x,spaceId:R.space_id,collectionFeatureGates:T},u=await e.executeFormulaAsync(n.formula2.code,o);"value"in u&&e.setFormula2ResultCache({resultCache:b,blockId:R.id,property:t.property,value:u.value}),c=e.mapExecuteFormulaResult(u),e.setFormula2Thunk(f().kk5.fromBlock(R),U,t.property,(()=>c))}null==g||g({executionTimeMs:performance.now()-o,cachedCount:u?1:0,uncachedCount:u?0:1,error:null===(K=c.error)||void 0===K?void 0:K.type})}}return P}async function x(e){return T(e,new(v().Z))}async function T(e,t){var i;const{collectionPointer:r,schema:a,property:s,loadRecordModel:c,dependencyCache:d}=e,u=a[s];if(!u)return[];const p=null===(i=d.get(r.id))||void 0===i?void 0:i.get(s);if(p)return p;const m={collectionPointer:r,property:s,propertySchema:u};if(t.has(m))return[m];if(t.add(m),u.derived_property_record_metadata){const e=u.derived_property_record_metadata.pointer_property_uri,t=a[e];if(t){return[{collectionPointer:r,property:e,propertySchema:t}]}}else{if("relation"===u.type){const e=(0,l().j0)(u);return e&&await c(e),[]}if("formula"===u.type){const e=await Promise.all([o.e(94556),o.e(78701),o.e(38804),o.e(92341),o.e(39447)]).then(o.bind(o,22183)),i=n().oA(e.getFormulaDependencies(u).map((e=>{const t=a[e];if(t){return{collectionPointer:r,property:e,propertySchema:t}}}))),l=await Promise.all(i.map((e=>{let{property:o}=e;return T({collectionPointer:r,schema:a,property:o,loadRecordModel:c,dependencyCache:d},t)}))),p=n().mN([...i,...n().xH(l)],(e=>{let{collectionPointer:t,property:o}=e;return`${t.id}${o}`}));return M({dependencyCache:d,collectionPointer:r,property:s,result:p}),p}if("rollup"===u.type&&u.relation_property&&u.target_property){const e=a[u.relation_property];if(!e||"relation"!==e.type)return[];const o=(0,l().j0)(e);if(!o)return[];const i=await c(o),p=(null==i?void 0:i.getNormalizedSchema())??{},m=[],f={collectionPointer:r,property:u.relation_property,propertySchema:e};if(m.push(f),u.target_property_type){const e=p[u.target_property];if(e&&u.target_property_type===e.type){const t={collectionPointer:{table:k().vF,id:o.id,spaceId:null==i?void 0:i.space_id},property:u.target_property,propertySchema:e};m.push(t)}}const g=await T({collectionPointer:o,schema:p,property:u.target_property,loadRecordModel:c,dependencyCache:d},t);m.push(...g);const v=n().mN(m,(e=>{let{collectionPointer:t,property:o}=e;return`${t.id}${o}`}));return M({dependencyCache:d,collectionPointer:r,property:s,result:v}),v}}return[]}function M(e){const{dependencyCache:t,collectionPointer:o,property:n,result:i}=e,r=t.get(o.id);if(void 0!==r)r.set(n,i);else{const e=new Map;e.set(n,i),t.set(o.id,e)}}function P(e){const{filter:t,propertyIdSet:o}=e;if((0,s().aN)(t))o.add(t.property);else if((0,s().vA)(t)){const e=t.filters||[];for(const t of e)P({filter:t,propertyIdSet:o})}}function A(e){const{loader:t,schema:o,loadAllProperties:i,searchProperties:r}=e,s=new Set,l=new Set;if(t){var c;if(null!=t&&null!==(c=t.upwardTraversalRelation)&&void 0!==c&&c.property&&s.add(t.upwardTraversalRelation.property),(t.filter||t.filterToComputeDependencies)&&P({propertyIdSet:s,filter:t.filterToComputeDependencies??t.filter}),t.sort)for(const n of t.sort){var d;"formula"===(null===(d=o[n.property])||void 0===d?void 0:d.type)?l.add(n.property):s.add(n.property)}const e=t.reducers||{};n().Ed(e,(e=>{if(e){"groups"!==e.type&&e.filter&&P({propertyIdSet:s,filter:e.filter});const t=[];if("aggregation"===e.type&&(0,a().pK)(e.aggregation)&&t.push(e.aggregation.property),"groups"===e.type&&(t.push(e.groupBy.property),e.subGroup&&t.push(e.subGroup.groupBy.property),e.aggregation&&("intersection_and_independent"===e.aggregation.type||"intersection"===e.aggregation.type)&&(0,a().pK)(e.aggregation.intersectionAggregation)&&t.push(e.aggregation.intersectionAggregation.property),e.aggregation&&("intersection_and_independent"===e.aggregation.type||"independent"===e.aggregation.type)&&e.aggregation.groupAggregation&&(0,a().pK)(e.aggregation.groupAggregation)&&t.push(e.aggregation.groupAggregation.property),e.aggregation&&("intersection_and_independent"===e.aggregation.type||"independent"===e.aggregation.type)&&e.aggregation.subGroupAggregation&&(0,a().pK)(e.aggregation.subGroupAggregation)&&t.push(e.aggregation.subGroupAggregation.property)),0===t.length)return;for(const e of t){const t=o[e];"formula"===(null==t?void 0:t.type)?l.add(e):s.add(e)}}}))}const u=function(e){return Boolean(null==e?void 0:e.searchQuery)||Boolean(Object.values((null==e?void 0:e.reducers)||{}).some((e=>Boolean("results"===e.type&&e.searchQuery))))}(t);if(u)for(const n of r??Object.keys(o)){const e=o[n];if(e){if("rollup"===e.type||"formula"===e.type)continue;s.add(n)}}if(i)for(const n of Object.keys(o))l.add(n);for(const n of l)s.has(n)&&l.delete(n);return{filterStagePropertyIdsSet:s,incrementStagePropertyIdsSet:l}}function R(e){return"property"in e}async function B(e){const{collectionValueOrModel:t,loader:o,recordMap:n,loadRecordModel:i,loadAllProperties:r,apiSorts:a,dependencyCache:s,searchProperties:l}=e,c=f().kk5.fromValue(k().vF,t),u=c.getNormalizedSchema(),p=c.getPropertyMapping(),m=a?[...a.filter(R)]:[],{filterStagePropertyIdsSet:h,incrementStagePropertyIdsSet:_}=A({loader:o,schema:u,loadAllProperties:r,searchProperties:l}),b=new Set([...h,..._,...m.map((e=>e.property))]),y=d().aQ.fromViewPropertyIds(Array.from(b),p);return(await async function(e){const{recordMap:t,loadRecordModel:o,collectionModelOrValue:n,properties:i,schema:r,dependencyCache:a}=e,s=g().s.throughRecordMap(t,o),l=new(v().Z),c=f().kk5.fromValue(k().vF,n).pointer;return await Promise.all(i.map((async e=>{const t=r[e];if(t){const o={collectionPointer:c,property:e,propertySchema:t};l.add(o);const n=await x({collectionPointer:c,schema:r,property:e,loadRecordModel:s,dependencyCache:a});for(const e of n)l.add(e)}}))),l}({recordMap:n,loadRecordModel:i,collectionModelOrValue:c,properties:y,schema:u,dependencyCache:s})).valuesArray()}async function E(e){const{blocks:t,recordMap:o,dependencies:n,blockIdToAssociatedCollectionModelCache:i,loadRecordModel:r,userTimeZone:a,intl:s,formulaTimeoutMs:l,logFormulaStatsFn:c,logFormulaTimeoutFn:d,checkCancellation:u,dependencyCache:p,resultCache:m,regExpCache:v,experimentService:_,collectionFeatureGates:y,userId:S}=e;u&&u();const w=[];for(const g of t){const e=f().kk5.fromBlock(g),t=e.pointer;w.push(t),o.setModel(e.pointer,e)}const k=new Map,I=new Map;for(const f of n){const e=f.collectionPointer.id,t="formula"===f.propertySchema.type?k:I;let o=t.get(e);void 0===o&&(o=new Map,t.set(e,o));const n=o.get(f.propertySchema.type);void 0===n?o.set(f.propertySchema.type,[f]):n.push(f)}const x=g().s.throughRecordMap(o,r);for(const g of[I,k])await(0,b().aV)({recordPointers:w,recurFn:async(e,t,n)=>await C({record:h().mk.create(e.table,e.__IM_SORRY__getValue()),dependencies:g,dependencyCache:p,blockIdToAssociatedCollectionModelCache:i,getRecordModel:f().omK.fromRecordMap(o),loadRecordModel:x,intl:s,userTimeZone:a,formulaTimeoutMs:l,logFormulaTimeoutFn:d,logFormulaStatsFn:c,checkCancellation:u,resultCache:m,regExpCache:v,experimentService:_,collectionFeatureGates:y,userId:S}),loadRecordModel:x,recordMap:o})}function D(e,t,o,a,s,l,c,d,u,p,m,h){return b=>{var S;d&&d();const w=[],k=_().RecordMap.create();if(null===(S=b.recordPointers)||void 0===S||S.forEach((t=>{const o=e(t);void 0!==o?k.setModel(t,o):w.push(t)})),0===w.length&&(void 0===b.collectionBlockProperties||0===b.collectionBlockProperties.length))return{getRecordModel:f().omK.fromRecordMap(k)};const I=void 0!==b.collectionBlockProperties?function(e){const t=[];for(const o of e){const e=t.find((e=>(0,y().qo)(e.collectionPointer,o.collectionPointer)&&e.property===o.property));void 0!==e?e.blockPointers.push(...o.blockPointers):t.push({...o,blockPointers:[...o.blockPointers]})}return t}(b.collectionBlockProperties):[],C=u??new Map,T=p??new Map,M=m??new Map,P=h??{},A=g().s.throughRecordMap(k,t);return new Promise((async(e,t)=>{try{const t=new(v().Z)((e=>`${e.id}${e.table}`));t.add(...w),I.forEach((e=>{let{blockPointers:o,collectionPointer:n}=e;t.add(...o),t.add(n)})),await(0,i().qd)(t.valuesArray(),500,(async e=>{await A(e)})),await(0,i().qd)(I,5,(async e=>{let{blockPointers:t,collectionPointer:i,schema:u,property:p}=e;const m=await x({collectionPointer:i,schema:u,property:p,loadRecordModel:A,dependencyCache:C}),f=n().mN(t,(e=>e.id)).map((e=>k.getModel(e))).filter(r().$K),g=k.getModel(i);g&&f.forEach((e=>{P[e.id]=g})),await E({blocks:f,dependencies:m,blockIdToAssociatedCollectionModelCache:P,recordMap:k,loadRecordModel:A,formulaTimeoutMs:s,logFormulaTimeoutFn:l,logFormulaStatsFn:c,checkCancellation:d,dependencyCache:C,resultCache:T,regExpCache:M,experimentService:o,collectionFeatureGates:a,userId:void 0})})),e({getRecordModel:f().omK.fromRecordMap(k)})}catch(u){t(u)}}))}}},890684:(e,t,o)=>{o.d(t,{P:()=>i});var n=()=>o(513670);function i(e,t){return t.getAlive()!==e.getAlive()||!n().Xy(t.getText(),e.getText())||!n().Xy(t.getContent(),e.getContent())}},871379:(e,t,o)=>{o.d(t,{IC:()=>c,bM:()=>u,fz:()=>d,o0:()=>p});o(670560),o(267602),o(653476),o(749411);var n=()=>o(696459),i=()=>o(396136),r=()=>o(696056),a=()=>o(752778),s=()=>o(139978),l=()=>o(255933);function c(e){const{targetTriggerType:t,targetParentPointer:o,targetSpaceId:i}=e;return"notification_event"===t||"event"===t?[{pointer:o,minimumRequiredRole:"editor"},{pointer:{id:i,table:l().bx},minimumRequiredRole:"read_and_write"}]:"recurrence"===t||"button"===t||"chat"===t?[{pointer:o,minimumRequiredRole:"read_and_write"}]:void(0,n().t1)(t)}function d(e){const{automationValue:t,actionValues:o}=e,i=o.flatMap((e=>p(e))).filter(n().$K);return"notification_event"===t.trigger.type||"event"===t.trigger.type?(i.push({pointer:{id:t.parent_id,table:t.parent_table,spaceId:t.space_id},minimumRequiredRole:"editor"},{pointer:{id:t.space_id,table:l().bx},minimumRequiredRole:"read_and_write"}),(0,n().$K)(t.trigger.event.source)&&(t.trigger.event.source.type===s().np||t.trigger.event.source.type===a().vF?i.push({pointer:t.trigger.event.source.pointer,minimumRequiredRole:"reader"}):"filter"===t.trigger.event.source.type||(0,n().t1)(t.trigger.event.source))):"recurrence"===t.trigger.type||"button"===t.trigger.type?i.push({pointer:{id:t.parent_id,table:t.parent_table,spaceId:t.space_id},minimumRequiredRole:"read_and_write"}):(0,n().t1)(t.trigger),i}function u(e){return"notification_event"===e.trigger.type||"event"===e.trigger.type?[{pointer:{id:e.parent_id,table:e.parent_table,spaceId:e.space_id},minimumRequiredRole:"editor"},{pointer:{id:e.space_id,table:l().bx},minimumRequiredRole:"read_and_write"}]:"recurrence"===e.trigger.type||"button"===e.trigger.type?[{pointer:{id:e.parent_id,table:e.parent_table,spaceId:e.space_id},minimumRequiredRole:"read_and_write"}]:void(0,n().t1)(e.trigger)}function p(e){if("create_page"===e.type){var t,o;const n=[];var a,s;if(null!==(t=e.config)&&void 0!==t&&t.collection)n.push({pointer:null===(a=e.config)||void 0===a?void 0:a.collection,minimumRequiredRole:"content_only_editor"});if(null!==(o=e.config)&&void 0!==o&&o.template_page_id)n.push({pointer:{id:null===(s=e.config)||void 0===s?void 0:s.template_page_id,table:i().iU,spaceId:e.space_id},minimumRequiredRole:"reader"});return n}var l,c;if("query_collection"===e.type){if(null!==(l=e.config)&&void 0!==l&&l.collection)return[{pointer:null===(c=e.config)||void 0===c?void 0:c.collection,minimumRequiredRole:"content_only_editor"}]}else if("update_pages"===e.type){var d;const t=null===(d=e.config)||void 0===d?void 0:d.target;if(!t)return[];if("collection"===t.type)return[{pointer:t.collection,minimumRequiredRole:"content_only_editor"}];if("page"===t.type)return[{pointer:t.page,minimumRequiredRole:"content_only_editor"}];if("variable"===t.type)return[];(0,n().t1)(t)}else if("open_page"===e.type){var u;const t=null===(u=e.config)||void 0===u?void 0:u.target;if(!t)return[];if("page"===t.type)return[{pointer:t.page,minimumRequiredRole:"reader"}];if("variable"===t.type||"url"===t.type)return[];(0,n().t1)(t)}else if("slack_notification"===e.type){var p;if(null!==(p=e.config)&&void 0!==p&&p.external_bot_id)return[{pointer:{id:e.config.external_bot_id,table:r().cZ},minimumRequiredRole:"reader"}]}else{if("duplicate_blocks"===e.type)return[];if("modal_confirmation"===e.type)return[];if("complete_sprint"===e.type){var m,f;const t=[];return null!==(m=e.config)&&void 0!==m&&m.sprint_collection&&t.push({pointer:e.config.sprint_collection,minimumRequiredRole:"editor"}),null!==(f=e.config)&&void 0!==f&&f.task_collection&&t.push({pointer:e.config.task_collection,minimumRequiredRole:"editor"}),t}if("assistant_basic"===e.type)return[];if("send_in_app_notification"===e.type)return[];if("define_variables"===e.type)return[];if("http_request"===e.type)return[];if("send_gmail_notification"===e.type){var g;const t=[];return null!==(g=e.config)&&void 0!==g&&g.external_bot_id&&t.push({pointer:{id:e.config.external_bot_id,table:r().cZ},minimumRequiredRole:"editor"}),t}if("publish_site"===e.type){var v;const t=[],o=null===(v=e.config)||void 0===v?void 0:v.target;return o?("page"===o.type&&t.push({pointer:o.page,minimumRequiredRole:"editor"}),t):[]}(0,n().t1)(e)}}},195926:(e,t,o)=>{o.d(t,{Fd:()=>d,G_:()=>c,UE:()=>u,cW:()=>p,fV:()=>r,ze:()=>s});o(667294);var n=()=>o(788860),i=o(785893);const r="v9",a="https://www.notion.so/Cookie-Notice-bc186044eed5488a8387a9e94b14e58c",s=(0,n().vU)({cookieSettingsLabel:{id:"cookieConsent.settings.label",defaultMessage:"Cookie settings"},customizeCookiesHeader:{id:"cookieConsent.customizeCookies.header",defaultMessage:"Customize cookies"},trackingTypeNecessaryTitle:{id:"cookieConsent.trackingTypeNecessary.title",defaultMessage:"Strictly necessary"},trackingTypeNecessaryCaption:{id:"cookieConsent.trackingTypeNecessary.caption",defaultMessage:"Essential for the site to function. Always On."},trackingTypePreferenceTitle:{id:"cookieConsent.trackingTypePreference.title",defaultMessage:"Functional"},trackingTypePreferenceCaption:{id:"cookieConsent.trackingTypePreference.caption",defaultMessage:"Used to remember preference selections and provide enhanced features."},trackingTypePerformanceTitle:{id:"cookieConsent.trackingTypePerformance.title",defaultMessage:"Analytics"},trackingTypePerformanceCaption:{id:"cookieConsent.trackingTypePerformance.caption",defaultMessage:"Used to measure usage and improve your experience."},trackingTypeTargetingTitle:{id:"cookieConsent.trackingTypeTargeting.title",defaultMessage:"Marketing"},trackingTypeTargetingCaption:{id:"cookieConsent.trackingTypeTargeting.caption",defaultMessage:"Used for targeted advertising."},trackingTypeTargetingSubtitleiOS:{id:"cookieConsent.trackingTypeTargeting.subtitleiOS",defaultMessage:"Not collected nor used within the iOS app"},cookieDismissButtonLabel:{id:"cookieConsent.dismissButton.label",defaultMessage:"Done"},acceptAllButtonLabel:{id:"cookieConsent.acceptAllButton.label",defaultMessage:"Accept all"},rejectAllButtonLabel:{id:"cookieConsent.rejectAllButton.label",defaultMessage:"Reject all"},moreOptionsButtonLabel:{id:"cookieConsent.moreOptionsButton.label",defaultMessage:"More options"},reloadAfterSaveMessage:{id:"cookieConsent.reloadAfterSave.message",defaultMessage:"Notion will now reload to apply your cookie preferences. Click okay to continue."}}),l=(0,n().vU)({banner:{id:"cookieConsent.bannerDisclaimer.message",defaultMessage:"Notion uses cookies to offer you a better experience. See<cookielink>Cookie Notice</cookielink>for details."},settings:{id:"cookieConsent.settingsDisclaimer.message",defaultMessage:"Customize cookies. See<cookielink>Cookie Notice</cookielink>for details."},snackbar:{id:"cookieConsent.snackbarDisclaimer.message",defaultMessage:"Notion uses cookies. See<cookielink>Cookie Notice</cookielink>for details."}});function c(e,t){switch(e){case"necessary":return{title:s.trackingTypeNecessaryTitle,caption:s.trackingTypeNecessaryCaption};case"preference":return{title:s.trackingTypePreferenceTitle,caption:s.trackingTypePreferenceCaption};case"performance":return{title:s.trackingTypePerformanceTitle,caption:s.trackingTypePerformanceCaption};case"targeting":const e=t?s.trackingTypeTargetingSubtitleiOS:void 0;return{title:s.trackingTypeTargetingTitle,subtitle:e,caption:s.trackingTypeTargetingCaption}}}function d(e,t){return(0,i.jsx)(n()._H,{...l[t],values:{cookielink:t=>(0,i.jsxs)(i.Fragment,{children:["Â ",e(a,t),"Â "]})}})}const u={necessary:!0,performance:!0,preference:!0,targeting:!0},p={necessary:!0,performance:!1,preference:!1,targeting:!1}},443510:(e,t,o)=>{function n(e,t){if(t(e))return e;let o,n=0;do{n++,o=`${e} ${n}`}while(!t(o));return o}o.d(t,{Z:()=>n})},677539:(e,t,o)=>{o.d(t,{Bp:()=>m,yu:()=>g});o(821057),o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624);var n=()=>o(730120),i=()=>o(855741),r=()=>o(696459),a=()=>o(552221),s=()=>o(532850),l=()=>o(803021),c=()=>o(874459),d=()=>o(712198),u=()=>o(481529),p=()=>o(933868);const m=["consume_gap","preserve_gap"];class f{constructor(){this.operations=[],this.numDependenciesUpdated=0,this.numCouldNotUpdateDueToPermissions=0}push(e){this.operations.push(...e.operations),this.numDependenciesUpdated+=e.numDependenciesUpdated,this.numCouldNotUpdateDueToPermissions+=e.numCouldNotUpdateDueToPermissions}pushUpdatedBlockDates(e,t){for(const[n,i]of e)this.operations.push(...t.toOperations(i,{id:n,table:o(396136).iU}));this.numDependenciesUpdated+=e.size}}function g(e){const{block:t,options:o,blockingPropertyId:s,blockedByPropertyId:l,timeZone:c,locale:d,collectionSchema:u,getRecordRole:p,getRecordValue:m,dateProperty:g,endDateProperty:b,includeDeletedRelations:y,includeInvalidCollection:S,includeNoAccess:I}=e,C=function(e){return t=>{let{oldDateValue:o,newDateValue:i,dependencyDateValue:a}=t;const s=Boolean(e.avoid_weekends),l=e.mode;if(!l)return;const c=a.getStart(),d=i.getStart(),u=i.getEnd();let p;if("consume_gap"===l){if(u.valueOf()>=c.valueOf()){if(s)return k({dateShiftMode:l,newDateData:n().Xp.fromDateTimes(d,u),dependencyDateValue:a});p=u.plus(a.nudgeForDate("start"))}}else if("preserve_gap"===l)if(o){const e=o.getStart(),t=o.getEnd();if(s)return k({dateShiftMode:l,oldDateData:n().Xp.fromDateTimes(e,t),newDateData:n().Xp.fromDateTimes(d,u),dependencyDateValue:a});const i=u.diff(t);p=c.plus(i)}else u.valueOf()>=c.valueOf()&&(p=u.plus(a.nudgeForDate("start")));else(0,r().t1)(l);return p&&a.changeBoundary({type:"start",newValue:p})}}(o),M=function(e){return t=>{let{oldDateValue:o,newDateValue:i,dependencyDateValue:a}=t;const s=Boolean(e.avoid_weekends),l=e.mode;if(!l)return;const c=a.getEnd(),d=i.getStart(),u=i.getEnd();let p;if("consume_gap"===l){if(d.valueOf()<=c.valueOf()&&(p=d.minus(a.nudgeForDate("end")),s))return w({dateShiftMode:l,newDateData:n().Xp.fromDateTimes(d,u),dependencyDateValue:a})}else if("preserve_gap"===l)if(o){const e=o.getStart(),t=o.getEnd();if(s)return w({dateShiftMode:l,oldDateData:n().Xp.fromDateTimes(e,t),newDateData:n().Xp.fromDateTimes(d,u),dependencyDateValue:a});const i=e.diff(d);p=c.minus(i)}else d.valueOf()<=c.valueOf()&&(p=d.minus(a.nudgeForDate("end")));else(0,r().t1)(l);return p&&a.changeBoundary({type:"end",newValue:p})}}(o),R={timeZone:c,locale:d};let B,E;if((0,r().$K)(b)){const e=new T({convertArgs:R,startPropertyId:g.id,endPropertyId:b.id});B=e;const o=e.getFromBlock(t),n=(0,a().G)(g.newValue)??(null==o?void 0:o.startValue),i=(0,a().G)(b.newValue)??(null==o?void 0:o.endValue);if(!(0,r().$K)(n))return new f;E=new A({convertArgs:R,startValue:n,endValue:i})}else{B=new x({convertArgs:R,propertyId:g.id});const e=(0,a().G)(g.newValue);if(!(0,r().$K)(e))return new f;E=new P({convertArgs:R,value:e})}const D={startingBlock:t,startingNewDateValue:E,context:{collectionSchema:u,getRecordRole:p,getRecordValue:m,accessor:B},includeDeletedRelations:y,includeInvalidCollection:S,includeNoAccess:I};if("consume_gap"===o.mode){const e=new f,t=_({...D,dependencyPropertyId:s,dateAdjuster:C,dateRangeIsFurtherThan:(e,t)=>e.getStart().valueOf()>t.getStart().valueOf()});if(i().x.isFail(t))return new f;e.push(t.value);const o=_({...D,dependencyPropertyId:l,dateAdjuster:M,dateRangeIsFurtherThan:(e,t)=>e.getEnd().valueOf()<t.getEnd().valueOf()});return i().x.isFail(o)?new f:(e.push(o.value),e)}if("preserve_gap"===o.mode)return function(e){const{startingBlock:t,startingNewDateValue:o,forwardConfig:n,backwardConfig:i,context:r,includeDeletedRelations:a,includeInvalidCollection:s,includeNoAccess:l}=e,{accessor:c}=r,d=new Set,u=[{block:t,newDateValue:o}],p=new Map,m=new f;for(;;){const e=u.shift();if(!e)break;const{block:o,newDateValue:f}=e;if(d.has(o.id))continue;d.add(o.id);const g=c.getFromBlock(o);for(const{dependencyPropertyId:c,dateAdjuster:d}of[n,i]){const e=h(r,o,c,a,s,l);for(const o of e)o.id!==t.id&&v({context:r,adjust:e=>d({oldDateValue:g,newDateValue:f,dependencyDateValue:e}),result:m,dependencyPointer:o,onDateUpdated:(e,t)=>{p.has(o.id)||p.set(o.id,t),u.push({block:e,newDateValue:t})}})}}return m.pushUpdatedBlockDates(p,c),m}({...D,forwardConfig:{dependencyPropertyId:s,dateAdjuster:C},backwardConfig:{dependencyPropertyId:l,dateAdjuster:M}});(0,r().t1)(o.mode)}function v(e){const{result:t,dependencyPointer:o,context:n,adjust:i,onDateUpdated:r}=e,{accessor:a,getRecordValue:s,getRecordRole:l}=n,c=l(o);if(c&&!(0,p().J5)(c))return void t.numCouldNotUpdateDueToPermissions++;const d=s(o);if(!d)return;const u=a.getFromBlock(d);if(!u)return;const m=i(u);m&&!m.equals(u)&&r(d,m)}function h(e,t,o,n,i,r){var a;const l=e.collectionSchema[o];return l&&"relation"===l.type?(0,s().j$)({propertySchema:l,getRecordModel:d().o.fromGetRecordValueFn(e.getRecordValue),relationValue:(0,s().rq)(null===(a=t.properties)||void 0===a?void 0:a[o]),includeDeleted:n,includeInvalidCollection:i,includeNoAccess:r}):[]}function _(e){const{startingBlock:t,startingNewDateValue:o,context:n,dateAdjuster:i,dateRangeIsFurtherThan:r,dependencyPropertyId:a,includeDeletedRelations:s,includeInvalidCollection:l,includeNoAccess:c}=e,{accessor:d}=n,u=new Set,p=[{block:t,newDateValue:o,path:[]}],m=new Map,g=new f;for(;;){const e=p.shift();if(!e)break;const{block:t,newDateValue:o,path:f}=e;if(f.includes(t.id))return{error:"cycle_detected"};if(u.has(t.id))continue;u.add(t.id);const _=d.getFromBlock(t),b=[...f,t.id],y=h(n,t,a,s,l,c);for(const a of y)v({context:n,adjust:e=>i({oldDateValue:_,newDateValue:o,dependencyDateValue:e}),result:g,dependencyPointer:a,onDateUpdated:(e,t)=>{const o=m.get(a.id);o&&!r(t,o)||m.set(a.id,t),p.push({block:e,newDateValue:t,path:b})}})}return g.pushUpdatedBlockDates(m,d),{value:g}}function b(e){const{inputDate:t,dateShiftDirection:o}=e;return 6===t.weekday?t.plus({days:"right"===o?2:-1}):7===t.weekday?t.plus({days:"right"===o?1:-2}):t}function y(e,t){let o,n,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0;if(e.valueOf()>t.valueOf())o=t,n=e;else{if(!(e.valueOf()<t.valueOf()))return 0;o=e,n=t}for(i&&(o=o.plus({days:1}),n=n.minus({days:1}));o.valueOf()<=n.valueOf();)S(o)||r++,o=o.plus({days:1});return r}function S(e){return 6===e.weekday||7===e.weekday}function w(e){const{newDateData:t,dependencyDateValue:o,dateShiftMode:n}=e,i=o.getStart(),r=o.getEnd(),a=y(i,r);let s=b({inputDate:t.start.minus({days:1}),dateShiftDirection:"left"});if("preserve_gap"===n){const o=y(e.oldDateData.start,r,!0);for(let e=y(t.start,s,!0);e<o;e++)s=s.minus({days:1}),S(s)&&(s=b({inputDate:s,dateShiftDirection:"left"}))}let l=s,c=1;for(;c<a;)l=l.minus({days:1}),S(l)||c++;return o.changeBoundaries({newStart:l,newEnd:s})}function k(e){const{dependencyDateValue:t,newDateData:o,dateShiftMode:n}=e,i=t.getStart(),r=y(i,t.getEnd());let a=b({inputDate:o.end.plus({days:1}),dateShiftDirection:"right"});if("preserve_gap"===n){const t=y(e.oldDateData.end,i,!0);for(let e=y(o.end,a,!0);e<t;e++)a=a.plus({days:1}),S(a)&&(a=b({inputDate:a,dateShiftDirection:"right"}))}let s=a,l=1;for(;l<r;)s=s.plus({days:1}),S(s)||l++;return t.changeBoundaries({newStart:a,newEnd:s})}function I(e,t){if(!(e instanceof t))throw new Error(`Expected ShiftableDate to be of type ${t}`)}class C{constructor(e){this.convertArgs=e}}class x extends C{constructor(e){super(e.convertArgs),this.propertyId=void 0,this.propertyId=e.propertyId}getFromBlock(e){var t;const o=(0,a().G)(null===(t=e.properties)||void 0===t?void 0:t[this.propertyId]);return o?new P({value:o,convertArgs:this.convertArgs}):void 0}toOperations(e,t){return I(e,P),[u().op.update({pointer:t,path:["properties"],args:{[this.propertyId]:(0,s().d7)(e.value)}})]}}class T extends C{constructor(e){super(e.convertArgs),this.startPropertyId=void 0,this.endPropertyId=void 0,this.startPropertyId=e.startPropertyId,this.endPropertyId=e.endPropertyId}getFromBlock(e){var t;const o=(0,a().G)(null===(t=e.properties)||void 0===t?void 0:t[this.startPropertyId]);if((0,r().$K)(o)){var n;const t=(0,a().G)(null===(n=e.properties)||void 0===n?void 0:n[this.endPropertyId]);return new A({startValue:o,endValue:t,convertArgs:this.convertArgs})}}toOperations(e,t){return I(e,A),[u().op.update({pointer:t,path:["properties"],args:{[this.startPropertyId]:(0,s().d7)(e.startValue),...e.endValue?{[this.endPropertyId]:(0,s().d7)(e.endValue)}:{}}})]}}class M{constructor(e){this.convertArgs=e}toLuxon(e){return c().OQ.notionDateOrDateTimeToLuxon(e,this.convertArgs)}}class P extends M{constructor(e){super(e.convertArgs),this.value=void 0,this.value=e.value}getStart(){return this.toLuxon(l().Ws(this.value))}getEnd(){return this.toLuxon(l().S$(this.value))}nudgeForDate(e){return"date"===this.value.type||"daterange"===this.value.type?{days:1}:"datetime"===this.value.type?{minutes:1}:"datetimerange"===this.value.type?{}:void(0,r().t1)(this.value)}equals(e){return I(e,P),l().AP(this.value,e.value)}changeBoundary(e){let t;if("daterange"===this.value.type||"datetimerange"===this.value.type){const o=c().NK(this.value,this.convertArgs.timeZone,this.convertArgs.locale),n=o.end.diff(o.start);t=("daterange"===this.value.type?c().OQ.toPersistedDateRange:c().OQ.toPersistedDateTimeRange)("start"===e.type?{start:e.newValue,end:e.newValue.plus(n)}:{start:e.newValue.minus(n),end:e.newValue},this.convertArgs.timeZone)}else if("date"===this.value.type||"datetime"===this.value.type){t=("date"===this.value.type?c().OQ.toPersistedDate:c().OQ.toPersistedDateTime)(e.newValue.valueOf(),this.convertArgs.timeZone)}else(0,r().t1)(this.value);return new P({value:t,convertArgs:this.convertArgs})}changeBoundaries(e){const{newStart:t,newEnd:o}=e;return new P({value:c().OQ.toPersistedDateWithType({start:t,end:o},this.value.type,this.convertArgs.timeZone),convertArgs:this.convertArgs})}}class A extends M{getMergedValue(){if(this._mergedValue===A.MergedValueNotCalculated){const e=c().rH(this.startValue,this.endValue);this._mergedValue=e?c().Qq(e):void 0}return this._mergedValue}constructor(e){super(e.convertArgs),this.startValue=void 0,this.endValue=void 0,this._mergedValue=void 0,this.startValue=e.startValue,this.endValue=e.endValue}getStart(){return this.toLuxon(l().Ws(this.getMergedValue()??this.startValue))}getEnd(){return this.toLuxon(l().S$(this.getMergedValue()??this.endValue??this.startValue))}equals(e){return I(e,A),l().AP(this.startValue,e.startValue)&&((0,r().$K)(this.endValue)?(0,r().$K)(e.endValue)&&l().AP(this.endValue,e.endValue):!(0,r().$K)(e.endValue))}nudgeForDate(e){const t="start"===e?this.startValue:this.endValue??this.startValue;return"date"===t.type?{days:1}:"datetime"===t.type||"datetimerange"===t.type||"daterange"===t.type?{}:void(0,r().t1)(t)}toPersistedDateDiscardingRange(e,t){return void 0===t||"date"===t||"daterange"===t?c().OQ.toPersistedDate(e.valueOf(),this.convertArgs.timeZone):"datetime"===t||"datetimerange"===t?c().OQ.toPersistedDateTime(e.valueOf(),this.convertArgs.timeZone):void(0,r().t1)(t)}changeBoundary(e){var t,o;const n=this.getEnd().diff(this.getStart());return new A({convertArgs:this.convertArgs,..."start"===e.type?{startValue:this.toPersistedDateDiscardingRange(e.newValue,this.startValue.type),endValue:this.toPersistedDateDiscardingRange(e.newValue.plus(n),null===(t=this.endValue)||void 0===t?void 0:t.type)}:{startValue:this.toPersistedDateDiscardingRange(e.newValue.minus(n),this.startValue.type),endValue:this.toPersistedDateDiscardingRange(e.newValue,null===(o=this.endValue)||void 0===o?void 0:o.type)}})}changeBoundaries(e){var t;const{newStart:o,newEnd:n}=e;return new A({startValue:this.toPersistedDateDiscardingRange(o,this.startValue.type),endValue:this.toPersistedDateDiscardingRange(n,null===(t=this.endValue)||void 0===t?void 0:t.type),convertArgs:this.convertArgs})}}A.MergedValueNotCalculated=Symbol("Merged value not calculated yet")},575861:(e,t,o)=>{o.d(t,{Ct:()=>r,Je:()=>s,O5:()=>a,eG:()=>i});var n=()=>o(326966);const i=(0,o(788860).vU)({year:{id:"timeUtils.durationDescriptor.intervalYear",defaultMessage:"{numYears, plural, one {1 year} other {{numYears} years}}"},week:{id:"timeUtils.durationDescriptor.intervalWeek",defaultMessage:"{numWeeks, plural, one {1 week} other {{numWeeks} weeks}}"},day:{id:"timeUtils.durationDescriptor.intervalDay",defaultMessage:"{numDays, plural, one {1 day} other {{numDays} days}}"},hour:{id:"timeUtils.durationDescriptor.intervalHour",defaultMessage:"{numHours, plural, one {1 hour} other {{numHours} hours}}"},minute:{id:"timeUtils.durationDescriptor.intervalMinute",defaultMessage:"{numMinutes, plural, one {1 minute} other {{numMinutes} minutes}}"},second:{id:"timeUtils.durationDescriptor.intervalSecond",defaultMessage:"{numSeconds, plural, one {1 second} other {{numSeconds} seconds}}"}});function r(e,t){const o=Math.floor(e/n()._I),r=Math.floor(e/n().DS),a=Math.floor(e/n().A0),s=Math.floor(e/n().U6),l=Math.floor(e/n().hM),c=Math.floor(e/n().C0);return o>=1?t.formatMessage(i.year,{numYears:o}):r>=1?t.formatMessage(i.week,{numWeeks:r}):a>=1?t.formatMessage(i.day,{numDays:a}):s>=1?t.formatMessage(i.hour,{numHours:s}):l>=1?t.formatMessage(i.minute,{numMinutes:l}):t.formatMessage(i.second,{numSeconds:c})}function a(e){return Math.floor((Date.now()-e)/864e5)}function s(e){return Math.floor((Date.now()-e)/6e4)}},417823:(e,t,o)=>{o.d(t,{nS:()=>n});function n(e){const{experimentService:t,actor:o,spaceId:n}=e;return t.checkGate({actor:o,gateName:"db_permissions",customIDs:{spaceId:n}})}},965800:(e,t,o)=>{o.d(t,{q:()=>i});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624);var n=()=>o(335311);n();function i(e,t){const o=n().create({arrays:{detectMove:!1,includeValueOnMove:!0}}).diff(e,t);if(!o)return{beforeOps:{},removeOps:new Set};let i=[],r=[];for(const n in o)"_t"!==n&&("_"===n[0]?i.push(parseInt(n.slice(1),10)):1===o[n].length&&r.push({index:parseInt(n,10),value:o[n][0]}));const a={},s=new Set,l=[...e];i=i.sort(((e,t)=>e-t));for(let n=i.length-1;n>=0;n--){const e=i[n],t=l.splice(e,1)[0];s.add(t)}r=r.sort(((e,t)=>e.index-t.index));for(let n=0;n<r.length;n++){const e=r[n];a[e.value]=l[e.index],l.splice(e.index,0,e.value)}return{beforeOps:a,removeOps:s}}},580397:(e,t,o)=>{o.d(t,{Bb:()=>d,GW:()=>u});o(670560),o(267602),o(653476),o(470928),o(749411),o(30005),o(241792),o(731107),o(228244);var n=()=>o(513670),i=()=>o(696459),r=()=>o(185610),a=()=>o(955620),s=()=>o(349220);const l=(0,o(788860).vU)({addLabel:{id:"suggestionContext.label.add",defaultMessage:"Add"},removeLabel:{id:"suggestionContext.label.remove",defaultMessage:"Delete"},labelForReplaceOldText:{id:"suggestionContext.label.replaceOld",defaultMessage:"Replace"},labelForReplaceNewText:{id:"suggestionContext.label.replaceNew",defaultMessage:"with"},boldLabel:{id:"suggestionContext.label.bold",defaultMessage:"Bold"},unboldLabel:{id:"suggestionContext.label.unbold",defaultMessage:"Unbold"},italicLabel:{id:"suggestionContext.label.italic",defaultMessage:"Italicize"},unitalicLabel:{id:"suggestionContext.label.unitalic",defaultMessage:"Unitalicize"},strikeLabel:{id:"suggestionContext.label.strike",defaultMessage:"Strike through"},unstrikeLabel:{id:"suggestionContext.label.unstrike",defaultMessage:"Remove strike through"},underlineLabel:{id:"suggestionContext.label.underline",defaultMessage:"Underline"},removeUnderlineLabel:{id:"suggestionContext.label.remove underline",defaultMessage:"Remove underline"},codeStyleLabel:{id:"suggestionContext.label.codeStyle",defaultMessage:"Mark as code"},removeCodeStyleLabel:{id:"suggestionContext.label.remove codeStyle",defaultMessage:"Remove code style"},addLinkLabel:{id:"suggestionContext.label.addLink",defaultMessage:"Add link"},removeLinkLabel:{id:"suggestionContext.label.removeLink",defaultMessage:"Remove link"},highlightLabel:{id:"suggestionContext.label.highlight",defaultMessage:"Highlight"},removeHighlightLabel:{id:"suggestionContext.label.removeHighlight",defaultMessage:"Remove highlight"},undefinedOpLabel:{id:"suggestionContext.label.undefinedOp",defaultMessage:"Undefined operation"},lineBreak:{id:"suggestionContext.text.linebreak",defaultMessage:"line break"},lineBreaks:{id:"suggestionContext.text.linebreaks",defaultMessage:"line breaks"},block:{id:"suggestionContext.text.block",defaultMessage:"block"},page:{id:"suggestionContext.text.page",defaultMessage:"page"},blocks:{id:"suggestionContext.text.blocks",defaultMessage:"blocks"}}),c={[a().GKr.Bold]:[l.boldLabel,l.unboldLabel],[a().GKr.Italic]:[l.italicLabel,l.unitalicLabel],[a().GKr.Strike]:[l.strikeLabel,l.unstrikeLabel],[a().GKr.Underline]:[l.underlineLabel,l.removeUnderlineLabel],[a().GKr.Code]:[l.codeStyleLabel,l.removeCodeStyleLabel],[a().GKr.Link]:[l.addLinkLabel,l.removeLinkLabel],[a().GKr.Highlight]:[l.highlightLabel,l.removeHighlightLabel]};function d(e){const{discussionContextData:t,discussionId:o,discussionType:n,excludeLabel:l,intl:c}=e;if("default"===n){let e;const o=t[0];return"textValue"===o.type&&(e=o.value),(0,s().TO)(e)}if("suggestion"===n){return function(e){const{suggestionContextRenderLineItem:t,excludeLabel:o}=e;return t.flatMap(((e,n)=>{if(o)return e.value;const i=[];return e.shouldUseDeleteColor?i.push(a().V3y(`${e.label}: `,[r().H])):i.push(a().V3y(`${e.label}: `,[r()._P])),e.removeQuotationMarks||i.push(a().V3y("â€œ",[e.shouldUseDeleteColor?r().rP:r().or])),"insert_block"===e.type||"add_line_break"===e.type?e.value.forEach((e=>{i.push(a().V3y(a().WiV(e),[r().or]))})):"remove_line_break"===e.type||"delete_block"===e.type?e.value.forEach((e=>{i.push(a().V3y(a().WiV(e),[r().rP]))})):i.push(...e.value),e.removeQuotationMarks||i.push(a().V3y("â€",[e.shouldUseDeleteColor?r().rP:r().or])),n!==t.length-1&&i.push(a().V3y("\n")),i}))}({suggestionContextRenderLineItem:p({discussionContextData:t,discussionId:o,intl:c}),intl:c,excludeLabel:l})}(0,i().t1)(n)}function u(e){const{discussionType:t,discussionId:o,discussionContextData:n,intl:i}=e;if("suggestion"===t)return p({discussionContextData:n,discussionId:o,intl:i})}function p(e){const{discussionContextData:t,intl:o,discussionId:r}=e,s=t.flatMap((e=>"textValue"===e.type?function(e){const{textValue:t,intl:o,discussionId:i}=e,r=n().mN(t.flatMap((e=>(0,a().hDy)(e))).filter((e=>a().BIG(e)&&a().fgJ(e)===i)),(e=>`[${e.join(",")}]`));if(0===r.length)return[];const s=2===r.length&&1===r.filter((e=>a().pGj(e))).length&&1===r.filter((e=>a().$b8(e))).length,l=[];for(const n of r){const e=m({annotation:n,isReplace:s,intl:o}),i=a().$b8(n);let r=t;if(a().u2m(n)||a().Jeu(n)){const e=a().EpE(n);if(a().j0F(e)){r=[[a().zW$(e)]]}}s&&(a().pGj(n)?r=t.filter((e=>(0,a().hDy)(e).some((e=>a().pGj(e))))):a().$b8(n)&&(r=t.filter((e=>(0,a().hDy)(e).some((e=>a().$b8(e))))))),l.push({label:e,value:r,shouldUseDeleteColor:i})}return l}({textValue:e.value,discussionId:r,intl:o}):"blockSuggestion"===e.type?function(e){const{blockSuggestion:t,intl:o,blockType:n}=e;if("add_line_break"===t.type)return{label:o.formatMessage(l.addLabel),value:[a().V3y(o.formatMessage(l.lineBreak))],shouldUseDeleteColor:!1,removeQuotationMarks:!0,type:"add_line_break"};if("remove_line_break"===t.type)return{label:o.formatMessage(l.removeLabel),value:[a().V3y(o.formatMessage(l.lineBreak))],shouldUseDeleteColor:!0,removeQuotationMarks:!0,type:"remove_line_break"};if("insert"===t.type){const e="page"===n;return{label:o.formatMessage(l.addLabel),value:[a().V3y(o.formatMessage(e?l.page:l.block))],shouldUseDeleteColor:!1,removeQuotationMarks:!0,type:"insert_block"}}if("remove"===t.type)return{label:o.formatMessage(l.removeLabel),value:[a().V3y(o.formatMessage(l.block))],shouldUseDeleteColor:!0,removeQuotationMarks:!0,type:"delete_block"};(0,i().t1)(t.type)}({blockSuggestion:e.value,blockType:e.blockType,intl:o}):void(0,i().t1)(e))),c=[s].map((e=>function(e,t){const o=e.filter((e=>"insert_block"===e.type));if(1===o.length&&1===e.length)return e;if(o.length>1&&o.length===e.length)return[{label:t.formatMessage(l.addLabel),value:[a().V3y(t.formatMessage(l.blocks))],shouldUseDeleteColor:!1,removeQuotationMarks:!0}];return e.filter((e=>"insert_block"!==e.type))}(e,o))).map((e=>function(e,t){const o=e.filter((e=>"delete_block"===e.type));if(1===o.length&&1===e.length)return e;if(o.length>1&&o.length===e.length)return[{label:t.formatMessage(l.removeLabel),value:[a().V3y(t.formatMessage(l.blocks))],shouldUseDeleteColor:!1,removeQuotationMarks:!0}];return e}(e,o))).map((e=>f(e,o,"add_line_break"))).map((e=>f(e,o,"remove_line_break")));return c[0]}function m(e){const{annotation:t,isReplace:o,intl:n}=e,r=l.undefinedOpLabel;if(a().pGj(t)){const e=o?l.labelForReplaceNewText:l.addLabel;return n.formatMessage(e)}if(a().$b8(t)){const e=o?l.labelForReplaceOldText:l.removeLabel;return n.formatMessage(e)}if(a().u2m(t)||a().Jeu(t)){const e=a().EpE(t);if(a().u2m(t)){const t=c[a().J7s(e)][0]??r;return n.formatMessage(t)}{const t=c[a().J7s(e)][1]??r;return n.formatMessage(t)}}(0,i().t1)(t)}function f(e,t,o){let n,i;const r="add_line_break"===o?t.formatMessage(l.addLabel):t.formatMessage(l.removeLabel),s=e=>{i&&(e.push({label:r,value:[a().V3y(t.formatMessage(l.lineBreaks))],shouldUseDeleteColor:"remove_line_break"===o,removeQuotationMarks:!0}),i=!1,n=!1),n&&(e.push({label:r,value:[a().V3y(t.formatMessage(l.lineBreak))],shouldUseDeleteColor:"remove_line_break"===o,removeQuotationMarks:!0}),n=!1)},c=e.reduce(((e,t)=>(t.type===o?n?i=!0:n=!0:(s(e),e.push(t)),e)),[]);return s(c),c}},849743:(e,t,o)=>{o.d(t,{a:()=>s,d:()=>a});o(267602),o(653476),o(30005),o(241792);var n=()=>o(696459),i=()=>o(455947),r=()=>o(396136);function a(e,t){if(i().vA(e)){(e.filters||[]).forEach((e=>a(e,t)))}if(i().aN(e)){if(i().e(e.filter)){const o=e.filter;if("relation_contains"===o.operator||"relation_does_not_contain"===o.operator)if(Array.isArray(o.value)){const e=o.value.map((e=>{const o=e.type;if("exact"===o){const o=e.value;return{type:"exact",value:o&&t({table:r().iU,id:o})||o}}if("relative"===o)return e;(0,n().t1)(o)}));o.value=e}else{const e=o.value.type;if("exact"===e){const e=o.value.value;o.value.value=e&&t({table:r().iU,id:e})||e}else{if("relative"===e)return;(0,n().t1)(e)}}}if(i().a_(e.filter)){const o=e.filter.subfilter;if(i().e(o)){const e=o;if("relation_contains"===e.operator||"relation_does_not_contain"===e.operator)if(Array.isArray(e.value)){const o=e.value.map((e=>{const o=e.type;if("exact"===o){const o=e.value;return{type:"exact",value:o&&t({table:r().iU,id:o})||o}}if("relative"===o)return e;(0,n().t1)(o)}));e.value=o}else{const o=e.value.type;if("exact"===o){const o=e.value.value;e.value.value=o&&t({table:r().iU,id:o})||o}else{if("relative"===o)return;(0,n().t1)(o)}}}}}}function s(e,t){if(i().vA(e)){(e.filters||[]).forEach((e=>s(e,t)))}if(i().aN(e)){const o=t(e.property);o&&(e.property=o)}}},559102:(e,t,o)=>{o.d(t,{XJ:()=>ue,J_:()=>de,PZ:()=>ie});o(821057),o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(30005),o(241792),o(731107),o(228244);var n=o.n(o(369282)),i=()=>o(513670),r=()=>o(342792),a=()=>o(543172),s=()=>o(696459),l=()=>o(326966);var c=()=>o(764052),d=()=>o(177634),u=()=>o(530980),p=()=>o(827370),m=()=>o(922713),f=()=>o(752778);function g(e){const{duplicatedAction:t,mapper:o,options:n,originOptions:r,sourceSpaceId:a}=e,l=u().kk5.fromAutomationAction(t),g=l.pointer;const v=e=>{let{requested:t,requester:i}=e;return r=t.id,Boolean((null==n?void 0:n.isTemplateInstantiation)&&n.sourceBlockIds.has(r))?t:o({requested:t,requester:i});var r};function h(e){const t=(0,d().MY)(e);if("action"===t.source){var o;const e=p().dr.fromSpaceShardRecordId({id:t.action_id,spaceId:l.space_id},m().Xj),n=(null===(o=v({requested:e,requester:g}))||void 0===o?void 0:o.id)??t.action_id;return(0,d().Kd)({...t,action_id:n})}if("global"===t.source)return e;(0,s().t1)(t)}const _=l.pointer,{remappedRecordPointers:b,value:y}=(0,c().e)({automationActionModel:l,baseUrl:r.baseUrl,preventClearingConfig:!1,publicDomainName:r.publicDomainName,sourceSpaceId:a,visitors:{visitCollectionProperty:void 0,visitCollectionPropertyPointer:e=>{const o=v({requested:e,requester:_});if(o){const n=o.spaceId??t.space_id;return n!==t.space_id||o.table!==f().vF?{type:"replace",value:void 0}:{type:"replace",value:{...o,propertyId:e.propertyId,spaceId:n}}}return(e.spaceId??t.space_id)!==t.space_id?{type:"replace",value:void 0}:{type:"keep"}},visitFormulaContextValue:e=>({type:"replace",value:h(e)}),visitFormulaPageProperty:e=>{if("collection"in e&&e.collection){const o=v({requested:e.collection,requester:g});if(o&&o.table===f().vF){const n=o.spaceId??t.space_id;return n!==t.space_id?{type:"replace",value:void 0}:{type:"replace",value:{...e,collection:{...o,spaceId:n}}}}}else if("contextValueId"in e&&e.contextValueId)return{type:"replace",value:{...e,contextValueId:h(e.contextValueId)}};return{type:"keep"}},visitRecordPointer:e=>{const o=v({requested:e,requester:_});if(o){const e=o.spaceId??t.space_id;return e!==t.space_id?{type:"replace",value:void 0}:{type:"replace",value:{...o,spaceId:e}}}return(e.spaceId??t.space_id)!==t.space_id?{type:"replace",value:void 0}:{type:"keep"}}}}),S=y.getConfig();if(t.config=S,!(0,i().xb)(S))return b}var v=()=>o(437187),h=()=>o(156642),_=()=>o(863112),b=()=>o(608352),y=()=>o(226413),S=()=>o(871379),w=()=>o(43165);const k="415fc269-e68f-4da0-b3e3-b1273b741a7f";var I=()=>o(849743),C=()=>o(801916),x=()=>o(72539),T=()=>o(956057),M=()=>o(494616),P=()=>o(396136),A=()=>o(955620);function R(e){var t;const{blockValue:o,factoryButtonDeprecationContext:n,source:i}=e,r=function(e){return u().kk5.fromValue(P().iU,e).getCreatedByPointer()??{id:x().P_.id,table:x().P_.table}}(o),a=o.space_id,s=T().Il(),l=T().Il(),c=n.isRootBlockFactoryBlock&&n.isCurrentBlockRootBlock?n.rootTextContainerId:T().Il(),d=function(e){const{automationActionId:t,textContainerBlockId:o,creatorPointer:n,originalBlockValue:i,spaceId:r,blockContent:a}=e;return{table:P().iU,value:{id:o,space_id:r,alive:!0,parent_table:m().Xj,parent_id:t,type:"text",version:0,content:a,created_time:i.created_time,created_by_table:n.table,created_by_id:n.id}}}({automationActionId:l,textContainerBlockId:c,creatorPointer:r,originalBlockValue:o,blockContent:"duplication"===i?null===(t=o.content)||void 0===t?void 0:t.map((t=>e.pointerMapper({id:t,table:P().iU}).id)):o.content,spaceId:a}),p=function(e){const{automationId:t,automationActionId:o,spaceId:n,textContainerBlockId:i}=e;return{table:m().Xj,value:{id:o,space_id:n,alive:!0,parent_table:M().cv,parent_id:t,type:"duplicate_blocks",blocks:[i],version:0,config:void 0}}}({automationActionId:l,automationId:s,creatorPointer:r,originalBlockValue:o,spaceId:a,textContainerBlockId:c}),f=function(e){var t;const{creatorPointer:o,automationActionId:n,originalBlockValue:i,spaceId:r,automationId:a}=e,s=T().Il(),l=Date.now();return{table:M().cv,value:{id:a,space_id:r,alive:!0,trigger:{id:s,type:"button"},parent_id:i.id,parent_table:P().iU,action_ids:[n],status:"active",properties:{name:(0,A().QaF)(null===(t=i.properties)||void 0===t?void 0:t.title)},created_by_id:o.id,created_by_table:o.table,created_time:i.created_time??l,last_edited_time:i.last_edited_time??l,version:0,last_edited_by_id:i.last_edited_by_id??o.id,last_edited_by_table:i.last_edited_by_table??o.table}}}({automationActionId:l,automationId:s,creatorPointer:r,originalBlockValue:o,spaceId:a});return{textContainerBlock:d,automation:f,automationAction:p}}var B=()=>o(109477),E=()=>o(216316),D=()=>o(799891);class U{constructor(e,t,n){this.childToParentMap=new Map,this.unmappedContentIds=new Set,this.extraTranscludedChildren=new(o(783540).G)((()=>new Set)),this.logWarning=t,this.createCopyIndicator=n;for(const{model:o}of e)if(o instanceof u().yJh)for(const t of o.getContentPointers()){e.getModel(t)?this.childToParentMap.has(t.id)?this.extraTranscludedChildren.get(t.id).add(o.id):this.childToParentMap.set(t.id,o.pointer.id):this.unmappedContentIds.add(t.id)}!this.createCopyIndicator&&this.logWarning&&this.logWarning({type:"multiReferencedContentIds",contentIds:Array.from(this.extraTranscludedChildren.keys())})}remapDuplicateBlockParent(e){const{originalBlockPointer:t,duplicateMapper:o}=e,n=this.childToParentMap.get(t.id);if(!n)return;const i=o({requested:{table:P().iU,id:n},requester:t});return i&&i.table===P().iU?i:void 0}createCopyIndicatorBlockValue(e){const{type:t,targetSpaceId:n,sourceBlockId:i,duplicateParentId:r,createdBy:a,createOptions:s,additionalRecordsToMutate:l}=e,{model:c}=u().yJh.create({id:(0,T().Il)(),type:h().Ti.copyIndicator,space_id:n,parent:{id:r,table:P().iU,spaceId:n},createdBy:a},{useCrdt:o(962888).l()}),d=c.__IM_SORRY__getValue();return s.onCreate({type:t,duplicateBlockId:d.id,sourceBlockId:i,duplicateParentId:r}),l.push({table:P().iU,value:d}),d.id}remapDuplicateBlockContent(e){const{originalBlockPointer:t,duplicateMapper:o,originalBlockContent:n,originalCreatedBy:i,duplicateBlockId:r,targetSpaceId:a}=e,l=[];return{content:n.map((e=>{if(this.createCopyIndicator&&this.extraTranscludedChildren.has(e)&&this.extraTranscludedChildren.get(e).has(t.id))return this.createCopyIndicatorBlockValue({type:"multi-transcluded-content",targetSpaceId:a,sourceBlockId:e,duplicateParentId:r,createdBy:i,createOptions:this.createCopyIndicator,additionalRecordsToMutate:l});const n=o({requested:{table:P().iU,id:e},requester:t});return n?n.id:this.isUnmappedContentId(e)?this.createCopyIndicator?this.createCopyIndicatorBlockValue({type:"unmapped-content",targetSpaceId:a,sourceBlockId:e,duplicateParentId:r,createdBy:i,createOptions:this.createCopyIndicator,additionalRecordsToMutate:l}):void(null===(s=this.logWarning)||void 0===s||s.call(this,{type:"unmappedContentId",block:t,contentId:e})):e;var s})).filter(s().$K),additionalRecords:l}}isUnmappedContentId(e){return this.unmappedContentIds.has(e)}}var F=()=>o(513197),N=()=>o(972054),V=()=>o(728670),L=()=>o(528514),O=()=>o(933868),Z=()=>o(160916),j=()=>o(217465),K=()=>o(696056),z=()=>o(139978),H=()=>o(602299),q=()=>o(542973),W=()=>o(26645),G=()=>o(483791),$=()=>o(151097),Q=()=>o(421476),Y=()=>o(81954),J=()=>o(278191),X=()=>o(361929);var ee=()=>o(30862);const te={block:!0,collection:!0,collection_view:!0,discussion:!0,comment:!0,reaction:!0,automation:!0,automation_action:!0,skill:!0,layout:!0,form_question:!0,workflow:!0};function oe(e){const t=e.clone(),o=u().omK.fromRecordMap(t);function n(e){return(0,V().DW)(e.pointer,o).some(((e,t)=>{const o=e.table!==P().iU;return 0===t?o:o||(0,h().S9)(e.type)}))}const i=[];for(const{pointer:r,model:a}of t)a&&!n(a)||i.push(r);return i.forEach((e=>t.delete(e))),t}function ne(e){return e.table in te}function ie(e){const{sourceBlockId:t,targetBlockPointer:o,recordMap:n,options:r,baseUrl:a,publicDomainName:s,actor:l,getRecordRole:c,mapper:d,preventLegacyTransclusions:u,createLegacyTransclusionCopyIndicator:p,logWarning:m,spaceIdCreator:f,installationImprint:g,experimentService:v}=e;let h=n;null!=r&&r.shallowCopyNavigableBlock&&(h=oe(n));const _=e.recordPointerMap||j().RecordMapLegacy.create();for(const{pointer:i}of h){if(i.id===t){_.set(i,o);continue}let e=_.get(i);!e&&d&&(e=d({requested:i,requester:{table:P().iU,id:t}})),e||(e={spaceId:o.spaceId,table:i.table,id:(null==f?void 0:f.idInSavedSpace(i.table))??T().Ar()}),_.set(i,e)}let b;u&&(b=new U(n,m,p??!1));const y=j().RecordMap.create(),S=e=>{let{requested:t}=e;return _.get(t)},w={},k=[],I=n.getModel({id:t,table:P().iU}),C=I?function(e){const t="duplication",o=new Map;let n;return"factory"===e.type?(n={type:t,isRootBlockFactoryBlock:!0,isCurrentBlockRootBlock:!1,factoryBlockIdToNewTextContainerIdMap:o,rootTextContainerId:T().Il()},n.factoryBlockIdToNewTextContainerIdMap.set(e.id,{id:n.rootTextContainerId,table:P().iU})):n={type:t,isRootBlockFactoryBlock:!1,factoryBlockIdToNewTextContainerIdMap:o},n}(I):void 0;for(const{pointer:i,model:x}of h){if(void 0===x)continue;if(!ne(x))continue;if(!(null!=r&&r.duplicateDiscussions||i.table!==q().qF&&i.table!==H().x_&&i.table!==Q().yo))continue;const e=Boolean((null==r?void 0:r.resolveTemplateVariables)&&pe({rootSourceBlockIds:[t],childSourcePointer:i,getSourceRecordValue:Z().mF.fromRecordMap(n)}))?{...r,resolveTemplateVariables:!1}:r;null!=C&&C.isRootBlockFactoryBlock&&(C.isCurrentBlockRootBlock=x.id===t);const{duplicateRecord:d,additionalRecords:u}=ae({table:x.table,record:x.__IM_SORRY__getValue(),mapper:S,options:e,rewiredUriMap:w,typedCollectionViewBlocks:k,originOptions:{baseUrl:a,publicDomainName:s},actor:l,getRecordRole:c,factoryButtonDeprecationContext:C,legacyTransclusionFixer:b,installationImprint:g,experimentService:v});if(void 0!==d){if(x.table===P().iU&&d.id===o.id){const e=d;delete e.parent_id,delete e.parent_table,delete e.alive}re({duplicateRecordMap:y,duplicateRecordResult:{duplicateRecord:d,additionalRecords:u,duplicateRecordTable:x.table}})}}return function(e){const{rewiredUriMap:t,typedCollectionViewBlocks:o,duplicateRecordMap:n}=e;if(i().xb(t)||0===o.length)return;const r=i().oA(o.map((e=>n.getValue(e))));r.forEach((e=>{var o;const n=null==e||null===(o=e.format)||void 0===o?void 0:o.app_uri_map;n&&Object.entries(n).forEach((e=>{let[o,i]=e;n[o]=t[i]}))}));const a=r.reduce(((e,t)=>{var o;const n=null==t||null===(o=t.format)||void 0===o?void 0:o.app_id;return n&&(e[n]=e[n]?[...e[n],t]:[t]),e}),{});Object.entries(a).forEach((e=>{let[t,o]=e;const n=T().Il();o.forEach((e=>{var t;null!=e&&null!==(t=e.format)&&void 0!==t&&t.app_id&&(e.format.app_id=n)}))}))}({rewiredUriMap:w,typedCollectionViewBlocks:k,duplicateRecordMap:y}),{duplicateRecordMap:y,originalToDuplicate:_}}function re(e){const{duplicateRecordResult:t,duplicateRecordMap:o}=e,{additionalRecords:n,duplicateRecord:i,duplicateRecordTable:r}=t;o.setValue(p().dr.fromPointerLike({table:r,id:i.id}),i);for(const a of n)o.setValue(p().dr.fromPointerLike({id:a.value.id,table:a.table}),a.value)}function ae(e){const{table:t,record:o,mapper:n,options:a,originOptions:c,actor:d,helperRecordMap:g,getRecordRole:b,rewiredUriMap:y,typedCollectionViewBlocks:S,factoryButtonDeprecationContext:I,legacyTransclusionFixer:C,installationImprint:T,accessLockingValidator:E,experimentService:D,isTemplateInstantiation:U,targetBlockIds:V}=e,L=i().Xh(o),Z=fe({mapper:n,requested:p().dr.fromPointerLike({table:t,id:o.id,spaceId:o.space_id}),requester:p().dr.fromPointerLike({table:t,id:o.id})});L.id=Z.id,L.space_id=(0,Y().J)(Z.spaceId);const j=[];if(t===P().iU){const e=L,{additionalRecords:t}=function(e){var t,o,n,a,c,d,m,g,b,y,S;const{originalBlock:I,duplicateBlock:C,mapper:T,options:E,originOptions:D,rewiredUriMap:U,typedCollectionViewBlocks:F,actor:N,helperRecordMap:V,factoryButtonDeprecationContext:L,legacyTransclusionFixer:Z,installationImprint:j,accessLockingValidator:H}=e,W={table:P().iU,id:I.id,spaceId:I.space_id};null!==(t=I.format)&&void 0!==t&&t.app_config_uri&&null!==(o=C.format)&&void 0!==o&&o.app_config_uri&&((0,B().iA)(I.format.app_config_uri)?C.format.app_config_uri=void 0:((0,h().dM)(C.type)&&F.push({table:P().iU,id:C.id,spaceId:C.space_id}),U[I.id]=C.id));const G=[];C.crdt_data&&delete C.crdt_data;C.crdt_format_version&&delete C.crdt_format_version;C.format&&(C.format=w().nY(C.format));null!==(n=C.format)&&void 0!==n&&n.site_id&&delete C.format.site_id;null!==(a=C.format)&&void 0!==a&&a.slug&&delete C.format.slug;if("factory"===C.type&&L){const{automation:e,automationAction:t,textContainerBlock:o}=R({blockValue:C,source:"duplication",pointerMapper:e=>T({requested:e,requester:W})??e,factoryButtonDeprecationContext:L});G.push(e,t,o),L.factoryBlockIdToNewTextContainerIdMap.set(I.id,{id:o.value.id,table:P().iU});const n=C;n.type="button",n.content=[],n.format={...n.format,automation_id:e.value.id}}(0,r().e)(I.id)&&(C.format||(C.format={}),C.format.copied_from_pointer={table:P().iU,id:I.id,spaceId:I.space_id},C.copied_from=I.id);let Q;I.parent_table===P().iU&&(Q=null==L?void 0:L.factoryBlockIdToNewTextContainerIdMap.get(I.parent_id));Q??=(null==Z?void 0:Z.remapDuplicateBlockParent({originalBlockPointer:W,duplicateMapper:T}))??T({requested:{table:C.parent_table,id:C.parent_id,spaceId:C.space_id},requester:W}),Q&&(C.parent_id=Q.id,C.parent_table!==Q.table&&(0,v().qk)(Q)&&(C.parent_table=Q.table));null!==(c=C.format)&&void 0!==c&&c.ai_instructions_page_pointer&&(C.format.ai_instructions_page_pointer=T({requested:C.format.ai_instructions_page_pointer,requester:W}));null!==(d=C.format)&&void 0!==d&&d.ai_skill_pointer&&(C.format.ai_skill_pointer=T({requested:C.format.ai_skill_pointer,requester:W}));const J=C;J.view_ids&&(J.view_ids=J.view_ids.map((e=>{var t;return(null===(t=T({requested:{table:z().np,id:e,spaceId:J.space_id},requester:W}))||void 0===t?void 0:t.id)||e})));const te=u().kk5.fromBlock(J).getCollectionPointer();if(te){var oe;if(null==V||null===(oe=V.getValue(te))||void 0===oe||null===(oe=oe.format)||void 0===oe?void 0:oe.bot_id)J.collection_id=te.id,J.format={...J.format,collection_pointer:te};else{const e=T({requested:te,requester:W})||te;if(e.table!==f().vF)throw new Error(`Collection pointer for duplicate collection is invalid: ${JSON.stringify(e)}`);J.collection_id=e.id,J.format={...J.format,collection_pointer:e}}}null!==(m=C.format)&&void 0!==m&&m.form_layout_pointer&&(C.format.form_layout_pointer=T({requested:C.format.form_layout_pointer,requester:W}));C.discussions&&(E.duplicateDiscussions?C.discussions=C.discussions.map((e=>{var t;return(null===(t=T({requested:p().dr.fromPointerLike({table:q().qF,id:e,spaceId:C.space_id}),requester:W}))||void 0===t?void 0:t.id)||e})):delete C.discussions);if(C.permissions){var ne;if(E.duplicatePermissions)C.permissions=function(e){const{block:t,targetSpaceSettings:o,targetTeamSettings:n}=e;return(t.permissions||[]).filter((e=>!(0,O().FB)(e)&&(!(0,O().hV)(e)&&((!(!n&&o.disablePublicAccess||n&&n.disable_public_access)||!(0,O().$D)(e))&&!((!n&&o.disableGuests||n&&n.disable_guests)&&(0,O().jg)(e)&&!o.memberUserIds.includes(e.user_id))))))}({block:C,targetSpaceSettings:E.duplicatePermissions.targetSpaceSettings,targetTeamSettings:null===(ne=E.duplicatePermissions)||void 0===ne?void 0:ne.targetTeamSettings});else delete C.permissions,"form"===C.type&&(C.permissions=(0,_().wG)())}C.content_classification&&delete C.content_classification;C.moved&&delete C.moved;C.properties||(C.properties={});for(const i in C.properties){const e=E.duplicateDiscussions?C.properties[i]:A().V3g(C.properties[i],{removeSuggestionAnnotationsAndText:!0,removeSuggestionAnnotations:!0,removeDiscussions:!0});C.properties[i]=e}C.ignore_block_count&&delete C.ignore_block_count;if(C.properties)for(const i of Object.keys(C.properties)){const e=C.properties[i];e&&(C.properties[i]=(0,ee().G)({...D,text:{value:e,spaceId:(0,Y().J)(C.space_id)},mapper:T,requester:W,resolveTemplateVariables:E.resolveTemplateVariables||!1}))}if("transclusion_reference"===C.type&&E.deepCopyTransclusionContainers){const e=C;if(e.format&&e.format.transclusion_reference_pointer){const t=e.format.transclusion_reference_pointer,o=T({requested:t,requester:W});o&&(e.format.transclusion_reference_pointer=o)}}if((0,h().S9)(C.type)&&E.shallowCopyNavigableBlock){const e=C;e.type="text";const t=A().$0A(I.id,I.space_id),o=[A().YCD(t)];e.properties={title:o},e.content=[]}if("transclusion_container"===C.type&&!E.deepCopyTransclusionContainers){const e=C;e.type="transclusion_reference",e.content=void 0;const t=e.format||{};t.transclusion_reference_pointer=W,e.format=t}if("alias"===C.type&&C.format&&C.format.alias_pointer){const e=C.format.alias_pointer,t=T({requested:e,requester:W});t&&(C.format.alias_pointer=t)}if(ie=C,(0,h().yv)(ie.type)&&C.format)if(j)C.format.installation_imprint={pointer:j};else if(C.format.installation_imprint&&H&&H.shouldOverwriteInstallationOnBlock(C.format.installation_imprint.pointer.id)){const e=H.getNewInstallationForInstallationId(C.format.installation_imprint.pointer.id);e&&void 0!==e&&(C.format.installation_imprint={pointer:{id:e.id,table:$().mK}})}var ie;C.type===h().Ti.externalObjectInstancePage&&(C.type=h().Ti.externalObjectInstance);if(C.type===h().Ti.externalObjectInstance){var re,ae,se;if(null!==(re=C.format)&&void 0!==re&&re.related_external_object_uris_to_instance_ids&&(C.format.related_external_object_uris_to_instance_ids=(0,l().m8)((0,s().qP)(C.format.related_external_object_uris_to_instance_ids).map((e=>{var t;let[o,n]=e;return[o,(null===(t=T({requested:{table:P().iU,id:n,spaceId:J.space_id},requester:W}))||void 0===t?void 0:t.id)||n]})))),E.convertExternalObjectInstancesToPlaceholders&&(null===(ae=C.format)||void 0===ae||!ae.is_placeholder)&&null!==(se=C.format)&&void 0!==se&&se.bot_id){const e=null==V?void 0:V.getValue({table:K().cZ,id:C.format.bot_id}),t=null==e?void 0:e.integration_id;if(t){const e={is_placeholder:!0,integration_id:t};C.format=e}}}C.file_ids&&function(e){var t;const o=JSON.stringify(e.properties);e.file_ids=null==e||null===(t=e.file_ids)||void 0===t?void 0:t.filter((t=>{var n,i,r,a,s,l;return!(null===(n=e.format)||void 0===n||!n.display_source||-1===(null===(i=e.format)||void 0===i||null===(i=i.display_source)||void 0===i?void 0:i.indexOf(t)))||(!(null===(r=e.format)||void 0===r||!r.page_cover||-1===(null===(a=e.format)||void 0===a||null===(a=a.page_cover)||void 0===a?void 0:a.indexOf(t)))||(!(null===(s=e.format)||void 0===s||!s.page_icon||-1===(null===(l=e.format)||void 0===l||null===(l=l.page_icon)||void 0===l?void 0:l.indexOf(t)))||-1!==o.indexOf(t)))}))}(C);const le=I,ce=C;ce.format&&(null!==(g=le.format)&&void 0!==g&&g.original_source||null!==(b=le.format)&&void 0!==b&&b.image_edit_metadata)&&(ce.format.original_source=void 0,ce.format.image_edit_metadata=void 0);if(null!==(y=C.format)&&void 0!==y&&y.automation_id){const e=T({requested:{table:M().cv,id:C.format.automation_id,spaceId:C.space_id},requester:W});e&&(C.format.automation_id=e.id)}var de;null!==(S=C.format)&&void 0!==S&&S.workflow_id&&(C.format.workflow_id=null===(de=T({requested:{table:X().An,id:C.format.workflow_id,spaceId:C.space_id},requester:W}))||void 0===de?void 0:de.id);"collection"===I.parent_table&&I.type===h().Ti.copyIndicator&&C.properties&&(0,s().Yd)(C.properties).length>0&&(C.type=h().Ti.page);if(!E.preserveSourceMetadataTimestamps){const e=Date.now();C.created_time=e,C.last_edited_time=e}N&&(C.last_edited_by_id=N.id,C.last_edited_by_table=N.table,C.created_by_id=N.id,C.created_by_table=N.table);C.non_content_children&&(C.non_content_children=C.non_content_children.map((e=>{var t;return(null===(t=T({requested:{table:P().iU,id:e,spaceId:C.space_id},requester:W}))||void 0===t?void 0:t.id)||e})));const ue=C;if(ue.content){var pe;if(Z){const e=Z.remapDuplicateBlockContent({originalBlockPointer:W,duplicateMapper:T,originalBlockContent:ue.content,originalCreatedBy:N||x().r3.pointer,duplicateBlockId:ue.id,targetSpaceId:C.space_id});ue.content=e.content,G.push(...e.additionalRecords)}else ue.content=ue.content.map((e=>{var t;return(null===(t=T({requested:{table:P().iU,id:e},requester:W}))||void 0===t?void 0:t.id)||e}));if(C.space_id===k&&null!==(pe=C.properties)&&void 0!==pe&&pe.title){var me,fe,ge;const e=(0,A().lzi)(null===(me=C.properties)||void 0===me?void 0:me.title);e&&e.length>0&&e[0].length>0&&null!==(fe=e[0][0])&&void 0!==fe&&null!==(fe=fe.trim())&&void 0!==fe&&fe.startsWith("ðŸŽ²")&&null!==(ge=e[0][0])&&void 0!==ge&&null!==(ge=ge.trim())&&void 0!==ge&&ge.endsWith("ðŸŽ²")&&(ue.content=i().TV(ue.content))}}return{duplicateRecord:C,additionalRecords:G}}({originalBlock:o,duplicateBlock:e,mapper:n,options:a??{},rewiredUriMap:y,typedCollectionViewBlocks:S,originOptions:c,actor:d,helperRecordMap:g,factoryButtonDeprecationContext:I,legacyTransclusionFixer:C,installationImprint:T,accessLockingValidator:E});j.push(...t)}else if(t===f().vF){se(o,L,n,c,y,D)}else if(t===z().np){ce(o,L,n,y,g,U,V)}else t===q().qF?function(e,t,o,n){const i={table:q().qF,id:e.id,spaceId:e.space_id},r=o({requested:{table:t.parent_table,id:t.parent_id,spaceId:t.space_id},requester:i});r&&(t.parent_id=r.id);t.comments&&(t.comments=t.comments.map((e=>{var n;return(null===(n=o({requested:{table:H().x_,id:e,spaceId:t.space_id},requester:i}))||void 0===n?void 0:n.id)||e})));if("default"===t.type&&t.context)t.context=(0,ee().G)({...n,text:{value:t.context,spaceId:t.space_id},mapper:o,requester:i,resolveTemplateVariables:!1});else if("suggestion"===t.type)throw new Error("Not implemented")}(o,L,n,c):t===H().x_?function(e,t,o,n){const i={table:H().x_,id:e.id,spaceId:e.space_id},r=o({requested:p().dr.fromPointerLike({table:t.parent_table,id:t.parent_id,spaceId:t.space_id}),requester:i});r&&(t.parent_id=r.id);t.text&&(t.text=(0,ee().G)({...n,text:{value:t.text,spaceId:t.space_id},mapper:o,requester:i,resolveTemplateVariables:!1}));if(t.content)for(const[l,c]of t.content.entries()){var a;const e=null===(a=o({requested:p().dr.fromPointerLike({table:P().iU,id:c,spaceId:t.space_id}),requester:i}))||void 0===a?void 0:a.id;e&&(t.content[l]=e)}if(t.reactions)for(const[l,c]of t.reactions.entries()){var s;const e=null===(s=o({requested:{table:Q().yo,id:c,spaceId:t.space_id},requester:i}))||void 0===s?void 0:s.id;e&&(t.reactions[l]=e)}}(o,L,n,c):t===Q().yo?function(e,t,o,n){const i={table:Q().yo,id:e.id,spaceId:e.space_id},r=o({requested:p().dr.fromPointerLike({table:t.parent_table,id:t.parent_id,spaceId:t.space_id}),requester:i});r&&(t.parent_id=r.id)}(o,L,n):t===M().cv?de({originalRecord:o,duplicateRecord:L,mapper:n,options:a??{},actor:d}):t===m().Xj?ue({originalRecord:o,duplicateRecord:L,mapper:n,getRecordRole:b,options:a??{},originOptions:c}):t===X().An?function(e){const{original:t,duplicate:o,mapper:n}=e,i=n({requested:{table:P().iU,id:t.parent_id,spaceId:t.space_id},requester:{table:X().An,id:t.id,spaceId:t.space_id}});i&&(o.parent_id=i.id);if(o.space_id=(null==i?void 0:i.spaceId)??t.space_id,o.data){o.data.enabled=!1,o.data.runtime_actor_pointer=void 0;for(const e of o.data.triggers??[]){var r;"recurrence"===(null===(r=e.state)||void 0===r?void 0:r.type)&&(e.state.scheduleId=void 0)}}}({original:o,duplicate:L,mapper:n,originOptions:c}):t===J().AT?function(e){let{original:t,duplicate:o,mapper:n,originOptions:i}=e;const r={table:J().AT,id:t.id,spaceId:t.space_id},a=n({requested:p().dr.fromPointerLike({table:o.parent_table,id:o.parent_id,spaceId:o.space_id}),requester:r});a&&(o.parent_id=a.id)}({original:o,duplicate:L,mapper:n,originOptions:c}):t===G().Bh?function(e){let{original:t,duplicate:o,mapper:n}=e;const i={table:G().Bh,id:t.id,spaceId:t.space_id};o.parent_id=fe({mapper:n,requested:p().dr.fromPointerLike({table:o.parent_table,id:o.parent_id,spaceId:o.space_id}),requester:i}).id,o.format||(o.format={});o.format.copied_from_pointer={table:G().Bh,id:t.id,spaceId:t.space_id},o.modules=(0,F().AQ)(o.modules);const r=(0,N().M)(o.modules,(e=>{if("views"===e.type||"viewsMain"===e.type){return{type:"views",id:e.id,collection_view_block_pointer:{...ge({table:P().iU,mapper:n,requested:p().dr.fromPointerLike(e.collection_view_block_pointer),requester:i}),spaceId:o.space_id}}}if("formQuestion"===e.type){return{type:"formQuestion",id:e.id,formQuestionId:{...ge({table:W().L_,mapper:n,requested:p().dr.fromPointerLike({table:W().L_,id:e.formQuestionId,spaceId:o.space_id}),requester:i}),spaceId:o.space_id}.id}}return e})),a=Object.fromEntries(Object.entries(r.form_conditional_modules??{}).filter((e=>{const[t,o]=e;return"formQuestion"===o.type})));o.modules={...r,form_conditional_modules:a},t.blocks&&(o.blocks=t.blocks.map((e=>fe({mapper:n,requested:{table:P().iU,id:e,spaceId:o.space_id},requester:i}).id)))}({original:o,duplicate:L,mapper:n}):t===W().L_?function(e){const{original:t,duplicate:o,mapper:n}=e,i={table:W().L_,id:t.id,spaceId:t.space_id},r=n({requested:p().dr.fromPointerLike({table:o.parent_table,id:o.parent_id,spaceId:o.space_id}),requester:i});r&&(o.parent_id=r.id)}({original:o,duplicate:L,mapper:n,originOptions:c}):(0,s().t1)(t);return{duplicateRecord:L,additionalRecords:j}}function se(e,t,o,n,i,c){var d,u,m,g;const v={table:f().vF,id:e.id,spaceId:e.space_id};if(le(e,t,o),null!==(d=e.format)&&void 0!==d&&d.app_config_uri&&(i[e.id]=t.id),(0,r().e)(e.id)){if(t.format||(t.format={}),t.format.copied_from_pointer={table:f().vF,id:e.id,spaceId:e.space_id},void 0!==t.format.collection_default_template&&"empty"!==t.format.collection_default_template){const e=o({requested:{table:P().iU,id:t.format.collection_default_template.template_page_id},requester:v});e&&(t.format.collection_default_template={template_page_id:e.id})}if(t.format.layout_pointer){const e=ge({mapper:o,table:G().Bh,requested:t.format.layout_pointer,requester:v});t.format.layout_pointer=e}t.copied_from=e.id}const h=o({requested:{table:t.parent_table,id:t.parent_id},requester:v});h&&(t.parent_id=h.id);const _=y().oC(t);for(const r in _){const i=_[r];if(i&&"relation"===i.type&&y().j0(i)){const e=o({requested:y().j0(i),requester:v});if(e)i.collection_id=e.id,i.collection_pointer={id:e.id,table:f().vF,spaceId:(0,Y().J)(e.spaceId)};else if(i.property){const e=c.checkGate({gateName:"collections_xws",actor:C().pX,customIDs:{spaceId:t.space_id}});i.property=e?void 0:(0,a().ZP)()}}var b;if(i&&"title"===i.type&&t.name&&(t.name=(0,ee().G)({...n,text:{value:t.name,spaceId:t.space_id},mapper:o,requester:v,resolveTemplateVariables:!1})),i&&"button"===i.type&&i.automation_id)i.automation_id=(null===(b=o({requested:{id:i.automation_id,spaceId:e.space_id,table:M().cv},requester:v}))||void 0===b?void 0:b.id)??i.automation_id}t.description&&(t.description=(0,ee().G)({...n,text:{value:t.description,spaceId:t.space_id},mapper:o,requester:v,resolveTemplateVariables:!1}));for(const r in _){const e=_[r];if(!e||"formula"!==e.type||"v2"!==e.version||!e.formula2)continue;const{value:i}=(0,E().RA)({baseUrl:n.baseUrl,formula:e.formula2.code,publicDomainName:n.publicDomainName,spaceId:t.space_id,visitors:{visitFormulaContextValue:void 0,visitFormulaPageProperty:e=>{if("collection"in e&&e.collection){const t=o({requested:e.collection,requester:v});if(t&&t.table===f().vF)return{type:"replace",value:{...e,collection:t}}}return{type:"keep"}},visitRecordPointer:void 0}});e.formula2.code=i}if(t.template_pages&&(t.template_pages=t.template_pages.map((e=>{var t;return(null===(t=o({requested:{table:P().iU,id:e},requester:v}))||void 0===t?void 0:t.id)||e}))),null!==(u=t.format)&&void 0!==u&&u.collection_mode&&"page_tree"===t.format.collection_mode.type){var S;const e=t.format.collection_mode.root_page_pointer,n=(null===(S=o({requested:p().dr.fromPointerLike({table:"block",id:e.id,spaceId:t.space_id}),requester:v}))||void 0===S?void 0:S.id)||e.id;t.format.collection_mode={type:"page_tree",root_page_pointer:{id:n,table:"block",spaceId:t.space_id}}}null!==(m=t.format)&&void 0!==m&&m.related_external_object_uris_to_instance_ids&&(t.format.related_external_object_uris_to_instance_ids=(0,l().m8)((0,s().qP)(t.format.related_external_object_uris_to_instance_ids).map((e=>{var n;let[i,r]=e;return[i,(null===(n=o({requested:{table:f().vF,id:r,spaceId:t.space_id},requester:v}))||void 0===n?void 0:n.id)||r]})))),delete t.deleted_schema,null!==(g=t.format)&&void 0!==g&&g.automation_ids&&(t.format.automation_ids=t.format.automation_ids.map((e=>{var n;return null===(n=o({requested:{id:e,table:M().cv,spaceId:t.space_id},requester:v}))||void 0===n?void 0:n.id})).filter(s().$K))}function le(e,t,o){var n;if(null===(n=e.format)||void 0===n||!n.compound_workflow_template_instances)return;const i={table:f().vF,id:e.id,spaceId:e.space_id};t.format||(t.format={}),t.format.compound_workflow_template_instances=e.format.compound_workflow_template_instances.map((e=>({...e,instance_pointers:e.instance_pointers.map((e=>{const n=t.space_id;if("property"===e.type)return e;const r=e.type,a=ge({table:r,mapper:o,requested:{table:r,id:e.id,spaceId:n},requester:i});return{type:a.table,id:a.id}}))})))}function ce(e,t,o,n,i,r,a){var s,l,c,d,u,m,f;const g={table:z().np,id:e.id,spaceId:e.space_id};null!==(s=e.format)&&void 0!==s&&s.app_config_uri&&null!==(l=t.format)&&void 0!==l&&l.app_config_uri&&((0,B().iA)(e.format.app_config_uri)?t.format.app_config_uri=void 0:n[e.id]=t.id);const v=null===(c=t.format)||void 0===c?void 0:c.collection_pointer;if(v){const e=null==i?void 0:i.getModel(v);if(!Boolean(null==e?void 0:e.isSyncedCollection())){const e=o({requested:v,requester:g})||v;t.format={...t.format,collection_pointer:e}}}if(t.format){var h;const e=null===(h=t.format.collection_groups)||void 0===h?void 0:h.map((e=>{if("relation"===e.value.type&&(0,b().RA)(e.value.value)&&e.value.value){return{...e,value:{type:"relation",value:o({requested:e.value.value,requester:g})}}}return e}));t.format.collection_groups=e;const n=t.format.collection_view_default_template;if(!(void 0===n||"empty"===n)){const e=o({requested:{table:P().iU,id:n.template_page_id},requester:g});e&&(r&&null!=a&&a.includes(e.id)||(t.format.collection_view_default_template={template_page_id:e.id}))}}const _=o({requested:{table:t.parent_table,id:t.parent_id,spaceId:t.space_id},requester:g});if(_&&(t.parent_id=_.id),t.page_sort&&(t.page_sort=t.page_sort.map((e=>{var n;return(null===(n=o({requested:{table:P().iU,id:e,spaceId:t.space_id},requester:g}))||void 0===n?void 0:n.id)||e}))),"page"===t.type&&null!==(d=t.format)&&void 0!==d&&d.page_pointer){var y;const e=t.format.page_pointer,n=(null===(y=o({requested:p().dr.fromPointerLike({table:"block",id:e.id,spaceId:t.space_id}),requester:g}))||void 0===y?void 0:y.id)||e.id;t.format.page_pointer={table:"block",id:n,spaceId:t.space_id}}if(null!==(u=t.format)&&void 0!==u&&u.property_filters){const e=t.format.property_filters;for(const t of e)t.filter&&(0,I().d)(t.filter,(e=>{var t;return null===(t=o({requested:e,requester:g}))||void 0===t?void 0:t.id}))}if(null!==(m=t.format)&&void 0!==m&&m.filters2){const e=t.format.filters2;for(const t of e)t.filter&&(0,I().d)(t.filter,(e=>{var t;return null===(t=o({requested:e,requester:g}))||void 0===t?void 0:t.id}))}const S=t.query2;var w;(S&&S.filter&&(0,I().d)(S.filter,(e=>{var t;return null===(t=o({requested:e,requester:g}))||void 0===t?void 0:t.id})),null!==(f=t.format)&&void 0!==f&&f.form_block_pointer)&&(t.format.form_block_pointer=o({requested:null===(w=t.format)||void 0===w?void 0:w.form_block_pointer,requester:g}))}function de(e){var t,o;const{originalRecord:i,duplicateRecord:r,mapper:a,options:l,actor:d}=e,f=p().dr.fromSpaceShardRecordId({id:i.id,spaceId:i.space_id},M().cv);r.copied_from_pointer=f;const g=(null===(t=a({requested:p().dr.fromPointerLike({table:r.parent_table,id:r.parent_id,spaceId:r.space_id}),requester:f}))||void 0===t?void 0:t.id)??r.parent_id;r.parent_id=g;const v=(r.action_ids??[]).map((e=>{var t;return(null===(t=a({requested:p().dr.fromPointerLike({table:m().Xj,id:e,spaceId:r.space_id}),requester:f}))||void 0===t?void 0:t.id)??e}));r.action_ids=v;const h=Date.now();r.created_time=h,r.last_edited_time=h,r.last_executed_time=void 0,r.last_failed_time=void 0,(0,s().$K)(null===(o=r.properties)||void 0===o?void 0:o.schedule_id)&&(r.properties.schedule_id=void 0),(0,s().$K)(d)&&(r.created_by_id=d.id,r.created_by_table=d.table,r.last_edited_by_id=d.id,r.last_edited_by_table=d.table),"recurrence"===r.trigger.type&&l.shouldDisableRecurrenceAutomation&&(r.status="disabled_duplication"),"notification_event"===r.trigger.type&&(r.trigger={...r.trigger,type:"event"}),function(e){return"event"===e.trigger.type}(r)&&function(e){var t;const{duplicateRecord:o,mapper:i,originalRecord:r}=e,a=u().kk5.fromAutomation(o);n()(a.isEventType());const s={id:r.id,spaceId:r.space_id,table:M().cv},{value:l}=(0,c().R)({automationModel:a,visitors:{visitCollectionProperty:void 0,visitRecordPointer:e=>{const t=i({requested:e,requester:s});if(t){const e=t.spaceId??o.space_id;return e!==o.space_id?{type:"replace",value:void 0}:{type:"replace",value:{...t,spaceId:e}}}return{type:"replace",value:void 0}}}});n()(l.isEventType());const d=l.getTrigger();o.trigger=d;const p={sourceAutomationParentId:r.parent_id,sourceAutomationId:r.id,sourceAutomationName:(null===(t=r.properties)||void 0===t?void 0:t.name)??""};o.trigger.event.source||(D().log({data:{miscDataToConvertToString:p},from:"duplicateHelpers.duplicateAutomationEventValueHelper",level:"info",type:"duplicateAutomationMissingTriggerSource"}),o.status="disabled")}({duplicateRecord:r,mapper:a,originalRecord:i})}function ue(e){const{originalRecord:t,duplicateRecord:o,mapper:n,getRecordRole:i,options:r,originOptions:a,duplicateBlocks:l=!0}=e,c=t.space_id!==o.space_id,d={table:m().Xj,id:t.id,spaceId:t.space_id},u=n({requested:p().dr.fromPointerLike({table:o.parent_table,id:o.parent_id,spaceId:o.space_id}),requester:d}),f=g({duplicatedAction:o,mapper:n,options:r.resolveAutomationConfig,originOptions:a,sourceSpaceId:t.space_id});let v=i;f&&(v=Z().DH.tryUntilFound(...Array.from(f).map((e=>Z().DH.constantForPointer(e,"editor"))),v));const h=(null==u?void 0:u.id)??o.parent_id;if(o.parent_id=h,c&&"http_request"===o.type&&o.config){o.config.url=void 0;for(const e of o.config.customHeaders??[])e.value=""}const _=(0,S().o0)(o);if(_){_.some((e=>{const t=v(e.pointer);return!t||!(0,L().yY)(t,e.minimumRequiredRole)}))&&(o.config={})}const b=(o.blocks??[]).map((e=>{var t;return null===(t=n({requested:p().dr.fromPointerLike({table:P().iU,id:e,spaceId:o.space_id}),requester:d}))||void 0===t?void 0:t.id})).filter(s().$K);o.blocks=b.length>0?b:void 0,l||(o.blocks=void 0)}function pe(e){const{rootSourceBlockIds:t,childSourcePointer:o,getSourceRecordValue:n}=e;for(const i of(0,V().BW)(o,n))if(me({rootSourceBlockIds:t,recordWithTable:i}))return!0;return!1}function me(e){const{recordWithTable:t,rootSourceBlockIds:o}=e;if(t.table!==P().iU)return t.table===m().Xj;if(o.includes(t.value.id))return!1;if(u().kk5.fromBlock(t.value).isTemplateVariableContainerBlock())return!0}function fe(e){const{mapper:t,requested:o,requester:n}=e,i=t({requested:o,requester:n});if(!i)throw new Error(`Unable to find mapped duplicate for ${o.table} ${o.id} while duplicating ${n.table} ${n.id}`);return i}function ge(e){const{mapper:t,requested:o,requester:n,table:i}=e,r=fe({mapper:t,requested:o,requester:n});if(!(0,p().$O)(r,i))throw new Error(`Expected mapped duplicate for ${o.table} ${o.id} to be a ${i}, but it is a ${r.table} (while duplicating ${n.table} ${n.id})`);return r}},817629:(e,t,o)=>{o.d(t,{e:()=>r,n:()=>i});var n=()=>o(955620);function i(e){const t=r([n().V3y(e)]);return n().QaF(t)}function r(e){const t=n().QaF(e);if(0===t.trim().length||void 0===e)return[n().V3y(t)];const o=e[e.length-1];if(n().QJH(o)){return[...e.slice(0,e.length-1),a(o)]}return[...e,a([""])]}function a(e){const t=e=>`(${e})`,{title:o,digit:i}=function(e){const t=e.trimEnd(),o=t.split(" "),n=function(e){if(e.length<3||!e.startsWith("(")||!e.endsWith(")"))return;const t=e.substring(1,e.length-1),o=parseInt(t);return!Number.isNaN(o)&&o>0&&function(e){return Boolean(e.match(/^[1-9][0-9]*$/))}(t)?o:void 0}(o[o.length-1]);let i=t;if(void 0!==n){const e=o.slice(0,o.length-1).join(" ");i=e.length>0?e:void 0}return{title:i,digit:n}}(e[0]),r=void 0===o?"":`${o.trimEnd()} `,a=t(void 0===i?1:i+1);return n().V3y(`${r}${a}`)}},416593:(e,t,o)=>{o.d(t,{A_:()=>r,RO:()=>c,XW:()=>l,lO:()=>s,to:()=>a,x_:()=>i});var n=()=>o(513670);const i=.5,r=4.9,a=.1,s=1;function l(e){switch(n().uZ(n().NM(e,1),i,r)){case i:return 155;case.6:return 128;case.7:return 108;case.8:return 94;case.9:return 83;default:return 75}}function c(e){const t=n().uZ(n().NM(e,1),i,r);switch(t){case i:return 273;case.6:return 228;case.7:return 195;case.8:return 171;case.9:return 151;case 1:return 136;case 1.1:return 123;case 1.2:return 113;case 1.3:return 105;case 1.4:return 97;case 1.5:return 91;case 1.6:return 85;default:return Math.max(85-Math.floor(10*(t-1.6)*5),0)}}},455530:(e,t,o)=>{o.d(t,{Cm:()=>ee,Dz:()=>oe,Kz:()=>u,Ol:()=>ie,QA:()=>p,SR:()=>j,TT:()=>m,Wb:()=>te,Z8:()=>le,_c:()=>z,tj:()=>ne,x$:()=>se,xL:()=>X,y_:()=>v});o(670560),o(267602),o(653476),o(241792),o(228244),o(398858),o(461318),o(33228);var n=()=>o(513670),i=()=>o(916673),r=()=>o(326966),a=()=>o(156642),s=()=>o(225339),l=()=>o(326177),c=()=>o(572680),d=()=>o(955620);const u=930,p=320,m=708,f=700,g=500;function v(e,t){if(e&&t){const o=i().Qc(e).pathname||"";return o.substring(o.length-t.length,o.length).toLowerCase()===t}return!1}const h=/^(https?:)?(\/\/)?app\.hex\.tech\/[^\/]+\/app\/[^\/]+/;const _=/^(https?:)?(\/\/)?embed\.deepnote\.com\/[^\/]+/;const b=/^(https?:)?(\/\/)?gist\.github\.com\/([^\/]+\/)?[0-9a-f]+/;const y=/^(https?:)?(\/\/)?(drive|docs|sheets)\.google\.com\/(open|(document|spreadsheets|presentation)\/d\/).+/;const S=/^(https?:)?(\/\/)?docs\.google\.com\/document\/d\/[^\/]+\/edit.*/;function w(e){return S.test(e.url)}const k=/^(https?:)?(\/\/)?docs\.google\.com\/presentation\/d\/[^\/]+\/edit.*/;function I(e){return k.test(e.url)}const C=/^(https?:)?(\/\/)?docs\.google\.com\/spreadsheets\/d\/[^\/]+\/edit.*/;const x=/^(https?:)?(\/\/)?(twitter|x)\.com\/[^\/]+\/status\/[^\/]+/;const T=/^(https?:)?(\/\/)?(www\.)?google\.com\/maps\/.+/;const M=/^(https?:)?(\/\/)?framer\.cloud\/.+/;const P=/^(https?:)?(\/\/)?(www\.)?whimsical\.com\/.+/,A=/^(https?:)?(\/\/)?(www\.)?whimsical\.com\/blog\/.+/;const R=/^(https?:)?(\/\/)?(www\.)?miro\.com\/app\/.+/;const B=/^(https?:)?(\/\/)?app\.abstract\.com\/share\/.+/,E=/^(https?:)?(\/\/)?share\.goabstract\.com\/.+/;const D=/^(https?:)?(\/\/)?sketch\.(com|cloud)\/s\/.+/;const U=/^(https?:)?(\/\/)?excalidraw\.com\/.+/;const F=/^(https?:)?(\/\/)?(replit\.com|repl\.it)\/.+/;const N=/^(https?:)?(\/\/)?invis\.io\/.+/,V=/^(https?:)?(\/\/)?invisionapp\.com\/.+/,L=/^(https?:)?(\/\/)?invisionapp\.com\/inside-design\/.+/;const O=/^(https?:)?(\/\/)?(?:eu\.)?mixpanel\.com\/(project|s|public|report|p)\/.+/;const Z=[".png",".jpg",".jpeg",".gif",".tif",".tiff",".bmp",".svg",".heic",".webp"];function j(e){return(0,s().g_)(e.url)||(0,s().ef)(e.url)||Z.some((t=>v(e.url,t)))}const K=[".mp3",".wav",".ogg",".oga",".m4a"];function z(e){return K.some((t=>v(e.url,t)))}const H=/^(https?:)?(\/\/)?(www\.)?youtube\.com\/[watch|embed].+/,q=/^(https?:)?(\/\/)?vimeo.com\/[0-9]+/;const W=/^(https?:)?(\/\/)?([\w\.-]+\.)?figma.com\/(file|proto|board|design|slides|deck)\/([0-9a-zA-Z]{22,128})(?:\/.*)?$/;const G=/^(https?:)?(\/\/)?(www\.)?(use)?loom\.com\/share\/.+/;const $=/^(https?:)?(\/\/)?[\w\.]+\.typeform\.com\/to\/.+/,Q=/^(https?:)?(\/\/)?[\w\.]+\.typeform\.com\/.+/;const Y=/^(https?:)?(\/\/)?codepen\.io\/[^\/]+\/pen\/.+/;const J=[".webm",".mkv",".flv",".flv",".vob",".ogv",".ogg",".drc",".gifv",".mng",".avi",".mov",".qt",".wmv",".yuv",".rm",".rmvb",".asf",".amv",".mp4",".m4p",".m4v",".mpg",".mp2",".mpeg",".mpe",".mpv",".mpg",".mpeg",".m2v",".m4v",".svi",".3gp",".3g2",".mxf",".roq",".nsv",".flv",".f4v",".f4p",".f4a",".f4b"];function X(e){return J.some((t=>v(e.url,t)))}function ee(e){if(!(0,l().Z)(e.url))return!1;const t=(0,c().parseRoute)({url:e.url,baseUrl:e.baseUrl,publicDomainName:e.publicDomainName,isMobile:!1,protocol:void 0,currentUrl:void 0});return!(0,c().iJ)(t)}const te={image:j,video:function(e){return X(e)||H.test(e.url)||q.test(e.url)},tweet:function(e){return x.test(e.url)},drive:function(e){return y.test(e.url)},gist:function(e){return b.test(e.url)},invision:function(e){return!j(e)&&!L.test(e.url)&&(N.test(e.url)||V.test(e.url))},framer:function(e){return M.test(e.url)},audio:z,maps:function(e){return T.test(e.url)},figma:function(e){return W.test(e.url)},loom:function(e){return G.test(e.url)},typeform:function(e){return $.test(e.url)||Q.test(e.url)},codepen:function(e){return Y.test(e.url)},pdf:function(e){const t=i().Qc(e.url);return Boolean(t.pathname&&t.pathname.indexOf(".pdf")>=0)},whimsical:function(e){return P.test(e.url)&&!A.test(e.url)},miro:function(e){return R.test(e.url)},abstract:function(e){return B.test(e.url)||E.test(e.url)},sketch:function(e){return D.test(e.url)},excalidraw:function(e){return U.test(e.url)},replit:function(e){return F.test(e.url)},embed:function(e){if(!(0,l().Z)(e.url))return!1;const t=(0,c().parseRoute)({url:e.url,baseUrl:e.baseUrl,publicDomainName:e.publicDomainName,isMobile:!1,protocol:void 0,currentUrl:void 0});return!(0,c().iJ)(t)&&!r().XP(te).filter((e=>"embed"!==e)).map((e=>te[e])).some((t=>t(e)))},hex:function(e){return h.test(e.url)},mixpanel:function(e){return O.test(e.url)},deepnote:function(e){return _.test(e.url)},drawing:function(e){return!1}};function oe(e){const{preferredType:t}=e,o=r().XP(te),n=[];for(const i of o)if(te[i](e)){if(i===t&&"embed"!==t)return i;n.push(i)}return n.length>0?n[0]:"embed"}function ne(e){const{width:t,height:o,scale:n,type:i,pageWidth:r}=e,a={block_width:t,block_height:o,block_preserve_scale:Boolean(n),block_full_width:!1,block_page_width:!1};return"embed"===i||"pdf"===i?(a.block_page_width=!a.block_width,a.block_height=o||p):"video"===i&&o?(a.block_page_width=!0,a.block_aspect_ratio=o/t):"image"===i&&o?a.block_aspect_ratio=o/t:"audio"===i||"maps"===i?(a.block_width=void 0,a.block_page_width=!0):"whimsical"===i||"framer"===i||"miro"===i||"excalidraw"===i?(a.block_width=void 0,a.block_page_width=!0,a.block_height=400):"replit"===i&&(a.block_width=void 0,a.block_page_width=!0,a.block_height=600),t>r&&(a.block_page_width=!0,"image"!==i&&"video"!==i||(a.block_height=void 0)),a}async function ie(e){const{type:t,isDataURL:o,source:n,trackEmbedType:i}=e;return function(e){const{type:t,isDataURL:o,url:n}=e;if(t===a().Ti.tweet||t===a().Ti.gist||t===a().Ti.figma||t===a().Ti.audio||t===a().Ti.image||o||t===a().Ti.invision||t===a().Ti.pdf||t===a().Ti.drive&&(w({url:n})||I({url:n})))return!0;return!1}({type:t,isDataURL:o,url:n})&&i(t),t===a().Ti.tweet?function(e){const{source:t}=e;return{type:"tweet",properties:{source:d().TPx(t)},format:{display_source:void 0}}}(e):t===a().Ti.gist?function(e){const{source:t}=e;return{type:"gist",properties:{source:d().TPx(t)},format:{display_source:void 0}}}(e):t===a().Ti.figma?function(e){const{source:t}=e,o=t.replace("www.figma.com","embed.figma.com"),n=new URL(o);return n.searchParams.append("embed-host","notion"),n.searchParams.append("footer","false"),n.searchParams.append("theme","system"),{type:"figma",properties:{source:d().TPx(n.href.toString())},format:{display_source:void 0,block_height:p}}}(e):t===a().Ti.audio?function(e){const{source:t}=e;return{type:"audio",properties:{source:d().TPx(t)},format:{display_source:void 0}}}(e):t===a().Ti.image||o?function(e){const{source:t}=e;return{type:"image",properties:{source:d().TPx(t)},format:{display_source:t}}}(e):t===a().Ti.invision?function(e){const{source:t}=e;return{type:"invision",properties:{source:d().TPx(t)},format:{display_source:void 0,block_height:p}}}(e):t===a().Ti.pdf?function(e){const{source:t}=e;return{type:"pdf",properties:{source:d().TPx(t)},format:{display_source:void 0,block_height:p}}}(e):t===a().Ti.drive&&w({url:n})?async function(e){const{source:t,type:o,pageWidth:n,getEmbedData:i}=e;if(t.includes("preview")){const e=await i({source:t,pageWidth:n,type:o});if(e&&!e.empty)return e}return{type:o,properties:{source:d().TPx(t)},format:{display_source:t,block_height:p}}}(e):t===a().Ti.drive&&I({url:n})?async function(e){const{source:t,type:o,pageWidth:n,isMobileDevice:i,getEmbedData:r}=e,a=await r({source:t,pageWidth:n,type:o});if(a&&!a.empty)return a;return{type:o,properties:{source:d().TPx(t)},format:{display_source:t,block_height:i?p:g,block_width:f}}}(e):t===a().Ti.drive&&function(e){return C.test(e.url)}({url:n})?async function(e){const{source:t,type:o,pageWidth:n,getEmbedData:i,isMobileDevice:r}=e;if(t.includes("preview")){const e=await i({source:t,pageWidth:n,type:o});if(e&&!e.empty)return e}return{type:o,properties:{source:d().TPx(t)},format:{display_source:t,block_height:r?p:g,block_width:f}}}(e):(i("generic"),async function(e){const{pageWidth:t,getEmbedData:o,source:n,type:i}=e,r=await o({source:n,pageWidth:t,type:i});if(r&&!r.empty)return r;let s=i,l={...ne({type:i,width:400,height:void 0,scale:!1,pageWidth:t}),display_source:n},c={source:d().TPx(n)};null!=r&&r.headerValidationFailed&&function(e){if("drive"===e||"figma"===e||"gist"===e||"invision"===e)return!1;return!0}(s)?(s=a().Ti.bookmark,l={},c={link:d().TPx(n),title:d().TPx(n)}):(l={block_height:p},c={source:d().TPx(n)});return{type:s,properties:c,format:l}}(e))}const re=["http:","https:"],ae="http:";function se(e){if((0,s().P8)(e))return e;const t=i().Qc(e);let o=e;if(t.protocol){if(re.indexOf(t.protocol)<0){const n=e.slice(t.protocol.length);o=`${ae}${n}`}}else o=`${ae}//${(0,n().R5)(e,"/")}`;return o}function le(e){var t,o,n,r,a;const s=i().Qc(e,{slashesDenoteHost:!0});if(!s)return e;if(s.host&&s.host.endsWith(".embedly.com")&&s.query.src)return s.query.src;if("www.youtube.com"===s.hostname&&"/watch"===s.pathname&&s.query&&s.query.v)return i().bf({url:`https://www.youtube.com/embed/${s.query.v}`,query:{...s.query,v:void 0}});if("whimsical.com"===s.hostname&&s.pathname){const e=s.pathname.split("/").slice(-1)[0];return i().bf({url:`https://whimsical.com/embed/${e}`})}if("miro.com"===s.hostname&&s.pathname){const e=s.pathname.split("/")[3],t=s.query.playRecording?s.query.playRecording:void 0;return i().bf({url:`https://miro.com/app/live-embed/${e}/`,query:{embedMode:t?"board_recording_player":"view_only_without_ui",autoplay:"true",playRecording:t}})}if(null!==(t=s.hostname)&&void 0!==t&&t.includes("replit.com")||null!==(o=s.hostname)&&void 0!==o&&o.includes("repl.it")){return"true"===new URLSearchParams(e).get("lite")?e:i().SK(e,{lite:"true"})}if(null!==(n=s.hostname)&&void 0!==n&&n.includes("docs.google.com")&&null!==(r=s.pathname)&&void 0!==r&&r.includes("presentation")&&null!==(a=s.pathname)&&void 0!==a&&a.includes("/edit")){const e=s.pathname.replace("/edit","/preview");return i().bf({url:`https://${s.hostname}${e}`,query:{...s.query},hash:s.hash||void 0})}return e}},464140:(e,t,o)=>{o.d(t,{RI:()=>r});var n=()=>o(431595),i=()=>o(122792);function r(e){const t=function(e){const{space:t,spaceUser:o}=e;if(void 0===t||null==o||!o.isWorkspaceOwner())return new(n().XV)("You do not have permissions to this feature in the requested space.",{type:"generic_insufficient_permissions"});return a(t)}(e);return void 0===t}function a(e){if(!(0,i().wP)(e.getSubscriptionTier()))return new(n().XV)("The feature is not available on your current plan type.",{type:"generic_insufficient_plan_type"})}},534200:(e,t,o)=>{o.d(t,{HX:()=>_,fK:()=>h,$A:()=>v,Jq:()=>b,j2:()=>m,Pv:()=>y,j:()=>S});o(267602),o(653476),o(30005),o(398858),o(461318),o(33228);var n=()=>o(513670),i=()=>o(792409),r=()=>o(342792),a=()=>o(468353),s=()=>o(506347);var l=()=>o(799891);let c,d;const u=new(s().nY)((async e=>{const{config:t,endpoint:n,deviceId:i}=e,l=await o.e(89543).then(o.bind(o,954316));return await new Promise((e=>{const u=`${new URL(t.domainBaseUrl).origin}${t.api.http}/${n}`;let p;i&&(p=i.startsWith("w_")||i.startsWith("a_")?i.replaceAll("-",""):(0,r().XR)(i));const m=p;l.init("notion","",{serverUrl:u,deviceId:m,autocapture:!1,identityStorage:"localStorage",flushQueueSize:50}),t.env,d="2023092001",e(l),function(){const e=(0,o(916673).gy)(c||"");if(!e)return;const t={utm_campaign:e.searchParams.get("utm_campaign")||a().cL,utm_content:e.searchParams.get("utm_content")||a().cL,utm_medium:e.searchParams.get("utm_medium")||a().cL,utm_source:e.searchParams.get("utm_source")||a().cL,utm_term:e.searchParams.get("utm_term")||a().cL};h({traits:(0,s().bt)({...t})})}()}))}));function p(e){const{eventName:t,eventProperties:o,groupProperties:r,statusCode:a,message:s}=e,c={data:{eventName:t,eventProperties:n().CE(o,"experiments"),groupProperties:r},statusCode:a,message:s};l().rateLimitedLog({level:"error",from:"eventTrailApiHelpers",type:"trackFailure",error:(0,i().Ui)(c)})}async function m(e){c=window.location.href;const{config:t,isEnabled:o,endpoint:n,deviceId:r}=e;try{await u.load({config:t,isEnabled:o,endpoint:n,deviceId:r})}catch(a){l().log({level:"error",from:"eventTrailApiHelpers",type:"initialize",error:(0,i().Ui)(a)})}}async function f(e){const{traits:t,traitsWithOperations:n}=e,i=new(await async function(){const{Identify:e}=await o.e(89543).then(o.bind(o,954316));return e}());if(t)for(const o of Object.keys(t)){const e=t[o];void 0!==e&&(Array.isArray(e)?i.append(o,e):i.set(o,e))}if(n)for(const o of n)"set"===o.operation?i.set(o.name,o.value):"setOnce"===o.operation&&i.setOnce(o.name,o.value);return i}async function g(e,t,o){const n=t.getUserProperties(),i=await o.track({event_type:e,event_properties:n,version_name:d}).promise;200!==i.code&&p({eventName:e,eventProperties:n,groupProperties:void 0,statusCode:i.code,message:i.message})}async function v(e){const{userId:t,traits:o,spaceIds:i}=e,a=await u.getInstance();if(!a)return;a.setUserId((0,r().XR)(t));const s=await f({traits:o});return i&&s.set("workspace",n().jj(i)),g("$identify_user",s,a)}async function h(e){const{traits:t}=e,o=await u.getInstance();if(!o)return;return g("$identify_device",await f({traitsWithOperations:t}),o)}async function _(){const e=await u.getInstance();null==e||e.setUserId(void 0)}async function b(e){const{spaceId:t,spaceData:o}=e;if(!t)return;const i=await u.getInstance();if(!i)return;const r=n().d9(o),a=Object.entries(r).filter((e=>{let[t,o]=e;return Array.isArray(o)}));a.forEach((e=>{let[t,o]=e;return delete r[t]}));let s=await f({traits:r});a.forEach((e=>{let[t,o]=e;return s=s.set(t,o)})),i.groupIdentify("workspace",t,s)}async function y(e){const t=await u.getInstance();t&&t.setDeviceId((0,r().XR)(e))}async function S(e){const{eventName:t,eventData:o,spaceId:n}=e,i=await u.getInstance();if(!i)return;const r=n?{workspace:n}:void 0,a=await i.track({event_type:t,event_properties:o,groups:r,version_name:d}).promise;200!==a.code&&p({eventName:t,eventProperties:o,groupProperties:r,statusCode:a.code,message:a.message})}},801916:(e,t,o)=>{o.d(t,{AL:()=>u,DP:()=>_,KM:()=>c,LI:()=>M,NC:()=>D,TL:()=>g,TS:()=>b,T_:()=>a,XY:()=>S,YY:()=>A,_n:()=>R,b2:()=>x,dn:()=>T,g6:()=>s,i1:()=>d,l4:()=>y,nb:()=>B,pX:()=>E,pz:()=>f});o(821057),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(470928);var n=()=>o(696459),i=()=>o(326966);const r={indexeddb_graceful_fallback_to_in_memory_queue:["on"]},a=((0,n().Yd)(r),["ios_enable_prefetching","load_cached_page_chunk_multi_cell_enabled","multi_cell_aware_apis","mobile_app_launch_blank_page","download_for_offline","refetch_offline_pages","single_electron_service_worker_registration"]),s={"search-vectors":["log-norm","min-max-norm","cohere-snippets"],"search-no-local-blending":["on"],"search-debug-only-no-recent-boosting":["on"],"search-shorten-inactive-timer":["0","10","30","60","90"],"search-debug-only-force-random-sample":["on"],"search-debug-force-log-signals":["on"],"search-more-recent-pages-in-local":["lazy-100","lazy-200","lazy-500","lazy-1000"],"search-new-local-recall-v2":["v1","v2","v3","v4"],"search-query-expansion":["prefix-completion","word-splitting","spell-correction","all"],"search-debug-force-no-rerank":["on","always-rerank"],"vector-naive-ranker":["on"],"search-mention-model-feature-logging":["on"],"search-mentions-models":["v1","v2","dev"],"search-no-neg-boost-relation-search":["on"],"search-negative-boost-only-quickfind":["on"],"search-negative-boost-tuning":["0.01","0.1","0.25","0.5"],"search-no-bot-downrank":["on"],"search-use-local-reranker-layered":["on"],"search-include-all-local-sources":["on"],"search-local-edited-pages-max":["3","8","15"],"search-local-sim-users-edited-pages-max":["3","8","15"],search_supplement_possible_ancestors:["on"],search_local_ranking_new_frecency_and_score:["search_frecency_store","search_frecency_store_new_recency_score"],search_use_cld_language_detection:["on"],search_downrank_sync_bots:["jira-10","jira-100"],search_refresh_user_signals:["on"],search_quickfind_prefetch:["on"],search_warm_cache:["on"]},l={simplified_email_subject_line:["on"],mobile_push_notification_reply_action:["on"],inbox_2_0:["internal_prototype_time_grouping"],access_request_email_reminder:["on"],posts_prototype:["on"],feed_collection_view:["on"],inbox_activity_split:["on"]},c=["assistant_0.25_with_marketing","assistant_0.3","development","exploratory"];function d(e){const{mode:t,currentMode:o}=e,n=["control",...c];return n.indexOf(t)<=n.indexOf(o)}const u="assistant_0.25_with_marketing",p={assistant_variant:c,ai_search_query_expansion:["single_stack","double_stack"],ai_actions_on_paste_experiment:["on"]},m={ai_qna_alternative_embeddings:["cohere"],qna_abandoned_search_reminders:["on"],qna_show_assistant_origin_input:["on"],qna_show_large_reminders:["on"],qna_show_page_suggested_questions:["on"],qna_vectorless_enabled:["last_edited_200_pages","es_query_n_last_edited_200_pages","es_query_n_last_edited_k_pages"],assistant_show_summarize_this_page_reminder:["on"]},f=["deep_dive","quick_find","end_to_end"];function g(e){const{mode:t,currentMode:o}=e,n=["control",...f];return n.indexOf(t)<=n.indexOf(o)}const v={unified_find_variant:f},h={...r,...s,grant_access_via_mentions:["on"],share_menu_searchable_toggle:["on"],share_menu_cleanup_experiment_v2:["on"],...l,guest_sidebar_locked:["on"],guest_sidebar_locked_v2:["on"],improve_logged_out_landing_exp_desktop:["on"],improve_logged_out_landing_exp_mobile:["on"],workspace_survey_enable_second_workspace:["on"],desktop_download_sidebar_callout:["on"],desktop_callout_copy_performance:["on"],direct_download_desktop_sidebar:["on"],import_google_contacts:["on"],workflow_template_customization_onboarding:["replace_app_templates_with_workflow_templates","onboarding_customize_workflow_templates","onboarding_land_and_customize_workflow_templates"],contextualized_onboarding_education_flow:["on"],mobile_friendly_onboarding_templates_personal:["on"],mobile_friendly_onboarding_templates_personal_non_en:["on"],cro_shorten_new_user_verification:["on"],remove_persona_teamspace_templates:["no_persona_teamspace_or_templates","persona_templates_only","remove_all_templates"],cro_new_signup_code_email:["on"],cro_remove_google_onetap_from_signup_page:["on"],cro_land_perf_mark_template_related_search_routing:["on"],onboarding_use_cases_step:["use_cases_step_app_templates","use_cases_step_workflow_templates"],onboarding_create_workflow_templates:["generic_workflow_templates","persona_specific_workflow_templates"],improve_onboarding_profile_step:["on"],mobile_user_activation_android_land_on_home_v2_exp:["on"],mobile_user_activation_ios_land_on_home:["on"],mobile_user_activation_ios_land_on_home_new_user:["on"],mab_refresh_personalization:["v1","v2"],mobile_lightweight_editor_prompt:["on"],mobile_getting_started:["v1","v2","v3"],mobile_onboarding_educational_refresh:["v1","v2","v3"],in_app_contact_sales_cta_billing:["on"],block_management:["on"],contact_sales_promo_v2:["on"],formula_assistant:["on"],guest_limit_policy:["on"],krw_prices:["on"],jpy_prices:["on"],lairt:["on"],largesse:["on"],lic:["lic_25","lic_50"],mobile_web_subscriptions:["on"],mp_lairt:["on"],new_year_2025:["on"],prices_test_country:["US","DE","GB","JP","KR","CH"],quick_workspace_creation:["on"],settings_refresh_2025:["on"],subscription_elements:["payment_and_address","payment"],template_dynamic_trending_categories:["static","dynamic"],template_gallery_feed_ranking_v3:["v31","v32","v33","v34"],marketplace_3p_link_treatment:["on"],marketplace_checkout_move_tc_checkbox:["on"],in_app_related_templates:["on"],template_dynamic_top_categories:["on"],template_search_ranking:["templates_wilson_score"],asana_to_single_team_space:["on"],asana_import_by_batch:["on"],csv_adaptiveschema:["on"],feature_settings_experiment:["on"],packaging_db_empty_states:["on"],packaging_m2_entry_point:["generic","personalized"],database_ai_summary_suggestion:["on"],qna_chunk_size:["small","180","240","360","480"],"025m_ai_launch_entrypoints":["corner","writer"],ai_collection_view_entrypoint:["none","button","search_input"],ai_new_page_pills:["help_me_write","write_with_ai"],new_assistant_corner_chat_suggestions:["show_all_sections","suggested_sections_depend_on_content"],ai_signup_redirect_to_writer:["writer"],css_margins:["enabled","double_space"],public_api_cache_collection_experiments:["on"],...v,login_with_microsoft:["on"],zendesk:["on"],highlight_legacy_transclusions:["on"],iframely_switch:["on"],request_membership:["on"],parallel_confluence_importer:["on"],parallel_confluence_importer_via_api:["on"],special_case_confluence_file_size:["on"],special_case_pdf_file_size:["on"],confluence_dynamic_batch_size_temp:["on"],confluence_server_allow_requests:["on"],confluence_logs:["on"],confluence_api_v2:["on"],confluence_search_api:["on"],link_preview_resizing_api:["on"],enable_google_drive_external_integration:["on"],show_instruction_on_auth_popup_blocked:["on"],teamspace_guests:["on"],monday_importer:["on"],pdf_importer:["on"],migrate_confluence_into_teamspace:["on"],generic_importer:["on"],slash_command_import:["on"],special_case_generic_file_size:["on"],android_3rd_party_login_with_external_browser:["on"],ios_3rd_party_login_with_external_browser:["on"],block_limit_delay:["on"],prioritize_slash_menu_block_placeholder:["on"],slash_menu_tooltip:["on"],wiki_education_convert_modal:["bottom_right"],remove_updates_topbar_button_v2:["on"],avoid_empty_eoip_creation_unfurl_collection:["on"],jira_import_and_sync:["on"],jira_sync_data_center_integration:["on"],...p,...m,indexeddb_graceful_fallback_to_in_memory_queue:["on"],allow_auth_with_app_browser_for_mobile:["on"],property_creation_tooltips_exp:["on"],marketing_mwn_api_kill_switch:["on"],dynamic_social_preview_image:["on"],floating_table_of_contents_variants:["floating_left","floating_right","hug_content_left"],dictation_experiment_v2:["on"],export_attachments_with_page:["on"],search_surfaces_relation_search:["on"],search_surfaces_collection_search:["on"],marketing_cookie_sync_experiment_signup_login:["treatment","check_query_param"],sites_server_side_page_chunk:["on"],slash_menu_experiment_3_existing_users:["simplified_menu","default_suggestions","personalized_suggestions"],slash_menu_experiment_3_new_users:["simplified_menu","default_suggestions","personalized_suggestions"],sharing_logged_out_view_awtl:["banner","sidebar"]};function _(e){return Boolean(h[e])}const b=new Set([]),y=[...(0,n().Yd)(h)],S=[...y].sort(),w=["allow_mobile_home_redirect","sidebar_hover_expansion_v3","sidebar_pages_hide_toggles","sidebar_home_dev_gate","home_welcome_animation","home_cover_photo","home_recents_caching","update_user_space_access_kill_switch","page_verification","page_verification_packaging","page_verification_centralized_view","sidebar_add_new_pages_to_bottom","horizon_1_sidebar_panel_rollout","persisted_secondary_sidebar_state","share_menu_cleanup","share_menu_cleanup_ga"],k=["ai_template_filling_use_new_ai_blocks","attachment_show_ask_ai_in_images","assistant-labeler-mode","qna-reranker-skipped","experimental-cohere-only-for-personal-workspace","assistant-teacher-mode","rerank_slack_only_by_cohere","ai_button_automation_enabled","slack_qna_notification_tooltip_enabled","assistant_chat_with_pdf_use_images","claude-sonnet-rollout","anthropic_explicit_prompt_caching","load-web-page-rollout","find_related_content","compute_related_content","assistant_0point25_ux_rollout","zero_retention_routing_enabled","enable_slackbot_qna","enable_slackbot_qna_by_space","ai_assistant_helpdocs_scoped_search","assistant_enable_attachment_upload","collection_view_ai_button","full_page_translate","ambient_full_page_translate_suggestion","should_always_trace_run_assistant","assistant_basic_writer_mode","qna_enable_team_archive_filter","marketing_025_rollout","use_sonnet_for_run_assistant_routing","workflows","run_assistant_allow_dev_only_args","use-repos-filter-for-github-search","skip-pr-comment-hydration","inference_transcript","full_page_ai","merge-lexical-and-semantic-results","skip_verified_feature_from_qna_reranker","ai_feedback_logging_deny_list","assistant_should_use_fake_page_to_render_blocks","ai_unstable_message","ai_connectors_turbopuffer_dark_reads","assistant_new_years_resolution_skill","ai_picker_show_non_production_models","ai_workflows_monaco_code_editor","jira_vector_search_fallback_query","ai_disable_writer_auto_follow","qna-reranker-use-anyscale","workflows_debug_tools"],I=["show_limited_qna_label","enable_limited_qna","limited_qna_dark_read"],C=["vector_db_search","embeddings-enabled-for-spaceid","ai_connector_warm_up_vector_db_cache"],x=[...a,"replace_local_overrides_with_statsig","forms_max_selection_custom_options","retry_permanently_delete_tree_kill_switch","tablet_refresh_gate","tablet_refresh_template_pills_gate","state_management_in_new_monday_importer","email_confirm_tid_redirect","desktop_native_redirect_tid","populate_monday_comments_as_notion_comments","allow_cut_copy_comment","forms_submission_permissions","redirect_dot_so_to_dot_com","add_tid_on_dot_com_redirect","new_checkbox_design_enabled","dot_com_cookie_sync","notionscript","spreadsheet_prototype","validate_quasi_alive_block_enabled","should_create_teamspace_in_zip_importer","polyglot","enforce_write_once_permissions_for_space_updates","allow_dead_space_views_when_joining_space","throw_on_changing_unmanaged_scim_user","log_all_headers_for_unknown_scim_idp","enable_get_private_page_info_endpoint","client_deprecate_chunk_number_enabled","log_saml_response_on_error","highlight_quasi_alive_blocks_enabled","organization_console_enabled","organization_console_ga_enabled","organization_console_new_data_compliance_view_enabled","legal_holds_enabled","organization_console_group_single_view_modal","organization_onboarding_enabled_for_space","organization_is_source_of_truth","ban_copy_snapshot_data_enabled","debug_analytics","never_select_title_on_select_all","connected_relation","log_traces_to_splunk","log_space_traces_to_splunk","block_menu_shortcut_fix","display_date_in_user_timezone","scim_log_postgres_in_place_updates","remove_user_invited_group_notifications","public_api_dev_mode","enabled_bev_default_audience_filter","sprig","ai_multi_level_undo","ai_favorites","uploads_retry_all_immediately","prevent_saml_guest_login","fix_legacy_transclusions_on_duplicate","client-performance-profiler","react_18_concurrent_rendering",...w,"enable_notifications_processor","track_collaborative_page_view","updates_ai","posts_feed_on_home","posts_feed_include_unjoined_teams","self_queuing_reminder_tasks","allow_public_page_access_request","guest_sidebar_popup","marketing_signup_front_app","onboarding_templates_from_dynamic_configs","new_user_package_onboarding","contextualized_onboarding_debug_label","mail_signup_flow","onboarding_split_intent_question","enable_add_notion_face_in_setting","onboarding_use_cases_step_non_english_locales","sites_use_homepage_url_without_slugs","workflow_templates_prototype","workflow_templates_settings_dev","workflow_templates_builder","layout_view_module","layout_view_module_next","packaging_page_linking","packaging_page_linking_mobile","packaging_m2_additional_entrypoints","packaging_m2_localize_templates","collections_skip_default_record_cache_check","side_peek_transition_improvements","ai_setup_generator","ai_setup_generator_experimental","ai_setup_generator_followup","ai_setup_generator_layouts","ai_setup_generator_pages","relation_two_way_limit_of_1_add_relation_confirmation_dialog","workflow_container","packaging_m3.1","subitems_drag_drop_improvements","intelligent_collections_sort_modal","collection_groups_round_date_group_reducers","collection_client_log_looping_remote_request","collection_service_high_priority_space","collections_enterprise_workspaces","typed_db_migration","charts_next","charts_drilldown","collections_property_type_change_rename_group","collections_cached_relation_search","collection_view_update_counter","collections_column_virtualization","collections_xws_linked_view_fix","collections_xws","relations_show_deleted","relations_show_invalid_collection","relations_show_no_access","collections_system_db","collections_delay_render_offscreen","prefetch_inline_collection","collection_group_improvements","collection_template_local_duplicate","experimental_computed_store_defer_debounce","collection_test_removing_hidden_groups","collection_group_reducer_visible","forms_conditional_logic","collections_accessible_quick_action_buttons","full_access_for_created_collection_pages","collection_property_deletion_validation","collections_formula_load_record_model_permission_changes","drag_respects_relation_limits","timeline_item_date_range_functional","collection_timeline_view_item_new_functional","webhooks_beta","public_api_developer_survey","e_discovery","add_comments_on_blocks","install_dlp_integrations","webhooks_enable_nightfall","inactive_webhook_subscription_ui","public_api_bot_token_to_space","advanced_security_in_enterprise","apply_offer_migration","apply_reverse_trial_key","currency_gbp","deny_multiplayer_personal_plan_upgrade","guest_limit_debug_ui","jpy_prices","krw_prices","native_invoice_payment","nip_demo_code","sepa_debit","test_clocks","pshwm_use_effective_time_to_get_spaces_with_smus","timed_trial_task_runner_enabled","people_tab_date_added_column","kr_card_payment_method","russian_sanctions_banner_enabled","russian_sanctions_sales_assisted_banner_enabled","billing_data_read_write_killswitch_enabled","billing_data_write_killswitch_enabled","resurrection_offer","uncollectible_experience_enabled","midterm_refresh","post_upgrade_modal","in_app_request_upgrades","billing_data_backfill_migration_is_active","enable_localized_templates","enable_template_access_restriction","self_serve_localization_backend","self_serve_localization_frontend","self_serve_localization_flowdash","marketplace_echo_webhook_log","marketplace_payouts","track_dropped_installation_imprints","enable_queue_based_invoice_cleanup","marketplace_review_creator_response","marketplace_review_creator_response_creator_profile","template_listing_translation_use_phrase","template_listing_translate","template_algolia_sync_job","template_contentful_sync_job","template_approved_from_customerio","template_custom_email_snippet","marketplace_analytics_filters","marketplace_refund_webhook","marketplace_analytics_templates_chart","duplicate_block_await_post_submit_transaction","disable_template_screenshot_generation","duplicate_block_skip_free_chart_post_submit_transaction","enable_server_backed_local_duplicate_for_collection_template_picker","enable_local_duplication_for_non_marketplace_templates","enable_aggressive_screenshot_tool_awaiting","template_description_markdown_enabled","csv_schema_typed_merge","csv_validation_errors_fix","csv_relation_support","csv_twoway_relation_support","card_details_unified","trello_pagination_enabled","zip_importer_enabled","csvimport_force_datadog_trace_enabled","asana-new-post-import","improved_asana_importer_screens","monday_v2_enabled","monday_v2_page_mapping_enabled","monday_v2_error_table_enabled","show_crdt_warnings","disable_auto_crdt_upgrade","display_crdt_block_client","validate_comment_only_crdt_text_operations","desktop_close_confirmation_dialog","automation_button_send_gmail_notification","automation_updated_error_states","automation_load_collection_view_with_environment","automation_insert_blocks_top_bottom_page","automation_new_last_edited_by_transaction_validations","sites_custom_hostnames_skip_validation","sites_split_publish_actions","sites_custom_hostnames_no_require_subdomain","sites_apex_domain_aware_validation_info","enable_public_qna","enable_public_qna_sites","enable_embeddable_sites","enable_new_public_domain_delete_flow","enable_embeddable_sites_for_space","cron_connected_relation","notion_calendar_launch_modal","calendar_home_tile_open_in_zoom_app","calendar_home_tile_caching","calendar_auth_mmvp","prevent_edits_trash_server","prevent_edits_trash_public_api","cdrr_deletion_enabled","deleted_permission_validation","cdrr_deleted_from_trash_view","use_dynamo_for_permanent_deletion","cdrr_ignore_additional_parent_check_for_restore_block",...k,"typed_move_to_improved_search","search_index_collection_ranking_features","native-find-in-page","record_mention_indexing_enabled","record_mention_backfill",...C,...I,"ios_clear_selection_auto_dismiss_keyboard","delete_database_from_view_settings","mobile_assistant_prevent_clear_selection","mobile_open_links_in_external_browser","mobile_show_page_shimmer","mobile_skip_onboarding_timeout","mobile_keep_template_gallery_open","mab_debugging","mobile_move_to_restore_selection_v2","mobile_native_file_upload","new_page_navigation_fix","android_ei_gboard_delete_over_selection_fix","trash_dont_need_current_page","mobile_user_activation_template_gallery_refresh_gate","mobile_user_activation_android_template_pills_gate","mobile_user_activation_android_template_pills_new_user_gate","mobile_user_activation_ios_template_pills_gate","transaction-space-id-override","no_new_page_placeholder_text_gate","mobile_action_bar_fc_gate","enable-passkey-settings-on-mobile","mobile_use_bottom_sheet_popup_container","can_see_callout_modal_test","ui_guest_disable_changes","space_encoded_bot_token","allow_space_member_to_export_analytics","space_audit_log_s3_static_config","space_audit_log_s3_region_map","allow_customize_integration_headers","force_capture_public_api_datadog_trace","use_bot_token_checksum","content_search_filter_external_space_results","remove_public_file_dark_launch","use_space_recover_pages_id_v2","enable_notion_mail_settings_toggle","bypass_webhook_url_validation","multi_cell_sync_record_values","multi_cell_backlinks","multi_cell_aware_apis","load_cached_page_chunk_multi_cell_enabled","load_page_chunk_multi_cell_enabled","multi_cell_cron_api","multi_cell_check_file_permission","multi_cell_recursivelyindexrecords","multi_cell_get_signed_urls","fetch_backlinks_after_page_load","callouts_omnimodal","mwn_feature_modal","return_zero_in_app_messages","callout_show_dynamic_messages","faces_xsell_sidebar","student_offer_jan_2025_sidebar","enable_public_content_scanning","include_nonindexed_public_content_for_scanning","run_rules_engine_for_publish","ai_public_sites_scanning","export_html_search_engine_indexing","cove_send_manual_content_reports","cove_send_automated_content_reports","cove_allow_admin_actions","public_api_fulltext_search_enabled","integration_webhooks","self_serve_integration_webhooks","disable_integration_webhook_aggregation","integration_webhook_subscriptions_cache","integration_webhook_subscriptions_space_db_query","disable_integration_webhook_slack_messages","selectable_word_count","ai_co_editing","imagerenderer_disable_loading_lazy","content_reskin_toggle","enable_selectable_fc","simple_table_buffer","block_attribution","desktop_app_login_with_email_redirect","desktop_app_signup_hide_passcode","ios_app_signup_hide_passcode","user_data_consent_admin_bypass","link_preview_auth_with_server_integration","enable_deleted_page_indicator","forethought","download_for_offline","defer_remote_version_update_for_pending_tx","survey_data_writes","adding_extra_logs_in_eoi_retry_fg","allow_duplicate_scim_groups","update_formatted_name_on_scim_patch_user","saml_throw_on_temporary_password_use_case_mismatch","saml_enforced_disallow_send_temporary_password","audit_log_aes_event_read","audit_log_permanently_deleted_filter_enable","audit_log_event_name_column","deprecate_chunk_number_enabled","guest_invite_requests","drawing_block","slide_block","log_identify_cross_domain_device_ids","disable_ai_big_red_button","ai_data_sharing","convert_cut_paste_to_move","page_title_in_reranker","enable_giphy_feature_gate","admin_content_search_only_search_titles","legacy_slack_notifications","overlay_trap_focus","mobile_fix_ai_message_click","salesforce_connected_relation","slack_connected_relation","zendesk_ai_enabled","use_iframely_cards","enable_link_mentions","enable_link_mention_hover","hyperlink_hovers","new_bookmark","new_hover_designs_lp","transcript_feedback_button","use_new_import_notification","scim_patch_race_condition_resistant_operations","is_use_unpaginated_get_jira_fields","scim_use_postgres_in_place_queries","message_store_client_send_request_metric_enabled","audio_processor_client_send_request_metric_enabled","enable_organization_domain_claim","append_favorites","support_synced_database_automations","mobile_bridge_performance_logging","ai_source_picker","client_http_gzip","is_visibility_enabled_for_db_sync","disable_poll_jobs_for_collection_entities","export_new_structure","embed_block_fallback","marketing_mwn_api_kill_switch","marketing_mwn_api_paid_kill_switch","submit_contact_sales_kill_switch","marketo_form_kill_switch","enable_guest_export","collections_view_specific_client_mode_enabled","enable_vector_search_in_autotag","dark_fetch_autotag","enable_ai_suggested_properties","typed_move_to_improved_default_results","hide_orphan_blocks","wiki_perf_improvement_local_enabled","show_keep_existing_guests_modal","export_puppeteer_upgrade_v24","meeting_notes_transcript_consumer_setup","meeting_notes_transcript_new_consumer","meeting_notes_formatting_fix",...k,...I,"search_use_local_search_cache","deep_find_enable_query_gen","deep_find_enable_3p_sources","deep_find_enable_universal_blending","deep_find_enable_request_tracing","deep_find_render_and_hydrate_notion_pages","deep_find_use_query_gen_for_notion_search","deep_find_should_show_streaming_ux","unified_find_debug_tools",...C,"people_profile_popup","send_student_form_error_messages","disable_storage_manager_estimate","toc_nested_headings","mention_menu_page_headings","derived_property_sync_processor","enable_transcript_tab","mobile_native_external_link_fix","localized_parse_number","server_side_unsync_block_enabled","fix_quasi_alive_block_on_read_enabled","sync_session_cookie_verification","remove_apostrophe_for_maps_url","settings_console_analytics","settings_console_content_search","use_hierarchy_in_zip_importer","selectable_or_drop_target_listener_functional_component","editable_functional_component","audit_log_guest_membership_request","is_evernote_authpopup_closing_fix_enabled","webclipper_multicell","enable_oauth_from_desktop_ux_v2","inactive_webhook_subscriptions","should_extract_media_from_html","csv_export_in_user_timezone","slack_token_specification","enable_server_integrations_proxy","enable_custom_siem_integration","social_media_preview_image_render_page_metadata","enable_list_users_by_email_addresses","low_guest_limit","notion_ai_assistant_continuous_eval_sample_rate","partitioned_universal_importer","input_padding","block_reactions","article_extractor_enable","google_doc_importer","quip_importer","deterministic_ids_in_quip_importer","enforce_database_tables_quip_importer","page_permissions_api","ai_indexing_allowlist","image_cropping","image_cropping_aspect_ratios","image_cropping_reset","disable_jira_sync_source_for_members","jira_onboarding_tour","jira_dc_streaming_projects","jira_2_way_sync","preload_cutaway","comic_sans","floating_table_of_contents","is_third_party_qna_enabled","qna-default-lookback-all-time","slack_grid_ai_connector","code_block_preserve_indent","google_drive_qna_ingestion","google_drive_qna_initial_sync_disabled","ai_connector_discoverability","jira_qna_ingestion","github_qna","universal_qna_gdrive_get_recently_visited_files","universal_qna_gdrive_skip_hydration","include_academy_content_and_guides_in_ai_help_center_search","slack_multi_team_ingestion_enabled","ingestion_mapped_parent_spaces","ingestion_mapped_child_spaces","docs_clipboard_imagedata","prefer_high_level_operations","mobile_quick_capture_icons_redesign","search_notion_calendar_ltr_reranking_model","enable_github_aisummary_linkback","github_activity_comments","github_magic_words","show_github_connected_property_settings","enable_notion_activity_notifications_in_slack","slack_db_notification_default_props_untyped_dbs","slack_db_notification_default_properties","slack_bot_enable_slack_oauth_v2","markdown_support_for_slack","enable_extra_slack_bot_logs","in_app_startups_application","ai_assistant_universal_qna_web_search","ai_assistant_markdown","ai_assistant_router_v2_search_in_database","ai_assistant_router_v2_search","ai_assistant_router_v2_search_leap","ai_assistant_router_v2_action","ai_assistant_router_v2_action_leap","ai_assistant_router_v2_search_use_fireworks_ft_router_102","ai_assistant_router_v2_search_use_fireworks_llama3_1_70b","ai_assistant_router_v2_action_use_fireworks_llama3_1_70b","ai_assistant_router_v2_querygen_use_llama3p3_70b","ai_assistant_router_v2_querygen_use_llama3p3_70b_dedicated","ai_assistant_router_v2_querygen_use_fireworks_ft_router_102","ai_assistant_router_v2_querygen_add_dark_traffic","ai_inference_cell_routing","ai_team","show_session_expiration_error_message","mab_consider_navigation_top_page","space_skip_messagestore_publish","space_bypass_log_sampling","session_refresh_trust_rule_enabled","trust_rule_can_revoke_user","use_new_file_token_format","enterprise_trusted_domain_enabled","dls_use_admin_settings","enterprise_beta_trusted_domain_enabled","public_space_data_store_local_cache_disabled","custom_emojis","id_schema","id_schema_v1","force_update_celeaf_oncompositionend","formal_postgres_proxy","dictation_new_page_nux","organization_is_source_of_truth_for_saml","search-custom-action-results","sticky_inbox_date_buckets","locke","synctest","capi_v1","capi_v2","performance_debugging_toolbar","serve_experimental_client_build_dev","serve_experimental_client_build_dcz","load_page_chunk_omit_existing_record_versions","load_page_chunk_omit_ancestor_dependencies","send_request_ack_metric_enabled","content_export_checkpointing","enable_marketplace_seller","token_v2_clientside_refresh","workspace_member_access_notif_polish","state_management_in_monday_importer","preserve_text_around_links_confluence","add_headers_to_collection","preserve_line_breaks_table_cells","cf_importer_attachment_timeout","report_unconverted_links_to_page_mentions_confluence","preserve_spans_in_columns_confluence","dev_search_team_feature_gate","dont_rate_limit_public_content_ai_scans","csvimport_faster_navigate_to_page_enabled","slack_ingestion_use_new_handler","should_use_confluence_attachment_map","rules_engine_fetch_with_timeout","rules_engine_query_dynamo","docs_list_actions_remove_no_clone","update_roles_via_scim","create_v2_callouts","save_transactions_upgrade_callouts_to_v2","migrate_callout_to_v2_on_click","github_student_pack","log_messagestore_attempts","respect_error_retryable_enabled","enable_page_previews","enable_slack_embed_tooltips_actual","content_export_email_render","functional_scroller","load_page_flush","animated_list_item_block","assistant_replace_selection","new_bot_token_hash_writes","enable_token_store_caching","new_token_helpers","global_oauth_confirmation_ui","github_ai_connector_consumer_setup","jira_ai_connector_consumer_setup","serve_desktop_service_worker_gate","mobile_mab_mrr","mab_refresh_personalization_gate","new_bot_token_encrypt_secret_writes","dot_com_help_embeds","omit_space_from_page_cache","use_lrwa_in_getspaces","getspaces_filter_by_space_ids","getspaces_pagepointers_in_space","lucy-in-the-sky-with-tab-blocks","custom_jira_sync_flow_for_jira_members","beta-developers-external","db_permissions","db_permissions_user_gate","share_menu_inheritance_banner","space_lookup_search_engine_only","rules_engine_query_qwak_by_default","unfurl_disable_store_verify","record_cache_backfill_space_id","use_new_admin_api_request","editor_basic_rtl","multi_cell_savetransactions","image_sizing_v2","editor_prevent_quasi_alive_block","duplicate_snapshot_navigable_blocks_by_reference","mobile_embed_menu_cursor_fix","enable_workspaceId_updates_to_external_entity","z_indexes_relative","multi_cell_get_user_notifications","updated_color_picker","automation_generalized_recurrence","forms_ga","jira_dc_members_flow_enabled","jira_dc_basic_auth_enabled","enhanced_slash_menu_logic","enqueue_update_user_badge","simplified_slash_menu","github_ai_connector_paused","record_map_logging","dont_load_users","in_memory_cache_logging","ios_native_drag_handler_delay","gmail_action_redirect_improvements","route_import_issues_to_resync","disable_tasks_resync_on_view_event","scheduled_event","google_drive_qna_enable_disconnect_for_sync_failures","google_drive_ingestion_use_instantiated_google_sdk","mail_aes_message_processor","universal_qna_delete_downgraded_space_ai_connector_data","automations_dev_tools","ks_dev_settings","record_title_rich_text","encrypted_text_block","export_skip_merge_final_zip","automations_disable_cross_space_fetch","load_cached_page_chunk_button_children","selectable_top_margin","use_new_request_component","use_new_import_options","replace_zerobounce_with_mailgun","gmail_action_formula_recipients","enable_jira_multi_cell_changes","new_sonnet_rollout","easy_ai_dismiss","filter_orphaned_external_instance_pointers","enable_jira_timeline_sync","bypass_space_user_check_for_external_object_update","is_force_update_external_object_for_sync","salesforce_connected_relation_database_actions_enabled","connected_relations_database_actions_enabled","block_disallowed_external_auth_proxy_paths","use_eap_secureexternalpreview","resizable_code_block","similar_user_page_presence_store","pause_jira_resync","split_google_creds","export_empty_properties","export_skip_external_collections","log_show_error_page","microsoft_teams_qna","show_collection_pill_at_page_level_for_jira","plus_button_between_blocks","login_delay_app_reset","publish_site_automation_action","slack_link_cleanup_ampersand","domain_wide_saml_enabled","trusted_domain_redesign","trusted_domain_admin_redesign","trusted_domain_permission_redesign","use_email_delay_jitter","send_gmail_retry","delay_banned_user_auto_space_deletion","send_email_domain_header_to_login_with_email","block_google_login_for_gid_mismatch","ban_dormant_custom_domain_account","validation_backlink_for_jira_connected_relation","explicitly_link_page_to_eoip","sync_verification_state","microsoft_teams_ai_connector_consumer_setup","activity_digest_v2","users_edge_cache","ai_connectors_double_writes","new_verification_property_id","microsoft_login_serverside","backfill_verification_when_move_into_wiki","meeting_notes","new_timezone_picker_2025","sharing_anyone_with_the_link","translate_template_top_bar","figma_oauth_migration_gate","translate_template_backend","aes_non_enterprise_page_visit"],T=[...x].sort();const M={marketplace_webhook:{enabled:!1,creator_to_webhook_url:{}},marketplace_creator_intervention:{creators:[],delay_days:5},marketplace_refund_email_target:{sendToEmail:"team@makenotion.com"},marketplace_acquisition_refund_processing_disallow_list:{acquisition_ids:{}},event_trail_events:{},page_tree_query_strategy:{strategy:"js_recursion_property_filter_sql"},event_trail_routing:{},collection_request_settings:{clientFormulaTimeoutMs:30*i().C0},sentry:{errorsSampleRate:0,"tracesSampleRate-v0":0,"replaysSessionSampleRate-v0":0,"replaysOnErrorSampleRate-v0":0,profilesSessionSampleRate:0,profilesSampleRate:0},gtm_ai_favorites:{space_id:void 0,collection_id:void 0},migration_task_supervisor_configs:{universal_kill_switch:!1,cron_job_revive_supervisor_queue_task_enabled:!0},palette:{"sessionSampleRate-v4":0,pageLoadSampleIntervalMs:10,interactionSampleIntervalMs:10,maxBufferSize:1e5},palette_analyzer:{databaseId:""},permanently_delete_tree_queue_task_override:{queue_task_kill_switch_on:!1,task_delay_override_seconds:void 0,elastic_search_request_batch_size:200,s3_request_batch_size:200,redis_read_batch_size:1e4,tree_iteration_batch_size:1e4,tree_iteration_max_buffer_size:5e4,postgres_query_batch_size:1e5},message_store_client_config:{min_reconnect_delay_secs:4,max_reconnect_delay_secs:8},unsync_transclusion_block_configs:{duplication_task_check_status_interval_seconds:.5,duplication_task_check_status_max_interval_seconds:60,duplication_task_check_status_exponential_after_seconds:30,duplication_task_check_status_timeout_minutes:30,duplication_task_check_status_wait_for_no_task_data_times:10},load_test_simulator_configs:{commenter_interval_ms:1e3,page_viewer_interval_ms:100,editor_interval_ms:1e3,editor_typing_interval_ms:100,presence_interval_ms:1e3},education_free_submit_form_config:{},startups_airtable_config:{},confluence_server_groups:{default:{read:[],create:[]}},notion_people_block_id:{data:{}},mwn_refund_policy_link:{link:""},marketplace_redirect_url_after_purchase_config:{},marketplace_transactional_email_config:{listingIds:[]},load_test_bypass_rate_limit_page_ids:{pages:[]},metrics_tag_space_id_allowlist:{space_ids:[]},load_test_ids:{spaceIds:[]},csv_limits:{maxRelationPages:1e3,maxRows:1e5,maxColumns:500},xlsx_limits:{maxRows:1e5,maxColumns:1e3},jira_resync_frequencies:{importResyncFrequencyMS:24*i().U6,timelineSyncFrequencyMS:6*i().U6},jira_import_batch_config:{processIssueBatchSize:10,attachmentBatchSize:1},jira_importer_records_fetch_limit:{records_limit:10},jira_resync_records_fetch_limit:{records_limit:25,process_records_limit:1},jira_attachments_config:{attachmentSize:1e6,numberOfAttachments:5},jira_properties_options_limit:{optionsLimit:400},jira_notion_version_to_force_update_external_object:{notionVersion:1},jira_recent_issues_limit:{updatedInLastNDays:0},jira_fields_that_require_dynamic_options_config:{fieldIds:[]},deep_find_config:{notionSourceNumResults:100,maxPagesToDecorate:20,maxResultsPerSourceToBlendedRanking:20,maxFinalResults:40},model_overrides:{},slack_contacts_limit:{maxLimit:100,defaultLimit:100},automation_update_pages:{},active_token_counter_config:{},workflow_templates_builder_config:{},dev_ai_context:{suggestOnPageNavigationProbability:0},qna_ai_reminders:{abandonedSearchReminderProbability:0},mobile_inbox_2_0_feedback:{},article_extractor_enable_urls:{urls:[]},ai_qna_silent_retry_mode:{},ingestion:{slack:{similarityThreshold:.8,gridAppId:"",clientId:"",prefix:"",channelIds:[],ingestionTopic:"",adminScopes:[],userScopes:[],userMappingScopes:[],gridScopes:[],ingestionCompleteDelay:3600,cleanUpDelay:3600,ingestionNextTaskDelay:300,maxChannelsPerPartition:0,enablePermissionsFilter:!1,sendToKafka:!1,showRemoveWorkspaceIntegration:!1,ingestionKafkaMaxSize:1992294,learnMoreUrl:"https://notion.so",runPoller:!0,pollerBatchSize:10,maxProcessingTime:30,allowPollerToDelete:!1,deprecateLegacy:!1,stopProcessingOnLegacy:!1,logSkippedEvents:!1,sampleRate:0},googleDrive:{mainPollTime:600,ingestionTopic:"",sendToKafka:!1,batchSizeForFileSync:10,mainPollEnabled:!0,learnMoreUrl:"https://notion.so",ingestionKafkaMaxSize:2097152,pageSize:2e3,initialSyncUserBatch:30,initialSyncFileBatch:100,googlePageSize:100,googleTokenAPIConcurrentRequestLimit:10,timeDeltaForActivityInMS:6e5,googleApiRetryConfig:{retryAttemptsMS:[500,1e3,2e3],retryAttemptRandomOffsetMS:500},initialSyncDelayInCompletion:3600,googleAuthUrl:"https://workspace.google.com/marketplace/app/notion_ai/988713442660",troubleShootingUrl:"https://notion.so",initialSyncStartDelayInSec:3600,deleteQueueTaskSecondRunDelay:3600,liveSyncSegmentTimeSec:300,googleApiTimeoutMS:6e4,googleApiTimeoutForRecallMS:1e4,marketplaceAppConfigureUrl:"https://admin.google.com/ac/apps/gmail/marketplace/appdetails/988713442660",concurrentRequestLimitForFetchingViewedOrModifiedFiles:10,maxAcceptableSyncFailureCountForDisconnect:1/0,timeThresholdForFailingLiveSyncAlertMS:864e5},bucket:"",kafka:{topic:"",partitionCount:0},batchSizeForS3FileDeletes:10,downgradeSpaceAIConnectorsAfterTimeMS:2592e6},create_snapshot_configs:{load_subtree_batchSize:500,load_subtree_query_limit:10},universal_qna:{defaultExternalSources:[],blendedRecall:{strategy:"cohere"},minCosScoreGoogleDrive:-1,s3Parallelism:100,hydrationParallism:20,maxSpreadsheetsToHydrate:5,asyncLabelingRatio:{notion:0,slack:0,googleDrive:0,github:0,jira:0},notion:{loadAncestorsEagerlyLimit:50},github:{shortenPageTextParallelism:3,maxAdditionalSpans:3},jira:{shortenPageTextParallelism:3,maxAdditionalSpans:3},helpdocsCachingExpireMs:36e5},qna_embedding:{embeddingMethod:void 0},collection_virtualized_load_limits:{table:{initial_limit:50,increment_limit:50}},slack_pause_ingestion:{liveIngestion:{allWorkspaces:{events:[{type:"user_change"}]},specificWorkspaces:[]},bulkIngestion:[]},link_paste_order:{defaultOrder:{name:"Default",order:["preview","mention","link"]}},collection_service_concurrency_cost_limit:{},query_collection_rate_limit:{},query_collection_slow_mode:{windowSeconds:10,requestThresholdPerWindow:1e3,clientThrottleMs:1e3},query_collection_size_based_slow_mode:{config:[]},query_collection_chart_refetch_settings:{clientThrottleMs:3e3},collection_reducer_request_settings:{chart:{debounce_wait_ms:1e3},general_debounce_wait_ms:void 0},charts_query_collection_limits:{},mc_config:{},id_schema_dynamic_config_v2:{percent:0},id_schema_dynamic_config_v3:{percent:0,real_id:!1},sites_settings:{custom_hostname_validation:{retry_delay:1e3,max_retries:5,inject_failure_percent:0}},mobile_dictation_visualizer:{lowshelf_filter_frequency:1500,lowshelf_filter_gain:-30,fft_size:256,min_hz:void 0,max_hz:void 0},load_test_trace_config:{queue_page_viewer_simulator_sample_rate:0,load_test_inner_sample_rate:0},activity_type_aes_config:{default:"iae"},capi_v2_event_names:{StartTrial:!1,InitiateCheckout:!1,CompleteRegistration:!1,Purchase:!1,PurchaseWorkType:!1,PurchaseWorkTypeProfessionalDomain:!1,Subscribe:!1,SubscribeAI:!1},imports_queue_config:{asana:{saveTransactionsBatchSize:100,fetchTaskBatchSize:100,globalUseCrdt:!0}},always_force_refetch_for_specific_tables:{tables:[]},callout_config:{callout_blocklist:[]},integration_standards_url:{url:""},integration_tech_partners:{tech_partner_ids:[]},template_feed_ranking_config:{formula_parameters:[]},multicell_api_config:{default_max_depth:10,api_overrides:{}},onboarding_templates:{joiner:{}},monday_v2_config:{unsupportedProperties:[],boardItemsLimit:100,batchSize:100,itemSaveIntervalInQueueState:1e3,itemSaveBatchDelay:100,fetchBoardsInParallel:3},github_ai_connector_configuration:{appName:"",clientId:"",timeFrame:365,shouldIndexData:!0,codeUploadBatchSize:50,knownUsersToIgnore:["doug-engelbot"],ingestPrReviews:!1,maxIssuesToIngestPerPartition:500,itemsPerPage:100,learnMoreUrl:"",maxDiffContentLength:3e3,enablePeriodicMetaSync:!1,processingTimeThreshold:12e4,maxKafkaMessageSize:2097152,disableRecallAfterInHrs:3,githubDocsUrl:"https://docs.github.com",githubDocsPath:"account-and-profile/setting-up-and-managing-your-personal-account-on-github/managing-your-personal-account/converting-a-user-into-an-organization"},jira_ai_ingestion_config:{learnMoreUrl:"https://notion.so",jiraMarketPlaceAppUrl:"https://notion.so",permissionPollerEnabled:!1,permissionPollerPollTimeInSeconds:1800,enqueueNextTaskDelayInSeconds:60,enqueueFinishTaskDelayInSeconds:3600,enqueueNextDeleteTaskDelayInSeconds:3600,promiseBatchSize:10,bulkIngestionDelaySeconds:3600,chunkLength:1e3,maxNumberOfCustomFields:100},trello_import_batch_config:{cardBatchSize:20},multi_cell_savetransactions_metrics:{batch_sample_percent:0},automation_settings:{action_execution_max_event_loop_block_time_ms:void 0,action_execution_timeout_ms:5*i().hM,client_formula_timeout_ms:30*i().C0,server_formula_timeout_ms:30*i().C0,web_request_timeout_ms:15*i().C0},site_sitemap_known_spam_workspaces:{space_ids:[]},activity_digest_config:{enabled:!1,dryRun:!0,emailVersion:"old",earliestScheduleHour:6,latestScheduleHour:9,timeBufferMinutes:5,maxActivityGroups:10,maxActivityGroupSize:5,variant:"default",onlyTargetEnglishUsers:!1,newEmailEnablementDate:"2024-11-22T00:00:00.000Z",shouldTruncateEdits:!1,numEditsPerActivity:3},unified_digest_scheduling_config:{enabled:!1,earliestScheduleHour:6,latestScheduleHour:9},home_digest_email_config:{enabled:!1,dryRun:!0,variant:"default",runOnDayOfWeek:1,bucketSampleRate:1,bucketDelaySeconds:1,emailDelaySeconds:0,minDaysBetweenEmails:5,utcStartHour:16,numUserBuckets:3e4,numDataReadyTests:10,numPreviousDaysToCheck:3,maxTasksPerEnqueue:1e3,disabledEmailDomains:[],disabledSpaceIds:[],queryCollectionTimeoutMs:10*i().C0},demo_tooltip_tour_config:{tour:{}},trusted_domains_space_ids:{space_ids:[]},marketplace_fee_overrides:{data:{}},throttle_notification_sent_analytics:{},mc_auth:{group:"dual_version_on_new_token"},marketplace_payout_delay_days:{},gmail_action_email_delay:{email_delivery_delay:120},jira_ai_connector:{prefix:"jira"},custom_emojis_config:{limit:5e3},creator_profile_allowlist:{usernames:[],names:[]},integration_webhooks_config:{},marketplace_public_purchase_url_optout:{usernames:["thomas"],contentful_ids:["17bVrJyVTyegxdnESZOVPs"]},conflicting_content_model:{model:"openai-gpt-4o-mini"},marketplace_localized_minimum_payouts:{},automation_http_request_action_denylist:{list:[]},enabled_installation_sources_for_duplicate_template_block:{in_app:!0,public_page:!0,web_gallery:!0,mobile_app:!0,onboarding:!0,team_home:!0},help_center_search_config:{maxTotalSearchResults:50,maxTemplateSearchResults:10,maxHelpCenterSearchResults:40},microsoft_teams_ai_connector:{kafkaMessageMaxSize:2097152,notificationUrl:"https://integrations-api.notion.com/microsoft/events",maxChannelsPerPartition:10,maxChannelSyncLookbackTimeMS:2592e6,syncArchivedChannels:!1},template_limits:{maxNumBlocks:1e5}};const P=new Set(y);function A(e){return P.has(e)}new Set(x);function R(e){return h[e]}const B="_unassigned_";const E="NoExperimentActor";function D(e,t){const o=Object.keys(e.value).find((e=>e.toLowerCase()===t.toLowerCase())),n="__no_such_experiment__",i=o?e.get(o,n):e.get(t,n);return i===n?null:i}},374847:(e,t,o)=>{o.d(t,{Gb:()=>V,Hf:()=>C,Ho:()=>N,J6:()=>T,K9:()=>R,KD:()=>P,Qx:()=>U,Wy:()=>k,ZW:()=>D,_2:()=>S,_f:()=>w,cN:()=>I,cg:()=>E,hJ:()=>x,kF:()=>B,vD:()=>M});o(670560),o(267602),o(653476),o(30005),o(241792);var n=()=>o(513670),i=()=>o(696459),r=()=>o(156642),a=()=>o(532850),s=()=>o(943181),l=()=>o(443510),c=()=>o(109477),d=()=>o(942275),u=()=>o(305580),p=()=>o(530980),m=()=>o(728670),f=()=>o(375255),g=()=>o(396136),v=()=>o(139978),h=()=>o(458196),_=()=>o(306164),b=()=>o(847871),y=()=>o(955620);function S(e){const{exportArgs:t,renderers:o}=e,{blockId:n,getRecordValue:i}=t,r=i({table:g().iU,id:n});if(!r)return;const a=r.type,s=e.renderers.blockRenderers[a];return s?s({block:r,exportArgs:t,renderers:o}):void 0}function w(e){const{exportArgs:t,renderers:o,ticker:n}=e,{blockId:i,getRecordValue:r,exportEmptyProperties:a}=t,s=r({table:g().iU,id:i});if(!s)return Promise.resolve(void 0);if(a){const e=(0,d().ky)({getRecordValue:r,block:s});if(e&&null!=e&&e.schema){s.properties=s.properties||{};for(const[t,o]of Object.entries(e.schema))t in s.properties||(s.properties[t]=[[" "]])}}const l=s.type,c=e.renderers.asyncBlockRenderers[l];return c?c({block:s,exportArgs:t,renderers:o,ticker:n}):Promise.resolve(void 0)}function k(e){const{schema:t,property:o,block:n,renderers:i,exportArgs:r}=e,s=t[o];if(!s)return;const l=(0,a().wS)(n,o),c=e.renderers.propertyRenderers[s.type];return c?c({textValue:l,propertySchema:s,property:o,schema:t,block:n,renderers:i,exportArgs:r}):void 0}function I(e){const{annotation:t,children:o,exportArgs:n,renderers:i}=e,r=y().J7s(t),a=i.annotationRenderers[r];if(a)return a({annotation:t,children:o,exportArgs:n,renderers:i})}function C(e){return e.children}function x(e){const{textValue:t,exportArgs:o,renderers:i,fromString:r}=e,a=t?y().lzi(t):[];if(0===a.length)return[];const s=a.map((e=>{let t=r(y().WiV(e));const n=y().hDy(e),a=n.filter(y().ZAl),s=n.filter((e=>!y().ZAl(e)));for(const r of a)if(t=I({exportArgs:o,renderers:i,annotation:r,children:t}),t)break;for(const r of s)t=I({exportArgs:o,renderers:i,annotation:r,children:t});return t}));return n().oA(s)}function T(e){var t;const{blockModel:o,exportArgs:n}=e,{preferredViewMap:i,getRecordValue:r}=n,a=p().omK.fromGetRecordValueFn(r),s=(null==i?void 0:i[o.id])??(null===(t=o.getCollectionViewIds())||void 0===t?void 0:t[0]);if(!s)return;const l=a({table:v().np,id:s,spaceId:o.getSpaceId()});if(!l)return;const c=l.getCollectionPointer(o);if(!c)return;const d=a(c);return d?{collectionViewModel:l,collectionModel:d}:void 0}function M(e){var t;const{blockModel:o,exportArgs:i,includeEmptyCollection:r}=e,{root:a,userTimeZone:d,intl:m,exportFilteredCollectionView:v,getRecordValue:h,getRecordsWithParent:_,experimentService:b,formulasModule:S}=i,w=p().omK.fromGetRecordValueFn(h),k=T(e);if(!k)return;const{collectionViewModel:I,collectionModel:C}=k;let x=[];if(v){var M;const e=null===(M=i.collectionViewExportDataMap)||void 0===M||null===(M=M.get(o.id))||void 0===M?void 0:M.filteredIds;if(null==e||!e.length)return;for(const t of e){const e=h({table:g().iU,id:t,spaceId:o.getSpaceId()});e&&(e.alive||a.table===g().iU&&a.id===e.id)&&!e.is_template&&x.push(e)}}else x=_(g().iU,C.id).filter((e=>(e.alive||a.table===g().iU&&a.id===e.id)&&!e.is_template));if(!C||!r&&0===x.length)return;const P=C.getNormalizedSchema(),A=(0,u().i)(I.getFormat()||{},P,I.getRawQuery(),c().j5.Table),R=(A.table_properties||[]).filter((e=>!v||e.visible)).map((e=>e.property));R.includes("title")||R.unshift("title");const B={},E=null===(t=I.getRawQuery())||void 0===t?void 0:t.sort;if(E){const t=s().$m({userTimeZone:d,userId:void 0,intl:m,userSorts:E,apiSorts:[],schema:P,formulasModule:S}),o=x.map((e=>e.id)),n=new(s().EO)([...t,...s().Xm([])]),i=new Map,r=new Map;x.forEach((t=>{n.updateBlock({block:p().kk5.fromBlock(t),schema:P,propertyMapping:void 0,getRecordModel:p().omK.fromGetRecordValueFn(h),resultCache:i,regExpCache:r,experimentService:b,collectionFeatureGates:e.exportArgs.collectionFeatureGates})}));s().Qx(o,n).forEach(((e,t)=>{B[e]=t}))}else{(I.getPageSort()||[]).forEach(((e,t)=>{B[e]=t}))}const D=n().MR(x,(e=>B.hasOwnProperty(e.id)?B[e.id]:e.created_time?e.created_time:1/0)),U={},N=R.map((e=>{const t=P[e],o=(null==t?void 0:t.name)||m.formatMessage(F.defaultNewProperty),n=Object.values(U);let i;return i=n.includes(o)?(0,l().Z)(o,(e=>!n.includes(e))):o,U[e]=i,i}));return{schema:P,sortedBlocks:D,columnIdToName:U,columnIds:R,columnNames:N,collectionTitle:(0,f().Xh)({intl:m,textValue:C.getName(),getRecordModel:w,userTimeZone:d,deterministic:!0}),collectionDescription:y().QaF(C.getDescription()),collectionViewName:I.getName(),sortingInfo:E,filteringInfo:A.property_filters,collectionId:C.id,collectionSpaceId:C.getSpaceId(),collectionViewId:I.id,collectionViewSpaceId:I.getSpaceId()}}function P(e){const{blockModel:t,exportArgs:o}=e,{getRecordValue:n}=o,r=p().omK.fromGetRecordValueFn(n),a=t.getCollectionViewIds()||[];if(!a.length)return;return a.map((n=>{const i=r({table:v().np,id:n,spaceId:t.getSpaceId()});if(!i)return;const a=i.getCollectionPointer(t);if(!a)return;if(!r(a))return;return M({...e,exportArgs:{...o,preferredViewMap:{[t.id]:n}}})})).filter(i().$K)}function A(e){switch(e){case"letters":return"a";case"roman":return"i";default:return"1"}}function R(e){var t;const{block:o,exportArgs:n}=e,{getRecordValue:a}=n;let s,l=!0;const c=function(e,t){const o=null==t?void 0:t.content;if(o&&o.length>0){const n=o.findIndex((t=>t===e.id));if(-1!==n){if(0!==n)return{id:o[n-1],isParent:!1,index:-1};if((null==t?void 0:t.type)===r().Ti.numberedList)return{id:e.parent_id,isParent:!0,index:0}}}return{id:void 0,isParent:!1,index:-1}}(o,a({table:g().iU,id:o.parent_id}));let d=c.index;var u;if(null!==(t=o.format)&&void 0!==t&&t.list_format&&(s=o.format.list_format,l=!1),!s)if(c.id&&null!==(u=n.numberedListCache[c.id])&&void 0!==u&&u.format){const e=n.numberedListCache[c.id];s=c.isParent&&e.inDefaultFormat?function(e){switch(e){case"numbers":return"letters";case"letters":return"roman";default:return"numbers"}}(e.format):e.format,e.inDefaultFormat||(l=!1)}else s="numbers";return-1===d&&(d=c.id&&n.numberedListCache[c.id]&&!c.isParent?n.numberedListCache[c.id].index+1:0),o.format&&(0,i().$K)(o.format.list_start_index)&&(d=o.format.list_start_index-1),n.numberedListCache[o.id]={index:d,format:s,inDefaultFormat:l},{index:d,format:A(s)}}function B(e){const{annotation:t,exportArgs:o}=e,n=y().kxk(t);if(!n)return;const{groupId:i,spaceId:r}=n,a=p().omK.fromGetRecordValueFn(o.getRecordValue)({table:h().GQ,id:(0,h().L9)({spacePermissionGroupId:i,spaceId:r}),spaceId:r});return`@${(0,b().m)({intl:o.intl,permissionGroupModel:a})}`}function E(e){const{annotation:t,exportArgs:o}=e,n=y().DF7(t);if(!n)return;const{teamId:i,spaceId:r}=n,a=p().omK.fromGetRecordValueFn(o.getRecordValue)({table:_().e0,id:i,spaceId:r});return`@${null==a?void 0:a.name}`}function D(e){const{block:t,exportArgs:o}=e,{getRecordValue:n,bulletedListCache:i}=o,r=t.format?t.format.bullet_list_format:void 0;if(t.parent_id in i)return{depth:i[t.parent_id].depth+1,list_format:r||i[t.parent_id].list_format};const a=n({table:g().iU,id:t.parent_id});if("bulleted_list"!==(null==a?void 0:a.type))return i[t.id]={depth:0,list_format:r},i[t.id];{const e=D({block:a,exportArgs:o});return{depth:e.depth+1,list_format:r||e.list_format}}}function U(e){return e.blockId===e.navigableBlockId&&!e.renderParentBlockId}const F=(0,o(788860).vU)({untitledTitle:{id:"exportRenderer.titleOfBlock.untitled",defaultMessage:"Untitled"},defaultNewProperty:{defaultMessage:"Property",id:"exportRenderer.titleOfNewProperty.property"}});function N(e){const{blockId:t,getRecordValue:o,userTimeZone:n,intl:i}=e,r=p().omK.fromGetRecordValueFn(o),a=r({table:g().iU,id:t});return(null==a?void 0:a.getRenderTitle({getRecordModel:r,userTimeZone:n,intl:i}))||i.formatMessage(F.untitledTitle)}function V(e){const{blockId:t,root:o,getRecordValue:n,skipSelf:i}=e;for(const r of(0,m().BW)({table:g().iU,id:t},n)){if(r.table===g().iU&&p().kk5.fromBlock(r.value).isNavigableBlock()&&(!i||r.value.id!==t))return r.value;if(r.table===o.table&&r.value.id===o.id)break}}},665472:(e,t,o)=>{o.d(t,{bc:()=>n,gR:()=>a,i:()=>r,ux:()=>i});o(267602),o(30005),o(731107);const n=5,i=10,r=Object.entries({image:["JPG","JPEG","PNG","GIF","SVG","BMP","HEIC","TIF","TIFF","WEBP","ICO","PSD"],video:["MP4","MOV","AVI","WMV","MKV","FLV","WEBM","MPEG","M4V","3GP","3G2","OGV"],audio:["MP3","WAV","AAC","FLAC","OGG","M4A","WMA","ALAC","AIFF","OPUS","MID","MIDI"],pdf:["PDF"],slides:["PPT","PPTX","PPS","PPSX","ODP"],sheet:["XLS","XLSX","ODS","CSV","TSV"],other:["TXT","MD","LOG","DOC","DOCX","ODT","RTF"]}).reduce(((e,t)=>{let[o,n]=t;return n.forEach((t=>{e[t]=o})),e}),{});function a(e){return r.hasOwnProperty(e.toUpperCase())}},216316:(e,t,o)=>{o.d(t,{EG:()=>x,M:()=>C,RA:()=>M,jm:()=>I});o(670560),o(267602),o(749411),o(731107);var n=()=>o(513670),i=()=>o(855741),r=()=>o(696459),a=()=>o(226413),s=()=>o(216939),l=()=>o(422894),c=()=>o(494616),d=()=>o(396136),u=()=>o(752778),p=()=>o(989478),m=()=>o(30862),f=()=>o(955620),g=()=>o(92960),v=()=>o(455222),h=()=>o(177634);function _(e){for(const t of e)if(t.kind===g().FormulaContextValueKind.ThisRow)return t}function b(e){const{formulaTokenBlockProperty:t,formulaTypecheckContextValues:o,spaceId:n}=e;if("collection"in t){const{collection:e}=t;if(e)return{id:e.id,propertyId:(0,h().SR)(t.property),spaceId:e.spaceId,table:u().vF};const n=_(o);if(n&&"block"===n.type.type&&n.type.collection)return{id:n.type.collection.id,propertyId:t.property,spaceId:n.type.collection.spaceId,table:u().vF}}else if("contextValueId"in t){const{contextValueId:e}=t,i=(0,h().b0)(o,(0,h().Kv)(e));if("block"===(null==i?void 0:i.type.type)&&i.type.collection)return{id:i.type.collection.id,propertyId:(0,h().SR)(t.property),spaceId:i.type.collection.spaceId??n,table:u().vF}}else(0,r().t1)(t)}function y(e){const{formulaTokenContextValue:t,formulaTypecheckContextValues:o,spaceId:n}=e,{valueId:i}=t,r=(0,h().b0)(o,(0,h().Kv)(i));return r?(0,h().KY)(r,n):[]}function S(e){const{formulaToken:t,formulaTypecheckContextValues:o,spaceId:n}=e;switch(t.type){case g().FormulaTokenType.Checkbox:case g().FormulaTokenType.Date:return[];case g().FormulaTokenType.Block:return[{id:t.blockId,spaceId:t.spaceId,table:d().iU}];case g().FormulaTokenType.Person:return[{id:t.userId,table:p().KJ}];case g().FormulaTokenType.BlockProperty:{const e=b({formulaTokenBlockProperty:t,formulaTypecheckContextValues:o,spaceId:n});return e?[e]:[]}case g().FormulaTokenType.ContextValue:return y({formulaTokenContextValue:t,formulaTypecheckContextValues:o,spaceId:n});default:(0,r().t1)(t)}}function w(e){const{formulaTypecheckContextValues:t,memberPropertyToken:o}=e;if(o.collection)return{id:o.collection.id,propertyId:(0,h().SR)(o.property),table:u().vF,spaceId:o.collection.spaceId};const n=_(t);return n&&"block"===n.type.type&&n.type.collection?{id:n.type.collection.id,propertyId:o.property,spaceId:n.type.collection.spaceId,table:u().vF}:void 0}function k(e){const{formulaTypecheckContextValues:t,nodes:o,spaceId:i}=e;return(0,n().oA)(o).flatMap((e=>I({formulaTypecheckContextValues:t,node:e,spaceId:i})))}function I(e){const{formulaTypecheckContextValues:t,node:o,spaceId:n}=e;switch(o.kind){case v().bG.Conditional:return k({formulaTypecheckContextValues:t,nodes:[o.condition,o.expIfFalse,o.expIfTrue],spaceId:n});case v().bG.Equality:case v().bG.Relational:case v().bG.Additive:case v().bG.Multiplicative:case v().bG.Exponentiation:return k({formulaTypecheckContextValues:t,nodes:[o.lhs,o.rhs],spaceId:n});case v().bG.Call:return k({formulaTypecheckContextValues:t,nodes:[...o.arguments,o.expression],spaceId:n});case v().bG.Unary:case v().bG.UnifiedFunctionProperty:return I({formulaTypecheckContextValues:t,node:o.expression,spaceId:n});case v().bG.LogicalAnd:case v().bG.LogicalOr:case v().bG.Array:return k({formulaTypecheckContextValues:t,nodes:o.elements,spaceId:n});case v().bG.NotionToken:return S({formulaTypecheckContextValues:t,formulaToken:o.token,spaceId:n});case v().bG.MemberBlockProperty:{const e=I({formulaTypecheckContextValues:t,node:o.expression,spaceId:n}),i=w({formulaTypecheckContextValues:t,memberPropertyToken:o.propertyToken});return i&&e.push(i),e}case v().bG.RecoveryNode:case v().bG.String:case v().bG.Boolean:case v().bG.Identifier:case v().bG.Number:return[];default:(0,r().t1)(o)}}function C(e){return(0,a().rv)(e)?`${e.spaceId}:${e.id}:${e.table}:${e.propertyId}`:(0,s().Pq)(e)}function x(e){const{formulas:t,formulaTypecheckContextValues:o,formulaValue:r,spaceId:a}=e,s=t.parseFormulaInputToAst(r);if(i().x.isFail(s))return[];const l=I({formulaTypecheckContextValues:o,node:s.value,spaceId:a});return(0,n().mN)(l,(e=>C(e)))}function T(){return{type:"keep"}}function M(e){const{baseUrl:t,formula:o,publicDomainName:i,spaceId:a,visitors:s}=e,d={visitFormulaContextValue:s.visitFormulaContextValue??T,visitFormulaPageProperty:s.visitFormulaPageProperty??T,visitRecordPointer:s.visitRecordPointer??T},u=new(l().X);function p(e){const{requested:t}=e,o=d.visitRecordPointer(t);return"replace"===o.type?(0,r().$K)(o.value)&&o.value.table===t.table?(u.add(o.value),o.value):t:"keep"===o.type?t:void(0,r().t1)(o)}const g=o.reduce(((e,o)=>{const s=f().hDy(o),l=f().sP4(s);if(l){const t=f().vmO(l),i=d.visitFormulaContextValue(t.id);return"replace"===i.type?(0,r().$K)(i.value)&&e.push(f().YCD(f()._QF({id:i.value}))):"keep"===i.type?e.push((0,n().Xh)(o)):(0,r().t1)(i),e}const g=f().jRb(s);if(g){const t=f().pxR(g);let i;i="contextValueId"in t?{property:t.property,contextValueId:t.contextValueId}:{property:t.property,collection:t.collection};const a=d.visitFormulaPageProperty(i);return"replace"===a.type?(void 0===a.value||(("collection"in t&&"collection"in a.value&&(0,r().$K)(a.value.collection)&&!(0,n().Xy)(t.collection,a.value.collection)||"contextValueId"in t&&"collection"in a.value&&(0,r().$K)(a.value.collection))&&u.add(a.value.collection),e.push(f().YCD(f().kbv(a.value)))),e):(e.push((0,n().Xh)(o)),e)}const v=(0,m().D)({baseUrl:t,mapper:p,publicDomainName:i,requester:{table:c().cv,id:"",spaceId:a},resolveTemplateVariables:!1,token:{spaceId:a,token:o}});return e.push(v),e}),[]);return{remappedRecordPointers:u,value:g}}},610856:(e,t,o)=>{o.d(t,{A6:()=>m,Ck:()=>v,H0:()=>h,L4:()=>g,LX:()=>b,S3:()=>y,UB:()=>S,YD:()=>p,fK:()=>w,hX:()=>u,iC:()=>f,qW:()=>_,w9:()=>k});o(670560),o(267602),o(653476),o(241792);var n=()=>o(513670),i=()=>o(696459),r=()=>o(995867),a=()=>o(752778),s=()=>o(81954),l=()=>o(955620),c=()=>o(216316),d=()=>o(177634);function u(e){const t=[];for(const o of e)if((0,l().QJH)(o))t.push(o[0]);else if((0,l().AJd)(o))t.push((0,l().WiV)(o));else if((0,l().km_)(o)){const e=(0,l().hDy)(o),n=l().hH9(e);if(n){t.push(n);continue}const i=l().V8Y(e);if(i){t.push(i);continue}const r=l().sP4(e);if(r){t.push(r);continue}const a=l().jRb(e);if(a){t.push(a);continue}}return t}function p(e){if(void 0!==e)return[g(e)]}function m(e){const t=e||[],o=[];for(const n of t){const e=l().hDy(n),t=l().hH9(e)||l().V8Y(e)||l().sP4(e)||l().jRb(e)||l().K9C(e);t&&o.push(t);const i=l().WiV(n).split(",");for(const n of i){const e=n.trim(),t=e.indexOf('"'),i=e.lastIndexOf('"');if(t>=0&&i>=0){const n=e.slice(t+1,i);n.length>0&&o.push(n)}else"true"===e?o.push(!0):"false"===e&&o.push(!1)}}return o}function f(e){const t=n().mN(e,(e=>JSON.stringify(e)));if(0!==t.length)return l().Zxt([["["],...(0,r().Z)(t.map(g),(()=>[", "])),["]"]])}function g(e){return"string"==typeof e?[`"${e}"`]:"boolean"==typeof e?[`${e}`]:l().YCD(e)}function v(e,t){return e.filter((e=>JSON.stringify(e)!==JSON.stringify(t)))}function h(e,t,o){const n=_(e,t,o);if(n)return b(n)}function _(e,t,o){if("text"===o.type||"url"===o.type||"email"===o.type||"phone_number"===o.type||"title"===o.type)return{type:"text"};if("checkbox"===o.type)return{type:"checkbox"};if("multi_select"===o.type)return{type:"select_array",collection:e,property:t};if("select"===o.type||"status"===o.type)return{type:"select",collection:e,property:t};if("person"===o.type)return{type:"person_array"};if("number"===o.type||"auto_increment_id"===o.type)return{type:"number"};if("date"===o.type)return{type:"date"};if("relation"===o.type){if(o.collection_pointer)return{type:"block_array",collection:{table:a().vF,id:o.collection_pointer.id,spaceId:(0,s().J)(o.collection_pointer.spaceId)}};if(o.collection_id)return{type:"block_array",collection:{table:a().vF,id:o.collection_id,spaceId:e.spaceId}}}else{if("formula"===o.type||"rollup"===o.type||"last_edited_by"===o.type||"last_edited_time"===o.type||"button"===o.type||"created_time"===o.type||"created_by"===o.type||"file"===o.type||"location"===o.type||"verification"===o.type||"last_visited_time"===o.type)return;(0,i().t1)(o)}}function b(e){return"text"===e.type||"number"===e.type||"checkbox"===e.type||"date"===e.type?e:"block_array"===e.type?{type:"array",of:{type:"block",collection:e.collection}}:"person_array"===e.type?{type:"array",of:{type:"person"}}:"select"===e.type?{type:"select",collection:e.collection,property:e.property}:"select_array"===e.type?{type:"array",of:{type:"select",collection:e.collection,property:e.property}}:void(0,i().t1)(e)}function y(e){return"string"!=typeof e&&"boolean"!=typeof e}function S(e){return(e.value??[]).map((e=>{if(!l().km_(e))return;const t=l().sP4(e[1]);if(!t)return;return l().vmO(t).id})).filter(i().$K)}function w(e){const{formulas:t,formulaTypecheckContextValues:o,value:n,spaceId:r}=e;return(0,i().$K)(n.value)?"formula"===n.type?(0,c().EG)({formulas:t,formulaTypecheckContextValues:o,formulaValue:n.value,spaceId:r}):"simple"===n.type?k({formulaTypecheckContextValues:o,simpleFormulaValue:n.value,spaceId:r}):void(0,i().t1)(n.type):[]}function k(e){const{formulaTypecheckContextValues:t,simpleFormulaValue:o,spaceId:n}=e,i=[],r=l().oOk(o);for(const a of r){const e=(0,d().b0)(t,a.id);e&&i.push(...(0,d().KY)(e,n))}const s=l().jyE(o);for(const c of s)if((0,l().CEh)(c)){const e=(0,d().b0)(t,c.contextValueId);if(!e)continue;i.push(...(0,d().KY)(e,n))}else c.collection&&i.push({...c.collection,spaceId:n,table:a().vF});return i}},72539:(e,t,o)=>{o.d(t,{GR:()=>a,P_:()=>r,gd:()=>s,r3:()=>l});var n=()=>o(816512),i=()=>o(989478);const r=(0,n().dp)(i().s$),a=((0,n().dp)(i().el),(0,n().dp)(i().T0)),s=((0,n().dp)(i().fs),(0,n().dp)(i().Az)),l=(0,n().D$)(o(696056)._H)},907577:(e,t,o)=>{o.d(t,{C:()=>c,DK:()=>a,HV:()=>l,Jr:()=>d,Lh:()=>s,eV:()=>r,u9:()=>i});var n=()=>o(707513);const i=1.3,r=1.875;function a(e){return u(e.fontSizeValue||r,e.fontFamily)}const s=1.5;function l(e){return u(e.fontSizeValue||s,e.fontFamily)}const c=1.25;function d(e){return u(e.fontSizeValue||c,e.fontFamily)}function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;return{fontFamily:arguments.length>1?arguments[1]:void 0,fontWeight:n().Ue.semibold,fontSize:`${e}em`,lineHeight:i,margin:0}}},459422:(e,t,o)=>{o.d(t,{$O:()=>ut,KD:()=>fe,xR:()=>pt,RE:()=>mt});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(916054),o(653476),o(470928),o(749411),o(30005),o(241792),o(228244),o(398858),o(461318),o(33228);var n=()=>o(608575),i=o.n(o(160809)),r=()=>o(730120),a=()=>o(720866),s=()=>o(513670),l=()=>o(342792),c=()=>o(156642),d=()=>o(226413),u=()=>o(532850),p=()=>o(43165),m=()=>o(326966),f=()=>o(312117),g=()=>o(109477),v=()=>o(799891),h=()=>o(720612),_=()=>o(431595),b=()=>o(225771),y=()=>o(530980),S=()=>o(114079),w=()=>o(481529),k=()=>o(396136),I=()=>o(752778),C=()=>o(139978),x=()=>o(955620);const T="PartialMatch",M="FullMatch",P="ColumnCategory",A=(0,o(788860).vU)({titleColumnName:{id:"database.titleColumn.name",defaultMessage:"Title"},genericColumnName:{id:"database.genericColumn.name",defaultMessage:"Column {columnNumber}"}});function R(e){const{table:t,deps:{intl:o,randomShortID:n,isPhoneNumber:i},options:{useCsvAdaptiveSchema:r,addHeadersToCollectionEnabled:a}}=e,l=function(e,t,o,n){var i;let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0;e=e.filter((e=>e.some((e=>Boolean((e.text||"").trim())))));const c=e.length>0?e[0].length:0,d=e.map(((e,t)=>({row:e,rowIndex:t}))).filter((e=>{let{row:t}=e;return t.length!==c}));if(d.length>0){const e=d[0];throw new(_().p8)("CsvImportError",{data:{},clientData:{type:"csv_import_inconsistent_columns",messageValues:{numTitleColumns:c,numBadRows:d.length,firstBadRowIndex:e.rowIndex+1,firstBadRow:JSON.stringify(e.row.map((e=>e.text))),firstBadRowLength:e.row.length}}})}const p=null===(i=e[0])||void 0===i?void 0:i.length;null==a||a.set(P,function(e){return e<50?"lessthan50":e<100?"lessthan100":e<500?"lessthan500":e<1e3?"lessthan1000":e<5e3?"lessthan5000":"greaterthan5000"}(p));let m=[];1===e.length||l?m=e[0].map(((e,o)=>t.formatMessage(A.genericColumnName,{columnNumber:o+1}))):e.length>1&&(m=e[0].map((e=>e.text)),e.shift());const f=e,g=function(e){return[{test:H.bind(null,e),sampledSchemaIsComplete:!0},{test:N,sampledSchemaIsComplete:!0},{test:Z,sampledSchemaIsComplete:!0},{test:K,sampledSchemaIsComplete:!0},{test:L,sampledSchemaIsComplete:!0},{test:F,sampledSchemaIsComplete:!1},{test:q,sampledSchemaIsComplete:!1},{test:G,sampledSchemaIsComplete:!1},{test:$,sampledSchemaIsComplete:!0}]}(n),h=performance.now(),b=s().oA(s().Ri(f).map((e=>e.length&&e[0].columnType?e[0].columnType:function(e,t,o,n,i,r){const a=t.filter((e=>Boolean(e)));if(0===a.length)return $(e,a);if(i){const i=a.length>1e3?function(e,t){const o=e.length,n=[];for(let i=0;i<t;i++){const t=Math.floor(Math.random()*o);n.push(e[t])}return n}(a,1e3):a;for(const a of n){const n=a.test(e,i,o);if(n){let o=n;if(!1===n.isFullMatch){v().log({level:"info",from:"csvHelper",type:"csvColumnTypes",data:{message:"Partial column type match detected, setting data type as string",columnType:n.schema.type,matchType:"Partial"}}),o=$(e,t);const i=(null==r?void 0:r.get(T))||0;null==r||r.set(T,i+1)}else v().log({level:"info",from:"csvHelper",type:"csvColumnTypes",data:{message:"Complete column type match detected",columnType:n.schema.type,matchType:"Full"}});const i=(null==r?void 0:r.get(M))||0;return null==r||r.set(M,i+1),o}}}else{const t=a.filter((e=>!s().xb(e))).slice(0,100);for(const i of n){const n=i.test(e,t,o);if(n){const s=i.sampledSchemaIsComplete||t.length===a.length?n:i.test(e,a,o);if(s){if(!1===s.isFullMatch){v().log({level:"info",from:"csvHelper",type:"csvColumnTypes",data:{message:"Partial column type match detected, Potential data loss due to parsing failures",columnType:s.schema.type,matchType:"Partial"}});const e=(null==r?void 0:r.get(T))||0;null==r||r.set(T,e+1)}else{const e=(null==r?void 0:r.get(M))||0;null==r||r.set(M,e+1)}return s}}}}return $(e,[])}(t,e.map((e=>null==e?void 0:e.text)),o,g,r,a)))),y=performance.now()-h;null==a||a.set("columnTypeInferenceTimeTakenMS",y);const S=m.map((()=>!1));for(let s=0;s<m.length;s++)if("text"===b[s].schema.type)for(let e=0;e<f.length;e++){const t=f[e][s].textValue;if(t)for(const o of t)if(x().AJd(o)){S[s]=!0,e=f.length;break}}let w=!0;const k={title:{type:"title",name:t.formatMessage(A.titleColumnName)}};m.forEach(((e,t)=>{const n=b[t];if(n)if("text"===n.schema.type&&w&&!S[t]){w=!1,n.id="title",n.schema={type:"title",name:e};const t=k.title;t&&(t.name=e)}else{const t=o();n.id=t,k[t]={name:e,...n.schema}}}));const I=f.map((e=>{const t={};return b.forEach(((o,n)=>{if(o){const{id:i,schema:r,coerce:a}=o,{type:s}=r;if(i){const o=e[n]||"";t[i]="url"===s?u().iD(o.text):"date"===s?u().d7(a(o.text)):"text"===s?o.textValue||x().TPx(a(o.text)):"file"===s?o.textValue||[]:x().TPx(a(o.text))}}})),t}));return{schema:k,types:b,pages:I}}(t,o,n,i,r,e.csvEvalContext,a);return function(e){const{actor:t,blockType:o,root:n,parent:i,name:r,format:a,deps:{randomID:l,spaceIdCreator:u,addFileIdsToBlock:m,createCollectionAsyncWithStatusLabel:f},options:{ignoreBlockCount:v,useCrdt:_},pages:b,schema:S,columnIds:T}=e,M=e.collectionId??(null==u?void 0:u.idInSavedSpace(I().vF))??l(),P=e.collectionViewId??(null==u?void 0:u.idInSavedSpace(C().np))??l(),A=[],R=[],B=[],{operations:E}=y().tE1.create({id:M,parent:n.existing?n.record.pointer:{id:n.id,table:k().iU,spaceId:i.spaceId},space_id:i.spaceId,name:x().TPx(r),schema:S,format:{collection_page_properties:s().oA(T.map((e=>{if(e)return{visible:!0,property:e}}))),...f&&{sync_state:{syncing:!0,last_synced_at:Date.now()},static_import_collection_type:g().gH.CsvImport}}});A.push(...E);const D=n.existing?n.record.id:n.id,{model:U,operations:F}=y().yJh.create({id:D,type:o,collection_id:M,format:{collection_pointer:{table:I().vF,id:M,spaceId:i.spaceId}},view_ids:[P],createdBy:t,parent:i,space_id:i.spaceId},{useCrdt:_});n.existing?A.push(...p().Ry({existingBlock:n.record,updatedBlock:U})):A.push(...F);if(f){const{operations:e}=y().wxX.create({id:P,type:"table",name:"Show All",parent:n.existing?n.record.pointer:{id:n.id,table:k().iU,spaceId:i.spaceId},space_id:i.spaceId,format:{table_properties:s().oA(T.map((e=>{if(e)return{visible:!0,property:e}}))),...a},createdBy:t});A.push(...e)}const N=function(e){const{actor:t,collectionId:o,spaceId:n,pages:i,randomID:r,spaceIdCreator:a,options:s}=e;return i.map((i=>{const l=(null==a?void 0:a.idInSavedSpace(k().iU))??r(),{model:d,operations:u}=y().yJh.create({id:l,parent:{id:o,table:I().vF,spaceId:n},space_id:n,type:c().Ti.page,createdBy:t,properties:i,...s.ignoreBlockCount?{ignore_block_count:!0}:void 0},{useCrdt:s.useCrdt}),p=[...u];if(e.addFileIdsToBlock){const e=(0,h().ZP)(d,"","");e.length>0&&p.push(w().op.update({pointer:d.pointer,path:[],args:{file_ids:e.map((e=>e.id))}}))}return{id:l,operations:p}}))}({actor:t,collectionId:M,addFileIdsToBlock:m,spaceId:i.spaceId,pages:b,randomID:l,spaceIdCreator:u,options:{useCrdt:_,ignoreBlockCount:v}});for(const{operations:s}of N)R.push(...s);const{operations:V}=y().wxX.create({id:P,type:"table",name:"Show All",parent:n.existing?n.record.pointer:{id:n.id,table:k().iU,spaceId:i.spaceId},space_id:i.spaceId,format:{table_properties:s().oA(T.map((e=>{if(e)return{visible:!0,property:e}}))),...a},page_sort:N.map((e=>e.id)).slice(0,d().gq),createdBy:t});if(R.push(...V),f){const e={table:I().vF,id:M,spaceId:i.spaceId},t=w().op.update({pointer:e,path:["format","sync_state"],args:{syncing:!1,last_synced_at:Date.now()}});return B.push(t),{operations:R,createCollectionOperations:A,collectionFinishedOperations:B}}return{operations:[...A,...R]}}({...l,columnIds:l.types.map((e=>e.id)),...e})}const B=["yes","Yes","true","True","checked"],E=["no","No","false","False","unchecked"];function D(e){return B.some((t=>e===t))||E.some((t=>e===t))}function U(e,t){return e.length===t.length}function F(e,t){if(t.every(D))return{schema:{type:"checkbox"},validate:D,coerce:e=>B.some((t=>e===t))?d().bx:d().HC}}function N(e,t){const o=t.map(S()._g),n=o[0];if(n&&o.every((e=>Boolean(e&&e.format===n.format))))return{schema:{type:"number",number_format:n.format},validate(e){const t=S()._g(e);return!m().z4(t)&&t.format===n.format},coerce(e){const t=S()._g(e);return`${t?t.value:void 0}`}}}function V(e,t){if(parseInt(t)&&t.length<=6)return!1;const o=f()._1(t,e);return Boolean(o)}function L(e,t){const o=t.filter((t=>V(e,t)));if(o.length>=t.length/2)return{schema:{type:"date"},validate:t=>V(e,t),coerce:t=>f()._1(t,e),isFullMatch:U(t,o)}}function O(e){return e.length<320&&e.includes("@")&&b().B(e,"email")}function Z(e,t){const o=t.filter(O);if(o.length>=t.length/2)return{schema:{type:"email"},validate:O,coerce:s().yR,isFullMatch:U(t,o)}}function j(e){return e.length<320&&b().B(e,"url")}function K(e,t){const o=t.filter(j);if(o.length>=t.length/2)return{schema:{type:"url"},validate:j,coerce:s().yR,isFullMatch:U(t,o)}}function z(e,t){return!String(t).match(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/)&&e(String(t))}function H(e,t,o){const n=z.bind(null,e),i=o.filter(n);if(i.length>=o.length/2)return{schema:{type:"phone_number"},validate:n,coerce:s().yR,isFullMatch:U(o,i)}}function q(e,t,o){const n=[];t.forEach((e=>e.split(",").forEach((e=>n.push(e.trim())))));const i=new Set(n);if(r=i.size,a=n.length,l=t.length,a>l&&W(r,a)){return{schema:{type:"multi_select",options:Array.from(i).map(((e,t)=>({id:o(),value:e,color:(0,d().TL)([])})))},validate:e=>i.has(e),coerce:s().yR}}var r,a,l}function W(e,t){return e>0&&e**2<t}function G(e,t,o){const n=new Set(t);if(W(n.size,t.length)){return{schema:{type:"select",options:Array.from(n).map(((e,t)=>({id:o(),value:e,color:(0,d().TL)([])})))},validate:e=>n.has(e),coerce:s().yR}}}function $(e,t){return{schema:{type:"text"},validate:s()._z,coerce:s().yR}}var Q=()=>o(874459),Y=()=>o(455530),J=()=>o(659278),X=()=>o(235484),ee=()=>o(225339),te=()=>o(565271),oe=()=>o(748456),ne=()=>o(602299),ie=()=>o(542973),re=()=>o(989478);const ae={CommentAuthor:"cma",CommentDiscussionId:"cmm"},se={a:!0,strong:!0,em:!0,code:!0,del:!0,s:!0,span:!0,time:!0},le={meta:!0,style:!0,script:!0,head:!0,title:!0},ce="sourceCode",de=700,ue=400,pe=1e5;function me(e){if(!e)return;const t=parseInt(e);return isNaN(t)?void 0:t}const fe={[x().GKr.Page]:"data-notion-page-id",spaceId:"data-notion-space-id",[x().GKr.Highlight]:"data-notion-highlight",[x().GKr.User]:"data-notion-user-id",[x().GKr.Discussion]:"data-notion-block-discussion-id",[x().GKr.Equation]:"data-notion-inline-equation",[x().GKr.Comment]:"data-notion-block-comment-id",[ae.CommentAuthor]:"data-notion-block-comment-author-id",[ae.CommentDiscussionId]:"data-notion-block-comment-discussion-id",[c().Ti.code]:"data-notion-code-syntax",[c().Ti.callout]:"data-notion-callout",calloutIcon:"data-notion-callout-icon",calloutBackground:"data-notion-callout-background",[c().Ti.tableOfContents]:"data-notion-toc",[c().Ti.file]:"data-notion-file",fileAlias:"data-notion-file-alias",[c().Ti.columnList]:"data-notion-column-list",[c().Ti.column]:"data-notion-column-ratio",[c().Ti.video]:"data-notion-video",[c().Ti.audio]:"data-notion-audio",[c().Ti.pdf]:"data-notion-pdf",[c().Ti.equation]:"data-notion-equation",dateFormat:"data-notion-date-format",[c().Ti.externalObjectInstance]:"data-notion-link-preview",[c().Ti.embed]:"data-notion-embed"},ge="Lucidchart",ve="Jira",he="JiraDC";X().mC,X().Gl,X().mC,X().Gl,X().mC,X().Gl;function _e(e,t){return t&&t.nodeType===e.Node.ELEMENT_NODE}function be(e,t){return e.nodeType===t.Node.TEXT_NODE||e instanceof t.Element&&se[e.tagName.toLowerCase()]}function ye(e,t,o){var n;let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(t&&1===e.nodeType&&e.hasAttribute(fe[x().GKr.Comment]))return i;if(o&&"pre"===(null===(n=e.tagName)||void 0===n?void 0:n.toLowerCase()))return i;i.push(e);for(const r of J().p4(e.childNodes))ye(r,t,o,i);return i}function Se(e){const t=[];if(!e.parentNode)return t;let o=e.parentNode;for(;o;)t.push(o),o=o.parentNode||void 0;return t}function we(e,t){const o=Se(e).filter((e=>e instanceof t.Element&&("ul"===e.tagName.toLowerCase()||"ol"===e.tagName.toLowerCase()))).length;return o}const ke=["â€¢","â—¦","â–ª"],Ie=["h1","h2","h3","h4","h5","h6"].map((e=>`${e}:not(:first-child)`)).join(", ");function Ce(e){const{node:t,window:o,stripText:n,stripSurroundingWhitespace:i,timeZone:a,ignoreComments:s,deps:d,ignoreCodeBlock:u,preserveLineBreaksInTableCellsEnabled:p}=e;if(!n){for(const e of Array.from(t.querySelectorAll("p:not(:first-child)")))e.prepend("\n");for(const e of Array.from(t.querySelectorAll(Ie)))e.prepend("\n");for(const e of Array.from(t.querySelectorAll("ul > li"))){const t=we(e,o)-1,n=t%ke.length,i=ke[n],r="    ".repeat(t);e.prepend(`\n${r}${i} `)}for(const e of Array.from(t.querySelectorAll("ol"))){const t=we(e,o),n="    ".repeat(t);for(let o=0;o<e.children.length;o+=1){e.children[o].prepend(`\n${n}${o+1}. `)}}for(const e of Array.from(t.querySelectorAll("pre")))e.parentNode&&e.parentNode.insertBefore(o.document.createTextNode("\n\n"),e)}const m=[],f=[],g=ye(t,s,u);let v=!1;const h=g.filter((e=>e.nodeType!==o.Node.TEXT_NODE?!!(p&&e instanceof o.Element&&"br"===e.tagName.toLowerCase())&&(e.data="\n",v=!0,!0):!n||!/^( |\t)*(\n)+( |\t)*$/.test(e.data)));let _=!0;h.forEach(((e,s)=>{let u=e.data;n&&(u=u.replace(/\[ \] /g,""),u=u.replace(/\[x\] /g,""),u=u.replace(/^[\-\*\â€¢]\s?/g,""),u=u.replace(/(\s)+/g,"$1")),!t.hasAttribute("confluenceTabSpaces")&&0===s&&i&&(u=u.trimStart()),s===h.length-1&&_&&i&&(u=u.trimEnd());const p=[],g=Se(e);let v;!n&&g.some((e=>e instanceof o.Element&&("h1"===e.tagName.toLowerCase()||"h2"===e.tagName.toLowerCase()||"h3"===e.tagName.toLowerCase()||"h4"===e.tagName.toLowerCase()||"h5"===e.tagName.toLowerCase()||"h6"===e.tagName.toLowerCase())))&&p.push([x().GKr.Bold]),g.some((e=>e instanceof o.Element&&"strong"===e.tagName.toLowerCase()))&&p.push([x().GKr.Bold]),g.some((e=>e instanceof o.Element&&"em"===e.tagName.toLowerCase()))&&p.push([x().GKr.Italic]),g.some((e=>e instanceof o.Element&&"u"===e.tagName.toLowerCase()))&&p.push([x().GKr.Underline]),g.some((e=>e instanceof o.Element&&("code"===e.tagName.toLowerCase()||"pre"===e.tagName.toLowerCase())))&&p.push([x().GKr.Code]),g.some((e=>e instanceof o.Element&&("del"===e.tagName.toLowerCase()||"strike"===e.tagName.toLowerCase()||"s"===e.tagName.toLowerCase())))&&p.push([x().GKr.Strike]);const b=g.find((e=>{var t;return e instanceof o.Element&&(e.hasAttribute(fe[x().GKr.Highlight])||(null===(t=e.parentElement)||void 0===t?void 0:t.hasAttribute(fe[x().GKr.Highlight])))}));if(b&&b instanceof o.Element){var y;const e=b.getAttribute(fe[x().GKr.Highlight]),t=null===(y=b.parentElement)||void 0===y?void 0:y.getAttribute(fe[x().GKr.Highlight]),o=vt(e&&"undefined"!==e?e||"":t||"");o&&p.push([x().GKr.Highlight,o])}const S=g.find((e=>e instanceof o.Element&&"a"===e.tagName.toLowerCase()));if(S){const e=S.getAttribute(fe[x().GKr.Page]),t=S.getAttribute("notionUserId")||S.getAttribute(fe[x().GKr.User]),o=S.getAttribute(fe.spaceId),n=S.getAttribute(fe[x().GKr.Comment]);"string"==typeof e&&(0,l().e)(e)&&"string"==typeof o&&(0,l().e)(o)?v=x().$0A(e,o):S.href?p.push(x().edl(S.href)):"string"==typeof t&&(0,l().e)(t)?(v=x().tEo(t),S.getAttribute("notionUserId")&&s===h.length-2&&(_=!1)):n&&o&&(0,l().e)(n)&&(0,l().e)(o)&&(v=x().mfJ(n,o))}const w=g.find((e=>!!(e instanceof o.Element&&e.getAttribute(fe[x().GKr.Discussion])))),I=t.classList.contains("page-comment");if(w&&!I){const e=w.getAttribute(fe[x().GKr.Discussion]);if(e){e.split(",").forEach((e=>p.push(x().jw(e))))}}const C=g.find((e=>e instanceof o.Element&&"sub"===e.tagName.toLowerCase()));let T;"true"===(null==C?void 0:C.getAttribute("confluenceProcessableEquation"))&&(T=`_{${C.textContent}}`);const M=g.find((e=>e instanceof o.Element&&"sup"===e.tagName.toLowerCase()));let P;"true"===(null==M?void 0:M.getAttribute("confluenceProcessableEquation"))&&(P=`^{${M.textContent}}`);const A=g.find((e=>e instanceof o.Element&&e.hasAttribute(fe[x().GKr.Equation])));let R;null!=A&&A.textContent&&(R=A.textContent);const B=g.find((e=>e instanceof o.Element&&"time"===e.tagName.toLowerCase()));if(B){const e=B.getAttribute("datetime");if(e){const t=function(e,t){const o=r().ou.fromISO(e),n=o.toMillis();return n===o.startOf("day").toMillis()?Q().OQ.toPersistedDate(n,t):Q().OQ.toPersistedDateTime(n,t)}(e,a),o={...t};"relative"===B.getAttribute(fe.dateFormat)&&(o.date_format="relative"),v=x().pZr(o)}}const E=g.find((e=>!!(e instanceof o.Element&&e instanceof o.HTMLSpanElement&&e.getAttribute(fe[c().Ti.externalObjectInstance]))));if(v)m.push(x().YCD(v,p));else if(T)m.push(x().qZ6(T,p));else if(P)m.push(x().qZ6(P,p));else if(R)m.push(x().qZ6(R,p));else if(E&&null!=d&&d.randomID){var D;const e=(null==d||null===(D=d.spaceIdCreator)||void 0===D?void 0:D.idInSavedSpace(k().iU))??d.randomID();m.push(x().YCD(x().x36(e),p)),f.push(e)}else m.push(x().V3y(u,p))}));const b=x().Zdj(m,pe),y=x().Zxt(b);if(v){const e=x().V3y("",[[x().GKr.Link,""]]);y.push(e)}return{titleTokens:y,linkMentionBlockIds:f}}function xe(e,t){const o=["img[src]","a[download]",`a[${fe[c().Ti.file]}]`,`audio[${fe[c().Ti.audio]}]`,`video[${fe[c().Ti.video]}]`,"li"];t&&o.push("pre");const n=e.querySelectorAll(o.join(","));return J().p4(n)}function Te(e){const{actor:t,parent:o,node:n,allOperations:i,deps:{importFileMap:r,window:a,intl:s,randomID:l,spaceIdCreator:c,randomShortID:d,isPhoneNumber:u},options:{useCrdt:p,ignoreBlockCount:m,considerCodeBlockAsNonTextItem:f}}=e;return Xe({actor:t,parent:o,nodes:xe(n,f),allOperations:i,deps:{importFileMap:r,window:a,intl:s,randomID:l,spaceIdCreator:c,randomShortID:d,isPhoneNumber:u},options:{useCrdt:p,ignoreBlockCount:m}})}function Me(e){const{actor:t,parent:o,node:n,type:i,allOperations:r,options:{useCrdt:a,ignoreBlockCount:s,stripText:l,stripSurroundingWhitespace:d,ignoreCodeBlock:u},deps:{window:p,randomID:m,spaceIdCreator:f}}=e,g=(null==f?void 0:f.idInSavedSpace(k().iU))??m(),{titleTokens:v,linkMentionBlockIds:h}=Ce({node:n,window:p,stripText:l,stripSurroundingWhitespace:d,ignoreComments:!0,ignoreCodeBlock:u,deps:{randomID:m,spaceIdCreator:f}}),{operations:_}=y().yJh.create({id:g,type:i,properties:{title:v},parent:o,space_id:o.spaceId,createdBy:t,ignore_block_count:!!s||void 0},{useCrdt:a});if(r.push(..._),h.length){const e=n.querySelectorAll(`span[${fe[c().Ti.externalObjectInstance]}]`);for(const[n,i]of Array.from(e).entries())h[n]&&Ne({actor:t,parent:o,node:i,allOperations:r,deps:{randomID:m,spaceIdCreator:f},options:{useCrdt:a,ignoreBlockCount:s},blockId:h[n]})}return Ye({node:n,spaceId:o.spaceId,window:p,blockId:g,actor:t,allOperations:r}),g}function Pe(e){const{actor:t,parent:o,node:n,tableData:i,allOperations:r,deps:{intl:a,randomID:s,spaceIdCreator:l,randomShortID:d,window:u,isPhoneNumber:p,addFileIdsToBlock:f},options:{useCrdt:g,ignoreBlockCount:v,tableType:h,addHeadersToCollectionEnabled:_}}=e,b=(null==l?void 0:l.idInSavedSpace(k().iU))??s();if("table"===h){const{operations:e}=function(e){const{table:t,actor:o,parent:n,tableId:i,deps:{randomID:r,spaceIdCreator:a,randomShortID:s},options:{useCrdt:l,ignoreBlockCount:d}}=e,u=[],p=t.length?t[0].map((e=>s())):[],f=t.map((e=>(null==a?void 0:a.idInSavedSpace(k().iU))??r()));u.push(...y().yJh.create({id:i,type:c().Ti.table,content:f,format:{table_block_column_order:p},properties:{},parent:n,space_id:n.spaceId,createdBy:o,ignore_block_count:!!d||void 0},{useCrdt:l}).operations);const g=f.flatMap(((e,r)=>{const a=m().m8(p.flatMap(((e,o)=>{var n;const i=null===(n=t[r])||void 0===n||null===(n=n[o])||void 0===n?void 0:n.textValue;return i?[[e,i]]:[]})));return y().yJh.create({id:e,type:c().Ti.tableRow,parent:{id:i,table:k().iU,spaceId:n.spaceId},space_id:n.spaceId,properties:a,createdBy:o},{useCrdt:l}).operations}));return u.push(...g),{operations:u}}({actor:t,tableId:b,parent:o,table:i,deps:{randomID:s,spaceIdCreator:l,randomShortID:d},options:{useCrdt:g,ignoreBlockCount:v}});r.push(...e),Ye({node:n,spaceId:o.spaceId,window:u,blockId:b,actor:t,allOperations:r})}else if("collection"===h){const e=n.getAttribute("data-database-title")??"",{operations:c}=R({actor:t,blockType:"collection_view",root:{existing:!1,id:b},parent:o,name:e,format:{table_wrap:!0},table:i,deps:{intl:a,randomID:s,spaceIdCreator:l,randomShortID:d,isPhoneNumber:p,addFileIdsToBlock:f??!1},options:{useCrdt:g,ignoreBlockCount:v,useCsvAdaptiveSchema:!0,addHeadersToCollectionEnabled:_}});r.push(...c)}return b}function Ae(e){const{actor:t,parent:o,allOperations:n,deps:{randomID:i,spaceIdCreator:r},options:{useCrdt:a,ignoreBlockCount:s}}=e,l=(null==r?void 0:r.idInSavedSpace(k().iU))??i(),{operations:d}=y().yJh.create({id:l,type:c().Ti.divider,parent:o,space_id:o.spaceId,createdBy:t,ignore_block_count:!!s||void 0},{useCrdt:a});return n.push(...d),l}function Re(e){const{actor:t,parent:o,source:n,allOperations:i,deps:{randomID:r,spaceIdCreator:a},options:{useCrdt:s,ignoreBlockCount:l,fallbackWidth:d}}=e;let u;"image"===n.type&&n.width?u=Math.min(n.width,de):d&&(u=Math.min(d,de));const p=(null==a?void 0:a.idInSavedSpace(k().iU))??r(),{model:m,operations:f}=y().yJh.create({id:p,type:c().Ti.image,properties:{source:x().TPx(n.secureS3UrlOrAlias)},format:{block_width:u},parent:o,space_id:o.spaceId,createdBy:t,ignore_block_count:!!l||void 0},{useCrdt:s});return i.push(...f,m.getSecureFilesUpdate("","")),p}function Be(e){const{actor:t,parent:o,node:n,sourceUrl:i,allOperations:r,deps:{randomID:a,spaceIdCreator:s},options:{useCrdt:l,ignoreBlockCount:c}}=e,d=me(n.getAttribute("height")),u=me(n.getAttribute("width")),p=(null==s?void 0:s.idInSavedSpace(k().iU))??a();let m;try{m=new URL(i)}catch(v){m=i}const f=Y().Dz({url:i,baseUrl:m instanceof URL?m.origin:m,publicDomainName:""}),{operations:g}=y().yJh.create({id:p,type:f,properties:{source:x().TPx(i)},format:{block_width:u,block_height:d,block_full_width:!1,block_page_width:!(u||d),block_preserve_scale:!0},parent:o,space_id:o.spaceId,createdBy:t,ignore_block_count:!!c||void 0},{useCrdt:l});return r.push(...g),p}function Ee(e){const{actor:t,parent:o,source:n,allOperations:i,deps:{randomID:r,spaceIdCreator:a},options:{useCrdt:s,ignoreBlockCount:l}}=e,c=(null==a?void 0:a.idInSavedSpace(k().iU))??r(),d=Y().Dz({url:n.secureS3UrlOrAlias,baseUrl:n.secureS3UrlOrAlias,publicDomainName:""}),u="embed"===d?"file":d,{model:p,operations:m}=y().yJh.create({id:c,type:u,properties:{title:x().TPx((0,ee().w2)(n.secureS3UrlOrAlias)),source:[x().V3y(n.secureS3UrlOrAlias,[x().edl(n.secureS3UrlOrAlias)])]},format:{block_width:"image"===n.type&&n.width?Math.min(n.width,de):void 0,block_height:n.height?Math.min(n.height,ue):void 0},parent:o,space_id:o.spaceId,createdBy:t,ignore_block_count:!!l||void 0},{useCrdt:s});return i.push(...m,p.getSecureFilesUpdate("","")),c}function De(e){return"#text"===e.nodeName?e.textContent?e.textContent:"":Array.from(e.childNodes).map((e=>{const t=e.nodeName.toLowerCase();return"br"===t?"\n":"div"===t?`${De(e)}\n`:De(e)})).map((e=>e.split("\n").map((e=>e.trimRight())).join("\n"))).join("")}function Ue(e){const{actor:t,parent:o,node:n,allOperations:r,deps:{importFileMap:a,window:s,intl:l,randomID:d,spaceIdCreator:u,randomShortID:p,isPhoneNumber:m},options:{useCrdt:f,ignoreBlockCount:g}}=e,v=(null==u?void 0:u.idInSavedSpace(k().iU))??d(),h=n.getAttribute(fe.calloutBackground),_=h?vt(h):void 0,b=n.getAttribute(fe.calloutIcon),S=b&&b.match(i()())?b:void 0,{title:w,children:I}=function(e){const{node:t,window:o}=e,n=J().p4(t.childNodes),[i,...r]=n;if(!i)return{title:[]};if(function(e){return t=>!!(_e(e,t)&&t instanceof e.HTMLParagraphElement)}(o)(i)){const{titleTokens:e}=Ce({node:i,window:o,stripText:!1,stripSurroundingWhitespace:!0,ignoreComments:!0});return{title:e,children:r}}if(be(i,o)){const{titleTokens:e}=Ce({node:t,window:o,stripText:!1,stripSurroundingWhitespace:!0,ignoreComments:!0});return{title:e,children:void 0}}return{title:[],children:n}}({node:n,window:s}),C=Array.isArray(I)?Xe({actor:t,parent:{table:k().iU,id:v,spaceId:o.spaceId},nodes:I,allOperations:r,deps:{importFileMap:a,window:s,intl:l,randomID:d,spaceIdCreator:u,randomShortID:p,isPhoneNumber:m},options:{useCrdt:f,ignoreBlockCount:g}}):[],{operations:x}=y().yJh.create({id:v,type:c().Ti.callout,content:C,properties:{title:w},format:{block_color:_,page_icon:S},parent:{id:o.id,table:o.table,spaceId:o.spaceId},space_id:o.spaceId,createdBy:t,ignore_block_count:!!g||void 0},{useCrdt:f});return r.push(...x),Ye({node:n,spaceId:o.spaceId,window:s,blockId:v,actor:t,allOperations:r}),v}function Fe(e){const{actor:t,parent:o,node:n,allOperations:i,deps:{importFileMap:r,randomID:a,spaceIdCreator:s},options:{useCrdt:l,ignoreBlockCount:d}}=e,u=n.getAttribute(fe[c().Ti.file])||"",p=r[u]?r[u].secureS3UrlOrAlias:u;let m=n.getAttribute(fe.fileAlias)||"";!m&&p.lastIndexOf("/")>=0&&(m=p.substring(p.lastIndexOf("/")+1));const f=(null==s?void 0:s.idInSavedSpace(k().iU))??a(),{model:g,operations:v}=y().yJh.create({createdBy:t,id:f,parent:{id:o.id,table:o.table,spaceId:o.spaceId},space_id:o.spaceId,properties:{source:x().TPx(p),title:x().TPx(m)},type:c().Ti.file,ignore_block_count:!!d||void 0},{useCrdt:l});return i.push(...v,g.getSecureFilesUpdate("","")),f}function Ne(e){const{actor:t,parent:o,node:i,allOperations:r,deps:{randomID:a,spaceIdCreator:s},options:{useCrdt:l,ignoreBlockCount:d}}=e,u=e.blockId?e.blockId:(null==s?void 0:s.idInSavedSpace(k().iU))??a();let p;const m="true"===i.getAttribute("bot-connected"),f=i.getAttribute("href"),g=i.getAttribute(fe[c().Ti.externalObjectInstance]);if(v().log({level:"info",from:"htmlHelpers",type:"linkPreviewStatus",data:{miscDataToConvertToString:{linkPreviewUrl:f,linkPreviewIntegration:g,isBotConnected:m,unfurlMetadataStr:i.getAttribute("metadata"),domainName:f?n().parse(f).hostname:void 0}}}),!f||!g)return;const h=n().parse(f).hostname;if(!h)return;if(m){const e=i.getAttribute("metadata");if(e){let t;try{t=JSON.parse(e)}catch(b){}p=t&&t.uri&&t.external_object_id&&t.bot_id&&t.attributes?{original_url:t.uri,domain:h,external_object_id:t.external_object_id,bot_id:t.bot_id,uri:t.uri,attributes:t.attributes}:{original_url:f,domain:h,error:{status_code:te().Rl.BAD_REQUEST}}}else p={original_url:f,domain:h,error:{status_code:te().Rl.BAD_REQUEST}}}else p={original_url:f,domain:h};if(!p)return;const{operations:_}=y().yJh.create({createdBy:t,id:u,parent:{id:o.id,table:"block",spaceId:o.spaceId},type:c().Ti.externalObjectInstance,space_id:o.spaceId,format:p,ignore_block_count:!!d||void 0},{useCrdt:l});return r.push(..._),u}const Ve=/language-(\w+)/;function Le(e){let t=null;return null==e||e.forEach(((e,o,n)=>{if(t)return;if(oe().Y.hasOwnProperty(e))return void(t=e);const i=e.match(Ve);i&&i.length>1&&oe().Y.hasOwnProperty(i[1])&&(t=i[1])})),t}function Oe(e){const{actor:t,parent:o,node:n,allOperations:i,deps:{randomID:r,spaceIdCreator:a,window:s},options:{useCrdt:l,ignoreBlockCount:d}}=e,u=(null==a?void 0:a.idInSavedSpace(k().iU))??r();let p=n.getAttribute(fe[c().Ti.code]);if(!p){var m;p=Le(null===(m=n.querySelector("code"))||void 0===m||null===(m=m.parentElement)||void 0===m?void 0:m.classList)}if(!p){var f;p=Le(null===(f=n.querySelector("code"))||void 0===f?void 0:f.classList)}const g=p&&oe().Y[p]?oe().Y[p]:"Plain Text",{operations:v}=y().yJh.create({id:u,type:c().Ti.code,properties:{title:x().TPx(De(n)),language:x().TPx(g)},format:{code_wrap:!0},parent:{id:o.id,table:o.table,spaceId:o.spaceId},space_id:o.spaceId,createdBy:t,ignore_block_count:!!d||void 0},{useCrdt:l});return i.push(...v),Ye({node:n,spaceId:o.spaceId,window:s,blockId:u,actor:t,allOperations:i}),u}function Ze(e){const{actor:t,parent:o,node:n,allOperations:i,deps:{randomID:r,spaceIdCreator:a},options:{useCrdt:s,ignoreBlockCount:l}}=e,d=(null==a?void 0:a.idInSavedSpace(k().iU))??r(),{operations:u}=y().yJh.create({id:d,type:c().Ti.equation,properties:{title:x().TPx(De(n))},parent:o,space_id:o.spaceId,createdBy:t,ignore_block_count:!!l||void 0},{useCrdt:s});return i.push(...u),d}function je(e){const{actor:t,parent:o,allOperations:n,deps:{randomID:i,spaceIdCreator:r},options:{useCrdt:a,ignoreBlockCount:s}}=e,l=(null==r?void 0:r.idInSavedSpace(k().iU))??i(),{operations:d}=y().yJh.create({id:l,type:c().Ti.tableOfContents,format:{block_color:"gray"},parent:o,space_id:o.spaceId,createdBy:t,ignore_block_count:!!s||void 0},{useCrdt:a});return n.push(...d),l}function Ke(e){const{actor:t,parent:o,node:n,allOperations:i,deps:{importFileMap:r,window:a,intl:s,randomID:l,spaceIdCreator:d,randomShortID:u,isPhoneNumber:p},options:{useCrdt:m,ignoreBlockCount:f}}=e,g=(null==d?void 0:d.idInSavedSpace(k().iU))??l(),[v,...h]=J().p4(n.childNodes),_=Xe({actor:t,parent:{id:g,table:k().iU,spaceId:o.spaceId},nodes:h,allOperations:i,deps:{importFileMap:r,window:a,intl:s,randomID:l,spaceIdCreator:d,randomShortID:u,isPhoneNumber:p},options:{useCrdt:m,ignoreBlockCount:f}}),{operations:b}=y().yJh.create({id:g,type:c().Ti.quote,properties:{title:x().TPx(null!=v&&v.textContent?v.textContent.trim():"")},content:_,parent:o,space_id:o.spaceId,createdBy:t,ignore_block_count:!!f||void 0},{useCrdt:m});return i.push(...b),Ye({node:n,spaceId:o.spaceId,blockId:g,actor:t,allOperations:i,window:a}),g}function ze(e){const{actor:t,parent:o,node:n,allOperations:i,deps:{importFileMap:r,window:a,intl:s,randomID:l,spaceIdCreator:d,randomShortID:u,isPhoneNumber:p},options:{useCrdt:m,ignoreBlockCount:f}}=e,g=(null==d?void 0:d.idInSavedSpace(k().iU))??l(),v=n.querySelector("summary"),h=J().p4(n.childNodes).filter((e=>e!==v)),_=v&&v.textContent&&(()=>{const{titleTokens:e}=Ce({node:v,window:a,stripText:!1,stripSurroundingWhitespace:!0,ignoreComments:!0,deps:{randomID:l,spaceIdCreator:d}});return e})(),b=Xe({actor:t,parent:{id:g,table:k().iU,spaceId:o.spaceId},nodes:h,allOperations:i,deps:{importFileMap:r,window:a,intl:s,randomID:l,spaceIdCreator:d,randomShortID:u,isPhoneNumber:p},options:{useCrdt:m,ignoreBlockCount:f}}),{operations:S}=y().yJh.create({id:g,type:c().Ti.toggle,content:b,properties:{title:_||x().TPx("")},parent:o,space_id:o.spaceId,createdBy:t,ignore_block_count:!!f||void 0},{useCrdt:m});return i.push(...S),g}function He(e){const{actor:t,parent:o,node:n,allOperations:i,deps:{importFileMap:r,window:a,intl:s,randomID:l,spaceIdCreator:d,randomShortID:u,isPhoneNumber:p},options:{useCrdt:m,ignoreBlockCount:f}}=e,g=(null==d?void 0:d.idInSavedSpace(k().iU))??l(),v=J().p4(n.children).filter((e=>e.hasAttribute(fe[c().Ti.column]))).slice(0,8).map((e=>function(e){const{actor:t,parent:o,node:n,allOperations:i,deps:{importFileMap:r,window:a,intl:s,randomID:l,spaceIdCreator:d,randomShortID:u,isPhoneNumber:p},options:{useCrdt:m,ignoreBlockCount:f}}=e,g=(null==d?void 0:d.idInSavedSpace(k().iU))??l(),v=n.getAttribute(fe[c().Ti.column]);let h;if(null!==v){const e=parseFloat(v);!Number.isNaN(e)&&e>0&&e<=1&&(h=e)}const _=Xe({actor:t,parent:{id:g,table:k().iU,spaceId:o.spaceId},nodes:J().p4(n.children),allOperations:i,deps:{importFileMap:r,window:a,intl:s,randomID:l,spaceIdCreator:d,randomShortID:u,isPhoneNumber:p},options:{useCrdt:m,ignoreBlockCount:f}}),{operations:b}=y().yJh.create({id:g,type:c().Ti.column,format:{column_ratio:h},content:_,parent:o,space_id:o.spaceId,createdBy:t,ignore_block_count:!!f||void 0},{useCrdt:m});return i.push(...b),g}({actor:t,parent:{id:g,table:k().iU,spaceId:o.spaceId},node:e,allOperations:i,deps:{importFileMap:r,window:a,intl:s,randomID:l,spaceIdCreator:d,randomShortID:u,isPhoneNumber:p},options:{useCrdt:m,ignoreBlockCount:f}}))),{operations:h}=y().yJh.create({id:g,type:c().Ti.columnList,content:v,parent:o,space_id:o.spaceId,createdBy:t,ignore_block_count:!!f||void 0},{useCrdt:m});return i.push(...h),g}const qe=/^\[x\].*/,We=/^\[ \].*/,Ge=/^[-\*\â€¢].*/;function $e(e){const{actor:t,parent:o,node:n,allOperations:i,deps:{importFileMap:r,window:a,intl:s,randomID:l,spaceIdCreator:u,randomShortID:p,isPhoneNumber:m},options:{useCrdt:f,ignoreBlockCount:g}}=e,v=(null==u?void 0:u.idInSavedSpace(k().iU))??l(),h=a.document.createElement("span"),_=[];J().p4(n.childNodes).forEach(((e,t)=>{(function(e,t){return e instanceof t.Element&&"a"===e.tagName.toLowerCase()&&e.hasAttribute("data-confluence-web-image")})(e,a)||0===t&&function(e,t){return e instanceof t.Element&&"a"===e.tagName.toLowerCase()&&e.hasAttribute(fe[c().Ti.file])}(e,a)?_.push(e):0===t&&!(function(e,t){return e instanceof t.Element&&"img"===e.tagName.toLowerCase()}(e,a)||function(e,t){return e instanceof t.Element&&"video"===e.tagName.toLowerCase()}(e,a)||function(e,t){return e instanceof t.Element&&"audio"===e.tagName.toLowerCase()}(e,a))||be(e,a)?(h.appendChild(e),e instanceof a.Element&&xe(e).forEach((e=>_.push(e)))):_.push(e)}));const b=Xe({actor:t,parent:{id:v,table:k().iU,spaceId:o.spaceId},nodes:_,allOperations:i,deps:{importFileMap:r,window:a,intl:s,randomID:l,spaceIdCreator:u,randomShortID:p,isPhoneNumber:m},options:{useCrdt:f,ignoreBlockCount:g}}),S=qe.test(h.textContent||""),w=We.test(h.textContent||"");let I;I=S||w?c().Ti.toDo:n.parentNode instanceof a.Element&&"ol"===n.parentNode.tagName.toLowerCase()?c().Ti.numberedList:c().Ti.bulletedList;let C=!1;I===c().Ti.toDo&&S&&(C=!0);const{titleTokens:T}=Ce({node:h,window:a,stripText:!0,stripSurroundingWhitespace:!0,ignoreComments:!0,deps:{randomID:l,spaceIdCreator:u}}),{operations:M}=y().yJh.create({id:v,type:I,content:b,properties:{title:T,checked:C?x().TPx(d().bx):void 0},parent:o,space_id:o.spaceId,createdBy:t,ignore_block_count:!!g||void 0},{useCrdt:f});return i.push(...M),Ye({node:h,spaceId:o.spaceId,blockId:v,actor:t,allOperations:i,window:a}),v}function Qe(e){const{node:t,spaceId:o,window:n,actor:i,discussionId:r,allOperations:a,deps:s,options:l}=e,c=Array.from(t.querySelectorAll(`span[${fe[ae.CommentDiscussionId]}="${r}"]`)),d=Date.now(),u=[];for(const p of c){if(null===p.textContent||0===p.textContent.trim().length)continue;const e=p.getAttribute(fe[x().GKr.Comment]);if(!e)continue;const{titleTokens:c}=Ce({node:p,window:n,stripText:!0,stripSurroundingWhitespace:!0,ignoreComments:!1}),m=p.getAttribute(fe[ae.CommentAuthor]);u.push(e);const f=s&&l&&Te({actor:i,parent:{table:ne().x_,id:e,spaceId:o},node:t,allOperations:a,deps:s,options:l}),g={id:e,parent_id:r,parent_table:ie().qF,space_id:o,version:1,created_time:d,last_edited_time:d,text:c,created_by_table:re().KJ,created_by_id:m||i.id,alive:!0,...f&&{content:f}};a.push(w().op.set({pointer:{table:ne().x_,id:e,spaceId:o},path:[],args:g}))}return u}function Ye(e){const{node:t,spaceId:o,blockId:n,actor:i,allOperations:r,window:a}=e,s=Array.from(t.querySelectorAll(`span[${fe[x().GKr.Discussion]}]`)),l=new Map;for(const c of s){const e=c.getAttribute(fe[x().GKr.Discussion]);if(!e)continue;e.split(",").forEach((e=>{if(l.has(e)){var t;null===(t=l.get(e))||void 0===t||null===(t=t.context)||void 0===t||t.push([c.textContent??"",[[x().GKr.Discussion,e]]])}else{const t={id:e,type:"default",parent_id:n,parent_table:k().iU,resolved:!1,context:[[c.textContent??"",[[x().GKr.Discussion,e]]]],space_id:o,version:0};l.set(e,t)}}))}Je({node:t,spaceId:o,window:a,blockId:n,actor:i,discussionToTextMap:l,allOperations:r})}function Je(e){const{node:t,spaceId:o,window:n,blockId:i,actor:r,discussionToTextMap:a,allOperations:s,deps:l,options:c}=e;for(const[d,u]of a.entries()){const e=Qe({node:t,spaceId:o,window:n,discussionId:d,actor:r,allOperations:s,deps:l,options:c});u.comments=e,s.push(w().op.set({pointer:{table:ie().qF,id:d,spaceId:o},path:[],args:u}),{pointer:{table:k().iU,id:i,spaceId:o},command:"listAfter",path:["discussions"],args:{id:d}})}}function Xe(e){const{actor:t,parent:o,nodes:n,allOperations:i,deps:r,htmlParserErrors:a,options:l}=e;return s().G0(...n.map((e=>et({actor:t,parent:o,node:e,allOperations:i,deps:r,htmlParserErrors:a,options:l}))))}function et(e){const{actor:t,parent:o,node:n,allOperations:i,deps:r,htmlParserErrors:l,options:d}=e,{importFileMap:p,window:m,intl:f,randomID:g,spaceIdCreator:v,blockContentMaxSize:h}=r,{useCrdt:_,ignoreBlockCount:b,treatNestedCodeAsCodeBlocks:y,skipTableToCollectionConversion:S,preserveLineBreaksInTableCellsEnabled:w,addHeadersToCollectionEnabled:C}=d;if(n&&n instanceof m.Element){const e=n.tagName.toLowerCase();if("div"===e&&"page-comments"===n.getAttribute("class")){const e=function(e){var t;const{node:o,parent:n,actor:i,window:r,allOperations:a,deps:s,options:l}=e,c=o.getAttribute(fe[x().GKr.Discussion])||((null===(t=s.spaceIdCreator)||void 0===t?void 0:t.idInSavedSpace(ie().qF))??s.randomID()),d=new Map;return d.set(c,{type:"default",id:c,parent_id:n.id,parent_table:k().iU,resolved:!1,space_id:n.spaceId,version:1}),Je({node:o,spaceId:n.spaceId,window:r,blockId:n.id,discussionToTextMap:d,allOperations:a,actor:i,deps:s,options:l}),c}({node:n,window:m,actor:t,allOperations:i,parent:o,deps:r,options:d});return[e]}if("h1"===e)return[Me({actor:t,parent:o,node:n,type:c().Ti.header,allOperations:i,deps:{window:m,randomID:g,spaceIdCreator:v},options:{useCrdt:_,ignoreBlockCount:b,stripText:!0,stripSurroundingWhitespace:!0}}),...Te({actor:t,parent:o,node:n,allOperations:i,deps:r,options:{useCrdt:_,ignoreBlockCount:b}})];if("h2"===e)return[Me({actor:t,parent:o,node:n,type:c().Ti.subHeader,allOperations:i,deps:{window:m,randomID:g,spaceIdCreator:v},options:{useCrdt:_,ignoreBlockCount:b,stripText:!0,stripSurroundingWhitespace:!0}}),...Te({actor:t,parent:o,node:n,allOperations:i,deps:r,options:{useCrdt:_,ignoreBlockCount:b}})];if("hr"===e)return[Ae({actor:t,parent:o,allOperations:i,deps:{randomID:g,spaceIdCreator:v},options:{useCrdt:_,ignoreBlockCount:b}})];if("h"===e[0])return[Me({actor:t,parent:o,node:n,type:c().Ti.subSubHeader,allOperations:i,deps:{window:m,randomID:g,spaceIdCreator:v},options:{useCrdt:_,ignoreBlockCount:b,stripText:!0,stripSurroundingWhitespace:!0}}),...Te({actor:t,parent:o,node:n,allOperations:i,deps:r,options:{useCrdt:_,ignoreBlockCount:b}})];if("pre"===e||"code"===e||"div"===e&&n.className===ce)return n.innerHTML.length&&h&&h>0&&n.innerHTML.length>h?[]:[Oe({actor:t,parent:o,node:n,allOperations:i,deps:{randomID:g,spaceIdCreator:v,window:m},options:{useCrdt:_,ignoreBlockCount:b}}),...Te({actor:t,parent:o,node:n,allOperations:i,deps:r,options:{useCrdt:_,ignoreBlockCount:b}})];if(n.hasAttribute(fe[c().Ti.callout]))return[Ue({actor:t,parent:o,node:n,allOperations:i,deps:r,options:{useCrdt:_,ignoreBlockCount:b}})];if("blockquote"===e)return[Ke({actor:t,parent:o,node:n,allOperations:i,deps:r,options:{useCrdt:_,ignoreBlockCount:b}})];if("details"===e)return[ze({actor:t,parent:o,node:n,allOperations:i,deps:r,options:{useCrdt:_,ignoreBlockCount:b}})];if("table"===e){const{tableData:d,tableFiles:g}=function(e){const{node:t,window:o,importFileMap:n,intl:i,preserveLineBreaksInTableCellsEnabled:r}=e,a=[],l=[],d=Array.from(t.querySelectorAll("tr")).filter((e=>e.closest("table")===t));for(const p of d){const e=[],t=[],d=Array.from(p.querySelectorAll("td, th")).filter((e=>e.closest("tr")===p));for(const i of d){const a=(i.textContent||"").trim(),l=tt(i.getAttribute("rowspan"),1),{titleTokens:d}=Ce({node:i,window:o,stripText:!1,stripSurroundingWhitespace:!0,ignoreComments:!0,preserveLineBreaksInTableCellsEnabled:r});e.push({text:a,textValue:d,rowSpan:l});const u=tt(i.getAttribute("colspan"),1);for(let t=1;t<u;t++)e.push({text:"",rowSpan:l});const p=xe(i);if(p.length){const e=s().oA(p.flatMap((e=>{var t;const o=e.getAttribute("src")||e.getAttribute(fe[c().Ti.file])||e.getAttribute(fe[c().Ti.audio])||e.getAttribute(fe[c().Ti.video]),i=e.getAttribute(fe.fileAlias);return o?{name:i||o,url:(null===(t=n[o])||void 0===t?void 0:t.secureS3UrlOrAlias)||o}:void 0})));t.push(...e)}}e.length&&l.push(e);const m=u().CC(t);a.push({text:i.formatMessage({id:"htmlHelpers.table.fileColumnName",defaultMessage:"Files"}),textValue:m})}for(let s=0;s<l.length;s++){const e=l[s];for(let t=0;t<e.length;t++){const o=e[t].rowSpan;if(o>1)for(let e=1;e<o&&!(s+e>=l.length);e++){l[s+e].splice(t,0,{text:"",rowSpan:1})}}}return{tableData:l,tableFiles:a}}({node:n,window:m,importFileMap:p,intl:f,preserveLineBreaksInTableCellsEnabled:w});if(!S&&g.some((e=>{var t;return null===(t=e.textValue)||void 0===t?void 0:t.length})))for(let e=0;e<d.length;e++)d[e].push({text:g[e].text,textValue:g[e].textValue,columnType:{schema:{type:"file"},validate:s()._z,coerce:s().yR}});let v="table";if((n.hasAttribute("data-import-as-database")||!S&&g.some((e=>{var t;return null===(t=e.textValue)||void 0===t?void 0:t.length})))&&(v="collection"),0===s().Ar(d).length)return[];if(o.table===I().vF||o.table===ne().x_)return[];const h={...o,table:o.table};try{return[Pe({actor:t,parent:h,node:n,tableData:d,allOperations:i,deps:r,options:{useCrdt:_,ignoreBlockCount:b,tableType:v,addHeadersToCollectionEnabled:C}})]}catch(T){const t=(0,a().t)(T);if(!l||"CsvImportError"!==t.message)throw T;const o=l.get(e)||0;return l.set(e,o+1),[]}}if("div"===e&&n.hasAttribute(fe[c().Ti.columnList]))return[He({actor:t,parent:o,node:n,allOperations:i,deps:r,options:{useCrdt:_,ignoreBlockCount:b}})];if("nav"===e&&n.hasAttribute(fe[c().Ti.tableOfContents]))return[je({actor:t,parent:o,allOperations:i,deps:{randomID:g,spaceIdCreator:v},options:{useCrdt:_,ignoreBlockCount:b}}),...Te({actor:t,parent:o,node:n,allOperations:i,deps:r,options:{useCrdt:_,ignoreBlockCount:b}})];if("ul"===e||"ol"===e)return s().G0(...Array.from(n.children).map((e=>et({actor:t,parent:o,node:e,allOperations:i,deps:r,options:{useCrdt:_,ignoreBlockCount:b}}))));if("li"===e||qe.test(n.textContent||"")||We.test(n.textContent||"")||Ge.test(n.textContent||""))return[$e({actor:t,parent:o,node:n,allOperations:i,deps:r,options:{useCrdt:_,ignoreBlockCount:b}})];if("img"===e){const e=n.getAttribute("src");if(e)return[Re({actor:t,parent:o,source:p[e]||{type:"unknown",secureS3UrlOrAlias:e},allOperations:i,deps:{randomID:g,spaceIdCreator:v},options:{useCrdt:_,ignoreBlockCount:b,fallbackWidth:n instanceof m.HTMLImageElement?n.width:void 0}})]}if("a"===e&&n.getAttribute(fe[c().Ti.externalObjectInstance])){const e=Ne({actor:t,parent:o,node:n,allOperations:i,deps:{randomID:g,spaceIdCreator:v},options:{useCrdt:_,ignoreBlockCount:b}});return e?[e]:[]}if("a"===e&&n.getAttribute(fe[c().Ti.embed])){const e=n.getAttribute("href");if(e)return[Ee({actor:t,parent:o,source:{type:"unknown",secureS3UrlOrAlias:e,height:400},allOperations:i,deps:{randomID:g,spaceIdCreator:v},options:{useCrdt:_,ignoreBlockCount:b}})]}if("a"===e&&n.getAttribute(fe[c().Ti.file]))return[Fe({actor:t,parent:o,node:n,allOperations:i,deps:{importFileMap:p,randomID:g,spaceIdCreator:v},options:{useCrdt:_,ignoreBlockCount:b}})];if("a"===e&&0===J().p4(n.childNodes).length){const e=n.getAttribute("href");if(n.hasAttribute("download")&&e)return[Ee({actor:t,parent:o,source:p[e]||{type:"unknown",secureS3UrlOrAlias:e},allOperations:i,deps:{randomID:g,spaceIdCreator:v},options:{useCrdt:_,ignoreBlockCount:b}})]}if("video"===e){const e=n.querySelector("source");if(e){const n=e.getAttribute("src");if(n&&Y().xL({url:n}))return[Ee({actor:t,parent:o,source:{type:"unknown",secureS3UrlOrAlias:n},allOperations:i,deps:{randomID:g,spaceIdCreator:v},options:{useCrdt:_,ignoreBlockCount:b}})]}}if("audio"===e){const e=n.querySelector("source");if(e){const n=e.getAttribute("src");if(n&&Y()._c({url:n}))return[Ee({actor:t,parent:o,source:{type:"unknown",secureS3UrlOrAlias:n},allOperations:i,deps:{randomID:g,spaceIdCreator:v},options:{useCrdt:_,ignoreBlockCount:b}})]}}if("iframe"===e){const e=n.getAttribute("src");if(e)return[Be({actor:t,parent:o,node:n,sourceUrl:e,allOperations:i,deps:{randomID:g,spaceIdCreator:v},options:{useCrdt:_,ignoreBlockCount:b}})]}return"p"===e&&n.getAttribute("confluenceNewLine")?[Me({actor:t,parent:o,node:n,type:c().Ti.text,allOperations:i,deps:{window:m,randomID:g,spaceIdCreator:v},options:{useCrdt:_,ignoreBlockCount:b,stripText:!0,stripSurroundingWhitespace:!0}})]:n.hasAttribute(fe[c().Ti.equation])?[Ze({actor:t,parent:o,node:n,allOperations:i,deps:{randomID:g,spaceIdCreator:v},options:{useCrdt:_,ignoreBlockCount:b}})]:[.../^\s*$/g.test(n.textContent||"")?[]:[Me({actor:t,parent:o,node:n,type:c().Ti.text,allOperations:i,deps:{window:m,randomID:g,spaceIdCreator:v},options:{useCrdt:_,ignoreBlockCount:b,stripText:!1,stripSurroundingWhitespace:!0,ignoreCodeBlock:y}})],...Te({actor:t,parent:o,node:n,allOperations:i,deps:r,options:{useCrdt:_,ignoreBlockCount:b,considerCodeBlockAsNonTextItem:y}})]}return[]}function tt(e,t){const o=null!==e?parseInt(e,10):t;return isFinite(o)?o:t}function ot(e){if(e&&-1!==e.indexOf("em"))return parseInt(e)}function nt(e,t,o){const n=o.document.createElement(t);for(;e.firstChild;)n.appendChild(e.firstChild);for(let i=e.attributes.length-1;i>=0;--i){const t=e.attributes[i];n.setAttribute(t.name,t.value)}return e.parentNode&&e.parentNode.replaceChild(n,e),n}function it(e,t,o){const n=o.document.createElement(t);for(;e.firstChild;)n.appendChild(e.firstChild);e.appendChild(n)}function rt(e){const t=[];let o=e;for(;e.firstChild;){const n=e.firstChild;t.push(n),e.parentNode&&e.parentNode.insertBefore(n,o.nextSibling),o=n}const n=e.parentNode;return n&&(n.removeChild(e),n.normalize()),t}const at=1e4;function st(e,t){!function(e,t){const o=Array.from(e.querySelectorAll("p"));for(const n of o){let e=n.firstChild,o=0;for(;e&&o<at;){let i=!1;if(e instanceof t.Element&&null!==e.textContent&&!e.textContent.trim()){const t=Array.from(e.querySelectorAll("br"));if(t.length>0){for(const o of t)n.insertBefore(o,e);i=!0}}const r=e.nextSibling;i&&n.removeChild(e),e=r,o+=1}}}(e,t);const o=Array.from(e.querySelectorAll("p"));for(let n=0;n<at;n++){const e=o.shift();if(!e||!e.parentNode)return;const n=e.querySelector("br");if(!n)continue;if(n.parentElement!==e)continue;const i=t.document.createElement("p");e.parentNode.insertBefore(i,e.nextSibling);let r=n.nextSibling;for(;r;){const e=r.nextSibling;i.appendChild(r),r=e}e.removeChild(n),o.unshift(i)}}function lt(e){const t=e.match(/^([0-9]+)px$/i);if(t)return parseInt(t[1])}function ct(e){const{rootNode:t,window:o,isInlineContent:n,emojiData:i}=e;!function(e){const{rootNode:t,window:o,emojiData:{emojiByName:n}}=e,i=Array.from(t.querySelectorAll("img[data-stringify-emoji]"));for(const r of i){const e=r.getAttribute("data-stringify-emoji")||"",t=e.match(/^:(.+):$/);if(!t||!r.parentNode)continue;const i=n[t[1]]||e;r.parentNode.replaceChild(o.document.createTextNode(i),r)}}({rootNode:t,window:o,emojiData:i}),t.normalize(),st(t,o);const r=J().p4(t.childNodes);for(;r.length>0;){let e=r.shift();if(e instanceof o.Element&&e.parentNode&&"google-sheets-html-origin"===e.tagName.toLowerCase()){const t=J().p4(e.childNodes);for(const o of t)e.parentNode.insertBefore(o,e);r.unshift(...t),e.remove()}else if(e&&e.parentNode&&3===e.nodeType&&/^( |\t)*(\n)+( |\t)*$/.test(e.data))e.parentNode.removeChild(e);else if(e&&e instanceof o.Element&&e.parentNode&&le[e.tagName.toLowerCase()])e.parentNode.removeChild(e);else{if(e instanceof o.HTMLElement){const t=(l=e.style.fontSize||void 0)&&-1!==l.indexOf("px")||l&&-1!==l.indexOf("pt")?parseInt(l):void 0,n=ot(e.style.fontSize||void 0);(t&&t>=24||n&&n>2)&&(e=nt(e,"h1",o))}if(e instanceof o.HTMLElement&&("line-through"===e.style.textDecoration&&it(e,"del",o),"italic"===e.style.fontStyle&&it(e,"em",o),("bold"===e.style.fontWeight||e.style.fontWeight&&parseInt(e.style.fontWeight)>=500)&&it(e,"strong",o)),e instanceof o.HTMLImageElement){const t=lt(e.style.width);!e.width&&t&&(e.width=t)}if(e instanceof o.HTMLElement&&("b"===e.tagName.toLowerCase()?e=nt(e,"strong",o):"i"===e.tagName.toLowerCase()&&(e=nt(e,"em",o))),e instanceof o.HTMLElement&&"strong"===e.tagName.toLowerCase()&&"normal"===e.style.fontWeight&&(e=nt(e,"span",o)),e instanceof o.HTMLElement&&("section"===e.tagName.toLowerCase()||"article"===e.tagName.toLowerCase())&&(e=nt(e,"div",o)),e instanceof o.HTMLElement&&"div"===e.tagName.toLowerCase()&&"inline"===e.style.display&&(e=nt(e,"span",o)),e instanceof o.HTMLElement&&"input"===e.tagName.toLowerCase()&&"checkbox"===e.type){const t=e.checked,n=e.parentNode,i=o.document.createElement("span");i.textContent=`[${t?"x":" "}] `,n&&(n.insertBefore(i,e),n.removeChild(e)),r.push(i)}else{if(e instanceof o.HTMLElement&&"table"===e.tagName.toLowerCase()){const t=Array.from(e.querySelectorAll("tr")).map((e=>e.querySelectorAll("td, th")));if(t.every((e=>1===e.length))){const n=o.document.createDocumentFragment();for(const e of t){const t=e[0],i=t.childNodes.length;for(let e=0;e<i;e+=1){const o=t.childNodes[e];o&&(n.appendChild(o.cloneNode(!0)),r.push(o))}n.appendChild(o.document.createElement("hr"))}e.parentNode&&e.parentNode.replaceChild(n,e)}}if(e instanceof o.HTMLElement&&("ul"===e.tagName.toLowerCase()||"ol"===e.tagName.toLowerCase())&&e.parentNode instanceof o.HTMLElement&&("ul"===e.parentNode.tagName.toLowerCase()||"ol"===e.parentNode.tagName.toLowerCase())&&e.previousSibling instanceof o.HTMLElement&&"li"===e.previousSibling.tagName.toLowerCase()&&e.previousSibling.appendChild(e),e instanceof o.Element&&(e.removeAttribute("style"),e.removeAttribute("dir")),e instanceof o.Element&&"span"===e.tagName.toLowerCase()){var a;if("page-comment"===e.getAttribute("class")||null!==(a=e.getAttribute("class"))&&void 0!==a&&a.split(" ").includes("retain-span"))continue;(e.hasAttribute(fe[x().GKr.Highlight])||e.hasAttribute(fe[x().GKr.Discussion])||e.hasAttribute(fe[x().GKr.Comment])||e.hasAttribute(fe[x().GKr.Equation])?Array.from(e.children):rt(e)).forEach((e=>r.push(e)))}else if(e){J().p4(e.childNodes).forEach((e=>r.push(e)))}}}}var l;for(J().p4(t.childNodes).forEach((e=>r.push(e)));r.length>0;){const e=r.shift();if(e)if(dt(e,o)&&s().yW(e.childNodes,(e=>e instanceof o.Element&&"h1"===e.tagName.toLowerCase()))){const t=o.document.createElement("h1");s().S6(e.childNodes,(e=>{s().S6(e.childNodes,(e=>{const o=e.cloneNode(!0);o&&t.appendChild(o)}))}));const n=e.parentNode;if(n){if("td"===e.tagName.toLowerCase()||"th"===e.tagName.toLowerCase()){const i=o.document.createElement(e.tagName.toLowerCase());i.appendChild(t),n.insertBefore(i,e)}else n.insertBefore(t,e);n.removeChild(e)}r.push(t)}else if(dt(e,o)&&s().yW(e.childNodes,(e=>e instanceof o.Element&&"h2"===e.tagName.toLowerCase()))){const t=o.document.createElement("h2");s().S6(e.childNodes,(e=>{s().S6(e.childNodes,(e=>{const o=e.cloneNode(!0);o&&t.appendChild(o)}))}));const n=e.parentNode;if(n){if("td"===e.tagName.toLowerCase()||"th"===e.tagName.toLowerCase()){const i=o.document.createElement(e.tagName.toLowerCase());i.appendChild(t),n.insertBefore(i,e)}else n.insertBefore(t,e);n.removeChild(e)}r.push(t)}else if(e instanceof o.HTMLElement&&("div"===e.tagName.toLowerCase()||"span"===e.tagName.toLowerCase())&&e.parentNode&&0===e.childNodes.length)e.parentNode.removeChild(e);else if(!dt(e,o)||"p"!==e.tagName.toLowerCase()&&"div"!==e.tagName.toLowerCase()&&"figure"!==e.tagName.toLowerCase()||!J().p4(e.childNodes).some((e=>e instanceof o.Element&&("p"===e.tagName.toLowerCase()||"div"===e.tagName.toLowerCase()||"img"===e.tagName.toLowerCase()||"ul"===e.tagName.toLowerCase()||"table"===e.tagName.toLowerCase()||"hr"===e.tagName.toLowerCase()||"video"===e.tagName.toLowerCase()||"iframe"===e.tagName.toLowerCase())))){if(e&&e.childNodes){J().p4(e.childNodes).forEach((e=>r.push(e)))}}else{rt(e).forEach((e=>r.push(e)))}}t.normalize(),n||J().p4(t.childNodes).forEach((e=>{if(3===e.nodeType){const n=o.document.createElement("p");t.insertBefore(n,e),n.appendChild(e)}}))}function dt(e,t){return e instanceof t.Element&&(0!==e.childNodes.length&&!(e.hasAttribute(fe[c().Ti.columnList])||e.hasAttribute(fe[c().Ti.column])||e.hasAttribute(fe[c().Ti.callout])))}function ut(e){const{actor:t,parent:o,rootNode:n,deps:i,htmlParserErrors:r,options:a}=e;ct({rootNode:n,window:i.window,isInlineContent:!1,emojiData:i.emojiData});const s=[];return{allOperations:s,rootContentIds:Xe({actor:t,parent:o,nodes:J().p4(n.children),allOperations:s,deps:i,htmlParserErrors:r,options:a})}}function pt(e){const{node:t,window:o,stripText:n,stripSurroundingWhitespace:i,emojiData:r}=e;ct({rootNode:t,window:o,isInlineContent:!0,emojiData:r});const{titleTokens:a}=Ce({node:t,window:o,stripText:n,stripSurroundingWhitespace:i,ignoreComments:!0});return a}function mt(e){const{node:t,window:o,emojiData:n}=e;return ct({rootNode:t,window:o,isInlineContent:!1,emojiData:n}),gt(t,o)}const ft=new Set(["span","div","p"]);function gt(e,t){const o=e.tagName.toLowerCase();if(!ft.has(o))return!0;if("div"===o&&(e.className===ce||e.hasAttribute(fe[c().Ti.columnList])))return!0;for(const n of Array.from(e.childNodes))if(_e(t,n)&&gt(n,t))return!0;return!1}function vt(e){if("default"===e||"gray"===e||"brown"===e||"orange"===e||"yellow"===e||"teal"===e||"blue"===e||"purple"===e||"pink"===e||"red"===e||"gray_background"===e||"brown_background"===e||"orange_background"===e||"yellow_background"===e||"teal_background"===e||"blue_background"===e||"purple_background"===e||"pink_background"===e||"red_background"===e)return e}},605716:(e,t,o)=>{o.d(t,{h:()=>n});const n=(0,o(827282).CZ)("arrowDownCircled",{default:{loader:()=>o.e(64165).then(o.bind(o,964165))},small:{loader:()=>o.e(50115).then(o.bind(o,50115))},mini:{loader:()=>o.e(42932).then(o.bind(o,942932))},large:{loader:()=>o.e(73949).then(o.bind(o,473949))}})},475593:(e,t,o)=>{o.d(t,{g:()=>n});const n=(0,o(827282).CZ)("arrowUpCircleFill",{default:{loader:()=>o.e(54750).then(o.bind(o,454750))},small:{loader:()=>o.e(50029).then(o.bind(o,350029))},mini:{loader:()=>o.e(39763).then(o.bind(o,439763))},large:{loader:()=>o.e(12080).then(o.bind(o,312080))}})},364052:(e,t,o)=>{o.d(t,{F:()=>n});const n=(0,o(827282).CZ)("checkmarkCircle",{default:{loader:()=>o.e(43053).then(o.bind(o,143053))},small:{loader:()=>o.e(22522).then(o.bind(o,722522))},mini:{loader:()=>o.e(49173).then(o.bind(o,149173))},large:{loader:()=>o.e(10761).then(o.bind(o,410761))}})},370329:(e,t,o)=>{o.d(t,{h:()=>n});const n=(0,o(827282).CZ)("exclamationMarkTriangle",{default:{loader:()=>o.e(59550).then(o.bind(o,859550))},small:{loader:()=>o.e(25642).then(o.bind(o,925642))},mini:{loader:()=>o.e(46798).then(o.bind(o,246798))},large:{loader:()=>o.e(4804).then(o.bind(o,404804))}})},80327:(e,t,o)=>{o.d(t,{j:()=>n});const n=(0,o(827282).CZ)("trash",{default:{loader:()=>o.e(46947).then(o.bind(o,546947))},small:{loader:()=>o.e(13584).then(o.bind(o,313584))},mini:{loader:()=>o.e(46999).then(o.bind(o,546999))},large:{loader:()=>o.e(87191).then(o.bind(o,287191))}})},843403:(e,t,o)=>{o.d(t,{J:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("alias",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M13.1475 10.5869V3.72363C13.1475 3.25195 12.833 2.93066 12.3477 2.93066H5.48438C5.02637 2.93066 4.70508 3.27246 4.70508 3.67578C4.70508 4.07227 5.05371 4.40039 5.46387 4.40039H7.89746L10.8438 4.30469L9.59961 5.39844L3.08496 11.9199C2.92773 12.0771 2.8457 12.2686 2.8457 12.46C2.8457 12.8564 3.20801 13.2256 3.61816 13.2256C3.80957 13.2256 3.99414 13.1504 4.15137 12.9932L10.6729 6.47168L11.7803 5.22754L11.6641 8.05762V10.6074C11.6641 11.0176 11.9922 11.373 12.4023 11.373C12.8057 11.373 13.1475 11.0312 13.1475 10.5869Z"})})},374844:(e,t,o)=>{o.d(t,{n:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("arrowRight",{viewBox:"0 0 30 30",svg:(0,n.jsx)("polygon",{points:"1 14 25.188 14 16.594 5.406 18 4 29 15 18 26 16.594 24.594 25.188 16 1 16"})})},363728:(e,t,o)=>{o.d(t,{S:()=>i});o(667294);const n={viewBox:"0 0 20 20",svg:(0,o(785893).jsx)("path",{d:"M12.503 17.5a.75.75 0 0 1 0-1.5h.75a3.25 3.25 0 0 0 0-6.5H4.06l3.72 3.72a.75.75 0 1 1-1.061 1.06l-5-5a.75.75 0 0 1 0-1.06l5-5a.75.75 0 0 1 1.06 1.06L4.06 8h9.192a4.75 4.75 0 0 1 0 9.5z"})},i=(0,o(827282).IU)("arrowUTurnLeft",n)},115807:(e,t,o)=>{o.d(t,{Q:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("book",{viewBox:"0 0 30 30",svg:(0,n.jsx)("path",{d:"M27,23V1H7C4.791,1,3,2.791,3,5v20c0,2.209,1.791,4,4,4h20v-2h-1v-4H27z M21,3v6l-1-1.333L19,9V3H21z M20,11l3,4V3h2v18H9V3 h8v12L20,11z M5,5c0-1.103,0.896-2,2-2v18c-0.729,0-1.411,0.195-2,0.537V5z M24,27H7c-1.104,0-2-0.896-2-2s0.896-2,2-2h17V27z"})})},44037:(e,t,o)=>{o.d(t,{a:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("duplicate",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M2.83887 12.1523H4.00098V13.1846C4.00098 14.6406 4.75977 15.3994 6.24316 15.3994H13.1611C14.6377 15.3994 15.4033 14.6406 15.4033 13.1846V6.21191C15.4033 4.75586 14.6377 3.99707 13.1611 3.99707H11.999V2.96484C11.999 1.50879 11.2334 0.75 9.75684 0.75H2.83887C1.3623 0.75 0.59668 1.50195 0.59668 2.96484V9.93066C0.59668 11.3936 1.3623 12.1523 2.83887 12.1523ZM2.9209 10.8125C2.28516 10.8125 1.93652 10.4844 1.93652 9.82129V3.08105C1.93652 2.41797 2.28516 2.08301 2.9209 2.08301H9.68164C10.3105 2.08301 10.666 2.41797 10.666 3.08105V3.99707H6.24316C4.75977 3.99707 4.00098 4.75586 4.00098 6.21191V10.8125H2.9209ZM6.31836 14.0596C5.68262 14.0596 5.34082 13.7314 5.34082 13.0684V6.32812C5.34082 5.66504 5.68262 5.33691 6.31836 5.33691H13.0791C13.708 5.33691 14.0635 5.66504 14.0635 6.32812V13.0684C14.0635 13.7314 13.708 14.0596 13.0791 14.0596H6.31836Z"})})},200962:(e,t,o)=>{o.d(t,{a:()=>i});o(667294);const n={viewBox:"0 0 20 20",svg:(0,o(785893).jsx)("path",{d:"M5 2.25A2.75 2.75 0 0 0 2.25 5v6.5A2.75 2.75 0 0 0 5 14.25h1v1A2.75 2.75 0 0 0 8.75 18h6.5A2.75 2.75 0 0 0 18 15.25v-6.5A2.75 2.75 0 0 0 15.25 6h-1V5a2.75 2.75 0 0 0-2.75-2.75zM12.75 6h-4A2.75 2.75 0 0 0 6 8.75v4H5c-.69 0-1.25-.56-1.25-1.25V5c0-.69.56-1.25 1.25-1.25h6.5c.69 0 1.25.56 1.25 1.25zM7.5 8.75c0-.69.56-1.25 1.25-1.25h6.5c.69 0 1.25.56 1.25 1.25v6.5c0 .69-.56 1.25-1.25 1.25h-6.5c-.69 0-1.25-.56-1.25-1.25z"})},i=(0,o(827282).IU)("duplicate",n)},630078:(e,t,o)=>{o.d(t,{s:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("expand",{viewBox:"-1 -1 9 11",svg:(0,n.jsx)("path",{id:"path0_stroke",d:"M 3.5 0L 3.98809 -0.569442L 3.5 -0.987808L 3.01191 -0.569442L 3.5 0ZM 3.5 9L 3.01191 9.56944L 3.5 9.98781L 3.98809 9.56944L 3.5 9ZM 0.488094 3.56944L 3.98809 0.569442L 3.01191 -0.569442L -0.488094 2.43056L 0.488094 3.56944ZM 3.01191 0.569442L 6.51191 3.56944L 7.48809 2.43056L 3.98809 -0.569442L 3.01191 0.569442ZM -0.488094 6.56944L 3.01191 9.56944L 3.98809 8.43056L 0.488094 5.43056L -0.488094 6.56944ZM 3.98809 9.56944L 7.48809 6.56944L 6.51191 5.43056L 3.01191 8.43056L 3.98809 9.56944Z"})})},456681:(e,t,o)=>{o.d(t,{m:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("help",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M8 15.126C11.8623 15.126 15.0615 11.9336 15.0615 8.06445C15.0615 4.20215 11.8623 1.00293 7.99316 1.00293C4.13086 1.00293 0.938477 4.20215 0.938477 8.06445C0.938477 11.9336 4.1377 15.126 8 15.126ZM8 13.7383C4.85547 13.7383 2.33301 11.209 2.33301 8.06445C2.33301 4.91992 4.84863 2.39746 7.99316 2.39746C11.1377 2.39746 13.667 4.91992 13.6738 8.06445C13.6738 11.209 11.1445 13.7383 8 13.7383ZM7.84277 9.4248C8.21875 9.4248 8.45801 9.21289 8.47852 8.93262C8.47852 8.90527 8.47852 8.87109 8.47852 8.85059C8.49902 8.49512 8.74512 8.25586 9.18945 7.96875C9.85938 7.52441 10.2969 7.13477 10.2969 6.3418C10.2969 5.2002 9.27148 4.55078 8.06152 4.55078C6.89258 4.55078 6.09277 5.08398 5.88086 5.72656C5.83984 5.84277 5.81934 5.95898 5.81934 6.08203C5.81934 6.41016 6.0791 6.61523 6.35254 6.61523C6.60547 6.61523 6.76953 6.5127 6.90625 6.32812L7.01562 6.19141C7.24121 5.81543 7.56934 5.61719 7.97949 5.61719C8.5332 5.61719 8.90918 5.94531 8.90918 6.41016C8.90918 6.84082 8.62207 7.05273 8.04102 7.45605C7.55566 7.79102 7.2002 8.14648 7.2002 8.76855V8.84375C7.2002 9.22656 7.43262 9.4248 7.84277 9.4248ZM7.83594 11.5234C8.27344 11.5234 8.63574 11.2021 8.63574 10.7715C8.63574 10.3408 8.27344 10.0264 7.83594 10.0264C7.3916 10.0264 7.03613 10.3477 7.03613 10.7715C7.03613 11.2021 7.39844 11.5234 7.83594 11.5234Z"})})},825886:(e,t,o)=>{o.d(t,{q:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("microphone",{viewBox:"0 0 17 25",svg:(0,n.jsx)("path",{d:"M0.20752 12.0743C0.20752 13.5496 0.511882 14.853 1.12061 15.9845C1.72933 17.116 2.57438 18.0219 3.65576 18.7023C4.73714 19.3826 5.98324 19.7908 7.39404 19.9269V22.129H3.45166C3.17236 22.129 2.93245 22.2257 2.73193 22.4191C2.53141 22.6196 2.43115 22.8595 2.43115 23.1388C2.43115 23.4109 2.53141 23.6437 2.73193 23.837C2.93245 24.0376 3.17236 24.1378 3.45166 24.1378H13.313C13.5923 24.1378 13.8322 24.0376 14.0327 23.837C14.2332 23.6437 14.3335 23.4109 14.3335 23.1388C14.3335 22.8595 14.2332 22.6196 14.0327 22.4191C13.8322 22.2257 13.5923 22.129 13.313 22.129H9.37061V19.9269C10.7814 19.7908 12.0239 19.3826 13.0981 18.7023C14.1795 18.0219 15.0246 17.116 15.6333 15.9845C16.242 14.853 16.5464 13.5496 16.5464 12.0743V9.94739C16.5464 9.66809 16.4461 9.43176 16.2456 9.2384C16.0522 9.04504 15.8159 8.94836 15.5366 8.94836C15.2573 8.94836 15.0174 9.04504 14.8169 9.2384C14.6164 9.43176 14.5161 9.66809 14.5161 9.94739V11.9991C14.5161 13.2166 14.2583 14.2837 13.7427 15.2003C13.2271 16.1098 12.5109 16.8152 11.5942 17.3165C10.6776 17.8178 9.60693 18.0685 8.38232 18.0685C7.16488 18.0685 6.09424 17.8178 5.17041 17.3165C4.24658 16.8152 3.52686 16.1098 3.01123 15.2003C2.50277 14.2837 2.24854 13.2166 2.24854 11.9991V9.94739C2.24854 9.66809 2.14827 9.43176 1.94775 9.2384C1.74723 9.04504 1.50374 8.94836 1.21729 8.94836C0.94515 8.94836 0.708822 9.04504 0.508301 9.2384C0.30778 9.43176 0.20752 9.66809 0.20752 9.94739V12.0743ZM8.38232 15.8448C9.10563 15.8448 9.75016 15.6766 10.3159 15.34C10.8888 14.9962 11.3364 14.5236 11.6587 13.922C11.9881 13.3204 12.1528 12.6222 12.1528 11.8273V4.59778C12.1528 3.80286 11.9881 3.10461 11.6587 2.50305C11.3364 1.90149 10.8888 1.43241 10.3159 1.09583C9.75016 0.752075 9.10563 0.5802 8.38232 0.5802C7.65902 0.5802 7.0109 0.752075 6.43799 1.09583C5.87223 1.43241 5.42464 1.90149 5.09521 2.50305C4.76579 3.10461 4.60107 3.80286 4.60107 4.59778V11.8273C4.60107 12.6222 4.76579 13.3204 5.09521 13.922C5.42464 14.5236 5.87223 14.9962 6.43799 15.34C7.0109 15.6766 7.65902 15.8448 8.38232 15.8448Z"})})},159732:(e,t,o)=>{o.d(t,{R:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("plus",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M7.977 14.963c.407 0 .747-.324.747-.723V8.72h5.362c.399 0 .74-.34.74-.747a.746.746 0 00-.74-.738H8.724V1.706c0-.398-.34-.722-.747-.722a.732.732 0 00-.739.722v5.529h-5.37a.746.746 0 00-.74.738c0 .407.341.747.74.747h5.37v5.52c0 .399.332.723.739.723z"})})},828042:(e,t,o)=>{o.d(t,{t:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("sparkles",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.2757 4.82358C7.57934 4.71847 7.57934 4.53161 7.2757 4.41483L5.62905 3.78419C5.33709 3.67908 4.99842 3.3404 4.88164 3.03676L4.25101 1.39009C4.1459 1.08644 3.95905 1.08644 3.84226 1.39009L3.21163 3.03676C3.10653 3.32872 2.76786 3.6674 2.46422 3.78419L0.817572 4.41483C0.513934 4.51994 0.513934 4.70679 0.817572 4.82358L2.46422 5.45422C2.75618 5.55933 3.09485 5.898 3.21163 6.20165L3.84226 7.84832C3.94737 8.15196 4.13422 8.15196 4.25101 7.84832L4.88164 6.20165C4.98674 5.90968 5.32541 5.571 5.62905 5.45422L7.2757 4.82358ZM15.2991 10.5929C16.2334 10.3593 16.2334 9.9739 15.2991 9.74032L13.2321 9.22647C12.2978 8.9929 11.3402 8.03526 11.1066 7.10097L10.5928 5.03387C10.3592 4.09959 9.97382 4.09959 9.74025 5.03387L9.2264 7.10097C8.99283 8.03526 8.03521 8.9929 7.10094 9.22647L5.03387 9.74032C4.09961 9.9739 4.09961 10.3593 5.03387 10.5929L7.10094 11.1067C8.03521 11.3403 8.99283 12.2979 9.2264 13.2322L9.74025 15.2993C9.97382 16.2336 10.3592 16.2336 10.5928 15.2993L11.1066 13.2322C11.3402 12.2979 12.2978 11.3403 13.2321 11.1067L15.2991 10.5929Z"})})},509768:(e,t,o)=>{o.d(t,{l:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("twitter",{viewBox:"0 0 2400 2452",svg:(0,n.jsx)("path",{d:"M5.3 7.7c4.6 6.6 920.6 1339.9 928.8 1351.9l2.9 4.2-463.2 538.3C219.1 2198.2 8.2 2443.3 5.2 2446.7l-5.4 6.3h211.8l409.5-476c225.2-261.8 409.6-476 409.9-476 .3 0 147.7 214.2 327.5 476l327 476h714.6l-2.9-4.3c-1.6-2.3-220-320.1-485.2-706.2-265.3-386.1-482.4-702.7-482.4-703.6-.1-.8 200.4-234.6 445.4-519.4C2120 234.7 2320.7 1.3 2320.8.8c.2-.4-47.1-.8-105.1-.8h-105.5l-387.4 450.2c-213 247.6-387.7 450.3-388.3 450.4-.5.2-140.2-202.4-310.4-450.1L714.7 0H-.1l5.4 7.7zm669 239c283.8 405.9 1434.5 2052.1 1435.1 2053 .6 1-32 1.3-161.7 1.3h-162.5l-341-487.7C1256.7 1545 920 1063.4 696.1 743.1 472.2 422.8 289 160.4 289 159.9s68.3-.9 162-.9h161.9l61.4 87.7z"})})},135596:(e,t,o)=>{o.d(t,{V3:()=>n,Wm:()=>i});const n={"1:1":{width:1,height:1},"5:4":{width:5,height:4},"4:3":{width:4,height:3},"7:5":{width:7,height:5},"3:2":{width:3,height:2},"5:3":{width:5,height:3},"16:9":{width:16,height:9}},i={crop:{unit:"%",x:0,y:0,width:100,height:100},mask:"None"}},930494:(e,t,o)=>{o.d(t,{M0:()=>c,iu:()=>m,gM:()=>d,SI:()=>u,RT:()=>p});o(821057);var n=()=>o(843957),i=()=>o(954949);const r=["Modal","SidebarFooter","Tooltip","None"],a={modal:"Modal",sidebar:"SidebarFooter",static:void 0,empty:"None"},s={modal:["desktop"],sidebar:["desktop"],static:[],empty:["desktop"]};function l(e){const t=(0,i().Si)(e);if(!t)throw new Error(`Invalid static message key: ${e}`);return t}function c(e){if(!e)return;const t=e;return r.includes(t)?t:void 0}function d(e){if(e.isDesktop)return"desktop";if(e.isMobileBrowser)return"mobile-web";if(e.isMobileNative){if(e.isApple)return"mobile-ios";if(e.isAndroid)return"mobile-android"}throw new Error(`Unsupported device: ${e}`)}function u(e){if("static"===e.type){const t=l(e.key);return(0,i().pU)(t)}const t=a[e.type];if(!t)throw new Error(`No placement for type: ${e.type}`);return t}function p(e){if("static"===e.type){const t=l(e.key);return n().xm[t].platforms}return s[e.type]}function m(e){if("static"===e.type){const t=l(e.key);return n().xm[t].dismissal_type}return"once_per_user"}},843957:(e,t,o)=>{o.d(t,{XP:()=>i,xm:()=>r});function n(e,t,n){return o(730120).ou.utc(e,t,n).toMillis()}const i=n(1970,1,1),r=(n(2038,1,17),{...{omnimodal:{placement:"Modal",platforms:["desktop"],dismissal_type:"custom"},mwn_feature_modal:{placement:"Modal",platforms:["desktop"],start:n(2024,10,14),end:n(2024,12,9),show_on_startup:!0,dismissal_type:"custom"},ai_google_drive_universal_qna_announcement:{placement:"Modal",platforms:["desktop"],start:n(2024,8,14),end:n(2024,11,14),dismissal_type:"once_per_space",show_on_startup:!0},ai_github_ai_connector_announcement:{placement:"Modal",platforms:["desktop"],start:n(2024,11,11),end:n(2025,2,11),show_on_startup:!0,dismissal_type:"once_per_space"},ai_jira_universal_qna_announcement:{placement:"Modal",platforms:["desktop"],start:n(2025,1,28),end:n(2025,5,28),show_on_startup:!0,dismissal_type:"once_per_space"},ai_assistant_announcement:{placement:"Modal",platforms:["desktop"],start:n(2024,9,5),end:n(2025,11,5),show_on_startup:!0,dismissal_type:"once_per_user"},dummy_modal:{placement:"Modal",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},dummy_modal_2:{placement:"Modal",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},notion_calendar_launch_promo:{placement:"Modal",platforms:["desktop"],start:n(2024,2,1),end:n(2025,6,15),show_on_startup:!0,dismissal_type:"once_per_user"}},...{desktop_download_sidebar:{placement:"SidebarFooter",platforms:["desktop"],end:n(2024,10,23),show_on_startup:!0,dismissal_type:"once_per_user"},configure_retention_sidebar:{placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},student_org_prompt:{placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},onboarding_reverse_trial_sidebar:{placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},block_limit_nudge:{placement:"SidebarFooter",platforms:["desktop"],dismissal_type:"custom",show_on_startup:!0},post_reverse_trial_sidebar:{placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},lic_offer_sidebar:{placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},new_year_2025_offer_sidebar:{placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},resurrection_offer_sidebar:{placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},ai_limit_nudge:{placement:"SidebarFooter",platforms:["desktop"],dismissal_type:"custom",show_on_startup:!0},sidebar_upgrade_nudge:{placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},startup_sidebar_footer:{placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},calendar_launch_prompt:{placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},contact_sales_promo_sidebar_v2:{placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},faces_xsell_sidebar:{placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},student_offer_jan_2025_sidebar:{placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"}},share_button_tooltip:{placement:"Tooltip",platforms:["desktop"],dismissal_type:"once_per_user"},open_in_calendar_tooltip:{placement:"Tooltip",platforms:["desktop"],dismissal_type:"once_per_user"},ai_google_drive_qna_notification_tooltip:{placement:"Tooltip",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},ai_slack_qna_notification_tooltip:{placement:"Tooltip",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},ai_sales_assisted_notification_tooltip:{placement:"Tooltip",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},ai_assistant_origin_element_tooltip:{placement:"Tooltip",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},ai_assistant_reminder_tooltip:{placement:"Tooltip",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},ai_slack_qna_embed_tooltip:{placement:"Tooltip",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},layout_customize_layout_button_tooltip:{placement:"Tooltip",platforms:["desktop"],dismissal_type:"once_per_user"},language_switch_prompt:{placement:"Tooltip",platforms:["desktop"],dismissal_type:"custom",show_on_startup:!0},asana_post_import_tour:{placement:"Tooltip",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},forms_share_form_tooltip:{placement:"Tooltip",platforms:["desktop"],dismissal_type:"once_per_user"},customize_slug_tooltip:{placement:"Tooltip",platforms:["desktop"],dismissal_type:"once_per_user"},collection_add_item_button_tooltip:{placement:"Tooltip",platforms:["desktop"],dismissal_type:"once_per_user"},workflow_template_installation:{placement:"Tooltip",platforms:["desktop"],dismissal_type:"custom"}})},954949:(e,t,o)=>{o.d(t,{DE:()=>a,Si:()=>s,fS:()=>l,p:()=>i,pU:()=>r});var n=()=>o(843957);const i=(0,o(696459).Yd)(n().xm);function r(e){return n().xm[e].placement}function a(e){const t=i.indexOf(e);return-1===t?Number.POSITIVE_INFINITY:t}function s(e){if(!e)return;const t=e;return i.includes(t)?t:void 0}function l(e){return n().xm[e].start??n().XP}},526839:(e,t,o)=>{o.d(t,{A5:()=>d,m3:()=>m,nR:()=>c});o(670560),o(267602),o(653476),o(241792);var n=()=>o(513670),i=()=>o(506347),r=()=>o(135857),a=()=>o(572680),s=()=>o(396136),l=()=>o(955620);function c(e){const{pageId:t,scrollToBlockId:o,peekViewBlockId:n,peekMode:a,collectionViewId:s,discussionId:l}=e;return(0,r().Z)({pageId:t,scrollToBlockId:o,peekViewBlockId:n,peekMode:a,collectionViewId:s,discussionId:l,pageVisitSource:i().tY.LinkInPage})}function d(e){const{url:t,baseUrl:o,publicDomainName:n}=e;let i;try{i=(0,a().parseRoute)({url:t,isMobile:!1,baseUrl:o,publicDomainName:n,protocol:void 0,currentUrl:void 0})}catch(r){return}if("page"===i.name)return i.peekViewBlockId||i.blockId}function u(e){return(t,o,n)=>{const i=e({table:s().iU,id:t});return!!i&&(i.parent_table===o&&i.parent_id===n)}}function p(e,t){if(!e)return[];const o=l().jDe(e),n=l().rxn(e);for(const i of n){const e=d({...t,url:i.url});e&&o.push(e)}return o}function m(e){const{parentBlock:t,oldTextValue:o,newTextValue:i,getRecordValue:r,baseUrl:a,publicDomainName:l}=e,c=p(o,{baseUrl:a,publicDomainName:l}),d=p(i,{baseUrl:a,publicDomainName:l});return function(e){const{parentBlock:t,mentionedPageIds:o,blockHasParent:i}=e,r=t.content||[];return n().zu(o,...r).filter((e=>i(e,s().iU,t.id)))}({parentBlock:t,mentionedPageIds:n().zu(c,...d),blockHasParent:u(r)})}},683938:(e,t,o)=>{function n(){return!0===window.__mobileAppBackgroundLaunch}o.d(t,{Z:()=>n})},326177:(e,t,o)=>{o.d(t,{Z:()=>n});const n=function(e){return e&&o(225771).B(e,"url")}},434255:(e,t,o)=>{o.d(t,{D1:()=>r,Dw:()=>a});var n=()=>o(916673),i=()=>o(926724);function r(e){return(0,n().ge)(e)}const a=[i().Es.Status,i().Es.Priority,i().Es.Assign]},725466:(e,t,o)=>{o.d(t,{z:()=>C});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(749411),o(30005),o(241792),o(731107);var n=()=>o(513670),i=()=>o(839002),r=()=>o(696459),a=()=>o(156642),s=()=>o(216939),l=()=>o(526839),c=()=>o(530980),d=()=>o(994883),u=()=>o(251887),p=()=>o(217465),m=()=>o(827370),f=()=>o(494616),g=()=>o(922713),v=()=>o(396136),h=()=>o(752778),_=()=>o(139978),b=()=>o(602299),y=()=>o(542973),S=()=>o(26645),w=()=>o(483791),k=()=>o(989478),I=()=>o(955620);async function C(e,t,o){var C;const{isServerMultiCellRequest:P,shouldTraverseToggleBlocks:A,loadButtonBlockChildren:R,omitAncestorDependencies:B}=e;let E;const D={};E=e.cursor?n().Xh(e.cursor.stack):[];const U=e.page.id,F=e.limit,N=e.batchLoadChildren??!1,V=e.contentBatchSize??25,L=p().RecordMap.create();0===E.length&&E.push([{table:v().iU,id:U,index:0,spaceId:e.page.spaceId}]);let O=0,Z=0;const j=d().s.throughRecordMap(L,t),K=async(e,t)=>{if(!e.length)return p().RecordMap.create();const{sameCellPointers:o,crossCellPointers:i}=await H(e);for(const[n,r]of Object.entries(i))D[n]??=new Map,r.forEach((e=>{D[n].set(e.id,e)}));Z+=o.length;const a=await j(o),l=n().mN([...a].map((e=>{let{model:t}=e;return t})).filter(r().$K).flatMap((e=>G(e))),s().dn);if(t){const e=n().mN([...a].map((e=>{let{model:t}=e;return t})).filter(r().$K).flatMap((e=>$(e))),s().dn);B?await Promise.all([K(l,!1),K(e,!0)]):await K(e.concat(l),!0)}else await K(l,!1);return a},z=d().s.fromLoadRecords((e=>K(e,!0))),H=async e=>{if(P&&!P.isMainCell){const{spaceCellObjects:t,mainDbObjects:o}=await P.groupValueContainingRecordPointerByCell(e,(e=>e),((e,t)=>{t.spaceId=e})),n=t[P.currentCellId]??[];return delete t[P.currentCellId],n.push(...o),{sameCellPointers:n,crossCellPointers:t}}return{sameCellPointers:e,crossCellPointers:{}}},q=new Set,W=(e,t)=>t.filter((e=>{let[t,o]=e;const n=(0,s().dn)(t);return!q.has(n)&&(q.add(n),!0)})).map((t=>{let[n,i,r]=t;return o&&o({table:e.table,id:e.id},n,i,r),n})),G=function(e){const t=[];if((0,u().tz)(e)){const o=e.getParentPointer();t.push([o,"Block parent_id"])}return W(e,t)},$=function(t){const o=[];if(t.table===v().iU){const i=t.getCollectionViewPointers();for(const e of i)o.push([e,"CollectionViewBlock view_id"]);if(t.type===a().Ti.form){const e=t.getLayoutPointer();e&&o.push([e,"Form layout"])}const r=t.getCollectionPointer();r&&o.push([r,"CollectionViewBlock collection_id"]);const s=t.getDiscussionPointers();for(const e of s)o.push([e,"Discussion"]);const c=t.getProperties().title;if((0,a().XD)(t.getType(),t.getFormat())&&c){const i=I().lzi(c),r=n().G0(...i.map(I().hDy));for(const n of r){if(I().STW(n)&&o.push([{table:v().iU,id:I().TOT(n)},"page annotation",{suppressErrorOnClient:!0}]),I().IWo(n)&&o.push([{table:k().KJ,id:I().zEN(n)},"user annotation",{suppressErrorOnClient:!0}]),I().j0F(n)){const t=I().zW$(n),i=(0,l().A5)({url:t,baseUrl:e.baseUrl,publicDomainName:e.publicDomainName});i&&o.push([{table:v().iU,id:i},"link annotation",{suppressErrorOnClient:!0}])}if(I().nSN(n)){const e=I().frW(n);e&&o.push([{table:v().iU,id:e,spaceId:t.space_id},"eoi annotation"])}}}if(t.getType()===a().Ti.alias){const e=t.getAliasTargetPointer();e&&o.push([e,"alias"])}else if(t.isExternalObjectInstanceType()){const e=t.getExternalObjectSubInstancePointers();for(const t of e)o.push([t,"eoi"])}else if(t.getType()===a().Ti.button){const e=t.getAutomationPointer();e&&o.push([e,"button_automation"])}}else if(t.table===y().qF){for(const e of t.getCommentPointers())o.push([e,"discussion table comment"]);for(const e of t.getReactionPointers())o.push([e,"discussion table reaction"])}else if(t.table===b().x_){for(const e of t.getContentPointers())o.push([e,"comment table attachment"]);for(const e of t.getReactionPointers())o.push([e,"comment table reaction"])}else if(t.table===_().np){const e=t.getFormatStore().getKeyStore("collection_pointer").getValue();e&&o.push([e,"CollectionView collection_id"])}else if(t.table===w().Bh){if("form"===t.getLayoutType()){const e=t.getRawModules().form_layout_schema||[];for(const n of e)"formQuestion"===n.type&&o.push([{table:S().L_,id:n.formQuestionId,spaceId:t.spaceId},"Form question"])}}else if(t.table===f().cv){const e=t.getActionPointers();for(const t of e)o.push([t,"Automation action_ids"])}else if(t.table===g().Xj)for(const e of t.getBlocks())o.push([{table:v().iU,id:e},"Automation action blocks"]);else if(t.table===h().vF){for(const i of t.getAutomationPointers())o.push([i,"Collection automation_ids"]);const e=t.getLayoutPointer();e&&o.push([e,"Collection layout"]);const n=t.getSharingEnabledRelationTargetPointer();n&&o.push([n,"Sharing-enabled relation target collection"])}return W(t,o)},Q=new Map,Y=[],J=async function(){const t=[],n=E[E.length-1];if(O>=F&&Z>10*F||Z>20*F||!n)return!1;const i=n.map((e=>{const{table:t,id:o,spaceId:n}=e;return m().dr.fromPointerLike({table:t,id:o,spaceId:n})})),r=await z(i),s=[];for(let o=0;o<n.length;o++){const i=n[o],u=r.getModel(m().dr.fromPointerLike(i));if(!u||u.table!==v().iU)continue;const p=u.isType(a().Ti.button)&&R?M(u,c().omK.fromRecordMap(L)):null==u?void 0:u.getContentIds(),f=null==u?void 0:u.getFormat();if(!e.verticalColumns&&u&&p&&"column_list"===u.type&&0===i.index){for(let e=0;e<p.length;e++){const o=p[e],n=u.spaceId;s.push([{table:v().iU,id:o,spaceId:n},i,"column"]),t.push({table:v().iU,id:o,index:0,spaceId:n})}i.index=p.length}else if(u&&"transclusion_reference"===u.type&&f&&f.transclusion_reference_pointer&&0===i.index)s.push([f.transclusion_reference_pointer,i,"transclusion reference"]),t.push({...f.transclusion_reference_pointer,index:0}),i.index=1;else if(p&&((0,a().Um)(u.type,f)||u.isType(a().Ti.button)&&R)&&(u.id===U&&1===E.length||!(0,a().Pm)(u.type)&&(!(0,a().BX)(u.type,f)||A))&&p[i.index]){if(N){var l;const e=x(V,i.index);if(null===(l=Q.get(u.id))||void 0===l||!l.has(e)){var d;for(const t of T(p.map((e=>({table:v().iU,id:e}))),V,e))s.push([t,i,"block content child"]);Q.has(u.id)||Q.set(u.id,new Set),null===(d=Q.get(u.id))||void 0===d||d.add(e)}}else{const e=p[i.index];s.push([{table:v().iU,id:e,spaceId:u.spaceId},i,"block content child"])}t.push({table:v().iU,id:p[i.index],index:0,spaceId:u.space_id}),i.index++}}const u=s.map((e=>{let[t,n,i]=e;return o&&o(n,t,i),t}));await z(u),s.forEach((e=>{if("block content child"===e[2]){const t=e[0],o=L.getModel(t);if(o&&o instanceof c().yJh&&!o.alive){const e=L.getModel({id:o.parent_id,table:o.parent_table,spaceId:o.spaceId});e&&e instanceof c().yJh&&e.alive&&e.getContentIds().includes(o.id)&&Y.push(o.pointer)}}}));const p=t.filter((e=>{for(let t=0;t<E.length;t++){const o=E[t];for(let t=0;t<o.length;t++){const n=o[t];if(n.table===e.table&&n.id===e.id)return!1}}return!0}));return p.length>0?(E.push(p),O++):E.pop(),!0};for(;await J(););if(null===(C=e.performFixForQuasiAliveBlock)||void 0===C||C.call(e,Y),P){const t={},o=await i().qd(E,20,(async e=>await P.groupValueContainingRecordPointerByCell(e,(e=>m().dr.fromPointerLike({id:e.id,table:e.table,spaceId:e.spaceId})),((e,t)=>{t.spaceId=e}))));for(const{spaceCellObjects:e,mainDbObjects:i}of o){if(i.length>0){const e=P.currentCellId;t[e]??={stack:[]},t[e].stack.push(i)}for(const[o,n]of Object.entries(e))t[o]??={stack:[]},t[o].stack.push(n)}const n=e.cursor.stack.reduce(((e,t)=>(t.forEach((t=>{e[t.id]=t})),e)),{});for(const[e,i]of Object.entries(D)){t[e]??={stack:[]};Array.from(i.values()).map((e=>{const t=n[e.id];return{...e,index:t?t.index:0}})).forEach((o=>{t[e].stack.push([o])}))}const r=Object.keys(t).map((e=>({...t[e],cellId:e})));return{recordMap:L,cursorValue:{stack:[]},cursorValueCellularized:r}}return{recordMap:L,cursorValue:{stack:E},cursorValueCellularized:[]}}function x(e,t){return Math.trunc(t/e)}function*T(e,t,o){const n=Math.min(o*t,e.length-1),i=Math.min((o+1)*t,e.length);for(let r=n;r<i;r++)yield e[r]}function M(e,t){const o=e.getAutomationPointer();if(!o)return[];const n=t(o);if(!n)return[];return n.getActionPointers().map((e=>t(e))).filter(r().$K).flatMap((e=>e.getBlocks()))}},347960:(e,t,o)=>{o.d(t,{ZP:()=>a,_g:()=>i,td:()=>r});const n={};let i=function(e){return e[e.Javascript=0]="Javascript",e[e.Stylesheet=1]="Stylesheet",e}({});function r(e){const t=n[e];void 0!==t&&(t.element.remove(),delete n[e])}const a=function(e){let{resourceType:t=i.Javascript,id:o,attributes:r={},async:a=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=n[e];if(s)return s.loaded;let l;switch(t){case i.Javascript:if(l=document.createElement("script"),l.async=a,l.src=e,void 0!==o&&(l.id=o),void 0!==r)for(const e in r)l.setAttribute(e,r[e]);break;case i.Stylesheet:l=document.createElement("link"),l.href=e,l.type="text/css",l.rel="stylesheet"}const c=new Promise(((e,t)=>{l.addEventListener("load",(()=>{e()})),l.addEventListener("error",(()=>{t()}));document.getElementsByTagName("head")[0].appendChild(l)}));return n[e]={loaded:c,element:l},c}},362154:(e,t,o)=>{o.d(t,{F:()=>n});let n=function(e){return e.NotSpecified="NotSpecified",e.CreatorProfile="CreatorProfile",e.SpaceSwitcher="SpaceSwitcher",e.DeleteAccount="DeleteAccount",e.NoAvailableSpaces="NoAvailableSpaces",e.MobileNativeListener="MobileNativeListener",e.LogoutRouteVisited="LogoutRouteVisisted",e.AdminActionSelfLogout="AdminActionSelfLogout",e.AdminLogoutFallThrough="AdminActionFallThrough",e.PublicPageAccessDenied="PublicPageAccessDenied",e.PageAccessDenied="PageAccessDenied",e.OnboardingError="OnboardingError",e.OnboardingExit="OnboardingExit",e.ContextualizedOnboardingExit="ContextualizedOnboardingExit",e}({})},665553:(e,t,o)=>{o.d(t,{cG:()=>R,AS:()=>A,Lk:()=>M,wB:()=>S,dx:()=>y,c8:()=>W,lM:()=>G,on:()=>$,CK:()=>z,WB:()=>T});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(470928),o(749411),o(241792);var n=o.n(o(467266)),i=()=>o(513670),r=()=>o(696459),a=()=>o(731415),s=()=>o(156642),l=()=>o(532850),c=()=>o(646574),d=()=>o(950724),u=()=>o(374847),p=()=>o(526839),m=()=>o(530980),f=()=>o(396136);var g=()=>o(748456),v=()=>o(602299),h=()=>o(989478),_=()=>o(955620),b=()=>o(499110);function y(e){const t=_().J7s(e);return"a"===t?"[":"b"===t?"**":"i"===t?"*":"c"===t?"`":"s"===t?"~~":"e"===t?"$":""}function S(e,t,o){const n=_().J7s(e);if(_().j0F(e)){const n=_().zW$(e),i=(0,p().A5)({...o,url:n});return`](${(i?t({toPageId:i}):n)||""})`}return"b"===n?"**":"i"===n?"*":"c"===n?"`":"s"===n?"~~":"e"===n?"$":""}function w(e){const{annotation:t,exportArgs:o}=e,{getRecordValue:n,userTimeZone:i,getExportedPathToPage:a,intl:s,transformAnnotation:l}=o,d=m().omK.fromGetRecordValueFn(n);if(l){const e=l(t,o);if("string"==typeof e)return e}if(_().IWo(t)){const e=_().zEN(t),o=n({table:h().KJ,id:e});return`@${(0,b().Nz)(s,o)}`}if(_().STW(t)){const e=_().TOT(t),i=n({table:f().iU,id:e});if(i){return`[${T({block:i,exportArgs:o})}](${a({toPageId:e})})`}}else if(_().VOE(t)){const e=_().PtE(t);var p;if(e)return null===(p=d(e))||void 0===p?void 0:p.getRenderTitle()}else{if(_().K$_(t)){var g;const e=_().r3j(t),i=n({table:v().x_,id:e,spaceId:o.root.spaceId});return null==i||null===(g=i.text)||void 0===g?void 0:g.toString()}if(_().fpG(t)){const{date_format:e,time_format:n,...r}=_().zyO(t);return(0,c().ZV)({value:r,date_format:e,time_format:n,userTimeZone:i,allowRelativeDates:!1,intl:o.intl})}if(_().kuv(t))return _().xey(t);if(_()._bk(t)){const e=(0,u().kF)({annotation:t,exportArgs:o});if(e)return e}else if(_().vaX(t)){var y;if("everyone"===(null===(y=_().DF7(t))||void 0===y?void 0:y.mentionType))return"everyone";const e=(0,u().cg)({annotation:t,exportArgs:o});if(e)return e}else{if(_().nSN(t)){var S;const e=_().frW(t);return null===(S=n({table:f().iU,id:e,spaceId:o.root.spaceId}))||void 0===S||null===(S=S.format)||void 0===S?void 0:S.original_url}if(_().OU5(t))return"";if(_().vuC(t)){const{href:e}=_().r0m(t);return e}if(_().inx(t)||_().j0F(t)||_().aC4(t)||_().xw5(t)||_().BIG(t)||_().pV3(t)||_().STW(t)||_().rIb(t)||_().LAI(t)||_().fTS(t)||_().aq(t)||_().QVC(t)||_().uge(t)||_().Lyt(t)||_().wjk(t)||_().Ojp(t)||_().otC(t)||_().wWS(t)||_()._q_(t))return;(0,r().t1)(t)}}}function k(e){const t=/^\s+/.exec(e);return t?t[0]:""}function I(e){const t=/\s+$/.exec(e);return t?t[0]:""}function C(e){const t=I(e);return t.length>0?e.slice(0,-1*t.length):e}function x(e){const t=k(e);return e.slice(t.length)}function T(e){const{block:t,exportArgs:o}=e;return z({textValue:_().lzi(m().kk5.fromBlock(t).getProperties().title),exportArgs:o})}function M(e){const{block:t,exportArgs:o}=e,{getRecordValue:n}=o,r=t&&t.content?t.content:[];return i().oA(r.map((t=>O({block:n({table:f().iU,id:t}),exportArgs:{...o,blockId:t},visitedBlock:e.visitedBlock}))))}function P(e){return e.split("\n")}function A(e){const{block:t,exportArgs:o}=e,n=_().lzi(m().kk5.fromBlock(t).getProperties().caption);return n.length>0?[{text:z({textValue:n,exportArgs:o}),breakLines:!0,children:[]}]:[]}function R(e){const{block:t,exportArgs:o}=e;return z({textValue:_().lzi(m().kk5.fromBlock(t).getProperties().caption),exportArgs:o})}function B(e){var t;const{block:o,exportArgs:n}=e;return{text:T({block:o,exportArgs:n}),prefix:null===(t=n.getPrefixForBlock)||void 0===t?void 0:t.call(n,o),breakLines:!0,children:M(e)}}function E(e){return{text:"",breakLines:!0,children:M(e)}}function D(){}function U(e){var t;const{block:o,exportArgs:n}=e;return{text:`# ${T({block:o,exportArgs:n}).trim()}`,prefix:null===(t=n.getPrefixForBlock)||void 0===t?void 0:t.call(n,o),breakLines:!0,children:M(e)}}function F(e){var t;const{block:o,exportArgs:n}=e;return{text:`- ${T({block:o,exportArgs:n}).trim()}`,prefix:null===(t=n.getPrefixForBlock)||void 0===t?void 0:t.call(n,o),breakLines:!1,childrenPrefix:Z,children:M(e)}}function N(e){const{block:t,exportArgs:o}=e,{getExportedRenderAsset:n}=o,{source:i}=m().kk5.fromBlock(t).getProperties(),r=_().QaF(i),a=n({fromBlockId:o.blockId,toFileURI:r});return{text:`[${R(e)||T({block:t,exportArgs:o})||a}](${a})`,breakLines:!0,children:A(e)}}function V(e){const{block:t,exportArgs:o}=e,{getRecordValue:n,getExportedPathToPage:i,userTimeZone:r,intl:a}=o;if("collection_view"===t.type||"collection_view_page"===t.type){return{text:`[${(0,u().Ho)({blockId:t.id,getRecordValue:n,userTimeZone:r,intl:a})}](${i({toPageId:t.id,exportFileExt:".csv"})})`,breakLines:!0,children:[]}}}const L={text:B,encrypted_text:B,header:U,sub_header:function(e){var t;const{block:o,exportArgs:n}=e;return{text:`## ${T({block:o,exportArgs:n}).trim()}`,prefix:null===(t=n.getPrefixForBlock)||void 0===t?void 0:t.call(n,o),breakLines:!0,children:M(e)}},sub_sub_header:function(e){var t;const{block:o,exportArgs:n}=e;return{text:`### ${T({block:o,exportArgs:n}).trim()}`,prefix:null===(t=n.getPrefixForBlock)||void 0===t?void 0:t.call(n,o),breakLines:!0,children:M(e)}},quote:function(e){var t;const{block:o,exportArgs:n}=e;return{text:`> ${T({block:o,exportArgs:n}).trim()}`,prefix:null===(t=n.getPrefixForBlock)||void 0===t?void 0:t.call(n,o),breakLines:!0,childrenPrefix:"> ",children:M(e)}},bulleted_list:F,toggle:F,to_do:function(e){var t;const{block:o,exportArgs:n}=e;let i;return i=l().Ml(m().kk5.fromBlock(o).getProperties().checked)?"- [x] ":"- [ ] ",{text:`${i} ${T({block:o,exportArgs:n}).trim()}`,prefix:null===(t=n.getPrefixForBlock)||void 0===t?void 0:t.call(n,o),breakLines:!1,childrenPrefix:Z,children:M(e)}},numbered_list:function(e){var t;const{block:o,exportArgs:n}=e,{getRecordValue:r}=n;return{text:`${function(e){const{block:t,getRecordValue:o}=e,n=t.parent_id,r=n?o({table:f().iU,id:n}):void 0;let a;var l;a=r?i().oA(null===(l=r.content)||void 0===l?void 0:l.map((e=>o({table:f().iU,id:e})))):[];const c=i().cx(a,(e=>e.id===t.id)),d=i().tP(a,0,c),u=i().qr(d,(e=>e.type!==s().Ti.numberedList));return d.length-(u+1)}({block:o,getRecordValue:r})+1}. ${T({block:o,exportArgs:n})}`,prefix:null===(t=n.getPrefixForBlock)||void 0===t?void 0:t.call(n,o),breakLines:!1,childrenPrefix:Z,children:M(e)}},code:function(e){var t;const{block:o,exportArgs:n}=e,i=T({block:o,exportArgs:n});return{text:`${`\`\`\`${o.properties&&o.properties.language?function(e){const t=_().QaF(e);if(!t)return"";const o=g().W[t];return void 0===o||o===g().W["Plain Text"]?"":o}(o.properties.language):""}\n${P(i).join("\n")}\n\`\`\``}`,prefix:null===(t=n.getPrefixForBlock)||void 0===t?void 0:t.call(n,o),breakLines:!0,children:[]}},page:function(e){const{block:t,exportArgs:o}=e;if(t.id===o.navigableBlockId&&!o.renderParentBlockId)return U(e);const{getExportedPathToPage:n}=o;return{text:`[${T({block:t,exportArgs:o})}](${n({toPageId:t.id})})`,breakLines:!0,children:[]}},image:function(e){const{block:t,exportArgs:n}=e,{getExportedRenderAsset:i}=n,{source:r}=m().kk5.fromBlock(t).getProperties(),a=_().QaF(r),s=i({fromBlockId:n.blockId,toFileURI:a}),l=R(e)||T({block:t,exportArgs:n})||s;return{text:(0,o(455530).SR)({url:a})?`![${l}](${s})`:`[${l}](${s})`,breakLines:!0,children:A(e)}},video:N,embed:N,bookmark:function(e){const{block:t,exportArgs:o}=e,{link:n}=m().kk5.fromBlock(t).getProperties(),i=l().zB(n);return{text:`[${T({block:t,exportArgs:o})}](${i})`,breakLines:!0,children:A(e)}},file:N,external_object_instance:function(e){var t;const{block:o}=e,n=null===(t=o.format)||void 0===t?void 0:t.original_url;if(n)return{text:`[${n}](${n})`,breakLines:!0,children:[]}},tweet:N,maps:N,gist:N,framer:N,invision:N,mixpanel:N,drive:function(e){const{block:t}=e;if(t.format&&t.format.drive_properties){const{url:e,title:o}=t.format.drive_properties;return{text:`[${o}](${e})`,breakLines:!0,children:[]}}return N(e)},figma:N,loom:N,pdf:N,typeform:N,codepen:N,audio:N,divider:function(){return{text:"---",breakLines:!0,children:[]}},equation:function(e){var t;const{block:o,exportArgs:n}=e;let i="";return o&&o.properties&&o.properties.title&&(i=_().QaF(o.properties.title)),{text:`$$\n${i}\n$$`,prefix:null===(t=n.getPrefixForBlock)||void 0===t?void 0:t.call(n,o),breakLines:!0,children:[]}},collection_view:V,collection_view_page:V,column_list:E,column:E,factory:D,personal_home_page:D,form:D,post:D,copy_indicator:D,breadcrumb:D,link_to_collection:D,link_to_page:D,callout:function(e){var t,n;const{block:i,exportArgs:r}=e,a=T({block:i,exportArgs:r}),s=null===(t=i.format)||void 0===t?void 0:t.page_icon;return{text:`${(0,o(321160).Z)(s)?s:"string"==typeof s?function(e){let{source:t,width:o=40,exportArgs:n}=e;const{getExportedRenderAsset:i}=n,r=i({fromBlockId:n.blockId,toFileURI:t});return`<img src="${r}" alt="${r}" width="${o}px" />`}({source:s,exportArgs:r}):""} ${a}`.trim(),prefix:null===(n=r.getPrefixForBlock)||void 0===n?void 0:n.call(r,i),breakLines:!0,children:M(e),htmlTag:"aside"}},table_of_contents:D,whimsical:N,miro:N,abstract:N,sketch:N,excalidraw:N,replit:N,hex:N,deepnote:N,alias:function(e){const{block:t,exportArgs:n}=e,{getRecordValue:i}=n;if(t.format&&t.format.alias_pointer&&(0,o(827370).$O)(t.format.alias_pointer,f().iU)){const o=i(t.format.alias_pointer);if(o)return O({block:o,exportArgs:{...n,renderParentBlockId:t.id,blockId:t.format.alias_pointer.id},visitedBlock:e.visitedBlock})}},slide:E,transclusion_container:E,transclusion_reference:function(e){const{block:t,exportArgs:o}=e,{getRecordValue:n}=o;if(t.format&&t.format.transclusion_reference_pointer){const i=n(t.format.transclusion_reference_pointer);if(i)return O({block:i,exportArgs:{...o,renderParentBlockId:t.id,blockId:t.format.transclusion_reference_pointer.id},visitedBlock:e.visitedBlock})}},table:function(e){var t,o;const{block:n,exportArgs:i}=e,{getRecordValue:r}=i,a=(null===(t=n.format)||void 0===t||null===(t=t.table_block_column_order)||void 0===t?void 0:t.length)||0,s=n.content,l={text:"",breakLines:!0,children:[]};if(0===a||!s)return l;const c=s.map((t=>{const o=r({table:f().iU,id:t});return o&&O({block:o,exportArgs:{...i,blockId:t,renderParentBlockId:n.id},visitedBlock:e.visitedBlock})||l})),d={text:`| ${[...Array(a).keys()].map((()=>"---")).join(" | ")} |`,breakLines:!1,children:[]};return{text:"",prefix:null===(o=i.getPrefixForBlock)||void 0===o?void 0:o.call(i,n),breakLines:!0,children:[c[0],d,...c.slice(1)]}},table_row:function(e){var t,o;const{block:n,exportArgs:i}=e,{getRecordValue:r,renderParentBlockId:a}=i;if(!a)return;const s=r({table:f().iU,id:a}),c=null==s||null===(t=s.format)||void 0===t?void 0:t.table_block_column_order;if(!c)return;return{text:`| ${c.map((t=>{const o=l().wS(n,t);return o?z({textValue:o,exportArgs:e.exportArgs}):void 0})).join(" | ")} |`,prefix:null===(o=i.getPrefixForBlock)||void 0===o?void 0:o.call(i,n),breakLines:!1,children:[]}},tab:function(e){var t;const{block:o,exportArgs:n}=e,{getRecordValue:r}=n;return{text:`${i().oA(null===(t=o.content)||void 0===t?void 0:t.flatMap((e=>{const t=r({table:f().iU,id:e});if(t)return[T({block:t,exportArgs:n}),K(M({block:t,exportArgs:n})).trim()]}))).join("\n\n")}\n\t\t`,breakLines:!0,children:[]}},external_object_instance_page:D,button:D,ai_block:E,drawing:D,workflow:D,transcription:D};function O(e){const{block:t,forceRenderAsText:o,exportArgs:{transformBlockMapping:n}}=e;if(t&&t.type){if(e.visitedBlock){if(e.visitedBlock.has(t.id))return;e.visitedBlock.add(t.id)}const i=o&&(0,s().XD)(t.type,t.format)?(null==n?void 0:n.text)??L.text:(null==n?void 0:n[t.type])??L[t.type];if(i)return i(e)}}const Z="    ";function j(e){const t=e.indexOf(" ");return-1===t?[e,""]:[e.slice(0,t),e.slice(t+1)]}function K(e){let t="";for(const o of e){o.breakLines&&(t+="\n"),o.prefix&&(t+=`${o.prefix}`),o.htmlTag&&(t+=`<${o.htmlTag}>\n`),o.text&&(t+=`${o.text}\n`),o.breakLines&&(t+=o.childrenPrefix?`${o.childrenPrefix}\n`:"\n");let e=K(o.children);const n=o.childrenPrefix;if(e&&n){const t=P(e);e=[...t.slice(0,-1).map((e=>{if(o.prefix){const[t,o]=j(e);return t+n+o}return n+e})),...t.slice(-1)].join("\n")}t+=`${e}`,o.htmlTag&&(t+=`</${o.htmlTag}>\n\n`),o.suffix&&(t+=`${o.suffix}\n\n`)}return t=t.replace(/[\n]{3,}/g,"\n\n"),t}function z(e){const{textValue:t,exportArgs:o}=e;let s="";const l=_().lzi(t);let c=[];for(const p of l){const e=a().u.normalize(_().hDy(p)),t=(0,d().N)(c,e,(e=>n()(e))),l=_().WiV(p),u=e.map((e=>w({annotation:e,exportArgs:o}))).find((e=>(0,r().$K)(e))),m=u??l,f=I(s);s=C(s),t.deleted.reverse();for(const n of t.deleted)s+=S(n,o.getExportedPathToPage,o);s+=f,s+=k(m);for(const o of t.created)s+=y(o);s+=x(m);c=[...i().DY(c,e,((e,t)=>i().Xy(e,t))),...t.created]}const u=I(s);s=C(s),c.reverse();for(const n of c)s+=S(n,o.getExportedPathToPage,o);return s+=u,s}function H(e,t){const o=(new e).match(t)||[];if(0===o.length)return t;let n="",i=0;for(const r of o){const e=0===r.index||"<"!==t[r.index-1],o=r.lastIndex===t.length||">"!==t[r.lastIndex],a=Boolean(t.slice(r.index).match(/^[a-z][a-z]+:/i)),s=e&&o&&a;n+=t.slice(i,r.index),s&&(n+="<"),n+=r.raw,s&&(n+=">"),i=r.lastIndex}return n+=t.slice(i),n}function q(e){return e.replace(/\\/g,"\\\\")}function W(e){const{MarkdownIt:t,LinkifyIt:o,markdown:n,plugin:i,disable:r,options:a}=e,s=new t({linkify:!0,...a});return r&&s.disable(r,!1),i&&s.use(i),s.render(q(H(o,n)))}function G(e){const{MarkdownIt:t,LinkifyIt:o,markdown:n,plugin:i}=e,r=new t({linkify:!0});return i&&r.use(i),r.renderInline(q(H(o,n)))}function $(e,t){const o=new Set;return K(i().oA(e.map((e=>O({block:e,exportArgs:{...t,blockId:e.id},visitedBlock:o}))))).trim()}},183922:(e,t,o)=>{o.d(t,{Ap:()=>k,Cm:()=>B,Cy:()=>u,H7:()=>v,JK:()=>M,JY:()=>c,Lp:()=>p,Mv:()=>b,NP:()=>S,Ns:()=>f,PU:()=>F,T0:()=>C,TA:()=>w,VI:()=>U,ZS:()=>a,bS:()=>d,e7:()=>A,eJ:()=>E,h8:()=>R,iX:()=>_,jY:()=>l,je:()=>m,ji:()=>h,mC:()=>D,pD:()=>x,pb:()=>y,pz:()=>s,vb:()=>g});var n=()=>o(342792),i=()=>o(827370);const r={[o(255933).bx]:!0,[o(396136).iU]:!0,[o(139978).np]:!0,[o(752778).vF]:!0,[o(125571).zU]:!0,[o(306164).e0]:!0,[o(421476).yo]:!0};function a(e){return(0,i().UI)(e.table)&&!(e.table in r)?`versions/${e.id}:${e.table}:${e.spaceId}`:`versions/${e.id}:${e.table}`}function s(e){const t=e.indexOf("/");if(-1===t)return;const o=e.substring(t+1).split(":");return 2===o.length?i().dr.fromPointerLike({table:o[1],id:o[0]}):3===o.length?i().dr.fromPointerLike({table:o[1],id:o[0],spaceId:o[2]}):void 0}function l(e){return`collection/${e}`}function c(e){return`typedDatabasesListChanged/${e.spaceId}-${e.databaseType}`}function d(e){return`activity/${e}`}function u(e){return`activity/${e}`}function p(e){return`notification/${e}`}function m(e){return`teams_in_space/${e}`}function f(e){return`user_page_visit/${e}`}function g(e){let{botId:t,accountId:o,calendarId:i}=e;return`cron/events_updated/${t}/${o}/${(0,n().Ul)(i)}`}function v(e){let{botId:t}=e;return`cron/calendar_updated/${t}`}function h(e){let{botId:t,accountId:o,calendarId:i}=e;return`cron/calendar_selection_toggled/${t}/${o}/${(0,n().Ul)(i)}`}function _(e){let{notionUserId:t,spaceId:o}=e;return`connections/updated/${t}/${o}`}function b(e){return`backlinks/${e}`}function y(e){return`page_visit/${e}`}function S(e){return`user_shared_pages_in_space/${e.spaceId}-${e.userId}`}function w(e){return`subscription_banner/${e.spaceId}`}function k(e){return`billing_subscription_banner/${e.spaceId}`}const I="presence";function C(e){return`${I}/${e}`}function x(e){return`user_joined_teams_in_space/${e.userId}:${e.spaceId}`}const T="diagnosticPing";function M(e){return`${T}/${e}`}const P="presence/drawing";function A(e){return`${P}/${e}`}function R(e){return`custom_emoji/${e}`}function B(e){return`current_space_permission_groups/${e}`}function E(e){return`current_space_group_membership/${e.spaceId}-${e.userId}`}function D(e){return`posts_in_channel/${e.spaceId}/${e.channelId}`}function U(e){return`unread_posts_in_channel/${e.spaceId}/${e.channelId}/${e.userId}`}function F(e){return`trusted_domains/${e.spaceId}`}},234669:(e,t,o)=>{function n(e,t){return t&&e.redirect_uris.includes(t)?t:t||1!==e.redirect_uris.length?void 0:e.redirect_uris[0]}o.d(t,{_:()=>n})},4155:(e,t,o)=>{o.d(t,{_:()=>n});const n={invalid_request:"invalid_request",unauthorized_client:"unauthorized_client",access_denied:"access_denied",unsupported_response_type:"unsupported_response_type",invalid_scope:"invalid_scope",server_error:"server_error",temporarily_unavailable:"temporarily_unavailable"}},100135:(e,t,o)=>{o.d(t,{W:()=>n,i:()=>i});const n=670,i=["template_optout","workspace_setup"]},993407:(e,t,o)=>{o.d(t,{Ng:()=>l,PT:()=>a,Wy:()=>c,cz:()=>r,fY:()=>d,g$:()=>s,kg:()=>n,mu:()=>i});const n="teamSidebar",i="teamBrowserSearch",r="teamBrowserUnjoinedTeams",a="teamBrowserJoinedTeams",s="publicPageTemplateIncludes",l=-1,c=[5,10,15,20,l];function d(e){const{block:t,query:o,getRecordModel:n,userTimeZone:i,intl:r}=e;if(!o)return!0;const a=null==t?void 0:t.getRenderTitle({getRecordModel:n,userTimeZone:i,intl:r});return!!a&&a.toLowerCase().indexOf(o.trim().toLowerCase())>=0}},712185:(e,t,o)=>{o.d(t,{Dl:()=>g,L0:()=>b,bf:()=>v,cm:()=>h,kV:()=>f});o(241792);var n=()=>o(834458),i=()=>o(226413),r=()=>o(421551),a=()=>o(109477),s=()=>o(305580),l=()=>o(137785),c=()=>o(639708),d=()=>o(513197),u=()=>o(215134),p=()=>o(972054),m=()=>o(766537);function f(e){const{rawModulesByArea:t,collectionSchema:o,collectionFormat:n,includeDeletedPropertyModules:i}=e;let r={page_main:[],page_details:[],form_layout_schema:[]};if(!t||!o)return r;const a=(0,p().M)(t,(e=>function(e){const{module:t}=e;if((0,c().zP)(t))return;if("property"===t.type)return v({...e,module:t});if("titleWithIcon"===t.type)return(0,l().V)(t);return t}({module:e,collectionSchema:o}))),s={page_main:a.page_layout_schema||[],page_details:a.page_info_layout_schema||[],form_layout_schema:a.form_layout_schema||[],...a.form_conditional_modules?{form_conditional_modules:a.form_conditional_modules}:{},...a.views_main_tab_modules?{views_main_tab_modules:a.views_main_tab_modules}:{}};return r=(0,d().BW)(s),r=g({modulesByArea:r,collectionSchema:o,collectionFormat:n,includeDeletedPropertyModules:i}),r}function g(e){const{modulesByArea:t,collectionFormat:o,collectionSchema:n,includeDeletedPropertyModules:i}=e;let l=t;return l=(0,d().e)(t,(e=>"expandedBacklinks"!==e.type)),l=function(e){const{collectionFormat:t,collectionSchema:o,modulesByArea:n}=e;let i=(0,d().e)(n,(e=>!(0,c().Ps)(e)&&!(0,c().a3)(e)));return i=function(e){const{collectionFormat:t,collectionSchema:o,modulesByArea:n}=e,i=Boolean((0,u().B1)(n,c().Cj)),l=t&&o?(0,s().i)(t,o,void 0,a().j5.Collection):void 0,p=l&&o?(0,r().d)({schema:o,format:l,visibilityLevels:["inline","minimal"]}):void 0,f=Boolean(null==p?void 0:p.length);if(f&&i)return n;if(!f&&!i)return n;if(!f&&i)return(0,d().e)(n,(e=>!(0,c().Cj)(e)));const g=n.page_main,{nonMoveableHeaderModules:v,moveableModules:h,nonMoveableFooterModules:_}=(0,m().Lk)("page_main",g),b={id:"relations_group",type:"relationsGroup"};return{...n,page_main:[...v,...h,b,..._]}}({collectionFormat:t,collectionSchema:o,modulesByArea:i}),i}({collectionFormat:o,collectionSchema:n,modulesByArea:l}),i||(l=(0,d().e)(l,(e=>!(0,c().Yk)(e)))),l}function v(e){const{module:t}=e;let o;if(o=e.collectionSchema?e.collectionSchema[t.propertyId]:e.collectionModel.getNormalizedSchema()[t.propertyId],!o)return{type:"deleted_property",id:t.id,rawModule:t};if((0,i().U8)(o)){var r;const e=`property_${o.type}`;return{type:e,propertyId:t.propertyId,id:t.id,style:(null===(r=t.config)||void 0===r||null===(r=r[e])||void 0===r?void 0:r.style)??"compact"}}var a,s,l;if((0,i().G$)(o))return{type:`property_${o.type}`,propertyId:t.propertyId,id:t.id,style:(null===(a=t.config)||void 0===a||null===(a=a.property_number)||void 0===a?void 0:a.style)??"large"};if("formula"===o.type)return{type:`property_${o.type}`,propertyId:t.propertyId,id:t.id,style:(0,n().isNumberFormulaPropertySchema)(o)?(null===(s=t.config)||void 0===s||null===(s=s.property_formula)||void 0===s?void 0:s.style)??"large":"small"};if("file"===o.type)return{type:`property_${o.type}`,propertyId:t.propertyId,id:t.id,style:(null===(l=t.config)||void 0===l||null===(l=l.property_file)||void 0===l?void 0:l.style)??"landscape"};return{type:`property_${o.type}`,propertyId:t.propertyId,id:t.id}}function h(e){if((0,c().f)(e)){return{type:"property",propertyId:e.propertyId,id:e.id,config:_(e)}}return"deleted_property"===e.type?e.rawModule:"normalizedTitleWithIcon"===e.type?(0,l().X)(e):e}function _(e){if((0,c().f)(e))switch(e.type){case"property_person":case"property_created_by":case"property_last_edited_by":case"property_number":case"property_formula":case"property_file":return{[e.type]:{style:e.style}};default:return{}}return{}}function b(e){return e.map((e=>h(e)))}},513197:(e,t,o)=>{o.d(t,{e:()=>c,BW:()=>d,AQ:()=>u});o(267602),o(653476),o(241792);var n=()=>o(696459),i=()=>o(483791);const r={cover:!0,titleWithIcon:!0,inlinePageSections:!0,expandedBacklinks:!0,discussions:!0,bottomControls:!0,editor:!0,transcript:!0,properties:!0,formTitle:!0,formSubmit:!0,formQuestion:!0,placeholder:!0,property:!0,views:!0,viewsMain:!1,relationsGroup:!0,collectionView:!1,collectionViewV2:!1};function a(e){return r[e.type]}var s=()=>o(582025),l=()=>o(777017);function c(e,t){const o={page_main:[],page_details:[],form_layout_schema:[]};return(0,l().nm)(e,((e,n)=>{if("views_main_tab_modules"===n.area)o.views_main_tab_modules||(o.views_main_tab_modules={}),o.views_main_tab_modules[n.viewId]=e.filter(t);else if("form_conditional_modules"===n.area){const n=e.filter(t).filter((e=>"formQuestion"===e.type||"placeholder"===e.type));for(const e of n)o.form_conditional_modules||(o.form_conditional_modules={}),o.form_conditional_modules[e.id]=e}else o[n.area]=e.filter(t)})),o}function d(e){const t={page_main:[],page_details:[],form_layout_schema:[]};for(const o of i().cf)if("views_main_tab_modules"===o){if(!e.views_main_tab_modules)continue;for(const o of Object.keys(e.views_main_tab_modules)){if(!(0,n().Xe)(o,"view_tab_"))continue;const i=e.views_main_tab_modules[o];i&&(t.views_main_tab_modules||(t.views_main_tab_modules={}),t.views_main_tab_modules[o]=i.filter((e=>void 0!==e)))}}else if("form_conditional_modules"===o){if(!e.form_conditional_modules)continue;const o=Object.values(e.form_conditional_modules).filter((e=>void 0!==e&&(0,s().B)(e,"form_conditional_modules")));t.form_conditional_modules=Object.assign({},...o.map((e=>({[e.id]:e}))))}else{const n=e[o];t[o]=n.filter((e=>null!=e))}return t}function u(e){return function(e,t){const o={page_layout_schema:void 0,page_info_layout_schema:void 0,form_layout_schema:void 0};return(0,l().pJ)(e,((e,n)=>{if("views_main_tab_modules"===n.area)o.views_main_tab_modules||(o.views_main_tab_modules={}),o.views_main_tab_modules[n.viewId]=e.filter(t);else if("form_conditional_modules"===n.area){const n=e.filter(t).filter((e=>(0,s().c)(e,"form_conditional_modules")));for(const e of n)o.form_conditional_modules||(o.form_conditional_modules={}),o.form_conditional_modules[e.id]=e}else o[n.area]=e.filter(t)})),o}(e,a)}},215134:(e,t,o)=>{o.d(t,{B1:()=>a,F3:()=>l,MI:()=>u,Ro:()=>s,_i:()=>d,h7:()=>c,mT:()=>r,ni:()=>p});o(670560);var n=()=>o(308240),i=()=>o(777017);function r(e,t){let o;return(0,i().o_)(e,((e,n)=>{o||t(e)&&(o=n)})),o}function a(e,t){let o;return(0,i().W3)(e,((e,n)=>{o||t(e)&&(o=n)})),o}function s(e,t){var o,n,i;const r=a(e,t);if(r)switch(r.area){case"views_main_tab_modules":return null===(o=e[r.area])||void 0===o||null===(o=o[r.viewId])||void 0===o?void 0:o[r.index];case"form_conditional_modules":return null===(n=e[r.area])||void 0===n?void 0:n[r.moduleId];default:return null===(i=e[r.area])||void 0===i?void 0:i[r.index]}}function l(e,t){var o,n,i;const a=r(e,t);if(a)switch(a.area){case"views_main_tab_modules":return null===(o=e[a.area])||void 0===o||null===(o=o[a.viewId])||void 0===o?void 0:o[a.index];case"form_conditional_modules":return null===(n=e[a.area])||void 0===n?void 0:n[a.moduleId];default:return null===(i=e[a.area])||void 0===i?void 0:i[a.index]}}function c(e,t){const o=a(e,t);if(!o)return;let n;var i;if("views_main_tab_modules"===o.area)n=null===(i=e[o.area])||void 0===i||null===(i=i[o.viewId])||void 0===i?void 0:i[o.index];else if("form_conditional_modules"===o.area){var r;n=null===(r=e[o.area])||void 0===r?void 0:r[o.moduleId]}else{var s;n=null===(s=e[o.area])||void 0===s?void 0:s[o.index]}return n?{module:n,position:o}:void 0}function d(e,t){const o=r(e,t);if(!o)return;let n;var i;if("views_main_tab_modules"===o.area)n=null===(i=e[o.area])||void 0===i||null===(i=i[o.viewId])||void 0===i?void 0:i[o.index];else if("form_conditional_modules"===o.area){var a;n=null===(a=e[o.area])||void 0===a?void 0:a[o.moduleId]}else{var s;n=null===(s=e[o.area])||void 0===s?void 0:s[o.index]}return n?{module:n,position:o}:void 0}function u(e,t){const o=function(e,t){const o=[];return(0,i().o_)(e,((e,n)=>{t(e)&&o.push(n)})),o}(e,t),n=[];for(const i of o){let t;var r;if("views_main_tab_modules"===i.area)t=null===(r=e[i.area])||void 0===r||null===(r=r[i.viewId])||void 0===r?void 0:r[i.index];else if("form_conditional_modules"===i.area){var a;t=null===(a=e[i.area])||void 0===a?void 0:a[i.moduleId]}else{var s;t=null===(s=e[i.area])||void 0===s?void 0:s[i.index]}t&&n.push({module:t,position:i})}return n}function p(e){const{modulesByArea:t,formQuestionModuleId:o}=e,i=c(t,(e=>"formQuestion"===e.type&&e.formQuestionId===o));if(i&&"formQuestion"===i.module.type&&(0,n().zn)(i.position.area))return{questionModule:i.module,area:i.position.area}}},972054:(e,t,o)=>{o.d(t,{M:()=>i});o(241792);var n=()=>o(777017);function i(e,t){const o={page_layout_schema:void 0,page_info_layout_schema:void 0,form_layout_schema:void 0};return(0,n().pJ)(e,((e,n)=>{const i=n.area;if("views_main_tab_modules"===i)o.views_main_tab_modules||(o.views_main_tab_modules={}),o.views_main_tab_modules[n.viewId]||(o.views_main_tab_modules[n.viewId]=[]),o.views_main_tab_modules[n.viewId]=e.map(((e,o)=>t(e,{...n,index:o})));else if("form_conditional_modules"===i){o.form_conditional_modules||(o.form_conditional_modules={});for(let i=0;i<e.length;i++){const r=e[i];o.form_conditional_modules[r.id]=t(r,{...n,moduleId:r.id})}}else o[i]||(o[i]=[]),o[i]=e.map(((e,o)=>t(e,{...n,index:o})))})),o}},293836:(e,t,o)=>{o.d(t,{m:()=>a});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(241792);var n=()=>o(421551),i=()=>o(639708),r=()=>o(318220);function a(e){let{modulesByArea:t,collectionSchema:o,collectionFormat:a}=e;const s=function(e){let{modulesByArea:t,collectionSchema:o,collectionFormat:a}=e;const s=(0,r().i)(t),l={propertyModule:[],pinnedProperty:[],relationsGroup:[],propertiesGroup:[]},c=new Set(Object.keys(o));for(const r of s)if((0,i().f)(r))l.propertyModule.push(r.propertyId),c.delete(r.propertyId);else if("normalizedTitleWithIcon"===r.type){l.pinnedProperty.push(...r.propertyIds);for(const e of r.propertyIds)c.delete(e)}else if("relationsGroup"===r.type){const e=(0,n().n)({format:a,schema:o,visibilityLevels:["inline","minimal"]});l.relationsGroup.push(...e.map((e=>e.section)));for(const t of e)c.delete(t.section)}return l.propertiesGroup=Array.from(c),l}({modulesByArea:t,collectionSchema:o,collectionFormat:a}),{propertiesGroup:l,...c}=s;return Object.values(c).flat()}},766537:(e,t,o)=>{o.d(t,{Lk:()=>u,VC:()=>c,wW:()=>d});o(670560),o(267602),o(30005);var n=()=>o(252780),i=()=>o(639708);const r={page_main:{cover:!0,normalizedTitleWithIcon:!0},page_details:{},form_layout_schema:{cover:!0,formTitle:!0},views_main_tab_modules:{},form_conditional_modules:{}},a={page_layout_schema:{cover:!0,titleWithIcon:!0},page_info_layout_schema:{},form_layout_schema:{cover:!0,formTitle:!0},views_main_tab_modules:{},form_conditional_modules:{}},s={page_main:{inlinePageSections:!0,expandedBacklinks:!0,discussions:!0,bottomControls:!0,editor:!0,viewsMain:!0},page_details:{},form_layout_schema:{formSubmit:!0},views_main_tab_modules:{discussions:!0,editor:!0},form_conditional_modules:{}},l={page_layout_schema:{inlinePageSections:!0,expandedBacklinks:!0,discussions:!0,bottomControls:!0,editor:!0,viewsMain:!0},page_info_layout_schema:{},form_layout_schema:{formSubmit:!0},views_main_tab_modules:{discussions:!0,editor:!0},form_conditional_modules:{}};function c(e,t){return t.type in r[e]}function d(e,t){const o=[],r=[],s=[];return t.forEach((t=>{(0,i().zP)(t)||(!function(e,t){return t.type in a[e]}(e,t)?!function(e,t){return t.type in l[e]}(e,t)?(0,n().h)(t)&&r.push(t):s.push(t):o.push(t))})),{nonMoveableHeaderRawModules:o,moveableRawModules:r,nonMoveableFooterRawModules:s}}function u(e,t){const o=[],r=[],a=[];return t.forEach((t=>{(0,i().zP)(t)||(c(e,t)?o.push(t):!function(e,t){return t.type in s[e]}(e,t)?(0,n().x)(t)&&r.push(t):a.push(t))})),{nonMoveableHeaderModules:o,moveableModules:r,nonMoveableFooterModules:a}}},137785:(e,t,o)=>{function n(e){const t=e.propertyIds??[];return{id:e.id,type:"titleWithIcon",propertyIds:0===(null==t?void 0:t.length)?void 0:t}}function i(e){return{id:e.id,type:"normalizedTitleWithIcon",propertyIds:e.propertyIds??[]}}o.d(t,{V:()=>i,X:()=>n})},252780:(e,t,o)=>{o.d(t,{h:()=>a,x:()=>r});const n={properties:!0,property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,deleted_property:!0,relationsGroup:!0,placeholder:!0,formQuestion:!0,views:!0,viewsMain:!1,cover:!1,formTitle:!1,formSubmit:!1,normalizedTitleWithIcon:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,transcript:!1},i={properties:!0,property:!0,views:!0,viewsMain:!1,relationsGroup:!0,placeholder:!0,formQuestion:!0,cover:!1,formTitle:!1,formSubmit:!1,titleWithIcon:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,transcript:!1,collectionView:!0,collectionViewV2:!0};function r(e){return n[e.type]}function a(e){return i[e.type]}},639708:(e,t,o)=>{o.d(t,{a3:()=>v,Yk:()=>f,zP:()=>b,Ns:()=>d,Ps:()=>g,xV:()=>c,z1:()=>m,f:()=>a,Vd:()=>s,p9:()=>r,J6:()=>p,Cj:()=>u,LP:()=>i,aJ:()=>_,Fc:()=>h});const n={property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0};function i(e){return Boolean(e&&"normalizedTitleWithIcon"===e.type)}function r(e){return Boolean(e&&"titleWithIcon"===e.type)}function a(e){return Boolean(e&&s(e.type))}function s(e){return Boolean(e in n)}const l={property_person:!0,property_created_by:!0,property_last_edited_by:!0};function c(e){return e.type in l}function d(e){return"property_file"===e.type}function u(e){return Boolean(e&&"relationsGroup"===e.type)}function p(e){return Boolean(e&&"property_relation"===e.type)}function m(e){return Boolean(e&&"properties"===e.type)}function f(e){return Boolean(e&&"deleted_property"===e.type)}function g(e){return Boolean(e&&"inlinePageSections"===e.type)}function v(e){return Boolean(e&&"bottomControls"===e.type)}function h(e){return"views"===e.type||"viewsMain"===e.type}function _(e){return"viewsMain"===e.type}function b(e){return"collectionView"===e.type||"collectionViewV2"===e.type}},80685:(e,t,o)=>{o.d(t,{GK:()=>b,QZ:()=>_});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(30005);var n=()=>o(696459),i=()=>o(934158),r=()=>o(396136),a=()=>o(696056),s=()=>o(255933),l=()=>o(611940),c=()=>o(243225),d=()=>o(306164),u=()=>o(989478);o(821057);class p{constructor(e){this.agentPointer=void 0,this.logErrorFn=void 0;const{agentPointer:t,logErrorFn:o}=e;this.agentPointer=t,this.logErrorFn=o}getActorPointer(){return this.agentPointer}getSpaceRole(e){return"none"}getTeamRole(e){return"none"}getGroupRole(e){return"none"}}function m(e){const{undecoratedGetRecordModel:t,logErrorFn:n,from:i}=e;return o(530980).omK.fromMonomorphicFunctionUnsafe((e=>{const o=t(e);return void 0===o&&"space_user"!==e.table&&"space_bot"!==e.table&&"space_permission_group"!==e.table&&"space_permission_group_member"!==e.table&&n({from:i,type:"NecessaryRecordWasNotProvided",error:new Error(`${i} needed the following record: ${e.table}/${e.id}, but it was not provided`),data:e}),o}),t.getRecordValue)}class f{logIfUnexpectedSpace(e){this.relevantEntities.relevantSpaceIds.has(e)||this.logErrorFn({from:"BotActorMembership",type:"NonRelevantSpaceRequested",error:new Error(`Space role was requested for ${e}, which was not a pre-determined "relevant" space id`),data:{spaceId:e}})}constructor(e){this.botPointer=void 0,this.getRecordModel=void 0,this.logErrorFn=void 0,this.memoizedSpaceRoles=void 0,this.relevantEntities=void 0;const{botPointer:t,getRecordModel:o,logErrorFn:n,relevantEntities:i}=e;this.botPointer=t,this.logErrorFn=n,this.getRecordModel=m({undecoratedGetRecordModel:o,logErrorFn:n,from:"BotActorMembership"}),this.memoizedSpaceRoles={},this.relevantEntities=i}getActorPointer(){return this.botPointer}getSpaceRole(e){this.logIfUnexpectedSpace(e);const t=this.memoizedSpaceRoles[e];if(void 0!==t)return t;const o=this.getRecordModel((0,l().HY)({botId:this.botPointer.id,spaceId:e})),n=void 0===o?"none":o.membership_type;return this.memoizedSpaceRoles[e]=n,this.memoizedSpaceRoles[e]}getTeamRole(e){return"none"}getGroupRole(e){return"none"}}o(670560),o(653476);class g{logIfUnexpectedSpace(e){this.relevantEntities.relevantSpaceIds.has(e)||this.logErrorFn({from:"UserActorMembership",type:"NonRelevantSpaceRequested",error:new Error(`Space role was requested for ${e}, which was not a pre-determined "relevant" space id`),data:{spaceId:e}})}logIfUnexpectedTeam(e){const{teamId:t,spaceId:o}=e;this.relevantEntities.relevantTeamIds.has(t)||this.logErrorFn({from:"UserActorMembership",type:"NonRelevantTeamRequested",error:new Error(`Team role was requested for ${t}, which was not a pre-determined "relevant" team id`),data:{teamId:t,spaceId:o}})}logIfUnexpectedGroup(e){var t;const{groupId:o,spaceId:n}=e;null!==(t=this.relevantEntities.relevantGroupIds.get(n))&&void 0!==t&&t.has(o)||this.logErrorFn({from:"UserActorMembership",type:"NonRelevantGroupRequested",error:new Error(`Group role was requested for ${o}, which was not a pre-determined "relevant" group id`),data:e})}constructor(e){this.userPointer=void 0,this.getRecordModel=void 0,this.logErrorFn=void 0,this.relevantEntities=void 0,this.memoizedSpaceRoles=void 0,this.memoizedTeamRoles=void 0,this.memoizedSpaceToGroupMembership=void 0;const{userPointer:t,getRecordModel:o,logErrorFn:n,relevantEntities:i}=e;this.userPointer=t,this.getRecordModel=m({undecoratedGetRecordModel:o,logErrorFn:n,from:"UserActorMembership"}),this.logErrorFn=n,this.relevantEntities=i,this.memoizedSpaceRoles={},this.memoizedTeamRoles={},this.memoizedSpaceToGroupMembership={}}getActorPointer(){return this.userPointer}getSpaceRole(e){this.logIfUnexpectedSpace(e);const t=this.memoizedSpaceRoles[e];if(void 0!==t)return t;const o=this.getRecordModel((0,c().v8)({userId:this.userPointer.id,spaceId:e})),n=void 0===o?"none":o.membership_type;return this.memoizedSpaceRoles[e]=n,this.memoizedSpaceRoles[e]}getTeamRole(e){const{teamId:t,spaceId:i}=e;this.logIfUnexpectedTeam({teamId:t,spaceId:i});const r=this.memoizedTeamRoles[t];if(void 0!==r)return r;const a=this.getRecordModel({table:d().e0,id:t,spaceId:i});if(void 0===a||a.getSpaceId()!==i)return this.memoizedTeamRoles[t]="none",this.memoizedTeamRoles[t];const s=this.getSpaceRole(a.getSpaceId()),l=(0,c().L6)(s);let u=[];l&&a.isDefault()&&u.push("member"),a.getRawMembership().forEach((e=>{if("user"===e.entity_type)e.user_id===this.userPointer.id&&u.push(e.type);else if("group"===e.entity_type)if("owner"===e.type||"member"===e.type){"none"!==this.getGroupRole({spaceId:a.getSpaceId(),groupId:e.group_id})&&u.push(e.type)}else(0,n().t1)(e.type);else(0,n().t1)(e)})),l||(u=u.filter((e=>"team_level_guest"===e)));const p=(0,o(542487).uG)(...u);return this.memoizedTeamRoles[t]=p,this.memoizedTeamRoles[t]}getGroupRole(e){const{groupId:t,spaceId:n}=e;this.logIfUnexpectedGroup({groupId:t,spaceId:n});const i=this.getSpaceRole(n);if(!(0,c().L6)(i))return"none";const r=this.memoizedSpaceToGroupMembership[n];if(r&&r[t])return r[t];r||(this.memoizedSpaceToGroupMembership[n]={});const a=this.getRecordModel((0,o(657169).Ss)({spacePermissionGroupId:t,userId:this.userPointer.id,spaceId:n}));return a&&a.isAlive()?this.memoizedSpaceToGroupMembership[n][t]="member":this.memoizedSpaceToGroupMembership[n][t]="none",this.memoizedSpaceToGroupMembership[n][t]}}class v{constructor(e){this.userActorMemberships=void 0,this.botActorMemberships=void 0,this.agentActorMemberships=void 0,this.logErrorFn=void 0;const{logErrorFn:t,relevantEntities:o,getRecordModel:r,actorPointers:s}=e;this.userActorMemberships={},this.botActorMemberships={},this.agentActorMemberships={},this.logErrorFn=t;for(const l of s)l.table===u().KJ?this.userActorMemberships[l.id]=new g({userPointer:l,relevantEntities:o,logErrorFn:t,getRecordModel:r}):l.table===a().cZ?this.botActorMemberships[l.id]=new f({botPointer:l,relevantEntities:o,logErrorFn:t,getRecordModel:r}):l.table===i().y0?this.agentActorMemberships[l.id]=new p({agentPointer:l,logErrorFn:t}):(0,n().t1)(l)}getActorMembership(e){let t;if(e.table===u().KJ?t=this.userActorMemberships[e.id]:e.table===a().cZ?t=this.botActorMemberships[e.id]:e.table===i().y0?t=this.agentActorMemberships[e.id]:(0,n().t1)(e),void 0===t){const t=new Error("Requested actor did not have an actor membership");this.logErrorFn({from:"ActorMemberships",type:"MissingActorMembership",error:t,data:{actorPointer:e}})}return t}*[Symbol.iterator](){yield*Object.values(this.userActorMemberships),yield*Object.values(this.botActorMemberships),yield*Object.values(this.agentActorMemberships)}}var h=()=>o(933868);function _(e){const{recordMapFromWhichToFindRelevantEntities:t,alreadyKnownRelevantEntities:o}=e,i={relevantSpaceIds:new Set,relevantTeamIds:new Set,relevantGroupIds:new Map},a=e=>{null!=o&&o.relevantSpaceIds.has(e)||i.relevantSpaceIds.add(e)},u=e=>{null!=o&&o.relevantTeamIds.has(e)||i.relevantTeamIds.add(e)},p=(e,t)=>{var n;if(null!=o&&null!==(n=o.relevantGroupIds.get(t))&&void 0!==n&&n.has(e))return;const r=i.relevantGroupIds.get(t);void 0===r?i.relevantGroupIds.set(t,new Set([e])):r.add(e)},m=(e,t)=>{e.forEach((e=>{if((0,h().hV)(e))p(e.group_id,t);else if((0,h().fG)(e)||(0,h().bm)(e))u(e.team_id);else if(!((0,h().jg)(e)||(0,h().FB)(e)||!(0,h().C2)(e)||(0,h().$D)(e)||(0,h().RO)(e)||(0,h().e_)(e)||(0,h().Ir)(e)||(0,h().Ix)(e)||(0,h().KK)(e)))throw(0,n().t1)(e)}))};for(const{pointer:n,model:f}of t)if(void 0!==n.spaceId&&a(n.spaceId),n.table===s().bx)a(n.id);else if(n.table===d().e0){if(u(n.id),void 0!==f){const e=f;a(e.getSpaceId()),e.getRawMembership().forEach((t=>{"group"===t.entity_type&&p(t.group_id,e.getSpaceId())}));m(e.getPermissionItems(),e.getSpaceId());const t=e.getParentPointer();t.table===s().bx&&void 0!==t.id&&a(t.id)}}else if(n.table===c().WU){const{spaceId:e}=(0,c().KQ)(n.id);a(e)}else if(n.table===l().Zx){const{spaceId:e}=(0,l().td)(n.id);a(e)}else if(n.table===r().iU&&void 0!==f){const e=f;a(e.getSpaceId()),m(e.getPermissionItems(),e.getSpaceId())}return i}function b(e){const{recordMap:t,actorPointers:o,logErrorFn:n,getRecordModelFnWithMaybeMissingRecords:i}=e,r=_({recordMapFromWhichToFindRelevantEntities:t});return new v({getRecordModel:i,actorPointers:o,logErrorFn:n,relevantEntities:r})}},381839:(e,t,o)=>{async function n(){const e=await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,915660,23));return await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,686405,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,447231,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,735433,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,804279,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,402731,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,951849,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,357874,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,494446,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,724115,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,652812,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,939980,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,946213,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,474307,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,979016,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,115251,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,980871,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,257065,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,124370,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,340728,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,77158,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,568232,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,368805,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,675041,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,108956,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,409220,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,27915,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,75045,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,449472,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,779812,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,927046,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,417117,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,140485,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,781295,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,924677,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,524335,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,616150,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,652503,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,474277,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,662356,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,756543,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,332334,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,190319,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,790650,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,745520,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,476347,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,585153,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,466841,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,748443,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,424064,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,699729,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,861169,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,523099,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,552353,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,958704,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.bind(o,153562)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,11426,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,824371,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,13210,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,720288,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,196854,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,399945,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,286862,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,943932,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,737345,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,89485,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,180366,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,454803,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,651412,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,824540,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,128439,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,959385,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,470767,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,989865,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,312886,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,492447,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,322738,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,830893,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,335266,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,590874,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,509930,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,496836,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,721029,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,65398,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,847251,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,838564,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,583082,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,305774,23)),await Promise.all([o.e(45598),o.e(77437),o.e(72846)]).then(o.t.bind(o,973358,23)),e}o.r(t),o.d(t,{PrismLanguages:()=>i,importPrism:()=>n});let i=function(e){return e.abap="abap",e.agda="agda",e.arduino="arduino",e.bash="bash",e.basic="basic",e.bnf="bnf",e.c="c",e.clike="clike",e.clojure="clojure",e.coffeescript="coffeescript",e.coq="coq",e.cpp="cpp",e.csharp="csharp",e.css="css",e.cssExtras="css-extras",e.dart="dart",e.dhall="dhall",e.diff="diff",e.docker="docker",e.ebnf="ebnf",e.elixir="elixir",e.elm="elm",e.erlang="erlang",e.flow="flow",e.fortran="fortran",e.fsharp="fsharp",e.gherkin="gherkin",e.glsl="glsl",e.go="go",e.graphql="graphql",e.groovy="groovy",e.haskell="haskell",e.hcl="hcl",e.html="html",e.idris="idris",e.java="java",e.javascript="javascript",e.json="json",e.jsx="jsx",e.julia="julia",e.kotlin="kotlin",e.latex="latex",e.less="less",e.lisp="lisp",e.livescript="livescript",e.llvm="llvm",e.lua="lua",e.makefile="makefile",e.markdown="markdown",e.markup="markup",e.mathematica="mathematica",e.matlab="matlab",e.mermaid="mermaid",e.nasm="nasm",e.nix="nix",e.notion="notion",e.objectivec="objectivec",e.ocaml="ocaml",e.pascal="pascal",e.perl="perl",e.php="php",e.powershell="powershell",e.prolog="prolog",e.protobuf="protobuf",e.purescript="purescript",e.python="python",e.r="r",e.racket="racket",e.reason="reason",e.ruby="ruby",e.rust="rust",e.sass="sass",e.scala="scala",e.scheme="scheme",e.scss="scss",e.smalltalk="smalltalk",e.solidity="solidity",e.sql="sql",e.swift="swift",e.toml="toml",e.tsx="tsx",e.typescript="typescript",e.vbnet="vbnet",e.verilog="verilog",e.vhdl="vhdl",e.visualBasic="visual-basic",e.wasm="wasm",e.xml="xml",e.yaml="yaml",e}({})},748456:(e,t,o)=>{o.d(t,{W:()=>i,Y:()=>r});var n=()=>o(381839);const i={ABAP:n().PrismLanguages.abap,Agda:n().PrismLanguages.agda,Arduino:n().PrismLanguages.arduino,"ASCII Art":"null",Assembly:n().PrismLanguages.nasm,Bash:n().PrismLanguages.bash,BASIC:n().PrismLanguages.basic,BNF:n().PrismLanguages.bnf,C:n().PrismLanguages.c,"C#":n().PrismLanguages.csharp,"C++":n().PrismLanguages.cpp,Clojure:n().PrismLanguages.clojure,CoffeeScript:n().PrismLanguages.coffeescript,Coq:n().PrismLanguages.coq,CSS:n().PrismLanguages.css,Dart:n().PrismLanguages.dart,Dhall:n().PrismLanguages.dhall,Diff:n().PrismLanguages.diff,Docker:n().PrismLanguages.docker,EBNF:n().PrismLanguages.ebnf,Elixir:n().PrismLanguages.elixir,Elm:n().PrismLanguages.elm,Erlang:n().PrismLanguages.erlang,"F#":n().PrismLanguages.fsharp,Flow:n().PrismLanguages.flow,Fortran:n().PrismLanguages.fortran,Gherkin:n().PrismLanguages.gherkin,GLSL:n().PrismLanguages.glsl,Go:n().PrismLanguages.go,GraphQL:n().PrismLanguages.graphql,Groovy:n().PrismLanguages.groovy,Haskell:n().PrismLanguages.haskell,HCL:n().PrismLanguages.hcl,HTML:n().PrismLanguages.html,Idris:n().PrismLanguages.idris,Java:n().PrismLanguages.java,JavaScript:n().PrismLanguages.jsx,JSON:n().PrismLanguages.json,Julia:n().PrismLanguages.julia,Kotlin:n().PrismLanguages.kotlin,LaTeX:n().PrismLanguages.latex,Less:n().PrismLanguages.less,Lisp:n().PrismLanguages.lisp,LiveScript:n().PrismLanguages.livescript,"LLVM IR":n().PrismLanguages.llvm,Lua:n().PrismLanguages.lua,Makefile:n().PrismLanguages.makefile,Markdown:n().PrismLanguages.markdown,Markup:n().PrismLanguages.markup,MATLAB:n().PrismLanguages.matlab,Mathematica:n().PrismLanguages.mathematica,Mermaid:n().PrismLanguages.mermaid,Nix:n().PrismLanguages.nix,"Notion Formula":n().PrismLanguages.notion,"Objective-C":n().PrismLanguages.objectivec,OCaml:n().PrismLanguages.ocaml,Pascal:n().PrismLanguages.pascal,Perl:n().PrismLanguages.perl,PHP:n().PrismLanguages.php,"Plain Text":"null",PowerShell:n().PrismLanguages.powershell,Prolog:n().PrismLanguages.prolog,Protobuf:n().PrismLanguages.protobuf,PureScript:n().PrismLanguages.purescript,Python:n().PrismLanguages.python,R:n().PrismLanguages.r,Racket:n().PrismLanguages.racket,Reason:n().PrismLanguages.reason,Ruby:n().PrismLanguages.ruby,Rust:n().PrismLanguages.rust,Sass:n().PrismLanguages.sass,Scala:n().PrismLanguages.scala,Scheme:n().PrismLanguages.scheme,Scss:n().PrismLanguages.scss,Shell:n().PrismLanguages.bash,Smalltalk:n().PrismLanguages.smalltalk,Solidity:n().PrismLanguages.solidity,SQL:n().PrismLanguages.sql,Swift:n().PrismLanguages.swift,TOML:n().PrismLanguages.toml,TypeScript:n().PrismLanguages.tsx,"VB.Net":n().PrismLanguages.vbnet,Verilog:n().PrismLanguages.verilog,VHDL:n().PrismLanguages.vhdl,"Visual Basic":n().PrismLanguages.visualBasic,WebAssembly:n().PrismLanguages.wasm,XML:n().PrismLanguages.xml,YAML:n().PrismLanguages.yaml,"Java/C/C++/C#":n().PrismLanguages.clike,[o(716703).g1.NotionScript]:n().PrismLanguages.javascript},r={[n().PrismLanguages.abap]:"ABAP",[n().PrismLanguages.agda]:"Agda",[n().PrismLanguages.arduino]:"Arduino",[n().PrismLanguages.bash]:"Shell",[n().PrismLanguages.basic]:"BASIC",[n().PrismLanguages.bnf]:"BNF",[n().PrismLanguages.c]:"C",[n().PrismLanguages.clojure]:"Clojure",[n().PrismLanguages.coffeescript]:"CoffeeScript",[n().PrismLanguages.coq]:"Coq",[n().PrismLanguages.cpp]:"C++",[n().PrismLanguages.csharp]:"C#",[n().PrismLanguages.css]:"CSS",[n().PrismLanguages.dart]:"Dart",[n().PrismLanguages.dhall]:"Dhall",[n().PrismLanguages.diff]:"Diff",[n().PrismLanguages.docker]:"Docker",[n().PrismLanguages.ebnf]:"EBNF",[n().PrismLanguages.elixir]:"Elixir",[n().PrismLanguages.elm]:"Elm",[n().PrismLanguages.erlang]:"Erlang",[n().PrismLanguages.flow]:"Flow",[n().PrismLanguages.fortran]:"Fortran",[n().PrismLanguages.fsharp]:"F#",[n().PrismLanguages.gherkin]:"Gherkin",[n().PrismLanguages.glsl]:"GLSL",[n().PrismLanguages.go]:"Go",[n().PrismLanguages.graphql]:"GraphQL",[n().PrismLanguages.groovy]:"Groovy",[n().PrismLanguages.haskell]:"Haskell",[n().PrismLanguages.hcl]:"HCL",[n().PrismLanguages.html]:"HTML",[n().PrismLanguages.idris]:"Idris",[n().PrismLanguages.java]:"Java",[n().PrismLanguages.javascript]:"JavaScript",[n().PrismLanguages.json]:"JSON",[n().PrismLanguages.jsx]:"JavaScript",[n().PrismLanguages.julia]:"Julia",[n().PrismLanguages.kotlin]:"Kotlin",[n().PrismLanguages.latex]:"LaTeX",[n().PrismLanguages.less]:"Less",[n().PrismLanguages.lisp]:"Lisp",[n().PrismLanguages.livescript]:"LiveScript",[n().PrismLanguages.llvm]:"LLVM IR",[n().PrismLanguages.lua]:"Lua",[n().PrismLanguages.makefile]:"Makefile",[n().PrismLanguages.markdown]:"Markdown",[n().PrismLanguages.markup]:"Markup",[n().PrismLanguages.matlab]:"MATLAB",[n().PrismLanguages.mathematica]:"Mathematica",[n().PrismLanguages.mermaid]:"Mermaid",[n().PrismLanguages.nasm]:"Assembly",[n().PrismLanguages.notion]:"Notion Formula",[n().PrismLanguages.nix]:"Nix",[n().PrismLanguages.objectivec]:"Objective-C",[n().PrismLanguages.ocaml]:"OCaml",[n().PrismLanguages.pascal]:"Pascal",[n().PrismLanguages.perl]:"Perl",[n().PrismLanguages.php]:"PHP",[n().PrismLanguages.powershell]:"PowerShell",[n().PrismLanguages.prolog]:"Prolog",[n().PrismLanguages.protobuf]:"Protobuf",[n().PrismLanguages.purescript]:"PureScript",[n().PrismLanguages.python]:"Python",[n().PrismLanguages.r]:"R",[n().PrismLanguages.racket]:"Racket",[n().PrismLanguages.reason]:"Reason",[n().PrismLanguages.ruby]:"Ruby",[n().PrismLanguages.rust]:"Rust",[n().PrismLanguages.sass]:"Sass",[n().PrismLanguages.scala]:"Scala",[n().PrismLanguages.scheme]:"Scheme",[n().PrismLanguages.scss]:"Scss",[n().PrismLanguages.smalltalk]:"Smalltalk",[n().PrismLanguages.solidity]:"Solidity",[n().PrismLanguages.sql]:"SQL",[n().PrismLanguages.swift]:"Swift",[n().PrismLanguages.toml]:"TOML",[n().PrismLanguages.tsx]:"TypeScript",[n().PrismLanguages.typescript]:"TypeScript",[n().PrismLanguages.vbnet]:"VB.Net",[n().PrismLanguages.verilog]:"Verilog",[n().PrismLanguages.vhdl]:"VHDL",[n().PrismLanguages.visualBasic]:"Visual Basic",[n().PrismLanguages.wasm]:"WebAssembly",[n().PrismLanguages.xml]:"XML",[n().PrismLanguages.yaml]:"YAML",[n().PrismLanguages.clike]:"Java/C/C++/C#"}},923420:(e,t,o)=>{o.d(t,{$r:()=>a,Zj:()=>r});var n=()=>o(35980);const i="promoCode";function r(e){let{currentUserId:t,promoCode:o}=e;o?n().Z.set({userId:t,key:i,value:o}):n().Z.remove({userId:t,key:i})}function a(e){n().Z.remove({userId:e,key:i})}},233878:(e,t,o)=>{o.d(t,{aV:()=>d,uf:()=>u,DI:()=>c});var n=()=>o(216939),i=(o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(241792),()=>o(783540));async function r(e){const t=new Set,o=new(i().G)((()=>new Set));await a(0,e.keys.map((e=>({key:e,parentKey:void 0}))),e,t,o)}async function a(e,t,o,n,i){const r=[],l=[];for(const a of t){const{key:t,parentKey:c}=a,d=o.loadIntoMap.get(t);d?await s(t,d,c,e,r,o,n,i):l.push(a)}if(o.loadMultiFn){const t=await o.loadMultiFn(l.map((e=>{let{key:t}=e;return t})));for(const{key:a,parentKey:c}of l){const l=t.get(a);await s(a,l,c,e,r,o,n,i)}}else await Promise.all(l.map((async t=>{let{key:a,parentKey:l}=t;const c=await o.loadFn(a);await s(a,c,l,e,r,o,n,i)})));r.length>0&&await a(e+1,r,o,n,i)}async function s(e,t,o,n,i,r,a,s){if(r.loadIntoMap.set(e,t),void 0===t)return;const l=(e,t)=>{if(!r.getRelatedPageForCollectionSubpage)return;const o=r.getRelatedPageForCollectionSubpage(e,t[1]);for(const n of o){const e=r.keyToString(n);a.has(e)||(a.add(e),i.push({key:n,parentKey:t[0]}))}};if(r.keyIsCollection&&r.keyIsCollection(e)){const o=s.get(r.keyToString(e));for(const e of o)l(t,e)}const c=await r.recurFn(t,e,o,n)??[];for(const d of c){const o=r.keyToString(d);if(r.keyIsCollection&&r.keyIsCollection(d)){const n=r.loadIntoMap.get(d);n?l(n,[e,t]):s.get(o).add([e,t])}a.has(o)||(a.add(o),i.push({key:d,parentKey:e}))}}var l=()=>o(752778);function c(e){return e.toRecordMap()}async function d(e){await r({keys:e.recordPointers,keyToString:n().dn,recurFn:async(t,o,n,i)=>await e.recurFn(t,n,i),getRelatedPageForCollectionSubpage:e.getRelatedPageForCollectionSubpage,keyIsCollection:e=>e.table===l().vF,loadFn:e.loadRecordModel,loadMultiFn:async t=>{const o=await e.loadRecordModel(t);return{get:e=>o.getModel(e)}},loadIntoMap:{get:t=>e.recordMap.getModel(t),set(t,o){e.recordMap.setModel(t,o)}}})}async function u(e){const{loadRecordModels:t}=e;await r({keys:e.recordPointers,keyToString:n().dn,recurFn:(t,o,n,i)=>{if(t.model)return e.recurFn(t.model,t.role,n,i)},loadFn:e.loadRecordModel,loadMultiFn:t&&(async e=>{const o=await t(e);return{get(e){const t=o.getModel(e),n=o.getRole(e);if(n)return{model:t,role:n}}}}),loadIntoMap:{get(t){const o=e.recordMap.getModel(t),n=e.recordMap.getRole(t);if(n)return{model:o,role:n}},set(t,o){o&&e.recordMap.setModelAndRole(t,o.model,o.role)}}})}},480425:(e,t,o)=>{o.d(t,{Bq:()=>c,Og:()=>d});o(241792);var n=()=>o(513670),i=()=>o(530980),r=()=>o(396136),a=()=>o(458196),s=()=>o(989478),l=()=>o(955620);function c(e){if(e.table===r().iU){const t=e.value;if(t)return i().kk5.fromBlock(t).getCollectionPointer()}}function d(e){const t=l().lzi(e);return n().oA(t.map((e=>{const t=l().hDy(e),o=l().hH9(t),n=l().V8Y(t),i=l().xat(t);if(o){const e=l().zEN(o);if(e)return{table:s().KJ,id:e}}else if(n){const e=l().TOT(n);if(e)return{table:r().iU,id:e}}else if(i){const e=l().kxk(i);if(e)return(0,a().iA)({spaceId:e.spaceId,spacePermissionGroupId:e.groupId})}})))}},605974:(e,t,o)=>{o.d(t,{P8:()=>v,PB:()=>f,Zv:()=>g,oN:()=>m,qB:()=>c,un:()=>u,zy:()=>d});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(470928),o(30005),o(228244);var n=()=>o(546034),i=()=>o(331540),r=()=>o(455947),a=()=>o(226413);class s{constructor(e,t){this.variable=void 0,this.property=void 0,this.variable=e,this.property=t}getProperty(){return this.property}get(e){const t=this.getCombinatorFilter(e);if(t)return{type:"results",limit:1,filter:t}}getCombinatorFilter(e){const t=this.getPropertyFilter(e,this.variable);if(t)return{operator:"and",filters:[{property:this.property,filter:t}]}}getPropertyFilter(e,t){var o;const n=e[this.property];if(!n)return;return{operator:"status_is",value:{type:"is_option",value:null===(o=n.options)||void 0===o||null===(o=o.find((e=>e.id===t)))||void 0===o?void 0:o.value}}}}const l=(0,o(788860).vU)({current:{id:"database.filterValue.relationType.relativeSprintVariable.current",defaultMessage:"Current"},next:{id:"database.filterValue.relationType.relativeSprintVariable.next",defaultMessage:"Next"},last:{id:"database.filterValue.relationType.relativeSprintVariable.last",defaultMessage:"Last"}}),c={[i().p$]:{current:{messageDescriptor:l.current,reducer:new s(n().SF,n().b0.StatusV2)},next:{messageDescriptor:l.next,reducer:new s(n().YE,n().b0.StatusV2)},last:{messageDescriptor:l.last,reducer:new s(n().Rw,n().b0.StatusV2)}}};function d(e,t){const{filter:o,property:n}=e;if(!(0,r().e)(o)||!(0,r().vR)(o))return!1;const i=t[n];if(!i||!(0,a().p_)(i))return!1;return(0,r().YO)(o).some((e=>"relative"===e.type))}function u(e,t,o){if(!e)return!1;const n=t[o];return!!n&&p(e,o,n)}function p(e,t,o){return e===i().p$&&t===n().b0.StatusV2&&(0,a().gB)(o)}function m(e,t){return!!e&&u(t,e,n().b0.StatusV2)}function f(e){const{appUri:t,collectionSchema:o}=e;return Boolean(t&&c[t]&&m(o,t))}function g(e,t){const o=e[n().b0.StatusV2];if(!o||!p(t,n().b0.StatusV2,o))return[];return Object.keys(c[t]).filter((e=>{var t;return null===(t=o.options)||void 0===t?void 0:t.find((t=>t.id===e))}))}function v(e,t){const o=Object.entries(t).find((t=>{let[o,n]=t;return e===n}));return o?o[0]:void 0}},35277:(e,t,o)=>{o.d(t,{Hw:()=>i,j1:()=>n,qJ:()=>r});const n={name:"Salesforce Record",regex:"^(https?:\\/\\/)?(?<instanceUrl>[a-z0-9-]+\\.[\\w.]+\\.force\\.com)\\/lightning\\/r\\/(?<objectName>[a-zA-Z0-9_]+)\\/(?<recordId>[a-zA-Z0-9]+)\\/(?<action>[a-zA-Z0-9_]+)",attributes:[{id:"Id",name:"Id",type:"inline",format:{type:"title",section:"title"},values:["$<recordId>"]},{id:"instanceUrl",name:"Instance URL",type:"inline",format:{type:"title",section:"title"},values:["$<instanceUrl>"]},{id:"objectName",name:"Object Name",type:"inline",format:{type:"title",section:"secondary"},values:["$<objectName>"]}],additional_types:{connectedRelation:!0},connected_relation_properties:{title:{name:"Name",type:"title"},Id:{name:"Id",type:"text"},CreatedById:{name:"Created By",uri:"notion://user-defined-collection/salesforce:User",type:"relation"},mapped_CreatedById:{name:"Mapped Created By",uri:"notion://user-defined-collection/salesforce:User",type:"person",source_property_id:"Email"},LastModifiedById:{name:"Last Modified By",uri:"notion://user-defined-collection/salesforce:User",type:"relation"},mapped_LastModifiedById:{name:"Mapped Last Modified By",uri:"notion://user-defined-collection/salesforce:User",type:"person",source_property_id:"Email"},CreatedDate:{name:"Created Date",type:"date"},LastModifiedDate:{name:"Last Modified Date",type:"date"}},connected_relation_sub_schemas:{"notion://user-defined-collection/salesforce:User":{title:{name:"Name",type:"title"},SmallPhotoUrl:{name:"Avatar URL",type:"url"},Email:{name:"Email",type:"email"}},"notion://user-defined-collection/salesforce:Account":{title:{name:"Name",type:"title"},Type:{name:"Type",type:"text"},AccountNumber:{name:"Account Number",type:"text"},AnnualRevenue:{name:"Annual Revenue",type:"number"}},"notion://user-defined-collection/salesforce:Opportunity":{title:{name:"Name",type:"title"},Amount:{name:"Amount",type:"number"},CloseDate:{name:"Close Date",type:"date"},StageName:{name:"Stage",type:"text"}}}};function i(e){return`^(https?:\\/\\/)?(?<instanceUrl>[a-z0-9-]+\\.[\\w.]+\\.force\\.com)\\/lightning\\/r\\/${e}\\/(?<recordId>[a-zA-Z0-9]+)\\/(?<action>[a-zA-Z0-9_]+)`}function r(e){return{name:e,regex:i(e),attributes:n.attributes,additional_types:{connectedRelation:!0},connected_relation_properties:n.connected_relation_properties,connected_relation_sub_schemas:n.connected_relation_sub_schemas}}},383802:(e,t,o)=>{o.d(t,{X:()=>n});const n={BRL:{currencyCode:"BRL",minorUnitDigits:2},EUR:{currencyCode:"EUR",minorUnitDigits:2},GBP:{currencyCode:"GBP",minorUnitDigits:2},JPY:{currencyCode:"JPY",minorUnitDigits:0},KRW:{currencyCode:"KRW",minorUnitDigits:0},USD:{currencyCode:"USD",minorUnitDigits:2}}},471125:(e,t,o)=>{o.d(t,{x5:()=>n});o(670560);function n(e){return"development"===e.env||"local"===e.env||e.isAdminMode}},196442:(e,t,o)=>{o.d(t,{A7:()=>r,LO:()=>c,fe:()=>s,nZ:()=>l,rE:()=>a});var n=()=>o(696459),i=()=>o(35980);function r(e){let{searchSessionId:t,searchSessionFlowNumber:o}=e;if((0,n().$K)(t)&&(0,n().$K)(o))return`1:${t}:${o}`}const a="SearchShowFilterBar";function s(e){return function(e){const{key:t,userId:o,defaultValue:n}=e,r=i().Z.get({userId:o,key:t});if(void 0===r)return n;if("boolean"!=typeof r)return!1;return r}({key:a,userId:e,defaultValue:!1})}const l=/(?:\s|^)-("[^"]+"|[\w]+)(?=\s|$)/g,c=/(?:\s|^)"([^"]*)"(?=\s|$)/g},899133:(e,t,o)=>{o.d(t,{GA:()=>w,Ix:()=>x,Pe:()=>C,Um:()=>M,dK:()=>P,iY:()=>s,ik:()=>I,jl:()=>d,lZ:()=>u,n8:()=>l,u4:()=>c,vp:()=>k});var n=()=>o(124199);const i=n().object({required:{type:n().literal("date"),start_date:n().string()},optional:{}}),r=n().union([n().object({required:{starting:i,ending:n().isUndefined()},optional:{}}),n().object({required:{starting:n().isUndefined(),ending:i},optional:{}}),n().object({required:{starting:i,ending:i},optional:{}}),n().object({required:{starting:n().isUndefined(),ending:n().isUndefined()},optional:{}})]),a=n().union([n().array(n().string()),n().object({required:{teamIds:n().array(n().string()),includeSpaceRecords:n().boolean()},optional:{}})]);function s(e){if(e)return Array.isArray(e)?e:e.teamIds?e.teamIds:void 0}n().object({required:{id:n().string(),type:n().union([n().literal("user"),n().literal("permission_group")])},optional:{}});let l=function(e){return e.CollectionsInSpace="CollectionsInSpace",e.BlocksInSpace="BlocksInSpace",e.BlocksInAncestor="BlocksInAncestor",e.BlocksInParent="BlocksInParent",e.BlocksInCollection="BlocksInCollection",e}({});n().object({required:{ancestors:n().array(n().string()),createdBy:n().array(n().string()),editedBy:n().array(n().string()),lastEditedTime:r,createdTime:r},optional:{requireEditPermissions:n().boolean(),isDeletedOnly:n().boolean(),excludeTemplates:n().boolean(),verificationOwners:n().array(n().string()),isAdminModeDeletedPageSearch:n().boolean(),blockTypes:n().minLength(n().array(n().literals(...Object.values(o(156642).Ti))),1),inTeams:a,navigableBlockContentOnly:n().boolean(),includePublicPagesWithoutExplicitAccess:n().boolean(),audience:n().array(n().literals("private","shared_internally","shared_externally","shared_to_web")),dev_excludedPages:n().array(n().string()),dev_excludedTeams:n().array(n().string()),parentId:n().string(),databaseType:n().array(n().literals(...o(331540).fW)),adminContentSearchDeletionStatus:n().nonEmpty(n().array(n().literals("in_trash","deleted_from_trash","alive")))}});function c(e){return{isDeletedOnly:!1,excludeTemplates:!1,navigableBlockContentOnly:!1,requireEditPermissions:!1,includePublicPagesWithoutExplicitAccess:!1,ancestors:[],parentId:void 0,createdBy:[],editedBy:[],lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},inTeams:[],...e}}function d(e,t){return{...e,...t,createdTime:{...e.createdTime,...t.createdTime},lastEditedTime:{...e.lastEditedTime,...t.lastEditedTime}}}const u={searchModal:"search_modal",searchModalQueueTask:"search_modal_queue_task"},p=["question_answer_context_search","question_answer_limited_content_search"],m=["cron_attachment_search_input_change","cron_attachment_parent_search_input_change","cron_time_collection_views_query"],f=["mail_get_pages"],g=["legacy_searchPagesWithParent","relation_setup_menu"],v=n().union([...["quick_find","quick_find_public","quick_find_input_change","quick_find_scroll","quick_find_filters","quick_find_ancestor_filter","quick_find_navigational_mode","mini_quick_find","mini_quick_find_prefetch","admin_tool_search_as_user","admin_tool_search_eval"].map(n().literal),...m.map(n().literal),...f.map(n().literal),...p.map(n().literal),...g.map(n().literal),n().literal("ancestor_filter_page_search"),n().literal("trash"),n().literal("verified_pages_settings"),n().literal("link_to_page_block"),n().literal("link_to_collection_block"),n().literal("mention_menu"),n().literal("move_to_menu"),n().literal("public_home_page_menu"),n().literal("relation_menu"),n().literal("link_existing_menu"),n().literal("layout_builder_page_selector"),n().literal("web_clipper"),n().literal("oauth"),n().literal("collection_group_value"),n().literal("collection_settings_source"),n().literal("collection_settings_select_relation_source"),n().literal("admin_search_permanently_deleted_pages"),n().literal("bot_iterate_blocks_in_space"),n().literal("api_unknown"),n().literal("simple_formula_value_page_search"),n().literal("automation_page_picker"),n().literal("automation_collection_picker"),n().literal("admin_content_search"),n().literal("ediscovery_search_api"),n().literal("admin_content_search_export"),n().literal("export_content_analytics"),n().literal("send_to_notion_database_options"),n().literal("send_to_notion_project_options"),n().literal("search_content_analytics"),n().literal("search_unique_id"),n().literal("collection_page_tree_query"),n().literal("assistant_scoped_search_menu"),n().literal("assistant_search_databases"),n().literal("admin_tool_search_as_user"),n().literal("admin_tool_search_eval"),n().literal("debugging"),n().literal("report_bad_search"),n().literal("benchmark_tests"),n().literal("audit_log"),n().literal("ui_doc"),n().literal("unified_find_deep_dive"),n().literal("legal_hold_pages_search"),n().literal("ai_block_v2_page_context_search")]),h=n().union([n().literal("bulk_index_records")]),_=n().union([n().literal("permanently_delete_space")]),b=(n().union([v,h,_]),["lastEdited","created","scroll","id",...Object.keys({pageViewsLast7Days:"pageViews.pageViewsLast7Days",pageViewsLast28Days:"pageViews.pageViewsLast28Days",pageViewsLast90Days:"pageViews.pageViewsLast90Days",pageViewsAllTime:"pageViews.pageViewsAllTime",uniquePageViewsLast7Days:"uniquePageViews.uniquePageViewsLast7Days",uniquePageViewsLast28Days:"uniquePageViews.uniquePageViewsLast28Days",uniquePageViewsLast90Days:"uniquePageViews.uniquePageViewsLast90Days",uniquePageViewsAllTime:"uniquePageViews.uniquePageViewsAllTime"})]),y=n().object({required:{field:n().literals("relevance")},optional:{}}),S=n().object({required:{field:n().literals(...b),direction:n().literals("asc","desc")},optional:{missing:n().union([n().literal("_first"),n().literal("_last"),n().number(),n().boolean(),n().string()]),searchAfter:n().undefinable(n().union([n().number(),n().string()]))}}),w=n().union([y,S]);let k=function(e){return e.Local="local",e.ElasticSearch="es",e.Postgres="pg",e.VectorDBBlock="vector_block",e.VectorDBCollection="vector_collection",e.ElasticsearchRandom="es_random",e.ElasticsearchUniqueID="es_uniqueId",e.ElasticsearchForcedRecentRecall="es_forced_recent_recall",e.NotionUnknown="notion_unknown",e.UniversalUnknown="universal_unknown",e}({});const I=["spacePage","recentVisit","bookmarkedPage","sharedPage","frecencyStore","teamPage","defaultRecordCache","unknown","similarUser1dRecentPages","topPages7dPageView","editedPages1d","similarUsersEditedPages1d"],C=(0,o(788860).vU)({popularThisWeek:{defaultMessage:"Popular this week",id:"search.result.popularThisWeek.badge.text"},mostViewed:{defaultMessage:"Most viewed",id:"search.result.mostViewed.badge.text"},verified:{defaultMessage:"Verified",id:"search.result.verified.badge.text"},verifiedExpired:{defaultMessage:"Verification Expired",id:"search.result.verifiedExpired.badge.text"},template:{defaultMessage:"Template",id:"search.result.template.badge.text"}}),x={RequestFailed:{type:"RequestFailed",message:"Something went wrong."},NoResults:{type:"NoResultsFound",message:"No results found."},Offline:{type:"Offline",message:"Go online for more results."}},T="gzkNfoUU",M=`<${T}>`,P=`</${T}>`},429892:(e,t,o)=>{o.d(t,{GL:()=>a,Of:()=>s,ln:()=>l,tL:()=>r,uP:()=>d,yR:()=>c});var n=()=>o(326966),i=()=>o(646574);const r={days:n().Lq,years:n().yx},a=10*r.years,s=1*r.days;function l(e){return e&&e%r.years==0?"years":"days"}function c(e,t){return e?Math.ceil(e/r[t]):30}function d(e,t){const o=l(e),n={[o]:c(e,o)};return(0,i().IV)(n,t)}},654737:(e,t,o)=>{o.d(t,{Ey:()=>b,G8:()=>S,Hd:()=>l,In:()=>_,LT:()=>s,Ou:()=>y,S3:()=>n,St:()=>g,r8:()=>v,vl:()=>h,yC:()=>a});o(241792),o(398858),o(461318),o(33228);const n={local:"http://localhost:3008",development:"https://integrations-api-dev.notion.com",staging:"https://integrations-api-stg.notion.com",production:"https://integrations-api.notion.com"},i={local:"http://localhost:3000/sip",development:"https://dev.notion.so/sip",staging:"https://stg.notion.so/sip",production:"https://notion.so/sip"},r="/install";function a(e){const{env:t,isServerIntegrationsProxyEnabled:o,integrationPath:a}=e;return`${(o?i:n)[t]}${a}${r}`}const s="/salesforce",l="/user",c="/slack",d="/github",u="/zendesk",p="/jira-data-center",m="/gmail",f="/google-contacts";function g(e,t){return a({env:e,isServerIntegrationsProxyEnabled:t,integrationPath:c})}function v(e,t){return a({env:e,isServerIntegrationsProxyEnabled:t,integrationPath:d})}function h(e,t){return a({env:e,isServerIntegrationsProxyEnabled:t,integrationPath:u})}function _(e,t){return a({env:e,isServerIntegrationsProxyEnabled:t,integrationPath:p})}function b(e,t){return a({env:e,isServerIntegrationsProxyEnabled:t,integrationPath:m})}function y(e,t){return a({env:e,isServerIntegrationsProxyEnabled:t,integrationPath:f})}const S={SECURE_EXTERNAL_PREVIEW:"/preview",APP_AUTHORIZE:"/app/authorize",AUTH_AUTHORIZE:"/auth/authorize"}},226042:(e,t,o)=>{o.d(t,{D:()=>a,T:()=>r});var n=()=>o(513670),i=()=>o(578292);const r="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";function a(e,t){if(n().HD(e))return e;{const o=e[t];return void 0!==o?o:e[i().al]}}},293338:(e,t,o)=>{o.d(t,{$e:()=>d,TQ:()=>c,UF:()=>a,my:()=>l,p_:()=>r});o(267602),o(470928),o(30005),o(398858),o(461318),o(33228);var n=()=>o(225771),i=()=>o(530980);const r=8,a=70,s=1e3;(0,o(788860).vU)({member:{id:"sharedContextualInviteHelpers.member.inviteMessage2",defaultMessage:"{userName} shared a page {pageName} with you."},guest:{id:"sharedContextualInviteHelpers.guest.inviteMessage2",defaultMessage:"Accept {userName}{userNameEndsWithS, select, true {â€™} other {â€™s}} invite to view {pageName}."},default:{id:"sharedContextualInviteHelpers.default.inviteMessage",defaultMessage:"Your invitation message"},optional:{id:"sharedContextualInviteHelpers.default.inviteMessagePrefix",defaultMessage:"Optional message..."}});function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;if(!e)return"";const o=n().s(e,"url");let i=e.slice();return o.forEach(((e,t)=>{i=i.replace(e.value,"[link]")})),i.length>t&&(i=`${i.substring(0,t)}...`),i}function c(e){if(!e)return!1;return n().s(e,"url").length>0}function d(e,t){var o;const n=null===(o=i().kk5.fromValue("block",e).getPermissionItems())||void 0===o?void 0:o.find((e=>"user_permission"===e.type&&e.user_id===t.invited_user_id));if(n&&"invite_id"in n)return n.invite_id}},768370:(e,t,o)=>{function n(e){return e?"shift+command+j":"shift+ctrl+j"}o.d(t,{F:()=>n})},657120:(e,t,o)=>{o.d(t,{BD:()=>I,CJ:()=>m,Ci:()=>v,DI:()=>g,FN:()=>C,HS:()=>p,TZ:()=>_,XO:()=>d,XR:()=>h,ZQ:()=>b,e5:()=>u,hU:()=>f,nB:()=>x,nV:()=>k,zx:()=>T});var n=()=>o(696459),i=()=>o(916673),r=()=>o(235484),a=()=>o(933868),s=()=>o(572680),l=()=>o(458196),c=()=>o(657169);function d(e,t,o){return!e||!t||!(0,a().zz)(t)||o}function u(e){let{groupId:t,spaceId:o,userId:n}=e;return{command:"set",pointer:(0,c().Ss)({userId:n,spacePermissionGroupId:t,spaceId:o}),path:[],args:{id:(0,c().ed)({userId:n,spacePermissionGroupId:t,spaceId:o}),space_permission_group_id:t,user_id:n,space_id:o}}}function p(e){let{spaceId:t,groupId:o,args:n}=e;return{command:"set",pointer:(0,l().iA)({spacePermissionGroupId:o,spaceId:t}),path:[],args:{id:(0,l().L9)({spacePermissionGroupId:o,spaceId:t}),group_id:o,space_id:t,created_at:Date.now(),name:l().Dq,...n}}}function m(e){const t=null==e?void 0:e.integration_restrictions;return"approved_only"===t||"approved_or_built_by_notion"===t}function f(e){const{spaceBotSettings:t,integrationId:o,env:n}=e;return!t||(!m(t)||(!(!t.integration_approval_statuses||!t.integration_approval_statuses[o])||!("approved_or_built_by_notion"!==t.integration_restrictions||!(0,r().BP)({integrationId:o,env:n}))))}const g=(0,n().AO)((e=>e&&"personal_external_transfer"===e.type&&"completed"!==e.status?{true:e}:{false:e})),v=(0,n().AO)((e=>e&&"organization_personal_external_transfer"===e.type&&"completed"!==e.status?{true:e}:{false:e})),h=(0,n().AO)((e=>e&&"team_claim_upgrade"===e.type&&"requested"===e.status?{true:e}:{false:e})),_=((0,n().AO)((e=>e&&"organization_claiming_space"===e.type&&"requested"===e.status?{true:e}:{false:e})),(0,n().AO)((e=>{if(!e||"domain_claim_space_deletion"!==e.type)return{false:e};switch(e.status){case"started":return{true:e};case"canceled":return{false:e}}}))),b=(0,n().AO)((e=>{if(!e||"organization_domain_claim_space_deletion"!==e.type)return{false:e};switch(e.status){case"started":return{true:e};case"canceled":return{false:e}}})),y=((0,n().AO)((e=>y(e)||S(e)||w(e)?{true:e}:{false:e})),(0,n().AO)((e=>{if(!e||"space_content_duplication"!==e.type)return{false:e};switch(e.status){case"started":return{true:e};case"failed_with_closed_source":case"failed":case"completed":case"dry_run_completed":case"pending_deletion":return{false:e}}}))),S=(0,n().AO)((e=>{if(!e||"space_content_duplication"!==e.type)return{false:e};switch(e.status){case"completed":return{true:e};case"dry_run_completed":case"failed":case"started":case"failed_with_closed_source":case"pending_deletion":return{false:e}}})),w=((0,n().AO)((e=>{if(!e||"space_content_duplication"!==e.type)return{false:e};switch(e.status){case"pending_deletion":return{true:e};case"dry_run_completed":case"failed":case"started":case"failed_with_closed_source":case"completed":return{false:e}}})),(0,n().AO)((e=>{if(!e||"space_content_duplication"!==e.type)return{false:e};switch(e.status){case"failed_with_closed_source":return{true:e};case"dry_run_completed":case"failed":case"started":case"completed":case"pending_deletion":return{false:e}}}))),k=(0,n().AO)((e=>{if(!e||"space_content_duplication"!==e.type)return{false:e};switch(e.status){case"failed_with_closed_source":case"started":case"completed":case"pending_deletion":return{true:e};case"dry_run_completed":case"failed":return{false:e}}}));function I(e){const{spaceId:t,baseUrl:o}=e,n=(0,s().Xs)({route:{name:"space",spaceId:t,spaceDomain:void 0,requestedOnPublicDomain:void 0,searchQuery:void 0,searchRequest:void 0}});return(0,i().O_)({relativeUrl:n,baseUrl:o})}function C(e){return"none"===e.role}function x(e){return"none"!==e.role}function T(e){const t=M.exec(e);if(t&&t[1])return parseInt(t[1],16).toString()}const M=new RegExp("^v2_([a-fA-F0-9]{1,10})[a-fA-F0-9]{40}$")},767751:(e,t,o)=>{o.d(t,{Z:()=>r});var n=()=>o(149310);const i=["adClick","fbp"];const r=new class{constructor(e,t){this.localStorageStore=void 0,this.localStorageStore=new(n().ZP)({namespace:e,important:t,trackingType:"targeting"})}get(e){return this.localStorageStore.get(e)}set(e,t){return this.localStorageStore.set(e,t)}remove(e){return this.localStorageStore.remove(e)}removeAllIfNoPermission(){this.localStorageStore.hasPermissionForTrackingType||i.forEach((e=>this.remove(e)))}}(n().$p,!1)},694050:(e,t,o)=>{o.d(t,{Z:()=>r});o(267602),o(653476),o(30005);var n=()=>o(149310);const i=["sourceInitialPage"];const r=new class{constructor(e,t){this.localStorageStore=void 0,this.localStorageStore=new(n().ZP)({namespace:e,important:t,trackingType:"performance"})}get(e){let{userId:t,key:o}=e;return this.localStorageStore.get((0,n().dq)(t,o))}set(e){let{userId:t,key:o,value:i}=e;return this.localStorageStore.set((0,n().dq)(t,o),i)}remove(e){let{userId:t,key:o}=e;return this.localStorageStore.remove((0,n().dq)(t,o))}removeAllIfNoPermission(){const{namespace:e,hasPermissionForTrackingType:t}=this.localStorageStore;if(t)return;const o=`${n().eg}${e}:`;Object.keys(localStorage).filter((e=>e.startsWith(o))).filter((e=>{const[t,o,n,r]=e.split(":");return r&&i.includes(r)})).forEach((e=>localStorage.removeItem(e)))}}(n().TA,!1)},161428:(e,t,o)=>{o.d(t,{Jg:()=>i,tA:()=>r});var n=()=>o(381348);const i=["student","personal","plus","business","enterprise"];class r{constructor(e){this.lastVersion=void 0,this.externalId=void 0,this.product=void 0,this.billingInterval=void 0,this.unitAmount=void 0,this.state=void 0,this.externalId=e.external_id,this.product=e.product,this.billingInterval=e.billing_interval,this.unitAmount=o(948505).n.fromValue({amount:e.unit_amount,currencyCode:e.currency}),this.state=e.state}get currencyCode(){return this.unitAmount.currencyCode}getMonthlyUnitCost(e){const t=this.getAdjustedUnitAmount(e);return"year"===this.billingInterval?t.withDividedAmount(12):t}getMonthlyCost(e){const{quantity:t,offer:o}=e;return this.getMonthlyUnitCost(o).withMultipliedAmount(t)}getCostPerBillingInterval(e){const{quantity:t,offer:o}=e;return this.getAdjustedUnitAmount(o).withMultipliedAmount(t)}getDiscountPerBillingInterval(e){var t;const{quantity:i,coupon:r,promo:a}=e,s=this.unitAmount.withMultipliedAmount(i),l=r?(0,n().Ef)((0,o(893146).I8)(r)):void 0;if(r&&this.doesOfferApply(l))return s.withMultipliedAmount((0,n().ZN)(r));let c=0;return null!=a&&a.percent_off&&null!==(t=a.applies_to)&&void 0!==t&&t.includes(this.externalId)&&(c=a.percent_off/100),s.withMultipliedAmount(c)}getAdjustedUnitAmount(e){let t=1;return e&&this.doesOfferApply(e)&&(t=1-(0,n().ek)(e,"decimal_number")),this.unitAmount.withMultipliedAmount(t)}doesOfferApply(e){if(!e)return!1;const t=e.campaign;switch(this.product){case"ai":return"ai_fifty_percent_upgrade"===t||"new_year_2025"===t;case"free":case"student":case"personal":case"sites_custom_hostnames":return!1;case"plus":return"month"===this.billingInterval?["team_three_months","resurrection_offer","lic_25","lic_50"].includes(t):["lic_25","lic_50","team_annual"].includes(t);case"business":return"month"===this.billingInterval?["lic_25","lic_50","business_three_months"].includes(t):["lic_25","lic_50"].includes(t);case"enterprise":return["business_three_months","business_annual"].includes(t);default:(0,o(696459).t1)(this.product)}}}},255393:(e,t,o)=>{o.d(t,{E3:()=>s,Qv:()=>l,Rt:()=>r,YD:()=>a,de:()=>c,gV:()=>i,lX:()=>d,vU:()=>u});o(821057),o(267602),o(470928),o(228244);var n=()=>o(431595);const i=["ai","sites_custom_hostnames"],r=["ai_add_on_employee_discount_monthly","ai_add_on_employee_discount_yearly"],a=["ai_add_on_standard_sales_assisted","ai_add_on_standard_sales_assisted_eur","ai_add_on_standard_sales_assisted_gbp","ai_add_on_standard_sales_assisted_jpy","ai_add_on_standard_sales_assisted_krw","ai_add_on_employee_discount_monthly","ai_add_on_employee_discount_yearly","ai_add_on_marketing_discount_monthly","ai_add_on_marketing_discount_yearly","sites_custom_hostnames_add_on_sales_assisted_gbp","sites_custom_hostnames_add_on_sales_assisted_usd","sites_custom_hostnames_add_on_sales_assisted_eur","sites_custom_hostnames_add_on_sales_assisted_jpy","sites_custom_hostnames_add_on_sales_assisted_krw","ai_add_on_standard_trial_monthly_usd","ai_add_on_standard_trial_yearly_usd","ai_add_on_standard_trial_monthly_eur","ai_add_on_standard_trial_yearly_eur","ai_add_on_standard_trial_monthly_gbp","ai_add_on_standard_trial_yearly_gbp","ai_add_on_standard_trial_monthly_jpy","ai_add_on_standard_trial_yearly_jpy","ai_add_on_standard_trial_monthly_krw","ai_add_on_standard_trial_yearly_krw",...["ai_add_on_standard_monthly_10","ai_add_on_standard_monthly_eur","ai_add_on_standard_monthly_gbp","ai_add_on_standard_monthly_jpy","ai_add_on_standard_monthly_krw","ai_add_on_standard_yearly_96","ai_add_on_standard_yearly_eur","ai_add_on_standard_yearly_gbp","ai_add_on_standard_yearly_jpy","ai_add_on_standard_yearly_krw","sites_custom_hostnames_add_on_monthly_usd","sites_custom_hostnames_add_on_yearly_usd","sites_custom_hostnames_add_on_monthly_eur","sites_custom_hostnames_add_on_yearly_eur","sites_custom_hostnames_add_on_monthly_gbp","sites_custom_hostnames_add_on_yearly_gbp","sites_custom_hostnames_add_on_monthly_jpy","sites_custom_hostnames_add_on_yearly_jpy","sites_custom_hostnames_add_on_monthly_krw","sites_custom_hostnames_add_on_yearly_krw"]];function s(e){return!!e&&e.length>0}function l(e){return i.some((t=>t===e))}function c(e){return!!e&&e.some((e=>"ai"===e.feature))}function d(e){return e===n().um}class u extends Error{constructor(e){super(e),this.name="PaymentRequiredError"}}},629719:(e,t,o)=>{o.d(t,{oh:()=>M,IK:()=>F,Et:()=>re,xi:()=>H,PB:()=>ne,BU:()=>J,F6:()=>j,a7:()=>V,Xp:()=>K,KU:()=>X,Hw:()=>U,bs:()=>R,ry:()=>E,zt:()=>O,gy:()=>ee,TK:()=>te,KX:()=>L,ps:()=>Z,CF:()=>Y,ri:()=>ie,Rd:()=>P,YK:()=>B,FG:()=>A,CO:()=>N,tw:()=>W,H6:()=>q,dK:()=>Q,A:()=>z,h_:()=>G,uD:()=>$,iv:()=>T,Lg:()=>x});o(821057),o(267602),o(916054),o(653476),o(470928),o(241792),o(228244);var n=()=>o(730120),i=()=>o(513670),r=()=>o(696459),a=()=>o(326966),s=()=>o(750737),l=()=>o(255393);const c={revenueCatProductIds:["notion.id.personal_pro_monthly","notion.local.id.personal_pro_monthly","notion.dev.id.personal_pro_monthly","notion.stg.id.personal_pro_monthly"],store:"app_store",original_purchase_date_before:n().ou.utc(2024,10,14),original_purchase_date_after:void 0,prices:[{externalId:"notion.id.personal_pro_monthly",billingInterval:"month",product:"personal",state:"current",unitAmount:{currencyCode:"USD",amount:499}}]},d={revenueCatProductIds:["notion.id.personal_pro_yearly","notion.local.id.personal_pro_yearly","notion.dev.id.personal_pro_yearly","notion.stg.id.personal_pro_yearly"],store:"app_store",original_purchase_date_before:n().ou.utc(2024,10,14),original_purchase_date_after:void 0,prices:[{externalId:"notion.id.personal_pro_yearly",billingInterval:"year",product:"personal",state:"current",unitAmount:{currencyCode:"USD",amount:4799}}]},u={revenueCatProductIds:["notion.id.personal_pro_monthly","notion.local.id.personal_pro_monthly","notion.dev.id.personal_pro_monthly","notion.stg.id.personal_pro_monthly"],store:"app_store",original_purchase_date_before:void 0,original_purchase_date_after:n().ou.utc(2024,10,14),prices:[{externalId:"notion.id.personal_pro_monthly",billingInterval:"month",product:"personal",state:"current",unitAmount:{currencyCode:"USD",amount:1199}}]},p={revenueCatProductIds:["notion.id.ai_monthly","notion.local.id.ai_monthly","notion.dev.id.ai_monthly","notion.stg.id.ai_monthly"],store:"app_store",original_purchase_date_before:void 0,original_purchase_date_after:void 0,prices:[{externalId:"notion.id.ai_monthly",billingInterval:"month",product:"ai",state:"current",unitAmount:{currencyCode:"USD",amount:999}}]},m={revenueCatProductIds:["notion.id.personal_pro_yearly","notion.local.id.personal_pro_yearly","notion.dev.id.personal_pro_yearly","notion.stg.id.personal_pro_yearly"],store:"app_store",original_purchase_date_before:void 0,original_purchase_date_after:n().ou.utc(2024,10,14),prices:[{externalId:"notion.id.personal_pro_yearly",billingInterval:"year",product:"personal",state:"current",unitAmount:{currencyCode:"USD",amount:11999}}]},f={revenueCatProductIds:["notion.id.ai_yearly","notion.local.id.ai_yearly","notion.dev.id.ai_yearly","notion.stg.id.ai_yearly"],store:"app_store",original_purchase_date_before:void 0,original_purchase_date_after:void 0,prices:[{externalId:"notion.id.ai_yearly",billingInterval:"year",product:"ai",state:"current",unitAmount:{currencyCode:"USD",amount:9599}}]},g={revenueCatProductIds:["notion.id.personal_plus:monthly","notion.local.id.personal_plus:monthly","notion.dev.id.personal_plus:monthly","notion.stg.id.personal_plus:monthly"],store:"play_store",original_purchase_date_before:void 0,original_purchase_date_after:void 0,prices:[{externalId:"notion.id.personal_plus:monthly",billingInterval:"month",product:"personal",state:"current",unitAmount:{currencyCode:"USD",amount:1199}}]},v={revenueCatProductIds:["notion.id.ai:monthly","notion.local.id.ai:monthly","notion.dev.id.ai:monthly","notion.stg.id.ai:monthly"],store:"play_store",original_purchase_date_before:void 0,original_purchase_date_after:void 0,prices:[{externalId:"notion.id.ai:monthly",billingInterval:"month",product:"ai",state:"current",unitAmount:{currencyCode:"USD",amount:999}}]},h={revenueCatProductIds:["notion.id.personal_plus:yearly","notion.id.personal_plus:yearly-2","notion.local.id.personal_plus:yearly","notion.dev.id.personal_plus:yearly","notion.stg.id.personal_plus:yearly"],store:"play_store",original_purchase_date_before:void 0,original_purchase_date_after:void 0,prices:[{externalId:"notion.id.personal_plus:yearly",billingInterval:"year",product:"personal",state:"current",unitAmount:{currencyCode:"USD",amount:11999}}]},_={revenueCatProductIds:["notion.id.ai:yearly","notion.local.id.ai:yearly","notion.dev.id.ai:yearly","notion.stg.id.ai:yearly"],store:"play_store",original_purchase_date_before:void 0,original_purchase_date_after:void 0,prices:[{externalId:"notion.id.ai:yearly",billingInterval:"year",product:"ai",state:"current",unitAmount:{currencyCode:"USD",amount:9599}}]},b={revenueCatProductIds:["notion.id.plus_ai_monthly","notion.local.id.plus_ai_monthly","notion.dev.id.plus_ai_monthly","notion.stg.id.plus_ai_monthly"],store:"app_store",original_purchase_date_before:void 0,original_purchase_date_after:void 0,prices:u.prices.concat(p.prices)},y={revenueCatProductIds:["notion.id.plus_ai_yearly","notion.local.id.plus_ai_yearly","notion.dev.id.plus_ai_yearly","notion.stg.id.plus_ai_yearly"],store:"app_store",original_purchase_date_before:void 0,original_purchase_date_after:void 0,prices:m.prices.concat(f.prices)},S={revenueCatProductIds:["notion.id.plus_ai:monthly","notion.local.id.plus_ai:monthly","notion.dev.id.plus_ai:monthly","notion.stg.id.plus_ai:monthly"],store:"play_store",original_purchase_date_before:void 0,original_purchase_date_after:void 0,prices:g.prices.concat(v.prices)},w={revenueCatProductIds:["notion.id.plus_ai:yearly","notion.local.id.plus_ai:yearly","notion.dev.id.plus_ai:yearly","notion.stg.id.plus_ai:yearly"],store:"play_store",original_purchase_date_before:void 0,original_purchase_date_after:void 0,prices:h.prices.concat(_.prices)},k=[p,f,v,_,c,d,u,m,g,h,b,y,S,w];var I=()=>o(161428),C=()=>o(681941);function x(e){return e.subscription?e.subscription.pending?{...e.subscription.pending,trialEnd:void 0}:e.subscription:{items:[],trialEnd:void 0}}function T(e){return e.subscription??{trialEnd:void 0,items:[]}}function M(e){let t;return t="free"===e||"personal_free"===e||"team_free"===e?void 0:{quantity:0,price:{externalId:"DANGEROUS__toFakeSubscriptionStateFromSubscriptionTier externalId",product:e,billingInterval:"month",unitAmount:{amount:0,currencyCode:"USD"},state:"current"}},{trialEnd:void 0,items:(0,i().oA)([t])}}function P(e){return((null==e?void 0:e.items)??[]).some((e=>s().Sf.includes(e.price.externalId)))}function A(e){return Boolean((null==e?void 0:e.trialEnd)&&e.trialEnd.diffNow().milliseconds>0)}function R(e){if(!e)return;const[t,o]=(0,i().uK)(e.items,(e=>oe(e.price.externalId))),n=(0,a().Wo)(t.map((e=>e.price.unitAmount.currencyCode)),"All subscription items should have the same currency code.");return(0,a().Wo)(o.map((e=>e.price.unitAmount.currencyCode)),"All subscription items should have the same currency code.")??n}function B(e){return!!e&&e.items.length>0}function E(e){const{logFunction:t,spaceId:o,subscriptionState:n}=e,r=D(n),a=(0,i().jj)(Object.values(r));if(a.length>1)throw t({level:"error",from:"billingSeatHelpers",type:"InaccurateSeatQuantity",data:{miscDataToConvertToString:{spaceId:o,subscriptionState:JSON.stringify(n,null,2)}}}),new Error("With the exception of the sites_custom_hostnames add-on, all subscription items should have the same quantity.");return a[0]}function D(e){return e?Object.fromEntries(e.items.filter((e=>"seats"===(0,C().Lj)(e.price.product))).map((e=>[e.price.externalId,e.quantity]))):{}}function U(e){if(!e)return;const[t,o]=(0,i().uK)(e.items,(e=>oe(e.price.externalId))),n=(0,a().Wo)(t.map((e=>e.price.billingInterval)),"All subscription items should have the same billing interval.");return(0,a().Wo)(o.map((e=>e.price.billingInterval)),"All subscription items should have the same billing interval.")??n}function F(e,t){if(!e.subscription)return t;const o=U(e.subscription);if(!o)return t;let i=e.subscription.currentPeriodEnd;const r="month"===o?n().nL.fromObject({month:1}):n().nL.fromObject({year:1}),a=n().nL.fromObject({hour:2});for(;t>i.plus(a);)i=i.plus(r);return i}function N(e){return!!e&&e.items.every((e=>0===e.price.unitAmount.amount))}function V(e,t){return((null==e?void 0:e.items)??[]).find((e=>W(e)===t))}function L(e){return"free"!==O(e)}function O(e){const t=V(e,"plan");return(null==t?void 0:t.price.product)??"free"}function Z(e,t){return K(e).includes(t)}function j(e){var t;return null===(t=V(e,"plan"))||void 0===t?void 0:t.price.externalId}function K(e){return((null==e?void 0:e.items)??[]).map((e=>e.price.product))}function z(e){return K(e).some((e=>"seats"===(0,C().Lj)(e)))}function H(e){const t=function(e){const t=(null==e?void 0:e.items)??[];return(0,i().oA)(t.map((e=>(0,r().DE)(l().gV,e.price.product)?{price:{product:e.price.product}}:void 0)))}(e);return t.map((e=>e.price.product))}function q(e){if(e)return l().Qv(e.price.product)?void 0:e.price.product}function W(e){return G(e.price.product)}function G(e){return l().Qv(e)?e:"plan"}function $(e){return new(I().tA)({external_id:e.externalId,product:e.product,billing_interval:e.billingInterval,currency:e.unitAmount.currencyCode,unit_amount:e.unitAmount.amount,state:"current"})}function Q(e,t){return(0,a().UV)(e,(e=>W(e)),t,(e=>W(e)))}function Y(e){return"stripe"===(null==e?void 0:e.provider)||"mixed"===(null==e?void 0:e.provider)}function J(e){let{billingData:t,canUpdateBilling:o}=e;return o&&"stripe"===(null==t?void 0:t.provider)}function X(e){if(e)return"stripe"===e.provider||"mixed"===e.provider?e.externalId:void 0}function ee(e){return"app_store"===(null==e?void 0:e.provider)||"play_store"===(null==e?void 0:e.provider)||"mixed"===(null==e?void 0:e.provider)}function te(e){return Boolean("app_store"===(null==e?void 0:e.provider)||"play_store"===(null==e?void 0:e.provider))}function oe(e){return k.some((t=>t.prices.some((t=>t.externalId===e))))}function ne(e){return null!=e&&e.clock.externalId?e.clock.now:n().ou.now()}function ie(e){var t;return"verifying"===(null==e||null===(t=e.paymentMethod)||void 0===t?void 0:t.trustLevel)}function re(e,t){return((null==e?void 0:e.accountBalances)??[]).find((e=>e.currencyCode===t))??{amount:0,currencyCode:t}}},976102:(e,t,o)=>{o.d(t,{AI:()=>c,Zl:()=>s,_D:()=>a,dK:()=>u,dP:()=>d,pc:()=>p,t4:()=>l});o(821057),o(267602),o(653476),o(470928),o(241792),o(228244);var n=()=>o(326966),i=()=>o(629719),r=()=>o(122792);function a(e,t){return u(e.items,t.items).some((e=>{let[t,o]=e;return function(e,t){if(!e)return!1;if(!t)return!0;const o=i().H6(e),n=i().H6(t);if(!o||!n)return!1;return r().rC[o]>r().rC[n]}(t,o)}))}function s(e,t,o){let{trialEnd:n,items:i}=t;const r=i.map((t=>{const n=t.price.product,i=t.price.unitAmount.currencyCode,r=function(e,t){let{interval:o,product:n,currency:i}=t;const r=e.find((e=>e.product===n&&e.billingInterval===o&&e.unitAmount.currencyValue.currencyCode===i));return m(r,`Unable to find price with interval: ${o}, product: ${n}, currency: ${i}`)}(e,{interval:o,product:n,currency:i});return{...t,price:r}}));return{trialEnd:n,items:r}}function l(e,t){const o=e.items.filter((e=>i().tw(e)!==t));return{...e,items:o}}function c(e,t){const o=e.items.filter((e=>i().tw(e)!==i().tw(t)));return{...e,items:o.concat([t])}}function d(e,t,o){const{product:n,interval:r,currency:a}=o,s=function(e){if("personal_free"===e||"team_free"===e)return"free";return e}(n),l=t.items.filter((e=>i().tw(e)!==i().h_(s))),c=function(e,t){let{interval:o,product:n,currency:i}=t;const r=e.find((e=>e.price.product===n&&e.price.billingInterval===o&&e.price.unitAmount.currencyValue.currencyCode===i));return m(r,`Unable to find price with interval: ${o}, product: ${n}, currency: ${i}`)}(e,{interval:r,product:s,currency:a});return{...t,items:l.concat([c])}}function u(e,t){return(0,n().UV)(e,(e=>i().tw(e)),t,(e=>i().tw(e)))}function p(e){const{prices:t,billingData:o,product:n}=e,r=i().bs(o.subscription),a=i().Lg(o),s=i().Hw(a),l=i().Hw(o.subscription),c=s??l;return t.find((e=>e.product===n&&e.billingInterval===c&&e.unitAmount.currencyValue.currencyCode===r))}function m(e,t){if(null==e)throw new Error(t);return e}},948505:(e,t,o)=>{o.d(t,{n:()=>n});o(821057),o(267602),o(653476),o(731107),o(228244);class n{static fromValue(e){const{amount:t,currencyCode:i}=e,r=o(383802).X[i];if(!r)throw new Error(`Unsupported currency code: ${i}`);return new n(r,t)}static sum(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];const i=t.filter((e=>void 0!==e));if(0===i.length)return;const{currencyCode:r}=i[0];if(i.some((e=>e.currencyCode!==r)))throw new Error("Cannot add money with different currencies");const a=i.reduce(((e,t)=>e+t.amount),0);return n.fromValue({amount:a,currencyCode:r})}static zero(e){return n.fromValue({amount:0,currencyCode:e})}constructor(e,t){this.currencyValue=void 0,this.amount=void 0,this.currencyValue=e,this.amount=t}get currencyCode(){return this.currencyValue.currencyCode}toMoneyValue(){return{amount:this.amount,currencyCode:this.currencyValue.currencyCode}}withAmount(e){return new n(this.currencyValue,e)}withAddedAmount(e){return new n(this.currencyValue,this.amount+e)}plus(e){if(this.currencyCode!==e.currencyCode)throw new Error(`Cannot add money with currency code ${this.currencyCode} to money with currency code ${e.currencyCode}`);return new n(this.currencyValue,this.amount+e.amount)}minus(e){return this.plus(e.withMultipliedAmount(-1))}withMultipliedAmount(e){return new n(this.currencyValue,this.amount*e)}withDividedAmount(e){return new n(this.currencyValue,this.amount/e)}zeroIfNegative(){return new n(this.currencyValue,Math.max(0,this.amount))}zeroIfPositive(){return new n(this.currencyValue,Math.min(0,this.amount))}isPositive(){return this.amount>0}isNegative(){return this.amount<0}}},893146:(e,t,o)=>{o.d(t,{I8:()=>i,iQ:()=>r});o(267602),o(653476),o(241792);var n=()=>o(696459);function i(e){switch(e){case"ai_fifty_percent":return"ai_fifty_percent_upgrade";case"resurrection_offer":case"team_three_months":case"team_annual":case"business_annual":case"business_three_months":case"enterprise_three_months":case"enterprise_annual":case"lic_50":case"lic_25":case"new_year_2025":return e;default:(0,n().t1)(e)}}function r(e){const t=null==e?void 0:e.campaign;switch(t){case"team_three_months":case"team_annual":case"business_three_months":case"business_annual":case"enterprise_three_months":case"enterprise_annual":case"resurrection_offer":case"lic_25":case"lic_50":case"new_year_2025":return t;case"ai_fifty_percent_upgrade":case"ai_fifty_percent_downgrade":return"ai_fifty_percent";case"default":return}}},381348:(e,t,o)=>{o.d(t,{$v:()=>s,CF:()=>d,Ef:()=>p,Ib:()=>h,K0:()=>l,PG:()=>b,U_:()=>g,XU:()=>u,ZN:()=>c,b_:()=>m,e:()=>f,ek:()=>v,pp:()=>a,s6:()=>_});o(267602),o(653476),o(470928),o(731107);var n=()=>o(730120),i=()=>o(696459),r=()=>o(322735);function a(e){if(!e)return!1;switch(e){case"ai_fifty_percent":return!0;case"team_three_months":case"team_annual":case"business_three_months":case"business_annual":case"enterprise_three_months":case"resurrection_offer":case"enterprise_annual":case"new_year_2025":case"lic_25":case"lic_50":return!1;default:(0,i().t1)(e)}}function s(e){if(!e)return!1;switch(e){case"ai_fifty_percent":case"team_three_months":case"team_annual":case"business_three_months":case"business_annual":case"enterprise_three_months":case"enterprise_annual":return!0;case"new_year_2025":case"lic_25":case"lic_50":case"resurrection_offer":return!1;default:(0,i().t1)(e)}}function l(e){if(!e)return!1;return"resurrection_offer"===("string"==typeof e?e:e.campaign)}function c(e){switch(e){case"team_three_months":case"ai_fifty_percent":case"lic_50":case"resurrection_offer":case"new_year_2025":return.5;case"team_annual":case"business_three_months":case"business_annual":case"enterprise_three_months":case"enterprise_annual":return.1;case"lic_25":return.25;default:(0,i().t1)(e)}}function d(e,t,o){if(e&&t&&o)switch(e){case"team_three_months":case"team_annual":case"business_three_months":case"business_annual":case"enterprise_three_months":case"enterprise_annual":return;case"ai_fifty_percent":return"ai"===t;case"resurrection_offer":return"plus"===t&&"month"===o;case"lic_25":case"lic_50":return"plus"===t||"business"===t;case"new_year_2025":return"ai"===t&&"month"===o;default:(0,i().t1)(e)}}function u(e,t){const o=e.filter((e=>e.offer.type===t));if(0!==o.length)return 1===o.length?o[0]:o.reduce(((e,t)=>e.startDateMs>t.startDateMs?e:t))}function p(e){if(e)return r().Py.find((t=>t.campaign===e))}function m(e,t){const o=g(e);return Math.round(o.diff(t??n().ou.now(),"days").days)}function f(e){return n().nL.fromObject(e.duration)}function g(e){return n().ou.fromMillis(e.endDateMs)}function v(e,t){if(!e)return 0;if("coupon"!==e.type)return 0;const o="decimal_number"===t?.01:1;return e.percentOff*o}function h(e){return e&&"trial"===e.offer.type?e.offer.subscriptionTier:"plus"}function _(e){if(!e)return!1;const t=u(e,"coupon");return!!t&&t.endDateMs>Date.now()}function b(e){return g(e)>n().ou.now()}},681941:(e,t,o)=>{o.d(t,{$3:()=>i,KE:()=>s,Lj:()=>a,Md:()=>r,Vj:()=>l});o(241792);var n=()=>o(696459);const i=["free","plus","business","enterprise"],r=["team_monthly_10","team_yearly_96","plus_monthly_eur","plus_yearly_eur","plus_monthly_gbp","plus_yearly_gbp"];function a(e){switch(e){case"free":case"student":case"personal":case"plus":case"business":case"enterprise":case"ai":return"seats";case"sites_custom_hostnames":return"public_domain_custom_hostnames";default:(0,n().t1)(e)}}function s(e){switch(e){case"free":case"personal_free":case"team_free":return"free";case"student":case"personal":case"plus":case"business":case"enterprise":return e;default:(0,n().t1)(e)}}function l(e){const{prices:t,quantity:o,domainsQuantity:n}=e;return t.map((e=>"public_domain_custom_hostnames"===a(e.product)?{price:e,quantity:n??0}:{price:e,quantity:o}))}},320080:(e,t,o)=>{o.d(t,{P1:()=>a,Rb:()=>s,nR:()=>r,uN:()=>i});o(821057),o(670560),o(267602),o(470928);var n=()=>o(750737);function i(e,t){return t?t.percent_off?{amount:e*t.percent_off/100,monthsRemaining:t.duration_in_months}:t.amount_off?{amount:t.amount_off}:{amount:0}:{amount:0}}function r(e){return"personal"!==e&&n().tt.find((t=>t===e))}const a=["kr_card","kakao_pay"];function s(e){const{currency:t,isKrCardFeatureGateEnabled:o}=e,n=["card","link"];return"USD"===t&&n.push("cashapp"),"EUR"===t&&n.push("sepa_debit"),"KRW"===t&&o&&n.push(...a),n}},970381:(e,t,o)=>{o.d(t,{Q:()=>a,y:()=>l});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(241792);var n=()=>o(513670),i=()=>o(156642),r=()=>o(396136);function a(e,t,o){const i=[];return s(t({table:r().iU,id:e}),t,i,!0,new Set,o),n().jj(i)}function s(e,t,o,n,a,l){if(!e)return;if(a.has(e.id))return;if(a.add(e.id),e.isType(i().m3)&&(o.push(e.id),!l))return;const c=e.getType()===i().Ti.transclusionReference&&e.getTransclusionReferenceTargetPointer();c&&s(t(c),t,o,!1,a,l);if(l?n||!(0,i().S9)(e.getType())&&(0,i().Um)(e.getType(),e.getFormat())&&e.hasContent():(n||e.getType()===i().Ti.columnList||e.getType()===i().Ti.column||e.getType()===i().Ti.transclusionContainer||e.getType()===i().Ti.callout)&&e.hasContent())for(const i of e.getContentIds())s(t({table:r().iU,id:i}),t,o,!1,a,l)}function l(e){const{headerBlockId:t,headerBlockIds:o,index:a,getRecordModel:s}=e,l=s({table:r().iU,id:t});if(!l)return 0;const c=l.getType(),d=n().oA(o.map((e=>s({table:r().iU,id:e}))));if(c===i().Ti.header)return 0;const u=n().qr(d,((e,t)=>t<a&&e.getType()===i().Ti.header));if(c===i().Ti.subHeader)return u>=0?1:0;const p=n().qr(d,((e,t)=>t<a&&e.getType()===i().Ti.subHeader));return u>=0&&p>u?2:u>=0||p>=0?1:0}},346249:(e,t,o)=>{function n(e){return!e.attributes.purchase_url&&s(e)}function i(e){return function(e){return Boolean(e.attributes.checkout_enabled)&&a(e)}(e)||n(e)}function r(e){return Boolean(e.attributes.purchase_url)&&!Boolean(e.attributes.checkout_enabled)}function a(e){return void 0!==e.price&&e.price>0}function s(e){return void 0===e.price||0===e.price}o.d(t,{$q:()=>r,ZI:()=>a,e_:()=>i,ne:()=>n})},896174:(e,t,o)=>{o.d(t,{Hl:()=>r,Sl:()=>i});var n=()=>o(696459);function i(e,t){if(!(0,n().$K)(t)||"production"===e)return t;const o=`notion-${e}-`;return t.startsWith(o)?t:`${o}${t}`}function r(e){return e&&e.startsWith("//")?`https:${e}`:e}},98934:(e,t,o)=>{o.d(t,{G:()=>r,H:()=>i});o(241792);var n=()=>o(578292);function i(e,t){return e.map((e=>r(e,t)))}function r(e,t){const{nameMessage:o,descriptionMessage:i,...r}=e,{rootId:a,previewRootId:s,spaceId:l}=function(e,t){const o=(0,n().E2)(t);return e.sources[o]||e.sources[n().al]}(e,t);return{...r,id:o.id,rootId:a,previewRootId:s,name:t.formatMessage(o),spaceId:l,description:i?t.formatMessage(i):void 0}}},921787:(e,t,o)=>{o.d(t,{EY:()=>C,I$:()=>T,M2:()=>R,RW:()=>M,Uw:()=>x,ZB:()=>k,iV:()=>a,uw:()=>A,z6:()=>P});o(241792),o(398858),o(461318),o(33228);var n=()=>o(513670),i=()=>o(916673),r=()=>o(163262);const a={headers:{authorization:{prefix:"Bearer"},hmac:!1},body:{path:["event"]},urlValidator:function(e){return Boolean((0,i().yn)(e))}},s=(0,o(788860).vU)({nightfall:{id:"temporaryWebhookIntegrationConfig.taglines.nightfall",defaultMessage:"Simplify security and compliance with Nightfall AI"},panther:{id:"temporaryWebhookIntegrationConfig.taglines.panther",defaultMessage:"A SIEM built for speed, scale, and flexibility"},sumologic:{id:"temporaryWebhookIntegrationConfig.taglines.sumologic",defaultMessage:"Secure and protect against modern threats with cloud-native log analytics"},runreveal:{id:"temporaryWebhookIntegrationConfig.taglines.runreveal",defaultMessage:"A SIEM you can love"},splunk:{id:"temporaryWebhookIntegrationConfig.taglines.splunk",defaultMessage:"The unified security and observability platform"},datadog:{id:"temporaryWebhookIntegrationConfig.taglines.datadog",defaultMessage:"Detect, investigate, and automate response to threats at any scale"},polymer:{id:"temporaryWebhookIntegrationConfig.taglines.polymer",defaultMessage:"Protect sensitive data across cloud apps and reduce the risk of exposure"},onna:{id:"temporaryAdminIntegrationConfig.taglines.onna",defaultMessage:"Connect. Find. Act."},hanzo:{id:"temporaryAdminIntegrationConfig.taglines.hanzo",defaultMessage:"Manage Risk Everywhere Work Is Done"},aware:{id:"temporaryAdminIntegrationConfig.taglines.aware",defaultMessage:"Secure Your Digital Workplace. Drive Growth. Scale AI."},drata:{id:"temporaryAdminIntegrationConfig.taglines.drata",defaultMessage:"Continuous compliance automation platform"},drataStaging:{id:"temporaryAdminIntegrationConfig.taglines.drataStaging",defaultMessage:"Drata (Staging) tagline"},metomic:{id:"temporaryAdminIntegrationConfig.taglines.metomic",defaultMessage:"Metomic integration tagline"},custom:{id:"temporaryAdminIntegrationConfig.taglines.custom",defaultMessage:"Custom webhook integration that only requires a destination URL."},notionInternal:{id:"temporaryAdminIntegrationConfig.taglines.notionInternal",defaultMessage:"Integration for Notion services to talk to each other."}}),l={id:"a2768733-a1f9-4174-84fa-40a9ff2053d7",name:"nightfall",icon:"/images/external_integrations/nightfall-logo.svg",website_url:"https://www.nightfall.ai/",signupUrl:"https://www.nightfall.ai/integrations/notion",privacy_policy_url:"https://www.nightfall.ai/privacy",terms_of_use_url:"https://www.nightfall.ai/terms",developer_name:"Nightfall AI",installation_info_url:void 0,type:"dlp",tagline:s.nightfall,webhookUrl:"https://notion.nightfall.ai/notion/v1/event",customization:{headers:{hmac:!0}},allowedBotCapabilities:{webhooks:!0,read_content:!0,update_content:!0,read_comment:!0,insert_comment:!0,read_user_without_email:!0,read_user_with_email:!0},allowedEndpoints:["public_getPage","public_getPageProperty","public_getBlock","public_listBlockChildren","public_getDatabase","public_getSelf","public_updatePage","public_updateBlock","public_deleteBlock","public_updateDatabase","public_listComments","public_createComment","public_deleteComment","public_updateComment","public_getComment","public_unsharePageFromWeb","public_removeGuestsFromPage","public_getUser","public_external_deleteExternalBot","public_listUsers"],acceptsSecretToken:!1,integrationGalleryUrl:"https://www.notion.so/integrations/nightfall-ai",redirectUri:"https://app.nightfall.ai/dashboard"},c={id:"fb50a39e-955a-4b9c-9ffb-49587de2a79c",name:"panther",icon:"/images/external_integrations/panther-logo.png",website_url:"https://panther.com/",signupUrl:"https://panther.com/product/request-a-demo/",privacy_policy_url:"https://panther.com/privacy-policy/",terms_of_use_url:"https://panther.com/terms-of-service/",developer_name:"Panther",installation_info_url:void 0,type:"siem",customization:{headers:{hmac:!0},urlValidator:function(e){if(!e||!(0,i().yn)(e))return!1;const t=new URL(e);if("https:"!==t.protocol)return!1;if(!t.pathname.startsWith("/http/"))return!1;const n=t.pathname.replace("/http/","");return!!(0,o(342792).t)(n)}},tagline:s.panther,allowedBotCapabilities:{webhooks:!0},acceptsSecretToken:!0,integrationGalleryUrl:"https://www.notion.so/integrations/panther"},d={id:"3ecda536-3b09-4218-a756-bda416c512d7",name:"sumologic",icon:"/images/external_integrations/sumo-logic-logo.jpeg",website_url:"https://www.sumologic.com/",signupUrl:"https://www.sumologic.com/sign-up/",privacy_policy_url:"https://www.sumologic.com/privacy-statement/",terms_of_use_url:"https://www.sumologic.com/terms-conditions/",developer_name:"Sumo Logic",installation_info_url:void 0,type:"siem",tagline:s.sumologic,allowedBotCapabilities:{webhooks:!0},acceptsSecretToken:!1,integrationGalleryUrl:"https://www.notion.so/integrations/sumo-logic",customization:{urlValidator:function(e){if(!e||!(0,i().yn)(e))return!1;const t=new URL(e);return"https:"===t.protocol&&(!!t.hostname.endsWith("sumologic.com")&&!!t.pathname.startsWith("/receiver/v1/http/"))}}},u={id:"ff522b0f-e688-4986-9b7d-255627316f73",name:"splunk",icon:"/images/external_integrations/splunk-logo.jpeg",website_url:"https://www.splunk.com/",signupUrl:"https://www.splunk.com/en_us/talk-to-sales.html",privacy_policy_url:"https://www.splunk.com/en_us/legal/privacy/privacy-policy.html",terms_of_use_url:"https://www.splunk.com/en_us/legal/terms/terms-of-use.html",developer_name:"Splunk",installation_info_url:void 0,integrationGalleryUrl:"https://www.notion.so/integrations/splunk",customization:{headers:{authorization:{prefix:"Splunk"}},body:{path:["event"]},urlValidator:function(e){if(!e||!(0,i().yn)(e))return!1;const t=new URL(e);if(!["http:","https:"].includes(t.protocol))return!1;let o=t.hostname;return!(!o.startsWith("http-inputs")||!o.endsWith(".splunkcloud.com"))&&(o=o.replace("http-inputs","").replace(".splunkcloud.com",""),!(o.length<2||!o.startsWith("-")&&!o.startsWith("."))&&!!["/services/collector/raw","/services/collector/event"].includes(t.pathname))}},type:"siem",tagline:s.splunk,allowedBotCapabilities:{webhooks:!0},acceptsSecretToken:!0},p={id:"97d68716-a483-4472-8fa9-da26215d721a",name:"datadog",icon:"/images/external_integrations/datadog-logo.png",website_url:"https://www.datadoghq.com/",signupUrl:"https://www.datadoghq.com/free-datadog-trial/",privacy_policy_url:"https://www.datadoghq.com/legal/privacy/",terms_of_use_url:"https://www.datadoghq.com/legal/terms/",developer_name:"Datadog",installation_info_url:void 0,type:"siem",integrationGalleryUrl:"https://www.notion.so/integrations/datadog",customization:{headers:{hmac:!0}},oauth:{accountInfoPropertyNames:{accountId:"dd_oid",accountName:"dd_org_name"},usePKCE:!0,tokenPath:"/oauth2/v1/token",apiKeyPath:"/api/v2/api_keys/marketplace"},tagline:s.datadog,allowedBotCapabilities:{webhooks:!0},acceptsSecretToken:!1},m={id:"73da42b2-8736-4900-b53d-20a8d0d46a17",name:"runreveal",icon:"/images/external_integrations/runreveal.png",website_url:"https://runreveal.com/",signupUrl:"https://runreveal.com/signup",privacy_policy_url:"https://runreveal.com/privacy-policy",terms_of_use_url:"https://runreveal.com/terms-of-service",developer_name:"RunReveal",installation_info_url:void 0,type:"siem",tagline:s.runreveal,allowedBotCapabilities:{webhooks:!0},acceptsSecretToken:!1,integrationGalleryUrl:"https://www.notion.so/integrations/runreveal",customization:{urlValidator:function(e){if(!e||!(0,i().yn)(e))return!1;const t=new URL(e);return"https:"===t.protocol&&!!t.hostname.endsWith(".runreveal.com")}}},f={icon:"/images/external_integrations/polymer-logo.jpeg",website_url:"https://www.polymerhq.io/",signupUrl:"https://www.polymerhq.io/request-demo/",privacy_policy_url:"https://www.polymerhq.io/privacy/",terms_of_use_url:"https://www.polymerhq.io/terms-of-service/",installation_info_url:void 0,type:"dlp",tagline:s.polymer,integrationGalleryUrl:"https://www.notion.so/integrations/polymer",allowedBotCapabilities:{webhooks:!0,read_content:!0,update_content:!0,read_comment:!0,insert_comment:!0,read_user_without_email:!0,read_user_with_email:!0},allowedEndpoints:["public_getPage","public_getPageProperty","public_getBlock","public_listBlockChildren","public_getDatabase","public_getSelf","public_updatePage","public_updateBlock","public_deleteBlock","public_updateDatabase","public_listComments","public_createComment","public_deleteComment","public_updateComment","public_getComment","public_unsharePageFromWeb","public_removeGuestsFromPage","public_listUsers","public_getUser","public_external_deleteExternalBot"],acceptsSecretToken:!1,redirectUri:"https://www.polymerhq.io/"},g={...f,id:"9fb229bb-d287-45de-82f1-7331e99d9c6b",name:"polymer",developer_name:"Polymer",webhookUrl:"https://notion.polymerhq.io/notion/events"},v={...f,id:"1b725b3c-5eda-454d-9b41-0f903de3ba00",name:"polymerDev",developer_name:"PolymerDev",webhookUrl:"https://pilot.qa.polymerhq.io/notion/events"},h={icon:"https://s3-us-west-2.amazonaws.com/public.notion-static.com/3944326d-8881-4093-90f8-63637b1ef75f/metomic.png",website_url:"https://metomic.io/",privacy_policy_url:"https://metomic.io/privacy-policy",terms_of_use_url:"https://metomic.io/terms-and-conditions",signupUrl:"https://metomic.io/",allowedBotCapabilities:{webhooks:!0,read_comment:!0,read_content:!0,insert_content:!0,update_content:!0,read_user_with_email:!0,read_user_without_email:!0,workspace_search:!0},type:"dlp",tagline:s.metomic,allowedEndpoints:["public_getPage","public_getPageProperty","public_getBlock","public_listBlockChildren","public_getDatabase","public_getSelf","public_updatePage","public_updateBlock","public_deleteBlock","public_updateDatabase","public_listComments","public_createComment","public_deleteComment","public_updateComment","public_getComment","public_unsharePageFromWeb","public_removeGuestsFromPage","public_getUser","public_external_deleteExternalBot","public_workspaceSearch","public_listTeamspaces"],acceptsSecretToken:!1,integrationGalleryUrl:"https://www.notion.so/integrations/metomic",redirectUri:"https://metomic.io/",customization:{headers:{hmac:!0}}},_={...h,id:"05d23763-7da5-4fcc-aad4-a147d5034cc3",name:"metomic",developer_name:"Metomic",webhookUrl:"https://integrations-api.metomic.io/notion/webhooks/generic/0188965b-c4f7-589c-45c0-7766857bad32"},b={...h,id:"75b66e0c-be9f-4fc5-bed6-1bc156f91e1c",name:"metomicStaging",developer_name:"Metomic (Staging)",webhookUrl:"https://integrations-api.metomic-staging.io/notion/webhooks/generic/01889547-4e22-1e0b-f363-571468d1b042"},y={id:"7487d286-3fa5-4984-8a62-3aa4c51f50ed",name:"custom",developer_name:"Custom SIEM integration",type:"siem",tagline:s.custom,allowedBotCapabilities:{webhooks:!0},acceptsSecretToken:!1,integrationGalleryUrl:"https://www.notion.so/integrations",acceptsCustomHeaders:!0},S=["public_exportPage","public_workspaceSearch","public_getUser","public_listUsers","public_listTeamspaces","public_getPage","public_getBlock","public_getDatabase","public_getSelf"],w={workspace_search:!0,workspace_page_export:!0,read_content:!0,read_user_without_email:!0,read_user_with_email:!0,read_teamspace:!0},k={datadog:p,nightfall:l,panther:c,polymer:g,polymerDev:v,metomic:_,metomicStaging:b,splunk:u,sumologic:d,runreveal:m,onna:{id:"bb67e6bb-09f3-48fe-a7b2-428665ff20ac",name:"onna",icon:"/images/external_integrations/onna-icon.jpeg",website_url:"https://onna.com/",privacy_policy_url:"https://onna.com/privacy-policy",terms_of_use_url:"https://onna.com/master-subscription-agreement",developer_name:"Onna",type:"ediscovery",tagline:s.onna,integrationGalleryUrl:"https://www.notion.so/integrations/onna",allowedBotCapabilities:w,allowedEndpoints:S,redirectUri:"https://localhost:3005"},aware:{id:"99b8b727-7eee-40f8-af16-de045fb78e15",name:"aware",icon:"/images/external_integrations/aware-icon.png",website_url:"https://www.awarehq.com/",privacy_policy_url:"https://www.awarehq.com/privacy",terms_of_use_url:"https://www.awarehq.com/terms-conditions",developer_name:"Aware",type:"ediscovery",tagline:s.aware,integrationGalleryUrl:"https://www.notion.so/integrations/aware",allowedBotCapabilities:w,allowedEndpoints:S,redirectUri:"https://localhost:3005"},hanzo:{id:"2ebac254-9d38-4c94-b579-0eac7fe0f43c",name:"hanzo",icon:"/images/external_integrations/hanzo-icon.png",website_url:"https://www.hanzo.co/",privacy_policy_url:"https://www.hanzo.co/privacy",terms_of_use_url:"https://www.hanzo.co/privacy",developer_name:"Hanzo",type:"ediscovery",tagline:s.hanzo,integrationGalleryUrl:"https://www.notion.so/integrations/hanzo",allowedBotCapabilities:w,allowedEndpoints:S,redirectUri:"https://localhost:3005"},drata:{id:"04912200-d72b-4f0c-b61f-a192dc6e4a2f",name:"drata",icon:"/images/external_integrations/drata-icon.png",website_url:"https://drata.com/",privacy_policy_url:"https://drata.com/privacy",terms_of_use_url:"https://drata.com/terms",developer_name:"Drata",type:"ediscovery",tagline:s.drata,integrationGalleryUrl:"https://www.notion.so/integrations/drata",allowedBotCapabilities:w,allowedEndpoints:S,redirectUri:"https://app.drata.com/"},drataStaging:{id:"98e6e1b8-ac1b-414a-89b1-09cf4371d326",name:"drataStaging",website_url:"https://drata.com/",privacy_policy_url:"https://drata.com/privacy",terms_of_use_url:"https://drata.com/terms",developer_name:"Drata (Staging)",type:"ediscovery",tagline:s.drataStaging,integrationGalleryUrl:"https://www.notion.so/integrations/",allowedBotCapabilities:w,allowedEndpoints:S,redirectUri:"http://localhost:5000/callback/notion"},custom:y,notion_automation_public_api:{id:o(235484).aR,name:"notion_automation_public_api",website_url:"https://notion.com/",privacy_policy_url:"https://notion.com/privacy",terms_of_use_url:"https://notion.com/terms",developer_name:"Notion",type:"ediscovery",tagline:s.notionInternal,integrationGalleryUrl:"https://www.notion.so/integrations/",allowedBotCapabilities:{read_content:!0},allowedEndpoints:["public_internal_getObject"],redirectUri:"http://localhost:5000/callback/notion"}},I=(0,o(326966).m8)((0,o(696459).qP)(k).map((e=>{let[t,o]=e;return[o.id,o]})));function C(e){var t;return null===(t=T(e))||void 0===t?void 0:t.name}function x(e){const t=T(e);return Boolean(t&&"ediscovery"===t.type)}function T(e){if(e)return I[e]}function M(e){const t=T(e);if(t&&("siem"===t.type||"dlp"===t.type))return t}function P(e){return Boolean(T(e))}function A(e){if(!e)return!1;const t=T(e);return!!t&&(0,r().ms)(t.allowedBotCapabilities)}function R(e){const{env:t,integrationConfig:o,webhookUrlToValidate:i,experimentService:r,actor:s,spaceId:l}=e,c=(0,n().TS)({},a,o.customization);return!!r.checkGate({actor:s,gateName:"bypass_webhook_url_validation",customIDs:{spaceId:l}})||(!!c.urlValidator(i)||"local"===t&&i.startsWith("http://localhost:3007/"))}},30862:(e,t,o)=>{o.d(t,{D:()=>p,G:()=>u});o(267602),o(653476),o(241792);var n=()=>o(696459),i=()=>o(526839),r=()=>o(396136),a=()=>o(752778),s=()=>o(542973),l=()=>o(81954),c=()=>o(955620),d=()=>o(727207);function u(e){const{text:t,mapper:o,requester:n,resolveTemplateVariables:i,baseUrl:r,publicDomainName:a}=e;if(void 0!==t)return t.value.map((e=>p({token:{token:e,spaceId:t.spaceId},mapper:o,requester:n,resolveTemplateVariables:i,baseUrl:r,publicDomainName:a})))}function p(e){const{token:t,mapper:o,requester:u,resolveTemplateVariables:p,baseUrl:m,publicDomainName:f}=e;let g;const v=c().hDy(t.token).map((e=>{if(c().STW(e)){const t=c().yrl(e);if(t){const e=o({requested:t,requester:u});if(e)return c().$0A(e.id,e.spaceId)}}if(c().j0F(e)){const t=c().zW$(e),n=(0,i().A5)({url:t,baseUrl:m,publicDomainName:f});if(n){const e=o({requested:{table:r().iU,id:n,spaceId:(0,l().J)(void 0)},requester:u});if(e)return c().edl((0,i().nR)({pageId:e.id}))}}if(c().nSN(e)){const t=c().frW(e);if(t){const e=o({requested:{table:r().iU,id:t,spaceId:(0,l().J)(void 0)},requester:u});if(e)return c().x36(e.id)}}if(c().xw5(e)){const n=c().h19(e),i=o({requested:{table:s().qF,id:n,spaceId:t.spaceId},requester:u});if(i)return c().jw(i.id)}if(c().aq(e)&&p){const t=d().x5(e,p);if(t&&c().IWo(t)&&p){const e=c().zEN(t);if(e===p.currentUserId){if(g)return;g=e}}return t}if(c().IWo(e)&&p){const t=c().zEN(e);if(t===p.currentUserId){if(g)return;g=t}}if(c().Lyt(e)){const t=c().pxR(e);if((0,c().CEh)(t)||!t.collection)return e;const n=o({requester:u,requested:t.collection});if((null==n?void 0:n.table)!==a().vF)return e;const i=t.property;return c().kbv({collection:n,property:i})}return e})).filter(n().$K);return c().V3y(c().WiV(t.token),v)}},625230:(e,t,o)=>{o.d(t,{j:()=>l,kI:()=>s});o(670560);var n=o(667294),i=()=>o(565630),r=()=>o(347960);let a=!1;function s(e){let{isEnabled:t,isLoggedIn:o,userId:s,userEmail:c,spaceId:d,sprigConfig:u,userDaysSinceSignup:p,daysSinceSpaceCreated:m,userDomainType:f,isSpaceAdmin:g,spaceMemberCount:v}=e;(0,n.useEffect)((()=>{if(a=t,!t||!o||void 0===s||void 0===c||void 0===u||void 0===f)return;if(window.Sprig)return;const e=function(){e._queue.push(arguments)};e._queue=[],e.appId=u.environmentId,window.Sprig=e,window.UserLeap=e,window.Sprig("setUserId",s),window.Sprig("setEmail",c),d&&window.Sprig("setAttribute","SPACE_ID",d),v&&window.Sprig("setAttribute","SPACE_MEMBER_COUNT",v),m&&window.Sprig("setAttribute","DAYS_SINCE_SPACE_CREATED",m),window.Sprig("setAttribute","DAYS_SINCE_USER_SIGNUP",p),window.Sprig("setAttribute","USER_DOMAIN_TYPE",f),window.Sprig("setAttribute","IS_SPACE_ADMIN",g),p>=3&&p<=14&&"professional"===f&&l(g?{name:"trigger-phase-1"}:{name:"trigger-phase-1-1"}),(0,r().ZP)("https://cdn.sprig.com/shim.js")}),[t,o,s,u,c,d,g,f,p,m,v]);const h=(0,i().D9)(o);(0,n.useEffect)((()=>{h&&!o&&window.Sprig&&window.Sprig("logoutUser")}),[h,o])}function l(e){const t=e.name;if(!window.Sprig)return void(a&&console.warn("Sprig not loaded, not tracking: ",t));const o="args"in e?e.args:{};window.Sprig("track",t,o)}},467171:(e,t,o)=>{o.d(t,{Aj:()=>r,D_:()=>a,Pv:()=>u,R6:()=>c,TT:()=>i,br:()=>s,u3:()=>d});var n=()=>o(416593);const i=52,r=45,a=44,s=44,l=30;function c(e){return e?s:a}function d(e){return 2*c(e)}function u(e,t,o){return(e&&!t?(0,n().XW)(o):12)+l}},19435:(e,t,o)=>{o.d(t,{FW:()=>i,eU:()=>n,lR:()=>r});const n={"sprints-onboarding":{steps:[{id:"current-sprint-view-tooltip"},{id:"sprint-task-tooltip"},{id:"complete-sprint-button-tooltip"}]},"enhanced-qna-onboarding":{steps:[{id:"find-in-tooltip"},{id:"mention-tooltip"}]},"jira-sync-onboarding":{steps:[{id:"all-projects-tooltip"},{id:"all-issues-tooltip"},{id:"database-views-and-filters-tooltip"},{id:"settings-to-setup-projects-and-issues"}]},"project-management-import-onboarding":{steps:[{id:"your-teamspace-tooltip"},{id:"all-projects-tooltip"},{id:"navigate-to-project-tasks-tooltip"},{id:"project-customization-tooltip"},{id:"related-tasks-database-views-tooltip"}]},"ai-comment-onboarding":{steps:[{id:"ai-comment-onboarding-tooltip"}]}},i="completed",r="dismissed"},842343:(e,t,o)=>{o.d(t,{Z:()=>n});o(267602),o(731107);function n(e){return![".","#","$","[","]"].map((t=>-1!==e.indexOf(t))).reduce(((e,t)=>e||t),!1)}},768050:(e,t,o)=>{o.d(t,{Fi:()=>u,Hz:()=>i,Rh:()=>a,Zj:()=>l,aT:()=>m,ez:()=>r,hx:()=>p,xX:()=>s,y3:()=>d,yM:()=>c});var n=()=>o(788860);const i=["last_7_days","last_28_days","last_90_days","all_time"];const r={last_7_days:7,last_28_days:28,last_90_days:90},a=((0,o(696459).AO)((e=>7===e||28===e||90===e?{true:e}:{false:e})),(0,n().vU)({last_7_days:{id:"spaceAnalyticsUserTab.dateFilter.last7days",defaultMessage:"Last 7 Days"},last_28_days:{id:"spaceAnalyticsUserTab.dateFilter.last28days",defaultMessage:"Last 28 Days"},last_90_days:{id:"spaceAnalyticsUserTab.dateFilter.last90days",defaultMessage:"Last 90 Days"},all_time:{id:"spaceAnalyticsUserTab.dateFilter.allTime",defaultMessage:"All Time"}})),s=(0,n().vU)({last_7_days:{id:"spaceAnalyticsUserTab.dateFilter.lowercase.last7days",defaultMessage:"last 7 days"},last_28_days:{id:"spaceAnalyticsUserTab.dateFilter.lowercase.last28days",defaultMessage:"last 28 days"},last_90_days:{id:"spaceAnalyticsUserTab.dateFilter.lowercase.last90days",defaultMessage:"last 90 days"},all_time:{id:"spaceAnalyticsUserTab.dateFilter.lowercase.allTime",defaultMessage:"all time"}});function l(e,t,o){const n=e||0,i=t||0;return o?n-i:i-n}function c(e,t,o){const n=e||-1,i=t||-1;return o?n-i:i-n}const d=(0,n().vU)({page:{id:"contentAnalyticsHeaderMessages.columnHeader.page",defaultMessage:"Page"},pageId:{id:"contentAnalyticsHeaderMessages.columnHeader.pageId",defaultMessage:"Page ID"},teams:{id:"contentAnalyticsHeaderMessages.columnHeader.teamspace",defaultMessage:"Teamspace"},audience:{id:"contentAnalyticsHeaderMessages.columnHeader.audience",defaultMessage:"Audience"},allViews:{id:"contentAnalyticsHeaderMessages.columnHeader.allViews",defaultMessage:"All views"},uniqueViews:{id:"contentAnalyticsHeaderMessages.columnHeader.uniqueViews",defaultMessage:"Unique views"},createdBy:{id:"contentAnalyticsHeaderMessages.columnHeader.createdBy",defaultMessage:"Created by"},createdAt:{id:"contentAnalyticsHeaderMessages.columnHeader.createdAt",defaultMessage:"Created at"},lastEditedBy:{id:"contentAnalyticsHeaderMessages.columnHeader.lastEditedBy",defaultMessage:"Last edited by"},lastEditedAt:{id:"contentAnalyticsHeaderMessages.columnHeader.lastEditedAt",defaultMessage:"Last edited at"}});const u={num_searches:"numSearches",num_unique_users:"numUniqueUsers",ctr:"ctr"},p={numSearches:"num_searches",numUniqueUsers:"num_unique_users",ctr:"ctr"};function m(e){return e<=1?"1":e<=50?"2-50":e<=100?"51-100":e<=500?"101-500":e<=1e3?"501-1000":e<=5e3?"1001-5000":"5001-plus"}},492522:(e,t,o)=>{o.d(t,{A_:()=>O,Bh:()=>K,D_:()=>l,Dy:()=>W,E:()=>te,Eo:()=>F,Gt:()=>I,I5:()=>m,I8:()=>$,IK:()=>_,Ke:()=>se,LI:()=>L,LN:()=>y,LX:()=>J,MC:()=>g,Mo:()=>U,Nm:()=>R,Nn:()=>D,O9:()=>u,Qm:()=>a,R1:()=>ae,RJ:()=>h,S1:()=>B,VT:()=>v,Wd:()=>ee,Wi:()=>n,XB:()=>Z,XP:()=>i,Y6:()=>N,YO:()=>j,_:()=>X,_Y:()=>x,ag:()=>ne,bF:()=>P,eU:()=>s,eu:()=>E,fQ:()=>C,hT:()=>H,hc:()=>A,iO:()=>b,jM:()=>G,ke:()=>ie,l6:()=>r,lB:()=>q,lI:()=>V,mJ:()=>Q,mK:()=>k,nD:()=>c,ov:()=>S,p8:()=>oe,py:()=>p,sL:()=>M,t8:()=>w,u8:()=>Y,uB:()=>re,vt:()=>z,wx:()=>f,xP:()=>d,y:()=>T});const n=1,i=2,r=2,a=2,s=3,l=9,c=9,d=30,u=80,p=81,m=83,f=83,g=84,v=85,h=85,_=85,b=86,y=85,S=85,w=85,k=86,I=86,C=86,x=86,T=86,M=v+2,P=v+2,A=v+2,R=88,B=88,E=89,D=99,U=99,F=99,N=99,V=100,L=100,O=101,Z=102,j=109,K=110,z=111,H=111,q=113,W=200,G=105,$=201,Q=999,Y=1e3,J=1e3,X=9999,ee=9999999,te=1e6,oe=1,ne=2,ie=4,re=1e3,ae=100,se=101},814422:(e,t,o)=>{o.d(t,{j:()=>p,g:()=>m});var n=()=>o(839002),i=()=>o(289525),r=(o(821057),()=>o(513670));let a,s,l=!1;function c(){return l}async function d(e){if(l)return;const t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://decagon.ai/loaders/notion.js",t.id="decagon-widget-embed-script";const o=document.getElementsByTagName("script")[0];return null==o||o.parentNode.insertBefore(t,o),new Promise((o=>{t.addEventListener("load",(async t=>{if((0,r().kK)(window.duet))throw new Error("Decagon script not loaded");l=!0,window.duet.setMetadata(e.initArgs),window.duet.setUserId(e.initArgs.userId),await window.duet.hide(),await window.duet.close(),o()}))}))}async function u(e,t,o){if(a)return a;e.planType=t,e.isSalesAssistedPlan=o;const r=(0,n().UZ)();a=r.promise,await async function(e){if(!(await i().ec({service:"zendesk",cookieService:e.cookieService})))return;const t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://solve-widget.forethought.ai/embed.js",t.id="forethought-widget-embed-script",t.setAttribute("data-api-key","c895ee24-2c6c-4ed6-a100-3037e65cadda"),e.initialQuery&&t.setAttribute("initial-query",e.initialQuery);if(t.setAttribute("data-ft-full-name",e.fullName||"Forethought Deflected"),t.setAttribute("data-ft-email",e.email||"forethought@makenotion.com"),e.locale){var o;const n=null===(o=e.locale.split("-")[0])||void 0===o?void 0:o.toLowerCase();n&&t.setAttribute("data-ft-embed-script-language",n)}const n=e.planType||"undefined";"enterprise"===n&&e.isSalesAssistedPlan?(t.setAttribute("data-ft-plan-type","enterprise_free"),t.setAttribute("data-ft-workflow-tag","enterprise_free"),e.initialQuery||t.setAttribute("initial-intent-id","d5cb32d0-3637-4e8e-87fa-c4ea8d79d45f")):(t.setAttribute("data-ft-plan-type",n),t.setAttribute("data-ft-workflow-tag",n));const r=document.getElementsByTagName("script")[0];return null==r||r.parentNode.insertBefore(t,r),window.addEventListener("message",(e=>{var t,o;"forethoughtWidgetClosed"===(null==e||null===(t=e.data)||void 0===t?void 0:t.event)&&(null===(o=Forethought)||void 0===o||o("widget","hide"))})),new Promise((e=>{t.addEventListener("load",(()=>{var t;null===(t=Forethought)||void 0===t||t("widget","hide"),e()}))}))}(e),r.resolve()}async function p(e){if(s)return s;const t=(0,n().UZ)();s=t.promise;try{if("forethought"===e.type&&await u({...e.forethoughtInitializeArgs,initialQuery:e.initialQuery},e.userHighestPlanType,e.isSalesAssistedPlan),"decagon"===e.type){!c()&&!!e.decagonInitializeArgs&&await d({initArgs:e.decagonInitializeArgs})}await async function(e){const{locale:t,cookieService:o}=e;if(!(await i().ec({service:"zendesk",cookieService:o})))return;const n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src="https://static.zdassets.com/ekr/snippet.js?key=b9ad856d-6b98-4cf5-a2f6-d96e50557722",n.id="ze-snippet";const r=document.getElementsByTagName("script")[0];return null==r||r.parentNode.insertBefore(n,r),new Promise((e=>{n.addEventListener("load",(()=>{const o=window.zE;o&&(o("webWidget","setLocale",t),o("webWidget","hide"),e())}))}))}(e)}catch(o){e.onError&&e.onError(o)}finally{t.resolve()}}async function m(e){if(await p(e),"undefined"!=typeof Forethought)Forethought("widget","show"),Forethought("widget","open");else if(c())e.initialQuery&&window.duet.setInitialUserMessage(e.initialQuery),await window.duet.open();else{let e=window.zE;if(!e)return;e("webWidget","show"),e("webWidget","open"),e("webWidget:on","close",(function(t){e=window.zE,e&&e("webWidget","hide")}))}}},134043:(e,t,o)=>{o.d(t,{u:()=>n});const n=(0,o(830742).LS)("duplicateBlock")},576441:(e,t,o)=>{o.d(t,{E:()=>n});const n=(0,o(830742).LS)("importFile")},110344:(e,t,o)=>{o.d(t,{Z:()=>n});const n=(0,o(830742).LS)("unsyncTransclusionBlock")},168866:(e,t,o)=>{e.exports=o.p+"9ade71d75a1c0e93.png"}}]);