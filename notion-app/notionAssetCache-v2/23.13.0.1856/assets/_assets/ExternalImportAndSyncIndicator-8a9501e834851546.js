"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[47433],{635604:(e,t,n)=>{n.r(t),n.d(t,{ExternalImportAndSyncIndicator:()=>L});var l=n(667294),i=()=>n(146947),o=()=>n(219727),a=()=>n(142735),s=()=>n(846550),c=()=>n(646574),d=()=>n(109477),r=()=>n(890085),g=()=>n(396136),y=()=>n(696056),p=()=>n(752778),u=()=>n(788860),x=()=>n(568017),h=()=>n(707513),m=()=>n(887274),v=()=>n(594546),S=()=>n(148976),_=()=>n(527278),f=()=>n(148126),j=()=>n(176691),T=()=>n(315136),b=()=>n(257013),C=()=>n(998901),P=()=>n(876822),I=()=>n(749826),w=()=>n(308939),k=()=>n(826955),B=()=>n(521632),E=()=>n(108714),H=()=>n(729775),F=()=>n(654133),U=()=>n(312578),M=n(785893);function z(e){var t;const{store:n}=e,i=(0,a().VK)((()=>n.isCollectionView()),[n]),o=(0,a().VK)((()=>{var e;let t;if(n.table===g().iU)if(n.isCollectionView())t=n.getCollectionStore();else{const e=n.getParentStore();(null==e?void 0:e.table)===p().vF&&(t=e)}return null===(e=t)||void 0===e?void 0:e.getFormat()}),[n]),c=Boolean(null==o||null===(t=o.sync_state)||void 0===t?void 0:t.syncing),r=(0,s().yK)((e=>({wrapper:{display:"flex",alignItems:"center",gap:6},syncIcon:{width:14,height:14,position:"relative",color:e.blueColor},syncProgress:{fontWeight:h().Ue.medium,fontSize:14,color:e.blueColor},syncAge:{fontWeight:h().Ue.regular,fontSize:h().JB.UIRegular.desktop,color:x().ZP.blueWithAlpha(.7)},badge:{background:"light"===e.mode?x().ZP.diffBackground:"rgba(35, 131, 226, 0.2)",whiteSpace:"nowrap",width:"fit-content",height:28,display:"flex",marginBottom:3,borderRadius:20,padding:"2px 8px 2px 6px",...!i&&{marginTop:8}}})),[i]),y=(0,l.useCallback)((()=>i&&c?{syncBadgeContent:(0,M.jsx)("span",{style:r.syncProgress,children:(0,M.jsx)(u()._H,{id:"PageTitle.ImportSync.syncInProgress.title",defaultMessage:"Import in progress",values:{integration:null==o?void 0:o.external_collection_type}})})}:{}),[o,i,r,c]);if(!(o&&o.static_import_collection_type&&i&&o.static_import_collection_type===d().gH.CsvImport&&c))return null;const{syncBadgeContent:m}=y();return(0,M.jsx)("div",{style:{alignSelf:"end",display:"inline-block"},children:(0,M.jsx)(B().Z,{style:r.badge,content:(0,M.jsxs)("div",{style:r.wrapper,children:[(0,M.jsx)(U().Z,{style:r.syncIcon}),m]})})})}function L(e){const{store:t}=e,n=(0,a().VK)((()=>{var e;let n;if(t.table===p().vF)n=t;else if(t.table===g().iU)if(t.isCollectionView())n=t.getCollectionStore();else{const e=t.getParentStore();(null==e?void 0:e.table)===p().vF&&(n=e)}return null===(e=n)||void 0===e?void 0:e.getFormat()}),[t]);return(null==n?void 0:n.external_collection_type)===d().Vj.Jira?(0,M.jsx)(N,{...e}):(null==n?void 0:n.static_import_collection_type)===d().gH.CsvImport&&e.store.table===g().iU?(0,M.jsx)(z,{store:e.store}):(0,M.jsx)(M.Fragment,{})}function N(e){const t=(0,o().O7)(),{store:n}=e,d=(0,a().VK)((()=>{var e,t,l,o,a;const s=n.table===p().vF||n.table===g().iU&&n.isCollectionView(),d=s?n.table===p().vF?n:n.getCollectionStore():null==n?void 0:n.getParentStore();if(d&&d.table!==p().vF)return;const r=null==d?void 0:d.getFormat(),y={errorStatusCode:null==r||null===(e=r.error)||void 0===e?void 0:e.status_code,isCollection:s,isSyncFailed:Boolean(null==r||null===(t=r.error)||void 0===t?void 0:t.status_code),isSyncing:Boolean(null==r||null===(l=r.sync_state)||void 0===l?void 0:l.syncing),botId:null==r?void 0:r.bot_id,collectionSyncedTime:null==r||null===(o=r.sync_state)||void 0===o?void 0:o.last_synced_at,collectionSyncedTimeNormalized:null!=r&&null!==(a=r.sync_state)&&void 0!==a&&a.last_synced_at?(0,c().$b)(r.sync_state.last_synced_at,i().locale,_().Z.getIntl()):void 0,pageSyncedTime:void 0,pageSyncedTimeNormalized:void 0,synced_collection_external_url:null==r?void 0:r.synced_collection_external_url,external_collection_type:null==r?void 0:r.external_collection_type,collectionId:null==d?void 0:d.id};return I().default.checkGate({gateName:"show_collection_pill_at_page_level_for_jira"})?(y.pageSyncedTime=y.collectionSyncedTime,y.pageSyncedTimeNormalized=y.collectionSyncedTimeNormalized):s||(y.pageSyncedTime=n.getLastEditedTime(),y.pageSyncedTimeNormalized=(0,c().$b)(n.getLastEditedTime(),i().locale,_().Z.getIntl())),y}),[n]),{isCollection:U,isSyncing:z,isSyncFailed:L,external_collection_type:N,synced_collection_external_url:Z,botId:A,collectionId:V,collectionSyncedTime:W,collectionSyncedTimeNormalized:J,pageSyncedTime:K,pageSyncedTimeNormalized:R}=d||{},D=(0,a().VK)((()=>{const e=P().default.state.currentSpaceStore;if(A&&e){const t=k().Qx.createChildStore(e,{table:y().cZ,id:A,spaceId:e.id});return!!t.isDefined()&&!t.getAlive()}return!1}),[A]),Y=D||L&&U,$=(0,s().yK)((e=>({container:{display:"flex",alignSelf:"end",alignItems:"center",marginTop:6,...U&&{marginBottom:5}},wrapper:{display:"flex",alignItems:"center",gap:6},syncIcon:{width:14,height:14,position:"relative",color:Y?e.icon.uiYellowPrimary:e.blueColor},syncProgress:{fontWeight:h().Ue.medium,fontSize:t.device.isMobile?h().JB.UISmall.desktop:h().JB.UIRegular.desktop,color:Y?e.text.primary:e.blueColor},syncAge:{fontWeight:h().Ue.regular,fontSize:t.device.isMobile?h().JB.UISmall.desktop:h().JB.UIRegular.desktop,color:x().ZP.blueWithAlpha(.7)},badge:{background:"light"===e.mode?Y?e.fill.yellowSecondary:x().ZP.diffBackground:"rgba(35, 131, 226, 0.2)",whiteSpace:"nowrap",width:"fit-content",height:28,display:"flex",borderRadius:20,padding:"2px 8px 2px 6px"},tooltipHeading:{fontSize:h().JB.UISmall.desktop,fontWeight:h().Ue.medium},tooltipCaption:{fontSize:h().JB.UISmall.desktop,color:r().Lr.dark.gray,fontWeight:h().Ue.regular},reauthCta:{color:e.text.secondary,marginLeft:12}})),[t,U,Y]),G=(0,l.useCallback)((()=>D?{syncBadgeContent:(0,M.jsx)("span",{style:$.syncProgress,children:(0,M.jsx)(u()._H,{id:"PageTitle.ExternalSync.botDisconnected.title",defaultMessage:"Sync has stopped",values:{integration:N}})}),syncBadgeTooltipContent:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("div",{style:$.tooltipHeading,children:(0,M.jsx)(u()._H,{id:"PageTitle.ExternalSync.botDisconnected.tooltip.heading",defaultMessage:"Re-authenticate to continue syncing. Last updated {lastEditedTimeNormalized}",values:{lastEditedTimeNormalized:J}})}),(0,M.jsx)("div",{style:$.tooltipCaption,children:(0,M.jsx)(u()._H,{id:"PageTitle.ExternalSync.botDisconnected.tooltip.caption",defaultMessage:"Click to view the help center"})})]}),syncSecondaryAction:(0,M.jsx)(H().Z,{inline:!0,style:$.reauthCta,hoveredStyle:{background:"none",textDecoration:"underline"},onClick:()=>{(0,v().j)({environment:t,event:{eventName:"external_sync_setup_action",eventProperties:{actionType:"sync_label_reconnect_account_cta_click",integration:"jira",collectionId:V,flowId:w().ZP.createNewFlowId()}}}),m().jW({environment:t,from:"sync_header",action:"add_account"})},children:(0,M.jsx)(u()._H,{id:"PageTitle.ExternalSync.syncFailed.reauth",defaultMessage:"Re-authenticate account"})})}:U?L?{syncBadgeContent:(0,M.jsx)("span",{style:$.syncProgress,children:(0,M.jsx)(u()._H,{id:"PageTitle.ExternalSync.syncFailed.title",defaultMessage:"Sync failed",values:{integration:N}})}),syncBadgeTooltipContent:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("div",{style:$.tooltipHeading,children:(0,M.jsx)(u()._H,{id:"PageTitle.ExternalSync.syncFailed.tooltip.heading",defaultMessage:"Failed to sync some projects"})}),(0,M.jsx)("div",{style:$.tooltipCaption,children:(0,M.jsx)(u()._H,{id:"PageTitle.ExternalSync.syncFailed.tooltip.caption",defaultMessage:"Click to view the help center"})})]})}:z?{syncBadgeContent:(0,M.jsx)("span",{style:$.syncProgress,children:(0,M.jsx)(u()._H,{id:"PageTitle.ExternalSync.syncInProgress.title",defaultMessage:"Sync in progress",values:{integration:N}})}),syncBadgeTooltipContent:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("div",{style:$.tooltipHeading,children:(0,M.jsx)(u()._H,{id:"PageTitle.ExternalSync.syncInProgress.tooltip.heading",defaultMessage:"Syncing projects and issues from {site}",values:{site:(0,S().jh)(Z||"")}})}),(0,M.jsx)("div",{style:$.tooltipCaption,children:(0,M.jsx)(u()._H,{id:"PageTitle.ExternalSync.syncInProgress.tooltip.caption",defaultMessage:"Click to view the help center"})})]})}:{syncBadgeContent:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("span",{style:$.syncProgress,children:(0,M.jsx)(u()._H,{id:"PageTitle.ExternalSync.collectionLastSynced.title",defaultMessage:"Synced with {integration}",values:{integration:N}})}),W&&(0,M.jsx)("span",{style:$.syncAge,children:(0,M.jsx)(u()._H,{id:"PageTitle.ExternalSync.collectionLastSynced.subtitle",defaultMessage:"{lastUpdated}",values:{lastUpdated:(0,j().IS)(W,{useLowercase:!0})}})})]}),syncBadgeTooltipContent:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("div",{style:$.tooltipHeading,children:(0,M.jsx)(u()._H,{id:"PageTitle.ExternalSync.collectionLastSynced.tooltip.heading",defaultMessage:"Last updated {lastEditedTimeNormalized}",values:{lastEditedTimeNormalized:J}})}),(0,M.jsx)("div",{style:$.tooltipCaption,children:(0,M.jsx)(u()._H,{id:"PageTitle.ExternalSync.collectionLastSynced.tooltip.caption",defaultMessage:"Click to view the help center"})})]})}:{syncBadgeContent:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("span",{style:$.syncProgress,children:(0,M.jsx)(u()._H,{id:"PageTitle.ExternalSync.pageLastSynced.title",defaultMessage:"Synced with {integration}",values:{integration:N}})}),K&&(0,M.jsx)("span",{style:$.syncAge,children:(0,M.jsx)(u()._H,{id:"PageTitle.ExternalSync.pageLastSynced.subtitle",defaultMessage:"{lastUpdated}",values:{lastUpdated:(0,j().IS)(K,{useLowercase:!0})}})})]}),syncBadgeTooltipContent:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("div",{style:$.tooltipHeading,children:(0,M.jsx)(u()._H,{id:"PageTitle.ExternalSync.pageLastSynced.tooltip.heading",defaultMessage:"Last updated {lastEditedTimeNormalized}",values:{lastEditedTimeNormalized:R}})}),(0,M.jsx)("div",{style:$.tooltipCaption,children:(0,M.jsx)(u()._H,{id:"PageTitle.ExternalSync.pageLastSynced.tooltip.caption",defaultMessage:"Click to view the help center"})})]})}),[t,z,U,$,K,R,W,J,L,N,Z,D,V]);if(!N||U&&!W)return null;const{syncBadgeContent:O,syncBadgeTooltipContent:Q,syncSecondaryAction:q}=G(),X=()=>(0,M.jsx)("div",{style:{alignSelf:"end",display:"inline-block"},children:(0,M.jsx)(E().Z,{className:"notion-print-ignore",href:(0,f().UY)("guides.externalImportAndSync"),external:!0,children:(0,M.jsx)(B().Z,{style:$.badge,content:(0,M.jsxs)("div",{style:$.wrapper,children:[L||D?(0,b().T)($.syncIcon):(0,T().b)($.syncIcon),O]})})})});return(0,M.jsxs)("div",{style:$.container,children:[Q?(0,M.jsx)(F().Z,{renderTooltip:()=>Q,render:e=>(0,M.jsx)("div",{...e,children:X()}),placement:C().Placement.Bottom}):X(),q]})}}}]);