"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[45376],{594134:(e,t,o)=>{o.d(t,{V:()=>c});o(241792);var n=()=>o(820271),r=()=>o(790300),i=()=>o(139224),a=()=>o(636340),l=()=>o(269299),s=()=>o(887430),u=()=>o(714966);async function c(e){var t;const{environment:o,collectionStore:c,collectionContextStore:p,collectionSettingsStore:d,shouldSkipViewSelection:g}=e,m=p.collectionViewBlockStore(),y=p.collectionViewStore(),f=c.getParentBlockStore();if(!m||!f||!y)return;const h=null===(t=c.getModel())||void 0===t?void 0:t.getNormalizedSchema();if("chart"===y.getType()&&h){const e=y.getFormat(),t=e.chart_config;if(!t)return;const i="placeholder"===t.type?t.placeHolderType:t.type;let s;return(0,r().F)(i)?s=(0,n().K0)({collectionSchema:h,axisChartType:i}):"donut"===i&&(s=(0,n().dq)({collectionSchema:h})),l().createAndCommit({userAction:"slashMenu.create.chartViewExistingSource",environment:o,canUndo:!0,perform:t=>{a().sW({store:y.getFormatStore(),transaction:t,data:{...e,hide_linked_collection_name:!0,subitem_display_mode:"flattened",chart_config:s||null}})}}),void d.setState({open:!0,stack:[{type:"main"}]})}if(g)i().H4({collectionSettingsStore:d,item:{type:"main"}});else{await Promise.all([...f.getCollectionViewStores().map((e=>e.load())),...m.getCollectionViewStores().map((e=>e.load()))]);(0,s().gL)({collectionStore:c,sourceCollectionViewBlockStore:f,currentCollectionViewBlockStore:m,currentCollectionViewStore:y,constraints:(0,u().x)(y.id)}).length>0?i().H4({collectionSettingsStore:d,item:{type:"duplicateExistingView"}}):i().H4({collectionSettingsStore:d,item:{type:"createView"}})}}},788899:(e,t,o)=>{o.d(t,{Tp:()=>m,cn:()=>c,fg:()=>d,l0:()=>p});o(667294);var n=()=>o(219727),r=()=>o(573357),i=()=>o(198829),a=()=>o(18748),l=()=>o(470386),s=()=>o(352230),u=o(785893);const c=8,p=8,d=32,g={height:d+c-2,paddingTop:c-2};function m(e){let{title:t,helpButton:o,onCancel:a,desktopMinWidth:c,desktopMaxWidth:p,desktopWidth:d,children:g}=e;const{device:m}=(0,n().O7)();return(0,u.jsx)(r().Z,{capture:!0,allowEsc:!0,allowUndo:!0,render:e=>{let n;return n=m.isMobile?{menuType:s().o.Modal,title:t,right:(0,u.jsx)(l().DoneMenuText,{}),onClickRight:a,...e}:{menuType:s().o.Popup,...c&&{minWidth:c},...p&&{maxWidth:p},...d&&{width:d},...e},(0,u.jsx)(i().Z,{...n,header:t&&(0,u.jsx)(y,{title:t,helpButton:o}),children:g})}})}function y(e){let{title:t,helpButton:o}=e;return(0,n().O7)().device.isMobile?null:(0,u.jsx)(a().ZP,{style:g,title:t,right:o})}},900596:(e,t,o)=>{o.d(t,{Z:()=>i});o(667294);var n=()=>o(788860),r=o(785893);const i=function(e){let{collectionViewName:t,collectionViewType:i}=e;return t?(0,r.jsx)(o(827618).Z,{children:t}):"page"===i?(0,r.jsx)(n()._H,{id:"database.collectionView.untitledName.untitled",defaultMessage:"Untitled"}):(0,r.jsx)(n()._H,{...o(887430).b1[i]})}},292612:(e,t,o)=>{o.d(t,{Z:()=>i});var n=o(667294),r=o(785893);const i=n.forwardRef((function(e,t){const n=(0,o(846550).yK)((t=>({base:{color:e.isBlue?o(568017).ZP.blue:t.mediumTextColor},disabled:{cursor:"not-allowed"},buttonMenuItem:{...e.style,...e.disabled?{cursor:"not-allowed"}:{}}})),[e.disabled,e.isBlue,e.style]),{color:i}=n.base;return(0,r.jsx)(o(827973).Z,{ref:t,...e,title:(0,r.jsx)("div",{style:{color:i,fill:i},children:e.title}),icon:(0,r.jsx)(o(882292).Z,{icon:o(521777).R,styles:{fill:i}}),style:n.buttonMenuItem})}))},69222:(e,t,o)=>{o.d(t,{Q:()=>A});o(267602),o(241792),o(228244);var n=o(667294),r=()=>o(219727),i=()=>o(142735),a=()=>o(846550),l=()=>o(816512),s=()=>o(608352),u=()=>o(226413),c=()=>o(605974),p=()=>o(396136),d=()=>o(752778),g=()=>o(788860),m=()=>o(513670),y=()=>o(696459),f=()=>o(707513),h=()=>o(308186),S=()=>o(125659),v=()=>o(718798),x=()=>o(487270),C=()=>o(352230),b=()=>o(842595),j=()=>o(828946),M=()=>o(98228),V=()=>o(692304),w=()=>o(826955),Z=()=>o(154439),k=()=>o(573357),P=()=>o(291198),T=()=>o(740046),_=()=>o(198829),F=()=>o(255577),I=()=>o(838367),B=()=>o(906651),G=()=>o(231219),R=()=>o(388284),L=()=>o(249392),H=()=>o(523516),K=o(785893);function A(e){const{onChange:t,currentGroups:o,groupBy:a,groupFormat:l,onClose:u,schema:c,parentStore:p}=e,d=(0,i().qz)(void 0,v().Z),m=(0,i().qz)(void 0,V().Z),y=(0,r().Fy)(),f=(0,n.useCallback)((()=>{O({onChange:t,currentGroups:o,groupBy:a,groupFormat:l,inputStore:d,onClose:u})}),[o,a,l,d,t,u]);let h;return(0,n.useEffect)((()=>{var e;l&&("select"===l.value.type||"multi_select"===l.value.type)&&l.value.value?d.setState({...d.state,inputValue:l.value.value}):l&&(0,s().R7)(l.value)&&"exact"===(null===(e=l.value.value)||void 0===e?void 0:e.type)&&d.setState({...d.state,inputValue:l.value.value.value})}),[l,d]),h=y.isMobile?{menuType:C().o.Modal,title:l?(0,K.jsx)(g()._H,{defaultMessage:"Rename group",id:"codeBlock.databaseEditGroupMenu.renameGroupTitle"}):(0,K.jsx)(g()._H,{defaultMessage:"Add a group",id:"codeBlock.databaseEditGroupMenu.addGroupTitle"}),left:(0,K.jsx)(g()._H,{defaultMessage:"Cancel",id:"codeBlock.databaseEditGroupMenu.cancelButton.label"}),right:(0,K.jsx)(g()._H,{defaultMessage:"Done",id:"codeBlock.databaseEditGroupMenu.doneButton.label"}),onClickRight:f,onClickLeft:u}:{menuType:C().o.Popup,width:U(a)?300:240,maxHeight:"50vh"},(0,K.jsx)(k().Z,{capture:!0,render:e=>(0,K.jsx)(_().Z,{...h,...e,children:(0,K.jsx)(q,{groupBy:a,schema:c,onChange:t,currentGroups:o,groupFormat:l,onClose:u,parentStore:p,inputStore:d,menuListStore:m})})})}function N(){return(0,K.jsx)(g()._H,{defaultMessage:"Group already exists.",id:"database.groupExistsAlreadyError.message"})}function U(e){return"select"===e.type||"multi_select"===e.type||(0,s().HB)(e.type)}function E(e){let{currentGroups:t,onChange:o,groupFormat:n,onClose:a,inputStore:u,menuListStore:c}=e;const p=(0,r().O7)(),d=(0,g().YB)(),y=(0,i().qz)(c,V().Z),f=(0,i().qz)(u,v().Z),S=(0,i().VK)((()=>f.state.inputValue),[f]);return(0,K.jsx)(Z().Z,{request:S,performRequest:e=>async function(e,t){const o=await j().x.searchActions.load();return(await o.searchVisibleSpaceUsers({environment:t,query:e,membersOnly:!1})).slice(0,20)}(e,p),debounce:M().vp,render:(e,r,i)=>{r||(r=[]);const u=m().oA(r.map((e=>({key:e.id,render:t=>(0,K.jsx)(H().Z,{actor:(0,l().dp)(e),...t}),action:()=>{const r={type:"person",value:{table:"notion_user",id:e.id}};return n&&m().Xy(r,n.value)?(null==a||a(),null):t.some((e=>(0,s().we)(r,e.value)))?(h().UW((0,K.jsx)(N,{})),null):void o({newGroupValue:r})}}))));let c;return c=i&&r&&0===u.length?(0,K.jsx)(R().Z,{children:(0,K.jsx)(I().Z,{title:(0,K.jsx)(g()._H,{defaultMessage:"No results",id:"database.noPersonSearchResults.message"})})}):(0,K.jsx)(F().Z,{type:F().i.Vertical,initialFocus:0,sections:[{key:0,render:e=>(0,K.jsx)(R().Z,{...e}),items:u}],store:y}),(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(R().Z,{children:(0,K.jsx)(T().ZP,{value:S,focus:!0,placeholder:d.formatMessage({defaultMessage:"Search for a personâ€¦",id:"database.searchPerson.placeholder"}),onChange:e=>{f.setState({...f.state,inputValue:e.target.value}),y.setState({...y.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}})}),c]})}})}function W(e,t,o,n,r,i){const a=o[n.property];if(!a||"relation"!==a.type)return null;const l=u().j0(a);if(!l)return null;const s=w().NW.createChildStore(t,l);return s.isDefined()&&i.length>0?{key:"new-page",render:e=>(0,K.jsx)(L().Z,{targetCollectionStore:s,pageName:i,...e}),action:()=>{const t=(0,x().TS)({environment:e,table:p().iU,spaceId:s.getSpaceId()}),o={table:p().iU,id:t,spaceId:s.getSpaceId()};r({newGroupValue:{type:"relation",value:o},newPage:{id:o.id,spaceId:o.spaceId,name:i}})}}:null}function O(e){let{onChange:t,currentGroups:o,groupBy:n,groupFormat:r,inputStore:i,onClose:a}=e;const l=i.state.inputValue.trim().replace(/,/g,"");let u;"select"===n.type||"multi_select"===n.type?u={type:n.type,value:l}:(0,s().aB)(n)&&(u={type:n.type,value:{type:"exact",value:l}}),u&&l?r&&m().Xy(u,r.value)?null==a||a():o.some((e=>u&&(0,s().we)(u,e.value)))?h().UW((0,K.jsx)(N,{})):t({newGroupValue:u}):null==a||a()}function $(e,t,o,n,r,i,a,l,u){const p=null==u?void 0:u.relativeVariableStore.state,d=p&&p[t.id],g=(e,o)=>{const r=w().NW.createChildStore(n,t);if(!r.isDefined())return;const i=r.getFormat().app_config_uri;return i&&o?e.formatMessage(c().qB[i][o].messageDescriptor):void 0};return e.map((e=>{const t=w().G.createChildStore(n,e);if(t.isTemplate())return;const u=d?(0,c().P8)(t.id,d):void 0;return{key:t.id,render:e=>(0,K.jsx)(G().Z,{store:t,titlePrefix:g(r,u),...e}),action:()=>{let t={type:"relation",value:e};u&&(t={type:"relation",value:{type:"relative",value:{type:"builtin",variable:u}}}),a&&m().Xy(t,a.value)?null==l||l():o.some((e=>(0,s().we)(t,e.value)))?h().UW((0,K.jsx)(N,{})):i({newGroupValue:t})}}}))}function D(e){let{onChange:t,currentGroups:o,groupBy:l,groupFormat:s,onClose:u,inputStore:c,menuListStore:p}=e;const d=(0,g().YB)(),m=(0,a().Fg)(),y=(0,n.useCallback)((()=>O({onChange:t,currentGroups:o,groupBy:l,groupFormat:s,inputStore:c,onClose:u})),[t,o,l,s,c,u]),h=(0,n.useCallback)((e=>function(e,t,o,n,r,i,a){13===e.keyCode?O({onChange:t,currentGroups:o,groupBy:n,groupFormat:r,inputStore:i,onClose:a}):27===e.keyCode&&(null==a||a())}(e,t,o,l,s,c,u)),[t,o,l,s,c,u]),S=(0,n.useCallback)((e=>function(e,t,o){t.setState({...t.state,inputValue:e.target.value}),o.setState({...o.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}(e,c,p)),[c,p]),v=(0,i().VK)((()=>c.state.inputValue),[c]),x=(0,r().MO)(),C=s?d.formatMessage({id:"database.collectionEditGroupMenu.renameGroupLabel.placeholder",defaultMessage:"Rename group"}):d.formatMessage({id:"database.collectionEditGroupMenu.newGroupLabel.placeholder",defaultMessage:"New group"});return x?(0,K.jsx)(R().Z,{children:(0,K.jsx)(T().ZP,{value:v,focus:!0,selectAll:!0,showClearButton:!1,focusInitial:!0,placeholder:C,onChange:S,onKeyDown:h})}):(0,K.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:6,width:"100%",background:m.inputBackground},children:[(0,K.jsx)(P().Z,{value:v,focus:!0,selectAll:!0,focusInitial:!0,placeholder:C,onChange:S,onKeyDown:h,format:P().B.Transparent,style:{fontSize:f().JB.UIRegular.desktop}}),(0,K.jsxs)(B().Z,{onClick:y,children:[(0,K.jsx)(g()._H,{defaultMessage:"Done",id:"database.collectionEditGroupMenu.submitButton.label"}),(0,b().U)({height:14,width:14,fill:"currentColor",marginLeft:6,marginTop:2})]})]})}function Y(e){let{parentStore:t,schema:o,groupBy:a,currentGroups:l,onChange:s,groupFormat:c,onClose:g,inputStore:m,menuListStore:y}=e;const f=(0,r().O7)(),h=(0,i().VK)((()=>m.state.inputValue),[m]),S=(0,n.useMemo)((()=>{const e=o[a.property];return!(!e||"relation"!==e.type)&&u().j0(e)}),[a.property,o]);return(0,i().VK)((()=>{if(!S)return!1;return w().NW.createChildStore(t,S).isDefined()}),[S,t])&&S?(0,K.jsx)(Z().Z,{request:h,performRequest:e=>async function(e,t,o,n,r){const i=o[t.property];if(!i||!(0,u().p_)(i))return;const a=i.collection_pointer;if(!a)return;const l=w().NW.createChildStore(n,{table:d().vF,id:a.id});if(await l.load(),!l.isDefined())return;const s=l.getSpaceId(),c=await j().x.searchActions.load();return(await c.searchPagesInCollection({environment:r,query:e,collectionId:a.id,spaceId:s,excludeTemplates:!0,source:"collection_group_value",limit:20,includePublicPagesWithoutExplicitAccess:!0,boostRecentlyViewedPages:!1})).results.map((e=>({table:p().iU,id:e,spaceId:s})))}(e,a,o,t,f),debounce:M().vp,render:function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return(0,K.jsx)(z,{ready:r,results:n,parentStore:t,schema:o,groupBy:a,currentGroups:l,onChange:s,groupFormat:c,onClose:g,inputStore:m,menuListStore:y,collectionPointer:S,environment:f})}}):null}function z(e){let{parentStore:t,schema:o,groupBy:r,currentGroups:a,onChange:l,groupFormat:s,onClose:u,inputStore:c,menuListStore:p,results:d,ready:y,collectionPointer:f,environment:h}=e;const v=(0,g().YB)(),x=(0,n.useContext)(S().cu),C=(0,i().VK)((()=>c.state.inputValue),[c]),b=(0,i().VK)((()=>m().oA([...$(d,f,a,t,v,l,s,u,x),W(h,t,o,r,l,C)])),[h,x,f,a,r,s,C,v,l,u,t,d,o]);let j;return j=y&&d&&0===b.length?(0,K.jsx)(R().Z,{children:(0,K.jsx)(I().Z,{title:(0,K.jsx)(g()._H,{defaultMessage:"No results",id:"database.noRelationSearchResults.message"})})}):(0,K.jsx)(F().Z,{type:F().i.Vertical,initialFocus:0,sections:[{key:0,render:e=>(0,K.jsx)(R().Z,{...e}),items:b}],store:p}),(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(R().Z,{children:(0,K.jsx)(T().ZP,{value:C,focus:!0,placeholder:v.formatMessage({defaultMessage:"Type to search...",id:"database.searchRelation.placeholder"}),onChange:e=>{c.setState({...c.state,inputValue:e.target.value}),p.setState({...p.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}})}),j]})}function q(e){let{groupBy:t,schema:o,onChange:n,currentGroups:r,groupFormat:i,onClose:a,parentStore:l,inputStore:u,menuListStore:c}=e;return o[t.property]?"select"===t.type||"multi_select"===t.type?(0,K.jsx)(D,{onChange:n,currentGroups:r,groupBy:t,groupFormat:i,onClose:a,inputStore:u,menuListStore:c}):"person"===t.type?(0,K.jsx)(E,{currentGroups:r,onChange:n,groupFormat:i,onClose:a,inputStore:u,menuListStore:c}):"relation"===t.type?(0,K.jsx)(Y,{parentStore:l,schema:o,groupBy:t,currentGroups:r,onChange:n,groupFormat:i,onClose:a,inputStore:u,menuListStore:c}):(0,s().HB)(t.type)?(0,K.jsx)(D,{onChange:n,currentGroups:r,groupBy:t,groupFormat:i,onClose:a,inputStore:u,menuListStore:c}):"number"===t.type||"status"===t.type||"date"===t.type||"formula"===t.type||"checkbox"===t.type||"created_time"===t.type||"last_edited_time"===t.type||"created_by"===t.type||"last_edited_by"===t.type||"last_visited_time"===t.type||"location"===t.type?null:void(0,y().t1)(t.type):null}},157593:(e,t,o)=>{o.d(t,{Z:()=>U});o(267602),o(470928);var n=o(667294),r=()=>o(219727),i=()=>o(142735),a=()=>o(846550),l=()=>o(816512),s=()=>o(506347),u=()=>o(608352),c=()=>o(226413),p=()=>o(532850),d=()=>o(38883),g=()=>o(114079),m=()=>o(605974),y=()=>o(788860),f=()=>o(696459),h=()=>o(707513),S=()=>o(139224),v=()=>o(253335),x=()=>o(887430),C=()=>o(718959),b=()=>o(559729),j=()=>o(521045),M=()=>o(731738),V=()=>o(429725),w=()=>o(687892),Z=()=>o(876822),k=()=>o(826955),P=()=>o(69222),T=()=>o(759005),_=()=>o(154186),F=()=>o(448419),I=()=>o(715139),B=()=>o(729775),G=()=>o(943620),R=()=>o(384241),L=()=>o(654133),H=()=>o(864832),K=()=>o(328094),A=()=>o(246471),N=o(785893);const U=function(e){let{schema:t,groupFormat:n,collectionContextStore:r,isHiddenGroup:a,style:l,uncategorizedIconStyle:s,currentGroups:u,groupBy:p,onChange:d,onClose:g,disabled:m}=e;const y=(0,i().qz)(void 0,o(529048).Z),f=(0,i().VK)((()=>{const e=r.groupsStore.getGroupState(n);return null==e?void 0:e.groupUiParentStore}),[r,n]),h=(0,i().VK)((()=>{const e=t[n.property];if(e&&(0,c().p_)(e)&&f)return(0,o(129338).ke)(e,f)}),[t,n,f]),S=n.value,v=void 0===S.value,x=t[n.property];if(!x)return null;if(v)return(0,N.jsx)(ee,{groupFormat:n,schema:t,isHiddenGroup:a,collectionContextStore:r,style:l,uncategorizedIconStyle:s,parentStore:f});if("formula"===S.type){if("formula"!==S.type)return null;const e=S.value;return e?(0,N.jsx)(ue,{schema:t,currentGroups:u,groupBy:p,groupFormat:n,onChange:d,onClose:g,disabled:m,style:l,isHiddenGroup:a,collectionContextStore:r,buttonPopupStore:y,parentStore:f,relatedCollectionAppConfigUri:h,groupValue:e,propertySchema:x}):null}return(0,N.jsx)(ue,{schema:t,currentGroups:u,groupBy:p,groupFormat:n,onChange:d,onClose:g,disabled:m,style:l,isHiddenGroup:a,collectionContextStore:r,buttonPopupStore:y,parentStore:f,relatedCollectionAppConfigUri:h,groupValue:S,propertySchema:x})},E={overflow:"hidden",padding:3,borderRadius:4,fontWeight:h().Ue.medium};function W(e){const{isHiddenGroup:t}=e;return t?(0,N.jsx)(O,{...e,tooltipEvents:void 0}):(0,N.jsx)(L().Z,{renderTooltip:()=>(0,N.jsx)(y()._H,{defaultMessage:"Any items with an empty <b>{name}</b> property will go here. This group cannot be removed.",values:{name:null,b:e=>(0,N.jsx)("span",{style:{fontWeight:h().Ue.semibold},children:e})},id:"database.boardView.uncategorizedColumnTooltip"}),style:{width:240},textWrap:!0,render:t=>(0,N.jsx)(O,{...e,tooltipEvents:t})})}function O(e){const t={display:"flex",alignItems:"center",fontSize:14,lineHeight:1.2,paddingLeft:2,paddingRight:4,whiteSpace:"nowrap",overflow:"hidden",fontWeight:h().Ue.medium},{style:o,uncategorizedIconStyle:n,tooltipEvents:r,formattedLabelMessage:i}=e;return(0,N.jsxs)("div",{style:{...t,paddingLeft:0,...o},...r,children:[(0,w().R)({width:14,marginLeft:6,marginRight:6,...n}),(0,N.jsx)("span",{style:{...h().Yu},children:i})]})}function $(e){let{value:t}=e;return"other"===t.type?(0,N.jsx)(y()._H,{defaultMessage:"Other",id:"database.collectionGroupValue.textGroup.other"}):"alphabet_prefix"===t.type||"exact"===t.type?(0,N.jsx)(N.Fragment,{children:t.value}):void(0,f().t1)(t)}function D(e){let{groupFormat:t,schema:o}=e;const n=o[t.property];if(!n||"status"!==n.type)return null;const r=t.value;if(r.type!==n.type)return null;const{value:i}=r;if(!i)return null;const a=n.options??[],l=n.groups??[];if("by_group"===i.type){const e=l.find((e=>e.name===i.group));return e?(0,N.jsx)(T().r_,{group:e,style:{fontWeight:500},showIcon:!0,showColor:!0}):null}if("by_option"===i.type){const e=(0,p().i7)(a,i.option),t=e&&l.find((t=>{var o;return null===(o=t.optionIds)||void 0===o?void 0:o.includes(e.id)}));return e?(0,N.jsx)("span",{style:{fontWeight:500,lineHeight:"normal",overflow:"hidden",paddingRight:6},children:(0,N.jsx)(A().F,{format:d().lo.Medium,isSingle:!0,value:e.value,color:e.color,showRemoveButton:!1,groupColor:null==t?void 0:t.color})}):null}(0,f().t1)(i)}function Y(e){let{value:t}=e;const o=(0,y().YB)();return(0,N.jsx)(N.Fragment,{children:(0,b().fZ)({intl:o,value:t})})}function z(e){let{value:t,format:o}=e;const n=(0,y().YB)();return(0,N.jsx)(N.Fragment,{children:(0,b().xg)({intl:n,value:t,format:o})})}function q(e){let{groupValue:t,propertySchema:o,style:n}=e;const r=(0,a().yK)((()=>({checkboxStyle:{display:"inline-flex",marginRight:6},wrapperStyle:{fontWeight:h().Ue.medium,marginRight:3,display:"flex",alignItems:"center"}})),[]);return"checkbox"!==t.type?null:(0,N.jsxs)("div",{style:{...h().Yu,...r.wrapperStyle,...n},children:[(0,N.jsx)(I().Z,{checked:t.value,checkSize:10,size:14,disabled:!0,style:r.checkboxStyle}),(0,N.jsx)("span",{children:null==o?void 0:o.name})]})}function X(e){let{groupValue:t,style:o}=e;return(0,u().Mc)(t)&&t.value?(0,N.jsx)("div",{style:{...Q,...h().Yu,...o},children:(0,N.jsx)(Y,{value:t.value})}):null}function J(e){let{groupValue:t,propertySchema:o,style:n}=e;if("number"!==t.type||!t.value)return null;const r=(null==o?void 0:o.number_format)||g().dk;return(0,N.jsx)("div",{style:{...Q,...n},children:(0,N.jsx)(z,{value:t.value,format:r})})}const Q={overflow:"hidden",padding:3,paddingRight:6,borderRadius:4,fontWeight:h().Ue.medium};function ee(e){let{groupFormat:t,schema:o,isHiddenGroup:n,collectionContextStore:r,style:a,uncategorizedIconStyle:l,parentStore:s}=e;const u=o[t.property],p=(0,i().VK)((()=>r.collectionStore()),[r]),d=(0,i().VK)((()=>{let e=!1;return null!=p&&p.isDefined()&&u&&(0,c().p_)(u)&&s&&(e=(0,M().OG)({collectionStore:p,property:t.property,propertySchema:u,parentStore:s})),e}),[p,t,u,s]);if(!u)return null;const{name:g}=u;return d?(0,N.jsx)(W,{style:a,uncategorizedIconStyle:l,isHiddenGroup:n,formattedLabelMessage:(0,N.jsx)(y()._H,{...M().uL.sprintUncategorizedGroup,values:{name:g}})}):(0,N.jsx)(W,{style:a,uncategorizedIconStyle:l,isHiddenGroup:n,formattedLabelMessage:(0,N.jsx)(y()._H,{...b().nX.emptyGroupLabel,values:{name:g}})})}function te(e){let{style:t,collectionContextStore:o,groupValue:n,parentStore:r}=e;const a=(0,i().VK)((()=>{var e;return null===(e=o.collectionViewBlockStore())||void 0===e?void 0:e.id}),[o]),l=r&&"location"===n.type&&n.value?k().NW.createChildStore(r,n.value):void 0,u=(0,i().VK)((()=>null==l?void 0:l.getParentBlockStore()),[l]),c=(0,i().VK)((()=>{let e=s().tY.LocationProperty;return a?((0,C().qG)(a)&&(e=o.isInHomeWidgetStore.state?s().tY.PersonalHomeTileTasks:s().tY.PersonalHomePageTasks),e):e}),[a,o]),p=(0,i().VK)((()=>u?(0,V().ZP)({store:u,fullyQualified:!1,pageVisitSource:c}):void 0),[u,c]),d=(0,i().VK)((()=>null==l?void 0:l.getIcon()),[l]);return"location"===n.type&&n.value&&r&&l?(0,N.jsxs)(B().Z,{href:p,style:{...t,display:"flex"},ignoreLocalHoverState:!0,children:[(0,N.jsx)(G().Z,{disabled:!0,icon:d,size:20,isEmptyPage:!1,style:{marginTop:2,marginRight:6}}),(0,N.jsx)(R().Z,{store:l,underline:!0,style:{fontWeight:h().Ue.medium}})]}):null}function oe(e){let{groupValue:t,schema:o,groupFormat:n,collectionContextStore:r,style:a,parentStore:l,relatedCollectionAppConfigUri:s}=e;const p=o[n.property],d=p&&"relation"===p.type?c().j0(p):void 0,g=l&&d?k().NW.createChildStore(l,d):void 0,m=(0,i().VK)((()=>null==g?void 0:g.isDefined()),[g]);return l&&"relation"===t.type&&p&&"relation"===p.type&&d&&g&&m&&t.value?(0,u().t2)(t.value)?s?(0,N.jsx)(ne,{relatedCollectionAppUri:s,groupValueInner:t.value,collectionContextStore:r,collectionPointer:d,targetCollectionStore:g,parentStore:l,style:a,relationPropertySchema:p}):null:(0,u().RA)(t.value)?(0,N.jsx)(re,{parentStore:l,groupValueInner:t.value,collectionContextStore:r,propertySchema:p}):null:null}function ne(e){var t;let{relatedCollectionAppUri:o,groupValueInner:n,collectionContextStore:a,collectionPointer:l,targetCollectionStore:u,relationPropertySchema:c,parentStore:p,style:d}=e;const g=(0,y().YB)(),C=(0,r().O7)(),b=n.value.variable,M=(0,i().VK)((()=>u.isDefined()),[u]),w=(0,i().VK)((()=>(0,j().As)(a,b,l,u)),[a,b,l,u]),k=(0,i().VK)((()=>Z().default.state.mainEditorCurrentBlockStore),[]),P=(0,i().VK)((()=>w?x().mb({environment:C,store:w,mainEditorCurrentBlockStore:k,collectionContextStore:a})??(0,V().ZP)({store:w,pageVisitSource:s().tY.LinkInPage}):void 0),[C,w,k,a]);let T;"current"===b?T=g.formatMessage(v().sY.tasksCurrentSprintV2ViewNamePrefix):"next"===b?T=g.formatMessage(v().sY.tasksNextSprintV2ViewNamePrefix):"last"===b?T=g.formatMessage(v().sY.tasksLastSprintV2ViewNamePrefix):(0,f().t1)(b);const _=null===(t=m().qB[o])||void 0===t?void 0:t[b];if(M){if(!w)return(0,N.jsx)("div",{style:{fontWeight:h().Ue.medium},children:(0,N.jsx)(y()._H,{...null==_?void 0:_.messageDescriptor})});if(w)return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{style:{fontWeight:h().Ue.medium,marginBottom:.25},children:[T,":"]}),(0,N.jsx)(B().Z,{style:{...d,marginLeft:1},innerStyle:{...Q},href:P,onClick:()=>{S().E3({collectionSettingsStore:a.settingsStore})},children:(0,N.jsx)(K().Z,{format:H().ZP.Format.Medium,blockId:w.id,isSingle:!0,shouldShrink:!0,parentStore:p,relationPropertySchema:c})})]})}return(0,N.jsx)("div",{style:{fontWeight:h().Ue.medium,marginBottom:.25},children:(0,N.jsx)(y()._H,{...null==_?void 0:_.messageDescriptor})})}function re(e){let{parentStore:t,groupValueInner:o,collectionContextStore:n,propertySchema:a,style:l}=e;const u=(0,r().O7)(),c=k().G.createChildStore(t,o),p=(0,i().VK)((()=>Z().default.state.mainEditorCurrentBlockStore),[]),d=(0,i().VK)((()=>x().mb({environment:u,store:c,mainEditorCurrentBlockStore:p,collectionContextStore:n})??(0,V().ZP)({store:c,pageVisitSource:s().tY.LinkInPage})),[u,c,p,n]);return(0,N.jsx)(B().Z,{style:l,innerStyle:{...Q},href:d,onClick:()=>{S().E3({collectionSettingsStore:n.settingsStore})},children:(0,N.jsx)(K().Z,{format:H().ZP.Format.Medium,blockId:o.id,isSingle:!0,shouldShrink:!0,parentStore:t,relationPropertySchema:a})})}function ie(e){let{schema:t,currentGroups:o,groupBy:n,groupFormat:r,onChange:i,onClose:a,buttonPopupStore:l,parentStore:s}=e;return s?(0,N.jsx)(P().Q,{groupFormat:r,groupBy:n,currentGroups:o,schema:t,onChange:e=>{l.reset(),null==i||i(e)},onClose:()=>{l.reset(),null==a||a()},parentStore:s}):null}function ae(e){var t;let{schema:o,currentGroups:i,groupBy:a,groupFormat:l,onChange:s,onClose:u,disabled:g,style:m,buttonPopupStore:y,parentStore:f}=e;const h=(0,r().O7)(),S=(0,n.useCallback)((()=>(0,N.jsx)(ie,{schema:o,currentGroups:i,groupBy:a,groupFormat:l,onChange:s,onClose:u,buttonPopupStore:y,parentStore:f})),[o,i,a,l,s,u,y,f]),v=o[l.property];if(!v||!c().cu(v))return null;const x=l.value;if(null===(t=v.options)||void 0===t||!t.length||void 0===x.value||x.type!==v.type)return null;const C=(0,p().i7)(v.options,x.value);return C?(0,N.jsx)(F().ZP,{render:S,disabled:g,buttonPopupStore:y,popupType:h.device.isMobile?F().Z4.SlideUp:F().Z4.Popup,originGap:4,renderOrigin:e=>(0,N.jsx)(_().Z,{style:{...Q,...m},disabled:g,...e,children:(0,N.jsx)(A().a,{format:d().lo.Medium,isSingle:!0,value:C.value,color:C.color,showRemoveButton:!1})})}):null}function le(e){let{groupValue:t,schema:o,currentGroups:a,groupBy:s,groupFormat:c,onChange:p,onClose:d,disabled:g,style:m,isHiddenGroup:y,buttonPopupStore:f,parentStore:h}=e;const S=(0,r().O7)(),v=(0,n.useCallback)((()=>(0,N.jsx)(ie,{schema:o,currentGroups:a,groupBy:s,groupFormat:c,onChange:p,onClose:d,buttonPopupStore:f,parentStore:h})),[o,a,s,c,p,d,f,h]),{value:x}=t,C=(0,i().VK)((()=>t.value&&(0,u().q6)(t)&&h?(0,l().Hl)({pointer:t.value,getRecordValue:h.getRecordValue}):void 0),[t,h]);return(0,u().q6)(t)&&x&&h&&null!=C&&C.asActor?(0,N.jsx)(F().ZP,{render:v,disabled:g,buttonPopupStore:f,popupType:S.device.isMobile?F().Z4.SlideUp:F().Z4.Popup,originGap:4,renderOrigin:e=>(0,N.jsx)(_().Z,{style:{...Q,...m},disabled:g,...e,children:(0,N.jsx)(H().ZP,{format:H().ZP.Format.Medium,actor:C,showRemoveButton:!1,isSingle:!0,disableAvatarTooltip:y,shouldShrink:!0})})}):null}function se(e){let{groupValue:t,schema:o,currentGroups:i,groupBy:a,groupFormat:l,onChange:s,onClose:c,disabled:p,style:d,buttonPopupStore:g,parentStore:m}=e;const y=(0,r().O7)(),f=(0,n.useCallback)((()=>(0,N.jsx)(ie,{schema:o,currentGroups:i,groupBy:a,groupFormat:l,onChange:s,onClose:c,buttonPopupStore:g,parentStore:m})),[o,i,a,l,s,c,g,m]);if(!(0,u().R7)(t))return null;if(void 0!==t.value){const e=(0,N.jsx)($,{value:t.value});return"exact"===t.value.type?(0,N.jsx)(F().ZP,{render:f,disabled:p,buttonPopupStore:g,popupType:y.device.isMobile?F().Z4.SlideUp:F().Z4.Popup,originGap:4,renderOrigin:t=>(0,N.jsx)(_().Z,{style:{...E,...h().Yu,...d},disabled:p,...t,children:e})}):(0,N.jsx)("div",{style:E,children:e})}return null}function ue(e){let{groupValue:t,propertySchema:o,schema:n,currentGroups:r,groupBy:i,groupFormat:a,onChange:l,onClose:s,disabled:c,style:p,isHiddenGroup:d,collectionContextStore:g,buttonPopupStore:m,parentStore:y,relatedCollectionAppConfigUri:h}=e;return"select"===t.type||"multi_select"===t.type?(0,N.jsx)(ae,{schema:n,currentGroups:r,groupBy:i,groupFormat:a,onChange:l,onClose:s,disabled:c,style:p,buttonPopupStore:m,parentStore:y}):"status"===t.type?(0,N.jsx)(D,{groupFormat:a,schema:n}):(0,u().pd)(t.type)?(0,N.jsx)(le,{schema:n,currentGroups:r,groupBy:i,groupFormat:a,onChange:l,onClose:s,disabled:c,style:p,isHiddenGroup:d,buttonPopupStore:m,parentStore:y,groupValue:t}):"relation"===t.type?(0,N.jsx)(oe,{schema:n,groupFormat:a,collectionContextStore:g,style:p,parentStore:y,relatedCollectionAppConfigUri:h,groupValue:t}):"location"===t.type?(0,N.jsx)(te,{style:p,collectionContextStore:g,parentStore:y,groupValue:t}):(0,u().A1)(t.type)?(0,N.jsx)(X,{style:p,groupValue:t}):(0,u().HB)(t.type)?(0,N.jsx)(se,{schema:n,currentGroups:r,groupBy:i,groupFormat:a,onChange:l,onClose:s,disabled:c,style:p,buttonPopupStore:m,parentStore:y,groupValue:t}):"number"===t.type?(0,N.jsx)(J,{style:p,groupValue:t,propertySchema:"number"===o.type?o:void 0}):"checkbox"===t.type?(0,N.jsx)(q,{style:p,propertySchema:o,groupValue:t}):void(0,f().t1)(t.type)}},249392:(e,t,o)=>{o.d(t,{Z:()=>a});var n=o(667294),r=o(785893);function i(e){const{pageName:t,targetCollectionStore:n,...i}=e,a=(0,o(219727).Fy)(),l=(0,o(142735).VK)((()=>n.getIcon()),[n]),s=(0,o(846550).yK)((e=>({medium:{color:e.mediumTextColor},dbName:{display:"flex",alignItems:"center",marginLeft:4},title:{marginLeft:o(820748).Qi*(a.isRetina?.5:1)},icon:{width:16,fill:e.mediumIconColor}})),[a.isRetina]),u=(0,r.jsxs)("div",{style:s.dbName,children:[(0,r.jsx)(o(943620).Z,{disabled:!0,icon:l,isEmptyPage:!1,size:a.isMobile?24:20}),(0,r.jsx)(o(384241).Z,{store:n,style:s.title})]});return(0,r.jsx)(o(827973).Z,{title:(0,r.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,r.jsx)(o(788860)._H,{id:"database.searchRelation.createNewPageFooter",defaultMessage:"<medium>New</medium> {pageName} <medium> in</medium> {databaseNameWithIcon}",values:{medium:e=>(0,r.jsx)("span",{style:s.medium,children:e}),pageName:(0,r.jsx)("span",{style:{marginLeft:4,marginRight:4},children:t}),databaseNameWithIcon:u}})}),icon:(0,o(521777).R)(s.icon),...i})}const a=n.memo(i)},103163:(e,t,o)=>{o.d(t,{Z:()=>C});o(670560),o(267602),o(30005),o(241792),o(667294);var n=()=>o(332143),r=()=>o(788860),i=()=>o(513670),a=()=>o(921743),l=()=>o(667247),s=()=>o(352230),u=()=>o(164079),c=()=>o(998901),p=()=>o(461843),d=()=>o(827973),g=()=>o(198829),m=()=>o(255577),y=()=>o(470386),f=()=>o(388284),h=()=>o(654133),S=()=>o(868744),v=o(785893);const x=(0,r().vU)({noneText:{defaultMessage:"None",id:"database.propertyAggregationMenu.noneText"}});const C=(0,r().XN)((function(e){let{onClose:t,property:i,schema:a,currentAggregation:u,source:c,noneText:p,intl:h,onChange:C}=e;const b=(0,o(219727).O7)(),{device:w}=b;let Z;Z=w.isMobile?{menuType:s().o.Modal,title:(0,v.jsx)(r()._H,{defaultMessage:"Table aggregation",id:"database.mobilePropertyAggregationMenu.title"}),right:(0,v.jsx)(y().DoneMenuText,{}),onClickRight:t}:{menuType:s().o.Popup,width:200};const[k,P]=function(e,t,o,r,i,a,u,c){const p=[];let h=0,C=0;const{device:b}=a,w=function(e,t,o,r,i){const a={},l=null==i?void 0:i.enforceMaxAggregationLimit,s=null==i?void 0:i.aggregator,u=t[e];if(!u)return{};const c=e=>o(e,l);for(const p of n().o5)a[p]=j(p===s,p,c);if((0,n().iV)(u))for(const p of n().Sy)a[p]=j(p===s,p,c);if((0,n().O4)(u))for(const p of n().k$)a[p]=j(p===s,p,c);if((0,n().dN)(u))for(const p of n().f8)a[p]=j(p===s,p,c);if((0,n().Mv)(u))for(const p of n().gC)a[p]=j(p===s,p,c);if((0,n().Ei)(u))for(const p of n().OK)a[p]=M(e,p,i,t,o,r);if((0,n().FN)(u))for(const p of n().tD)a[p]=j(p===s,p,c);return a}(e,t,i,a,u);p.push({key:"none",render:e=>(0,v.jsx)(d().Z,{...e,checkState:!u,title:c||r.formatMessage(x.noneText)}),action:()=>i(void 0)});let Z="tableAggregation"===o?1:2;return Object.entries(n().cY).forEach((e=>{let[t,r]=e;const a=[];for(const i of r)if(w[i]){if("show_unique"===i)switch(o){case"tableAggregation":continue;case"rollupPropertyMenu":p.splice(1,0,w[i]),(null==u?void 0:u.aggregator)===i&&(h=1);continue}a.push(w[i]),(u&&(0,n().en)(null==u?void 0:u.aggregator)&&u.aggregator.operator===i||(null==u?void 0:u.aggregator)===i)&&(h=Z,C=a.length-1)}const c=[];if("count_aggregations"===t&&c.push({key:"limitToggleSection",render:e=>(0,v.jsx)(f().Z,{...e}),items:[V(u,i)]}),c.push({key:"aggregations",render:e=>(0,v.jsx)(f().Z,{topBorder:!0,...e}),items:a}),a.length>0){Z++;const e=l().nL[t],o={key:e,render:(t,o)=>(0,v.jsx)(S().Z,{...t,disableDefaultClick:!0,onFocus:o.onFocus,renderOrigin:(t,o)=>(0,v.jsx)(d().Z,{...t,ref:o,title:e}),renderExtension:(t,n)=>{let r;return r=b.isMobile?{menuType:s().o.Modal,title:e,right:(0,v.jsx)(y().DoneMenuText,{}),onClickRight:n.close,...t}:{menuType:s().o.Popup,width:250,...t},(0,v.jsx)(g().Z,{...r,children:(0,v.jsx)(m().Z,{type:m().i.Vertical,initialFocus:C,sections:c,onAccept:(e,t,r)=>{n.close(),o.onAccept&&o.onAccept(e,t,r)}})})}}),action:()=>null};p.push(o)}})),[p,h]}(i,a,c,h,C,b,u,p);return(0,v.jsx)(g().Z,{...Z,children:(0,v.jsx)(m().Z,{type:m().i.Vertical,initialFocus:P??0,sections:[{key:0,render:e=>(0,v.jsx)(f().Z,{...e}),items:k}],onAccept:t})})}));function b(e){let{isSelected:t,aggregationType:o,label:n,props:r}=e;const i=l().Sn[o];return(0,v.jsx)(h().Z,{placement:c().Placement.Right,delayThreshold:0,render:e=>(0,v.jsx)(d().Z,{title:n,checkState:t,...(0,u().Z)(e,r)}),renderTooltip:()=>(0,v.jsxs)("div",{style:{width:140,whiteSpace:"normal"},children:[i&&(0,v.jsx)("img",{src:(0,a().D)(i),style:{borderRadius:4,width:140,marginTop:4}}),l().BG[o]]})},r.key)}function j(e,t,o){const n=l().VN[t],r=l().Sn[t];return{key:n,render:o=>(0,v.jsx)(h().Z,{placement:c().Placement.Right,delayThreshold:0,render:t=>(0,v.jsx)(d().Z,{title:n,checkState:e,...(0,u().Z)(t,o)}),renderTooltip:()=>(0,v.jsxs)("div",{style:{width:140,whiteSpace:"normal"},children:[r&&(0,v.jsx)("img",{src:(0,a().D)(r),style:{borderRadius:4,width:140,marginTop:4}}),l().BG[t]]})},o.key),action:()=>{o(t)}}}function M(e,t,o,r,a,u){const{device:c}=u,p=l().VN[t],h=i().oA(function(e,t,o,r,i){const a=r[t];if(!a||"status"!==a.type)return;const l=a.groups;return l?l.map((t=>{const r=(e&&(0,n().en)(e.aggregator)&&e.aggregator.operator===o&&e.aggregator.groupName===t.name)??!1;return{key:`${o}${t.name}`,render:e=>(0,v.jsx)(b,{isSelected:r,aggregationType:o,label:t.name,props:e}),action:()=>{i({operator:o,groupName:t.name})}}})):void 0}(o,e,t,r,a));let x=0;if(o&&(0,n().en)(null==o?void 0:o.aggregator)&&o.aggregator.operator===t){const e=o.aggregator.groupName,n=h.findIndex((o=>o.key===`${t}${e}`));-1!==n&&(x=n)}return{key:t,render:(e,t)=>(0,v.jsx)(S().Z,{...e,onFocus:t.onFocus,renderOrigin:e=>(0,v.jsx)(d().Z,{...e,title:p}),renderExtension:(e,o)=>{let n;return n=c.isMobile?{menuType:s().o.Modal,title:p,right:(0,v.jsx)(y().DoneMenuText,{}),onClickRight:o.close,...e}:{menuType:s().o.Popup,width:200,...e},(0,v.jsx)(g().Z,{...n,children:(0,v.jsx)(m().Z,{type:m().i.Vertical,initialFocus:x,sections:[{key:"groups",render:e=>(0,v.jsx)(f().Z,{...e}),items:h}],onAccept:t.onAccept})})}}),action:()=>null}}function V(e,t){const o=Boolean(null==e?void 0:e.enforceMaxAggregationLimit);return{key:"aggregationLimitToggle",render:e=>(0,v.jsx)(p().Z,{on:o,menuListItemProps:e}),action:()=>{t(e?e.aggregator:"count",!o)}}}},129636:(e,t,o)=>{o.d(t,{Z:()=>l});o(667294);var n=()=>o(219727),r=()=>o(846550),i=()=>o(568017),a=o(785893);const l=function(e){const{color:t}=e;return(0,a.jsx)(o(827973).Z,{...e,icon:(0,a.jsx)(s,{color:t}),title:(0,o(527511).Vn)(t)})};function s(e){let{color:t}=e;const o=(0,r().Fg)(),l=(0,n().O7)(),s=(0,i().KR)(o,t);return(0,a.jsx)("div",{style:{width:l.device.isMobile?24:18,height:l.device.isMobile?24:18,background:s.menuBackgroundColor,color:s.textColor,boxShadow:o.innerBorderBoxShadow,borderRadius:4}})}},461843:(e,t,o)=>{o.d(t,{Z:()=>i});o(667294);var n=()=>o(788860),r=o(785893);const i=function(e){let{on:t,menuListItemProps:i}=e;return(0,r.jsx)(o(667637).Z,{...i,on:t,style:{alignItems:"flex-start",paddingTop:8,paddingBottom:8},title:(0,r.jsx)(n()._H,{defaultMessage:"Show large counts as 99+",id:"BoardAggregations.aggregationLimitToggle.title"}),captionStyle:{marginTop:6},shouldWrapCaption:!0,caption:(0,r.jsx)(n()._H,{defaultMessage:"This improves performance for large databases.",id:"BoardAggregations.aggregationLimitToggle.description"})})}},473604:(e,t,o)=>{o.d(t,{Z:()=>a});o(667294);var n=()=>o(701182);o(670560),o(267602),o(731107);var r=o(785893);const i=16;function a(e){const{startPoint:t,endPoint:o,style:i,showArrowHead:a,useRightAngles:u,cornerRadiusOverride:c,handleMouseMove:p,handleMouseLeave:d}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s,{startPoint:t,startCurvePoint:u?void 0:{x:t.x+n().i2,y:t.y},endPoint:a?{x:o.x-1.5,y:o.y}:o,endCurvePoint:u?void 0:{x:o.x-n().i2,y:o.y},cornerRadiusOverride:c,style:i,handleMouseMove:p,handleMouseLeave:d,children:e.children}),a&&(0,r.jsx)(l,{endPoint:o,style:i})]})}function l(e){const{endPoint:t,style:o}=e;return(0,r.jsx)("polyline",{points:`${t.x-5},${t.y-6} ${t.x},${t.y} ${t.x-5},${t.y+6}`,style:o,fill:"transparent"})}function s(e){const{startPoint:t,startCurvePoint:o,endPoint:n,endCurvePoint:a,style:l,cornerRadiusOverride:s,handleMouseMove:u,handleMouseLeave:c}=e;let p="";p=o&&a?`M ${t.x} ${t.y} L ${o.x} ${o.y} L ${a.x} ${a.y} L ${n.x} ${n.y}`:`M ${t.x} ${t.y} L ${t.x} ${n.y} L ${n.x} ${n.y}`;const d=function(e,t){function o(e,t,o){const r=t.x-e.x,i=t.y-e.y,a=Math.sqrt(r*r+i*i);return n(e,t,Math.min(1,o/a))}function n(e,t,o){return{x:e.x+(t.x-e.x)*o,y:e.y+(t.y-e.y)*o}}function r(e,t){e.length>2&&(e[e.length-2]=t.x.toString(),e[e.length-1]=t.y.toString())}function i(e){return{x:parseFloat(e[e.length-2]),y:parseFloat(e[e.length-1])}}const a=e.split(/[,\s]/).reduce(((e,t)=>{const o=t.match("([a-zA-Z])(.+)");return o?(e.push(o[1]),e.push(o[2])):e.push(t),e}),[]).reduce((function(e,t){return!isNaN(parseFloat(t))&&e.length?e[e.length-1].push(t):e.push([t]),e}),[]);let l=[];if(a.length>1){const e=i(a[0]);let s=null;"Z"===a[a.length-1][0]&&a[0].length>2&&(s=["L",e.x.toString(),e.y.toString()],a[a.length-1]=s),l.push(a[0]);for(let u=1;u<a.length;u++){const e=l[l.length-1],c=a[u],p=c===s?a[1]:a[u+1];if(p&&e&&e.length>2&&"L"===c[0]&&p.length>2&&"L"===p[0]){const a=i(e),s=i(c),u=i(p),d=o(s,a,t),g=o(s,u,t);r(c,d),l.push(c);const m=n(d,s,.5),y=n(s,g,.5),f=["C",m.x.toString(),m.y.toString(),y.x.toString(),y.y.toString(),g.x.toString(),g.y.toString()];l.push(f)}else l.push(c)}if(s){const e=i(l[l.length-1]);l.push(["Z"]),r(l[0],e)}}else l=a;return l.reduce((function(e,t){return`${e}${t.join(" ")} `}),"")}(p,s||i);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d,style:l,fill:"transparent"}),(u||c)&&(0,r.jsxs)("g",{onMouseMove:u,onMouseLeave:c,children:[(0,r.jsx)("path",{d,style:{strokeOpacity:0,strokeWidth:16,pointerEvents:"stroke",cursor:"default"},fill:"transparent"}),e.children]})]})}},817870:(e,t,o)=>{o.d(t,{C:()=>a,g:()=>l});o(821057);var n=o(667294),r=o(785893);const i=n.createContext(void 0);function a(e){return(0,r.jsx)(i.Provider,{value:e.value,children:e.children})}function l(){const e=n.useContext(i);if(!e)throw new Error("useChartStore must be used within a ChartContextProvider");return e}i.displayName="ChartContext"},412511:(e,t,o)=>{o.d(t,{$G:()=>l,AN:()=>u,Xq:()=>p,du:()=>a});o(670560),o(267602),o(916054),o(653476),o(470928);var n=()=>o(730120),r=()=>o(803021),i=()=>o(526243);function a(e){const t=n().ou.fromMillis(e.startUnixTimestampMS),o=e.endUnixTimestampMS?n().ou.fromMillis(e.endUnixTimestampMS):void 0,r=n().ou.fromMillis(e.startOfWeekUnixTimestampMS),i=n().ou.fromMillis(e.endOfWeekUnixTimestampMS),a=t.startOf("day"),l=n().ou.max(r,a),s=Math.ceil(l.diff(r,"days").get("days"));let u=1;if(o){const e=o.endOf("day"),t=n().ou.min(i,e);u=Math.ceil(t.diff(l,"days").get("days"))}return{start:t,end:o,startOfWeek:r,endOfWeek:i,startColumn:s,columnCount:u}}function l(e){const t=(e.attendees||[]).filter((e=>!e.self&&!e.resource));return e.hasParticipants&&t.length>0&&t.every((e=>"declined"===e.responseStatus))}const s={upcomingMinsThreshold:10,startingMinsThreshold:5,startedMinsThreshold:15};function u(e){const t=e.filter((e=>{var t;if(!e.conferencing)return!1;return!function(e){if("declined"===e)return!0;return!1}((null===(t=e.attendees)||void 0===t?void 0:t.find((e=>e.self)))?e.responseStatus??"accepted":"accepted")&&!e.isAllDay}));if(0===t.length)return;const{upcomingMinsThreshold:o,startingMinsThreshold:r,startedMinsThreshold:i}=s,a=[],l=[],u=[],p=[],d=[];for(const s of t){if(s.isAllDay)continue;const e=c(s),t=n().ou.now(),g=e.start.diff(t,"minutes").minutes;g>=0&&g<=o?a.push(s):-g>=r?u.push(s):-g>=i?p.push(s):e.contains(t)?l.push(s):d.push(s)}return[...a,...u,...p,...l,...d][0]}function c(e){const t=n().ou.fromISO(e.start.dateTime,{zone:e.start.timeZone}),o=n().ou.fromISO(e.end.dateTime,{zone:e.end.timeZone});return n().Xp.fromDateTimes(t,o)}function p(e){let{newCalendarStart:t,newCalendarEnd:o,collectionViewId:n,currentUserId:a="0"}=e;(0,r().nQ)(t,o,Date.now())?i().ZP.clearLocalDateRangeStart({collectionViewId:n,currentUserId:a}):i().ZP.setLocalDateRangeStart({collectionViewId:n,currentUserId:a,dateRangeStart:t})}},867601:(e,t,o)=>{o.d(t,{Cf:()=>R,EF:()=>I,JO:()=>M,Li:()=>w,cB:()=>F,i1:()=>Z,pw:()=>B,qM:()=>k,qk:()=>j,rU:()=>_,sA:()=>G,sM:()=>T,vM:()=>P,wB:()=>V});o(821057),o(267602),o(916054),o(653476),o(241792),o(228244);var n=o.n(o(443261)),r=()=>o(912203),i=()=>o(473304),a=()=>o(455947),l=()=>o(226413),s=()=>o(871379),u=()=>o(177634),c=()=>o(956057),p=()=>o(528514),d=()=>o(752778),g=()=>o(955620),m=()=>o(513670),y=()=>o(855741),f=()=>o(696459),h=()=>o(960597),S=()=>o(749826),v=()=>o(826955),x=()=>o(815277),C=()=>o(270315),b=()=>o(122479);function j(e){const{automationStore:t,collectionStore:o,typecheckResult:n}=e,i=o.getSchema(),a=t.getKeyStore("properties").getKeyStore("name").getValue();if(null==a||!a.trim())return!1;if(!(0,r().Of)({automationTrigger:t.getTrigger(),collectionSchema:i}))return!1;const l=t.getActionStores().filter((e=>e.isDefined()));return 0!==l.length&&l.every((e=>M({actionStore:e,collectionStore:o,typecheckResult:n})))}function M(e){const{actionStore:t,collectionStore:o,typecheckResult:n}=e;if((0,h().pM)(n,t.id).length>0)return!1;if(t.isType("slack_notification"))return(0,f().$K)(t.getConfigStore().getKeyStore("external_bot_id").getValue())&&(0,f().$K)(t.getConfigStore().getKeyStore("target").getValue());if(t.isType("send_gmail_notification")){const e=t.getConfigStore(),o=e.getKeyStore("to").getValue(),n=e.getKeyStore("email_subject").getValue(),r=e.getKeyStore("email_body").getValue();return!(!n||!r||(0,g().PgY)(n.value)||(0,g().PgY)(r.value))&&!(!(o&&o.value&&o.value.value)||m().xb(o.value.value))}if(t.isType("update_pages")){const e=t.getConfigStore().getKeyStore("target").getValue(),i=t.getConfigStore().getKeyStore("properties").getValue()??[];if(!(0,f().$K)(e)||0===i.length)return!1;if("collection"===e.type){const t=v().NW.createChildStore(o,e.collection).getSchema();if(i.some((e=>(0,r().LF)({property:e,collectionSchema:t})||(0,r().Jy)({collectionSchema:t,property:e,type:"action"}))))return!1}else if("variable"===e.type){const a=(0,u().MY)(e.id);if("global"===a.source&&"button_page"===a.global){const e=o.getSchema();if(i.some((t=>(0,r().LF)({property:t,collectionSchema:e})||(0,r().Jy)({collectionSchema:e,property:t,type:"action"}))))return!1}else{if(y().x.isFail(n))return!1;const o=(0,u().vx)(n.value.valueTypes,e.id),a=o?V(o,t):void 0;if(!a)return!1;const l=a.getSchema();if(i.some((e=>(0,r().LF)({property:e,collectionSchema:l})||(0,r().Jy)({collectionSchema:l,property:e,type:"action"}))))return!1}}else{if("page"===e.type)return!1;(0,f().t1)(e)}return!0}if(t.isType("create_page")){const e=t.getConfigStore().getKeyStore("collection").getValue();if(!(0,f().$K)(e))return!1;const n=v().NW.createChildStore(o,e).getSchema();return!(t.getConfigStore().getKeyStore("properties").getValue()??[]).some((e=>(0,r().LF)({property:e,collectionSchema:n})||(0,r().Jy)({collectionSchema:n,property:e,type:"action"})))}if(t.isType("send_in_app_notification")){const e=t.getConfigStore(),o=e.getKeyStore("target").getValue(),n=e.getKeyStore("notification_message").getValue();if(!o||!n||(0,g().PgY)(n.value))return!1;switch(o.type){case"property":if(!o.propertyId||!o.collectionPointer)return!1;break;case"formula":if(!o.value||!o.value.value||m().xb(o.value.value))return!1}return!0}if(t.isType("define_variables"))return!0;if(t.isType("http_request"))return!0;if(t.isType("publish_site")){const e=t.getConfigStore().getKeyStore("target").getValue();return!!(0,f().$K)(e)}throw new Error(`isActionStoreComplete not implemented for ${t.getType()}`)}function V(e,t){let o;return"block"===e.type.type&&e.type.collection?o=v().NW.createChildStore(t,e.type.collection):"array"===e.type.type&&"block"===e.type.of.type&&e.type.of.collection&&(o=v().NW.createChildStore(t,e.type.of.collection)),o}function w(e){const{collectionStore:t}=e;if(!t||(0,b().EY)(t)||(0,b().Aw)(t))return!1;const o=(0,x().DE)(t.environment,{name:"premium_automations",spaceId:t.getSpaceId(),userId:t.userId});if((t.getFormat().automation_ids??[]).length>=i().ss&&!o)return!1;const n=t.pointer,r=t.getSpaceId();return(0,s().IC)({targetTriggerType:"event",targetParentPointer:n,targetSpaceId:r}).every((e=>{let{pointer:o,minimumRequiredRole:n}=e;const r=t.getRecordRole(o);return!!r&&(0,p().yY)(r,n)}))}function Z(e){const{automationStore:t,actionStores:o,collectionStore:n}=e,r=t.getParentStore();if(!r||(0,b().EY)(r)||(0,b().Aw)(n))return!1;const i=t.getMinimumFieldsForPermissions();if(!i)return!1;if(!o.every((e=>e.isDefined())))return!1;const a=o.some((e=>!e.isType("slack_notification")));if(!(0,x().DE)(n.environment,{name:"premium_automations",spaceId:n.getSpaceId(),userId:n.userId})&&a)return!1;return(0,s().fz)({automationValue:i,actionValues:o.map((e=>({config:e.getConfig(),type:e.getType()})))}).every((e=>{let{pointer:o,minimumRequiredRole:n}=e;const r=t.getRecordRole(o);return!!r&&(0,p().yY)(r,n)}))}function k(e){const{automationStore:t,collectionStore:o}=e,n=t.getParentStore();if(!n||(0,b().EY)(n)||(0,b().Aw)(o))return!1;const r=t.getMinimumFieldsForPermissions();if(!r)return!1;return(0,s().bM)(r).every((e=>{let{pointer:o,minimumRequiredRole:n}=e;const r=t.getRecordRole(o);return!!r&&(0,p().yY)(r,n)}))}function P(e){const{automationStore:t,collectionStore:o}=e;if(!t.isTriggerType("event")&&!t.isTriggerType("notification_event"))return!1;const n=t.getEventConfiguration();if(!n||void 0===n.source||n.source.type===d().vF||"filter"===n.source.type)return!1;const r=v().Xr.createChildStore(o,n.source.pointer);return function(e){const t=_(e),o=T(e);return(0,f().$K)(t)||(0,f().$K)(o)}({collectionSchema:o.getSchema(),collectionViewStore:r})}function T(e){var t;if(!S().default.checkGate({gateName:"collections_xws"}))return;const{collectionViewStore:o,collectionSchema:n}=e,r=o.getPropertyFiltersStore().getValue()??[],i=null===(t=o.getQuery(n))||void 0===t?void 0:t.filter,s={operator:"and",filters:(0,a().OH)({propertyFilters:r,combinatorFilter:i,schema:n})},u=(0,a().SH)(s,(e=>{if((0,a().aN)(e)){const t=n[e.property];return!!t&&(0,l().W2)(o.getSpaceId(),t,n)}return!1}));return u&&(0,a().aN)(u)?u.property:void 0}function _(e){var t;const{collectionViewStore:o,collectionSchema:n}=e,i=o.getPropertyFiltersStore().getValue()??[],l=null===(t=o.getQuery(n))||void 0===t?void 0:t.filter,s={operator:"and",filters:(0,a().OH)({propertyFilters:i,combinatorFilter:l,schema:n})},u=(0,a().SH)(s,(e=>{if((0,a().aN)(e)){const t=n[e.property];return!!t&&!(0,r().TX)(t)}return!1}));if(u)return(0,a().aN)(u)?u.property:(0,a().Mm)(u)?u.timestamp:void 0}function F(e){if("collectionTypedView"===e.contextType)return!1;const t=e.collectionStore();return!!t&&(!(t.isSyncedCollection()&&!S().default.checkGate({gateName:"support_synced_database_automations"}))&&void 0===e.viewsModuleContextStore.state)}function I(e){const{collectionSchema:t,propertyIds:o,searchTerm:r}=e;if(!r)return o.slice(0);const i=new Map,a=o.map((e=>{const o=t[e],n=o?`${o.name} ${C().SO[o.type]}`:"";return i.set(e,n),n})),l=n().filter(r,a).map((e=>{let{original:t}=e;return t}));return o.filter((e=>l.includes(i.get(e)??"")))}function B(e){return{pagesAdded:!1,pagePropertiesEdited:{type:"none"},source:{pointer:e.getSpaceShardedPointer(),type:d().vF}}}function G(e){const{automationId:t,automationName:o,collectionStore:n,userId:r}=e;return function(e){const{actionIds:t,automationId:o,collectionStore:n,eventConfiguration:r,lastEditedTime:i,properties:a,userId:l}=e,s=Date.now();return{action_ids:t,alive:!0,created_by_id:l,created_by_table:"notion_user",created_time:s,id:o,last_edited_by_id:l,last_edited_by_table:"notion_user",last_edited_time:i??s,parent_id:n.id,parent_table:d().vF,properties:a??{},space_id:n.getSpaceId(),status:"active",trigger:{event:r,id:c().Il(),type:"event"},version:1}}({actionIds:[],automationId:t,collectionStore:n,eventConfiguration:B(n),properties:{name:o},userId:r})}function R(e){const{tab:t}=e;return"automationSettings"===(null==t?void 0:t.type)||"automationCreateSettings"===(null==t?void 0:t.type)||"automationEditSettings"===(null==t?void 0:t.type)}},731738:(e,t,o)=>{o.d(t,{Dl:()=>s,OG:()=>l,uL:()=>a});var n=()=>o(926724),r=()=>o(605974),i=()=>o(129338);const a=(0,o(788860).vU)({sprintUncategorizedGroup:{defaultMessage:"Backlog (No {name})",id:"database.sprintDatabaseView.uncategorizedGroupLabel"}});function l(e){const{collectionStore:t,property:o,propertySchema:r,parentStore:a}=e;let l=!1;if(null!=t&&t.isDefined()){const e=t.getPropertyMapping();l=(null==e?void 0:e[n().Es.TaskToSprintRelation])===o}return(0,i().ke)(r,a)===n().p$||l}function s(e){return(0,r().PB)({appUri:e.getFormatStore().getKeyStore("app_config_uri").getValue(),collectionSchema:e.getSchema()})}},471654:(e,t,o)=>{o.d(t,{z:()=>r});o(667294);var n=o(785893);const r=(0,o(827282).IU)("flag",{viewBox:"0 0 13 14",svg:(0,n.jsx)("path",{d:"M0.825195 13.8457C1.16699 13.8457 1.4541 13.5654 1.4541 13.2168V9.47754C1.63867 9.40918 2.21973 9.19727 3.10156 9.19727C5.59668 9.19727 7.25781 10.4414 9.66406 10.4414C10.7168 10.4414 11.1885 10.3115 11.7217 10.0654C12.207 9.84668 12.4941 9.4502 12.4941 8.82129V1.99219C12.4941 1.55469 12.1523 1.27441 11.6943 1.27441C11.3047 1.27441 10.6895 1.54102 9.58887 1.54102C7.20996 1.54102 5.52148 0.296875 3.0332 0.296875C1.99414 0.296875 1.5293 0.419922 0.975586 0.672852C0.49707 0.891602 0.196289 1.24707 0.196289 1.86914V13.2168C0.196289 13.5586 0.483398 13.8457 0.825195 13.8457ZM9.63672 9.16309C7.41504 9.16309 5.71289 7.92578 3.12207 7.92578C2.45215 7.92578 1.84375 8.00098 1.48145 8.14453V2.0332C1.59766 1.83496 2.11035 1.56836 3.05371 1.56836C5.38477 1.56836 7.09375 2.80566 9.56836 2.80566C10.2383 2.80566 10.792 2.73047 11.2158 2.61426V8.69824C11.0996 8.89648 10.5801 9.16309 9.63672 9.16309Z"})})},380920:(e,t,o)=>{o.d(t,{K:()=>r});o(667294);var n=o(785893);const r=(0,o(827282).IU)("myTasksLarge",{viewBox:"0 0 48 48",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M21.693 39.17a9.05 9.05 0 0 1-.73 1.238H39.52c1.65 0 2.892-.413 3.727-1.238.835-.824 1.253-2.05 1.253-3.68V19.203c0-1.628-.418-2.855-1.253-3.68-.835-.824-2.078-1.236-3.727-1.236H16.253c-1.66 0-2.908.412-3.744 1.237-.824.814-1.237 2.04-1.237 3.68v5.28c.212-.02.423-.036.635-.047a6.387 6.387 0 0 1 1.269 0c.222.01.438.027.65.048v-5.14c0-.824.211-1.448.634-1.87.423-.424 1.031-.635 1.824-.635h23.188c.783 0 1.39.212 1.824.634.434.423.65 1.047.65 1.872v16.003c0 .825-.216 1.449-.65 1.872-.433.423-1.041.634-1.824.634H22.248a8.47 8.47 0 0 1-.555 1.316ZM15.364 10.082c-.38.381-.629.93-.745 1.65h26.55c-.127-.72-.38-1.269-.761-1.65-.37-.39-.952-.586-1.745-.586H17.125c-.793 0-1.38.195-1.76.586ZM18.52 5.816c-.38.338-.591.846-.634 1.523h20.016c-.053-.677-.275-1.185-.666-1.523-.38-.349-.936-.523-1.665-.523H20.2c-.729 0-1.29.174-1.68.523Z"}),(0,n.jsx)("path",{d:"M9.448 42.073a7.71 7.71 0 0 0 3.11.634c1.088 0 2.12-.211 3.092-.634a8.253 8.253 0 0 0 2.57-1.745 8.123 8.123 0 0 0 1.76-2.57 7.712 7.712 0 0 0 .634-3.108 7.75 7.75 0 0 0-.634-3.124 8.032 8.032 0 0 0-1.729-2.57 8.03 8.03 0 0 0-2.57-1.728 7.75 7.75 0 0 0-3.124-.635 7.71 7.71 0 0 0-3.109.635 7.907 7.907 0 0 0-2.569 1.744 8.253 8.253 0 0 0-1.745 2.57A7.639 7.639 0 0 0 4.5 34.65c0 1.11.211 2.152.634 3.125a8.254 8.254 0 0 0 1.745 2.57 8.03 8.03 0 0 0 2.57 1.728Zm3.807-2.649c-.17.18-.402.27-.698.27-.296 0-.534-.09-.714-.27-.169-.18-.253-.412-.253-.698v-3.108H8.48c-.286 0-.518-.09-.698-.27-.18-.17-.27-.402-.27-.698 0-.296.09-.528.27-.698.18-.18.412-.27.698-.27h3.109v-3.108c0-.285.084-.518.253-.698.18-.18.418-.27.714-.27s.529.09.698.27c.18.18.27.413.27.698v3.109h3.108c.286 0 .518.09.698.27.18.169.27.401.27.697 0 .296-.09.529-.27.698-.18.18-.412.27-.698.27h-3.108v3.108c0 .286-.09.519-.27.698ZM27.229 32.326c.292.341.664.512 1.116.512.514 0 .903-.198 1.166-.592l5.693-8.58c.095-.14.164-.277.21-.413a1.3 1.3 0 0 0 .068-.401c0-.354-.124-.646-.37-.876a1.246 1.246 0 0 0-.901-.352c-.247 0-.456.05-.63.149-.168.094-.328.259-.48.493l-4.78 7.506-2.394-2.868c-.259-.3-.584-.45-.974-.45-.366 0-.668.117-.907.351a1.186 1.186 0 0 0-.357.883c0 .16.024.312.073.456.054.14.15.286.29.438l3.177 3.744Z"})]})})},452404:(e,t,o)=>{o.d(t,{Z:()=>r});class n extends(()=>o(263184))().default{getInitialState(){return!1}}const r=new n},804097:(e,t,o)=>{o.d(t,{Z:()=>r});o(267602),o(470928);class n extends(()=>o(442))().Z{findTableHeaderCell(e,t){return this.find((o=>o.collectionContextStore===e&&o.property===t))}}const r=new n},932200:(e,t,o)=>{o.d(t,{Y:()=>h,j:()=>S});var n=()=>o(219727),r=()=>o(142735),i=()=>o(29488),a=()=>o(801812),l=()=>o(255933),s=()=>o(293307),u=()=>o(824462),c=()=>o(677559),p=()=>o(876822),d=()=>o(972776),g=()=>o(601952),m=()=>o(877727),y=()=>o(999582);const f=!1;function h(e){var t;const o=null===(t=(0,c().XJ)(s().iL).value)||void 0===t?void 0:t.loadWorkflowTemplateInstances;(0,r().VK)((()=>{if(!o)return;const t=e instanceof d().Z?e.collectionStore():e;t&&o(t)}),[o,e])}function S(){const e=(0,n().O7)(),t=(0,r().VK)((()=>{var e;if(function(){if(!(0,m().C3)({disableExposureLogging:!0}))return!1;const e=g().default.state.initialRenderCompleted;f&&!e&&console.log("Initial page render is not yet completed, delaying refresh of workflow template instances.");return e}())return null===(e=p().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]);(0,a().r5)((async()=>{if(!t)return;(y().Z.debug||f)&&console.log("Refreshing workflow template instance map for space",t);const o={table:l().bx,id:t,spaceId:t},n=await u().callApi({eventName:"getWorkflowTemplateInstances",environment:e,data:{spaceId:o.spaceId,scopeTable:o.table,scopeId:o.id,enableInstanceRobustness:!0}});if("success"===n.type){const e=(0,i().O)(o);y().Z.setState({...y().Z.state,[e]:n.data.instanceMap[e]})}}),[e,t])}}}]);