"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[46257],{513461:(e,t,s)=>{s.d(t,{A:()=>f,t:()=>h});var i=()=>s(362154),n=()=>s(594546),o=()=>s(443269),a=()=>s(527278),r=()=>s(341691),l=()=>s(876822),d=()=>s(148882),c=()=>s(824462),u=()=>s(308186),p=()=>s(528918),m=()=>s(636340);const g=(0,s(788860).vU)({deletingAccount:{id:"accountActions.deletingAccount.loadingMessage",defaultMessage:"Deleting your account…"},noUserError:{id:"accountActions.deletingAccount.noUserToDeleteMessage",defaultMessage:"No account to delete."}});function f(e){const{userStore:t,data:s,transaction:i}=e,n={};"name"in s&&s.name&&(n.name=s.name),"profilePhoto"in s&&(n.profile_photo=s.profilePhoto),0!==Object.keys(n).length&&m().sW({store:t,data:n,transaction:i})}async function h(e){p().j({message:g.deletingAccount});const t=e.currentUser.id,{currentUserRootStore:s,currentUserStore:m}=l().default.state;if(!s||!m||!t)return p().x(),void u().UW(a().Z.formatMessage(g.noUserError));n().K4(e,"delete_user");const f=await c().callApi({eventName:"deleteUser",environment:e,data:{}});if("success"===f.type)await d().transactionQueue.clearForUser(t),r().logoutSingleAccount({environment:e,userId:t,logoutOrigin:i().F.DeleteAccount});else{const e=a().Z.getIntl();u().UW((0,o().wf)(e,f))}p().x()}},319615:(e,t,s)=>{s.d(t,{LC:()=>d,Zy:()=>a,iD:()=>l,rZ:()=>o,wW:()=>r,wz:()=>n});var i=()=>s(594546);function n(e,t){i().K4(e,"toggle_open_in_desktop_app",t)}function o(e){i().K4(e,"configure_open_in_desktop_app")}function a(e){i().K4(e,"open_in_desktop_app_popup_dismiss")}function r(e){i().K4(e,"open_in_desktop_app_popup_display")}function l(e){i().K4(e,"open_in_desktop_app_popup_download")}function d(e,t){i().K4(e,"open_in_desktop_app_popup_open_in_app",t)}},677181:(e,t,s)=>{s.d(t,{s:()=>x,w:()=>v});s(821057),s(667294);var i=()=>s(788860),n=()=>s(572623),o=()=>s(518019),a=()=>s(576387),r=()=>s(18281),l=()=>s(897257),d=()=>s(925713),c=()=>s(174896),u=()=>s(930085),p=()=>s(395362),m=()=>s(824462),g=()=>s(528918),f=()=>s(784234),h=()=>s(102182),S=()=>s(269299),y=s(785893);const b=(0,i().vU)({removingGuest:{id:"convertGuestToMember.removeGuest.updatingMessage",defaultMessage:"Updating…"},convertingGuest:{id:"convertGuestToMember.convertingGuest.updatingMessage",defaultMessage:"Updating…"}});async function x(e){const{environment:t,store:s,role:m,guestUserStore:x,isConvertToAdmin:v}=e,j=x.id,w=x.getEmail(),M=l().subscriptionDataStoreInstance.state,k=M?await(0,r().DI)(t,s.getSpaceId(),M):1;try{if(g().j({message:b.convertingGuest}),!s.isTeamsEnabled()){if(!(await c().HD({environment:t,flowId:"",trackCreateTeamComplete:!1})))return}const i=[{type:"user_permission",role:m,user_id:j}],{serverCommitResult:o}=S().createAndCommit({userAction:"spacePerimssionGuestActions.convertGuestToMember",environment:t,canUndo:!0,perform:e=>{f().tQ({environment:t,spaceStore:s,permissionItems:i,transaction:e,from:"convert_to_member"})}});await o,p().Rb(t,{member_user_id:j,convert_to:v?"admin":"member",origin:e.origin}),u().jB(t,{role:m,is_space:!0,invite_targets:[{type:"existingUser",value:{id:j,version:0,email:""},spaceRole:"none"}],is_onboarding:!1,invite_origin:"convert_to_member",permission_items:i,invite_message_length:0,domainType:(0,n().JF)()})}catch(_){h().oV({label:(0,y.jsx)(i()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.snackbar.failure",defaultMessage:"Failed to convert {email} to workspace member",values:{email:w}})})}finally{await a().bi(t);const e=M?await(0,r().DI)(t,s.getSpaceId(),M):1,i=1===k&&e>1,n=s.getSpaceId(),l=n?o().Z.getData(t,{spaceId:n}):void 0;if(i&&(null==l||!l.subscription)&&n){const e=await d().Ir.trialActions.load();await e.applyMultiplayerReverseTrialIfEligible({spaceId:n,environment:t})}g().x()}}async function v(e){const{environment:t,store:s,guestUserStore:n}=e,o=n.id,r=n.getEmail();try{g().j({message:b.removingGuest});if("success"!==(await m().callApi({eventName:"removeUsersFromSpace",environment:t,data:{userIds:[o],spaceId:s.id,removePagePermissions:!0,revokeUserTokens:!1}})).type)throw new Error("Failed to remove guest");p().bw(t)}catch(l){h().oV({label:(0,y.jsx)(i()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.snackbar.failure",defaultMessage:"Failed to remove {email} from workspace",values:{email:r}})})}finally{await a().bi(t),g().x(),p().fN(t,{origin:"space_setting_guest_tab",changedNumber:-1})}}},390054:(e,t,s)=>{s.d(t,{E:()=>o});var i=()=>s(777064),n=()=>s(824462);async function o(e,t){const s=await n().callApi({eventName:"getEmailDomainSettings",environment:e,data:{}});"success"===s.type&&t.setState({...t.state,emailDomainSettings:s.data});try{const s=await(0,i().pu)(e);t.setState({...t.state,accountSettings:{...s,error:void 0}})}catch(o){t.setState({...t.state,accountSettings:{...t.state.accountSettings,error:o}})}}},702075:(e,t,s)=>{s.d(t,{Z:()=>r});s(667294);var i=()=>s(788860),n=()=>s(348141),o=()=>s(876822),a=s(785893);const r=function(){const e=(0,s(219727).O7)(),{device:t}=e,o=(0,s(142735).VK)((()=>l()),[]);return(0,a.jsx)(s(579807).Z,{isMobile:t.isMobile,title:(0,a.jsx)(i()._H,{id:"calendarSettings.startWeekOnMonday.label",defaultMessage:"Start week on Monday"}),caption:(0,a.jsx)(i()._H,{id:"calendarSettings.startWeekOnMonday.message",defaultMessage:"This will change how all calendars in your app look."}),type:"toggle",isOn:1===o,onToggle:()=>function(e){const t=l();1===t?n().rx(e):n().Zf(e)}(e)})};function l(){const{currentUserSettingsStore:e}=o().default.state;if(e){const t=e.getSettings();if(t)return t.start_day_of_week}}},493462:(e,t,s)=>{s.d(t,{Z:()=>c});s(267602),s(653476),s(241792),s(228244),s(667294);var i=()=>s(788860),n=()=>s(513670),o=()=>s(155055),a=()=>s(345918),r=()=>s(76300),l=()=>s(67961),d=s(785893);const c=function(e){var t;const c=(0,s(219727).O7)(),{device:u}=c,p=(0,i().YB)(),m=(0,s(846550).yK)((e=>({icon:{width:20,height:20,fill:e.lightIconColor},spaceNameList:{listStyle:"none",maxHeight:200,overflowY:"auto",margin:0,padding:"12px 14px",display:"flex",flexDirection:"column",gap:6,border:`1px solid ${e.stroke.secondary}`},spaceItem:{display:"flex",alignItems:"center",lineHeight:"120%",width:"100%",borderRadius:6,paddingTop:4,paddingBottom:4,gap:12,height:44}})),[]),g=(0,s(142735).VK)((()=>{var e;return(0,s(122792).wP)(null===(e=s(897257).subscriptionDataStoreInstance.state)||void 0===e?void 0:e.subscriptionTier)}),[]),f=Boolean(null===(t=e.userEmailDomainSettings)||void 0===t?void 0:t.isDomainVerified),{loading:h,organizationsInfo:S}=(0,s(34854).Z)(),y=null==S?void 0:S.some((e=>e.isUserLastOwner)),b=e.disabled||f&&g||y,x=f&&g?(0,d.jsx)(i()._H,{defaultMessage:"Your organization has disabled account deletion.",id:"profileSettings.accountDeleteButton.disabledForManagedUser.tooltip"}):y?(0,d.jsx)(i()._H,{defaultMessage:"You are the last owner of an organization. Add a new organization owner to enable this action.",id:"profileSettings.accountDeleteButton.disabledForLastOrgOwner.tooltip"}):h?(0,d.jsx)(i()._H,{defaultMessage:"Loading account details...",id:"profileSettings.accountDeleteButton.loading.tooltip"}):null,v=async()=>{const{currentUserStore:e,currentUserRootStore:t}=s(876822).default.state;if(!e||!t)return;if(!e.isDefined())return;const g=n().oA(t.getSpaceViewStores().map((e=>e.getSpaceStore()))),f=(0,s(18281).Io)().filter((t=>(0,s(933868).zz)(t.role)&&t.userId!==e.id)).length>0,h=g.filter((e=>!(0,s(657120).XO)(e.getModel(),e.getRole(),f))),S=n().oA(h.map((e=>{if(e)return{key:e.id,render:()=>(0,d.jsxs)("div",{style:m.spaceItem,children:[(0,d.jsx)(s(943620).Z,{disabled:!0,icon:(0,a().Wd)(c,e),isEmptyPage:!1,title:(0,a().rn)(c,e),size:32,isLarge:!0}),(0,d.jsxs)("div",{style:{minWidth:0},children:[(0,d.jsx)(l().Z,{className:"notranslate",isMobile:u.isMobile,children:(0,r().bM)(c,e)}),(0,d.jsx)(l().Z,{isSmall:!0,isMobile:u.isMobile,children:(0,r().rR)(c,p,e).subtitle})]})]})}}))),y=n().oA(h.map((e=>({id:e.id,name:(0,a().rn)(c,e)}))));o().qP(c);const b=(0,s(18610).xf)(s(146947).locale)?(0,d.jsx)(i()._H,{id:"profileSettings.deleteAccountConfirmationDialog.warning",defaultMessage:"This action cannot be undone. This will permanently delete your entire account. All private workspaces will be deleted, and you will be removed from all shared workspaces."}):(0,d.jsx)(s(885178).Z,{translations:{es:"Esta acción no se puede deshacer. Esto eliminará permanentemente su cuenta completa. Se eliminarán todas las áreas de trabajo privadas y se eliminará de todas las áreas de trabajo compartidas. Por favor, escriba su correo electrónico para confirmar.",ru:"Это действие не может быть отменено. Это навсегда удалит всю вашу учетную запись. Все частные рабочие области будут удалены, и вы будете удалены из всех общих рабочих областей. Пожалуйста, введите ваш адрес электронной почты для подтверждения.",zh:"此操作无法撤消。 这将永久删除您的整个帐户。 将删除所有私有工作空间，您将从所有共享工作空间中删除。 请输入您的电子邮箱进行确认。",de:"Diese Aktion kann nicht rückgängig gemacht werden. Dadurch wird Ihr gesamtes Konto dauerhaft gelöscht. Alle privaten Arbeitsbereiche werden gelöscht und Sie werden aus allen freigegebenen Arbeitsbereichen entfernt. Bitte geben Sie Ihre E-Mail-Adresse zur Bestätigung ein.",fr:"Cette action ne peut pas être annulée. Cela supprimera définitivement votre compte en entier. Tous les espaces de travail privés seront supprimés et vous serez supprimé de tous les espaces de travail partagés. Veuillez taper votre email pour confirmer.",ja:"この操作を元に戻すことはできません。 これによりアカウント全体が完全に削除されます。 すべてのプライベートワークスペースが削除され、あなたはすべての共有ワークスペースから削除されます。 確認のためにメールアドレスを入力してください。",it:"Questa azione non può essere annullata. Questo eliminerà definitivamente l'intero account. Tutti gli spazi di lavoro privati verranno eliminati e verranno rimossi da tutti gli spazi di lavoro condivisi. Inserisci la tua email per confermare.",pt:"Essa ação não pode ser desfeita. Isso excluirá permanentemente sua conta inteira. Todos os espaços de trabalho privados serão excluídos e você será removido de todos os espaços de trabalho compartilhados. Por favor, digite o seu email para confirmar.",nl:"Deze actie kan niet ongedaan gemaakt worden. Hiermee wordt uw gehele account permanent verwijderd. Alle privéwerkruimten worden verwijderd en u wordt verwijderd uit alle gedeelde werkruimten. Voer je e-mailadres in om te bevestigen.",pl:"Tego działania nie można cofnąć. Spowoduje to trwałe usunięcie całego konta. Wszystkie prywatne obszary robocze zostaną usunięte, a użytkownik zostanie usunięty ze wszystkich współużytkowanych obszarów roboczych. Wpisz swój e-mail, aby potwierdzić.",sv:"Den här åtgärden kan inte ångras. Detta tar bort hela ditt konto permanent. Alla privata arbetsytor kommer att raderas, och du kommer att tas bort från alla delade arbetsytor. Vänligen skriv in din email för att bekräfta.",uk:"Цю дію не можна скасувати. Таким чином буде видалено весь обліковий запис назавжди. Всі приватні робочі області будуть видалені, і ви будете видалені з усіх спільних робочих областей. Будь ласка, введіть електронний лист для підтвердження.",no:"Denne handlingen kan ikke fortrykkes. Dette vil permanent slette hele kontoen din. Alle private arbeidsområder blir slettet, og du vil bli fjernet fra alle delte arbeidsområder. Vennligst skriv inn din epost for å bekrefte.",tr:"Bu işlem geri alınamaz. Bu işlem hesabınızın tamamını kalıcı olarak siler. Tüm özel çalışma alanları silinecek ve paylaşılan tüm çalışma alanlarından kaldırılacaksınız. Lütfen onaylamak için e-postanızı yazın.",cs:"Tuto akci nelze vrátit zpět. Tím bude trvale smazán celý váš účet. Všechny soukromé pracovní prostory budou smazány a budete ze všech sdílených pracovních prostor odstraněni. Pro potvrzení zadejte svůj e-mail.",vi:"Hành động này không thể được hoàn tác. Điều này sẽ xóa vĩnh viễn toàn bộ tài khoản của bạn. Tất cả các không gian làm việc riêng tư sẽ bị xóa và bạn sẽ bị xóa khỏi tất cả các không gian làm việc chung. Vui lòng nhập email của bạn để xác nhận.",da:"Denne handling kan ikke fortrydes. Dette vil permanent slette hele din konto. Alle private arbejdsområder slettes, og du vil blive fjernet fra alle delte arbejdsområder. Indtast venligst din email for at bekræfte.",hu:"Ez a művelet nem visszavonható. Ez véglegesen törli a teljes fiókot. Minden privát munkaterület törlődik, és eltávolításra kerül minden megosztott munkaterületről. Kérjük, írja be e-mail címét, hogy megerősítse.",ar:"لا يمكن التراجع عن هذا الإجراء. سيؤدي الإجراء إلى حذف حسابك بالكامل. سيتم أيضا حذف جميع مساحات العمل الخاصة ، وستتم إزالتك من جميع مساحات العمل المشتركة. يرجى كتابة البريد الإلكتروني الخاص بك للتأكيد.",th:"การกระทำนี้ไม่สามารถยกเลิกได้ นี่จะเป็นการลบบัญชีทั้งหมดของคุณอย่างถาวร พื้นที่ทำงานส่วนตัวทั้งหมดจะถูกลบและคุณจะถูกลบออกจากพื้นที่ทำงานที่ใช้ร่วมกันทั้งหมด กรุณาพิมพ์อีเมลของคุณเพื่อยืนยัน",he:"לא ניתן לבטל פעולה זו. פעולה זו תמחק לצמיתות את כל החשבון שלך. כל סביבות העבודה הפרטיות יימחקו, ותוסר מכל סביבות העבודה המשותפות. הקלד את האימייל שלך כדי לאשר.",fi:"Tätä toimintoa ei voi peruuttaa. Tämä poistaa koko tilin pysyvästi. Kaikki yksityiset työtilat poistetaan ja poistetaan kaikista jaetuista työtiloista. Vahvistaaksesi kirjoita sähköpostiosoitteesi.",id:"Tindakan ini tidak bisa dibatalkan. Ini akan secara permanen menghapus seluruh akun Anda. Semua ruang kerja pribadi akan dihapus, dan Anda akan dihapus dari semua ruang kerja bersama. Ketikkan email Anda untuk mengonfirmasi."}});await s(417205).b({title:(0,d.jsx)(i()._H,{id:"profileSettings.deleteAccountConfirmationDialog.title",defaultMessage:"Delete your entire account permanently?"}),message:b,content:(0,d.jsxs)(d.Fragment,{children:[S&&S.length>0?(0,d.jsx)("div",{style:{overflow:"hidden",borderRadius:6},children:(0,d.jsx)("ul",{style:m.spaceNameList,children:S.map((e=>{let{key:t,render:s}=e;return(0,d.jsx)("div",{children:s()},t)}))})}):null,(0,d.jsx)(s(661641).q,{styleName:"Body-14px/Regular",colorName:"primary",children:(0,d.jsx)(i()._H,{id:"profileSettings.deleteAccountConfirmationDialog.prompt",defaultMessage:"Please type in your email to confirm."})})]}),acceptLabel:0===y.length?(0,d.jsx)(i()._H,{id:"profileSettings.deleteAccountConfirmationDialog.deleteAccountButton.label",defaultMessage:"Permanently delete account"}):c.device.isMobile?(0,d.jsx)(i()._H,{id:"profileSettings.deleteAccountConfirmationDialog.deleteAccountAndWorkspacesButtonMobile.label",defaultMessage:"{numberOfWorkspaces, plural, one {Delete account & 1 workspace} other {Delete account & {numberOfWorkspaces} workspaces}}",values:{numberOfWorkspaces:y.length}}):(0,d.jsx)(i()._H,{id:"profileSettings.deleteAccountConfirmationDialog.deleteAccountAndWorkspacesButton.label",defaultMessage:"{numberOfWorkspaces, plural, one {Permanently delete account and 1 workspace} other {Permanently delete account and {numberOfWorkspaces} workspaces}}",values:{numberOfWorkspaces:y.length}}),requiredInputValue:e.getEmail()})&&(o().ps(c),s(838266).default.reset(),s(513461).t(c))};return(0,d.jsx)(s(579807).Z,{type:"custom",useFlexboxStyle:!0,isMobile:u.isMobile,title:(0,d.jsx)(i()._H,{id:"profileSettings.accountDeletionSetting.title",defaultMessage:"Delete my account"}),caption:(0,d.jsx)(i()._H,{id:"manageActiveSessions.accountDeletionSetting.label",defaultMessage:"Permanently delete the account and remove access from all workspaces."}),isCritical:!0,customButton:u.isMobile?(0,d.jsx)("div",{style:{marginTop:12},children:(0,d.jsx)(s(661297).Z,{isLarge:!0,isRed:!0,onClick:v,disabled:b,disabledFeedback:b,children:(0,d.jsx)(i()._H,{id:"profileSettings.deleteMyAccount.button.label",defaultMessage:"Delete my account"})})}):(0,d.jsx)(s(745740).Z,{style:{borderRadius:"0.25em"},onClick:v,disabled:b,disabledFeedback:b,children:(0,s(593864).C)(m.icon)}),disabled:b,tooltipLabel:x})}},806856:(e,t,s)=>{s.d(t,{Z:()=>m,h:()=>u});s(667294);var i=()=>s(846550),n=()=>s(195926),o=()=>s(788860),a=()=>s(274879),r=()=>s(615634),l=()=>s(667710),d=()=>s(92175),c=s(785893);function u(e){return(0,a().canSetCookie)(e)&&(0,a().canShowCookieUi)(e)}function p(){const e=(0,i().Fg)();return(0,c.jsx)(l().Z,{hasDismissButton:!1,renderOrigin:t=>(0,c.jsxs)(d().Z,{style:{paddingLeft:8,paddingRight:8,height:32},...t,children:[(0,c.jsx)(o()._H,{id:"cookieSelector.label.customize",defaultMessage:"Customize"}),(0,r().i)({width:10,marginLeft:4,fill:e.lightIconColor})]})})}const m=function(e){let{isMobile:t}=e;return u((0,s(219727).O7)())?(0,c.jsx)(s(579807).Z,{isMobile:t,title:(0,c.jsx)(o()._H,{...n().ze.cookieSettingsLabel}),caption:(0,n().Fd)(s(81066).Tz,"settings"),type:"custom",customButton:(0,c.jsx)(p,{})}):null}},253855:(e,t,s)=>{s.d(t,{P:()=>E,U:()=>U});s(267602),s(653476),s(30005),s(241792);var i=s(667294),n=()=>s(219727),o=()=>s(142735),a=()=>s(846550),r=()=>s(801916),l=()=>s(788860),d=()=>s(568017),c=()=>s(696459),u=()=>s(707513),p=()=>s(824462),m=()=>s(352230),g=()=>s(15409),f=()=>s(615634),h=()=>s(739479),S=()=>s(749826),y=()=>s(517632),b=()=>s(827973),x=()=>s(448419),v=()=>s(1910),j=()=>s(573357),w=()=>s(291198),M=()=>s(108714),k=()=>s(312578),_=()=>s(198829),C=()=>s(255577),I=()=>s(661297),T=()=>s(946563),P=()=>s(92175),A=()=>s(906769),Z=()=>s(388284),H=()=>s(67961),R=()=>s(504117),B=()=>s(868614),D=()=>s(539245),N=()=>s(378907),V=s(785893);function U(){const e=(0,n().O7)(),[t,s]=(0,i.useState)(""),[l,d]=(0,i.useState)(void 0),[m,g]=(0,i.useState)([]),[f,h]=(0,i.useState)(0),[b,x]=(0,i.useState)(20),v=(0,o().VK)((()=>S().default.isStatsigEnabled()),[]),j=(0,o().VK)((()=>S().default.checkGate({gateName:"replace_local_overrides_with_statsig",disableExposureLogging:!0})),[]),M=(0,o().VK)((()=>v?function(){const e=new Map,t=y().C.getStatsigClient();return r().l4.forEach((s=>{var i;const n=null==t?void 0:t.getExperiment(s,{disableExposureLog:!0});e.set(s,{experimentId:s,experimentVersion:1,group:S().default.getEligibleGroup({experimentId:s,defaultGroup:r().nb,disableExposureLogging:!0}),hasStatsigUserOverride:(null==n||null===(i=n.ruleID)||void 0===i?void 0:i.endsWith(":userID:id_override"))||!1,groups:[...(0,r()._n)(s),"control",r().nb],statsigOption:"EXPERIMENT",isActive:y().C.getIsExperimentActive(s)})})),r().b2.forEach((s=>{var i;const n=null==t?void 0:t.getFeatureGate(s,{disableExposureLog:!0});e.set(s,{experimentId:s,experimentVersion:1,group:S().default.checkGate({gateName:s,disableExposureLogging:!0}).toString(),hasStatsigUserOverride:(null==n||null===(i=n.ruleID)||void 0===i?void 0:i.endsWith(":id_override"))||!1,groups:["true","false"],statsigOption:"FEATUREGATE",isActive:!0})})),e}():new Map),[v]),_=(0,i.useMemo)((()=>[...M.values()]),[M]),C=(0,i.useMemo)((()=>_.filter((e=>e.hasStatsigUserOverride||m.includes(e.experimentId)))),[_,m]),T=(0,i.useMemo)((()=>_.filter((e=>!t||0===t.length||e.experimentId.includes(t))).sort(((e,t)=>e.experimentId>t.experimentId?1:-1))),[_,t]),P=(0,i.useMemo)((()=>_.filter((e=>!e.isActive)).length),[_]),Z=(0,i.useMemo)((()=>T.filter((e=>!e.isActive))),[T]),{gate:H={},experiment:R={}}=y().C.getAllLocalOverrides()??{},N=[...Object.keys(H).map((e=>M.get(e))),...Object.keys(R).map((e=>M.get(e)))].filter(c().$K);(0,i.useEffect)((()=>{j&&N.length>0&&async function(){g(N.map((e=>e.experimentId)));for(const t of N)"EXPERIMENT"===t.statsigOption&&t.group?await p().callApi({eventName:"setStatsigExperimentUserOverride",environment:e,data:{experimentName:t.experimentId,group:t.group}}):"FEATUREGATE"===t.statsigOption&&await p().callApi({eventName:"setStatsigGateUserOverride",environment:e,data:{gateName:t.experimentId,enabled:"true"===t.group}});y().C.removeAllLocalOverrides()}()}),[j,N,e]);const U=(0,a().yK)((e=>({containerStyle:{width:"100%",overflow:"hidden"},filterContainerStyle:{marginLeft:"auto",flexGrow:1,maxWidth:300},description:{display:"flex",alignItems:"flex-start",cursor:"pointer",width:"100%",flexWrap:"wrap",fontSize:12,color:e.mediumTextColor,marginTop:2,marginBottom:16},headerContainer:{fontSize:14,display:"flex",alignItems:"center",paddingBottom:4},overridesHeaderContainer:{fontSize:14,display:"flex",alignItems:"center",paddingBottom:4,height:25},resetButtonContainerStyle:{marginLeft:"auto"}})),[]);return(0,V.jsxs)("div",{style:U.containerStyle,children:[(0,V.jsxs)(B().Z,{large:!0,divider:"full",style:{marginBottom:4,paddingBottom:4,display:"flex"},children:["Experiments",(0,V.jsx)("div",{style:{marginLeft:"auto"},children:(0,V.jsx)(I().Z,{style:{fontWeight:u().Ue.regular},isSmall:!0,onClick:()=>{const e=T.map((e=>{const t=e.group;return`${`${e.statsigOption}:${e.experimentId}`}\t${t}`})).join("\n");console.log(e)},children:null!=l&&l.reset?(0,V.jsx)(k().Z,{}):"Print all to console"})})]}),(0,V.jsxs)("div",{style:U.description,children:[(0,V.jsx)("div",{children:j?"Set overrides for your user that affect the client and server. If setting an override is still showing old data, try refreshing the page.":"For server-side/production configs, go to console.statsig.com."}),(0,V.jsx)("div",{children:"If an experiment is marked as 'STALE', it is likely no longer active and should be cleaned up!"})]}),!j&&(0,V.jsxs)("div",{style:{marginBottom:20},children:[(0,V.jsxs)("div",{style:U.overridesHeaderContainer,children:[(0,V.jsx)("div",{style:{fontWeight:u().Ue.medium},children:"Local overrides"}),N.length>0?(0,V.jsx)("div",{style:U.resetButtonContainerStyle,children:(0,V.jsx)(I().Z,{isSmall:!0,onClick:()=>{d({reset:!0}),y().C.removeAllLocalOverrides(),d(void 0)},children:null!=l&&l.reset?(0,V.jsx)(k().Z,{}):"Clear overrides"})}):null]}),(0,V.jsx)(O,{experimentSettings:N,emptyPlaceholder:"No overridden values",experimentUpdatingState:l,setExperimentUpdatingState:d,overrideUpdates:m,setOverrideUpdates:g})]}),j&&(0,V.jsxs)("div",{style:{marginBottom:20},children:[(0,V.jsx)("div",{style:U.overridesHeaderContainer,children:(0,V.jsx)("div",{style:{fontWeight:u().Ue.medium},children:"Statsig overrides"})}),(0,V.jsx)(O,{experimentSettings:C,emptyPlaceholder:"No overridden values from statsig",experimentUpdatingState:l,setExperimentUpdatingState:d,overrideUpdates:m,setOverrideUpdates:g,showDelete:!0})]}),(0,V.jsx)("div",{style:{...U.headerContainer,height:void 0},children:(0,V.jsx)(D().Z,{style:{paddingLeft:0},tabs:[(0,V.jsx)("div",{children:`All (${_.length})`},"all"),(0,V.jsx)("div",{style:{display:"flex",alignItems:"center"},children:`Stale (${P})`},"stale")],selectedIndex:f,onChange:e=>h(e),right:(0,V.jsx)("div",{style:U.filterContainerStyle,children:(0,V.jsx)(w().Z,{placeholder:"Search...",value:t,showClearButton:!0,autoCapitalize:"off",autoComplete:"off",onChange:e=>{s(e.target.value)}})})})}),(0,V.jsx)(O,{experimentSettings:"stale"===["all","stale"][f]?Z:T,emptyPlaceholder:"No results",experimentUpdatingState:l,setExperimentUpdatingState:d,overrideUpdates:m,setOverrideUpdates:g,maxRenderSize:b,showStale:!0,hideTopBorderForFirstRow:!0}),(0,V.jsx)(A().Z,{onChange:e=>{e<200&&x(b+50)}})]})}function O(e){let{experimentSettings:t,emptyPlaceholder:s,experimentUpdatingState:i,setExperimentUpdatingState:n,overrideUpdates:o,setOverrideUpdates:r,maxRenderSize:l,showDelete:d,showStale:c,hideTopBorderForFirstRow:u}=e;const p=(0,a().yK)((e=>({emptyState:{borderTop:`1px solid ${e.regularDividerColor}`,paddingTop:12,paddingLeft:10,paddingBottom:14,color:e.mediumTextColor,fontSize:12},experimentNameCell:{paddingLeft:10,paddingRight:10,flexGrow:1,flexShrink:1,overflow:"hidden"},experimentOverrideCell:{paddingLeft:10,paddingRight:10,display:"inline-flex",justifyContent:"space-between",flexGrow:1,flexShrink:0},tableStyle:{display:"block"},tableBodyStyle:{display:"block"},rowStyle:{overflow:"hidden",display:"flex",alignItems:"center"},tableExperimentIDHeaderStyle:{width:"auto"},tableExperimentGroupHeaderStyle:{width:"auto",textAlign:"right"}})),[]),m=[{key:"name",header:"Name",style:p.tableExperimentIDHeaderStyle},{key:"value",header:"Value",style:p.tableExperimentGroupHeaderStyle}];if(!t.length)return(0,V.jsx)("div",{style:p.emptyState,children:s});const g=l?t.slice(0,l):t;return(0,V.jsx)(N().Z,{tableStyle:{borderTop:void 0,...p.tableStyle},tableBodyStyle:p.tableBodyStyle,rowStyle:p.rowStyle,cellStyle:e=>{let{columnIndex:t}=e;return 0===t?p.experimentNameCell:p.experimentOverrideCell},columns:m,hideHeader:!0,hideTopBorderForFirstRow:u,rows:g.map((e=>({key:e.experimentId,columns:[(0,V.jsx)(F,{name:e.experimentId,statsigType:e.statsigOption,isStale:c&&!e.isActive},`${e.experimentId}-title`),(0,V.jsx)(L,{experiment:e,experimentUpdatingState:i,onUpdate:e=>{n(e),null!=e&&e.experimentId&&r([...o,null==e?void 0:e.experimentId])},onRefresh:()=>{r([])},refreshNeeded:o.includes(e.experimentId),showDelete:d,showStale:c},`${e.experimentId}-value`)]})))})}function E(e){const t=(0,a().yK)((e=>({headerLabelStyle:{marginTop:2,width:"80%"},PlainButtonStyle:{marginTop:12,marginBottom:4}})),[]);return(0,V.jsxs)("div",{children:[(0,V.jsx)(B().Z,{children:"Experiments"}),(0,V.jsx)(H().Z,{isSmall:!0,isMultiline:!0,style:t.headerLabelStyle,children:"Locally toggle experiments."}),(0,V.jsx)(x().ZP,{popupType:x().Z4.SlideUp,renderOrigin:e=>(0,V.jsx)(I().Z,{...e,isLarge:!0,style:t.PlainButtonStyle,children:"View Experiments"}),render:e=>{const t={menuType:m().o.Modal,whiteBackground:!0,title:"Experiments",right:(0,V.jsx)(l()._H,{defaultMessage:"Done",id:"appearanceSettings.modal.done"}),onClickRight:e.close};return(0,V.jsx)(j().Z,{capture:!0,allowEsc:!0,render:()=>(0,V.jsx)(_().Z,{...t,children:(0,V.jsx)(R().ZP,{disableScroller:!0,children:(0,V.jsx)(U,{})})})})}})]})}function F(e){const{statsigType:t,name:s,isStale:i}=e,o=(0,n().Fy)().isMobile,r=(0,a().yK)((e=>({experimentId:{flexShrink:1,marginRight:5,maxWidth:o?215:300,...u().Yu,color:i?e.lightTextColor:void 0},experimentInfo:{display:"flex",flexDirection:o?"column":"row",alignItems:"center"},stalePill:{background:e.redBadgeBackground,color:"white"},typePill:{background:"FEATUREGATE"===t?e.accentColors.blue[100]:e.accentColors.green[100]}})),[o,i,t]);return(0,V.jsxs)("div",{style:r.experimentInfo,children:[(0,V.jsx)("span",{style:r.experimentId,children:s}),t&&(0,V.jsx)(T().Z,{innerStyle:r.typePill,children:(0,V.jsx)(M().Z,{href:`https://console.statsig.com/6TSma7coh47E7CjMbuSVCO/${"FEATUREGATE"===t?"gates":"experiments"}/${s}`,external:!0,children:`${t}`})}),(0,V.jsx)("div",{style:{marginLeft:4},children:i&&(0,V.jsx)(T().Z,{innerStyle:r.stalePill,children:"Stale"})})]})}function L(e){const{experiment:t,experimentUpdatingState:s,onUpdate:i,showDelete:c,showStale:j,refreshNeeded:w,onRefresh:M}=e,I=(0,n().O7)(),T=(0,n().Fy)().isMobile,A=(0,o().VK)((()=>S().default.checkGate({gateName:"replace_local_overrides_with_statsig",disableExposureLogging:!0})),[]),H=(0,a().yK)((e=>({experimentGroup:{maxWidth:T?90:300,...u().Yu,color:j&&!t.isActive?e.lightTextColor:void 0},experimentGroupButtonCheckContainerStyle:{width:T?16:14},experimentGroupButtonChevronStyle:{width:10,marginLeft:4,fill:e.lightIconColor},experimentGroupButtonStyle:{overflowX:"hidden",justifyContent:"left"},experimentGroupContainerStyle:{width:"100%",display:"flex",justifyContent:"flex-end",alignItems:"center"},refreshNeededText:{color:e.accentColors.red[500]},deleteIcon:{stroke:e.accentColors.red[400]}})),[T,j,t]),R=(null==s?void 0:s.experimentId)===t.experimentId;return A&&!R&&w?(0,V.jsx)("div",{style:H.experimentGroupContainerStyle,children:(0,V.jsx)(P().Z,{style:H.experimentGroupButtonStyle,onClick:async()=>{var e;const s=y().C.getStatsigClient(),n=null==s||null===(e=s.getContext())||void 0===e?void 0:e.user;s&&n&&(i({experimentId:t.experimentId,group:r().nb}),await new Promise((e=>{setTimeout(e,5e3)})),await s.updateUserAsync(n),M&&M(),y().C.emit(),i(void 0))},children:(0,V.jsxs)("div",{style:H.refreshNeededText,children:["Refresh to update"," "]})})}):(0,V.jsxs)("div",{style:H.experimentGroupContainerStyle,children:[(0,V.jsx)(x().ZP,{popupType:T?x().Z4.SlideUp:x().Z4.Popup,disabled:R,renderOrigin:e=>(0,V.jsx)(P().Z,{...e,style:H.experimentGroupButtonStyle,children:R?(0,V.jsx)(k().Z,{}):(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("span",{style:H.experimentGroup,children:t.group??"unknown"}),(0,f().i)(H.experimentGroupButtonChevronStyle)]})}),render:e=>{let n;n=T?{menuType:m().o.Modal,title:t.experimentId,right:(0,V.jsx)(l()._H,{defaultMessage:"Done",id:"appearanceSettings.modal.done"}),onClickRight:e.close}:{menuType:m().o.Popup,width:250};const o=t.groups.map((n=>{const o={key:n,action:()=>{var s;let o;A?"EXPERIMENT"===t.statsigOption?o=p().callApi({eventName:"setStatsigExperimentUserOverride",environment:I,data:{experimentName:t.experimentId,group:n}}):"FEATUREGATE"===t.statsigOption&&(o=p().callApi({eventName:"setStatsigGateUserOverride",environment:I,data:{gateName:t.experimentId,enabled:"true"===n}})):"EXPERIMENT"===t.statsigOption?o=new Promise((e=>{y().C.updateLocalOverrideConfig(t.experimentId,n),e(n)})):"FEATUREGATE"===t.statsigOption&&(o=new Promise((e=>{y().C.updateLocalOverrideGate(t.experimentId,n),e(n)}))),i({experimentId:t.experimentId,group:n}),e.close(),null===(s=o)||void 0===s||s.then((()=>{i(void 0)}))},render:e=>{const i=n===r().nb;return(0,V.jsx)(b().Z,{...e,title:n,right:s&&s.experimentId===t.experimentId&&s.group===n?(0,V.jsx)("div",{style:H.experimentGroupButtonCheckContainerStyle,children:(0,V.jsx)(k().Z,{})}):n!==t.group||s?void 0:(0,V.jsx)("div",{style:H.experimentGroupButtonCheckContainerStyle,children:(0,g().e)()}),disabled:i,style:{...i&&{color:d().ZP.mediumTextColor}}})}};return o}));return(0,V.jsx)(_().Z,{...n,children:(0,V.jsx)(C().Z,{type:C().i.Vertical,initialFocus:void 0,sections:[{key:t.experimentId,render:e=>(0,V.jsx)(Z().Z,{...e}),items:o}]})})}}),c?(0,V.jsx)(v().Z,{icon:h().y,iconStyle:H.deleteIcon,ariaLabel:`Delete override for ${t.experimentId}`,onClick:async()=>{i({experimentId:t.experimentId,group:r().nb}),"EXPERIMENT"===t.statsigOption?await p().callApi({eventName:"deleteStatsigExperimentUserOverride",environment:I,data:{experimentName:t.experimentId}}):"FEATUREGATE"===t.statsigOption&&await p().callApi({eventName:"deleteStatsigGateUserOverride",environment:I,data:{gateName:t.experimentId}}),i(void 0)}}):null]})}},287509:(e,t,s)=>{s.d(t,{Z:()=>a});s(667294);var i=()=>s(788860),n=()=>s(696459),o=s(785893);function a(e){let{target:t}=e;switch(t){case"notify_mobile":return(0,o.jsx)(i()._H,{id:"notificationSettings.mobilePushNotificationSettings.description",defaultMessage:"Receive push notifications on mentions and comments via your mobile app"});case"notify_desktop":return(0,o.jsx)(i()._H,{id:"notificationSettings.desktopNotificationSettings.description",defaultMessage:"Receive push notifications on mentions and comments immediately on your desktop app"});case"notify_email":return(0,o.jsx)(i()._H,{id:"notificationSettings.emailNotificationSettings.improvedDescription",defaultMessage:"Receive emails when you get comments, mentions, page invites, reminders, access requests, and property changes"});case"notify_email_always":return(0,o.jsx)(i()._H,{id:"notificationSettings.emailAlwaysNotificationSettings.improvedDescription",defaultMessage:"Receive emails about activity in your workspace, even when you're active on the app"});case"notify_slack":return(0,o.jsx)(i()._H,{id:"notificationSettings.slackNotificationsSettings.default.description",defaultMessage:"Receive notifications in your Slack workspace when you're mentioned in a page, database property, or comment"});case"notify_slack_mention":return(0,o.jsx)(i()._H,{id:"notificationSettings.slackMentionNotificationSettings.description",defaultMessage:"Receive notifications in your Slack workspace when you're mentioned in a group, page, database property, or comment."});case"notify_slack_all_activity":return(0,o.jsx)(i()._H,{id:"notificationSettings.slackAllActivityNotificationSettings.description",defaultMessage:"Receive notifications in your Slack workspace when you get comments, mentions, page invites, and property changes."});case"notify_email_digest":return(0,o.jsx)(i()._H,{id:"notificationSettings.pageUpdatesNotificationsSettings.description",defaultMessage:"Receive email digests for changes to pages you’re subscribed to"});case"notify_home_digest_email":return(0,o.jsx)(i()._H,{id:"notificationSettings.homeDigestEmailNotificationsSettings.description",defaultMessage:"Receive email digests of what's happening in your workspace"});case"marketing_emails":return(0,o.jsx)(i()._H,{id:"notificationSettings.marketingEmails.description",defaultMessage:"Receive occasional emails about product launches and new features from Notion"});case"desktop_badge":return(0,o.jsx)(i()._H,{id:"notificationSettings.desktopBadge.description",defaultMessage:'Show/hide the notification badge using the "Badge application icon" switch in System Settings'});default:(0,n().t1)(t)}}},343734:(e,t,s)=>{s.d(t,{Z:()=>a});s(667294);var i=()=>s(788860),n=()=>s(696459),o=s(785893);function a(e){let{target:t}=e;switch(t){case"notify_mobile":return(0,o.jsx)(i()._H,{defaultMessage:"Mobile push notifications",id:"notificationSettings.mobilePushNotificationSettings.title"});case"notify_desktop":return(0,o.jsx)(i()._H,{id:"notificationSettings.desktopNotificationSettings.title",defaultMessage:"Desktop push notifications"});case"notify_email":return(0,o.jsx)(i()._H,{id:"notificationSettings.productNotifEmails.title",defaultMessage:"Activity in your workspace"});case"notify_email_always":return(0,o.jsx)(i()._H,{id:"notificationSettings.emailAlwaysNotificationSettings.title",defaultMessage:"Always send email notifications"});case"notify_slack":return(0,o.jsx)(i()._H,{id:"notificationSettings.slackNotificationSettings.title",defaultMessage:"Slack notifications"});case"notify_slack_mention":return(0,o.jsx)(i()._H,{id:"notificationSettings.slackMentionNotificationSettings.title",defaultMessage:"Only user or group mentions"});case"notify_slack_all_activity":return(0,o.jsx)(i()._H,{id:"notificationSettings.slackAllActivityNotificationSettings.title",defaultMessage:"Activity in your workspace"});case"notify_email_digest":return(0,o.jsx)(i()._H,{id:"notificationSettings.pageUpdatesNotificationSettings.title",defaultMessage:"Page updates"});case"notify_home_digest_email":return(0,o.jsx)(i()._H,{id:"notificationSettings.homeDigestEmailNotificationSettings.title",defaultMessage:"Workspace digest"});case"marketing_emails":return(0,o.jsx)(i()._H,{id:"notificationSettings.marketingEmails.title",defaultMessage:"Announcements and update emails"});case"desktop_badge":return(0,o.jsx)(i()._H,{id:"notificationSettings.desktopBadge.title",defaultMessage:"Desktop badge icon"});default:(0,n().t1)(t)}}},764605:(e,t,s)=>{s.d(t,{Z:()=>b});s(267602),s(653476);var i=s(667294),n=()=>s(219727),o=()=>s(142735),a=()=>s(788860),r=()=>s(696459),l=()=>s(515329),d=()=>s(218842),c=()=>s(876822),u=()=>s(806856),p=()=>s(666414),m=()=>s(637932),g=()=>s(504117),f=()=>s(868614),h=()=>s(257822),S=()=>s(928066),y=s(785893);const b=(0,s(968433).M)((function(e){let{isMobile:t,isMobileNative:b,passwordRequestStore:x,userEmailDomainSettings:v,billingData:j}=e;const{isElectron:w,isPhone:M}=(0,n().Fy)(),k=(0,n().O7)(),_=(0,o().VK)((()=>s(804217).default.state.online),[]),C=(0,o().VK)((()=>{var e,s;const i=(null===(e=c().default.state.currentSpaceViewStore)||void 0===e?void 0:e.getNotifyEmail())||!1,n=Boolean(null===(s=c().default.state.currentSpaceViewStore)||void 0===s||null===(s=s.getSettings())||void 0===s?void 0:s.notify_slack),o=(0,l().kC)(),a=(0,l().oI)();return function(e){const{isMobile:t,isElectron:s,showNotifyEmailAlwaysSetting:i,slackSettingsAndGates:n}=e,o=function(e){const{isSlackNotificationSettingEnabled:t,showSlackNotificationSetting:s,showNotionActivityNotificationsToSlackSetting:i}=e;return s?i?[{key:"notify_slack",renderSettingsItem:()=>(0,y.jsx)(S().O,{target:"notify_slack"})},t?{key:"notify_slack_all_activity",renderSettingsItem:()=>(0,y.jsx)(S().O,{target:"notify_slack_all_activity"})}:void 0,t?{key:"notify_slack_mention",renderSettingsItem:()=>(0,y.jsx)(S().O,{target:"notify_slack_mention"})}:void 0].filter(r().$K):[{key:"notify_slack",renderSettingsItem:()=>(0,y.jsx)(S().O,{target:"notify_slack"})}]:[]}(n);return[{key:"notify_mobile",renderSettingsItem:()=>(0,y.jsx)(m().A,{target:"notify_mobile"})},!t&&s?{key:"notify_desktop",renderSettingsItem:()=>(0,y.jsx)(m().A,{target:"notify_desktop"})}:void 0,{key:"notify_email",renderSettingsItem:()=>(0,y.jsx)(m().A,{target:"notify_email"})},i?{key:"notify_email_always",renderSettingsItem:()=>(0,y.jsx)(m().A,{target:"notify_email_always"})}:void 0,{key:"notify_email_digest",renderSettingsItem:()=>(0,y.jsx)(m().A,{target:"notify_email_digest"})},{key:"notify_home_digest_email",renderSettingsItem:()=>(0,y.jsx)(m().A,{target:"notify_home_digest_email"})},...o,{key:"marketing_emails",renderSettingsItem:()=>(0,y.jsx)(m().A,{target:"marketing_emails"})}].filter(r().$K)}({isMobile:t,isElectron:w,showNotifyEmailAlwaysSetting:i,slackSettingsAndGates:{isSlackNotificationSettingEnabled:n,showSlackNotificationSetting:o,showNotionActivityNotificationsToSlackSetting:a}})}),[t,w]),I=(0,d().V)({environment:k}),T=(0,o().qz)(void 0,s(359023).Z);(0,s(732811).K)((()=>{s(390054).E(k,T)}));const P=(0,o().VK)((()=>T.state.accountSettings),[T]),A=(0,s(778265).P)(),Z=(0,o().VK)((()=>t?(0,d().E)({isPhone:M,isMobileNative:b,showOfflineSettings:A,passwordRequestStore:x,userEmailDomainSettings:v,billingData:j,accountSettings:P}):I),[I,t,M,b,A,x,v,j,P]),H=(0,o().VK)((()=>[(0,u().h)(k)?{key:"cookies",renderSettingsItem:()=>(0,y.jsx)(u().Z,{isMobile:t})}:void 0,{key:"view-history",renderSettingsItem:()=>(0,y.jsx)(s(563286).H,{isMobile:t})}].filter(r().$K)),[k,t]),R=(0,o().VK)((()=>k.WindowSizeStore.state.paddingBottomCSS),[k]);return(0,i.useEffect)((()=>{s(990966).clear({environment:k})}),[k]),_?(0,y.jsxs)(g().ZP,{disableScroller:t,children:[(0,y.jsx)(f().Z,{large:!t,divider:"full",children:(0,y.jsx)(a()._H,{id:"notificationAndPersonalSettings.notificationSection.title",defaultMessage:"My notifications"})}),(0,y.jsx)(h().O,{items:C}),(0,y.jsx)(p().Z,{size:48,isHidden:!0}),(0,y.jsx)(f().Z,{large:!t,divider:"full",children:(0,y.jsx)(a()._H,{id:"notificationAndPersonalSettings.settingsSection.title",defaultMessage:"My settings"})}),(0,y.jsx)(h().O,{items:Z}),(0,y.jsx)(p().Z,{size:48,isHidden:!0}),(0,y.jsx)(f().Z,{large:!t,divider:"full",children:(0,y.jsx)(a()._H,{id:"notificationAndPersonalSettings.privacySection.title",defaultMessage:"Privacy"})}),(0,y.jsx)(h().O,{items:H}),(0,y.jsx)(p().Z,{size:48,isHidden:!1}),(0,y.jsx)("div",{style:{marginTop:4,marginBottom:t?R:void 0},children:(0,y.jsx)(s(360964).Z,{title:(0,y.jsx)(a()._H,{id:"notificationSettings.helpButton.caption",defaultMessage:"Learn about notifications & settings"}),href:(0,s(148126).UY)("guides.notificationSettings"),analyticsFrom:"notifications_settings"})})]}):(0,y.jsx)(g().ZP,{children:(0,y.jsx)(s(67961).Z,{isSmall:!0,style:{textAlign:"center"},children:(0,y.jsx)(a()._H,{defaultMessage:"Please go online to manage settings.",id:"notificationSettingsButton.goOnline.prompt"})})})}))},761362:(e,t,s)=>{s.d(t,{Z:()=>P});var i=s(667294),n=()=>s(219727),o=()=>s(142735),a=()=>s(846550),r=()=>s(405798),l=()=>s(788860),d=()=>s(568017),c=()=>s(513670),u=()=>s(707513),p=()=>s(155055),m=()=>s(824462),g=()=>s(247724),f=()=>s(443269),h=s(785893);const S=(0,s(827282).IU)("paperAirplane",{viewBox:"0 0 34 34",svg:(0,h.jsx)("path",{d:"M19.6719 32.7188C20.6406 32.7188 21.3125 31.9375 21.8281 30.625L32.2188 3.45312C32.4375 2.875 32.5625 2.375 32.5625 1.9375C32.5625 1.07812 32.0312 0.546875 31.1719 0.546875C30.7344 0.546875 30.2344 0.671875 29.6562 0.890625L2.39062 11.3281C1.20312 11.7812 0.390625 12.4688 0.390625 13.4375C0.390625 14.625 1.26562 15.0781 2.64062 15.4844L14.2344 18.875L17.5938 30.375C18.0156 31.7969 18.4688 32.7188 19.6719 32.7188ZM14.7812 17.0469L3.51562 13.6719C3.0625 13.5469 2.95312 13.4375 2.95312 13.2812C2.95312 13.125 3.0625 13 3.4375 12.8594L26.6562 4.03125C27.6094 3.67188 28.5469 3.20312 29.375 2.82812C28.6094 3.4375 27.5156 4.29688 26.9062 4.90625L14.7812 17.0469ZM19.8281 30.1719C19.6719 30.1719 19.5625 30.0469 19.4375 29.6094L16.0625 18.3438L28.2031 6.20312C28.8125 5.60938 29.6875 4.5 30.3125 3.70312C29.9219 4.54688 29.4531 5.48438 29.0781 6.45312L20.25 29.6719C20.1094 30.0469 20 30.1719 19.8281 30.1719Z"})});var y=()=>s(114816),b=()=>s(733641),x=()=>s(363127),v=()=>s(666414),j=()=>s(573357),w=()=>s(291198),M=()=>s(708518),k=()=>s(67961),_=()=>s(968001),C=()=>s(74458),I=()=>s(323143),T=()=>s(167830);const P=(0,l().XN)((function(e){let{mfaStatus:t,isError:o,samlEnforced:a,isEducationPlan:r,hasPassword:d,intl:c,onReloadSettings:u,email:m}=e;const g=(0,n().O7)(),f=(0,i.useRef)();(0,i.useEffect)((()=>{if("on"===t&&void 0===f.current){const e=new(s(173694).r)(g),t=new(I().c);f.current=new(I().W)(t,e)}}),[g,t]);const S=(0,i.useCallback)((()=>function(e,t,s){"on"===t?x().default.setState({open:!0,verifyIdentity:!0,onCancel:()=>{var e;return null===(e=s.current)||void 0===e?void 0:e.exit()}}):(p().Wb(e),x().default.setState({open:!0,setNewPassword:!0,isSet:!1,password:"",repeatPassword:""}))}(g,t,f)),[g,t,f]),{device:y}=g;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(s(579807).Z,{type:"toggleToButton",isMobile:y.isMobile,title:(0,h.jsx)(l()._H,{id:"profileSettings.accountSecuritySection.passwordSetting.label",defaultMessage:"Password"}),caption:(0,h.jsx)(R,{hasPassword:d,isError:o,samlEnforced:a,isEducationPlan:r}),isOn:d,buttonLabel:(0,h.jsx)(l()._H,{id:"passwordSetting.changePasswordButton.label",defaultMessage:"Change password"}),onClick:S,disabled:a}),(0,h.jsx)(J,{hasPassword:d,intl:c,onReloadSettings:u,isEducationPlan:r,email:m,mfaStatus:t,settingsStateMachineRef:f})]})}));function A(e){return{display:e?"inherit":"none",marginTop:10,textAlign:"center",color:d().ZP.red,fontSize:u().JB.UISmall.desktop}}function Z(){return(0,h.jsx)(l()._H,{id:"passwordSettings.passwordModal.educationPlanGuidelines",defaultMessage:"If you lose access to your school email address, you'll be able to log in using your password."})}function H(e,t){return!e&&t}function R(e){let{isError:t,samlEnforced:s,isEducationPlan:i,hasPassword:n}=e;return t?(0,h.jsx)(l()._H,{id:"passwordSettings.passwordSetError.message",defaultMessage:"Your password cannot be set at this time. Please try again later."}):s?(0,h.jsx)(l()._H,{id:"passwordSettings.passwordManagedThroughSAMLProvider.message",defaultMessage:"Your password is managed through your SAML single sign-on Provider."}):i?(0,h.jsx)(Z,{}):n?(0,h.jsx)(l()._H,{id:"passwordSettings.changePassword.message",defaultMessage:"Change your password to login to your account."}):(0,h.jsx)(l()._H,{id:"passwordSettings.setPassword.message",defaultMessage:"Set a permanent password to login to your account."})}function B(e){return{width:27,height:27,fill:e.regularIconColor}}function D(e){(x().default.isSetNewPasswordModal()||x().default.isRemovePasswordModal())&&x().default.setState({...x().default.state,oldPassword:e.target.value,alert:void 0})}function N(){(x().default.isSetNewPasswordModal()||x().default.isRemovePasswordModal())&&x().default.setState({...x().default.state,oldPassword:"",alert:void 0})}function V(e){x().default.isSetNewPasswordModal()&&x().default.setState({...x().default.state,password:e.target.value,alert:void 0})}function U(){const{onCancel:e}=x().default.state;x().default.reset(),e&&e()}function O(){x().default.isSetNewPasswordModal()&&x().default.setState({...x().default.state,password:"",repeatPassword:"",alert:void 0})}function E(e){x().default.isSetNewPasswordModal()&&x().default.setState({...x().default.state,repeatPassword:e.target.value,alert:void 0})}function F(){x().default.isSetNewPasswordModal()&&x().default.setState({...x().default.state,repeatPassword:"",alert:void 0})}function L(){x().default.setState({open:!0,removePassword:!0,isSuccess:!1,oldPassword:""})}function K(e){if(x().default.isSetNewPasswordModal()){const{password:t,repeatPassword:s}=x().default.state;t&&s&&t!==s&&x().default.setState({...x().default.state,alert:e.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordMismatchError",defaultMessage:"Your new password does not match."})})}}async function G(e,t,s){if(!x().default.isRemovePasswordModal())return;const{oldPassword:i}=x().default.state;if(p().wr(s),!i)return void x().default.setState({...x().default.state,alert:e.formatMessage({id:"passwordSettings.removePasswordModal.oldPasswordNotEnteredError",defaultMessage:"Please enter your current password."})});const n=await m().callApi({eventName:"setPassword",environment:s,data:{oldPassword:i,clearPassword:!0}});if("success"===n.type)t(),x().default.isRemovePasswordModal()&&x().default.setState({...x().default.state,isSuccess:!0,oldPassword:"",alert:void 0});else{const t=(0,f().wf)(e,n);x().default.setState({...x().default.state,alert:t||e.formatMessage({id:"passwordSettings.removePasswordModal.message",defaultMessage:"Error removing password. Please try again later."})})}}function q(e){let{isEducationPlan:t}=e;const s=(0,a().Fg)(),i=(0,o().VK)((()=>x().default.isPasswordSetModal()),[]),n=(0,o().Kw)(x().default);if(!i)return null;const{oldPassword:r}=n,d=void 0===r?(0,h.jsx)(l()._H,{id:"passwordSettings.passwordUpdatedModal.passwordSetSuccessModal.title",defaultMessage:"Your password has been set"}):(0,h.jsx)(l()._H,{id:"passwordSettings.passwordUpdatedModal.passwordUpdatedModal.title",defaultMessage:"Your password has been saved"}),c=t?(0,h.jsx)(l()._H,{id:"passwordSettings.passwordUpdateSuccessModal.educationPlan.header",defaultMessage:"You'll be able to log in, even if you lose access to your school email address."}):(0,h.jsx)(l()._H,{id:"passwordSettings.passwordUpdateSuccessModal.header",defaultMessage:"We'll ask for this password when you log in to your account."});return(0,h.jsx)(_().Z,{title:d,header:c,icon:(0,b().k)(B(s)),onDismiss:U})}function W(e){let{isEducationPlan:t,mfaStatus:s,onReloadSettings:i}=e;const r=(0,l().YB)(),d=(0,a().Fg)(),c=(0,n().O7)(),p=(0,o().VK)((()=>x().default.isRemovePasswordModal()),[]),m=(0,o().Kw)(x().default);if(!p)return null;const{oldPassword:g,alert:f}=m,y=(0,h.jsx)(l()._H,{id:"passwordSettings.removePasswordModal.title",defaultMessage:"Remove password for temporary login codes?"}),b=(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(l()._H,{id:"passwordSettings.removePasswordModal.header",defaultMessage:"You'll receive a link and login code via email when you try to login."}),t&&(0,h.jsxs)(h.Fragment,{children:[" ",(0,h.jsx)(l()._H,{id:"passwordSettings.removePasswordModal.educationPlanWarning.message",defaultMessage:"If you lose access to your school email, you'll be unable to log back into Notion."})]}),"on"===s&&(0,h.jsxs)(h.Fragment,{children:[" ",(0,h.jsx)(l()._H,{id:"passwordSettings.removePasswordModal.removeMfaWarning.message",defaultMessage:"<boldtext>2-step verification will also be removed if you continue.</boldtext>",values:{boldtext:e=>(0,h.jsx)("span",{style:{fontWeight:u().Ue.semibold},children:e})}})]})]}),v={text:(0,h.jsx)(l()._H,{id:"passwordSettings.removePasswordModal.continueButton.label",defaultMessage:"Continue"}),onClick:()=>G(r,i,c),isRed:!0},j=[{text:(0,h.jsx)(l()._H,{id:"passwordSettings.removePasswordModal.keepUsingPasswordButton.label",defaultMessage:"Keep using password"}),onClick:U,type:"button",view:"plain"}];return(0,h.jsxs)(_().Z,{title:y,header:b,icon:S(B(d)),onDismiss:U,primaryAction:v,secondaryActions:j,containerStyles:{width:350,padding:24},children:[(0,h.jsx)(T().Z,{hasMarginTop:!0,children:(0,h.jsx)(l()._H,{id:"passwordSettings.removePasswordModal.passwordInput.label",defaultMessage:"Enter your current password"})}),(0,h.jsx)(w().Z,{type:"password",value:g,onChange:D,showClearButton:!0,onClearButtonClick:N,placeholder:r.formatMessage({id:"passwordSettings.removePasswordModal.currentPasswordInput.placeholder",defaultMessage:"Current password"}),focusInitial:!0,autoComplete:"current-password"}),(0,h.jsx)(k().Z,{isMultiline:!0,style:A(f),children:f})]})}function z(){const e=(0,a().Fg)();if(!(0,o().VK)((()=>x().default.isRemovePasswordSuccessModal()),[]))return null;const t=(0,h.jsx)(l()._H,{id:"passwordSettings.removePasswordSuccessModal.title",defaultMessage:"Password removed"}),s=(0,h.jsx)(l()._H,{id:"passwordSettings.removePasswordSuccessModal.header",defaultMessage:"To log into your account, we’ll send you a temporary login code to your email."});return(0,h.jsx)(_().Z,{title:t,header:s,icon:(0,b().k)(B(e)),onDismiss:U})}async function Y(e,t,s,i){if(!x().default.isSetNewPasswordModal())return;const{oldPassword:n,password:o,repeatPassword:a}=x().default.state;let l;if(t&&!n)l=s.formatMessage({id:"passwordSettings.changePasswordModal.oldPasswordMissingError",defaultMessage:"Please enter your old password."});else if(o){const e=(0,r().IA)(o);e.success?a?o!==a&&(l=s.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordsMismatchError",defaultMessage:"Your passwords do not match."})):l=s.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordNotRepeatedError",defaultMessage:"Please repeat your new password."}):l=function(e,t){const s=f().Ql[e.type];return s?t.formatMessage(s):t.formatMessage({id:"passwordSettings.genericPasswordSaveError",defaultMessage:"Error saving password. Please try again later."})}(e.reason,s)}else l=s.formatMessage({id:"passwordSettings.changePasswordModal.passwordNotEnteredError",defaultMessage:"Please enter a password."});if(l)return void x().default.setState({...x().default.state,alert:l});const d=await m().callApi({eventName:"setPassword",environment:e,data:{oldPassword:n,newPassword:o}});if("success"===d.type)i(),x().default.setState({...x().default.state,isSet:!0});else{const e=(0,f().wf)(s,d);x().default.setState({...x().default.state,alert:e})}}function Q(e){let{hasPassword:t,intl:s,onReloadSettings:r,isEducationPlan:d,email:c}=e;const u=(0,a().Fg)(),p=(0,n().O7)(),m=(0,i.useCallback)((()=>Y(p,t,s,r)),[p,t,s,r]),g=(0,o().VK)((()=>x().default.isSetNewPasswordModal()?x().default.state:null),[]);if(null===g)return null;const{password:f,repeatPassword:S,oldPassword:b,alert:j}=g,M=t?(0,h.jsx)(l()._H,{id:"profileSettings.changePasswordModal.title",defaultMessage:"Change password"}):(0,h.jsx)(l()._H,{id:"profileSettings.setPasswordModal.title",defaultMessage:"Set a password"}),C=(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(l()._H,{id:"passwordSettings.passwordModal.passwordGuidelines",defaultMessage:"Use a password at least 15 letters long, or at least 8 characters long with both letters and numbers."}),d&&(0,h.jsxs)(h.Fragment,{children:[" ",(0,h.jsx)(Z,{})]})]}),I=(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(T().Z,{children:(0,h.jsx)(l()._H,{id:"passwordSettings.passwordModal.newPasswordInput.label",defaultMessage:"Enter a new password"})}),(0,h.jsx)(w().Z,{type:"password",value:f,onChange:V,showClearButton:!0,onClearButtonClick:O,placeholder:s.formatMessage({id:"passwordSettings.passwordModal.newPasswordInput.placeholder",defaultMessage:"New password"}),focusInitial:!t,onBlur:()=>K(s),autoComplete:"new-password"}),(0,h.jsx)(v().Z,{size:10,isHidden:!0}),(0,h.jsx)(T().Z,{children:(0,h.jsx)(l()._H,{id:"passwordSettings.changePasswordModal.confirmPasswordInput.label",defaultMessage:"Confirm your new password"})}),(0,h.jsx)(w().Z,{type:"password",value:S,onChange:E,showClearButton:!0,onClearButtonClick:F,placeholder:s.formatMessage({id:"passwordSettings.passwordModal.confirmPasswordInput.placeholder",defaultMessage:"Confirm password"}),onBlur:()=>K(s),autoComplete:"new-password"})]}),P=(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(w().Z,{style:{display:"none"},type:"text",value:c,autoComplete:"username",disabled:!0}),(0,h.jsx)(T().Z,{children:(0,h.jsx)(l()._H,{id:"passwordSettings.passwordModal.currentPasswordInput.label",defaultMessage:"Enter your current password"})}),(0,h.jsx)(w().Z,{type:"password",value:b,onChange:D,showClearButton:!0,onClearButtonClick:N,placeholder:s.formatMessage({id:"passwordSettings.passwordModal.currentPasswordInput.placeholder",defaultMessage:"Current password"}),focusInitial:!0,autoComplete:"current-password"}),(0,h.jsx)(v().Z,{size:10,isHidden:!0}),I]}),R={text:t?(0,h.jsx)(l()._H,{id:"passwordSettings.passwordModal.changePasswordButton.label",defaultMessage:"Change password"}):(0,h.jsx)(l()._H,{id:"passwordSettings.passwordModal.setPasswordButton.label",defaultMessage:"Set a password"}),onClick:m},G=[{text:(0,h.jsx)(l()._H,{id:"passwordSettings.passwordModal.removePasswordButton.label",defaultMessage:"Remove password"}),onClick:L,type:"button",view:"plain"}];return(0,h.jsxs)(_().Z,{title:M,header:C,icon:(0,y().z)(B(u)),onDismiss:U,primaryAction:R,secondaryActions:H(d,t)?G:void 0,containerStyles:{width:350,padding:24},children:[t?P:I,(0,h.jsx)(k().Z,{isMultiline:!0,style:A(j),children:j})]})}function $(e){let{settingsStateMachineRef:t}=e;const s=(0,o().VK)((()=>x().default.isVerifyIdentityWithMfaModal()),[]);return(0,i.useEffect)((()=>{s&&void 0!==t.current&&t.current.settingsConfirmIdentityForPasswordSetting()})),s&&void 0!==t.current?(0,h.jsx)(C().Z,{settingsStateMachine:t.current,onDismiss:U,onStartSMS:c().ZT,onStartTOTP:c().ZT,onStartBackupCodes:c().ZT}):null}function J(e){let{hasPassword:t,intl:s,onReloadSettings:n,isEducationPlan:a,email:r,mfaStatus:l,settingsStateMachineRef:d}=e;const c=(0,o().VK)((()=>x().default.state.open),[]);return(0,h.jsx)(M().Z,{open:c,onDismiss:U,className:g().BKn,preventHideChildrenWhileOpening:!0,render:()=>(0,h.jsx)(j().Z,{capture:!0,allowEsc:!0,render:()=>(0,h.jsxs)(i.Fragment,{children:[(0,h.jsx)(Q,{hasPassword:t,intl:s,onReloadSettings:n,isEducationPlan:a,email:r}),(0,h.jsx)(q,{isEducationPlan:a}),(0,h.jsx)(W,{isEducationPlan:a,mfaStatus:l,onReloadSettings:n}),(0,h.jsx)($,{settingsStateMachineRef:d}),(0,h.jsx)(z,{})]})})})}},637932:(e,t,s)=>{s.d(t,{A:()=>M});var i=s(667294),n=()=>s(219727),o=()=>s(142735),a=()=>s(446866),r=()=>s(788860),l=()=>s(696459),d=()=>s(253502),c=()=>s(824462),u=()=>s(231077),p=()=>s(636340),m=()=>s(752127),g=()=>s(261930),f=()=>s(269299),h=()=>s(338217),S=()=>s(686350),y=()=>s(876822),b=()=>s(661297),x=()=>s(287509),v=()=>s(343734),j=()=>s(579807),w=s(785893);function M(e){let{target:t}=e;const s=(0,n().O7)(),{desktopAppId:M}=(0,n().Fy)(),k=(0,o().VK)((()=>y().default.state.currentSpaceViewStore),[]),_=(0,o().VK)((()=>{var e,s,i,n;switch(t){case"notify_mobile":case"notify_desktop":case"notify_email":case"notify_email_always":return(null==k||null===(e=k.getKeyStore(t))||void 0===e?void 0:e.getValue())||!1;case"notify_email_digest":return(null==k||null===(s=k.getSettingsStore())||void 0===s||null===(s=s.getKeyStore(t))||void 0===s?void 0:s.getValue())||!1;case"notify_home_digest_email":return(null==k||null===(i=k.getSettingsStore())||void 0===i||null===(i=i.getKeyStore(t))||void 0===i?void 0:i.getValue())??(null==k||null===(n=k.getSettingsStore())||void 0===n||null===(n=n.getKeyStore("notify_email_digest"))||void 0===n?void 0:n.getValue())??!1;case"marketing_emails":case"notify_slack":case"desktop_badge":case"notify_slack_mention":case"notify_slack_all_activity":return!1;default:(0,l().t1)(t)}}),[k,t]),C=(0,i.useCallback)((()=>{if(k){const e=!_;"notify_email_digest"===t?g().MA({environment:s,newValue:e}):"notify_home_digest_email"===t?g().a2(s,e):f().createAndCommit({userAction:"NotificationsAndPersonalSettings.onToggle",environment:s,canUndo:!0,perform:s=>{p().sW({store:k,data:{[t]:e},transaction:s})}}),"notify_slack"!==t&&"marketing_emails"!==t&&"desktop_badge"!==t&&d().Zh(s,{is_on:e,target:t})}}),[k,_,t,s]),I=async()=>{const e=await c().callApi({eventName:"getAuthorizedEmailPreferenceCenterLink",environment:s,data:{}});if(e&&"success"===e.type&&e.data.preferenceCenterLink)return d().Md(s),m().D({environment:s,url:e.data.preferenceCenterLink});{const e=await(0,S().iF)(s),t=(0,a().t_)(e);return d().Md(s),m().D({environment:s,url:t})}},T=()=>{var e;null!==(e=u().electronApi)&&void 0!==e&&e.openExternalUrl&&u().electronApi.openExternalUrl(`x-apple.systempreferences:com.apple.preference.notifications?id=${M}`)};return"marketing_emails"===t?(0,w.jsx)(j().Z,{type:"custom",isMobile:!0,title:(0,w.jsx)(v().Z,{target:t}),caption:(0,w.jsx)(x().Z,{target:t}),customButton:(0,w.jsx)(b().Z,{isLarge:!0,onClick:I,icon:h().J,children:(0,w.jsx)(r()._H,{id:"notificationSettings.marketingEmails.manageSettingsButton",defaultMessage:"Manage settings"})}),disableSettingsItemClick:!0}):"desktop_badge"===t?(0,w.jsx)(j().Z,{type:"custom",isMobile:!0,title:(0,w.jsx)(v().Z,{target:t}),caption:(0,w.jsx)(x().Z,{target:t}),customButton:(0,w.jsx)(b().Z,{isLarge:!0,onClick:T,icon:h().J,children:(0,w.jsx)(r()._H,{id:"notificationSettings.desktopBadge.manageSettingsButton",defaultMessage:"Manage in System Settings"})}),disableSettingsItemClick:!0}):(0,w.jsx)(j().Z,{isMobile:!0,title:(0,w.jsx)(v().Z,{target:t}),caption:(0,w.jsx)(x().Z,{target:t}),type:"toggle",isOn:_,onToggle:C})}},253664:(e,t,s)=>{s.d(t,{Z:()=>m});s(667294);var i=()=>s(219727),n=()=>s(846550),o=()=>s(788860),a=()=>s(707513),r=()=>s(395362),l=()=>s(985481),d=()=>s(838266),c=()=>s(745740),u=()=>s(67961),p=s(785893);function m(e){const{icon:t,title:s,deeplinkTab:m}=e,g=(0,i().O7)(),f=(0,n().yK)((e=>({cardContainer:{backgroundColor:e.accentColors.gray[30],width:"100%",marginTop:20,marginBottom:20,padding:10,border:4,display:"flex",alignItems:"center",justifyContent:"space-between",gap:4,overflow:"hidden"},title:{flexShrink:1,...a().Yu},titleContainer:{display:"flex",alignItems:"center",flexShrink:1,overflow:"hidden"},button:{borderRadius:2,padding:4,display:"flex",alignItems:"center"},linkTitle:{color:e.mediumTextColor,fontWeight:a().Ue.medium},titleIcon:{marginRight:8,height:20,width:20,color:e.mediumTextColor},arrowIcon:{marginLeft:4,color:e.mediumTextColor,height:14,width:14}})),[]);return(0,p.jsxs)("div",{style:f.cardContainer,children:[(0,p.jsxs)("div",{style:f.titleContainer,children:[t(f.titleIcon),(0,p.jsx)(u().Z,{style:f.title,showTooltipWhenTruncated:!0,children:s})]}),m?(0,p.jsxs)(c().Z,{onClick:()=>function(e,t){r().jk(t,{source_tab:d().default.state.currentTab,destination_tab:e.currentTab,destination_subtab:e.defaultSubtab}),d().default.setState({...d().default.state,...e})}(m,g),style:f.button,children:[(0,p.jsx)(u().Z,{style:f.linkTitle,children:(0,p.jsx)(o()._H,{id:"settingsDeeplinkBanner.deeplinkMessage",defaultMessage:"View settings"})}),(0,l().k)(f.arrowIcon)]}):null]})}},257822:(e,t,s)=>{s.d(t,{O:()=>d});s(241792);var i=s(667294),n=()=>s(219727),o=()=>s(995867),a=()=>s(332504),r=()=>s(666414),l=s(785893);function d(e){const{items:t}=e,{isMobile:s}=(0,n().Fy)();return(0,l.jsx)(l.Fragment,{children:(0,o().Z)(t.map((e=>{let{key:t,renderSettingsItem:s}=e;return(0,l.jsx)(i.Fragment,{children:s()},t)})),(e=>(0,l.jsx)(r().Z,{size:(0,a().f)(s),isHidden:!s},e)))})}},928066:(e,t,s)=>{s.d(t,{O:()=>O});s(267602),s(470928);var i=s(667294),n=()=>s(219727),o=()=>s(142735),a=()=>s(846550),r=()=>s(525807),l=()=>s(788860),d=()=>s(696459),c=()=>s(707513),u=()=>s(253502),p=()=>s(636340),m=()=>s(269299),g=()=>s(762300),f=()=>s(515329),h=()=>s(876822),S=()=>s(138912),y=()=>s(826955),b=()=>s(287509),x=()=>s(343734),v=(s(241792),()=>s(235484)),j=()=>s(855741),w=()=>s(832024),M=()=>s(388915),k=()=>s(352230),_=()=>s(15409),C=()=>s(615634),I=()=>s(521777),T=()=>s(154186),P=()=>s(827973),A=()=>s(448419),Z=()=>s(198829),H=()=>s(255577),R=()=>s(388284),B=s(785893);function D(e){const{currentExternalAuthentication:t,externalAuthentications:s,spaceId:r,spaceViewStore:d}=e,c=(0,n().O7)(),u=(0,n().Fy)(),f=(0,o().VK)((()=>S().default.integrations.state.find((e=>e.id===v().nO))),[]),h=(0,a().yK)((e=>({popupContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:14,marginTop:12},dropdownButtonContainer:{display:"flex",alignItems:"center",minWidth:0,padding:"0px 8px",borderRadius:4,marginLeft:8},currentValueLabel:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",flex:1},icon:{marginLeft:8,width:12,height:12,color:e.lightTextColor}})),[]);let y;y=u.isPhone?{menuType:k().o.ActionSheet}:{menuType:k().o.Popup,width:280,maxHeight:"50vh"};const b=i.useCallback((e=>Object.entries((0,g().YJ)(s)).map(((s,i)=>{let[n,o]=s;return{key:n,items:o.map((s=>{let{externalAuthentication:i,workspaceName:n}=s;return{key:i.id,action:()=>{e.close(),N({environment:c,spaceViewStore:d,currentExternalBotId:null==t?void 0:t.parent_id,selectedExternalBotId:i.parent_id})},render:e=>(0,B.jsx)(P().Z,{...e,title:n,right:i.id===(null==t?void 0:t.id)&&(0,_().e)({width:12,height:12})})}})),render:e=>(0,B.jsx)(R().Z,{...e,title:n,topBorder:0!==i})}}))),[null==t?void 0:t.id,null==t?void 0:t.parent_id,c,s,d]),x=i.useCallback((e=>f?[{key:"disable-notification",items:[{key:"disable-slack-notification",action:()=>{e.close(),function(e){const{environment:t,spaceViewStore:s}=e;m().createAndCommit({userAction:"NotificationsAndPersonalSettings.SlackNotificationsAccountSetting",environment:t,canUndo:!0,perform:e=>{p().sW({store:s.getSettingsStore(),data:{notify_slack:null},transaction:e})}}),w().xi(t,{type:"personal",source:"notifications_and_settings"})}({environment:c,spaceViewStore:d})},render:e=>(0,B.jsx)(P().Z,{...e,title:(0,B.jsx)(l()._H,{id:"personalSlackNotificationsAccountDropdownButton.disableNotification.label",defaultMessage:"Off"}),right:void 0===t&&(0,_().e)({width:12,height:12})})}],render:e=>(0,B.jsx)(R().Z,{...e,topBorder:b.length>0})},{key:"create-new-auth",items:[{key:"connect",render:e=>(0,B.jsx)(P().Z,{...e,icon:(0,I().R)({width:12,height:12}),title:(0,B.jsx)(l()._H,{id:"database.viewSettings.notificationsTab.slack.addNewAccount.label",defaultMessage:"Add new account"})}),action:async()=>{var e;const t=await M().hM({environment:c,integration:f,spaceId:r,from:"notifications_and_settings"});if(j().x.isFail(t))return;const s=null===(e=t.value.externalAuthentication)||void 0===e?void 0:e.parent_id;s&&N({environment:c,spaceViewStore:d,currentExternalBotId:void 0,selectedExternalBotId:s})}}],render:e=>(0,B.jsx)(R().Z,{...e,topBorder:!0})}]:[]),[t,c,b.length,r,d,f]);return(0,B.jsx)("div",{style:h.popupContainer,children:(0,B.jsx)(A().ZP,{popupType:A().Z4.Popup,alignmentToOrigin:A().vR.End,render:e=>(0,B.jsx)(Z().Z,{...y,children:(0,B.jsx)(H().Z,{type:H().i.Vertical,initialFocus:0,sections:[...b(e),...x(e)]})}),renderOrigin:t=>(0,B.jsxs)(T().Z,{...t,style:h.dropdownButtonContainer,children:[(0,B.jsx)("div",{style:h.currentValueLabel,children:(0,B.jsx)(V,{...e})}),(0,C().i)(h.icon)]})})})}function N(e){const{environment:t,spaceViewStore:s,selectedExternalBotId:i,currentExternalBotId:n}=e,o=s.getSettingsStore(),a=o.getKeyStore("notify_slack").getValue();if(n!==i){const e=(0,f().oI)();let s=!1;e&&(s=!n||Boolean(null==a?void 0:a.notify_slack_all_activity)),m().createAndCommit({userAction:"NotificationsAndPersonalSettings.SlackNotificationsAccountSetting",environment:t,canUndo:!0,perform:e=>{p().sW({store:o,data:{notify_slack:{external_bot_id:i,notify_slack_all_activity:s,notify_slack_mention:!n||(null==a?void 0:a.notify_slack_all_activity)}},transaction:e})}}),void 0===n?w().XC(t,{type:"personal",source:"notifications_and_settings"}):w().OS(t,{type:"personal",source:"notifications_and_settings"})}}function V(e){const{currentExternalAuthentication:t}=e;if(!t)return(0,B.jsx)(l()._H,{id:"SlackNotificationsPersonalSettingsAccountPicker.accountDropdown.selectPlaceholder",defaultMessage:"Off"});const s=(0,g().jg)(t).organizationName;return(0,B.jsx)(B.Fragment,{children:s})}var U=()=>s(579807);function O(e){const t=(0,n().O7)(),{target:s}=e,{isMobile:v}=(0,n().Fy)(),j=(0,o().VK)((()=>h().default.state.currentSpaceViewStore),[]),w=(0,o().VK)((()=>h().default.state.currentSpaceStore),[]),M=(0,o().Kw)(S().default.completeSlackAuthentications),k=(0,o().VK)((()=>(0,f().oI)()),[]),_=(0,o().VK)((()=>{var e;const t=null==j||null===(e=j.getSettings())||void 0===e||null===(e=e.notify_slack)||void 0===e?void 0:e.external_bot_id;if(!t)return;const s=M.find((e=>e.parent_id===t));if(s)return s;if(!j)return;return(0,y().Kv)(j,{id:t,table:r().PJ}).getValue()}),[j,M]),C=(0,o().VK)((()=>{var e;const t=null==j||null===(e=j.getSettingsStore())||void 0===e||null===(e=e.getKeyStore("notify_slack"))||void 0===e?void 0:e.getValue();switch(s){case"notify_slack_mention":return _&&(null==t?void 0:t.notify_slack_mention)||!1;case"notify_slack_all_activity":return(null==t?void 0:t.notify_slack_all_activity)||!1;case"notify_slack":return!1;default:(0,d().t1)(s)}}),[j,s,_]),I=(0,o().VK)((()=>{var e;const t=null==j||null===(e=j.getSettingsStore())||void 0===e||null===(e=e.getKeyStore("notify_slack"))||void 0===e?void 0:e.getValue();return null==t?void 0:t.notify_slack_all_activity}),[j]),T=(0,i.useCallback)((()=>{if(j){const e=!C,i=j.getSettingsStore();let n=i.getKeyStore("notify_slack").getValue();if(!n)return;"notify_slack_mention"===s?(n[s]=e,e||n.notify_slack_all_activity||(n=void 0),m().createAndCommit({userAction:"NotificationsAndPersonalSettings.onToggle",environment:t,canUndo:!0,perform:e=>{p().sW({store:i,data:{notify_slack:n},transaction:e})}})):"notify_slack_all_activity"===s&&(n[s]=e,m().createAndCommit({userAction:"NotificationsAndPersonalSettings.onToggle",environment:t,canUndo:!0,perform:e=>{p().sW({store:i,data:{notify_slack:n},transaction:e})}})),"notify_slack"!==s&&u().Zh(t,{is_on:e,target:s})}}),[t,j,C,s]),P=(0,a().yK)((e=>({notifySlackSelectedWorkspaceName:{fontWeight:c().Ue.bold,color:e.darkTextColor},titleWithBadgeContainer:{display:"flex",alignItems:"center"},betaBadgeContainer:{marginTop:-3},betaBadge:{display:"inline",marginLeft:6}})),[]);return j&&w?"notify_slack"===s?(0,B.jsx)(U().Z,{type:"custom",isMobile:v,title:(0,B.jsx)(x().Z,{target:s}),caption:(0,B.jsx)(B.Fragment,{children:_?(0,B.jsx)(l()._H,{id:"notificationSettings.slackNotificationsSettings.workspaceSelected.description",defaultMessage:"Receive notifications in {slackWorkspaceName} slack workspace{slackNotificationSettingMessage}.",values:{slackWorkspaceName:(0,B.jsx)("span",{style:P.notifySlackSelectedWorkspaceName,children:(0,g().jg)(_).organizationName}),slackNotificationSettingMessage:k?"":" when you're mentioned in a page, database property, or comment"}}):(0,B.jsx)(b().Z,{target:s})}),customButton:(0,B.jsx)(D,{currentExternalAuthentication:_,externalAuthentications:M,spaceId:w.id,spaceViewStore:j})}):"notify_slack_mention"===s?_?(0,B.jsx)(U().Z,{isMobile:!0,title:(0,B.jsx)(x().Z,{target:s}),caption:(0,B.jsx)(b().Z,{target:s}),type:"toggle",isOn:C,onToggle:T,disabled:Boolean(I)}):(0,B.jsx)(B.Fragment,{}):_?(0,B.jsx)(U().Z,{isMobile:!0,title:(0,B.jsx)(x().Z,{target:s}),caption:(0,B.jsx)(b().Z,{target:s}),type:"toggle",isOn:C,onToggle:T}):(0,B.jsx)(B.Fragment,{}):null}},809807:(e,t,s)=>{s.d(t,{w:()=>n});var i=()=>s(623596);function n(e){const{up:t}=e,s={width:10,height:10,marginLeft:4};return t?(0,i().K)({...s,transform:"rotate(180deg)"}):(0,i().K)(s)}},202937:(e,t,s)=>{s.d(t,{Z:()=>De});s(267602),s(653476),s(241792);var i=s(667294),n=()=>s(142735),o=()=>s(846550),a=()=>s(619186),r=()=>s(788860),l=()=>s(707513),d=()=>s(907099),c=()=>s(91502),u=()=>s(467806),p=()=>s(285473),m=()=>s(67961),g=(s(228244),()=>s(219727)),f=()=>s(527278),h=()=>s(352230),S=()=>s(270895),y=()=>s(529048),b=()=>s(555813),x=()=>s(383694),v=()=>s(149809),j=()=>s(827973),w=()=>s(448419),M=()=>s(740046),k=()=>s(198829),_=()=>s(92175),C=()=>s(388284),I=s(785893);const T=(0,r().vU)({filterTeams:{defaultMessage:"Filter teamspaces…",id:"teamsDropdownForGroupMenu.filterForTeams.placeholder"}});function P(e){const t=(0,g().O7)(),s=(0,o().yK)((()=>({teamMenuItem:{fontWeight:400}})),[]),[a,l]=(0,i.useState)(""),d=(0,i.useCallback)((e=>b().RF({environment:t,teamId:e,tab:S().a.Members,from:"teams_dropdown_for_group"})),[t]),u=(0,n().VK)((()=>[{key:"teams for group",render:e=>(0,I.jsx)(C().Z,{...e}),actions:e.teamStores.map((e=>{const t={key:e.id,displayName:e.getName(),analyticsName:e.getName()||"team_unknown",searchName:e.getName(),render:t=>{var i;return(0,I.jsx)(j().Z,{icon:(0,I.jsx)(x().p,{disabled:!0,store:e}),title:(0,I.jsx)(m().Z,{style:s.teamMenuItem,children:e.getName()}),right:(0,I.jsx)(r()._H,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"teamsInGroupMenu.filterForTeams.numMembers",values:{numMembers:(null===(i=(0,c().oT)(e))||void 0===i?void 0:i.memberCountWithGuests)??0}}),...t})},action:()=>{d(e.id)},closeParentMenu:!0};return t}))}]),[s,e.teamStores,d]),p=a,y=(0,I.jsx)(v().Z,{filter:p,context:{blocks:[],environment:t,publicEditMode:void 0},sections:u,initialFocus:0}),w=(0,I.jsx)(C().Z,{isInput:!0,children:(0,I.jsx)(M().ZP,{value:p,onChange:(0,i.useCallback)((e=>{l(e.target.value)}),[]),focus:!0,focusAfterAnimation:!0,placeholder:f().Z.formatMessage(T.filterTeams)})}),_={menuType:h().o.Popup,width:280,maxHeight:"50vh",header:e.teamStores.length>5?w:void 0};return(0,I.jsx)(k().Z,{..._,children:y})}const A=function(e){const t=(0,n().qz)(void 0,y().Z),a=(0,o().yK)((e=>({button:{marginRight:8},noTeams:{marginRight:8,color:e.lightTextColor},chevron:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]),l=(0,n().VK)((()=>s(700696).default.state.teams.filter((t=>t.getRawMembership().some((t=>"group"===t.entity_type&&t.group_id===e.group.group_id))))),[e.group]);return(0,I.jsx)(w().ZP,{popupType:w().Z4.Popup,renderOrigin:e=>(0,I.jsxs)(_().Z,{disabled:0===l.length,style:0===l.length?a.noTeams:a.button,...e,children:[0===l.length?(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.userGroup.teamsCountNone",defaultMessage:"None"}):(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.userGroup.teamsCount",defaultMessage:"{numberOfTeams, plural, one {{numberOfTeams} teamspace} other {{numberOfTeams} teamspaces}}",values:{numberOfTeams:l.length}}),l.length>0&&(0,s(615634).i)(a.chevron)]}),buttonPopupStore:t,placementToOrigin:s(128119).Iw.Bottom,render:e=>(0,I.jsx)(P,{parent:e,teamStores:l}),onClose:(0,i.useCallback)((()=>{t.reset()}),[t])})};var Z=()=>s(513670),H=()=>s(912732),R=()=>s(308186),B=()=>s(224597),D=()=>s(269299),N=()=>s(485491),V=()=>s(314379),U=()=>s(577128),O=()=>s(855238),E=()=>s(1910),F=()=>s(255577),L=()=>s(967092);function K(e){const{group:t,spaceStore:s,settingsStore:i}=e,o=(0,n().qz)(void 0,y().Z);return(0,I.jsx)(w().ZP,{popupType:L().kQ.Popup,render:()=>(0,I.jsx)(G,{group:t,spaceStore:s,popupStore:o,settingsStore:i}),buttonPopupStore:o,renderOrigin:e=>(0,I.jsx)(E().Z,{icon:V().o,...e})})}function G(e){const{group:t,spaceStore:s,popupStore:a,settingsStore:l}=e,d=(0,n().VK)((()=>s.canAdmin()),[s]),u=(0,g().O7)(),p=(0,n().VK)((()=>(0,c().Xq)({environment:u,spaceStore:s})),[s,u]),m=(0,o().yK)((e=>({deleteButton:{color:e.redBadgeBackground}})),[]),f=(0,i.useCallback)((async()=>{a.setState({open:!1});const{accept:e}=await R().gt({message:(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.deleteGroupModal.confirmationMessage",defaultMessage:"Are you sure you want to delete this group?"}),description:(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.deleteGroupModal.confirmationDescription",defaultMessage:"Any pages that are private to this group will be transferred to you."}),acceptLabel:(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.deleteGroupModal.confirmationButton.label",defaultMessage:"Yes"})});if(e){const e=(0,N().Q)({spaceStore:s,groupId:t.group_id});await D().createAndCommitAsync({environment:u,userAction:"SpacePermissionGroup.handleDelete",waitForServerCommit:!1,perform:async t=>{await B().Xv({environment:u,groupStore:e,transaction:t})}}),H().d(u)}}),[t,u,s,a]),S=(0,i.useCallback)((()=>{l.setState({...l.state,editingNameGroupId:t.group_id,groupNameInputValue:t.name||""}),a.setState({open:!1}),H().Xb(u)}),[t,u,a,l]),y=(0,i.useCallback)((()=>{U().default.setState({...U().default.state,name:t.name||"",defaultInviteTargets:[{type:"group",value:t}]}),b().lo("group_settings")}),[t]),x={key:"action_menu",render:e=>(0,I.jsx)(C().Z,{...e}),items:Z().oA([{key:"rename",render:e=>(0,I.jsx)(O().Z,{...e,title:(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.renameItem",defaultMessage:"Rename"})}),action:S},p?{key:"create_team_from_group",render:e=>(0,I.jsx)(O().Z,{...e,title:(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.createTeamFromGroup",defaultMessage:"Create teamspace from group"})}),action:y}:void 0,d&&{key:"delete",render:e=>(0,I.jsx)(O().Z,{...e,title:(0,I.jsx)("div",{style:m.deleteButton,children:(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.deleteItem",defaultMessage:"Delete"})})}),action:f}])};return(0,I.jsx)(k().Z,{menuType:h().o.Popup,children:(0,I.jsx)(F().Z,{type:F().i.Vertical,initialFocus:0,sections:[x],onAccept:()=>{a.setState({open:!1})}})})}var q=()=>s(801812),W=()=>s(933868),z=()=>s(989478),Y=()=>s(568017),Q=()=>s(824462);var $=()=>s(591914),J=()=>s(876822),X=()=>s(826955);class ee extends(()=>s(263184))().default{getInitialState(){return{userInputValue:"",temporaryUserIds:[],limitUsers:!0}}}const te=ee;var se=()=>s(207917),ie=()=>s(239444),ne=()=>s(816512),oe=()=>s(446866),ae=()=>s(521777),re=()=>s(828946),le=()=>s(18281),de=()=>s(897257),ce=()=>s(154439),ue=()=>s(838367),pe=()=>s(906651),me=()=>s(864832),ge=()=>s(122671),fe=()=>s(523516);function he(e){const{group:t,spaceStore:s,groupStore:i,userIds:a,onAddUsers:l}=e,d=(0,n().qz)(void 0,y().Z),c=(0,o().yK)((()=>({popup:{width:400},button:{marginTop:4}})),[]);return(0,I.jsx)(w().ZP,{popupType:L().kQ.Popup,render:()=>(0,I.jsx)(Se,{spaceStore:s,group:t,userIds:a,popupStore:d,groupStore:i,onAddUsers:l}),buttonPopupStore:d,onClose:()=>i.setState({userInputValue:"",temporaryUserIds:[],limitUsers:!0}),style:c.popup,renderOrigin:e=>(0,I.jsx)("div",{children:(0,I.jsx)(_().Z,{isGray:!0,icon:ae().R,style:c.button,...e,children:(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.groupList.addMemberButton.label",defaultMessage:"Add members"})})})})}function Se(e){const t=(0,g().O7)(),s=(0,r().YB)(),{group:o,userIds:a,spaceStore:l,popupStore:d,groupStore:c,onAddUsers:p}=e,m=(0,n().VK)((()=>c.state.temporaryUserIds.map((e=>{const t=l.getRecordValue({table:z().KJ,id:e});return(0,I.jsx)(me().vw,{userValue:t,format:me().vw.Format.Medium,showRemoveButton:!0,onClickRemove:()=>{const t=c.state.temporaryUserIds.filter((t=>t!==e));c.setState({...c.state,temporaryUserIds:t})},shouldShrink:!0,isSingle:!1},e)}))),[l,c]),f=(0,n().VK)((()=>()=>{const{temporaryUserIds:e}=c.state;D().createAndCommit({userAction:"SpacePermissionGroup.handleAddDoneClick",environment:t,canUndo:!0,perform:t=>{for(const s of e){const e=(0,N().f)({spaceStore:l,groupId:o.group_id,userId:s});B().XM({groupMemberStore:e,spaceId:l.id,groupId:o.group_id,userId:s,transaction:t})}p(e),u().Z.setState({...u().Z.state,permissionGroupsAndMemberCounts:u().Z.state.permissionGroupsAndMemberCounts.map((t=>t.group.group_id===o.group_id?{group:o,memberCount:t.memberCount+e.length}:t))})}}),c.setState({userInputValue:"",temporaryUserIds:[],limitUsers:!0}),d.setState({open:!1}),H().Kf(t,{add_member_count:e.length})}),[c,t,d,l,o,p]),S=(0,i.useCallback)((()=>{const{temporaryUserIds:e}=c.state,t=e.slice(0,e.length-1);c.setState({...c.state,temporaryUserIds:t})}),[c]),y=(0,i.useCallback)((e=>{const t=e.target.value,{extractedEmails:s,newInputValue:i}=(0,oe().zI)(t),{currentSpaceStore:n}=J().default.state,o=de().subscriptionDataStoreInstance.state;if(!o||!n)return;const a=(0,le().CM)(o).map((e=>e.userId)),r=Z().oA(a.map((e=>X().U6.createChildStore(n,{table:z().KJ,id:e}).getValue()))).filter((e=>s.includes(e.email)&&!c.state.temporaryUserIds.includes(e.id)));c.setState({...c.state,temporaryUserIds:[...c.state.temporaryUserIds,...r.map((e=>e.id))],userInputValue:i})}),[c]),b=(0,n().VK)((()=>c.state.userInputValue),[c]),x=(0,n().VK)((()=>c.state.temporaryUserIds),[c]);return(0,I.jsx)(k().Z,{menuType:h().o.Popup,tokenInputHeader:!0,header:(0,I.jsx)(ge().ZP,{focus:!0,disabled:!1,focusAfterAnimation:!0,format:ge().UR.Group,tokens:m,placeholder:s.formatMessage({id:"spacePermissionsSettings.groupsTab.userGroup.userSearchInput.placeholder",defaultMessage:"Search for a person…"}),onRemoveLastToken:S,value:b,onChange:y,inputAndTokenWrapRightStyle:{paddingTop:t.device.isMobile?0:6,paddingBottom:t.device.isMobile?0:6},right:(0,I.jsx)(pe().Z,{isLarge:!0,onClick:f,children:(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.userGroup.addUserButton.label",defaultMessage:"Add"})})}),children:(0,I.jsx)(ce().Z,{request:{query:b,temporaryUserIds:x},performRequest:async e=>{let{query:s,temporaryUserIds:i}=e;const n=await re().x.searchActions.load();return(await n.searchVisibleSpaceUsers({environment:t,query:s,membersOnly:!0})).filter((e=>a.indexOf(e.id)<0&&i.indexOf(e.id)<0)).slice(0,20)},render:(e,t)=>(0,I.jsx)(ye,{results:t,spaceStore:l,groupStore:c})})})}function ye(e){const{spaceStore:t,groupStore:s}=e,[i,o]=(0,n().AF)(s,te),a=(e.results||[]).map((e=>{let{id:t}=e;return t})),l=(0,n().VK)((()=>a.map((e=>{const s=X().U6.createChildStore(t,{table:z().KJ,id:e}).getValue(),n={key:e,render:e=>(0,I.jsx)(fe().Z,{...e,actor:(0,ne().m3)(s),useEmailAsTooltip:!0}),action:()=>{const t=[...i.temporaryUserIds,e];o({...i,temporaryUserIds:t,userInputValue:""})}};return n}))),[t,o,i,a]);if(0===a.length)return(0,I.jsx)(C().Z,{children:(0,I.jsx)(ue().Z,{title:(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.userGroup.searchUserDropdown.noResultsMessage",defaultMessage:"No results"})})});{const e={key:"user_menu",render:e=>(0,I.jsx)(C().Z,{...e}),items:l};return(0,I.jsx)(F().Z,{type:F().i.Vertical,initialFocus:0,sections:[e]})}}const be=10;function xe(e){const{group:t,canEdit:s,spaceStore:o,settingsStore:a}=e,l=(0,r().YB)(),c=(0,g().O7)(),u=(0,n().VK)((()=>J().default.state.currentSpaceStore),[]),p=(0,n().qz)(void 0,te),m=(0,n().VK)((()=>p.state.limitUsers&&!a.state.groupsFilter?be:void 0),[p,a]),[{value:f}]=(0,q().r5)((async()=>{const e=await Q().callApi({eventName:"getSpacePermissionGroupMembers",environment:c,data:{groupIds:[t.group_id],spaceId:o.id}});if("success"===e.type){var s;const i=(null===(s=e.data.groupUsersMap[t.group_id])||void 0===s?void 0:s.userIds).map((e=>X().U6.createChildStore(o,{table:z().KJ,id:e})));return{allUserStores:(0,d().N5)({userStores:i,spaceStore:u,intl:l})}}}),[u,c,t,l,o]),[h,S]=(0,i.useState)([]);(0,i.useEffect)((()=>{null!=f&&f.allUserStores&&S(f.allUserStores)}),[null==f?void 0:f.allUserStores]);const[y,b]=(0,i.useState)([]);return(0,i.useEffect)((()=>{b(m?h.slice(0,m):h)}),[h,m]),(0,I.jsxs)("div",{style:{padding:"4px 42px 8px"},children:[y.map((t=>(0,I.jsx)(ve,{userStore:t,...e,onRemoveUser:e=>{S(h.filter((t=>t.id!==e))),b(y.filter((t=>t.id!==e)))}},t.id))),m&&h.length>m&&(0,I.jsx)(_().Z,{isGray:!0,style:{marginTop:4},onClick:()=>{p.setState({...p.state,limitUsers:!1})},children:(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.showMoreUsersButton.label",defaultMessage:"{numberOfHiddenUsers, plural, one {Show {numberOfHiddenUsers} more} other {Show {numberOfHiddenUsers} more}}",values:{numberOfHiddenUsers:h.length-y.length}})}),s&&u?(0,I.jsx)(he,{group:t,spaceStore:o,groupStore:p,userIds:h.map((e=>e.id))||[],onAddUsers:e=>{const t=e.map((e=>X().U6.createChildStore(o,{table:z().KJ,id:e})));S([...h,...t])}}):y.length<1&&(0,I.jsx)(_().Z,{disabled:!0,isGray:!0,children:(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.groupList.noMembersInside",defaultMessage:"No members inside"})})]})}function ve(e){const{spaceStore:t,userStore:s,group:i,canEdit:o,onRemoveUser:a}=e,l=(0,g().O7)(),d=(0,n().VK)((()=>(0,$().VK)(t,s.id).getMembershipTypeAsRoleOrNone()),[t,s]);return(0,I.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,I.jsxs)("div",{style:{display:"flex"},children:[(0,I.jsx)(ie().Z,{userStore:s,style:{fontSize:14,fontWeight:400,lineHeight:"17px",paddingRight:6,minHeight:34,width:"100%"},avatarSize:22}),(0,W().Bc)(d)&&(0,I.jsx)(se().Z,{role:"membership_admin"===d?"membership_admin":"admin"})]}),o&&(0,I.jsx)(_().Z,{isGray:!0,hoveredStyle:{color:Y().ZP.red},onClick:async()=>{const{accept:e}=await R().gt({message:(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupDialog.confirmationMessage",defaultMessage:"Are you sure you want to remove this member?"}),acceptLabel:(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupDialog.confirmationButton.label",defaultMessage:"Yes"})});e&&(D().createAndCommit({userAction:"SpacePermissionGroup.removeUser",environment:l,canUndo:!0,perform:e=>{!function(e){const{groupMemberStore:t,transaction:s}=e;D().applyOperation({store:t,operation:{command:"update",pointer:t.pointer,path:[],args:{removed_at:Date.now()}},transaction:s})}({transaction:e,groupMemberStore:(0,N().f)({spaceStore:t,groupId:i.group_id,userId:s.id})}),a(s.id),u().Z.setState({...u().Z.state,permissionGroupsAndMemberCounts:u().Z.state.permissionGroupsAndMemberCounts.map((e=>e.group.group_id===i.group_id?{group:i,memberCount:e.memberCount>=1?e.memberCount-1:0}:e))})}}),H().xt(l))},children:(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupButton.label",defaultMessage:"Remove"})})]},s.id)}var je=()=>s(146947),we=()=>s(321160),Me=()=>s(67330),ke=()=>s(458196),_e=()=>s(419273),Ce=()=>s(83259),Ie=()=>s(388350),Te=()=>s(98991),Pe=()=>s(291198),Ae=()=>s(94967),Ze=()=>s(943620),He=()=>s(654133),Re=()=>s(167705);function Be(e){const{row:t,canEdit:s,open:a,toggleOpenState:c,spaceStore:p,settingsStore:f}=e,h=t.group,S=(0,r().YB)(),y=(0,o().Fg)(),b=(0,g().O7)(),x=d().kF({intl:S,groupName:h.name}),v=(0,o().yK)((e=>({container:{display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%"},toggle:{flexShrink:0,marginRight:2},chevron:{width:12,height:12,transition:"transform 200ms ease-out",transform:`rotateZ(${a?0:-90}deg)`,fill:"inherit",opacity:.5,marginRight:4},name:{fontFamily:l().F5(je().locale).sans,fontSize:14,lineHeight:"17px",marginRight:4},input:{fontWeight:l().Ue.medium,padding:"4px 6px",background:e.contentBackgroundTransparent},icon:{marginRight:9}})),[a]),j=(0,i.useCallback)((e=>{const t=Date.now();D().createAndCommit({userAction:"SpacePermissionGroup.handleIconChange",environment:b,canUndo:!0,perform:s=>{B().jF({spacePermissionGroupStore:(0,N().Q)({spaceStore:p,groupId:h.group_id}),transaction:s,value:{icon:e,last_edited_at:t}})}});const s={id:(0,ke().L9)({spacePermissionGroupId:h.group_id,spaceId:p.id}),icon:e,name:h.name,group_id:h.group_id,space_id:h.space_id,version:h.getVersion(),created_by_id:h.created_by_id,created_by_table:h.created_by_table,created_at:h.created_at,last_edited_by_id:h.last_edited_by_id,last_edited_at:t,last_edited_by_table:h.last_edited_by_table};u().Z.setState({...u().Z.state,permissionGroupsAndMemberCounts:u().Z.state.permissionGroupsAndMemberCounts.map((e=>e.group.group_id===h.group_id?{group:Me().k.fromValue(ke().GQ,s),memberCount:e.memberCount}:e))}),H().zU(b,{is_emoji:(0,we().Z)(e)})}),[h,p,b]),w=(0,i.useCallback)((()=>{f.setState({...f.state,editingNameGroupId:void 0,groupNameInputValue:""})}),[f]),M=(0,i.useCallback)((e=>{f.setState({...f.state,groupNameInputValue:e.target.value})}),[f]),k=(0,i.useCallback)((()=>{const{editingNameGroupId:e,groupNameInputValue:t}=f.state,s=t.trim(),i=Date.now();if(e===h.group_id){if(s!==h.name){const e=(0,N().Q)({spaceStore:p,groupId:h.group_id});D().createAndCommit({userAction:"SpacePermissionGroup.handleNameAccept",environment:b,canUndo:!0,perform:t=>{B().jF({spacePermissionGroupStore:e,value:{name:s,last_edited_at:i},transaction:t})}})}const e={id:(0,ke().L9)({spacePermissionGroupId:h.group_id,spaceId:p.id}),icon:h.icon,name:s,group_id:h.group_id,space_id:h.space_id,version:h.getVersion(),created_by_id:h.created_by_id,created_by_table:h.created_by_table,created_at:h.created_at,last_edited_by_id:h.last_edited_by_id,last_edited_at:i,last_edited_by_table:h.last_edited_by_table};u().Z.setState({...u().Z.state,permissionGroupsAndMemberCounts:u().Z.state.permissionGroupsAndMemberCounts.map((t=>t.group.group_id===h.group_id?{group:Me().k.fromValue(ke().GQ,e),memberCount:t.memberCount}:t))}),f.setState({...f.state,editingNameGroupId:void 0,groupNameInputValue:""})}}),[h,b,p,f]),_=(0,n().VK)((()=>f.state.editingNameGroupId===h.group_id),[h,f]),C=(0,n().VK)((()=>f.state.groupNameInputValue),[f]);function T(e){const t={width:e-4,height:e-4,fill:y.mediumIconColor},s={width:12,height:12,fill:y.mediumIconColor};return(0,I.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[(0,Ce().I)(t),(0,_e().f)(s)]})}return(0,I.jsxs)("div",{style:v.container,children:[(0,I.jsx)(Re().Z,{isSidebar:!1,fill:!0,icon:"chevron",open:a,color:y.mediumIconColor,onClick:()=>c(h.group_id),style:v.toggle}),(0,I.jsx)(Te().Z,{size:28,style:v.icon}),_?(0,I.jsx)(Ae().Z,{debugName:"GroupNameToggle",capture:!0,onEsc:w,children:(0,I.jsx)(Pe().Z,{disabled:!s,type:Ie().b.Inline,style:v.input,placeholder:S.formatMessage({id:"spacePermissionsSettings.groupsTab.userGroup.groupNameInput.placeholder",defaultMessage:"Untitled"}),focus:!0,value:C,onChange:M,onBlur:k,onSubmit:k})}):(0,I.jsx)(m().Z,{style:v.name,showTooltipWhenTruncated:!0,children:x}),(P=t.isRowHovered,h.icon?s?(0,I.jsx)(Ze().Z,{disabled:!1,bucket:"public",icon:h.icon?{pointer:p.pointer,icon:h.icon}:void 0,size:18,isEmptyPage:!1,title:x,onChange:j,style:v.icon}):(0,I.jsx)(Ze().Z,{disabled:!0,bucket:"public",icon:h.icon?{pointer:p.pointer,icon:h.icon}:void 0,size:18,isEmptyPage:!1,title:x,style:v.icon}):P&&s?(0,I.jsx)(He().Z,{renderTooltip:()=>(0,I.jsx)(r()._H,{defaultMessage:"Add icon",id:"spacePermissionsSettings.groupsTab.userGroup.groupIcon.tooltip"}),render:e=>(0,I.jsx)(Ze().Z,{disabled:!1,bucket:"public",icon:h.icon?{pointer:p.pointer,icon:h.icon}:void 0,size:18,isEmptyPage:!1,title:x,onChange:j,style:{...v.icon,width:30},defaultIcon:T(18),...e})}):void 0)]});var P}function De(e){let{canEdit:t,spaceStore:s,permissionsSettingsStore:d,containerMarginTop:g}=e;const[f,h]=(0,i.useState)([]),S=(0,o().Fg)(),y=(0,n().VK)((()=>u().Z.state.permissionGroupsAndMemberCounts.map((e=>e.group))),[]),b=(0,n().VK)((()=>0!==(0,c().az)()),[]),x=(0,n().VK)((()=>(0,a().ZP)(d.state.groupsFilter,y,(e=>e.name||""))),[d,y]),v=(0,i.useCallback)((e=>{h((t=>t.includes(e)?t.filter((t=>t!==e)):t.concat(e)))}),[h]),j=(0,i.useMemo)((()=>function(e){return e.map((e=>({id:e.group_id,group:e,isClickable:!1})))}(x)),[x]),w=(0,i.useMemo)((()=>function(e){let{openRowIds:t,toggleOpenRowId:s,canEdit:i,showTeamsColumn:n,spaceStore:o,settingsStore:a}=e;const d={id:"title",headerTitle:(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.groups",defaultMessage:"Group"}),renderCell:e=>(0,I.jsx)(Be,{row:e,open:t.includes(e.id),toggleOpenState:s,canEdit:i,spaceStore:o,settingsStore:a}),widthData:{width:120},hasClickableContents:!1,sortable:!1},c={id:"teams",headerTitle:(0,I.jsx)("div",{style:{paddingLeft:8},children:(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.teams",defaultMessage:"Teamspaces"})}),renderCell:e=>(0,I.jsx)("div",{style:l().Yu,children:(0,I.jsx)(A,{group:e.group})}),widthData:{width:40},hasClickableContents:!1,sortable:!1},u={id:"members",headerTitle:(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.member",defaultMessage:"Members"}),renderCell:e=>(0,I.jsx)(Ne,{row:e}),widthData:{width:40},hasClickableContents:!1,sortable:!1},p={id:"menu",headerTitle:null,renderCell:e=>(0,I.jsx)(K,{group:e.group,spaceStore:o,settingsStore:a}),widthData:{width:20},hasClickableContents:!0,sortable:!1};return[d,...n?[c]:[],u,...i?[p]:[]]}({openRowIds:f,toggleOpenRowId:v,canEdit:t,showTeamsColumn:b,spaceStore:s,settingsStore:d})),[f,v,t,b,s,d]),M=(0,p().bE)({columnRenderInfo:w,theme:S,containerMarginTop:g}),k=(0,o().yK)((e=>({noRowContainer:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",gap:4,borderBottom:`1px solid ${e.stroke.primary}`}})),[]);return(0,I.jsx)(p().Dp,{showRowBorders:!0,hideHeaderRowPadding:!0,columnRenderInfo:w,rows:j,styles:M,renderNoRowsComponent:()=>(0,I.jsx)(m().Z,{isSmall:!0,style:k.noRowContainer,children:y.length>0?(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.noGroupsFound",defaultMessage:"No groups found"}):(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.noGroups",defaultMessage:"No groups"})}),renderRowChild:e=>f.includes(e.id)?(0,I.jsx)(xe,{group:e.group,canEdit:t,spaceStore:s,settingsStore:d}):void 0})}function Ne(e){const{row:t}=e,s=(0,n().VK)((()=>(0,d().c7)({groupId:t.group.group_id})),[t.group]);return(0,I.jsx)("div",{style:l().Yu,children:(0,I.jsx)(r()._H,{id:"spacePermissionsSettings.groupsTab.userGroup.memberCount",defaultMessage:"{numberOfGroupMembers, plural, one {{numberOfGroupMembers} member} other {{numberOfGroupMembers} members}}",values:{numberOfGroupMembers:s}})})}},391598:(e,t,s)=>{s.d(t,{y:()=>g});s(667294);var i=()=>s(219727),n=()=>s(142735),o=()=>s(788860),a=()=>s(228772),r=()=>s(297861),l=()=>s(897257),d=()=>s(108714),c=()=>s(661297),u=()=>s(67961),p=()=>s(868614),m=s(785893);function g(){const e=(0,i().O7)(),t=(0,n().VK)((()=>function(e){const{device:t,WindowSizeStore:s}=e;return{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto",paddingLeft:t.isMobile?s.state.paddingLeftCSS:0,paddingRight:t.isMobile?s.state.paddingRightCSS:0}}(e)),[e]);return(0,m.jsxs)("div",{children:[(0,m.jsx)(h,{}),(0,m.jsxs)("div",{style:t,children:[(0,m.jsx)(u().Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,m.jsx)(S,{})}),(0,m.jsx)(f,{})]})]})}function f(){const e=(0,a().r)(),{mobileNative:t}=(0,i().O7)(),{isIOS:s}=(0,i().Fy)(),u=(0,n().VK)((()=>{var e;const t=l().subscriptionDataStoreInstance.state;return"subscribed_admin"===(null==t?void 0:t.type)?null===(e=t.customerData)||void 0===e||null===(e=e.revenueCat)||void 0===e?void 0:e.store:void 0}),[]),p={marginTop:12,marginBottom:4},g=(0,m.jsx)(o()._H,{id:"subscriptionSettings.button",defaultMessage:"Manage subscription"});if(s&&"app_store"===u&&(0,r().Y)("supportsAiIAP")&&null!=t&&t.openUpgradeModal&&e)return(0,m.jsx)(c().Z,{isLarge:!0,style:p,onClick:()=>{t.openUpgradeModal(e.getSpaceId(),"settings")},children:g});let f;switch(u){case"app_store":f="https://apps.apple.com/account/subscriptions";break;case"play_store":f="https://play.google.com/store/account/subscriptions"}return(0,m.jsx)(d().Z,{href:f,children:(0,m.jsx)(c().Z,{isLarge:!0,style:p,children:g})})}function h(){const e=(0,i().O7)(),{device:t}=e;return(0,m.jsx)(p().Z,{large:!t.isMobile||void 0,divider:t.isMobile?void 0:"full",children:(0,m.jsx)(o()._H,{id:"subscriptionSettings.title",defaultMessage:"Subscription"})})}function S(){const e=(0,i().O7)(),{device:t}=e;return t.isMobile?(0,m.jsx)(o()._H,{id:"subscriptionSettings.mobileDescription",defaultMessage:"Manage your subscription through the App Store."}):(0,m.jsx)(o()._H,{id:"subscriptionSettings.description",defaultMessage:"You're currently subscribed through an in-app purchase with Apple. You can manage your subscription in Apple's subscription settings."})}},418372:(e,t,s)=>{s.d(t,{Z:()=>y});var i=s(667294),n=()=>s(146947),o=()=>s(219727),a=()=>s(142735),r=()=>s(646574),l=()=>s(815757),d=()=>s(446866),c=()=>s(788860),u=()=>s(824462),p=()=>s(998901),m=()=>s(876822),g=()=>s(690122),f=()=>s(654133),h=()=>s(579807),S=s(785893);const y=function(e){let{emailDomainSettings:t}=e;const n=(0,o().O7)(),r=(0,a().qz)(void 0,s(853648).Z),d=(0,i.useCallback)(((e,s,i)=>(0,S.jsx)(M,{emailDomainSettings:t,requestStore:r,error:e,result:s,ready:i})),[t,r]),c=(0,a().VK)((()=>m().default.state.currentUserStore),[]);return c?(0,S.jsx)(s(154439).Z,{requestStore:r,request:{userId:c.id,expiryTime:Date.now()+l().g},performRequest:e=>async function(e,t){const s=await u().callApi({eventName:"getDataAccessConsent",environment:t,data:{}});if("failed"===s.type)throw s.error;return s.data}(0,n),render:d}):null};function b(e){return Boolean(e.prevent_granting_support_access)}function x(e){const t=(0,o().O7)(),{accessGranted:s,onClick:i,expiryTime:a,emailDomainSettings:l}=e,{device:d}=t;return(0,S.jsx)(h().Z,{disabled:b(l),isMobile:d.isMobile,title:(0,S.jsx)(c()._H,{id:"personalSettings.supportSection.userDataConsentSettings.label",defaultMessage:"Support access"}),caption:s&&a?(0,S.jsx)(c()._H,{id:"userDataConsentSettings.accessGranted.label",defaultMessage:"You have granted Notion access to your account for support purposes until {expiryTime}.",values:{expiryTime:(0,r().Yx)(a,"medium_with_time",n().locale)}}):(0,S.jsx)(c()._H,{id:"personalSettings.supportSection.userDataConsentSettings.message",defaultMessage:"Grant Notion support temporary access to your account so we can troubleshoot problems or recover content on your behalf. You can revoke access at any time."}),type:"toggle",isOn:s,onToggle:i})}function v(e){const{accessGranted:t,onClick:s,expiryTime:i,emailDomainSettings:n}=e,o=(0,a().VK)((()=>{var e;const t=null===(e=m().default.state.currentUserStore)||void 0===e?void 0:e.getEmail();return t?(0,d().Gd)(t):void 0}),[]);return(0,S.jsx)(f().Z,{disableTooltip:!b(n),renderTooltip:()=>(0,S.jsx)(c()._H,{id:"userDataConsentSetting.disabledByOrganization",defaultMessage:"Granting support access has been disabled by your organization, {emailDomain}",values:{emailDomain:o}}),placement:p().Placement.Bottom,alignment:p().Alignment.Center,render:e=>(0,S.jsx)("div",{...e,children:(0,S.jsx)(x,{emailDomainSettings:n,accessGranted:t,onClick:s,expiryTime:i})})})}async function j(e,t,s){const i=await u().callApi({eventName:"setDataAccessConsent",environment:t,data:e});if("success"===i.type&&i.data){const e=s.state;s.setState({...e,result:i.data})}}function w(e){let{emailDomainSettings:t,requestStore:s}=e;const n=(0,o().O7)(),r=(0,i.useCallback)((()=>async function(e,t,s){b(t)||await j({expiryTime:Date.now()+l().g},e,s)}(n,t,s)),[n,t,s]),d=(0,i.useCallback)((()=>async function(e,t,s){b(t)||await j({},e,s)}(n,t,s)),[n,t,s]),c=(0,a().VK)((()=>{var e;return null===(e=s.state.result)||void 0===e?void 0:e.expiryTime}),[s]),u=Boolean(c&&Number(c)>Date.now()),p=u?d:r;return(0,S.jsx)(v,{emailDomainSettings:t,accessGranted:u,onClick:p,expiryTime:c})}function M(e){let{error:t,result:s,ready:i,emailDomainSettings:n,requestStore:o}=e;const a=(0,c().YB)();return(0,S.jsx)(g().Z,{loaded:i,spinnerSize:16,showSpinnerTimeout:600,children:t||!s?(0,S.jsx)("div",{children:a.formatMessage({id:"userDataConsent.render.error",defaultMessage:"Something went wrong"})}):(0,S.jsx)(w,{emailDomainSettings:n,requestStore:o})})}},563286:(e,t,s)=>{s.d(t,{H:()=>g});s(667294);var i=()=>s(219727),n=()=>s(142735),o=()=>s(788860),a=()=>s(269299),r=()=>s(348141),l=()=>s(594546),d=()=>s(148126),c=()=>s(876822),u=()=>s(765513),p=()=>s(579807),m=s(785893);function g(e){let{isMobile:t}=e;const s=(0,i().O7)(),g=(0,n().VK)((()=>c().default.state.currentUserSettingsStore),[]),f=(0,n().VK)((()=>{var e;return!0===(null==g||null===(e=g.getSettings())||void 0===e?void 0:e.disable_page_analytics)?"do_not_record":"record"}),[g]);return(0,m.jsx)(p().Z,{isMobile:t,title:(0,m.jsx)(o()._H,{id:"viewHistorySettings.title",defaultMessage:"Show my view history"}),caption:(0,m.jsx)(o()._H,{id:"viewHistorySettings.description.message",defaultMessage:"People with edit or full access will be able to see when you’ve viewed a page. <inlinelink>Learn more</inlinelink>.",values:{inlinelink:e=>(0,m.jsx)(u().Z,{external:!0,href:(0,d().UY)("guides.pageAnalytics"),children:e})}}),type:"dropdown",currentOption:f,options:[{key:"record",label:(0,m.jsx)(o()._H,{id:"viewHistorySettings.record.label",defaultMessage:"Record"})},{key:"do_not_record",label:(0,m.jsx)(o()._H,{id:"viewHistorySettings.do_not_record.label",defaultMessage:"Don't record"})}],onSelectOption:e=>{const t="do_not_record"===e;a().createAndCommit({userAction:"ViewHistorySettings.onSelectOption",environment:s,canUndo:!0,perform:e=>{g&&r().d2({userSettingsStore:g,data:{disable_page_analytics:t},transaction:e})}}),l().K4(s,t?"page_analytics_account_opt_out":"page_analytics_account_opt_in")}})}},617811:(e,t,s)=>{s.d(t,{H:()=>g});s(667294);var i=()=>s(219727),n=()=>s(142735),o=()=>s(836273),a=()=>s(525579),r=()=>s(788860),l=()=>s(205228),d=()=>s(815277),c=()=>s(835673),u=()=>s(356641),p=()=>s(67961),m=s(785893);function g(e){let{spaceStore:t,showDomain:s}=e;const g=(0,i().O7)(),f=(0,r().YB)(),h=(0,n().VK)((()=>t.id),[t]),S=(0,n().VK)((()=>t.getPublicContentDomain()),[t]),y=(0,d().VX)({name:"saml",spaceId:t.id,userId:g.currentUser.id}),b=(0,d().VX)({name:"scim",spaceId:t.id,userId:g.currentUser.id});return(0,m.jsxs)(u().rj,{gap:8,children:[(0,m.jsx)(u().r8,{row:1,col:1,children:(0,m.jsx)(p().Z,{isSmall:!0,isMultiline:!0,children:(0,m.jsx)(r()._H,{id:"securitySAMLSettings.SetupInformationSection.workspaceId",defaultMessage:"Workspace ID"})})}),(0,m.jsx)(u().r8,{row:1,col:2,children:(0,m.jsx)(p().Z,{isSmall:!0,isMultiline:!0,children:(0,m.jsx)(c().v,{text:h,tooltip:f.formatMessage({id:"securitySAMLSettings.SetupInformationSection.workspaceId.copyTooltip",defaultMessage:"Click to copy ID"})})})}),y?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(u().r8,{row:2,col:1,children:(0,m.jsx)(p().Z,{isSmall:!0,isMultiline:!0,children:(0,m.jsx)(r()._H,{id:"securitySAMLSettings.SetupInformationSection.samlSSOEntityIDLink",defaultMessage:"SAML SSO/SAML Entity ID"})})}),(0,m.jsx)(u().r8,{row:2,col:2,children:(0,m.jsx)(p().Z,{isSmall:!0,isMultiline:!0,children:(0,m.jsx)(c().v,{text:(0,a().AE)(l().default.domainBaseUrl),tooltip:f.formatMessage({id:"securitySAMLSettings.SetupInformationSection.samlSSOEntityID.copyTooltip",defaultMessage:"Click to copy link"})})})})]}):null,b?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(u().r8,{row:3,col:1,children:(0,m.jsx)(p().Z,{isSmall:!0,isMultiline:!0,children:(0,m.jsx)(r()._H,{id:"securitySAMLSettings.SetupInformationSection.scimBaseUrl",defaultMessage:"SCIM base URL"})})}),(0,m.jsx)(u().r8,{row:3,col:2,children:(0,m.jsx)(p().Z,{isSmall:!0,isMultiline:!0,children:(0,m.jsx)(c().v,{text:l().default.domainBaseUrl+o()._j.scimApiBasePath,tooltip:f.formatMessage({id:"securitySAMLSettings.SetupInformationSection.scimBaseUrl.copyTooltip",defaultMessage:"Click to copy link"})})})})]}):null,s&&void 0!==S?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(u().r8,{row:y?4:2,col:1,children:(0,m.jsx)(p().Z,{isSmall:!0,isMultiline:!0,children:(0,m.jsx)(r()._H,{id:"securitySAMLSettings.SetupInformationSection.workspaceDomain",defaultMessage:"Workspace Domain"})})}),(0,m.jsx)(u().r8,{row:y?4:2,col:2,children:(0,m.jsx)(p().Z,{isSmall:!0,isMultiline:!0,children:(0,m.jsx)(c().v,{text:S,tooltip:f.formatMessage({id:"securitySAMLSettings.SetupInformationSection.workspaceDomain.copyTooltip",defaultMessage:"Click to copy domain"})})})})]}):null]})}},173694:(e,t,s)=>{s.d(t,{r:()=>o});s(267602),s(470928);var i=()=>s(824462),n=()=>s(174421);class o{constructor(e){this.environment=void 0,this.environment=e}async confirmIdentity(){const{settings:e,sessionVerificationExpirationInSeconds:t}=await this.loadSettings();return t&&t>2*s(326966).hw?{status:"ready"}:e.length>0?{status:"mfa",settings:e}:{status:"password"}}async loadSettings(){const e=await i().callApi({eventName:"authGetLoginConfiguration",environment:this.environment,data:{}});if("success"===e.type){const{data:t}=e;return"required"===t.samlSignIn?{settings:[],sessionVerificationExpirationInSeconds:t.sessionVerificationExpirationInSeconds}:{settings:t.mfaOptions,sessionVerificationExpirationInSeconds:t.sessionVerificationExpirationInSeconds}}throw e}async sendTemporaryPassword(e){const{email:t}=e,s=await i().callApi({eventName:"sendTemporaryPassword",environment:this.environment,data:{passwordReset:!0,email:t}});if("success"===s.type)return{status:"ok"};throw s}async verifyBackupCode(e){var t;const{code:s}=e,n=s.split("-").join(""),o=await i().callApi({eventName:"authVerifyBackupCodesLogin",environment:this.environment,data:{code:n}});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async verifyIdentityWithPassword(e){var t;const{password:s}=e,n=await i().callApi({eventName:"authVerifyPassword",environment:this.environment,data:{password:s}});if("success"===n.type)return{status:"match"};if("incorrect_password"===(null===(t=n.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw n}async disableMFA(){const e=await i().callApi({eventName:"authUpdateMfa",environment:this.environment,data:{action:"disable_all"}});if("success"===e.type)return{status:"ok"};throw e}async verifyIdentityWithTOTP(e){var t;const{mfaSettingId:s,code:n}=e,o=await i().callApi({eventName:"authVerifyTotpLogin",environment:this.environment,data:{mfaSettingId:s,code:n}});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async verifyIdentityWithSMS(e){var t;const{mfaSettingId:s,code:n}=e,o=await i().callApi({eventName:"authVerifySmsLogin",environment:this.environment,data:{mfaSettingId:s,code:n}});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async renameSettings(e){var t,s,n;const{mfaSettingId:o,friendlyName:a}=e,r=await i().callApi({eventName:"authUpdateMfa",environment:this.environment,data:{action:"rename",mfaSettingId:o,friendlyName:a}});if("success"===r.type)return{status:"saved",settings:r.data.mfaOptions};if("mfa_duplicate_friendly_name"===(null===(t=r.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"duplicate"};if("mfa_empty_friendly_name"===(null===(s=r.body)||void 0===s||null===(s=s.clientData)||void 0===s?void 0:s.type))return{status:"empty"};if("mfa_bad_friendly_name"===(null===(n=r.body)||void 0===n||null===(n=n.clientData)||void 0===n?void 0:n.type))return{status:"bad_friendly_name"};throw r}async deleteSettings(e){const t=await i().callApi({eventName:"authUpdateMfa",environment:this.environment,data:{action:"delete",mfaSettingId:e}});if("success"===t.type)return{settings:t.data.mfaOptions};throw t}async createTOTP(){const e=await i().callApi({eventName:"authCreateTotp",environment:this.environment,data:{}});if("success"===e.type)return{mfaSettingId:e.data.mfaSettingId,secret:e.data.authCode,qrCode:e.data.qrCode};throw e}async verifyTOTP(e){var t;const{mfaSettingId:s,code:n}=e,o=await i().callApi({eventName:"authVerifyTotpEnroll",environment:this.environment,data:{mfaSettingId:s,code:n}});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async createSMS(e,t){var s,n,o,a;const r=await i().callApi({eventName:"authCreateSms",environment:this.environment,data:{countryCode:e,phoneNumber:t}});if("success"===r.type)return{status:"created",mfaSettingId:r.data.mfaSettingId};if("already_verified_phone_number"===(null===(s=r.body)||void 0===s||null===(s=s.clientData)||void 0===s?void 0:s.type))return{status:"already_verified_phone_number"};if("invalid_country_code"===(null===(n=r.body)||void 0===n||null===(n=n.clientData)||void 0===n?void 0:n.type))return{status:"invalid_country_code"};if("invalid_phone_number"===(null===(o=r.body)||void 0===o||null===(o=o.clientData)||void 0===o?void 0:o.type))return{status:"invalid_phone_number"};if("mfa_sms_unsupported_country_code_for_enrollment"===(null===(a=r.body)||void 0===a||null===(a=a.clientData)||void 0===a?void 0:a.type))return{status:"sms_unsupported_country_code_for_enrollment"};throw r}async verifySMS(e){var t;const{mfaSettingId:s,code:n}=e,o=await i().callApi({eventName:"authVerifySmsEnroll",environment:this.environment,data:{mfaSettingId:s,code:n}});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async sendSMS(e){const{mfaSettingId:t}=e,s=await i().callApi({eventName:"authSendSms",environment:this.environment,data:{mfaSettingId:t}});if("success"===s.type)return{status:"ok"};throw s}async createBackupCodes(e){if(!e){const{settings:e}=await this.loadSettings();if(e.find((e=>"backup_code"===e.mfaMethod)))return{status:"already-exists"}}const t=await i().callApi({eventName:"authCreateBackupCodes",environment:this.environment,data:{}});if("success"===t.type)return{status:"new",mfaSettingId:t.data.mfaSettingId,backupCodes:t.data.codes};throw t}async loadPasskeySettings(){const e=await i().callApi({eventName:"authGetLoginConfiguration",environment:this.environment,data:{}});if("success"===e.type){const{data:t}=e;return{settings:t.passkeys}}throw e}async createPasskeySetting(e){const t=await i().callApi({eventName:"generatePasskeyRegistrationOptions",environment:e,data:{}});if("success"!==t.type)return{created:!1};const{options:s,attemptId:o}=t.data,a=await n().x8({options:s});return a?await n().gp({environment:e,attemptId:o,attestation:a}):{created:!1}}async renamePasskeySetting(e){const t=await i().callApi({eventName:"renamePasskey",environment:this.environment,data:e});if("success"===t.type)return{status:"saved",settings:t.data.passkeys};throw t}async deletePasskeySetting(e){const t=await i().callApi({eventName:"removePasskey",environment:this.environment,data:e});if("success"===t.type)return{settings:t.data.passkeys};throw t}}},113419:(e,t,s)=>{s.d(t,{Z:()=>S});var i=s(667294),n=()=>s(219727),o=()=>s(788860),a=()=>s(989377),r=()=>s(661297),l=()=>s(579807),d=()=>s(435669),c=()=>s(173694),u=()=>s(365581),p=()=>s(359792),m=()=>s(323143),g=()=>s(317493),f=()=>s(275678),h=s(785893);function S(e){let{samlEnforced:t,hasPasskeys:s}=e;const S=(0,n().O7)(),y=S.device.isMobile,[{rootStateMachine:b,settingsStateMachine:x,totpStateMachine:v,smsStateMachine:j,backupCodesStateMachine:w}]=(0,i.useState)((()=>{const e=new(c().r)(S),t={totpStore:new(f().o),settingsStore:new(m().c),smsStore:new(g().J),backupCodesStore:new(d().y),rootStore:new(p().M)};return{mfaService:e,rootStateMachine:new(p().i)(t.rootStore),settingsStateMachine:new(m().W)(t.settingsStore,e),totpStateMachine:new(f().V)(t.totpStore,e),smsStateMachine:new(g().F)(t.smsStore,e),backupCodesStateMachine:new(d().o)(t.backupCodesStore,e)}}));const M=(0,h.jsx)(r().Z,{isLarge:!0,onClick:()=>function(e){let{rootStateMachine:t,settingsStateMachine:s}=e;t.rootShowSettings({refresh:!1,startConfirmIdentity:()=>s.passkeySettingsShow()})}({rootStateMachine:b,settingsStateMachine:x}),disabled:t,children:s?(0,h.jsx)(o()._H,{id:"profileSettings.accountSecuritySection.managePasskeysButton.label",defaultMessage:"Manage passkeys"}):(0,h.jsx)(o()._H,{id:"profileSettings.accountSecuritySection.addPasskeysButton.label",defaultMessage:"Add passkey"})});return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(l().Z,{type:"custom",isMobile:y,title:(0,h.jsx)(o()._H,{id:"profileSettings.accountSecuritySection.passkeySetting.label",defaultMessage:"Passkeys"}),caption:(0,h.jsx)(o()._H,{id:"profileSettings.accountSecuritySection.passkeySetting.message",defaultMessage:"Securely sign-in with on-device biometric authentication."}),badge:(0,h.jsx)(a().Z,{newBadgeKey:"passkey_setting",didUserEngage:!1}),shouldHighlight:!1,disabled:t,tooltipLabel:(0,h.jsx)(o()._H,{id:"profileSettings.accountSecuritySection.passkeySetting.tooltip",defaultMessage:"Your organization requires you to use SAML for authentication."}),disableTooltip:!t,customButton:M}),(0,h.jsx)(u().Z,{rootStateMachine:b,settingsStateMachine:x,totpStateMachine:v,smsStateMachine:j,backupCodesStateMachine:w})]})}},365581:(e,t,s)=>{s.d(t,{Z:()=>z});var i=s(667294),n=()=>s(142735),o=()=>s(696459),a=()=>s(708518),r=()=>s(788860),l=()=>s(707513),d=()=>s(312578),c=()=>s(968001),u=s(785893);function p(e){let{errorMessage:t,isLoading:s,onDisplayBackupCodes:i,onCancel:n,onDismiss:o}=e;const a=(0,u.jsx)(r()._H,{id:"mfa.regenerateBackupCodes.title",defaultMessage:"Regenerate backup codes"}),p=(0,u.jsx)(r()._H,{id:"mfa.regenerateBackupCodes.message",defaultMessage:"Backup codes are used to log in if you lose access to your password and second factors. <boldtext>Your existing codes won't work after regenerating new ones.</boldtext>",values:{boldtext:e=>(0,u.jsx)("span",{style:{fontWeight:l().Ue.semibold},children:e})}}),m={text:s?(0,u.jsx)(d().Z,{}):(0,u.jsx)(r()._H,{id:"mfa.regenerateBackupCodes.regenerateBackupCodes.button.message",defaultMessage:"Generate new backup codes"}),onClick:i,view:"outline",disabled:s,isRed:!0},g=[{text:(0,u.jsx)(r()._H,{id:"mfa.regenerateBackupCodes.cancel.button.message",defaultMessage:"Cancel"}),onClick:n,view:"outline",type:"button"}];return(0,u.jsx)(c().Z,{title:a,header:p,errorMessage:t,primaryAction:m,secondaryActions:g,onDismiss:o})}var m=()=>s(846550),g=()=>s(552062),f=()=>s(972689);function h(e){let{backupCodes:t,backupCodeDownload:s,backupCodeFileName:i,errorMessage:n,onNoted:o,onDownload:a}=e;const d=(0,m().yK)(S,[]),p=(0,u.jsx)(r()._H,{id:"mfa.showBackupCodes.title",defaultMessage:"Save your backup codes"}),h=(0,u.jsx)(r()._H,{id:"mfa.showBackupCodes.message",defaultMessage:"<boldtext>You can only see this once</boldtext>, so be sure to keep them to avoid getting locked out of your account.",values:{boldtext:e=>(0,u.jsx)("span",{style:{fontWeight:l().Ue.semibold},children:e})}}),y={text:(0,u.jsx)(r()._H,{id:"mfa.showBackupCodes.codesNotedDown.button.message",defaultMessage:"I've saved them"}),onClick:o},b=[{text:(0,u.jsx)(r()._H,{id:"mfa.showBackupCodes.downloadAsTextFile.button.message",defaultMessage:"Download as text file"}),href:`data:text/plain;charset=UTF-8,${s}`,saveAs:i,view:"outline",type:"link",onClick:a}];return(0,u.jsx)(c().Z,{title:p,header:h,icon:(0,g().j)(d.icon),errorMessage:n,primaryAction:y,secondaryActions:b,children:(0,u.jsx)(f().Z,{type:"unencryptedCodes",backupCodes:t})})}function S(e){return(0,m().EM)({icon:{width:30,height:30,fill:e.regularIconColor}})}function y(e){const{backupCodesStateMachine:t,onGoToSettings:s,onDismiss:i}=e,a=(0,n().VK)((()=>t.getCurrentStep()),[t]),r=()=>t.backupCodesRegenerateCodes();switch(a.step){case"backupCodesUninitialized":case"backupCodesLoading":return null;case"backupCodesRegenerateCodes":return(0,u.jsx)(p,{isLoading:a.isLoading,errorMessage:a.error,onDisplayBackupCodes:r,onDismiss:i,onCancel:s});case"backupCodesShowCodes":return(0,u.jsx)(h,{errorMessage:a.error,backupCodes:a.backupCodes,backupCodeDownload:a.backupCodesFile,backupCodeFileName:"Notion Backup Codes.txt",onNoted:s});default:return(0,o().t1)(a)}}var b=()=>s(74458),x=()=>s(268470);function v(e){let{type:t,errorMessage:s,onDismiss:i,onAddMethod:n}=e;const a=(0,m().yK)(j,[]),l=(0,u.jsx)(r()._H,{id:"mfa.setupComplete.confirmation.header",defaultMessage:"Every time you enter your password, Notion will ask you for a verification code to confirm your identity."}),d=[{text:(0,u.jsx)(r()._H,{id:"mfa.setupComplete.confirmation.viewTwoStepMethods.button.message",defaultMessage:"View 2-step methods"}),onClick:n,type:"button",view:"outline"}];return(0,u.jsx)(c().Z,{title:"totp"===t?(0,u.jsx)(r()._H,{id:"mfa.totp.setupComplete.confirmation.title",defaultMessage:"2-step verification with authenticator is turned on"}):"sms"===t?(0,u.jsx)(r()._H,{id:"mfa.sms.setupComplete.confirmation.title",defaultMessage:"2-step verification with phone number is turned on"}):(0,o().t1)(t),header:l,errorMessage:s,icon:(0,x().p)(a.confirmationIcon),secondaryActions:d,onDismiss:i})}function j(e){return(0,m().EM)({confirmationIcon:{width:30,fill:"green"}})}s(241792);var w=()=>s(304387),M=()=>s(619186),k=()=>s(568017),_=()=>s(352230),C=()=>s(777064),I=()=>s(148126),T=()=>s(733641),P=()=>s(529048),A=()=>s(128119),Z=()=>s(827973),H=()=>s(448419),R=()=>s(291198),B=()=>s(740046),D=()=>s(198829),N=()=>s(255577),V=()=>s(661297),U=()=>s(388284),O=()=>s(67961);const E={name:"United States",countryCode:"1",regionCode:"US"};function F(e){let{isLoading:t,phoneNumber:s,country:o,errorMessage:a,onDismiss:l,onBack:p,onContinue:g}=e;const f=(0,m().yK)(L,[]),h=(0,r().YB)(),[S,y]=(0,i.useState)(s??""),[b,x]=(0,i.useState)([]),[v,j]=(0,i.useState)(""),[k,F]=(0,i.useState)(o??E),K=(0,n().qz)(void 0,P().Z),G=(0,i.useMemo)((()=>(0,w().PG)(k.regionCode)),[k.regionCode]),q=(0,i.useCallback)((e=>{const t=e.target.value.replace(/\D/g,"");y(G.reset(t))}),[G]);(0,i.useEffect)((()=>{y(o!==k?G.reset(S??""):G.reset(s??""));const e=new Intl.DisplayNames(["en"],{type:"region"}),t=(0,w().wJ)();let i=-1;const n=t.map(((t,s)=>{const n=(0,w().t7)(t).toString(),o=e.of(t);return t===k.regionCode&&(i=s),{name:o??t,countryCode:n,regionCode:t}}));-1!==i&&n.unshift(n.splice(i,1)[0]),x(n)}),[k]);const W=(0,u.jsx)(r()._H,{id:"profileSettings.mfa.sms.addPhoneTitle",defaultMessage:"Add a phone number"}),z=(0,u.jsx)(r()._H,{id:"profileSettings.mfa.sms.addPhoneHeader",defaultMessage:"Enter your phone number to receive a 2-step verification code."}),Y={text:t?(0,u.jsx)(d().Z,{}):(0,u.jsx)(r()._H,{id:"profileSettings.mfa.sms.continueButton",defaultMessage:"Continue"}),onClick:()=>g(k,S.trim()),disabled:t||""===S},Q=[{text:(0,u.jsx)(r()._H,{id:"profileSettings.mfa.sms.addPhoneNeedHelp",defaultMessage:"Need help?"}),href:(0,I().UY)("guides.mfa"),isExternal:!0,type:"link",view:"plain"}],$=h.formatMessage({id:"profileSettings.mfa.sms.phoneNumberInput.placeholder",defaultMessage:"Enter phone number"}),J=h.formatMessage({defaultMessage:"Search country code",id:"profileSettings.mfa.sms.countryCodeSelect.placeholder"}),X=e=>(0,u.jsxs)("div",{style:f.countryCodeSelectTitle,children:[e.name,(0,u.jsx)(O().Z,{isSmall:!0,children:`+${e.countryCode}`})]}),ee=(0,u.jsx)(H().ZP,{popupType:H().Z4.Popup,placementToOrigin:A().Iw.Bottom,alignmentToOrigin:A().lU.Start,buttonPopupStore:K,renderOrigin:e=>(0,u.jsx)(V().Z,{...e,children:`+${k.countryCode}`}),render:e=>(0,u.jsx)(D().Z,{menuType:_().o.Popup,minWidth:280,maxHeight:"30vh",header:(0,u.jsx)(U().Z,{isInput:!0,children:(0,u.jsx)(B().ZP,{value:v,onChange:e=>j(e.target.value),focus:!0,focusAfterAnimation:!0,placeholder:J})}),children:(0,u.jsx)(N().Z,{type:N().i.Vertical,initialFocus:0,sections:[{key:"countries",render:e=>(0,u.jsx)(U().Z,{...e}),items:(0,M().ZP)(v,b,(e=>/\d/.test(v)?`${e.countryCode}`:e.name)).map((t=>({key:t.regionCode,render:e=>(0,u.jsx)(Z().Z,{...e,title:X(t),right:t.name===k.name?(0,T().k)(f.selectedCountryCodeIcon):void 0}),action:()=>{j(""),F(t),e.close()}})))}]})})});return(0,u.jsx)(c().Z,{onDismiss:l,onBack:p,title:W,header:z,errorMessage:a,primaryAction:Y,secondaryActions:Q,children:(0,u.jsxs)("div",{style:f.container,children:[(0,u.jsx)("div",{style:f.countryCodeDropdownMenu,children:ee}),(0,u.jsx)(R().Z,{autoFocus:!0,value:S,placeholder:$,spellCheck:!1,style:f.phoneNumberInput,onChange:q,disabled:t,customElementAttributes:C().pf})]})})}function L(e){return(0,m().EM)({container:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",marginTop:16,marginBottom:4},countryCodeDropdownMenu:{marginRight:5},selectedCountryCodeIcon:{width:15,height:15},countryCodeSelectTitle:{paddingTop:8,paddingBottom:8},phoneNumberInput:{background:"light"===e.mode?k().ZP.transparent:e.inputBackground}})}var K=()=>s(839116);function G(e){const{smsStateMachine:t,onGoToSettings:s,onDismiss:i,onStartBackupCodes:a}=e,r=(0,n().VK)((()=>t.getCurrentStep()),[t]);switch(r.step){case"smsUninitialized":case"smsVerified":return null;case"smsSendingSMS":case"smsSetPhoneNumber":return(0,u.jsx)(F,{phoneNumber:r.phoneNumber,country:r.country,isLoading:"smsSendingSMS"===r.step,errorMessage:r.error,onDismiss:i,onBack:s,onContinue:(e,s)=>t.smsCreateSMS(e,s)});case"smsVerifyCode":case"smsResendSMS":case"smsBackupCodesLoading":case"smsVerifying":return(0,u.jsx)(K().ZP,{isLoading:"smsVerifying"===r.step||"smsBackupCodesLoading"===r.step,errorMessage:r.error,phoneNumber:`+${r.country.countryCode} ${r.phoneNumber}`,onDismiss:i,onBack:()=>t.smsRestart(),onVerifyCode:e=>t.smsVerifyCode({code:e,onVerified:a}),resentStatus:"smsResendSMS"===r.step?"resending":"resentAt"in r&&void 0!==r.resentAt?"resent":"not-resent",resentAt:"resentAt"in r&&r.resentAt?r.resentAt:0,onResendLink:()=>t.smsResendSMS()});case"smsComplete":return(0,u.jsx)(v,{type:"sms",errorMessage:r.error,onAddMethod:s,onDismiss:i});default:return(0,o().t1)(r)}}var q=()=>s(690970);function W(e){const{totpStateMachine:t,onGoToSettings:s,onStartBackupCodes:i,onDismiss:a}=e,r=(0,n().VK)((()=>t.getCurrentStep()),[t]);switch(r.step){case"totpUninitialized":case"totpVerified":return null;case"totpLoadingQRCode":case"totpBackupCodesLoading":case"totpVerifyCode":return(0,u.jsx)(q().ZP,{isLoading:"totpBackupCodesLoading"===r.step||"totpLoadingQRCode"===r.step,qrCode:"totpVerifyCode"===r.step?r.qrCode:void 0,textCode:"totpVerifyCode"===r.step?r.rawString:void 0,friendlyName:"totpVerifyCode"===r.step?r.friendlyName:void 0,errorMessage:r.error,errorKeys:"totpVerifyCode"===r.step?r.errorKeys:void 0,onDismiss:a,onBack:s,onContinue:(e,s)=>{t.totpVerifyCode({friendlyName:e,code:s,onVerified:i})}});case"totpComplete":return(0,u.jsx)(v,{type:"totp",errorMessage:r.error,onDismiss:a,onAddMethod:s});default:return(0,o().t1)(r)}}function z(e){const{rootStateMachine:t,settingsStateMachine:s,totpStateMachine:r,smsStateMachine:l,backupCodesStateMachine:d,onReloadSettings:c}=e,p=(0,n().VK)((()=>t.getCurrentStep()),[t]),[{showSettings:m,onRootExit:g}]=(0,i.useState)((()=>({onRootExit:()=>t.exit((()=>{s.exit(),r.exit(),l.exit(),d.exit(),c&&c()})),showSettings:()=>t.rootShowSettings({refresh:!0,startConfirmIdentity:()=>{s.settingsConfirmIdentityForSettings()}})}))),f=()=>t.rootCloseSettings((()=>{s.exit(),c&&c()})),h=()=>t.rootStartTOTP((()=>r.totpStart())),S=()=>t.rootStartSMS((()=>l.smsStart())),x=()=>{t.rootShowSettings({refresh:!0,startConfirmIdentity:()=>{r.exit(),s.settingsShow({refresh:!0})}})},v=()=>{t.rootShowSettings({refresh:!0,startConfirmIdentity:()=>{l.exit(),s.settingsShow({refresh:!0})}})},j=()=>{d.exit(),t.rootEndBackupCodes({completeTotp:()=>{r.totpComplete()},completeSMS:()=>{l.smsComplete()},showSettings:m})},w=()=>{d.backupCodesInitialSetup({onLoadingComplete:()=>{r.totpBackupCodesComplete(),t.rootShowBackupCodesFromTOTP()},onComplete:()=>{r.totpBackupCodesComplete(),r.totpComplete(),j()}})},M=()=>{d.backupCodesInitialSetup({onLoadingComplete:()=>{l.smsBackupCodesComplete(),t.rootShowBackupCodesFromSMS()},onComplete:()=>{l.smsBackupCodesComplete(),l.smsComplete(),j()}})},k=()=>{t.rootStartBackupCodesFromSettings((()=>d.backupCodesShowCreate()))},_=(0,n().VK)((()=>s.getCurrentStep()),[s]),C=(0,n().VK)((()=>r.getCurrentStep()),[r]),I=(0,n().VK)((()=>l.getCurrentStep()),[l]),T=(0,n().VK)((()=>d.getCurrentStep()),[d]);let P;switch(p.step){case"rootUninitialized":break;case"rootSettings":P={open:"settingsUninitialized"!==_.step,onDismiss:g,render:()=>(0,u.jsx)(b().Z,{settingsStateMachine:s,onDismiss:f,onStartTOTP:h,onStartSMS:S,onStartBackupCodes:k})};break;case"rootTOTP":P={open:"totpUninitialized"!==C.step,onDismiss:g,render:()=>(0,u.jsx)(W,{totpStateMachine:r,onGoToSettings:x,onStartBackupCodes:w,onDismiss:g})};break;case"rootSMS":P={open:"smsUninitialized"!==I.step,onDismiss:g,render:()=>(0,u.jsx)(G,{smsStateMachine:l,onGoToSettings:v,onStartBackupCodes:M,onDismiss:g})};break;case"rootBackupCodes":P={open:"backupCodesUninitialized"!==T.step,onDismiss:"backupCodesRegenerateCodes"===T.step?g:void 0,render:()=>(0,u.jsx)(y,{backupCodesStateMachine:d,onGoToSettings:j,onDismiss:g})};break;default:throw(0,o().t1)(p)}return P?(0,u.jsx)(a().Z,{...P,preventHideChildrenWhileOpening:!0}):null}},74458:(e,t,s)=>{s.d(t,{Z:()=>Ce});var i=s(667294),n=()=>s(219727),o=()=>s(142735),a=()=>s(696459),r=()=>s(174421),l=()=>s(718959),d=()=>s(846550),c=()=>s(788860),u=()=>s(707513),p=()=>s(552062),m=()=>s(910951),g=()=>s(968001),f=s(785893);function h(e){const{errorMessage:t,onStartTOTP:s,onStartSMS:n,onDismiss:o}=e,a=(0,d().yK)(S,[]),r=(0,f.jsx)(c()._H,{id:"mfa.turnOnSettings.title",defaultMessage:"Turn on 2-step verification"}),l=(0,f.jsx)(c()._H,{id:"mfa.turnOnSettings.message",defaultMessage:"Confirm it's you when you use a password with a verification code"}),u=(0,i.useMemo)((()=>(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(m().Z,{type:"totp",title:(0,f.jsx)(c()._H,{id:"mfa.turnOnSettings.setupAuthenticator.button.title",defaultMessage:"Code from authenticator"}),caption:(0,f.jsx)(c()._H,{id:"mfa.turnOnSettings.setupAuthenticator.button.message",defaultMessage:"Generate a one-time code in your authenticator app"}),onClick:s,style:a.button}),(0,f.jsx)(m().Z,{type:"sms",title:(0,f.jsx)(c()._H,{id:"mfa.turnOnSettings.setupSMS.button.title",defaultMessage:"Text me a code"}),caption:(0,f.jsx)(c()._H,{id:"mfa.turnOnSettings.setupSMS.button.message",defaultMessage:"Add and verify your phone number"}),onClick:n,style:a.button})]})),[a,n,s]);return(0,f.jsx)(g().Z,{title:r,header:l,children:u,icon:(0,p().j)(a.icon),errorMessage:t,onDismiss:o})}function S(e){return(0,d().EM)({button:{marginBottom:5},settingsTitle:{color:e.mediumTextColor,fontWeight:u().Ue.medium,marginBottom:8},icon:{width:30,height:30,fill:e.regularIconColor}})}var y=()=>s(739479),b=()=>s(312578);function x(e){const{isLoading:t,mfaSetting:s,errorMessage:i,onDismiss:n,onCancel:o,onDeleteMethod:r}=e,l=(0,d().yK)(v,[]),u={text:t?(0,f.jsx)(b().Z,{}):(0,f.jsx)(c()._H,{id:"mfa.deleteSetting.permanentlyDelete.button.message",defaultMessage:"Permanently delete"}),onClick:()=>r(s),isRed:!0},p=[{text:(0,f.jsx)(c()._H,{id:"mfa.deleteSetting.cancel.button.message",defaultMessage:"Cancel"}),onClick:o,type:"button",view:"outline"}];return(0,f.jsx)(g().Z,{title:(()=>{const e=s.mfaMethod;switch(e){case"sms":return(0,f.jsx)(c()._H,{id:"mfa.deleteSetting.sms.title",defaultMessage:"Delete {phoneHint}",values:{phoneHint:s.phoneNumber}});case"totp":return(0,f.jsx)(c()._H,{id:"mfa.deleteSetting.totp.title",defaultMessage:"Delete {friendlyName}",values:{friendlyName:s.friendlyName}});default:return(0,a().t1)(e)}})(),header:(()=>{const e=s.mfaMethod;switch(e){case"sms":return(0,f.jsx)(c()._H,{id:"mfa.deleteSetting.sms.header",defaultMessage:"Once deleted, you will no longer receive codes sent to {phoneHint}. <boldtext>Are you sure you want to delete this?</boldtext>",values:{phoneHint:s.phoneNumber,boldtext:e=>(0,f.jsx)("span",{style:l.boldText,children:e})}});case"totp":return(0,f.jsx)(c()._H,{id:"mfa.deleteSetting.totp.header",defaultMessage:"Once deleted, you will no longer be able to use codes generated from {friendlyName}. <boldtext>Are you sure you want to delete this?</boldtext>",values:{friendlyName:s.friendlyName,boldtext:e=>(0,f.jsx)("span",{style:l.boldText,children:e})}});default:return(0,a().t1)(e)}})(),icon:(0,y().y)(l.crossIcon),primaryAction:u,secondaryActions:p,errorMessage:i,onDismiss:n})}function v(e){return(0,d().EM)({crossIcon:{width:30,fill:"red"},boldText:{fontWeight:u().Ue.semibold}})}s(241792);var j=()=>s(777064),w=()=>s(148126);const M=(0,s(827282).IU)("lockedFilledRedOutlinedWhite",{viewBox:"0 0 11 15",svg:(0,f.jsx)("path",{d:"M2.48352 14.5H8.51649C9.08993 14.5 9.61159 14.3415 9.98454 13.9481C10.3531 13.5594 10.5 13.0215 10.5 12.423V7.8578C10.5 7.33161 10.3876 6.85321 10.1075 6.47956C9.90863 6.21422 9.64758 6.03138 9.34616 5.92009V4.70387C9.34616 3.34493 8.90074 2.28402 8.17081 1.56217C7.44518 0.844569 6.47639 0.5 5.49671 0.5C4.51986 0.5 3.55273 0.844872 2.82813 1.5624C2.09925 2.28417 1.65385 3.34494 1.65385 4.70387V5.9209C1.35431 6.03229 1.09426 6.21478 0.895574 6.47875C0.614816 6.85174 0.5 7.32992 0.5 7.8578V12.423C0.5 13.0215 0.646934 13.5594 1.01546 13.9481C1.38841 14.3415 1.91008 14.5 2.48352 14.5ZM3.7022 4.5581C3.7022 3.8322 3.93059 3.32509 4.24526 3.00203C4.56164 2.67723 5.00162 2.50051 5.49671 2.50051C5.99216 2.50051 6.43618 2.67753 6.75611 3.00343C7.07385 3.3271 7.30439 3.83398 7.30439 4.5581V5.78746H3.7022V4.5581Z",fill:"#E12D2D",stroke:"white"})});var k=()=>s(981583);function _(e){const{userStore:t}=e,s=(0,d().yK)(C,[]);return(0,f.jsxs)("div",{style:s.iconContainer,children:[(0,f.jsx)(k().Z,{userStore:t,size:36,avatarShouldShowShadow:!0,style:s.userIcon}),(0,f.jsx)("span",{children:M(s.lockIcon)})]})}function C(){return(0,d().EM)({iconContainer:{position:"relative"},userIcon:{position:"relative"},lockIcon:{position:"absolute",width:9,height:20,right:0,left:26,top:21}})}function I(e){const{mfaSettings:t,isSMSLoading:s,chosenMfaSettingId:n,userStore:o,errorMessage:r,onClick:l,onDismiss:u}=e,p=(0,d().yK)(T,[]),h=(0,f.jsx)(c()._H,{id:"profileSettings.mfa.verifyIdentity.methodChooser.title",defaultMessage:"To continue, we need to verify your identity"}),S=(0,f.jsx)(c()._H,{id:"profileSettings.mfa.verifyIdentity.methodChooser.header",defaultMessage:"Select a method to verify your identity."}),y=[{text:(0,f.jsx)(c()._H,{id:"profileSettings.mfa.verifyIdentity.methodChooser.needHelp.button",defaultMessage:"Need help?"}),href:(0,w().UY)("guides.mfa"),isExternal:!0,type:"link",view:"plain"}],b=(0,i.useMemo)((()=>(0,j().UG)(t).map((e=>{const t=e.mfaMethod;switch(t){case"totp":return(0,f.jsx)(m().Z,{type:t,title:e.friendlyName,caption:(0,f.jsx)(c()._H,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useAuthenticator.button.message",defaultMessage:"Use code from authenticator"}),onClick:()=>l(e),style:p.actionButton,isActive:!0,disabled:s});case"sms":return(0,f.jsx)(m().Z,{type:t,title:e.phoneNumber,caption:(0,f.jsx)(c()._H,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useSMS.button.message",defaultMessage:"Text me a code"}),onClick:()=>l(e),style:p.actionButton,isActive:!0,isLoading:s&&n===e.mfaSettingId,disabled:s&&n!==e.mfaSettingId});case"backup_code":return(0,f.jsx)(m().Z,{type:t,title:(0,f.jsx)(c()._H,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useBackupCode.button.title",defaultMessage:"Use a backup code"}),caption:(0,f.jsx)(c()._H,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useBackupCode.button.message",defaultMessage:"Use a one-time backup code"}),onClick:()=>l(e),style:p.actionButton,isActive:!0,disabled:s});default:return(0,a().t1)(t)}}))),[t,l,s,n,p.actionButton]);return(0,f.jsx)(g().Z,{title:h,header:S,errorMessage:r,icon:(0,f.jsx)(_,{userStore:o}),secondaryActions:y,onDismiss:u,children:b})}function T(e){return(0,d().EM)({resendLink:{fontWeight:u().Ue.medium,color:e.blueColor},actionButton:{marginBottom:5}})}var P=()=>s(268470);function A(e){const t=(0,d().yK)(Z,[]),{errorMessage:s,onDismiss:i}=e,n=(0,f.jsx)(c()._H,{id:"mfa.turnOffMFAComplete.title",defaultMessage:"2-step verification is turned off"}),o=(0,f.jsx)(c()._H,{id:"mfa.turnOffMFAComplete.header",defaultMessage:"2-step verification has been removed from your account. Notion will only ask for your password during log in."}),a=[{text:(0,f.jsx)(c()._H,{id:"mfa.turnOffMFAComplete.button.message",defaultMessage:"Complete"}),onClick:i,type:"button",view:"outline"}];return(0,f.jsx)(g().Z,{title:n,header:o,errorMessage:s,icon:(0,P().p)(t.confirmationIcon),secondaryActions:a,onDismiss:i})}function Z(e){return(0,d().EM)({confirmationIcon:{width:30,fill:"green"}})}var H=()=>s(503741);function R(e){const{isLoading:t,lastMFASetting:s,errorMessage:i,onDismiss:n,onTurnOffMFA:o,onCancel:a}=e,r=(0,d().yK)(B,[]),l=(0,f.jsx)(c()._H,{id:"mfa.turnOffMFA.title",defaultMessage:"Turn off 2-step verification"}),p={text:t?(0,f.jsx)(b().Z,{}):(0,f.jsx)(c()._H,{id:"mfa.turnOffMFA.disableMFA.button.message",defaultMessage:"Turn off 2-step verification"}),onClick:o,isRed:!0},m=[{text:(0,f.jsx)(c()._H,{id:"mfa.turnOffMFA.cancel.button.message",defaultMessage:"Cancel"}),onClick:a,type:"button",view:"outline"}];return(0,f.jsx)(g().Z,{title:l,header:s?(0,f.jsx)(c()._H,{id:"mfa.turnOffMFA.lastMFASettingDeleted.header",defaultMessage:"Deleting {mfaSettingName} will turn off 2-step verification and remove the additional layer of security on your account. Notion will only ask for your password during log in.",values:{mfaSettingName:"sms"===s.mfaMethod?`${s.phoneNumber}`:s.friendlyName,boldtext:e=>(0,f.jsx)("span",{style:{fontWeight:u().Ue.semibold},children:e})}}):(0,f.jsx)(c()._H,{id:"mfa.turnOffMFA.header",defaultMessage:"Turning off 2-step verification will remove the additional layer of security on your account. Notion will only ask for your password during log in. "}),icon:(0,H().B)(r.crossIcon),primaryAction:p,secondaryActions:m,errorMessage:i,onDismiss:n})}function B(e){return(0,d().EM)({crossIcon:{width:30,fill:"red"}})}s(267602),s(653476);var D=()=>s(146947),N=()=>s(646574),V=()=>s(666414),U=()=>s(67961),O=()=>s(147937),E=()=>s(314379),F=()=>s(953293),L=()=>s(402531),K=()=>s(154186),G=()=>s(827973),q=()=>s(448419),W=()=>s(291198);function z(e){const{setting:t,setIsEditing:s,isEditing:n,onUpdateMethod:o}=e,a=(0,d().yK)(Y,[]),[r,l]=(0,i.useState)(""),c=t.friendlyName,u=""===r?c:r,p=(0,i.useCallback)((e=>""!==e&&e!==c),[c]),m=(0,i.useCallback)((()=>{p(u)?(o({mfaMethod:t.mfaMethod,mfaSettingId:t.mfaSettingId,action:"rename",friendlyName:u}),l(r)):l(c),s(!n)}),[u,n,s,o,r,c,p,t.mfaMethod,t.mfaSettingId]),g=(0,i.useCallback)((e=>{"Enter"!==e.key&&"Escape"!==e.key||m()}),[m]),h=(0,i.useCallback)((e=>{p(e.target.value)&&l(e.target.value)}),[p]);return n?(0,f.jsx)(W().Z,{value:u,maxlength:30,onChange:h,onKeyDown:g,onBlur:m,focus:n,style:a.inputField,inputStyle:a.input}):(0,f.jsx)(U().Z,{children:u})}function Y(){return(0,d().EM)({inputField:{width:"auto",marginRight:5,marginBottom:1},input:{fontSize:14,...u().Yu}})}var Q=()=>s(352230),$=()=>s(198829),J=()=>s(255577),X=()=>s(388284);function ee(e){const{activeMenuActions:t}=e;return(0,f.jsx)($().Z,{menuType:Q().o.Popup,children:(0,f.jsx)(J().Z,{type:J().i.Vertical,sections:[{key:"mfaMethodActions",render:e=>(0,f.jsx)(X().Z,{...e}),items:t}],initialFocus:void 0})})}function te(e){const{type:t,title:s,caption:n,setting:o,onDeleteMethod:r,onUpdateMethod:l}=e,u=(0,d().yK)(se,[]),p={totp:(0,O().X)(u.icon),sms:(0,L().u)(u.icon)},[m,g]=(0,i.useState)(!1),h=e=>({key:"deleteMFAMethod",render:e=>(0,f.jsx)(G().Z,{...e,title:(0,f.jsx)(c()._H,{id:"mfa.updateSettings.activeSection.editMenu.delete.button.message",defaultMessage:"Delete"}),icon:(0,y().y)(u.menuItemIcon)}),action:()=>{r(o),e.close()}}),S=e=>({key:"editMFAMethod",render:e=>(0,f.jsx)(G().Z,{...e,title:(0,f.jsx)(c()._H,{id:"mfa.updateSettings.activeSection.editMenu.editTitle.button.message",defaultMessage:"Edit title"}),icon:(0,F().R)(u.menuItemIcon)}),action:()=>{g(!0),e.close()}});return(0,f.jsxs)("div",{style:u.activeMethodContainer,children:[(0,f.jsxs)("div",{style:u.activeMethodLeftContainer,children:[(0,f.jsx)("div",{style:u.icon,children:p[t]}),(0,f.jsxs)("div",{style:u.activeMethodText,children:[(()=>{switch(t){case"sms":return(0,f.jsx)(U().Z,{children:s});case"totp":return(0,f.jsx)(z,{setting:o,setIsEditing:g,isEditing:m,onUpdateMethod:l});default:return(0,a().t1)(t)}})(),(0,f.jsx)("span",{style:u.activeMethodCaption,children:n})]})]}),(0,f.jsx)(q().ZP,{render:e=>{switch(t){case"sms":return(0,f.jsx)(ee,{activeMenuActions:[h(e)]});case"totp":return(0,f.jsx)(ee,{activeMenuActions:[S(e),h(e)]});default:(0,a().t1)(t)}},alignmentToOrigin:q().vR.Start,renderOrigin:e=>(0,f.jsx)(K().Z,{style:u.menuButton,disabled:m,...e,children:(0,E().o)(u.menuIcon)}),popupType:q().Z4.Popup})]})}function se(e){return(0,d().EM)({activeMethodContainer:{display:"flex",justifyContent:"space-between",border:`1px solid ${e.outlineButtonBorder}`,width:"100%",padding:"10px 14px 10px 16px",alignItems:"start",height:"auto",borderRadius:4,marginBottom:5},activeMethodLeftContainer:{display:"flex",justifyContent:"left",minWidth:0},activeMethodText:{display:"flex",flexDirection:"column",minWidth:0},activeMethodCaption:{fontSize:u().JB.UISmall.desktop,lineHeight:u().Nv.UISmall.desktop,color:e.mediumTextColor,whiteSpace:"normal"},icon:{width:20,height:20,marginRight:10,fill:e.blueColor},menuIcon:{fill:e.lightIconColor,width:15,height:15},menuButton:{borderRadius:4,padding:3},menuItemIcon:{width:17,height:17},inputField:{width:"auto",marginRight:5,marginBottom:1},input:{fontSize:14}})}function ie(e){const{mfaSettings:t,errorMessage:s,onStartTOTP:n,onStartSMS:o,onTurnOffMFA:r,onStartBackupCodes:l,onDismiss:u,onDeleteMethod:h,onUpdateMethod:S}=e,y=(0,d().yK)(ne,[]),b=(0,f.jsx)(c()._H,{id:"mfa.updateSettings.title",defaultMessage:"2-step verification"}),x=(0,f.jsx)(c()._H,{id:"mfa.settingModal.message",defaultMessage:"Confirm it's you after using a password by providing a verification code."}),v=(0,i.useMemo)((()=>(0,j().UG)(t).map((e=>{const{mfaMethod:t}=e,s=(0,N().tv)(e.createdAt,D().locale);switch(t){case"totp":return(0,f.jsx)(te,{type:t,title:e.friendlyName,caption:(0,f.jsx)(c()._H,{id:"mfa.updateSettings.activeSection.useAuthenticator.button.message",defaultMessage:"Set up {createdTimeNormalized}",values:{createdTimeNormalized:s}}),setting:e,onDeleteMethod:h,onUpdateMethod:S});case"sms":return(0,f.jsx)(te,{type:t,title:`${e.phoneNumber}`,caption:(0,f.jsx)(c()._H,{id:"mfa.updateSettings.activeSection.useSMS.button.message",defaultMessage:"Set up {createdTimeNormalized}",values:{createdTimeNormalized:s}}),setting:e,onDeleteMethod:h,onUpdateMethod:S});case"backup_code":return;default:(0,a().t1)(t)}}))),[t,h,S]),w=t.filter((e=>"totp"===e.mfaMethod)).length,M=t.filter((e=>"sms"===e.mfaMethod)).length,k=(0,i.useMemo)((()=>[{type:"totp",title:(0,f.jsx)(c()._H,{id:"mfa.updateSettings.addMoreSection.addAnotherAuthenticator.button.title",defaultMessage:"Add authenticator"}),caption:w>=2?(0,f.jsx)(c()._H,{id:"mfa.updateSettings.addMoreSection.addAnotherAuthenticator.disabled.button.message",defaultMessage:"2 of 2 authenticators added"}):(0,f.jsx)(c()._H,{id:"mfa.updateSettings.addMoreSection.addAnotherAuthenticator.button.message",defaultMessage:"{numOfTotpSettings} of 2 authenticators added",values:{numOfTotpSettings:w}}),onClick:n,style:y.button,disabled:w>=2},{type:"sms",title:(0,f.jsx)(c()._H,{id:"mfa.updateSettings.addMoreSection.addAnotherPhoneNumber.button.title",defaultMessage:"Add phone number"}),caption:M>=2?(0,f.jsx)(c()._H,{id:"mfa.updateSettings.addMoreSection.addAnotherPhoneNumber.disabled.button.message",defaultMessage:"2 of 2 phones added"}):(0,f.jsx)(c()._H,{id:"mfa.updateSettings.addMoreSection.addAnotherPhoneNumber.button.message",defaultMessage:"{numOfSmsSettings} of 2 phones added",values:{numOfSmsSettings:M}}),onClick:o,style:y.button,disabled:M>=2},{type:"backup_code",title:(0,f.jsx)(c()._H,{id:"mfa.updateSettings.activeSection.useBackupCodes.button.title",defaultMessage:"Regenerate backup codes"}),caption:(0,f.jsx)(c()._H,{id:"mfa.updateSettings.activeSection.useBackupCodes.button.message",defaultMessage:"Use for account recovery when other methods don't work"}),onClick:l,style:y.button,disabled:!1}].sort(((e,t)=>(e.disabled?1:0)-(t.disabled?1:0)))),[n,o,l,w,M,y]),_=(0,i.useMemo)((()=>k.map(((e,t)=>(0,i.createElement)(m().Z,{...e,key:t})))),[k]),C=(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(U().Z,{style:y.settingsTitle,isSmall:!0,children:(0,f.jsx)(c()._H,{id:"mfa.updateSettings.activeSection.title",defaultMessage:"Active"})}),v,(0,f.jsx)(V().Z,{size:15,isHidden:!0}),(0,f.jsx)(U().Z,{style:y.settingsTitle,isSmall:!0,children:(0,f.jsx)(c()._H,{id:"mfa.updateSettings.addMoreMethodsSection.title",defaultMessage:"Add more methods"})}),_]}),I=[{text:(0,f.jsx)(c()._H,{id:"mfa.updateSettings.turnOffVerification.button.message",defaultMessage:"Turn off 2-step verification"}),onClick:r,type:"button",view:"plain",isRed:!0}];return(0,f.jsx)(g().Z,{title:b,header:x,errorMessage:s,icon:(0,p().j)(y.icon),onDismiss:u,secondaryActions:I,children:C})}function ne(e){return(0,d().EM)({button:{marginBottom:5},settingsTitle:{color:e.mediumTextColor,fontWeight:u().Ue.medium,marginBottom:8},icon:{width:30,height:30,fill:e.mediumIconColor}})}var oe=()=>s(642483),ae=()=>s(568017);function re(e){const{isLoading:t,userStore:s,errorMessage:n,onDismiss:o,onVerifyBackupCode:a,onTryAnotherMethod:r}=e,l=(0,d().yK)(le,[]),[u,p]=(0,i.useState)(""),m=(0,f.jsx)(c()._H,{id:"profileSettings.mfa.verifyIdentity.withBackupCode.title",defaultMessage:"To continue, we need to verify your identity"}),h=(0,f.jsx)(c()._H,{id:"profileSeettings.mfa.verifyIdentity.withBackupCode.header",defaultMessage:"Enter an unused one-time backup code."}),S={text:t?(0,f.jsx)(b().Z,{}):(0,f.jsx)(c()._H,{id:"profileSettings.mfa.verifyIdentity.withBackupCode.button.message",defaultMessage:"Continue"}),onClick:()=>a(u.replace(/[^0-9a-zA-Z]/g,"")),disabled:t||""===u},y=[{text:(0,f.jsx)(c()._H,{id:"profileSettings.mfa.verifyIdentity.withBackupCode.secondaryButton.message",defaultMessage:"Try another method"}),view:"plain",type:"button",onClick:()=>r(),disabled:t}];return(0,f.jsx)(g().Z,{title:m,header:h,icon:(0,f.jsx)(_,{userStore:s}),primaryAction:S,secondaryActions:y,errorMessage:n,onDismiss:o,children:(0,f.jsx)(W().Z,{type:"text",value:u,onChange:e=>{p((0,oe().K)(e.target.value))},placeholder:"0000-0000",style:l.backupCodeInput,disabled:t,autoFocus:!0})})}function le(e){return(0,d().EM)({backupCodeInput:{width:"100%",background:"light"===e.mode?ae().ZP.transparent:e.inputBackground}})}function de(e){const{isLoading:t,isForgotPasswordLoading:s,userStore:n,errorMessage:a,alertMessage:r,onDismiss:l,onVerifyPassword:u,onForgotPassword:p}=e,m=(0,d().yK)(ce,[]),[h,S]=(0,i.useState)(""),y=(0,o().VK)((()=>null==n?void 0:n.getEmail()),[n]),x=(0,f.jsx)(c()._H,{id:"profileSettings.mfa.verifyIdentity.withPassword.title",defaultMessage:"To continue, we need to verify your identity"}),v={text:t?(0,f.jsx)(b().Z,{}):(0,f.jsx)(c()._H,{id:"profileSettings.mfa.verifyIdentity.withPassword.button.message",defaultMessage:"Continue"}),onClick:()=>u(h),disabled:t||""===h},j=[{text:(0,f.jsx)(c()._H,{id:"profileSettings.mfa.verifyIdentity.withPassword.secondaryButton.message",defaultMessage:"Forgot password?"}),view:"plain",type:"button",disabled:s,onClick:()=>p(y)}];return(0,f.jsx)(g().Z,{title:x,header:y,icon:(0,f.jsx)(_,{userStore:n}),primaryAction:v,secondaryActions:j,errorMessage:a,alertMessage:r,onDismiss:l,children:(0,f.jsx)(W().Z,{type:"password",value:h,onChange:e=>S(e.target.value),placeholder:"Your password",style:m.passwordInput,disabled:t,autoComplete:"current-password",autoFocus:!0})})}function ce(){return(0,d().EM)({passwordInput:{width:"100%"}})}var ue=()=>s(513670),pe=()=>s(484726),me=()=>s(321429);function ge(e){const{mfaSetting:t,isLoading:s,userStore:n,errorMessage:o,resentStatus:a,resentAt:r,onDismiss:l,onVerifySMS:d,onResendLink:u,onTryAnotherMethod:p}=e,[m,h]=(0,i.useState)([]),S=(0,f.jsx)(c()._H,{id:"profileSettings.mfa.verifyIdentity.withSMS.title",defaultMessage:"To continue, we need to verify your identity"}),y=(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(c()._H,{id:"profileSeettings.mfa.verifyIdentity.withSMS.header",defaultMessage:"Enter the code sent to {phoneHint}.",values:{phoneHint:`${t.phoneNumber}`}})," ",(0,f.jsx)(pe().y,{resentAt:r,resentStatus:a,onResendLink:u})]}),x={text:s?(0,f.jsx)(b().Z,{}):(0,f.jsx)(c()._H,{id:"profileSettings.mfa.verifyIdentity.withSMS.button.message",defaultMessage:"Continue"}),onClick:()=>d(t.mfaSettingId,m.join("")),disabled:s||"resending"===a||6!==(0,ue().oA)(m).length},v=[{text:(0,f.jsx)(c()._H,{id:"profileSettings.mfa.verifyIdentity.withSMS.secondaryButton.message",defaultMessage:"Try another method"}),view:"plain",type:"button",onClick:()=>p(),disabled:s}];return(0,f.jsx)(g().Z,{title:S,header:y,icon:(0,f.jsx)(_,{userStore:n}),primaryAction:x,secondaryActions:v,errorMessage:o,onDismiss:l,children:(0,f.jsx)("div",{children:(0,f.jsx)(me().ZP,{numInputs:6,value:m,format:"settings",disabled:!1,onChange:h,autoFocus:!0,isValidKey:me().rN})})})}function fe(e){const{mfaSetting:t,isLoading:s,userStore:n,errorMessage:o,onDismiss:a,onVerifyTOTP:r,onTryAnotherMethod:l}=e,u=(0,d().yK)(he,[]),[p,m]=(0,i.useState)([]),h=(0,f.jsx)(c()._H,{id:"profileSettings.mfa.verifyIdentity.withTOTP.title",defaultMessage:"To continue, we need to verify your identity"}),S=(0,f.jsx)(c()._H,{id:"profileSeettings.mfa.verifyIdentity.withTOTP.header",defaultMessage:"Enter code from authenticator <boldtext>{friendlyName}</boldtext>.",values:{friendlyName:t.friendlyName,boldtext:e=>(0,f.jsx)("span",{style:u.boldText,children:e})}}),y={text:s?(0,f.jsx)(b().Z,{}):(0,f.jsx)(c()._H,{id:"profileSettings.mfa.verifyIdentity.withTOTP.button.message",defaultMessage:"Continue"}),onClick:()=>r({mfaSettingId:t.mfaSettingId,code:p.join("")}),disabled:s||6!==(0,ue().oA)(p).length},x=[{text:(0,f.jsx)(c()._H,{id:"profileSettings.mfa.verifyIdentity.withTOTP.secondaryButton.message",defaultMessage:"Try another method"}),view:"plain",type:"button",onClick:()=>l(),disabled:s}];return(0,f.jsx)(g().Z,{title:h,header:S,icon:(0,f.jsx)(_,{userStore:n}),primaryAction:y,secondaryActions:x,errorMessage:o,onDismiss:a,children:(0,f.jsx)("div",{children:(0,f.jsx)(me().ZP,{numInputs:6,value:p,format:"settings",disabled:!1,onChange:m,autoFocus:!0,isValidKey:me().rN})})})}function he(e){return(0,d().EM)({boldText:{fontWeight:u().Ue.semibold}})}s(470928);function Se(e){const{passkeys:t,passkeyAuthenticatorIdToDelete:s,onDismiss:i,onCancel:n,onDeleteMethod:o}=e,a=(0,d().yK)(ye,[]),r=t.find((e=>e.id===s));if(!r)return null;const l=(0,f.jsx)(c()._H,{id:"passkey.deleteSetting.title",defaultMessage:"Delete {passkeyName}",values:{passkeyName:r.authenticatorName}}),u=(0,f.jsx)(c()._H,{id:"passkey.deleteSetting.header",defaultMessage:"Once deleted, you will no longer be able to use the passkey saved in {friendlyName}.{newline}<boldtext>Are you sure you want to delete this?</boldtext>",values:{friendlyName:r.authenticatorName,boldtext:e=>(0,f.jsx)("span",{style:a.boldText,children:e}),newline:(0,f.jsx)("br",{})}}),p={text:(0,f.jsx)(c()._H,{id:"mfa.deleteSetting.permanentlyDelete.button.message",defaultMessage:"Permanently delete"}),onClick:()=>o(),isRed:!0},m=[{text:(0,f.jsx)(c()._H,{id:"mfa.deleteSetting.cancel.button.message",defaultMessage:"Cancel"}),onClick:n,type:"button",view:"outline"}];return(0,f.jsx)(g().Z,{title:l,header:u,icon:(0,y().y)(a.crossIcon),primaryAction:p,secondaryActions:m,onDismiss:i})}function ye(e){return(0,d().EM)({crossIcon:{width:30,fill:"red"},boldText:{fontWeight:u().Ue.semibold}})}s(30005);var be=()=>s(261275),xe=()=>s(568194);function ve(e){const{setting:t,setIsEditing:s,isEditing:n,onUpdateMethod:o}=e,a=(0,d().yK)(je,[]),[r,l]=(0,i.useState)(""),c=t.authenticatorName,u=""===r?c:r,p=(0,i.useCallback)((e=>""!==e&&e!==c),[c]),m=()=>{p(u)?(o({passkeyAuthenticatorId:t.id,name:u}),l(u)):l(c),s(!n)},g=(0,i.useCallback)((e=>{p(e.target.value)&&l(e.target.value)}),[p]);return n?(0,f.jsx)(W().Z,{value:u,maxlength:30,onChange:g,onKeyDown:e=>{"Enter"!==e.key&&"Escape"!==e.key||m()},onBlur:m,focus:n,style:a.inputField,inputStyle:a.input}):(0,f.jsx)(U().Z,{children:u})}function je(){return(0,d().EM)({inputField:{width:"auto",marginRight:5,marginBottom:1},input:{fontSize:14,...u().Yu}})}function we(e){const{caption:t,setting:s,onDeleteMethod:n,onUpdateMethod:o,isEditing:a}=e,r=(0,d().yK)(Me,[]),[l,u]=(0,i.useState)(a),p=e=>({key:"deletePasskeyMethod",render:e=>(0,f.jsx)(G().Z,{...e,title:(0,f.jsx)(c()._H,{id:"mfa.updatePasskeySettings.activeSection.editMenu.delete.button.message",defaultMessage:"Delete"}),icon:(0,y().y)(r.menuItemIcon)}),action:()=>{n({passkeyAuthenticatorId:s.id}),e.close()}}),m=e=>({key:"editPasskeyMethod",render:e=>(0,f.jsx)(G().Z,{...e,title:(0,f.jsx)(c()._H,{id:"mfa.updatePasskeySettings.activeSection.editMenu.editTitle.button.message",defaultMessage:"Rename passkey"}),icon:(0,F().R)(r.menuItemIcon)}),action:()=>{u(!0),e.close()}});return(0,f.jsxs)("div",{style:r.activeMethodContainer,children:[(0,f.jsxs)("div",{style:r.activeMethodLeftContainer,children:[(0,f.jsx)("div",{style:r.icon,children:(0,xe().r)(r.icon)}),(0,f.jsxs)("div",{style:r.activeMethodText,children:[(0,f.jsx)(ve,{setting:s,setIsEditing:u,isEditing:l,onUpdateMethod:o}),(0,f.jsx)("span",{style:r.activeMethodCaption,children:t})]})]}),(0,f.jsx)(q().ZP,{render:e=>(0,f.jsx)(ee,{activeMenuActions:[m(e),p(e)]}),alignmentToOrigin:q().vR.Start,renderOrigin:e=>(0,f.jsx)(K().Z,{style:r.menuButton,disabled:l,...e,children:(0,E().o)(r.menuIcon)}),popupType:q().Z4.Popup})]})}function Me(e){return(0,d().EM)({activeMethodContainer:{display:"flex",justifyContent:"space-between",border:`1px solid ${e.outlineButtonBorder}`,width:"100%",padding:"10px 14px 10px 16px",alignItems:"start",height:"auto",borderRadius:4,marginBottom:5},activeMethodLeftContainer:{display:"flex",justifyContent:"left",minWidth:0},activeMethodText:{display:"flex",flexDirection:"column",minWidth:0},activeMethodCaption:{fontSize:u().JB.UISmall.desktop,lineHeight:u().Nv.UISmall.desktop,color:e.mediumTextColor,whiteSpace:"normal"},icon:{width:20,height:20,marginRight:10,fill:e.blueColor},menuIcon:{fill:e.lightIconColor,width:15,height:15},menuButton:{borderRadius:4,padding:3},menuItemIcon:{width:17,height:17}})}function ke(e){const{passkeySettings:t,errorMessage:s,onDismiss:i,onAddMethod:n,onDeleteMethod:o,onUpdateMethod:a,shouldNameNewSetting:r}=e,l=(0,d().yK)(_e,[]);let u;return null==t||t.forEach((e=>{var t;(!u||e.createdAt>(null===(t=u)||void 0===t?void 0:t.createdAt))&&(u=e)})),(0,f.jsxs)(g().Z,{title:"Passkey Settings",header:"Use your device's built-in security features like Face ID to sign in instead of remembering passwords.",errorMessage:s,icon:(0,p().j)(l.icon),onDismiss:i,children:[t.length<5&&(0,f.jsx)(be().Z,{title:"Add new passkey",onClick:n}),(0,f.jsx)(V().Z,{size:15,isHidden:!0}),t.length>0&&(0,f.jsx)(U().Z,{style:l.settingsTitle,isSmall:!0,children:(0,f.jsx)(c()._H,{id:"mfa.updateSettings.activeSection.title",defaultMessage:"Active"})}),t.map(((e,t)=>{var s;const i=(0,N().tv)(e.createdAt,D().locale);return(0,f.jsx)(we,{caption:(0,f.jsx)(c()._H,{id:"mfa.updateSettings.activeSection.useAuthenticator.button.message",defaultMessage:"Set up {createdTimeNormalized}",values:{createdTimeNormalized:i}}),setting:e,onDeleteMethod:o,onUpdateMethod:a,isEditing:r&&e.id===(null===(s=u)||void 0===s?void 0:s.id)},e.id)}))]})}function _e(e){return(0,d().EM)({button:{marginBottom:5},settingsTitle:{color:e.mediumTextColor,fontWeight:u().Ue.medium,marginBottom:8},icon:{width:30,height:30,fill:e.mediumIconColor}})}function Ce(e){const{settingsStateMachine:t,onDismiss:s,onStartTOTP:i,onStartSMS:d,onStartBackupCodes:c}=e,u=(0,n().O7)(),p=(0,n().Fy)(),m=(0,o().VK)((()=>(0,l().B7)(u)),[u]),g=(0,o().VK)((()=>t.getCurrentStep()),[t]);switch(g.step){case"settingsUninitialized":case"settingsPasskeyLoadSettings":case"settingsLoadSettings":return null;case"settingsVerifyWithPassword":return(0,f.jsx)(de,{isLoading:g.isLoading,isForgotPasswordLoading:g.isForgotPasswordLoading,userStore:m,errorMessage:g.error,alertMessage:g.alert,onVerifyPassword:e=>t.settingsVerifyPassword(e),onForgotPassword:e=>t.settingsForgotPassword(e),onDismiss:s});case"settingsVerifyChooseMFAMethod":return(0,f.jsx)(I,{isSMSLoading:g.isSMSLoading,chosenMfaSettingId:g.chosenMfaSettingId,mfaSettings:g.mfaSettings,userStore:m,errorMessage:g.error,onClick:e=>t.settingsChooseVerifyMethod(e),onDismiss:s});case"settingsVerifyWithTOTP":return(0,f.jsx)(fe,{isLoading:g.isLoading,mfaSetting:g.mfaSetting,userStore:m,errorMessage:g.error,onDismiss:s,onVerifyTOTP:e=>t.settingsVerifyTOTP(e),onTryAnotherMethod:()=>t.settingsTryAnotherMethod()});case"settingsVerifyWithSMS":return(0,f.jsx)(ge,{isLoading:g.isLoading,mfaSetting:g.mfaSetting,userStore:m,errorMessage:g.error,resentAt:g.resentAt,resentStatus:g.resentStatus,onDismiss:s,onVerifySMS:(e,s)=>t.settingsVerifySMS({mfaSettingId:e,code:s}),onResendLink:()=>t.settingsVerifyResendSMS(g.mfaSetting.mfaSettingId),onTryAnotherMethod:()=>t.settingsTryAnotherMethod()});case"settingsVerifyWithBackupCode":return(0,f.jsx)(re,{isLoading:g.isLoading,userStore:m,errorMessage:g.error,onDismiss:s,onVerifyBackupCode:e=>t.settingsVerifyBackupCode(e),onTryAnotherMethod:()=>t.settingsTryAnotherMethod()});case"settingsInitialSetup":return(0,f.jsx)(h,{errorMessage:g.error,onStartTOTP:i,onStartSMS:d,onDismiss:s});case"settingsShowSettings":const e=g.mfaSettings;return(0,f.jsx)(ie,{mfaSettings:e,errorMessage:g.error,onStartTOTP:i,onStartSMS:d,onStartBackupCodes:c,onTurnOffMFA:()=>t.settingsConfirmDisableMFA(),onDismiss:s,onDeleteMethod:e=>t.settingsConfirmDelete(e),onUpdateMethod:e=>t.settingsUpdate(e)});case"settingsPasskeyShowSettings":case"settingsPasskeyNameNewSetting":return(0,f.jsx)(ke,{passkeySettings:g.passkeys,errorMessage:g.error,onDismiss:s,onAddMethod:()=>p.isElectron?r().Ud(u):t.settingsPasskeyAddSetting(u),onDeleteMethod:e=>t.settingsConfirmDeletePasskeySetting(e),onUpdateMethod:e=>t.settingsPasskeyRenameSetting(e),shouldNameNewSetting:"settingsPasskeyNameNewSetting"===g.step});case"settingsDeletePasskeySetting":return(0,f.jsx)(Se,{passkeys:g.passkeys,passkeyAuthenticatorIdToDelete:g.passkeyAuthenticatorIdToDelete,onDismiss:s,onCancel:()=>t.passkeySettingsShow(),onDeleteMethod:()=>t.settingsDeletePasskeySetting()});case"settingsDeleteSettings":return(0,f.jsx)(x,{isLoading:g.isLoading,mfaSetting:g.mfaSettingToDelete,errorMessage:g.error,onDismiss:s,onCancel:()=>t.settingsConfirmIdentityForSettings(),onDeleteMethod:()=>t.settingsDelete()});case"settingsConfirmIdentity":case"settingsDisableMFA":const n="settingsConfirmIdentity"===g.step&&"disableMFA"===g.source;return"settingsDisableMFA"===g.step||n?(0,f.jsx)(R,{isLoading:n,lastMFASetting:g.lastMFASetting,errorMessage:g.error,onDismiss:s,onTurnOffMFA:()=>t.settingsDisableMFA(),onCancel:()=>t.settingsConfirmIdentityForSettings()}):null;case"settingsIdentityConfirmed":return"disableMFA"===g.source?(0,f.jsx)(A,{errorMessage:g.error,onDismiss:s}):null;default:return(0,a().t1)(g)}}},435669:(e,t,s)=>{s.d(t,{o:()=>n,y:()=>i});s(241792);class i extends(()=>s(263184))().default{getInitialState(){return{step:"backupCodesUninitialized"}}}class n extends(()=>s(361351))().o{constructor(e,t){super(e,"backupCodes"),this.service=void 0,this.service=t}backupCodesInitialSetup(e){if(!this.checkStep("backupCodesUninitialized"))return;const{onLoadingComplete:t,onComplete:s}=e;this.store.setState({step:"backupCodesLoading"}),this.doCreateBackupCodes({forceRecreate:!1,onComplete:s,onLoadingComplete:t}).catch(this.handleUnexpectedError)}backupCodesShowCreate(){this.checkStep("backupCodesUninitialized")&&this.store.setState({step:"backupCodesRegenerateCodes"})}backupCodesRegenerateCodes(){this.checkStep("backupCodesRegenerateCodes")&&(this.store.setState({step:"backupCodesRegenerateCodes",isLoading:!0}),this.doCreateBackupCodes({forceRecreate:!0,onComplete:()=>{},onLoadingComplete:()=>{}}).catch(this.handleUnexpectedError))}exit(){this.store.setState({step:"backupCodesUninitialized"})}async doCreateBackupCodes(e){const{forceRecreate:t,onComplete:i,onLoadingComplete:n}=e,o=await this.withStep(["backupCodesLoading","backupCodesRegenerateCodes"],(()=>this.service.createBackupCodes(t)));if(!o)return;const{result:a}=o;if("already-exists"===a.status)i();else{const e=function(e){const t=s(527278).Z.getIntl(),i=t.formatMessage({id:"mfa.backupCodes.downloadableTextFile.title",defaultMessage:"Notion Backup Codes"}),n=t.formatMessage({id:"mfa.backupCodes.downloadableTextFile.createdAt",defaultMessage:"Created at {createdAt}"},{createdAt:`${new Date}`}),o=t.formatMessage({id:"mfa.backupCodes.downloadableTextFile.warningMessage",defaultMessage:"Please store these in a secure location and mark off codes as they are used."}),a=`${i}\n${n}\n\n${e.map(s(642483).K).join("\n")}\n\n${o}\n`;return encodeURIComponent(a)}(a.backupCodes);this.store.setState({step:"backupCodesShowCodes",backupCodes:a.backupCodes,mfaSettingId:a.mfaSettingId,backupCodesFile:e}),n()}}}},261275:(e,t,s)=>{s.d(t,{Z:()=>d});var i=s(667294),n=()=>s(846550),o=()=>s(568194),a=()=>s(661297),r=()=>s(67961),l=s(785893);function d(e){const{title:t,onClick:s}=e,[d,c]=(0,i.useState)(!1),u=(0,i.useCallback)((()=>c(!0)),[c]),p=(0,i.useCallback)((()=>c(!1)),[c]),m=(0,n().yK)((e=>({button:{width:"100%",justifyContent:"left",padding:"10px 16px",alignItems:"start",height:"auto"},buttonLoading:{width:"100%",height:59},buttonInner:{minWidth:0},icon:{width:20,height:20,marginRight:10,fill:d?e.blueColor:e.regularIconColor}})),[d]),g=(0,o().r)(m.icon);return(0,l.jsxs)(a().Z,{style:m.button,onClick:s,onMouseEnter:u,onMouseLeave:p,hovered:d,children:[(0,l.jsx)("div",{style:m.icon,children:g}),(0,l.jsx)("div",{style:m.buttonInner,children:(0,l.jsx)(r().Z,{children:t})})]})}},359792:(e,t,s)=>{s.d(t,{M:()=>i,i:()=>n});class i extends(()=>s(263184))().default{getInitialState(){return{step:"rootUninitialized"}}}class n extends(()=>s(361351))().o{constructor(e){super(e,"root")}rootShowSettings(e){const{refresh:t,startConfirmIdentity:s}=e;if(this.checkStep("rootSettings")){if(!t)return}else this.store.setState({step:"rootSettings"});s()}rootStartBackupCodesFromSettings(e){this.checkStep("rootSettings")&&(this.store.setState({step:"rootBackupCodes",source:"settings"}),e())}rootStartTOTP(e){this.checkStep("rootSettings")&&(this.store.setState({step:"rootTOTP"}),e())}rootShowBackupCodesFromTOTP(){this.checkStep("rootTOTP")&&this.store.setState({step:"rootBackupCodes",source:"totp"})}rootStartSMS(e){this.checkStep("rootSettings")&&(this.store.setState({step:"rootSMS"}),e())}rootShowBackupCodesFromSMS(){this.checkStep("rootSMS")&&this.store.setState({step:"rootBackupCodes",source:"sms"})}rootEndBackupCodes(e){const t=this.checkStep("rootBackupCodes");if(t)switch(t.source){case"settings":return this.store.setState({step:"rootSettings"}),e.showSettings();case"sms":return this.store.setState({step:"rootSMS"}),e.completeSMS();case"totp":return this.store.setState({step:"rootTOTP"}),e.completeTotp();default:(0,s(696459).t1)(t.source)}}rootCloseSettings(e){e(),this.store.setState({step:"rootUninitialized"})}exit(e){this.store.setState({step:"rootUninitialized"}),e()}}},323143:(e,t,s)=>{s.d(t,{W:()=>d,c:()=>l});s(267602),s(653476),s(470928);var i=()=>s(632314),n=()=>s(696459),o=()=>s(363127),a=()=>s(516709);const r={settingsVerifyWithPassword:a().Qj.incorrectPassword,settingsVerifyWithSMS:a().Qj.smsIncorrectCode,settingsVerifyWithTOTP:a().Qj.totpIncorrectCode,settingsVerifyWithBackupCode:a().Qj.backupCodeIncorrectCode};class l extends(()=>s(263184))().default{getInitialState(){return{step:"settingsUninitialized"}}}class d extends(()=>s(361351))().o{constructor(e,t){super(e,"settings"),this.service=void 0,this.service=t}settingsConfirmIdentityForPasswordSetting(){this.checkStep("settingsUninitialized")&&(this.store.setState({step:"settingsConfirmIdentity",source:"passwordSetting"}),this.doConfirmIdentity().catch(this.handleUnexpectedError))}settingsConfirmIdentityForSettings(){this.checkStep(["settingsUninitialized","settingsDeleteSettings","settingsDisableMFA"])&&(this.store.setState({step:"settingsConfirmIdentity",source:"settings"}),this.doConfirmIdentity().catch(this.handleUnexpectedError))}settingsVerifyPassword(e){const t=this.checkStep("settingsVerifyWithPassword");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithPassword(e).catch(this.handleUnexpectedError))}settingsForgotPassword(e){const t=this.checkStep("settingsVerifyWithPassword");t&&(this.store.setState({...t,isForgotPasswordLoading:!0}),this.doForgotPassword(e).catch(this.handleUnexpectedError))}settingsChooseVerifyMethod(e){const t=this.checkStep("settingsVerifyChooseMFAMethod");if(!t)return;const s=e.mfaMethod;switch(s){case"sms":this.store.setState({...t,isSMSLoading:!0,chosenMfaSettingId:e.mfaSettingId}),this.doVerifyIdentitySendSMS({mfaSetting:e});break;case"totp":this.store.setState({mfaSetting:e,step:"settingsVerifyWithTOTP",isLoading:!1,source:t.source});break;case"backup_code":this.store.setState({step:"settingsVerifyWithBackupCode",isLoading:!1,source:t.source});break;default:(0,n().t1)(s)}}settingsTryAnotherMethod(){this.checkStep(["settingsVerifyWithSMS","settingsVerifyWithTOTP","settingsVerifyWithBackupCode"])&&this.doTryAnotherMethod().catch(this.handleUnexpectedError)}settingsVerifyTOTP(e){const t=this.checkStep("settingsVerifyWithTOTP");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithTOTP(e).catch(this.handleUnexpectedError))}settingsVerifySMS(e){const t=this.checkStep("settingsVerifyWithSMS");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithSMS(e).catch(this.handleUnexpectedError))}settingsVerifyResendSMS(e){const t=this.checkStep("settingsVerifyWithSMS");t&&(this.store.setState({...t,resentStatus:"resending"}),this.doVerifyIdentityResendSMS(e).catch(this.handleUnexpectedError))}settingsVerifyBackupCode(e){const t=this.checkStep("settingsVerifyWithBackupCode");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithBackupCode({code:e}).catch(this.handleUnexpectedError))}settingsShow(e){const{refresh:t}=e,s=this.getCurrentStep();if("settingsUninitialized"===s.step)return this.settingsConfirmIdentityForSettings();t&&("settingsShowSettings"===s.step||"settingsInitialSetup"===s.step)&&(this.store.setState({step:"settingsLoadSettings"}),this.doLoadSettings().catch(this.handleUnexpectedError))}settingsUpdate(e){this.checkStep("settingsShowSettings")&&this.doUpdateSettings(e).catch(this.handleUnexpectedError)}passkeySettingsShow(){this.store.setState({step:"settingsPasskeyLoadSettings"}),this.doLoadPasskeySettings({nameNewSetting:!1}).catch(this.handleUnexpectedError)}settingsPasskeyAddSetting(e){this.checkStep(["settingsPasskeyShowSettings","settingsPasskeyNameNewSetting"])&&this.doCreatePasskeySetting(e).catch(this.handleUnexpectedError)}settingsPasskeyRenameSetting(e){this.checkStep(["settingsPasskeyShowSettings","settingsPasskeyNameNewSetting"])&&this.doRenamePasskeySetting(e).catch(this.handleUnexpectedError)}settingsDeletePasskeySetting(){const e=this.checkStep("settingsDeletePasskeySetting");e&&this.doDeletePasskeySetting({passkeyAuthenticatorId:e.passkeyAuthenticatorIdToDelete}).catch(this.handleUnexpectedError)}settingsConfirmDeletePasskeySetting(e){const t=this.checkStep(["settingsPasskeyShowSettings","settingsPasskeyNameNewSetting"]);t&&this.store.setState({passkeys:t.passkeys,step:"settingsDeletePasskeySetting",passkeyAuthenticatorIdToDelete:e.passkeyAuthenticatorId})}settingsConfirmDelete(e){const t=this.checkStep("settingsShowSettings");if(!t)return;t.mfaSettings.find((t=>t.mfaSettingId===e.mfaSettingId));const s=t.mfaSettings.filter((e=>"totp"===e.mfaMethod||"sms"===e.mfaMethod));1===s.length?this.store.setState({step:"settingsDisableMFA",lastMFASetting:e}):this.store.setState({step:"settingsDeleteSettings",mfaSettings:t.mfaSettings,mfaSettingToDelete:e,isLoading:!1})}settingsDelete(){const e=this.checkStep("settingsDeleteSettings");e&&(this.store.setState({...e,isLoading:!0}),this.doDeleteSettings(e.mfaSettingToDelete.mfaSettingId).catch(this.handleUnexpectedError))}settingsConfirmDisableMFA(){this.checkStep("settingsShowSettings")&&this.store.setState({step:"settingsDisableMFA"})}settingsDisableMFA(){const e=this.checkStep("settingsDisableMFA");e&&(this.store.setState({step:"settingsConfirmIdentity",source:"disableMFA",lastMFASetting:e.lastMFASetting}),this.doConfirmIdentity().catch(this.handleUnexpectedError))}exit(){this.store.setState({step:"settingsUninitialized"})}async doConfirmIdentity(){const e=await this.withStep("settingsConfirmIdentity",(()=>this.service.confirmIdentity()));if(!e)return;const{result:t,state:s}=e,i=t.status;switch(i){case"ready":this.store.setState({step:"settingsIdentityConfirmed",source:s.source});const e=s.source;"settings"===e?await this.doLoadSettings():"disableMFA"===e?await this.doDisableMFA():"passwordSetting"===e?(o().default.setState({open:!0,setNewPassword:!0,isSet:!1,password:"",repeatPassword:""}),this.exit()):(0,n().t1)(e);break;case"mfa":this.store.setState({step:"settingsVerifyChooseMFAMethod",mfaSettings:t.settings,source:s.source});break;case"password":this.store.setState({step:"settingsVerifyWithPassword",isLoading:!1,isForgotPasswordLoading:!1,source:"settings"});break;default:throw(0,n().t1)(i)}}async doForgotPassword(e){if(!e)return void this.store.setState({step:"settingsVerifyWithPassword",source:"settings",isLoading:!1,isForgotPasswordLoading:!1,error:a().Qj.unexpectedError});const t=await this.withStep("settingsVerifyWithPassword",(()=>this.service.sendTemporaryPassword({email:e})));if(!t)return;const{result:s,state:i}=t;switch(s.status){case"ok":this.store.setState({...i,isForgotPasswordLoading:!1,alert:a().to.passwordResentLinkSent(e)});break;case"error":this.store.setState({...i,isForgotPasswordLoading:!1,error:a().Qj.unexpectedError});break;default:return(0,n().t1)(s.status)}}async doVerifyIdentityWithPassword(e){const t=await this.withStep("settingsVerifyWithPassword",(()=>this.service.verifyIdentityWithPassword({password:e})));if(!t)return;const{result:s,state:i}=t;await this.handleVerifyIdentityResponse({status:s.status,state:i})}async doVerifyIdentityWithTOTP(e){const t=await this.withStep("settingsVerifyWithTOTP",(()=>this.service.verifyIdentityWithTOTP(e)));if(!t)return;const{result:s,state:i}=t;await this.handleVerifyIdentityResponse({status:s.status,state:i})}async doVerifyIdentityWithSMS(e){const t=await this.withStep("settingsVerifyWithSMS",(()=>this.service.verifyIdentityWithSMS(e)));if(!t)return;const{result:s,state:i}=t;await this.handleVerifyIdentityResponse({status:s.status,state:i})}async doVerifyIdentityResendSMS(e){const t=await this.withStep("settingsVerifyWithSMS",(()=>this.service.sendSMS({mfaSettingId:e})));if(!t)return;const{result:s,state:i}=t;switch(s.status){case"ok":this.store.setState({...i,isLoading:!1,resentStatus:"resent",resentAt:Date.now()});break;case"error":this.store.setState({...i,resentStatus:"not-resent",error:a().Qj.unexpectedError});break;default:return(0,n().t1)(s.status)}}async doVerifyIdentityWithBackupCode(e){const t=await this.withStep("settingsVerifyWithBackupCode",(()=>this.service.verifyBackupCode(e)));if(!t)return;const{result:s,state:i}=t;await this.handleVerifyIdentityResponse({status:s.status,state:i})}async handleVerifyIdentityResponse(e){const{status:t,state:s}=e;switch(t){case"match":const e=s.source;this.store.setState({step:"settingsIdentityConfirmed",source:s.source}),"settings"===e?await this.doLoadSettings():"disableMFA"===e?await this.doDisableMFA():"passwordSetting"===e?(o().default.setState({open:!0,setNewPassword:!0,isSet:!1,password:"",repeatPassword:""}),this.exit()):(0,n().t1)(e);break;case"incorrect":this.store.setState({...s,isLoading:!1,error:r[s.step]});break;case"error":this.store.setState({...s,isLoading:!1,error:a().Qj.unexpectedError});break;default:return(0,n().t1)(t)}}async doTryAnotherMethod(){const e=await this.withStep(["settingsVerifyWithSMS","settingsVerifyWithTOTP","settingsVerifyWithBackupCode"],(()=>this.service.loadSettings()));if(!e)return;const{result:t,state:s}=e;t.settings.length>0?this.store.setState({...s,step:"settingsVerifyChooseMFAMethod",mfaSettings:t.settings}):this.store.setState({...s,error:a().Qj.unexpectedError})}async doLoadSettings(){const e=await this.withStep(["settingsLoadSettings","settingsIdentityConfirmed"],(()=>this.service.loadSettings()));if(!e)return;const{result:t,state:s}=e,i=s.step;switch(i){case"settingsIdentityConfirmed":case"settingsLoadSettings":t.settings.length>0?this.store.setState({step:"settingsShowSettings",mfaSettings:t.settings}):this.store.setState({step:"settingsInitialSetup"});break;default:return(0,n().t1)(i)}}async doVerifyIdentitySendSMS(e){const{mfaSetting:t}=e,s=await this.withStep("settingsVerifyChooseMFAMethod",(()=>this.service.sendSMS({mfaSettingId:t.mfaSettingId})));if(!s)return;const{result:i,state:o}=s;switch(i.status){case"ok":this.store.setState({mfaSetting:t,step:"settingsVerifyWithSMS",isLoading:!1,resentAt:0,resentStatus:"not-resent",source:o.source});break;case"error":break;default:return(0,n().t1)(i.status)}}async doUpdateSettings(e){const{mfaMethod:t,mfaSettingId:s}=e;if("totp"!==t)return;const n=await this.withStep("settingsShowSettings",(()=>this.service.renameSettings({mfaSettingId:s,friendlyName:e.friendlyName})));if(!n)return;const{result:o,state:r}=n;"saved"===o.status?o.settings.length>0&&!(0,i().Z)(o,r.mfaSettings)?this.store.setState({step:"settingsShowSettings",mfaSettings:o.settings}):this.store.setState({...r,error:void 0}):this.store.setState({...r,error:"duplicate"===o.status?a().Qj.totpDuplicateFriendlyName:"bad_friendly_name"===o.status?a().Qj.totpBadFriendlyName:a().Qj.totpEmptyFriendlyName})}async doLoadPasskeySettings(e){let{nameNewSetting:t=!1}=e;const s=await this.withStep(["settingsPasskeyLoadSettings","settingsPasskeyShowSettings","settingsPasskeyNameNewSetting"],(()=>this.service.loadPasskeySettings()));if(!s)return;const{result:i,state:n}=s;this.store.setState({...n,step:t?"settingsPasskeyNameNewSetting":"settingsPasskeyShowSettings",passkeys:i.settings})}async doCreatePasskeySetting(e){const t=await this.withStep(["settingsPasskeyShowSettings","settingsPasskeyNameNewSetting"],(()=>this.service.createPasskeySetting(e)));if(!t)return;const{result:s,state:i}=t;!0===s.created?await this.doLoadPasskeySettings({nameNewSetting:!0}):this.store.setState({...i,error:a().Qj.unableToSavePasskey})}async doRenamePasskeySetting(e){const{passkeyAuthenticatorId:t,name:s}=e,n=await this.withStep(["settingsPasskeyShowSettings","settingsPasskeyNameNewSetting"],(()=>this.service.renamePasskeySetting({passkeyAuthenticatorId:t,name:s})));if(!n)return;const{result:o,state:a}=n;o.settings.length>0&&!(0,i().Z)(o.settings,a.passkeys)?this.store.setState({step:"settingsPasskeyShowSettings",passkeys:o.settings}):this.store.setState({...a,error:void 0})}async doDeletePasskeySetting(e){const t=await this.withStep("settingsDeletePasskeySetting",(()=>this.service.deletePasskeySetting(e)));if(!t)return;const{result:s,state:n}=t;s.settings.length>=0&&!(0,i().Z)(s.settings,n.passkeys)?this.store.setState({step:"settingsPasskeyShowSettings",passkeys:s.settings}):this.store.setState({...n,error:void 0})}async doDisableMFA(){const e=await this.withStep("settingsIdentityConfirmed",(()=>this.service.disableMFA()));if(!e)return;const{result:t}=e;switch(t.status){case"ok":case"error":break;default:return(0,n().t1)(t.status)}}async doDeleteSettings(e){const t=await this.withStep("settingsDeleteSettings",(()=>this.service.deleteSettings(e)));if(!t)return;const{result:s}=t;this.store.setState({step:"settingsShowSettings",mfaSettings:s.settings})}}},317493:(e,t,s)=>{s.d(t,{F:()=>a,J:()=>o});var i=()=>s(696459),n=()=>s(516709);class o extends(()=>s(263184))().default{getInitialState(){return{step:"smsUninitialized"}}}class a extends(()=>s(361351))().o{constructor(e,t){super(e,"sms"),this.service=void 0,this.service=t}smsStart(){this.checkStep("smsUninitialized")&&this.store.setState({step:"smsSetPhoneNumber"})}smsRestart(){const e=this.checkStep(["smsResendSMS","smsVerifyCode","smsVerifying"]);e&&this.store.setState({step:"smsSetPhoneNumber",country:e.country,phoneNumber:e.phoneNumber,error:void 0})}smsCreateSMS(e,t){this.checkStep("smsSetPhoneNumber")&&(this.store.setState({country:e,phoneNumber:t,step:"smsSendingSMS"}),this.doCreateSMS().catch(this.handleUnexpectedError))}smsResendSMS(){const e=this.checkStep(["smsVerifyCode","smsVerifying"]);e&&(this.store.setState({...e,step:"smsResendSMS",error:void 0}),this.doResendSMS().catch(this.handleUnexpectedError))}smsVerifyCode(e){const{code:t,onVerified:s}=e,i=this.checkStep("smsVerifyCode");i&&(this.store.setState({...i,step:"smsVerifying",error:void 0}),this.doVerifyCode({code:t,onVerified:s}).catch(this.handleUnexpectedError))}smsBackupCodesComplete(){this.checkStep("smsBackupCodesLoading")&&this.store.setState({step:"smsVerified"})}smsComplete(){this.checkStep("smsVerified")&&this.store.setState({step:"smsComplete"})}exit(){this.store.setState({step:"smsUninitialized"})}async doCreateSMS(){const e=await this.withStep("smsSendingSMS",(e=>this.service.createSMS(e.country.countryCode,e.phoneNumber)));if(!e)return;const{result:t,state:s}=e;switch(t.status){case"created":this.store.setState({...s,step:"smsVerifyCode",mfaSettingId:t.mfaSettingId,error:void 0});break;case"already_verified_phone_number":this.store.setState({step:"smsSetPhoneNumber",error:n().Qj.smsAlreadyVerifiedPhoneNumber});break;case"invalid_country_code":this.store.setState({step:"smsSetPhoneNumber",error:n().Qj.smsInvalidCountryCode});break;case"invalid_phone_number":this.store.setState({step:"smsSetPhoneNumber",error:n().Qj.smsInvalidPhoneCode});break;case"sms_unsupported_country_code_for_enrollment":this.store.setState({step:"smsSetPhoneNumber",error:n().Qj.smsUnsupportedCountryCodeForEnrollment});break;default:return(0,i().t1)(t)}}async doVerifyCode(e){const{code:t,onVerified:s}=e,o=await this.withStep("smsVerifying",(e=>this.service.verifySMS({mfaSettingId:e.mfaSettingId,code:t})));if(!o)return;const{result:a,state:r}=o;switch(a.status){case"match":this.store.setState({step:"smsBackupCodesLoading",country:r.country,phoneNumber:r.phoneNumber}),s();break;case"error":this.store.setState({...r,step:"smsVerifyCode",error:n().Qj.unexpectedError});break;case"incorrect":this.store.setState({...r,step:"smsVerifyCode",error:n().Qj.smsIncorrectCode});break;default:return(0,i().t1)(a.status)}}async doResendSMS(){const e=await this.withStep("smsResendSMS",(e=>this.service.sendSMS({mfaSettingId:e.mfaSettingId})));if(!e)return;const{result:t,state:s}=e;switch(t.status){case"ok":this.store.setState({...s,step:"smsVerifyCode",mfaSettingId:s.mfaSettingId,error:void 0,resentAt:Date.now()});break;case"error":this.store.setState({...s,step:"smsVerifyCode",mfaSettingId:s.mfaSettingId,error:n().Qj.unexpectedError});break;default:return(0,i().t1)(t.status)}}}},275678:(e,t,s)=>{s.d(t,{V:()=>n,o:()=>i});s(670560);class i extends(()=>s(263184))().default{getInitialState(){return{step:"totpUninitialized"}}}class n extends(()=>s(361351))().o{constructor(e,t){super(e,"totp"),this.service=void 0,this.service=t}totpStart(){this.checkStep("totpUninitialized")&&(this.store.setState({step:"totpLoadingQRCode"}),this.doCreateTOTP().catch(this.handleUnexpectedError))}totpVerifyCode(e){const{friendlyName:t,code:s,onVerified:i}=e;this.doRenameTOTPAndVerifyCode({friendlyName:t,code:s,onVerified:i}).catch(this.handleUnexpectedError)}totpBackupCodesComplete(){this.checkStep("totpBackupCodesLoading")&&this.store.setState({step:"totpVerified"})}totpComplete(){this.checkStep("totpVerified")&&this.store.setState({step:"totpComplete"})}exit(){this.store.setState({step:"totpUninitialized"})}async doCreateTOTP(){const e=await this.withStep("totpLoadingQRCode",(()=>this.service.createTOTP()));if(!e)return;const{result:t}=e;this.store.setState({step:"totpVerifyCode",qrCode:t.qrCode,rawString:t.secret,mfaSettingId:t.mfaSettingId})}async doRenameTOTPAndVerifyCode(e){const{friendlyName:t,code:s,onVerified:i}=e,n=await this.withStep(["totpVerifyCode"],(e=>this.service.renameSettings({mfaSettingId:e.mfaSettingId,friendlyName:t}))),o=await this.withStep("totpVerifyCode",(e=>this.service.verifyTOTP({mfaSettingId:e.mfaSettingId,code:s})));if(!n||!o)return;const{result:a,state:r}=n,{result:l}=o;if("saved"===a.status&&"match"===l.status)this.store.setState({step:"totpBackupCodesLoading"}),i();else{const e=[];switch(a.status){case"duplicate":e.push("totpDuplicateFriendlyName");break;case"empty":e.push("totpEmptyFriendlyName");break;case"bad_friendly_name":e.push("totpBadFriendlyName")}switch(l.status){case"error":e.push("unexpectedError");break;case"incorrect":e.push("totpIncorrectCode")}this.store.setState({...r,step:"totpVerifyCode",errorKeys:e})}}}},872423:(e,t,s)=>{s.d(t,{ms:()=>pe,Xr:()=>me,dy:()=>ue,ZP:()=>ce});s(267602),s(653476);var i=s(667294),n=()=>s(219727),o=()=>s(142735),a=()=>s(846550),r=()=>s(788860),l=()=>s(707513),d=()=>s(897373),c=()=>s(269299),u=()=>s(104822),p=()=>s(286338),m=()=>s(223160),g=()=>s(91502),f=()=>s(581205),h=()=>s(876822),S=()=>s(812376),y=()=>s(965014),b=()=>s(188296),x=()=>s(471645),v=()=>s(67961),j=()=>s(868614),w=()=>s(253664),M=(s(241792),()=>s(819792)),k=()=>s(378907),_=(s(470928),()=>s(646574)),C=()=>s(874459),I=()=>s(446866),T=()=>s(998411),P=()=>s(513670),A=()=>s(696459),Z=()=>s(509417),H=()=>s(102182),R=()=>s(267842),B=()=>s(615634),D=()=>s(696347),N=()=>s(998901),V=()=>s(826955),U=()=>s(154186),O=()=>s(661297),E=()=>s(92175),F=()=>s(654133),L=()=>s(239444),K=()=>s(981583),G=()=>s(506347),q=()=>s(528514),W=()=>s(396136),z=()=>s(497065),Y=()=>s(429725),Q=()=>s(729775),$=()=>s(943620),J=()=>s(384241),X=s(785893);function ee(e){const{pageAndRole:t,environment:s,intl:i}=e,n=(0,a().yK)((e=>({title:{marginLeft:2},role:{marginLeft:4},linkContainer:{display:"inline-flex",alignItems:"center"}})),[]),r=(0,o().VK)((()=>new(V().G)(s,{table:W().iU,id:t.id})),[s,t.id]),l=(0,o().VK)((()=>{var e;return null===(e=r.getModel())||void 0===e?void 0:e.getRenderIcon({getRecordModel:r.getRecordModel})}),[r]),d=(0,o().VK)((()=>(0,Y().ZP)({store:r,pageVisitSource:G().tY.LinkInPage})),[r]);return(0,X.jsxs)(Q().Z,{style:n.linkContainer,onClick:()=>{z().c4({environment:s,url:d,openInNew:"tab"})},children:[(0,X.jsx)($().Z,{icon:l,size:16,isEmptyPage:!1,disabled:!0}),(0,X.jsx)("b",{children:(0,X.jsx)(J().Z,{style:n.title,store:r})}),(0,X.jsx)(v().Z,{style:n.role,isSecondaryColor:!0,children:`(${i.formatMessage((0,q().kD)(t.role,W().iU)).toLocaleLowerCase()})`})]})}function te(e){const{store:t,request:s}=e,{forActor:l,accessRequest:d,createdByActorsWithReason:c}=s,u=(0,n().O7)(),m=(0,a().yK)((e=>({actionButtons:{display:"flex",alignItems:"center",gap:12},requestMetadata:{minWidth:0,marginLeft:10,marginRight:6},tooltip:{marginBottom:2},tooltipHeader:{color:e.mediumInvertedTextColor,fontSize:10,textTransform:"uppercase",letterSpacing:"0.015em",marginBottom:2},requestBody:{marginLeft:38,marginTop:8}})),[]),g=(0,r().YB)(),f=(0,o().VK)((()=>l.__IM_SORRY__getValue()),[l]),h=(0,o().VK)((()=>(0,P().mN)(c.map((e=>{let{actor:t}=e;return t})),(e=>e.id))),[c]),S=(0,o().VK)((()=>d.getType()),[d]),y=(0,o().VK)((()=>s.createdByActorsWithReason.filter((e=>{let{reason:t}=e;return Boolean(t)})).map((e=>`${e.actor.getDisplayName(g)} · ${e.reason}`))),[s,g]),b=(0,o().VK)((()=>{var e;return d.isGuestInviteRequest()?null===(e=d.getAttributes())||void 0===e||null===(e=e.permission_records_and_roles)||void 0===e?void 0:e[0]:void 0}),[d]),x=(0,o().VK)((()=>(0,p().wd)()),[]),j=(0,o().VK)((()=>{if(!d.isGuestInviteRequest())return;const e=(0,I().H3)(l.email),s=e&&(0,I().Gd)(e);return s?t.getEmailDomains().find((e=>e===s)):void 0}),[d,l,t]),w=(0,o().VK)((()=>d.created_time),[d]),M=(0,i.useCallback)((async()=>{if(d.isGuestInviteRequest()){(await Z().mY({environment:u,requests:[d],status:"approved",from:"requests_center"})).failedUsers.length>0?H().oV({label:(0,X.jsx)(r()._H,{id:"spaceSettingsRequestRow.requestRowActions.toast.approveGuestInvite.failure",defaultMessage:"Failed to invite {actorEmail} as a guest",values:{actorEmail:l.email}})}):H().oV({label:(0,X.jsx)(r()._H,{id:"spaceSettingsRequestRow.requestRowActions.toast.approveGuestInvite.success",defaultMessage:"Invited {actorEmail} as guest",values:{actorEmail:l.email}})})}else if(d.isSpaceMembershipRequest()){(await Z().YN({environment:u,store:t,requests:[d],status:"approved",from:"requests_center"})).failedUsers.length>0?H().oV({label:(0,X.jsx)(r()._H,{id:"spaceSettingsRequestRow.requestRowActions.toast.approveSpaceMembership.failure",defaultMessage:"Failed to add {actorEmail} as a member",values:{actorEmail:l.email}})}):H().oV({label:(0,X.jsx)(r()._H,{id:"spaceSettingsRequestRow.requestRowActions.toast.approveSpaceMembership.success",defaultMessage:"Added {actorEmail} as a member",values:{actorEmail:l.email}})})}}),[d,u,l,t]),k=(0,i.useCallback)((()=>{d.isGuestInviteRequest()?Z().mY({environment:u,requests:[d],status:"rejected",from:"requests_center"}):d.isSpaceMembershipRequest()&&Z().YN({environment:u,store:t,requests:[d],status:"rejected",from:"requests_center"})}),[d,u,t]);if(!(s&&l&&f&&c.length))return null;const R=C().CQ(w,(0,T().r)()),B=(0,_().ZV)({value:R,date_format:"relative",userTimeZone:(0,T().r)(),intl:g,allowRelativeDates:!0}),D=y.length>0||(0,A().$K)(b);return(0,X.jsxs)("div",{style:{width:"100%"},children:[(0,X.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,X.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,X.jsx)(oe,{forActor:f,type:S,shouldShowUpdatedRequestInbox:x}),(0,X.jsxs)("div",{style:m.requestMetadata,children:[(0,X.jsx)(ne,{type:S,forActor:f,shouldShowUpdatedRequestInbox:x}),(0,X.jsxs)(v().Z,{isSmall:!0,children:[(0,X.jsx)(F().Z,{renderTooltip:()=>(0,X.jsxs)("div",{style:m.tooltip,children:[(0,X.jsx)(v().Z,{style:m.tooltipHeader,children:(0,X.jsx)(r()._H,{defaultMessage:"Requested by",id:"spaceSettingsRequests.requestRowAction.requestedByMoreThanTwo.tooltip"})}),h.map((e=>(0,X.jsx)(re,{actor:e},e.id)))]}),render:e=>(0,X.jsx)("span",{...e,children:(0,X.jsx)(ae,{request:s,createdByActors:h,shouldShowUpdatedRequestInbox:x})})})," · ",B]})]})]}),(0,X.jsxs)("div",{style:m.actionButtons,children:[(0,X.jsx)(E().Z,{isGray:!0,onClick:k,children:(0,X.jsx)(r()._H,{defaultMessage:"Decline",id:"spaceSettingsRequests.requestRowAction.declineButton.label"})}),(0,X.jsx)(F().Z,{render:e=>(0,X.jsx)(O().Z,{isBlue:!0,onClick:M,...e,children:(0,X.jsx)(r()._H,{defaultMessage:"Approve",id:"spaceSettingsRequests.requestRowAction.acceptButton.label"})}),renderTooltip:()=>(0,X.jsx)("div",{style:{width:300},children:(0,X.jsx)(r()._H,{defaultMessage:"This user will automatically be added to the workspace when approved since {domain} is an allowed email domain",id:"spaceSettingsRequests.requestRowAction.allowedEmailDomain.tooltip",values:{domain:j}})}),disableTooltip:!j,textWrap:!0,placement:N().Placement.Bottom})]})]}),D&&(0,X.jsxs)("div",{style:m.requestBody,children:[b&&(0,X.jsx)(ee,{pageAndRole:b,environment:u,intl:g}),y.length>0&&(0,X.jsx)(ie,{reasonMessages:y})]})]})}function se(e){return(0,X.jsx)("b",{children:e})}function ie(e){const{reasonMessages:t}=e,[s,n]=(0,i.useState)(!1),o=(0,a().yK)((e=>({viewReasonsToggle:{paddingLeft:2,paddingRight:2,borderRadius:2,display:"inline-flex",alignItems:"center"},viewReasonsCaratIcon:{marginLeft:2,width:12,height:12,color:e.accentColors.gray[500]},reasonMessageBody:{marginTop:2}})),[]);return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)(U().Z,{style:o.viewReasonsToggle,onClick:()=>n(!s),children:[(0,X.jsx)(v().Z,{isSmall:!0,children:(0,X.jsx)(r()._H,{id:"spaceSettingsRequests.requestRowAction.viewReasonsButton.label",defaultMessage:"View reasons"})}),s?(0,B().i)(o.viewReasonsCaratIcon):(0,D().o)(o.viewReasonsCaratIcon)]}),s&&(0,X.jsx)("div",{style:o.reasonMessageBody,children:t.map(((e,t)=>(0,X.jsx)("div",{children:e},t)))})]})}function ne(e){const{shouldShowUpdatedRequestInbox:t,forActor:s,type:i}=e,n=(0,a().yK)((e=>({title:{display:"flex",gap:4},semibold:{fontWeight:l().Ue.semibold}})),[]);if(!t)return(0,X.jsx)("div",{style:n.title,children:(0,X.jsx)(v().Z,{className:"notranslate",children:s.email})});const o="guest_invite_request"===i?(0,X.jsx)(r()._H,{id:"spaceSettingsRequests.requestRow.title.guestInviteRequest",defaultMessage:"Invite {actorEmail} as a guest",values:{actorEmail:(0,X.jsx)("span",{style:n.semibold,children:s.email})}}):(0,X.jsx)(r()._H,{id:"spaceSettingsRequests.requestRow.title.membershipRequest",defaultMessage:"Add {actorEmail} as a member",values:{actorEmail:(0,X.jsx)("span",{style:n.semibold,children:s.email})}});return(0,X.jsx)("div",{style:n.title,children:(0,X.jsx)(v().Z,{className:"notranslate",children:o})})}function oe(e){const{type:t,shouldShowUpdatedRequestInbox:s,forActor:i}=e,n=(0,a().yK)((e=>({avatarWrapper:{borderRadius:"100%",background:e.accentColors.gray[75],width:28,height:28,display:"flex",alignItems:"center",justifyContent:"center"},addPersonIcon:{width:18,height:18,color:e.accentColors.gray[500]}})),[]);return s&&"guest_invite_request"===t?(0,X.jsx)("div",{style:n.avatarWrapper,children:(0,R().a)(n.addPersonIcon)}):(0,X.jsx)(K().Z,{userValue:i,size:28,borderStyle:"dashed"})}function ae(e){const{createdByActors:t,request:s,shouldShowUpdatedRequestInbox:i}=e,n=(0,r().YB)(),a=(0,o().VK)((()=>t.filter((e=>e.email!==s.forActor.email))),[s,t]),l=(0,o().VK)((()=>{var e;return null===(e=t[0])||void 0===e?void 0:e.getDisplayName(n)}),[t,n]),d=(0,o().VK)((()=>{var e;return null===(e=t[1])||void 0===e?void 0:e.getDisplayName(n)}),[t,n]),c=(0,o().VK)((()=>{var e;return null===(e=a[0])||void 0===e?void 0:e.getDisplayName(n)}),[a,n]),u=a.length!==t.length;return i?1===t.length?u?(0,X.jsx)(r()._H,{defaultMessage:"Guest self request",id:"spaceSettingsRequests.requestRowAction.requestedBySingularGuestSelfRequest"}):(0,X.jsx)(r()._H,{defaultMessage:"Requested by <b>{actorName}</b>",id:"spaceSettingsRequests.requestRowAction.requestedBySingular.v2",values:{actorName:l,b:se}}):u?(0,X.jsx)(r()._H,{defaultMessage:"{numberOfOtherActors, plural, one {Guest self request and requested by <b>{secondActorName}</b>} other {Guest self request and requested by <b>{numberOfOtherActors}</b> more}}",id:"spaceSettingsRequests.requestRowAction.requestedByPluralIncludingGuestSelfRequest.v2",values:{secondActorName:c,numberOfOtherActors:a.length,b:se}}):(0,X.jsx)(r()._H,{defaultMessage:"{numberOfOtherActors, plural, one {Requested by {firstActorName} and {secondActorName}} other {Requested by {firstActorName} and {numberOfOtherActors} more}}",id:"spaceSettingsRequests.requestRowAction.requestedByPlural.v2",values:{firstActorName:l,secondActorName:d,numberOfOtherActors:t.length-1}}):1===t.length?u?(0,X.jsx)(r()._H,{defaultMessage:"Guest self request",id:"spaceSettingsRequests.requestRowAction.requestedBySingularGuestSelfRequest"}):(0,X.jsx)(r()._H,{defaultMessage:"From {actorName}",id:"spaceSettingsRequests.requestRowAction.requestedBySingular",values:{actorName:l}}):u?(0,X.jsx)(r()._H,{defaultMessage:"{numberOfOtherActors, plural, one {Guest self request and from {secondActorName}} other {Guest self request and from {numberOfOtherActors} more}}",id:"spaceSettingsRequests.requestRowAction.requestedByPluralIncludingGuestSelfRequest",values:{secondActorName:c,numberOfOtherActors:a.length}}):(0,X.jsx)(r()._H,{defaultMessage:"{numberOfOtherActors, plural, one {From {firstActorName} and {secondActorName}} other {From {firstActorName} and {numberOfOtherActors} more}}",id:"spaceSettingsRequests.requestRowAction.requestedByPlural",values:{firstActorName:l,secondActorName:d,numberOfOtherActors:t.length-1}})}function re(e){let{actor:t}=e;const s=(0,n().O7)(),i=(0,a().yK)((()=>({component:{display:"flex",justifyContent:"space-between",marginBottom:4},email:{marginLeft:5}})),[]),r=(0,o().VK)((()=>t.email),[t]),l=new(V().U6)(s,t.pointer);return(0,X.jsxs)("div",{style:i.component,children:[(0,X.jsx)(L().Z,{avatarSize:18,userStore:l}),(0,X.jsx)("div",{style:i.email,children:r})]},t.id)}function le(e){const{spaceStore:t,accessRequestRenderValues:s,lastOpenedRequestCenterTime:i}=e,n=(0,o().VK)((()=>s.filter((e=>"pending"===e.accessRequest.status)).sort(((e,t)=>t.accessRequest.created_time-e.accessRequest.created_time))),[s]),l=(0,a().yK)((e=>({requestColumn:{width:"100%"},zeroStateContainer:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",padding:40,color:e.mediumTextColor,borderStyle:"solid",borderColor:e.regularDividerColor,borderWidth:1,borderRadius:4},mailIcon:{height:12,width:17,color:e.mediumIconColor,marginRight:6}})),[]),d={key:"request",header:void 0,style:l.requestColumn};return 0===n.length?(0,X.jsxs)("div",{style:l.zeroStateContainer,children:[(0,f().h)(l.mailIcon),(0,X.jsx)(r()._H,{id:"spaceSettingsRequests.emptyRequests.message",defaultMessage:"No invite requests yet"})]}):(0,X.jsx)(k().Z,{hideHeader:!0,columns:[d],rows:n.map(((e,s)=>({key:`request${s.toString()}`,columns:[(0,X.jsx)(de,{request:e,lastOpenedRequestCenterTime:i,spaceStore:t},e.accessRequest.id)]})))})}function de(e){let{request:t,lastOpenedRequestCenterTime:s,spaceStore:i}=e;const n=(0,o().VK)((()=>s<t.accessRequest.created_time),[s,t.accessRequest]);return(0,X.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[n&&(0,X.jsx)("div",{style:{marginLeft:-18,marginRight:10},children:(0,X.jsx)(M().z,{size:8})}),(0,X.jsx)(te,{store:i,request:t})]},t.accessRequest.id)}function ce(e){const{spaceStore:t,accessRequestRenderValues:s}=e,d=(0,n().O7)(),[u,m]=(0,i.useState)(Date.now()),g=(0,o().qz)(void 0,S().Z),y=(0,o().VK)((()=>g.getValueForSpace(t)),[t,g]),b=(0,o().VK)((()=>s?s.filter((e=>"pending"===e.accessRequest.status)).length:0),[s]),x=(0,o().VK)((()=>(0,p().wd)()),[]),v=(0,o().VK)((()=>t.canAdmin()),[t]),M=(0,a().yK)((e=>({errorContainer:{display:"flex",justifyContent:"center",alignItems:"center",padding:40,color:e.mediumTextColor},settingHeader:{fontSize:16,fontWeight:l().Ue.medium},requestCount:{color:e.lightTextColor}})),[]);(0,i.useEffect)((()=>{const{currentSpaceViewStore:e}=h().default.state;if(!e)return;const t=e.getKeyStore("settings").getKeyStore("last_opened_request_center").getValue();t&&m(t),c().createAndCommit({userAction:"SpaceSettingsRequests.updateLastOpened",environment:d,canUndo:!0,perform:t=>{c().applyOperation({store:e,operation:{pointer:e.pointer,path:["settings","last_opened_request_center"],command:"set",args:Date.now()},transaction:t})}})}),[]);const k=(0,i.useCallback)((()=>x&&v?null:(0,X.jsx)(fe,{securitySettingsStoreState:y,spaceStore:t,environment:d,isReadOnly:x})),[d,x,v,y,t]);return s?(0,X.jsxs)(X.Fragment,{children:[x&&v?(0,X.jsx)(w().Z,{icon:f().h,title:(0,X.jsx)(r()._H,{id:"spaceSettingsRequest.deeplinkCard.title",defaultMessage:"Change request settings in the <bold>Security</bold> tab",values:{bold:e=>(0,X.jsx)("span",{style:{fontWeight:l().Ue.semibold},children:e})}}),deeplinkTab:{currentTab:"security",defaultSubtab:void 0}}):null,k(),(0,X.jsxs)(j().Z,{divider:"none",large:!0,style:M.settingHeader,children:[(0,X.jsx)(r()._H,{id:"spaceSettingsRequest.title",defaultMessage:"Requests"}),(0,X.jsx)("span",{children:" "}),(0,X.jsx)("span",{style:M.requestCount,children:b>0?b:void 0})]}),(0,X.jsx)(le,{spaceStore:t,accessRequestRenderValues:s,lastOpenedRequestCenterTime:u})]}):(0,X.jsx)("div",{style:M.errorContainer,children:(0,X.jsx)(he,{})})}function ue(e){return(0,X.jsx)(ge,{...e,title:(0,X.jsx)(r()._H,{id:"spaceSettingsRequests.allowMembersToRequestMembers.title",defaultMessage:"Allow members to request adding other members"}),description:(0,X.jsx)(r()._H,{id:"spaceSettingsRequests.allowMembersToRequestMembers.description",defaultMessage:"Members can submit requests to admins to add more members"})})}function pe(e){return(0,X.jsx)(ge,{...e,title:(0,X.jsx)(r()._H,{id:"spaceSettingsRequests.allowExternalUsersToRequestMembership.title",defaultMessage:"Allow any user to request to be added as a member of the workspace"}),description:(0,X.jsx)(r()._H,{id:"spaceSettingsRequests.allowExternalUsersToRequestMembership.description",defaultMessage:"If enabled, users with teamspace invite links can submit requests to admins to be added as members"})})}function me(e){return(0,X.jsx)(ge,{...e,title:(0,X.jsx)(r()._H,{id:"spaceSettingsRequests.allowGuestsToSelfRequest.title",defaultMessage:"Allow page guests to request to be added as members to the workspace"}),description:(0,X.jsx)(r()._H,{id:"spaceSettingsRequests.allowGuestsToSelfRequest.description",defaultMessage:"Guests of the workspace can submit requests to admins to be added as members"})})}function ge(e){const{toggleOn:t,shouldShowUpsell:s,onClick:n,style:o,upsellOrigin:l,environment:d,description:c,title:u,isReadOnly:p,isControlledByOrganization:g}=e,f=(0,a().yK)((()=>({toggleContainer:{display:"flex",alignItems:"center",cursor:p?"auto":"pointer",marginBottom:14,...o},titleDescription:{fontSize:14,marginRight:8,flexGrow:1},description:{marginTop:2,width:"80%"}})),[o,p]),h=(0,i.useCallback)((()=>{p||g||(s?y().y(d,{from:l,upsell:{type:"product",product:"plus",limit:{type:"none"}}}):n())}),[d,l,p,s,n,g]);return(0,X.jsxs)("div",{style:f.toggleContainer,onClick:h,children:[(0,X.jsxs)("div",{style:f.titleDescription,children:[u,s?(0,X.jsx)(b().Z,{subscriptionTier:"plus",analyticsName:l,onClick:()=>y().y(d,{from:l,upsell:{type:"product",product:"plus",limit:{type:"none"}}}),desktopStyle:{display:"inline-block",marginLeft:8,marginTop:-3}}):null,(0,X.jsx)(v().Z,{isSmall:!0,isMultiline:!0,style:f.description,children:c})]}),p?(0,X.jsx)(v().Z,{isSmall:!0,children:(0,X.jsx)(r()._H,{id:"spaceSettingsRequests.readOnlyState.label",defaultMessage:"{isEnabled, select, true {Enabled} other {Disabled}}",values:{isEnabled:t}})}):(0,X.jsx)(x().Z,{on:t,disabled:s,isLocked:g,lockedTooltip:(0,m().g)()})]})}function fe(e){const{securitySettingsStoreState:t,spaceStore:s,environment:n,isReadOnly:a}=e,r=Boolean(null==t?void 0:t.disableMembershipRequests),l=Boolean(null==t?void 0:t.disableExternalMembershipRequests),c=Boolean(null==t?void 0:t.disableGuestMembershipRequests),p=(0,o().VK)((()=>(0,u().U)(s,n)),[n,s]),m=(0,o().VK)((()=>(0,g().bq)()),[]),f=(0,i.useCallback)((()=>{t&&d().n(n,{securitySettingsState:{...t,disableMembershipRequests:!t.disableMembershipRequests},spaceStore:s})}),[n,t,s]),h=(0,i.useCallback)((()=>{t&&d().n(n,{securitySettingsState:{...t,disableExternalMembershipRequests:!t.disableExternalMembershipRequests},spaceStore:s})}),[n,t,s]),S=(0,i.useCallback)((()=>{t&&d().n(n,{securitySettingsState:{...t,disableGuestMembershipRequests:!t.disableGuestMembershipRequests},spaceStore:s})}),[n,t,s]);return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(ue,{environment:n,upsellOrigin:"members_settings",toggleOn:!r,shouldShowUpsell:!1,isReadOnly:a,onClick:f}),m&&(0,X.jsx)(pe,{environment:n,upsellOrigin:"members_settings",toggleOn:!l,shouldShowUpsell:!1,isReadOnly:a,onClick:h}),p&&(0,X.jsx)(me,{environment:n,upsellOrigin:"members_settings",toggleOn:!c,shouldShowUpsell:!1,isReadOnly:a,onClick:S})]})}function he(){return(0,X.jsx)(r()._H,{defaultMessage:"Something went wrong.",id:"spaceSettingsRequests.unknownErrorMessage"})}},35724:(e,t,s)=>{s.d(t,{F:()=>g});s(667294);var i=()=>s(846550),n=()=>s(73363),o=()=>s(788860),a=()=>s(212493),r=()=>s(108714),l=()=>s(603692),d=()=>s(661641),c=()=>s(92175),u=()=>s(654133),p=()=>s(251932),m=s(785893);function g(e){let{quantityOfPaidSeats:t,quantityOfSpaceMembers:s,nextBillingDate:n}=e;const a=(0,i().yK)((e=>({container:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",border:`1px solid ${e.stroke.secondary}`,borderRadius:6}})),[]),r=t-s,l=r<0?(0,m.jsx)(o()._H,{id:"spaceSettings.billingBreakdown.seatsTooltipText.gracePeriod",defaultMessage:"At the end of this billing period, you'll be automatically charged for {difference, plural, one {# new seat} other {# new seats}} (since your current billing period is only for {difference, plural, one {# seat} other {# seats}}). Please ensure that the member list is up-to-date.",values:{difference:Math.abs(r),seats:t}}):r>0?(0,m.jsx)(o()._H,{id:"spaceSettings.billingBreakdown.seatsTooltipText.remainingSeats",defaultMessage:"You can invite {remainingSeats, plural, one {# more member} other {# more members}} without an additional charge, since you've already paid for those seats this billing period. You can also purchase more seats.",values:{remainingSeats:r}}):(0,m.jsx)(o()._H,{id:"spaceSettings.billingBreakdown.seatsTooltipText.noSeats",defaultMessage:"All seats are currently filled"});return(0,m.jsxs)("div",{style:a.container,children:[(0,m.jsx)(f,{title:(0,m.jsx)(o()._H,{id:"spaceSettings.billingBreakdown.title.paidSeatsTitle",defaultMessage:"Paid seats"}),titleTooltipContent:(0,m.jsx)(o()._H,{id:"spaceSettings.billingBreakdown.paidSeatsTooltip",defaultMessage:"The number of paid seats in your workspace"}),body:t}),(0,m.jsx)(f,{title:(0,m.jsx)(o()._H,{id:"spaceSettings.billingBreakdown.title.currentMembersTitle",defaultMessage:"Current members"}),titleTooltipContent:l,body:(0,m.jsxs)(p().gq,{alignItems:"center",gap:4,children:[(0,m.jsx)("span",{children:s}),r<0?(0,m.jsx)("div",{style:{color:"green",fontSize:10},children:"▲"}):r>0?(0,m.jsx)("div",{style:{color:"gray",fontSize:10},children:"▼"}):null]})}),(0,m.jsx)(f,{customStyles:{borderRight:"none"},title:(0,m.jsx)(o()._H,{id:"spaceSettings.billingBreakdown.title.nextBillingPeriodTitle",defaultMessage:"Next billing period"}),titleTooltipContent:(0,m.jsx)(o()._H,{id:"spaceSettings.billingBreakdown.nextBillingPeriodTooltip",defaultMessage:"You have paid for seats until the next billing period, and you may purchase more before the next billing period"}),body:n})]})}function f(e){let{title:t,titleTooltipContent:s,body:p,customStyles:g}=e;const f=(0,i().yK)((e=>({container:{padding:16,borderRight:`1px solid ${e.stroke.secondary}`,...g},helpIcon:{borderRadius:3,height:"auto",padding:0}})),[g]);return(0,m.jsxs)("div",{style:f.container,children:[(0,m.jsxs)(a().jX,{direction:"row",align:"center-left",gap:4,style:{marginBottom:4},children:[(0,m.jsx)(d().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:t}),(0,m.jsx)(u().Z,{allowHover:!0,textWrap:!0,renderTooltip:e=>(0,m.jsxs)(a().jX,{width:200,gap:2,style:{whiteSpace:"normal"},...e,children:[s,(0,m.jsx)(r().Z,{href:"https://www.notion.so/help/guides/adding-members-admins-and-guests",children:(0,m.jsx)(d().q,{colorName:"contrastSecondary",children:(0,m.jsx)(o()._H,{id:"spaceSettings.people.peopleDashboard.clickToLearnMore",defaultMessage:"Click to learn more"})})})]}),render:e=>(0,m.jsx)(c().Z,{...e,style:f.helpIcon,className:"tooltip-button",role:"button",href:"https://www.notion.so/help/guides/adding-members-admins-and-guests",children:(0,m.jsx)(l().y,{iconGroup:n().M,variantName:"small",colorName:"tertiary"})})})]}),(0,m.jsx)(d().q,{styleName:"Heading-17px/Medium",children:p})]})}},884749:(e,t,s)=>{s.d(t,{_:()=>o});var i=()=>s(677559);const n=new(i().Ss)("SlackImportsInviteWithModal",(async()=>await Promise.all([s.e(62743),s.e(54843)]).then(s.bind(s,563946)))),o=(0,i().kF)(n,(e=>e.SlackImportsInviteWithModal))},24746:(e,t,s)=>{s.d(t,{r:()=>a});var i=s(667294),n=()=>s(219727),o=()=>s(930085);function a(e){const{children:t}=e,s=(0,n().O7)();return(0,i.useEffect)((()=>{o().Dg(s,{})}),[s]),t}},104822:(e,t,s)=>{s.d(t,{B:()=>d,U:()=>l});var i=()=>s(530980),n=()=>s(243225),o=()=>s(989478),a=()=>s(565818),r=()=>s(286338);function l(e,t){return e.getKeyStore("settings").getKeyStore("seen_guest_membership_requests").getValue()&&(0,r().Ye)()}function d(e,t){const s=i().kk5.fromAccessRequest(e);if(!s.isPageAccessRequest())return!1;const r=s.getForActorPointer(t.id);return r.table===o().KJ&&!a().y.createChildStore(t,n().v8({userId:r.id,spaceId:t.id})).isMember()}},968433:(e,t,s)=>{s.d(t,{M:()=>r});var i=s(667294),n=()=>s(219727),o=()=>s(824462),a=s(785893);function r(e){return function(t){const s=(0,n().O7)(),[r,l]=(0,i.useState)({isDomainVerified:!1,settings:{}});(0,i.useEffect)((()=>{o().callApi({eventName:"getEmailDomainSettings",environment:s,data:{}}).then((e=>{"success"===e.type&&l(e.data)}))}),[s]);const d={...t,userEmailDomainSettings:r};return(0,a.jsx)(e,{...d})}}},762300:(e,t,s)=>{s.d(t,{P9:()=>l,YJ:()=>d,jc:()=>r,jg:()=>a});s(670560),s(267602),s(653476);var i=()=>s(235484),n=()=>s(530980),o=()=>s(525807);function a(e){if(e.integration_id!==i().nO)throw"Cannot render account for integration.";const t=/(.+) - (.+)/.exec(e.account_name);if(!t)return{accountName:e.account_name};const[,s,n]=t;return{organizationName:s,accountName:n}}function r(e){return n().kk5.fromValue(o().PJ,e).getSlackWorkspaceId()}function l(e,t){return t?e.filter((e=>{const s=r(e);return!!s&&t(s)})):e}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const s={};for(const i of e){const{accountName:e,organizationName:n}=a(i);c({query:t,accountName:e,organizationName:n})&&(s[e]||(s[e]=[]),s[e].push({externalAuthentication:i,workspaceName:n}))}return s}function c(e){const{accountName:t,organizationName:s,query:i}=e;if(0===i.length)return!0;const n=t.toLocaleLowerCase().indexOf(i.trim().toLocaleLowerCase())>=0,o=!!s&&s.toLocaleLowerCase().indexOf(i.trim().toLocaleLowerCase())>=0;return n||o}},267842:(e,t,s)=>{s.d(t,{a:()=>n});s(667294);var i=s(785893);const n=(0,s(827282).IU)("addPerson",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M9.48242 7.91211C10.8076 7.91211 11.8352 6.77783 11.8352 5.35718C11.8352 4.00391 10.7908 2.84717 9.48242 2.84717C8.17407 2.84717 7.12964 4.00952 7.13525 5.36279C7.14087 6.77783 8.16284 7.91211 9.48242 7.91211ZM9.48242 8.87231C8.7356 8.87231 8.04492 8.99585 7.44409 9.22046C8.23022 9.95044 8.72437 10.9836 8.72437 12.1235C8.72437 12.511 8.66821 12.8872 8.55591 13.2466H12.8684C13.969 13.2466 14.3171 12.8479 14.3171 12.2302C14.3171 10.804 12.3967 8.87231 9.48242 8.87231ZM4.74316 15.1895C6.42212 15.1895 7.80347 13.7969 7.80347 12.1235C7.80347 10.4558 6.42212 9.06885 4.74316 9.06885C3.06982 9.06885 1.68286 10.4558 1.68286 12.1235C1.68286 13.7969 3.06982 15.1895 4.74316 15.1895ZM4.74316 14.1675C4.41187 14.1675 4.18726 13.9429 4.18726 13.6172V12.6907H3.27197C2.94629 12.6907 2.72168 12.4661 2.71606 12.1292C2.71045 11.7979 2.93506 11.5732 3.27197 11.5732H4.18726V10.6636C4.18726 10.3379 4.41187 10.1133 4.74316 10.1077C5.08008 10.1021 5.30469 10.3267 5.30469 10.6636V11.5732H6.22559C6.55127 11.5732 6.77588 11.7979 6.77588 12.1292C6.77588 12.4661 6.55127 12.6907 6.22559 12.6907H5.30469V13.6172C5.30469 13.9429 5.08008 14.1675 4.74316 14.1675Z"})})},593864:(e,t,s)=>{s.d(t,{C:()=>n});s(667294);var i=s(785893);const n=(0,s(827282).IU)("chevronRightRoundedThin",{viewBox:"0 0 24 24",svg:(0,i.jsx)("path",{d:"M17.0078 11.8594C17.0078 11.724 16.9818 11.599 16.9297 11.4844C16.8776 11.3698 16.7995 11.2604 16.6953 11.1562L10.6094 5.20312C10.4375 5.03125 10.224 4.94531 9.96875 4.94531C9.80208 4.94531 9.64844 4.98698 9.50781 5.07031C9.36719 5.14844 9.25521 5.25521 9.17188 5.39062C9.09375 5.52604 9.05469 5.67969 9.05469 5.85156C9.05469 6.09635 9.14844 6.3151 9.33594 6.50781L14.8203 11.8594L9.33594 17.2109C9.14844 17.4036 9.05469 17.625 9.05469 17.875C9.05469 18.0417 9.09375 18.1927 9.17188 18.3281C9.25521 18.4688 9.36719 18.5781 9.50781 18.6562C9.64844 18.7396 9.80208 18.7812 9.96875 18.7812C10.224 18.7812 10.4375 18.6927 10.6094 18.5156L16.6953 12.5625C16.7995 12.4583 16.8776 12.349 16.9297 12.2344C16.9818 12.1198 17.0078 11.9948 17.0078 11.8594Z"})})},186647:(e,t,s)=>{s.d(t,{x:()=>n});s(667294);var i=s(785893);const n=(0,s(827282).IU)("group",{viewBox:"0 0 30 30",svg:(0,i.jsx)("path",{d:"M15.011 14.795c1.678 0 3.096-1.502 3.096-3.444C18.107 9.455 16.682 8 15.012 8c-1.67 0-3.096 1.478-3.088 3.367 0 1.926 1.41 3.428 3.088 3.428zm-8.872.178c1.464 0 2.697-1.316 2.697-3.003 0-1.656-1.241-2.917-2.697-2.917-1.448 0-2.697 1.284-2.69 2.933 0 1.671 1.234 2.987 2.69 2.987zm17.722 0c1.456 0 2.69-1.316 2.69-2.987.007-1.649-1.242-2.933-2.69-2.933s-2.697 1.261-2.697 2.917c0 1.687 1.241 3.003 2.697 3.003zM1.917 22h5.747c-.82-1.184.069-3.521 1.8-4.899-.842-.55-1.946-.952-3.325-.952C2.714 16.15.5 18.695.5 20.793.5 21.559.883 22 1.917 22zm26.166 0c1.034 0 1.417-.441 1.417-1.207 0-2.098-2.214-4.644-5.64-4.644-1.378 0-2.474.403-3.317.952 1.732 1.378 2.62 3.715 1.8 4.899h5.74zm-17.852-.008h9.554c1.264 0 1.7-.387 1.7-1.099 0-1.989-2.505-4.728-6.473-4.728-3.977 0-6.475 2.74-6.475 4.728 0 .712.437 1.1 1.693 1.1z"})})},114816:(e,t,s)=>{s.d(t,{z:()=>n});s(667294);var i=s(785893);const n=(0,s(827282).IU)("setPassword",{viewBox:"0 0 31 21",svg:(0,i.jsx)("path",{d:"M29.4746 3.43945L30.1777 2.7168C30.5684 2.32617 30.5781 1.7793 30.1973 1.39844L29.9336 1.14453C29.6016 0.802734 29.0352 0.851562 28.6641 1.22266L27.9609 1.91602L29.4746 3.43945ZM18.2441 13.4883L20.3047 12.5996L28.7227 4.18164L27.209 2.6875L18.8008 11.0957L17.8633 13.0977C17.7656 13.3223 18.0195 13.5859 18.2441 13.4883ZM3.40039 20.0508H23.6543C25.5 20.0508 26.5254 19.0547 26.5254 17.2188V8.88867L24.5918 10.8223V17.0625C24.5918 17.8242 24.1621 18.2637 23.3906 18.2637H3.6543C2.88281 18.2637 2.45312 17.8242 2.45312 17.0625V8.91797C2.45312 8.14648 2.88281 7.7168 3.6543 7.7168H19.6504L21.4375 5.93945H3.40039C1.54492 5.93945 0.519531 6.92578 0.519531 8.77148V17.2188C0.519531 19.0547 1.54492 20.0508 3.40039 20.0508ZM6.06641 14.4453C6.85742 14.4453 7.51172 13.791 7.51172 12.9902C7.51172 12.1895 6.85742 11.5449 6.06641 11.5449C5.25586 11.5449 4.61133 12.1895 4.61133 12.9902C4.61133 13.791 5.25586 14.4453 6.06641 14.4453ZM10.373 14.4453C11.1738 14.4453 11.8184 13.791 11.8184 12.9902C11.8184 12.1895 11.1738 11.5449 10.373 11.5449C9.57227 11.5449 8.91797 12.1895 8.91797 12.9902C8.91797 13.791 9.57227 14.4453 10.373 14.4453ZM14.6797 14.4453C15.4805 14.4453 16.1348 13.791 16.1348 12.9902C16.1348 12.1895 15.4805 11.5449 14.6797 11.5449C13.8789 11.5449 13.2344 12.1895 13.2344 12.9902C13.2344 13.791 13.8789 14.4453 14.6797 14.4453Z"})})},936879:(e,t,s)=>{s.d(t,{i:()=>o});var i=()=>s(930085),n=()=>s(912732);function o(e){n().L7(e,{type:"request"}),i().G(e,{type:"request",from:"settings_modal"})}},778265:(e,t,s)=>{s.d(t,{P:()=>o});var i=()=>s(219727),n=()=>s(466970);function o(){const{device:e}=(0,i().O7)(),t=e.isElectron||e.isMobileNative;return(0,n().E)("download_for_offline")&&t}},801796:(e,t,s)=>{s.d(t,{O:()=>R});var i=s(667294),n=()=>s(788860),o=()=>s(666414),a=()=>s(504117),r=()=>s(868614),l=(s(267602),s(653476),s(241792),()=>s(219727)),d=()=>s(142735),c=()=>s(846550),u=()=>s(437187),p=()=>s(396136),m=()=>s(989478),g=()=>s(513670),f=()=>s(696459),h=()=>s(285473),S=()=>s(291198),y=()=>s(67961),b=()=>s(549813),x=()=>s(270820),v=()=>s(747055),j=()=>s(876822),w=()=>s(826955),M=s(785893);const k=500,_={id:"pageName",headerTitle:(0,M.jsx)(n()._H,{id:"offlinePagesTable.columnHeader.pageName",defaultMessage:"Page name"}),renderCell:e=>(0,M.jsx)(s(865479).Z,{store:e.pageBlockStore}),widthData:{width:220},sortable:!1},C={id:"owner",headerTitle:(0,M.jsx)(n()._H,{id:"offlinePagesTable.columnHeader.owner",defaultMessage:"Owner"}),renderCell:e=>e.userStore?(0,M.jsx)(s(789938).G,{userStores:[e.userStore]}):null,widthData:{width:140},sortable:!1},I={id:"lastSyncTime",headerTitle:(0,M.jsx)(n()._H,{id:"offlinePagesTable.columnHeader.lastSyncTime",defaultMessage:"Last sync time"}),renderCell:e=>e.lastSyncedTime?(0,M.jsx)(s(802321).T,{dateTs:e.lastSyncedTime}):null,widthData:{width:100},sortable:!0},T=[_,C,I];function P(){const[e,t]=(0,i.useState)(""),[s,o]=(0,i.useState)({column:I,sortAscending:!1}),a=(0,l().O7)(),r=(0,n().YB)(),c=(0,d().VK)((()=>{const t=v().Z.state.offlinePages??{};return Object.keys(t).map((s=>{var i;const n=t[s];if(void 0===n)return;const o=new(w().G)(a,{table:p().iU,id:s});if(Boolean(e)&&!function(e){const{pageBlockStore:t,searchFilter:s,environment:i,intl:n}=e,o=t.canRead(),a=(0,u().x)(n),r=(0,b().V)(t,n,i,!0),l=(0,b().NO)(t,n),d=r||l,c=o?d:a;if(void 0===c)return!1;return c.toLowerCase().includes(s.toLowerCase())}({pageBlockStore:o,searchFilter:e,environment:a,intl:r}))return;if((null===(i=j().default.state.currentSpaceStore)||void 0===i?void 0:i.id)!==o.getSpaceId())return;const l=o.getCreatedById();return{id:s,isClickable:!1,pageBlockStore:o,userStore:l?w().U6.createChildStore(o,{table:m().KJ,id:l}):void 0,lastSyncedTime:n.lastDownloadedAt}})).filter(f().$K)}),[a,r,e]),h=function(e,t){let{sortAscending:s}=t;const i=s?"asc":"desc";return g().Xo(e,["lastSyncedTime"],[i])}(c,s);return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(A,{searchFilter:e,setSearchFilter:t}),(0,M.jsx)(Z,{rows:h,sortState:s,onSortStateChanged:o,searchFilter:e})]})}function A(e){const{searchFilter:t,setSearchFilter:s}=e,i=(0,n().YB)(),o=(0,c().yK)((e=>({container:{display:"flex",flexDirection:"row",justifyContent:"end",marginBottom:12},searchIcon:{width:14,height:14,fill:e.mediumIconColor},searchInput:{maxWidth:250,minWidth:100}})),[]);return(0,M.jsx)("div",{style:o.container,children:(0,M.jsx)(S().Z,{placeholder:i.formatMessage({id:"offlineSettingsTab.offlinePagesSection.searchPlaceholder",defaultMessage:"Search by name"}),left:(0,x().R)(o.searchIcon),showClearButton:!0,format:S().B.Small,value:t,onChange:e=>{s(e.target.value)},style:o.searchInput})})}function Z(e){const{rows:t,sortState:s,onSortStateChanged:i,searchFilter:n}=e,o=(0,c().yK)((e=>(0,h().bE)({columnRenderInfo:T,theme:e,containerMarginTop:0})),[]);return(0,M.jsx)(h().Dp,{hideHeaderRowPadding:!0,setStickyHeaderRow:!0,maxHeight:k,columnRenderInfo:T,rows:t,styles:o,renderNoRowsComponent:()=>(0,M.jsx)(H,{isSearching:Boolean(n)}),sortState:s,onSortStateChanged:i})}function H(e){const{isSearching:t}=e;return(0,M.jsx)(y().Z,{isSmall:!0,style:{marginTop:15,marginBottom:40,textAlign:"center"},children:t?(0,M.jsx)(n()._H,{id:"offlineSettingsTab.offlinePagesSection.noPagesFound",defaultMessage:"No pages found"}):(0,M.jsx)(n()._H,{id:"offlineSettingsTab.offlinePagesSection.noPagesAvailable",defaultMessage:"No pages available"})})}function R(){return(0,M.jsxs)(a().ZP,{children:[(0,M.jsx)(r().Z,{large:!0,divider:"full",children:(0,M.jsx)(n()._H,{id:"offlineSettingsTab.offlinePagesSection.title",defaultMessage:"Offline pages"})}),(0,M.jsx)(o().Z,{size:16,isHidden:!0}),(0,M.jsx)(P,{})]})}},436605:(e,t,s)=>{s.d(t,{dv:()=>_,kV:()=>A});var i=s(667294),n=()=>s(219727),o=()=>s(142735),a=()=>s(846550),r=()=>s(317924),l=()=>s(836273),d=()=>s(788860),c=()=>s(497065),u=()=>s(827973),p=()=>s(198829),m=()=>s(18748),g=()=>s(470386),f=()=>s(661641),h=()=>s(661297),S=()=>s(388284),y=()=>s(579807),b=()=>s(527278),x=()=>s(352230),v=()=>s(696347),j=()=>s(778265),w=()=>s(801796),M=s(785893);const k=(0,d().vU)({offlineSettingsTitle:{id:"mobileSettings.offline.title",defaultMessage:"Storage"},offlinePagesStorageAmount:{id:"mobileSettings.offline.pages.storageAmount",defaultMessage:"{amount} GB"}});function _(){const e=(0,n().O7)(),t=(0,a().Fg)(),s=(0,j().P)(),[l,d,u]=function(e){const[t,s]=(0,i.useState)(e);return[t[t.length-1],(0,i.useCallback)((e=>s((t=>[...t,e]))),[]),(0,i.useCallback)((()=>s((e=>e.slice(0,-1)))),[])]}([]),m=(0,i.useCallback)((e=>{void 0!==l?u():c().op(e)}),[l,u]),f=(0,o().VK)((()=>(0,r().w_)(e.TabbedRouterStore.state)),[e]),h=(0,o().VK)((()=>{var e,t;return Boolean("web"===f.type&&("nativeTab"===f.route.name&&"offline"===f.route.tab||"nativeTab"===(null===(e=f.redirectedTo)||void 0===e?void 0:e.route.name)&&"offline"===(null===(t=f.redirectedTo)||void 0===t?void 0:t.route.tab)))}),[f]);return(0,i.useLayoutEffect)((()=>{var t;h&&(null===(t=e.mobileNative)||void 0===t||t.markTransitionReady({type:"offline_settings"}))}),[e.mobileNative,h]),s?(0,M.jsx)("div",{style:{backgroundColor:t.surface.wash},children:(0,M.jsx)(p().Z,{menuType:x().o.Modal,title:b().Z.formatMessage(k.offlineSettingsTitle),left:(0,M.jsx)(g().MobileModalBackButtonV2,{}),onClickLeft:()=>m(e),onCancel:()=>m(e),shouldRenderMobileRefresh:!0,disableDragHandle:!0,isFullScreen:!0,children:"offline_pages"===l?(0,M.jsx)(w().O,{}):(0,M.jsx)(C,{navigate:d})})}):null}function C(e){const t=(0,a().Fg)(),s=(0,a().yK)((e=>({chevronRightIconStyle:{width:12,fill:e.lightIconColor,marginLeft:6},progressBarContainerStyle:{width:"100%",position:"relative",borderRadius:12,backgroundColor:e.tint.regular,height:8,display:"flex",flexDirection:"row",clipPath:"inset(0 round 12px)"},storageItemContainerStyle:{width:"100%",display:"flex",paddingTop:16,gap:8,flexDirection:"column"}})),[]);return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(S().Z,{title:b().Z.formatMessage(k.offlineSettingsTitle),shouldRenderMobileRefresh:!0,children:(0,M.jsx)(m().ZP,{body:(0,M.jsxs)("div",{style:{padding:"16px 0"},children:[(0,M.jsxs)("div",{style:s.progressBarContainerStyle,children:[(0,M.jsx)(I,{proportion:20,color:t.text.bluePrimary}),(0,M.jsx)(I,{proportion:20,color:t.text.blueSecondary}),(0,M.jsx)(I,{proportion:20,color:t.fill.grayPrimary})]}),(0,M.jsxs)("div",{style:s.storageItemContainerStyle,children:[(0,M.jsx)(T,{title:(0,M.jsx)(d()._H,{id:"mobileSettings.offline.storage.otherApps",defaultMessage:"Other apps"}),amount:P(0),color:t.fill.grayPrimary}),(0,M.jsx)(T,{title:(0,M.jsx)(d()._H,{id:"mobileSettings.offline.storage.notion",defaultMessage:"Notion"}),amount:P(0),color:t.text.blueSecondary}),(0,M.jsx)(T,{title:(0,M.jsx)(d()._H,{id:"mobileSettings.offline.storage.notionCache",defaultMessage:"Notion cache"}),amount:P(0),color:t.text.bluePrimary})]})]})})}),(0,M.jsx)(S().Z,{shouldRenderMobileRefresh:!0,children:(0,M.jsx)(u().Z,{focused:!1,title:(0,M.jsx)(d()._H,{id:"mobileSettings.offline.pages.clearCache.callToAction",defaultMessage:"Clear Notion cache"}),onClick:()=>{}})}),(0,M.jsx)(S().Z,{title:(0,M.jsx)(d()._H,{id:"mobileSettings.offline.pages.title",defaultMessage:"Offline pages"}),shouldRenderMobileRefresh:!0,children:(0,M.jsx)(u().Z,{focused:!1,title:(0,M.jsx)(d()._H,{id:"mobileSettings.offline.pages.callToAction",defaultMessage:"View offline pages"}),right:(0,v().o)(s.chevronRightIconStyle),onClick:()=>e.navigate("offline_pages")})})]})}function I(e){const{proportion:t,color:s}=e;return(0,M.jsx)("div",{style:{width:`${t}%`,height:"100%",backgroundColor:s}})}function T(e){const{title:t,amount:s,color:i}=e;return(0,M.jsxs)("div",{style:{display:"flex",gap:10,flexDirection:"row",alignItems:"center"},children:[(0,M.jsx)("div",{style:{borderRadius:"100%",width:16,height:16,backgroundColor:i}}),(0,M.jsx)(f().q,{style:{flex:1},styleName:"Heading-17px/Regular",colorName:"primary",children:t}),(0,M.jsx)(f().q,{style:{flex:"0 1 auto"},styleName:"Heading-17px/Regular",colorName:"tertiary",children:s})]})}function P(e){return b().Z.formatMessage(k.offlinePagesStorageAmount,{amount:e.toFixed(2).padStart(6,"0")})}function A(e){const t=(0,n().O7)(),s=(0,i.useCallback)((()=>{c().c4({environment:t,url:`${l().VP.nativeTab}/offline`})}),[t]),o=(0,a().yK)((e=>({headerLabelStyle:{marginTop:2,width:"80%"},PlainButtonStyle:{marginTop:12,marginBottom:4}})),[]);return(0,M.jsx)(y().Z,{type:"custom",isMobile:!0,title:b().Z.formatMessage(k.offlineSettingsTitle),disableSettingsItemClick:!0,caption:(0,M.jsx)(d()._H,{id:"mobileSettings.offline.description",defaultMessage:"Manage your workspace storage and offline pages."}),shouldHighlight:!1,customButton:(0,M.jsx)(h().Z,{isLarge:!0,style:o.PlainButtonStyle,onClick:s,children:(0,M.jsx)(d()._H,{id:"mobileSettings.offline.cta",defaultMessage:"Manage"})})})}},233126:(e,t,s)=>{s.d(t,{Z:()=>p});s(667294);var i=()=>s(219727),n=()=>s(142735),o=()=>s(788860),a=()=>s(140798),r=()=>s(579807),l=()=>s(345918),d=()=>s(876822),c=()=>s(138390),u=s(785893);function p(e){let{isMobile:t}=e;const s=(0,i().O7)(),p=(0,n().VK)((()=>(0,c().o)()),[]),{isElectron:m}=(0,i().Fy)(),g=(0,n().VK)((()=>{var e,t;return l().g4(s,{spaceView:null===(e=d().default.state.currentSpaceViewStore)||void 0===e?void 0:e.getModel(),space:null===(t=d().default.state.currentSpaceStore)||void 0===t?void 0:t.getModel()})}),[s]),f=m?(0,u.jsx)(o()._H,{id:"pageOnAppStoreSetting.desktopDescription.message",defaultMessage:"Choose what to show when opening new windows, switching workspaces, or launching app without restoring tabs."}):(0,u.jsx)(o()._H,{id:"pageOnAppStoreSetting.description.message",defaultMessage:"Choose what to show when Notion starts or when you switch workspaces."}),h=m?(0,u.jsx)(o()._H,{id:"pageOnAppStoreSetting.title",defaultMessage:"Default page"}):(0,u.jsx)(o()._H,{id:"pageOnAppStoreSetting.title.desktop",defaultMessage:"Open on start"});return(0,u.jsx)(r().Z,{isMobile:t,title:h,caption:f,type:"dropdown",currentOption:g,options:p,onSelectOption:e=>{a().N({userAction:"NotificationsAndPersonalSettings.PageOnAppStartSetting",environment:s,option:e,from:"user_settings"})}})}},218842:(e,t,s)=>{s.d(t,{E:()=>oe,V:()=>re});s(267602),s(653476);var i=s(667294),n=()=>s(219727),o=()=>s(142735),a=()=>s(629719),r=()=>s(788860),l=()=>s(696459),d=()=>s(231077),c=()=>s(76254),u=()=>s(269299),p=()=>s(348141),m=()=>s(702075),g=()=>s(493462),f=()=>s(312578),h=()=>s(253855),S=()=>s(617811),y=()=>s(765513),b=()=>s(113419),x=()=>s(761362),v=()=>s(868614),j=()=>s(579807),w=()=>s(391598),M=()=>s(418372),k=()=>s(148126),_=()=>s(332504),C=()=>s(466970),I=()=>s(436605),T=()=>s(297861),P=()=>s(876822),A=()=>s(725751),Z=()=>s(749826),H=()=>s(324404),R=()=>s(846550),B=()=>s(448768),D=()=>s(319615),N=()=>s(497065),V=()=>s(108714),U=()=>s(661297),O=()=>s(67961),E=()=>s(205228),F=()=>s(656573),L=()=>s(440434),K=()=>s(522323),G=()=>s(838266),q=s(785893);function W(){const{isMac:e,isDesktop:t}=(0,n().Fy)();return(0,o().VK)((()=>t&&e),[e,t])}function z(e){var t;const s=e.environment.device,{isElectron:i,isMac:n,isWindows:a,isDesktop:r}=s,d=void 0!==(null===(t=(0,o().Kw)(A().default).preferences)||void 0===t?void 0:t.isUniversalLinksEnabled);return[r&&(n||a||!1)&&!d?{key:"open-in-desktop-app",renderSettingsItem:()=>(0,q.jsx)(te,{})}:void 0,W()?{key:"open-in-browser",renderSettingsItem:()=>(0,q.jsx)(Q,{})}:void 0,i&&n?{key:"close-browser-tabs",renderSettingsItem:()=>(0,q.jsx)(se,{})}:void 0].filter(l().$K)}function Y(){return(0,q.jsx)(j().Z,{isMobile:!1,caption:(0,q.jsx)(r()._H,{id:"openInBrowserSetting.caption.browser",defaultMessage:'If installed, macOS will open links to Notion in the desktop app, even if this setting is turned off. To disable that behavior, enable "Open Notion links in browser" in your app.'}),type:"custom",customButton:(0,q.jsx)(U().Z,{onClick:()=>{window.open(B().NV({httpUrl:(0,F().H)(window.location.href),protocol:E().default.protocol}))},children:(0,q.jsx)(r()._H,{id:"openInBrowserSetting.button",defaultMessage:"Set in app"})})})}function Q(){const e=(0,n().Fy)(),{isElectron:t,isMac:s}=e,a=W(),l=(0,o().VK)((()=>{var e;return null===(e=A().default.state.preferences)||void 0===e?void 0:e.isUniversalLinksEnabled}),[]),c=(0,i.useCallback)((()=>{const e=!l;d().electronAppFeatures.setPreference("isUniversalLinksEnabled",e)}),[l]);if(!t&&a)return(0,q.jsx)(Y,{});if(!t||!s||void 0===l)return null;const u=(0,q.jsx)(r()._H,{id:"openInDesktopAppSettings.universalLinks.title",defaultMessage:"Open Notion links in browser"}),p=(0,q.jsx)(r()._H,{id:"openInDesktopAppSettings.universalLinks.caption",defaultMessage:"By default, macOS will open links to Notion in the desktop app. Turning this setting on will redirect links to your browser instead."});return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(j().Z,{isMobile:!1,title:u,caption:p,type:"toggle",isOn:!l,onToggle:c}),(0,q.jsx)($,{show:!1===l})]})}function $(){let{show:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{show:!1};const t=(0,R().yK)((e=>({buttonStyle:{display:"flex",alignItems:"center",paddingLeft:12,paddingRight:12,paddingTop:2,paddingBottom:2,borderColor:e.outlineButtonBorder,border:1,borderWidth:1,borderRadius:4,height:32,gap:4,background:e.importOptionsButtonBackground},titleStyle:{fontSize:12,fontWeight:"medium",font:"SF Pro",color:e.text.primary,height:18},divTitleStyle:{color:e.text.secondary,display:"flex",background:e.fill.lightGraySecondary,width:"100%",padding:"16px",justifyContent:"center",alignItems:"center",gap:12,borderRadius:8,borderColor:e.fill.lightGraySecondary},divStyle:{display:"flex",alignItems:"center",marginTop:10,minWidth:0,width:"100%",gap:10},UiLabelStyle:{color:e.text.secondary,font:"SF Pro",fontSize:12,whiteSpace:"normal"}})),[]);return e?(0,q.jsx)("div",{style:t.divStyle,children:(0,q.jsxs)("div",{style:t.divTitleStyle,children:[(0,q.jsx)(O().Z,{isSecondaryColor:!0,style:t.UiLabelStyle,children:(0,q.jsx)(r()._H,{id:"openInDesktopAppSettings.universalLinks.guide.caption",defaultMessage:'Notion will redirect links to your browser. You may also want to prevent your browser from opening Notion links in the desktop app. To use Notion in your browser only, ensure that the setting "Open links in desktop app" is turned off in your browser.'})}),(0,q.jsx)("div",{children:(0,q.jsx)("div",{style:{display:"flex"},children:(0,q.jsx)("div",{style:t.titleStyle,children:(0,q.jsx)(J,{})})})})]})}):null}function J(){const e=(0,n().O7)();return(0,q.jsx)(V().Z,{href:(0,F().H)(window.location.href),external:!0,onClick:()=>{D().rZ(e)},children:(0,q.jsx)(U().Z,{children:(0,q.jsx)(r()._H,{id:"openInDesktopAppSetting.desktopConfigureButton",defaultMessage:"Set in browser"})})})}function X(){return(0,q.jsx)(r()._H,{id:"openInDesktopAppSetting.title",defaultMessage:"Open links in desktop app"})}function ee(){const e=void 0!==(0,o().VK)((()=>{var e;return null===(e=A().default.state.preferences)||void 0===e?void 0:e.isUniversalLinksEnabled}),[]);let t=(0,q.jsx)(X,{}),s=(0,q.jsx)(r()._H,{id:"openInDesktopAppSetting.desktopConfigureCaption",defaultMessage:"You can configure browser links to open in this app."});return e&&(t=(0,q.jsx)(r()._H,{id:"openInDesktopAppSetting.title.universal",defaultMessage:"Open browser links in desktop app"}),s=(0,q.jsx)(r()._H,{id:"openInDesktopAppSetting.desktopConfigureCaption.universal",defaultMessage:"You can also configure your browser to automatically redirect Notion links to the app."})),(0,q.jsx)(j().Z,{isMobile:!1,title:t,caption:s,type:"custom",customButton:(0,q.jsx)(J,{})})}function te(){const e=(0,n().O7)(),{isElectron:t,isMac:s}=(0,n().Fy)(),i=(0,o().Kw)(K().Z),a=(0,q.jsx)(X,{}),l=(0,o().VK)((()=>G().default.state.highlightedSetting===G().R.OpenInDesktopApp),[]),d=(0,L().e)();if(t)return(0,q.jsx)(ee,{});const c=s?"macOS":"Windows";return(0,q.jsx)(j().Z,{isMobile:!1,title:a,caption:(0,q.jsx)(r()._H,{id:"openInDesktopAppSetting.description.messageWindows",defaultMessage:"You must have the <desktopAppLink>{platform} app</desktopAppLink> installed.",values:{desktopAppLink:function(){for(var t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return(0,q.jsx)(y().Z,{external:!0,onClick:t=>{d.current&&(N().c4({environment:e,url:d.current,openInNew:"tab"}),t.stopPropagation())},children:s})},platform:c}}),type:"toggle",isOn:"always"===i,onToggle:()=>{const t="always"===i?"never":"always";K().Z.setState(t),"always"===t&&N().RX({url:(0,F().W)(window.location.href),environment:e}),D().wz(e,{toggled_to:"always"===t?"on":"off"})},shouldHighlight:l})}function se(){const{isElectron:e,isMac:t}=(0,n().Fy)(),s=(0,o().VK)((()=>{var e;return null===(e=A().default.state.preferences)||void 0===e?void 0:e.isClosingBrowserTabs}),[]),a=(0,i.useCallback)((()=>{const e=!s;d().electronAppFeatures.setPreference("isClosingBrowserTabs",e)}),[s]);if(!e||!t||void 0===s)return null;const l=(0,q.jsx)(r()._H,{id:"openInDesktopAppSettings.closeBrowserTabs.title",defaultMessage:"Close redirecting browser tabs"}),c=(0,q.jsx)(r()._H,{id:"openInDesktopAppSettings.closeBrowserTabs.caption",defaultMessage:'When opening links in the desktop app, close "Redirecting to your Notion app..." browser tabs.'});return(0,q.jsx)(j().Z,{isMobile:!1,title:l,caption:c,type:"toggle",isOn:s,onToggle:a})}var ie=()=>s(297444),ne=()=>s(233126);function oe(e){let{isPhone:t,isMobileNative:s,showOfflineSettings:i,passwordRequestStore:n,userEmailDomainSettings:o,billingData:r,accountSettings:d}=e;const c=s&&(0,a().TK)(r),u=(0,_().d)(),p=!(t&&(0,T().Y)("supportsNativeHome")),f=Z().default.checkGate({gateName:"block_attribution"}),S=s&&Z().default.checkGate({gateName:"mobile_open_links_in_external_browser"});return[{key:"password",renderSettingsItem:()=>(0,q.jsx)(le,{passwordRequestStore:n,billingData:r})},Z().default.checkGate({gateName:"enable-passkey-settings-on-mobile"})?{key:"passkeys",renderSettingsItem:()=>(0,q.jsx)(b().Z,{samlEnforced:d.isSamlEnforced,hasPasskeys:d.hasPasskeys})}:void 0,{key:"appearance",renderSettingsItem:()=>(0,q.jsx)(de,{isMobile:!0})},S?{key:"open-external-links",renderSettingsItem:()=>(0,q.jsx)(ce,{})}:void 0,p?{key:"page-on-app-start",renderSettingsItem:()=>(0,q.jsx)(ne().Z,{isMobile:!0})}:void 0,f?{key:"block-attribution",renderSettingsItem:()=>(0,q.jsx)(ue,{isMobile:!0})}:void 0,c?{key:"subscription",renderSettingsItem:()=>(0,q.jsx)(w().y,{})}:void 0,{key:"user-consent",renderSettingsItem:()=>(0,q.jsx)(M().Z,{emailDomainSettings:o.settings})},{key:"calendar",renderSettingsItem:()=>(0,q.jsx)(m().Z,{})},u?{key:"experiments",renderSettingsItem:()=>(0,q.jsx)(h().P,{})}:void 0,i&&s?{key:"offline",renderSettingsItem:()=>(0,q.jsx)(I().kV,{})}:void 0,{key:"spaceInfo",renderSettingsItem:()=>(0,q.jsx)(ae,{})},{key:"deleteAccount",renderSettingsItem:()=>(0,q.jsx)(g().Z,{userEmailDomainSettings:o})}].filter(l().$K)}function ae(){const e=(0,o().VK)((()=>P().default.state.currentSpaceStore),[]);return e?(0,q.jsxs)("div",{children:[(0,q.jsx)(v().Z,{children:(0,q.jsx)(r()._H,{id:"mobileSettings.spaceInfo.title",defaultMessage:"Workspace information"})}),(0,q.jsx)(S().H,{spaceStore:e,showDomain:!0})]}):null}function re(e){var t;const{environment:s}=e,{isElectron:i,isMac:n}=s.device,a=(0,C().E)("block_attribution"),r=(0,o().Kw)(A().default),d=r.isQuickSearchSupported,c=Boolean(null===(t=r.preferences)||void 0===t?void 0:t.isQuickSearchEnabled),u=r.isMenuBarIconSupported,p=r.isNewTabSearchSupported,m=i&&d,g=i&&d&&c,f=i&&n&&u&&c;return[{key:"appearance",renderSettingsItem:()=>(0,q.jsx)(de,{isMobile:!1})},i&&p?{key:"page-on-tab-start",renderSettingsItem:()=>(0,q.jsx)(pe,{})}:void 0,...z(e),m?{key:"quick-search-enabled",renderSettingsItem:()=>(0,q.jsx)(me,{})}:void 0,g?{key:"quick-search-shortcut",renderSettingsItem:()=>(0,q.jsx)(ge,{})}:void 0,g?{key:"notion-ai-shortcut",renderSettingsItem:()=>(0,q.jsx)(fe,{})}:void 0,f?{key:"menu-bar-icon-enabled",renderSettingsItem:()=>(0,q.jsx)(he,{})}:void 0,a?{key:"block-attribution",renderSettingsItem:()=>(0,q.jsx)(ue,{isMobile:!1})}:void 0].filter(l().$K)}function le(e){let{billingData:t,passwordRequestStore:s}=e;const i=(0,a().ps)(null==t?void 0:t.subscription,"student"),n=(0,o().VK)((()=>{var e;return(null===(e=P().default.state.currentUserStore)||void 0===e?void 0:e.getEmail())??""}),[]),{hasPassword:r,canConfigurePassword:l,isSamlEnforced:d,mfaStatus:c,error:u,ready:p}=(0,o().VK)((()=>({...s.state.result,error:s.state.error,ready:s.state.result})),[s]);return u?(0,q.jsx)(x().Z,{hasPassword:!1,hasPasswordActions:!1,samlEnforced:!1,mfaStatus:"loading",email:n,onReloadSettings:()=>s.refresh(),isError:!0}):p?(0,q.jsx)(x().Z,{hasPassword:r,hasPasswordActions:l,samlEnforced:d,mfaStatus:c,isEducationPlan:i,email:n,onReloadSettings:()=>s.refresh(),isError:!1}):(0,q.jsx)(f().Z,{})}function de(e){let{isMobile:t}=e;const s=(0,n().O7)(),i=(0,o().VK)((()=>c().VZ(s)),[s]);return(0,q.jsx)(j().Z,{isMobile:t,title:(0,q.jsx)(r()._H,{id:"appearanceSettings.title",defaultMessage:"Appearance"}),caption:(0,q.jsx)(r()._H,{id:"appearanceSettings.description.message",defaultMessage:"Customize how Notion looks on your device."}),type:"dropdown",currentOption:i,options:[{key:"system",label:(0,q.jsx)(r()._H,{id:"appearanceSetting.system.label",defaultMessage:"Use system setting"})},{key:"light",label:(0,q.jsx)(r()._H,{id:"appearanceSetting.light.label",defaultMessage:"Light"})},{key:"dark",label:(0,q.jsx)(r()._H,{id:"appearanceSetting.dark.label",defaultMessage:"Dark"})}],onSelectOption:e=>{c().Y7(e)}})}function ce(){const e=(0,o().VK)((()=>H().Z.state??"external"),[]);return(0,q.jsx)(j().Z,{isMobile:!0,title:(0,q.jsx)(r()._H,{id:"openExternalLinksSettings.title",defaultMessage:"External links"}),caption:(0,q.jsx)(r()._H,{id:"openExternalLinksSettings.description.message",defaultMessage:"Choose how to open links on this device."}),type:"dropdown",currentOption:e,options:[{key:"in-app",label:(0,q.jsx)(r()._H,{id:"openExternalLinksSettings.inAppBrowser.title",defaultMessage:"In-app browser"})},{key:"external",label:(0,q.jsx)(r()._H,{id:"openExternalLinksSettings.externalBrowser.title",defaultMessage:"System default browser"})}],onSelectOption:e=>{H().Z.setState(e)}})}function ue(e){let{isMobile:t}=e;const s=(0,n().O7)(),a=(0,o().VK)((()=>P().default.state.currentUserSettingsStore),[]),l=(0,o().VK)((()=>{var e;return(null==a||null===(e=a.getSettings())||void 0===e?void 0:e.show_block_attribution)??!0}),[a]),d=(0,i.useCallback)((()=>{a&&u().createAndCommit({userAction:"NotificationsAndPersonalSettings.onToggle",environment:s,canUndo:!0,perform:e=>{p().d2({userSettingsStore:a,data:{show_block_attribution:!l},transaction:e})}})}),[a,l,s]);return(0,q.jsx)(j().Z,{isMobile:t,title:(0,q.jsx)(r()._H,{id:"attributionSetting.title",defaultMessage:"Block attribution"}),caption:(0,q.jsx)(r()._H,{id:"attributionSetting.description.message",defaultMessage:"See your teammates’ initials to the left of blocks they created or edited."}),type:"toggle",isOn:l,onToggle:d})}function pe(){const{currentPreference:e}=(0,o().VK)((()=>{var e;const t=A().default.state;return{currentPreference:Boolean(null===(e=t.preferences)||void 0===e?void 0:e.isNewTabSearchEnabled)}}),[]),t=(0,i.useCallback)((()=>{const t=!e;d().electronAppFeatures.setPreference("isNewTabSearchEnabled",t)}),[e]),s=(0,q.jsx)(r()._H,{id:"desktopNewTabSearch.toggle.title",defaultMessage:"New Tab Search"}),n=(0,q.jsx)(r()._H,{id:"desktopNewTabSearch.toggle.caption",defaultMessage:'Immediately search for and navigate to a specific page when you open a new tab. When turned off, new tabs will follow your "Default page" settings. <inlinelink>Learn more</inlinelink>.',values:{inlinelink:e=>(0,q.jsx)(y().Z,{external:!0,href:(0,k().UY)("guides.whyDesktop"),onClick:e=>{e.stopPropagation()},children:e})}});return(0,q.jsx)(j().Z,{isMobile:!1,type:"toggle",title:s,caption:n,isOn:e,onToggle:t})}function me(){const{currentPreference:e}=(0,o().VK)((()=>{var e;const t=A().default.state;return{currentPreference:Boolean(null===(e=t.preferences)||void 0===e?void 0:e.isQuickSearchEnabled)}}),[]),t=(0,i.useCallback)((()=>{const t=!e;d().electronAppFeatures.setPreference("isQuickSearchEnabled",t)}),[e]),s=(0,q.jsx)(r()._H,{id:"desktopQuickSearch.toggle.title",defaultMessage:"Use Command Search"}),n=(0,q.jsx)(r()._H,{id:"desktopQuickSearch.toggle.caption",defaultMessage:"Open Notion AI and search anywhere with a shortcut, even when your Notion app isn't active."});return(0,q.jsx)(j().Z,{isMobile:!1,type:"toggle",title:s,caption:n,isOn:e,onToggle:t})}function ge(){const{quickSearchShortcut:e,notionAiShortcut:t}=(0,o().VK)((()=>{const e=A().default.state.preferences;return{quickSearchShortcut:null==e?void 0:e.quickSearchShortcut,notionAiShortcut:null==e?void 0:e.notionAiShortcut}}),[]),{isMac:s}=(0,n().Fy)(),a=(0,i.useCallback)((e=>{d().electronAppFeatures.setPreference("quickSearchShortcut",e)}),[]),l=(0,q.jsx)(r()._H,{id:"desktopQuickSearch.shortcut.title",defaultMessage:"Command Search shortcut"}),c=(0,q.jsx)(r()._H,{id:"desktopQuickSearch.shortcut.caption",defaultMessage:"Customize the shortcut used to trigger Command Search."});return(0,q.jsx)(j().Z,{isMobile:!1,type:"custom",title:l,caption:c,disableSettingsItemClick:!0,customButton:(0,q.jsx)("div",{children:(0,q.jsx)(ie().nx,{shortcut:e,onChange:a,conflictingShortcuts:t?[t]:[],isMac:s})})})}function fe(){const{notionAiShortcut:e,commandSearchShortcut:t}=(0,o().VK)((()=>{const e=A().default.state.preferences;return{notionAiShortcut:null==e?void 0:e.notionAiShortcut,commandSearchShortcut:null==e?void 0:e.quickSearchShortcut}}),[]),s=(0,i.useCallback)((e=>{d().electronAppFeatures.setPreference("notionAiShortcut",e)}),[]),{isMac:a}=(0,n().Fy)(),l=(0,q.jsx)(r()._H,{id:"desktopNotionAi.shortcut.title",defaultMessage:"Notion AI shortcut"}),c=(0,q.jsx)(r()._H,{id:"desktopNotionAi.shortcut.caption",defaultMessage:"Customize the shortcut to trigger Notion AI, if your workspace has AI enabled."});return(0,q.jsx)(j().Z,{isMobile:!1,type:"custom",title:l,caption:c,disableSettingsItemClick:!0,customButton:(0,q.jsx)("div",{children:(0,q.jsx)(ie().nx,{shortcut:e,onChange:s,conflictingShortcuts:t?[t]:[],isMac:a})})})}function he(){const{isMenuBarIconEnabled:e}=(0,o().VK)((()=>{var e;const t=A().default.state;return{isMenuBarIconEnabled:Boolean(null===(e=t.preferences)||void 0===e?void 0:e.isMenuBarIconEnabled)}}),[]),t=(0,i.useCallback)((()=>{d().electronAppFeatures.setPreference("isMenuBarIconEnabled",!e)}),[e]),s=(0,q.jsx)(r()._H,{id:"menuBarIconMacSetting.toggle.title",defaultMessage:"Show Notion in menu bar"}),n=(0,q.jsx)(r()._H,{id:"menuBarIconMacSetting.toggle.caption",defaultMessage:"Access Notion faster from the top right of your screen."});return(0,q.jsx)(j().Z,{isMobile:!1,type:"toggle",title:s,caption:n,isOn:e,onToggle:t})}},18729:(e,t,s)=>{s.d(t,{Z:()=>vs});s(670560),s(122556),s(582845),s(250570),s(533019),s(721473),s(788208),s(22624),s(267602),s(653476),s(470928),s(241792);var i=s(667294),n=()=>s(219727),o=()=>s(142735),a=()=>s(846550),r=()=>s(619186),l=()=>s(801812),d=()=>s(956057),c=()=>s(530980),u=()=>s(741633),p=()=>s(933868),m=()=>s(255933),g=()=>s(989478),f=()=>s(657120),h=()=>s(788860),S=()=>s(568017),y=()=>s(513670),b=()=>s(696459),x=()=>s(707513),v=()=>s(491927),j=()=>s(912732),w=()=>s(155055),M=()=>s(395362),k=()=>s(824462),_=()=>s(959137),C=()=>s(308186),I=()=>s(528918),T=()=>s(784234),P=()=>s(224597),A=()=>s(677181),Z=()=>s(269299),H=()=>s(154186),R=()=>s(827973),B=()=>s(448419),D=()=>s(666414),N=()=>s(1910),V=()=>s(291198),U=()=>s(312578),O=()=>s(198829),E=()=>s(255577),F=()=>s(661297),L=()=>s(906651),K=()=>s(388284),G=()=>s(777346),q=()=>s(471645),W=()=>s(67961),z=()=>s(907099),Y=()=>s(563701),Q=()=>s(467806),$=()=>s(469203),J=()=>s(943620),X=()=>s(365766),ee=s(785893);function te(e){let{spaceStore:t,groupIds:s,onGroupClick:i}=e;const n=(0,h().YB)(),r=(0,a().yK)((e=>({title:{marginRight:8,color:0===s.length?e.lightTextColor:void 0},defaultGroupIconPill:{height:14,width:14,color:e.mediumTextColor,fill:"currentColor"},untitled:{color:e.lightTextColor}})),[s]),l=(0,o().VK)((()=>s.map((e=>({key:e,render:s=>{const i=Q().Z.state.permissionGroupsAndMemberCounts.find((t=>t.group.group_id===e));if(!i)return null;const o=z().kF({intl:n,groupName:i.group.name});return(0,ee.jsx)(R().Z,{icon:(0,ee.jsx)(J().Z,{disabled:!0,icon:i.group.icon&&t?{pointer:t.pointer,icon:i.group.icon}:void 0,size:18,isEmptyPage:!1,title:o,defaultIcon:(0,Y().O)(r.defaultGroupIconPill)}),title:(0,ee.jsx)(W().Z,{style:i.group.name?void 0:r.untitled,children:(0,ee.jsx)($().s,{style:{maxWidth:200},children:o})}),caption:(0,ee.jsx)(h()._H,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"groupsDropdownForMember.numMembers",values:{numMembers:i.memberCount}}),inline:!0,...s})},action:i})))),[s,n,i,t,r.defaultGroupIconPill,r.untitled]);return(0,ee.jsx)(X().Nz,{title:(0,ee.jsx)(W().Z,{style:r.title,children:s&&0!==s.length?(0,ee.jsx)(h()._H,{id:"groupsDropdownForMember.groupsCount.label",defaultMessage:"{numberOfGroups, plural, one {{numberOfGroups} group} other {{numberOfGroups} groups}}",values:{numberOfGroups:s.length}}):(0,ee.jsx)(h()._H,{id:"groupsDropdownForMember.groupsCountNone.label",defaultMessage:"None"})}),items:l,disabled:!s||0===s.length})}var se=()=>s(506347),ie=()=>s(396136),ne=()=>s(497065),oe=()=>s(429725),ae=()=>s(352230),re=()=>s(940823),le=()=>s(615634),de=()=>s(826955),ce=()=>s(18281),ue=()=>s(897257),pe=()=>s(18748),me=()=>s(838367),ge=()=>s(92175),fe=()=>s(231219),he=()=>s(654133);const Se=function(e){let{store:t,guestStore:r,isSubscribed:l,guest:d,hideActionButtons:c}=e;const u=(0,a().Fg)(),p=(0,n().O7)(),m=(0,o().qz)(void 0,s(529048).Z),g=(0,i.useCallback)((()=>(0,ee.jsx)(ye,{store:t,guestStore:r,isSubscribed:l,guest:d,hideActionButtons:c,buttonPopupStore:m})),[t,r,l,d,c,m]),{device:f}=p;return(0,o().VK)((()=>{d.guestPageIds.map((e=>{de().G.createChildStore(t,{table:ie().iU,id:e}).load()}))}),[t,d]),0===d.guestPageIds.length?(0,ee.jsx)(ge().Z,{disabled:!0,children:(0,ee.jsx)(h()._H,{id:"guestPagesPopup.permissionsForUserGuest.label",defaultMessage:"Guest"})}):(0,ee.jsx)(B().ZP,{popupType:f.isMobile?B().Z4.SlideUp:B().Z4.Popup,renderOrigin:e=>(0,ee.jsxs)(ge().Z,{...e,children:[(0,ee.jsx)(h()._H,{id:"guestPagesPopup.page",defaultMessage:"{numberOfAccessiblePages, plural, one {{numberOfAccessiblePages} page} other {{numberOfAccessiblePages} pages}}",values:{numberOfAccessiblePages:d.guestPageIds.length}}),(0,le().i)({width:10,marginLeft:4,fill:u.lightIconColor})]}),buttonPopupStore:m,render:g})};function ye(e){let{store:t,guestStore:s,isSubscribed:a,guest:r,hideActionButtons:l,buttonPopupStore:d}=e;const c=(0,n().O7)(),u=(0,i.useCallback)((()=>function(e,t,s,i){C().vC({showCancel:!0,keepFocus:!1,message:(0,ee.jsx)(h()._H,{id:"guestPagesPopup.removeGuestModal.confirmationMessage",defaultMessage:"Are you sure you want to remove this person? They will lose access to all shared pages."}),items:[{label:(0,ee.jsx)(h()._H,{id:"guestPagesPopup.removeGuestModal.removeButton.label",defaultMessage:"Remove"}),color:"red",onAccept:async()=>{i.setState({...i.state,open:!1}),await A().w({environment:e,guestUserStore:s,store:t})}}]})}(c,t,s,d)),[c,t,s,d]),p=(0,i.useCallback)((()=>async function(e,t,s,i,n){const o=i?"read_and_write":"editor";n.setState({...n.state,open:!1}),await A().s({environment:e,guestUserStore:s,role:o,store:t,isConvertToAdmin:!i,origin:"guest_pages_popup"})}(c,t,s,a,d)),[c,t,s,a,d]),{device:m}=c,g=(0,o().VK)((()=>t.canEditMembership()),[t]),f=r.guestPageIds.map((e=>{const s=de().G.createChildStore(t,{table:ie().iU,id:e}),i={key:e,render:e=>(0,ee.jsx)(fe().Z,{...e,store:s,placeholder:(0,ee.jsx)(h()._H,{id:"guestPagesPopup.privatePagePlaceholder",defaultMessage:"Private page"})}),action:()=>{const s=de().G.createChildStore(t,{table:ie().iU,id:e}),i=(0,oe().ZP)({store:s,fullyQualified:!1,pageVisitSource:se().tY.LinkInPage});ne().c4({environment:c,url:i,openInNew:"tab"})}};return i}));let S;S=m.isMobile?{menuType:ae().o.ActionSheet}:{menuType:ae().o.Popup,width:300};const y=(0,re().Q)(),b=(0,o().VK)((()=>function(){const e=ue().subscriptionDataStoreInstance.state;return Boolean(e&&(0,ce().YK)(e))}()),[]);let x;y&&(x=(0,ee.jsx)(he().Z,{renderTooltip:()=>b?(0,ee.jsx)(h()._H,{id:"guestPagesPopup.addMemberPermissionButton.tooltip",defaultMessage:"This guest will become a member of this workspace."}):(0,ee.jsx)(h()._H,{id:"guestPagesPopup.addAdminPermissionButton.tooltip",defaultMessage:"This guest will become an admin of this workspace."}),render:e=>(0,ee.jsx)(F().Z,{isLarge:!0,onClick:p,...e,children:b?(0,ee.jsx)(h()._H,{id:"guestPagesPopup.addMemberPermissionButton.label",defaultMessage:"Convert to member"}):(0,ee.jsx)(h()._H,{id:"guestPagesPopup.addAdminPermissionButton.label",defaultMessage:"Convert to admin"})})}));const v=!l&&g;return(0,ee.jsxs)(O().Z,{...S,children:[v&&(0,ee.jsx)(pe().ZP,{title:(0,ee.jsxs)("div",{style:{paddingTop:12,paddingBottom:8,display:"flex",alignItems:"flex-start"},children:[x,(0,ee.jsx)(he().Z,{renderTooltip:()=>(0,ee.jsx)(h()._H,{id:"guestPagesPopup.removeGuestButton.tooltip",defaultMessage:"This guest will be removed from all pages in this Workspace."}),render:e=>(0,ee.jsx)(F().Z,{isLarge:!0,isRed:!0,style:{marginLeft:x?8:0},onClick:u,...e,children:(0,ee.jsx)(h()._H,{id:"guestPagesPopup.removeGuestButton.label",defaultMessage:"Remove"})})})]})}),v&&(0,ee.jsx)(me().Z,{title:1===f.length?(0,ee.jsx)(h()._H,{id:"guestPagesPopup.guestHasAccessToSinglePageCaption",defaultMessage:"This guest can access this page:"}):(0,ee.jsx)(h()._H,{id:"guestPagesPopup.guestHasAccessToMultiplePagesCaption",defaultMessage:"This guest can access these pages:"})}),(0,ee.jsx)(E().Z,{type:E().i.Vertical,initialFocus:0,sections:[{key:"pages",render:e=>(0,ee.jsx)(K().Z,{...e}),items:f}]})]})}var be=()=>s(360964),xe=()=>s(765513),ve=()=>s(370005),je=()=>s(504117),we=()=>s(868614),Me=()=>s(512220),ke=()=>s(819792),_e=()=>s(378907),Ce=()=>s(527278),Ie=()=>s(91502),Te=()=>s(270895),Pe=()=>s(876822),Ae=()=>s(555813),Ze=()=>s(383694),He=()=>s(149809),Re=()=>s(740046);const Be=(0,h().vU)({filterTeams:{defaultMessage:"Filter teamspaces…",id:"teamsDropdownForMember.filterForTeams.placeholder"}});function De(e){const{teamGuest:t}=e,s=(0,n().O7)(),i=(0,o().VK)((()=>Pe().default.state.currentSpaceStore),[]);if(!i)return null;if(0===t.guestPageIds.length)return null;const a=[{key:"pages",render:e=>(0,ee.jsx)(K().Z,{...e}),items:t.guestPageIds.map((e=>{const t=de().G.createChildStore(i,{table:ie().iU,id:e}),n={key:e,render:e=>(0,ee.jsx)(fe().Z,{...e,store:t,placeholder:(0,ee.jsx)(h()._H,{id:"guestPagesPopup.privatePagePlaceholder",defaultMessage:"Private page"})}),action:()=>{const t=de().G.createChildStore(i,{table:ie().iU,id:e}),n=(0,oe().ZP)({store:t,fullyQualified:!1,pageVisitSource:se().tY.LinkInPage});ne().c4({environment:s,url:n,openInNew:"tab"})}};return n}))}],r={menuType:ae().o.Popup,minWidth:300,maxWidth:350,maxHeight:300,header:t.guestPageIds.length>0&&(0,ee.jsx)(W().Z,{isSmall:!0,style:{color:S().ZP.regularTextColor,marginLeft:15,marginRight:15,paddingTop:6},children:(0,ee.jsx)(h()._H,{id:"guestpagesforteamguest.header",defaultMessage:"Pages"})})};return(0,ee.jsx)(O().Z,{...r,children:(0,ee.jsx)(E().Z,{type:E().i.Vertical,initialFocus:void 0,sections:a})})}function Ne(e){const t=(0,n().O7)(),[s,r]=(0,i.useState)(""),l=(0,i.useCallback)((e=>Ae().RF({environment:t,teamId:e,tab:Te().a.Members,from:"teams_dropdown_for_team_guest"})),[t]),d=(0,a().yK)((()=>({teamMenuItem:{fontWeight:400,maxWidth:180}})),[]),c=(0,o().VK)((()=>[{key:"teams for team guest",render:e=>(0,ee.jsx)(K().Z,{...e}),actions:e.teamStores.map((e=>{const t={key:e.id,displayName:e.getName(),analyticsName:e.getName()||"team_unknown",searchName:e.getName(),render:t=>{var s;return(0,ee.jsx)(R().Z,{icon:(0,ee.jsx)(Ze().p,{disabled:!0,store:e}),title:(0,ee.jsx)(W().Z,{style:d.teamMenuItem,children:e.getName()}),caption:(0,ee.jsx)(h()._H,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"teamsDropdownForMember.numMembers",values:{numMembers:(null===(s=(0,Ie().oT)(e))||void 0===s?void 0:s.memberCountWithGuests)??0}}),inline:!0,...t})},action:()=>{l(e.id)},closeParentMenu:!1};return t}))}]),[e.teamStores,d.teamMenuItem,l]),u=(0,ee.jsx)(K().Z,{isInput:!0,children:(0,ee.jsx)(Re().ZP,{value:s,onChange:(0,i.useCallback)((e=>{r(e.target.value)}),[]),focus:!0,focusAfterAnimation:!0,placeholder:Ce().Z.formatMessage(Be.filterTeams)})}),p={menuType:ae().o.Popup,maxWidth:350,maxHeight:300,header:e.teamStores.length>5?u:void 0};return(0,ee.jsx)(O().Z,{...p,children:(0,ee.jsx)(He().Z,{filter:s,context:{blocks:[],environment:t,publicEditMode:void 0},initialFocus:0,sections:c})})}const Ve=function(e){const{teamGuest:t}=e,i=(0,o().VK)((()=>s(700696).default.state.teams),[]),n=(0,o().VK)((()=>i.filter((e=>e.isMemberOrGuest(t.userId,new Set)))),[i,t]),r=(0,a().yK)((e=>({button:{marginRight:8},noTeams:{marginRight:8,color:e.lightTextColor},chevron:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]),l=n.length??0;return(0,ee.jsx)(B().ZP,{popupType:B().Z4.Popup,renderOrigin:e=>(0,ee.jsx)(ge().Z,{disabled:0===l,style:0===l?r.noTeams:r.button,...e,children:0===l?(0,ee.jsx)(h()._H,{id:"teamsDropdownForTeamGuest.teamsCountNone.label",defaultMessage:"No access"}):(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(h()._H,{id:"teamsDropdownForMember.teamsCount.label",defaultMessage:"{numberOfTeams, plural, one {{numberOfTeams} teamspace} other {{numberOfTeams} teamspaces}}",values:{numberOfTeams:l}}),(0,le().i)(r.chevron)]})}),render:()=>(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(Ne,{teamGuest:t,teamStores:n}),(0,ee.jsx)(D().Z,{size:"100%"}),(0,ee.jsx)(De,{teamGuest:t})]})})};var Ue=()=>s(825910),Oe=()=>s(837341),Ee=()=>s(884749),Fe=()=>s(286338),Le=()=>s(572623),Ke=()=>s(122479),Ge=()=>s(148126),qe=()=>s(345918),We=()=>s(623596),ze=()=>s(314379),Ye=()=>s(568741),Qe=()=>s(270820),$e=()=>s(672788),Je=()=>s(123398),Xe=()=>s(936879),et=()=>s(421736),tt=()=>s(72950),st=()=>s(838266),it=()=>s(219099),nt=()=>s(621099),ot=()=>s(576387),at=()=>s(741846),rt=()=>s(139543),lt=()=>s(815277),dt=()=>s(363832),ct=()=>s(941832),ut=()=>s(754918),pt=()=>s(458196),mt=()=>s(141455),gt=()=>s(174912),ft=()=>s(489434),ht=()=>s(872423),St=()=>s(237427),yt=()=>s(630029),bt=()=>s(253664),xt=()=>s(809807),vt=()=>s(202937),jt=()=>s(196234),wt=()=>s(35724),Mt=()=>s(167705),kt=()=>s(24746),_t=()=>s(186647),Ct=()=>s(589515),It=()=>s(749826),Tt=()=>s(788396),Pt=()=>s(14328),At=()=>s(663773),Zt=()=>s(661769),Ht=()=>s(550649);const Rt={maxWidth:275,borderRadius:30},Bt={marginTop:8},Dt={maxWidth:160},Nt=50;function Vt(e){const{store:t,currentTab:s,inviteLinkCode:i,members:n,guests:o,spacePermissionsSettingsStore:a,recentlyRemovedMembersStore:r,accessRequestRenderValues:l}=e;return s===tt().Q.Members?(0,ee.jsx)(ps,{isMobile:!1,store:t,inviteLinkCode:i,spacePermissionsSettingsStore:a,recentlyRemovedMembersStore:r,members:n}):s===tt().Q.Guests?(0,ee.jsx)(ms,{store:t,spacePermissionsSettingsStore:a,recentlyRemovedMembersStore:r,guests:o}):s===tt().Q.Groups?(0,ee.jsx)(is,{store:t,spacePermissionsSettingsStore:a}):s===tt().Q.Reprovisioning?(0,ee.jsx)(Ut,{store:t}):s===tt().Q.Requests?(0,ee.jsx)(ht().ZP,{spaceStore:t,accessRequestRenderValues:l}):void(0,b().t1)(s)}function Ut(e){let{store:t}=e;const s=(0,a().yK)((()=>({label:{width:"80%"}})),[]);return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(W().Z,{isMultiline:!0,style:s.label,children:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.reprovisioningTab.workspaceOwner.caption",defaultMessage:"View users that were previously part of the workspace in the past 30 days. Only workspace owners can see this."})}),(0,ee.jsx)(W().Z,{isMultiline:!0,style:s.label,children:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.reprovisioningTab.workspaceOwner.caption.disclaimer",defaultMessage:"Only users who had private pages will appear here."})}),(0,ee.jsx)(D().Z,{size:24,isHidden:!0}),(0,ee.jsx)(Ot,{store:t})]})}function Ot(e){let{store:t}=e;const s=(0,n().O7)(),[o,a]=(0,i.useState)([]),[{value:r,status:d}]=(0,l().r5)((async()=>{const e=await k().callApi({eventName:"getRecoverableSpaceUserContent",environment:s,data:{spaceId:t.id}});if("failed"===e.type)throw C().x2(e),e;return e.data}),[s,t.id]),c=(null==r?void 0:r.recentSpaceRecoverPages)??[],u=(0,i.useCallback)((async(e,i)=>{const{accept:n}=await C().gt({message:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmationMessage",defaultMessage:"Transfer their private pages?"}),description:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmationDescription",defaultMessage:"This action cannot be undone."}),acceptLabel:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmButton.label",defaultMessage:"Transfer private pages"})});if(!n)return;a([...o,e]);const r=await k().callApi({eventName:"transferSpaceUserContent",environment:s,data:{spaceId:t.id,fromUserId:e,toUserId:i}});"failed"===r.type&&C().x2(r),a(o.filter((t=>t!==e)))}),[s,t.id,o]),p=(0,i.useCallback)((e=>{const s=[];for(const{userId:i,privatePagesCount:n}of e){if(n<1)continue;const e=de().U6.createChildStore(t,{table:g().KJ,id:i});s.push({key:i,columns:[(0,ee.jsx)(Lt,{userStore:e},"Member"),n,o.includes(i)?(0,ee.jsx)(Ft,{}):(0,ee.jsx)("div",{style:{marginLeft:-4},children:(0,ee.jsx)(St().Z,{mode:yt().z.Button,focused:!1,title:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.reprovision.toUser.title",defaultMessage:"Transfer private pages"}),parentStore:t,userIds:o,onChange:e=>{let[t]=e;u(i,t)}})})]})}return s}),[t,o,u]);return"pending"===d?(0,ee.jsx)(Ft,{}):null!=r&&r.recentSpaceRecoverPages?(0,ee.jsx)(_e().Z,{columns:[{key:"user",header:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),style:{width:"50%"}},{key:"count",header:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.userTable.pageCountColumn.header",defaultMessage:"Private pages"}),style:{width:"25%"}},{key:"action",header:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.userTable.actionLevelColumn.header",defaultMessage:"Action"}),style:{width:"25%"}}],rows:p(c)}):null}function Et(){const e=ue().subscriptionDataStoreInstance.state;return Boolean(e&&ce().YK(e))}function Ft(){return(0,ee.jsx)(U().Z,{style:{margin:"calc(50% - 1em) auto"}})}function Lt(e){let{userStore:t,restorationStatus:s}=e;return(0,ee.jsx)(et().Z,{actorStore:t,restorationStatus:s})}function Kt(e){let{user:t,userPermissionGroupIds:s}=e;return"none"!==t.role?(0,ee.jsx)(Ue().ZP,{member:t,userPermissionGroupIds:s}):null}function Gt(e,t,s,i){return t&&t.length>0?(0,r().ZP)(t,e,(e=>{const t=de().U6.createChildStore(s,{table:g().KJ,id:e.userId});return t.isDefined()?t.getSearchName(i):""})):e}function qt(e){let{store:t}=e;return(0,o().VK)((()=>P().LV(t)),[t])?(0,ee.jsx)(W().Z,{isSmall:!0,isMultiline:!0,style:{width:"80%"},children:(0,ee.jsx)(h()._H,{id:"spaceBasicSettings.membersTab.manageMembersWithLinkCaption",defaultMessage:"Manage members here."})}):(0,ee.jsxs)("div",{children:[(0,ee.jsx)(W().Z,{isSmall:!0,isMultiline:!0,style:{width:"80%",marginBottom:2},children:(0,ee.jsx)(h()._H,{id:"spaceBasicSettings.membersTab.manageMembersWithoutLinkCaption",defaultMessage:"Manage members here, or <setupdomainlink>set up a domain</setupdomainlink>, so everyone with allowed email domains can join the workspace.",values:{setupdomainlink:e=>(0,ee.jsx)(xe().Z,{onClick:()=>{st().default.setState({...st().default.state,currentTab:"settings",defaultSubtab:void 0})},children:e})}})}),(0,ee.jsx)(W().Z,{isSmall:!0,isMultiline:!0,style:{width:"80%"},children:(0,ee.jsx)(h()._H,{id:"spaceBasicSettings.membersTab.learnMore",defaultMessage:"<billingguidelink>Learn more about adding members.</billingguidelink>",values:{billingguidelink:e=>(0,ee.jsx)(xe().Z,{href:(0,Ge().UY)("guides.billingGuide"),children:e})}})})]})}function Wt(e){return ce().qF(e)&&Et()}function zt(e){let{group:t,user:s,userStore:i,store:o}=e;const a=(0,h().YB)(),r=(0,n().O7)();return(0,ee.jsx)(B().ZP,{popupType:B().Z4.Popup,renderOrigin:e=>(0,ee.jsx)(N().Z,{...e,icon:ze().o,iconStyle:{height:14,width:14},ariaLabel:a.formatMessage({id:"spacePermissionsSettings.externalTab.userThreeDotMenu.ariaLabel",defaultMessage:"Convert to member or remove from workspace"})}),render:e=>{const n=[{key:"convertToMember",render:e=>(0,ee.jsx)(R().Z,{...e,icon:(0,$e()._)({height:17,width:17}),title:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.title",defaultMessage:"Convert to member"}),shouldWrapCaption:!0,caption:"team_guests"===t&&(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.caption",defaultMessage:"Workspace members are not restricted to specific teamspaces"})}),action:()=>function(e,t,s){const{userStore:i,parent:n}=e,o=Et()?"read_and_write":"editor";C().vC({message:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.message",defaultMessage:"Are you sure you want to convert this user into a workspace member?"}),description:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.description",defaultMessage:"This is a billable event."}),showCancel:!0,keepFocus:!1,handleCancel:()=>{C().lo(),n.close()},items:[{label:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.confirm",defaultMessage:"Convert to workspace member"}),color:"blue",onAccept:async()=>{n.close(),await A().s({environment:s,guestUserStore:i,role:o,store:t,isConvertToAdmin:!Et(),origin:"page_or_teamspace_guest_three_dot_menu"})}}]})}({user:s,userStore:i,parent:e},o,r)},{key:"removeFromWorkspace",render:e=>(0,ee.jsx)(R().Z,{...e,icon:(0,Ye().V)({height:17,width:17,color:S().ZP.red}),title:(0,ee.jsx)("span",{style:{color:S().ZP.red},children:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.title",defaultMessage:"Remove from workspace"})})}),action:()=>function(e,t,s){const{userStore:i,parent:n}=e;C().vC({message:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.message",defaultMessage:"Are you sure you want to remove this user from the workspace?"}),description:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.description",defaultMessage:"This action will completely remove the user from the workspace, including any teamspaces and pages they have access to."}),showCancel:!0,keepFocus:!1,handleCancel:()=>{C().lo(),n.close()},items:[{label:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.confirm",defaultMessage:"Remove from workspace"}),color:"red",onAccept:async()=>{n.close(),await A().w({environment:s,guestUserStore:i,store:t})}}]})}({user:s,userStore:i,parent:e},o,r)}],a=[{key:"team section",render:e=>(0,ee.jsx)(K().Z,{...e}),items:n}];return(0,ee.jsx)(O().Z,{menuType:ae().o.Popup,children:(0,ee.jsx)(E().Z,{type:E().i.Vertical,sections:a,initialFocus:void 0,style:{minWidth:265}})})}})}function Yt(e){return{width:14,height:14,marginRight:6,flexGrow:0,flexShrink:0,fill:e.mediumIconColor}}function Qt(){const e=(0,h().vU)({updatingPermissions:{id:"spacePermissionsSettings.updatePermissionsMessage",defaultMessage:"Updating…"}});I().j({message:e.updatingPermissions})}function $t(){I().x()}async function Jt(e,t,s,i,n){const o=n.currentUser.id;if(e.userId!==o||"none"!==t)Qt(),"none"===t?(await k().callApi({eventName:"removeUsersFromSpace",environment:n,data:{userIds:[e.userId],spaceId:i.id,removePagePermissions:!0,revokeUserTokens:!1}}),await ot().bi(n)):Z().createAndCommit({userAction:"SpacePermissionsSettings.handleMemberPermissionRoleChange",environment:n,canUndo:!0,perform:s=>T().tQ({environment:n,spaceStore:i,permissionItems:[{type:"user_permission",role:t,user_id:e.userId}],transaction:s,from:"space_permission_setting_table"})}),$t();else{await P().bf({environment:n,spaceId:i.id,userSettingsStore:s})&&(M().Jk(n,{invite_origin:"workspace_leave",domainType:(0,Le().JF)(),new_workspace_member_count:-1,new_workspace_member_ids:[o]}),st().default.setState({...st().default.state,open:!1}))}}function Xt(e){let{buttonStyle:t,store:s}=e;const a=(0,n().O7)(),r=(0,o().VK)((()=>s.canEditMembership()),[s]),l=(0,o().VK)((()=>!r&&!s.getDisableMembershipRequests()&&(0,Fe().p1)()),[r,s]),d=(0,o().VK)((()=>Et()),[]),c=(0,i.useCallback)((()=>{(0,Xe().i)(a)}),[a]);return l?(0,ee.jsx)(Je().sf,{store:s,analyticsFrom:"space_settings_add_members",origin:(0,ee.jsx)(L().Z,{isLarge:!0,onClick:c,children:(0,ee.jsx)(h()._H,{id:"inviteUserButton.requestMemberLabel",defaultMessage:"Add members"})})}):(0,ee.jsxs)("div",{style:{display:"flex"},children:[(0,ee.jsx)(Oe().r,{disabled:!r,store:s,onInviteClick:Qt,onInviteComplete:$t,isSubscribed:d,membersOnly:!1,upgradeButtonName:"space_permission_settings",shouldGrow:!1,buttonStyle:t,analyticsFrom:"space_settings_add_members"}),(0,ee.jsx)(Ee()._,{inviteOrigin:"space_setting_slack_imports",canEditPermission:r,onInviteClick:Qt,onInviteComplete:$t})]})}function es(e){let{member:t,store:s}=e;const i=(0,n().O7)(),a=(0,h().YB)(),r=i.currentUser.id,{currentUserSettingsStore:l,currentSpaceStore:c}=(0,o().VK)((()=>{const{currentUserSettingsStore:e,currentSpaceStore:t}=Pe().default.state;return{currentUserSettingsStore:e,currentSpaceStore:t}}),[]),u=(0,o().VK)((()=>function(e,t){const s=e.formatMessage({id:"spacePermissionSettings.memberRoleSelect.permissionitem.roleUpgradeDisabled",defaultMessage:"Cannot upgrade to a higher role than member"}),i=(0,Ke().U7)();return y().oA(p().an.map((e=>{if(i||"membership_admin"!==e)return!t.canAdmin()&&p().Bc(e)?{role:e,disabledInfo:{isDisabled:!0,disabledMessage:s}}:{role:e}})))}(a,s)),[a,s]),g=(0,o().VK)((()=>!(s.canAdmin()||s.canEditMembership()&&(p().RN(t.role)||t.userId===r))),[r,t,s]);return l?(0,ee.jsx)(ve().ZP,{role:t.role,table:m().bx,type:"user_permission",disabled:g,isUserPermission:t.userId===r,upgradeButtonName:"space_permission_item",availableRoleItems:u,onChange:async e=>{await Jt(t,e,l,s,i)},buttonStyle:Dt,onRemoveMemberClick:async()=>{let e,n;if(rt().U()&&(n=d().Il(),e=await(0,ct().f)({environment:i,contractionSurveyId:n}),!e))return null;await(async()=>await(0,at().q)(i,t.userId,null==c?void 0:c.id))()&&(await(async e=>{await Jt(t,"none",l,s,i),M().Sw(i,{member_user_id:t.userId,member_role:t.role,contraction_survey_id:e,is_space:!0,domainType:(0,Le().JF)(),new_workspace_member_count:-1})})(n),e&&nt().wA(i))}}):null}function ts(e,t,s,i,n){const o=n.state.sorts[e];if(!o)return t;switch(o.by){case"role":return t.sort(((e,t)=>(p().xm[t.role]-p().xm[e.role])*(o.asc?-1:1)));case"name":return t.map((e=>({user:e,store:de().U6.createChildStore(s,{table:g().KJ,id:e.userId})}))).sort(((e,t)=>{const s=i.formatMessage(c().T_T.messages.anonymousPlaceholder),n=e.store.getFullName(i)||s,a=t.store.getFullName(i)||s;return n.localeCompare(a)*(o.asc?1:-1)})).map((e=>e.user))}}function ss(e,t,s){const i=s.state.sorts[e];let n;n=!(!i||i.by!==t)&&i.asc,s.update((s=>({...s,sorts:{...s.sorts,[e]:{by:t,asc:!n}}})))}function is(e){let{store:t,spacePermissionsSettingsStore:s}=e;const l=(0,h().YB)(),d=(0,a().Fg)(),u=(0,n().O7)(),p=(0,i.useCallback)((e=>function(e,t){t.setState({...t.state,groupsFilter:e.target.value})}(e,s)),[s]),m=(0,i.useCallback)((()=>function(e,t,s){Z().createAndCommit({userAction:"SpacePermissionsSettings.handleCreateGroupClick",environment:e,canUndo:!0,perform:e=>{const i=P().mo({spaceStore:t,transaction:e});if(i){s.setState({...s.state,editingNameGroupId:i.getGroupId(),groupNameInputValue:""});const e=c().kk5.fromValue(pt().GQ,i.getValue()),t=[...Q().Z.state.permissionGroupsAndMemberCounts,{group:e,memberCount:0}],n=(0,r().ZP)(s.state.groupsFilter,t,(e=>e.group.name||""));Q().Z.setState({...Q().Z.state,permissionGroupsAndMemberCounts:n})}}}),j().O8(e)}(u,t,s)),[u,t,s]),g=(0,o().VK)((()=>s.state.groupsFilter),[s]),f=(0,o().VK)((()=>Wt(u)),[u]),S=(0,o().VK)((()=>t.canEditMembership()),[t]),y=(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.groupsTab.groupCreationInsufficientPermissions",defaultMessage:"Only membership admins and workspace owners can add a permission group."}),b=(0,o().VK)((()=>t.isDefined()),[t]),x=(0,o().VK)((()=>0!==(0,Ke().eL)()),[]),v=(0,o().VK)((()=>(0,Ie().bq)()),[]),w=(0,o().VK)((()=>function(e,t){return Wt(t)&&e.canEditMembership()}(t,u)),[u,t]);return b?(0,ee.jsxs)("div",{children:[f?(0,ee.jsx)(W().Z,{isMultiline:!0,style:{width:"80%"},children:v?(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.groupsTab.captionWithTeamsV2",defaultMessage:"Set up groups to streamline page permissions from the share menu and manage teamspace members in bulk."}):(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.groupsTab.caption",defaultMessage:"Set up groups to conveniently control page permissions from the share menu."})}):(0,ee.jsx)(Pt().Z,{subscriptionTier:"plus",from:"permission_groups",icon:_t().x,title:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.groupsTab.upgradeTitle",defaultMessage:"Upgrade to create groups"}),caption:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.groupsTab.upgradeCaption.plus",defaultMessage:"Upgrade to the Plus Plan to set up groups and control permissions from the share menu."}),learnMoreRoute:"guides.groups"}),(0,ee.jsx)(D().Z,{size:24,isHidden:!0}),(0,ee.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"16px 8px"},children:[f&&(0,ee.jsx)(he().Z,{renderTooltip:()=>!S&&y,render:e=>(0,ee.jsx)(L().Z,{isLarge:!0,onClick:m,disabled:!S,...S?void 0:e,children:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.groupsTab.createGroupButton.label",defaultMessage:"Create a group"})})}),x&&(0,ee.jsx)(V().Z,{placeholder:l.formatMessage({id:"spacePermissionsSettings.groupsTab.filterGroupNamesInput.placeholder",defaultMessage:"Filter by group name…"}),left:(0,Qe().R)(Yt(d)),showClearButton:!0,format:V().B.Small,value:g,style:{...Rt,marginRight:0},onChange:p,onClick:()=>{j().RP(u,{current_tab:tt().Q.Groups})}})]}),x&&(0,ee.jsx)(vt().Z,{spaceStore:t,permissionsSettingsStore:s,canEdit:w})]}):null}function ns(e){let{groupIds:t,store:s,spacePermissionsSettingsStore:i}=e;return(0,ee.jsx)(te,{spaceStore:s,groupIds:t,onGroupClick:()=>{!function(e,t){t.setState({...t.state,currentTab:e})}(tt().Q.Groups,i)}})}function os(e){let{group:t,user:s,userStore:i,store:n}=e;const a=(0,o().VK)((()=>(0,Fe().F$)()),[]),r=(0,o().VK)((()=>Et()),[]);return"none"===s.role?a&&"team_guests"===t?(0,ee.jsx)(Ve,{teamGuest:s}):(0,ee.jsx)(Se,{store:n,guest:s,guestStore:i,isSubscribed:r,hideActionButtons:a}):(0,ee.jsx)(es,{store:n,member:s})}function as(e){let{members:t,store:s}=e;const i=(0,a().yK)((e=>({container:{display:"flex",alignItems:"center",padding:10,paddingRight:2,gap:5,justifyContent:"space-between",width:"100%",borderBottom:`1px solid ${e.lightDividerColor}`,background:e.cardContentBackground},memberContainer:{flexShrink:1,minWidth:50},permissionContainer:{textAlign:"center",marginLeft:"auto",flexShrink:0}})),[]);return(0,ee.jsx)(ee.Fragment,{children:t.map((e=>{const t=de().U6.createChildStore(s,{table:g().KJ,id:e.userId});return(0,ee.jsxs)("div",{style:i.container,children:[(0,ee.jsx)("div",{style:i.memberContainer,children:(0,ee.jsx)(Lt,{userStore:t})}),(0,ee.jsx)("div",{style:i.permissionContainer,children:(0,ee.jsx)(os,{store:s,group:"members",user:e,userStore:t})})]},e.userId)}))})}function rs(e){let{group:t,spaceMembers:s,store:a,spacePermissionsSettingsStore:r,recentlyRemovedMembersStore:d}=e;const c=(0,n().O7)(),p=(0,o().VK)((()=>r.state.sorts[t]),[t,r]),m={key:"user",header:(0,ee.jsxs)(H().Z,{disabled:!1,ignoreLocalHoverState:!0,onClick:()=>{ss(t,"name",r)},style:{display:"flex",alignItems:"center"},children:[(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),p&&"name"===p.by&&(0,ee.jsx)(xt().w,{up:p.asc})]}),style:{width:"45%"}},f={key:"groups",header:(0,ee.jsx)(H().Z,{disabled:!0,ignoreLocalHoverState:!0,style:{display:"flex",alignItems:"center",paddingLeft:8},children:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.userTable.groupsColumn.header",defaultMessage:"Groups"})}),style:{width:"15%"}},S={key:"teams",header:(0,ee.jsx)("div",{style:{display:"flex",alignItems:"center",paddingLeft:8},children:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.userTable.teamsColumn.header",defaultMessage:"Teamspaces"})}),style:{width:"20%",textAlign:"center"}},y={key:"access_level",header:(0,ee.jsxs)(H().Z,{disabled:!1,ignoreLocalHoverState:!0,onClick:()=>{ss(t,"role",r)},style:{display:"flex",alignItems:"center",paddingLeft:8},children:[(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.userTable.accessLevelColumn.header",defaultMessage:"Access level"}),p&&"role"===p.by&&(0,ee.jsx)(xt().w,{up:p.asc})]}),style:{width:"20%",textAlign:"center"}},b={key:"pages",header:(0,ee.jsx)("div",{style:{display:"flex",alignItems:"center",paddingLeft:8},children:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.userTable.pagesColumn.header",defaultMessage:"Pages"})}),style:{width:"20%",textAlign:"center"}},x={key:"three_dot",header:(0,ee.jsx)(H().Z,{disabled:!0,ignoreLocalHoverState:!0})},v=(0,o().VK)((()=>Wt(c)&&"team_guests"!==t&&"guests"!==t),[c,t]),j=(0,o().VK)((()=>("team_guests"===t||"guests"===t)&&(0,Fe().F$)()&&a.canEditMembership()),[t,a]),w=(0,o().VK)((()=>(0,Ie().bq)()),[]);let M="members"===t&&w?[m,S,y]:j?[m,b,x]:[m,b];v&&(M=[...M.slice(0,1),f,...M.slice(1)]);const _=(0,o().Kw)(d),C=(0,o().VK)((()=>s.map((e=>({member:e,store:de().U6.createChildStore(a,{table:g().KJ,id:e.userId})}))).filter((e=>e.store.isDefined()))),[s,a]),I=(0,o().VK)((()=>Pe().default.state.currentSpaceStore),[]),[{value:T}]=(0,l().r5)((async()=>{if(!I)return;const e=await k().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:c,data:{userIds:C.map((e=>e.member.userId)),spaceId:I.id},headers:(0,u().Bb)({cellId:void 0,spaceId:I.id})});return"success"===e.type?e.data.userToGroupMap:void 0}),[I,c,C]);return(0,ee.jsx)(_e().Z,{columns:M,rows:C.map((e=>{var s;const{member:n,store:o}=e,l=T&&T[n.userId],d=Array.isArray(_)?null===(s=_.find((e=>e.userId===n.userId)))||void 0===s?void 0:s.restorationStatus:void 0,c=[(0,ee.jsx)(i.Fragment,{children:(0,ee.jsx)(et().Z,{actorStore:o,restorationStatus:d,spaceRole:(0,et().K)(n.role),hideRolePill:!0})},"member")];return v&&c.push((0,ee.jsx)(i.Fragment,{children:(0,ee.jsx)(ns,{store:a,spacePermissionsSettingsStore:r,groupIds:l||[]})},"groups")),"members"===t&&w&&c.push((0,ee.jsx)(i.Fragment,{children:(0,ee.jsx)(Kt,{user:n,userPermissionGroupIds:new Set(l??[])})},"teams")),c.push((0,ee.jsx)(i.Fragment,{children:(0,ee.jsx)(os,{store:a,group:t,user:n,userStore:o})},"user-permission")),j&&c.push((0,ee.jsx)(i.Fragment,{children:(0,ee.jsx)(zt,{group:t,user:n,userStore:o,store:a})},"three-dot")),{key:n.userId,columns:c}}))})}function ls(e){var t;let{members:s,store:r,spacePermissionsSettingsStore:l,recentlyRemovedMembersStore:d}=e;const c=(0,h().YB)(),u=(0,a().Fg)(),p=(0,n().O7)(),m=(0,i.useCallback)((()=>function(e){e.setState({...e.state,limitMembers:!1})}(l)),[l]),{membersFilter:g,limitMembers:f}=(0,o().VK)((()=>{const{membersFilter:e,limitMembers:t}=l.state;return{membersFilter:e,limitMembers:t}}),[l]),S=(0,o().VK)((()=>Gt(s,g,r,c)),[s,g,r,c]),y=(0,o().VK)((()=>ts("members",S,r,c,l)),[S,r,c,l]),b=(0,Zt().pQ)({spaceId:r.id}),x=f?y.slice(0,Nt):y,v=(0,Ht().Z)(r),w=(0,At().kw)(r.id,null==b?void 0:b.subscription,y.length),M=v&&(null==b?void 0:b.subscription)&&w&&w>0,k=y.length;return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)("div",{style:{marginRight:8,flexGrow:1},children:(0,ee.jsx)(we().Z,{smallMarginBottom:!0,children:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.spaceMembers.members.title",defaultMessage:"Members"})})}),(0,ee.jsx)(qt,{store:r}),(0,ee.jsx)("div",{style:{margin:"24px 0px"},children:M?(0,ee.jsx)(wt().F,{quantityOfSpaceMembers:k,quantityOfPaidSeats:w,nextBillingDate:(null==b||null===(t=b.subscription)||void 0===t?void 0:t.currentPeriodEnd.toLocaleString({month:"short",day:"numeric",year:"numeric"}))??""}):null}),(0,ee.jsxs)("div",{children:[(0,ee.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,gap:8},children:[(0,ee.jsx)(Xt,{store:r}),(0,ee.jsx)(V().Z,{placeholder:c.formatMessage({id:"spacePermissionsSettings.membersTab.filterMembersInput.placeholder",defaultMessage:"Filter by email or name…"}),left:(0,Qe().R)(Yt(u)),showClearButton:!0,format:V().B.Small,value:g,style:Rt,onChange:e=>{l.setState({...l.state,membersFilter:e.target.value,limitMembers:!0})},onClick:()=>{j().RP(p,{current_tab:tt().Q.Members})}})]}),(0,ee.jsx)(rs,{store:r,spacePermissionsSettingsStore:l,recentlyRemovedMembersStore:d,group:"members",spaceMembers:x}),y.length>Nt&&f&&(0,ee.jsx)(G().Z,{style:Bt,onClick:m,children:(0,ee.jsx)(h()._H,{defaultMessage:"Show {moreMembersCount} more",id:"spacePermissionsSettings.membersTab.showMore.message",values:{moreMembersCount:y.length-Nt}})})]})]})}function ds(e){let{guests:t,store:s,spacePermissionsSettingsStore:n,recentlyRemovedMembersStore:r}=e;const l=(0,h().YB)(),d=(0,a().Fg)(),c=(0,i.useCallback)((()=>function(e){e.setState({...e.state,limitTeamGuests:!1})}(n)),[n]),{teamGuestsFilter:u,limitTeamGuests:p}=(0,o().VK)((()=>{const{teamGuestsFilter:e,limitTeamGuests:t}=n.state;return{teamGuestsFilter:e,limitTeamGuests:t}}),[n]),m=t.filter((e=>e.isTeamGuest)),g=(0,o().VK)((()=>Gt(m,u,s,l)),[m,u,s,l]),f=(0,o().VK)((()=>ts("team_guests",g,s,l,n)),[g,s,l,n]),S=p?f.slice(0,5):f;return(0,ee.jsx)("div",{style:{marginBottom:5},children:(0,ee.jsxs)("div",{children:[(0,ee.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,gap:8},children:(0,ee.jsx)(V().Z,{placeholder:l.formatMessage({id:"spacePermissionsSettings.membersTab.filterTeamGuestsInput.placeholder",defaultMessage:"Filter by email or name…"}),left:(0,Qe().R)(Yt(d)),showClearButton:!0,format:V().B.Small,value:u,style:Rt,onChange:e=>{n.setState({...n.state,teamGuestsFilter:e.target.value,limitTeamGuests:!0})}})}),(0,ee.jsx)(rs,{store:s,spacePermissionsSettingsStore:n,recentlyRemovedMembersStore:r,group:"team_guests",spaceMembers:S}),f.length>5&&p&&(0,ee.jsx)(G().Z,{style:Bt,onClick:c,children:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.membersTab.showMoreGuestsButton.label",defaultMessage:"{numberOfHiddenGuests, plural, one {Show {numberOfHiddenGuests} more} other {Show {numberOfHiddenGuests} more}}",values:{numberOfHiddenGuests:f.length-5}})})]})})}function cs(e){let{guests:t,store:s,spacePermissionsSettingsStore:r,recentlyRemovedMembersStore:l}=e;const d=(0,h().YB)(),c=(0,a().Fg)(),u=(0,n().O7)(),p=(0,i.useCallback)((()=>function(e){e.setState({...e.state,limitGuests:!1})}(r)),[r]),{guestsFilter:m,limitGuests:g}=(0,o().VK)((()=>{const{guestsFilter:e,limitGuests:t}=r.state;return{guestsFilter:e,limitGuests:t}}),[r]),f=t.filter((e=>!e.isTeamGuest&&e.isPageGuest)),S=(0,o().VK)((()=>Gt(f,m,s,d)),[f,m,s,d]),y=(0,o().VK)((()=>ts("guests",S,s,d,r)),[S,s,d,r]),b=(0,o().VK)((()=>(0,Fe().F$)()?5:Nt),[]),x=g?y.slice(0,b):y,v=(0,o().VK)((()=>Pe().default.state.currentSpaceStore),[]),w=(0,o().Kw)(ue().subscriptionDataStoreInstance),M=(0,o().VK)((()=>Boolean(v&&w&&"subscribed_admin"===w.type&&It().default.checkGate({gateName:"enable_guest_export"}))),[v,w]);return(0,ee.jsx)("div",{children:(0,ee.jsxs)("div",{children:[(0,ee.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,gap:8},children:[(0,ee.jsx)(V().Z,{placeholder:d.formatMessage({id:"spacePermissionsSettings.membersTab.filterGuestsInput.placeholder",defaultMessage:"Filter by email or name…"}),left:(0,Qe().R)(Yt(c)),showClearButton:!0,format:V().B.Small,value:m,style:Rt,onChange:e=>{r.setState({...r.state,guestsFilter:e.target.value,limitGuests:!0})},onClick:()=>{j().RP(u,{current_tab:tt().Q.Guests})}}),M&&(0,ee.jsx)(F().Z,{isLarge:!1,disabled:!1,isBlue:!0,onClick:()=>function(e,t,s){const{currentSpaceStore:i}=Pe().default.state,n=ue().subscriptionDataStoreInstance.state;i&&n&&"subscribed_admin"===n.type&&gt().Mj(s,{intl:t,spaceStore:i,guests:e})}(y,d,u),disabledFeedback:!0,children:(0,ee.jsx)(h()._H,{id:"exportGuestsButton.label",defaultMessage:"Export guests as CSV"})})]}),(0,ee.jsx)(rs,{store:s,spacePermissionsSettingsStore:r,recentlyRemovedMembersStore:l,group:"guests",spaceMembers:x}),y.length>b&&g&&(0,ee.jsx)(G().Z,{style:Bt,onClick:p,children:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.membersTab.showMoreGuestsButton.label",defaultMessage:"{numberOfHiddenGuests, plural, one {Show {numberOfHiddenGuests} more} other {Show {numberOfHiddenGuests} more}}",values:{numberOfHiddenGuests:y.length-b}})})]})})}function us(e){let{guests:t,store:s,spacePermissionsSettingsStore:n,recentlyRemovedMembersStore:a}=e;const[r,l]=(0,i.useState)(!0),[d,c]=(0,i.useState)(!0),u=(0,o().VK)((()=>!Boolean(s.getSettingsStore().getKeyStore("disable_team_guests").getValue())),[s]);return(0,ee.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[u&&(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsxs)("div",{style:{display:"flex"},children:[(0,ee.jsx)(Mt().Z,{open:r,onClick:()=>l(!r),isSidebar:!1,fill:!0,style:{marginLeft:-27}}),(0,ee.jsxs)("div",{style:{marginLeft:3},children:[(0,ee.jsxs)("div",{style:{display:"flex",alignItems:"center",height:24},children:[(0,ee.jsx)(W().Z,{style:{fontSize:15},children:(0,ee.jsx)(h()._H,{id:"spacePermissionSettings.teamGuests.title",defaultMessage:"Teamspace guests"})}),(0,ee.jsx)("span",{children:" "}),(0,ee.jsx)(W().Z,{isSecondaryColor:!0,style:{fontSize:15},children:t.filter((e=>e.isTeamGuest)).length})]}),(0,ee.jsx)(W().Z,{isSecondaryColor:!0,style:{fontSize:15},children:(0,ee.jsx)(h()._H,{id:"spacePermissionSettings.teamGuests.subtitle",defaultMessage:"Teamspace guests are billed as members and can access all pages in teamspaces they've been invited to."})})]})]}),r&&(0,ee.jsx)(ds,{store:s,spacePermissionsSettingsStore:n,recentlyRemovedMembersStore:a,guests:t})]}),(0,ee.jsxs)("div",{style:{display:"flex"},children:[(0,ee.jsx)(Mt().Z,{open:d,onClick:()=>c(!d),isSidebar:!1,fill:!0,style:{marginLeft:-27}}),(0,ee.jsxs)("div",{style:{marginLeft:3},children:[(0,ee.jsxs)("div",{style:{display:"flex",alignItems:"center",height:24},children:[(0,ee.jsx)(W().Z,{style:{fontSize:15},children:(0,ee.jsx)(h()._H,{id:"spacePermissionSettings.pageGuests.title",defaultMessage:"Page guests"})}),(0,ee.jsx)("span",{children:" "}),(0,ee.jsx)(W().Z,{isSecondaryColor:!0,style:{fontSize:15},children:t.filter((e=>e.isPageGuest&&!e.isTeamGuest)).length})]}),(0,ee.jsx)(W().Z,{isSecondaryColor:!0,style:{fontSize:15},children:(0,ee.jsx)(h()._H,{id:"spacePermissionSettings.pageGuests.subtitle",defaultMessage:"Page guests are free but can only access pages they've been invited to."})})]})]}),d&&(0,ee.jsx)(cs,{store:s,spacePermissionsSettingsStore:n,recentlyRemovedMembersStore:a,guests:t})]})}function ps(e){let{members:t,isMobile:s,store:i,inviteLinkCode:n,spacePermissionsSettingsStore:o,recentlyRemovedMembersStore:a}=e;return s?(0,ee.jsx)(as,{store:i,members:t}):(0,ee.jsxs)("div",{children:[(0,ee.jsx)(jt().zm,{spaceStore:i,inviteLinkCode:n,spacePermissionsSettingsStore:o}),(0,ee.jsx)(ls,{store:i,spacePermissionsSettingsStore:o,recentlyRemovedMembersStore:a,members:t})]})}function ms(e){let{guests:t,store:s,spacePermissionsSettingsStore:i,recentlyRemovedMembersStore:a}=e;const r=(0,n().O7)(),l=(0,o().VK)((()=>s.canAdmin()),[s]),d=r.currentUser.id,c=s.id,u=(0,lt().oo)({name:"internal_guests",spaceId:c,userId:d,amount:0}),p=(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.deeplinkCard.title",defaultMessage:"Change who can invite guests in the <bold>Security</bold> tab",values:{bold:e=>(0,ee.jsx)("span",{style:{fontWeight:x().Ue.semibold},children:e})}}),m=u&&(0,mt().V5)(u,{available:()=>l?(0,ee.jsx)(bt().Z,{icon:Ct().v,title:p,deeplinkTab:{currentTab:"security",defaultSubtab:void 0}}):null,upsell:e=>{let{limit:t,upsell:s}=e;return"product"===s.type||"contact_sales"===s.type?(0,ee.jsx)("div",{style:{paddingTop:16,paddingBottom:16},children:(0,ee.jsx)(kt().r,{children:(0,ee.jsx)(ft().j,{iconGroup:ut().G,display:"inline",tint:"yellow",label:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.guestsTab.limitBanner.title",defaultMessage:"Your workspace is over the {limit}-guest limit",values:{limit:t.total}}),description:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.guestsTab.limitBanner.description",defaultMessage:"Find teammates who are currently guests by filtering to your workspace's email domains and upgrade them to members to continue collaborating. To manage guest seats, <saleslink>reach out to sales</saleslink>.",values:{saleslink:e=>(0,ee.jsx)(xe().Z,{onClick:()=>(0,Tt().nx)({initialQuestion:"manage_guests",openedFrom:"permissions_guest_limit_banner"}),children:e})}})})})}):"contact_account_manager"===s.type?(0,ee.jsx)("div",{style:{paddingTop:16,paddingBottom:16},children:(0,ee.jsx)(kt().r,{children:(0,ee.jsx)(ft().j,{iconGroup:ut().G,display:"inline",tint:"yellow",label:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.guestsTab.limitBanner.title",defaultMessage:"Your workspace is over the {limit}-guest limit",values:{limit:t.total}}),description:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.guestsTab.limitBanner.description.sales_assisted",defaultMessage:"Find teammates who are currently guests by filtering to your workspace's email domains and upgrade them to members to continue collaborating. To get more guest seats, reach out to your account manager."})})})}):(0,b().t1)(s)},blocked:()=>null}),g=(0,o().VK)((()=>(0,Fe().F$)()),[]);return 0===t.length?(0,ee.jsx)(bt().Z,{icon:Ct().v,title:l?(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.deeplinkCard.noGuests.title",defaultMessage:"<bold>Your workspace has no guests.</bold> Change who can invite guests in the <bold>Security</bold> tab.",values:{bold:e=>(0,ee.jsx)("span",{style:{fontWeight:x().Ue.semibold},children:e})}}):void 0,deeplinkTab:l?{currentTab:"security",defaultSubtab:void 0}:void 0}):(0,ee.jsxs)(ee.Fragment,{children:[m,g?(0,ee.jsx)(us,{store:s,spacePermissionsSettingsStore:i,recentlyRemovedMembersStore:a,guests:t}):(0,ee.jsx)(cs,{store:s,spacePermissionsSettingsStore:i,recentlyRemovedMembersStore:a,guests:t})]})}const gs={maxWidth:275,borderRadius:30},fs={marginTop:8},hs={maxWidth:160},Ss=50;function ys(e){const{store:t,isMobile:r,unreadAccessRequests:d}=e,c=(0,n().O7)(),u=(0,o().qz)(void 0,tt().Z),p=(0,o().qz)(void 0,s(263184).default),m=(0,dt().$)({spaceId:t.id});(0,s(732811).K)((()=>{!function(e){st().default.state.open&&"members"===st().default.state.currentTab&&st().default.state.defaultSubtab&&(e.setState({...e.state,currentTab:st().default.state.defaultSubtab}),st().default.setState({...st().default.state,defaultSubtab:void 0}))}(u),async function(e,t,s){if(!t.canAdmin())return;const i=await k().callApi({eventName:"getRecentlyRemovedUsers",environment:e,data:{spaceId:t.id}});if("failed"===i.type)throw C().x2(i),i;s.setState(i.data.recentlyRemovedMembers)}(c,t,p)}));const[{value:S}]=(0,l().r5)((async()=>{const e=await k().callApi({eventName:"getAccessRequests",environment:c,data:{parentTable:"space",parentId:t.id,size:100,status:"pending"}});if("failed"===e.type)return[];const i=e.data.accessRequestIds;return await s(509417).Vy(c,t,i)}),[c,t],{throttle:1e3}),v=(0,o().VK)((()=>!s(804217).default.state.online),[]),w=(0,o().Kw)(ue().subscriptionDataStoreInstance),M=(0,o().VK)((()=>w?ce().CM(w):[]),[w]),_=(0,o().VK)((()=>!!w&&y().yW(M.map((e=>de().U6.createChildStore(t,{table:g().KJ,id:e.userId}).isReady())))),[t,w,M]),I=(0,o().VK)((()=>M.filter(f().nB)),[M]),T=(0,o().VK)((()=>M.filter(f().FN)),[M]),P=(0,o().VK)((()=>(0,Fe().F$)()),[]),{tabs:A,selectedTabIndex:Z,currentTab:H}=(0,o().VK)((()=>{const e=Hs(c,T,t),s=e.map((e=>(0,ee.jsx)(xs,{tab:e,store:t,members:I,guests:T,unreadAccessRequests:d,accessRequestRenderValues:S},e))),i=u.state.currentTab;return{tabs:s,selectedTabIndex:e.indexOf(i),currentTab:i}}),[c,T,t,u,I,d,S]),R=(0,i.useCallback)((e=>{!function(e,t,s,i,n){const o=Hs(s,t,i)[e];switch(o){case tt().Q.Members:j().qT(s,{tab:"members"});break;case tt().Q.Groups:j().qT(s,{tab:"groups"});break;case tt().Q.Guests:j().qT(s,{tab:"guests"});break;case tt().Q.Reprovisioning:j().qT(s,{tab:"reprovisioning"});break;case tt().Q.Requests:j().qT(s,{tab:"requests"});break;default:(0,b().t1)(o)}n.state.currentTab===tt().Q.Requests&&o!==tt().Q.Requests&&it().Z.reset();Ys(o,n)}(e,T,c,t,u)}),[T,c,t,u]),B=(0,a().yK)((()=>({tabBarMenuItem:{paddingLeft:0,paddingRight:0,marginTop:-6,marginBottom:14},tabTitle:{fontSize:16},labelContainer:{display:"flex",flexDirection:"column",gap:8,marginBottom:20},peopleTabTitleContainer:{display:"flex",alignItems:"center",gap:7},peopleTabTitle:{fontWeight:x().Ue.medium,fontSize:17},peopleSubtitle:{fontSize:15}})),[]);return v?(0,ee.jsx)(Ms,{}):w&&_&&void 0!==S?r?(0,ee.jsx)(bs,{store:t,members:I,spacePermissionsSettingsStore:u,recentlyRemovedMembersStore:p}):(0,ee.jsxs)(je().ZP,{children:[(0,ee.jsx)(s(539245).Z,{tabs:A,selectedIndex:Z,onChange:R,style:B.tabBarMenuItem,tabTitleStyle:B.tabTitle}),P&&(0,ee.jsxs)("div",{style:B.labelContainer,children:[(0,ee.jsxs)("div",{style:B.peopleTabTitleContainer,children:[(0,ee.jsx)(W().Z,{style:B.peopleTabTitle,children:(0,ee.jsx)(h()._H,{id:"spaceBasicSettings.people.title",defaultMessage:"People"})}),(0,ee.jsx)(be().Z,{href:(0,Ge().UY)("guides.members"),analyticsFrom:"members_settings"})]}),(0,ee.jsx)(W().Z,{isSecondaryColor:!0,style:B.peopleSubtitle,children:(0,ee.jsx)(h()._H,{id:"spaceBasicSettings.people.subtitle",defaultMessage:"Manage members, external guests, groups and permissions."})})]}),(0,ee.jsx)(Vt,{store:t,currentTab:H,members:I,inviteLinkCode:m,guests:T,spacePermissionsSettingsStore:u,recentlyRemovedMembersStore:p,accessRequestRenderValues:S})]}):(0,ee.jsx)(ws,{})}function bs(e){const{store:t,members:s,spacePermissionsSettingsStore:i,recentlyRemovedMembersStore:n}=e,a=(0,o().VK)((()=>t.canEditMembership()),[t]),r=Us();return(0,ee.jsxs)(ee.Fragment,{children:[a&&(0,ee.jsxs)(K().Z,{shouldShowBottomDivider:!0,children:[(0,ee.jsx)(qs,{store:t}),(0,ee.jsx)("div",{style:r,children:(0,ee.jsx)(Ws,{store:t,isMobile:!0,spacePermissionsSettingsStore:i})})]}),(0,ee.jsx)(K().Z,{children:(0,ee.jsx)(si,{isMobile:!0,store:t,spacePermissionsSettingsStore:i,recentlyRemovedMembersStore:n,members:s})})]})}function xs(e){let{tab:t,store:s,members:i,guests:r,accessRequestRenderValues:l,unreadAccessRequests:d}=e;const c=(0,n().O7)(),u=(0,o().VK)((()=>Rs(c)),[c]),p=(0,o().VK)((()=>Q().Z.state.permissionGroupsAndMemberCounts.length),[]),m=(0,o().VK)((()=>(0,Fe().F$)()),[]),g=(0,o().VK)((()=>m?r.length:r.filter((e=>!e.isTeamGuest&&e.isPageGuest)).length),[r,m]),f=(0,a().yK)((e=>({lightTextColor:{color:e.lightTextColor}})),[]);switch(t){case tt().Q.Members:return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.membersTab.title",defaultMessage:"Members"}),(0,ee.jsx)("span",{children:" "}),(0,ee.jsx)("span",{style:f.lightTextColor,children:i.length})]});case tt().Q.Groups:return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(h()._H,{id:"spaceBasicSettings.groupsTab.title",defaultMessage:"Groups"}),u&&(0,b().$K)(p)&&(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)("span",{children:" "}),(0,ee.jsx)("span",{style:f.lightTextColor,children:p})]})]});case tt().Q.Guests:return(0,ee.jsxs)(ee.Fragment,{children:[m?(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.externalTab.title",defaultMessage:"External"}):(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.guestsTab.title",defaultMessage:"Guests"}),(0,ee.jsx)("span",{children:" "}),(0,ee.jsx)("span",{style:f.lightTextColor,children:g})]});case tt().Q.Reprovisioning:return(0,ee.jsx)(h()._H,{id:"spaceBasicSettings.reprovisioningTab.title",defaultMessage:"Recently left"});case tt().Q.Requests:return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(h()._H,{id:"spaceBasicSettings.requestsTab.title",defaultMessage:"Requests"}),(0,ee.jsx)("span",{children:" "}),(0,ee.jsx)("span",{style:f.lightTextColor,children:(0,ee.jsx)(zs,{accessRequestRenderValues:l})}),(0,ee.jsx)(Os,{unreadAccessRequests:d})]});default:(0,b().t1)(t)}}const vs=i.memo(ys);function js(){const e=ue().subscriptionDataStoreInstance.state;return Boolean(e&&ce().YK(e))}function ws(){return(0,ee.jsx)(U().Z,{style:{margin:"calc(50% - 1em) auto"}})}function Ms(){return(0,ee.jsx)(je().ZP,{children:(0,ee.jsx)(W().Z,{isSmall:!0,style:{textAlign:"center"},children:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.offlineMessage",defaultMessage:"Please go online to manage members."})})})}function ks(){return(0,ee.jsx)("div",{style:{marginTop:24,marginBottom:24},children:(0,ee.jsx)(be().Z,{title:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.helpButton.caption",defaultMessage:"Learn about adding members to your workspace"}),href:(0,Ge().UY)("guides.members"),analyticsFrom:"members_settings"})})}function _s(e){const{up:t}=e,s={width:10,height:10,marginLeft:4};return t?(0,We().K)({...s,transform:"rotate(180deg)"}):(0,We().K)(s)}function Cs(e){let{userStore:t,restorationStatus:s}=e;return(0,ee.jsx)(et().Z,{actorStore:t,restorationStatus:s})}function Is(e){let{user:t,userPermissionGroupIds:s}=e;return"none"!==t.role?(0,ee.jsx)(Ue().ZP,{member:t,userPermissionGroupIds:s}):null}function Ts(e){return Boolean(e.getKeyStore("invite_link_enabled").getValue())}function Ps(e,t){var s;return t.canAdmin()&&(0,lt().DE)(e,{name:"content_reprovisioning",spaceId:t.id,userId:null===(s=e.currentUser)||void 0===s?void 0:s.id})}function As(e){return e.canEditMembership()&&(0,Fe().p1)()}function Zs(e){let{store:t}=e;return(0,o().VK)((()=>P().LV(t)),[t])?(0,ee.jsx)(W().Z,{isSmall:!0,isMultiline:!0,style:{width:"80%"},children:(0,ee.jsx)(h()._H,{id:"spaceBasicSettings.membersTab.manageMembersWithLinkCaption",defaultMessage:"Manage members here."})}):(0,ee.jsxs)("div",{children:[(0,ee.jsx)(W().Z,{isSmall:!0,isMultiline:!0,style:{width:"80%",marginBottom:6},children:(0,ee.jsx)(h()._H,{id:"spaceBasicSettings.membersTab.manageMembersDescriptionText",defaultMessage:"Manage members here, or <setupdomainlink>set up a domain</setupdomainlink>, so everyone with allowed email domains can join the workspace automatically.",values:{setupdomainlink:e=>(0,ee.jsx)(xe().Z,{onClick:()=>{st().default.setState({...st().default.state,currentTab:"settings",defaultSubtab:void 0})},children:e})}})}),(0,ee.jsx)(W().Z,{isSmall:!0,isMultiline:!0,style:{width:"80%"},children:(0,ee.jsx)(h()._H,{id:"spaceBasicSettings.membersTab.payPerMemberCaption",defaultMessage:"You will be charged for each member added. Visit <billingguidelink>our guide</billingguidelink> for more information on how we bill.",values:{billingguidelink:e=>(0,ee.jsx)(xe().Z,{href:(0,Ge().UY)("guides.billingGuide"),children:e})}})})]})}function Hs(e,t,s){return[tt().Q.Members,tt().Q.Groups,tt().Q.Guests,...Ps(e,s)?[tt().Q.Reprovisioning]:[],...As(s)?[tt().Q.Requests]:[]]}function Rs(e){return ce().qF(e)&&js()}function Bs(e){let{store:t}=e;const s=(0,n().O7)();return(0,o().VK)((()=>t.isDefined()),[t])?(0,ee.jsx)(h()._H,{id:"spacePermissionSettings.spaceMembers.inviteLink.resetLink",defaultMessage:"You can <resetlink>reset the link</resetlink> for all space members to generate a new invite link.",values:{resetlink:e=>(0,ee.jsx)(xe().Z,{onClick:()=>{C().vC({message:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.inviteLinkRefreshModal.description",defaultMessage:"Are you sure you want to reset the invite link for all space members? Your old one will no longer be able to be used."}),showCancel:!0,keepFocus:!1,handleCancel:C().lo,items:[{label:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.inviteLinkRefreshModal.accept",defaultMessage:"Reset"}),color:"red",onAccept:async()=>{await k().callApi({eventName:"refreshInviteLink",environment:s,data:{spaceId:t.id}}),ot().bi(s)}}]})},children:e})}}):null}function Ds(e){let{inviteLinkUrl:t,isMobile:s}=e;const i=(0,n().O7)(),{mobileNative:o}=i,a=(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.spaceMembers.inviteLink.copyButton",defaultMessage:"Copy link"}),r=async()=>{const e=await _().F.clipboardActions.load();e.copyString({environment:i,stringValue:t,copiedMessage:e.clipboardMessages.copiedLinkToClipboard}),v().nl(i)},l=()=>{o&&o.share(t),v().nl(i)};return s?(0,ee.jsxs)("div",{children:[(0,ee.jsx)(V().Z,{type:"text",format:V().B.Default,value:t,disabled:!0}),o?(0,ee.jsx)(F().Z,{onClick:l,style:{marginTop:10,width:"100%"},children:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.spaceMembers.inviteLink.shareButton",defaultMessage:"Share link"})}):(0,ee.jsx)(F().Z,{onClick:r,style:{marginTop:10,width:"100%"},children:a})]}):(0,ee.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",marginTop:12},children:[(0,ee.jsx)(V().Z,{type:"text",format:V().B.Default,value:t,disabled:!0,style:{borderTopRightRadius:0,borderBottomRightRadius:0,width:"calc(100% - 90px)",height:32}}),(0,ee.jsx)(L().Z,{onClick:r,style:{borderTopLeftRadius:0,borderBottomLeftRadius:0},isLarge:!0,children:a})]})}function Ns(e){let{group:t,user:s,userStore:i,store:o}=e;const a=(0,h().YB)(),r=(0,n().O7)();return(0,ee.jsx)(B().ZP,{popupType:B().Z4.Popup,renderOrigin:e=>(0,ee.jsx)(N().Z,{...e,icon:ze().o,iconStyle:{height:14,width:14},ariaLabel:a.formatMessage({id:"spacePermissionsSettings.externalTab.userThreeDotMenu.ariaLabel",defaultMessage:"Convert to member or remove from workspace"})}),render:e=>{const n=[{key:"convertToMember",render:e=>(0,ee.jsx)(R().Z,{...e,icon:(0,$e()._)({height:17,width:17}),title:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.title",defaultMessage:"Convert to member"}),shouldWrapCaption:!0,caption:"team_guests"===t&&(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.caption",defaultMessage:"Workspace members are not restricted to specific teamspaces"})}),action:()=>function(e,t,s){const{userStore:i,parent:n}=e,o=js()?"read_and_write":"editor";C().vC({message:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.message",defaultMessage:"Are you sure you want to convert this user into a workspace member?"}),description:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.description",defaultMessage:"This is a billable event."}),showCancel:!0,keepFocus:!1,handleCancel:()=>{C().lo(),n.close()},items:[{label:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.confirm",defaultMessage:"Convert to workspace member"}),color:"blue",onAccept:async()=>{n.close(),await A().s({environment:s,guestUserStore:i,role:o,store:t,isConvertToAdmin:!js(),origin:"page_or_teamspace_guest_three_dot_menu"})}}]})}({user:s,userStore:i,parent:e},o,r)},{key:"removeFromWorkspace",render:e=>(0,ee.jsx)(R().Z,{...e,icon:(0,Ye().V)({height:17,width:17,color:S().ZP.red}),title:(0,ee.jsx)("span",{style:{color:S().ZP.red},children:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.title",defaultMessage:"Remove from workspace"})})}),action:()=>function(e,t,s){const{userStore:i,parent:n}=e;C().vC({message:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.message",defaultMessage:"Are you sure you want to remove this user from the workspace?"}),description:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.description",defaultMessage:"This action will completely remove the user from the workspace, including any teamspaces and pages they have access to."}),showCancel:!0,keepFocus:!1,handleCancel:()=>{C().lo(),n.close()},items:[{label:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.confirm",defaultMessage:"Remove from workspace"}),color:"red",onAccept:async()=>{n.close(),await A().w({environment:s,guestUserStore:i,store:t})}}]})}({user:s,userStore:i,parent:e},o,r)}],a=[{key:"team section",render:e=>(0,ee.jsx)(K().Z,{...e}),items:n}];return(0,ee.jsx)(O().Z,{menuType:ae().o.Popup,children:(0,ee.jsx)(E().Z,{type:E().i.Vertical,sections:a,initialFocus:void 0,style:{minWidth:265}})})}})}function Vs(e){return{width:14,height:14,marginRight:6,flexGrow:0,flexShrink:0,fill:e.mediumIconColor}}function Us(){const{WindowSizeStore:e}=(0,n().O7)(),t=(0,o().VK)((()=>e.getSafePaddingRightCSS(14)),[e]);return(0,a().yK)((e=>({mobileMenuItem:{display:"flex",paddingTop:14,paddingBottom:14,paddingLeft:14,paddingRight:t,background:e.cardContentBackground}})),[t]).mobileMenuItem}function Os(e){let{unreadAccessRequests:t}=e;const s=(0,a().Fg)();return t&&t>0?(0,ee.jsx)(ke().z,{color:s.redBadgeBackground,style:{marginLeft:6}}):null}function Es(){const e=(0,h().vU)({updatingPermissions:{id:"spacePermissionsSettings.updatePermissionsMessage",defaultMessage:"Updating…"}});I().j({message:e.updatingPermissions})}function Fs(){I().x()}async function Ls(e,t,s,i,n){const o=n.currentUser.id;if(e.userId!==o||"none"!==t)Es(),"none"===t?(await k().callApi({eventName:"removeUsersFromSpace",environment:n,data:{userIds:[e.userId],spaceId:i.id,removePagePermissions:!0,revokeUserTokens:!1}}),await ot().bi(n)):Z().createAndCommit({userAction:"SpacePermissionsSettings.handleMemberPermissionRoleChange",environment:n,canUndo:!0,perform:s=>T().tQ({environment:n,spaceStore:i,permissionItems:[{type:"user_permission",role:t,user_id:e.userId}],transaction:s,from:"space_permission_setting_table"})}),Fs();else{await P().bf({environment:n,spaceId:i.id,userSettingsStore:s})&&(M().Jk(n,{invite_origin:"workspace_leave",domainType:(0,Le().JF)(),new_workspace_member_count:-1,new_workspace_member_ids:[o]}),st().default.setState({...st().default.state,open:!1}))}}function Ks(e){let{buttonStyle:t,store:s}=e;const a=(0,n().O7)(),r=(0,o().VK)((()=>s.canEditMembership()),[s]),l=(0,o().VK)((()=>!r&&!s.getDisableMembershipRequests()&&(0,Fe().p1)()),[r,s]),d=(0,o().VK)((()=>js()),[]),c=(0,i.useCallback)((()=>{(0,Xe().i)(a)}),[a]);return l?(0,ee.jsx)(Je().sf,{store:s,analyticsFrom:"space_settings_add_members",origin:(0,ee.jsx)(L().Z,{isLarge:!0,onClick:c,children:(0,ee.jsx)(h()._H,{id:"inviteUserButton.requestMemberLabel",defaultMessage:"Add members"})})}):(0,ee.jsxs)("div",{style:{display:"flex"},children:[(0,ee.jsx)(Oe().r,{disabled:!r,store:s,onInviteClick:Es,onInviteComplete:Fs,isSubscribed:d,membersOnly:!1,upgradeButtonName:"space_permission_settings",shouldGrow:!1,buttonStyle:t,analyticsFrom:"space_settings_add_members"}),(0,ee.jsx)(Ee()._,{inviteOrigin:"space_setting_slack_imports",canEditPermission:r,onInviteClick:Es,onInviteComplete:Fs})]})}function Gs(e){let{member:t,store:s}=e;const i=(0,n().O7)(),a=(0,h().YB)(),r=i.currentUser.id,{currentUserSettingsStore:l,currentSpaceStore:c}=(0,o().VK)((()=>{const{currentUserSettingsStore:e,currentSpaceStore:t}=Pe().default.state;return{currentUserSettingsStore:e,currentSpaceStore:t}}),[]),u=(0,o().VK)((()=>function(e,t){const s=e.formatMessage({id:"spacePermissionSettings.memberRoleSelect.permissionitem.roleUpgradeDisabled",defaultMessage:"Cannot upgrade to a higher role than member"}),i=(0,Ke().U7)();return y().oA(p().an.map((e=>{if(i||"membership_admin"!==e)return{role:e,disabledInfo:!t.canAdmin()&&p().Bc(e)?{isDisabled:!0,disabledMessage:s}:void 0}})))}(a,s)),[a,s]),g=(0,o().VK)((()=>!(s.canAdmin()||s.canEditMembership()&&(p().RN(t.role)||t.userId===r))),[r,t,s]);return l?(0,ee.jsx)(ve().ZP,{role:t.role,table:m().bx,type:"user_permission",disabled:g,isUserPermission:t.userId===r,upgradeButtonName:"space_permission_item",availableRoleItems:u,onChange:async e=>{await Ls(t,e,l,s,i)},buttonStyle:hs,onRemoveMemberClick:async()=>{let e,n;if(rt().U()&&(n=d().Il(),e=await(0,ct().f)({environment:i,contractionSurveyId:n}),!e))return null;await(async()=>await(0,at().q)(i,t.userId,null==c?void 0:c.id))()&&(await(async e=>{await Ls(t,"none",l,s,i),M().Sw(i,{member_user_id:t.userId,member_role:t.role,contraction_survey_id:e,is_space:!0,domainType:(0,Le().JF)(),new_workspace_member_count:-1})})(n),e&&nt().wA(i))}}):null}function qs(e){let{store:t}=e;const s=(0,a().Fg)(),i=Us();return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)("div",{style:i,children:(0,ee.jsx)(Ks,{store:t,buttonStyle:{flex:1}})}),(0,ee.jsx)("div",{style:{borderBottom:`1px solid ${s.regularDividerColor}`}})]})}function Ws(e){let{store:t,isMobile:s,spacePermissionsSettingsStore:i}=e;const a=(0,n().O7)(),r=(0,Me().tM)({spaceStore:t}),l=(0,dt().$)({spaceId:t.id}),d=(0,o().VK)((()=>function(e,t,s){if(void 0===s)return;const i=e.id;return s?(0,qe().cJ)(t,i,s):void 0}(t,a,l)),[a,t,l]),c=(0,o().VK)((()=>Ts(t)),[t]);return r&&d?(0,ee.jsxs)("div",{children:[(0,ee.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",cursor:"pointer"},children:[(0,ee.jsxs)("div",{style:{marginRight:8,flexGrow:1},children:[(0,ee.jsx)(we().Z,{children:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.spaceMembers.inviteLink.title",defaultMessage:"Invite link"})}),(0,ee.jsxs)(W().Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"85%"},children:[(0,ee.jsx)(h()._H,{id:"spacePermissionSettings.spaceMembers.inviteLink.caption",defaultMessage:"Share this secret link to invite people to this workspace. Only users who can invite members can see this."})," ",!s&&(0,ee.jsx)(Bs,{store:t})]})]}),(0,ee.jsx)("div",{style:{marginTop:5},children:(0,ee.jsx)(q().Z,{on:c,onClick:()=>function(e,t){const s=!Ts(e);w().eo(t,{enabled:s}),Z().createAndCommit({userAction:"SpacePermissionsSettings.handleInviteLinkClick",environment:t,canUndo:!0,perform:t=>{P().ys({transaction:t,spaceStore:e,inviteLinkEnabled:Boolean(s)})}})}(t,a)})})]}),i&&c&&d&&(0,ee.jsx)("div",{style:s?{marginTop:5}:void 0,children:(0,ee.jsx)(Ds,{isMobile:s,inviteLinkUrl:d})}),(0,ee.jsx)(D().Z,{size:40})]}):null}function zs(e){let{accessRequestRenderValues:t}=e;const s=(0,o().VK)((()=>t?t.filter((e=>"pending"===e.accessRequest.status)).length:0),[t]);return t?(0,ee.jsx)("span",{children:s}):(0,ee.jsx)("span",{})}function Ys(e,t){t.setState({...t.state,currentTab:e})}function Qs(e,t,s){const i=s.state.sorts[e];let n;n=!(!i||i.by!==t)&&i.asc,s.update((s=>({...s,sorts:{...s.sorts,[e]:{by:t,asc:!n}}})))}function $s(e){let{groupIds:t,store:s,spacePermissionsSettingsStore:i}=e;return(0,ee.jsx)(te,{spaceStore:s,groupIds:t,onGroupClick:()=>{Ys(tt().Q.Groups,i)}})}function Js(e){let{group:t,user:s,userStore:i,store:n}=e;const a=(0,o().VK)((()=>(0,Fe().F$)()),[]),r=(0,o().VK)((()=>js()),[]);return"none"===s.role?a&&"team_guests"===t?(0,ee.jsx)(Ve,{teamGuest:s}):(0,ee.jsx)(Se,{store:n,guest:s,guestStore:i,isSubscribed:r,hideActionButtons:a}):(0,ee.jsx)(Gs,{store:n,member:s})}function Xs(e){let{members:t,store:s}=e;const i=(0,a().yK)((e=>({container:{display:"flex",alignItems:"center",padding:10,paddingRight:2,gap:5,justifyContent:"space-between",width:"100%",borderBottom:`1px solid ${e.lightDividerColor}`,background:e.cardContentBackground},memberContainer:{flexShrink:1,minWidth:50},permissionContainer:{textAlign:"center",marginLeft:"auto",flexShrink:0}})),[]);return(0,ee.jsx)(ee.Fragment,{children:t.map((e=>{const t=de().U6.createChildStore(s,{table:g().KJ,id:e.userId});return(0,ee.jsxs)("div",{style:i.container,children:[(0,ee.jsx)("div",{style:i.memberContainer,children:(0,ee.jsx)(Cs,{userStore:t})}),(0,ee.jsx)("div",{style:i.permissionContainer,children:(0,ee.jsx)(Js,{store:s,group:"members",user:e,userStore:t})})]},e.userId)}))})}function ei(e){let{group:t,spaceMembers:s,store:a,spacePermissionsSettingsStore:r,recentlyRemovedMembersStore:d}=e;const c=(0,n().O7)(),p=(0,o().VK)((()=>r.state.sorts[t]),[t,r]),m={key:"user",header:(0,ee.jsxs)(H().Z,{disabled:!1,ignoreLocalHoverState:!0,onClick:()=>{Qs(t,"name",r)},style:{display:"flex",alignItems:"center"},children:[(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),p&&"name"===p.by&&(0,ee.jsx)(_s,{up:p.asc})]}),style:{width:"45%"}},f={key:"groups",header:(0,ee.jsx)(H().Z,{disabled:!0,ignoreLocalHoverState:!0,style:{display:"flex",alignItems:"center",paddingLeft:8},children:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.userTable.groupsColumn.header",defaultMessage:"Groups"})}),style:{width:"15%"}},S={key:"teams",header:(0,ee.jsx)("div",{style:{display:"flex",alignItems:"center",paddingLeft:8},children:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.userTable.teamsColumn.header",defaultMessage:"Teamspaces"})}),style:{width:"20%",textAlign:"center"}},y={key:"access_level",header:(0,ee.jsxs)(H().Z,{disabled:!1,ignoreLocalHoverState:!0,onClick:()=>{Qs(t,"role",r)},style:{display:"flex",alignItems:"center",paddingLeft:8},children:[(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.userTable.accessLevelColumn.header",defaultMessage:"Access level"}),p&&"role"===p.by&&(0,ee.jsx)(_s,{up:p.asc})]}),style:{width:"20%",textAlign:"center"}},b={key:"pages",header:(0,ee.jsx)("div",{style:{display:"flex",alignItems:"center",paddingLeft:8},children:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.userTable.pagesColumn.header",defaultMessage:"Pages"})}),style:{width:"20%",textAlign:"center"}},x={key:"three_dot",header:(0,ee.jsx)(H().Z,{disabled:!0,ignoreLocalHoverState:!0})},v=(0,o().VK)((()=>Rs(c)&&"team_guests"!==t&&"guests"!==t),[c,t]),j=(0,o().VK)((()=>("team_guests"===t||"guests"===t)&&(0,Fe().F$)()&&a.canEditMembership()),[t,a]),w=(0,o().VK)((()=>(0,Ie().bq)()),[]);let M="members"===t&&w?[m,S,y]:j?[m,b,x]:[m,b];v&&(M=[...M.slice(0,1),f,...M.slice(1)]);const _=(0,o().Kw)(d),C=(0,o().VK)((()=>s.map((e=>({member:e,store:de().U6.createChildStore(a,{table:g().KJ,id:e.userId})}))).filter((e=>e.store.isDefined()))),[s,a]),I=(0,o().VK)((()=>Pe().default.state.currentSpaceStore),[]),[{value:T}]=(0,l().r5)((async()=>{if(!I)return;const e=await k().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:c,data:{userIds:C.map((e=>e.member.userId)),spaceId:I.id},headers:(0,u().Bb)({cellId:void 0,spaceId:I.id})});return"success"===e.type?e.data.userToGroupMap:void 0}),[I,c,C]);return(0,ee.jsx)(_e().Z,{columns:M,rows:C.map((e=>{var s;const{member:n,store:o}=e,l=T&&T[n.userId],d=Array.isArray(_)?null===(s=_.find((e=>e.userId===n.userId)))||void 0===s?void 0:s.restorationStatus:void 0,c=[(0,ee.jsx)(i.Fragment,{children:(0,ee.jsx)(Cs,{userStore:o,restorationStatus:d})},"member")];return v&&c.push((0,ee.jsx)(i.Fragment,{children:(0,ee.jsx)($s,{store:a,spacePermissionsSettingsStore:r,groupIds:l||[]})},"groups")),"members"===t&&w&&c.push((0,ee.jsx)(i.Fragment,{children:(0,ee.jsx)(Is,{user:n,userPermissionGroupIds:new Set(l??[])})},"teams")),c.push((0,ee.jsx)(i.Fragment,{children:(0,ee.jsx)(Js,{store:a,group:t,user:n,userStore:o})},"user-permission")),j&&c.push((0,ee.jsx)(i.Fragment,{children:(0,ee.jsx)(Ns,{group:t,user:n,userStore:o,store:a})},"three-dot")),{key:n.userId,columns:c}}))})}function ti(e){let{members:t,store:s,spacePermissionsSettingsStore:l,recentlyRemovedMembersStore:d}=e;const u=(0,h().YB)(),m=(0,a().Fg)(),f=(0,n().O7)(),S=(0,i.useCallback)((()=>function(e){e.setState({...e.state,limitMembers:!1})}(l)),[l]),{membersFilter:y,limitMembers:b}=(0,o().VK)((()=>{const{membersFilter:e,limitMembers:t}=l.state;return{membersFilter:e,limitMembers:t}}),[l]),x=(0,o().VK)((()=>function(e,t,s,i){return t&&t.length>0?(0,r().ZP)(t,e,(e=>{const t=de().U6.createChildStore(s,{table:g().KJ,id:e.userId});return t.isDefined()?t.getSearchName(i):""})):e}(t,y,s,u)),[t,y,s,u]),v=(0,o().VK)((()=>function(e,t,s,i,n){const o=n.state.sorts[e];if(!o)return t;switch(o.by){case"role":return t.sort(((e,t)=>(p().xm[t.role]-p().xm[e.role])*(o.asc?-1:1)));case"name":return t.map((e=>({user:e,store:de().U6.createChildStore(s,{table:g().KJ,id:e.userId})}))).sort(((e,t)=>{const s=i.formatMessage(c().T_T.messages.anonymousPlaceholder),n=e.store.getFullName(i)||s,a=t.store.getFullName(i)||s;return n.localeCompare(a)*(o.asc?1:-1)})).map((e=>e.user))}}("members",x,s,u,l)),[x,s,u,l]),w=b?v.slice(0,Ss):v;return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)("div",{style:{marginRight:8,flexGrow:1},children:(0,ee.jsx)(we().Z,{children:(0,ee.jsx)(h()._H,{id:"spacePermissionsSettings.spaceMembers.members.title",defaultMessage:"Members"})})}),(0,ee.jsx)(Zs,{store:s}),(0,ee.jsx)(D().Z,{size:16,isHidden:!0}),(0,ee.jsxs)("div",{children:[(0,ee.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,gap:8},children:[(0,ee.jsx)(Ks,{store:s}),(0,ee.jsx)(V().Z,{placeholder:u.formatMessage({id:"spacePermissionsSettings.membersTab.filterMembersInput.placeholder",defaultMessage:"Filter by email or name…"}),left:(0,Qe().R)(Vs(m)),showClearButton:!0,format:V().B.Small,value:y,style:gs,onChange:e=>{l.setState({...l.state,membersFilter:e.target.value,limitMembers:!0})},onClick:()=>{j().RP(f,{current_tab:tt().Q.Members})}})]}),(0,ee.jsx)(ei,{store:s,spacePermissionsSettingsStore:l,recentlyRemovedMembersStore:d,group:"members",spaceMembers:w}),v.length>Ss&&b&&(0,ee.jsx)(G().Z,{style:fs,onClick:S,children:(0,ee.jsx)(h()._H,{defaultMessage:"Show {moreMembersCount} more",id:"spacePermissionsSettings.membersTab.showMore.message",values:{moreMembersCount:v.length-Ss}})})]})]})}function si(e){let{members:t,isMobile:s,store:i,spacePermissionsSettingsStore:n,recentlyRemovedMembersStore:o}=e;return s?(0,ee.jsx)(Xs,{store:i,members:t}):(0,ee.jsxs)("div",{children:[(0,ee.jsx)(ks,{}),(0,ee.jsx)(Ws,{store:i,isMobile:s,spacePermissionsSettingsStore:n}),(0,ee.jsx)(ti,{store:i,spacePermissionsSettingsStore:n,recentlyRemovedMembersStore:o,members:t})]})}},865479:(e,t,s)=>{s.d(t,{Z:()=>b});var i=s(667294),n=()=>s(142735),o=()=>s(846550),a=()=>s(506347),r=()=>s(729775),l=()=>s(943620),d=()=>s(384241),c=()=>s(429725),u=()=>s(164079),p=()=>s(168509),m=()=>s(965913),g=()=>s(998901),f=s(785893);function h(e){let{store:t,...n}=e;const o=(0,i.useCallback)((e=>(0,f.jsx)(s(878517).E5,{store:t,events:e})),[t]);return(0,f.jsx)(s(654133).Z,{noStyle:!0,delayThreshold:400,placement:g().Placement.Bottom,alignment:g().Alignment.Start,renderTooltip:o,...n})}const S=i.memo(h);var y=()=>s(838266);function b(e){const{store:t,style:s,hideIcon:g}=e,h=(0,n().VK)((()=>{if(t)return{icon:t.getIcon(),isEmptyPage:t.isEmptyPage(),url:(0,c().Hu)({store:t,pageVisitSource:a().tY.SiteSettings})}}),[t]),b=(0,i.useCallback)((e=>{e.metaKey||y().default.setState({...y().default.state,open:!1})}),[]),x=(0,o().yK)((e=>({container:{display:"flex",alignItems:"center",overflow:"hidden",cursor:"default"},emptyPageIcon:{height:18,width:18,fill:e.accentColors.gray[500]},iconContainer:{position:"relative",width:20,height:20,marginRight:4},linkBox:{borderRadius:3,maxWidth:"100%"},linkIcon:{position:"absolute",width:10,height:10,right:0,bottom:0},pageRecordContainer:{display:"flex",alignItems:"center",paddingTop:2,paddingBottom:2,paddingRight:4,paddingLeft:4,...s},pageTitle:{wordBreak:"break-word",borderBottom:"0.05em solid rgba(55,53,47,.25)"}})),[s]);if(!t||!h)return null;const v=(0,f.jsxs)("div",{style:x.pageRecordContainer,children:[!g&&(0,f.jsxs)("div",{style:x.iconContainer,children:[h.icon?(0,f.jsx)(l().Z,{icon:h.icon,store:t,disabled:!0,size:16,isEmptyPage:h.isEmptyPage,emojiSize:20}):(0,p().S)(x.emptyPageIcon),(0,m().Y)(x.linkIcon)]}),(0,f.jsx)(d().Z,{store:t,style:x.pageTitle})]});return(0,f.jsx)("div",{style:x.container,children:(0,f.jsx)(S,{store:t,render:e=>(0,f.jsx)(r().Z,{href:null==h?void 0:h.url,style:x.linkBox,...(0,u().Z)(e,{onClick:b}),children:v})})})}},151165:(e,t,s)=>{s.d(t,{Z:()=>n});class i extends(()=>s(263184))().default{}const n=new i},359023:(e,t,s)=>{s.d(t,{Z:()=>o});var i=()=>s(874459);class n extends(()=>s(263184))().default{getInitialState(){return{uploadingProfilePhoto:!1,givenName:"",familyName:"",name:"",startDayOfWeek:(0,i().aN)(),accountSettings:{hasPassword:!1,canConfigurePassword:!1,isSamlEnforced:!1,mfaStatus:"loading",numMfaSettings:0,regenerateBackupCodes:!1,hasPasskeys:!1,error:void 0}}}getValueForUser(e,t,s){if(e.isDefined()){const n=e.getFullName(s),o=e.getProfilePhoto(),a=t.getSettings();return{...this.state,uploadingProfilePhoto:!1,profilePhoto:o,name:n||"",startDayOfWeek:void 0===(null==a?void 0:a.start_day_of_week)?(0,i().aN)():null==a?void 0:a.start_day_of_week}}}}const o=n},621099:(e,t,s)=>{s.d(t,{$A:()=>x,Vu:()=>v,wA:()=>b});var i=()=>s(956057),n=()=>s(788860),o=()=>s(395362),a=()=>s(824462),r=()=>s(528918),l=()=>s(784234),d=()=>s(224597),c=()=>s(269299),u=()=>s(348141),p=()=>s(572623),m=()=>s(876822),g=()=>s(838266),f=()=>s(576387),h=()=>s(741846),S=()=>s(139543),y=()=>s(941832);function b(e){const t=m().default.state.currentUserSettingsStore;t&&c().createAndCommit({userAction:"saveContractionSurveySeenDate",environment:e,canUndo:!0,perform:e=>{u().d2({userSettingsStore:t,transaction:e,data:{seen_contraction_survey_at:(new Date).getTime()}})}})}async function x(e){let{environment:t,user:s,spaceStore:n,userSettingStore:a}=e;let r,l;if(S().U()&&(l=i().Il(),r=await(0,y().f)({environment:t,contractionSurveyId:l}),!r))return;await(async()=>await(0,h().q)(t,s.userId,n.id))()&&(await(async e=>{await v({member:s,newRole:"none",currentUserSettingsStore:a,spaceStore:n,environment:t}),o().Sw(t,{member_user_id:s.userId,member_role:s.role,contraction_survey_id:e,is_space:!0,domainType:(0,p().JF)(),new_workspace_member_count:-1})})(l),r&&b(t))}async function v(e){let{member:t,newRole:s,currentUserSettingsStore:i,spaceStore:u,environment:m}=e;const h=m.currentUser.id;if(t.userId!==h||"none"!==s)!function(){const e=(0,n().vU)({updatingPermissions:{id:"spacePermissionsSettings.updatePermissionsMessage",defaultMessage:"Updating…"}});r().j({message:e.updatingPermissions})}(),"none"===s?(await a().callApi({eventName:"removeUsersFromSpace",environment:m,data:{userIds:[t.userId],spaceId:u.id,removePagePermissions:!0,revokeUserTokens:!1}}),await f().bi(m)):c().createAndCommit({userAction:"contractionActions.handleMemberPermissionRoleChange",environment:m,canUndo:!0,perform:e=>l().tQ({environment:m,spaceStore:u,permissionItems:[{type:"user_permission",role:s,user_id:t.userId}],transaction:e,from:"space_permission_setting_table"})}),r().x();else{await d().bf({environment:m,spaceId:u.id,userSettingsStore:i})&&(o().Jk(m,{invite_origin:"workspace_remove_member",domainType:(0,p().JF)(),new_workspace_member_count:-1,new_workspace_member_ids:[h]}),g().default.setState({...g().default.state,open:!1}))}}},741846:(e,t,s)=>{s.d(t,{q:()=>V});s(670560),s(241792),s(667294);var i=()=>s(146947),n=()=>s(142735),o=()=>s(846550),a=()=>s(646574),r=()=>s(799891),l=()=>s(989478),d=()=>s(629719),c=()=>s(788860),u=()=>s(979614),p=()=>s(824462),m=()=>s(212493),g=()=>s(830581),f=()=>s(661641),h=()=>s(921981),S=()=>s(981583),y=()=>s(765513),b=()=>s(148126),x=()=>s(403587),v=()=>s(907374),j=()=>s(965910),w=()=>s(918302),M=()=>s(876822),k=()=>s(826955),_=()=>s(663773),C=()=>s(815277),I=()=>s(661769),T=()=>s(550649),P=()=>s(938131),A=s(785893);function Z(e){const{onFinished:t,userId:s,userContractionMessages:i}=e,a=(0,o().yK)((e=>({customIcon:{alignSelf:"center",flexGrow:0},removeIconInCornerOfUserAvatar:{background:"white",borderRadius:"50%",position:"absolute",bottom:0,right:-5},dashedEllipse:{width:56,height:56,position:"absolute",top:-4,left:-4},customIconWrapper:{position:"relative",width:"fit-content",margin:"0 auto"},wrapper:{marginTop:4},descriptionBox:{borderRadius:6,textAlign:"center",background:e.surface.wash,padding:"16px 12px"}})),[]),r=(0,c().YB)(),d=(0,n().VK)((()=>M().default.state.currentSpaceStore),[]),u=(0,n().VK)((()=>{if(!d)return;const e=k().U6.createChildStore(d,{id:s,table:l().KJ});return e.isDefined()&&!e.getIsDeleted()?e:void 0}),[d,s]),p=(0,C().VX)({name:"admin_transfer_private_content",spaceId:null==d?void 0:d.id,userId:s}),{name:y,spaceName:b}=(0,n().VK)((()=>({name:null==u?void 0:u.getDisplayName(r),spaceName:null==d?void 0:d.getName()})),[u,r,d]),x=(0,I().pQ)({spaceId:null==d?void 0:d.id});return(0,A.jsx)(h().c,{areaConstraint:{width:{type:"min",length:406},height:{type:"unlimited",scroll:"allow"}},isOpen:!0,onDismiss:()=>t(!1),animateSizeTransition:!0,render:()=>(0,A.jsx)(g().sR,{header:(0,A.jsx)(g().vI,{iconAndTitle:(0,A.jsxs)(m().jX,{align:"center",gap:8,direction:"column",children:[(0,A.jsx)(S().Z,{userStore:u,size:48,style:a.customIcon,borderStyle:"solid"}),(0,A.jsx)(f().q,{styleName:"Heading-17px/Semibold",style:{textAlign:"center"},children:N(b,y)})]})}),footer:(0,A.jsx)(g().a6,{layout:"vertical",primaryButtons:[{buttonType:"destructive",label:D(y),onClick:()=>t(!0)}],secondaryButtons:[{buttonType:"outline",label:(0,A.jsx)(c()._H,{id:"contractionConfirmation.manageMembers",defaultMessage:"Manage members"}),onClick:()=>t(!1)}]}),children:(0,A.jsxs)(m().jX,{style:a.descriptionBox,gap:12,children:[(0,A.jsx)(f().q,{styleName:"UIRegular-14px/Medium",children:(0,A.jsx)(c()._H,{id:"contractionConfirmation.description.withName",defaultMessage:"They have been an active Notion member. {hasTransferrableContent, select, true {} other {Removing them may cause loss of private pages.}}",values:{hasTransferrableContent:p}})}),d&&(0,A.jsx)(B,{spaceStore:d,subscription:null==x?void 0:x.subscription,userContractionMessages:i})]})})})}function H(){return null}function R(e){return e>2e3?(0,A.jsx)(c()._H,{id:"contractionConfirmation.amount.2000",defaultMessage:"2000+"}):e>1500?(0,A.jsx)(c()._H,{id:"contractionConfirmation.amount.1500",defaultMessage:"1500+"}):e>1e3?(0,A.jsx)(c()._H,{id:"contractionConfirmation.amount.1000",defaultMessage:"1000+"}):e>500?(0,A.jsx)(c()._H,{id:"contractionConfirmation.amount.500",defaultMessage:"500+"}):e>250?(0,A.jsx)(c()._H,{id:"contractionConfirmation.amount.250",defaultMessage:"250+"}):e>100?(0,A.jsx)(c()._H,{id:"contractionConfirmation.amount.100",defaultMessage:"100+"}):e>75?(0,A.jsx)(c()._H,{id:"contractionConfirmation.amount.75",defaultMessage:"75+"}):e>50?(0,A.jsx)(c()._H,{id:"contractionConfirmation.amount.50",defaultMessage:"50+"}):e>25?(0,A.jsx)(c()._H,{id:"contractionConfirmation.amount.25",defaultMessage:"25+"}):e>10?(0,A.jsx)(c()._H,{id:"contractionConfirmation.amount.10",defaultMessage:"10+"}):e>5?(0,A.jsx)(c()._H,{id:"contractionConfirmation.amount.5",defaultMessage:"5+"}):(0,A.jsx)(c()._H,{id:"contractionConfirmation.amount.2",defaultMessage:"2+"})}function B(e){let{spaceStore:t,subscription:s,userContractionMessages:n}=e;const o=(0,x().R)({spaceStore:t}),l=(0,_().kw)(t.id,s,o.loading?0:o.members.length),u=(0,d().ry)({logFunction:r().log.bind(r()),spaceId:t.id,subscriptionState:s})??l,p=(0,T().Z)(t);if(s&&p&&l-1<u){const e=(0,a().Yx)(s.currentPeriodEnd.toMillis(),"month_day_long",i().locale);return(0,A.jsx)(f().q,{styleName:"UISmall-12px/Regular",colorName:"secondary",customStyles:{padding:"0px 12px"},children:(0,A.jsx)(c()._H,{id:"contractionConfirmation.billing.message",defaultMessage:"Your workspace is currently billed for {paidSeats, plural, one {# seat} other {# seats}}. Your bill will remain the same until it is adjusted at the start of your next renewal: {nextBillingDate}. <learnmorelink>Learn more</learnmorelink>",values:{paidSeats:l,nextBillingDate:e,learnmorelink:e=>(0,A.jsx)(y().Z,{href:(0,b().UY)("guides.billingGuide"),external:!0,children:e})}})})}return(0,A.jsxs)("div",{style:{padding:"12px 0 0 12px"},children:[(0,A.jsx)(H,{}),(0,A.jsx)(m().jX,{gap:16,children:n.map(((e,t)=>{let{icon:s,message:i}=e;return(0,A.jsxs)(m().jX,{direction:"row",align:"center-left",gap:6,children:[(0,A.jsx)(s,{width:14}),(0,A.jsx)(f().q,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:i})]},t)}))})]})}function D(e){return e&&e.length<16?(0,A.jsx)(c()._H,{id:"contractionConfirmation.remove.withName",defaultMessage:"Remove {name}",values:{name:e}}):(0,A.jsx)(c()._H,{id:"contractionConfirmation.remove",defaultMessage:"Remove member"})}function N(e,t){return t?(0,A.jsx)(c()._H,{id:"contractionConfirmation.title.withName",defaultMessage:"Remove {name} from {space}?",values:{name:t||"this member",space:e||"this workspace"}}):(0,A.jsx)(c()._H,{id:"contractionConfirmation.title",defaultMessage:"Are you sure you want to remove this member?"})}async function V(e,t,s){let i=[],n={};if(s){const o=await p().callApi({eventName:"getUserContractionData",environment:e,data:{userId:t,spaceId:s}});"success"===o.type&&(n=o.data,i=function(e){const t=[];if(!("l28_active"in e))return t;const s=Number(e.num_pages_created);s>1&&t.push({icon:v().I,message:(0,A.jsx)(c()._H,{id:"contractionConfirmation.numberOfPages",defaultMessage:"Created {numberOfPages} pages",values:{numberOfPages:R(s)}})});const i=Number(e.num_comments);i>1&&t.push({icon:w().s,message:(0,A.jsx)(c()._H,{id:"contractionConfirmation.numberOfComments",defaultMessage:"Made {numberOfComments} comments",values:{numberOfComments:R(i)}})});const n=Number(e.l28_active);return n>1&&t.push({icon:j().h,message:(0,A.jsx)(c()._H,{id:"contractionConfirmation.activity",defaultMessage:"Visited {activeDays} days in the past month",values:{activeDays:R(n)}})}),t}(n))}return u().j(e,{name:"contraction_contextual_confirmation_shown",args:{userContractionData:n}}),await P().Z.showModal((s=>{const o=t=>{t?u().j(e,{name:"contraction_contextual_confirmation_confirmed",args:{userContractionData:n}}):u().j(e,{name:"contraction_contextual_confirmation_cancelled",args:{userContractionData:n}}),s(t)};return{dismissUsing:"closeButtonOrEscape",modalStyle:{minWidth:406,padding:20},onDismiss:()=>o(!1),content:(0,A.jsx)(Z,{onFinished:o,userId:t,userContractionMessages:i})}}))}},14328:(e,t,s)=>{s.d(t,{Z:()=>g});s(667294);var i=()=>s(219727),n=()=>s(846550),o=()=>s(788860),a=()=>s(707513),r=()=>s(407391),l=()=>s(752127),d=()=>s(661297),c=()=>s(906651),u=()=>s(148126),p=()=>s(965014),m=s(785893);const g=function(e){let{style:t,icon:s,title:n,caption:o,upgradeMessage:a,from:r,subscriptionTier:l,onUpgradeClick:d,learnMoreRoute:c}=e;const u=(0,i().O7)();return(0,m.jsxs)("section",{style:h(u,t),children:[(0,m.jsx)(y,{icon:s}),(0,m.jsx)(f,{title:n}),(0,m.jsx)(b,{caption:o}),(0,m.jsx)(j,{upgradeMessage:a,from:r,subscriptionTier:l,onUpgradeClick:d,learnMoreRoute:c})]})};function f(e){let{title:t}=e;return(0,m.jsx)("header",{style:{fontWeight:a().Ue.semibold},children:t})}function h(e,t){const{device:s}=e;return{...t,fontSize:14,...!s.isMobile&&{maxWidth:340}}}function S(e){return{color:e.mediumTextColor,marginTop:4,marginBottom:16}}function y(e){let{icon:t}=e;const s=(0,n().Fg)();return t?t(function(e){return{width:32,height:"auto",fill:e.mediumIconColor,marginBottom:8}}(s)):null}function b(e){let{caption:t}=e;const s=(0,n().Fg)();return(0,m.jsx)("p",{style:S(s),children:t})}function x(e){let{upgradeMessage:t,from:s,subscriptionTier:n,onUpgradeClick:a}=e;const r=(0,i().O7)();return(0,m.jsx)(c().Z,{onClick:e=>function(e,t,s,i,n){p().y(i,{from:t,upsell:{type:"product",product:s,limit:{type:"none"}}}),n&&n(e)}(e,s,n,r,a),isLarge:!0,children:t||(0,m.jsx)(o()._H,{defaultMessage:"Upgrade",id:"upsellCallout.upgradeButton.text"})})}function v(e){let{from:t,learnMoreRoute:s}=e;const n=(0,i().O7)();return(0,m.jsx)(d().Z,{onClick:()=>function(e,t,s){l().D({environment:s,url:(0,u().UY)(t)}),r().Fs(s,{from:e})}(t,s,n),children:(0,m.jsx)(o()._H,{defaultMessage:"Learn more",id:"upsellCallout.learnMoreButton.text"})})}function j(e){let{upgradeMessage:t,from:s,subscriptionTier:i,onUpgradeClick:n,learnMoreRoute:o}=e;return(0,m.jsxs)("footer",{style:{display:"flex",flexWrap:"wrap",gap:"8px 12px"},children:[(0,m.jsx)(x,{upgradeMessage:t,from:s,subscriptionTier:i,onUpgradeClick:n}),(0,m.jsx)(v,{from:s,learnMoreRoute:o})]})}},139543:(e,t,s)=>{s.d(t,{U:()=>o});var i=()=>s(874459),n=()=>s(876822);function o(){const e=n().default.state.currentUserSettingsStore;if(!e)return!1;const t=e.getSettings();if(!t)return!1;if(!t.seen_contraction_survey_at)return!0;return Date.now()>(0,i().Xz)({date:t.seen_contraction_survey_at,daysToAdd:1})}},363832:(e,t,s)=>{s.d(t,{$:()=>r});var i=()=>s(219727),n=()=>s(142735);const o=new(s(168469).q)((e=>{let{spaceId:t}=e;return t}),(async(e,t)=>{let{spaceId:i}=t;const n=await Promise.resolve().then(s.bind(s,824462)),o=await n.callApi({eventName:"getOrGenerateInviteLinkCode",environment:e,data:{spaceId:i},headers:(0,s(741633).Bb)({cellId:void 0,spaceId:i})});if("success"===o.type&&o.data.inviteLinkCode)return o.data.inviteLinkCode}));s(947115).exposeDebugValue("BillingDataStore",o);const a=o;function r(e){let{spaceId:t}=e;const s=(0,i().O7)();return(0,n().VK)((()=>{if(t)return a.getData(s,{spaceId:t})}),[s,t])}},147861:(e,t,s)=>{s.d(t,{Ko:()=>y,q7:()=>b,xU:()=>S});s(667294);var i=()=>s(219727),n=()=>s(142735),o=()=>s(724592),a=()=>s(359071),r=()=>s(788860),l=()=>s(454393),d=()=>s(603692),c=()=>s(594546),u=()=>s(345918),p=()=>s(151165),m=()=>s(293760),g=()=>s(548812),f=()=>s(93543),h=s(785893);function S(){const e=(0,n().VK)((()=>{const{editsBlocked:e}=m().default.state;return e??!1}),[]),t=(0,i().O7)();return(0,n().VK)((()=>(0,g().Un)(t)),[t])&&e}function y(){return(0,n().VK)((()=>{var e;const t=p().Z.state;return null==t||null===(e=t.data)||void 0===e?void 0:e.invoiceHostedUrl}),[])}function b(){const e=(0,i().O7)(),t=y(),s=(0,n().VK)((()=>{var e;const t=p().Z.state;return(null==t||null===(e=t.data)||void 0===e?void 0:e.overdueInvoiceCount)??0}),[]),c=(0,n().VK)((()=>(0,u().Fn)(e)),[e]),m=function(e,t){if(e)return t>1?(0,h.jsx)(r()._H,{defaultMessage:"Access to Notion is limited because we couldn’t process {overdueInvoiceCount, plural, one {your last payment} other {{overdueInvoiceCount} payments}}.",id:"uncollectibleExperience.uncollectibleExperienceOverlay.multipleInvoicesMessageContent",values:{overdueInvoiceCount:t}}):(0,h.jsx)(r()._H,{defaultMessage:"Access to Notion is limited because we couldn’t process your last payment",id:"uncollectibleExperience.uncollectibleExperienceOverlay.messageContent"});return(0,h.jsx)(r()._H,{id:"uncollectibleExperience.uncollectibleExperienceOverlay.memberMessageContent",defaultMessage:"Access to Notion is limited"})}(c,s),g=function(e){if(e)return;return(0,h.jsx)(r()._H,{id:"uncollectibleExperience.uncollectibleExperienceOverlay.memberSecondaryLabel",defaultMessage:"Contact a workspace owner to update your workspace’s payment method"})}(c),S=function(e,t,s){if(t){const i=(0,f().o)(s);return s=>{i&&(x(t,e),i(s))}}return s=>{x(t,e),l().r$()}}(e,c,t),b=function(e){if(e)return(0,h.jsx)(r()._H,{defaultMessage:"View unpaid invoice",id:"uncollectibleExperience.uncollectibleExperienceOverlay.buttonLabel"});return(0,h.jsx)(r()._H,{id:"uncollectibleExperience.uncollectibleExperienceOverlay.memberButtonLabel",defaultMessage:"View workspace owner"})}(c),v=function(e){if(e)return(0,h.jsx)(d().y,{iconGroup:o().R,variantName:"default",colorName:"primary"});return(0,h.jsx)(d().y,{iconGroup:a().s,variantName:"default",colorName:"primary"})}(c);return{clickAction:S,ctaMessage:b,primaryMessage:m,secondaryMessage:g,ctaIcon:v,tooltipBodyMessage:c?b:g,isWorkspaceOwner:c,overdueInvoiceCount:s}}function x(e,t){(0,c().j)({environment:t,event:{eventName:"subscription_uncollectible_blurred_experience_cta_clicked",eventProperties:{is_workspace_owner:e}}})}},550649:(e,t,s)=>{s.d(t,{Z:()=>r});var i=()=>s(629719),n=()=>s(403587),o=()=>s(663773),a=()=>s(595976);function r(e){const t=(0,n().R)({spaceStore:e}),s=(0,a().p)({spaceId:e.id}),r=(0,o().kw)(e.id,null==s?void 0:s.subscription,t.loading?0:t.members.length);return Boolean(!(0,i().CO)(null==s?void 0:s.subscription)&&!(0,i().Rd)(null==s?void 0:s.subscription)&&!(0,i().FG)(null==s?void 0:s.subscription)&&r>0)}},938131:(e,t,s)=>{s.d(t,{Z:()=>n});class i extends(()=>s(263184))().default{getInitialState(){return{modalInfoById:{}}}async showModal(e){const t=s(956057).Il();return new Promise((s=>{const i=e((e=>{s(e),this.internalCloseModal(t,(()=>{this.internalRemoveModal(t)}))}));this.update((e=>({modalInfoById:{...e.modalInfoById,[t]:{...i,isOpen:!0}}})))}))}internalRemoveModal(e){this.update((t=>{const s={...t.modalInfoById};return delete s[e],{modalInfoById:s}}))}internalCloseModal(e,t){this.update((s=>({modalInfoById:{...s.modalInfoById,[e]:{...s.modalInfoById[e],isOpen:!1,onClosed:t}}})))}}const n=new i},856563:(e,t,s)=>{s.d(t,{m:()=>g});s(241792),s(667294);var i=()=>s(142735),n=()=>s(846550),o=()=>s(788860),a=()=>s(696459),r=()=>s(212493),l=()=>s(70654),d=()=>s(661641),c=s(785893);function u(e){const{isChecked:t,label:s,onClickToggle:i}=e,o=(0,n().yK)((()=>({row:{alignItems:"center",cursor:"pointer",display:"flex",gap:8}})),[]);return(0,c.jsxs)("label",{style:o.row,children:[(0,c.jsx)(l()._,{checked:t,onChange:i}),(0,c.jsx)(d().q,{styleName:"Body-14px/Regular",children:s})]})}var p=()=>s(291198);function m(e){const{inputText:t,isChecked:s,label:i,onClickToggle:n,placeholderText:o,setInputText:a}=e;return(0,c.jsxs)(r().jX,{gap:8,children:[(0,c.jsx)(u,{label:i,isChecked:s,onClickToggle:n}),s?(0,c.jsx)(p().Z,{autoFocus:!0,value:t,placeholder:o,onChange:e=>a(e.target.value)}):null]})}function g(e){const{store:t}=e,s=(0,n().yK)((e=>({container:{border:`1px solid ${e.stroke.secondary}`,borderRadius:6}})),[]),l=(0,i().VK)((()=>t.state.options),[t]),{selectedIndexes:d,customTextByIndex:p}=(0,i().VK)((()=>{const{selectedIndexes:e,customTextByIndex:s}=t.state;return{selectedIndexes:e,customTextByIndex:s}}),[t]),g=(0,o().YB)();return(0,c.jsx)(r().jX,{padding:"16px 16px",style:s.container,gap:12,children:l.map(((e,s)=>{const{type:i}=e,n=d.has(s);switch(i){case"checkbox":return(0,c.jsx)(u,{isChecked:n,label:e.label,onClickToggle:()=>t.toggleIndex(s)},s);case"checkboxAndInput":const o="placeholderText"in e&&e.placeholderText?g.formatMessage(e.placeholderText):void 0;return(0,c.jsx)(m,{inputText:p[s]??"",isChecked:n,label:e.label,onClickToggle:()=>t.toggleIndex(s),placeholderText:o,setInputText:e=>t.setCustomTextByIndex(s,e)},s);default:(0,a().t1)(i)}}))})}},984529:(e,t,s)=>{s.d(t,{f:()=>a});s(667294);var i=()=>s(788860),n=s(785893);const o=(0,i().vU)({switchingToNewTool:{id:"survey.options.switching.placeholder",defaultMessage:"Share the name of the other tools"},switchingToNewAiTool:{id:"survey.options.usingAnotherAIService.placeholder",defaultMessage:"Share the name of the other AI tools"}}),a={consolidatingWorkspaces:{optionName:"consolidating_workspaces",type:"checkbox",label:(0,n.jsx)(i()._H,{id:"survey.options.consolidatingWorkspaces",defaultMessage:"Consolidating Notion workspaces"})},dataSecurity:{optionName:"data_security",type:"checkbox",label:(0,n.jsx)(i()._H,{id:"churnSurvey.reasons.dataSecurity",defaultMessage:"Data security"})},missingFeatures:{optionName:"missing_features",type:"checkbox",label:(0,n.jsx)(i()._H,{id:"survey.options.missingFeatures",defaultMessage:"Missing features"})},noLongerNeedAccess:{optionName:"no_longer_need_access",type:"checkbox",label:(0,n.jsx)(i()._H,{id:"survey.options.noLongerNeedAccess",defaultMessage:"No longer need access to Notion"})},noLongerWorkTogether:{optionName:"no_longer_work_together",type:"checkbox",label:(0,n.jsx)(i()._H,{id:"survey.options.noLongerWorksHere",defaultMessage:"No longer works here"})},notUsingEnough:{optionName:"not_using_enough",type:"checkbox",label:(0,n.jsx)(i()._H,{id:"survey.options.notUsingEnough",defaultMessage:"Not using it enough"})},other:{optionName:"other",type:"checkboxAndInput",label:(0,n.jsx)(i()._H,{id:"survey.options.other",defaultMessage:"Other"})},switching:{optionName:"switching",type:"checkboxAndInput",label:(0,n.jsx)(i()._H,{id:"survey.options.switching",defaultMessage:"Switching to another tool"}),placeholderText:o.switchingToNewTool},switchingToAnotherWorkspace:{optionName:"switching_to_another_workspace",type:"checkbox",label:(0,n.jsx)(i()._H,{id:"survey.options.switchingToAnotherWorkspace",defaultMessage:"Switching to another Notion workspace"})},tooDifficult:{optionName:"too_difficult",type:"checkbox",label:(0,n.jsx)(i()._H,{id:"survey.options.tooDifficult",defaultMessage:"Too difficult to use"})},tooExpensive:{optionName:"too_expensive",type:"checkbox",label:(0,n.jsx)(i()._H,{id:"survey.options.tooExpensive",defaultMessage:"Too expensive"})},upgradedByMistake:{optionName:"upgraded_by_mistake",type:"checkbox",label:(0,n.jsx)(i()._H,{id:"survey.options.upgradedByMistake",defaultMessage:"Upgraded by mistake"})},usingAnotherAiService:{optionName:"using_another_ai_service",type:"checkboxAndInput",label:(0,n.jsx)(i()._H,{id:"churnSurvey.reasons.usingAnotherAIService",defaultMessage:"Using another AI service"}),placeholderText:o.switchingToNewAiTool},qualityOfResults:{optionName:"quality_of_results",type:"checkbox",label:(0,n.jsx)(i()._H,{id:"churnSurvey.reasons.qualityOfResults",defaultMessage:"Quality of results"})}}},265464:(e,t,s)=>{s.d(t,{b:()=>i,z:()=>n});s(670560),s(122556),s(582845),s(250570),s(533019),s(721473),s(788208),s(22624),s(267602),s(30005);class i extends(()=>s(263184))().default{getInitialState(){return{options:[],customTextByIndex:{},selectedIndexes:new Set}}setOptions(e){this.setState({customTextByIndex:{},options:e,selectedIndexes:new Set})}setCustomTextByIndex(e,t){this.update((s=>({...s,customTextByIndex:{...s.customTextByIndex,[e]:t}})))}toggleIndex(e){this.update((t=>{const s=new Set(t.selectedIndexes);return s.has(e)?s.delete(e):s.add(e),{...t,selectedIndexes:s}}))}toSurveyResult(){const{customTextByIndex:e,options:t,selectedIndexes:s}=this.state,i=[],n=[],o={};return s.forEach((s=>{const a=t[s];i.push(a.optionName),n.push(s),"checkboxAndInput"===a.type&&e[s]&&(o[a.optionName]=e[s])})),{reasons:i,reasonIndexes:n,customTextByReason:o}}}const n=new i},941832:(e,t,s)=>{s.d(t,{f:()=>g});s(667294);var i=()=>s(766072),n=()=>s(788860),o=()=>s(513670),a=()=>s(979614),r=()=>s(984529),l=()=>s(830581),d=()=>s(921981),c=()=>s(631842),u=()=>s(856563),p=()=>s(265464),m=s(785893);async function g(e){const{environment:t,contractionSurveyId:s}=e;a().j(t,{name:"contraction_survey_opened",args:{contractionSurveyId:s}});const o=await async function(e){const{iconGroup:t,options:s,title:i,description:o}=e;return await c().o.showAsyncModal((e=>{const a=new(p().b);return a.setOptions(s),(0,m.jsx)(d().c,{isOpen:e.isOpen,onDismiss:e.onDismiss,onClosed:e.onClosed,areaConstraint:{width:{type:"min",length:406},height:{type:"unlimited",scroll:"allow"}},render:()=>(0,m.jsx)(l().sR,{header:(0,m.jsx)(l().vI,{iconAndTitle:(0,m.jsx)("div",{style:{padding:"0 24px"},children:(0,m.jsx)(l().kC,{iconGroup:t,title:i})}),description:o}),footer:(0,m.jsx)(l().a6,{layout:"vertical",primaryButtons:[{label:(0,m.jsx)(n()._H,{id:"contractionSurvey.continue",defaultMessage:"Continue"}),onClick:()=>e.resolve(a.toSurveyResult())}],secondaryButtons:[{buttonType:"dismiss"}]}),children:(0,m.jsx)(u().m,{store:a})})})}))}({iconGroup:i().X,title:(0,m.jsx)(n()._H,{id:"contractionSurvey.title",defaultMessage:"Why are you removing this member from your workspace?"}),description:(0,m.jsx)(n()._H,{id:"contractionSurvey.description",defaultMessage:"We'd love your input to make Notion better"}),options:f()});return o?a().j(t,{name:"contraction_survey_completed",args:{contraction_survey_id:s,reasons:o.reasons,reason_indexes:o.reasonIndexes,reason_other:o.customTextByReason.other}}):a().j(t,{name:"contraction_survey_dismissed",args:{contractionSurveyId:s}}),o}function f(){return[...(0,o().TV)([r().f.noLongerNeedAccess,r().f.noLongerWorkTogether,r().f.notUsingEnough,r().f.switching,r().f.switchingToAnotherWorkspace,r().f.tooExpensive]),r().f.other]}},724592:(e,t,s)=>{s.d(t,{R:()=>i});const i=(0,s(827282).CZ)("arrowUpRightSquare",{default:{loader:()=>s.e(37795).then(s.bind(s,237795))},small:{loader:()=>s.e(23099).then(s.bind(s,423099))},mini:{loader:()=>s.e(16954).then(s.bind(s,516954))},large:{loader:()=>s.e(54753).then(s.bind(s,954753))}})},766072:(e,t,s)=>{s.d(t,{X:()=>i});const i=(0,s(827282).CZ)("pencilLine",{default:{loader:()=>s.e(47736).then(s.bind(s,547736))},small:{loader:()=>s.e(91525).then(s.bind(s,591525))},mini:{loader:()=>s.e(60594).then(s.bind(s,160594))},large:{loader:()=>s.e(36121).then(s.bind(s,936121))}})},359071:(e,t,s)=>{s.d(t,{s:()=>i});const i=(0,s(827282).CZ)("personCircle",{default:{loader:()=>s.e(68260).then(s.bind(s,68260))},small:{loader:()=>s.e(25958).then(s.bind(s,225958))},mini:{loader:()=>s.e(36734).then(s.bind(s,336734))},large:{loader:()=>s.e(13183).then(s.bind(s,813183))}})},754918:(e,t,s)=>{s.d(t,{G:()=>i});const i=(0,s(827282).CZ)("personCropCircleBadgeExclamationPoint",{default:{loader:()=>s.e(7735).then(s.bind(s,107735))},small:{loader:()=>s.e(77965).then(s.bind(s,577965))},mini:{loader:()=>s.e(30314).then(s.bind(s,30314))},large:{loader:()=>s.e(89005).then(s.bind(s,589005))}})},708325:(e,t,s)=>{s.d(t,{$:()=>n});s(667294);var i=s(785893);const n=(0,s(827282).IU)("chartLine",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M15.625 10.625V8.2l-4.3 4.3-2.972-2.972-3.978 3.978v1.497H17.5v1.875h-15V3.125h1.875v7.728l3.978-3.978 2.972 2.972 2.972-2.972h-2.425V5h5.625v5.625h-1.875.003z"})})},405798:(e,t,s)=>{s.d(t,{IA:()=>n,o4:()=>o,zg:()=>a});var i=()=>s(513670);function n(e){if(i().jj(e).length<=3)return{success:!1,reason:{type:"password_too_consistent"}};if(e.length>=15)return{success:!0};if(e.length<8)return{success:!1,reason:{type:"password_too_short"}};const t=o(e),s=a(e);return t&&s?{success:!0}:t||s?s?t?{success:!1,reason:{type:"password_too_short"}}:{success:!1,reason:{type:"password_missing_letter"}}:{success:!1,reason:{type:"password_missing_number"}}:{success:!1,reason:{type:"password_missing_letter_and_number"}}}function o(e){return e.match(/[a-z]/i)}function a(e){return e.match(/\d/)}},141455:(e,t,s)=>{s.d(t,{mC:()=>l,II:()=>h,$W:()=>u,lJ:()=>p,KQ:()=>c,_e:()=>o()._e,V5:()=>o().V5});s(267602),s(653476),s(731107);var i=()=>s(629719),n=()=>s(779709),o=()=>s(259408);var a=()=>s(122792);const r={guests:{type:"cumulative",data:(0,o().Ay)({current:o().t.number()})},internal_guests:{type:"cumulative",data:(0,o().Ay)({current:o().t.number(),hasLowGuestLimit:o().t.boolean()})},members:{type:"cumulative",data:(0,o().Ay)({current:o().t.number()})},non_admin_members:{type:"check",data:o().t.isUndefined()},view_chart:{type:"per_use",data:o().t.isUndefined()},form_filesize:{type:"per_use",data:o().t.isUndefined()},form_customization:{type:"check",data:o().t.isUndefined()},premium_automations:{type:"check",data:o().t.isUndefined()},move_to:{type:"check",data:o().t.isUndefined()},claimable_spaces:{type:"check",data:o().t.isUndefined()},domain_settings:{type:"check",data:o().t.isUndefined()},managed_users:{type:"check",data:o().t.isUndefined()},saml:{type:"check",data:o().t.isUndefined()},scim:{type:"check",data:o().t.isUndefined()},export_members:{type:"check",data:o().t.isUndefined()},hipaa_compliance:{type:"check",data:o().t.isUndefined()},sites_multiple_public_domains:{type:"check",data:o().t.isUndefined()},custom_image_upload_favicon:{type:"check",data:o().t.isUndefined()},custom_public_sites_layout:{type:"check",data:o().t.isUndefined()},seo_title_and_description:{type:"check",data:o().t.isUndefined()},admin_transfer_private_content:{type:"check",data:o().t.isUndefined()},ai_slack_qna:{type:"check",data:o().t.isUndefined()},configurable_mention_invites:{type:"check",data:o().t.isUndefined()},configurable_retention:{type:"check",data:o().t.isUndefined()},team_self_promotion:{type:"check",data:o().t.isUndefined()},unbranded_forms:{type:"check",data:o().t.isUndefined()},ai_google_drive_qna:{type:"check",data:o().t.isUndefined()},watermarkless_chart_export:{type:"check",data:o().t.isUndefined()},configurable_deletion_and_retention_settings:{type:"check",data:o().t.isUndefined()},sudo_mode:{type:"check",data:o().t.isUndefined()},ai_github_connector:{type:"check",data:o().t.isUndefined()},ai_jira_connector:{type:"check",data:o().t.isUndefined()},slack_imports_invite:{type:"check",data:o().t.isUndefined()},content_reprovisioning:{type:"check",data:o().t.isUndefined()},ai_space_usage:{type:"cumulative",data:o().t.object({required:{current:o().t.number(),memberCount:o().t.number(),aiPromotionConfig:n().dL,space:o().t.undefinable(o().t.instanceOf(s(530980).ugu))},optional:{}})},ai_user_usage:{type:"cumulative",data:o().t.object({required:{current:o().t.number(),memberCount:o().t.number(),aiPromotionConfig:n().dL},optional:{}})},block_read_and_write_role:{type:"check",data:o().t.isUndefined()},invite_user_to_workspace_mentions:{type:"check",data:o().t.isUndefined()}},l=(0,s(696459).Yd)(r),d={guests:e=>{let{amount:t,billingData:s,data:{current:i}}=e;return m({billingData:s,amount:t,current:i,limits:{free:10,personal:"unlimited",student:"unlimited",plus:"unlimited",business:"unlimited",enterprise:"unlimited"},upsellMap:{free:"personal"}})},internal_guests:e=>{let{amount:t,billingData:s,data:{current:i,hasLowGuestLimit:n}}=e;return m({billingData:s,amount:t,current:i,limits:(0,a().gp)({hasLowGuestLimit:n}),upsellMap:{free:"personal",student:"business",personal:"business",plus:"business"}})},members:e=>{let{amount:t,data:{current:s},billingData:n}=e;return m({billingData:n,amount:t,current:s,limits:{free:i().gy(n)?1:"unlimited",personal:1,student:1,plus:"unlimited",business:"unlimited",enterprise:"unlimited"},upsellMap:{student:"plus",personal:"plus"}})},non_admin_members:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"plus"})},view_chart:e=>{let{amount:t,billingData:s}=e;return g({billingData:s,amount:t,limits:{free:1,personal:"unlimited",student:"unlimited",plus:"unlimited",business:"unlimited",enterprise:"unlimited"},upsellMap:{free:"personal"}})},form_filesize:e=>{let{amount:t,billingData:s}=e;return g({billingData:s,amount:t,limits:{free:5,personal:100,student:100,plus:100,business:100,enterprise:100},upsellMap:{free:"personal"}})},form_customization:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"personal"})},premium_automations:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"personal"})},move_to:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"personal"})},claimable_spaces:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"enterprise"})},domain_settings:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"enterprise"})},managed_users:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"enterprise"})},invite_user_to_workspace_mentions:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"enterprise"})},saml:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"business"})},scim:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"enterprise"})},unbranded_forms:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"personal"})},slack_imports_invite:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"enterprise"})},export_members:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"business"})},hipaa_compliance:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"enterprise"})},sites_multiple_public_domains:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"personal"})},custom_image_upload_favicon:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"personal"})},custom_public_sites_layout:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"personal"})},seo_title_and_description:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"personal"})},admin_transfer_private_content:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"enterprise"})},ai_slack_qna:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"plus"})},configurable_mention_invites:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"enterprise"})},configurable_retention:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"enterprise"})},ai_google_drive_qna:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"plus"})},watermarkless_chart_export:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"personal"})},team_self_promotion:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"enterprise"})},configurable_deletion_and_retention_settings:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"enterprise"})},sudo_mode:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"enterprise"})},ai_github_connector:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"plus"})},ai_jira_connector:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"plus"})},content_reprovisioning:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"enterprise"})},ai_space_usage:e=>{let{billingData:t,data:{current:s,memberCount:o,aiPromotionConfig:a,space:r},amount:l,actor:d}=e;const c={type:"cumulative",current:s,total:"unlimited"};if(d.isAdminActor)return{type:"available",limit:c};const u=i().ps(t.subscription,"ai");if(d.isAdminActor||u)return{type:"available",limit:c};if(i().Rd(t.subscription))return{type:"blocked",limit:{type:"cumulative",current:s,total:0},upsell:{type:"contact_account_manager"}};const p="unknown"===l?0:l,m=function(e){let{billingData:t,space:s,config:o,numMembers:a}=e;const{baseGrant:r,studentGrant:l,grant032023:d,maxAllowance:c,studentGitHubGrant:u}=o;if(i().ps(t.subscription,"student")){let e=n().rQ(o,l,1);return n().pB({space:s,grantId:n().lN})&&(e+=n().rQ(o,u,1)),e}const p=n().rQ(o,r,a);let m=c.paid;["free","personal"].includes(i().zt(t.subscription))&&(m=c.free);let g=Math.min(p,m);return n().pB({space:s,grantId:n().u4})&&(g+=n().rQ(o,d,a)),g}({billingData:t,space:r,config:a,numMembers:o});return s+p<=m?{type:"available",limit:{type:"cumulative",current:s,total:m},upsell:{type:"product",product:"ai",limit:c}}:{type:"upsell",limit:{type:"cumulative",current:s,total:m},upsell:{type:"product",product:"ai",limit:c}}},ai_user_usage:e=>{let{billingData:t,data:{current:s,memberCount:i,aiPromotionConfig:n},amount:o}=e;const a={type:"cumulative",current:s,total:"unlimited"},r=n.userGrant,l=1===i?r.singlePlayerAmount:r.multiplayerAmount;return s+("unknown"===o?0:o)<=l?{type:"available",limit:{type:"cumulative",current:s,total:l},upsell:{type:"product",product:"ai",limit:a}}:{type:"upsell",limit:{type:"cumulative",current:s,total:l},upsell:{type:"product",product:"ai",limit:a}}},block_read_and_write_role:e=>{let{billingData:t}=e;return f({billingData:t,minimumTier:"personal"})}};function c(e,t){return(0,o().KQ)(e,r,d,t)}function u(e,t){return(0,o().$W)(e,r,d,t)}function p(e,t){return(0,o().$W)(e,r,d,{...t,state:t.state,scope:{...t.scope,billingData:{...t.scope.billingData,subscription:{trialEnd:t.state.trialEnd,items:t.state.items}}}})}function m(e){let{billingData:t,amount:s,current:n,limits:o,upsellMap:a}=e;const r=i().zt(t.subscription),l=o[r],d={current:n,total:l,type:"cumulative"},c=a[r],u=c?{type:"product",product:c,limit:{type:"cumulative",current:n,total:o[c]}}:{type:"contact_sales"};return l&&("unlimited"===l||"unknown"!==s&&s+n<=l)?{type:"available",limit:d,upsell:u}:{type:"upsell",limit:d,upsell:u}}function g(e){let{billingData:t,amount:s,limits:n,upsellMap:o}=e;const a=i().zt(t.subscription),r=n[a],l={amount:r,type:"per_use"},d=o[a],c=d?{type:"product",product:d,limit:{type:"per_use",amount:n[d]}}:{type:"contact_sales"};return r&&("unlimited"===r||"unknown"!==s&&s<=r)?{type:"available",limit:l,upsell:c}:{type:"upsell",limit:l,upsell:c}}function f(e){let{billingData:t,minimumTier:s}=e;const n=i().zt(t.subscription),o={type:"none"};return(0,a().$V)(n,s)?{type:"available",limit:o}:{type:"upsell",limit:o,upsell:{type:"product",product:s,limit:o}}}function h(e){return((null==e?void 0:e.items)??[]).filter((e=>"sites_custom_hostnames"===i().tw(e))).reduce(((e,t)=>e+t.quantity),0)}}}]);