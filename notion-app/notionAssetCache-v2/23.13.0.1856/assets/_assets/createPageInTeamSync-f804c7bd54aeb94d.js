"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[65071,14705,61218],{630903:(e,t,n)=>{n.r(t),n.d(t,{maybeTurnCollectionViewIntoCollectionViewPage:()=>y,transformBlocks:()=>k,transformIntoColumnList:()=>C});n(241792);var o=()=>n(492788),r=()=>n(156642),a=()=>n(396136),i=()=>n(513670),c=()=>n(282662),s=()=>n(332542),l=()=>n(771678),d=()=>n(636340),m=()=>n(453999),S=()=>n(879952),p=()=>n(990966),f=()=>n(269299),u=()=>n(28063),v=()=>n(540413),g=()=>n(487270),b=()=>n(852465),T=()=>n(749826),I=()=>n(826955),h=()=>n(262453);function k(e){const{environment:t,blocks:n,blockType:h,transaction:k}=e;if(h!==r().Ti.transclusionContainer)if(h===r().Ti.callout&&T().default.checkGate({gateName:"create_v2_callouts"}))!function(e){const{environment:t,blocks:n,transaction:o}=e,i=n[0];if(!i)return;const c=i.getRecordStoreUIParent();if(!c||!(0,b().dz)(c))return;const m=c.getRecordStoreUIParent();if(!(m&&m instanceof I().G))return;const f=(0,g().TS)({environment:t,table:a().iU,spaceId:m.getSpaceId()}),u=d().j4({environment:t,id:f,type:r().Ti.callout,inMemoryRecordCache:c.inMemoryRecordCache,transaction:o,spaceId:m.getSpaceId(),format:{callout_version:2}});s().jG({parentStore:c,childStore:u,after:i.id,transaction:o});w({newParentStore:u.getContentStore(),blocks:n,transaction:o}),l().WO({store:u,transaction:o}),p().clear({environment:t}),S().ZH({environment:t}),S().Z5({environment:t,stores:[u]})}({environment:t,blocks:n,transaction:k});else if(h!==r().Ti.columnList)if(h!==r().Ti.slide)if((0,r().sX)(h)){const e=parseInt(h.replace("column","").replace("block","")),r=i().oA(i().DZ(e-1,(()=>v().insertTextBelow({environment:t,blocks:n,transaction:k})))),a=[...n,...r],c=C({environment:t,blocks:a,transaction:k});o().default.afterNextFlush((()=>{p().setSelectionAtStart({store:c[0].getBlockTitleStore()})}))}else for(const r of n)if(r.isCalloutV2()){const e=r.getParentBlockStore();if(e){const a=r.getContentStores();f().applyOperation({store:e,operation:{pointer:e.pointer,path:["content"],command:"insertChildrenAfter",args:{ids:a.map((e=>e.id)),after:r.id}},transaction:k}),s().hr({parentStore:e.getContentStore(),childStore:r,transaction:k});for(const e of a)u().vs({environment:t,block:e,blockType:h,transaction:k,isMultiBlockTransformation:n.length>1});o().default.afterNextFlush((()=>{m().DQ(t,a.map((e=>e.id)))}))}}else u().vs({environment:t,block:r,blockType:h,transaction:k,isMultiBlockTransformation:n.length>1});else!function(e){const{environment:t,blocks:n,transaction:o}=e,i=n[0];if(!i)return;const c=i.getRecordStoreUIParent();if(!c||!(0,b().dz)(c))return;const l=c.getRecordStoreUIParent();if(!(l&&l instanceof I().G))return;const m=(0,g().TS)({environment:t,table:a().iU,spaceId:l.getSpaceId()}),f=d().j4({environment:t,id:m,type:r().Ti.slide,inMemoryRecordCache:c.inMemoryRecordCache,transaction:o,spaceId:l.getSpaceId()});s().jG({parentStore:c,childStore:f,after:i.id,transaction:o});w({newParentStore:f.getContentStore(),blocks:n,transaction:o}),p().clear({environment:t}),S().ZH({environment:t}),S().Z5({environment:t,stores:[f]})}({environment:t,blocks:n,transaction:k});else C({environment:t,blocks:n,transaction:k});else!function(e){const{environment:t,blocks:n,transaction:o}=e,i=n[0];if(!i)return;const s=i.getRecordStoreUIParent();if(!s||!(0,b().dz)(s))return;const l=s.getRecordStoreUIParent();if(!l||!(0,b().OY)(l))return;if(!l.isDefined())return;const m=(0,g().TS)({environment:t,table:a().iU,spaceId:l.getSpaceId()}),f=d().j4({environment:t,id:m,type:r().Ti.transclusionContainer,inMemoryRecordCache:s.inMemoryRecordCache,transaction:o,spaceId:l.getSpaceId()});c().BE({parentStore:s,insertStore:f,afterStore:i,transaction:o});w({newParentStore:f.getContentStore(),blocks:n,transaction:o}),p().clear({environment:t}),S().ZH({environment:t}),S().Z5({environment:t,stores:[f]})}({environment:t,blocks:n,transaction:k})}function y(e){let{environment:t,blocks:n,transaction:o}=e;(function(e){return 1===e.length&&"collection_view"===e[0].getType()})(n)&&k({environment:t,blocks:n,blockType:"collection_view_page",transaction:o})}function C(e){const{environment:t,blocks:n,transaction:o}=e,i=n[0];if(!i)return[];const s=i.recordStoreUIParentStore;if(null==s||!s.valueIs(h().i))return[];const l=(0,g().TS)({environment:t,table:a().iU,spaceId:i.getSpaceId()}),m=d().j4({environment:t,id:l,type:r().Ti.columnList,inMemoryRecordCache:i.inMemoryRecordCache,transaction:o,spaceId:i.getSpaceId()}),{childStore:S}=c().Vt({parentStore:s,insertStore:m,beforeStore:i,transaction:o});return n.map((e=>{const n=(0,g().TS)({environment:t,table:a().iU,spaceId:i.getSpaceId()}),l=d().j4({environment:t,id:n,type:r().Ti.column,inMemoryRecordCache:i.inMemoryRecordCache,transaction:o,spaceId:i.getSpaceId()}),{childStore:m}=c().Od({parentStore:s,childToRemoveStore:e,transaction:o}),{childStore:p}=c().BE({parentStore:S.getContentStore(),insertStore:l,transaction:o}),{childStore:f}=c().BE({parentStore:p.getContentStore(),insertStore:m,transaction:o});return f}))}function w(e){const{newParentStore:t,blocks:n,transaction:o}=e;for(const r of n){const e=r.getRecordStoreUIParent();null!=e&&e.valueIs(h().i)&&(c().Od({parentStore:e,childToRemoveStore:r,transaction:o}),c().R3({parentStore:t,appendStore:r,transaction:o}))}}},128646:(e,t,n)=>{n.r(t),n.d(t,{moveToTeamImpl:()=>s});var o=()=>n(513670),r=()=>n(696459),a=()=>n(332542),i=()=>n(968377),c=()=>n(630903);function s(e){let{transaction:t,currentSpaceViewStore:n,teamStore:s,targets:l,location:d,environment:m}=e;const S=n.getTeamsStores(),p=s.getTeamPagesStore();c().maybeTurnCollectionViewIntoCollectionViewPage({environment:m,blocks:l,transaction:t});for(const c of l){const e=o().sE(S,(e=>{const t=e.getTeamPagesStore().getValue();if(t)return t.includes(c.id)}));(null==e?void 0:e.id)!==s.id&&("append"===d.type?a().jG({parentStore:p,childStore:c,after:d.after,transaction:t}):"prepend"===d.type?a().SH({parentStore:p,childStore:c,before:d.before,transaction:t}):(0,r().t1)(d),e&&i().sp({teamStore:e,store:c,transaction:t}))}return s}},53906:(e,t,n)=>{n.r(t),n.d(t,{createPageInTeamSyncImpl:()=>d});n(821057);var o=()=>n(306164),r=()=>n(54512),a=()=>n(784234),i=()=>n(145284),c=()=>n(605067),s=()=>n(906591),l=()=>n(128646);function d(e){const{environment:t,spaceStore:n,spaceViewStore:d,teamStore:m,from:S,title:p,loading:f,appendOrPrepend:u,transaction:v}=e;if(!(0,s().si)({teamStore:m,environment:t}))throw new Error("User is not eligible to create top-level page in team");const g=i().KE({environment:t,spaceStore:n,spaceViewStore:d,isPrivate:!1,prepend:!1,title:p,loading:f,transaction:v});r().t(t,{teamStore:m,from:S,pageId:g.id,transaction:v}),a().u9({store:g,transaction:v});const b=(0,c().uw)({type:"team",id:m.id});if(b.table!==o().e0)throw new Error("Assertion failure, moveToStore table is not TeamTable!");return(0,l().moveToTeamImpl)({environment:t,transaction:v,action:"add",teamStore:b,currentSpaceViewStore:d,targets:[g],value:{type:"team",id:m.id},location:{type:u}}),g}}}]);