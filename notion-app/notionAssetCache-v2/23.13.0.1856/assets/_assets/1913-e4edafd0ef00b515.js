"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[1913,39447],{820185:(e,t,o)=>{o.d(t,{r:()=>Z,z:()=>L});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(470928);var n=()=>o(492788),r=()=>o(659089),a=()=>o(552221),i=()=>o(226413),l=()=>o(532850),s=()=>o(803021),c=()=>o(646574),d=()=>o(874459),u=()=>o(177634),p=()=>o(998411),g=()=>o(114079),m=()=>o(955620),f=()=>o(572948),h=()=>o(513670),y=()=>o(696459),v=()=>o(326966),b=()=>o(970105),S=()=>o(932641),x=()=>o(967092),C=()=>o(205228),M=()=>o(338530),k=()=>o(141735),_=()=>o(337897),w=()=>o(641702),I=()=>o(615676),P=()=>o(185697),T=()=>o(527278),R=()=>o(749826),V=()=>o(250303),A=()=>o(909240),B=()=>o(959137),F=()=>o(844085),j=()=>o(269299);async function Z(e){const{environment:t,theme:o,store:n,schema:i,property:c,collectionContextStore:g}=e,h=t.device,b=i[c],S=await B().F.clipboardActions.load();if(b){switch(b.type){case"formula":{const e=await k().F.formulas.load();"v2"===b.version?function(e){const{clipboardActions:t,environment:o,store:n,propertySchema:r,property:a,formulasModule:i}=e,l=n.getModel();if(!r.formula2||!l)return;const s=T().Z.getIntl(),c=(0,p().r)(),d=i.evaluateCollectionFormula2({block:l,property:a,formulaCode:r.formula2.code,getRecordModel:n.getRecordModel,intl:s,userTimeZone:c,depth:0,visitedProperties:new Set,resultCache:new Map,regExpCache:new Map,experimentService:R().default,collectionFeatureGates:(0,I().W)()});if(!d)return;const g=(0,u().j4)(d),m=(0,w().Xh)(g,n);t.copyString({stringValue:m,environment:o,copiedMessage:t.clipboardMessages.copiedPropertyToClipboard})}({clipboardActions:S,environment:t,store:n,propertySchema:b,property:c,formulasModule:e}):function(e){var t;const{clipboardActions:o,environment:n,store:r,schema:a,property:i,propertySchema:l,formulasModule:c}=e,d=r.getValue();if(!d)return;const u=c.evaluateFormulaProperty({property:i,schema:a,block:d,getRecordValue:r.getRecordValue,collectionRequestContext:{userId:void 0,userTimeZone:(0,p().r)(),depth:0,intl:T().Z.getIntl(),resultCache:new Map,regExpCache:new Map,visitedProperties:new Set,experimentService:R().default,collectionFeatureGates:(0,I().W)()}}),g=null==l||null===(t=l.formula)||void 0===t?void 0:t.result_type;switch(g){case"number":v().hj(u)&&D({clipboardActions:o,value:u,propertySchema:l,environment:n});break;case"date":u&&s().U3(u)&&N({clipboardActions:o,date:u,environment:n});break;case"text":u&&o.copyString({stringValue:u.toString(),environment:n,copiedMessage:o.clipboardMessages.copiedPropertyToClipboard});break;case"checkbox":case void 0:return;default:(0,y().t1)(g)}}({clipboardActions:S,environment:t,store:n,schema:i,property:c,propertySchema:b,formulasModule:e});break}case"person":{const e=n.getPropertyValue(c);O({actors:l().DW({textValue:e,propertySchema:b,blockCreatorPointer:n.getCreatedByPointer()}),clipboardActions:S,environment:t,store:n});break}case"created_by":{const e=n.getCreatedByPointer();e&&O({actors:[e],clipboardActions:S,environment:t,store:n});break}case"last_edited_by":{const e=n.getLastEditedByPointer();e&&O({actors:[e],clipboardActions:S,environment:t,store:n});break}case"number":D({clipboardActions:S,environment:t,propertySchema:b,value:l().VY(n.getPropertyValue(c))});break;case"text":{const e=n.getPropertyValue(c);if(!e)return;const r=f().hW({textValue:{value:e,spaceId:n.getSpaceId()},getRecordModel:n.getRecordModel,getRecordRole:n.getRecordRole,disableHover:!1,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!0,disableSuggestionAnnotations:!1,disableLinks:!1,disabled:!1,userTimeZone:(0,p().r)(),isClient:!0,isAndroid:h.isAndroid,isSafariOrIOS:h.isSafari||h.isIOS,isWindows:h.isWindows,showEmojiInline:h.isWindows,emojiType:"raw",theme:o,baseUrl:C().default.domainBaseUrl,publicDomainName:C().default.publicDomainName,currentUserId:t.currentUser.id,intl:T().Z.getIntl(),katex:void 0,getPublicBaseUrlForPage:void 0,externalIntegrations:[],formulaValueTypes:[],emojiData:M().Z.state,isMobileNative:h.isMobileNative,isMobileNativeExternalLinkFixEnabled:R().default.checkGate({gateName:"mobile_native_external_link_fix"})}),a=(0,w().Xh)(n.getPropertyValue(c),n);S.copyHtml({stringValue:a,htmlValue:r,environment:t,copiedMessage:S.clipboardMessages.copiedPropertyToClipboard});break}case"url":case"email":case"phone_number":{const e=m().Jcv(n.getPropertyValue(c));S.copyString({stringValue:e,environment:t,copiedMessage:S.clipboardMessages.copiedPropertyToClipboard});break}case"date":{const e=n.getPropertyValue(c),o=(0,a().G)(e);o&&N({clipboardActions:S,date:o,environment:t,dateFormat:b.date_format,timeFormat:b.time_format});break}case"last_edited_time":case"created_time":{const e=n.getKeyStore(b.type).getValue();if(e){N({clipboardActions:S,date:d().CQ(e,(0,p().r)()),environment:t,dateFormat:b.date_format,timeFormat:b.time_format})}break}case"auto_increment_id":{const e=n.getPropertyValue(c);!function(e){const{clipboardActions:t,value:o,environment:n,collectionContextStore:a}=e;if(o&&a){var i;const e=(null===(i=a.collectionStore())||void 0===i||null===(i=i.getRecordKeyStore())||void 0===i?void 0:i.getRecordKey())??"";t.copyString({stringValue:(0,r().wf)(e,o),environment:n,copiedMessage:t.clipboardMessages.copiedPropertyToClipboard})}}({clipboardActions:S,value:l().ah(e),environment:t,collectionContextStore:g});break}}V().S$(t,g,{block_id:n.id,property:c,property_type:b.type})}}function O(e){const{actors:t,clipboardActions:o,environment:n,store:r}=e,a=l().C1(t);o.copyString({stringValue:(0,w().Xh)(a,r),environment:n,copiedMessage:o.clipboardMessages.copiedPropertyToClipboard})}function D(e){const{clipboardActions:t,value:o,propertySchema:n,environment:r}=e;if(!h().i2(o)&&!v().z4(o)){const e=(null==n?void 0:n.number_format)||g().dk,a=g().uf(o,e,T().Z.getIntl());t.copyString({stringValue:a,environment:r,copiedMessage:t.clipboardMessages.copiedPropertyToClipboard})}}function N(e){const{clipboardActions:t,date:o,environment:n,dateFormat:r,timeFormat:a}=e,i=(0,c().ZV)({value:o,date_format:r??s().sF,time_format:a??s().c_,allowRelativeDates:!0,intl:T().Z.getIntl()});t.copyString({stringValue:i,environment:n,copiedMessage:t.clipboardMessages.copiedPropertyToClipboard})}async function L(e){const{element:t,rect:o,environment:r,onClick:a,store:s,additionalStores:c=[],property:d,format:u,collectionStore:p,blockPropertyValueOverlayStore:g,disableHorizontalEdgeScroll:m,collectionContextStore:f,collectionSchema:h,mouseStore:y,setMouseEntered:v,statusSetCheckbox:C,preventClearSelection:M,collectionsBulkActionsToolbarStore:k,scrollerContext:w,sizing:I,formQuestionStore:R,onClose:B}=e,{device:Z,WindowSizeStore:O}=r,D=f&&_().aJ({store:s,additionalStores:c,collectionContextStore:f});let N=p.getSchema();D&&(N=f.normalizedSchemaStore.state),h&&(N=h);const L=(0,P().A)({collectionStore:p,collectionContextStore:f,property:d}),E=N[L],U=null==E?void 0:E.type;if(!U)return;if(_().g0({property:d,collectionStore:p}))return;const K=s.getPropertyStore(L);if("checkbox"===U)K&&j().createAndCommit({userAction:"BlockPropertyValue.handleEditButtonClick",environment:r,canUndo:!0,perform:e=>{A().vO({stores:[s,...c],property:L,transaction:e})}}),f&&V().rv({environment:r,collectionContextStore:f,block_id:K.id,property:L,property_type:U,from:_().Sy(u),isFromBulkActionsToolbar:Boolean(k)});else if("status"===U&&"status"===E.type&&C){const e=s.getPropertyValue(L),t=l().rO(e,E,T().Z.getIntl());K&&j().createAndCommit({userAction:"BlockPropertyValue.handleEditButtonClick",environment:r,canUndo:!0,perform:e=>{const o=E.groups??[],n=!0===t?o[0]:o[o.length-1],a=(E.options??[]).find((e=>{var t;return e.id===(null==n||null===(t=n.optionIds)||void 0===t?void 0:t[0])}));if(a)for(const t of[s,...c])b().sO({environment:r,store:t.getPropertyStore(L),value:l().Is(a.value),transaction:e})}})}else{-1===i().uk.indexOf(U)&&(null==v||v(!1),y&&y.setState({...y.state,mouseEntered:!1}),t&&w&&Z.isMobileNative&&S().mZ[U]===x().kQ.Popup&&(F().bx({element:t,scrollerContext:w,vertical:{reveal:"bottom",paddingToTopEdge:4,paddingToBottomEdge:O.getSafePaddingBottomPx(320)},horizontal:{reveal:"closest"}}),await n().default.afterNextFlush()),A().bA({environment:r,blockPropertyValueOverlayStore:g,store:s,additionalStores:c,property:L,format:u,rect:o,disableHorizontalEdgeScroll:m,collectionContextStore:f,collectionSchema:h,preventClearSelection:M,collectionsBulkActionsToolbarStore:k,sizing:I,formQuestionStore:R,onClose:B}),f&&V().zF({environment:r,collectionContextStore:f,property:L,property_type:U,from:_().Sy(u),isFromBulkActionsToolbar:Boolean(k)}))}a&&a()}},971928:(e,t,o)=>{o.d(t,{P3:()=>u,n6:()=>p,yW:()=>m});o(670560),o(267602),o(470928);var n=()=>o(226413),r=()=>o(543172),a=()=>o(932753),i=()=>o(887430),l=()=>o(527278),s=()=>o(826955),c=()=>o(308186),d=()=>o(269299);function u(e){const{modification:t,property:o,propertySchema:i,options:u,groupIndex:p,environment:m,collectionStore:f}=e;let h,y;if("keyedObjectListRemove"===t.type)h={pointer:f.pointer,command:"keyedObjectListRemove",path:["schema",o,"options"],args:{remove:{id:t.id}}},void 0!==p&&"status"===i.type&&(y={pointer:f.pointer,command:"listRemove",path:["schema",o,"groups",p,"optionIds"],args:{id:t.id}});else{if(u){if(u.find((e=>e.value===t.newValue)))return void c().UW(l().Z.formatMessage(g.optionAlreadyExists))}if("keyedObjectListUpdate"===t.type)h={pointer:f.pointer,command:"keyedObjectListUpdate",path:["schema",o,"options"],args:{value:{...t.option,value:t.newValue}}};else{const e=i.options||[];let a=(0,n().TL)(e);if("status"===i.type&&void 0!==p){var v;const e=null===(v=i.groups)||void 0===v||null===(v=v[p])||void 0===v?void 0:v.color;e&&(a=e)}const l={id:(0,r().ZP)(),value:t.newValue,color:a};if("autoSortInsert"===t.type){if(!(0,n().cu)(i))return;h=(0,n().Ch)({collectionId:f.id,property:o,propertySchema:i,newOption:l,isAscending:"alphabetical"===i.auto_sort_options})}else"keyedObjectListBefore"===t.type?(h={pointer:f.pointer,command:"keyedObjectListBefore",path:["schema",o,"options"],args:{value:l,before:t.beforeOption}},void 0!==p&&"status"===i.type&&(y={pointer:f.pointer,command:"listBefore",path:["schema",o,"groups",p,"optionIds"],args:{id:l.id}})):"keyedObjectListAfter"===t.type&&(h={pointer:f.pointer,command:"keyedObjectListAfter",path:["schema",o,"options"],args:{value:l,after:t.afterOption}},void 0!==p&&"status"===i.type&&(y={pointer:f.pointer,command:"listBefore",path:["schema",o,"groups",p,"optionIds"],args:{id:l.id}}))}}a().HW({environment:m,collectionStore:f,performTransaction:e=>{d().applyOperation({store:f,operation:h,transaction:e}),y&&d().applyOperation({store:(0,s().Kv)(f,y.pointer),operation:y,transaction:e})}})}function p(e){const{newValues:t,property:o,schema:r,collectionStore:l,environment:c}=e,u=r[o];let p;if("status"===(null==u?void 0:u.type)){p=[[]];for(const e of t)e.startsWith("group-header-")?p.push([]):p[p.length-1].push(e)}else p=t;const g=(0,i().YL)({newOptions:p,collectionId:l.id,property:o,schema:r});if(g){if(u&&(0,n().cu)(u)){"manual"!==(u.auto_sort_options||"manual")&&g.push({pointer:l.pointer,command:"update",path:["schema",o],args:{auto_sort_options:"manual"}})}a().HW({environment:c,collectionStore:l,performTransaction:e=>{for(const t of g)d().applyOperation({store:(0,s().Kv)(l,t.pointer),operation:t,transaction:e})}})}}const g=(0,o(788860).vU)({deleteModalPrompt:{id:"database.selectPropertyOptionEditMenu.deleteModal.prompt",defaultMessage:"Are you sure you want to delete this option?"},acceptButtonLabel:{id:"database.selectPropertyOptionEditMenu.deleteModal.confirmButton",defaultMessage:"Delete"},preventDefaultStatusOptionDelete:{defaultMessage:"Cannot delete default option.",id:"database.editProperty.errorDialog.forbidDeleteDefaultOption.message"},optionAlreadyExists:{defaultMessage:"Option already exists.",id:"database.optionExistsAlreadyError.message"}});function m(e){const{option:t,propertySchema:o,property:r,collectionStore:a,statusGroup:i,environment:s}=e;"status"!==o.type||t.value!==o.defaultOption?c().vC({showCancel:!0,keepFocus:!1,message:l().Z.formatMessage(g.deleteModalPrompt),items:[{label:l().Z.formatMessage(g.acceptButtonLabel),color:"red",onAccept:()=>{if((0,n().cu)(o)||"status"===o.type)if("status"===o.type&&i){const e=(o.groups??[]).findIndex((e=>e.id===i.id));u({modification:{type:"keyedObjectListRemove",id:t.id},property:r,propertySchema:o,environment:s,collectionStore:a,groupIndex:e})}else u({modification:{type:"keyedObjectListRemove",id:t.id},property:r,propertySchema:o,environment:s,collectionStore:a})}}]}):c().UW(l().Z.formatMessage(g.preventDefaultStatusOptionDelete))}},463058:(e,t,o)=>{o.d(t,{O:()=>m,Q:()=>f});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(470928);var n=()=>o(506347),r=()=>o(226413),a=()=>o(532850),i=()=>o(135857),l=()=>o(663132),s=()=>o(876822),c=()=>o(749826),d=()=>o(482162),u=()=>o(826955),p=()=>o(491927),g=()=>o(497065);function m(e){let{relationPointers:t,relatedPageStore:o,environment:r,from:a,peekMode:c,openInNew:m}=e;const{mainEditorCurrentBlockStore:f}=s().default.state;if(!f)return;const h=t.find((e=>e.id===o.id));if(!h)return;let y;if(m){const e=u().G.createChildStore(f,h),t=e.getModel(),o=l().Or(r,e);y=(0,i().Z)({pageId:h.id,pageModel:t,baseUrl:o,pageVisitSource:n().tY.MentionInPage})}else{const e=f.getModel(),t=l().Or(r,f);y=(0,i().Z)({pageId:f.id,pageModel:e,baseUrl:t,peekViewBlockId:h.id,peekMode:(0,d().getUrlParamFromPeekMode)("full_page"===c?void 0:c??d().default.state.mode),pageVisitSource:n().tY.MentionInPage}),p().XX(r,{from:a,meta_click:Boolean(m)})}g().c4({environment:r,url:y,openInNew:m})}async function f(e){var t,o;const{update:n,environment:i,store:l,collectionStore:d,propertySchema:p}=e,g=l.state.isOpen?l.state:null,m=new Set(n.oldValues),f=n.newValues.filter((e=>!m.has(e)));if(!c().default.checkGate({gateName:"relation_two_way_limit_of_1_add_relation_confirmation_dialog"}))return!1;const h=s().default.state.currentUserSettingsStore;if(Boolean(null==h?void 0:h.getSettingsStore().getKeyStore("relation_limit_confirmation_dialog_dismissed_at").getValue()))return!1;if(1!==f.length||!g)return!1;const y=g.property,v=(null===(t=g.collectionContextStore)||void 0===t?void 0:t.collectionViewStore())||(null==d||null===(o=d.getParentBlockStore())||void 0===o?void 0:o.getCollectionViewStores()[0]);if(!d||!v||!p)return!1;const b=await async function(e){const{collectionStore:t,property:o,environment:n,targetCollectionStore:a}=e,i=t.getSchema()[o];if(!i||"relation"!==i.type)return!1;const l=r().j0(i),s=i.property;if(!l||!s)return!1;const c=a??new(u().NW)(n,l);await c.load();const d=c.getSchema();if(!(0,r().$u)({propertySchema:i,property:o,sourceCollectionId:t.id,targetCollectionSchema:d}))return!1;const p=d[s];return!(!p||"relation"!==p.type)&&Boolean(p.limit)}({collectionStore:d,property:y,environment:i});if(!b)return!1;const S=await async function(e){const{collectionStore:t,relationPointer:o,environment:n,property:r}=e,i=new(u().G)(n,o);await i.load();const l=t.getSchema()[r];if(!l||"relation"!==l.type)return;const s=l.property;if(!s)return;const c=i.getPropertyValue(s);if(!c)return;const[d]=a().rq(c);return d}({collectionStore:d,relationPointer:f[0],property:y,environment:i});if(!S)return!1;const x=new(u().G)(i,S);await x.load();return{blockWithExistingRelationTitle:x.getPropertyValue("title"),currentBlockTitle:g.store.getPropertyValue("title"),update:n,canAccessBlockWithExistingRelation:x.canRead()}}},707461:(e,t,o)=>{o.d(t,{Pm:()=>l,Xj:()=>a,wC:()=>i});var n=()=>o(435308);class r extends(()=>o(263184))().default{getInitialState(){return{popupRenderedInPage:!1,popupRenderedInPeekView:!1}}}const a=new r,i=new(n().default)((()=>!1!==a.state.popupRenderedInPage),{debugName:"AssistantWriterRenderedInPageStore"}),l=new(n().default)((()=>!1!==a.state.popupRenderedInPeekView),{debugName:"AssistantWriterRenderedInPeekViewStore"})},922646:(e,t,o)=>{o.d(t,{wK:()=>m,yY:()=>g,zM:()=>p});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(470928),o(241792);var n=()=>o(455947),r=()=>o(342792),a=()=>o(543172),i=()=>o(269299),l=()=>o(615676),s=()=>o(99537),c=()=>o(913011),d=()=>o(356117),u=()=>o(749826);function p(e){const{environment:t,layoutStore:o,currentQuestionModule:n,area:l,property:c,filterValue:u,setModuleSelection:p}=e;i().createAndCommit({userAction:"FormSelectProperty.handleAddConditionalLogic",environment:t,canUndo:!0,perform:e=>{if(!o.getModel())return;const i=(0,a().ZP)(),g=(0,a().ZP)(),m=function(e){switch(e.type){case"select":return{operator:"enum_is",value:{type:"exact",value:e.value.value}};case"multi_select":return{operator:"enum_contains",value:{type:"exact",value:e.value.value}};case"checkbox":return{operator:"checkbox_is",value:{type:"exact",value:!0}}}}(u);(0,d().Uq)({environment:t,transaction:e,layoutStore:o,position:{area:l,moduleId:n.id},updatedModule:{...n,conditionalGroups:[...n.conditionalGroups??[],{id:i,trigger:{property:c,filter:m},children:[g]}]}});const f={id:g,type:"placeholder",parentModuleId:n.id,parentConditionalGroupId:i};(0,s().sW)({environment:t,transaction:e,layoutStore:o,position:{type:"absolute",area:"form_conditional_modules",parentConditionalGroupId:i,parentModuleId:n.id},module:f,sessionId:(0,r().ZP)(),isPropertyCreation:!1}),p&&p({type:"existing_module",moduleId:g,isDragging:!1})}})}function g(e){const{environment:t,parentModule:o,groupId:n,layoutStore:r}=e;i().createAndCommit({userAction:"FormConditionalLogicModuleRenderer.deleteConditionalGroup",environment:t,canUndo:!0,perform:e=>{var a,i;const l=null==r?void 0:r.getModel();if(!r||!l)return;const s=null===(a=o.conditionalGroups)||void 0===a?void 0:a.filter((e=>e.id!==n)),u=null===(i=o.conditionalGroups)||void 0===i?void 0:i.find((e=>e.id===n));if(void 0!==u){for(const o of u.children??[])(0,c().H)({environment:t,transaction:e,layoutStore:r,position:{area:"form_conditional_modules",moduleId:o}});(0,d().Uq)({environment:t,transaction:e,layoutStore:r,position:{area:"form_layout_schema",moduleId:o.id},updatedModule:{...o,conditionalGroups:s}})}}})}function m(e){const{currentVisibleQuestionModules:t,updatedQuestionModule:o,draftSubmissionPageStore:r,collectionSchema:a,nestedQuestionModules:i,intl:s}=e;if(!o.conditionalGroups)return;const c=[],d=[],p=new Set(t.map((e=>e.id))),g=r.getModel();if(!g)return;for(const h of o.conditionalGroups){const e=h.trigger;if((0,n().Y1)({filter:e.filter,property:e.property,propertyMapping:void 0,context:{schema:a,userId:void 0,userTimeZone:"",userStartOfWeek:0,relativeVariableResult:void 0,currentPageInRelatedCollection:void 0,intl:s,collectionFeatureGates:(0,l().W)()},depth:0})({block:g,getRecordModel:r.getRecordModel,propertyMapping:void 0,resultCache:new Map,regExpCache:new Map,experimentService:u().default,formulasModule:void 0}))for(const t of h.children??[]){const e=i[t];if(!e||"formQuestion"!==e.type)continue;if(p.has(e.id))continue;c.push(e);const o=f({currentQuestionModule:e,evaluateChildVisibility:!0,blockModel:g,collectionSchema:a,nestedQuestionModules:i,draftSubmissionPageStore:r,intl:s,currentlyVisibleQuestionIds:p});c.push(...o)}else for(const t of h.children??[]){const e=i[t];if(!e||"formQuestion"!==e.type)continue;if(!p.has(e.id))continue;d.push(e.id);const o=f({currentQuestionModule:e,evaluateChildVisibility:!1,blockModel:g,collectionSchema:a,nestedQuestionModules:i,draftSubmissionPageStore:r,intl:s,currentlyVisibleQuestionIds:p});d.push(...o.map((e=>e.id)))}}const m=null==t?void 0:t.findIndex((e=>e.id===o.id));if(void 0!==m&&-1!==m){return[...t.slice(0,m+1),...c,...t.slice(m+1)].filter((e=>!d.includes(e.id)))}}function f(e){const{currentQuestionModule:t,evaluateChildVisibility:o,blockModel:r,collectionSchema:a,nestedQuestionModules:i,draftSubmissionPageStore:s,intl:c,currentlyVisibleQuestionIds:d}=e,p=[];if(!t.conditionalGroups)return[];if(o)for(const g of t.conditionalGroups){const e=g.trigger;if((0,n().Y1)({filter:e.filter,property:e.property,propertyMapping:void 0,context:{schema:a,userId:void 0,userTimeZone:"",userStartOfWeek:0,relativeVariableResult:void 0,currentPageInRelatedCollection:void 0,intl:c,collectionFeatureGates:(0,l().W)()},depth:0})({block:r,getRecordModel:s.getRecordModel,propertyMapping:void 0,resultCache:new Map,regExpCache:new Map,experimentService:u().default,formulasModule:void 0}))for(const t of g.children??[]){const e=i[t];if(!e||"formQuestion"!==e.type)continue;if(d.has(e.id))continue;p.push(e);const n=f({currentQuestionModule:e,evaluateChildVisibility:o,blockModel:r,collectionSchema:a,nestedQuestionModules:i,draftSubmissionPageStore:s,intl:c,currentlyVisibleQuestionIds:d});p.push(...n)}}else for(const n of t.conditionalGroups)for(const e of n.children??[]){const t=i[e];if(!t||"formQuestion"!==t.type)continue;if(!d.has(t.id))continue;p.push(t);const n=f({currentQuestionModule:t,evaluateChildVisibility:o,blockModel:r,collectionSchema:a,nestedQuestionModules:i,draftSubmissionPageStore:s,intl:c,currentlyVisibleQuestionIds:d});p.push(...n)}return p}},505521:(e,t,o)=>{o.d(t,{k:()=>a});var n=()=>o(532850),r=()=>o(72539);function a(e){let{type:t,store:o,textValue:a}=e;if(!a||!t)return{linkHref:void 0,shouldShowMaliciousContentDialog:!1};const i=(null==o?void 0:o.getCreatedById())===r().gd.id&&"url"===t;return{linkHref:(0,n().Hw)(t,a),shouldShowMaliciousContentDialog:i}}},143695:(e,t,o)=>{o.d(t,{Z:()=>s});var n=o(667294),r=()=>o(846550),a=()=>o(644248),i=()=>o(858856),l=o(785893);function s(e){let{setIsHovered:t}=e;const[o,s]=(0,a().C)();(0,n.useEffect)((()=>{t(s)}),[s,t]);const c=(0,r().yK)((e=>({container:{display:"inline-flex",alignItems:"center"},icon:{width:14,fill:s?e.mediumIconColor:e.lightIconColor,marginLeft:5,marginTop:1}})),[s]);return(0,l.jsx)("div",{ref:o,style:c.container,children:(0,i().D)(c.icon)})}},475692:(e,t,o)=>{o.d(t,{Z:()=>n});const n=(0,o(788860).vU)({inputPlaceholder:{defaultMessage:"Property name",id:"database.viewSettings.propertyTab.propertyName"},autofillOffLabel:{defaultMessage:"Off",id:"database.viewSettings.propertyTab.autofillOffLabel"},autofillOnLabel:{defaultMessage:"On",id:"database.viewSettings.propertyTab.autofillOnLabel"},keptUpToDateWithNotionAITooltip:{defaultMessage:"Auto-updated by AI",id:"database.tableHeaderCell.tooltipAiAutofillDescription"},buttonPropertyErrorTooltip:{defaultMessage:"Button property has an error",id:"database.tableHeaderCell.tooltipButtonPropertyError"}})},765458:(e,t,o)=>{o.d(t,{PJ:()=>l,fq:()=>s,oL:()=>d,yA:()=>c});o(667294);var n=()=>o(677559),r=o(785893);function a(e){const{shouldShowSpinner:t,collectionSettingsProps:n}=e;return(0,r.jsx)(o(205951).ZP,{collectionSettingsStore:n.collectionSettingsStore,fullHeight:n.fullHeight,hideDesktopHeader:n.hideDesktopHeader,children:t&&(0,r.jsx)("div",{style:{display:"flex",justifyContent:"center",overflow:"hidden",paddingBottom:20},children:(0,r.jsx)(o(312578).Z,{})})})}const i=new(n().Ss)("collectionSettings",(()=>Promise.all([o.e(62743),o.e(52774),o.e(90698),o.e(84885),o.e(90424),o.e(94556),o.e(78701),o.e(38804),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(46616),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63707),o.e(86609),o.e(91253),o.e(5006),o.e(6612),o.e(61171),o.e(23179),o.e(73682),o.e(58591),o.e(58565),o.e(38739),o.e(34291),o.e(92341),o.e(46945),o.e(10553),o.e(27039),o.e(25265),o.e(38632),o.e(54307),o.e(75861),o.e(45376),o.e(58799)]).then(o.bind(o,208786)))),l=(0,n().kF)(i,(e=>e.CollectionSettings),{renderLoading:(e,t)=>(0,r.jsx)(a,{shouldShowSpinner:e,collectionSettingsProps:t})}),s=(0,n().kF)(i,(e=>e.CollectionSettingsButtonOptions)),c=(0,n().kF)(i,(e=>e.CollectionSettingsPropertyTypeMenuItem)),d=(0,n().kF)(i,(e=>e.CollectionSettingsEditButtonAutomationOption))},162109:(e,t,o)=>{o.d(t,{R:()=>i,e:()=>a});var n=()=>o(677559);const r=new(n().Ss)("SharingEnabled",(async()=>{const[{default:e},{default:t}]=await Promise.all([o.e(4761).then(o.bind(o,153621)),o.e(93940).then(o.bind(o,474728))]);return{SharingEnabledIcon:e,SharingEnabledPropertyNameTooltip:t}})),a=(0,n().kF)(r,(e=>e.SharingEnabledPropertyNameTooltip)),i=(0,n().kF)(r,(e=>e.SharingEnabledIcon))},928459:(e,t,o)=>{o.d(t,{M:()=>a,Q:()=>r});var n=o(667294);const r=n.createContext({columnVirtualizer:void 0,propertiesInRange:[],propertiesInRangeIndices:[],beforeWidth:0,afterWidth:0});function a(){return(0,n.useContext)(r)}r.displayName="ColumnVirtualizerContext"},702466:(e,t,o)=>{o.d(t,{p:()=>r});var n=()=>o(142735);function r(e){let{collectionContextStore:t,blockId:o,property:r,featureEnabled:a=!1}=e;return(0,n().VK)((()=>{if(!(a&&o&&r&&t))return!1;const e=t.virtualizedModule.getBlockHeightsCache();return e&&e.propertyCanExpandStore(o,r).state}),[t,o,r,a])}},554952:(e,t,o)=>{o.d(t,{L:()=>S,Z:()=>M});o(241792),o(667294);var n=()=>o(142735),r=()=>o(846550),a=()=>o(506347),i=()=>o(788860),l=()=>o(568017),s=()=>o(922227),c=()=>o(453059),d=()=>o(239482),u=()=>o(607031),p=()=>o(168441),g=()=>o(563701),m=()=>o(826955),f=()=>o(383694),h=()=>o(943620),y=o(785893);const v=(0,i().vU)({shared:{defaultMessage:"Shared",id:"CollectionLocation.SidebarTitle.sectionShared"},private:{defaultMessage:"Private",id:"CollectionLocation.SidebarTitle.sectionPrivate"},noAccess:{defaultMessage:"No access",id:"CollectionLocation.noAccess"},emptyCollectionName:{id:"CollectionLocation.EmptyCollectionName",defaultMessage:"Untitled"}});function b(e){return(0,y.jsx)("span",{style:{paddingTop:4,paddingLeft:4,...e.style},children:"/"})}function S(e){const{collectionForLocationStore:t,collectionContextStore:o}=e,a=(0,i().YB)(),s=(0,n().VK)((()=>{const e=d().uJ(t);return e.reverse(),e}),[t]),{collectionIsInPrivate:c,collectionIsInRestricted:m,collectionIsInShared:f}=(0,n().VK)((()=>{const e=o.groupsForTypedDatabasesStore.state;return{collectionIsInPrivate:Boolean(null==e?void 0:e.privateDatabases[t.id]),collectionIsInRestricted:Boolean(null==e?void 0:e.restrictedDatabases[t.id]),collectionIsInShared:Boolean(null==e?void 0:e.sharedDatabases[t.id])}}),[o.groupsForTypedDatabasesStore,t.id],{useDeepEqual:!0}),h=(0,n().VK)((()=>(0,l().gh)({theme:"light"})),[]),S=(0,r().yK)((e=>({textStyle:{color:h.popoverWaxPaperBackground,fontWeight:"normal"},shareTypeIndicatorIcon:{width:20,height:20,marginRight:2,color:e.mediumIconColor,padding:2,backgroundColor:h.accentColors.gray[100],borderRadius:3}})),[h]),C=c||m||f;let M=null;return c?M=(0,y.jsxs)(y.Fragment,{children:[(0,p().Q)(S.shareTypeIndicatorIcon),(0,y.jsx)("span",{children:a.formatMessage(v.private)})]}):m?M=(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{style:{...S.shareTypeIndicatorIcon,padding:0,paddingLeft:1,margin:0},children:(0,u().B)({...S.shareTypeIndicatorIcon,margin:0,background:void 0})}),(0,y.jsx)("span",{children:a.formatMessage(v.noAccess)})]}):f&&(M=(0,y.jsxs)(y.Fragment,{children:[(0,g().O)(S.shareTypeIndicatorIcon),(0,y.jsx)("span",{children:a.formatMessage(v.shared)})]})),(0,y.jsxs)("div",{style:{display:"flex"},children:[C&&(0,y.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",columnGap:4,...S.textStyle},children:[M,!m&&(0,y.jsx)(b,{style:{marginTop:-4,...S.textStyle}})]}),s.length>3?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(x,{ancestorStore:s[0],showDivider:!0}),(0,y.jsx)("span",{style:{paddingLeft:2,paddingTop:4,...S.textStyle},children:"..."}),(0,y.jsx)(b,{style:S.textStyle}),!(c||f)&&(0,y.jsx)(x,{ancestorStore:s[s.length-2],showDivider:!0}),(0,y.jsx)(x,{ancestorStore:s[s.length-1],showDivider:!1})]}):s.map(((e,t)=>(0,y.jsx)(x,{ancestorStore:e,showDivider:t<s.length-1},e.id)))]})}function x(e){const{ancestorStore:t,showDivider:o}=e,a=(0,n().VK)((()=>(0,l().gh)({theme:"light"})),[]),i=(0,r().yK)((e=>({teamIconStyle:{background:e.popoverWaxPaperBackground},textStyle:{color:a.popoverWaxPaperBackground,fontWeigth:"normal"}})),[a]);return t instanceof m().zX?(0,y.jsxs)("div",{style:{display:"flex"},children:[(0,y.jsx)(c().Z,{store:t,showDivider:!1,maxWidth:160,iconSize:16,iconStyle:i.teamIconStyle,titleStyle:i.textStyle}),o&&(0,y.jsx)(b,{style:i.textStyle})]}):(0,y.jsxs)("div",{style:{display:"flex"},children:[(0,y.jsx)(s().Z,{store:t,showDivider:!1,emojiSize:18,maxWidth:160,titleStyle:i.textStyle},t.id),o&&(0,y.jsx)(b,{style:i.textStyle})]})}function C(e){const{teamStore:t,collectionStore:o}=e,a=(0,n().VK)((()=>o.getIcon()),[o]),i=(0,r().yK)((e=>({miniTeamSpaceIcon:{background:e.home.tile.background,position:"absolute",bottom:-3,right:-3,borderRadius:2},teamSpaceIcon:{borderRadius:2,marginRight:2}})),[]);return a?(0,y.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",position:"relative",marginRight:2},children:[(0,y.jsx)(h().Z,{icon:a,size:20,emojiSize:20,isEmptyPage:!1,bucket:"public",isLarge:!0,largeIcon:!0,disabled:!0}),(0,y.jsx)(f().p,{store:t,disabled:!0,size:12,style:i.miniTeamSpaceIcon},"icon")]}):(0,y.jsx)(f().p,{store:t,disabled:!0,size:20,style:i.teamSpaceIcon},"icon")}const M=function(e){const{collectionContextStore:t,collectionForLocationStore:l}=e,s=(0,o(219727).O7)(),c=(0,i().YB)(),{collectionIsInPrivate:m,collectionIsInRestricted:f,collectionIsInShared:b}=(0,n().VK)((()=>{const e=t.groupsForTypedDatabasesStore.state;return{collectionIsInPrivate:Boolean(null==e?void 0:e.privateDatabases[l.id]),collectionIsInRestricted:Boolean(null==e?void 0:e.restrictedDatabases[l.id]),collectionIsInShared:Boolean(null==e?void 0:e.sharedDatabases[l.id])}}),[t.groupsForTypedDatabasesStore,l.id],{useDeepEqual:!0}),S=(0,n().VK)((()=>d().VP(l)),[l]),x=(0,n().VK)((()=>(0,o(641702).Xh)(l.getName(),l)??c.formatMessage(v.emptyCollectionName)),[l,c]),M=(0,n().VK)((()=>l.getIcon()),[l]),k=(0,n().VK)((()=>{var e;return null===(e=t.collectionViewBlockStore())||void 0===e?void 0:e.id}),[t]),_=(0,n().VK)((()=>{let e=a().tY.LocationProperty;return k?((0,o(718959).qG)(k)&&(e=t.isInHomeWidgetStore.state?a().tY.PersonalHomeTileTasks:a().tY.PersonalHomePageTasks),e):e}),[k,t]),w=(0,r().yK)((e=>({button:{color:e.accentColors.gray[800],cursor:"pointer"},inner:{display:"flex",flexDirection:"row",alignItems:"center",columnGap:4},shareTypeIndicatorIcon:{width:20,height:20,marginRight:2,color:e.mediumIconColor,padding:2,backgroundColor:e.fill.lightGraySecondary,borderRadius:3},miniShareTypeIndicatorIcon:{position:"absolute",bottom:-3,right:-3,width:12,height:12,color:e.mediumIconColor,backgroundColor:e.fill.grayPrimary,borderRadius:3,paddingTop:1,paddingBottom:1},collectionTitleTextStyle:{lineHeight:1,fontWeight:o(707513).Ue.medium,marginTop:2,marginLeft:2,whiteSpace:"nowrap",...(0,o(337897).z0)(e)}})),[]);if(!(S||m||f||b))return null;const I=m||f||b;let P=(0,g().O)(w.shareTypeIndicatorIcon);return M?P=(0,y.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",position:"relative"},children:[(0,y.jsx)(h().Z,{icon:M,size:20,emojiSize:20,isEmptyPage:!1,bucket:"public",isLarge:!0,largeIcon:!0,disabled:!0}),m?(0,p().Q)(w.miniShareTypeIndicatorIcon):(0,g().O)(w.miniShareTypeIndicatorIcon)]}):f?P=(0,y.jsx)("div",{style:{...w.shareTypeIndicatorIcon,padding:0,paddingLeft:1,margin:0},children:(0,u().B)({...w.shareTypeIndicatorIcon,margin:0,background:void 0})}):m&&(P=(0,p().Q)(w.shareTypeIndicatorIcon)),(0,y.jsx)(o(154186).Z,{hoveredStyle:{background:"transparent"},pressedStyle:{background:"transparent"},style:w.button,onClick:e=>{const t=l.getParentBlockStore();if(t){const n=(0,o(250625).DJ)(e);o(47443)._c({environment:s,store:t,pageVisitSource:_,openInNew:n})}},children:(0,y.jsxs)("div",{style:w.inner,children:[S&&(0,y.jsx)(C,{teamStore:S,collectionStore:l}),I&&P,(0,y.jsx)("div",{style:w.collectionTitleTextStyle,children:x})]})})}},308252:(e,t,o)=>{o.d(t,{Z:()=>s});var n=o(667294),r=()=>o(646574),a=()=>o(874459),i=()=>o(998411),l=o(785893);const s=function(e){const t=(0,o(788860).YB)(),s=(0,o(846550).Fg)(),u=(0,o(992231).k)(),p=(0,n.useRef)(),g=(0,n.useCallback)((()=>{const t=e.value;if(!t)return;const n=a().KR(t,(0,i().r)());if(!n)return;const r=n.valueOf(),l=r-Date.now();l<0||l>o(326966).A0||p.current&&p.current.timestamp===r||(p.current&&clearTimeout(p.current.timer),p.current={timestamp:r,timer:setTimeout(u,l)})}),[u,e.value]),m=(0,n.useCallback)((()=>{p.current&&(clearTimeout(p.current.timer),p.current=void 0)}),[]);(0,n.useEffect)((()=>{g()}),[g]),(0,n.useEffect)((()=>()=>{m()}),[m]);const{value:f,withComma:h}=e,y=(0,o(142735).VK)((()=>f?(0,r().ZV)({value:f,date_format:e.dateFormat,time_format:e.timeFormat,userTimeZone:(0,i().r)(),allowRelativeDates:!0,intl:t,shortenDateAndRange:e.shortenDateAndRange,displayInUserTimezone:e.displayInUserTimezone,getToday:o(767608).HL}):void 0),[t,e.dateFormat,e.displayInUserTimezone,e.shortenDateAndRange,e.timeFormat,f]);if(!f)return null;const v=a().NK(f,(0,i().r)(),o(146947).locale);let b;if(f.reminder){const e=a().Nm(f,(0,i().r)());b=e?{color:s.errorText}:{color:o(568017).ZP.blue}}const S=(0,l.jsxs)(l.Fragment,{children:[y,f.reminder&&(0,o(746822).m)({display:"inline-block",width:"1em",marginLeft:6,marginRight:2,paddingBottom:4,verticalAlign:"middle"}),h?", ":null]});return e.disableTooltip?(0,l.jsx)("div",{className:e.className,style:{...e.style,...b},children:S}):(0,l.jsx)(o(654133).Z,{renderTooltip:()=>(0,l.jsxs)(l.Fragment,{children:[e.tooltipHeader,(0,l.jsxs)("div",{style:d(s,e.tooltipHeader),children:[c(v.start),v.end?` â†’ ${c(v.end)}`:""]})]}),render:t=>(0,l.jsx)("div",{className:e.className,style:{...e.style,...b},...t,children:S}),placement:e.tooltipPlacement})};function c(e){return(0,r().ZW)({value:e,preset:"medium"})}function d(e,t){return t?{color:e.mediumInvertedTextColor}:{}}},472344:(e,t,o)=>{o.d(t,{O:()=>m,b:()=>g});o(667294);var n=()=>o(846550),r=()=>o(114079),a=()=>o(513670),i=()=>o(326966),l=()=>o(337897),s=()=>o(527278),c=()=>o(86048),d=()=>o(594072),u=o(785893);const p=21;function g(e){const{numberValue:t,numberFormat:o,numberPrecision:g,numberShowAs:f,shouldRenderTooltip:h,withComma:y,style:v,ringWidth:b,className:S,barHeight:x}=e,C=(0,n().Fg)();if(a().i2(t)||i().z4(t))return null;const M=e.progressSize??p,k=(null==f?void 0:f.showValue)??!0,_=k&&r().uf(t,o,s().Z.getIntl(),void 0,g);let w;if("bar"===(null==f?void 0:f.type)||"ring"===(null==f?void 0:f.type)){const n=r().IM(t,f.maxValue),{filledColor:a,gapColor:i,unfilledColor:s}=m({theme:C,color:f.color}),p=h?l().X7({numberValue:t,numberFormat:o,numberShowAs:f}):void 0;w="bar"===f.type?(0,u.jsx)(c().k,{percentage:n,filledColor:a,gapColor:i,unfilledColor:s,height:x,style:{height:M,...e.barStyle,...k?{}:{flexBasis:"100%"}},tooltip:p}):(0,u.jsx)(d().e,{percentage:n,filledColor:a,gapColor:i,unfilledColor:s,size:M,ringWidth:b,tooltip:p})}return(0,u.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",gap:"6px 8px",...v},className:S,children:[_,w,y?", ":null]})}function m(e){let{theme:t,color:o}=e;const n="default"===o?t.selectLightGray:t.accentColors[o];return{filledColor:"dark"===t.mode?n[500]:n[400],gapColor:n[50],unfilledColor:"dark"===t.mode?n[200]:t.selectLightGray[200]}}},663221:(e,t,o)=>{o.d(t,{Z:()=>V});var n=o(667294),r=()=>o(219727),a=()=>o(142735),i=()=>o(846550),l=()=>o(226413),s=()=>o(639708),c=()=>o(509917),d=()=>o(707513),u=()=>o(879952),p=()=>o(990966),g=()=>o(143695),m=()=>o(162109),f=()=>o(932753),h=()=>o(677559);const y=new(h().Ss)("PagePropertiesRowNameMenu",(async()=>Promise.all([o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(49396),o.e(96590),o.e(97583)]).then(o.bind(o,829563)))),v=(0,h().kF)(y,(e=>e.PagePropertiesRowNameMenu));var b=()=>o(949842),S=()=>o(154057),x=()=>o(231272),C=()=>o(998901),M=()=>o(158429),k=()=>o(154186),_=()=>o(864266),w=()=>o(967092),I=()=>o(899316),P=o(785893);function T(e){const{property:t,schema:s,disabled:c,locked:d,canConfigureCollection:g,isInPeekRenderer:h,labelComponent:y,hideDragHandle:b,pagePropertiesStore:M,styleVariants:k,disableRowNameInteractivity:I,dragHandleStyle:T,layoutModule:V,forceHighlight:F,forceFocusedHighlight:j,hideIcon:Z,propertyNameAriaId:O,showDragHandleAsIcon:D}=e,N=(0,n.useRef)(null),L=(0,o(125659).DK)(),E=(0,r().O7)(),U=(0,r().Fy)(),[K,W]=(0,n.useState)(!1),z=t===l().ow?l().Qr:s[t],H=(0,a().VK)((()=>M.state.hoveredProperty===t),[M,t]),G=(0,a().VK)((()=>!U.isMobile&&H&&!o(475335).default.state.isKeyboardMode&&!b),[U.isMobile,b,H]),Y=(0,a().VK)((()=>M.state.openProperty),[M]),q=(0,o(173113).a)(z),Q=(0,a().VK)((()=>null==L?void 0:L.collectionStore()),[L]),$=(0,i().yK)((e=>{const{size:t="medium",width:n={variant:"fixed",widthMobile:x().Uk,widthDesktop:x().rZ},height:r,color:a="default"}=k||{},i="medium"!==(null==r?void 0:r.variant)&&(null!=r&&r.variant||"medium"!==t)?24:34;let l;if("fixed"===n.variant){const e=U.isMobile?n.widthMobile||x().Uk:n.widthDesktop||x().rZ;l={width:e,maxWidth:e,minWidth:0}}else if("hug-content"===n.variant){l={width:"min-content",maxWidth:U.isMobile?n.maxWidthMobile||"100%":n.maxWidthDesktop||"100%",minWidth:0}}else(0,o(696459).t1)(n);return{propertyLabelContainerStyles:{display:"flex",alignItems:"center",color:"primary"===a?e.text.primary:e.text.secondary,height:i,...l},tooltipLockedIcon:{width:12,fill:e.regularInvertedTextColor,marginLeft:2,display:"inline-block",verticalAlign:"middle",paddingBottom:3},tooltipDescription:{color:e.mediumInvertedTextColor},tooltipAutoUpdatedByAi:{color:e.mediumInvertedTextColor},sharingEnabledTooltip:{marginTop:8,color:e.mediumInvertedTextColor}}}),[U.isMobile,k]),X=(0,n.useMemo)((()=>!U.isMobile&&!c&&!(d||!g)&&!b&&!e.showDragHandleAsIcon&&(0,P.jsx)(o(628370).Z,{animate:{opacity:G?1:0},initial:{opacity:0},exit:{opacity:0},style:{width:_().C+4,marginLeft:-(_().C+4)},onMouseMove:()=>B(e.property,M),onMouseLeave:()=>A(M),children:(0,P.jsx)(o(735697).Z,{role:"cell",disallowTabbing:!0,onClick:t=>function(e,t,o,n){S().X9()||n.setState({...n.state,openProperty:{property:t,isInPeekRenderer:o}})}(0,e.property,e.isInPeekRenderer,M)})})),[g,U.isMobile,c,b,d,M,e.isInPeekRenderer,e.property,e.showDragHandleAsIcon,G]),J=(0,n.useCallback)((e=>{if(!L)return;const n=L.permissionScopesStore.state,r={onClick:!I&&n.canConfigureBlock?()=>function(e,t,o,n){p().clear({environment:o}),u().ZH({environment:o}),f().wG(),n.setState({...n.state,openProperty:{property:e,isInPeekRenderer:t}})}(t,h,E,M):o(513670).yR};return(0,P.jsx)(R,{hideIcon:Boolean(Z),showDragIcon:!Z&&D&&G,dragHandleStyle:T,schema:s,property:t,disabled:c||Boolean(I),locked:d,canConfigureCollection:g,events:(0,o(164079).Z)(r,e),propertyNameAriaId:O,setIsDescriptionIconTooltipHovered:e=>W(e),styleVariants:k,layoutModule:V,forceHighlight:F,forceFocusedHighlight:j,isSharingEnabled:q})}),[L,E,V,F,j,T,t,s,h,c,d,g,I,M,k,G,O,D,Z,q]),ee=Boolean(Y&&!c&&Y.property===t&&Y.isInPeekRenderer===h),te=(0,n.useCallback)((()=>{if(!L)return;M.setState({...M.state,openProperty:void 0});const e=L.settingsStore;o(139224).E3({collectionSettingsStore:e})}),[L,M]),oe=(0,n.useCallback)((()=>{const t=null==L?void 0:L.settingsStore;if(L&&t)return(0,P.jsx)("div",{ref:N,children:t.state.open?(0,P.jsx)(o(765458).PJ,{context:o(347577).HV.TopbarFilterPopup,collectionContextStore:L,collectionSettingsStore:t,hideDesktopHeader:!0}):(0,P.jsx)(v,{...e,popupContainerRef:N})})}),[L,e]),ne=(0,n.useCallback)((e=>{if(!L||!z)return null;const t=(0,l().qQ)(z)&&(0,l().q3)(z);return(0,P.jsxs)("div",{...e,style:o(514).F6,children:[(0,P.jsxs)("div",{children:[z.name,Q&&"relation"===z.type&&q&&(0,P.jsx)(m().e,{propertySchema:z,collectionStore:Q,style:$.sharingEnabledTooltip}),d&&(0,o(821149).b)($.tooltipLockedIcon)]}),void 0!==(null==z?void 0:z.description)&&z.description.length>0?(0,P.jsx)("div",{style:$.tooltipDescription,children:z.description}):null,t&&t.auto_update_on_edit&&(0,P.jsx)("div",{style:$.tooltipAutoUpdatedByAi,children:(0,P.jsx)(o(788860)._H,{defaultMessage:"Auto-updated by AI",id:"database.tableHeaderCell.tooltipAiAutofillDescription"})})]})}),[L,Q,d,z,$.tooltipAutoUpdatedByAi,$.tooltipDescription,$.tooltipLockedIcon,$.sharingEnabledTooltip,q]);return L&&z?(0,P.jsx)(o(654133).Z,{disableTooltip:U.isMobile,renderTooltip:ne,delayThreshold:K?0:500,placement:C().Placement.Left,render:o=>(0,P.jsxs)("div",{style:$.propertyLabelContainerStyles,onMouseMove:()=>B(e.property,M),onMouseLeave:()=>A(M),children:[X,(0,P.jsx)(w().ZP,{popupType:U.isMobile?w().kQ.SlideUp:w().kQ.Popup,originGap:1,alignmentToOrigin:C().Alignment.Start,render:oe,open:ee,onDismiss:te,origin:y??J(o)})]},t)}):null}function R(e){var t;const{schema:o,property:n,disabled:u,locked:p,canConfigureCollection:f,events:h,styleVariants:y,forceHighlight:v,forceFocusedHighlight:S,showDragIcon:x,isSharingEnabled:C}=e,_=(null==y?void 0:y.color)||"default",w=(null==y?void 0:y.size)||"medium",T=null==y?void 0:y.fontWeight,R=n===l().ow?l().Qr:o[n],{isMobile:V}=(0,r().Fy)(),A=(0,a().VK)((()=>{const e=M().V.state;return!(!e||"page_property_name"!==e.type)&&e.propertyId===n}),[n])||S,B=(0,a().VK)((()=>{var e;const t=M().l.state,r=null===(e=o[n])||void 0===e?void 0:e.name;if(!t||!r)return!1;return r.toLowerCase().includes(t.toLowerCase())}),[n,o])||v,F=(0,i().yK)((t=>{const o=A?t.findHighlightMatch.selectedBackground:t.findHighlightMatch.unselectedBackground;return{button:{display:"flex",alignItems:"center",height:"100%",width:(0,s().f)(e.layoutModule)?void 0:"100%",borderRadius:4,padding:"0 6px",maxWidth:"100%"},property:{backgroundColor:B?o:void 0,outline:B?`5px solid ${o}`:void 0,borderRadius:B?4:void 0,color:A?"black":void 0,..."medium"===w?{fontSize:14,lineHeight:"20px"}:{fontSize:13,lineHeight:"18px"},...T?{fontWeight:d().Ue[T]}:{}},icon:{marginRight:2,..."primary"===_?{fill:t.icon.primary}:A?{fill:"black"}:{}}}}),[_,A,w,T,e.layoutModule,B]);if(!R)return null;const j=n===l().ow?e=>{(0,b().ZP)({event:e,context:b().Af.EditorMouseDown})}:void 0;return(0,P.jsx)(k().Z,{role:"cell",id:e.propertyNameAriaId,style:F.button,disabled:u||p||!f,...h,onMouseDown:j,onContextMenu:e=>{e.preventDefault(),h.onClick(e)},children:(0,P.jsx)(I().ZP,{propertySchema:R,showIcon:!e.hideIcon,showDragIcon:x,badge:(0,P.jsxs)(P.Fragment,{children:["relation"===R.type&&C&&(0,P.jsx)(m().R,{style:{width:20,height:20,marginLeft:4}}),(0,P.jsx)(I().oV,{propertySchema:R}),!V&&!(null===(t=R.description)||void 0===t||!t.length)&&(0,P.jsx)(g().Z,{setIsHovered:e.setIsDescriptionIconTooltipHovered})]}),style:F.property,property:n,className:A?c().qp:void 0,labelSizeVariant:w,iconSize:"medium"===w?16:14,iconStyle:F.icon,dragHandleStyle:e.dragHandleStyle})})}const V=n.memo(T);function A(e){e.setState({...e.state,hoveredProperty:void 0})}function B(e,t){t.setState({...t.state,hoveredProperty:e})}},899316:(e,t,o)=>{o.d(t,{ZP:()=>g,oJ:()=>h,oV:()=>f});o(667294);var n=()=>o(219727),r=()=>o(142735),a=()=>o(846550),i=()=>o(226413),l=()=>o(766933),s=()=>o(982855),c=()=>o(459805),d=()=>o(127886),u=o(785893);const p={display:"flex",alignItems:"center",lineHeight:"120%",minWidth:0};const g=function(e){let{propertySchema:t,showIcon:r,showDragIcon:i,hideName:l,badge:s,style:d,iconStyle:g,iconSize:f,dragHandleStyle:y,className:v,labelSizeVariant:b}=e;const S=(0,n().O7)(),{device:x}=S,C=x.isMobile?16:14,M=(0,a().yK)((e=>({iconWrapper:m(Boolean(l),{display:"grid",justifyContent:"center",alignItems:"center",marginRight:4,...g},b,i),dragHandle:{gridColumn:1,gridRow:1,opacity:i?1:0,transition:`opacity ${c().PP}`},itemIcon:{gridColumn:1,gridRow:1,opacity:i?0:1,transition:`opacity ${c().PP}`},dragIcon:{fill:e.icon.secondary}})),[l,g,b,i]);return(0,u.jsxs)("div",{className:v,style:{...p,fontSize:C,...d},children:[r&&(0,u.jsxs)("div",{style:M.iconWrapper,children:[(0,u.jsx)("div",{style:M.itemIcon,children:(0,u.jsx)(h,{propertySchema:t,iconSize:f,iconStyle:g})}),(0,u.jsx)("div",{style:M.dragHandle,children:(0,u.jsx)(o(9641).Z,{style:y,iconSize:12,iconStyle:M.dragIcon})})]}),!l&&(0,u.jsx)("div",{style:{...o(707513).Yu},children:t.name}),s]})};function m(e,t,o,n){return{marginRight:e?void 0:"small"===o||n?4:6,...t}}function f(e){let{propertySchema:t}=e;const o=(0,n().O7)();return(0,r().VK)((()=>(0,s().Zt)(o)&&i().qQ(t)&&i().q3(t)),[o,t])?(0,u.jsx)(d().Z,{}):null}function h(e){let{propertySchema:t,iconSize:o,iconStyle:r}=e;const i=(0,a().Fg)(),s=(0,n().O7)(),{device:c}=s,d=c.isMobile?18:16;return(0,u.jsx)(l().ZP,{type:t.type,icon:t.icon,size:o||d,theme:i,style:r})}},225385:(e,t,o)=>{o.d(t,{Z:()=>ee});o(670560),o(267602),o(653476),o(241792),o(731107);var n=o(667294),r=()=>o(492788),a=()=>o(219727),i=()=>o(142735),l=()=>o(846550),s=()=>o(926724),c=()=>o(156642),d=()=>o(226413),u=()=>o(532850),p=()=>o(766933),g=()=>o(396136),m=()=>o(955620),f=()=>o(788860),h=()=>o(707513),y=()=>o(491927),v=()=>o(54512),b=()=>o(909240),S=()=>o(917881),x=()=>o(295274),C=()=>o(494657),M=()=>o(332542),k=()=>o(636340),_=()=>o(970105),w=()=>o(990966),I=()=>o(269299),P=()=>o(360240),T=()=>o(677559);const R=new(T().Ss)("RelationPropertyCustomizeLayoutMenu",(async()=>{const{default:e}=await Promise.all([o.e(44832),o.e(82164)]).then(o.bind(o,903639));return{RelationPropertyCustomizeLayoutMenu:e}})),V=(0,T().kF)(R,(e=>e.RelationPropertyCustomizeLayoutMenu));var A=()=>o(337897),B=()=>o(861026),F=()=>o(487270),j=()=>o(191586),Z=()=>o(852465),O=()=>o(129338),D=()=>o(521777),N=()=>o(270820),L=()=>o(973837),E=()=>o(749826),U=()=>o(826955),K=()=>o(356321),W=()=>o(154186),z=()=>o(255577),H=()=>o(388284),G=()=>o(654133),Y=()=>o(663221),q=o(785893);const Q={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0};function $(e){const{property:t,propertySchema:o,numberOfRelations:r,schema:a,format:c,disabled:d,locked:u,canConfigureCollection:g,blockStore:m,collectionStore:y,onHandleOpenProperty:v,onHandleRelationPropertyPageSectionRefMount:b,isInPeekRenderer:S,targetCollectionStore:x,pagePropertiesStore:C,shouldHideIcon:M}=e,k=(0,l().yK)((e=>({hoverButton:{display:"flex",alignItems:"baseline",justifyContent:"normal",color:e.mediumTextColor,width:"100%"},minimalButton:{display:"flex",alignItems:"center",flexShrink:0,whiteSpace:"nowrap",height:28,borderRadius:4,fontSize:14,lineHeight:1.2,minWidth:0,paddingLeft:6,paddingRight:8,fontWeight:h().Ue.regular,color:e.lightTextColor},minimalButtonWrapper:{width:"100%",maxWidth:"100%",fontWeight:h().Ue.regular,color:e.lightTextColor},iconStyle:{width:14,height:14,fill:e.lightIconColor,marginRight:6,alignItems:"baseline"},minmalButtonLabelStyle:{...h().Yu}})),[]),_=(0,l().Fg)(),w=(0,n.useCallback)((e=>{d||u||!g||(e.preventDefault(),C.setState({...C.state,openProperty:{property:t,isInPeekRenderer:S}}))}),[d,u,g,C,t,S]),I=(0,n.useCallback)((e=>{v(!0)}),[v]),T=(0,n.useMemo)((()=>({size:"medium",fontWeight:"regular",width:{variant:"hug-content",maxWidthDesktop:300,maxWidthMobile:300}})),[]),R=(0,n.useCallback)((()=>{C.setState({...C.state,hoveredProperty:t})}),[t,C]),V=(0,n.useCallback)((()=>{C.setState({...C.state,hoveredProperty:void 0})}),[C]),A=(0,i().VK)((()=>x.getFormatStore().getKeyStore("app_config_uri").getValue()),[x]),B=(0,P().sN)(s().p$),F=(0,P().Q_)(s().p$);return(0,q.jsx)("div",{style:k.hoverButton,onMouseMove:R,onMouseLeave:V,children:(0,q.jsx)(Y().Z,{schema:a,format:c,property:t,blockStore:m,collectionStore:y,disabled:d,locked:u,canConfigureCollection:g,styleVariants:T,pagePropertiesStore:C,labelComponent:(0,q.jsx)("div",{ref:b,style:k.minimalButtonWrapper,children:(0,q.jsxs)(W().Z,{style:k.minimalButton,onClick:I,onContextMenu:w,children:[(0,q.jsx)(p().ZP,{size:14,style:k.iconStyle,theme:_,type:o.type??"relation",icon:o.icon}),(0,q.jsx)("div",{style:k.minmalButtonLabelStyle,children:A===s().p$?(0,q.jsx)(f()._H,{id:"RelationPropertyPageSection.sprints.showSprintRelations",defaultMessage:"{numberOfRelations, plural, =0 {Add {propertyName}} one {1 {singleTypedItemName}} other {{numberOfRelations} {pluralTypedItemName}}}",values:{numberOfRelations:r,propertyName:o.name,singleTypedItemName:B,pluralTypedItemName:F}}):(0,q.jsx)(f()._H,{id:"RelationPropertyPageSection.showRelations",defaultMessage:"{numberOfRelations, plural, =0 {Add {propertyName}} one {1 {propertyName}} other {{numberOfRelations} {propertyName}}}",values:{numberOfRelations:r,propertyName:o.name}})})]},`minimal-section-${t}`)}),hideDragHandle:!0,isInPeekRenderer:S,hideIcon:M})})}function X(e){const{collectionStore:t,targetCollectionStore:o,property:r,showRight:l,disabled:c,style:d,children:u,canConfigureCollection:p,isConnectedRelation:g,canEditCurrentPage:m,handleMouseMove:h,onHandleOpenProperty:y,onHandleRelationPropertyPageSectionRefMount:v,topBorder:b,collectionContextStore:S}=e,x=(0,i().VK)((()=>o.isSyncedCollection()),[o]),C=(0,i().VK)((()=>o.getFormatStore().getKeyStore("app_config_uri").getValue()===s().p$),[o]),M=(0,i().VK)((()=>S.permissionScopesStore.state),[S]),k=(0,a().O7)(),[_,w]=(0,n.useState)(!1),I=k.device.isMobile?l:l&&_;return(0,q.jsx)("div",{style:{width:"100%"},ref:v,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:(0,q.jsx)(H().Z,{...e,topBorder:b,children:u,noTextOverflow:!1,isTitleUppercase:!1,disableMobilePadding:!0,right:I&&!x&&!M.isExternallyImportedAndSyncedCollection&&!g&&(0,q.jsxs)("div",{style:{height:"100%",display:"flex",alignItems:"center",width:"100%"},children:[m&&(0,q.jsx)(J,{disabled:c,handleMouseMove:h,onClick:y,icon:N().R,tooltipMessage:C?(0,q.jsx)(f()._H,{id:"database.RelationPropertyPageSectionHeaderButton.tooltip.searchButtonSprints.message",defaultMessage:"Search for a sprint"}):(0,q.jsx)(f()._H,{id:"database.RelationPropertyPageSectionHeaderButton.tooltip.searchButton.message",defaultMessage:"Link a page"})},`searchIcon-${r}`),(0,q.jsx)(V,{collectionStore:t,targetCollectionStore:o,property:r,disabled:c||!p,rowType:"section"})]}),style:{paddingTop:0,paddingBottom:0,width:"100%",...d},mobileStyle:{boxShadow:"none"},desktopTitleStyle:{marginTop:0,marginBottom:4,paddingLeft:0,paddingRight:8,fontWeight:"normal"},mobileTitleStyle:{paddingLeft:0,alignItems:"center",fontWeight:"normal"}})})}function J(e){const{disabled:t,handleMouseMove:o,onClick:n,icon:r,tooltipMessage:a}=e,i=(0,l().yK)((e=>({buttonStyle:{width:24,height:24,borderRadius:4,display:"inline-flex",alignItems:"center",justifyContent:"center",marginRight:4},iconStyle:{width:14,height:14,flexGrow:0,flexShrink:0,fill:e.mediumIconColor}})),[]);return(0,q.jsx)(G().Z,{renderTooltip:()=>a,render:e=>(0,q.jsx)(W().Z,{style:i.buttonStyle,onMouseMove:o,onClick:n,disabled:t,...e,children:r(i.iconStyle)})})}const ee=function(e){const t=(0,n.useContext)(o(125659).cu),r=(0,i().qz)(void 0,o(692304).Z),c=(0,i().qz)(void 0,o(280977).Z),[p,m]=(0,n.useState)(10),{schema:h,format:v,locked:b,property:x,collectionStore:M,store:k,disabled:_,visibility:P,isInPeekRenderer:T,topBorder:R,pagePropertiesStore:V,blockPropertyValueOverlayStore:B}=e,F=(0,a().O7)(),O=(0,i().VK)((()=>{const e=h[x];if(!e||"relation"!==e.type)return[];const t=k.getPropertyValue(x);return u().j$({relationValue:u().rq(t),propertySchema:e,getRecordModel:k.getRecordModel,includeDeleted:E().default.checkGate({gateName:"relations_show_deleted"}),includeInvalidCollection:E().default.checkGate({gateName:"relations_show_invalid_collection"}),includeNoAccess:E().default.checkGate({gateName:"relations_show_no_access"})})}),[h,x,k],{useDeepEqual:!0}),N=(0,i().VK)((()=>O.length),[O.length]),L=(0,n.useCallback)(((e,t)=>function(e,t,o,n,r,a,i,l){const s=r[a];if(!s||"relation"!==s.type)return;const c=d().j0(s);if(!c)return;const p=U().NW.createChildStore(i,c);if(!(0,Z().OY)(i)||!a)return;const m=i.getPropertyValue(a),f=u().j$({relationValue:u().rq(m),propertySchema:s,getRecordModel:i.getRecordModel,includeDeleted:E().default.checkGate({gateName:"relations_show_deleted"}),includeInvalidCollection:E().default.checkGate({gateName:"relations_show_invalid_collection"}),includeNoAccess:E().default.checkGate({gateName:"relations_show_no_access"})}),h=[...e.map((e=>({id:e,spaceId:n.pointer.spaceId,table:g().iU}))),...f.slice(e.length)];ne({newValues:h,oldValues:f},p,i,a,o),y().yT(o,{from:"relation_section"}),C().sv({store:l,focus:{section:0,indexLocal:t.endPosition,indexGlobal:t.endPosition,footerFocused:!1}})}(e,t,F,M,h,x,k,r)),[F,M,h,x,k,r]),G=(0,n.useCallback)(((o,n,r)=>ie(o,n,r,F,e.blockPropertyValueOverlayStore,k,x,t,J)),[t,F,x,e.blockPropertyValueOverlayStore,k]),J=(0,n.useRef)(null),ee=(0,a().Fy)(),le=h[x],se=(0,i().VK)((()=>null==t?void 0:t.permissionScopesStore.state),[t]),ce=(0,i().VK)((()=>{if("relation"===(null==le?void 0:le.type)&&t)return le}),[t,le]),de=(0,i().VK)((()=>{if(!ce)return;const e=d().j0(ce);return e?U().NW.createChildStore(k,e):void 0}),[ce,k]),ue=(0,i().VK)((()=>(null==de?void 0:de.canEdit())??!1),[de]),pe=(0,i().VK)((()=>{const e=M.getSchema()[x];return Boolean(e&&d().NK(e))}),[M,x]),ge=(0,i().VK)((()=>k.canEdit()),[k]),me=(0,i().VK)((()=>(0,j().Wt)(k)),[k]),fe=(0,l().yK)((e=>({addNewRelationButtonWrapper:te(e),addNewRelationButtonIcon:oe(e,ee.isMobile),replacePageSprint:{color:e.mediumTextColor}})),[ee.isMobile]),he=(0,n.useMemo)((()=>O.slice(0,p)),[O,p]),ye=(0,i().VK)((()=>(null==de?void 0:de.getFormatStore().getKeyStore("app_config_uri").getValue())===s().p$),[de]),ve=1===(null==ce?void 0:ce.limit),be=!(ee.isMobile||_||b||ve),Se=(0,o(206658).E)(k),xe=(0,i().VK)((()=>{var e;return"hide"===(null==Se||null===(e=Se.getFormat())||void 0===e?void 0:e.property_icons_visibility)}),[Se]),Ce=(0,n.useCallback)((()=>{de&&ce&&(ye?re(de,e.store,e.property,O,F):pe||ve?G(!0):ae(O.length>=p?p:O.length+1,de,"relation_section_footer",F,k,x,M,p,m,t,ce))}),[t,M,p,F,G,ve,pe,ye,x,e.property,e.store,ce,O,k,de]),Me=(0,i().VK)((()=>{if(!de||!ce||!M)return[];const e=de.getFormatStore().getKeyStore("app_config_uri").getValue()===s().p$;return he.reduce(((n,a,i)=>{const l=U().G.createChildStore(k,a),s=l.getAssociatedCollectionStore();if((null==s?void 0:s.id)===d().F0(ce)){const a={key:l.id,render:n=>{let{ref:a,...s}=n;return(0,q.jsx)(o(320197).a,{...s,canDrag:be&&1!==ce.limit&&k.canEdit(),schema:h,propertySchema:ce,collectionStore:M,collectionId:M.id,targetCollectionStore:de,relatedPageStore:l,disabled:_,locked:b,isSelected:!0,pageStore:k,property:x,rowType:"section",onActionButtonClick:()=>function(e,t,o,n,r,a,i,l,s,c){const d=a[i];if("relation"!==(null==d?void 0:d.type)||!c)return;if((0,j().Wt)(r))return;const u=d.limit,p=u?[]:e.filter((e=>e.id!==t.id));I().createAndCommit({userAction:"RelationSection.handleRemoveRelationClick",environment:n,canUndo:!0,perform:e=>{S().sf({store:r,propertyId:i,value:p,environment:n,relatedPageId:t.id,propertySchema:d,transaction:e,collectionContextStore:c,analyticsData:{isFromBulkActionsToolbar:A().VM(l),analyticsFrom:A().Sy(K().C.Page)},isUnthrottled:!1})}}),y().WF(n,{from:"relation_section",collection_id:null==s?void 0:s.id,target_collection_id:null==o?void 0:o.id})}(O,l,de,F,k,h,x,B,M,t),onMouseLeave:()=>r.unsetFocus(),onSecondaryButtonClick:()=>ae(i+1,de,"relation_section_inline",F,k,x,M,p,m,t,ce),onInsertInline:e?()=>{w().clear({environment:F})}:()=>ae(i+1,de,"relation_section_inline",F,k,x,M,p,m,t,ce),onTitleEsc:()=>{var e;0===(null===(e=l.getTitleStore())||void 0===e||null===(e=e.getValue())||void 0===e?void 0:e.length)&&"relation"===ce.type?function(e,t,o){if((0,j().Wt)(o))return;I().createAndCommit({userAction:"RelationSection.handleDeleteRelatedPage",environment:t,canUndo:!0,perform:t=>{const o={pointer:e.pointer,command:"update",path:[],args:{alive:!1}};I().applyOperation({store:e,operation:o,transaction:t})}})}(l,F,k):w().clear({environment:F})},onOpenPageButtonClick:()=>{o(463058).O({relationPointers:O,relatedPageStore:l,environment:F,from:"relation_section_inline"})},index:i+1,propertyLimit:ce.limit})},action:e=>{}};n.push(a)}return n}),[])}),[B,be,t,M,p,_,F,he,O,b,r,x,ce,h,k,de]);if(!("section_hide"!==P&&ce&&de&&t&&se))return null;if("minimal"===P)return(0,q.jsx)($,{property:x,propertySchema:ce,numberOfRelations:N,onHandleOpenProperty:G,onHandleRelationPropertyPageSectionRefMount:e=>{e&&(J.current=e)},schema:h,format:v,disabled:_,locked:b,canConfigureCollection:se.canConfigureCollection,blockStore:k,collectionStore:M,collectionContextStore:t,isInPeekRenderer:T,targetCollectionStore:de,pagePropertiesStore:V,shouldHideIcon:xe});const ke=Me.map((e=>e.key.toString())),_e=(0,q.jsx)(z().Z,{type:z().i.Vertical,store:r,initialFocus:void 0,disableKeyboard:!0,style:{width:"100%"},sections:[{key:"section",render:e=>(0,q.jsx)(H().Z,{...e,disableDesktopPadding:!0,disableMobilePadding:!0,disableMobileBorders:!0,children:be?(0,q.jsx)(o(119891).ZP,{direction:"vertical",keys:ke,renderKey:t=>e.children[ke.indexOf(t)],onDrop:L,store:c}):e.children}),items:Me}]});return(0,q.jsx)(X,{collectionContextStore:t,isConnectedRelation:pe,title:e.propertyRowName??(0,q.jsx)(Y().Z,{schema:h,format:v,property:x,blockStore:k,collectionStore:M,disabled:_,locked:b,canConfigureCollection:se.canConfigureCollection,styleVariants:{width:{variant:"hug-content"},height:{variant:"small"},fontWeight:"medium",size:"small"},isInPeekRenderer:T,pagePropertiesStore:V,hideIcon:xe}),collectionStore:M,targetCollectionStore:de,property:x,showRight:!0,disabled:_,schema:h,format:v,locked:b,canEditTargetCollection:ue,canConfigureCollection:se.canConfigureCollection,canEditCurrentPage:ge,handleMouseMove:e.handleMouseMove,onHandleOpenProperty:()=>{ie(!1,void 0,void 0,F,B,k,x,t,J)},onHandleRelationPropertyPageSectionRefMount:e=>{e&&(J.current=e)},onTitleEnter:()=>ae(void 0,de,"relation_section_inline",F,k,x,M,p,m,t,ce),handleClearProperty:()=>re(de,k,x,O,F),topBorder:R,children:(0,q.jsxs)("div",{style:{flex:1,minWidth:0,display:"flex",flexWrap:"wrap",flexDirection:"column",width:"100%",...ee.isMobile&&{paddingLeft:"none"}},onMouseMove:e.handleMouseMove,onMouseLeave:e.handleMouseLeave,children:[_e,O.length>p&&(0,q.jsx)(W().Z,{style:{width:"100%",display:"flex",alignItems:"center",borderRadius:3,fontSize:14,minHeight:30,margin:0,padding:"6px 8px 7px 8px"},onClick:()=>m(p+10),children:(0,q.jsx)(o(762141).Z,{count:O.length-p,format:o(38883).lo.Medium,style:{margin:void 0},fixedHeight:!1,isCompact:!1})}),ue&&ge&&!b&&!me&&(0,q.jsx)(W().Z,{style:fe.addNewRelationButtonWrapper,onClick:Ce,disabled:_||b,children:0===N?(0,q.jsxs)(q.Fragment,{children:[(0,D().R)({...fe.addNewRelationButtonIcon,marginLeft:6,marginRight:6}),(0,q.jsx)(f()._H,{id:"RelationPropertyPageSection.button.addPage",defaultMessage:"New"})]}):(0,q.jsxs)(q.Fragment,{children:[ye?(0,o(687892).R)({width:16,height:16,marginRight:11,marginTop:1,marginLeft:4,fill:"#868682"}):1===ce.limit?(0,o(292735).h)(fe.addNewRelationButtonIcon):(0,D().R)(fe.addNewRelationButtonIcon),(0,q.jsxs)("div",{style:Q,children:[ye&&(0,q.jsx)("span",{style:fe.replacePageSprint,children:(0,q.jsx)(f()._H,{id:"RelationPropertyPageSection.button.replacePageSprint",defaultMessage:"Move to backlog"})}),!ye&&(1===ce.limit?(0,q.jsx)(f()._H,{id:"RelationPropertyPageSection.button.replacePage",defaultMessage:"Replace"}):(0,q.jsx)(f()._H,{id:"RelationPropertyPageSection.button.addPage",defaultMessage:"New"}))]})]})})]})},x)};function te(e){return{display:"flex",alignItems:"center",color:e.lightTextColor,borderRadius:4,paddingRight:4,height:32,width:"100%",fontSize:14}}function oe(e,t){return{width:16,height:16,marginRight:t?7:11,marginTop:1,marginLeft:5,fill:e.lightIconColor}}function ne(e,t,o,n,a){if(!(0,Z().OY)(o)||!n)return;let i;I().createAndCommit({userAction:"RelationToken.handleRelationPropertyMenuUpdate",environment:a,canUndo:!0,perform:r=>{const l=t.id;if(e.newPage&&l){const n=m().TPx(e.newPage.name);i=k().j4({environment:a,id:e.newPage.id,type:c().Ti.page,properties:{title:n},spaceId:e.newPage.spaceId,inMemoryRecordCache:t.inMemoryRecordCache,transaction:r}),M().zw({childStore:i,parentStore:t,transaction:r});const l=U().G.createChildStore(o,i.pointer),s=t.getDefaultTemplatePageStore();s&&x().ob({title:{text:n},environment:a,store:l,templateStore:s,isKeyboard:!1,isCreateIn:!1,transaction:r,from:"relation_property_page_section"})}if(e.newValues){const t=u().ow(e.newValues),i=o.getPropertyStore(n);_().sO({environment:a,store:i,value:t,transaction:r})}}}),r().default.afterNextFlush((()=>{if(!i)return;const e=L().Z.findRow(i.id,"section",n);if(!e)return;const t=e.relationTokenBlockStoreRef.current;if(!t)return;const o=t.getBlockTitleStore(),r={start:{index:0,store:o},end:{index:0,store:o}};w().setMultiSelection({multiSelection:r})}))}function re(e,t,o,n,r){ne({newValues:[],oldValues:n},e,t,o,r)}function ae(e,t,o,n,r,a,i,l,s,c,d){if(!d||"relation"!==d.type)return;if(!r.canEdit())return;if((0,j().Wt)(r))return;const p=i.pointer.spaceId,m=d.limit,f=(0,F().Ii)({environment:n,table:g().iU,spaceId:p}),h=f.id;if(!(0,Z().OY)(r)||!a)return;const y=r.getPropertyValue(a),b=u().j$({relationValue:u().rq(y),propertySchema:d,getRecordModel:r.getRecordModel,includeDeleted:E().default.checkGate({gateName:"relations_show_deleted"}),includeInvalidCollection:E().default.checkGate({gateName:"relations_show_invalid_collection"}),includeNoAccess:E().default.checkGate({gateName:"relations_show_no_access"})});e&&e+1>l&&s(e+1);ne({newPage:{id:h,spaceId:p,name:""},newValues:m?[f]:e?[...b.slice(0,e),f,...b.slice(e)]:[f,...b],oldValues:b},t,r,a,n),v().W(n,{...(0,B().Pn)(c),from:o,type:"page",target_collection_id:null==t?void 0:t.id,new_page_id:h,creating_block_id:h})}function ie(e,t,o,n,r,a,i,l,s){const c=s.current;if(!(c&&c instanceof Element))return;if((0,j().Wt)(a))return;const d=o?null==o?void 0:o.getBoundingClientRect():c.getBoundingClientRect(),u=e?d.top+O().Mu:d.top+5,p=new DOMRect(d.left,u,d.width,d.height);b().bA({environment:n,blockPropertyValueOverlayStore:r,store:a,property:i,rect:p,format:K().C.Page,mode:t,collectionContextStore:l}),y().ud(n,{from:"relation_section"})}},384152:(e,t,o)=>{o.d(t,{Z:()=>a});var n=o(667294),r=o(785893);const a=n.forwardRef((function(e,t){const{children:n,property:a,store:i}=e,l=(0,o(802729).C)({propertyId:a,store:i})||[];return(0,r.jsx)("div",{ref:t,className:l.length?l.join(" "):void 0,children:n})}))},330982:(e,t,o)=>{o.d(t,{t:()=>i});o(667294);var n=()=>o(611253),r=()=>o(135499),a=o(785893);function i(e){const{imageRef:t,url:o,blockStore:i,environment:l}=e;return e=>{if(e.stopPropagation(),e.preventDefault(),!t.current)return;const s=t.current.getBoundingClientRect(),c=s.width/s.height;n().ui({environment:l,renderFullScreenNode:()=>(0,a.jsx)(r().Z,{url:o,isAuthenticated:!0,permissionRecord:i.pointer,width:window.innerWidth,render:(e,t)=>(0,a.jsx)("img",{src:t,style:{position:"relative",maxHeight:"100%",maxWidth:"100%",margin:0,alignSelf:"center",width:"100%"}})}),fullScreenNodeRect:s,contentAspectRatio:c,imageUrl:o,blockStore:i})}}},690982:(e,t,o)=>{o.d(t,{B:()=>j});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(470928),o(241792),o(228244);var n=o(667294),r=()=>o(492788),a=()=>o(219727),i=()=>o(732811),l=()=>o(142735),s=()=>o(846550),c=()=>o(226413),d=()=>o(532850),u=()=>o(215134),p=()=>o(788860),g=()=>o(513670),m=()=>o(250303),f=()=>o(971928),h=()=>o(102182),y=()=>o(990966),v=()=>o(269299),b=()=>o(922646),S=()=>o(949842),x=()=>o(466970),C=()=>o(799603),M=()=>o(739479),k=()=>o(162178),_=()=>o(998901),w=()=>o(735697),I=()=>o(1910),P=()=>o(206352),T=()=>o(291198),R=()=>o(192106),V=()=>o(654133),A=()=>o(96778),B=()=>o(356321),F=o(785893);const j=(0,n.forwardRef)((function(e,t){const{property:r,propertySchema:i,format:s}=(0,n.useContext)(A().OU),{collectionStore:u,disabled:p,locked:g,store:m,formQuestionStore:f,formDataStore:h}=e,{isMobile:y}=(0,a().Fy)(),v=(0,l().VK)((()=>{var e;return"multi_select"===(null==i?void 0:i.type)?null==f||null===(e=f.getPropertyTypeSpecificConfig("multi_select"))||void 0===e?void 0:e.maxSelectionCount:void 0}),[f,i]),b=(0,o(469753).J8)({formQuestionStore:f,propertySchema:i}),S=(0,l().VK)((()=>i&&(0,c().cu)(i)?i.options??[]:[]),[i]),x=(0,l().VK)((()=>{var e;const t=null==h||null===(e=h.getFormState())||void 0===e?void 0:e.draftFormBlockStore;if(!r||!t)return new Set;const o=null==t?void 0:t.getPropertyValue(r),n=(0,d().ib)(o,S);return new Set(n.map((e=>e.id)))}),[h,S,r]),C=(0,l().VK)((()=>`form-question-${null==f?void 0:f.id}`),[f]);return s!==B().C.FormEditor||g?(0,F.jsx)("div",{style:{marginTop:8,marginLeft:y?void 0:-8,display:"flex",gap:y?4:0,flexDirection:"column"},children:S.map((e=>{let t=p;return v&&x.size>=v&&!b&&(x.has(e.id)||(t=!0)),(0,F.jsx)(D,{store:m,disabled:t,option:e,allOptions:S,showRadioButtonSelector:b,questionName:C},e.id)}))}):(0,F.jsx)(Z,{options:S,collectionStore:u,showRadioButtonSelector:b,formQuestionStore:f})}));function Z(e){const t=(0,a().O7)(),[r,i]=(0,n.useState)(!1),[c,d]=(0,n.useState)(!1),[u,m]=(0,n.useState)(!1),{options:h,collectionStore:y,showRadioButtonSelector:v,formQuestionStore:b}=e,{property:x}=(0,n.useContext)(A().OU),C=(0,l().VK)((()=>y.getSchema()),[y]),M=(0,s().yK)((e=>({addOptionButtonStyle:{color:e.lightTextColor,fill:e.lightTextColor},selectOptionList:{marginTop:h.length>0?4:0},newSelectOption:{marginTop:h.length>0?0:4}})),[h]);return x?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(o(119891).ZP,{direction:"vertical",style:M.selectOptionList,keys:null==h?void 0:h.map((e=>e.value)),disabled:c,onDragStart:()=>m(!0),onDragEnd:()=>m(!1),renderKey:e=>{const t=h.find((t=>t.value===e));return t?(0,F.jsx)(N,{type:"persisted",option:t,options:h,showRadioButtonSelector:v,isDragging:u,collectionStore:y,setNewOptionInput:i,setDisableDragging:d,formQuestionStore:b},t.id):null},onDrop:e=>{f().n6({newValues:e,property:x,schema:C,collectionStore:y,environment:t})}}),r?(0,F.jsx)("div",{style:M.newSelectOption,children:(0,F.jsx)(N,{type:"temporary",collectionStore:y,options:h,showRadioButtonSelector:v,isDragging:u,setNewOptionInput:i,setDisableDragging:d,formQuestionStore:b})}):null,(0,F.jsx)(o(92175).Z,{onMouseDown:e=>{(0,S().ZP)({event:e,context:S().Af.EditorMouseDown,callback:g().yR})},icon:e=>(0,o(521777).R)({...e,width:18,marginLeft:1,marginRight:11,fill:M.addOptionButtonStyle.fill}),style:{color:M.addOptionButtonStyle.color,marginLeft:4,marginTop:4},onClick:e=>{i(!0)},children:(0,F.jsx)(p()._H,{id:"questionModule.formSelectMultiSelectProperty.addOption",defaultMessage:"Add option"})})]}):null}const O=6;function D(e){const{option:t,allOptions:r,store:i,disabled:u,showRadioButtonSelector:p,questionName:g}=e,m=(0,a().O7)(),{isMobile:f}=(0,a().Fy)(),{format:h,property:y,propertySchema:b}=(0,n.useContext)(A().OU),S=(0,l().VK)((()=>null==b?void 0:b.type),[b]),x=(0,l().VK)((()=>{if(!y||!b||!(0,c().cu)(b))return!1;const e=i.getPropertyValue(y);let o=[];if("select"===b.type){const t=(0,d().P4)(e,r);o=t?[t]:[]}else o=(0,d().ib)(e,r);return o.some((e=>e.value===t.value))}),[i,t,r,b,y]),C=(0,s().yK)((e=>({selectorButton:{width:"calc(100% + 16px)",borderRadius:O},selectorButtonInner:{border:"none",padding:"4px 8px",borderRadius:O,...f?{backgroundColor:"light"===e.mode?e.accentColors.gray[30]:e.accentColors.gray[100]}:{}},selectorButtonPressed:{backgroundColor:e.buttonPressedBackground},selectorButtonHovered:{backgroundColor:e.buttonHoveredBackground},rowPadding:{padding:h===B().C.FormEditor?"0px 0px 0px 16px":void 0}})),[h,f]),M=(0,n.useCallback)((()=>{y&&b&&(0,c().cu)(b)&&("multi_select"!==b.type||p?v().createAndCommit({userAction:"FormSelectProperty.handleSelectQuestionSelectOption",environment:m,canUndo:!0,perform:e=>{t&&o(970105).sO({environment:m,store:i.getPropertyStore(y),value:(0,o(955620).TPx)(t.value),transaction:e})}}):v().createAndCommit({userAction:"FormSelectProperty.handleMultiSelectQuestionSelectOption",environment:m,canUndo:!0,perform:e=>{x?v().applyOperation({transaction:e,store:i.getPropertyStore(y),operation:{path:["properties",y],pointer:i.pointer,command:"removeSelectOption",args:{option:t.value}}}):v().applyOperation({transaction:e,store:i.getPropertyStore(y),operation:{path:["properties",y],pointer:i.pointer,command:"addSelectOptionAfter",args:{option:t.value}}})}}))}),[m,t,x,b,y,i,p]);return b&&(0,c().cu)(b)?(0,F.jsx)("div",{style:{display:"flex",alignItems:"center",wordBreak:"break-word"},children:(0,F.jsx)(o(212493).jX,{direction:"row",padding:C.rowPadding.padding,children:(0,F.jsx)(o(154186).Z,{hoveredStyle:C.selectorButtonHovered,pressedStyle:C.selectorButtonPressed,style:C.selectorButton,disallowTabbing:!0,children:(0,F.jsx)(R().n,{style:C.selectorButtonInner,name:g,isDisabled:u,label:t.value,onChange:M,selectorSize:"large",isSelected:h===B().C.FormViewer&&x,value:"select_option",selectType:"select"===S||p?"radio":"checkbox",selectAlignYAxis:"center"})})})}):null}function N(e){const t=(0,a().O7)(),o=(0,p().YB)(),{type:d,collectionStore:v,formQuestionStore:S,option:B,options:j,isDragging:Z,setNewOptionInput:O,setDisableDragging:D,showRadioButtonSelector:N}=e,[L,E]=n.useState((null==B?void 0:B.value)??""),[U,K]=(0,n.useState)(!1),[W,z]=(0,n.useState)(!1),[H,G]=(0,n.useState)(!1),Y=(0,x().E)("forms_conditional_logic"),{setModuleSelection:q}=(0,k().J9)();(0,i().K)((()=>{"temporary"===d&&(G(!0),z(!0))}));const{property:Q,propertySchema:$,collectionContextStore:X}=(0,n.useContext)(A().OU),J=(0,l().VK)((()=>null==S?void 0:S.getParentStore()),[S]),ee=(0,l().VK)((()=>{const e=null==J?void 0:J.getModules();if(e&&S)return(0,u().ni)({modulesByArea:e,formQuestionModuleId:S.id})}),[S,J]),te=(0,n.useCallback)((()=>{if(!Q||!$||!(0,c().cu)($))return;const e=L.trim();e?("alphabetical"===$.auto_sort_options||"reverse_alphabetical"===$.auto_sort_options?f().P3({modification:{type:"autoSortInsert",newValue:e},property:Q,propertySchema:$,options:j,environment:t,collectionStore:v}):f().P3({modification:{type:"keyedObjectListAfter",newValue:e},property:Q,propertySchema:$,options:j,environment:t,collectionStore:v}),O(!1),X&&m().$q({environment:t,collectionContextStore:X,property:Q,from:"form_editor",action:"select_add_option"})):O(!1),G(!1)}),[Q,O,X,$,j,t,L,v]),oe=(0,n.useCallback)((e=>{Q&&B&&$&&(0,c().cu)($)?(e?f().yW({environment:t,option:B,property:Q,propertySchema:$,collectionStore:v}):f().P3({modification:{type:"keyedObjectListRemove",id:B.id},property:Q,propertySchema:$,environment:t,collectionStore:v}),X&&m().$q({environment:t,collectionContextStore:X,property:Q,from:"form_editor",action:"select_delete_option"}),O&&O(!1),G(!1),z(!1),D(!1)):O&&O(!1)}),[Q,O,X,$,B,z,D,t,v]),ne=(0,n.useCallback)((()=>{if(!(Q&&B&&$&&(0,c().cu)($)))return;const e=L.trim();e?(e&&e!==(null==B?void 0:B.value)&&(f().P3({modification:{type:"keyedObjectListUpdate",option:B,newValue:e},property:Q,propertySchema:$,options:j,environment:t,collectionStore:v}),X&&m().$q({environment:t,collectionContextStore:X,property:Q,from:"form_editor",action:"select_rename_option"})),G(!1),z(!1),D(!1)):oe()}),[Q,X,oe,$,t,z,D,B,j,L,v]),re=(0,n.useCallback)((()=>{Q&&$&&(0,c().cu)($)&&ee&&J&&B&&b().zM({environment:t,layoutStore:J,currentQuestionModule:ee.questionModule,area:ee.area,property:Q,filterValue:{type:$.type,value:B},setModuleSelection:q})}),[Q,t,ee,J,B,q,$]),ae=g().Ds((()=>K(!0)),5),ie=ae,le=(0,n.useCallback)((()=>{K(!1),ae.cancel()}),[ae]),se=(0,n.useMemo)((()=>U&&!W),[U,W]),ce=(0,n.useMemo)((()=>U&&!W&&!Z),[W,Z,U]),de=(0,n.useMemo)((()=>{if(null==B||!B.value||!$)return!1;const e=Y&&U&&!W&&!Z,t=null==ee?void 0:ee.questionModule.conditionalGroups,o="select"===$.type?{property:Q,filter:{operator:"enum_is",value:{type:"exact",value:B.value}}}:{property:Q,filter:{operator:"enum_contains",value:{type:"exact",value:B.value}}},n=null==t?void 0:t.some((e=>g().Xy(e.trigger,o)));return e&&!n}),[W,Z,U,Y,ee,Q,null==B?void 0:B.value,$]),ue=(0,s().yK)((e=>({container:{display:"flex",alignItems:"center",width:"calc(100% + 16px)",marginLeft:-8,padding:"2px 4px",borderRadius:6,backgroundColor:U?e.buttonHoveredBackground:void 0,cursor:"grab"},dragHandle:{position:"absolute",zIndex:2,marginLeft:"-2px"},innerContainer:{display:"flex",alignItems:"center",padding:"0px 0px 0px 16px",width:"100%"}})),[U]);return Q&&$&&(0,c().cu)($)?(0,F.jsxs)("div",{style:ue.container,onMouseMove:ie,onMouseLeave:le,children:[se&&(0,F.jsx)(w().Z,{width:16,height:24,disallowTabbing:!0,disableDrag:W,tooltipPlacement:_().Placement.Left,hideClickMessage:!0,style:ue.dragHandle}),(0,F.jsxs)("div",{style:ue.innerContainer,children:[(0,F.jsx)(R().n,{style:{border:"none",padding:0,cursor:"grab",flexGrow:0},isDisabled:!0,label:null,isSelected:!1,selectorSize:"large",value:"select_option",selectType:"select"===$.type||N?"radio":"checkbox"}),(0,F.jsx)(P().Z,{debugName:"Form question option",capture:W,allowMenuList:!0,allowEsc:!0,allowCopyPaste:!0,allowUndo:!0,children:(0,F.jsx)(T().Z,{value:L,style:{padding:"2px 0px",paddingRight:3,maxWidth:ce?"calc(100% - 50px)":"100%",flexGrow:1,overflowX:"hidden"},focus:W,format:T().B.Transparent,onMouseDown:e=>e.stopPropagation(),onFocus:()=>{D(!1),H||y().clear({environment:t})},onClick:()=>z(!0),onChange:e=>{G(!1);const t=/,/g;t.test(e.target.value)&&h().oV({label:(0,F.jsx)(p()._H,{id:"questionModule.formSelectMultiSelectProperty.commaWarning",defaultMessage:"Commas are currently not supported."})});const o=e.target.value.replace(t,"").trim();E(o)},onKeyDown:e=>{"Backspace"===e.key&&""===L&&oe()},onBlur:"temporary"===d?te:ne,onSubmit:e=>{"temporary"===d?te():ne(),r().default.afterNextFlush((()=>{O(!0)}))}})}),de&&(0,F.jsx)(V().Z,{placement:_().Placement.Top,renderTooltip:()=>(0,F.jsx)(p()._H,{defaultMessage:"Add conditional logic",id:"FormMultiSelectProperty.ConditionalLogicIcon.title"}),render:e=>(0,F.jsx)(I().Z,{style:{width:20,height:20,flexGrow:0,transform:"rotate(90deg)"},onClick:re,icon:C().B,ariaLabel:o.formatMessage({defaultMessage:"Add conditional logic",id:"FormMultiSelectProperty.ConditionalLogicIcon.title"}),...e})}),ce&&(0,F.jsx)(I().Z,{style:{width:20,height:20,flexGrow:0},onClick:()=>oe(!0),icon:M().y,ariaLabel:o.formatMessage({defaultMessage:"Delete option",id:"BlockPropertyRouter.FormSelectProperty.TrashIcon.title"})})]})]}):null}},11593:(e,t,o)=>{o.d(t,{e:()=>r,g:()=>a});var n=()=>o(677559);const r=new(n().Ss)("formPropertyRenderer",(()=>o.e(64331).then(o.bind(o,25315)))),a=(0,n().iS)(r,(e=>e.default))},596324:(e,t,o)=>{o.d(t,{O:()=>x});o(667294);var n=()=>o(219727),r=()=>o(142735),a=()=>o(846550),i=()=>o(226413),l=()=>o(998411),s=()=>o(788860),c=()=>o(707513),d=()=>o(463058),u=()=>o(582835),p=()=>o(193533),g=()=>o(998901),m=()=>o(128076),f=()=>o(154186),h=()=>o(654133),y=o(785893);const v=200,b=75,S=75;function x(e){let{blockStore:t,collectionContextStore:o,columnWidth:x}=e;const C=(0,r().Kw)(o.currentSubitemFormatStoreForCollectionStore),M=(0,r().VK)((()=>t.getAssociatedCollectionStore()),[t]),k=(0,r().VK)((()=>{var e;return null===(e=o.collectionViewStore())||void 0===e?void 0:e.getType()}),[o]),_=(0,r().VK)((()=>{if(!C||!M)return;const e=M.getSchema()[C.property];return void 0!==e&&(0,i().p_)(e)?e:void 0}),[M,C]),w="table"===k||"list"===k||"timeline"===k,I=(0,n().O7)(),P=(0,s().YB)(),T=I.device.isMobile?b:v,R=(0,a().yK)((e=>({parentItemIcon:{color:e.mediumIconColor,width:14,height:14,marginRight:2},button:{height:20,display:"flex",alignItems:"center",color:e.lightTextColor,borderRadius:6,padding:"0 6px"},parentTitle:{...w?{maxWidth:x?Math.min(T,x-S):T}:{},fontWeight:c().Ue.medium,fontSize:c().JB.UISmall.desktop,...c().Yu}})),[x,w,T]),V=(0,r().VK)((()=>C&&_?(0,u().xb)({store:t,subitemFormat:C,propertySchema:_}):[]),[t,C,_]),A=(0,r().VK)((()=>{if(0===V.length)return;const e=V[0];return m().G.createChildStore(t,e)}),[t,V]),B=(0,r().VK)((()=>{var e;return null==A||null===(e=A.getModel())||void 0===e?void 0:e.getRenderTitleWithPlaceholder({getRecordModel:A.getRecordModel,userTimeZone:(0,l().r)(),intl:P})}),[A,P]);return(0,r().VK)((()=>(0,u().Cr)({collectionContextStore:o,blockStore:t})),[o,t])&&A?(0,y.jsx)(h().Z,{renderTooltip:()=>(0,y.jsx)("div",{children:B}),alignment:g().Alignment.Start,delayThreshold:300,render:e=>(0,y.jsxs)(f().Z,{ariaLabel:P.formatMessage({id:"parentItemIndicator.button.openParentSidePeek.ariaLabel",defaultMessage:"Open parent in side peek"}),onClick:()=>{d().O({relationPointers:V,relatedPageStore:A,environment:I,from:"relation_property",peekMode:"side_peek"})},style:R.button,...e,children:[(0,p().v)(R.parentItemIcon),(0,y.jsx)("div",{style:R.parentTitle,children:B})]})}):null}},973509:(e,t,o)=>{o.d(t,{B:()=>u});o(667294);var n=()=>o(142735),r=()=>o(846550),a=()=>o(226413),i=()=>o(707513),l=()=>o(887430),s=()=>o(582835),c=()=>o(175310),d=o(785893);function u(e){let{blockStore:t,collectionContextStore:o,wrapperStyle:u}=e;const p=(0,n().Kw)(o.currentSubitemFormatStoreForCollectionStore),g=(0,n().VK)((()=>(0,l().Bm)({store:t,collectionContextStore:o})),[o,t]),m=(0,n().VK)((()=>{if(!p||!g)return;const e=g.getSchema()[p.property];return void 0!==e&&(0,a().p_)(e)?e:void 0}),[g,p]),f=(0,r().yK)((e=>({subItemIcon:{color:e.mediumIconColor,width:14,height:14,marginRight:2},wrapper:{display:"inline-flex",alignItems:"center",verticalAlign:" text-top",paddingRight:8,...u},numSubitemsSpan:{fontSize:i().JB.UISmall.desktop,fontWeight:i().Ue.medium,color:e.lightTextColor}})),[u]),h=(0,n().VK)((()=>p&&m?(0,s().CJ)({store:t,subitemFormat:p,propertySchema:m}):[]),[t,p,m]);return(0,n().VK)((()=>(0,s().wI)({collectionContextStore:o,blockStore:t})),[o,t])&&0!==h.length?(0,d.jsxs)("span",{style:f.wrapper,children:[(0,c().S)(f.subItemIcon),(0,d.jsx)("span",{style:f.numSubitemsSpan,children:h.length})]}):null}},328094:(e,t,o)=>{o.d(t,{Z:()=>j});var n=o(667294),r=()=>o(219727),a=()=>o(142735),i=()=>o(846550),l=()=>o(226413),s=()=>o(788860),c=()=>o(949842),d=()=>o(466970),u=()=>o(826955),p=o(785893);function g(e){const{theme:t,intl:r,relatedDatabaseRecordTitle:a}=e,i=(0,n.useCallback)((()=>{const e=e=>(0,p.jsx)("div",{style:{color:t.mediumInvertedTextColor,marginTop:1},children:e});return a?r.formatMessage({defaultMessage:"This linked page does not belong to {relatedDatabaseWithIcon}.<caption>To make the link valid, consider moving the page into {relatedDatabaseWithIcon}.</caption>",id:"invalidMentionPill.pageInvalid.tooltipWithRecordTitle"},{relatedDatabaseWithIcon:a,caption:e}):r.formatMessage({defaultMessage:"This linked page does not belong to the related database.<caption>To make the link valid, consider moving the page into the related database.</caption>",id:"invalidMentionPill.pageInvalid.tooltipWithoutRecordTitle"},{caption:e})}),[r,t,a]);return(0,p.jsx)(o(654133).Z,{renderTooltip:i,render:e=>(0,p.jsx)(o(980740).Z,{theme:t,style:{color:t.text.redTertiary,background:t.fill.redPrimary},icon:o(735501).t,extraAttrs:e,children:r.formatMessage({defaultMessage:"Invalid",id:"invalidMentionPill.pageInvalid"})})})}var m=()=>o(492788),f=()=>o(990966),h=()=>o(129338),y=()=>o(154186),v=()=>o(384241);function b(e){const{blockStore:t,titleStyle:o,shouldWrap:r,recordTitleRef:a,disableTooltip:i}=e,l=(0,n.useRef)({getNode:()=>a.current}),s=(0,n.useCallback)((e=>{m().default.afterNextFlush((()=>{const e=t.getBlockTitleStore();if(!e)return;const o=e.getValue(),n=o?o[0][0].length:0,r={start:{index:n,store:e},end:{index:n,store:e}};f().setMultiSelection({multiSelection:r})}))}),[t]);return(0,p.jsx)(y().Z,{style:{height:h().Mu+2,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:5,padding:"6px 8px 7px 8px",overflow:"hidden"},onClick:s,children:(0,p.jsx)(v().Z,{store:t,underline:!0,shouldWrap:r,style:o,ref:l,disableTooltip:i})})}var S=()=>o(513670),x=()=>o(12512),C=()=>o(527278),M=()=>o(345837);const k=(0,s().vU)({typeTitle:{defaultMessage:"Type a title...",id:"relationToken.title.placeholder"}});function _(e){const{blockStore:t,clickTitleBehavior:o,onTitleEnter:n,onTitleEsc:r}=e,i="edit"===o,l=(0,a().VK)((()=>t.getBlockTitleStore()),[t]);return(0,p.jsx)(M().Z,{store:l,disabled:!i,disableSlashCommands:!0,disableEmojiCommands:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableEmbedMenu:!0,onEnter:n,onEsc:r,onTab:S().yR,placeholder:C().Z.formatMessage(k.typeTitle),style:{padding:"6px 8px 7px 8px",textOverflow:"none",overflow:"visible",whiteSpace:"pre"},disableSelectAllBlocks:!0,pasteBehavior:"inline",inPageFind:x().B3.none})}var w=()=>o(955620),I=()=>o(970105);const P=function(e){const{store:t,style:l,disableLinks:d,disableHover:u,isAndroid:g,externalIntegrations:m,canEdit:f,shouldWrap:h,tokenFormat:y}=e,v=(0,n.useRef)(null),b=(0,s().YB)(),S=(0,r().O7)(),x=(0,i().Fg)(),{isExternalIntegrationPageType:C,blockType:M,blockId:k,blockModel:_}=(0,a().VK)((()=>{const e=t.getModel();return{isExternalIntegrationPageType:Boolean(null==e?void 0:e.isType(o(156642).Ti.externalObjectInstancePage)),blockType:t.getType(),blockId:t.id,blockModel:e}}),[t]),P=(0,a().VK)((()=>o(338530).Z.getState()),[]),T=(0,n.useCallback)((()=>{if(!v||!v.current)return;const e=(0,w().x36)(t.id),o=(0,w().YCD)(e);return{textValue:[o],tokenIndex:0,textToken:o,node:v.current}}),[v,t.id]),R=(0,n.useCallback)((e=>{if(u)return;const o=T(),n=t.getTitleStore();n&&o&&I().Nh({environment:S,event:e,interactiveToken:o,store:n,canEdit:f})}),[u,T,t,S,f]),V=(0,n.useCallback)((e=>{const o=T(),n=t.getTitleStore();n&&o&&!u&&I().Zl({environment:S,event:e,interactiveToken:o,store:n,canEdit:f})}),[T,t,u,S,f]),A=t.getRecordModel,B=k,F=(0,o(718611).e_)(S),j=o(205228).default.domainBaseUrl,Z=S.currentUser.id,O=!d,D=(0,a().VK)((()=>{if(_)return(0,o(572948).dD)({blockModel:_,shouldWrap:h,index:0,style:l,disableHover:u,disableLinks:d,isAndroid:g,theme:x,getRecordModel:A,currentUserId:Z,baseUrl:j,emojiType:F,externalIntegrations:m,classNames:[],intl:b,emojiData:P,stopLinkPropagation:O,tokenFormat:(0,o(603885).jV)(y)})}),[_,h,l,u,d,g,x,A,Z,j,F,m,b,P,O,y]);return B?"external_object_instance_page"!==M?null:C?(0,p.jsx)("span",{ref:v,onMouseOver:R,onMouseOut:V,onClick:O?c().Wi:void 0,style:{width:"100%"},children:D}):null:null};function T(e){const{blockStore:t,shouldWrap:n,style:i,disableLinks:l,format:s}=e,c=(0,a().VK)((()=>(0,o(916673).yn)(t.getSyncedUri())),[t]),d=(0,a().Kw)(o(138912).default.integrations),u=(0,r().O7)();return(0,p.jsx)(P,{shouldWrap:n,store:t,style:i,disableHover:l||!c,disableLinks:l||!c,isAndroid:u.device.isAndroid,externalIntegrations:d,canEdit:!0,tokenFormat:s})}var R=()=>o(341509);function V(e){const{format:t,showRemoveButton:n,onClickRemove:r}=e,{height:a,closeIconSize:i}=R().r[t];return n?(0,p.jsx)(y().Z,{onClick:r,style:{display:"flex",alignItems:"center",justifyContent:"center",width:a,height:a,marginLeft:2,marginRight:2,flexGrow:0,flexShrink:0,borderRadius:4},children:(0,o(429587).b)({width:i,height:i,opacity:.5})}):null}function A(e){const t=(0,r().O7)(),n=(0,o(125659).DK)(),i=(0,a().VK)((()=>(0,o(429725).ZP)({store:e,fullyQualified:!1,pageVisitSource:o(506347).tY.LinkInPage})),[e]);return{blockUrlPeek:(0,a().VK)((()=>{const{mainEditorCurrentBlockStore:r}=o(876822).default.state;return o(887430).mb({environment:t,store:e,mainEditorCurrentBlockStore:r,collectionContextStore:n,fullyQualified:!1})}),[t,e,n]),blockUrlPage:i}}var B=()=>o(191003),F=()=>o(127519);const j=(0,n.forwardRef)((function(e,t){const{parentStore:m,blockId:f,relationPropertySchema:h,shouldWrap:y,format:v,showRemoveButton:b,clickTitleBehavior:S,onClickRemove:x,titleStyle:C,onTitleEnter:M,onTitleEsc:k,index:_,noUnderline:w,disableTooltip:I,disableLinks:P}=e,B=(0,r().O7)(),F=(0,s().YB)(),j=(0,i().Fg)(),D=u().G.createChildStore(m,{table:o(396136).iU,id:f}),{style:N}=(0,R().O)(e),{blockUrlPage:L,blockUrlPeek:E}=A(D),U=(0,n.useRef)(null),K=(0,n.useRef)(null),W="peek"===S,z={display:N.display,height:N.height,alignItems:N.alignItems};(0,n.useImperativeHandle)(t,(()=>D),[D]);const H=(0,o(480089).cR)(D),G=(0,a().VK)((()=>!!D.isDefined()&&(void 0!==h&&(D.getParentPointer(),o(504008).Z.withListenerIgnored((()=>{const e=D.getAssociatedCollectionStore();if(!e){const e=(0,l().j0)(h);if(e){const t=u().NW.createChildStore(D,e);if(t.isDefined())return!t.isPageTreeCollection()||!!D.pathIsAccessibleAndAlive()}return!1}return!h||e.id!==l().F0(h)}))))),[D,h]),Y={showInvalid:(0,d().E)("relations_show_invalid_collection"),showDeleted:(0,d().E)("relations_show_deleted"),showNoAccess:(0,d().E)("relations_show_no_access")},q=(0,a().VK)((()=>{if(!Y.showInvalid)return;if(void 0===h)return;const e=(0,l().j0)(h);if(e){const t=u().NW.createChildStore(D,e).getParentBlockStore();if(t&&t.isCollectionView())return t}}),[D,h,Y.showInvalid]),Q={environment:B,parentStore:m,blockStore:D,relationPropertySchema:h};O({...Q,metricName:"collection_render_invalid_relation",trigger:G,experimentEnabled:Y.showInvalid,extraProperties:{invalid_badge_shown:Y.showInvalid&&G}}),O({...Q,metricName:"collection_render_in_trash_relation",trigger:H,experimentEnabled:Y.showDeleted,extraProperties:{in_trash_badge_shown:Y.showDeleted&&H}});const $=(0,a().VK)((()=>D.isReady()&&"none"===D.getRole()),[D]);O({...Q,metricName:"collection_render_no_access_relation",trigger:$,experimentEnabled:Y.showNoAccess,extraProperties:{no_access_visible:Y.showNoAccess&&$}});if((0,a().VK)((()=>"external_object_instance_page"===D.getType()),[D]))return(0,p.jsx)(T,{shouldWrap:y,blockStore:D,style:N,disableLinks:P,format:v});const X=(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o(103462).Z,{format:v,blockStore:D,clickTitleBehavior:S,shouldWrap:y}),(0,p.jsx)(Z,{blockStore:D,recordTitleRef:U,clickTitleBehavior:S,shouldWrap:y,titleStyle:C,noUnderline:w,onTitleEnter:M,onTitleEsc:k,index:_,disableTooltip:I}),Y.showDeleted&&(0,p.jsx)(o(871607).Z,{isPageInTrash:H,intl:F,theme:j}),Y.showInvalid&&G&&(0,p.jsx)(g,{intl:F,theme:j,relatedDatabaseRecordTitle:q&&(0,p.jsx)(o(525496).Z,{store:q,useInvertedColors:!0})})]});return(0,p.jsxs)("div",{style:N,ref:K,children:[W?(0,p.jsx)(o(108714).Z,{href:L,metaHref:E,onClick:c().Wi,style:z,children:X}):X,(0,p.jsx)(V,{showRemoveButton:b,onClickRemove:x,format:v})]})}));function Z(e){const{blockStore:t,clickTitleBehavior:n,onTitleEnter:r,onTitleEsc:i,index:l,recordTitleRef:s,titleStyle:c,shouldWrap:d,noUnderline:u,disableTooltip:g}=e,m=(0,o(309797).L2)(t),f="edit"===n&&!m,h=function(e){return(0,a().VK)((()=>{var t;const o=F().default.state;return"editing"===o.mode&&(null===(t=(0,B().QY)(o.multiSelection))||void 0===t?void 0:t.store)===e.getBlockTitleStore()}),[e])}(t);return f?h&&r&&l?(0,p.jsx)(_,{blockStore:t,clickTitleBehavior:n,onTitleEnter:r,onTitleEsc:i}):(0,p.jsx)(b,{blockStore:t,recordTitleRef:s,titleStyle:c,shouldWrap:d,disableTooltip:g}):(0,p.jsx)(o(203571).Z,{blockStore:t,recordTitleRef:s,titleStyle:c,shouldWrap:d,noUnderline:u,disableTooltip:g})}function O(e){let{environment:t,parentStore:n,blockStore:r,relationPropertySchema:a,metricName:i,trigger:l,experimentEnabled:s,extraProperties:c}=e;(0,o(61951).Z)((()=>{(0,o(594546).lu)(t,i,`${i}-${n.id}-${r.id}`,86400,{parent_store_id:n.id,parent_store_table:n.table,relation_block_id:r.id,relation_parent_id:r.getParentId(),relation_parent_table:r.getParentTable(),target_collection_id:null==a?void 0:a.collection_id,...c})}),l)}},103462:(e,t,o)=>{o.d(t,{Z:()=>g});var n=o(667294),r=()=>o(219727),a=()=>o(142735),i=()=>o(846550),l=()=>o(636340),s=()=>o(269299),c=()=>o(607031),d=()=>o(943620),u=()=>o(341509),p=o(785893);function g(e){const{clickTitleBehavior:t,blockStore:o,format:c,shouldWrap:g}=e,f="edit"===t,h=(0,r().O7)(),y=(0,a().VK)((()=>o.getIcon()),[o]),v=(0,a().VK)((()=>o.isEmptyPage()),[o]),b=(0,a().VK)((()=>o.isReady()&&"none"===o.getRole()),[o]),{style:S}=(0,i().yK)((()=>({style:{flexShrink:0,marginRight:f?0:u().r[c].recordIconMarginRight,justifyContent:"flex-start",...g&&{display:"inline-block",verticalAlign:"text-top",marginBottom:-1}}})),[f,c,g]),x=(0,n.useCallback)((e=>{const t=o.getIconStore();t&&s().createAndCommit({userAction:"RelationToken.handleRecordIconChange",environment:h,canUndo:!0,perform:o=>{l().sO({store:t,value:e,transaction:o})}})}),[o,h]),C={icon:y,size:u().r[c].pageIconSize,isEmptyPage:v,style:S};return b?(0,p.jsx)(m,{...C}):f?(0,p.jsx)(d().Z,{...C,disabled:!1,onChange:x,bucket:"public"}):(0,p.jsx)(d().Z,{...C,disabled:!0})}function m(e){const t=(0,i().Fg)();return(0,c().B)({...e.style,width:e.size,height:e.size,fill:t.icon.secondary,verticalAlign:"top",marginTop:1})}},203571:(e,t,o)=>{o.d(t,{Z:()=>i});var n=o(667294),r=()=>o(384241),a=o(785893);function i(e){const{blockStore:t,shouldWrap:o,titleStyle:i,recordTitleRef:l,noUnderline:s,disableTooltip:c}=e,d=(0,n.useRef)({getNode:()=>l.current});return(0,a.jsx)(r().Z,{store:t,underline:!s,shouldWrap:o,style:i,ref:d,enableHover:!0,showTooltipWhenTruncated:!0,disableTooltip:c})}},341509:(e,t,o)=>{o.d(t,{O:()=>s,r:()=>l});var n=()=>o(846550),r=()=>o(38883),a=()=>o(707513),i=()=>o(129338);const l={[r().lo.ExtremeSmall]:{height:16,fontSize:12,margin:"0 4px 0 0",recordIconMarginRight:3,pageIconSize:13,closeIconSize:8},[r().lo.ExtraSmall]:{height:16,fontSize:12,margin:"0 4px 0 0",recordIconMarginRight:3,pageIconSize:13,closeIconSize:8},[r().lo.Small]:{height:18,fontSize:12,margin:"0 6px 6px 0",recordIconMarginRight:3,pageIconSize:16,closeIconSize:8},[r().lo.CompactEssential]:{height:20,fontSize:14,margin:"0 12px 6px 0",recordIconMarginRight:4,pageIconSize:20,closeIconSize:8},[r().lo.Medium]:{height:20,fontSize:14,margin:"0 12px 6px 0",recordIconMarginRight:4,pageIconSize:20,closeIconSize:8},[r().lo.Inline]:{height:20,fontSize:14,margin:"0 12px 0 0",recordIconMarginRight:4,pageIconSize:20,closeIconSize:8},[r().lo.Large]:{height:24,fontSize:16,margin:"0 8px 8px 0",recordIconMarginRight:4,pageIconSize:24,closeIconSize:10}};function s(e){let{format:t,shouldShrink:o,shouldWrap:s,isSingle:d,style:u,clickTitleBehavior:p}=e;const g="edit"===p;return(0,n().yK)((()=>{const{fontSize:e,margin:n}=l[t],p=g?i().Mu:l[t].height;return{style:{...s?{display:"inline",lineHeight:1.5,borderRadius:4}:c({height:p}),fontSize:e,fontWeight:a().Ue.medium,minWidth:o?0:"auto",margin:d?0:n,...t===r().lo.Inline&&{overflow:"hidden"},...u}}}),[t,o,s,d,g,u])}function c(e){let{height:t}=e;return{display:"flex",alignItems:"center",lineHeight:1.2,height:t}}},783901:(e,t,o)=>{o.d(t,{z:()=>m});var n=o(667294),r=()=>o(846550),a=()=>o(501274),i=()=>o(496205),l=()=>o(788860),s=()=>o(696459),c=()=>o(707513),d=()=>o(541402),u=()=>o(383700),p=()=>o(603885),g=o(785893);function m(e){const{verificationValue:t,fontSize:o=p().z6}=e,m=(0,l().YB)(),f=(0,n.useMemo)((()=>i().WN(t)),[t]),h=f.type,y=(0,r().yK)((e=>({icon:{width:"expired"===h?8:14,height:"expired"===h?9:14,fill:"verified"===h?e.blueColor:e.mediumIconColor},caption:{fontVariantNumeric:"normal",fontWeight:c().Ue.regular,color:e.regularTextColor,textTransform:"none",letterSpacing:0,marginLeft:6,marginRight:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:o,lineHeight:p().Ac},expiredIconContainer:{width:14,height:14,borderRadius:6,border:"1px dashed",borderColor:e.mediumIconColor,display:"flex",justifyContent:"center",alignItems:"center",flexShrink:0}})),[h,o]);if("none"===h)return null;let v=null,b=null;const S=y.caption;switch(h){case"verified":v=(0,d().f)({...y.icon}),b=f.isIndefinite?(0,g.jsx)(l()._H,{defaultMessage:"Verified",id:"VerificationPropertyButton.verifiedIndefinitely"}):(0,g.jsx)(l()._H,{defaultMessage:"Until {date}",id:"VerificationPropertyButton.verifiedUntil",values:{date:a().mb({dateTime:f.dateTimeRange.end,intl:m})}});break;case"expired":v=(0,g.jsx)("div",{style:y.expiredIconContainer,children:(0,u().X)({...y.icon})}),b=(0,g.jsx)(l()._H,{defaultMessage:"Expired {timeFromMoment}",id:"VerificationPropertyButton.expired.text",values:{timeFromMoment:i().kY(f.dateTimeRange.end.setLocale(m.locale))}});break;default:(0,s().t1)(h)}return(0,g.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[v,(0,g.jsx)("div",{style:S,children:b})]})}},593067:(e,t,o)=>{o.d(t,{Z:()=>f});o(667294);var n=()=>o(219727),r=()=>o(142735),a=()=>o(934158),i=()=>o(696056),l=()=>o(989478),s=()=>o(501274),c=()=>o(788860),d=()=>o(696459),u=()=>o(826955),p=()=>o(51620),g=()=>o(239444),m=o(785893);function f(e){const{isMobile:t}=(0,n().Fy)();return(0,m.jsx)("div",{style:t?{padding:"12px 20px",fontSize:14}:{fontSize:12,display:"flex",alignItems:"center"},children:(0,m.jsx)(h,{...e})})}function h(e){const{verificationState:t,blockStore:o}=e,n=(0,c().YB)();switch(t.type){case"none":return null;case"verified":return t.isIndefinite?(0,m.jsx)(c()._H,{defaultMessage:"Verified by {user} on {date}",id:"VerificationSummary.verifiedIndefinitely",values:{user:(0,m.jsx)(y,{actorPointer:t.actorPointer,blockStore:o}),date:(0,s().mb)({dateTime:t.startDateTime,intl:n})}}):(0,m.jsx)(c()._H,{defaultMessage:"Verified by {user} from {dateTimeRange}",id:"VerificationSummary.verified",values:{user:(0,m.jsx)(y,{actorPointer:t.actorPointer,blockStore:o}),dateTimeRange:(0,s().pe)({luxonRange:t.dateTimeRange,intl:n})}});case"expired":return(0,m.jsx)(c()._H,{defaultMessage:"Last verified by {user} from {dateTimeRange}",id:"VerificationSummary.verificationExpired",values:{user:(0,m.jsx)(y,{actorPointer:t.actorPointer,blockStore:o}),dateTimeRange:(0,s().pe)({luxonRange:t.dateTimeRange,intl:n})}});default:(0,d().t1)(t)}}function y(e){const{actorPointer:t,blockStore:o}=e,n=(0,r().VK)((()=>u().t1.createChildStore(o,t)),[o,t]),s={display:"flex",marginLeft:4,marginRight:4};return n.table===l().KJ?(0,m.jsx)(g().Z,{userStore:n,inline:!0,style:s,avatarSize:16,avatarMarginRight:4}):n.table===i().cZ?(0,m.jsx)(p().Z,{botStore:n,style:s,avatarSize:16}):n.table===a().y0?(0,m.jsx)(g().Z,{userStore:void 0,inline:!0,style:s,avatarSize:16,avatarMarginRight:4}):void(0,d().t1)(n)}},598645:(e,t,o)=>{o.d(t,{p:()=>a});var n=()=>o(677559);const r=new(n().Ss)("FilePropertyModule",(async()=>await o.e(80841).then(o.bind(o,73522)))),a=(0,n().kF)(r,(e=>e.FilePropertyModule))},968459:(e,t,o)=>{o.d(t,{r:()=>a});var n=()=>o(677559);const r=new(n().Ss)("PropertyModulePersonProperty",(async()=>await Promise.all([o.e(62743),o.e(53335),o.e(61171),o.e(23179),o.e(10553),o.e(72001)]).then(o.bind(o,840541)))),a=(0,n().kF)(r,(e=>e.PersonPropertyModule))},320197:(e,t,o)=>{o.d(t,{a:()=>a});var n=()=>o(677559);const r=new(n().Ss)("RelationMenuRow",(async()=>{const{RelationMenuRow:e}=await Promise.all([o.e(44832),o.e(39453)]).then(o.bind(o,290950));return{RelationMenuRow:e}})),a=(0,n().kF)(r,(e=>e.RelationMenuRow))},442531:(e,t,o)=>{o.d(t,{HZ:()=>r,YD:()=>i,_7:()=>a,io:()=>n});const n=new(o(677559).Ss)("framer-motion",(async()=>await Promise.all([o.e(37358),o.e(7312),o.e(70355),o.e(99464)]).then(o.bind(o,524138))));function r(e){return e.useAnimate()}function a(e){return e.useAnimation()}function i(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),n=1;n<t;n++)o[n-1]=arguments[n];return e.useInView(...o)}},521412:(e,t,o)=>{o.d(t,{X:()=>n});const n=new(o(677559).Ss)("pageCovers",(async()=>o.e(1642).then(o.bind(o,832783))))},337897:(e,t,o)=>{o.d(t,{AB:()=>V,AF:()=>M,Hw:()=>C,Sy:()=>S,TP:()=>P,VM:()=>b,X7:()=>k,X9:()=>w,aJ:()=>T,g0:()=>_,xE:()=>R,z0:()=>x});o(267602),o(228244);var n=()=>o(506347),r=()=>o(15607),a=()=>o(226413),i=()=>o(532850),l=()=>o(114079),s=()=>o(955620),c=()=>o(513670),d=()=>o(696459),u=()=>o(916673),p=()=>o(326966),g=()=>o(356321),m=()=>o(998215),f=()=>o(929071),h=()=>o(466043),y=()=>o(429725),v=()=>o(527278);function b(e){return Boolean(e.state.isOpen&&e.state.collectionsBulkActionsToolbarStore)}function S(e){switch(e){case g().C.Table:return"table";case g().C.Board:return"board";case g().C.ListView:return"list";case g().C.GalleryView:return"gallery";case g().C.Relation:case g().C.RelationSection:return"relation_section";case g().C.Timeline:return"timeline";case g().C.Calendar:return"calendar";case g().C.Page:return"page_properties";case g().C.CompactPage:return"compact_page";case g().C.Mini:return"mini_peek";case g().C.FormEditor:case g().C.FormViewer:case g().C.PropertyModule:return"property_module";default:(0,d().t1)(e)}}function x(e){return{backgroundImage:`linear-gradient(\n\t\tto right,\n\t\t${e.darkDividerColor} 0%,\n\t\t${e.darkDividerColor} 100%\n\t)`,backgroundRepeat:"repeat-x",backgroundPosition:"0 100%",backgroundSize:"100% 1px"}}function C(e){const{store:t,property:o,propertySchema:r}=e,a=null==r?void 0:r.type;if("title"===a)return(0,y().ZP)({store:t,fullyQualified:!1,pageVisitSource:n().tY.LinkInPage});{const e=t.getPropertyValue(o);return i().Hw(a,e)}}function M(e){let t=(0,s().Jcv)(e);if(!t||""===t.trim()||t.trim().includes(" "))return{domain:void 0,restOfUrl:void 0};t=t.trim();let o=u().Qc(t),n=o.host;if(o.protocol&&n||(o=u().Qc(`http://${t}`),n=o.host),!n)return{domain:void 0,restOfUrl:void 0};n&&(n=n.replace(/^www./i,""));const r=t.toLowerCase().indexOf(n.toLowerCase());if(-1===r)return{domain:void 0,restOfUrl:void 0};n=t.slice(r,r+n.length);return{domain:n,restOfUrl:t.slice(r+n.length)}}function k(e){const{numberValue:t,numberFormat:o,numberShowAs:n}=e;if(!(c().i2(t)||p().z4(t)||"bar"!==(null==n?void 0:n.type)&&"ring"!==(null==n?void 0:n.type))){const e=v().Z.getIntl();return"percent"===o?l().uf(t,"percent",e):`${t} / ${n.maxValue}`}}function _(e){const{property:t,collectionStore:o}=e,n=o.isSyncedCollection();return Boolean(n)&&(0,r().w)(t)}function w(e,t){switch(e){case"side_peek":return{icon:h().y,tooltip:v().Z.formatMessage(I.openInSidePeekTooltip),caption:t?"":v().Z.formatMessage(I.openAsPageTitle)};case"center_peek":return{icon:f().Q,tooltip:v().Z.formatMessage(I.openInCenterPeekTooltip),caption:t?"":v().Z.formatMessage(I.openAsPageTitle)};case"full_page":return{icon:m().Z,tooltip:v().Z.formatMessage(I.openAsPageTooltip),caption:t?"":v().Z.formatMessage(I.openAsPageTitle)};default:(0,d().t1)(e)}}const I=(0,o(788860).vU)({openAsPageTitle:{defaultMessage:"Open",id:"database.actionButton.openAsPageTitle"},openAsPageTooltip:{defaultMessage:"Open as page",id:"database.actionButton.openAsPageTooltip"},openInCenterPeekTooltip:{defaultMessage:"Open in center peek",id:"database.actionButton.openInCenterPeekTooltip"},openInSidePeekTooltip:{defaultMessage:"Open in side peek",id:"database.actionButton.openInSidePeekTooltip"}});function P(e){const t=e.getSchema();if(t)for(const[n,r]of Object.entries(t)){var o;if(r&&"text"===r.type&&"summarize"===(null===(o=r.ai_inference)||void 0===o?void 0:o.type)){const t=e.getPropertyValue(n);if(t)return t}}}function T(e){const{store:t,additionalStores:o,collectionContextStore:n}=e,r=t.getAssociatedCollectionStore();return!("collectionTypedView"!==(null==n?void 0:n.contextType)||!r)&&o.some((e=>{var t;return(null===(t=e.getAssociatedCollectionStore())||void 0===t?void 0:t.id)!==r.id}))}function R(e){return e===g().C.FormEditor||e===g().C.FormViewer}function V(e){return Boolean(e&&!a().uk.includes(e.type))}},667247:(e,t,o)=>{o.d(t,{BG:()=>y,Ol:()=>C,SD:()=>S,Sn:()=>b,VN:()=>g,WD:()=>x,Zy:()=>M,nL:()=>v,v6:()=>f});var n=()=>o(714230),r=()=>o(332143),a=()=>o(803021),i=()=>o(646574),l=()=>o(114079),s=()=>o(788860),c=()=>o(513670),d=()=>o(696459),u=()=>o(527278);const p=(0,s().vU)({show_unique:{defaultMessage:"Show unique values",id:"database.aggregationFullName.unique_values"},count:{defaultMessage:"Count all",id:"database.aggregationFullName.count"},count_values:{defaultMessage:"Count values",id:"database.aggregationFullName.count_values"},unique:{defaultMessage:"Count unique values",id:"database.aggregationFullName.unique"},empty:{defaultMessage:"Count empty",id:"database.aggregationFullName.empty"},not_empty:{defaultMessage:"Count not empty",id:"database.aggregationFullName.not_empty"},percent_empty:{defaultMessage:"Percent empty",id:"database.aggregationFullName.percent_empty"},percent_not_empty:{defaultMessage:"Percent not empty",id:"database.aggregationFullName.percent_not_empty"},sum:{defaultMessage:"Sum",id:"database.aggregationFullName.sum"},average:{defaultMessage:"Average",id:"database.aggregationFullName.average"},median:{defaultMessage:"Median",id:"database.aggregationFullName.median"},min:{defaultMessage:"Min",id:"database.aggregationFullName.min"},max:{defaultMessage:"Max",id:"database.aggregationFullName.max"},range:{defaultMessage:"Range",id:"database.aggregationFullName.range"},earliest_date:{defaultMessage:"Earliest date",id:"database.aggregationFullName.earliest_date"},latest_date:{defaultMessage:"Latest date",id:"database.aggregationFullName.latest_date"},date_range:{defaultMessage:"Date range",id:"database.aggregationFullName.date_range"},checked:{defaultMessage:"Checked",id:"database.aggregationFullName.checked"},unchecked:{defaultMessage:"Unchecked",id:"database.aggregationFullName.unchecked"},percent_checked:{defaultMessage:"Percent checked",id:"database.aggregationFullName.percent_checked"},percent_unchecked:{defaultMessage:"Percent unchecked",id:"database.aggregationFullName.percent_unchecked"},count_per_group:{defaultMessage:"Count per group",id:"database.aggregationFullName.count_per_group"},percent_per_group:{defaultMessage:"Percent per group",id:"database.aggregationFullName.percent_per_group"},count_aggregations:{defaultMessage:"Count",id:"database.aggregationBucket.count"},percent_aggregations:{defaultMessage:"Percent",id:"database.aggregationBucket.percent"},statistics_aggregations:{defaultMessage:"More options",id:"database.aggregationBucket.more_options"},date_aggregations:{defaultMessage:"Date",id:"database.aggregationBucket.date"},rollup_aggregations:{defaultMessage:"Rollup",id:"database.aggregationBucket.rollup"}}),g={count:u().Z.formatMessage(p.count),count_values:u().Z.formatMessage(p.count_values),unique:u().Z.formatMessage(p.unique),show_unique:u().Z.formatMessage(p.show_unique),empty:u().Z.formatMessage(p.empty),not_empty:u().Z.formatMessage(p.not_empty),percent_empty:u().Z.formatMessage(p.percent_empty),percent_not_empty:u().Z.formatMessage(p.percent_not_empty),sum:u().Z.formatMessage(p.sum),average:u().Z.formatMessage(p.average),median:u().Z.formatMessage(p.median),min:u().Z.formatMessage(p.min),max:u().Z.formatMessage(p.max),range:u().Z.formatMessage(p.range),earliest_date:u().Z.formatMessage(p.earliest_date),latest_date:u().Z.formatMessage(p.latest_date),date_range:u().Z.formatMessage(p.date_range),checked:u().Z.formatMessage(p.checked),unchecked:u().Z.formatMessage(p.unchecked),percent_checked:u().Z.formatMessage(p.percent_checked),percent_unchecked:u().Z.formatMessage(p.percent_unchecked),count_per_group:u().Z.formatMessage(p.count_per_group),percent_per_group:u().Z.formatMessage(p.percent_per_group)},m=(0,s().vU)({count:{defaultMessage:"Count",id:"database.aggregationShortName.count"},count_values:{defaultMessage:"Values",id:"database.aggregationShortName.count_values"},unique:{defaultMessage:"Unique",id:"database.aggregationShortName.unique"},show_unique:{defaultMessage:"Show unique",id:"database.aggregationShortName.showUnique"},empty:{defaultMessage:"Empty",id:"database.aggregationShortName.empty"},not_empty:{defaultMessage:"Not Empty",id:"database.aggregationShortName.not_empty"},percent_empty:{defaultMessage:"Empty",id:"database.aggregationShortName.percent_empty"},percent_not_empty:{defaultMessage:"Not Empty",id:"database.aggregationShortName.percent_not_empty"},sum:{defaultMessage:"Sum",id:"database.aggregationShortName.sum"},average:{defaultMessage:"Average",id:"database.aggregationShortName.average"},median:{defaultMessage:"Median",id:"database.aggregationShortName.median"},min:{defaultMessage:"Min",id:"database.aggregationShortName.min"},max:{defaultMessage:"Max",id:"database.aggregationShortName.max"},range:{defaultMessage:"Range",id:"database.aggregationShortName.range"},earliest_date:{defaultMessage:"Earliest",id:"database.aggregationShortName.earliest_date"},latest_date:{defaultMessage:"Latest",id:"database.aggregationShortName.latest_date"},date_range:{defaultMessage:"Range",id:"database.aggregationShortName.date_range"},checked:{defaultMessage:"Checked",id:"database.aggregationShortName.checked"},unchecked:{defaultMessage:"Unchecked",id:"database.aggregationShortName.unchecked"},percent_checked:{defaultMessage:"Checked",id:"database.aggregationShortName.percent_checked"},percent_unchecked:{defaultMessage:"Unchecked",id:"database.aggregationShortName.percent_unchecked"},count_per_group:{defaultMessage:"Count",id:"database.aggregationShortName.count_per_group"},percent_per_group:{defaultMessage:"Percent",id:"database.aggregationShortName.percent_per_group"}}),f={count:u().Z.formatMessage(m.count),count_values:u().Z.formatMessage(m.count_values),unique:u().Z.formatMessage(m.unique),show_unique:u().Z.formatMessage(m.show_unique),empty:u().Z.formatMessage(m.empty),not_empty:u().Z.formatMessage(m.not_empty),percent_empty:u().Z.formatMessage(m.percent_empty),percent_not_empty:u().Z.formatMessage(m.percent_not_empty),sum:u().Z.formatMessage(m.sum),average:u().Z.formatMessage(m.average),median:u().Z.formatMessage(m.median),min:u().Z.formatMessage(m.min),max:u().Z.formatMessage(m.max),range:u().Z.formatMessage(m.range),earliest_date:u().Z.formatMessage(m.earliest_date),latest_date:u().Z.formatMessage(m.latest_date),date_range:u().Z.formatMessage(m.date_range),checked:u().Z.formatMessage(m.checked),unchecked:u().Z.formatMessage(m.unchecked),percent_checked:u().Z.formatMessage(m.percent_checked),percent_unchecked:u().Z.formatMessage(m.percent_unchecked),count_per_group:u().Z.formatMessage(m.count_per_group),percent_per_group:u().Z.formatMessage(m.percent_per_group)},h=(0,s().vU)({count:{defaultMessage:"Counts the total number of pages, including blank pages.",id:"database.aggregationDescription.count"},count_values:{defaultMessage:"Counts the number of non-empty values for this property. For a type that can contain multiple values like multi-select or person, this will count the number of selected values for each page.",id:"database.aggregationDescription.count_values"},unique:{defaultMessage:"Counts the number of unique values for this property. For a type that can contain multiple values like multi-select or person, this will count the unique values across all pages.",id:"database.aggregationDescription.unique"},show_unique:{defaultMessage:"Shows the unique values for this property. For a type that can contain multiple values like multi-select or person, this will count the unique values across all pages.",id:"database.aggregationDescription.show_unique"},empty:{defaultMessage:"Counts the number of pages with an empty value for this property.",id:"database.aggregationDescription.empty"},not_empty:{defaultMessage:"Counts the number of pages with a non-empty value for this property.",id:"database.aggregationDescription.not_empty"},percent_empty:{defaultMessage:"Displays the percentage of pages that have an empty value for this property.",id:"database.aggregationDescription.percent_empty"},percent_not_empty:{defaultMessage:"Displays the percentage of pages that have a non-empty value for this property.",id:"database.aggregationDescription.percent_not_empty"},sum:{defaultMessage:"Computes the sum of a numeric property.",id:"database.aggregationDescription.sum"},average:{defaultMessage:"Computes the average of a numeric property.",id:"database.aggregationDescription.average"},median:{defaultMessage:"Finds the median of a numeric property.",id:"database.aggregationDescription.median"},min:{defaultMessage:"Finds the minimum of a numeric property.",id:"database.aggregationDescription.min"},max:{defaultMessage:"Finds the maximum of a numeric property.",id:"database.aggregationDescription.max"},range:{defaultMessage:"Computes the range (maximum - minimum) of a numeric property.",id:"database.aggregationDescription.range"},earliest_date:{defaultMessage:"Finds the earliest date in time of a date property.",id:"database.aggregationDescription.earliest_date"},latest_date:{defaultMessage:"Finds the latest date in time of a date property.",id:"database.aggregationDescription.latest_date"},date_range:{defaultMessage:"Computes the date range (latest date - earliest date) of a date property.",id:"database.aggregationDescription.date_range"},checked:{defaultMessage:"Counts the number of pages with a checked checkbox for this property.",id:"database.aggregationDescription.checked"},unchecked:{defaultMessage:"Counts the number of pages with an unchecked checkbox for this property.",id:"database.aggregationDescription.unchecked"},percent_checked:{defaultMessage:"Displays the percentage of pages that have a checked checkbox for this property.",id:"database.aggregationDescription.percent_checked"},percent_unchecked:{defaultMessage:"Displays the percentage of pages that have an unchecked checkbox for this property.",id:"database.aggregationDescription.percent_unchecked"},count_per_group:{defaultMessage:"Counts the total number of pages that have this Status Group.",id:"database.aggregationDescription.count_per_group"},percent_per_group:{defaultMessage:"Displays the percentage of pages that have this Status Group",id:"database.aggregationDescription.percent_per_group"}}),y={count:u().Z.formatMessage(h.count),count_values:u().Z.formatMessage(h.count_values),unique:u().Z.formatMessage(h.unique),show_unique:u().Z.formatMessage(h.show_unique),empty:u().Z.formatMessage(h.empty),not_empty:u().Z.formatMessage(h.not_empty),percent_empty:u().Z.formatMessage(h.percent_empty),percent_not_empty:u().Z.formatMessage(h.percent_not_empty),sum:u().Z.formatMessage(h.sum),average:u().Z.formatMessage(h.average),median:u().Z.formatMessage(h.median),min:u().Z.formatMessage(h.min),max:u().Z.formatMessage(h.max),range:u().Z.formatMessage(h.range),earliest_date:u().Z.formatMessage(h.earliest_date),latest_date:u().Z.formatMessage(h.latest_date),date_range:u().Z.formatMessage(h.date_range),checked:u().Z.formatMessage(h.checked),unchecked:u().Z.formatMessage(h.unchecked),percent_checked:u().Z.formatMessage(h.percent_checked),percent_unchecked:u().Z.formatMessage(h.percent_unchecked),count_per_group:u().Z.formatMessage(h.count_per_group),percent_per_group:u().Z.formatMessage(h.percent_per_group)},v={count_aggregations:u().Z.formatMessage(p.count_aggregations),percent_aggregations:u().Z.formatMessage(p.percent_aggregations),statistics_aggregations:u().Z.formatMessage(p.statistics_aggregations),date_aggregations:u().Z.formatMessage(p.date_aggregations)},b={count:n().Z.images.aggregations.countPng,count_values:n().Z.images.aggregations.countValuesPng,unique:n().Z.images.aggregations.uniquePng,show_unique:void 0,empty:n().Z.images.aggregations.emptyPng,not_empty:n().Z.images.aggregations.notEmptyPng,percent_empty:n().Z.images.aggregations.percentEmptyPng,percent_not_empty:n().Z.images.aggregations.percentNotEmptyPng,sum:n().Z.images.aggregations.sumPng,average:n().Z.images.aggregations.averagePng,median:n().Z.images.aggregations.medianPng,min:n().Z.images.aggregations.minPng,max:n().Z.images.aggregations.maxPng,range:n().Z.images.aggregations.rangePng,earliest_date:n().Z.images.aggregations.earliestDatePng,latest_date:n().Z.images.aggregations.latestDatePng,date_range:n().Z.images.aggregations.dateRangePng,checked:n().Z.images.aggregations.checkedPng,unchecked:n().Z.images.aggregations.uncheckedPng,percent_checked:n().Z.images.aggregations.percentCheckedPng,percent_unchecked:n().Z.images.aggregations.percentUncheckedPng,count_per_group:n().Z.images.aggregations.countPng,percent_per_group:n().Z.images.aggregations.percentCheckedPng};function S(e,t){switch(e){case"earliest_date":case"show_unique":case"latest_date":case"date_range":return;case"percent_empty":case"percent_not_empty":case"percent_checked":case"percent_unchecked":return"percent";case"count":case"empty":case"not_empty":case"unique":case"count_values":case"checked":case"unchecked":return"number";case"sum":case"average":case"median":case"min":case"max":case"range":return t??"number";default:switch(e.operator){case"count_per_group":return;case"percent_per_group":return"percent";default:(0,d().t1)(e.operator)}}}function x(e,t){switch(e){case"earliest_date":case"show_unique":case"latest_date":case"date_range":case"count":case"empty":case"not_empty":case"unique":case"count_values":case"checked":case"unchecked":return;case"percent_empty":case"percent_not_empty":case"percent_checked":case"percent_unchecked":case"average":return t??"precision_2";case"sum":case"median":case"min":case"max":case"range":return t??void 0;default:switch(e.operator){case"count_per_group":return;case"percent_per_group":return t??"precision_2";default:(0,d().t1)(e.operator)}}}function C(e){const{aggregationType:t,value:o,userTimeZone:n,dateFormat:s,numberPrecision:d}=e;if("date"===o.type){if(!(0,r().Fw)(t))return;if(!o.value)return;return"date_range"===t?(0,i().LU)(o.value,n,u().Z.getIntl()):(0,i().ZV)({value:a().QD(o.value),date_format:s??a().sF,userTimeZone:n,allowRelativeDates:!0,intl:u().Z.getIntl()})}if((0,r().Fw)(t))return;if("show_unique"===t)return;if("object"==typeof o.value)return;if("string"==typeof o.value)return o.value;let p;p=void 0===d||"precision_uncapped"===d?void 0===o.value?void 0:c().NM(o.value,5):o.value;const g=S(t,e.numberFormat);return(0,l().uf)(p,g,u().Z.getIntl(),void 0,d)}function M(e){const{aggregation:t,value:o,numberFormat:n,dateFormat:a,numberPrecision:i}=e,l=C({numberFormat:n,dateFormat:a,aggregationType:t?t.aggregator:"count",userTimeZone:e.userTimeZone,value:o,numberPrecision:i});if(null!=t&&t.enforceMaxAggregationLimit){const e=Number(l);if(e&&e>=r().GW)return r().GW-1+"+"}return l}},185697:(e,t,o)=>{o.d(t,{A:()=>a,K:()=>i});var n=()=>o(142735),r=()=>o(125659);function a(e){let{collectionStore:t,collectionContextStore:o,property:n}=e;return null!=o&&o.isMultiSourceView?t.getMappedProperty(n):n}function i(e){let{collectionStore:t,property:o}=e;const i=(0,r().DK)();return(0,n().VK)((()=>a({collectionStore:t,collectionContextStore:i,property:o})),[t,i,o])}},706363:(e,t,o)=>{o.d(t,{Ct:()=>r,LO:()=>n,iN:()=>a});const n=40,r=48,a=60},363936:(e,t,o)=>{o.d(t,{q:()=>a});var n=()=>o(680146);const r={};function a(e){const{throttleSeconds:t,...o}=e,a=`${e.from}:${e.type}`,i=r[a],l=Date.now();(!i||l-i>1e3*t)&&(r[a]=l,function(e){const{error:t,...o}=e;(0,n().rn)(t,o)}(o))}},761936:(e,t,o)=>{o.d(t,{L:()=>d});var n=()=>o(642240),r=()=>o(338530);const a={ko:()=>o.e(60692).then(o.bind(o,299435)),es:()=>o.e(20883).then(o.bind(o,960142)),de:()=>o.e(83224).then(o.bind(o,299606)),fr:()=>o.e(85038).then(o.bind(o,604240)),pt:()=>o.e(72138).then(o.bind(o,515748)),zh:()=>o.e(17835).then(o.bind(o,240169)),ja:()=>o.e(96377).then(o.bind(o,770488)),da:()=>o.e(57677).then(o.bind(o,317410)),fi:()=>o.e(66970).then(o.bind(o,266265)),nb:()=>o.e(93031).then(o.bind(o,189761)),nl:()=>o.e(62579).then(o.bind(o,360701)),sv:()=>o.e(60382).then(o.bind(o,575660))};let i=!1,l=!1;async function s(e){for(const[o,r]of Object.entries(e.emojiLocaleKeywords)){var t;n().Q4[o]={...n().Q4[o],keywords:[...r,...(null===(t=n().Q4[o])||void 0===t?void 0:t.keywords)||[]]}}await r().Z.waitUntilLoaded(),r().Z.update((t=>{let{emojiByName:o,...n}=t;return{...n,emojiByName:{...o,...e.emojiByName}}}))}async function c(){if(i)return;const[e]=o(146947).locale.split("-");e in a&&(await s(await a[e]()),i=!0)}const d=(0,o(924665).Z)((async()=>{await async function(){l||(await s(await o.e(83552).then(o.bind(o,716373))),l=!0)}(),await c()}))},817606:(e,t,o)=>{o.d(t,{_:()=>i});var n=()=>o(142735),r=()=>o(749826);const a=1*o(326966).hM;function i(){return(0,n().VK)((()=>r().default.getConfigKey("collection_request_settings","clientFormulaTimeoutMs")??a),[])}},535950:(e,t,o)=>{o.d(t,{g:()=>a});var n=()=>o(142735),r=()=>o(958783);function a(e){const{blockId:t,propertyId:o}=e;return(0,n().VK)((()=>r().default.isPropertyWithDraftDiscussion({blockId:t,propertyId:o})),[t,o])}},584461:(e,t,o)=>{o.d(t,{b:()=>r,o:()=>l});var n=()=>o(466970);const r=Symbol("loading"),a=Object.freeze({recomputeSchedule:{type:"debounce",debounceMs:250,maxWaitMs:500,initialValue:r}}),i=Object.freeze({});function l(){return(0,n().E)("experimental_computed_store_defer_debounce")?a:i}},173113:(e,t,o)=>{o.d(t,{a:()=>u});var n=o(667294),r=()=>o(219727),a=()=>o(142735),i=()=>o(226413),l=()=>o(417823),s=()=>o(989478),c=()=>o(876822),d=()=>o(749826);function u(e){const t=function(){const e=(0,r().O7)();return(0,a().VK)((()=>{var t;return(0,l().nS)({experimentService:d().default,actor:{table:s().KJ,id:e.currentUser.id??""},spaceId:(null===(t=c().default.state.currentSpaceStore)||void 0===t?void 0:t.id)??""})}),[e.currentUser])}();return(0,n.useMemo)((()=>{var o;if(!t)return!1;if(!e)return!1;if(!i().p_(e))return!1;return Boolean(null===(o=e.permissions_data)||void 0===o?void 0:o.shared_by_enabled)}),[e,t])}},746822:(e,t,o)=>{o.d(t,{m:()=>n().m});var n=()=>o(471500)},190970:(e,t,o)=>{o.d(t,{T:()=>r});o(667294);var n=o(785893);const r=(0,o(827282).IU)("arrowsUpDown",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M4.11 2.385a.61.61 0 01.48-.211c.191 0 .353.07.486.21L8.03 5.409a.66.66 0 01.2.475c0 .191-.061.347-.182.469a.627.627 0 01-.463.181.59.59 0 01-.451-.187L5.926 5.098l-.72-.844.04 1.219v7.242a.624.624 0 01-.187.469.624.624 0 01-.47.187.636.636 0 01-.468-.187.635.635 0 01-.182-.47V5.474l.041-1.22-.726.845-1.201 1.248a.61.61 0 01-.457.187.627.627 0 01-.463-.181.634.634 0 01-.182-.47.66.66 0 01.2-.474l2.958-3.023zm7.786 10.781a.636.636 0 01-.486.205.665.665 0 01-.486-.205l-2.947-3.035a.64.64 0 01-.206-.475c0-.191.061-.345.182-.463a.634.634 0 01.469-.181c.18 0 .33.06.451.181l1.201 1.248.727.85-.041-1.219V2.824c0-.187.06-.342.181-.463a.636.636 0 01.47-.187.627.627 0 01.65.65v7.248l-.041 1.219.726-.85 1.207-1.248a.6.6 0 01.451-.181c.188 0 .342.06.463.181a.615.615 0 01.182.463.648.648 0 01-.2.475l-2.953 3.035z"})})},799603:(e,t,o)=>{o.d(t,{B:()=>n().B});var n=()=>o(451122)},155350:(e,t,o)=>{o.d(t,{C:()=>n().C});var n=()=>o(135796)},687892:(e,t,o)=>{o.d(t,{R:()=>r});o(667294);var n=o(785893);const r=(0,o(827282).IU)("collectionInbox",{viewBox:"0 0 14 14",svg:(0,n.jsx)("path",{d:"M11.0918,0 C11.5383,0 11.9307,0.295898 12.0533,0.725586 L13.9615,7.40332 C13.9871,7.49316 14,7.58594 14,7.67871 L14,13 C14,13.5527 13.5522,14 13,14 L1,14 C0.447754,14 0,13.5527 0,13 L0,7.67871 C0,7.58594 0.0129395,7.49316 0.0384521,7.40332 L1.94666,0.725586 C2.06934,0.295898 2.46167,0 2.9082,0 L11.0918,0 Z M4.27271,1.5 C3.83728,1.5 3.45178,1.78223 3.31982,2.19727 L1.91455,6.61328 C1.70947,7.25879 2.1908,7.91699 2.86755,7.91699 L4.70837,7.91699 C4.70837,8.93652 5.16663,10.168 7,10.168 C8.83337,10.168 9.29163,8.93652 9.29163,7.91699 L11.1478,7.89355 C11.8201,7.88477 12.2927,7.22852 12.0876,6.58887 L10.681,2.19531 C10.5485,1.78125 10.1635,1.5 9.72864,1.5 L4.27271,1.5 Z"})})},998215:(e,t,o)=>{o.d(t,{Z:()=>r});o(667294);var n=o(785893);const r=(0,o(827282).IU)("openAsPageThick",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M2.16895 7.19629C2.59277 7.19629 2.90723 6.88867 2.90723 6.45801V5.96582L2.75684 3.81934L4.35645 5.50098L6.3252 7.4834C6.46875 7.63379 6.65332 7.70215 6.85156 7.70215C7.30957 7.70215 7.6377 7.39453 7.6377 6.93652C7.6377 6.72461 7.55566 6.54004 7.41211 6.39648L5.43652 4.4209L3.74805 2.82129L5.91504 2.96484H6.44141C6.86523 2.96484 7.18652 2.65723 7.18652 2.22656C7.18652 1.7959 6.87207 1.48145 6.44141 1.48145L2.64746 1.48145C1.86816 1.48145 1.41699 1.93262 1.41699 2.71875L1.41699 6.45801C1.41699 6.88184 1.73828 7.19629 2.16895 7.19629ZM9.55176 14.6543H13.3389C14.125 14.6543 14.5762 14.2031 14.5762 13.417V9.67773C14.5762 9.25391 14.2549 8.93945 13.8242 8.93945C13.4004 8.93945 13.0859 9.24707 13.0859 9.67773V10.1699L13.2295 12.3164L11.6299 10.6348L9.66113 8.65234C9.52441 8.50195 9.33984 8.43359 9.1416 8.43359C8.68359 8.43359 8.35547 8.74121 8.35547 9.19922C8.35547 9.41113 8.43066 9.5957 8.57422 9.73926L10.5566 11.7148L12.2383 13.3145L10.0781 13.1709H9.55176C9.12793 13.1709 8.80664 13.4785 8.80664 13.9092C8.80664 14.3398 9.12109 14.6543 9.55176 14.6543Z"})})},193533:(e,t,o)=>{o.d(t,{v:()=>r});o(667294);var n=o(785893);const r=(0,o(827282).IU)("parentItem",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.29662 5.47368L7.33167 4.11653L6.30839 5.24265L4.22625 7.32458C4.16064 7.39019 4.0821 7.43856 3.99288 7.47024C3.90958 7.5013 3.82192 7.51646 3.73089 7.51646C3.54036 7.51646 3.37427 7.45062 3.24187 7.31823L3.23992 7.31628C3.11249 7.18353 3.04999 7.01804 3.04999 6.82921C3.04999 6.63758 3.12598 6.46746 3.2656 6.32285L3.26711 6.32129L7.4749 2.10083C7.62016 1.9509 7.79567 1.87 7.99651 1.87C8.19734 1.87 8.37284 1.95089 8.51809 2.10079L12.7355 6.32457C12.8705 6.46954 12.943 6.63917 12.943 6.82921C12.943 7.01927 12.8775 7.18502 12.7458 7.31725C12.617 7.45083 12.4522 7.51646 12.2621 7.51646C12.1706 7.51646 12.0814 7.50115 11.995 7.47068L11.9926 7.4698C11.9069 7.43769 11.8313 7.38908 11.7668 7.32458L9.6802 5.238L8.65635 4.11153L8.69652 5.47736L8.69011 9.81896C8.69011 10.5736 8.80303 11.157 9.01808 11.5793C9.2312 11.9935 9.55909 12.2887 10.0079 12.4675L10.0088 12.4678C10.4652 12.6536 11.062 12.7499 11.8051 12.7499C11.952 12.7499 12.0793 12.7478 12.1871 12.7436C12.303 12.7393 12.417 12.7372 12.5287 12.7372C12.7186 12.7372 12.8855 12.7955 13.0191 12.9179C13.1612 13.0441 13.2287 13.2138 13.2287 13.4117C13.2287 13.5394 13.2018 13.6569 13.1388 13.7556C13.0846 13.8467 13.0093 13.919 12.9157 13.9718C12.8317 14.0256 12.7415 14.0631 12.6459 14.0833C12.5373 14.1068 12.4035 14.12 12.2469 14.1243C12.0973 14.1286 11.931 14.1307 11.748 14.1307C10.2678 14.1307 9.14333 13.8104 8.40142 13.144C7.6536 12.4723 7.29657 11.3702 7.29657 9.87609L7.29662 5.47368Z"})})},292735:(e,t,o)=>{o.d(t,{h:()=>r});o(667294);var n=o(785893);const r=(0,o(827282).IU)("replace",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M3.26465 3.96094C2.95996 4.26562 2.979 4.66553 3.23291 4.8877C3.49316 5.12256 3.86133 5.12256 4.16602 4.83057C5.11182 3.80225 6.48291 3.15479 8 3.15479C10.6851 3.15479 12.856 5.12891 13.2051 7.66162H12.2466C11.7642 7.66162 11.6309 8.01709 11.9102 8.41064L13.4209 10.5435C13.6494 10.8608 13.9985 10.8608 14.2334 10.5435L15.7441 8.41699C16.0298 8.02344 15.8965 7.66162 15.4077 7.66162H14.519C14.1445 4.44336 11.3516 1.85986 8 1.85986C6.13379 1.85986 4.43262 2.68506 3.26465 3.96094ZM0.249512 8.42334C-0.0297852 8.81689 0.097168 9.17871 0.585938 9.17871H1.4873C1.85547 12.397 4.64844 14.9805 8 14.9805C9.87256 14.9805 11.5737 14.1553 12.748 12.873C13.0464 12.5684 13.0273 12.1685 12.7734 11.9399C12.5132 11.7051 12.1514 11.7114 11.8403 12.0034C10.9009 13.0381 9.52979 13.6855 8 13.6855C5.32129 13.6855 3.14404 11.7178 2.79492 9.17871H3.74707C4.22949 9.17871 4.36279 8.82324 4.0835 8.42969L2.57275 6.29688C2.34424 5.97949 1.99512 5.97949 1.7666 6.29688L0.249512 8.42334Z"})})},270820:(e,t,o)=>{o.d(t,{R:()=>n().R});var n=()=>o(899548)},175310:(e,t,o)=>{o.d(t,{S:()=>r});o(667294);var n=o(785893);const r=(0,o(827282).IU)("subItem",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.88642 2.43778C1.98215 2.3846 2.09567 2.35999 2.22362 2.35999C2.41846 2.35999 2.58374 2.42299 2.71309 2.55179C2.84789 2.67678 2.91386 2.84079 2.91386 3.03655C2.91386 3.161 2.90926 3.28545 2.90008 3.40989C2.8956 3.52687 2.89335 3.66669 2.89335 3.82952C2.89335 4.6672 2.99989 5.34012 3.20906 5.85192C3.42107 6.35987 3.76386 6.73052 4.23921 6.9683C4.72178 7.20285 5.37665 7.32288 6.20897 7.32288H10.9303L12.4002 7.41264L10.2433 5.44074L8.72396 3.8939C8.66786 3.83269 8.6225 3.76177 8.58753 3.68184L8.58532 3.67681C8.55515 3.59133 8.54022 3.50307 8.54022 3.41252C8.54022 3.22504 8.60443 3.06601 8.73414 2.94147C8.86699 2.81372 9.02934 2.74963 9.21678 2.74963C9.40179 2.74963 9.5677 2.81976 9.71223 2.95431L9.71419 2.95614L14.2523 7.49436C14.4062 7.63869 14.4871 7.81019 14.4871 8.00627C14.4871 8.20241 14.4062 8.37593 14.2528 8.52459L9.72696 13.0436C9.57465 13.191 9.40407 13.2698 9.21678 13.2698C9.03026 13.2698 8.86827 13.2086 8.73525 13.0858L8.73305 13.0838C8.60434 12.9551 8.54022 12.7943 8.54022 12.6069C8.54022 12.5163 8.55535 12.4281 8.58551 12.3426C8.61631 12.2554 8.66304 12.1796 8.72601 12.1166L10.2463 10.5689L12.3938 8.61275L10.9258 8.69663L6.14745 8.69651C4.516 8.69651 3.32454 8.32105 2.59311 7.55211C1.86303 6.77991 1.50604 5.55355 1.50604 3.89104C1.50604 3.68942 1.51062 3.50571 1.51983 3.34C1.52904 3.17413 1.54527 3.03558 1.56915 2.92552C1.58898 2.82668 1.62376 2.73465 1.67362 2.64989C1.72566 2.56142 1.79795 2.48982 1.88642 2.43778Z"})})},563701:(e,t,o)=>{o.d(t,{O:()=>n().O});var n=()=>o(923398)},541402:(e,t,o)=>{o.d(t,{f:()=>n().f});var n=()=>o(836083)},383700:(e,t,o)=>{o.d(t,{X:()=>r});o(667294);var n=o(785893);const r=(0,o(827282).IU)("verificationCheck",{viewBox:"0 0 6 7",svg:(0,n.jsx)("path",{d:"M2.84245 6.11619C2.71116 6.30644 2.53392 6.40156 2.31072 6.40156C2.20131 6.40156 2.10066 6.37881 2.00875 6.33332C1.92123 6.28782 1.83589 6.21545 1.75274 6.11619L0.150985 4.25515C0.0503282 4.12694 0 3.99874 0 3.87053C0 3.73406 0.04814 3.61826 0.14442 3.52314C0.245077 3.42388 0.365427 3.37425 0.50547 3.37425C0.597374 3.37425 0.680525 3.39286 0.754923 3.43008C0.833698 3.46317 0.912473 3.52934 0.991247 3.6286L2.28446 5.21049L5.00875 1.07896C5.13129 0.892857 5.28446 0.799805 5.46827 0.799805C5.60394 0.799805 5.72648 0.841161 5.83589 0.923874C5.9453 1.00659 6 1.11618 6 1.25266C6 1.32297 5.98249 1.39327 5.94748 1.46358C5.91685 1.52975 5.88184 1.59178 5.84245 1.64968L2.84245 6.11619Z"})})},99537:(e,t,o)=>{o.d(t,{ST:()=>h,sW:()=>y});o(821057),o(492176),o(670560),o(7961);var n=()=>o(530980),r=()=>o(308240),a=()=>o(509923),i=()=>o(712185),l=()=>o(215134),s=()=>o(582025),c=()=>o(766537),d=()=>o(639708),u=()=>o(513670),p=()=>o(696459),g=()=>o(269299),m=()=>o(142730),f=()=>o(655260);function h(e){const{moduleId:t,layoutStore:o,sessionId:n,environment:a,position:i}=e,l=o.getModuleById(t);if(!l)throw new Error(`Cannot move module with id ${t} because a module with that id is not in the layout`);const s=(0,f().qe)({modulesByArea:o.getModules(),moduleId:t,newPosition:i});v({...e,module:l,userAction:"BuilderLayoutModules.moveModuleToPosition",afterUpsertTransaction:()=>{var e;(0,f().m_)({environment:a,sessionId:n,collectionId:null===(e=o.getCollectionModel())||void 0===e?void 0:e.id,layoutId:o.id,context:(0,r().AR)(i.area),action:s,moduleType:l.type})}})}function y(e){const{position:t,module:o,layoutStore:n,sessionId:a,environment:i}=e;if(n.getModuleById(o.id))throw new Error(`Cannot add module with id ${o.id} because a module with that id is already in the layout`);v({...e,userAction:"BuilderLayoutModules.addModuleAtPosition",performBeforeApplyUpsertOperations:e=>{const{transaction:r}=e;"page_main"!==t.area&&"page_details"!==t.area||(0,d().f)(o)&&(0,m().iQ)({environment:i,transaction:r,layoutStore:n,property:o.propertyId})},afterUpsertTransaction:()=>{var l;(0,f().Ry)({environment:i,module:o,sessionId:a,collectionId:null===(l=n.getCollectionModel())||void 0===l?void 0:l.id,layoutId:n.id,context:(0,r().AR)(t.area),isPropertyCreation:e.isPropertyCreation,area:t.area})}})}function v(e){const{environment:t,position:o,layoutStore:c,module:d,transaction:u,userAction:m,performBeforeApplyUpsertOperations:f,afterUpsertTransaction:h}=e,y=c.pointer,v=c.getModules(),C=c.getRawModules(),M=C&&(0,l().F3)(C,(e=>e.id===d.id))||(0,i().cm)(d),k="page_main"===o.area||"page_details"===o.area?function(e){const{layoutPointer:t,modulesByArea:o,rawModulesByArea:a}=e,s=(0,l().B1)(o,(e=>"relationsGroup"===e.type));if("views_main_tab_modules"===(null==s?void 0:s.area))throw new Error("[ViewsMain Not Implemented] views_main_tab_modules area not supported for adding and moving modules");if("form_conditional_modules"===(null==s?void 0:s.area))return;const c=a&&(0,l().mT)(a,(e=>"relationsGroup"===e.type));if(!s)return;if(s&&c)return;const d=null==o?void 0:o[null==s?void 0:s.area][null==s?void 0:s.index];if(!d||"relationsGroup"!==d.type)throw new Error("relations group module location in normalized was incorrect, cannot backfill relations group module");return function(e){const{module:t,modulesByArea:o,layoutPointer:a}=e,s=(0,l().B1)(o,(e=>e.id===t.id));if(!s)throw new Error("cannot upsert module at current position because module does not have a current position");const c=(0,r().eJ)(s.area);if("views_main_tab_modules"===s.area||"views_main_tab_modules"===c)throw new Error("[ViewsMain Not Implemented] views_main_tab_modules area not supported for adding and moving modules");if("form_conditional_modules"===s.area||"form_conditional_modules"===c)throw new Error("[Forms Conditional Logic Not Implemented] form_conditional_modules area is not supported for adding and moving modules");const d=o[s.area];if(0===d.length)throw new Error("cannot upsert module at current position in area because that area is empty");const u=(0,i().cm)(t);if(0===s.index)return n().CIp.putModuleAfter({pointer:a,area:c,module:u,afterId:void 0});const p=d.at(s.index+1);if(!p)return n().CIp.putModuleAfter({pointer:a,area:c,module:u,afterId:void 0});return n().CIp.putModuleBefore({pointer:a,area:c,module:u,beforeId:p.id})}({module:d,layoutPointer:t,modulesByArea:o})}({layoutPointer:y,modulesByArea:v,rawModulesByArea:C}):null;k&&g().createAndCommitOrAppend({environment:t,perform:e=>{g().applyOperation({transaction:e,store:c,operation:k})},canUndo:!0,transaction:u,userAction:`${m||"BuilderLayoutModules.upsert"}.preOpBackfill`});const _=[],w=function(e){const{layoutStore:t,module:o,upsertPosition:a}=e,i=t.getModules(),s=(0,l().B1)(i,(e=>o.id===e.id));if(!s)return;if("form_conditional_modules"===s.area){return n().CIp.removeChildModule({pointer:t.pointer,modulesByArea:t.getModules(),module:o})}if("views_main_tab_modules"===s.area){const e="absolute"===a.type&&"views_main_tab_modules"===a.area?a.viewId:void 0,r=s.viewId;if(e===r)return;return[n().CIp.deleteModuleInArea({pointer:t.pointer,area:s.area,moduleId:o.id,viewId:r})]}if("page_main"===s.area||"page_details"===s.area||"form_layout_schema"===s.area){if(s.area===a.area)return;return[n().CIp.deleteModuleInArea({pointer:t.pointer,area:r().mt[s.area],moduleId:o.id})]}(0,p().t1)(s.area)}({upsertPosition:o,module:d,layoutStore:c});w&&_.push(...w);const I=function(e){const{upsertPosition:t,layoutPointer:o,modulesByArea:i,rawModuleToUpsert:c}=e;if("absolute"===t.type)return function(e){const{upsertPosition:t,rawModuleToUpsert:o,layoutPointer:i,modulesByArea:c}=e,d=(0,l().B1)(c,(e=>o.id===e.id)),{area:u}=t;if("form_conditional_modules"===u){const{parentConditionalGroupId:e,parentModuleId:r}=t;if(!(0,s().c)(o,"form_conditional_modules"))throw new Error("Can only add form question or placeholder modules to form_conditional_modules area.");const l=(0,a().s)(r,c);return n().CIp.addChildModule({pointer:i,module:o,parentModule:{area:l.area,module:l.module,conditionalGroupId:e}})}const p=t.index;if(p<0)throw new Error(`Cannot upsert module with id ${o.id} to a negative position`);if("views_main_tab_modules"===u){const e=t.viewId;if(!c[u]||!c[u][e])throw new Error("Cannot upsert module into views_main_tab_modules area that does not have views");const a="views_main_tab_modules"===(null==d?void 0:d.area)&&(null==d?void 0:d.viewId)===e?d.index:void 0,l=b({modulesInArea:c[u][e],indexOfModuleToUpsertInArea:a,indexToUpsertTo:p});if(!l)return;return[n().CIp.putModuleBeforeOrAfter({pointer:i,area:r().mt[u],viewId:e,module:o,direction:l.insertDirection,beforeOrAfterId:l.beforeOrAfterId})]}const g=c[u],m=(null==d?void 0:d.area)===u?d.index:void 0,f=b({modulesInArea:g,indexOfModuleToUpsertInArea:m,indexToUpsertTo:p});if(!f)return;return[n().CIp.putModuleBeforeOrAfter({pointer:i,area:r().mt[u],module:o,direction:f.insertDirection,beforeOrAfterId:f.beforeOrAfterId})]}({upsertPosition:t,rawModuleToUpsert:c,layoutPointer:o,modulesByArea:i});if("module_relative"===t.type)return[S({upsertPosition:t,rawModuleToUpsert:c,layoutPointer:o,modulesByArea:i})];if("area_relative"===t.type)return[x({upsertPosition:t,rawModuleToUpsert:c,layoutPointer:o,modulesByArea:i})];(0,p().t1)(t)}({module:d,upsertPosition:o,modulesByArea:v,layoutPointer:y,rawModuleToUpsert:M});I&&_.push(...I);const P="placeholder"===d.type&&"form_layout_schema"===o.area?`form_layout_new_question_${d.id}`:void 0;g().createAndCommitOrAppend({environment:t,undoCheckpoint:P,canUndo:!0,perform:e=>{f&&f({transaction:e});for(const t of _)g().applyOperation({transaction:e,store:c,operation:t})},transaction:u,userAction:m||"BuilderLayoutModules.upsert"}),h&&h()}function b(e){const{modulesInArea:t,indexOfModuleToUpsertInArea:o,indexToUpsertTo:n}=e;if(0===n||0===t.length)return{insertDirection:"before",beforeOrAfterId:void 0};const r=t.at(n);return r?void 0===o?{insertDirection:"before",beforeOrAfterId:r.id}:o!==n?o<n?{insertDirection:"after",beforeOrAfterId:r.id}:{insertDirection:"before",beforeOrAfterId:r.id}:void 0:{insertDirection:"after",beforeOrAfterId:void 0}}function S(e){const{upsertPosition:t,rawModuleToUpsert:o,layoutPointer:a,modulesByArea:i}=e,{area:s,direction:c,relativeToModuleId:d}=t,u=r().mt[s],p=(0,l().B1)(i,(e=>e.id===d));if(!p||p.area!==s)throw new Error(`Cannot find module with id: ${d} to add upsert relative to in ${s}`);if("views_main_tab_modules"===u){const e="views_main_tab_modules"===p.area?p.viewId:void 0;if(!e)throw new Error("Cannot upsert module into views_main_tab_modules area that does not have views");return n().CIp.putModuleBeforeOrAfter({pointer:a,area:"views_main_tab_modules",viewId:e,module:o,direction:"above"===c?"before":"after",beforeOrAfterId:d})}return n().CIp.putModuleBeforeOrAfter({pointer:a,area:u,module:o,direction:"above"===c?"before":"after",beforeOrAfterId:d})}function x(e){const{upsertPosition:t,rawModuleToUpsert:o,layoutPointer:a,modulesByArea:i}=e,{location:l}=t;if("views_main_tab_modules"===t.area){const e=t.viewId,c={pointer:a,area:r().mt[t.area],viewId:e,module:o};if("start"===l||"end"===l)return n().CIp.putModuleBeforeOrAfter({...c,direction:"start"===l?"before":"after",beforeOrAfterId:void 0});if("end_moveable"===l){var s;const e=C({area:t.area,modulesInArea:(null===(s=i.views_main_tab_modules)||void 0===s?void 0:s[t.viewId])??[]});return n().CIp.putModuleBeforeOrAfter({...c,direction:e.insertDirection,beforeOrAfterId:e.beforeOrAfterId})}(0,p().t1)(l)}const c={pointer:a,area:r().mt[t.area],module:o};if("start"===l||"end"===l)return n().CIp.putModuleBeforeOrAfter({...c,direction:"start"===l?"before":"after",beforeOrAfterId:void 0});if("end_moveable"===l){const e=i[t.area],o=C({area:t.area,modulesInArea:e});return n().CIp.putModuleBeforeOrAfter({...c,direction:o.insertDirection,beforeOrAfterId:o.beforeOrAfterId})}(0,p().t1)(l)}function C(e){const{area:t,modulesInArea:o}=e,{nonMoveableHeaderModules:n,moveableModules:r,nonMoveableFooterModules:a}=(0,c().Lk)(t,o);if(r.length){const e=(0,u().Z$)(r);if(!e)throw new Error("cannot find last moveable module to add below for end moveable");return{insertDirection:"after",beforeOrAfterId:e.id}}if(n.length){const e=(0,u().Z$)(n);if(!e)throw new Error("cannot find last header module to add below for end moveable");return{insertDirection:"after",beforeOrAfterId:e.id}}if(a.length){const e=a.at(0);if(!e)throw new Error("cannot find last header module to add below for end moveable");return{insertDirection:"before",beforeOrAfterId:e.id}}return{insertDirection:"after",beforeOrAfterId:void 0}}},162178:(e,t,o)=>{o.d(t,{Dt:()=>r,J9:()=>a,PP:()=>s,eK:()=>l,oR:()=>i});o(821057);var n=o(667294);const r=(0,n.createContext)(null);function a(){const e=(0,n.useContext)(r);if(!e)throw new Error("usePageLayoutEditorContext must be used inside BaseLayoutEditorContext.Provider");return e}function i(){return(0,n.useContext)(r)}r.displayName="BaseLayoutEditorContext";const l=(0,n.createContext)(null);function s(){const e=(0,n.useContext)(l);if(!e)throw new Error("usePageLayoutEditorContext must be used inside PageLayoutEditorContextProvider");return e}l.displayName="PageLayoutEditorContext"},309797:(e,t,o)=>{o.d(t,{D9:()=>Z,GB:()=>O,L2:()=>j,Nr:()=>V,Qg:()=>F,WJ:()=>N,h9:()=>R,m4:()=>T,mj:()=>A,n1:()=>D,sD:()=>B});var n=()=>o(219727),r=()=>o(657320),a=()=>o(142735),i=()=>o(156642),l=()=>o(109477),s=()=>o(752778),c=()=>o(844085),d=()=>o(707461),u=()=>o(887430),p=()=>o(954452),g=()=>o(201741),m=()=>o(982855),f=()=>o(949842),h=()=>o(148976),y=()=>o(191586),v=()=>o(942226),b=()=>o(466970),S=()=>o(170210),x=()=>o(876822),C=()=>o(845622),M=()=>o(749826),k=()=>o(543842),_=()=>o(346392),w=()=>o(311562),I=()=>o(482162),P=()=>o(365609);function T(e){(0,f().ZP)({event:e,context:f().Af.EditorMouseDown,callback:()=>{}})}function R(e){(0,f().ZP)({event:e,context:f().Af.EditorClick,callback:()=>{}})}function V(e){return(0,a().VK)((()=>Boolean(P().Z.state.pageMap[e.id])||_().Z.state.pages.has(e.id)),[e.id])}function A(e,t){const o=(0,n().O7)(),i=(0,r().l)(),l=V(e),s=(0,a().VK)((()=>{var o,n;return t===w().S.Frame?Boolean(null===(o=x().default.state.currentLoadingContainerStore)||void 0===o?void 0:o.state.ready):t===w().S.PeekView&&I().default.state.open?Boolean(null===(n=I().default.state.loadingContainerStore)||void 0===n?void 0:n.state.ready):t===w().S.CollectionPageView?e.isReady():void 0}),[t,e]),c=F(e);return(0,a().VK)((()=>{if(!s)return!1;const t=o.currentUser.isLoggedIn(),n=i&&i.publicEditModeStore.state;return Boolean(e&&e.isDefined()&&!e.isNonEditableState()&&e.canEdit()&&!e.hasContent()&&t&&(!(null!=n&&n.hasPublicPermission)||"edit"===(null==n?void 0:n.permission))&&!l&&!c&&(!(0,m().GD)(n)||"completionPopup"!==C().default.state.type))}),[o.currentUser,c,s,i,l,e])}function B(e,t){const o=(0,n().O7)(),i=(0,r().l)(),{isTablet:l}=(0,n().Fy)(),s=(0,b().E)("tablet_refresh_template_pills_gate");return(0,a().VK)((()=>{if(t===w().S.SitePreview)return!1;if(o.device.isMobile&&(!l||!s))return!1;if(!o.currentUser.isLoggedIn())return!1;const n=i&&i.publicEditModeStore.state;if(null!=n&&n.hasPublicPermission&&"edit"!==(null==n?void 0:n.permission))return!1;if(e.getContentLength()>1)return!1;if(!e.canEdit()||e.isNonEditableState())return!1;const r=e.getContentStores()[0];if(r&&!r.isEmptyTextBlock())return!1;if(e.getAssociatedCollectionStore())return!1;const a=g().TI.state,c=g().mn.state;if(a&&e.id===c)return!1;return!((0,y().OZ)(t)?d().Pm.state:d().wC.state)}),[o,i,e,t,l,s])}function F(e){return(0,a().VK)((()=>{if(e.isCollectionView()){const t=e.getCollectionViewSourceCollectionStore();return!!t&&t.isSyncedCollection()}return e.isType(i().Ti.externalObjectInstancePage)}),[e])}function j(e){return(0,a().VK)((()=>{if(!(0,h().K6)())return!1;const t=e.getParentStore();if((null==t?void 0:t.table)===s().vF){return!!t.getFormatStore().getKeyStore("external_collection_type").getValue()}return!1}),[e])}function Z(e){return(0,a().VK)((()=>{if(!(0,h().K6)())return!1;var t;return!!e.isCollectionView()&&((null===(t=e.getCollectionStore())||void 0===t?void 0:t.getFormatStore().getKeyStore("external_collection_type").getValue())??!1)}),[e])}function O(e){return(0,a().VK)((()=>{if(!M().default.checkGate({gateName:"csvimport_faster_navigate_to_page_enabled"}))return!1;var t;return!!e.isCollectionView()&&(null===(t=e.getCollectionStore())||void 0===t?void 0:t.getFormatStore().getKeyStore("static_import_collection_type").getValue())===l().gH.CsvImport}),[e])}function D(e){const t=(0,n().O7)(),{device:o,WindowSizeStore:r}=t,i=(0,a().VK)((()=>{const e=r.state.height,n=o.isMobile&&k().Z.state.open?e:0;return c()._4(t)+n}),[t,r,o.isMobile]);return(0,a().VK)((()=>"home-phone"===e?S().jq:o.isTablet?380:o.isIOS?Math.max(350,i):o.isMobile?400:"side-peek"===e||"center-peek"===e?v().KA:"home"===e?S().XX:"30vh"),[o,i,e])}function N(e){const t=(0,n().O7)(),o=(0,a().VK)((()=>(0,p().fg)(t,e)),[t,e]);return(0,a().VK)((()=>o&&!e.isFullWidth()?(0,p().gC)(t,(0,v().wq)(e),(0,u().Ks)(e)):0),[t,o,e])}},231272:(e,t,o)=>{o.d(t,{Gm:()=>s,Uk:()=>i,gM:()=>l,rZ:()=>r});var n=()=>o(551242);const r=160,a=120,i=120;function l(e){let{isMobile:t,stackPropertyLabelAndValue:o,isPropertyInPageDetails:l}=e;if(o||!l)return;const s=a/n().t*100;return t?i:`min(max(${s}%, ${a}px), ${r}px)`}function s(e){let{stackPropertyLabelAndValue:t}=e;return t?{variant:"hug-content"}:{variant:"fixed"}}},206658:(e,t,o)=>{o.d(t,{E:()=>r});var n=()=>o(142735);function r(e){const t=(0,n().VK)((()=>function(e){if(!e)return;const t=null==e?void 0:e.getAssociatedCollectionStore();return null==t?void 0:t.getLayoutStore()}(e)),[e]);return t}},551242:(e,t,o)=>{o.d(t,{D:()=>i,t:()=>a});var n=()=>o(311562),r=()=>o(242921);const a=r().li;function i(e){let{environment:t,layoutArea:o,moduleType:i,pageViewBlockContext:l}=e;return"page_main"===o&&"properties"===i||"properties"===i&&"page_details"===o&&(0,r().GH)({environment:t,isInPeek:l===n().S.PeekView})>=a}},170210:(e,t,o)=>{o.d(t,{$1:()=>C,$K:()=>S,A0:()=>h,A5:()=>f,Ae:()=>P,Cm:()=>u,D9:()=>m,EP:()=>s,Er:()=>M,KI:()=>_,Ng:()=>g,QF:()=>p,Uf:()=>d,XX:()=>a,bS:()=>b,cc:()=>w,d_:()=>c,iO:()=>l,jO:()=>x,jq:()=>i,pW:()=>y});var n=()=>o(513670),r=()=>o(696459);const a=160,i=40,l=24,s=20,c=600,d=270,u=405,p=480,g=500,m=void 0,f=16,h=10,y=8,v=(o(706363).Ct,{backdropFilter:"blur(48px)",WebkitBackdropFilter:"blur(48px)"}),b=4;function S(e){return{icon:e.mediumIconColor,text:e.mediumTextColor}}function x(e){return{width:48,height:48,fill:e.lightIconColor}}function C(e){let{theme:t,isPhone:o}=e;return o?t.personalHomeBackgroundPhone:t.surface.page}function M(e){let{theme:t,isPhone:o,buttonState:n}=e,r=t.whiteButtonBackground;switch(n){case"hovered":r=t.whiteButtonHoveredBackground;break;case"pressed":r=t.whiteButtonPressedBackground}return o&&(r=void 0),{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",background:r,...v,boxShadow:I({isPhone:o,theme:t,borderOnly:!0}),width:28,height:28,borderRadius:4}}const k=1;function _(e){let{isPhone:t,theme:o}=e;return{zIndex:1,position:"relative",display:"flex",flexDirection:"column",borderRadius:12,background:o.home.tile.background,boxShadow:I({isPhone:t,theme:o}),...v}}function w(e){let{mode:t,isPhone:o}=e;switch(t){case"dark":return 0;case"light":return k;default:return(0,r().P)(t),0}}function I(e){let{isPhone:t,theme:o,borderOnly:r}=e;if("dark"===o.mode)return"unset";o.mode;const a=w({mode:o.mode,isPhone:t});return(0,n().oA)([r||t?void 0:"0 12px 32px rgba(0, 0, 0, 0.02)",`0 0 0 ${a}px rgba(0, 0, 0, 0.05)`]).join(", ")}function P(e){const{isPhone:t,theme:o,borderOnly:n}=e;return{unhoveredBoxShadow:I({isPhone:t,theme:o,borderOnly:n}),hoveredBoxShadow:"light"===o.mode?["0 12px 32px rgba(0, 0, 0, 0.03)","0 0 0 1px rgba(0, 0, 0, 0.085)"].join(", "):o.homeShadow.card.hovered}}},973837:(e,t,o)=>{o.d(t,{Z:()=>r});o(267602),o(470928);class n extends(()=>o(442))().Z{findRow(e,t,o){return this.find((n=>n.relatedPageStoreId===e&&n.rowType===t&&n.property===o))}}const r=new n},82548:(e,t,o)=>{o.d(t,{CollectionsAiAutofillProgressStore:()=>r});class n extends(()=>o(263184))().default{getInitialState(){return{type:"uninitialized"}}isWriting(){return"filling"===this.state.type&&!this.state.haveAllBlocksCompletedAutofill&&!this.state.didInterruptStreaming}setIsWriting(e){var t;const{propertySchema:n,stores:r,sessionIdForAnalytics:a}=e,i=r[0].getAssociatedCollectionId()??(null===(t=r[0].getCollectionStore())||void 0===t?void 0:t.id),l=a||o(956057).Il();return this.setState({type:"filling",propertySchema:n,collectionId:i,numBlocksToAutofill:r.length,numBlocksAutofilled:0,sessionId:l,didInterruptStreaming:!1,haveAllBlocksCompletedAutofill:!1}),l}}const r=new n},469203:(e,t,o)=>{o.d(t,{s:()=>d});var n=o(667294),r=()=>o(219727),a=()=>o(846550),i=()=>o(707513),l=()=>o(654133);var s=()=>o(998901),c=o(785893);function d(e){let{children:t,style:o,tooltipStyle:d,placement:u=s().Placement.Bottom}=e;const{isSafari:p}=(0,r().Fy)(),g=(0,n.useRef)(null),m=function(e){const[t,o]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{const{current:t}=e;if(!t)return void o(!1);const n="ResizeObserver"in window?new ResizeObserver((e=>{let[t]=e;o(t.target.scrollWidth>t.target.clientWidth)})):void 0;return null==n||n.observe(t),()=>null==n?void 0:n.unobserve(t)}),[]),t}(g),f=(0,a().yK)((()=>({overflowText:{...i().Yu,...o}})),[o]);return(0,c.jsx)(l().Z,{delayThreshold:500,placement:u,textWrap:!0,style:d,forceVisibleState:!(p||!m)&&void 0,renderTooltip:()=>m?t:void 0,render:e=>(0,c.jsx)("div",{ref:g,style:f.overflowText,...e,children:t})})}},924665:(e,t,o)=>{function n(e){let t,o,n;return async function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return t?(n=a,o||(o=t.then((()=>(o=void 0,t=e(...n),t))),o)):(t=e(...a),t)}}o.d(t,{Z:()=>n})},395833:(e,t,o)=>{function n(e){switch(null==e?void 0:e.type){case"url":case"email":case"phone_number":return e;default:return}}o.d(t,{$:()=>n})},756191:(e,t,o)=>{o.d(t,{FR:()=>m,OY:()=>g,ic:()=>p,sB:()=>u,sG:()=>d,y_:()=>f});o(241792);var n=()=>o(513670),r=()=>o(696459),a=()=>o(834458),i=()=>o(193962),l=()=>o(455222),s=()=>o(177634);function c(e){switch(e){case"checkbox":return"boolean";case"number":return"number";case"text":return"text";case"date":return"date";case"array":return"array";case"block":return"block";case"person":return"person";case"select":return"select";case"function":return"function";case"unknown":return"unknown";case"undefined":return"undefined";default:(0,r().t1)(e)}}function d(e){switch(e.type){case l().$E.InvalidCharacter:return{...i().mr.InvalidCharacter,values:{errorCharacter:e.character}};case l().$E.UnclosedStringLiteral:return i().mr.UnclosedStringLiteral;case l().$E.UnclosedComment:return i().mr.UnclosedComment;case l().$E.TokenExpected:return{...i().mr.TokenExpected,values:{expectedToken:e.token}};case l().$E.StringLiteralContainsToken:return i().mr.StringLiteralContainsToken;case l().$E.ExpressionExpected:return i().mr.ExpressionExpected;case l().$E.PropertyTokenOrFunctionExpected:return i().mr.PropertyTokenOrFunctionExpected;case l().$E.EndOfInputExpected:return i().mr.EndOfInputExpected;case l().$E.UnexpectedError:return i().mr.UnexpectedError;case l().$E.TooDeeplyNested:return i().mr.TooDeeplyNested;default:(0,r().t1)(e)}}function u(e){switch(e.type){case l().h4.FunctionCallArgumentWrongType:case l().h4.FunctionCallUnexpectedArgument:return e.argument;default:return e.node}}function p(e,t){let o;switch(t.type){case l().h4.ThisRowTypeNotFound:o=i().o8.ThisRowTypeNotFound;break;case l().h4.ThisRowNotBlockWithCollection:o=i().o8.ThisRowNotBlockWithCollection;break;case l().h4.MissingPropertyOnThisRow:o={...i().o8.MissingPropertyOnThisRow,values:{propertyName:t.property}};break;case l().h4.MissingContextVariable:{const e=(0,s().Xp)(t.token)?t.token.contextValueId:t.token.valueId;o={...i().o8.MissingContextVariable,values:{valueId:e}}}break;case l().h4.MissingBlock:o={...i().o8.MissingBlock,values:{blockId:t.token.blockId}};break;case l().h4.CallingNotFunction:o={...i().o8.CallingNotFunction,values:{expressionType:c(t.callee.type.type)}};break;case l().h4.FunctionCallTooFewArguments:o={...i().o8.FunctionCallTooFewArguments,values:{minNumParameters:t.minNumParameters,functionName:t.libraryFunction.name,numArguments:t.numArguments}};break;case l().h4.FunctionCallUnexpectedArgument:o={...i().o8.FunctionCallUnexpectedArgument,values:{functionName:t.libraryFunction.name}};break;case l().h4.FunctionCallArgumentWrongType:o={...i().o8.FunctionCallArgumentWrongType,values:{argumentType:c(t.argument.type.type),functionName:t.libraryFunction.name}};break;case l().h4.MemberPropertyMismatchCollection:o={...i().o8.MemberPropertyMismatchCollection,values:{propertyName:t.token.property}};break;case l().h4.MemberPropertyMissing:o={...i().o8.MemberPropertyMissing,values:{propertyName:t.property}};break;case l().h4.MemberPropertyTargetNotBlock:o=i().o8.MemberPropertyTargetNotBlock;break;case l().h4.MemberPropertyTypeInvalid:o={...i().o8.MemberPropertyTypeInvalid,values:{propertyName:t.propertyName,propertyType:t.propertyType}};break;case l().h4.UndefinedIdentifier:o={...i().o8.UndefinedIdentifier,values:{identifier:t.node.text}};break;case l().h4.UnifiedFunctionCannotFindFunction:o={...i().o8.UnifiedFunctionCannotFindFunction,values:{functionName:t.name}};break;case l().h4.UnifiedFunctionNoArguments:o={...i().o8.UnifiedFunctionNoArguments,values:{functionName:t.libraryFunction.name}};break;case l().h4.UnifiedFunctionTargetWrongType:o={...i().o8.UnifiedFunctionTargetWrongType,values:{functionName:t.libraryFunction.name,targetType:c(t.expression.type.type)}};break;case l().h4.CannotRelativelyCompareTypes:o={...i().o8.CannotRelativelyCompareTypes,values:{lhsType:c(t.lhsType.type),rhsType:c(t.rhsType.type)}};break;case l().h4.CannotDoMathOnType:o={...i().o8.CannotDoMathOnType,values:{lhsType:c(t.lhsType.type),rhsType:c(t.rhsType.type)}};break;case l().h4.UnaryMinusOnNonNumber:o={...i().o8.UnaryMinusOnNonNumber,values:{type:c(t.expression.type.type)}};break;case l().h4.IdentifierExpected:o=i().o8.IdentifierExpected;break;case l().h4.FunctionCallExpected:o={...i().o8.FunctionCallExpected,values:{functionName:t.functionName}};break;case l().h4.RenamedIdentifier:o={...i().o8.RenamedIdentifier,values:{identifier:t.identifier,renamedTo:t.renamedTo}};break;case l().h4.RemovedFunction:o={...i().o8.RemovedFunction,values:{functionName:t.functionName,alternative:t.alternative}};break;case l().h4.ContextVariableNotBlockWithCollection:o={...i().o8.ContextVariableNotBlockWithCollection,values:{valueId:t.token.contextValueId}};break;case l().h4.MissingPropertyOnContextVariable:o={...i().o8.MissingPropertyOnContextVariable,values:{propertyName:t.property,valueId:t.token.contextValueId}};break;case l().h4.BlockPropertyTypeInvalid:o={...i().o8.BlockPropertyTypeInvalid,values:{propertyName:t.propertyName}};break;case l().h4.DisallowedReturnType:{const n=t.allowedReturnTypes.map((t=>e.formatMessage((0,a().getHumanReadableType)(t)).toLocaleLowerCase()));o={...i().o8.DisallowedReturnType,values:{allowedReturnType:e.formatList(n,{style:"long",type:"conjunction"}),allowedReturnTypeCount:t.allowedReturnTypes.length,returnType:e.formatMessage((0,a().getHumanReadableType)(t.returnType)).toLocaleLowerCase()}};break}case l().h4.CrossSpacePropertyNotSupported:o={...i().o8.CrossSpacePropertyNotSupported};break;default:(0,r().t1)(t)}return{...o,values:{...o.values,startOffset:t.node.startOffset,endOffset:t.node.endOffset+1}}}function g(e,t){let o;switch(t.type){case l().FY.MissingThisRow:o=i().YG.MissingThisRow;break;case l().FY.MissingSchemaPropertyOnThisRow:o={...i().YG.MissingSchemaPropertyOnThisRow,values:{propertyName:t.property}};break;case l().FY.ThisRowBlockPropertyMismatchCollection:o=i().YG.ThisRowBlockPropertyMismatchCollection;break;case l().FY.MissingContextVariable:o={...i().YG.MissingContextVariable,values:{valueId:t.valueId}};break;case l().FY.IdentifierNotFound:o={...i().YG.IdentifierNotFound,values:{identifier:t.node.text}};break;case l().FY.CannotRelativelyCompareTypes:o={...i().YG.CannotRelativelyCompareTypes,values:{lhsType:c(t.lhsType),rhsType:c(t.rhsType)}};break;case l().FY.CannotDoMathOnType:o={...i().YG.CannotDoMathOnType,values:{valueType:c(t.valueType)}};break;case l().FY.CannotCallNonFunction:o={...i().YG.CannotCallNonFunction,values:{calleeType:c(t.calleeType)}};break;case l().FY.UnifiedFunctionPropertyNotFound:o={...i().YG.UnifiedFunctionPropertyNotFound,values:{functionName:t.node.name}};break;case l().FY.LibraryFunctionExecutionError:const n=t.error instanceof l().Mu?t.error:void 0;o=(null==n?void 0:n.info.type)===l().sj.DateInvalidDurationUnit?{...i().z8.DateInvalidDurationUnit,values:{functionName:t.libraryFunction.name,invalidUnit:n.info.invalidUnit}}:(null==n?void 0:n.info.type)===l().sj.CannotUseToNumberOnList?{...i().z8.CannotUseToNumberOnList}:(null==n?void 0:n.info.type)===l().sj.CannotRoundToNonInteger?{...i().z8.CannotRoundToNonInteger,values:{precision:n.info.precision}}:(null==n?void 0:n.info.type)===l().sj.CannotRoundToTooManyDecimalPlaces?{...i().z8.CannotRoundToTooManyDecimalPlaces,values:{precision:n.info.precision}}:{...i().YG.LibraryFunctionExecutionError,values:{functionName:t.libraryFunction.name}};break;case l().FY.FunctionCallTooFewArguments:o={...i().YG.FunctionCallTooFewArguments,values:{functionName:t.libraryFunction.name}};break;case l().FY.FunctionCallUnexpectedArgument:o={...i().YG.FunctionCallUnexpectedArgument,values:{functionName:t.libraryFunction.name}};break;case l().FY.FunctionCallArgumentWrongType:o={...i().YG.FunctionCallArgumentWrongType,values:{functionName:t.libraryFunction.name,argumentType:c(t.argumentType)}};break;case l().FY.AccessingPropertyOnNonBlock:o=i().YG.AccessingPropertyOnNonBlock;break;case l().FY.MissingDataDependencyBlock:o={...i().YG.MissingDataDependencyBlock,values:{blockId:t.blockPointer.id}};break;case l().FY.MissingDataDependencyPerson:o={...i().YG.MissingDataDependencyPerson,values:{personId:t.personPointer.id}};break;case l().FY.MemberPropertyMismatchCollection:o=i().YG.MemberPropertyMismatchCollection;break;case l().FY.MissingPropertyOnSchemaForMemberProperty:o=i().YG.MissingPropertyOnSchemaForMemberProperty;break;case l().FY.UnaryMinusOnNonNumber:o={...i().YG.UnaryMinusOnNonNumber,values:{expressionType:c(t.expressionType)}};break;case l().FY.UnexpectedRecoveryNode:o=i().YG.UnexpectedRecoveryNode;break;case l().FY.UnexpectedError:o=i().YG.UnexpectedError;break;case l().FY.DepthExceeded:o=i().YG.DepthExceeded;break;case l().FY.CycleDetected:o=i().YG.CycleDetected;break;case l().FY.DownstreamParseFailure:o=i().YG.DownstreamParseFailure;break;case l().FY.MaxEvaluationTimeExceeded:o=i().YG.MaxEvaluationTimeExceeded;break;case l().FY.MissingSchemaPropertyOnCollection:o={...i().YG.MissingSchemaPropertyOnCollection,values:{collectionId:t.collectionId,propertyName:t.property}};break;case l().FY.ContextVariableWrongType:o={...i().YG.ContextVariableWrongType,values:{expectedType:t.expectedType,propertyType:t.resultType,valueId:t.valueId}};break;case l().FY.DisallowedValueType:{const n=t.allowedValueTypes.map((t=>e.formatMessage((0,a().getHumanReadableType)(t)).toLocaleLowerCase()));o={...i().o8.DisallowedReturnType,values:{allowedValueType:e.formatList(n,{style:"long",type:"conjunction"}),allowedValueTypeCount:t.allowedValueTypes.length,valueType:e.formatMessage((0,a().getHumanReadableValueType)(t.expressionValue)).toLocaleLowerCase()}};break}default:(0,r().t1)(t)}return(0,s().w7)(t)?{...o,values:{...o.values,startOffset:t.node.startOffset,endOffset:t.node.endOffset+1}}:o}function m(e){const t=null==e?void 0:e.values;return[n().CE(e,"values"),t]}function f(e){return e.type===l().FY.DepthExceeded||e.type===l().FY.CycleDetected||e.type===l().FY.MaxEvaluationTimeExceeded||e.type===l().FY.LibraryFunctionExecutionError}},451122:(e,t,o)=>{o.d(t,{B:()=>r});o(667294);var n=o(785893);const r=(0,o(827282).IU)("branch",{viewBox:"0 0 64 64",svg:(0,n.jsx)("path",{d:"m56.76,23l-5.96-5.96v8.46c0,5.53-1.97,9.48-6.4,12.8l-5.6,4.2c-2.92,2.19-4,4.35-4,8v5.5h-6v-5.5c0-3.65-1.08-5.81-4-8l-5.6-4.2c-4.43-3.32-6.4-7.27-6.4-12.8v-8.06l-5.56,5.56-4.24-4.24,13-13,13,13-4.24,4.24-5.96-5.96v8.46c0,3.65,1.08,5.81,4,8l5.6,4.2c1.36,1.02,2.49,2.1,3.4,3.27.91-1.17,2.04-2.25,3.4-3.27l5.6-4.2c2.92-2.19,4-4.35,4-8v-8.06l-5.56,5.56-4.24-4.24,13-13,13,13-4.24,4.24Z"})})},899548:(e,t,o)=>{o.d(t,{R:()=>r});o(667294);var n=o(785893);const r=(0,o(827282).IU)("search",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M.281 6.438c0-.875.164-1.696.492-2.461a6.484 6.484 0 011.375-2.032A6.237 6.237 0 016.64.078 6.2 6.2 0 019.11.57c.77.328 1.447.787 2.03 1.375a6.374 6.374 0 011.368 2.032c.333.765.5 1.586.5 2.46 0 .688-.107 1.342-.32 1.961a6.28 6.28 0 01-.868 1.696l3.563 3.578c.11.104.19.226.242.367.057.14.086.29.086.445 0 .22-.05.417-.149.594a1.122 1.122 0 01-1 .57c-.156 0-.307-.028-.453-.086a1.058 1.058 0 01-.382-.25l-3.586-3.585c-.5.333-1.047.596-1.641.789a6.089 6.089 0 01-1.86.28 6.237 6.237 0 01-2.468-.491 6.4 6.4 0 01-2.024-1.367A6.509 6.509 0 01.773 8.913a6.256 6.256 0 01-.492-2.476zm1.664 0c0 .65.12 1.26.36 1.828a4.775 4.775 0 001.015 1.5c.433.427.933.763 1.5 1.007a4.548 4.548 0 001.82.368c.652 0 1.261-.123 1.829-.368a4.747 4.747 0 002.508-2.507 4.567 4.567 0 00.367-1.829c0-.645-.123-1.252-.367-1.82a4.776 4.776 0 00-1.016-1.5A4.578 4.578 0 008.469 2.11a4.567 4.567 0 00-1.828-.367c-.646 0-1.253.123-1.82.367a4.667 4.667 0 00-1.5 1.008c-.433.432-.772.932-1.016 1.5a4.633 4.633 0 00-.36 1.82z"})})},501274:(e,t,o)=>{o.d(t,{mb:()=>l,nK:()=>s,pe:()=>c});var n=()=>o(803021),r=()=>o(646574),a=()=>o(874459),i=()=>o(998411);function l(e){const{dateTime:t,intl:o,shortenDateAndRange:n}=e,i=a().OQ.toPersistedDate(t.valueOf());return r().ZV({value:i,allowRelativeDates:!0,intl:o,shortenDateAndRange:n,displayInUserTimezone:!0})}function s(e){const{dateTime:t,intl:o,userTimeZone:n,displayInUserTimezone:i,alwaysIncludeTimezone:l}=e,s=a().OQ.toPersistedDateTime(t.valueOf(),t.zoneName);return r().ZV({value:s,allowRelativeDates:!0,intl:o,userTimeZone:n,displayInUserTimezone:i,alwaysIncludeTimezone:l})}function c(e){const{luxonRange:t,intl:o}=e,l=a().OQ.toPersistedDateRange(t),s=r().ZV({value:l,allowRelativeDates:!1,shortenDateAndRange:!0,intl:o,displayInUserTimezone:!0}),c=t.end.setZone((0,i().r)()),d=r().mr({start_time:c.toFormat(n().jK),humanReadable:!1,intl:o});return o.formatMessage({id:"verification.timeRange",defaultMessage:"{formattedDateRange} at {formattedEndTime}"},{formattedDateRange:s,formattedEndTime:d})}}}]);