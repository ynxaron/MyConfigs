"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[64331],{491925:(e,t,o)=>{o.d(t,{Ty:()=>s,hW:()=>l,nI:()=>a,vp:()=>d});o(267602),o(653476),o(241792);var r=()=>o(142735),i=()=>o(696459),n=()=>o(469753);const l=(0,o(788860).vU)({unsupportedPublicQuestionType:{defaultMessage:"This question type cannot be used in public forms.",id:"useNewQuestionPropertyMenuItems.invalidPublicQuestionType"},relatedCollectionNotPublic:{defaultMessage:"Only relations to public databases are supported in public forms.",id:"formEditorQuestion.relatedCollectionNotPublic"},editorPlaceholder:{defaultMessage:"Respondent's answer",id:"formEditorQuestion.editorPlaceholder"},viewerEmptyPlaceholder:{defaultMessage:"Your answer",id:"formEditorQuestion.viewerEmptyPlaceholder"}});function a(e){let{layoutStore:t,collectionStore:o}=e;const l=(0,r().VK)((()=>t.getFormQuestionsForFormLayout()??[]),[t]),a=(0,r().VK)((()=>l.map((e=>{var t;return null===(t=e.getConfig())||void 0===t?void 0:t.propertyId})).filter(i().$K)),[l]);return(0,r().VK)((()=>{if(!o)return[];const e=o.getSchema();if(!t.getModel())return[];return(0,i().qP)(e).map((e=>{let[t,o]=e;if(o&&(0,n().I0)(o)&&!a.includes(t))return t})).filter(i().$K)}),[o,t,a])}function s(e){const t=e.type;return["person","relation","multi_select"].includes(t)}function d(e,t){var o;if(!e||!s(e))return;const r=e.type,i=null==t||null===(o=t.getPropertyTypeSpecificConfig(r))||void 0===o?void 0:o.maxSelectionCount;if("multi_select"===e.type)return i;const n=e.limit;return void 0===i?n:void 0===n||i<n?i:n}},789568:(e,t,o)=>{o.d(t,{L:()=>n,S:()=>l});var r=o(667294),i=()=>o(807071);const n=(0,r.createContext)(null);function l(){const e=(0,r.useContext)(n);return e||new(i().Z)}n.displayName="FormBlockContext"},178498:(e,t,o)=>{o.d(t,{Z:()=>l});var r=o(667294),i=o(785893);function n(e,t){return(0,i.jsx)(o(18748).ZP,{...e,ref:t,style:{background:"none",borderBottom:"none",boxShadow:"",marginTop:2,marginBottom:6,paddingTop:4,paddingBottom:4,minHeight:"none",...e.style}})}const l=(0,r.forwardRef)(n)},25315:(e,t,o)=>{o.r(t),o.d(t,{default:()=>ue});var r=o(667294),i=()=>o(709766),n=()=>o(356321),l=(o(821057),()=>o(219727)),a=()=>o(142735),s=()=>o(846550),d=()=>o(955620),c=()=>o(788860),u=()=>o(990966),p=()=>o(269299),m=()=>o(998901),f=()=>o(1910),y=()=>o(291198),h=()=>o(654133),g=o(785893);const v=r.forwardRef((function(e,t){const{disabled:i,formQuestionStore:v,format:b,store:S,property:x,locked:F}=e,C=(0,c().YB)(),w=(0,l().O7)(),_=(0,l().Fy)(),k=(0,o(466970).E)("forms_conditional_logic"),[P,M]=(0,o(644248).C)(),[j,I]=(0,o(397079).V)(),[B,E]=(0,r.useState)(!1),[z,R]=(0,r.useState)(""),[T,V]=(0,r.useState)(!1);if(!v)throw new Error("FormTextProperty: formQuestionStore is required");const L=(0,a().VK)((()=>{var e;const t=null==v||null===(e=v.getPropertyTypeSpecificConfig("checkbox"))||void 0===e?void 0:e.label;return(0,d().QaF)(t)}),[v]),U=(0,a().VK)((()=>(0,o(532850).Ml)(S.getPropertyValue(x))),[S,x]),K=(0,a().VK)((()=>v.isRequired()),[v]);(0,o(732811).K)((()=>{R(L)}));const H=(0,a().VK)((()=>null==v?void 0:v.getParentStore()),[v]),D=(0,a().VK)((()=>{const e=null==H?void 0:H.getModules();if(e&&v)return(0,o(215134).ni)({modulesByArea:e,formQuestionModuleId:v.id})}),[v,H]),A=(0,r.useMemo)((()=>{var e;const t=null==D?void 0:D.questionModule,o=null==t||null===(e=t.conditionalGroups)||void 0===e?void 0:e.length;return k&&T&&!o}),[T,k,D]),Q=(0,r.useCallback)((()=>{V(!0)}),[]),q=(0,r.useCallback)((()=>{V(!1)}),[]);function $(){p().createAndCommit({userAction:"FormCheckboxProperty.handleUpdateLabel",environment:w,canUndo:!0,perform:e=>{if(!v)return;const t=v.getPropertyTypeSpecificConfig("checkbox");o(636340).sW({store:v.getConfigStore().getKeyStore("propertyTypeSpecificConfig").getKeyStore("checkbox"),data:{...t,label:(0,d().TPx)(z)},transaction:e})}})}const O=(0,r.useCallback)((()=>{i||p().createAndCommit({userAction:"FormCheckboxProperty.handleToggleCheckbox",environment:w,canUndo:!0,perform:e=>{o(909240).vO({stores:[S],property:x,transaction:e})}})}),[i,w,x,S]),Z=(0,r.useCallback)((()=>{x&&D&&H&&o(922646).zM({environment:w,layoutStore:H,currentQuestionModule:D.questionModule,area:D.area,property:x,filterValue:{type:"checkbox"}})}),[x,w,D,H]),W=(0,s().yK)((e=>{let t="transparent";return I?t=e.buttonPressedBackground:M&&(t=e.buttonHoveredBackground),{container:{borderRadius:6,wordBreak:"break-word",...b===n().C.FormEditor?{width:"100%",padding:12,paddingBottom:10,cursor:"grab",display:"flex",alignItems:"center"}:{width:_.isMobile?"100%":"calc(100% + 8px)",marginLeft:_.isMobile?void 0:-8,cursor:"pointer",background:_.isMobile?"light"===e.mode?e.accentColors.gray[30]:e.accentColors.gray[100]:t,padding:"6px 8px",height:""===z?34:void 0}},detailedSelector:{border:"none",padding:0,height:24},checkboxLabel:{userSelect:"none"}}}),[_.isMobile,b,M,I,z]);return(0,o(337897).xE)(b)?(0,g.jsxs)("div",{onMouseMove:Q,onMouseLeave:q,ref:e=>{P(e),j(e)},style:W.container,onClick:()=>{o(127519).default.isEditingFormQuestion()&&u().clear({environment:w,preventDismissMobileKeyboard:!0})},children:[(0,g.jsx)(o(192106).n,{name:`form-question-${null==v?void 0:v.id}`,required:K,isDisabled:i,selectorSize:"large",style:W.detailedSelector,isSelected:U,label:b===n().C.FormEditor?null:z,value:"checkbox",onChange:O,"aria-describedby":`form-question-title-${null==v?void 0:v.id} form-description-${null==v?void 0:v.id}`}),b===n().C.FormEditor?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(o(206352).Z,{debugName:"FormCheckboxProperty Input",capture:B,allowMenuList:!0,allowEsc:!0,allowCopyPaste:!0,allowUndo:!0,children:(0,g.jsx)(y().Z,{value:z,focus:B,style:{width:"100%",...b===n().C.FormEditor?{}:{pointerEvents:"none"}},format:y().B.Transparent,disabled:F,textarea:!0,autosize:!0,placeholder:b===n().C.FormEditor&&""===z?C.formatMessage({id:"formCheckboxProperty.placeholderText",defaultMessage:"Checkbox label (optional)"}):"",inputStyle:{width:"100%",opacity:_.isMobile?1:void 0},onMouseDown:e=>e.stopPropagation(),onChange:e=>{R(e.target.value)},onClick:()=>{E(!0)},onBlur:$,onSubmit:$})}),A&&(0,g.jsx)(h().Z,{placement:m().Placement.Top,renderTooltip:()=>(0,g.jsx)(c()._H,{defaultMessage:"Add conditional logic",id:"FormMultiSelectProperty.ConditionalLogicIcon.title"}),render:e=>(0,g.jsx)(f().Z,{style:{width:20,height:20,flexGrow:0,transform:"rotate(90deg)"},onClick:Z,icon:o(799603).B,ariaLabel:C.formatMessage({defaultMessage:"Add conditional logic",id:"FormMultiSelectProperty.ConditionalLogicIcon.title"}),...e})})]}):null]}):null}));var b=()=>o(491925),S=()=>o(789568),x=()=>o(648275),F=()=>o(425803),C=()=>o(96778);const w=(0,r.forwardRef)((function(e,t){const i=(0,o(201608).Am)(e),{property:d,store:u,formQuestionStore:p,disabled:m,format:f}=e;if(!p)throw new Error("FormDateProperty: formQuestionStore is required");const{propertySchema:y,baseStyles:h,isEmpty:v}=(0,r.useContext)(C().OU),w=(0,l().O7)(),_=(0,S().S)(),k=(0,a().VK)((()=>{var e;return null===(e=_.getFormState())||void 0===e?void 0:e.collectionSchema}),[_]),P=y,M=(0,o(532212).Vj)(u,null==P?void 0:P.type,d,w.currentUser.id),j=null==P?void 0:P.date_format,I=null==P?void 0:P.time_format,B=(0,s().yK)((e=>({buttonStyle:{...h.buttonStyle,borderRadius:6,marginTop:8,...f===n().C.FormEditor?{cursor:"grab",color:e.text.quaternary,boxShadow:`0 0 0 1px ${e.stroke.secondary} inset`}:{cursor:"pointer",color:v?e.text.tertiary:e.text.primary}},hoveredStyle:h.buttonHoveredStyle??{},pressedStyle:h.buttonPressedStyle??{},chevronIcon:{width:20,fill:e.icon.tertiary,marginRight:-4,...f===n().C.FormEditor?{fill:e.icon.quaternary}:{}}})),[h.buttonHoveredStyle,h.buttonPressedStyle,h.buttonStyle,f,v]),E=m?(0,g.jsx)(c()._H,{...b().hW.editorPlaceholder}):(0,g.jsx)(c()._H,{...b().hW.viewerEmptyPlaceholder});return(0,g.jsx)(F().e,{ref:t,editButtonClickProps:m?void 0:i,style:B.buttonStyle,hoveredStyle:B.hoveredStyle,pressedStyle:B.pressedStyle,formQuestionStore:p,collectionSchema:k,children:(0,g.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[v?E:(0,g.jsx)(o(281875).z,{dateValue:M,dateFormat:j,timeFormat:I,store:u,property:d}),(0,x().U)(B.chevronIcon)]})})}));o(267602),o(916054),o(653476),o(241792);var _=()=>o(665472),k=()=>o(661727),P=()=>o(568017),M=()=>o(513670),j=()=>o(696459),I=()=>o(102182),B=()=>o(109757),E=()=>o(949842),z=()=>o(827282);const R=(0,z().IU)("collectionFormAudioFile",{viewBox:"0 0 24 24",svg:(0,g.jsx)("g",{children:(0,g.jsx)("path",{d:"M3.572 14.635a.827.827 0 01-.605-.254.877.877 0 01-.244-.615v-3.623c0-.235.081-.44.244-.616a.812.812 0 01.605-.263c.248 0 .456.088.625.263a.86.86 0 01.254.616v3.623a.86.86 0 01-.254.615.85.85 0 01-.625.254zm3.37 3.935a.838.838 0 01-.616-.254.855.855 0 01-.244-.615V6.207c0-.24.081-.446.244-.615a.823.823 0 01.615-.264c.248 0 .453.088.616.264a.84.84 0 01.254.615v11.494a.838.838 0 01-.254.615.817.817 0 01-.616.254zm3.359 3.79a.806.806 0 01-.606-.255.834.834 0 01-.244-.615V2.418a.87.87 0 01.244-.625.806.806 0 01.606-.254.85.85 0 01.625.254.85.85 0 01.254.625V21.49a.818.818 0 01-.254.616.85.85 0 01-.625.253zm3.369-5.06a.855.855 0 01-.615-.243.855.855 0 01-.245-.616V7.467c0-.241.082-.446.245-.615a.838.838 0 01.615-.254c.24 0 .446.084.615.254.17.169.254.374.254.615v8.974a.842.842 0 01-.254.616.855.855 0 01-.615.244zm3.37 2.91a.85.85 0 01-.87-.868V4.566c0-.24.081-.446.244-.615a.833.833 0 01.625-.264.79.79 0 01.605.264c.17.17.254.375.254.615v14.776c0 .24-.084.446-.253.615a.806.806 0 01-.606.254zm3.358-4.814a.818.818 0 01-.615-.253.843.843 0 01-.244-.606V9.371c0-.234.081-.436.244-.605a.803.803 0 01.615-.264c.241 0 .446.088.616.264.169.169.254.37.254.605v5.166a.827.827 0 01-.254.606.838.838 0 01-.616.253z"})})}),T=(0,z().IU)("collectionFormDefaultFile",{viewBox:"0 0 24 24",svg:(0,g.jsx)("g",{children:(0,g.jsx)("path",{d:"M6.795 22.525c-1.048 0-1.84-.27-2.373-.81-.534-.54-.8-1.338-.8-2.393V4.586c0-1.048.266-1.843.8-2.383.534-.547 1.325-.82 2.373-.82h4.707c.41 0 .768.03 1.074.088.306.052.59.153.85.302.26.144.527.355.8.635l5.118 5.205c.286.287.501.563.644.83.15.26.25.55.303.87.052.312.078.696.078 1.152v8.857c0 1.048-.267 1.843-.8 2.383-.534.547-1.325.82-2.374.82h-10.4zm.156-1.923H17.04c.475 0 .83-.12 1.064-.362.235-.24.352-.586.352-1.035V10.73h-5.264c-.696 0-1.217-.173-1.562-.518-.339-.345-.508-.866-.508-1.563V3.297h-4.16c-.475 0-.83.124-1.065.371-.234.247-.351.596-.351 1.045v14.492c0 .45.117.794.351 1.035.235.241.586.362 1.055.362zm6.426-11.563h4.814l-5.38-5.478v4.902c0 .202.042.348.127.44.09.09.237.136.439.136z"})})}),V=(0,z().IU)("collectionFormImageFile",{viewBox:"0 0 24 24",svg:(0,g.jsx)("g",{children:(0,g.jsx)("path",{d:"M20.965 16.597c.033.803-.155 1.414-.565 1.835-.41.42-1.032.63-1.867.63H5.085c-.691 0-1.214-.196-1.568-.589-.355-.393-.543-.974-.565-1.743l3.13-2.806a1.77 1.77 0 01.514-.348 1.372 1.372 0 011.13.008c.193.078.375.194.547.349l1.536 1.386 3.743-3.354c.194-.166.393-.29.598-.373a1.707 1.707 0 011.295.008c.216.083.415.21.598.382l4.922 4.615zM8.597 12.165c-.366 0-.7-.089-1.005-.266a2.052 2.052 0 01-.722-.722 1.961 1.961 0 01-.266-1.005c0-.36.089-.691.266-.996.183-.304.423-.545.722-.722.305-.183.64-.274 1.005-.274.365 0 .697.091.996.274.299.177.537.418.714.722a1.9 1.9 0 01.274.996c0 .366-.092.7-.274 1.005a1.985 1.985 0 01-.714.722 1.919 1.919 0 01-.996.266zm-3.71 7.595c-.897 0-1.575-.227-2.034-.68-.46-.455-.69-1.124-.69-2.01V6.96c0-.885.23-1.555.69-2.009.459-.46 1.137-.689 2.033-.689h14.211c.902 0 1.583.23 2.042.69.46.453.69 1.123.69 2.008v10.11c0 .886-.23 1.555-.69 2.01-.46.453-1.14.68-2.042.68H4.887zm.099-1.627h14.02c.382 0 .675-.1.88-.299.204-.205.307-.506.307-.905V7.101c0-.398-.103-.697-.307-.896-.205-.205-.498-.308-.88-.308H4.986c-.388 0-.684.103-.888.308-.2.199-.3.498-.3.896v9.828c0 .399.1.7.3.905.204.2.5.299.888.299z"})})}),L=(0,z().IU)("collectionFormPdfFile",{viewBox:"0 0 24 24",svg:(0,g.jsx)("g",{children:(0,g.jsx)("path",{d:"M7.762 10.777a.55.55 0 01-.39-.136.528.528 0 01-.147-.391c0-.091.022-.205.068-.342l1.338-3.73c.15-.443.426-.664.83-.664.423 0 .71.221.86.664l1.337 3.73c.04.143.059.257.059.342a.55.55 0 01-.137.39c-.091.092-.225.137-.4.137-.274 0-.456-.166-.547-.498l-.303-.85H8.602l-.284.85c-.084.332-.27.498-.556.498zM8.826 8.59h1.29L9.5 6.637h-.059L8.826 8.59zm4.57-1.387a.642.642 0 01-.459-.176.63.63 0 01-.175-.449c0-.176.058-.322.175-.44a.642.642 0 01.46-.175h2.744c.182 0 .332.058.449.176a.596.596 0 01.176.44.63.63 0 01-.176.448.608.608 0 01-.45.176h-2.744zm0 3.272a.642.642 0 01-.459-.176.63.63 0 01-.175-.45c0-.175.058-.322.175-.439a.642.642 0 01.46-.176h2.744c.182 0 .332.059.449.176a.596.596 0 01.176.44.63.63 0 01-.176.449.608.608 0 01-.45.176h-2.744zm-6.19 7.793v-4.58c0-.417.11-.73.331-.938.228-.215.544-.322.947-.322h7.041c.847 0 1.27.42 1.27 1.26v4.482h-.684l-1.865-2.149a.725.725 0 00-.303-.214 1.05 1.05 0 00-.351-.059c-.222 0-.436.091-.645.274l-1.933 1.709-.772-.704a.85.85 0 00-.576-.234.771.771 0 00-.547.234l-1.23 1.24h-.684zm3.114-2.247c.274 0 .511-.1.713-.302a.976.976 0 00.303-.713.934.934 0 00-.303-.713 1.029 1.029 0 00-.713-.303.922.922 0 00-.722.283 1.015 1.015 0 00-.293.733c0 .273.097.51.293.713a.987.987 0 00.722.303zm-6.699 3.301V4.586c0-1.048.267-1.843.8-2.383.535-.547 1.326-.82 2.374-.82h10.4c1.049 0 1.84.273 2.373.82.534.54.801 1.335.801 2.383v14.736c0 1.055-.267 1.852-.8 2.393-.534.54-1.325.81-2.374.81h-10.4c-1.048 0-1.84-.27-2.373-.81-.534-.54-.8-1.338-.8-2.393zm1.924-.117c0 .45.117.794.351 1.035.235.241.59.362 1.065.362h10.078c.475 0 .83-.12 1.064-.362.235-.24.352-.586.352-1.035V4.713c0-.456-.117-.804-.351-1.045-.235-.247-.59-.371-1.065-.371H6.961c-.475 0-.83.124-1.065.371-.234.24-.351.59-.351 1.045v14.492z"})})}),U=(0,z().IU)("collectionFormSheetFile",{viewBox:"0 0 24 24",svg:(0,g.jsx)("g",{children:(0,g.jsx)("path",{d:"M2.778 10.488v-1.56h18.51v1.56H2.779zm0 4.615v-1.56h18.51v1.56H2.779zm8.425 3.993V4.935h1.594v14.16h-1.594zm-6.317.664c-.896 0-1.574-.227-2.033-.68-.46-.455-.69-1.124-.69-2.01V6.96c0-.885.23-1.555.69-2.009.459-.46 1.137-.689 2.033-.689h14.211c.902 0 1.583.23 2.042.69.46.453.69 1.123.69 2.008v10.11c0 .886-.23 1.555-.69 2.01-.46.453-1.14.68-2.042.68H4.887zm.1-1.627h14.02c.382 0 .675-.1.88-.299.204-.205.307-.506.307-.905V7.101c0-.398-.103-.697-.307-.896-.205-.205-.498-.308-.88-.308H4.986c-.388 0-.684.103-.888.308-.2.199-.3.498-.3.896v9.828c0 .399.1.7.3.905.204.2.5.299.888.299z"})})}),K=(0,z().IU)("collectionFormSlidesFile",{viewBox:"0 0 24 24",svg:(0,g.jsx)("g",{children:(0,g.jsx)("path",{d:"M5.949 21.403c-.897 0-1.575-.227-2.034-.68-.46-.454-.689-1.127-.689-2.017v-8.534c0-.89.23-1.563.689-2.017.46-.453 1.137-.68 2.034-.68h12.094c.896 0 1.574.23 2.034.689.464.453.697 1.123.697 2.008v8.534c0 .885-.233 1.555-.697 2.008-.46.46-1.138.69-2.034.69H5.949zm.1-1.627h11.894c.382 0 .675-.102.88-.307.21-.199.316-.5.316-.905v-8.25c0-.404-.105-.706-.316-.905-.204-.205-.498-.307-.88-.307H6.048c-.387 0-.683.102-.888.307-.2.199-.299.5-.299.904v8.251c0 .404.1.706.3.905.204.205.5.307.887.307zM5.051 6.122c.061-.393.197-.698.407-.913.216-.216.545-.324.988-.324h11.106c.443 0 .77.108.98.324.215.215.354.52.415.913H5.052zm1.694-2.4c.022-.37.14-.65.357-.838.22-.193.53-.29.93-.29h7.935c.398 0 .705.097.921.29.216.188.34.468.374.839H6.746z"})})}),H=(0,z().IU)("collectionFormVideoFile",{viewBox:"0 0 24 24",svg:(0,g.jsx)("g",{children:(0,g.jsx)("path",{d:"M4.886 19.76c-.896 0-1.574-.227-2.033-.68-.46-.455-.69-1.124-.69-2.01V6.96c0-.885.23-1.555.69-2.009.459-.46 1.137-.689 2.033-.689h14.211c.902 0 1.583.23 2.042.69.46.453.69 1.123.69 2.008v10.11c0 .886-.23 1.555-.69 2.01-.46.453-1.14.68-2.042.68H4.887zm.1-1.627h14.02c.382 0 .675-.1.88-.299.204-.205.307-.506.307-.905V7.101c0-.398-.103-.697-.307-.896-.205-.205-.498-.308-.88-.308H4.986c-.388 0-.684.103-.888.308-.2.199-.3.498-.3.896v9.828c0 .399.1.7.3.905.204.2.5.299.888.299zm5.553-2.872a.759.759 0 01-.448.116.62.62 0 01-.365-.166c-.1-.1-.15-.23-.15-.39V9.2a.5.5 0 01.15-.382.59.59 0 01.373-.157.692.692 0 01.44.1l4.615 2.73a.566.566 0 01.266.324.64.64 0 010 .407.558.558 0 01-.266.323l-4.615 2.715z"})})});const D=(0,c().vU)({deleteFileButtonAriaLabel:{id:"FormFileProperty.deleteFileButtonAriaLabel",defaultMessage:"Delete file"},fileTypeNotSupported:{id:"FormFileProperty.fileTypeNotSupported",defaultMessage:"Sorry, this file type is not supported."}}),A=(0,r.forwardRef)((function(e,t){const{store:i,property:n}=e,d=(0,r.useRef)(null),u=(0,l().O7)(),p=(0,S().S)(),{filePropertyIdToFormFiles:m,formBlockStore:f}=(0,a().VK)((()=>{const e=p.getFormState();return{filePropertyIdToFormFiles:null==e?void 0:e.filePropertyIdToFormFiles,formBlockStore:null==e?void 0:e.formBlockStore}}),[p]),y=(0,a().VK)((()=>{var e;return(null===(e=p.getFormState())||void 0===e?void 0:e.maxFileSizeMb)??_().bc}),[p]),h=(0,s().yK)((e=>({formFileContainer:{marginTop:12,marginBotton:18}})),[]),v=(0,r.useCallback)((e=>{p.updateFilePropertyIdToFormFiles(n,(t=>[e,...t]))}),[p,n]),b=(0,r.useCallback)((e=>{p.updateFilePropertyIdToFormFiles(n,(t=>t.filter((t=>t.globalFileUploadStoreKey!==e))))}),[p,n]),x=(0,o(13023).lF)({blockStore:i,propertyId:n,environment:u,onSingleFileStartCallback:e=>{v(e)},onSingleFileErrorCallback:e=>{b(e),I().oV({label:(0,g.jsx)(c()._H,{id:"FormFileProperty.fileUpload.uploadFailed",defaultMessage:"File upload failed."})})},formMetadata:{spaceId:null==f?void 0:f.getSpaceId(),formId:null==f?void 0:f.id}}),F=e=>{const t=B().rX(e,y);if(!t.canUpload)switch(t.reason){case"fileSizeTooLarge":I().oV({label:(0,g.jsx)(c()._H,{id:"FormFileProperty.invalidFileUpload.fileSizeTooLargeErrorMessage",defaultMessage:"Sorry, this file is too large."})});break;case"fileSizeIsZero":I().oV({label:(0,g.jsx)(c()._H,{id:"FormFileProperty.invalidFileUpload.fileSizeIsZeroErrorMessage",defaultMessage:"Sorry, that file is invalid."})});break;case"fileExtensionNotAllowed":I().oV({label:(0,g.jsx)(c()._H,{...D.fileTypeNotSupported})});break;default:(0,j().P)(t.reason)}return t.canUpload};return f?(0,g.jsx)(q,{...e,uploadButtonRef:d,uploadButtonOnClick:async()=>{const e=await B().y({multiple:!0});e.length&&(e=>{const t=((null==m?void 0:m[n])??[]).length;return!(e.numNewFiles+t>_().ux&&(I().oV({label:(0,g.jsx)(c()._H,{id:"FormFileProperty.fileUpload.maxFilesPerQuestionLimitReached",defaultMessage:"The maximum number of files for this question has been reached."})}),1))})({numNewFiles:e.length})&&e.every(F)&&x(e),d.current&&d.current.focus()},onDropFile:e=>{if("invalidFileDrop"===e.type)return I().oV({label:(0,g.jsx)(c()._H,{...D.fileTypeNotSupported})}),null;F(e.file)&&x([e.file])},numAdditionalFilesDroppable:_().ux-((null==m?void 0:m[n])??[]).length,maxFileSizeMb:y,children:(0,g.jsx)("div",{style:h.formFileContainer,children:(null==m?void 0:m[n])&&(null==m?void 0:m[n].map(((e,t)=>{return(0,g.jsx)(Z,{formFile:e,deleteFile:(o=t,()=>{p.updateFilePropertyIdToFormFiles(n,(e=>{const t=e??[];if(o<0||o>=t.length)return t;const r=[...t];return r.splice(o,1),r}))})},t);var o})))})}):(0,g.jsx)(g.Fragment,{})})),Q=(0,r.forwardRef)((function(e,t){const{store:r}=e,i=(0,l().O7)(),n=i.currentUser.id,s=null==r?void 0:r.getSpaceId(),d=(0,o(815277).oo)({name:"form_filesize",spaceId:s,userId:n,amount:"unknown"}),c=void 0===d||"unlimited"===d.limit.amount?_().bc:d.limit.amount,u=(0,a().VK)((()=>!i.device.isMobileNative||(0,o(814139).S$)({environment:i})),[i]),p=(0,a().VK)((()=>(0,o(345918).Fn)(i)&&u?null==d?void 0:d.upsell:void 0),[i,u,d]);return(0,g.jsx)(q,{...e,uploadButtonOnClick:()=>{throw new Error("FormFilePropertyEditor does not support uploading files.")},onDropFile:()=>{throw new Error("FormFilePropertyEditor does not support uploading files.")},numAdditionalFilesDroppable:0,maxFileSizeMb:c,upsell:p})})),q=(0,r.forwardRef)((function(e,t){const{property:r,disabled:i,uploadButtonOnClick:a,uploadButtonRef:d,onDropFile:u,numAdditionalFilesDroppable:p,maxFileSizeMb:m,upsell:f,format:y,store:h,formQuestionStore:v}=e,{isMobile:b}=(0,l().Fy)(),S=(0,l().O7)(),x=(0,s().yK)((e=>{const t=i?"transparent":"light"===e.mode?e.accentColors.gray[30]:e.accentColors.translucentGray[100];return{dropzone:{borderRadius:12,background:(0,P().fn)([P().ZP.blueWithAlpha(.14),(0,k().Fq)(e.contentBackground,.5)])},container:{display:"flex",flexDirection:b?"column":"row",marginTop:i?0:8,alignItems:"center",borderRadius:12,padding:b?"8px 8px 0px 8px":"8px",background:t},uploadButton:{borderRadius:6,borderColor:e.outlineButtonBorder,height:36,padding:12,fontSize:16,background:e.whiteButtonBackground,width:b?"100%":"auto",cursor:y===n().C.FormEditor?"grab":"pointer"},uploadButtonHovered:{borderRadius:6,borderColor:"dark"===e.mode?(0,k().Fq)(P().se.light.lightgray,.3):(0,k().Fq)(P().se.light.darkgray,.3),height:36,padding:12,fontSize:16,backgroundColor:e.whiteButtonBackground},uploadButtonPressed:{backgroundColor:e.outlineButtonHoveredBackground},uploadButtonIcon:{width:16,height:16},formFileContainer:{marginTop:12,marginBotton:18}}}),[b,i,y]);return(0,g.jsxs)(o(433989).Q,{type:o(733193).jo,dropTargetKey:`formFileDropTarget-${r}-${i}`,onDropFile:u,dropzoneStyle:x.dropzone,supportMultipleFiles:!0,numFilesLimit:p,store:h,children:[(0,g.jsxs)("div",{style:x.container,children:[(0,g.jsx)(o(661297).Z,{style:x.uploadButton,hoveredStyle:x.uploadButtonHovered,pressedStyle:x.uploadButtonPressed,icon:o(397643).R,iconStyle:x.uploadButtonIcon,disabled:i,disabledFeedback:!0,onClick:a,ref:d,"aria-describedby":`form-question-${null==v?void 0:v.id} form-description-${null==v?void 0:v.id} form-file-restrictions-${null==v?void 0:v.id}`,children:(0,g.jsx)(c()._H,{id:"FormFileProperty.uploadButton",defaultMessage:"Upload"})}),(0,g.jsx)(O,{formQuestionStore:v,maxFileSizeMb:m,isMobile:b,disabled:i}),(0,g.jsx)($,{upsell:f,environment:S})]}),e.children]})}));function $(e){const{upsell:t,environment:r}=e,i=(0,s().yK)((e=>({upsellButton:{display:"flex",alignItems:"center",fontSize:14,fontWeight:o(707513).Ue.medium,color:e.blueColor,padding:"4px 8px",borderRadius:6,marginBottom:2,marginTop:-1},upsellIcon:{width:14,height:14,marginRight:4},upsellButtonText:{marginTop:-1}})),[]);return t?(0,g.jsx)(h().Z,{delayThreshold:120,placement:m().Placement.Top,renderTooltip:()=>{if("product"===t.type)return(0,g.jsx)("div",{style:{maxWidth:500},children:(0,g.jsx)(c()._H,{id:"FormFileProperty.increaseLimit.tooltip",defaultMessage:"Upgrade to increase the file size limit to {fileSizeLimitMB} MB.",values:{fileSizeLimitMB:t.limit.amount}})})},disableTooltip:"product"!==t.type,originGap:6,render:e=>(0,g.jsxs)(o(154186).Z,{...e,style:i.upsellButton,onMouseDown:e=>{(0,E().ZP)({event:e,context:E().Af.EditorMouseDown,callback:M().yR})},onClick:e=>{(0,o(965014).y)(r,{from:"forms_increase_file_limit",upsell:t})},children:[(0,o(960304).l)(i.upsellIcon),(0,g.jsx)("div",{style:i.upsellButtonText,children:(0,g.jsx)(c()._H,{id:"FormFileProperty.increaseLimit",defaultMessage:"Increase limit"})})]})}):null}function O(e){const{formQuestionStore:t,maxFileSizeMb:r,isMobile:i,disabled:n}=e,l=(0,s().yK)((e=>({captionContainer:{width:"auto"},caption:{textAlign:"left",fontSize:14,color:e.mediumTextColor},captionMobileOverride:{textAlign:"center",fontSize:12},captionDisabledOverride:{opacity:.5}})),[]);return(0,g.jsx)("div",{style:l.captionContainer,id:`form-file-restrictions-${null==t?void 0:t.id}`,children:(0,g.jsx)(o(178498).Z,{shouldWrapCaption:!0,caption:(0,g.jsx)(c()._H,{id:"FormFileProperty.fileRestrictions",defaultMessage:"Size limit: {fileSizeLimitMB} MB. File limit: {fileLimit}.",values:{fileSizeLimitMB:r,fileLimit:_().ux}}),captionStyle:{...l.caption,...i?l.captionMobileOverride:{},...n?l.captionDisabledOverride:{}}})})}function Z(e){const{formFile:t,deleteFile:r}=e,{fileName:i}=t,n=(0,c().YB)(),l=(0,a().VK)((()=>{var e;if(t.globalFileUploadStoreKey)return null===(e=o(920991).default.getKeyState(t.globalFileUploadStoreKey))||void 0===e?void 0:e.progressPercent}),[t.globalFileUploadStoreKey]),d=(0,s().yK)((e=>({container:{display:"flex",alignItems:"center",paddingLeft:8,paddingRight:8,paddingTop:4,paddingBottom:4,fontSize:16,borderRadius:10},filePreview:{height:40,width:40,borderRadius:6,fontSize:16,borderStyle:"solid",borderColor:"dark"===e.mode?e.accentColors.gray[400]:e.accentColors.gray[100],borderWidth:1,marginRight:12,display:"flex",justifyContent:"center",alignItems:"center",flexShrink:0},loadingSpinner:{height:18,width:18},fileIcon:{height:18,width:18,fill:e.mediumIconColor},fileName:{marginRight:14,color:e.darkTextColor,whiteSpace:"nowrap",overflowX:"hidden",textOverflow:"ellipsis",minWidth:0},deleteFileButton:{marginLeft:"auto",height:20,width:20}})),[]),u=(0,o(225339).mD)(t.fileName),p=u?function(e){const t=_().i[e.toUpperCase()];switch(t){case"image":return V;case"video":return H;case"audio":return R;case"pdf":return L;case"slides":return K;case"sheet":return U;case"other":return T;default:(0,j().t1)(t)}}(u)(d.fileIcon):void 0;return(0,g.jsxs)("div",{style:d.container,children:[void 0!==l?(0,g.jsx)("div",{style:d.filePreview,children:(0,g.jsx)(o(312578).Z,{style:d.loadingSpinner})}):(0,g.jsx)("div",{style:d.filePreview,children:p}),(0,g.jsx)("div",{style:d.fileName,children:i}),(0,g.jsx)(f().Z,{icon:o(739479).y,onClick:r,style:d.deleteFileButton,ariaLabel:n.formatMessage(D.deleteFileButtonAriaLabel)})]})}var W=()=>o(147854);const N=(0,r.forwardRef)((function(e,t){const o=(0,W().cQ)(e,t),i=(0,S().S)(),{isEmpty:l}=(0,r.useContext)(C().OU),d=(0,s().yK)((t=>({buttonStyle:e.format===n().C.FormEditor?{cursor:"grab",boxShadow:`0 0 0 1px ${t.stroke.secondary} inset`}:{cursor:"pointer",paddingTop:l?0:8,paddingBottom:l?0:8}})),[l,e.format]),c=e.format===n().C.FormEditor?Y:G,u=(0,a().VK)((()=>{var e;return null===(e=i.getFormState())||void 0===e?void 0:e.collectionSchema}),[i]);return(0,g.jsx)(W().s0,{...o,EmptyComponent:c,collectionStore:e.collectionStore,quickActionButtons:void 0,formQuestionStore:e.formQuestionStore,buttonStyle:d.buttonStyle,collectionSchema:u})}));function Y(){const e=(0,s().yK)((e=>({selectedMessageText:{width:"100%",display:"inline-flex",justifyContent:"space-between",color:e.text.quaternary},chevronIcon:{width:20,fill:e.icon.quaternary,marginRight:-4}})),[]);return(0,g.jsxs)("div",{style:e.selectedMessageText,children:[(0,g.jsx)(c()._H,{...b().hW.editorPlaceholder}),(0,g.jsx)("div",{children:(0,x().U)(e.chevronIcon)})]})}function G(){const e=(0,s().yK)((e=>({selectedMessageText:{width:"100%",display:"inline-flex",justifyContent:"space-between",color:e.text.tertiary},chevronIcon:{width:20,fill:e.icon.tertiary,marginRight:-4}})),[]);return(0,g.jsxs)("div",{style:e.selectedMessageText,children:[(0,g.jsx)(c()._H,{...b().hW.viewerEmptyPlaceholder}),(0,g.jsx)("div",{children:(0,x().U)(e.chevronIcon)})]})}var X=()=>o(469753);function J(e,t){var i;const{format:m,property:f,store:h,formQuestionStore:v,disabled:x}=e,F=(0,c().YB)(),w=(0,s().Fg)(),_=(0,l().O7)(),k=(0,S().S)(),{propertySchema:j}=(0,r.useContext)(C().OU),B=(0,r.useRef)(!1),E=(0,a().VK)((()=>(0,d().QaF)(h.getPropertyValue(f))??""),[f,h]),[z,R]=(0,r.useState)(E),[T,V]=(0,r.useState)(!1),{baseStyles:L}=(0,r.useContext)(C().OU),U=(0,a().VK)((()=>{return!!j&&(("title"===j.type||"text"===j.type)&&(null==v||null===(e=v.getPropertyTypeSpecificConfig(j.type))||void 0===e?void 0:e.longAnswer));var e}),[v,j]),K=(0,a().VK)((()=>{const e=k.getFormState();return!!e&&Boolean(e.aliasStore)}),[k]),H=(0,a().VK)((()=>null==v?void 0:v.isRequired()),[v]),D=(0,r.useCallback)((e=>{let t=e.target.value;t.length>X().B&&(t=t.slice(0,X().B),e.target.value=t,I().oV({label:F.formatMessage(X().tU.characterLimitReached)})),R(t),B.current&&p().createAndCommit({userAction:"FormTextProperty.handleTextQuestionEdit",environment:_,canUndo:!0,perform:e=>{o(970105).sO({environment:_,store:h.getPropertyStore(f),value:(0,d().TPx)(t),transaction:e})}})}),[_,B,f,h,F]),A=(0,r.useCallback)((e=>{B.current=!0,V(!1),D(e),K&&u().clear({environment:_})}),[D,_,K]),Q=`\n        .formTextInput::placeholder {\n            color: ${m===n().C.FormEditor?w.text.quaternary:w.text.tertiary};\n            opacity: 1;\n        }\n    `;return(0,g.jsxs)("div",{style:{margin:-8,padding:8},children:[(0,g.jsx)("style",{children:Q}),(0,g.jsx)(o(94967).Z,{debugName:"FormPropertyWithTextInput",capture:T&&!x,onDelete:M().yR,onSpace:M().yR,onBackspace:M().yR,onLeft:M().yR,onRight:M().yR,onUp:M().yR,onDown:M().yR,onSelectAll:M().yR,onRedo:M().yR,onUndo:M().yR,onCut:M().yR,onCopy:M().yR,onPaste:M().yR,onKeypress:M().yR,onTab:M().yR,onEnter:M().yR,children:(0,g.jsx)(y().Z,{"aria-labelledby":`form-question-title-${null==v?void 0:v.id}`,"aria-describedby":`form-description-${null==v?void 0:v.id}`,inputElementAttributes:{required:H},textareaElementAttributes:{required:H},value:z,format:y().B.Default,inputClassName:"formTextInput",textarea:U,autosize:U,autosizeMinHeight:U?86:void 0,onChange:D,onBlur:A,disabled:x,onFocus:()=>{K&&u().setSelection({store:h.getPropertyStore(f)}),V(!0)},placeholder:x?F.formatMessage(b().hW.editorPlaceholder):F.formatMessage(b().hW.viewerEmptyPlaceholder),style:{padding:0,fontSize:16,borderRadius:6,backgroundColor:P().ZP.transparent,...m===n().C.FormEditor?{marginTop:8,boxShadow:`0 0 0 1px ${w.stroke.secondary} inset`,cursor:"grab"}:{marginTop:12,boxShadow:null===(i=L.buttonStyle)||void 0===i?void 0:i.boxShadow,lineHeight:1.75}},inputStyle:{backgroundColor:P().ZP.transparent,...m===n().C.FormEditor?{padding:"9px 10px",pointerEvents:"none"}:{padding:"5px 10px"}}})})]})}const ee=(0,r.forwardRef)(J);var te=()=>o(917881),oe=()=>o(429587),re=()=>o(511584),ie=()=>o(154989);function ne(e){const{relationItemPointers:t,store:o,relationValue:r,property:i,propertySchema:n,tokenFormat:l}=e;return(0,g.jsx)(g.Fragment,{children:t.map((e=>{let{pointer:t,pageStore:a}=e;return(0,g.jsx)(le,{relatedPagePointer:t,relatedPageStore:a,relationValue:r,store:o,tokenFormat:l,propertySchema:n,property:i},t.id)}))})}function le(e){const{relatedPagePointer:t,relatedPageStore:o,store:i,relationValue:n,property:a,propertySchema:d}=e,c=(0,l().O7)(),u=(0,s().yK)((()=>({tokenWrapper:{display:"flex",alignItems:"center",gap:4,padding:4,width:"100%",borderRadius:12}})),[]),m=(0,r.useCallback)(((e,t)=>{const o=e.filter((e=>e.id!==t.id));p().createAndCommit({userAction:"RelationBlockPropertyValue.handleRemoveRelationClick",environment:c,canUndo:!0,perform:e=>{te().sf({store:i,propertyId:a,value:o,environment:c,relatedPageId:t.id,propertySchema:d,transaction:e,isUnthrottled:!1})}})}),[c,a,d,i]);return(0,g.jsxs)("div",{style:u.tokenWrapper,children:[(0,g.jsx)(re().Z,{recordPointer:t,parentStore:i,relationPropertySchema:d,style:{background:"none"},noUnderline:!0,linkify:"whenReadOnly"},t.id),(0,g.jsx)(f().Z,{ariaLabel:"remove",icon:oe().b,style:{width:20,height:20},iconStyle:{width:8,height:8},onClick:()=>m(n,o)})]},t.id)}const ae=(0,r.forwardRef)((function(e,t){const i=(0,ie().cQ)(e,t),{buttonStyle:l,editButtonClickProps:d,property:u,onContextMenu:p,store:m,quickActionButtons:f,formQuestionStore:y}=i,{disabled:h,format:v}=e,w=(0,S().S)(),{propertySchema:_,baseStyles:k}=(0,r.useContext)(C().OU),P=_,M=(0,o(603885).jV)(null==k?void 0:k.tokenFormat),j=(0,a().VK)((()=>{var e;return null===(e=w.getFormState())||void 0===e?void 0:e.collectionSchema}),[w]),I=(0,ie().S9)({store:m,propertySchema:P,property:u}),B=(0,ie().L3)({store:m,propertySchema:P,relationValue:I}),E=0===B.length,z=(0,s().yK)((e=>({buttonStyle:{...k.buttonStyle,...l,...v===n().C.FormEditor?{boxShadow:`0 0 0 1px ${e.stroke.secondary} inset`,cursor:"grab"}:{}},buttonPressedStyle:k.buttonPressedStyle??{},buttonHoveredStyle:k.buttonHoveredStyle??{},overflowIndicator:{marginRight:4,color:e.mediumTextColor},relationItemsWrapper:{width:"100%"},selectedMessageText:v===n().C.FormEditor?{color:e.text.quaternary}:{color:E?e.text.tertiary:e.text.primary},chevronIcon:{width:20,fill:e.icon.tertiary,marginRight:-4,...v===n().C.FormEditor?{fill:e.icon.quaternary}:{}}})),[k.buttonHoveredStyle,k.buttonPressedStyle,k.buttonStyle,l,v,E]),R=(0,r.useMemo)((()=>P&&I&&0!==B.length?(0,g.jsx)(ne,{relationItemPointers:B,store:m,tokenFormat:M,relationValue:I,property:u,propertySchema:P}):null),[u,P,B,I,m,M]),T=(0,a().VK)((()=>v===n().C.FormEditor?(0,g.jsx)(c()._H,{...b().hW.editorPlaceholder}):E?(0,g.jsx)(c()._H,{...b().hW.viewerEmptyPlaceholder}):(0,g.jsx)(c()._H,{id:"FormRelationProperty.nonEmptyMsg",defaultMessage:"{numSelected} selected",values:{numSelected:B.length}})),[v,E,B.length]);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(F().e,{ref:t,editButtonClickProps:h?void 0:d,onContextMenu:p,style:z.buttonStyle,hoveredStyle:z.buttonHoveredStyle,pressedStyle:z.buttonPressedStyle,quickActionButtons:f,formQuestionStore:y,collectionSchema:j,children:(0,g.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",width:"100%"},children:[(0,g.jsx)("div",{style:z.selectedMessageText,children:T}),(0,g.jsx)("div",{children:(0,x().U)(z.chevronIcon)})]})}),R&&(0,g.jsx)("div",{style:{paddingTop:8},children:R})]})})),se=(0,r.forwardRef)((function(e,t){throw new Error("Unsupported form property type")})),de=r.forwardRef((function(e,t){const{property:o,format:r,propertyType:i,innerProps:n}=e;if(!i)return null;const l=ce[r][i];return null===l?null:(0,g.jsx)(l,{ref:t,...n,property:o,format:r})})),ce={[n().C.FormEditor]:{text:ee,title:ee,select:i().c3,multi_select:i().c3,relation:ae,date:w,person:N,file:Q,number:ee,checkbox:v,email:ee,url:ee,phone_number:ee,created_by:se,created_time:se,formula:se,last_edited_by:se,last_edited_time:se,last_visited_time:se,location:se,rollup:se,status:se,verification:se,auto_increment_id:se,button:se},[n().C.FormViewer]:{text:ee,title:ee,select:i().c3,multi_select:i().c3,relation:ae,date:w,person:N,file:A,number:ee,checkbox:v,email:ee,url:ee,phone_number:ee,created_by:se,created_time:se,formula:se,last_edited_by:se,last_edited_time:se,last_visited_time:se,location:se,rollup:se,status:se,verification:se,auto_increment_id:se,button:se}},ue=de},397079:(e,t,o)=>{o.d(t,{V:()=>i});var r=o(667294);function i(){const e=(0,r.useRef)(null),[t,o]=(0,r.useState)(!1),[i,n]=(0,r.useState)(!1),l=(0,r.useCallback)((()=>{const t=e.current;t&&n(t.matches(":active"))}),[]),a=(0,r.useCallback)((t=>{e.current=t,l(),o(!0)}),[l]);return(0,r.useEffect)((()=>{const o=e.current;if(o&&t)return o.addEventListener("mousedown",l),o.addEventListener("mouseup",l),()=>{o.removeEventListener("mousedown",l),o.removeEventListener("mouseup",l)}}),[l,t]),[a,i,e]}},13023:(e,t,o)=>{o.d(t,{A0:()=>d,FM:()=>s,OP:()=>c,lF:()=>u});o(821057);var r=o(667294),i=()=>o(109757),n=()=>o(920991);function l(e,t){return`${e}-${t}`}function a(e,t,o){return`${l(e,t)}-${o}`}function s(e,t,o){const r=l(t,o);return e.startsWith(r)}function d(e,t){return e.startsWith(t)}function c(e){const{blockStore:t,propertyId:o,environment:r,saveUploadedFile:i}=e;return p({blockStore:t,propertyId:o,environment:r,saveUploadedFile:i})}function u(e){const{blockStore:t,propertyId:o,environment:r,onSingleFileStartCallback:i,onSingleFileErrorCallback:n,formMetadata:l}=e,{spaceId:a,formId:s}=l,d=p({blockStore:t,propertyId:o,environment:r,onSingleFileStartCallback:i,onSingleFileErrorCallback:n,formMetadata:{spaceId:a??"",formId:s??""}});return a&&s?d:e=>{throw new Error("spaceId and formId are not defined")}}function p(e){const{blockStore:t,propertyId:o,environment:l,onSingleFileStartCallback:s,onSingleFileErrorCallback:d,saveUploadedFile:c,formMetadata:u}=e;return(0,r.useCallback)((e=>{const r=(e,r,i)=>{const l=a(t.pointer.id,o,r);n().default.setKeyState(l,{progressPercent:0,file:e.file,name:e.name,size:e.size}),s&&i&&s({...i,globalFileUploadStoreKey:l})},p=(e,r)=>{let{progressPercent:i}=e;const l=a(t.pointer.id,o,r),s=n().default.getKeyState(l);if(!s)throw new Error("uploading file cannot be found in global file upload state");n().default.setKeyState(l,{...s,progressPercent:i})},m=(e,r)=>{const i=a(t.pointer.id,o,r),l=n().default.getKeyState(i);if(n().default.setKeyState(i,void 0),!l||null==l||!l.name)throw new Error("completed file upload cannot be found in global file upload state");c&&c({name:null==l?void 0:l.name,url:e})},f=(e,r)=>{const i=a(t.pointer.id,o,r);n().default.setKeyState(i,void 0),d&&d(i)},y=u?{environment:l,files:e,bucket:"temporary",formMetadata:u,onSingleFileStart:r,onSingleFileProgress:p,onSingleFileComplete:m,onSingleFileError:f}:{environment:l,files:e,bucket:"secure",record:t.pointer,onSingleFileStart:r,onSingleFileProgress:p,onSingleFileComplete:m,onSingleFileError:f};i().IL(y)}),[c,t.pointer,l,o,u,s,d])}},960304:(e,t,o)=>{o.d(t,{l:()=>i});o(667294);var r=o(785893);const i=(0,o(827282).IU)("arrowUpCircled",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M7.993 15.126c.966 0 1.875-.185 2.728-.554a7.218 7.218 0 003.787-3.78 6.788 6.788 0 00.553-2.728c0-.966-.184-1.875-.553-2.727a7.136 7.136 0 00-1.531-2.25 7.219 7.219 0 00-2.256-1.53 6.805 6.805 0 00-2.735-.554c-.966 0-1.875.185-2.727.554a7.241 7.241 0 00-3.774 3.78 6.788 6.788 0 00-.553 2.727c0 .967.184 1.876.553 2.728.37.852.878 1.604 1.525 2.256a7.124 7.124 0 002.256 1.524 6.77 6.77 0 002.727.554zm0-1.395a5.598 5.598 0 01-4.013-1.654 5.735 5.735 0 01-1.21-1.804 5.567 5.567 0 01-.437-2.209c0-.783.146-1.517.438-2.2a5.715 5.715 0 011.21-1.812 5.6 5.6 0 011.797-1.217 5.599 5.599 0 012.208-.438c.789 0 1.525.146 2.208.438a5.66 5.66 0 013.029 3.028 5.55 5.55 0 01.437 2.201c0 .789-.146 1.525-.437 2.209a5.68 5.68 0 01-1.217 1.804 5.68 5.68 0 01-1.805 1.217 5.567 5.567 0 01-2.208.437zM8 11.51a.597.597 0 00.43-.164.584.584 0 00.172-.431V7.688L8.547 6.28l.622.78.759.793a.53.53 0 00.417.177c.16 0 .291-.052.396-.157a.518.518 0 00.164-.39.595.595 0 00-.164-.417L8.485 4.783A.664.664 0 008 4.558c-.173 0-.333.075-.479.225L5.26 7.066a.593.593 0 00-.157.417.538.538 0 00.554.547.557.557 0 00.416-.177l.766-.8.615-.766-.055 1.401v3.227c0 .173.057.317.171.43.114.11.258.165.431.165z"})})},648275:(e,t,o)=>{o.d(t,{U:()=>i});o(667294);var r=o(785893);const i=(0,o(827282).IU)("chevronUpDown",{viewBox:"0 0 20 20",svg:(0,r.jsx)("path",{d:"M10 3.20801C10.1185 3.20801 10.2279 3.23307 10.3281 3.2832C10.4329 3.32878 10.5332 3.39714 10.6289 3.48828L14.5186 7.2207C14.5915 7.29362 14.6507 7.37793 14.6963 7.47363C14.7464 7.56934 14.7715 7.67643 14.7715 7.79492C14.7715 7.94987 14.735 8.08887 14.6621 8.21191C14.5892 8.3304 14.4912 8.42383 14.3682 8.49219C14.2497 8.56055 14.1198 8.59473 13.9785 8.59473C13.8828 8.59473 13.7826 8.57878 13.6777 8.54688C13.5775 8.51042 13.484 8.44889 13.3975 8.3623L10 5.04004L6.60254 8.3623C6.51595 8.45345 6.42253 8.51497 6.32227 8.54688C6.22201 8.57878 6.12174 8.59473 6.02148 8.59473C5.87565 8.59473 5.74349 8.56055 5.625 8.49219C5.50651 8.42383 5.41081 8.3304 5.33789 8.21191C5.26497 8.08887 5.22852 7.94987 5.22852 7.79492C5.22852 7.67643 5.2513 7.56934 5.29688 7.47363C5.34701 7.37793 5.41081 7.29362 5.48828 7.2207L9.37109 3.48828C9.4668 3.39714 9.56706 3.32878 9.67188 3.2832C9.77669 3.23307 9.88607 3.20801 10 3.20801ZM10 16.9209C9.88607 16.9209 9.77669 16.8958 9.67188 16.8457C9.56706 16.8001 9.4668 16.7318 9.37109 16.6406L5.48828 12.9082C5.41081 12.8307 5.34701 12.7441 5.29688 12.6484C5.2513 12.5527 5.22852 12.4456 5.22852 12.3271C5.22852 12.1722 5.26497 12.0355 5.33789 11.917C5.41081 11.7985 5.50651 11.7051 5.625 11.6367C5.74349 11.5684 5.87565 11.5342 6.02148 11.5342C6.12174 11.5342 6.22201 11.5501 6.32227 11.582C6.42253 11.6139 6.51595 11.6755 6.60254 11.7666L10 15.0889L13.3975 11.7666C13.484 11.68 13.5775 11.6208 13.6777 11.5889C13.7826 11.5524 13.8828 11.5342 13.9785 11.5342C14.1198 11.5342 14.2497 11.5684 14.3682 11.6367C14.4912 11.7051 14.5892 11.7985 14.6621 11.917C14.735 12.0355 14.7715 12.1722 14.7715 12.3271C14.7715 12.4456 14.7464 12.5527 14.6963 12.6484C14.6507 12.7441 14.5915 12.8307 14.5186 12.9082L10.6289 16.6406C10.5332 16.7318 10.4329 16.8001 10.3281 16.8457C10.2279 16.8958 10.1185 16.9209 10 16.9209Z"})})},807071:(e,t,o)=>{o.d(t,{Z:()=>l});var r=()=>o(532850),i=()=>o(955620);class n extends(()=>o(263184))().default{getInitialState(){return{isLoaded:!1}}getFormState(){if(this.state.isLoaded)return this.state}getQuestionError(e){if(this.state.isLoaded)return this.state.formQuestionErrorMap.get(e)}updateFormState(e){this.state.isLoaded&&this.setState({...this.state,...e})}updateFilePropertyIdToFormFiles(e,t){var o;if(!this.state.isLoaded)return;const r=null===(o=this.getFormState())||void 0===o?void 0:o.filePropertyIdToFormFiles;this.updateFormState({filePropertyIdToFormFiles:{...r,[e]:t((null==r?void 0:r[e])??[])}})}updateFormErrorMap(e){if(!this.state.isLoaded)return;const t=this.state.collectionSchema;if(!t)return;const n=new Map,l=this.state.formQuestionStores;for(const c of l??[]){var a,s;const l=c.id,u=null===(a=c.getConfig())||void 0===a?void 0:a.propertyId;if(!u)continue;const p=null===(s=this.state.draftFormBlockStore)||void 0===s?void 0:s.getProperties()[u],m=(0,r().Qm)({schema:t,property:u});if(m){if(c.isRequired()&&this.state.hasAttemptedFormSubmission){const e=this.state.filePropertyIdToFormFiles;if("file"===m.type){var d;if(((null===(d=e[u])||void 0===d?void 0:d.length)??0)<1){n.set(l,"required");continue}}else if("checkbox"===m.type){if(!0!==(0,r().Ml)(p)){n.set(l,"required");continue}}else if((0,i().PgY)(p)){n.set(l,"required");continue}}if(!(0,i().PgY)(p)){const t=(0,i().QaF)(p);if("number"===m.type&&!(0,o(114079).kE)(t,e)){n.set(l,"invalid_number");continue}if("email"===m.type&&!(0,o(446866).oH)(t)){n.set(l,"invalid_email");continue}if("url"===m.type&&!(0,o(994085).m)(t)){n.set(l,"invalid_url");continue}if("phone_number"===m.type&&!(0,o(981850).E)(t)){n.set(l,"invalid_phone_number");continue}}}}this.updateFormState({formQuestionErrorMap:n})}}const l=n},815277:(e,t,o)=>{o.d(t,{CH:()=>m,DE:()=>s().DE,KQ:()=>s().KQ,Rv:()=>s().Rv,V5:()=>p().V5,VX:()=>f,eB:()=>s().eB,oo:()=>s().oo});var r=()=>o(255933),i=()=>o(779709),n=()=>o(205228),l=()=>o(845682),a=()=>o(30795),s=()=>o(546464),d=()=>o(404791),c=()=>o(897257),u=()=>o(18281),p=()=>o(259408);const m={guests:e=>{if(!c().subscriptionDataStoreInstance.state)return"loading";return{current:(0,u().s1)(e.environment,e.spaceId,c().subscriptionDataStoreInstance.state)}},team_self_promotion:e=>{},internal_guests:e=>{if(!c().subscriptionDataStoreInstance.state)return"loading";return{current:(0,u().s1)(e.environment,e.spaceId,c().subscriptionDataStoreInstance.state),hasLowGuestLimit:(0,o(548812).fc)()}},members:e=>{const t=c().subscriptionDataStoreInstance.state;return{current:t?(0,a().W)(e.environment,e.spaceId,t):0}},non_admin_members:e=>{},view_chart:e=>{},form_filesize:e=>{},form_customization:e=>{},premium_automations:e=>{},move_to:e=>{},claimable_spaces:e=>{},domain_settings:e=>{},managed_users:e=>{},invite_user_to_workspace_mentions:e=>{},saml:e=>{},scim:e=>{},export_members:e=>{},hipaa_compliance:e=>{},sites_multiple_public_domains:e=>{},custom_image_upload_favicon:e=>{},custom_public_sites_layout:e=>{},seo_title_and_description:e=>{},admin_transfer_private_content:e=>{},ai_slack_qna:e=>{},configurable_mention_invites:e=>{},configurable_retention:e=>{},unbranded_forms:e=>{},ai_google_drive_qna:e=>{},watermarkless_chart_export:e=>{},configurable_deletion_and_retention_settings:e=>{},sudo_mode:e=>{},ai_github_connector:e=>{},ai_jira_connector:e=>{},slack_imports_invite:e=>{},content_reprovisioning:e=>{},ai_space_usage:e=>{var t;let{environment:o,spaceId:s}=e;const u=new(l().H)(o,{table:r().bx,id:s}).getModel(),p=(0,i().oc)(n().default.promotions.ai,u),m=(null===(t=d().Z.state)||void 0===t?void 0:t.spaceUsage)??0,f=c().subscriptionDataStoreInstance.state;return{current:m,memberCount:f?(0,a().W)(o,s,f):0,aiPromotionConfig:p,space:u}},ai_user_usage:e=>{var t;let{environment:o,spaceId:s}=e;const u=new(l().H)(o,{table:r().bx,id:s}).getModel(),p=(0,i().oc)(n().default.promotions.ai,u),m=(null===(t=d().Z.state)||void 0===t?void 0:t.userUsage)??0,f=c().subscriptionDataStoreInstance.state;return{current:m,memberCount:f?(0,a().W)(o,s,f):0,aiPromotionConfig:p,space:u}},block_read_and_write_role:e=>{}};function f(e){return(0,s().Rv)(e)??!1}},981850:(e,t,o)=>{function r(e){return/^(\+\d{1,2}[\s.-])?\(?\d{3}\)?[\s.-]\d{3}[\s.-]\d{4}$/.test(e)}function i(e){return/^[0-9 .()\-\+]{7,}$/.test(e)}o.d(t,{E:()=>i,x:()=>r})},259408:(e,t,o)=>{o.d(t,{$W:()=>p,KQ:()=>u,_e:()=>f,Ay:()=>g,fS:()=>c,t:()=>n(),V5:()=>y,Kz:()=>h});o(267602),o(653476);var r=()=>o(513670),i=()=>o(696459),n=()=>o(124199),l=()=>o(629719);const a=["student","personal","plus","business","enterprise"];function s(e){return(0,i().DE)(a,e)}var d=()=>o(122792);const c=["plus","business","enterprise","ai","sites_custom_hostnames"];function u(e,t,o,r){return f(p(e,t,o,r))}function p(e,t,o,r){const{name:n,scope:l,actor:a}=r,s={...r,billingData:l.billingData},d=l.premiumFeatureOverrides,c=n in d?function(e,t,o){const r={type:"contact_account_manager"},n=e[t.name].type;if("check"===n){const e={type:"none"};return!0===o?{type:"available",limit:e}:{type:"upsell",upsell:r,limit:e}}if("per_use"===n){const e=t.amount,i={type:"per_use",amount:o};return"unlimited"===o||o>e?{type:"available",limit:i}:{type:"upsell",upsell:r,limit:i}}if("cumulative"===n){const e=t.amount,i=t.data.current,n={type:"cumulative",current:i,total:o};return"unlimited"===o||o>=i+e?{type:"available",limit:n}:{type:"upsell",upsell:r,limit:n}}(0,i().t1)(n)}(t,r,d[n]):o[n](s);let u;if("available"===c.type){const e=c.upsell?m(l.billingData,c.upsell,r.supportedProducts):void 0;u={...c,upsell:e}}else if("blocked"===c.type){const e=m(l.billingData,c.upsell,r.supportedProducts);u={...c,upsell:e}}else{const e=m(l.billingData,c.upsell,r.supportedProducts),t=function(e){const{actor:t,supportedProducts:o,upsell:r}=e;if(!t.isSpaceAdmin)return"blocked";const n=r.type;switch(n){case"product":return o.includes(r.product)?"upsell":"blocked";case"contact_sales":case"contact_account_manager":return"upsell";default:(0,i().t1)(n)}}({actor:a,supportedProducts:r.supportedProducts,upsell:e});u={...c,type:t,upsell:e}}return Math.random()<.001&&e({level:"info",from:"premiumFeatureFramework",type:"getPremiumFeatureAvailability",data:{featureName:n,featureScope:l,featureActor:a,featureAvailability:c}}),u}function m(e,t,o){if((0,l().Rd)(e.subscription))return{type:"contact_account_manager"};if("product"!==(null==t?void 0:t.type)||o.includes(t.product)||!s(t.product))return t;const i=t.product,n=o.filter((e=>s(e))).filter((e=>"student"!==e)).filter((e=>d().rC[e]>=d().rC[i])),a=(0,r().F)(n,(e=>d().rC[e]));return a?{...t,product:a}:t}function f(e){return"available"===(null==e?void 0:e.type)}function y(e,t){const{available:o}=t;let r,n;return"unavailable"in t?(r=t.unavailable,n=t.unavailable):(r=t.blocked,n=t.upsell),"available"===e.type?o():"upsell"===e.type?n(e):"blocked"===e.type?r(e):(0,i().t1)(e)}function h(e,t){if(void 0!==e)return y(e,{available:()=>{},blocked:t,upsell:()=>{}})}function g(e){return n().object({required:e,optional:{}})}},994085:(e,t,o)=>{o.d(t,{m:()=>s});o(492176),o(7961),o(398858),o(461318),o(33228);const r="://",i="www.",n=/.+\..+\..+/,l=/\.{2,}/,a=/.+\..+/;function s(e){const t=e.trim();if(0===t.length)return!1;if(-1===t.indexOf(".")&&-1===t.indexOf("localhost"))return!1;if("."===t.at(t.length-1)||-1!==t.indexOf(" "))return!1;let o,s=`${-1===t.indexOf(r)?"http://":""}${t}`;try{o=new URL(s)}catch(c){const e=-1===s.indexOf(i),[t,n]=s.split(r);s=`${t}${r}${e?"www.":""}${n}`;try{o=new URL(s)}catch(c){return!1}}const d=o.hostname;return!l.test(d)&&(!(t.includes(i)&&"localhost"!==d&&!n.test(d))&&!("localhost"!==d&&!a.test(d)))}}}]);