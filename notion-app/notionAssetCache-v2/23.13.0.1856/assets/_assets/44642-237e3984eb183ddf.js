"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[44642],{966296:(e,t,a)=>{a.d(t,{B:()=>i});var n=()=>a(677559);const o=new(n().Ss)("teamPermissionsInviteWithModal",(async()=>await Promise.all([a.e(62743),a.e(52774),a.e(44832),a.e(39938),a.e(90698),a.e(84885),a.e(37358),a.e(5242),a.e(7312),a.e(90424),a.e(81580),a.e(84325),a.e(31189),a.e(69343),a.e(46293),a.e(94556),a.e(78701),a.e(38804),a.e(17100),a.e(11846),a.e(70355),a.e(2971),a.e(80741),a.e(72586),a.e(53335),a.e(71896),a.e(46616),a.e(54940),a.e(49396),a.e(98721),a.e(98032),a.e(57229),a.e(63707),a.e(86609),a.e(91253),a.e(4642),a.e(5006),a.e(6612),a.e(61171),a.e(23179),a.e(75377),a.e(31020),a.e(2942),a.e(73682),a.e(58591),a.e(54803),a.e(1953),a.e(10216),a.e(58565),a.e(69197),a.e(42055),a.e(38739),a.e(44751),a.e(81567),a.e(63257),a.e(34291),a.e(1913),a.e(56054),a.e(95076),a.e(92341),a.e(82658),a.e(4163),a.e(69583),a.e(22759),a.e(20343),a.e(21820),a.e(46945),a.e(10553),a.e(67019),a.e(27039),a.e(25265),a.e(14581),a.e(38632),a.e(61651),a.e(88702),a.e(54307),a.e(43184),a.e(87647),a.e(75861),a.e(46257),a.e(15819),a.e(45376),a.e(74943),a.e(23721),a.e(58461),a.e(72329),a.e(19592),a.e(3331),a.e(98672),a.e(52658),a.e(44642),a.e(78),a.e(58586)]).then(a.bind(a,824033)))),i=(0,n().kF)(o,(e=>e.TeamPermissionsInviteWithModal))},453382:(e,t,a)=>{a.d(t,{H:()=>o});a(667294);var n=a(785893);const o=(0,a(827282).IU)("archive",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M6.24707 16.4561C5.54069 16.4561 5.00065 16.2738 4.62695 15.9092C4.25781 15.5446 4.07324 15.0091 4.07324 14.3027V7.07031H5.41309V14.2822C5.41309 14.5693 5.48828 14.7904 5.63867 14.9453C5.79362 15.0957 6.01465 15.1709 6.30176 15.1709H13.6914C13.974 15.1709 14.1904 15.0957 14.3408 14.9453C14.4958 14.7904 14.5732 14.5693 14.5732 14.2822V7.07031H15.9199V14.3027C15.9199 15.0046 15.7331 15.5378 15.3594 15.9023C14.9857 16.2715 14.4479 16.4561 13.7461 16.4561H6.24707ZM7.79199 10.5156C7.63249 10.5156 7.50033 10.4632 7.39551 10.3584C7.29069 10.2536 7.23828 10.1169 7.23828 9.94824V9.72949C7.23828 9.56087 7.28841 9.42643 7.38867 9.32617C7.49349 9.22591 7.62793 9.17578 7.79199 9.17578H12.208C12.3721 9.17578 12.5042 9.22591 12.6045 9.32617C12.7093 9.42643 12.7617 9.56087 12.7617 9.72949V9.94824C12.7617 10.1169 12.7093 10.2536 12.6045 10.3584C12.4997 10.4632 12.3675 10.5156 12.208 10.5156H7.79199ZM4.53125 7.72656C4.06641 7.72656 3.7041 7.58984 3.44434 7.31641C3.18913 7.03841 3.06152 6.66927 3.06152 6.20898V5.21094C3.06152 4.74609 3.19368 4.37695 3.45801 4.10352C3.72233 3.83008 4.08008 3.69336 4.53125 3.69336H15.4688C15.929 3.69336 16.2868 3.83008 16.542 4.10352C16.8018 4.37695 16.9316 4.74609 16.9316 5.21094V6.20898C16.9316 6.66927 16.8018 7.03841 16.542 7.31641C16.2868 7.58984 15.929 7.72656 15.4688 7.72656H4.53125ZM4.79102 6.48926H15.209C15.3685 6.48926 15.4824 6.4528 15.5508 6.37988C15.6191 6.30241 15.6533 6.1862 15.6533 6.03125V5.38867C15.6533 5.22917 15.6191 5.11296 15.5508 5.04004C15.4824 4.96712 15.3685 4.93066 15.209 4.93066H4.79102C4.63151 4.93066 4.5153 4.96712 4.44238 5.04004C4.37402 5.11296 4.33984 5.22917 4.33984 5.38867V6.03125C4.33984 6.1862 4.37402 6.30241 4.44238 6.37988C4.5153 6.4528 4.63151 6.48926 4.79102 6.48926Z"})})},645491:(e,t,a)=>{a.d(t,{F:()=>u,g:()=>c});a(241792);var n=()=>a(464140),o=()=>a(696459),i=()=>a(91502),s=()=>a(591914),r=()=>a(876822),l=()=>a(162213),d=()=>a(606021);function c(){l().Z.reset(),d().Z.reset()}async function u(e){let{environment:t,messageStoreEmitValue:a,spaceStore:l}=e;if(!function(e){const t=d().Z.state;switch(t.loadingState){case"uninitialized":return!0;case"loading":return!1;case"loaded":return-1===e||e!==t.messageStoreEmitValue;default:(0,o().t1)(t)}}(a))return!1;const{currentSpaceStore:c,currentUserStore:u}=r().default.state,m=c||l;if(!m||!u)return!1;"uninitialized"===d().Z.state.loadingState&&d().Z.setState({loadingState:"loading"});const p=await async function(e){let{environment:t,currentSpaceStore:a,currentUserStore:o}=e;const r=a.getModel(),l=o.id,d=(0,s().VK)(a,l).getModel();if(void 0===r||void 0===d)return;if((0,n().RI)({space:r,spaceUser:d})){return await(0,i().sj)({environment:t,spaceStore:a,includeArchived:!0,currentUserId:l,minRoleOnTeamStores:"reader"})}return await(0,i().qX)({environment:t,spaceStore:a,includeArchived:!0,currentUserId:o.id})}({environment:t,currentSpaceStore:m,currentUserStore:u});if(!(0,o().$K)(p))return d().Z.setState({loadingState:"uninitialized"}),!1;const{archivedTeams:v,unarchivedTeams:g}=(0,i().tV)(p);return d().Z.setState({loadingState:"loaded",archivedTeamIds:v.map((e=>e.id)),unarchivedTeamIds:g.map((e=>e.id)),messageStoreEmitValue:a}),!0}},223248:(e,t,a)=>{a.d(t,{Id:()=>w,Ng:()=>y,Px:()=>T,ow:()=>b,t_:()=>h,um:()=>S});a(267602),a(653476);var n=()=>a(506347),o=()=>a(989478),i=()=>a(465755),s=()=>a(824462),r=()=>a(636340),l=()=>a(102182),d=()=>a(224597),c=()=>a(269299),u=()=>a(527278),m=()=>a(345918),p=()=>a(876822),v=()=>a(555813),g=()=>a(111631);const f=(0,a(788860).vU)({joinTeamSuccessMessage:{id:"teamInviteLinkActions.joinTeam.confirmationMessage",defaultMessage:"Joined {teamName}"},requestTeamSuccessMessage:{id:"teamInviteLinkActions.requestAccess.successMessage",defaultMessage:"Successfully requested membership"},requestTeamFailureMessage:{id:"teamInviteLinkActions.requestAccess.failureMessage",defaultMessage:"Failed to request membership"}});async function S(e){let{environment:t,userId:a,teamStore:n,user:o}=e;const s=n.getSpaceId();if(!s)return;await v().Wi({environment:t,teamId:n.id,spaceId:s,teamUserInfo:o,isSettingDefaultTeam:!1,inviterId:a})&&(i().UD(t,{store:n,joined_role:"member",from:"team_invite_link"}),await h({environment:t,userId:a,teamStore:n}),l().oV({label:u().Z.formatMessage(f.joinTeamSuccessMessage,{teamName:n.getName()})}))}async function h(e){let{environment:t,userId:a,teamStore:o}=e;const i=p().default.state.currentUserRootStore,s=o.getSpaceId();if(!s||!i)return;const r=i.getSpaceViewStores().filter((e=>e.getSpaceId()===s))[0];await d().y3({environment:t,spaceViewStore:r,userSettingsStore:void 0,userRootStore:i,pageVisitSource:n().tY.JoinTeam,navigationType:"switchingToOrLoadingSpace"}),await g().I({environment:t,spaceId:s,userId:a}),v().hI({environment:t,teamStore:o,shouldScroll:!0})}async function T(e){let{environment:t,teamId:a,message:n}=e;if(!t.currentUser.id)return;"success"===(await s().callApi({eventName:"requestAccess",environment:t,data:{type:"current-actor-to-team",teamId:a,message:n}})).type?(i().LB(t,{teamId:a}),await w({environment:t}),new Promise((e=>setTimeout(e,500))).then((()=>{l().oV({label:u().Z.formatMessage(f.requestTeamSuccessMessage)})}))):l().oV({label:u().Z.formatMessage(f.requestTeamFailureMessage)})}async function b(e){let{environment:t,teamStore:a,accessRequestStore:n,status:s}=e;const l=n.getForActorId();if(!l)return;const d=n.getRecordModel({table:o().KJ,id:l});if(d){if("approved"===s){const e=[{type:"member",entity_type:"user",user_id:d.id}];if(!(await v().Uj({environment:t,teamStore:a,teamMemberInfos:e,isSettingDefaultTeam:!1,createNewTeamFlowId:void 0})))return}c().createAndCommit({userAction:"GrantAccessActivityAction.handleGrantAccess",environment:t,canUndo:!0,perform:e=>{r().sW({store:n,transaction:e,data:{resolved_time:Date.now(),resolved_by_table:o().KJ,resolved_by_id:t.currentUser.id,status:s}})}}),i().co(t,{store:a,resolution:s})}}async function w(e){let{environment:t}=e;const{lastVisitedSpaceView:a,userRootStore:o,userSettingsStore:i}=await(0,m().iX)({environment:t,disableRedirectUrl:!1});a?await d().y3({environment:t,spaceViewStore:a,userRootStore:o,userSettingsStore:i,pageVisitSource:n().tY.BackForward,navigationType:"switchingToOrLoadingSpace"}):await d().L5({environment:t,userRootStore:o,userSettingsStore:i,pageVisitSource:n().tY.BackForward})}async function y(e){let{environment:t,teamId:a}=e;const n=await s().callApi({eventName:"getTeamAccessRequestMetadata",environment:t,data:{teamId:a}});if("success"===n.type)return n.data}},384255:(e,t,a)=>{a.r(t),a.d(t,{OutlinerTeamOverflow:()=>ne,TeamOverflowMenu:()=>oe});a(267602),a(653476),a(241792);var n=a(667294),o=()=>a(219727),i=()=>a(142735),s=()=>a(846550),r=()=>a(122792),l=()=>a(542487),d=()=>a(788860),c=()=>a(696459),u=()=>a(38562),m=()=>a(465755),p=()=>a(855238),v=()=>a(149809),g=()=>a(154186),f=()=>a(448419),S=()=>a(198829),h=()=>a(388284),T=()=>a(654133),b=()=>a(966296),w=()=>a(247724),y=()=>a(352230),C=()=>a(91502),j=()=>a(267842),M=()=>a(453382),x=()=>a(314379),O=()=>a(802600),I=()=>a(827282),B=a(785893);const L=(0,I().IU)("factoryBlockSettings",{viewBox:"0 0 24 24",svg:(0,B.jsx)("path",{d:"M12,8c-2.209,0-4,1.791-4,4s1.791,4,4,4s4-1.791,4-4S14.209,8,12,8z M12,14c-1.104,0-2-0.896-2-2s0.896-2,2-2s2,0.896,2,2 S13.104,14,12,14z M24,15V9h-3.523c-0.105-0.299-0.227-0.589-0.361-0.872l2.491-2.492l-4.243-4.243l-2.491,2.491 C15.59,3.75,15.299,3.629,15,3.523V0H9v3.523C8.701,3.629,8.411,3.75,8.128,3.885L5.636,1.394L1.394,5.636l2.491,2.492 C3.75,8.411,3.629,8.701,3.523,9H0v6h3.523c0.106,0.299,0.227,0.589,0.362,0.872l-2.492,2.491l4.243,4.243l2.492-2.491 C8.411,20.25,8.701,20.371,9,20.477V24h6v-3.523c0.299-0.105,0.59-0.227,0.872-0.361l2.491,2.491l4.243-4.243l-2.491-2.491 c0.135-0.283,0.256-0.573,0.361-0.872H24z M19.778,18.363l-1.415,1.415l-2.077-2.077c-0.896,0.502-2.271,1.049-3.286,1.363V22h-2 v-2.936c-1.016-0.314-2.391-0.861-3.286-1.363l-2.078,2.077l-1.415-1.415L6.3,16.285C5.781,15.359,5.234,13.953,4.936,13H2v-2h2.936 C5.234,10.047,5.781,8.641,6.3,7.714L4.222,5.636l1.415-1.415l2.078,2.077C8.609,5.797,9.984,5.25,11,4.936V2h2v2.936 c1.016,0.314,2.391,0.861,3.286,1.363l2.077-2.077l1.415,1.415L17.7,7.714c0.519,0.926,1.065,2.333,1.364,3.286H22v2h-2.936 c-0.299,0.953-0.846,2.359-1.364,3.285L19.778,18.363z"})});var V=()=>a(568741);const A=(0,I().IU)("personAdmin",{viewBox:"0 0 15 16",svg:(0,B.jsx)("path",{d:"M6.082 7.215a2.71 2.71 0 001.504-.438c.451-.296.811-.69 1.08-1.182a3.352 3.352 0 00.403-1.634 3.21 3.21 0 00-.403-1.6 3.059 3.059 0 00-1.08-1.141A2.776 2.776 0 006.082.796c-.547 0-1.048.143-1.504.43a3.153 3.153 0 00-1.087 1.156 3.195 3.195 0 00-.403 1.593 3.39 3.39 0 00.41 1.627c.269.487.629.88 1.08 1.175a2.71 2.71 0 001.504.438zm0-1.19c-.314 0-.606-.088-.875-.266a1.974 1.974 0 01-.636-.738 2.247 2.247 0 01-.239-1.046c0-.379.08-.718.24-1.019.159-.3.37-.538.635-.71.264-.179.556-.267.875-.267.319 0 .61.086.875.26.264.172.476.41.636.71.16.296.239.634.239 1.012 0 .387-.08.738-.24 1.053-.159.31-.37.556-.635.738a1.508 1.508 0 01-.875.273zm-4.266 7.54h5.948a3.113 3.113 0 01-.082-.752v-.43H1.59c-.082 0-.141-.014-.178-.041-.032-.027-.048-.073-.048-.137 0-.26.105-.56.315-.902.21-.342.512-.673.909-.992.4-.323.893-.59 1.476-.8.588-.213 1.26-.32 2.017-.32a5.648 5.648 0 011.92.328c.17-.42.466-.732.89-.937a6.605 6.605 0 00-1.313-.417 6.856 6.856 0 00-1.497-.157c-.92 0-1.75.139-2.488.417-.739.273-1.372.631-1.9 1.073-.525.442-.928.918-1.21 1.429-.279.51-.418.998-.418 1.463 0 .784.584 1.175 1.75 1.175zm6.843-.731c0 .438.091.804.274 1.1.182.297.469.58.861.848.392.274.907.588 1.545.944a.6.6 0 00.294.082.62.62 0 00.335-.082c.638-.36 1.153-.675 1.545-.944.392-.269.679-.551.861-.847.182-.297.274-.664.274-1.101v-2.468a.979.979 0 00-.137-.54c-.087-.141-.24-.26-.458-.355a17.47 17.47 0 00-.417-.15c-.182-.069-.38-.14-.595-.213-.21-.077-.403-.145-.581-.205a13.002 13.002 0 01-.403-.15 1.263 1.263 0 00-.417-.055c-.146 0-.292.028-.438.082-.077.028-.205.07-.383.13l-.574.198c-.205.073-.399.144-.58.212-.183.064-.32.114-.411.15-.219.096-.374.215-.465.356a1.02 1.02 0 00-.13.54v2.468zm2.598 1.326a.601.601 0 01-.212-.04.416.416 0 01-.178-.124l-1.155-1.244a.671.671 0 01-.096-.178.492.492 0 01-.034-.178c0-.145.048-.264.144-.355a.492.492 0 01.341-.13.485.485 0 01.363.15l.793.869 1.613-2.229a.484.484 0 01.41-.219c.132 0 .246.048.342.144.1.091.15.205.15.342 0 .04-.009.086-.027.136a.463.463 0 01-.075.15l-1.983 2.722c-.086.123-.218.184-.396.184z"})});var H=()=>a(521777);const k=(0,I().IU)("restore",{viewBox:"0 0 18 15",svg:(0,B.jsx)("path",{d:"M8.61427 3.17871C8.292 3.17871 8.02833 3.43506 8.02833 3.75732L8.02833 7.84424C8.02833 8.0127 8.0796 8.15918 8.20411 8.32031L10.0132 10.708C10.2549 11.0229 10.5918 11.0742 10.8921 10.8691C11.1631 10.6787 11.1851 10.3345 10.9653 10.0342L8.52638 6.74561L9.19288 8.79639L9.19288 3.75732C9.19288 3.43506 8.93654 3.17871 8.61427 3.17871ZM8.89259 0C5.28907 0 2.22755 2.62939 1.56105 6.05713L0.521008 6.05713C-0.00633599 6.05713-0.138172 6.41602 0.147473 6.82617L1.7881 9.15527C2.0298 9.49219 2.38136 9.48486 2.61573 9.15527L4.25636 6.81885C4.53468 6.41602 4.40284 6.05713 3.88282 6.05713L2.82814 6.05713C3.45802 3.28857 5.91896 1.25244 8.89259 1.25244C10.98 1.25977 12.811 2.26318 13.9317 3.82324C14.1514 4.12354 14.5029 4.21875 14.8032 4.02832C15.1035 3.85254 15.1841 3.44971 14.9351 3.12744C13.5435 1.25977 11.3609 0 8.89259 0ZM8.89259 14.9414C12.4961 14.9414 15.5576 12.3047 16.2241 8.88428L17.2568 8.88428C17.7842 8.88428 17.9234 8.52539 17.6304 8.11523L15.9971 5.78613C15.7554 5.44922 15.4038 5.45654 15.1694 5.78613L13.5288 8.12256C13.2432 8.52539 13.3823 8.88428 13.9024 8.88428L14.9644 8.88428C14.3272 11.6455 11.8589 13.6963 8.89259 13.6963C6.80519 13.689 4.97413 12.6782 3.85353 11.1182C3.62648 10.8179 3.28224 10.7227 2.97462 10.9058C2.68165 11.0889 2.60109 11.4917 2.85011 11.814C4.24171 13.6816 6.42433 14.9414 8.89259 14.9414Z"})});var Z=()=>a(492973),_=()=>a(270895),R=()=>a(998901),D=()=>a(876822),K=()=>a(529048),N=()=>a(619779),q=()=>a(296631),U=()=>a(645491),P=()=>a(174896),F=()=>a(555813);a(122556),a(582845),a(250570),a(533019),a(721473),a(788208),a(22624);function G(e){let{adminStatus:t,accessLevel:a,isArchivedTeam:n}=e;if("adminThatCanPerformPrivilegedActions"===t)return new Set(["join","joinAsOwner"]);if(n)switch(t){case"none":return new Set;case"admin":return new Set("open"===a?["join"]:[]);default:(0,c().t1)(t)}switch(a){case"open":return new Set(["join"]);case"closed":case"private":return new Set;default:(0,c().t1)(a)}}var z=()=>a(558999),W=()=>a(428097),J=()=>a(895192),Y=()=>a(617111),E=()=>a(1038),$=()=>a(132222),Q=()=>a(463807);const X=["join","view","add","duplicate","leave","archive","restore"],ee=["add"],te=["join","joinAsOwner","upgradeSelfToOwner","leave"],ae=(0,d().vU)({add:{defaultMessage:"Add members",id:"sidebar.outlinerTeamToggleButton.addLabel"},leave:{defaultMessage:"Leave teamspace",id:"sidebar.outlinerTeamToggleButton.leaveLabel"},joinAsOwner:{defaultMessage:"Join as owner",id:"sidebar.outlinerTeamToggleButton.joinAsOwnerLabel"},joinAsMember:{defaultMessage:"Join as member",id:"sidebar.outlinerTeamToggleButton.joinAsMemberLabel"},joinTeamspace:{defaultMessage:"Join teamspace",id:"sidebar.outlinerTeamToggleButton.joinLabel"},upgradeSelfToOwner:{defaultMessage:"Become owner",id:"sidebar.outlinerTeamToggleButton.upgradeSelfToOwnerLabel"},archive:{defaultMessage:"Archive teamspace",id:"sidebar.outlinerTeamToggleButton.archiveLabel"},restore:{defaultMessage:"Restore teamspace",id:"outlinerTeamOverflow.teamActions.restoreLabel"},duplicate:{defaultMessage:"Duplicate teamspace",id:"sidebar.outlinerTeamToggleButton.duplicateLabel"},teamspaceSettings:{defaultMessage:"Teamspace settings",id:"sidebar.outlinerTeamToggleButton.ownerViewLabel"},viewMembers:{defaultMessage:"View members",id:"sidebar.outlinerTeamToggleButton.unjoinedMemberViewLabel"}});function ne(e){let{teamStore:t,style:a,from:n,hideJoin:r,onPopupClick:l,onPopupClose:c}=e;const u=(0,o().Fy)(),m=(0,d().YB)(),p=(0,i().qz)(void 0,q().Z),v=(0,i().VK)((()=>D().default.state.currentSpaceStore),[]),S=(0,i().qz)(void 0,K().Z),h=(0,s().yK)((e=>({buttonStyle:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,height:20,width:20,...a},icon:{fill:e.mediumIconColor,width:14,height:14}})),[a]),y=m.formatMessage({defaultMessage:"Teamspace settings and members...",id:"sidebar.outlinerTeamToggleButton.tooltip"});return v?u.isMobile?null:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(T().Z,{textWrap:!1,renderTooltip:()=>y,placement:R().Placement.Bottom,render:e=>(0,B.jsx)(f().ZP,{popupType:f().Z4.Popup,buttonPopupStore:S,alignmentToOrigin:f().vR.Start,originGap:2,renderOrigin:t=>(0,B.jsx)(g().Z,{ariaLabel:y,className:w().qxR,style:h.buttonStyle,mobileFeedback:!1,...e,...t,children:(0,x().o)(h.icon)}),render:e=>(0,B.jsx)(oe,{teamStore:t,permissionsInviteStore:p,onDismiss:e.close,from:n,hideJoin:r,buttonPopupStore:S}),onClick:l,onClose:c})}),(0,B.jsx)(b().B,{permissionsInviteStore:p,store:t})]}):null}function oe(e){const{teamStore:t,permissionsInviteStore:a,onDismiss:g,from:f,hideJoin:b,buttonPopupStore:x}=e,I=(0,s().Fg)(),K=(0,o().O7)(),q=(0,s().yK)((()=>({menuItemButton:{minWidth:200},caption:{minWidth:230}})),[]),ne=(0,i().VK)((()=>D().default.state.currentSpaceStore),[]),oe=(0,$().e)(t),ie=(0,i().VK)((()=>(0,l().m4)({archived_by:t.getArchivedBy()})),[t]),se=(0,i().VK)((()=>N().Z.state.spacePermissionGroupIds),[]),re=K.currentUser.id,le=(0,i().VK)((()=>re?t.getTeamRoleForUser(re,se)??"none":"none"),[re,t,se]),de=(0,i().VK)((()=>!(!t.isDefined()||!re)&&Boolean(t.isOwner(re))),[re,t]),ce=(0,E().y)(t.id),ue=(0,z().e)(t),{id:me,name:pe,isDefault:ve}=(0,i().VK)((()=>({id:t.id,name:t.getName(),isDefault:t.isDefault()})),[t]),ge=(0,W().n)(),fe=(0,i().VK)((()=>(0,C().Xq)({environment:K,spaceStore:ne})),[ne,K]),Se=(0,J().r)(f),he=function(e){const{isDefault:t,accessLevel:a,settings:n}=(0,i().VK)((()=>({isDefault:e.isDefault(),accessLevel:e.getTeamAccessLevel(),settings:e.getSettings()})),[e]),o="private"===a,s=(0,Y().P)(),l=o&&!s?"business":void 0,d=(null==n?void 0:n.disable_public_access)||(null==n?void 0:n.disable_export)||(null==n?void 0:n.disable_guests),c=(0,Y().z)(),u=d&&!c?"enterprise":void 0,m=(0,r().bo)([u,l]);if(t)return"isDefault";if(m)return m}(t),Te="isDefault"===(be=he)?(0,B.jsx)(d()._H,{id:"sidebar.outlinerTeamToggleButton.cannotDuplicateDefaultTeamspace",defaultMessage:"Cannot duplicate a default teamspace"}):"business"===be?(0,B.jsx)(d()._H,{id:"sidebar.outlinerTeamToggleButton.cannotDuplicateTeamspaceWithBusinessFeaturesOnDowngradedAccount",defaultMessage:"Cannot duplicate a teamspace with settings only allowed on Business plans or above"}):"enterprise"===be?(0,B.jsx)(d()._H,{id:"sidebar.outlinerTeamToggleButton.cannotDuplicateTeamspaceWithEnterpriseFeaturesOnDowngradedAccount",defaultMessage:"Cannot duplicate a teamspace with settings only allowed on Enterprise plans or above"}):void 0===be?void 0:(0,c().t1)(be);var be;const we=(0,i().VK)((()=>t.getTeamAccessLevel()),[t]),ye=(0,Q().l)(t),Ce=(0,n.useCallback)((e=>{m().z(K,{store:t,from:f,option:e})}),[K,t,f]),je=ce&&!ge,Me=(0,i().VK)((()=>Boolean(null==ne?void 0:ne.canAdmin())),[ne]),{joinLeaveOptionsToShow:xe,leaveOptionDisabledState:Oe}=function(e){let{teamRole:t,adminStatus:a,isDefaultTeam:n,accessLevel:o,isArchivedTeam:i}=e;switch(t){case"owner":case"member":const e=new Set,s=!i;return s&&e.add("leave"),"owner"!==t&&"adminThatCanPerformPrivilegedActions"===a&&e.add("upgradeSelfToOwner"),{joinLeaveOptionsToShow:e,leaveOptionDisabledState:s&&n?{disabled:!0,disabledReasonKey:"defaultTeam"}:void 0};case"team_level_guest":return{joinLeaveOptionsToShow:new Set,leaveOptionDisabledState:void 0};case"none":return{joinLeaveOptionsToShow:G({adminStatus:a,accessLevel:o,isArchivedTeam:i}),leaveOptionDisabledState:void 0};default:(0,c().t1)(t)}}({teamRole:le,adminStatus:Se?"adminThatCanPerformPrivilegedActions":Me?"admin":"none",isArchivedTeam:ie,isDefaultTeam:ve,accessLevel:we}),Ie=xe.has("joinAsOwner"),Be=Se&&!(1===xe.size&&xe.has("leave")),Le={add:{type:"action",show:!ie&&ue,handle:()=>{a.update((e=>({...e,modalOpen:!0})))},title:ae.add,icon:(0,j().a)({width:17})},leave:{type:"action",...Be&&{colorOverride:I.redBadgeBackground},show:xe.has("leave"),handle:()=>{F().s({environment:K,teamStore:t,from:f,userGroupsInTeam:ye})},title:ae.leave,disabled:Boolean(null==Oe?void 0:Oe.disabled),icon:(0,V().V)({width:17}),disabledTooltipText:"defaultTeam"===(null==Oe?void 0:Oe.disabledReasonKey)&&(0,B.jsx)(d()._H,{id:"sidebar.outlinerTeamToggleButton.cannotLeaveDefaulTeamTooltip",defaultMessage:"Cannot leave a default teamspace"})},join:{type:"action",show:!b&&xe.has("join"),handle:async()=>{if(ne)switch(we){case"open":await F().um({environment:K,teamStore:t,currentSpaceStore:ne,from:f,andNavigateToTeamHome:!1});break;case"closed":case"private":await F().wT({environment:K,teamStore:t,currentSpaceStore:ne,from:f,action:"joinClosedOrPrivateTeamAsMember"});break;default:(0,c().t1)(we)}},title:Ie?ae.joinAsMember:ae.joinTeamspace,icon:(0,H().R)({width:17})},joinAsOwner:{type:"action",show:Ie,handle:()=>F().wT({environment:K,teamStore:t,currentSpaceStore:ne,from:f,action:"joinTeamAsOwner"}),title:ae.joinAsOwner,icon:A({width:17})},upgradeSelfToOwner:{type:"action",show:xe.has("upgradeSelfToOwner"),handle:()=>F().wT({environment:K,teamStore:t,currentSpaceStore:ne,from:f,action:"upgradeToOwner"}),title:ae.upgradeSelfToOwner,icon:A({width:17})},archive:{type:"action",show:!ie&&de,colorOverride:I.redBadgeBackground,handle:async()=>{je||(await F().aQ({teamStore:t,environment:K,from:f}),U().F({environment:K,messageStoreEmitValue:-1}))},title:ae.archive,disabled:je,disabledTooltipText:(0,B.jsx)("div",{style:{whiteSpace:"normal"},children:(0,B.jsx)(d()._H,{id:"sidebar.outlinerTeamToggleButton.cannotArchiveTooltip.moreThanOneMember",defaultMessage:"There must only be one member in the workspace to archive this teamspace"})}),icon:(0,M().H)({width:17})},restore:{type:"action",show:ie,handle:()=>{de&&(F().YH({environment:K,teamStore:t,teamName:pe,from:f}),U().F({environment:K,messageStoreEmitValue:-1}))},title:ae.restore,icon:k({width:17}),disabled:!de,disabledTooltipText:(0,B.jsx)(d()._H,{id:"outlinerTeamOverflow.restoreArchivedTeam.disabledTooltipText",defaultMessage:"Only teamspace owners can restore archived teamspaces."})},duplicate:{type:"action",show:!ie&&fe,handle:()=>{P().tW({environment:K,teamStore:t,from:f,buttonPopupStore:x})},title:ae.duplicate,disabled:void 0!==he,icon:(0,O().a)({width:17}),disabledTooltipText:Te,caption:(0,B.jsx)(d()._H,{id:"sidebar.outlinerTeamToggleButton.duplicateCaption",defaultMessage:"Duplicates permissions and other settings but not pages and members"})},view:{type:"action",show:!ie,handle:()=>F().RF({environment:K,teamId:me,tab:_().a.Members,from:f}),title:oe&&!ie?ae.teamspaceSettings:ae.viewMembers,icon:oe?L({width:15}):(0,Z().n)({width:17})}},Ve=(Be?[{sectionName:"join/leave section",orderedOptions:te},{sectionName:"other actions",orderedOptions:X.filter((e=>!te.includes(e)))}]:[{sectionName:"add section",orderedOptions:ee},{sectionName:"other actions section",orderedOptions:X.filter((e=>!ee.includes(e)))}]).map((e=>{const t=e.orderedOptions.filter((e=>Le[e].show));if(0!==t.length)return{sectionName:e.sectionName,filteredOptions:t}})).filter(c().$K).map((e=>{const t=e.filteredOptions.map((e=>{const t=Le[e],{type:a}=t;return"action"===a?(0,u().cN)({key:e,displayName:t.title,analyticsName:t.title.defaultMessage,svg:()=>t.icon,validators:[],closeParentMenu:!0,action:()=>{g(),Ce(e),t.handle()},render:e=>(0,B.jsx)(T().Z,{placement:R().Placement.Left,textWrap:!1,disableTooltip:!(t.disabled&&t.disabledTooltipText),renderTooltip:()=>t.disabledTooltipText,render:a=>(0,B.jsx)(p().Z,{...e,...a,svg:()=>t.icon,title:(0,B.jsx)(d()._H,{...t.title}),buttonStyle:{...q.menuItemButton,...!t.disabled&&t.colorOverride?{fill:t.colorOverride,color:t.colorOverride}:{fill:I.regularIconColor,color:I.regularTextColor}},disabled:t.disabled,disabledFeedback:t.disabled,caption:t.caption,captionStyle:q.caption,shouldWrapCaption:!0})})}):"extensionAction"===a?(0,u().MV)({key:e,displayName:t.title,analyticsName:t.title.defaultMessage,svg:()=>t.icon,width:250,validators:[],subActions:()=>t.subActionSections.map((t=>({...t,actions:t.actions.map((t=>({...t,action:a=>{g(),Ce(e),t.action(a)}})))})))}):void(0,c().t1)(a)}));return(0,u().$J)({key:e.sectionName,render:e=>(0,B.jsx)(h().Z,{...e}),actions:t})}));return(0,B.jsx)(S().Z,{className:w().Mdu,menuType:y().o.Popup,minWidth:"100%",children:(0,B.jsx)(v().Z,{context:{blocks:[],environment:K,publicEditMode:void 0},sections:Ve,initialFocus:void 0})})}},840821:(e,t,a)=>{a.d(t,{M:()=>h});var n=a(667294),o=()=>a(219727),i=()=>a(142735),s=()=>a(846550),r=()=>a(707513),l=()=>a(345918),d=()=>a(91502),c=()=>a(289963),u=()=>a(132222),m=()=>a(788860),p=()=>a(92175),v=a(785893);const g=function(e){const{teamStore:t,from:s,navigateToTeamHomeOnJoin:r,style:l,hoveredStyle:d,icon:c,isRed:u}=e,g=(0,o().O7)(),f=(0,i().VK)((()=>a(876822).default.state.currentSpaceStore),[]),S=(0,n.useCallback)((async()=>{f&&await a(555813).um({environment:g,teamStore:t,currentSpaceStore:f,from:s,andNavigateToTeamHome:r??!1})}),[f,g,t,s,r]);return(0,v.jsx)(p().Z,{style:l,hoveredStyle:d,onClick:S,icon:c,isRed:u,children:(0,v.jsx)(m()._H,{id:"outlinerTeamToggleButton.joinTeamButton",defaultMessage:"Join"})})};var f=()=>a(12875);const S=function(e){const{teamStore:t,style:o,hoveredStyle:s}=e,[r,l]=(0,n.useState)(!1),d=(0,i().VK)((()=>t.getName()),[t]);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(p().Z,{style:o,hoveredStyle:s,onClick:()=>l(!0),children:(0,v.jsx)(m()._H,{id:"teamRequestButton.requestButton.label",defaultMessage:"Request"})}),(0,v.jsx)(a(450194).Z,{teamStore:t,teamName:d,teamId:t.id,isModalOpen:r,onDismiss:()=>l(!1)})]})};function h(e){const{teamStore:t,style:a,hoveredStyle:n}=e,m=(0,o().O7)(),p=(0,c().Q)(),h=(0,u().e)(t),T=(0,i().VK)((()=>t.getTeamAccessLevel()),[t]),b=(0,s().yK)((e=>({joinTeamButton:{maxHeight:26,marginLeft:10,paddingLeft:10,paddingRight:10,borderRadius:100,fontSize:13,fontWeight:r().Ue.semibold,background:e.buttonHoveredBackground,alignSelf:"center",...a},joinTeamButtonHoveredStyle:{background:e.buttonPressedBackground,...n}})),[a,n]),w=(0,i().VK)((()=>(0,d().Hu)({membership:t.getRawMembership()})&&(0,l().Fn)(m)),[m,t]),y=!h&&"open"===T||w,C=!h&&"closed"===T;return p?null:h?(0,v.jsx)(f().Z,{...e,style:b.joinTeamButton,hoveredStyle:b.joinTeamButtonHoveredStyle}):y?(0,v.jsx)(g,{...e,style:b.joinTeamButton,hoveredStyle:b.joinTeamButtonHoveredStyle}):C?(0,v.jsx)(S,{teamStore:t,style:b.joinTeamButton,hoveredStyle:b.joinTeamButtonHoveredStyle}):null}},12875:(e,t,a)=>{a.d(t,{Z:()=>c});a(241792);var n=a(667294),o=()=>a(219727),i=()=>a(142735),s=()=>a(788860),r=()=>a(513670),l=()=>a(463807),d=a(785893);const c=function(e){const{teamStore:t,from:c,onLeavingTeam:u,style:m,hoveredStyle:p,icon:v,isRed:g,placement:f,alignment:S,buttonInternals:h}=e,T=(0,o().O7)(),b=(0,i().VK)((()=>a(876822).default.state.currentSpaceStore),[]),w=(0,l().l)(t),y=(0,n.useCallback)((async()=>{if(!b)return;await a(555813).s({environment:T,teamStore:t,from:c,userGroupsInTeam:w})&&(null==u||u())}),[b,T,t,c,w,u]),C=(0,d.jsx)(s()._H,{id:"teamJoinLeaveButton.leaveTeam.enabledTooltip",defaultMessage:"Click to leave teamspace"}),j=function(e){let{teamStore:t}=e;const a=(0,o().O7)(),n=a.currentUser.id,{isDefaultTeam:c}=(0,i().VK)((()=>({isDefaultTeam:t.isDefault()})),[t]),u=(0,l().l)(t),m=(0,i().VK)((()=>{if(!t.isReady())return!1;const{ownerUserIds:e,ownerGroupIds:a}=t.getAllOwnerIds();return Boolean(n&&t.isOwner(n)&&e.length+a.length===1)}),[t,n]);return function(e){let{isDefaultTeam:t,isOnlyTeamOwner:a,userGroupsInTeam:n}=e;if(t)return(0,d.jsx)(s()._H,{id:"teamBrowser.teamCard.leaveTeam.defaultTeamTooltip",defaultMessage:"You can’t leave this teamspace because everyone in the workspace must be a member"});if(a)return(0,d.jsx)(s()._H,{id:"teamJoinLeaveButton.leaveTeam.onlyOwnerTooltip",defaultMessage:"Invite another teamspace owner to leave this teamspace"});if(n.length>0)return(0,d.jsx)(s()._H,{id:"teamBrowser.teamCard.leaveTeam.groupTooltip",defaultMessage:"{groupNames, plural, one {You can't leave this teamspace because you're a member of multiple groups, {groupNames}.} other {You can't leave this teamspace because you're a member of the group, {groupNames}.}}",values:{groupNames:r().oA(n.map((e=>e.name))).join()}})}({isDefaultTeam:c,isOnlyTeamOwner:m,userGroupsInTeam:u})}({teamStore:t}),M=Boolean(j),x=M?j:C;return(0,d.jsx)(a(654133).Z,{style:M?{width:240}:void 0,disableTooltip:!Boolean(x),renderTooltip:e=>(0,d.jsx)("div",{...e,children:x}),textWrap:M,placement:f,alignment:S,render:e=>(0,d.jsx)(a(92175).Z,{...e,style:m,hoveredStyle:p,onClick:y,disabled:M,disabledFeedback:M,icon:v,isRed:g,children:h||(0,d.jsxs)(d.Fragment,{children:[(0,a(15409).e)({width:12.5,marginRight:4}),(0,d.jsx)(s()._H,{id:"teamBrowser.teamCard.button.joined",defaultMessage:"Joined"})]})})})}},450194:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(667294),o=()=>a(788860),i=a(785893);const s=(0,o().vU)({message_placeholder:{id:"teamInviteLinkRequestPage.message.placeholder",defaultMessage:"Message (optional)"}});const r=function(e){const{teamStore:t,teamName:r,teamId:l,isModalOpen:d,onDismiss:c}=e,[u,m]=(0,n.useState)(""),p=(0,a(219727).O7)(),v=(0,o().YB)(),g=async()=>{await a(223248).Px({environment:p,teamId:l,message:u}),c()},f=(0,a(846550).yK)((()=>({modal:{alignSelf:"center",overflow:"visible",padding:15,width:420},requestTitle:{display:"inline-flex",marginBottom:10},icon:{marginLeft:4,marginRight:4},footer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:15},requestInvitesButton:{marginLeft:20},input:{padding:8}})),[]);return(0,i.jsx)(a(708518).Z,{open:d,onDismiss:c,innerStyle:f.modal,preventHideChildrenWhileOpening:!0,render:()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:f.requestTitle,children:(0,i.jsx)(o()._H,{id:"teamInviteLinkRequestModal.reasonForRequest.title",defaultMessage:"Request access to {icon} {teamName}",values:{teamName:r,icon:(0,i.jsx)(a(383694).p,{style:f.icon,store:t,disabled:!0,size:22})}})}),(0,i.jsx)(a(291198).Z,{textarea:!0,style:f.input,value:u,onChange:e=>{m(e.target.value)},placeholder:v.formatMessage(s.message_placeholder)}),(0,i.jsxs)("div",{style:f.footer,children:[(0,i.jsx)(a(67961).Z,{isSecondaryColor:!0,isSmall:!0,isMultiline:!0,children:(0,i.jsx)(o()._H,{id:"teamInviteLinkRequestModal.caption",defaultMessage:"Your teamspace owners will approve or decline your request."})}),(0,i.jsx)(a(906651).Z,{isLarge:!0,style:f.requestInvitesButton,onClick:g,children:(0,i.jsx)(o()._H,{id:"teamInviteLinkRequestModal.requestAccessButton.label",defaultMessage:"Request"})})]})]})})}},558999:(e,t,a)=>{a.d(t,{e:()=>l});var n=()=>a(142735),o=()=>a(696459),i=()=>a(697623),s=()=>a(132222),r=()=>a(936968);function l(e){const t=(0,r().q)(e),a=(0,s().e)(e);return(0,n().VK)((()=>{if(!(0,i().Mk)())return!1;const n=e.getSetting("invite_access");switch(n){case void 0:return!1;case"team_members":return a;case"team_owners":return t;default:(0,o().t1)(n)}}),[e,t,a])}},428097:(e,t,a)=>{a.d(t,{n:()=>d});a(267602),a(653476),a(241792);var n=()=>a(219727),o=()=>a(142735),i=()=>a(528514),s=()=>a(696459),r=()=>a(876822),l=()=>a(18281);function d(){const e=(0,n().O7)().currentUser.id,t=(0,o().VK)((()=>r().default.state.currentSpaceViewStore),[]);return(0,o().VK)((()=>!(!e||null==t||!t.isDefined())&&(0,i().wN)({userId:e,teamsThatUserIsANonGuestMemberOf:t.getNonGuestTeamsStores().map((e=>e.getModel())).filter(s().$K),spaceMembers:(0,l().Io)()})),[e,t])}},289963:(e,t,a)=>{a.d(t,{Q:()=>l});var n=()=>a(219727),o=()=>a(142735),i=()=>a(345918),s=()=>a(876822),r=()=>a(897257);function l(){const e=function(){const e=(0,n().O7)();return(0,o().VK)((()=>{const t=s().default.state.currentSpaceStore,a=r().subscriptionDataStoreInstance.state;return t?i().Cx(t)?a?{loading:!1,isUserTeamGuestOfSpace:i().di(e,a)}:{loading:!0}:{loading:!1,isUserTeamGuestOfSpace:!1}:{loading:!0}}),[e])}();return(0,o().VK)((()=>e.loading||e.isUserTeamGuestOfSpace),[e])}},132222:(e,t,a)=>{a.d(t,{e:()=>s});var n=()=>a(219727),o=()=>a(142735),i=()=>a(619779);function s(e){const t=(0,n().O7)().currentUser.id;return(0,o().VK)((()=>Boolean(void 0!==t&&e.isNonGuestMember(t,i().Z.state.spacePermissionGroupIds))),[t,e])}},983135:(e,t,a)=>{a.d(t,{K:()=>i});var n=()=>a(142735),o=()=>a(91502);function i(e){return(0,n().VK)((()=>{var t;return void 0===e?0:(null===(t=(0,o().oT)(e))||void 0===t?void 0:t.memberCountWithGuests)??0}),[e])}},463807:(e,t,a)=>{a.d(t,{l:()=>r});a(267602),a(653476),a(241792);var n=()=>a(142735),o=()=>a(542487),i=()=>a(467806),s=()=>a(619779);function r(e){return(0,n().VK)((()=>{if(!e.isDefined())return[];return(0,o().Gr)({rawMembers:e.getRawMembership(),groupsInSpace:i().Z.state.permissionGroupsAndMemberCounts.map((e=>e.group))}).filter((e=>s().Z.state.spacePermissionGroupIds.has(e.getGroupId())))}),[e])}}}]);