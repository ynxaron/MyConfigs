"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[63704],{581205:(e,t,n)=>{n.d(t,{h:()=>r});n(667294);var a=n(785893);const r=(0,n(827282).IU)("mailRound",{viewBox:"0 0 17 12",svg:(0,a.jsx)("path",{d:"M3.09961 11.9639H14.1055C15.3359 11.9639 16.0469 11.2529 16.0469 9.84473V2.29785C16.0469 0.896484 15.3291 0.185547 13.9004 0.185547H2.89453C1.66406 0.185547 0.953125 0.889648 0.953125 2.29785V9.84473C0.953125 11.2598 1.6709 11.9639 3.09961 11.9639ZM7.68652 6.41992L2.52539 1.32715C2.67578 1.26562 2.85352 1.23145 3.05859 1.23145H13.9414C14.1533 1.23145 14.3379 1.26562 14.4883 1.33398L9.34082 6.41992C9.04688 6.71387 8.78027 6.84375 8.51367 6.84375C8.24023 6.84375 7.97363 6.70703 7.68652 6.41992ZM1.99902 9.84473V2.29785C1.99902 2.24316 1.99902 2.27051 1.99902 2.22266L5.92969 6.08496L2.00586 9.96094C1.99902 9.92676 1.99902 9.88574 1.99902 9.84473ZM15.001 2.30469V9.85156C15.001 9.87891 15.001 9.91309 15.001 9.94043L11.0977 6.08496L15.001 2.24316C15.001 2.30469 15.001 2.30469 15.001 2.30469ZM3.05859 10.918C2.86719 10.918 2.70312 10.8906 2.55957 10.8291L6.64746 6.78906L7.0918 7.22656C7.57031 7.69824 8.02832 7.89648 8.51367 7.89648C8.99219 7.89648 9.45703 7.69824 9.93555 7.22656L10.3799 6.78906L14.4609 10.8223C14.3105 10.8906 14.1396 10.918 13.9414 10.918H3.05859Z"})})},389292:(e,t,n)=>{n.d(t,{bY:()=>l,dx:()=>s,q0:()=>c,rp:()=>u,tr:()=>p,yl:()=>d});n(398858),n(461318),n(33228);var a=()=>n(824462),r=()=>n(497065),i=()=>n(883051);const l=9,o=1e3;function d(){i().Z.setState({...i().Z.state,isModalOpen:!0,openedTimestamp:Date.now()})}function s(e){const{environment:t}=e;i().Z.setState({...i().Z.state,isModalOpen:!1});const n=new URL(window.location.href);n.searchParams.delete("bp"),r().c4({environment:t,url:n.toString()})}const u={listings:[],count:0};async function c(e){const{environment:t,includeProduct:n,offset:r,spaceId:i,productTable:l,includeCount:d,includeRefunds:s}=e,c=await a().callApi({eventName:"getMarketplaceAcquiredListings",environment:t,data:{spaceId:i,limit:o,offset:r,productTable:l,includeProduct:n,includeCount:d,includeRefunds:s}});return"success"===c.type&&c.data.success?{listings:c.data.listings,count:c.data.count}:u}function p(e){const{environment:t}=e,n=new URL(window.location.href);n.searchParams.has("bp")?d():(n.searchParams.append("bp","true"),r().c4({environment:t,url:n.toString()}))}},323416:(e,t,n)=>{n.d(t,{d:()=>o});n(667294);var a=()=>n(846550),r=()=>n(661641),i=()=>n(266566),l=n(785893);function o(e){let{imageSrc:t,title:n,description:o,customStyles:d}=e;const s=(0,a().yK)((()=>({container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",gap:8},image:{width:55,objectFit:"contain",position:"static"},placeholderLoadedStyle:{width:"unset"}})),[]);return(0,l.jsxs)("div",{style:{...s.container,...null==d?void 0:d.container},children:[(0,l.jsx)(i()._,{imageSrc:t,darkImageSrc:t,style:{...s.image,...null==d?void 0:d.image},isHidden:!1,placeholderLoadedStyle:{...s.placeholderLoadedStyle,...null==d?void 0:d.placeholderLoadedStyle}}),(0,l.jsx)(r().q,{styleName:"UIHeader-17px/Semibold",colorName:"primary",children:n}),(0,l.jsx)(r().q,{styleName:"UIMedium-13px/Regular",colorName:"secondary",customStyles:null==d?void 0:d.description,children:o})]})}},266566:(e,t,n)=>{n.d(t,{_:()=>s});var a=n(667294),r=()=>n(219727),i=()=>n(142735),l=()=>n(846550),o=()=>n(518242),d=n(785893);function s(e){const{imageSrc:t,darkImageSrc:n,style:s={},isHidden:u,placeholderLoadedStyle:c}=e,[p,m]=a.useState(null),f=(0,r().O7)(),y=(0,i().VK)((()=>f.ThemeModeStore.state),[f]),g=function(e){const{visible:t}=e;return(0,l().yK)((()=>({image:{opacity:null!==t&&t?1:0,transition:"opacity 175ms ease-in",position:"absolute"}})),[t])}({visible:p}),h="light"===y?t:n;return a.useEffect((()=>{m(!u)}),[u,p]),(0,d.jsx)(o().ZP,{src:h,loading:"eager",style:{...g.image,...s},placeholderLoadedStyle:c})}},997048:(e,t,n)=>{n.d(t,{$:()=>c});n(241792),n(667294);var a=()=>n(846550),r=()=>n(696459),i=()=>n(707513),l=()=>n(661641),o=()=>n(661297),d=()=>n(92175),s=()=>n(906651),u=n(785893);function c(e){let{icon:t,title:n,subTitle:r,body:o,actions:d,width:s,style:c}=e;const m=function(e){let{width:t=406,style:n={}}=e;return(0,a().yK)((()=>({container:{display:"flex",flexDirection:"column",alignItems:"center",width:`${t}px`,padding:"20px",gap:"24px",...n},header:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",gap:"8px",fontWeight:i().Ue.semibold,fontSize:"16px"},headerPadding:{paddingTop:"16px"},actions:{display:"flex",flexDirection:"column",gap:"6px",width:"100%"}})),[t,n])}({width:s,style:c});return(0,u.jsxs)("div",{style:m.container,children:[(0,u.jsxs)("div",{style:{...m.header,...!t&&m.headerPadding},children:[t,n,r?(0,u.jsx)(l().q,{styleName:"Body-14px/Regular",colorName:"secondary",children:r}):null]}),o,(0,u.jsx)("div",{style:m.actions,children:null==d?void 0:d.map(((e,t)=>(0,u.jsx)(p,{...e},`marketplace-modal-action-${t}`)))})]})}function p(e){const t=(0,a().yK)((()=>({plainButton:{justifyContent:"center"},actionError:{textAlign:"center"}})),[]);return(0,u.jsxs)(u.Fragment,{children:[(()=>{switch(e.type){case"primary":return(0,u.jsx)(s().Z,{isLarge:!0,onClick:e.onClick,disabled:e.isDisabled,isLoading:e.isLoading,children:e.text});case"outline":return(0,u.jsx)(o().Z,{isLarge:!0,onClick:e.onClick,children:(0,u.jsx)(l().q,{styleName:"UIRegular-14px/Medium",children:e.text})});case"plain":return(0,u.jsx)(d().Z,{isLarge:!0,onClick:e.onClick,isBlue:e.isBlue,isGray:!e.isBlue,style:t.plainButton,children:(0,u.jsx)(l().q,{styleName:"UIRegular-14px/Medium",children:e.text})});default:(0,r().t1)(e)}})(),e.error&&(0,u.jsx)(l().q,{styleName:"UIRegular-14px/Regular",colorName:"redTertiary",customStyles:t.actionError,children:e.error})]})}},873379:(e,t,n)=>{n.r(t),n.d(t,{BuyerProfileModal:()=>Te,BuyerProfileRefundModal:()=>lt});var a=n(667294),r=()=>n(219727),i=()=>n(142735),l=()=>n(846550),o=()=>n(788860),d=()=>n(921981),s=()=>n(594546),u=()=>n(749826),c=()=>n(389292),p=()=>n(602422),m=()=>n(883051),f=()=>n(848297),y=()=>n(603692),g=n(785893);function h(){const e=(0,l().yK)((e=>({headerContainer:{height:52,width:"100%",display:"flex",alignItems:"center",gap:10},headerIconContainer:{width:32,height:32,borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center",padding:6,background:"light"===e.mode?"rgba(241, 241, 239, 1)":"rgba(43, 43, 43, 1)"},headerText:{fontSize:24,color:e.text.primary,fontWeight:590}})),[]);return(0,g.jsxs)("div",{style:e.headerContainer,children:[(0,g.jsx)("div",{style:e.headerIconContainer,children:(0,g.jsx)(y().y,{iconGroup:f().V,variantName:"default"})}),(0,g.jsx)("span",{style:e.headerText,children:(0,g.jsx)(o()._H,{id:"inApp.marketplace.buyerProfile.dialog.header.purchased",defaultMessage:"Purchased"})})]})}var x=()=>n(801812),b=()=>n(876822),v=()=>n(714230),j=()=>n(323416);function C(){const e=(0,l().yK)((()=>({description:{maxWidth:218}})),[]);return(0,g.jsx)(j().d,{imageSrc:v().Z.images.templates.darkBubblePng,title:(0,g.jsx)(o()._H,{id:"inApp.marketplace.buyerProfile.emptyState.header",defaultMessage:"No products"}),description:(0,g.jsx)(o()._H,{id:"inApp.marketplace.buyerProfile.emptyState.subheader",defaultMessage:"Products purchased from the Template gallery will appear here"}),customStyles:e})}n(670560),n(241792);var M=()=>n(793331),R=()=>n(646574),w=()=>n(827282);const P=(0,w().CZ)("ellipsis",{default:{loader:()=>n.e(59981).then(n.bind(n,359981))},small:{loader:()=>n.e(68238).then(n.bind(n,768238))},mini:{loader:()=>n.e(7428).then(n.bind(n,407428))},large:{loader:()=>n.e(22453).then(n.bind(n,722453))}});var k=()=>n(154186),_=()=>n(661641),N=()=>n(842574),B=()=>n(981583),I=()=>n(378907),S=()=>n(520849),T=()=>n(60090),q=()=>n(786),Z=()=>n(730120),D=()=>n(473759),L=()=>n(779247),A=()=>n(366767),U=()=>n(562266),K=()=>n(193756),H=()=>n(752127),O=()=>n(827973),W=()=>n(448419),G=()=>n(198829),$=()=>n(255577),V=()=>n(388284),E=()=>n(654133),Y=()=>n(352230),z=()=>n(581205),F=()=>n(826955),X=()=>n(791642);function J(e){const t=e.id,n=e.refund_id;return(0,i().VK)((()=>{const e=m().Z.getState().acquisitionRefundMap;return(null==e?void 0:e[t])||n}),[t,n])}var Q=()=>n(401268),ee=()=>n(766072),te=()=>n(491190),ne=()=>n(679733);function ae(e){let{acquisition:t,...n}=e;return(0,g.jsx)(ne().Y,{acquisition:t,as:e=>(0,g.jsx)(re,{...e,menuListItemProps:n}),source:"buyerProfile"})}function re(e){let{children:t,disabled:n,onClick:a,menuListItemProps:r}=e;return(0,g.jsx)(O().Z,{...r,icon:(0,g.jsx)(y().y,{iconGroup:ee().X,variantName:"default",colorName:n?"tertiary":"primary"}),title:(0,g.jsx)(_().q,{styleName:"UIRegular-14px/Regular",colorName:n?"tertiary":"primary",children:n?(0,g.jsx)(o()._H,{id:"marketplace.buyerProfile.reviews.actions.leaveReview.disabled",defaultMessage:"Review submitted"}):t}),onClick:a,disabled:n})}function ie(e){const t=(0,r().O7)(),n=le(),a=(0,o().YB)(),i=t.device.isMobile;return(0,g.jsx)(W().ZP,{alignmentToOrigin:W().vR.End,popupType:i?W().Z4.SlideUp:W().Z4.Popup,renderOrigin:r=>(0,g.jsx)(k().Z,{...r,style:n.ellipsisButton,ariaLabel:a.formatMessage({id:"inApp.marketplace.buyerProfile.listing.actionButton",defaultMessage:"action menu popup button"}),onClick:()=>{r.onClick(),(0,s().j)({environment:t,event:{eventName:"buyer_profile_dropdown_click",eventProperties:{product_id:e.templateId,product_type:"template"}}}),u().default.logEvent("buyer_profile_dropdown_click")},children:(0,g.jsx)(y().y,{...r,iconGroup:P,variantName:"default",colorName:"secondary"})}),render:()=>(0,g.jsx)(oe,{...e})})}function le(){return(0,l().yK)((e=>({menuList:{minWidth:265},mailIcon:{width:20,height:20,fill:e.icon.primary},ellipsisButton:{borderRadius:4},viewTemplateMenuItemButton:{marginRight:8},viewTemplateMenuItemContainer:{display:"flex",alignItems:"center",justifyContent:"space-between"}})),[])}function oe(e){var t;const n=(0,r().O7)(),a=le(),{creator:l,slug:d,templateId:u,acquisition:m}=e,f=Boolean(null==l||null===(t=l.attributes)||void 0===t?void 0:t.contactEmail),h=J(m),{isRefundButtonDisabled:x,refundButtonLabel:b,renderCancelButton:v,renderRefundButton:j}=function(e){var t;const{environment:n,acquisition:a,refundId:r}=e,l=(0,i().VK)((()=>{var e;const t=a.total_price;return!(!t||0===t||"string"==typeof t&&0===parseInt(t,10))&&(a.acquirer_id===(null===(e=n.currentUser)||void 0===e?void 0:e.id)&&"refunded"!==a.status)}),[a,null===(t=n.currentUser)||void 0===t?void 0:t.id]),{isRefundButtonDisabled:d,refundButtonLabel:s,renderCancelButton:u}=(0,i().VK)((()=>{if(!l)return{isRefundButtonDisabled:!0,refundButtonLabel:void 0,renderCancelButton:!1};try{const e=a.acquired_time;if(Z().ou.now().diff(Z().ou.fromMillis("string"==typeof e?parseInt(e):e),"days").days>14)return{isRefundButtonDisabled:!0,refundButtonLabel:(0,g.jsx)(o()._H,{id:"inApp.marketplace.buyerProfile.listing.actionButtonItem.refund.disabled",defaultMessage:"Refunds are only available for purchases made within the last 14 days."},"tooltip-label"),renderCancelButton:!1}}catch(e){return{isRefundButtonDisabled:!1,refundButtonLabel:void 0,renderCancelButton:!1}}if(r){const e=new(F().Gv)(n,{table:K().kk,id:r}).getStatus();if((0,U().V)(e))return{isRefundButtonDisabled:!0,refundButtonLabel:(0,g.jsx)(o()._H,{id:"inApp.marketplace.buyerProfile.listing.actionButtonItem.refund.activeRequestDisabled",defaultMessage:"There is an active refund request."},"tooltip-label"),renderCancelButton:!0}}return{isRefundButtonDisabled:!1,refundButtonLabel:void 0,renderCancelButton:!1}}),[l,a,n,r]);return{renderRefundButton:l,isRefundButtonDisabled:d,refundButtonLabel:s,renderCancelButton:u}}({environment:n,acquisition:m,refundId:h}),C=(0,p().d)(),{showReviewButton:M,acquisition:R}=function(e){var t,n;const[a]=(0,te().b)({productId:e}),r=null===(t=a.value)||void 0===t?void 0:t.acquisition,i=Boolean(null===(n=a.value)||void 0===n?void 0:n.isEligibleToReview);return r?{showReviewButton:i,acquisition:r}:{showReviewButton:!1}}(u),w=[],P=[];if(M&&P.push({key:"leaveReview",action:()=>{},render:e=>(0,g.jsx)(ae,{acquisition:R,...e})}),f){const e={key:"contactCreator",action:()=>{},render:e=>(0,g.jsx)(O().Z,{...e,icon:(0,g.jsx)("span",{children:(0,z().h)(a.mailIcon)}),title:(0,g.jsx)(_().q,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,g.jsx)(o()._H,{id:"inApp.marketplace.buyerProfile.listing.actionButtonItem.contactCreator",defaultMessage:"Contact creator"})}),onClick:()=>{var e;(0,s().j)({environment:n,event:{eventName:"buyer_profile_menu_item_click",eventProperties:{menu_item:"contactCreator"}}}),null!=l&&null!==(e=l.attributes)&&void 0!==e&&e.contactEmail&&H().D({environment:n,url:`mailto:${null==l?void 0:l.attributes.contactEmail}`})}})};P.push(e)}if(j){const e={key:"refundAction",action:()=>{},render:e=>b?(0,g.jsx)(E().Z,{renderTooltip:()=>b,render:t=>(0,g.jsx)(O().Z,{...e,...t,icon:(0,g.jsx)(y().y,{iconGroup:D().v,variantName:"default"}),disabledFeedback:!0,title:(0,g.jsx)(_().q,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,g.jsx)(o()._H,{id:"inApp.marketplace.buyerProfile.listing.actionButtonItem.refund",defaultMessage:"Request a refund"})}),disabled:x,onClick:()=>{var e;(0,s().j)({environment:n,event:{eventName:"buyer_profile_menu_item_click",eventProperties:{menu_item:"refundAction"}}}),Q().default.openModal({stage:"initial",acquisitionId:m.id,productName:null===(e=m.product)||void 0===e?void 0:e.name})}})}):(0,g.jsx)(O().Z,{...e,icon:(0,g.jsx)(y().y,{iconGroup:D().v,variantName:"default"}),title:(0,g.jsx)(_().q,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,g.jsx)(o()._H,{id:"inApp.marketplace.buyerProfile.listing.actionButtonItem.refund",defaultMessage:"Request a refund"})}),disabled:x,disabledFeedback:!0,onClick:()=>{var e;(0,s().j)({environment:n,event:{eventName:"buyer_profile_menu_item_click",eventProperties:{menu_item:"refundAction"}}}),Q().default.openModal({stage:"initial",acquisitionId:m.id,productName:null===(e=m.product)||void 0===e?void 0:e.name})}})};P.push(e)}if(v&&h){const e={key:"cancelRefundAction",action:()=>{},render:e=>(0,g.jsx)(O().Z,{...e,icon:(0,g.jsx)(y().y,{iconGroup:A().$,variantName:"default"}),title:(0,g.jsx)(_().q,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,g.jsx)(o()._H,{id:"inApp.marketplace.buyerProfile.listing.actionButtonItem.cancelRefund",defaultMessage:"Cancel refund"})}),onClick:()=>{(0,s().j)({environment:n,event:{eventName:"buyer_profile_menu_item_click",eventProperties:{menu_item:"cancelRefundAction"}}}),Q().default.openModal({stage:"cancel",refundId:h,acquisitionId:m.id})}})};P.push(e)}if(0!==P.length){const e={key:"userAction",render:e=>(0,g.jsx)(V().Z,{...e}),items:P};w.push(e)}const k={key:"viewTemplate",render:e=>(0,g.jsx)(V().Z,{...e,topBorder:0!==P.length}),items:[{key:"viewTemplate",action:()=>{},render:e=>(0,g.jsx)(O().Z,{...e,onClick:()=>{(0,s().j)({environment:n,event:{eventName:"buyer_profile_menu_item_click",eventProperties:{menu_item:"viewTemplate"}}}),c().dx({environment:n}),X().zh({environment:n,slug:d,openInNewTab:!0,makeTabActive:!0,route:C,creator:l})},buttonStyle:a.viewTemplateMenuItemButton,title:(0,g.jsxs)("div",{style:a.viewTemplateMenuItemContainer,children:[(0,g.jsx)(_().q,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,g.jsx)(o()._H,{id:"inApp.marketplace.buyerProfile.listing.actionButtonItem.viewTemplate",defaultMessage:"View template in gallery"})}),(0,g.jsx)(y().y,{iconGroup:L().T,variantName:"small",colorName:"secondary"})]})})}]};return w.push(k),(0,g.jsx)(G().Z,{menuType:Y().o.Popup,children:(0,g.jsx)($().Z,{type:$().i.Vertical,initialFocus:void 0,sections:w,style:a.menuList})})}const de=(0,w().CZ)("arrowLeft",{default:{loader:()=>n.e(80386).then(n.bind(n,780386))},small:{loader:()=>n.e(59001).then(n.bind(n,359001))},mini:{loader:()=>n.e(10897).then(n.bind(n,610897))},large:{loader:()=>n.e(36951).then(n.bind(n,136951))}});var se=()=>n(202454);function ue(e){const{onPreviousClick:t,onNextClick:n,currentPage:a,numPages:r,hasPagination:i}=e,d=1===a,s=a===r,u=function(e){const{hasPagination:t}=e;return(0,l().yK)((()=>({container:{width:"100%",display:"flex",alignItems:"center",gap:8,visibility:t?"visible":"hidden"},button:{display:"flex",height:20,width:20,justifyContent:"center",alignItems:"center",borderRadius:4},paginatedText:{display:"flex",alignItems:"center",gap:4}})),[t])}({hasPagination:i}),c=(0,o().YB)();return(0,g.jsxs)("div",{style:u.container,children:[(0,g.jsx)(k().Z,{onClick:t,disabled:d,style:u.button,ariaLabel:c.formatMessage({id:"inApp.marketplace.buyerProfile.pagination.previousButton",defaultMessage:"previous page button"}),children:(0,g.jsx)(y().y,{iconGroup:de,variantName:"large",colorName:d?"tertiary":"primary"})}),(0,g.jsx)(_().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",customStyles:u.paginatedText,children:(0,g.jsx)(o()._H,{id:"inApp.marketplace.buyerProfile.pagination.pageLabel",defaultMessage:"<bold>{currentPage}</bold> of {numPages}",values:{bold:e=>(0,g.jsx)(_().q,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:e}),currentPage:a,numPages:r}})}),(0,g.jsx)(k().Z,{onClick:n,disabled:s,style:u.button,ariaLabel:c.formatMessage({id:"inApp.marketplace.buyerProfile.pagination.nextButton",defaultMessage:"next page button"}),children:(0,g.jsx)(y().y,{iconGroup:se().g,variantName:"default",colorName:s?"tertiary":"primary"})})]})}var ce=()=>n(796562);const pe=(0,w().CZ)("arrowUp",{default:{loader:()=>n.e(29821).then(n.bind(n,129821))},small:{loader:()=>n.e(27627).then(n.bind(n,627627))},mini:{loader:()=>n.e(51547).then(n.bind(n,551547))},large:{loader:()=>n.e(49789).then(n.bind(n,149789))}});function me(e){const t=(0,l().yK)((()=>({headerButton:{width:"fit-content",height:24,display:"flex",alignItems:"center",borderRadius:4,gap:2,padding:"0px 6px"}})),[]),{label:n,columnKey:a,onClick:r,orderByConfig:i,disabled:o}=e,{key:d,orderBy:s}=i;return(0,g.jsxs)(k().Z,{style:t.headerButton,disabled:o,onClick:r,children:[(0,g.jsx)(_().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:n}),d===a&&(0,g.jsx)(g.Fragment,{children:"desc"===s?(0,g.jsx)(y().y,{iconGroup:ce().l,variantName:"small",colorName:"secondary"}):(0,g.jsx)(y().y,{iconGroup:pe,variantName:"small",colorName:"secondary"})})]})}var fe=()=>n(989478);function ye(e){const t=(0,r().O7)(),{userId:n,disabled:a}=e,o=(0,l().yK)((()=>({addedByCell:{display:"flex",alignItems:"center",gap:4},disabled:{opacity:.5}})),[]),d=(0,i().VK)((()=>{const e=new(F().U6)(t,{table:fe().KJ,id:n});return e.isDefined()&&e.isReady()?{email:e.getEmail(),profilePhoto:e.getProfilePhoto()??"",name:e.getName()}:null}),[n,t]);return d?(0,g.jsxs)("div",{style:{...o.addedByCell,...a?o.disabled:{}},children:[(0,g.jsx)(B().Z,{size:20,avatar:{email:d.email,avatarUrl:d.profilePhoto,name:d.name}}),(0,g.jsx)(_().q,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:d.name})]}):null}var ge=()=>n(696459);var he=()=>n(967092),xe=()=>n(644248),be=()=>n(998901),ve=()=>n(104088),je=()=>n(473147),Ce=()=>n(832069),Me=()=>n(532720),Re=()=>n(541283);function we(e){const{acquisitionStatus:t,refundData:n}=e,a=(0,l().yK)((e=>({requestedContainer:{...Pe,backgroundColor:e.fill.yellowSecondary},cancelledContainer:{...Pe,backgroundColor:e.fill.redPrimary},deniedContainer:{...Pe,backgroundColor:e.fill.grayPrimary},refundedContainer:{...Pe,backgroundColor:e.fill.blueSecondary}})),[]);if("refunded"===t||n&&"successful"===n.status)return(0,g.jsx)(E().Z,{placement:be().Placement.Bottom,render:e=>(0,g.jsx)("div",{...e,children:(0,g.jsx)(Re().D,{overrideStyles:a.refundedContainer,children:(0,g.jsx)(_().q,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,g.jsx)(o()._H,{id:"marketplace.buyerProfile.templatePreview.refundedStatus",defaultMessage:"Refunded"})})})}),renderTooltip:()=>(0,g.jsxs)("div",{children:[(0,g.jsx)(_().q,{styleName:"UIRegular-14px/Regular",colorName:"contrastPrimary",children:(0,g.jsx)(o()._H,{id:"marketplace.buyerProfile.templatePreview.refundApprovedTooltip",defaultMessage:"Your return was approved and processed, the template has been deleted from your workspace."})}),(0,g.jsx)(_().q,{styleName:"UIRegular-14px/Regular",colorName:"contrastSecondary",children:(0,g.jsx)(o()._H,{id:"marketplace.buyerProfile.templatePreview.refundProcessingTimeTooltip",defaultMessage:" It might take up to 10 days for the funds to appear on your account"})})]})});if((0,U().V)(null==n?void 0:n.status))return(0,g.jsx)(E().Z,{placement:be().Placement.Bottom,render:e=>(0,g.jsx)("div",{...e,children:(0,g.jsx)(Re().D,{overrideStyles:a.requestedContainer,children:(0,g.jsx)(_().q,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,g.jsx)(o()._H,{id:"marketplace.buyerProfile.templatePreview.refundRequestedStatus",defaultMessage:"Refund requested"})})})}),renderTooltip:()=>(0,g.jsx)("div",{children:(0,g.jsx)(_().q,{styleName:"UIRegular-14px/Regular",colorName:"contrastPrimary",children:(0,g.jsx)(o()._H,{id:"marketplace.buyerProfile.templatePreview.refundRequestDateTooltip",defaultMessage:"Refund requested on {date}",values:{date:Z().ou.fromMillis((null==n?void 0:n.created_time)??0).toLocaleString(Z().ou.DATE_MED)}})})})});return Z().ou.now().diff(Z().ou.fromMillis((null==n?void 0:n.created_time)??0),"days").days>10?null:"denied"===(null==n?void 0:n.status)?(0,g.jsx)(E().Z,{placement:be().Placement.Bottom,render:e=>(0,g.jsx)("div",{...e,children:(0,g.jsx)(Re().D,{overrideStyles:a.deniedContainer,children:(0,g.jsx)(_().q,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,g.jsx)(o()._H,{id:"marketplace.buyerProfile.templatePreview.refundDeniedStatus",defaultMessage:"Refund denied"})})})}),renderTooltip:()=>(0,g.jsx)("div",{children:(0,g.jsx)(_().q,{styleName:"UIRegular-14px/Regular",colorName:"contrastPrimary",children:(0,g.jsx)(o()._H,{id:"marketplace.buyerProfile.templatePreview.refundDeniedTooltip",defaultMessage:"Please check your email to learn more about the status of your refund"})})})}):"cancelled"===(null==n?void 0:n.status)?(0,g.jsx)(E().Z,{placement:be().Placement.Bottom,render:e=>(0,g.jsx)("div",{...e,children:(0,g.jsx)(Re().D,{overrideStyles:a.cancelledContainer,children:(0,g.jsx)(_().q,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:(0,g.jsx)(o()._H,{id:"marketplace.buyerProfile.templatePreview.refundCancelledStatus",defaultMessage:"Refund cancelled"})})})}),renderTooltip:()=>(0,g.jsx)("div",{children:(0,g.jsx)(_().q,{styleName:"UIRegular-14px/Regular",colorName:"contrastPrimary",children:(0,g.jsx)(o()._H,{id:"marketplace.buyerProfile.templatePreview.refundCancelledTooltip",defaultMessage:"Please check your email to learn more about the status of your refund"})})})}):null}const Pe={padding:"2px 8px",borderRadius:12,cursor:"default"};function ke(e){const{template:t,templateListing:n}=e,a=(0,r().O7)(),o=(0,l().yK)((()=>({popoverContainer:{minWidth:256,padding:8,borderRadius:8},title:{paddingTop:8,paddingBottom:0},popoverButton:{width:"fit-content",height:24,display:"flex",alignItems:"center",borderRadius:4,gap:2,padding:"0px 6px"},container:{display:"flex",gap:4}})),[]),[d,m]=(0,xe().C)(),f=n.status,y=J(n),h=(0,i().VK)((()=>{if(!y)return null;const e=new(F().Gv)(a,{id:y,table:K().kk});return{status:e.getStatus(),created_time:e.getCreatedTime()}}),[a,y]),x=(0,p().d)();return(0,g.jsxs)("div",{style:o.container,children:[(0,g.jsx)(he().ZP,{open:m,popupType:ve().k.Popup,disableMouseCapture:!0,disableContentScroll:!0,origin:(0,g.jsx)(k().Z,{style:o.popoverButton,ref:d,href:(0,je().aD)(t.slug,x,t.creator),onClick:e=>{(0,s().j)({environment:a,event:{eventName:"buyer_profile_product_click",eventProperties:{product_id:t.id,product_type:"template"}}}),u().default.logEvent("buyer_profile_product_click"),e.ctrlKey||e.metaKey||c().dx({environment:a})},children:(0,g.jsx)(_().q,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:t.name})}),originGap:6,alignmentToOrigin:be().Alignment.Start,placementToOrigin:be().Placement.Bottom,render:()=>(0,g.jsx)(Ce().vS,{isDisabled:!0,template:t,imageBorderRadius:6,titleStyles:o.title,customTitle:(0,g.jsx)(_e,{template:t})}),style:o.popoverContainer}),h||"refunded"===f?(0,g.jsx)(we,{refundData:h,acquisitionStatus:f}):null]})}function _e(e){const{template:t}=e,n=(0,l().yK)((()=>({templateTitleContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginRight:-10,marginLeft:-10},templateTitleMetadata:{display:"flex",alignItems:"center",gap:"6px"}})),[]),a=(0,T().kl)(t.creator);return(0,g.jsxs)("div",{style:n.templateTitleContainer,children:[(0,g.jsxs)("div",{style:n.templateTitleMetadata,children:[(0,g.jsx)(B().Z,{size:20,avatar:a}),(0,g.jsx)(Ce().vR,{template:t})]}),(0,g.jsx)(Me().J,{price:t.price??0})]})}var Ne=()=>n(513670);const Be="―";function Ie(e){const{listings:t,isLoading:n,count:d}=e,m=(0,r().O7)(),f=(0,o().YB)(),h=(0,p().d)(),[x,v]=(0,a.useState)({orderBy:"desc",key:"transactionDate"}),j=(0,a.useCallback)((e=>{v((t=>t.key===e?{...t,orderBy:"asc"===t.orderBy?"desc":"asc"}:{key:e,orderBy:"desc"}))}),[]),{hasMoreThanOneSpaceMember:C}=function(){const{currentSpaceStore:e}=(0,i().VK)((()=>b().default.state),[]),t=(0,i().VK)((()=>null==e?void 0:e.getMemberCountFromPublicSpaceData()),[e]);return{hasMoreThanOneSpaceMember:Ne().hj(t)&&t>1}}(),w=function(e){const{hasListings:t,isLoading:n}=e;return(0,l().yK)((e=>({tableContainer:{width:"100%",height:t||n?"100%":void 0,display:"flex",flexDirection:"column",position:"relative",gap:16},row:{height:58},headerRow:{borderBottom:`4px solid ${e.regularDividerColor}`},columnButton:{width:"fit-content",height:24,display:"flex",alignItems:"center",borderRadius:4,gap:2,padding:"0px 6px"},createdByButton:{width:"fit-content",height:34,display:"flex",alignItems:"center",borderRadius:4,gap:2,padding:"0px 6px 0px 4px"},textCell:{padding:"0px 6px"},createdByCell:{display:"flex",alignItems:"center",gap:7},scroller:{overflow:"unset",minHeight:t||n?570:void 0},disabled:{opacity:.5}})),[t,n])}({hasListings:!n&&0!==t.length,isLoading:n}),Z=(0,a.useMemo)((()=>function(e){const{onClick:t,orderByConfig:n,hasMoreThanOneSpaceMember:a}=e,r=[{key:"product",header:(0,g.jsx)(me,{label:(0,g.jsx)(o()._H,{id:"inApp.marketplace.buyerProfile.table.column.product",defaultMessage:"Product"}),onClick:()=>t("product"),orderByConfig:n,columnKey:"product"}),style:{width:"47%",minWidth:a?390:520}},{key:"createdBy",header:(0,g.jsx)(me,{label:(0,g.jsx)(o()._H,{id:"inApp.marketplace.buyerProfile.table.column.createdBy",defaultMessage:"Created by"}),onClick:()=>t("createdBy"),orderByConfig:n,columnKey:"createdBy"}),style:{width:"20%",minWidth:200}},{key:"price",header:(0,g.jsx)(me,{label:(0,g.jsx)(o()._H,{id:"inApp.marketplace.buyerProfile.table.column.price",defaultMessage:"Price"}),onClick:()=>t("price"),orderByConfig:n,columnKey:"price"}),style:{width:"9%",minWidth:120,maxWidth:"9%"}}];a&&r.push({key:"addedBy",header:(0,g.jsx)(me,{label:(0,g.jsx)(o()._H,{id:"inApp.marketplace.buyerProfile.table.column.addedBy",defaultMessage:"Added by"}),disabled:!0,orderByConfig:n,columnKey:"addedBy"}),style:{width:"11%",minWidth:120,maxWidth:"11%"}});return r.push({key:"transactionDate",header:(0,g.jsx)(me,{label:(0,g.jsx)(o()._H,{id:"inApp.marketplace.buyerProfile.table.column.transactionDate",defaultMessage:"Transaction date"}),onClick:()=>t("transactionDate"),orderByConfig:n,columnKey:"transactionDate"}),style:{width:"11%",minWidth:140,maxWidth:"11%"}},{key:"threeDot",header:null,style:{width:"2%",maxWidth:"2%"}}),r}({hasMoreThanOneSpaceMember:C,orderByConfig:x,onClick:j})),[C,x,j]),D=(0,a.useMemo)((()=>function(e){const{hasMoreThanOneSpaceMember:t}=e;return[...Array(c().bY)].map(((e,n)=>{const a=[(0,g.jsx)(q().e,{width:224,height:14},`loadingProduct-${n}-1`),(0,g.jsx)(q().e,{width:119,height:14},`loadingCreatedBy-${n}-2`),(0,g.jsx)(q().e,{width:52,height:14},`loadingPrice-${n}-3`)];return t&&a.push((0,g.jsx)(q().e,{width:87,height:14},`loadingAddedBy-${n}-4`)),a.push((0,g.jsx)(q().e,{width:87,height:14},`loadingTransactionDate-${n}-5`),(0,g.jsx)(y().y,{iconGroup:P,variantName:"default",colorName:"secondary"},`loadingAction-${n}-6`)),{key:`loadingProductRow-${n}`,columns:a}}))}({hasMoreThanOneSpaceMember:C})),[C]),L=(0,a.useMemo)((()=>function(e,t){const{key:n,orderBy:a}=t;switch(n){case"product":return e.sort(((e,t)=>e.product&&t.product?"asc"===a?e.product.name.localeCompare(t.product.name):t.product.name.localeCompare(e.product.name):t.created_time-e.created_time));case"createdBy":return e.sort(((e,t)=>e.product&&t.product&&e.product.creator&&t.product.creator?"asc"===a?e.product.creator.name.localeCompare(t.product.creator.name):t.product.creator.name.localeCompare(e.product.creator.name):t.created_time-e.created_time));case"price":return e.sort(((e,t)=>{const n=e.total_price??0,r=t.total_price??0;return"asc"===a?n-r||e.product_price-t.product_price:r-n||t.product_price-e.product_price}));case"transactionDate":return e.sort(((e,t)=>"asc"===a?e.created_time-t.created_time:t.created_time-e.created_time));case"addedBy":return e;default:(0,ge().t1)(n)}}(t,x)),[t,x]),{itemsToDisplay:A,hasPagination:U,handlePreviousClick:K,handleNextClick:H,page:O,numPages:W}=function(e){const{items:t,count:n,numItemsPerPage:r}=e,[i,l]=(0,a.useState)(1),o=n<=r?0:Math.ceil(n/r),d=o>0,s=t.slice((i-1)*r,i*r),u=(0,a.useCallback)((()=>{1!==i&&l((e=>e-1))}),[i]),c=(0,a.useCallback)((()=>{i!==o&&l((e=>e+1))}),[i,o]);return{page:i,numPages:o,itemsToDisplay:s,hasPagination:d,handlePreviousClick:u,handleNextClick:c}}({items:L,count:d,numItemsPerPage:c().bY}),G=(0,a.useMemo)((()=>{const e=[];for(const[a,r]of A.entries()){const i=r.product,l=[];if(i){var t,n;const e=(0,T().kl)(i.creator);l.push((0,g.jsx)(ke,{template:i,templateListing:r},`template-row${a}-column1-name`),(0,g.jsxs)(k().Z,{style:{...w.createdByButton,...w.createdByCell},href:(0,T().qL)((null===(t=i.creator)||void 0===t?void 0:t.username)??"",h),onClick:e=>{var t;(0,s().j)({environment:m,event:{eventName:"buyer_profile_creator_click",eventProperties:{product_id:r.product_id,product_type:r.product_table,creator_name:(null===(t=i.creator)||void 0===t?void 0:t.name)??""}}}),u().default.logEvent("buyer_profile_creator_click"),e.ctrlKey||e.metaKey||c().dx({environment:m})},children:[(0,g.jsx)(B().Z,{size:20,avatar:e}),(0,g.jsx)(_().q,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:null===(n=i.creator)||void 0===n?void 0:n.name})]},`template-row${a}-column2-createdBy`),(0,g.jsx)(_().q,{styleName:"UIRegular-14px/Regular",colorName:"primary",customStyles:{...w.textCell,...i?{}:w.disabled},children:0===r.product_price?(0,g.jsx)(o()._H,{id:"inApp.marketplace.buyerProfile.templateListing.productPrice.free",defaultMessage:"Free"}):(0,g.jsx)(M().W,{cost:{amount:null!==r.total_price&&void 0!==r.total_price?r.total_price:r.product_price,currencyCode:"USD"},intl:f,trailingZeroDisplay:"auto"})},`template-row${a}-column3-price`))}else l.push((0,g.jsx)(_().q,{styleName:"UIRegular-14px/Regular",colorName:"primary",style:{...w.textCell,...w.disabled},children:(0,g.jsx)(o()._H,{id:"inApp.marketplace.buyerProfile.table.column.deletedTemplate",defaultMessage:"Deleted template"})},`template-row${a}-column1-deletedTemplate`),(0,g.jsx)(_().q,{styleName:"UIRegular-14px/Regular",colorName:"primary",style:{...w.createdByButton,...w.createdByCell,...w.disabled},children:Be},`template-row${a}-column2-deletedTemplate`));C&&l.push((0,g.jsx)(ye,{userId:r.acquirer_id,disabled:!i},`template-row${a}-column4-addedBy`)),l.push((0,g.jsx)(_().q,{styleName:"UIRegular-14px/Regular",colorName:"primary",customStyles:{...w.textCell,...i?{}:w.disabled},children:(0,R().Yx)(Number(r.acquired_time),"medium",f.locale)},`template-row${a}-column5-transactionDate`)),i&&l.push((0,g.jsx)(ie,{creator:i.creator,slug:i.slug,templateId:i.id,acquisition:r},`template-row${a}-column6-actionMenu`)),e.push({key:`templateProductRow-${a}`,columns:l})}return e}),[f,A,w,C,m,h]);return(0,g.jsxs)("div",{style:w.tableContainer,children:[(0,g.jsx)(N().Z,{type:S().Z.X,style:w.scroller,children:(0,g.jsx)(I().Z,{columns:Z,rows:n?D:G,rowStyle:w.row,hideTopBorderForHeader:!0})}),(0,g.jsx)(ue,{currentPage:O,numPages:W,onPreviousClick:K,onNextClick:H,hasPagination:U&&!n})]})}function Se(){var e,t;const n=(0,l().yK)((()=>({listingsContainer:{width:"100%",height:"inherit",display:"flex",flexDirection:"column",position:"relative",gap:8},emptyStateContainer:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}})),[]),a=(0,r().O7)(),{currentSpaceStore:o}=(0,i().VK)((()=>b().default.state),[]),[d]=(0,x().r5)((async()=>{if(!o)return c().rp;return await c().q0({environment:a,spaceId:o.id,includeProduct:!0,includeCount:!0,includeRefunds:!0,productTable:"template"})}),[a,o]),s="pending"!==d.status&&"idle"!==d.status,u=(null===(e=d.value)||void 0===e?void 0:e.listings)??[],p=(null===(t=d.value)||void 0===t?void 0:t.count)??0;return(0,g.jsxs)("div",{style:n.listingsContainer,children:[(0,g.jsx)(Ie,{listings:u,count:p,isLoading:!s}),s&&0===u.length&&(0,g.jsx)("div",{style:n.emptyStateContainer,children:(0,g.jsx)(C,{})})]})}function Te(){const e=(0,o().YB)(),t=(0,p().d)(),n=(0,r().O7)(),l=(0,i().VK)((()=>m().Z.state.isModalOpen),[]),f=(0,i().VK)((()=>m().Z.state.openedTimestamp),[]);return(0,a.useEffect)((()=>((0,s().j)({environment:n,event:{eventName:"buyer_profile_visit",eventProperties:{page_visited_from:t.pageType??"home"}}}),u().default.logEvent("buyer_profile_visit"),()=>{void 0!==f&&((0,s().j)({environment:n,event:{eventName:"buyer_profile_close",eventProperties:{page_closed_from:t.pageType??"home",opened_timestamp:f}}}),u().default.logEvent("buyer_profile_close"))})),[n,f,t.pageType]),(0,g.jsx)(d().c,{ariaLabel:e.formatMessage({id:"inApp.marketplace.buyerProfile.dialogLabel",defaultMessage:"Buyer profile"}),isOpen:l,onDismiss:()=>{c().dx({environment:n})},showCloseIcon:!0,areaConstraint:{width:{type:"min",length:1150},height:{type:"max",length:720}},render:()=>(0,g.jsx)(qe,{})})}function qe(){const e=(0,l().yK)((()=>({modalContainer:{height:720,display:"flex",padding:"28px 32px 32px 32px",flexDirection:"column",gap:20,borderRadius:12,position:"relative",overflowY:"auto"}})),[]);return(0,g.jsxs)("div",{style:e.modalContainer,children:[(0,g.jsx)(h,{}),(0,g.jsx)(Se,{})]})}const Ze=(0,w().CZ)("exclamationMarkCircleArrow",{default:{loader:()=>n.e(53324).then(n.bind(n,53324))},small:{loader:()=>n.e(72).then(n.bind(n,700072))},mini:{loader:()=>n.e(11193).then(n.bind(n,311193))},micro:{loader:()=>n.e(66725).then(n.bind(n,966725))},large:{loader:()=>n.e(74773).then(n.bind(n,974773))},max:{loader:()=>n.e(74773).then(n.bind(n,974773))}});var De=()=>n(824462);var Le=()=>n(997048);function Ae(){const e=(0,o().YB)(),t=(0,r().O7)(),[n,i]=(0,a.useState)(!1);return(0,g.jsx)(Le().$,{width:360,icon:(0,g.jsx)(y().y,{colorName:"secondary",variantName:"large",overrideSize:()=>36,iconGroup:Ze}),title:e.formatMessage(Ue.title),subTitle:e.formatMessage(Ue.subtitle),actions:[{type:"outline",text:e.formatMessage(Ue.submit),onClick:async()=>{const{refundId:e}=Q().default.state;if(!e)return;const n=await async function(e){const{environment:t,refundId:n}=e,a=await De().callApi({eventName:"updateMarketplaceRefund",environment:t,data:{refundId:n,status:"cancelled"},headers:{}}),r=a.type;return"success"===r||"failed"===r?a:void(0,ge().t1)(r)}({environment:t,refundId:e});"success"===n.type?Q().default.closeModal():i(!0)},error:n?e.formatMessage(Ue.error):null},{type:"plain",text:e.formatMessage(Ue.cancel),onClick:()=>Q().default.closeModal()}]})}const Ue=(0,o().vU)({title:{id:"buyerProfile.refundModal.cancel.title",defaultMessage:"Cancel refund?"},subtitle:{id:"buyerProfile.refundModal.cancel.subtitle",defaultMessage:"We will notify the creator that you’ve changed your mind. Your template will be kept as is."},cancel:{id:"buyerProfile.refundModal.cancel",defaultMessage:"Cancel"},submit:{id:"buyerProfile.refundModal.cancel.submit",defaultMessage:"Yes, cancel my refund"},error:{id:"buyerProfile.refundModal.cancel.error",defaultMessage:"There was an issue cancelling your refund."}}),Ke=(0,w().CZ)("arrowBranch",{default:{loader:()=>n.e(50250).then(n.bind(n,350250))},small:{loader:()=>n.e(99600).then(n.bind(n,99600))},mini:{loader:()=>n.e(25560).then(n.bind(n,625560))},large:{loader:()=>n.e(47508).then(n.bind(n,347508))}});var He=()=>n(370329);const Oe=(0,w().CZ)("squareOnSquareDashed",{default:{loader:()=>n.e(89453).then(n.bind(n,489453))},small:{loader:()=>n.e(56e3).then(n.bind(n,656e3))},mini:{loader:()=>n.e(72876).then(n.bind(n,572876))},large:{loader:()=>n.e(46627).then(n.bind(n,691283))}});function We(){const e=(0,r().O7)(),t=(0,o().YB)(),n=(0,i().VK)((()=>Q().default.state.productName),[]);return(0,g.jsx)(Le().$,{title:(0,g.jsx)(o()._H,{defaultMessage:"If refund is approved, all content related to ‘{productName}’ will be deleted",id:"buyerProfile.refundModal.initial.title",values:{productName:n}}),icon:(0,g.jsx)(y().y,{iconGroup:He().h,variantName:"default",overrideSize:()=>36,colorName:"uiRedPrimary"}),body:(0,g.jsx)(Ge,{}),actions:[{type:"outline",text:t.formatMessage(Ve.continueWithRefund),onClick:()=>{(0,s().j)({environment:e,event:{eventName:"buyer_profile_refund_modal_opened",eventProperties:{stage:"refundReason"}}}),Q().default.setStage("refundReason")}},{type:"plain",text:t.formatMessage(Ve.cancel),onClick:()=>Q().default.closeModal()}],width:360})}function Ge(){const e=(0,l().yK)((e=>({warningIconStyles:{color:e.text.uiRedPrimary,height:24,width:24},refundWarningContainer:{padding:"12px",backgroundColor:e.surface.wash,borderRadius:"8px",gap:"12px",display:"flex",flexDirection:"column"}})),[]);return(0,g.jsxs)("section",{style:e.refundWarningContainer,children:[(0,g.jsx)($e,{icon:(0,g.jsx)(y().y,{iconGroup:Oe,variantName:"default",colorName:"uiRedPrimary"}),title:(0,g.jsx)(o()._H,{defaultMessage:"All copies of the template",id:"buyerProfile.refundModal.initial.warning.allCopiesOfTemplate"}),subtitle:(0,g.jsx)(o()._H,{defaultMessage:"including duplicates in other members’ private pages",id:"buyerProfile.refundModal.initial.warning.allCopiesOfTemplate.subtitle"})}),(0,g.jsx)($e,{icon:(0,g.jsx)(y().y,{iconGroup:Ke,variantName:"default",colorName:"uiRedPrimary"}),title:(0,g.jsx)(o()._H,{defaultMessage:"Any copied sections of the template",id:"buyerProfile.refundModal.initial.warning.copiedSections"}),subtitle:(0,g.jsx)(o()._H,{defaultMessage:"including pages, databases, and buttons",id:"buyerProfile.refundModal.initial.warning.copiedSections.subtitle"})}),(0,g.jsx)($e,{icon:(0,g.jsx)(y().y,{iconGroup:ee().X,variantName:"default",colorName:"uiRedPrimary"}),title:(0,g.jsx)(o()._H,{defaultMessage:"All edits and additions to the template",id:"buyerProfile.refundModal.initial.warning.allEditsAndAdditions"}),subtitle:(0,g.jsx)(o()._H,{defaultMessage:"including any new pages that are nested inside the template",id:"buyerProfile.refundModal.initial.warning.allEditsAndAdditions.subtitle"})})]})}function $e(e){const{icon:t,title:n,subtitle:a}=e,r=(0,l().yK)((e=>({refundWarningContainer:{display:"flex",gap:8},refundWarningTextContainer:{display:"flex",flexDirection:"column",gap:4}})),[]);return(0,g.jsxs)("div",{style:r.refundWarningContainer,children:[(0,g.jsx)("div",{children:t}),(0,g.jsxs)("div",{style:r.refundWarningTextContainer,children:[(0,g.jsx)(_().q,{styleName:"Body-14px/Medium",colorName:"uiRedPrimary",children:n}),(0,g.jsx)(_().q,{styleName:"Body-14px/Regular",colorName:"secondary",children:a})]})]})}const Ve=(0,o().vU)({continueWithRefund:{id:"buyerProfile.refundModal.initial.continueWithRefund",defaultMessage:"Continue with refund"},cancel:{id:"buyerProfile.refundModal.initial.cancel",defaultMessage:"Cancel"}});var Ee=()=>n(73363),Ye=()=>n(291198),ze=()=>n(661297),Fe=()=>n(397540),Xe=()=>n(443269),Je=()=>n(615634);function Qe(){const e=(0,o().YB)(),t=(0,r().O7)(),[n,i]=(0,a.useState)("default"),[l,d]=(0,a.useState)(""),[u,c]=(0,a.useState)(!1),[p,f]=(0,a.useState)(null);return(0,g.jsx)(Le().$,{width:360,icon:(0,g.jsx)(y().y,{iconGroup:Ee().M,colorName:"secondary",variantName:"default",overrideSize:e=>36}),title:e.formatMessage(tt.title),subTitle:e.formatMessage(tt.subtitle),body:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(et,{refundReason:n,setRefundReason:e=>{i(e),f(null)},customReason:l,setCustomReason:d}),p?(0,g.jsx)(_().q,{colorName:"uiRedPrimary",styleName:"Body-14px/Regular",children:p}):null]}),actions:[{type:"primary",text:e.formatMessage(tt.continue),isDisabled:!!p||"custom"===n&&!l||!n||"default"===n,isLoading:u,onClick:async()=>{if(!n||"default"===n)return;c(!0),(0,s().j)({environment:t,event:{eventName:"buyer_profile_refund_requested",eventProperties:{}}});const a=await async function(e){const{environment:t,acquisitionId:n,refundReason:a,customReason:r}=e,i=await De().callApi({eventName:"createMarketplaceRefund",environment:t,data:{acquisitionId:n,reason:a,customReason:r},headers:{}}),l=i.type;if("success"===l){const e=i.data.marketplaceRefundId;return m().Z.setAcquisitionRefund(n,e),i}if("failed"===l)return i;(0,ge().t1)(l)}({environment:t,acquisitionId:Q().default.state.acquisitionId,refundReason:n,..."custom"===n?{customReason:l}:{}});if(c(!1),"success"===a.type)"creator_intervention"===a.data.refundStatus?Q().default.setStage("creator_intervention"):Q().default.setStage("success");else if("failed"===a.type){let t=e.formatMessage(tt.defaultErrorMessage);t=(0,Xe().XN)(e,a.error.data.responseBody.clientData)||t,f(t)}}},{type:"plain",text:e.formatMessage(tt.cancel),onClick:()=>Q().default.closeModal()}]})}function et(e){const t=(0,o().YB)(),n=(0,l().yK)((e=>({selectChevron:{width:16,height:16,fill:e.lightTextColor},selectInputButton:{border:"none",boxShadow:e.inputBoxShadow,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"18px 14px",width:"100%"}})),[]),a={items:[...K().Dq],getKey:e=>e,onSelect:t=>(t=>{e.setRefundReason(t===e.refundReason?"default":t)})(t),renderOrigin:a=>(0,g.jsxs)(ze().Z,{...a,style:n.selectInputButton,isLarge:!0,children:[e.refundReason?t.formatMessage(nt[e.refundReason]):"Default",(0,Je().i)(n.selectChevron)]}),menuTitle:(0,g.jsx)(_().q,{colorName:"secondary",styleName:"Body-14px/Regular",children:t.formatMessage(nt.default)}),selectedItem:e.refundReason??"default",renderItem:e=>{const t=nt[e.value];return(0,g.jsx)(O().Z,{...e,title:t.defaultMessage})},sameWidthAsOrigin:!0,originGap:6,width:"100%",minWidth:"100%"};return(0,g.jsxs)("section",{style:{display:"flex",flexDirection:"column",gap:8,width:"100%",marginTop:"-4px"},children:[(0,g.jsx)(Fe().Z,{...a}),"custom"===e.refundReason?(0,g.jsx)("div",{style:{marginTop:"4px"},children:(0,g.jsx)(Ye().Z,{type:"text",maxlength:1e3,textarea:!0,autoFocus:!0,placeholder:t.formatMessage(tt.customReasonPlaceholder),value:e.customReason,onChange:t=>e.setCustomReason(t.target.value)})}):null]})}const tt=(0,o().vU)({title:{id:"buyerProfile.refundModal.refundReason.title",defaultMessage:"Reason for refund"},subtitle:{id:"buyerProfile.refundModal.refundReason.subtitle",defaultMessage:"Let us know why you’d like a refund"},continue:{id:"buyerProfile.refundModal.refundReason.continue",defaultMessage:"Continue"},cancel:{id:"buyerProfile.refundModal.refundReason.cancel",defaultMessage:"Cancel"},customReasonPlaceholder:{id:"buyerProfile.refundModal.refundReason.customReasonPlaceholder",defaultMessage:"Tell us why"},defaultErrorMessage:{id:"buyerProfile.refundModal.refundReason.defaultErrorMessage",defaultMessage:"Something went wrong"}}),nt=(0,o().vU)({default:{id:"buyerProfile.refundModal.refundReason.default",defaultMessage:"I’d like a refund because..."},not_as_described:{id:"buyerProfile.refundModal.refundReason.notAsDescribed",defaultMessage:"Template was not as described"},not_wanted:{id:"buyerProfile.refundModal.refundReason.notWanted",defaultMessage:"I no longer want this template"},not_needed:{id:"buyerProfile.refundModal.refundReason.notNeeded",defaultMessage:"Template was not needed"},unable_to_use:{id:"buyerProfile.refundModal.refundReason.unableToUse",defaultMessage:"I couldn't use the template"},custom:{id:"buyerProfile.refundModal.refundReason.custom",defaultMessage:"Other"}}),at=(0,w().CZ)("arrowCircleCheck",{default:{loader:()=>n.e(75308).then(n.bind(n,275308))},small:{loader:()=>n.e(7544).then(n.bind(n,307544))},mini:{loader:()=>n.e(1449).then(n.bind(n,101449))},large:{loader:()=>n.e(63326).then(n.bind(n,463326))}});function rt(e){const{refundStatus:t}=e,n=(0,o().YB)();return(0,g.jsx)(Le().$,{width:360,icon:(0,g.jsx)(y().y,{colorName:"secondary",variantName:"large",overrideSize:()=>36,iconGroup:at}),title:n.formatMessage(it.title),subTitle:"requested"===t?n.formatMessage(it.subtitle):n.formatMessage(it.creatorInterventionSubtitle),actions:[{type:"outline",text:n.formatMessage(it.gotIt),onClick:()=>Q().default.closeModal()}]})}const it=(0,o().vU)({title:{id:"buyerProfile.refundModal.success.title",defaultMessage:"Refund request sent"},subtitle:{id:"buyerProfile.refundModal.success.subtitle",defaultMessage:"We will respond to the request within 5 business days. Please check your email to keep up with the latest updates."},gotIt:{id:"buyerProfile.refundModal.success.gotIt",defaultMessage:"Got it"},creatorInterventionSubtitle:{id:"buyerProfile.refundModal.success.creatorInterventionSubtitle",defaultMessage:"The creator of this template will reach out to provide support. Please keep an eye out for an email from them."}});function lt(){const{isOpen:e,stage:t}=(0,i().Kw)(Q().default),n=(0,a.useCallback)((()=>{Q().default.closeModal()}),[]);return(0,g.jsx)(d().c,{isOpen:e,onDismiss:n,showCloseIcon:!0,render:()=>{switch(t){case"initial":return(0,g.jsx)(We,{});case"refundReason":return(0,g.jsx)(Qe,{});case"success":return(0,g.jsx)(rt,{refundStatus:"requested"});case"cancel":return(0,g.jsx)(Ae,{});case"creator_intervention":return(0,g.jsx)(rt,{refundStatus:"creator_intervention"});default:(0,ge().t1)(t)}},animateSizeTransition:"refundReason"===t})}},679733:(e,t,n)=>{n.d(t,{Y:()=>c});n(667294);var a=()=>n(846550),r=()=>n(766072),i=()=>n(788860),l=()=>n(603692),o=()=>n(906651),d=()=>n(367666),s=()=>n(436037),u=n(785893);function c(e){let{acquisition:t,as:n,source:c}=e;const p=(0,a().yK)((()=>({submittedButtonText:{display:"flex",alignItems:"center"},checkmarkIcon:{display:"inline",height:"16px",width:"16px",marginRight:"4px"}})),[]),m=t.id,{isComplete:f,rating:y}=(0,s().Y)(m),g=n??o().Z;return(0,u.jsx)(g,{onClick:()=>{d().Z.openModal({stage:y?"details":"rating",acquisitionId:m,source:c})},disabled:f,children:f?(0,u.jsxs)("span",{style:p.submittedButtonText,children:[(0,u.jsx)(l().y,{iconGroup:r().X,variantName:"default"}),(0,u.jsx)(i()._H,{id:"inApp.marketplace.reviews.reviewed",defaultMessage:"Reviewed"})]}):(0,u.jsx)(i()._H,{id:"inApp.marketplace.reviews.leaveAReview",defaultMessage:"Leave a review"})})}},436037:(e,t,n)=>{n.d(t,{D:()=>u,Y:()=>s});var a=()=>n(219727),r=()=>n(142735),i=()=>n(924172),l=()=>n(567237),o=()=>n(826955),d=()=>n(367666);function s(e){return u((0,r().VK)((()=>d().Z.getReviewId(e)),[e]))}function u(e){const t=(0,a().O7)();return(0,r().VK)((()=>{if(e){const n=new(o().wP)(t,{table:l().ZI,id:e}),a=n.isReady(),r=n.getModel();return{isReady:a,isComplete:Boolean(r&&(0,i().AG)(r)),rating:n.getRating()}}return{isComplete:!1,isReady:!0}}),[t,e])}},491190:(e,t,n)=>{n.d(t,{b:()=>o});var a=()=>n(219727),r=()=>n(801812),i=()=>n(506037),l=()=>n(356140);function o(e){let{productId:t,productTable:n="template"}=e;const o=(0,a().O7)(),d=(0,l().W)(),[s,u]=(0,r().r5)((async()=>{if(t&&d)return await(0,i().O)({environment:o,productId:t,productTable:n,spaceId:d})}),[o,t,n,d]);return[s,u]}},473759:(e,t,n)=>{n.d(t,{v:()=>a});const a=(0,n(827282).CZ)("arrowCounterClockwise",{default:{loader:()=>n.e(26518).then(n.bind(n,126518))},small:{loader:()=>n.e(98759).then(n.bind(n,598759))},mini:{loader:()=>n.e(51079).then(n.bind(n,451079))},large:{loader:()=>n.e(50632).then(n.bind(n,432680))}})},796562:(e,t,n)=>{n.d(t,{l:()=>a});const a=(0,n(827282).CZ)("arrowDown",{default:{loader:()=>n.e(20663).then(n.bind(n,320663))},small:{loader:()=>n.e(15889).then(n.bind(n,815889))},mini:{loader:()=>n.e(55523).then(n.bind(n,55523))},large:{loader:()=>n.e(53829).then(n.bind(n,53829))}})},202454:(e,t,n)=>{n.d(t,{g:()=>a});const a=(0,n(827282).CZ)("arrowRight",{default:{loader:()=>n.e(13116).then(n.bind(n,13116))},small:{loader:()=>n.e(51558).then(n.bind(n,51558))},mini:{loader:()=>n.e(96364).then(n.bind(n,596364))},large:{loader:()=>n.e(74033).then(n.bind(n,474033))}})},779247:(e,t,n)=>{n.d(t,{T:()=>a});const a=(0,n(827282).CZ)("arrowUpRight",{default:{loader:()=>n.e(60569).then(n.bind(n,960569))},small:{loader:()=>n.e(8130).then(n.bind(n,608130))},mini:{loader:()=>n.e(88672).then(n.bind(n,188672))},large:{loader:()=>n.e(85943).then(n.bind(n,485943))}})},766072:(e,t,n)=>{n.d(t,{X:()=>a});const a=(0,n(827282).CZ)("pencilLine",{default:{loader:()=>n.e(47736).then(n.bind(n,547736))},small:{loader:()=>n.e(91525).then(n.bind(n,591525))},mini:{loader:()=>n.e(60594).then(n.bind(n,160594))},large:{loader:()=>n.e(36121).then(n.bind(n,936121))}})},366767:(e,t,n)=>{n.d(t,{$:()=>a});const a=(0,n(827282).CZ)("xmarkCircle",{default:{loader:()=>n.e(56486).then(n.bind(n,56486))},small:{loader:()=>n.e(89980).then(n.bind(n,889980))},mini:{loader:()=>n.e(15752).then(n.bind(n,915752))},large:{loader:()=>n.e(17084).then(n.bind(n,817084))}})}}]);