"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[1953],{972544:(e,i,t)=>{t.d(i,{S:()=>s,Z:()=>a});var n=t(667294),o=t(785893);const s=8;function r(e,i){let{isSelected:n}=e;const{radioButtonStyle:r,dotStyle:a}=(0,t(846550).yK)((e=>({radioButtonStyle:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:16,height:16,borderRadius:16,marginRight:s,background:n?e.blueColor:e.whiteButtonBackground,border:n?"none":`1px solid ${e.radioButtonBorder}`,transition:"background 100ms ease-out"},dotStyle:{width:6,height:6,borderRadius:6,background:e.regularInvertedTextColor,transition:"opacity 100ms ease-out",opacity:n?1:0}})),[n]);return(0,o.jsx)("div",{ref:i,style:r,children:(0,o.jsx)("div",{style:a})})}const a=n.forwardRef(r)},877807:(e,i,t)=>{t.d(i,{mX:()=>C,mo:()=>h,nH:()=>f});t(241792),t(667294);var n=()=>t(142735),o=()=>t(846550),s=()=>t(933868),r=()=>t(788860),a=()=>t(696459),l=()=>t(707513),d=()=>t(779733),c=()=>t(520849),m=()=>t(876822),u=()=>t(842574),p=()=>t(204642),g=t(785893);function h(e){const{openState:i}=e,{mainEditorCurrentBlockStore:t,currentSpaceStore:s}=(0,n().VK)((()=>{const{mainEditorCurrentBlockStore:e,currentSpaceStore:i}=m().default.state;return{mainEditorCurrentBlockStore:e,currentSpaceStore:i}}),[]),r=(0,n().VK)((()=>(0,d().wZ)()),[]),a=(0,o().yK)((e=>({scroller:{display:"flex",flexDirection:"column",maxHeight:290,...r?{border:`1px solid ${e.lightDividerColor}`,borderRadius:6,paddingTop:8,paddingLeft:12,paddingRight:12,paddingBottom:12,marginTop:15,marginBottom:5,marginLeft:-12,marginRight:-12}:{}},editContainer:{marginTop:2,marginBottom:2,color:e.regularTextColor}})),[r]);if(!t||!s)return null;const l=Date.now();return(0,g.jsx)(u().Z,{type:c().Z.Y,style:a.scroller,children:i.permissionChanges.map(((e,i)=>{let[n,o]=e;const r={timestamp:l,space_id:s.id,type:"permission-changed",permission_data:{before:n,after:o}};return(0,g.jsx)("div",{style:a.editContainer,children:(0,g.jsx)(p().Z,{rootStore:t,edit:r})},`${n.type}-${i}`)}))})}function f(e,i){return["remove","restrict"].includes(e.type)?i?(0,g.jsx)(r()._H,{id:"restrictedPermissionConfirmationModal.actionButton.restrictAccessV2",defaultMessage:"Change and unlink"}):(0,g.jsx)(r()._H,{id:"restrictedPermissionConfirmationModal.actionButton.restrictAccess",defaultMessage:"Restrict access"}):i?(0,g.jsx)(r()._H,{id:"restrictedPermissionConfirmationModal.actionButton.relink",defaultMessage:"Relink"}):"restoreTeamPermissions"===e.type?(0,g.jsx)(r()._H,{id:"restrictedPermissionConfirmationModal.actionButton.restoreTeamPermissions",defaultMessage:"Reset Permissions"}):(0,g.jsx)(r()._H,{id:"restrictedPermissionConfirmationModal.actionButton.restoreAccess",defaultMessage:"Restore access"})}function C(e,i){switch(e.type){case"remove":return i?(0,g.jsx)(r()._H,{id:"restrictedPermissionConfirmationModal.remove.descriptionV2",defaultMessage:"Change access and unlink share settings from parent page?"}):(0,g.jsx)(r()._H,{id:"restrictedPermissionConfirmationModal.restrict.description",defaultMessage:"Are you sure you want to remove this {permissionGroup} and restrict access? This page will no longer inherit share settings from the parent page.",values:{permissionGroup:y(e)}});case"restrict":return i?(0,g.jsx)(r()._H,{id:"restrictedPermissionConfirmationModal.remove.descriptionV2",defaultMessage:"Change access and unlink share settings from parent page?"}):(0,g.jsx)(r()._H,{id:"restrictedPermissionConfirmationModal.remove.description",defaultMessage:"Are you sure you want to change this role and restrict access? This page will no longer inherit share settings from the parent page."});case"restore":return i?(0,g.jsx)(r()._H,{id:"restrictedPermissionConfirmationModal.relink.description",defaultMessage:"Relink share settings?"}):e.permissionChanges.length>0?(0,g.jsx)(r()._H,{id:"restrictedPermissionConfirmationModal.restore.description",defaultMessage:"Are you sure you want to restore access? This will inherit the following permissions from the parent page:"}):(0,g.jsx)(r()._H,{id:"restrictedPermissionConfirmationModal.restoreNoChanges.description",defaultMessage:"Are you sure you want to restore access?"});case"restoreTeamPermissions":return i?(0,g.jsx)(r()._H,{id:"restrictedPermissionConfirmationModal.relink.description",defaultMessage:"Relink share settings?"}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{style:{fontWeight:l().Ue.semibold,marginBottom:4},children:(0,g.jsx)(r()._H,{id:"restrictedPermissionConfirmationModal.restoreTeamPermissions.mainDescription",defaultMessage:"Are you sure you want to reset permissions to match the teamspace defaults?"})}),(0,g.jsx)(r()._H,{id:"restrictedPermissionConfirmationModal.restoreTeamPermissions.warningMessage",defaultMessage:"Everyone else who is not part of the teamspace will lose access, including guests."})]});default:throw a().t1(e)}}function y(e){return(0,s().jg)(e.permissionItem)?(0,g.jsx)(r()._H,{id:"restrictedPermissionConfirmationModal.permissionGroup.user",defaultMessage:"user"}):(0,s().hV)(e.permissionItem)?(0,g.jsx)(r()._H,{id:"restrictedPermissionConfirmationModal.permissionGroup.group",defaultMessage:"group"}):(0,s().Ir)(e.permissionItem)?(0,g.jsx)(r()._H,{id:"restrictedPermissionConfirmationModal.permissionGroup.space",defaultMessage:"workspace"}):(0,g.jsx)(r()._H,{id:"restrictedPermissionConfirmationModal.permissionGroup.generic",defaultMessage:"permission"})}},140303:(e,i,t)=>{t.d(i,{L:()=>c,V:()=>d});var n=t(667294),o=()=>t(66077),s=()=>t(219727),r=()=>t(217465),a=()=>t(876822),l=t(785893);const d=(0,n.createContext)({organizationOwnerRecordCache:void 0,updateCacheWithRecordMap:e=>{}});function c(e){let{children:i}=e;const t=(0,s().O7)(),[o,c]=(0,n.useState)(void 0);(0,n.useEffect)((()=>{const e=m(t);c(e)}),[t]);const u=(0,n.useCallback)((e=>{var i;const n=null===(i=a().default.state.currentUserStore)||void 0===i?void 0:i.id;if(!n||!e.data.organizationOwnerRecordMap)return;if(!e.data.organizationOwnerRecordMap)return;const o=r().RecordMap.create(e.data.organizationOwnerRecordMap);c((e=>{if(!e)return m(t);for(const{pointer:i,model:t}of o)e.setModelAndRole({pointer:i,userId:n},t,"editor");return m(t,e.data)}))}),[t]);return o?(0,l.jsx)(d.Provider,{value:{organizationOwnerRecordCache:o,updateCacheWithRecordMap:u},children:i}):null}function m(e,i){const t=new(o().Z)({name:"organizationSettingsConsoleCache",data:i});return t.addCacheFallback(e.defaultRecordCache.inMemoryRecordCache),t}d.displayName="OrganizationCacheContext"},560847:(e,i,t)=>{t.d(i,{R:()=>s});var n=t(667294),o=()=>t(949842);function s(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0;return(0,n.useCallback)((i=>{(0,o().sg)({event:i,context:t,callback:()=>e(i)})}),[...i,t])}},80510:(e,i,t)=>{t.d(i,{Z:()=>o});t(667294);var n=t(785893);const o=(0,t(827282).IU)("arrowsDiverging",{viewBox:"0 0 12 12",svg:(0,n.jsx)("path",{d:"M6 11.2891C6.42188 11.2891 6.63281 11.0469 6.63281 10.5625V7.3457C6.63281 7.00586 6.71875 6.64062 6.89062 6.25C7.06641 5.85938 7.29492 5.47266 7.57617 5.08984C7.86133 4.70703 8.16992 4.35547 8.50195 4.03516C8.83789 3.71484 9.16406 3.45312 9.48047 3.25L9.95508 2.94531C10.1621 2.81641 10.2656 2.63281 10.2656 2.39453C10.2656 2.21875 10.2109 2.07227 10.1016 1.95508C9.99219 1.83789 9.8418 1.7793 9.65039 1.7793C9.4668 1.7793 9.29102 1.83398 9.12305 1.94336L8.81836 2.14844C8.51367 2.34766 8.20898 2.58984 7.9043 2.875C7.59961 3.15625 7.31641 3.45508 7.05469 3.77148C6.79297 4.08398 6.56836 4.39258 6.38086 4.69727C6.19727 4.99805 6.07227 5.26953 6.00586 5.51172H5.98828C5.91797 5.26953 5.79102 4.99805 5.60742 4.69727C5.42383 4.39258 5.19922 4.08398 4.93359 3.77148C4.67188 3.45508 4.38867 3.15625 4.08398 2.875C3.7832 2.58984 3.48047 2.34766 3.17578 2.14844L2.87109 1.94336C2.69922 1.83398 2.52344 1.7793 2.34375 1.7793C2.14844 1.7793 1.99609 1.83984 1.88672 1.96094C1.78125 2.08203 1.72852 2.22461 1.72852 2.38867C1.72852 2.62695 1.83203 2.8125 2.03906 2.94531L2.51367 3.25C2.83008 3.45312 3.1543 3.71484 3.48633 4.03516C3.81836 4.35547 4.12695 4.70703 4.41211 5.08984C4.69727 5.47266 4.92773 5.85938 5.10352 6.25C5.2793 6.64062 5.36719 7.00586 5.36719 7.3457V10.5625C5.36719 11.0469 5.57812 11.2891 6 11.2891ZM1.81641 3.9707L3.71484 1.52734C3.85547 1.33984 3.88281 1.17578 3.79688 1.03516C3.71484 0.890625 3.55469 0.814453 3.31641 0.806641L0.808594 0.712891C0.613281 0.705078 0.466797 0.763672 0.369141 0.888672C0.271484 1.00977 0.251953 1.16406 0.310547 1.35156L1.02539 3.75391C1.0918 3.98438 1.20312 4.125 1.35938 4.17578C1.51953 4.22656 1.67188 4.1582 1.81641 3.9707ZM10.0898 3.95898C10.2266 4.1543 10.375 4.23047 10.5352 4.1875C10.6992 4.14062 10.8164 4.00391 10.8867 3.77734L11.6777 1.39258C11.7402 1.20508 11.7246 1.04883 11.6309 0.923828C11.541 0.798828 11.3984 0.736328 11.2031 0.736328L8.68945 0.753906C8.45117 0.753906 8.28711 0.824219 8.19727 0.964844C8.10742 1.10156 8.13086 1.26562 8.26758 1.45703L10.0898 3.95898Z"})})},54634:(e,i,t)=>{t.d(i,{C:()=>o});t(667294);var n=t(785893);const o=(0,t(827282).IU)("membersFilled",{viewBox:"0 0 30 30",svg:(0,n.jsx)("path",{d:"M20.31 14.731c2.22 0 4.097-1.967 4.097-4.513 0-2.485-1.887-4.391-4.098-4.391-2.2 0-4.097 1.937-4.087 4.411 0 2.526 1.866 4.493 4.087 4.493zm-11.725.233c1.937 0 3.57-1.724 3.57-3.935 0-2.17-1.653-3.823-3.57-3.823-1.917 0-3.57 1.683-3.56 3.844 0 2.19 1.633 3.914 3.56 3.914zm-5.588 9.21h7.606c-1.085-1.552.082-4.615 2.374-6.42-1.116-.72-2.566-1.248-4.392-1.248-4.533 0-7.464 3.337-7.464 6.085 0 1.004.507 1.582 1.876 1.582zm10.994-.01h12.637c1.673 0 2.251-.508 2.251-1.44 0-2.607-3.316-6.198-8.57-6.198-5.263 0-8.57 3.59-8.57 6.197 0 .933.578 1.44 2.252 1.44z"})})},314169:(e,i,t)=>{t.d(i,{L7:()=>x,iK:()=>v,qq:()=>S});t(821057),t(670560),t(667294);var n=()=>t(799891),o=()=>t(528514),s=()=>t(81954),r=()=>t(788860),a=()=>t(513670),l=()=>t(912732),d=()=>t(824462),c=()=>t(308186),m=()=>t(784234),u=()=>t(269299),p=()=>t(67961),g=()=>t(877807),h=()=>t(80510),f=()=>t(620218),C=()=>t(749826),y=()=>t(779733),b=t(785893);async function x(e){let{newRole:i,...t}=e;const n=t.oldPermissionItem,o=(0,a().d9)(n);return o.role=i,await v({newPermissionItem:o,...t})}async function v(e){const{oldPermissionItem:i,newPermissionItem:t,wasInherited:r,environment:a,store:c,sudoModeStore:p,restrictingVisibility:g,fromPermissionWrapper:h,trustedDomainsLoggingData:b}=e,x=(0,y().wZ)();if(!(0,o().Kf)(i,t))throw new Error("Permission type mismatch.");const v=!!p&&p.shouldSaveTransactionWithSudoMode(c),M=(0,o().nl)(i.role,t.role);if(r&&M!==t.role||g){return await S({environment:a,useSudoMode:v,store:c,permissionItem:t,fromPermissionWrapper:h,isRedesignEnabled:x,shouldInherit:!0,trustedDomainsLoggingData:b})}!c.isTopLevel()&&i.role!==t.role&&M!==i.role&&l().SM(a);const P="public_permission"===i.type&&"public_permission"===t.type&&"none"===i.role&&"none"!==t.role,I=("public_permission"===i.type&&"public_permission"===t.type&&!i.allow_search_engine_indexing&&t.allow_search_engine_indexing||P&&Boolean(C().default.checkGate({gateName:"include_nonindexed_public_content_for_scanning"})))&&Boolean(C().default.checkGate({gateName:"enable_public_content_scanning"}));return u().createAndCommit({userAction:"PermissionItem.handlePermissionItemChange",environment:a,canUndo:!0,useSudoMode:v,perform:i=>{const n=f().default.DO_NOT_USE_markLegacy("share_menu.update_page_permission_lag");m().l3({environment:a,store:c,permissionItems:[t],transaction:i,pagePermissionChangeLocation:e.location,metric:n,fromPermissionWrapper:h}),I&&i.postSubmitCallbacks.push((async e=>{e||await d().callApi({eventName:"enqueueScanContentTask",environment:a,data:{pagePointer:{id:c.id,table:"block",spaceId:(0,s().J)(c.pointer.spaceId)}}})}))}}),"trusted_domain_permission"===t.type&&n().log({level:"warning",from:"shareMenu.handlePermissionItemChange",type:"TrustedDomainPermissionChange",spaceId:(0,s().J)(c.pointer.spaceId),data:{miscDataToConvertToString:{message:"shareMenu.handlePermissionItemChange updating trusted domain permission",blockId:c.id,oldPermissionItem:i,newPermissionItem:t,trustedDomainsLoggingData:b}}}),!0}async function S(e){const{environment:i,useSudoMode:t,store:n,permissionItem:o,fromPermissionWrapper:s,isRedesignEnabled:a,shouldInherit:l,trustedDomainsLoggingData:d}=e,f="none"===(null==o?void 0:o.role)?{type:"remove",permissionItem:o}:{type:"restrict"};return!!("user_permission"===(null==o?void 0:o.type)&&(null==o?void 0:o.user_id)===i.currentUser.id||(a?await c().gt({message:(0,g().mX)(f,a),description:(0,b.jsx)(p().Z,{isSmall:!0,isMultiline:!0,children:(0,b.jsx)(r()._H,{id:"restrictedPermissionConfirmationModal.footer.whisperTextV2",defaultMessage:"Changing this will unlink this page from its parent, so it will no longer inherit share settings. Admins can still restore settings on unlinked pages."})}),acceptLabel:(0,g().nH)(f,a),icon:(0,h().Z)({height:24,width:24})}):await c().gt({message:(0,g().mX)(f),acceptLabel:(0,g().nH)(f),cancelLabel:(0,b.jsx)(r()._H,{id:"restrictedPermissionConfirmationModal.actionButton.close",defaultMessage:"Close"}),description:(0,b.jsx)(p().Z,{isSmall:!0,isMultiline:!0,children:(0,b.jsx)(r()._H,{id:"restrictedPermissionConfirmationModal.footer.whisperText",defaultMessage:"Admins will still be able to restore permissions from restricted pages."})})})).accept)&&(u().createAndCommit({userAction:"PermissionItem.onAccept",environment:i,canUndo:!0,useSudoMode:t,perform:e=>{m().Pk({environment:i,store:n,permissionItem:o,shouldInherit:l,transaction:e,fromPermissionWrapper:s,trustedDomainsLoggingData:d})}}),!0)}},960516:(e,i,t)=>{t.d(i,{ZG:()=>L,xF:()=>R,ZP:()=>K});var n=t(667294),o=()=>t(219727),s=()=>t(142735),r=()=>t(846550),a=()=>t(506347),l=()=>t(728670),d=()=>t(528514),c=()=>t(933868),m=()=>t(396136),u=()=>t(306164),p=()=>t(788860),g=()=>t(568017),h=()=>t(525496),f=()=>t(729775),C=()=>t(67961),y=()=>t(370005),b=()=>t(429725),x=()=>t(852465),v=()=>t(314169),S=()=>t(270895),M=()=>t(826955),P=()=>t(555813),I=()=>t(469203),_=()=>t(295334),j=()=>t(779733),w=()=>t(845465),k=t(785893);const B=function(e){const{store:i,isDisabled:t,isCurrentUserPermission:n}=e;return t?n?(0,k.jsx)(p()._H,{defaultMessage:"Your access is based on {inlineIconAndName}",id:"blockPermissionsSettings.restrictedPermissionsCurrentUser.tooltip",values:{inlineIconAndName:(0,k.jsx)(h().Z,{store:i,useInvertedColors:!0})}}):(0,k.jsx)(p()._H,{defaultMessage:"This access is based on {inlineIconAndName}",id:"blockPermissionsSettings.restrictedPermissions.tooltip",values:{inlineIconAndName:(0,k.jsx)(h().Z,{store:i,useInvertedColors:!0})}}):n?(0,k.jsx)(p()._H,{defaultMessage:"Your access is based on {inlineIconAndName}. Changing your access will restrict permissions of this page.",id:"blockPermissionsSettings.restrictedPermissionsCurrentUser.canEdit.tooltip",values:{inlineIconAndName:(0,k.jsx)(h().Z,{store:i,useInvertedColors:!0,maxLength:26})}}):(0,k.jsx)(p()._H,{defaultMessage:"This access is based on {inlineIconAndName}. Changing this access will restrict permissions of this page.",id:"blockPermissionsSettings.restrictedPermissions.canEdit.tooltip",values:{inlineIconAndName:(0,k.jsx)(h().Z,{store:i,useInvertedColors:!0,maxLength:26})}})},L=32,R=40,T=(0,p().vU)({fromLinkBox:{defaultMessage:"From {linkBoxWithPageTitle}",id:"pagePermissionItem.fromInheritedRecordPermissions.setting"}});function Z(e){const{from:i,currentBlockStore:a,onClick:l,permissionItem:d,ignoreLocalHoverState:c,nonInheritedTooltip:p,inheritedTooltip:g,shouldDisable:h,isCollapsible:f}=e,C=(0,o().Fy)(),y=(0,o().O7)(),b=(0,s().qz)(void 0,t(529048).Z),x=(0,s().VK)((()=>{const e=i.table;return e===m().iU?M().G.createChildStore(a,{table:m().iU,id:i.blockId}):e===u().e0?M().zX.createChildStore(a,{table:u().e0,id:i.teamId}):void(0,t(696459).t1)(e)}),[i,a]),v=(0,s().VK)((()=>(0,j().wZ)()),[]),[S,P]=(0,n.useState)(!1),I=(0,n.useCallback)((()=>{b.setState({...b.state,open:!0}),P(!0)}),[b]),L=(0,n.useCallback)((()=>{P(!1)}),[]),R=v&&S,T=(0,s().VK)((()=>h||(0,_().zX)({permissionItem:d,store:a})),[h,d,a]),Z=(0,s().VK)((()=>x.id!==a.id),[x,a]),D=(0,t(560847).R)((e=>{l?l(e):T||b.setState({...b.state,open:!0})}),[b,l,T],t(949842).Af.PermissionItemClick),V=(0,s().VK)((()=>{const e=y.currentUser.id;return"user_permission"===d.type&&d.user_id===e}),[y,d]),A=(0,s().VK)((()=>v?Z?g||(0,k.jsx)(B,{store:x,isDisabled:T,isCurrentUserPermission:V}):p:(0,_().mN)(d)||(0,_().tr)(d)?null:Z?(0,k.jsx)(B,{store:x,isDisabled:T,isCurrentUserPermission:V}):p),[v,d,Z,p,g,x,T,V]),K=(0,r().yK)((i=>{const t=v?{...(0,w().ZY)({isMobile:C.isMobile}),...e.menuListItemProps?{width:"unset"}:{}}:{};return{disabledButton:{...t,cursor:"not-allowed"},button:t,pressedButton:{background:i.buttonPressedBackgroundLight},tooltip:{maxWidth:240}}}),[C.isMobile,v,e.menuListItemProps]);return(0,k.jsx)(t(654133).Z,{delayThreshold:0,renderTooltip:()=>A,textWrap:!0,disableTooltip:!Boolean(A)||R,forceRenderTooltipPopupComponent:v&&Boolean(A),style:K.tooltip,render:i=>{const n=(0,t(164079).Z)(i,{onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave});return e.menuListItemProps?(0,k.jsx)(t(827973).Z,{...e.menuListItemProps,onClick:D,disabled:T,ignoreLocalHoverState:c,pressed:!1,buttonStyle:T&&!v?K.disabledButton:K.button,textWrapperStyle:{marginLeft:0,marginRight:0},title:(0,k.jsx)(H,{...e,isDisabled:T,fromBlockStore:x,buttonPopupStore:b,isInherited:Z,onOpenMenu:I,onClose:L}),...n}):(0,k.jsx)(t(154186).Z,{disabled:T&&!f,mobileFeedback:C.isMobile,ignoreLocalHoverState:c,style:T&&!v?K.disabledButton:K.button,pressedStyle:v?K.pressedButton:void 0,onClick:D,...n,children:(0,k.jsx)(H,{...e,isDisabled:T,fromBlockStore:x,buttonPopupStore:b,isInherited:Z,onOpenMenu:I,onClose:L})})},placement:t(998901).Placement.Left})}function H(e){const{permissionItem:i,fromBlockStore:t,isCompact:n,iconStyle:a,icon:l,title:d,tag:c,subtitle:m,showInherited:u,isInherited:p,permissionRoleSelect:g,hideRoleSelectButton:h,renderTitleWithoutUILabelWrapper:f,onClose:y}=e,b=(0,o().O7)(),x=b.device.isMobile,v=(0,s().VK)((()=>function(e){return"user_permission"===e.type}(i)),[i]),S=(0,s().VK)((()=>(0,j().wZ)()),[]),{paddingLeft:M,paddingRight:P}=(0,s().VK)((()=>({paddingLeft:b.WindowSizeStore.getSafePaddingLeftCSS(S?x?0:w().gf:14),paddingRight:b.WindowSizeStore.getSafePaddingRightCSS(S?x?0:w().gf:14)})),[b.WindowSizeStore,x,S]),_=(0,r().yK)((e=>({container:{display:"flex",alignItems:"center",minHeight:n?44:S?void 0:52,...S?{height:x?void 0:w().o8}:void 0,paddingTop:x&&S?12:8,paddingBottom:x&&S?12:8,paddingLeft:M,paddingRight:P},icon:{flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",width:S&&x?40:32,height:S&&x?40:32,marginRight:(0,w().bY)({isMobile:x}),...a},title:{marginRight:"auto",minWidth:0},labelWrapper:{display:"flex",flexDirection:"row"},label:{fontWeight:400},tag:{marginLeft:4},roleSelect:{display:"flex",alignItems:"center",flexShrink:0,marginLeft:8,...S&&{marginRight:w().gf}},button:{marginRight:-8,color:e.mediumTextColor,fontSize:x?14:12}})),[n,M,P,x,a,S]);return(0,k.jsxs)("div",{className:"notranslate",style:_.container,children:[(0,k.jsx)("div",{style:_.icon,children:l}),(0,k.jsxs)("div",{style:_.title,children:[(0,k.jsxs)("div",{style:_.labelWrapper,children:[f?d:(0,k.jsx)(C().Z,{style:v?void 0:_.label,children:(0,k.jsx)(I().s,{children:d})}),c&&(0,k.jsx)("div",{style:_.tag,children:c})]}),m&&(0,k.jsx)(C().Z,{style:e.subtitleStyle,isSmall:!0,children:m}),u&&p&&(0,k.jsx)(V,{store:t})]}),!h&&(0,k.jsx)("div",{style:_.roleSelect,children:A(i)?g:(0,k.jsx)(D,{...e,onClose:y,permissionItem:i})})]})}function D(e){const{isInherited:i,permissionItem:t,currentBlockStore:a,from:u,isDisabled:p,sudoModeStore:g,location:h,fromPermissionWrapper:f,onUpgradeButtonClick:C,onChange:b,onClose:x,onOpenMenu:S,upgradeButtonName:M,buttonPopupStore:P,isRemovableOverride:I}=e,_=(0,o().O7)(),B=(0,s().VK)((()=>{var e;const i=a.getModel(),n=null===(e=a.getParentStore())||void 0===e?void 0:e.getModel();return(0,d().Gy)({record:i,parent:n,from:u,permissionItem:t})?(0,d().$5)({ancestors:l().DW(a.pointer,a.getRecordModel),from:u}):t.role}),[u,t,a]),L=(0,s().VK)((()=>(0,j().wZ)()),[]),R=(0,s().VK)((()=>a.getType()),[a]),T=(0,s().VK)((()=>{const e=_.currentUser.id;return c().jg(t)&&t.user_id===e}),[_,t]),Z=(0,n.useCallback)((async e=>{const n={...t};n.role=B;await(0,v().L7)({oldPermissionItem:n,newRole:e,wasInherited:i,environment:_,store:a,sudoModeStore:g,location:h,fromPermissionWrapper:f})&&(null==b||b(e))}),[t,B,i,_,a,g,h,f,b]),H=(0,r().yK)((e=>({button:{marginRight:-8,color:e.mediumTextColor,fontSize:(0,w().fV)({environment:_,isRedesignEnabled:L})}})),[_,L]);return(0,k.jsx)(y().ZP,{role:B,table:m().iU,blockType:R,type:t.type,disabled:p,isUserPermission:T,onChange:Z,onClick:L?S:void 0,onClose:L?x:void 0,onUpgradeButtonClick:C,upgradeButtonName:M,buttonPopupStore:P,buttonStyle:H.button,showPermissionOverrideWarning:i&&!e.selectFooter,isRemovableOverride:I,footer:e.selectFooter,roleItemOverrides:e.roleItemOverrides,from:"shareMenu",header:e.selectHeader})}function V(e){const{store:i}=e,t=(0,o().O7)(),l=(0,p().YB)(),d=(0,s().VK)((()=>{if(i.table===m().iU)return(0,b().ZP)({store:i,fullyQualified:!1,pageVisitSource:a().tY.LinkInPage})}),[i]),c=(0,s().VK)((()=>(0,x().Y)(i)),[i]),u=(0,n.useCallback)((()=>{P().RF({environment:t,teamId:i.id,tab:S().a.Members,from:"permission_item"})}),[i.id,t]),y=(0,r().yK)((e=>({label:{lineHeight:1.4},linkBox:{display:"inline-flex",alignItems:"center",borderBottom:`0.5px solid ${g().ZP.mediumTextColor}`}})),[]);return(0,k.jsx)(C().Z,{isSmall:!0,style:y.label,children:l.formatMessage(T.fromLinkBox,{linkBoxWithPageTitle:(0,k.jsx)(f().Z,{inline:!0,href:d,onClick:c?u:void 0,innerStyle:y.linkBox,children:(0,k.jsx)(h().Z,{store:i,useInvertedColors:!1})})})})}function A(e){return"display_only_overview_permission"===e.type||"display_only_hidden_permission"===e.type||"display_only_inherited_permission"===e.type||"display_only_group_member_permission"===e.type}const K=n.memo(Z)},998306:(e,i,t)=>{t.d(i,{Z:()=>d});var n=t(667294),o=()=>t(846550),s=()=>t(960516),r=t(785893);function a(e){let{type:i,isMobile:n,containerStyle:a,iconSize:d,...c}=e;const m=d??20,u=(0,o().yK)((e=>({container:{display:"flex",alignItems:"center",justifyContent:"center",...(0,t(845465).lw)({theme:e,size:d??(n?s().xF:s().ZG),useLargeBorderRadius:!0,useLightBackgroundColor:!0}),..."circle"===i&&{borderRadius:"100%"},...a}})),[a,n,i,d]);return(0,r.jsx)("div",{style:u.container,children:"function"===c.iconType?(0,r.jsx)(l,{iconFn:c.iconFn,iconStyle:c.iconStyle,innerIconSize:m}):"emoji"===c.iconType?(0,r.jsx)(t(754668).Z,{char:c.emoji,size:m}):"recordIcon"===c.iconType?(0,r.jsx)(t(943620).Z,{icon:c.icon,disabled:!0,isEmptyPage:!1,size:m,defaultIcon:(0,t(54634).C)()}):c.element})}function l(e){let{iconFn:i,iconStyle:t,innerIconSize:n}=e;return i((0,o().yK)((e=>({icon:{width:n,height:n,fill:e.mediumIconColor,...t}})),[t,n]).icon)}const d=n.memo(a)},295334:(e,i,t)=>{t.d(i,{E9:()=>r,ab:()=>d,mN:()=>a,tr:()=>l,zX:()=>s});var n=()=>t(933868),o=()=>t(95718);function s(e){let{permissionItem:i,store:t}=e;return"display_only_inherited_permission"!==i.type&&(!a(i)&&!t.canAdmin()||t.pathIsDead()||(0,o().Eo)(t))}function r(e){let{permissionItem:i,store:t}=e;return"block"!==i.from.table||i.from.blockId!==t.id}function a(e){return"display_only_overview_permission"===e.type}function l(e){return"display_only_inherited_permission"===e.type}function d(e){const i=e&&"from"in e?e.permissionItem:e;if(!i||!(0,n().YX)(i.role))return"private";return(0,n().tx)(i)&&"none"!==i.role?"unlisted":"open"}}}]);