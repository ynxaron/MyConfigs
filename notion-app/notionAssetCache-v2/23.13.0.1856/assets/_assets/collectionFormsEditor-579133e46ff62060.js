"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[57036],{128039:(e,o,t)=>{t.r(o),t.d(o,{FORMS_SHARE_CALLOUT_KEY:()=>Y,changeFormClosedState:()=>pe,changeFormSubmissionPermissions:()=>me,createAndFocusCollectionFormEditorView:()=>ne,createCollectionFormEditorView:()=>ie,createDummyFormPage:()=>_e,createFormInPrivate:()=>ae,createFormQuestion:()=>de,createFormQuestionAndModuleForNewlyDuplicatedProperty:()=>ce,createFormQuestionAndUpdateOrCreateModule:()=>ue,createResponsesCollectionView:()=>se,deleteFormQuestion:()=>le,handleUpdateFormQuestionName:()=>oe,incrementAndTrackUserFormsCreated:()=>ee,maybeAlertAboutUnsupportedPublicQuestions:()=>ge,maybeSyncQuestionNameToPropertyName:()=>te,remapQuestionToNewProperty:()=>ve,toggleAnonymousFormSubmissionState:()=>fe,toggleNotionBrandingState:()=>ye});t(821057),t(670560),t(267602),t(653476),t(470928),t(30005),t(667294);var r=()=>t(846550),n=()=>t(506347),i=()=>t(156642),a=()=>t(863112),s=()=>t(226413),l=()=>t(532850),d=()=>t(817629),c=()=>t(998411),u=()=>t(667932),p=()=>t(217465),m=()=>t(375255),f=()=>t(396136),y=()=>t(139978),v=()=>t(26645),_=()=>t(483791),g=()=>t(955620),h=()=>t(788860),I=()=>t(342792),w=()=>t(543172),S=()=>t(707513),b=()=>t(984871),C=()=>t(139224),A=()=>t(132156),M=()=>t(308186),P=()=>t(421654),T=()=>t(636340),x=()=>t(47443),B=()=>t(145284),O=()=>t(269299),F=()=>t(348141),E=()=>t(932753),k=()=>t(594546),Q=()=>t(907005),V=()=>t(270315),U=()=>t(487270),N=()=>t(527278),L=()=>t(660065),D=()=>t(909679),R=()=>t(676232),Z=()=>t(803728),W=()=>t(99537),q=()=>t(913011),j=()=>t(356117),H=()=>t(876822),z=()=>t(749826),G=()=>t(808282),$=()=>t(807230),X=()=>t(469753),K=t(785893);const J=(0,h().vU)({responsesViewName:{id:"formEditorActions.responsesViewName",defaultMessage:"Responses"},newFormViewName:{id:"formEditorActions.newFormViewName",defaultMessage:"Form builder"},formDatabaseTitle:{id:"newBlock.databaseInline.formDatabaseTitle",defaultMessage:"New form"}}),Y="forms_share_form_tooltip";function ee(e,o){const{currentUserSettingsStore:t}=H().default.state;if(!t)return;const r=function(){const{currentUserSettingsStore:e}=H().default.state;if(!e)return;return e.getSettingsStore().getKeyStore("user_forms_created_count").getValue()??0}();void 0!==r&&(F().d2({userSettingsStore:t,transaction:o,data:{user_forms_created_count:r+1}}),function(e,o){(0,k().j)({environment:e,event:{eventName:"form_created",eventProperties:{user_total_form_count:o.userFormsCreatedCount}}})}(e,{userFormsCreatedCount:r+1})),z().default.logEvent("form_created")}function oe(e){var o;const{questionStore:t,newName:r,environment:n,collectionStore:i,collectionSchema:a,collectionContextStore:s}=e,l=null===(o=t.getConfig())||void 0===o?void 0:o.propertyId;if(!l)throw new Error("No property ID found for question");O().createAndCommit({userAction:"formQuestion.changeName",environment:n,canUndo:!0,perform:e=>{var o,n;const d=null===(o=t.getConfig())||void 0===o?void 0:o.name;if(!d)return;const u=(0,m().Xh)({textValue:d,getRecordModel:t.getRecordModel,deterministic:!0,userTimeZone:(0,c().r)(),intl:N().Z.getIntl()})===(null===(n=a[l])||void 0===n?void 0:n.name);O().applyOperation({store:t,operation:{pointer:t.pointer,path:["config","name"],command:"set",args:[[r]]},transaction:e}),t.shouldSyncQuestionNameToPropertyName()&&(u&&!(0,V().Gu)({property:l,collectionContextStore:s,newValue:r})?b().Bv({collectionStore:i,property:l,name:r,transaction:e}):O().applyOperation({store:t,operation:{pointer:t.pointer,path:["config","shouldSyncQuestionNameToPropertyName"],command:"set",args:!1},transaction:e}))}})}function te(e){var o;const{questionStore:t,environment:r,collectionStore:n,collectionContextStore:i}=e,a=null===(o=t.getConfig())||void 0===o?void 0:o.propertyId;if(!a)throw new Error("No property ID found for question");O().createAndCommit({userAction:"formQuestion.changeName",environment:r,canUndo:!0,perform:e=>{if(!t.shouldSyncQuestionNameToPropertyName())return;const o=t.getNameStore().getValue();if(!o)return;const r=(0,m().Xh)({textValue:o,getRecordModel:t.getRecordModel,deterministic:!0,userTimeZone:(0,c().r)(),intl:N().Z.getIntl()}),s=(0,V().Gu)({property:a,collectionContextStore:i,newValue:r})?(0,d().n)(r):r;b().Bv({collectionStore:n,property:a,name:s,transaction:e})}})}function re(){const e=(0,r().yK)((e=>({container:{display:"flex",flexDirection:"column"},iconGroup:{display:"flex",flexDirection:"row",justifyContent:"center",color:e.icon.secondary,alignItems:"center"},dialogTitle:{fontSize:16,fontWeight:S().Ue.semibold,lineHeight:"22px",marginTop:12,marginBottom:12},dialogDescription:{color:e.text.secondary,fontSize:14,lineHeight:"20px"}})),[]);return(0,K.jsxs)("div",{style:e.container,children:[(0,K.jsxs)("div",{style:e.iconGroup,children:[(0,R().t)({width:24}),(0,L().r)({width:16,marginLeft:16,marginRight:14}),(0,D().E)({width:24})]}),(0,K.jsx)("span",{style:e.dialogTitle,children:(0,K.jsx)(h()._H,{defaultMessage:"Auto-create form questions based on existing properties?",id:"NewFormOnExistingCollectionDialogTitle.message"})}),(0,K.jsx)("span",{style:e.dialogDescription,children:(0,K.jsx)(h()._H,{defaultMessage:"Only supported property types will create new questions.",id:"NewFormOnExistingCollectionDialogTitle.description"})})]})}function ne(e){const{environment:o,collectionContextStore:t,transaction:r}=e,n=t.collectionViewBlockStore(),i=t.collectionStore();if(!n||!i)return;const a=t.normalizedSchemaStore.state,s=ie({environment:o,collectionViewBlockStore:n,schema:a,transaction:r,initializeWithAllDefaultQuestions:!1});if(!s)return;(0,E().f8)({environment:o,collectionContextStore:t,collectionViewId:s.newViewId,isFullScreen:t.isFullScreenStore.state,isRootChild:t.isRootChildStore.state,isInPeekRenderer:t.isInPeekRendererStore.state});const l=s.layoutStore,d=Object.keys(a).filter((e=>{const o=a[e];return"title"!==e&&o&&(0,X().I0)(o)}));d.length>0&&d.length<=X().h0&&M().vC({showCancel:!1,keepFocus:!1,message:(0,K.jsx)(re,{}),mode:"wide",items:[{label:(0,K.jsx)(h()._H,{defaultMessage:"Create {numQuestions, plural, one {1 question} other {{numQuestions} questions}}",id:"formEditorActions.createQuestions.primaryAction",values:{numQuestions:d.length}}),color:"blue",buttonType:"solid",onAccept(){O().createAndCommit({environment:o,userAction:"formActions.autoCreateFormQuestionsForExistingDatabase",canUndo:!0,perform:e=>{for(const r of d)ce({environment:o,transaction:e,layoutStore:l,collectionStore:i,propertyId:r,position:{type:"area_relative",area:"form_layout_schema",location:"end_moveable"},addLayoutModule:t=>{(0,W().sW)({environment:o,sessionId:(0,I().ZP)(),layoutStore:l,position:t.position??{type:"area_relative",area:"form_layout_schema",location:"end_moveable"},module:t.layoutModule,transaction:e,isPropertyCreation:!1})},collectionContextStore:t,shouldLogEvent:!0,autoCreatedFromExistingDatabase:!0})}})}},{label:(0,K.jsx)(h()._H,{defaultMessage:"Start from scratch",id:"formEditorActions.createQuestions.secondary"}),color:"gray",buttonType:"plain",onAccept(){}}]})}function ie(e){const{environment:o,collectionViewBlockStore:t,transaction:r,schema:n,initializeWithAllDefaultQuestions:i}=e;if(!t)return;const l=t.getSpaceId(),{formBlockStore:d,layoutStore:c}=function(e){var o;const{environment:t,spaceId:r,inMemoryRecordCache:n,transaction:i,schema:l,initializeWithAllDefaultQuestions:d}=e,c=Object.keys(l).find((e=>{var o;return"select"===(null===(o=l[e])||void 0===o?void 0:o.type)})),p=Boolean(d&&void 0!==c),m=(0,U().TS)({environment:t,table:f().iU,spaceId:r}),y=(0,U().TS)({environment:t,table:v().L_,spaceId:r}),g=p?(0,U().TS)({environment:t,table:v().L_,spaceId:r}):void 0,h=T().j4({id:m,environment:t,type:"form",permissions:(0,a().wG)(),inMemoryRecordCache:n,transaction:i}),I=T().ae({environment:t,table:_().Bh,value:{space_id:r,parent_table:f().iU,parent_id:h.id,modules:(0,u().l2)(y,g)},inMemoryRecordCache:n,transaction:i});var w;P().FH({stores:[h],update:{form_layout_pointer:{id:I.id,spaceId:r,table:_().Bh}},transaction:i}),de({environment:t,questionId:y,spaceId:r,layoutId:I.id,propertyId:s().iw,initialQuestionTitle:(null===(o=l[s().iw])||void 0===o?void 0:o.name)??"",inMemoryRecordCache:n,transaction:i,shouldSyncQuestionNameToPropertyName:!0,shouldLogEvent:!1}),p&&g&&c&&de({environment:t,questionId:g,spaceId:r,layoutId:I.id,propertyId:c,initialQuestionTitle:(null===(w=l[c])||void 0===w?void 0:w.name)??"",inMemoryRecordCache:n,transaction:i,shouldSyncQuestionNameToPropertyName:!0,shouldLogEvent:!1});return{formBlockStore:h,layoutStore:I}}({environment:o,spaceId:l,inMemoryRecordCache:t.inMemoryRecordCache,transaction:r,schema:n,initializeWithAllDefaultQuestions:i}),p=(0,E().W9)({environment:o,collectionViewBlockStore:t,collectionView:{type:"form_editor",parent_id:t.id,parent_table:f().iU,alive:!0,space_id:l,name:N().Z.formatMessage(J.newFormViewName),format:{form_block_pointer:{id:d.id,spaceId:l,table:f().iU}}},transaction:r});return T().sW({store:d,data:{parent_id:p.id,parent_table:y().np,alive:!0},transaction:r}),G().Z.setState({openTooltip:p.id}),Z().yM(o,Y),ee(o,r),{newViewId:p.id,layoutStore:c,formId:d.id}}function ae(e){const{environment:o,navigateToFormBuilder:t}=e,{currentSpaceStore:r,currentSpaceViewStore:i}=H().default.state;if(!r||!i)return;if(!(0,$().ww)(o))return void(0,$().eD)(o);if(!(r&&r.canEdit()&&i))return;const a=r.id,s=o.idCreator.getSpaceIdCreatorSync(a);O().createAndCommit({environment:o,userAction:"formActions.createAndNavigateToFormInPrivate",canUndo:!0,perform:e=>{var l;const{targetBlockStore:d}=A().Z({environment:o,sourceBlockId:"root",targetBlockPointer:(0,U().Ii)({environment:o,table:f().iU,spaceId:a}),sourceBlockSubtree:(0,p().partialRecordMapToRecordMap)(Q().Xq({isInline:!0,name:(0,g().TPx)(N().Z.formatMessage(J.formDatabaseTitle))})),targetRecordCache:r.inMemoryRecordCache,transaction:e,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!1,spaceIdCreator:s}),c=d.getCollectionStore(),u=null==c||null===(l=c.getModel())||void 0===l?void 0:l.getNormalizedSchema(),m=d;if(!u)throw new Error("Schema not found");ie({environment:o,transaction:e,collectionViewBlockStore:m,schema:u,initializeWithAllDefaultQuestions:!0}),se({environment:o,transaction:e,collectionViewBlockStore:m,schema:u}),B().Hj({environment:o,spaceStore:r,spaceViewStore:i,pageStore:d,isPrivate:!0,transaction:e,location:{type:"prepend"}}),t&&x()._c({environment:o,store:d,pageVisitSource:n().tY.CreateFormDeepLink})}})}function se(e){const{environment:o,collectionViewBlockStore:t,transaction:r}=e,n=t.getSpaceId(),i=Object.keys(e.schema).find((o=>{var t;return"created_by"===(null===(t=e.schema[o])||void 0===t?void 0:t.type)}));(0,E().W9)({environment:o,collectionViewBlockStore:t,collectionView:{type:"table",parent_id:t.id,parent_table:f().iU,alive:!0,name:N().Z.formatMessage(J.responsesViewName),space_id:n,format:{table_properties:[{property:"title",visible:!0},...i?[{property:i,visible:!0}]:[]],table_wrap:!0,collection_pointer:t.getCollectionPointer()}},transaction:r})}function le(e){let{environment:o,moduleId:t,sessionId:r,layoutStore:n,collectionSettingsStore:i,isCollectionEmpty:a,collectionContextStore:s,propertyId:l,questionId:d}=e;const c=s.collectionStore();if(!c)throw new Error("Could not find collection store");const u=s.normalizedSchemaStore.state;O().createAndCommit({environment:o,userAction:"formActions.deleteFormQuestion",canUndo:!0,perform:e=>{var i;(0,q().H)({environment:o,position:{area:"form_layout_schema",moduleId:t},layoutStore:n,sessionId:r,transaction:e});const s=null===(i=u[l])||void 0===i?void 0:i.type;a&&s&&"title"!==s&&b().E2({environment:o,collectionStore:c,schema:u,property:l,transaction:e})}}),(0,k().j)({environment:o,event:{eventName:"delete_form_question",eventProperties:(0,X().Pz)({collectionContextStore:s,propertyId:l,questionId:d})}}),C().E3({collectionSettingsStore:i})}function de(e){const{environment:o,questionId:t,spaceId:r,layoutId:n,propertyId:i,initialQuestionTitle:a,inMemoryRecordCache:s,transaction:l,shouldSyncQuestionNameToPropertyName:d,collectionContextStore:c,shouldLogEvent:u=!0,autofocusTitle:p,existingFormQuestionConfig:m,autoCreatedFromExistingDatabase:f}=e;T().ae({environment:o,table:v().L_,value:{id:t,space_id:r,parent_table:_().Bh,parent_id:n,alive:!0,config:{...m,propertyId:i,name:[[a]],shouldSyncQuestionNameToPropertyName:d}},inMemoryRecordCache:s,transaction:l}),u&&(0,k().j)({environment:o,event:{eventName:"add_form_question",eventProperties:{...(0,X().Pz)({collectionContextStore:c,propertyId:i,questionId:t}),auto_created_from_existing_database:Boolean(f)}}}),p&&p.autofocusedQuestionTextStore.autofocusQuestionTitle({questionId:t})}function ce(e){const{environment:o,transaction:t,layoutStore:r,collectionStore:n,propertyId:i,position:a,addLayoutModule:s,collectionContextStore:l,shouldLogEvent:d=!0,autofocusTitle:c,existingFormQuestionConfig:u,autoCreatedFromExistingDatabase:p}=e,m=n.getSchema()[i];if(!m)throw new Error(`No schema found for property ${i}`);const f=u?(0,g().QaF)(null==u?void 0:u.name):m.name,y=r.getSpaceId(),_=(0,U().TS)({environment:o,table:v().L_,spaceId:y});return de({environment:o,questionId:_,spaceId:y,layoutId:r.id,propertyId:i,initialQuestionTitle:f,inMemoryRecordCache:r.inMemoryRecordCache,transaction:t,shouldSyncQuestionNameToPropertyName:!0,shouldLogEvent:d,collectionContextStore:l,autofocusTitle:c,existingFormQuestionConfig:u,autoCreatedFromExistingDatabase:p}),s({layoutModule:{type:"formQuestion",id:(0,w().ZP)(),formQuestionId:_},position:a,transaction:t}),{questionId:_}}function ue(e){const{environment:o,transaction:t,layoutStore:r,propertyId:n,initialQuestionTitle:i,moduleId:a,shouldSyncQuestionNameToPropertyName:s,collectionContextStore:l,autofocusTitle:d,area:c}=e,u=r.getModel();if(!u)throw new Error("Layout model cannot be undefined");const p=r.getSpaceId(),m=(0,U().TS)({environment:o,table:v().L_,spaceId:p});de({environment:o,questionId:m,spaceId:p,layoutId:u.id,propertyId:n,initialQuestionTitle:i,inMemoryRecordCache:r.inMemoryRecordCache,transaction:t,shouldSyncQuestionNameToPropertyName:s,collectionContextStore:l,autofocusTitle:d});const f={type:"formQuestion",id:a??(0,w().ZP)(),formQuestionId:m,..."form_conditional_modules"===c?{parentModuleId:e.parentModuleId,parentConditionalGroupId:e.parentConditionalGroupId}:{}};return a?(0,j().Uq)({environment:o,transaction:t,layoutStore:r,position:{area:c,moduleId:a},updatedModule:f}):"form_conditional_modules"===c&&(0,W().sW)({environment:o,transaction:t,layoutStore:r,position:{type:"absolute",area:"form_conditional_modules",parentConditionalGroupId:e.parentConditionalGroupId,parentModuleId:e.parentModuleId},module:f,sessionId:(0,I().ZP)(),isPropertyCreation:!1}),{updatedModuleId:f.id}}function pe(e){let{environment:o,formBlockStore:t,isClosed:r}=e;t.getIsFormClosed()!==r&&O().createAndCommit({userAction:"formActions.changeFormClosedState",environment:o,canUndo:!0,perform:e=>{P().FH({stores:[t],update:{form_config:{...t.getFormConfig(),is_form_closed:r}},transaction:e})}})}function me(e){let{environment:o,formBlockStore:t,permissions:r}=e;t.getFormSubmissionPermissions()!==r&&O().createAndCommit({userAction:"formActions.changeFormSubmissionPermissions",environment:o,canUndo:!0,perform:e=>{P().FH({stores:[t],update:{form_config:{...t.getFormConfig(),submission_permissions:r}},transaction:e})}})}function fe(e){let{environment:o,formBlockStore:t}=e;const r=t.getIsFormAnonymousSubmissionEnabled();O().createAndCommit({userAction:"formActions.changeAnonymousFormSubmissionState",environment:o,canUndo:!0,perform:e=>{P().FH({stores:[t],update:{form_config:{...t.getFormConfig(),anonymous_submissions:!r}},transaction:e})}})}function ye(e){var o;let{environment:t,formBlockStore:r}=e;const n=r.getSiteStore();if(!n)return;const i=(null===(o=n.getHeader())||void 0===o?void 0:o.hideWatermark)??!1;O().createAndCommit({userAction:"formBlockStore.publicForm.toggleNotionBranding",environment:t,canUndo:!0,perform:e=>{O().applyOperation({store:n,operation:{pointer:n.pointer,path:["header","hideWatermark"],command:"set",args:!i},transaction:e})}})}function ve(e){let{environment:o,newPropertyId:t,formQuestionStore:r}=e;O().createAndCommit({userAction:"formQuestion.remapQuestionToNewProperty",environment:o,canUndo:!0,perform:e=>{O().applyOperation({store:r,operation:{pointer:r.pointer,path:["config","propertyId"],command:"set",args:t},transaction:e})}})}function _e(e){const{environment:o,collectionSchema:t,temporaryRecordCache:r,spaceId:n,collectionId:a,formMode:s}=e,l={};Object.keys(t).forEach((e=>{l[e]=(0,g().TPx)("")}));const{performResult:d}=O().createAndCommit({environment:o,userAction:"formActions.createDummyFormPage",perform:e=>{const t=T().j4({environment:o,type:i().Ti.page,inMemoryRecordCache:r,transaction:e,spaceId:n,properties:{...l}});return T().sW({store:t,data:{alive:"viewer"===s,parent_id:a,parent_table:"collection"},transaction:e}),t},canUndo:!1});return d}async function ge(e){const{environment:o,formBlockStore:t,collectionSchema:r,theme:n,onAccept:i}=e;if(!r)return;const a=(0,X().jj)(t),s=(null==a?void 0:a.getFormQuestionsForFormLayout())??[],d=[];if(s.forEach((e=>{const t=e.getPropertyId();if(!t)return;const n=(0,l().Qm)({schema:r,property:t}),i=null==n?void 0:n.type;if(!i)return;(0,X().Hz)({environment:o,propertyType:i,propertySchema:n,isPublicForm:!0})&&d.push(e)})),0===d.length)return void i();const u=d.map(((e,o)=>{const t=(0,m().Xh)({textValue:e.getNameStore().getValue(),getRecordModel:e.getRecordModel,deterministic:!0,userTimeZone:(0,c().r)(),intl:N().Z.getIntl()}),r=o===d.length-1;return(0,K.jsx)("div",{style:{fontSize:14,textAlign:"start",padding:"8px 12px",borderBottom:r?void 0:`1px solid ${n.lightDividerColor}`},children:t},e.id)})),{accept:p}=await M().gt({message:(0,K.jsx)(h()._H,{id:"formEditorActions.maybeAlertAboutUnsupportedPublicQuestions.message",defaultMessage:"These questions are not supported in public forms and will not be shown to respondents:"}),description:(0,K.jsx)("div",{style:{borderRadius:6,border:`1px solid ${n.lightDividerColor}`,width:"calc(100% + 24px)",marginLeft:-12,marginTop:12,maxHeight:210,overflow:"auto"},children:u}),acceptLabel:(0,K.jsx)(h()._H,{id:"formEditorActions.maybeAlertAboutUnsupportedPublicQuestions.acceptLabel",defaultMessage:"Got it"}),acceptColor:"blue",cancelButtonType:"plain",mode:"wide"});p&&i()}},801670:(e,o,t)=>{t.r(o),t.d(o,{formEditorActions:()=>r()});var r=()=>t(128039)},660065:(e,o,t)=>{t.d(o,{r:()=>n});t(667294);var r=t(785893);const n=(0,t(827282).IU)("arrowRightRounded",{viewBox:"0 0 16 13",svg:(0,r.jsx)("path",{d:"M15.3828 6.85156C15.3828 7.09635 15.2917 7.3099 15.1094 7.49219L9.95312 12.6328C9.77083 12.8099 9.5651 12.8984 9.33594 12.8984C9.09635 12.8984 8.89583 12.8203 8.73438 12.6641C8.57812 12.5078 8.5 12.3125 8.5 12.0781C8.5 11.9583 8.52083 11.8464 8.5625 11.7422C8.60938 11.638 8.67188 11.5469 8.75 11.4688L10.5 9.70312L13.4141 7.04688L13.6875 7.54688L10.9766 7.70312H1.48438C1.22396 7.70312 1.01302 7.625 0.851562 7.46875C0.695312 7.30729 0.617188 7.10156 0.617188 6.85156C0.617188 6.59635 0.695312 6.39062 0.851562 6.23438C1.01302 6.07292 1.22396 5.99219 1.48438 5.99219H10.9766L13.6875 6.15625L13.4141 6.66406L10.5 4L8.75 2.22656C8.67188 2.14844 8.60938 2.0599 8.5625 1.96094C8.52083 1.85677 8.5 1.74219 8.5 1.61719C8.5 1.38281 8.57812 1.1875 8.73438 1.03125C8.89583 0.875 9.09635 0.796875 9.33594 0.796875C9.45052 0.796875 9.5599 0.820312 9.66406 0.867188C9.76823 0.914062 9.86719 0.984375 9.96094 1.07812L15.1094 6.21094C15.2917 6.39323 15.3828 6.60677 15.3828 6.85156Z"})})},99537:(e,o,t)=>{t.d(o,{ST:()=>v,sW:()=>_});t(821057),t(492176),t(670560),t(7961);var r=()=>t(530980),n=()=>t(308240),i=()=>t(509923),a=()=>t(712185),s=()=>t(215134),l=()=>t(582025),d=()=>t(766537),c=()=>t(639708),u=()=>t(513670),p=()=>t(696459),m=()=>t(269299),f=()=>t(142730),y=()=>t(655260);function v(e){const{moduleId:o,layoutStore:t,sessionId:r,environment:i,position:a}=e,s=t.getModuleById(o);if(!s)throw new Error(`Cannot move module with id ${o} because a module with that id is not in the layout`);const l=(0,y().qe)({modulesByArea:t.getModules(),moduleId:o,newPosition:a});g({...e,module:s,userAction:"BuilderLayoutModules.moveModuleToPosition",afterUpsertTransaction:()=>{var e;(0,y().m_)({environment:i,sessionId:r,collectionId:null===(e=t.getCollectionModel())||void 0===e?void 0:e.id,layoutId:t.id,context:(0,n().AR)(a.area),action:l,moduleType:s.type})}})}function _(e){const{position:o,module:t,layoutStore:r,sessionId:i,environment:a}=e;if(r.getModuleById(t.id))throw new Error(`Cannot add module with id ${t.id} because a module with that id is already in the layout`);g({...e,userAction:"BuilderLayoutModules.addModuleAtPosition",performBeforeApplyUpsertOperations:e=>{const{transaction:n}=e;"page_main"!==o.area&&"page_details"!==o.area||(0,c().f)(t)&&(0,f().iQ)({environment:a,transaction:n,layoutStore:r,property:t.propertyId})},afterUpsertTransaction:()=>{var s;(0,y().Ry)({environment:a,module:t,sessionId:i,collectionId:null===(s=r.getCollectionModel())||void 0===s?void 0:s.id,layoutId:r.id,context:(0,n().AR)(o.area),isPropertyCreation:e.isPropertyCreation,area:o.area})}})}function g(e){const{environment:o,position:t,layoutStore:d,module:c,transaction:u,userAction:f,performBeforeApplyUpsertOperations:y,afterUpsertTransaction:v}=e,_=d.pointer,g=d.getModules(),S=d.getRawModules(),b=S&&(0,s().F3)(S,(e=>e.id===c.id))||(0,a().cm)(c),C="page_main"===t.area||"page_details"===t.area?function(e){const{layoutPointer:o,modulesByArea:t,rawModulesByArea:i}=e,l=(0,s().B1)(t,(e=>"relationsGroup"===e.type));if("views_main_tab_modules"===(null==l?void 0:l.area))throw new Error("[ViewsMain Not Implemented] views_main_tab_modules area not supported for adding and moving modules");if("form_conditional_modules"===(null==l?void 0:l.area))return;const d=i&&(0,s().mT)(i,(e=>"relationsGroup"===e.type));if(!l)return;if(l&&d)return;const c=null==t?void 0:t[null==l?void 0:l.area][null==l?void 0:l.index];if(!c||"relationsGroup"!==c.type)throw new Error("relations group module location in normalized was incorrect, cannot backfill relations group module");return function(e){const{module:o,modulesByArea:t,layoutPointer:i}=e,l=(0,s().B1)(t,(e=>e.id===o.id));if(!l)throw new Error("cannot upsert module at current position because module does not have a current position");const d=(0,n().eJ)(l.area);if("views_main_tab_modules"===l.area||"views_main_tab_modules"===d)throw new Error("[ViewsMain Not Implemented] views_main_tab_modules area not supported for adding and moving modules");if("form_conditional_modules"===l.area||"form_conditional_modules"===d)throw new Error("[Forms Conditional Logic Not Implemented] form_conditional_modules area is not supported for adding and moving modules");const c=t[l.area];if(0===c.length)throw new Error("cannot upsert module at current position in area because that area is empty");const u=(0,a().cm)(o);if(0===l.index)return r().CIp.putModuleAfter({pointer:i,area:d,module:u,afterId:void 0});const p=c.at(l.index+1);if(!p)return r().CIp.putModuleAfter({pointer:i,area:d,module:u,afterId:void 0});return r().CIp.putModuleBefore({pointer:i,area:d,module:u,beforeId:p.id})}({module:c,layoutPointer:o,modulesByArea:t})}({layoutPointer:_,modulesByArea:g,rawModulesByArea:S}):null;C&&m().createAndCommitOrAppend({environment:o,perform:e=>{m().applyOperation({transaction:e,store:d,operation:C})},canUndo:!0,transaction:u,userAction:`${f||"BuilderLayoutModules.upsert"}.preOpBackfill`});const A=[],M=function(e){const{layoutStore:o,module:t,upsertPosition:i}=e,a=o.getModules(),l=(0,s().B1)(a,(e=>t.id===e.id));if(!l)return;if("form_conditional_modules"===l.area){return r().CIp.removeChildModule({pointer:o.pointer,modulesByArea:o.getModules(),module:t})}if("views_main_tab_modules"===l.area){const e="absolute"===i.type&&"views_main_tab_modules"===i.area?i.viewId:void 0,n=l.viewId;if(e===n)return;return[r().CIp.deleteModuleInArea({pointer:o.pointer,area:l.area,moduleId:t.id,viewId:n})]}if("page_main"===l.area||"page_details"===l.area||"form_layout_schema"===l.area){if(l.area===i.area)return;return[r().CIp.deleteModuleInArea({pointer:o.pointer,area:n().mt[l.area],moduleId:t.id})]}(0,p().t1)(l.area)}({upsertPosition:t,module:c,layoutStore:d});M&&A.push(...M);const P=function(e){const{upsertPosition:o,layoutPointer:t,modulesByArea:a,rawModuleToUpsert:d}=e;if("absolute"===o.type)return function(e){const{upsertPosition:o,rawModuleToUpsert:t,layoutPointer:a,modulesByArea:d}=e,c=(0,s().B1)(d,(e=>t.id===e.id)),{area:u}=o;if("form_conditional_modules"===u){const{parentConditionalGroupId:e,parentModuleId:n}=o;if(!(0,l().c)(t,"form_conditional_modules"))throw new Error("Can only add form question or placeholder modules to form_conditional_modules area.");const s=(0,i().s)(n,d);return r().CIp.addChildModule({pointer:a,module:t,parentModule:{area:s.area,module:s.module,conditionalGroupId:e}})}const p=o.index;if(p<0)throw new Error(`Cannot upsert module with id ${t.id} to a negative position`);if("views_main_tab_modules"===u){const e=o.viewId;if(!d[u]||!d[u][e])throw new Error("Cannot upsert module into views_main_tab_modules area that does not have views");const i="views_main_tab_modules"===(null==c?void 0:c.area)&&(null==c?void 0:c.viewId)===e?c.index:void 0,s=h({modulesInArea:d[u][e],indexOfModuleToUpsertInArea:i,indexToUpsertTo:p});if(!s)return;return[r().CIp.putModuleBeforeOrAfter({pointer:a,area:n().mt[u],viewId:e,module:t,direction:s.insertDirection,beforeOrAfterId:s.beforeOrAfterId})]}const m=d[u],f=(null==c?void 0:c.area)===u?c.index:void 0,y=h({modulesInArea:m,indexOfModuleToUpsertInArea:f,indexToUpsertTo:p});if(!y)return;return[r().CIp.putModuleBeforeOrAfter({pointer:a,area:n().mt[u],module:t,direction:y.insertDirection,beforeOrAfterId:y.beforeOrAfterId})]}({upsertPosition:o,rawModuleToUpsert:d,layoutPointer:t,modulesByArea:a});if("module_relative"===o.type)return[I({upsertPosition:o,rawModuleToUpsert:d,layoutPointer:t,modulesByArea:a})];if("area_relative"===o.type)return[w({upsertPosition:o,rawModuleToUpsert:d,layoutPointer:t,modulesByArea:a})];(0,p().t1)(o)}({module:c,upsertPosition:t,modulesByArea:g,layoutPointer:_,rawModuleToUpsert:b});P&&A.push(...P);const T="placeholder"===c.type&&"form_layout_schema"===t.area?`form_layout_new_question_${c.id}`:void 0;m().createAndCommitOrAppend({environment:o,undoCheckpoint:T,canUndo:!0,perform:e=>{y&&y({transaction:e});for(const o of A)m().applyOperation({transaction:e,store:d,operation:o})},transaction:u,userAction:f||"BuilderLayoutModules.upsert"}),v&&v()}function h(e){const{modulesInArea:o,indexOfModuleToUpsertInArea:t,indexToUpsertTo:r}=e;if(0===r||0===o.length)return{insertDirection:"before",beforeOrAfterId:void 0};const n=o.at(r);return n?void 0===t?{insertDirection:"before",beforeOrAfterId:n.id}:t!==r?t<r?{insertDirection:"after",beforeOrAfterId:n.id}:{insertDirection:"before",beforeOrAfterId:n.id}:void 0:{insertDirection:"after",beforeOrAfterId:void 0}}function I(e){const{upsertPosition:o,rawModuleToUpsert:t,layoutPointer:i,modulesByArea:a}=e,{area:l,direction:d,relativeToModuleId:c}=o,u=n().mt[l],p=(0,s().B1)(a,(e=>e.id===c));if(!p||p.area!==l)throw new Error(`Cannot find module with id: ${c} to add upsert relative to in ${l}`);if("views_main_tab_modules"===u){const e="views_main_tab_modules"===p.area?p.viewId:void 0;if(!e)throw new Error("Cannot upsert module into views_main_tab_modules area that does not have views");return r().CIp.putModuleBeforeOrAfter({pointer:i,area:"views_main_tab_modules",viewId:e,module:t,direction:"above"===d?"before":"after",beforeOrAfterId:c})}return r().CIp.putModuleBeforeOrAfter({pointer:i,area:u,module:t,direction:"above"===d?"before":"after",beforeOrAfterId:c})}function w(e){const{upsertPosition:o,rawModuleToUpsert:t,layoutPointer:i,modulesByArea:a}=e,{location:s}=o;if("views_main_tab_modules"===o.area){const e=o.viewId,d={pointer:i,area:n().mt[o.area],viewId:e,module:t};if("start"===s||"end"===s)return r().CIp.putModuleBeforeOrAfter({...d,direction:"start"===s?"before":"after",beforeOrAfterId:void 0});if("end_moveable"===s){var l;const e=S({area:o.area,modulesInArea:(null===(l=a.views_main_tab_modules)||void 0===l?void 0:l[o.viewId])??[]});return r().CIp.putModuleBeforeOrAfter({...d,direction:e.insertDirection,beforeOrAfterId:e.beforeOrAfterId})}(0,p().t1)(s)}const d={pointer:i,area:n().mt[o.area],module:t};if("start"===s||"end"===s)return r().CIp.putModuleBeforeOrAfter({...d,direction:"start"===s?"before":"after",beforeOrAfterId:void 0});if("end_moveable"===s){const e=a[o.area],t=S({area:o.area,modulesInArea:e});return r().CIp.putModuleBeforeOrAfter({...d,direction:t.insertDirection,beforeOrAfterId:t.beforeOrAfterId})}(0,p().t1)(s)}function S(e){const{area:o,modulesInArea:t}=e,{nonMoveableHeaderModules:r,moveableModules:n,nonMoveableFooterModules:i}=(0,d().Lk)(o,t);if(n.length){const e=(0,u().Z$)(n);if(!e)throw new Error("cannot find last moveable module to add below for end moveable");return{insertDirection:"after",beforeOrAfterId:e.id}}if(r.length){const e=(0,u().Z$)(r);if(!e)throw new Error("cannot find last header module to add below for end moveable");return{insertDirection:"after",beforeOrAfterId:e.id}}if(i.length){const e=i.at(0);if(!e)throw new Error("cannot find last header module to add below for end moveable");return{insertDirection:"before",beforeOrAfterId:e.id}}return{insertDirection:"after",beforeOrAfterId:void 0}}},913011:(e,o,t)=>{t.d(o,{H:()=>p});t(821057);var r=()=>t(792197),n=()=>t(308240),i=()=>t(215134),a=()=>t(6623),s=()=>t(639708),l=()=>t(269299),d=()=>t(590434),c=()=>t(655260),u=()=>t(772669);function p(e){let{environment:o,transaction:t,layoutStore:p,position:m,sessionId:f,beforePerformDeleteModule:y}=e;const v=p.getModules();if(!v)throw new Error("[deleteModuleAtPosition] modules by area not found for layout store");const _=(0,i().h7)(v,(e=>e.id===m.moduleId));if(!_)throw new Error("[deleteModuleAtPosition] module to delete not found");const{module:g,position:h}=_;if(!(0,a().Fo)(g))throw new Error("[deleteModuleAtPosition] module to delete is not removeable");var I;(l().createAndCommitOrAppend({environment:o,transaction:t,canUndo:!0,perform(e){!function(e){const{transaction:o,layoutStore:t,moduleLocation:i,moduleToDelete:a,beforePerformDeleteModule:c}=e;c&&c(o);if((0,s().Fc)(a)){const e=(0,d().m)(t,a);e&&(0,u().deleteViewsModuleDependencies)({layoutStore:t,module:e,transaction:o})}if("form_conditional_modules"===i.area){const e=r().CI.removeChildModule({pointer:t.pointer,modulesByArea:t.getModules(),module:a});for(const r of e)l().applyOperation({transaction:o,store:t,operation:r})}else{const e="views_main_tab_modules"===i.area?{area:i.area,viewId:i.viewId}:{area:n().mt[i.area]};l().applyOperation({transaction:o,store:t,operation:r().CI.deleteModuleInArea({...e,pointer:t.pointer,moduleId:a.id})})}}({environment:o,transaction:e,layoutStore:p,moduleLocation:h,moduleToDelete:g,beforePerformDeleteModule:y})},userAction:"pageLayout.deleteActions.deleteModuleAtPosition"}),f)&&c().DZ({environment:o,module:g,sessionId:f,collectionId:null===(I=p.getCollectionModel())||void 0===I?void 0:I.id,layoutId:p.id,context:(0,n().AR)(m.area),area:m.area})}},142730:(e,o,t)=>{t.d(o,{IR:()=>T,L0:()=>B,MF:()=>x,gm:()=>O,iQ:()=>F,m2:()=>A});t(821057),t(492176),t(7961),t(267602),t(653476);var r=()=>t(956057),n=()=>t(530980),i=()=>t(308240),a=()=>t(215134),s=()=>t(667932),l=()=>t(137785),d=()=>t(639708),c=()=>t(483791),u=()=>t(593515),p=()=>t(82937),m=()=>t(497065),f=()=>t(269299),y=()=>t(887430),v=()=>t(487270),_=()=>t(793935),g=()=>t(876822),h=()=>t(482162),I=()=>t(826955),w=()=>t(26796),S=()=>t(913011),b=()=>t(655260),C=()=>t(356117);function A(e){let{environment:o,transaction:t,collectionStore:r,userId:i,modules:a}=e;const l=(0,v().Ii)({environment:o,spaceId:r.getSpaceId(),table:c().Bh}),d=I().t1.createChildStore(r,l),{model:u,operations:[p]}=n().rp4.create({pointer:l,parent:r.pointer,createdByUserId:i,modules:a??(0,s()._P)()});f().applyOperation({transaction:t,store:d,operation:p});const m=n().kj1.setLayout(r.pointer,l);return f().applyOperation({transaction:t,store:r,operation:m}),{model:u,store:d}}function M(e){let o;return e?o=e:h().default.state.open&&h().default.state.targetStore?o=h().default.state.targetStore:g().default.state.mainEditorCurrentBlockStore&&(o=g().default.state.mainEditorCurrentBlockStore),o}function P(e){_().setUpdateExpand({environment:e,isExpanded:!1,from:"keyboard_default",saveDetailsSidebarPreference:!1}),p().xv({environment:e,from:"open_page_layout_editor",preventAnimation:!0})}function T(e){var o,t;let{environment:n,blockStore:i,collectionStore:a,collectionViewStore:s,from:l}=e;const d=function(e){var o;let t=M(e);if(null!==(o=t)&&void 0!==o&&o.isCollectionView()){const e=(0,y().fm)(t);t=e?e.resultsInViewOrder(1).at(0):void 0}return t}(i),c=window.location.href;P(n);const u=r().Il();w().Z.setState({isOpen:!0,mode:"layout-editor",collectionStore:a,pageStore:d,siteRootBlockStore:void 0,sessionId:u,initialSelectedModuleId:null==d||null===(o=d.getAssociatedCollectionStore())||void 0===o||null===(o=o.getLayoutStore())||void 0===o||null===(o=o.getModel())||void 0===o||null===(o=o.firstRawModuleOfType("titleWithIcon"))||void 0===o?void 0:o.id,urlOnOpen:c}),(0,b().Rt)({environment:n,from:l,context:"layout",sessionId:u,collectionId:null==a?void 0:a.id,existingLayoutId:null==a||null===(t=a.getLayoutStore())||void 0===t?void 0:t.id,collectionViewId:null==s?void 0:s.id})}function x(e){let{environment:o,store:t,siteRootBlockStore:n,from:i}=e;const a=M(t);P(o);const s=r().Il();w().Z.setState({isOpen:!0,mode:"site-settings-editor",collectionStore:void 0,pageStore:a,siteRootBlockStore:n,sessionId:s}),(0,b().Rt)({environment:o,context:"site",from:i,sessionId:s,collectionId:void 0,existingLayoutId:void 0})}function B(e){w().Z.getState().isOpen&&O(e)}function O(e){let{environment:o}=e;const t=w().Z.getState();if(!t.isOpen)throw new Error("Cannot close page layout editor. Page layout editor is not open.");"layout-editor"===t.mode&&t.urlOnOpen&&window.location.href!==t.urlOnOpen&&m().op(o),w().Z.setState({isOpen:!1})}function F(e){var o;let{environment:t,transaction:r,property:n,layoutStore:s}=e;const c=w().Z.getSessionId(),p=null===(o=s.getModel())||void 0===o?void 0:o.getRawModules(),m=s.getCollectionModel();if(!p||!m)return;const f=I().NW.createChildStore(s,m.pointer),y=(0,a()._i)(p,(e=>"titleWithIcon"===e.type));if(y&&(0,d().p9)(y.module)){var v;const{module:e,position:o}=y,a={...e,type:"titleWithIcon",propertyIds:null===(v=e.propertyIds)||void 0===v?void 0:v.filter((e=>e!==n))};(0,C().Uq)({environment:t,sessionId:c,transaction:r,layoutStore:s,position:{area:(0,i().Gc)(o.area),moduleId:e.id},updatedModule:(0,l().V)(a)})}const _=(0,a().MI)(p,(e=>"property"===e.type&&e.propertyId===n));for(const{module:a,position:l}of _){const e=a.id,o=(0,i().Gc)(l.area);(0,S().H)({environment:t,sessionId:c,transaction:r,layoutStore:s,position:{area:o,moduleId:e}})}const g=m.getFormat().collection_page_sections;if(g){const e=g.filter((e=>e.section!==n));u().Do({store:f,pageSectionFormats:e,transaction:r,environment:t})}}},356117:(e,o,t)=>{t.d(o,{Uq:()=>m,Wb:()=>y});t(821057),t(267602),t(470928),t(30005);var r=()=>t(109477),n=()=>t(530980),i=()=>t(308240),a=()=>t(712185),s=()=>t(215134),l=()=>t(667932),d=()=>t(639708),c=()=>t(827370),u=()=>t(421654),p=()=>t(269299);function m(e){let{environment:o,transaction:t,layoutStore:r,position:l,updatedModule:d,sessionId:c}=e;const u=i().mt[l.area],m=r.getRawModules();if("form_conditional_modules"===u){const e=null==m?void 0:m[u];if(!(null==e?void 0:e[l.moduleId]))throw new Error("Unable to find module being updated.");return void p().createAndCommitOrAppend({environment:o,transaction:t,canUndo:!0,perform(e){p().applyOperation({transaction:e,store:r,operation:n().CIp.updateNestedModule(r.pointer,u,(0,a().cm)(d))})},userAction:"BuilderLayoutModules.updateModule"})}if(!m)throw new Error("Unable to find modules");const f=(0,s().mT)(m,(e=>e.id===l.moduleId));if(!f||f.area!==u)throw new Error("Unable to find module being updated.");p().createAndCommitOrAppend({environment:o,transaction:t,canUndo:!0,perform(e){p().applyOperation({transaction:e,store:r,operation:n().CIp.updateModuleInArea({pointer:r.pointer,module:(0,a().cm)(d),..."views_main_tab_modules"===f.area?{area:f.area,viewId:f.viewId}:{area:f.area}})})},userAction:"BuilderLayoutModules.updateModule"})}function f(e){var o,t,r;let{collectionStore:n,layoutStore:i}=e;const a=new Map,s=n.getFormat(),l=[...null===(o=i.getModules())||void 0===o?void 0:o.page_main,...null===(t=i.getModules())||void 0===t?void 0:t.page_details],c=new Map;null===(r=s.property_visibility)||void 0===r||r.forEach((e=>{c.set(e.property,e)})),l.forEach((e=>{if(!(0,d().LP)(e))return(0,d().f)(e)?(a.set(e.propertyId,{property:e.propertyId}),void c.set(e.propertyId,{property:e.propertyId,visibility:"show"})):void 0;e.propertyIds.forEach((e=>{a.set(e,{property:e}),c.set(e,{property:e,visibility:"show"})}))}));const u=n.getNormalizedPropertyGroups();var p;u?u.forEach((e=>{var o;null===(o=e.propertyIds)||void 0===o||o.forEach((e=>{a.has(e)||a.set(e,{property:e})}))})):null===(p=s.collection_page_properties)||void 0===p||p.forEach((e=>{a.has(e.property)||a.set(e.property,e)}));return{propertiesFormat:Array.from(a.values()),propertyVisibility:Array.from(c.values())}}function y(e){let{environment:o,transaction:t,collectionStore:i,layoutStore:a}=e;const{propertiesFormat:s,propertyVisibility:m}=f({collectionStore:i,layoutStore:a});p().createAndCommitOrAppend({environment:o,transaction:t,canUndo:!0,perform(e){const o=a.getBlockChildrenPointers(),t=a.firstModuleOfType("viewsMain");t&&(0,d().aJ)(t)&&o.find((e=>c().dr.isEqual(e,t.collection_view_block_pointer)))&&p().applyOperation({transaction:e,store:a,operation:n().CIp.removeBlockChild(a.pointer,t.collection_view_block_pointer.id)}),p().applyOperation({transaction:e,store:a,operation:n().CIp.setModulesByAreas(a.pointer,(0,l()._P)())}),p().applyOperation({transaction:e,store:a,operation:n().CIp.deleteFormat(a.pointer)});const f=i.getFormat(),{page_section_visibility:y}=f;u().FH({stores:[i],update:{property_groups:void 0,collection_page_properties:s,property_visibility:m,...y?{page_section_visibility:r().dN}:void 0},transaction:e})},userAction:"BuilderLayoutModules.resetLayoutToDefault"})}},772669:(e,o,t)=>{t.r(o),t.d(o,{deleteViewsModuleDependencies:()=>i});var r=()=>t(349220),n=()=>t(332542);function i(e){const{layoutStore:o,module:t,transaction:i}=e,a=(0,r().TO)(t.getCollectionViewBlockStore());n().hr({childStore:a,parentStore:o,transaction:i})}},590434:(e,o,t)=>{t.d(o,{m:()=>i});var r=()=>t(826955);class n{constructor(e,o){this.parentStore=e,this.impl=o}getType(){return this.impl.type}getCollectionViewBlockStoreWithParent(e){return r().G.createChildStore(e,this.impl.collection_view_block_pointer)}getCollectionViewBlockStore(){return this.getCollectionViewBlockStoreWithParent(this.parentStore)}getInitialCollectionViewPointer(){const e=this.getCollectionViewBlockStoreWithParent(this.parentStore).getCollectionViewPointers();if(e.length>0)return e[0]}getId(){return this.impl.id}isUnlistedView(){return!1}createCollectionViewContext(){const e=this.getCollectionViewBlockStoreWithParent(this.parentStore),o=this.getInitialCollectionViewPointer();if(!o)return;const t=r().Xr.createChildStore(e,o);return{type:"collectionView",collectionViewBlockStore:e,collectionStore:t.getCollectionStore(),collectionViewStore:t,pageVisitSourceOverride:void 0}}}function i(e,o){if("views"===o.type||"viewsMain"===o.type)return new n(e,o)}},808282:(e,o,t)=>{t.d(o,{Z:()=>n});class r extends(()=>t(263184))().default{getInitialState(){return{openTooltip:void 0}}}const n=new r},667932:(e,o,t)=>{t.d(o,{KD:()=>l,_P:()=>c,l2:()=>u,x9:()=>d});t(267602),t(653476),t(241792);var r=()=>t(543172),n=()=>t(210349),i=()=>t(639708),a=()=>t(712185);const s={page_main:[{id:"cover",type:"cover"},{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyIds:[]},{id:"properties",type:"properties"},{id:"discussions",type:"discussions"},{id:"editor",type:"editor"}],page_details:[],form_layout_schema:[]},l={page_main:[{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyIds:[]},{id:"editor",type:"editor"}],page_details:[],form_layout_schema:[]};function d(e){return(0,a().Dl)({modulesByArea:s,collectionSchema:null==e?void 0:e.collectionSchema,collectionFormat:null==e?void 0:e.collectionFormat})}function c(){return{page_layout_schema:(0,a().L0)(s.page_main).map((e=>{if(!(0,i().zP)(e))return(0,n().T)(e)?{...e,id:(0,r().ZP)()}:e})).filter((e=>void 0!==e)),page_info_layout_schema:(0,a().L0)(s.page_details).map((e=>{if(!(0,i().zP)(e))return(0,n().T)(e)?{...e,id:(0,r().ZP)()}:e})).filter((e=>void 0!==e)),form_layout_schema:void 0}}function u(e,o){const t=void 0===o?[{id:(0,r().ZP)(),type:"formQuestion",formQuestionId:e}]:[{id:(0,r().ZP)(),type:"formQuestion",formQuestionId:e},{id:(0,r().ZP)(),type:"formQuestion",formQuestionId:o}];return{page_layout_schema:void 0,page_info_layout_schema:void 0,form_layout_schema:[{id:(0,r().ZP)(),type:"cover"},{id:(0,r().ZP)(),type:"formTitle"},...t,{id:(0,r().ZP)(),type:"formSubmit"}]}}},210349:(e,o,t)=>{t.d(o,{T:()=>a,s:()=>i});const r={normalizedTitleWithIcon:!0,properties:!0,property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,views:!0,viewsMain:!0,relationsGroup:!0,formQuestion:!0,placeholder:!0,deleted_property:!1,cover:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,transcript:!1,formTitle:!1,formSubmit:!1},n={properties:!0,property:!0,relationsGroup:!0,formQuestion:!0,placeholder:!0,titleWithIcon:!0,cover:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,transcript:!1,formTitle:!1,formSubmit:!1,views:!0,viewsMain:!0,collectionView:!0,collectionViewV2:!0};function i(e,o){return!("editor"!==e.type||null==o||!o.isLayoutViewModuleEnabled||null!=o&&o.isLayoutViewModuleNextEnabled)||r[e.type]}function a(e){return n[e.type]}},6623:(e,o,t)=>{t.d(o,{Fo:()=>i,m7:()=>a});const r={property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,deleted_property:!1,relationsGroup:!0,formSubmit:!0,formQuestion:!0,formTitle:!0,placeholder:!0,transcript:!0,cover:!1,normalizedTitleWithIcon:!1,properties:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,views:!0,viewsMain:!1},n={property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,deleted_property:!1,formSubmit:!1,formQuestion:!1,formTitle:!1,placeholder:!1,transcript:!1,cover:!1,normalizedTitleWithIcon:!1,properties:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,relationsGroup:!0,editor:!1,views:!1,viewsMain:!1};function i(e){return r[e.type]}function a(e){return n[e.type]}}}]);