"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[99380],{929586:(e,t,o)=>{o.r(t),o.d(t,{default:()=>v});o(670560);var i=o(667294),a=()=>o(142735),s=()=>o(955620),r=()=>o(788860),n=()=>o(448768),c=()=>o(916673),l=()=>o(231077),u=()=>o(990966),d=()=>o(205228),m=()=>o(191003),p=()=>o(505462),f=()=>o(953624),g=()=>o(127519),b=()=>o(855238),h=()=>o(827973),y=()=>o(255577),N=()=>o(388284),k=o(785893);const v=function(){(0,i.useEffect)((()=>{var e;return null===(e=l().electronApi)||void 0===e||null===(e=e.contextMenu)||void 0===e||e.addListener(_),()=>{var e;null===(e=l().electronApi)||void 0===e||null===(e=e.contextMenu)||void 0===e||e.removeListener(_)}}),[]);const e=(0,o(219727).O7)(),t=(0,i.useRef)(document.activeElement),s=(0,i.useRef)(p().get());let u=null,m=null;(t.current instanceof HTMLInputElement||t.current instanceof HTMLTextAreaElement)&&(u=t.current.selectionStart,m=t.current.selectionEnd);const{menuInfo:g,open:v}=(0,a().Kw)(f().Z),T=(0,a().VK)((()=>{if(!g)return[];const i=function(e,t){const o=[],i=function(e,t){const o="SpellCheckStore"in t&&t.SpellCheckStore,i=[];if(R(e)&&o&&o.isEnabled()){const t=o.getCorrections(e);for(const e of t)i.push({key:e,action:()=>{l().electronApi&&l().electronApi.replaceMisspelling&&l().electronApi.replaceMisspelling(e)},render:t=>(0,k.jsx)(h().Z,{...t,title:e})})}return i}(e,t);if(i.length>0){const e=o.length>0;o.push({key:"spellingCorrectionItems",items:i,render:t=>(0,k.jsx)(N().Z,{...t,topBorder:e})})}const a=function(e,t){const o="SpellCheckStore"in t&&t.SpellCheckStore,i=[];R(e)&&o&&o.isEnabled()&&i.push({key:"learn-spelling",action:()=>{o.addToDictionary(e.misspelledWord)},render:e=>(0,k.jsx)(h().Z,{...e,title:(0,k.jsx)(r()._H,{defaultMessage:"Add to dictionary",id:"desktop.spellcheckMenuItem.addToDictionary.title"})})});R(e)&&o&&o.isEnabled()&&i.push({key:"disable",action:()=>{o.setEnabled(!1)},render:e=>(0,k.jsx)(h().Z,{...e,title:(0,k.jsx)(r()._H,{defaultMessage:"Disable spell check",id:"desktop.spellcheckMenuItem.disableSpellcheck.title"})})});return i}(e,t);if(a.length>0){const e=o.length>0;o.push({key:"disableSpellCheckItems",items:a,render:t=>(0,k.jsx)(N().Z,{...t,topBorder:e})})}const s=function(e){const t=[];e.selectionText&&e.selectionText.length>0&&t.push({key:"google",action:()=>{if(l().electronApi){const t=`https://www.google.com/search?q=${encodeURIComponent(e.selectionText.trim())}`;l().electronApi.openExternalUrl(t)}},render:e=>(0,k.jsx)(h().Z,{...e,title:(0,k.jsx)(r()._H,{defaultMessage:"Search with Google",id:"desktop.searchMenuItem.searchWithGoogle.title"})})});return t}(e);if(s.length>0){const e=o.length>0;o.push({key:"searchItems",items:s,render:t=>(0,k.jsx)(N().Z,{...t,topBorder:e})})}const u=function(e){const t=[];if(!e.linkURL||0===e.linkURL.length)return t;const o=n().b({url:e.linkURL,domainBaseUrl:d().default.domainBaseUrl,protocol:d().default.protocol});e.linkURL.startsWith("mailto:")?t.push({key:"copy-email",action:()=>{var t;null!==(t=l().electronApi)&&void 0!==t&&t.copyText&&l().electronApi.copyText(e.linkText)},render:e=>(0,k.jsx)(h().Z,{...e,title:(0,k.jsx)(r()._H,{defaultMessage:"Copy email address",id:"desktop.rightClickMenu.copyEmailAddress"})})}):t.push({key:"copy-link",action:()=>{var e;null!==(e=l().electronApi)&&void 0!==e&&e.copyText&&l().electronApi.copyText(o)},render:e=>(0,k.jsx)(h().Z,{...e,title:(0,k.jsx)(r()._H,{defaultMessage:"Copy link",id:"desktop.rightClickMenu.copyLink"})})});t.push({key:"open-link",action:()=>{l().openExternalUrl(o)},render:e=>(0,k.jsx)(h().Z,{...e,title:(0,k.jsx)(r()._H,{defaultMessage:"Open link in browser",id:"desktop.rightClickMenu.openLinkInBrowser"})})});const i=(a=o,(0,c().SV)(a)===d().default.domainBaseUrl);var a;i&&t.push({key:"open-link-new-tab",action:()=>{l().openInNewTab({url:o,position:"after-children"})},render:e=>(0,k.jsx)(h().Z,{...e,title:(0,k.jsx)(r()._H,{defaultMessage:"Open link in new tab",id:"desktop.rightClickMenu.openLinkInNewTab"})})});i&&t.push({key:"open-link-new-window",action:()=>{l().openInNewWindow(o)},render:e=>(0,k.jsx)(h().Z,{...e,title:(0,k.jsx)(r()._H,{defaultMessage:"Open link in new window",id:"desktop.rightClickMenu.openLinkInNewWindow"})})});return t}(e);if(u.length>0){const e=o.length>0;o.push({key:"linkMenuItems",items:u,render:t=>(0,k.jsx)(N().Z,{...t,topBorder:e})})}const m=function(e){const t=[];e.hasImageContents&&e.srcURL&&e.srcURL.length>0&&(t.push({key:"copy-image",action:()=>{l().electronApi&&l().electronApi.copyImage&&l().electronApi.copyImage(e.srcURL)},render:e=>(0,k.jsx)(h().Z,{...e,title:(0,k.jsx)(r()._H,{defaultMessage:"Copy image",id:"desktop.rightClickMenu.copyImage"})})}),t.push({key:"copy-image-address",action:()=>{l().electronApi&&l().electronApi.copyText&&l().electronApi.copyText(n().b({url:e.srcURL,domainBaseUrl:d().default.domainBaseUrl,protocol:d().default.protocol}))},render:e=>(0,k.jsx)(h().Z,{...e,title:(0,k.jsx)(r()._H,{defaultMessage:"Copy image address",id:"desktop.rightClickMenu.copyImageAddress"})})}));return t}(e);if(m.length>0){const e=o.length>0;o.push({key:"imageMenuItems",items:m,render:t=>(0,k.jsx)(N().Z,{...t,topBorder:e})})}const p=function(e){var t;const o=[],i=(null===(t=e.selectionText)||void 0===t?void 0:t.length)??0;if(!M(e)&&0===i)return o;e.editFlags.canCut&&o.push({key:"cut",action:()=>{l().electronApi&&l().electronApi.cut&&l().electronApi.cut()},render:e=>(0,k.jsx)(b().Z,{...e,title:(0,k.jsx)(r()._H,{defaultMessage:"Cut",id:"desktop.textEditingMenuItem.cutAction.title"}),shortcut:"cut"})});e.editFlags.canCopy&&o.push({key:"copy",action:()=>{l().electronApi&&l().electronApi.copy&&l().electronApi.copy()},render:e=>(0,k.jsx)(b().Z,{...e,title:(0,k.jsx)(r()._H,{defaultMessage:"Copy",id:"desktop.textEditingMenuItem.copyAction.title"}),shortcut:"copy"})});e.editFlags.canPaste&&o.push({key:"paste",action:()=>{l().electronApi&&l().electronApi.paste&&l().electronApi.paste()},render:e=>(0,k.jsx)(b().Z,{...e,title:(0,k.jsx)(r()._H,{defaultMessage:"Paste",id:"desktop.textEditingMenuItem.pasteAction.title"}),shortcut:"paste"})});return o}(e);if(p.length>0){const e=o.length>0;o.push({key:"textEditingItems",items:p,render:t=>(0,k.jsx)(N().Z,{...t,topBorder:e})})}const f=function(e,t){const o="SpellCheckStore"in t&&t.SpellCheckStore,i=[];M(e)&&o&&!o.isEnabled()&&i.push({key:"enable",action:()=>{o.setEnabled(!0)},render:e=>(0,k.jsx)(h().Z,{...e,title:(0,k.jsx)(r()._H,{defaultMessage:"Enable spell check",id:"desktop.spellcheckMenuItem.enableSpellcheck.title"})})});return i}(e,t);if(f.length>0){const e=o.length>0;o.push({key:"enableSpellCheckItems",items:f,render:t=>(0,k.jsx)(N().Z,{...t,topBorder:e})})}return o}(g,e);for(const a of i)for(const i of a.items){const a=i.action;i.action=i=>{t.current instanceof HTMLElement&&t.current.focus(),t.current instanceof HTMLInputElement||t.current instanceof HTMLTextAreaElement?(t.current.selectionStart=u,t.current.selectionEnd=m):s.current&&s.current.startOffset!==s.current.endOffset&&p().set(s.current,e.device),o(492788).default.afterNextFlush((()=>{a(i)}))}}return i}),[t,e,g,m,u]),{x:S,y:I}=function(e){const t=l().getCurrentZoom();return{x:e?e.x/t:0,y:e?e.y/t:0}}(g),x=new DOMRect(S,I,0,0);return(0,i.useEffect)((()=>{v&&(t.current=document.activeElement)}),[v]),(0,k.jsx)(o(967092).ZP,{open:v&&T.length>0,popupType:o(104088).k.Popup,originRect:x,render:()=>(0,k.jsx)(o(206352).Z,{debugName:"ElectronContextMenu",capture:!0,allowEsc:!0,children:(0,k.jsx)(o(198829).Z,{menuType:o(352230).o.Popup,children:(0,k.jsx)(y().Z,{type:y().i.Vertical,sections:T,initialFocus:void 0,onAccept:j})})}),onDismiss:j})};function M(e){return e.isEditable||"none"!==(null==e?void 0:e.formControlType)}function R(e){return M(e)&&e.misspelledWord&&e.misspelledWord.length>0}function _(e,t){if(t.misspelledWord){const e=g().default.state,o="editing"===e.mode&&(0,m().QY)(e.multiSelection);if(o&&o.selection.startIndex===o.selection.endIndex){const e=s().Oqk({textValue:o.store.getValue()||[],substring:t.misspelledWord,ignoreCase:!1}),i=o.selection.startIndex,a=s().PEL(e,i);a&&u().setSelection({store:o.store,selection:a})}}f().Z.setState({open:!0,menuInfo:t})}function j(){f().Z.setState({...f().Z.state,open:!1})}},309672:(e,t,o)=>{o.d(t,{$2:()=>ne,Bg:()=>ae,P6:()=>q,Qs:()=>Z,VP:()=>re,W9:()=>ie,Wy:()=>te,XW:()=>A,_2:()=>z,_u:()=>oe,bC:()=>L,gt:()=>Y,iR:()=>H,jQ:()=>se,kU:()=>Q,oP:()=>B,qJ:()=>w,rn:()=>D,sn:()=>G,tA:()=>O,v4:()=>ee});o(670560),o(267602),o(653476),o(30005),o(241792);var i=()=>o(513670),a=()=>o(696459),s=()=>o(326966),r=()=>o(816512),n=()=>o(731424),c=()=>o(156642),l=()=>o(163262),u=()=>o(552221),d=()=>o(226413),m=()=>o(532850),p=()=>o(803021),f=()=>o(646574),g=()=>o(109477),b=()=>o(22183),h=()=>o(942275),y=()=>o(321160),N=()=>o(530980),k=()=>o(528514),v=()=>o(375255),M=()=>o(548347),R=()=>o(494616),_=()=>o(396136),j=()=>o(696056),T=()=>o(752778),S=()=>o(255933),I=()=>o(458196),x=()=>o(306164),V=()=>o(989478),P=()=>o(955620),U=()=>o(499110),E=()=>o(501274),C=()=>o(496205);const w=(0,o(788860).vU)({defaultPluralizedUserNames:{defaultMessage:"Someone",id:"pushNotification.pluralizedUserNames.defaultLabel"},defaultPermissionGroupName:{defaultMessage:"Deleted group",id:"pushNotification.permissionGroupName.defaultLabel"},defaultPageName:{defaultMessage:"a Notion page",id:"pushNotification.pageName.defaultLabel"},untitledPermissionGroupName:{defaultMessage:"Untitled group",id:"pushNotification.permissionGroupName.untitledLabel"},userEditedPermissionGroup:{defaultMessage:"{userName} edited {permissionGroupName}",id:"pushNotification.userEditedTarget.label"},userDeletedPermissionGroup:{defaultMessage:"{userName} deleted {permissionGroupName}",id:"pushNotification.userDeletedTarget.label"},userCreatedPermissionGroup:{defaultMessage:"{userName} created {permissionGroupName}",id:"pushNotification.userCreatedTarget.label"},unknownAuthor:{defaultMessage:"Unknown author",id:"pushNotification.authorPhrase.unknown"},untitledSpaceName:{defaultMessage:"Untitled",id:"pushNotification.untitledSpaceName.label"},untitledTeamName:{defaultMessage:"Untitled",id:"pushNotification.untitledTeamName.label"},untitledCollectionName:{defaultMessage:"Untitled",id:"pushNotification.untitledCollectionName.placeholder"},untitledBlockTitle:{defaultMessage:"Untitled",id:"pushNotification.untitledBlockTitle.placeholder"},twoUserNames:{defaultMessage:"{firstAuthor} and {secondAuthor}",id:"pushNotification.twoUserNames.label"},threePlusUserNames:{defaultMessage:"{othersCount, plural, one {{firstAuthor} and {othersCount} other} other {{firstAuthor} and {othersCount} others}}",id:"pushNotification.threePlusUserNames.label"},editorPermissionLabel:{defaultMessage:"Full access",id:"pushNotifications.editorPermissionLevel.label"},readerPermissionLabel:{defaultMessage:"Read only",id:"pushNotifications.readerPermissionLevel.label"},editOnlyPermissionLabel:{defaultMessage:"Edit only",id:"pushNotifications.editOnlyPermissionLevel.label"},editPermissionLabel:{defaultMessage:"Edit",id:"pushNotifications.editPermissionLevel.label"},commentOnlyPermissionLabel:{defaultMessage:"Comment only",id:"pushNotifications.commentOnlyPermissionLevel.label"},noAccessPermissionLabel:{defaultMessage:"No access",id:"pushNotifications.noAccessPermissionLevel.label"},publicPermissionRoleLabel:{defaultMessage:"Public ({permissionLevel})",id:"pushNotifications.publicPermissions.label"},userNameWithRole:{defaultMessage:"{userName} ({permissionLevel})",id:"pushNotifications.userPermissionsWithRole.label"},botNameWithRole:{defaultMessage:"{botName} ({permissionLevel})",id:"pushNotifications.botPermissionsWithRole.label"},spaceNameWithRole:{defaultMessage:"{spaceName} ({permissionLevel})",id:"pushNotifications.spacePermissionsWithRole.label"},imageInPushNotification:{defaultMessage:"{imageEmoji} Image",id:"pushNotification.imageInPushNotification.placeholder"},topLevelBlockCreated:{defaultMessage:"{userName} created {targetName} in {spaceName}",id:"pushNotification.userCreatedBlockInSpace.message"},topLevelBlockDeleted:{defaultMessage:"{userName} deleted {targetName} in {spaceName}",id:"pushNotification.userDeletedBlockInSpace.message"},collectionRowCreated:{defaultMessage:"{userName} created {targetName} in {collectionName}",id:"pushNotification.userCreatedRowInCollection.message"},collectionRowDeleted:{defaultMessage:"{userName} deleted {targetName} in {collectionName}",id:"pushNotification.userDeletedRowInCollection.message"},emptyBlockEditedProperty:{defaultMessage:"Empty",id:"pushNotification.emptyBlockPropertyValueEdited.placeholderLabel"},propertyNameAndValueEdited:{defaultMessage:"{propertyName} ({propertyValue})",id:"pushNotification.propertyNameWithEditedValue.notificationSubject"},propertyNameAndValueNotificationBody:{defaultMessage:"{propertyName} ({propertyValue})",id:"pushNotification.propertyNameWithEditedValue.notificationBody"},blockDeletedEditBody:{defaultMessage:"[Deleted] {renderedBlock}",id:"pushNotification.deletedBlock.notificationContents"},blockEditedNotification:{defaultMessage:"{userName} edited {blockName}",id:"pushNotification.blockEdited.notificationSubject"},blockPropertyEditedNotification:{defaultMessage:"{userName} edited {blockName}",id:"pushNotification.blockPropertyEdited.notificationSubject"},mobileBlockPropertyEditedNotification:{defaultMessage:"{userName} edited",id:"pushNotification.mobileBlockPropertyEdited.notificationSubject"},userEditedPermissionsFor:{defaultMessage:"{userName} edited permissions for {targetName}",id:"pushNotifications.permissionsEditedForPageOrSpace.notificationSubject"},userMentionedIn:{defaultMessage:"{userName} mentioned you in {targetName}",id:"pushNotifications.userMentionedInPage.notificationSubject"},mobileUserMentionedIn:{defaultMessage:"{userName} mentioned you",id:"pushNotifications.mobileUserMentionedInPage.notificationSubject"},permissionGroupMentionedIn:{defaultMessage:"{userName} mentioned {groupName} in {targetName}",id:"pushNotifications.groupMentionedInPage.notificationSubject"},teamMentionedIn:{defaultMessage:"{userName} mentioned {teamName} in {targetName}",id:"pushNotifications.teamMentionedInPage.notificationSubject"},userDeletedComment:{defaultMessage:"[Deleted]💬 {commentText}",id:"pushNotifications.userDeletedCommentText.notificationContents"},userCommentedSubject:{defaultMessage:"{userName} commented in {targetName}",id:"pushNotifications.userCommentedSubject.notificationSubject"},userSuggestedSubject:{defaultMessage:"{userName} suggested in {targetName}",id:"pushNotifications.userSuggestedSubject.notificationSubject"},mobileUserCommentedSubject:{defaultMessage:"{userName} commented",id:"pushNotifications.mobileUserCommentedSubject.notificationSubject"},mobileUserSuggestedSubject:{defaultMessage:"{userName} commented",id:"pushNotifications.mobileUserSuggestedSubject.notificationSubject"},userAddedToSpace:{defaultMessage:"{userName} added you to {workspaceName}",id:"pushNotifications.userAddedToSpace.notificationSubject"},mobileUserInvited:{defaultMessage:"{userName} invited you",id:"pushNotifications.mobileUserInvited.notificationSubject"},mobileUserInvitedByBot:{defaultMessage:"You have been invited",id:"pushNotifications.mobileUserInvitedByBot.notificationSubject"},userInvitedToSpace:{defaultMessage:"{userName} invited you to {workspaceName}",id:"pushNotifications.userInvitedToSpace.notificationSubject"},userInvitedToSpaceByBot:{defaultMessage:"You have been invited to {workspaceName}",id:"pushNotifications.userInvitedToSpaceByBot.notificationSubject"},userEditedCollectionSubject:{defaultMessage:"{userName} edited {collectionName}",id:"pushNotifications.collectionEdited.notificationSubject"},userEditedCollectionPageLayoutSubject:{defaultMessage:"{userName} edited the layout of {collectionName}",id:"pushNotifications.collectionPageLayoutEdited.notificationSubject"},userCreatedCollectionSubject:{defaultMessage:"{userName} created {collectionName}",id:"pushNotifications.collectionCreated.notificationSubject"},collectionDescriptionDeleted:{defaultMessage:"{userName} deleted the description for {collectionName}",id:"pushNotifications.collectionDescriptionDeleted.notificationSubject"},collectionDescriptionCreated:{defaultMessage:"{userName} added a description for {collectionName}",id:"pushNotifications.collectionDescriptionAdded.notificationSubject"},untitledCollectionView:{defaultMessage:"Untitled",id:"pushNotifications.untitledCollection.label"},collectionViewEditedSubject:{defaultMessage:"{userName} edited view {collectionViewName} in {collectionName}",id:"pushNotifications.collectionViewEdited.notificationSubject"},collectionPropertyEditedUnknown:{defaultMessage:"Unknown",id:"pushNotifications.unknownCollectionPropertyName.label"},collectionPropertyEditedSubject:{defaultMessage:"{userName} edited property {propertyType} in {collectionName}",id:"pushNotifications.collectionPropertyEdited.subject"},reminderSubject:{defaultMessage:"Reminder in {pageName}",id:"pushNotifications.reminderChanged.subject"},pageLockedActivity:{defaultMessage:"{userName} locked {pageName}",id:"pushNotifications.pageLocked.subject"},pageUnlockedActivity:{defaultMessage:"{userName} unlocked {pageName}",id:"pushNotifications.pageUnlocked.subject"},emailEditedActivity:{defaultMessage:"{userName} edited their account settings",id:"pushNotifications.emailAccountSettingsEdited.subject"},emptyPropertyBody:{defaultMessage:"Empty",id:"pushNotifications.emptyPropertyValueInCollection.label"},unknownRelationValueChange:{defaultMessage:"Unknown",id:"pushNotifications.unknownRelationPropertyChanged.label"},unknownAuthorInPropertySchemaChange:{defaultMessage:"Unknown author",id:"pushNotifications.unknownAuthorUpdatedProperty.label"},accessRequestedSubject:{defaultMessage:"{userName} requested access to {pageName}",id:"pushNotifications.accessRequested.subject"},editAccessRequestedSubject:{defaultMessage:"{userName} requested edit access to {pageName}",id:"pushNotifications.editAccessRequested.subject"},accessRequestResolvedApprovedSubject:{defaultMessage:"Your request to invite {guestEmail} to {pageName} has been approved",id:"pushNotifications.accessRequestResolved.approved.subject"},accessRequestResolvedRejectedSubject:{defaultMessage:"Your request to invite {guestEmail} to {pageName} has been rejected",id:"pushNotifications.accessRequestResolved.subject"},membershipRequestedSubject:{defaultMessage:"{userName} requested to add a new member to {workspaceName}",id:"pushNotifications.membershipRequested.subject"},guestInviteRequestedSubject:{defaultMessage:"{userName} requested to invite a guest to {workspaceName}",id:"pushNotifications.guestInviteRequested.subject"},blockFormatEditPageIconName:{defaultMessage:"Page Icon",id:"pushNotifications.formatChange.pageIcon.label"},pageIconImagePlaceholder:{defaultMessage:"Image",id:"pushNotifications.formatChange.pageIcon.imagePlaceholder"},pageDeletedActivity:{defaultMessage:"{userName} deleted {pageName}",id:"pushNotifications.pageDeleted.subject"},pageRestoredActivity:{defaultMessage:"{userName} restored {pageName}",id:"pushNotifications.pageRestored.subject"},pagePermanentlyDeletedActivity:{defaultMessage:"{userName} permanently deleted {pageName}",id:"pushNotifications.pagePermanentlyDeleted.subject"},userInvitedToTeam:{defaultMessage:"{userName} invited you to {teamName}",id:"pushNotifications.userInvitedToTeam.notificationSubject"},privateContentTransferred:{defaultMessage:"{author} transferred private content from {fromUserName} to you: {pageName}",id:"pushNotifications.privateContentTransferred.notificationSubject"},verificationExpired:{defaultMessage:"Verification expired for {pageName}",id:"pushNotifications.verificationExpired.notificationSubject"},importSuccessful:{defaultMessage:"Your {importSource} import was successful",id:"pushNotifications.importCompleted.notificationSubject"},importFailed:{defaultMessage:"Your {importSource} import has failed",id:"pushNotifications.importFailed.notificationSubject"},exportCompleted:{defaultMessage:"Your workspace export is ready",id:"pushNotifications.exportCompleted.notificationSubject"},inAppNotificationAutomationActionTriggered:{defaultMessage:"{automationName} sent you a message",id:"pushNotifications.inAppNotificationAutomationActionTriggered.notificationSubject"},noConflictsFound:{defaultMessage:"No conflicts found",id:"pushNotifications.noConflictsFound.notificationSubject"},automationTypecheckErrorRaisedSubject:{defaultMessage:"{automationName} is invalid",id:"pushNotifications.automationTypecheckErrorRaised.notificationSubject"},automationTypecheckErrorRaisedBody:{defaultMessage:"Resolve any errors or remove failing steps to enable this automation",id:"pushNotifications.automationTypecheckErrorRaised.notificationBody"}});function q(e){const{activity:t,getRecordValue:o}=e,a=t.getEdits();return i().oA((0,s().cf)(i().xH(a.map((e=>e.authors||[])))).map((e=>{const t=o(e);if(t)return(0,r().LU)({table:e.table,value:t})})))}function A(e,t){const o=e.map((e=>e?(0,r().$4)(t,e):t.formatMessage(w.unknownAuthor)));return function(e,t){if(1===t.length)return t[0];if(2===t.length)return e.formatMessage(w.twoUserNames,{firstAuthor:t[0],secondAuthor:t[1]});if(t.length>2){const o=t.length-1;return e.formatMessage(w.threePlusUserNames,{othersCount:o,firstAuthor:t[0]})}return e.formatMessage(w.defaultPluralizedUserNames)}(t,o)}function L(e){var t;const{recipientUser:o,authors:i}=e,a=i.filter((e=>e.id!==(null==o?void 0:o.id)));if(0===a.length)return;const s=a[0];var r;return s.table===V().KJ&&null!==(t=s.asActor)&&void 0!==t&&t.profile_photo?null===(r=s.asActor)||void 0===r?void 0:r.profile_photo:void 0}function Z(e){if(!i().xb(e))return e[0].id}function J(e){const{blockValue:t,getRecordValue:o,userTimeZone:i,intl:a}=e,s=N().kk5.fromBlock(t),r=N().omK.fromGetRecordValueFn(o);return s.getRenderTitleWithEmojiOrPlaceholder({getRecordModel:r,userTimeZone:i,intl:a})}function B(e){return function(e){const{activity:t,getRecordValue:o,pageVisitSource:i,userTimeZone:a,intl:s}=e,r=N().omK.fromGetRecordValueFn(o),n=t.navigable_block_id||t.top_level_block_id||t.collection_row_id;if(n){const c=o({table:_().iU,id:n,spaceId:t.space_id});if(c){return{url:N().kk5.fromBlock(c).getRenderUrl({getRecordModel:r,baseUrl:e.baseURL,pageVisitSource:i}),title:J({intl:s,blockValue:c,getRecordValue:o,userTimeZone:a})}}return{url:e.baseURL||"/",title:s.formatMessage(w.untitledBlockTitle)}}if(t.collection_id)return K(e);if("user-invited"===t.type){const i=function(e){const{activity:t}=e,o=N().omK.fromGetRecordValueFn(e.getRecordValue||e.getRecordModel);if(!t.permission_group_id)return;const i=ae({spaceId:t.space_id,permissionGroupId:t.permission_group_id,getRecordModel:o});if(i)return{icon:i.getIcon(),name:i.getName()};return}({activity:t,getRecordValue:o}),a=r({table:S().bx,id:t.space_id});if(a&&i)return{title:se(s,i),url:a.getRenderUrl({baseUrl:e.baseURL})}}else{if("team-membership-edited"===t.type)return F(e);if("access-requested"===t.type){const o=r({id:t.getAccessRequestId(),table:M().J8,spaceId:t.space_id});if(o&&o.isTeamMembershipRequest())return F(e)}}return W(e)}(e).title.replaceAll(/[\r\n]+/g," ")}function G(e){const{activity:t}=e,o=t.navigable_block_id||t.top_level_block_id||t.collection_row_id;return o||(t.collection_id?t.collection_id:void 0)}function F(e){const{activity:t,getRecordValue:o,intl:i}=e,a=N().omK.fromGetRecordValueFn(o),s=e.baseURL||"/",r=i.formatMessage(w.untitledTeamName);if(!t.team_id)return{url:s,title:r};const n=a({table:x().e0,id:t.team_id}),c=a({table:S().bx,id:t.space_id});return{url:(null==c?void 0:c.getRenderUrl({baseUrl:e.baseURL}))??s,title:(null==n?void 0:n.getRenderTitleWithEmojiOrPlaceholder({intl:i}))??r}}function D(e){return W(e).title}function W(e){const{activity:t,getRecordValue:o,intl:i}=e,a=o({table:S().bx,id:t.space_id});if(a){const t=N().kk5.fromSpace(a);return{title:t.getRenderTitleWithEmojiOrPlaceholder({intl:i}),url:t.getRenderUrl({baseUrl:e.baseURL})}}return{url:e.baseURL||"/",title:i.formatMessage(w.untitledSpaceName)}}function H(e){return K(e).title}function K(e){const{activity:t,getRecordValue:o,pageVisitSource:i,userTimeZone:a,intl:s}=e;if(t.collection_id){const r=o({table:T().vF,id:t.collection_id,spaceId:t.space_id});if(r){const t=N().kk5.fromCollection(r),o=N().omK.fromGetRecordValueFn(e.getRecordValue),n=t.getRenderTitleWithEmojiOrPlaceholder({getRecordModel:o,userTimeZone:a,intl:s});return{url:t.getRenderUrl({getRecordModel:o,baseUrl:e.baseURL,pageVisitSource:i}),title:n}}return{url:e.baseURL||"/",title:s.formatMessage(w.untitledCollectionName)}}return{url:e.baseURL||"/",title:s.formatMessage(w.untitledCollectionName)}}function O(e){const{activity:t,getRecordValue:o,intl:i}=e;if("in-app-notification-automation-action-triggered"===t.type||"automation-typecheck-error-raised"===t.type){const e=N().omK.fromGetRecordValueFn(o),a=e({table:R().cv,id:t.getEdits()[0].automation_id,spaceId:t.space_id});return(null==a?void 0:a.getNameWithDefault(e,i))??(0,n().XO)(i)}}function X(e){if(e.blockValue.properties)return(0,v().Xh)({intl:e.intl,textValue:e.blockValue.properties.title,getRecordModel:N().omK.fromGetRecordValueFn(e.getRecordValue),userTimeZone:e.userTimeZone})}function $(e,t){const o=(0,k().kD)(t,void 0);return e.formatMessage(o)}function Y(e){let{userTimeZone:t,activity:o,getRecordValue:a,pageVisitSource:s,intl:r,experimentService:n,collectionFeatureGates:c}=e;const u=o.getEdits();if(u.length){const e=[];u.forEach((t=>{"permission-created"===t.type?e.push(t.permission_data):"permission-deleted"===t.type?e.push({...t.permission_data,role:"none"}):"permission-restriction-created"===t.type||"permission-restriction-deleted"===t.type?(t.permission_data.calculated_changes||[]).forEach((t=>{let[o,i]=t;e.push(i)})):e.push(t.permission_data.after)}));const d=i().oA(e.sort(k()._G).map((e=>{if("user_permission"===e.type){const t=a({table:V().KJ,id:e.user_id}),o=(0,U().Nz)(r,t),i=$(r,e.role);return r.formatMessage(w.userNameWithRole,{userName:o,permissionLevel:i})}if("space_permission"===e.type){const i=D({intl:r,activity:o,getRecordValue:a,userTimeZone:t,pageVisitSource:s,experimentService:n,collectionFeatureGates:c}),l=$(r,e.role);return r.formatMessage(w.spaceNameWithRole,{spaceName:i,permissionLevel:l})}if("public_permission"===e.type){const t=$(r,e.role);return r.formatMessage(w.publicPermissionRoleLabel,{permissionLevel:t})}if("bot_permission"===e.type){const t=a({table:j().cZ,id:e.bot_id}),o=(0,l().Mh)(t),i=$(r,e.role);return r.formatMessage(w.botNameWithRole,{botName:o,permissionLevel:i})}})));return r.formatList(d,{type:"conjunction",style:"narrow"})}}function z(e){const{intl:t}=e;switch(e.blockValue.type){case c().Ti.text:case c().Ti.encryptedText:case c().Ti.header:case c().Ti.subHeader:case c().Ti.subSubHeader:case c().Ti.factory:case c().Ti.equation:case c().Ti.code:return X(e);case c().Ti.toggle:return`▸ ${X(e)}`;case c().Ti.bulletedList:return`• ${X(e)}`;case c().Ti.numberedList:return`1. ${X(e)}`;case c().Ti.quote:return`“${X(e)}”`;case c().Ti.toDo:return(function(e){let{blockValue:t}=e;return m().Ml(t.properties&&t.properties.checked)}(e)?"✓ ":"▢ ")+X(e);case c().Ti.file:case c().Ti.bookmark:return`🔗 ${X(e)}`;case c().Ti.embed:case c().Ti.framer:case c().Ti.whimsical:case c().Ti.mixpanel:case c().Ti.miro:case c().Ti.abstract:case c().Ti.sketch:case c().Ti.excalidraw:case c().Ti.replit:case c().Ti.hex:case c().Ti.deepnote:case c().Ti.tweet:case c().Ti.gist:case c().Ti.maps:case c().Ti.invision:case c().Ti.video:case c().Ti.audio:case c().Ti.image:return t.formatMessage(w.imageInPushNotification,{imageEmoji:"🖼"});case c().Ti.drive:return function(e){const{blockValue:t}=e,o=(0,g().v0)(N().kk5.fromBlock(t));return o&&o.title?o.title:J(e)}(e);case c().Ti.page:case c().Ti.collectionView:case c().Ti.collectionViewPage:return J(e);case c().Ti.tableRow:return function(e){var t;const{blockValue:o,getRecordValue:i,userTimeZone:a,intl:s}=e,r=i({table:o.parent_table,id:o.parent_id,spaceId:o.space_id});if(!r||!o)return;const n=o.properties,c=(null===(t=r.format)||void 0===t?void 0:t.table_block_column_order)||[];return c&&n?c.map((e=>(0,v().Xh)({textValue:n[e],getRecordModel:N().omK.fromGetRecordValueFn(i),userTimeZone:a,intl:s}))).join(", "):void 0}(e)}}function Q(e){const{getRecordValue:t,baseURL:o,userTimeZone:i,intl:a,collectionFeatureGates:s}=e,r=t({table:_().iU,id:e.blockId});if(r){if("page"===r.type){const n=(0,h().ky)({block:r,getRecordValue:t});if(n){const o=d().oC(n),i=o[e.property],c=i?i.name:void 0,l=ee({property:e.property,schema:o,block:r,getRecordValue:t,userTimeZone:e.userTimeZone,baseURL:e.baseURL,intl:a,experimentService:e.experimentService,collectionFeatureGates:s})||a.formatMessage(w.emptyPropertyBody);return a.formatMessage(w.propertyNameAndValueNotificationBody,{propertyName:c,propertyValue:l})}return z({intl:a,blockValue:r,getRecordValue:t,baseURL:o,userTimeZone:i})}return z({intl:a,blockValue:r,getRecordValue:t,baseURL:o,userTimeZone:i})}}function ee(e){const{property:t,schema:o,getRecordValue:i,userTimeZone:a,baseURL:n,intl:c,experimentService:l,collectionFeatureGates:u}=e,g=o[t],h=N().kk5.fromBlock(e.block);if(!h.getProperties()||!g)return;const y=h.getProperties()[t];if("formula"===g.type){const e=N().omK.fromGetRecordValueFn(i),r=(0,b().primitiveFormulaValueFromPropertySchema)({schema:o,property:t,blockModel:h,getRecordModel:e,intl:c,userTimeZone:a,depth:0,resultCache:new Map,regExpCache:new Map,experimentService:l,collectionFeatureGates:u});return p().U3(r)?(0,f().ZV)({allowRelativeDates:!0,intl:c,value:r,userTimeZone:a}):"boolean"==typeof r?r?d().bx:d().HC:(0,s().hj)(r)?r.toString():r}if("person"===g.type)return c.formatList(m().DW({textValue:y,propertySchema:g,blockCreatorPointer:h.getCreatedByPointer()}).map((e=>{const t=i(e),o=(0,r().LU)({table:e.table,value:t});return(0,r().$4)(c,o)})),{type:"conjunction",style:"narrow"});if("created_by"===g.type){const e=h.getCreatedByPointer();if(!e)return c.formatMessage(w.unknownAuthorInPropertySchemaChange);const t=i(e),o=t&&(0,r().LU)({table:e.table,value:t});return o?(0,r().$4)(c,o):c.formatMessage(w.unknownAuthorInPropertySchemaChange)}return"created_time"===g.type?(0,f().Yx)(h.getCreatedTime(),"short",c.locale,a):y?te({propertySchema:g,textValue:y,getRecordValue:i,userTimeZone:a,baseURL:n,intl:c,experimentService:l,collectionFeatureGates:u}):void 0}function te(e){const{propertySchema:t,textValue:o,getRecordValue:i,userTimeZone:s,baseURL:n,intl:c,collectionFeatureGates:l}=e;if("title"===t.type||"text"===t.type)return(0,v().Xh)({intl:c,textValue:o,getRecordModel:N().omK.fromGetRecordValueFn(i),userTimeZone:s});if("select"===t.type){const e=t.options||[];return m().Sj(o,e)}if("multi_select"===t.type){const e=t.options||[];return c.formatList(m().uP(o,e),{type:"conjunction",style:"narrow"})}if("checkbox"===t.type)return m().Ml(o)?d().bx:d().HC;if("date"===t.type){const e=(0,u().G)(o);if(e)return(0,f().ZV)({allowRelativeDates:!0,intl:c,value:e,date_format:t.date_format,time_format:t.time_format,userTimeZone:s})}else{if("person"===t.type)return c.formatList(m().DW({textValue:o,propertySchema:t,blockCreatorPointer:void 0}).map((e=>{const t=i(e),o=(0,r().LU)({table:e.table,value:t});return(0,r().$4)(c,o)})),{type:"conjunction",style:"narrow"});if("relation"===t.type){const e=m().j$({relationValue:m().rq(o),getRecordModel:N().omK.fromGetRecordValueFn(i),propertySchema:t,includeDeleted:l.relations_show_deleted,includeInvalidCollection:l.relations_show_invalid_collection,includeNoAccess:l.relations_show_no_access});return c.formatList(e.map(i).map((e=>e?J({intl:c,blockValue:e,getRecordValue:i,baseURL:n,userTimeZone:s}):c.formatMessage(w.unknownRelationValueChange))),{type:"conjunction",style:"narrow"})}if("number"===t.type){const e=m().VY(o);if(void 0!==e)return e.toString()}else if("auto_increment_id"===t.type){const e=m().ah(o);if(void 0!==e)return e.toString()}else{if("file"===t.type)return c.formatList(m().g(o).map((e=>e.name||e.url)),{type:"conjunction",style:"narrow"});if("url"===t.type||"phone_number"===t.type||"email"===t.type)return(0,P().Jcv)(o);if("created_by"===t.type)return;if("created_time"===t.type)return;if("formula"===t.type)return;if("rollup"===t.type)return;if("last_edited_by"===t.type)return;if("last_edited_time"===t.type)return;if("last_visited_time"===t.type)return;if("button"===t.type)return;if("status"===t.type)return m().ZG(o,t);if("location"===t.type)return;if("verification"===t.type){const e=C()._w(o),t=e?C().WN(e):{type:"none"};if("none"===t.type)return c.formatMessage(C().X3.none);const a=i(t.actorPointer),n=(0,r().LU)({table:t.actorPointer.table,value:a}),l=(0,r().$4)(c,n);return"verified"===t.type&&t.isIndefinite?c.formatMessage(C().X3.verifiedIndefinitely,{actor:l}):c.formatMessage(C().X3.verifiedUntil,{actor:l,datetime:E().nK({dateTime:t.dateTimeRange.end,intl:c,userTimeZone:s,displayInUserTimezone:!1,alwaysIncludeTimezone:!0})})}(0,a().t1)(t)}}}function oe(e){if("page_icon"===e.formatProperty)return e.intl.formatMessage(w.blockFormatEditPageIconName)}function ie(e){const{formatProperty:t,block:o,getRecordValue:i,intl:a}=e;if("page_icon"===t){const e=N().kk5.fromBlock(o).getRenderIcon({getRecordModel:N().omK.fromGetRecordValueFn(i)});return e?(0,y().Z)(e.icon)?e.icon:a.formatMessage(w.pageIconImagePlaceholder):a.formatMessage(w.emptyBlockEditedProperty)}}function ae(e){const t=N().omK.fromGetRecordValueFn(e.getRecordValue||e.getRecordModel),{spaceId:o,permissionGroupId:i}=e;return t({table:I().GQ,id:(0,I().L9)({spaceId:o,spacePermissionGroupId:i}),spaceId:o})}function se(e,t){if(t){return[(0,y().Z)(t.icon)?t.icon:void 0,t.name.length>0?t.name:e.formatMessage(w.untitledPermissionGroupName)].filter(Boolean).join(" ")}return e.formatMessage(w.defaultPermissionGroupName)}function re(e){const t=N().omK.fromGetRecordValueFn(e.getRecordValue||e.getRecordModel),{spaceId:o,teamId:i}=e;return t({table:x().e0,id:i,spaceId:o})}function ne(e){switch(e){case"block-property-edited":case"reacted":case"commented":case"permission-group-mentioned":case"team-mentioned":case"reminder":case"user-invited":case"in-app-notification-automation-action-triggered":case"user-mentioned":return!0;case"access-requested":case"access-request-resolved":case"email-edited":case"private-content-transferred":case"team-membership-edited":case"verification-expired":case"export-completed":case"import-completed":case"no-conflicts-found":case"automation-typecheck-error-raised":case"block-edited":case"collection-edited":case"collection-page-layout-edited":case"collection-property-edited":case"collection-row-created":case"collection-row-deleted":case"collection-view-edited":case"page-deleted":case"page-locked":case"page-permanently-deleted":case"page-restored":case"page-unlocked":case"permissions-edited":case"top-level-block-created":case"top-level-block-deleted":return!1;default:return(0,a().P)(e),!1}}},521477:(e,t,o)=>{o.r(t),o.d(t,{Notification:()=>M});o(267602),o(653476),o(470928),o(241792);var i=()=>o(513670),a=()=>o(696459),s=()=>o(916673),r=()=>o(59438),n=()=>o(816512),c=()=>o(435140),l=()=>o(580397),u=()=>o(942275),d=()=>o(72539),m=()=>o(530980),p=()=>o(309672),f=()=>o(375255),g=()=>o(548347),b=()=>o(139978),h=()=>o(602299),y=()=>o(542973),N=()=>o(989478),k=()=>o(722917),v=()=>o(955620);function M(e){var t;const{activity:o,getRecordValue:M,baseURL:_,userTimeZone:j,pageVisitSource:T,intl:S,useSimplifiedEmailSubjectForGrouping:I,isMobilePush:x,recipientUser:V,experimentService:P,collectionFeatureGates:U}=e,E=m().omK.fromGetRecordValueFn(M),C=(0,p().P6)({...e}),w=(0,p().XW)(C,S),q=(0,p().Qs)(C),A=(0,p().bC)({recipientUser:V,authors:C}),L=(0,p().oP)({...e,intl:S}),Z=(0,p().sn)({...e,intl:S}),J=(0,p().iR)({...e,intl:S}),B=(0,p().rn)({...e,intl:S}),G=(0,p().tA)({...e,intl:S});switch(o.type){case"top-level-block-created":return{subject:S.formatMessage(p().qJ.topLevelBlockCreated,{userName:w,targetName:L,spaceName:B})};case"top-level-block-deleted":return{subject:S.formatMessage(p().qJ.topLevelBlockDeleted,{userName:w,targetName:L,spaceName:B})};case"collection-row-created":return{subject:S.formatMessage(p().qJ.collectionRowCreated,{userName:w,targetName:L,collectionName:J})};case"collection-row-deleted":return{subject:S.formatMessage(p().qJ.collectionRowDeleted,{userName:w,targetName:L,collectionName:J})};case"block-edited":{let t;const a=o.getEdits();if(a.length){const o=a[0];if("block-changed"===o.type){const a=o.block_data.after.block_value,s=(0,u().ky)({block:a,getRecordValue:M});if("page"===a.type&&s){const a=o.block_schema||(0,k().Kc)(S),s=c().OS({before:o.block_data.before.block_value,after:o.block_data.after.block_value,schema:a}).filter((e=>{const t=a[e];return t&&"formula"!==t.type})).map((t=>{const i=a[t],s=i?i.name:void 0,r=(0,p().v4)({intl:S,property:t,schema:a,block:o.block_data.after.block_value,getRecordValue:M,userTimeZone:e.userTimeZone,baseURL:e.baseURL,experimentService:P,collectionFeatureGates:U})||S.formatMessage(p().qJ.emptyBlockEditedProperty);return S.formatMessage(p().qJ.propertyNameAndValueEdited,{propertyName:s,propertyValue:r})})),n=r().B9({before:o.block_data.before.block_value,after:o.block_data.after.block_value}),l=i().oA(n.map((e=>{const t=(0,p()._u)({formatProperty:e,intl:S}),i=(0,p().W9)({formatProperty:e,intl:S,block:o.block_data.after.block_value,getRecordValue:M});if(t&&i)return S.formatMessage(p().qJ.propertyNameAndValueEdited,{propertyName:t,propertyValue:i})})));t=S.formatList(s.concat(l),{type:"conjunction",style:"narrow"})}else t=(0,p()._2)({intl:S,blockValue:a,getRecordValue:M,baseURL:_,userTimeZone:j})}else if("block-created"===o.type){const e=o.block_data.block_value;t=(0,p()._2)({intl:S,blockValue:e,getRecordValue:M,baseURL:_,userTimeZone:j})}else if("block-deleted"===o.type){const e=o.block_data.block_value,i=(0,p()._2)({intl:S,blockValue:e,getRecordValue:M,baseURL:_,userTimeZone:j});t=S.formatMessage(p().qJ.blockDeletedEditBody,{renderedBlock:i})}}return{subject:I?R(L,S):S.formatMessage(p().qJ.blockEditedNotification,{userName:w,blockName:L}),body:t}}case"block-property-edited":const W={subject:I?R(L,S):S.formatMessage(p().qJ.blockPropertyEditedNotification,{userName:w,blockName:L}),body:void 0},H=o.getEdits();if(H.length){const t=H[0],o=Object.entries(t.property_updates).filter((e=>{var o;let[i,a]=e;const s=null===(o=t.filtered_block_schema)||void 0===o?void 0:o[i];return s&&!["formula","created_by","created_time"].includes(s.type)})).map((o=>{var i,a;let[s,r]=o;const n=null===(i=t.filtered_block_schema)||void 0===i?void 0:i[s],c=n?n.name:void 0,l=(0,p().Wy)({intl:S,propertySchema:n,textValue:(null===(a=r.after)||void 0===a?void 0:a.value)??[],getRecordValue:M,userTimeZone:e.userTimeZone,baseURL:e.baseURL,experimentService:P,collectionFeatureGates:U})||S.formatMessage(p().qJ.emptyBlockEditedProperty);return S.formatMessage(p().qJ.propertyNameAndValueEdited,{propertyName:c,propertyValue:l})}));W.body=S.formatList(o,{type:"conjunction",style:"narrow"})}return x?{subject:S.formatMessage(p().qJ.mobileBlockPropertyEditedNotification,{userName:w}),subtitle:L,body:W.body,senderUserId:q,senderProfilePhoto:A,conversationIdentifier:Z}:W;case"permissions-edited":return{subject:S.formatMessage(p().qJ.userEditedPermissionsFor,{userName:w,targetName:L}),body:(0,p().gt)({intl:S,activity:o,getRecordValue:M,pageVisitSource:T,userTimeZone:e.userTimeZone,experimentService:P,collectionFeatureGates:U})};case"user-mentioned":{const t=(0,p().kU)({intl:S,getRecordValue:M,baseURL:_,userTimeZone:e.userTimeZone,blockId:o.mentioned_block_id,property:o.mentioned_property,experimentService:P,collectionFeatureGates:U});return x?{subject:S.formatMessage(p().qJ.mobileUserMentionedIn,{userName:w}),subtitle:L,body:t,senderUserId:q,senderProfilePhoto:A,conversationIdentifier:Z}:{subject:I?R(L,S):S.formatMessage(p().qJ.userMentionedIn,{userName:w,targetName:L}),body:t}}case"commented":{let t,i,a;const s=V?o.getEdits().filter((e=>{var t;return!Boolean(null===(t=e.authors)||void 0===t?void 0:t.find((e=>e.id===V.id)))})):o.getEdits(),r=s[0];let n;if(r)if(i=r.comment_id,a=r.discussion_id,"comment-created"===r.type){const o=M({table:h().x_,id:r.comment_id,spaceId:r.space_id}),i=r.comment_data||o;if(i){var F;t=(0,f().Xh)({intl:S,textValue:i.text,getRecordModel:E,userTimeZone:e.userTimeZone});const o=i.created_by_table&&i.created_by_id?null===(F=E({table:i.created_by_table,id:i.created_by_id,spaceId:r.space_id}))||void 0===F?void 0:F.asActor:void 0;n=o?(0,p().XW)([o.asActor],S):w}}else if("comment-changed"===r.type)t=(0,f().Xh)({intl:S,textValue:r.comment_data.after.text,getRecordModel:E,userTimeZone:e.userTimeZone});else if("suggestion-created"===r.type){const o=E({table:y().qF,id:r.discussion_id,spaceId:r.space_id});var D;if(o&&"suggestion"===o.getType())t=(0,f().Xh)({intl:S,textValue:(0,l().Bb)({discussionContextData:(null===(D=o.getSuggestionRawContext())||void 0===D||null===(D=D.snapshot)||void 0===D?void 0:D.data)??[],discussionType:"suggestion",discussionId:o.id,intl:S}),getRecordModel:E,userTimeZone:e.userTimeZone})}else{const o=M({table:h().x_,id:r.comment_id,spaceId:r.space_id}),i=r.comment_data||o;if(i){const o=(0,f().Xh)({intl:S,textValue:i.text,getRecordModel:E,userTimeZone:e.userTimeZone});t=S.formatMessage(p().qJ.userDeletedComment,{commentText:o})}}return x?{subject:"suggestion-created"===(null==r?void 0:r.type)?S.formatMessage(p().qJ.mobileUserSuggestedSubject,{userName:n??w}):S.formatMessage(p().qJ.mobileUserCommentedSubject,{userName:n??w}),subtitle:L,body:t,senderUserId:q,senderProfilePhoto:A,conversationIdentifier:Z,categoryIdentifier:"comment_notification_category",commentId:i,discussionId:a}:{subject:I?R(L,S):"suggestion-created"===(null==r?void 0:r.type)?S.formatMessage(p().qJ.userSuggestedSubject,{userName:n??w,targetName:L}):S.formatMessage(p().qJ.userCommentedSubject,{userName:n??w,targetName:L}),body:t}}case"user-invited":const K=(0,s().pE)(L),O=K.length>0?K:S.formatMessage(p().qJ.defaultPageName);if(o.permission_group_id)return{subject:S.formatMessage(p().qJ.userAddedToSpace,{userName:w,workspaceName:O})};const X=0===C.filter(n().uC).length;return x?X?{subject:S.formatMessage(p().qJ.mobileUserInvitedByBot),subtitle:L,conversationIdentifier:Z}:{subject:S.formatMessage(p().qJ.mobileUserInvited,{userName:w}),subtitle:L,senderUserId:q,senderProfilePhoto:A,conversationIdentifier:Z}:{subject:X?S.formatMessage(p().qJ.userInvitedToSpaceByBot,{workspaceName:O}):S.formatMessage(p().qJ.userInvitedToSpace,{userName:w,workspaceName:O})};case"collection-edited":{let e,t=S.formatMessage(p().qJ.userEditedCollectionSubject,{userName:w,collectionName:L});const i=o.getEdits();if(i.length){const o=i[0];if("collection-changed"===o.type&&o.collection_data){const i=o.collection_data.after?o.collection_data.after.description:void 0,a=o.collection_data.before?o.collection_data.before.description:void 0;a&&!i?t=S.formatMessage(p().qJ.collectionDescriptionDeleted,{userName:w,collectionName:L}):!a&&i?(t=S.formatMessage(p().qJ.collectionDescriptionCreated,{userName:w,collectionName:L}),e=v().Jcv(i)):a&&i&&v().Dne(a,i)&&(e=v().Jcv(i))}else if("collection-created"===o.type&&o.collection_data){const i=o.collection_data.description;i&&(t=S.formatMessage(p().qJ.userCreatedCollectionSubject,{userName:w,collectionName:L}),e=v().Jcv(i))}}return{subject:t,body:e}}case"collection-view-edited":const $=e.getRecordValue({table:b().np,id:o.collection_view_id,spaceId:o.space_id}),Y=$&&$.name||S.formatMessage(p().qJ.untitledCollectionView);return{subject:S.formatMessage(p().qJ.collectionViewEditedSubject,{userName:w,collectionViewName:Y,collectionName:L})};case"collection-property-edited":const z=o.getEdits(),Q=z.length&&z[0],ee=Q&&("collection-property-changed"===Q.type?Q.collection_property_data.after.name:Q.collection_property_data.name)||S.formatMessage(p().qJ.collectionPropertyEditedUnknown);return o.collection_property_id,{subject:S.formatMessage(p().qJ.collectionPropertyEditedSubject,{userName:w,propertyType:ee,collectionName:L})};case"collection-page-layout-edited":let te;return{subject:S.formatMessage(p().qJ.userEditedCollectionPageLayoutSubject,{userName:w,collectionName:L}),body:te};case"reminder":return{subject:S.formatMessage(p().qJ.reminderSubject,{pageName:L}),body:(0,p().kU)({getRecordValue:M,baseURL:_,userTimeZone:e.userTimeZone,blockId:o.reminder_block_id,property:o.reminder_property,intl:S,experimentService:P,collectionFeatureGates:U})};case"page-locked":case"page-unlocked":return{subject:"page-locked"===o.type?S.formatMessage(p().qJ.pageLockedActivity,{userName:w,pageName:L}):S.formatMessage(p().qJ.pageUnlockedActivity,{userName:w,pageName:L})};case"email-edited":return{subject:S.formatMessage(p().qJ.emailEditedActivity,{userName:w})};case"access-requested":{const e=E({id:o.getAccessRequestId(),table:g().J8,spaceId:o.getSpaceId()});if(!e||e.isPageAccessRequest()||e.isTeamMembershipRequest())return null!=e&&e.isEditPageAccessRequest()?{subject:S.formatMessage(p().qJ.editAccessRequestedSubject,{userName:w,pageName:L})}:{subject:S.formatMessage(p().qJ.accessRequestedSubject,{userName:w,pageName:L})};if(e.isGuestInviteRequest())return{subject:S.formatMessage(p().qJ.guestInviteRequestedSubject,{userName:w,workspaceName:L})};if(e.isSpaceMembershipRequest())return{subject:S.formatMessage(p().qJ.membershipRequestedSubject,{userName:w,workspaceName:L})};(0,a().t1)(e);break}case"access-request-resolved":{const e=E({id:o.getAccessRequestId(),table:g().J8,spaceId:o.getSpaceId()}),t=o.getEdits()[0].requested_for,i=t?E(t):void 0,a=null!=i&&i.isUser()?i.getEmail():S.formatMessage({defaultMessage:"a guest",id:"pushNotification.accessRequestResolved.invalidGuest"});return{subject:S.formatMessage("approved"===(null==e?void 0:e.status)?p().qJ.accessRequestResolvedApprovedSubject:p().qJ.accessRequestResolvedRejectedSubject,{guestEmail:a,pageName:L})}}case"page-deleted":return{subject:S.formatMessage(p().qJ.pageDeletedActivity,{userName:w})};case"page-restored":return{subject:S.formatMessage(p().qJ.pageRestoredActivity,{userName:w})};case"page-permanently-deleted":return{subject:S.formatMessage(p().qJ.pagePermanentlyDeletedActivity,{userName:w})};case"team-membership-edited":return{subject:S.formatMessage(p().qJ.userInvitedToTeam,{userName:w,teamName:L})};case"private-content-transferred":const oe=o.getEdits(),ie=oe.length&&oe[0].from_user_id;if(!ie)return{subject:S.formatMessage({defaultMessage:"{author} transferred private content to you: {pageName}",id:"pushNotification.privateContentTransferred.noFromUserName"},{author:w,pageName:L})};const ae=M({table:N().KJ,id:ie});return{subject:S.formatMessage(p().qJ.privateContentTransferred,{author:w,pageName:L,fromUserName:ae&&m().kk5.fromValue(N().KJ,ae).getFullName(S)})};case"permission-group-mentioned":const se=(0,p().Bg)({spaceId:o.space_id,permissionGroupId:o.mentioned_group_id,getRecordValue:e.getRecordValue}),re=(0,p().jQ)(S,se);return{subject:I?R(L,S):S.formatMessage(p().qJ.permissionGroupMentionedIn,{userName:w,targetName:L,groupName:re}),body:(0,p().kU)({intl:S,getRecordValue:M,baseURL:_,userTimeZone:e.userTimeZone,blockId:o.navigable_block_id,property:o.mentioned_property,experimentService:P,collectionFeatureGates:U})};case"verification-expired":return{subject:S.formatMessage(p().qJ.verificationExpired,{pageName:L})};case"team-mentioned":const ne=(0,p().VP)({spaceId:o.space_id,teamId:null===(t=o.getEdits())||void 0===t||null===(t=t[0])||void 0===t?void 0:t.mentioned_team_id,getRecordValue:e.getRecordValue}),ce=null==ne?void 0:ne.getName();return{subject:I?R(L,S):S.formatMessage(p().qJ.teamMentionedIn,{userName:w,targetName:L,teamName:ce}),body:(0,p().kU)({intl:S,getRecordValue:M,baseURL:_,userTimeZone:e.userTimeZone,blockId:o.navigable_block_id,property:o.mentioned_property,experimentService:P,collectionFeatureGates:U})};case"import-completed":const le=o.getEdits()[0],ue="failed"===le.import_status?p().qJ.importFailed:p().qJ.importSuccessful;return{subject:S.formatMessage(ue,{importSource:le.import_source})};case"export-completed":return{subject:S.formatMessage(p().qJ.exportCompleted)};case"in-app-notification-automation-action-triggered":const de=o.getEdits()[0];return{subject:S.formatMessage(p().qJ.inAppNotificationAutomationActionTriggered,{automationName:G}),body:(0,f().Xh)({intl:S,textValue:de.message.value,getRecordModel:E,userTimeZone:e.userTimeZone})};case"no-conflicts-found":return{subject:S.formatMessage(p().qJ.noConflictsFound),subtitle:L,senderUserId:d().GR.id,senderProfilePhoto:d().GR.profile_photo};case"automation-typecheck-error-raised":return{subject:S.formatMessage(p().qJ.automationTypecheckErrorRaisedSubject,{automationName:G}),body:S.formatMessage(p().qJ.automationTypecheckErrorRaisedBody)};case"reacted":return{subject:"Reaction notifications have not been implemented yet"}}}function R(e,t){return t.formatMessage({defaultMessage:"New activity in {pageTitle}",id:"emailActivity.pageActivity.simplifiedSubjectLine"},{pageTitle:e})}}}]);