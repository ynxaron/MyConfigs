"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[52576],{81944:(e,t,n)=>{n.d(t,{g:()=>s});n(667294);var a=()=>n(219727),i=()=>n(788860),o=()=>n(720343),r=n(785893);function s(e){var t;const{title:n,name:s,onChangeName:d,businessName:u,onChangeBusinessName:c,vatId:p,onChangeVatId:m,validationErrors:g,modalId:y}=e,v=(0,i().YB)(),b=(0,a().O7)();return(0,r.jsxs)(o().FC,{title:n,children:[(0,r.jsx)(o().yQ,{value:s,errorMessage:null==g||null===(t=g.name)||void 0===t?void 0:t.message,onChange:e=>{y&&l({environment:b,addressType:"name",addressUpdate:e.target.value,modal_id:y}),d(e.target.value)},placeholder:v.formatMessage({defaultMessage:"Name",id:"billingDetails.name"}),customHeight:42}),(0,r.jsx)(o().yQ,{value:u,onChange:e=>{y&&l({environment:b,addressType:"businessName",addressUpdate:e.target.value,modal_id:y}),c(e.target.value)},placeholder:v.formatMessage({defaultMessage:"Business name (optional)",id:"billingDetails.businessName"}),customHeight:42}),m?(0,r.jsx)(o().yQ,{value:p,onChange:e=>m(e.target.value),placeholder:v.formatMessage({defaultMessage:"VAT/GST number (optional)",id:"billingDetails.vatNumber"}),customHeight:42}):null]})}const l=(0,n(513670).Ds)((e=>{let{environment:t,addressType:a,addressUpdate:i,modal_id:o}=e;n(979614).rY(t,{addressType:a,addressUpdate:i,modal_id:o})}),1e3)},52576:(e,t,n)=>{n.r(t),n.d(t,{CheckoutUpgradeModal:()=>Fe});var a=()=>n(629756),i=n(667294),o=()=>n(219727),r=()=>n(142735),s=()=>n(629719),l=()=>n(921981),d=()=>n(247724),u=()=>n(145613),c=()=>n(576387),p=()=>n(38812),m=()=>n(18281),g=()=>n(30795),y=()=>n(419157),v=(n(670560),n(267602),n(228244),()=>n(732811)),b=()=>n(799891),f=()=>n(701611),h=()=>n(851549),x=()=>n(381348),j=()=>n(161428),_=()=>n(681941),I=()=>n(122792),S=()=>n(788860),C=()=>n(513670),w=()=>n(979614),T=()=>n(454393),M=()=>n(785673),D=()=>n(212493),P=()=>n(603692),A=()=>n(661641),E=()=>n(226994),V=()=>n(876822),k=()=>n(804217),N=()=>n(838266),U=(n(821057),n(653476),n(731107),()=>n(730120)),F=()=>n(506347),B=()=>n(923420),O=()=>n(396136),Z=()=>n(976102),K=()=>n(320080),q=()=>n(308186),R=()=>n(528918),H=()=>n(47443),L=()=>n(102182),Q=()=>n(234049),X=()=>n(614027),Y=()=>n(505006),G=()=>n(518019),z=()=>n(826955),W=()=>n(728779),$=()=>n(303106),J=n(785893);const ee=function(e){const{onClick:t}=e;return(0,J.jsx)(n(686532).H,{buttonInfo:{onClick:t,label:(0,J.jsx)(S()._H,{id:"spaceSubscriptionUpgradeModal.upgradeAi.getStarted",defaultMessage:"Get started"})}})};var te=()=>n(548812),ne=()=>n(254687),ae=()=>n(70206);const ie=(0,S().vU)({cancelFailedSubscription:{id:"subscription.upgrade.cancel_failed_subscription",defaultMessage:"Cancelling subscription..."}});async function oe(e){var t;const{address:n,billingEmail:a,billingInterval:i,coupon:o,currencyCode:r,environment:l,isStartingTrial:d,modalId:u,modalType:c,paymentData:p,promo:m,quantity:g,selectedProducts:y,stripe:v,useTestClock:b,vatId:f,intl:h}=e,j=V().default.state.currentSpaceStore;if(!j)return;const I=await ne().aQ({environment:l,spaceId:j.id}),T=await G().Z.awaitData(l,{spaceId:null==j?void 0:j.id});if(!T)throw new Error("Billing data not loaded");const M=(null===(t=(0,s().a7)(null==T?void 0:T.subscription,"sites_custom_hostnames"))||void 0===t?void 0:t.quantity)??0,D=(0,_().Vj)({prices:I,quantity:g,domainsQuantity:M}),P=(0,s().Lg)(T),A=d?U().ou.now().plus({days:14}):void 0,E=(0,C().oA)(y).filter((e=>"free"!==e)),k={interval:i,currency:r},N=E.reduce(((e,t)=>(0,Z().dP)(D,e,{...k,product:t})),{...P,trialEnd:A}),F=E.some((e=>(0,x().CF)(o,e,i)));try{const e=await ae().updateSubscription({environment:l,spaceStore:j,desiredState:(0,Z().Zl)(I,N,i),paymentData:p,billingEmail:a,coupon:m&&"coupon"===m.source?m.code:void 0,customerName:n.name,businessName:n.businessName,addressLine1:n.addressLine1,addressCity:n.city,addressZip:n.zipCode,addressState:n.state,addressCountry:n.country,vatId:f??void 0,promoCodeId:m&&"promo_code"===m.source?m.code:void 0,from:"subscription_upgrade_modal",useTestClock:b,sessionId:u,inAppOffer:F?o:void 0});await ae().handlePaymentIntentNextActions({paymentIntentData:e,stripe:v,onSuccess:()=>{w().fZ(l,{payment_intent_id:e.paymentIntentId,modal_id:u,modal_type:c})},onFailure:async()=>{await async function(e){const{updateSubscriptionResponse:t,environment:n,modalId:a,modalType:i,spaceStore:o,currencyCode:r,intl:s}=e,{subscriptionStatus:l,paymentIntentId:d}=t,u=W().i;await ae().refreshBillingHistory(n,u);const c=u.state.billingEvents;q().vC({message:"trialing"===l?(0,J.jsx)(S()._H,{id:"subscription.upgrade.payment_failed.trial",defaultMessage:"Please provide an alternate payment method to complete your upgrade."}):(0,J.jsx)(S()._H,{id:"subscription.upgrade.payment_failed",defaultMessage:"Your payment could not be processed. Please provide an alternate payment method or you will lose access to Notion."}),showCancel:!1,keepFocus:!1,disableBackgroundDismiss:!0,items:[{label:(0,J.jsx)(S()._H,{id:"subscription.upgrade.payment_failed.pay_invoice",defaultMessage:"Complete payment"}),onAccept:()=>{if(w().Aq(n,{payment_intent_id:d,modal_id:a,modal_type:i}),(0,te().EQ)())return(0,$().C)(n,o,r,[c[0]],W().i,s);window.open(t.invoiceUrl,"_blank")},color:"red"},{label:(0,J.jsx)(S()._H,{id:"subscription.upgrade.payment_failed.cancel",defaultMessage:"Cancel upgrade"}),onAccept:async()=>{w().cY(n,{payment_intent_id:t.paymentIntentId,modal_id:a,modal_type:i}),R().j({message:ie.cancelFailedSubscription}),await ae().cancelSubscription({environment:n,spaceStore:o,from:"subscription_upgrade_modal-failed_payment"}),R().x()}}]})}({updateSubscriptionResponse:e,environment:l,modalId:u,spaceStore:j,currencyCode:r,intl:h})}}),m&&(0,B().$r)(l.currentUser.id)}catch{w().cY(l,{modal_id:u,modal_type:c})}}var re=()=>n(788396),se=()=>n(438665),le=()=>n(768064),de=()=>n(498854),ue=()=>n(575154),ce=()=>n(661769),pe=()=>n(144948),me=()=>n(297959),ge=()=>n(991460),ye=()=>n(801812),ve=()=>n(523298),be=()=>n(824462);var fe=()=>n(368958),he=()=>n(85084),xe=()=>n(509679),je=()=>n(669861),_e=()=>n(720343),Ie=()=>n(464888),Se=()=>n(251054),Ce=()=>n(81944),we=()=>n(846550),Te=()=>n(916095),Me=()=>n(317589);function De(e){let{header:t,paymentContent:n,orderOptions:a,footer:i,showDismissButton:s}=e;const l=(0,o().O7)(),{isMobile:d}=(0,o().Fy)(),u=(0,r().VK)((()=>(0,Me().Z)(l)),[l])||!a,c=function(e){return(0,we().yK)((()=>({wrapper:{...!e&&{minWidth:506}},mobile:{display:"grid",gridTemplateRows:"1fr auto",overflow:"hidden auto"}})),[e])}(d),p=(0,J.jsxs)(D().jX,{direction:u?"column":"row",gap:u?20:32,style:{...d&&c.mobile},children:[(0,J.jsx)(D().jX,{direction:"column",gap:u?20:28,width:u?"fill":420,children:n}),(0,J.jsxs)(D().jX,{direction:"column",gap:u?20:28,width:u?"fill":310,children:[a,i]})]});return(0,J.jsxs)(D().jX,{direction:"column",gap:u?28:36,padding:32,width:"hug",height:"hug",style:c.wrapper,children:[t,p,s&&(0,J.jsx)(Te().U4,{})]})}n(241792);var Pe=()=>n(696459),Ae=()=>n(666414),Ee=()=>n(312578),Ve=()=>n(565577);function ke(e){var t;const{state:n,data:a,promo:l,billingData:d,dueAtPeriodEnd:u,billingInterval:c,products:p}=e,{coupon:m,calculatingTax:v,taxAmount:b}=n,f=(0,o().O7)(),[h,j]=i.useState(!1),I=Ve().Zr(l),S=(0,g().V)(a),[C,w,T]=(0,r().VK)((()=>{const e=p.map((e=>y().Z.getPrice(f,(t=>t.product===e&&t.billingInterval===c))));let t,n;return"year"===c&&(t=p.map((e=>y().Z.getPrice(f,(t=>t.product===e&&"month"===t.billingInterval)))),n=p.map((e=>y().Z.getPrice(f,(t=>t.product===e&&"year"===t.billingInterval))))),[e,t,n]}),[c,f,p]);if(C.some((e=>!e.isLoaded)))return(0,J.jsx)(Ee().Z,{});const M=C.map((e=>e.result)).filter(Pe().$K),P=null==w?void 0:w.map((e=>e.result)).filter(Pe().$K),A=null==T?void 0:T.map((e=>e.result)).filter(Pe().$K),E=M[0].unitAmount.currencyValue,V=(null===(t=(0,s().a7)(null==d?void 0:d.subscription,"sites_custom_hostnames"))||void 0===t?void 0:t.quantity)??0,k=(0,_().Vj)({prices:M,quantity:S,domainsQuantity:V}),N=p.filter((e=>(0,x().CF)(m,e,c))),U=N&&N.length>0,F=Ve().cv({items:k,coupon:U?m:void 0}),B=U&&A,O=P&&A?Ve().cv({items:(0,_().Vj)({prices:B?A:P,quantity:S,domainsQuantity:V})}).withMultipliedAmount(B?1:12):void 0,Z=O?O.minus(F):void 0,K=Ve().VT({calculatingTax:v,taxAmount:b,currencyValue:E}),q=Ve().rF({items:k,promo:I}),R=Ve().Et(d,E.currencyCode),H=F.plus(K).minus(q).minus(R),L=H.amount<0?H.withMultipliedAmount(0):H,Q=function(e){var t;let{hasDiscount:n,dueAtPeriodEnd:a,billingData:i,billingInterval:o}=e;if(n)return{chargeType:"immediate"};if(a&&null!=i&&null!==(t=i.subscription)&&void 0!==t&&t.currentPeriodEnd)return{chargeType:"nextPeriod",periodEnd:i.subscription.currentPeriodEnd};return{chargeType:void 0,billingInterval:o}}({hasDiscount:0!==q.amount&&0!==R.amount,dueAtPeriodEnd:u,billingData:d,billingInterval:c});return(0,J.jsxs)(D().jX,{gap:2,children:[(0,J.jsx)(_e().Mq,{total:L,handleToggleExpanded:()=>j((e=>!e)),isExpanded:h,discount:q,accountBalance:R,annualPriceDifference:Z,coupon:U?m:void 0,isTotalLoading:v,...Q}),(0,J.jsx)(_e().MA,{isExpanded:h,children:(0,J.jsxs)(D().jX,{gap:12,children:[(0,J.jsx)(_e().tQ,{items:k,coupon:U?m:void 0}),(0,J.jsx)(Ae().Z,{size:1}),(0,J.jsx)(_e().J0,{subtotal:F,tax:K,discount:q,accountBalance:R,showDiscountLine:0!==q.amount&&I&&!m,isCalculatingTax:v,subtotalMonthly:O})]})})]})}var Ne=()=>n(398499);function Ue(e){const{state:t,data:n,billingData:l,spaceStore:d,spaceViewStore:c}=e,g=(0,o().O7)(),U=(0,S().YB)(),B=(0,a().useStripe)(),Z=(0,a().useElements)(),{isMobile:q}=(0,o().Fy)(),R=(0,r().VK)((()=>V().default.state.currentUserRootStore),[]),G=(0,me().W)(),W=(0,r().VK)((()=>{if(u().Z.state.open)return u().Z.state.dismissMobilePlansModal}),[]),$=(0,r().VK)((()=>k().default.state.online),[]),ne=(0,r().VK)((()=>y().Z.state.selectedCurrencyCode??"USD"),[]),ae=function(){var e;const t=(0,o().O7)(),[n]=(0,ye().r5)((async()=>{const e=await be().callApi({eventName:"getGeoIpLocation",environment:t,data:{}});if("success"===e.type)return e.data}),[t]),a=null==n||null===(e=n.value)||void 0===e?void 0:e.countryCodeFromIp;return!!(0,ge().GC)(a)&&(0,ve().nz)(a)}(),ie=(0,E().s)(),we=(0,ce().bA)(),Te=(0,pe().K)(),Me=(0,r().VK)((()=>t.addOnFeature??(0,_().KE)(t.subscriptionTier)),[t.addOnFeature,t.subscriptionTier]),Pe=(0,s().FG)(null==l?void 0:l.subscription)&&G&&(0,h().jQ)(G.offer.campaign)&&Me===(0,x().Ib)(G);(0,v().K)((()=>{const e=m().GJ(n);u().Z.update((t=>{var a;return{...t,appliedPromo:e?null===(a=n.customerData)||void 0===a?void 0:a.stripe.promo:void 0}})),e&&void 0!==(null==l?void 0:l.address)&&u().Z.setAddressField(null==l?void 0:l.address)}));const Ae=(0,r().VK)((()=>{const e=[Me];return((0,s().xi)(null==l?void 0:l.subscription)??[]).includes("ai")||Pe||e.push("ai"),e}),[Me,l,Pe]),[{billingInterval:Ee,addOnFeature:Ve,name:Ue,businessName:Fe,vatId:Be},Oe]=i.useState({billingInterval:"ai"===Me?"year":"month",name:ie}),[Ze,Ke]=i.useState({}),[qe,Re]=i.useState(),[He,Le]=i.useState(!1),Qe=i.useCallback((e=>{qe&&Re(void 0),Oe((t=>({...t,...e})))}),[qe]),Xe=i.useMemo((()=>(0,C().jj)((0,C().oA)([Me,Ve]))),[Ve,Me]),[Ye,Ge]=i.useState(!1);i.useEffect((()=>{we&&!t.coupon&&(u().Z.update((e=>({...e,coupon:"ai_fifty_percent"}))),async function(){await(0,se().WV)({environment:g,hasReceived:!1,offerType:"add_on_upgrade_flow",coupon:"ai_fifty_percent"})}())}),[t.coupon,we,g]),i.useEffect((()=>{Te&&("month"===Ee&&"plus"===Me&&(u().Z.update((e=>({...e,coupon:"resurrection_offer"}))),Ye||(!async function(){await(0,se().WV)({environment:g,hasReceived:!1,offerType:"resurrection_flow",coupon:"resurrection_offer"})}(),Ge(!0))),"year"===Ee&&"plus"===Me&&u().Z.update((e=>({...e,coupon:void 0}))))}),[t.coupon,Te,Ee,Me,g,Ye]),i.useEffect((()=>{le().W_({environment:g,billingInterval:Ee,vatId:Be,billingData:l,addOn:Ve,onlyShowAddOn:"ai"===Me})}),[g,Ee,Ve,Be,l,Me]);const ze={month:(0,fe().O)({billingInterval:"month",priceStore:y().Z,products:Ae}),year:(0,fe().O)({billingInterval:"year",priceStore:y().Z,products:Ae})},We=(0,he().F)({asyncPrice:ze[Ee??"month"].ai}),$e=(0,je().j4)(l,we),Je=(0,he().F)({asyncPrice:ze.month[Me]}),et=(0,he().F)({asyncPrice:ze.year[Me]}),tt=i.useCallback((async e=>{if(Re(void 0),!Ue)return void Ke((e=>({...e,name:{type:"required",message:U.formatMessage({id:"spaceSubscriptionUpgradeModal.name.required.error",defaultMessage:"Your name is required."})}})));if(w().PN(g,{modal_id:t.sessionId}),Le(!0),!Z||!B)return(0,b().log)({level:"error",from:"SpaceSubscriptionUpgradeModal",type:"StripeError",error:{miscDataString:"Stripe elements not initialized when user tried to upgrade"}}),Re(U.formatMessage({id:"spaceSubscriptionUpgradeModal.payment.genericError",defaultMessage:"Your payment could not be processed. Please try again."})),void Le(!1);const a=await m().DI(g,d.id,n),i=await async function(e){const{billingEmail:t,coupon:n,currencyCode:a,environment:i,elements:o,billingInterval:r,name:s,businessName:l,vatId:d,intl:u,modalId:c,promo:m,quantity:g,selectedProducts:y,stripe:v,useTestClock:b}=e,f=await async function(e){const{modalId:t,modalType:n,environment:a,intl:i,elements:o,stripe:r}=e,s=i.formatMessage({id:"spaceSubscriptionUpgradeModal.payment.genericError",defaultMessage:"Your payment could not be processed. Please try again."}),{error:l}=await o.submit();if(l)return w().VQ(a,{error:"could not submit form",error_type:"payment_method",modal_id:t,modal_type:n}),{error:s};const{error:d,paymentMethod:u}=await r.createPaymentMethod({elements:o});if(d)return w().VQ(a,{error:d.message,error_type:"payment_method",modal_id:t,modal_type:n}),{error:p().translateStripeError(a,i,d)};if(!u)return w().VQ(a,{error:"could not create token",error_type:"payment_method",modal_id:t,modal_type:n}),{error:s};const c={type:"paymentMethodId",value:u.id},m=u.billing_details.address;return{paymentData:c,address:{zipCode:(null==m?void 0:m.postal_code)??"",country:K().P1.includes(u.type)?"KR":(null==m?void 0:m.country)??""}}}({modalId:c,environment:i,intl:u,elements:o,stripe:v});if("error"in f)return{error:f.error};return void(await oe({address:{name:s??"",businessName:l??"",addressLine1:"",addressLine2:"",zipCode:f.address.zipCode??"",city:"",state:"",country:f.address.country??""},billingEmail:t,billingInterval:r,coupon:n,currencyCode:a,environment:i,modalId:c,paymentData:f.paymentData,promo:m,quantity:g,selectedProducts:y,stripe:v,vatId:d,useTestClock:b,intl:u}))}({billingEmail:m().Md(t,n,l),coupon:t.coupon,currencyCode:ne,environment:g,elements:Z,intl:U,billingInterval:Ee,name:Ue,businessName:Fe,vatId:ae?Be:void 0,modalId:t.sessionId,promo:t.appliedPromo,quantity:a,selectedProducts:Xe,stripe:B,useTestClock:e.useTestClock});return null!=i&&i.error?(Re(i.error),void Le(!1)):(function(e){const{environment:t,modalId:n}=e;u().Z.reset(),w().LY(t,{modal_id:n})}({environment:g,modalId:t.sessionId}),"ai"===Me?(N().default.reset(),function(e){const{environment:t,spaceStore:n,spaceViewStore:a,intl:i,currentUserRootStore:o}=e,r=(0,Y().getAIUpgradeTemplate)({intl:i});if(!r)throw new Error("AI template not found");if(!o)throw new Error("Cannot create BlockStore: currentUserRootStore not found");const s=z().G.createChildStore(o,{table:O().iU,id:r.rootId});(0,Q().JI)({environment:t,blockStore:s,spaceStore:n,spaceViewStore:a,hideModal:!0,disableRedirect:!0,showDuplicationStartedToast:!1,showDuplicationFinishedToast:!1}).then((e=>{e&&L().oV({label:i.formatMessage({id:"spaceSubscriptionUpgradeModal.upgradeAi.success",defaultMessage:"You now have unlimited Notion AI"}),style:{gap:8,display:"flex"},right:(0,J.jsx)(ee,{onClick:()=>{H()._c({environment:t,store:e,visitType:X().vu.Link,pageVisitSource:F().tY.Duplicate})}})})})).catch((e=>{b().log({from:"client/checkoutActions",level:"error",type:"aiUpgrade.duplicationFailed",data:{message:"AI Upgrade duplication failed.  Block store not found"}})}))}({environment:g,spaceStore:d,spaceViewStore:c,intl:U,currentUserRootStore:R}),void(q&&(null==W||W()))):void T().r$({currentTab:"billing"}))}),[l,Ee,Fe,ne,R,n,Z,g,U,q,Ue,W,Me,Xe,d,c,t,B,ae,Be]),nt=(0,r().VK)((()=>(0,te().G2)()&&!1),[]),at=[{buttonType:"primary",isDisabled:He,isLoading:He,label:j().Jg.some((e=>e===Me))?(0,J.jsx)(S()._H,{id:"subscriptionUpgradeModal.upgradeButton.upgradeToPlan",defaultMessage:"Upgrade to {plan}",values:{plan:(0,I().v$)(Me,U)}}):(0,J.jsx)(S()._H,{id:"subscriptionUpgradeModal.upgradeButton.upgradeAi",defaultMessage:"Upgrade now"}),onClick:()=>tt({useTestClock:!1})}];nt&&at.push({buttonType:"primary",isDisabled:He,label:"🚧 Upgrade with Test Clock 🚧",onClick:()=>tt({useTestClock:!0})});const it=["business","enterprise"].includes(Me)?[{buttonType:"outline",label:(0,J.jsxs)(D().jX,{direction:"row",gap:6,align:"center",children:[(0,J.jsx)(P().y,{iconGroup:f().G,variantName:"default",colorName:"primary"}),(0,J.jsx)(S()._H,{id:"spaceSubscriptionSettings.upgradeModal.contactSales",defaultMessage:"Contact sales"})]}),onClick:()=>(0,re().nx)({initialQuestion:"enterprise"===Me?"interest_in_enterprise":"interest_in_business",openedFrom:"enterprise"===Me?"enterprise_checkout_modal":"business_checkout_modal"})}]:void 0;if(!$)return(0,J.jsx)(xe().L,{});const ot=(0,je().We)({product:Me,coupon:t.coupon});return Pe&&(ot.subtitle=(0,J.jsx)(A().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",customStyles:{maxWidth:525},children:(0,J.jsx)(S()._H,{id:"subscriptionUpgradeModal.upgradeDuringTrial",defaultMessage:"Unlimited access to our most loved team features. If you choose not to upgrade, you will be on a free plan with restricted usage."})})),(0,J.jsx)(De,{showDismissButton:!0,header:(0,J.jsx)(Se().M,{...ot,image:"ai"===Me?(0,J.jsx)(M().fy,{variant:"medium",style:{}}):(0,J.jsx)(ue().q,{product:Me})}),paymentContent:(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(Ce().g,{title:(0,J.jsx)(S()._H,{id:"subscriptionUpdateModal.billedTo",defaultMessage:"Billed to"}),name:Ue??"",onChangeName:e=>{Ze.name&&Ke((e=>({...e,name:void 0}))),Qe({name:e})},businessName:Fe??"",onChangeBusinessName:e=>Qe({businessName:e}),vatId:Be,onChangeVatId:ae?e=>Qe({vatId:e}):void 0,validationErrors:Ze,modalId:t.sessionId}),(0,J.jsx)(D().jX,{gap:8,style:{marginBottom:0},children:(0,J.jsx)(Ne().n,{})})]}),orderOptions:$e?null:(0,J.jsxs)(D().jX,{gap:20,children:[(0,J.jsx)(_e().wJ,{selectedBillingInterval:Ee,monthlyUnitPrice:Je,yearlyUnitPrice:et,onChange:e=>{w().FR(g,{billingInterval:e,modal_id:t.sessionId}),Qe({billingInterval:e})},product:Me,coupon:t.coupon}),Ae.includes("ai")&&"ai"!==Me?(0,J.jsx)(_e().hj,{selectedAddOn:Ve,unitPrice:We,onChange:e=>{w().qz(g,{addOnFeatures:e?[e]:void 0,modal_id:t.sessionId}),Qe({addOnFeature:e})},coupon:t.coupon,billingInterval:Ee}):null]}),footer:(0,J.jsxs)(D().jX,{gap:16,children:[(0,J.jsx)(ke,{state:t,data:n,billingInterval:Ee,products:Xe,promo:t.appliedPromo,billingData:l,dueAtPeriodEnd:Pe}),(0,J.jsx)(Ie().R,{primaryButtons:at,secondaryButtons:it,termsOfService:(0,J.jsx)(de().E,{showTrialEndDisclaimer:(0,s().FG)(null==l?void 0:l.subscription)&&!Pe,products:Xe})}),qe?(0,J.jsx)(A().q,{styleName:"Caption-12px/Regular",colorName:"uiRedPrimary",children:qe}):null]})})}function Fe(e){let{data:t,billingData:n,spaceStore:a,spaceViewStore:i}=e;const s=(0,o().O7)(),p=(0,r().VK)((()=>u().Z.state),[]);return(0,J.jsx)(l().c,{ariaLabelledBy:d().BaY,isOpen:p.open,onClosed:()=>c().Fp(s),animateSizeTransition:!1,areaConstraint:{width:{type:"min",length:400}},render:()=>p.open?(0,J.jsx)("div",{style:{overflowY:"auto"},children:(0,J.jsx)(Be,{state:p,billingData:n,data:t,spaceStore:a,spaceViewStore:i})}):null})}function Be(e){const{state:t,billingData:n,data:i,spaceStore:o,spaceViewStore:l}=e,{subscriptionTier:d,onlyShowAddOn:u,calculatingTax:c,temporaryBillingInterval:v,taxAmount:b,addOnFeature:f,coupon:h}=t,x=(0,r().VK)((()=>(0,s().bs)(null==n?void 0:n.subscription)??y().Z.selectedCurrencyCode),[n]),j=(0,g().V)(i),{payAmount:_}=m().uN({subscriptionTier:d,memberCount:j,currencyCode:x,promo:t.appliedPromo,billingData:n,onlyShowAddOn:u,calculatingTax:c,billingInterval:v??"year",taxAmount:b,addOnFeature:f,coupon:h}),I=(0,p().useElementsOptions)({type:"subscription",amount:_.amount,currency:_.currencyCode}),S=(0,p().getStripe)();return(0,J.jsx)(a().Elements,{stripe:S,options:I,children:(0,J.jsx)(Ue,{spaceViewStore:l,billingData:n,state:t,data:i,spaceStore:o})})}},398499:(e,t,n)=>{n.d(t,{n:()=>y});var a=()=>n(629756),i=(a(),n(667294),()=>n(219727)),o=()=>n(142735),r=()=>n(846550),s=()=>n(788860),l=()=>n(979614),d=()=>n(212493),u=()=>n(168441),c=()=>n(876822),p=()=>n(145613),m=()=>n(720343),g=n(785893);function y(e){const{hideTitle:t,modalId:n}=e,y=(0,i().O7)(),v=(0,r().yK)((e=>({lockIcon:{width:12,color:e.icon.tertiary}})),[]),b={defaultValues:{billingDetails:(0,o().VK)((()=>{const e=c().default.state.currentUserStore;return{email:null==e?void 0:e.getEmail(),name:null==e?void 0:e.getName()}}),[])}};return(0,g.jsx)(m().FC,{title:t?null:(0,g.jsxs)(d().jX,{direction:"row",gap:"auto",align:"center",children:[(0,g.jsx)(s()._H,{id:"checkoutPaymentField.paymentDetails.title",defaultMessage:"Payment details"}),(0,u().Q)(v.lockIcon)]}),children:(0,g.jsx)(a().PaymentElement,{options:b,onChange:e=>{l().Dc(y,{event:e,modal_id:n}),p().Z.update((e=>{if(!e.open)return e;const{paymentData:t,...n}=e;return n}))}})})}},464888:(e,t,n)=>{n.d(t,{R:()=>l});n(667294);var a=()=>n(846550),i=()=>n(212493),o=()=>n(830581),r=()=>n(661641),s=n(785893);function l(e){let{primaryButtons:t,secondaryButtons:n,termsOfService:l,error:d,textAlign:u="left"}=e;const c=(0,a().yK)((e=>({errorText:{color:e.text.uiRedPrimary,textAlign:u}})),[u]);return(0,s.jsx)(o().a6,{primaryButtons:t,secondaryButtons:n,caption:(0,s.jsxs)(i().jX,{gap:16,children:[(0,s.jsx)(r().q,{styleName:"Caption-12px/Regular",colorName:"secondary",style:{textAlign:u},children:l}),d?(0,s.jsx)("span",{style:c.errorText,children:d}):null]}),layout:"vertical",sectionGap:16})}},251054:(e,t,n)=>{n.d(t,{M:()=>r});n(667294);var a=()=>n(212493),i=()=>n(661641),o=n(785893);function r(e){const{title:t,subtitle:n,image:r}=e;return(0,o.jsxs)(a().jX,{gap:8,align:"top-left",children:[r,(0,o.jsxs)(a().jX,{gap:4,children:[(0,o.jsx)(i().q,{styleName:n?"Title-22px/Bold":"Title-Large-26px/Bold",children:t}),n?(0,o.jsx)(i().q,{styleName:"Heading-17px/Regular",colorName:"secondary",children:n}):null]})]})}},701611:(e,t,n)=>{n.d(t,{G:()=>a});const a=(0,n(827282).CZ)("infoBubble",{default:{loader:()=>n.e(48506).then(n.bind(n,748506))},small:{loader:()=>n.e(66398).then(n.bind(n,66398))},mini:{loader:()=>n.e(7873).then(n.bind(n,707873))},large:{loader:()=>n.e(3020).then(n.bind(n,903020))}})}}]);