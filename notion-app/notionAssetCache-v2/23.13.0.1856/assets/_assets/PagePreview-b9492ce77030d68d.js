"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[46910],{308301:(e,t,i)=>{i.r(t),i.d(t,{PagePreview:()=>A});var o=i.n(i(294184)),r=(i(667294),()=>i(219727)),n=()=>i(657320),s=()=>i(142735),a=()=>i(846550),l=()=>i(506347),d=()=>i(871607),c=()=>i(955620),g=()=>i(572948),u=()=>i(788860),p=()=>i(707513),h=()=>i(636340),m=()=>i(269299),f=()=>i(429725),x=()=>i(239482),y=()=>i(122479),b=()=>i(641506),v=()=>i(480089),k=()=>i(466970),S=()=>i(998901),j=()=>i(876822),V=()=>i(158429),I=()=>i(482162),w=()=>i(826955),P=()=>i(729775),T=()=>i(943620),C=()=>i(679063),K=()=>i(384241),B=()=>i(654133),R=()=>i(251932),D=()=>i(75751),L=()=>i(337897),E=()=>i(9656),H=i(785893);const O=20;function Z(e){const{store:t}=e,i=(0,a().yK)((e=>({summary:{fontSize:13,fontWeight:p().Ue.regular,lineHeight:"17px",letterSpacing:"-0.078px",...(0,b().pd)(3)}})),[]),o=(0,s().VK)((()=>L().TP(t)),[t]);return o&&c().Vkf(o)>=O?(0,H.jsx)("div",{children:(0,H.jsx)("div",{style:i.summary,children:(0,H.jsx)(E().A,{textValue:o,parentStore:t})})}):null}function A(e){const{store:t,onClick:i}=e,n=(0,a().Fg)(),h=(0,u().YB)(),{WindowSizeStore:m}=(0,r().O7)(),y=(0,k().E)("enable_deleted_page_indicator"),S=(0,s().VK)((()=>t.getCover()),[t]),T=(0,s().VK)((()=>t.inMemoryRecordCache.isTemporaryData),[t]),B=(0,s().VK)((()=>{const e=x().wf(t);return y&&e}),[y,t]),L=(0,s().VK)((()=>{const e=V().l.state;if(!e)return!1;return(0,c().QaF)(t.getTitleValue()).toLowerCase().includes(e.toLowerCase())}),[t]),E=(0,s().VK)((()=>{const e=V().V.state;return!!e&&("block"===e.type&&e.id===t.id)}),[t.id]),O=(0,v().cR)(t)&&!T,A=(0,r().Fy)(),_=(0,a().yK)((e=>({blockBackground:{background:"light"===e.mode?void 0:e.cardBackground},title:{fontWeight:p().Ue.medium,fontSize:A.isMobile?p().JB.UIRegular.mobile:p().JB.UIRegular.desktop,lineHeight:1.3,...B&&{color:e.mediumTextColor},...(0,b().pd)(2)},cover:{display:"flex",alignItems:"flex-start",flexDirection:"column",borderRadius:"var(--radius-medium, 8px)",border:`1px solid ${e.darkDividerColor}`},coverContainer:{height:62,alignSelf:"stretch",borderTopLeftRadius:7,borderTopRightRadius:7,overflow:"hidden"},breadcrumb:{color:e.text.secondary,fontSize:11,marginBottom:-2,...p().Yu},content:{display:"flex",padding:"0px 16px 12px 16px",flexDirection:"column",alignItems:"flex-start"},pageTitleIcon:{position:"relative",marginRight:4,marginLeft:16,marginTop:-15,marginBottom:8}})),[B,A]),M=(0,s().VK)((()=>(0,f().Hu)({store:t,fullyQualified:!1,pageVisitSource:l().tY.LinkInPage})),[t]),U=(0,s().VK)((()=>(0,f().Hu)({store:e.store,openInSidePeek:!0,fullyQualified:!1,pageVisitSource:l().tY.PeekOpen})),[e.store]),W=(0,s().VK)((()=>I().default.isSidePeekOpen()),[]),F=(0,s().VK)((()=>m.state.width),[m]),{currentBlockStore:Y}=(0,s().VK)((()=>{const e=j().default.state.currentSpaceStore;if(!e)return{currentBlockStore:void 0};const i=w().G.createChildStore(e,{id:t.id,table:"block"});if(i.isNavigableBlock()){return{currentBlockStore:i.getNavigableBlockStore()}}return i.isDefined()?{currentStore:i}:{currentBlockStore:void 0}}),[t]),{content:N}=(0,s().VK)((()=>{if(!Y)return{content:null};return{content:Y.isEmptyPage()?void 0:(0,H.jsx)(Z,{store:Y})}}),[Y]),Q=(0,s().VK)((()=>(0,C().Lk)(t)),[t]);return(0,H.jsx)(P().Z,{href:M,altHref:U,forceAltHref:W,external:!1,onClick:i,style:{borderRadius:8,...e.style,..._.blockBackground},children:(0,H.jsxs)("div",{style:_.cover,children:[S&&(0,H.jsx)("div",{style:_.coverContainer,children:(0,H.jsx)(D().Z,{store:t,disabled:!0,paddingLeft:0,paddingRight:0,height:62,proxyWidth:F})}),(0,H.jsxs)("div",{style:{display:"flex",flexDirection:S||Q?"column":"row",alignItems:S||Q?void 0:"center",width:"100%",paddingTop:S?0:10},children:[(0,H.jsxs)("div",{style:{flexDirection:"row",paddingTop:4},children:[(0,H.jsx)(z,{store:e.store,disabled:!0,isAlias:e.isAlias,showDeletedPageIndicator:B,cover:!!S}),(0,H.jsx)(d().Z,{theme:n,intl:h,isPageInTrash:O})]}),(0,H.jsxs)(R().Ht,{gap:N?4:0,style:_.content,children:[(0,H.jsxs)(R().Ht,{gap:2,style:{width:"100%",...(0,b().pd)(2)},children:[(0,H.jsx)(C().ZP,{store:t,innerStyle:_.breadcrumb}),(0,H.jsx)("div",{style:{overflow:"auto",...L&&(0,g().ni)({theme:n,isSelectedMatch:E})},className:o()(E&&g().qp),children:(0,H.jsx)(K().Z,{shouldWrap:!0,maxLines:2,store:t,style:_.title})})]}),N]})]})]})})}function _(e){let{store:t,disabled:i}=e;const o=(0,n().l)(),a=(0,r().O7)(),{icon:l,role:d,isEmptyPage:c,type:g}=(0,s().VK)((()=>({icon:t.getIcon(),role:t.getRole(),isEmptyPage:t.isEmptyPage(),type:t.getType()})),[t]),p=(0,s().VK)((()=>function(e,t,i){const o=i&&i.publicEditModeStore.state;return!(0,y().Ix)(o)&&e.canEdit()&&!t}(t,i,o)),[i,o,t]);return(0,H.jsx)(B().Z,{renderTooltip:()=>(0,H.jsx)(u()._H,{defaultMessage:"Change icon",id:"page.changeIcon.tooltip"}),placement:S().Placement.Top,disableTooltip:i||!p,render:e=>i||!p?(0,H.jsx)(T().Z,{disabled:!0,icon:l,isEmptyPage:c,role:d,size:28,style:{width:"100%",height:"100%"},...e,largeIcon:!0}):(0,H.jsx)(T().Z,{disabled:!1,bucket:"secure",store:t,icon:l,role:d,isEmptyPage:c,size:28,style:{width:"100%",height:"100%"},iconLoggingData:{recordTable:t.table,source:"subpage",block_type:g},onChange:e=>function(e,t,i){const o=t.getIconStore();o&&m().createAndCommit({userAction:"Page.handleRecordIconChange",environment:i,canUndo:!0,perform:t=>{h().sO({store:o,value:e,transaction:t})}})}(e,t,a),...e,largeIcon:!0})})}function z(e){let{showDeletedPageIndicator:t,store:i,disabled:o,isAlias:n,cover:s}=e;const l=(0,a().Fg)(),d=(0,r().O7)();if(t){const e=d.device.isSafari||d.device.isIOS;return(0,g().iR)({isSafariOrIOS:e,theme:l})}return(0,H.jsx)("div",{style:{position:"relative",width:24,height:24,marginRight:4,marginLeft:16,marginTop:s?-15:4,marginBottom:8},children:(0,H.jsx)(_,{store:i,disabled:o})})}}}]);