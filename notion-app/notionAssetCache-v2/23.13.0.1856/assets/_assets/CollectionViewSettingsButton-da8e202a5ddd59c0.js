"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[7345],{498782:(e,t,o)=>{o.r(t),o.d(t,{default:()=>x});var n=o(667294),r=()=>o(219727),i=()=>o(142735),a=()=>o(846550),l=()=>o(239730),c=()=>o(250303),s=()=>o(139224),u=()=>o(247724),p=()=>o(867601),d=()=>o(949842),y=()=>o(527278),m=()=>o(731322),f=()=>o(314379),g=()=>o(878797),S=()=>o(876822),_=()=>o(642966),b=()=>o(308939),v=()=>o(153694),h=()=>o(1910),T=()=>o(654133),I=()=>o(986286),w=o(785893);const F=(0,o(788860).vU)({tooltipLabel:{defaultMessage:"Edit view layout, grouping and more...",id:"database.collectionViewSettingsButton.openViewSettingsButton.tooltip"},formTooltipLabel:{defaultMessage:"Edit form, add questions and more...",id:"database.collectionViewSettingsButton.openFormSettingsButton.tooltip"}});function x(e){const t=(0,r().Fy)(),{collectionContextStore:o,hideTooltip:x}=e,P=(0,r().O7)(),k=(0,i().VK)((()=>o.collectionViewStore()),[o]),C=(0,i().VK)((()=>null==k?void 0:k.getType()),[k]),V=(0,i().VK)((()=>o.settingsStore),[o]),A=(0,i().VK)((()=>V.state.open),[V]),K=(0,i().VK)((()=>(0,_().n)(V)),[V]),M=(0,i().VK)((()=>S().default.state.currentUserSettingsStore),[]),{jiraSyncOnboardingTourState:J,currentTutorialStep:D}=(0,i().VK)((()=>{var e;return{jiraSyncOnboardingTourState:null==M||null===(e=M.getSettings())||void 0===e?void 0:e.jira_sync_onboarding_tour_state,currentTutorialStep:(0,m().wF)(M,"jira-sync-onboarding")}}),[M]),R=(0,i().VK)((()=>{var e;return null===(e=S().default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.canEdit()}),[]),Y=(0,i().VK)((()=>b().ZP.state.showOnboardingTour),[]),E=(0,i().VK)((()=>g().default.isVisible("workflow_template_installation")),[]),j=!(0,p().Cf)({tab:K}),$=(0,n.useCallback)((e=>{(0,d().ZP)({event:e,context:d().Af.CollectionSettingsClick,callback:()=>{const e=o.settingsStore;e.state.open?s().E3({collectionSettingsStore:e}):s().r$({collectionContextStore:o,collectionSettingsStore:e})}}),c().wd({environment:P,collectionContextStore:o,action:"click_topbar_view_settings"})}),[o,P]),L=(0,a().yK)((e=>({iconStyle:{width:void 0,height:3,fill:e.mediumIconColor}})),[]),N=(0,n.useRef)(null);if("page"===C||"form_editor"===C&&t.isMobile)return null;const O=(Y||"notSeenSettingsTooltip"===J)&&"settings-to-setup-projects-and-issues"===D,B=O?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(h().Z,{ariaLabel:"form_editor"===C?y().Z.formatMessage(F.formTooltipLabel):y().Z.formatMessage(F.tooltipLabel),className:u().xvU,icon:f().o,ref:N,style:R?{...e.style,boxShadow:l().v.outlineBlueInputBoxShadow.light,borderRadius:6}:e.style,iconStyle:L.iconStyle,hovered:A&&j,onClick:$}),(0,w.jsx)(I().Re,{origin:N,hasEditPermissions:R??!0})]}):(0,w.jsx)(v().D1,{collectionContextStore:o,step:"customize",containerRef:N,children:(0,w.jsx)(h().Z,{ref:N,ariaLabel:"form_editor"===C?y().Z.formatMessage(F.formTooltipLabel):y().Z.formatMessage(F.tooltipLabel),className:u().xvU,icon:f().o,style:e.style,iconStyle:L.iconStyle,hovered:A&&j,onClick:$})});return x||O||E?B:(0,w.jsx)(T().Z,{renderTooltip:()=>"form_editor"===C?y().Z.formatMessage(F.formTooltipLabel):y().Z.formatMessage(F.tooltipLabel),render:e=>(0,w.jsx)("div",{...e,children:B})})}},986286:(e,t,o)=>{o.d(t,{FW:()=>c,Pe:()=>u,Re:()=>p,Rs:()=>d,YW:()=>l,ht:()=>y,lM:()=>s,rM:()=>m,vK:()=>a,yY:()=>f});var n=()=>o(677559);const r={JiraSyncInfoPopup:new(n().Ss)("JiraSyncInfoPopup",(async()=>await Promise.all([o.e(52774),o.e(57023)]).then(o.bind(o,453110)))),ImproveJiraSyncPopup:new(n().Ss)("ImproveJiraSyncPopup",(async()=>await Promise.all([o.e(52774),o.e(81263)]).then(o.bind(o,931329)))),JiraDCAuthModal:new(n().Ss)("JiraDCAuthModal",(async()=>await o.e(40205).then(o.bind(o,253458)))),ExternalImportAndSyncIndicator:new(n().Ss)("ExternalImportAndSyncIndicator",(async()=>await o.e(47433).then(o.bind(o,635604)))),JiraSyncedAllProjectsTooltip:new(n().Ss)("JiraSyncedAllProjectsTooltip",(async()=>await Promise.all([o.e(62743),o.e(75433)]).then(o.bind(o,205959)))),JiraSyncedAllIssuesTooltip:new(n().Ss)("JiraSyncedAllIssuesTooltip",(async()=>await Promise.all([o.e(62743),o.e(75433)]).then(o.bind(o,205959)))),JiraSyncedDatabaseViewsAndFiltersTooltip:new(n().Ss)("JiraSyncedDatabaseViewsAndFiltersTooltip",(async()=>await Promise.all([o.e(62743),o.e(75433)]).then(o.bind(o,205959)))),JiraSyncSourceTooltip:new(n().Ss)("JiraSyncSourceTooltip",(async()=>await Promise.all([o.e(62743),o.e(75433)]).then(o.bind(o,205959)))),JiraSyncedSettingsToSetupProjectsAndIssuesTooltip:new(n().Ss)("JiraSyncedSettingsToSetupProjectsAndIssuesTooltip",(async()=>await Promise.all([o.e(62743),o.e(75433)]).then(o.bind(o,205959))))},i={JiraSyncTeamSpaceModal:new(n().Ss)("JiraSyncTeamSpaceModal",(async()=>Promise.all([o.e(62743),o.e(94568)]).then(o.bind(o,860619))))},a=(0,n().kF)(i.JiraSyncTeamSpaceModal,(e=>e.default)),l=(0,n().kF)(r.JiraSyncedAllProjectsTooltip,(e=>e.JiraSyncedAllProjectsTooltip)),c=(0,n().kF)(r.JiraDCAuthModal,(e=>e.default)),s=(0,n().kF)(r.JiraSyncedAllIssuesTooltip,(e=>e.JiraSyncedAllIssuesTooltip)),u=(0,n().kF)(r.JiraSyncedDatabaseViewsAndFiltersTooltip,(e=>e.JiraSyncedDatabaseViewsAndFiltersTooltip)),p=(0,n().kF)(r.JiraSyncedSettingsToSetupProjectsAndIssuesTooltip,(e=>e.JiraSyncedSettingsToSetupProjectsAndIssuesTooltip)),d=(0,n().kF)(r.JiraSyncSourceTooltip,(e=>e.JiraSyncSourceTooltip)),y=(0,n().kF)(r.JiraSyncInfoPopup,(e=>e.JiraSyncInfoPopup)),m=(0,n().kF)(r.ImproveJiraSyncPopup,(e=>e.ImproveJiraSyncPopup)),f=(0,n().kF)(r.ExternalImportAndSyncIndicator,(e=>e.ExternalImportAndSyncIndicator));(0,o(827282).CZ)("jira",{default:{loader:()=>o.e(7061).then(o.bind(o,207061)),size:20},small:{loader:()=>o.e(7061).then(o.bind(o,207061)),size:16},mini:{loader:()=>o.e(7061).then(o.bind(o,207061)),size:14},large:{loader:()=>o.e(7061).then(o.bind(o,207061)),size:24}})},867601:(e,t,o)=>{o.d(t,{Cf:()=>R,EF:()=>M,JO:()=>w,Li:()=>x,cB:()=>K,i1:()=>P,pw:()=>J,qM:()=>k,qk:()=>I,rU:()=>A,sA:()=>D,sM:()=>V,vM:()=>C,wB:()=>F});o(821057),o(267602),o(916054),o(653476),o(241792),o(228244);var n=o.n(o(443261)),r=()=>o(912203),i=()=>o(473304),a=()=>o(455947),l=()=>o(226413),c=()=>o(871379),s=()=>o(177634),u=()=>o(956057),p=()=>o(528514),d=()=>o(752778),y=()=>o(955620),m=()=>o(513670),f=()=>o(855741),g=()=>o(696459),S=()=>o(960597),_=()=>o(749826),b=()=>o(826955),v=()=>o(815277),h=()=>o(270315),T=()=>o(122479);function I(e){const{automationStore:t,collectionStore:o,typecheckResult:n}=e,i=o.getSchema(),a=t.getKeyStore("properties").getKeyStore("name").getValue();if(null==a||!a.trim())return!1;if(!(0,r().Of)({automationTrigger:t.getTrigger(),collectionSchema:i}))return!1;const l=t.getActionStores().filter((e=>e.isDefined()));return 0!==l.length&&l.every((e=>w({actionStore:e,collectionStore:o,typecheckResult:n})))}function w(e){const{actionStore:t,collectionStore:o,typecheckResult:n}=e;if((0,S().pM)(n,t.id).length>0)return!1;if(t.isType("slack_notification"))return(0,g().$K)(t.getConfigStore().getKeyStore("external_bot_id").getValue())&&(0,g().$K)(t.getConfigStore().getKeyStore("target").getValue());if(t.isType("send_gmail_notification")){const e=t.getConfigStore(),o=e.getKeyStore("to").getValue(),n=e.getKeyStore("email_subject").getValue(),r=e.getKeyStore("email_body").getValue();return!(!n||!r||(0,y().PgY)(n.value)||(0,y().PgY)(r.value))&&!(!(o&&o.value&&o.value.value)||m().xb(o.value.value))}if(t.isType("update_pages")){const e=t.getConfigStore().getKeyStore("target").getValue(),i=t.getConfigStore().getKeyStore("properties").getValue()??[];if(!(0,g().$K)(e)||0===i.length)return!1;if("collection"===e.type){const t=b().NW.createChildStore(o,e.collection).getSchema();if(i.some((e=>(0,r().LF)({property:e,collectionSchema:t})||(0,r().Jy)({collectionSchema:t,property:e,type:"action"}))))return!1}else if("variable"===e.type){const a=(0,s().MY)(e.id);if("global"===a.source&&"button_page"===a.global){const e=o.getSchema();if(i.some((t=>(0,r().LF)({property:t,collectionSchema:e})||(0,r().Jy)({collectionSchema:e,property:t,type:"action"}))))return!1}else{if(f().x.isFail(n))return!1;const o=(0,s().vx)(n.value.valueTypes,e.id),a=o?F(o,t):void 0;if(!a)return!1;const l=a.getSchema();if(i.some((e=>(0,r().LF)({property:e,collectionSchema:l})||(0,r().Jy)({collectionSchema:l,property:e,type:"action"}))))return!1}}else{if("page"===e.type)return!1;(0,g().t1)(e)}return!0}if(t.isType("create_page")){const e=t.getConfigStore().getKeyStore("collection").getValue();if(!(0,g().$K)(e))return!1;const n=b().NW.createChildStore(o,e).getSchema();return!(t.getConfigStore().getKeyStore("properties").getValue()??[]).some((e=>(0,r().LF)({property:e,collectionSchema:n})||(0,r().Jy)({collectionSchema:n,property:e,type:"action"})))}if(t.isType("send_in_app_notification")){const e=t.getConfigStore(),o=e.getKeyStore("target").getValue(),n=e.getKeyStore("notification_message").getValue();if(!o||!n||(0,y().PgY)(n.value))return!1;switch(o.type){case"property":if(!o.propertyId||!o.collectionPointer)return!1;break;case"formula":if(!o.value||!o.value.value||m().xb(o.value.value))return!1}return!0}if(t.isType("define_variables"))return!0;if(t.isType("http_request"))return!0;if(t.isType("publish_site")){const e=t.getConfigStore().getKeyStore("target").getValue();return!!(0,g().$K)(e)}throw new Error(`isActionStoreComplete not implemented for ${t.getType()}`)}function F(e,t){let o;return"block"===e.type.type&&e.type.collection?o=b().NW.createChildStore(t,e.type.collection):"array"===e.type.type&&"block"===e.type.of.type&&e.type.of.collection&&(o=b().NW.createChildStore(t,e.type.of.collection)),o}function x(e){const{collectionStore:t}=e;if(!t||(0,T().EY)(t)||(0,T().Aw)(t))return!1;const o=(0,v().DE)(t.environment,{name:"premium_automations",spaceId:t.getSpaceId(),userId:t.userId});if((t.getFormat().automation_ids??[]).length>=i().ss&&!o)return!1;const n=t.pointer,r=t.getSpaceId();return(0,c().IC)({targetTriggerType:"event",targetParentPointer:n,targetSpaceId:r}).every((e=>{let{pointer:o,minimumRequiredRole:n}=e;const r=t.getRecordRole(o);return!!r&&(0,p().yY)(r,n)}))}function P(e){const{automationStore:t,actionStores:o,collectionStore:n}=e,r=t.getParentStore();if(!r||(0,T().EY)(r)||(0,T().Aw)(n))return!1;const i=t.getMinimumFieldsForPermissions();if(!i)return!1;if(!o.every((e=>e.isDefined())))return!1;const a=o.some((e=>!e.isType("slack_notification")));if(!(0,v().DE)(n.environment,{name:"premium_automations",spaceId:n.getSpaceId(),userId:n.userId})&&a)return!1;return(0,c().fz)({automationValue:i,actionValues:o.map((e=>({config:e.getConfig(),type:e.getType()})))}).every((e=>{let{pointer:o,minimumRequiredRole:n}=e;const r=t.getRecordRole(o);return!!r&&(0,p().yY)(r,n)}))}function k(e){const{automationStore:t,collectionStore:o}=e,n=t.getParentStore();if(!n||(0,T().EY)(n)||(0,T().Aw)(o))return!1;const r=t.getMinimumFieldsForPermissions();if(!r)return!1;return(0,c().bM)(r).every((e=>{let{pointer:o,minimumRequiredRole:n}=e;const r=t.getRecordRole(o);return!!r&&(0,p().yY)(r,n)}))}function C(e){const{automationStore:t,collectionStore:o}=e;if(!t.isTriggerType("event")&&!t.isTriggerType("notification_event"))return!1;const n=t.getEventConfiguration();if(!n||void 0===n.source||n.source.type===d().vF||"filter"===n.source.type)return!1;const r=b().Xr.createChildStore(o,n.source.pointer);return function(e){const t=A(e),o=V(e);return(0,g().$K)(t)||(0,g().$K)(o)}({collectionSchema:o.getSchema(),collectionViewStore:r})}function V(e){var t;if(!_().default.checkGate({gateName:"collections_xws"}))return;const{collectionViewStore:o,collectionSchema:n}=e,r=o.getPropertyFiltersStore().getValue()??[],i=null===(t=o.getQuery(n))||void 0===t?void 0:t.filter,c={operator:"and",filters:(0,a().OH)({propertyFilters:r,combinatorFilter:i,schema:n})},s=(0,a().SH)(c,(e=>{if((0,a().aN)(e)){const t=n[e.property];return!!t&&(0,l().W2)(o.getSpaceId(),t,n)}return!1}));return s&&(0,a().aN)(s)?s.property:void 0}function A(e){var t;const{collectionViewStore:o,collectionSchema:n}=e,i=o.getPropertyFiltersStore().getValue()??[],l=null===(t=o.getQuery(n))||void 0===t?void 0:t.filter,c={operator:"and",filters:(0,a().OH)({propertyFilters:i,combinatorFilter:l,schema:n})},s=(0,a().SH)(c,(e=>{if((0,a().aN)(e)){const t=n[e.property];return!!t&&!(0,r().TX)(t)}return!1}));if(s)return(0,a().aN)(s)?s.property:(0,a().Mm)(s)?s.timestamp:void 0}function K(e){if("collectionTypedView"===e.contextType)return!1;const t=e.collectionStore();return!!t&&(!(t.isSyncedCollection()&&!_().default.checkGate({gateName:"support_synced_database_automations"}))&&void 0===e.viewsModuleContextStore.state)}function M(e){const{collectionSchema:t,propertyIds:o,searchTerm:r}=e;if(!r)return o.slice(0);const i=new Map,a=o.map((e=>{const o=t[e],n=o?`${o.name} ${h().SO[o.type]}`:"";return i.set(e,n),n})),l=n().filter(r,a).map((e=>{let{original:t}=e;return t}));return o.filter((e=>l.includes(i.get(e)??"")))}function J(e){return{pagesAdded:!1,pagePropertiesEdited:{type:"none"},source:{pointer:e.getSpaceShardedPointer(),type:d().vF}}}function D(e){const{automationId:t,automationName:o,collectionStore:n,userId:r}=e;return function(e){const{actionIds:t,automationId:o,collectionStore:n,eventConfiguration:r,lastEditedTime:i,properties:a,userId:l}=e,c=Date.now();return{action_ids:t,alive:!0,created_by_id:l,created_by_table:"notion_user",created_time:c,id:o,last_edited_by_id:l,last_edited_by_table:"notion_user",last_edited_time:i??c,parent_id:n.id,parent_table:d().vF,properties:a??{},space_id:n.getSpaceId(),status:"active",trigger:{event:r,id:u().Il(),type:"event"},version:1}}({actionIds:[],automationId:t,collectionStore:n,eventConfiguration:J(n),properties:{name:o},userId:r})}function R(e){const{tab:t}=e;return"automationSettings"===(null==t?void 0:t.type)||"automationCreateSettings"===(null==t?void 0:t.type)||"automationEditSettings"===(null==t?void 0:t.type)}},815277:(e,t,o)=>{o.d(t,{CH:()=>y,DE:()=>c().DE,KQ:()=>c().KQ,Rv:()=>c().Rv,V5:()=>d().V5,VX:()=>m,eB:()=>c().eB,oo:()=>c().oo});var n=()=>o(255933),r=()=>o(779709),i=()=>o(205228),a=()=>o(845682),l=()=>o(30795),c=()=>o(546464),s=()=>o(404791),u=()=>o(897257),p=()=>o(18281),d=()=>o(259408);const y={guests:e=>{if(!u().subscriptionDataStoreInstance.state)return"loading";return{current:(0,p().s1)(e.environment,e.spaceId,u().subscriptionDataStoreInstance.state)}},team_self_promotion:e=>{},internal_guests:e=>{if(!u().subscriptionDataStoreInstance.state)return"loading";return{current:(0,p().s1)(e.environment,e.spaceId,u().subscriptionDataStoreInstance.state),hasLowGuestLimit:(0,o(548812).fc)()}},members:e=>{const t=u().subscriptionDataStoreInstance.state;return{current:t?(0,l().W)(e.environment,e.spaceId,t):0}},non_admin_members:e=>{},view_chart:e=>{},form_filesize:e=>{},form_customization:e=>{},premium_automations:e=>{},move_to:e=>{},claimable_spaces:e=>{},domain_settings:e=>{},managed_users:e=>{},invite_user_to_workspace_mentions:e=>{},saml:e=>{},scim:e=>{},export_members:e=>{},hipaa_compliance:e=>{},sites_multiple_public_domains:e=>{},custom_image_upload_favicon:e=>{},custom_public_sites_layout:e=>{},seo_title_and_description:e=>{},admin_transfer_private_content:e=>{},ai_slack_qna:e=>{},configurable_mention_invites:e=>{},configurable_retention:e=>{},unbranded_forms:e=>{},ai_google_drive_qna:e=>{},watermarkless_chart_export:e=>{},configurable_deletion_and_retention_settings:e=>{},sudo_mode:e=>{},ai_github_connector:e=>{},ai_jira_connector:e=>{},slack_imports_invite:e=>{},content_reprovisioning:e=>{},ai_space_usage:e=>{var t;let{environment:o,spaceId:c}=e;const p=new(a().H)(o,{table:n().bx,id:c}).getModel(),d=(0,r().oc)(i().default.promotions.ai,p),y=(null===(t=s().Z.state)||void 0===t?void 0:t.spaceUsage)??0,m=u().subscriptionDataStoreInstance.state;return{current:y,memberCount:m?(0,l().W)(o,c,m):0,aiPromotionConfig:d,space:p}},ai_user_usage:e=>{var t;let{environment:o,spaceId:c}=e;const p=new(a().H)(o,{table:n().bx,id:c}).getModel(),d=(0,r().oc)(i().default.promotions.ai,p),y=(null===(t=s().Z.state)||void 0===t?void 0:t.userUsage)??0,m=u().subscriptionDataStoreInstance.state;return{current:y,memberCount:m?(0,l().W)(o,c,m):0,aiPromotionConfig:d,space:p}},block_read_and_write_role:e=>{}};function m(e){return(0,c().Rv)(e)??!1}},153694:(e,t,o)=>{o.d(t,{D1:()=>i,Qm:()=>a});var n=()=>o(677559);const r={postInstallTourTooltip:new(n().Ss)("workflowTemplateTourTooltip",(()=>o.e(20550).then(o.bind(o,976690)))),onboardingPills:new(n().Ss)("onboardingPills",(()=>o.e(31257).then(o.bind(o,130347))))},i=(0,n().kF)(r.postInstallTourTooltip,(e=>e.WorkflowTemplateTourTooltip)),a=(0,n().kF)(r.onboardingPills,(e=>e.PostInstallPills))},912203:(e,t,o)=>{o.d(t,{$M:()=>g,GQ:()=>T,Jy:()=>F,LF:()=>w,NO:()=>y,Of:()=>x,SF:()=>p,TX:()=>h,XO:()=>S,Y_:()=>u,Ym:()=>f,bD:()=>b,cO:()=>d,fo:()=>I,rR:()=>m});o(267602),o(653476),o(228244);var n=()=>o(513670),r=()=>o(696459),i=()=>o(226413),a=()=>o(109477),l=()=>o(455222),c=()=>o(305580);(0,r().AO)((e=>(0,r().$K)(e)&&(0,r().$K)(e.target)&&(0,r().$K)(e.external_bot_id)?{true:{external_bot_id:e.external_bot_id,target:e.target}}:{false:e}));const s={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1},u={checkbox:[{type:"checkbox"}],date:[{type:"date"}],email:[{type:"text"}],multi_select:[{type:"text"},{of:{type:"text"},type:"array"}],number:[{type:"number"}],person:[{type:"person"},{of:{type:"person"},type:"array"}],phone_number:[{type:"text"}],relation:[{type:"block"},{of:{type:"block"},type:"array"}],select:[{type:"text"},{of:{type:"text"},type:"array"}],status:[{type:"text"},{of:{type:"text"},type:"array"}],text:void 0,title:void 0,url:[{type:"text"}]};function p(e){return Boolean(s[e.type]&&!(0,i().NK)(e)&&(!(0,i().qQ)(e)||void 0===(0,i().q3)(e)))}function d(e){const{collectionFormat:t,collectionSchema:o,filter:l,sort:s,sourcePropertyIds:u}=e,d=(u??(0,r().Yd)(o)).filter(((t,n,r)=>{const a=o[t];return!(!a||!p(a))&&(("relation"!==a.type||!e.restrictCrossSpace||!(0,i().Qh)(e.spaceId,a))&&(!l||l([t,a],n,o)))}));if(0===d.length)return[];if(!t||!1===s)return d;const y=(0,c().i)(t,o,void 0,a().j5.Page).collection_page_properties||[];return n().MR(d,(e=>y.findIndex((t=>t.property===e))))}function y(e){const{collectionFormat:t,collectionSchema:o,sort:l}=e,s=(0,r().Yd)(o).filter(((e,t,n)=>{const r=o[e];return!(!r||!(0,i().U8)(r))}));if(0===s.length)return[];if(!t||!1===l)return s;const u=(0,c().i)(t,o,void 0,a().j5.Page).collection_page_properties||[];return n().MR(s,(e=>u.findIndex((t=>t.property===e))))}function m(e){return e.type===l().$E.InvalidCharacter?{type:e.type,character:e.character}:e.type===l().$E.TokenExpected?{type:e.type,token:e.token}:e.type===l().FY.MissingSchemaPropertyOnThisRow||e.type===l().FY.MissingSchemaPropertyOnCollection?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===l().FY.ThisRowBlockPropertyMismatchCollection?{type:e.type,thisRowCollection:e.thisRowCollection}:e.type===l().FY.MissingContextVariable?{type:e.type,valueId:e.valueId}:e.type===l().FY.FunctionCallTooFewArguments?{type:e.type,numArguments:e.numArguments}:e.type===l().FY.FunctionCallUnexpectedArgument?{type:e.type,parameterIndex:e.parameterIndex}:e.type===l().FY.FunctionCallArgumentWrongType?{type:e.type,argumentType:e.argumentType,libraryFunctionName:e.libraryFunction.name,parameterIndex:e.parameterIndex}:e.type===l().FY.MissingDataDependencyBlock?{type:e.type,blockPointer:e.blockPointer}:e.type===l().FY.MissingDataDependencyPerson?{type:e.type,personPointer:e.personPointer}:e.type===l().FY.MemberPropertyMismatchCollection?{type:e.type,blockCollection:e.blockCollection}:e.type===l().FY.DownstreamParseFailure?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===l().FY.ContextVariableWrongType?{type:e.type,valueId:e.valueId,expectedType:e.expectedType,resultType:e.resultType}:e.type===l().FY.DisallowedValueType?{type:e.type,expressionValue:e.expressionValue,allowedValueTypes:e.allowedValueTypes}:e.type===l().FY.LibraryFunctionExecutionError?{type:e.type,error:e.error,libraryFunctionName:e.libraryFunction.name}:{type:e.type}}const f={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,button:!1,file:!1,verification:!1,auto_increment_id:!1,created_by:!1,created_time:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1};function g(e){return Boolean(f[e.type])}function S(e){const{collectionFormat:t,collectionSchema:o,filter:l,sort:s}=e,u=(0,r().Yd)(o).filter(((e,t,n)=>{var r;const a=o[e];return!(!a||!f[a.type])&&((!(0,i().qQ)(a)||null===(r=(0,i().q3)(a))||void 0===r||!r.auto_update_on_edit)&&(!l||l([e,a],t,o)))}));if(0===u.length)return[];if(!t||!1===s)return u;const p=(0,c().i)(t,o,void 0,a().j5.Page).collection_page_properties||[];return n().MR(u,(e=>p.findIndex((t=>t.property===e))))}const _={checkbox:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,date:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1};function b(e){return _[e.type]}const v={checkbox:!0,created_by:!0,created_time:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,last_edited_by:!0,last_edited_time:!0,auto_increment_id:!1,button:!1,file:!1,formula:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1};function h(e){return v[e.type]}function T(e){return 0===e}function I(e){return function(e){return"button_block"===e||"button_property"===e}(e)}function w(e){const{property:t,collectionSchema:o}=e;return!!o&&!o[t]}function F(e){const{collectionSchema:t,property:o,type:n}=e,r=null==t?void 0:t[o];return!r||("action"===n?!p(r):!f[r.type])}function x(e){let{automationTrigger:t,collectionSchema:o}=e;if("event"===(null==t?void 0:t.type)||"notification_event"===(null==t?void 0:t.type)){const{pagesAdded:e,pagePropertiesEdited:n,source:i}=t.event;if(void 0===i)return!1;const a="some"===n.type&&n.some,l="all"===n.type&&n.all;if((a||l||[]).some((e=>w({collectionSchema:o,property:e.property})||F({collectionSchema:o,property:e.property,type:"trigger"}))))return!1;const c="some"===n.type&&(!(0,r().$K)(n.some)||0===n.some.length),s="all"===n.type&&(!(0,r().$K)(n.all)||0===n.all.length);if(!e&&("none"===n.type||c||s))return!1}else{if("recurrence"!==(null==t?void 0:t.type))return!1;if(!t.recurrence)return!1}return!0}},259408:(e,t,o)=>{o.d(t,{$W:()=>d,KQ:()=>p,_e:()=>m,Ay:()=>S,fS:()=>u,t:()=>i(),V5:()=>f,Kz:()=>g});o(267602),o(653476);var n=()=>o(513670),r=()=>o(696459),i=()=>o(124199),a=()=>o(629719);const l=["student","personal","plus","business","enterprise"];function c(e){return(0,r().DE)(l,e)}var s=()=>o(122792);const u=["plus","business","enterprise","ai","sites_custom_hostnames"];function p(e,t,o,n){return m(d(e,t,o,n))}function d(e,t,o,n){const{name:i,scope:a,actor:l}=n,c={...n,billingData:a.billingData},s=a.premiumFeatureOverrides,u=i in s?function(e,t,o){const n={type:"contact_account_manager"},i=e[t.name].type;if("check"===i){const e={type:"none"};return!0===o?{type:"available",limit:e}:{type:"upsell",upsell:n,limit:e}}if("per_use"===i){const e=t.amount,r={type:"per_use",amount:o};return"unlimited"===o||o>e?{type:"available",limit:r}:{type:"upsell",upsell:n,limit:r}}if("cumulative"===i){const e=t.amount,r=t.data.current,i={type:"cumulative",current:r,total:o};return"unlimited"===o||o>=r+e?{type:"available",limit:i}:{type:"upsell",upsell:n,limit:i}}(0,r().t1)(i)}(t,n,s[i]):o[i](c);let p;if("available"===u.type){const e=u.upsell?y(a.billingData,u.upsell,n.supportedProducts):void 0;p={...u,upsell:e}}else if("blocked"===u.type){const e=y(a.billingData,u.upsell,n.supportedProducts);p={...u,upsell:e}}else{const e=y(a.billingData,u.upsell,n.supportedProducts),t=function(e){const{actor:t,supportedProducts:o,upsell:n}=e;if(!t.isSpaceAdmin)return"blocked";const i=n.type;switch(i){case"product":return o.includes(n.product)?"upsell":"blocked";case"contact_sales":case"contact_account_manager":return"upsell";default:(0,r().t1)(i)}}({actor:l,supportedProducts:n.supportedProducts,upsell:e});p={...u,type:t,upsell:e}}return Math.random()<.001&&e({level:"info",from:"premiumFeatureFramework",type:"getPremiumFeatureAvailability",data:{featureName:i,featureScope:a,featureActor:l,featureAvailability:u}}),p}function y(e,t,o){if((0,a().Rd)(e.subscription))return{type:"contact_account_manager"};if("product"!==(null==t?void 0:t.type)||o.includes(t.product)||!c(t.product))return t;const r=t.product,i=o.filter((e=>c(e))).filter((e=>"student"!==e)).filter((e=>s().rC[e]>=s().rC[r])),l=(0,n().F)(i,(e=>s().rC[e]));return l?{...t,product:l}:t}function m(e){return"available"===(null==e?void 0:e.type)}function f(e,t){const{available:o}=t;let n,i;return"unavailable"in t?(n=t.unavailable,i=t.unavailable):(n=t.blocked,i=t.upsell),"available"===e.type?o():"upsell"===e.type?i(e):"blocked"===e.type?n(e):(0,r().t1)(e)}function g(e,t){if(void 0!==e)return f(e,{available:()=>{},blocked:t,upsell:()=>{}})}function S(e){return i().object({required:e,optional:{}})}}}]);