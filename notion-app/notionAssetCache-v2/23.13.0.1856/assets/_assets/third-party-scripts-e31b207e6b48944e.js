"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[39765],{666357:(e,t,a)=>{a.d(t,{EK:()=>r,IM:()=>o,QZ:()=>n,_g:()=>s,x9:()=>c,yb:()=>l});var i=()=>a(594546);function s(e,t){const{name:a,...s}=t;i().K4(e,"click_link",{...s,click_name:a})}function n(e,t){i().K4(e,"scroll",t)}function o(e,t){i().K4(e,"customer_io_in_app_callout_show",t)}function r(e,t){i().K4(e,"customer_io_in_app_callout_suppress",t)}function c(e,t){i().K4(e,"customer_io_in_app_callout_dismiss",t)}function l(e,t){i().K4(e,"customer_io_in_app_callout_error",t)}},519563:(e,t,a)=>{a.d(t,{S:()=>n});var i=()=>a(142735),s=()=>a(876822);function n(){return(0,i().VK)((()=>{const{currentSpaceStore:e}=s().default.state;return(null==e?void 0:e.getMemberCountFromPublicSpaceData())||null}),[])}},679035:(e,t,a)=>{a.r(t),a.d(t,{InjectThirdPartyScripts:()=>P,useThirdPartyScripts:()=>A});var i=a(667294),s=()=>a(219727),n=()=>a(142735),o=(a(670560),()=>a(342792)),r=()=>a(289525),c=()=>a(565630),l=()=>a(347960);const d={siteId:"a2a8e2144b2bbbb4074a",orgId:"901895b8-45c7-40c8-ba91-626cfc6739b3"};function u(){var e,t,a;if(!window._cio)for(window._cio=[],e=function(e){return function(){window._cio.push([e].concat(Array.prototype.slice.call(arguments,0)))}},t=["load","identify","sidentify","track","page","on","off","reset"],a=0;a<t.length;a++)window._cio[t[a]]=e(t[a])}var g=()=>a(944077),p=()=>a(625230),f=()=>a(666357),m=()=>a(497065),y=()=>a(205228),S=()=>a(572623),v=()=>a(410329),_=()=>a(148126),w=()=>a(43519),b=()=>a(658096),I=()=>a(876822),k=()=>a(901085),E=()=>a(743959),h=()=>a(749826),C=()=>a(551417),K=()=>a(677559);var D=()=>a(519563);function A(){const e=(0,s().O7)(),t=(0,D().S)()||0,a=(0,s().Fy)(),{currentUser:A}=e,P=(0,n().VK)((()=>{var e;return null===(e=I().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),{siteGoogleAnalyticsId:R,requestedOnPublicDomain:M}=(0,n().VK)((()=>{if(!(0,_().Sr)(e))return{siteGoogleAnalyticsId:void 0,requestedOnPublicDomain:!1};const{publicPageData:t}=b().default.state,{siteGoogleAnalyticsId:a}=t||{};return a&&a.match(/[0-9A-Z]+/)?{siteGoogleAnalyticsId:`G-${a}`,requestedOnPublicDomain:!0}:{siteGoogleAnalyticsId:void 0,requestedOnPublicDomain:!0}}),[e]);!function(e){let{isEnabled:t,cookieService:a,siteGoogleAnalyticsId:s}=e;(0,i.useEffect)((()=>{(async function(){return!(!t||!s||!(await r().ec({service:"google_tag_manager",cookieService:a}))||"dataLayer"in window)})().then((e=>{if(e)return(0,l().ZP)(`https://www.googletagmanager.com/gtag/js?id=${s}`,{id:"notion-site-google-analytics"}).catch((e=>{console.error("GA script failed to load",e)})).then((()=>{if(window.dataLayer){function e(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",s)}}))}))}),[t,a,s])}({isEnabled:Boolean(M),siteGoogleAnalyticsId:R,cookieService:e.cookieService}),function(e){let{isEnabled:t,isLoggedIn:a,userId:s,onMessageOpened:n,onMessageDismissed:g,onMessageError:p,onMessageAction:f,cookieService:m}=e;(0,i.useEffect)((()=>{(async function(){return!!t&&!!(await r().ec({service:"customer_io",cookieService:m}))&&!("cio-tracker"in window)})().then((e=>{if(e)return u(),(0,l().ZP)("https://assets.customer.io/assets/track.js",{id:"cio-tracker",attributes:{"data-site-id":d.siteId,"data-use-array-params":"true","data-in-app-org-id":d.orgId,"data-use-in-app":"true","data-auto-track-page":"false"}}).catch((e=>{console.warn("Customer.io failed to load",e)}))}))}),[t,m]);const y=(0,c().D9)(s);(0,i.useEffect)((()=>{y!==s&&(u(),a&&void 0!==s?(window._cio.identify({id:(0,o().cj)(s)}),n&&window._cio.on("in-app:message-opened",n),g&&window._cio.on("in-app:message-dismissed",g),f&&window._cio.on("in-app:message-action",f),window._cio.on("in-app:message-error",p)):window._cio.reset())}),[a,s,y,n,g,p,f])}({isEnabled:(0,n().VK)((()=>A.isLoggedIn()),[A]),isLoggedIn:A.isLoggedIn(),userId:A.id,onMessageOpened:t=>{E().Z.state.suppressReason?f().EK(e,{message_id:t.detail.messageId,reason:E().Z.state.suppressReason}):(E().Z.setState({...E().Z.state,isVisible:!0}),f().IM(e,{message_id:t.detail.messageId}))},onMessageDismissed:t=>{E().Z.setState({...E().Z.state,isVisible:!1}),f().x9(e,{message_id:t.detail.messageId})},onMessageError:t=>{f().yb(e,{message_id:t.detail.messageId})},onMessageAction:t=>{if(t.detail.actionValue.startsWith("relative_url=")){const a=t.detail.actionValue.split("relative_url=")[1];m().c4({environment:e,url:a})}t.detail.message.dismiss()},cookieService:e.cookieService}),(0,p().kI)({...(0,n().VK)((()=>{var e;const i=w().default.state.isSprigEnabled&&k().Z.state.permission.performance&&h().default.checkGate({gateName:"sprig"})&&a.isDesktop,{currentUserSettingsStore:s,currentSpaceStore:n,currentUserStore:o}=I().default.state,r=null==o?void 0:o.getEmail(),c=s?(0,S().e2)(s):null,l=Boolean(null==n?void 0:n.canAdmin()),d=null==n||null===(e=n.getModel())||void 0===e?void 0:e.getDaysSinceCreated();return{isEnabled:i,userEmail:r,userDaysSinceSignup:c??0,userDomainType:(0,S().JF)(),daysSinceSpaceCreated:d,isSpaceAdmin:l,spaceMemberCount:t}}),[a,t]),isLoggedIn:A.isLoggedIn(),userId:A.id,spaceId:P,sprigConfig:y().default.sprig}),function(e){var t;const{userId:a,spaceId:s,...n}=e,o=(0,K().XJ)(C().Z);(0,i.useEffect)((()=>{if(!o.value)return;const{Sentry:e,sentryInitializeFull:t}=o.value;t({Sentry:{...e,isFullSDK:!0},config:y().default,...n})}),[o.value,n]);const r=null===(t=o.value)||void 0===t?void 0:t.Sentry;(0,i.useEffect)((()=>{r&&r.setUser(a?{id:a}:null)}),[r,a]),(0,i.useEffect)((()=>{r&&r.setTag("space.id",s)}),[r,s])}({userId:A.id,spaceId:P,getErrorsSampleRate:(0,i.useCallback)((()=>h().default.getConfigKey("sentry","errorsSampleRate")),[]),getTracesSampleRate:(0,i.useCallback)((()=>h().default.getConfigKey("sentry","tracesSampleRate-v0")),[]),getReplaysSessionSampleRate:(0,i.useCallback)((()=>h().default.getConfigKey("sentry","replaysSessionSampleRate-v0")),[]),getReplaysOnErrorSampleRate:(0,i.useCallback)((()=>h().default.getConfigKey("sentry","replaysOnErrorSampleRate-v0")),[]),getIsProfilingEnabled:(0,i.useCallback)((()=>"sentry"===(0,v().getProfilingToolForSession)()),[]),getProfilesSampleRate:(0,i.useCallback)((()=>h().default.getConfigKey("sentry","profilesSampleRate")),[])}),(0,g().useConfigurePalette)({userId:A.id,spaceId:P,pageType:(0,n().VK)((()=>{var e;return null===(e=I().default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.getType()}),[]),device:a})}function P(){return A(),null}}}]);