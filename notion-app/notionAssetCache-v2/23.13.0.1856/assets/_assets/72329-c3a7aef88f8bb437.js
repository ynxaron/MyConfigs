"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[72329],{641481:(e,s,i)=>{i.d(s,{Z:()=>n});i(667294);var t=i(785893);const n=function(e){const s=(0,i(219727).O7)(),n=(0,i(846550).Fg)();return(0,t.jsx)(i(108714).Z,{style:{display:"flex",alignSelf:"stretch",width:36,...e.isRight?{marginRight:-8}:{marginLeft:-8}},external:!0,href:e.href,onClick:()=>i(407391).Fs(s,{from:e.analyticsFrom}),children:(0,t.jsx)(i(154186).Z,{mobileFeedback:!0,style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},children:(0,i(653457).m)({width:18,marginTop:1,fill:n.lightIconColor})})})}},98148:(e,s,i)=>{i.d(s,{B:()=>l,v:()=>a});i(267602),i(30005);var t=()=>i(542487),n=()=>i(18281),o=()=>i(897257),r=()=>i(239482);function a(){const e=o().subscriptionDataStoreInstance.state,s=e?n().CM(e):[],i=new Map;return s.forEach((e=>{i.set(e.userId,e)})),i}function l(e){const{spaceVisibleUserMap:s,blockStore:i,userId:n}=e,o=s.get(n);if(!o||"none"!==o.role)return;if(!o.isTeamGuest)return"guest";const a=r().VP(i),l=null==a?void 0:a.getModel();if(!l)return"guest";return(0,t().s8)({team:l,userId:n})?"team_level_guest":"guest"}},609836:(e,s,i)=>{i.d(s,{b:()=>l});var t=()=>i(219727),n=()=>i(142735),o=()=>i(788860),r=()=>i(345918),a=()=>i(876822);function l(){const e=(0,t().O7)(),s=(0,o().YB)();return(0,n().VK)((()=>{const{currentSpaceStore:i}=a().default.state;return i?(0,r().rn)(e,i):s.formatMessage({defaultMessage:"Untitled workspace",id:"spaceHelpers.getSpaceName.untitledWorkspace.name"})}),[e,s])}},493155:(e,s,i)=>{i.d(s,{P:()=>n});i(667294);var t=i(785893);const n=(0,i(827282).IU)("expandThin",{viewBox:"0 0 16 16",svg:(0,t.jsx)("path",{d:"M7.992.61c.156 0 .3.033.43.1.13.069.27.16.422.274l5.265 4.25a.948.948 0 01.368.774 1 1 0 01-.149.547c-.099.156-.229.28-.39.375a1.013 1.013 0 01-.508.133 1.07 1.07 0 01-.399-.079 1.6 1.6 0 01-.375-.226L7.992 3.016 3.336 6.758a1.74 1.74 0 01-.383.226 1.056 1.056 0 01-.906-.055 1.145 1.145 0 01-.383-.374 1 1 0 01-.148-.547c0-.318.122-.576.367-.774L7.148.984C7.3.87 7.44.78 7.57.711a.9.9 0 01.422-.102zm0 14.85a.901.901 0 01-.422-.1 2.288 2.288 0 01-.422-.274l-5.265-4.25a.962.962 0 01-.367-.774 1.055 1.055 0 01.531-.914 1.01 1.01 0 01.906-.062c.125.052.253.128.383.226l4.656 3.743 4.664-3.742a1.6 1.6 0 01.375-.227c.13-.052.263-.078.399-.078a.97.97 0 01.508.14 1.036 1.036 0 01.539.915c0 .312-.123.57-.368.773l-5.265 4.258a2.512 2.512 0 01-.422.265.917.917 0 01-.43.102z"})})},216851:(e,s,i)=>{i.d(s,{M:()=>n});i(667294);var t=i(785893);const n=(0,i(827282).IU)("peopleFillCheckmark",{viewBox:"0 0 20 20",svg:(0,t.jsx)("path",{d:"M14.5391 10.3174C14.4115 10.3174 14.2975 10.29 14.1973 10.2354C14.097 10.1807 13.999 10.0964 13.9033 9.98242L12.29 8.01367C12.1715 7.86328 12.1123 7.70833 12.1123 7.54883C12.1123 7.38021 12.1693 7.23665 12.2832 7.11816C12.4017 6.99967 12.5452 6.94043 12.7139 6.94043C12.8141 6.94043 12.9053 6.96322 12.9873 7.00879C13.0739 7.0498 13.1582 7.12272 13.2402 7.22754L14.5117 8.84082L17.2188 4.51367C17.3555 4.28581 17.5309 4.17188 17.7451 4.17188C17.9046 4.17188 18.0482 4.22428 18.1758 4.3291C18.3034 4.42936 18.3672 4.56608 18.3672 4.73926C18.3672 4.81673 18.349 4.89648 18.3125 4.97852C18.2806 5.05599 18.2419 5.12891 18.1963 5.19727L15.1406 9.97559C14.9948 10.2035 14.7943 10.3174 14.5391 10.3174ZM2.85645 16.2441C2.47363 16.2441 2.17285 16.1576 1.9541 15.9844C1.73535 15.8112 1.62598 15.5742 1.62598 15.2734C1.62598 14.8314 1.75814 14.3688 2.02246 13.8857C2.29134 13.4027 2.67643 12.9492 3.17773 12.5254C3.68359 12.1016 4.29199 11.7575 5.00293 11.4932C5.71387 11.2288 6.51139 11.0967 7.39551 11.0967C8.28418 11.0967 9.08398 11.2288 9.79492 11.4932C10.5059 11.7575 11.112 12.1016 11.6133 12.5254C12.1191 12.9492 12.5065 13.4027 12.7754 13.8857C13.0443 14.3688 13.1787 14.8314 13.1787 15.2734C13.1787 15.5742 13.0693 15.8112 12.8506 15.9844C12.6318 16.1576 12.3311 16.2441 11.9482 16.2441H2.85645ZM7.40234 9.87988C6.9056 9.87988 6.44759 9.74544 6.02832 9.47656C5.61361 9.20768 5.27865 8.84538 5.02344 8.38965C4.77279 7.93392 4.64746 7.4235 4.64746 6.8584C4.64746 6.30241 4.77279 5.80111 5.02344 5.35449C5.27865 4.90332 5.61589 4.54557 6.03516 4.28125C6.45443 4.01693 6.91016 3.88477 7.40234 3.88477C7.89909 3.88477 8.3571 4.01465 8.77637 4.27441C9.19564 4.53418 9.5306 4.88965 9.78125 5.34082C10.0365 5.78743 10.1641 6.28874 10.1641 6.84473C10.1641 7.41439 10.0365 7.92936 9.78125 8.38965C9.5306 8.84538 9.19564 9.20768 8.77637 9.47656C8.3571 9.74544 7.89909 9.87988 7.40234 9.87988Z"})})},439378:(e,s,i)=>{i.d(s,{S:()=>n});i(667294);var t=i(785893);const n=(0,i(827282).IU)("personBadgeQuestionMark",{viewBox:"0 0 15 14",svg:(0,t.jsx)("path",{d:"M12.4551 5.41699C12.8037 5.41699 13.0088 5.19824 13.0088 4.93164V4.84961C13.0088 4.45996 13.2344 4.2207 13.7061 3.90625C14.3691 3.46875 14.8408 3.07227 14.8408 2.25195C14.8408 1.11719 13.8291 0.501953 12.667 0.501953C11.498 0.501953 10.7256 1.0625 10.5342 1.69141C10.5 1.80078 10.4795 1.91016 10.4795 2.02637C10.4795 2.33398 10.7188 2.49805 10.9443 2.49805C11.1836 2.49805 11.3271 2.38867 11.4502 2.22461L11.5732 2.06055C11.8125 1.66406 12.1748 1.43164 12.626 1.43164C13.248 1.43164 13.6514 1.78711 13.6514 2.30664C13.6514 2.77148 13.3643 2.99707 12.7695 3.41406C12.2773 3.75586 11.915 4.11816 11.915 4.78809V4.87695C11.915 5.23242 12.1064 5.41699 12.4551 5.41699ZM5.79004 6.99609C7.25293 6.99609 8.52441 5.68359 8.52441 3.97461C8.52441 2.28613 7.25293 1.03516 5.79004 1.03516C4.32715 1.03516 3.05566 2.31348 3.05566 3.98828C3.05566 5.68359 4.32031 6.99609 5.79004 6.99609ZM12.4414 7.4541C12.8379 7.4541 13.1797 7.13965 13.1797 6.74316C13.1797 6.34668 12.8447 6.03223 12.4414 6.03223C12.0381 6.03223 11.7031 6.35352 11.7031 6.74316C11.7031 7.13281 12.0449 7.4541 12.4414 7.4541ZM1.20312 13.3262H10.3701C11.1016 13.3262 11.5391 12.9844 11.5391 12.417C11.5391 10.6533 9.33105 8.21973 5.7832 8.21973C2.24219 8.21973 0.0341797 10.6533 0.0341797 12.417C0.0341797 12.9844 0.47168 13.3262 1.20312 13.3262Z"})})},852146:(e,s,i)=>{i.d(s,{u:()=>n});i(667294);var t=i(785893);const n=(0,i(827282).IU)("showDeletedPages",{viewBox:"0 0 16 16",svg:(0,t.jsx)("path",{d:"M1.89551 8.5498C1.89551 11.9404 4.61621 14.668 8 14.668C11.3838 14.668 14.1045 11.9404 14.1045 8.5498C14.1045 5.16602 11.4043 2.45898 8.02051 2.45898C7.66504 2.45898 7.31641 2.49316 7.01562 2.55469L8.66992 0.920898C8.78613 0.797852 8.85449 0.640625 8.85449 0.462891C8.85449 0.09375 8.56738 -0.207031 8.20508 -0.207031C8.01367 -0.207031 7.84961 -0.138672 7.7334 -0.00878906L4.93066 2.8418C4.79395 2.97852 4.71875 3.15625 4.71875 3.33398C4.71875 3.51855 4.78711 3.68262 4.93066 3.82617L7.7334 6.65625C7.84961 6.7793 8.00684 6.84082 8.20508 6.84082C8.56738 6.84082 8.85449 6.55371 8.85449 6.17773C8.85449 6 8.78613 5.85645 8.66309 5.72656L6.80371 3.88086C7.15234 3.80566 7.56934 3.77148 8.02051 3.77148C10.666 3.77148 12.7646 5.88379 12.7646 8.5498C12.7646 11.2021 10.6455 13.3281 8 13.3281C5.35449 13.3281 3.23535 11.2021 3.23535 8.5498C3.23535 8.14648 2.97559 7.85938 2.5791 7.85938C2.17578 7.85938 1.89551 8.14648 1.89551 8.5498Z"})})},662406:(e,s,i)=>{i.d(s,{m:()=>n});i(667294);var t=i(785893);const n=(0,i(827282).IU)("sliders",{viewBox:"0 0 16 13",svg:(0,t.jsx)("g",{children:(0,t.jsx)("path",{d:"M10.536 12.066c-.323 0-.62-.08-.889-.239a1.826 1.826 0 01-.635-.642 1.674 1.674 0 01-.24-.882c0-.32.08-.61.24-.875.16-.27.371-.483.635-.643.27-.16.566-.24.89-.24.318 0 .61.08.874.24.269.16.483.374.643.643.16.264.239.556.239.875 0 .323-.08.617-.24.882a1.803 1.803 0 01-.642.642 1.66 1.66 0 01-.875.24zm0-.922a.8.8 0 00.588-.24.818.818 0 00.246-.601.796.796 0 00-.246-.595.799.799 0 00-.588-.24.83.83 0 00-.601.24.807.807 0 00-.24.595c0 .237.08.437.24.601a.83.83 0 00.601.24zm-1.169-1.49v1.298h-7.78a.625.625 0 01-.457-.191.637.637 0 01-.185-.458c0-.178.062-.33.185-.458a.625.625 0 01.458-.192h7.78zm5.059 0c.168 0 .314.063.437.19a.64.64 0 01.185.459.64.64 0 01-.185.458.588.588 0 01-.437.191h-2.653V9.653h2.653zM5.539 7.807c-.324 0-.62-.08-.889-.24a1.846 1.846 0 01-.635-.635 1.697 1.697 0 01-.24-.882c0-.324.08-.618.24-.882.16-.269.371-.483.635-.643.27-.16.565-.239.89-.239.318 0 .61.08.874.24.269.159.483.373.643.642.16.264.239.558.239.882 0 .319-.08.613-.24.882a1.817 1.817 0 01-.642.635c-.264.16-.556.24-.875.24zm0-.923a.822.822 0 00.834-.834.816.816 0 00-.834-.841.816.816 0 00-.84.84c0 .233.079.431.239.596a.83.83 0 00.601.239zm-3.978-1.49h2.761v1.298H1.561a.59.59 0 01-.431-.184.637.637 0 01-.185-.458c0-.183.062-.337.185-.465a.58.58 0 01.43-.191zm12.837 0a.61.61 0 01.458.19.633.633 0 01.192.466c0 .178-.064.33-.192.458a.622.622 0 01-.458.184h-7.71V5.395h7.71zm-3.862-1.846c-.323 0-.62-.08-.889-.24a1.845 1.845 0 01-.635-.635 1.697 1.697 0 01-.24-.882c0-.324.08-.618.24-.882.16-.269.371-.483.635-.642.27-.16.566-.24.89-.24.318 0 .61.08.874.24.269.16.483.373.643.642.16.264.239.558.239.882 0 .319-.08.613-.24.882a1.828 1.828 0 01-.642.636c-.264.16-.556.239-.875.239zm0-.923a.788.788 0 00.588-.246.81.81 0 00.246-.595.796.796 0 00-.246-.595.788.788 0 00-.588-.246.818.818 0 00-.601.246.807.807 0 00-.24.595c0 .233.08.43.24.595a.818.818 0 00.601.246zM9.401 1.143V2.44H1.588a.625.625 0 01-.458-.191.637.637 0 01-.185-.458c0-.178.062-.33.185-.458a.625.625 0 01.458-.191H9.4zm5.025 0c.168 0 .314.063.437.191s.185.28.185.458-.062.33-.185.458a.588.588 0 01-.437.191H11.69V1.143h2.735z"})})})},379830:(e,s,i)=>{i.d(s,{w:()=>p});i(667294);var t=()=>i(788860),n=()=>i(707513),o=()=>i(308186),r=()=>i(784234),a=()=>i(269299),l=()=>i(525496),m=()=>i(67961),d=()=>i(877807),c=i(785893);const u=(0,i(827282).IU)("arrowsConverging",{viewBox:"0 0 16 16",svg:(0,c.jsx)("path",{d:"M4.47949 13.2667C4.27441 13.2667 4.11263 13.2006 3.99414 13.0684C3.88021 12.9408 3.82324 12.7881 3.82324 12.6104C3.82324 12.3552 3.9349 12.1569 4.1582 12.0157L4.70508 11.667C4.94206 11.5075 5.20866 11.2956 5.50488 11.0313C5.80566 10.7624 6.09277 10.4594 6.36621 10.1221C6.64421 9.78488 6.87207 9.42485 7.0498 9.04204C7.22754 8.65923 7.31641 8.27414 7.31641 7.88677V4.46196H8.67676V7.88677C8.67676 8.27414 8.76562 8.65923 8.94336 9.04204C9.12109 9.42485 9.34668 9.78716 9.62012 10.129C9.89355 10.4662 10.1807 10.767 10.4814 11.0313C10.7822 11.2956 11.0511 11.5075 11.2881 11.667L11.835 12.0157C12.0583 12.1569 12.1699 12.3552 12.1699 12.6104C12.1699 12.7972 12.1107 12.9522 11.9922 13.0752C11.8737 13.2028 11.7119 13.2667 11.5068 13.2667C11.3109 13.2667 11.1195 13.2051 10.9326 13.0821L10.5771 12.8428C10.3447 12.6879 10.0941 12.4942 9.8252 12.2618C9.56087 12.0248 9.30339 11.7741 9.05273 11.5098C8.80208 11.2455 8.58333 10.9903 8.39648 10.7442C8.20964 10.4981 8.07975 10.2839 8.00684 10.1016H7.98633C7.91341 10.2839 7.78125 10.5004 7.58984 10.751C7.40299 10.9971 7.18424 11.2523 6.93359 11.5167C6.68294 11.7764 6.42318 12.0248 6.1543 12.2618C5.88997 12.4942 5.64388 12.6879 5.41602 12.8428L5.06055 13.0821C4.8737 13.2051 4.68001 13.2667 4.47949 13.2667ZM6.29102 5.36431C6.02669 5.36431 5.86263 5.28228 5.79883 5.11821C5.73503 4.95415 5.77832 4.76502 5.92871 4.55083L7.5625 2.26079C7.68555 2.08306 7.83138 1.99647 8 2.00103C8.16862 2.00103 8.31445 2.08761 8.4375 2.26079L10.0576 4.55767C10.2126 4.7673 10.2559 4.95415 10.1875 5.11821C10.1237 5.28228 9.96191 5.36431 9.70215 5.36431H6.29102Z"})});async function p(e){const{environment:s,useSudoMode:i,store:p,permissionChanges:g,from:h,shareMenuSessionId:b,isRedesignEnabled:f,parentStore:v}=e,x={type:"restore",permissionChanges:g},y=x.permissionChanges.length>0;(f?!y||(await o().gt({message:(0,d().mX)(x,f),description:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(m().Z,{isSmall:!0,isMultiline:!0,children:(0,c.jsx)(t()._H,{id:"restrictedPermissionConfirmationModal.relink.caption",defaultMessage:"The following settings will be restored to match {parentName}",values:{parentName:(0,c.jsx)(l().Z,{store:v,style:{fontWeight:n().Ue.regular},useInvertedColors:!1})}})}),(0,c.jsx)(d().mo,{openState:x})]}),acceptColor:"blue",acceptLabel:(0,d().nH)(x,f),icon:u({height:24,width:24})})).accept:(await o().gt({message:(0,d().mX)(x),acceptLabel:(0,d().nH)(x),cancelLabel:(0,c.jsx)(t()._H,{id:"restrictedPermissionConfirmationModal.actionButton.close",defaultMessage:"Close"}),description:(0,c.jsx)(d().mo,{openState:x})})).accept)&&(p.getPermissionItemsStore().canAdmin()?a().createAndCommit({userAction:"PermissionsRestoreBanner.restoreRestrictedPermissions",environment:s,canUndo:!0,useSudoMode:i,perform:e=>{r().MX({environment:s,store:p,transaction:e,from:h,shareMenuSessionId:b})}}):r().hs({environment:s,store:p,from:h,shareMenuSessionId:b}))}},569849:(e,s,i)=>{i.d(s,{K:()=>m});i(667294);var t=()=>i(788860),n=()=>i(308186),o=()=>i(784234),r=()=>i(269299),a=()=>i(877807),l=i(785893);async function m(e){const{environment:s,useSudoMode:i,store:m}=e,d={type:"restoreTeamPermissions",permissionChanges:[]},{accept:c}=await n().gt({message:(0,a().mX)(d),acceptLabel:(0,a().nH)(d),cancelLabel:(0,l.jsx)(t()._H,{id:"restrictedPermissionConfirmationModal.actionButton.close",defaultMessage:"Close"})});c&&r().createAndCommit({userAction:"PermissionsRestoreBanner.restoreTeamPermissions",environment:s,canUndo:!0,useSudoMode:i,perform:e=>{o().Kh({environment:s,store:m,transaction:e})}})}},343308:(e,s,i)=>{i.d(s,{CC:()=>l,oh:()=>g});i(267602),i(653476),i(241792);var t=()=>i(696459),n=()=>i(930085),o=()=>i(594546),r=()=>i(572623),a=()=>i(807463);function l(e){const{environment:s,internalDomains:i,inviteResults:o,destination:l,metadata:g}=e;0!==o.length&&(function(e){var s;const{addedPermissions:i,environment:t,internalDomains:o,metadata:a,destination:l}=e;if(0===i.length)return;const m=i.map((e=>e.invite.inviteTarget)),d=i.map((e=>e.blockPermissionItem)),u=i.filter(c).filter((e=>void 0!==e.invite.internalDomain)).map((e=>e.inviteeUserId));n().jB(t,{domainType:(0,r().JF)(),internal_domains:o??[],invite_flow_id:a.inviteFlowId,invite_message_length:(null===(s=a.inviteMessage)||void 0===s?void 0:s.length)??0,invite_origin:a.inviteOrigin,invite_targets:m,invitee_ids_with_internal_domain:u,invitee_ids_with_internal_domain_enforced:[],is_onboarding:!1,is_space:!1,permission_items:d,role:l.blockRole,share_menu_session_id:a.shareMenuSessionId})}({addedPermissions:o.filter(u),environment:s,internalDomains:i,destination:l,metadata:g}),function(e){var s;const{createdMembers:i,environment:t,internalDomains:o,metadata:a,destination:l}=e;if(0===i.length)return;const m=i.map((e=>e.invite.inviteTarget)),d=i.map((e=>e.spacePermissionItem)),c=i.filter((e=>void 0!==e.invite.internalDomain)).map((e=>e.inviteeUserId)),u=i.filter((e=>e.wasInternalDomainEnforced)).map((e=>e.inviteeUserId));if(n().jB(t,{domainType:(0,r().JF)(),internal_domains:o??[],invite_flow_id:a.inviteFlowId,invite_message_length:(null===(s=a.inviteMessage)||void 0===s?void 0:s.length)??0,invite_origin:a.inviteOrigin,invite_targets:m,invitee_ids_with_internal_domain:c,invitee_ids_with_internal_domain_enforced:u,is_onboarding:!1,is_space:!0,permission_items:d,role:l.spaceRole,share_menu_session_id:a.shareMenuSessionId}),u.length>0){const e=o?o.map((e=>e.url)):[];n().oI(t,{invite_flow_id:a.inviteFlowId,invite_origin:a.inviteOrigin,user_ids:u,internal_domains:e})}}({createdMembers:o.filter(p),environment:s,internalDomains:i,destination:l,metadata:g}),function(e){const{createdGuestRequests:s,environment:i,destination:o,metadata:r}=e;if(0===s.length)return;const a=s.filter((e=>void 0!==e.invite.internalDomain)).map((e=>{var s;return null===(s=e.invite.invitee)||void 0===s?void 0:s.email})).filter(t().$K);n().zx(i,{internal_guest_enforcement:!1,invite_flow_id:r.inviteFlowId,is_bot:!1,is_internal_domain:a.length>0,invitee_emails_with_internal_domain:a,invitee_emails_with_internal_domain_enforced:[],role:o.blockRole,space_role:o.spaceRole,user_count:s.length})}({createdGuestRequests:o.filter(m),environment:s,destination:l,metadata:g}),function(e){const{createdMemberRequests:s,environment:i,destination:o,metadata:r}=e;if(0===s.length)return;const l=s.filter((e=>void 0!==e.invite.internalDomain)).map((e=>{var s;return null===(s=e.invite.invitee)||void 0===s?void 0:s.email})).filter(t().$K),m=s.filter((e=>e.wasInternalDomainEnforced)).map((e=>{var s;return null===(s=e.invite.invitee)||void 0===s?void 0:s.email})).filter(t().$K);n().d(i,{from:"share_menu",invite_flow_id:r.inviteFlowId,invite_space_role_selection:a().uq.workspace_member,is_bot:!1,is_internal_domain:l.length>0,internal_guest_enforcement:m.length>0,invitee_emails_with_internal_domain:l,invitee_emails_with_internal_domain_enforced:m,role:o.blockRole,space_role:o.spaceRole,user_count:s.length})}({createdMemberRequests:o.filter(d),environment:s,destination:l,metadata:g}))}function m(e){return"createdGuestRequest"===e.type}function d(e){return"createdMemberRequest"===e.type}function c(e){return"addedUserPermission"===e.type}function u(e){return!(!c(e)&&!function(e){return"addedGroupPermission"===e.type}(e))}function p(e){return"createdMember"===e.type}function g(e){let{environment:s,spaceId:i,pageId:t,pageVisibility:n,hasTrustedDomainPermission:r}=e;(0,o().j)({environment:s,event:{eventName:"general_access_menu_open",eventProperties:{spaceId:i,pageId:t,pageVisibility:n,hasTrustedDomainPermission:r}}})}},788504:(e,s,i)=>{i.d(s,{n:()=>r,o:()=>a});var t=()=>i(295334),n=()=>i(333023);var o=()=>i(314169);async function r(e){let{trustedDomainPermission:s,store:i,environment:t,sudoModeStore:r,location:a}=e;const l=i.isRestricted(),m=(0,n().Xz)({permissionItem:s,store:i})&&!l,d=m&&"none"!==s.permissionItem.role&&!l;return await(0,o().L7)({oldPermissionItem:s.permissionItem,newRole:"none",wasInherited:m,environment:t,store:i,sudoModeStore:r,location:a,restrictingVisibility:d})}async function a(e){let{trustedDomainPermission:s,store:i,environment:n,sudoModeStore:r,location:a,fromPermissionWrapper:l}=e;const m="reader",d=(0,t().E9)({permissionItem:s,store:i}),c=s.permissionItem.role===m?"none":m;return await(0,o().L7)({oldPermissionItem:s.permissionItem,newRole:c,wasInherited:d,environment:n,store:i,sudoModeStore:r,location:a,fromPermissionWrapper:l})}},495712:(e,s,i)=>{i.d(s,{Z:()=>C});i(267602),i(470928),i(241792);var t=i(667294),n=()=>i(219727),o=()=>i(142735),r=()=>i(846550),a=()=>i(714230),l=()=>i(801812),m=()=>i(788860),d=()=>i(707513),c=()=>i(824462),u=()=>i(981583),p=()=>i(743790),g=()=>i(73478),h=()=>i(907099),b=()=>i(876822),f=()=>i(779733),v=()=>i(960516),x=()=>i(724902),y=i(785893);function P(e){const{group:s,store:i,groupPermission:t}=e,a=(0,n().O7)(),m=(0,o().VK)((()=>b().default.state.currentSpaceStore),[]),[{value:d}]=(0,l().r5)((async()=>{const e=await c().callApi({eventName:"getSpacePermissionGroupMembers",environment:a,data:{groupIds:[s.group_id],spaceId:s.space_id}});if("success"===e.type){var i;const t=null===(i=e.data.groupUsersMap[s.group_id])||void 0===i?void 0:i.userIds,{limitedUserStores:n}=(0,h().rm)({userIds:t,limit:void 0,spaceStore:m});return n}}),[m,a,s.group_id,s.space_id]),u=(0,r().yK)((e=>({container:{paddingLeft:16}})),[]);return(0,y.jsx)("div",{style:u.container,children:null==d?void 0:d.map((e=>(0,y.jsx)("div",{children:(0,y.jsx)(I,{userStore:e,blockStore:i,groupPermission:t})},e.id)))})}function I(e){const{userStore:s,blockStore:i,groupPermission:t}=e,r=(0,n().O7)(),{isMobile:a}=r.device,l=(0,m().YB)(),d=(0,o().VK)((()=>(0,f().wZ)()),[]),c=(0,o().VK)((()=>s.getDisplayName(l)),[l,s]),p=(0,o().VK)((()=>s.getEmail()),[s]);return(0,y.jsx)(v().ZP,{currentBlockStore:i,permissionItem:{type:"display_only_group_member_permission"},from:t.from,icon:(0,y.jsx)(u().Z,{userStore:s,avatarShouldShowShadow:!1,size:a&&d?v().xF:v().ZG,hasTooltip:!1}),title:c||p,subtitle:p,upgradeButtonName:"permission_groups"})}function S(e){const{group:s}=e,i=(0,m().YB)(),t=(0,h().kF)({intl:i,groupName:s.name});return(0,y.jsx)(m()._H,{defaultMessage:"People in {groupName} have access to the page",values:{groupName:t},id:"blockPermissionsSettings.groupPermission.tooltipV2"})}function j(e){const{group:s}=e,i=(0,m().YB)(),t=(0,h().kF)({intl:i,groupName:s.name});return(0,y.jsx)(p().Y,{group:s,limit:15,noMembersMessage:(0,y.jsx)(g().Z,{imageURL:a().Z.images.tooltips.share.sharedPng,imageWidth:240,imageHeight:120,caption:(0,y.jsx)(m()._H,{defaultMessage:"For all members of the {groupName} group, this page will show up in the <boldtext>Shared</boldtext> section in their sidebar.",values:{boldtext:e=>(0,y.jsx)("span",{style:{fontWeight:d().Ue.bold},children:e}),groupName:t},id:"blockPermissionsSettings.groupPermission.tooltip"})})})}const C=function(e){const{store:s,groupPermission:a,spaceId:l,fromPermissionWrapper:d,disableExpansion:c}=e,{isMobile:u}=(0,n().Fy)(),p=(0,m().YB)(),[g,I]=(0,t.useState)(!1),[C,_]=(0,t.useState)(!1),M=(0,o().VK)((()=>(0,f().wZ)()),[]),{group:w,memberCount:k}=(0,o().VK)((()=>{const{currentSpaceStore:e}=b().default.state;if(!e)return{};return{...i(467806).Z.state.permissionGroupsAndMemberCounts.find((e=>e.group.group_id===a.permissionItem.group_id))}}),[a.permissionItem.group_id]),T=(0,o().VK)((()=>!c&&(!(!w||!k||0===k)&&M)),[c,w,M,k]),R=(0,t.useCallback)((()=>I(!0)),[]),Z=(0,t.useCallback)((()=>I(!1)),[]),N=(0,t.useCallback)((()=>{T&&_(!C)}),[C,T]),V=(0,r().yK)((e=>({mobileChevronIcon:{marginLeft:4,fill:e.icon.secondary,transform:`rotate(${C?90:0}deg)`,transition:"transform 150ms ease"},mobileTitleContainer:{display:"flex",alignItems:"center"}})),[C]);if(!w)return null;const H=(0,h().kF)({intl:p,groupName:w.name}),K=w.icon&&!M&&(0,y.jsx)(i(943620).Z,{disabled:!0,title:H,icon:w.icon?{pointer:{table:"space",id:l},icon:w.icon}:void 0,isEmptyPage:!1,size:18}),B=T?(0,y.jsx)(i(277939).Z,{expanded:C,hovered:g,onClick:N,children:(0,y.jsx)(x().Z,{groupIcon:w.icon,isRedesignEnabled:M,spaceId:l})}):(0,y.jsx)(x().Z,{groupIcon:w.icon,isRedesignEnabled:M,spaceId:l});return(0,y.jsxs)("div",{style:{fontWeight:400},className:i(247724).gGc,children:[(0,y.jsx)(v().ZP,{onMouseEnter:R,onMouseLeave:Z,onClick:T?N:void 0,isCollapsible:T,currentBlockStore:s,permissionItem:a.permissionItem,from:a.from,icon:B,title:(0,y.jsxs)("div",{style:V.mobileTitleContainer,children:[H,T&&u&&(0,y.jsx)("div",{style:V.mobileChevronIcon,children:(0,i(696347).o)({height:12,width:12})})]}),tag:K,ignoreLocalHoverState:e.ignoreLocalHoverState,showInherited:e.showInherited,nonInheritedTooltip:e.tooltip?e.tooltip:M?(0,y.jsx)(S,{group:w}):(0,y.jsx)(j,{group:w}),subtitle:M&&u?(0,y.jsxs)("div",{children:[(0,y.jsx)(m()._H,{defaultMessage:"{numberOfGroupMembers, plural, one {{numberOfGroupMembers} person} other {{numberOfGroupMembers} people}}",id:"blockPermissionsSettings.groupPermission.none",values:{numberOfGroupMembers:k}})," · ",(0,y.jsx)(m()._H,{...(0,i(777814).M)({type:"group_permission",role:a.permissionItem.role,table:"block",isRemovable:!1,isCurrentUser:!1,isRedesignEnabled:M}).label})]}):(0,y.jsxs)("div",{children:[(0,y.jsx)(m()._H,{defaultMessage:"Group",id:"blockPermissionsSettings.groupPermission.label"})," · ",(0,y.jsx)(m()._H,{defaultMessage:"{numberOfGroupMembers, plural, one {{numberOfGroupMembers} person} other {{numberOfGroupMembers} people}}",id:"blockPermissionsSettings.groupPermission.none",values:{numberOfGroupMembers:k}})]}),upgradeButtonName:"group_permission_item",isRemovableOverride:e.isRemovableOverride,fromPermissionWrapper:d,roleItemOverrides:e.roleItemOverrides,menuListItemProps:e.menuListItemProps,...e.permissionItemArgs}),C&&(0,y.jsx)(P,{group:w,store:s,groupPermission:a})]},w.id)}},65404:(e,s,i)=>{i.d(s,{Z:()=>M});i(667294);var t=()=>i(219727),n=()=>i(142735),o=()=>i(846550),r=()=>i(530980),a=()=>i(989478),l=()=>i(499110),m=()=>i(788860),d=()=>i(568017),c=()=>i(909439),u=()=>i(18748),p=()=>i(67961),g=()=>i(981583),h=()=>i(777814),b=()=>i(876822),f=()=>i(779733),v=()=>i(960516),x=()=>i(182494),y=i(785893);function P(e){const{userValue:s,guestLabel:i,isRedesignEnabled:t}=e;return(0,y.jsx)(u().ZP,{title:(0,y.jsx)(S,{userValue:s,guestLabel:i}),caption:(0,y.jsx)(j,{userValue:s,isRedesignEnabled:t}),icon:(0,y.jsx)(I,{userValue:s}),desktopIconStyle:{marginLeft:16}})}function I(e){const{userValue:s}=e,i=(0,t().Fy)().isMobile,r=(0,n().VK)((()=>(0,f().wZ)()),[]),a=(0,o().yK)((()=>({iconPlaceholder:{height:i&&r?v().xF:v().ZG,width:i&&r?v().xF:v().ZG,borderRadius:20}})),[i,r]);return s?(0,y.jsx)(g().Z,{userValue:s,size:i&&r?v().xF:v().ZG}):(0,y.jsx)(C,{style:a.iconPlaceholder})}function S(e){const{userValue:s,guestLabel:i}=e,t=(0,m().YB)(),r=(0,n().VK)((()=>(0,f().wZ)()),[]),a=(0,n().VK)((()=>{const{currentUserStore:e}=b().default.state;return!!e&&(!!s&&e.id===s.id)}),[s]),u=(0,o().yK)((e=>({titlePlaceholder:{height:8,width:81,borderRadius:4},pendingInvitation:{color:d().ZP.PendingInvitationTextColor},titleYouIndicator:{color:r?"dark"===e.mode?e.text.secondary:e.text.tertiary:e.mediumTextColor}})),[r]);if(!s)return(0,y.jsx)(C,{style:u.titlePlaceholder});const g=(0,l().Nz)(t,s);return(0,y.jsx)(y.Fragment,{children:g?(0,y.jsxs)("div",{style:{display:"flex",gap:4},children:[(0,y.jsx)(p().Z,{className:"notranslate",children:a?(0,y.jsx)(m()._H,{id:"cellMemberAvatar.displayName.title",defaultMessage:"{userFullDisplayName} <youIndicatorText>(You)</youIndicatorText>",values:{userFullDisplayName:g,youIndicatorText:e=>(0,y.jsx)("span",{style:u.titleYouIndicator,children:e})}}):g}),i&&(0,y.jsx)(c().b,{labelType:i,shouldUseTabStyle:r})]}):(0,y.jsx)(m()._H,{defaultMessage:"Invitation sent",id:"blockPermissionsSettings.sentInvitation.message"})})}function j(e){const{userValue:s,isRedesignEnabled:i,permissionRole:n}=e,{isMobile:r}=(0,t().Fy)(),a=(0,o().yK)((()=>({subtitlePlaceholder:{height:8,width:139,borderRadius:4,marginTop:10}})),[]);if(i&&r&&n){const e=(0,h().M)({type:"user_permission",role:n,table:"block",isRemovable:!1,isCurrentUser:!1,isRedesignEnabled:i}).label;return(0,y.jsx)(p().Z,{isSmall:!0,children:(0,y.jsx)(m()._H,{...e})})}return null!=s&&s.email?(0,y.jsx)(p().Z,{isSmall:!0,children:s.email}):(0,y.jsx)(C,{style:a.subtitlePlaceholder})}function C(e){const s=(0,o().yK)((s=>({placeholder:{...e.style,background:s.lightDividerColor}})),[e.style]);return(0,y.jsx)("div",{style:s.placeholder})}function _(e){const{userValue:s,permissionItem:i,blockStore:t}=e,n=(0,m().YB)(),o=r().kk5.fromValue(a().KJ,s),l=null==o?void 0:o.getDisplayName(n),d=(0,x().N)({permissionItem:i,targetType:"user",targetName:l,store:t});return d||null}const M=function(e){const{store:s,userPermission:o,spaceVisibleUserMap:r,fromPermissionWrapper:l}=e,m=(0,t().O7)().device.isMobile,d=(0,n().VK)((()=>(0,f().wZ)()),[]),c=(0,n().VK)((()=>i(826955).U6.createChildStore(s,{table:a().KJ,id:o.permissionItem.user_id}).getValue()),[s,o.permissionItem.user_id]),u=(0,n().VK)((()=>{if(null!=c&&c.id)return(0,i(98148).B)({spaceVisibleUserMap:r,userId:c.id,blockStore:s})}),[s,r,c]);return(0,y.jsx)("div",{children:(0,y.jsx)(v().ZP,{currentBlockStore:s,permissionItem:o.permissionItem,from:o.from,ignoreLocalHoverState:e.ignoreLocalHoverState,icon:(0,y.jsx)(I,{userValue:c}),title:(0,y.jsx)(S,{userValue:c,guestLabel:u}),subtitle:(0,y.jsx)(j,{userValue:c,isRedesignEnabled:d,permissionRole:o.permissionItem.role}),selectHeader:d&&m?(0,y.jsx)(P,{userValue:c,guestLabel:u,isRedesignEnabled:d}):void 0,selectFooter:e.selectFooter,showInherited:e.showInherited,upgradeButtonName:"user_permission_item",isRemovableOverride:e.isRemovableOverride,fromPermissionWrapper:l,roleItemOverrides:e.roleItemOverrides,nonInheritedTooltip:d&&!e.tooltip?(0,y.jsx)(_,{userValue:c,permissionItem:o.permissionItem,blockStore:s}):e.tooltip,menuListItemProps:e.menuListItemProps,...e.permissionItemArgs})},o.permissionItem.user_id)}},98774:(e,s,i)=>{i.d(s,{Z:()=>g});var t=i(667294),n=()=>i(219727),o=()=>i(142735),r=()=>i(846550),a=()=>i(788860),l=()=>i(154186),m=()=>i(67961),d=()=>i(314379),c=()=>i(779733),u=()=>i(845465),p=i(785893);function g(e){let{permissions:s}=e;const i=(0,n().O7)().device.isMobile,[g,h]=(0,t.useState)(!1),b=(0,o().VK)((()=>(0,c().wZ)()),[]),f=(0,r().yK)((e=>({button:{width:"100%",display:g?"none":"inline-flex",padding:8,...b&&{alignItems:"center",...(0,u().ZY)({isMobile:i}),width:`calc(100% - ${2*u().gf}px)`,height:48}},icon:{width:14,transform:"rotate(90deg)",fill:e.lightIconColor},list:{display:g?"block":"none"},dotsIconContainer:{display:"flex",alignItems:"center",justifyContent:"center",...b?{width:32,marginRight:(0,u().bY)({isMobile:i})}:{width:36+(0,u().bY)({isMobile:i})}}})),[i,b,g]);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(l().Z,{onClick:()=>h(!0),style:f.button,children:[(0,p.jsx)("div",{style:f.dotsIconContainer,children:(0,d().o)(f.icon)}),(0,p.jsx)(m().Z,{isSmall:!b,isSecondaryColor:!0,children:b?(0,p.jsx)(a()._H,{id:"blockPermissionsSettings.permissionsList.expandButtonV2",defaultMessage:"See {count} more",values:{count:s.length}}):(0,p.jsx)(a()._H,{id:"blockPermissionsSettings.permissionsList.expandButton",defaultMessage:"{count} more people",values:{count:s.length}})})]}),(0,p.jsx)("div",{style:f.list,children:s})]})}},363379:(e,s,i)=>{i.d(s,{yo:()=>U,oC:()=>W,ZP:()=>z});i(267602),i(653476),i(470928),i(241792);var t=i(667294),n=()=>i(219727),o=()=>i(142735),r=()=>i(846550),a=()=>i(933868),l=()=>i(396136),m=()=>i(788860),d=()=>i(696459),c=()=>i(707513),u=()=>i(628370),p=()=>i(827973),g=()=>i(448419),h=()=>i(198829),b=()=>i(255577),f=()=>i(92175),v=()=>i(388284),x=()=>i(67961),y=()=>i(352230),P=()=>i(480089),I=()=>i(609836),S=()=>i(615634),j=()=>i(384697),C=i(785893);const _=(0,i(827282).IU)("openPage",{viewBox:"0 0 17 16",svg:(0,C.jsx)("path",{d:"M0.454102 14.1143V2.02832C0.454102 1.26953 0.891602 0.78418 1.58887 0.78418H9.7373C10.4346 0.78418 10.8721 1.26953 10.8721 2.02832V14.1143C10.8721 14.873 10.4346 15.3584 9.7373 15.3584H1.58887C0.891602 15.3584 0.454102 14.873 0.454102 14.1143ZM3.07227 4.45508C3.07227 4.63281 3.18164 4.74902 3.35254 4.74902H4.71973C4.89062 4.74902 5.01367 4.63281 5.01367 4.45508V3.12891C5.01367 2.95801 4.89062 2.83496 4.71973 2.83496H3.35254C3.18164 2.83496 3.07227 2.95801 3.07227 3.12891V4.45508ZM6.37402 4.45508C6.37402 4.63281 6.4834 4.74902 6.66113 4.74902H8.02148C8.19238 4.74902 8.31543 4.63281 8.31543 4.45508V3.12891C8.31543 2.95801 8.19238 2.83496 8.02148 2.83496H6.66113C6.4834 2.83496 6.37402 2.95801 6.37402 3.12891V4.45508ZM11.4736 15.3584C11.6992 14.9893 11.8086 14.5723 11.8086 14.1143V4.14746H15.418C16.1084 4.14746 16.5459 4.63281 16.5459 5.3916V14.1143C16.5459 14.873 16.1084 15.3584 15.418 15.3584H11.4736ZM3.07227 7.24414C3.07227 7.42188 3.18164 7.53809 3.35254 7.53809H4.71973C4.89062 7.53809 5.01367 7.42188 5.01367 7.24414V5.91797C5.01367 5.74707 4.89062 5.62402 4.71973 5.62402H3.35254C3.18164 5.62402 3.07227 5.74707 3.07227 5.91797V7.24414ZM6.37402 7.24414C6.37402 7.42188 6.4834 7.53809 6.66113 7.53809H8.02148C8.19238 7.53809 8.31543 7.42188 8.31543 7.24414V5.91797C8.31543 5.74707 8.19238 5.62402 8.02148 5.62402H6.66113C6.4834 5.62402 6.37402 5.74707 6.37402 5.91797V7.24414ZM13.3604 7.60645C13.3604 7.75 13.4492 7.85254 13.5996 7.85254H14.7344C14.8779 7.85254 14.9736 7.75 14.9736 7.60645V6.5127C14.9736 6.36914 14.8779 6.27344 14.7344 6.27344H13.5996C13.4492 6.27344 13.3604 6.36914 13.3604 6.5127V7.60645ZM3.07227 10.0332C3.07227 10.2041 3.18164 10.3271 3.35254 10.3271H4.71973C4.89062 10.3271 5.01367 10.2041 5.01367 10.0332V8.70703C5.01367 8.5293 4.89062 8.41309 4.71973 8.41309H3.35254C3.18164 8.41309 3.07227 8.5293 3.07227 8.70703V10.0332ZM6.37402 10.0332C6.37402 10.2041 6.4834 10.3271 6.66113 10.3271H8.02148C8.19238 10.3271 8.31543 10.2041 8.31543 10.0332V8.70703C8.31543 8.5293 8.19238 8.41309 8.02148 8.41309H6.66113C6.4834 8.41309 6.37402 8.5293 6.37402 8.70703V10.0332ZM13.3604 10.2998C13.3604 10.4434 13.4492 10.5391 13.5996 10.5391H14.7344C14.8779 10.5391 14.9736 10.4434 14.9736 10.2998V9.20605C14.9736 9.0625 14.8779 8.9668 14.7344 8.9668H13.5996C13.4492 8.9668 13.3604 9.0625 13.3604 9.20605V10.2998ZM3.29785 14.2578H8.08984V12.0361C8.08984 11.7217 7.88477 11.5166 7.57031 11.5166H3.81738C3.50293 11.5166 3.29785 11.7217 3.29785 12.0361V14.2578ZM13.3604 12.9932C13.3604 13.1367 13.4492 13.2324 13.5996 13.2324H14.7344C14.8779 13.2324 14.9736 13.1367 14.9736 12.9932V11.8994C14.9736 11.7559 14.8779 11.6533 14.7344 11.6533H13.5996C13.4492 11.6533 13.3604 11.7559 13.3604 11.8994V12.9932Z"})});var M=()=>i(733641),w=()=>i(998901),k=()=>i(876822),T=()=>i(128119),R=()=>i(469203),Z=()=>i(428241),N=()=>i(314169),V=()=>i(343308),H=()=>i(788504),K=()=>i(779733),B=()=>i(333023),L=()=>i(458809);const D=16,A=[{key:"private",title:e=>{let{isShareMenuRedesignEnabled:s,type:i}=e;return s&&"full"===i?(0,C.jsx)(m()._H,{id:"linkSharingPill.visibilityTitle.inviteOnlyFullLength",defaultMessage:"Only people invited"}):(0,C.jsx)(m()._H,{id:"linkSharingPill.visibilityTitle.inviteOnly",defaultMessage:"Invite only"})},caption:()=>(0,C.jsx)(m()._H,{id:"linkSharingPill.visibilityCaption.inviteOnly",defaultMessage:"Only you and people invited can access"}),icon:e=>{let{style:s,isShareMenuRedesignEnabled:t}=e;return(0,i(168441).Q)(t?{...s,marginTop:1}:s)}},{key:"unlisted",title:e=>{let{spaceName:s,isShareMenuRedesignEnabled:i}=e;return i?(0,C.jsx)(m()._H,{id:"linkSharingPill.visibilityTitle.anyoneWithLinkRedesign",defaultMessage:"Anyone at {spaceName} with the link",values:{spaceName:s}}):(0,C.jsx)(m()._H,{id:"linkSharingPill.visibilityTitle.anyoneWithLink",defaultMessage:"Anyone with link at {spaceName}",values:{spaceName:s}})},caption:e=>{let{isShareMenuRedesignEnabled:s}=e;return s?(0,C.jsx)(m()._H,{id:"linkSharingPill.visibilityCaption.anyoneWithLinkRedesign",defaultMessage:"Workspace members can access with the link"}):(0,C.jsx)(m()._H,{id:"linkSharingPill.visibilityCaption.anyoneWithLink",defaultMessage:"People invited and workspace members with link can access"})},icon:e=>{let{style:s,isShareMenuRedesignEnabled:t}=e;return(0,i(599631).N)(t?{...s,marginTop:1}:s)}},{key:"open",title:e=>{let{spaceName:s}=e;return(0,C.jsx)(m()._H,{id:"linkSharingPill.visibilityTitle.everyoneInWorkspace",defaultMessage:"Everyone at {spaceName}",values:{spaceName:s}})},caption:e=>{let{isShareMenuRedesignEnabled:s}=e;return s?(0,C.jsx)(m()._H,{id:"linkSharingPill.visibilityCaption.everyoneInWorkspaceV2",defaultMessage:"Workspace members can access and discover in search"}):(0,C.jsx)(m()._H,{id:"linkSharingPill.visibilityCaption.everyoneInWorkspace",defaultMessage:"All workspace members can search and access"})},icon:e=>{let{style:s,isShareMenuRedesignEnabled:t,spaceStore:n,teamspaceIconSize:o}=e;return t?(0,C.jsx)(i(383694).p,{disabled:!0,store:n,size:o,style:{marginLeft:(D-o)/2,marginRight:(D-o)/2}}):_(s)}}],O=[{key:"trustedDomain",title:()=>{},caption:()=>{},icon:()=>{}}];function U(e){const{store:s,spacePermission:i}=e,n=(0,o().VK)((()=>(0,K().wZ)()),[]),a=(0,o().VK)((()=>(0,K().LY)()),[]),l=E(i.permissionItem,!a),d=A.filter((e=>{let{key:s}=e;return!a||"unlisted"!==s})),c=(0,o().VK)((()=>s.canAdmin()),[s]),p=(0,P().cR)(s),g=(0,P().xb)(s),h=(0,I().b)(),b=(0,o().VK)((()=>{const e=k().default.state.currentSpaceStore;return null!=e&&e.isDefined()?e:null}),[]),[v,y]=(0,t.useState)(!1),_=(0,r().yK)((s=>({chevron:{width:12,fill:s.mediumIconColor,marginLeft:"auto"},button:{height:42,color:s.mediumTextColor,marginBottom:8,padding:"0 6px",marginLeft:-6,marginRight:-6,width:"100%"},icon:{fill:s.regularIconColor,width:32,height:32,backgroundColor:s.lightDividerColor,padding:6,borderRadius:4,marginRight:12},animation:{maxHeight:e.showTrustedDomainPermission?250:220},enterAnimation:{maxHeight:0},exitAnimation:{maxHeight:0},container:{overflow:"hidden"}})),[e.showTrustedDomainPermission]),M=d.find((e=>e.key===l));return M&&b?(0,C.jsxs)("div",{style:_.container,children:[(0,C.jsxs)(f().Z,{style:_.button,icon:e=>M.icon({style:e,spaceStore:b,isShareMenuRedesignEnabled:n,teamspaceIconSize:32}),iconStyle:_.icon,disabled:!c||p||g,disabledFeedback:!0,onClick:()=>y(!v),children:[(0,C.jsxs)("div",{children:[(0,C.jsx)(x().Z,{isSmall:!0,children:(0,C.jsx)(m()._H,{id:"linkSharingPill.visibilityMobileTitle",defaultMessage:"Page visibility"})}),(0,C.jsx)(x().Z,{children:M.title({type:"shortened",spaceName:h,isShareMenuRedesignEnabled:n})})]}),c&&(v?(0,S().i)(_.chevron):(0,j().R)(_.chevron))]}),(0,C.jsx)(u().Z,{visible:v,animate:_.animation,initial:_.enterAnimation,exit:_.exitAnimation,children:(0,C.jsx)(W,{...e,parentCloseCallback:()=>y(!1)})})]}):null}function W(e){const{store:s,spacePermission:i,sudoModeStore:u,location:g,isRestricted:f,trustedDomainPermission:P,parentCloseCallback:S}=e,j=(0,n().O7)(),{isMobile:_,isTablet:w}=(0,n().Fy)(),T=(0,o().VK)((()=>(0,K().wZ)()),[]),U=(0,o().VK)((()=>(0,K().LY)()),[]),W=(0,o().VK)((()=>k().default.state.currentSpaceStore),[]),z=E(i.permissionItem,!U),G=i.from,q=G.table===l().iU?G.blockId:G.teamId,Y=!(G.table===s.table&&q===s.id),X=(0,o().VK)((()=>{const{currentSpaceStore:e}=k().default.state;return!!e&&s.isTopLevelWorkspacePage(e.id)}),[s]),$=(0,I().b)(),J=(0,o().VK)((()=>{const e=B().bQ({store:s});return e?E(e):"private"}),[s]),Q=(0,a().YX)((null==P?void 0:P.permissionItem.role)??"none"),ee=(0,Z().u)(),se=(0,o().VK)((()=>(0,B().Lc)({trustedDomainsStore:ee})),[ee]),ie=A.filter((e=>{let{key:s}=e;return!U||"unlisted"!==s}));(0,t.useEffect)((()=>{null!=W&&W.id&&V().oh({environment:j,spaceId:W.id,pageId:s.id,pageVisibility:z,hasTrustedDomainPermission:Q})}),[null==W?void 0:W.id,s.id,z,Q,j]);const te=(0,o().VK)((()=>(0,B().RY)()),[]),ne=se&&P&&!Q&&!te?[...ie,...O]:ie,oe=(0,t.useCallback)((async()=>{let e=z;"private"===z&&(e="open");const t=i.permissionItem,n=F(t,z,e);await(0,N().L7)({oldPermissionItem:t,newRole:n,wasInherited:Y,environment:j,store:s,sudoModeStore:u,location:g,restrictingVisibility:!1}),S()}),[j,Y,g,S,z,i.permissionItem,s,u]),re=(0,r().yK)((e=>{const s={width:14,fill:_?e.regularIconColor:T?e.regularTextColor:e.mediumTextColor};return{icon:{fill:_?e.regularIconColor:T?e.regularTextColor:e.mediumTextColor,width:D},iconContainer:{marginLeft:_?13:T?8:9,...T?{marginRight:6}:{alignSelf:"center"},...U?{alignSelf:"center"}:{}},hiddencheckmark:{...s,visibility:"hidden"},selectedCheckmark:{...s,visibility:"visible"},checkmarkContainer:{...T?{marginRight:6,marginLeft:2}:{marginLeft:12}},selectedTitle:T?{}:{fontWeight:c().Ue.semibold},mobileScroller:{...T?{background:e.surface.wash}:{border:`1px solid ${e.regularDividerColor}`,borderRadius:8,marginBottom:24}},mobileButton:{paddingTop:8,paddingBottom:8},mobileButtonDivider:{borderBottom:`1px solid ${e.regularDividerColor}`},caption:{whiteSpace:"normal"},sectionMenuItem:{...T&&!_?{paddingTop:4,paddingBottom:4}:{},...T&&_?{overflow:"hidden",background:e.buttonBackground,borderRadius:12,marginLeft:16,marginRight:16,marginBottom:16,borderWidth:1,borderStyle:"solid",borderColor:e.stroke.secondary,padding:void 0}:{}},menuList:{...T&&_?{width:"100%",margin:"0 auto"}:{}},header:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",background:e.surface.wash,paddingTop:12,paddingBottom:20},headerLabel:{fontSize:16,fontWeight:c().Ue.semibold}}}),[_,T,U]);return W?(0,C.jsx)(h().Z,{menuType:y().o.Popup,disableScroller:!0,scrollerStyle:_?re.mobileScroller:{},height:_&&T?w?"100%":"50vh":void 0,minWidth:_&&T?"100%":void 0,maxWidth:_&&T?"100%":void 0,maxHeight:_&&T?"100%":void 0,header:_&&T?(0,C.jsx)("div",{style:re.header,children:(0,C.jsx)(x().Z,{style:re.headerLabel,children:(0,C.jsx)(m()._H,{defaultMessage:"General access",id:"PermissionRoleSelect.Header.GeneralAccess"})})}):void 0,children:(0,C.jsx)(b().Z,{type:b().i.Vertical,initialFocus:void 0,style:_&&T?re.menuList:void 0,sections:[{key:"visibilityOptions",render:e=>(0,C.jsx)(v().Z,{...e,disableDesktopPadding:_,style:re.sectionMenuItem}),items:ne.map(((t,n)=>{const o=t.key;if("trustedDomain"===o)return P?{key:"trusted_domain_item",action:async()=>{},render:s=>(0,C.jsx)(L().Z,{store:e.store,trustedDomainPermission:P,permissionItemArgs:e.permissionItemArgs,renderStyle:"permissionSelectOption",selectTrustedDomainHandler:oe,menuListItemProps:s})}:void 0;const r=function(e,s){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e===s)return!0;if(i&&("unlisted"===e&&"open"===s||"open"===e&&"unlisted"===s))return!0;return!1}(z,o,U),a=r?re.selectedCheckmark:re.hiddencheckmark,l=n!==A.length-1,m={...T?{minHeight:28}:{},..._?re.mobileButton:{},..._&&l?re.mobileButtonDivider:{},...T&&l&&!_&&{marginBottom:2}},c=t.caption({isShareMenuRedesignEnabled:T});return{key:o,render:e=>(0,C.jsx)(p().Z,{title:T?(0,C.jsx)(x().Z,{isMultiline:!0,children:t.title({spaceName:$,isShareMenuRedesignEnabled:!0,type:"full"})}):(0,C.jsx)(R().s,{tooltipStyle:{maxWidth:200},children:t.title({spaceName:$,isShareMenuRedesignEnabled:!1,type:"full"})}),caption:U?void 0:(0,C.jsx)(x().Z,{isSmall:!0,isMultiline:!0,style:re.caption,children:c}),icon:t.icon({style:re.icon,spaceStore:W,isShareMenuRedesignEnabled:T,teamspaceIconSize:20}),desktopIconStyle:re.iconContainer,titleStyle:r&&!_?re.selectedTitle:void 0,right:(0,M().k)(a),rightStyle:re.checkmarkContainer,buttonStyle:{borderRadius:6},style:m,shouldWrapTitle:T,...e}),action:async()=>{if(r)return;const e=i.permissionItem,t={type:"space_permission",role:F(e,z,o)};"unlisted"===o&&(t.unlisted_timestamp=Date.now());const n=function(e,s){if(e===s)return!1;switch(s){case"open":return!1;case"unlisted":return"open"===e;case"private":return!0;default:(0,d().t1)(s)}}(J,o)&&!f&&!X;await(0,N().iK)({oldPermissionItem:e,newPermissionItem:t,wasInherited:Y,environment:j,store:s,sudoModeStore:u,location:g,restrictingVisibility:n,trustedDomainsLoggingData:{trustedDomainsPointers:null==ee?void 0:ee.state.trustedDomainPointers,hasTrustedDomainPermission:Q,isTrustedDomainItemEnabled:se}})&&P&&("private"===o&&Q&&(0,H().n)({trustedDomainPermission:P,store:s,environment:j,sudoModeStore:u,location:g}),!te||"private"!==z||"open"!==o&&"unlisted"!==o||Q||(0,H().o)({trustedDomainPermission:P,store:s,environment:j,sudoModeStore:u,location:g})),S()}}})).filter(d().$K)}]})}):null}function E(e){let s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return"none"===e.role?"private":e.unlisted_timestamp&&s?"unlisted":"open"}function F(e,s,i){return"private"===i?"none":"private"===s?"editor":e.role}const z=function(e){const{store:s,spacePermission:n}=e,a=(0,o().VK)((()=>s.canAdmin()),[s]),l=(0,P().cR)(s),d=(0,P().xb)(s),u=(0,I().b)(),p=(0,o().VK)((()=>(0,K().wZ)()),[]),h=(0,o().VK)((()=>(0,K().LY)()),[]),b=E(n.permissionItem,!h),f=(0,o().VK)((()=>{const e=k().default.state.currentSpaceStore;return null!=e&&e.isDefined()?e:null}),[]),v=(0,o().qz)(void 0,i(529048).Z),x=(0,t.useRef)(null),y=A.filter((e=>{let{key:s}=e;return!h||"unlisted"!==s})),j=(0,r().yK)((e=>({chevron:{width:12,marginLeft:4,fill:e.mediumIconColor},popup:{overflow:"visible",width:"100%",minWidth:430},button:{justifyContent:"center",borderRadius:32,height:32,color:e.mediumTextColor,paddingLeft:12,maxWidth:380},title:{...c().Yu},icon:{fill:e.mediumTextColor,width:16}})),[]);return f?(0,C.jsx)(g().ZP,{buttonPopupStore:v,popupType:g().Z4.Popup,popupWrapStyle:j.popup,renderOrigin:e=>{const s=y.find((e=>e.key===b));return s?(0,C.jsx)(i(654133).Z,{placement:w().Placement.Bottom,alignment:w().Alignment.Start,disableTooltip:a&&!l&&!d,renderTooltip:()=>a?l?(0,C.jsx)(m()._H,{defaultMessage:"Restore page from trash to change the privacy setting",id:"linkSharingPill.disabledTooltip.message.pageInTrash"}):d?(0,C.jsx)(m()._H,{defaultMessage:"Resolve pending edits to change the privacy setting",id:"linkSharingPill.disabledTooltip.message.hasAIEdits"}):void 0:(0,C.jsx)(m()._H,{defaultMessage:"You must have full access to change the privacy setting",id:"linkSharingPill.disabledTooltip.message"}),render:t=>(0,C.jsxs)(i(661297).Z,{...e,ref:x,style:j.button,icon:e=>s.icon({isShareMenuRedesignEnabled:p,spaceStore:f,style:e,teamspaceIconSize:16}),iconStyle:j.icon,disabled:!a||l||d,disabledFeedback:!0,...t,children:[(0,C.jsx)("div",{style:j.title,children:s.title({type:"shortened",spaceName:u,isShareMenuRedesignEnabled:p})}),a&&(0,S().i)(j.chevron)]})}):null},placementToOrigin:T().Iw.Bottom,alignmentToOrigin:T().lU.Start,sameWidthAsOrigin:!0,render:s=>(0,C.jsx)(W,{...e,parentCloseCallback:()=>s.close(),trustedDomainPermission:e.trustedDomainPermission})}):null}},995114:(e,s,i)=>{i.d(s,{Z:()=>o});i(667294);var t=()=>i(788860),n=i(785893);const o=function(e){const{store:s}=e,o=(0,i(846550).yK)((e=>({icon:{width:17,height:17,fill:e.mediumIconColor},iconContainer:{backgroundColor:e.lightDividerColor,borderRadius:32}})),[]),r={table:i(396136).iU,blockId:s.id};return(0,n.jsx)(i(960516).ZP,{icon:(0,i(439378).S)(o.icon),iconStyle:o.iconContainer,title:(0,n.jsx)(t()._H,{defaultMessage:"More people may have access",id:"blockPermissionsSettings.permissionItem.hiddenAccess"}),nonInheritedTooltip:(0,n.jsx)(t()._H,{defaultMessage:"This page may be shared with additional people through a parent page or teamspace that you don't have access to",id:"blockPermissionsSettings.hiddenAccess.tooltip"}),permissionRoleSelect:(0,n.jsx)(n.Fragment,{}),currentBlockStore:s,permissionItem:{type:"display_only_hidden_permission"},from:r,upgradeButtonName:"team_permission_item"})}},899018:(e,s,i)=>{i.d(s,{GE:()=>u,Qo:()=>g,S0:()=>p,ZP:()=>h});i(667294);var t=()=>i(219727),n=()=>i(142735),o=()=>i(846550),r=()=>i(788860),a=()=>i(707513),l=()=>i(67961),m=()=>i(779733),d=()=>i(845465),c=i(785893);function u(){return(0,c.jsx)(g,{children:(0,c.jsx)(r()._H,{id:"blockPermissionsSettings.permissionsList.moreAttribution",defaultMessage:"More people with access"})})}function p(){return(0,c.jsx)(g,{children:(0,c.jsx)(r()._H,{id:"blockPermissionsSettings.permissionsList.generalAccessAttribution",defaultMessage:"General access"})})}function g(e){const{children:s}=e,{WindowSizeStore:i}=(0,t().O7)(),{isMobile:r}=(0,t().Fy)(),u=(0,n().VK)((()=>(0,m().wZ)()),[]),{paddingLeft:p,paddingRight:g}=(0,n().VK)((()=>{const e=u?r?0:d().J4:14;return{paddingLeft:i.getSafePaddingLeftCSS(e),paddingRight:i.getSafePaddingRightCSS(e)}}),[i,r,u]),h=(0,o().yK)((e=>({label:{color:e.mediumTextColor,fontWeight:a().Ue.medium,paddingLeft:p,paddingRight:g,paddingTop:8,paddingBottom:u?4:6,overflow:"visible",textWrap:"wrap",...u&&r?{fontSize:15,paddingTop:0,color:e.text.secondary}:{}}})),[r,u,p,g]);return(0,c.jsx)(l().Z,{isSmall:!0,style:h.label,children:s})}const h=function(e){const{store:s}=e,{parentStore:t,canAccessParent:o}=(0,n().VK)((()=>(0,i(333023).HB)({store:s})),[s]);return o?(0,c.jsx)(g,{children:(0,c.jsx)(r()._H,{id:"blockPermissionsSettings.permissionsList.attribution",defaultMessage:"From {attribution}",values:{attribution:(0,c.jsx)(i(447475).q,{navigableParentStore:t})}})}):(0,c.jsx)(g,{children:(0,c.jsx)(r()._H,{id:"blockPermissionsSettings.permissionsList.genericHeader",defaultMessage:"People with access"})})}},447475:(e,s,i)=>{i.d(s,{Z:()=>w,q:()=>T});i(667294);var t=()=>i(219727),n=()=>i(142735),o=()=>i(846550),r=()=>i(506347),a=()=>i(528514),l=()=>i(306164),m=()=>i(788860),d=()=>i(696459),c=()=>i(707513),u=()=>i(465755),p=()=>i(729775),g=()=>i(384241),h=()=>i(777346),b=()=>i(654133),f=()=>i(67961),v=()=>i(429725),x=()=>i(239482),y=()=>i(379830),P=()=>i(569849),I=()=>i(270895),S=()=>i(998901),j=()=>i(826955),C=()=>i(555813),_=()=>i(681832),M=i(785893);function w(e){const{showRestoreButton:s,store:i,type:r,sudoModeStore:a}=e,l=(0,t().O7)(),{isMobile:m}=(0,t().Fy)(),d=(0,n().VK)((()=>x().uJ(i)[1]),[i]),u=(0,n().VK)((()=>({paddingLeft:l.WindowSizeStore.getSafePaddingLeftCSS(14),paddingRight:l.WindowSizeStore.getSafePaddingLeftCSS(14)})),[l]),p=(0,o().yK)((e=>({container:{display:"flex",minHeight:20,flexDirection:"row",alignItems:"center",paddingTop:8,paddingBottom:6,paddingLeft:u.paddingLeft,paddingRight:u.paddingRight},banner:{display:"flex",flexDirection:"row",width:"100%",fontSize:12},icon:{width:16,fill:e.mediumIconColor},iconContainer:{width:20,height:20,display:"flex",justifyContent:"center",alignItems:"center",marginRight:5},messageContainer:{display:"flex",flexDirection:"column"},label:{display:"inline",marginLeft:m?14:0,color:m?"#CF8807":e.mediumTextColor,fontWeight:m?c().Ue.regular:c().Ue.medium,marginRight:6,lineHeight:"20px"},buttonContainer:{marginLeft:-5},divider:{opacity:"75%"},mobileContainer:{borderRadius:4,height:34,marginLeft:14,marginRight:14,marginTop:5,marginBottom:5,paddingRight:9,display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"rgba(246, 192, 80, 0.26)"}})),[m,u]);return m?(0,M.jsxs)("div",{style:p.mobileContainer,children:[(0,M.jsx)(f().Z,{isMultiline:!0,isSmall:!0,style:p.label,children:(0,M.jsx)(R,{type:r,navigableParentStore:d,showRestoreButton:s})}),s&&(0,M.jsx)(k,{store:i,type:r})]}):(0,M.jsx)("div",{style:p.container,children:(0,M.jsxs)("div",{style:p.banner,children:[(0,M.jsx)("div",{style:p.iconContainer,children:Z[r](p.icon)}),(0,M.jsxs)("div",{children:[(0,M.jsx)(f().Z,{isMultiline:!0,isSmall:!0,isSecondaryColor:!0,style:p.label,children:(0,M.jsx)(R,{type:r,navigableParentStore:d,showRestoreButton:s})}),s&&(0,M.jsx)("span",{style:p.buttonContainer,children:(0,M.jsx)(k,{store:i,type:r,sudoModeStore:a})})]})]})})}function k(e){const{type:s,store:i,sudoModeStore:r}=e,{isMobile:l}=(0,t().Fy)(),u=(0,n().VK)((()=>!!r&&r.shouldSaveTransactionWithSudoMode(i)),[i,r]),p=(0,o().yK)((e=>({button:{color:l?"#CF8807":e.regularTextColor,fontWeight:c().Ue.medium},tooltip:{width:210,whiteSpace:"initial"}})),[l]),g=(0,t().O7)();if("restore-team"===s){const e=async()=>{await(0,P().K)({environment:g,useSudoMode:u,store:i})};return(0,M.jsx)(b().Z,{style:p.tooltip,placement:S().Placement.Bottom,renderTooltip:()=>(0,M.jsx)(m()._H,{defaultMessage:"Reset page permissions to match default teamspace permissions",id:"permissionsRestoreBanner.tooltip.teamPermissions"}),render:s=>(0,M.jsx)("span",{...s,children:(0,M.jsx)(h().Z,{style:p.button,onClick:e,children:(0,M.jsx)(m()._H,{id:"permissionsRestoreBanner.button.teamPermissions",defaultMessage:"Reset"})})})})}if("unrestrict"===s){const e=async()=>{if(!i.isDefined())return;const e=i.getPermissionItems(),s=x().uJ(i)[1];if(!s)return;const t=(0,a().Wo)(x().fJ(s)),n=(0,a().Xr)(i.getModel(),e,t);await(0,y().w)({environment:g,useSudoMode:u,store:i,permissionChanges:n,from:void 0,shareMenuSessionId:_().default.state.sessionId,isRedesignEnabled:!1,parentStore:s})};return(0,M.jsx)(h().Z,{style:p.button,onClick:e,children:(0,M.jsx)(m()._H,{id:"permissionsRestoreBanner.button.restrictedPermissions",defaultMessage:"Restore"})})}(0,d().t1)(s)}function T(e){const{navigableParentStore:s,maxLength:i,showUnderline:a}=e,{isMobile:m}=(0,t().Fy)(),d=(0,t().O7)(),c=(0,o().yK)((e=>({linkBox:{color:e.mediumTextColor},title:{display:"inline"}})),[]),h=(0,n().VK)((()=>{if(s instanceof j().G)return(0,v().ZP)({store:s,fullyQualified:!1,pageVisitSource:r().tY.ShareMenu})}),[s]);if(!s)return null;const b=m&&s.table===l().e0;return(0,M.jsx)(p().Z,{disabled:b,style:b?void 0:c.linkBox,underline:a&&!b,inline:!0,onClick:s.table===l().e0?()=>{s.table===l().e0&&C().RF({environment:d,teamId:s.id,tab:I().a.Members,from:"permission_item"}),u().z(d,{store:s,option:"view",from:"share_menu"})}:void 0,href:h,children:(0,M.jsx)(g().Z,{shouldWrap:!0,maxLength:i,store:s,style:c.title})})}function R(e){const{type:s,navigableParentStore:i,showRestoreButton:n}=e,{isMobile:o}=(0,t().Fy)(),r=(0,M.jsx)(T,{navigableParentStore:i,maxLength:o||!n?void 0:30,showUnderline:!0});switch(s){case"restore-team":return(0,M.jsx)(m()._H,{id:"pageShareMenu.restoreTeamPermissionsBanner.label",defaultMessage:"Page access is different from {linkBoxWithPageTitle}.",values:{linkBoxWithPageTitle:r}});case"unrestrict":return o?(0,M.jsx)(m()._H,{id:"pageShareMenu.restrictedAccessBanner.mobileLabel",defaultMessage:"Page access is restricted to people below.",values:{linkBoxWithPageTitle:r}}):(0,M.jsx)(m()._H,{id:"pageShareMenu.restrictedAccessBanner.label",defaultMessage:"Access restricted. May not be shared with everyone from {linkBoxWithPageTitle}.",values:{linkBoxWithPageTitle:r}});default:(0,d().t1)(s)}}const Z={unrestrict:i(607031).B,"restore-team":i(858856).D}},417235:(e,s,i)=>{i.d(s,{Z:()=>ie});var t=i(667294),n=()=>i(219727),o=()=>i(142735),r=()=>i(421797),a=()=>i(779733),l=()=>i(333023),m=()=>i(846550),d=()=>i(506347),c=()=>i(528514),u=()=>i(788860),p=()=>i(465755),g=()=>i(729775),h=()=>i(943620),b=()=>i(384241),f=()=>i(471645),v=()=>i(67961),x=()=>i(429725),y=()=>i(239482),P=()=>i(270895),I=()=>i(826955),S=()=>i(555813),j=()=>i(314169),C=()=>i(379830),_=()=>i(845465),M=()=>i(681832),w=i(785893);function k(e){const{store:s,sudoModeStore:i}=e,a=(0,n().O7)(),{isMobile:l}=(0,n().Fy)(),d=(0,o().VK)((()=>function(e){const{store:s,environment:i}=e;return r().xDy([r().zzA,r().ffD(r().uY7)])({environment:i,blocks:[s],publicEditMode:void 0})}({store:s,environment:a})),[s,a]),u=(0,o().VK)((()=>s.isRestricted()),[s]),p=(0,o().VK)((()=>y().uJ(s)[1]),[s]),g=(0,o().VK)((()=>(0,c().Wo)(y().fJ(p))),[p]),h=(0,t.useCallback)((async()=>{const e=!!i&&i.shouldSaveTransactionWithSudoMode(s);if(s.isDefined()&&p)if(u){const i=s.getPermissionItems(),t=(0,c().Xr)(s.getModel(),i,g);await(0,C().w)({environment:a,useSudoMode:e,store:s,permissionChanges:t,from:"inheritance_banner",shareMenuSessionId:M().default.state.sessionId,isRedesignEnabled:!0,parentStore:p})}else await(0,j().qq)({environment:a,useSudoMode:e,store:s,permissionItem:void 0,fromPermissionWrapper:"inheritance_banner",isRedesignEnabled:!0,shouldInherit:!1})}),[a,i,s,u,p,g]),b=(0,m().yK)((e=>({container:{...(0,_().S2)({theme:e,inheritanceBannerEnabled:!0,isMobile:l}),paddingLeft:12,display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:8},labelContainer:{display:"flex",flexDirection:"row",justifyContent:"flex-start"},rightContainer:{flexShrink:0}})),[l]);return!d&&u?null:p?g.length<2?null:(0,w.jsxs)("div",{style:b.container,children:[(0,w.jsx)("div",{style:b.labelContainer,children:(0,w.jsx)(v().Z,{isMultiline:!0,isSmall:!0,children:(0,w.jsx)(T,{store:s,navigableParentStore:p,showToggle:d})})}),d&&(0,w.jsx)("div",{style:b.rightContainer,children:(0,w.jsx)(f().Z,{on:!u,onClick:h})})]}):null}function T(e){let{store:s,navigableParentStore:i,showToggle:t}=e;const r=(0,n().O7)(),a=(0,o().VK)((()=>{if(i instanceof I().G)return(0,x().ZP)({store:i,fullyQualified:!1,pageVisitSource:d().tY.ShareMenu})}),[i]),l=(0,o().VK)((()=>i.getIcon()),[i]),c=(0,m().yK)((e=>({recordContainer:{display:"inline",alignItems:"center"},title:{display:"inline"},recordIcon:{display:"inline-block",marginRight:2,verticalAlign:"text-bottom"}})),[]),f=(0,w.jsxs)("div",{style:c.recordContainer,children:[(0,w.jsx)(h().Z,{disabled:!0,icon:l,size:14,isEmptyPage:!1,style:c.recordIcon}),(0,w.jsx)(g().Z,{inline:!0,underline:!0,onClick:()=>{i instanceof I().zX&&(S().RF({environment:r,teamId:i.id,tab:P().a.Members,from:"share_menu"}),p().z(r,{store:i,option:"view",from:"share_menu"}))},href:a,style:c.recordContainer,children:(0,w.jsx)(b().Z,{shouldWrap:!0,store:i,style:c.title})})]});return t?(0,w.jsx)(u()._H,{id:"pageShareMenu.inheritingFromParentPageBanner.switchLabel",defaultMessage:"Share with everyone who has access to {parentPageTitle}",values:{parentPageTitle:f}}):(0,w.jsx)(u()._H,{id:"pageShareMenu.inheritingFromParentPageBanner.readOnlyLabel",defaultMessage:"Shared with everyone who has access to {parentPageTitle}",values:{parentPageTitle:f}})}var R=()=>i(447475),Z=(i(267602),i(653476),()=>i(306164)),N=()=>i(696459),V=()=>i(707513),H=()=>i(154186),K=()=>i(827973),B=()=>i(448419),L=()=>i(1910),D=()=>i(198829),A=()=>i(255577),O=()=>i(388284),U=()=>i(352230),W=()=>i(641506),E=()=>i(80510),F=()=>i(913813),z=()=>i(852146),G=()=>i(662406),q=()=>i(998901),Y=()=>i(569849);const X=14;function $(e){const{showRestoreButton:s,store:i,type:t,sudoModeStore:r}=e,a=(0,n().O7)(),{isMobile:l}=(0,n().Fy)(),d=(0,o().VK)((()=>y().uJ(i)[1]),[i]),c=(0,o().VK)((()=>i.canAdmin()),[i]),u=(0,m().yK)((e=>({banner:{...(0,_().S2)({theme:e,inheritanceBannerEnabled:!1,isMobile:l}),display:"flex",flexDirection:"row",alignItems:"flex-start",gap:8},content:{display:"flex",alignItems:"flex-start",gap:2,flex:"1 0 0"},label:{fontSize:(0,W().yv)(a,"UIRegular"),lineHeight:"20px",color:e.text.secondary,flex:"1 0 0",paddingLeft:4},icon:{height:16,width:16,color:e.icon.secondary},iconContainer:{paddingTop:2,height:20,width:20,display:"flex",alignItems:"center",justifyContent:"center"}})),[a,l]);return c?l?(0,w.jsxs)("div",{style:u.banner,children:[(0,w.jsxs)("div",{style:u.content,children:["restricted"===t&&(0,w.jsx)("div",{style:u.iconContainer,children:(0,E().Z)(u.icon)}),(0,w.jsx)(v().Z,{style:u.label,isMultiline:!0,children:(0,w.jsx)(J,{type:t,navigableParentStore:d,showRestoreButton:s,store:i})})]}),s&&(0,w.jsx)(Q,{type:t,store:i,sudoModeStore:r})]}):(0,w.jsxs)("div",{style:u.banner,children:[(0,w.jsxs)("div",{style:u.content,children:["restricted"===t&&(0,w.jsx)("div",{style:u.iconContainer,children:(0,E().Z)(u.icon)}),(0,w.jsx)(v().Z,{style:u.label,isMultiline:!0,children:(0,w.jsx)(J,{store:i,type:t,navigableParentStore:d,showRestoreButton:s})})]}),s&&(0,w.jsx)(Q,{type:t,store:i,sudoModeStore:r})]}):null}function J(e){const{store:s,type:i,navigableParentStore:t}=e,r=(0,n().O7)(),a=(0,o().VK)((()=>{if(t instanceof I().G)return(0,x().ZP)({store:t,fullyQualified:!1,pageVisitSource:d().tY.ShareMenu})}),[t]),l=(0,o().VK)((()=>t instanceof I().zX),[t]),c=(0,o().VK)((()=>t.getIcon()),[t]),f=(0,o().VK)((()=>s.isCollectionView()?"database":"page"),[s]),v=(0,m().yK)((e=>({recordContainer:{display:"inline",alignItems:"center",gap:2,marginLeft:2},title:{display:"inline"},recordIcon:{display:"inline-block",marginRight:2,verticalAlign:"text-bottom"}})),[]),y=t instanceof I().zX?(0,w.jsx)(g().Z,{inline:!0,underline:!0,onClick:()=>{S().RF({environment:r,teamId:t.id,tab:P().a.Members,from:"permission_item"}),p().z(r,{store:t,option:"view",from:"share_menu"})},children:(0,w.jsx)(b().Z,{shouldWrap:!0,maxLength:30,store:t,style:v.title})}):(0,w.jsxs)("div",{style:v.recordContainer,children:[c&&(0,w.jsx)(h().Z,{disabled:!0,icon:c,size:14,isEmptyPage:!1,style:v.recordIcon}),(0,w.jsx)(g().Z,{inline:!0,href:a,style:v.recordContainer,children:(0,w.jsx)(b().Z,{shouldWrap:!1,maxLength:30,store:t,style:v.title,underline:!0})})]});switch(i){case"elevated":return l?"database"===f?(0,w.jsx)(u()._H,{id:"pageShareMenu.restoreTeamspacePermissionsBannerDatabase.label",defaultMessage:"Share settings on this database differ from the {teamspaceTitle} teamspace default",values:{teamspaceTitle:y}}):(0,w.jsx)(u()._H,{id:"pageShareMenu.restoreTeamspacePermissionsBanner.label",defaultMessage:"Share settings on this page differ from the {teamspaceTitle} teamspace default",values:{teamspaceTitle:y}}):"database"===f?(0,w.jsx)(u()._H,{id:"pageShareMenu.restoreParentPagePermissionsBannerDatabase.label",defaultMessage:"Share settings on this database differ from the parent page {parentPageTitle}",values:{parentPageTitle:y}}):(0,w.jsx)(u()._H,{id:"pageShareMenu.restoreParentPagePermissionsBanner.label",defaultMessage:"Share settings on this page differ from the parent page {parentPageTitle}",values:{parentPageTitle:y}});case"restricted":return l?"database"===f?(0,w.jsx)(u()._H,{id:"pageShareMenu.restrictedAccessFromTeamspaceBannerDatabase.label",defaultMessage:"Share settings on this database are unlinked from the {teamspaceTitle} teamspace default",values:{teamspaceTitle:y}}):(0,w.jsx)(u()._H,{id:"pageShareMenu.restrictedAccessFromTeamspaceBanner.label",defaultMessage:"Share settings on this page are unlinked from the {teamspaceTitle} teamspace default",values:{teamspaceTitle:y}}):"database"===f?(0,w.jsx)(u()._H,{id:"pageShareMenu.restrictedAccessFromParentPageBannerDatabase.label",defaultMessage:"Share settings on this database are unlinked from the parent page {parentPageTitle}",values:{parentPageTitle:y}}):(0,w.jsx)(u()._H,{id:"pageShareMenu.restrictedAccessFromParentPageBanner.label",defaultMessage:"Share settings on this page are unlinked from the parent page {parentPageTitle}",values:{parentPageTitle:y}});default:(0,N().t1)(i)}}function Q(e){const{type:s,store:i,sudoModeStore:t}=e,r=(0,n().O7)(),{isMobile:a}=(0,n().Fy)(),l=(0,u().YB)(),g=(0,o().VK)((()=>!!t&&t.shouldSaveTransactionWithSudoMode(i)),[i,t]),h=(0,o().VK)((()=>(0,y().uJ)(i)[1]),[i]),b=h.table===Z().e0,f=(0,o().VK)((()=>{if(h instanceof I().G)return(0,x().ZP)({store:h,fullyQualified:!1,pageVisitSource:d().tY.ShareMenu})}),[h]),v=(0,m().yK)((e=>({popupContainer:{minWidth:265},icon:{fill:e.icon.secondary,height:16,width:16},mobileRestoreButton:{fontSize:(0,W().yv)(r,"UIRegular"),fontWeight:V().Ue.medium,flexShrink:0,borderRadius:4,paddingLeft:4,paddingRight:4,color:e.text.uiBluePrimary}})),[r]),j=[b?{key:"showTeamSettings",render:e=>(0,w.jsx)(K().Z,{...e,icon:(0,G().m)({height:X,width:X}),title:(0,w.jsx)(u()._H,{id:"pageShareMenu.restoreParentPagePermissionsBanner.viewDefaults.label",defaultMessage:"View defaults"})}),action:()=>{h.table===Z().e0&&(S().RF({environment:r,teamId:h.id,tab:P().a.Members,from:"permission_item"}),p().z(r,{store:h,option:"view",from:"share_menu"}))}}:f?{key:"showParentPageSettings",render:e=>(0,w.jsx)(K().Z,{...e,icon:(0,G().m)({height:X,width:X}),title:(0,w.jsx)(u()._H,{id:"pageShareMenu.restoreParentPagePermissionsBanner.viewDefaults.label",defaultMessage:"View defaults"}),href:f}),action:()=>{}}:void 0,{key:"restore",action:async()=>{if("elevated"===s)await(0,Y().K)({environment:r,useSudoMode:g,store:i});else if("restricted"===s){if(!i.isDefined())return;const e=i.getPermissionItems(),s=y().uJ(i)[1];if(!s)return;const t=(0,c().Wo)(y().fJ(s)),n=(0,c().Xr)(i.getModel(),e,t);await(0,C().w)({environment:r,useSudoMode:g,store:i,permissionChanges:n,from:"unlinked_banner",shareMenuSessionId:M().default.state.sessionId,isRedesignEnabled:!0,parentStore:s})}else(0,N().t1)(s)},render:e=>(0,w.jsx)(K().Z,{...e,title:(0,w.jsx)(u()._H,{id:"pageShareMenu.restoreParentPagePermissionsBanner.restoreSettings.label",defaultMessage:"Restore settings"}),icon:(0,z().u)({height:X,width:X})})}].filter(N().$K),_=[{key:"all",render:e=>(0,w.jsx)(O().Z,{...e}),items:j}];return a?(0,w.jsx)(H().Z,{style:v.mobileRestoreButton,onClick:async()=>{if("elevated"===s)await(0,Y().K)({environment:r,useSudoMode:g,store:i});else if("restricted"===s){if(!i.isDefined())return;const e=i.getPermissionItems(),s=y().uJ(i)[1];if(!s)return;const t=(0,c().Wo)(y().fJ(s)),n=(0,c().Xr)(i.getModel(),e,t);await(0,C().w)({environment:r,useSudoMode:g,store:i,permissionChanges:n,from:"unlinked_banner",shareMenuSessionId:M().default.state.sessionId,isRedesignEnabled:!0,parentStore:s})}else(0,N().t1)(s)},children:(0,w.jsx)(u()._H,{defaultMessage:"Restore",id:"pageShareMenu.restoreParentPagePermissionsBanner.restore.mobile.label"})}):(0,w.jsx)(B().ZP,{render:()=>(0,w.jsx)(D().Z,{menuType:U().o.Popup,children:(0,w.jsx)(A().Z,{type:A().i.Vertical,sections:_,initialFocus:void 0})}),renderOrigin:e=>(0,w.jsx)(L().Z,{icon:F().O,iconStyle:v.icon,ariaLabel:l.formatMessage({id:"pageShareMenu.restorePagePermissionsBanner.restoreOptionsButton.label",defaultMessage:"See restore permissions options"}),...e}),popupType:B().Z4.Popup,placementToOrigin:q().Placement.Bottom,alignmentToOrigin:q().Alignment.End})}function ee(e){const{store:s}=e,i=(0,n().O7)(),t=(0,o().VK)((()=>function(e){const{store:s,environment:i}=e;return r().or([r().zzA,r().xDy([r().c2G,r().ffD(r().zzA)])])({environment:i,blocks:[s],publicEditMode:void 0})}({store:s,environment:i})),[s,i]);return(0,o().VK)((()=>(0,a().wZ)()),[])?(0,w.jsx)($,{type:"restricted",showRestoreButton:t,store:s,sudoModeStore:e.sudoModeStore}):(0,w.jsx)(R().Z,{type:"unrestrict",showRestoreButton:t,store:s,sudoModeStore:e.sudoModeStore})}function se(e){const{store:s}=e,i=(0,o().VK)((()=>(0,l().Np)({store:s})),[s]),t=(0,o().VK)((()=>(0,a().wZ)()),[]);return i?t?(0,w.jsx)($,{type:"elevated",showRestoreButton:!1,store:s,sudoModeStore:e.sudoModeStore}):(0,w.jsx)(R().Z,{type:"restore-team",showRestoreButton:!1,store:s,sudoModeStore:e.sudoModeStore}):null}const ie=function(e){const{store:s,showRestrictedPermissionBanner:i,showPermissionInheritanceBanner:t}=e,{canAccessParent:n}=(0,o().VK)((()=>(0,l().HB)({store:s})),[s]);return n?t?(0,w.jsx)(k,{store:s,sudoModeStore:e.sudoModeStore}):i?(0,w.jsx)(ee,{store:s,sudoModeStore:e.sudoModeStore}):(0,w.jsx)(se,{store:s,sudoModeStore:e.sudoModeStore}):null}},942560:(e,s,i)=>{i.d(s,{Z:()=>R});i(667294);var t=()=>i(219727),n=()=>i(142735),o=()=>i(846550),r=()=>i(779733),a=()=>i(363379),l=()=>i(506347),m=()=>i(933868),d=()=>i(788860),c=()=>i(448768),u=()=>i(707513),p=()=>i(959137),g=()=>i(661297),h=()=>i(92175),b=()=>i(906651),f=()=>i(67961),v=()=>i(205228),x=()=>i(594546),y=()=>i(429725),P=()=>i(599631),I=i(785893);function S(e){const s=(0,t().O7)(),{device:r,WindowSizeStore:a}=s,l=(0,n().VK)((()=>({left:a.getSafePaddingLeftCSS(8),right:a.getSafePaddingRightCSS(12)})),[a]),m=(0,o().yK)((e=>({button:{display:"flex",alignItems:"center",width:r.isMobile?"100%":void 0,height:r.isMobile?44:32,paddingTop:r.isMobile?12:4,paddingBottom:r.isMobile?12:4,paddingLeft:l.left,paddingRight:l.right},helpIcon:{width:r.isMobile?16:14,height:r.isMobile?16:14,fill:r.isMobile?e.mediumIconColor:e.lightIconColor}})),[r.isMobile,l]);return(0,I.jsx)(i(108714).Z,{href:(0,i(148126).UY)("guides.sharing"),onClick:()=>i(407391).Fs(s,{from:"sharing"}),style:{width:r.isMobile?"100%":void 0},external:!0,children:(0,I.jsxs)(h().Z,{mobileFeedback:r.isMobile,isSmall:!0,style:{...m.button,...e.style},disabled:Boolean(e.disableHover),children:[(0,I.jsx)("div",{style:{marginLeft:r.isMobile?2:0,marginRight:r.isMobile?8:6},children:(0,i(653457).m)(m.helpIcon)}),(0,I.jsx)(f().Z,{isMobile:r.isMobile,isSecondaryColor:!r.isMobile,children:(0,I.jsx)(d()._H,{defaultMessage:"Learn about sharing",id:"blockPermissionsSettings.learnAboutSharing.prompt"})})]})})}S.displayName="LearnAboutSharingLink";const j=S;function C(e){const{store:s,buttonPopupStore:i,events:a}=e,m=(0,t().O7)(),{device:p,mobileNative:g}=m,h=p.isMobile,f=(0,n().VK)((()=>(0,r().wZ)()),[]),x=(0,o().yK)((e=>({button:{flex:1,height:36,minHeight:36,...f?{borderRadius:12,marginTop:12}:{},...f&&h?{minHeight:48,fontSize:u().JB.UIRegular.mobile}:{}}})),[f,h]);return(0,I.jsx)(b().Z,{onClick:()=>{var e;p.isMobileNative?function(e){const{store:s,mobileNative:i}=e,t=(0,c().u5)({schemeUrl:(0,y().ZP)({store:s,pageVisitSource:l().tY.CopyLink}),baseUrl:v().default.domainBaseUrl});i&&i.share(t)}({store:s,mobileNative:g}):w({store:s,buttonPopupStore:i,environment:m});const t=null===(e=s.getCollectionStore())||void 0===e?void 0:e.id,n=s.getParentCollectionIdUpToTwoLevels();T(m,{collection_id:t,parent_collection_id:n})},style:x.button,...a,children:p.isMobileNative?(0,I.jsx)(d()._H,{id:"pageShareMenu.shareLinkButton.label",defaultMessage:"Share link"}):(0,I.jsx)(d()._H,{id:"pageShareMenu.copyLinkButton.label",defaultMessage:"Copy link"})})}function _(e){const{store:s,buttonPopupStore:i,events:a,trustedDomainPermissionItem:l}=e,m=(0,t().O7)(),c=(0,n().VK)((()=>(0,r().wZ)()),[]),u=(0,o().yK)((e=>({button:{height:24,paddingLeft:8,paddingRight:8,color:e.regularTextColor,marginLeft:"auto"},icon:{width:14,height:14,fill:c?e.mediumIconColor:e.regularIconColor,marginLeft:0,marginRight:6},label:{color:e.regularTextColor},redesignButton:{paddingLeft:10,paddingRight:12,paddingTop:6,paddingBottom:6,color:e.regularTextColor,justifyContent:"center",borderRadius:6}})),[c]);return c?(0,I.jsxs)(g().Z,{onClick:()=>{var e;w({store:s,buttonPopupStore:i,environment:m,keepPopupOpen:!0});const t=null===(e=s.getCollectionStore())||void 0===e?void 0:e.id,n=s.getParentCollectionIdUpToTwoLevels();T(m,{collection_id:t,parent_collection_id:n,trusted_domain_permission_role:l.role})},style:u.redesignButton,...a,children:[(0,P().N)(u.icon),(0,I.jsx)(f().Z,{style:u.label,children:(0,I.jsx)(d()._H,{id:"blockPermissionsSettings.copyLinkButtonV2.label",defaultMessage:"Copy link"})})]}):(0,I.jsxs)(h().Z,{isSmall:!0,onClick:()=>{var e;w({store:s,buttonPopupStore:i,environment:m});const t=null===(e=s.getCollectionStore())||void 0===e?void 0:e.id,n=s.getParentCollectionIdUpToTwoLevels();T(m,{collection_id:t,parent_collection_id:n,trusted_domain_permission_role:l.role})},style:u.button,...a,children:[(0,P().N)(u.icon),(0,I.jsx)(f().Z,{isSmall:!0,style:u.label,children:(0,I.jsx)(d()._H,{id:"blockPermissionsSettings.copyLinkButton.label",defaultMessage:"Copy link"})})]})}function M(e){const{calculatedPermissions:s,isRedesignEnabled:i,spaceName:t}=e,n=s.mostPermissivePublicItem.permissionItem;if((0,m().YX)(n.role))return(0,I.jsx)(d()._H,{defaultMessage:"This page has public link access, so anyone with the link will be able to view the page.",id:"blockPermissionsSettings.publicLinkInfo.tooltip"});const o=s.mostPermissiveSpaceItem.permissionItem;return(0,m().YX)(o.role)?i&&t?(0,I.jsx)(d()._H,{defaultMessage:"Anyone at {spaceName} can access with this link",id:"blockPermissionsSettings.workspacePermissions.tooltipV2",values:{spaceName:t}}):(0,I.jsx)(d()._H,{defaultMessage:"This page has workspace access, so anyone in the workspace will be able to view the link.",id:"blockPermissionsSettings.workspacePermissions.tooltip"}):s.permissionItemsCount>1?i?(0,I.jsx)(d()._H,{defaultMessage:"Only people invited to this page can access with this link",id:"blockPermissionsSettings.userPermissions.tooltipV2"}):(0,I.jsx)(d()._H,{defaultMessage:"Only you and other invited members and guests will be able to view the link.",id:"blockPermissionsSettings.userPermissions.tooltip"}):(0,I.jsx)(d()._H,{defaultMessage:"Only you can access this page, so the link will only work for you.",id:"blockPermissionsSettings.privatePermissions.tooltip"})}async function w(e){const{store:s,buttonPopupStore:i,environment:t,keepPopupOpen:n}=e,o=(0,y().ZP)({store:s,pageVisitSource:l().tY.CopyLink}),r=await p().F.clipboardActions.load();await r.copyString({environment:t,stringValue:o,copiedMessage:r.clipboardMessages.copiedLinkToClipboard}),i&&!n&&i.setState({open:!1})}const k=function(e){const{store:s,buttonPopupStore:a,calculatedPermissions:l}=e,{device:m}=(0,t().O7)(),d=(0,i(609836).b)(),c=(0,n().VK)((()=>(0,r().wZ)()),[]),u=(0,o().yK)((()=>({tooltip:{width:280}})),[]);return(0,I.jsxs)(I.Fragment,{children:[c&&!m.isMobile&&(0,I.jsx)(j,{}),(0,I.jsx)(i(654133).Z,{delayThreshold:c?500:0,placement:i(998901).Placement.Bottom,renderTooltip:()=>(0,I.jsx)(M,{calculatedPermissions:l,isRedesignEnabled:c,spaceName:d}),textWrap:!0,style:u.tooltip,render:e=>m.isMobile?(0,I.jsx)(C,{store:s,buttonPopupStore:a,events:e}):(0,I.jsx)(_,{store:s,buttonPopupStore:a,events:e,trustedDomainPermissionItem:l.mostPermissiveTrustedDomainItem.permissionItem})})]})};function T(e,s){x().K4(e,"copy_link_from_permissions_setting",s)}const R=function(e){const{isMobile:s}=(0,t().Fy)(),l=(0,n().VK)((()=>(0,r().wZ)()),[]),m=(0,o().yK)((e=>({container:{display:"flex",alignItems:s?"normal":"center",flexDirection:s?"column":"row",justifyContent:"space-between",padding:l?s?"16px 20px 20px":"12px 12px":"8px 14px",...l?{borderTop:s?`0.5px solid ${e.stroke.primary}`:`1px solid ${e.stroke.secondary}`,marginTop:s?0:"8px"}:{boxShadow:`0 -1px 0 ${e.regularDividerColor}`}}})),[s,l]),{mostPermissiveSpaceItem:d,showRestrictedPermissionBanner:c}=e.calculatedPermissions;return(0,I.jsx)("div",{style:m.container,children:s?l?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(i(423470).w,{store:e.store,calculatedPermissions:e.calculatedPermissions,permissionItemArgs:e.permissionItemArgs}),(0,I.jsx)(k,{store:e.store,buttonPopupStore:e.buttonPopupStore,calculatedPermissions:e.calculatedPermissions})]}):(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(a().yo,{store:e.store,sudoModeStore:e.permissionItemArgs.sudoModeStore,location:e.permissionItemArgs.location,spacePermission:d,isRestricted:c,showTrustedDomainPermission:e.calculatedPermissions.showTrustedDomainPermission,trustedDomainPermission:e.calculatedPermissions.mostPermissiveTrustedDomainItem,permissionItemArgs:e.permissionItemArgs}),(0,I.jsx)(k,{store:e.store,buttonPopupStore:e.buttonPopupStore,calculatedPermissions:e.calculatedPermissions})]}):l?(0,I.jsx)(k,{store:e.store,buttonPopupStore:e.buttonPopupStore,calculatedPermissions:e.calculatedPermissions}):(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(a().ZP,{store:e.store,sudoModeStore:e.permissionItemArgs.sudoModeStore,location:e.permissionItemArgs.location,spacePermission:d,isRestricted:c,showTrustedDomainPermission:e.calculatedPermissions.showTrustedDomainPermission,trustedDomainPermission:e.calculatedPermissions.mostPermissiveTrustedDomainItem,permissionItemArgs:e.permissionItemArgs}),(0,I.jsx)(k,{store:e.store,buttonPopupStore:e.buttonPopupStore,calculatedPermissions:e.calculatedPermissions})]})})}},17571:(e,s,i)=>{i.d(s,{W:()=>f});var t=i(667294),n=()=>i(219727),o=()=>i(142735),r=()=>i(846550),a=()=>i(788860),l=()=>i(912732),m=()=>i(92175),d=()=>i(641506),c=()=>i(975899),u=()=>i(681832),p=()=>i(960516),g=i(785893);function h(e){let{}=e;const s=(0,n().O7)(),{device:o}=s,l=(0,t.useCallback)((()=>{u().default.update((e=>({...e,tab:u().XF.Publish,display:u().wV.Publish})))}),[]),m=(0,r().yK)((e=>({container:{padding:12,backgroundColor:e.sidebarSecondaryBackground,boxShadow:`0 -1px 0 ${e.regularDividerColor}`,marginTop:o.isMobile?28:1},link:{textDecoration:"underline",display:"inline"}})),[o.isMobile]);return(0,g.jsx)(i(67961).Z,{style:m.container,isMultiline:!0,isSmall:!0,children:(0,g.jsx)(a()._H,{id:"publicItemFooter.caption",defaultMessage:"Anyone on the web can access this published page · <link>Site settings</link>",values:{link:e=>(0,g.jsx)(i(108714).Z,{style:m.link,onClick:l,children:e})}})})}const b=t.memo(h);function f(e){let{store:s,publicPermissionItem:i,permissionItemArgs:c}=e;const h=(0,n().O7)(),[f,x]=(0,t.useState)(!1),y=(0,o().VK)((()=>s.canAdmin()),[s]),P=(0,t.useCallback)((()=>{u().default.update((e=>({...e,tab:u().XF.Publish,display:u().wV.Publish})))}),[]),I=(0,t.useCallback)((()=>{const e=!1===f;x(!f),e&&l().dS(h,{share_menu_session_id:u().default.state.sessionId,type:"public_link"})}),[h,f,x]),S=(0,r().yK)((e=>({link:{textDecoration:"underline",fontSize:(0,d().yv)(h,"UISmall"),color:e.text.secondary,paddingTop:0,paddingBottom:0,height:20,paddingLeft:4,paddingRight:4,marginTop:-4,marginLeft:-4,overflow:"hidden"},linkUILabelStyle:{overflow:"unset"}})),[h]);return(0,g.jsx)(p().ZP,{currentBlockStore:s,permissionItem:i.permissionItem,from:i.from,nonInheritedTooltip:(0,g.jsx)(a()._H,{id:"publicLinkPermissionItem.tooltip",defaultMessage:"Anyone on the web can access this published page"}),icon:(0,g.jsx)(v,{}),title:(0,g.jsx)(a()._H,{defaultMessage:"Anyone with published link",id:"publicLinkPermissionItem.title"}),subtitle:(0,g.jsx)(m().Z,{style:S.link,onClick:P,children:y?(0,g.jsx)(a()._H,{defaultMessage:"Edit site settings",id:"publicLinkPermissionItem.manageSettings"}):(0,g.jsx)(a()._H,{defaultMessage:"View site settings",id:"publicLinkPermissionItem.viewSettings"})}),selectFooter:(0,g.jsx)(b,{}),subtitleStyle:S.linkUILabelStyle,onClick:I,upgradeButtonName:"public_permission_item",...c})}function v(){const e=(0,r().yK)((e=>({backgroundContainer:{background:e.regularDividerColor,width:32,height:32,borderRadius:4,display:"flex",justifyContent:"center",alignItems:"center"},globeIcon:{width:22,fill:e.icon.secondary}})),[]);return(0,g.jsx)("div",{style:e.backgroundContainer,children:(0,c().o)(e.globeIcon)})}},850204:(e,s,i)=>{i.d(s,{Z:()=>V});var t=i(667294),n=()=>i(219727),o=()=>i(142735),r=()=>i(846550),a=()=>i(933868),l=()=>i(788860),m=()=>i(696459),d=()=>i(777814),c=()=>i(827973),u=()=>i(471645),p=i(785893);function g(e){const{permissionItem:s,onToggle:i,focused:t}=e,a=(0,l().YB)(),{isMobile:m}=(0,n().Fy)(),d=(0,o().VK)((()=>!!s&&!Boolean(s.unlisted_timestamp)),[s]),g=(0,r().yK)((e=>({visibilityToggle:{display:"flex",alignItems:"start",justifyContent:"space-between",marginLeft:12,paddingLeft:4},buttonMenuItemStyleMobile:{backgroundColor:e.surface.elevated,paddingTop:12,paddingBottom:12,marginRight:12,borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:e.stroke.secondary,width:"100%"}})),[]),h=a.formatMessage({id:"spacePermissionItem.visibilityPicker.unlistedToggle",defaultMessage:"Can find in search"});return(0,p.jsx)("div",{children:(0,p.jsx)(c().Z,{onClick:i,focused:t,style:m?g.buttonMenuItemStyleMobile:{},title:h,shouldWrapTitle:!0,right:(0,p.jsx)("div",{style:m?{}:g.visibilityToggle,children:(0,p.jsx)(u().Z,{disabled:!1,on:d,onClick:i})})})})}var h=()=>i(247724),b=()=>i(345918),f=()=>i(599631),v=()=>i(168441),x=()=>i(876822),y=()=>i(18281),P=()=>i(295334),I=()=>i(779733),S=()=>i(960516),j=()=>i(998306),C=()=>i(269089),_=()=>i(448419);function M(e){let{store:s,spaceStore:t,spacePermission:a,showTrustedDomainPermission:l,trustedDomainPermission:m,isRestricted:d,permissionItemArgs:c,hideHoverStyles:u,buttonPopupStore:g,isDisplayOnly:h}=e;const b=(0,n().O7)().device.isMobile,f=(0,i(480089).cR)(s),v=(0,P().ab)(a),x=(0,o().VK)((()=>s.canAdmin()),[s]),y=!x||h||f,I=(0,i(560847).R)((()=>g.setState({...g.state,open:!0})),[g],i(949842).Af.PermissionItemClick),S=(0,r().yK)((e=>({origin:{display:"flex",alignItems:"center",justifyContent:"center",paddingLeft:6,marginLeft:-6,height:void 0,paddingTop:4,paddingBottom:4,maxWidth:250},icon:{width:10,marginLeft:4,fill:e.mediumIconColor,display:"inline"},privacyMenu:{...!b&&{width:330,borderRadius:10},...b&&{maxWidth:"100%"}},title:{fontSize:14,whiteSpace:"normal"},mobileButton:{whiteSpace:"normal",marginBottom:4,height:void 0}})),[b]);return y?(0,p.jsx)("div",{style:S.title,children:(0,p.jsx)(w,{visibility:v,spaceStore:t})}):(0,p.jsx)(_().ZP,{renderOrigin:e=>b?(0,p.jsx)("div",{style:S.title,...e,children:(0,p.jsxs)("div",{style:S.mobileButton,children:[(0,p.jsx)(w,{visibility:v,spaceStore:t}),(0,i(696347).o)(S.icon)]})}):(0,p.jsxs)(i(92175).Z,{style:S.origin,hoveredStyle:u?{background:"unset"}:void 0,pressedStyle:u?{background:"unset"}:void 0,disabled:y,...e,children:[(0,p.jsx)(i(469203).s,{children:(0,p.jsx)(w,{visibility:v,spaceStore:t})}),x?(0,i(151684).E)(S.icon):null]}),disabled:y,onClick:I,buttonPopupStore:g,style:S.privacyMenu,alignmentToOrigin:i(998901).Alignment.Start,popupType:b?_().Z4.SlideUp:_().Z4.Popup,render:e=>a?(0,p.jsx)(i(363379).oC,{store:s,spacePermission:a,parentCloseCallback:e.close,showTrustedDomainPermission:l,trustedDomainPermission:m,isRestricted:d,sudoModeStore:c.sudoModeStore,location:c.location,permissionItemArgs:c}):null})}function w(e){let{visibility:s,spaceStore:i}=e;const t=(0,n().O7)(),r=(0,o().VK)((()=>(0,b().rn)(t,i)),[t,i]),a=(0,o().VK)((()=>(0,I().wZ)()),[]),d=(0,o().VK)((()=>(0,I().LY)()),[]);switch(s){case"private":return(0,p.jsx)(l()._H,{id:"spacePermissionVisibilityPicker.private",defaultMessage:"Only people invited"});case"unlisted":return d?(0,p.jsx)(l()._H,{defaultMessage:"Everyone at {workspaceName}",id:"blockPermissionsSettings.permissionItem.workspaceAccessNew",values:{workspaceName:r}}):a?(0,p.jsx)(l()._H,{id:"linkSharingPill.visibilityTitle.anyoneWithLinkV2",defaultMessage:"Anyone at {spaceName} with the link",values:{spaceName:r}}):(0,p.jsx)(l()._H,{id:"linkSharingPill.visibilityTitle.anyoneWithLink",defaultMessage:"Anyone with link at {spaceName}",values:{spaceName:r}});case"open":return(0,p.jsx)(l()._H,{defaultMessage:"Everyone at {workspaceName}",id:"blockPermissionsSettings.permissionItem.workspaceAccessNew",values:{workspaceName:r}});default:(0,m().t1)(s)}}const k=t.memo(M);function T(e){let{visibility:s,spaceStore:i,isRedesignEnabled:t,isSearchableToggleEnabled:n,isMobile:o}=e;const a=(0,r().yK)((e=>({lockIcon:{width:o&&t?24:18,height:o&&t?24:18},linkIcon:{width:17,height:17,...t?void 0:{fill:e.mediumIconColor}},linkIconContainer:{backgroundColor:e.lightDividerColor,borderRadius:32}})),[o,t]);return"private"===s?t?(0,p.jsx)(j().Z,{type:"square",iconType:"function",iconFn:v().Q,iconStyle:a.lockIcon,isMobile:o}):(0,p.jsx)(C().Z,{store:i}):"unlisted"===s?n?(0,p.jsx)(C().Z,{store:i}):t?(0,p.jsx)(j().Z,{type:"square",iconType:"function",iconFn:f().N,iconStyle:a.linkIcon,isMobile:o}):(0,f().N)(a.linkIcon):"open"===s?(0,p.jsx)(C().Z,{store:i}):void(0,m().t1)(s)}function R(e){let{store:s,spacePermission:i,showTrustedDomainPermission:t,trustedDomainPermission:r,isRestricted:a,permissionItemArgs:m,fromPermissionWrapper:d,buttonPopupStore:c,visibility:u,isRedesignEnabled:g,spaceStore:h,hideHoverStyles:f,isDisplayOnly:v}=e;const x=(0,n().O7)(),y=(0,o().VK)((()=>(0,b().rn)(x,h)),[x,h]);return g?(0,p.jsx)(k,{store:s,spaceStore:h,spacePermission:i,showTrustedDomainPermission:t,trustedDomainPermission:r,isRestricted:a,permissionItemArgs:m,fromPermissionWrapper:d,buttonPopupStore:c,hideHoverStyles:f,isDisplayOnly:v}):"unlisted"===u?(0,p.jsx)(l()._H,{defaultMessage:"Members with the link",id:"blockPermissionsSettings.permissionItem.linkAccess"}):(0,p.jsx)(l()._H,{defaultMessage:"Everyone at {workspaceName}",id:"blockPermissionsSettings.permissionItem.workspaceAccessNew",values:{workspaceName:y}})}function Z(){const e=(0,o().VK)((()=>(0,y().Io)().length),[]);return(0,p.jsx)(l()._H,{defaultMessage:"{numberOfWorkspaceMembers, plural, one {{numberOfWorkspaceMembers} person} other {{numberOfWorkspaceMembers} people}}",id:"blockPermissionsSettings.spacePermission.none",values:{numberOfWorkspaceMembers:e}})}function N(){return(0,p.jsx)(l()._H,{defaultMessage:"Applies to all members in your workspace.",id:"blockPermissionsSettings.spacePermission.tooltip"})}const V=function(e){var s;let{showTrustedDomainPermission:m,trustedDomainPermission:c,isRestricted:u,...f}=e;const{store:v,spacePermission:y,fromPermissionWrapper:j}=f,C=(0,n().O7)(),_=C.device.isMobile,M=(0,o().VK)((()=>(0,I().wZ)()),[]),w=(0,o().VK)((()=>(0,I().LY)()),[]),k=(0,o().qz)(void 0,i(529048).Z),V=a().tx(y.permissionItem)&&"none"!==y.permissionItem.role,H=(0,P().ab)(y),K=(0,a().YX)((null==c?void 0:c.permissionItem.role)??"none"),B=(0,a().YX)((null===(s=f.publicPermission)||void 0===s?void 0:s.permissionItem.role)??"none"),L=(0,o().VK)((()=>x().default.state.currentSpaceStore),[]),D=(0,o().VK)((()=>{const e=x().default.state.currentSpaceStore;return null==e||!e.isDefined()}),[]),A=(0,o().VK)((()=>{const e=x().default.state.currentSpaceStore;return!!e&&(0,b().Cx)(e)}),[]),O=(0,o().VK)((()=>!!L&&v.isTopLevelWorkspacePage(L.id)),[v,L]),U=!(0,o().VK)((()=>(0,i(333023).RY)()),[])&&m&&K&&!B,W=(0,t.useCallback)((e=>{"none"===e&&K&&c&&(0,i(788504).n)({trustedDomainPermission:c,store:v,environment:C,sudoModeStore:f.permissionItemArgs.sudoModeStore,location:f.permissionItemArgs.location})}),[C,K,f.permissionItemArgs.location,f.permissionItemArgs.sudoModeStore,v,c]),E=(0,t.useCallback)((()=>{M&&k.setState({open:!0})}),[M,k]),F=(0,t.useCallback)((async()=>{const e=y.permissionItem,s=(0,i(513670).Xh)(e);let t;"unlisted"===("open"===H?"unlisted":"open")?(s.unlisted_timestamp=Date.now(),t=!0):(delete s.unlisted_timestamp,t=!1);const n=y.from,o=n.table===i(396136).iU?n.blockId:n.teamId,r=!(n.table===v.table&&o===v.id);t=t&&!O&&!u,await(0,i(314169).iK)({oldPermissionItem:e,newPermissionItem:s,wasInherited:r,environment:C,store:v,restrictingVisibility:t,sudoModeStore:f.permissionItemArgs.sudoModeStore,location:f.permissionItemArgs.location})}),[C,y,O,f.permissionItemArgs,H,v,u]),z=(0,r().yK)((e=>({container:{width:"100%"},lockIcon:{width:18,height:18},linkIcon:{width:17,height:17,...M?void 0:{fill:e.mediumIconColor}},preRedesignLinkIconContainer:{backgroundColor:e.lightDividerColor,borderRadius:32}})),[M]),G=(0,t.useMemo)((()=>w?[{role:"none",prefixItem:{key:"can-find-in-search-toggle",render:e=>(0,p.jsx)("div",{...e,children:(0,p.jsx)(g,{permissionItem:y.permissionItem,onToggle:F,focused:e.focused})}),action:()=>{}}}]:[]),[y,F,w]),q="private"===H&&M;return L?D?A&&M?(0,p.jsx)("div",{style:z.container,className:V?void 0:h().afv,children:(0,p.jsx)(S().ZP,{currentBlockStore:v,permissionItem:y.permissionItem,from:y.from,icon:(0,p.jsx)(T,{visibility:H,spaceStore:L,isRedesignEnabled:M,isSearchableToggleEnabled:w,isMobile:C.device.isMobile}),iconStyle:M||"unlisted"!==H?void 0:z.preRedesignLinkIconContainer,title:(0,p.jsx)(R,{store:v,spaceStore:L,spacePermission:y,showTrustedDomainPermission:m,trustedDomainPermission:c,isRestricted:!0,permissionItemArgs:f.permissionItemArgs,fromPermissionWrapper:j,buttonPopupStore:k,visibility:H,isRedesignEnabled:M,hideHoverStyles:q,isDisplayOnly:!0}),subtitle:_&&!q?(0,p.jsx)(l()._H,{...(0,d().M)({type:"space_permission",role:y.permissionItem.role,table:"block",isRemovable:!1,isCurrentUser:!1,isRedesignEnabled:M}).label}):void 0,upgradeButtonName:"space_permission_item",fromPermissionWrapper:j,isRemovableOverride:!0,hideRoleSelectButton:q,renderTitleWithoutUILabelWrapper:M,...f.permissionItemArgs,shouldDisable:!0})}):null:(0,p.jsxs)("div",{style:z.container,className:V?void 0:h().afv,children:[(0,p.jsx)(S().ZP,{currentBlockStore:v,permissionItem:y.permissionItem,from:y.from,icon:(0,p.jsx)(T,{visibility:H,spaceStore:L,isRedesignEnabled:M,isSearchableToggleEnabled:w,isMobile:C.device.isMobile}),iconStyle:M||"unlisted"!==H?void 0:z.preRedesignLinkIconContainer,title:(0,p.jsx)(R,{store:v,spaceStore:L,spacePermission:y,showTrustedDomainPermission:m,trustedDomainPermission:c,isRestricted:u,permissionItemArgs:f.permissionItemArgs,fromPermissionWrapper:j,buttonPopupStore:k,visibility:H,isRedesignEnabled:M,hideHoverStyles:q,isDisplayOnly:f.permissionItemArgs.shouldDisable??!1}),selectHeader:M&&_?(0,p.jsx)(i(18748).ZP,{title:(0,p.jsx)(R,{store:v,spaceStore:L,spacePermission:y,showTrustedDomainPermission:m,trustedDomainPermission:c,isRestricted:u,permissionItemArgs:f.permissionItemArgs,fromPermissionWrapper:j,buttonPopupStore:k,visibility:H,isRedesignEnabled:M,hideHoverStyles:q,isDisplayOnly:!0}),icon:(0,p.jsx)(T,{visibility:H,spaceStore:L,isRedesignEnabled:M,isSearchableToggleEnabled:w,isMobile:C.device.isMobile}),desktopIconStyle:{marginLeft:16}}):void 0,onClick:M?E:void 0,nonInheritedTooltip:M||"open"!==H||_?void 0:(0,p.jsx)(N,{}),subtitle:M||"unlisted"===H?M&&_&&!q?(0,p.jsx)(l()._H,{...(0,d().M)({type:"space_permission",role:y.permissionItem.role,table:"block",isRemovable:!1,isCurrentUser:!1,isRedesignEnabled:M}).label}):void 0:(0,p.jsx)(Z,{}),upgradeButtonName:"space_permission_item",fromPermissionWrapper:j,onChange:W,isRemovableOverride:!0,hideRoleSelectButton:q,renderTitleWithoutUILabelWrapper:M,roleItemOverrides:G,...f.permissionItemArgs}),U&&(0,p.jsx)(i(458809).Z,{store:f.store,trustedDomainPermission:c,permissionItemArgs:f.permissionItemArgs,fromPermissionWrapper:j,renderStyle:"permissionItem"})]}):null}},564256:(e,s,i)=>{i.d(s,{Z:()=>u});i(667294);var t=()=>i(142735),n=()=>i(846550),o=()=>i(890085),r=()=>i(788860),a=()=>i(960516),l=i(785893);function m(e){const{teamName:s,isCompact:i}=e;return i?(0,l.jsx)(r()._H,{defaultMessage:"Teamspace guests",id:"blockPermissionsSettings.permissionItem.teamGuestAccess.compact"}):s?(0,l.jsx)(r()._H,{defaultMessage:"Teamspace guests of {teamName}",id:"blockPermissionsSettings.permissionItem.teamGuestAccess",values:{teamName:s}}):(0,l.jsx)(r()._H,{id:"blockPermissionsSettings.permissionItem.teamspaceGuestsTeamName.hidden",defaultMessage:"Teamspace guests of a private teamspace"})}function d(e){let{teamGuestsCount:s,isCompact:i,isRedesignEnabled:t}=e;return i&&!t||0===s?null:(0,l.jsx)(r()._H,{defaultMessage:"{membersCount, plural, one {{membersCount} person} other {{membersCount} people}}",id:"blockPermissionsSettings.teamGuestPermission.subtitle",values:{membersCount:s}})}function c(e){const{teamName:s}=e,i=(0,n().yK)((()=>({tooltip:{whiteSpace:"normal",maxWidth:240}})),[]);return s?(0,l.jsx)("div",{style:i.tooltip,children:(0,l.jsx)(r()._H,{defaultMessage:"Applies to all teamspace guests of {teamName}.",values:{teamName:s},id:"blockPermissionsSettings.teamGuestPermission.tooltip"})}):null}const u=function(e){let{store:s,blockTeamGuestPermission:r,isExternalTeam:u,fromPermissionWrapper:p,teamGuestsCount:g,permissionItemArgs:h}=e;const{isMobile:b}=(0,i(219727).Fy)(),f=(0,t().VK)((()=>(0,i(779733).wZ)()),[]),{permissionItem:v}=r,x=(0,t().VK)((()=>i(876822).default.state.currentSpaceStore),[]),y=(0,t().VK)((()=>{var e;return i(933868).bm(v)?v.team_id:null===(e=i(239482).VP(s))||void 0===e?void 0:e.id}),[v,s]),{teamStore:P,teamIsDefined:I,teamName:S,teamIcon:j}=(0,t().VK)((()=>{if(!x||!y)return{};const e=i(826955).zX.createChildStore(x,{table:i(306164).e0,id:y,spaceId:x.id});return null!=e&&e.isDefined()?{teamStore:e,teamIsDefined:null==e?void 0:e.isDefined(),teamName:e.getName(),teamIcon:e.getIcon()}:{}}),[x,y]),C=(0,t().VK)((()=>{if(g)return g;if(void 0!==P){const e=(0,i(91502).oT)(P);if(void 0!==e)return e.memberCountWithGuests-e.memberCount}}),[P,g]),_=!u,M=(0,n().yK)((()=>({container:{width:"100%"}})),[]);if(!P)return null;const w=j&&o().V2(j.icon)?o().mk(j.icon):"gray",k=j?{...j,icon:`/icons/user-circle_${w}.svg`}:void 0;return(0,l.jsx)("div",{style:M.container,className:i(247724).YHn,children:(0,l.jsx)(a().ZP,{isCompact:_,currentBlockStore:s,permissionItem:v,icon:f?(0,l.jsx)(i(98991).Z,{size:b&&f?a().xF:a().ZG}):I?(0,l.jsx)(i(383694).p,{disabled:!0,store:P,size:b&&f?a().xF:a().ZG,icon:k}):(0,i(464660).x)(),title:(0,l.jsx)(m,{teamName:S,isCompact:_}),nonInheritedTooltip:(0,l.jsx)(c,{teamName:S}),from:r.from,subtitle:I&&(0,l.jsx)(d,{teamGuestsCount:C??0,isCompact:_,isRedesignEnabled:f}),upgradeButtonName:"team_permission_item",fromPermissionWrapper:p,...h})})}},302656:(e,s,i)=>{i.d(s,{Z:()=>g});i(667294);var t=()=>i(219727),n=()=>i(142735),o=()=>i(846550),r=()=>i(306164),a=()=>i(788860),l=()=>i(777814),m=()=>i(960516),d=i(785893);function c(e){let{teamName:s,isCompact:i,isRedesignEnabled:t}=e;return i&&t?(0,d.jsx)(a()._H,{defaultMessage:"Members",id:"blockPermissionsSettings.permissionItem.teamAccessV3"}):i&&s?(0,d.jsx)(a()._H,{defaultMessage:"Teamspace members",id:"blockPermissionsSettings.permissionItem.teamAccessV2"}):s?(0,d.jsx)(a()._H,{defaultMessage:"Members of {teamName}",id:"blockPermissionsSettings.permissionItem.teamAccess",values:{teamName:s}}):(0,d.jsx)(a()._H,{id:"blockPermissionsSettings.permissionItem.membersTeamName.hidden",defaultMessage:"Members of a private teamspace"})}function u(e){let{isCompact:s,membersCount:i,isRedesignEnabled:n,permissionItem:o}=e;const{isMobile:m}=(0,t().Fy)();return s&&!n||0===i?null:m&&n&&o?(0,d.jsxs)("div",{children:[(0,d.jsx)(a()._H,{defaultMessage:"{membersCount, plural, one {{membersCount} person} other {{membersCount} people}}",id:"blockPermissionsSettings.teamMembersPermission.subtitle",values:{membersCount:i}})," · ",(0,d.jsx)(a()._H,{...(0,l().M)({type:o.type,role:o.role,table:r().e0,isRemovable:!1,isCurrentUser:!1,isRedesignEnabled:!0}).label})]}):(0,d.jsx)(a()._H,{defaultMessage:"{membersCount, plural, one {{membersCount} person} other {{membersCount} people}}",id:"blockPermissionsSettings.teamMembersPermission.subtitle",values:{membersCount:i}})}function p(e){const{teamName:s}=e,i=(0,o().yK)((()=>({tooltip:{whiteSpace:"normal",maxWidth:240}})),[]);return s?(0,d.jsx)("div",{style:i.tooltip,children:(0,d.jsx)(a()._H,{defaultMessage:"Applies to all owners and members of {teamName}.",values:{teamName:s},id:"blockPermissionsSettings.teamPermission.tooltip"})}):null}const g=function(e){let{store:s,blockTeamPermission:a,isExternalTeam:l,fromPermissionWrapper:g,teamMembersCount:h,permissionItemArgs:b}=e;const{isMobile:f}=(0,t().Fy)(),v=(0,n().VK)((()=>(0,i(779733).wZ)()),[]),{permissionItem:x}=a,y=(0,n().VK)((()=>i(876822).default.state.currentSpaceStore),[]),P=(0,n().VK)((()=>{var e;return i(933868).zU(x)?x.team_id:null===(e=i(239482).VP(s))||void 0===e?void 0:e.id}),[x,s]),{teamStore:I,teamIsDefined:S,teamName:j}=(0,n().VK)((()=>{if(!y||!P)return{};const e=i(826955).zX.createChildStore(y,{table:r().e0,id:P,spaceId:y.id});return{teamStore:e,teamIsDefined:null==e?void 0:e.isDefined(),teamName:null==e?void 0:e.getName()}}),[y,P]),C=!l,_=(0,n().VK)((()=>{return h||(void 0!==I?null===(e=(0,i(91502).oT)(I))||void 0===e?void 0:e.memberCount:void 0);var e}),[I,h]),M=(0,o().yK)((()=>({container:{width:"100%"}})),[]);return I?(0,d.jsx)("div",{style:M.container,className:i(247724).YHn,children:(0,d.jsx)(m().ZP,{isCompact:C,currentBlockStore:s,permissionItem:a.permissionItem,from:a.from,icon:v?(0,d.jsx)(i(98991).Z,{size:f&&v?m().xF:m().ZG}):S?(0,d.jsx)(i(383694).p,{disabled:!0,store:I,size:f&&v?m().xF:m().ZG}):(0,i(464660).x)(),title:(0,d.jsx)(c,{teamName:j,isCompact:C,isRedesignEnabled:v}),nonInheritedTooltip:(0,d.jsx)(p,{teamName:(0,d.jsx)(i(525496).Z,{store:I,useInvertedColors:!0})}),subtitle:S&&(0,d.jsx)(u,{membersCount:_??0,isCompact:C,isRedesignEnabled:v,permissionItem:a.permissionItem}),upgradeButtonName:"team_permission_item",fromPermissionWrapper:g,...b})}):null}},874977:(e,s,i)=>{i.d(s,{Z:()=>x});i(241792),i(667294);var t=()=>i(219727),n=()=>i(142735),o=()=>i(846550),r=()=>i(306164),a=()=>i(989478),l=()=>i(788860),m=()=>i(777814),d=()=>i(464660),c=()=>i(826955),u=()=>i(634015),p=()=>i(960516),g=i(785893);function h(e){const{store:s,teamOwners:i,teamStore:t,teamName:n}=e;if(n){const e=i.map((e=>c().U6.createChildStore(s,{table:a().KJ,id:e})));return(0,g.jsx)(u().n,{teamStore:t,ownerStores:e})}return(0,d().x)()}function b(e){let{teamName:s,isCompact:i,isRedesignEnabled:t}=e;return i&&t?(0,g.jsx)(l()._H,{defaultMessage:"Owners",id:"blockPermissionsSettings.permissionItem.teamOwnerAccessV3"}):i&&s?(0,g.jsx)(l()._H,{defaultMessage:"Teamspace owners",id:"blockPermissionsSettings.permissionItem.teamOwnerAccessV2",values:{teamName:s}}):s?(0,g.jsx)(l()._H,{defaultMessage:"Owners of {teamName}",id:"blockPermissionsSettings.permissionItem.teamOwnerAccess",values:{teamName:s}}):(0,g.jsx)(l()._H,{id:"blockPermissionsSettings.permissionItem.teamName.hidden",defaultMessage:"Owners of a private teamspace"})}function f(e){let{teamOwnersCount:s,isCompact:i,isRedesignEnabled:n,permissionItem:o}=e;const{isMobile:a}=(0,t().Fy)();return i&&!n||0===s?null:a&&n&&o?(0,g.jsxs)("div",{children:[(0,g.jsx)(l()._H,{defaultMessage:"{teamOwnersCount, plural, one {{teamOwnersCount} person} other {{teamOwnersCount} people}}",id:"blockPermissionsSettings.teamOwnerPermission.subtitle",values:{teamOwnersCount:s}})," · ",(0,g.jsx)(l()._H,{...(0,m().M)({type:o.type,role:o.role,table:r().e0,isRemovable:!1,isCurrentUser:!1,isRedesignEnabled:!0}).label})]}):(0,g.jsx)(l()._H,{defaultMessage:"{teamOwnersCount, plural, one {{teamOwnersCount} person} other {{teamOwnersCount} people}}",id:"blockPermissionsSettings.teamOwnerPermission.subtitle",values:{teamOwnersCount:s}})}function v(e){const{teamName:s}=e,i=(0,o().yK)((()=>({tooltip:{whiteSpace:"normal",maxWidth:240}})),[]);return s?(0,g.jsx)("div",{style:i.tooltip,children:(0,g.jsx)(l()._H,{defaultMessage:"Applies to all owners of {teamName}",values:{teamName:s},id:"blockPermissionsSettings.teamOwnerPermission.tooltip"})}):null}const x=function(e){let{store:s,blockTeamOwnerPermission:a,isExternalTeam:l,fromPermissionWrapper:m,teamOwnersCount:d,permissionItemArgs:u}=e;const{isMobile:x}=(0,t().Fy)(),y=(0,n().VK)((()=>(0,i(779733).wZ)()),[]),{permissionItem:P}=a,I=(0,n().VK)((()=>i(876822).default.state.currentSpaceStore),[]),S=(0,n().VK)((()=>{var e;return i(933868).LW(P)?P.team_id:null===(e=i(239482).VP(s))||void 0===e?void 0:e.id}),[P,s]),{teamStore:j,teamName:C,teamOwners:_}=(0,n().VK)((()=>{if(!I||!S)return{undefined:void 0};const e=c().zX.createChildStore(I,{table:r().e0,id:S,spaceId:I.id});return{teamStore:e,teamName:e.getName(),teamOwners:e.getOwnerUserIds()}}),[I,S]),M=!l,w=(0,n().VK)((()=>{return d||(void 0!==j?null===(e=(0,i(91502).oT)(j))||void 0===e?void 0:e.ownerCount:void 0);var e}),[j,d]),k=(0,o().yK)((()=>({container:{width:"100%"}})),[]);return j?(0,g.jsx)("div",{style:k.container,className:i(247724).ZmO,children:(0,g.jsx)(p().ZP,{isCompact:M,currentBlockStore:s,permissionItem:a.permissionItem,from:a.from,icon:y?(0,g.jsx)(i(98991).Z,{size:x&&y?p().xF:p().ZG}):(0,g.jsx)(h,{store:s,teamName:C,teamStore:j,teamOwners:_}),title:(0,g.jsx)(b,{teamName:C,isCompact:M,isRedesignEnabled:y}),nonInheritedTooltip:(0,g.jsx)(v,{teamName:(0,g.jsx)(i(525496).Z,{store:j,useInvertedColors:!0})}),subtitle:(0,g.jsx)(f,{teamOwnersCount:w??0,isCompact:M,isRedesignEnabled:y,permissionItem:a.permissionItem}),upgradeButtonName:"team_owner_permission_item",fromPermissionWrapper:m,...u})}):null}},564735:(e,s,i)=>{i.d(s,{Z:()=>p});var t=i(667294),n=()=>i(219727),o=()=>i(142735),r=()=>i(846550),a=()=>i(788860),l=()=>i(668001),m=()=>i(777814),d=i(785893);function c(e){let{teamName:s,isRedesignEnabled:i}=e;return s?i?(0,d.jsx)(a()._H,{defaultMessage:"People in {teamName}",id:"blockPermissionsSettings.permissionItem.teamspaceAccessV2",values:{teamName:s}}):(0,d.jsx)(a()._H,{defaultMessage:"Everyone at {teamName}",id:"blockPermissionsSettings.permissionItem.teamspaceAccess",values:{teamName:s}}):i?(0,d.jsx)(a()._H,{defaultMessage:"People in a private teamspace",id:"blockPermissionsSettings.permissionItem.teamspace.hiddenV2"}):(0,d.jsx)(a()._H,{defaultMessage:"Everyone at a private teamspace",id:"blockPermissionsSettings.permissionItem.teamspace.hidden"})}function u(e){let{membersCount:s,isRedesignEnabled:i,teamPermissionItem:t}=e;const{isMobile:o}=(0,n().Fy)(),c=(0,r().yK)((e=>({container:{display:"flex",alignItems:"center",gap:2}})),[]),u=s?(0,d.jsx)("div",{children:(0,d.jsx)(a()._H,{defaultMessage:"{membersCount, plural, one {{membersCount} person} other {{membersCount} people}}",id:"blockPermissionsSettings.teamPermission.memberCount.subtitle",values:{membersCount:s}})}):(0,d.jsxs)("div",{style:c.container,children:[(0,d.jsx)(l().Z,{style:{height:12,width:14,borderRadius:4,marginRight:2,marginLeft:2}}),(0,d.jsx)(a()._H,{defaultMessage:"people",id:"blockPermissionsSettings.teamPermission.subtitle.people",values:{membersCount:s}})]});return i?o?(0,d.jsxs)("div",{style:c.container,children:[u,t&&(0,d.jsxs)(d.Fragment,{children:[" · ",(0,d.jsx)(a()._H,{...(0,m().M)({type:t.type,role:t.role,table:"block",isRemovable:!1,isCurrentUser:!1,isRedesignEnabled:!0}).label})]})]}):(0,d.jsxs)("div",{style:c.container,children:[(0,d.jsx)(a()._H,{defaultMessage:"Teamspace",id:"blockPermissionsSettings.teamPermission.subtitle.teamspace"})," · ",u]}):u}const p=function(e){let{store:s,blockTeamMemberPermission:l,blockTeamOwnerPermission:p,blockTeamGuestPermission:g,permissionItemArgs:h}=e;const b=(0,n().O7)(),f=b.device.isMobile,[v,x]=(0,t.useState)(!1),[y,P]=(0,t.useState)(!1),{permissionItem:I}=l,S=(0,o().VK)((()=>i(876822).default.state.currentSpaceStore),[]),j=(0,o().VK)((()=>(0,i(779733).wZ)()),[]),C=(0,o().VK)((()=>{var e;return i(933868).zU(I)?I.team_id:null===(e=i(239482).VP(s))||void 0===e?void 0:e.id}),[I,s]),_=p.permissionItem.role,M=I.role,w={type:"display_only_overview_permission",role:_===M?M:"none"===M||"none"===_?"limited":"access"},{teamStore:k,teamIsDefined:T,teamName:R}=(0,o().VK)((()=>{if(!S||!C)return{undefined:void 0};const e=i(826955).zX.createChildStore(S,{table:i(306164).e0,id:C,spaceId:S.id});return{teamStore:e,teamIsDefined:null==e?void 0:e.isDefined(),teamName:null==e?void 0:e.getName()}}),[S,C]),Z=(0,o().VK)((()=>{if(void 0!==k)return(0,i(91502).oT)(k)}),[k]),{membersCount:N,totalMembersAndGuestsCount:V,ownersCount:H,teamGuestsCount:K}=void 0!==Z?{membersCount:Z.memberCount,totalMembersAndGuestsCount:Z.memberCountWithGuests,ownersCount:Z.ownerCount,teamGuestsCount:Z.memberCountWithGuests-Z.memberCount}:{membersCount:0,totalMembersAndGuestsCount:void 0,ownersCount:0,teamGuestsCount:0},B=(0,o().VK)((()=>{if(!S)return!1;return!S.getDisableTeamGuests()&&((null==k||!k.isDefault())&&(0,i(286338).F$)())}),[S,k]),L=(0,t.useCallback)((()=>x(!0)),[]),D=(0,t.useCallback)((()=>x(!1)),[]),A=(0,t.useCallback)((()=>{const e=!1===y;if(P(!y),e){if(!k)return;i(912732).dS(b,{share_menu_session_id:i(681832).default.state.sessionId,type:"team",team_id:k.id})}}),[b,y,P,k]),O=(0,r().yK)((e=>({icon:{width:10,marginLeft:4,fill:e.lightIconColor},teamPermissionsContainer:{paddingLeft:16,display:y?"block":"none"},roleButton:{marginRight:-8,color:e.mediumTextColor,fontSize:(0,i(845465).fV)({environment:b,isRedesignEnabled:j})},mobileTitleContainer:{display:"flex",alignItems:"center"},mobileTextContainer:{dislay:"block",overflow:"hidden"},mobileChevronIcon:{marginLeft:4,fill:e.icon.secondary,transform:`rotate(${y?90:0}deg)`,transition:"transform 150ms ease"}})),[y,b,j]),U=j?null:(0,i(384697).R)(O.icon);if(!k)return null;const W=T?(0,d.jsx)(i(269089).Z,{store:k}):(0,i(464660).x)(),E=j?(0,d.jsx)(i(277939).Z,{expanded:y,hovered:v,onClick:A,children:W}):W;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(i(960516).ZP,{currentBlockStore:s,permissionItem:w,from:l.from,onMouseEnter:L,onMouseLeave:D,icon:E,title:f&&j?(0,d.jsxs)("div",{style:O.mobileTitleContainer,children:[(0,d.jsx)("div",{style:O.mobileTextContainer,children:(0,d.jsx)(c,{teamName:R,isRedesignEnabled:j})}),(0,d.jsx)("div",{style:O.mobileChevronIcon,children:(0,i(696347).o)({height:12,width:12})})]}):(0,d.jsx)(c,{teamName:R,isRedesignEnabled:j}),subtitle:T&&(0,d.jsx)(u,{membersCount:V,isRedesignEnabled:j,teamPermissionItem:w}),nonInheritedTooltip:j?(0,d.jsx)(a()._H,{id:"TeamPermissionItem.access",defaultMessage:"People in the {inlineIconAndName} teamspace",values:{inlineIconAndName:(0,d.jsx)(i(525496).Z,{store:k,useInvertedColors:!0})}}):null,upgradeButtonName:"team_permission_item",onClick:A,permissionRoleSelect:y?U:(0,d.jsx)(m().d,{type:w.type,role:w.role,icon:i(493155).P,disabled:!0,buttonStyle:O.roleButton,table:i(396136).iU,isCurrentUser:!1,from:"shareMenu"}),isCollapsible:!0,...h}),(0,d.jsxs)("div",{style:O.teamPermissionsContainer,children:[p&&(0,d.jsx)(i(874977).Z,{store:s,permissionItemArgs:h,blockTeamOwnerPermission:p,teamOwnersCount:H,fromPermissionWrapper:"expandable_permission"}),l&&(0,d.jsx)(i(302656).Z,{store:s,permissionItemArgs:h,blockTeamPermission:l,teamMembersCount:N,fromPermissionWrapper:"expandable_permission"}),B&&g&&(0,d.jsx)(i(564256).Z,{store:s,permissionItemArgs:h,blockTeamGuestPermission:g,teamGuestsCount:K,fromPermissionWrapper:"expandable_permission"})]})]})}},277939:(e,s,i)=>{i.d(s,{Z:()=>r});var t=i(667294),n=i(785893);function o(e){let{onClick:s,hovered:o,expanded:r,children:a}=e;const l=(0,i(219727).Fy)().isMobile,[m,d]=t.useState(!1),c=(0,t.useCallback)((()=>d(!0)),[]),u=(0,t.useCallback)((()=>d(!1)),[]),p=(0,i(846550).yK)((e=>{const s=(0,i(845465).lw)({theme:e,size:26,useLargeBorderRadius:!0,useLightBackgroundColor:!0}),t={position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",top:"auto",left:"auto",opacity:o?1:0,transition:"opacity 150ms ease, background 150ms ease",...s,width:24,height:24,borderRadius:4};return{container:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},chevronIconContainer:{background:"unset"},chevronButton:{...t,background:"unset"},chevronContainerHovered:{...t,background:s.background},childrenContainer:{opacity:o?0:1,transition:"opacity 200ms"},chevronIconInnerContainer:{background:"unset",height:24,width:24,borderRadius:4},chevronIcon:{transform:`rotate(${r?90:0}deg)`,transition:"transform 150ms ease",width:16,height:16}}}),[r,o]);return l?(0,n.jsx)(n.Fragment,{children:a}):(0,n.jsxs)("div",{style:p.container,onMouseEnter:c,onMouseLeave:u,children:[(0,n.jsx)(i(154186).Z,{disabled:!1,style:m?p.chevronContainerHovered:p.chevronButton,onClick:s,children:(0,n.jsx)(i(998306).Z,{type:"square",iconType:"function",iconFn:i(696347).o,containerStyle:p.chevronIconInnerContainer,iconStyle:p.chevronIcon,isMobile:l})}),(0,n.jsx)("div",{style:p.childrenContainer,children:a})]})}const r=t.memo(o)},724902:(e,s,i)=>{i.d(s,{Z:()=>l});var t=i(667294),n=()=>i(960516),o=()=>i(998306),r=i(785893);function a(e){let{groupIcon:s,isRedesignEnabled:t,spaceId:a}=e;const{isMobile:l}=(0,i(219727).Fy)(),m=(0,i(846550).yK)((e=>({icon:{fill:e.icon.secondary}})),[]);return s&&t&&a?(0,r.jsx)(o().Z,{type:"circle",iconType:"recordIcon",icon:{icon:s,pointer:{table:i(255933).bx,id:a}},isMobile:l}):t?(0,r.jsx)(o().Z,{type:"circle",iconType:"function",iconFn:i(54634).C,iconStyle:m.icon,isMobile:l}):(0,r.jsx)(i(98991).Z,{size:l&&t?n().xF:n().ZG})}const l=t.memo(a)},154187:(e,s,i)=>{i.d(s,{g:()=>g});i(267602),i(470928);var t=i(667294),n=()=>i(219727),o=()=>i(142735),r=()=>i(306164),a=()=>i(788860),l=()=>i(696459),m=()=>i(140303),d=()=>i(876822),c=()=>i(467806),u=()=>i(826955),p=i(785893);function g(e){let{permissionItem:s}=e;const i=(0,n().O7)(),{organizationOwnerRecordCache:g}=(0,t.useContext)(m().V),h=(0,o().VK)((()=>d().default.state.currentSpaceStore),[]),b=(0,o().VK)((()=>null==h?void 0:h.getName()),[h]),f=(0,o().VK)((()=>{var e;if("group_permission"!==s.type)return;const i=s.group_id;return null===(e=c().Z.state.permissionGroupsAndMemberCounts.find((e=>e.group.group_id===i)))||void 0===e?void 0:e.group.name}),[s]),v=(0,o().VK)((()=>{if("explicit_team_permission"!==s.type&&"explicit_team_owner_permission"!==s.type)return;const e=s.team_id;return new(u().zX)(i,{id:e,table:r().e0},{inMemoryRecordCache:g}).getName()}),[s,i,g]);switch(s.type){case"space_permission":return h?(0,p.jsx)(a()._H,{id:"searchTargetPermissionItem.spacePermission",defaultMessage:"{name} workspace",values:{name:b}}):null;case"explicit_team_permission":case"team_permission":return(0,p.jsx)(a()._H,{id:"searchTargetPermissionItem.teamPermission",defaultMessage:"{name} teamspace",values:{name:v}});case"team_owner_permission":case"explicit_team_owner_permission":return(0,p.jsx)(a()._H,{id:"searchTargetPermissionItem.teamOwnersPermission",defaultMessage:"{name} teamspace",values:{name:v}});case"explicit_team_guest_permission":return(0,p.jsx)(a()._H,{id:"searchTargetPermissionItem.teamGuestsPermission",defaultMessage:"Team guests"});case"group_permission":return f?(0,p.jsx)(a()._H,{id:"searchTargetPermissionItem.groupPermission",defaultMessage:"{groupName} group",values:{groupName:f}}):(0,p.jsx)(a()._H,{id:"searchTargetPermissionItem.groupPermissionWithoutName",defaultMessage:"Group"});case"user_permission":case"bot_permission":case"exclusive_user_permission":case"public_permission":case"deleted_permission":case"restricted_permission":case"trusted_domain_permission":return null;default:return(0,l().P)(s),null}}},423470:(e,s,i)=>{i.d(s,{w:()=>ne,Z:()=>me});i(122556),i(582845),i(250570),i(533019),i(721473),i(788208),i(22624),i(267602),i(916054),i(653476),i(470928),i(30005),i(241792);var t=i(667294),n=()=>i(219727),o=()=>i(142735),r=()=>i(846550),a=()=>i(801812),l=()=>i(741633),m=()=>i(933868),d=()=>i(396136),c=()=>i(989478),u=()=>i(499110),p=()=>i(788860),g=()=>i(513670),h=()=>i(912732),b=()=>i(824462),f=()=>i(98148),v=()=>i(122479),x=()=>i(907099),y=()=>i(333264),P=()=>i(591914),I=()=>i(520849),S=()=>i(876822),j=()=>i(467806),C=()=>i(826955),_=()=>i(845465),M=()=>i(681832),w=()=>i(495712),k=()=>i(65404),T=()=>i(98774),R=()=>i(899018),Z=()=>i(17571),N=()=>i(850204),V=()=>i(564256),H=()=>i(302656),K=()=>i(874977),B=()=>i(564735),L=()=>i(943620),D=()=>i(384241),A=()=>i(777814),O=()=>i(239482),U=()=>i(960516),W=i(785893);function E(e){let{currentPageStore:s,isExpanded:a,numberOfPeopleInvited:l,inheritedPermissionRole:m,permissionItemArgs:c,onToggle:u}=e;const g=(0,n().O7)(),h=g.device.isMobile,b=(0,o().VK)((()=>(0,O().uJ)(s)[1]),[s]),[f,v]=t.useState(!1),x=(0,o().VK)((()=>{const e=(0,O().uJ)(s)[1];if(e instanceof C().zX)return{icon:(0,W.jsx)(i(383694).p,{disabled:!0,store:e,size:h?U().xF:U().ZG}),title:e.getName()};if(e instanceof C().G){if("page"===e.getType()){const s=e.isEmptyPage();return{icon:(0,W.jsx)(L().Z,{disabled:!0,icon:e.getIcon(),size:20,isEmptyPage:s}),title:(0,W.jsx)(D().Z,{shouldWrap:!0,store:e}),fromTable:d().iU,fromId:e.id}}return"collection_view"===e.getType()||"collection_view_page"===e.getType()?{icon:(0,W.jsx)(L().Z,{disabled:!0,icon:e.getIcon(),size:20,isEmptyPage:e.isDefined()}),title:(0,W.jsx)(D().Z,{shouldWrap:!0,store:e}),fromTable:d().iU,fromId:e.id}:void 0}}),[s,h]),y=(0,t.useCallback)((()=>v(!0)),[]),P=(0,t.useCallback)((()=>v(!1)),[]),I=(0,r().yK)((e=>({chevronIcon:{width:10,marginLeft:4,fill:e.lightIconColor},mobileTitleContainer:{display:"flex",alignItems:"center"},mobileTextContainer:{dislay:"block",overflow:"hidden"},mobileChevronIcon:{marginLeft:4,fill:e.icon.secondary,transform:`rotate(${a?90:0}deg)`,transition:"transform 150ms ease"},roleButton:{marginRight:-8,color:e.mediumTextColor,fontSize:(0,_().fV)({environment:g,isRedesignEnabled:!0})},selectContainer:{opacity:a?0:1},loadingSubtitleContainer:{display:"flex",alignItems:"center"},placeholderSubtitle:{height:12,width:14,borderRadius:4,marginRight:2}})),[g,a]),S={type:"display_only_inherited_permission",role:m??"access"};return x?(0,W.jsx)(U().ZP,{icon:x.icon&&(0,W.jsx)(i(277939).Z,{onClick:u,expanded:a,hovered:f,children:(0,W.jsx)(i(998306).Z,{type:"circle",iconType:"element",element:x.icon,isMobile:h})}),currentBlockStore:s,permissionItem:S,onMouseEnter:y,onMouseLeave:P,from:{table:d().iU,blockId:x.fromId?x.fromId:s.id},title:h?(0,W.jsxs)("div",{style:I.mobileTitleContainer,children:[(0,W.jsx)("div",{style:I.mobileTextContainer,children:(0,W.jsx)(p()._H,{id:"permissionsListV2.inheritedPermissions",defaultMessage:"People invited to {title}",values:{title:x.title}})}),(0,W.jsx)("div",{style:I.mobileChevronIcon,children:(0,i(696347).o)({height:12,width:12})})]}):(0,W.jsx)(p()._H,{id:"permissionsListV2.inheritedPermissions",defaultMessage:"People invited to {title}",values:{title:x.title}}),subtitle:l?(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(p()._H,{id:"inheritedPermissionItem.numberOfPeopleInvited",defaultMessage:"{numberOfPeopleInvited, plural, one {{numberOfPeopleInvited} person} other {{numberOfPeopleInvited} people}}",values:{numberOfPeopleInvited:l}}),h&&(0,W.jsxs)(W.Fragment,{children:[" · ",(0,W.jsx)(p()._H,{...(0,A().M)({type:S.type,role:S.role,table:"block",isRemovable:!1,isCurrentUser:!1,isRedesignEnabled:!0}).label})]})]}):(0,W.jsxs)("div",{style:I.loadingSubtitleContainer,children:[(0,W.jsx)(i(668001).Z,{style:I.placeholderSubtitle}),(0,W.jsx)(p()._H,{id:"inheritedPermissionItem.subtitle.people",defaultMessage:"people",values:{numberOfPeopleInvited:l}}),h&&(0,W.jsxs)(W.Fragment,{children:[" · ",(0,W.jsx)(p()._H,{...(0,A().M)({type:S.type,role:S.role,table:"block",isRemovable:!1,isCurrentUser:!1,isRedesignEnabled:!0}).label})]})]}),inheritedTooltip:l&&l>0?(0,W.jsx)(p()._H,{id:"inheritedPermissionItem.numberOfPeopleInvited.tooltip",defaultMessage:"{numberOfPeopleInvited, plural, one {{numberOfPeopleInvited} person has } other {{numberOfPeopleInvited} people have}} access through the parent page {inlineIconAndName}",values:{numberOfPeopleInvited:l,inlineIconAndName:(0,W.jsx)(i(525496).Z,{store:b,useInvertedColors:!0})}}):null,upgradeButtonName:"team_permission_item",onClick:u,permissionRoleSelect:(0,W.jsx)("div",{style:I.selectContainer,children:(0,W.jsx)(A().d,{type:S.type,role:S.role,icon:i(493155).P,disabled:!0,buttonStyle:I.roleButton,table:d().iU,isCurrentUser:!1,from:"shareMenu"})}),isCollapsible:!0,...c}):null}const F=t.memo(E);var z=()=>i(732811),G=()=>i(696459),q=()=>i(707513),Y=()=>i(92175),X=()=>i(67961),$=()=>i(466970);const J=(0,p().vU)({commenter:{id:"permissionsLevelBanner.commenter.labelV2",defaultMessage:"You can only comment on this page"},reader:{id:"permissionsLevelBanner.reader.labelV2",defaultMessage:"You can only view this page"}});function Q(e){let{store:s,role:i}=e;const o=(0,n().O7)(),{isMobile:a}=(0,n().Fy)(),[l,m]=(0,t.useState)("noRequest"),d=(0,$().E)("share_menu_inheritance_banner");(0,z().K)((()=>{h().hY(o,{share_menu_session_id:M().default.state.sessionId,role:i})}));const c=(0,r().yK)((e=>({container:{...(0,_().S2)({theme:e,inheritanceBannerEnabled:d,isMobile:a}),display:"flex",alignItems:"center",justifyContent:"space-between"},bannerBodyContainer:{display:"flex",alignItems:"center"},bannerLabel:{display:"flex"},pendingAccessRequestLabel:{color:e.lightTextColor},accessRequestLabel:{color:e.text.uiBluePrimary},accessRequestButton:{display:"flex",alignItems:"center",justifyContent:"center",fontWeight:q().Ue.medium,flexShrink:0,borderRadius:4,paddingLeft:6,paddingRight:6,margin:-4,height:24}})),[a,d]),u=(0,t.useCallback)((async()=>{var e;if("reader"!==i&&"comment_only"!==i)return;const t=await b().callApi({eventName:"requestAccess",environment:o,data:{type:"current-actor-to-block",block:{id:s.id,spaceId:s.getSpaceId()},attributes:{origin_type:"share_menu",add_permissions_on_approval:!1,role:"read_and_write",existing_permissions:i},message:void 0}});"success"===t.type&&t.data.request?(m("requested"),h().dU(o,{request_access_type:"page",previous_access_level:i,requested_access_level:"read_and_write",requestId:t.data.requestId})):"failed"===t.type&&"UserRateLimitResponse"===(null===(e=t.body)||void 0===e?void 0:e.name)&&m("rateLimited")}),[o,i,s]),g=function(e){switch(e){case"comment_only":return J.commenter;case"reader":return J.reader;case"editor":case"read_and_write":case"none":case"membership_admin":case"content_only_editor":return null;default:(0,G().t1)(e)}}(i);return g?(0,W.jsxs)("div",{style:c.container,children:[(0,W.jsx)("div",{style:c.bannerBodyContainer,children:(0,W.jsx)(X().Z,{style:c.bannerLabel,isMultiline:!0,isSmall:d,children:(0,W.jsx)(p()._H,{...g})})}),(0,W.jsx)(Y().Z,{isBlue:!0,style:c.accessRequestButton,onClick:u,disabled:"noRequest"!==l,children:(0,W.jsx)(X().Z,{isSmall:d,style:"noRequest"===l?c.accessRequestLabel:c.pendingAccessRequestLabel,children:"requested"===l?(0,W.jsx)(p()._H,{defaultMessage:"Requested edit access",id:"permissionsLevelBanner.requestPermission.accessRequestedV2"}):"rateLimited"===l?(0,W.jsx)(p()._H,{defaultMessage:"Try again later",id:"permissionsLevelBanner.requestPermission.rateLimited"}):(0,W.jsx)(p()._H,{defaultMessage:"Request edit access",id:"permissionsLevelBanner.requestPermission.requestEdit"})})})]}):null}var ee=()=>i(487780);function se(e){let{dividerType:s,scrollerStore:i}=e;const n=(0,o().VK)((()=>(null==i?void 0:i.state.elementRef)??{current:null}),[i]),a=(0,y().Lw)(n),l=(0,y().j)(n),m=(0,y().$0)(n),d=(0,t.useMemo)((()=>{if("top"===s)return l>0;return Math.ceil(l+m+10)<Math.floor(a)}),[s,m,a,l]),c=(0,r().yK)((e=>({divider:{opacity:d?1:0,height:1,borderTop:`1px solid ${e.regularDividerColor}`,padding:"0px 16px",transition:"opacity 200ms",margin:"0px 16px"}})),[d]);return(0,W.jsx)("div",{style:c.divider})}function ie(e){let{store:s,calculatedPermissions:i,permissionItemArgs:t}=e;const{showTeamPermission:n,mostPermissiveAncestorTeamGuestItem:o,mostPermissiveAncestorTeamMemberItem:r,mostPermissiveAncestorTeamOwnerItem:a,pagePermissionUIModel:l}=i;return(0,W.jsxs)(W.Fragment,{children:[n&&a&&r&&(0,W.jsx)(B().Z,{store:s,blockTeamOwnerPermission:a,blockTeamMemberPermission:r,blockTeamGuestPermission:o,permissionItemArgs:t}),re({store:s,mostPermissiveTeamPermissions:l.mostPermissiveTeamPermissions,permissionItemArgs:t})]})}function te(e){const{store:s,permissionItemArgs:i,inheritedPagePermissions:o}=e,l=(0,n().O7)(),[m,d]=t.useState(!1),{mostPermissiveGroupPermissions:c,mostPermissiveUserPermissions:u}=o,p=function(e){var s,i;const{mostPermissiveGroupPermissions:t,mostPermissiveUserPermissions:n}=e;let o="access";const r=(null===(s=n[0])||void 0===s?void 0:s.permissionItem.role)||(null===(i=t[0])||void 0===i?void 0:i.permissionItem.role)||"access",a=!(n.length>0)||n.every((e=>e.permissionItem.role===r)),l=!(t.length>0)||t.every((e=>e.permissionItem.role===r));a&&l&&(o=r);return o}(o),[{value:g}]=(0,a().r5)((async()=>{const e=S().default.state.currentSpaceStore;return e?await async function(e){let{environment:s,mostPermissiveUserPermissions:i,mostPermissiveGroupPermissions:t,spaceStore:n}=e;const o=new Set;for(const{permissionItem:a}of i)o.add(a.user_id);const r=new Set;for(const{permissionItem:a}of t)r.add(a.group_id);if(r.size>0){const e=await b().callApi({eventName:"getSpacePermissionGroupMembers",environment:s,data:{groupIds:Array.from(r),spaceId:n.id}});if("success"===e.type)for(const[,{userIds:s}]of Object.entries(e.data.groupUsersMap)){const e=s.filter((e=>{var s;return null===(s=(0,P()._P)(n,e))||void 0===s?void 0:s.isMember()}));for(const s of e)o.add(s)}}return o.size}({environment:l,mostPermissiveUserPermissions:u,mostPermissiveGroupPermissions:c,spaceStore:e}):0}),[l,c,u]),f=le(o),v=(0,r().yK)((()=>({inheritedPagePermissionsContainer:f?{paddingLeft:_().w5}:{}})),[f]);return(0,W.jsxs)(W.Fragment,{children:[f&&(0,W.jsx)(F,{currentPageStore:s,isExpanded:m,onToggle:()=>{d((e=>!e)),h().dS(l,{share_menu_session_id:M().default.state.sessionId,type:"inherited_page"})},numberOfPeopleInvited:g??0,inheritedPermissionRole:p,permissionItemArgs:i}),m&&(0,W.jsx)("div",{style:v.inheritedPagePermissionsContainer,children:(0,W.jsx)(oe,{store:s,pagePermissions:o,numberPermissionsAlreadyRendered:0,permissionItemArgs:i,forceExpanded:!0,isInherited:!0})})]})}function ne(e){let{store:s,calculatedPermissions:i,permissionItemArgs:t}=e;const{showSpacePermission:n,mostPermissiveTrustedDomainItem:o,mostPermissiveSpaceItem:r,mostPermissivePublicItem:a,showSitePublicPermission:l,showTrustedDomainPermission:m,showRestrictedPermissionBanner:d}=i;return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(R().S0,{}),n&&(0,W.jsx)(N().Z,{store:s,spacePermission:r,publicPermission:a,trustedDomainPermission:o,showTrustedDomainPermission:m,permissionItemArgs:t,fromPermissionWrapper:"permission_list",isRestricted:d}),l&&a&&(0,W.jsx)(Z().W,{store:s,publicPermissionItem:a,permissionItemArgs:t})]})}function oe(e){const s=(0,p().YB)(),i=(0,o().VK)((()=>{const e=S().default.state.currentSpaceStore;return null!=e&&e.isDefined()?e.id:""}),[]),t=(0,n().O7)(),r=t.currentUser.id,{store:m,pagePermissions:d,numberPermissionsAlreadyRendered:h,permissionItemArgs:y,forceExpanded:P,isInherited:I}=e,{showUserPermissions:_,mostPermissiveGroupPermissions:M,mostPermissiveUserPermissions:R}=d,Z=(0,o().VK)((()=>(0,f().v)()),[]),[{value:N}]=(0,a().r5)((async()=>{const e=await b().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:t,data:{spaceId:i,userIds:R.map((e=>e.permissionItem.user_id))},headers:(0,l().Bb)({cellId:void 0,spaceId:i})});return"success"===e.type?e.data.userToGroupMap:{}}),[t,i,R],{debugName:"userToPermissionGroupIds",debounce:300,throttle:1e3}),V=(0,o().VK)((()=>{const e=_?function(e){const{mostPermissiveUserPermissions:s,spaceVisibleUserMap:i,userToPermissionGroupIds:t}=e,n={};return s.forEach((s=>{const o=(0,v().uY)({userId:s.permissionItem.user_id,store:e.store,userPermissionGroupIds:new Set((null==t?void 0:t[s.permissionItem.user_id])??[])}),r=C().U6.createChildStore(e.store,{table:c().KJ,id:s.permissionItem.user_id}),a=r.getModel();let l;r.isReady()&&a&&(l=(0,u().Nz)(e.intl,a)),n[s.permissionItem.user_id]=(0,W.jsx)(k().Z,{store:e.store,userPermission:s,selectFooter:(0,W.jsx)(ee().Ez,{targetName:l,targetType:"user",mostPermissivePermissions:o}),showInherited:!1,permissionItemArgs:e.permissionItemArgs,spaceVisibleUserMap:i,fromPermissionWrapper:"permission_list"},s.permissionItem.user_id)})),n}({store:m,mostPermissiveUserPermissions:R,permissionItemArgs:y,spaceVisibleUserMap:Z,userToPermissionGroupIds:N??{},intl:s}):{};return g().oA(Object.keys(e).map((i=>{const t=C().U6.createChildStore(m,{table:c().KJ,id:i}),n=t.getModel();if(t.isReady()&&n)return{title:(0,u().Nz)(s,n),isSelfPermission:Boolean(r)&&t.id===r,permissionItem:e[i]}})))}),[_,m,R,y,Z,s,r,N]),H=(0,o().VK)((()=>{const e=i?function(e){const{spaceId:s,mostPermissiveGroupPermissions:i,isInherited:t}=e,n={},o=new Set(j().Z.state.permissionGroupsAndMemberCounts.map((e=>e.group.group_id)));return i.forEach((i=>{const r=i.permissionItem.group_id;o.has(r)&&(n[r]=(0,W.jsx)(w().Z,{store:e.store,groupPermission:i,spaceId:s,showInherited:!1,permissionItemArgs:e.permissionItemArgs,fromPermissionWrapper:"permission_list",disableExpansion:t}))})),n}({store:m,spaceId:i,mostPermissiveGroupPermissions:M,permissionItemArgs:y,isInherited:I}):{};return Object.keys(e).map((i=>{const t=j().Z.state.permissionGroupsAndMemberCounts.find((e=>e.group.group_id===i));return{title:t?(0,x().kF)({intl:s,groupName:t.group.name}):"",isSelfPermission:!1,permissionItem:e[i]}}))}),[s,I,M,y,i,m]);V.sort(((e,s)=>e.isSelfPermission?-1:s.isSelfPermission?1:e.title.localeCompare(s.title))),H.sort(((e,s)=>e.title.localeCompare(s.title)));const K=[...V,...H].map((e=>{let{permissionItem:s}=e;return s})),B=K.length;if(0===B)return null;const L=Math.max(4,7-h);return!P&&B>L?(0,W.jsxs)(W.Fragment,{children:[K.slice(0,2),(0,W.jsx)(T().Z,{permissions:K.slice(2)})]}):(0,W.jsx)(W.Fragment,{children:K})}function re(e){const{store:s,mostPermissiveTeamPermissions:i,permissionItemArgs:t}=e;return i.map((e=>m().LW(e.permissionItem)?(0,W.jsx)(K().Z,{store:s,blockTeamOwnerPermission:e,isExternalTeam:!0,permissionItemArgs:t,fromPermissionWrapper:"permission_list"},`${e.permissionItem.team_id}.owner`):m().bm(e.permissionItem)?(0,W.jsx)(V().Z,{store:s,blockTeamGuestPermission:e,isExternalTeam:!0,permissionItemArgs:t,fromPermissionWrapper:"permission_list"},`${e.permissionItem.team_id}.teamGuest`):(0,W.jsx)(H().Z,{store:s,blockTeamPermission:e,isExternalTeam:!0,permissionItemArgs:t,fromPermissionWrapper:"permission_list"},`${e.permissionItem.team_id}.member`)))}function ae(e,s){return e.from.table===d().iU&&e.from.blockId===s.id}function le(e){return e.mostPermissiveUserPermissions.length>0||e.mostPermissiveGroupPermissions.length>0}const me=function(e){const s=(0,n().O7)(),{device:a}=s,l=a.isMobile,{store:d,permissionItemArgs:c,calculatedPermissions:u,showPermissionInheritanceBanner:p}=e,{sudoModeStore:b}=c,f=(0,o().qz)(void 0,i(561280).Z),{pagePermissionUIModel:x,showRestrictedPermissionBanner:y,showSpacePermission:P,showSitePublicPermission:S,showTeamPermission:j}=u,{inheritedPermissions:C,pagePermissions:_}=function(e){let{store:s,pagePermissionUIModel:i,currentUserId:t}=e;const{mostPermissiveGroupPermissions:n,mostPermissiveTeamPermissions:o,mostPermissiveUserPermissions:r}=i,[a,l]=g().uK(n,(e=>ae(e,s))),[m,d]=g().uK(r,(e=>ae(e,s)||e.permissionItem.user_id===t)),c={...i,mostPermissiveGroupPermissions:l,mostPermissiveTeamPermissions:[],mostPermissiveUserPermissions:d},u={...i,mostPermissiveGroupPermissions:a,mostPermissiveTeamPermissions:o,mostPermissiveUserPermissions:m};return{inheritedPermissions:c,pagePermissions:u}}({store:d,pagePermissionUIModel:x,currentUserId:s.currentUser.id}),M=le(_),w=le(C),k=(0,o().VK)((()=>!(0,i(333023).gi)({store:d})),[d]),T=a.isMobile?I().Z.None:I().Z.Y,R=(0,r().yK)((()=>({scroller:{paddingBottom:10,paddingLeft:l?20:0,paddingRight:l?20:0}})),[l]);(0,t.useEffect)((()=>{h().oE({environment:s,calculatedPermissions:u})}),[]);const Z=Number(P)+Number(S),N=Z+Number(j)+Number(w),V=(0,o().VK)((()=>e.showFooter??!a.isMobile??!0),[a.isMobile,e.showFooter]),H=(0,o().VK)((()=>{const e=(0,i(718959).B7)(s);if(!e)return;const t=(0,v().Dt)({userId:e.id,store:d}).role;return t&&(0,m().iC)(t)?t:void 0}),[s,d]),K=(0,o().VK)((()=>d.getSpaceId()),[d]),B=(0,i(815277).VX)({name:"block_read_and_write_role",spaceId:K,userId:s.currentUser.id}),L=(0,o().VK)((()=>!(!H||"none"===H)&&(B&&!m().J5(H))),[H,B]);return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(se,{dividerType:"top",scrollerStore:f}),(0,W.jsxs)(i(842574).Z,{type:T,style:R.scroller,store:f,children:[L&&H?(0,W.jsx)(Q,{store:d,role:H}):(0,W.jsx)(i(417235).Z,{store:d,showRestrictedPermissionBanner:y,showPermissionInheritanceBanner:p,sudoModeStore:b}),M&&(0,W.jsx)(oe,{store:d,pagePermissions:_,numberPermissionsAlreadyRendered:N,permissionItemArgs:c,forceExpanded:!(w||u.showTeamPermission)}),w&&(0,W.jsx)(te,{store:d,inheritedPagePermissions:C,permissionItemArgs:c}),(0,W.jsx)(ie,{store:d,calculatedPermissions:u,permissionItemArgs:c}),k&&(0,W.jsx)(i(995114).Z,{store:d})]}),(0,W.jsx)(se,{dividerType:"bottom",scrollerStore:f}),Z>0&&!a.isMobile&&(0,W.jsx)(ne,{store:d,calculatedPermissions:u,permissionItemArgs:c}),V&&(0,W.jsx)(i(942560).Z,{store:d,buttonPopupStore:e.buttonPopupStore,calculatedPermissions:u,permissionItemArgs:c})]})}},487780:(e,s,i)=>{i.d(s,{Ez:()=>M,ZP:()=>R});i(267602),i(653476);var t=i(667294),n=()=>i(142735),o=()=>i(846550),r=()=>i(528514),a=()=>i(933868),l=()=>i(396136),m=()=>i(989478),d=()=>i(788860),c=()=>i(696459),u=()=>i(666414),p=()=>i(67961),g=()=>i(527278),h=()=>i(876822),b=()=>i(826955),f=()=>i(495712),v=()=>i(65404),x=()=>i(154187),y=()=>i(182494),P=i(785893);function I(e){let{blockStore:s,permissionItem:i,inviteTarget:t,mostPermissivePermissions:n,spaceVisibleUserMap:o,permissionItemArgs:r,...a}=e;return"group"===t.type?(0,P.jsx)(j,{inviteTarget:t,blockStore:s,permissionItem:i,mostPermissivePermissions:n,permissionItemArgs:r,menuListItemProps:a}):"existingUser"===t.type?(0,P.jsx)(S,{inviteTarget:t,blockStore:s,permissionItem:i,mostPermissivePermissions:n,permissionItemArgs:r,spaceVisibleUserMap:o,menuListItemProps:a}):((0,c().P)(t),null)}function S(e){let{inviteTarget:s,blockStore:i,permissionItem:t,mostPermissivePermissions:o,spaceVisibleUserMap:r,permissionItemArgs:a,menuListItemProps:c}=e;const u=(0,d().YB)(),p=(0,n().VK)((()=>b().U6.createChildStore(i,{table:m().KJ,id:s.value.id}).getDisplayName(u)||void 0),[i,u,s]),g=(0,y().N)({permissionItem:t,targetType:"user",targetName:p,store:i}),h="user_permission"===(null==o?void 0:o[0].permissionItem.type)?o[0]:{from:{table:l().iU,blockId:i.id},permissionItem:{role:t.role,type:"user_permission",user_id:s.value.id}};return(0,P.jsx)(v().Z,{store:i,userPermission:h,showInherited:!1,selectFooter:(0,P.jsx)(M,{targetName:p,targetType:"user",mostPermissivePermissions:o}),spaceVisibleUserMap:r,permissionItemArgs:a,tooltip:g,menuListItemProps:c})}function j(e){let{inviteTarget:s,blockStore:i,permissionItem:t,mostPermissivePermissions:o,permissionItemArgs:m,menuListItemProps:d}=e;const u=(0,n().VK)((()=>{var e;return null===(e=h().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),p=s.value.name,g=(0,y().N)({permissionItem:t,targetType:"group",targetName:p,store:i}),b=(0,n().VK)((()=>function(e){var s;let{targetType:i,targetName:t,mostPermissivePermissions:n}=e;const o=null==n||null===(s=n.filter("user"===i?w:k))||void 0===s?void 0:s[0];if(!o)return[];const l=(0,a().iC)(o.permissionItem.role)?o.permissionItem.role:"none";if("none"===l)return[];return C.map((e=>{if((0,r().z4)(e,l))return;return{role:e,disabledInfo:{isDisabled:!0,disabledMessage:(0,P.jsx)(T,{targetType:i,permissionItem:o.permissionItem,targetName:t})}}})).filter(c().$K)}({targetType:"group",targetName:p,mostPermissivePermissions:o})),[o,p]),v="group_permission"===(null==o?void 0:o[0].permissionItem.type)?o[0]:{from:{table:l().iU,blockId:i.id},permissionItem:{role:t.role,type:"group_permission",group_id:s.value.group_id}};return u?(0,P.jsx)(f().Z,{store:i,groupPermission:v,spaceId:u,showInherited:!1,isRemovableOverride:!0,permissionItemArgs:m,tooltip:g,roleItemOverrides:b,menuListItemProps:d}):null}const C=["none","reader","comment_only","content_only_editor","read_and_write","membership_admin","editor"],_={none:g().Z.formatMessage(r().mq.noAccessDescription),reader:g().Z.formatMessage(r().mq.canReadDescription),comment_only:g().Z.formatMessage(r().mq.canCommentDescription),content_only_editor:g().Z.formatMessage(r().mq.canEditContentDescription),read_and_write:g().Z.formatMessage(r().mq.canEditDescription),membership_admin:g().Z.formatMessage(r().mq.membershipAdminDescription),editor:g().Z.formatMessage(r().mq.fullAccessDescription)};function M(e){var s;let{targetType:i,targetName:t,mostPermissivePermissions:n}=e;const l=(0,o().yK)((e=>({divider:{color:`${e.regularDividerColor}`},label:{marginLeft:12,marginRight:12,paddingTop:8,paddingBottom:8}})),[]),m=null==n||null===(s=n.filter("user"===i?w:k))||void 0===s?void 0:s[0];if(!m)return null;const c=(0,a().iC)(m.permissionItem.role)?m.permissionItem:void 0;if(!c||!c.role||"string"!=typeof c.role||"none"===c.role)return null;const h=_[c.role]||g().Z.formatMessage(r().mq.defaultAccessLabel);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(u().Z,{dividerColor:l.divider.color,size:1}),(0,P.jsx)(p().Z,{style:l.label,isSmall:!0,isMultiline:!0,children:(0,P.jsx)(d()._H,{id:"permissionsItem.generalAccess",defaultMessage:"{userName} will still have {accessLevel} from the {permissionItemName}",values:{permissionItemName:(0,P.jsx)(x().g,{permissionItem:c}),userName:t,accessLevel:h}})})]})}function w(e){switch(e.permissionItem.type){case"space_permission":case"team_permission":case"team_owner_permission":case"explicit_team_permission":case"explicit_team_owner_permission":case"explicit_team_guest_permission":case"group_permission":return!0;case"bot_permission":case"deleted_permission":case"exclusive_user_permission":case"public_permission":case"restricted_permission":case"trusted_domain_permission":case"user_permission":return!1;default:return(0,c().P)(e.permissionItem),!1}}function k(e){switch(e.permissionItem.type){case"space_permission":case"team_permission":case"team_owner_permission":case"explicit_team_permission":case"explicit_team_owner_permission":case"explicit_team_guest_permission":return!0;case"group_permission":case"bot_permission":case"deleted_permission":case"exclusive_user_permission":case"public_permission":case"restricted_permission":case"trusted_domain_permission":case"user_permission":return!1;default:return(0,c().P)(e.permissionItem),!1}}function T(e){let{permissionItem:s,targetType:i,targetName:t}=e;return t&&"user"===i?(0,P.jsx)(d()._H,{id:"searchTargetPermissionItem.disabledMessage",defaultMessage:"To restrict {targetUserName}’s access, modify the “{permissionItemName}” setting on this page",values:{targetUserName:t,permissionItemName:(0,P.jsx)(x().g,{permissionItem:s})}}):t&&"group"===i?(0,P.jsx)(d()._H,{id:"searchTargetPermissionItem.disabledMessageForGroup",defaultMessage:"To restrict the {targetGroupName} group’s access, modify the “{permissionItemName}” setting on this page",values:{targetGroupName:t,permissionItemName:(0,P.jsx)(x().g,{permissionItem:s})}}):(0,P.jsx)(d()._H,{id:"searchTargetPermissionItem.disabledMessageWithoutName",defaultMessage:"To restrict access, modify the “{permissionItemName}” setting on this page",values:{permissionItemName:(0,P.jsx)(x().g,{permissionItem:s})}})}const R=t.memo(I)},269089:(e,s,i)=>{i.d(s,{Z:()=>l});var t=i(667294),n=()=>i(142735),o=()=>i(960516),r=i(785893);function a(e){let{store:s}=e;const t=(0,i(219727).O7)(),a=t.device.isMobile,l=(0,n().VK)((()=>(0,i(779733).wZ)()),[]),m=(0,n().VK)((()=>{var e,n;return s instanceof i(826955).H2?null===(e=(0,i(345918).Wd)(t,s))||void 0===e?void 0:e.icon:null===(n=s.getIcon())||void 0===n?void 0:n.icon}),[t,s]),d=(0,i(846550).yK)((e=>({teamOrSpaceIcon:(0,i(845465).lw)({theme:e,size:a&&l?o().xF:o().ZG,useLargeBorderRadius:l,useLightBackgroundColor:l,icon:m}),iconBoxStyles:l?{color:e.mediumIconColor}:{}})),[m,a,l]),{innerEmojiOrFlatIconSize:c,innerInitialSize:u}=function(e){let{isRedesignEnabled:s,baseSize:i}=e;return s?{innerEmojiOrFlatIconSize:.65*i,innerInitialSize:.75*i}:{innerEmojiOrFlatIconSize:.78*i,innerInitialSize:i}}({isRedesignEnabled:l,baseSize:a&&l?o().xF:o().ZG});return(0,r.jsx)(i(383694).p,{disabled:!0,store:s,size:a&&l?o().xF:o().ZG,iconContainerStyles:d.teamOrSpaceIcon,iconBoxStyles:d.iconBoxStyles,innerEmojiOrFlatIconSize:c,innerInitialSize:u})}const l=t.memo(a)},182494:(e,s,i)=>{i.d(s,{N:()=>b});i(267602),i(470928),i(667294);var t=()=>i(142735),n=()=>i(846550),o=()=>i(306164),r=()=>i(788860),a=()=>i(696459),l=()=>i(707513),m=()=>i(384241),d=()=>i(239482),c=()=>i(467806),u=()=>i(826955),p=()=>i(383694),g=()=>i(154187),h=i(785893);function b(e){let{permissionItem:s,targetType:i,targetName:b,store:f}=e;const v=(0,n().yK)((()=>({groupOrTeamName:{fontWeight:l().Ue.bold}})),[]),x=(0,t().VK)((()=>{var e;if("group_permission"!==s.type)return;const i=null===(e=c().Z.state.permissionGroupsAndMemberCounts.find((e=>e.group.group_id===s.group_id)))||void 0===e?void 0:e.group.name;return i?(0,h.jsx)("span",{style:v.groupOrTeamName,children:i}):void 0}),[s,v.groupOrTeamName]),y=(0,t().VK)((()=>{var e;if("team_permission"!==s.type&&"explicit_team_permission"!==s.type&&"team_owner_permission"!==s.type&&"explicit_team_owner_permission"!==s.type&&"explicit_team_guest_permission"!==s.type)return;const i="team_permission"===s.type||"team_owner_permission"===s.type?null===(e=(0,d().VP)(f))||void 0===e?void 0:e.id:s.team_id;if(!i)return;const t=u().zX.createChildStore(f,{table:o().e0,id:i,spaceId:f.getSpaceId()});return(0,h.jsxs)("span",{style:{...v.groupOrTeamName,display:"inline-flex",gap:4},children:[(0,h.jsx)(p().p,{store:t,size:14,style:{margin:1}}),(0,h.jsx)(m().Z,{store:t,shouldWrap:!0})]})}),[s,f,v.groupOrTeamName]);if("none"===s.role)return;const P=(0,h.jsx)(r()._H,{id:"searchTargetPermissionItem.accessReasonTooltip.withoutUserName",defaultMessage:"Access is from the “{permissionItemName}”",values:{permissionItemName:(0,h.jsx)(g().g,{permissionItem:s})}});if("group"===i&&"group_permission"===s.type)return b?(0,h.jsx)(r()._H,{id:"searchTargetPermissionItem.accessReasonTooltip.groupWithGroupName",defaultMessage:"The {targetGroupName} group has access to this page",values:{targetGroupName:b}}):(0,h.jsx)(r()._H,{id:"searchTargetPermissionItem.accessReasonTooltip.groupWithoutGroupName",defaultMessage:"This group has access to this page"});if("user"===i&&("user_permission"===s.type||"exclusive_user_permission"===s.type))return b?(0,h.jsx)(r()._H,{id:"searchTargetPermissionItem.accessReasonTooltip.userWithUserName",defaultMessage:"{targetUserName} has access to this page",values:{targetUserName:b}}):void 0;switch(s.type){case"space_permission":return b&&"user"===i?(0,h.jsx)(r()._H,{id:"searchTargetPermissionItem.accessReasonTooltip.spaceWithUserName",defaultMessage:"{targetUserName} has access from the “{permissionItemName}” setting on this page",values:{targetUserName:b,permissionItemName:(0,h.jsx)(g().g,{permissionItem:s})}}):b&&"group"===i?(0,h.jsx)(r()._H,{id:"searchTargetPermissionItem.accessReasonTooltip.spaceWithGroupName",defaultMessage:"The {targetGroupName} group has access from the “{permissionItemName}” setting on this page",values:{targetGroupName:b,permissionItemName:(0,h.jsx)(g().g,{permissionItem:s})}}):P;case"team_permission":case"explicit_team_permission":return"user"===i&&b&&y?(0,h.jsx)(r()._H,{id:"searchTargetPermissionItem.accessReasonTooltip.member.teamWithUserName",defaultMessage:"{targetUserName} has access as a member of the {teamspaceName} teamspace",values:{targetUserName:b,teamspaceName:y}}):"group"===i&&b&&y?(0,h.jsx)(r()._H,{id:"searchTargetPermissionItem.accessReasonTooltip.group.teamWithUserName",defaultMessage:"The {targetGroupName} group has access from the {teamspaceName} teamspace",values:{targetGroupName:b,teamspaceName:y}}):P;case"team_owner_permission":case"explicit_team_owner_permission":return"user"===i&&b&&y?(0,h.jsx)(r()._H,{id:"searchTargetPermissionItem.accessReasonTooltip.owner.teamWithUserName",defaultMessage:"{targetUserName} has access as an owner of the {teamspaceName} teamspace",values:{targetUserName:b,teamspaceName:y}}):"group"===i&&b&&y?(0,h.jsx)(r()._H,{id:"searchTargetPermissionItem.accessReasonTooltip.group.teamWithUserName",defaultMessage:"The {targetGroupName} group has access from the {teamspaceName} teamspace",values:{targetGroupName:b,teamspaceName:y}}):P;case"explicit_team_guest_permission":return b&&y?(0,h.jsx)(r()._H,{id:"searchTargetPermissionItem.accessReasonTooltip.guest.teamWithUserName",defaultMessage:"{targetUserName} has access as a guest of the {teamspaceName} teamspace",values:{targetUserName:b,teamspaceName:y}}):P;case"group_permission":return b&&x?(0,h.jsx)(r()._H,{id:"searchTargetPermissionItem.accessReasonTooltip.groupWithUserName",defaultMessage:"{targetUserName} has access as a member of the {groupName} group",values:{targetUserName:b,groupName:x}}):P;case"user_permission":case"exclusive_user_permission":return b?(0,h.jsx)(r()._H,{id:"searchTargetPermissionItem.accessReasonTooltip.userWithUserName",defaultMessage:"{targetUserName} has access to this page",values:{targetUserName:b}}):void 0;case"bot_permission":case"deleted_permission":case"public_permission":case"restricted_permission":case"trusted_domain_permission":return;default:return void(0,a().P)(s)}}},458809:(e,s,i)=>{i.d(s,{Z:()=>b});var t=i(667294),n=()=>i(219727),o=()=>i(142735),r=()=>i(788860),a=()=>i(18748),l=()=>i(67961),m=()=>i(949842),d=i(785893);const c=(0,i(827282).IU)("peopleSquare",{viewBox:"0 0 14 18",svg:(0,d.jsx)("g",{children:(0,d.jsx)("path",{d:"M3.151 17.172c-.738 0-1.296-.19-1.674-.567-.379-.374-.568-.926-.568-1.655V7.212c0-.734.19-1.288.568-1.661.378-.374.936-.56 1.674-.56h7.698c.733 0 1.29.186 1.668.56.382.373.574.927.574 1.66v7.74c0 .724-.182 1.275-.547 1.654-.365.378-.873.567-1.524.567H3.15zm.082-1.347h7.698a.756.756 0 00.58-.253c.156-.164.233-.412.233-.745V7.321c0-.328-.086-.574-.26-.738-.168-.169-.41-.253-.724-.253H3.233c-.319 0-.562.084-.731.253-.164.164-.246.41-.246.738v7.506c0 .333.082.581.246.745.169.169.412.253.731.253zM2.42 3.91c.045-.328.157-.58.335-.759.182-.177.456-.266.82-.266h6.795c.365 0 .636.089.814.266.182.178.298.431.348.76H2.42zm1.176-1.99c.018-.309.118-.544.3-.703.183-.16.438-.24.766-.24h4.621c.333 0 .588.08.766.24.182.16.285.394.307.704h-6.76zm2.85 14.103a.392.392 0 01-.328-.177c-.086-.114-.13-.283-.13-.506 0-.274.073-.554.219-.841.146-.287.356-.554.629-.8.278-.246.61-.444.998-.595a3.561 3.561 0 011.32-.232c.615 0 1.15.119 1.606.355.456.237.813.531 1.073.882.26.356.408.711.444 1.067a.98.98 0 01-.088.41.668.668 0 01-.301.314c-.142.082-.338.123-.588.123H6.446zm2.707-3.937c-.273 0-.524-.073-.752-.219a1.735 1.735 0 01-.553-.595 1.727 1.727 0 01-.205-.84c0-.306.068-.581.205-.828.136-.246.319-.44.547-.58a1.4 1.4 0 01.758-.22c.27 0 .518.071.745.213.228.14.41.335.547.58.142.242.212.518.212.828 0 .31-.068.59-.205.84a1.655 1.655 0 01-.547.602 1.367 1.367 0 01-.752.219zm-4.327.772c.274 0 .527.03.759.09.232.054.44.136.622.245a3.209 3.209 0 00-.759.985 2.647 2.647 0 00-.266 1.148c0 .255.047.488.143.697H2.898c-.319 0-.544-.086-.676-.26a1.054 1.054 0 01-.192-.642c.01-.355.132-.706.37-1.053.236-.346.562-.633.977-.861.42-.232.902-.349 1.45-.349zm0-.683c-.355 0-.663-.14-.923-.417a1.47 1.47 0 01-.39-1.032 1.353 1.353 0 01.39-1.005c.265-.274.572-.41.923-.41.356 0 .663.136.923.41.26.269.39.601.39.998 0 .41-.13.756-.39 1.039-.26.278-.567.417-.923.417z"})})});var u=()=>i(998306);function p(e){let{store:s,trustedDomainPermission:l,fromPermissionWrapper:p,permissionItemArgs:b,renderStyle:f,menuListItemProps:v,selectTrustedDomainHandler:x}=e;const y=(0,n().O7)(),P=y.device.isMobile,{isPhone:I,isTablet:S}=(0,n().Fy)(),j=(0,i(609836).b)(),C=(0,o().VK)((()=>(0,i(779733).wZ)()),[]),_=(0,o().VK)((()=>i(876822).default.state.currentSpaceStore),[]),M=(0,i(428241).u)(),{workspaceTrustedDomain:w,numberOfTrustedDomains:k}=(0,o().VK)((()=>{if(M){var e;const s=(null===(e=M.getForSpace(_))||void 0===e?void 0:e.enabledTrustedEmailDomains)??[];return{workspaceTrustedDomain:s.length>0?s[0]:"",numberOfTrustedDomains:s.length}}return{workspaceTrustedDomain:"",numberOfTrustedDomains:0}}),[_,M]),T=(0,t.useCallback)((async e=>{await(0,m().Jx)({event:e,context:m().Af.ToggleTrustedDomainPermission,callback:async()=>{await(0,i(788504).o)({trustedDomainPermission:l,store:s,environment:y,sudoModeStore:b.sudoModeStore,location:b.location,fromPermissionWrapper:p})}})}),[l,s,y,b,p]),R=(0,i(846550).yK)((e=>({container:I?{background:e.popoverBackground}:{},icon:{width:24,height:24,...!C&&{fill:e.mediumIconColor}},iconContainer:C?{}:{backgroundColor:e.lightDividerColor,borderRadius:32},menuItemContainer:{...!I&&{paddingTop:a().rl,paddingBottom:a().rl}},menuIcon:{height:16,width:16,fill:e.icon.secondary},menuIconContainer:{marginLeft:P?13:C?6:9,...C?{marginRight:6}:{alignSelf:"center"}},menuItemToggleStyle:{marginTop:4,marginRight:I||S?10:6,alignSelf:"baseline"},menuItemText:{lineHeight:"unset",...I&&{paddingTop:a().bR,paddingBottom:a().bR},color:e.text.primary}})),[P,I,C,S]),Z=(0,d.jsx)(g,{workspaceTrustedDomain:w,numberOfTrustedDomains:k,renderStyle:f,spaceName:j}),N=(0,d.jsx)(h,{workspaceTrustedDomain:w,numberOfTrustedDomains:k});return"permissionSelectOption"===f?(0,d.jsx)("div",{style:R.container,children:(0,d.jsx)(i(827973).Z,{...v,title:Z,caption:N,buttonStyle:R.menuItemContainer,shouldWrapTitle:!0,shouldWrapCaption:!0,style:R.menuItemText,icon:c({...R.menuIcon}),desktopIconStyle:R.menuIconContainer,onClick:async e=>{await(async e=>{"permissionSelectOption"===f&&await T(e)})(e)},badge:(0,d.jsx)(i(447832).Z,{})})}):(0,d.jsx)(i(960516).ZP,{upgradeButtonName:"trusted_domain_item",currentBlockStore:s,permissionItem:l.permissionItem,from:l.from,icon:C?(0,d.jsx)(u().Z,{type:"square",iconType:"function",iconFn:c,iconStyle:R.icon,isMobile:P}):c(R.icon),iconStyle:R.iconContainer,title:Z,selectHeader:C&&P?(0,d.jsx)(a().ZP,{title:Z,icon:(0,d.jsx)(u().Z,{type:"square",iconType:"function",iconFn:i(216851).M,iconStyle:R.icon,isMobile:P}),desktopIconStyle:{marginLeft:16}}):void 0,nonInheritedTooltip:void 0,subtitle:P&&C?(0,d.jsx)(r()._H,{...(0,i(777814).M)({type:"trusted_domain_permission",role:l.permissionItem.role,table:"block",isRemovable:!1,isCurrentUser:!1,isRedesignEnabled:C}).label}):void 0,fromPermissionWrapper:p,isRemovableOverride:!0,...b})}function g(e){let{workspaceTrustedDomain:s,numberOfTrustedDomains:i,renderStyle:t,spaceName:n}=e;return"permissionItem"===t?s&&1===i?(0,d.jsx)(r()._H,{id:"trustedDomainItem.titleWithSpecificDomain.label",defaultMessage:"People with a {workspaceTrustedDomain} email address",values:{workspaceTrustedDomain:s}}):(0,d.jsx)(r()._H,{id:"trustedDomainItem.titleWhenNoSpecificDomain",defaultMessage:"People with a trusted email address",values:{workspaceTrustedDomain:s}}):s&&1===i?(0,d.jsx)(r()._H,{id:"trustedDomainItem.titleWithSpecificDomain.mobileLabel",defaultMessage:"Everyone with a {workspaceTrustedDomain} email address",values:{spaceName:n,workspaceTrustedDomain:s}}):(0,d.jsx)(r()._H,{id:"trustedDomainItem.titleWithSpecificDomain",defaultMessage:"Everyone with a trusted email address",values:{spaceName:n}})}function h(e){let{workspaceTrustedDomain:s,numberOfTrustedDomains:i}=e;return s&&1===i?(0,d.jsx)(l().Z,{isSmall:!0,isMultiline:!0,style:{whiteSpace:"normal"},children:(0,d.jsx)(r()._H,{id:"trustedDomainItem.captionWithSpecificDomain.label",defaultMessage:"Workspace members and people with a {workspaceTrustedDomain} email address can access",values:{workspaceTrustedDomain:s}})}):(0,d.jsx)(l().Z,{isSmall:!0,isMultiline:!0,style:{whiteSpace:"normal"},children:(0,d.jsx)(r()._H,{id:"trustedDomainItem.captionWhenNoSpecificDomain",defaultMessage:"Workspace members and People with a trusted email address can access",values:{workspaceTrustedDomain:s}})})}const b=t.memo(p)},634015:(e,s,i)=>{i.d(s,{n:()=>p});i(667294);var t=()=>i(142735),n=()=>i(846550),o=()=>i(499110),r=()=>i(788860),a=()=>i(943620),l=()=>i(981583),m=()=>i(960516),d=i(785893);const c=i(838983).Kt,u=16;function p(e){let{ownerStores:s,teamStore:i,isSmall:o=!1}=e;const r=o?c:m().ZG,l=o?10:u,p=(0,n().yK)((e=>({container:{position:"relative",width:r,height:r},teamBadge:{position:"absolute",bottom:-5,right:-3,background:e.modalBackground,padding:.75,borderRadius:"0.25em"}})),[r]),{teamName:h,teamIcon:b}=(0,t().VK)((()=>({teamName:i.getName(),teamIcon:i.getIcon()})),[i]),f=e=>(0,d.jsx)(a().Z,{disabled:!0,title:h,icon:b,isEmptyPage:!1,size:e});return 0===s.length?f(r):(0,d.jsxs)("div",{style:p.container,children:[(0,d.jsx)(g,{isSmall:o,store:s[0]}),(0,d.jsx)("div",{style:p.teamBadge,children:f(l)})]})}function g(e){let{store:s,isSmall:i=!1,style:u={}}=e;const p=(0,r().YB)(),g=i?c:m().ZG,h=(0,n().yK)((e=>({icon:{width:g,height:g,borderRadius:g,boxShadow:e.avatarBoxShadow,...u}})),[g,u]),b=(0,t().VK)((()=>null!=s&&s.isDefined()?(0,o().Nz)(p,null==s?void 0:s.getModel()):void 0),[p,s]),f=b?(0,d.jsx)(l().Z,{avatarShouldShowShadow:!0,userStore:s,size:g}):(0,d.jsx)(a().Z,{bucket:"public",disabled:!0,isEmptyPage:!1,title:b,size:g,icon:void 0});return(0,d.jsx)("div",{style:h.icon,children:f})}},53484:(e,s,i)=>{i.d(s,{z:()=>r});i(667294);var t=()=>i(846550),n=()=>i(707513),o=i(785893);function r(e){let{title:s,subtitle:i,style:r}=e;const a=(0,t().yK)((e=>({base:{width:"100%"},title:{fontWeight:n().Ue.medium,color:e.regularTextColor,fontSize:14},subtitle:{fontWeight:n().Ue.regular,color:e.mediumTextColor,fontSize:12}})),[]);return(0,o.jsxs)("div",{style:{...a.base,...r},children:[(0,o.jsx)("div",{style:a.title,children:s}),i&&(0,o.jsx)("div",{style:a.subtitle,children:i})]})}},838983:(e,s,i)=>{i.d(s,{Kt:()=>c,MQ:()=>d,Ph:()=>u,oM:()=>m});i(241792);var t=i(667294),n=()=>i(846550),o=()=>i(666414),r=()=>i(92175),a=()=>i(53484),l=i(785893);const m=15,d=8,c=20;function u(e){const s=(0,n().yK)((()=>({button:{height:"auto",paddingLeft:0,paddingRight:0,display:"flex"},title:{marginBottom:10}})),[]);return Boolean(e.onClick)?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a().z,{title:e.title,style:s.title}),(0,l.jsx)(r().Z,{onClick:e.onClick,style:s.button,children:(0,l.jsx)(p,{...e})})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a().z,{title:e.title,style:s.title}),(0,l.jsx)(p,{...e})]})}function p(e){let{title:s,rows:i,hideDividers:r=!1,itemStyle:a,onClick:c}=e;const u=(0,n().yK)((e=>({container:{border:`1px solid ${e.regularDividerColor}`,borderRadius:4,width:"100%"},list:{listStyle:"none",padding:0,margin:0},listItem:{marginLeft:m,marginRight:m,paddingTop:d,paddingBottom:d,...a},divider:{marginLeft:m,marginRight:m,borderColor:`${e.regularDividerColor}`}})),[a]);return(0,l.jsx)("div",{style:{...u.container},children:(0,l.jsx)("ul",{style:u.list,children:i.map(((e,s)=>(0,l.jsxs)(t.Fragment,{children:[!r&&s>0&&(0,l.jsx)(o().Z,{size:1,innerStyle:u.divider}),(0,l.jsx)("li",{style:u.listItem,children:e},s)]},s)))})})}}}]);