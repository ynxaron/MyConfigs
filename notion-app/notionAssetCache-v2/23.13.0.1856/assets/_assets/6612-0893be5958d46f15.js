"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[6612],{158792:(e,t,o)=>{o.d(t,{Dw:()=>I,P0:()=>Z,RN:()=>L,VG:()=>T,Yw:()=>w,jX:()=>R,k2:()=>E,lz:()=>P,v2:()=>B});o(267602),o(653476),o(30005);var i=()=>o(741633),n=()=>o(528514),a=()=>o(933868),r=()=>o(217465),s=()=>o(396136),l=()=>o(696056),d=()=>o(255933),c=()=>o(989478),u=()=>o(696459),p=()=>o(308186),m=()=>o(577041),g=()=>o(527278),h=()=>o(122479),f=()=>o(826955),x=()=>o(824462),v=()=>o(528918),y=()=>o(784234),j=()=>o(636340),b=()=>o(102182),C=()=>o(269299),S=()=>o(423402);const k=(0,o(788860).vU)({duplicatingTemplate:{id:"botActions.duplicatingTemplate.loadingMessage",defaultMessage:"Duplicating template..."},duplicatingTemplateError:{id:"botActions.duplicateTemplateAndShareWithBot.snackbar.failure",defaultMessage:"Failed to duplicate template for to your workspace"}});function M(e,t){const{environment:o,spaceStore:i,spaceRole:n}=t,a=function(e){const{name:t,spaceStore:o,userId:i,icon:n,type:a}=e,r=Date.now(),s={name:t,created_at:r,created_by_table:c().KJ,created_by_id:i,alive:!0,icon:n,space_id:o.id,last_edited_at:r,last_edited_by_id:i,last_edited_by_table:c().KJ};switch(a){case"guest":return{...s,type:"guest",capabilities:e.capabilities,parent_table:d().bx,parent_id:o.id,integration_id:void 0};case"scim":return{...s,type:"scim",parent_table:c().KJ,parent_id:i};default:(0,u().t1)(a)}}(t),r=j().ae({environment:o,table:l().cZ,value:a,inMemoryRecordCache:o.defaultRecordCache.inMemoryRecordCache,transaction:e});return y().tQ({environment:o,spaceStore:i,permissionItems:[{type:"bot_permission",role:n,bot_id:r.id}],transaction:e}),{botStore:r}}function P(e){const{environment:t}=e,{serverCommitResult:o,performResult:{botStore:i}}=C().createAndCommit({userAction:"botActions.createSpaceBot",environment:t,canUndo:!0,perform:t=>M(t,e)});return{botStore:i,transactionPromise:o}}async function Z(e){const{environment:t,botId:o,onSuccess:i}=e,n=await x().callApi({eventName:"deleteBot",environment:t,data:{botId:o}});"failed"===n.type?p().x2(n):"success"===n.type&&i&&(await S().pJ({environment:t}),i())}async function w(e){const{environment:t,table:o,id:n,type:a}=e,r=await x().callApi({eventName:"getBots",environment:t,data:{table:o,id:n,type:a},headers:(0,i().Bb)({spaceId:o===d().bx?n:void 0})});if("failed"===r.type)throw p().x2(r),r;return{botIds:r.data.botIds,recordMap:r.data.recordMap}}async function I(e){const{environment:t,currentSpaceStore:o,botIds:i}=e;if(!o)return;const n=await x().callApi({eventName:"getBotSharedPageIds",environment:t,data:{spaceId:o.id,botIds:i}});if("failed"!==n.type)return n.data;p().x2(n)}async function T(e){const{environment:t,botId:o}=e,i=await x().callApi({eventName:"getBotToken",environment:t,data:{botId:o}});if("failed"!==i.type)return i.data.token;p().x2(i)}function B(e){const{botValue:t,store:o,environment:i}=e,{id:a,parent_id:r,parent_table:s,capabilities:l}=t,d={type:"bot_permission",bot_id:a,parent_id:r,parent_table:s,role:(0,n().uH)(l)};C().createAndCommit({userAction:"TopbarMoreButton.handleAddingConnection",environment:i,canUndo:!0,perform:e=>{y().l3({environment:i,store:o,permissionItems:[d],transaction:e})}})}function L(e){const{botId:t,store:o,environment:i}=e,n=o.getPermissionItems().filter((0,u().AO)((e=>(0,a().FB)(e)?{true:e}:{false:e})));for(const a of n)if(a.bot_id===t){const e={...a,role:"none"};C().createAndCommit({userAction:"TopbarMoreButton.handleRemovingConnection",environment:i,canUndo:!0,perform:t=>{y().l3({environment:i,store:o,permissionItems:[e],transaction:t})}})}}function R(e){const{currentSpaceStore:t,environment:o,pages:i,botStore:n,addPermission:a}=e;if(!t)return;const r=(0,h().zT)({botStore:n,addPermission:a});i.forEach((e=>{const i=f().t1.createChildStore(t,{table:s().iU,id:e});C().createAndCommit({userAction:"botActions.updateBlockPermissionsForBot",environment:o,canUndo:!0,perform:e=>{y().l3({environment:o,store:i,permissionItems:[r],transaction:e})}})}))}async function E(e){const{environment:t,spaceStore:o,spaceViewStore:i,templatePageId:n,botValue:a,pages:s}=e;if(!o)return;const d=f().t1.createChildStore(o,{table:l().cZ,id:a.id});if(n)return await async function(e){const{environment:t,spaceStore:o,spaceViewStore:i,templatePageId:n,botStore:a}=e;if(!o||!i)return;try{v().j({message:k.duplicatingTemplate});const e=await x().callApi({eventName:"loadBlockSubtree",environment:t,data:{block:{id:n,spaceId:o.id},shallow:!1}});if("failed"===e.type)return;const s=r().RecordMapWithRole.create(e.data.subtreeRecordMap),{createAndDuplicatePageInSpace:l}=await(0,m().uP)(),{performResult:d}=C().createAndCommit({userAction:"botActions.duplicateTemplateAndShareWithBot",environment:t,canUndo:!0,perform:e=>{const r=l({environment:t,recordMap:s,copyPageId:n,isPrivate:!0,spaceStore:o,spaceViewStore:i,transaction:e,allowCopyExternalObjectInstances:!1}),d=i.getPrivatePageIds();d.length>0&&j().sW({store:i,data:{private_pages:[r.id,...d]},transaction:e});const c=(0,h().zT)({botStore:a,addPermission:!0});return y().l3({environment:t,store:r,permissionItems:[c],transaction:e}),r}});return d}catch(s){b().oV({label:g().Z.formatMessage(k.duplicatingTemplateError)})}finally{v().x()}}({environment:t,templatePageId:n,botStore:d,spaceStore:o,spaceViewStore:i});R({environment:t,currentSpaceStore:o,botStore:d,pages:s,addPermission:!0})}},233405:(e,t,o)=>{o.d(t,{Z:()=>n});o(667294);var i=o(785893);const n=function(e){const{style:t}=(0,o(846550).yK)((t=>({style:{display:"inline-block",textAlign:"center",color:e.disabled?t.lightTextColor:t.mediumTextColor,userSelect:"none",width:8,...e.style}})),[e.disabled,e.style]);return(0,i.jsx)("div",{style:t,children:"Â·"})}},95352:(e,t,o)=>{o.d(t,{DQ:()=>ee,rw:()=>te,OF:()=>$,L6:()=>J,$1:()=>ne});o(670560),o(267602),o(653476),o(241792);var i=o(667294),n=()=>o(219727),a=()=>o(732811),r=()=>o(142735),s=()=>o(846550),l=()=>o(659278),d=()=>o(801812),c=()=>o(245015),u=()=>o(788860),p=()=>o(568017),m=()=>o(513670),g=()=>o(707513),h=()=>o(571896),f=()=>o(150569),x=()=>o(709344),v=()=>o(527278),y=()=>o(876822),j=()=>o(808985),b=()=>o(692304),C=()=>o(178498),S=()=>o(312578),k=()=>o(255577),M=()=>o(906769),P=()=>o(388284),Z=()=>o(890085),w=()=>o(164079),I=()=>o(529048),T=()=>o(154186),B=()=>o(448419),L=()=>o(206352),R=()=>o(94967),E=()=>o(654133),_=o(785893);function H(e){let{shouldOpenVariations:t,icon:o,focused:i,color:n,onClick:a,onMouseEnter:s,variations:l,hideTooltip:d,insertIcon:c}=e;const u=(0,r().qz)(void 0,I().Z);return t?(0,_.jsx)(V,{icon:o,focused:i,color:n,onClick:a,onMouseEnter:s,variations:l,hideTooltip:d,insertIcon:c,buttonPopupStore:u}):(0,_.jsx)(F,{icon:o,focused:i,color:n,onClick:a,onMouseEnter:s,variations:l,hideTooltip:d})}const U=H;function W(e){const{device:t}=e;return t.isMobile?{width:f().mz,height:f().mz,fontSize:f().jo}:{width:f().T8,height:f().T8,fontSize:f().WB}}function A(e){return{iconButton:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,...W(e)},variationMenu:{display:"flex",padding:2,gap:1},iconImage:{...e.device.isMobile?{width:f().jo,height:f().jo}:{width:f().WB,height:f().WB}}}}function F(e){let{events:t,icon:o,focused:i,color:a,onClick:r,onMouseEnter:l,variations:d,hideTooltip:c}=e;const u=(0,s().Fg)(),p=(0,n().O7)(),m=d.tooltip?d.tooltip:o,g="dark"===u.mode?d.dark:d.light;return(0,_.jsx)(E().Z,{allowHover:Boolean(o&&!c),disableTooltip:c,renderTooltip:()=>m.replaceAll("-"," ").replaceAll("_"," "),closeDelay:0,render:e=>(0,_.jsx)(T().Z,{focused:i,onClick:r,...(0,w().Z)(t||{},(0,w().Z)({onMouseEnter:l},e)),ignoreLocalHoverState:!0,style:A(p).iconButton,children:(0,_.jsx)("img",{src:`data:image/svg+xml;utf8,${encodeURIComponent(g[a])}`,style:A(p).iconImage,onContextMenu:e=>e.preventDefault()})},o)})}function D(e){const{parent:t,icon:o,variations:i,insertIcon:a}=e,r=(0,s().Fg)(),l=(0,n().O7)(),d="dark"===r.mode?i.light:i.dark,c=Object.keys(d).sort(((e,t)=>Z().Oe.indexOf(e)-Z().Oe.indexOf(t))).map((n=>{const r=`${o}_${n}`;return{key:r,action:e=>{t.close(),a(`/icons/${r}.svg`)},render:t=>(0,_.jsx)(H,{...e,...t,icon:r,color:n,variations:i,shouldOpenVariations:!1,hideTooltip:!0})}}));return(0,_.jsx)(L().Z,{debugName:"IconPickerMenuItem",capture:!0,allowEsc:!0,children:(0,_.jsx)(k().Z,{type:k().i.Grid,getItemsPerRowForSection:()=>5,initialFocus:0,sections:[{key:"variations",render:e=>(0,_.jsx)("div",{...e}),items:c}],renderRow:(e,t)=>(0,_.jsx)("div",{style:A(l).variationMenu,children:e},t)})})}function V(e){let{icon:t,focused:o,color:n,onClick:a,onMouseEnter:r,variations:s,hideTooltip:l,insertIcon:d,buttonPopupStore:c}=e;const u=(0,i.useCallback)((()=>function(e){e.setState({...e.state,open:!1})}(c)),[c]),p=(0,i.useCallback)((e=>function(e,t){e.preventDefault(),t.setState({...t.state,open:!0})}(e,c)),[c]);return(0,_.jsx)(R().Z,{debugName:"IconPickerMenuItem",capture:o,onEnter:p,onEsc:u,children:(0,_.jsx)(B().ZP,{buttonPopupStore:c,popupType:B().Z4.Popup,renderOrigin:e=>(0,_.jsx)(F,{icon:t,focused:o,color:n,onClick:a,onMouseEnter:r,variations:s,hideTooltip:l,events:e}),render:e=>(0,_.jsx)(D,{parent:e,icon:t,variations:s,insertIcon:d})})},t)}const z={display:"flex",flexDirection:"column"},O="recentIcons",K=100,N=12,G=f().tg,q=f().Nm,$=f().II,J=f().pq,Y=f().$P,Q=f().qJ,X=f().PS,ee=356,te=f().T8*N+2*X,oe=f().vP,ie=(0,u().vU)({noResults:{defaultMessage:"No results",id:"emojiPicker.noResults.message"}});function ne(e){const{filter:t,enforceIconColor:o,onSubmit:p,menuRef:Z,iconLoggingData:w,onNoResults:I}=e,T=(0,n().O7)(),B=(0,s().Fg)(),{isDesktop:L,isMobile:R}=(0,n().Fy)(),[E,H]=(0,i.useState)(!0),[W,A]=(0,i.useState)(void 0),{loadIconCount:F,recentIcons:D}=(0,r().Kw)(j().default),V=(0,r().qz)(void 0,b().Z),ee=(0,r().VK)((()=>{var e;return null===(e=y().default.state)||void 0===e||null===(e=e.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.icon_picker_color}),[]),te=(0,r().VK)((()=>Math.floor(function(e,t){var o,i;const{device:n,WindowSizeStore:a}=e;if(n.isPhone)return(window.innerWidth-a.getSafePaddingLeftPx(Y)-a.getSafePaddingRightPx(Q))/f().mz;if(n.isTablet)return G;if(null==t||null===(o=t.current)||void 0===o||!o.offsetWidth)return N;return((null==t||null===(i=t.current)||void 0===i?void 0:i.offsetWidth)-2*X)/f().T8}(T,Z))),[T,Z]),oe=(0,r().VK)((()=>function(e){return e.device.isMobile?J:$}(T)),[T]);(0,a().K)((()=>{const e=c().Z.get(O);j().default.update((t=>({...t,recentIcons:e||[]})))}));const[ne]=(0,d().r5)((async()=>{try{const e=await async function(e,t,o){if(!m().xb(o.allIcons))return o.allIcons;const i=await(0,x().default)({environment:t,url:e,method:"GET",format:"json",mode:"cors"});if("success"===i.type)return j().default.setState({...o,allIcons:i.data}),i.data;throw i.error}("/icons/all",T,j().default.state);A(e),H(!1)}catch(e){throw e}}),[T]),re=(0,i.useMemo)((()=>l().rJ(e.filter)??""),[e.filter]),se=(0,i.useCallback)((e=>{const t=function(e){return e.replace("_dark","")}(e);p(t);const o=t.split(/[/_.]/),i=o[2],n=o[3];!function(e,t){const o=c().Z.get(O),i=m().G0([e],o),n=m().qn(i,t);c().Z.set(O,n),j().default.update((e=>({...e,recentIcons:n})))}(i,te*q),w&&h().fA(T,"pick_colored_icon",{icon:i,color:n,...w})}),[T,p,w,te]),le=(0,i.useCallback)(((e,t)=>{const i=o??ee,n=`/icons/${`${e}${i?`_${i}`:""}`}.svg`;return{key:n,action:()=>se(n),render:o=>(0,_.jsx)(U,{...o,icon:e,color:i??"gray",variations:t,insertIcon:se,shouldOpenVariations:!Boolean(i)})}}),[o,se,ee]),de=(0,i.useCallback)((e=>{if(!e)return[];const o=function(e,t){const o=m().oA(Object.keys(e).map((o=>{const i=e[o],n=((null==i?void 0:i.tooltip)??o).replace("-"," "),a=[n,...i.tags],r=a.findIndex((e=>e===t));if(-1!==r)return[0===r?100:50,o];const s=a.findIndex((e=>e.startsWith(t))),l=n.includes(t);return 0!==s&&l?[40,o]:-1!==s?[0===s?80:30,o]:void 0})));return m().MR(o,(e=>-e[0])).map((e=>e[1]))}(e,t.toLowerCase());return 0===o.length?[]:[{key:"search-results",items:o.map((t=>le(t,e[t]))),render:e=>(0,_.jsx)(P().Z,{children:(0,_.jsx)("div",{style:ae(T,B),children:e.children})},e.key)}]}),[t,le,T,B]),ce=(0,i.useCallback)(((e,t)=>{if(!t)return;let o=[];return o="recent"===e.id?D||[]:Object.keys(t),0!==o.length?{key:e.id,items:o.map((e=>{if(void 0!==t[e])return le(e,t[e])})).filter(Boolean),render:t=>(0,_.jsx)(P().Z,{isTitleUppercase:!0,title:e.title,children:(0,_.jsx)("div",{style:ae(T,B),children:t.children})},t.key)}:void 0}),[D,le,T,B]),ue=(0,i.useCallback)((e=>{const o=m().oA(function(e){return m().oA([!e&&{id:"recent",title:(0,_.jsx)(u()._H,{id:"iconPicker.section.recent",defaultMessage:"Recent"})},!e&&{id:"icons",title:(0,_.jsx)(u()._H,{id:"iconPicker.section.icons",defaultMessage:"Icons"})}])}(t).map((t=>ce(t,e))));return t&&re?de(e):o}),[t,re,ce,de]),pe=(0,i.useCallback)((e=>{const t=ue(e);let o=0;for(const i of t)o+=i.items.length;return o}),[ue]),me=(0,i.useCallback)((e=>{let t=F;0===F&&(t+=te*oe);const o=[],i=ue(e);let n=0;for(const a of i){if(!(n+a.items.length<=t)){o.push({...a,items:a.items.slice(0,t-n)});break}o.push(a),n+=a.items.length}return o}),[ue,F,te,oe]),ge=(0,i.useMemo)((()=>({type:k().i.Grid,getItemsPerRowForSection:()=>te,renderRow:(e,t)=>(0,_.jsx)("div",{style:{display:"flex"},children:e},t)})),[te]),he=(0,i.useCallback)((e=>{if(Math.abs(e)<K){const{loadIconCount:e,allIcons:t}=j().default.state,o=te*oe,i=Math.max(o,pe(t));j().default.setState({...j().default.state,loadIconCount:Math.min(i,e+o)})}}),[oe,te,pe]),fe=(0,i.useMemo)((()=>{const e=me(W),t=L&&e.length>0?0:void 0;return"resolved"===ne.status&&0===e.length&&(I&&I(),e.push({key:"no results",items:[{key:"no results",action:m().ZT,render:e=>(0,_.jsx)(C().Z,{...e,style:{fontWeight:g().Ue.medium,marginBottom:2,marginLeft:2,height:20,boxSizing:"content-box"},caption:v().Z.formatMessage(ie.noResults)})}],render:e=>(0,_.jsx)(P().Z,{...e})})),(0,_.jsxs)("div",{style:z,children:[(0,_.jsx)("div",{style:{flexGrow:1},children:(0,_.jsx)(k().Z,{...ge,store:V,initialFocus:t,sections:e,disableKeyboardArrowWrap:!0,unfocusOnScroll:R})}),(0,_.jsx)(M().Z,{onChange:he})]})}),[me,W,L,ge,V,R,he,ne.status,I]);return(0,_.jsxs)("div",{children:[E&&(0,_.jsx)("div",{style:{display:"flex",width:"100%",height:"100%",justifyContent:"center",alignItems:"center",paddingBottom:"10px"},children:(0,_.jsx)(S().Z,{})}),fe]})}function ae(e,t){const{device:o,WindowSizeStore:i}=e;return{display:"flex",flexDirection:"column",flexWrap:"wrap",alignItems:"flex-start",...o.isPhone?{background:t.popoverBackground,paddingTop:10,paddingBottom:10,paddingLeft:i.getSafePaddingLeftCSS(Y),paddingRight:i.getSafePaddingLeftCSS(Q),boxShadow:`0 1px 0 ${t.regularDividerColor}`,marginBottom:1}:{background:p().ZP.transparent,paddingLeft:o.isTablet?oe:X,paddingRight:o.isTablet?oe:X}}}},504117:(e,t,o)=>{o.d(t,{Um:()=>r,ZP:()=>s,kN:()=>a});o(667294);var i=()=>o(666414),n=o(785893);function a(e){return e?18:60}function r(){return(0,n.jsx)(i().Z,{size:37})}const s=function(e){let{children:t,controlRow:i,bannerText:r,controlRowPaddingTopBottom:s,removeBoxShadow:l,contentPaddingLeftRight:d,controlRowPaddingLeftRight:c,getPaddingTopBottom:u,disableScroller:p,maxWidth:m}=e;const g=(0,o(219727).O7)(),{device:h}=g,f=u?u():h.isMobile?18:36,x=(0,o(846550).yK)((e=>({containerWithScroller:{display:"flex",flexDirection:"column",width:"100%",height:"100%",maxWidth:m??void 0,backgroundColor:e.cardContentBackground},scroller:{flexGrow:1,WebkitOverflowScrolling:"touch",transform:"translateZ(0)",paddingLeft:d??a(h.isMobile),paddingRight:d??a(h.isMobile),paddingTop:r?15:f,paddingBottom:r?22:f},controlRowWithScroller:{flexGrow:0,flexShrink:0,paddingLeft:c??a(h.isMobile),paddingRight:c??a(h.isMobile),paddingTop:s,paddingBottom:s,boxShadow:l?void 0:`0 -1px 0 ${e.regularDividerColor}`},containerWithoutScroller:{paddingLeft:a(h.isMobile),paddingRight:a(h.isMobile)},childrenWithoutScroller:{paddingTop:f,paddingBottom:f},controlRowWithoutScroller:{paddingTop:s,paddingBottom:s,boxShadow:`0 -1px 0 ${e.regularDividerColor}`}})),[m,d,h.isMobile,r,f,c,s,l]);return p?(0,n.jsxs)("div",{style:x.containerWithoutScroller,children:[(0,n.jsx)("div",{style:x.childrenWithoutScroller,children:t}),i&&(0,n.jsx)("div",{style:x.controlRowWithoutScroller,children:i})]}):(0,n.jsxs)("div",{style:x.containerWithScroller,children:[r&&(0,n.jsx)(o(610146).Z,{styleKey:o(500174).v.Blue,isMobile:!1,children:r}),(0,n.jsx)(o(842574).Z,{type:o(520849).Z.All,style:x.scroller,children:t}),i&&(0,n.jsx)("div",{style:x.controlRowWithScroller,children:i})]})}},868614:(e,t,o)=>{o.d(t,{Z:()=>n});o(667294);var i=o(785893);const n=function(e){const t=(0,o(846550).Fg)(),{divider:n,large:a,block:r,children:s,hasMarginTop:l,small:d,style:c,smallMarginBottom:u,isCritical:p}=e,m="full"===n;return(0,i.jsx)("div",{style:{borderBottom:m?`1px solid ${t.regularDividerColor}`:0,marginBottom:m?16:u?2:8,marginTop:l?16:0,paddingBottom:m?12:0,fontSize:m?16:a?14:d?12:14,fontWeight:m?o(707513).Ue.medium:400,width:r?"100%":"auto",color:p?o(568017).ZP.red:t.regularTextColor,...c},children:s})}},579807:(e,t,o)=>{o.d(t,{L:()=>F,Z:()=>H});o(670560),o(267602),o(470928),o(241792);var i=o(667294),n=()=>o(219727),a=()=>o(142735),r=()=>o(846550),s=()=>o(788860),l=()=>o(696459),d=()=>o(844085),c=()=>o(939513),u=()=>o(352230),p=()=>o(332504),m=()=>o(439871),g=()=>o(15409),h=()=>o(615634),f=()=>o(168441),x=()=>o(998901),v=()=>o(965014),y=()=>o(188296),j=()=>o(827973),b=()=>o(448419),C=()=>o(198829),S=()=>o(18748),k=()=>o(255577),M=()=>o(661297),P=()=>o(92175),Z=()=>o(388284),w=()=>o(471645),I=()=>o(667637),T=()=>o(654133),B=()=>o(67961),L=()=>o(504117),R=()=>o(868614),E=()=>o(91253),_=o(785893);function H(e){const{isMobile:t,title:o,caption:s,captionStyle:l,upsellOptions:u,type:g,shouldHighlight:h}=e,f=(0,n().O7)(),{paddingLeftCSS:j,paddingRightCSS:b}=(0,a().VK)((()=>{const{paddingLeftCSS:e,paddingRightCSS:t}=f.WindowSizeStore.state;return{paddingLeftCSS:e,paddingRightCSS:t}}),[f]),[C,S]=(0,i.useState)(!1),k=(0,i.useCallback)((()=>S(!0)),[S]),M=(0,i.useCallback)((()=>S(!1)),[S]),P=(0,i.useContext)(c().U),Z=(0,i.useRef)(null);(0,i.useEffect)((()=>{h&&Z.current&&d().bx({element:Z.current,scrollerContext:P,vertical:{reveal:"closest"},horizontal:void 0,animate:!0})}),[h,Z,P]);const w="toggleToButton"===e.type?e.isOn:void 0,I="custom"===e.type?e.useFlexboxStyle:void 0,E=(0,i.useMemo)((()=>{if(t){if("dropdown"===g)return{display:"flex",flexDirection:"column"};if(w||I)return{}}return{display:"flex",alignItems:"center",justifyContent:"space-between"}}),[t,g,w,I]),H=(0,r().yK)((o=>({container:{...E,paddingLeft:t?j:void 0,paddingRight:t?b:void 0,cursor:C&&!e.disabled?"pointer":e.disabled?"not-allowed":"default",...h?{backgroundColor:o.buttonHoveredBackground,marginLeft:-1*(0,L().kN)(t),marginRight:-1*(0,L().kN)(t),paddingLeft:(0,L().kN)(t),paddingRight:(0,L().kN)(t),marginTop:-1*(0,p().f)(t)/2,marginBottom:-1*(0,p().f)(t)/2,paddingTop:(0,p().f)(t)/2,paddingBottom:(0,p().f)(t)/2}:{}},description:{display:"flex",flexDirection:"column",marginRight:"10%",width:"60%"},captionStyle:{...l},title:{display:"flex",flexDirection:"row"}})),[t,j,b,h,C,l,e.disabled,E]),W="toggle"===e.type||"toggleToButton"===e.type||"custom"===e.type&&!e.disableSettingsItemClick,A=(0,m().M)(),F=(0,m().M)(),D=(0,_.jsxs)("div",{ref:Z,style:H.container,onClick:()=>{if(!(e.disabled||"custom"===e.type&&e.disableSettingsItemClick))return u&&u.shouldUpsell?v().y(f,{from:u.analyticsName,upsell:{type:"product",product:u.subscriptionTier,limit:{type:"none"}}}):void("toggle"===e.type?e.onToggle():"toggleToButton"===e.type?e.onClick():"custom"===e.type&&e.customButton&&i.isValidElement(e.customButton)&&e.customButton.props.onClick&&"function"==typeof e.customButton.props.onClick&&e.customButton.props.onClick())},onMouseEnter:W?k:void 0,onMouseLeave:W?M:void 0,children:[(0,_.jsxs)("div",{style:H.description,children:[(0,_.jsxs)(R().Z,{smallMarginBottom:!0,disabled:e.disabled,isCritical:e.isCritical,children:[(0,_.jsxs)("div",{id:A,style:H.title,children:[o,e.badge]}),u&&u.shouldUpsell&&(0,_.jsx)(y().Z,{subscriptionTier:u.subscriptionTier,analyticsName:u.analyticsName,onClick:()=>v().y(f,{from:u.analyticsName,upsell:{type:"product",product:u.subscriptionTier,limit:{type:"none"}}}),desktopStyle:{display:"inline-block",marginLeft:8,marginTop:-3}})]}),(0,_.jsx)(B().Z,{id:F,style:H.captionStyle,isSmall:!0,isMultiline:!0,children:s})]}),(0,_.jsx)(U,{titleId:A,captionId:F,...e})]});return e.tooltipLabel?(0,_.jsx)(T().Z,{placement:x().Placement.Bottom,alignment:x().Alignment.Center,disableTooltip:e.disableTooltip,renderTooltip:()=>e.tooltipLabel,render:e=>(0,_.jsx)("div",{...e,children:D})}):D}function U(e){const{titleId:t,captionId:o}=e;if("toggle"===e.type)return(0,_.jsx)(w().Z,{"aria-labelledby":t,"aria-describedby":o,on:e.isOn,disabled:e.disabled,isLocked:e.isLocked,lockedTooltip:e.lockedTooltip});if("dropdown"===e.type)return(0,_.jsx)(F,{...e});if("custom"===e.type)return(0,_.jsx)(_.Fragment,{children:e.customButton});if("toggleToButton"===e.type)return e.isOn?(0,_.jsx)("div",{style:{marginTop:12},children:(0,_.jsx)(M().Z,{isLarge:!0,onClick:e.onClick,style:e.buttonStyle,disabled:e.disabled,children:e.buttonLabel})}):(0,_.jsx)(w().Z,{"aria-labelledby":t,"aria-describedby":o,on:!1,onClick:e.onClick,disabled:e.disabled});if("timezonePicker"===e.type){const{currentTimeZone:t,...o}=e;return(0,_.jsx)(E().X,{...o,currentValue:t,enableRecents:!1})}(0,l().t1)(e)}const W=12,A=4;function F(e){var t;const{title:o,isMobile:i,upsellOptions:n,currentOption:a,options:l,info:d,switcherButtons:c,onSelectOption:p,menuStyle:m,buttonStyle:v,buttonHoverStyle:y,isLocked:M,lockedTooltip:w,placementToOrigin:B}=e,L=null===(t=l.find((e=>{let{key:t}=e;return t===a})))||void 0===t?void 0:t.label,R=(0,r().yK)((e=>({button:{marginTop:W,marginBottom:A,marginRight:i?"auto":void 0,paddingLeft:i?12:8,paddingRight:i?12:8,height:i?44:28,border:i?`1px solid ${e.outlineButtonBorder}`:void 0,...v},icon:{width:10,marginLeft:4,fill:e.lightIconColor},lockedContainer:{display:"flex",alignItems:"center",justifyContent:"center"},lockedIcon:{marginTop:W,marginBottom:A,height:16,width:16,color:e.grayButtonBackground}})),[i,v]),E=Boolean(n&&n.shouldUpsell)||e.disabled||M,H=(0,_.jsx)(b().ZP,{popupType:i?b().Z4.SlideUp:b().Z4.Popup,placementToOrigin:B??b().pO.Bottom,originGap:8,renderOrigin:e=>(0,_.jsxs)(P().Z,{...e,isLarge:!0,style:{...R.button,opacity:E?.4:1},hoveredStyle:y,disabled:E,children:[L,(0,h().i)(R.icon)]}),render:e=>{let t;t=i?{menuType:u().o.Modal,title:o,right:(0,_.jsx)(s()._H,{defaultMessage:"Done",id:"settingItem.buttonPopup.done.label"}),onClickRight:e.close}:{menuType:u().o.Popup,width:250,maxHeight:400,...m};const n=[],a=l.map((t=>{let{key:o,label:n,caption:a}=t;return{key:o,action:()=>{p(o),e.close()},render:e=>(0,_.jsx)(j().Z,{...e,title:n,caption:a,shouldWrapCaption:!0,right:L===n?(0,_.jsx)("div",{style:{width:i?16:14},children:(0,g().e)()}):void 0})}}));if(n.push({key:"settings-item-section",render:e=>(0,_.jsx)(Z().Z,{...e}),items:a}),d){const e=d.map((e=>{let{key:t,label:o}=e;return{key:t,action:()=>{},render:e=>(0,_.jsx)(S().ZP,{...e,shouldWrapCaption:!0,caption:o})}}));n.push({key:"info-item-section",render:e=>(0,_.jsx)(Z().Z,{...e,topBorder:!0}),items:e})}if(c&&c.length){const e=c.map((e=>{let{key:t,props:o}=e;return{key:t,action:()=>{},render:()=>(0,_.jsx)(I().Z,{...o})}}));n.push({key:"switcher-item-section",render:e=>(0,_.jsx)(Z().Z,{...e,topBorder:!0}),items:e})}return(0,_.jsx)(C().Z,{...t,children:(0,_.jsx)(k().Z,{type:k().i.Vertical,sections:n,initialFocus:void 0})})}});return M?(0,_.jsx)(T().Z,{placement:x().Placement.Left,alignment:x().Alignment.Start,disableTooltip:!w,renderTooltip:()=>w,render:e=>(0,_.jsxs)("div",{style:R.lockedContainer,...e,children:[(0,f().Q)(R.lockedIcon),H]})}):H}},29090:(e,t,o)=>{o.d(t,{Z:()=>l});o(667294);var i=()=>o(219727),n=()=>o(568017),a=()=>o(154186),r=()=>o(906651),s=o(785893);const l=function(e){let{onClick:t,disabled:i,title:n}=e;return(0,s.jsx)(o(18748).ZP,{title:(0,s.jsx)(d,{onClick:t,disabled:i,title:n})})};function d(e){let{onClick:t,disabled:o,title:l}=e;const d=(0,i().O7)(),{isMobile:c}=d.device,u={width:"100%",color:n().ZP.blue};return c?(0,s.jsx)(a().Z,{onClick:t,mobileFeedback:!0,disabled:o,style:u,children:l}):(0,s.jsx)(r().Z,{onClick:t,disabled:o,style:{width:"100%",maxWidth:300,display:"flex",margin:"auto"},children:l})}},539245:(e,t,o)=>{o.d(t,{Z:()=>s});o(241792);var i=o(667294),n=()=>o(352230),a=o(785893);function r(e){let{tabs:t,selectedIndex:r,onChange:s,separatorIndexes:l,right:d,style:c,rightStyle:u,tabStyle:p,tabTitleStyle:m,selectedTabTitleStyle:g,tabBorderStyle:h,selectedTabStyle:f,readOnly:x,hideTabBorder:v}=e;const y=(0,i.useContext)(n().p),{device:j,WindowSizeStore:b}=(0,o(219727).O7)(),{safePaddingLeft:C,safePaddingRight:S}=(0,o(142735).VK)((()=>({safePaddingLeft:b.getSafePaddingLeftCSS(16),safePaddingRight:b.getSafePaddingRightCSS(16)})),[b]),k=(0,o(846550).yK)((e=>{const t={paddingTop:6,paddingBottom:6,whiteSpace:"nowrap",minWidth:0,flexShrink:0,color:e.mediumTextColor,...p},o=`inset 0 -1px 0 ${e.regularDividerColor}`,i=y.menuType===n().o.Popup,a={fontSize:16,paddingTop:2,paddingLeft:i?16:C,paddingRight:i?16:S,zIndex:2,height:44,background:e.popoverBackground};return{container:{overflowY:"visible",overflowX:"auto",display:"flex",width:"100%",position:"relative",boxShadow:v?void 0:o,...j.isMobile?a:{fontSize:14,paddingLeft:8,paddingRight:8,zIndex:1},...c},separator:{display:"inline-flex",alignItems:"center",margin:"0 4px",paddingBottom:4,whiteSpace:"nowrap",minWidth:0,flexShrink:0,color:e.regularDividerColor},mobile:{},tab:t,selectedTab:{...t,position:"relative",color:e.regularTextColor,...f},border:{borderBottom:`2px solid ${e.regularTextColor}`,position:"absolute",bottom:0,left:8,right:8,...h},rightContainer:{flexGrow:1,display:"flex",alignItems:"center",justifyContent:"flex-end",color:e.mediumTextColor,...u}}}),[y.menuType,j.isMobile,u,C,S,f,c,h,p,v]);return(0,a.jsxs)("div",{className:"hide-scrollbar",style:k.container,children:[t.map(((e,t)=>{const n=t===r;return(0,a.jsxs)(i.Fragment,{children:[(0,a.jsxs)("div",{style:n?k.selectedTab:k.tab,children:[(0,a.jsx)(o(92175).Z,{style:{...m,...n?g:{}},onClick:()=>s(t),disabled:x,mobileFeedback:j.isMobile,isLightGray:!Boolean(n),children:e}),n&&(0,a.jsx)("div",{style:k.border})]},`tabButton-${t}`),l&&l.includes(t)&&(0,a.jsx)("div",{style:k.separator,className:"notranslate",children:"|"},`${t}-separator`)]},t)})),d&&(0,a.jsx)("div",{style:k.rightContainer,children:d})]})}const s=i.memo(r)},551693:(e,t,o)=>{o.d(t,{Z:()=>G,z:()=>K});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624);var i=o(667294),n=()=>o(219727),a=()=>o(142735),r=()=>o(846550),s=()=>o(659278),l=()=>o(225339),d=()=>o(717740),c=()=>o(989478),u=()=>o(788860),p=()=>o(513670),m=()=>o(696459),g=()=>o(707513),h=()=>o(636340),f=()=>o(102182),x=()=>o(269299),v=()=>o(109757),y=()=>o(715139),j=()=>o(433989),b=()=>o(291198),C=()=>o(94967),S=()=>o(198829),k=()=>o(92175),M=()=>o(906651),P=()=>o(654133),Z=()=>o(205228),w=()=>o(594546),I=()=>o(606757),T=()=>o(487270),B=()=>o(733193),L=()=>o(363165),R=()=>o(352230),E=()=>o(415042),_=()=>o(345192),H=()=>o(998901),U=()=>o(180099),W=()=>o(933539),A=()=>o(749826),F=()=>o(148882),D=()=>o(338530),V=o(785893);const z=(0,u().vU)({nameInputPlaceholder:{defaultMessage:"have-fun-with-it",id:"customEmojiUploadPopup.nameInput.placeholder"},urlPasteInputPlaceholder:{defaultMessage:"Paste a link to an image...",id:"customEmojiUploadPopup.urlPasteInput.placeholder"},nameInputDuplicateError:{defaultMessage:"Name already taken",id:"customEmojiUploadPopup.nameInput.duplicateError"},nameInputCharacterError:{defaultMessage:"Name can only contain lowercase letters, numbers, hyphens, or underscores",id:"customEmojiUploadPopup.nameInput.characterError"},nameInputLengthError:{defaultMessage:"Name must be less than 50 characters",id:"customEmojiUploadPopup.nameInput.lengthError"},fileUploadImageError:{defaultMessage:"Only images are supported",id:"customEmojiUploadPopup.fileUpload.imageError"},urlPasteHintImageError:{defaultMessage:"Pasted link does not contain an image.{br}Use {keyboardShortcut} to paste a different link",id:"customEmojiUploadPopup.urlPasteHint.imageError"},urlPasteInputImageError:{defaultMessage:"Pasted link does not contain an image",id:"customEmojiUploadPopup.urlPasteInput.imageError"},customEmojiLimitError:{defaultMessage:"Your workspace has reached the custom emoji limit of {customEmojiLimit}",id:"customEmojiUploadPopup.customEmojiLimit.error"},uploadReplaceButton:{defaultMessage:"Replace",id:"customEmojiUploadPopup.uploadButton.replace"}}),O="\\p{Ll}\\p{Lo}\\d_-";function K(e){const t=(0,n().O7)(),o=(0,u().YB)(),[j,B]=(0,i.useState)(""),[E,_]=(0,i.useState)(null),[K,G]=(0,i.useState)(null),[J,Y]=(0,i.useState)(null),[Q,X]=(0,i.useState)(!1),[ee,te]=(0,i.useState)(""),oe=e.allowUrlPaste&&t.device.isDesktop,ie=e.allowUrlPaste&&t.device.isMobile,ne=(0,a().VK)((()=>W().Z.state.store),[]),ae=(0,a().VK)((()=>null==ne?void 0:ne.getName()),[ne]),re=(0,a().VK)((()=>(0,I().Jy)()),[]),se=(0,a().VK)((()=>{var e;return re?(null===(e=U().Z.getData(t,{spaceId:re.id}))||void 0===e?void 0:e.names)??new Set:new Set}),[t,re]),le=(0,a().VK)((()=>D().Z.state.emojiByName),[]),de=(0,a().VK)((()=>(0,I().Zr)({spaceStore:re})),[re]),ce=(0,a().VK)((()=>A().default.getConfigKey("custom_emojis_config","limit")),[]);function ue(e){if(B(e),0===e.length)return void _(null);new RegExp(`^[${O}]*$`,"u").test(e)?e.length>50?_(o.formatMessage(z.nameInputLengthError)):e===ae||!se.has(e)&&!le.hasOwnProperty(e)?_(null):_(o.formatMessage(z.nameInputDuplicateError)):_(o.formatMessage(z.nameInputCharacterError))}function pe(e){const t=(0,l().Wv)({source:e,secureFileConfigRootpath:Z().default.secureFileConfig.rootPath,secureFileConfigHostname:Z().default.secureFileConfig.hostname}),o=t?t.link:e,i=new Image;i.src=o,i.onload=()=>{G({type:"url",url:o,isExistingImage:!1}),Y(null)},i.onerror=()=>{Y(oe?z.urlPasteHintImageError:z.urlPasteInputImageError)}}(0,i.useEffect)((()=>{null!=ne&&ne.isDefined()&&(B(ne.getName()),G({type:"url",url:ne.getUrl(),isExistingImage:!0}))}),[ne]);const me=void 0!==re&&(!e.confirmToAdd||Q),ge=void 0===ne&&se.size>=ce,he=me?Boolean(!j)||Boolean(!K)||Boolean(E)||j===ae&&(null==K?void 0:K.isExistingImage)||ge:Boolean(!K);const fe=function(e){const{customEmojiLimitReached:t}=e,o=(0,n().O7)();return(0,r().yK)((e=>({wrapper:{padding:"0 16px",display:"flex",flexDirection:"column",fontSize:g().JB.UIRegular.desktop},title:{marginTop:12,fontSize:g().JB.UIRegular.desktop,color:e.text.primary,fontWeight:g().Ue.semibold},description:{marginTop:2,color:e.text.secondary,fontSize:g().JB.UISmall.desktop},errorDescription:{marginTop:2,color:e.text.uiRedPrimary,fontSize:g().JB.UISmall.desktop},textInputContainer:{marginTop:20},textInputLabel:{marginBottom:6,color:e.text.secondary,fontWeight:g().Ue.medium,fontSize:g().JB.UISmall.desktop},nameErrorText:{marginTop:10,color:e.text.uiRedPrimary,fontSize:g().JB.UISmall.desktop},imageErrorText:{marginTop:10,color:e.text.uiRedPrimary,fontSize:g().JB.UISmall.desktop,textAlign:"center"},checkboxContainer:{marginTop:12,display:"flex",alignItems:"center",gap:8,fontSize:g().JB.UIRegular.desktop,...t&&{color:e.text.quaternary}},buttonFooter:{marginTop:16,marginBottom:12,display:"flex",flexDirection:o.device.isMobile?"column-reverse":"row",gap:8,justifyContent:"space-between",alignItems:"center"},secondaryButton:{color:e.text.secondary},primaryButton:{...o.device.isMobile&&{width:"100%"}},pastePrompt:{marginTop:10,color:e.text.tertiary,textAlign:"center",fontSize:g().JB.UISmall.desktop},disabledCheckbox:{stroke:e.stroke.secondary},tooltip:{maxWidth:240,textWrap:"wrap"},divider:{width:19,height:1,borderBottom:`1px solid ${e.darkDividerColor}`},dividerContainer:{display:"flex",gap:4,alignItems:"center",justifyContent:"center",marginTop:10,marginBottom:10,color:e.text.tertiary,textAlign:"center",fontSize:g().JB.UISmall.desktop}})),[o.device.isMobile,t])}({customEmojiLimitReached:ge}),xe=e.showTitle?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("div",{style:fe.title,children:ne?(0,V.jsx)(u()._H,{id:"customEmojiUploadPopup.title.edit",defaultMessage:"Edit custom emoji"}):(0,V.jsx)(u()._H,{id:"customEmojiUploadPopup.title.add",defaultMessage:"Add custom emoji"})}),ge?(0,V.jsx)("div",{style:fe.errorDescription,children:(0,V.jsx)(u()._H,{...z.customEmojiLimitError,values:{customEmojiLimit:ce.toLocaleString()}})}):(0,V.jsx)("div",{style:fe.description,children:(0,V.jsx)(u()._H,{id:"customEmojiUploadPopup.description",defaultMessage:"Custom emoji can be used by anyone in your workspace"})})]}):null,ve=(0,V.jsx)(N,{image:K,onFileChanged:e=>{if(null===e)return void G(null);(null==e?void 0:e.name)&&(""===j||"file"===(null==K?void 0:K.type)&&$(K.file.name)===j)&&ue($(e.name)),G({file:e,type:"file"})},isSavingAsCustomEmoji:me,largeEmoji:e.largeEmoji,hideReplaceButton:e.allowUrlPaste,setError:Y,disabled:ge&&me}),ye=oe&&null===K&&!Boolean(J)?(0,V.jsx)("div",{style:fe.pastePrompt,children:(0,V.jsx)(u()._H,{id:"customEmojiUploadPopup.pastePrompt.label",defaultMessage:"or {keyboardShortcut} to paste an image link",values:{keyboardShortcut:(0,L().mB)({name:"paste",environment:t})}})}):null,je=ie&&null===K?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)("div",{style:fe.dividerContainer,children:[(0,V.jsx)("div",{style:fe.divider}),(0,V.jsx)(u()._H,{id:"customEmojiUploadPopup.divider.label",defaultMessage:"or"}),(0,V.jsx)("div",{style:fe.divider})]}),(0,V.jsx)(b().Z,{placeholder:o.formatMessage(z.urlPasteInputPlaceholder),value:ee,onChange:e=>te(e.target.value),type:"text",autoComplete:"off"})]}):null,be=Boolean(J)?(0,V.jsx)("div",{style:fe.imageErrorText,children:(0,V.jsx)(u()._H,{...J,values:{br:(0,V.jsx)("br",{}),keyboardShortcut:(0,L().mB)({name:"paste",environment:t})}})}):null,Ce=t.device.isDesktop&&de&&e.confirmToAdd&&null!==K?(0,V.jsx)(P().Z,{style:fe.tooltip,placement:H().Placement.Bottom,alignment:H().Alignment.Start,disableTooltip:!ge,renderTooltip:()=>(0,V.jsx)(u()._H,{...z.customEmojiLimitError,values:{customEmojiLimit:ce.toLocaleString()}}),render:e=>(0,V.jsxs)("label",{...e,style:fe.checkboxContainer,htmlFor:"confirmToAddCheckbox",children:[(0,V.jsx)(y().Z,{id:"confirmToAddCheckbox",size:14,checked:Q,onClick:()=>X(!Q),disabled:ge,stroke:ge?fe.disabledCheckbox.stroke:void 0}),(0,V.jsx)(u()._H,{id:"customEmojiUploadPopup.confirmToAddCheckbox.label",defaultMessage:"Add to workspace emoji library"})]})}):null,Se=me&&(!e.allowUrlPaste||e.allowUrlPaste&&null!==K)?(0,V.jsxs)("label",{style:fe.textInputContainer,htmlFor:"emojiName",children:[(0,V.jsx)("div",{style:fe.textInputLabel,children:(0,V.jsx)(u()._H,{id:"customEmojiUploadPopup.input.label",defaultMessage:"Emoji name"})}),(0,V.jsx)(b().Z,{id:"emojiName",placeholder:o.formatMessage(z.nameInputPlaceholder),value:j,onChange:e=>ue(e.target.value),type:"text",autoFocus:!0,focus:!0,onSubmit:e=>{e.preventDefault()},autoComplete:"off",disabled:ge}),Boolean(E)&&(0,V.jsx)("div",{style:fe.nameErrorText,children:E})]}):null,ke=(0,V.jsxs)("div",{style:fe.buttonFooter,children:[e.allowUrlPaste&&null!==K?(0,V.jsx)(k().Z,{style:fe.secondaryButton,onClick:()=>{G(null),Y(null),B(""),_(null),X(!1),te("")},children:(0,V.jsx)(u()._H,{id:"customEmojiUploadPopup.backButton.label",defaultMessage:"Back"})}):t.device.isDesktop?(0,V.jsx)(k().Z,{style:fe.secondaryButton,onClick:()=>{var t;W().Z.dismiss(),null===(t=e.onCancel)||void 0===t||t.call(e)},children:(0,V.jsx)(u()._H,{id:"customEmojiUploadPopup.cancelButton.label",defaultMessage:"Cancel"})}):null,ie&&null===K?(0,V.jsx)(M().Z,{onClick:()=>pe(ee),disabled:0===ee.length,style:fe.primaryButton,children:(0,V.jsx)(u()._H,{id:"customEmojiUploadPopup.nextButton.label",defaultMessage:"Next"})}):(0,V.jsx)(M().Z,{onClick:function(){var o;he||(me?void 0===ne?((0,w().j)({environment:t,event:{eventName:"create_custom_emoji",eventProperties:{entrypoint:e.entrypoint,is_first_emoji:0===se.size}}}),function(e){const{environment:t,name:o,currentSpaceStore:i,uploadFileEventHandlers:n,image:a}=e,r=async e=>{const a=(0,T().$x)({environment:t,table:d().p,spaceId:i.getSpaceId()});if(x().createAndCommit({userAction:"customEmojiActions.createCustomEmoji",environment:t,canUndo:!0,perform:n=>{h().ae({environment:t,table:d().p,inMemoryRecordCache:i.inMemoryRecordCache,transaction:n,value:{id:a.id,url:e,name:o,file_ids:[],space_id:a.spaceId,created_by_id:t.currentUser.id,created_by_table:c().KJ,created_time:Date.now(),alive:!0}})}}),await F().transactionQueue.awaitRecordTransaction(a),f().oV({label:(0,V.jsx)(u()._H,{id:"uploadCustomEmoji.success",defaultMessage:"{name} has been added to your workspace",values:{name:o}})}),null!=n&&n.onComplete){const e=s().xo.toString(s().xo.fromPointer(a));n.onComplete(e)}};"file"===a.type?v().cT({...n,environment:t,file:a.file,bucket:"public",onComplete:r}):"url"===a.type?r(a.url):(0,m().t1)(a);W().Z.dismiss()}({environment:t,name:j,currentSpaceStore:re,uploadFileEventHandlers:e.uploadFileEventHandlers,image:K})):async function(e){const{environment:t,name:o,existingEmojiStore:i,image:n}=e,a=i.getModel();if(!a)return;if(n.isExistingImage)x().createAndCommit({userAction:"customEmojiActions.rename",environment:t,canUndo:!0,perform:e=>{x().applyOperation({store:i,operation:a.ops.rename(o),transaction:e})}}),await F().transactionQueue.awaitRecordTransaction(i.pointer),f().oV({label:(0,V.jsx)(q,{name:o})});else{const e=async e=>{x().createAndCommit({userAction:"customEmojiActions.replaceImageAndRename",environment:t,canUndo:!0,perform:t=>{x().applyOperation({store:i,operation:a.ops.setUrl(e),transaction:t}),x().applyOperation({store:i,operation:a.ops.rename(o),transaction:t})}}),await F().transactionQueue.awaitRecordTransaction(i.pointer),f().oV({label:(0,V.jsx)(q,{name:o})})};"file"===n.type?v().cT({environment:t,file:n.file,bucket:"public",onComplete:e}):"url"===n.type?e(n.url):(0,m().t1)(n)}W().Z.dismiss()}({environment:t,name:j,existingEmojiStore:ne,image:K}):null===(o=e.onUploadWithoutSaving)||void 0===o||o.call(e,K))},disabled:he,style:fe.primaryButton,children:(0,V.jsx)(u()._H,{id:"customEmojiUploadPopup.saveButton.label",defaultMessage:"Save"})})]});let Me;return Me=t.device.isMobile?{menuType:R().o.ActionSheet}:{menuType:R().o.Popup,minWidth:280},(0,V.jsx)(S().Z,{...Me,children:(0,V.jsx)(C().Z,{debugName:"CustomEmojiUploadPopup",capture:!0,onUp:p().yR,onDown:p().yR,onLeft:p().yR,onRight:p().yR,onBackspace:p().yR,onSelectAll:p().yR,onUndo:p().yR,onRedo:p().yR,onTab:p().yR,onUntab:p().yR,onPaste:oe&&null===K?function(e){e.preventDefault(),pe(e.clipboardData.getData("text/plain"))}:p().yR,children:(0,V.jsxs)("div",{style:fe.wrapper,children:[xe,ve,ye,je,be,Ce,Se,ke]})})})}function N(e){const t=(0,u().YB)(),[o,n]=(0,i.useState)(null),{onFileChanged:a,image:s,isSavingAsCustomEmoji:l,largeEmoji:d,hideReplaceButton:c,setError:p,disabled:h}=e;(0,i.useEffect)((()=>{if(null!==s)if("file"===s.type){const e=new FileReader;e.onload=e=>{e.target&&"string"==typeof e.target.result&&n(e.target.result)},e.readAsDataURL(s.file)}else"url"===s.type?n(s.url):(0,m().t1)(s);else n(null)}),[s]);const f=(0,r().yK)((e=>({uploadIcon:{width:19,height:19,marginRight:8,color:e.icon.secondary},wrapper:{marginTop:20,display:"flex",flexDirection:"column",alignItems:"stretch"},dropZone:{backgroundColor:e.inputBackground,borderRadius:4},dropZoneInnerEmpty:{height:"100%",display:"flex",flexDirection:"row",padding:14,color:e.text.secondary,justifyContent:"center"},dropZoneInnerWithEmoji:{display:"flex",flexDirection:"column",padding:d?16:12,...!c&&{paddingBottom:4},alignItems:"center",gap:4},buttonCaption:{fontSize:g().JB.UISmall.desktop,color:e.text.secondary,fontWeight:g().Ue.medium},buttonIcon:{fill:e.icon.secondary,marginRight:4},previewLabel:{fontSize:g().JB.UISmall.desktop,color:e.text.secondary,marginBottom:4},emojiContainer:{display:"flex",flexDirection:"row",alignItems:"center",gap:6},emojiImage:{width:d?80:48,height:d?80:48,padding:d?6:8,borderRadius:8,borderWidth:1,borderStyle:"solid",borderColor:e.darkDividerColor,objectFit:l?"contain":"cover"},darkBackground:{background:e.primaryBlack},lightBackground:{background:e.white}})),[l,d,c]),x=(0,i.useCallback)((e=>{p(null),a(e??null)}),[a,p]),y=(0,i.useCallback)((async()=>{const e=await v().y({multiple:!1,accept:"image/jpeg, image/png, image/gif, image/webp, image/avif, image/svg+xml"});e.length&&((0,B().Gh)({fileMimeType:e[0].type,allowedType:B().LR})?x(e[0]):p(z.fileUploadImageError))}),[x,p]);return h?(0,V.jsx)("div",{style:f.wrapper,children:(0,V.jsx)("div",{style:f.dropZone,children:(0,V.jsxs)(k().Z,{style:f.dropZoneInnerEmpty,disabled:!0,disabledFeedback:!0,children:[(0,E().A)(f.uploadIcon),(0,V.jsx)(u()._H,{id:"customEmojiUploadPopup.uploadButton.label",defaultMessage:"Upload an image"})]})})}):(0,V.jsx)("div",{style:f.wrapper,children:(0,V.jsx)(j().Q,{type:B().LR,style:f.dropZone,dropTargetKey:"customEmoji",onDropFile:e=>{"invalidFileDrop"!==e.type?(p(null),e.file&&x(e.file)):p(z.fileUploadImageError)},children:o?(0,V.jsxs)("div",{style:f.dropZoneInnerWithEmoji,children:[(0,V.jsx)("div",{style:f.previewLabel,children:(0,V.jsx)(u()._H,{id:"customEmojiUploadPopup.preview.label",defaultMessage:"Preview"})}),(0,V.jsxs)("div",{style:f.emojiContainer,children:[(0,V.jsx)("img",{style:{...f.emojiImage,...f.lightBackground},src:o,alt:"Light Mode Image"}),(0,V.jsx)("img",{style:{...f.emojiImage,...f.darkBackground},src:o,alt:"Dark Mode Image"})]}),!c&&(0,V.jsx)(k().Z,{icon:e=>(0,_().n)({...e,...f.buttonIcon}),onClick:y,"aria-label":t.formatMessage(z.uploadReplaceButton),children:(0,V.jsx)("div",{style:f.buttonCaption,children:t.formatMessage(z.uploadReplaceButton)})})]}):(0,V.jsxs)(k().Z,{style:f.dropZoneInnerEmpty,onClick:y,children:[(0,E().A)(f.uploadIcon),(0,V.jsx)(u()._H,{id:"customEmojiUploadPopup.uploadButton.label",defaultMessage:"Upload an image"})]})})})}const G=function(){const{open:e,originRect:t,entrypoint:i}=(0,a().VK)((()=>W().Z.state.open?{open:!0,originRect:W().Z.state.originRect,entrypoint:W().Z.state.entrypoint}:{open:!1,originRect:void 0,entrypoint:void 0}),[]),n=(0,a().VK)((()=>{if(W().Z.state.open)return W().Z.state.uploadFileEventHandlers}),[]);return(0,V.jsx)(o(967092).ZP,{popupType:o(104088).k.Popup,open:e,originRect:t,placementToOrigin:H().Placement.Bottom,alignmentToOrigin:H().Alignment.Start,onDismiss:()=>W().Z.dismiss(),onClosed:()=>W().Z.reset(),render:()=>(0,V.jsx)(K,{allowUrlPaste:!1,largeEmoji:!1,showTitle:!0,confirmToAdd:!1,entrypoint:i,uploadFileEventHandlers:n}),sameWidthAsOrigin:!1})};function q(e){let{name:t}=e;return(0,V.jsx)(u()._H,{id:"editCustomEmoji.success",defaultMessage:"{name} has been edited",values:{name:t}})}function $(e){let t=e;const o=e.lastIndexOf(".");-1!==o&&(t=e.slice(0,o));const i=new RegExp(`[^${O}]`,"gu");return t.toLocaleLowerCase().replace(i,"-")}},901526:(e,t,o)=>{o.d(t,{I:()=>ie,h:()=>re});o(670560),o(725847),o(267602),o(916054),o(653476),o(470928),o(749411),o(30005),o(241792),o(228244);var i=()=>o(790424),n=o(667294),a=()=>o(219727),r=()=>o(732811),s=()=>o(142735),l=()=>o(846550),d=()=>o(642240),c=()=>o(611382),u=()=>o(659278),p=()=>o(245015),m=()=>o(788860),g=()=>o(568017),h=()=>o(513670),f=()=>o(696459),x=()=>o(707513),v=()=>o(571896),y=()=>o(178498),j=()=>o(745740),b=()=>o(255577),C=()=>o(388284),S=()=>o(654133),k=()=>o(606757),M=()=>o(761936),P=()=>o(466970),Z=()=>o(827282),w=o(785893);const I=(0,Z().IU)("emojiActivities",{viewBox:"0 0 28 28",svg:(0,w.jsx)("path",{d:"M14.2227 22.3281C9.87109 22.3281 6.25391 18.7109 6.25391 14.3594C6.25391 10 9.86328 6.39062 14.2148 6.39062C18.5742 6.39062 22.1914 10 22.1914 14.3594C22.1914 18.7109 18.582 22.3281 14.2227 22.3281ZM14.6602 11.5547L16.8477 13.25L18.8164 12.4531L19.5586 10.0078C18.7852 9.07031 17.7852 8.33594 16.6367 7.89844L14.6602 9.5V11.5547ZM9.62891 12.4531L11.5977 13.25L13.793 11.5547V9.51562L11.7852 7.89844C10.6523 8.33594 9.65234 9.07031 8.88672 10L9.62891 12.4531ZM7.31641 14.3828C7.32422 15.7344 7.72266 16.9922 8.41797 18.0625L11.0742 18.0234L12.168 16.625L11.3477 14.0859L9.31641 13.2656L7.31641 14.3828ZM17.3633 18.0547L20.0117 18.0938C20.7148 17.0156 21.1289 15.7266 21.1289 14.3828L19.1289 13.2656L17.0977 14.0859L16.2695 16.6484L17.3633 18.0547ZM14.2227 21.2656C14.8867 21.2656 15.5273 21.1719 16.1367 20.9922L16.6914 18.6016L15.6914 17.3203H12.7227L11.7461 18.5703L12.3086 20.9922C12.918 21.1719 13.5586 21.2656 14.2227 21.2656Z"})}),T=(0,Z().IU)("emojiCustom",{viewBox:"0 0 28 28",svg:(0,w.jsx)("path",{d:"M8.295 13.355c-.994 0-1.494-.5-1.494-1.533V8.325c0-1.032.5-1.525 1.494-1.525h3.566c.994 0 1.494.493 1.494 1.525v3.497c0 1.032-.5 1.533-1.494 1.533H8.296zm7.853 0c-1.001 0-1.502-.5-1.502-1.533V8.325c0-1.032.5-1.525 1.502-1.525h3.559c.993 0 1.494.493 1.494 1.525v3.497c0 1.032-.5 1.533-1.494 1.533h-3.56zM8.31 12.252h3.528c.274 0 .415-.141.415-.43V8.325c0-.281-.141-.422-.415-.422H8.31c-.273 0-.406.14-.406.422v3.497c0 .289.133.43.406.43zm7.853 0h3.528c.274 0 .407-.141.407-.43V8.325c0-.281-.133-.422-.407-.422h-3.527c-.282 0-.415.14-.415.422v3.497c0 .289.133.43.414.43zM8.295 21.2c-.994 0-1.494-.493-1.494-1.525V16.17c0-1.025.5-1.526 1.494-1.526h3.566c.994 0 1.494.5 1.494 1.526v3.504c0 1.032-.5 1.525-1.494 1.525H8.296zm7.853 0c-1.001 0-1.502-.493-1.502-1.525V16.17c0-1.025.5-1.526 1.502-1.526h3.559c.993 0 1.494.5 1.494 1.526v3.504c0 1.032-.5 1.525-1.494 1.525h-3.56zM8.31 20.097h3.528c.274 0 .415-.14.415-.422v-3.497c0-.289-.141-.43-.415-.43H8.31c-.273 0-.406.141-.406.43v3.497c0 .281.133.422.406.422zm7.853 0h3.528c.274 0 .407-.14.407-.422v-3.497c0-.289-.133-.43-.407-.43h-3.527c-.282 0-.415.141-.415.43v3.497c0 .281.133.422.414.422z"})}),B=(0,Z().IU)("emojiFlags",{viewBox:"0 0 28 28",svg:(0,w.jsx)("path",{d:"M8.49902 22.0312C8.17871 22.0312 7.90527 21.7656 7.90527 21.4453V8.46094C7.90527 7.75 8.25684 7.34375 8.7959 7.10156C9.38965 6.83594 9.85059 6.70312 11.0693 6.70312C13.9678 6.70312 15.7725 8.11719 18.5225 8.11719C19.8662 8.11719 20.585 7.78906 20.9678 7.78906C21.4209 7.78906 21.7803 8.03125 21.7803 8.45312V16.3828C21.7803 17.1016 21.4287 17.5078 20.8896 17.75C20.2959 18.0156 19.8428 18.1484 18.624 18.1484C15.874 18.1484 14.0615 16.7344 11.1709 16.7344C10.0225 16.7344 9.28809 17.0156 9.09277 17.1016V21.4453C9.09277 21.7734 8.82715 22.0312 8.49902 22.0312ZM18.624 16.9688C19.8428 16.9688 20.4912 16.6094 20.6006 16.3516V9.04688C20.0771 9.19531 19.374 9.29688 18.5225 9.29688C15.6553 9.29688 13.8193 7.88281 11.0693 7.88281C9.85059 7.88281 9.20215 8.24219 9.09277 8.5V15.8359C9.53027 15.6562 10.3115 15.5547 11.1709 15.5547C14.1787 15.5547 16.0225 16.9688 18.624 16.9688Z"})}),L=(0,Z().IU)("emojiFood",{viewBox:"0 0 28 28",svg:(0,w.jsx)("path",{d:"M7.89355 23.2188C7.13574 23.6953 6.52637 23.4375 6.12793 23.0312C5.66699 22.5703 5.4873 21.9453 5.9248 21.2422L12.4482 10.875C13.9639 8.46875 16.2373 7.82031 18.1279 9.17188C17.9248 7.57812 18.4404 5.30469 19.5654 5.5625C20.2139 5.72656 20.2842 6.58594 20.0498 7.53906C20.9873 6.39062 22.1826 5.61719 22.8779 6.3125C23.5732 7.01562 22.7998 8.21094 21.6514 9.14844C22.6123 8.91406 23.4795 8.98438 23.6357 9.64844C23.9014 10.7656 21.5811 11.2812 19.9873 11.0625C21.2998 12.9688 20.6592 15.2031 18.2842 16.6953L7.89355 23.2188ZM10.5732 18.8125C10.7764 18.6094 11.0889 18.6016 11.2998 18.8125L11.8389 19.3438L12.7061 18.7969L11.9717 18.0859C11.7607 17.875 11.7686 17.5625 11.9639 17.3594C12.1748 17.1562 12.4873 17.1484 12.6904 17.3516L13.5967 18.2422L17.6748 15.6797C19.8076 14.3359 20.0732 12.7266 18.5967 11.2266L17.9326 10.5469C16.6279 9.23438 15.2061 9.28906 13.9639 10.7812L15.4717 12.2656C15.6826 12.4766 15.6826 12.7812 15.4873 12.9844C15.2842 13.1953 14.9717 13.2031 14.7607 12.9922L13.3701 11.625L12.8232 12.4922L13.7061 13.3594C13.917 13.5703 13.917 13.8828 13.7139 14.0859C13.5029 14.2891 13.1982 14.2969 12.9873 14.0859L12.2686 13.3828L6.94043 21.8516C6.77637 22.1016 7.04199 22.3594 7.2998 22.1953L10.9482 19.9062L10.5811 19.5391C10.3701 19.3359 10.3701 19.0156 10.5732 18.8125Z"})}),R=(0,Z().IU)("emojiNature",{viewBox:"0 0 28 28",svg:(0,w.jsx)("path",{d:"M5.83008 10.4766C5.83008 10.0547 5.87695 8.71875 6.06445 7.96094C6.2832 7.0625 7.18164 7.10938 7.63477 7.64062C8.49414 8.61719 9.5332 8.98438 10.7363 8.98438C12.166 8.98438 13.4551 8.625 14.7285 8.625C18.4238 8.625 21.1035 11 21.1035 14.2891C21.1035 15.2109 20.9082 16.0625 20.5488 16.8125C21.3535 17.9531 22.3848 19.6016 22.3848 20.5859C22.3848 21.2344 21.9238 21.7734 21.3457 21.7734C21.0723 21.7734 20.8145 21.6406 20.6973 21.2656C20.3301 20.0859 20.1191 19.0469 19.6504 18.1484C18.5098 19.3906 16.7676 20.1328 14.6973 20.1328C9.32227 20.1328 5.83008 16.3047 5.83008 10.4766ZM10.4004 12.2969C10.2832 11.9453 10.666 11.7109 10.916 12.0469C11.8145 13.2188 13.127 13.6094 14.6113 13.8594C16.9551 14.2422 18.5879 14.8438 19.6816 15.8125C19.8379 15.3438 19.9238 14.8359 19.9238 14.2891C19.9238 11.6719 17.7754 9.80469 14.7285 9.80469C14.2051 9.80469 13.6582 9.875 13.0332 9.96094C12.3457 10.0547 11.5801 10.1641 10.7363 10.1641C9.47852 10.1641 8.10352 9.71094 7.22852 8.91406C7.1582 8.85156 7.10352 8.85938 7.08789 8.96094C7.01758 9.38281 7.00977 9.96094 7.00977 10.4766C7.00977 15.6562 9.98633 18.9531 14.6973 18.9531C16.541 18.9531 18.041 18.2734 18.9551 17.1484C17.9316 15.9688 16.7129 15.4766 14.2129 14.8828C12.3691 14.4297 10.8926 13.8203 10.4004 12.2969Z"})}),E=(0,Z().IU)("emojiObjects",{viewBox:"0 0 29 28",svg:(0,w.jsx)("path",{d:"M13.6611 3.90625V2.40625C13.6611 2.03906 13.9658 1.72656 14.333 1.72656C14.7002 1.72656 15.0127 2.03906 15.0127 2.40625V3.90625C15.0127 4.26562 14.708 4.57812 14.333 4.57812C13.9658 4.57812 13.6611 4.26562 13.6611 3.90625ZM8.85645 6.45312L7.79395 5.38281C7.53613 5.125 7.53613 4.71094 7.79395 4.4375C8.05957 4.17969 8.49707 4.17969 8.74707 4.4375L9.80176 5.50781C10.0596 5.76562 10.0674 6.1875 9.80176 6.45312C9.54395 6.71875 9.11426 6.71094 8.85645 6.45312ZM18.8564 5.50781L19.9268 4.4375C20.1846 4.17969 20.5986 4.17969 20.8721 4.4375C21.1299 4.71094 21.1299 5.125 20.8721 5.38281L19.8018 6.45312C19.5439 6.71094 19.1299 6.71875 18.8564 6.45312C18.5908 6.1875 18.5986 5.76562 18.8564 5.50781ZM14.333 6.03125C17.0908 6.03125 19.2705 8.03906 19.2705 10.5938C19.2705 13.4219 17.5752 14.125 17.0986 19.0078C17.0752 19.2812 16.9268 19.4531 16.6377 19.4531H12.0283C11.7393 19.4531 11.5908 19.2812 11.5596 19.0078C11.0908 14.125 9.40332 13.4219 9.40332 10.5938C9.40332 8.03906 11.5674 6.03125 14.333 6.03125ZM14.333 7.17969C12.2783 7.17969 10.5518 8.60938 10.5518 10.5938C10.5518 12.6875 11.9346 13.1719 12.6064 18.3047H16.0596C16.7314 13.1719 18.1221 12.6875 18.1221 10.5938C18.1221 8.60938 16.3877 7.17969 14.333 7.17969ZM7.25488 11.6484H5.75488C5.39551 11.6484 5.09082 11.3359 5.09082 10.9766C5.09082 10.6094 5.39551 10.2969 5.75488 10.2969H7.25488C7.62207 10.2969 7.94238 10.6016 7.94238 10.9766C7.94238 11.3438 7.62207 11.6484 7.25488 11.6484ZM22.8955 11.6484H21.3955C21.0361 11.6484 20.7236 11.3438 20.7236 10.9766C20.7236 10.6016 21.0361 10.2969 21.3955 10.2969H22.8955C23.2627 10.2969 23.5752 10.6094 23.5752 10.9766C23.5752 11.3359 23.2627 11.6484 22.8955 11.6484ZM12.0049 21.0469C11.7549 21.0469 11.5596 20.8594 11.5596 20.6016C11.5596 20.3438 11.7549 20.1562 12.0049 20.1562H16.6611C16.9189 20.1562 17.1143 20.3438 17.1143 20.6016C17.1143 20.8594 16.9189 21.0469 16.6611 21.0469H12.0049ZM14.333 23.1875C13.1768 23.1875 12.2002 22.6094 12.1533 21.75H16.5127C16.458 22.6094 15.4814 23.1875 14.333 23.1875Z"})}),_=(0,Z().IU)("emojiPeople",{viewBox:"0 0 28 28",svg:(0,w.jsx)("path",{d:"M14.5557 22.3281C10.2041 22.3281 6.58691 18.7109 6.58691 14.3594C6.58691 10 10.1963 6.39062 14.5479 6.39062C18.9072 6.39062 22.5244 10 22.5244 14.3594C22.5244 18.7109 18.915 22.3281 14.5557 22.3281ZM14.5557 21C18.2432 21 21.1963 18.0469 21.1963 14.3594C21.1963 10.6719 18.2354 7.71875 14.5479 7.71875C10.8604 7.71875 7.92285 10.6719 7.92285 14.3594C7.92285 18.0469 10.8682 21 14.5557 21ZM12.2354 13.6641C11.7432 13.6641 11.3135 13.2188 11.3135 12.5938C11.3135 11.9609 11.7432 11.5156 12.2354 11.5156C12.7354 11.5156 13.165 11.9609 13.165 12.5938C13.165 13.2188 12.7275 13.6641 12.2354 13.6641ZM16.8682 13.6641C16.376 13.6641 15.9463 13.2188 15.9463 12.5938C15.9463 11.9609 16.376 11.5156 16.8682 11.5156C17.3682 11.5156 17.7979 11.9609 17.7979 12.5938C17.7979 13.2188 17.3604 13.6641 16.8682 13.6641ZM14.5479 18.2734C12.915 18.2734 11.8213 17.1875 11.8213 16.6719C11.8213 16.4844 12.001 16.3984 12.1729 16.4766C12.7354 16.7812 13.415 17.1406 14.5479 17.1406C15.6807 17.1406 16.3604 16.7891 16.9307 16.4766C17.0947 16.3984 17.2744 16.4844 17.2744 16.6719C17.2744 17.1875 16.1807 18.2734 14.5479 18.2734Z"})}),H=(0,Z().IU)("emojiPlus",{viewBox:"0 0 28 28",svg:(0,w.jsx)("path",{d:"M14 22c-4.369 0-8-3.631-8-8 0-4.376 3.624-8 7.992-8C18.37 6 22 9.624 22 14c0 4.369-3.623 8-8 8zm-3.828-7.992c0 .4.283.667.69.667h2.456v2.462c0 .4.274.69.674.69.408 0 .69-.282.69-.69v-2.463h2.463c.4 0 .69-.266.69-.666 0-.408-.29-.69-.69-.69h-2.463v-2.455c0-.408-.282-.698-.69-.698-.4 0-.674.29-.674.698v2.455h-2.455c-.408 0-.69.282-.69.69z"})});const U=(0,Z().IU)("emojiSymbols",{viewBox:"0 0 28 28",svg:(0,w.jsx)("path",{d:"M14.8887 22.3281C10.5371 22.3281 6.91992 18.7109 6.91992 14.3594C6.91992 10 10.5293 6.39062 14.8809 6.39062C19.2402 6.39062 22.8574 10 22.8574 14.3594C22.8574 18.7109 19.248 22.3281 14.8887 22.3281ZM14.8887 21C18.5762 21 21.5293 18.0469 21.5293 14.3594C21.5293 10.6719 18.5684 7.71875 14.8809 7.71875C11.1934 7.71875 8.25586 10.6719 8.25586 14.3594C8.25586 18.0469 11.2012 21 14.8887 21ZM14.0293 18.0703C13.7715 18.0703 13.5605 17.9609 13.3652 17.7031L11.459 15.3594C11.3496 15.2109 11.2793 15.0469 11.2793 14.875C11.2793 14.5312 11.5449 14.2578 11.8809 14.2578C12.0996 14.2578 12.2715 14.3203 12.459 14.5703L13.998 16.5625L17.2402 11.3594C17.3887 11.1328 17.584 11.0078 17.7793 11.0078C18.1074 11.0078 18.4199 11.2344 18.4199 11.5859C18.4199 11.7578 18.3184 11.9297 18.2324 12.0859L14.6621 17.7031C14.5059 17.9453 14.2871 18.0703 14.0293 18.0703Z"})}),W=(0,Z().IU)("emojiTravel",{viewBox:"0 0 28 28",svg:(0,w.jsx)("path",{d:"M10.4102 6.59999L13.2496 12.8777L8.06153 13.4701L6.47152 10.5536C6.46512 10.5533 6.45784 10.5531 6.44961 10.5531H6.37773V17.3453H6.44961C6.45975 17.3453 6.46847 17.345 6.4759 17.3446L8.06153 14.4362L13.2496 15.0285L10.4102 21.3062H10.7855C10.8271 21.3062 10.8762 21.2947 10.944 21.2204L16.192 15.4882C16.343 15.3193 16.5192 15.1534 16.7671 15.0493C17.0082 14.9481 17.2567 14.9312 17.4965 14.9312H20.6449C21.3092 14.9312 21.8867 14.7803 22.2776 14.5596C22.6756 14.3348 22.7834 14.1043 22.787 13.953C22.7834 13.7972 22.6746 13.5671 22.2784 13.3442C21.888 13.1245 21.3105 12.975 20.6449 12.975H17.4965C17.2572 12.975 17.0066 12.9583 16.7636 12.8544C16.5154 12.7483 16.3396 12.5795 16.1896 12.4076L10.9354 6.67645C10.8794 6.6124 10.8381 6.59999 10.7855 6.59999H10.4102ZM9.13689 5.81573C9.30066 5.53389 9.59424 5.39999 9.8793 5.39999H10.7855C11.1991 5.39999 11.562 5.57301 11.8335 5.88032L17.0848 11.6083L17.0901 11.6144C17.1939 11.7339 17.2288 11.7483 17.2348 11.7508C17.2476 11.7563 17.2983 11.775 17.4965 11.775H20.6449C21.4716 11.775 22.2612 11.9576 22.8669 12.2984C23.4624 12.6335 23.9806 13.1898 23.9871 13.948L23.9872 13.9583C23.9807 14.7134 23.4613 15.2693 22.8677 15.6045C22.2625 15.9462 21.4728 16.1312 20.6449 16.1312H17.4965C17.2988 16.1312 17.2464 16.1496 17.2317 16.1558C17.2242 16.1589 17.1888 16.1735 17.0849 16.29L17.0797 16.2958L11.8302 22.0296C11.5699 22.3147 11.2127 22.5062 10.7855 22.5062H9.8793C9.58383 22.5062 9.29417 22.3619 9.13515 22.0846C8.97977 21.8136 8.99861 21.5052 9.11616 21.2555L11.4778 16.034L8.72831 15.7201L7.50843 17.9576C7.50827 17.9579 7.50811 17.9582 7.50795 17.9585C7.40427 18.1496 7.25122 18.3087 7.04689 18.4132C6.85046 18.5136 6.64222 18.5453 6.44961 18.5453H6.11367C5.88888 18.5453 5.64429 18.4742 5.45252 18.2888C5.25823 18.101 5.17773 17.8533 5.17773 17.6172V10.2891C5.17773 10.0541 5.25718 9.80874 5.44527 9.62065C5.63336 9.43256 5.87871 9.35312 6.11367 9.35312H6.44961C6.64191 9.35312 6.85261 9.38475 7.05157 9.48866C7.25706 9.59597 7.40839 9.75869 7.51001 9.95148L8.72831 12.1862L11.4778 11.8722L9.11482 6.64781C9.00203 6.40262 8.97622 6.09223 9.13689 5.81573Z"})});var A=()=>o(419273),F=()=>o(876822),D=()=>o(180099),V=()=>o(933539),z=()=>o(749826),O=()=>o(692304),K=()=>o(150569),N=()=>o(718611),G=()=>o(338530),q=()=>o(384546),$=()=>o(253339),J=()=>o(1910),Y=()=>o(998901);function Q(e){const t=(0,l().yK)((e=>({wrapper:{borderTop:`solid 1px ${e.stroke.secondary}`,display:"flex",justifyContent:"space-between",paddingTop:8,paddingBottom:10,paddingLeft:12,paddingRight:12},categoryIcon:{width:28,height:28,fill:e.icon.secondary,transform:"scale(1.1)"}})),[]);return(0,w.jsx)("div",{style:t.wrapper,children:ie.map(((o,i)=>e.isHidden(o)?null:(0,w.jsx)(S().Z,{alignment:Y().Alignment.Start,placement:Y().Placement.Bottom,render:i=>(0,n.createElement)(J().Z,{focused:e.isFocused(o),disabled:e.isDisabled(o),...i,key:o.id,ariaLabel:o.category??o.id,icon:()=>{var e;return null===(e=o.icon)||void 0===e?void 0:e.call(o,t.categoryIcon)},style:{width:32,height:32},onClick:t=>{e.onCategoryClick(o,t)}}),renderTooltip:e=>(0,w.jsx)("div",{...e,children:o.title})},o.id)))})}var X=()=>o(369032);const ee=(0,m().vU)({noResults:{defaultMessage:"No results",id:"emojiPicker.noResults.message"}}),te=(0,w.jsx)(m()._H,{id:"emojiPicker.addCustomEmoji",defaultMessage:"Add emoji"}),oe="__ADD_CUSTOM_EMOJI__",ie=[{id:"recent",title:(0,w.jsx)(m()._H,{id:"emojiPicker.section.recent",defaultMessage:"Recent"}),icon:o(497497).d},{id:"callout",title:(0,w.jsx)(m()._H,{id:"emojiPicker.section.callout",defaultMessage:"Callout"})},{id:"people",category:"People & Body",title:(0,w.jsx)(m()._H,{id:"emojiPicker.section.people",defaultMessage:"People"}),icon:_},{id:"nature",category:"Animals & Nature",title:(0,w.jsx)(m()._H,{id:"emojiPicker.section.animals",defaultMessage:"Animals and nature"}),icon:R},{id:"food",category:"Food & Drink",title:(0,w.jsx)(m()._H,{id:"emojiPicker.section.food",defaultMessage:"Food and drink"}),icon:L},{id:"activities",category:"Activities",title:(0,w.jsx)(m()._H,{id:"emojiPicker.section.activity",defaultMessage:"Activity"}),icon:I},{id:"travel",category:"Travel & Places",title:(0,w.jsx)(m()._H,{id:"emojiPicker.section.travel",defaultMessage:"Travel and places"}),icon:W},{id:"objects",category:"Objects",title:(0,w.jsx)(m()._H,{id:"emojiPicker.section.objects",defaultMessage:"Objects"}),icon:E},{id:"symbols",category:"Symbols",title:(0,w.jsx)(m()._H,{id:"emojiPicker.section.symbols",defaultMessage:"Symbols"}),icon:U},{id:"flags",category:"Flags",title:(0,w.jsx)(m()._H,{id:"emojiPicker.section.flags",defaultMessage:"Flags"}),icon:B},{id:"custom",title:(0,w.jsx)(m()._H,{id:"emojiPicker.section.custom",defaultMessage:"Custom"}),icon:T},{id:"add",title:te,icon:H}],ne=Object.fromEntries(ie.map((e=>[e.id,e]))),ae=["ð¡","ð","â","ð","ð","ð§","â ï¸","ð¥","ð","âï¸","â","ð«","â","â°","âï¸","ð¨","â»ï¸","â","ð","ð","ð","ð£","â¡ï¸","ð¢","ð ","â"];function re(e){const{onSubmit:t,isInline:o,onUpload:g,iconLoggingData:Z,onNoResults:I}=e,T=(0,a().O7)(),B=(0,l().Fg)(),L=(0,m().YB)(),R=(0,a().Fy)(),E=(0,s().VK)((()=>Math.floor(function(e,t){var o,i;const{device:n,WindowSizeStore:a}=e;if(n.isPhone)return(window.innerWidth-a.getSafePaddingLeftPx(K().$P)-a.getSafePaddingRightPx(K().qJ))/K().mz;if(n.isTablet)return K().tg;if(null==t||null===(o=t.current)||void 0===o||!o.offsetWidth)return K().IQ;return((null==t||null===(i=t.current)||void 0===i?void 0:i.offsetWidth)-2*K().PS)/K().T8}(T,e.menuRef))),[T,e.menuRef]),_=(0,s().VK)((()=>T.device.isMobile?K().pq:K().II),[T]),H=(0,P().E)("custom_emojis"),U=(0,s().VK)((()=>(0,k().Zr)({spaceStore:(0,k().Jy)()})),[]),W=H&&R.isDesktop&&U,J=(0,s().VK)((()=>{var e;const t=(0,k().Jy)();if(!t)return[];return((null===(e=D().Z.getData(T,{spaceId:t.id}))||void 0===e?void 0:e.pointers)??[]).map((e=>u().xo.toString(u().xo.fromPointer(e))))}),[T]),Y=(0,n.useCallback)((e=>{t(e),function(e,t){if(z().default.checkGate({gateName:"custom_emojis"})){var o;const i=$().Z.getStore((null===(o=F().default.state.currentSpaceStore)||void 0===o?void 0:o.getSpaceId())||""),n=i.state,a=h().jj(h().G0([le(e)],null==n?void 0:n.split(",").filter(Boolean))),r=h().qn(a,t);i.setState(r.join(",")),q().Z.setState({...q().Z.state,recentEmojis:r})}else{const o=p().Z.get(q().W),i=h().jj(h().G0([le(e)],u().p4(o))),n=h().qn(i,t);p().Z.set(q().W,n.join("")),q().Z.setState({...q().Z.state,recentEmojis:n})}}(e,K().Nm*E),Z&&v().fA(T,"pick_emoji",{icon:e,...Z})}),[T,E,t,Z]),ie=(0,G().C)(),re=(0,s().VK)(N().sg,[]),pe=(0,n.useCallback)((e=>{const t=void 0===re?u().yS(e,ie):[];return{key:e,action:()=>{0===t.length&&Y(e)},render:o=>(0,w.jsx)(X().Z,{...o,emoji:e,showTooltip:!0,variations:t,insertEmoji:Y})}}),[Y,ie,re]),me=(0,s().VK)((()=>{const t=function(e){const{environment:t,filter:o,isCallout:i,maxEmojisPerSection:n,showCategoriesThreshold:a,customEmojiStrings:r,shouldShowCustomAddButton:s}=e,l=function(e){return h().oA([e.filterIsEmpty?ne.recent:void 0,e.isCallout?ne.callout:void 0,ne.people,ne.nature,ne.food,ne.activities,ne.travel,ne.objects,ne.symbols,ne.flags,z().default.checkGate({gateName:"custom_emojis"})&&ne.custom])}({filterIsEmpty:!(null!=o&&o.trim()),isCallout:i}),d=u().rJ(o)??"",p=o.split(" ").filter(Boolean),m=l.map((e=>{const o=function(e,t){return"recent"===e.id?q().Z.state.recentEmojis||[]:"callout"===e.id?ae:"custom"===e.id?t:G().Z.state.emojiByCategory[e.category]||[]}(e,r),i=function(e,t,o,i){const n=h().oA(t.map((t=>{const n=(0,c().y)(t,G().Z.state);let a=[];if(n&&n.keywords)a=n.keywords||[];else if(u().xo.isCustomEmojiString(t)){var r;const o=u().xo.fromCustomEmojiString(t).pointer,i=e.currentUser.id;if(!i)return;const n=null===(r=e.defaultRecordCache.inMemoryRecordCache.getRecord({pointer:o,userId:i}))||void 0===r?void 0:r.value;if(!n||!n.alive)return;a=u().xu(n.name)}const s=o.length<3||o.includes(" ")?a:a.map((e=>e.replaceAll(" ",""))),l=o.indexOf(t);if(-1!==l)return{rank:100-l,emoji:t};const d=":",p=s.findIndex((e=>e===`${d}${o}`));if(-1!==p)return{rank:100-p,emoji:t};const m=s.findIndex((e=>e===o));if(-1!==m)return{rank:10*(10-m),emoji:t};const g=s.findIndex((e=>e.startsWith(o)));if(-1!==g)return{rank:10-g,emoji:t};if(i.length>1){const e=n&&n.uniqueKeywords||[];if(i.every((t=>e.find((e=>e.startsWith(t))))))return{rank:i.length,emoji:t}}return s.some((e=>e.includes(o)))?{rank:1,emoji:t}:void 0})));return h().MR(n,(e=>-e.rank))}(t,o,d,p);return{category:e,emojis:i.map((e=>({rank:e.rank,emoji:de(e.emoji)})))}})),g=[];let f=0;for(const{category:c,emojis:u}of m){if(s&&"custom"===c.id){const e={rank:-1/0,emoji:oe};u.unshift(e)}let e=0;for(;e<u.length;){const t=u.slice(e,e+n);g.push({id:c.id,title:0===e?c.title:void 0,emojis:t}),e+=t.length}f+=u.length}if(""===o||f>a){return g.map((e=>({...e,emojis:e.emojis.map((e=>{let{emoji:t}=e;return t}))})))}const x=h().MR(g.flatMap((e=>e.emojis)),(e=>-e.rank)).map((e=>{let{emoji:t}=e;return t}));if(0===x.length)return[];return[{emojis:x}]}({environment:T,filter:e.filter,isCallout:e.isCallout??!1,maxEmojisPerSection:E,showCategoriesThreshold:Math.floor(E*_/2),customEmojiStrings:J,shouldShowCustomAddButton:W});return t}),[T,e.filter,e.isCallout,E,_,W,J]),ge=(0,n.useRef)(null),he=(0,n.useMemo)((()=>{const e=[];for(const[t,o]of me.entries()){let i;i=R.isPhone||R.isTablet?K().mz:K().T8;const n=void 0!==o.title,a=t===me.length-1||void 0!==me[t+1].title;n&&(R.isPhone?i+=58:R.isTablet?i+=42:i+=32),a&&R.isMobile&&(i+=10),e.push(i)}return e}),[me,R]),fe=(0,i().MG)({count:me.length,getScrollElement:()=>ge.current,estimateSize:e=>he[e]}),xe=(0,n.useCallback)((e=>{const t=me.findIndex((t=>t.id===e));-1!==t&&fe.scrollToIndex(t,{behavior:"auto",align:"start"})}),[fe,me]),ve=(0,n.useRef)(null);(0,n.useEffect)((()=>{q().Z.cleanupSkinTonedRecents((0,N().sg)()),async function(){await(0,M().L)(),await async function(){if(!se){await G().Z.waitUntilLoaded();for(const t in G().Z.state.positionalEmojiData){var e;const o=null===(e=(0,c().y)(t,G().Z.state))||void 0===e?void 0:e.keywords;o&&(d().Q4[t]={...d().Q4[t],uniqueKeywords:h().jj(o.flatMap((e=>e.split(" "))))})}se=!0}}()}()}),[]);const ye=(0,s().qz)(void 0,O().Z);(0,r().K)((()=>{ye.setState({...ye.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})})),(0,n.useEffect)((()=>{ye.setState({...ye.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}),[e.filter,ye]),(0,n.useEffect)((()=>{0===me.length&&(null==I||I())}),[me,I]);const je=(0,n.useMemo)((()=>W?{key:"custom-emoji-add",action:()=>{ve.current&&V().Z.setState({open:!0,entrypoint:"picker",originRect:ve.current.getBoundingClientRect(),uploadFileEventHandlers:g})},render:e=>(0,w.jsx)(S().Z,{renderTooltip:()=>te,render:t=>(0,w.jsx)(j().Z,{...e,...t,ref:ve,ignoreLocalHoverState:!1,style:{width:28,height:28,margin:2,display:"flex",justifyContent:"center",alignItems:"center",border:`1px solid ${B.stroke.primary}`,cursor:"pointer",borderRadius:15},children:(0,A().f)({height:14,width:14,color:B.icon.secondary})})})}:null),[g,W,B]),be=[];let Ce,Se=!1;if(W?1===me.length&&me[0].emojis[0]===oe:0===me.length)be.push({key:"no results",items:[{key:"no results",action:()=>{ve.current&&W&&V().Z.setState({open:!0,entrypoint:"no_results",originRect:ve.current.getBoundingClientRect(),uploadFileEventHandlers:g})},render:(e,t)=>(0,w.jsxs)("div",{style:{...o&&{width:"100%"},display:"flex",flexDirection:o?"row":"column"},children:[(0,w.jsx)(y().Z,{...!W&&e,caption:L.formatMessage(ee.noResults),style:{fontWeight:x().Ue.medium,marginBottom:2,marginLeft:2,height:20,boxSizing:"content-box"}}),W?(0,w.jsxs)(j().Z,{...e,ref:ve,style:{display:"flex",alignItems:"center",gap:6,padding:"4px 8px",margin:o?"2px 8px":"0 12px",height:28,borderRadius:6,border:`1px solid ${B.stroke.primary}`,fontWeight:x().Ue.medium,fontSize:x().JB.UIRegular.desktop,whiteSpace:"nowrap"},children:[(0,A().f)({height:14,width:14,color:B.icon.primary}),te]}):null]})}],render:e=>(0,w.jsx)(C().Z,{...e})});else if(1===me.length&&void 0===me[0].id){const e=h().jj(me[0].emojis).map((e=>e===oe?je:pe(e))).filter(f().K0);be.push({key:"search-results",items:e,render:e=>(0,w.jsx)(C().Z,{shouldShowBottomDivider:!0,children:(0,w.jsx)("div",{style:ce(T,B),children:e.children})},e.key)})}else Se=!0,fe.getVirtualItems().map((e=>{const{key:t,index:o,start:i,end:n,size:a}=e,r=me[o],s=void 0!==r.title,l=o===me.length-1||void 0!==me[o+1].title,[d,c]=[fe.scrollOffset,fe.scrollOffset+fe.scrollRect.height];c<i||d>=n||void 0===Ce&&(Ce=r.id);const u=r.emojis.map((e=>e===oe?je:pe(e))).filter(f().K0);return{key:t,items:u,render:e=>(0,w.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:a,transform:`translateY(${i}px)`},children:(0,w.jsx)("div",{"data-index":o,children:(0,w.jsx)(C().Z,{title:r.title,isTitleUppercase:!0,disableDesktopPadding:!0,disableMobilePadding:!0,disableMobileBorders:!0,mobileTitleStyle:{...s?{paddingTop:28}:{}},desktopTitleStyle:{...s?{paddingTop:6,lineHeight:"100%"}:{}},style:{display:"flex",flexDirection:"column",alignItems:"stretch"},children:(0,w.jsx)("div",{style:{...ce(T,B),...s&&R.isMobile?{paddingTop:10}:{},...l&&R.isMobile?{paddingBottom:10}:{},...R.isPhone&&{boxShadow:ue({theme:B,isFirstRowInSection:s,isLastRowInSection:l})}},children:e.children})})},t)},o)}})).forEach((e=>e&&be.push(e)));const ke=R.isDesktop&&be.length>0?0:void 0,Me=(0,w.jsx)(b().Z,{style:{alignItems:"stretch",width:"100%",position:"relative",height:"100%"},type:b().i.Grid,getItemsPerRowForSection:()=>E,renderRow:(e,t)=>(0,w.jsx)("div",{style:{display:"flex"},children:e},t),store:ye,initialFocus:ke,sections:be,disableKeyboardArrowWrap:!0,unfocusOnScroll:R.isMobile});if(!Se)return(0,w.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:(0,w.jsx)("div",{style:{width:"100%",flexGrow:1},children:Me})});const Pe=H?(0,w.jsx)(Q,{isHidden:e=>{switch(e.id){case"callout":return!0;case"custom":return!U&&0===J.length;case"add":return!W;default:return!1}},isFocused:e=>Ce===e.id,isDisabled:e=>{if(["custom","add"].includes(e.id))return!1;const t=me.find((t=>t.id===e.id));return void 0===t||0===t.emojis.length},onCategoryClick:(e,t)=>{"add"===e.id?V().Z.setState({open:!0,entrypoint:"categories_bar",originRect:t.currentTarget.getBoundingClientRect(),uploadFileEventHandlers:g}):xe(e.id)}}):null;return(0,w.jsxs)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:[(0,w.jsx)("div",{style:{width:"100%",flexGrow:1,maxHeight:R.isDesktop?K().VJ:void 0,overflowX:"hidden",overflowY:"auto",paddingBottom:6},ref:ge,children:(0,w.jsx)("div",{style:{height:fe.getTotalSize(),width:"100%",position:"relative"},children:Me})}),Pe]})}let se=!1;function le(e){return void 0===(0,N().sg)()?e:u().Gb(e)}function de(e){var t;const o=(0,N().sg)();if(!(void 0!==o&&0!==o))return e;const i=null===(t=(0,c().y)(e,G().Z.state))||void 0===t?void 0:t.variations;return 5===(null==i?void 0:i.length)||"ð¤"===e?(null==i?void 0:i[o-1])??e:e}function ce(e,t){const{device:o,WindowSizeStore:i}=e;return{display:"flex",flexDirection:"column",flexWrap:"wrap",alignItems:"flex-start",...o.isPhone?{background:t.popoverBackground,paddingLeft:i.getSafePaddingLeftCSS(K().$P),paddingRight:i.getSafePaddingRightCSS(K().qJ)}:{background:g().ZP.transparent,paddingLeft:o.isTablet?K().vP:K().PS,paddingRight:o.isTablet?K().vP:K().PS}}}function ue(e){const{theme:t,isFirstRowInSection:o,isLastRowInSection:i}=e;return o&&i?`0 1px 0 ${t.regularDividerColor}, 0 -1px 0 ${t.regularDividerColor}`:o?`0 -1px 0 ${t.regularDividerColor}`:i?`0 1px 0 ${t.regularDividerColor}`:"none"}},369032:(e,t,o)=>{o.d(t,{Z:()=>m});o(241792);var i=o(667294),n=()=>o(219727),a=()=>o(142735),r=()=>o(659278),s=()=>o(448419),l=()=>o(255577),d=()=>o(150569),c=()=>o(164079),u=o(785893);const p=(0,i.forwardRef)((function(e,t){const{variations:i,emoji:n,focused:r,onClick:s,onMouseEnter:l,insertEmoji:d,showTooltip:c}=e,p=(0,a().qz)(void 0,o(529048).Z);return void 0===(0,a().VK)((()=>(0,o(718611).sg)()),[])&&i&&i.length>0?(0,u.jsx)(y,{buttonPopupStore:p,emoji:n,focused:r,insertEmoji:d,onClick:s,onMouseEnter:l,showTooltip:c,variations:i,ref:t}):(0,u.jsx)(f,{emoji:n,focused:r,onClick:s,onMouseEnter:l,ref:t,showTooltip:c})})),m=p;function g(e){const{device:t}=e;return t.isMobile?{width:d().mz,height:d().mz,fontSize:d().jo}:{width:d().T8,height:d().T8,fontSize:d().WB}}function h(e){return{emojiButton:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,...g(e)},variationMenu:{display:"flex",padding:4}}}const f=(0,i.forwardRef)((function(e,t){let{events:i,emoji:s,focused:l,onClick:d,onMouseEnter:p,showTooltip:m}=e;const f=(0,n().O7)(),{fontSize:x}=g(f),v=r().xo.isCustomEmojiString(s),y=(0,a().VK)((()=>{if(v){const e=r().xo.fromCustomEmojiString(s);return(0,o(606757).KX)({parentStore:void 0,pointer:e.pointer})}}),[s,v]),j=(0,a().VK)((()=>v?null==y?void 0:y.getName():r().Hk(s,o(338530).Z.state)),[y,s,v]);return(0,u.jsx)(o(654133).Z,{allowHover:m,renderTooltip:()=>j,closeDelay:0,disableTooltip:!m,render:e=>(0,u.jsx)(o(154186).Z,{ref:t,focused:l,onClick:d,...(0,c().Z)(i||{},(0,c().Z)({onMouseEnter:p},e)),ignoreLocalHoverState:!0,style:h(f).emojiButton,children:v?y?(0,u.jsx)(o(537876).Z,{size:x,emojiStore:y}):null:(0,u.jsx)(o(754668).Z,{size:x,char:s})},s)})}));function x(e){let{props:t}=e;const o=(0,n().O7)();return(0,u.jsx)("div",{style:h(o).variationMenu,children:t.children})}function v(e){const{parent:t,emoji:i,variations:a,insertEmoji:r}=e,s=(0,n().O7)(),d=(a&&a.length>0?[i,...a]:[i]).map(((i,n)=>({key:i,action:e=>{t.close(),(null==a?void 0:a.length)===o(642240).tN&&(0,o(926534).W)({environment:s,skinTone:n}),r(i,n)},render:t=>(0,u.jsx)(p,{...e,...t,emoji:i,variations:void 0,showTooltip:!1})})));return(0,u.jsx)(o(206352).Z,{debugName:"EmojiPickerMenuItem",capture:!0,allowEsc:!0,children:(0,u.jsx)(l().Z,{type:l().i.Horizontal,initialFocus:0,sections:[{key:"variations",render:e=>(0,u.jsx)(x,{props:e}),items:d}]})})}const y=(0,i.forwardRef)((function(e,t){const{emoji:n,focused:a,onClick:r,onMouseEnter:l,showTooltip:d,variations:c,insertEmoji:p,buttonPopupStore:m}=e,g=(0,i.useCallback)((()=>function(e){e.setState({...e.state,open:!1})}(m)),[m]),h=(0,i.useCallback)((e=>function(e,t){var o;null===(o=e.preventDefault)||void 0===o||o.call(e),t.setState({...t.state,open:!0})}(e,m)),[m]);return(0,u.jsx)(o(94967).Z,{debugName:"EmojiPickerMenuItem",capture:a,onEnter:h,onEsc:g,children:(0,u.jsx)(s().ZP,{buttonPopupStore:m,popupType:s().Z4.Popup,renderOrigin:e=>(0,u.jsx)(f,{ref:t,emoji:n,focused:a,onClick:r,onMouseEnter:l,showTooltip:d,events:e}),render:e=>(0,u.jsx)(v,{parent:e,emoji:n,variations:c,insertEmoji:p})})},n)}))},926534:(e,t,o)=>{o.d(t,{W:()=>S,Z:()=>C});o(241792),o(667294);var i=()=>o(219727),n=()=>o(142735),a=()=>o(642240),r=()=>o(788860),s=()=>o(269299),l=()=>o(348141),d=()=>o(448419),c=()=>o(206352),u=()=>o(740046),p=()=>o(255577),m=()=>o(654133),g=()=>o(164079),h=()=>o(998901),f=()=>o(876822),x=()=>o(529048),v=()=>o(749826),y=()=>o(384546),j=()=>o(369032),b=o(785893);function C(){const e=(0,n().VK)((()=>{var e;return null===(e=f().default.state)||void 0===e||null===(e=e.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.emoji_picker_skin_tone}),[]),t=(0,i().O7)(),o=(0,n().qz)(void 0,x().Z);return(0,b.jsx)(m().Z,{renderTooltip:()=>(0,b.jsx)(r()._H,{defaultMessage:"Select skin tone",id:"emojiPickerSkinTonePicker.selectSkinTone"}),placement:h().Placement.Bottom,render:i=>(0,b.jsx)(d().ZP,{buttonPopupStore:o,popupType:d().Z4.Popup,renderOrigin:t=>(0,b.jsx)(u().DO,{icon:()=>(0,b.jsx)("div",{style:{paddingRight:6},children:void 0!==e?a().YN[e]:"â"}),style:{fontSize:20,...v().default.checkGate({gateName:"custom_emojis"})?{border:"none"}:{}},...(0,g().Z)(t,i)}),render:o=>function(e){const{parent:t,environment:o,currentSkinTone:i}=e,n=a().YN.map(((e,i)=>({key:e,action:()=>{t.close(),S({environment:o,skinTone:i})},render:t=>(0,b.jsx)(j().Z,{...t,insertEmoji:()=>{},emoji:e,variations:void 0,showTooltip:!1})})));return(0,b.jsx)(c().Z,{debugName:"EmojiPickerSkinTonePicker",capture:!0,allowEsc:!0,children:(0,b.jsx)(p().Z,{type:p().i.Horizontal,initialFocus:i,sections:[{key:"variations",render:e=>(0,b.jsx)("div",{style:{display:"flex",padding:4},...e}),items:n}]})})}({parent:o,environment:t,currentSkinTone:e}),...i})})}function S(e){const{environment:t,skinTone:o}=e,{currentUserSettingsStore:i}=f().default.state;i&&(void 0!==o&&y().Z.cleanupSkinTonedRecents(o),s().createAndCommit({userAction:"mediaPicker.setEmojiSkinTone",environment:t,canUndo:!0,perform:e=>{l().d2({userSettingsStore:i,transaction:e,data:{emoji_picker_skin_tone:o}})}}))}},384546:(e,t,o)=>{o.d(t,{W:()=>r,Z:()=>l});o(267602),o(653476),o(241792);var i=()=>o(659278),n=()=>o(245015),a=()=>o(513670);const r="recentEmojis";class s extends(()=>o(263184))().default{getInitialState(){return{recentEmojis:[],loadEmojiCount:0}}cleanupSkinTonedRecents(e){if(o(749826).default.checkGate({gateName:"custom_emojis"})){var t,s;const n=o(253339).Z.getStore((null===(t=o(876822).default.state.currentSpaceStore)||void 0===t?void 0:t.getSpaceId())||""),r=a().jj(null===(s=n.state)||void 0===s?void 0:s.split(",").filter(Boolean).map((t=>void 0===e?t:i().Gb(t))));return n.setState(r.join(",")),this.setState({...this.state,recentEmojis:r}),r}{const t=a().jj(i().p4(n().Z.get(r)).map((t=>void 0===e?t:i().Gb(t))));return n().Z.set(r,t.join("")),this.setState({...this.state,recentEmojis:t}),t}}}const l=new s},253339:(e,t,o)=>{o.d(t,{Z:()=>n});class i extends(()=>o(263184))().default{getInitialState(){return{stores:{}}}getStore(e){return this.state.stores[e]||(this.state.stores[e]=new(o(41158).D)({key:`recentEmojis:${e}`,namespace:o(149310).$p,important:!0,trackingType:"necessary"})),this.state.stores[e]}}const n=new i},439871:(e,t,o)=>{o.d(t,{M:()=>n});var i=o(667294);function n(e){const t=(0,i.useId)();return e??t}},832566:(e,t,o)=>{o.d(t,{U:()=>n});o(667294);var i=o(785893);const n=(0,o(827282).IU)("colorPickerCircle",{viewBox:"0 0 32 32",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"16",cy:"16",r:"14",strokeWidth:"3",fill:"none"}),(0,i.jsx)("circle",{cx:"16",cy:"16",r:"14",opacity:"0.9"})]})})},497497:(e,t,o)=>{o.d(t,{d:()=>n});o(667294);var i=o(785893);const n=(0,o(827282).IU)("emojiRecents",{viewBox:"0 0 28 28",svg:(0,i.jsx)("path",{d:"M14 22.4297C9.58594 22.4297 5.92969 18.7812 5.92969 14.3594C5.92969 9.94531 9.57812 6.28906 13.9922 6.28906C18.4141 6.28906 22.0703 9.94531 22.0703 14.3594C22.0703 18.7812 18.4141 22.4297 14 22.4297ZM14 20.8438C17.5938 20.8438 20.4844 17.9531 20.4844 14.3594C20.4844 10.7656 17.5859 7.88281 13.9922 7.88281C10.3984 7.88281 7.52344 10.7656 7.52344 14.3594C7.52344 17.9531 10.4062 20.8438 14 20.8438ZM10.0469 15.3281C9.69531 15.3281 9.42969 15.0547 9.42969 14.7109C9.42969 14.3594 9.69531 14.0938 10.0469 14.0938H13.375V9.58594C13.375 9.24219 13.6484 8.96875 13.9922 8.96875C14.3438 8.96875 14.6172 9.24219 14.6172 9.58594V14.7109C14.6172 15.0547 14.3438 15.3281 13.9922 15.3281H10.0469Z"})})},415042:(e,t,o)=>{o.d(t,{A:()=>n});o(667294);var i=o(785893);const n=(0,o(827282).IU)("photo",{viewBox:"0 0 19 16",svg:(0,i.jsx)("path",{d:"M17.938 12.18c.03.755-.146 1.33-.532 1.726-.385.396-.971.594-1.758.594H2.992c-.65 0-1.143-.185-1.476-.555-.334-.37-.51-.916-.532-1.64l2.946-2.64a1.66 1.66 0 01.484-.33 1.292 1.292 0 011.063.009c.182.073.354.182.515.328l1.446 1.305L10.96 7.82c.182-.156.37-.273.562-.351a1.607 1.607 0 011.22.008c.202.078.39.197.562.359l4.633 4.344zM6.296 8.008a1.85 1.85 0 01-.945-.25 1.93 1.93 0 01-.68-.68 1.846 1.846 0 01-.25-.945c0-.339.083-.651.25-.938a1.93 1.93 0 01.68-.68c.286-.171.601-.257.945-.257s.656.086.937.258c.282.166.506.393.672.68.172.286.258.598.258.937a1.8 1.8 0 01-.258.945c-.166.287-.39.513-.672.68-.28.166-.593.25-.937.25zm-3.492 7.148c-.844 0-1.482-.213-1.914-.64-.433-.428-.649-1.058-.649-1.891V3.109c0-.833.216-1.463.649-1.89C1.323.786 1.96.57 2.805.57H16.18c.849 0 1.49.216 1.922.649.432.427.648 1.057.648 1.89v9.516c0 .833-.216 1.463-.648 1.89-.433.428-1.073.641-1.922.641H2.805zm.093-1.531h13.196c.36 0 .635-.094.828-.281.193-.193.289-.477.289-.852v-9.25c0-.375-.096-.656-.29-.844-.192-.192-.468-.289-.827-.289H2.898c-.364 0-.643.097-.836.29-.187.187-.28.468-.28.843v9.25c0 .375.093.659.28.852.193.187.472.281.836.281z"})})},345192:(e,t,o)=>{o.d(t,{n:()=>n});o(667294);var i=o(785893);const n=(0,o(827282).IU)("refresh",{viewBox:"0 0 14 15",svg:(0,i.jsx)("path",{d:"m1.382 7.22 1.294-1.782q.156-.215.376-.215c.22 0 .272.071.376.215l1.289 1.787q.195.263.112.483-.078.215-.39.215H3.69a3.7 3.7 0 0 0 .445 1.24q.337.576.844 1.016.508.435 1.153.673.645.245 1.372.245.771 0 1.445-.288a3.8 3.8 0 0 0 1.182-.777q.277-.225.537-.195a.61.61 0 0 1 .552.674q-.015.258-.254.464-.66.639-1.553 1.02a4.8 4.8 0 0 1-1.91.386 5.13 5.13 0 0 1-3.428-1.304 5.4 5.4 0 0 1-1.132-1.42 5 5 0 0 1-.561-1.734h-.718q-.322 0-.4-.215-.074-.22.117-.488Zm2.666-3.745q.66-.64 1.553-1.02a4.75 4.75 0 0 1 1.904-.387q.99 0 1.865.347a5.2 5.2 0 0 1 1.563.962q.694.615 1.132 1.426.44.806.567 1.728h.703q.317 0 .395.22.083.215-.112.483l-1.294 1.783q-.156.214-.376.214-.215 0-.37-.214l-1.295-1.788q-.195-.263-.112-.478.083-.22.395-.22h.757a3.7 3.7 0 0 0-.454-1.24 3.85 3.85 0 0 0-1.987-1.69 3.8 3.8 0 0 0-1.377-.248q-.762 0-1.44.288a3.8 3.8 0 0 0-1.182.776q-.279.225-.537.195a.63.63 0 0 1-.42-.23.6.6 0 0 1-.137-.439q.02-.258.259-.468"})})},147139:(e,t,o)=>{o.d(t,{v3:()=>at,s5:()=>Ye,ZP:()=>Oe});o(267602),o(470928),o(241792);var i=o(667294),n=()=>o(219727),a=()=>o(142735),r=()=>o(846550),s=()=>o(225339),l=()=>o(890085),d=()=>o(788860),c=()=>o(661727),u=()=>o(568017),p=()=>o(513670),m=()=>o(571896),g=()=>o(286310),h=()=>o(819026),f=()=>o(421654),x=()=>o(102182),v=()=>o(109757),y=(o(670560),()=>o(989478)),j=()=>o(57687),b=()=>o(844958),C=()=>o(876822),S=()=>o(826955),k=()=>o(247724),M=()=>o(12512),P=()=>o(127519),Z=()=>o(345837),w=o(785893);function I(e){const{placeholder:t,onSubmit:o}=e,n=(0,r().yK)((e=>({wrap:{flexGrow:1,flexShrink:1,boxShadow:e.inputBoxShadow,borderRadius:6,padding:"6px 10px",marginLeft:8,marginRight:8,overflow:"hidden",fontSize:14,..."dark"===e.mode?{backgroundColor:e.inputBackground}:{}},text:{minHeight:60},placeholder:{minHeight:60}})),[]),a=(0,i.useCallback)((e=>{if(o&&!e.shiftKey)o();else{if("editing"!==P().default.state.mode)return}}),[o]);return(0,w.jsx)("div",{style:n.wrap,className:k().Wh_,children:(0,w.jsx)(Z().Z,{placeholder:t,disabled:!1,store:e.store,style:n.text,placeholderStyle:n.placeholder,pasteBehavior:"inline",disableSlashCommands:!0,disableEmbedMenu:!0,disableEmojiCommands:!0,disableComment:!0,disableSelectAllBlocks:!0,disableSelectionDrag:!0,onEnter:a,disableMobileActionBar:!1,disabledMentionTypes:{reminder:!0},disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,inPageFind:M().B3.none})})}var T=()=>o(178498),B=()=>o(388284),L=()=>o(29090);function R(e){const{tab:t}=e,o=(0,n().O7)(),{store:a}=(0,j().Cl)({initialValue:void 0,onChange:p().yR}),s=(0,r().yK)((e=>({desktopStyle:{marginTop:8,marginBottom:6},sparkleStyle:{width:16,height:16,marginRight:4},captionStyle:{textAlign:o.device.isMobile?"left":"center"}})),[o.device.isMobile]),l=(0,i.useCallback)((async()=>{const o=a.getValue();if(!o)return;const i=[];for(const e of o){var n;if("â£"===e[0]&&null!==(n=e[1])&&void 0!==n&&n.length){if("d"===e[1][0][0]){const t=e[1][0][1].start_date;i.push(t)}else if("u"===e[1][0][0]){const t=e[1][0][1],{currentSpaceStore:o}=C().default.state;if(!o)return{users:[],bots:[]};const n=S().U6.createChildStore(o,{table:y().KJ,id:t});await n.load();const a=n.getEmail();i.push(a||"")}}else i.push(e[0])}const r=i.join(""),s=t.integration;if(r){e.store.setState({...e.store.state,loading:!0});const o=await t.getResults(r,s);e.store.setState({...e.store.state,loading:!1,result:o.results})}}),[a,e.store,t]);return(0,w.jsxs)("div",{children:[(0,w.jsx)(B().Z,{desktopStyle:s.desktopStyle,children:(0,w.jsx)(I,{placeholder:e.placeholder,onSubmit:l,store:a})}),(0,w.jsx)(B().Z,{children:(0,w.jsx)(L().Z,{onClick:l,title:t.buttonText||(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(d()._H,{defaultMessage:"Ask",id:"mediaPicker.aiSourcePickerTab.askButtonText"}),(0,w.jsx)("div",{children:(0,b().t)(s.sparkleStyle)})]}),fullWidth:e.isSmallWidth})}),t.caption&&(0,w.jsx)(T().Z,{shouldWrapCaption:!0,caption:t.caption,style:s.captionStyle})]})}var E=()=>o(154439),_=()=>o(827973),H=()=>o(433989),U=()=>o(643051),W=()=>o(740046),A=()=>o(292518),F=()=>o(661297),D=()=>o(92175),V=()=>o(906651),z=()=>o(654133),O=()=>o(95352),K=()=>o(269299),N=()=>o(348141),G=()=>o(164079),q=()=>o(832566),$=()=>o(998901),J=()=>o(529048),Y=()=>o(448419),Q=()=>o(242958),X=()=>o(667637);const ee=(0,d().vU)({selectSpecificIconColor:{defaultMessage:"Select icon color {iconColor}",id:"iconPickerColorPicker.selectSpecificColor"},selectIconColor:{defaultMessage:"Select icon color",id:"iconPickerColorPicker.selectColor"},selectIconColorWithCurrentColor:{defaultMessage:"Select icon color, {iconColor} selected",id:"iconPickerColorPicker.selectColorWithCurrentColor"},noIconColor:{defaultMessage:"no color",id:"iconPickerColorPicker.noColor"}});function te(){const e=(0,a().VK)((()=>{var e;return null===(e=C().default.state)||void 0===e||null===(e=e.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.icon_picker_color}),[]),t=(0,d().YB)(),o=(0,n().O7)(),i=(0,r().Fg)(),s=(0,n().Fy)(),c=(0,a().qz)(void 0,J().Z);return(0,w.jsx)(z().Z,{renderTooltip:()=>t.formatMessage(ee.selectIconColor),placement:$().Placement.Bottom,render:n=>(0,w.jsx)(Y().ZP,{preventBlockRenderQueueOnEnter:!0,buttonPopupStore:c,popupType:Y().Z4.Popup,renderOrigin:o=>(0,w.jsx)(W().DO,{ariaLabel:t.formatMessage(ee.selectIconColorWithCurrentColor,{iconColor:t.formatMessage(e?l().RR[e]:ee.noIconColor)}),icon:t=>(0,q().U)({...t,stroke:e?l().Lr[i.mode][e]:l().Lr[i.mode].lightgray,fill:e?l().Lr[i.mode][e]:i.lightIconColor}),...(0,G().Z)(o,n)}),render:n=>function(e){const{parent:t,environment:o,currentIconPickerColor:i,theme:n,device:a}=e,r=[];return r.push({key:"askEveryTime",action:()=>{t.close(),oe({environment:o,color:void 0})},render:e=>(0,w.jsx)(X().Z,{...e,title:(0,w.jsx)(d()._H,{id:"iconPickerColorPicker.askEveryTime",defaultMessage:"Ask every time"}),onClick:()=>{oe(void 0!==i?{environment:o,color:void 0}:{environment:o,color:"gray"})},on:void 0===i,style:{boxShadow:void 0},textWrapperStyle:{marginLeft:a.isMobile?10:6},rightStyle:{marginRight:4}})}),(0,w.jsx)(Q().Z,{parent:t,currentColor:i,onColorSelected:oe,additionalItems:r,rowStyle:e=>({...e<2&&{opacity:void 0===i?.5:1},...2===e&&{flexDirection:"row-reverse",padding:"4px 0 0",margin:"4px 0 0",borderTop:`1px solid ${n.regularDividerColor}`}}),menuStyle:{padding:"4px 0"}})}({parent:n,environment:o,currentIconPickerColor:e,theme:i,device:s,intl:t})})})}function oe(e){const{environment:t,color:o}=e,{currentUserSettingsStore:i}=C().default.state;i&&K().createAndCommit({userAction:"mediaPicker.setIconPickerColor",environment:t,canUndo:!0,perform:e=>{const t=void 0!==o?o:null;N().d2({userSettingsStore:i,transaction:e,data:{icon_picker_color:t}})}})}var ie=()=>o(497459),ne=()=>o(539245),ae=()=>o(205228),re=()=>o(926534);var se=()=>o(733193),le=()=>o(352230),de=()=>o(827282);const ce=(0,de().IU)("giphyLogo",{viewBox:"0 0 12 12",svg:(0,w.jsx)("path",{d:"M 1.332031 0 L 1.332031 12 L 10.667969 12 L 10.667969 4.332031 L 9.332031 5.667969 L 9.332031 10.667969 L 2.667969 10.667969 L 2.667969 1.335938 L 5 1.335938 L 6.332031 0 Z M 6.667969 0 L 6.667969 4 L 10.667969 4 L 10.667969 2.667969 L 9.332031 2.667969 L 9.332031 1.335938 L 8 1.335938 L 8 0 "})});var ue=()=>o(270820);const pe=(0,de().IU)("shuffle",{viewBox:"0 0 16 16",svg:(0,w.jsx)("path",{d:"M0.162354 11.7542C0.162354 12.1365 0.458984 12.4067 0.867676 12.4067H2.41675C3.55054 12.4067 4.21631 12.0771 4.99414 11.1609L6.58936 9.26245L8.16479 11.1279C8.9624 12.0771 9.71387 12.4067 10.8477 12.4067H12.166V13.9954C12.166 14.3118 12.3572 14.4963 12.6736 14.4963C12.8186 14.4963 12.9504 14.4436 13.0625 14.3579L15.6465 12.2024C15.897 11.998 15.897 11.6816 15.6465 11.4641L13.0625 9.30859C12.9504 9.21631 12.8186 9.17017 12.6736 9.17017C12.3572 9.17017 12.166 9.34814 12.166 9.67114V11.095H10.8872C10.1094 11.095 9.60181 10.8379 9.0415 10.1655L7.43311 8.2605L9.0481 6.34888C9.62158 5.66992 10.083 5.42603 10.8477 5.42603H12.166V6.87622C12.166 7.19263 12.3572 7.3772 12.6736 7.3772C12.8186 7.3772 12.9504 7.32446 13.0625 7.23877L15.6465 5.08325C15.897 4.87891 15.897 4.5625 15.6465 4.34497L13.0625 2.18945C12.9504 2.09717 12.8186 2.05103 12.6736 2.05103C12.3572 2.05103 12.166 2.229 12.166 2.552V4.10767H10.8542C9.68091 4.10767 8.9624 4.43066 8.12524 5.43262L6.58936 7.25854L4.99414 5.36011C4.21631 4.44385 3.50439 4.11426 2.3772 4.11426H0.867676C0.458984 4.11426 0.162354 4.38452 0.162354 4.76685C0.162354 5.14917 0.458984 5.42603 0.867676 5.42603H2.32446C3.06274 5.42603 3.5769 5.68311 4.1438 6.35547L5.74561 8.2605L4.1438 10.1655C3.5769 10.8379 3.10229 11.095 2.37061 11.095H0.867676C0.458984 11.095 0.162354 11.3718 0.162354 11.7542Z"})}),me=(0,de().IU)("unsplashLogo",{viewBox:"0 0 12 12",svg:(0,w.jsx)("path",{d:"M3.75 3.375V0H8.25V3.375H3.75ZM8.25 5.25H12V12H0V5.25H3.75V8.625H8.25V5.25Z"})});var ge=()=>o(707138);class he extends(()=>o(263184))().default{getInitialState(){return{inputValue:"",focus:!1,result:void 0,loading:!1,hover:""}}}const fe=he;var xe=()=>o(808985),ve=()=>o(145702),ye=()=>o(188296),je=()=>o(18281),be=()=>o(897257),Ce=()=>o(154186),Se=()=>o(518242),ke=()=>o(135499),Me=()=>o(527278);function Pe(){const{device:e,WindowSizeStore:t}=(0,n().O7)(),o=(0,a().VK)((()=>e.isPhone),[e]),{phonePaddingLeft:i,phonePaddingRight:s}=(0,a().VK)((()=>({phonePaddingLeft:t.getSafePaddingLeftCSS(14),phonePaddingRight:t.getSafePaddingRightCSS(14)})),[t]);return(0,r().yK)((e=>({galleryWrap:{display:"flex",flexWrap:"wrap",alignContent:"flex-start",background:e.popoverBackground,paddingTop:o?12:0,paddingBottom:o?12:0,paddingLeft:o?i:12,paddingRight:o?s:12,boxShadow:o?`0 1px 0 ${e.regularDividerColor}`:""}})),[o,i,s])}function Ze(e){let{pageCover:t,tab:o}=e;const{coverUrl:n,title:a,subtitle:s,position:l}=t,d=(0,r().yK)((e=>({container:{width:"25%",padding:3},tooltip:{maxWidth:180,whiteSpace:"normal"},title:{color:e.regularInvertedTextColor},subtitle:{color:e.mediumInvertedTextColor},buttonHover:{opacity:.85},imageBox:{width:"100%",height:64,objectFit:"cover",objectPosition:`center ${100*(l||0)}%`,borderRadius:4}})),[l]),c=(0,i.useCallback)((()=>{o.onChange({url:n,position:l})}),[o,n,l]);return(0,w.jsx)("div",{style:d.container,children:(0,w.jsx)(z().Z,{originGap:0,placement:$().Placement.Bottom,delayThreshold:600,renderTooltip:()=>(0,w.jsxs)("div",{style:d.tooltip,children:[(0,w.jsx)("span",{style:d.title,children:Me().Z.formatMessage(a)})," ",(0,w.jsx)("span",{style:d.subtitle,children:s&&Me().Z.formatMessage(s)})]}),render:e=>(0,w.jsx)(Ce().Z,{hoveredStyle:d.buttonHover,...e,onClick:c,children:(0,w.jsx)(ke().Z,{url:n,width:200,isAuthenticated:!1,render:(e,t)=>t&&(0,w.jsx)(Se().ZP,{src:t,style:d.imageBox})})})})})}const we=function(e){let{tab:t}=e;const[n,a]=(0,i.useState)({}),[s,l]=(0,i.useState)(!1);(0,i.useEffect)((()=>{(async()=>{l(!0),await o(521412).X.load().then((e=>{a(e.default),l(!1)}))})()}),[]);const d=Pe(),c=(0,r().yK)((e=>({container:{paddingBottom:8},groupTitle:{marginLeft:-5},loader:{height:300}})),[]);return s?(0,w.jsx)("div",{style:c.loader,children:(0,w.jsx)(o(632599).Z,{})}):(0,w.jsx)("div",{style:c.container,children:Object.keys(n).map((e=>{const i=n[e];return(0,w.jsx)(B().Z,{title:(0,w.jsx)(o(108714).Z,{style:c.groupTitle,href:i.url,external:!0,children:(0,w.jsx)(o(777346).Z,{children:Me().Z.formatMessage(i.title)})}),isTitleUppercase:!0,noTextOverflow:!0,children:(0,w.jsx)("div",{style:d.galleryWrap,children:i.items.map(((e,o)=>(0,w.jsx)(Ze,{pageCover:e,tab:t},o)))})},e)}))})};var Ie=()=>o(824462),Te=()=>o(312578),Be=()=>o(67961),Le=()=>o(765513),Re=()=>o(98228);const Ee=(0,d().vU)({giphyPlaceholder:{id:"mediaPicker.giphyPlaceholder.text",defaultMessage:"Search GIPHY"}});function _e(e){const{tab:t,results:o,ready:n,isSmallWidth:a,giphyRandomId:s}=e,l=(0,r().yK)((e=>({loading:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:320,flex:1},captionMenuItem:{textAlign:a?"left":"center",color:e.mediumTextColor}})),[a]);return n?!o||o&&!o.length?(0,w.jsx)(T().Z,{shouldWrapCaption:!0,caption:(0,w.jsx)(d()._H,{defaultMessage:"No results found.",id:"mediaPicker.giphy.noResultsText"}),style:l.captionMenuItem}):(0,w.jsxs)(i.Fragment,{children:[o.map(((e,o)=>(0,w.jsx)(He,{tab:t,image:e,giphyRandomId:s},o))),(0,w.jsx)(T().Z,{shouldWrapCaption:!0,caption:(0,w.jsx)(d()._H,{defaultMessage:"Search to find more results.",id:"mediaPicker.giphy.searchText"}),style:l.captionMenuItem})]}):(0,w.jsx)("div",{style:l.loading,children:(0,w.jsx)(Te().Z,{})})}function He(e){var t;let{tab:o,image:a,giphyRandomId:s}=e;const l=(0,n().O7)(),{device:c}=l,u=(0,r().yK)((e=>({container:{width:c.isMobile?"33%":"25%",padding:3},hoveredButton:{opacity:.85},imageBox:{width:"100%",height:64,objectFit:"cover",objectPosition:"center 0%",borderRadius:4},label:{marginTop:2,marginBottom:4}})),[c.isMobile]),p=(0,i.useCallback)((async()=>{var e;if(o.onChange({url:a.imageUrl}),null!==(e=a.analytics)&&void 0!==e&&e.onclick)try{var t;await Ie().callApi({eventName:"postGiphyAnalytics",environment:l,data:{url:null===(t=a.analytics)||void 0===t?void 0:t.onclick.url,timestamp:Date.now(),random_id:s}})}catch(i){}}),[l,s,a.imageUrl,o,null===(t=a.analytics)||void 0===t?void 0:t.onclick]);return(0,w.jsxs)("div",{style:u.container,children:[(0,w.jsx)(Ce().Z,{hoveredStyle:u.hoveredButton,onClick:p,children:(0,w.jsx)(Se().ZP,{src:a.thumbUrl,style:u.imageBox})}),(0,w.jsx)(Be().Z,{isSmall:!0,isSecondaryColor:!0,style:u.label,children:(0,w.jsx)(d()._H,{defaultMessage:"by <inlinetextlink>{authorName}</inlinetextlink>",id:"mediaPicker.giphy.byAuthor",values:{authorName:a.authorName||"GIPHY",inlinetextlink:e=>(0,w.jsx)(Le().Z,{external:!0,href:a.imageUrl,children:e})}})})]},a.id)}const Ue=function(e){let{tab:t,isSmallWidth:o}=e;const[a,r]=(0,i.useState)(""),[s,l]=(0,i.useState)(""),d=(0,n().O7)(),{device:c}=d,u=Pe(),m=(0,i.useCallback)((async()=>{if(!p().xb(a))return a;const e=await Ie().callApi({eventName:"getGiphyRandomId",environment:d,data:{}});return"success"===e.type?(r(e.data.random_id),e.data.random_id):void 0}),[d,a]);return(0,w.jsxs)("div",{style:{paddingBottom:8},children:[(0,w.jsx)(B().Z,{desktopStyle:{marginTop:8,marginBottom:6},children:(0,w.jsx)(W().ZP,{value:s,placeholder:Me().Z.formatMessage(Ee.giphyPlaceholder),showClearButton:!0,focus:!c.isMobile||void 0,onChange:e=>l(e.target.value)})}),(0,w.jsx)("div",{style:u.galleryWrap,children:(0,w.jsx)(E().Z,{request:s,debounce:Re().vp,performRequest:async e=>{await m();const t=await Ie().callApi({eventName:"searchGiphyImages",environment:d,data:{query:e,page:0}});if("success"===t.type)return t.data.results;throw t.error},render:(e,i,n)=>(0,w.jsx)(_e,{tab:t,results:i,ready:n,isSmallWidth:o,giphyRandomId:a})})})]})};var We=()=>o(709344);const Ae=(0,d().vU)({unsplashPlaceholder:{id:"mediaPicker.unsplashPlaceholder.text",defaultMessage:"Search for an imageâ¦"}});function Fe(e){const{tab:t,results:o,ready:n,isSmallWidth:a}=e,s=(0,r().yK)((e=>({loading:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:320,flex:1},captionMenuItem:{textAlign:a?"left":"center",color:e.mediumTextColor}})),[a]);return n?!o||o&&!o.length?(0,w.jsx)(T().Z,{shouldWrapCaption:!0,caption:(0,w.jsx)(d()._H,{defaultMessage:"No results found.",id:"mediaPicker.unsplash.noResultsText"}),style:s.captionMenuItem}):(0,w.jsxs)(i.Fragment,{children:[o.map(((e,o)=>(0,w.jsx)(De,{tab:t,image:e},o))),(0,w.jsx)(T().Z,{shouldWrapCaption:!0,caption:(0,w.jsx)(d()._H,{defaultMessage:"Search to find more results.",id:"mediaPicker.unsplash.searchText"}),style:s.captionMenuItem})]}):(0,w.jsx)("div",{style:s.loading,children:(0,w.jsx)(Te().Z,{})})}function De(e){let{tab:t,image:o}=e;const a=(0,n().O7)(),{device:r}=a,s=(0,i.useCallback)((async()=>{const e=await(0,We().default)({environment:a,url:o.downloadUrl,method:"GET",format:"json"});"success"===e.type&&t.onChange({url:e.data.url})}),[a,o.downloadUrl,t]);return(0,w.jsxs)("div",{style:{width:r.isMobile?"33%":"25%",padding:3},children:[(0,w.jsx)(Ce().Z,{hoveredStyle:{opacity:.85},onClick:s,children:(0,w.jsx)(Se().ZP,{src:o.thumbUrl,style:{width:"100%",height:64,objectFit:"cover",objectPosition:"center 0%",borderRadius:4}})}),(0,w.jsx)(Be().Z,{isSmall:!0,isSecondaryColor:!0,style:{marginTop:2,marginBottom:4},children:(0,w.jsx)(d()._H,{defaultMessage:"by <inlinetextlink>{authorName}</inlinetextlink>",id:"mediaPicker.unsplash.byAuthor",values:{authorName:o.authorName,inlinetextlink:e=>(0,w.jsx)(Le().Z,{external:!0,href:o.unsplashUrl,children:e})}})})]},o.id)}const Ve=function(e){let{tab:t,isSmallWidth:o}=e;const[a,r]=(0,i.useState)(""),s=(0,n().O7)(),{device:l}=s,d=Pe();return(0,w.jsxs)("div",{style:{paddingBottom:8},children:[(0,w.jsx)(B().Z,{desktopStyle:{marginTop:8,marginBottom:6},children:(0,w.jsx)(W().ZP,{value:a,placeholder:Me().Z.formatMessage(Ae.unsplashPlaceholder),showClearButton:!0,focus:!l.isMobile||void 0,onChange:e=>r(e.target.value)})}),(0,w.jsx)("div",{style:d.galleryWrap,children:(0,w.jsx)(E().Z,{request:a,debounce:Re().vp,performRequest:async e=>{const t=await Ie().callApi({eventName:"searchUnsplashImages",environment:s,data:{query:e,page:0}});if("success"===t.type)return t.data.results;throw t.error},render:(e,i,n)=>(0,w.jsx)(Fe,{tab:t,results:i,ready:n,isSmallWidth:o})})})]})},ze=(0,d().vU)({embedPlaceholder:{id:"mediaPicker.embedPlaceholder.text",defaultMessage:"Paste in https://â¦"},filterPlaceholder:{id:"mediaPicker.emojiFilter.text",defaultMessage:"Filterâ¦"},aiSourcePickerPlaceholder:{id:"mediaPicker.githubPlaceholder.text",defaultMessage:"Ask query here"},aiIsFetchingLoader:{id:"mediaPicker.aiIsFetchingLoader.text",defaultMessage:"Ai is fetching"}});const Oe=function(e){var t,r;const s=(0,n().O7)(),c=(0,i.useRef)(null),u=(0,a().qz)(void 0,o(718798).Z),[m,g]=(0,i.useState)({inputValue:"",focus:!1}),[h,x]=(0,i.useState)({inputValue:"",focus:!1}),v=(0,a().qz)(void 0,fe);function y(){const t=e.tabs.find((t=>t.type===e.currentTab));if(!t)return(0,w.jsx)(d()._H,{defaultMessage:"Uh oh! Something went wrong.",id:"mediaPicker.errorMessage"});switch(t.type){case"embed":return(0,w.jsx)(ct,{isSmallWidth:e.isSmallWidth,embedInputStore:u,tab:t});case"file":return(0,w.jsx)(Je,{isSmallWidth:e.isSmallWidth,onCancel:e.onCancel,tab:t});case"emoji":return(0,w.jsx)(o(901526).h,{onSubmit:t.onChange,filter:m.inputValue||"",isCallout:e.isCallout,iconLoggingData:e.recordIconLoggingData,menuRef:c,onUpload:t.uploadFileEventHandlers,isInline:!1});case"icon":return(0,w.jsx)(O().$1,{filter:h.inputValue||"",onSubmit:t.onChange,iconLoggingData:e.recordIconLoggingData,enforceIconColor:t.enforceIconColor,menuRef:c});case"gallery":return(0,w.jsx)(we,{tab:t});case"unsplash":return(0,w.jsx)(Ve,{tab:t,isSmallWidth:e.isSmallWidth});case"giphy":return(0,w.jsx)(Ue,{tab:t,isSmallWidth:e.isSmallWidth});case"drive":return(0,w.jsx)(rt,{tab:t});case"box":return(0,w.jsx)(tt,{tab:t});case"aiSourcePicker":return(0,w.jsx)(st,{isSmallWidth:e.isSmallWidth,aiSourcePickerStore:v,tab:t});case"custom":return(0,w.jsx)(dt,{isSmallWidth:e.isSmallWidth,onCancel:e.onCancel,embedInputStore:u,tab:t});case"customEmoji":return(0,w.jsx)(o(551693).z,{showTitle:!1,largeEmoji:!0,allowUrlPaste:!0,confirmToAdd:!0,uploadFileEventHandlers:t.uploadFileEventHandlers,onUploadWithoutSaving:t.onUploadWithoutSaving,onCancel:e.onCancel,entrypoint:"upload_tab"});default:(0,o(696459).t1)(t)}}const j=null!=c&&null!==(t=c.current)&&void 0!==t&&t.offsetWidth?((null==c||null===(r=c.current)||void 0===r?void 0:r.offsetWidth)-24)/32:12,{device:b}=s,S=(0,w.jsxs)(i.Fragment,{children:[(0,w.jsx)(nt,{tabs:e.tabs,onDelete:e.onDelete,currentTab:e.currentTab}),(0,w.jsx)(Ke,{tabs:e.tabs,currentTab:e.currentTab,onFilterChange:e=>{const t=j*(s.device.isMobile?O().L6:O().OF);g({...m,inputValue:e.currentTarget.value}),x({...h,inputValue:e.currentTarget.value}),xe().default.setState({...xe().default.state,loadIconCount:t})},iconInput:h.inputValue,emojiInput:m.inputValue,onRandomButtonClick:t=>{"emoji"===t.type?function(e,t,o){const{device:i}=o,n=e.find((e=>e.type===t));if(n&&"emoji"===n.type){const e=f().zM();n.onChange(e,{keepVisible:!i.isMobile})}}(e.tabs,e.currentTab,s):function(e,t,o){const{device:i}=e,n=t.find((e=>e.type===o));if(n&&"icon"===n.type){const e=n.enforceIconColor??(null===(a=C().default.state)||void 0===a||null===(a=a.currentUserSettingsStore)||void 0===a||null===(a=a.getSettings())||void 0===a?void 0:a.icon_picker_color),t=`/icons/${p().UP(Object.keys(xe().default.getState().allIcons))}_${e??p().UP(l().Oe)}.svg`;n.onChange(t,{keepVisible:!i.isMobile})}var a}(s,e.tabs,e.currentTab)}})]});let M;if(b.isMobile)M={menuType:le().o.Modal,title:e.title,header:S,right:(0,w.jsx)(d()._H,{defaultMessage:"Close",id:"mediaPicker.mobileCloseButton.label"}),onClickRight:e.onCancel,left:e.onDelete&&(0,w.jsx)(d()._H,{defaultMessage:"Remove",id:"mediaPicker.mobileRemoveButton.label"}),onClickLeft:e.onDelete};else{M={menuType:le().o.Popup,header:S};const t=e.tabs.find((t=>t.type===e.currentTab)),o=t&&"tabHeight"in t?t.tabHeight:void 0;M.width=e.popupWidth||300,M.height=o||e.popupHeight,M.maxHeight=e.maxHeight,M.maxWidth=e.maxWidth}return(0,w.jsx)(o(604898).Z,{onSwipeLeft:()=>function(e,t){if(!ve().Z.state.isActive)return;const o=e.map((e=>e.type)).indexOf(ve().Z.state.currentTab),i=e[o+1];void 0!==i&&it(i.type,t)}(e.tabs,s),onSwipeRight:()=>function(e,t){if(!ve().Z.state.isActive)return;const o=e.map((e=>e.type)).indexOf(ve().Z.state.currentTab),i=e[o-1];void 0!==i&&it(i.type,t)}(e.tabs,s),render:e=>(0,w.jsx)(o(198829).Z,{...M,...e,className:k().tQh,innerRef:c,children:y()})})};function Ke(e){const t=(0,d().YB)(),{isPhone:o,isMobile:i,isAndroid:a}=(0,n().Fy)(),r=e.tabs.find((t=>t.type===e.currentTab));if("emoji"===(null==r?void 0:r.type)||"icon"===(null==r?void 0:r.type)){const n="emoji"===r.type?e.emojiInput:e.iconInput,s=()=>e.onRandomButtonClick(r),l=(0,w.jsx)(qe,{tabs:e.tabs,currentTab:e.currentTab,hasRandomButtonOnLeft:!r.hideRandomButton});return(0,w.jsx)("div",{style:{display:"flex",...o?{}:{marginTop:16,marginBottom:10}},children:(0,w.jsx)(W().ZP,{value:n,placeholder:t.formatMessage(ze.filterPlaceholder),autoFocus:!i||void 0,focusInitial:!i||void 0,showClearButton:!0,inputLeft:(0,w.jsx)(W().f_,{icon:ue().R}),onChange:e.onFilterChange,right:(0,w.jsxs)("div",{style:{display:"flex"},children:[null!=r&&r.hideRandomButton?void 0:(0,w.jsx)(z().Z,{renderTooltip:()=>(0,w.jsx)(d()._H,{id:"mediaPicker.emojiTab.random",defaultMessage:"Random"}),placement:$().Placement.Bottom,render:e=>(0,w.jsx)(W().DO,{icon:pe,onClick:s,...e})}),l]}),isRightLastElementOfInput:!0,style:{...a&&{borderBottom:"none"}}})},`input-header-${r.type}`)}return null}function Ne(e){return e.fileUpload?se().jo:e.imageUpload?se().LR:e.videoUpload?se().G7:void 0}async function Ge(e){let{tab:t,accept:o,allowMultipleFileSelection:i=!1}=e;const n=await v().y({multiple:i,accept:o});n.length&&t.onUpload(n)}function qe(e){let{hasRandomButtonOnLeft:t,tabs:o,currentTab:i}=e;const n=o.find((e=>e.type===i));if(!n)return null;let a;return"emoji"===(null==n?void 0:n.type)?a=(0,w.jsx)(re().Z,{}):"icon"===(null==n?void 0:n.type)&&void 0===n.enforceIconColor&&(a=(0,w.jsx)(te,{})),t&&a?(0,w.jsx)("div",{style:{marginLeft:6},children:a}):a??null}function $e(e){let{tab:t,isSmallWidth:o}=e;return t.imageUpload||t.videoUpload?(0,w.jsxs)(B().Z,{desktopStyle:{marginTop:4,display:"flex",justifyContent:"center",marginRight:12,marginLeft:12},children:[t.imageUpload&&(0,w.jsx)(F().Z,{isLarge:!0,onClick:()=>Ge({tab:t,accept:"image/*",allowMultipleFileSelection:!0}),style:{width:"100%"},children:(0,w.jsx)(d()._H,{defaultMessage:"Upload file",id:"mediaPicker.chooseImage.buttonText"})}),t.videoUpload&&(0,w.jsx)(L().Z,{title:(0,w.jsx)(d()._H,{defaultMessage:"Choose a video",id:"mediaPicker.chooseVideo.buttonText"}),onClick:()=>Ge({tab:t,accept:"video/*"}),fullWidth:o})]}):null}function Je(e){let{tab:t,isSmallWidth:o,onCancel:i}=e;const s=(0,n().O7)(),l=(0,a().Kw)(be().subscriptionDataStoreInstance),p=(0,r().yK)((e=>({dropzone:{background:(0,u().fn)([u().ZP.blueWithAlpha(.14),(0,c().Fq)(e.contentBackground,.5)])},caption:{textAlign:o?"left":"center",color:e.mediumTextColor},fileLimitWrapper:{display:"flex",alignItems:"center",justifyContent:o?"flex-start":"center"},fileLimitInner:{marginRight:6,color:e.mediumTextColor}})),[o]),m=(0,a().VK)((()=>ge().default.state.isOnboarding),[]),g=(0,a().VK)((()=>je().M9(s)||"plus"),[s]);return(0,w.jsx)(H().Q,{type:Ne(t)??se().gU,dropTargetKey:"uploadTab",onDropFile:e=>{if("invalidFileDrop"===e.type)return x().oV({label:(0,w.jsx)(d()._H,{id:"mediaPicker.invalidImageDrop.wrongTypeErrorMessage",defaultMessage:"Sorry, that file type is not supported."})}),null;t.onUpload([e.file])},dropzoneStyle:p.dropzone,children:(0,w.jsxs)("div",{style:{marginTop:-24,paddingTop:24},children:[t.fileUpload&&(0,w.jsx)(B().Z,{desktopStyle:{marginTop:o?8:24},children:(0,w.jsx)(L().Z,{title:(0,w.jsx)(d()._H,{defaultMessage:"Choose a file",id:"mediaPicker.chooseFile.button.label"}),onClick:()=>Ge({tab:t}),fullWidth:o})}),(0,w.jsx)($e,{isSmallWidth:o,tab:t}),t.caption&&(0,w.jsx)(T().Z,{shouldWrapCaption:!0,caption:t.caption,style:p.caption}),t.preventUploadLimitFreeFileSize||l&&je().YK(l)&&(0,w.jsx)("div",{style:{height:8}}),l&&!t.preventUploadLimitFreeFileSize&&!je().YK(l)&&(0,w.jsx)(T().Z,{shouldWrapCaption:!0,caption:(0,w.jsxs)("div",{style:p.fileLimitWrapper,children:[(0,w.jsx)("div",{style:p.fileLimitInner,children:(0,w.jsx)(d()._H,{defaultMessage:"The maximum size per file is {filesize} MB.",id:"mediaPicker.maximumFileSize.notice",values:{filesize:v().K_}})}),!m&&(0,w.jsx)(ye().Z,{subscriptionTier:g,onClick:()=>{i&&i()},analyticsName:"media_picker",desktopStyle:{marginBottom:1}})]})})]})})}let Ye=function(e){return e.Drive="drive",e.Docs="gDocs",e}({});function Qe(e){let{tab:t,type:o}=e;return o===Ye.Docs?(0,w.jsx)(et,{tab:t}):(0,w.jsx)(Xe,{tab:t})}function Xe(e){let{tab:t}=e;const o=(0,r().yK)((e=>({buttonItem:{color:e.blueColor}})),[]);return(0,w.jsxs)(B().Z,{children:[(0,w.jsx)(_().Z,{title:(0,w.jsx)(d()._H,{defaultMessage:"Connect Google account",id:"mediaPicker.menuItem.connectFirstGoogleAccount.label"}),onClick:()=>t.onSelect(),focused:!1,style:o.buttonItem}),(0,w.jsx)(T().Z,{shouldWrapCaption:!1,caption:(0,w.jsx)(d()._H,{defaultMessage:"Find and embed your Google Drive files.",id:"mediaPicker.menuItem.connectFirstGoogleAccount.caption"})})]})}function et(e){let{tab:t}=e;return(0,w.jsx)(B().Z,{children:(0,w.jsx)(_().Z,{title:(0,w.jsx)(d()._H,{defaultMessage:"Connect Google account",id:"mediaPicker.menuItem.connectFirstGoogleAccount.label"}),onClick:()=>t.onSelect(),focused:!1})})}function tt(e){let{tab:t}=e;const o=(0,r().yK)((e=>({connectFirstAccountButton:{color:e.blueColor},connectSecondAccountButton:{color:e.mediumTextColor}})),[]),{accounts:i}=t;return 0===i.length?(0,w.jsxs)(B().Z,{children:[(0,w.jsx)(_().Z,{title:(0,w.jsx)(d()._H,{defaultMessage:"Connect Box account",id:"mediaPicker.menuItem.connectFirstBoxAccount.label"}),onClick:()=>t.onSelect(),focused:!1,style:o.connectFirstAccountButton}),(0,w.jsx)(T().Z,{shouldWrapCaption:!1,caption:(0,w.jsx)(d()._H,{defaultMessage:"Find and embed your Box files.",id:"mediaPicker.menuItem.connectFirstBoxAccount.caption"})})]}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(B().Z,{children:i.map((e=>(0,w.jsx)(_().Z,{title:(0,w.jsx)(d()._H,{defaultMessage:"Choose from {accountName}",id:"mediaPicker.menuItem.choosePagesFromAccount.label",values:{accountName:e.account_name}}),onClick:()=>t.onSelect(e),focused:!1},e.account_key)))}),(0,w.jsx)(B().Z,{topBorder:!0,children:(0,w.jsx)(_().Z,{title:(0,w.jsx)(d()._H,{defaultMessage:"Connect another account",id:"mediaPicker.menuItem.connectMoreBoxAccounts.label"}),onClick:()=>t.onSelect(),style:o.connectSecondAccountButton,focused:!1})})]})}function ot(e,t){return()=>{e&&t.onChange(e)}}function it(e,t){ve().Z.state.isActive&&(ve().Z.setState({...ve().Z.state,currentTab:e}),"icon"===e&&ve().Z.state.recordIconLoggingData&&m().kz(t,"select_icon_tab",ve().Z.state.recordIconLoggingData))}function nt(e){let{tabs:t,onDelete:o,currentTab:a}=e;const s=(0,r().yK)((e=>({sparklesIcon:{width:16,height:16,marginRight:4,color:e.accentColors.purple[400]}})),[]),l=(0,n().O7)(),{device:c}=l;if(t.length<=1&&!o)return null;{const e={gallery:(0,w.jsx)(d()._H,{id:"mediaPicker.tabs.gallery",defaultMessage:"Gallery"}),embed:(0,w.jsx)(d()._H,{id:"mediaPicker.tabs.embedLink",defaultMessage:"Embed link"}),file:(0,w.jsx)(d()._H,{id:"mediaPicker.tabs.upload",defaultMessage:"Upload"}),emoji:(0,w.jsx)(d()._H,{id:"mediaPicker.tabs.emoji",defaultMessage:"Emoji"}),icon:(0,w.jsx)(d()._H,{id:"mediaPicker.tabs.icon",defaultMessage:"Icon"}),custom:(0,w.jsx)(d()._H,{id:"mediaPicker.tabs.custom",defaultMessage:"Custom"}),customEmoji:(0,w.jsx)(d()._H,{id:"mediaPicker.tabs.customEmoji",defaultMessage:"Upload"}),unsplash:(0,w.jsxs)(i.Fragment,{children:[me({width:12,marginRight:4,height:12}),(0,w.jsx)("span",{children:"Unsplash"})]}),giphy:(0,w.jsxs)(i.Fragment,{children:[ce({width:12,marginRight:4,height:12}),(0,w.jsx)("span",{children:"GIPHY"})]}),drive:(0,w.jsx)(d()._H,{id:"mediaPicker.tabs.browse",defaultMessage:"Browse"}),box:(0,w.jsx)(d()._H,{id:"mediaPicker.tabs.browse",defaultMessage:"Browse"}),aiSourcePicker:(0,w.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,w.jsx)(d()._H,{id:"mediaPicker.tabs.ask",defaultMessage:"Ask"}),(0,b().t)(s.sparklesIcon)]})},n=t.findIndex((e=>e.type===a)),r=t.map((t=>t.title||e[t.type])),u=t.find((e=>e.type===a)),p=u&&"emoji"!==u.type&&c.isAndroid;return(0,w.jsx)(ne().Z,{tabs:r,selectedIndex:n,onChange:e=>{it(t[e].type,l)},right:o&&!c.isMobile&&(0,w.jsx)(D().Z,{isGray:!0,onClick:o,children:(0,w.jsx)(d()._H,{id:"mediaPicker.tabs.remove",defaultMessage:"Remove"})}),style:{...p&&{borderBottom:"none"}}})}}function at(e){let{tab:t,accounts:o,type:n=Ye.Drive}=e;const a=(0,r().yK)((e=>({buttonItem:{color:e.mediumTextColor}})),[]);return"accounts"in t?t.accounts&&0===t.accounts.length?(0,w.jsx)(Qe,{tab:t,type:n}):(0,w.jsxs)(i.Fragment,{children:[(0,w.jsx)(B().Z,{children:t.accounts.map(((e,o)=>(0,w.jsx)(_().Z,{title:(0,w.jsx)(d()._H,{defaultMessage:"Choose from {accountName}",id:"mediaPicker.menuItem.choosePagesFromAccount.label",values:{accountName:e.account_name}}),onClick:()=>t.onSelect(e),focused:!1},e.account_key)))}),(0,w.jsx)(B().Z,{topBorder:!0,children:(0,w.jsx)(_().Z,{title:(0,w.jsx)(d()._H,{defaultMessage:"Connect another account",id:"mediaPicker.menuItem.connectMoreGoogleAccounts.label"}),onClick:()=>t.onSelect(),style:a.buttonItem,focused:!1})})]}):o?0===o.length?(0,w.jsx)(Qe,{tab:t,type:n}):(0,w.jsxs)(i.Fragment,{children:[(0,w.jsx)(B().Z,{children:o.map(((e,o)=>(0,w.jsx)(_().Z,{title:(0,w.jsx)(d()._H,{defaultMessage:"Choose from {accountName}",id:"mediaPicker.menuItem.choosePagesFromAccount.label",values:{accountName:e.accountName}}),onClick:()=>t.onSelect(e),focused:!1},e.accountId)))}),(0,w.jsx)(B().Z,{topBorder:!0,children:(0,w.jsx)(_().Z,{title:(0,w.jsx)(d()._H,{defaultMessage:"Connect another account",id:"mediaPicker.menuItem.connectMoreGoogleAccounts.label"}),onClick:()=>t.onSelect(),style:a.buttonItem,focused:!1})})]}):null}function rt(e){let{tab:t}=e;const o=(0,n().O7)();return"accounts"in t?(0,w.jsx)(at,{tab:t}):(0,w.jsx)(E().Z,{request:o,performRequest:h().vQ,render:(e,o,i)=>{if(!i)return(0,w.jsx)(B().Z,{children:(0,w.jsx)(ie().Z,{})});const n=o&&o.accounts?o.accounts:[];return(0,w.jsx)(at,{tab:t,accounts:n})}})}function st(e){var t,o;let{tab:n,isSmallWidth:s,aiSourcePickerStore:l}=e;const c=(0,d().YB)(),u=(0,r().yK)((e=>({captionItem:{textAlign:s?"left":"center",color:e.mediumTextColor},aiResult:{cursor:"pointer",color:e.mediumTextColor,textAlign:"left",hyphens:"auto",padding:"10px 8px",display:"flex",flexDirection:"row"},aiTitleWrapper:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",color:"rgb(55, 53, 47)",fontWeight:500,fontSize:"14px",paddingLeft:8},aiLoadingWrapper:{flex:1,color:e.accentColors.purple[400],fontWeight:500,flexDirection:"row",gap:6,display:"flex",alignItems:"center",padding:"12px 12px",marginLeft:10},loadingDots:{backgroundColor:e.accentColors.purple[400]}})),[s]),p=(0,a().qz)(l,fe),m=(0,a().Kw)(p);return(0,w.jsxs)(i.Fragment,{children:[m.result&&!1===m.loading&&(0===(null===(t=m.result)||void 0===t?void 0:t.length)?(0,w.jsx)(T().Z,{shouldWrapCaption:!0,caption:(0,w.jsx)(d()._H,{defaultMessage:"No results found.",id:"mediaPicker.aiSourcePicker.noResultsText"}),style:u.captionItem}):null===(o=m.result)||void 0===o?void 0:o.map((e=>(0,w.jsxs)("div",{style:{...u.aiResult,backgroundColor:m.hover===e.url?"rgba(55,53,47,0.08)":""},onClick:ot(e.url,n),onMouseEnter:()=>{p.setState({...m,hover:e.url})},children:[(0,w.jsx)(U().Z,{imageURL:"NONE"===e.avatar?n.defaultAvatar:e.avatar,size:24,imageStyle:{borderRadius:34,boxShadow:"0 2px 4px rgba(15, 15, 15, 0.1)"},type:"image_url"}),(0,w.jsx)("div",{style:u.aiTitleWrapper,children:e.title})]},e.url)))),m.loading&&(0,w.jsxs)("div",{style:u.aiLoadingWrapper,children:[c.formatMessage(ze.aiIsFetchingLoader),(0,w.jsx)(A().Z,{style:u.loadingDots})]}),!m.result&&!m.loading&&(0,w.jsx)(R,{tab:n,placeholder:n.inputPlaceholder||c.formatMessage(ze.aiSourcePickerPlaceholder),store:p,isSmallWidth:s})]})}function lt(e,t,o){return()=>{const i=o.state.inputValue;if(i){const o=(0,s().Wv)({source:i,secureFileConfigRootpath:ae().default.secureFileConfig.rootPath,secureFileConfigHostname:ae().default.secureFileConfig.hostname}),n=o?o.link:i;e.onChange(n),g().bO(t,{pastedText:n,source:"media_picker"})}}}function dt(e){let{tab:t,isSmallWidth:o,onCancel:i,embedInputStore:s}=e;const l=(0,d().YB)(),p=(0,n().O7)(),m=(0,n().Fy)(),g=(0,a().Kw)(be().subscriptionDataStoreInstance),h=(0,a().VK)((()=>je().M9(p)),[p]),f=(0,a().VK)((()=>s.state.inputValue),[s]),y=(0,a().VK)((()=>ge().default.state.isOnboarding),[]),j=(0,r().yK)((e=>({dropZone:{background:(0,u().fn)([u().ZP.blueWithAlpha(.14),(0,c().Fq)(e.contentBackground,.5)])},caption:{textAlign:o?"left":"center",color:e.mediumTextColor},subscriptionLimitWrapper:{display:"flex",alignItems:"center",justifyContent:o?"flex-start":"center"},subscriptionLimitInner:{marginRight:6,color:e.mediumTextColor}})),[o]),b=(0,w.jsx)(V().Z,{onClick:lt(t,p,s),disabled:0===f.length,hovered:!1,children:t.buttonText||(0,w.jsx)(d()._H,{defaultMessage:"Link",id:"mediaPicker.embedTab.embedLinkButtonText"})}),C=(0,w.jsx)(B().Z,{desktopStyle:{marginTop:16,display:"flex",paddingTop:0,paddingBottom:12},children:(0,w.jsx)(W().ZP,{type:"url",value:f,placeholder:t.inputPlaceholder||l.formatMessage(ze.embedPlaceholder),autoFocus:!m.isMobile||void 0,showClearButton:!0,focus:!m.isMobile||void 0,onSubmit:lt(t,p,s),onChange:e=>{s.setState({...s.state,inputValue:e.target.value})},inputRight:m.isPhone?b:void 0,right:m.isPhone?void 0:b,isRightLastElementOfInput:!0})}),S=(0,w.jsx)(H().Q,{type:Ne(t)??se().gU,dropTargetKey:"uploadTab",onDropFile:e=>{if("invalidFileDrop"===e.type)return x().oV({label:(0,w.jsx)(d()._H,{id:"mediaPicker.invalidImageDrop.wrongTypeErrorMessage",defaultMessage:"Sorry, that file type is not supported."})}),null;t.onUpload([e.file])},dropzoneStyle:j.dropZone,children:(0,w.jsxs)("div",{style:{marginTop:-24,paddingTop:24},children:[t.fileUpload&&(0,w.jsx)(B().Z,{desktopStyle:{marginTop:o?8:24},children:(0,w.jsx)(L().Z,{title:(0,w.jsx)(d()._H,{defaultMessage:"Choose a file",id:"mediaPicker.chooseFile.button.label"}),onClick:()=>Ge({tab:t}),fullWidth:o})}),(0,w.jsx)($e,{isSmallWidth:o,tab:t}),t.caption&&(0,w.jsx)(T().Z,{shouldWrapCaption:!0,caption:t.caption,style:j.caption}),t.preventUploadLimitFreeFileSize||g&&je().YK(g)&&(0,w.jsx)("div",{style:{height:8}}),g&&!t.preventUploadLimitFreeFileSize&&!je().YK(g)&&(0,w.jsx)(T().Z,{shouldWrapCaption:!0,caption:(0,w.jsxs)("div",{style:j.subscriptionLimitWrapper,children:[(0,w.jsx)("div",{style:j.subscriptionLimitInner,children:(0,w.jsx)(d()._H,{defaultMessage:"The maximum size per file is {filesize} MB.",id:"mediaPicker.maximumFileSize.notice",values:{filesize:v().K_}})}),!y&&(0,w.jsx)(ye().Z,{subscriptionTier:h||"plus",onClick:()=>{i&&i()},analyticsName:"media_picker",desktopStyle:{marginBottom:1}})]})})]})});return(0,w.jsxs)(w.Fragment,{children:[C,S]})}function ct(e){let{tab:t,isSmallWidth:o,embedInputStore:r}=e;const s=(0,n().O7)(),l=(0,d().YB)(),{device:c}=s,u=(0,a().VK)((()=>r.state.inputValue),[r]);return(0,w.jsxs)(i.Fragment,{children:[(0,w.jsx)(B().Z,{desktopStyle:{marginTop:8},children:(0,w.jsx)(W().ZP,{type:"url",value:u,placeholder:t.inputPlaceholder||l.formatMessage(ze.embedPlaceholder),autoFocus:!c.isMobile||void 0,showClearButton:!0,focus:!c.isMobile||void 0,onSubmit:lt(t,s,r),onChange:e=>{r.setState({...r.state,inputValue:e.target.value})}})}),(0,w.jsx)(B().Z,{style:t.caption?{}:{marginBottom:6},children:(0,w.jsx)(L().Z,{onClick:lt(t,s,r),title:t.buttonText||(0,w.jsx)(d()._H,{defaultMessage:"Link",id:"mediaPicker.embedTab.embedLinkButtonText"}),fullWidth:o})}),t.caption&&(0,w.jsx)(T().Z,{shouldWrapCaption:!0,caption:t.caption,style:{textAlign:c.isMobile?"left":"center",marginBottom:4}})]})}},933539:(e,t,o)=>{o.d(t,{Z:()=>n});class i extends(()=>o(263184))().default{getInitialState(){return{open:!1}}dismiss(){this.setState({...this.state,open:!1})}}const n=new i},180099:(e,t,o)=>{o.d(t,{Z:()=>r});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(241792);const i={value:-1,refetch:!1};class n extends(()=>o(168469))().q{constructor(e,t){super(e,t),this.emitDataMapStore=void 0,this.emitDataMapStore=o(263184).default.createValue({})}getData(e,t){var o;let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a=this.keyFn(t);a in this.emitDataMapStore.state||(this.emitDataMapStore.state[a]={...i},this.emitDataMapStore.emit());const r=n||this.emitDataMapStore.state[a].refetch||void 0===(null===(o=this.storeMap[a])||void 0===o?void 0:o.state);return this.emitDataMapStore.state[a].refetch=!1,super.getData(e,t,r)}getDataWithoutRefetch(e,t){const o=this.keyFn(t);return o in this.emitDataMapStore.state||(this.emitDataMapStore.state[o]={...i},this.emitDataMapStore.emit()),super.getData(e,t,!1)}emit(e,t){const o=this.keyFn(e),n=this.emitDataMapStore.state[o].value;t!==n&&n!==i.value&&(this.emitDataMapStore.state[o].refetch=!0),this.emitDataMapStore.state[o].value=t;const a={...this.emitDataMapStore.state[o]};this.emitDataMapStore.setState({...this.emitDataMapStore.state,[o]:a})}getKeys(){return Object.keys(this.emitDataMapStore.state)}}const a=new n((e=>{let{spaceId:t}=e;return t}),(async function(e,t){if(!o(749826).default.checkGate({gateName:"custom_emojis"}))return;const i=await o(824462).getCustomEmojisForSpace({environment:e,data:t,headers:(0,o(741633).Bb)({spaceId:t.spaceId})});if("failed"===i.type)return;const n={pointers:[],names:new Set,lastFetchedBy:e.currentUser.id},a=o(217465).RecordMapWithRole.create(i.data.recordMap),r=[];for(const{pointer:s}of a.getByTable(o(717740).p)){const e=a.getModel(s);if(!e)continue;const t=e.getName();n.names.add(t),r.push({pointer:s,name:t})}return n.pointers=r.sort(((e,t)=>e.name.localeCompare(t.name))).map((e=>e.pointer)),n}));o(947115).exposeDebugValue("CustomEmojisStore",a);const r=a},808985:(e,t,o)=>{o.d(t,{default:()=>n});class i extends(()=>o(263184))().default{getInitialState(){return{allIcons:{},recentIcons:[],loadIconCount:0}}}const n=new i},188296:(e,t,o)=>{o.d(t,{Z:()=>u});o(667294);var i=()=>o(142735),n=()=>o(122792),a=()=>o(788860),r=()=>o(568017),s=()=>o(707513),l=()=>o(946563),d=()=>o(965014),c=o(785893);const u=function(e){let{subscriptionTier:t,mobileStyle:u,desktopStyle:p,analyticsName:m,onClick:g,disableTooltip:h}=e;const f=(0,o(846550).Fg)(),x=(0,o(219727).O7)(),{device:v}=x,y=(0,i().VK)((()=>{const{currentSpaceStore:e}=o(876822).default.state;return null==e?void 0:e.canAdmin()}),[]),j=(0,i().VK)((()=>function(e,t){switch(e){case"plus":case"business":case"enterprise":return{color:t.blueColor,background:"light"===t.mode?r().ZP.diffBackground:"rgba(35, 131, 226, 0.2)",fontWeight:s().Ue.medium};default:return{}}}(t,f)),[t,f]);if(v.isMobileNative)return null;let b;return"personal"===t?b=(0,c.jsx)(a()._H,{defaultMessage:"Personal Pro",id:"upgradeButton.personal.text"}):(0,n().eR)(t)?b=(0,c.jsx)(a()._H,{defaultMessage:"Plus â",id:"upgradeButton.plus.textWithArrow"}):(0,n().NG)(t)?b=(0,c.jsx)(a()._H,{defaultMessage:"Business â",id:"upgradeButton.business.textWithArrow"}):(0,n().wP)(t)?b=(0,c.jsx)(a()._H,{defaultMessage:"Enterprise â",id:"upgradeButton.enterprise.textWithArrow"}):(0,o(696459).t1)(t),v.isMobile||!y?(0,c.jsx)(l().Z,{mobileStyle:u,children:b}):(0,c.jsx)(o(654133).Z,{delayThreshold:120,disableTooltip:h,placement:o(998901).Placement.Bottom,renderTooltip:()=>(0,c.jsx)("div",{style:{maxWidth:500},children:(0,c.jsx)(a()._H,{defaultMessage:"Upgrade to use this feature.",id:"upgradeButton.upgrade.tooltip"})}),originGap:6,render:e=>(0,c.jsx)(l().Z,{desktopStyle:p,innerStyle:j,onClick:e=>function(e,t,o,i,n){d().y(i,{from:t,upsell:{type:"product",product:o,limit:{type:"none"}}}),n&&n(e)}(e,m,t,x,g),...e,children:b})})}}}]);