"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[82269],{669086:(e,t,n)=>{n.d(t,{y:()=>o});var a=()=>n(142735),r=()=>n(255393),i=()=>n(897257);function o(){return(0,a().VK)((()=>{var e;const t=(null===(e=i().subscriptionDataStoreInstance.state)||void 0===e?void 0:e.addOns)??[];return(0,r().de)(t)}),[])}},519563:(e,t,n)=>{n.d(t,{S:()=>i});var a=()=>n(142735),r=()=>n(876822);function i(){return(0,a().VK)((()=>{const{currentSpaceStore:e}=r().default.state;return(null==e?void 0:e.getMemberCountFromPublicSpaceData())||null}),[])}},819658:(e,t,n)=>{n.d(t,{q:()=>a().q});var a=()=>n(388852)},438665:(e,t,n)=>{n.d(t,{zL:()=>d,lB:()=>p,ZF:()=>l,DV:()=>_,an:()=>v,n9:()=>g,WV:()=>m});var a=()=>n(799891),r=()=>n(741633);const i={plans_page:["lic_25","lic_50","resurrection_offer","ai_fifty_percent_upgrade"],sidebar_upsell:["lic_25","lic_50"]};var o=()=>n(792409),s=()=>n(824462),c=()=>n(308186),u=()=>n(594546),f=()=>n(876822);async function l(e,t){var n;const{spaceId:a,offerCampaign:r}=t;if(!a||!r||null===(n=f().default.state.currentSpaceStore)||void 0===n||!n.canAdmin())return;const i=await s().callApi({eventName:"getCustomerOffer",environment:e,data:{spaceId:a,offerCampaign:r}});return"failed"!==i.type&&"offer"in i.data&&i.data.offer?i.data.offer:void 0}async function d(e){const{environment:t,spaceId:n,offerCampaign:a,entrypoint:r}=e,i=await s().callApi({eventName:"applyCustomerOffer",environment:t,data:{spaceId:n,offerCampaign:a,entrypoint:r??"unknown"}});if("failed"!==i.type)return i;c().x2(i)}async function p(e,t){const n=await s().callApi({eventName:"applyCustomerOffer",environment:e,data:{...t}});if("failed"!==n.type)return n;c().x2(n)}async function v(e){const{environment:t,spaceId:n,offerCampaign:a}=e;return void 0!==await l(t,{spaceId:n,offerCampaign:a})}async function m(e){var t;const{environment:n,hasReceived:i,offerType:c,newPlan:u,coupon:l}=e,d=null===(t=f().default.state.currentSpaceStore)||void 0===t?void 0:t.getSpaceId();if(!d)return;const p=await s().callApi({eventName:"updateCustomerOffer",environment:n,data:{spaceId:d,hasReceived:i,offerType:c,newPlan:u,coupon:l},headers:(0,r().Bb)({cellId:void 0,spaceId:d})});"failed"===p.type&&a().log({level:"error",from:"offerActions",type:"updateLegacyCustomerOfferFailed",error:(0,o().Ui)(p.error)})}async function _(e,t,n){const a=function(e){if(i.hasOwnProperty(e))return i[e]}(n);if(a)for(const r of a){const n=await l(e,{spaceId:t,offerCampaign:r});if((null==n?void 0:n.campaign)===r)return n}}function g(e){let{environment:t,spaceName:n,offerCampaign:a}=e;if(n)switch(a){case"lic_25":case"lic_50":(0,u().lu)(t,"lic_offer_eligible","lic_offer_eligible",3600,{workspace_name:n,lic_25:"lic_25"===a,lic_50:"lic_50"===a});break;case"resurrection_offer":(0,u().lu)(t,"resurrection_offer_eligible","resurrection_offer_eligible",3600,{workspace_name:n});break;default:return}}},201689:(e,t,n)=>{n.d(t,{J:()=>c});n(667294);var a=()=>n(846550),r=()=>n(654133),i=()=>n(653457),o=()=>n(998901),s=n(785893);function c(e){const{tooltipMessage:t,customContainerStyles:n,tooltipWidth:c,overlayContainerZIndex:u}=e,f=function(e){return(0,a().yK)((t=>({tooltip:{width:e??"300px"},tooltipIcon:{height:14,width:14,fill:t.icon.tertiary,left:6},tooltipIconContainer:{position:"absolute",marginLeft:4,marginTop:2}})),[e])}(c);return(0,s.jsx)(r().Z,{placement:o().Placement.Right,style:f.tooltip,render:e=>(0,s.jsx)("span",{...e,style:{...f.tooltipIconContainer,...n},children:(0,i().m)(f.tooltipIcon)}),renderTooltip:()=>t,textWrap:!0,overlayContainerZIndex:u})}},31328:(e,t,n)=>{n.r(t),n.d(t,{StudentAiOfferPopup:()=>w});var a=()=>n(730120),r=n(667294),i=()=>n(219727),o=()=>n(142735),s=()=>n(61951),c=()=>n(801812),u=()=>n(788860),f=()=>n(979614),l=()=>n(369637),d=()=>n(269299),p=()=>n(348141),v=()=>n(669086),m=()=>n(819658),_=()=>n(408074),g=()=>n(876822),y=()=>n(518019),S=()=>n(438665),h=()=>n(965014),b=()=>n(661769),I=()=>n(201689),C=n(785893);function w(){const e=(0,i().O7)(),t=(0,u().YB)(),{isMobile:n}=(0,i().Fy)(),w=(0,b().bA)("sidebar"),A=(0,v().y)(),{inAppCalloutStore:O,currentUserSettingsStore:V}=(0,o().VK)((()=>({inAppCalloutStore:g().default.state.inAppCalloutStore,currentUserSettingsStore:g().default.state.currentUserSettingsStore})),[]),[{value:x}]=(0,c().r5)((async()=>{const t=g().default.state.currentSpaceStore;if(!t)return;const n=await y().Z.awaitData(e,{spaceId:t.id});return n||void 0}),[e]),K=(0,o().VK)((()=>null==x?void 0:x.subscription),[x]),M=(0,o().VK)((()=>{const e=null==K?void 0:K.startDate;return!!e&&a().ou.now()>e.plus({days:1})}),[K]),Z=(0,o().VK)((()=>O.getCalloutVisibility("student_ai_offer_popup").canShow&&w&&!A&&M),[O,w,A,M]),D=(0,o().VK)((()=>{var e;return null==V||null===(e=V.getSettings())||void 0===e?void 0:e.dismissed_student_ai_popup}),[V]),P=Boolean(!D&&Z&&!n),E=(0,r.useMemo)((()=>function(e){const{intl:t,environment:n,onDismiss:a}=e;return{presentationType:"persistent",id:"student_ai_offer_toast",title:t.formatMessage({id:"studentAiOfferPopup.title",defaultMessage:"Students get half off unlimited AI"}),icon:m().q,jsxMessage:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(u()._H,{id:"studentAiOfferPopup.description",defaultMessage:"Unlock unlimited use of AI for Q&A, Autofill, Writer, and more"}),(0,C.jsx)(I().J,{tooltipMessage:(0,C.jsx)(u()._H,{id:"studentAiOfferPopup.tooltip",defaultMessage:"You can access this offer again by visiting our plans page in settings"}),tooltipWidth:"216px",overlayContainerZIndex:_().TOASTER_ZINDEX+1})]}),actions:{primary:{title:t.formatMessage({id:"studentAiOfferPopup.buttonLabel",defaultMessage:"Redeem now"}),onAction:()=>{(0,h().y)(n,{from:"student_ai_popup",upsell:{type:"product",product:"ai",limit:{type:"none"}}}),l().Xd("student_ai_offer_toast")}}},onDismiss:a}}({intl:t,environment:e,onDismiss:()=>{f().VO(e),O.updateCalloutStatus({calloutId:"student_ai_offer_popup",visible:!1}),V&&d().createAndCommit({userAction:"StudentAiOfferPopup.handleDismiss",environment:e,canUndo:!0,perform:e=>{p().d2({transaction:e,userSettingsStore:V,data:{dismissed_student_ai_popup:!0}})}})}})),[V,e,O,t]);return(0,s().Z)((async()=>{f().t6(e,{from:"student_ai_offer_popup"}),O.updateCalloutStatus({calloutId:"student_ai_offer_popup",visible:!0}),l().m2(E),await(0,S().WV)({environment:e,hasReceived:!1,offerType:"add_on_upgrade_flow",coupon:"ai_fifty_percent"})}),P),null}},661769:(e,t,n)=>{n.d(t,{pQ:()=>o().p,eG:()=>s().e,bA:()=>c().b,nL:()=>d,Hy:()=>g,PL:()=>p().P,tw:()=>y().t,h1:()=>S().h});var a=()=>n(219727),r=()=>n(801812),i=()=>n(824462);var o=()=>n(595976),s=()=>n(272353),c=()=>n(366637),u=()=>n(142735),f=()=>n(616433),l=()=>n(214488);function d(e){let{spaceId:t}=e;const n=(0,a().O7)(),r=(0,f().J)();return(0,u().VK)((()=>{if(!t||!r)return;const e=l().Z.getData(n,{spaceId:t});return null==e?void 0:e.billingData}),[n,t,r])}var p=()=>n(258590),v=()=>n(629719),m=()=>n(876822),_=()=>n(18281);function g(e,t){const n=(0,u().Kw)(e),a=(0,u().VK)((()=>{var e;return null===(e=m().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),s=(0,o().p)({spaceId:a}),c=(0,u().VK)((()=>_().Nf({billingData:s,spaceStore:m().default.state.currentSpaceStore})),[s]),[{value:f}]=(0,r().r5)((()=>i().callApi({eventName:"isEmailEducation",environment:t,data:{}})),[t]);if(!f)return!1;if("failed"===f.type)return!1;if(!f.data.isEligible)return!1;if(!n)return!1;if(!s)return!1;if(Boolean((0,v().a7)(s.subscription,"plan")))return!1;const l=_().hn(n).length;return c&&1===l}var y=()=>n(76999),S=()=>n(205729)},415339:(e,t,n)=>{n.d(t,{T:()=>i});var a=()=>n(142735),r=()=>n(18281);function i(e){return(0,a().VK)((()=>r().AX(e.state)),[e])}},272353:(e,t,n)=>{n.d(t,{e:()=>o});var a=()=>n(142735),r=()=>n(876822),i=()=>n(18281);function o(e){return(0,a().VK)((()=>i().Nf({billingData:e,spaceStore:r().default.state.currentSpaceStore})),[e])}},366637:(e,t,n)=>{n.d(t,{b:()=>_});var a=n(667294),r=()=>n(219727),i=()=>n(142735),o=()=>n(893146),s=()=>n(381348),c=()=>n(824462),u=()=>n(228772),f=()=>n(345918),l=()=>n(669086),d=()=>n(519563),p=()=>n(876822),v=()=>n(697623),m=()=>n(741380);function _(e){const t=(0,r().O7)(),[n,_]=(0,a.useState)(!1),g=function(e){const t=(0,m().m)("ai_fifty_percent_upgrade"),n=(0,l().y)(),a=(0,d().S)();return(0,i().VK)((()=>{const r=t&&!n&&(0,v().iJ)()&&1===a,i=(0,f().zP)(p().default.state.currentSpaceStore);return Boolean(r&&(!i||"sidebar"!==e||i>=7))}),[t,n,a,e])}(e),y=(0,u().r)(),S=(0,i().VK)((()=>null==y?void 0:y.canAdmin()),[y]),h=(0,i().VK)((()=>null==y?void 0:y.getSpaceId()),[y]);return(0,a.useEffect)((()=>{!async function(){if(g&&h&&S)try{const n=await c().callApi({eventName:"getCustomerOffer",environment:t,data:{spaceId:h,offerCampaign:"ai_fifty_percent_upgrade"}});if("failed"===n.type)return;if("offer"in n.data){var e;const t=(0,o().iQ)(null===(e=n.data)||void 0===e?void 0:e.offer);_((0,s().pp)(t))}}catch(n){return}}()}),[t,g,h,S]),n}},348964:(e,t,n)=>{n.d(t,{f:()=>o});var a=n(667294),r=()=>n(219727),i=()=>n(824462);function o(){const e=(0,r().O7)(),[t,n]=(0,a.useState)();return(0,a.useEffect)((()=>{!async function(){const t=await i().callApi({eventName:"getExternalOrgData",environment:e,data:{}});if("failed"===t.type)return;const a=t.data;n(a)}()}),[e]),t}},741380:(e,t,n)=>{n.d(t,{m:()=>c});var a=n(667294),r=()=>n(219727),i=()=>n(142735),o=()=>n(876822),s=()=>n(438665);function c(e){const t=(0,r().O7)(),[n,c]=(0,a.useState)(),u=(0,i().VK)((()=>{var e;return null===(e=o().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]);return(0,a.useEffect)((()=>{!async function(){u&&c(await(0,s().an)({environment:t,spaceId:u,offerCampaign:e}))}()}),[t,u,e]),n}},258590:(e,t,n)=>{n.d(t,{P:()=>i});var a=n(667294),r=()=>n(348964);function i(){const e=(0,r().f)(),[t,n]=(0,a.useState)();return(0,a.useEffect)((()=>{n(!(!e||!("company_employee_count"in e))&&parseInt(e.company_employee_count)>99)}),[e]),t}},76999:(e,t,n)=>{n.d(t,{t:()=>i});var a=()=>n(142735),r=()=>n(18281);function i(e){return(0,a().VK)((()=>r().YK(e.state)),[e])}},205729:(e,t,n)=>{n.d(t,{h:()=>c});var a=n(667294),r=()=>n(219727),i=()=>n(142735),o=()=>n(876822),s=()=>n(254687);function c(){const e=(0,r().O7)(),[t,n]=(0,a.useState)([]),c=(0,i().VK)((()=>{var e;return null===(e=o().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]);return(0,a.useEffect)((()=>{(async()=>{if(c){const t=await(0,s().aQ)({environment:e,spaceId:c});n(t)}})()}),[e,c]),t}},388852:(e,t,n)=>{n.d(t,{q:()=>r});n(667294);var a=n(785893);const r=(0,n(827282).IU)("gift",{viewBox:"0 0 20 20",svg:(0,a.jsx)("g",{id:"Layer_1",children:(0,a.jsx)("path",{d:"M16,5.75h-.6682129c.2590332-.4436646.4182129-.9526367.4182129-1.5024414,0-.8989258-.4003906-1.7426758-1.0986328-2.3149414-.7021484-.5761719-1.6191406-.8037109-2.5048828-.6264648-.8757935.1747437-1.6201782.6658325-2.1376343,1.3336792-.515564-.6645508-1.2658691-1.1560669-2.1675415-1.3361206-.8833008-.1767578-1.7939453.0498047-2.4926758.6220703-.6982422.5727539-1.0986328,1.4189453-1.0986328,2.3217773,0,.5498047.1592407,1.0587769.4182129,1.5024414h-.6682129c-.9648438,0-1.75.7851562-1.75,1.75v2c0,.6700439.3829346,1.246521.9375,1.5404663v4.9595337c0,.9648438.7851562,1.75,1.75,1.75h10.1875c.9648438,0,1.75-.7851562,1.75-1.75v-4.9934692c.5205078-.3035889.875-.8618164.875-1.5065308v-2c0-.9648438-.7851562-1.75-1.75-1.75ZM16.25,7.5v2c0,.1376953-.1123047.25-.25.25h-5.21875v-2.5h5.21875c.1376953,0,.25.1123047.25.25ZM12.4404297,2.7768555c.4433594-.090332.90625.0258789,1.2607422.315918.3486328.2861328.5488281.7070312.5488281,1.1547852,0,.8286133-.6738281,1.5024414-1.5029297,1.5024414h-1.9970703v-.921875c0-.9926758.7109375-1.8554688,1.6904297-2.0512695ZM5.75,4.2475586c0-.4516602.2001953-.8754883.5498047-1.1616211.2641602-.2167969.5883789-.3344727.9536133-.3344727.1186523,0,.2412109.0126953.3671875.0375977.9443359.1884766,1.6293945,1.0244141,1.6293945,1.9873047v.9736328h-1.9975586c-.8286133,0-1.5024414-.6738281-1.5024414-1.5024414ZM3.75,7.5c0-.1376953.1123047-.25.25-.25h5.28125v2.5h-5.28125c-.1376953,0-.25-.1123047-.25-.25v-2ZM4.6875,16v-4.75h4.59375v5h-4.34375c-.1376953,0-.25-.1123047-.25-.25ZM15.125,16.25h-4.34375v-5h4.59375v4.75c0,.1376953-.1123047.25-.25.25Z"})})})}}]);