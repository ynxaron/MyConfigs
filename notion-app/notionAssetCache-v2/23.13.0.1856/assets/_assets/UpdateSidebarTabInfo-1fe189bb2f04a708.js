"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[60895],{138196:(e,t,o)=>{o.d(t,{Z:()=>l});o(267602),o(653476);var i=()=>o(670655),r=()=>o(191586),n=()=>o(852465);function l(e){var t;const{store:o,pageViewBlockStore:l,environment:a}=e,s=n().vV(o,{recursivelyLoadAllDiscussions:!1}).sort(((e,t)=>t.getReactions().length-e.getReactions().length)),d=s.length>0,c=0===s.length,p=0===s.filter((e=>e.getComments().length>0)).length,u="PageDetailsStore"in a&&a.PageDetailsStore.getToggleState({environment:a,type:"discussion",id:o.id}),m={type:"hidden"},g=o.getAssociatedCollectionStore()??o,y="section_hide"===(0,i().vC)(null===(t=g.getFormat())||void 0===t?void 0:t.page_section_visibility);if(!(null==l?void 0:l.state.forceDiscussionOpen)&&(!o.isInsideCollection()||!c)&&(c||d&&(!1===u||void 0===u&&y)))return m;if(y)return m;const h=o.pathIsDead(),v=a.currentUser.isLoggedIn();if(c&&h)return m;const f=v&&o.canComment()&&p&&!(0,r().a_)(o)&&(!(0,r().Wt)(o)||(0,r().bm)(o));return!f&&c?m:{type:"visible",showDiscussionInput:f,unresolvedDiscussionStores:s}}},710125:(e,t,o)=>{o.d(t,{l:()=>r});o(667294);var i=o(785893);const r=(0,o(827282).IU)("import",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M13.291 14.5723C13.291 14.1484 12.9902 13.834 12.5732 13.834H8.06836C8.24609 13.8203 8.42383 13.7314 8.56055 13.5947L13.0586 9.08301C13.2158 8.91895 13.291 8.74121 13.291 8.54297C13.291 8.12598 12.9902 7.81836 12.5801 7.81836C12.3682 7.81836 12.1836 7.90039 12.0469 8.03711L10.4951 9.56836L8.69043 11.585L8.75195 10.1084V1.61133C8.75195 1.16016 8.44434 0.852539 8 0.852539C7.5625 0.852539 7.25488 1.16016 7.25488 1.61133V10.1084L7.30957 11.5781L5.50488 9.56836L3.95312 8.03711C3.82324 7.90039 3.63184 7.81836 3.42676 7.81836C3.0166 7.81836 2.70898 8.12598 2.70898 8.54297C2.70898 8.74121 2.78418 8.91895 2.94141 9.08301L7.44629 13.5947C7.58301 13.7314 7.75391 13.8203 7.93848 13.834H3.44043C3.0166 13.834 2.70898 14.1484 2.70898 14.5723C2.70898 14.9893 3.0166 15.3037 3.44043 15.3037H12.5732C12.9902 15.3037 13.291 14.9893 13.291 14.5723Z"})})},931656:(e,t,o)=>{o.r(t),o.d(t,{UpdateSidebarTabInfo:()=>K});var i=o(667294),r=()=>o(219727),n=()=>o(142735),l=()=>o(299519),a=()=>o(125659),s=()=>o(972776),d=()=>o(557161),c=(o(241792),()=>o(492788)),p=()=>o(846550),u=()=>o(582025),m=()=>o(639708),g=()=>o(696459),y=()=>o(707513),h=()=>o(799454),v=()=>o(803272),f=()=>o(244060),S=()=>o(842574),b=()=>o(520849),x=()=>o(158429),P=()=>o(551242),w=()=>o(896641),V=()=>o(521635),C=()=>o(45830),_=()=>o(133049),k=()=>o(965631),B=()=>o(494630),I=o(785893);function M(e){const{modules:t,store:o,context:l,disabled:a,shownAs:s,collectionStore:d}=e,u=i.useRef(null),m=(0,r().O7)(),P=(0,n().VK)((()=>{if(!x().l.state)return null;const e=x().V.state;return"page_property_value"===(null==e?void 0:e.type)||"page_property_name"===(null==e?void 0:e.type)?e:null}),[]),w=(0,n().VK)((()=>null==d?void 0:d.getSchema()),[d]);i.useEffect((()=>{c().default.afterNextFlush().then((()=>{u.current&&v().uO(u.current)}))}),[P]);const C=(0,n().VK)((()=>"page"===m.RouterStore.state.route.name?m.RouterStore.state.route.discussionId:void 0),[m.RouterStore]),_=(0,n().VK)((()=>V().Z.state.propertyIdDiscussionToOpenOnPanelOpen),[]);i.useEffect((()=>{_&&C&&(V().Z.update((e=>({...e,propertyIdDiscussionToOpenOnPanelOpen:void 0}))),c().default.afterNextFlush().then((()=>{(0,f().e)({discussionId:C,blockId:o.id,animate:!1})&&h().Ib({analyticsFrom:"notification",blockStore:o,environment:m,recursivelyLoadAllDiscussions:!1,shouldFocusDiscussion:!0,property_id:_,discussionIds:[C]})})))}),[m,C,_,o]);const k=(0,p().yK)((e=>{let t={};return"popup"===s?t={height:"70vh",maxHeight:"70vh",background:e.popoverBackground,borderRadius:4,boxShadow:e.mediumBoxShadow}:"sidebar"===s?t={background:e.contentBackground}:"static_sidebar"===s?t={background:e.peekModalBackground}:(0,g().t1)(s),{container:{position:"relative",minHeight:0,display:"flex",flexDirection:"column",pointerEvents:"auto",height:"100%"},propertyName:{color:e.mediumTextColor,fontSize:y().JB.UIRegular.desktop,fontWeight:y().Ue.medium,padding:"6px 6px 0 6px"},scroller:{position:"relative",display:"flex",flexDirection:"column",pointerEvents:"auto",overflow:"auto",padding:"16px 16px 16px 20px",minHeight:"100%",...t}}}),[s]),B="static_sidebar"===s?"peek":"mainPage",M=i.useMemo((()=>"peek"===B?{onMouseEnter:()=>{V().Z.setIsMouseHoveringPanel({panelLocation:B,isMouseHoveringPanel:!0})},onMouseLeave:()=>{V().Z.setIsMouseHoveringPanel({panelLocation:B,isMouseHoveringPanel:!1})}}:void 0),[B]);return(0,I.jsx)("div",{style:k.container,ref:u,...M,children:(0,I.jsx)(S().Z,{type:b().Z.Y,style:k.scroller,children:t.map((e=>(0,I.jsx)(j,{module:e,store:o,context:l,disabled:a,collectionStore:d,collectionSchema:w},e.id)))})})}function j(e){let{module:t,store:o,context:l,disabled:a,collectionStore:s,collectionSchema:d}=e;const c=(0,r().O7)(),{isMobile:p}=(0,r().Fy)(),y=(0,n().VK)((()=>!!s&&(0,C().$)({collectionStore:s,module:t,isMobile:p})),[s,p,t]),h="page_details",v=(0,w().S)({pageStore:o,pageViewBlockStore:void 0,collectionStore:s,collectionSchema:d})[h],f=(0,B().wV)({layoutModule:t,area:h,collectionSchema:d,collectionStore:s,showDetailsPanelToggleButtonBelowTitle:y,modules:v}),S=(0,n().VK)((()=>{if("properties"!==t.type)return!0;return!(0,P().D)({environment:c,layoutArea:"page_details",moduleType:t.type,pageViewBlockContext:l})}),[c,t.type,l]);return(0,u().B)(t,"page_details")?(0,m().f)(t)?(0,I.jsx)(k()._,{context:l,disabled:a,propertyId:t.propertyId,store:o,pageModule:t,wrapper:f,stackPropertyLabelAndValue:S},`${t.id}-${o.id}`):(0,m().z1)(t)?(0,I.jsx)(i.Fragment,{children:(0,I.jsx)(_().V,{context:l,disabled:a,store:o,wrapper:f,layoutModule:t,customization:{neverShowPropertiesElsewhereInLayout:!0,stackPropertyLabelAndValue:S,disableContainerPadding:!0,disableLastRowBottomPadding:S},showDefaultTitle:!0})},`${t.id}-${o.id}`):"deleted_property"===t.type?null:void(0,g().t1)(t):(console.warn("Invalid module type in sidebar:",t.type),null)}function K(e){const{modules:t,store:o,context:c,disabled:p,shownAs:u}=e,m=(0,r().O7)(),{modules:g}=(0,d().V)(o),y=t??g,h=(0,i.useMemo)((()=>new(s().Z)(m)),[m]),v=(0,n().VK)((()=>o.getAssociatedCollectionStore()),[o]),f=(0,n().VK)((()=>null==v?void 0:v.getParentStore()),[v]);if((0,i.useEffect)((()=>{v&&f&&"block"===f.table&&f.isCollectionView()&&h.setContext({type:"collectionPage",collectionViewBlockStore:f,collectionStore:v})}),[h,v,f,y]),!y||!h.collectionStore)return null;return(0,I.jsx)(l().Z,{store:o,droppable:!0,render:()=>(0,I.jsx)(a().L1,{value:h,children:(0,I.jsx)(M,{modules:y,context:c,disabled:p,store:o,shownAs:u,collectionStore:v})})},o.id)}},45830:(e,t,o)=>{o.d(t,{$:()=>r});o(267602),o(653476),o(470928),o(228244);var i=()=>o(70191);function r(e){const{collectionStore:t,module:o,isMobile:r}=e;if("normalizedTitleWithIcon"!==o.type)return!1;const n=t.getSchema(),l=!!n&&(0,i().zD)({collectionSchema:n,module:o}).length>0,a=(0,i().nJ)({collectionStore:t}).count>0;return!(!r||!a)||!l&&a}},452220:(e,t,o)=>{o.d(t,{$:()=>a});o(667294);var i=()=>o(142735),r=()=>o(846550),n=()=>o(707513),l=o(785893);function a(e){const{children:t,style:o}=e,{store:a}=e.icon?e:{},s=(0,i().VK)((()=>{var e;return"hide"!==(null==a||null===(e=a.getAssociatedCollectionStore())||void 0===e||null===(e=e.getLayoutStore())||void 0===e||null===(e=e.getFormat())||void 0===e?void 0:e.property_icons_visibility)}),[a]),d=(0,r().yK)((e=>({title:{padding:"3px 0",fontSize:13,lineHeight:"18px",color:e.text.secondary,display:"flex",flexDirection:"row",alignItems:"center",fontWeight:n().Ue.medium,gap:2,...o},icon:{width:18,height:24,fill:e.icon.secondary}})),[o]);return(0,l.jsxs)("div",{style:d.title,children:[e.icon&&s&&e.icon(d.icon),(0,l.jsx)("div",{children:t})]})}},494630:(e,t,o)=>{o.d(t,{Kq:()=>v,Wd:()=>w,Yq:()=>h,du:()=>P,wV:()=>x});o(821057),o(267602),o(470928);var i=o.n(o(294184)),r=o(667294),n=()=>o(219727),l=()=>o(142735),a=()=>o(639708),s=()=>o(696459),d=()=>o(177610),c=()=>o(311562),p=()=>o(70191),u=()=>o(761650),m=()=>o(896751),g=()=>o(857719),y=o(785893);const h=12,v=12,f=10,S=10;function b(e){let{collectionSchema:t,module:o}=e;return!(!t||"normalizedTitleWithIcon"!==o.type)&&(0,p().zD)({collectionSchema:t,module:o}).length>0}function x(e){let{layoutModule:t,area:o,context:p,collectionSchema:x,collectionStore:P,showDetailsPanelToggleButtonBelowTitle:w,modules:V}=e;const{isMobile:C}=(0,n().Fy)(),_=V.findIndex((e=>e.id===t.id)),k=null!=V&&V.length&&-1!==_?V[_+1]:void 0,B=(0,m().K)({collectionStore:P,layoutModule:k}),I=(0,d().vg)(P),M=(0,l().VK)((()=>Boolean(null==P?void 0:P.isPageTreeCollection())),[P]),[j,K]=(0,r.useMemo)((()=>{const e=b({collectionSchema:x,module:t});let i=!1;const r={};if("page_details"===o)r.marginBottom=f,r.paddingBottom=S;else if("page_main"===o)r.marginBottom=v,r.paddingBottom=h;else if("views_main_tab_modules"===o)r.marginBottom=v,r.paddingBottom=h;else{if("form_layout_schema"===o||"form_conditional_modules"===o)throw new Error("Not implemented for forms");(0,s().t1)(o)}const n="editor"===(null==k?void 0:k.type)||"views"===(null==k?void 0:k.type);n&&(i=!0,"normalizedTitleWithIcon"!==t.type||e||(i=!1,r.marginBottom=void 0,r.paddingBottom=void 0)),B&&r.marginBottom&&(r.marginBottom=Math.max(r.marginBottom-4,0)),"page_main"!==o&&"page_details"!==o||("discussions"===t.type?r.marginLeft=0:"normalizedTitleWithIcon"===t.type?r.marginLeft=-4:(0,a().f)(t)||"properties"===t.type||"relationsGroup"===t.type?r.marginLeft=-6:"editor"===t.type&&(r.marginLeft=-2));const l="views"===(null==k?void 0:k.type)||"editor"===(null==k?void 0:k.type);return"page_main"!==o&&"page_details"!==o||!r.paddingBottom||l||("property_text"===t.type||"property_relation"===t.type&&I?r.paddingBottom=Math.max(r.paddingBottom-4,0):"properties"===t.type&&(M&&!C||(r.paddingBottom=Math.max(r.paddingBottom-4,0))),"viewsMain"===(null==k?void 0:k.type)&&(r.paddingBottom=Math.max(r.paddingBottom-12,0))),"normalizedTitleWithIcon"===t.type&&(e?C&&"properties"===(null==k?void 0:k.type)&&!B&&(r.paddingBottom=void 0,r.marginBottom=4):(w?"discussions"===(null==k?void 0:k.type)&&(r.marginBottom=void 0):"properties"===(null==k?void 0:k.type)?(r.paddingBottom=void 0,r.marginBottom=8):"discussions"===(null==k?void 0:k.type)&&(r.paddingBottom=h),C&&"discussions"===(null==k?void 0:k.type)&&(r.marginBottom=void 0))),"bottomControls"===t.type&&(r.paddingBottom=void 0,r.marginBottom=void 0),"discussions"===t.type&&n&&(r.paddingBottom=void 0),"inlinePageSections"!==(null==k?void 0:k.type)&&"expandedBacklinks"!==(null==k?void 0:k.type)&&"bottomControls"!==(null==k?void 0:k.type)||(r.marginBottom=8),"editor"===t.type&&(r.marginTop=8),"views"!==t.type&&"editor"!==t.type||(r.paddingBottom=void 0,r.marginBottom=void 0),"viewsMain"===t.type&&(r.paddingBottom=void 0),p===c().S.Post&&(r.marginBottom=4,r.paddingBottom=0),[i,r]}),[x,t,o,null==k?void 0:k.type,B,M,p,I,C,w]);return(0,r.useMemo)((()=>function(e){return(0,y.jsx)(g().Pb,{className:i()({"layout-content-with-divider":j}),style:K,testId:(0,u().Z)(t),children:e})}),[t,j,K])}function P(e){let{layoutModule:t,area:o,collectionSchema:i,collectionStore:r,showDetailsPanelToggleButtonBelowTitle:a,pageMainModules:s}=e;const{isMobile:d}=(0,n().Fy)(),c=(0,l().VK)((()=>{if(!r)return!1;return!!s.find((e=>"normalizedTitleWithIcon"===e.type))&&a}),[r,s,a]);if(!r)return!1;if("properties"!==t.type&&"discussions"!==t.type&&"relationsGroup"!==t.type)return!1;if("page_main"!==o)return!0;const p=s.findIndex((e=>e.id===t.id));if(0===p||s.length<=1)return!1;const u=s[p-1];if("normalizedTitleWithIcon"!==(null==u?void 0:u.type))return!0;if("relationsGroup"===t.type&&c)return!0;if("properties"===t.type&&c&&!d)return!0;const m=b({collectionSchema:i,module:u});return("properties"!==t.type||!d||!m)&&m}function w(e){let{collectionStore:t,modulesByArea:o}=e;return!((t.getNormalizedPropertyGroups({publicPageDataFallbackEnabled:!0})||[]).length>0)&&0===(0,p().t5)({collectionStore:t,modulesByArea:o}).length}},133049:(e,t,o)=>{o.d(t,{V:()=>ne});var i=o(667294),r=()=>o(142735),n=()=>o(788860),l=()=>o(58836),a=()=>o(251932),s=(o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(241792),()=>o(219727)),d=()=>o(846550),c=()=>o(839212),p=()=>o(293836),u=()=>o(722917),m=()=>o(513670),g=()=>o(696459),y=()=>o(326966),h=()=>o(342792),v=()=>o(959137),f=()=>o(661297),S=()=>o(205228),b=()=>o(710125),x=()=>o(599631),P=()=>o(749826),w=()=>o(629513),V=()=>o(507335),C=o(785893);const _=(0,n().vU)({linkCopied:{defaultMessage:"Link copied. Share it with others who may find this useful.",id:"ai.gtmFavoriteActions.linkCopied"},share:{defaultMessage:"Share as AI favorite",id:"ai.gtmFavoriteActions.share"},add:{defaultMessage:"Add to AI favorites",id:"ai.gtmFavoriteActions.add"}});function k(e){const{blockId:t}=e,o=(0,s().O7)(),r=(0,n().YB)(),l=(0,i.useCallback)((()=>{(0,w().importGtmFavorite)({environment:o,importArgs:{name:"aiGtmFavoriteImport",blockId:t}})}),[t,o]),a=(0,i.useCallback)((async()=>{const e=`${S().default.domainBaseUrl}/ai-gtm/${(0,h().cj)(t)}`;(await v().F.clipboardActions.load()).copyString({environment:o,stringValue:e,copiedMessage:_.linkCopied})}),[t,o]);return(0,C.jsxs)("div",{style:{marginTop:12,marginBottom:12},children:[(0,C.jsx)(f().Z,{onClick:a,icon:x().N,children:r.formatMessage(_.share)}),o.currentUser.isLoggedIn()&&(0,C.jsx)(f().Z,{onClick:l,style:{marginLeft:12},icon:b().l,children:r.formatMessage(_.add)})]})}var B=()=>o(233417),I=()=>o(407544),M=()=>o(311562),j=()=>o(864266),K=()=>o(177610),L=()=>o(796386),F=()=>o(794424),A=()=>o(60613),T=()=>o(686929);const E=5;function z(e){const{collectionStore:t,schema:o,store:n,format:l,propertyIds:a,propertyGroupId:h,variant:v,customization:f,pagePropertiesStore:S,pageViewBlockContext:b}=e,[x,w]=(0,I().e)(),_=(0,r().qz)(void 0,B().Z),z=(0,s().Fy)(),R=(0,d().yK)((e=>({pageProperties:{width:"100%",fontSize:14},dragHandle:{marginLeft:-(j().C+10),marginRight:6},hidePropertiesButton:{margin:"0 0 10px"},showMoreButton:{margin:0},addPropertyButton:{margin:"4px 0 0"},moreProperties:{border:`1px solid ${"dark"===e.mode?e.accentColors.gray[300]:e.accentColors.gray[75]}`,borderRadius:4,padding:"8px 6px"},actionButtonsWithTopMargin:{marginTop:8}})),[]),G=(0,r().VK)((()=>"pinned"===v||Boolean(n.isAssociatedCollectionAPageTree())),[n,v]),D=(0,r().VK)((()=>{var e;return null===(e=t.getLayoutStore())||void 0===e?void 0:e.getModules()}),[t]);let O=(0,K().nd)({store:n,format:l,schema:o,collectionStore:t,propertyIds:a,propertyGroupId:h});const Z=(0,i.useMemo)((()=>{const e={};for(const t of O)e[t.property]=t;return e}),[O]);f&&(O=function(e,t,o,i,r){const{hideEmptyProperties:n,neverShowEmptyPropertiesIfMoreThanNProperties:l,neverShowNotionSystemProperties:a,sortNonEmptyPropertiesFirst:s,neverShowPropertiesElsewhereInLayout:d}=t;n&&(e=e.map((e=>({...e,visibility:e.hasValue?e.visibility:"hide"}))));if(d&&o){const t=(0,p().m)({modulesByArea:o,collectionSchema:i,collectionFormat:r}),n=new Set(t);e=e.filter((e=>!n.has(e.property)))}a&&(e=e.filter((e=>!((0,u().S4)(e.property)||"show"!==e.visibility&&e.property.startsWith("notion://")))));void 0!==l&&e.length>l&&(e=e.filter((e=>e.hasValue)));s&&(e=m().MR(e,(e=>!e.hasValue)));return e}(O,f,D,o,l));const W=(0,r().VK)((()=>S.state.forceShowProperties),[S]),[N,H]=(0,i.useMemo)((()=>{if((0,y().z4)(v))return m().uK(O,(e=>{var t;return!!(null===(t=o[e.property])||void 0===t?void 0:t.type)&&function(e){if("section"===e.visibility)return!1;if("hide"===e.visibility)return!1;if("hide_if_empty"===e.visibility&&!e.hasValue)return!1;return!0}(e)}));if("pinned"===v){if(!a)return[[],[]];const e=a.map((e=>{var t;const i=o[e];if(i)return{property:e,visibility:"show",hasValue:(null===(t=Z[e])||void 0===t?void 0:t.hasValue)??!1,name:i.name}})).filter(g().$K);return[e.slice(0,c().c),e.slice(c().c)]}(0,g().t1)(v)}),[O,Z,a,o,v]),$=function(e){const t=(0,r().VK)((()=>{if(!P().default.checkGate({gateName:"ai_favorites"}))return!1;const t=(0,V().OF)();return!!t&&t.spaceId===e.getSpaceId()&&t.collectionId===e.id}),[e]);return t}(t),U=N.concat(H),{paddingLeft:q,paddingRight:Y,width:J}=e,Q=Math.min(E,N.length)*F().Uv,X="pinned"===v?z.isMobile||w<A().h:w<Q;let ee;if(null!=f&&f.dontRenderIfNoPropertiesDefaultShown&&0===N.length)return null;if(null!=f&&f.renderWhenCompletelyEmpty&&0===N.length&&0===H.length)return f.renderWhenCompletelyEmpty();if(G&&!X)ee=(0,C.jsx)(F().ZP,{...e,rowLength:E,compactProperties:N,hiddenProperties:H,variant:v,pageViewBlockContext:b});else{const t={stackPropertyLabelAndValue:null==f?void 0:f.stackPropertyLabelAndValue,heightVariant:null!=f&&f.stackPropertyLabelAndValue||G&&!X?"small":"medium"},o=b===M().S.PeekView;ee=(0,C.jsxs)("div",{style:null!=f&&f.disableContainerPadding?{}:{paddingBottom:8},children:[(0,C.jsx)(L().Z,{...e,hideDragHandle:"pinned"===v,showHiddenProperties:W,mergedProperties:G?U:O,rowCustomization:t,disableLastRowBottomPadding:null==f?void 0:f.disableLastRowBottomPadding,isInPeekRenderer:o}),"pinned"===v?null:(0,C.jsx)(T().ZP,{...e,customization:t,isInPeekRenderer:o,mergedProperties:G?U:O,wrapperStyle:null!=f&&f.stackPropertyLabelAndValue?R.actionButtonsWithTopMargin:void 0})]})}return(0,C.jsx)("div",{style:R.pageProperties,onMouseEnter:()=>{_.setState({..._.state,mouseEntered:!0})},onMouseLeave:()=>{_.setState({..._.state,mouseEntered:!1})},ref:x,children:(0,C.jsxs)("div",{style:{width:J,maxWidth:"100%",padding:G||null!=f&&f.disableContainerPadding?void 0:"16px 0 8px 0",margin:"0 auto",...q?{paddingLeft:q}:{},...Y?{paddingRight:Y}:{}},children:[ee,$&&(0,C.jsx)(k,{blockId:n.id})]})})}var R=()=>o(191586),G=()=>o(480089),D=()=>o(876822),O=()=>o(279386),Z=()=>o(121700),W=()=>o(763058),N=()=>o(27475),H=()=>o(482162),$=()=>o(896751),U=()=>o(452220),q=()=>o(707513),Y=()=>o(154186),J=()=>o(536691),Q=()=>o(538230),X=()=>o(857719);function ee(e){const{store:t,context:o,disabled:n,wrapper:a,forceGroupsOpenOrClosed:s,customization:c,moduleId:p}=e,u=(0,r().VK)((()=>t.getAssociatedCollectionStore()),[t]),m=(0,r().VK)((()=>(null==u?void 0:u.getNormalizedPropertyGroups({publicPageDataFallbackEnabled:!0}))||[]),[u]),g=(0,r().VK)((()=>{if(t.isCollectionViewPageWithContent())return{type:"hidden"};const e=t.getAssociatedCollectionStore();if(!e)return{type:"hidden"};const o=(0,R().y6)(t);return o?{type:"visible",store:t,format:o,collectionStore:e}:{type:"hidden"}}),[t]),y=(0,d().yK)((e=>({container:{cursor:"default"}})),[]);if("hidden"===g.type)return null;return(a||(e=>(0,C.jsx)(X().Pb,{className:"layout-content",children:e})))((0,C.jsx)(X().Pb,{children:(0,C.jsx)(l().p,{allowSelectionWithin:!0,children:(0,C.jsxs)("div",{style:y.container,children:[m.map(((e,t)=>(0,i.createElement)(te,{...g,key:e.id,context:o,disabled:n,propertyGroup:e,forceGroupOpenOrClosed:s,customization:c,isLast:t===m.length-1,moduleId:p}))),0===m.length&&(0,C.jsx)(te,{...g,context:o,disabled:n,propertyGroup:"virtualPropertiesGroup",forceGroupOpenOrClosed:s,customization:c,isLast:!0,moduleId:p})]})})}))}function te(e){const{store:t,context:o,disabled:l,propertyGroup:a,format:s,collectionStore:c,forceGroupOpenOrClosed:p,customization:u,isLast:m,moduleId:g}=e,y=(0,r().VK)((()=>"virtualPropertiesGroup"===a?{idForRememberingCollapsedState:`${g}_defaultGroup`,groupIdForSavingPropertyToGroup:void 0,title:(0,C.jsx)(n()._H,{id:"collapsiblePropertyGroups.defaultGroupTitle",defaultMessage:"Properties"})}:{idForRememberingCollapsedState:a.id,groupIdForSavingPropertyToGroup:a.id,title:a.title}),[g,a]),h=(0,r().VK)((()=>void 0!==p?"open"===p:Q().Z.isPropertyGroupExpanded({groupId:y.idForRememberingCollapsedState})),[p,y.idForRememberingCollapsedState]),v=o===M().S.PeekView,f=(0,r().VK)((()=>t.isNonEditableState()),[t]),S=(0,r().VK)((()=>c.getSchema()),[c]),b=(0,r().VK)((()=>{var e,o;return t.id===(null===(e=D().default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.id)?W().my.getNewEditorPagePropertiesStore(y.idForRememberingCollapsedState):t.id===(null===(o=H().default.peekTargetStore.state)||void 0===o?void 0:o.id)?W().UK.getNewEditorPagePropertiesStore(y.idForRememberingCollapsedState):new(W().pB)}),[y.idForRememberingCollapsedState,t.id]),x=(0,i.useCallback)((()=>{Q().Z.togglePropertyGroupExpanded({groupId:y.idForRememberingCollapsedState})}),[y.idForRememberingCollapsedState]),P=(0,d().yK)((e=>({groupContent:{paddingLeft:0,paddingBottom:m?void 0:null!=u&&u.stackPropertyLabelAndValue?28:20},bottomButtonContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start"},propertyVisibilityButton:{borderRadius:4,height:34,paddingLeft:6,paddingRight:6,width:"auto",display:"flex",alignItems:"center",justifyContent:"center"},propertyVisibilityButtonMessage:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0,fontSize:"14px",color:e.lightTextColor}})),[null==u?void 0:u.stackPropertyLabelAndValue,m]);return(0,C.jsxs)("div",{children:[(0,C.jsx)(oe,{onClick:x,isExpanded:h,customization:u,children:y.title}),h&&(0,C.jsx)("div",{style:P.groupContent,children:(0,C.jsx)(z,{propertyGroupId:y.groupIdForSavingPropertyToGroup,pagePropertiesStore:b,schema:S,format:s,store:t,collectionStore:c,disabled:l,locked:f,blockPropertyValueOverlayStore:v?N().Z:Z().Z,pageViewBlockContext:o,width:"100%",customization:{...u,neverShowPropertiesElsewhereInLayout:!0}})})]})}function oe(e){const{children:t,isExpanded:o,customization:i,onClick:r}=e,l=(0,n().YB)(),a=(0,s().Fy)(),c=Boolean(null==i?void 0:i.stackPropertyLabelAndValue);let p;p=o&&c?a.isTablet?0:a.isMobile?2:8:0;const u=(0,d().yK)((e=>({container:{height:34,display:"flex",alignItems:"center",justifyContent:"flex-start",paddingLeft:6,paddingRight:6,gap:6,marginBottom:p,borderRadius:6},label:{fontSize:13,color:e.text.secondary,fontWeight:q().Ue.medium,...q().Yu,height:20},button:{borderRadius:"100%"},icon:{transition:"transform .2s ease",width:12,height:12,transform:o?"rotate(0deg)":"rotate(-90deg)",fill:e.icon.tertiary},iconContainer:{display:"flex",alignItems:"center",justifyContent:"center"}})),[p,o]),m=(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{style:u.label,children:t}),(0,C.jsx)("div",{style:u.iconContainer,children:(0,J().A)(u.icon)})]});return o?(0,C.jsx)(Y().Z,{onClick:r,style:u.container,children:m}):(0,C.jsx)(Y().Z,{style:u.container,onClick:r,ariaLabel:l.formatMessage(ie.showProperties),children:m})}const ie=(0,n().vU)({hideProperties:{id:"CollapsiblePropertyGroups.hideProperties",defaultMessage:"Hide properties in section"},showProperties:{id:"CollapsiblePropertyGroups.showProperties",defaultMessage:"Show properties in section"}});function re(e){const{store:t,format:o,collectionStore:i,disabled:n,blockPropertyValueOverlayStore:l,variant:a,propertyIds:s,customization:d,pagePropertiesStore:c,pageViewBlockContext:p}=e,u=(0,r().VK)((()=>i.getSchema()),[i]),m=(0,r().VK)((()=>t.isNonEditableState()),[t]);return(0,C.jsx)(z,{store:t,collectionStore:i,schema:u,format:o,disabled:n,locked:m,width:"100%",blockPropertyValueOverlayStore:l,pageViewBlockContext:p,propertyIds:s,variant:a,customization:d,pagePropertiesStore:c,layoutModule:e.layoutModule})}function ne(e){const{store:t,context:o,disabled:i,variant:s,layoutModule:d,propertyIds:c,customization:p,wrapper:u,showDefaultTitle:m}=e,g=(0,G().PE)(t,i),y=(0,r().VK)((()=>O().MT.getMode(t)),[t]),{isMainEditor:h,isPeekEditor:v}=(0,r().VK)((()=>{var e,o;const i=Boolean(H().default.isSidePeekOpen()&&t.id===(null===(e=H().default.peekTargetStore.state)||void 0===e?void 0:e.id));return{isMainEditor:Boolean(!i&&t.id===(null===(o=D().default.state.mainEditorCurrentBlockStore)||void 0===o?void 0:o.id)),isPeekEditor:i}}),[t]),f=(0,r().VK)((()=>t.getAssociatedCollectionStore()),[t]),S=(0,r().VK)((()=>{if(t.isCollectionViewPageWithContent())return{type:"hidden"};if(!f)return{type:"hidden"};const e=(0,R().y6)(t);return e?{type:"visible",store:t,format:e,collectionStore:f}:{type:"hidden"}}),[f,t]),b=(0,$().K)({collectionStore:f,layoutModule:d}),x=(0,r().VK)((()=>b&&d&&!(null!=p&&p.doNotShowPropertyGroups)),[null==p?void 0:p.doNotShowPropertyGroups,b,d]),P=(0,r().VK)((()=>h?W().my.getNewEditorPagePropertiesStore():v?W().UK.getNewEditorPagePropertiesStore():new(W().pB)),[h,v]);if("hidden"===S.type)return null;const w=o===M().S.PeekView,V=x&&d?(0,C.jsx)(ee,{...e,wrapper:void 0,moduleId:d.id}):(0,C.jsxs)(a().Ht,{gap:8,children:[m&&(0,C.jsx)(U().$,{style:{marginLeft:6},children:(0,C.jsx)(n()._H,{id:"pageLayout.propertiesModule.title",defaultMessage:"Properties"})}),(0,C.jsx)(l().p,{allowSelectionWithin:!0,children:(0,C.jsx)(re,{...S,disabled:!g||"suggest"===y,pageViewBlockContext:o,blockPropertyValueOverlayStore:w?N().Z:Z().Z,propertyIds:c,variant:s,layoutModule:d,customization:p,pagePropertiesStore:P})})]});return u((0,C.jsx)(C.Fragment,{children:V}))}},965631:(e,t,o)=>{o.d(t,{_:()=>_});var i=o(667294),r=()=>o(219727),n=()=>o(142735),l=()=>o(639708),a=()=>o(887430),s=()=>o(874018),d=()=>o(768826),c=()=>o(356321),p=()=>o(58836),u=()=>o(251932),m=()=>o(663221),g=()=>o(307369),y=()=>o(480089),h=()=>o(704713),v=()=>o(121700),f=()=>o(763058),S=()=>o(311562),b=()=>o(27475),x=()=>o(231272),P=()=>o(291848),w=()=>o(206658),V=()=>o(70191),C=o(785893);function _(e){const{store:t,context:o,propertyId:_,disabled:k,wrapper:B,pageModule:I,stackPropertyLabelAndValue:M}=e,j=(0,y().PE)(t,k),K=(0,n().VK)((()=>t.getAssociatedCollectionStore()),[t]),L=(0,n().VK)((()=>null==K?void 0:K.getParentStore()),[K]),F=(0,n().VK)((()=>{if(t.isCollectionViewPageWithContent())return{type:"hidden"};const e=t.getAssociatedCollectionStore();return e?{type:"visible",store:t,collectionStore:e,propertyId:_}:{type:"hidden"}}),[_,t]),A=(0,n().VK)((()=>null==K?void 0:K.getSchema()),[K]),T=(0,n().VK)((()=>null==K?void 0:K.getFormat()),[K]),E=(0,n().VK)((()=>{var e;return null===(e=F.collectionStore)||void 0===e?void 0:e.getSchema()[_]}),[F.collectionStore,_]),z=(0,n().VK)((()=>t.isNonEditableState()),[t]),R=(0,i.useMemo)((()=>new(f().pB)),[]),G=i.useRef(null),D=(0,n().VK)((()=>!(!K||!L||"block"!==L.table)&&(0,a().eD)({collectionStore:K,collectionViewBlockStore:L,checkNavigableAncestorLocked:!1})),[K,L]),O=o===S().S.PeekView,Z=(0,l().f)(I)?I:void 0,{isPropertyInPageDetails:W}=(0,V().d0)({store:t,propertyId:_}),{isMobile:N}=(0,r().O7)().device,H=(0,h().X)(G,50),$=(0,w().E)(t),U=(0,n().VK)((()=>{var e;return"hide"===(null==$||null===(e=$.getFormat())||void 0===e?void 0:e.property_icons_visibility)}),[$]),q=(0,P().w)();if(!E)return null;if("hidden"===F.type)return null;if(!K||!A||!T)return null;const Y=!q&&"relation"!==E.type,J=!q,Q=(0,x().gM)({isMobile:N,stackPropertyLabelAndValue:M,isPropertyInPageDetails:W}),X=(0,C.jsx)(s().zl,{store:t,propertyId:_,style:W||N?{flexShrink:0}:{position:"absolute",left:null!=H&&H.width?H.width+4:void 0,top:0}}),ee=(0,C.jsxs)(C.Fragment,{children:[Y&&(0,C.jsxs)(u().gq,{alignItems:"center",justifyContent:W?void 0:"space-between",style:Q?{width:Q,flexShrink:0}:void 0,children:[(0,C.jsx)(m().Z,{schema:A,format:T,hideIcon:U,hideDragHandle:!0,property:_,blockStore:t,collectionStore:K,pagePropertiesStore:R,disabled:k,locked:z,canConfigureCollection:D,isInPeekRenderer:O,styleVariants:{width:(0,x().Gm)({stackPropertyLabelAndValue:M}),height:M?{variant:"small"}:{variant:"medium"},size:"small",fontWeight:"medium"},layoutModule:Z,hideDuplicatePropertyOption:!0}),J?X:null]}),(0,C.jsx)(g().Z,{store:t,analyticsName:"page_property",children:(0,C.jsx)(d().m,{store:t,property:_,disabled:!j,locked:z,format:c().C.PropertyModule,tableWrap:!0,blockPropertyValueOverlayStore:O?b().Z:v().Z,collectionStore:F.collectionStore,isInPeekRenderer:O,propertyModule:Z},_)})]});return B((0,C.jsx)(p().p,{allowSelectionWithin:!0,style:{position:"relative",width:"100%"},children:M?(0,C.jsx)(u().Ht,{ref:G,children:ee}):(0,C.jsx)(u().gq,{ref:G,style:{alignItems:"flex-start"},children:ee})}))}},291848:(e,t,o)=>{o.d(t,{w:()=>n});var i=()=>o(142735),r=()=>o(26796);function n(){return(0,i().VK)((()=>r().Z.state.isOpen),[])}},761650:(e,t,o)=>{o.d(t,{Z:()=>n});var i=()=>o(639708),r=()=>o(696459);function n(e){const t=e.type;return"properties"===t?"module__properties_"+("pinned"===e.variant?"minimal":"expanded"):"normalizedTitleWithIcon"===t||"titleWithIcon"===t?"module__title_with_icon":"cover"===t?"cover__module":"views"===t?"module__views":"editor"===t?"module__editor":"formTitle"===t?"module__formTitle":"viewsMain"===t?"module__views_main":"transcript"===t?"module__transcript":"formSubmit"===t?"module__form_submit":"discussions"===t?"module__discussion":"placeholder"===t?"module__placeholder":"formQuestion"===t?"module__formQuestion":"bottomControls"===t?"module__bottomControls":"relationsGroup"===t?"module__relationsGroup":"deleted_property"===t?"module__deleted_property":"expandedBacklinks"===t?"module__expandedBacklinks":"inlinePageSections"===t?"module__inlinePageSections":"property"===t?`module__property_${e.id}`:"collectionView"===t?"module__collectionView":"collectionViewV2"===t?"module__collectionViewV2":(0,i().Vd)(t)?`module__property_${e.id}`:void(0,r().t1)(t)}},557161:(e,t,o)=>{o.d(t,{V:()=>r});var i=()=>o(142735);function r(e){return{modules:(0,i().VK)((()=>{if(!e)return;const t=e.getAssociatedCollectionStore(),o=null==t?void 0:t.getLayoutStore();return null==o?void 0:o.getModules().page_details}),[e])}}},896641:(e,t,o)=>{o.d(t,{L:()=>u,S:()=>p});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(470928),o(228244);var i=o(667294),r=()=>o(219727),n=()=>o(142735),l=()=>o(667932),a=()=>o(639708),s=()=>o(887430),d=()=>o(138196),c=()=>o(494630);function p(e){const{pageStore:t,pageViewBlockStore:o,isPostContext:l,collectionStore:p,collectionSchema:m}=e,{collectionStore:g,collectionFormat:y,collectionSchema:h,canConfigureCollection:v}=(0,n().VK)((()=>{const e=p||(null==t?void 0:t.getAssociatedCollectionStore()),o=m||(null==e?void 0:e.getSchema()),i=null==e?void 0:e.getFormat(),r=e&&s().eD({collectionStore:e,collectionViewBlockStore:e.getParentBlockStore(),checkNavigableAncestorLocked:!1});return{collectionStore:e,collectionSchema:o,collectionFormat:i,canConfigureCollection:r}}),[t,p,m]),f=(0,r().O7)(),S=(0,n().VK)((()=>(0,d().Z)({environment:f,store:t,pageViewBlockStore:o})),[f,t,o]),b=u({collectionFormat:y,collectionSchema:h,layoutStore:(0,n().VK)((()=>null==g?void 0:g.getLayoutStore()),[g]),isPostContext:l,pageStoreId:null==t?void 0:t.id}),x=(0,n().VK)((()=>{const e=b.page_main.some((e=>(0,a().z1)(e)))||b.page_details.some((e=>(0,a().z1)(e)));return!(!g||!e)&&(0,c().Wd)({modulesByArea:b,collectionStore:g})}),[b,g]),P=(0,i.useMemo)((()=>{const e=new Set;return(!Boolean(g)||!v&&x)&&e.add("properties"),"hidden"===(null==S?void 0:S.type)&&e.add("discussions"),e}),[v,g,null==S?void 0:S.type,x]);return(0,i.useMemo)((()=>0===P.size?b:{...b,page_main:b.page_main.filter((e=>!P.has(e.type))),page_details:b.page_details.filter((e=>!P.has(e.type)))}),[b,P])}function u(e){const{layoutStore:t,collectionSchema:o,collectionFormat:r,isPostContext:a,pageStoreId:s}=e,d=(0,i.useRef)(s),c=(0,i.useRef)(null);return(0,n().VK)((()=>{var e;if(a)return l().KD;let i=null==t?void 0:t.getModules();const n=s&&i&&s===d.current&&0===i.page_main.length&&(null===(e=c.current)||void 0===e?void 0:e.page_main.find((e=>"editor"===e.type)));return i&&!n||(i=(0,l().x9)({collectionSchema:o,collectionFormat:r})),d.current=s,c.current=i,i}),[a,t,s,o,r])}},839212:(e,t,o)=>{o.d(t,{c:()=>i});const i=4}}]);