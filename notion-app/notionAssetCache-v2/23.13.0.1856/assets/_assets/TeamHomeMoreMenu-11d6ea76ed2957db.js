"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[47296],{448045:(e,t,o)=>{o.d(t,{$:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("minus",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M3.037 8.844h9.92a.705.705 0 00.368-.103.825.825 0 00.28-.28.73.73 0 000-.773.752.752 0 00-.28-.28.705.705 0 00-.369-.102H3.037a.705.705 0 00-.369.102.824.824 0 00-.28.28.73.73 0 000 .772.914.914 0 00.28.281.705.705 0 00.37.103z"})})},284871:(e,t,o)=>{o.r(t),o.d(t,{default:()=>C});o(667294);var n=()=>o(219727),i=()=>o(142735),l=()=>o(846550),r=()=>o(506347),s=()=>o(788860),a=()=>o(824462),c=()=>o(959137),d=()=>o(308186),u=()=>o(47443),m=()=>o(827973),p=()=>o(198829),g=()=>o(255577),h=()=>o(388284),S=()=>o(67961),y=()=>o(205228),w=()=>o(352230),b=()=>o(676232),f=()=>o(325107),v=()=>o(76225),M=()=>o(876822),k=()=>o(826955),x=()=>o(178025),V=()=>o(448045),I=()=>o(361664),j=()=>o(171904),T=()=>o(801037),H=o(785893);function K(e){let{props:t,collectionViewBlockStore:o,teamStore:r}=e;const a=(0,n().O7)(),c=(0,j().b)({teamStore:r,collectionViewBlockStore:o}),d=(0,i().VK)((()=>null==o?void 0:o.getModel()),[o]),u=(0,i().VK)((()=>M().default.state.currentUserStore),[]),p=(0,v().aE)(),g=(0,l().yK)((()=>({icon:{width:16,height:16,marginLeft:2,marginRight:2}})),[]);return void 0===c?null:(0,H.jsx)(m().Z,{...t,style:{...p.buttonMenuItem},pressedStyle:p.buttonMenuItemPressed,titleStyle:p.title,icon:c?(0,V().$)(g.icon):(0,I().H)(g.icon),onClick:()=>(0,T().N)(a,o,u,d,c),title:c?(0,H.jsx)(s()._H,{defaultMessage:"Unfollow",id:"teamHome.toggleFollowSettings.mobile.unfollow"}):(0,H.jsx)(s()._H,{defaultMessage:"Follow",id:"teamHome.toggleFollowSettings.mobile.follow"})})}function C(e){let{mainMenuParent:t,teamStore:o}=e;const{isPhone:V}=(0,n().Fy)(),I=(0,n().O7)(),j=(0,v().aE)(),T=(0,l().yK)((()=>({icon:{width:16,height:16,marginLeft:2,marginRight:2}})),[]),C=(0,i().VK)((()=>M().default.state.currentSpaceStore),[]),B=(0,i().VK)((()=>null==o?void 0:o.getChannelStore()),[o]),P=(0,i().VK)((()=>{if(!C||!B)return;const e=k().t1.createChildStore(C,{table:"block",id:B.id,spaceId:C.id});return e.isCollectionView()?e:void 0}),[C,B]),{isTeamMember:U}=(0,x().K)({teamStore:o}),F=[{key:"all",render:e=>(0,H.jsx)(h().Z,{...e,topBorder:!1,style:j.sectionMenuItem}),items:[...V?[{key:"toggleFollowSettings",render:e=>(0,H.jsx)(K,{props:e,collectionViewBlockStore:P,teamStore:o}),action:()=>{}}]:[],{key:"copyLink",render:e=>{const n=!U;return(0,H.jsx)(m().Z,{...e,style:{...j.buttonMenuItem,...n&&j.transparentButtonMenuItemBorder},pressedStyle:j.buttonMenuItemPressed,icon:(0,f().U)(T.icon),onClick:async()=>{const e=`${y().default.domainBaseUrl}/team/${o.id}`,n=await c().F.clipboardActions.load(),i=n.clipboardMessages.copiedTeamHomeLinkToClipboard;n.copyString({environment:I,stringValue:e,copiedMessage:i}),t.close()},titleStyle:j.title,title:(0,H.jsx)(s()._H,{defaultMessage:"Copy link",id:"teamHome.copyLinkTooltip.title"})})},action:()=>{}},...U?[{key:"showAll",render:e=>(0,H.jsx)(m().Z,{...e,style:{...j.buttonMenuItem,...j.transparentButtonMenuItemBorder},pressedStyle:j.buttonMenuItemPressed,titleStyle:j.title,icon:(0,b().t)(T.icon),onClick:async e=>{if(!C||!B)return;const t=await a().callApi({eventName:"convertPostsToCollectionSetup",environment:I,data:{spaceId:C.id,channelId:B.id}});"failed"!==t.type?P&&u()._c({environment:I,store:P,pageVisitSource:r().tY.TeamHomePage}):d().x2(t)},title:(0,H.jsx)(s()._H,{defaultMessage:"Show all",id:"teamHome.showAll.title"})}),action:()=>{}}]:[]]}];return(0,H.jsx)(p().Z,{menuType:w().o.Popup,height:V?"50vh":void 0,minWidth:250,maxWidth:V?"100vw":void 0,scrollerStyle:j.menuScroller,header:V&&(0,H.jsx)(S().Z,{style:j.header,children:"Actions"}),children:(0,H.jsx)(g().Z,{type:g().i.Vertical,sections:F,initialFocus:void 0})})}},178025:(e,t,o)=>{o.d(t,{K:()=>r});var n=()=>o(219727),i=()=>o(142735),l=()=>o(619779);function r(e){const{teamStore:t}=e,o=(0,n().O7)(),r=(0,i().VK)((()=>l().Z.state.spacePermissionGroupIds),[]),s=(0,i().VK)((()=>{if(t&&o.currentUser.id)return t.getTeamRoleForUser(o.currentUser.id,r)}),[t,o.currentUser.id,r]),a=(0,i().VK)((()=>!!t&&"open"===t.getTeamAccessLevel()),[t]),c="none"===s||!s,d=!c;return{isTeamMember:d,canViewPosts:d||a,canJoinTeam:c&&a}}}}]);