"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[57757,92228,95986],{446955:(e,t,o)=>{o.d(t,{Z:()=>i});o(667294);var n=o(785893);const i=function(e){const{icon:t,iconStyle:i,title:r,caption:l,right:c,rightStyle:a,isRed:s,isGray:d,isOrange:u,isPadded:p,onClick:m,onMouseDown:y,onMouseEnter:g,onMouseLeave:h,disabled:f,showChevron:v,chevronStyle:S,rotateChevron:_,showDragHandle:w,focused:x,textWrapperStyle:C,shouldWrapCaption:b,desktopIconStyle:I,buttonStyle:k}=e,T=(0,o(219727).O7)(),{isMobile:M}=T.device,R=(0,o(846550).yK)((e=>({style:{color:d?e.mediumTextColor:u?"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400]:e.regularTextColor,fill:d?e.mediumIconColor:u?"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400]:e.regularIconColor,opacity:f?.4:void 0,...k},leftIconStyle:{width:24,height:p?24:M?18:16,marginRight:-2,...t===o(314379).o&&{height:3},...i},rightStyle:{display:"flex",alignItems:"center",color:f?e.regularTextColor:e.lightTextColor,fill:f?e.regularIconColor:e.lightIconColor,flexShrink:0,...a},rightIconStyle:{width:12,fill:e.lightIconColor,marginLeft:6,transition:"transform 200ms ease-in-out",...S},rightIconRotatedStyle:{transform:"rotate(90deg)"}})),[d,u,f,i,p,M,t,S,a,k]),[j]=(0,o(288141).o$)();return(0,n.jsx)(o(827973).Z,{ref:j,icon:null==t?void 0:t(R.leftIconStyle),focused:x||!1,disabled:f,title:r,caption:l,shouldWrapCaption:b,desktopTitleStyle:{flexGrow:1,flexShrink:1},showDragHandle:w,buttonStyle:R.style,rightStyle:R.rightStyle,isRedOnHover:s,ignoreLocalHoverState:!!f||void 0,right:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{style:{...o(707513).Yu,display:"flex"},children:c}),!f&&v&&(0,o(696347).o)({...R.rightIconStyle,..._&&R.rightIconRotatedStyle})]}),onClick:m,onMouseDown:y,onMouseEnter:g,onMouseLeave:h,textWrapperStyle:C,desktopIconStyle:I})}},821159:(e,t,o)=>{o.d(t,{Y:()=>d,s:()=>s});o(667294);var n=()=>o(219727),i=()=>o(846550),r=()=>o(707513),l=()=>o(827973),c=()=>o(641506),a=o(785893);function s(e){let{environment:t}=e;return{padding:t.device.isMobile?"12px 2px":"6px 4px",alignItems:"center"}}function d(e){let{buttonMenuItemProps:t,title:o,caption:d,icon:u,onClick:p,right:m,isDisabled:y}=e;const g=(0,n().O7)(),h=(0,i().yK)((e=>({menuItem:{display:"flex",...s({environment:g}),opacity:y?.4:void 0},title:{fontSize:g.device.isMobile?16:14,...r().Yu},caption:{fontSize:(0,c().yv)(g,"UISmall"),overflow:"hidden",color:e.mediumTextColor,whiteSpace:"nowrap",textOverflow:"ellipsis"}})),[g,y]),f={};return p&&(f.onClick=p),(0,a.jsx)(l().Z,{...t,style:h.menuItem,disabled:y,title:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{style:h.title,children:o}),d&&(0,a.jsx)("div",{style:h.caption,children:d})]}),icon:u,right:m,...f})}},900596:(e,t,o)=>{o.d(t,{Z:()=>r});o(667294);var n=()=>o(788860),i=o(785893);const r=function(e){let{collectionViewName:t,collectionViewType:r}=e;return t?(0,i.jsx)(o(827618).Z,{children:t}):"page"===r?(0,i.jsx)(n()._H,{id:"database.collectionView.untitledName.untitled",defaultMessage:"Untitled"}):(0,i.jsx)(n()._H,{...o(887430).b1[r]})}},246471:(e,t,o)=>{o.d(t,{F:()=>d,a:()=>s});o(667294);var n=()=>o(846550),i=()=>o(568017),r=()=>o(707513),l=()=>o(827618),c=()=>o(78014),a=o(785893);function s(e){const{value:t,color:o,format:s,showEllipsis:d,onClickRemove:u,showRemoveButton:p,isSingle:m,shouldShrink:y,hideTooltip:g,description:h,tooltipPlacement:f,...v}=e,S=(0,n().Fg)(),_=(0,n().yK)((e=>({token:{...d&&r().Yu}})),[d]),{textColor:w,backgroundColor:x}=(0,i().KR)(S,o);return t?(0,a.jsx)(c().Z,{format:s,value:(0,a.jsx)(l().Z,{children:t}),description:h,onClickRemove:u,showRemoveButton:p,isSingle:m,color:w,backgroundColor:x,shouldShrink:y,tooltipPlacement:f,showTooltip:g?"never":"overflow",style:_.token,...v}):null}function d(e){const{value:t,color:o,format:s,showEllipsis:d,onClickRemove:u,showRemoveButton:p,isSingle:m,shouldShrink:y,groupColor:g,tooltipPlacement:h,description:f,hideTooltip:v,...S}=e,_=(0,n().Fg)(),w=(0,n().yK)((()=>({token:{...d&&r().Yu}})),[d]);if(!t)return null;const{textColor:x,backgroundColor:C}=(0,i().KR)(_,o??g??"gray");let b;return b=o||(g||"gray"),(0,a.jsx)(c().Z,{format:s,value:(0,a.jsx)(l().Z,{children:t}),description:f,onClickRemove:u,showRemoveButton:p,isSingle:m,color:x,backgroundColor:C,shouldShrink:y,showTooltip:v?"never":"overflow",style:w.token,isRound:!0,showColoredDot:b,tooltipPlacement:h,...S})}},850790:(e,t,o)=>{o.d(t,{K:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("boltFilled",{svg:(0,n.jsx)("path",{d:"M0 12.117c0 .38.293.664.703.664h5.518l-2.91 7.91c-.381 1.006.664 1.543 1.318.723l8.877-11.094c.166-.205.254-.4.254-.625 0-.371-.293-.664-.703-.664H7.539l2.91-7.91C10.83.115 9.785-.422 9.131.408L.254 11.492c-.166.215-.254.41-.254.625z"}),viewBox:"0 0 14 22"})},257185:(e,t,o)=>{o.d(t,{y:()=>n().y});var n=()=>o(949489)},953293:(e,t,o)=>{o.d(t,{R:()=>n().R});var n=()=>o(519454)},419273:(e,t,o)=>{o.d(t,{f:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("plusThick",{viewBox:"0 0 14 14",svg:(0,n.jsx)("path",{d:"M2 7.16357C2 7.59692 2.36011 7.95093 2.78735 7.95093H6.37622V11.5398C6.37622 11.9731 6.73022 12.3271 7.16357 12.3271C7.59692 12.3271 7.95093 11.9731 7.95093 11.5398V7.95093H11.5398C11.9731 7.95093 12.3271 7.59692 12.3271 7.16357C12.3271 6.73022 11.9731 6.37622 11.5398 6.37622H7.95093V2.78735C7.95093 2.36011 7.59692 2 7.16357 2C6.73022 2 6.37622 2.36011 6.37622 2.78735V6.37622H2.78735C2.36011 6.37622 2 6.73022 2 7.16357Z"})})},80159:(e,t,o)=>{o.d(t,{w:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("templates",{viewBox:"0 0 20 20",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M6.39733 5.67853C5.89764 5.50234 5.36002 5.40649 4.8 5.40649C2.14904 5.40649 0 7.55432 0 10.2038C0 12.8533 2.14904 15.0011 4.8 15.0011C6.52165 15.0011 8.0316 14.0952 8.87867 12.7343L5.26487 12.0975L6.39733 5.67853Z"}),(0,n.jsx)("path",{d:"M17.3126 3.66609L7.85843 2L6.19141 11.4489L10.6545 12.2354L14.3998 5.81854L16.3449 9.15116L17.3126 3.66609Z"}),(0,n.jsx)("path",{d:"M8.80078 17L14.4008 7.4054L20.0008 17H8.80078Z"})]})})},535645:(e,t,o)=>{o.d(t,{N:()=>k,r:()=>T});o(821057),o(241792),o(667294);var n=()=>o(219727),i=()=>o(142735),r=()=>o(846550),l=()=>o(353329),c=()=>o(226413),a=()=>o(696459),s=()=>o(139224),d=()=>o(269299),u=()=>o(821159),p=()=>o(887430),m=()=>o(594546),y=()=>o(527278),g=()=>o(833186),h=()=>o(298032),f=()=>o(697360),v=()=>o(281236),S=()=>o(382474),_=()=>o(822909),w=()=>o(741119),x=()=>o(792329),C=()=>o(563452),b=()=>o(499819),I=o(785893);function k(e){let{environment:t,template:o,isInSuggestedSection:n,collectionContextStore:i}=e;return{key:o.templateId,action:()=>{if(n)T({environment:t,template:o,collectionContextStore:i,suggestedFeatureAnalytics:void 0});else{const{collectionStore:e,collectionViewStore:n,collectionSettingsStore:r}=(0,_().B)(i);(0,f().zY)({template:o,environment:t,collectionStore:e,collectionViewStore:n,collectionSettingsStore:r,collectionContextStore:i})}},render:e=>(0,I.jsx)(M,{buttonMenuItemProps:e,template:o,isInSuggestedSection:n})}}function T(e){let{environment:t,collectionContextStore:o,template:n,suggestedFeatureAnalytics:i}=e;const r=o.collectionStore();if(!r)throw new Error("collectionStore not found");const c=r.getWorkflowTemplateId();i&&(0,m().j)({environment:t,event:{eventName:"suggested_feature_template_clicked",eventProperties:{origin:i.origin,selected_index:i.selectedIndex,template_ids_shown:i.shownTemplateIds,template_id_clicked:n.templateId,collection_template_id:c}}});const a=o.settingsStore;if((0,x().isWorkflowTemplateWithConfirmStep)(n))s().H4({collectionSettingsStore:a,item:{type:"confirmAddTemplate",template:n}});else if((0,l().yw)(n)){const{relatedCollectionTemplateId:e}=n;!function(e){var t;let{environment:o,template:n,collectionStore:i,relatedCollectionTemplateId:r}=e;const l=null===(t=i.getParentBlockStore())||void 0===t?void 0:t.getParentStore();if(!l)throw new Error(`parentStore not found for ${i.id}`);if(!(0,v().isCollectionTemplateParentStore)(l))throw new Error(`Incorrect parent store: ${l.table} ${l.id}`);const c=v().globalWorkflowTemplates.fromIdOfType({templateId:r,type:"collection"});(0,g().openSelectedTemplateOnboardingModalForInAppFlows)({environment:o,template:c,origin:"suggested_feature_template",parentStore:l,navigateToOnFinish:"skip",relationInfos:[{type:"source",collectionStore:i,relationPropertyTemplate:n}],aiPrompt:void 0})}({environment:t,template:n,collectionStore:r,relatedCollectionTemplateId:e})}else d().createAndCommit({userAction:"FeatureTemplateMenuItem.addFeatureTemplateToTarget",environment:t,canUndo:!0,perform:e=>{h().rU({environment:t,transaction:e,collectionStore:r,template:n,logger:new(v().WorkflowTemplateLogger),origin:"suggested_feature"}),i&&(0,m().j)({environment:t,event:{eventName:"suggested_feature_template_added",eventProperties:{origin:i.origin,template_id_added:n.templateId,collection_template_id:c}}});const l=o.collectionViewStore();l&&f().zY({template:n,environment:t,collectionStore:r,collectionViewStore:l,collectionSettingsStore:a,collectionContextStore:o})}})}function M(e){let{buttonMenuItemProps:t,template:o,isInSuggestedSection:l}=e;const s=(0,r().yK)((e=>({iconContainer:{height:28,width:28,display:"flex",alignItems:"center",justifyContent:"center"},icon:{fill:e.regularIconColor}})),[]),{collectionStore:d}=(0,_().M)(),m=(0,n().O7)(),g=(0,i().VK)((()=>(0,S().w2)({environment:m,collectionStore:d,templateId:o.templateId})),[m,d,o.templateId]),h=(0,i().VK)((()=>function(e){let{template:t,collectionStore:o}=e;const{type:n}=t;switch(n){case"property":const{value:e}=t;if((0,c().t)(e)){const n=function(e){let{templateId:t,propertyTemplateSchema:o,collectionStore:n}=e;const i=(0,S().ZQ)({collectionStore:n,templateId:t,instancePointerType:"property"});if(!i)return o.options??[];const r=n.getSchema()[i.id];if(!r||!(0,c().t)(r))return[];return r.options??[]}({templateId:t.templateId,propertyTemplateSchema:e,collectionStore:o}).map((e=>e.value));return(0,v().getWorkflowTemplateItemsCaption)(n)}return;case"collection_view":return`${y().Z.formatMessage(p().b1[t.value.type])} view`;case"compound":return;default:(0,a().t1)(n)}}({template:o,collectionStore:d})),[o,d]),f=(0,v().getWorkflowTemplateName)(o);return l?(0,I.jsx)(u().Y,{buttonMenuItemProps:t,title:f,icon:(0,I.jsx)(b().$,{template:o}),right:(0,I.jsx)(C().a,{isAdded:g})}):(0,I.jsx)(u().Y,{buttonMenuItemProps:t,title:f,caption:h,icon:(0,I.jsx)("div",{style:s.iconContainer,children:(0,I.jsx)(b().l,{template:o,iconStyle:s.icon})}),right:(0,I.jsx)(w().K,{})})}},299728:(e,t,o)=>{o.d(t,{z:()=>y});o(667294);var n=()=>o(846550),i=()=>o(714230),r=()=>o(445520),l=()=>o(788860),c=()=>o(696459),a=()=>o(139224),s=()=>o(821159),d=()=>o(233646),u=()=>o(741119),p=()=>o(563452),m=o(785893);function y(e){let{legacyUnpackagedFeatureTemplate:t,collectionContextStore:o}=e;return{key:t.type,action:()=>{const e=o.settingsStore;switch(t.type){case"subitems":a().H4({collectionSettingsStore:e,item:{type:"subitemV2",from:"customize_menu"}});break;case"dependencies":a().H4({collectionSettingsStore:e,item:{type:"dependencies",from:"customize_menu"}});break;default:(0,c().t1)(t.type)}},render:e=>(0,m.jsx)(h,{legacyFeature:t,buttonMenuItemProps:e})}}function g(e,t,o){const n=t=>{const o={items:"items"};return{title:(0,m.jsx)(l()._H,{...(0,d().Gt)({feature:t,databaseType:void 0}),values:o}),caption:e.formatMessage((0,d().qi)({feature:t,databaseType:void 0}),o)}},a=t.accentColors.brown,s=e=>(0,m.jsx)("div",{style:{height:28,width:28,borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",background:o.isInstalled?void 0:a[30]},children:(0,m.jsx)(r().Z,{icon:e,theme:t,size:16,style:{fill:o.isInstalled?t.regularIconColor:a[400]}})});switch(o.type){case"subitems":return{...n("subitem"),icon:s(i().Z.images.appPackages.featureSubtasksSvg)};case"dependencies":return{...n("timeline_arrows_by"),icon:s(i().Z.images.appPackages.featureDependenciesSvg)};default:(0,c().t1)(o.type)}}function h(e){const{legacyFeature:t,buttonMenuItemProps:o}=e,i=(0,l().YB)(),r=(0,n().Fg)();return(0,m.jsx)(s().Y,{buttonMenuItemProps:o,...g(i,r,t),right:t.isInstalled?(0,m.jsx)(u().K,{}):(0,m.jsx)(p().a,{isAdded:!1})})}},741119:(e,t,o)=>{o.d(t,{K:()=>l});o(667294);var n=()=>o(846550),i=()=>o(696347),r=o(785893);function l(){const e=(0,n().yK)((e=>({icon:{width:12,fill:e.lightIconColor,marginLeft:6,transition:"transform 200ms ease-in-out"}})),[]);return(0,r.jsx)(r.Fragment,{children:(0,i().o)(e.icon)})}},581204:(e,t,o)=>{o.r(t),o.d(t,{WorkflowSettingsViews:()=>T});o(821057),o(267602),o(653476),o(241792),o(667294);var n=()=>o(219727),i=()=>o(142735),r=()=>o(846550),l=()=>o(788860),c=()=>o(696459),a=()=>o(250303),s=()=>o(139224),d=()=>o(269299),u=()=>o(205951),p=()=>o(821159),m=()=>o(932753),y=()=>o(716025),g=()=>o(900596),h=()=>o(828458),f=()=>o(255577),v=()=>o(388284),S=()=>o(521777),_=()=>o(697360),w=()=>o(281236),x=()=>o(282224),C=()=>o(822909),b=()=>o(741119),I=()=>o(563452),k=o(785893);function T(e){let{collectionSettingsStore:t,collectionContextStore:o}=e;const n=(0,l().YB)(),i=[M(),j(o)].filter(c().lm);return(0,k.jsx)(u().ZP,{collectionSettingsStore:t,title:n.formatMessage({id:"workflowSettingsViews.title",defaultMessage:"Views"}),children:(0,k.jsx)(f().Z,{disableInitialScroll:!0,type:f().i.Vertical,initialFocus:void 0,resetFocusOnMouseOut:!0,sections:i})})}function M(){const{collectionContextStore:e}=(0,C().M)(),t=(0,i().VK)((()=>{var t;return(null===(t=e.collectionViewBlockStore())||void 0===t?void 0:t.getCollectionViewStores())||[]}),[e]).map((t=>({key:t.id,action:()=>{},render:o=>(0,k.jsx)(R,{buttonMenuItemProps:o,collectionViewStore:t,collectionContextStore:e})})));return{key:"added_views",render:e=>(0,k.jsx)(v().Z,{...e,title:`${t.length} views`}),items:t}}function R(e){let{buttonMenuItemProps:t,collectionViewStore:o,collectionContextStore:r}=e;const l=(0,n().O7)(),{viewName:c,viewType:a,viewIcon:s}=(0,i().VK)((()=>({viewName:o.getName(),viewType:o.getType(),viewIcon:o.getFormat().collection_view_icon})),[o]);if(!a)throw new Error("View type not found for ${collectionViewStore.id}");return(0,k.jsx)(p().Y,{buttonMenuItemProps:t,title:(0,k.jsx)(g().Z,{collectionViewType:a,collectionViewName:c}),icon:(0,k.jsx)(y().F,{color:"regular",viewType:a,viewIcon:s}),right:(0,k.jsx)(b().K,{}),onClick:()=>{(0,_().kj)({environment:l,collectionContextStore:r,collectionViewId:o.id})}})}function j(e){const t=(0,l().YB)(),o=(0,n().O7)(),c=(0,i().VK)((()=>{const t=e.collectionStore();if(t)return(0,w().getSuggestedTemplates)(o,t).filter((e=>"collection_view"===e.type))}),[e,o]),u=function(){const{collectionContextStore:e}=(0,C().M)(),t=(0,n().O7)(),o=(0,r().yK)((e=>({iconWithBackground:{backgroundColor:e.surface.wash},icon:{width:16,fill:e.regularIconColor}})),[]);return{key:"add_new_view",action:()=>{},render:n=>(0,k.jsx)(p().Y,{buttonMenuItemProps:n,title:(0,k.jsx)(l()._H,{id:"workflowTemplates.settings.views.addNewView.title",defaultMessage:"Empty view"}),icon:(0,k.jsx)(h().I,{backgroundColor:o.iconWithBackground.backgroundColor,icon:(0,S().R)(o.icon)}),right:(0,k.jsx)(I().a,{isAdded:!1}),onClick:()=>{const o="table";d().createAndCommit({userAction:"CollectionViewTabBar.createGenericViewType",environment:t,canUndo:!0,perform:n=>{m().ME({environment:t,collectionContextStore:e,newViewType:o,transaction:n,skipOpenSettings:!0})}}),s().H4({collectionSettingsStore:e.settingsStore,item:{type:"createView"}}),a().xb({environment:t,collectionContextStore:e,view_type:o})}})}}();return(0,x().n)({title:t.formatMessage({id:"workflowTemplates.settings.views.suggestedViews.title",defaultMessage:"New view"}),templates:c??[],isSuggestedSection:!0,legacyUnpackagedFeatureTemplates:[],additionalItems:[u]})}},563452:(e,t,o)=>{o.d(t,{a:()=>c});o(667294);var n=()=>o(846550),i=()=>o(15409),r=()=>o(419273),l=o(785893);function c(e){let{isAdded:t}=e;const o=(0,n().yK)((e=>({circle:{height:24,width:24,borderRadius:50,display:"flex",alignItems:"center",justifyContent:"center",background:t?"dark"===e.mode?e.accentColors.blue[100]:e.accentColors.blue[50]:e.lightGrayButtonBackground},plusIcon:{height:15,width:15,fill:e.mediumIconColor},checkIcon:{height:12,width:12,fill:e.blueColor}})),[t]);return(0,l.jsx)("div",{style:o.circle,children:t?(0,i().e)(o.checkIcon):(0,r().f)(o.plusIcon)})}},877727:(e,t,o)=>{o.d(t,{C3:()=>c,D:()=>a,QZ:()=>l,fo:()=>r});var n=()=>o(146947),i=()=>o(749826);function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i().default.checkGate({gateName:"packaging_m2_additional_entrypoints"})&&l(e,t)}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!e.device.isPhone&&c(t)}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i().default.checkGate({gateName:"workflow_templates_prototype",...e})||"control"!==a(e)}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n().locale.startsWith("en-")||i().default.checkGate({gateName:"packaging_m2_localize_templates"})?i().default.getEligibleGroup({experimentId:"packaging_m2_entry_point",defaultGroup:"control",...e}):"control"}},282224:(e,t,o)=>{o.d(t,{n:()=>h});o(241792);var n=o(667294),i=()=>o(219727),r=()=>o(142735),l=()=>o(846550),c=()=>o(788860),a=()=>o(821159),s=()=>o(388284),d=()=>o(125659),u=()=>o(314379),p=()=>o(535645),m=()=>o(299728),y=o(785893);const g=3;function h(e){let{title:t,templates:o,legacyUnpackagedFeatureTemplates:h,isSuggestedSection:f,additionalItems:v=[]}=e;const S=(0,l().yK)((e=>({title:{color:e.mediumTextColor},iconContainer:{height:28,width:28,display:"flex",alignItems:"center",justifyContent:"center"},icon:{width:18,height:18,fill:e.mediumTextColor}})),[]),_=(0,d().Y$)(),w=(0,i().O7)(),[x,C]=(0,n.useState)(!1),b=[...(0,r().VK)((()=>o.map((e=>(0,p().N)({template:e,isInSuggestedSection:f,collectionContextStore:_,environment:w})))),[_,w,f,o]),...h.map((e=>(0,m().z)({legacyUnpackagedFeatureTemplate:e,collectionContextStore:_}))),...v];if(0===b.length)return;const I={key:`${t}-toggle-truncation`,action:()=>{C(!x)},render:e=>(0,y.jsx)(a().Y,{buttonMenuItemProps:e,title:(0,y.jsx)("div",{style:S.title,children:x?(0,y.jsx)(c()._H,{id:"useFeatureTemplatesSection.showLess",defaultMessage:"Show less"}):(0,y.jsx)(c()._H,{id:"useFeatureTemplatesSection.showMore",defaultMessage:"More"})}),icon:(0,y.jsx)("div",{style:S.iconContainer,children:(0,u().o)(S.icon)})})},k=x?b:b.slice(0,g);return{key:t,render:e=>(0,y.jsx)(s().Z,{...e,title:t}),items:[...k,...b.length>g?[I]:[]]}}},822909:(e,t,o)=>{o.d(t,{B:()=>c,M:()=>l});var n=()=>o(142735),i=()=>o(349220),r=()=>o(125659);function l(){const e=(0,r().Y$)(),{collectionStore:t,collectionViewStore:o,collectionSettingsStore:i}=(0,n().VK)((()=>c(e)),[e]);return{collectionStore:t,collectionViewStore:o,collectionSettingsStore:i,collectionContextStore:e}}function c(e){return{collectionStore:(0,i().TO)(e.collectionStore(),"collectionStore not found"),collectionViewStore:(0,i().TO)(e.collectionViewStore(),"collectionViewStore not found"),collectionSettingsStore:e.settingsStore}}},999582:(e,t,o)=>{o.d(t,{Z:()=>r});class n extends(()=>o(263184))().default{getInitialState(){return{}}}const i=new n;o(947115).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",i);const r=i},184441:(e,t,o)=>{o.d(t,{default:()=>r});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1,isShowingLoadingState:!1}}updateUserCustomizations(e,t){this.state.open&&this.state.collectionTemplate&&this.setState({...this.state,userCustomizations:{...this.state.userCustomizations,[e]:t}})}updateCollectionTemplate(e){this.state.open&&this.state.collectionTemplate&&this.setState({...this.state,collectionTemplate:e})}updatePreviewCollectionViewTemplateId(e){this.state.open&&this.state.collectionTemplate&&this.setState({...this.state,previewCollectionViewTemplateId:e})}getParentStore(){return this.state.open?this.state.parentStore:void 0}getShouldShowExpandedTemplateList(){return this.state.open&&this.state.shouldShowExpandedTemplateList}setShouldShowExpandedTemplateList(e){this.state.open&&this.setState({...this.state,shouldShowExpandedTemplateList:e})}close(e){var t,o;this.state.open&&(null===(t=(o=this.state).onClose)||void 0===t||t.call(o,e),this.setState({open:!1,isShowingLoadingState:!1}))}reset(){this.setState(this.getInitialState())}}const i=new n;(0,o(947115).exposeDebugValue)("InitializeWorkflowTemplateModalStore",i);const r=i},347628:(e,t,o)=>{o.d(t,{Ig:()=>l,Vr:()=>i,X$:()=>r,b:()=>n});const n="notion://projects_app",i="notion://wiki_app",r="notion://docs_app",l="notion://meetings_app"},29488:(e,t,o)=>{function n(e){return`${e.table}:${e.id}`}o.d(t,{O:()=>n})},912203:(e,t,o)=>{o.d(t,{$M:()=>h,GQ:()=>x,Jy:()=>I,LF:()=>b,NO:()=>m,Of:()=>k,SF:()=>u,TX:()=>w,XO:()=>f,Y_:()=>d,Ym:()=>g,bD:()=>S,cO:()=>p,fo:()=>C,rR:()=>y});o(267602),o(653476),o(228244);var n=()=>o(513670),i=()=>o(696459),r=()=>o(226413),l=()=>o(109477),c=()=>o(455222),a=()=>o(305580);(0,i().AO)((e=>(0,i().$K)(e)&&(0,i().$K)(e.target)&&(0,i().$K)(e.external_bot_id)?{true:{external_bot_id:e.external_bot_id,target:e.target}}:{false:e}));const s={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1},d={checkbox:[{type:"checkbox"}],date:[{type:"date"}],email:[{type:"text"}],multi_select:[{type:"text"},{of:{type:"text"},type:"array"}],number:[{type:"number"}],person:[{type:"person"},{of:{type:"person"},type:"array"}],phone_number:[{type:"text"}],relation:[{type:"block"},{of:{type:"block"},type:"array"}],select:[{type:"text"},{of:{type:"text"},type:"array"}],status:[{type:"text"},{of:{type:"text"},type:"array"}],text:void 0,title:void 0,url:[{type:"text"}]};function u(e){return Boolean(s[e.type]&&!(0,r().NK)(e)&&(!(0,r().qQ)(e)||void 0===(0,r().q3)(e)))}function p(e){const{collectionFormat:t,collectionSchema:o,filter:c,sort:s,sourcePropertyIds:d}=e,p=(d??(0,i().Yd)(o)).filter(((t,n,i)=>{const l=o[t];return!(!l||!u(l))&&(("relation"!==l.type||!e.restrictCrossSpace||!(0,r().Qh)(e.spaceId,l))&&(!c||c([t,l],n,o)))}));if(0===p.length)return[];if(!t||!1===s)return p;const m=(0,a().i)(t,o,void 0,l().j5.Page).collection_page_properties||[];return n().MR(p,(e=>m.findIndex((t=>t.property===e))))}function m(e){const{collectionFormat:t,collectionSchema:o,sort:c}=e,s=(0,i().Yd)(o).filter(((e,t,n)=>{const i=o[e];return!(!i||!(0,r().U8)(i))}));if(0===s.length)return[];if(!t||!1===c)return s;const d=(0,a().i)(t,o,void 0,l().j5.Page).collection_page_properties||[];return n().MR(s,(e=>d.findIndex((t=>t.property===e))))}function y(e){return e.type===c().$E.InvalidCharacter?{type:e.type,character:e.character}:e.type===c().$E.TokenExpected?{type:e.type,token:e.token}:e.type===c().FY.MissingSchemaPropertyOnThisRow||e.type===c().FY.MissingSchemaPropertyOnCollection?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===c().FY.ThisRowBlockPropertyMismatchCollection?{type:e.type,thisRowCollection:e.thisRowCollection}:e.type===c().FY.MissingContextVariable?{type:e.type,valueId:e.valueId}:e.type===c().FY.FunctionCallTooFewArguments?{type:e.type,numArguments:e.numArguments}:e.type===c().FY.FunctionCallUnexpectedArgument?{type:e.type,parameterIndex:e.parameterIndex}:e.type===c().FY.FunctionCallArgumentWrongType?{type:e.type,argumentType:e.argumentType,libraryFunctionName:e.libraryFunction.name,parameterIndex:e.parameterIndex}:e.type===c().FY.MissingDataDependencyBlock?{type:e.type,blockPointer:e.blockPointer}:e.type===c().FY.MissingDataDependencyPerson?{type:e.type,personPointer:e.personPointer}:e.type===c().FY.MemberPropertyMismatchCollection?{type:e.type,blockCollection:e.blockCollection}:e.type===c().FY.DownstreamParseFailure?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===c().FY.ContextVariableWrongType?{type:e.type,valueId:e.valueId,expectedType:e.expectedType,resultType:e.resultType}:e.type===c().FY.DisallowedValueType?{type:e.type,expressionValue:e.expressionValue,allowedValueTypes:e.allowedValueTypes}:e.type===c().FY.LibraryFunctionExecutionError?{type:e.type,error:e.error,libraryFunctionName:e.libraryFunction.name}:{type:e.type}}const g={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,button:!1,file:!1,verification:!1,auto_increment_id:!1,created_by:!1,created_time:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1};function h(e){return Boolean(g[e.type])}function f(e){const{collectionFormat:t,collectionSchema:o,filter:c,sort:s}=e,d=(0,i().Yd)(o).filter(((e,t,n)=>{var i;const l=o[e];return!(!l||!g[l.type])&&((!(0,r().qQ)(l)||null===(i=(0,r().q3)(l))||void 0===i||!i.auto_update_on_edit)&&(!c||c([e,l],t,o)))}));if(0===d.length)return[];if(!t||!1===s)return d;const u=(0,a().i)(t,o,void 0,l().j5.Page).collection_page_properties||[];return n().MR(d,(e=>u.findIndex((t=>t.property===e))))}const v={checkbox:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,date:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1};function S(e){return v[e.type]}const _={checkbox:!0,created_by:!0,created_time:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,last_edited_by:!0,last_edited_time:!0,auto_increment_id:!1,button:!1,file:!1,formula:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1};function w(e){return _[e.type]}function x(e){return 0===e}function C(e){return function(e){return"button_block"===e||"button_property"===e}(e)}function b(e){const{property:t,collectionSchema:o}=e;return!!o&&!o[t]}function I(e){const{collectionSchema:t,property:o,type:n}=e,i=null==t?void 0:t[o];return!i||("action"===n?!u(i):!g[i.type])}function k(e){let{automationTrigger:t,collectionSchema:o}=e;if("event"===(null==t?void 0:t.type)||"notification_event"===(null==t?void 0:t.type)){const{pagesAdded:e,pagePropertiesEdited:n,source:r}=t.event;if(void 0===r)return!1;const l="some"===n.type&&n.some,c="all"===n.type&&n.all;if((l||c||[]).some((e=>b({collectionSchema:o,property:e.property})||I({collectionSchema:o,property:e.property,type:"trigger"}))))return!1;const a="some"===n.type&&(!(0,i().$K)(n.some)||0===n.some.length),s="all"===n.type&&(!(0,i().$K)(n.all)||0===n.all.length);if(!e&&("none"===n.type||a||s))return!1}else{if("recurrence"!==(null==t?void 0:t.type))return!1;if(!t.recurrence)return!1}return!0}},157955:(e,t,o)=>{o.r(t),o.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>R,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>x,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>w,MAX_RECURRENCE_INTERVAL:()=>h,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>f,RRULE_WEEKDAYS_MAP:()=>g,convertFromUnpersistedRecurrenceConfig:()=>E,convertToUnpersistedRecurrenceConfig:()=>j,getFormattedEndCondition:()=>M,getFormattedNextRecurrenceTime:()=>T,getNextDateUtc:()=>k,getRecurrenceAfter:()=>b,isRunningBetweenMidnightAnd3AM:()=>I,isValidRecurrenceInterval:()=>v,isValidRecurrenceNumberOfRuns:()=>S,rruleFromRecurrence:()=>_,templateAncestorsViolateRecurrenceNesting:()=>C});o(267602),o(653476),o(241792);var n=()=>o(730120);o(670560);function i(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),n=1;n<t;n++)o[n-1]=arguments[n];if(0===o.length)return e.map((e=>[e]));const r=[];for(const l of e)r.push(...i(o[0],...o.slice(1)).map((e=>[l,...e])));return r}var r=()=>o(696459),l=()=>o(326966),c=()=>o(803021),a=()=>o(646574),s=()=>o(998411),d=()=>o(578292);class u extends(()=>o(484885))().Ci{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var p=()=>o(494616);const m=(0,o(788860).vU)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12â€“3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),y={day:u.DAILY,week:u.WEEKLY,month:u.MONTHLY,year:u.YEARLY},g={MO:u.MO,TU:u.TU,WE:u.WE,TH:u.TH,FR:u.FR,SA:u.SA,SU:u.SU},h=99,f=999;function v(e){return(0,l().hj)(e)&&Number.isInteger(e)&&e>0&&e<=h}function S(e){return(0,l().hj)(e)&&Number.isInteger(e)&&e>0&&e<=f}function _(e){const{start_date:t,frequency:o,interval:n,weekdays:l,timezone:a,hour:s,minute:d}=e,p="week"===o&&l?l.map((e=>g[e])):void 0,m={};return(0,r().$K)(e.end_condition)&&("date"===e.end_condition.type?m.until=(0,c().pd)(e.end_condition.end_at):"number"===e.end_condition.type?m.count=e.end_condition.number_of_occurrences:(0,r().t1)(e.end_condition)),"month"===e.frequency&&(0,r().$K)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?m.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?m.byweekday=i(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((e=>{let[t,o]=e;return g[t].nth(o)})):(0,r().t1)(e.monthly_restriction)),new u({freq:y[o],dtstart:(0,c().pd)(t),interval:n,byweekday:p,tzid:a,byhour:s??0,byminute:d??0,bysecond:0,...m})}const w=1,x=1;function C(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const o=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),n=e.length,i=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,r=n>w,l=o.length>=x;return{violatesConstraint:r||l,templateNestingExceedsMaxDepth:r,ancestorHasDailyTemplate:l,nestedDepthOfAutomationAncestors:n,immediateAncestorRecurrenceType:i}}function b(e){const{recurrence:t,afterDate:o}=e;if((0,p().nA)(t)){const e=(0,c().kq)(o);return t.start_date>=e?new Date(t.start_date):void 0}{const e=_(t).after((0,c().pd)(o));if(!e)return;return(0,c().YL)(e)}}function I(e){return 0===e.hour||1===e.hour||2===e.hour}function k(e){return _(e).after((0,c().pd)((0,c().Jh)()))||void 0}function T(e){const{recurrence:t,intl:o}=e,i=k(E(t));if(!i)return;const r=I(t),l=n().ou.fromJSDate(i).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,d().E2)(o)).setZone(t.timezone),c=(0,a().p6)({date:l,dateFormat:"relative",allowRelativeDates:!0,intl:o,shortenDate:!0});if(r)return o.formatMessage(m.dateBetweenMidnightAnd3AM,{date:c});{let e=l.toLocaleString(n().ou.TIME_SIMPLE);return t.timezone!==(0,s().r)()&&(e+=` ${l.toFormat("ZZZZ")}`),o.formatMessage(m.dateAtTime,{date:c,time:e})}}function M(e,t){return(0,r().$K)(e)?"number"===e.type?t.formatMessage(m.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,a().p6)({date:n().ou.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,r().t1)(e):t.formatMessage(m.noEndCondition)}const R=100;function j(e){return{...e,start_date:(0,c().kq)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,c().kq)(e.end_condition.end_at)}:(0,r().t1)(e.end_condition):void 0}}function F(e,t){const o=n().ou.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,c().Jh)(o.toJSDate())}}function E(e){return{...e,start_date:(0,c().Jh)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?F(e,e.end_condition):(0,r().t1)(e.end_condition):void 0}}},519454:(e,t,o)=>{o.d(t,{R:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("pencil",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M3.926 13.307H14.11c.183 0 .34-.066.472-.199a.644.644 0 00.198-.471.652.652 0 00-.198-.479.644.644 0 00-.472-.198H5.272l-1.346 1.347zm-.704-.636l7.683-7.684-1.312-1.319-7.69 7.684-.67 1.606c-.037.1-.017.191.06.273.083.082.174.105.274.069l1.655-.63zm8.34-8.326l.738-.732c.182-.187.278-.376.287-.567.009-.192-.068-.374-.232-.547l-.267-.267c-.169-.168-.351-.246-.547-.232-.196.014-.385.11-.567.287l-.739.732 1.327 1.326z"})})}}]);