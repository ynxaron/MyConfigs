"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[39938],{254805:(e,t,o)=>{o.d(t,{rk:()=>re,d$:()=>ue,ZP:()=>ye,pE:()=>pe,jo:()=>me,ZY:()=>ge,tb:()=>Se,sL:()=>ae,VN:()=>se,n5:()=>le,TE:()=>de,Pc:()=>ce,Te:()=>Ce,nZ:()=>he,Wc:()=>Pe,ww:()=>ve,b:()=>be,EA:()=>ke});var n=()=>o(146947),i=()=>o(707513),r=()=>o(191586),a=()=>o(876822),l=()=>o(311562),s=(o(670560),o(267602),o(470928),o(667294)),c=()=>o(219727),d=()=>o(142735),u=()=>o(511115),g=()=>o(263184),p=()=>o(752778),S=()=>o(788860),m=()=>o(513670),f=()=>o(696459),v=()=>o(917801),b=()=>o(244540),y=()=>o(418216),k=()=>o(879952),h=()=>o(990966),P=()=>o(656801),C=()=>o(881266),_=()=>o(125659),M=()=>o(201741),w=()=>o(500174),B=()=>o(337897),V=()=>o(239482),K=()=>o(942226),x=()=>o(480089),T=()=>o(828946),E=()=>o(658096),L=()=>o(529048),I=()=>o(158083),Z=()=>o(279386),F=()=>o(749826),D=()=>o(9599),O=()=>o(475335),R=()=>o(543842),j=()=>o(121700),A=()=>o(851713),H=()=>o(27475),q=()=>o(482162),N=()=>o(557576),W=()=>o(965903),U=o(785893);i().F5(n().locale).sans,i().F5(n().locale).serif,i().F5(n().locale).mono,i().F5(n().locale).comic;const G={width:"100%",display:"flex",flexDirection:"column",position:"relative",alignItems:"center",flexGrow:1},z=30;function X(e,t){var n,i;const{store:f,context:D,disabled:j,onTitleEsc:A,styleOverrides:H,disableTopControls:W}=e,z=(0,d().VK)((()=>{var e;return null===(e=f.getSpaceStore())||void 0===e?void 0:e.getFreezeSettings()}),[f]),X=(0,o(580215).M)(z),Q=j||"active"===X,re=(0,c().O7)(),ae=(0,c().Fy)(),le=(0,o(657320).l)(),se=(0,x().PE)(f,Q),ce=(0,x().Jy)(f,Q),de=(0,d().VK)((()=>ce&&!f.isNonEditableState()&&!(0,r().a_)(f)&&!(0,r().Wt)(f)),[ce,f]),ue=(0,x().Pl)(f),ge=(0,d().VK)((()=>f.isCollectionView()),[f]),pe=(0,d().VK)((()=>Boolean((0,o(631871).sL)(f.id))?"v8":"v4"),[f]),Se=(0,d().VK)((()=>f.isCollectionViewPageWithContent()),[f]),me=(0,d().VK)((()=>"workflow"===f.getType()),[f]),fe=(0,d().VK)((()=>{const e=f.getAssociatedCollectionStore(),t=null==e?void 0:e.getLayoutStore();return Boolean(t)}),[f]),ve=(0,o(309797).WJ)(f),be=(0,d().VK)((()=>({layout:{translateX:-1*ve},layoutFull:{translateX:ve}})),[ve]),ye=(0,d().VK)((()=>g().default.createValue(!1,{name:"headerFocusStore"})),[]),ke=(0,d().Kw)(ye),{isInPeek:he,isInsideSidePeek:Pe}=(0,d().VK)((()=>({isInPeek:(0,K().wq)(f),isInsideSidePeek:(0,r().yp)(f)})),[f]),Ce=(0,s.useMemo)((()=>new(l().Z)),[]),_e=(0,s.useMemo)((()=>new(L().Z)),[]),Me=(0,s.useMemo)((()=>new(L().Z)),[]),we=(0,s.useMemo)((()=>new(o(692304).Z)),[]),Be=(0,d().VK)((()=>g().default.createValue(!1,{name:"forceControlHoverVisibleStore"})),[]),Ve=(0,d().Kw)(Be),Ke=(0,s.useMemo)((()=>({headerFocusStore:ye,pageViewBlockStore:Ce,resolvedDiscussionButtonPopupStore:_e,backlinksButtonPopupStore:Me,templatePickerMenuListStore:we,forceControlHoverVisibleStore:Be})),[ye,Ce,_e,Me,we,Be]),[xe,Te]=(0,s.useState)(!1),[Ee,Le]=(0,s.useState)(!1),[Ie,Ze]=(0,s.useState)(""),Fe=(0,s.useCallback)((()=>{_e.setState({open:!0}),Ce.setState({...Ce.state,forceDiscussionOpen:!0})}),[Ce,_e]),De=(0,s.useCallback)((()=>{const e=Re.current;if(e){if(function(e){if(!e.isIOS)return!1;return!0}(ae))return{paddingLeft:0,paddingRight:0};const t=getComputedStyle(e),o=parseFloat(t.getPropertyValue("padding-left")),n=parseFloat(t.getPropertyValue("padding-left"));return{paddingLeft:m().i2(o)?0:o,paddingRight:m().i2(n)?0:n}}}),[ae]),Oe=(0,s.useCallback)((()=>{const e=Re.current;if(e){const t=e.getBoundingClientRect().width,o=De()??{paddingLeft:0,paddingRight:0};return t-o.paddingLeft-o.paddingRight}}),[De]),Re=(0,s.useRef)(null),je=(0,s.useRef)(null),Ae=(0,s.useRef)(null),He=(0,s.useCallback)((()=>Re.current),[]),qe=(0,s.useCallback)((()=>je.current),[]),Ne=(0,s.useMemo)((()=>new(o(972776).Z)(re)),[]);(0,o(98642).c)(o(163085).Z,(()=>({store:f,blockContext:D,openResolvedDiscussionPopup:Fe,getContentInnerWidth:Oe,getContentWrapEl:He,getLayoutEl:qe,collectionContextStore:Ne,headerFocusStore:ye,pageViewBlockStore:Ce,resolvedDiscussionButtonPopupStore:_e,backlinksButtonPopupStore:Me,templatePickerMenuListStore:we,forceControlHoverVisibleStore:Be,headerMouseStore:void 0,detailsFocusStore:void 0,detailsMouseStore:void 0,renderedType:"page",getBlockStore:()=>f,getNode:()=>Ae.current})),[f,D,Fe,Oe,De,He,qe,Ne,Ke]);const We=(0,s.useRef)(!1),Ue=(0,d().VK)((()=>f.getTitleStore()),[f]),Ge=(0,d().VK)((()=>f.isInsideFactoryOrDuplicateBlocksAction()),[f]),ze=(0,d().VK)((()=>{const e=E().default.state.publicPageData;return Boolean(null==e?void 0:e.isDLSViewer)}),[]),Xe=(0,s.useCallback)((()=>!!Ue&&(!!e.forceSelectTitleOnMount||!ge&&(!(ae.isMobile&&ae.isPhone&&o(369320).Z.hasOpenMobileSlideUps())&&(!o(955620).QaF(Ue.getValue())||(0,r().CX)(f)&&!ae.isMobile)))),[ae.isMobile,ae.isPhone,ge,e.forceSelectTitleOnMount,f,Ue]),Qe=(0,s.useRef)();Qe.current=performance.now(),(0,s.useEffect)((()=>{if(F().default.checkGate({gateName:"dont_load_users"})||async function(e){const{environment:t}=e;R().Z.state.emptyQueryUserRequestStore.setState({...R().Z.state.emptyQueryUserRequestStore.state,ready:!1,loading:!0});const o=await T().x.searchActions.load();await a().default.waitUntil((()=>Boolean(a().default.state.currentSpaceStore&&a().default.state.mainEditorCurrentBlockStore)));const n=await o.searchVisibleSpaceUsers({environment:t,query:"",membersOnly:!1,minFuzzyScore:25,placeSelfFirst:!1});R().Z.state.emptyQueryUserRequestStore.setState({ready:!0,loading:!1,result:n})}({environment:re}),(0,o(761936).L)(),ae.isPhone){const{PageScroller:e}=o(832924).default;if(e){const t=e.getNode();if(t&&se&&!Mt){const e=function(e,t){return 28+(0,r().uU)(e,t)}(D,re);t.scrollTo({top:e})}}}if(Ue&&Xe()&&(k().eP({environment:re,store:f}),h().setSelectionAtEnd({store:Ue})),y().updateMetricDataWithIsPushTag(re),D!==l().S.Frame||ge||$e||(Qe.current&&o(842918).Z.markPageViewBlockRender(Qe.current),y().measurePageRenderMetrics({environment:re,isEditable:de,isHomePage:!1,isWikiHome:!1,isPageWithCustomLayout:fe,idSchema:pe}),function(e,t){var o;ie(e,t)&&(null===(o=t.mobileNative)||void 0===o||o.markTransitionReady({type:"new_page",id:e.id,sendImmediately:!0}))}(f,re)),Ne){const e=(0,o(861026).vS)(Ne);o(620218).default.DO_NOT_USE_measureLegacy("collections.open_item_page_lag",{environment:re,data:{...e,peek_mode:q().default.getPeekMode()}})}!function(e,t){if("space_for_ai"!==(0,P().sy)())return;const o=e.getContentStores()[0],n=P().__.state;if(!o||o.id!==n)return;k().eP({environment:t,store:o}),h().setSelectionAtEnd({store:o.getBlockTitleStore()})}(f,re)}),[]);const $e=(0,d().VK)((()=>f.isFormBlock()),[f]),Je=(0,d().VK)((()=>f.getFormat()),[f]),Ye=(0,d().VK)((()=>{var e;return null===(e=Z().MT.getStateForBlock(f.id))||void 0===e?void 0:e.mode}),[f.id]),et=(0,d().VK)((()=>M().TI.state&&M().mn.state===f.id&&"disconnected"===o(795597).Z.state),[f.id]),tt=(0,d().VK)((()=>{var e;return V().wf(f)||Boolean(null===(e=E().default.state.publicPageData)||void 0===e?void 0:e.isDeleted)&&ee(D)}),[f,D]),ot=(0,d().VK)((()=>le&&le.publicEditModeStore.state),[le]),nt=(0,d().VK)((()=>f.isTemplate()),[f]);(0,s.useEffect)((()=>{if(D===l().S.Frame){const e=oe(D);null!=ot&&ot.hasPublicPermission&&"edit"===ot.permission&&!nt?v().Bw({bannerStore:e,id:"EditingPageBanner",contentKey:"editing_page",styleKey:w().v.White}):v().qL({bannerStore:e,id:"EditingPageBanner"});o(844095).Z.state.pageMap[f.id]?v().Bw({bannerStore:e,id:"ImportingEvernotePage",contentKey:"importing_evernote",styleKey:w().v.Blue,blockStore:f}):v().qL({bannerStore:e,id:"ImportingEvernotePage"})}if(ne(D)){const e=oe(D),t=V().oZ(f),n=V().D0(f);if((0,o(657120).nV)(t))v().Bw({bannerStore:e,id:"SpaceContentDuplicationPage",contentKey:"space_content_duplication",styleKey:w().v.Red,blockStore:f});else if(!tt||$e||ie(f,re))if(n)v().Bw({bannerStore:e,id:"ArchivedTeamPage",contentKey:"page_in_archived_team",styleKey:w().v.Red});else for(const o of["SpaceContentDuplicationPage","DeletedPage","ArchivedTeamPage"])v().qL({bannerStore:e,id:o});else v().Bw({bannerStore:e,id:"DeletedPage",contentKey:"deleted_or_moved_page",blockStore:f,styleKey:w().v.Red});et?v().Bw({bannerStore:e,id:"DictationConnectionBanner",styleKey:w().v.Yellow,contentKey:"dictation_connection",blockStore:f}):v().qL({bannerStore:e,id:"DictationConnectionBanner"}),Ye&&(0,Z().a0)(Ye)?v().Bw({bannerStore:e,id:"TranslateBanner",styleKey:w().v.Blue,contentKey:"translate",blockStore:f}):v().qL({bannerStore:e,id:"TranslateBanner"}),ze&&!(0,K().wq)(f)?v().Bw({bannerStore:e,id:"TrustedDomainPageBanner",styleKey:w().v.LightGray,contentKey:"trusted_domain_page",blockStore:f}):v().qL({bannerStore:e,id:"TrustedDomainPageBanner"}),nt?v().Bw({bannerStore:e,id:"CollectionTemplatePage",contentKey:"template_in_page",styleKey:w().v.Beige,blockStore:f,context:D,disabled:Q}):Ge?v().Bw({bannerStore:e,id:"CollectionTemplatePage",contentKey:"template_in_button",styleKey:w().v.Beige,blockStore:f,context:D,disabled:Q}):v().qL({bannerStore:e,id:"CollectionTemplatePage"}),F().default.checkGate({gateName:"improved_asana_importer_screens"})&&(null!=Je&&Je.is_asana_imported_project||null!=Je&&Je.is_asana_imported_task)&&(null!=Je&&Je.dismissed_asana_import_banner?v().qL({bannerStore:e,id:"AsanaImporterBanner"}):v().Bw({bannerStore:e,id:"AsanaImporterBanner",contentKey:"asana_importer_banner",blockStore:f,styleKey:w().v.ImportNotification}))}return()=>{ne(D)&&(v().qL({bannerStore:oe(D),id:"DeletedPage"}),v().qL({bannerStore:oe(D),id:"CollectionTemplatePage"}),v().qL({bannerStore:oe(D),id:"Site"}),v().qL({bannerStore:oe(D),id:"CrdtPage"}),v().qL({bannerStore:oe(D),id:"TrustedDomainPageBanner"}),v().qL({bannerStore:oe(D),id:"TranslateBanner"}),F().default.checkGate({gateName:"improved_asana_importer_screens"})&&v().qL({bannerStore:oe(D),id:"AsanaImporterBanner"}))}}),[re,ot,D,Q,f,tt,$e,Ge,null==Je?void 0:Je.is_asana_imported_project,null==Je?void 0:Je.is_asana_imported_task,null==Je?void 0:Je.dismissed_asana_import_banner,Ye,et,ze,nt]),(0,o(732811).K)((()=>{"suggest"===Z().MT.getMode(f,!0)?b().Ej({environment:re,location:"page_navigation",navigableBlockStore:f}):ae.isMobile||f.canEdit()||!f.canComment()||f.isLocked()||ge&&!Se||Z().MT.hasModeSet(f)||f.useCrdt()||f.isFormBlock()||f.isPost()||f.isWorkflowPage()||(0,o(728670).$t)(V().fJ(f))||b().t_({environment:re,navigableBlockStore:f,mode:"suggest",location:"default_on_for_comment_only_user"})})),(0,o(22648).KV)({pageId:f.id,isFrameContext:ee(D)}),(0,s.useEffect)((()=>()=>{"suggest"===Z().MT.getMode(f,!0)&&b().bk({environment:re,location:"page_navigation",navigableBlockStore:f})}),[re,f]);const it=(0,d().VK)((()=>Y(f)),[f]),rt=(0,d().VK)((()=>null==it?void 0:it.getParentBlockStore()),[it]),at=(0,d().VK)((()=>null==Ne?void 0:Ne.collectionStore()),[Ne]);it&&it!==at&&Ne.setContext({type:"collectionPage",collectionViewBlockStore:rt,collectionStore:it});const lt=(0,d().VK)((()=>{const e=(0,o(317924).w_)(re.TabbedRouterStore.state);if("web"===e.type){var t,n;if("page"===(null===(t=e.redirectedTo)||void 0===t?void 0:t.route.name))return null===(n=e.redirectedTo)||void 0===n?void 0:n.route.blockId;if("page"===e.route.name)return e.route.blockId}}),[re]);(0,s.useEffect)((()=>{var e;re.mobileNative&&Ie===lt&&(null===(e=re.mobileNative)||void 0===e||e.markTransitionReady({type:"page",id:f.id,sendImmediately:!0}))}),[re.mobileNative,lt,Ie,f.id]),(0,s.useEffect)((()=>{Ze(f.id)}),[f]);const st=(0,s.useCallback)((()=>{he||I().Z.state.isDragging||N().default.state.isActive||Te(!0)}),[he]),ct=(0,s.useCallback)((()=>{he||I().Z.state.isDragging||N().default.state.isActive||Te(!1)}),[he]),dt=(0,s.useCallback)((()=>{I().Z.state.isDragging||N().default.state.isActive||Le(!0)}),[]),ut=(0,s.useCallback)((()=>{I().Z.state.isDragging||N().default.state.isActive||Le(!1)}),[]),gt=(0,u().z)(dt,100),pt=(0,u().z)(ut,100),St=(0,s.useCallback)((e=>{Ue&&(k().eP({environment:re,store:f}),e.isAtStartOfLine?h().setSelectionAtStart({store:Ue}):h().setSelectionAtEnd({store:Ue}))}),[re,f,Ue]),mt=(0,s.useCallback)((e=>{h().clear({environment:re}),k().ZH({environment:re}),A&&A(e)}),[re,A]),ft=(0,s.useCallback)((e=>{if(ge)return!0;if(e.preventDefault(),function(e){return Boolean(Y(e))}(f)){const e=(0,r().y6)(f);if(e&&e.collection_page_properties){const t=e.collection_page_properties.find(((e,t)=>function(e,t){const o=Y(t);if(!o)return!1;const n=function(e){return e.getSchema()}(t);return(0,B().AB)(n[e])}(e.property,f)));t&&o(492788).default.afterNextFlush((()=>{o(909240).bA({environment:re,blockPropertyValueOverlayStore:te(D),collectionContextStore:Ne,store:f,property:t.property,format:o(356321).C.Page})}))}}}),[Ne,D,re,ge,f]),vt=(0,s.useCallback)((e=>{if(ge)return!0;mt(e)}),[mt,ge]),bt=(0,s.useCallback)((()=>{we.reset()}),[we]),yt=(0,d().VK)((()=>function(e,t,o,n){if(o===l().S.Post)return"create-post";if(n.device.isPhone)return"phone";if(n.device.isTablet)return(0,r().mO)(t,o,n)?"wide":"tablet";if((0,r().OZ)(o))return(0,r().yp)(t)?"side-peek":"center-peek";if(function(e){return e===l().S.InAppTemplatePreview}(o)||function(e){return e===l().S.InPageSnapShot}(o))return"template-preview";return(0,r().mO)(t,o,n)?e?"wide-right-margin-expanded":"wide":"default"}(ue,f,D,re)),[re,ue,D,f]),kt=(0,o(896641).S)({pageStore:f,isPostContext:D===l().S.Post,collectionStore:it,pageViewBlockStore:Ke.pageViewBlockStore}),ht=(0,d().VK)((()=>q().default.state.topHoverAreaEntered),[]),Pt=(0,s.useCallback)((e=>{const{isBottomControl:t,forceVisible:o}=e??{},n=he?ht:xe;let i;return i=!!ae.isMobile||(!!o||(!!Ve||(t?Ee&&!O().default.state.isKeyboardMode:n&&!O().default.state.isKeyboardMode||ke))),function(e){return{opacity:e?1:0,pointerEvents:e?"auto":"none",transition:"opacity 100ms ease"}}(i)}),[Ee,ae.isMobile,ke,xe,he,ht,Ve]),Ct=(0,d().VK)((()=>Pt({isBottomControl:!1})),[Pt]),[_t,Mt]=(0,d().VK)((()=>[f.hasIcon(),f.hasCover()]),[f]),wt=(0,d().VK)((()=>"suggest"===Z().MT.getMode(f)),[f]),Bt=(0,d().VK)((()=>(0,o(90065).l9)({environment:re,blockStore:f})),[re,f]),Vt=(0,o(378773).V)({environment:re,blockStore:f,from:"topControls",blockContext:D}),Kt=(0,s.useCallback)((e=>{let{from:t}=e;const n=ge?f.getCollectionStore():Y(f);n&&(0,o(142730).IR)({environment:re,blockStore:f,collectionStore:n,from:t})}),[re,ge,f]),xt=(0,s.useMemo)((()=>{if(W)return[];const e=[];return!de||_t||wt||e.push((0,U.jsx)(s.Fragment,{children:(0,U.jsx)(o(628621).Z,{store:f,afterOnClick:()=>{We.current=!0},style:Ct,label:ae.isSmallPhone?(0,U.jsx)(S()._H,{id:"PageViewBlock.icon.pageIconMobile",defaultMessage:"Icon"}):(0,U.jsx)(S()._H,{id:"PageViewBlock.icon.pageIcon",defaultMessage:"Add icon"})})},"add-icon")),!de||Mt||wt||e.push((0,U.jsx)(s.Fragment,{children:(0,U.jsx)(o(857815).Z,{store:f,style:Ct,label:ae.isSmallPhone?(0,U.jsx)(S()._H,{id:"PageViewBlock.cover.pageCoverMobile",defaultMessage:"Cover"}):(0,U.jsx)(S()._H,{id:"PageViewBlock.cover.pageCover",defaultMessage:"Add cover"})})},"add-cover")),Bt&&e.push((0,U.jsx)(s.Fragment,{children:(0,U.jsx)(o(946735).Su,{store:f,style:Ct})},"verify-page")),Vt&&e.push((0,U.jsx)(o(726841).Z,{blockStore:f,onClick:()=>Kt({from:"customize_page_button_above_title"}),style:Ct,onEducationCalloutVisibilityChange:e=>{Be.setState(e)}},"customize-layout")),de&&!ae.isMobile&&e.push((0,U.jsx)(s.Fragment,{children:(0,U.jsx)(o(448438).G,{store:f})},"generate-preview-image")),e}),[W,de,_t,wt,Mt,Bt,Vt,ae.isMobile,ae.isSmallPhone,f,Ct,Kt,Be]),Tt=(0,d().VK)((()=>{const{WindowSizeStore:e}=re,t=ge?"20vh":(null==H?void 0:H.pageCoverHeight)??$(re),n=(null==H?void 0:H.paddingX)??(0,r().RH)(D,re);return(0,U.jsx)(o(58836).p,{allowSelectionWithin:!1,style:(0,o(279080).p)(f,re),children:(0,U.jsx)(o(75751).Z,{height:t,store:f,disabled:!de,paddingLeft:e.getSafePaddingLeftCSS(n),paddingRight:e.getSafePaddingRightCSS(n),proxyWidth:e.state.width})})}),[re,ge,de,H,f,D]),Et=(0,d().VK)((()=>{const e=re.currentUser.isLoggedIn(),t=le&&le.publicEditModeStore.state;let n;return D===l().S.Frame?n=a().default.state.currentLoadingContainerStore:D===l().S.PeekView&&q().default.state.open&&(n=q().default.state.loadingContainerStore),Boolean(f&&n&&f.isDefined()&&!f.isNonEditableState()&&f.canEdit()&&!f.hasContent()&&e&&(!(null!=t&&t.hasPublicPermission)||"edit"===(null==t?void 0:t.permission))&&!(Boolean(o(365609).Z.state.pageMap[f.id])||o(346392).Z.state.pages.has(f.id))&&n.state.ready&&!(0,r().a_)(f)&&!(0,r().Wt)(f)&&(!(0,o(982855).GD)(t)||"completionPopup"!==o(845622).default.state.type))}),[re.currentUser,le,f,D]),Lt=(0,s.useMemo)((()=>({store:f,isEditable:de,hasCover:Mt,isInSidePeek:Pe,openMenuOnMountCallback:()=>{We.current=!1}})),[Mt,de,Pe,f]),It=(0,d().VK)((()=>function(e){return Boolean(e.getAssociatedCollectionStore())}(f)),[f]),Zt=(0,d().VK)((()=>ae.isMobile&&!ae.isTablet&&ae.isIOS&&!It&&"on"===F().default.getEligibleGroup({experimentId:"mobile_lightweight_editor_prompt",defaultGroup:"control"})),[ae.isMobile,ae.isTablet,ae.isIOS,It]),Ft=(0,d().VK)((()=>{var t;const o=(null===(t=e.styleOverrides)||void 0===t?void 0:t.paddingX)??(0,r().RH)(D,re);let n=e.titlePlaceholder;return Zt&&(n=""),{store:f,disabled:!se,isInSidePeek:Pe,paddingLeft:o,paddingRight:o,extraStyles:e.titleStyle,titlePlaceholder:n,collectionContextStore:Ne,shouldShowTemplatePicker:Et,onTitleChange:bt,onTitleEditText:St,onTitleEsc:mt,onTitleUntab:vt,onTitleTab:ft}}),[null===(n=e.styleOverrides)||void 0===n?void 0:n.paddingX,e.titleStyle,e.titlePlaceholder,D,re,f,se,Ne,Et,bt,St,mt,vt,ft,Pe,Zt]),Dt=(0,s.useCallback)((e=>{"page"===e&&y().measurePageRenderMetrics({environment:re,isEditable:de,isHomePage:!1,isWikiHome:!0,isPageWithCustomLayout:!1,idSchema:pe})}),[re,de,pe]),Ot=(0,d().VK)((()=>{var t,n;const i=(0,U.jsx)(o(763986).d.Provider,{value:ve,children:(0,U.jsx)(o(628370).Z,{tag:o(857719).Xg,animate:be.layout,type:yt,withBottomPadding:D!==l().S.Post,ref:je,children:(0,U.jsx)(o(657558).Z,{context:D,onHeaderMouseEnter:st,onHeaderMouseLeave:ct,onDetailMouseEnter:gt,onDetailMouseLeave:pt,pageCoverHeight:(null===(t=e.styleOverrides)||void 0===t?void 0:t.pageCoverHeight)??$(re),modules:(null===(n=e.layoutModulesByArea)||void 0===n?void 0:n.page_main)??kt.page_main,styleOverrides:e.styleOverrides,templatePickerMenuListStore:Ke.templatePickerMenuListStore,topControls:xt,getControlHoverStyle:Pt,pageViewBlockStores:Ke,...Lt,openMenuOnMount:We.current,...Ft,disabled:Q,pageViewBlockAccessor:qe,ref:Re})})});return Ne&&Ne.contextType?(0,U.jsx)(_().L1,{value:Ne,children:i}):i}),[ve,be.layout,yt,D,st,ct,gt,pt,e.styleOverrides,null===(i=e.layoutModulesByArea)||void 0===i?void 0:i.page_main,re,kt.page_main,Ke,xt,Pt,Lt,Ft,Q,qe,Ne]),Rt=(0,d().VK)((()=>f.getType()===o(156642).Ti.copyIndicator&&(f.getParentTable()!==p().vF||f.getParentTable()===p().vF&&0===Object.keys(f.getProperties()).length)?(0,U.jsx)(o(847207).X,{}):o(452842).Z.state.isDuplicating?(0,U.jsx)(C().g,{store:f,peekMode:void 0,forceShowIcon:!0}):ge?(0,U.jsx)(_().L1,{value:Ne,children:(0,U.jsx)(o(281510).Z,{canEdit:se,context:D,controlHoverStyle:Ct,handleHeaderMouseEnter:st,handleHeaderMouseLeave:ct,headerFocusStore:Ke.headerFocusStore,pageCover:Tt,topControls:xt,...Lt,openMenuOnMount:We.current,...Ft,store:f,onCollectionViewBlockMount:Dt})}):$e?(0,U.jsx)(o(937905).D,{renderLoading:()=>(0,U.jsx)(C().g,{store:f,peekMode:void 0}),innerRenderLoading:()=>(0,U.jsx)(C().g,{store:f,peekMode:void 0}),store:f}):me?(0,U.jsx)(o(662807).Gn,{store:f}):(0,U.jsx)(o(28832).O,{displayName:"PageContent",style:{...G,...e.style},disabled:!se||f.isNonEditableState(),shouldSelectOnEnter:J,ref:Ae,children:Ot})),[se,Ne,D,Ct,st,ct,ge,$e,Dt,Ot,Lt,Ft,e.style,Tt,f,Ke.headerFocusStore,xt,me]);return(0,x().ez)(f,t,(0,s.useMemo)((()=>({store:f,blockContext:D,openResolvedDiscussionPopup:Fe,getContentInnerWidth:Oe,getContentWrapEl:He,getLayoutEl:qe,collectionContextStore:Ne,...Ke,renderedType:"page",getBlockStore:()=>f,getNode:()=>Ae.current})),[f,D,Ne,Oe,He,qe,Fe,Ke]),Rt)}const Q=s.memo(s.forwardRef(X),o(632314).Z);function $(e){return e.device.isMobile?200:`${z}vh`}function J(){return 0===W().default.state.stores.length}function Y(e){return e.getAssociatedCollectionStore()}function ee(e){return e===l().S.Frame}function te(e){return(0,r().OZ)(e)?H().Z:j().Z}function oe(e){return(0,r().OZ)(e)?A().Z:ee(e)?D().Z:(0,f().t1)(e)}function ne(e){return ee(e)||(0,r().OZ)(e)}function ie(e,t){const{device:o,RouterStore:n}=t,{route:i}=n.state,r=e;return o.isMobileNative&&"page"===i.name&&i.showMoveTo&&r.isEmptyTitle()&&r.isEmptyPage()}const re=i().F5(n().locale).sans,ae={serif:i().F5(n().locale).serif,mono:i().F5(n().locale).mono,comic:i().F5(n().locale).comic},le={serif:1.6,mono:1.6},se={serif:0,mono:.055},ce={serif:15,mono:14},de={serif:17,mono:15},ue={width:"100%",display:"flex",flexDirection:"column",position:"relative",alignItems:"center",flexGrow:1},ge=14,pe=17,Se=16,me=16,fe=30;function ve(e){return!!e.isIOS}function be(e){return e.device.isMobile?200:`${fe}vh`}const ye=Q;function ke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{device:o}=e;return o.isTablet?380:o.isIOS?Math.max(350,t):o.isMobile?400:"30vh"}function he(e,t){if(function(e){return e===a().default.state.mainEditorCurrentBlockStore}(e)){const{RouterStore:e}=t;return e.state.route.collectionViewId}}function Pe(e,t){return 28+(0,r().uU)(e,t)}function Ce(e){return{opacity:e?1:0,pointerEvents:e?"auto":"none",transition:"opacity 100ms ease"}}}}]);