"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[22122],{579217:(e,t,o)=>{o.d(t,{_:()=>r,s:()=>i});var n=()=>o(677559);const i=(0,n().kF)(new(n().Ss)("UniversalQnaModals",(async()=>await Promise.all([o.e(62743),o.e(52774),o.e(90698),o.e(84885),o.e(37358),o.e(5242),o.e(7312),o.e(90424),o.e(81580),o.e(84325),o.e(31189),o.e(69343),o.e(46293),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(46616),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63707),o.e(86609),o.e(91253),o.e(4642),o.e(5006),o.e(6612),o.e(61171),o.e(23179),o.e(75377),o.e(31020),o.e(2942),o.e(73682),o.e(58591),o.e(54803),o.e(1953),o.e(10216),o.e(58565),o.e(69197),o.e(42055),o.e(38739),o.e(44751),o.e(81567),o.e(58183)]).then(o.bind(o,260685)))),(e=>e.UniversalQnaModals)),r=(0,n().kF)(new(n().Ss)("SlackConnectionOptions",(async()=>await o.e(16982).then(o.bind(o,945272)))),(e=>e.SlackConnectionOptions))},128039:(e,t,o)=>{o.r(t),o.d(t,{FORMS_SHARE_CALLOUT_KEY:()=>J,changeFormClosedState:()=>ue,changeFormSubmissionPermissions:()=>pe,createAndFocusCollectionFormEditorView:()=>ie,createCollectionFormEditorView:()=>re,createDummyFormPage:()=>ye,createFormInPrivate:()=>se,createFormQuestion:()=>de,createFormQuestionAndModuleForNewlyDuplicatedProperty:()=>ce,createFormQuestionAndUpdateOrCreateModule:()=>me,createResponsesCollectionView:()=>ae,deleteFormQuestion:()=>le,handleUpdateFormQuestionName:()=>te,incrementAndTrackUserFormsCreated:()=>ee,maybeAlertAboutUnsupportedPublicQuestions:()=>be,maybeSyncQuestionNameToPropertyName:()=>oe,remapQuestionToNewProperty:()=>he,toggleAnonymousFormSubmissionState:()=>ge,toggleNotionBrandingState:()=>fe});o(821057),o(670560),o(267602),o(653476),o(470928),o(30005),o(667294);var n=()=>o(846550),i=()=>o(506347),r=()=>o(156642),s=()=>o(863112),a=()=>o(226413),l=()=>o(532850),d=()=>o(817629),c=()=>o(998411),m=()=>o(667932),u=()=>o(217465),p=()=>o(375255),g=()=>o(396136),f=()=>o(139978),h=()=>o(26645),y=()=>o(483791),b=()=>o(955620),S=()=>o(788860),v=()=>o(342792),x=()=>o(543172),w=()=>o(707513),T=()=>o(984871),C=()=>o(139224),M=()=>o(132156),k=()=>o(308186),_=()=>o(421654),F=()=>o(636340),I=()=>o(47443),j=()=>o(145284),B=()=>o(269299),P=()=>o(348141),A=()=>o(932753),V=()=>o(594546),E=()=>o(907005),N=()=>o(270315),R=()=>o(487270),Z=()=>o(527278),L=()=>o(660065),D=()=>o(909679),K=()=>o(676232),H=()=>o(803728),Q=()=>o(99537),U=()=>o(913011),O=()=>o(356117),W=()=>o(876822),z=()=>o(749826),q=()=>o(808282),G=()=>o(807230),Y=()=>o(469753),$=o(785893);const X=(0,S().vU)({responsesViewName:{id:"formEditorActions.responsesViewName",defaultMessage:"Responses"},newFormViewName:{id:"formEditorActions.newFormViewName",defaultMessage:"Form builder"},formDatabaseTitle:{id:"newBlock.databaseInline.formDatabaseTitle",defaultMessage:"New form"}}),J="forms_share_form_tooltip";function ee(e,t){const{currentUserSettingsStore:o}=W().default.state;if(!o)return;const n=function(){const{currentUserSettingsStore:e}=W().default.state;if(!e)return;return e.getSettingsStore().getKeyStore("user_forms_created_count").getValue()??0}();void 0!==n&&(P().d2({userSettingsStore:o,transaction:t,data:{user_forms_created_count:n+1}}),function(e,t){(0,V().j)({environment:e,event:{eventName:"form_created",eventProperties:{user_total_form_count:t.userFormsCreatedCount}}})}(e,{userFormsCreatedCount:n+1})),z().default.logEvent("form_created")}function te(e){var t;const{questionStore:o,newName:n,environment:i,collectionStore:r,collectionSchema:s,collectionContextStore:a}=e,l=null===(t=o.getConfig())||void 0===t?void 0:t.propertyId;if(!l)throw new Error("No property ID found for question");B().createAndCommit({userAction:"formQuestion.changeName",environment:i,canUndo:!0,perform:e=>{var t,i;const d=null===(t=o.getConfig())||void 0===t?void 0:t.name;if(!d)return;const m=(0,p().Xh)({textValue:d,getRecordModel:o.getRecordModel,deterministic:!0,userTimeZone:(0,c().r)(),intl:Z().Z.getIntl()})===(null===(i=s[l])||void 0===i?void 0:i.name);B().applyOperation({store:o,operation:{pointer:o.pointer,path:["config","name"],command:"set",args:[[n]]},transaction:e}),o.shouldSyncQuestionNameToPropertyName()&&(m&&!(0,N().Gu)({property:l,collectionContextStore:a,newValue:n})?T().Bv({collectionStore:r,property:l,name:n,transaction:e}):B().applyOperation({store:o,operation:{pointer:o.pointer,path:["config","shouldSyncQuestionNameToPropertyName"],command:"set",args:!1},transaction:e}))}})}function oe(e){var t;const{questionStore:o,environment:n,collectionStore:i,collectionContextStore:r}=e,s=null===(t=o.getConfig())||void 0===t?void 0:t.propertyId;if(!s)throw new Error("No property ID found for question");B().createAndCommit({userAction:"formQuestion.changeName",environment:n,canUndo:!0,perform:e=>{if(!o.shouldSyncQuestionNameToPropertyName())return;const t=o.getNameStore().getValue();if(!t)return;const n=(0,p().Xh)({textValue:t,getRecordModel:o.getRecordModel,deterministic:!0,userTimeZone:(0,c().r)(),intl:Z().Z.getIntl()}),a=(0,N().Gu)({property:s,collectionContextStore:r,newValue:n})?(0,d().n)(n):n;T().Bv({collectionStore:i,property:s,name:a,transaction:e})}})}function ne(){const e=(0,n().yK)((e=>({container:{display:"flex",flexDirection:"column"},iconGroup:{display:"flex",flexDirection:"row",justifyContent:"center",color:e.icon.secondary,alignItems:"center"},dialogTitle:{fontSize:16,fontWeight:w().Ue.semibold,lineHeight:"22px",marginTop:12,marginBottom:12},dialogDescription:{color:e.text.secondary,fontSize:14,lineHeight:"20px"}})),[]);return(0,$.jsxs)("div",{style:e.container,children:[(0,$.jsxs)("div",{style:e.iconGroup,children:[(0,K().t)({width:24}),(0,L().r)({width:16,marginLeft:16,marginRight:14}),(0,D().E)({width:24})]}),(0,$.jsx)("span",{style:e.dialogTitle,children:(0,$.jsx)(S()._H,{defaultMessage:"Auto-create form questions based on existing properties?",id:"NewFormOnExistingCollectionDialogTitle.message"})}),(0,$.jsx)("span",{style:e.dialogDescription,children:(0,$.jsx)(S()._H,{defaultMessage:"Only supported property types will create new questions.",id:"NewFormOnExistingCollectionDialogTitle.description"})})]})}function ie(e){const{environment:t,collectionContextStore:o,transaction:n}=e,i=o.collectionViewBlockStore(),r=o.collectionStore();if(!i||!r)return;const s=o.normalizedSchemaStore.state,a=re({environment:t,collectionViewBlockStore:i,schema:s,transaction:n,initializeWithAllDefaultQuestions:!1});if(!a)return;(0,A().f8)({environment:t,collectionContextStore:o,collectionViewId:a.newViewId,isFullScreen:o.isFullScreenStore.state,isRootChild:o.isRootChildStore.state,isInPeekRenderer:o.isInPeekRendererStore.state});const l=a.layoutStore,d=Object.keys(s).filter((e=>{const t=s[e];return"title"!==e&&t&&(0,Y().I0)(t)}));d.length>0&&d.length<=Y().h0&&k().vC({showCancel:!1,keepFocus:!1,message:(0,$.jsx)(ne,{}),mode:"wide",items:[{label:(0,$.jsx)(S()._H,{defaultMessage:"Create {numQuestions, plural, one {1 question} other {{numQuestions} questions}}",id:"formEditorActions.createQuestions.primaryAction",values:{numQuestions:d.length}}),color:"blue",buttonType:"solid",onAccept(){B().createAndCommit({environment:t,userAction:"formActions.autoCreateFormQuestionsForExistingDatabase",canUndo:!0,perform:e=>{for(const n of d)ce({environment:t,transaction:e,layoutStore:l,collectionStore:r,propertyId:n,position:{type:"area_relative",area:"form_layout_schema",location:"end_moveable"},addLayoutModule:o=>{(0,Q().sW)({environment:t,sessionId:(0,v().ZP)(),layoutStore:l,position:o.position??{type:"area_relative",area:"form_layout_schema",location:"end_moveable"},module:o.layoutModule,transaction:e,isPropertyCreation:!1})},collectionContextStore:o,shouldLogEvent:!0,autoCreatedFromExistingDatabase:!0})}})}},{label:(0,$.jsx)(S()._H,{defaultMessage:"Start from scratch",id:"formEditorActions.createQuestions.secondary"}),color:"gray",buttonType:"plain",onAccept(){}}]})}function re(e){const{environment:t,collectionViewBlockStore:o,transaction:n,schema:i,initializeWithAllDefaultQuestions:r}=e;if(!o)return;const l=o.getSpaceId(),{formBlockStore:d,layoutStore:c}=function(e){var t;const{environment:o,spaceId:n,inMemoryRecordCache:i,transaction:r,schema:l,initializeWithAllDefaultQuestions:d}=e,c=Object.keys(l).find((e=>{var t;return"select"===(null===(t=l[e])||void 0===t?void 0:t.type)})),u=Boolean(d&&void 0!==c),p=(0,R().TS)({environment:o,table:g().iU,spaceId:n}),f=(0,R().TS)({environment:o,table:h().L_,spaceId:n}),b=u?(0,R().TS)({environment:o,table:h().L_,spaceId:n}):void 0,S=F().j4({id:p,environment:o,type:"form",permissions:(0,s().wG)(),inMemoryRecordCache:i,transaction:r}),v=F().ae({environment:o,table:y().Bh,value:{space_id:n,parent_table:g().iU,parent_id:S.id,modules:(0,m().l2)(f,b)},inMemoryRecordCache:i,transaction:r});var x;_().FH({stores:[S],update:{form_layout_pointer:{id:v.id,spaceId:n,table:y().Bh}},transaction:r}),de({environment:o,questionId:f,spaceId:n,layoutId:v.id,propertyId:a().iw,initialQuestionTitle:(null===(t=l[a().iw])||void 0===t?void 0:t.name)??"",inMemoryRecordCache:i,transaction:r,shouldSyncQuestionNameToPropertyName:!0,shouldLogEvent:!1}),u&&b&&c&&de({environment:o,questionId:b,spaceId:n,layoutId:v.id,propertyId:c,initialQuestionTitle:(null===(x=l[c])||void 0===x?void 0:x.name)??"",inMemoryRecordCache:i,transaction:r,shouldSyncQuestionNameToPropertyName:!0,shouldLogEvent:!1});return{formBlockStore:S,layoutStore:v}}({environment:t,spaceId:l,inMemoryRecordCache:o.inMemoryRecordCache,transaction:n,schema:i,initializeWithAllDefaultQuestions:r}),u=(0,A().W9)({environment:t,collectionViewBlockStore:o,collectionView:{type:"form_editor",parent_id:o.id,parent_table:g().iU,alive:!0,space_id:l,name:Z().Z.formatMessage(X.newFormViewName),format:{form_block_pointer:{id:d.id,spaceId:l,table:g().iU}}},transaction:n});return F().sW({store:d,data:{parent_id:u.id,parent_table:f().np,alive:!0},transaction:n}),q().Z.setState({openTooltip:u.id}),H().yM(t,J),ee(t,n),{newViewId:u.id,layoutStore:c,formId:d.id}}function se(e){const{environment:t,navigateToFormBuilder:o}=e,{currentSpaceStore:n,currentSpaceViewStore:r}=W().default.state;if(!n||!r)return;if(!(0,G().ww)(t))return void(0,G().eD)(t);if(!(n&&n.canEdit()&&r))return;const s=n.id,a=t.idCreator.getSpaceIdCreatorSync(s);B().createAndCommit({environment:t,userAction:"formActions.createAndNavigateToFormInPrivate",canUndo:!0,perform:e=>{var l;const{targetBlockStore:d}=M().Z({environment:t,sourceBlockId:"root",targetBlockPointer:(0,R().Ii)({environment:t,table:g().iU,spaceId:s}),sourceBlockSubtree:(0,u().partialRecordMapToRecordMap)(E().Xq({isInline:!0,name:(0,b().TPx)(Z().Z.formatMessage(X.formDatabaseTitle))})),targetRecordCache:n.inMemoryRecordCache,transaction:e,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!1,spaceIdCreator:a}),c=d.getCollectionStore(),m=null==c||null===(l=c.getModel())||void 0===l?void 0:l.getNormalizedSchema(),p=d;if(!m)throw new Error("Schema not found");re({environment:t,transaction:e,collectionViewBlockStore:p,schema:m,initializeWithAllDefaultQuestions:!0}),ae({environment:t,transaction:e,collectionViewBlockStore:p,schema:m}),j().Hj({environment:t,spaceStore:n,spaceViewStore:r,pageStore:d,isPrivate:!0,transaction:e,location:{type:"prepend"}}),o&&I()._c({environment:t,store:d,pageVisitSource:i().tY.CreateFormDeepLink})}})}function ae(e){const{environment:t,collectionViewBlockStore:o,transaction:n}=e,i=o.getSpaceId(),r=Object.keys(e.schema).find((t=>{var o;return"created_by"===(null===(o=e.schema[t])||void 0===o?void 0:o.type)}));(0,A().W9)({environment:t,collectionViewBlockStore:o,collectionView:{type:"table",parent_id:o.id,parent_table:g().iU,alive:!0,name:Z().Z.formatMessage(X.responsesViewName),space_id:i,format:{table_properties:[{property:"title",visible:!0},...r?[{property:r,visible:!0}]:[]],table_wrap:!0,collection_pointer:o.getCollectionPointer()}},transaction:n})}function le(e){let{environment:t,moduleId:o,sessionId:n,layoutStore:i,collectionSettingsStore:r,isCollectionEmpty:s,collectionContextStore:a,propertyId:l,questionId:d}=e;const c=a.collectionStore();if(!c)throw new Error("Could not find collection store");const m=a.normalizedSchemaStore.state;B().createAndCommit({environment:t,userAction:"formActions.deleteFormQuestion",canUndo:!0,perform:e=>{var r;(0,U().H)({environment:t,position:{area:"form_layout_schema",moduleId:o},layoutStore:i,sessionId:n,transaction:e});const a=null===(r=m[l])||void 0===r?void 0:r.type;s&&a&&"title"!==a&&T().E2({environment:t,collectionStore:c,schema:m,property:l,transaction:e})}}),(0,V().j)({environment:t,event:{eventName:"delete_form_question",eventProperties:(0,Y().Pz)({collectionContextStore:a,propertyId:l,questionId:d})}}),C().E3({collectionSettingsStore:r})}function de(e){const{environment:t,questionId:o,spaceId:n,layoutId:i,propertyId:r,initialQuestionTitle:s,inMemoryRecordCache:a,transaction:l,shouldSyncQuestionNameToPropertyName:d,collectionContextStore:c,shouldLogEvent:m=!0,autofocusTitle:u,existingFormQuestionConfig:p,autoCreatedFromExistingDatabase:g}=e;F().ae({environment:t,table:h().L_,value:{id:o,space_id:n,parent_table:y().Bh,parent_id:i,alive:!0,config:{...p,propertyId:r,name:[[s]],shouldSyncQuestionNameToPropertyName:d}},inMemoryRecordCache:a,transaction:l}),m&&(0,V().j)({environment:t,event:{eventName:"add_form_question",eventProperties:{...(0,Y().Pz)({collectionContextStore:c,propertyId:r,questionId:o}),auto_created_from_existing_database:Boolean(g)}}}),u&&u.autofocusedQuestionTextStore.autofocusQuestionTitle({questionId:o})}function ce(e){const{environment:t,transaction:o,layoutStore:n,collectionStore:i,propertyId:r,position:s,addLayoutModule:a,collectionContextStore:l,shouldLogEvent:d=!0,autofocusTitle:c,existingFormQuestionConfig:m,autoCreatedFromExistingDatabase:u}=e,p=i.getSchema()[r];if(!p)throw new Error(`No schema found for property ${r}`);const g=m?(0,b().QaF)(null==m?void 0:m.name):p.name,f=n.getSpaceId(),y=(0,R().TS)({environment:t,table:h().L_,spaceId:f});return de({environment:t,questionId:y,spaceId:f,layoutId:n.id,propertyId:r,initialQuestionTitle:g,inMemoryRecordCache:n.inMemoryRecordCache,transaction:o,shouldSyncQuestionNameToPropertyName:!0,shouldLogEvent:d,collectionContextStore:l,autofocusTitle:c,existingFormQuestionConfig:m,autoCreatedFromExistingDatabase:u}),a({layoutModule:{type:"formQuestion",id:(0,x().ZP)(),formQuestionId:y},position:s,transaction:o}),{questionId:y}}function me(e){const{environment:t,transaction:o,layoutStore:n,propertyId:i,initialQuestionTitle:r,moduleId:s,shouldSyncQuestionNameToPropertyName:a,collectionContextStore:l,autofocusTitle:d,area:c}=e,m=n.getModel();if(!m)throw new Error("Layout model cannot be undefined");const u=n.getSpaceId(),p=(0,R().TS)({environment:t,table:h().L_,spaceId:u});de({environment:t,questionId:p,spaceId:u,layoutId:m.id,propertyId:i,initialQuestionTitle:r,inMemoryRecordCache:n.inMemoryRecordCache,transaction:o,shouldSyncQuestionNameToPropertyName:a,collectionContextStore:l,autofocusTitle:d});const g={type:"formQuestion",id:s??(0,x().ZP)(),formQuestionId:p,..."form_conditional_modules"===c?{parentModuleId:e.parentModuleId,parentConditionalGroupId:e.parentConditionalGroupId}:{}};return s?(0,O().Uq)({environment:t,transaction:o,layoutStore:n,position:{area:c,moduleId:s},updatedModule:g}):"form_conditional_modules"===c&&(0,Q().sW)({environment:t,transaction:o,layoutStore:n,position:{type:"absolute",area:"form_conditional_modules",parentConditionalGroupId:e.parentConditionalGroupId,parentModuleId:e.parentModuleId},module:g,sessionId:(0,v().ZP)(),isPropertyCreation:!1}),{updatedModuleId:g.id}}function ue(e){let{environment:t,formBlockStore:o,isClosed:n}=e;o.getIsFormClosed()!==n&&B().createAndCommit({userAction:"formActions.changeFormClosedState",environment:t,canUndo:!0,perform:e=>{_().FH({stores:[o],update:{form_config:{...o.getFormConfig(),is_form_closed:n}},transaction:e})}})}function pe(e){let{environment:t,formBlockStore:o,permissions:n}=e;o.getFormSubmissionPermissions()!==n&&B().createAndCommit({userAction:"formActions.changeFormSubmissionPermissions",environment:t,canUndo:!0,perform:e=>{_().FH({stores:[o],update:{form_config:{...o.getFormConfig(),submission_permissions:n}},transaction:e})}})}function ge(e){let{environment:t,formBlockStore:o}=e;const n=o.getIsFormAnonymousSubmissionEnabled();B().createAndCommit({userAction:"formActions.changeAnonymousFormSubmissionState",environment:t,canUndo:!0,perform:e=>{_().FH({stores:[o],update:{form_config:{...o.getFormConfig(),anonymous_submissions:!n}},transaction:e})}})}function fe(e){var t;let{environment:o,formBlockStore:n}=e;const i=n.getSiteStore();if(!i)return;const r=(null===(t=i.getHeader())||void 0===t?void 0:t.hideWatermark)??!1;B().createAndCommit({userAction:"formBlockStore.publicForm.toggleNotionBranding",environment:o,canUndo:!0,perform:e=>{B().applyOperation({store:i,operation:{pointer:i.pointer,path:["header","hideWatermark"],command:"set",args:!r},transaction:e})}})}function he(e){let{environment:t,newPropertyId:o,formQuestionStore:n}=e;B().createAndCommit({userAction:"formQuestion.remapQuestionToNewProperty",environment:t,canUndo:!0,perform:e=>{B().applyOperation({store:n,operation:{pointer:n.pointer,path:["config","propertyId"],command:"set",args:o},transaction:e})}})}function ye(e){const{environment:t,collectionSchema:o,temporaryRecordCache:n,spaceId:i,collectionId:s,formMode:a}=e,l={};Object.keys(o).forEach((e=>{l[e]=(0,b().TPx)("")}));const{performResult:d}=B().createAndCommit({environment:t,userAction:"formActions.createDummyFormPage",perform:e=>{const o=F().j4({environment:t,type:r().Ti.page,inMemoryRecordCache:n,transaction:e,spaceId:i,properties:{...l}});return F().sW({store:o,data:{alive:"viewer"===a,parent_id:s,parent_table:"collection"},transaction:e}),o},canUndo:!1});return d}async function be(e){const{environment:t,formBlockStore:o,collectionSchema:n,theme:i,onAccept:r}=e;if(!n)return;const s=(0,Y().jj)(o),a=(null==s?void 0:s.getFormQuestionsForFormLayout())??[],d=[];if(a.forEach((e=>{const o=e.getPropertyId();if(!o)return;const i=(0,l().Qm)({schema:n,property:o}),r=null==i?void 0:i.type;if(!r)return;(0,Y().Hz)({environment:t,propertyType:r,propertySchema:i,isPublicForm:!0})&&d.push(e)})),0===d.length)return void r();const m=d.map(((e,t)=>{const o=(0,p().Xh)({textValue:e.getNameStore().getValue(),getRecordModel:e.getRecordModel,deterministic:!0,userTimeZone:(0,c().r)(),intl:Z().Z.getIntl()}),n=t===d.length-1;return(0,$.jsx)("div",{style:{fontSize:14,textAlign:"start",padding:"8px 12px",borderBottom:n?void 0:`1px solid ${i.lightDividerColor}`},children:o},e.id)})),{accept:u}=await k().gt({message:(0,$.jsx)(S()._H,{id:"formEditorActions.maybeAlertAboutUnsupportedPublicQuestions.message",defaultMessage:"These questions are not supported in public forms and will not be shown to respondents:"}),description:(0,$.jsx)("div",{style:{borderRadius:6,border:`1px solid ${i.lightDividerColor}`,width:"calc(100% + 24px)",marginLeft:-12,marginTop:12,maxHeight:210,overflow:"auto"},children:m}),acceptLabel:(0,$.jsx)(S()._H,{id:"formEditorActions.maybeAlertAboutUnsupportedPublicQuestions.acceptLabel",defaultMessage:"Got it"}),acceptColor:"blue",cancelButtonType:"plain",mode:"wide"});u&&r()}},771692:(e,t,o)=>{o.r(t),o.d(t,{default:()=>Ee});var n=o(667294),i=()=>o(219727),r=()=>o(142735),s=()=>o(846550),a=()=>o(788860),l=()=>o(661297),d=()=>o(654133),c=()=>o(594546),m=()=>o(469753),u=()=>o(714230),p=()=>o(863112),g=()=>o(259408),f=()=>o(959137),h=()=>o(879952),y=()=>o(990966),b=()=>o(348141),S=()=>o(521632),v=()=>o(827973),x=()=>o(448419),w=()=>o(206352),T=()=>o(291198),C=()=>o(198829),M=()=>o(470386),k=()=>o(989377),_=()=>o(906651),F=()=>o(125659),I=()=>o(247724),j=()=>o(347577),B=()=>o(527278),P=()=>o(352230),A=()=>o(164079),V=()=>o(148126),E=()=>o(345918),N=()=>o(466970),R=()=>o(690277),Z=o(785893);const L=(0,o(827282).IU)("anonymousForm",{viewBox:"0 0 16 16",svg:(0,Z.jsx)("g",{children:(0,Z.jsx)("path",{d:"M1.896 5.789c-.446 0-.67-.228-.67-.684V3.444c0-.73.19-1.28.568-1.654.378-.374.936-.561 1.675-.561h1.66c.452 0 .678.223.678.67 0 .451-.226.677-.677.677H3.55c-.318 0-.562.082-.73.246-.165.164-.247.412-.247.745v1.538c0 .456-.225.684-.677.684zm12.203 0c-.447 0-.67-.228-.67-.684V3.567c0-.333-.087-.581-.26-.745-.169-.164-.41-.246-.725-.246h-1.579c-.45 0-.677-.226-.677-.677 0-.447.226-.67.677-.67h1.661c.743 0 1.304.187 1.682.56.378.374.567.926.567 1.655v1.661c0 .456-.225.684-.676.684zM3.469 14.77c-.739 0-1.297-.19-1.675-.567-.378-.374-.567-.926-.567-1.655v-1.654c0-.456.223-.684.67-.684.45 0 .676.228.676.684v1.538c0 .333.082.581.246.745.169.164.413.246.732.246H5.13c.451 0 .677.226.677.677 0 .447-.226.67-.677.67H3.469zm7.396 0c-.45 0-.677-.223-.677-.67 0-.451.226-.677.677-.677h1.58c.314 0 .555-.082.724-.246.173-.164.26-.412.26-.745v-1.538c0-.456.223-.684.67-.684.45 0 .676.228.676.684v1.654c0 .73-.189 1.28-.567 1.655-.378.378-.939.567-1.682.567h-1.66zm-6.193-2.796c-.164 0-.287-.048-.37-.143a.596.596 0 01-.115-.376c0-.205.075-.468.225-.787a3.79 3.79 0 01.697-.97 3.977 3.977 0 011.19-.82c.478-.224 1.043-.336 1.695-.336.66 0 1.23.112 1.71.335a3.896 3.896 0 011.879 1.791c.155.32.232.582.232.787 0 .15-.04.275-.123.376-.077.095-.198.143-.362.143H4.672zm3.322-4.02c-.35 0-.67-.09-.957-.273a2.03 2.03 0 01-.69-.738 2.173 2.173 0 01-.26-1.067c0-.373.087-.715.26-1.025a2.03 2.03 0 01.69-.738c.287-.187.606-.28.957-.28s.672.093.964.28c.292.182.522.428.69.738.174.31.26.652.26 1.025 0 .397-.086.752-.26 1.067-.168.31-.398.556-.69.738a1.783 1.783 0 01-.964.274z"})})});var D=()=>o(696347),K=()=>o(363253),H=()=>o(599631),Q=()=>o(824308),U=()=>o(965910),O=()=>o(215791),W=()=>o(589515),z=()=>o(803728),q=()=>o(878797),G=()=>o(356140),Y=()=>o(314169),$=()=>o(714022),X=()=>o(333023),J=()=>o(998470),ee=()=>o(689653),te=()=>o(787093),oe=()=>o(998901),ne=()=>o(876822),ie=()=>o(47375);class re extends(()=>o(263184))().default{getInitialState(){return{formShareMenuType:"initial"}}}const se=new re;var ae=()=>o(808282),le=()=>o(965014),de=()=>o(385337),ce=()=>o(815277),me=()=>o(659796),ue=()=>o(128039),pe=(o(267602),o(470928),o(241792),()=>o(513670)),ge=()=>o(255577),fe=()=>o(967092);const he=function(e){let{icon:t,title:a,selectedKey:l,onChange:c,disabled:m,tooltipMessage:u,disableTooltip:p,...g}=e;const f=(0,i().Fy)(),h=(0,s().Fg)(),y="options"in g?g.options:[],b=y.find((e=>pe().Xy(e.key,l))),S=(0,r().qz)(void 0,o(529048).Z),w=(0,r().Kw)(S);(0,n.useEffect)((()=>{b||o(799891).log({level:"error",from:"FormSettingsPickListRow",type:"InvalidSelectedItem",error:(0,o(792409).Ui)("Selected key is invalid.")})}));const T=(0,s().yK)((e=>({desktopAndTabletButton:{marginLeft:0,marginRight:0,width:"auto",padding:"2px 0",margin:"0 10px"},valueContainer:{display:"flex",alignItems:"center",color:e.text.secondary},iconStyle:{width:16,height:16},rightStyle:{marginRight:0},chevronIcon:{height:12,width:12,marginLeft:6,fill:e.icon.tertiary,transform:w.open?"rotate(90deg)":void 0}})),[w.open]),M=(0,Z.jsxs)("div",{style:T.valueContainer,children:[null==b?void 0:b.title,(0,D().o)(T.chevronIcon)]});return(0,Z.jsx)(d().Z,{renderTooltip:()=>u,disableTooltip:p,placement:oe().Placement.Left,textWrap:!0,render:e=>(0,Z.jsx)(x().ZP,{popupType:f.isPhone?fe().kQ.SlideUp:fe().kQ.Popup,alignmentToOrigin:x().vR.End,placementToOrigin:x().pO.Bottom,originGap:0,buttonPopupStore:S,disabled:m,renderOrigin:o=>(0,Z.jsx)(v().Z,{...e,icon:null==t?void 0:t(T.iconStyle),title:a,focused:!1,disabled:m,buttonStyle:f.isPhone?void 0:T.desktopAndTabletButton,right:M,...(0,A().Z)(o,g)}),render:e=>{const t=[{key:0,render:e=>(0,Z.jsx)(o(388284).Z,{enableActionSheetTitle:!0,...e}),items:pe().oA(y.map(((t,o)=>{const n={key:o,render:e=>(0,Z.jsx)(d().Z,{textWrap:!0,placement:oe().Placement.Left,disableTooltip:!t.tooltipMessage,renderTooltip:()=>t.tooltipMessage,render:o=>(0,Z.jsx)(v().Z,{...(0,A().Z)(e,o),disabled:t.disabled,title:t.title,icon:t.icon,style:{color:t.disabled?h.lightTextColor:h.text.primary},checkState:t.key===l})}),action:()=>{c(t.key,e),e.close()}};return n})))}];return(0,Z.jsx)(C().Z,{menuType:f.isPhone?P().o.ActionSheet:P().o.Popup,width:300,children:(0,Z.jsx)(ge().Z,{type:ge().i.Vertical,sections:t,initialFocus:f.isMobile?void 0:0})})}})})};const ye=function(e){let{icon:t,title:n,onClick:r,menuItemDisabled:a,toggleDisabled:l,tooltipMessage:c,disableTooltip:m,on:u}=e;const p=(0,i().Fy)(),g=(0,s().yK)((e=>({iconStyle:{width:16,height:16},desktopAndTabletButton:{marginLeft:0,marginRight:0,width:"auto",padding:"2px 0",margin:"0 10px"}})),[]);return(0,Z.jsx)(d().Z,{renderTooltip:()=>c,disableTooltip:m,render:e=>(0,Z.jsx)(v().Z,{buttonStyle:p.isPhone?void 0:g.desktopAndTabletButton,icon:null==t?void 0:t(g.iconStyle),title:n,right:(0,Z.jsx)(o(471645).Z,{on:u,onClick:r,disabled:l??a}),focused:!1,disabled:a,onClick:r,...e}),placement:oe().Placement.Left,textWrap:!0})};var be=()=>o(154186),Se=()=>o(905263);function ve(e){let{origin:t,onCloseClick:o}=e;const n=(0,s().yK)((e=>({tooltipStyle:{opacity:1},gotItButton:{border:"dark"===e.mode?`1px solid ${e.accentColors.gray[500]}`:`1px solid ${e.accentColors.gray[700]}`,borderRadius:6,display:"flex",justifyContent:"center",alignItems:"center",height:28,padding:"0px 8px"}})),[]),i=(0,Z.jsxs)("div",{children:[(0,Z.jsx)("div",{style:{opacity:.7},children:(0,Z.jsx)(a()._H,{id:"FormShareTooltip.content",defaultMessage:"When you’re done editing, click here to copy the form link to share."})}),(0,Z.jsx)("div",{style:{float:"right",marginTop:10},children:(0,Z.jsx)(be().Z,{onClick:o,style:n.gotItButton,children:(0,Z.jsx)(a()._H,{id:"FormShareTooltip.dismissButton",defaultMessage:"Got it"})})})]});return(0,Z.jsx)(Se().U,{origin:t,style:{width:250},hideCloseButton:!0,hideActions:!0,placementToOrigin:"bottom",alignmentToOrigin:oe().Alignment.End,pointerLength:30,contentStyle:n.tooltipStyle,pointerPosition:"85%",content:i,onCloseClick:o,shouldDismissUponOutsideClick:!0})}const xe=(0,a().vU)({anonymousFormSettingTooltip:{defaultMessage:"Form submissions will be anonymous",id:"FormShareMenu.CollectRespondentIdentity.tooltip"},anonymousFormSettingTooltipForPublicForms:{defaultMessage:"All submissions for public forms will be anonymous",id:"FormShareMenu.CollectRespondentIdentity.tooltipForPublicForms"},disabledPublishFormByTeamspace:{defaultMessage:"Disabled via teamspace settings",id:"FormShareMenu.disabledPublishFormByTeamspace"},disabledPublishFormByWorkspace:{defaultMessage:"Disabled via workspace settings",id:"FormShareMenu.disabledPublishFormByWorkspace"},disabledFormConfigurationPermissionTooltip:{defaultMessage:"You do not have permission to change this setting. Only users with full access can modify this form setting.",id:"FormShareMenu.DisabledFormConfigurationPermission.tooltip"},disabledFormConfigurationAnonymousSubmissionTooltip:{defaultMessage:"You do not have permission to change this setting. Only users with edit access can modify this form setting.",id:"FormShareMenu.DisabledFormConfigurationAnonymousSubmission.tooltip"},sharedToSpaceTooltip:{defaultMessage:"Workspace members with the link will be able to view and submit.",id:"FormShareMenu.sharedToSpace.tooltip"},sharedToWebTooltip:{defaultMessage:"Anyone with the link will be able to view and submit, no login required.",id:"FormShareMenu.sharedToWeb.tooltip"},closedFormTooltip:{defaultMessage:"No one will be able to view or submit this form.",id:"FormShareMenu.closedForm.tooltip"},notionBrandingDisabledTooltip:{defaultMessage:"Upgrade to remove Notion branding from the form",id:"FormShareMenu.notionBrandingDisabled.tooltip"},notionBrandingDisabledTooltipNonWorkspaceOwner:{defaultMessage:"Contact your workspace owner to upgrade to remove branding",id:"FormShareMenu.notionBrandingDisabled.tooltipNonWorkspaceOwner"},notionBrandingTooltip:{defaultMessage:"Remove Notion branding from the form",id:"FormShareMenu.notionBranding.tooltip"},embedSettingRowTitle:{defaultMessage:"Embed this form",id:"FormShareMenu.embedSettingRowTitle"},embedSettingRowTooltip:{defaultMessage:"Embed this form outside of Notion",id:"FormShareMenu.embedSettingRowTooltip"},submissionNoAccessTooltip:{defaultMessage:"After submitting the form, respondents will not have access to their submissions.",id:"FormShareMenu.submissionNoAccessTooltip"},submissionCanViewTooltip:{defaultMessage:"After submitting the form, respondents can view their submissions.",id:"FormShareMenu.submissionCanViewTooltip"},submissionCanCommentTooltip:{defaultMessage:"After submitting the form, respondents can comment on their submissions.",id:"FormShareMenu.submissionCanCommentTooltip"},submissionCanEditTooltip:{defaultMessage:"After submitting the form, respondents can edit their submissions.",id:"FormShareMenu.submissionCanEditTooltip"},submissionFullAccessTooltip:{defaultMessage:"After submitting the form, respondents will have full access to their submissions, including the ability to edit, delete, and share them.",id:"FormShareMenu.submissionFullAccessTooltip"},anonymousSubmissionPermissionsTooltip:{defaultMessage:"Turn off anonymous submissions to allow respondents to access their submissions",id:"FormShareMenu.anonymousSubmissionPermissionsTooltip"}});function we(e){let{formBlockStore:t,showCompactDesktopHeader:o}=e;const s=(0,F().Y$)(),l=(0,i().Fy)(),m=(0,i().O7)(),u=(0,n.useRef)(null),p=(0,r().VK)((()=>s.formShareMenuButtonPopupStore),[s]),g=(0,r().VK)((()=>{var e;const o=t.getCreatedById(),n=null===(e=s.collectionViewStore())||void 0===e?void 0:e.id,i=o===m.currentUser.id,r=ie().default.state.open;return!(!i||r||ae().Z.state.openTooltip!==n)&&q().default.isVisible(ue().FORMS_SHARE_CALLOUT_KEY)}),[m,t,s]),f=(0,n.useCallback)((()=>{b().N0({environment:m}),z().Gi(m,ue().FORMS_SHARE_CALLOUT_KEY)}),[m]);return(0,r().VK)((()=>(0,V().Sr)(m)),[m])?null:(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(x().ZP,{popupType:l.isPhone?x().Z4.SlideUp:x().Z4.Popup,style:l.isPhone?{height:j().DQ,maxHeight:j().DQ}:void 0,forceInitialInbound:!0,buttonPopupStore:p,renderOrigin:e=>(0,Z.jsx)(d().Z,{disableTooltip:l.isMobile||!o,renderTooltip:()=>(0,Z.jsx)(a()._H,{defaultMessage:"Share form",id:"collectionViewBlock.formEditorView.shareForm"}),render:t=>(0,Z.jsx)(_().Z,{ref:u,style:{marginLeft:6},...(0,A().Z)(t,e),children:l.isMobile||o?(0,Z.jsx)(a()._H,{defaultMessage:"Share",id:"collectionViewBlock.formEditorView.shareFormMobile"}):(0,Z.jsx)(a()._H,{defaultMessage:"Share form",id:"collectionViewBlock.formEditorView.shareForm"})})}),originGap:8,render:e=>(0,Z.jsx)(Te,{formBlockStore:t,parent:e}),onClick:()=>{(0,c().j)({environment:m,event:{eventName:"share_form_clicked",eventProperties:{form_id:t.id}}})},onDismiss:()=>p.reset(),onClose:()=>p.reset()}),g&&(0,Z.jsx)(ve,{origin:u,onCloseClick:f})]})}function Te(e){let{formBlockStore:t,parent:o}=e;const s=(0,i().Fy)(),a=(0,N().E)("enable_embeddable_sites_for_space"),l=(0,N().E)("forms_submission_permissions"),{formUrl:d,isFormPublic:c,isFormClosed:u}=(0,r().VK)((()=>({formUrl:(0,m().sP)(t),isFormPublic:t.getIsFormPublic(),isFormClosed:t.getIsFormClosed()})),[t]),p=(0,r().VK)((()=>se.state.formShareMenuType),[]),g=u?null:(0,Z.jsxs)(Z.Fragment,{children:[!c&&l&&(0,Z.jsx)(Ie,{formBlockStore:t}),c&&(0,Z.jsx)(Be,{formBlockStore:t}),(0,Z.jsx)(Fe,{formBlockStore:t}),a&&c&&(0,Z.jsx)(Ce,{})]}),f=(0,i().O7)();(0,n.useEffect)((()=>{h().ZH({preventDismissMobileKeyboard:!0,environment:f}),y().clear({preventDismissMobileKeyboard:!0,environment:f})}),[f]);let b={menuType:P().o.Popup,maxHeight:"90vh",width:480};return s.isPhone&&(b={menuType:P().o.Modal,right:(0,Z.jsx)(M().DoneMenuText,{}),onClickRight:o.close,paddingTop:0}),(0,Z.jsx)(C().Z,{...b,className:I().IG,children:(0,Z.jsx)(w().Z,{debugName:"ShareFormContainer",capture:!0,allowEsc:!0,children:"initial"===p?(0,Z.jsxs)("div",{style:{paddingBottom:12},children:[(0,Z.jsx)(_e,{formBlockStore:t}),g,(0,Z.jsx)(ke,{formUrl:d})]}):(0,Z.jsx)(Me,{formBlockStore:t})})})}function Ce(){const e=(0,s().Fg)();return(0,Z.jsx)(d().Z,{renderTooltip:()=>B().Z.formatMessage(xe.embedSettingRowTooltip),disableTooltip:!1,render:t=>(0,Z.jsx)(v().Z,{icon:(0,K().z)({width:16,height:16}),title:(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(a()._H,{...xe.embedSettingRowTitle}),(0,Z.jsx)(k().Z,{newBadgeKey:"publish_site_settings_embed_page",didUserEngage:!1,style:{display:"inline"}})]}),focused:!1,disabled:!1,buttonStyle:{marginLeft:0,marginRight:0,width:"auto",padding:"2px 0",margin:"0 10px"},right:(0,D().o)({height:12,width:12,marginLeft:6,fill:e.icon.tertiary}),onClick:()=>{se.setState({...se.state,formShareMenuType:"embed"})},...t}),placement:oe().Placement.Left,textWrap:!0})}function Me(e){const{formBlockStore:t}=e,{isMobile:o}=(0,i().Fy)(),n=(0,te().Z)(),r=(0,s().yK)((()=>({container:{display:"flex",flexDirection:"column",marginTop:14,marginBottom:o?0:16,paddingLeft:n,paddingRight:n}})),[n,o]);return(0,Z.jsxs)("div",{children:[(0,Z.jsx)(Ve,{handleBackButtonClick:()=>{se.setState({...se.state,formShareMenuType:"initial"})}}),(0,Z.jsx)("div",{style:r.container,children:(0,Z.jsx)(ee().O,{currentBlockStore:t})})]})}function ke(e){const{formUrl:t}=e,[o,r]=(0,n.useState)(!1),c=(0,i().O7)(),m=(0,i().MO)(),u=(0,s().yK)((e=>({container:{display:"flex",flexDirection:"row",alignItems:"center",margin:12,marginTop:8,marginBottom:0,height:m?40:30},urlInputWrapper:{position:"relative",flexGrow:1,height:m?40:30},urlInput:{borderTopLeftRadius:6,borderBottomLeftRadius:6,borderTopRightRadius:0,borderBottomRightRadius:0,boxShadow:"none",borderWidth:1,borderRightWidth:0,borderStyle:"solid",borderColor:e.outlineButtonBorder,padding:0,height:"100%",fontSize:m?16:14,backgroundColor:e.contentBackground},urlInputGradient:{position:"absolute",top:1,right:0,background:`linear-gradient(90deg, \n\t\t\t\t\t${e.contentBackgroundTransparent} 0%, \n\t\t\t\t\t${e.contentBackground} 90%)`,height:28,width:36},urlInputInner:{padding:6,paddingRight:0,backgroundColor:"transparent",border:"none"},copyLinkButton:{height:"100%",borderTopLeftRadius:0,borderBottomLeftRadius:0,borderTopRightRadius:6,borderBottomRightRadius:6},linkIcon:{width:m?22:14,height:m?22:14,color:e.icon.secondary,marginRight:6}})),[m]);return(0,Z.jsxs)("div",{style:u.container,children:[(0,Z.jsxs)("div",{style:u.urlInputWrapper,children:[(0,Z.jsx)(T().Z,{style:u.urlInput,inputStyle:u.urlInputInner,value:t,readOnly:!0,disabled:!0}),(0,Z.jsx)("div",{style:u.urlInputGradient})]}),(0,Z.jsx)(d().Z,{forceVisibleState:!!o||void 0,disableTooltip:!o,renderTooltip:()=>(0,Z.jsx)(a()._H,{defaultMessage:"Copied",id:"database.collectionViewBlock.formEditorShareButton.copiedLinkToForm.tooltip"}),render:e=>(0,Z.jsxs)(l().Z,{style:u.copyLinkButton,onClick:async()=>{r(!0);(await f().F.clipboardActions.load()).copyString({stringValue:t,environment:c,copiedMessage:m?me().Y.copiedLinkToForm:void 0}),setTimeout((()=>{r(!1)}),1e3)},...e,children:[(0,H().N)(u.linkIcon),(0,Z.jsx)(a()._H,{defaultMessage:"Copy form link",id:"database.collectionViewBlock.formEditorShareButton.copyFormLink"})]})})]})}function _e(e){let{formBlockStore:t}=e;const o=(0,i().O7)(),l=(0,s().Fg)(),d=(0,F().Y$)(),{canEditPermissions:u,collectionSchema:p}=(0,r().VK)((()=>{var e;const t=d.collectionViewBlockStore();return{canEditPermissions:!!t&&t.canEditMembership(),collectionSchema:null===(e=d.collectionStore())||void 0===e?void 0:e.getSchema()}}),[d]),g=(0,R().E)({store:t}),f=(0,r().VK)((()=>g.disabled&&"team"===g.disabledBy?xe.disabledPublishFormByTeamspace:g.disabled&&"space"===g.disabledBy?xe.disabledPublishFormByWorkspace:void 0),[g]),{currentSpaceStore:h}=(0,r().Kw)(ne().default),y=(0,s().yK)((e=>({permissionOption:{display:"flex",alignItems:"center"},yellowBadge:{background:"light"===e.mode?e.accentColors.yellow[50]:e.accentColors.yellow[200],color:"light"===e.mode?e.accentColors.yellow[500]:e.accentColors.yellow[600]},container:{marginTop:10}})),[]),b=(0,r().VK)((()=>t.getIsFormPublic()),[t]),v=(0,r().VK)((()=>t.getIsFormClosed()),[t]),x=(0,r().VK)((()=>h?(0,E().rn)(o,h):""),[o,h]),w=(0,r().VK)((()=>{if(t)return X().mk({store:t,environment:o})}),[o,t]),T=(0,r().VK)((()=>null==w?void 0:w.mostPermissivePublicItem),[w]),C=(0,n.useCallback)((e=>{if(!T)return;const{permissionItem:n}=T;(0,Y().iK)({oldPermissionItem:n,newPermissionItem:{...n,...e},wasInherited:!1,environment:o,store:t,sudoModeStore:void 0,location:void 0})}),[o,T,t]);return(0,Z.jsx)("div",{style:y.container,children:(0,Z.jsx)(he,{disabled:!u,icon:W().v,title:(0,Z.jsx)(a()._H,{id:"formEditSettings.formPermissions.title",defaultMessage:"Who can fill out"}),disableTooltip:u,tooltipMessage:u?void 0:B().Z.formatMessage(xe.disabledFormConfigurationPermissionTooltip),selectedKey:(0,m().Nb)(b,v),options:[{key:"shared_to_space",tooltipMessage:B().Z.formatMessage(xe.sharedToSpaceTooltip),title:(0,Z.jsx)(a()._H,{id:"formEditSettings.formPermissions.spacePermission",defaultMessage:"Anyone at {spaceName} with link",values:{spaceName:x}})},{key:"shared_to_web",disabled:g.disabled,tooltipMessage:f?B().Z.formatMessage(f):B().Z.formatMessage(xe.sharedToWebTooltip),title:(0,Z.jsxs)("div",{style:y.permissionOption,children:[(0,Z.jsx)(a()._H,{id:"formEditSettings.formPermissions.publicPermission",defaultMessage:"Anyone on the web with link"}),(0,Z.jsx)(S().Z,{content:(0,Z.jsx)(a()._H,{id:"formEditSettings.formPermissions.publicBadge",defaultMessage:"Public"}),style:y.yellowBadge})]})},{key:"closed",tooltipMessage:B().Z.formatMessage(xe.closedFormTooltip),title:(0,Z.jsxs)("div",{style:y.permissionOption,children:[(0,Z.jsx)(a()._H,{id:"formEditSettings.formPermissions.noAccess",defaultMessage:"No access"}),(0,Z.jsx)(S().Z,{content:(0,Z.jsx)(a()._H,{id:"formEditSettings.formPermissions.closedBadge",defaultMessage:"Closed"})})]})}],onChange:async e=>{const n=(0,m().Nb)(b,v);switch(e){case"shared_to_space":ue().changeFormClosedState({environment:o,formBlockStore:t,isClosed:!1}),C({role:"none"});break;case"shared_to_web":await ue().maybeAlertAboutUnsupportedPublicQuestions({environment:o,formBlockStore:t,collectionSchema:p,theme:l,onAccept:()=>{ue().changeFormClosedState({environment:o,formBlockStore:t,isClosed:!1}),J().Fo({environment:o,type:"form",store:t,header:{hideBreadcrumbs:!0,hideSearch:!0}}),C({role:"reader",allow_duplicate:!1})}});break;case"closed":ue().changeFormClosedState({environment:o,formBlockStore:t,isClosed:!0})}(0,c().j)({environment:o,event:{eventName:"change_form_permissions",eventProperties:{form_id:t.id,old_permissions:n,new_permissions:e}}})}})})}function Fe(e){let{formBlockStore:t}=e;const o=(0,i().O7)(),n=(0,a().YB)(),s=(0,F().Y$)(),l=(0,r().VK)((()=>s.permissionScopesStore.state.canConfigureBlock),[s]),d=(0,r().VK)((()=>t.getIsFormAnonymousSubmissionEnabled()),[t]),m=(0,r().VK)((()=>t.getIsFormPublic()),[t]),u=(0,r().VK)((()=>l?m?xe.anonymousFormSettingTooltipForPublicForms:d?xe.anonymousFormSettingTooltip:void 0:xe.disabledFormConfigurationAnonymousSubmissionTooltip),[l,m,d]);return(0,Z.jsx)(ye,{icon:L,title:(0,Z.jsx)(a()._H,{id:"formShareMenu.anonymousFormToggle.title",defaultMessage:"Anonymous responses"}),menuItemDisabled:!l||m,on:!!m||d,onClick:()=>{ue().toggleAnonymousFormSubmissionState({environment:o,formBlockStore:t}),(0,c().j)({environment:o,event:{eventName:"form_anonymous_responses_toggled",eventProperties:{form_id:t.id,is_anonymous:!d}}})},tooltipMessage:u?n.formatMessage(u):void 0,disableTooltip:!u})}function Ie(e){let{formBlockStore:t}=e;const o=(0,i().O7)(),n=(0,F().Y$)(),s=(0,a().YB)(),l=(0,r().VK)((()=>{const e=n.collectionViewBlockStore();return!!e&&e.canEditMembership()}),[n]),d=(0,r().VK)((()=>t.getIsFormAnonymousSubmissionEnabled()),[t]),m=(0,r().VK)((()=>(0,p().lm)(t.getFormSubmissionPermissions(),d,t.getIsFormPublic())),[t,d]),u=(0,r().VK)((()=>l?d?xe.anonymousSubmissionPermissionsTooltip:void 0:xe.disabledFormConfigurationPermissionTooltip),[l,d]);return(0,Z.jsx)(he,{disabled:!l||d,icon:Q().I,title:(0,Z.jsx)(a()._H,{id:"formEditSettings.formSubmissionPermission.title",defaultMessage:"Access to submission"}),disableTooltip:!u,tooltipMessage:u?s.formatMessage(u):void 0,selectedKey:m,options:[{key:"none",tooltipMessage:B().Z.formatMessage(xe.submissionNoAccessTooltip),title:(0,Z.jsx)(a()._H,{id:"formEditSettings.formSubmissionPermission.noAccess",defaultMessage:"No access"})},{key:"reader",tooltipMessage:B().Z.formatMessage(xe.submissionCanViewTooltip),title:(0,Z.jsx)(a()._H,{id:"formEditSettings.formSubmissionPermission.canView",defaultMessage:"Can view"})},{key:"comment_only",tooltipMessage:B().Z.formatMessage(xe.submissionCanCommentTooltip),title:(0,Z.jsx)(a()._H,{id:"formEditSettings.formSubmissionPermission.canComment",defaultMessage:"Can comment"})},{key:"read_and_write",tooltipMessage:B().Z.formatMessage(xe.submissionCanEditTooltip),title:(0,Z.jsx)(a()._H,{id:"formEditSettings.formSubmissionPermission.canEdit",defaultMessage:"Can edit"})},{key:"editor",tooltipMessage:B().Z.formatMessage(xe.submissionFullAccessTooltip),title:(0,Z.jsx)(a()._H,{id:"formEditSettings.formSubmissionPermission.fullAccess",defaultMessage:"Full access"})}],onChange:e=>{ue().changeFormSubmissionPermissions({environment:o,formBlockStore:t,permissions:e}),(0,c().j)({environment:o,event:{eventName:"change_form_submission_permissions",eventProperties:{form_id:t.id,old_permissions:m,new_permissions:e}}})}})}const je=200;function Be(e){var t;let{formBlockStore:o}=e;const n=(0,i().O7)(),s=(0,r().VK)((()=>o.getSiteStore()),[o]),l=(0,G().W)(),d=(0,ce().oo)({name:"unbranded_forms",spaceId:l,userId:null===(t=n.currentUser)||void 0===t?void 0:t.id}),c=null==d?void 0:d.upsell,m=(0,r().VK)((()=>(0,E().Fn)(n)),[n]),u=(0,r().VK)((()=>{var e;return!!s&&!(null!==(e=s.getHeader())&&void 0!==e&&e.hideWatermark)}),[s]);if(!s)return null;const p=(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(Pe,{}),(0,Z.jsx)("div",{style:{width:je},children:d?(0,ce().V5)(d,{upsell:()=>B().Z.formatMessage(xe.notionBrandingDisabledTooltip),blocked:()=>B().Z.formatMessage(xe.notionBrandingDisabledTooltipNonWorkspaceOwner),available:()=>B().Z.formatMessage(xe.notionBrandingTooltip)}):(0,Z.jsx)("div",{})})]});return(0,Z.jsx)(ye,{icon:U().h,title:(0,Z.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,Z.jsx)(a()._H,{id:"formShareMenu.publicForms.notionBranding.title",defaultMessage:"Notion branding"}),"upsell"===(null==d?void 0:d.type)&&c&&(0,Z.jsx)("div",{style:{marginLeft:10},children:(0,Z.jsx)(de().R,{upsell:c,analyticsName:"forms_notion_branding",disableTooltip:!0})})]}),toggleDisabled:!(0,g()._e)(d),menuItemDisabled:!m,on:u||!(0,g()._e)(d),onClick:()=>{"upsell"===(null==d?void 0:d.type)&&"product"===(null==c?void 0:c.type)?le().y(n,{upsell:c,from:"forms_notion_branding"}):ue().toggleNotionBrandingState({environment:n,formBlockStore:o})},tooltipMessage:p})}function Pe(){const e=(0,s().Fg)(),t=(0,a().YB)(),o=(0,s().yK)((e=>({notionBrandingBaseImage:{width:je,borderRadius:4},brandingPreview:{display:"flex",position:"absolute",top:"36%",left:"44%",transform:"translateX(-50%)"},linkIcon:{width:17,height:void 0,marginRight:4,color:e.icon.primary}})),[]);return(0,Z.jsxs)("div",{style:{paddingTop:4},children:[(0,Z.jsx)("img",{src:"light"===e.mode?u().Z.images.forms.formsNotionBrandingTooltipPng:u().Z.images.forms.formsNotionBrandingTooltipDarkPng,alt:t.formatMessage({id:"FormShareMenu.MadeWithNotion.accessibility.label",defaultMessage:"Made with Notion"}),style:o.notionBrandingBaseImage}),(0,Z.jsxs)("div",{style:o.brandingPreview,children:[(0,H().N)(o.linkIcon),(0,Z.jsx)(Ae,{})]})]})}function Ae(){const e=(0,s().Fg)(),t=(0,s().yK)((e=>({watermarkButton:{marginLeft:8,color:e.regularTextColor},notionLogo:{width:14,height:14,marginLeft:6,fill:e.regularTextColor}})),[]);return(0,Z.jsxs)(l().Z,{style:t.watermarkButton,children:[(0,Z.jsx)(a()._H,{defaultMessage:"Made with",id:"topbar.publicPage.cta.label.madeWithNotion"}),"light"===e.mode?(0,U().h)(t.notionLogo):(0,O().N)(t.notionLogo)]})}function Ve(e){const t=(0,s().yK)((e=>({container:{display:"flex",padding:"0 12px 0 8px",height:40,borderBottom:`1px solid ${e.stroke.secondary}`}})),[]);return(0,Z.jsx)("div",{style:t.container,children:(0,Z.jsx)($().xE,{onClick:e.handleBackButtonClick,titleMessage:(0,Z.jsx)(a()._H,{...xe.embedSettingRowTitle})})})}const Ee=function(e){const{showCompactDesktopHeader:t,collectionContextStore:n}=e,u=(0,i().O7)(),p=(0,r().VK)((()=>n.collectionViewStore()),[n]),g=(0,r().VK)((()=>{const e=n.collectionViewStore();return null==e?void 0:e.getFormat().form_block_pointer}),[n]),f=(0,r().VK)((()=>{if(p&&g)return o(826955).G.createChildStore(p,g)}),[g,p]),h=(0,r().VK)((()=>!!f&&f.getIsFormPublic()),[f]),y=(0,s().yK)((e=>({container:{display:"flex",flexDirection:"row",alignItems:"center"},openFormButton:{marginLeft:6,height:28,paddingLeft:10},copyLinkButton:{height:28,width:28,borderTopLeftRadius:0,borderBottomLeftRadius:0,borderLeftWidth:0},previewIcon:{width:14,height:14}})),[]);return p&&f?(0,Z.jsxs)("div",{style:y.container,children:[(0,Z.jsx)(d().Z,{disableTooltip:!t,renderTooltip:()=>(0,Z.jsx)(a()._H,{defaultMessage:"Preview",id:"collectionViewBlock.formEditorView.previewForm"}),render:e=>(0,Z.jsxs)(l().Z,{...e,style:y.openFormButton,onClick:()=>{(0,c().j)({environment:u,event:{eventName:"preview_form",eventProperties:{form_id:f.id,is_form_public:h}}});const e=(0,m().sP)(f,!0);h?o(752127).D({url:e,environment:u}):o(497065).c4({environment:u,url:e})},children:[(0,o(109806).c)(y.previewIcon),t?null:(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(o(396439).Z,{size:6}),(0,Z.jsx)(a()._H,{defaultMessage:"Preview",id:"collectionViewBlock.formEditorView.previewForm"})]})]})}),(0,Z.jsx)(we,{formBlockStore:f,showCompactDesktopHeader:t})]}):null}},659796:(e,t,o)=>{o.d(t,{Y:()=>n});const n=(0,o(788860).vU)({copiedLinkToForm:{id:"FormActionButtons.copiedLinkToForm",defaultMessage:"Copied link to form"}})},12530:(e,t,o)=>{o.d(t,{N:()=>r,Z:()=>a});o(667294);var n=o(785893);const i={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:16,height:16,fontSize:10,textAlign:"center",fontWeight:o(707513).Ue.semibold,borderRadius:4,color:o(568017).ZP.white,position:"static",marginLeft:6,WebkitFontSmoothing:"auto"};let r=function(e){return e[e.Red=0]="Red",e[e.Gray=1]="Gray",e}({});function s(e){return!!e&&e>0}const a=function(e){let{count:t,color:a,style:d,numberStyle:c,fadeIn:m}=e;const u=a===r.Red,p=(0,o(846550).yK)((e=>({badge:{...i,...d,...(t??0)>99&&{width:void 0,padding:2},background:u?e.redBadgeBackground:e.lightIconColor,...m&&{transition:"opacity 0.1s",opacity:s(t)?1:0}}})),[t,m,u,d]);return m||s(t)?(0,n.jsx)("div",{style:p.badge,children:(0,n.jsx)(l,{count:t,numberStyle:c})}):null};function l(e){let{count:t,numberStyle:o}=e;return t?1===t?(0,n.jsx)("span",{style:{marginLeft:-.5,...o},children:"1"}):t>99?(0,n.jsx)("span",{style:{letterSpacing:-.5,...o},children:"99+"}):t>9?(0,n.jsx)("span",{style:{letterSpacing:-.5,marginLeft:-.5,...o},children:t}):(0,n.jsx)("span",{style:{...o},children:t}):null}},690277:(e,t,o)=>{o.d(t,{E:()=>l});var n=()=>o(142735),i=()=>o(696459),r=()=>o(239482),s=()=>o(926434),a=()=>o(876822);function l(e){let{store:t}=e;return(0,n().VK)((()=>{const e=(0,s().B)({blockId:t.id,setting:"publicAccess"});if((0,i().$K)(e))return e;const o=a().default.state.currentSpaceStore,n=(0,r().VP)(t);return n?{disabled:Boolean(n.getDisablePublicAccess()),disabledBy:"team"}:!n&&null!=o&&o.getDisablePublicAccess()?{disabled:!0,disabledBy:"space"}:{disabled:!1}}),[t])}},356140:(e,t,o)=>{o.d(t,{W:()=>r});var n=()=>o(142735),i=()=>o(876822);function r(){const{currentSpaceStore:e}=(0,n().VK)((()=>i().default.state),[]);return null==e?void 0:e.id}},584006:(e,t,o)=>{o.d(t,{U:()=>d});o(667294);var n=()=>o(846550),i=()=>o(92175),r=()=>o(788860),s=()=>o(67961),a=o(785893);function l(e){const{title:t,icon:o,iconStyle:i,disabled:l}=e,d=(0,n().yK)((e=>({container:{display:"flex",alignItems:"center",gap:6},icon:{height:16,width:16,fill:e.icon.secondary,...i},text:{color:l?e.text.secondary:void 0}})),[i,l]);return(0,a.jsxs)("div",{style:d.container,children:[o&&o(d.icon),(0,a.jsx)(s().Z,{style:d.text,children:(0,a.jsx)(r()._H,{...t})})]})}function d(e){const{title:t,icon:o,iconStyle:r,right:s,disabled:d,onClick:c,style:m,badge:u}=e,p=(0,n().yK)((()=>({container:{minHeight:32,paddingLeft:8,paddingRight:8,width:"100%",paddingTop:2,paddingBottom:2,...m},titleContainer:{display:"flex",flex:1}})),[m]);return(0,a.jsxs)(i().Z,{disabled:d,onClick:c,style:p.container,children:[(0,a.jsxs)("div",{style:p.titleContainer,children:[(0,a.jsx)(l,{title:t,icon:o,iconStyle:r,disabled:d}),u]}),s]})}},689653:(e,t,o)=>{o.d(t,{O:()=>F});var n=o(667294),i=()=>o(219727),r=()=>o(142735),s=()=>o(846550),a=()=>o(788860),l=()=>o(707513),d=()=>o(959137),c=()=>o(212493),m=()=>o(291198),u=()=>o(661297),p=()=>o(471645),g=()=>o(654133),f=()=>o(627990),h=()=>o(594546),y=()=>o(527278),b=()=>o(733047),S=()=>o(53650),v=()=>o(998901),x=()=>o(998470),w=()=>o(479875),T=()=>o(772084),C=()=>o(457088),M=()=>o(584006),k=o(785893);const _=(0,a().vU)({showTitle:{id:"embedSettingsContent.showPageTitle.toggle",defaultMessage:"Show page title"},showFormTitle:{id:"embedSettingsContent.showFormTitle.toggle",defaultMessage:"Show form title"},showTitleTooltip:{id:"embedSettingsContent.showTitleTooltip",defaultMessage:"Show page title & icon in the embedded view"}});function F(e){const t=(0,i().O7)(),{currentBlockStore:o}=e,F=(0,r().VK)((()=>{var e;if(o)return null===(e=(0,T().gR)(o))||void 0===e?void 0:e.getSiteStore()}),[o]),I=(0,r().VK)((()=>{var e;return null==F||null===(e=F.getSettings())||void 0===e?void 0:e.embedSettings}),[F]),j=(0,r().VK)((()=>o?(0,w().$)({store:o,embedded:!0,pageVisitSource:void 0}).url:""),[o]),B=(0,r().VK)((()=>j?`\n\t\t\t\t<iframe src="${j}"\n\t\t\t\t\twidth="100%"\n\t\t\t\t\theight="600"\n\t\t\t\t\tframeborder="0"\n\t\t\t\t\tallowfullscreen\n\t\t\t\t/>\n\t\t\t\t`.trim().replace(/\s+/g," "):""),[j]),P=n.useCallback((async()=>{const e=await d().F.clipboardActions.load();e.copyString({environment:t,stringValue:B,copiedMessage:e.clipboardMessages.copiedLinkToClipboard}),(0,h().j)({environment:t,event:{eventName:"copy_embed_code",eventProperties:{target_block_id:o.id}}})}),[B,t,o.id]),A=n.useCallback((()=>{F&&(0,x().cy)({environment:t,siteStore:F,embedSettings:{hideTitle:!(null!=I&&I.hideTitle)}})}),[F,null==I?void 0:I.hideTitle,t]),V=(0,r().VK)((()=>o.isFormBlock()?_.showFormTitle:_.showTitle),[o]),E=(0,s().yK)((e=>({title:{fontWeight:l().Ue.bold,fontSize:25,marginTop:20},copyIcon:{width:16,height:16,marginLeft:0,marginRight:6},primaryButton:{height:32,marginLeft:"auto",marginRight:0,width:"fit-content"},titleIcon:{width:16,height:16},container:{paddingLeft:8,paddingRight:8}})),[]);return(0,k.jsxs)(c().jX,{direction:"column",gap:14,style:E.container,children:[(0,k.jsx)(g().Z,{renderTooltip:()=>y().Z.formatMessage(_.showTitleTooltip),disableTooltip:!1,render:e=>(0,k.jsx)("div",{...e,children:(0,k.jsx)(M().U,{title:V,icon:S().V,iconStyle:E.titleIcon,right:(0,k.jsx)(p().Z,{on:!Boolean(null==I?void 0:I.hideTitle),onClick:A}),disabled:!1,onClick:A,style:{marginBottom:-6}})}),placement:v().Placement.Bottom,alignment:f().v2.Center,textWrap:!0,style:{maxWidth:C().SITE_SETTINGS_TOOLTIP_WIDTH}}),(0,k.jsx)(m().Z,{disabled:!0,textarea:!0,textareaSubmitOnEnter:!1,autosize:!0,autosizeMinHeight:50,showClearButton:!1,readOnly:!0,value:B,textareaElementAttributes:{cols:50}}),(0,k.jsx)(u().Z,{onClick:P,style:E.primaryButton,icon:e=>(0,b().W)({...e,...E.copyIcon}),children:(0,k.jsx)(a()._H,{id:"embedSettingsContent.copyEmbedCode",defaultMessage:"Copy code"})})]})}},787093:(e,t,o)=>{o.d(t,{Z:()=>r});var n=()=>o(219727),i=()=>o(142735);function r(){const e=(0,n().O7)();return(0,i().VK)((()=>e.WindowSizeStore.getSafePaddingLeftCSS(8)),[e])}},974442:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o(263184).default.createValue({open:!1},{name:"ConfirmOverwriteModalStore"})},808282:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{openTooltip:void 0}}}const i=new n},779522:(e,t,o)=>{o.d(t,{Z:()=>i});const n=new(o(168469).q)((e=>{let{spaceId:t}=e;return t}),(async function(e,t){var n;let{spaceId:i}=t;const r=await Promise.resolve().then(o.bind(o,824462)),s=await r.callApi({eventName:"getInternalDomains",environment:e,data:{spaceId:i}});return"success"===s.type?null===(n=s.data)||void 0===n?void 0:n.internalDomainsWithInfo:void 0}));o(947115).exposeDebugValue("InternalDomainsStore",n);const i=n},994875:(e,t,o)=>{o.r(t),o.d(t,{default:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{discussionIdToExpansionStartPointMap:{}}}}const i=new n},184441:(e,t,o)=>{o.d(t,{default:()=>r});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1,isShowingLoadingState:!1}}updateUserCustomizations(e,t){this.state.open&&this.state.collectionTemplate&&this.setState({...this.state,userCustomizations:{...this.state.userCustomizations,[e]:t}})}updateCollectionTemplate(e){this.state.open&&this.state.collectionTemplate&&this.setState({...this.state,collectionTemplate:e})}updatePreviewCollectionViewTemplateId(e){this.state.open&&this.state.collectionTemplate&&this.setState({...this.state,previewCollectionViewTemplateId:e})}getParentStore(){return this.state.open?this.state.parentStore:void 0}getShouldShowExpandedTemplateList(){return this.state.open&&this.state.shouldShowExpandedTemplateList}setShouldShowExpandedTemplateList(e){this.state.open&&this.setState({...this.state,shouldShowExpandedTemplateList:e})}close(e){var t,o;this.state.open&&(null===(t=(o=this.state).onClose)||void 0===t||t.call(o,e),this.setState({open:!1,isShowingLoadingState:!1}))}reset(){this.setState(this.getInitialState())}}const i=new n;(0,o(947115).exposeDebugValue)("InitializeWorkflowTemplateModalStore",i);const r=i},809461:(e,t,o)=>{o.d(t,{w:()=>r});o(667294);var n=o(785893);const i={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M10 7c-1.654 0-3 1.346-3 3s1.346 3 3 3 3-1.346 3-3-1.346-3-3-3m0 4.5c-.827 0-1.5-.673-1.5-1.5s.673-1.5 1.5-1.5 1.5.673 1.5 1.5-.673 1.5-1.5 1.5"}),(0,n.jsx)("path",{d:"M18.307 8.445a.7.7 0 0 0-.57-.56l-1.643-.283-.056-.138.973-1.378a.7.7 0 0 0 .008-.795 8.5 8.5 0 0 0-2.244-2.264.7.7 0 0 0-.8.006l-1.36.96-.138-.056-.289-1.661a.7.7 0 0 0-.554-.567 8.5 8.5 0 0 0-3.188-.015.7.7 0 0 0-.562.569l-.282 1.643-.139.056-1.377-.971a.7.7 0 0 0-.794-.01q-.68.457-1.284 1.06a8.5 8.5 0 0 0-.98 1.185.7.7 0 0 0 .005.799l.961 1.36q-.03.069-.057.139l-1.66.287a.7.7 0 0 0-.569.555 8.5 8.5 0 0 0-.015 3.188.7.7 0 0 0 .57.561l1.643.283.056.14-.971 1.375a.7.7 0 0 0-.01.793 8.6 8.6 0 0 0 2.244 2.267.7.7 0 0 0 .8-.006l1.36-.961.14.058.286 1.66a.7.7 0 0 0 .555.568 8.5 8.5 0 0 0 3.188.015.7.7 0 0 0 .561-.57l.283-1.643q.07-.027.138-.056l1.378.972a.7.7 0 0 0 .795.008 8.6 8.6 0 0 0 2.264-2.243.7.7 0 0 0-.006-.8l-.961-1.36.058-.138 1.66-.289a.7.7 0 0 0 .567-.554q.159-.806.16-1.656a8.5 8.5 0 0 0-.144-1.533m-1.314 2.45-1.567.271a.7.7 0 0 0-.545.47c-.09.27-.189.508-.303.726a.7.7 0 0 0 .05.728l.904 1.28a7 7 0 0 1-1.22 1.207l-1.297-.915a.7.7 0 0 0-.716-.055 5 5 0 0 1-.734.298.7.7 0 0 0-.476.548l-.267 1.549a7.2 7.2 0 0 1-1.717-.009l-.27-1.567a.7.7 0 0 0-.47-.545 5 5 0 0 1-.728-.303.69.69 0 0 0-.726.05l-1.281.904a7.2 7.2 0 0 1-1.208-1.22l.916-1.297a.7.7 0 0 0 .054-.717 5 5 0 0 1-.297-.732.7.7 0 0 0-.549-.477l-1.548-.267a7.2 7.2 0 0 1 .009-1.717l1.567-.27a.7.7 0 0 0 .545-.468c.09-.273.19-.512.303-.731a.7.7 0 0 0-.05-.726l-.904-1.28a7.2 7.2 0 0 1 1.22-1.208l1.298.916c.21.15.486.17.716.054a5 5 0 0 1 .732-.297.7.7 0 0 0 .478-.549l.266-1.548a7.3 7.3 0 0 1 1.717.008l.271 1.568a.7.7 0 0 0 .468.545c.271.09.51.19.73.303a.7.7 0 0 0 .725-.05l1.281-.904a7.2 7.2 0 0 1 1.208 1.22l-.916 1.298a.7.7 0 0 0-.054.716c.117.233.216.48.297.733.08.25.291.433.548.477l1.549.267a7 7 0 0 1-.009 1.716"})]})},r=(0,o(827282).IU)("gear",i)}}]);