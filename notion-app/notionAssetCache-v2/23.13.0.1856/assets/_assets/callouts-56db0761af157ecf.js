"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[16006],{603867:(e,t,n)=>{n.r(t),n.d(t,{ConfigureRetentionAnnouncement:()=>S});var r=n(667294),i=()=>n(219727),o=()=>n(142735),a=()=>n(18902);const s=(0,n(827282).CZ)("infoCircleFill",{default:{loader:()=>n.e(35903).then(n.bind(n,535903))},small:{loader:()=>n.e(49058).then(n.bind(n,449058))},mini:{loader:()=>n.e(39182).then(n.bind(n,539182))},large:{loader:()=>n.e(4328).then(n.bind(n,104328))}});var c=()=>n(429892),l=()=>n(788860),u=()=>n(269299),d=()=>n(348141),m=()=>n(228772),p=()=>n(907337),_=()=>n(876822),g=()=>n(838266),f=n(785893);const v=(0,l().vU)({title:{defaultMessage:"Configure data retention settings",id:"sidebar.configureRetention.title"},body:{defaultMessage:"Starting August 19th, pages in Trash will be automatically deleted after {duration}",id:"sidebar.configureRetention.body"},postLaunchBody:{defaultMessage:"Pages in Trash will be automatically deleted after {duration}",id:"sidebar.configureRetention.postLaunchBody"},button:{defaultMessage:"Configure",id:"sidebar.configureRetention.button"}});function S(e){const t=(0,i().O7)(),n=(0,l().YB)(),S=(0,o().VK)((()=>_().default.state.currentUserSettingsStore),[]),b=(0,m().r)(),y=(0,o().VK)((()=>(0,a().Tv)(null==b?void 0:b.getModel())/1e3),[b]),h=(0,r.useCallback)((()=>{S&&(u().createAndCommit({userAction:"ConfigureRetentionAnnouncement.handleClick",environment:t,canUndo:!0,perform:e=>{d().d2({transaction:e,userSettingsStore:S,data:{seen_trash_autodeletion_announcement:!0}})}}),g().default.setState({openedFrom:"content_search",open:!0,currentTab:"security",highlightedSetting:void 0,defaultSubtab:"data_retention"}))}),[S,t]),I=(0,r.useCallback)((()=>{S&&u().createAndCommit({userAction:"ConfigureRetentionAnnouncement.handleDismiss",environment:t,canUndo:!0,perform:e=>{d().d2({transaction:e,userSettingsStore:S,data:{seen_trash_autodeletion_announcement:!0}})}})}),[S,t]),w=new Date>new Date("2024-08-19")?v.postLaunchBody:v.body;return(0,f.jsx)(p().g,{messageKey:"configure_retention_sidebar",title:n.formatMessage(v.title),iconGroup:s,body:n.formatMessage(w,{duration:(0,c().uP)(y,n)}),buttons:[{text:n.formatMessage(v.button),onClick:h}],onDismiss:I})}},519563:(e,t,n)=>{n.d(t,{S:()=>o});var r=()=>n(142735),i=()=>n(876822);function o(){return(0,r().VK)((()=>{const{currentSpaceStore:e}=i().default.state;return(null==e?void 0:e.getMemberCountFromPublicSpaceData())||null}),[])}},228772:(e,t,n)=>{n.d(t,{r:()=>o});var r=()=>n(142735),i=()=>n(876822);function o(){return(0,r().VK)((()=>i().default.state.currentSpaceStore),[])}},110372:(e,t,n)=>{n.d(t,{YF:()=>l,bl:()=>c,gF:()=>a,i6:()=>u,lZ:()=>s});var r=()=>n(954949),i=()=>n(594546),o=()=>n(749826);function a(e,t){const n=(0,r().Si)(t.callout_key);n&&(t.placement_key=(0,r().pU)(n)),(0,i().j)({environment:e,event:{eventName:"callout_show",eventProperties:t}}),o().default.logEvent("callout_show",t.callout_key)}function s(e,t){const n=(0,r().Si)(t.callout_key);n&&(t.placement_key=(0,r().pU)(n)),(0,i().j)({environment:e,event:{eventName:"callout_click",eventProperties:t}}),o().default.logEvent("callout_click",t.callout_key)}function c(e,t){const n=(0,r().Si)(t.callout_key);n&&(t.placement_key=(0,r().pU)(n)),(0,i().j)({environment:e,event:{eventName:"callout_dismiss",eventProperties:t}}),o().default.logEvent("callout_dismiss",t.callout_key)}function l(e,t){const{eligible_callouts:n,required_arg_timeout:r,required_args_run_duration:o,eligibility_timeouts:a,blocklist:s}=t;(0,i().j)({environment:e,event:{eventName:"callout_coordinator_resolved",eventProperties:{eligible_callouts:n,required_arg_timeout:r,required_args_run_duration:o,eligibility_timeouts:a,blocklist:s}}})}function u(e,t){(0,i().j)({environment:e,event:{eventName:"callout_feature_interaction",eventProperties:t}})}},500221:(e,t,n)=>{n.r(t),n.d(t,{getEligibleStaticMessages:()=>M,maybeShowMessagesImpl:()=>q,showStartupMessagesImpl:()=>K});n(670560),n(267602),n(653476),n(241792);var r=()=>n(730120),i=()=>n(843957),o=()=>n(954949),a=()=>n(839002),s=()=>n(696459),c=()=>n(824462),l=()=>n(876822),u=()=>n(524434),d=()=>n(518019),m=()=>n(749826),p=()=>n(897257),_=()=>n(706443),g=()=>n(803728),f=()=>n(110372),v=(n(122556),n(582845),n(250570),n(533019),n(721473),n(788208),n(22624),()=>n(575861)),S=()=>n(578292),b=()=>n(741633),y=()=>n(629719),h=()=>n(381348),I=()=>n(326966),w=()=>n(345918),k=()=>n(438665),C=()=>n(400324),A=()=>n(548812),P=()=>n(815277),D=()=>n(18281),U=()=>n(697623),x=()=>n(546464);function E(e){const{currentUserSettingsStore:t,minAccountAgeInDays:r}=e,i=(0,n(572623).e2)(t);return Number(i)>=r}function N(e){return"unsubscribed_admin"===e.state.type||"unsubscribed_member"===e.state.type}const j={dummy_modal:async e=>{const{environment:t}=e;return Promise.resolve(!t.device.isElectron&&m().default.checkGate({gateName:"can_see_callout_modal_test"}))},dummy_modal_2:async e=>{const{environment:t}=e;return Promise.resolve(!t.device.isElectron&&m().default.checkGate({gateName:"can_see_callout_modal_test"}))},omnimodal:async e=>{let{}=e;return Promise.resolve(!1)},ai_google_drive_universal_qna_announcement:async e=>{const{environment:t,currentSpaceStore:n,currentSpaceViewStore:r,mainEditorCurrentBlockStore:i,assistantFeatureGateStore:o,currentUserSettingsStore:a}=e,s=r.getSettings();if(void 0===s||void 0!==s.google_drive_universal_qna_announcement_seen_at)return!1;const l=await(0,P().KQ)(t,{name:"ai_google_drive_qna",spaceId:n.getSpaceId(),userId:t.currentUser.id}),u=(n.getMemberCountFromPublicSpaceData()??1)>1;if(!(i.canRead()&&n.canAdmin()&&l&&u))return!1;if(!E({currentUserSettingsStore:a,minAccountAgeInDays:8}))return!1;if(!o.canSeeGoogleDriveUniversalQnaAnnouncementModal()||!o.isAiEnabled())return!1;try{const e=await c().callApi({eventName:"getGoogleDriveQnAAnnouncementEligibility",environment:t,data:{spaceId:n.getSpaceId()}});return"success"===e.type&&e.data.eligibility}catch{return!1}},ai_jira_universal_qna_announcement:async e=>{const{environment:t,currentSpaceStore:n,mainEditorCurrentBlockStore:r,assistantFeatureGateStore:i,currentUserSettingsStore:o}=e,a=await(0,P().KQ)(t,{name:"ai_jira_connector",spaceId:n.getSpaceId(),userId:t.currentUser.id}),s=(n.getMemberCountFromPublicSpaceData()??1)>1;if(!(r.canRead()&&n.canAdmin()&&a&&s))return!1;if(!E({currentUserSettingsStore:o,minAccountAgeInDays:8}))return!1;if(!i.isJiraQnaEnabled()||!i.isAiEnabled())return!1;try{const e=await c().callApi({eventName:"getJiraAIConnectorAnnouncementEligibility",environment:t,data:{spaceId:n.getSpaceId()}});return"success"===e.type&&e.data.eligibility}catch{return!1}},ai_github_ai_connector_announcement:async e=>{const{environment:t,currentSpaceStore:n,currentSpaceViewStore:r,mainEditorCurrentBlockStore:i,assistantFeatureGateStore:o,currentUserSettingsStore:a}=e,s=r.getSettings();if(void 0===s||void 0!==s.ai_github_ai_connector_announcement_seen_at)return!1;const l=await(0,P().KQ)(t,{name:"ai_github_connector",spaceId:n.getSpaceId(),userId:t.currentUser.id}),u=(n.getMemberCountFromPublicSpaceData()??1)>1;if(!(i.canRead()&&n.canAdmin()&&l&&u))return!1;if(!E({currentUserSettingsStore:a,minAccountAgeInDays:8}))return!1;if(!o.canSeeGithubAIConnectorAnnouncementModal()||!o.isAiEnabled())return!1;try{const e=await c().callApi({eventName:"getGithubAIConnectorAnnouncementEligibility",environment:t,data:{spaceId:n.getSpaceId()}});return"success"===e.type&&e.data.eligibility}catch{return!1}},ai_assistant_announcement:async e=>{const{currentUserSettingsStore:t,mainEditorCurrentBlockStore:n,assistantFeatureGateStore:r}=e,i=t.getSettings();if(!i)return!1;const o=void 0===(null==i?void 0:i.ai_assistant_onboarding_phase);return Promise.resolve(n.canRead()&&E({currentUserSettingsStore:t,minAccountAgeInDays:8})&&o&&r.canSeeAssistantFeaturePromotionalModal())},sidebar_upgrade_nudge:async e=>{const{currentUserSettingsStore:t,billingData:r,currentSpaceStore:i}=e,o=t.getSettings(),a=i.getMemberCountFromPublicSpaceData()??1,s=(0,n(843570).F)({billingData:r,memberCount:a});return Promise.resolve(!(null!=o&&o.dismissed_sidebar_upgrade_nudge||"none"!==s||(0,y().YK)(null==r?void 0:r.subscription)||1!==a||(0,w().Q9)(i)))},calendar_launch_prompt:async e=>{const{experimentStore:t,currentSpaceStore:i,currentUserSettingsStore:o,subscriptionDataStore:a}=e,s=o.getSettings(),c=null==s?void 0:s.notion_calendar_launch_modal_dismissed_at;if(void 0===c)return!1;if((0,n(909859).tE)())return!1;const l=r().ou.now().toMillis()-c;return Promise.resolve(!N(a)&&t.checkGate({gateName:"notion_calendar_launch_modal"})&&!(0,w().Dj)(i)&&void 0!==s&&"dismissed_modal"===s.notion_calendar_launch_modal_phase&&l>=2*I().A0)},ai_limit_nudge:async e=>{var t,n;const{environment:r,currentSpaceStore:i,currentUserSettingsStore:o}=e,a=o.getSettings();if(void 0===a)return!1;const s=i.getSpaceId(),c=await(0,x().$W)(r,{name:"ai_space_usage",spaceId:s,userId:r.currentUser.id,amount:"unknown"}),l=c.limit;if("unlimited"===l.total)return!1;const u=(await(0,x().$W)(r,{name:"ai_user_usage",spaceId:s,userId:r.currentUser.id,amount:"unknown"})).limit;if("unlimited"===u.total||u.current<u.total)return!1;const d=+l.current/l.total,m=d>=C().T?!(null===(t=a.addOnLimitNotifications)||void 0===t||!t.disableLimitNotificationInSidebar):!(null===(n=a.addOnLimitNotifications)||void 0===n||!n.disableWarningNotificationInSidebar),p=c.upsell;return"blocked"!==c.type&&void 0!==p&&!m&&d>=C().y},block_limit_nudge:async e=>{const{environment:t,subscriptionDataStore:n,currentSpaceStore:r}=e,i=n.state;if(!i)return!1;const o=await D().DI(t,r.getSpaceId(),i);return N(n)&&D().KB(i,t,r.getSpaceId(),o)},post_reverse_trial_sidebar:async e=>{const{environment:t,subscriptionDataStore:r,currentSpaceStore:i}=e;if(!N(r)||!i.canAdmin())return Promise.resolve(!1);const o=i.getSpaceId(),a=await c().callApi({eventName:"getCustomerOffersReceived",environment:t,data:{spaceId:o},headers:(0,b().Bb)({cellId:void 0,spaceId:o})});if("failed"===a.type)return Promise.resolve(!1);const s=a.data,l=(0,h().XU)(s,"trial"),u=l&&(0,n(851549).jQ)(l.offer.campaign);return Promise.resolve(u)},lic_offer_sidebar:async e=>{const{environment:t,subscriptionDataStore:n,currentSpaceStore:r}=e,i=r.getSpaceId();if(!N(n)||!D().GJ(n.state)||!i)return Promise.resolve(!1);const o=await(0,k().DV)(t,i,"sidebar_upsell");if(!o)return Promise.resolve(!1);const a=o.campaign;if("lic_25"!==a&&"lic_50"!==a)return Promise.resolve(!1);const s=(0,w().rn)(t,r);return s&&(0,k().n9)({environment:t,spaceName:s,offerCampaign:a}),Promise.resolve(!0)},new_year_2025_offer_sidebar:async e=>{const{environment:t,subscriptionDataStore:n,currentSpaceStore:r}=e,i=r.getSpaceId();if(!(D().GJ(n.state)&&N(n)&&i&&(0,A().oB)()))return Promise.resolve(!1);const o=await(0,k().ZF)(t,{spaceId:i,offerCampaign:"new_year_2025"});if(!o)return Promise.resolve(!1);return"new_year_2025"!==o.campaign?Promise.resolve(!1):Promise.resolve(!0)},resurrection_offer_sidebar:async e=>{const{environment:t,subscriptionDataStore:n,currentSpaceStore:r}=e,i=(0,A().a7)(),o=r.getSpaceId();if(!(N(n)&&i&&D().GJ&&o))return Promise.resolve(!1);const a=await(0,k().ZF)(t,{spaceId:o,offerCampaign:"resurrection_offer"});return a?Promise.resolve((0,h().K0)(a)):Promise.resolve(!1)},onboarding_reverse_trial_sidebar:async e=>{const{environment:t,currentSpaceStore:r}=e,i=await d().Z.awaitData(t,{spaceId:r.getSpaceId()}),o=(0,n(182946).Cf)(i),a=(0,y().PB)(i);if(!o||!r.canAdmin())return Promise.resolve(!1);const s=r.getSpaceId(),l=await c().callApi({eventName:"getCustomerOffersReceived",environment:t,data:{spaceId:s},headers:(0,b().Bb)({cellId:void 0,spaceId:s})});if("success"!==l.type)return Promise.resolve(!1);const u=(0,h().XU)(l.data,"trial");if(!u)return Promise.resolve(!1);const m=(0,h().b_)(u,a),p=(0,h().e)(u.offer).as("days"),_=m>Math.round(p/2);return Promise.resolve(_)},student_org_prompt:async e=>{var t,n;const{environment:r,subscriptionDataStore:i,currentUserSettingsStore:o}=e,a=i.state,s=i.state.subscriptionTier,l=void 0!==s&&["student","personal","personal_free","free"].includes(s),u=new Set(["student_club_monthly","student_club_yearly"]),d=(0,w().kO)(),m=D().GJ(a)&&(null==a||null===(t=a.customerData)||void 0===t?void 0:t.stripe)&&"plan"in a.customerData.stripe&&u.has(a.customerData.stripe.plan);if(void 0!==(null===(n=o.getSettings())||void 0===n?void 0:n.dismissed_sidebar_student_org_prompt)||!l||m||"multiplayer"===(null==d?void 0:d.collaborativeIntent))return!1;const p=await c().callApi({eventName:"isEmailEducation",environment:r,data:{validationType:"Domain"}});return"failed"!==p.type&&p.data.isEligible},notion_calendar_launch_promo:async e=>{const{environment:t,currentUserSettingsStore:n,mainEditorCurrentBlockStore:r,experimentStore:i,currentSpaceStore:o}=e,a=n.getSettings();if(!a)return!1;const s=a.notion_calendar_launch_modal_phase,c=t.device.isElectron?void 0===s:void 0===s||"connected_notion_calendar"===s;return Promise.resolve(r.canRead()&&i.checkGate({gateName:"notion_calendar_launch_modal"})&&!(0,w().Cx)(o)&&!(0,w().Dj)(o)&&c)},startup_sidebar_footer:async e=>Promise.resolve(!1),asana_post_import_tour:async e=>{var t,n;const{currentUserSettingsStore:r,mainEditorCurrentBlockStore:i,experimentStore:o}=e,a=i,s=(null==a?void 0:a.isCollectionView())&&(null===(t=a.getFormat())||void 0===t?void 0:t.is_asana_imported_project)&&o.checkGate({gateName:"improved_asana_importer_screens"})&&!(null!==(n=r.getSettings())&&void 0!==n&&n.seen_asana_post_import_tour);return Promise.resolve(s)},configure_retention_sidebar:async e=>{var t;const{environment:n,currentSpaceStore:r,currentUserSettingsStore:i}=e,o=await(0,P().KQ)(n,{name:"configurable_retention",spaceId:r.getSpaceId(),userId:n.currentUser.id}),a=void 0===r.getSettings().delete_from_trash_delay_seconds&&void 0===r.getSettings().purge_delay_seconds,s=!(null!==(t=i.getSettings())&&void 0!==t&&t.seen_trash_autodeletion_announcement);return Promise.resolve(o&&r.canAdmin()&&a&&s)},desktop_download_sidebar:async e=>{var t,n,i;const{currentUserSettingsStore:o,environment:a,experimentStore:s}=e;if("web-desktop"!==a.device.deviceType)return!1;if(!!(null!==(t=o.getSettings())&&void 0!==t&&t.used_mac_app||null!==(n=o.getSettings())&&void 0!==n&&n.used_windows_app))return!1;const c=null===(i=o.getSettings())||void 0===i?void 0:i.signup_time;if(!c)return!1;const l=r().ou.now().toMillis()-c;if(l>=7*I().A0)return!1;return"on"===s.getEligibleGroup({experimentId:"desktop_download_sidebar_callout",defaultGroup:"control"})?l<1*I().U6:Promise.resolve(!1)},share_button_tooltip:async e=>{var t,n;const{currentUserSettingsStore:i,mainEditorCurrentBlockStore:o}=e,a=void 0!==(null===(t=i.getSettings())||void 0===t?void 0:t.seen_share_button_tooltip_at),s=null===(n=i.getSettings())||void 0===n?void 0:n.signup_time;if(!s)return!1;const c=r().ou.now().toMillis()-s;return Promise.resolve(!a&&!(null!=o&&o.isTypedCollectionViewBlock())&&c>=10*I().A0&&c<=30*I().A0)},open_in_calendar_tooltip:async e=>{const{currentSpaceStore:t,currentUserSettingsStore:n}=e,r=n.getSettings(),i=(0,w().XY)({env:"production",spaceStore:t});return Promise.resolve(!(i||null!=r&&r.seen_open_in_calendar_tooltip))},ai_google_drive_qna_notification_tooltip:async e=>{const{environment:t,assistantFeatureGateStore:n,currentSpaceStore:r,currentSpaceViewStore:i}=e,o=i.getSettings();if(!o||!n.isAiEnabled()||!n.canShowUniversalGoogleDriveSearchScope()||void 0!==o.ai_google_drive_qna_notification_seen_at)return Promise.resolve(!1);const a=await c().callApi({eventName:"getGoogleDriveRecallStatusForUser",environment:t,data:{spaceId:r.getSpaceId()}});return Promise.resolve("success"===a.type&&"enabled"===a.data.status)},ai_slack_qna_notification_tooltip:async e=>{const{environment:t,currentSpaceStore:n,currentSpaceViewStore:r,assistantFeatureGateStore:i}=e,o=null==r?void 0:r.getSettings(),a=n.getSpaceId();if(!i.isSlackQnaNotificationEnabled()||!i.isAiEnabled()||!o||void 0!==o.ai_slack_qna_notification_seen_at)return Promise.resolve(!1);const[s,l]=await Promise.all([c().callApi({eventName:"getConnectedAppsForUniversalQna",environment:t,data:{spaceId:a},headers:(0,b().Bb)({spaceId:a})}),c().callApi({eventName:"getSlackBulkIngestionStatus",environment:t,data:{spaceId:a},headers:(0,b().Bb)({spaceId:a})})]);return Promise.resolve("success"===s.type&&s.data.connectedApps.includes("slack-admin")&&"success"===l.type&&!l.data.inProgress&&l.data.isSyncCompleted)},ai_slack_qna_embed_tooltip:async e=>{var t;const{environment:n,currentSpaceStore:r,mainEditorCurrentBlockStore:i,assistantFeatureGateStore:o,currentUserSettingsStore:a,experimentStore:s}=e;if(null!==(t=a.getSettings())&&void 0!==t&&t.seen_slack_embed_ai_connector_tooltip)return!1;const c=await(0,P().KQ)(n,{name:"ai_slack_qna",spaceId:r.id,userId:n.currentUser.id}),l=(r.getMemberCountFromPublicSpaceData()??1)>1;return!!(i.canRead()&&c&&l)&&(!!E({currentUserSettingsStore:a,minAccountAgeInDays:8})&&(!(!s.checkGate({gateName:"enable_slack_embed_tooltips_actual"})||!o.isAiEnabled())&&Promise.resolve(!0)))},ai_sales_assisted_notification_tooltip:async e=>{var t;const{assistantFeatureGateStore:r,currentUserSettingsStore:i,currentSpaceStore:o,environment:a,subscriptionDataStore:s}=e,c=null==i?void 0:i.getSettings(),l=(0,n(559155).$_)(a,o.id),u="tooltip"!==(null==c?void 0:c.ai_assistant_onboarding_phase)||void 0!==(null==c?void 0:c.ai_assistant_onboarding_phase_last_set_at)&&(0,v().O5)(c.ai_assistant_onboarding_phase_last_set_at)<1,d=(0,n(255393).de)((null===(t=s.state)||void 0===t?void 0:t.addOns)??[]);return Promise.resolve(r.showAssistantNotionAiCopy()&&r.isAiEnabled()&&l&&void 0===c.ai_sales_assisted_extra_notification_seen_at&&!u&&d)},ai_assistant_origin_element_tooltip:async e=>{const{environment:t,currentUserSettingsStore:r,mainEditorCurrentBlockStore:i,assistantFeatureGateStore:o}=e;return Promise.resolve(!n(718959).tu.state&&i.canRead()&&o.isQnATooltipsVisible(t.device,r))},ai_assistant_reminder_tooltip:async e=>Promise.resolve(!1),layout_customize_layout_button_tooltip:async e=>{var t,r,i;const{environment:o,mainEditorCurrentBlockStore:a,currentUserSettingsStore:s}=e;if(Boolean(null===(t=s.getSettings())||void 0===t?void 0:t.layout_builder_add_module_button_education_tooltip_dismissed_at))return Promise.resolve(!1);const c=a.isCollectionView()?a.getCollectionStore():a.getAssociatedCollectionStore();if(!c||Object.keys(c.getSchema()).length<5)return Promise.resolve(!1);const l=c.getLayoutStore();if(l&&!l.isReady())return Promise.resolve(!1);if((0,n(242921).xx)(c))return Promise.resolve(!1);return[null===(r=c.getParentBlockStore())||void 0===r?void 0:r.getLastEditedById(),null===(i=c.getParentBlockStore())||void 0===i?void 0:i.getCreatedById()].includes(o.currentUser.id)&&null!=c&&c.canEditCollection()?Promise.resolve(!0):Promise.resolve(!1)},language_switch_prompt:async e=>{var t,n;const{currentUserSettingsStore:r}=e,i=(null==r||null===(t=r.getSettings())||void 0===t?void 0:t.preferred_locale)||S().al,o=(null==r||null===(n=r.getSettings())||void 0===n?void 0:n.language_switching_prompt_dismissals)||[],a=!!(0,S().RH)(i,o);return Promise.resolve(a)},forms_share_form_tooltip:async e=>{var t;const{currentUserSettingsStore:n}=e,r=Boolean(null===(t=n.getSettings())||void 0===t?void 0:t.seen_forms_share_form_tooltip);return Promise.resolve(!r)},contact_sales_promo_sidebar_v2:async e=>{var t;const{environment:r,currentSpaceStore:i,subscriptionDataStore:o,currentUserSettingsStore:a,experimentStore:s}=e;let c=!1;try{c=await(0,n(444297).n)(r)}catch(p){}const l=(0,U().QM)()||(0,U().eR)()||(0,U().NG)(),u=D().GJ(o.state),d=o.state?await D().DI(r,i.pointer.spaceId,o.state):1,m=((null==a||null===(t=a.getSettings())||void 0===t?void 0:t.preferred_locale)||S().al)===S().al;return Promise.resolve(u&&c&&l&&d>5&&m&&Boolean("on"===s.getEligibleGroup({experimentId:"contact_sales_promo_v2",defaultGroup:"control"})))},mwn_feature_modal:async e=>{const{experimentStore:t,currentUserSettingsStore:n,environment:r}=e,i=null==n?void 0:n.getSettings(),o=Boolean(null==i?void 0:i.mwn_feature_modal_dismissed_at_millis),a=r.RouterStore.state.route,s=a&&"gallery"===a.name;return Promise.resolve(!o&&t.checkGate({gateName:"mwn_feature_modal"})&&!s)},customize_slug_tooltip:async e=>{const{currentSpaceStore:t}=e,n=(0,w().j9)(t);return Promise.resolve(n)},collection_add_item_button_tooltip:async e=>{const{mainEditorCurrentBlockStore:t}=e;return Promise.resolve(t.canEdit())},faces_xsell_sidebar:async e=>{var t;const{experimentStore:n,currentUserSettingsStore:r}=e,i=E({currentUserSettingsStore:r,minAccountAgeInDays:8}),o=null==r||null===(t=r.getSettings())||void 0===t?void 0:t.first_seen_faces_xsell_at,a=o&&(0,v().O5)(o)<7;return Promise.resolve(i&&(n.checkGate({gateName:"faces_xsell_sidebar"})||a))},student_offer_jan_2025_sidebar:async e=>{const{environment:t,experimentStore:n,currentSpaceStore:r}=e,i=(0,w().kO)(),o=r.getMemberCountFromPublicSpaceData()??1,a="singleplayer"===i.collaborativeIntent||1===o;if(!["personal","school"].includes(i.intent??"")||!a)return!1;const s=await c().callApi({eventName:"isEmailEducation",environment:t,data:{validationType:"Domain"}});return"failed"!==s.type&&(!!n.checkGate({gateName:"student_offer_jan_2025_sidebar"})&&s.data.isEligible)},workflow_template_installation:async e=>{const{mainEditorCurrentBlockStore:t}=e;return Promise.resolve(t.canEdit())}};var B=()=>n(354811);const G=5e3,R=3e4;async function F(e){const t={environment:Promise.resolve(e),currentUserSettingsStore:l().default.waitUntil((()=>{var e;return Boolean(null===(e=l().default.state.currentUserSettingsStore)||void 0===e?void 0:e.isReady())})).then((()=>l().default.state.currentUserSettingsStore)),currentSpaceStore:l().default.waitUntil((()=>{var e;return Boolean(null===(e=l().default.state.currentSpaceStore)||void 0===e?void 0:e.isReady())})).then((()=>l().default.state.currentSpaceStore)),mainEditorCurrentBlockStore:l().default.waitUntil((()=>{var e;return Boolean(null===(e=l().default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.isReady())})).then((()=>l().default.state.mainEditorCurrentBlockStore)),currentSpaceViewStore:l().default.waitUntil((()=>{var e;return Boolean(null===(e=l().default.state.currentSpaceViewStore)||void 0===e?void 0:e.isReady())})).then((()=>l().default.state.currentSpaceViewStore)),assistantFeatureGateStore:u().KR.waitUntil((()=>u().KR.getIsInitialized())).then((()=>u().KR)),subscriptionDataStore:p().subscriptionDataStoreInstance.waitUntilLoaded().then((()=>p().subscriptionDataStoreInstance)),experimentStore:m().default.waitUntilStatsigReady().then((()=>m().default)),billingData:l().default.waitUntil((()=>{var e;return Boolean(null===(e=l().default.state.currentSpaceStore)||void 0===e?void 0:e.isReady())})).then((()=>l().default.state.currentSpaceStore)).then((t=>d().Z.awaitData(e,{spaceId:t.getSpaceId()})))},n={};return Promise.all((0,s().Yd)(t).map((e=>async function(e,t,n){const r=await(0,a().OI)(R,n);return r.timeout?Promise.reject(t):(e[t]=r.result,Promise.resolve(void 0))}(n,e,t[e])))).then((()=>({requiredArgs:n,timeoutKey:void 0})),(e=>({timeoutKey:e,requiredArgs:void 0})))}async function M(e,t){const n=r().ou.now().toMillis(),{requiredArgs:i,timeoutKey:o}=await F(e),s=r().ou.now().toMillis()-n;if(!i)return{eligibleKeys:[],requiredArgTimeout:o,requiredArgsRunDuration:s};const{candidates:c,timeouts:l}=await async function(e,t){const n=[],r=[];for(const i of t){const{timeout:t,result:o}=await(0,a().OI)(G,j[i](e));t?n.push(i):o&&r.push(i)}return{candidates:r,timeouts:n}}(i,t);return{eligibleKeys:c,eligibilityTimeouts:l,requiredArgsRunDuration:s}}async function q(e,t){await async function(){return new Promise((e=>{V?e():O.push(e)}))}();const{eligibleKeys:n,eligibilityTimeouts:r,requiredArgsRunDuration:i,requiredArgTimeout:o}=await M(e,t);if(o)return{shown:[],requiredArgTimeout:o,requiredArgsRunDuration:i};const a=T(n),s=[];for(const c of a){const t={id:"",key:c,type:"static",props:{}};g().PV(e,t).success&&s.push(c)}return{shown:s,eligibilityTimeouts:r,requiredArgsRunDuration:i}}async function K(e){const t=o().p.filter((e=>i().xm[e].show_on_startup));await m().default.waitUntilStatsigReady();const{eligibleKeys:n,eligibilityTimeouts:r,requiredArgTimeout:a,requiredArgsRunDuration:s}=await M(e,t);if(a)return void f().YF(e,{eligible_callouts:[],required_arg_timeout:a,required_args_run_duration:s,eligibility_timeouts:[]});let l=T(n);if(m().default.checkGate({gateName:"callouts_omnimodal"})){const e=l.filter((e=>"Modal"===(0,o().pU)(e)&&Boolean((0,B().G)(e))));e.length>1&&(_().Z.setConfig("omnimodal",{callouts:e}),l=["omnimodal",...l.filter((e=>"Modal"!==(0,o().pU)(e)))])}const u=[];for(const i of n)u.push({id:"",key:i,type:"static",props:{}});if(m().default.checkGate({gateName:"callout_show_dynamic_messages"})){const t=await async function(e){const t=await c().callApi({eventName:"getUnreadInAppMessagesForUser",environment:e,data:{}});if("failed"===t.type)return[];return t.data.messages}(e);for(const e of t)_().Z.setConfig(e.config.key,{message:e}),u.push(e.config)}const d=[];for(const i of u){g().PV(e,i).success&&d.push(i.key)}const p=m().default.getConfigKey("callout_config","callout_blocklist");f().YF(e,{eligible_callouts:d,required_arg_timeout:null,required_args_run_duration:s,eligibility_timeouts:r??[],blocklist:p}),function(){V=!0;for(const e of O)e()}()}function T(e){const t=e.filter((e=>"Modal"===(0,o().pU)(e))),n=e.filter((e=>"Modal"!==(0,o().pU)(e)));return t.sort(((e,t)=>(0,o().fS)(t)-(0,o().fS)(e))),n.sort(((e,t)=>(0,o().DE)(e)-(0,o().DE)(t))),[...t,...n]}let V=!1;const O=[]},354811:(e,t,n)=>{n.d(t,{G:()=>o,O:()=>r});function r(e,t){t}const i={dummy_modal:{title:{id:"announcementDigest.dummy_modal.title",defaultMessage:"Dummy Modal",description:"Title for the dummy modal announcement"},caption:{id:"announcementDigest.dummy_modal.caption",defaultMessage:"This is a dummy description of an announcement. Hi.",description:"Caption for the dummy modal announcement"},callToAction:{id:"announcementDigest.dummy_modal.callToAction",defaultMessage:"Do Nothing",description:"Button for the dummy modal announcement that does nothing"},imageUrl:n(714230).Z.images.sites.sitesLaunchModalPng},dummy_modal_2:void 0,ai_assistant_announcement:void 0,ai_google_drive_universal_qna_announcement:void 0,ai_github_ai_connector_announcement:void 0,ai_jira_universal_qna_announcement:void 0,notion_calendar_launch_promo:void 0,omnimodal:void 0,mwn_feature_modal:void 0};function o(e){return i[e]}},254264:(e,t,n)=>{n.d(t,{N:()=>u});n(670560);var r=n(667294),i=()=>n(219727),o=()=>n(930494),a=()=>n(803728),s=()=>n(110372),c=()=>n(308361),l=n(785893);function u(e){const{message:t,buttons:n}=e,u=(0,i().O7)();(0,r.useEffect)((()=>{s().gF(u,{callout_key:t.key,placement_key:(0,o().SI)(t)})}),[u,t]);const d=(0,r.useCallback)((e=>{s().lZ(u,{callout_key:t.key,placement_key:(0,o().SI)(t),click_type:"primary_cta"}),e&&e()}),[u,t]),m=(0,r.useCallback)((()=>{s().bl(u,{callout_key:t.key,placement_key:(0,o().SI)(t),dismiss_type:"sidebar_dismiss"}),a().pl(u,t),e.onDismiss&&e.onDismiss()}),[u,t,e]);let p;if(n){p=[];for(const e of n)p.push({...e,onClick:()=>{d(e.onClick)}})}return(0,l.jsx)(c().lE,{children:(0,l.jsx)(c().Io,{...e,buttons:p,onDismiss:m})})}},308361:(e,t,n)=>{n.d(t,{Io:()=>f,lE:()=>g});n(670560),n(267602),n(30005);var r=n(667294),i=()=>n(846550),o=()=>n(981219),a=()=>n(696459),s=()=>n(212493),c=()=>n(154186),l=()=>n(603692),u=()=>n(661641),d=()=>n(777346),m=n(785893);const p=(0,r.createContext)(void 0);p.displayName="AnimationDismissContext";const _=300;function g(e){const{children:t}=e,[n,o]=(0,r.useState)(100),a=(0,i().yK)((()=>({card:{marginBottom:`-${n}%`,transitionProperty:"margin-bottom",transitionDuration:`${_}ms`,transitionTimingFunction:"ease"}})),[n]);(0,r.useEffect)((()=>{o(0)}),[]);const s=(0,r.useCallback)((e=>{o(100),setTimeout(e,_)}),[]);return(0,m.jsx)(p.Provider,{value:s,children:(0,m.jsx)("div",{style:a.card,children:t})})}function f(e){const{title:t,body:n,buttons:c,imageUrl:_,imageUrlHeight:g,onDismiss:f,iconGroup:S,iconColor:b}=e,y=(0,i().yK)((e=>({container:{backgroundColor:"transparent",margin:8,display:"flex"},card:{borderRadius:8,border:`1px solid ${"dark"===e.mode?e.stroke.secondary:"transparent"}`,boxShadow:e.lightBoxShadow,position:"relative",padding:8,backgroundColor:e.surface.wash,WebkitBackdropFilter:"blur(30px)",backdropFilter:"blur(30px)"},content:{paddingTop:4},closeButton:{position:"absolute",top:8,right:8,width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center"},image:{height:g??56,alignSelf:"start",maxWidth:"100%",marginLeft:4},iconWrapper:{width:24,height:24,display:"flex",justifyContent:"center",alignItems:"center"}})),[g]),h=(0,r.useContext)(p),I=(0,r.useCallback)((()=>{h?h((()=>null==f?void 0:f())):null==f||f()}),[f,h]),w=[];let k,C,A;return c&&(0,a().Of)(c)&&c.forEach(((e,t)=>w.push((0,m.jsx)(v,{...e},t)))),f&&(k=(0,m.jsx)(d().Z,{style:y.closeButton,onClick:I,children:(0,m.jsx)(l().y,{iconGroup:o().U,variantName:"mini",colorName:"secondary"})})),_&&(C=(0,m.jsx)("img",{src:_,style:y.image})),S&&(A=(0,m.jsx)("span",{style:y.iconWrapper,children:(0,m.jsx)(l().y,{iconGroup:S,variantName:"default",colorName:b??"primary"})})),(0,m.jsx)("div",{style:y.container,children:(0,m.jsxs)(s().jX,{direction:"column",style:y.card,gap:8,children:[C,(0,m.jsxs)(s().jX,{direction:"row",children:[A,(0,m.jsxs)(s().jX,{gap:4,style:y.content,children:[(0,m.jsxs)(s().jX,{gap:4,padding:`0px ${f?32:8}px 0px 8px`,children:[(0,m.jsx)(u().q,{styleName:"UISmall-12px/Semibold",colorName:"primary",children:t}),(0,m.jsx)(u().q,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:n})]}),(0,m.jsx)("div",{children:w})]})]}),k]})})}function v(e){const t=Boolean(e.leftIcon)||Boolean(e.leftIconGroup),n=(0,i().yK)((()=>({button:{paddingTop:4,paddingRight:8,paddingBottom:4,paddingLeft:t?6:8,borderRadius:6},buttonIcon:{width:14}})),[t]);let r,o;return e.leftIcon?r=(0,m.jsx)("div",{style:n.buttonIcon,children:e.leftIcon()}):e.leftIconGroup&&(r=(0,m.jsx)(l().y,{iconGroup:e.leftIconGroup,variantName:"small"})),e.rightIcon?o=(0,m.jsx)("div",{style:n.buttonIcon,children:e.rightIcon()}):e.rightIconGroup&&(o=(0,m.jsx)(l().y,{iconGroup:e.rightIconGroup,variantName:"small"})),(0,m.jsx)(s().jX,{direction:"row",children:(0,m.jsx)(c().Z,{style:n.button,onClick:e.onClick,children:(0,m.jsxs)(s().jX,{direction:"row",align:"center-left",gap:t?4:6,width:"hug",children:[r,(0,m.jsx)(u().q,{styleName:"UISmall-12px/Semibold",colorName:"primary",children:e.text}),o]})})})}},907337:(e,t,n)=>{n.d(t,{g:()=>a});n(667294);var r=()=>n(254264),i=()=>n(308361),o=n(785893);function a(e){const{messageKey:t}=e,n={id:"",key:t,type:"static",props:{}};return(0,o.jsx)(i().lE,{children:(0,o.jsx)(r().N,{...e,message:n})})}},438665:(e,t,n)=>{n.d(t,{zL:()=>m,lB:()=>p,ZF:()=>d,DV:()=>f,an:()=>_,n9:()=>v,WV:()=>g});var r=()=>n(799891),i=()=>n(741633);const o={plans_page:["lic_25","lic_50","resurrection_offer","ai_fifty_percent_upgrade"],sidebar_upsell:["lic_25","lic_50"]};var a=()=>n(792409),s=()=>n(824462),c=()=>n(308186),l=()=>n(594546),u=()=>n(876822);async function d(e,t){var n;const{spaceId:r,offerCampaign:i}=t;if(!r||!i||null===(n=u().default.state.currentSpaceStore)||void 0===n||!n.canAdmin())return;const o=await s().callApi({eventName:"getCustomerOffer",environment:e,data:{spaceId:r,offerCampaign:i}});return"failed"!==o.type&&"offer"in o.data&&o.data.offer?o.data.offer:void 0}async function m(e){const{environment:t,spaceId:n,offerCampaign:r,entrypoint:i}=e,o=await s().callApi({eventName:"applyCustomerOffer",environment:t,data:{spaceId:n,offerCampaign:r,entrypoint:i??"unknown"}});if("failed"!==o.type)return o;c().x2(o)}async function p(e,t){const n=await s().callApi({eventName:"applyCustomerOffer",environment:e,data:{...t}});if("failed"!==n.type)return n;c().x2(n)}async function _(e){const{environment:t,spaceId:n,offerCampaign:r}=e;return void 0!==await d(t,{spaceId:n,offerCampaign:r})}async function g(e){var t;const{environment:n,hasReceived:o,offerType:c,newPlan:l,coupon:d}=e,m=null===(t=u().default.state.currentSpaceStore)||void 0===t?void 0:t.getSpaceId();if(!m)return;const p=await s().callApi({eventName:"updateCustomerOffer",environment:n,data:{spaceId:m,hasReceived:o,offerType:c,newPlan:l,coupon:d},headers:(0,i().Bb)({cellId:void 0,spaceId:m})});"failed"===p.type&&r().log({level:"error",from:"offerActions",type:"updateLegacyCustomerOfferFailed",error:(0,a().Ui)(p.error)})}async function f(e,t,n){const r=function(e){if(o.hasOwnProperty(e))return o[e]}(n);if(r)for(const i of r){const n=await d(e,{spaceId:t,offerCampaign:i});if((null==n?void 0:n.campaign)===i)return n}}function v(e){let{environment:t,spaceName:n,offerCampaign:r}=e;if(n)switch(r){case"lic_25":case"lic_50":(0,l().lu)(t,"lic_offer_eligible","lic_offer_eligible",3600,{workspace_name:n,lic_25:"lic_25"===r,lic_50:"lic_50"===r});break;case"resurrection_offer":(0,l().lu)(t,"resurrection_offer_eligible","resurrection_offer_eligible",3600,{workspace_name:n});break;default:return}}},400324:(e,t,n)=>{n.d(t,{T:()=>i,y:()=>r});const r=.7,i=1},663773:(e,t,n)=>{n.d(t,{Cv:()=>c,aJ:()=>l,kw:()=>u,zX:()=>d});var r=()=>n(219727),i=()=>n(142735),o=()=>n(799891),a=()=>n(629719),s=()=>n(515323);function c(e){let{spaceId:t}=e;const n=(0,r().O7)();return(0,i().VK)((()=>{if(t)return s().U.getData(n,{spaceId:t})}),[n,t])}function l(e){if("admin"===(null==e?void 0:e.type))return e}function u(e,t,n){if(!t)return 0;const r=(0,a().ry)({spaceId:e,logFunction:o().log.bind(o()),subscriptionState:t});return r?Math.max(r,n):0}function d(e){var t;const n=null===(t=(0,a().a7)(e,"plan"))||void 0===t?void 0:t.price;if(!n)return;const r=n.unitAmount,i="year"===n.billingInterval?12:1;return{amount:r.amount/i,currencyCode:r.currencyCode}}},815277:(e,t,n)=>{n.d(t,{CH:()=>p,DE:()=>c().DE,KQ:()=>c().KQ,Rv:()=>c().Rv,V5:()=>m().V5,VX:()=>_,eB:()=>c().eB,oo:()=>c().oo});var r=()=>n(255933),i=()=>n(779709),o=()=>n(205228),a=()=>n(845682),s=()=>n(30795),c=()=>n(546464),l=()=>n(404791),u=()=>n(897257),d=()=>n(18281),m=()=>n(259408);const p={guests:e=>{if(!u().subscriptionDataStoreInstance.state)return"loading";return{current:(0,d().s1)(e.environment,e.spaceId,u().subscriptionDataStoreInstance.state)}},team_self_promotion:e=>{},internal_guests:e=>{if(!u().subscriptionDataStoreInstance.state)return"loading";return{current:(0,d().s1)(e.environment,e.spaceId,u().subscriptionDataStoreInstance.state),hasLowGuestLimit:(0,n(548812).fc)()}},members:e=>{const t=u().subscriptionDataStoreInstance.state;return{current:t?(0,s().W)(e.environment,e.spaceId,t):0}},non_admin_members:e=>{},view_chart:e=>{},form_filesize:e=>{},form_customization:e=>{},premium_automations:e=>{},move_to:e=>{},claimable_spaces:e=>{},domain_settings:e=>{},managed_users:e=>{},invite_user_to_workspace_mentions:e=>{},saml:e=>{},scim:e=>{},export_members:e=>{},hipaa_compliance:e=>{},sites_multiple_public_domains:e=>{},custom_image_upload_favicon:e=>{},custom_public_sites_layout:e=>{},seo_title_and_description:e=>{},admin_transfer_private_content:e=>{},ai_slack_qna:e=>{},configurable_mention_invites:e=>{},configurable_retention:e=>{},unbranded_forms:e=>{},ai_google_drive_qna:e=>{},watermarkless_chart_export:e=>{},configurable_deletion_and_retention_settings:e=>{},sudo_mode:e=>{},ai_github_connector:e=>{},ai_jira_connector:e=>{},slack_imports_invite:e=>{},content_reprovisioning:e=>{},ai_space_usage:e=>{var t;let{environment:n,spaceId:c}=e;const d=new(a().H)(n,{table:r().bx,id:c}).getModel(),m=(0,i().oc)(o().default.promotions.ai,d),p=(null===(t=l().Z.state)||void 0===t?void 0:t.spaceUsage)??0,_=u().subscriptionDataStoreInstance.state;return{current:p,memberCount:_?(0,s().W)(n,c,_):0,aiPromotionConfig:m,space:d}},ai_user_usage:e=>{var t;let{environment:n,spaceId:c}=e;const d=new(a().H)(n,{table:r().bx,id:c}).getModel(),m=(0,i().oc)(o().default.promotions.ai,d),p=(null===(t=l().Z.state)||void 0===t?void 0:t.userUsage)??0,_=u().subscriptionDataStoreInstance.state;return{current:p,memberCount:_?(0,s().W)(n,c,_):0,aiPromotionConfig:m,space:d}},block_read_and_write_role:e=>{}};function _(e){return(0,c().Rv)(e)??!1}},843570:(e,t,n)=>{n.d(t,{F:()=>s,T:()=>c});var r=()=>n(629719),i=()=>n(122792),o=()=>n(519563),a=()=>n(663773);function s(e){const{billingData:t,memberCount:n}=e,o=(0,r().zt)(null==t?void 0:t.subscription),a=(0,i().QM)(o),s=(0,i().Aw)(o);return a&&n<5?"invite":a?"upgrade":n<5&&!s?"invite":"none"}function c(e){return s({billingData:(0,a().Cv)({spaceId:e}),memberCount:(0,o().S)()??1})}},595976:(e,t,n)=>{n.d(t,{p:()=>c});var r=()=>n(219727),i=()=>n(142735),o=()=>n(616433),a=()=>n(515323),s=()=>n(663773);function c(e){let{spaceId:t}=e;const n=(0,r().O7)(),c=(0,o().J)();return(0,i().VK)((()=>{if(!t||!c)return;const e=a().U.getData(n,{spaceId:t});return(0,s().aJ)(e)}),[n,t,c])}},981219:(e,t,n)=>{n.d(t,{U:()=>r});const r=(0,n(827282).CZ)("xmark",{default:{loader:()=>n.e(71448).then(n.bind(n,471448))},small:{loader:()=>n.e(24056).then(n.bind(n,624056))},mini:{loader:()=>n.e(84500).then(n.bind(n,384500))},large:{loader:()=>n.e(71533).then(n.bind(n,71533))}})},851549:(e,t,n)=>{n.d(t,{jQ:()=>o});var r=()=>n(979881);const i=["trial_from_perf_marketing","onboarding_reverse_trial","mp_reverse_trial","admin_trial"];function o(e){return i.includes(e)||r().W_.includes(e)}},259408:(e,t,n)=>{n.d(t,{$W:()=>m,KQ:()=>d,_e:()=>_,Ay:()=>v,fS:()=>u,t:()=>o(),V5:()=>g,Kz:()=>f});n(267602),n(653476);var r=()=>n(513670),i=()=>n(696459),o=()=>n(124199),a=()=>n(629719);const s=["student","personal","plus","business","enterprise"];function c(e){return(0,i().DE)(s,e)}var l=()=>n(122792);const u=["plus","business","enterprise","ai","sites_custom_hostnames"];function d(e,t,n,r){return _(m(e,t,n,r))}function m(e,t,n,r){const{name:o,scope:a,actor:s}=r,c={...r,billingData:a.billingData},l=a.premiumFeatureOverrides,u=o in l?function(e,t,n){const r={type:"contact_account_manager"},o=e[t.name].type;if("check"===o){const e={type:"none"};return!0===n?{type:"available",limit:e}:{type:"upsell",upsell:r,limit:e}}if("per_use"===o){const e=t.amount,i={type:"per_use",amount:n};return"unlimited"===n||n>e?{type:"available",limit:i}:{type:"upsell",upsell:r,limit:i}}if("cumulative"===o){const e=t.amount,i=t.data.current,o={type:"cumulative",current:i,total:n};return"unlimited"===n||n>=i+e?{type:"available",limit:o}:{type:"upsell",upsell:r,limit:o}}(0,i().t1)(o)}(t,r,l[o]):n[o](c);let d;if("available"===u.type){const e=u.upsell?p(a.billingData,u.upsell,r.supportedProducts):void 0;d={...u,upsell:e}}else if("blocked"===u.type){const e=p(a.billingData,u.upsell,r.supportedProducts);d={...u,upsell:e}}else{const e=p(a.billingData,u.upsell,r.supportedProducts),t=function(e){const{actor:t,supportedProducts:n,upsell:r}=e;if(!t.isSpaceAdmin)return"blocked";const o=r.type;switch(o){case"product":return n.includes(r.product)?"upsell":"blocked";case"contact_sales":case"contact_account_manager":return"upsell";default:(0,i().t1)(o)}}({actor:s,supportedProducts:r.supportedProducts,upsell:e});d={...u,type:t,upsell:e}}return Math.random()<.001&&e({level:"info",from:"premiumFeatureFramework",type:"getPremiumFeatureAvailability",data:{featureName:o,featureScope:a,featureActor:s,featureAvailability:u}}),d}function p(e,t,n){if((0,a().Rd)(e.subscription))return{type:"contact_account_manager"};if("product"!==(null==t?void 0:t.type)||n.includes(t.product)||!c(t.product))return t;const i=t.product,o=n.filter((e=>c(e))).filter((e=>"student"!==e)).filter((e=>l().rC[e]>=l().rC[i])),s=(0,r().F)(o,(e=>l().rC[e]));return s?{...t,product:s}:t}function _(e){return"available"===(null==e?void 0:e.type)}function g(e,t){const{available:n}=t;let r,o;return"unavailable"in t?(r=t.unavailable,o=t.unavailable):(r=t.blocked,o=t.upsell),"available"===e.type?n():"upsell"===e.type?o(e):"blocked"===e.type?r(e):(0,i().t1)(e)}function f(e,t){if(void 0!==e)return g(e,{available:()=>{},blocked:t,upsell:()=>{}})}function v(e){return o().object({required:e,optional:{}})}}}]);