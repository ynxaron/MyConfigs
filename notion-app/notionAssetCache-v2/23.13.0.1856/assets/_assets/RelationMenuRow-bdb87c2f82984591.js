"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[39453],{290950:(e,t,o)=>{o.d(t,{RelationMenuRow:()=>X,Z:()=>ne});o(267602),o(653476),o(241792);var n=o(667294),i=()=>o(219727),r=()=>o(98642),a=()=>o(142735),l=()=>o(846550),s=()=>o(506347),d=()=>o(926724),c=()=>o(38883),u=()=>o(788860),p=()=>o(513670),g=()=>o(696459),y=()=>o(707513),S=()=>o(491927),f=()=>o(794586),h=()=>o(337897),b=()=>o(605890),m=()=>o(250625),k=()=>o(949842),x=()=>o(527278),w=()=>o(154057),M=()=>o(129338),C=()=>o(173113),R=()=>o(484883),B=()=>o(518530),v=()=>o(420431),P=()=>o(521777),I=()=>o(48395),T=()=>o(733641),L=()=>o(973837),j=()=>o(121700),E=()=>o(482162),O=()=>o(768826),A=()=>o(692102),H=()=>o(356321),Z=()=>o(603885),V=()=>o(154186),_=()=>o(9641),K=()=>o(864266),D=()=>o(1910),F=()=>o(18748),U=()=>o(231219),N=()=>o(654133),W=()=>o(328094),G=o(785893);const z=(0,u().vU)({dragRowHandleAriaLabel:{defaultMessage:"Drag to move a related page",id:"database.relationMenuRow.dragRowHandle.ariaLabel"},floatingInsertButtonAriaLabel:{defaultMessage:"Create a new related page",id:"database.relationMenuRow.floatingInsertButton.ariaLabel"},defaultIsSelectedPrimaryButtonAriaLabel:{defaultMessage:"Unlink page",id:"database.relationMenuRow.button.primary.default.isSelected.ariaLabel"},defaultIsNotSelectedPrimaryButtonAriaLabel:{defaultMessage:"Link page",id:"database.relationMenuRow.button.primary.default.isNotSelected.ariaLabel"},sprintIsSelectedPrimaryButtonAriaLabel:{defaultMessage:"Remove this sprint",id:"database.relationMenuRow.button.primary.sprint.isSelected.ariaLabel"},sprintIsNotSelectedPrimaryButtonAriaLabel:{defaultMessage:"Add this sprint",id:"database.relationMenuRow.button.primary.sprint.isNotSelected.ariaLabel"},defaultIsSelectedSecondaryButtonAriaLabel:{defaultMessage:"Insert new page",id:"database.relationMenuRow.button.secondary.default.isSelected.ariaLabel"},defaultIsNotSelectedSecondaryButtonAriaLabel:{defaultMessage:"Link another page",id:"database.relationMenuRow.button.secondary.default.isNotSelected.ariaLabel"},sprintIsSelectedSecondaryButtonAriaLabel:{defaultMessage:"Insert new page",id:"database.relationMenuRow.button.secondary.sprint.isSelected.ariaLabel"},sprintIsNotSelectedSecondaryButtonAriaLabel:{defaultMessage:"Move to a different sprint",id:"database.relationMenuRow.button.secondary.sprint.isNotSelected.ariaLabel"},openPageSidePeekAriaLabel:{defaultMessage:"Open in side peek",id:"database.relationMenuRow.button.openPageSidePeek.ariaLabel"},openPageCenterPeekAriaLabel:{defaultMessage:"Open in center peek",id:"database.relationMenuRow.button.openPageCenterPeek.ariaLabel"},openPageFullPageAriaLabel:{defaultMessage:"Open as page",id:"database.relationMenuRow.button.openPageFullPage.ariaLabel"}}),Y=48;function X(e){const{collectionStore:t,collectionId:o,schema:l,propertySchema:c,targetCollectionStore:u,relatedPageStore:p,isSelected:g,disabled:y,locked:h,canDrag:k,pageStore:x,property:w,propertyLimit:M,limitReached:R,rowType:B,onActionButtonClick:v,onSecondaryButtonClick:P,onOpenPageButtonClick:I,onMouseEnter:T,onMouseLeave:O,blockPropertyValueOverlayStore:A,onInsertInline:H,onTitleEsc:Z,index:V,focused:_,disableClickToNavigateToPage:K}=e,[D,F]=n.useState(!1),U=(0,i().O7)(),N=(0,i().Fy)(),W=n.useRef(null),z=n.useRef(null);(0,r().c)(L().Z,(()=>({relatedPageStoreId:p.id,rowType:B,property:w,relationTokenBlockStoreRef:W,getNode:()=>z.current})),[p,B,w]);const Y=(0,a().VK)((()=>{if(E().default.state.open)return E().default.state.mode;const e=null==A?void 0:A.state;if(null==e||!e.isOpen||null==e||!e.collectionContextStore)return E().default.state.mode;const t=e.collectionContextStore,o=null==t?void 0:t.collectionViewStore(),n=null==o?void 0:o.getType();return o&&n?o.getFormat().collection_peek_mode??b().Ls[n]:E().default.state.mode}),[A]),X=(0,a().VK)((()=>u.getDatabaseType()),[u]),ee=(0,C().a)(c);if(N.isPhone&&"popup"===B)return ee?(0,G.jsx)(re,{...e}):(0,G.jsx)(ae,{...e});if(ee){const e=(0,G.jsx)($,{canDrag:k,rowType:B,focused:_,disabled:y,locked:h,relatedPageStore:p,pageStore:x,onInsertInline:H,index:V,blockPropertyValueOverlayStore:A,collectionStore:t,targetCollectionStore:u,property:w,propertySchema:c,relationTokenBlockStoreRef:W});return(0,G.jsx)(oe,{innerRelationMenuRow:e,handleButtonClick:e=>function(e,t,o,n){o||n||t(e)}(e,v,y,g),canDrag:k,rowType:B,focused:_,disabled:y,limitReached:R,propertyLimit:M,hasMouseEntered:D,sectionOnClick:e=>pe(e,U,o,u,g,p,v,y,Y),outerRef:z,onSecondaryButtonClick:P,onMouseEnter:T,onMouseLeave:O})}if(X===d().p$){const e=(0,G.jsx)(q,{canDrag:k,rowType:B,focused:_,disabled:y,locked:h,isSelected:g,onSecondaryButtonClick:P,onOpenPageButtonClick:I,onActionButtonClick:v,propertyLimit:M,relatedPageStore:p,pageStore:x,onInsertInline:H,index:V,blockPropertyValueOverlayStore:A,collectionStore:t,targetCollectionStore:u,property:w,propertySchema:c,relationTokenBlockStoreRef:W,outerRef:z,peekMode:Y});return(0,G.jsx)(oe,{innerRelationMenuRow:e,handleButtonClick:e=>function(e,t,o,n){o||n||t(e)}(e,v,y,g),canDrag:k,rowType:B,focused:_,disabled:y,limitReached:R,propertyLimit:M,hasMouseEntered:D,sectionOnClick:e=>pe(e,U,o,u,g,p,v,y,Y),outerRef:z,onSecondaryButtonClick:P,onMouseEnter:T,onMouseLeave:O})}{const e=(0,G.jsx)(J,{canDrag:k,rowType:B,focused:_,disabled:y,locked:h,propertyLimit:M,limitReached:R,isSelected:g,onSecondaryButtonClick:P,onOpenPageButtonClick:I,onActionButtonClick:v,relatedPageStore:p,pageStore:x,onInsertInline:H,onTitleEsc:Z,index:V,blockPropertyValueOverlayStore:A,collectionStore:t,schema:l,targetCollectionStore:u,property:w,propertySchema:c,relationTokenBlockStoreRef:W,outerRef:z,peekMode:Y}),n=(0,G.jsx)(oe,{innerRelationMenuRow:e,handleButtonClick:e=>function(e,t,o,n,i,r,a,l,d,c,u,p){if(a||d){if(p)return;const r=m().DJ(e),a=o===n.id?E().default.state.resultsStore:void 0,d=o===n.id?E().default.state.collectionContextStore:void 0,g=E().default.isSidePeekOpen();if(f().CH({environment:t,store:i,peekMode:c,openInNew:r,resultsStore:a,collectionContextStore:d,pageVisitSource:s().tY.PeekOpen}),S().XX(t,{from:"inline"===l||"section"===l?"property_value":"configure_relation_modal",meta_click:Boolean(r)}),"popup"===l&&!g){(u??j().Z).setState({isOpen:!1})}}else r(e)}(e,U,o,u,p,v,y,B,g,Y,A,K),canDrag:k,rowType:B,focused:_,disabled:y,limitReached:R,propertyLimit:M,hasMouseEntered:D,sectionOnClick:e=>pe(e,U,o,u,g,p,v,y,Y),outerRef:z,onMouseEnter:T,onMouseLeave:O});return(0,G.jsx)(Q,{rowContainer:n,disabled:y,locked:h,canDrag:k,rowType:B,targetCollectionStore:u,propertyLimit:M,hasMouseEntered:D,outerRef:z,handleMouseEnter:()=>F(!0),handleMouseLeave:()=>F(!1),onInsertInline:H})}}function J(e){const{canDrag:t,rowType:o,focused:n,disabled:r,locked:s,propertyLimit:d,limitReached:c,isSelected:g,onSecondaryButtonClick:y,onOpenPageButtonClick:S,onActionButtonClick:f,relatedPageStore:b,pageStore:m,onInsertInline:k,onTitleEsc:w,index:C,blockPropertyValueOverlayStore:B,collectionStore:v,targetCollectionStore:I,schema:T,property:L,propertySchema:j,relationTokenBlockStoreRef:E,outerRef:O,peekMode:A}=e,H=(0,i().Fy)(),Z=(0,l().yK)((e=>({dragHandle:{marginLeft:2,height:20}})),[]),V=(0,a().VK)((()=>"section"===o&&!r&&b.canEdit()&&!H.isMobile),[o,r,b,H.isMobile]),K=(0,a().VK)((()=>b.canRead()),[b]),D=H.isPhone?(0,G.jsx)(te,{relatedPageStore:b,relationPropertySchema:j,rowType:o,pageStore:m,canEditTitle:V,shouldShowOverflow:!1,noUnderline:!1,relationTokenBlockStoreRef:E,onInsertInline:k,onTitleEsc:w,index:C}):(0,G.jsx)(ee,{collectionStore:v,property:L,relationPropertySchema:j,relatedPageStore:b,targetCollectionStore:I,blockPropertyValueOverlayStore:B,rowType:o,pageStore:m,index:C,onInsertInline:k,onTitleEsc:w,canEditTitle:V,shouldShowOverflow:!1,noUnderline:!1,disabled:r,relationTokenBlockStoreRef:E}),F=(0,a().VK)((()=>M().BI(T,L)),[T,L]),U=(0,a().VK)((()=>{const e=null==B?void 0:B.state;if(e&&e.isOpen)return e.format}),[B]),N=function(e){const{device:t,rowType:o,focused:n,disabled:i,locked:r,propertyLimit:a,limitReached:l,onSecondaryButtonClick:s,onOpenPageButtonClick:d,onActionButtonClick:c,isSelected:g,isGithubRelationProperty:y,peekMode:S,onClick:f,format:b}=e,m=!t.isMobile&&n&&!i&&"section"===o&&!p().o8(d),k=(t.isMobile||n)&&!r&&!i&&!l&&(void 0===a||a>1),w=!t.isMobile&&!r&&n&&!i&&"inline"===o&&!p().o8(s),M=k?function(e){const{isSelected:t,isGithubRelationProperty:o,onActionButtonClick:n,format:i}=e,r=t?z.defaultIsSelectedPrimaryButtonAriaLabel:z.defaultIsNotSelectedPrimaryButtonAriaLabel;let a;const l=t?R().g:P().R;a=i&&(0,h().xE)(i)?void 0:t?o?(0,G.jsx)(u()._H,{id:"database.relationMenuRow.tooltip.removePR.message",defaultMessage:"Unlink PR"}):(0,G.jsx)(u()._H,{id:"database.relationMenuRow.tooltip.removePage.message",defaultMessage:"Unlink page"}):o?(0,G.jsx)(u()._H,{defaultMessage:"Link PR",id:"database.relationMenuRow.tooltip.addPR.message"}):(0,G.jsx)(u()._H,{defaultMessage:"Link page",id:"database.relationMenuRow.tooltip.addPage.message"});return(0,G.jsx)(ne,{ariaLabel:x().Z.formatMessage(r),onClick:n,style:{borderRadius:3},icon:l,tooltipMessage:a})}({isSelected:g,isGithubRelationProperty:y,onActionButtonClick:c,format:b}):void 0,C=w?function(e){const{rowType:t,isSelected:o,isGithubRelationProperty:n,onClick:i}=e;let r;r="section"===t&&o?n?(0,G.jsx)(u()._H,{id:"database.relationMenuRow.tooltip.insertPRInline.message",defaultMessage:"Insert new PR"}):(0,G.jsx)(u()._H,{id:"database.relationMenuRow.tooltip.insertPageInline.message",defaultMessage:"Insert new page"}):n?(0,G.jsx)(u()._H,{id:"database.relationMenuRow.tooltip.insertPR.message",defaultMessage:"Link another PR"}):(0,G.jsx)(u()._H,{id:"database.relationMenuRow.tooltip.insertPage.message",defaultMessage:"Link another page"});const a="section"===t&&o?z.defaultIsSelectedSecondaryButtonAriaLabel:z.defaultIsNotSelectedSecondaryButtonAriaLabel;return(0,G.jsx)(ne,{ariaLabel:x().Z.formatMessage(a),onClick:i,style:{borderRadius:0},icon:P().R,tooltipMessage:r})}({rowType:o,isSelected:g,isGithubRelationProperty:y,onClick:f}):void 0,B=m&&void 0!==d?(0,G.jsx)(ue,{peekMode:S,showPrimaryButton:void 0!==M,showSecondaryButton:void 0!==C,onOpenPageButtonClick:d}):void 0;return(0,G.jsx)(ce,{primaryButton:M,secondaryButton:C,openPageButton:B})}({device:H,rowType:o,focused:n,disabled:!K||r,locked:s,propertyLimit:d,limitReached:c,isSelected:g,onSecondaryButtonClick:y,onOpenPageButtonClick:S,onActionButtonClick:f,isGithubRelationProperty:F,peekMode:A,onClick:()=>null==y?void 0:y(O.current),format:U});return(0,G.jsxs)(G.Fragment,{children:[t&&"popup"===o&&(0,G.jsx)(_().Z,{iconSize:12,style:Z.dragHandle}),D,N]})}function $(e){const{canDrag:t,rowType:o,disabled:n,relatedPageStore:r,pageStore:s,onInsertInline:d,onTitleEsc:c,index:u,blockPropertyValueOverlayStore:p,collectionStore:g,targetCollectionStore:y,property:S,relationTokenBlockStoreRef:f,propertySchema:h}=e,b=(0,i().Fy)(),m=(0,l().yK)((e=>({dragHandle:{marginLeft:2,height:20},iconWrapper:{display:"flex",alignItems:"center",marginLeft:"auto",height:24,padding:0,paddingRight:4},membersIcon:{width:16,height:16,fill:e.mediumIconColor,display:"inline-flex",alignItems:"center",justifyContent:"center"},permissionsListContainer:{paddingTop:8,paddingBottom:8,width:400}})),[]),k=(0,a().VK)((()=>"section"===o&&!n&&r.canEdit()&&!b.isMobile),[o,n,r,b.isMobile]),x=(0,G.jsxs)(G.Fragment,{children:[t&&"popup"===o&&(0,G.jsx)(_().Z,{iconSize:12,style:m.dragHandle}),(0,G.jsx)(te,{relatedPageStore:r,rowType:o,pageStore:s,relationPropertySchema:h,canEditTitle:k,shouldShowOverflow:!0,noUnderline:!0,relationTokenBlockStoreRef:f,onInsertInline:d,onTitleEsc:c,index:u})]}),w=(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(ee,{collectionStore:g,property:S,relationPropertySchema:h,relatedPageStore:r,targetCollectionStore:y,blockPropertyValueOverlayStore:p,rowType:o,pageStore:s,index:u,onInsertInline:d,onTitleEsc:c,canEditTitle:k,shouldShowOverflow:!0,noUnderline:!0,disabled:n,relationTokenBlockStoreRef:f}),(0,G.jsx)("div",{style:m.iconWrapper,children:(0,I().x)(m.membersIcon)})]}),M=(0,G.jsxs)(G.Fragment,{children:[t&&(0,G.jsx)(_().Z,{iconSize:12,style:m.dragHandle}),w]}),C="popup"===o?M:w;return b.isPhone?x:C}function q(e){const{canDrag:t,rowType:o,focused:n,disabled:r,locked:s,isSelected:d,onSecondaryButtonClick:c,onOpenPageButtonClick:g,onActionButtonClick:y,propertyLimit:S,relatedPageStore:f,pageStore:h,propertySchema:b,onInsertInline:m,onTitleEsc:k,index:w,blockPropertyValueOverlayStore:M,collectionStore:C,targetCollectionStore:B,property:v,relationTokenBlockStoreRef:I,outerRef:L,peekMode:j}=e,E=(0,i().Fy)(),O=(0,l().yK)((e=>({dragHandle:{marginLeft:2,height:20},iconWrapper:{display:"flex",marginLeft:"auto",alignItems:"center",justifyContent:"center",padding:0,height:24},icon:{width:16,height:16,fill:e.regularIconColor,display:"inline-flex",alignItems:"center",justifyContent:"center"}})),[]),A=(0,a().VK)((()=>"section"===o&&!r&&f.canEdit()&&!E.isMobile),[o,r,f,E.isMobile]),H=function(e){const{device:t,rowType:o,focused:n,disabled:i,locked:r,onSecondaryButtonClick:a,onOpenPageButtonClick:l,onActionButtonClick:s,isSelected:d,propertyLimit:c,peekMode:g,onClick:y}=e,S=!t.isMobile&&n&&!i&&("section"===o||"inline"===o)&&!p().o8(l),f=(t.isMobile||n)&&!r&&!i,h="section"!==o?(t.isMobile||n)&&!r&&!i&&1!==c&&"popup"===o&&d:f,b=!t.isMobile&&!r&&n&&!i&&!S&&"section"!==o&&!p().o8(a),m=h?function(e){const{isSelected:t,onActionButtonClick:o}=e,n=t?z.sprintIsSelectedPrimaryButtonAriaLabel:z.sprintIsNotSelectedPrimaryButtonAriaLabel,i=t?(0,G.jsx)(u()._H,{id:"database.relationMenuRow.tooltip.removePage.messageSprints",defaultMessage:"Remove this sprint"}):(0,G.jsx)(u()._H,{id:"database.relationMenuRow.tooltip.addPage.messageSprints",defaultMessage:"Add this sprint"});return(0,G.jsx)(ne,{ariaLabel:x().Z.formatMessage(n),onClick:o,style:{borderRadius:3},icon:t?R().g:P().R,tooltipMessage:i})}({isSelected:d,onActionButtonClick:s}):void 0,k=b?function(e){const{rowType:t,isSelected:o,onClick:n}=e,i="section"===t&&o?z.sprintIsSelectedSecondaryButtonAriaLabel:z.sprintIsNotSelectedSecondaryButtonAriaLabel,r="section"===t&&o?(0,G.jsx)(u()._H,{id:"database.relationMenuRow.tooltip.insertPageInline.message",defaultMessage:"Insert new page"}):(0,G.jsx)(u()._H,{id:"database.relationMenuRow.tooltip.insertPage.messageSprints",defaultMessage:"Move to a different sprint"});return(0,G.jsx)(ne,{ariaLabel:x().Z.formatMessage(i),onClick:n,style:{borderRadius:0},icon:P().R,tooltipMessage:r})}({rowType:o,isSelected:d,onClick:y}):void 0,w=S&&void 0!==l?(0,G.jsx)(ue,{peekMode:g,showPrimaryButton:void 0!==m,showSecondaryButton:void 0!==k,onOpenPageButtonClick:l}):void 0;return(0,G.jsx)(ce,{primaryButton:m,secondaryButton:k,openPageButton:w})}({device:E,rowType:o,focused:n,disabled:r,locked:s,isSelected:d,onSecondaryButtonClick:c,onOpenPageButtonClick:g,onActionButtonClick:y,propertyLimit:S,peekMode:j,onClick:()=>null==c?void 0:c(L.current)});return(0,G.jsxs)(G.Fragment,{children:[t&&"popup"===o&&(0,G.jsx)(_().Z,{iconSize:12,style:O.dragHandle}),E.isPhone?(0,G.jsx)(te,{relatedPageStore:f,rowType:o,pageStore:h,relationPropertySchema:b,canEditTitle:A,shouldShowOverflow:!0,noUnderline:!0,relationTokenBlockStoreRef:I,onInsertInline:m,onTitleEsc:k,index:w}):(0,G.jsx)(ee,{collectionStore:C,property:v,relatedPageStore:f,targetCollectionStore:B,blockPropertyValueOverlayStore:M,rowType:o,pageStore:h,relationPropertySchema:b,index:w,onInsertInline:m,onTitleEsc:k,canEditTitle:A,shouldShowOverflow:!0,noUnderline:!0,disabled:r,relationTokenBlockStoreRef:I}),d&&"popup"===o&&(0,G.jsx)("div",{style:O.iconWrapper,children:(0,T().k)(O.icon)}),H]})}function Q(e){const{rowContainer:t,disabled:o,locked:n,canDrag:r,rowType:s,targetCollectionStore:d,propertyLimit:c,hasMouseEntered:p,outerRef:g,handleMouseEnter:y,handleMouseLeave:S,onInsertInline:f}=e,h=(0,i().Fy)(),b=(0,l().yK)((e=>({menuItem:{display:"flex",alignItems:"center",width:`calc(100% + ${Y}px)`,paddingLeft:Y,position:"relative",left:-Y},tooltip:{color:e.mediumInvertedTextColor},icon:{width:16,height:16,fill:e.lightIconColor},iconHover:{borderRadius:4},iconButton:{marginLeft:r?-44:-22,position:"absolute",marginRight:4}})),[r]),m=(0,a().VK)((()=>d.canEdit()),[d]),k=!n&&!o&&"section"===s&&!h.isMobile&&!(1===c)&&m;return(0,G.jsxs)("div",{style:b.menuItem,onMouseEnter:y,onMouseLeave:S,ref:g,children:[p&&k&&(0,G.jsx)(N().Z,{renderTooltip:()=>(0,G.jsx)(u()._H,{defaultMessage:"Click <medium>to insert a page below</medium>",id:"database.relationMenuRow.tooltip.floatingAddPageButton.message",values:{medium:e=>(0,G.jsx)("span",{style:b.tooltip,children:e})}}),render:e=>(0,G.jsx)(D().Z,{hasBackground:!1,ariaLabel:x().Z.formatMessage(z.floatingInsertButtonAriaLabel),icon:P().R,iconStyle:b.icon,onClick:f,hoveredStyle:b.iconHover,style:b.iconButton,...e})}),t]})}function ee(e){const{relatedPageStore:t,targetCollectionStore:o,blockPropertyValueOverlayStore:r,rowType:s,pageStore:d,index:c,onInsertInline:u,onTitleEsc:g,canEditTitle:S,shouldShowOverflow:f,noUnderline:h,collectionStore:b,property:m,relationPropertySchema:k,disabled:x,relationTokenBlockStoreRef:w}=e,C=(0,i().Fy)(),R=(0,a().VK)((()=>{const e=o.getSchema();return e?b?M().U1({collectionStore:b,property:m}).filter((t=>t.visible&&("title"===t.property||e[t.property]))):[{property:"title",visible:!0}]:[]}),[o,b,m]),B=(0,a().VK)((()=>"section"!==s||(x||!t.canEdit()||C.isMobile)),[s,x,t,C.isMobile]),v=(0,l().yK)((e=>({wrapper:{display:"flex",marginRight:8,maxHeight:22,alignItems:"center",...y().Yu}})),[]);if(p().xb(R))return null;const P=R.map((e=>"title"===e.property?(0,G.jsx)(n.Fragment,{children:(0,G.jsx)(te,{relatedPageStore:t,relationPropertySchema:k,rowType:s,pageStore:d,canEditTitle:S,shouldShowOverflow:f,noUnderline:h,relationTokenBlockStoreRef:w,onInsertInline:u,onTitleEsc:g,index:c})},"title"):(0,G.jsx)(O().m,{store:t,property:e.property,disabled:B,locked:!1,format:"section"===s?H().C.RelationSection:H().C.Relation,tableWrap:!1,blockPropertyValueOverlayStore:r??j().Z,collectionStore:o},e.property)));return(0,G.jsx)("div",{style:v.wrapper,children:P})}function te(e){const{relatedPageStore:t,rowType:o,pageStore:n,relationPropertySchema:r,canEditTitle:a,shouldShowOverflow:s,noUnderline:d,relationTokenBlockStoreRef:u,onInsertInline:p,onTitleEsc:g,index:S}=e,f=(0,i().Fy)(),h=(0,l().yK)((e=>({wrapper:{display:"flex",alignItems:"center",flex:"0 1 auto",minHeight:0,...!s&&{minWidth:40},paddingLeft:"section"===o?4:6},relationToken:{display:"flex",alignItems:"center",margin:0,whiteSpace:"nowrap",marginRight:"section"===o?0:f.isTablet?8:0,minWidth:0},title:{...y().Yu,maxWidth:"100%"}})),[o,s,f.isTablet]);return(0,G.jsx)("div",{style:h.wrapper,children:(0,G.jsx)(W().Z,{ref:u,format:c().lo.Inline,blockId:t.id,isSingle:!0,parentStore:n,relationPropertySchema:r,noUnderline:d,style:h.relationToken,titleStyle:h.title,clickTitleBehavior:a?"edit":void 0,onTitleEnter:p,onTitleEsc:g,index:S},t.id)})}function oe(e){const{innerRelationMenuRow:t,handleButtonClick:o,canDrag:n,rowType:r,focused:a,disabled:s,limitReached:d,propertyLimit:c,hasMouseEntered:p,sectionOnClick:g,outerRef:y,onSecondaryButtonClick:S,onMouseEnter:f,onMouseLeave:h}=e,b=(0,i().O7)(),m=(0,l().yK)((e=>({container:{display:"flex",alignItems:"center",width:"100%"},tooltip:{color:e.mediumInvertedTextColor},icon:{width:14,height:14,fill:e.lightIconColor},iconHover:{borderRadius:4},iconButton:{cursor:"grab",width:K().C+4,marginLeft:-(K().C+4),height:24,borderRadius:4},row:le(r,e,a,d,c)})),[r,a,d,c]);return(0,G.jsxs)("div",{style:m.container,ref:y,children:["section"===r&&p&&n&&(0,G.jsx)(N().Z,{renderTooltip:()=>(0,G.jsx)(u()._H,{defaultMessage:"Drag <medium>to move</medium>",id:"database.relationMenuRow..dragPrompt.text",values:{medium:e=>(0,G.jsx)("span",{style:m.tooltip,children:e})}}),render:e=>(0,G.jsx)(D().Z,{hasBackground:!1,ariaLabel:x().Z.formatMessage(z.dragRowHandleAriaLabel),icon:v().D,iconStyle:m.icon,hoveredStyle:m.iconHover,style:m.iconButton,...e})}),"section"===r?(0,G.jsx)("div",{style:m.row,onContextMenu:e=>se(e,b),onMouseEnter:f,onMouseLeave:h,onClick:g,role:"button","aria-label":"Editable title","aria-disabled":s,tabIndex:s?-1:0,children:t}):(0,G.jsx)(N().Z,{disableTooltip:!(d&&c&&c>1),renderTooltip:()=>(0,G.jsx)(u()._H,{defaultMessage:"To select more, remove selection above",id:"database.relationMenuRow.limitReached"}),render:e=>(0,G.jsx)("div",{style:m.row,onContextMenu:e=>se(e,b),onMouseEnter:f,onMouseLeave:h,role:"button",tabIndex:s?-1:0,"aria-disabled":s,onClick:e=>{(0,k().ZP)({event:e,context:k().Af.EditorClick,callback:()=>{(0,w().uG)(e)||(S?S(y.current):o(e))}})},...e,children:t})})]})}function ne(e){const{caption:t,onClick:o,style:n,icon:i,tooltipMessage:r,ariaLabel:a}=e;return(0,G.jsx)(N().Z,{renderTooltip:()=>r,disableTooltip:(0,g().Rw)(r),render:e=>(0,G.jsx)(D().Z,{hasBackground:!1,ariaLabel:a,icon:i,onClick:o,caption:t,hoveredStyle:{borderRadius:4},style:{height:20,width:20,flex:"0 0 auto",...n},...e})})}function ie(e){let{onActionButtonClick:t}=e;return(0,G.jsx)(V().Z,{mobileFeedback:!0,onClick:t,style:{padding:12,marginRight:-12},children:(0,B().U)({width:20,height:20})})}function re(e){const{rowType:t,relatedPageStore:o,pageStore:i,onInsertInline:r,onTitleEsc:a,index:s,disabled:d,isSelected:c,propertySchema:u,...p}=e,g=n.useRef(null),y=(0,l().yK)((e=>({container:{display:"flex",alignItems:"center"},iconWrapper:{display:"flex",alignItems:"center",marginLeft:"auto",height:24,padding:0},titleWrapper:{flex:1,overflow:"hidden",paddingRight:16},membersIcon:{width:16,height:16,fill:e.mediumIconColor,display:"inline-flex",alignItems:"center",justifyContent:"center"}})),[]),S=!d&&c,f=!d&&!c;return(0,G.jsx)(F().ZP,{...p,title:(0,G.jsxs)("div",{style:y.container,children:[(0,G.jsx)("div",{style:y.titleWrapper,children:(0,G.jsx)(te,{relatedPageStore:o,relationPropertySchema:u,rowType:t,pageStore:i,canEditTitle:!1,shouldShowOverflow:!0,noUnderline:!0,relationTokenBlockStoreRef:g,onInsertInline:r,onTitleEsc:a,index:s})}),S&&(0,G.jsx)(ie,{onActionButtonClick:t=>{e.onActionButtonClick(t),t.stopPropagation()}}),f&&(0,G.jsx)("div",{style:y.iconWrapper,children:(0,I().x)(y.membersIcon)})]})})}function ae(e){const t=!e.disabled&&e.isSelected;return(0,G.jsx)(U().Z,{...e,store:e.relatedPageStore,hidePath:!0,right:t?(0,G.jsx)(ie,{onActionButtonClick:e.onActionButtonClick}):void 0})}function le(e,t,o,n,i){const r=n&&i&&i>1;return{...y().Yu,display:"flex",alignItems:"center",position:"relative",borderRadius:4,width:"100%",height:M().Mu,paddingTop:2,paddingRight:4,paddingBottom:2,paddingLeft:"popup"!==e?2:0,fontSize:Z().z6,margin:"popup"===e?"0px 4px":0,cursor:r?"default":"pointer",background:o&&!r?t.buttonHoveredBackground:void 0,userSelect:"none",opacity:r?.4:1}}function se(e,t){const{device:o}=t;o.isAndroid&&o.isPhone&&e.preventDefault()}const de={position:"absolute",top:4,display:"inline-flex",flexShrink:0,borderRadius:4,overflow:"hidden",padding:2,gap:1};function ce(e){const{primaryButton:t,secondaryButton:o,openPageButton:n}=e,i=(0,l().yK)((e=>({relationButtonWrapperStyle:{right:6,background:e.popoverBackground,boxShadow:e.lightBoxShadow,...de}})),[]);return(0,G.jsxs)(G.Fragment,{children:[(t||o)&&(0,G.jsxs)("div",{style:i.relationButtonWrapperStyle,children:[t,o]}),n]})}function ue(e){const t=(0,l().yK)((t=>({relationButtonWrapperStyle:{position:"absolute",right:e.showPrimaryButton||e.showSecondaryButton?36:6,background:t.popoverBackground,boxShadow:t.lightBoxShadow,...de}})),[e.showPrimaryButton,e.showSecondaryButton]);return(0,G.jsx)("div",{style:t.relationButtonWrapperStyle,children:(0,G.jsx)(A().Z,{...e})})}function pe(e,t,o,n,i,r,a,l,d){(0,k().ZP)({event:e,context:k().Af.EditorClick,callback:()=>{if(!(0,w().uG)(e))if(i||l){const i=m().DJ(e),a=o===n.id?E().default.state.resultsStore:void 0,l=o===n.id?E().default.state.collectionContextStore:void 0;f().CH({environment:t,store:r,peekMode:d,openInNew:i,resultsStore:a,collectionContextStore:l,pageVisitSource:s().tY.PeekOpen}),S().XX(t,{from:"relation_section",meta_click:Boolean(i)})}else a(e)}})}},48395:(e,t,o)=>{o.d(t,{x:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("settingsMembersFilled",{viewBox:"0 0 20 13",svg:(0,n.jsx)("path",{d:"M13.582 6.00293C15.0723 6.00293 16.3369 4.67676 16.3369 2.96094C16.3369 1.28613 15.0654 0.0078125 13.582 0.0078125C12.0986 0.0078125 10.8203 1.30664 10.8271 2.97461C10.8271 4.67676 12.0918 6.00293 13.582 6.00293ZM5.67969 6.16016C6.97852 6.16016 8.0791 4.99805 8.0791 3.50781C8.0791 2.04492 6.97168 0.9375 5.67969 0.9375C4.3877 0.9375 3.27344 2.06543 3.28027 3.52148C3.28027 4.99805 4.38086 6.16016 5.67969 6.16016ZM1.91309 12.3604H7.0332C6.30859 11.3145 7.1084 9.25 8.64648 8.04688C7.89453 7.55469 6.91016 7.19922 5.67969 7.19922C2.62402 7.19922 0.648438 9.44824 0.648438 11.3076C0.648438 11.9775 0.990234 12.3604 1.91309 12.3604ZM9.31641 12.3604H17.8408C18.9619 12.3604 19.3516 12.0186 19.3516 11.3965C19.3516 9.63281 17.123 7.21289 13.5752 7.21289C10.0342 7.21289 7.80566 9.63281 7.80566 11.3965C7.80566 12.0186 8.19531 12.3604 9.31641 12.3604Z"})})}}]);