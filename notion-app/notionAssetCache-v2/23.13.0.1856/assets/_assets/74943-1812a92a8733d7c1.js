"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[74943],{128178:(e,t,r)=>{r.d(t,{I:()=>i,O:()=>o});var n=()=>r(132329);function o(e){const{cursors:t,rootStore:r}=e,o={};for(const n of t)for(const e of n.stack)for(const t of e)o[t.id]=t.index;n().default.setLimitParents(r,o)}function i(e){n().default.removeLimitParents(e.rootStore)}},169158:(e,t,r)=>{r.d(t,{T:()=>F,Z:()=>N});r(821057),r(122556),r(582845),r(250570),r(533019),r(721473),r(788208),r(22624),r(267602),r(241792),r(228244);var n=r(667294),o=()=>r(219727),i=()=>r(142735),a=()=>r(846550),s=()=>r(467171),l=()=>r(28162),c=()=>r(844085),d=()=>r(106502),u=()=>r(887430),p=()=>r(788860),f=()=>r(568017),g=()=>r(707513),h=()=>r(491927),m=r(785893);const v=(0,r(827282).IU)("unavailableOffline",{viewBox:"0 0 26 24",svg:(0,m.jsx)("g",{children:(0,m.jsx)("path",{d:"M6.574 19.645a6.3 6.3 0 0 1-2.314-.42 6.1 6.1 0 0 1-1.865-1.143 5.3 5.3 0 0 1-1.23-1.69 4.8 4.8 0 0 1-.44-2.03q0-1.192.43-2.198a4.44 4.44 0 0 1 1.24-1.67 3.94 3.94 0 0 1 1.914-.84q0-.36.068-.693a3.2 3.2 0 0 1 .215-.625L5.89 9.635q-.079.225-.118.478-.039.255-.039.547 0 .195-.185.195-1.036 0-1.768.47-.723.468-1.103 1.269a4 4 0 0 0-.381 1.767q0 .997.557 1.846.555.84 1.523 1.357.966.508 2.197.508h7.764l1.582 1.573zm14.61-.166-1.407-1.407h.244q1.035 0 1.866-.44a3.5 3.5 0 0 0 1.328-1.18 2.94 2.94 0 0 0 .488-1.651q0-1.329-.8-2.246-.791-.918-2.12-1.211-.176-.039-.156-.225.03-.341.039-.713a7 7 0 0 0 0-.722 5.9 5.9 0 0 0-.8-2.686 5.6 5.6 0 0 0-1.954-1.992q-1.23-.762-2.832-.762-1.26 0-2.197.42a4.9 4.9 0 0 0-1.592 1.113 8 8 0 0 0-1.143 1.543q-.078.146-.244.098a3 3 0 0 0-.459-.098 2.2 2.2 0 0 0-.459-.029L7.492 5.797q.469-.117.947-.117a3.3 3.3 0 0 1 .938.117 8 8 0 0 1 1.406-1.563 6.6 6.6 0 0 1 1.895-1.132q1.074-.43 2.402-.43 1.505 0 2.793.557a6.7 6.7 0 0 1 2.266 1.562 7.1 7.1 0 0 1 1.513 2.383q.537 1.366.537 2.998a5 5 0 0 1 2.715 2.705q.372.898.371 1.924 0 1.142-.517 2.119a4.8 4.8 0 0 1-1.445 1.65 5.4 5.4 0 0 1-2.13.909Zm-1.143 2.646L3.732 5.835a.75.75 0 0 1-.214-.526q0-.322.214-.538a.72.72 0 0 1 .528-.214.71.71 0 0 1 .547.214l16.298 16.29a.67.67 0 0 1 .215.527.75.75 0 0 1-.215.537.75.75 0 0 1-.537.215.74.74 0 0 1-.527-.215"})})});var S=()=>r(804217),b=()=>r(906651);function y(){const e=(0,o().O7)(),t=(0,i().VK)((()=>S().default.state.online),[]);let r;return(0,n.useEffect)((()=>{t||h().DC(e,{type:"page_error_indicator"})}),[t,e]),r=t?(0,m.jsx)(p()._H,{defaultMessage:"Oops, there was an error loading this page. Refresh to load it again.",id:"pageErrorIndicator.loadingError.message"}):e.defaultRecordCache.persistedRecordCache?(0,m.jsx)(p()._H,{defaultMessage:"Please go online to load this page, then you'll be able to access it while offline.",id:"pageOfflineIndicator.hasLocalData.message"}):(0,m.jsx)(p()._H,{defaultMessage:"Oops, you seem to be offline. Please go online to view this page.",id:"pageOfflineIndicator.noLocalData.message"}),(0,m.jsxs)("div",{style:I(e),children:[(0,m.jsx)("div",{style:R(e),children:r}),(0,m.jsx)(b().Z,{isLarge:!0,onClick:()=>window.location.reload(),children:(0,m.jsx)(p()._H,{defaultMessage:"Refresh",id:"pageErrorIndicator.reloadButton.label"})})]})}function C(){const e=(0,o().O7)(),t=(0,i().VK)((()=>S().default.state.online),[]);(0,n.useEffect)((()=>{t||h().DC(e,{type:"page_error_indicator"})}),[t,e]);const r=(0,a().yK)((t=>({container:{height:"100%",minHeight:`calc(100vh - ${2*s().R6(e.device.isElectronMac)}px)`,maxWidth:400,paddingLeft:e.device.isMobile?16:32,paddingRight:e.device.isMobile?16:32,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},icon:{width:29,height:24,fill:t.text.secondary,marginBottom:8},title:{fontWeight:g().Ue.medium,color:t.text.secondary,textAlign:"center"},description:{color:t.text.secondary,textAlign:"center"}})),[e.device]);let l,c;return t?(l=(0,m.jsx)(p()._H,{defaultMessage:"Oops, there was an error loading this page.",id:"pageErrorIndicator.loadingError.title"}),c=(0,m.jsx)(p()._H,{defaultMessage:"Refresh to load it again.",id:"pageErrorIndicator.loadingError.description"})):(l=(0,m.jsx)(p()._H,{defaultMessage:"This page is not available while offline.",id:"pageOfflineIndicator.unavailableError.title"}),c=(0,m.jsx)(p()._H,{defaultMessage:"Please return online to access this content{hasLocalData, select, true { or sync the page} other {}}.",id:"pageOfflineIndicator.unavailableError.description",values:{hasLocalData:Boolean(e.defaultRecordCache.persistedRecordCache)}})),(0,m.jsxs)("div",{style:r.container,children:[v(r.icon),(0,m.jsx)("div",{style:r.title,children:l}),(0,m.jsx)("div",{style:r.description,children:c})]})}const k=function(){return(0,r(466970).E)("download_for_offline")?(0,m.jsx)(C,{}):(0,m.jsx)(y,{})};function R(e){const{device:t}=e;return{fontSize:t.isMobile?18:32,marginBottom:8,textAlign:"center",color:f().ZP.uiBlack,maxWidth:640,lineHeight:1.3}}function I(e){const{device:t}=e;return{height:"100%",minHeight:`calc(100vh - ${2*s().R6(e.device.isElectronMac)}px)`,paddingLeft:t.isMobile?16:32,paddingRight:t.isMobile?16:32,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}}var x=()=>r(254805),_=()=>r(299519),w=()=>r(770455),T=()=>r(718959),M=()=>r(982855),V=()=>r(814139),E=()=>r(105649),P=()=>r(589525),B=()=>r(291335),O=()=>r(876822),K=()=>r(725751),j=()=>r(9599),A=()=>r(72041),L=()=>r(482162),Z=()=>r(890324),D=()=>r(192425),q=()=>r(881266);const F="1.375em",N=n.memo((function(e){const{store:t,routerState:c}=e,d=(0,o().O7)(),{RouterStore:u}=d,p=(0,o().Fy)(),f=(0,n.useCallback)((e=>{D().Z.state&&("scroll"===e?D().Z.state.hadScroll||(D().Z.setState({...D().Z.state,hadScroll:!0}),l().Kk(d,{interactionType:e})):"click"===e?D().Z.state.hadClick||(D().Z.setState({...D().Z.state,hadClick:!0}),l().Kk(d,{interactionType:e})):"copy"===e?D().Z.state.hadCopy||(D().Z.setState({...D().Z.state,hadCopy:!0}),l().Kk(d,{interactionType:e})):(0,r(696459).t1)(e))}),[d]);(0,n.useEffect)((()=>{if(f){const e=()=>{f("copy")};return window.addEventListener("copy",e),()=>window.removeEventListener("copy",e)}}),[f]),(0,n.useEffect)((()=>()=>t&&r(128178).I({rootStore:t})),[t]);const g=(0,i().SI)((()=>t?Z().Z.getMode(d,t):Z().m.disabled),[d,t]),h=(0,i().SI)((()=>(0,M().GD)(g.state)),[g]),v=(0,i().VK)((()=>{if(!t)return;const{presenceStore:e,pageVisitStore:r}=O().default.state;return{pageStore:t,presenceStore:e,pageVisitStore:r,publicEditModeStore:g,arePublicEditCompletionsEnabledStore:h}}),[h,g,t]),S=(0,i().VK)((()=>d.currentUser.isLoggedIn()),[d]),{isInvalidPage:b,isAppInitializationScreen:y,appContainerStore:C,isHome:k,shouldShowAddTo:R}=(0,i().VK)((()=>{if(!t)return{isInvalidPage:!0,isAppInitializationScreen:!1,appContainerStore:void 0,isHome:!1,shouldShowAddTo:!1};const e=d.currentUser.id===t.getCreatedById()&&t.getCreatedByTable()===r(989478).KJ;return{isInvalidPage:Boolean(!t.isDefined()||!t.canRead()),isAppInitializationScreen:Boolean(t.getAppContainerBlockStore()),appContainerStore:t.getAppContainerBlockStore(),isHome:"personal_home_page"===t.getType(),shouldShowAddTo:Boolean(c.route.showMoveTo&&t.canEdit()&&S&&e)}}),[t,c.route,S,d.currentUser]),I=(0,i().VK)((()=>O().default.state.mainEditorCurrentBlockStore),[]),x=(0,i().VK)((()=>T().h1(d)),[d]),_=(0,a().Fg)(),V=(0,i().VK)((()=>(0,r(772529).WE)(I)),[I]),A=(0,i().VK)((()=>{var e;return Boolean(null===(e=K().default.state.preferences)||void 0===e?void 0:e.isVibrancyEnabled)}),[]),L=(0,i().VK)((()=>{const e="team"===c.route.name,t={flexGrow:0,flexShrink:1,display:"flex",flexDirection:"column",background:V||e?A?`rgba(255, 255, 255, ${r(455018).V})`:(0,r(170210).$1)({theme:_,isPhone:p.isPhone}):_.contentBackground,zIndex:r(492522).Wi,height:p.isMobile?"100vh":`calc(100vh - ${s().R6(p.isElectronMac)}px)`,maxHeight:"100%",position:"relative",...V?{height:"100%",position:"absolute"}:{}};if(!(0,P().Jr)(d)){const e=B().sidebarOpenStore.state;(0,P().YR)(d)||(t.boxShadow=_.mediumBoxShadow),t.pointerEvents=e?"none":"auto",t.transform="translateX(0)"}return!x&&p.isMobileNative&&(t.pointerEvents="auto",t.transform="translateX(0px)"),t}),[c.route.name,V,A,_,p.isPhone,p.isMobile,p.isElectronMac,p.isMobileNative,d,x]),q=(0,i().VK)((()=>"nativeTab"===u.state.route.name),[u]),[F,N]=(0,i().VK)((()=>{const e=(0,P().$3)(d);return[e,e+(0,P().vJ)(d)]}),[d]),G=(0,i().VK)((()=>r(123145).VV()),[]),J=(0,i().VK)((()=>E().default.isTogglingToPanelModeState()),[]),Y=(0,i().Kw)(B().sidebarResizingStore),Q=(0,i().VK)((()=>Boolean(K().default.state.isShowingTabBar)),[]),ee=(0,i().VK)((()=>j().Z.state.banners),[]),te=(0,i().VK)((()=>!Q&&!(0,P().in)(d)&&!E().default.isPanelPinnedState()),[d,Q]),re=(0,i().VK)((()=>(0,P().in)(d)),[d]),ne=(0,i().Kw)(r(178786).d),oe=(0,i().VK)((()=>d.WindowSizeStore.state.paddingTop),[d.WindowSizeStore]),ie=(0,a().yK)((()=>({frameContainer:{order:r(88829).Z.appCursorListener.editor,display:"flex",flexDirection:"column",width:p.isTablet?"unset":"100%",overflow:p.isTablet?"unset":"hidden",isolation:"auto",background:ne.attached?"black":"transparent"},sheetInset:ne.attached?{borderRadius:12*ne.proportion+"px",transform:`scale(${1-.08*ne.proportion}, ${1-.035*ne.proportion}) translateY(${.8*oe*ne.proportion}px)`,willChange:"transform"}:{}})),[p.isTablet,ne,oe]),ae=(0,i().Kw)(r(660293).X),se=(0,i().VK)((()=>null==t?void 0:t.canEdit()),[t]),le=(0,i().VK)((()=>O().default.state.currentSpaceViewStore),[]);return(0,m.jsx)(U,{pageContext:v,children:(0,m.jsxs)("div",{className:q?"hidden":"",style:ie.frameContainer,children:[!p.isMobile&&!y&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(r(382736).Z,{...e,showSidebarButton:te,isElectron:p.isElectron,isInvalidPage:b,banners:ee}),p.isElectronWindows&&!Q&&(0,m.jsx)(r(755589).m,{})]}),(0,m.jsxs)(r(628370).Z,{tag:"main",animate:{width:V?N:F,...ne.attached?{}:{translateX:G}},skip:Q&&Y.isResizing||J||p.isMobile||ae,style:{...L,...ie.sheetInset},className:r(247724).Wiy,children:[p.isMobile&&(0,m.jsx)(X,{children:(0,m.jsx)(w().WW,{...e,isInvalidPage:b,shouldShowAddTo:R,banners:ee,isSidebarExpanded:re,spaceViewStore:le})}),C?(0,m.jsx)(W,{appContainerStore:C}):"team"===c.route.name?(0,m.jsx)(r(922003).Ej,{teamId:c.route.teamId}):k&&t?(0,m.jsx)(z,{store:t}):t?(0,m.jsx)($,{store:t,routerState:c,maybeLogSearchInteractionEvent:f}):null,S&&p.isMobile&&t&&(0,m.jsx)(H,{store:t,shouldShowMoveTo:Boolean((c.route.showMoveTo||p.isTablet)&&se)}),p.isMobileNative&&S&&I&&(0,m.jsx)(w().qV,{})]})]})})}));function U(e){let{pageContext:t,children:n}=e;return t?(0,m.jsx)(r(893403).M,{value:t,children:n}):(0,m.jsx)(m.Fragment,{children:n})}function W(e){let{appContainerStore:t}=e;return(0,m.jsx)("div",{style:{position:"absolute",height:"100vh",width:"100%"},children:(0,m.jsx)(r(544903).D8,{collectionViewBlockStore:t})})}function H(e){var t;let{store:r,shouldShowMoveTo:a}=e;const s=(0,o().O7)(),l=(0,i().VK)((()=>{var e;return null===(e=s.mobileNative)||void 0===e?void 0:e.api.renderMobileActionBar}),[null===(t=s.mobileNative)||void 0===t?void 0:t.api.renderMobileActionBar]),c=(0,n.useCallback)((e=>{const{isMobileNative:t}=s.device;return(0,m.jsx)(w().Js,{stores:e,position:t?V().nd.Bottom:V().nd.Floating,currentBlockStore:r})}),[s.device,r]);return s.device.isMobileNative?(0,m.jsx)(w().Gr,{currentBlockStore:r,isNativeMobileActionBar:!0,makeActionBarComponent:e=>(0,m.jsx)(w().eU,{renderApi:l,stores:e,currentBlockStore:r,shouldShowMoveTo:a,fallbackRenderer:c})}):(0,m.jsx)(w().Gr,{currentBlockStore:r,isNativeMobileActionBar:!1,makeActionBarComponent:c})}const z=n.memo((function(e){let{store:t}=e;return(0,m.jsx)(_().Z,{disable:!0,store:t,isDefaultContainer:!0,render:()=>(0,m.jsx)(r(284047).Vd,{})})}));function $(e){let{store:t,routerState:a,maybeLogSearchInteractionEvent:s}=e;const l=(0,o().O7)(),{RouterStore:c}=l,{historyState:d}=a,{currentLoadingContainerStore:u,pageVisitStore:p}=(0,i().VK)((()=>{const{currentLoadingContainerStore:e,pageVisitStore:t}=O().default.state;return{currentLoadingContainerStore:e,pageVisitStore:t}}),[]),f=(0,i().VK)((()=>d&&r(513670).hj(d.scrollTop)?d.scrollTop:void 0),[d]),g=(0,i().VK)((()=>Boolean((0,r(122479).IJ)(l,t))),[l,t]),h=(0,i().VK)((()=>Boolean(L().default.isCenterPeekOpen()||r(21688).Z.state.open)),[]);return(0,m.jsx)(_().Z,{store:t,isDefaultContainer:!0,droppable:!0,isRootContainer:!0,disableRectangularSelection:g,disable:h,render:e=>{let{selectableEvents:o,selectableHoverMenuOverlay:i}=e;const d=r(203927).uE(c),g={pageStore:t,pageVisitStore:p,scrollToBlockIds:d,scrollToDiscussionId:d.length?void 0:a.route.discussionId,scrollToPosition:f,onReady:()=>{r(411004).Y(l,{animateScrollToBlocks:!1})},onDone:()=>{t.isCollectionView()||"rendered"===O().default.state.renderPhase||O().default.setState({...O().default.state,renderPhase:"rendered"})},initialChunkSize:r(526122).OZ,incrementChunkSize:30,render:e=>{let{scrollerRef:r,error:n,ready:a,initialRequestCompleted:l,endOfResultsReached:c,isCollectionInPage:d}=e;return(0,m.jsx)(G,{scrollerRef:r,store:t,error:n,ready:a,initialRequestCompleted:l,endOfResultsReached:c,isCollectionInPage:d,selectableEvents:o,selectableHoverMenuOverlay:i,maybeLogSearchInteractionEvent:s})}};return(0,m.jsx)(n.Suspense,{fallback:(0,m.jsx)(q().Z,{isVisible:!0,store:t}),children:(0,m.jsx)(r(243126).F,{...g,store:u})})}},t.id)}const G=n.memo((function(e){let{store:t,error:s,ready:l,initialRequestCompleted:p,endOfResultsReached:f,isCollectionInPage:g,selectableEvents:h,selectableHoverMenuOverlay:v,maybeLogSearchInteractionEvent:S,scrollerRef:b}=e;const y=(0,o().O7)(),C=(0,o().Fy)(),{publicEditModeStore:k}=(0,r(657320).l)()??{},R=(0,i().VK)((()=>(0,M().GD)(null==k?void 0:k.state)),[k]),I=(0,n.useCallback)((e=>{let{startTime:n,endTime:o}=e;const i=u().fm(t);r(620218).default.DO_NOT_USE_measureLegacy({metricName:"collections.max_scroll_lag_in_session",startTime:n,endTime:o},{environment:y,data:r(861026).vS(i)})}),[y,t]),_=(0,n.useCallback)((e=>{if(r(832924).default.PageScroller=e,e){const t=e.getNode();t instanceof HTMLElement&&(b.current=t)}}),[b]),w=(0,n.useCallback)((()=>{S("scroll")}),[S]),V=(0,n.useCallback)((e=>{h.onClick(e),S("click")}),[S,h]),E=(0,i().VK)((()=>t.isCollectionView()),[t]),P=(0,i().VK)((()=>function(e){const t=(0,x().EA)(e);return"number"==typeof t?`${t}px`:t}(y)),[y]),B=(0,a().yK)((()=>({spinner:{zIndex:1,opacity:.5,width:F,height:F,marginTop:`calc(-${F} / 2 - ${P} / 2)`,marginBottom:24,marginLeft:"auto",marginRight:"auto"},scroller:{display:"flex",flexDirection:"column",zIndex:1,flexGrow:1,position:"relative",...l?{}:{opacity:0,pointerEvents:"none",height:0},...E?{}:{alignItems:"center"}}})),[P,E,l]),O=(0,i().VK)((()=>j().Z.state.banners.some((e=>"over_free_block_limit"===e.contentKey))),[]),K=(0,i().Kw)(r(897257).subscriptionDataStoreInstance),Z=(0,r(30795).V)(K),D=(0,i().VK)((()=>(0,r(548812).vT)(Z)),[Z]),N=(0,i().VK)((()=>L().default.isSidePeekOpen()?void 0:l?c().Q7(y):r(520849).Z.All),[y,l]),U=(0,i().VK)((()=>T().Zy({environment:y,store:t})),[y,t]);return(0,m.jsxs)(n.Fragment,{children:[(0,m.jsxs)(r(842574).Z,{ref:_,onScrollLagMeasure:g?I:void 0,onScroll:w,preventType:N,type:U,style:B.scroller,store:A().Z,...h,onClick:V,children:[v,!C.isPhone&&R&&(0,m.jsx)(d().GC,{scrollerStore:A().Z}),(0,m.jsx)(r(632775).vo,{scrollerStore:A().Z}),(0,m.jsx)(r(83003).g,{blockStore:t}),D&&O&&(0,m.jsx)(r(605385).R,{}),(0,m.jsx)(r(451191).g4,{blockStore:t}),p&&(0,m.jsx)(J,{store:t,error:s}),l&&!f&&!(p&&s)&&(0,m.jsx)(r(312578).Z,{style:B.spinner})]}),C.isPhone&&R&&(0,m.jsx)(d().GC,{scrollerStore:A().Z}),!C.isPhone&&R&&(0,m.jsx)(d().vK,{scrollerKey:"Page"}),(0,m.jsx)(q().Z,{isVisible:!l,store:t})]})})),J=n.memo((function(e){let{store:t,error:s}=e;const{pageVisitStore:l,presenceStore:d,currentLoadingContainerStore:p}=(0,i().VK)((()=>{const{pageVisitStore:e,presenceStore:t,currentLoadingContainerStore:r}=O().default.state;return{pageVisitStore:e,presenceStore:t,currentLoadingContainerStore:r}}),[]),f=(0,o().O7)(),{WindowSizeStore:g,device:h}=f,v=(0,i().VK)((()=>g.state.height),[g]),[b,y]=(0,i().VK)((()=>{const e=(0,P().$3)(f),n=Math.max(r(191586).zL,e),o=e+(0,P().vJ)(f),i=(0,u().Ks)(t)&&!t.isFullWidth()?n:o,a=h.isMobile&&r(543842).Z.state.open?v:0;return[i,(0,x().EA)(f,c()._4(f)+a)]}),[h.isMobile,v,f,t]),C=(0,i().VK)((()=>L().default.isSidePeekOpen()||L().default.isSidePeekClosingStore.state),[]),R=(0,r(147861).xU)(),I=(0,a().yK)((()=>({pageViewBlockStyle:C?{width:b,position:"absolute",overflowX:"hidden",left:0}:Y})),[C,b]),_=(0,i().VK)((()=>{var e;return new Set(null===(e=r(63317).Z.get(t.getSpaceId()))||void 0===e?void 0:e.map((e=>e.pageId)))}),[t]),w=(0,i().VK)((()=>{if(!f.currentUser.isLoggedIn())return!1;const e=p&&!p.state.endOfResultsReached,n=t.isDefined()&&!t.canRead(),o=!S().default.state.online&&h.isElectron&&r(749826).default.checkGate({gateName:"download_for_offline"})&&!r(991007)._(t.id)&&!_.has(t.id);return e&&s||n||o}),[f.currentUser,p,t,h.isElectron,s,_]),T=(0,i().VK)((()=>!1===(null==p?void 0:p.state.endOfResultsReached)),[p]),M=(0,i().VK)((()=>t.canRead()&&t.isDefined()),[t]);return(0,n.useEffect)((()=>{if(w){const e=s||new Error("Page loading error");r(680146).rn(e,{from:"Frame.PageContainerContent",type:"pageLoadingError",data:{pageId:t.id,miscDataToConvertToString:{isLoading:T,canRead:M}}})}}),[w,T,M,s,t.id]),w?(0,m.jsx)(k,{}):(0,m.jsxs)(n.Fragment,{children:[R?(0,m.jsx)(r(243903).K,{}):null,(0,m.jsx)(x().ZP,{context:r(311562).S.Frame,style:I.pageViewBlockStyle,store:t,paddingBottom:y,disabled:!1}),(0,m.jsx)(r(665444).Z,{pageVisitStore:l,presenceStore:d,isPeekView:!1})]})})),Y={};function X(e){const{children:t}=e,n=(0,a().yK)((()=>({mobileTopbarPlaceholder:{minHeight:r(751052).g5,display:"flex",flexShrink:0}})),[]);return(0,m.jsx)("div",{style:n.mobileTopbarPlaceholder,children:t})}},243126:(e,t,r)=>{r.d(t,{F:()=>a});r(667294);var n=()=>r(142735),o=()=>r(745096),i=r(785893);function a(e){const{render:t,...r}=e,a=(0,o().Z)(r);return(0,i.jsx)(i.Fragment,{children:(0,n().VK)((()=>t(a)),[t,a])})}},745096:(e,t,r)=>{r.d(t,{Z:()=>W});r(821057),r(267602),r(653476),r(470928),r(749411);var n=r.n(r(467266)),o=r(667294),i=()=>r(504008),a=()=>r(492788),s=()=>r(219727),l=()=>r(142735),c=()=>r(926724),d=()=>r(156642),u=()=>r(565630),p=()=>r(741633),f=()=>r(217465),g=()=>r(81954),h=()=>r(680146),m=()=>r(720866),v=()=>r(513670),S=()=>r(839002),b=()=>r(342792),y=()=>r(696459),C=()=>r(418216),k=()=>r(128178),R=()=>r(853686),I=()=>r(401411),x=()=>r(143346),_=()=>r(203927),w=()=>r(824462);var T=()=>r(423402),M=()=>r(600785),V=()=>r(148976),E=()=>r(111599),P=()=>r(275200),B=()=>r(391995),O=()=>r(113501),K=()=>r(32969),j=()=>r(658096),A=()=>r(876822),L=()=>r(804217),Z=()=>r(749826),D=()=>r(688789),q=()=>r(601952),F=()=>r(842918),N=()=>r(822851);let U=!1;function W(e){return function(e){!function(e){const{pageStore:t,store:r}=e,{initialRequestCompleted:n,error:i}=(0,l().VK)((()=>({initialRequestCompleted:r.state.initialRequestCompleted,error:r.state.error})),[r]);(0,o.useEffect)((()=>{if(n&&!i)return O().Z.trackPage(t),()=>{O().Z.untrackPage(t)}}),[n,i,t])}(e);const{isCollectionInPage:t,updateIsCollectionInPage:r}=function(){const e=(0,s().O7)(),[t,r]=(0,o.useState)(!1),n=(0,o.useCallback)((r=>{var n;const{page:o,recordMap:i,inMemoryRecordCache:a}=r;if(t)return!0;const s=null===(n=a.getRecord({pointer:{table:"block",id:o.id,spaceId:o.spaceId},userId:e.currentUser.id}))||void 0===n?void 0:n.value;if(s)for(const e of i.getByTable("block")){var l,c,d;if(("collection_view"===(null===(l=e.value)||void 0===l||null===(l=l.value)||void 0===l?void 0:l.type)||"collection_view_page"===(null===(c=e.value)||void 0===c||null===(c=c.value)||void 0===c?void 0:c.type))&&s.parent_id!==(null===(d=e.value)||void 0===d||null===(d=d.value)||void 0===d?void 0:d.collection_id))return!0}return!1}),[e,t]);return{isCollectionInPage:t,updateIsCollectionInPage:(0,o.useCallback)((e=>{r(n(e))}),[n])}}(),n=(0,o.useRef)(null);(function(e){const{store:t,pageStore:r}=e,n=(0,s().O7)(),{loading:c,endOfResultsReached:d,initialRequestCompleted:u,error:g}=(0,l().VK)((()=>({loading:t.state.loading,endOfResultsReached:t.state.endOfResultsReached,initialRequestCompleted:t.state.initialRequestCompleted,error:t.state.error})),[t]),h=$(e),v=function(e){const{initialChunkSize:t,pageStore:r}=e,n=(0,s().O7)(),i=(0,s().Fy)(),a=z(e),l=H(e),c=$(e);return(0,o.useCallback)((async()=>{const e={page:{id:r.id,spaceId:r.getSpaceId()},limit:t,cursor:{stack:[]},verticalColumns:i.isMobile};try{return{firstPageChunkResult:await a({request:e,mode:"inMemoryOnly",isFirstChunk:!0})}}catch(g){}const o=function(e){const{pageId:t}=e,r=window.__serverSidePrefetchData;if(r&&(delete window.__serverSidePrefetchData,r.pageId===t)){const e=f().RecordMapWithRole.create(r.recordMap);return{source:"remoteV2",cursors:r.cursors,recordMap:e}}}({pageId:r.id});if(o)return{firstPageChunkResult:o};const s=J(e),d=s?n.prefetchCache.getPrefetchStatus(s):void 0,u=Boolean(n.defaultRecordCache.persistedRecordCache)&&"success"!==d,h=new AbortController,m=new AbortController,v=[...u?[a({request:e,mode:i.isAndroid?"inMemoryAndDiskCache":"inMemoryAndDiskCacheWithInexactPreload",isFirstChunk:!0,abortSignal:h.signal})]:[],l({request:e,headers:(0,p().Bb)({recordId:r.id,spaceId:r.getSpaceId()}),abortSignal:m.signal})];c.concurrentlyWithAsyncRequests();const S=await Promise.any(v);return"local"===S.source?m.abort():"remote"===S.source||"remoteV2"===S.source?h.abort():(0,y().t1)(S),{firstPageChunkResult:S}}),[c,i.isMobile,i.isAndroid,n.defaultRecordCache.persistedRecordCache,n.prefetchCache,t,a,l,r])}(e),b=function(e){const{pageStore:t,incrementChunkSize:r}=e,n=(0,s().Fy)(),i=z(e),a=H(e),l=$(e);return(0,o.useCallback)((async e=>{const{firstPageChunkResult:o}=e,s=e=>("remoteV2"===e.source?e.cursors:[e.cursor]).filter((e=>e.stack.length>0));let c=s(o);for(;c.length>0;){c=(await S().qd(c,10,(async e=>{const s={page:{id:t.id,spaceId:t.getSpaceId()},limit:r,cursor:e,verticalColumns:n.isMobile};let c;try{c="local"===o.source?await i({request:s,mode:"inMemoryAndDiskCache",isFirstChunk:!1}):await a({request:s,headers:(0,p().Bb)({cellId:"cellId"in e?e.cellId:void 0})})}catch(g){c="remoteV2"===o.source?{source:"remoteV2",cursors:[],recordMap:f().RecordMapWithRole.create({})}:{source:o.source,cursor:{stack:[]},recordMap:f().RecordMapWithRole.create({})}}return l.afterEachChunk(c),c}))).flatMap((e=>s(e)))}}),[l,n.isMobile,r,i,a,t])}(e);if(c||d||u&&g)return;async function k(){let e;t.setState({...t.state,loading:!0}),F().Z.markRequestFirstChunkStart(),q().default.state.initialRenderCompleted||C().setSubMetric({name:"render_end_to_await_page_chunk_start",startTime:e=>{var t;return null===(t=e.render_start_to_render_end)||void 0===t?void 0:t.endTime},endTime:performance.now()});try{e=(await v()).firstPageChunkResult}catch(g){return void x(g)}if(!q().default.state.initialRenderCompleted){C().setSubMetric({name:"await_page_chunk_start_to_await_page_chunk_end",startTime:e=>{var t;return null===(t=e.render_end_to_await_page_chunk_start)||void 0===t?void 0:t.endTime},endTime:performance.now()});const t=n.prefetchCache;C().updateMetricData({page_chunk_source:e.source,page_chunk_prefetch:t.getPrefetchAnalytic(`loadCachedPageChunk(${r.id})`)})}F().Z.markRequestFirstChunkEnd(e.source),R(),Z().default.checkGate({gateName:"load_page_flush"})?await a().default.flush():await a().default.afterNextFlush(),h.afterEachChunk(e);const o=b({firstPageChunkResult:e});try{await o}catch(g){return void x(g)}I(),h.afterAllChunks()}function R(){t.setState({...t.state,initialRequestCompleted:!0})}function I(){t.setState({initialRequestCompleted:!0,ready:!0,loading:!1,endOfResultsReached:!0,error:void 0})}function x(e){t.setState({ready:!0,initialRequestCompleted:!0,loading:!1,endOfResultsReached:!1,error:(0,m().t)(e)})}i().Z.withListenerIgnored((()=>{k()}))})({...e,updateIsCollectionInPage:r,scrollerRef:n}),function(e){const{store:t,scrollToBlockIds:r,onReady:n,onDone:i,pageStore:s}=e;(0,o.useEffect)((()=>{let e;const o=v().IH((()=>{r&&n&&(e=async function(e,t){e&&await _().Nz(t,e)}(r,s))})),l=v().IH((()=>{n&&a().default.afterNextFlush((()=>{a().default.afterNextFlush((async()=>{if(e){const t=performance.now();await(0,S().aM)(e,5e3),q().default.state.initialRenderCompleted||C().updateMetricData({scroll_to_blocks_wait_time:performance.now()-t})}n()}))}))})),c=v().IH((()=>{null==i||i()})),d=()=>{t.state.loading&&o(),t.state.ready&&l(),(t.state.endOfResultsReached||t.state.error)&&c()};return t.addListener(d),()=>{t.removeListener(d)}}),[i,n,s,r,t])}(e),function(e){const{store:t}=e,r=(0,l().VK)((()=>t.state.error),[t]),n=(0,l().VK)((()=>L().default.state.online),[]),i=(0,u().D9)(n),a=void 0!==i&&(n&&!i);(0,o.useEffect)((()=>{a&&r&&t.reset()}),[a,t,r])}(e),function(){const e=(0,s().O7)(),t=(0,l().VK)((()=>{var e;return null===(e=A().default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.id}),[]),r=(0,l().VK)((()=>A().default.state.currentUserRootStore),[]),n=(0,l().VK)((()=>L().default.state.online),[]),i=(0,u().D9)(n),a=void 0!==i&&(n&&!i);(0,o.useEffect)((()=>{async function n(){const{route:n}=e.RouterStore.state,o=await I().XB({environment:e,request:{...n,type:"block-space",blockId:t,spaceId:"spaceId"in n?n.spaceId:void 0,slug:"slug"in n?n.slug:void 0,spaceDomain:"spaceDomain"in n?n.spaceDomain:void 0,requestedOnPublicDomain:"requestedOnPublicDomain"in n?n.requestedOnPublicDomain:void 0,isBot:!1}});if("failed"===o.type)return;const i=o.data;if(j().default.setState({publicPageData:i}),i.spaceId&&r){const e=r.getSpaceViewStores().find((e=>e.getSpaceId()===i.spaceId));e&&A().default.setState({...A().default.state,currentSpaceStore:e.getSpaceStore(),currentSpaceViewStore:e})}}a&&t&&n()}),[a,e,t,r])}();const{store:c}=e;return{...(0,l().VK)((()=>({ready:c.state.ready,error:c.state.error,initialRequestCompleted:c.state.initialRequestCompleted,endOfResultsReached:c.state.endOfResultsReached})),[c]),isCollectionInPage:t,scrollerRef:n}}({...e,store:(0,l().qz)(e.store,N().Z)})}function H(e){const{pageStore:t}=e,r=(0,s().O7)();return(0,o.useCallback)((async e=>{const{request:n,headers:o,abortSignal:i}=e,a=E().e9(t),s=await E().HI({environment:r,request:{...n,...a?{omitExistingRecordVersions:a}:{}},abortSignal:i,prefetchCacheKey:J(n),headers:o});if(null!=i&&i.aborted)throw new Error("Abort signal received");if("success"===s.type){const e=f().RecordMapWithRole.create(s.data.recordMap),t=s.data;return"cursors"in t?{recordMap:e,cursors:t.cursors,source:"remoteV2"}:{recordMap:e,cursor:t.cursor,source:"remote"}}throw h().rn(s.error,{from:"useLoadRemotePageChunk",type:"pageLoadingError",data:{pageId:t.id,miscDataToConvertToString:{offline:s.offline,status:s.status,body:s.body}}}),new Error("No successful load result found.")}),[r,t])}function z(e){const{pageStore:t}=e,r=(0,s().O7)();return(0,o.useCallback)((async e=>{const{request:n,mode:o,isFirstChunk:i,abortSignal:a}=e,s=await B().A.measure("localLoadPageChunk",n.page.id,(()=>E().fV({mode:o,environment:r,request:n,isFirstChunk:i,abortSignal:a})));if(null!=a&&a.aborted)throw new Error("Abort signal received");const l=f().RecordMapWithRole.create(s.recordMap);return x().fL({environment:r,inMemoryRecordCache:t.inMemoryRecordCache,recordMap:l,debugSource:"PageLoadingContainer.performLocalLoadPageChunk"}),{source:"local",cursor:s.cursor,recordMap:l}}),[r,t])}function $(e){const{pageStore:t,store:r,scrollToDiscussionId:n,scrollerRef:i,scrollToPosition:l,scrollToBlockIds:u,updateIsCollectionInPage:p,pageVisitStore:f,disableSideEffects:g}=e,h=(0,s().O7)(),m=(0,o.useCallback)((()=>{g||(Z().default.checkGate({gateName:"fetch_backlinks_after_page_load"})||G({environment:h,blockPointer:t.pointer}),R().Ri(h,{blockStore:t,pageVisitStore:f,incremental:!1}).catch((()=>{})))}),[g,h,t,f]),S=(0,o.useCallback)((e=>{if(g)return;const o="remoteV2"===e.source?e.cursors:[e.cursor];var s,c;0===(s=o).length||1===s.length&&(!(c=s[0])||0===c.stack.length)||a().default.afterNextFlush((()=>{if(r.state.ready)return;const e=!n||(t=n,Boolean((0,M()._)({discussionId:t})));var t;const o=!0===function(e){const{scrollerRef:t,scrollToPosition:r}=e;if(null===t.current)return;const n=(0,P().VW)(t.current);return!n||!v().hj(r)||r<=n.scrollHeight-n.clientHeight}({scrollerRef:i,scrollToPosition:l})&&function(e){return!e||K().C.findSelectablesFromIds(e).length===e.length}(u)&&e;o&&r.setState({...r.state,ready:!0})})),p({page:{id:t.id,spaceId:t.getSpaceId()},recordMap:e.recordMap,inMemoryRecordCache:t.inMemoryRecordCache}),h.currentUser.isLoggedIn()&&(D().default.addFromRecordMapWithRole(e.recordMap),D().default.isEmpty()||T().dY({environment:h})),k().O({rootStore:t,cursors:o})}),[g,h,t,u,n,l,i,r,p]),b=(0,o.useCallback)((()=>{if(!g&&(Z().default.checkGate({gateName:"fetch_backlinks_after_page_load"})&&"personal_home_page"!==t.getType()&&G({environment:h,blockPointer:t.pointer}),h.currentUser.isLoggedIn())){const e=t.getFormat(),r=t.getType();(0,V().K6)()&&r&&(0,d().dM)(r)&&((null==e?void 0:e.app_config_uri)===c().NB||(null==e?void 0:e.app_config_uri)===c().Aw)&&async function(e,t){await w().callApi({eventName:"resyncJiraCollection",environment:e,data:{pagePointer:t}})}(h,t.pointer)}}),[g,h,t]);return(0,o.useMemo)((()=>({concurrentlyWithAsyncRequests:m,afterEachChunk:S,afterAllChunks:b})),[m,S,b])}async function G(e){const{blockPointer:t,environment:r}=e;r.LocalBacklinkStore.initializeBacklinks({block:{id:t.id,spaceId:(0,g().J)(t.spaceId)},currentUserId:r.currentUser.id,environment:r});try{await r.LocalBacklinkStore.awaitLoaded(t.id)}catch(n){}}function J(e){if(function(e){return!e.cursor||0===e.cursor.stack.length}(e))return`loadCachedPageChunk(${e.page.id})`;{const t=(0,b().Ul)(n()(e.cursor));return`loadCachedPageChunk(${e.page.id})-${t}`}}(0,r(947115).exposeDebugValue)("toggleLogLocalPageLoadFailures",(()=>{U=!U,console.info(U?"Local page load error logging enabled":"Local page load error logging disabled")}))},358122:(e,t,r)=>{r.d(t,{J:()=>a});var n=()=>r(142735),o=()=>r(18610),i=()=>r(876822);function a(){return(0,n().VK)((()=>{var e;const t=(null===(e=i().default.state.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.preferred_locale)??o().al;return(0,o()._u)(t)}),[])}},234478:(e,t,r)=>{r.d(t,{w:()=>s});var n=()=>r(219727),o=()=>r(142735),i=()=>r(416403),a=()=>r(676922);function s(e){const t=function(e){const{pageStore:t,enabled:r=!0,forceUpdate:i=!1}=e,s=(0,n().O7)();return(0,o().VK)((()=>r?a().HE({pageStore:t,environment:s,forceUpdate:i}):void 0),[t,s,r,i])}(e);if(!t||(0,i().O5)(t))return t}},755020:(e,t,r)=>{r.d(t,{p:()=>n});const n=35},665444:(e,t,r)=>{r.d(t,{Z:()=>B});r(670560),r(122556),r(582845),r(250570),r(533019),r(721473),r(788208),r(22624),r(267602),r(916054),r(653476),r(470928),r(749411),r(241792);var n=r(667294),o=()=>r(219727),i=()=>r(142735),a=()=>r(846550),s=()=>r(989478),l=()=>r(788860),c=()=>r(568017),d=()=>r(513670),u=()=>r(696459),p=()=>r(958783),f=()=>r(871953),g=()=>r(273444),h=()=>r(758018),m=()=>r(84080),v=()=>r(852465),S=()=>r(333264),b=()=>r(472753),y=()=>r(32969),C=()=>r(876822),k=()=>r(687647),R=()=>r(475335),I=()=>r(826955),x=()=>r(965903),_=()=>r(127519),w=()=>r(595478),T=()=>r(981583),M=r(785893);const V={position:"absolute",top:0,left:0,zIndex:r(492522).eu},E=20,P=22;const B=function(e){const{pageVisitStore:t,presenceStore:a}=e,s=(0,o().O7)(),l=(0,n.useRef)(null),c=(0,r(466970).E)("block_attribution"),u=e.isPeekView?r(855249).Z:r(72041).Z,f=(0,i().VK)((()=>u.state.elementRef??{current:null}),[u]),m=(0,S().j)(f),w=(0,S().$0)(f),T=(0,i().SI)((()=>{if(!c)return[];const e=m-5e3,t=e+w+5e3,r=function(e){var t;const{blockAttributionEnabled:r,containerEl:n,presenceStore:o,environment:i}=e,{currentUserSettingsStore:a}=C().default.state,s=(null==a||null===(t=a.getSettings())||void 0===t?void 0:t.show_block_attribution)??!0;if(!r||!s)return[];const{rootStore:l}=o.state;if(!n||!l||"editing"!==_().default.state.mode||p().default.state.open||k().Z.state.open||R().default.state.isKeyboardMode)return[];let c;for(const d of x().default.state.stores){const e=d.findRecordStoreUIAncestor((e=>e instanceof I().G&&e.isTransclusionType())).ancestor;e&&e instanceof I().G&&"transclusion_container"===e.getType()&&(c=e)}const u=y().C.getMembersByDOMOrder({filter:()=>!0}),f=n.getBoundingClientRect(),g=v().MI({blockStore:l,transclusionReferences:"omit",childPages:"omit"}).flatMap((e=>{const t=[];if(e.isInsideTransclusion()||e.isTransclusionType()){let r=e;if("transclusion_reference"===e.getType()){const t=e.getTransclusionReferenceTargetStore();t&&(r=t)}"transclusion_reference"!==e.getType()&&"transclusion_container"!==e.getType()||(r!==c?t.push(K(e,u,f,i)):v().MI({blockStore:r,transclusionReferences:"omit",childPages:"omit"}).map((e=>t.push(K(e,u,f,i)))))}else t.push(K(e,u,f,i));return t})).filter((e=>!d().o8(e)));g.sort(((e,t)=>e.top-t.top));const h=g.filter(((e,t,r)=>0===t||e.actor.id!==r[t-1].actor.id));if(1===h.length)return[];return h}({blockAttributionEnabled:c,containerEl:l.current,presenceStore:a,environment:s});r.sort(((e,t)=>e.top-t.top));const n=[];return r.every((r=>r.top>=e&&r.top<=t&&(n.push(r),!0))),n}),[c,a,m,w,s],{debugName:"attributionAvatarStore",useDeepEqual:!0});(0,i().Kw)(T),(0,n.useEffect)((()=>{let e;const t=d().Ds(T.recompute,100);return c&&(window.addEventListener("resize",t),e=setInterval(t,1e3)),()=>{window.removeEventListener("resize",t),clearInterval(e)}}),[T,c]);const E=(0,i().Kw)(T),P=[...(0,i().VK)((()=>function(e){const{attributionAvatars:t,pageVisitStore:r,presenceStore:n,environment:o,containerEl:i}=e,a=new Set(t.map((e=>{let{blockStore:t}=e;return t.id}))),{rootStore:s}=n.state;if(!s)return[];if(!i)return[];const l=o.currentUser.id,c=(0,h().AQ)({pageVisitStore:r,presenceStore:n,blockStore:s,trustedEmailDomains:void 0}).filter((e=>e.userId!==l&&(0,h().MR)(o,e)));if(c.length>0){const e={},t=y().C.getMembersByDOMOrder({filter:()=>!0}),r=i.getBoundingClientRect();return d().oA(c.map((n=>{const i=(0,h().EB)(n),l=null==n?void 0:n.blockPath;let c;if(l&&l.length>0?c=function(e,t,r){const n=new Map(t.map(((e,t)=>[e,t])));let o,i;for(const a of e){const e=a.props.store,t=n.get(e.id);if(void 0!==t&&((void 0===i||t<i)&&r.uiContains(e)&&a.props.shouldShowHalo&&(o=a,i=t),0===i))return o}return o}(t,l,s):i&&(c=O(t,i,s)),!c)return;const d=c.props.store.id,u=a.has(d);e.hasOwnProperty(d)||(e[d]=0),e[d]++;const p=c.getNode();if(!(p&&p instanceof Element))return;const f=p.getBoundingClientRect();if(f){var m;const t=c.getScrollerContext();let i,a,s;if(t&&t.horizontalScroller){const e=t.horizontalScroller.getClientRect();i=null==e?void 0:e.left;const r=null==e?void 0:e.right;if(r&&f.left>r)return}if(c.props.store.isFirstBlockInCalloutV2Block()){const e=c.props.store.getRecordStoreUIParent(),t=e&&e.findRecordStoreUIAncestor((e=>e instanceof I().G)).ancestor;t instanceof I().G&&(a=t,s=a?b().R.getRect(a):void 0)}const l=(0,g().WA)({marginItemType:"presence_avatars",nodeRect:s??f,containerRect:r,attributionsIncludeFoundBlock:u,avatarCount:e[d],store:a??c.props.store,environment:o}),p=(0,g().qA)({marginItemType:"presence_avatars",nodeRect:s??f,containerRect:r,clientRectLeft:i,foundBlockId:(null===(m=a)||void 0===m?void 0:m.id)??d,environment:o,store:a??c.props.store});return{type:"presence",userId:n.userId,left:p,top:l,blockType:c.props.store.getType()}}})))}return[]}({attributionAvatars:E,pageVisitStore:t,presenceStore:a,environment:s,containerEl:l.current})),[s,t,a,E],{debugName:"presenceAvatars",useDeepEqual:!0}),...E];return(0,M.jsx)("div",{className:"notion-presence-container",style:V,ref:l,children:(0,M.jsx)(r(372353).Z,{render:()=>P.map((t=>{const{left:n,top:o}=t,i={avatarWrapperAnimation:{translateX:n,translateY:o,scale:1,opacity:1},avatarEnterExitAnimation:{scale:.7,opacity:0}},a={...i.avatarWrapperAnimation,...i.avatarEnterExitAnimation};return(0,M.jsx)(r(628370).Z,{initial:a,exit:a,animate:i.avatarWrapperAnimation,children:(0,M.jsx)(j,{avatar:t,presenceStore:e.presenceStore})},"attribution"===t.type?t.uniqueId:t.userId)}))})})};function O(e,t,r){return e.find((e=>{const n=e.props.store;return Boolean(n&&n.id===t&&r.uiContains(n)&&e.props.shouldShowHalo)}))}function K(e,t,r,n){const o=e.getLastEditedByPointer();if(!o||o.table!==s().KJ)return;const i=e.getType();if("collection_view"===i||"collection_view_page"===i||"divider"===i||"table"===i||"table_row"===i||"tab"===i)return;if(e.isEmptyEditableBlock())return;const a=O(t,e.id,e);if(!a)return;const l=a.getNode();if(!(l&&l instanceof Element))return;const c=l.getBoundingClientRect();if(!c)return;const d=(0,g().WA)({marginItemType:"attribution_avatars",store:e,containerRect:r,nodeRect:c,environment:n}),u=(0,g().qA)({marginItemType:"attribution_avatars",store:e,containerRect:r,nodeRect:c,environment:n});return{type:"attribution",actor:o,left:u,top:d,uniqueId:u>0?`${String(e.key)}+left`:String(e.key),blockStore:e}}function j(e){const{device:t}=(0,o().O7)(),{isMobile:r}=t,{avatar:n}=e,d=(0,l().YB)(),p="presence"===n.type&&n.blockType?n.blockType:void 0,g=r?E:P,h=(0,a().yK)((e=>{const t=p&&["breadcrumb","bulleted_list","numbered_list","toggle"].includes(p),o={width:g,height:g,borderRadius:g};return{uiUserAvatarStyles:{...o},avatarInnerOutline:{...o,outlineStyle:"solid",outlineColor:e.UIUserAvatarInnerOutline,outlineWidth:.5,outlineOffset:-.5},avatarBorder:"presence"===n.type?{...o,outlineStyle:"solid",outlineColor:(0,c().iY)(n.userId,e),outlineWidth:1.5,outlineOffset:-.5}:{},avatarWrapper:{...o,position:"absolute",top:0,left:r&&t?3:0,outlineStyle:"solid",outlineWidth:.5,outlineOffset:1,outlineColor:e.UIUserAvatarOuterOutline},initialColor:"presence"===n.type?{color:(0,c().iY)(n.userId,e)}:{}}}),[r,p,g,n]),v=(0,i().VK)((()=>{const{rootStore:t}=e.presenceStore.state;if(t){if("presence"===n.type){const e=I().U6.createChildStore(t,{table:s().KJ,id:n.userId});return e.isDefined()?{type:"presence",userStore:e}:null}if("attribution"===n.type){const e=(0,f().nc)({parentStore:t,pointer:n.actor});return e.isDefined()?{type:"attribution",userId:e.id,name:e.getDisplayName(d),blockStore:n.blockStore}:null}(0,u().t1)(n)}return null}),[n,d,e.presenceStore]);return v?(0,m().Z)((e=>"presence"===v.type?(0,M.jsx)("div",{style:h.avatarWrapper,...e,children:(0,M.jsx)("div",{style:h.avatarBorder,children:(0,M.jsx)(T().Z,{iconStyle:h.avatarInnerOutline,hasTooltip:!0,userStore:v.userStore,style:h.uiUserAvatarStyles,size:g,avatarShouldShowShadow:!0,initialOverrideStyle:h.initialColor})})}):"attribution"===v.type?(0,M.jsx)("div",{style:h.avatarWrapper,...e,children:(0,M.jsx)(w().Z,{userId:v.userId,name:v.name,style:h.uiUserAvatarStyles,size:P,tooltipStore:v.blockStore})}):void(0,u().t1)(v))):null}},83003:(e,t,r)=>{r.d(t,{g:()=>i});var n=()=>r(677559);const o=new(n().Ss)("ScrollableSitesBannerContainer",(async()=>await Promise.all([r.e(62743),r.e(5242),r.e(4642),r.e(39441),r.e(65670)]).then(r.bind(r,898270)))),i=(0,n().kF)(o,(e=>e.ScrollableSitesBannerContainer))},474532:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(667294);const o=function(e,t){if(e.ref&&t.ref){const r=t.ref;t.ref=t=>{e.ref(t),r(t)}}return n.cloneElement(e,t)}},273444:(e,t,r)=>{r.d(t,{WA:()=>C,Yx:()=>R,qA:()=>k});var n=()=>r(494488),o=()=>r(156642),i=()=>r(696459),a=()=>r(755020),s=()=>r(887430),l=()=>r(954452),c=()=>r(644235),d=()=>r(14585),u=()=>r(881688),p=()=>r(35982),f=()=>r(749826),g=()=>r(645805),h=()=>r(965903);const m=r(203890).Xx-2,v=2,S=4,b=15,y=23;function C(e){const{marginItemType:t,store:r,nodeRect:n,containerRect:a,environment:s}=e,l="double_space"===f().default.getGroup("css_margins"),c=function(e){const{store:t,isContentReskinEnabled:r,marginItemType:n}=e,i=t.getType(),a=t.getNavigableAncestorFormat(),s=Boolean(a.page_small_text);if(r)return i===o().Ti.divider?-5:i===o().Ti.header?s?5:8:i===o().Ti.subHeader?s?2:4:i===o().Ti.collectionView?8:i===o().Ti.table?"presence_avatars"===n?5.5:14:0;return i===o().Ti.divider?-6:i===o().Ti.header?s?7:10:i===o().Ti.subHeader?s?4:6:i===o().Ti.collectionView?8:i===o().Ti.table?"presence_avatars"===n?5.5:14:3}({store:r,isContentReskinEnabled:l,marginItemType:t}),u=function(e,t,r,n){if(t.isTransclusionType())return e+5;if(_(t,r))return n?e+4:e+1;if("ai_block"===t.getType())return t.hasContent()?e+9:e+15;if(t.getType()===o().Ti.button)return e+3;return e}(c,r,s,l),p=((null==n?void 0:n.top)??0)-((null==a?void 0:a.top)??0)+u,g=s.device.isMobile?20:22,h=(d().eD-g)/2;if("selectable_hover_menu_overlay_item"===t)return p;if("attribution_avatars"===t)return p-h;if("presence_avatars"===t){const{attributionsIncludeFoundBlock:t,avatarCount:r}=e;return p+h+(r+(t?1:0)-1)*b}(0,i().t1)(t)}function k(e){const{marginItemType:t,store:r,environment:n,nodeRect:o,containerRect:a}=e,s=n.device.isMobile?20:22,l=(0,c().Ae)()+v,d=x(n,l+24,r),u=((null==o?void 0:o.left)??0)-((null==a?void 0:a.left)??0);if("drag_handle"===t)return u-x(n,l,r);if("plus_button"===t)return u-d;if("attribution_avatars"===t){return u-I({marginItemType:t,store:r,originalMenuOffset:d,environment:n})-S-s}if("presence_avatars"===t){const{clientRectLeft:i,foundBlockId:l}=e,c=I({marginItemType:t,foundBlockId:l,nodeRect:o,originalMenuOffset:d,environment:n,store:r});return(void 0===i?u:Math.max(i-a.left,u))-c-S-s}(0,i().t1)(t)}function R(e){const{marginItemType:t,nodeRect:r,containerRect:n}=e;if("add_comment"===t)return((null==n?void 0:n.right)??0)-((null==r?void 0:r.right)??0);(0,i().t1)(t)}function I(e){const{marginItemType:t,originalMenuOffset:r,environment:n,store:o}=e;if("attribution_avatars"===t){const e=g().default.state;return e.isOpen&&e.currentStore===o?r:x(n,0,o)}if("presence_avatars"===t){var a;const t=g().default.state,{foundBlockId:i,nodeRect:s}=e;return t.isOpen&&(null===(a=t.currentStore)||void 0===a?void 0:a.id)===i&&t.currentStore&&!g().default.isRightMarginCommentHovered()?t.isOpen&&(0,c().NO)()&&p().uh((0,g().getExpandedSelectableRect)(s,!1),t.mouseX,t.mouseY)?y:r:x(n,0,o)}(0,i().t1)(t)}function x(e,t,r){if(function(e){var t;const r=h().default.state.stores.includes(e),n=g().default.state.isOpen&&(null===(t=g().default.state.currentStore)||void 0===t?void 0:t.id)===e.id;return n||r}(r)&&_(r,e))return t+m;if(r.isQuoteBlockChild()){return t+3+14+n().ZD.paddingLeft}if(r.isTransclusionType()||"ai_block"===r.getType())return t+4;if(r.isDirectChildOfAiBlock())return t+13;if(r.isInsideTransclusion())return t+5;if(r.getType()===o().Ti.table){const n=u().Xp({simpleTableStore:r,environment:e,includeInline:!(0,l().fg)(e,r)}),o=r.isImmediateColumnChild();return 0!==n||o?t+8:t}const i=r.getNumberOfDuplicateBlocksAncestors();return i>0?t+a().p*i:t}function _(e,t){if(e.getType()===o().Ti.page){const n=(0,s().fm)(e);var r;if(n)return(e.isInsideCollection()||Boolean(null==n||null===(r=n.collectionStore())||void 0===r?void 0:r.isPageTreeCollection()))&&(0,s().fk)({environment:t,collectionContextStore:n})}return!1}},451191:(e,t,r)=>{r.d(t,{bv:()=>s,g4:()=>i});var n=()=>r(677559);const o=new(n().Ss)("MaybeMarketplaceReviewNudge",(()=>r.e(83658).then(r.bind(r,297138)))),i=(0,n().kF)(o,(e=>e.MaybeMarketplaceReviewNudge)),a=new(n().Ss)("MarketplaceReviewNudge",(()=>Promise.all([r.e(55470),r.e(76317)]).then(r.bind(r,173885)))),s=(0,n().kF)(a,(e=>e.MarketplaceReviewNudge))},603332:(e,t,r)=>{r.d(t,{Z:()=>i});var n=()=>r(431143),o=()=>r(696459);function i(e,t){switch(e){case"all":return{following:!0,followSettings:{...(0,n().yI)({explicitly_set_by_user:!0}),feed_setting:t}};case"important":return{following:!0,followSettings:{...(0,n().GC)({explicitly_set_by_user:!0}),feed_setting:t}};case"comments":return{following:!0,followSettings:{...(0,n().r$)({explicitly_set_by_user:!0}),feed_setting:t}};case"none":return{following:!1,followSettings:{...(0,n().vU)({explicitly_set_by_user:!0}),feed_setting:t}};default:(0,o().t1)(e)}}},605385:(e,t,r)=>{r.d(t,{R:()=>i});var n=()=>r(677559);const o={ScrollableBlockLimitBanner:new(n().Ss)("ScrollableBlockLimitBanner",(async()=>Promise.all([r.e(62743),r.e(97622)]).then(r.bind(r,235629))))},i=(0,n().kF)(o.ScrollableBlockLimitBanner,(e=>e.default))},243903:(e,t,r)=>{r.d(t,{K:()=>i});var n=()=>r(677559);const o={UncollectibleExperienceOverlay:new(n().Ss)("UncollectibleExperienceOverlay",(async()=>r.e(42785).then(r.bind(r,290293))))},i=(0,n().kF)(o.UncollectibleExperienceOverlay,(e=>e.UncollectibleExperienceOverlay))},641077:(e,t,r)=>{r.d(t,{A:()=>a,Z:()=>i});r(267602),r(653476);var n=()=>r(568017),o=()=>r(659278);function i(e){const t=e.name,r=e.email;let n;if(t||r){if(t){const e=t.split(" ").filter((e=>e.length>0));n=e.length>1?String(o().p4(e[0])[0])+String(o().p4(e[e.length-1])[0]):String(o().p4(t)[0])+String(o().p4(t)[1])}else n=null==r?void 0:r.substring(0,2);return n=n?n.toUpperCase():void 0,n}}function a(e,t){return e&&(0,n().iY)(e,t)}},455018:(e,t,r)=>{r.d(t,{V:()=>o,z:()=>n});const n=.5,o=.3}}]);