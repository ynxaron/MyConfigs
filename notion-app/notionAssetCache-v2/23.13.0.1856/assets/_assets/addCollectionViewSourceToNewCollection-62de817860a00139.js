"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[15249],{901100:(e,o,t)=>{t.d(o,{addCollectionViewSourceToNewCollection:()=>v});var n=()=>t(156642),r=()=>t(217465),i=()=>t(752778),c=()=>t(139978),a=()=>t(132156),l=()=>t(421654),d=()=>t(932753),p=()=>t(907005),s=()=>t(876822),u=()=>t(276124);function v(e){var o,t,v;const{environment:g,name:C,collectionViewStore:S,collectionViewBlockStore:T,transaction:m,targetCollectionRecordPointerMap:h}=e,k=S.getType();if(!k||!T.isDefined())return;const w=T.getCollectionPointer(),y=T.getFormat(),_=null===(o=T.getTitleStore())||void 0===o?void 0:o.getValue(),b=w||C||!_?C:_,R=(0,p().Yu)({environment:g,isInline:T.getType()===n().Ti.collectionView,name:b,viewType:k,chartType:S.getChartPlaceholderType()}),I=h??r().RecordMapLegacy.create();I.set({table:c().np,id:"view"},S.pointer);const M=T.getSpaceId()??S.getSpaceId()??(null===(t=s().default.state.currentSpaceStore)||void 0===t?void 0:t.id)??(null===(v=s().default.state.mainEditorCurrentBlockStore)||void 0===v?void 0:v.getSpaceId()),V=M?g.idCreator.getSpaceIdCreatorSync(M):void 0;a().Z({environment:g,sourceBlockId:"root",targetBlockPointer:T.pointer,sourceBlockSubtree:R?(0,r().partialRecordMapToRecordMap)(R):r().RecordMap.create(),targetRecordCache:T.inMemoryRecordCache,transaction:m,recordPointerMap:I,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0,spaceIdCreator:V});const f=I.get({table:i().vF,id:"collection"});if(!f)return;l().FH({stores:[T],update:{collection_pointer:f},transaction:m}),(0,u().z)({collectionViewBlockStore:T,collectionPointer:f,transaction:m});const B=T.getCollectionStore();return B&&((0,d().Rm)({collectionStore:B,update:{icon:null==y?void 0:y.page_icon,cover:null==y?void 0:y.page_cover},environment:g,transaction:m}),l().FH({stores:[B],update:{collection_cover_position:null==y?void 0:y.page_cover_position},transaction:m})),I}}}]);