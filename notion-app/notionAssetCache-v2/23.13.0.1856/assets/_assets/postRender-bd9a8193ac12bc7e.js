"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[58586,52194,92329,71025,8564],{929626:(e,t,n)=>{n.d(t,{n:()=>m});n(667294);var i=n(785893);const o={viewBox:"0 0 20 20",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M10.5 8.917V7.89a2.61 2.61 0 1 1-2.61 2.61.625.625 0 1 0-1.25 0 3.86 3.86 0 1 0 3.86-3.86v-.712c0-.501-.6-.748-.953-.395L8.053 7.028a.55.55 0 0 0 0 .788l1.494 1.495a.557.557 0 0 0 .953-.394"}),(0,i.jsx)("path",{d:"M10.5 2.75a7.25 7.25 0 0 0-7.143 6 4.34 4.34 0 0 0 1.231 8.5h11.19a3.937 3.937 0 0 0 1.971-7.346A7.25 7.25 0 0 0 10.5 2.75M4.777 9.439a5.75 5.75 0 0 1 11.464.883.75.75 0 0 0 .463.735 2.438 2.438 0 0 1-.927 4.693H4.588a2.838 2.838 0 0 1-.442-5.643.75.75 0 0 0 .63-.668"})]})},s=(0,n(827282).IU)("cloudArrowCircleCounterclockwiseLeft",o);var a=()=>n(421797),r=()=>n(527278),l=()=>n(991007),d=()=>n(747055),c=()=>n(804217),u=()=>n(749826),p=()=>n(38562);const m=(0,p().N$)({key:"available offline",svg:s,displayName:p().RE.availableOffline,label:r().Z.formatMessage(p().RE.availableOffline),badge:(0,i.jsx)(n(944993).Z,{}),isLoading:e=>{const t=void 0===d().Z.state.offlinePages,n=l()._(e.id);return t||n&&d().Z.state.isSlowWrite},isEnabled:e=>l()._(e.id),validators:[a().QLY("download_for_offline"),a().or([a().daU,a().Fxc])],action:(e,t,i)=>{n(784552).toggleAvailableOffline({store:t,environment:e})},disabled:e=>!c().default.state.online&&u().default.checkGate({gateName:"download_for_offline"})&&!l()._(e.id)||l().r(e.id),renderTooltip:()=>r().Z.formatMessage(p().RE.unavailableOfflineTooltip),disableTooltip:e=>!(!c().default.state.online&&u().default.checkGate({gateName:"download_for_offline"}))||l()._(e.id)})},79755:(e,t,n)=>{n.d(t,{t0:()=>b,Oq:()=>j});n(670560),n(667294);var i=n(785893);const o={viewBox:"0 0 20 20",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M8.688 8.34a.625.625 0 1 0-1.25 0v6.642a.625.625 0 1 0 1.25 0zm3.875 0a.625.625 0 1 0-1.25 0v6.642a.625.625 0 1 0 1.25 0z"}),(0,i.jsx)("path",{d:"M5.929 3.25v1.571H2.804a.75.75 0 0 0 0 1.5h.944l.434 9.554A2.75 2.75 0 0 0 6.929 18.5h6.142a2.75 2.75 0 0 0 2.747-2.625l.435-9.554h.944a.75.75 0 0 0 0-1.5h-3.125V3.25a1.75 1.75 0 0 0-1.75-1.75H7.679a1.75 1.75 0 0 0-1.75 1.75M7.679 3h4.643a.25.25 0 0 1 .25.25v1.571H7.429V3.25a.25.25 0 0 1 .25-.25m-1 3.321h8.072l-.431 9.486A1.25 1.25 0 0 1 13.07 17H6.93a1.25 1.25 0 0 1-1.249-1.193L5.25 6.32z"})]})},s=(0,n(827282).IU)("trash",o);var a=()=>n(269299),r=()=>n(388284),l=()=>n(421797),d=()=>n(345918),c=()=>n(793935),u=()=>n(876822),p=()=>n(769197),m=()=>n(182008),g=()=>n(717538),f=()=>n(38562),h=()=>n(838267);const y=(0,n(788860).vU)({unpinName:{id:"action.unpin.name",defaultMessage:"Remove from sidebar"},leaveName:{id:"action.leave.name",defaultMessage:"Leave"},duplicateToName:{id:"action.duplicateTo.name",defaultMessage:"Duplicate to"},editFormName:{id:"action.editForm.name",defaultMessage:"Edit form"}}),v=(0,f().cN)({key:"remove pinned shared page",displayName:y.unpinName,analyticsName:y.unpinName.defaultMessage,svg:n(617691).A,validators:[l().cWe,l().uqO,l().ffD(l().zME)],closeParentMenu:!0,action:e=>{let{blocks:t,environment:i}=e;const{currentSpaceViewStore:o,currentUserSettingsStore:s}=u().default.state;o&&s&&(a().createAndCommit({userAction:"actionRegistry.removePinnedSharedPage",environment:i,canUndo:!0,perform:e=>{for(const n of t)c().unpinSharedPage({environment:i,transaction:e,spaceViewStore:o,userSettingsStore:s,store:n})}}),n(381140).An(i,{type:"shared",from:"sidebar_dropdown_menu"}))}}),x=(0,f().cN)({key:"edit form",displayName:y.editFormName,analyticsName:y.editFormName.defaultMessage,svg:n(953293).R,validators:[l().jBR,l().WWj],closeParentMenu:!0,action:e=>{let{blocks:t,environment:i}=e;const o=t[0],s=o.getFormBlockParentBlockStore();var a;s&&n(47443)._c({environment:i,store:s,collectionViewId:null===(a=o.getParentStore())||void 0===a?void 0:a.id,pageVisitSource:n(506347).tY.FormInternalPage})}}),b=(0,f().cN)({key:"delete block without shortcuts",displayName:f().RE.moveToTrashName,analyticsName:f().RE.moveToTrashName.defaultMessage,svg:s,isRed:!0,validators:[l().or([l().DFt,l().STD,l().SYI]),l().eot,l().ffD(l().sRS),l().ffD(l().P99(n(156642).Ti.externalObjectInstancePage)),l().ffD(l().Q_M),l().vdd,l().ffD(l().uY7),l().ffD(l().NB0)],closeParentMenu:!0,action:async e=>{let{blocks:t,environment:i}=e;await n(453999).Qw({environment:i,blocks:t,shouldCheckSuggestEdit:!1})}}),S=(0,f().cN)({key:"leave shared page",displayName:y.leaveName,analyticsName:y.leaveName.defaultMessage,svg:n(399673).S,validators:[l().cWe,l().zl0],closeParentMenu:!0,action:e=>{let{blocks:t,environment:n}=e;a().createAndCommit({userAction:"actionRegistry.leaveSharedPage",environment:n,canUndo:!0,perform:e=>{c().leaveBlocks({environment:n,blocks:t,transaction:e})}})}}),M=(0,f().MV)({key:"duplicate to workspace",displayName:y.duplicateToName,analyticsName:y.duplicateToName.defaultMessage,svg:n(802600).a,validators:[l().DFt,l().nJQ,l().zzA,l().ffD(l().KEd),l().Jlb],subActions:e=>{let{blocks:t,environment:o}=e;const{currentUserRootStore:s}=u().default.state;if(!s)return[];const a=t[0],l=n(718959).o(s),c=[];for(const r of l){const e=r.getSpaceStore();if(e){const t=(0,d().rn)(o,e),s=(0,d().Wd)(o,e);c.push({key:r.id,displayName:t||"",analyticsName:"Duplicate to workspace",searchName:t||"",closeParentMenu:!0,action:async()=>{await n(291338).DK({environment:o,store:a,spaceStore:e,spaceViewStore:r,isPrivate:!0,context:"duplicate_to_another_space"})},render:(e,o)=>{let{environment:a}=o;return(0,i.jsx)(n(827973).Z,{title:t,icon:(0,i.jsx)(n(943620).Z,{icon:s,isEmptyPage:!1,title:t,size:a.device.isMobile?24:20,disabled:!0}),...e})}})}}return[(0,f().$J)({key:"duplicate-to",render:e=>(0,i.jsx)(r().Z,{...e}),actions:c})]}}),j=[(0,n(58991).KE)({shouldRenderMobileRefresh:!1}),{key:"outliner organization actions",render:e=>(0,i.jsx)(r().Z,{...e}),actions:[p()._p,p().zm,v,S]},{key:"outliner available offline action",render:e=>(0,i.jsx)(r().Z,{...e}),actions:[n(929626).n]},{key:"outliner primary actions",render:e=>(0,i.jsx)(r().Z,{...e}),actions:[m().Hs,m().Kk,p().Dw,p().IK,g().o1,g().vh,g().fI,g().MI,M,x,n(562856).$,n(668881).A,b]},{key:"turn page into",render:e=>(0,i.jsx)(r().Z,{...e}),actions:[h().NO,h().LM,h().BW]},{key:"outliner navigation",render:e=>(0,i.jsx)(r().Z,{...e}),actions:n(55853).ej}]},838267:(e,t,n)=>{n.d(t,{NO:()=>k,LM:()=>C,BW:()=>T,bV:()=>P,R$:()=>A});n(667294);var i=n(785893);const o={viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M6.5 3a.75.75 0 0 0 0 1.5h7.75c.69 0 1.25.56 1.25 1.25v7.08l-1.002-.89a.75.75 0 0 0-.996 1.12l2.25 2a.75.75 0 0 0 .996 0l2.25-2a.75.75 0 0 0-.996-1.12L17 12.83V5.75A2.75 2.75 0 0 0 14.25 3zM3.252 4.94a.75.75 0 0 1 .996 0l2.25 2a.75.75 0 0 1-.996 1.12L4.5 7.17v7.08c0 .69.56 1.25 1.25 1.25h7.75a.75.75 0 0 1 0 1.5H5.75A2.75 2.75 0 0 1 3 14.25V7.17l-1.002.89a.75.75 0 1 1-.996-1.12z"})},s=(0,n(827282).IU)("arrowSquarePath",o);var a=()=>n(955620),r=()=>n(788860),l=()=>n(269299),d=()=>n(626788),c=()=>n(846550),u=()=>n(164079),p=()=>n(998901),m=()=>n(855238),g=()=>n(663631),f=()=>n(654133);function h(e){let{menuListItemProps:t,title:n,caption:o,icon:s,disabled:a,tooltipText:r,showNewBadge:l}=e;const d=(0,c().yK)((()=>({menuItem:{WebkitBackfaceVisibility:"hidden"},caption:{whiteSpace:"pre-wrap"}})),[]);return(0,i.jsx)(f().Z,{placement:p().Placement.Right,disableTooltip:!r,renderTooltip:()=>r,render:e=>(0,i.jsx)(m().Z,{...(0,u().Z)(t,e),style:d.menuItem,title:n,caption:o,captionStyle:o?d.caption:void 0,svg:s,disabled:a,disabledFeedback:a,right:l&&(0,i.jsx)(g().Z,{})})})}var y=()=>n(421797),v=()=>n(91502),x=()=>n(697623),b=()=>n(38562),S=()=>n(790082);const M=(0,r().vU)({createTeamFromPageFullName:{id:"action.createTeamFromPage.fullName",defaultMessage:"Turn into teamspace"},createTeamFromPageCaption:{id:"action.createTeamFromPage.caption",defaultMessage:"Space for your team to customize permissions and collaborate"},createTeamFromPageName:{id:"action.createTeamFromPage.name",defaultMessage:"Teamspace"},turnPageIntoWikiCaption:{id:"action.turnPageIntoWiki.caption",defaultMessage:"Organize by owner, tags, verification, and more"},turnPageIntoWikiName:{id:"action.turnPageIntoWiki.name",defaultMessage:"Wiki"},undoTurnPageIntoWikiName:{id:"action.undoTurnPageIntoWiki.name",defaultMessage:"Undo wiki"},turnPageIntoWikiFullName:{id:"action.turnPageIntoWiki.fullName",defaultMessage:"Turn into wiki"}});function j(e,t){return(0,b().cN)({key:"turn page into team",displayName:t,analyticsName:M.createTeamFromPageFullName.defaultMessage,svg:s,validators:e,closeParentMenu:!0,render:(e,o)=>{const s=function(e){const{blockStore:t,environment:n}=e;if(!n.currentUser.id)return null;if(0===a().QaF(t.getTitleValue()).length)return(0,i.jsx)(r()._H,{defaultMessage:"Cannot turn page without a title into a Teamspace",id:"sidebar.turnPageIntoTeamButton.missingTitleDisabledTooltip"});if("private"===(0,v().Pr)(t).accessLevel&&!(0,x().Rs)())return(0,i.jsx)(r()._H,{defaultMessage:"Only Business Plans and above can turn a private page into a Teamspace",id:"sidebar.turnPageIntoTeamButton.privateTeamsOnlyOnBusinessPlansAndAboveDisabledTooltip"});return null}({environment:o.environment,blockStore:o.blocks[0]});return(0,i.jsx)(h,{menuListItemProps:e,title:(0,i.jsx)(r()._H,{...t}),caption:(0,i.jsx)(r()._H,{...M.createTeamFromPageCaption}),disabled:Boolean(s),tooltipText:s,icon:n(265217).K})},action:e=>{let{blocks:t,environment:i}=e;const o=t[0];n(174896).VG({environment:i,page:o})}})}const C=j([y().xDy([y().jp9,y().ffD(y().KSG)])],M.createTeamFromPageFullName),w=j([y().jp9],M.createTeamFromPageName),k=(0,b().MV)({key:"turn into teamspace or wiki",displayName:S().sY.turnIntoSection,analyticsName:S().sY.turnIntoSection.defaultMessage,svg:s,validators:[y().jp9,y().KSG],subActions:()=>[(0,b().$J)({key:"turn into teamspace or wiki",render:e=>(0,i.jsx)(n(388284).Z,{...e}),actions:[w,I]})],width:300});function _(e,t){return(0,b().cN)({key:"turn page into wiki",displayName:t,analyticsName:M.turnPageIntoWikiFullName.defaultMessage,svg:s,validators:e,closeParentMenu:!0,action:e=>{let{environment:t,blocks:i}=e;"bottom_right"===n(749826).default.getEligibleGroup({experimentId:"wiki_education_convert_modal",defaultGroup:"control"})?n(570065).E.setState({showConvertTooltip:!1,forceShow:!0,pendingWikiBlockStore:i[0]}):l().createAndCommit({userAction:"actionRegistry.turnIntoAction.wiki",environment:t,canUndo:!0,perform:e=>{d().Y({environment:t,blocks:i,transaction:e,source:"page_menu"})}})},render:e=>(0,i.jsx)(h,{menuListItemProps:e,title:(0,i.jsx)(r()._H,{...t}),disabled:!1,icon:s,tooltipText:(0,i.jsx)(r()._H,{...M.turnPageIntoWikiCaption})})})}const T=_([y().xDy([y().KSG,y().ffD(y().jp9)]),y().ffD(y().uY7)],M.turnPageIntoWikiFullName),I=_([y().KSG],M.turnPageIntoWikiName);const P=_([y().KSG,y().ffD(y().uY7)],M.turnPageIntoWikiFullName),A=(0,b().cN)({key:"undo turn page into wiki",displayName:M.undoTurnPageIntoWikiName,analyticsName:M.undoTurnPageIntoWikiName.defaultMessage,svg:n(363728).S,validators:[y().U7o,y().U_8,y().ffD(y().p1d),y().f7f,y().zzA,y().ffD(y().uY7)],closeParentMenu:!0,action:async e=>{let{environment:t,blocks:o}=e;const{accept:s}=await n(308186).gt({message:(0,i.jsx)("div",{style:{textAlign:"center"},children:(0,i.jsx)(r()._H,{defaultMessage:'Turn "{pageName}" back into a normal page?',id:"action.undoTurnIntoWiki.message",values:{pageName:a().QaF(o[0].getTitleValue())}})}),description:(0,i.jsx)("div",{style:{textAlign:"center"},children:(0,i.jsx)(r()._H,{defaultMessage:"This will remove properties like owners and verification from your pages",id:"action.undoTurnIntoWiki.description"})})});s&&l().createAndCommit({userAction:"actionRegistry.undoTurnIntoAction.wiki",environment:t,canUndo:!0,perform:e=>{d().Cq({environment:t,blocks:o,transaction:e,source:"page_menu"})}})}})},636133:(e,t,n)=>{n.d(t,{Ce:()=>a,IC:()=>c,Jv:()=>p,QF:()=>u,Yc:()=>o,az:()=>r,eO:()=>d,s4:()=>l,ti:()=>s});var i=()=>n(594546);function o(e,t){i().K4(e,"workspace_creation_ability",t)}function s(e,t){i().K4(e,"workspace_creation_setting_updated",t)}function a(e,t){i().K4(e,"claimable_spaces_viewed",t)}function r(e,t){i().K4(e,"space_transfer_requested",t)}function l(e,t){i().K4(e,"space_transfer_completed",t)}function d(e,t){i().K4(e,"space_claim_upgrade_requested",t)}function c(e,t){i().K4(e,"space_claim_upgrade_completed",t)}function u(e,t){i().K4(e,"space_claim_deletion_started",t)}function p(e,t){i().K4(e,"space_claim_deletion_canceled",t)}},405129:(e,t,n)=>{n.d(t,{l1:()=>s,pj:()=>o().pj,q$:()=>a});var i=()=>n(201023),o=()=>n(155056);function s(){i().default.setState({open:!0,submitted:!1,error:void 0})}function a(){i().default.setState({open:!1})}},932005:(e,t,n)=>{n.d(t,{zb:()=>g,U4:()=>p,FF:()=>u,jN:()=>c,xx:()=>f,gs:()=>m});var i=()=>n(81954);const o=(0,n(830742).LS)("restoreSnapshot");var s=()=>n(727475),a=()=>n(491927),r=()=>n(782646),l=()=>n(528918);const d=(0,n(788860).vU)({restoringPreviousVersion:{id:"historyModalActions.restoringPreviousVersion.loadingMessage",defaultMessage:"Restoring…"}});function c(e){const{environment:t,from:n,...i}=e;a().y(t,n),s().Z.setState({...i,open:!0,size:50})}function u(){const e=s().Z.state;e.open&&s().Z.setState({...e,size:e.size+20})}function p(){s().Z.setState({open:!1})}function m(e){const{environment:t,snapshot:n,nextFutureSnapshot:i}=e;a().qD(t,n);const o=s().Z.state;o.open&&s().Z.setState({...o,snapshot:n,nextFutureSnapshot:i,openSnapshotNearTimestamp:void 0})}function g(){const e=s().Z.state;e.open&&s().Z.setState({...e,snapshot:void 0,nextFutureSnapshot:void 0})}async function f(e,t){if(!s().Z.state.open||!s().Z.state.snapshot)return;if(!s().Z.state.snapshot)return;a().R9(e,s().Z.state.snapshot),l().j({message:d.restoringPreviousVersion});const n=await r().Lj(e,o,{block:{id:s().Z.state.blockStore.id,spaceId:(0,i().J)(s().Z.state.blockStore.pointer.spaceId)},timestamp:s().Z.state.snapshot.timestamp,shouldRestoreCollection:t??!1}).next();if(l().x(),n.value.error)throw n.value.error}},543573:(e,t,n)=>{n.d(t,{k2:()=>l,l6:()=>r,wk:()=>a});var i=()=>n(998411),o=()=>n(269299),s=()=>n(348141);function a(e){const{environment:t,userSettingsStore:n}=e,o=n.getSettings(),s=null==o?void 0:o.time_zone,a=(0,i().r)();s!==a&&r({environment:t,userSettingsStore:n,timeZone:a})}function r(e){const{environment:t,userSettingsStore:n,timeZone:i}=e;o().createAndCommit({userAction:"checkUserTimeZoneAction.updateTimeZone",environment:t,canUndo:!0,perform:e=>{s().d2({userSettingsStore:n,transaction:e,data:{time_zone:i}})},userId:n.id})}function l(e){const{environment:t,userSettingsStore:n,disableAutoSetTimezone:i}=e;o().createAndCommit({userAction:"checkUserTimeZoneAction.updateDisableAutoSetTimezone",environment:t,canUndo:!0,perform:e=>{s().d2({userSettingsStore:n,transaction:e,data:{disable_auto_set_timezone:i}})},userId:n.id})}},82451:(e,t,n)=>{n.r(t),n.d(t,{AssistantWriterPopup:()=>o().D,assistantWriterActions:()=>i()});var i=()=>n(554398),o=()=>n(489011)},477253:(e,t,n)=>{n.d(t,{Z:()=>o});n(667294);var i=n(785893);const o=function(e){let{switcherProps:t,...o}=e;return(0,i.jsx)(n(446955).Z,{right:(0,i.jsx)(n(471645).Z,{onClick:o.onClick,disabled:o.disabled,...t}),...o})}},259801:(e,t,n)=>{n.d(t,{N:()=>x,U:()=>v});n(821057);var i=()=>n(492788),o=()=>n(217465),s=()=>n(955620),a=()=>n(54512),r=()=>n(132156),l=()=>n(970105),d=()=>n(269299),c=()=>n(28063),u=()=>n(907005),p=()=>n(527278),m=()=>n(472753),g=()=>n(876822),f=()=>n(749826),h=()=>n(253225);const y=(0,n(788860).vU)({formDatabaseTitle:{id:"newBlock.databaseInline.formDatabaseTitle",defaultMessage:"New form"}});function v(e){var t,n,s;const{environment:d,store:p,viewType:y,transaction:v}=e,x=null===(t=p.getBlockTitleStore())||void 0===t?void 0:t.getValue();f().default.checkGate({gateName:"mobile_keep_template_gallery_open"})&&h().Z.state.open&&h().Z.setState({open:!1});const b=p.getSpaceId()??(null===(n=g().default.state.currentSpaceStore)||void 0===n?void 0:n.id)??(null===(s=g().default.state.mainEditorCurrentBlockStore)||void 0===s?void 0:s.getSpaceId()),S=b?d.idCreator.getSpaceIdCreatorSync(b):void 0;r().Z({environment:d,sourceBlockId:"root",targetBlockPointer:p.pointer,sourceBlockSubtree:(0,o().partialRecordMapToRecordMap)((0,u().iC)({isInline:!1,viewType:y})),targetRecordCache:p.inMemoryRecordCache,transaction:v,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0,spaceIdCreator:S}),c().vs({environment:d,block:p,blockType:"collection_view_page",transaction:v}),x&&l().sO({environment:d,store:p.getBlockTitleStore(),value:x,transaction:v}),i().default.afterNextFlush((()=>{const e=m().R.findCollectionViewBlockFromStore(p);var t;e&&"handleCreated"in e&&(null===(t=e.handleCreated)||void 0===t||t.call(e))})),a().W(d,{from:"template_picker",type:"collection_view_page",creating_block_id:p.id,is_full_screen:!0,view_type:y})}async function x(e){var t,i,l;const{environment:m,store:f}=e,h=null===(t=f.getBlockTitleStore())||void 0===t?void 0:t.getValue(),{formsEditorDependency:v}=await Promise.resolve().then(n.bind(n,688725)),{formEditorActions:x}=await v.load(),b=f.getSpaceId()??(null===(i=g().default.state.currentSpaceStore)||void 0===i?void 0:i.id)??(null===(l=g().default.state.mainEditorCurrentBlockStore)||void 0===l?void 0:l.getSpaceId()),S=b?m.idCreator.getSpaceIdCreatorSync(b):void 0;d().createAndCommit({userAction:"HorizontalTemplatePicker.createForm",environment:m,canUndo:!0,perform:e=>{var t;r().Z({environment:m,sourceBlockId:"root",targetBlockPointer:f.pointer,sourceBlockSubtree:(0,o().partialRecordMapToRecordMap)((0,u().Xq)({isInline:!1,name:(0,s().PgY)(h)?(0,s().TPx)(p().Z.formatMessage(y.formDatabaseTitle)):h})),targetRecordCache:f.inMemoryRecordCache,transaction:e,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0,spaceIdCreator:S}),c().vs({environment:m,block:f,blockType:"collection_view_page",transaction:e});const n=f.getCollectionStore(),i=null==n||null===(t=n.getModel())||void 0===t?void 0:t.getNormalizedSchema(),l=f;if(!i)throw new Error("Schema not found");const d=x.createCollectionFormEditorView({environment:m,transaction:e,collectionViewBlockStore:l,schema:i,initializeWithAllDefaultQuestions:!0});x.createResponsesCollectionView({environment:m,transaction:e,collectionViewBlockStore:l,schema:i}),a().W(m,{from:"template_picker",type:"form",creating_block_id:f.pointer.id,form_id:null==d?void 0:d.formId,view_id:l.id})}})}},654493:(e,t,n)=>{n.d(t,{I:()=>a});var i=()=>n(527278);const o=(0,n(788860).vU)({table:{defaultMessage:"Table",id:"templatePickerHelpers.databaseTemplateNames.table"},board:{defaultMessage:"Board",id:"templatePickerHelpers.databaseTemplateNames.board"},list:{defaultMessage:"List",id:"templatePickerHelpers.databaseTemplateNames.list"},calendar:{defaultMessage:"Calendar",id:"templatePickerHelpers.databaseTemplateNames.calendar"},gallery:{defaultMessage:"Gallery",id:"templatePickerHelpers.databaseTemplateNames.gallery"},timeline:{defaultMessage:"Timeline",id:"templatePickerHelpers.databaseTemplateNames.timeline"},form:{defaultMessage:"Form",id:"templatePickerHelpers.databaseTemplateNames.form"},tableView:{defaultMessage:"Table view",id:"templatePickerHelpers.databaseTemplateNames.tableView"},boardView:{defaultMessage:"Board view",id:"templatePickerHelpers.databaseTemplateNames.boardView"},listView:{defaultMessage:"List view",id:"templatePickerHelpers.databaseTemplateNames.listView"},calendarView:{defaultMessage:"Calendar view",id:"templatePickerHelpers.databaseTemplateNames.calendarView"},galleryView:{defaultMessage:"Gallery view",id:"templatePickerHelpers.databaseTemplateNames.galleryView"},timelineView:{defaultMessage:"Timeline view",id:"templatePickerHelpers.databaseTemplateNames.timelineView"}});function s(e){const{environment:t,store:i,viewType:o}=e;n(269299).createAndCommit({userAction:"templatePickerHelpers.handleClickForViewType",environment:t,canUndo:!0,perform:e=>{(0,n(259801).U)({environment:t,store:i,viewType:o,transaction:e}),n(47443)._c({environment:t,store:i,pageVisitSource:n(506347).tY.LinkInPage});const s=i.getCollectionViewStores()[0];s&&(0,n(714966).u)(s.id,{viewType:o})}})}const a=[{name:i().Z.formatMessage(o.table),type:"table",iconFn:n(676232).t,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>s({environment:e,store:t,viewType:"table"})},{name:i().Z.formatMessage(o.board),type:"board",iconFn:n(241227).i,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>s({environment:e,store:t,viewType:"board"})},{name:i().Z.formatMessage(o.list),type:"list",iconFn:n(749115).O,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>s({environment:e,store:t,viewType:"list"})},{name:i().Z.formatMessage(o.timeline),type:"timeline",iconFn:n(809273)._,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>s({environment:e,store:t,viewType:"timeline"})},{name:i().Z.formatMessage(o.calendar),type:"calendar",iconFn:n(697288).N,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>s({environment:e,store:t,viewType:"calendar"})},{name:i().Z.formatMessage(o.gallery),type:"gallery",iconFn:n(118329).n,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>s({environment:e,store:t,viewType:"gallery"})}]},685375:(e,t,n)=>{n.d(t,{Z:()=>M});n(267602),n(470928),n(228244);var i=n(667294),o=()=>n(219727),s=()=>n(523709),a=()=>n(491927),r=()=>n(959137),l=()=>n(964433),d=()=>n(542058),c=()=>n(141735),u=()=>n(267629),p=()=>n(465371),m=()=>n(677559),g=()=>n(32969),f=()=>n(340819),h=()=>n(749826),y=()=>n(475335),v=()=>n(645805),x=()=>n(965903),b=()=>n(65344),S=n(785893);function M(e){const t=(0,o().O7)(),{value:n}=(0,m().XJ)(l().p),{value:a}=(0,m().XJ)(d().m),{value:u}=(0,m().XJ)(c().F.formulas),{value:p}=(0,m().XJ)(r().F.clipboardActions),g=(0,i.useRef)(),f=(0,i.useRef)();(0,i.useEffect)((()=>{function e(e){e.clientX===g.current&&e.clientY===f.current||(g.current=e.clientX,f.current=e.clientY,y().default.setKeyboardMode(!1))}return window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousemove",e)}}),[]);const h=(0,i.useMemo)((()=>function(e,t,n,i,o){const a={};for(const r of s().L6)for(const s of r.shortcuts)a[s]=a=>C(s,a,e,t,n,i,o);return a}(p,u,n,a,t)),[t,u,n,a,p]);return(0,S.jsx)(b().t,{debugName:e.debugName,priority:e.priority,enable:e.capture,shortcuts:h})}function j(){return!function(){const e=document.querySelector("#intercom-container");return!(!e||!e.contains(document.activeElement))}()&&!(f().Z.state.isActive&&!h().default.checkGate({gateName:"block_menu_shortcut_fix"}))}function C(e,t,n,i,o,r,l){if(!j())return;const d=x().default.state.stores,c=x().default.state.pivot||d[0],m=c&&g().C.getRectFromStore(c),b=s().L6.find((t=>!!t.shortcuts.some((t=>t===e))&&u().vG(t,{environment:l,blocks:d,originRect:m,publicEditMode:void 0})));if(b){"keydown"===t.type&&t.preventDefault&&t.preventDefault();const e=f().Z.state.isActive;b.action({environment:l,blocks:d,originRect:m,publicEditMode:void 0,lazyDependencies:{clipboardActions:n,formulasModule:i,markdownLinkifyIt:o,tinyMceMicrosoftWordPasteFilter:r}},t);const s=d[0];let c,u,g,x;var S;if(s)c=s.getType(),u=c?(0,p()._A)(c,s.getFormat()):void 0,g=null===(S=s.getCollectionStore())||void 0===S?void 0:S.id,x=s.getParentCollectionIdUpToTwoLevels();a().dh(l,{analyticsName:b.analyticsName,action_type:b.analyticsActionType,from:"keyboard_shortcut",block_id:null==s?void 0:s.id,block_type:c,is_toggleable:u,collection_id:g,parent_collection_id:x}),M={resetBlockMenuStore:e},y().default.setKeyboardMode(!0),v().default.reset(),h().default.checkGate({gateName:"block_menu_shortcut_fix"})&&M.resetBlockMenuStore&&f().Z.reset()}var M}},496218:(e,t,n)=>{n.r(t),n.d(t,{AiAssistantIntroModal:()=>z,useSetLastExposedToQnaAtTimestamp:()=>te});n(241792);var i=n(667294),o=()=>n(219727),s=()=>n(732811),a=()=>n(142735),r=()=>n(846550),l=()=>n(788860),d=()=>n(696459),c=()=>n(707513),u=()=>n(865742),p=()=>n(636340),m=()=>n(901193),g=()=>n(497065),f=()=>n(269299),h=()=>n(343353),y=()=>n(236692),v=()=>n(789168),x=()=>n(316773),b=()=>n(941912),S=()=>n(124913),M=()=>n(559155);var j=()=>n(916095),C=()=>n(442531),w=()=>n(677559),k=()=>n(388957),_=()=>n(168441),T=()=>n(803728),I=()=>n(738740),P=()=>n(876822),A=()=>n(524434),R=()=>n(212493),Z=()=>n(779300),B=()=>n(729775),D=()=>n(961033),L=()=>n(67961),O=()=>n(765513),H=n(785893);const V=24,U=254,E=170,N=(0,l().vU)({shareDataTitle:{defaultMessage:"You’re in control of your data",id:"AiAssistantWelcomeModal.intro.titleShareData"},shareDataHeader:{defaultMessage:"By default, Notion does not train on your content",id:"AiAssistantWelcomeModal.intro.shareDataHeader"},shareDataDescription:{defaultMessage:"But, if you’d like to help improve our models and features, please opt-in below:",id:"AiAssistantWelcomeModal.intro.shareDataDescription"},welcomeTitle:{defaultMessage:"Meet the new Notion AI",id:"AiAssistantWelcomeModal.intro.title"},subtitle:{defaultMessage:"One AI tool that does it all. Search, generate, analyze, and chat—right inside Notion.",id:"AiAssistantWelcomeModal.intro.subtitle"},findInSlack:{defaultMessage:"Find in Slack",id:"AiAssistantIntroModal.findInSlack"},findInGoogleDrive:{defaultMessage:"Find in Google Drive",id:"AiAssistantIntroModal.findInGoogleDrive"},attachFile:{defaultMessage:"Analyze PDF",id:"AiAssistantIntroModal.attachPDF"}}),F=[{id:u().if.searchQnA.id,label:u().if.searchQnA,icon:n(196346).A,color:"blue"},{id:u().if.chatKeyPoints.id,label:u().if.chatKeyPoints,icon:n(749115).O,color:"green"},{id:u().if.brainstormIdeas.id,label:u().if.brainstormIdeas,icon:n(386469).b,color:"green"},{id:u().if.writeCode.id,label:u().if.writeCode,icon:n(739888).y,color:"green"},{id:u().if.draftDiagram.id,label:u().if.draftDiagram,icon:n(352379).x,color:"purple"},{id:"attachment",label:N.attachFile,icon:n(679982).s},{id:u().if.draftTable.id,label:u().if.draftTable,icon:n(676232).t,color:"purple"},{id:u().if.draftMeetingAgenda.id,label:u().if.draftMeetingAgenda,icon:n(953293).R,color:"purple"},{id:u().if.translate.id,label:u().if.translate,icon:n(289271).Q,color:"green"},{id:u().if.improveWriting.id,label:u().if.improveWriting,icon:n(621378).d,color:"purple"},{id:"findInGoogleDrive",label:N.findInGoogleDrive,icon:n(959328).c},{id:"findInSlack",label:N.findInSlack,icon:n(435797).P}],K=F.concat(F).concat(F);function z(){const e=(0,o().O7)(),t=(0,i.useCallback)((t=>{let{source:n}=t;const{currentUserSettingsStore:i}=P().default.state;i&&((0,y().trackAssistantIntroModalClose)(e,{source:n}),(0,h().setAssistantOnboardingPhase)(e,{phase:"tooltip",transactionUserAction:"AiAssistantIntroModal.dismissModal",userSettingsStore:i}),T().Gi(e,"ai_assistant_announcement"))}),[e]);return te(),(0,H.jsx)(I().k,{messageKey:"ai_assistant_announcement",desktopRenderInner:()=>(0,H.jsx)(X,{onDismiss:t}),phoneRenderInner:()=>null})}function W(){const e=q();return(0,H.jsxs)("div",{style:e.rowItemWrapper,children:[(0,H.jsx)("div",{style:e.rowItemIconWrapper,children:(0,_().Q)(e.rowItemIcon)}),(0,H.jsxs)("div",{style:e.textWrapper,children:[(0,H.jsx)("div",{style:e.sharedataTitle,children:(0,H.jsx)(l()._H,{...N.shareDataHeader})}),(0,H.jsx)(L().Z,{isSecondaryColor:!0,isSmall:!0,isMultiline:!0,children:(0,H.jsx)(l()._H,{...N.shareDataDescription})})]})]})}function q(){const e=ne();return(0,r().yK)((t=>({...e,rowItemWrapper:{display:"flex",alignItems:"start",marginBottom:12},rowItemIconWrapper:{color:t.accentColors.uiBlue[600],background:t.accentColors.uiBlue[100],display:"flex",alignItems:"center",justifyContent:"center",borderRadius:100,marginRight:8},rowItemIcon:{height:30,width:30,padding:8},sharedataTitle:{fontWeight:c().Ue.medium,fontSize:14,marginBottom:4},textWrapper:{display:"flex",flexDirection:"column",maxWidth:"100%"},icon:{width:16,height:16},sparklesIcon:{fill:t.accentColors.translucentGray[800],width:14},contentWrapper:{paddingLeft:24,paddingRight:26,width:424},assistantIntroHeaderWrapper:{height:200},title:{fontSize:25,fontWeight:700,paddingBottom:8},subtitle:{fontSize:c().JB.UIRegular.desktop,fontWeight:c().Ue.regular,color:t.text.secondary},body:{fontWeight:400,fontSize:14,color:t.text.secondary},faceImg:{pointerEvents:"none",width:72,height:72,boxShadow:t.lightBoxShadow,borderRadius:100,flexGrow:0},imgWrap:{display:"flex",alignItems:"center",paddingTop:40,paddingBottom:30,paddingLeft:24},spacer:{marginTop:20,marginBottom:20},footer:{paddingTop:8,paddingBottom:24,marginTop:20},simpleFooter:{paddingBottom:24},helpTitle:{fontSize:14,fontWeight:600},consentButton:{fontWeight:600,height:"36px"},firstSelector:{fontWeight:400,border:"none"},lastSelector:{fontWeight:400,border:"none"},introAnimationWrapper:{height:294,overflowY:"hidden",maskImage:"linear-gradient(to bottom, rgba(0, 0, 0,0) 24px, rgba(0, 0, 0) 50%, rgba(0,0,0,0) 265px"},introAnimationWrapperLeapStep:{height:140,marginTop:8},faceWrapper:{alignContent:"center",paddingLeft:2},faceWrapperLeapStep:{height:"100%",alignContent:"center",paddingLeft:2,paddingTop:40,paddingBottom:30},skillListWrapper:{display:"flex",flexDirection:"column",gap:8,marginLeft:24,overflowY:"hidden"},pillWrapper:{display:"flex",alignItems:"center",padding:"8px 16px 8px 12px",borderRadius:100,width:"max-content",backgroundColor:t.tint.regular,color:t.text.primary,fontSize:14,fontWeight:c().Ue.medium,gap:8},blue:{color:t.accentColors.uiBlue[500]},green:{color:t.accentColors.green[500]},purple:{color:t.accentColors.purple[500]}})),[e])}function G(e){const{label:t,icon:n,color:i}=e,o=q(),s=i?o[i]:{},{value:a}=(0,w().XJ)(C().io);if(!a)return null;const{motion:r}=a;return(0,H.jsxs)(r.div,{style:o.pillWrapper,children:[n({...o.icon,...s}),(0,H.jsx)(l()._H,{...t})]})}function Y(e){const t=q(),{phase:n}=e,o="welcome"===n,s=function(){const e=(0,r().Fg)();return(0,i.useMemo)((()=>"dark"===e.mode?b():S()),[e])}(),{value:a}=(0,w().XJ)(C().io);if(!a)return null;const{motion:l}=a;return(0,H.jsx)("div",{style:o?t.introAnimationWrapper:t.introAnimationWrapperLeapStep,children:(0,H.jsxs)(R().jX,{gap:0,direction:"row",height:"fill",align:o?"center":"center-left",children:[(0,H.jsx)(l.div,{layoutId:"face",style:t.faceWrapper,children:(0,H.jsx)("img",{style:t.faceImg,src:s,alt:"Notion AI logo"})}),(0,H.jsx)(l.div,{initial:{y:45},animate:{y:-45*(F.length-1)},transition:{repeat:1/0,duration:22,ease:"linear"},style:{...t.skillListWrapper,opacity:o?1:0},children:K.map(((e,t)=>(0,H.jsx)(G,{label:e.label,icon:e.icon,color:e.color},e.id+t)))})]})})}function $(e){const{environment:t}=e,n=A().KR.getNavigationTargetForTryAssistantNowButton();switch(n){case"fullPage":g().c4({environment:t,url:"/chat"});break;case"corner":(0,v().openAssistantRightHandSideMenu)({environment:t,from:"assistant_intro_modal"});break;case"writer":m().w({environment:t,prefill:void 0});break;default:(0,d().t1)(n)}}function X(e){const{onDismiss:t}=e,n=(0,o().O7)(),[s,r]=(0,i.useState)("welcome"),c=(0,a().VK)((()=>{const e=P().default.state.currentSpaceStore,t=P().default.state.currentSpaceViewStore;return!(!e||!t)&&function(e){var t;const{environment:n,assistantFeatureGateStore:i,currentSpaceViewStore:o,currentSpaceStore:s}=e;if(!o||!s)return!1;const a=(null==s?void 0:s.canAdmin())??!1,r=(0,M().$_)(n,s.id),l=Boolean(null===(t=o.getSettings())||void 0===t?void 0:t.has_user_seen_leap_modal);return i.isWorkspaceLeapEligible()&&a&&!r&&!(0,d().$K)(s.getSettings().enable_ai_training)&&!l}({environment:n,assistantFeatureGateStore:A().KR,currentSpaceStore:e,currentSpaceViewStore:t})}),[n]),u=(0,i.useCallback)((()=>{c?r("leap"):((0,y().trackAssistantIntroModalTryNow)(n,{}),t({source:"tryNow"}),$({environment:n}))}),[c,n,t]),p=(0,i.useCallback)((()=>{if(t({source:"closeButton"}),c){const e=P().default.state.currentSpaceViewStore;if(!e)return;f().createAndCommit({userAction:"AiAssistantIntroModal.updateLeapModalSeen",environment:n,canUndo:!0,perform:t=>{f().applyOperation({store:e,operation:{pointer:e.pointer,path:["settings"],command:"update",args:{...e.getSettings(),has_user_seen_leap_modal:!0}},transaction:t})}})}}),[t,c,n]),m=(0,i.useCallback)((()=>{x().assistantAnalyticsActions.trackLeapDismissed(n),p()}),[n,p]);(0,i.useEffect)((()=>{const e=Date.now();return()=>{const t=Date.now();(0,y().trackAssistantIntroModalRead)(n,{reading_time:t-e})}}),[]);const g=q(),h=(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(Y,{phase:"welcome"}),(0,H.jsx)("div",{style:g.title,children:(0,H.jsx)(l()._H,{...N.welcomeTitle})}),(0,H.jsx)("div",{style:g.subtitle,children:(0,H.jsx)(l()._H,{...N.subtitle})}),(0,H.jsxs)(R().jX,{align:"center",direction:"row",gap:"auto",style:g.footer,children:[(0,H.jsx)(ee,{}),(0,H.jsx)(R().jX,{align:"center-right",direction:"row",gap:12,width:"hug",children:(0,H.jsx)(Z().h,{onClick:u,children:(0,H.jsx)(l()._H,{defaultMessage:"Try it",id:"AssistantIntroMessage.intro.signup.nextMessage"})})})]})]});return(0,H.jsxs)("div",{children:[(0,H.jsx)(j().U4,{onDismiss:p}),(0,H.jsx)(R().jX,{gap:0,children:(0,H.jsx)("div",{style:g.contentWrapper,children:"leap"===s?(0,H.jsx)(Q,{onDismiss:m}):h})})]})}function Q(e){const{onDismiss:t}=e,[n,a]=(0,i.useState)(),c=void 0===n,u=(0,o().O7)(),m=(0,i.useCallback)((e=>{a(e),x().assistantAnalyticsActions.trackLeapPreferenceSelect(u,{will_share:e})}),[u]),g=(0,i.useCallback)((e=>{const t=P().default.state.currentSpaceStore;t&&f().createAndCommit({userAction:"AiAssistantIntroModal.updateWorkspaceShouldTrain",environment:u,canUndo:!0,perform:n=>{p().sW({store:t,data:{settings:{...t.getSettings(),enable_ai_training:e}},transaction:n})}})}),[u]),h=(0,i.useCallback)((()=>{(0,d().$K)(n)&&(g(n),x().assistantAnalyticsActions.trackLeapSubmit(u,{will_share:n})),t(),$({environment:u})}),[u,t,n,g]);(0,s().K)((()=>{x().assistantAnalyticsActions.trackLeapPresented(u)}));const y=q(),v=(0,r().yK)((()=>({...y,skip:{fontSize:14,padding:"0px 12px",height:36,display:"flex",alignItems:"center",cursor:c?"default":"pointer",opacity:c?.4:1},titleLeap:{marginBottom:12}})),[c,y]);return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(Y,{phase:"leap"}),(0,H.jsx)("div",{style:{...v.title,...v.titleLeap},children:(0,H.jsx)(l()._H,{...N.shareDataTitle})}),(0,H.jsx)(W,{}),(0,H.jsxs)(R().jX,{direction:"column",children:[(0,H.jsx)(D().n,{style:v.firstSelector,label:(0,H.jsx)(l()._H,{defaultMessage:"Share data to help improve Notion AI",id:"AiAssistantWelcomeModal.admin.shareData"}),onChange:()=>{},isSelected:!0===n,onClick:()=>m(!0),value:"share_data",selectType:"radio"}),(0,H.jsx)(D().n,{style:v.lastSelector,label:(0,H.jsx)(l()._H,{defaultMessage:"Do not share data",id:"AiAssistantWelcomeModal.admin.doNotShareData"}),onChange:()=>{},selectType:"radio",isSelected:!1===n,onClick:()=>m(!1),value:"do_not_share_data"})]}),(0,H.jsxs)(R().jX,{align:"center",direction:"row",gap:"auto",style:v.footer,children:[(0,H.jsx)(J,{}),(0,H.jsx)(R().jX,{align:"center-right",direction:"row",gap:12,width:"hug",children:(0,H.jsx)(Z().h,{onClick:h,disabled:c,children:(0,H.jsx)(l()._H,{defaultMessage:"Confirm",id:"AssistantIntroMessage.intro.signup.confirmMessage"})})})]})]})}function J(){const e=(0,r().Fg)(),t=(0,o().O7)(),n=(0,i.useCallback)((e=>{x().assistantAnalyticsActions.trackLeapLinkClick(t,{link:e})}),[t]);return(0,H.jsx)("div",{style:{color:e.mediumTextColor,fontSize:12,width:256},children:(0,H.jsx)("div",{children:(0,H.jsx)(l()._H,{defaultMessage:"If you choose to share data, you are agreeing to these <terms>Terms</terms>. <learnmore>Learn more</learnmore>",id:"AiAssistantIntroModal.AdminAgreeToTerms",values:{terms:e=>(0,H.jsx)(O().Z,{onClick:()=>n("terms"),external:!0,href:"https://www.notion.so/notion/Notion-AI-Learning-and-Early-Access-Program-Terms-0c55d702d0154a788d9e70c4ee396399",children:e}),learnmore:e=>(0,H.jsxs)("span",{style:{display:"inline-flex",alignItems:"center",gap:"2px"},children:[(0,H.jsx)(O().Z,{onClick:()=>n("faq"),external:!0,href:"https://www.notion.so/help/notion-ai-leap-program-faqs",children:e}),(0,k().K)({width:14,height:14})]})}})})})}function ee(){const e=ne(),t=(0,o().O7)(),n=(0,i.useCallback)((()=>{(0,y().trackLearnMoreAboutAssistantClicked)(t,{})}),[t]);return(0,H.jsx)("div",{style:e.learnMoreCopy,children:(0,H.jsxs)(B().Z,{onClick:n,style:e.learnMoreLink,innerStyle:e.learnMoreLinkInner,href:"https://www.notion.so/help/guides/everything-you-can-do-with-notion-ai",external:!0,children:[(0,H.jsx)(l()._H,{defaultMessage:"Learn more",id:"AiAssistantIntroModal.LearnMoreAboutAssistantButton"}),(0,k().K)({width:14,height:14,marginTop:2,marginLeft:4})]})})}function te(){const e=(0,i.useRef)(!1),t=(0,o().O7)();(0,a().VK)((()=>{const{currentUserSettingsStore:n}=P().default.state;if(!n||!n.isReady())return;if(!A().KR.showRemindersToUseQnA())return;const i=n.getSettingsStore().getKeyStore("last_exposed_to_ai_qna_at").getValue();(0,d().$K)(i)||e.current||(e.current=!0,(0,h().setLastExposedToQnaAtToCurrentTimestamp)(t,{userSettingsStore:n}))}),[t])}function ne(){return(0,r().yK)((e=>({betaBadge:{borderRadius:4,display:"inline-block",fontSize:11,fontWeight:500,padding:"1px 4px"},importDisclaimerWrap:{marginTop:10,display:"flex",alignItems:"center",gap:2},clockIcon:{width:14,height:14,color:e.mediumTextColor},footer:{borderTop:`1px solid ${e.tableLightDividerColor}`},introCopyArea:{paddingLeft:V,paddingRight:V},introTitle:{fontWeight:c().Ue.bold,fontSize:25,display:"flex"},learnMoreCopy:{color:e.mediumTextColor,fontSize:12,textDecoration:"underline"},learnMoreLink:{width:"max-content",marginLeft:-4},learnMoreLinkInner:{display:"flex",alignItems:"center",paddingLeft:4,paddingRight:4},mainCopyText:{width:350},notionAiText:{marginTop:2,paddingLeft:4,color:e.accentColors.gray[900],fontWeight:c().Ue.medium},sparklesIcon:{width:14},stubPng:{width:"100%",height:U},smallVariantVideoStubPng:{width:"100%",height:E}})),[])}},338403:(e,t,n)=>{n.r(t),n.d(t,{AppComponents:()=>du});var i=n(667294),o=()=>n(219727),s=()=>n(142735),a=()=>n(658325),r=()=>n(138555),l=()=>n(874018),d=()=>n(677559);const c=new(d().Ss)("desktop",(async()=>{const[{Notification:e},{default:t}]=await Promise.all([n.e(99380).then(n.bind(n,521477)),n.e(99380).then(n.bind(n,929586))]);return{Notification:e,ElectronContextMenu:t}})),u=(0,d().kF)(c,(e=>e.ElectronContextMenu));var p=()=>n(675393),m=()=>n(551693),g=(n(267602),n(653476),()=>n(955620)),f=()=>n(513670),h=()=>n(571896),y=()=>n(220228),v=()=>n(269299),x=()=>n(198829),b=()=>n(967092),S=()=>n(352230),M=()=>n(191003),j=()=>n(440721),C=()=>n(998901),w=()=>n(104088),k=()=>n(933539),_=()=>n(127519),T=()=>n(150569),I=()=>n(223321),P=()=>n(901526),A=n(785893);function R(){const e=(0,o().Fy)(),{open:t,filter:n,emojiTextStore:a,popupOpen:r,originRect:l,alwaysShowPopup:d}=(0,s().VK)((()=>{const e=I().Z.state,t=e.open;if(!t)return{open:t,popupOpen:!1};const n=function(e){return j().zK(e.textStore,e.oldTextValue,!0)}(e)||"",{textStore:i,showPopupWithEmptyFilter:o,selectionRect:s}=e,a=Boolean(o);return{open:t,filter:n,emojiTextStore:i,popupOpen:n.length>0||a,originRect:s,alwaysShowPopup:a}}),[]),{textMode:c,prevChar:u,singleTextSelectionStore:p}=(0,s().VK)((()=>{var e;const t=_().default.state,{mode:n}=t;if("editing"!==n)return{mode:n};const{multiSelection:i}=t,o=g().eeV(i.start.store.getValue());return{textMode:n,prevChar:o?o[i.start.index-1]:void 0,singleTextSelectionStore:null===(e=(0,M().QY)(i))||void 0===e?void 0:e.store}}),[]),m=(0,s().VK)((()=>k().Z.state.open),[]);return(0,i.useEffect)((()=>{t&&!m&&("editing"!==c||!n&&":"!==u||p!==a||void 0===n||":"===n||n.startsWith(" ")||n.includes("\n"))&&y().xv()}),[a,n,m,t,u,p,c]),(0,A.jsx)(b().ZP,{popupType:e.isMobileNative&&!e.isTablet?w().k.SlideUp:w().k.Popup,open:r,originRect:l,placementToOrigin:C().Placement.Bottom,alignmentToOrigin:C().Alignment.Start,originGap:4,disableMouseCapture:!0,disableContentScroll:!0,onDismiss:B,render:()=>(0,A.jsx)(Z,{open:t,filter:n||"",alwaysShowPopup:d}),keepFocus:!0})}function Z(e){let{open:t,filter:n,alwaysShowPopup:s}=e;const a=(0,o().O7)(),r=(0,o().Fy)(),l=(0,i.useRef)(null),d=r.isMobileNative&&!r.isTablet?{menuType:S().o.ActionSheet}:{menuType:S().o.Popup,width:T().fG,onClickOutside:y().xv};const c=(0,i.useMemo)((()=>f().Ds((e=>{h().VJ(a,{searchQuery:e})}),500)),[a]);return t?!Boolean(s)&&n.length<1?null:(0,A.jsx)(x().Z,{innerRef:l,...d,children:(0,A.jsx)(P().h,{filter:n,onSubmit:e=>D(e,a),onNoResults:function(){if(!t)return;if(!n||0===n.length)return;const e=n.charAt(n.length-1);e&&(/\s/g.test(e)?y().xv():c(n))},isCallout:!1,menuRef:l,isInline:!0,onUpload:{onComplete:e=>{D(e,a)}}})}):null}function B(){y().xv()}function D(e,t){v().createAndCommit({userAction:"EmojiMenu.handleSubmit",environment:t,canUndo:!0,perform:n=>{y().RL({environment:t,emoji:e,transaction:n})}})}var L=()=>n(154057),O=()=>n(466970),H=(n(670560),n(241792),()=>n(59438)),V=()=>n(506347),U=()=>n(998411),E=()=>n(183922),N=()=>n(779565),F=()=>n(788860),K=()=>n(253502),z=()=>n(824462),W=()=>n(231077),q=()=>n(205228),G=()=>n(615676),Y=()=>n(852465),$=()=>n(635596),X=()=>n(704259),Q=()=>n(141938),J=()=>n(876822),ee=()=>n(749826),te=()=>n(826955),ne=()=>n(987503);function ie(e,t){const n=(0,s().VK)((()=>t?null==e?void 0:e.userId:void 0),[t,null==e?void 0:e.userId]),a=(0,F().YB)(),r=(0,o().O7)(),l=(0,i.useRef)(),d=(0,i.useRef)(),c=(0,i.useRef)(-1),u=(0,i.useCallback)((()=>{const{mobileNative:e}=r,{allSpaces:t,currentSpace:n}=oe();e&&(t===l.current&&n===d.current||e.setBadgeNumber(t,n),d.current=n),t!==l.current&&(t>0?W().setBadge(`${t}`):W().setBadge("")),l.current=t}),[r]),p=(0,i.useMemo)((()=>f().IH(u)),[u]),m="on"===(0,ne().a)("inbox_activity_split"),g=(0,i.useCallback)((async(t,n)=>{if(n===c.current||!e)return;if(c.current=n,!function(e){if(0===X().default.state.results.length)return!0;if(!document.hasFocus())return!0;if(!e.includes("unreadCount"))return!0;return!1}(String(n)))return;let i=[];if(ee().default.checkGate({gateName:"multi_cell_get_user_notifications"})){const e=z().callMultiCellApi({eventName:"getUserNotifications",environment:r,data:{size:1e3,isInboxV2:!0,splitInboxActivity:m},headers:{}});for await(const t of e)"success"===t.type&&i.push(...t.data.results)}else{const e=await z().callApi({eventName:"getUserNotifications",environment:r,data:{size:1e3,isInboxV2:!0,splitInboxActivity:m}});if("failed"===e.type)return;i=e.data.results}X().default.setState({results:i}),p();const o=f().G0.apply(null,i.map((e=>e.unreceived.notificationIds)));for(const s of o)se(s,e,a,r)}),[e,p,r,m,a]),h=(0,i.useMemo)((()=>f().P2(g,1e3)),[g]);(0,i.useEffect)((()=>{if(!n)return;let e;const t=(e,t)=>{Q().Z.whenActive((()=>{h(e,t)}))};if(n){const i=(0,E().Lp)(n);e=$().ZP.addListener(i,t,void 0,r),g("initializeListener",-1)}return X().default.addListener(u),r.mobileNative&&J().default.addListener(u),()=>{e&&$().ZP.removeListener(e,r),X().default.addListener(u),r.mobileNative&&J().default.removeListener(u)}}),[n,r,g,h,u])}function oe(){const e="on"===ee().default.getGroup("inbox_activity_split")?"comments":"mentions";return{allSpaces:X().default.getTotalUnreadCountForType(e),currentSpace:X().default.getUnreadCountForCurrentSpace()[e]??0}}async function se(e,t,n,i){const o=(0,te().Kv)(t,{table:N().uX,id:e});await o.load();const s=o.getKeyStore("activity_id").getValue(),a=o.getKeyStore("space_id").getValue();if(!a||!s)return;const r=(0,Y().No)(o,s,a);await r.load();const l=r.getModel(),{currentUserStore:d,currentSpaceViewStore:u}=J().default.state;if(d&&u&&l&&!l.invalid&&!H().BX(l,d.id)&&await W().isMainTabOrWindow()&&"undefined"!=typeof Notification){if(await u.load(),!u.isDefined())return;if(!l.isMentionType())return;if(!u.getNotifyDesktop())return;if(!i.device.isDesktop)return;const e=(0,(await c.load()).Notification)({activity:l,getRecordValue:o.getRecordValue,userTimeZone:(0,U().r)(),intl:n,pageVisitSource:V().tY.PushNotification,recipientUser:d.getModel(),experimentService:ee().default,collectionFeatureGates:(0,G().W)()});if(!e)return;const{subject:t,body:s}=e,a=new Notification(t,{body:s,silent:!0}),p=H().Fb(l.type),m={medium:"desktop_push",type:p,badge_number:oe().allSpaces,notification_id:o.id,activity_id:r.id},g=e=>K().b2({environment:i,args:m,action:e});g("sent"),a.addEventListener("show",(()=>g("shown"))),a.addEventListener("close",(()=>g("closed"))),a.addEventListener("click",(()=>{const e=H().hY({activity:l,getRecordModel:o.getRecordModel,baseUrl:q().default.domainBaseUrl,pageVisitSource:V().tY.PushNotification}),t=(0,V().k6)(e,[p,"desktop_push"],V().tY.PushNotification);W().openNotificationUrl(t,i),g("clicked")}))}}const ae=new(d().Ss)("linkMenu",(()=>Promise.all([n.e(62743),n.e(73308)]).then(n.bind(n,895330)))),re=(0,d().kF)(ae,(e=>e.default)),le=new(d().Ss)("message-store-debug-panel",(async()=>await n.e(51308).then(n.bind(n,36706)))),de=(0,d().kF)(le,(e=>e.MessageStoreDebugPanel));var ce=()=>n(638445);function ue(){return(0,s().VK)((()=>ce().Z.state.open),[],{debugName:"MessageStoreDebugPanelWrapper.isOpen"})?(0,A.jsx)(de,{}):null}var pe=()=>n(801812),me=()=>n(741633),ge=()=>n(696459),fe=()=>n(91502);function he(e){let{environment:t}=e;const{currentSpaceViewStore:n,currentSpaceStore:i,currentUserStore:o}=J().default.state,s=null==n?void 0:n.getUserId(),a=null==n?void 0:n.getSpaceId(),r={readyForHomePagesRequest:!1,spaceViewUserId:void 0,spaceViewId:void 0,spaceViewSpaceId:void 0};return null!=n&&n.isDefined()&&n.getAlive()&&n.canRead()&&s&&a?function(){const{spaceTransitionStatus:e}=J().default.state;switch(e){case"notTransitioning":return!1;case"joiningOrCreatingSpace":case"switchingToOrLoadingSpace":return!0;default:(0,ge().t1)(e)}}()||t.currentUser.id!==s||(null==o?void 0:o.id)!==s||(null==i?void 0:i.id)!==a?r:(0,fe().QI)()?{readyForHomePagesRequest:!0,spaceViewId:n.id,spaceViewUserId:s,spaceViewSpaceId:a}:r:r}const ye=(0,f().Ds)(z().getUserHomePages,1e3,{leading:!0,trailing:!0}),ve=function(){const e=(0,o().O7)(),t=(0,s().VK)((()=>he({environment:e})),[e]);return(0,pe().r5)((async()=>{t.readyForHomePagesRequest&&await ye({environment:e,data:{spaceViewId:t.spaceViewId,spaceId:t.spaceViewSpaceId},userId:t.spaceViewUserId,headers:(0,me().Bb)({cellId:void 0,recordId:t.spaceViewId,spaceId:t.spaceViewSpaceId})})}),[e,t.readyForHomePagesRequest,t.spaceViewId,t.spaceViewUserId,t.spaceViewSpaceId]),null};var xe=()=>n(106342),be=()=>n(616728),Se=()=>n(688450),Me=()=>n(121700),je=()=>n(27475),Ce=()=>n(557576),we=()=>n(111631),ke=()=>n(502175);function _e(){const e=(0,o().O7)(),{currentSpaceStore:t}=(0,s().Kw)(J().default),n=e.currentUser.id,a=(0,s().VK)((()=>null==t?void 0:t.id),[t]);return(0,i.useEffect)((()=>{if(!a||!n)return;const t=$().ZP.addListener((0,E().pD)({userId:n,spaceId:a}),(async(t,i)=>{(function(e){var t;let{spaceId:n,userId:i,emitValue:o}=e;const s=null===(t=ke().Z.getUserJoinedTeamsState({userId:i,spaceId:n}))||void 0===t?void 0:t.lastEmitValue;if(s===o)return!1;if(void 0===s&&ke().Z.getHasFetched({userId:i,spaceId:n}))return!1;return!0})({spaceId:a,userId:n,emitValue:i})&&await we().m({environment:e,spaceId:a,userId:n,emitValue:i});const o=ke().Z.getUserJoinedTeamsState({userId:n,spaceId:a});o&&ke().Z.setUserJoinedTeamsState({userId:n,spaceId:a,state:{...o,lastEmitValue:i}})}),void 0,e);return function(){t&&$().ZP.removeListener(t,e)}}),[e,n,a]),null}var Te=()=>n(685375),Ie=()=>n(846550),Pe=()=>n(707513),Ae=()=>n(198046),Re=()=>n(990966),Ze=()=>n(641702),Be=()=>n(12512),De=()=>n(148126),Le=()=>n(688049),Oe=()=>n(653457),He=()=>n(495439),Ve=()=>n(1910),Ue=()=>n(654133),Ee=()=>n(345837);const Ne=(0,F().vU)({learnTooltip:{defaultMessage:"Learn more about alt text",id:"altTextMenuPopup.helpButton.tooltip"}});function Fe(){const e=(0,o().O7)(),{device:t}=e,n=(0,F().YB)(),a=(0,Ie().yK)((e=>({wrapper:{padding:t.isMobile?16:12,display:"flex",flexDirection:"column",fontSize:t.isMobile?Pe().JB.UIRegular.mobile:Pe().JB.UIRegular.desktop,wordBreak:"break-word",maxHeight:t.isMobile?"35vh":"200px",overflowY:"auto"},closeButton:{borderRadius:"100%",width:22,height:22,float:"right",marginLeft:8},input:{marginTop:t.isMobile?16:12,padding:t.isMobile?"8px 12px":"4px 10px",width:"100%",borderRadius:6,boxShadow:e.inputBoxShadow,background:e.surface.page,cursor:"text",overflowX:"hidden"},helpText:{color:e.text.secondary,display:"inline"},helpButton:{marginLeft:2,display:"inline-flex",position:"absolute",transform:t.isMobile?void 0:"translateY(-1px)"}})),[t.isMobile]),{altTextStore:r,altText:l,canEdit:d}=(0,s().VK)((()=>{const e=He().default.state.blockStore;return{altTextStore:null==e?void 0:e.getPropertyStore("alt_text"),altText:e?(0,Ze().Xh)(null==e?void 0:e.getPropertyValue("alt_text"),e):void 0,canEdit:(null==e?void 0:e.canEdit())&&!(null!=e&&e.isNavigableAncestorNonEditableState())}}),[]);return(0,i.useEffect)((()=>{r&&Re().setSelectionAtEnd({store:r})}),[r]),(0,A.jsx)(x().Z,{menuType:t.isMobile?S().o.ActionSheet:S().o.Popup,width:t.isMobile?"100vw":310,children:(0,A.jsxs)("div",{style:a.wrapper,children:[(0,A.jsxs)("div",{children:[(0,A.jsx)(Ve().Z,{style:a.closeButton,hovered:!0,icon:Le().D,onClick:()=>Ae().x(e),ariaLabel:n.formatMessage({id:"altTextMenuPopup.closeButton",defaultMessage:"Close"})}),d?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{style:a.helpText,children:(0,A.jsx)(F()._H,{id:"altTextMenuPopup.description",defaultMessage:"Add alt text to describe this image. This makes your page more accessible to people who are vision-impaired or blind"})}),(0,A.jsx)(Ue().Z,{renderTooltip:()=>n.formatMessage(Ne.learnTooltip),render:e=>(0,A.jsx)(Ve().Z,{ariaLabel:n.formatMessage(Ne.learnTooltip),icon:Oe().m,external:!0,href:(0,De().UY)("guides.altText"),style:a.helpButton,isLightIconColor:!0,...e})})]}):l]}),d&&r&&(0,A.jsx)(Ee().Z,{store:r,disabled:!1,pasteBehavior:"plaintext",style:a.input,placeholderStyle:a.input,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableInsertText:!0,disableSlashCommands:!0,disableEmojiCommands:!0,disableMentions:!0,disableEmbedMenu:!0,disableMobileActionBar:!0,disableComment:!0,disableSelectAllBlocks:!0,disableSelectionDrag:!0,onEnter:()=>Ae().x(e),onEsc:()=>Ae().x(e),placeholder:n.formatMessage({id:"altTextMenuPopup.placeholder",defaultMessage:"Add alt text..."}),inPageFind:Be().B3.none})]})})}const Ke=function(){const e=(0,o().O7)(),{device:t}=e,n=(0,Ie().yK)((e=>({popup:{background:e.altTextPopupBackground,borderTopLeftRadius:t.isMobile?12:6,borderTopRightRadius:t.isMobile?12:6,left:t.isMobile?0:8}})),[t.isMobile]),{open:i,originRect:a}=(0,s().VK)((()=>{const{open:e}=He().default.state;return e?{open:e,originRect:He().default.state.originRect}:{open:e,originRect:void 0}}),[]);return(0,A.jsx)(b().ZP,{popupType:t.isMobile?w().k.SlideUp:w().k.Popup,open:i,originRect:a,originGap:8,placementToOrigin:C().Placement.Bottom,alignmentToOrigin:C().Alignment.End,onDismiss:()=>Ae().x(e),render:()=>(0,A.jsx)(Fe,{}),sameWidthAsOrigin:!1,style:n.popup})};var ze=()=>n(799454),We=()=>n(70191),qe=()=>n(589525),Ge=()=>n(590972),Ye=()=>n(687647),$e=()=>n(156642),Xe=()=>n(281063),Qe=()=>n(8208),Je=()=>n(958783),et=()=>n(520849),tt=()=>n(283403),nt=()=>n(94967),it=()=>n(470386),ot=()=>n(299519),st=()=>n(539245);const at=[Ye().u.Open,Ye().u.Resolved];const rt=function(e){let{discussionIds:t,blockStore:i,recursivelyLoadAllDiscussions:a,tab:r,property_id:l}=e;const d=(0,o().O7)(),{resolved:c,unresolved:u}=(0,s().VK)((()=>{const e=Y().al(i,{recursivelyLoadAllDiscussions:a,includePropertyDiscussions:!0}).filter((e=>{if(t&&!t.includes(e.id)&&!Y().De(e))return!1;return!Boolean(l)||e.getPropertyId()===l})).sort(((e,t)=>t.getReactionStores().length-e.getReactionStores().length)),{resolved:n,unresolved:o}=Y().bB(e);return{resolved:n,unresolved:o}}),[i,a,t,l]),{device:p}=d;let m;return m=p.isMobile?{menuType:S().o.Modal,title:(0,A.jsx)(F()._H,{defaultMessage:"Comments",id:"blockDiscussionMenu.mobileMenu.title"}),header:(0,A.jsx)(ut,{tab:r,resolved:c,unresolved:u}),right:(0,A.jsx)(it().DoneMenuText,{}),onClickRight:ze().LZ,whiteBackground:!0}:{menuType:S().o.Popup,header:(0,A.jsx)(ut,{tab:r,resolved:c,unresolved:u}),width:480,maxHeight:"50vh",onClickOutside:ze().LZ},(0,A.jsx)(n(695284).Z,{capture:!0,preventType:et().Z.All,children:(0,A.jsx)(n(573357).Z,{capture:!0,allowMobileAutoScroll:!0,render:()=>(0,A.jsx)(nt().Z,{debugName:"BlockDiscussionMenu",capture:!0,onEsc:ze().LZ,onBackspace:ct,onDelete:ct,children:(0,A.jsx)(ot().Z,{store:i,droppable:!0,render:()=>(0,A.jsx)(x().Z,{...m,children:(0,A.jsx)(mt,{tab:r,blockStore:i,resolved:c,unresolved:u})})},i.id)})})})};function lt(e){let{message:t}=e;const n=(0,o().O7)(),{device:i}=n,s=(0,Ie().yK)((e=>({emptyState:{textAlign:"center",padding:i.isMobile?"64px 18px":"32px 18px 36px",fontSize:14,color:e.mediumTextColor}})),[i.isMobile]);return(0,A.jsx)("div",{style:s.emptyState,children:t})}function dt(e){const t=Ye().Z.state;t.open&&Ye().Z.setState({...t,tab:at[e]})}function ct(e){null==e||e.preventDefault(),ze().LZ()}function ut(e){let{tab:t,resolved:n,unresolved:i}=e;const s=(0,o().O7)(),{device:a}=s,r=i.length,l=n.length,d=(0,Ie().yK)((e=>({openCountStyle:{color:e.text.tertiary},resolvedCountStyle:{color:e.text.quaternary}})),[]);return 0===l||0===r?null:(0,A.jsx)(st().Z,{tabs:[(0,A.jsxs)("div",{children:[(0,A.jsx)(F()._H,{defaultMessage:"Open",id:"blockDiscussionMenu.openDiscussionsTab.title"},"openDiscussionsTitle")," ",(0,A.jsx)("span",{style:d.openCountStyle,children:r})]},"openDiscussions"),(0,A.jsxs)("div",{children:[(0,A.jsx)(F()._H,{defaultMessage:"Resolved",id:"blockDiscussionMenu.resolvedDiscussionsTab.title"},"resolvedDiscussionsTitle")," ",(0,A.jsx)("span",{style:d.resolvedCountStyle,children:l})]},"resolvedDiscussions")],selectedIndex:at.indexOf(t),onChange:dt,style:{...a.isAndroid&&{borderBottom:"none"}}})}function pt(e){const{value:t}=(0,d().XJ)(l().commentsDependency),n=(0,o().O7)(),i=(0,s().VK)((()=>Je().default.state.open&&Qe().Z.state.overlapsExistingDiscussionMenu),[]),a=(0,s().VK)((()=>Ye().Z.state.open&&Ye().Z.state.tab===Ye().u.Open),[]),r=(0,s().VK)((()=>Ye().Z.state.open&&Ye().Z.state.keepNewDiscussionAtBottom),[]),c=(0,s().VK)((()=>(Je().default.state.open&&Qe().Z.state.overlapsExistingDiscussionMenu)??!1),[]);if(0===e.discussionStores.length)return null;const u=r?e.discussionStores[0]:void 0;return(0,A.jsxs)(A.Fragment,{children:[t&&e.discussionStores.slice(u?1:0).map(((n,i,o)=>(0,A.jsx)(l().gU,{store:n,format:t.discussionHelpers.DiscussionFormat.Menu,isFirst:0===i,isOnly:1===o.length,discussionLocation:"block_menu",showResolveButtonByDefaultIfPossible:!0,blockStore:e.blockStore,onDismiss:ze().LZ},n.id))),u&&t&&(0,A.jsx)(l().gU,{store:u,format:t.discussionHelpers.DiscussionFormat.Menu,isFirst:1===e.discussionStores.length,isOnly:1===e.discussionStores.length,discussionLocation:"block_menu",showResolveButtonByDefaultIfPossible:!0,blockStore:e.blockStore,onDismiss:ze().LZ},u.id),i&&a&&(0,A.jsx)(Xe().Z,{environment:n,shouldShowTopDividerLine:!0,shouldExpandDiscussionWidth:c,noBackgroundColors:!0})]})}function mt(e){let{tab:t,blockStore:n,resolved:a,unresolved:r}=e;const c=(0,Ie().Fg)(),u=(0,o().O7)(),{device:p}=u,m=(0,s().VK)((()=>n.getType()),[n]),g=(0,s().VK)((()=>tt().h(n)),[n]),{value:f}=(0,d().XJ)(l().commentsDependency);if(!f)return null;if(t===Ye().u.Open){if(r.length){const e=m&&(0,ge().qg)($e().p2,m);return p.isMobile&&e&&g?(0,A.jsxs)(i.Fragment,{children:[(0,A.jsx)("div",{style:{padding:"12px 16px",boxShadow:`0 1px 0 ${c.regularDividerColor}`,marginBottom:1},children:(0,A.jsx)(g,{store:n,disabled:!0,hideContent:!0,style:{fontSize:14,pointerEvents:"none"},isQuickFind:!0})}),(0,A.jsx)(pt,{discussionStores:r,blockStore:n})]}):(0,A.jsx)(pt,{discussionStores:r,blockStore:n})}return(0,A.jsx)(lt,{message:(0,A.jsx)(F()._H,{defaultMessage:"No comments to show.",id:"blockDiscussionMenu.emptyState.noCommentsMessage"})})}return a.length?(0,A.jsx)(pt,{discussionStores:a,blockStore:n}):(0,A.jsx)(lt,{message:(0,A.jsx)(F()._H,{defaultMessage:"No resolved comments.",id:"blockDiscussionMenu.emptyState.noResolvedCommentsMessage"})})}const gt=function(){const e=(0,o().O7)(),{device:t}=e,a=(0,s().VK)((()=>Ye().Z.state.rect),[]),r=(0,s().VK)((()=>{if(!Ye().Z.state.open)return!1;let t=!1;const i=Ye().Z.state.property_id;if(Ye().Z.state.open&&i){var o;const e=null===(o=Ye().Z.state.blockStore)||void 0===o||null===(o=o.getAssociatedCollectionStore())||void 0===o?void 0:o.getLayoutStore();e&&(t=(0,We().Uo)({layoutStore:e,propertyId:i}).isPropertyInPageDetails)}const s=(0,n(954452).az)(e,Ye().Z.state.blockStore);return!!t||(Ge().default.state.currentTab!==Ge().gY.Comments||!(0,qe().Sx)(e))&&!s}),[e]),l=(0,i.useCallback)((()=>{ze().LZ()}),[]),d=(0,i.useCallback)((()=>{if(Ye().Z.state.open)return(0,A.jsx)(rt,{tab:Ye().Z.state.tab,blockStore:Ye().Z.state.blockStore,discussionIds:Ye().Z.state.discussionIds,recursivelyLoadAllDiscussions:Ye().Z.state.recursivelyLoadAllDiscussions,property_id:Ye().Z.state.property_id})}),[]);return(0,A.jsx)(b().ZP,{popupType:t.isMobile?w().k.SlideUp:w().k.Popup,open:r,originRect:a,placementToOrigin:C().Placement.Bottom,alignmentToOrigin:C().Alignment.Center,disableMouseCapture:!0,originGap:4,render:d,preventScaleTransition:!0,preventOpacityTransition:!0,onDismiss:l})};var ft=()=>n(499411),ht=()=>n(494293),yt=()=>n(799891),vt=()=>n(754874),xt=()=>n(332079),bt=()=>n(869211),St=()=>n(785673),Mt=()=>n(640566),jt=()=>n(78815),Ct=()=>n(865742),wt=()=>n(832309),kt=()=>n(82451),_t=()=>n(164084),Tt=()=>n(594546),It=()=>n(718959),Pt=()=>n(247724),At=()=>n(228362),Rt=()=>n(527278),Zt=()=>n(842595),Bt=()=>n(524434),Dt=()=>n(482970),Lt=()=>n(845622),Ot=()=>n(965903),Ht=()=>n(827973),Vt=()=>n(255577),Ut=()=>n(388284);const Et=(0,F().vU)({createTransclusion:{defaultMessage:"Paste and sync",id:"blockPasteMenu.actions.createTransclusion.title"},linkToPage:{defaultMessage:"Link to page",id:"blockPasteMenu.actions.linkToPage.title"},dismissItem:{defaultMessage:"Dismiss",id:"blockPasteMenu.actions.dismiss.title"},pasteItem:{defaultMessage:"Paste",id:"blockPasteMenu.actions.paste.label"},suggestedActionsSectionTitle:{defaultMessage:"Suggested actions",id:"blockPasteMenu.actions.suggestedActionsSectionTitle"}});const Nt=function(){const e=(0,o().Fy)(),t=(0,o().O7)(),a=(0,s().Kw)(Dt().Z),{stores:r,phase:l}=(0,s().Kw)(Ot().default);(0,i.useEffect)((()=>{a.open&&((0,n(632314).Z)(r,a.blocks)&&l===Ot().SelectionPhase.Selected||xt().xv(t))}),[a,r,l,t]);const d=(0,i.useCallback)((()=>{xt().xv(t)}),[t]),c=a.open&&"ai_actions"===a.type;return(0,A.jsx)(b().ZP,{popupType:e.isMobileNative&&!e.isTablet?w().k.SlideUp:w().k.Popup,open:a.open,originRect:a.open?a.rect:void 0,placementToOrigin:c?C().Placement.Right:C().Placement.Bottom,alignmentToOrigin:c?C().Alignment.Start:C().Alignment.End,originGap:4,disableMouseCapture:!0,disableContentScroll:!0,disableDarkOverlayBackground:e.isMobile,keepFocus:e.isMobile,render:()=>(0,A.jsx)(Kt,{}),onDismiss:d,disableFlippingPlacement:c})};function Ft(e){const{menuItemProps:t}=e,{isMobile:n}=(0,o().Fy)(),i=(0,s().Kw)(Bt().r4),a=n?{mobileIconStyle:i?{marginLeft:18,marginRight:2}:void 0}:{desktopIconStyle:i?{marginLeft:8,marginRight:2}:void 0};return(0,A.jsx)(Ht().Z,{...t,title:Rt().Z.formatMessage(At().Dr.askAI),icon:(0,A.jsx)(St().sW,{}),...a})}function Kt(){const e=(0,o().O7)(),t=(0,Ie().Fg)(),{device:n}=e,i=(0,s().VK)((()=>{const n=Dt().Z.state;return n.open?"ai_actions"===n.type?function(e,t,n){var i;const o=(0,It().np)();if(!o)return null;const s=(0,Mt().clientSkillToAssistantSurfaceAction)((0,jt().getAllClientSkills)({currentPageRecordPointer:void 0,currentCollectionRecordPointer:void 0})),a={type:"entrypoint",entrypoint:"blockPasteMenu",isMobile:t.device.isMobile,pageStore:o,selectionState:Ot().default.state,textSelectionState:_().default.state,userSettings:null===(i=J().default.state.currentUserSettingsStore)||void 0===i?void 0:i.getSettings()},r=(0,Mt().filterAssistantSurfaceActionsForContext)(s,a),l=(0,wt().fb)({assistantSuggestionContext:a,validatedActions:r}).filter(jt().isAssistantSurfaceActionWithClientSkill),d=(0,Mt().clientSkillToAssistantSurfaceAction)(l),c=(0,ft().Oy)();return[{key:"ai_actions_paste_menu",render:e=>(0,A.jsx)(Ut().Z,{...e,title:Rt().Z.formatMessage(Et.suggestedActionsSectionTitle)}),items:[{key:"paste",render:e=>(0,A.jsx)(Ht().Z,{...e,icon:(0,A.jsx)(vt().lA,{svg:Zt().U}),title:Rt().Z.formatMessage(Et.pasteItem)}),action:()=>{(0,Tt().j)({environment:t,event:{eventName:"block_paste_menu_action",eventProperties:{type:"ai_actions",action:"paste"}}}),xt().xv(t)}},...d.map((e=>({key:e.skillType,render:t=>(0,A.jsx)(Ht().Z,{...t,title:Rt().Z.formatMessage(_t().sY.writerGlobalSkill,{displayName:Rt().Z.formatMessage(e.displayName),acceptsParameters:(0,ht().Vz)(e.skillType)||(0,ht().Zf)(e.skillType)}),icon:(0,A.jsx)(vt().lA,{svg:e.icon,svgFill:(0,Ct().zm)(e.category).color(n).color})}),action:async()=>{try{(0,Tt().j)({environment:t,event:{eventName:"block_paste_menu_action",eventProperties:{type:"ai_actions",action:"client_skill",skill_type:e.skillType}}}),xt().xv(t),await(0,bt().toggleInitialPrompt)({from:"block_paste_menu",environment:t,sessionId:c});const n=Lt().default.state;if(!n||"assistantCompletionPopup"!==n.type||"initialPrompt"!==n.stage)return;await kt().assistantWriterActions.triggerAssistantSkillCompletion({environment:t,context:n.context,clientSkillWithParameterValues:(0,jt().dangerouslyCreateClientSkillWithParameterValues)(e),updater:Lt().default.createUpdater(),sessionId:c,from:"block_paste_menu",assistantSurfaceType:t.device.isMobile?"mobileWriter":"writer"})}catch{yt().log({level:"info",from:"BlockPasteMenu",type:"triggerAssistantSkillCompletionError",error:{message:"Error triggering assistant skill completion"},data:{miscDataToConvertToString:{skillType:e.skillType}}})}}}))),{key:"ask_ai",render:e=>(0,A.jsx)(Ft,{menuItemProps:e}),action:async()=>{try{(0,Tt().j)({environment:t,event:{eventName:"block_paste_menu_action",eventProperties:{type:"ai_actions",action:"ask_ai"}}}),xt().xv(t),await(0,bt().toggleInitialPrompt)({from:"block_paste_menu",environment:t,sessionId:c})}catch{yt().log({level:"info",from:"BlockPasteMenu",type:"triggerAssistantWriterError",error:{message:"Error opening assistant writer"}})}}}]}]}(0,e,t):"blocks"===n.type||"links"===n.type?function(e,t){const{blocks:n}=e,{currentSpaceStore:i}=J().default.state,o=[];if("blocks"===e.type){const{copiedStores:s,pageSource:a}=e;xt().H8({currentSpaceId:null==i?void 0:i.id,blocks:n,copiedStores:s})&&o.push({name:Rt().Z.formatMessage(Et.createTransclusion),action:async()=>{(0,Tt().j)({environment:t,event:{eventName:"block_paste_menu_action",eventProperties:{type:e.type,action:"create_transclusion"}}}),await xt().ry({environment:t,blocks:n,copiedBlockIds:s.map((e=>e.id))})}}),xt().wK({blocks:n})&&o.push({name:Rt().Z.formatMessage(Et.linkToPage),action:async()=>((0,Tt().j)({environment:t,event:{eventName:"block_paste_menu_action",eventProperties:{type:e.type,action:"link_to_page"}}}),xt().Dq({environment:t,blocks:n,source:{type:"blocks",copiedStores:s,pageSource:a}}))})}return"links"===e.type&&o.push({name:Rt().Z.formatMessage(Et.linkToPage),action:async()=>((0,Tt().j)({environment:t,event:{eventName:"block_paste_menu_action",eventProperties:{type:e.type,action:"link_to_page"}}}),xt().Dq({environment:t,blocks:n,source:{type:"links",copiedLinks:e.copiedLinks}}))}),[{key:"embed section",render:e=>(0,A.jsx)(Ut().Z,{...e}),items:[{key:"dismiss",render:e=>(0,A.jsx)(Ht().Z,{...e,title:Rt().Z.formatMessage(Et.dismissItem)}),action:()=>{(0,Tt().j)({environment:t,event:{eventName:"block_paste_menu_action",eventProperties:{type:e.type,action:"dismiss"}}}),xt().xv(t)}},...o.map((e=>{let{name:t,action:n}=e;return{key:`embed ${t}`,render:e=>(0,A.jsx)(Ht().Z,{...e,title:t}),action:n}}))]}]}(n,e):void(0,ge().t1)(n):null}),[e,t]);if(null===i)return null;let a;return a=n.isMobile?{menuType:S().o.ActionSheet}:{menuType:S().o.Popup,width:320,maxHeight:"40vh"},(0,A.jsx)(x().Z,{...a,className:Pt().srZ,children:(0,A.jsx)(Vt().Z,{type:Vt().i.Vertical,sections:i,initialFocus:0})})}var zt=()=>n(516623),Wt=()=>n(291198),qt=()=>n(67961);const Gt=function(){const e=(0,o().O7)(),{device:t}=e,{active:n,stringValue:i}=(0,s().VK)((()=>{const{active:e,stringValue:t}=zt().default.state;return{active:e,stringValue:t}}),[]),a=window.innerWidth/2-150,r=window.innerHeight/2,l=t.isMobileNative?(0,A.jsx)(F()._H,{defaultMessage:"Tap to copy the link above",id:"clipboardInputRenderer.copyLink.mobile_message"}):(0,A.jsx)(F()._H,{defaultMessage:"Right click and copy the link above",id:"clipboardInputRenderer.copyLink.message"});return(0,A.jsx)(b().ZP,{popupType:t.isMobileNative?w().k.SlideUp:w().k.Popup,open:n,originRect:{top:r,left:a},onDismiss:Yt,placementToOrigin:C().Placement.Bottom,alignmentToOrigin:C().Alignment.Start,originGap:0,render:()=>(0,A.jsx)(nt().Z,{debugName:"ClipboardInputRenderer",capture:!0,onEnter:f().yR,onCommandEnter:f().yR,onCommandShiftEnter:f().yR,onCommandSlash:f().yR,onDelete:f().yR,onBackspace:f().yR,onEsc:f().yR,onLeft:f().yR,onRight:f().yR,onUntab:f().yR,onTab:f().yR,onSelectAll:f().yR,onRedo:f().yR,onUndo:f().yR,onToggleBold:f().yR,onToggleItalics:f().yR,onToggleStrike:f().yR,onToggleCode:f().yR,onCut:f().yR,onCopy:f().yR,onPaste:f().yR,onKeypress:f().yR,children:(0,A.jsxs)("div",{style:{padding:8,width:300},children:[(0,A.jsx)(Wt().Z,{style:{width:"100%",fontSize:12},value:i,focus:!0,textarea:!0,selectAll:!0,readOnly:!0}),(0,A.jsx)(qt().Z,{isSmall:!0,style:{marginTop:6,pointerEvents:"none"},children:l})]})})})};function Yt(){zt().default.setState({...zt().default.state,active:!1,stringValue:""})}var $t=()=>n(884494),Xt=()=>n(441275),Qt=()=>n(393974),Jt=()=>n(543631),en=()=>n(467806);const tn=function(){const e=(0,o().O7)(),{currentSpaceStore:t}=(0,s().VK)((()=>({currentSpaceStore:J().default.state.currentSpaceStore})),[]);return(0,i.useEffect)((()=>{if(!t)return;const i=$().ZP.addListener((0,E().Cm)(t.id),(async(i,o)=>{if(!en().Z.shouldRefetch({currentSpaceId:t.id,emitValue:o}))return;const s=await z().callApi({eventName:"getAllSpacePermissionGroupsWithMemberCount",environment:e,data:{spaceId:t.id},headers:(0,me().Bb)({cellId:void 0,spaceId:t.id})});if("failed"===s.type)return yt().rateLimitedLog({from:"CurrentSpacePermissionGroupsListener",level:"error",type:"getAllCurrentSpacePermissionGroupsFailed"}),[];en().Z.setState({permissionGroupsAndMemberCounts:s.data.groupsWithMemberCount.map((e=>({group:n(530980).kk5.fromValue("space_permission_group",e.group),memberCount:e.memberCount}))),lastEmitData:{spaceId:t.id,value:o}})}),void 0,e);return function(){i&&$().ZP.removeListener(i,e)}}),[t,e]),null};n(122556),n(582845),n(250570),n(533019),n(721473),n(788208),n(22624);var nn=()=>n(619779);const on=function(){const e=(0,o().O7)(),{currentSpaceStore:t,currentUserStore:n}=(0,s().Kw)(J().default),a=null==n?void 0:n.id;return(0,i.useEffect)((()=>{if(!t||!a)return;const n=$().ZP.addListener((0,E().eJ)({spaceId:t.id,userId:a}),(async(n,i)=>{if(!nn().Z.shouldRefetch({currentSpaceId:t.id,currentUserId:a,emitValue:i}))return;const o=await z().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:e,data:{spaceId:t.id,userIds:[a]},headers:(0,me().Bb)({cellId:void 0,spaceId:t.id})});if("failed"===o.type)return yt().rateLimitedLog({from:"CurrentUserSpaceGroupMembershipListener",level:"error",type:"getSpacePermissionGroupIdsContainingMembers"}),[];nn().Z.setState({spacePermissionGroupIds:new Set(o.data.userToGroupMap[a]||[]),lastEmitData:{spaceId:t.id,userId:a,value:i}})}),void 0,e);return function(){n&&$().ZP.removeListener(n,e)}}),[t,a,e]),null};var sn=()=>n(143346),an=()=>n(263168),rn=()=>n(180099);function ln(e){const{environment:t,pointers:n,userIdToCloneFrom:i}=e;for(const o of n)sn().Wl({environment:t,inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,pointer:o,model:t.defaultRecordCache.inMemoryRecordCache.getRecordModel({pointer:o,userId:i}),role:"reader",updatePaths:[[]],debugSource:"CustomEmojisListener"})}const dn=new(n(783540).G)((()=>0));const cn=function(){const e=(0,o().O7)(),[t,a]=(0,i.useState)(!1);(0,i.useEffect)((()=>{!async function(){await n(512258).waitForInitialPageRenderToComplete(),a(!0)}()}),[]);const r=(0,s().VK)((()=>{var e;return null===(e=(0,n(606757).Jy)())||void 0===e?void 0:e.id}),[]),l=e.currentUser.id,d=(0,s().VK)((()=>{const e=rn().Z.getKeys();return r&&l?e.includes(r)?e:[...e,r]:e}),[r,l]);return function(e,t){const n=(0,o().O7)();(0,i.useEffect)((()=>{const i=dn.get(e)+1;dn.set(e,i);const o=()=>{};Object.defineProperty(o,"name",{configurable:!0,enumerable:!1,value:`useRetainRecordsInMemory(${e} ${i})`});for(const e of t)n.defaultRecordCache.inMemoryRecordCache.addListenerToRecord(e,o),an().cancelEviction({pointer:e,userId:n.currentUser.id});return()=>{for(const e of t)n.defaultRecordCache.inMemoryRecordCache.removeListenerToRecord(e,o),an().unsubscribeAfterDelay({environment:n,pointer:e,userId:n.currentUser.id})}}),[e,n,t])}("CustomEmojis",(0,s().VK)((()=>{if(!t)return[];const n=[];for(const t of d){const i=rn().Z.getDataWithoutRefetch(e,{spaceId:t});if(!i)continue;const o=i.pointers,s=i.lastFetchedBy;t===r&&s!==l&&ln({environment:e,pointers:o,userIdToCloneFrom:s}),n.push(...o)}return n}),[d,r,l,e,t])),function(e){const t=(0,o().O7)();(0,i.useEffect)((()=>{const n=[];for(const i of e){const e=$().ZP.addListener((0,E().h8)(i),((e,t)=>{rn().Z.emit({spaceId:i},t)}),void 0,t);e&&n.push(e)}return()=>{for(const e of n)$().ZP.removeListener(e,t)}}),[t,e])}(d),null};var un=()=>n(803021),pn=()=>n(349220),mn=()=>n(531149),gn=()=>n(970105),fn=()=>n(170722);const hn=function(){const e=(0,o().O7)(),{device:t}=e,n=(0,s().Kw)(fn().Z);return(0,A.jsx)(b().ZP,{popupType:t.isMobile?w().k.SlideUp:w().k.Popup,open:n.open,originRect:n.originRect,onDismiss:mn().x,render:()=>(0,A.jsx)(yn,{shouldShowReminder:!!n.open&&n.allowReminders})})};function yn(e){let{shouldShowReminder:t}=e;const n=(0,o().O7)(),i=(0,s().VK)((()=>vn()),[]);if(!i)return null;const a="default",{date_format:r,time_format:l,dateValue:c}=i;return(0,A.jsx)(d().ev,{dependency:p().Di,children:e=>{let{DatePropertyMenu:i}=e;return(0,A.jsx)(i,{firstDayOfWeek:It().AK.state,value:c,canConfigureCollection:!0,onChangeValue:e=>function(e,t,n){if(!e)return void function(e,t){const n=vn();if(!n)return;const{textStore:i,textValue:o,tokenIndex:s}=n,a=g().VrM(o.slice(0,s)),r=g().VrM(o.slice(0,s+1));v().createAndCommit({userAction:"DateMentionMenu.removeDateAnnotation",environment:e,canUndo:!0,perform:t=>{gn().pe({environment:e,store:i,selection:{startIndex:a,endIndex:r},transaction:t})}})}(t);if(!un().U3(e))return;const i=vn();if(!i)return;const{date_format:o,time_format:s}=i;xn({date_format:o,time_format:s,...e},t,n)}(e,n,a),dateFormat:r,onChangeDateFormat:e=>function(e,t,n){const i=vn();if(!i)return;const{dateValue:o,time_format:s}=i;xn({date_format:e,time_format:s,...o},t,n)}(e,n,a),timeFormat:l,onChangeTimeFormat:e=>function(e,t,n){const i=vn();if(!i)return;const{dateValue:o,date_format:s}=i;xn({date_format:s,time_format:e,...o},t,n)}(e,n,a),onDismiss:mn().x,disabled:!1,shouldShowReminder:t,isTemplatePage:!1})}})}function vn(){const e=fn().Z.state;if(e.open){const{textStore:t,tokenIndex:n}=e,i=t.getValue();if(i){const e=i[n];if(e){(0,pn().T)(g().km_(e),"Token should be a mention token");const o=g().hDy(e),s=g().K9C(o);if(s){const{date_format:a,time_format:r,...l}=g().zyO(s);return{textStore:t,textValue:i,tokenIndex:n,token:e,annotations:o,date_format:a,time_format:r,dateValue:l}}}}}}function xn(e,t,n){const i=vn();if(!i)return;const{textStore:o,textValue:s,tokenIndex:a,token:r,annotations:l}=i,d=l.map((t=>g().fpG(t)?["d",e]:t)),c=g().V3y(r[0],d),u=g().VrM(s.slice(0,a)),p=g().VrM(s.slice(0,a+1));v().createAndCommit({userAction:"DateMentionMenu.setDateAnnotationData",environment:t,canUndo:!0,perform:e=>{gn().pe({environment:t,store:o,selection:{startIndex:u,endIndex:p},transaction:e}),gn().mM({environment:t,store:o,tokens:[c],index:u,transaction:e})}})}n(228244);var bn=()=>n(903680),Sn=()=>n(455530),Mn=()=>n(572680),jn=()=>n(396136),Cn=()=>n(326966),wn=()=>n(351972),kn=()=>n(295703),_n=()=>n(887274),Tn=()=>n(239482),In=()=>n(656769),Pn=()=>n(308939),An=()=>n(666414),Rn=()=>n(312578),Zn=()=>n(663631);const Bn=(0,F().vU)({image:{defaultMessage:"Embed image",id:"embedMenu.action.image"},video:{defaultMessage:"Embed video",id:"embedMenu.action.video"},tweet:{defaultMessage:"Embed Tweet",id:"embedMenu.action.tweet"},drive:{defaultMessage:"Embed Google Drive",id:"embedMenu.action.drive"},gist:{defaultMessage:"Embed GitHub Gist",id:"embedMenu.action.gist"},figma:{defaultMessage:"Embed Figma",id:"embedMenu.action.figma"},invision:{defaultMessage:"Embed Invision project",id:"embedMenu.action.invision"},abstract:{defaultMessage:"Embed Abstract project",id:"embedMenu.action.abstract"},framer:{defaultMessage:"Embed Framer prototype",id:"embedMenu.action.framer"},whimsical:{defaultMessage:"Embed Whimsical board",id:"embedMenu.action.whimsical"},mixpanel:{defaultMessage:"Embed Mixpanel project",id:"embedMenu.action.mixpanel"},sketch:{defaultMessage:"Embed Sketch document",id:"embedMenu.action.sketch"},excalidraw:{defaultMessage:"Embed Excalidraw",id:"embedMenu.action.excalidraw"},replit:{defaultMessage:"Embed a repl",id:"embedMenu.action.replit"},miro:{defaultMessage:"Embed Miro board",id:"embedMenu.action.miro"},audio:{defaultMessage:"Embed audio",id:"embedMenu.action.audio"},maps:{defaultMessage:"Embed Google Maps",id:"embedMenu.action.maps"},loom:{defaultMessage:"Embed Loom",id:"embedMenu.action.loom"},typeform:{defaultMessage:"Embed Typeform",id:"embedMenu.action.typeform"},codepen:{defaultMessage:"Embed CodePen",id:"embedMenu.action.codepen"},pdf:{defaultMessage:"Embed PDF",id:"embedMenu.action.pdf"},embed:{defaultMessage:"Embed",id:"embedMenu.action.createEmbed"},hex:{defaultMessage:"Embed Hex",id:"embedMenu.action.hex"},deepnote:{defaultMessage:"Embed Deepnote",id:"embedMenu.action.deepnote"},drawing:{defaultMessage:"Embed a drawing",id:"embedMenu.action.drawing"}}),Dn=(0,F().vU)({mentionPage:{defaultMessage:"Mention",id:"embedMenu.actions.mentionPage.title"},mentionBlock:{defaultMessage:"Mention",id:"embedMenu.actions.mentionBlock.title"},createLinkedDatabase:{defaultMessage:"Create linked database",id:"embedMenu.actions.createLinkedDatabase.title"},createLinkedViewOfDatabase:{defaultMessage:"Linked database view",id:"embedMenu.actions.createLinkedViewOfDatabase.title"},bookmarkMenuItem:{defaultMessage:"Bookmark",id:"embedMenu.actions.createBookmark.title"},newBookmarkMenuItem:{defaultMessage:"Preview",id:"embedMenu.actions.createNewBookmark.title"},createTransclusionItem:{defaultMessage:"Synced block",id:"embedMenu.actions.createTransclusion.title"},dismissItem:{defaultMessage:"URL",id:"embedMenu.actions.dismiss.title"},linkMention:{defaultMessage:"Mention",id:"embedMenu.actions.linkMention.title"},pagePreview:{defaultMessage:"Preview",id:"embedMenu.actions.pagePreview.title"},embed:{defaultMessage:"Embed",id:"embedMenu.actions.embed.title"}}),Ln={image:Rt().Z.formatMessage(Bn.image),video:Rt().Z.formatMessage(Bn.video),tweet:Rt().Z.formatMessage(Bn.tweet),drive:Rt().Z.formatMessage(Bn.drive),gist:Rt().Z.formatMessage(Bn.gist),figma:Rt().Z.formatMessage(Bn.figma),invision:Rt().Z.formatMessage(Bn.invision),abstract:Rt().Z.formatMessage(Bn.abstract),framer:Rt().Z.formatMessage(Bn.framer),whimsical:Rt().Z.formatMessage(Bn.whimsical),mixpanel:Rt().Z.formatMessage(Bn.mixpanel),miro:Rt().Z.formatMessage(Bn.miro),sketch:Rt().Z.formatMessage(Bn.sketch),excalidraw:Rt().Z.formatMessage(Bn.excalidraw),replit:Rt().Z.formatMessage(Bn.replit),audio:Rt().Z.formatMessage(Bn.audio),maps:Rt().Z.formatMessage(Bn.maps),loom:Rt().Z.formatMessage(Bn.loom),typeform:Rt().Z.formatMessage(Bn.typeform),codepen:Rt().Z.formatMessage(Bn.codepen),pdf:Rt().Z.formatMessage(Bn.pdf),embed:Rt().Z.formatMessage(Bn.embed),hex:Rt().Z.formatMessage(Bn.hex),deepnote:Rt().Z.formatMessage(Bn.deepnote),drawing:Rt().Z.formatMessage(Bn.drawing)};const On=function(){const e=(0,o().O7)(),t=(0,o().Fy)(),n=(0,s().Kw)(In().Z);return(0,A.jsx)(b().ZP,{popupType:t.isMobileNative&&!t.isTablet?w().k.SlideUp:w().k.Popup,open:n.open,originRect:n.open?n.selectionRect:void 0,placementToOrigin:C().Placement.Bottom,alignmentToOrigin:C().Alignment.Start,originGap:4,disableMouseCapture:!0,disableContentScroll:!0,disableDarkOverlayBackground:t.isMobile,keepFocus:t.isMobile,render:()=>n.loading?(0,A.jsx)(Rn().Z,{}):(0,A.jsx)(Kn,{}),onDismiss:()=>Hn(e)})};function Hn(e){const t=In().Z.state;if(!t.open)return;const{url:n}=t;wn().X0(e,{url:n,type:"close"}),kn().xv()}function Vn(e,t){const n=In().Z.state;if(!n.open)return;const{url:i}=n;kn().RL({environment:t,type:e}),"form"!==e&&wn().X0(t,{url:i,type:e})}function Un(e,t){const{device:n}=t,{url:i,textStore:o}=e,{currentSpaceStore:s}=J().default.state,a=[],r=(0,Mn().parseRoute)({url:i,baseUrl:q().default.domainBaseUrl,publicDomainName:q().default.publicDomainName,isMobile:n.isMobile,protocol:q().default.protocol,currentUrl:window.location.href}),l=["youtube.com","youtu.be","instagram.com","twitter.com","x.com","facebook.com","linkedin.com","pinterest.com","tiktok.com","spotify.com","maps.google.com","drive.google.com","docs.google.com","slides.google.com","sheets.google.com","forms.google.com","indify.co","open.spotify.com","music.youtube.com","figma.com","amazon","wikipedia.org","medium.com","naver.com","canva.com","miro.com","reddit.com","calendly.com","forms.gle"],d=o.getRecordStoreUIParent(),c="page"===r.name?r.blockId:"team"===r.name?r.peekViewBlockId:void 0,u="page"===r.name&&r.scrollToBlockId,p="page"===r.name?r.collectionViewId:void 0;if(c){const e=te().G.createChildStore(o,{table:jn().iU,id:c});e.isType("form")&&a.push({name:Rt().Z.formatMessage(Dn.embed),validator:()=>!kn().f_(o)&&Fn(d)&&(null==s?void 0:s.id)===e.getSpaceId(),type:$e().Ti.form});const t=u?te().G.createChildStore(o,{table:jn().iU,id:u}):void 0;a.push({name:Rt().Z.formatMessage(Dn.createLinkedViewOfDatabase),validator:()=>!t&&e.isCollectionView()&&!kn().f_(o)&&(!e.isCollectionViewPageWithContent()||!function(e,t){const n=e.getCollectionViewStores(),i=f().sE(n,(e=>e.id===t&&"page"===e.getType()));return Boolean(i)}(e,p))&&!function(e,t){const n=e.getCollectionViewStores(),i=f().sE(n,(e=>e.id===t&&"form_editor"===e.getType()));return Boolean(i)}(e,p)&&(null==s?void 0:s.id)===e.getSpaceId()&&Fn(d)&&Nn(e),type:$e().Ti.collectionView}),a.push({name:Rt().Z.formatMessage(void 0===t?Dn.mentionPage:Dn.mentionBlock),validator:()=>Nn(e),type:"mention-page"}),a.push({name:Rt().Z.formatMessage(Dn.createTransclusionItem),validator:()=>Boolean(t&&!t.isNavigableBlock()&&!kn().f_(o)&&!t.isNonEditableState()&&!t.isNavigableAncestorNonEditableState()&&t.canEdit()&&t.getSpaceId()===(null==s?void 0:s.id)&&Fn(d)&&Nn(e)),type:"create-transclusion"}),ee().default.checkGate({gateName:"enable_page_previews"})&&a.push({name:Rt().Z.formatMessage(Dn.pagePreview),validator:()=>!t&&!e.isCollectionView()&&!kn().f_(o)&&Nn(e)&&Fn(d)&&!e.isType("form"),type:"page-preview"})}const m=Cn().XP(Ln);for(const f of m)"embed"!==f&&a.push({name:Ln[f],validator:e=>Sn().Wb[f](e)&&Fn(d),type:f});a.push({name:Rt().Z.formatMessage(Dn.bookmarkMenuItem),validator:e=>!kn().f_(o)&&Fn(d)&&Sn().Cm(e),type:$e().Ti.bookmark}),a.push({name:Ln.embed,validator:e=>!kn().f_(o)&&Fn(d)&&Sn().Wb.embed(e),type:"embed"});const g=f().oA(a.map((e=>{let{name:n,validator:o,type:s}=e;if(o({url:i,baseUrl:q().default.domainBaseUrl,publicDomainName:q().default.publicDomainName})){return{key:`embed ${n}`,render:e=>(0,A.jsx)(Ht().Z,{...e,title:n}),action:()=>Vn(s,t)}}}))),h={key:"link-mention",render:e=>(0,A.jsx)(Ht().Z,{...e,title:Rt().Z.formatMessage(Dn.linkMention),right:(0,A.jsx)(Zn().Z,{})}),action:()=>Vn("link-mention",t)},y={key:"dismiss",render:e=>(0,A.jsx)(Ht().Z,{...e,title:Rt().Z.formatMessage(Dn.dismissItem)}),action:()=>Hn(t)};if(0===g.length)return[];(0,Mn().iJ)(r)?g.push(y):(En(i,l)?("embed Create bookmark"!==g[0].key||g.reverse(),g.push(y)):g.unshift(y),ee().default.checkGate({gateName:"enable_link_mentions"})&&g.splice(0,0,h));const v={key:"embed section",render:e=>(0,A.jsx)(Ut().Z,{...e}),items:g},x={key:"import section",render:e=>(0,A.jsx)(Ut().Z,{...e,style:{paddingTop:0,paddingBottom:6}}),items:[{key:"jira-sync",render:e=>(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(An().Z,{size:4}),(0,A.jsx)(Ht().Z,{...e,title:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(F()._H,{id:"embedMenu.actions.import.jiraTitle",defaultMessage:"Sync Jira projects and issues"}),(0,A.jsx)(Zn().Z,{style:{display:"inline"}})]})})]}),action:()=>function(e){var t,n;const i=In().Z.state;if(!i.open)return;const{url:o}=i,s=J().default.state.mainEditorCurrentBlockStore,a=s&&(null===(t=(0,Tn().VP)(s))||void 0===t?void 0:t.id),r=null===(n=o.match(/\/projects\/(\w+)\//))||void 0===n?void 0:n[1];Pn().ZP.setState({...Pn().ZP.state,teamSpaceId:a,projectKeys:r?[r]:[]}),_n().jW({environment:e,from:"external_object_instance_block",action:"show_teamspaces"}),(0,Tt().j)({environment:e,event:{eventName:"external_sync_entry_point",eventProperties:{integration:"jira",flowId:Pn().ZP.createNewFlowId(),from:"link_paste_menu"}}}),kn().xv(),wn().X0(e,{url:o,type:"jira-sync"})}(t)}]};return En(i,["atlassian.net/jira","/jira/"])?[v,x]:[v]}function En(e,t){return t.some((t=>e.includes(t)))}function Nn(e){const t=e.getSystemBlockTypeStore().getValue();return!(0,bn().bv)(t)}function Fn(e){if(!(e instanceof te().G))return!1;const t=e.getType();return!!t&&(0,$e().Um)(t,e.getFormat())}function Kn(){const e=(0,o().O7)(),{device:t}=e,n=(0,s().VK)((()=>{const t=In().Z.state;return t.open?Un(t,e):null}),[e]),a=(0,s().VK)((()=>!!In().Z.state.loading),[]),r=(null==n?void 0:n.length)??0;(0,i.useEffect)((()=>{a||0!==r||kn().xv()}),[r,a]),function(){const e=(0,s().Kw)(In().Z),t=(0,s().Kw)(_().default);(0,i.useEffect)((()=>{if(e.open&&"editing"===t.mode){const{multiSelection:n}=t;(0,M().qS)(n)&&n.start.store.id===e.textStore.id&&n.end.index===e.urlSelection.endIndex||kn().xv()}}),[e,t])}();const l=(0,Ie().yK)((e=>({header:t.isMobile?{display:"flex",justifyContent:"center",alignItems:"center",fontSize:16,fontWeight:Pe().Ue.semibold,background:e.surface.wash,height:45}:{paddingLeft:16,paddingRight:16,paddingTop:10,color:e.text.secondary,fontSize:Pe().JB.UISmall.desktop,fontWeight:450,fontStyle:"normal",font:"SF Pro"}})),[t]);if(null===n)return null;let d;return d=t.isMobile?{menuType:S().o.ActionSheet}:{menuType:S().o.Popup,width:n.some((e=>"import section"===e.key))?260:200,maxHeight:"40vh"},(0,A.jsx)(A.Fragment,{children:a?(0,A.jsx)(Rn().Z,{style:{marginLeft:3,marginRight:3}}):(0,A.jsx)(x().Z,{...d,className:Pt().srZ,header:(0,A.jsx)(qt().Z,{style:l.header,isSmall:!t.isMobile,isSecondaryColor:!t.isMobile,children:(0,A.jsx)(F()._H,{id:"embedMenu.header",defaultMessage:"Paste as"})}),children:(0,A.jsx)(Vt().Z,{type:Vt().i.Vertical,sections:n,initialFocus:0})})})}var zn=()=>n(423402),Wn=()=>n(546438);function qn(){const e=(0,o().O7)(),t=e.currentUser.id,n=(0,s().VK)((()=>{var e;return null===(e=J().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),a=(0,s().VK)((()=>(0,Wn().W)({isPhone:e.device.isPhone,spaceStore:J().default.state.currentSpaceStore})),[e.device]);return(0,i.useEffect)((()=>{if(!n||!t||!a)return;const i=$().ZP.addListener((0,E().iX)({notionUserId:t,spaceId:n}),(0,$().Qk)(((t,n,i,o)=>{-1!==o&&Gn(e)})),void 0,e);return function(){i&&$().ZP.removeListener(i,e)}}),[e,t,n,a]),null}const Gn=(0,f().Ds)((e=>{zn().pJ({environment:e})}),5e3,{leading:!0,trailing:!0});var Yn=()=>n(492788),$n=()=>n(225339),Xn=()=>n(602299),Qn=()=>n(492522),Jn=()=>n(568017),ei=()=>n(491927),ti=()=>n(64880),ni=()=>n(611253),ii=()=>n(453999),oi=()=>n(879952),si=()=>n(84080),ai=()=>n(688798),ri=()=>n(522919),li=()=>n(827282);const di=(0,li().IU)("collapse",{viewBox:"0 0 16 16",svg:(0,A.jsx)("path",{d:"M2.477 7.51h3.787c.396 0 .701-.106.916-.32.214-.22.321-.525.321-.917V2.534a.723.723 0 00-.745-.745.731.731 0 00-.54.212.736.736 0 00-.205.533v.486l.15 2.146-1.6-1.682-1.968-1.982a.695.695 0 00-.52-.219.791.791 0 00-.574.219.736.736 0 00-.219.554.78.78 0 00.055.294.917.917 0 00.17.253L3.482 4.57l1.675 1.593-2.153-.143h-.526a.723.723 0 00-.746.745.723.723 0 00.746.745zm6.74 6.912a.71.71 0 00.526-.212.7.7 0 00.212-.526v-.554l-.143-2.14 1.6 1.682 2.002 2.016a.69.69 0 00.526.22c.224 0 .41-.074.561-.22a.725.725 0 00.226-.553.707.707 0 00-.062-.294.728.728 0 00-.164-.246l-2.01-2.017-1.688-1.586 2.16.144h.588a.736.736 0 00.533-.205.711.711 0 00.219-.534.72.72 0 00-.219-.54.723.723 0 00-.533-.211H9.702c-.392 0-.697.109-.916.328-.214.214-.321.517-.321.909v3.8a.7.7 0 00.212.527.746.746 0 00.54.212z"})});var ci=()=>n(884399),ui=()=>n(448045),pi=()=>n(521777),mi=()=>n(472753),gi=()=>n(255313),fi=()=>n(628370),hi=()=>n(748621),yi=()=>n(92175);const vi={background:"rgba(255, 255, 255, 0.055)"},xi={padding:"6px 10px 6px 6px"},bi={padding:"6px 6px 6px 10px"},Si={display:"flex",borderRadius:4,background:Jn().ZP.blackWithAlpha(.65)},Mi=.5,ji=.5,Ci=2,wi=-.002,ki=-.004;function _i(e){let{visible:t,isOpen:n,zoomScale:i,handleZoomIn:a,handleZoomOut:r,handleNext:l,handlePrevious:d,setZoomScale:c,disableZoomEditing:u,enableZoomEditing:p,resetHideControlsTimeout:m,clearHideControlsTimeout:f,isSaving:h,isEditingZoom:y,handleClose:v}=e;const x=(0,o().Fy)(),b=(0,o().O7)(),{blockStore:S,imageUrl:M}=(0,s().VK)((()=>({blockStore:gi().default.state.blockStore,imageUrl:gi().default.state.imageUrl})),[]),j=(0,s().VK)((()=>{var e;return Boolean(S&&(M||(null===(e=S.getProperties())||void 0===e?void 0:e.source)&&g().QaF(S.getProperties().source)))}),[S,M]);if(x.isMobile)return null;return(0,A.jsxs)(fi().Z,{visible:t,initial:{opacity:1},exit:{opacity:0},animate:{opacity:1},style:Li(n),onClick:e=>{!function(e){e.stopPropagation()}(e),m(),u()},children:[(0,A.jsx)("div",{style:{...Si,marginRight:10},children:(0,A.jsx)(Ii,{handlePrevious:d,handleNext:l})}),(0,A.jsxs)("div",{style:Si,children:[(0,A.jsx)(Ti,{zoomScale:i,handleZoomIn:a,handleZoomOut:r,setZoomScale:c,disableZoomEditing:u,enableZoomEditing:p,isEditingZoom:y}),(0,A.jsx)(Ni,{}),j?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(Pi,{onClick:()=>{if(!S||!j)return;gi().default.setState({...gi().default.state,isSaving:!0}),f();const e=null==S?void 0:S.getProperties();let t,n;if(t=M||g().QaF(null==e?void 0:e.source),t){if((0,$n().iS)(t)){const i=g().QaF(null==e?void 0:e.title)||(0,$n().w2)(t);n=ti().ji(b,{url:t,download:!0,downloadName:i,permissionRecord:S.pointer})}else{const i=g().QaF(null==e?void 0:e.caption);n=(0,$n()._H)(t,null==S?void 0:S.pointer,q().default.domainBaseUrl,b.currentUser.id,i)}n.then((()=>{gi().default.setState({...gi().default.state,isSaving:!1}),ei().Lf(b,{type:"download",triggered_by:"click"}),m()}))}},loading:h}),(0,A.jsx)(Ni,{})]}):void 0,(0,A.jsx)(Ai,{onClick:v})]})]})}function Ti(e){let{zoomScale:t,handleZoomIn:n,handleZoomOut:s,setZoomScale:a,disableZoomEditing:r,enableZoomEditing:l,isEditingZoom:d}=e;const c=(100*t).toFixed(0),u=(0,o().O7)(),p=(0,i.useCallback)((e=>{const t=e.target,n=parseInt(t.value);if(!isNaN(n)){const e=n/100;ei().Lf(u,{type:"set_zoom",new_zoom:e}),a(e)}r()}),[r,u,a]);return(0,A.jsxs)("div",{style:{alignItems:"center",display:"flex",height:"100%",justifySelf:"flex-start"},children:[(0,A.jsx)(Ue().Z,{renderTooltip:()=>(0,A.jsx)(Ei,{primaryText:(0,A.jsx)(F()._H,{id:"fullScreenRenderer.zoomOut",defaultMessage:"Zoom out"}),secondaryText:"-"}),disableTooltip:t<=ji,render:e=>(0,A.jsx)(yi().Z,{...e,disabled:t<=ji,style:{...Vi(t<=ji),...bi},onClick:s,icon:e=>(0,ui().$)({...e,fill:Oi(),height:16,margin:0,width:16})})}),d?(0,A.jsx)(Ri,{initialValue:c,onSubmit:p,onCancel:r,primaryColor:Oi(),secondaryColor:Hi()}):(0,A.jsx)(yi().Z,{onClick:e=>{e.stopPropagation(),l()},style:{color:Hi(),margin:0,width:46,padding:0,justifyContent:"center"},children:`${c}%`}),(0,A.jsx)(Ue().Z,{renderTooltip:()=>(0,A.jsx)(Ei,{primaryText:(0,A.jsx)(F()._H,{id:"fullScreenRenderer.zoomIn",defaultMessage:"Zoom in"}),secondaryText:"+"}),disableTooltip:t>=Ci,render:e=>(0,A.jsx)(yi().Z,{...e,disabled:t>=Ci,style:Vi(t>=Ci),onClick:n,icon:e=>(0,pi().R)({...e,fill:Oi(),height:16,margin:0,width:16})})})]})}function Ii(e){let{handlePrevious:t,handleNext:n}=e;const i=(0,A.jsx)("div",{}),{blockStore:o,allImageBlocksOnPage:a}=(0,s().VK)((()=>{const{blockStore:e}=gi().default.state;return{blockStore:e,allImageBlocksOnPage:e?Bi():[]}}),[]);if(!o)return i;if(a.length<=1)return i;const r=a.findIndex((e=>e.id===(null==o?void 0:o.id)))??-1;if(-1===r)return i;const l=a.length;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(Ue().Z,{renderTooltip:()=>(0,A.jsx)(Ei,{primaryText:(0,A.jsx)(F()._H,{id:"fullScreenRenderer.previous",defaultMessage:"Back"}),secondaryText:(0,A.jsx)(Ui,{imageIndex:r-1,totalImageCount:l})}),disableTooltip:0===r,render:e=>(0,A.jsx)(yi().Z,{...e,disabled:r<=0,style:{...Vi(r<=0),...bi},hoveredStyle:vi,onClick:()=>t(),icon:e=>(0,ai().V)({...e,fill:Oi(),height:16,margin:0,width:16})})}),(0,A.jsx)(Ue().Z,{renderTooltip:()=>(0,A.jsx)(Ei,{primaryText:(0,A.jsx)(F()._H,{id:"fullScreenRenderer.next",defaultMessage:"Next"}),secondaryText:(0,A.jsx)(Ui,{imageIndex:r+1,totalImageCount:l})}),disableTooltip:r+1===l,render:e=>(0,A.jsx)(yi().Z,{...e,disabled:r>=l-1,style:{...Vi(r>=l-1),...xi},hoveredStyle:vi,onClick:()=>n(),icon:e=>(0,ri().n)({...e,fill:Oi(),height:16,margin:0,width:16})})})]})}function Pi(e){let{onClick:t,loading:n}=e;return(0,A.jsx)(Ue().Z,{renderTooltip:()=>(0,A.jsx)(Ei,{primaryText:(0,A.jsx)(F()._H,{id:"fullScreenRenderer.download",defaultMessage:"Download"})}),render:e=>(0,A.jsx)(yi().Z,{...e,disabled:n,onClick:t,style:Vi(!1),hoveredStyle:vi,children:n?(0,A.jsx)(Rn().Z,{style:{width:16}}):(0,ci().a)({fill:Oi(),width:16})})})}function Ai(e){let{onClick:t}=e;return(0,A.jsx)(Ue().Z,{renderTooltip:()=>(0,A.jsx)(Ei,{primaryText:(0,A.jsx)(F()._H,{defaultMessage:"Close",id:"fullscreenRenderer.closeButton.label"}),secondaryText:"esc"}),render:e=>(0,A.jsx)(yi().Z,{...e,onClick:t,style:{...Vi(!1),...xi},hoveredStyle:vi,icon:e=>di({...e,fill:Oi(),height:16,margin:0,width:16})})})}function Ri(e){const[t,n]=(0,i.useState)(e.initialValue);return(0,A.jsx)(Wt().Z,{style:{width:46,color:e.primaryColor},inputStyle:{textAlign:"center",border:"solid 1px rgba(45, 156, 219, 0.72)",borderRadius:4,boxShadow:"0px 0px 0px 3px rgba(45, 156, 219, 0.2)"},onClick:e=>e.stopPropagation(),onChange:e=>{const t=e.target;n(t.value)},value:t,onSubmit:e.onSubmit,focusInitial:!0,selectAll:!0,format:Wt().B.Transparent,right:(0,A.jsx)("span",{style:{color:e.secondaryColor},children:"%"}),onKeyDown:t=>{t.stopPropagation(),"Escape"===t.key?e.onCancel():"Tab"===t.key&&e.onSubmit(t)}})}const Zi=function(){const e=(0,o().O7)(),t=(0,i.useRef)(!1),a=(0,i.useRef)(),r=(0,i.useRef)(),[l,d]=(0,i.useState)(!1),[c,u]=(0,i.useState)(void 0),[p,m]=(0,i.useState)(!1),{isOpen:g,rendered:h,fullScreenNodeRect:y,fullscreenNodeAnimationComplete:v,contentAspectRatio:x,zoomScale:b,panOffset:S,skipAnimations:M,isSaving:j,blockStore:C,panStartPosition:w}=(0,s().VK)((()=>{var e;const{state:t}=gi().default;return{isOpen:t.isOpen,rendered:null===(e=t.renderFullScreenNode)||void 0===e?void 0:e.call(t),fullScreenNodeRect:t.fullScreenNodeRect,fullscreenNodeAnimationComplete:t.fullscreenNodeAnimationComplete,contentAspectRatio:t.contentAspectRatio,zoomScale:t.zoomScale,panOffset:t.panOffset,skipAnimations:t.skipAnimations,isSaving:Boolean(t.isSaving),blockStore:t.blockStore,panStartPosition:t.panStartPosition}}),[]),k=(0,s().VK)((()=>{const t=e.WindowSizeStore.state.width;return ni().zp(t)}),[e.WindowSizeStore]);(0,n(36296).Z)({capture:g,preventType:et().Z.All});const _=(0,i.useCallback)((()=>{a.current&&clearTimeout(a.current)}),[]),T=(0,i.useCallback)((()=>{m(!0),_(),l||j||(a.current=setTimeout((()=>m(!1)),2e3))}),[_,l,j]),I=(0,i.useCallback)((e=>{T();const t=Math.max(Math.min(e,Ci),ji),n=t<=1?{x:0,y:0}:S;gi().default.setState({...gi().default.state,zoomScale:t,panOffset:n})}),[S,T]),P=(0,i.useCallback)((e=>{const t=Wi(e,c);t&&(e.x!==t.x&&(w.x=w.x+(e.x-t.x)),e.y!==t.y&&(w.y=w.y+(e.y-t.y)),gi().default.setState({...gi().default.state,panOffset:t,panStartPosition:w}))}),[c,w]),R=(0,i.useCallback)((()=>{d(!1),gi().default.setState({...gi().default.state,zoomScale:1,panStartPosition:{x:0,y:0},panOffset:{x:0,y:0}})}),[]),Z=(0,i.useCallback)((()=>{d(!0),_()}),[_]),B=(0,i.useCallback)((()=>{d(!1),T()}),[T]),D=(0,i.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];ni().xv(),ei().Lf(e,{type:"close",triggered_by:t?"keypress":"click"}),oi().ZH({environment:e}),zi(),Yn().default.afterNextFlush((()=>{R()}))}),[e,R]),O=(0,i.useCallback)((e=>{(0,L().uG)(e)||D()}),[D]),H=(0,i.useCallback)((e=>{if(e.stopPropagation(),(0,L().uG)(e))return;let t,n;t=b<1?1:b<1.5?1.5:1,n=t<=1?{x:0,y:0}:Wi({x:(window.innerWidth/2-e.clientX)/(t/(t-1)),y:(window.innerHeight/2-e.clientY)/(t/(t-1))},c)??S,gi().default.setState({...gi().default.state,zoomScale:t,panOffset:n}),T(),B()}),[c,B,S,T,b]),V=(0,i.useCallback)((function(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!C)return;const i=Bi();if(!i)return;const o=i.findIndex((e=>e.id===C.id));if(o+t<0||o+t>=i.length)return;ei().Lf(e,{type:t>0?"next":"previous",image_count:i.length,image_index:o+t,triggered_by:n?"keypress":"click"}),gi().default.setState({...gi().default.state,skipAnimations:!0}),r.current&&clearTimeout(r.current),r.current=setTimeout((()=>{gi().default.setState({...gi().default.state,skipAnimations:!1})}),250);const s=i[o+t];ii().dK({blocks:[s]}),R()}),[C,e,R]),U=(0,i.useCallback)((function(){V(-1,arguments.length>0&&void 0!==arguments[0]&&arguments[0])}),[V]),E=(0,i.useCallback)((function(){V(1,arguments.length>0&&void 0!==arguments[0]&&arguments[0])}),[V]),N=(0,i.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=Math.ceil(2*(b-Mi))/2;b-n<.25&&(n-=Mi),ei().Lf(e,{type:"zoom_out",new_zoom:n,triggered_by:t?"keypress":"click"}),I(n)}),[e,I,b]),F=(0,i.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=Math.floor(2*(b+Mi))/2;n-b<.25&&(n+=Mi),ei().Lf(e,{type:"zoom_in",new_zoom:n,triggered_by:t?"keypress":"click"}),I(n)}),[e,I,b]),K=(0,i.useCallback)((e=>{c&&1===e.buttons&&Di()&&P({x:e.clientX/b-w.x,y:e.clientY/b-w.y})}),[c,w.x,w.y,P,b]),z=(0,i.useCallback)((e=>{switch(e.key){case"+":case"=":F(!0);break;case"-":case"_":N(!0)}}),[F,N]);(0,i.useEffect)((()=>{const e=e=>{I(b+e)},n=t=>{g&&(t.preventDefault(),t.ctrlKey?t.deltaY?e(t.deltaY*ki):t.deltaX&&e(t.deltaX*ki):t.metaKey?t.deltaY?e(t.deltaY*wi):t.deltaX&&e(t.deltaX*wi):Di()&&P({x:S.x-t.deltaX,y:S.y-t.deltaY}))};return g&&(window.addEventListener("wheel",n,{passive:!1}),t.current=!0),()=>{window.removeEventListener("wheel",n),t.current=!1}}),[g,S.x,S.y,P,I,b]);const W=window.innerWidth,q=window.innerHeight-2*k;let G=W-2*k;const Y=x??(y?y.width/y.height:void 0);if(void 0===Y)return null;let $=G/Y;if($>q){const e=$/q;$/=e,G/=e}const X={opacity:0},Q={scale:b,opacity:1,translateX:S.x,translateY:S.y,width:"100%",height:"100%"};let J;return J=p?b>=1.5?"zoom-out":"zoom-in":"none",(0,A.jsx)(hi().Z,{open:g||!v,children:(0,si().Z)((e=>(0,A.jsx)(nt().Z,{debugName:"FullScreenRenderer",capture:g,onEsc:()=>{D(!0)},onEnter:f().yR,onSpace:()=>D(!0),onCommandEnter:()=>D(!0),onCommandShiftEnter:f().yR,onCommandSlash:f().yR,onUp:f().yR,onDown:f().yR,onDelete:f().yR,onBackspace:f().yR,onLeft:()=>U(!0),onRight:()=>E(!0),onUntab:f().yR,onTab:f().yR,onSelectAll:f().yR,onRedo:f().yR,onUndo:f().yR,onToggleBold:f().yR,onToggleItalics:f().yR,onToggleStrike:f().yR,onToggleCode:f().yR,onCut:f().yR,onCopy:f().yR,onPaste:f().yR,onKeypress:z,children:(0,A.jsxs)("div",{style:qi({isOpen:g,showControls:p}),...e,onClick:O,onMouseMove:T,children:[g&&(0,A.jsx)(n(470725).m,{}),(0,A.jsx)(fi().Z,{visible:g,initial:X,exit:X,animate:Q,skip:M,forceCompositeLayer:!0,style:{display:"flex",cursor:J,maxWidth:G,maxHeight:$,justifyContent:"center"},ref:e=>{e&&!c&&u({width:e.clientWidth,height:e.clientHeight})},onClick:H,onMouseDown:Ki,onMouseUp:zi,onMouseLeave:zi,onMouseMove:K,onAnimationEnd:Fi,children:h}),(0,A.jsx)(_i,{visible:p,isOpen:g,zoomScale:b,handleZoomIn:F,handleZoomOut:N,handlePrevious:U,handleNext:E,setZoomScale:I,disableZoomEditing:B,enableZoomEditing:Z,clearHideControlsTimeout:_,resetHideControlsTimeout:T,isSaving:j,isEditingZoom:l,handleClose:D})]})})))})};function Bi(){const{blockStore:e}=gi().default.state;if(!e)return[];if(function(){const{blockStore:e}=gi().default.state;return(null==e?void 0:e.getParentTable())===Xn().x_}()){return e.getParentStore().getContentStores().filter((e=>"image"===e.getType())).filter((e=>Boolean(e.getProperties().source)))}const t=Ot().default.getCurrentRootStore();return mi().R.getMembersByDOMOrder({filter:e=>"image"===e.renderedType&&Boolean(e.getBlockStore().findRecordStoreUIAncestor((e=>Boolean(t&&e===t))).ancestor)}).map((e=>e.getBlockStore())).filter((e=>Boolean(e.getProperties().source)))}function Di(){const{zoomScale:e}=gi().default.state;return e>1}function Li(e){return{bottom:30,display:e?"flex":"none",fontSize:14,left:"50%",lineHeight:1.2,position:"absolute",transform:"translate(-50%, 0)"}}function Oi(){return Jn().ZP.white}function Hi(){return Jn().ZP.whiteWithAlpha(.5)}function Vi(e){return{borderRadius:4,opacity:e?.4:1,padding:6}}function Ui(e){let{imageIndex:t,totalImageCount:n}=e;return(0,A.jsx)(F()._H,{values:{currentIndex:t+1,totalCount:n},defaultMessage:"{currentIndex} of {totalCount}",id:"fullscreenRenderer.imageCount.label"})}function Ei(e){const{primaryText:t,secondaryText:n}=e;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("span",{style:{marginRight:n?4:void 0},children:t}),n?(0,A.jsx)("span",{style:{color:Hi()},children:n}):void 0]})}function Ni(){return(0,A.jsx)("span",{style:{borderLeft:`1px solid ${Jn().ZP.whiteWithAlpha(.25)}`,height:"100%"}})}function Fi(){const{isOpen:e}=gi().default.state;e||gi().default.setState({...gi().default.state,fullscreenNodeAnimationComplete:!0})}function Ki(e){const{panOffset:t,zoomScale:n}=gi().default.state;gi().default.setState({...gi().default.state,panStartPosition:{x:e.clientX/n-t.x,y:e.clientY/n-t.y},skipAnimations:!0})}function zi(){gi().default.setState({...gi().default.state,skipAnimations:!1})}function Wi(e,t){if(!t)return;let n,i;n=t.width*Ci>window.innerWidth?(t.width*Ci-window.innerWidth)/(2*Ci):(window.innerWidth-t.width*Ci)/(2*Ci),i=t.height*Ci>window.innerHeight?(t.height*Ci-window.innerHeight)/(2*Ci):(window.innerHeight-t.height*Ci)/(2*Ci);return{x:Math.min(Math.max(e.x,-1*n),n),y:Math.min(Math.max(e.y,-1*i),i)}}function qi(e){const{isOpen:t,showControls:n}=e;return{zIndex:Qn().mJ,position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center",pointerEvents:t?"auto":"none",cursor:n?void 0:"none"}}var Gi=()=>n(878517),Yi=()=>n(198732),$i=()=>n(339523),Xi=()=>n(550054),Qi=()=>n(762557);const Ji=function(){const e=(0,o().O7)(),t=(0,i.useRef)(null),a=(0,i.useCallback)((n=>function(e,t,n){if(!Qi().Z.isOpen())return;if(!n.current)return;const i=n.current.getSelection();if(!i)return;const o=Qi().Z.state.value.length;"altKey"in e&&!e.altKey&&"shiftKey"in e&&!e.shiftKey&&i.startIndex===o&&i.endIndex===o&&(no(t),Yi().Wj())}(n,e,t)),[e]),r=(0,i.useCallback)((n=>function(e,t,n){if(!n.current)return;const i=n.current.getSelection();if(!i)return;"altKey"in e&&!e.altKey&&"shiftKey"in e&&!e.shiftKey&&0===i.startIndex&&0===i.endIndex&&(no(t),Yi().Wj(Qi().P.Backward))}(n,e,t)),[e]),l=(0,i.useCallback)((()=>no(e)),[e]),c=(0,s().VK)((()=>Qi().Z.state),[]),u=(0,s().VK)((()=>function(){if(!Qi().Z.isOpen())return;return Qi().Z.state.savedTextSelectionRect}()),[]),p=(0,s().VK)((()=>function(){var e;if("editing"!==_().default.state.mode&&!Qi().Z.isOpen())return!0;const t=Qi().Z.isOpen()?null===(e=(0,M().QY)(Qi().Z.state.savedTextSelectionState.multiSelection))||void 0===e?void 0:e.store:void 0;if(t&&!t.canEdit())return!0;if(t){const e=(0,$i().J2)(t);if(e&&e.isNonEditableState())return!0}const n={[g().GKr.User]:g().GKr.User,[g().GKr.Page]:g().GKr.Page,[g().GKr.CustomEmoji]:g().GKr.CustomEmoji,[g().GKr.Comment]:g().GKr.Comment,[g().GKr.Bot]:g().GKr.Bot,[g().GKr.Date]:g().GKr.Date,[g().GKr.ExternalObjectInstance]:g().GKr.ExternalObjectInstance,[g().GKr.TemporaryPage]:g().GKr.TemporaryPage,[g().GKr.TemplateVariable]:g().GKr.TemplateVariable,[g().GKr.FormulaPageProperty]:g().GKr.FormulaPageProperty,[g().GKr.FormulaContextValue]:g().GKr.FormulaContextValue,[g().GKr.Group]:g().GKr.Group,[g().GKr.Team]:g().GKr.Team,[g().GKr.Citation]:g().GKr.Citation,[g().GKr.LinkMention]:g().GKr.LinkMention,[g().GKr.AssistantInstructionsCollection]:g().GKr.AssistantInstructionsCollection};for(const i of Object.values(n))if((0,Xi().J6)(i))return!0;return!1}()),[]);if(!c.open)return null;const m=c.value,f=c.error;return(0,A.jsx)(d().ev,{dependency:n(315605).o,children:e=>c.open?(0,A.jsx)(n(890631).Z,{Prism:e,ref:t,isOpen:!0,equationValue:m,error:f,displayMode:"inline",disabled:p,originRect:u,originGap:8,onDismiss:to,onChange:eo,onSubmit:l,onLeft:r,onRight:a}):null})};function eo(e,t){Qi().Z.isOpen()&&Qi().Z.setState({...Qi().Z.state,value:e,error:t})}function to(){Yi().Wj()}function no(e){v().createAndCommit({userAction:"InlineEquationOverlay.handleSubmit",environment:e,canUndo:!0,perform:t=>{Yi().gt({environment:e,equationStore:Qi().Z,transaction:t})}})}var io=()=>n(905),oo=()=>n(250625),so=()=>n(490091),ao=()=>n(788206);function ro(e){switch(e){case so().Z.Preview:return(0,A.jsx)(F()._H,{id:"internalUnfurlingMenu.actions.pasteAsPreview.title",defaultMessage:"Preview"});case so().Z.Mention:return(0,A.jsx)(F()._H,{id:"internalUnfurlingMenu.actions.pasteAsMention.title",defaultMessage:"Mention"});case so().Z.Link:return(0,A.jsx)(F()._H,{id:"internalUnfurlingMenu.actions.pasteAsLink.title",defaultMessage:"Link"});default:(0,ge().t1)(e)}}const lo=function(){const e=(0,o().O7)(),t=(0,i.useRef)(null),[n]=(0,s().AF)(ao().Z),a=(0,i.useCallback)((t=>{if(n.open){var i;if(!t)io().pg({actionType:n.focusedIndex,environment:e,commentStore:null===(i=n.args.commentStore)||void 0===i?void 0:i.state,useTempStores:!1});ao().Z.setState({open:!1})}}),[e,n]),r=(0,i.useCallback)((e=>{n.open&&"ArrowUp"!==e.key&&"ArrowDown"!==e.key&&"Enter"!==e.key&&a(void 0)}),[a,n.open]),l=(0,i.useCallback)((e=>{if(!n.open||!e.target)return;const i=t.current;i&&(i.contains(e.target)||a(void 0))}),[a,n.open]);(0,i.useEffect)((()=>((0,oo().lj)(window,"keydown",r),(0,oo().lj)(window,"mousedown",l),()=>{(0,oo().ZV)(window,"keydown",r),(0,oo().ZV)(window,"mousedown",l)})),[r,l]);const d=(0,i.useRef)(!1);function c(t){var i;n.open&&void 0!==t.indexGlobal&&(ao().Z.setState({...n,focusedIndex:t.indexGlobal}),io().pg({actionType:t.indexGlobal,environment:e,commentStore:null===(i=n.args.commentStore)||void 0===i?void 0:i.state,useTempStores:!0}))}(0,s().VK)((()=>{var t,i;const o=(n.open&&(null===(t=n.args.commentStore)||void 0===t?void 0:t.state)&&(null===(i=n.args.commentStore.state)||void 0===i?void 0:i.isReady()))??!1;var s;o&&!d.current&&n.open&&io().pg({actionType:n.focusedIndex,environment:e,commentStore:null===(s=n.args.commentStore)||void 0===s?void 0:s.state,useTempStores:!0});d.current=o}),[e,n]);const u=(0,s().VK)((()=>e.device.isMobileNative&&!e.device.isTablet),[e]),p=e.device.isMobile;return(0,A.jsx)(b().ZP,{popupType:u?w().k.SlideUp:w().k.Popup,open:n.open,originRect:n.open?n.selectionRect:void 0,placementToOrigin:C().Placement.Top,alignmentToOrigin:C().Alignment.Start,originGap:4,disableMouseCapture:!0,disableContentScroll:!0,disableDarkOverlayBackground:p,keepFocus:p,render:function(){var i;const{device:o}=e;if(!n.open)return;const s=function(t){const{url:n,args:i}=t,o=[];o.push({title:ro(so().Z.Preview),validator:()=>!0,type:so().Z.Preview}),o.push({title:ro(so().Z.Mention),validator:()=>!0,type:so().Z.Mention}),o.push({title:ro(so().Z.Link),validator:()=>!0,type:so().Z.Link});return[{key:"menu section",render:e=>(0,A.jsx)(Ut().Z,{...e}),items:f().oA(o.map((t=>{let{title:o,validator:s,type:a}=t;if(s({url:n,baseUrl:q().default.domainBaseUrl,publicDomainName:q().default.publicDomainName})){return{key:`item ${a}`,render:t=>(0,A.jsx)(Ht().Z,{...t,title:o,onMouseEnter:n=>{var o;t.onMouseEnter(n),io().pg({actionType:a,environment:e,commentStore:null===(o=i.commentStore)||void 0===o?void 0:o.state,useTempStores:!0})}}),action:()=>{var t;return io().pg({actionType:a,environment:e,commentStore:null===(t=i.commentStore)||void 0===t?void 0:t.state,useTempStores:!1})}}}})))}]}(n),a=o.isMobile?{display:"flex",justifyContent:"center",alignItems:"center",fontSize:16,fontWeight:Pe().Ue.semibold,height:45}:{paddingLeft:16,paddingRight:16,paddingTop:10,fontWeight:Pe().Ue.semibold};let r;return r=o.isMobile?{menuType:S().o.ActionSheet}:{menuType:S().o.Popup,width:200,maxHeight:"40vh"},null!==(i=n.args.commentStore)&&void 0!==i&&i.state&&n.args.commentStore.state.isReady()?(0,A.jsx)(x().Z,{...r,className:Pt().srZ,ref:t,header:(0,A.jsx)(qt().Z,{style:a,isSmall:!o.isMobile,isSecondaryColor:!o.isMobile,children:(0,A.jsx)(F()._H,{id:"embedMenu.header",defaultMessage:"Paste as"})}),children:(0,A.jsx)(Vt().Z,{type:Vt().i.Vertical,sections:s,onKeyboardArrow:c,initialFocus:0,priority:1,disallowBackspace:!0})}):(0,A.jsx)(x().Z,{...r,className:Pt().srZ,ref:t,header:(0,A.jsx)(qt().Z,{style:a,isSmall:!o.isMobile,isSecondaryColor:!o.isMobile,children:(0,A.jsx)(F()._H,{id:"embedMenu.header",defaultMessage:"Paste as"})}),children:(0,A.jsx)(Ut().Z,{style:{display:"flex",justifyContent:"center"},children:(0,A.jsx)(Rn().Z,{})})})},onDismiss:()=>a(void 0)})};var co=()=>n(719542),uo=(n(470928),()=>n(627817)),po=()=>n(81821),mo=()=>n(209628),go=()=>n(10271),fo=()=>n(695793),ho=()=>n(257934),yo=()=>n(263184);class vo extends yo().default{getInitialState(){return{formulaTypecheckContextValue:void 0}}}const xo=vo;var bo=()=>n(543842),So=()=>n(200936),Mo=()=>n(731424),jo=()=>n(766933),Co=()=>n(92960),wo=()=>n(177634),ko=()=>n(756085),_o=()=>n(775404),To=()=>n(483586),Io=()=>n(159732),Po=()=>n(899548),Ao=()=>n(582900),Ro=()=>n(572948),Zo=()=>n(338530);function Bo(e){return"+"===e.insertionType?(0,A.jsx)(Do,{}):(0,A.jsx)("span",{style:{width:"1em",height:"1em",display:"inline-block",verticalAlign:"-0.15em",marginRight:"0.2em"},children:(0,A.jsx)(Vo,{svg:Po().R.__iconDefinition.svg,viewBox:Po().R.__iconDefinition.viewBox})})}function Do(){return(0,A.jsx)("span",{style:{width:"1em",height:"1em",display:"inline-block",verticalAlign:"-0.15em",marginRight:"0.2em"},children:(0,A.jsx)(Vo,{svg:Io().R.__iconDefinition.svg,viewBox:Io().R.__iconDefinition.viewBox})})}function Lo(){return(0,A.jsx)("span",{style:{width:"1em",height:"1em",display:"inline-block",verticalAlign:"-0.15em",marginRight:"0.2em"},children:(0,A.jsx)(Vo,{svg:To().f.__iconDefinition.svg,viewBox:To().f.__iconDefinition.viewBox})})}function Oo(){return(0,A.jsx)("span",{style:{width:"1em",height:"1em",display:"inline-block",verticalAlign:"-0.15em",marginRight:"0.2em"},children:(0,A.jsx)(Vo,{svg:_o().p.__iconDefinition.svg,viewBox:_o().p.__iconDefinition.viewBox})})}function Ho(e){const{pageStore:t,theme:n,isSafariOrIOS:i,emojiType:o,currentUserId:s}=e;return(0,Ro().tp)({pageModel:t.getModel(),pageRole:t.getRole(),showEmojiInline:!0,emojiType:o,baseUrl:q().default.domainBaseUrl,getRecordModel:t.getRecordModel,isClient:!0,isSafariOrIOS:i,currentUserId:s,theme:n,emojiData:Zo().Z.state})}function Vo(e){const{svg:t,viewBox:n}=e,o=(0,i.useMemo)((()=>{const e=Ao().Z.renderToString((0,A.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:n,children:t}));return`url("${`data:image/svg+xml,${encodeURIComponent(e)}`}")`}),[t,n]),s=(0,Ie().yK)((e=>({container:{width:"100%",height:"100%",backgroundColor:e.mediumIconColor,WebkitMaskImage:o,maskImage:o,WebkitMaskRepeat:"no-repeat",maskRepeat:"no-repeat"}})),[o]);return(0,A.jsx)("div",{style:s.container})}function Uo(){return(0,fe().bq)()?400:330}var Eo=()=>n(504008);class No extends yo().default{getInitialState(){}}const Fo=new No;function Ko(e){const{isFirefox:t}=(0,o().Fy)();return(0,i.useCallback)((n=>{Eo().Z.withListenerIgnored((()=>{var i;const o=bo().Z.state;if(!o.open)return;if(!n)return void o.temporaryInputData.setState(void 0);const{title:s,icon:a,allowTabCompletion:r}=n,l=e.current??"",d=s.toLowerCase().startsWith(l)?o.oldTextValue&&0!==(null===(i=o.oldTextValue)||void 0===i?void 0:i.length)?"":s.slice(l.length):"";Fo.setState(r?d:void 0);const c=t?void 0:a;o.temporaryInputData.setState({prefix:o.insertionType,suffix:"[["===o.insertionType&&l.endsWith("]]")?"]]":"",completion:d,prefixIcon:c})}))}),[e,t])}const zo=(0,F().vU)({backButtonAriaLabel:{defaultMessage:"Back",id:"formulaMentionMenu.backButton.ariaLabel"},possessiveContextValueProperty:{defaultMessage:"{contextValueName}'s {propertyName}",id:"formulaMentionMenu.possessiveContextValueProperty.title"}}),Wo=i.memo((function(e){const{mentionMenuCurrentFormulaStore:t,queryRef:n}=e,a=(0,s().VK)((()=>Uo()),[]),r=(0,s().VK)((()=>{const e=t.state.formulaTypecheckContextValue;if(e&&e.kind===Co().FormulaContextValueKind.ContextValue)return e}),[t]),l=function(e){const{contextValue:t,queryRef:n,setTemporaryInputData:i}=e,a=(0,o().O7)(),r=(0,F().YB)(),l=(0,s().VK)((()=>{if(!t)return;const e=It().RF();return e?function(e,t){const n=function(e){if("block"!==e.type.type||!(0,ge().$K)(e.type.collection))return;return e.type.collection}(t);if(!n)return;const i=te().NW.createChildStore(e,n);return i.getSchema()}(e,t):void 0}),[t]);if(!t||!l)return[];const d=(0,wo().NP)(t);return(0,f().oA)(Object.entries(l).map((e=>{let[o,s]=e;if(s&&Co().FORMULAS_SUPPORTED_COLLECTION_PROPERTY_TYPES.includes(s.type))return{action:e=>{v().createAndCommit({userAction:"FormulaMentionMenu.menuItem",environment:a,canUndo:!0,perform:i=>{const l=(0,g().kbv)({contextValueId:t.id,name:(0,Mo().sB)(r,d,s.name),property:o,valueSnapshot:"current"});uo().RL({annotations:[l],editorMode:"default",environment:a,mentionType:"formulaContextVariable",menuListItemAction:e,query:n.current??"",transaction:i})}})},key:`formula property ${o}`,render:e=>(e.focused&&i({allowTabCompletion:!0,icon:(0,A.jsx)(Oo,{}),title:r.formatMessage(zo.possessiveContextValueProperty,{contextValueName:d,propertyName:s.name})}),(0,A.jsx)(Ht().Z,{...e,icon:(0,A.jsx)(qo,{children:jo().wG[s.type]({height:17,width:17})}),title:s.name}))}})))}({contextValue:r,queryRef:n,setTemporaryInputData:Ko(n)}),d=function(e){const{contextValue:t,items:n,mentionMenuCurrentFormulaStore:o}=e,s=(0,F().YB)(),a=(0,i.useCallback)((()=>{o.setState({formulaTypecheckContextValue:void 0}),bo().Z.updateOpenState({showFormulaProperty:!1})}),[o]),r=(0,Ie().yK)((()=>({backButton:{height:20,width:20},backButtonIcon:{width:17},sectionDesktopTitle:{paddingInline:10},titleHeader:{display:"inline-flex",alignItems:"center",gap:2}})),[]);if(0===n.length||!t)return[];const l=(0,wo().NP)(t);return[{items:n,key:"formula properties section",render:e=>(0,A.jsx)(Ut().Z,{...e,desktopTitleStyle:r.sectionDesktopTitle,title:(0,A.jsxs)("header",{style:r.titleHeader,children:[(0,A.jsx)(Ve().Z,{ariaLabel:s.formatMessage(zo.backButtonAriaLabel),icon:ko().f,iconStyle:r.backButtonIcon,onClick:a,style:r.backButton}),(0,A.jsx)(F()._H,{defaultMessage:"Property from {contextValueName}",id:"formulaMentionMenu.formulaPropertiesSection.title",values:{contextValueName:l}})]})})}]}({contextValue:r,items:l,mentionMenuCurrentFormulaStore:t});if(!d||0===d.length)return null;const c={menuType:S().o.Popup,width:a};return(0,A.jsx)(x().Z,{...c,children:(0,A.jsx)(Vt().Z,{initialFocus:0,sections:d,type:Vt().i.Vertical})})}));function qo(e){const{children:t}=e,n=(0,Ie().yK)((()=>({wrapper:{display:"inline-flex",alignItems:"center",justifyContent:"center",height:20,width:20}})),[]);return(0,A.jsx)("div",{style:n.wrapper,children:t})}class Go extends yo().default{getInitialState(){return{userId:"",userEmail:"",displayName:""}}}const Yo=Go;function $o(e,t){return t?bo().Z.state.open&&"@"===bo().Z.state.insertionType&&e.device.isAndroid&&t.startsWith("@")?t.slice(1).trim():bo().Z.state.open&&"[["===bo().Z.state.insertionType&&t.endsWith("]]")?t.slice(0,-2).trim():t.trim():""}var Xo=()=>n(30238),Qo=()=>n(395362),Jo=()=>n(150356);function es(e,t){const n=(0,s().VK)((()=>bo().Z.getMentionMenuContext()),[]);return(0,i.useCallback)((()=>{let i,o=Date.now();const s=bo().Z.state;if(s.open&&(o=s.openTime,i=s.flowId),s.open){var a;const r=Date.now(),{numServerRequests:l}=Jo().default.state,d=s.sessionId,c=s.showMentionAndShare;Xo().ew(e,{timeToAbandonInMs:r-o,analyticsFrom:n,queryLength:(null===(a=t.current)||void 0===a?void 0:a.length)??0,flowId:i,searchSessionId:d,searchSessionFlowNumber:l,stage:c?"share":"user_selection"})}s.open&&s.showInvite&&Qo().Zv(e,{origin:bo().Z.getInviteOrigin(),invite_flow_id:s.flowId}),uo().xv()}),[n,e,t])}function ts(e){let{usePopupOnMobile:t}=e;const n=(0,o().Fy)();return!t&&(n.isMobileNative&&!n.isTablet)}var ns=()=>n(123721);function is(e){let{clearSavedSelection:t,filter:n}=e;const i=(0,o().O7)(),a=(0,s().Kw)(bo().Z),r=(0,s().VK)((()=>Uo()),[]);if(!a.open)return null;const l="block"===a.textStore.table?a.textStore.id:void 0;return(0,A.jsx)(ns().ZP,{targets:[],isAddTo:!0,isCreateIn:!0,onAccept:e=>{uo().Br({environment:i,titleText:$o(i,n),clearSavedSelection:t,createInValue:e,menuListItemAction:void 0})},parentBlockId:l,onAutocompleteQueryChange:os,autocompleteQuery:a.createInQuery,desktopWidth:r,onCancel:ss})}function os(e){bo().Z.updateOpenState({createInQuery:e})}function ss(){bo().Z.updateOpenState({showCreateIn:!1,createInQuery:""})}var as=()=>n(65217);function rs(e){let{inviteTargetsStore:t,personPropertyInviteStore:n,filter:a}=e;const r=(0,o().O7)(),l=(0,i.useCallback)((()=>ls(r,t,n)),[r,t,n]),d=(0,s().VK)((()=>It().np()),[]),c=(0,s().VK)((()=>bo().Z.getInviteOrigin()),[]);return d?(0,A.jsx)(as().Z,{inviteOrigin:c,store:d,onInviteCompleteFn:e=>{if(!e.success)return ls(r,t,n),null;const{invitedUsers:i,requestedUsers:o}=e,s=f().zo(Object.values(i),Object.values(o));s.length?v().createAndCommit({userAction:"MentionMenu.inviteMenu",environment:r,canUndo:!0,perform:e=>{uo().RL({environment:r,editorMode:"default",annotations:s.map((e=>(0,g().tEo)(e))),transaction:e,menuListItemAction:void 0,query:$o(r,a),mentionType:"user"})}}):ls(r,t,n)},handleBackButtonClick:l,inviteTargetsStore:t,personPropertyInviteStore:n}):null}function ls(e,t,n){const i=bo().Z.state;i.open&&(Qo().Zv(e,{origin:bo().Z.getInviteOrigin(),invite_flow_id:i.flowId}),t.setState({tokenQuery:"",inviteTargets:[]}),n.setState({...n.state,emailMessage:""}),bo().Z.updateOpenState({showInvite:!1}))}var ds=()=>n(35980),cs=()=>n(930085),us=()=>n(784234),ps=()=>n(102182),ms=()=>n(306837),gs=()=>n(624778),fs=()=>n(302353);const hs="ShowMentionInvite";function ys(e){return`${hs}-${e}`}function vs(e){const t=(0,o().O7)(),n=(0,s().VK)((()=>It().np()),[]),{mentionMenuCurrentMentionStore:i,menuPopupType:a}=e,{userId:r,displayName:l,userEmail:d}=(0,s().VK)((()=>i.getState()),[i]),c=(0,s().VK)((()=>fs().default.mobileNativeBottomPadding(t)),[t]),u=(0,s().VK)((()=>bo().Z.state.open),[]);if(!n)return null;const p={key:"invite buttons",render:e=>(0,A.jsx)(Ut().Z,{...e}),items:[{key:"MentionMenu.MentionWithoutSharing",render:e=>(0,A.jsx)(Ht().Z,{title:(0,A.jsx)(F()._H,{defaultMessage:"Mention without sharing",id:"mentionMenu.peopleSection.invitePrompt.mentionWithoutSharing"}),caption:(0,A.jsx)(F()._H,{defaultMessage:"Mention {userDisplayName} without sharing this document",id:"mentionMenu.peopleSection.invitePrompt.mentionWithoutSharingCaption",values:{userDisplayName:l}}),icon:(0,gs().p)({width:18}),...e}),action:()=>{v().createAndCommit({userAction:"MentionMenu.menuItem",environment:t,canUndo:!0,perform:e=>{uo().RL({environment:t,editorMode:"default",annotations:[(0,g().tEo)(r)],transaction:e,menuListItemAction:void 0,query:"",mentionType:"user",shareMenuSelection:"mention_without_share"})}}),ds().Z.set({userId:t.currentUser.id,key:ys(n.id),value:!0})}},{key:"MentionMenu.MentionAndShare",render:e=>(0,A.jsx)(Ht().Z,{title:(0,A.jsx)(F()._H,{defaultMessage:"Mention and share",id:"mentionMenu.peopleSection.invitePrompt.mentionAndShare"}),caption:(0,A.jsx)(F()._H,{defaultMessage:"Grant {userDisplayName} full access",id:"mentionMenu.peopleSection.invitePrompt.mentionAndShareCaption",values:{userDisplayName:l}}),icon:(0,ms().C)({width:18}),...e}),action:()=>{v().createAndCommit({userAction:"MentionMenu.menuItem",environment:t,canUndo:!0,perform:e=>{uo().RL({environment:t,editorMode:"default",annotations:[(0,g().tEo)(r)],transaction:e,menuListItemAction:void 0,query:"",mentionType:"user",shareMenuSelection:"mention_and_share"})}}),v().createAndCommit({userAction:"MentionAndInviteUserComponent.setPermission",environment:t,canUndo:!0,perform:e=>{us().l3({environment:t,transaction:e,store:n,permissionItems:[{type:"user_permission",role:"editor",user_id:r}],pagePermissionChangeLocation:"mention_share_menu"})}}),cs().jB(t,{role:"editor",is_space:!1,invite_targets:[{type:"existingUser",value:{id:r,version:0,email:d}}],is_onboarding:!1,invite_origin:"mention_menu",permission_items:[{type:"user_permission",role:"editor",user_id:r}],invite_message_length:0}),ps().d4({item:{label:(0,A.jsx)(F()._H,{id:"mentionMenu.mentionShareMenu.mentionAndShare.snackbarMessage",defaultMessage:"Successfully granted {user} full access",values:{user:l}})},undoFunc:()=>v().createAndCommit({userAction:"MentionAndInviteUserComponent.setPermission.undoShare",environment:t,canUndo:!0,perform:e=>{us().l3({environment:t,transaction:e,store:n,permissionItems:[{type:"user_permission",role:"none",user_id:r}],pagePermissionChangeLocation:"mention_share_menu"})}})})}}]},m=a===S().o.ActionSheet?{menuType:S().o.ActionSheet,disableBottomPadding:!0,height:`calc(70vh - ${c}px)`}:{menuType:S().o.Popup};return(0,A.jsxs)(x().Z,{...m,children:[(0,A.jsx)(nt().Z,{debugName:"MentionMenu",capture:u}),(0,A.jsx)(Vt().Z,{type:Vt().i.Vertical,initialFocus:0,sections:[p]})]})}var xs=()=>n(804217),bs=()=>n(838367);const Ss=(0,F().vU)({addPage:{defaultMessage:"Type to add or link page…",id:"mentionMenu.addPage.prompt2"}});var Ms=()=>n(314379),js=()=>n(620218),Cs=()=>n(752348),ws=()=>n(619186),ks=()=>n(727207),_s=()=>n(142589),Ts=()=>n(583352);var Is=()=>n(714230),Ps=()=>n(744091),As=()=>n(47443),Rs=()=>n(164079),Zs=()=>n(338217);const Bs={...Pe().Yu,fontWeight:Pe().Ue.medium,maxWidth:160,display:"inline-block",verticalAlign:"bottom"};function Ds(e){const{pageTitle:t}=e;return t?(0,A.jsx)(F()._H,{defaultMessage:"New “{filterText}” page in…",id:"createPageMenuItem.title.withPageName",values:{filterText:(0,A.jsx)("span",{style:Bs,children:t})}}):(0,A.jsx)(F()._H,{defaultMessage:"Add new page in…",id:"createPageMenuItem.title.withoutPageName"})}function Ls(e){const{pageTitle:t}=e;return t?(0,A.jsx)(F()._H,{defaultMessage:"New “{filterText}” sub-page",id:"createSubpageMenuItem.title.withPageName",values:{filterText:(0,A.jsx)("span",{style:Bs,children:t})}}):(0,A.jsx)(F()._H,{defaultMessage:"Add new sub-page",id:"createSubpageMenuItem.title.withoutPageName"})}var Os=()=>n(73478);function Hs(e){const{topBorder:t,query:n,clearSavedSelection:a,setTemporaryInputData:r}=e,{isOpen:l,insertionType:d,isCreatePageEnabled:c,textStore:u}=(0,s().VK)((()=>{const e=bo().Z.state.open;return{isOpen:e,isCreatePageEnabled:bo().Z.state.mentionTypes.createPage,insertionType:e?bo().Z.state.insertionType:void 0,textStore:e?bo().Z.state.textStore:void 0}}),[]),p=function(e){const{query:t,textStore:n,clearSavedSelection:a,setTemporaryInputData:r}=e,l=(0,o().O7)(),d=(0,F().YB)(),c=(0,s().VK)((()=>Ps().gt(n)),[n]),u=(0,i.useMemo)((()=>({key:"add new subpage",action:async e=>{c&&await uo().Br({environment:l,clearSavedSelection:a,titleText:t,createInValue:c.createInValue,onPageCreated:e=>{e&&""===g().QaF(e.getTitleValue())&&As()._c({environment:l,store:e,pageVisitSource:V().tY.Create})},menuListItemAction:e})},render:e=>{e.focused&&r({title:0===t.length?d.formatMessage(Ss.addPage):"",icon:(0,A.jsx)(Do,{}),allowTabCompletion:!1});const n=n=>(0,A.jsx)(Ht().Z,{...(0,Rs().Z)(n||{},e),icon:(0,pi().R)({width:16}),title:(0,A.jsx)(Ls,{pageTitle:t})});return l.device.isMobile?n():(0,A.jsx)(Ue().Z,{renderTooltip:()=>(0,A.jsx)(Os().Z,{imageURL:Is().Z.images.tooltips.pageMenu.newSubpagePng,imageWidth:140,imageHeight:100,caption:(0,A.jsx)(F()._H,{...ns().sY.createSubpage})}),placement:C().Placement.Right,delayThreshold:0,render:e=>n(e)})}})),[l,a,c,d,t,r]);return u}({query:n,textStore:u,clearSavedSelection:a,setTemporaryInputData:r}),m=function(e){const{query:t,setTemporaryInputData:n}=e,s=(0,o().O7)(),a=(0,F().YB)(),r=(0,i.useCallback)((()=>{bo().Z.updateOpenState({showCreateIn:!0})}),[]),l=(0,i.useMemo)((()=>({key:"open create in menu",action:r,render:e=>{e.focused&&n({title:0===t.length?a.formatMessage(Ss.addPage):"",icon:(0,A.jsx)(Do,{}),allowTabCompletion:!1});const i=n=>(0,A.jsx)(Ht().Z,{...(0,Rs().Z)(n||{},e),icon:(0,Zs().J)({width:16}),title:(0,A.jsx)(Ds,{pageTitle:t})});return s.device.isMobile?i():(0,A.jsx)(Ue().Z,{renderTooltip:()=>(0,A.jsx)(Os().Z,{imageURL:Is().Z.images.tooltips.pageMenu.newPageInPng,imageWidth:140,imageHeight:100,caption:(0,A.jsx)(F()._H,{...ns().sY.newPageIn})}),placement:C().Placement.Right,delayThreshold:0,render:e=>i(e)})}})),[s.device.isMobile,r,a,t,n]);return l}({query:n,setTemporaryInputData:r}),f="@"===d?(0,A.jsx)(F()._H,{id:"mentionMenu.createPageSection.title",defaultMessage:"New page"}):void 0;if(c&&l)return{key:"create page",render:e=>(0,A.jsx)(Ut().Z,{title:f,isTitleUppercase:!0,...e,topBorder:t}),items:[p,m]}}var Vs=()=>n(646574),Us=()=>n(874459),Es=()=>n(312117);function Ns(e){const{category:t,query:n,setTemporaryInputData:i,templateVariableResults:s}=e,a=(0,o().O7)(),r=(0,F().YB)();return s.filter((e=>(0,ks().i6)(e,t))).map((e=>({key:e,render:t=>{const n=(0,ks().U$)(e,r),o=(0,ks().Z0)(e,r);return t.focused&&i({title:n,icon:(0,A.jsx)(Oo,{}),allowTabCompletion:!0}),(0,A.jsx)(Ht().Z,{...t,title:n,caption:o,inline:!0})},action:t=>{v().createAndCommit({userAction:"MentionMenu.menuItem",environment:a,canUndo:!0,perform:i=>{uo().RL({environment:a,editorMode:"default",annotations:[g().WBu({type:e})],transaction:i,menuListItemAction:t,query:n,mentionType:"templateVariable"})}})}})))}var Fs=()=>n(696347),Ks=()=>n(855238);function zs(e,t){return function(){t.setState({formulaTypecheckContextValue:e}),bo().Z.updateOpenState({showFormulaProperty:!0})}}function Ws(e){const{formulaReturnType:t,query:n,formulaContextVariableResults:i,setTemporaryInputData:s}=e;return qs({environment:(0,o().O7)(),formulaVariableFilter:e=>e.kind===Co().FormulaContextValueKind.ContextValue&&e.type.type===t&&!(0,wo().iT)(e),query:n,formulaContextVariableResults:i,setTemporaryInputData:s})}function qs(e){const{environment:t,formulaVariableFilter:n,query:i,formulaContextVariableResults:o,setTemporaryInputData:s}=e;if(0===o.length)return[];const a=o.filter(n);return 0===a.length?[]:a.map((e=>{const n=(0,wo().NP)(e),o=(0,wo().WT)(e),a=(0,wo().RX)(e.type);return{action:Gs(t,e,i),key:e.id,render:t=>(t.focused&&s({allowTabCompletion:!0,icon:(0,A.jsx)(Oo,{}),title:e.name}),(0,A.jsx)(Ks().Z,{...t,svg:a,title:n,tooltipText:o}))}}))}function Gs(e,t,n){return function(i){v().createAndCommit({userAction:"MentionMenu.formulaMenuItem",environment:e,canUndo:!0,perform:o=>{const s=(0,g()._QF)(t);uo().RL({annotations:[s],editorMode:"default",environment:e,mentionType:"formulaContextVariable",menuListItemAction:i,query:n,transaction:o})}})}}function Ys(e){const{topBorder:t,query:n,setTemporaryInputData:a,templateVariableResults:r,formulaContextVariableResults:l}=e,d=(0,o().O7)(),c=(0,F().YB)(),u=function(e){const{query:t}=e,n=(0,F().YB)(),{areDateMentionsAllowed:o,areReminderMentionsAllowed:a}=(0,s().VK)((()=>({areDateMentionsAllowed:bo().Z.state.mentionTypes.date,areReminderMentionsAllowed:bo().Z.state.mentionTypes.reminder})),[]),r=(0,i.useMemo)((()=>o?function(e,t,n){if(0===e.length)return(0,f().oA)([{label:n.formatMessage($s.autocompleteToday),value:()=>Us().Lg((0,U().r)())},t?void 0:{label:n.formatMessage($s.autocompleteNextTuesday),value:()=>{const e=Us().Uu((0,U().r)()),t=e.set({weekday:2,hour:15}),n=t<=e?t.plus({week:2}):t.plus({week:1});return{type:"datetime",start_date:n.toFormat(Us().Iq),start_time:n.toFormat(un().jK),time_zone:(0,U().r)()}}},t?{label:n.formatMessage($s.autocompleteReminder),value:()=>({type:"datetime",start_date:Us().Ro((0,U().r)()).start_date,start_time:"09:00",reminder:{unit:"day",value:0,time:un().HZ,defaultTimeZone:(0,U().r)()},time_zone:(0,U().r)()})}:void 0]);const i=e.normalize("NFKD"),o=t?Es().St(i,n):Es().cg(i,n);if(o){let e=(0,Vs().ZV)({value:o,date_format:"relative",userTimeZone:(0,U().r)(),intl:n,allowRelativeDates:!0});return o.reminder&&(e=n.formatMessage($s.reminder,{dateTime:e})),[{label:e,value:()=>o}]}return[]}(t,a,n).slice(0,6):[]),[o,a,n,t]);return r}({query:n}),p=Ns({templateVariableResults:r,category:"date",query:n,setTemporaryInputData:a}),m=Ws({formulaReturnType:"date",query:n,formulaContextVariableResults:l,setTemporaryInputData:a}),g=(0,i.useMemo)((()=>u.map((e=>{let{label:t,value:i}=e;return{key:t,render:e=>{if(e.focused&&a({title:t,icon:(0,A.jsx)(Oo,{}),allowTabCompletion:!0}),Es().UL(t,c)){const n=(0,Vs().ZV)({value:i(),userTimeZone:(0,U().r)(),intl:c,allowRelativeDates:!1});return(0,A.jsx)(Ht().Z,{...e,title:t,caption:n,inline:!0})}return(0,A.jsx)(Ht().Z,{...e,title:t})},action:e=>{v().createAndCommit({userAction:"MentionMenu.menuItem",environment:d,canUndo:!0,perform:t=>{const o=i();uo().RL({environment:d,editorMode:"default",annotations:[["d",{...o,date_format:"relative"}]],transaction:t,menuListItemAction:e,query:n,mentionType:o.reminder?"reminder":"date"})}})}}}))),[u,c,a,d,n]),h=(0,i.useMemo)((()=>[...m,...p,...g]),[g,m,p]),y=(0,i.useMemo)((()=>{if(h.length>0)return{key:"date results",render:e=>(0,A.jsx)(Ut().Z,{...e,title:(0,A.jsx)(F()._H,{defaultMessage:"Date",id:"mentionMenu.dateSection.title"}),topBorder:t,isTitleUppercase:!0}),items:h}}),[h,t]);return y}const $s=(0,F().vU)({autocompleteToday:{defaultMessage:"Today",id:"mentionMenu.date.autocomplete.today"},autocompleteNextTuesday:{defaultMessage:"Next Tuesday 3pm",id:"mentionMenu.date.autocomplete.nextTuesday"},autocompleteReminder:{defaultMessage:"Remind tomorrow 9am",id:"mentionMenu.date.autocomplete.reminder"},reminder:{defaultMessage:"Remind {dateTime}",id:"mentionMenu.date.remindAtDateTime"}});var Xs=()=>n(763928);const Qs=(0,F().vU)({groupMentionCaption:{defaultMessage:"{numMembersInGroup, plural, one {{numMembersInGroup} member} other {{numMembersInGroup} members}}",id:"mentionMenu.group.caption"}});function Js(e){const{topBorder:t,query:n,setTemporaryInputData:a}=e,r=(0,o().O7)(),l=(0,F().YB)(),d=function(e){const{query:t}=e,n=(0,s().VK)((()=>bo().Z.state.mentionTypes.group),[]),o=(0,s().VK)((()=>en().Z.state.permissionGroupsAndMemberCounts.map((e=>e.group))),[]),a=(0,i.useMemo)((()=>n?(0,ws().ZP)(t,o,(e=>e.name||""),{normalizeFuzzyScore:!0}):[]),[n,t,o]);return a}({query:n}),c=(0,s().VK)((()=>f().KX(en().Z.state.permissionGroupsAndMemberCounts,(e=>e.group.group_id))),[]),u=(0,s().VK)((()=>{var e;return null===(e=J().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),p=(0,i.useMemo)((()=>f().oA(d.map((e=>{var t;if(!u)return;const i=l.formatMessage(Qs.groupMentionCaption,{numMembersInGroup:(null===(t=c[e.group_id])||void 0===t?void 0:t.memberCount)||0});return{key:e.id,render:t=>(t.focused&&a({title:e.name||"",icon:(0,A.jsx)(Oo,{}),allowTabCompletion:!0}),(0,A.jsx)(Xs().l,{menuListItemProps:{...t,caption:i},group:e})),action:t=>{v().createAndCommit({userAction:"MentionMenu.groupMention",environment:r,canUndo:!0,perform:i=>{uo().RL({environment:r,editorMode:"default",annotations:[g().XIB(e.group_id,u)],transaction:i,menuListItemAction:t,query:n,mentionType:"group"})}})}}})))),[d,u,l,c,a,r,n]);if(0!==d.length)return{key:"group results",render:e=>(0,A.jsx)(Ut().Z,{...e,title:(0,A.jsx)(F()._H,{defaultMessage:"Groups",id:"mentionMenu.groupSection.title"}),topBorder:t,isTitleUppercase:!0}),items:p}}var ea=()=>n(970381),ta=()=>n(482162),na=()=>n(236190);function ia(e){const t=(0,o().O7)(),n=(0,F().YB)(),{query:i,setTemporaryInputData:a,topBorder:r}=e,l=function(e){const{intl:t,query:n}=e,i=n.toLowerCase(),o=(0,O().E)("mention_menu_page_headings"),a=(0,s().VK)((()=>{const e=(0,It().RM)();if(!e)return;const{mainEditorCurrentBlockStore:t}=J().default.state;return e===t?t:ta().default.peekTargetStore.state===e?ta().default.peekTargetStore.state:void 0}),[]),r=(0,s().VK)((()=>{if(!o||!a)return[];const e=ee().default.checkGate({gateName:"toc_nested_headings"});return(0,ea().Q)(a.id,a.getRecordModel,e)}),[o,a]),l=(0,s().VK)((()=>a?(0,f().oA)(r.map((e=>{const n=te().G.createChildStore(a,{table:jn().iU,id:e}),o=n.getModel();if(!o)return;const s=o.getRenderTitle({getRecordModel:n.getRecordModel,userTimeZone:(0,U().r)(),intl:t});return s&&s.toLowerCase().includes(i)?n:void 0}))):[]),[t,i,a,r]);return l}({query:i,intl:n}),d=0===l.length,c=(0,s().VK)((()=>l.map((e=>{const o=e.id;return{key:o,render:t=>{if(t.focused){const t=e.getModel();if(t){const i=t.getRenderTitle({getRecordModel:e.getRecordModel,userTimeZone:(0,U().r)(),intl:n});a({title:i||"",icon:(0,A.jsx)(Lo,{}),allowTabCompletion:!0})}}return(0,A.jsx)(na().Z,{...t,store:e})},action:e=>{v().createAndCommit({userAction:"MentionMenu.getHeaderResultsMenuSection",environment:t,canUndo:!0,perform:n=>{uo().RL({environment:t,editorMode:"default",annotations:[["p",o]],transaction:n,menuListItemAction:e,query:i,mentionType:"heading"})}})}}}))),[t,l,n,i,a]);if(!d)return{key:"heading results",render:e=>(0,A.jsx)(Ut().Z,{...e,title:(0,A.jsx)(F()._H,{defaultMessage:"Link to heading",id:"mentionMenu.headerSection.title"}),topBorder:r,isTitleUppercase:!0}),items:c}}var oa=()=>n(435676);function sa(e){const{topBorder:t,environment:n,query:a,setTemporaryInputData:r}=e,{teamResults:l,currentTeamResultStore:d}=function(e){const t=(0,o().O7)(),{query:n}=e,i=(0,s().VK)((()=>(0,_s().U)({isMobileNative:t.device.isMobileNative,disableExposureLogging:!0})&&bo().Z.state.mentionTypes.team),[t.device.isMobileNative]),a=(0,s().VK)((()=>{var e;if(!i)return[];if(!bo().Z.state.open)return[];const t=(null===(e=J().default.state.currentSpaceViewStore)||void 0===e?void 0:e.getTeamsStores().filter(ge().$K))||[];return(0,ws().ZP)(n,t,(e=>e.getName()||""),{normalizeFuzzyScore:!0})}),[i,n]),r=(0,s().VK)((()=>bo().Z.state.open?bo().Z.state.textStore:void 0),[]);return{teamResults:a,currentTeamResultStore:(0,s().VK)((()=>{if(r&&(0,Tn().n3)(r))return(0,Tn().tM)(r)}),[r])}}({query:a}),c=(0,s().VK)((()=>{var e;return null===(e=J().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),u=(0,s().VK)((()=>f().oA(l.map((e=>{if(!c)return;return{key:e.id,render:t=>(t.focused&&r({title:e.getName()||"",icon:(0,A.jsx)(Oo,{}),allowTabCompletion:!0}),(0,i.createElement)(oa().Z,{...t,key:e.id,teamStore:e})),action:t=>{v().createAndCommit({userAction:"MentionMenu.teamMention",environment:n,canUndo:!0,perform:i=>{uo().RL({environment:n,editorMode:"default",annotations:[g().p3r(e.id,c,"teamspace")],transaction:i,menuListItemAction:t,query:a,mentionType:"team"})}})}}})))),[n,a,r,c,l]),p=(0,i.useMemo)((()=>{if(0!==u.length)return{key:"team results",render:e=>(0,A.jsx)(Ut().Z,{...e,title:(0,A.jsx)(F()._H,{defaultMessage:"Teams",id:"mentionMenu.teamSection.title"}),topBorder:t,isTitleUppercase:!0}),items:u}}),[u,t]);return{currentTeamResultStore:d,teamResultsSection:p}}var aa=()=>n(899133),ra=()=>n(718611),la=()=>n(15981),da=()=>n(766463),ca=()=>n(729201),ua=()=>n(128076),pa=()=>n(231219);const ma=20;function ga(e){const{query:t,topBorder:n,setTemporaryInputData:a,formulaContextVariableResults:r}=e,l=(0,F().YB)(),d=(0,o().O7)(),{device:c}=d,u=d.currentUser.id,p=(0,Ie().Fg)(),m=c.isSafari||c.isIOS,{results:g,isLoading:h}=function(e){const t=(0,s().VK)((()=>bo().Z.state.mentionTypes.page),[]),n=(0,s().VK)((()=>bo().Z.state.open&&bo().Z.state.textStore instanceof ua().G?bo().Z.state.textStore:void 0),[]),i=(0,s().VK)((()=>Boolean(J().default.state.currentSpaceStore)||Boolean(n)),[n]),o=(0,s().VK)((()=>{var e;return null===(e=(0,It().np)())||void 0===e?void 0:e.id}),[]),a=(0,s().VK)((()=>la().X4.state.filter((e=>e.pageId!==o)).slice(0,ma).map((e=>e.store))),[o]),r=""===e,{results:l,isResultsLoading:d}=(0,da().s)({source:"mention_menu",searchQuery:e,limit:ma,type:aa().n8.BlocksInSpace,disable:!t||!i||r,filters:{excludeTemplates:!0}});return{results:(0,s().VK)((()=>r?a.map((e=>({pageStore:e,serverEventProperties:void 0}))):l.map((e=>{let{store:t,serverEventProperties:n}=e;return{pageStore:t,serverEventProperties:n}}))),[l,a,r]),isLoading:d}}(t),y=Ws({formulaReturnType:"block",query:t,formulaContextVariableResults:r,setTemporaryInputData:a}),x=(0,i.useMemo)((()=>(0,f().oA)(g.map((e=>{let{pageStore:n,serverEventProperties:i}=e;const o=n.id;return{key:o,render:e=>{if(e.focused){const e=n.getModel();if(e){const t=e.getRenderTitle({getRecordModel:n.getRecordModel,userTimeZone:(0,U().r)(),intl:l});a({title:t||"",icon:(0,A.jsx)(Ho,{pageStore:n,theme:p,isSafariOrIOS:m,emojiType:(0,ra().e_)(d),currentUserId:u}),allowTabCompletion:!0})}}return(0,A.jsx)(pa().Z,{...e,store:n})},action:e=>{v().createAndCommit({userAction:"MentionMenu.getPageResultsMenuSection",environment:d,canUndo:!0,perform:n=>{uo().RL({environment:d,editorMode:"default",annotations:[["p",o]],transaction:n,menuListItemAction:e,query:t,serverEventProperties:i,mentionType:"page",resultId:o})}})}}})))),[u,d,l,m,t,g,a,p]),b=(0,i.useMemo)((()=>[...y,...x]),[y,x]),S=!(b.length>0)&&!h?ha.noPageResults:ha.linkToPage,M=(0,i.useMemo)((()=>(0,A.jsxs)(A.Fragment,{children:[l.formatMessage(S),(0,A.jsx)(fa,{show:h})]})),[l,h,S]),j=(0,i.useMemo)((()=>({key:"no page results",render:e=>(0,A.jsx)(Ut().Z,{...e,title:M,topBorder:n,isTitleUppercase:!0}),items:b})),[b,M,n]);return{pageResultsSection:j,isPageResultsLoading:h}}function fa(e){let{show:t}=e;const n=(0,ca().Z)(t,500,300);return(0,A.jsx)(Rn().Z,{style:{textAlign:"center",visibility:n?"visible":"hidden",display:"inline",marginLeft:8}})}const ha=(0,F().vU)({noPageResults:{defaultMessage:"No page results",id:"mentionMenu.noPageSearchResults.title"},linkToPage:{defaultMessage:"Link to page",id:"mentionMenu.pagesSection.title2"}});var ya=()=>n(816512),va=()=>n(499110),xa=()=>n(342792),ba=()=>n(369637),Sa=()=>n(882637),Ma=()=>n(122479),ja=()=>n(74582),Ca=()=>n(333023),wa=()=>n(864832);function ka(e,t){const{user:i,focused:a}=e,r=(0,o().O7)(),l=(0,F().YB)(),d=(0,Ie().yK)((e=>({icon:{width:17,height:17,fill:e.icon.secondary},tooltip:{color:e.text.quaternary,fontWeight:Pe().Ue.regular,maxWidth:240},tooltipHeader:{color:e.text.contrastPrimary,fontWeight:Pe().Ue.medium}})),[]),c=(0,ya().dp)(i),u=(0,ya().$4)(l,c),p=(0,s().VK)((()=>{const e=(0,It().np)();return!(e&&(0,Ca().gi)({store:e}))||"none"!==(0,Ma().rc)(i.id)}),[i.id]),m=(0,s().VK)((()=>{var e;return i.id===(null===(e=J().default.state.currentUserStore)||void 0===e?void 0:e.id)}),[i.id]),g=(0,s().VK)((()=>!bo().Z.getIsMockText()),[]),f=(0,s().VK)((()=>{if(!g)return;if(!a)return;if(p)return;const e=(0,It().np)(),t=e&&Boolean(ds().Z.get({userId:r.currentUser.id,key:ys(e.id)})),i=null==e?void 0:e.canAdmin();return!t&&i?(0,ms().C)(d.icon):(0,n(193384).j)(d.icon)}),[g,r.currentUser.id,p,a,d.icon]),h=(0,s().VK)((()=>{if(!g)return null;const e=i.email;return(0,A.jsxs)("div",{style:d.tooltip,children:[(0,A.jsx)("header",{style:d.tooltipHeader,children:(0,A.jsx)(Ta,{userName:u,userHasAccessToPage:p,userIsSelf:m})}),e]})}),[g,p,m,u,i.email,d.tooltip,d.tooltipHeader]);return(0,A.jsx)(n(523516).Z,{...e,ref:t,actor:c,right:f,tooltip:h,tooltipPlacement:g?C().Placement.Right:void 0,useEmailAsTooltip:!g})}const _a=i.forwardRef(ka);function Ta(e){let{userName:t,userHasAccessToPage:n,userIsSelf:i}=e;return i?(0,A.jsx)(F()._H,{defaultMessage:"You",id:"activitySection.authorPhrase.forOneAuthorCurrentUser.label"}):n?null:(0,A.jsx)(F()._H,{id:"mentionMenu.UserMentionMenuItem.noAccessTooltip",defaultMessage:"{userName} won't be notified because they don't have page access",values:{userName:t}})}var Ia=()=>n(828946);const Pa=75;function Aa(e,t,n){const{hasUserType:i,open:o}=(0,s().VK)((()=>({hasUserType:bo().Z.state.mentionTypes.user,open:bo().Z.state.open})),[]),a=(0,s().VK)((()=>Boolean(J().default.state.currentSpaceStore)),[]),r=(0,s().VK)((()=>bo().Z.state.emptyQueryUserRequestStore.state.result??[]),[]),[{value:l,status:d}]=(0,pe().r5)((async()=>o&&i&&a?async function(e,t,n,i){const o=0===e.trim().length;let s;s=o?i:await async function(e,t,n){if(xs().default.state.online){const i=await Ia().x.searchActions.load();return await i.searchVisibleSpaceUsers({environment:t,query:e,membersOnly:!1,minFuzzyScore:25,placeSelfFirst:i.isPersonalPronoun(e,n)})}return[]}(e,t,n);if(""===e){const e=4;return s.slice(0,e)}return s.slice(0,20)}(e,t,n.locale,r):[]),[o,i,a,e,t,n.locale,r],{debounce:Pa});return{results:l??[],isLoading:"pending"===d}}const Ra="__invite";function Za(e){const{topBorder:t,query:n,inviteTargetsStore:a,personPropertyInviteStore:r,mentionMenuCurrentMentionStore:l,setTemporaryInputData:d,templateVariableResults:c,formulaContextVariableResults:u,currentTeamResultStore:p}=e,m=(0,o().O7)(),f=(0,F().YB)(),{results:h,isLoading:y}=Aa(n,m,f),x=(0,s().VK)((()=>(0,It().np)()),[]),b=(0,s().VK)((()=>x&&Boolean(ds().Z.get({userId:m.currentUser.id,key:ys(x.id)}))),[m.currentUser.id,x]),S=(0,s().VK)((()=>bo().Z.state.mentionTypes.inviteUserToPage&&!b),[b]),M=Ns({templateVariableResults:c,category:"user",query:n,setTemporaryInputData:d}),j=Ws({formulaReturnType:"person",query:n,formulaContextVariableResults:u,setTemporaryInputData:d}),C=(0,s().VK)((()=>{const e=bo().Z.state.mentionTypes.team;return(0,_s().U)({isMobileNative:m.device.isMobileNative,disableExposureLogging:!0})&&e}),[m.device.isMobileNative]),w=(0,s().VK)((()=>!h.find((e=>e.email===n))&&bo().Z.state.mentionTypes.inviteUserToWorkspace),[n,h]),k=(0,s().VK)((()=>{var e;return null===(e=J().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),_=w||h.length>0||M.length>0||j.length>0||C,T=(0,s().VK)((()=>{if(!k||!p||!_)return;const e=f.formatMessage({id:"posts.teamMenuItem.everyoneMentionNoAmpersand",defaultMessage:"everyone"});return e.startsWith(n)?{key:"everyone-unique-item",render:t=>(t.focused&&d({title:e,icon:(0,A.jsx)(Oo,{}),allowTabCompletion:!0}),(0,i.createElement)(oa().Z,{...t,key:"everyone-unique-item",teamStore:p,renderAsEveryoneMention:!0})),action:e=>{v().createAndCommit({userAction:"MentionMenu.teamMention",environment:m,canUndo:!0,perform:t=>{uo().RL({environment:m,editorMode:"default",annotations:[g().p3r(p.id,k,"everyone")],transaction:t,menuListItemAction:e,query:n,mentionType:"team"})}})}}:void 0}),[_,p,m,f,n,d,k]),I=(0,s().VK)((()=>bo().Z.getIsMockText()),[]),P=(0,i.useMemo)((()=>["reply_menu_all_updates","reply_menu_archive","reply_menu_mentions_comments"]),[]),R=(0,s().VK)((()=>Sa().default.state.open&&P.includes(Sa().default.state.discussionLocation)),[P]),Z=!I&&!R,B=(0,s().VK)((()=>bo().Z.getMentionMenuContext()??jn().iU),[]),D=(0,s().VK)((()=>!!x&&((0,Ca().gi)({store:x})&&x.canAdmin())),[x]),L=(0,i.useCallback)((e=>!("none"!==(0,Ma().rc)(e))&&!m.device.isMobile&&Z&&!b&&D),[b,D,m.device.isMobile,Z]),O=(0,s().VK)((()=>bo().Z.state.open?bo().Z.state.flowId:void 0),[]),H=(0,i.useCallback)(((e,t,n,i)=>{t.reset(),n.reset(),O&&(t.setState({...t.state,tokenQuery:i}),n.setState({...n.state,flowId:O}),Qo().P0(e,{origin:bo().Z.getInviteOrigin(),invite_flow_id:O}),bo().Z.updateOpenState({showInvite:!0}))}),[O]),V=(0,s().VK)((()=>h.map((e=>{const t=e.id,o={key:t,render:n=>(n.focused&&d({title:(0,va().Nz)(f,e),icon:(0,A.jsx)(Oo,{}),allowTabCompletion:!0}),(0,i.createElement)(_a,{...n,key:t,user:e})),action:i=>{const o=(0,Ma().rc)(t);if(S&&"none"===o)l.setState({userId:t,userEmail:e.email,displayName:(0,ya().dp)(e).getDisplayName(f)}),bo().Z.updateOpenState({showMentionAndShare:!0});else if(v().createAndCommit({userAction:"MentionMenu.menuItem",environment:m,canUndo:!0,perform:t=>{uo().RL({environment:m,editorMode:"default",annotations:[(0,g().tEo)(e.id)],transaction:t,menuListItemAction:i,query:n,mentionType:"user"})}}),L(t)){const t=(0,xa().ZP)();ba().m2(function(e){const{environment:t,user:n,pageStore:i,intl:o,flowId:s,from:a}=e;return i&&ds().Z.set({userId:t.currentUser.id,key:ys(i.id),value:!0}),{id:`invite_${n.id}`,title:o.formatMessage(La.pageInviteToastTitle,{name:n.name??n.email}),jsxMessage:(0,A.jsx)(Ba,{user:n}),actions:{primary:{title:o.formatMessage(La.pageInviteToastInviteButton),onAction:()=>{if(!i)return;const o="read_and_write";v().createAndCommit({userAction:"MentionMenu.menuItem",environment:t,canUndo:!0,perform:e=>{us().l3({environment:t,transaction:e,store:i,permissionItems:[{type:"user_permission",role:o,user_id:n.id}],pagePermissionChangeLocation:"mention_share_menu",fromPermissionWrapper:"mention_menu",flowId:s})}}),ds().Z.set({userId:t.currentUser.id,key:ys(i.id),value:!1}),cs().jB(t,{role:o,is_space:!1,invite_targets:[{type:"existingUser",value:n}],is_onboarding:!1,invite_origin:"mention_menu",permission_items:[{type:"user_permission",role:o,user_id:n.id}],invite_message_length:0,invite_flow_id:s}),Da(t,{flow_id:s,selection:"invite",target_user_id:n.id,from:a}),ba().m2(function(e){const{user:t,intl:n,environment:i,pageStore:o,flowId:s,from:a}=e;return{id:`invite_${t.id}`,icon:ja().e,title:n.formatMessage(La.pageInviteSnackbarSuccessTitle),message:n.formatMessage(La.pageInviteSnackbarSuccessMessage),actions:{primary:{title:n.formatMessage(La.pageInviteUndo),onAction:()=>{v().createAndCommit({userAction:"MentionMenu.menuItem",environment:i,canUndo:!0,perform:e=>{o&&us().l3({environment:i,transaction:e,store:o,permissionItems:[{type:"user_permission",role:"none",user_id:t.id}],pagePermissionChangeLocation:"mention_share_menu",flowId:s})}}),ba().Xd(`invite_${t.id}`),function(e,t){(0,Tt().j)({environment:e,event:{eventName:"undo_invite_to_page_popup",eventProperties:t}}),ee().default.logEvent("undo_invite_to_page_popup",void 0,t)}(i,{flow_id:s,target_user_id:t.id,from:a})}}}}}(e))}},secondary:{title:o.formatMessage(La.pageInviteToastIgnoreButton),onAction:()=>{i&&(ba().Xd(`invite_${n.id}`),Da(t,{flow_id:s,selection:"dismiss",target_user_id:n.id,from:a}))}}}}}({environment:m,user:e,pageStore:x,intl:f,flowId:t,from:B})),function(e,t){(0,Tt().j)({environment:e,event:{eventName:"trigger_invite_to_page_popup",eventProperties:t}}),ee().default.logEvent("trigger_invite_to_page_popup",void 0,t)}(m,{flow_id:t,target_user_id:e.id,from:B})}}};return o})).concat(w&&_?[{key:Ra,action:()=>H(m,a,r,n),render:e=>(e.focused&&d({title:"",icon:(0,A.jsx)(Oo,{}),allowTabCompletion:!1}),(0,A.jsx)(Ht().Z,{...e,icon:(0,ms().C)({width:20}),title:n.length>0?(0,A.jsx)(F()._H,{defaultMessage:"Invite ”{query}”…",id:"mentionMenu.peopleSection.invitePrompt",values:{query:n}}):(0,A.jsx)(F()._H,{defaultMessage:"Invite…",id:"mentionMenu.peopleSection.invitePrompt.empty"})}))}]:[])),[L,m,H,f,a,B,l,x,r,n,d,w,S,_,h]),U=(0,i.useMemo)((()=>[...T?[T]:[],...j,...M,...V]),[T,j,M,V]),E=(0,i.useMemo)((()=>({key:"user results",render:e=>(0,A.jsx)(Ut().Z,{...e,title:(0,A.jsx)(F()._H,{defaultMessage:"People",id:"mentionMenu.peopleSection.title"}),topBorder:t,isTitleUppercase:!0}),items:U})),[U,t]);return{userResultsSection:E,isUserResultsLoading:y,numberOfUserResults:h.length}}function Ba(e){const{user:t}=e,n=(0,Ie().yK)((()=>{const e=(0,Jn().gh)({theme:"dark"});return{container:{display:"flex",flexDirection:"column",gap:4},tokenContainer:{paddingTop:4,paddingBottom:4},darkTooltip:{background:e.tooltipBackground,color:e.regularInvertedTextColor}}}),[]);return(0,A.jsxs)("div",{style:n.container,children:[(0,A.jsx)(Ue().Z,{overlayContainerZIndex:202,alignment:C().Alignment.Center,originGap:2,placement:C().Placement.Top,renderTooltip:()=>t.email,render:e=>(0,A.jsx)("div",{style:n.tokenContainer,...e,children:(0,A.jsx)(wa().vw,{userValue:t,isSingle:!0,shouldShrink:!0,format:wa().vw.Format.Medium})}),style:n.darkTooltip}),(0,A.jsx)("div",{children:(0,A.jsx)(F()._H,{...La.pageInviteToastMessage})})]})}function Da(e,t){(0,Tt().j)({environment:e,event:{eventName:"select_invite_to_page_popup",eventProperties:t}}),ee().default.logEvent("select_invite_to_page_popup",t.selection,t)}const La=(0,F().vU)({pageInviteToastTitle:{defaultMessage:"Invite to page?",id:"mentionMenu.UserMentionMenuItem.inviteToastTitle"},pageInviteToastMessage:{defaultMessage:"They won’t be notified unless you invite them to the page.",id:"mentionMenu.UserMentionMenuItem.inviteToastMessage"},pageInviteToastInviteButton:{defaultMessage:"Invite",id:"mentionMenu.UserMentionMenuItem.inviteToastInviteButton"},pageInviteToastIgnoreButton:{defaultMessage:"Ignore",id:"mentionMenu.UserMentionMenuItem.inviteToastIgnoreButton"},pageInviteSnackbarSuccessTitle:{defaultMessage:"Invite sent",id:"mentionMenu.UserMentionMenuItem.snackbarInviteSuccessTitle"},pageInviteSnackbarSuccessMessage:{defaultMessage:"They were notified and invited to edit the page.",id:"mentionMenu.UserMentionMenuItem.snackbarInviteSuccessMessage"},pageInviteUndo:{defaultMessage:"Undo",id:"mentionMenu.UserMentionMenuItem.undoToastMessage"}});var Oa=()=>n(446866);function Ha(e){const{numberOfUserResults:t,templateVariableResults:n,query:o}=e,a=o.length>0,r=(0,s().VK)((()=>bo().Z.state.open&&bo().Z.state.insertionType),[]),l=function(e){const{templateVariableResults:t,query:n,numberOfUserResults:i}=e,o=(0,s().VK)((()=>bo().Z.state.open),[]),a=(0,s().VK)((()=>bo().Z.state.open?bo().Z.state.sectionOrder:void 0),[]),r=function(e){const{numberOfUserResults:t,templateVariableResults:n,query:i}=e,o=t+n.length;if(""===i||o>0||(0,Oa().BZ)(i))return!0;const s=n.some((e=>(0,ks().i6)(e,"user")));if(s)return!0;return!1}({numberOfUserResults:i,templateVariableResults:t,query:n});if(o&&a)return a;if(r)return Ua;return Va}({numberOfUserResults:t,templateVariableResults:n,query:o});return(0,i.useMemo)((()=>{const e=l,t=(0,Cn().jj)([...e,...bo().K]),n=t.filter((e=>"createPage"!==e));return"+"===r?["createPage",...n]:"@"===r&&a||"[["===r?[...n,"createPage"]:t}),[a,r,l])}const Va=["date","page","team","group","heading","user"],Ua=["date","user","page","team","group","heading"];function Ea(e){const{query:t,clearSavedSelection:n,inviteTargetsStore:a,personPropertyInviteStore:r,mentionMenuCurrentMentionStore:l,mentionMenuCurrentFormulaStore:d,setTemporaryInputData:c}=e,u=(0,o().O7)(),p=(0,Ie().Fg)(),m=(0,o().MO)(),{expandSection:g,isOpen:h}=(0,s().VK)((()=>({isOpen:bo().Z.state.open,expandSection:bo().Z.state.open?bo().Z.state.expandSection:void 0})),[]),y=function(e){const t=(0,F().YB)();return(0,s().VK)((()=>bo().Z.state.mentionTypes.templateVariable),[])?(0,ks().XV)(e,t):[]}(t),v=function(e){const t=(0,s().VK)((()=>bo().Z.state.mentionTypes.formulaContextVariable),[]),{automationActionStore:n,typecheckResult:o}=(0,s().VK)((()=>({automationActionStore:Ts().Z.state.automationActionStore,typecheckResult:Ts().Z.state.typecheckResult})),[]),a=(0,i.useMemo)((()=>n&&o?(0,Cs().getContextValuesForAction)({value:o},n.id):(null==o?void 0:o.valueTypes)||[]),[n,o]),r=o&&t;return(0,i.useMemo)((()=>r?(0,ws().ZP)(e,a,(e=>e.kind!==Co().FormulaContextValueKind.ContextValue?"":e.name),{normalizeFuzzyScore:!0}):[]),[r,e,a])}(t),x=(0,i.useRef)(Va[0]),{pageResultsSection:b,isPageResultsLoading:S}=ga({query:t,topBorder:"page"!==x.current,setTemporaryInputData:c,formulaContextVariableResults:v}),M=Ys({templateVariableResults:y,formulaContextVariableResults:v,topBorder:"date"!==x.current,query:t,setTemporaryInputData:c}),j=ia({query:t,setTemporaryInputData:c,topBorder:"heading"!==x.current}),{teamResultsSection:C,currentTeamResultStore:w}=sa({topBorder:"team"!==x.current,environment:u,query:t,setTemporaryInputData:c}),{userResultsSection:k,isUserResultsLoading:_,numberOfUserResults:T}=Za({topBorder:"user"!==x.current,query:t,inviteTargetsStore:a,personPropertyInviteStore:r,mentionMenuCurrentMentionStore:l,setTemporaryInputData:c,templateVariableResults:y,formulaContextVariableResults:v,currentTeamResultStore:w}),I=Js({topBorder:"group"!==x.current,query:t,setTemporaryInputData:c}),P=Hs({topBorder:"createPage"!==x.current,query:t,clearSavedSelection:n,setTemporaryInputData:c}),R=function(e){const{mentionMenuCurrentFormulaStore:t,setTemporaryInputData:n,topBorder:i,formulaContextVariableResults:o}=e,a=o.filter((e=>e.kind===Co().FormulaContextValueKind.ContextValue&&"block"===e.type.type)),r=(0,s().VK)((()=>{const e=a.map((e=>{const i=(0,wo().NP)(e),o=(0,wo().WT)(e),s=(0,wo().RX)(e.type);return{action:zs(e,t),key:e.id,render:e=>(e.focused&&n({title:i,icon:(0,A.jsx)(Oo,{}),allowTabCompletion:!1}),(0,A.jsx)(Ks().Z,{...e,right:(0,Fs().o)({height:"auto",marginInlineStart:6,width:12}),svg:s,title:i,tooltipText:o}))}}));return(0,f().oA)(e)}),[a,t,n]);if(r.length>0)return{items:r,key:"formula property results",render:e=>(0,A.jsx)(Ut().Z,{...e,title:(0,A.jsx)(F()._H,{defaultMessage:"Property from",id:"mentionMenu.formulaPropertySection.title"}),topBorder:i})}}({mentionMenuCurrentFormulaStore:d,setTemporaryInputData:c,topBorder:"formula"!==x.current,formulaContextVariableResults:v}),Z=function(e){const{query:t,formulaContextVariableResults:n,setTemporaryInputData:i,topBorder:a}=e,r=(0,o().O7)(),l=(0,s().VK)((()=>qs({environment:r,formulaVariableFilter:e=>e.kind===Co().FormulaContextValueKind.ContextValue&&(0,wo().iT)(e),query:t,formulaContextVariableResults:n,setTemporaryInputData:i})),[r,n,t,i]);if(0!==l.length)return{items:l,key:"custom formula results",render:e=>(0,A.jsx)(Ut().Z,{...e,title:(0,A.jsx)(F()._H,{defaultMessage:"Custom",id:"mentionMenu.customFormulaVariables.title"}),topBorder:a})}}({query:t,formulaContextVariableResults:v,setTemporaryInputData:c,topBorder:"custom-formula"!==x.current}),B=(0,i.useMemo)((()=>({date:M,user:k,page:b,group:I,team:C,heading:j,createPage:P,formula:R,"custom-formula":Z,bot:void 0})),[M,k,b,I,C,j,P,R,Z]),D=Ha({templateVariableResults:y,numberOfUserResults:T,query:t});(0,i.useEffect)((()=>{const e=D.find((e=>void 0!==B[e]));x.current=e??D[0]}),[B,D]);const L=!_&&!S;(0,i.useEffect)((()=>{const e=js().default.DO_NOT_USE_markLegacy("rum.mention_menu_ready");L&&js().default.DO_NOT_USE_measureLegacy(e,{environment:u})}),[u,L]);const O=(0,i.useCallback)((e=>function(e){const{sectionName:t,menuSection:n,isOpen:i,expandSection:o,theme:s,isPhone:a}=e;if(!i||o===t)return n;const{items:r}=n,l=a||"heading"===t?3:5;if(r.length<=l)return n;const d=[...r.slice(0,l),{key:"show more",render:e=>(0,A.jsx)(Ht().Z,{...e,icon:(0,Ms().o)({width:16,fill:s.mediumTextColor}),title:(0,A.jsx)("span",{style:{color:s.mediumTextColor},children:(0,A.jsx)(F()._H,{defaultMessage:"{numberMore} more results",id:"mentionMenu.showMoreResultsButton.title",values:{numberMore:r.length-l}})})}),action:()=>{bo().Z.updateOpenState({expandSection:t})}}];return{...n,items:d}}({sectionName:e.sectionName,menuSection:e.menuSection,isPhone:m,isOpen:h,expandSection:g,theme:p})),[m,h,g,p]);return(0,i.useMemo)((()=>{const e=[];for(const t of D){const n=B[t];n&&e.push("createPage"===t?n:O({sectionName:t,menuSection:n}))}return e}),[D,B,O])}const Na=(0,F().vU)({noResults:{defaultMessage:"No results",id:"mentionMenu.noSearchResults.title"}}),Fa=(0,F().vU)({mentionAll:{defaultMessage:"Mention a person, page, or date…",id:"mentionMenu.personPageDate.prompt2"},mentionPersonPage:{defaultMessage:"Mention a person or page…",id:"mentionMenu.personPage.prompt2"},mentionPersonDate:{defaultMessage:"Mention a person or date…",id:"mentionMenu.personDate.prompt2"},mentionPageDate:{defaultMessage:"Mention a page or date…",id:"mentionMenu.pageDate.prompt2"},mentionPerson:{defaultMessage:"Mention a person…",id:"mentionMenu.person.prompt2"},mentionDate:{defaultMessage:"Mention a date…",id:"mentionMenu.date.prompt2"},mentionPage:{defaultMessage:"Type to link or add page…",id:"mentionMenu.page.prompt2"}}),Ka=i.memo((function(e){const{query:t,queryRef:n,clearSavedSelection:i,inviteTargetsStore:o,personPropertyInviteStore:s,mentionMenuCurrentMentionStore:a,mentionMenuCurrentFormulaStore:r}=e;return(0,A.jsx)(za,{query:t,queryRef:n,clearSavedSelection:i,inviteTargetsStore:o,personPropertyInviteStore:s,mentionMenuCurrentMentionStore:a,mentionMenuCurrentFormulaStore:r})}));function za(e){let{query:t,queryRef:a,clearSavedSelection:r,inviteTargetsStore:l,personPropertyInviteStore:d,mentionMenuCurrentMentionStore:c,mentionMenuCurrentFormulaStore:u}=e;const p=(0,F().YB)(),m=(0,o().O7)(),g=(0,s().Kw)(bo().Z),f=(0,s().VK)((()=>xs().default.state.online),[]),h=Boolean(g.open&&g.usePopupOnMobile),y=Ko(a),v=Ea({clearSavedSelection:r,query:t,inviteTargetsStore:l,personPropertyInviteStore:d,mentionMenuCurrentMentionStore:c,mentionMenuCurrentFormulaStore:u,setTemporaryInputData:y}),b=(0,n(76225).Ij)();let M;(0,i.useEffect)((()=>{if(!f)return;const e=g.mentionTypes.user,t=g.mentionTypes.page,n=g.mentionTypes.date;let i="";e&&t&&n?i=p.formatMessage(Fa.mentionAll):e&&t?i=p.formatMessage(Fa.mentionPersonPage):e&&n?i=p.formatMessage(Fa.mentionPersonDate):t&&n?i=p.formatMessage(Fa.mentionPageDate):e?i=p.formatMessage(Fa.mentionPerson):n?i=p.formatMessage(Fa.mentionDate):t&&g&&(i=g.open&&"+"===g.insertionType?p.formatMessage(Ss.addPage):p.formatMessage(Fa.mentionPage)),y({title:i,icon:(0,A.jsx)(Bo,{insertionType:g.open?g.insertionType:"+"}),allowTabCompletion:!1})}),[f,y,p,g]),f||(M=(0,A.jsx)(bs().Z,{title:(0,A.jsx)(F()._H,{defaultMessage:"Please go online to mention a person or page.",id:"mentionMenu.offlineMessage"})}));const{device:j}=m,C=(0,s().VK)((()=>Uo()),[]),w=es(m,a);let k;k=ts({usePopupOnMobile:h})?{menuType:S().o.ActionSheet,disableBottomPadding:!0,height:`calc(70vh - ${b}px)`}:{menuType:S().o.Popup,width:C,maxHeight:j.isMobile?"30vh":"40vh",onClickOutside:w};const _=(0,i.useCallback)((e=>{(function(e){return""===e})(a.current??"")&&(e.preventDefault(),w())}),[a,w]);return(0,A.jsxs)(x().Z,{...k,header:M,children:[(0,A.jsx)(nt().Z,{debugName:"MentionMenu",capture:g.open,onBackspace:_}),(0,A.jsx)(Vt().Z,{type:Vt().i.Vertical,initialFocus:Wa(t),sections:v,onEmptyEnter:w,resetInitialFocusOnSectionChange:!0,performHandleEnterOnTab:!0}),0===v.length&&(0,A.jsx)(Ut().Z,{children:(0,A.jsx)(bs().Z,{title:(0,A.jsx)(F()._H,{...Na.noResults})})})]})}function Wa(e){if(""!==e)return 0}function qa(){const e=(0,o().O7)(),t=(0,s().Kw)(bo().Z),n=t.open&&t.showCreateIn,a=t.open&&t.showInvite,r=t.open&&t.showMentionAndShare,l=t.open&&t.showFormulaProperty,d=Boolean(t.open&&t.usePopupOnMobile),c=(0,s().qz)(void 0,ho().ZP),u=(0,s().qz)(void 0,fo().Z),p=(0,s().qz)(void 0,Yo),m=(0,s().qz)(void 0,xo),g=(0,s().VK)((()=>{if(t.open)return j().O2(t.textStore,t.oldTextValue,t.isEmptyPageTitle?"":t.insertionType)}),[t]),f=(0,s().VK)((()=>{if(g&&t.open)return j().ug(t.textStore,g)}),[g,t]),h=(0,s().VK)((()=>$o(e,f)),[e,f]),y=(0,i.useRef)(h);(0,i.useEffect)((()=>{y.current=h}),[h]);const v=(0,s().VK)((()=>!!t.open&&("+"!==t.insertionType||""!==h)),[h,t]),x=(0,s().VK)((()=>It().np()),[]),k=v&&(x&&(n||a)||r),{clearSavedSelection:T,getSavedSelection:I}=(0,go().Z)({shouldPreserveTextSelection:k,shouldPreserveBlockSelection:!1,shouldRestoreSelection:k});(0,i.useEffect)((()=>{const e=bo().Z.state;if(e.open){var t;const n=_().default.state,i="editing"===n.mode?(0,M().QY)(n.multiSelection):void 0,o=(null==i?void 0:i.store)===e.textStore,s=I().textSelectionState,a=s&&"editing"===s.mode&&(null===(t=(0,M().QY)(s.multiSelection))||void 0===t?void 0:t.store)===e.textStore;if(!o&&!a)return void uo().xv();const r=o&&(null==i?void 0:i.selection);if(g&&r&&(r.startIndex<g.filter.startIndex||r.endIndex>g.filter.endIndex))return void uo().xv();const l=f&&f[0];if("+"===e.insertionType&&l&&!(0,mo().D_)(l))return void uo().xv();if("@"===e.insertionType&&l&&(0,mo().cb)(l))return void uo().xv();if(void 0===f&&!e.isEmptyPageTitle)return void uo().xv()}}),[f,I,g]);const{device:P}=e,[R,Z]=(0,i.useState)(void 0),B=po().Z.getSize(),D=(0,s().VK)((()=>{if(P.isMobile&&0!==B)return po().Z.find((e=>e.isCaptured()))}),[P,B]);(0,i.useEffect)((()=>{const e=null==D?void 0:D.getNode();if(e){const t=new(So().E);return t.observe(e),t.rect.addListener((e=>{Z({height:`calc(100vh - ${e.state.height}px)`})})),()=>t.destroy()}}),[D]);const L=ts({usePopupOnMobile:d}),O=L?w().k.SlideUp:w().k.Popup,H=es(e,y);return(0,A.jsx)(b().ZP,{popupType:O,open:v,originRect:t.open?t.selectionRect?{...t.selectionRect,left:t.selectionRect.left-22}:t.selectionRect:void 0,slideUpWrapStyle:R,placementToOrigin:C().Placement.Bottom,alignmentToOrigin:C().Alignment.Start,originGap:12,disableMouseCapture:!a,disableContentScroll:!0,onDismiss:H,disableDarkOverlayBackground:P.isMobile,keepFocus:!0,render:()=>P.isMobile?(0,A.jsxs)(A.Fragment,{children:[!r&&(0,A.jsx)(Ka,{query:h,queryRef:y,clearSavedSelection:T,inviteTargetsStore:c,personPropertyInviteStore:u,mentionMenuCurrentMentionStore:p,mentionMenuCurrentFormulaStore:m}),(0,A.jsx)(b().ZP,{popupType:w().k.SlideUp,render:()=>(0,A.jsx)(is,{clearSavedSelection:T,filter:f}),open:n,keepFocus:!0}),(0,A.jsx)(b().ZP,{popupType:w().k.SlideUp,render:()=>(0,A.jsx)(rs,{inviteTargetsStore:c,personPropertyInviteStore:u,filter:f}),open:a,keepFocus:!0}),(0,A.jsx)(b().ZP,{popupType:O,render:()=>(0,A.jsx)(vs,{mentionMenuCurrentMentionStore:p,menuPopupType:L?S().o.ActionSheet:S().o.Popup}),open:r,keepFocus:!0,originRect:t.open?t.selectionRect:void 0,slideUpWrapStyle:R,placementToOrigin:C().Placement.Bottom,alignmentToOrigin:C().Alignment.Start,originGap:12,isFullWidthOnMobile:!0}),(0,A.jsx)(b().ZP,{keepFocus:!0,open:l,popupType:w().k.SlideUp,render:()=>(0,A.jsx)(Wo,{mentionMenuCurrentFormulaStore:m,queryRef:y})})]}):n?(0,A.jsx)(is,{clearSavedSelection:T,filter:f}):a?(0,A.jsx)(rs,{inviteTargetsStore:c,personPropertyInviteStore:u,filter:f}):r?(0,A.jsx)(vs,{mentionMenuCurrentMentionStore:p,menuPopupType:S().o.Popup}):l?(0,A.jsx)(Wo,{mentionMenuCurrentFormulaStore:m,queryRef:y}):(0,A.jsx)(Ka,{query:h,queryRef:y,clearSavedSelection:T,inviteTargetsStore:c,personPropertyInviteStore:u,mentionMenuCurrentMentionStore:p,mentionMenuCurrentFormulaStore:m})})}var Ga=()=>n(574089);const Ya=function(){const e=(0,o().O7)(),t=(0,i.useRef)(void 0);return(0,i.useEffect)((()=>{const n=t=>{var n;if(null!==(n=t.dataTransfer)&&void 0!==n&&n.types.includes("application/x.notion.tab-id"))return t.dataTransfer.dropEffect="move",void t.preventDefault();t.preventDefault(),function(e,t){const n=Ga().f$(t,{startX:e.clientX,startY:e.clientY,stores:[],isNativeDrag:!0,getGhostElement:void 0});n&&oi().ZH({environment:t})}(t,e),i(t)},i=f().P2((n=>{t.current&&window.clearTimeout(t.current),t.current=window.setTimeout(Xa,function(e){const{device:t}=e;if(t.isLinux)return 2e3;if(t.isIOS&&ee().default.checkGate({gateName:"ios_native_drag_handler_delay"}))return 1e3;return 200}(e),e),Ga().td(e,{currentX:n.clientX,currentY:n.clientY})}),$a),o=t=>{!function(e,t){e.preventDefault();const n=Array.from(e.dataTransfer.files);n.length>0&&Ga()._4({environment:t,files:n,analyticsFrom:"native_drag"})}(t,e)};return window.addEventListener("dragover",n),window.addEventListener("drop",o),()=>{window.removeEventListener("dragover",n),window.removeEventListener("drop",o)}}),[e]),null},$a=62.5;function Xa(e){Ga().cQ(e)}var Qa=()=>n(614027),Ja=()=>n(505462),er=()=>n(64260);const tr=function(){const e=(0,o().O7)(),t=(0,s().VK)((()=>{const e=_().default.state;if("editing"!==e.mode)return null;const t=(0,M().QY)(e.multiSelection);if(!t)return null;const{store:n,selection:i}=t;if(i.endIndex!==i.startIndex+1)return null;const o=n.getValue(),s=g().b1T(o,i.startIndex);if(!s||!g().eOb(s))return null;const[a]=g().jDe([s]);return{pageId:a,store:n}}),[]),n=(0,i.useCallback)((()=>(0,A.jsx)(nr,{pageMentionTokenStoreState:t})),[t]);if(e.device.isMobile)return null;const a=Ja().getSelectionRect();return(0,A.jsx)(Ue().Z,{render:()=>{},renderTooltip:n,originRect:a,forceVisibleState:Boolean(t&&a),placement:C().Placement.Bottom})};function nr(e){let{pageMentionTokenStoreState:t}=e;const n=(0,Ie().Fg)(),s=(0,o().O7)(),a=(0,i.useCallback)((e=>function(e,t,n){if(!n)return;const{pageId:i,store:o}=n;if(!i)return;e.preventDefault();const s=te().G.createChildStore(o,{table:jn().iU,id:i});As()._c({store:s,environment:t,visitType:Qa().vu.Link,openInNew:"tab",pageVisitSource:V().tY.MentionInPage})}(e,s,t)),[s,t]),r=(0,i.useCallback)((e=>function(e,t,n){if(!n)return;const{pageId:i,store:o}=n;if(!i)return;e.preventDefault&&e.preventDefault();const s=te().G.createChildStore(o,{table:jn().iU,id:i});As()._c({store:s,environment:t,visitType:Qa().vu.Link,pageVisitSource:V().tY.MentionInPage})}(e,s,t)),[s,t]);return(0,A.jsx)(nt().Z,{debugName:"PageMentionOverlay",capture:!0,onEnter:r,onCommandEnter:a,children:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(F()._H,{defaultMessage:"Open page",id:"pageMentionOverlay.openPage"}),(0,A.jsx)("div",{children:(0,A.jsx)(er().Z,{onlyShowFirst:!0,name:"enter",style:{color:n.mediumInvertedTextColor}})})]})})}var ir=()=>n(951109),or=()=>n(794923);function sr(){const e=(0,F().YB)(),t=(0,Ie().Fg)(),n=(0,o().O7)(),{device:a}=n,r=(0,s().VK)((()=>or().default.state.blockStore),[]),l=(0,s().VK)((()=>null==r?void 0:r.getTitleStore()),[r]),d=(0,s().VK)((()=>(null==r?void 0:r.canEdit())??!1),[r]),c=(0,s().VK)((()=>{var t;return(null==r||null===(t=r.getModel())||void 0===t?void 0:t.getEmptyTitlePlaceholder({getRecordModel:r.getRecordModel,userTimeZone:(0,U().r)(),intl:e}))??""}),[r,e]);if((0,i.useEffect)((()=>{const{blockStore:e}=or().default.state;if(!e)return;const t=e.getTitleStore();t&&Re().selectAllText({environment:n,store:t,canSelectAllBlocks:!1})}),[n]),!r||!l)return null;let u;return u=a.isMobile?{menuType:S().o.ActionSheet}:{menuType:S().o.Popup,width:380},(0,A.jsx)(x().Z,{...u,children:(0,A.jsx)("div",{style:rr(t),children:(0,A.jsx)(Ee().Z,{store:l,disabled:!d,onEsc:()=>ir().x(n),onEnter:()=>ir().x(n),disableSlashCommands:!0,disableEmojiCommands:!0,disableSelectAllBlocks:!0,disableSelectionDrag:!0,placeholder:c,style:lr(t),pasteBehavior:"inline",inPageFind:Be().B3.none})})})}const ar=function(){const e=(0,o().O7)(),{device:t}=e,{blockStore:n,originRect:i}=(0,s().VK)((()=>{const{blockStore:e,originRect:t}=or().default.state;return{blockStore:e,originRect:t}}),[]);return(0,A.jsx)(b().ZP,{popupType:t.isMobile?w().k.SlideUp:w().k.Popup,open:Boolean(n),originRect:i,placementToOrigin:C().Placement.Bottom,alignmentToOrigin:C().Alignment.Center,originGap:4,onDismiss:()=>ir().x(e),render:()=>(0,A.jsx)(sr,{})})};function rr(e){return{display:"flex",alignItems:"center",color:e.regularTextColor,fontSize:"13px",padding:"4px 8px"}}function lr(e){return{display:"flex",alignItems:"center",flexGrow:1,fontSize:14,lineHeight:"20px",paddingTop:4,paddingBottom:4,paddingLeft:10,paddingRight:10,width:"100%",borderRadius:4,boxShadow:e.inputBoxShadow,background:e.inputBackground,cursor:"text",position:"relative"}}var dr=()=>n(636340),cr=()=>n(547586),ur=()=>n(739479),pr=()=>n(795820),mr=()=>n(943620);function gr(e){const t=(0,F().YB)(),n=(0,o().O7)(),{device:a}=n,r=(0,s().VK)((()=>pr().default.state.clonedBlockStore),[]),l=(0,s().VK)((()=>null==r?void 0:r.getTitleStore()),[r]),d=(0,s().VK)((()=>(null==r?void 0:r.canEdit())??!1),[r]),c=(0,s().VK)((()=>{var e;if(r)return null===(e=r.getModel())||void 0===e?void 0:e.getEmptyTitlePlaceholder({getRecordModel:r.getRecordModel,userTimeZone:(0,U().r)(),intl:t})}),[r,t]);(0,i.useEffect)((()=>{if(!r)return;const e=r.getTitleStore();e&&Re().selectAllText({environment:n,store:e,canSelectAllBlocks:!1})}),[r,n]);const u=(0,Ie().yK)((e=>({wrapper:{display:"flex",alignItems:"center",color:e.regularTextColor,fontSize:"13px",padding:"4px 8px"},input:{display:"block",flexGrow:1,fontSize:14,lineHeight:"20px",paddingTop:4,paddingBottom:4,paddingLeft:10,paddingRight:10,width:"100%",borderRadius:4,boxShadow:e.inputBoxShadow,background:e.inputBackground,cursor:"text",position:"relative"}})),[]);if(!r||!l)return null;const{renderDelete:p}=e;let m;return m=a.isMobile?{menuType:S().o.ActionSheet}:{menuType:S().o.Popup,width:380},(0,A.jsx)(x().Z,{...m,children:(0,A.jsxs)("div",{style:u.wrapper,children:[(0,A.jsx)(vr,{blockStore:r}),(0,A.jsx)(Ee().Z,{store:l,disabled:!d,onEsc:()=>cr().x(n),onEnter:()=>cr().x(n),disableSlashCommands:!0,disableEmojiCommands:!0,disableSelectAllBlocks:!0,disableSelectionDrag:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,placeholder:c,style:u.input,pasteBehavior:"inline",inPageFind:Be().B3.none}),p&&d&&(0,A.jsx)(hr,{})]})})}const fr=function(){const e=(0,o().O7)(),{device:t}=e,{clonedBlockStore:n,originRect:i}=(0,s().VK)((()=>{const{clonedBlockStore:e,originRect:t}=pr().default.state;return{clonedBlockStore:e,originRect:t}}),[]);return(0,A.jsx)(b().ZP,{popupType:t.isMobile?w().k.SlideUp:w().k.Popup,open:Boolean(n),originRect:i,placementToOrigin:C().Placement.Bottom,alignmentToOrigin:C().Alignment.Center,originGap:4,onDismiss:()=>cr().x(e),render:()=>(0,A.jsx)(yr,{})})};function hr(){const e=(0,o().O7)();return(0,A.jsx)(Ve().Z,{ariaLabel:"Delete",icon:e=>(0,ur().y)({height:20,width:20,...e}),style:{marginLeft:6},hasBackground:!0,isDarkIconColor:!0,showShadow:!0,onClick:async()=>{const{originalBlockStore:t}=pr().default.state;t&&await ii().Qw({environment:e,blocks:[t],shouldCheckSuggestEdit:!0}),cr().x(e)}})}function yr(){const e=(0,s().VK)((()=>pr().default.state.renderDelete),[]);return(0,A.jsx)(gr,{renderDelete:Boolean(e)})}function vr(e){let{blockStore:t}=e;const n=(0,Ie().Fg)(),i=(0,o().O7)(),a={width:28,height:28,marginRight:6,flexShrink:0,flexGrow:0,boxShadow:`inset 0 0 0 1px ${n.darkDividerColor}`},r=(0,s().VK)((()=>t.canEdit()),[t]),l=(0,s().VK)((()=>{var e;return null===(e=t.getIconStore())||void 0===e?void 0:e.table}),[t]),d=(0,s().VK)((()=>{var e;return null===(e=t.getIconStore())||void 0===e?void 0:e.id}),[t]),c=(0,s().VK)((()=>t.getIcon()),[t]),u=(0,s().VK)((()=>t.isEmptyPage()),[t]),p=(0,s().VK)((()=>t.getType()),[t]);return r?(0,A.jsx)(mr().Z,{disabled:!1,bucket:"secure",store:t,icon:c,isEmptyPage:u,size:18,style:a,iconLoggingData:{recordTable:l,source:"breadcrumb",block_type:p,collection_id:"collection"===l?d:void 0},onChange:e=>function(e,t){const{clonedBlockStore:n}=pr().default.state;if(n){const i=n.getIconStore();i&&v().createAndCommit({userAction:"RenamePageMenuPopup.handleRecordIconChange",environment:t,canUndo:!0,perform:t=>{dr().sO({store:i,value:e,transaction:t})}})}}(e,i)}):(0,A.jsx)(mr().Z,{disabled:!0,icon:c,isEmptyPage:u,size:18,style:a})}n(916054);var xr=()=>n(657320),br=()=>n(532850),Sr=()=>n(752778),Mr=()=>n(790082),jr=()=>n(5244);function Cr(e){const{clientSkill:t}=e,n=(0,F().YB)(),i=(0,s().VK)((()=>n.formatMessage(t.displayName)),[t,n]);return(0,A.jsx)(A.Fragment,{children:i})}var wr=()=>n(986631);function kr(e){if(e.inMemoryRecordCache.isMockTextStore){const t=e.getRecordStoreAtRootPath();if(t.table===jn().iU){if("automation_id"in t.getProperties())return!0}}return Boolean(e.findRecordStoreUIAncestor((e=>e instanceof te().zq||e instanceof te().Mz)).ancestor)}var _r=()=>n(154186);function Tr(e){const t=(0,o().O7)(),{isMobile:s}=(0,o().Fy)(),a=(0,i.useRef)(null),r=async()=>{const i=_().default.state;if("empty"===i.mode)return;const o=await n(141735).F.formulas.load();n(604068).Bf({environment:t,blockStore:e.blockStore,multiSelection:i.multiSelection,formulasModule:o})};return(0,A.jsx)(Ue().Z,{renderTooltip:()=>(0,A.jsx)("div",{children:(0,A.jsx)(F()._H,{defaultMessage:"React to selected text",id:"inlineReactionButton.tooltip"})}),render:t=>(0,A.jsxs)(_r().Z,{ref:a,style:{display:"flex",justifyContent:"center",alignItems:"center",padding:e.iconOnly?6:"0 10px",whiteSpace:"nowrap",...e.style},disabled:e.disabled,disabledFeedback:e.disabled,onClick:r,...t,children:[(0,n(954593).V)({width:s?22:20,height:s?22:20,marginTop:s?0:1,marginRight:e.iconOnly?0:4}),!s&&!e.iconOnly&&(0,A.jsx)(F()._H,{defaultMessage:"React",id:"inlineReactionButton.reactLabel"})]})})}Tr.displayName="InlineReactionButton";const Ir=Tr;var Pr=()=>n(53060),Ar=()=>n(271308),Rr=()=>n(191586),Zr=()=>n(465371);const Br=(0,li().IU)("bold",{viewBox:"0 0 16 16",svg:(0,A.jsx)("g",{children:(0,A.jsx)("path",{d:"M5.067 13.014c-.772 0-1.223-.451-1.223-1.238V4.36c0-.786.45-1.237 1.223-1.237h3.5c1.949 0 3.131.943 3.131 2.488 0 1.1-.793 1.97-1.948 2.12v.061c1.401.068 2.4 1.046 2.4 2.386 0 1.716-1.347 2.837-3.466 2.837H5.067zm1.238-5.81h1.34c1.025 0 1.633-.459 1.633-1.225 0-.738-.553-1.168-1.483-1.168h-1.49v2.392zm0 4.142h1.6c1.148 0 1.742-.472 1.742-1.347 0-.854-.642-1.32-1.804-1.32H6.305v2.667z"})})});var Dr=()=>n(615634),Lr=()=>n(363253),Or=()=>n(737484);const Hr=(0,li().IU)("italic",{viewBox:"0 0 16 16",svg:(0,A.jsx)("g",{children:(0,A.jsx)("path",{d:"M5.02 13.014c-.397 0-.67-.24-.67-.63 0-.382.266-.614.663-.614H6.42l1.593-7.404H6.612c-.396 0-.67-.239-.67-.629 0-.383.267-.615.663-.615h4.382c.397 0 .663.232.663.615 0 .39-.273.63-.67.63H9.586l-1.6 7.403h1.409c.396 0 .663.232.663.615 0 .39-.274.629-.67.629H5.02z"})})});var Vr=()=>n(599631);const Ur=(0,li().IU)("strikethrough",{viewBox:"0 0 16 16",svg:(0,A.jsx)("g",{children:(0,A.jsx)("path",{d:"M7.973 13.191a5.695 5.695 0 01-1.75-.253 3.694 3.694 0 01-1.306-.71 2.376 2.376 0 01-.71-1.101 1.514 1.514 0 01-.062-.424c0-.205.061-.369.184-.492a.71.71 0 01.513-.185c.155 0 .28.034.376.103a.92.92 0 01.273.328c.128.296.31.554.547.772.237.215.52.379.848.493.328.114.69.17 1.087.17.45 0 .847-.066 1.19-.198.345-.136.614-.321.806-.553.196-.237.294-.506.294-.807 0-.383-.15-.688-.451-.916-.301-.232-.796-.43-1.484-.595L7.043 8.53c-.939-.21-1.636-.528-2.092-.957-.451-.433-.677-.998-.677-1.695 0-.574.158-1.082.472-1.524.32-.443.757-.787 1.313-1.033.556-.25 1.191-.376 1.907-.376.601 0 1.148.09 1.64.267.497.173.91.415 1.238.725.328.31.547.67.656 1.08a.82.82 0 01.034.177c.01.055.014.11.014.164a.625.625 0 01-.185.472c-.123.119-.29.178-.499.178-.287 0-.506-.132-.656-.397a2.244 2.244 0 00-.506-.745 1.98 1.98 0 00-.752-.458 2.897 2.897 0 00-.984-.157c-.406 0-.766.064-1.08.191a1.742 1.742 0 00-.745.527 1.233 1.233 0 00-.267.78c0 .36.148.648.444.867.301.214.784.399 1.45.554l1.169.267c1.016.227 1.756.553 2.221.977.47.42.704.998.704 1.736 0 .611-.162 1.147-.485 1.607-.32.456-.77.809-1.354 1.06-.578.25-1.262.375-2.05.375zM2.552 8.386a.363.363 0 01-.267-.11.378.378 0 01-.11-.266c0-.1.037-.187.11-.26a.352.352 0 01.267-.116h10.89c.104 0 .193.039.266.116.073.073.11.16.11.26s-.037.189-.11.266a.363.363 0 01-.267.11H2.551z"})})}),Er=(0,li().IU)("underline",{viewBox:"0 0 16 16",svg:(0,A.jsx)("g",{children:(0,A.jsx)("path",{d:"M8 13.191c-.843 0-1.572-.152-2.188-.458a3.46 3.46 0 01-1.421-1.292c-.333-.551-.5-1.191-.5-1.92V3.724c0-.242.071-.431.213-.568.14-.141.33-.212.567-.212.246 0 .44.071.58.212.147.137.22.326.22.568v5.653c0 .488.098.914.294 1.278.2.36.49.64.868.841.378.2.834.3 1.367.3.798 0 1.417-.22 1.86-.662.446-.442.67-1.028.67-1.757V3.724c0-.242.07-.431.211-.568.142-.141.33-.212.568-.212.246 0 .44.071.58.212.147.137.22.326.22.568V9.52c0 .729-.167 1.369-.5 1.92-.332.552-.809.982-1.428 1.292-.616.306-1.342.458-2.181.458zm-3.623 2.174a.487.487 0 01-.349-.136.464.464 0 01-.136-.342c0-.137.045-.25.136-.342a.487.487 0 01.349-.137h7.24c.14 0 .257.046.348.137a.453.453 0 01.143.342c0 .136-.048.25-.143.341a.472.472 0 01-.349.137H4.377z"})})});var Nr=()=>n(105649),Fr=()=>n(35982),Kr=()=>n(95718),zr=()=>n(279386),Wr=()=>n(72041),qr=()=>n(886970),Gr=()=>n(855249),Yr=()=>n(591051),$r=()=>n(495699),Xr=()=>n(79555),Qr=()=>n(149809),Jr=()=>n(448419),el=()=>n(161035),tl=()=>n(244540),nl=()=>n(275023);function il(e){const t=(0,o().O7)(),{isMobile:n}=(0,o().Fy)(),a=(0,s().VK)((()=>"suggest"===zr().MT.getMode(e.blockStore)),[e.blockStore]),r=()=>{const n=e.blockStore.getRecordStoreUIRoot();n&&n instanceof te().G&&n.isNavigableBlock()&&tl().t_({environment:t,navigableBlockStore:n,mode:a?"default":"suggest",location:"rich_text_menu"})},l=(0,Ie().yK)((t=>({button:{display:"flex",alignItems:"center",padding:e.iconOnly?6:"0 10px",whiteSpace:"nowrap",color:a?t.blueColor:t.icon.primary,...e.style},icon:{width:n?18:16,height:n?18:16,marginTop:n?0:1,marginRight:e.iconOnly?0:4}})),[n,a,e.iconOnly,e.style]);return(0,A.jsx)(Ue().Z,{renderTooltip:()=>(0,A.jsxs)(i.Fragment,{children:[(0,A.jsx)("div",{children:a?(0,A.jsx)(F()._H,{defaultMessage:"Turn off suggesting",id:"inlineSuggestButton.tooltipDisable"}):(0,A.jsx)(F()._H,{defaultMessage:"Suggest edits",id:"inlineSuggestButton.tooltipEnable"})}),(0,A.jsx)("div",{})]}),render:t=>(0,A.jsxs)(_r().Z,{style:l.button,disabled:e.disabled,disabledFeedback:e.disabled,onClick:r,...t,children:[(0,nl().I)(l.icon),!n&&!e.iconOnly&&(a?(0,A.jsx)(F()._H,{defaultMessage:"Suggesting",id:"inlineSuggestButton.suggestingLabel"}):(0,A.jsx)(F()._H,{defaultMessage:"Suggest",id:"inlineSuggestButton.suggestLabel"}))]})})}var ol=()=>n(675876),sl=()=>n(393322),al=()=>n(284831);function rl(){var e;if(!(0,O().E)("selectable_word_count"))return null;const t=null===(e=Ja().get())||void 0===e?void 0:e.cloneContents(),n=t?ll(t):0;return 0===n?null:(0,A.jsx)("div",{style:{justifyContent:"center",alignSelf:"center",whiteSpace:"pre-wrap",padding:"0px 6px"},children:(0,A.jsx)(F()._H,{id:"richTextMenu.wordCount",defaultMessage:"{count, plural, one {# word} other {# words}}",values:{count:n}})})}function ll(e){if(0===e.childNodes.length)return 0;let t=0;for(let n=0;n<e.childNodes.length;n++){const i=e.childNodes[n];i.childNodes.length>0?t+=ll(i):i.textContent&&(t+=(0,Ze().WF)(i.textContent))}return t}const dl={[$e().Ti.button]:new Set(["showActionButton","showCompletions","showDiscuss","showReact","showSuggest","showTurnInto"]),[$e().Ti.code]:new Set(["showCode","showCompletions"]),[$e().Ti.table]:new Set(["showTurnInto","showActionButton","showCompletions"]),[$e().Ti.tableRow]:new Set(["showTurnInto","showActionButton","showCompletions"])},cl={[$e().Ti.factory]:!0};const ul=function(){const e=(0,xr().l)(),t=(0,o().O7)(),a=(0,o().Fy)(),r=(0,s().Kw)(Yr().Z),{isActive:l,blockTarget:d,isAnimatingClosed:c}=r,u=(0,s().VK)((()=>J().default.state.mainEditorCurrentBlockStore),[]),p=(0,s().VK)((()=>Bt().KR.isRichTextMenuSuggestionEnabled()),[]),[m,g]=(0,i.useState)(void 0),h=(0,i.useCallback)((()=>{var e;if(!p||!u)return;const n=(0,Mt().filterAndRankAssistantSurfaceActionsForContext)((0,Mt().clientSkillToAssistantSurfaceAction)((0,jt().getAllClientSkills)({currentPageRecordPointer:void 0,currentCollectionRecordPointer:void 0})),{type:"entrypoint",entrypoint:"richTextMenu",pageStore:u,selectionState:Ot().default.state,textSelectionState:_().default.state,isMobile:t.device.isMobile,userSettings:null===(e=J().default.state.currentUserSettingsStore)||void 0===e?void 0:e.getSettings()});return n.length?n[0]:void 0}),[p,u,t]),y=(0,s().VK)((()=>{const t=d,i=_().default.state;if(!l||"empty"===i.mode)return;const{multiSelection:o}=i,s=(0,Ar().L5)(o),a=s.map((e=>{let{editable:t}=e;return t.getContextClosestSelectableStore()})),r=(0,M().qS)(o),c=_().default.isEditingComment(),u=_().default.isEditingFormQuestion(),p=t&&"form"===t.getType(),g=u||p,f=_().default.isEditingCaption(),h=t&&t.getParentTable()===Sr().vF,y=r&&t&&o.start.store===t.getCollectionViewSourceDescriptionStore(),v=n(942226).Tx(),x=e&&e.publicEditModeStore.state,b=!(0,Ma().Ix)(x)&&(o.start.store.canEdit()&&o.end.store.canEdit()),S=t&&"suggest"===zr().MT.getMode(t),j=ee().default.checkGate({gateName:"block_reactions"}),C=a.some(((e,t)=>{const n=s[t].store.table===Xn().x_&&!s[t].editable.props.disabled;return!!e&&(e.isLocked()||e.isNavigableAncestorLocked())&&!n})),w=b&&!C,k=t&&t.getType(),T=k&&dl[k],I=null==t?void 0:t.isType("button"),P=(0,wr().t)(o.start.store)||(0,wr().t)(o.end.store),A=kr(o.start.store)||kr(o.end.store);let R=!1;const Z=Me().Z.state.isOpen?Me().Z.state:je().Z.state.isOpen?je().Z.state:void 0;if(Z){const e=Z.store.getParentStore();if((null==e?void 0:e.table)===Sr().vF){const t=e.getSchema(),n=Z.property,i=(0,br().Qm)({schema:t,property:n});"text"!==(null==i?void 0:i.type)||i.ai_inference||(R=!0)}}const B={isSingleStoreSelection:r,showTurnInto:Boolean(r&&!c&&!h&&!y&&!f&&t&&w&&!I&&!S&&!g&&(P||!A)),showBold:Boolean(w),showItalic:Boolean(w),showStrikethrough:Boolean(w),showUnderline:Boolean(w),showCode:Boolean(w),showLink:Boolean(r&&w),showHighlight:Boolean(w),showDiscuss:Boolean(!c&&t&&(R||!h)&&!y&&!g&&!A),showReact:Boolean(j&&!c&&t&&!h&&!y&&!A&&!g),showSuggest:Boolean(!c&&t&&!h&&!y&&!A&&!v&&!C&&!g),showEquation:Boolean(r&&w&&!S&&!g),showActionButton:Boolean(r&&!c&&!f&&t&&!h&&!g&&(P||!A)),targetBlockStore:t,isComment:c,showCompletions:Boolean((0,n(982855).GD)(x)&&w&&!c&&!f&&t&&!h&&!y&&!I&&!A&&!S&&!g),topRankedSkill:m};if(T&&T.size>0)for(const e of T)B[e]=!1;return B}),[d,l,e,m]),[v,x]=(0,i.useState)(y);(0,i.useEffect)((()=>{y&&x(y)}),[y]);const b=(0,s().VK)((()=>t.WindowSizeStore.state.height),[t.WindowSizeStore]),S=(0,s().VK)((()=>y&&y.showDiscuss&&!y.showBold),[y]),j=(0,i.useCallback)((()=>{if(n(385185).Z.state.open||$r().Z.state.open)return;if(n(764189).n.state)return jr().w();const e=_().default.state;if("empty"===e.mode)return jr().w();const i=(0,Ar().L5)(e.multiSelection);if(0===i.length)return jr().w();if(!i.every((e=>{let{store:t}=e;return t.table===jn().iU||t.table===Xn().x_||t.table===Sr().vF||t.table===n(26645).L_})))return jr().w();if(!t.currentUser.isLoggedIn()||!i.every((e=>{let{store:t}=e;return t.canComment()})))return;const o=Ja().get();if(It().JE())return jr().w();if(i.some((e=>{let{editable:t}=e;return t.props.disableStyleAnnotations})))return jr().w();const s=i.map((e=>{let{editable:t}=e;return t.getContextClosestSelectableStore()}));if(s.some((e=>e&&e.pathIsDead())))return jr().w();if(s.some((e=>e&&(0,Kr().Eo)(e))))return jr().w();if(s.some(((e,t)=>{const n=i[t].store.canComment(),o=i[t].store.table===Xn().x_&&i[t].editable.props.disabled;return!!e&&(e.isLocked()||e.isNavigableAncestorLocked())&&!n||o})))return jr().w();const l=i.some((e=>{let{store:t}=e;const n=t.getRecordStoreAtRootPath();if(!(n instanceof te().G))return!1;const i=n.getValue();return!!i&&cl[i.type]}));if(l)return jr().w();const d=o?Ja().getRect(o):void 0;if(d&&!Fr().kK(d,(0,n(782202).Z)()))return jr().w();if(pr().default.isActive()||or().default.isActive()||Qi().Z.isOpen()||l||Nr().default.isPeekDismissableState()||!o||!function(){const e=Ja().get();return!!e&&!e.collapsed&&"empty"!==_().default.state.mode&&!(0,M().iG)(_().default.state.multiSelection)}()||n(953624).Z.state.open||"assistantCompletionPopup"===Lt().default.state.type)return jr().w();let c=0,u=0;if(d){c=d.left;const e=25,t=d.top-36-e,i=n(467171).R6(a.isElectronMac),o=b-36-e;u=Math.min(Math.max(t,i),o)}0===Math.abs(Yr().Z.state.top-u)&&Math.abs(Yr().Z.state.left-c)<10&&(u=Yr().Z.state.top,c=Yr().Z.state.left),g(h()),Yr().Z.setState({...r,isActive:!0,isAnimatingClosed:!1,top:u,left:c,blockTarget:Ot().default.state.stores[0]})}),[t.currentUser,b,a.isElectronMac,r,g,h]),C=(0,i.useMemo)((()=>f().P2(j,200,{leading:!1})),[j]);(0,i.useEffect)((()=>(Ot().default.addListener(C),_().default.addListener(C),Wr().Z.addListener(j),Gr().Z.addListener(j),qr().Z.addListener(j),Nr().default.addListener(j),()=>{_().default.removeListener(C),Ot().default.removeListener(C),Wr().Z.removeListener(j),Gr().Z.removeListener(j),qr().Z.removeListener(j),Nr().default.removeListener(j)})),[j,C]);const w=(0,s().VK)((()=>function(e){const t=null==e?void 0:e.getParentStore();if((null==t?void 0:t.table)===jn().iU)return!!t&&(0,Rr().Wt)(t);return!1}(d)),[d]),k=(0,i.useCallback)((()=>{r.isActive||Yr().Z.setState({...r,isAnimatingClosed:!1}),x(y)}),[r,y]);return(0,A.jsx)(hi().Z,{open:l||c,children:(0,A.jsx)(ml,{handleAnimationEnd:k,isActive:l,isExternallyImportedAndSyncedCollectionPageBlockTarget:w,lastRenderState:v,richTextMenuStoreState:r,canOnlyDiscuss:S})})},pl=i.forwardRef((function(e,t){let{lastRenderState:n,richTextMenuStoreState:i,canOnlyDiscuss:o,style:s}=e;const{top:a,left:r}=i,l=Math.max(o?r:r-60,0),d=o?"12px 0":12;return(0,A.jsxs)("div",{className:Pt().Qcf,style:{pointerEvents:"none",position:"absolute",top:a,left:0,display:"flex",width:"100%",...s},ref:t,children:[(0,A.jsx)("div",{style:{flexShrink:1,width:l,minWidth:24}}),(0,si().Z)((e=>(0,A.jsx)("div",{style:{pointerEvents:"none",padding:d},...e,children:n&&(0,A.jsx)(Tl,{renderState:n})}))),(0,A.jsx)("div",{style:{flexGrow:1,flexShrink:1,minWidth:36}})]})}));function ml(e){let{handleAnimationEnd:t,isActive:n,isExternallyImportedAndSyncedCollectionPageBlockTarget:i,lastRenderState:o,richTextMenuStoreState:s,canOnlyDiscuss:a}=e;return(0,A.jsx)(fi().Z,{tag:pl,visible:n&&!i,initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},onAnimationEnd:t,config:{duration:120},lastRenderState:o,richTextMenuStoreState:s,canOnlyDiscuss:a})}function gl(e){let{theme:t,styles:n}=e;return(0,A.jsx)("div",{style:{height:24,width:1,borderRight:`1px solid ${t.regularDividerColor}`,margin:"auto 6px",...n}})}function fl(e){let{blockStore:t}=e;const n=(0,Ie().Fg)(),i=(0,o().O7)(),a=(0,F().YB)();let r=(0,A.jsx)(F()._H,{defaultMessage:"Turn into",id:"richTextMenu.turnIntoButton.label"});const l=(0,s().VK)((()=>t.getType()),[t]);if(l){const e=Pr().Hc[l];r=e&&e.displayName||r}return(0,A.jsx)(Jr().ZP,{popupType:Jr().Z4.Popup,buttonPopupStore:$r().Z,originGap:4,renderOrigin:e=>(0,A.jsx)(Ue().Z,{renderTooltip:()=>a.formatMessage({defaultMessage:"Turn into",id:"richTextMenu.turnIntoButton.tooltip"}),render:t=>(0,A.jsxs)(_r().Z,{style:{display:"flex",alignItems:"center",paddingLeft:7,paddingRight:6,whiteSpace:"nowrap",color:n.icon.primary,borderRadius:6},...(0,Rs().Z)(e,t),children:[r,(0,Dr().i)({width:10,marginLeft:4,fill:n.lightIconColor})]})}),render:()=>(0,A.jsx)(x().Z,{menuType:S().o.Popup,children:(0,A.jsx)(Qr().Z,{context:{blocks:[t],environment:i,publicEditMode:void 0},sections:[Mr().gH],onAccept:e=>{const n=t.getType(),o=t.getFormat();jr().w(),ei().dh(i,{analyticsName:e.analyticsName,action_type:e.analyticsActionType,from:"rich_text_menu",block_id:t.id,block_type:n,is_toggleable:n?(0,Zr()._A)(n,o):void 0,parent_collection_id:t.getParentCollectionIdUpToTwoLevels()})}})}),onClick:()=>{ei().mt(i,{action:"turn_into"})}})}function hl(){const e=(0,Ie().Fg)();return(0,A.jsx)(ol().Z,{type:"b",tooltipLabel:(0,A.jsxs)(i.Fragment,{children:[(0,A.jsx)("div",{children:(0,A.jsx)(F()._H,{defaultMessage:"Bold",id:"richTextMenu.boldButton.tooltip"})}),(0,A.jsx)("div",{children:(0,A.jsx)(er().Z,{style:{color:e.mediumInvertedTextColor},name:"toggleBold"})})]}),children:Br({width:16,height:16})})}function yl(){const e=(0,Ie().Fg)();return(0,A.jsx)(ol().Z,{type:"i",tooltipLabel:(0,A.jsxs)(i.Fragment,{children:[(0,A.jsx)("div",{children:(0,A.jsx)(F()._H,{defaultMessage:"Italicize",id:"richTextMenu.italicsButton.tooltip"})}),(0,A.jsx)("div",{children:(0,A.jsx)(er().Z,{style:{color:e.mediumInvertedTextColor},name:"toggleItalics"})})]}),children:Hr({width:16,height:16})})}function vl(){const e=(0,Ie().Fg)();return(0,A.jsx)(ol().Z,{type:"s",tooltipLabel:(0,A.jsxs)(i.Fragment,{children:[(0,A.jsx)("div",{children:(0,A.jsx)(F()._H,{defaultMessage:"Strike-through",id:"richTextMenu.strikeThroughButton.tooltip"})}),(0,A.jsx)("div",{children:(0,A.jsx)(er().Z,{style:{color:e.mediumInvertedTextColor},name:"toggleStrike"})})]}),children:Ur({width:16,height:16})})}function xl(){const e=(0,Ie().Fg)();return(0,A.jsx)(ol().Z,{type:"_",tooltipLabel:(0,A.jsxs)(i.Fragment,{children:[(0,A.jsx)("div",{children:(0,A.jsx)(F()._H,{defaultMessage:"Underline",id:"richTextMenu.underlineButton.tooltip"})}),(0,A.jsx)("div",{children:(0,A.jsx)(er().Z,{style:{color:e.mediumInvertedTextColor},name:"toggleUnderline"})})]}),children:Er({width:16,height:16})})}function bl(){const e=(0,Ie().Fg)();return(0,A.jsx)(ol().Z,{type:"c",tooltipLabel:(0,A.jsxs)(i.Fragment,{children:[(0,A.jsx)("div",{children:(0,A.jsx)(F()._H,{defaultMessage:"Mark as code",id:"richTextMenu.markAsCodeButton.tooltip"})}),(0,A.jsx)("div",{children:(0,A.jsx)(er().Z,{style:{color:e.mediumInvertedTextColor},name:"toggleCode"})})]}),children:(0,Lr().z)({width:16,height:16})})}function Sl(e){let{}=e;const t=(0,Ie().Fg)();return(0,A.jsx)(al().Z,{children:(0,A.jsxs)("div",{style:{display:"flex",gap:4,alignItems:"center"},children:[(0,Vr().N)({width:16,height:16,color:t.icon.primary}),(0,Dr().i)({width:10,fill:t.lightIconColor})]})})}function Ml(e){let{intl:t,topRankedSkill:n}=e;const i=(0,Ie().Fg)(),a=(0,o().O7)(),r=(0,s().VK)((()=>Bt().KR.isXMLAssistantEnabled()),[]);return(0,A.jsxs)(A.Fragment,{children:[n&&(0,A.jsxs)(_r().Z,{style:{display:"flex",alignItems:"center",padding:"0 8px",whiteSpace:"nowrap",borderRadius:6},onClick:()=>{(0,vt().vi)({environment:a,clientSkillWithParameterValues:(0,jt().dangerouslyCreateClientSkillWithParameterValues)(n),from:"rich_text_menu",assistantSurfaceType:a.device.isMobile?"mobileWriter":"writer"}),ei().mt(a,{action:"completions"})},children:[n.icon({width:16,height:16,marginRight:6,fill:(0,Ct().zm)(n.category).color(i).color}),(0,A.jsx)("span",{children:(0,A.jsx)(Cr,{clientSkill:n})})]}),(0,A.jsx)(Ue().Z,{renderTooltip:()=>(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{children:r?t.formatMessage({defaultMessage:"Make edits, find answers, and more",id:"richTextMenu.assist.assistantTooltip"}):t.formatMessage({defaultMessage:"Ask AI to help edit, review, or generate text.",id:"richTextMenu.assist.tooltip"})}),(0,A.jsx)("div",{children:(0,A.jsx)(er().Z,{style:{color:i.mediumInvertedTextColor},name:"commandJ"})})]}),render:e=>(0,A.jsxs)(_r().Z,{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"0 6px",whiteSpace:"nowrap",borderRadius:6,height:28},...e,onClick:()=>{(0,bt().toggleInitialPrompt)({from:"rich_text_menu",environment:a}),ei().mt(a,{action:"completions"})},children:[(0,A.jsx)(St().h9,{}),(0,A.jsx)("span",{style:{marginLeft:6,marginRight:2},children:(0,A.jsx)(F()._H,{defaultMessage:"Ask AI",id:"richTextMenu.assistButton.label"})})]})})]})}function jl(){const e=(0,o().O7)();return(0,A.jsx)(sl().Z,{onClick:()=>{ei().mt(e,{action:"e"}),jr().w()},children:(0,Or().G)({width:16,height:16})})}function Cl(e){let{targetBlockStore:t,iconOnly:n}=e;const i=(0,Ie().Fg)(),o=(0,F().YB)();return(0,A.jsx)(el().Z,{style:{borderRadius:6,color:i.icon.primary,fill:i.icon.primary,height:28},iconOnly:n,blockStore:t,ariaLabel:o.formatMessage({id:"richTextMenu.Discussions.OpenDiscussionButton",defaultMessage:"Write a comment"})})}function wl(e){let{targetBlockStore:t,iconOnly:n}=e;const i=(0,Ie().Fg)();return(0,A.jsx)(Ir,{style:{borderRadius:6,color:i.icon.primary,fill:i.icon.primary,height:28,width:n?28:void 0},iconOnly:n,blockStore:t})}function kl(e){let{targetBlockStore:t,iconOnly:n}=e;return(0,A.jsx)(il,{style:{borderRadius:6,height:28},iconOnly:n,blockStore:t})}function _l(e){let{targetBlockStore:t}=e;const n=(0,Ie().Fg)(),i=(0,o().O7)();return(0,A.jsx)(Xr().Z,{store:t,style:{borderRadius:6,padding:6,width:28,height:28},iconStyle:{fill:n.icon.primary},fadeIn:!1,onClick:()=>{ei().mt(i,{action:"more"})}})}function Tl(e){let{renderState:t}=e;const i=(0,F().YB)(),o=(0,Ie().Fg)(),a=(0,s().VK)((()=>Yr().Z.state.isActive),[]),r=t.showDiscuss||t.showReact||t.showSuggest,l=t.showBold||t.showItalic||t.showUnderline||t.showStrikethrough||t.showCode||t.showEquation||t.showHighlight,d=l;return(0,A.jsxs)("div",{style:{display:"inline-flex",alignItems:"stretch",height:36,background:o.popoverBackground,overflow:"hidden",fontSize:14,lineHeight:1.2,borderRadius:8,boxShadow:o.aiBarShadow,pointerEvents:a?"auto":"none",padding:"4px"},onMouseDown:e=>e.preventDefault(),children:[t.showCompletions&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(Ml,{intl:i,topRankedSkill:t.topRankedSkill}),(0,A.jsx)(gl,{theme:o})]}),r&&t.targetBlockStore&&(0,A.jsxs)(A.Fragment,{children:[t.showDiscuss&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(Cl,{targetBlockStore:t.targetBlockStore,iconOnly:!1}),!d&&(t.showReact||t.showSuggest)&&(0,A.jsx)(gl,{theme:o})]}),t.showReact&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(wl,{targetBlockStore:t.targetBlockStore,iconOnly:d}),!d&&t.showSuggest&&(0,A.jsx)(gl,{theme:o})]}),t.showSuggest&&(0,A.jsx)(kl,{targetBlockStore:t.targetBlockStore,iconOnly:d}),l&&(0,A.jsx)(gl,{theme:o})]}),l&&(0,A.jsxs)(A.Fragment,{children:[t.showTurnInto&&t.targetBlockStore&&(0,A.jsx)(fl,{blockStore:t.targetBlockStore}),(0,A.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[t.showBold&&(0,A.jsx)(hl,{}),t.showItalic&&(0,A.jsx)(yl,{}),t.showUnderline&&(0,A.jsx)(xl,{}),t.showStrikethrough&&(0,A.jsx)(vl,{}),t.showCode&&(0,A.jsx)(bl,{}),t.showEquation&&(0,A.jsx)(jl,{})]}),t.showLink&&(0,A.jsx)(Sl,{}),t.showHighlight&&(0,A.jsx)(n(313358).Z,{blockStore:t.targetBlockStore})]}),(0,A.jsx)(rl,{}),t.showActionButton&&t.targetBlockStore&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(gl,{theme:o}),(0,A.jsx)(_l,{targetBlockStore:t.targetBlockStore})]})]})}var Il=()=>n(949842),Pl=()=>n(163085),Al=()=>n(793935),Rl=()=>n(291335);const Zl=5,Bl=18,Dl=.38;const Ll=function(){const e=(0,o().O7)(),t=(0,i.useRef)(void 0),n=(0,i.useRef)(void 0),a=(0,i.useRef)(1/0),r=(0,i.useRef)(void 0),l=(0,s().VK)((()=>e.WindowSizeStore.state.width),[e]);return(0,i.useEffect)((()=>{l<Al().OnlyOneSidebarVisibleWidthThreshold&&(0,qe().Sx)(e)&&(0,qe().in)(e)&&Al().setExpand({environment:e,isExpanded:!1,from:"sidebar_listener",saveDetailsSidebarPreference:!1})}),[e,l]),(0,i.useEffect)((()=>{const i=i=>{!function(e){let{e:t,environment:n,timerRef:i,cachedPageViewRectRef:o,previousMousePositionRef:s,mouseSpeedRef:a}=e;(0,Il().ZP)({event:t,context:Il().Af.SidebarMouseMove,callback:()=>{Hl(o),void 0!==s.current&&(a.current=Math.sqrt(Math.pow(t.clientX-s.current.x,2)+Math.pow(t.clientY-s.current.y,2))),function(e){let{x:t,y:n,timerRef:i,previousMousePositionRef:o}=e;o.current={x:t,y:n},clearTimeout(i.current),i.current=setTimeout((()=>{o.current=void 0}),100)}({x:t.clientX,y:t.clientY,timerRef:i,previousMousePositionRef:s});const e=ee().default.checkGate({gateName:"sidebar_hover_expansion_v3"});if(o.current){const i=Rl().sidebarOpenStore.state,s=t.clientX,r=o.current.left,l=Math.max(r*Dl,Bl,Rl().sidebarMousePeekXStore.state);s<l&&!ta().default.isCenterPeekOpen()&&a.current<Zl&&0!==a.current&&!i&&!e&&Al().open({fromElectron:!1}),s>(0,qe().qG)(n)&&s>l&&i&&Al().close()}}})}({e:i,environment:e,timerRef:r,cachedPageViewRectRef:t,previousMousePositionRef:n,mouseSpeedRef:a})};return window.addEventListener("mousemove",i),window.addEventListener("mouseout",Ol),()=>{window.removeEventListener("mousemove",i),window.removeEventListener("mouseout",Ol)}}),[e]),(0,A.jsx)(A.Fragment,{})};function Ol(e){e.toElement||e.relatedTarget||Al().close()}const Hl=f().P2((function(e){const t=function(){const{mainEditorCurrentBlockStore:e}=J().default.state,t=Pl().Z.find((t=>t.store===e));if(t){const e=t.getContentWrapEl();if(e)return e}}();e.current=t?t.getBoundingClientRect():document.body.getBoundingClientRect()}),500);var Vl=()=>n(708232),Ul=(n(30005),()=>n(146947)),El=()=>n(5234),Nl=()=>n(159408),Fl=()=>n(894534);const Kl=(0,li().CZ)("page",{default:{loader:()=>n.e(53748).then(n.bind(n,153748))},small:{loader:()=>n.e(71762).then(n.bind(n,471762))},mini:{loader:()=>n.e(87589).then(n.bind(n,287589))},large:{loader:()=>n.e(77477).then(n.bind(n,477477))},extraLarge:{loader:()=>n.e(34819).then(n.bind(n,934819))}});var zl=()=>n(73363),Wl=()=>n(802473),ql=()=>n(81954),Gl=()=>n(122792),Yl=()=>n(407391),$l=()=>n(308186),Xl=()=>n(497065),Ql=()=>n(932005),Jl=()=>n(620768),ed=()=>n(421797),td=()=>n(871953),nd=()=>n(814139),id=()=>n(480089),od=()=>n(727475),sd=()=>n(311562),ad=()=>n(965014),rd=()=>n(18281),ld=()=>n(697623),dd=()=>n(897257),cd=()=>n(893405),ud=()=>n(108714),pd=()=>n(603692),md=()=>n(661641),gd=()=>n(661297),fd=()=>n(906651),hd=()=>n(384241),yd=()=>n(842574),vd=()=>n(641481),xd=()=>n(66077),bd=()=>n(226413),Sd=()=>n(216939),Md=()=>n(217465),jd=()=>n(827370),Cd=()=>n(139978),wd=()=>n(989478),kd=()=>n(839002),_d=()=>n(254805);const Td=function(e){const t=(0,o().O7)(),a=(0,s().VK)((()=>e.blockStore.getAssociatedCollectionStore()),[e.blockStore]),r=(0,s().VK)((()=>{var e;return null==a||null===(e=a.getLayoutStore())||void 0===e?void 0:e.getModules()}),[a]),l=(0,s().VK)((()=>{if(!a)return 0;const{count:e}=(0,We().nJ)({collectionStore:a});return e}),[a]),{device:{isMobile:d}}=(0,o().O7)(),c=l>0&&!d,u=(0,Ie().yK)((e=>({spinnerWrapper:{padding:32,display:"flex",alignItems:"center",justifyContent:"center"},scroller:{background:e.contentBackground,zIndex:1,flexGrow:1,...c&&{paddingLeft:70,paddingRight:70}},container:{display:"flex",flexDirection:"row",flexGrow:1,overflow:"hidden"},layoutDetailsSidebar:{width:n(242921).NQ,flexShrink:0,borderLeft:`1px solid ${e.stroke.secondary}`}})),[c]),p=(0,i.useCallback)((e=>{Ql().U4(),Xl().c4({environment:t,url:e})}),[t]),m=e.blockStore.id,h=e.timestamp,[y]=(0,pe().r5)((async()=>await async function(e,t,n){const{timestamp:i}=e,o=e.block.id,s=await z().callApi({eventName:"getSnapshotContents",environment:n,data:e});if("failed"===s.type)throw s.error;const a=Md().RecordMapWithRole.create(s.data.contentMap),r=n.currentUser.id,l=new(xd().Z)({name:"PageSnapshotPreview"});for(const{pointer:m,model:g}of a)g&&l.setModelAndRole({pointer:m,userId:r},g,"reader");l.snapshotData={blockId:o,timestamp:i};const d=new Map,c=e=>{const n=l.getRecord({pointer:e,userId:r}),i=(0,Sd().dn)(e);n||!(0,xa().e)(e.id)||d.has(i)||d.set(i,(0,te().Kv)(t,e))},u=[];for(const{model:m}of a)if(m)if(m.table===jn().iU){const e=m,t=e.getProperties(),n=jd().dr.uniq(f().xH(Object.keys(t).map((e=>t[e])).map(g().cCA)));for(const d of n)c(d);const i=jd().dr.uniq(f().xH(Object.keys(t).map((e=>t[e])).map(br().rq)));for(const d of i)c(d);const o=e.isNavigableBlock()?[]:e.getContentIds()||[];for(const d of o)c({table:jn().iU,id:d});const s=e.getCollectionPointer();s&&(c(s),u.push(s.id));const a=f().jj(f().xH(Object.keys(t).map((e=>t[e])).map(g().lcG)));for(const d of a)c({table:wd().KJ,id:d});const r=m.getCreatedByPointer();r&&c(r);const l=m.getLastEditedByPointer();l&&c(l)}else if(m.table===Cd().np){var p;const e=null===(p=m.getFormat())||void 0===p?void 0:p.collection_pointer;e&&c(e)}else if(m.table===Xn().x_){const e=m.getCreatedByPointer();e&&c(e)}return await Id({relatedStoresMap:d,inMemoryRecordCache:l,currentUserId:r}),u.forEach((e=>{var t;const n=null===(t=l.getRecord({pointer:{table:Sr().vF,id:e},userId:r}))||void 0===t?void 0:t.value;n&&n.schema&&Object.keys(n.schema).forEach((e=>{var t;const i=null===(t=n.schema)||void 0===t?void 0:t[e],o=i&&(0,bd().p_)(i)?(0,bd().F0)(i):void 0;o&&c({table:Sr().vF,id:o})}))})),await Id({relatedStoresMap:d,inMemoryRecordCache:l,currentUserId:r}),{blockStore:new(te().G)(n,{table:jn().iU,id:o},{inMemoryRecordCache:l}),timestamp:i}}({block:{id:m,spaceId:(0,ql().J)(e.blockStore.pointer.spaceId)},timestamp:h},e.blockStore,t)),[m,t,e.blockStore,h]),v="pending"!==y.status&&"idle"!==y.status,x=y.value,b=y.error,S=(0,ca().Z)(!v||!x,400,400),M=(0,s().VK)((()=>{if(S)return(0,A.jsx)("div",{style:u.spinnerWrapper,children:(0,A.jsx)(Rn().Z,{})});if(b)return(0,A.jsx)("div",{style:{padding:32},children:(0,A.jsx)(F()._H,{defaultMessage:"Something went wrong.",id:"pageSnapshotPreview.unknownPreviewLoadError.message"})});const i=(0,It().Zy)({environment:t,store:e.blockStore});return x?(0,A.jsxs)(n(251932).gq,{style:u.container,children:[(0,A.jsx)(ot().Z,{store:x.blockStore,isDefaultContainer:!0,droppable:!0,render:e=>{let{selectableEvents:n}=e;return(0,A.jsx)(yd().Z,{style:u.scroller,type:i,...n,children:(0,A.jsx)(_d().ZP,{store:x.blockStore,disabled:!0,context:sd().S.InPageSnapShot,paddingBottom:(0,_d().EA)(t),layoutModulesByArea:r})})}},x.timestamp),c&&(null==r?void 0:r.page_details)&&(0,A.jsx)(yd().Z,{style:u.layoutDetailsSidebar,type:et().Z.Y,children:(0,A.jsx)(n(562219).J,{store:x.blockStore,context:sd().S.InPageSnapShot,disabled:!0,shownAs:"static_sidebar",modules:r.page_details})})]}):void 0}),[S,b,t,e.blockStore,x,u.spinnerWrapper,u.container,u.layoutDetailsSidebar,u.scroller,c,r]);return(0,A.jsx)(n(41340).L,{value:p,children:M})};async function Id(e){const{relatedStoresMap:t,inMemoryRecordCache:n,currentUserId:i}=e,o=Array.from(t.values());await(0,kd().qd)(o,25,(async e=>{await e.load();const t=e.getValue();t&&n.setRecord({pointer:e.pointer,userId:i},{role:"reader",value:t})}))}var Pd=()=>n(628965);const Ad={display:"flex",justifyContent:"center",padding:32},Rd=(0,F().vU)({restoreSnapshotError:{id:"historyModal.restoreSnapshot.errorMessage",defaultMessage:"Failed to restore version."}});const Zd=function(){const e=(0,F().YB)(),t=(0,o().O7)(),{device:i}=t,a=(0,s().Kw)(od().Z),r=Xd();return i.isMobile?(0,A.jsx)(b().ZP,{ariaLabel:Ud(e),popupType:w().k.SlideUp,open:a.open,render:()=>(0,A.jsx)($d,{}),onDismiss:Ql().U4}):(0,A.jsx)(n(708518).Z,{ariaLabel:Ud(e),open:a.open,innerStyle:r.modal,onDismiss:Ql().U4,render:()=>(0,A.jsx)($d,{}),className:Pt().Nn$})},Bd=(0,A.jsx)(F()._H,{defaultMessage:"This page does not have any snapshots yet. Allow up to 10 minutes for the first snapshot to be generated.",id:"historyModal.noSnapshotsYet.message"});function Dd(){return Wl().sb.filter((e=>"personal"!==e.tier))}function Ld(e){const t=Dd(),n=t.findIndex((t=>t.tier===e));if(!(n<=0))return t[n-1]}function Od(e){var t;if(q().default.isAdminMode)return;const{nextFutureSnapshot:n}=e;if(!n)return;const i=(o=n,(Date.now()-parseInt(o.timestamp))/Cn().A0);var o;if((0,ld().Aw)()&&i<=Wl().hy.plus.days)return;const s=function(e){return Dd().filter((t=>t.days>e)).map((e=>e.tier))}(i);if((0,ld().p4)(s))return;const a=s[0]??"enterprise";return(0,Gl().QM)(a)?void 0:{tier:a,message:(0,A.jsx)(F()._H,{defaultMessage:"Please upgrade to the {upsellTier} Plan to access versions older than {snapshotLimitDays} days.",id:"historyModal.upsell.message",values:{upsellTier:(0,El().Z)((0,Gl().eR)(a)?"plus":a),snapshotLimitDays:(null===(t=Ld(a))||void 0===t?void 0:t.days)??Math.floor(i)}})}}function Hd(){return(0,A.jsx)(vd().Z,{href:(0,De().UY)("guides.pageHistory"),analyticsFrom:"page_history"})}function Vd(e,t){const{device:n}=t;return!n.isMobile||"personal"===e&&(0,nd().S$)({environment:t})}function Ud(e){return e.formatMessage({id:"historyModal.ariaLabel",defaultMessage:"Page History"})}function Ed(e){const{device:t}=e;return t.isMobile?24:20}function Nd(e){let{menuState:t}=e;const n=(0,o().O7)(),a=(0,s().VK)((()=>t.blockStore.getIcon()),[t.blockStore]),r=(0,s().VK)((()=>t.blockStore.isEmptyPage()),[t.blockStore]),l=Xd();return t.snapshot?(0,A.jsxs)(i.Fragment,{children:[(0,A.jsxs)("div",{style:l.header,children:[a?(0,A.jsx)(mr().Z,{disabled:!0,icon:a,isEmptyPage:r,size:Ed(n)}):null,a?null:(0,A.jsx)(pd().y,{iconGroup:Kl,variantName:"default",colorName:"secondary"}),(0,A.jsx)(md().q,{styleName:"Body-14px/Regular",colorName:"tertiary",children:(0,A.jsx)(hd().Z,{store:t.blockStore})})]}),(0,A.jsx)(Td,{blockStore:t.blockStore,timestamp:t.snapshot.timestamp})]}):null}function Fd(e,t){ad().y(t,{from:"history_modal",upsell:{type:"product",product:e,limit:{type:"none"}}})}function Kd(e){let{message:t,showUpgradeButtonForTier:n}=e;const i=(0,o().O7)(),{device:a}=i,r=(0,s().VK)((()=>rd().GJ(dd().subscriptionDataStoreInstance.state)),[]),l=Xd();let d=Vd(n,i);return d&&(0,nd().S$)({environment:i})&&"personal"===n&&!r&&(d=!1),(0,A.jsxs)("div",{style:a.isMobile?l.unavailableMessageComponentMobile:l.unavailableMessageComponent,children:[Vd(n,i)?(0,A.jsx)("img",{src:Is().Z.images.icons.clockArrowLockSvg,alt:"loading..."}):null,(0,A.jsx)("div",{style:{...!a.isMobile&&{maxWidth:283}},children:t}),d&&n?(0,A.jsx)(gd().Z,{isLarge:!0,onClick:()=>Fd(n,i),style:l.upsell,icon:()=>(0,A.jsx)(pd().y,{iconGroup:Nl().t,variantName:"default",colorName:"uiBluePrimary"}),children:(0,A.jsx)(F()._H,{defaultMessage:"Upgrade plan",id:"historyModal.upgradeForHistoryButton.labelVHR"})}):null]})}function zd(e){const t=(0,o().O7)(),n=(0,F().YB)(),{device:a}=t,{menuState:r,loadingMore:l}=e,d=(0,ca().Z)(l,300,100),c=Xd();const u=function(e){const t=new Map;return e.forEach((e=>{const n=(0,Vs().Yx)(parseInt(e.timestamp),"very_short",Ul().locale),i=t.get(n)??0;t.set(n,i+1)})),t}(e.snapshotValues),p=(0,i.useCallback)((e=>{const t=e>Date.now()-6*Cn().A0,n=u.get((0,Vs().Yx)(e,"very_short",Ul().locale));return!!n&&(n>1||t)}),[u]),m=(0,s().VK)((()=>f().oA(e.snapshotValues.map(((i,o)=>{const s=o>0?e.snapshotValues[o-1]:void 0,l=!Od({snapshot:i,nextFutureSnapshot:s});return{key:i.id,action:()=>{Ql().gs({environment:t,snapshot:i,nextFutureSnapshot:s})},render:e=>{const t=i.authors||[],o=n.formatList(f().oA(t.map((e=>(0,td().nc)({parentStore:r.blockStore,pointer:e}).getDisplayName(n)))),{type:"conjunction",style:"narrow"}),s=(0,A.jsx)("div",{style:{...Pe().Yu},children:o}),d=Boolean(r.snapshot&&r.snapshot.id===i.id),u=parseInt(i.timestamp),m=p(u),g=new Date(u).getFullYear()!==(new Date).getFullYear()?"long":"month_day_long",h=m?(0,Vs().$b)(u,Ul().locale,n,"·",g):(0,Vs().Yx)(u,g,Ul().locale);return l?(0,A.jsx)(Ht().Z,{...e,title:h,focused:!a.isMobile&&d,caption:s,buttonStyle:c.buttonMenuItem,itemMarginLeft:8}):(0,A.jsx)(Ht().Z,{...e,title:(0,A.jsx)("div",{style:c.menuItem,children:(0,A.jsx)("div",{style:{...a.isMobile&&{display:"flex",flex:1},...Pe().Yu},children:h})}),focused:!a.isMobile&&d,caption:s,right:(0,A.jsx)(pd().y,{iconGroup:Fl().n,variantName:"small",colorName:"tertiary"}),buttonStyle:c.buttonMenuItem,itemMarginLeft:8,rightStyle:{marginRight:"7px"}})}}})))),[e.snapshotValues,a.isMobile,t,n,r.blockStore,r.snapshot,c,p]),g=r.snapshot&&r.snapshot.id,h=m.findIndex((e=>g===e.key)),y=[{key:"snapshots",render:e=>(0,A.jsx)(Ut().Z,{...e}),items:m}];return(0,A.jsxs)(i.Fragment,{children:[(0,A.jsx)(Vt().Z,{type:Vt().i.Vertical,initialFocus:h,sections:y}),(0,A.jsx)(cd().Z,{loading:l,fetchSize:r.size,resultSize:e.snapshotValues.length,onLoadMore:Ql().FF}),d&&(0,A.jsx)("div",{style:Ad,children:(0,A.jsx)(Rn().Z,{})})]})}function Wd(e){let{menuState:t,onRestoreSnapshot:n}=e;const i=(0,o().O7)();return(0,A.jsx)(b().ZP,{popupType:w().k.SlideUp,open:Boolean(t.snapshot),forceFullScreenSlideUp:!0,render:()=>{if(!t.snapshot)return null;const e=Od({snapshot:t.snapshot,nextFutureSnapshot:t.nextFutureSnapshot}),o=!e,s=o?(0,A.jsx)(Td,{blockStore:t.blockStore,timestamp:t.snapshot.timestamp}):(0,A.jsx)(Kd,{message:e.message,showUpgradeButtonForTier:e.tier}),a=!o&&i.device.isMobileBrowser;return(0,A.jsx)(x().Z,{menuType:S().o.Modal,title:(0,Vs().$b)(parseInt(t.snapshot.timestamp),Ul().locale,Rt().Z.getIntl()),right:(0,A.jsx)(it().DoneMenuText,{}),onClickRight:Ql().zb,leftDisabled:!o&&!i.device.isMobileBrowser,left:a?(0,A.jsx)(F()._H,{defaultMessage:"Upgrade",id:"historyModal.mobileSnapshotMenu.upgradeButton.label"}):(0,A.jsx)(F()._H,{defaultMessage:"Restore",id:"historyModal.mobileSnapshotMenu.restoreButton.label"}),onClickLeft:()=>(async()=>{a?Fd(e.tier,i):await n()})(),whiteBackground:o,forceFullScreenSlideUp:!0,children:s})}})}function qd(e){const t=(0,o().O7)(),{menuState:n}=e,i=(0,id().cR)(n.blockStore),a=(0,id().xb)(n.blockStore),r=(0,s().VK)((()=>Boolean(n.snapshot&&!i&&!a&&!Od({snapshot:n.snapshot,nextFutureSnapshot:n.nextFutureSnapshot})&&function(e,t){return(0,ed().k5s)({environment:t,blocks:[e.blockStore],originRect:void 0,publicEditMode:void 0})}(n,t))),[t,n,i,a]),l=Xd();return(0,A.jsxs)("div",{style:l.sidebarStyle,children:[(0,A.jsxs)("div",{style:l.sidebarHeader,children:[(0,A.jsx)(md().q,{styleName:"Heading-17px/Semibold",colorName:"primary",customStyles:{fontSize:16},children:(0,A.jsx)(F()._H,{id:"historyModal.desktopModal.sidebar.title",defaultMessage:"Version history"})}),(0,A.jsx)(Jl().U,{onClick:Ql().U4,style:l.dismiss})]}),(0,A.jsx)(yd().Z,{type:et().Z.Y,style:{flex:1},children:(0,A.jsx)(zd,{...e})}),(0,A.jsxs)("div",{style:l.actions,children:[(0,A.jsx)(yi().Z,{isLarge:!0,style:l.learnMoreButton,onClick:()=>{Yl().Fs(t,{from:"page_history"}),Xl().c4({environment:t,url:(0,De().UY)("guides.pageHistory"),openInNew:"tab"})},icon:()=>(0,A.jsx)(pd().y,{iconGroup:zl().M,variantName:"small",colorName:"secondary"}),children:(0,A.jsx)(md().q,{colorName:"secondary",children:(0,A.jsx)(F()._H,{defaultMessage:"Learn more",id:"historyModal.desktopModal.learnMoreButtonVHR.label"})})}),(0,A.jsx)(Ue().Z,{disableTooltip:r,renderTooltip:()=>a?(0,A.jsx)(F()._H,{defaultMessage:"Resolve pending edits to restore snapshots.",id:"historyModal.desktopModal.sidebar.resolvePendingEdits.tooltip"}):i?(0,A.jsx)(F()._H,{defaultMessage:"Restore page from trash to restore snapshots.",id:"historyModal.desktopModal.sidebar.restorePageFromTrashMessage.tooltip"}):(0,A.jsx)(F()._H,{defaultMessage:"Upgrade to restore snapshots.",id:"historyModal.desktopModal.sidebar.upgradeMessage.tooltip"}),render:t=>(0,A.jsx)(fd().Z,{isLarge:!0,onClick:e.onRestoreSnapshot,disabled:!r,...t,style:l.restoreButton,children:(0,A.jsx)(F()._H,{defaultMessage:"Restore",id:"historyModal.desktopModal.restoreButtonVHR.label"})})})]})]})}function Gd(e){let t,n;return e.loadingMore||0!==e.snapshotValues.length||(t=(0,A.jsx)(Kd,{message:Bd,showUpgradeButtonForTier:!1})),n=e.error?(0,A.jsx)("div",{style:Ad,children:(0,A.jsx)(F()._H,{defaultMessage:"Something went wrong",id:"historyModal.errorMessage"})}):e.initialLoading?(0,A.jsx)("div",{style:Ad,children:(0,A.jsx)(Rn().Z,{})}):(0,A.jsxs)(i.Fragment,{children:[(0,A.jsx)(yd().Z,{type:et().Z.Y,children:(0,A.jsx)(zd,{...e})}),(0,A.jsx)(Wd,{...e})]}),(0,A.jsx)(x().Z,{menuType:S().o.Modal,title:(0,A.jsx)(F()._H,{defaultMessage:"History",id:"historyModal.mobileHistoryMenu.title"}),left:(0,A.jsx)(Hd,{}),right:(0,A.jsx)(it().DoneMenuText,{}),onClickRight:Ql().U4,header:t,children:n})}function Yd(e){const t=(0,o().O7)(),n=(0,s().VK)((()=>e.menuState.snapshot?Od({snapshot:e.menuState.snapshot,nextFutureSnapshot:e.menuState.nextFutureSnapshot}):null),[e.menuState.nextFutureSnapshot,e.menuState.snapshot]),a=Xd(),r=(0,s().VK)((()=>(0,_d().EA)(t)),[t]);let l;return l=e.error?(0,A.jsx)("div",{style:Ad,children:(0,A.jsx)(F()._H,{defaultMessage:"Something went wrong",id:"historyModal.desktopModal.errorMessage"})}):e.initialLoading?(0,A.jsx)("div",{style:Ad,children:(0,A.jsx)(Rn().Z,{})}):n?(0,A.jsxs)("div",{style:a.blurContainer,children:[(0,A.jsx)("div",{style:a.unavailableMessageText,children:(0,A.jsx)(Kd,{message:n.message,showUpgradeButtonForTier:n.tier})}),(0,A.jsx)("div",{style:a.snapshotBlur,children:(0,A.jsx)(_d().ZP,{store:e.menuState.blockStore,disabled:!0,context:sd().S.InPageSnapShot,paddingBottom:r})})]}):e.loadingMore||0!==e.snapshotValues.length?(0,A.jsx)(Nd,{menuState:e.menuState}):(0,A.jsx)(Kd,{message:Bd,showUpgradeButtonForTier:!1}),(0,A.jsxs)(i.Fragment,{children:[(0,A.jsx)("div",{style:a.preview,children:l}),(0,A.jsx)(qd,{...e})]})}function $d(){const e=(0,o().O7)(),{device:t}=e,n=(0,s().Kw)(od().Z),[i]=(0,pe().r5)((async()=>{if(n.open)return await async function(e,t,n){const{device:i}=n,o=await z().callApi({eventName:"getSnapshotsList",environment:n,data:e});if("failed"===o.type)throw o.error;const{snapshots:s}=o.data;if(t.pageHasCollection=s.some((e=>{var t;const n="collection"===e.parent_table,i=null===(t=e.collection_ids)||void 0===t?void 0:t.length;return n||i&&0!==i})),t.openSnapshotNearTimestamp){const e=parseInt(t.openSnapshotNearTimestamp),i=s.findIndex((t=>parseInt(t.timestamp)<e));0===s.length||(0===i?Ql().gs({environment:n,snapshot:s[i],nextFutureSnapshot:void 0}):i>0?Ql().gs({environment:n,snapshot:s[i-1],nextFutureSnapshot:i>1?s[i-2]:void 0}):s.length<t.size?Ql().gs({environment:n,snapshot:s[s.length-1],nextFutureSnapshot:s.length>1?s[s.length-2]:void 0}):Ql().FF())}else Boolean(t.snapshot)||i.isMobile||od().Z.setState({...t,snapshot:s[0],nextFutureSnapshot:void 0});return o.data}({block:{id:n.blockStore.id,spaceId:(0,ql().J)(n.blockStore.pointer.spaceId)},size:n.size},n,e)}),[e,n]),a="pending"!==i.status&&"idle"!==i.status,r=i.error,l=i.value,d=(0,ca().Z)(Boolean(n.open&&(!l||l.snapshots.length>=n.size&&n.openSnapshotNearTimestamp)),400,100);if(!n.open)return null;const c=t.isMobile?Gd:Yd;return(0,A.jsx)(c,{snapshotValues:l?l.snapshots:[],menuState:n,onRestoreSnapshot:async function(){if(!n.open)return;const t="restore_collection",i=n.pageHasCollection?[{key:t,text:(0,A.jsx)(F()._H,{defaultMessage:"Also restore databases on this page",id:"historyModal.confirmDialog.selectOption.collection"}),description:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(F()._H,{defaultMessage:"All database pages and their properties from this version will be restored, which may impact other users or database views. To restore database page content, restore an earlier version for each page.",id:"historyModal.confirmDialog.selectOption.collection.description"})," ",(0,A.jsx)(ud().Z,{external:!0,href:(0,De().UY)("guides.pageHistoryRestore"),style:{display:"inline",textDecoration:"underline"},children:(0,A.jsx)(F()._H,{id:"historyModal.confirmDialog.selectOption.collection.learnMore",defaultMessage:"Learn more"})})]})}]:void 0,{accept:o,selectionResult:s}=await $l().gt({message:(0,A.jsx)("div",{style:{fontWeight:Pe().Ue.semibold,fontSize:"medium"},children:(0,A.jsx)(F()._H,{defaultMessage:"Restore to this version?",id:"historyModal.confirmDialog.description"})}),acceptLabel:(0,A.jsx)(F()._H,{defaultMessage:"Restore",id:"historyModal.confirmDialog.restoreButton.label"}),selectionItems:i,mode:i?"wide":void 0,textAlign:"left"});if(o){try{await Ql().xx(e,null==s?void 0:s[t])}catch{$l().UW(Rt().Z.formatMessage(Rd.restoreSnapshotError))}Ql().U4()}},error:r,initialLoading:d,loadingMore:!a})}function Xd(){return(0,Ie().yK)((e=>({sidebarStyle:{display:"flex",flexDirection:"column",flexShrink:0,width:Pd().mD,padding:"10px 8px 0px 8px",borderLeft:`\n\t\t\t1px solid ${e.regularDividerColor}\n\t\t`},sidebarHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",alignSelf:"stretch",padding:"4px 4px 4px 8px"},actions:{display:"flex",padding:"12px 12px 12px 6px",borderTop:`\n\t\t\t\t\t1px solid ${e.regularDividerColor}\n\t\t\t\t`,justifyContent:"space-between",marginLeft:"-8px",marginRight:"-8px"},learnMoreButton:{padding:"0px 8px",borderRadius:"6px",gap:4},preview:{display:"flex",flexDirection:"column",width:`calc(100% - ${Pd().mD}px)`,boxShadow:`1px 0 0 ${e.regularDividerColor}`},restoreButton:{backgroundColor:e.text.uiBluePrimary,borderRadius:"6px",boxShadow:"none"},buttonMenuItem:{marginLeft:"0px",marginRight:"0px",width:"100%",borderRadius:"6px"},menuItem:{display:"flex",alignItems:"center",justifyContent:"space-between"},header:{display:"flex",alignItems:"center",flexShrink:0,height:45,paddingLeft:14,gap:6},modal:{height:`${Pd()._Y}vh`,width:`${Pd().rp}vw`,overflow:"hidden",display:"flex",borderRadius:"12px"},blurContainer:{position:"relative",width:"100%",height:"100%",overflow:"hidden"},unavailableMessageText:{position:"absolute",width:"100%",height:"100%",zIndex:1},snapshotBlur:{position:"relative",pointerEvents:"none",filter:"blur(20px)",opacity:"30%",margin:"-5px"},unavailableMessageComponentMobile:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",marginTop:28,padding:16,textAlign:"center",fontSize:14,position:"relative",zIndex:1,background:e.popoverBackground,boxShadow:`\n\t\t\t\t\t\t\t\t0 -1px 0 ${e.regularDividerColor},\n\t\t\t\t\t\t\t\t0 1px 0 ${e.regularDividerColor}\n\t\t\t\t\t\t\t`},unavailableMessageComponent:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:16,textAlign:"center",fontSize:14,height:"100%",gap:16},upsell:{gap:4,paddingLeft:"8px",paddingRight:"12px",borderRadius:"6px"},dismiss:{position:"unset"}})),[])}var Qd=()=>n(700696);const Jd=function(){const e=(0,o().O7)(),{currentSpaceStore:t,currentUserStore:n}=(0,s().Kw)(J().default),a=null==n?void 0:n.id;return(0,i.useEffect)((()=>{if(!t||!a)return;const n=async n=>{const i=await(0,fe().B$)({environment:e,spaceStore:t,includeArchived:!1,currentUserId:a});Qd().default.setState({teams:i.teams,teamAggregateData:i.teamAggregateData,lastEmitData:{spaceId:t.id,userId:a,value:n}})};n(Qd().default.state.lastEmitData.value);const i=$().ZP.addListener((0,E().je)(t.id),(async(e,i)=>{const{lastEmitData:o}=Qd().default.state,s=t.id!==o.spaceId,r=a!==o.userId,l=i!==o.value;(s||r||l)&&await n(i)}),void 0,e);return function(){i&&$().ZP.removeListener(i,e)}}),[t,a,e]),null};var ec=()=>n(388915),tc=()=>n(348141),nc=()=>n(56424);const ic=function(){const e=(0,Ie().Fg)(),t=(0,o().O7)(),i=(0,s().Kw)(nc().Z),a=(0,s().Kw)(n(505121).Z);if(!i.open)return null;const r=i.integration.info.icon;return r?(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",cursor:"default",padding:16,background:e.popoverBackground,borderRadius:4,boxShadow:e.lightBoxShadow,position:"absolute",bottom:65+a,right:16+a,width:240,zIndex:Qn().hT,clipPath:"inset(-10px -10px -10px -10px)"},children:[(0,A.jsx)(n(643051).Z,{type:"image_url",imageURL:r,size:38,style:{marginBottom:6}}),(0,A.jsx)("div",{style:{color:e.regularTextColor,fontSize:14,fontWeight:Pe().Ue.semibold,marginBottom:6,textAlign:"center"},children:(0,A.jsx)(F()._H,{id:"inlineUnfurlingAuthenticationPopup.title",defaultMessage:"Connect to {integration}",values:{integration:i.integration.name}})}),(0,A.jsxs)("div",{style:{color:e.mediumTextColor,fontSize:12,marginBottom:8,textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,A.jsx)(F()._H,{id:"inlineUnfurlingAuthenticationPopup.caption",defaultMessage:"You, and anyone else who has access to this Notion page, will see rich previews that update live."}),(0,A.jsx)(n(765513).Z,{href:(0,De().UY)("guides.unfurling"),external:!0,children:(0,A.jsx)(F()._H,{id:"inlineUnfurlingAuthenticationPopup.learnMore.text",defaultMessage:"Learn more"})})]}),(0,A.jsx)(fd().Z,{onClick:()=>async function(e){const t=nc().Z.state,{currentSpaceStore:n}=J().default.state;if(!t.open||!n)return;await ec().hM({environment:e,integration:t.integration,spaceId:n.id,unfurlUrl:t.unfurlUrl,externalObjectInstanceBlockId:t.externalObjectInstanceBlockId,from:"external_object_instance_inline_popup"}),oc(t.integration.id,e),nc().Z.reset()}(t),style:{width:"100%"},children:(0,A.jsx)(F()._H,{id:"inlineUnfurlingAuthenticationPopup.connectButton",defaultMessage:"Connect"})}),(0,A.jsx)(Ve().Z,{icon:n(518530).U,onClick:()=>function(e){const t=nc().Z.state;t.open&&oc(t.integration.id,e);nc().Z.reset()}(t),style:{position:"absolute",top:6,right:6}})]}):null};function oc(e,t){const{currentUserSettingsStore:n}=J().default.state;n&&v().createAndCommit({userAction:"UnfurlingInformationPopup.markPopupAsDismissed",environment:t,canUndo:!0,perform:t=>{tc().GK({transaction:t,userSettingsStore:n,integrationId:e})}})}var sc=()=>n(235484),ac=()=>n(286310),rc=()=>n(658735),lc=()=>n(989377);const dc=function(){const e=(0,s().qz)(rc().Z),t=(0,o().O7)(),n=(0,i.useRef)(null),a=(0,o().Fy)(),[r,l]=(0,s().VK)((()=>[e.state.open,e.state.open?e.state.renderRect:void 0]),[e]);return(0,i.useEffect)((()=>{const e=e=>{r&&"ArrowUp"!==e.key&&"ArrowDown"!==e.key&&"Enter"!==e.key&&fc(t)},i=e=>{if(!r||!e.target||!n.current)return;const i=n.current;i&&i!==e.target&&fc(t)};return(0,oo().lj)(window,"keydown",e),(0,oo().lj)(window,"mousedown",i),()=>{(0,oo().ZV)(window,"keydown",e),(0,oo().ZV)(window,"mousedown",i)}}),[r,n,t]),(0,A.jsx)(b().ZP,{popupType:a.isMobileNative&&!a.isTablet?w().k.SlideUp:w().k.Popup,open:Boolean(r&&l),originRect:r?l:void 0,placementToOrigin:C().Placement.Top,alignmentToOrigin:C().Alignment.Start,originGap:4,disableMouseCapture:!0,disableContentScroll:!0,disableDarkOverlayBackground:a.isMobile,keepFocus:a.isMobile,render:()=>(0,A.jsx)(cc,{}),onDismiss:fc})};function cc(){const e=(0,s().qz)(rc().Z),t=(0,o().O7)(),n=(0,o().Fy)(),a=(0,i.useRef)(null),r=(0,F().YB)(),[l,d,c]=(0,s().VK)((()=>[e.state.open,e.state.open?e.state.allOptionTypes:[],e.state.open?e.state.integration:void 0]),[e]),u=(0,Ie().yK)((e=>({header:n.isMobile?{display:"flex",justifyContent:"center",alignItems:"center",fontSize:16,fontWeight:Pe().Ue.semibold,background:e.surface.wash,height:45}:{paddingLeft:16,paddingRight:16,paddingTop:10,color:e.text.secondary,fontSize:Pe().JB.UISmall.desktop,fontWeight:450,font:"SF Pro"}})),[n]);if(!l)return null;const p={fontSize:Pe().JB.UIRegular.desktop,fontWeight:Pe().Ue.regular,font:"SF Pro"},m={key:"embed section",render:e=>(0,A.jsx)(Ut().Z,{...e,style:{paddingTop:6,paddingBottom:0}}),items:d.filter((e=>"import"!==e)).map((e=>({key:e,render:n=>(0,A.jsx)(Ht().Z,{...n,title:(0,A.jsx)(uc,{optionType:e,integration:c}),onMouseEnter:i=>{n.onMouseEnter(i),pc(e,r,t)},style:p}),action:()=>mc(e,t)})))},g={key:"import section",render:e=>(0,A.jsx)(Ut().Z,{...e,style:{paddingTop:0,paddingBottom:6}}),items:d.filter((e=>"import"===e)).map((e=>({key:e,render:n=>(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(An().Z,{size:4}),(0,A.jsx)(Ht().Z,{...n,title:(0,A.jsx)(uc,{optionType:e,integration:c}),onMouseEnter:i=>{n.onMouseEnter(i),pc(e,r,t)},style:p})]}),action:()=>mc(e,t)})))};let f;return f=n.isMobile?{menuType:S().o.ActionSheet}:{menuType:S().o.Popup,width:d.includes("import")?260:200,maxHeight:"40vh",onClickOutside:()=>fc(t)},(0,A.jsx)(x().Z,{...f,className:Pt().b_f,ref:a,header:(0,A.jsx)(qt().Z,{style:u.header,isSmall:!n.isMobile,isSecondaryColor:!n.isMobile,children:(0,A.jsx)(F()._H,{id:"embedMenu.header",defaultMessage:"Paste as"})}),children:(0,A.jsx)(Vt().Z,{type:Vt().i.Vertical,sections:[m,g],initialFocus:0,onKeyboardArrow:e=>function(e,t,n){const i=rc().Z.state;if(!i.open||void 0===e.indexGlobal)return;const o=i.allOptionTypes[e.indexGlobal];if(!o)return;pc(o,t,n)}(e,r,t),priority:1,disallowBackspace:!0})})}function uc(e){let{optionType:t,integration:n}=e;return"preview"===t?(0,A.jsx)(F()._H,{id:"unfurlingMenu.actions.pasteAsPreview.title",defaultMessage:"Preview"}):"mention"===t?(0,A.jsx)(F()._H,{id:"unfurlingMenu.actions.pasteAsMention.title",defaultMessage:"Mention"}):"link"===t?(0,A.jsx)(F()._H,{id:"unfurlingMenu.actions.pasteAsLink.title",defaultMessage:"URL"}):"drive"===t?(0,A.jsx)(F()._H,{id:"unfurlingMenu.actions.pasteAsDrive.title",defaultMessage:"Embed"}):"collection"===t?(0,A.jsx)(F()._H,{id:"unfurlingMenu.actions.pasteAsDatabase.title",defaultMessage:"Database"}):"import"===t?(null==n?void 0:n.id)===sc().mC?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(F()._H,{id:"unfurlingMenu.actions.import.jiraTitle",defaultMessage:"Sync Jira projects and issues"}),(0,A.jsx)(Zn().Z,{style:{display:"inline"}})]}):(null==n?void 0:n.id)===sc().aW?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(F()._H,{id:"unfurlingMenu.actions.import.salesforceTitle",defaultMessage:"Sync Reports and Lists"}),(0,A.jsx)(lc().Z,{style:{display:"inline"},newBadgeKey:"salesforce_sync_unfurling_option",didUserEngage:!1})]}):(0,A.jsx)(F()._H,{id:"unfurlingMenu.actions.import.title",defaultMessage:"Import from {integration}",values:{integration:null==n?void 0:n.name}}):void(0,ge().t1)(t)}function pc(e,t,n){v().createAndCommit({userAction:"UnfurlingMenu.handleMenuListKeyboardArrow",environment:n,canUndo:!1,perform:i=>{zn().hJ({environment:n,type:gc(e),useTemporaryRecordCache:!0,transaction:i,intl:t})}})}function mc(e,t){const n=rc().Z.state;ac().kM(t,{unfurl_option_type:e||"default",integration:n.open?n.integration.name:"default"}),"import"===e&&n.open&&zn().LE({environment:t,integration:n.integration,url:n.url,blockStore:n.stores.blockStore}),v().createAndCommit({userAction:"UnfurlingMenu.handleDismiss",environment:t,canUndo:!0,perform:n=>{zn().xv({environment:t,setType:e?gc(e):void 0,transaction:n})}})}function gc(e){return"import"===e?"link":e}function fc(e){mc(void 0,e)}n(821057);var hc=()=>n(511115),yc=()=>n(577223),vc=()=>n(608352),xc=()=>n(306164),bc=()=>n(110232),Sc=()=>n(887430),Mc=()=>n(307369),jc=()=>n(960562),Cc=()=>n(27762),wc=()=>n(797522);const kc=200,_c=30,Tc=125,Ic=25;var Pc=function(e){return e[e.Selectable=0]="Selectable",e[e.DropTarget=1]="DropTarget",e}(Pc||{});function Ac(e){return e.type===Pc.Selectable?{type:jc().D.Selectable,store:e.target.props.store,direction:e.direction}:{type:jc().D.DropTarget,key:e.target.props.dropTargetKey,direction:e.direction}}function Rc(e){const{target:t,device:n,direction:i,points:o}=e;return i===jc().v.Onto||!n.isPhone||t.props.dropzoneShouldNeverUseOrigin?o.mousePoint:{x:o.originPoint.x,y:o.mousePoint.y}}function Zc(e){return(0,Mc().u)(e)?{type:Pc.Selectable,target:e}:{type:Pc.DropTarget,target:e}}function Bc(e){if(!e||!(0,Mc().u)(e))return!1;let t=e;const n=jc().default.state;if(!n.isDragging)return!1;const{draggedStores:i}=n;for(;t;){if(i.indexOf(t.props.store)>=0)return!0;t=t.getContextClosestSelectable()}return!1}function Dc(e){const{dropzoneMustBeWithinHorizontalBound:t,device:n}=e;return t?0:n.isPhone?9999:0}function Lc(e){switch(e.direction){case jc().v.Onto:return function(e){const{device:t,isNativeDrag:n,rect:i,target:o,points:s,priority:a,canAcceptDrop:r}=e,l=jc().v.Onto,d=Rc({device:t,target:o,direction:l,points:s});if((n?o.props.canNativeDropOnto:o.props.canDropOnto)&&Hc(d,i)&&!Bc(o)&&r(o,l))return{...Zc(o),direction:l,left:i.left,top:i.top,width:i.width,height:i.height,priority:a}}(e);case jc().v.Left:return function(e){const{device:t,isNativeDrag:n,rect:i,target:o,points:s,priority:a,optionKeyDown:r,canAcceptDrop:l}=e,d=jc().v.Left,c=Rc({device:t,target:o,direction:d,points:s});if((n?o.props.canNativeDropLeft:o.props.canDropLeft)&&i&&c.y>=i.top&&c.y<=i.bottom&&Math.abs(c.x-i.left)<=kc&&(r||!Bc(o))&&l(o,d))return{...Zc(o),direction:d,left:i.left,top:i.top,width:0,height:i.height,priority:a}}(e);case jc().v.Right:return function(e){const{device:t,isNativeDrag:n,rect:i,target:o,points:s,priority:a,optionKeyDown:r,canAcceptDrop:l}=e,d=jc().v.Right,c=Rc({device:t,target:o,direction:d,points:s});if((n?o.props.canNativeDropRight:o.props.canDropRight)&&i&&c.y>=i.top&&c.y<=i.bottom&&Math.abs(c.x-i.right)<=kc&&(r||!Bc(o))&&l(o,d))return{...Zc(o),direction:d,left:i.right,top:i.top,width:0,height:i.height,priority:a}}(e);case jc().v.Above:return function(e){const{device:t,isNativeDrag:n,rect:i,target:o,points:s,priority:a,optionKeyDown:r,canAcceptDrop:l}=e,d=o.props.verticalDropZoneExtraLeftEdgeOffset??_c,c=Dc({dropzoneMustBeWithinHorizontalBound:o.props.dropzoneMustBeWithinHorizontalBound,device:t}),u=jc().v.Above,p=Rc({device:t,target:o,direction:u,points:s});if((n?o.props.canNativeDropAbove:o.props.canDropAbove)&&i&&p.x>=i.left-d-c&&p.x<=i.right+c&&(r||!Bc(o))&&Math.abs(p.y-i.top)<=Tc&&(i.height<=2*Ic||p.y<=i.top+Ic)&&l(o,u))return{...Zc(o),direction:u,left:i.left,top:i.top,width:i.width,height:0,priority:a}}(e);case jc().v.Below:return function(e){const{device:t,isNativeDrag:n,rect:i,target:o,points:s,priority:a,optionKeyDown:r,canAcceptDrop:l}=e,d=o.props.verticalDropZoneExtraLeftEdgeOffset??_c,c=Dc({dropzoneMustBeWithinHorizontalBound:o.props.dropzoneMustBeWithinHorizontalBound,device:t}),u=Tc,p=o.props.isLastItem?Number.MAX_SAFE_INTEGER:Tc,m=jc().v.Below,g=Rc({device:t,target:o,direction:m,points:s});if((n?o.props.canNativeDropBelow:o.props.canDropBelow)&&i&&g.x>=i.left-d-c&&g.x<=i.right+c&&i.bottom-g.y<=u&&g.y-i.bottom<=p&&(i.height<=2*Ic||g.y>=i.bottom-Ic)&&(r||o.props.isLastItem||!Bc(o))&&l(o,jc().v.Below))return{...Zc(o),direction:jc().v.Below,left:i.left,top:i.bottom,width:i.width,height:0,priority:a}}(e)}}function Oc(e){const{device:t,rect:n,target:i,points:o,optionKeyDown:s}=e;return Hc(Rc({device:t,target:i,direction:jc().v.Onto,points:o}),n)&&Bc(i)&&!s}function Hc(e,t){return Boolean(t&&e.x>=t.left&&e.x<=t.right&&e.y>=t.top&&e.y<=t.bottom)}var Vc=()=>n(590162),Uc=()=>n(605067),Ec=()=>n(906591),Nc=()=>n(884310),Fc=()=>n(677556),Kc=()=>n(972079),zc=()=>n(352761),Wc=()=>n(32969),qc=()=>n(644235),Gc=()=>n(169523),Yc=()=>n(645805);const $c=2,Xc=20,Qc=7;function Jc(){const e=(0,i.useRef)(!1),t=(0,i.useRef)(!1),n=(0,i.useRef)(void 0),s=(0,o().Fy)(),a=(0,o().O7)(),r=(0,xr().l)(),l=(0,hc().z)((e=>Eo().Z.withListenerIgnored((()=>(e=>{const i=Yc().default.state;if(!(e&&e.target instanceof Element)||i.isOpen&&i.menuIsOpen||(n.current={target:e.target,x:e.clientX,y:e.clientY}),t.current)return void(t.current=!1);const{isDragging:o}=jc().default.state;if(o)g();else{if(!n.current)return;nu(a,n.current.target,n.current.x,n.current.y)}})(e)))),60),d=(0,i.useCallback)((()=>{e.current||l(void 0)}),[l]),c=f().P2((()=>{const{isDragging:e}=jc().default.state;Yn().default.afterNextFlush((()=>{n.current&&!e&&nu(a,n.current.target,n.current.x,n.current.y)}))}),60),u=(0,i.useMemo)((()=>new WeakMap),[]),p=(0,i.useCallback)((e=>{const t=u.get(e);if(u.has(e))return t??!1;const n=(0,ed().OOI)({environment:a,blocks:e,publicEditMode:r&&r.publicEditModeStore.state});return u.set(e,n),n??!1}),[a,r,u]),m=(0,i.useCallback)((()=>{const e=jc().default.state;if(!e.isDragging)return;const{draggedStores:t,currentX:n,currentY:i,offsetX:o,offsetY:s,isNativeDrag:l}=e,d=function(e){const{points:t,draggingStore:n,isNativeDrag:i,environment:o,pageContext:s,canDragFn:a}=e,{device:r}=o,l=Vc().y(),d=function(){const{selectableRectMap:e}=wc().default.state,{dropTargetRectMap:t}=Cc().default.state,n=new Map;return e.forEach(((e,t)=>{n.set(t,e)})),t.forEach(((e,t)=>{n.set(t,e)})),n}(),c=d.keys();let u=c.next();const p=Wc().C.findSelectableFromStore(n),m=p?p.getContextSelectableContainer():void 0;let g=[];for(;!u.done;){const e=u.value;u=c.next();const n=d.get(e),p=e.getContextSelectableContainer();if(r.isPhone&&p!==m)continue;if(!p||p.getProps().disable)continue;const h=tu(p),y={device:r,isNativeDrag:i,rect:n,target:e,points:t,priority:h,optionKeyDown:l.option,canAcceptDrop:(e,t)=>lu({target:e,direction:t,optionKeyDown:l.option,environment:o,pageContext:s,canDragFn:a})};if(Oc(y))return{ontoDropZone:void 0,verticalDropZone:void 0,horizontalDropZones:[]};g.push(...f().oA([Lc({...y,direction:jc().v.Onto}),Lc({...y,direction:jc().v.Left}),Lc({...y,direction:jc().v.Right}),Lc({...y,direction:jc().v.Above}),Lc({...y,direction:jc().v.Below})]))}g=function(e){const t=ou(f().UT(e,ou));return e.filter((e=>ou(e)===t))}(g);const h=g.filter((e=>e.direction===jc().v.Above||e.direction===jc().v.Below)),y=f().F(h,(e=>Math.abs(e.top-iu(e,t,o).y)));if(y&&y.target===p)return{ontoDropZone:void 0,verticalDropZone:void 0,horizontalDropZones:[]};let v=h.filter((e=>{let{top:t}=e;return Math.abs(t-(y?y.top:0))<=$c}));if(v.length>1){v=v.filter((e=>{const n=iu(e,t,o).x,i=Dc({device:r});return n>=e.left-i&&n<=e.left+e.width+i})),v=f().MR(v,(e=>{let{left:t}=e;return t}));let e=0;for(;e<v.length-1;e++){const n=v[e+1],i=iu(n,t,o).x;if(n.left>i)break}v=v.slice(0,e+1),v.reverse()}const x=v.map(Ac);let b;const S=g.filter((e=>e.direction===jc().v.Onto)),M=f().F(S,(e=>e.height));if(M){h.some((e=>{const n=iu(e,t,o).y;return Math.abs(e.top-n)<Qc}))||(b=Ac(M))}let j;const C=g.filter((e=>e.direction===jc().v.Left||e.direction===jc().v.Right)).sort(((e,t)=>e.height-t.height));let w=f().F(C,(e=>{const n=iu(e,t,o).x;return Math.abs(e.left-n)}));if(w){const e=w,t=C.filter((t=>Math.abs(t.left-e.left)<Xc));t.length>0&&(w=f().F(t,(e=>e.left)))}if(w){const e=w;h.some((t=>t.top>=e.top&&t.top+t.height<=e.top+e.height))||(j=Ac(w))}return{ontoDropZone:b,verticalDropZone:j,horizontalDropZones:x}}({points:{mousePoint:{x:n,y:i},originPoint:{x:n-o,y:i-s}},draggingStore:t[0],isNativeDrag:l,environment:a,pageContext:r,canDragFn:p});if(d.ontoDropZone)jc().default.setState({...e,currentDropZone:d.ontoDropZone,currentHintDropZones:[],currentParentStore:void 0});else if(d.verticalDropZone)jc().default.setState({...e,currentDropZone:d.verticalDropZone,currentHintDropZones:[],currentParentStore:void 0});else{if(d.horizontalDropZones.length>0){const t=d.horizontalDropZones[0],n=f().Gb(d.horizontalDropZones);if(t.type===jc().D.Selectable){const i=Wc().C.findSelectableFromStore(t.store);if(i){const o=i.getContextClosestSelectable();let s;return o&&o.props.store!==t.store&&o.props.shouldShowParentHalo&&(s=o.props.store),void jc().default.setState({...e,currentDropZone:t,currentHintDropZones:n,currentParentStore:s})}}else{if(Fc().Z.findDropTargetFromKey(t.key))return void jc().default.setState({...e,currentDropZone:t,currentHintDropZones:n,currentParentStore:void 0})}}jc().default.setState({...e,currentDropZone:void 0,currentHintDropZones:[],currentParentStore:void 0})}}),[a,p,r]),g=(0,i.useCallback)((()=>{if(e.current)throw new Error("Assertion failure, updateDragState() called when isUpdatingDragState === true!");e.current=!0;try{m()}finally{e.current=!1}}),[m]),h=(0,i.useCallback)((()=>{const{isDragging:e}=jc().default.state;e&&g()}),[g]),y=(0,i.useCallback)((()=>{t.current=!0}),[]);(0,i.useEffect)((()=>(window.addEventListener("mousemove",l),Ot().default.addListener(c),s.isIOS&&window.addEventListener("touchend",y),window.addEventListener("keydown",h),window.addEventListener("keyup",h),jc().default.addListener(d),window.addEventListener("scroll",su,!0),window.addEventListener("resize",au),It().kw.addListener(ru),oi().Jy(),()=>{window.removeEventListener("mousemove",l),Ot().default.removeListener(c),s.isIOS&&window.removeEventListener("touchend",y),window.removeEventListener("keydown",h),window.removeEventListener("keyup",h),jc().default.removeListener(d),window.removeEventListener("scroll",su,!0),window.removeEventListener("resize",au),It().kw.removeListener(ru)})),[s.isIOS,d,c,h,l,y])}function eu(){const e=Yc().default.state;e.isOpen&&!e.menuIsOpen&&Yc().default.reset()}function tu(e){return(Ot().default.state.droppableContainerStack||[]).indexOf(e)}function nu(e,t,n,i){var o,s;const a=Yc().default.state;if(a.isOpen&&a.menuIsOpen)return;const r=function(e){const{environment:t,target:n,x:i,y:o,rightMarginCommentActionsEnabled:s}=e;if(Gc().Z.state.isResizing||jc().default.state.isDragging||Ce().default.state.isActive||It().kw.state)return;const{selectableRectMap:a}=wc().default.state,r=zc().Z.getMembersByDOMOrder({filter:e=>{const t=e.getNode();return Boolean(t&&t.contains(n))}})[0];if(!r)return;const l=a.keys();let d=l.next();const c=[],u=[];for(;!d.done;){const e=d.value,n=a.get(e),p=qc().WA({environment:t,store:e.props.store,selectableBoundingRect:n}),m=qc().nl({store:e.props.store,selectableBoundingRect:n,containerWidth:p}),g=qc().ld(e);if((e.props.shouldShowHoverMenu||e.props.shouldShowCommentMenu)&&e.getContextSelectableContainer()===r&&n&&Fr().uh((0,Yc().getExpandedSelectableRect)(n,s,p,m,g),i,o)){for(const t of Yc().HOVER_REGIONS)Fr().uh((0,Yc().getHoverRegionOfRect)(n,t,p,m,g),i,o)&&u.push({selectable:e,hoveredRegion:t});Fr().uh((0,Yc().getExactSelectableRect)(n,s),i,o)&&c.push(e)}d=l.next()}const p=f().MR(c,(e=>{const t=a.get(e);return t?-t.left:1/0})),m=p.find((e=>{const t=e.getNode();return!t||!p.find((n=>{if(n!==e){const e=n.getNode();return Boolean(e&&t.contains(e))}return!1}))}));return m?{exactSelectable:m,nearbySelectables:u,container:r}:{nearbySelectables:u,container:r}}({environment:e,target:t,x:n,y:i,rightMarginCommentActionsEnabled:!0});if(!r)return void Yc().default.reset();const l=!a.isOpen||(null===(o=r.exactSelectable)||void 0===o?void 0:o.props.store)!==a.currentStore,d=a.isOpen&&(null===(s=r.exactSelectable)||void 0===s?void 0:s.props.store)===a.currentStore;var c,u;l?Yc().default.setState({...a,isOpen:!0,menuIsOpen:!1,container:r.container,nearbySelectables:r.nearbySelectables,currentStore:null===(c=r.exactSelectable)||void 0===c?void 0:c.props.store,selectableBoundingRect:null===(u=r.exactSelectable)||void 0===u||null===(u=u.getNode())||void 0===u?void 0:u.getBoundingClientRect(),mouseX:n,mouseY:i}):d&&Yc().default.setState({...a,nearbySelectables:r.nearbySelectables,mouseX:n,mouseY:i})}function iu(e,t,n){return Rc({device:n.device,target:e.target,points:t})}function ou(e){return(null==e?void 0:e.priority)??0}function su(){oi().Ch(),eu()}function au(){oi().Ch(),eu()}function ru(){const e=Yc().default.state,t=It().kw.state;e.isOpen&&!e.menuIsOpen&&t&&Yc().default.reset()}function lu(e){const{target:t,direction:n,optionKeyDown:i,environment:o,pageContext:s,canDragFn:a}=e;if(Me().Z.state.isOpen&&!ta().default.state.open)return!1;if(je().Z.state.isOpen)return!1;const r=jc().default.state,l=r.isDragging?r.draggedStores:[],d=!!r.isDragging&&r.isNativeDrag;let c,u,p,m=!1,g=!1;l.find((e=>{const t=Kc().Z.findOutlinerItemFromStore(e);return!!t&&(c=t,u=t.type,m=t.isTopLevelItem,!0)}));const f=(0,Mc().u)(t)?Kc().Z.findOutlinerItemFromStore(t.props.store):void 0,h=null==f?void 0:f.parentStore;var y;f&&(p=f.type,g=f.isTopLevelItem||"team"===(null===(y=f.parentStore)||void 0===y?void 0:y.table));if(function(e){var t;const{draggingOutlinerItem:n,selectableOutlinerItemParent:i,direction:o}=e;if(n&&"team"===n.type&&n.isTopLevelItem&&(null===(t=n.parentStore)||void 0===t?void 0:t.pointer.table)===xc().e0){const e=n.parentStore;if(!(n.store.getParentId()===e.pointer.id||i&&i.pointer.id===e.pointer.id&&o!==jc().v.Onto))return!0}return!1}({draggingOutlinerItem:c,selectableOutlinerItemParent:h,direction:n}))return!1;if(!(0,Mc().u)(t))return t.props.canAcceptDrop({direction:n,draggingStores:l,isNativeDrag:d});const v=t.props.store;if(v.pathIsDead())return!1;if((0,Kr().Eo)(v))return!1;if("suggest"===zr().MT.getMode(v))return!1;const x=(0,Sc().fm)(v);if(x&&x.isInTrashStore.state)return!1;const b=v.getAssociatedCollectionStore();if(n===jc().v.Onto&&b){const e=b.id,t=(0,Sc().fm)(v),n=null==t?void 0:t.collectionViewBlockStore(),i=null==t?void 0:t.collectionViewStore();if(n&&i&&"page"!==i.getType()){if(l.find((i=>{const o=i.getAssociatedCollectionStore(),s=(0,Sc().fm)(i);return Boolean(i instanceof te().G&&o&&o.id===e)||Boolean(s===t&&v.id!==n.id)})))return!1}}if(n!==jc().v.Onto){const e=(0,Sc().fm)(v);if("collectionTypedView"===(null==e?void 0:e.contextType)&&e.databaseType){if(!l.find((t=>{const n=(0,Sc().fm)(t);return(null==n?void 0:n.databaseType)===e.databaseType})))return!1}}if(t.props.groupsPointer){var S;const e=null===(S=v.getCollectionStore())||void 0===S?void 0:S.getSchema();if(Boolean(t.props.groupsPointer.find((t=>!(0,yc().WL)(t,(null==b?void 0:b.getSchema())??e))))){if(l.find((e=>{var n;const i=Wc().C.findSelectableFromStore(e);return(null==i||null===(n=i.props)||void 0===n?void 0:n.groupsPointer)&&t.props.groupsPointer&&!(0,vc().HH)(i.props.groupsPointer,t.props.groupsPointer)})))return!1}}if((0,Uc().ru)({targets:l,destination:v,direction:n,draggingOutlinerType:u}))return!1;if(i&&l.find((e=>e.isTypedCollectionViewBlock()||(0,bc().h7)(e))))return!1;if(f&&n!==jc().v.Onto&&!g&&!(0,ed().MaU)({environment:o,blocks:[f.store],publicEditMode:null==s?void 0:s.publicEditModeStore.state}))return!1;if(p&&d)return!1;if("bookmarks"===u&&m&&("bookmarks"!==p||!g||n===jc().v.Onto))return!1;if("bookmarks"===p&&g&&n!==jc().v.Onto&&("bookmarks"!==u||!m))return!1;if(c&&c.isTopLevelItem&&"team"===c.type&&c.parentStore&&c.parentStore.table===xc().e0){const e=c.parentStore,t=te().zX.createChildStore(e,{...e.pointer,table:xc().e0});if(t&&!(0,Ec().si)({teamStore:t,environment:o}))return!1}if(f&&f.isTopLevelItem&&"team"===f.type&&f.parentStore&&f.parentStore.table===xc().e0){const e=f.parentStore,t=te().zX.createChildStore(e,{...e.pointer,table:xc().e0});if(t&&!(0,Ec().si)({teamStore:t,environment:o}))return!1}const{currentSpaceViewStore:M}=J().default.state,j=p?Ec().TM[p]:void 0;if(M&&f&&c&&j&&f.isTopLevelItem&&n!==jc().v.Onto&&c.type!==p){const{sortOption:e}=(0,Ec().S4)({spaceViewStore:M,type:j});if("lastEdited"===e)return!1}if("shared"===p&&g&&n!==jc().v.Onto&&("shared"!==u||!m))return!1;if(p&&g&&n!==jc().v.Onto){if(l.find((e=>{const t=e.getType();return Boolean(!t||!$e().Z7[t])})))return!1}const{device:C}=o;if(p&&C.isMobile&&n===jc().v.Onto&&g)return!1;if(l.some((e=>Boolean(Nc().Z.findCollectionTemplatePickerItemFromStore(e))))!==Boolean(Nc().Z.findCollectionTemplatePickerItemFromStore(v)))return!1;if(n===jc().v.Onto&&v&&!(0,ed().J5S)({environment:o,blocks:[v],publicEditMode:null==s?void 0:s.publicEditModeStore.state}))return!1;if(!a(l))return!1;if(l.some((e=>e.isTransclusionType()))){if(v.findRecordStoreUIAncestor((e=>{if(e===v)return!1;const t=e.isTable("block")&&e.isPath([])&&e.getKeyStore("type").getValue();return Boolean(t&&(0,$e().nq)(t))})).ancestor)return!1}return!0}function du(){const e=(0,o().Fy)(),t=(0,o().O7)(),{isMobile:n,isElectron:d}=e;(0,i.useEffect)((()=>{if(n){function e(e){e.preventDefault()}return document.addEventListener("gesturestart",e),()=>{document.removeEventListener("gesturestart",e)}}}),[n]);const c=(0,s().VK)((()=>J().default.state.currentSpaceStore),[]),g=(0,O().E)("custom_emojis");(0,i.useEffect)((()=>{function e(e){e.preventDefault()}return window.addEventListener("dragstart",e),()=>{window.removeEventListener("dragstart",e)}}),[]),(0,i.useEffect)((()=>{function e(e){Ce().default.state.isActive&&(e.preventDefault(),a().MZ({environment:t,currentX:Ce().default.state.currentX,currentY:Ce().default.state.currentY,toggle:e.shiftKey}))}function n(e){Ce().default.state.isActive&&(e.preventDefault(),a().MZ({environment:t,currentX:e.clientX,currentY:e.clientY,toggle:e.shiftKey}))}function i(e){Ce().default.state.isActive&&((0,L().N9)(e)||e.preventDefault(),a().qw(t))}return window.addEventListener("keydown",e),window.addEventListener("keyup",e),window.addEventListener("mousemove",n),window.addEventListener("mouseup",i),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",e),window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",i)}}),[t]);const f=t.currentUser.isLoggedIn();return ie(c,f),Jc(),(0,A.jsxs)(i.Fragment,{children:[(0,A.jsx)(gt,{}),(0,A.jsx)(l().zI,{}),(0,A.jsx)(l().y4,{}),(0,A.jsx)(ue,{}),(0,A.jsx)(Te().Z,{priority:-1,capture:!0,debugName:"AppComponents"}),f&&!n&&(0,A.jsx)(Ll,{}),f&&(0,A.jsx)(be().AuthSyncListener,{}),f&&(0,A.jsx)(Jd,{}),f&&(0,A.jsx)(tn,{}),f&&(0,A.jsx)(on,{}),f&&(0,A.jsx)(_e,{}),f&&(0,A.jsx)(qn,{}),f&&(0,A.jsx)(ve,{}),(0,A.jsx)(Qt().Z,{}),(0,A.jsx)(Ya,{}),(0,A.jsx)(p().i4,{}),(0,A.jsx)(fr,{}),(0,A.jsx)(ar,{}),(0,A.jsx)(Zi,{}),(0,A.jsx)(Gt,{}),!n&&(0,A.jsx)(ul,{}),(0,A.jsx)(Ji,{}),(0,A.jsx)(tr,{}),(0,A.jsx)(co().Z,{}),(0,A.jsx)($t().Z,{store:Me().Z}),(0,A.jsx)($t().Z,{store:je().Z}),(0,A.jsx)(r()._,{}),(0,A.jsx)(qa,{}),(0,A.jsx)(Se().KS,{}),(0,A.jsx)(R,{}),(0,A.jsx)(On,{}),(0,A.jsx)(xe().Qi,{}),(0,A.jsx)(dc,{}),(0,A.jsx)(lo,{}),(0,A.jsx)(ic,{}),(0,A.jsx)(Nt,{}),(0,A.jsx)(Vl().Z,{}),(0,A.jsx)(re,{}),d&&(0,A.jsx)(u,{}),(0,A.jsx)(hn,{}),(0,A.jsx)(Xt().v,{}),f&&(0,A.jsx)(Zd,{}),(0,A.jsx)(Gi().s6,{}),(0,A.jsx)(Ke,{}),(0,A.jsx)(Jt().ek,{}),f&&g&&(0,A.jsx)(cn,{}),g&&(0,A.jsx)(m().Z,{})]})}},914038:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Me});n(667294);var i=()=>n(219727),o=()=>n(142735),s=()=>n(306164),a=()=>n(788860),r=()=>n(513670),l=()=>n(696459),d=()=>n(769197),c=()=>n(388284),u=n(785893);const p=[{key:"block in comment menu primary",render:e=>(0,u.jsx)(c().Z,{...e}),actions:[n(83110).G,d().yN,d().TH]}];var m=()=>n(79755),g=()=>n(182008);const f=[{key:"page mention context menu primary",render:e=>(0,u.jsx)(c().Z,{isTitleUppercase:!1,...e}),actions:[...n(55853).ej,g().Kk,g().Hs]}];var h=()=>n(491927),y=()=>n(242619),v=()=>n(718959),x=()=>n(861026),b=()=>n(352230),S=()=>n(148126),M=()=>n(465371),j=()=>n(466970),C=()=>n(10271),w=()=>n(772529),k=(n(241792),()=>n(568017)),_=()=>n(38562),T=()=>n(421654),I=()=>n(269299),P=()=>n(421797),A=()=>n(527278),R=()=>n(765516),Z=()=>n(654723),B=()=>n(802600),D=()=>n(739479),L=()=>n(156958);const O=(0,a().vU)({simpleTableHeaderColumn:{id:"action.rowHeader.title",defaultMessage:"Header column"},simpleTableHeaderRow:{id:"action.columnHeader.title",defaultMessage:"Header row"},simpleTableInsertColumnLeft:{id:"action.insertColumnLeft.title",defaultMessage:"Insert Left"},simpleTableInsertColumnRight:{id:"action.insertColumnRight.title",defaultMessage:"Insert Right"},simpleTableClearContents:{id:"action.clearContents.title",defaultMessage:"Clear Contents"},simpleTableInsertRowAbove:{id:"action.insertRowAbove.title",defaultMessage:"Insert Above"},simpleTableInsertRowBelow:{id:"action.insertRowBelow.title",defaultMessage:"Insert Below"},textColorSection:{id:"action.section.textColor",defaultMessage:"Text Color"},backgroundColorSection:{id:"action.section.backgroundColor",defaultMessage:"Background Color"}}),H=(0,_().N$)({key:"simple table header column",displayName:O.simpleTableHeaderColumn,label:A().Z.formatMessage(O.simpleTableHeaderColumn),svg:n(786687).s,validators:[P().J5S,P().ffD(P().b47),P().W5_,P().p4X],isEnabled:e=>Boolean(e.getFormat().table_block_row_header),action:(e,t,n)=>T().FH({stores:[t],update:{table_block_row_header:!t.getFormat().table_block_row_header},transaction:n})}),V=(0,_().N$)({key:"simple table header row",displayName:O.simpleTableHeaderRow,label:A().Z.formatMessage(O.simpleTableHeaderRow),svg:n(171745).f,validators:[P().J5S,P().ffD(P().b47),P().zOn],isEnabled:e=>{const t=e.getParentBlockStore();return!(null==t||!t.isType("table"))&&Boolean(t.getFormat().table_block_column_header)},action:(e,t,n)=>{const i=t.getParentBlockStore();null!=i&&i.isType("table")&&T().FH({stores:[i],update:{table_block_column_header:!i.getFormat().table_block_column_header},transaction:n})}}),U=(0,_().cN)({key:"insert column left",displayName:O.simpleTableInsertColumnLeft,analyticsName:O.simpleTableInsertColumnLeft.defaultMessage,svg:n(688798).V,validators:[P().J5S,P().ffD(P().OPg),P().W5_,P().z22],closeParentMenu:!0,action:e=>{let{environment:t}=e;I().createAndCommit({userAction:"actionRegistry.insertColumnLeft",environment:t,canUndo:!0,perform:e=>{L().uM({environment:t,transaction:e})}})}}),E=(0,_().cN)({key:"insert column right",displayName:O.simpleTableInsertColumnRight,analyticsName:O.simpleTableInsertColumnRight.defaultMessage,svg:n(522919).n,validators:[P().J5S,P().ffD(P().OPg),P().W5_,P().z22],closeParentMenu:!0,action:e=>{let{environment:t}=e;I().createAndCommit({userAction:"actionRegistry.insertColumnRight",environment:t,canUndo:!0,perform:e=>{L().xy({environment:t,transaction:e})}})}}),N=(0,_().cs)({key:"duplicate columns",displayName:_().RE.duplicateName,analyticsName:_().RE.duplicateName.defaultMessage,svg:B().a,validators:[P().J5S,P().ffD(P().OPg),P().W5_,P().z22],shortcuts:["duplicate"],closeParentMenu:!0,action:e=>{let{environment:t}=e;I().createAndCommit({userAction:"actionRegistry.duplicateColumns",environment:t,canUndo:!0,perform:e=>{L().Hh({transaction:e})}})}}),F=(0,_().cs)({key:"delete columns",displayName:_().RE.deleteName,analyticsName:_().RE.deleteName.defaultMessage,svg:D().y,validators:[P().J5S,P().ffD(P().OPg),P().W5_,P().OTA,P().z22],shortcuts:["delete","backspace"],closeParentMenu:!0,action:e=>{let{environment:t}=e;I().createAndCommit({userAction:"actionRegistry.deleteColumns",environment:t,canUndo:!0,perform:e=>{L().ih({environment:t,transaction:e})}})}}),K=(0,_().cN)({key:"clear column contents",displayName:O.simpleTableClearContents,analyticsName:O.simpleTableClearContents.defaultMessage,svg:Z().X,validators:[P().J5S,P().ffD(P().OPg),P().W5_,P().z22],closeParentMenu:!0,action:e=>{let{environment:t}=e;I().createAndCommit({userAction:"actionRegistry.clearColumnContents",environment:t,canUndo:!0,perform:e=>{L().WO({environment:t,transaction:e})}}),L().MO()}}),z=(0,_().cN)({key:"insert row above",displayName:O.simpleTableInsertRowAbove,analyticsName:O.simpleTableInsertRowAbove.defaultMessage,svg:n(536635).Z,validators:[P().J5S,P().ffD(P().OPg),P().EJd],closeParentMenu:!0,action:e=>{let{environment:t}=e;I().createAndCommit({userAction:"actionRegistry.insertRowAbove",environment:t,canUndo:!0,perform:e=>{L().co({environment:t,transaction:e})}})}}),W=(0,_().cN)({key:"insert row below",displayName:O.simpleTableInsertRowBelow,analyticsName:O.simpleTableInsertRowBelow.defaultMessage,svg:n(404553).M,validators:[P().J5S,P().ffD(P().OPg),P().EJd],closeParentMenu:!0,action:e=>{let{environment:t}=e;I().createAndCommit({userAction:"actionRegistry.insertRowBelow",environment:t,canUndo:!0,perform:e=>{L().Qs({environment:t,transaction:e})}})}}),q=(0,_().cs)({key:"duplicate rows",displayName:_().RE.duplicateName,analyticsName:_().RE.duplicateName.defaultMessage,svg:B().a,validators:[P().J5S,P().ffD(P().OPg),P().EJd],shortcuts:["duplicate"],closeParentMenu:!0,action:e=>{let{environment:t}=e;I().createAndCommit({userAction:"actionRegistry.duplicateRows",environment:t,canUndo:!0,perform:e=>{L().Fi({environment:t,transaction:e})}})}}),G=(0,_().cs)({key:"delete rows",displayName:_().RE.deleteName,analyticsName:_().RE.deleteName.defaultMessage,svg:D().y,validators:[P().J5S,P().ffD(P().OPg),P().W3A,P().EJd],shortcuts:["delete","backspace"],closeParentMenu:!0,action:e=>{let{environment:t}=e;I().createAndCommit({userAction:"actionRegistry.deleteRows",environment:t,canUndo:!0,perform:e=>{L().M5({environment:t,transaction:e})}})}}),Y=(0,_().cN)({key:"clear row contents",displayName:O.simpleTableClearContents,analyticsName:O.simpleTableClearContents.defaultMessage,svg:Z().X,validators:[P().J5S,P().ffD(P().OPg),P().EJd],closeParentMenu:!0,action:e=>{let{environment:t}=e;I().createAndCommit({userAction:"actionRegistry.clearRowContents",environment:t,canUndo:!0,perform:e=>{L().WO({environment:t,transaction:e})}}),L().MO()}}),$=[P().J5S,P().ffD(P().OPg),P().W5_,P().z22],X=[P().J5S,P().ffD(P().OPg),P().EJd];function Q(e,t,i,o){const s=o||(0,n(527511).qf)(e),a=(0,_().cN)({key:`color ${i||e}`,displayName:s,analyticsName:s.defaultMessage,fuzzySearchKeywords:(0,_().CJ)(e),validators:"column"===t?$:X,action:t=>{let{blocks:n,environment:i}=t;I().createAndCommit({userAction:"actionRegistry.createSimpleTableColorAction",environment:i,canUndo:!0,perform:t=>{L().vk(i,e,t)}})},closeParentMenu:!0,render:t=>(0,u.jsx)(n(406496).ZP,{...t,color:e,overrideDisplayName:a.displayName}),nativeImageReference:t=>{let{environment:n}=t;return(0,_().q7)(n,e,i)}});return a}const J=(0,_().$J)({key:"simple table column background color actions",title:_().RE.backgroundSection,overrideSearchTitle:_().RE.backgroundSectionKeywords,render:e=>(0,u.jsx)(c().Z,{...e}),actions:[...k()._K.map((e=>Q(e,"column")))]}),ee=(0,_().$J)({key:"simple table column text color actions",title:_().RE.colorSection,overrideSearchTitle:_().RE.colorSection,render:e=>(0,u.jsx)(c().Z,{...e}),actions:[...k().CY.map((e=>Q(e,"column")))]}),te=(0,_().$J)({key:"simple table row background color actions",title:_().RE.backgroundSection,overrideSearchTitle:_().RE.backgroundSectionKeywords,render:e=>(0,u.jsx)(c().Z,{...e}),actions:[...k()._K.map((e=>Q(e,"row")))]}),ne=(0,_().$J)({key:"simple table row text color actions",title:_().RE.colorSection,overrideSearchTitle:_().RE.colorSection,render:e=>(0,u.jsx)(c().Z,{...e}),actions:[...k().CY.map((e=>Q(e,"row")))]}),ie=(0,_().MV)({key:"set column color",displayName:_().RE.colorName,analyticsName:_().RE.colorName.defaultMessage,svg:R().U,validators:$,subActions:()=>[{key:0,title:A().Z.formatMessage(O.textColorSection),render:e=>(0,u.jsx)(c().Z,{...e}),actions:ee.actions},{key:1,title:A().Z.formatMessage(O.backgroundColorSection),render:e=>(0,u.jsx)(c().Z,{...e}),actions:J.actions}]}),oe=(0,_().MV)({key:"set row color",displayName:_().RE.colorName,analyticsName:_().RE.colorName.defaultMessage,svg:R().U,validators:X,subActions:()=>[{key:0,title:A().Z.formatMessage(O.textColorSection),render:e=>(0,u.jsx)(c().Z,{...e}),actions:ne.actions},{key:1,title:A().Z.formatMessage(O.backgroundColorSection),render:e=>(0,u.jsx)(c().Z,{...e}),actions:te.actions}]}),se=[(0,_().$J)({key:"column section",render:e=>(0,u.jsx)(c().Z,{...e}),actions:[H,ie,U,E,N,K,F]}),(0,_().$J)({key:"row section",render:e=>(0,u.jsx)(c().Z,{...e}),actions:[V,oe,z,W,q,Y,G]})];var ae=()=>n(998901),re=()=>n(104088),le=()=>n(876822),de=()=>n(340819),ce=()=>n(826955),ue=()=>n(965903),pe=()=>n(8881),me=()=>n(985523),ge=()=>n(149809),fe=()=>n(740046),he=()=>n(94967),ye=()=>n(198829),ve=()=>n(470386),xe=()=>n(967092),be=()=>n(409318),Se=()=>n(508181);function Me(){const e=(0,i().Fy)();return e.isMobileNative&&e.isIOS&&e.isPhone?(0,u.jsx)(je,{}):(0,u.jsx)(Ce,{})}function je(){const e=(0,o().Kw)(de().Z);return(0,C().Z)({shouldPreserveTextSelection:e.isActive,shouldPreserveBlockSelection:!1,shouldRestoreSelection:!0}),(0,u.jsx)(Ce,{})}function Ce(){const e=(0,i().Fy)(),t=(0,o().Kw)(de().Z),n=(0,j().E)("mobile_use_bottom_sheet_popup_container");return(0,u.jsx)(xe().ZP,{popupType:e.isPhone?n?re().k.BottomSheet:re().k.SlideUp:re().k.Popup,open:t.isActive,originRect:t.isActive?t.originBlockRect:void 0,onDismiss:Ie,placementToOrigin:ae().Placement.Bottom,alignmentToOrigin:ae().Alignment.Start,originGap:0,preventScaleTransition:!0,render:()=>(0,u.jsx)(we,{}),preventBlockRenderQueueOnEnter:e.isMobile})}function we(){var e;const t=(0,i().O7)(),n=(0,i().MO)(),c=(0,be().L)(),g=(0,o().Kw)(de().Z),v=null===(e=g.stores)||void 0===e?void 0:e[0],S=(0,o().VK)((()=>null==v?void 0:v.isCollectionView()),[v]),j=(0,o().VK)((()=>g.isActive?function(e){switch(e){case"default":return d().Qi;case"simple_table":return se;case"page_mention":return f;case"sidebar_outliner":return m().Oq;case"comment_media":return p;case"block_in_collection_timeline_view":return d().KC;case"block_in_collection":return d().p0;default:(0,l().t1)(e)}}(null==g?void 0:g.actionSectionGroupKey):[]),[g]);if(!g.isActive||!v)return null;const{originBlockRect:C,inputValue:w,publicEditMode:k}=g||{},_={environment:t,blocks:g.stores,originRect:C,publicEditMode:k},T=g.showInput&&(0,u.jsx)(Te,{}),I=n?{menuType:b().o.Modal,title:(0,u.jsx)(a()._H,{defaultMessage:"Actions",id:"blockMenu.actionButton.label"}),right:c?void 0:(0,u.jsx)(ve().DoneMenuText,{}),onClickRight:Ie,header:T}:{menuType:b().o.Popup,width:265,header:T};return(0,u.jsx)(he().Z,{debugName:"BlockMenu",capture:!0,onBackspace:r().yR,children:(0,u.jsxs)(ye().Z,{...I,children:[(0,u.jsx)(ge().Z,{filter:w,context:_,sections:j,onAccept:e=>function(e,t){const n=de().Z.state;if(!n.isActive)return;const{stores:i}=ue().default.state,{analyticsFrom:o,collectionContextStore:a}=n,r=i[0];if(r){const n=r.getParentTable(),i=r.getType();if(i&&n){let l;if(n===s().e0){const e=r.getParentId(),{currentSpaceStore:t}=le().default.getState();t&&void 0!==e&&(l=ce().zX.createChildStore(t,{table:s().e0,id:e}))}const d=(0,x().Pn)(a)||{};h().dh(t,{analyticsName:e.analyticsName,action_type:e.analyticsActionType,from:o,block_id:r.id,block_type:i,parentTeamStore:l,is_toggleable:(0,M()._A)(i,r.getFormat()),parent_collection_id:r.getParentCollectionIdUpToTwoLevels(),...d})}}e.closeParentMenu&&y().xv()}(e,t),initialFocus:w?0:void 0}),!w&&(0,u.jsx)(_e,{}),!w&&(0,u.jsx)(pe().Z,{store:v}),!w&&S&&(0,u.jsx)(ke,{})]})})}function ke(){const[e,t]=(0,o().VK)((()=>{const e=de().Z.state;if(!e.isActive)return[!1,!1];const t=e.stores[0];return[!0,(0,v().qG)(t.id)]}),[]);return e?t?(0,u.jsx)(c().Z,{topBorder:!0,children:(0,u.jsx)(Se().Z,{title:(0,u.jsx)(a()._H,{defaultMessage:"Learn about tasks",id:"myTasks.helpTooltip.title"}),href:w().su,analyticsFrom:"block_menu"})}):(0,u.jsx)(c().Z,{topBorder:!0,children:(0,u.jsx)(Se().Z,{title:(0,u.jsx)(a()._H,{defaultMessage:"Learn about databases",id:"blocks.blockMenu.collectionHelpButton"}),href:(0,S().UY)("guides.database"),analyticsFrom:"block_menu"})}):null}function _e(){const e=(0,i().O7)(),t=(0,o().Kw)(de().Z),n=(0,o().VK)((()=>e.currentUser.isLoggedIn()),[e]),s=(0,o().VK)((()=>t.isActive&&1===t.stores.length&&(0,v().qG)(t.stores[0].id)),[t]);return n?!t.isActive||t.stores.length>1||s?null:(0,u.jsx)(me().y,{store:t.stores[0],isPageMoreButton:!1}):null}function Te(){const e=(0,a().YB)(),t=(0,i().MO)(),n=(0,o().Kw)(de().Z);if(!n.isActive||t)return null;const{inputValue:s}=n;return(0,u.jsx)(c().Z,{isInput:!0,children:(0,u.jsx)(fe().ZP,{value:s,onChange:Pe,focus:!0,focusAfterAnimation:!0,placeholder:e.formatMessage({defaultMessage:"Search actions…",id:"blockMenu.filterForActions.placeholder"}),preventCaptureDeleteWhenEmpty:!0})})}function Ie(){y().xv()}function Pe(e){de().Z.state.isActive&&de().Z.setState({...de().Z.state,inputValue:e.target.value})}},910002:(e,t,n)=>{n.r(t),n.d(t,{CollectionTypedDatabaseMigrationModal:()=>ae});var i=n(667294),o=()=>n(219727),s=()=>n(142735),a=()=>n(846550),r=()=>n(926724),l=()=>n(788860),d=()=>n(530261),c=(n(241792),()=>n(714230)),u=()=>n(707513),p=()=>n(527278),m=n(785893);const g=(0,n(827282).IU)("drawing",{viewBox:"0 0 12 12",svg:(0,m.jsx)("path",{d:"M2.606 9.98a6.714 6.714 0 01-1.162-1.538A6.54 6.54 0 01.8 6.752a5.933 5.933 0 01-.132-1.698c.042-.557.17-1.081.38-1.573.216-.494.512-.932.89-1.313a4.043 4.043 0 011.347-.898A4.761 4.761 0 014.887.928a5.48 5.48 0 011.68.185c.56.15 1.09.381 1.591.694l-.845.83a4.757 4.757 0 00-1.152-.435 4.372 4.372 0 00-1.23-.127c-.41.013-.804.093-1.182.24-.374.146-.71.367-1.006.664a3.09 3.09 0 00-.796 1.352 4.196 4.196 0 00-.117 1.646c.068.576.236 1.14.503 1.694.27.553.63 1.055 1.08 1.504.276.28.564.516.863.708a6 6 0 00.884.469c.287.123.552.22.796.288.247.071.456.127.625.166a.784.784 0 01.4.215c.092.1.136.23.132.39-.006.186-.078.322-.215.41-.136.091-.314.12-.532.088a6.388 6.388 0 01-.698-.151 7.184 7.184 0 01-1.997-.903 6.64 6.64 0 01-1.065-.875zm1.968-1.523L5.8 7.988a3.6 3.6 0 00.874.635c.329.17.669.282 1.02.337.352.055.694.039 1.026-.049a2.03 2.03 0 00.903-.542 1.85 1.85 0 00.537-1.035 2.906 2.906 0 00-.083-1.294 4.542 4.542 0 00-.64-1.348l.826-.82c.341.475.599.962.771 1.46.176.495.27.978.283 1.45.013.472-.055.913-.205 1.323a2.913 2.913 0 01-.678 1.075c-.3.3-.647.52-1.04.664-.391.14-.804.208-1.24.205-.434 0-.867-.064-1.3-.19a5.255 5.255 0 01-1.24-.547 4.715 4.715 0 01-1.04-.855zM5.6 7.48l-1.177.445c-.085.032-.165.014-.24-.054a.21.21 0 01-.053-.244l.459-1.162 4.443-4.439 1.011 1.011L5.6 7.48zm4.819-4.814l-1.01-1.01.468-.47a.716.716 0 01.44-.21.481.481 0 01.414.142l.176.171a.551.551 0 01.171.45.703.703 0 01-.205.453l-.454.474z"})});var f=()=>n(734039),h=()=>n(957001),y=()=>n(533845),v=()=>n(643051),x=()=>n(396439),b=()=>n(67961);const S=(0,l().vU)({dummyTask1:{id:"MyTasksWidgetPreview.dummyTask1",defaultMessage:"Set up sync with Lisa"},dummyTask2:{id:"MyTasksWidgetPreview.dummyTask2",defaultMessage:"Review design docs"},dummyTask3:{id:"MyTasksWidgetPreview.dummyTask3",defaultMessage:"Create color palette"},dummyTask4:{id:"MyTasksWidgetPreview.dummyTask4",defaultMessage:"Book flight to New York"},dummyTask5:{id:"MyTasksWidgetPreview.dummyTask5",defaultMessage:"Fix broken links"},dummyTask6:{id:"MyTasksWidgetPreview.dummyTask6",defaultMessage:"Upgrade database"},Blocked:{id:"MyTasksWidgetPreview.blockedStatus",defaultMessage:"Blocked"},"In Progress":{id:"MyTasksWidgetPreview.inProgressStatus",defaultMessage:"In Progress"},"Not Started":{id:"MyTasksWidgetPreview.notStartedStatus",defaultMessage:"Not Started"},locationIndicator:{id:"MyTasksWidgetPreview.locationIndicator",defaultMessage:"In"}}),M=[{icon:"📅",taskName:p().Z.formatMessage(S.dummyTask1),status:"Blocked",teamspace:"Eng",location:(0,f().T)({width:13,fill:"#448361"})},{icon:"📚",taskName:p().Z.formatMessage(S.dummyTask2),status:"In Progress",teamspace:"Design",location:g({width:13,fill:"#CB912F"})},{icon:"🎨",taskName:p().Z.formatMessage(S.dummyTask3),status:"In Progress",teamspace:"Design",location:g({width:13,fill:"#CB912F"})},{icon:"🛫",taskName:p().Z.formatMessage(S.dummyTask4),status:"Not Started",teamspace:"Eng",location:(0,f().T)({width:13,fill:"#448361"})},{icon:"🚧",taskName:p().Z.formatMessage(S.dummyTask5),status:"Not Started",teamspace:"Design",location:g({width:13,fill:"#CB912F"})},{icon:"👩‍💻",taskName:p().Z.formatMessage(S.dummyTask6),status:"Not Started",teamspace:"Eng",location:(0,f().T)({width:13,fill:"#448361"})}],j={Blocked:"red","In Progress":"blue","Not Started":"gray"};function C(){const e=_();return(0,m.jsx)(h().Z,{title:(0,m.jsx)(l()._H,{id:"CollectionTypedDatabaseMigrationModal.AssignedToMePreview.Title",defaultMessage:"My tasks"}),tooltip:void 0,icon:(0,m.jsx)("div",{style:{paddingLeft:4},children:(0,m.jsx)(v().Z,{type:"app_package_asset",size:18,icon:c().Z.images.appPackages.taskDbIconSvg})}),children:(0,m.jsx)("div",{style:e.dummyAssignedToMe,children:(0,m.jsx)(w,{})})})}function w(){const e=M.map(((e,t)=>(0,m.jsx)(k,{row:e},t)));return(0,m.jsx)("div",{style:{display:"flex",marginTop:4,paddingRight:16,flexDirection:"column"},children:e})}function k(e){let{row:t}=e;const n=_();return(0,m.jsxs)("div",{style:n.eachTask,children:[(0,m.jsxs)("div",{style:n.taskName,children:[(0,m.jsx)("span",{style:n.taskIcon,children:t.icon}),(0,m.jsx)(b().Z,{style:n.taskTitle,children:t.taskName})]}),(0,m.jsx)("div",{style:n.taskStatus,children:(0,m.jsx)(y().J,{type:"status",value:p().Z.formatMessage(S[t.status]),color:j[t.status],groupColor:void 0})}),(0,m.jsx)(x().Z,{size:8}),(0,m.jsxs)("div",{style:n.location,children:[(0,m.jsx)("span",{style:n.locationIndicator,children:p().Z.formatMessage(S.locationIndicator)}),(0,m.jsx)("div",{style:{...n.locationIcon,..."Design"===t.teamspace?{...n.designTeamspace}:{...n.engTeamspace}},children:t.location})]})]})}function _(){return(0,a().yK)((e=>({dummyAssignedToMe:{width:"60%",maxHeight:270,minHeight:90,paddingBottom:10},eachTask:{display:"flex",alignItems:"center",padding:4},taskName:{width:220,display:"flex",...u().Yu},taskIcon:{fontSize:14,marginRight:8},taskTitle:{color:e.regularTextColor,fontSize:14,fontWeight:500},taskStatus:{display:"flex",width:130},location:{display:"flex",alignItems:"center"},locationIndicator:{color:e.mediumTextColor,marginRight:4,maxWidth:48,...u().Yu},locationIcon:{display:"flex",justifyContent:"center",fontSize:14,height:18,width:18,borderRadius:4},designTeamspace:{backgroundColor:"light"===e.mode?"#FBF3DB":"#5c3b23"},engTeamspace:{backgroundColor:"light"===e.mode?"#E5F2E2":"#243d30"}})),[])}n(267602),n(653476),n(30005),n(228244);var T=()=>n(506347),I=()=>n(197874),P=()=>n(766933),A=()=>n(568017),R=()=>n(250303),Z=()=>n(102182),B=()=>n(269299),D=()=>n(360746),L=()=>n(2971),O=()=>n(110232),H=()=>n(360240),V=()=>n(478824),U=()=>n(352230),E=()=>n(615634),N=()=>n(521777),F=()=>n(772529),K=()=>n(128119),z=()=>n(584989),W=()=>n(827973),q=()=>n(448419),G=()=>n(198829),Y=()=>n(255577),$=()=>n(392192),X=()=>n(906651),Q=()=>n(388284),J=()=>n(360964);function ee(e){const{collectionContextStore:t,databaseType:n,containerStyle:c}=e,u=(0,o().O7)(),p=(0,l().YB)(),{isPhone:g,isMobileNative:f}=(0,o().Fy)(),h=(0,s().VK)((()=>g&&f),[g,f]),y=function(e){return(0,a().yK)((t=>({formTitle:{display:"inline-flex"},emojiTitle:{fontSize:36,marginRight:8},perPropertyInstruction:{color:t.mediumTextColor,fontSize:e?14:12,marginBottom:8},requiredPropertyError:{color:A().ZP.red,fontSize:e?14:12,marginRight:e?8:6},propertyMappingInstructions:{marginTop:6,marginBottom:24,fontSize:e?16:14,fontWeight:e?500:400},propertyMappingDropdown:{display:"flex",alignItems:"center"},chevronDownIconEnabled:{width:e?14:10,fill:t.lightIconColor},propertyMappingTitle:{fontSize:e?16:14,color:t.lightTextColor},propertyMappingMenu:{borderRadius:6,border:`1px solid ${t.tableDividerColor}`,boxShadow:"none"},propertyConversionCallout:{display:"flex",alignItems:"center",marginLeft:4,marginTop:3,color:t.lightTextColor},a:{color:"white",cursor:"pointer"},propertyIcon:{fill:t.darkTextColor},buttons:{marginBlockStart:e?"auto":void 0},submitMigrationButton:{display:"flex",height:e?36:32,fontSize:e?16:14},learnMore:{display:"flex",justifyContent:"center",marginTop:8,marginLeft:0,width:"100%"},learnMoreButton:{display:"inline-flex",justifyContent:"center",width:"100%",height:26},closeButton:{width:"100%",height:36,marginTop:8,display:"inline-flex",justifyContent:"center",fontSize:16,color:t.lightTextColor}})),[e])}(g),v=(0,a().Fg)(),[S,M]=(0,i.useState)(!1),j=(0,s().VK)((()=>{var e;return null===(e=t.collectionStore())||void 0===e?void 0:e.getSchema()}),[t]),C=(0,s().VK)((()=>O().ck((0,L().appConfigs)(),n)),[n]),w=(0,s().VK)((()=>{if(j&&C)return O().Au(C,j)}),[C,j]),k=(0,i.useCallback)(((e,t)=>{const n=t.type;return O().fm(e,t,j??{}).map((e=>{let[t,i]=e;return{key:t,title:null==i?void 0:i.name,icon:(0,m.jsx)(P().ZP,{size:16,style:y.propertyIcon,theme:v,icon:null==i?void 0:i.icon,type:(null==i?void 0:i.type)||n})}}))}),[v,y.propertyIcon,j]),_=(0,s().VK)((()=>{const e=Object.keys(C||{}).filter((e=>void 0!==(null==C?void 0:C[e])&&e.startsWith("notion://"))),t=Object.fromEntries(e.map((e=>[e,void 0])));return Object.entries(C||{}).forEach((e=>{let[n,i]=e;if(!i)return;const o=null==w?void 0:w[n];if(o)return void(t[n]=o);0===k(n,i).length&&(t[n]=I().bK)})),t}),[C,w,k]),[ee,ie]=(0,i.useState)(_),oe=(0,i.useMemo)((()=>Object.entries(ee).some((e=>{let[t,n]=e;if(t===r().Es.Status){const e=null==j?void 0:j[n||""];if("checkbox"===(null==e?void 0:e.type)||"select"===(null==e?void 0:e.type))return!0}}))),[j,ee]),se=(0,i.useCallback)((e=>{const t=null==C?void 0:C[e],n={width:16,height:16,marginRight:10};if(!t)return null;const i=[...k(e,t),{key:I().bK,title:p.formatMessage(te.createNew),icon:(0,N().R)({width:n.width,fill:y.propertyIcon.fill}),type:void 0}],o=ee[e],s=null==j?void 0:j[o||""],a=!o&&S,d=e===r().Es.Status;let c=null;return o===I().bK?c=(0,N().R)(n):s&&(c=P().wG[null==s?void 0:s.type](n)),(0,m.jsx)(q().ZP,{popupType:g?q().Z4.SlideUp:q().Z4.Popup,renderOrigin:t=>(0,m.jsxs)("div",{style:{marginBottom:24},children:[(0,m.jsx)(b().Z,{isMultiline:!0,style:y.perPropertyInstruction,children:(0,m.jsx)(l()._H,{id:"CollectionTypedDatabaseMigrationModal.PropertyMapping.PerPropertyInstructions",defaultMessage:"Pick the property that represents {propertyDescription}",values:{propertyDescription:p.formatMessage(ne[e])}})}),(0,m.jsx)(W().Z,{disabled:1===i.length,disabledFeedback:!0,focused:!1,right:(0,m.jsxs)("div",{style:y.propertyMappingDropdown,children:[a?(0,m.jsx)("span",{style:y.requiredPropertyError,children:(0,m.jsx)(l()._H,{id:"CollectionTypedDatabaseMigrationModal.PropertyMapping.RequiredPropertyError",defaultMessage:"Required"})}):void 0,(0,E().i)({...y.chevronDownIconEnabled,...a?{fill:A().ZP.red}:{}})]}),rightStyle:{marginRight:g?14:8},title:(0,m.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[c,o===I().bK?p.formatMessage(te.createNew):s?s.name:p.formatMessage(te.select)]}),titleStyle:o?{display:"flex",alignItems:"center"}:y.propertyMappingTitle,itemMarginLeft:8,style:{...y.propertyMappingMenu,...a?{borderColor:A().ZP.red}:{}},buttonStyle:{margin:0,width:"100%"},...t}),d&&oe&&(0,m.jsx)(b().Z,{isSmall:!0,isMultiline:!0,children:(0,m.jsx)("div",{style:y.propertyConversionCallout,children:(0,m.jsx)(l()._H,{id:"CollectionTypedDatabaseMigrationModal.PropertyMapping.CheckboxSelectMappingInfo",defaultMessage:"This property will be converted to a Status property type."})})})]}),placementToOrigin:K().Iw.Bottom,alignmentToOrigin:K().lU.Start,render:t=>{const n=[{key:"propertyOptions",render:e=>(0,m.jsx)(Q().Z,{...e,topBorder:0!==e.index}),items:i.map((n=>{const i={key:n.key,render:t=>(0,m.jsx)(W().Z,{...t,icon:n.icon,title:n.title,checkState:ee[e]===n.key}),action:()=>{ie({...ee,[e]:n.key}),M(!1),t.close()}};return i}))}],o=g?{menuType:U().o.ActionSheet}:{menuType:U().o.Popup,width:250};return(0,m.jsx)(G().Z,{...o,children:(0,m.jsx)(Y().Z,{type:Y().i.Vertical,initialFocus:void 0,sections:n})})}},e)}),[C,k,p,y,ee,j,S,oe,g]),ae=(0,i.useCallback)((()=>{var e,i;const o=t.collectionStore(),s=t.collectionViewBlockStore();if(!o||!s)return;const a=(0,F().J2)("main"),c=null==a||null===(e=a.getModel())||void 0===e?void 0:e.getRenderUrl({getRecordModel:null==a?void 0:a.getRecordModel,pageVisitSource:T().tY.TypedDBConversionToast}),g=(0,F().J2)("myTasks"),f=null==g||null===(i=g.getModel())||void 0===i?void 0:i.getRenderUrl({getRecordModel:null==g?void 0:g.getRecordModel,pageVisitSource:T().tY.TypedDBConversionToast});!function(e){return!Object.values(e).includes(void 0)}(ee)?M(!0):B().createAndCommit({userAction:"CollectionTypedDatabaseMigrationModal.migrateDatabase",environment:u,canUndo:!0,perform:e=>{D().vD({environment:u,collectionViewBlockStore:s,collectionStore:o,databaseType:n,propertyMapping:{...ee},typedPropertySchemas:{...C},transaction:e}),d().Z.setState({isModalOpen:!1,collectionContextStore:void 0}),n===r().Ym&&(V().y.locallyMutatedTasksDatabase=!0),R().g2({environment:u,database_type:n,property_mapping:ee,collectionContextStore:t});const i=h?(0,m.jsx)(l()._H,{defaultMessage:"<span>{databaseName} has been turned into a {singularType} database. You will now be able to see your assigned tasks in <a>My tasks</a>.</span>",id:"CollectionTypedDatabaseMigrationModal.PropertyMapping.SuccessfulTypingToastMessage.nativePhone",values:{singularType:(0,H().sN)(n),databaseName:o.getName()||p.formatMessage(te.defaultCollectionName),span:e=>(0,m.jsx)("span",{children:e}),a:e=>(0,m.jsx)("a",{style:y.a,href:f,children:e})}}):(0,m.jsx)(l()._H,{defaultMessage:"<span>{databaseName} has been turned into a {singularType} database. You will now be able to see your assigned tasks in <a>Home</a>.</span>",id:"CollectionTypedDatabaseMigrationModal.PropertyMapping.SuccessfulTypingToastMessage",values:{singularType:(0,H().sN)(n),databaseName:o.getName()||p.formatMessage(te.defaultCollectionName),span:e=>(0,m.jsx)("span",{children:e}),a:e=>(0,m.jsx)("a",{style:y.a,href:c,children:e})}});Z().d4({item:{label:i,durationMs:z().JY},undoFunc:()=>{B().createAndCommit({environment:u,userAction:"CollectionTypedDatabaseMigrationModal.TypedDBConversionToast.Undo",canUndo:!0,perform:e=>{D().RQ({environment:u,collectionContextStore:t,transaction:e})}})}})}})}),[t,ee,u,n,C,h,p,y.a]);return(0,m.jsxs)("div",{style:c,children:[(0,m.jsxs)("div",{style:y.formTitle,children:[g?(0,m.jsx)("span",{style:y.emojiTitle,children:"📋"}):null,(0,m.jsx)(b().Z,{style:y.propertyMappingInstructions,isMultiline:!0,children:(0,m.jsx)(l()._H,{id:"CollectionTypedDatabaseMigrationModal.PropertyMapping.Title",defaultMessage:"Task databases require status, assignee, and due date properties."})})]}),g?(0,m.jsx)(x().Z,{size:16}):null,Object.entries(_).map((e=>{let[t,n]=e;return se(t)})),(0,m.jsxs)("div",{style:y.buttons,children:[(0,m.jsx)(X().Z,{style:y.submitMigrationButton,onClick:ae,children:(0,m.jsx)(l()._H,{defaultMessage:"Turn into {type} database",id:"CollectionTypedDatabaseMigrationModal.ConfirmMigration.Title",values:{type:(0,H().sN)(n)}})}),g?(0,m.jsx)($().Z,{style:y.closeButton,onClick:()=>d().Z.reset(),children:(0,m.jsx)(l()._H,{id:"CollectionTypedDatabaseMigrationModal.Close",defaultMessage:"Close"})}):(0,m.jsx)(J().Z,{title:(0,m.jsx)(l()._H,{id:"CollectionTypedDatabaseMigrationModal.Info",defaultMessage:"Learn about {type} databases",values:{type:(0,H().sN)(n)}}),analyticsFrom:"set_database_type",href:F().su,style:y.learnMore,buttonStyle:y.learnMoreButton})]})]})}const te=(0,l().vU)({createNew:{id:"CollectionTypedDatabaseMigrationModal.PropertyMapping.CreateNew",defaultMessage:"Create new"},select:{id:"CollectionTypedDatabaseMigrationModal.PropertyMapping.Select",defaultMessage:"Select..."},defaultCollectionName:{id:"CollectionTypedDatabaseMigrationModal.PropertyMappingToastSuccess.DefaultCollectionName",defaultMessage:"This database"},taskStatus:{id:"CollectionTypedDatabaseMigrationModal.PropertyMapping.TaskStatus",defaultMessage:"status"},taskAssignee:{id:"CollectionTypedDatabaseMigrationModal.PropertyMapping.TaskAssignee",defaultMessage:"assignee"},taskDueDate:{id:"CollectionTypedDatabaseMigrationModal.PropertyMapping.TaskDueDate",defaultMessage:"due date"}}),ne={[r().Es.Status]:te.taskStatus,[r().Es.Assign]:te.taskAssignee,[r().Es.DueDate]:te.taskDueDate};var ie=()=>n(708518),oe=()=>n(764767);const se=32;function ae(){const e=ce(),t=(0,o().Fy)(),n=(0,s().Kw)(d().Z);return n.isModalOpen?t.isPhone?(0,m.jsx)(oe().n,{fullscreen:!0,innerStyle:e.phoneInner,renderInner:()=>(0,m.jsx)(de,{collectionContextStore:n.collectionContextStore})}):(0,m.jsx)(ie().Z,{open:!0,onDismiss:()=>d().Z.reset(),innerStyle:e.desktopInner,render:()=>(0,m.jsx)(le,{collectionContextStore:n.collectionContextStore})}):null}const re=450;function le(e){const t=ce();return(0,m.jsxs)("div",{style:{display:"flex",flexDirection:"column",position:"relative"},children:[(0,m.jsxs)("div",{style:t.title,children:[(0,m.jsx)("span",{style:t.emojiTitle,children:"📋"}),(0,m.jsx)(b().Z,{isMultiline:!0,style:t.previewTitle,children:(0,m.jsx)(l()._H,{id:"CollectionTypedDatabaseMigrationModal.AssignedToMePreview.Description",defaultMessage:"See all your tasks across multiple databases in your personal Home."})})]}),(0,m.jsx)(x().Z,{size:36}),(0,m.jsx)(C,{}),(0,m.jsx)(ee,{collectionContextStore:e.collectionContextStore,databaseType:r().Ym,containerStyle:t.form})]})}function de(e){const t=ce();return(0,m.jsx)(ee,{collectionContextStore:e.collectionContextStore,databaseType:r().Ym,containerStyle:t.phoneForm})}function ce(){return(0,a().yK)((e=>({desktopInner:{width:768,height:re,padding:se},phoneInner:{width:"100%",height:"100%"},title:{display:"flex",maxWidth:"60%",alignItems:"center"},emojiTitle:{fontSize:36,marginRight:16},previewTitle:{color:e.regularTextColor,width:350,fontSize:17,fontWeight:500},form:{width:"45%",height:re,background:e.surface.wash,position:"absolute",top:-se,right:-se,padding:se,zIndex:1,borderLeft:`1px solid ${e.tableDividerColor}`,overflowY:"auto"},phoneForm:{display:"flex",flexDirection:"column",width:"100%",height:"100%",padding:se}})),[])}},795879:(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});var i=n(667294),o=()=>n(219727),s=()=>n(846550),a=()=>n(195926),r=()=>n(788860),l=()=>n(707513),d=()=>n(81066),c=()=>n(903591),u=()=>n(997489),p=()=>n(667710),m=()=>n(92175),g=()=>n(906651),f=n(785893);function h(){const e=(0,o().O7)().currentUser.id;(0,i.useEffect)((()=>{if(!e)return;(0,c()._)(e);const t=window.setInterval((()=>{(0,c()._)(e)}),n(326966).A0);return()=>{window.clearInterval(t)}}),[e]);const t=(0,n(142735).VK)((()=>u().Z.state.open),[]),s=b();return(0,f.jsx)(n(840820).Z,{onDismiss:n(513670).ZT,render:()=>(0,f.jsx)("div",{style:s.modal,children:(0,f.jsxs)(n(251932).gq,{flexDirection:"column",justifyContent:"center",alignItems:"center",children:[(0,f.jsx)("img",{style:s.image,src:n(714230).Z.images.feedbackThankYouPng}),(0,f.jsx)("div",{style:s.title,children:(0,f.jsx)(r()._H,{id:"cookieModal.requestConsent.title",defaultMessage:"Set your cookie preferences"})}),(0,f.jsx)("div",{style:s.description,children:(0,a().Fd)(d().Tz,"banner")}),(0,f.jsx)(y,{}),(0,f.jsx)(v,{}),(0,f.jsx)(x,{})]})}),isOpen:t})}function y(){const e=b(),t=(0,o().O7)();return(0,f.jsx)(g().Z,{isLarge:!0,style:e.acceptAllButton,onClick:()=>{d().a9(t,{necessary:!0,preference:!0,performance:!0,targeting:!0}),u().Z.setState({open:!1}),d().qo()},children:(0,f.jsx)(r()._H,{...a().ze.acceptAllButtonLabel})})}function v(){const e=b(),t=(0,o().O7)();return(0,f.jsx)(m().Z,{isLarge:!0,isGray:!0,style:e.moreOptionsButton,onClick:()=>{d().a9(t,{necessary:!0,preference:!1,performance:!1,targeting:!1}),u().Z.setState({open:!1}),d().qo()},children:(0,f.jsx)(r()._H,{...a().ze.rejectAllButtonLabel})})}function x(){const e=b();return(0,f.jsx)(p().Z,{hasDismissButton:!0,onDismiss:()=>{u().Z.setState({open:!1})},renderOrigin:t=>(0,f.jsx)(m().Z,{...t,isLarge:!0,isGray:!0,style:e.moreOptionsButton,children:(0,f.jsx)(r()._H,{...a().ze.moreOptionsButtonLabel})})})}function b(){return(0,s().yK)((e=>({modal:{maxWidth:400,padding:24},image:{height:100},title:{marginTop:8,color:e.regularTextColor,fontWeight:l().Ue.semibold,fontSize:18},description:{color:e.mediumTextColor,textAlign:"center",fontSize:14,marginTop:8,marginBottom:18},acceptAllButton:{width:"100%",marginBottom:6},moreOptionsButton:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center"}})),[])}const S=i.memo(h)},55351:(e,t,n)=>{n.r(t),n.d(t,{default:()=>N});var i=n(667294),o=()=>n(219727),s=()=>n(142735),a=()=>n(593515),r=()=>n(670655),l=()=>n(104088),d=()=>n(876822),c=()=>n(144321),u=()=>n(482162),p=()=>n(846550),m=()=>n(109477),g=()=>n(305580),f=n(785893);const h={viewBox:"0 0 16 16",svg:(0,f.jsx)("path",{d:"M4.558 3.504a.625.625 0 1 0 0 1.25h8.13a.625.625 0 1 0 0-1.25zm1 3.871a.625.625 0 1 0 0 1.25h8.13a.625.625 0 1 0 0-1.25zm.375 4.495c0-.344.28-.624.625-.624h8.13a.625.625 0 0 1 0 1.25h-8.13a.625.625 0 0 1-.625-.625m-4.62-8.367a.625.625 0 1 0 0 1.25h1.062a.625.625 0 0 0 0-1.25zm1 3.871a.625.625 0 1 0 0 1.25h1.062a.625.625 0 0 0 0-1.25zm.375 4.495c0-.344.28-.624.624-.624h1.063a.625.625 0 0 1 0 1.25H3.313a.625.625 0 0 1-.626-.625"})},y=(0,n(827282).IU)("tableOfContentsSmall",h);var v=()=>n(788860),x=()=>n(707513),b=()=>n(421654),S=()=>n(636340),M=()=>n(269299),j=()=>n(594546),C=()=>n(352230),w=()=>n(338217),k=()=>n(821149),_=()=>n(918302),T=()=>n(260747),I=()=>n(57956),P=()=>n(18748),A=()=>n(92175),R=()=>n(388284),Z=()=>n(471645),B=()=>n(706003);const D=function(e){let{store:t,locked:i}=e;const r=(0,o().O7)(),l=(0,v().YB)(),d=(0,s().qz)(void 0,n(385021).Z),{device:c}=r,u=(0,s().VK)((()=>t.isExternalObjectInstancePageBlockStore()),[t]);let p;p=c.isMobile?{menuType:C().o.Modal,right:(0,f.jsx)(n(470386).DoneMenuText,{}),onClickRight:a().xv,title:l.formatMessage({id:"customizePageMenu.mobileHeader.label",defaultMessage:"Customize page"})}:{menuType:C().o.Popup,minWidth:300};const h=(0,s().VK)((()=>function(e,t){const n=e.getFormat();if(!t)return{};const i=(0,g().i)(n,t,void 0,m().j5.Collection);return i}(t,t.getSchema())),[t]),y=(0,s().VK)((()=>d.state.justUnlocked),[d]);return(0,f.jsxs)(n(198829).Z,{...p,children:[(i||y)&&(0,f.jsx)(E,{lockStore:d}),(0,f.jsx)(L,{store:t,locked:i,lockStore:d,format:h,isSyncedCollection:u,device:c})]})};function L(e){let{format:t,isSyncedCollection:n,store:i,locked:o,lockStore:a,device:l}=e;const d=(0,s().VK)((()=>i.getSchema()),[i]),c=function(e){return{propertyVisibility:e.property_visibility,pageSectionVisibility:e.page_section_visibility}}(t),{pageSectionVisibility:u}=c,p=(0,s().VK)((()=>(0,r().Fl)(u)),[u]),m=(0,s().VK)((()=>i.isCollectionView()),[i]),g=!l.isMobile&&!m;if(!d||!i)return null;if(!c)return null;if(!u)return null;const h={topLevelDiscussions:!n,backLinks:!0,floatingTableOfContents:g,pageComments:!n},y={locked:o,store:i,format:t},v=(0,f.jsxs)(f.Fragment,{children:[h.backLinks&&(0,f.jsx)(H,{...y}),h.topLevelDiscussions&&(0,f.jsx)(O,{pageVisibility:u.comments,...y}),h.floatingTableOfContents&&(0,f.jsx)(V,{pageVisibility:u.comments,...y,store:i}),h.pageComments&&(0,f.jsx)(U,{pageVisibility:p,...y})]});return(0,f.jsx)(R().Z,{style:{opacity:o?.5:1},children:(0,f.jsx)("div",{style:{marginLeft:8},children:v})})}function O(e){let{pageVisibility:t,locked:n,store:s,format:r}=e;const l=(0,o().O7)(),d="section_show"===t,c=(0,i.useCallback)((()=>{const e="section_show"===t?"section_hide":"section_show";a().W4({environment:l,pageSection:"comments",visibility:e,store:s,format:r})}),[l,r,t,s]),u=(0,p().yK)((()=>({switcherButtonContainer:{marginRight:4}})),[]);return(0,f.jsx)(P().ZP,{title:(0,f.jsx)(v()._H,{id:"customizePageMenu.pageSections.pageCommentsSwitcherTitle",defaultMessage:"Page discussions"}),icon:(0,_().s)({height:16,width:16}),right:(0,f.jsx)("div",{style:u.switcherButtonContainer,children:(0,f.jsx)(Z().Z,{disabled:n,on:d,onClick:c})})})}function H(e){let{locked:t,store:n,format:i}=e;const{backlinksVisibility:o,updateBacklinksVisibility:s}=(0,I().F6)({store:n,format:i});return(0,f.jsx)(P().ZP,{title:(0,f.jsx)(v()._H,{id:"customizePageMenu.pageSections.backlinksSwitcherTitle",defaultMessage:"Backlinks"}),icon:(0,w().J)({height:16,width:16,transform:"rotate(180deg)"}),right:(0,f.jsx)(B().nm,{currentVisibility:o,onSelect:s,disabled:t})})}function V(e){let{pageVisibility:t,locked:n,store:a,format:r}=e;const l=(0,p().yK)((()=>({switcherButtonContainer:{marginRight:4}})),[]),d=(0,o().O7)(),c=(0,s().VK)((()=>{var e;return"off"!==(null===(e=a.getModel())||void 0===e?void 0:e.getFloatingTableOfContentsState())}),[a]),u=(0,i.useCallback)((()=>{M().createAndCommit({userAction:"CustomizePageMenu.handleToggleLockClick",environment:d,canUndo:!0,perform:e=>{S().sW({store:a.getFormatStore(),data:{page_floating_table_of_contents:{state:c?"off":"minimal"}},transaction:e})}}),(0,j().j)({environment:d,event:{eventName:"edit_page_table_of_contents_toggle",eventProperties:{is_table_of_contents_on:!c}}})}),[a,d,c]);return(0,f.jsx)(P().ZP,{title:(0,f.jsx)(v()._H,{id:"action.floatingTableOfContents.name",defaultMessage:"Table of contents"}),icon:y({height:16,width:16}),right:(0,f.jsx)("div",{style:l.switcherButtonContainer,children:(0,f.jsx)(Z().Z,{disabled:n,on:c,onClick:u})})})}function U(e){let{pageVisibility:t,locked:n,store:i,format:s}=e;const r=(0,o().O7)();return(0,f.jsx)(P().ZP,{title:(0,f.jsx)(v()._H,{id:"customizePageMenu.pageSections.inlineCommentsTitle",defaultMessage:"Inline comments"}),icon:(0,_().s)({height:16,width:16}),right:(0,f.jsx)(B().k7,{currentVisibility:t,disabled:n,onSelect:e=>{a().W4({environment:r,pageSection:"margin_comments",visibility:e,store:i,format:s})}})})}function E(e){let{lockStore:t}=e;const n=(0,p().Fg)(),a=(0,o().O7)(),l=(0,i.useCallback)((()=>function(e,t){const n=r().$0();if(!n)return!1;const i=n.getParentBlockStore();i&&(M().createAndCommit({userAction:"CustomizePageMenu.handleToggleLockClick",environment:e,canUndo:!0,perform:t=>{b().Wq({environment:e,store:i,isLocked:!r().p1(),transaction:t})}}),t.setState({justUnlocked:!t.state.justUnlocked}))}(a,t)),[a,t]),d=(0,s().VK)((()=>t.state.justUnlocked),[t]);return(0,f.jsxs)("div",{style:{fontSize:12,display:"flex",justifyContent:"center",alignItems:"center",borderTop:`1px solid ${n.regularDividerColor}`,borderBottom:`1px solid ${n.regularDividerColor}`,background:n.surface.wash,color:n.mediumTextColor,paddingTop:6,paddingBottom:6},children:[(0,f.jsx)("span",{style:{display:"inline-block",verticalAlign:"middle",paddingRight:6},children:d?(0,T().U)({height:12,width:12,fill:n.mediumIconColor}):(0,k().b)({height:12,width:12,fill:n.mediumIconColor})}),d?(0,f.jsx)(v()._H,{id:"customizePageMenu.unlocked.header",defaultMessage:"Settings unlocked on parent database."}):(0,f.jsx)(v()._H,{id:"customizePageMenu.locked.header",defaultMessage:"Settings locked on parent database."}),(0,f.jsx)(A().Z,{style:{fontSize:12,color:n.mediumTextColor,fontWeight:x().Ue.semibold,marginLeft:2,paddingLeft:4,paddingRight:4,height:20},onClick:l,children:d?(0,f.jsx)(v()._H,{id:"customizePageMenu.lock.label",defaultMessage:"Re-lock"}):(0,f.jsx)(v()._H,{id:"customizePageMenu.unlock.label",defaultMessage:"Unlock"})})]})}const N=function(){const e=(0,o().O7)(),{device:t}=e,i=(0,s().Kw)(c().Z);return(0,f.jsx)(n(967092).ZP,{popupType:t.isMobile?l().k.SlideUp:l().k.Popup,alignmentToOrigin:n(998901).Alignment.Center,open:i.isOpen,render:()=>(0,f.jsx)(F,{}),originRect:i.isOpen?i.rect:void 0,onDismiss:()=>a().xv()})};function F(){const e=(0,s().Kw)(c().Z),t=(0,s().VK)((()=>u().default.state.open&&u().default.state.targetStore||d().default.state.mainEditorCurrentBlockStore),[]),n=(0,s().VK)((()=>r().p1()),[]);return e.isOpen&&t?(0,f.jsx)(D,{store:t,locked:n}):null}},515445:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Te});var i=n(667294),o=()=>n(219727),s=()=>n(142735),a=()=>n(846550),r=()=>n(874459),l=()=>n(998411),d=()=>n(788860),c=()=>n(352230),u=()=>n(466970),p=()=>n(10271),m=()=>n(793504),g=()=>n(69870),f=()=>n(206352),h=()=>n(198829),y=()=>n(388284),v=()=>n(730120),x=()=>n(146947),b=()=>n(803021),S=()=>n(568017),M=()=>n(696459),j=()=>n(933696),C=()=>n(312117),w=()=>n(963979),k=()=>n(337897);const _=Object.freeze({backgroundColor:S().ZP.blue,color:S().ZP.white}),T=Object.freeze({backgroundColor:S().ZP.blueWithAlpha(.43)});function I(e,t){switch(e){case m().pd.InvalidDate:return t.formatMessage({id:"LuxonDatePropertyMenu.invalidDateError.tooltip",defaultMessage:"Invalid date"});case m().pd.InvalidRange:return t.formatMessage({id:"LuxonDatePropertyMenu.invalidDateOrTimeRangeError.tooltip",defaultMessage:"Invalid range"});case m().pd.InvalidTime:return t.formatMessage({id:"LuxonDatePropertyMenu.invalidTimeError.tooltip",defaultMessage:"Invalid time"});default:return}}function P(e,t,n){return void 0===e||"relative"===e||"ll"===e?b().oq(L(n,t)):b().jG(e)}function A(e,t){return e&&(e!==b().n3||t)?b()._F(e):b().Sc}function R(){return(0,w().E)(x().locale).time}function Z(e,t,n){return(0,C().$v)(e,A(t,!1),n)}function B(e,t,n,i,o){return i.device.isMobile?(0,C().f_)(e,r().Iq,t):(0,C().f_)(e,P(n,t,o),t)}function D(e,t,n,i){return!e||"number"==typeof e&&isNaN(e)?t&&(0,k().xE)(t)?function(e,t){var n,i;const o=(null==t||null===(n=t.getPropertyTypeSpecificConfig("date"))||void 0===n?void 0:n.endDate)??!1,s=(null==t||null===(i=t.getPropertyTypeSpecificConfig("date"))||void 0===i?void 0:i.includeTime)??!1,a=r().kT({timezone:(0,l().r)()});if(o&&s)return r().iC(a.startOf("day").valueOf(),a.startOf("day").valueOf(),(0,l().r)());if(o)return r().fZ(a.valueOf(),a.valueOf(),(0,l().r)());if(s)return r().LH(a.startOf("day"));return e}(n,i):n:e}function L(e,t){return e||t.locale}function O(e,t,n){return"date"===e.type?{...e,type:"daterange",end_date:t||e.start_date}:"datetime"===e.type?{...e,type:"datetimerange",end_date:t||e.start_date,end_time:n||e.start_time}:void(0,M().t1)(e)}var H=n(785893);function V(e){let{store:t,dateValue:n,disabled:o,firstDayOfWeek:a,onChangeValue:d}=e;const{focus:c,currentMonth:u}=(0,s().VK)((()=>({focus:t.state.focus,currentMonth:t.state.currentMonth})),[t]),p=r().NK(n,(0,l().r)()),g=u||p.start,f=p.start.toJSDate(),h=c===m().Hv.StartDate||c===m().Hv.StartTime,y=(0,i.useCallback)(((e,i,s)=>{if(o)return;const a=v().ou.fromJSDate(e).setLocale(b().ah).toFormat(r().Iq);if(s.shiftKey&&("date"===n.type||"datetime"===n.type)){const e=O(n,a);return null==d||d(e),void t.setState({...t.state,focus:m().Hv.EndDate})}let u;if(b().h(n)||b().qg(n)){c===m().Hv.StartDate||c===m().Hv.StartTime?u={...n,start_date:a}:c===m().Hv.EndDate||c===m().Hv.EndTime?u={...n,end_date:a}:(0,M().t1)(c);const e=r().NK(u,(0,l().r)());e.end<e.start&&(b().h(u)?u={...u,start_date:u.end_date,end_date:u.start_date}:b().qg(u)?u={...u,start_date:u.end_date,start_time:u.end_time,end_date:u.start_date,end_time:u.start_time}:(0,M().t1)(u),t.setState({...t.state,focus:c===m().Hv.StartDate||c===m().Hv.StartTime?m().Hv.EndDate:m().Hv.StartDate})),t.setState({...t.state,focus:c===m().Hv.StartDate||c===m().Hv.StartTime?m().Hv.EndDate:m().Hv.StartDate})}else u={...n,start_date:a};t.setState({...t.state,error:{...t.state.error,[c]:void 0},inputTemporaryValue:{...t.state.inputTemporaryValue,[c]:void 0}}),null==d||d(u)}),[n,o,c,d,t]),C=(0,i.useCallback)((e=>{t.setState({...t.state,currentMonth:v().ou.fromJSDate(e)})}),[t]),w=(0,i.useMemo)((()=>{if(p.end){const e=p.end.toJSDate();return{modifiers:{range:{from:f,to:e},...h?{end:e,start:f}:{start:f,end:e}},modifiersStyles:{range:{backgroundColor:S().ZP.blueWithAlpha(.15)},start:h?_:T,end:h?T:_}}}return{selected:f,modifiers:{start:f},modifiersStyles:{start:_}}}),[p.end,f,h]);return(0,H.jsx)(j().y,{className:"notion-date-property-menu notranslate",numberOfMonths:1,weekStartsOn:a,defaultMonth:g.toJSDate(),month:g.toJSDate(),locale:x().locale,showOutsideDays:!0,fixedWeeks:!0,onDayClick:y,onMonthSelected:C,...w})}var U=()=>n(827973);function E(e){let{onChangeValue:t}=e;const n=(0,i.useCallback)((()=>{null==t||t(void 0)}),[t]);return(0,H.jsx)(U().Z,{focused:!1,onClick:n,title:(0,H.jsx)(d()._H,{defaultMessage:"Clear",id:"LuxonDatePropertyMenu.clearButton.label"})})}var N=()=>n(471645);function F(e){let{dateValue:t,onChangeValue:n}=e;const o=(0,i.useCallback)((()=>{if("date"===t.type){const e={type:"datetime",start_date:t.start_date,start_time:"00:00",time_zone:(0,l().r)(),reminder:t.reminder&&b().AE(t.reminder)};null==n||n(e)}else if("daterange"===t.type){const e={type:"datetimerange",start_date:t.start_date,start_time:"00:00",end_date:t.end_date,end_time:"00:00",time_zone:(0,l().r)(),reminder:t.reminder&&b().AE(t.reminder)};null==n||n(e)}else if("datetime"===t.type){const e={type:"date",start_date:t.start_date,reminder:t.reminder&&b().wg(t.reminder,(0,l().r)())};null==n||n(e)}else{const e={type:"daterange",start_date:t.start_date,end_date:t.end_date,reminder:t.reminder&&b().wg(t.reminder,(0,l().r)())};null==n||n(e)}}),[t,n]);return(0,H.jsx)(U().Z,{focused:!1,onClick:o,title:(0,H.jsx)(d()._H,{defaultMessage:"Include time",id:"LuxonDatePropertyMenu.menuItem.includeTime.label"}),right:(0,H.jsx)(N().Z,{on:"date"!==t.type&&"daterange"!==t.type,onClick:o})})}function K(e){let{dateValue:t,onChangeValue:n}=e;const o=(0,i.useCallback)((()=>{if("datetimerange"===t.type){const e={type:"datetime",start_date:t.start_date,start_time:t.start_time,time_zone:t.time_zone,reminder:t.reminder};null==n||n(e)}else if("daterange"===t.type){const e={type:"date",start_date:t.start_date,reminder:t.reminder};null==n||n(e)}else{const e=O(t);null==n||n(e)}}),[t,n]);return(0,H.jsx)(U().Z,{focused:!1,onClick:o,title:(0,H.jsx)(d()._H,{defaultMessage:"End date",id:"LuxonDatePropertyMenu.menuItem.endDate.label"}),right:(0,H.jsx)(N().Z,{on:"daterange"===t.type||"datetimerange"===t.type,onClick:o})})}n(241792);const z=(0,d().vU)({none:{defaultMessage:"None",id:"dateFormatHelpers.reminderMenuItems.none"},onTheDay:{defaultMessage:"On day of event {formattedTimeText}",id:"dateFormatHelpers.reminderMenuItems.onTheDayOfEvent"},hoursBefore:{defaultMessage:"{numberOfHours, plural, one {{numberOfHours} hour before} other {{numberOfHours} hours before}}",id:"dateFormatHelpers.reminderMenuItems.hoursBefore"},minutesBefore:{defaultMessage:"{numberOfMinutes, plural, one {{numberOfMinutes} minute before} other {{numberOfMinutes} minutes before}}",id:"dateFormatHelpers.reminderMenuItems.minutesBefore"},yearsBefore:{defaultMessage:"{numberOfYears, plural, one {{numberOfYears} year before {formattedTimeText}} other {{numberOfYears} years before {formattedTimeText}}}",id:"dateFormatHelpers.reminderMenuItems.yearsBefore"},daysBefore:{defaultMessage:"{numberOfDays, plural, one {{numberOfDays} day before {formattedTimeText}} other {{numberOfDays} days before {formattedTimeText}}}",id:"dateFormatHelpers.reminderMenuItems.daysBefore"},monthsBefore:{defaultMessage:"{numberOfMonths, plural, one {{numberOfMonths} month before {formattedTimeText}} other {{numberOfMonths} months before {formattedTimeText}}}",id:"dateFormatHelpers.reminderMenuItems.monthsBefore"},weeksBefore:{defaultMessage:"{numberOfWeeks, plural, one {{numberOfWeeks} week before {formattedTimeText}} other {{numberOfWeeks} weeks before {formattedTimeText}}}",id:"dateFormatHelpers.reminderMenuItems.weeksBefore"},atTimeOf:{defaultMessage:"At time of event",id:"dateFormatHelpers.reminderMenuItems.atTimeOfEvent"}});function W(e){const{reminder:t,shouldShowTime:n,intl:i,formatTime:o}=e;if(!t)return i.formatMessage(z.none);if(b().vJ(t)){const{unit:e,value:s,time:a}=t,r=o({start_time:a,time_format:"LT",humanReadable:!0,intl:i}),l=n?`(${r})`:"";return 0===s?i.formatMessage(z.onTheDay,{formattedTimeText:l}):"day"===e?i.formatMessage(z.daysBefore,{formattedTimeText:l,numberOfDays:s}):"year"===e?i.formatMessage(z.yearsBefore,{formattedTimeText:l,numberOfYears:s}):"month"===e?i.formatMessage(z.monthsBefore,{formattedTimeText:l,numberOfMonths:s}):i.formatMessage(z.weeksBefore,{formattedTimeText:l,numberOfWeeks:s})}{const{unit:e,value:n}=t;return 0===n?i.formatMessage(z.atTimeOf):"hour"===e?i.formatMessage(z.hoursBefore,{numberOfHours:n}):i.formatMessage(z.minutesBefore,{numberOfMinutes:n})}}var q=()=>n(646574),G=()=>n(491927),Y=()=>n(746822),$=()=>n(448419),X=()=>n(431652),Q=()=>n(255577);function J(e){let{dateValue:t,onChangeValue:n}=e;const s=(0,o().O7)(),{device:a}=s,r=(0,d().YB)(),u=(0,i.useCallback)((e=>{e?b().vJ(e)?null==n||n({...t,reminder:{...e,defaultTimeZone:(0,l().r)()}}):"datetime"!==t.type&&"datetimerange"!==t.type||null==n||n({...t,reminder:e}):null==n||n({...t,reminder:e}),G().IM(s,{date:t,reminder:e})}),[t,s,n]),p=(0,i.useCallback)((e=>(0,H.jsx)(X().X,{...e,icon:(0,Y().m)({width:14}),title:(0,H.jsx)(d()._H,{defaultMessage:"Remind",id:"LuxonDatePropertyMenu.menuItem.remind.label"}),focused:!1,showExtensionArrow:a.isMobile,right:W({reminder:t.reminder,intl:r,formatTime:q().mr})})),[t.reminder,a.isMobile,r]),m=(0,i.useCallback)((e=>{let n;n=a.isMobile?{menuType:c().o.Modal,title:(0,H.jsx)(d()._H,{defaultMessage:"Remind",id:"LuxonDatePropertyMenu.mobileRemindModal.title"}),right:(0,H.jsx)(d()._H,{defaultMessage:"Done",id:"LuxonDatePropertyMenu.mobileDoneReminderButton.label"}),onClickRight:e.close}:{menuType:c().o.Popup,width:250};const i=("date"===t.type||"daterange"===t.type?b().PI:b().dG).map((t=>{const n=W({reminder:t,shouldShowTime:!0,intl:r,formatTime:q().mr});return{key:n,action:()=>{u(t),e.close()},render:e=>(0,H.jsx)(U().Z,{...e,title:n})}}));return(0,H.jsx)(h().Z,{...n,children:(0,H.jsx)(Q().Z,{type:Q().i.Vertical,sections:[{key:"reminder section",render:e=>(0,H.jsx)(y().Z,{...e}),items:i}],initialFocus:void 0})})}),[t.type,a.isMobile,r,u]);return(0,H.jsx)($().ZP,{popupType:a.isMobile?$().Z4.SlideUp:$().Z4.Popup,placementToOrigin:$().pO.Right,renderOrigin:p,render:m})}function ee(e){let{dateValue:t,shouldShowReminder:n,shouldShowEndDateControl:i,shouldShowAllDayControl:s,onChangeValue:a}=e;return(0,o().Fy)().isMobile?n||i||s?(0,H.jsxs)(y().Z,{topBorder:!0,children:[n&&(0,H.jsx)(J,{dateValue:t,onChangeValue:a}),i&&(0,H.jsx)(K,{dateValue:t,onChangeValue:a}),s&&(0,H.jsx)(F,{dateValue:t,onChangeValue:a})]}):null:(0,H.jsxs)(H.Fragment,{children:[n&&(0,H.jsx)(y().Z,{topBorder:!0,children:(0,H.jsx)(J,{dateValue:t,onChangeValue:a})}),(i||s)&&(0,H.jsxs)(y().Z,{topBorder:!0,children:[i&&(0,H.jsx)(K,{dateValue:t,onChangeValue:a}),s&&(0,H.jsx)(F,{dateValue:t,onChangeValue:a})]})]})}var te=()=>n(91253),ne=()=>n(397540);function ie(e){let{dateFormat:t,onChangeDateFormat:n}=e;const o=(0,d().YB)(),s=t||b().sF,a=(0,i.useCallback)((e=>e),[]),r=(0,i.useCallback)((e=>{null==n||n(e)}),[n]),l=(0,i.useCallback)((e=>(0,H.jsx)(U().Z,{...e,title:o.formatMessage(b().fy[e.value])})),[o]),c=(0,i.useCallback)((e=>(0,H.jsx)(X().X,{...e,focused:!1,title:(0,H.jsx)(d()._H,{defaultMessage:"Date format",id:"LuxonDatePropertyMenu.menuItem.format.label"}),right:s?o.formatMessage(b().fy[s]):(0,H.jsx)(d()._H,{defaultMessage:"Empty",id:"LuxonDatePropertyMenu.formatMenu.emptyButton.label"})})),[s,o]),u=(0,i.useMemo)((()=>({menuTitle:o.formatMessage({defaultMessage:"Date format",id:"LuxonDatePropertyMenu.dateFormatDropdownButton.label"}),items:b().Zy,getKey:a,selectedItem:s,onSelect:r,renderItem:l,renderOrigin:c})),[s,a,o,r,l,c]);return(0,H.jsx)(ne().Z,{...u})}function oe(e){let{dateValue:t,timeFormat:n,onChangeTimeFormat:o}=e;const s=(0,d().YB)(),a="date"===t.type||"daterange"===t.type,r=A(n,!0),l=function(e){const t=A(e,!0),n=R();for(const i in n)if(n[i]===t)return i;return"12h"}(n),c=R(),u=(0,i.useCallback)((e=>e),[]),p=(0,i.useCallback)((e=>{const t=c[e];null==o||o(t)}),[o,c]),m=(0,i.useCallback)((e=>(0,H.jsx)(U().Z,{...e,title:s.formatMessage(b().Fi[e.value])})),[s]),g=(0,i.useCallback)((e=>(0,H.jsx)(X().X,{...e,focused:!1,title:(0,H.jsx)(d()._H,{defaultMessage:"Time format",id:"LuxonDatePropertyMenu.menuItem.timeFormat.label"}),disabled:a,right:!a&&(r?s.formatMessage(b().Fi[l]):(0,H.jsx)(d()._H,{defaultMessage:"Empty",id:"LuxonDatePropertyMenu.timeFormatMenu.emptyButton.label"}))})),[s,a,l,r]),f=(0,i.useMemo)((()=>({menuTitle:s.formatMessage({defaultMessage:"Time format",id:"LuxonDatePropertyMenu.timeFormatMenu.title"}),items:b().L7,selectedItem:l,disabled:a,getKey:u,onSelect:p,renderItem:m,renderOrigin:g})),[u,s,a,p,m,g,l]);return(0,H.jsx)(ne().Z,{...f})}function se(e){const{dateValue:t,dateFormat:n,timeFormat:s,onChangeDateFormat:a,onChangeTimeFormat:u,onChangeValue:p}=e,m=(0,o().Fy)(),g=!w().S.includes(x().locale),f="date"===t.type||"daterange"===t.type,v="datetime"===t.type||"datetimerange"===t.type?t.time_zone:(0,l().r)(),b=(0,i.useCallback)((e=>{if("datetime"===t.type||"datetimerange"===t.type){const n={...t,time_zone:e};null==p||p(n)}}),[t,p]);return(0,H.jsxs)(H.Fragment,{children:[!f&&(0,H.jsx)(te().X,{enableRecents:!0,placementToOrigin:$().pO.Right,currentValue:v,onSelect:b,renderOrigin:e=>(0,H.jsx)(X().X,{...e,title:(0,H.jsx)(d()._H,{defaultMessage:"Timezone",id:"datePropertyMenuFormatAndTimezone.timezone.label"}),focused:!1,right:!f&&r().er(v),chevronType:"right"})}),(0,H.jsx)($().ZP,{popupType:m.isMobile?$().Z4.SlideUp:$().Z4.Popup,placementToOrigin:$().pO.Right,renderOrigin:e=>(0,H.jsx)(U().Z,{...e,title:(0,H.jsx)(d()._H,{defaultMessage:"Date format",id:"datePropertyMenuFormatAndTimezone.dateFormat.label"}),focused:!1,showExtensionArrow:!0}),render:e=>{let i;return i=m.isMobile?{menuType:c().o.Modal,title:(0,H.jsx)(d()._H,{defaultMessage:"Date format",id:"datePropertyMenuFormatAndTimezone.dateFormat.title"}),right:(0,H.jsx)(d()._H,{defaultMessage:"Done",id:"datePropertyMenuFormatAndTimezone.dateFormat.doneButton"}),onClickRight:e.close}:{menuType:c().o.Popup,width:250},(0,H.jsx)(h().Z,{...i,children:(0,H.jsxs)(y().Z,{children:[(0,H.jsx)(ie,{dateFormat:n,onChangeDateFormat:a}),g&&(0,H.jsx)(oe,{dateValue:t,timeFormat:s,onChangeTimeFormat:u})]})})}})]})}var ae=()=>n(910441);function re(e){let{dateValue:t,onChangeValue:n}=e;const o="date"===t.type||"daterange"===t.type,s="datetime"===t.type||"datetimerange"===t.type?t.time_zone:(0,l().r)(),a=(0,i.useCallback)((e=>{if("datetime"===t.type||"datetimerange"===t.type){const i={...t,time_zone:e};null==n||n(i)}}),[t,n]),c=(0,i.useCallback)((e=>(0,H.jsx)(X().X,{...e,focused:!1,title:(0,H.jsx)(d()._H,{defaultMessage:"Timezone",id:"datePropertyMenu.menuItem.time.label"}),disabled:o,right:!o&&r().er(s)})),[s,o]);return(0,H.jsx)(te().X,{enableRecents:!0,disabled:o,renderOrigin:c,onSelect:a,currentValue:s})}function le(e){let{dateValue:t,dateFormat:n,timeFormat:i,onChangeDateFormat:s,onChangeTimeFormat:a,onChangeValue:r}=e;const l=(0,o().Fy)(),u=!w().S.includes(x().locale);return(0,H.jsx)($().ZP,{popupType:l.isMobile?$().Z4.SlideUp:$().Z4.Popup,placementToOrigin:$().pO.Right,renderOrigin:e=>(0,H.jsx)(U().Z,{...e,icon:(0,ae().r)({width:14}),title:(0,H.jsx)(d()._H,{defaultMessage:"Date format & timezone",id:"LuxonDatePropertyMenu.menuItem.formatAndTimezone.label"}),focused:!1,showExtensionArrow:l.isMobile}),render:e=>{let o;return o=l.isMobile?{menuType:c().o.Modal,title:(0,H.jsx)(d()._H,{defaultMessage:"Date format",id:"LuxonDatePropertyMenu.mobileDateFormatModal.title"}),right:(0,H.jsx)(d()._H,{defaultMessage:"Done",id:"LuxonDatePropertyMenu.mobileDoneButton.label"}),onClickRight:e.close}:{menuType:c().o.Popup,width:250},(0,H.jsx)(h().Z,{...o,children:(0,H.jsxs)(y().Z,{children:[(0,H.jsx)(ie,{dateFormat:n,onChangeDateFormat:s}),u&&(0,H.jsx)(oe,{dateValue:t,timeFormat:i,onChangeTimeFormat:a}),(0,H.jsx)(re,{dateValue:t,onChangeValue:r})]})})}})}var de=()=>n(414860),ce=()=>n(326966),ue=()=>n(998901),pe=()=>n(291198),me=()=>n(654133),ge=()=>n(67961);const fe=12;function he(e){let{store:t,disabled:n,locale:c,format:p,dateFormat:g,timeFormat:f,dateValue:h,formQuestionStore:y,onChangeValue:v}=e;const x=(0,o().O7)(),{device:S,WindowSizeStore:j}=x,C=(0,d().YB)(),w=(0,u().E)("new_timezone_picker_2025"),{focus:_,inputTemporaryValue:T,error:I}=(0,s().VK)((()=>({focus:t.state.focus,inputTemporaryValue:t.state.inputTemporaryValue,error:t.state.error})),[t]),{formQuestionHasEndDate:P,formQuestionIncludesTime:A}=(0,s().VK)((()=>{var e,t;return{formQuestionHasEndDate:(null==y||null===(e=y.getPropertyTypeSpecificConfig("date"))||void 0===e?void 0:e.endDate)??!1,formQuestionIncludesTime:(null==y||null===(t=y.getPropertyTypeSpecificConfig("date"))||void 0===t?void 0:t.includeTime)??!1}}),[y]),R=(0,i.useMemo)((()=>r().NK(h,(0,l().r)(),L(c,C))),[h,c,C]),D=p&&(0,k().xE)(p)?A:"datetime"===h.type||"datetimerange"===h.type,O=p&&(0,k().xE)(p)?P:"daterange"===h.type||"datetimerange"===h.type,V=(0,i.useCallback)((()=>{const e=t.state.inputTemporaryValue.startDate;if(!e)return;const n=B(e,C,g,x,c);if(!n)return m().pd.InvalidDate;const i={...h,start_date:n},o=r().XI(i);if(!o)return m().pd.InvalidRange;t.setState({...t.state,currentMonth:o.start,error:{...t.state.error,[m().Hv.StartDate]:void 0},inputTemporaryValue:{...t.state.inputTemporaryValue,[m().Hv.StartDate]:void 0}}),null==v||v(i)}),[g,h,x,C,c,v,t]),U=(0,i.useCallback)((()=>{const e=t.state.inputTemporaryValue.startTime;if(!e)return;const n=Z(e,f,C);if(!n)return m().pd.InvalidTime;if(b().qg(h)){const{newDate:e,currentMonth:i}=r().vz({previous:h,updatedStartTime:n});t.setState({...t.state,currentMonth:i,error:{...t.state.error,[m().Hv.StartTime]:void 0,[m().Hv.EndDate]:void 0,[m().Hv.EndTime]:void 0},inputTemporaryValue:{...t.state.inputTemporaryValue,[m().Hv.StartTime]:void 0}}),null==v||v(e)}else{if(!b().v9(h))return m().pd.InvalidTime;{const e={...h,start_time:n},i=r().XI(e);t.setState({...t.state,currentMonth:i.start,error:{...t.state.error,[m().Hv.StartTime]:void 0},inputTemporaryValue:{...t.state.inputTemporaryValue,[m().Hv.StartTime]:void 0}}),null==v||v(e)}}}),[h,C,v,t,f]),E=(0,i.useCallback)((()=>{const e=t.state.inputTemporaryValue.endDate;if(!e)return;const n=B(e,C,g,x,c);if(!n)return m().pd.InvalidDate;if(!b().h(h)&&!b().qg(h))return;const i={...h,end_date:n},o=r().XI(i);if(!o)return m().pd.InvalidRange;t.setState({...t.state,currentMonth:o.end,error:{...t.state.error,[m().Hv.EndDate]:void 0},inputTemporaryValue:{...t.state.inputTemporaryValue,[m().Hv.EndDate]:void 0}}),null==v||v(i)}),[g,h,x,C,c,v,t]),N=(0,i.useCallback)((()=>{const e=t.state.inputTemporaryValue.endTime;if(!e)return;const n=Z(e,f,C);if(!n)return m().pd.InvalidTime;if(!b().qg(h))return;const i={...h,end_time:n},o=r().XI(i);if(!o)return m().pd.InvalidRange;t.setState({...t.state,currentMonth:o.end,error:{...t.state.error,[m().Hv.EndTime]:void 0},inputTemporaryValue:{...t.state.inputTemporaryValue,[m().Hv.EndTime]:void 0}}),null==v||v(i)}),[h,C,v,t,f]),F=(0,i.useCallback)((()=>{t.setState({...t.state,focus:m().Hv.StartDate,inputIsFocused:!0,currentMonth:R.start})}),[R.start,t]),K=(0,i.useCallback)((()=>{t.setState({...t.state,focus:m().Hv.StartTime,inputIsFocused:!0,currentMonth:R.start})}),[R.start,t]),z=(0,i.useCallback)((()=>{R.end&&t.setState({...t.state,focus:m().Hv.EndDate,inputIsFocused:!0,currentMonth:R.end})}),[R.end,t]),W=(0,i.useCallback)((()=>{R.end&&t.setState({...t.state,focus:m().Hv.EndTime,inputIsFocused:!0,currentMonth:R.end})}),[R.end,t]),q=(0,i.useCallback)((()=>{let e;if(t.state.focus===m().Hv.StartDate)e=V();else if(t.state.focus===m().Hv.StartTime)e=U();else if(t.state.focus===m().Hv.EndDate)e=E();else{if(t.state.focus!==m().Hv.EndTime)return(0,M().t1)(t.state.focus);e=N()}e?t.setState({...t.state,error:{...t.state.error,[t.state.focus]:e}}):t.setState({...t.state,inputTemporaryValue:{startDate:void 0,startTime:void 0,endDate:void 0,endTime:void 0},inputIsFocused:!1,error:{startDate:void 0,startTime:void 0,endDate:void 0,endTime:void 0}})}),[E,N,V,U,t]),G=(0,i.useCallback)((e=>{t.setState({...t.state,inputTemporaryValue:{...t.state.inputTemporaryValue,[t.state.focus]:e.target.value||""}}),S.isAndroid&&q()}),[S.isAndroid,q,t]),[Y,$]=(0,s().VK)((()=>[S.isMobile?j.getSafePaddingLeftCSS(16):14,S.isMobile?j.getSafePaddingRightCSS(16):14]),[S.isMobile,j]),X=(0,a().yK)((e=>({container:{paddingTop:S.isMobile?16:8,paddingBottom:S.isMobile?16:8,paddingLeft:Y,paddingRight:$,display:D?"block":"flex",...S.isMobile&&{boxShadow:`\n\t\t\t\t\t\t\t0 1px 0 ${e.regularDividerColor}\n\t\t\t\t\t\t`,position:"relative",zIndex:2},background:S.isMobile?e.popoverBackground:void 0}})),[S.isMobile,Y,$,D]);return(0,H.jsxs)("div",{style:X.container,children:[(0,H.jsx)(ye,{inputDateValue:T.startDate,inputTimeValue:T.startTime,rangeValue:R.start,disabled:n,dateError:I.startDate,timeError:I.startTime,isDateFocused:_===m().Hv.StartDate,isTimeFocused:_===m().Hv.StartTime,hasTime:D,hasEndDate:O,locale:c,dateFormat:g,timeFormat:f,onChange:G,onDateFocus:F,onTimeFocus:K,onBlur:q,onSubmit:q}),O&&(0,H.jsx)("div",{style:{width:12,height:8}}),R.end&&(0,H.jsx)(ye,{inputDateValue:T.endDate,inputTimeValue:T.endTime,rangeValue:R.end,disabled:n,dateError:I.endDate,timeError:I.endTime,isDateFocused:_===m().Hv.EndDate,isTimeFocused:_===m().Hv.EndTime,hasTime:D,hasEndDate:O,locale:c,dateFormat:g,timeFormat:f,onChange:G,onDateFocus:z,onTimeFocus:W,onBlur:q,onSubmit:q}),!w&&(0,H.jsx)(xe,{dateValue:h})]})}function ye(e){let{inputDateValue:t,inputTimeValue:n,rangeValue:s,disabled:l,dateError:c,timeError:u,isDateFocused:p,isTimeFocused:m,hasTime:g,hasEndDate:f,locale:h,dateFormat:y,timeFormat:v,onChange:x,onDateFocus:S,onTimeFocus:j,onBlur:C,onSubmit:w}=e;const k=(0,o().Fy)(),_=(0,d().YB)(),T=(0,M().$K)(c)||(0,M().$K)(u),R=p||m,Z=(0,a().yK)((e=>({input:ve(k,e,T,R,f),separator:{height:14,width:1,background:e.regularDividerColor,marginLeft:6,marginRight:12,flexShrink:0}})),[k,T,R,f]),B=(0,i.useCallback)((()=>I(c,_)),[c,_]),D=(0,i.useCallback)((()=>I(u,_)),[u,_]),L=(0,i.useCallback)((()=>{if(k.isMobile){const e=(0,ce().z4)(t)?s.toFormat(r().Iq):t;return(0,H.jsx)(pe().Z,{type:"date",format:pe().B.Transparent,value:e,onChange:x,onFocus:S,onBlur:C,onSubmit:w,disabled:l,size:1})}{const e=(0,ce().z4)(t)?s.toFormat(P(y,_,h)):t;return(0,H.jsx)(pe().Z,{selectAll:!0,format:pe().B.Transparent,value:e,focusInitial:p,onChange:x,onFocus:S,onBlur:C,onSubmit:w,disabled:l,size:1})}}),[y,k.isMobile,l,C,x,S,w,t,_,p,h,s]),O=(0,i.useCallback)((()=>{if(k.isMobile){const e=(0,ce().z4)(n)?s.toFormat(b().jK):n;return(0,H.jsx)(pe().Z,{type:"time",format:pe().B.Transparent,value:e,onChange:x,onFocus:j,onBlur:C,onSubmit:w,size:1,disabled:l})}{const e=(0,ce().z4)(n)?s.toFormat(A(v,!1)):n;return(0,H.jsx)(pe().Z,{format:pe().B.Transparent,value:e,focusInitial:m,onChange:x,onFocus:j,onBlur:C,onSubmit:w,size:1,disabled:l})}}),[k.isMobile,l,C,x,w,j,n,m,s,v]);return(0,H.jsxs)("div",{style:Z.input,children:[(0,H.jsx)(me().Z,{renderTooltip:B,originGap:fe,forceVisibleState:(0,M().$K)(c),placement:ue().Placement.Left,render:L}),g&&(0,H.jsx)("div",{style:Z.separator}),g&&(0,H.jsx)(me().Z,{renderTooltip:D,originGap:fe,forceVisibleState:(0,M().$K)(u),placement:ue().Placement.Right,render:O})]})}function ve(e,t,n,i,o){return{display:"flex",alignItems:"center",borderRadius:6,height:28,lineHeight:1.2,paddingLeft:8,paddingRight:8,flexBasis:"50%",flexGrow:1,fontSize:e.isMobile?16:14,...n?{background:S().ZP.redWithAlpha(.15),boxShadow:`inset 0 0 0 2px ${S().ZP.red}`}:i&&o?{background:S().ZP.blueWithAlpha(.15),boxShadow:`inset 0 0 0 2px ${S().ZP.blue}`}:{background:t.inputBackground,boxShadow:t.inputBoxShadow}}}function xe(e){let{dateValue:t}=e;const n=(0,o().Fy)(),i=(0,d().YB)();return"datetime"!==t.type&&"datetimerange"!==t.type||t.time_zone===(0,l().r)()?null:(0,H.jsx)(ge().Z,{isSmall:!0,isMobile:n.isMobile,style:{marginTop:8},children:(0,de().E)(i)[t.time_zone]})}var be=()=>n(148126),Se=()=>n(508181),Me=()=>n(641481);function je(){return(0,o().Fy)().isMobile?(0,H.jsx)(Me().Z,{href:(0,be().UY)("guides.reminders"),analyticsFrom:"date_selector"}):(0,H.jsx)(Se().Z,{title:(0,H.jsx)(d()._H,{defaultMessage:"Learn about reminders",id:"LuxonDatePropertyMenu.learnMore.helpButton.label"}),href:(0,be().UY)("guides.reminders"),analyticsFrom:"date_selector"})}var Ce=()=>n(727207),we=()=>n(682518);function ke(e){const{onChangeValue:t}=e,n=(0,d().YB)();return(0,H.jsx)(y().Z,{title:(0,H.jsx)(d()._H,{defaultMessage:"Shortcuts",id:"DatePropertyMenu.menuItem.shortcuts.label"}),children:["now","today"].map((e=>(0,H.jsx)(U().Z,{title:(0,H.jsx)(we().w,{templateVariableType:e}),caption:(0,Ce().Z0)(e,n),inline:!0,onClick:()=>{null==t||t(e)},focused:!1},`relative-date-shortcut-${e}`)))})}function _e(e){let{store:t,value:n,header:p,isTemplatePage:m,shouldShowReminder:f,shouldShowAllDayControl:v=!0,shouldShowEndDateControl:x=!0,shouldShowDateFormatControl:b=!0,canConfigureCollection:S,disabled:M,format:j,dateFormat:C,timeFormat:w,firstDayOfWeek:k,locale:_,formQuestionStore:T,onChangeValue:I,onChangeDateFormat:P,onChangeTimeFormat:A,onDismiss:R}=e;const Z=(0,o().Fy)(),B=(0,u().E)("new_timezone_picker_2025"),L=(0,i.useMemo)((()=>r().Lg((0,l().r)())),[]),O=(0,s().VK)((()=>D(n,j,L,T)),[n,j,L,T]),U=(0,s().VK)((()=>t.state.inputIsFocused),[t]),N=(0,a().yK)((e=>({calendar:{padding:Z.isMobile?"16px 14px 16px":"4px 0 4px",textAlign:"center",...Z.isMobile&&{borderBottom:`1px solid ${e.regularDividerColor}`,background:e.popoverBackground}}})),[Z.isMobile]),F=(0,i.useMemo)((()=>Z.isMobile?{menuType:c().o.Modal,title:(0,H.jsx)(d()._H,{defaultMessage:"Date",id:"LuxonDatePropertyMenu.mobileDate.title"}),right:(0,H.jsx)(d()._H,{defaultMessage:"Done",id:"LuxonDatePropertyMenu.mobileDoneButton.label"}),left:f?(0,H.jsx)(je,{}):void 0,onClickRight:R,header:(0,H.jsx)(he,{store:t,disabled:M,locale:_,format:j,dateFormat:C,timeFormat:w,dateValue:O,formQuestionStore:T,onChangeValue:I})}:{menuType:c().o.Popup,maxHeight:"none",width:270,header:p}),[Z.isMobile,p,f,R,t,M,_,j,C,w,O,T,I]);return(0,H.jsxs)(h().Z,{...F,children:[(0,H.jsx)(g().Z,{show:U}),m&&(0,H.jsx)(ke,{onChangeValue:I}),(0,H.jsxs)(y().Z,{topBorder:!0,children:[!Z.isMobile&&(0,H.jsx)(he,{store:t,disabled:M,locale:_,format:j,dateFormat:C,timeFormat:w,dateValue:O,formQuestionStore:T,onChangeValue:I}),(0,H.jsx)("div",{style:N.calendar,children:(0,H.jsx)(V,{store:t,dateValue:O,firstDayOfWeek:k,disabled:M,onChangeValue:I})})]}),!M&&(0,H.jsx)(ee,{dateValue:O,shouldShowReminder:f,shouldShowEndDateControl:x,shouldShowAllDayControl:v,onChangeValue:I}),!M&&S&&b&&(0,H.jsx)(y().Z,{topBorder:!0,children:B?(0,H.jsx)(se,{dateValue:O,dateFormat:C,timeFormat:w,onChangeDateFormat:P,onChangeTimeFormat:A,onChangeValue:I}):(0,H.jsx)(le,{dateValue:O,dateFormat:C,timeFormat:w,onChangeDateFormat:P,onChangeTimeFormat:A,onChangeValue:I})}),!M&&(0,H.jsx)(y().Z,{topBorder:!0,children:(0,H.jsx)(E,{onChangeValue:I})}),!M&&!Z.isMobile&&f&&(0,H.jsx)(y().Z,{topBorder:!0,children:(0,H.jsx)(je,{})})]})}function Te(e){const t=(0,s().qz)(void 0,m().ZP),n=(0,s().VK)((()=>t.state.inputIsFocused),[t]);return(0,p().Z)({shouldPreserveTextSelection:!0,shouldPreserveBlockSelection:!0,shouldRestoreSelection:!0}),(0,H.jsx)(f().Z,{debugName:"DatePropertyMenu",capture:n,allowEsc:!0,children:(0,H.jsx)(f().Z,{debugName:"DatePropertyMenu",allowEsc:!0,capture:!0,allowUndo:!0,children:(0,H.jsx)(_e,{store:t,...e})})})}},810201:(e,t,n)=>{n.d(t,{Z:()=>K});n(267602),n(653476),n(470928),n(241792);var i=n(667294),o=()=>n(219727),s=()=>n(142735),a=()=>n(788860),r=()=>n(513670),l=()=>n(308186),d=()=>n(762478),c=()=>n(109757),u=()=>n(527278),p=()=>n(352230),m=()=>n(37405),g=()=>n(292612),f=()=>n(119891),h=()=>n(206352),y=()=>n(198829),v=()=>n(470386),x=()=>n(388284),b=(n(670560),()=>n(846550)),S=()=>n(455530),M=()=>n(225339),j=()=>n(72539),C=()=>n(351972),w=()=>n(64880),k=()=>n(611253),_=()=>n(469753),T=()=>n(397643);class I extends(()=>n(263184))().default{getInitialState(){return{open:!1}}}const P=I;var A=()=>n(145873),R=()=>n(827973),Z=()=>n(448419),B=()=>n(291198),D=()=>n(255577),L=()=>n(967092),O=()=>n(135499),H=n(785893);function V(e){const{disabled:t,store:n,name:a,url:r,onChange:l,onDelete:d}=e,c=S().SR({url:e.url}),u=(0,i.useRef)(null),p=(0,o().O7)(),{device:m}=p,g=(0,s().qz)(void 0,P),f=(0,s().Kw)(g),h=(0,i.useCallback)((e=>{if(!f.open)return;g.setState({...f,inputValue:e});const t=M().rF({title:e,source:r});l({url:r,name:t})}),[g,f,l,r]),y=(0,i.useCallback)((()=>{g.setState({open:!0,inputValue:a})}),[g,a]),v=(0,i.useCallback)((()=>{g.setState({open:!1})}),[g]),x=(0,i.useCallback)((()=>{d(r)}),[d,r]),I=(0,i.useCallback)((()=>{const e=()=>{C().Uk(p,{url:r,from:"FilePropertyMenuItem"}),w().ji(p,{url:r,download:!0,downloadName:a,permissionRecord:n.pointer})};n.getCreatedById()===j().gd.id?(0,_().TG)({propertyType:"file",onConfirm:e}):e()}),[p,a,r,n]),A=(0,i.useCallback)((()=>{w().Wl(p,{url:r,type:"file",from:"view_original",downloadName:a,permissionRecord:n.pointer})}),[p,a,n.pointer,r]),B=(0,i.useCallback)((()=>{if(!u.current)return;const e=u.current.getBoundingClientRect(),t=e.width/e.height;k().ui({environment:p,renderFullScreenNode:()=>(0,H.jsx)(O().Z,{url:r,isAuthenticated:!0,permissionRecord:n.pointer,width:window.innerWidth,render:(e,t)=>(0,H.jsx)("img",{src:t,style:{position:"relative",maxHeight:"100%",maxWidth:"100%",margin:0,alignSelf:"center",width:"100%"}})}),fullScreenNodeRect:e,contentAspectRatio:t,blockStore:n,imageUrl:r})}),[p,n,r]),D=(0,i.useCallback)((()=>{if(f.open)return(0,H.jsx)(N,{url:e.url,inputValue:f.inputValue,isOpen:f.open,handleFileRename:h,handleCloseRenamePopover:v})}),[f,v,h,e.url]),V=(0,b().yK)((()=>({imageInner:{display:"block",maxWidth:"100%",maxHeight:180,cursor:"zoom-in"},imageInnerWrapper:{flex:"auto",overflow:"hidden"}})),[]),E=(0,H.jsx)(U,{fileIsImage:c,fileUrl:r,disabled:t,handleOpenFullscreenPreviewOfFile:B,handleDownloadFile:I,handleViewOriginalFile:A,handleOpenRenamePopover:y,handleDeleteFile:x});return c?(()=>{const n=(0,H.jsx)(O().Z,{url:r,isAuthenticated:!0,permissionRecord:e.store.pointer,width:300,render:(e,t)=>(0,H.jsx)("div",{style:V.imageInnerWrapper,children:(0,H.jsx)("img",{src:t,style:V.imageInner,onClick:B,ref:u})})}),i={paddingTop:m.isMobile?12:8,paddingBottom:m.isMobile?12:8,alignItems:"flex-start"};return(0,H.jsx)(R().Z,{focused:!1,showDragHandle:!t&&!m.isMobile,style:i,title:n,right:E,dontShrinkRight:!0})})():(()=>{const t=(0,H.jsx)(R().Z,{focused:!1,showDragHandle:!e.disabled&&!m.isMobile,onClick:A,title:a,icon:(0,H.jsx)("div",{style:{width:m.isMobile?16:14},children:(0,T().R)()}),right:E,dontShrinkRight:!0});return(0,H.jsx)(L().ZP,{open:f.open,popupType:m.isMobile?Z().Z4.SlideUp:Z().Z4.Popup,origin:t,render:D,onDismiss:v})})()}function U(e){const{disabled:t,fileIsImage:n,fileUrl:s,handleOpenFullscreenPreviewOfFile:a,handleDownloadFile:r,handleViewOriginalFile:l,handleOpenRenamePopover:d,handleDeleteFile:c}=e,u=(0,o().O7)(),{isMobile:p}=u.device,m=(0,i.useCallback)((e=>(0,H.jsx)(A().Z,{isMobile:p,...e})),[p]),g=(0,i.useCallback)((e=>(0,H.jsx)(E,{fileIsImage:n,fileUrl:s,disabled:t,parent:e,handleOpenFullscreenPreviewOfFile:a,handleDownloadFile:r,handleViewOriginalFile:l,handleOpenRenamePopover:d,handleDeleteFile:c})),[n,s,t,a,r,l,d,c]);return(0,H.jsx)(Z().ZP,{popupType:p?Z().Z4.SlideUp:Z().Z4.Popup,renderOrigin:m,render:g})}function E(e){const{parent:t,disabled:n,fileUrl:s,fileIsImage:r,handleOpenFullscreenPreviewOfFile:l,handleDownloadFile:d,handleViewOriginalFile:c,handleOpenRenamePopover:u,handleDeleteFile:m}=e,g=(0,o().O7)(),{isMobile:f,isNative:h}=g.device,v=(0,i.useMemo)((()=>{const e=[];r&&e.push({key:"fullscreen",render:e=>(0,H.jsx)(R().Z,{...e,title:(0,H.jsx)(a()._H,{defaultMessage:"Full screen",id:"database.actionMenu.fileProperty.fullscreen.title"})}),action:l});return(M().iS(s)||h)&&e.push({key:"download",render:e=>(0,H.jsx)(R().Z,{...e,title:(0,H.jsx)(a()._H,{defaultMessage:"Download",id:"database.actionMenu.fileProperty.download.title"})}),action:d}),e.push({key:"original",render:e=>(0,H.jsx)(R().Z,{...e,title:(0,H.jsx)(a()._H,{defaultMessage:"View original",id:"database.actionMenu.fileProperty.viewOriginal.title"})}),action:()=>c()}),n||r||e.push({key:"rename",render:e=>(0,H.jsx)(R().Z,{...e,title:(0,H.jsx)(a()._H,{defaultMessage:"Rename",id:"database.actionMenu.fileProperty.rename.title"})}),action:u}),n||e.push({key:"delete",render:e=>(0,H.jsx)(R().Z,{...e,title:(0,H.jsx)(a()._H,{defaultMessage:"Delete",id:"database.actionMenu.fileProperty.delete.title"})}),action:m}),e}),[n,r,s,m,l,u,c,d,h]),b=(0,i.useMemo)((()=>[{key:"section",render:e=>(0,H.jsx)(x().Z,{...e}),items:v}]),[v]),S=f?{menuType:p().o.ActionSheet}:{menuType:p().o.Popup,width:200};return(0,H.jsx)(y().Z,{...S,children:(0,H.jsx)(D().Z,{type:D().i.Vertical,initialFocus:0,onAccept:t.close,sections:b})})}function N(e){const{url:t,handleFileRename:n,handleCloseRenamePopover:s,isOpen:a,inputValue:r}=e,l=(0,o().O7)(),{device:d}=l,c=(0,i.useCallback)((e=>{const t=e.target.value;n(t)}),[n]),u=(0,b().yK)((e=>({renameInputWrapper:{display:"flex",alignItems:"center",color:e.regularTextColor,fontSize:"13px",padding:"4px 8px"},renameInput:{display:"flex",alignItems:"center",flexGrow:1,fontSize:14,lineHeight:"20px",paddingTop:4,paddingBottom:4,paddingLeft:10,paddingRight:10,width:"100%",borderRadius:4,boxShadow:e.inputBoxShadow,background:e.inputBackground,cursor:"text",position:"relative"}})),[]),m=d.isMobile?{menuType:p().o.ActionSheet}:{menuType:p().o.Popup,width:380};return a?(0,H.jsx)(y().Z,{...m,children:(0,H.jsx)("div",{style:u.renameInputWrapper,children:(0,H.jsx)(B().Z,{style:u.renameInput,value:r,placeholder:M().w2(t),onChange:c,onSubmit:s,focusInitial:!0,selectAll:!0})})}):null}const F=function(e){return(0,H.jsx)(n(18748).ZP,{title:(0,H.jsxs)("div",{style:{display:"flex"},children:[(0,H.jsx)(n(312578).Z,{style:{marginTop:1,marginRight:6}}),(0,H.jsx)(n(410184).Z,{percentage:e.progressPercent})]})})};function K(e){const{store:t,uploadFiles:n,value:r,disabled:f,onChange:b,onDismiss:S}=e,M=z(r),j=(0,o().O7)(),C=(0,i.useRef)(),w=(0,i.useRef)(null),k=(0,s().qz)(void 0,m().Z),{isLoading:_,progressPercent:T}=(0,s().Kw)(k),I=(0,i.useCallback)((e=>{k.setState({isLoading:!0,progressPercent:0}),C.current=e}),[k]),P=(0,i.useCallback)((e=>{const{progressPercent:t}=e;k.setState({...k.state,progressPercent:t})}),[k]),A=(0,i.useCallback)((e=>{if(!C.current)return;const t=C.current.map(((t,n)=>{const i=e[n];return{name:t.name||i,url:i}}));b({value:[...t,...r]}),k.reset()}),[k,b,r]),R=(0,i.useCallback)((()=>{k.reset(),l().UW((0,H.jsx)(a()._H,{id:"filePropertyMenu.uploadFileFailedError.message",defaultMessage:"Upload failed."}))}),[k]),Z=(0,i.useCallback)((e=>{d().Z(),k.setState({isLoading:!0,progressPercent:0}),C.current=[e]}),[k]),B=(0,i.useCallback)((e=>{if(!C.current)return;const t=C.current[0];if(!t)return;const n={name:t.name||e,url:e};b({value:[...r,n]}),k.reset(),d().Z()}),[k,b,r]),D=(0,i.useCallback)((e=>{const t={name:e,url:e};b({value:[...r,t]}),k.reset(),d().Z()}),[k,b,r]),L=(0,i.useCallback)((()=>{const e=w.current;if(!(e&&e instanceof Element))return;const n=u().Z.getIntl();d().$(j,{originRect:e.getBoundingClientRect(),originGap:3,isSmallWidth:!0,showArrow:!0,title:n.formatMessage({id:"filePropertyMenu.header",defaultMessage:"File"}),currentTab:"file",tabs:[{type:"file",fileUpload:!0,imageUpload:!1,videoUpload:!1,onUpload:e=>{c().cT({environment:j,file:e[0],bucket:"secure",record:t.pointer,onStart:Z,onProgress:P,onComplete:B,onError:R})}},{type:"embed",onChange:D}]})}),[j,D,B,Z,R,P,t.pointer]),O=(0,i.useCallback)((()=>{L()}),[L]),V=()=>{d().Z()};(0,i.useEffect)((()=>((()=>{const{device:e}=j;n?c().IL({environment:j,files:n,bucket:"secure",record:t.pointer,onBatchStart:I,onBatchProgress:P,onBatchComplete:A,onBatchError:R}):z(r)&&!e.isMobile&&L()})(),V)),[]);const U=j.device.isMobile?{menuType:p().o.Modal,title:(0,H.jsx)(a()._H,{defaultMessage:"File property",id:"database.fileProperty.mobileMenu.title"}),right:(0,H.jsx)(v().DoneMenuText,{}),onClickRight:S}:{menuType:p().o.Popup};return(0,H.jsx)(h().Z,{debugName:"FilePropertyMenu",capture:!0,allowUndo:!0,allowEsc:!0,allowTabUntab:!0,children:(0,H.jsxs)(y().Z,{...U,children:[(0,H.jsx)(Y,{value:r,disabled:f,store:t,onChange:b}),(0,H.jsxs)(x().Z,{topBorder:!M&&!f,desktopStyle:{...M&&{paddingTop:3,paddingBottom:3}},children:[_&&(0,H.jsx)(F,{progressPercent:T}),!_&&!f&&(0,H.jsx)(g().Z,{focused:!1,onClick:O,title:(0,H.jsx)(a()._H,{id:"database.fileProperty.focusedLabel",defaultMessage:"Add a file or image"}),ref:w})]})]})})}function z(e){return 0===e.length}function W(e,t,n){n({value:t.map((t=>t.url===e.url?{name:e.name,url:e.url}:t))})}function q(e,t,n){n({value:t.filter((t=>t.url!==e))})}function G(e){let{url:t,value:n,disabled:i,store:s,onChange:a}=e;const r=(0,o().O7)(),{device:l}=r,d=n.find((e=>e.url===t));if(d){const e=d.url,t=d.name;return l.isMobile?(0,H.jsx)(x().Z,{children:(0,H.jsx)(V,{store:s,name:t,url:e,onDelete:e=>q(e,n,a),onChange:e=>W(e,n,a),disabled:i})}):(0,H.jsx)(V,{store:s,name:t,url:e,onDelete:e=>q(e,n,a),onChange:e=>W(e,n,a),disabled:i})}return null}function Y(e){let{value:t,disabled:n,store:s,onChange:a}=e;const l=(0,o().O7)(),{device:d}=l,c=r().oA(t.map((e=>e.url)));return 0===c.length?null:d.isMobile||n?(0,H.jsx)(i.Fragment,{children:c.map((e=>(0,H.jsx)(G,{url:e,value:t,disabled:n,store:s,onChange:a},e)))}):(0,H.jsx)(x().Z,{children:(0,H.jsx)(f().ZP,{direction:"vertical",keys:c,renderKey:e=>(0,H.jsx)(G,{url:e,value:t,disabled:n,store:s,onChange:a}),onDrop:e=>function(e,t,n){t({value:r().MR(n,(t=>{const n=t.url;return n?e.indexOf(n):1/0}))})}(e,a,t)})})}},720940:(e,t,n)=>{n.r(t),n.d(t,{default:()=>M,getSpaceViewMenuItems:()=>j});n(670560),n(667294);var i=()=>n(219727),o=()=>n(142735),s=()=>n(788860),a=()=>n(291338),r=()=>n(234049),l=(n(267602),n(653476),()=>n(513670));var d=()=>n(352230),c=()=>n(345918),u=()=>n(341691),p=()=>n(104088),m=()=>n(876822),g=()=>n(722116),f=()=>n(827973),h=()=>n(198829),y=()=>n(255577),v=()=>n(470386),x=()=>n(943620),b=()=>n(388284),S=n(785893);const M=function(){const e=(0,i().O7)(),{device:t}=e,s=(0,o().Kw)(g().Z);return(0,S.jsx)(n(967092).ZP,{popupType:t.isMobile?p().k.SlideUp:p().k.Popup,open:s.open,render:()=>(0,S.jsx)(C,{}),originGap:8,onDismiss:a().sC,originRect:s.originRect,enableRounding:!0})};function j(e,t){const{device:n}=e,{currentUserRootStore:i}=m().default.state;if(!i)return[];const{editableStores:o}=function(e){const t=l().mN(e.getSpaceViewStores(),(e=>e.getSpaceId())),n=t.filter((e=>{const t=e.getSpaceStore();return e.isReady()&&(null==t?void 0:t.isReady())})),i=n.filter((e=>{const t=e.getSpaceStore();return e.isReady()&&(null==t?void 0:t.isReady())&&t.canEdit()}));return{total:t.length,loaded:n.length,editable:i.length,editableStores:i}}(i),s=[];for(const a of o){const i=a.getSpaceStore();if(null!=i&&i.isReady()&&i.canEdit()){const o=(0,c().rn)(e,i),l=(0,c().Wd)(e,i);s.push({key:a.id,action:async()=>{await r().JI({environment:e,blockStore:t,spaceStore:i,spaceViewStore:a})},render:e=>(0,S.jsx)(f().Z,{title:o,icon:(0,S.jsx)(x().Z,{icon:l,isEmptyPage:!1,title:o,size:n.isMobile?24:20,disabled:!0}),...e})})}}return s}function C(){const e=(0,i().O7)(),{device:t}=e,n=(0,o().Kw)(g().Z),r=(0,o().VK)((()=>m().default.state.currentUserRootStore),[]),l=(0,o().VK)((()=>n.store?j(e,n.store):[]),[e,n]);if(!n.open||!r)return null;const c=[{key:"spaces",render:e=>(0,S.jsx)(b().Z,{title:t.isMobile?void 0:(0,S.jsx)(s()._H,{defaultMessage:"Choose a workspace",id:"duplicatePagePopup.chooseWorkspace.menuItem.title"}),isTitleUppercase:!0,...e}),items:l},{key:"logout",render:e=>(0,S.jsx)(b().Z,{...e,topBorder:!0}),items:[{key:"logout",action:()=>u().logout(e),render:e=>(0,S.jsx)(w,{...e})}]}];let p;return p=t.isMobile?{menuType:d().o.Modal,title:(0,S.jsx)(s()._H,{defaultMessage:"Choose a workspace",id:"duplicatePagePopup.choooseWorkspaceMobileMenu.title"}),right:(0,S.jsx)(v().CancelMenuText,{}),onClickRight:a().sC}:{menuType:d().o.Popup},(0,S.jsx)(h().Z,{...p,children:(0,S.jsx)(y().Z,{type:y().i.Vertical,sections:c,initialFocus:1})})}function w(e){const t=(0,o().VK)((()=>{const{currentUserStore:e}=m().default.state;return(null==e?void 0:e.getEmail())||""}),[]);return(0,S.jsx)(f().Z,{caption:(0,S.jsx)(s()._H,{defaultMessage:"Log out ({email})",id:"duplicatePagePopup.buttonMenuItem.logoutButton.label",values:{email:t}}),...e})}},119963:(e,t,n)=>{n.r(t),n.d(t,{GenerateSocialMediaPreviewImageWrapper:()=>u});var i=n(667294),o=()=>n(219727),s=()=>n(142735),a=()=>n(955620),r=()=>n(513670),l=()=>n(136343),d=()=>n(749826),c=()=>n(127519);function u(e){const{store:t}=e;return function(e){const t=(0,o().O7)(),[n,u]=(0,i.useState)("uninitialized"),[p,m,g,f,h]=(0,s().VK)((()=>{var n,i;return e.pathIsDead()||"on"!==d().default.getEligibleGroup({experimentId:"dynamic_social_preview_image",defaultGroup:"unassigned"})||e.inMemoryRecordCache.recordHasOverride({pointer:e.pointer,userId:t.currentUser.id})?[!1]:[e.isReady(),a().QaF(e.getTitleValue()),null===(n=e.getIcon())||void 0===n?void 0:n.icon,null===(i=e.getCover())||void 0===i?void 0:i.cover,e.getFormat().page_font]}),[t.currentUser.id,e]);(0,i.useEffect)((()=>{"storeReady"===n?u("generateImage"):p&&u("storeReady")}),[p,m,g,f,h]);const y=(0,i.useMemo)((()=>(0,r().Ds)((()=>{u("storeReady"),l().O({environment:t,store:e})}),5e3)),[t,e]);(0,s().VK)((()=>{"generateImage"===n&&(c().default.state,y())}),[n,y])}(t),null}},743405:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});n(667294);var i=()=>n(219727),o=()=>n(142735),s=()=>n(846550),a=()=>n(714230),r=()=>n(788860),l=()=>n(707513),d=()=>n(454393),c=()=>n(384510),u=()=>n(201696),p=()=>n(708518),m=()=>n(906651),g=()=>n(777346),f=n(785893);function h(){const e=(0,i().Fy)(),t=(0,o().VK)((()=>u().Z.state.open),[]),n=()=>{u().Z.state.open&&u().Z.state.onDecline&&u().Z.state.onDecline(),u().Z.setState({open:!1})},h=()=>{u().Z.state.open&&u().Z.state.onConfirm(),u().Z.setState({open:!1})},y=()=>{n(),d().r$({currentTab:"connected_apps"})},v=(0,s().yK)((e=>({wrap:{padding:"24px 36px 24px",minWidth:300,maxWidth:400},modalHeaderWrap:{textAlign:"center",marginTop:8,marginBottom:18,justifyContent:"space-between"},modalMessage:{fontSize:16,lineHeight:1.5,fontWeight:l().Ue.medium,marginTop:15,marginBottom:20,color:e.mediumTextColor}})),[]);return(0,f.jsx)(p().Z,{open:t,innerStyle:v.wrap,preventHideChildrenWhileOpening:!0,render:()=>(0,f.jsxs)("div",{style:v.modalHeaderWrap,children:[(0,f.jsx)("img",{src:a().Z.images.googleDriveLogoPng,style:{width:50,display:"inline-block"}}),(0,f.jsx)("div",{style:v.modalMessage,children:(0,f.jsx)(r()._H,{defaultMessage:"Notion cannot access the Google Drive file you are trying to embed.",id:"googleAuthPromptModal.noAccessFile.errorMessage"})}),e.isMobileNative?(0,f.jsx)("div",{style:v.modalMessage,children:(0,f.jsx)(r()._H,{defaultMessage:"Please use Notion on desktop to connect a new account.",id:"googleAuthPromptModal.mobileUseDesktopPrompt.errorMessage"})}):(0,f.jsx)(m().Z,{isLarge:!0,onClick:h,children:(0,f.jsx)(r()._H,{defaultMessage:"Connect to Google",id:"googleAuthPromptModal.connectToGoogleButton.label"})}),!e.isMobile&&(0,f.jsx)("div",{style:{display:"block",marginTop:c().Z.vertical.tiny},children:(0,f.jsx)(g().Z,{underlined:!0,onClick:y,children:(0,f.jsx)(r()._H,{defaultMessage:"See my connected accounts",id:"googleAuthPromptModal.seeConnectedAccountsButton.label"})})})]}),onDismiss:n})}},732171:(e,t,n)=>{n.r(t),n.d(t,{HorizontalTemplatePicker:()=>X});n(267602),n(916054),n(653476),n(241792);var i=n(667294),o=()=>n(492788),s=()=>n(219727),a=()=>n(657320),r=()=>n(142735),l=()=>n(846550),d=()=>n(788860),c=()=>n(513670),u=()=>n(696459),p=()=>n(69863),m=()=>n(8101),g=()=>n(132156),f=()=>n(421654),h=()=>n(332542),y=()=>n(279830),v=()=>n(990966),x=()=>n(269299),b=()=>n(869211),S=()=>n(785673),M=()=>n(259801),j=()=>n(654493),C=()=>n(965865),w=()=>n(632775),k=()=>n(23338),_=()=>n(982855),T=()=>n(527278),I=()=>n(191586),P=()=>n(714966),A=()=>n(466970),R=()=>n(909679),Z=()=>n(676232),B=()=>n(314379),D=()=>n(233227),L=()=>n(610898),O=()=>n(821227),H=()=>n(998901),V=()=>n(104088),U=()=>n(749826),E=()=>n(692304),N=()=>n(807230),F=()=>n(78078),K=()=>n(255577),z=()=>n(967092),W=()=>n(67961),q=()=>n(69255),G=()=>n(98693),Y=n(785893);const $=8;function X(e){const{store:t,context:n,menuListStore:A,editorWidth:E}=e,X=ee(),ie=(0,I().OZ)(n),oe=(0,l().yK)((e=>({root:{background:ie?e.peekModalBackground:e.contentBackground,paddingBottom:"min(48px, 5vh)",pointerEvents:"all"}})),[ie]),[se,ae]=function(e){const t=(0,s().O7)(),n=(0,r().VK)((()=>"editor"===e.getRole()),[e]),i=(0,q().b6)(j().I,["table"]),m=function(e){const{environment:t,store:n}=e,i=(0,d().YB)(),o=(0,a().l)(),s=(0,r().VK)((()=>null==o?void 0:o.publicEditModeStore.state),[null==o?void 0:o.publicEditModeStore]),l=(0,r().VK)((()=>(0,_().GD)(s)),[s]);return{name:(0,r().VK)((()=>{const e=U().default.getEligibleGroup({experimentId:"ai_new_page_pills"});return e&&"control"!==e?"help_me_write"===e?i.formatMessage(J.helpMeWrite):"write_with_ai"===e?i.formatMessage(J.writeWithAi):(0,u().t1)(e):i.formatMessage(J.askAi)}),[i]),type:"ai",iconFn:e=>(0,Y.jsx)(S().D_,{}),shouldShow:()=>l,onClick:()=>{x().createAndCommit({userAction:"HorizontalTemplatePicker.genericHelpMeWriteNewPageWithAI",environment:t,canUndo:!0,perform:e=>{y().e({environment:t,store:n,transaction:e,preventTextSelection:!1,onTextSelection(){(0,b().openHelpMeWriteGenericPopup)({environment:t,title:""})}})}})}}}({environment:t,store:e}),C=function(e){const t=(0,d().YB)(),n=(0,l().Fg)(),i=(0,r().VK)((()=>(0,k().d)()),[]),o=ee();return{name:e?"":t.formatMessage(J.dictate),type:"dictation",iconFn:t=>(0,D().q)({...t,width:10,...e?{height:16,marginTop:"2px",marginBottom:"2px",marginLeft:"2px",marginRight:"-6px"}:{},fill:o?n.icon.primary:"dark"===n.mode?n.accentColors.red[700]:n.accentColors.red[400]}),shouldShow:()=>i,onClick:async(e,t)=>{const{dictationActions:n}=await w().Xb.load();n.startDictation({environment:e,blockStore:t,from:"horizontal_template_picker"})}}}(!0),I=function(e){const t=(0,s().O7)(),n=(0,d().YB)(),i=(0,l().Fg)();return{name:n.formatMessage(J.formTemplateTitle),type:"quick-form",iconFn:e=>(0,R().E)({...e,fill:i.regularIconColor}),shouldShow:()=>!0,onClick:async()=>{await(0,M().N)({environment:t,store:e})}}}(e),A=function(e,t){const n=(0,s().O7)(),i=(0,d().YB)(),a=(0,l().Fg)(),r=ee(),c=function(e){const{store:t,debugName:n,action:i}=e,a=(0,s().O7)(),r=(0,d().YB)(),l=e=>{const{store:t,isPreviewing:o}=e;x().createAndCommit({userAction:n,environment:a,canUndo:!0,perform:e=>{const n=t.getContentStores();for(const t of n)h().zo({blockStore:t,transaction:e});i({store:t,intl:r,environment:a,isPreviewing:o,transaction:e})}})};return async()=>{l({store:t,isPreviewing:!1}),await o().default.afterNextFlush();const e=t.getRenderableContentStores()[0],n=null==e?void 0:e.getTitleStore();n&&v().setSelectionAtEnd({store:n})}}({store:e,type:"quick-table",debugName:"HorizontalTemplatePicker.createInlineTableView",action:t=>{if(t.isPreviewing)!function(e){let{store:t,environment:n,transaction:i}=e;const o=g().f({environment:n,createBlockItem:p().Nc,inMemoryRecordCache:t.inMemoryRecordCache,from:"quick_templates",transaction:i,selection:[]});h().jG({parentStore:t,childStore:o,transaction:i});const s=o.getCollectionViewStores();f().FH({stores:s,transaction:i,update:{hide_linked_collection_name:!0}})}(t);else{(0,M().U)({environment:n,store:e,viewType:"table",transaction:t.transaction});const i=e.getCollectionViewStores()[0];i&&(0,P().u)(i.id,{viewType:"table"})}}});return{name:i.formatMessage(J.tableTemplateTitle),type:"quick-table",iconFn:e=>(0,Z().t)({...e,fill:a.regularIconColor}),shouldShow:()=>r,onClick:c}}(e,i[0]),B=c().zu(j().I,...i),H=function(e){const{isTablet:t}=(0,s().Fy)();return{name:T().Z.formatMessage(q().HB.templates),type:"templates",iconFn:e=>(0,L().U)(e),shouldShow:()=>!t,onClick:e=>{(0,O().C)({environment:e})}}}(),V=[C,m,A,...n?[I]:[],H].filter((e=>e.shouldShow(t))),E=[...B,te,q().pd];return[V,E]}(t),[re,le]=function(e){const{store:t,editorWidth:n,initialVisible:o,initialOverflow:a}=e,r=(0,s().O7)(),c=(0,d().YB)(),p=ee(),g=(0,l().yK)((e=>({icon:{width:16,marginLeft:2,marginRight:2,fill:e.lightIconColor}})),[]),[f,h]=i.useState(void 0),[y,v]=i.useState([]),[x,b]=i.useState(void 0),[S,M]=i.useState(o.length);(0,i.useEffect)((()=>{if(!(n&&y.every(u().$K)&&x))return;let e=0,t=0;for(;t<o.length&&(e+=y[t]+$,!(e+x>n+24));)t++;M(t)}),[y,n,o.length,x]);const j=o.slice(0,S).map(((e,n)=>{const i={key:"ai-skill"===e.type?`${e.type}-${n}`:e.type,render:i=>{var o;let{ref:s,...a}=i;return(0,Y.jsx)(C().n4,{onSizeChange:e=>{if(y[n]===e.width)return;const t=[...y];t[n]=e.width,v(t)},children:(0,Y.jsx)("div",{children:(0,Y.jsx)(G().Z,{...a,focused:f===n,onMouseEnter:i=>{var o;null===(o=e.onMouseEnter)||void 0===o||o.call(e,r,t),h(n)},onMouseLeave:n=>{var i;null===(i=e.onMouseLeave)||void 0===i||i.call(e,r,t),h(void 0)},format:"horizontal-new-page",title:(0,Y.jsx)(W().Z,{children:e.name}),type:e.type,icon:null===(o=e.iconFn)||void 0===o?void 0:o.call(e,g.icon),locked:!1})})})},action:n=>{(0,N().ww)(r)&&(m().rN(r,{is_keyboard:"keydown"===n.event.type,from:"horizontal_template_picker",template_type:e.type}),e.onClick(r,t))}};return i})),[w,k]=i.useState(!1),_=S,T={key:"more",render:e=>{let{ref:n,...i}=e;return(0,Y.jsx)(z().ZP,{origin:(0,Y.jsx)(C().n4,{onSizeChange:e=>b(e.width),children:(0,Y.jsx)("div",{children:(0,Y.jsx)(G().Z,{...i,focused:f===_,onMouseEnter:e=>{h(_)},onMouseLeave:e=>{h(void 0)},format:"horizontal-new-page",title:p?null:(0,Y.jsx)(W().Z,{children:c.formatMessage(J.more)}),type:"more",icon:(0,B().o)(g.icon),locked:!1})})}),alignmentToOrigin:H().Alignment.Start,placementToOrigin:H().Placement.Top,originGap:4,open:w,popupType:V().k.Popup,onDismiss:()=>k(!1),render:()=>(0,Y.jsx)(ne,{store:t,items:[...o.slice(S),...a]})})},action:e=>{m().rN(r,{is_keyboard:"keydown"===e.event.type,from:"horizontal_template_picker",template_type:"more"}),k(!0)}};return[j,T]}({store:t,editorWidth:E,initialVisible:se,initialOverflow:ae});return(0,Y.jsx)(K().Z,{type:K().i.Horizontal,store:A,initialFocus:void 0,disableInitialScroll:!0,disableCommandEnter:!0,isEnterOnHoverEmpty:!0,disableKeyboard:!0,sections:[{key:"Get started",render:e=>(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(Q,{isInPeekView:ie}),(0,Y.jsx)("div",{style:oe.root,children:(0,Y.jsxs)(F().sg,{gap:12,children:[(0,Y.jsx)(W().Z,{isSmall:!0,isSecondaryColor:!0,style:{fontWeight:500},children:X?(0,Y.jsx)(d()._H,{defaultMessage:"Get started with",id:"PageEditor.horizontalTemplatePicker.getStarted.label.new"}):(0,Y.jsx)(d()._H,{defaultMessage:"Get started",id:"PageEditor.horizontalTemplatePicker.getStarted.label"})}),(0,Y.jsx)("div",{style:{cursor:"pointer"},children:(0,Y.jsx)(F().X2,{gap:$,children:e.children})})]},e.key)})]}),items:[...re,le]}]})}function Q(e){const t=(0,l().yK)((t=>({fade:{background:`linear-gradient(0deg, ${e.isInPeekView?t.peekModalBackground:t.contentBackground} 0%, ${t.contentBackgroundTransparent} 100%)`,height:140,width:"100%"}})),[e.isInPeekView]);return(0,Y.jsx)("div",{style:t.fade})}const J=(0,d().vU)({askAi:{defaultMessage:"Ask AI",id:"newpage.templates.writeWithAiCondensed"},helpMeWrite:{defaultMessage:"Help me write",id:"newpage.templates.helpMeWrite"},writeWithAi:{defaultMessage:"Write with AI",id:"newpage.templates.writeWithAi"},dictate:{defaultMessage:"Dictate",id:"newpage.templates.dictateIntoNewPage"},more:{defaultMessage:"More",id:"newpage.templates.more"},quickTemplatePlaceholder:{defaultMessage:"...",id:"newpage.templates.quickTemplatePlaceholder"},tableTemplateTitle:{defaultMessage:"Table",id:"newpage.templates.table"},formTemplateTitle:{defaultMessage:"Form",id:"newpage.templates.form"}});function ee(){const e=(0,s().O7)(),{isTablet:t}=(0,s().Fy)(),n=(0,A().E)("tablet_refresh_template_pills_gate");return!(!t||!n)||!e.device.isMobile}const te={name:"",type:"divider",iconFn:e=>null,shouldShow:()=>!0,onClick:()=>{}};function ne(e){const{store:t,items:n}=e,o=(0,s().O7)(),a=(0,i.useMemo)((()=>new(E().Z)),[]),r=(0,l().yK)((e=>({menu:{width:200,cursor:"pointer",padding:"6px 4px"},icon:{width:16,marginLeft:2,marginRight:2,fill:e.regularIconColor},divider:{height:1,background:e.stroke.primary,margin:"6px -6px"}})),[]),d=n.filter((e=>e.shouldShow(o))).map((e=>{const n={key:e.name,render:t=>{var n;let{ref:i,...o}=t;return"divider"===e.type?(0,Y.jsx)("div",{style:r.divider}):(0,Y.jsx)(G().Z,{...o,format:"horizontal-new-page-submenu",title:(0,Y.jsx)(W().Z,{children:e.name}),type:e.type,icon:null===(n=e.iconFn)||void 0===n?void 0:n.call(e,r.icon),locked:!1})},action:n=>{(0,N().ww)(o)&&(m().rN(o,{is_keyboard:"keydown"===n.event.type,from:"horizontal_template_picker",template_type:e.type}),e.onClick(o,t))}};return n}));return(0,Y.jsx)(K().Z,{type:K().i.Vertical,store:a,initialFocus:void 0,disableInitialScroll:!0,disableCommandEnter:!0,isEnterOnHoverEmpty:!0,disableKeyboard:!0,sections:[{key:"Items",render:e=>(0,Y.jsx)("div",{style:r.menu,children:(0,Y.jsx)(F().sg,{children:e.children},e.key)}),items:d}]})}},969016:(e,t,n)=>{n.r(t),n.d(t,{ImportIntoNewPageModal:()=>p,default:()=>m});n(667294);var i=()=>n(142735);const o=(0,n(827282).CZ)("importIntoNewFile",{default:{loader:()=>n.e(89389).then(n.bind(n,689389))},small:{loader:()=>n.e(98419).then(n.bind(n,398419))},mini:{loader:()=>n.e(12182).then(n.bind(n,212182))},large:{loader:()=>n.e(20929).then(n.bind(n,420929))}});var s=()=>n(788860),a=()=>n(825137),r=()=>n(838266),l=()=>n(830581),d=()=>n(921981),c=n(785893);function u(){a().Z.setState({open:!1})}function p(){const e=(0,i().Kw)(a().Z);return(0,c.jsx)(d().c,{isOpen:e.open,onDismiss:u,onClosed:u,areaConstraint:{width:{type:"fixed",length:300}},render:()=>(0,c.jsx)(l().sR,{header:(0,c.jsx)(l().vI,{iconAndTitle:(0,c.jsx)(l().kC,{iconGroup:o,title:(0,c.jsx)(s()._H,{defaultMessage:"Import into new page?",id:"importIntoNewPageModal.title"})}),description:(0,c.jsx)(s()._H,{id:"importIntoNewPageModal.description",defaultMessage:"Since this page already has content, we’ll need to create a new page for you and import contents there."})}),footer:(0,c.jsx)(l().a6,{layout:"vertical",primaryButtons:[{buttonType:"primary",label:(0,c.jsx)(s()._H,{defaultMessage:"Yes, continue",id:"importIntoNewPageModal.importButton"}),onClick:()=>{r().default.setState({open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:void 0,openedFrom:"collection"}),u()}}],secondaryButtons:[{buttonType:"secondary",label:"Cancel",onClick:u}]})})})}const m=p},11070:(e,t,n)=>{n.r(t),n.d(t,{default:()=>M});var i=n(667294),o=()=>n(219727),s=()=>n(142735),a=()=>n(506347),r=()=>n(788860),l=()=>n(407391),d=()=>n(47443),c=()=>n(148126),u=()=>n(653457),p=()=>n(876822);class m extends(()=>n(263184))().default{getInitialState(){return{open:!1}}}const g=new m;var f=()=>n(108714),h=()=>n(92175),y=()=>n(667413),v=n(785893);const x={fontSize:24,lineHeight:1.2,marginBottom:6,fontWeight:n(707513).Ue.bold,marginRight:"auto"},b={display:"flex",alignItems:"center",marginTop:8,marginBottom:18},S={padding:"24px 36px 24px",minWidth:300};const M=function(){const e=(0,s().Kw)(g);return(0,v.jsx)(n(708518).Z,{open:e.open,innerStyle:S,preventHideChildrenWhileOpening:!0,render:()=>(0,v.jsxs)(i.Fragment,{children:[(0,v.jsxs)("div",{style:b,children:[(0,v.jsx)("div",{style:x,children:(0,v.jsx)(r()._H,{id:"importModal.importButton.label",defaultMessage:"Import"})}),(0,v.jsx)(j,{})]}),(0,v.jsx)("div",{children:(0,v.jsx)(w,{modalState:e})})]}),onDismiss:C})};function j(){const e=(0,o().O7)();return(0,v.jsx)(f().Z,{href:(0,c().UY)("guides.import"),onClick:()=>l().Fs(e,{from:"import"}),external:!0,children:(0,v.jsx)(h().Z,{isSmall:!0,icon:u().m,isGray:!0,children:(0,v.jsx)(r()._H,{id:"importModal.helpButton.label",defaultMessage:"Learn about importing"})})})}function C(){g.setState({open:!1})}function w(e){let{modalState:t}=e;const n=(0,o().O7)(),{mainEditorCurrentBlockStore:i,currentSpaceStore:r,currentSpaceViewStore:l,currentUserSettingsStore:c}=(0,s().VK)((()=>{const{mainEditorCurrentBlockStore:e,currentSpaceStore:t,currentSpaceViewStore:n,currentUserSettingsStore:i}=p().default.state;return{mainEditorCurrentBlockStore:e,currentSpaceStore:t,currentSpaceViewStore:n,currentUserSettingsStore:i}}),[]);return i&&r&&l&&c?(0,v.jsx)(y().Z,{pageStore:t.open&&t.pageStore?t.pageStore:i,spaceStore:r,spaceViewStore:l,userSettingsStore:c,analyticsFrom:"modal",onComplete:e=>function(e,t){g.setState({open:!1}),d()._c({environment:t,store:e,pageVisitSource:a().tY.Import})}(e,n),readOnlyCreditButton:!1}):null}},636413:(e,t,n)=>{n.d(t,{Z:()=>f});n(241792),n(667294);var i=()=>n(142735),o=()=>n(846550),s=()=>n(697466),a=()=>n(788860),r=()=>n(18610),l=()=>n(308186),d=()=>n(128119),c=()=>n(827973),u=()=>n(448419),p=()=>n(255577),m=()=>n(946563),g=n(785893);const f=function(e){let{currentLocale:t,pickerLabel:s,confirm:c,onChange:f,origin:v,showGlobeIcon:x}=e;const b=(0,o().Fg)(),S=(0,n(219727).O7)(),M=(0,a().YB)(),j=(0,i().qz)(void 0,n(529048).Z),{device:C}=S,w=(0,i().VK)((()=>"ja-JP"===t),[t]),k=(0,n(466970).E)("polyglot");return C.isMobile?null:(0,g.jsx)(u().ZP,{onClick:()=>{n(155055).xU(S,{origin:v})},popupType:u().Z4.Popup,buttonPopupStore:j,renderOrigin:e=>(0,g.jsxs)(n(92175).Z,{style:{marginLeft:-8,paddingLeft:8,paddingRight:8,display:"flex",alignItems:"center",...x&&{color:b.icon.secondary}},...e,children:[x&&(0,n(975899).o)({width:16,height:16,fill:b.icon.secondary,marginRight:4}),s||h(t,M).label,(0,r().ay)(t)&&!w&&(0,g.jsx)(m().Z,{desktopStyle:{marginLeft:4},children:(0,g.jsx)(a()._H,{id:"languagePicker.betaBadge",defaultMessage:"Beta"})}),(0,n(615634).i)({width:10,marginLeft:4,fill:x?b.icon.secondary:b.lightIconColor})]}),placementToOrigin:d().Iw.Bottom,alignmentToOrigin:d().lU.Start,render:e=>{let i;i=k?[...r().tp,...r().is]:[...r().tp];const o=[{key:"languages",render:e=>(0,g.jsx)(n(388284).Z,{...e,topBorder:0!==e.index}),items:i.map((n=>{const i={key:n,render:e=>function(e,t,n,i){const{label:o,caption:s}=h(e,i);return(0,g.jsx)(y,{label:o,caption:s,focused:t,props:n,locale:e})}(n,e.focused,e,M),action:()=>{!function(e,t,n,i,o){t!==e&&function(e,t,n,i){const{label:o}=h(e,t);if(n){const t=()=>{i(e)};l().vC({showCancel:!0,keepFocus:!1,message:(0,g.jsx)(a()._H,{id:"languagePicker.changeLanguage.confirmationMessage",defaultMessage:"Are you sure you want to update the language to {language}?",values:{language:o}}),items:[{label:(0,g.jsx)(a()._H,{id:"languagePicker.changeLanguage.updateButton.label",defaultMessage:"Update"}),color:"red",onAccept:t}]})}else i(e)}(e,n,i,o)}(n,t,M,c,f),e.close()}};return i}))}],s={menuType:n(352230).o.Popup,width:240};return(0,g.jsx)(n(198829).Z,{className:n(247724).hKO,...s,children:(0,g.jsx)(p().Z,{type:p().i.Vertical,initialFocus:void 0,sections:o})})}})};function h(e,t){return(0,s().t)(t)[e]}function y(e){const{locale:t}=e,n=(0,o().Fg)(),s=(0,i().VK)((()=>"ja-JP"===t),[t]);return(0,g.jsx)(c().Z,{...e.props,title:(0,g.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,g.jsx)("div",{style:{...e.style,marginRight:0},children:e.label})}),caption:e.caption&&(0,g.jsx)("span",{style:{color:n.mediumTextColor},children:e.caption}),shouldWrapCaption:!0,right:(0,r().ay)(e.locale)&&!s&&(0,g.jsx)(m().Z,{children:(0,g.jsx)(a()._H,{id:"languagePicker.betaBadge",defaultMessage:"Beta"})})})}},486595:(e,t,n)=>{n.d(t,{Z:()=>y,d:()=>h});n(667294);var i=()=>n(142735),o=()=>n(245015),s=()=>n(788860),a=()=>n(155055),r=()=>n(824462),l=()=>n(308186),d=()=>n(231077),c=()=>n(332504),u=()=>n(148882),p=()=>n(838266),m=()=>n(67961),g=()=>n(504117),f=n(785893);async function h(e){let{locale:t,environment:n,origin:i}=e;a().A0(n,{locale:t,origin:i});const s=await r().callApi({eventName:"setlocale",environment:n,data:{locale:t}});"success"===s.type?(o().Z.set("preferredLocale",t),await u().transactionQueue.drain(),n.device.isElectron?d().refreshAll({includeFocusedWindow:!0}):window.location.reload(!0)):l().x2(s)}const y=function(e){const t=(0,n(219727).O7)(),{device:o,WindowSizeStore:a}=t,r=(0,i().VK)((()=>a.state.paddingLeftCSS),[a]),l=(0,i().VK)((()=>a.state.paddingRightCSS),[a]),d=(0,i().VK)((()=>p().default.state.highlightedSetting===p().R.LanguageSetting),[]),u=(0,n(846550).yK)((e=>({container:{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"auto",height:"auto",paddingLeft:o.isMobile?r:0,paddingRight:o.isMobile?l:0,...d?{backgroundColor:e.buttonHoveredBackground,marginLeft:-1*(0,g().kN)(o.isMobile),marginRight:-1*(0,g().kN)(o.isMobile),paddingLeft:(0,g().kN)(o.isMobile),paddingRight:(0,g().kN)(o.isMobile),marginTop:-1*(0,c().f)(o.isMobile),marginBottom:-1*(0,c().f)(o.isMobile)+5,paddingTop:(0,c().f)(o.isMobile)/2,paddingBottom:(0,c().f)(o.isMobile)/2}:{}}})),[o.isMobile,r,l,d]);return(0,f.jsx)("div",{style:u.container,children:(0,f.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",width:"100%"},children:[(0,f.jsxs)("div",{style:{flex:1},children:[(0,f.jsx)(m().Z,{children:(0,f.jsx)(s()._H,{id:"languageRegionSettings.language.label",defaultMessage:"Language"})}),(0,f.jsx)(m().Z,{isSmall:!0,isMultiline:!0,style:{width:"80%"},children:(0,f.jsx)(s()._H,{id:"languageSettings.languageSwitcher.subtitle",defaultMessage:"Change the language used in the user interface."})})]}),(0,f.jsx)(n(636413).Z,{confirm:!0,onChange:e=>h({locale:e,environment:t,origin:"languageSettings"}),currentLocale:e.locale,origin:"languageSettings"})]})})}},270615:(e,t,n)=>{n.r(t),n.d(t,{default:()=>A});var i=n(667294),o=()=>n(219727),s=()=>n(142735),a=()=>n(846550),r=()=>n(565630),l=()=>n(572680),d=()=>n(788860),c=()=>n(707513),u=()=>n(319615),p=()=>n(824462),m=()=>n(497065),g=()=>n(656573),f=()=>n(440434),h=n(785893);const y=(0,n(827282).IU)("appDownload",{viewBox:"0 0 23 16",svg:(0,h.jsx)("path",{clipRule:"evenodd",d:"m23 11.4338c0 2.5317-2.1591 4.5662-4.922 4.5662h-12.59789c-3.12888 0-5.48011-2.2739-5.48011-4.9804 0-2.2463 1.28998-4.10591 3.3576-4.43732.04574-2.57768 2.49761-4.2992 4.74821-3.63637 1.09785-1.61104 2.86359-2.94591 5.34289-2.94591 3.7418 0 6.6786 2.96433 6.6603 7.0702 1.784.75489 2.891 2.43038 2.891 4.3636zm-17.51989 3.084h12.59789c1.9487 0 3.449-1.3717 3.449-3.084 0-1.66625-1.0704-2.89065-2.7354-3.25889-.1098-.02761-.1556-.09206-.1464-.21173.0366-.43269.064-.92981.0366-1.35328-.1555-2.73418-2.2323-5.12774-5.2331-5.12774-2.3695 0-3.73271 1.30725-4.62014 2.89989-.05489.10126-.11893.12888-.22872.09206-1.8755-.6168-3.90652.22094-3.90652 3.05638 0 .11968-.04575.18412-.17383.18412-1.93954 0-3.04654 1.46376-3.04654 3.30499 0 1.878 1.70167 3.4982 4.00716 3.4982zm7.19089-9.49502c0-.39047-.3145-.70701-.7026-.70701-.388 0-.7026.31654-.7026.70701v4.89196l-1.61105-1.62112c-.27439-.27611-.71927-.27611-.99366 0-.2744.27611-.2744.72377 0 .99987l2.81051 2.82811c.2744.2761.7193.2761.9936 0l2.8106-2.82811c.2743-.2761.2743-.72376 0-.99987-.2744-.27611-.7193-.27611-.9937 0l-1.6111 1.62112z",fillRule:"evenodd"})});var v=()=>n(688049),x=()=>n(341643),b=()=>n(355435),S=()=>n(998901),M=()=>n(876822),j=()=>n(522323),C=()=>n(715139),w=()=>n(1910),k=()=>n(108714),_=()=>n(967092),T=()=>n(906651),I=()=>n(777346),P=()=>n(67961);function A(){const e=(0,o().O7)(),t=(0,d().YB)(),[n,A]=(0,i.useState)(!0),{isDesktopBrowser:R,os:Z}=(0,o().Fy)(),B=(0,s().VK)((()=>e.RouterStore.state.route.name in l().c$),[e]),D=(0,s().VK)((()=>M().default.state.inAppCalloutStore),[]),L=(0,s().VK)((()=>D.getCalloutVisibility("desktop_preference_popup").canShow),[D]),O=e.currentUser.isLoggedIn(),H=(0,s().Kw)(j().Z),[V,U]=(0,i.useState)(!1),E=(0,s().VK)((()=>j().Z.canPersistToLocalStorage()),[]),N=!V&&O&&void 0===H&&R&&("mac"===Z||"windows"===Z)&&B&&E&&L,[F,K]=(0,i.useState)(!1),z=N&&F,W=(0,i.useRef)(!1);(0,i.useEffect)((()=>{N&&!W.current&&(async function(e,t){const n=await p().callApi({eventName:"getDesktopAppRegistration",environment:e,data:{os:t}});return"data"in n&&n.data.isRegistered}(e,Z).then((e=>{K(e)})),W.current=!0)}),[N,K,e,Z]);const q=(0,r().D9)(z);(0,i.useEffect)((()=>{z&&!q&&(u().wW(e),D.updateCalloutStatus({calloutId:"desktop_preference_popup",visible:!0,validateCanShow:!0}))}),[z,q,e,D]);const G=(0,x().J4)(),Y=(0,f().e)(),$=(0,a().yK)((()=>({origin:{position:"fixed",left:"50%",top:"100%"},container:{bottom:20,padding:"8px 12px 12px",minWidth:300},header:{display:"flex",justifyContent:"space-between",alignItems:"center"},headerText:{fontSize:14,fontWeight:c().Ue.medium},appDownloadButton:{fontSize:14,marginLeft:-5},appDownloadIcon:{width:14,height:14,marginRight:6},actions:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:8},alwaysOpenLinks:{display:"flex",alignItems:"center"},alwaysOpenLinksLabel:{marginLeft:6},alwaysOpenLinksButton:{paddingLeft:12,paddingRight:12,height:34,marginLeft:12}})),[]);return(0,h.jsx)(_().ZP,{popupType:_().kQ.Popup,placementToOrigin:S().Placement.Bottom,origin:(0,h.jsx)("div",{style:$.origin}),originGap:G?-b().tL/2:0,disableMouseCapture:!0,open:z,style:$.container,render:()=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{style:$.header,children:[(0,h.jsx)(P().Z,{style:$.headerText,children:(0,h.jsx)(d()._H,{id:"openInDesktopAppPopup.header",defaultMessage:"Open in Notion's desktop app?"})}),(0,h.jsx)(w().Z,{ariaLabel:t.formatMessage({id:"openInDesktopAppPopup.closeButton",defaultMessage:"Dismiss"}),icon:v().D,onClick:()=>{j().Z.setState("never"),U(!0),u().Zy(e)}})]}),(0,h.jsx)(k().Z,{external:!0,onClick:()=>{Y.current&&(m().c4({environment:e,url:Y.current,openInNew:"tab"}),u().iD(e))},children:(0,h.jsxs)(I().Z,{style:$.appDownloadButton,children:[y($.appDownloadIcon),(0,h.jsx)("span",{children:(0,h.jsx)(d()._H,{id:"openInDesktopAppPopup.appDownloadButton",defaultMessage:"Don't have the app? Download"})})]})}),(0,h.jsxs)("div",{style:$.actions,children:[(0,h.jsxs)("div",{style:$.alwaysOpenLinks,children:[(0,h.jsx)(C().Z,{checked:n,size:16,onClick:()=>{A(!n)}}),(0,h.jsx)(P().Z,{isInline:!0,style:$.alwaysOpenLinksLabel,children:(0,h.jsx)(d()._H,{id:"openInDesktopAppPopup.alwaysOpenLinksLabel",defaultMessage:"Always open in app",values:{strongtext:e=>(0,h.jsx)("strong",{children:e})}})})]}),(0,h.jsx)(T().Z,{style:$.alwaysOpenLinksButton,onClick:()=>{j().Z.setState(n?"always":"never"),U(!0),m().RX({url:(0,g().W)(window.location.href),environment:e}),u().LC(e,{always_open_in_app:n})},children:(0,h.jsx)(d()._H,{id:"openInDesktopAppPopup.openInAppButton",defaultMessage:"Open in app",values:{strongtext:e=>(0,h.jsx)("strong",{children:e})}})})]})]}),onClosed:()=>{D.updateCalloutStatus({calloutId:"desktop_preference_popup",visible:!1})}})}},666979:(e,t,n)=>{n.r(t),n.d(t,{OutlinerDropdownMenuButton:()=>K,useSortActions:()=>q});n(241792);var i=n(667294),o=()=>n(219727),s=()=>n(142735),a=()=>n(846550),r=()=>n(993407),l=()=>n(625230),d=()=>n(788860),c=()=>n(38562),u=()=>n(381140),p=()=>n(636340),m=()=>n(269299),g=()=>n(221662),f=()=>n(286338),h=()=>n(352230),y=()=>n(906591),v=()=>n(91502),x=()=>n(466970),b=()=>n(190970),S=()=>n(314379),M=()=>n(419273),j=()=>n(733641),C=()=>n(947189),w=()=>n(855238),k=()=>n(388284),_=()=>n(746324),T=()=>n(404553),I=()=>n(536635),P=n(785893);const A=(0,n(827282).IU)("move",{viewBox:"0 0 16 16",svg:(0,P.jsx)("path",{d:"M1.37891 8.5C1.22266 8.35938 1.14844 8.19531 1.15625 8.00781C1.16406 7.81641 1.24219 7.6543 1.39062 7.52148L3.26562 5.79883C3.41406 5.66602 3.56445 5.60547 3.7168 5.61719C3.86914 5.62891 3.99609 5.69336 4.09766 5.81055C4.20312 5.92773 4.25586 6.07422 4.25586 6.25V7.39258H7.37891V4.25781H6.23633C6.05664 4.25781 5.9082 4.20703 5.79102 4.10547C5.67773 4 5.61523 3.87109 5.60352 3.71875C5.5918 3.56641 5.65234 3.41602 5.78516 3.26758L7.50781 1.39844C7.64453 1.24219 7.80664 1.16211 7.99414 1.1582C8.18164 1.15039 8.3457 1.22656 8.48633 1.38672L10.209 3.26172C10.3457 3.41016 10.4082 3.5625 10.3965 3.71875C10.3887 3.87109 10.3262 4 10.209 4.10547C10.0918 4.20703 9.94141 4.25781 9.75781 4.25781H8.62695V7.39258H11.7441V6.25C11.7441 6.07422 11.7949 5.92773 11.8965 5.81055C12.002 5.69336 12.1309 5.62891 12.2832 5.61719C12.4355 5.60547 12.5879 5.66602 12.7402 5.79883L14.6152 7.52148C14.7676 7.66211 14.8438 7.82617 14.8438 8.01367C14.8438 8.20117 14.7676 8.36523 14.6152 8.50586L12.7402 10.2227C12.5918 10.3594 12.4395 10.4238 12.2832 10.416C12.1309 10.4043 12.002 10.3398 11.8965 10.2227C11.7949 10.1055 11.7441 9.95508 11.7441 9.77148V8.64062H8.62695V11.7695H9.75781C9.94141 11.7695 10.0918 11.8223 10.209 11.9277C10.3262 12.0293 10.3887 12.1562 10.3965 12.3086C10.4082 12.4648 10.3457 12.6172 10.209 12.7656L8.49219 14.6406C8.35156 14.7969 8.1875 14.875 8 14.875C7.8125 14.875 7.64844 14.7969 7.50781 14.6406L5.78516 12.7598C5.65234 12.6152 5.5918 12.4648 5.60352 12.3086C5.61523 12.1562 5.67773 12.0293 5.79102 11.9277C5.9082 11.8223 6.05664 11.7695 6.23633 11.7695H7.37891V8.64062H4.25586V9.77148C4.25586 9.95508 4.20312 10.1055 4.09766 10.2227C3.99609 10.3398 3.86914 10.4043 3.7168 10.416C3.56445 10.4238 3.41211 10.3594 3.25977 10.2227L1.37891 8.5Z"})});var R=()=>n(876822),Z=()=>n(711112);const B=(0,d().vU)({move:{id:"useMoveSidebarAction.title.moveSection",defaultMessage:"Move section"},moveUp:{id:"useMoveSidebarAction.option.moveUp",defaultMessage:"Move up"},moveDown:{id:"useMoveSidebarAction.option.moveDown",defaultMessage:"Move down"}});function D(e){let{type:t,onClose:n}=e;const i=function(e){const{sidebarSection:t,onSelect:n}=e,i=(0,s().VK)((()=>R().default.state.currentSpaceStore),[]),a=(0,s().VK)((()=>R().default.state.currentSpaceViewStore),[]),r=(0,s().VK)((()=>R().default.state.currentUserRootStore),[]),l=(0,d().YB)(),g=(0,o().O7)(),h=(0,_().Q)(),v=(0,Z().f)(),x=(0,s().VK)((()=>(0,f().b9)({environment:g,spaceStore:i,userRootStore:r})),[g,i,r]),b=(0,y().DP)({sidebarOrder:v,sidebarState:h,lockedSidebarExpEnabled:x});if(!a)return[];const S=b.indexOf(t),M=0===S,j=S===b.length-1;return["moveUp","moveDown"].map((e=>{const i=B[e];return(0,c().cN)({key:e,displayName:void 0,analyticsName:i.defaultMessage,validators:[],closeParentMenu:!0,action:i=>{let{environment:o}=i;const s=function(e){let{sidebarSection:t,selectedMoveOption:n,sidebarOrder:i,visibleSidebarOrder:o}=e;const s=[...i],a=i.indexOf(t),r=o.indexOf(t);if("moveUp"===n&&r>0){const e=o[r-1];s[i.indexOf(e)]=t,s[a]=e}if("moveDown"===n&&r<o.length-1){const e=o[r+1];s[i.indexOf(e)]=t,s[a]=e}return s}({sidebarSection:t,selectedMoveOption:e,sidebarOrder:v,visibleSidebarOrder:b});m().createAndCommit({userAction:`useMoveSidebarAction.${e}`,environment:o,canUndo:!0,perform:e=>{p().sW({store:a,data:{sidebar_order:s},transaction:e})}}),u().mv(o,{section:t,previous_order:v,new_order:s,from:"outliner_section_menu"}),n()},render:t=>{const n="moveUp"===e&&M||"moveDown"===e&&j,o="moveUp"===e?I().Z:T().M;return(0,P.jsx)(w().Z,{...t,disabled:n,disabledFeedback:n,title:l.formatMessage(i),svg:o})}})}))}({sidebarSection:t,onSelect:n}),a=(0,_().Q)(),r=(null==a?void 0:a.shownSidebarSectionCount)??0;return(0,c().MV)({key:"move",displayName:B.move,analyticsName:B.move.defaultMessage,validators:[()=>r>1],svg:A,subActions:()=>[(0,c().$J)({key:"move",render:e=>(0,P.jsx)(k().Z,{...e}),actions:i})]})}var L=()=>n(959005),O=()=>n(764189),H=()=>n(555813),V=()=>n(149809),U=()=>n(154186),E=()=>n(448419),N=()=>n(198829);const F=(0,d().vU)({manual:{id:"outlinerDropdownMenuButton.sort.manual",defaultMessage:"Manual"},lastEdited:{id:"outlinerDropdownMenuButton.sort.lastEdited",defaultMessage:"Last edited"}});function K(e){const{type:t,spaceViewStore:n}=e,s=(0,o().O7)(),r=(0,a().yK)((e=>({button:{display:"flex",alignItems:"center",justifyContent:"center",height:20,width:20,borderRadius:4},icon:{fill:e.mediumIconColor,height:14,width:14}})),[]),l=(0,i.useCallback)((()=>{L().Z.setState({open:!0}),u().Mk(s,{outliner_type:y().iE[t]})}),[s,t]),c=(0,i.useCallback)((()=>{L().Z.setState({open:!1})}),[]),p=(0,d().YB)().formatMessage({id:"outlinerDropdownMenuButton.ariaLabel",defaultMessage:"Open menu"});return(0,P.jsx)(E().ZP,{popupType:E().Z4.Popup,alignmentToOrigin:E().vR.Start,renderOrigin:e=>(0,P.jsx)(U().Z,{style:r.button,ariaLabel:p,...e,children:(0,S().o)(r.icon)}),onClick:l,onClose:c,render:e=>(0,P.jsx)(W,{type:t,spaceViewStore:n,onClose:()=>{e.close()}}),originGap:2})}const z=(0,d().vU)({sort:{id:"outlinerDropdownMenu.sort",defaultMessage:"Sort"},truncationLimit:{id:"outlinerDropdownMenu.truncationLimit",defaultMessage:"Show"},addTeam:{id:"outlinerDropdownMenu.addTeam",defaultMessage:"New teamspace"}});function W(e){const{type:t,spaceViewStore:n,onClose:i}=e,g=(0,o().O7)(),x=(0,d().YB)(),S=(0,a().yK)((e=>({rightText:{fontSize:12,color:e.text.secondary}})),[]),_=(0,s().VK)((()=>(0,f().mq)(g)),[g]),T=(0,s().VK)((()=>(0,y().S4)({spaceViewStore:n,type:t})),[n,t]),I=T.sortOption,A=T.truncationLimit,Z="shared"===t&&_||"private"===t||"teamspaces"===t,B="private"===t||"shared"===t&&_,L=(0,s().VK)((()=>!O().n.state),[]),U=(0,s().VK)((()=>{const{currentSpaceStore:e}=R().default.state;return!!e&&(0,v().Xq)({environment:g,spaceStore:e})}),[g]),E=L&&"teamspaces"===t&&U,K=q({type:t,onSelect:i,spaceViewStore:n,outlinerLocation:"sidebar"}),W=function(e){const{type:t,spaceViewStore:n,onSelect:i}=e,d=(0,o().O7)(),g=(0,a().yK)((()=>({icon:{width:16,height:16},right:{width:16}})),[]),f=(0,s().VK)((()=>(0,y().S4)({type:t,spaceViewStore:n}).truncationLimit),[t,n]);return r().Wy.map((e=>(0,c().cN)({key:e.toString(),displayName:void 0,analyticsName:e.toString(),validators:[],closeParentMenu:!0,action:()=>{m().createAndCommit({userAction:"OutlinerDropdownMenuButton.setTruncationLimit",environment:d,canUndo:!0,perform:i=>{const o=n.getSettingsStore().getKeyStore("sidebar_section_menu").getKeyStore("truncationLimit").getKeyStore(t);p().sO({transaction:i,store:o,value:e})}}),l().j({name:"update_sidebar_section_option",args:{option:"show",type:t}}),u().hH(d,{outliner_type:y().iE[t],option:e}),i()},render:t=>(0,P.jsx)(w().Z,{...t,title:(0,P.jsx)(G,{limit:e,withItems:!0}),right:f===e&&(0,j().k)(g.icon),rightStyle:g.right})})))}({type:t,onSelect:i,spaceViewStore:n}),Y=D({type:t,onClose:i}),$=[(0,c().MV)({key:"sort",displayName:z.sort,analyticsName:z.sort.defaultMessage,validators:[()=>B],svg:b().T,right:x.formatMessage(F[I]),rightStyle:S.rightText,subActions:()=>[(0,c().$J)({key:"sort",render:e=>(0,P.jsx)(k().Z,{...e}),actions:K})]}),(0,c().MV)({key:"truncationLimit",displayName:z.truncationLimit,analyticsName:z.truncationLimit.defaultMessage,validators:[()=>Z],svg:C().J,right:(0,P.jsx)(G,{limit:A}),rightStyle:S.rightText,subActions:()=>[(0,c().$J)({key:"truncationLimit",render:e=>(0,P.jsx)(k().Z,{...e}),actions:W})]}),Y],X=[(0,c().$J)({key:"all",render:e=>(0,P.jsx)(k().Z,{...e}),actions:$}),(0,c().$J)({key:"addTeam",render:e=>(0,P.jsx)(k().Z,{...e}),actions:[(0,c().cN)({key:"addTeam",displayName:z.addTeam,analyticsName:z.addTeam.defaultMessage,validators:[()=>E],svg:M().f,closeParentMenu:!0,action:()=>{(0,H().lo)("sidebar_team_section"),i()}})]})];return(0,P.jsx)(N().Z,{menuType:h().o.Popup,minWidth:220,children:(0,P.jsx)(V().Z,{context:{blocks:[],environment:g,publicEditMode:void 0},sections:X,initialFocus:void 0})})}function q(e){const{type:t,spaceViewStore:n,onSelect:i,outlinerLocation:r}=e,f=(0,o().O7)(),h=(0,d().YB)(),{currentSpaceStore:v}=(0,s().Kw)(R().default),b=f.currentUser.id,S=(0,x().E)("sidebar_add_new_pages_to_bottom"),M=(0,s().VK)((()=>(0,y().S4)({type:t,spaceViewStore:n}).sortOption),[t,n]),C=(0,a().yK)((()=>({icon:{width:16,height:16},right:{width:16}})),[]);return["manual","lastEdited"].map((e=>{const o=F[e];return(0,c().cN)({key:e,displayName:void 0,analyticsName:o.defaultMessage,validators:[],closeParentMenu:!0,action:async()=>{m().createAndCommit({userAction:"OutlinerDropdownMenuButton.setSortOption",environment:f,canUndo:!0,perform:i=>{const o=n.getSettingsStore().getKeyStore("sidebar_section_menu").getKeyStore("sortOption").getKeyStore(t);p().sO({transaction:i,store:o,value:e})}}),"manual"===e&&"shared"===t&&!S&&b&&v&&await g().l({environment:f,spaceId:v.id,userId:b}),l().j({name:"update_sidebar_section_option",args:{option:"sort",type:t}}),u().NQ(f,{outliner_type:y().iE[t],outliner_location:r,option:e}),i()},render:t=>(0,P.jsx)(w().Z,{...t,title:h.formatMessage(o),right:M===e&&(0,j().k)(C.icon),rightStyle:C.right})})}))}function G(e){const{limit:t,withItems:n}=e;return t===r().Ng?(0,P.jsx)(d()._H,{id:"outlinerDropdownMenuButton.truncationLimit.noTruncation",defaultMessage:"All"}):n?(0,P.jsx)(d()._H,{id:"outlinerDropdownMenuButton.truncationLimit",defaultMessage:"{limit} items",values:{limit:t}}):(0,P.jsx)("span",{children:t})}},407291:(e,t,n)=>{n.d(t,{Z:()=>u});n(241792);var i=n(667294),o=()=>n(142735),s=()=>n(788860),a=()=>n(88476),r=()=>n(852465),l=()=>n(301741),d=()=>n(122671),c=n(785893);const u=function(e){const{origin:t,permissionsInviteStore:u,store:p,handleClickRemoveToken:m,handleInputChange:g,handleInputSubmit:f,defaultRoleForNonBot:h,right:y,focus:v,handleFocus:x}=e,b=(0,o().VK)((()=>0!==(0,n(122479).eL)()),[]),S="share_menu"===t||"add_members"===t,M="add_members"===t,[j,C]=(0,o().AF)(u),w=(0,n(219727).O7)(),{device:k}=w,_=(0,s().YB)(),{tokenQuery:T}=j,I=(0,n(551861).S)(p),P=j.inviteTargets.map((e=>{const t="newUser"===e.type?e.value.email:`${e.type}-${e.value.id}`,o=(0,a().OA)(e),r="newUser"===e.type||"existingUser"===e.type?e.value.email:void 0,d=o?I:void 0,u={key:t,target:e,onClickRemove:m,role:j.inviteRole,shouldWrap:S,showInfoIcon:Boolean(d)};return S&&r?(0,c.jsx)(n(654133).Z,{placement:n(998901).Placement.Top,disableTooltip:M,renderTooltip:()=>o?d||(0,c.jsx)(s()._H,{defaultMessage:"{email} will be invited as a guest",id:"ContextualInvite.permissions_invites.guest.tooltip",values:{email:r}}):r,render:n=>(0,i.createElement)("span",{...n,key:t},(0,c.jsx)(l().Z,{...u,backgroundColor:(0,a().gQ)(e)}))},t):(0,i.createElement)(l().Z,{...u,key:t})}));return(0,c.jsx)(d().ZP,{focus:k.isMobile?void 0:v,focusInitial:k.isMobile,focusAfterAnimation:!0,onClick:()=>{k.isMobile||null==x||x()},format:d().UR.Share,value:T,onChange:g,type:"email",tokens:P,disabled:!1,autoComplete:"off",placeholder:S?b?_.formatMessage({defaultMessage:"Add people, groups, or emails…",id:"ContexualInvites.inviteUserModal.searchInput.placeholderWithTeams"}):_.formatMessage({defaultMessage:"Add emails or people",id:"ContexualInvites.inviteUserModal.searchInput.placeholderWithoutBots"}):(0,r().Mm)(p)||(0,r().R$)(p)?_.formatMessage({id:"inviteUserModal.searchInput.placeholder",defaultMessage:"Search name or emails"}):_.formatMessage({id:"permissionsInvite.searchInput.placeholder",defaultMessage:"Search emails, names, or groups"}),onRemoveLastToken:()=>{const e={...j};e.inviteTargets=e.inviteTargets.slice(0,-1),0===e.inviteTargets.length&&(e.isInviteTargetsEmpty=!0,e.inviteRole=h),C(j)},right:y,inputFullWidth:!0,inputAndTokenWrapRightStyle:{paddingTop:w.device.isMobile?0:j.isInviteTargetsEmpty?7:6,paddingBottom:w.device.isMobile||S?0:4},onEmptySubmit:()=>f(),dontShowBorderBottom:k.isAndroid,showBorder:S,...!S&&{style:{padding:"10px  9px 4px 9px"}},...S&&{style:{borderRadius:4,paddingTop:j.isInviteTargetsEmpty?3:0,paddingBottom:0,...v&&{background:"none"}}}})}},88556:(e,t,n)=>{n.r(t),n.d(t,{PermissionsInviteWithModal:()=>ye});var i=n(667294),o=()=>n(219727),s=()=>n(142735),a=()=>n(846550),r=()=>n(714230),l=()=>n(788860),d=()=>n(696459),c=()=>n(930085),u=()=>n(912732),p=()=>n(849129),m=()=>n(88476),g=()=>n(852465),f=()=>n(732811),h=()=>n(247724),y=()=>n(576387),v=()=>n(906651),x=()=>n(807463),b=n(785893);const S=function(e){const{permissionsInviteStore:t,onInviteClick:a,onInviteComplete:r,inviteOrigin:d,sudoModeStore:c}=e,u=(0,o().O7)(),m=(0,l().YB)(),g=(0,n(228772).r)(),f=(0,s().qz)(void 0,x().ZP),h=(0,s().VK)((()=>t.state.inviteTargets.length>0),[t]),y=(0,i.useCallback)((async()=>{g&&await p().qg({environment:u,store:g,sudoModeStore:c,permissionsInviteStore:t,contextualInviteStore:f,onInviteClick:a,onInviteComplete:r,inviteOrigin:d,intl:m})}),[f,u,m,d,a,r,t,g,c]);return(0,b.jsx)(v().Z,{onClick:y,disabled:!h,children:(0,b.jsx)(l()._H,{id:"spacePermissionsInviteButton.label",defaultMessage:"Send invite"})})};var M=()=>n(661641);const j=function(e){const{permissionsInviteStore:t}=e,o=(0,i.useCallback)((()=>{t.reset()}),[t]),s=(0,a().yK)((()=>({container:{display:"flex",flexDirection:"column",gap:8},header:{display:"flex",justifyContent:"space-between"}})),[]);return(0,b.jsxs)("div",{style:s.container,children:[(0,b.jsxs)("div",{style:s.header,children:[(0,b.jsx)(M().q,{styleName:"Heading-17px/Semibold",children:(0,b.jsx)(l()._H,{id:"spacePermissionsInviteHeader.title",defaultMessage:"Invite members"})}),(0,b.jsx)(n(507159).Z,{onClose:o})]}),(0,b.jsx)(n(67961).Z,{isSecondaryColor:!0,isMultiline:!0,children:(0,b.jsx)(l()._H,{id:"spacePermissionsInviteHeader.description",defaultMessage:"Type or paste in emails below, separated by commas. Your workspace will be billed by members."})})]})};n(670560),n(241792);var C=()=>n(827973),w=()=>n(448419),k=()=>n(198829),_=()=>n(255577),T=()=>n(967092),I=()=>n(388284),P=()=>n(777814),A=()=>n(73478),R=()=>n(352230),Z=()=>n(164079),B=()=>n(122479),D=()=>n(615634),L=()=>n(998901),O=()=>n(965014),H=()=>n(239823),V=()=>n(18281),U=()=>n(697623);function E(e){const{permissionsInviteStore:t}=e,n=(0,o().O7)(),r=(0,s().VK)((()=>{const e=(0,U().zt)();return(0,V().o9)(e)}),[]);(0,f().K)((()=>{r||t.setState({...t.state,isInviteTargetsEmpty:!0,inviteTargets:[],inviteRole:"read_and_write"})}));const d=(0,s().VK)((()=>t.state.inviteRole?t.state.inviteRole:r?"editor":"read_and_write"),[r,t]),c=(0,s().VK)((()=>{const e=["editor"];return(0,B().U7)()&&e.push("membership_admin"),r||e.push("read_and_write"),e}),[r]),u=(0,i.useCallback)((e=>{p().XC({environment:n,newRole:e,permissionsInviteStore:t})}),[n,t]),m=(0,a().yK)((e=>({menuItem:{width:"100%",backgroundColor:e.inputBackground,borderRadius:6,boxShadow:"rgba(15, 15, 15, 0.1) 0px 0px 0px 1px inset"},dropdownButton:{display:"flex",minHeight:34,margin:0,width:"100%"},dropdownButtonContent:{display:"flex",alignItems:"center"},selectedRole:{width:"100%",color:e.mediumTextColor},downIcon:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]);function g(e){const t=c.map((t=>({key:t,render:e=>{var n;const i=(0,P().M)({type:"space_permission",table:"space",role:t,isRemovable:!1,isCurrentUser:!1});return(0,b.jsx)(C().Z,{title:i.label.defaultMessage,caption:null===(n=i.caption)||void 0===n?void 0:n.defaultMessage,shouldWrapCaption:!0,...e})},action:()=>{u(t),e.close()}})));return r&&t.push({key:"read_and_write",render:e=>(0,b.jsx)(N,{menuListItemProps:e}),action:()=>{e.close()}}),t}return(0,b.jsx)(w().ZP,{popupType:T().kQ.Popup,sameWidthAsOrigin:!0,render:e=>(0,b.jsx)(k().Z,{menuType:R().o.Popup,children:(0,b.jsx)(_().Z,{type:_().i.Vertical,initialFocus:void 0,sections:[{key:"roles",render:e=>(0,b.jsx)(I().Z,{...e}),items:g(e)}]})}),renderOrigin:e=>(0,b.jsx)(C().Z,{style:m.menuItem,buttonStyle:m.dropdownButton,title:(0,b.jsxs)("div",{style:m.dropdownButtonContent,children:[(0,b.jsx)("div",{style:m.selectedRole,children:(0,b.jsx)(M().q,{styleName:"UIRegular-14px/Regular",children:(0,b.jsx)(l()._H,{...(0,P().M)({type:"space_permission",table:"space",role:d,isRemovable:!1,isCurrentUser:!1}).label})})}),(0,D().i)(m.downIcon)]}),focused:!1,...e})})}function N(e){let{menuListItemProps:t}=e;const n=(0,o().O7)(),s=(0,a().yK)((()=>({titleContainer:{display:"flex",alignItems:"center"},titleLabel:{marginRight:6}})),[]),d="space_permission_settings",c="plus",u=(0,i.useCallback)((()=>{(0,O().y)(n,{from:d,upsell:{type:"product",product:c,limit:{type:"none"}}})}),[n]),p=(0,b.jsx)(A().Z,{imageURL:r().Z.images.tooltips.upsells.spaceReadAndWritePng,imageWidth:240,imageHeight:100,caption:(0,b.jsx)(l()._H,{defaultMessage:"Members cannot change workspace settings or invite new members.",id:"spacePermissionsInviteRoleSection.spaceReadAndWriteUpgradeTooltip.caption"}),title:(0,b.jsx)(l()._H,{defaultMessage:"Upgrade to add non-admin members",id:"spacePermissionsInviteRoleSection.spaceReadAndWriteUpgradeTooltip.title"})});return(0,b.jsx)(H().Z,{requireUpgradeToTier:c,renderUpgradeTooltip:()=>p,analyticsName:d,tooltipPlacement:L().Placement.Left,render:(e,n)=>{var i;const{focused:o,...a}=(0,Z().Z)(t,e),r=(0,P().M)({type:"space_permission",table:"space",role:"read_and_write",isRemovable:!1,isCurrentUser:!1});return(0,b.jsx)(C().Z,{...a,title:(0,b.jsxs)("div",{style:s.titleContainer,children:[(0,b.jsx)("div",{style:s.titleLabel,children:r.label.defaultMessage}),n]}),caption:null===(i=r.caption)||void 0===i?void 0:i.defaultMessage,shouldWrapCaption:!0,focused:o})},onClick:u})}const F=function(e){const t=(0,a().yK)((e=>({container:{display:"flex",flexDirection:"column",width:"100%",gap:8},roleText:{color:e.mediumTextColor}})),[]);return(0,b.jsxs)("div",{style:t.container,children:[(0,b.jsx)(M().q,{styleName:"UISmall-12px/Medium",customStyles:t.roleText,children:(0,b.jsx)(l()._H,{id:"spacePermissionsInviteRoleSection.label",defaultMessage:"Role"})}),(0,b.jsx)(E,{...e})]})};const K=function(e){const{inviteOrigin:t,onInviteClick:s,permissionsInviteStore:r}=e,l=(0,o().O7)();(0,f().K)((async()=>{await y().bi(l)}));const d=(0,i.useCallback)((()=>{r.setState({...r.state,inputFocus:"none"})}),[r]),c=(0,a().yK)((()=>({container:{maxWidth:460},body:{display:"flex",flexDirection:"column",gap:20,width:"100%"},footer:{display:"flex",justifyContent:"end"},description:{}})),[]);return(0,b.jsx)("div",{style:c.container,onClick:d,className:h().FJA,children:(0,b.jsx)(n(830581).sR,{header:(0,b.jsx)(j,{permissionsInviteStore:r}),footer:(0,b.jsx)("div",{style:c.footer,children:(0,b.jsx)(S,{inviteOrigin:t,onInviteClick:s,permissionsInviteStore:r})}),children:(0,b.jsxs)("div",{style:c.body,children:[(0,b.jsx)(n(335058).Z,{permissionsInviteStore:r}),(0,b.jsx)(F,{permissionsInviteStore:r})]})})})};var z=()=>n(873175),W=()=>n(620218),q=()=>n(897257),G=()=>n(923550),Y=()=>n(568017),$=()=>n(513670),X=()=>n(148126),Q=()=>n(345918),J=()=>n(356140),ee=()=>n(896014),te=()=>n(826955),ne=()=>n(661769),ie=()=>n(508181),oe=()=>n(370005),se=()=>n(407291),ae=()=>n(711658);function re(e){const{store:t,permissionsInviteStore:r,membersOnly:d,onUpgradeButtonClick:c,upgradeButtonName:u,inviteOrigin:m,onInviteClick:v}=e,x=(0,o().O7)();(0,f().K)((async()=>{await y().bi(x)}));const S=(0,s().VK)((()=>(0,g().Mm)(t)),[t]),M=(0,i.useCallback)((async()=>{await p().kL({environment:x,permissionsInviteStore:r,from:"share_menu"})}),[x,r]),j=(0,a().yK)((()=>({right:{color:Y().ZP.blue}})),[]);return(0,b.jsxs)(k().Z,{menuType:R().o.Modal,title:S?(0,b.jsx)(l()._H,{id:"inviteUserModal.addMemberMenu.title",defaultMessage:"Add members"}):(0,b.jsx)(l()._H,{id:"inviteUserModal.invitePersonMenu.title",defaultMessage:"Invite a person"}),right:(0,b.jsx)("div",{style:j.right,children:(0,b.jsx)(l()._H,{id:"inviteUserModal.mobile.inviteButton.label",defaultMessage:"Invite"})}),left:(0,b.jsx)(n(470386).CancelMenuText,{}),onClickLeft:M,onClickRight:v,header:(0,b.jsx)(le,{...e,inviteOrigin:m,onInviteClick:v}),className:h().FJA,children:[(0,b.jsx)(I().Z,{title:(0,b.jsx)(l()._H,{id:"inviteUserModal.permissionLevel.title",defaultMessage:"Permission level"}),children:(0,b.jsx)(ue,{store:t,onUpgradeButtonClick:c,upgradeButtonName:u,permissionsInviteStore:r})}),(0,b.jsx)("div",{children:(0,b.jsx)(de,{store:t,permissionsInviteStore:r,membersOnly:d})}),(0,b.jsx)(ce,{})]})}function le(e){const{store:t,isSubscribed:n,onInviteClick:a,permissionsInviteStore:r,inviteOrigin:l}=e,d=(0,o().O7)(),u=(0,s().VK)((()=>m().xT({environment:d,store:t,isSubscribed:n})),[d,t,n]),g=(0,s().VK)((()=>{const e=r.state.inputFocus;return"invitee"===e||"invitee-popup-closed"===e}),[r]),f=(0,J().W)(),h=(0,ne().nL)({spaceId:f}),y=(0,i.useMemo)((()=>$().Ds((()=>{c().UW(d,{invite_flow_id:r.state.flowId,billingData:h,invite_origin:l})}),1e3)),[d,r,l,h]),v=(0,i.useCallback)((async e=>{y(),await p().jC({environment:d,event:e,permissionsInviteStore:r})}),[y,d,r]),x=(0,i.useCallback)((e=>{p().PV({targetToRemove:e,permissionsInviteStore:r,defaultRoleForNonBot:u})}),[u,r]);return(0,b.jsx)(se().Z,{permissionsInviteStore:r,store:t,handleClickRemoveToken:x,handleInputChange:v,handleInputSubmit:a,origin:"share_modal",defaultRoleForNonBot:u,focus:g,handleFocus:()=>{}})}function de(e){const{store:t,permissionsInviteStore:n,membersOnly:i}=e,o=(0,s().VK)((()=>(0,g().OY)(t)),[t]),a=(0,s().VK)((()=>t instanceof te().G&&(0,Q().Q6)(t.getSpaceStore())),[t]);return(0,b.jsx)(ae().Z,{permissionsInviteStore:n,store:t,defaultRoleForSpaceBot:"editor",shouldShowBots:o,shouldShowGroups:o,sectionRenderLimit:10,membersOnly:i,guestsMustBeRequested:a})}function ce(){return(0,b.jsx)(I().Z,{topBorder:!0,disableDesktopPadding:!0,children:(0,b.jsx)(ie().Z,{title:(0,b.jsx)(l()._H,{id:"inviteUserModal.helpButton.caption",defaultMessage:"Learn how to invite people and set permissions"}),href:(0,X().UY)("guides.invitePerson"),analyticsFrom:"invite_person"})})}function ue(e){const t=(0,o().O7)(),{store:n,onUpgradeButtonClick:r,upgradeButtonName:l,permissionsInviteStore:d}=e,{inviteRole:c,table:u}=(0,s().VK)((()=>{const{inviteRole:e}=d.state;return{inviteRole:e,table:n.table}}),[d,n.table]),m=(0,s().VK)((()=>(0,ee().ow)(d.state)),[d]),f=(0,s().VK)((()=>(0,g().OY)(n)?n.getType():void 0),[n]),h=(0,s().VK)((()=>(0,g().Mm)(n)&&!n.canAdmin()),[n]),y=(0,i.useCallback)((e=>{p().XC({environment:t,newRole:e,permissionsInviteStore:d})}),[t,d]),v=(0,a().yK)((()=>({button:{display:"flex",whiteSpace:"nowrap",height:26,color:Y().ZP.uiGray}})),[]);return m||!c?null:(0,b.jsx)(oe().ZP,{disabled:h,role:c,table:u,type:"user_permission",blockType:f,isInvite:!0,onUpgradeButtonClick:r,upgradeButtonName:l,buttonStyle:v.button,isMenuItem:!0,onChange:y})}const pe=i.memo(re);var me=()=>n(542401),ge=()=>n(189265);function fe(e){const{store:t,origin:c,sudoModeStore:u,onInviteComplete:f,onInviteClick:h}=e,v=(0,o().O7)(),{isMobile:S}=v.device,M=(0,l().YB)(),j=(0,s().VK)((()=>{var e;return null===(e=n(876822).default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),C=(0,n(595976).p)({spaceId:j}),w=(0,s().qz)(e.permissionsInviteStore,n(223023).Z),k=(0,s().VK)((()=>w.state.modalOpen),[w]),_=e.analyticsFrom,T=(0,s().qz)(void 0,x().ZP),I=(0,i.useCallback)((async()=>{const e=W().default.DO_NOT_USE_markLegacy("share_menu.invite_user_lag");await p().qg({environment:v,store:t,sudoModeStore:u,permissionsInviteStore:w,contextualInviteStore:T,onInviteClick:h,onInviteComplete:f,inviteOrigin:_,intl:M}),W().default.DO_NOT_USE_measureLegacy(e,{environment:v})}),[v,t,u,w,T,h,f,_,M]);(0,i.useEffect)((()=>{k&&!(0,d().$K)(q().subscriptionDataStoreInstance.state)&&y().bi(v)}),[v,k]);const P=(0,s().VK)((()=>Boolean(t.canEditMembership())),[t]),R=(0,s().VK)((()=>P&&(0,g().Mm)(t)&&(0,d().$K)(q().subscriptionDataStoreInstance.state)&&!U().Mk()),[P,t]),Z=(0,s().VK)((()=>function(e){let{store:t,canEditMembership:n,showUpgrade:i}=e;if(!n&&(0,g().Mm)(t))return(0,b.jsx)(l()._H,{id:"inviteUserButton.tooltip.adminsOnlyMessage",defaultMessage:"Only admins can add members."});if(!n)return(0,b.jsx)(l()._H,{id:"inviteUserButton.tooltip.fullAccessOnlyMessage",defaultMessage:"Only those with full access can add people."});if(i)return(0,b.jsx)(A().Z,{imageURL:r().Z.images.tooltips.upsells.spaceReadAndWritePng,imageWidth:240,imageHeight:100,caption:(0,b.jsx)(l()._H,{defaultMessage:"Members are teammates you invite to your workspace. They can access and add pages for all members to see, or be added to pages with permissions for private collaboration.",id:"permissionsInvite.spaceAddMemberUpgradeTooltip.caption"}),title:(0,b.jsx)(l()._H,{defaultMessage:"Upgrade to add members",id:"permissionsInvite.spaceAddMemberUpgradeTooltip.title"})});return null}({store:t,canEditMembership:P,showUpgrade:R})),[P,R,t]),B=(0,i.useCallback)((()=>async function(e,t,n,i){const o=await(0,m().Aw)({environment:e,permissionsInviteStoreState:n.state,from:i??((0,g().Mm)(t)?"space_share_modal":"page_share_modal")});o||n.reset()}(v,t,w,e.analyticsFrom)),[v,t,w,e.analyticsFrom]),D=(0,i.useCallback)((()=>S?(0,b.jsx)(pe,{...e,onInviteClick:I,inviteOrigin:_,permissionsInviteStore:w,billingData:C}):(0,b.jsx)(K,{inviteOrigin:_,onInviteClick:I,permissionsInviteStore:w})),[S,e,I,_,w,C]),L=(0,a().yK)((()=>({modal:{display:"flex",alignSelf:"center",top:0}})),[]);return(0,g().Mm)(t)?(0,b.jsx)(G().Z,{open:k,onDismiss:B,renderContent:D,modalStyle:L.modal,origin:(0,b.jsx)(n(654133).Z,{renderTooltip:()=>Z,disableTooltip:P,render:t=>(0,b.jsx)(he,{permissionsInviteStore:w,tooltipEvents:t,actionEnabled:P,showUpgrade:R,buttonInner:c,...e,...t})})}):(0,b.jsx)(G().Z,{open:k,onDismiss:B,renderContent:D,origin:null})}function he(e){let{tooltipEvents:t,showUpgrade:n,actionEnabled:s,store:r,isSubscribed:d,enableInviteDropdown:p,onInviteClick:g,onInviteComplete:f,upgradeButtonName:h,onUpgradeButtonClick:y,shouldGrow:x,buttonStyle:S,permissionsInviteStore:M,buttonInner:j}=e;const C=(0,o().O7)(),k=(0,a().yK)((()=>({dropdownButton:{flex:x?1:0,...S},importListButton:{height:28,borderRadius:4,border:void 0,width:"100%"},importListButtonContainer:{padding:"0 6px",alignItems:"center"}})),[S,x]),_=(0,i.useCallback)((()=>function(e,t,n,i){(0,m().z5)({environment:e,permissionsInviteStore:i,store:t,renderInShareModal:!1,isSubscribed:n}),u().L7(e,{type:"invite"}),c().G(e,{type:"invite",from:"settings_modal"})}(C,r,d,M)),[C,r,d,M]),I=(0,i.useCallback)((()=>n?function(e,t,n){O().y(t,{from:e,upsell:{type:"product",product:"plus",limit:{type:"none"}}}),n&&n(),u().L7(t,{type:"upgrade"})}(h,C,y):_()),[C,_,y,n,h]);if(j)return(0,b.jsx)("div",{onClick:_,children:j});const P=(0,z().S)({onInviteClick:g,onInviteComplete:f,buttonStyle:k.importListButton,buttonContainerStyle:k.importListButtonContainer});return p?(0,b.jsx)(w().ZP,{popupType:T().kQ.Popup,alignmentToOrigin:w().vR.End,placementToOrigin:w().pO.Bottom,render:()=>(0,b.jsx)(ge().Z,{importListItems:P}),originGap:12,renderOrigin:e=>(0,b.jsx)(me().Z,{disabled:!s&&!n,style:k.dropdownButton,title:(0,b.jsx)(l()._H,{id:"inviteUserButton.addMemberLabel",defaultMessage:"Add members"}),onClick:I,onDropdownClick:e.onClick,color:"blue"})}):(0,b.jsx)(v().Z,{isLarge:!0,onClick:I,disabled:!s&&!n,style:k.dropdownButton,...t,children:(0,b.jsx)(l()._H,{id:"inviteUserButton.addMemberLabel",defaultMessage:"Add members"})})}const ye=i.memo(fe)},445238:(e,t,n)=>{n.r(t),n.d(t,{PublicTopbarMoreMenu:()=>X});n(267602),n(653476),n(241792);var i=n(667294),o=()=>n(219727),s=()=>n(142735),a=()=>n(506347),r=()=>n(396136),l=()=>n(195926),d=()=>n(788860),c=()=>n(155056),u=()=>n(855238),p=()=>n(388284),m=()=>n(421797),g=()=>n(429725),f=()=>n(913813),h=()=>n(827282),y=n(785893);const v=(0,h().IU)("loginArrow",{viewBox:"0 0 16 12",svg:(0,y.jsx)("path",{d:"M8.65 11.116a.615.615 0 00.444-.184l4.546-4.54a.66.66 0 00.205-.39v4.526c0 .349.253.588.608.588.356 0 .615-.239.615-.588V1.361a.59.59 0 00-.615-.608.585.585 0 00-.608.608v4.512a.698.698 0 00-.205-.396L9.094.944a.623.623 0 00-.445-.191.58.58 0 00-.594.588c0 .164.054.328.164.437L9.75 3.33l2.242 2.05-1.456-.054h-9.01c-.355 0-.601.253-.601.609 0 .355.246.615.601.615h9.01L12 6.495 9.75 8.54l-1.531 1.559a.616.616 0 00-.164.43c0 .342.26.588.594.588z"})});const x=(0,h().IU)("reportPage",{viewBox:"0 0 13 14",svg:(0,y.jsx)("path",{d:"M.832 13.846c.349 0 .636-.28.636-.636V9.47a4.696 4.696 0 011.634-.273c2.488 0 4.156 1.244 6.562 1.244 1.053 0 1.538-.13 2.065-.376.492-.218.779-.622.779-1.25v-6.81c0-.45-.349-.73-.814-.73-.39 0-1.005.26-2.098.26C7.216 1.534 5.515.29 3.033.29 2.001.29 1.53.42.976.666.49.892.189 1.247.189 1.869V13.21c0 .349.294.636.643.636zm8.805-4.703c-2.215 0-3.931-1.238-6.508-1.238-.663 0-1.265.075-1.627.212v-6.07c.123-.198.629-.465 1.552-.465 2.33 0 4.047 1.244 6.514 1.244.657 0 1.21-.075 1.627-.191v6.05c-.116.198-.635.458-1.558.458z",fill:"#ED6A5F"})});var b=()=>n(876822),S=()=>n(182008),M=()=>n(38562);const j=(0,d().vU)({reportPageName:{id:"action.reportPage.name",defaultMessage:"Report page"}}),C=(0,M().cN)({key:"action report page",displayName:j.reportPageName,analyticsName:j.reportPageName.defaultMessage,validators:[m().Ggh,m().iKo,m().Id2,m().ffD(m().jBR)],closeParentMenu:!0,render:e=>(0,y.jsx)(u().Z,{...e,style:{color:n(568017).ZP.red},svg:x,title:(0,y.jsx)(d()._H,{...j.reportPageName})}),action:e=>{let{blocks:t,environment:i}=e;n(405129).l1()}}),w=(0,d().vU)({signUpOrLogInName:{id:"action.signUpOrlogIn.name",defaultMessage:"Sign up or log in"},shareLinkName:{id:"action.shareLink.name",defaultMessage:"Share link"},editPageName:{id:"action.editPage.name",defaultMessage:"Edit"},commentPageName:{id:"action.commentPage.name",defaultMessage:"Comment"},duplicatePageName:{id:"action.duplicatePage.name",defaultMessage:"Duplicate"},backtoNotionName:{id:"action.backtoNotion.name",defaultMessage:"Back to Notion"},topbarMobileMoreActionsMenu:{id:"action.topBarSiteMoreMobileActions.name",defaultMessage:"More"},search:{id:"topbar.publicPage.searchButton.label",defaultMessage:"Search"},reportFormName:{id:"action.reportForm.name",defaultMessage:"Report form"},viewOriginalPageName:{id:"action.viewOriginalPage.name",defaultMessage:"View original page"}}),k=(0,M().cN)({key:"log in",displayName:w.signUpOrLogInName,analyticsName:w.signUpOrLogInName.defaultMessage,svg:v,validators:[m().ffD(m().jlf),m().J6K,m().ffD(m().eCK)],closeParentMenu:!0,action:async e=>{let{environment:t}=e;n(438793).RK(t),await n(579358).yF(t,{utmContent:"sign_up_or_log_in",nextRoute:n(836273)._j.login})}}),_=(0,M().cN)({key:"view original page",displayName:w.viewOriginalPageName,analyticsName:w.viewOriginalPageName.defaultMessage,svg:n(95805).h,validators:[m().eCK],closeParentMenu:!0,action:e=>{let{blocks:t}=e;const n=(0,g().ZP)({store:t[0],preferPublicLink:!0,pageVisitSource:a().tY.EmbedPublicPageViewOriginal,disableSlug:!0,embedded:!1});window.open(`${n}`,"_blank")}}),T=(0,M().cN)({key:"report form",displayName:w.reportFormName,analyticsName:w.reportFormName.defaultMessage,svg:x,validators:[m().iKo,m().jBR],closeParentMenu:!0,action:e=>{let{environment:t,blocks:n}=e;c().pj(t,n[0].id)}}),I=(0,M().cN)({key:"ios share link",displayName:w.shareLinkName,analyticsName:w.shareLinkName.defaultMessage,svg:n(683630).s,validators:[m().U7o,m().Fxc,m().gnQ],closeParentMenu:!0,action:e=>{let{blocks:t,environment:n}=e;const i=t[0],o=i.getNavigableBlockStore();if(o){const e=(0,g().ZP)({store:o,scrollToBlockId:o.id===i.id?void 0:i.id,fullyQualified:!0,pageVisitSource:a().tY.NativeShareLink,embedded:!1});n.mobileNative&&n.mobileNative.share(e)}}}),P=(0,M().cN)({key:"android share link",displayName:w.shareLinkName,analyticsName:w.shareLinkName.defaultMessage,svg:n(118447).Q,validators:[m().U7o,m().Fxc,m().DtP],closeParentMenu:I.closeParentMenu,action:I.action}),A=(0,M().cs)({key:"copy link",displayName:M().RE.copyLinkName,analyticsName:M().RE.copyLinkName.defaultMessage,svg:n(599631).N,shortcuts:["copyLinkToBlock"],validators:[m().jlf,m().U7o,m().ffD(m().Fxc),m().ffD(m().DFt)],closeParentMenu:!0,action:(e,t)=>{const{lazyDependencies:{clipboardActions:n}}=e;n&&n.copyLinkToBlock({...e,event:t})}}),R=(0,M().cN)({key:"edit page",displayName:w.editPageName,analyticsName:w.editPageName.defaultMessage,svg:n(953293).R,validators:[m().U7o,m().DFt,m().Zk8,m().ffD(m().eMw),m().tqC],closeParentMenu:!0,action:e=>{let{environment:t,blocks:n}=e;c().qc(t,n[0].id)}}),Z=(0,M().cN)({key:"comment page",displayName:w.commentPageName,analyticsName:w.commentPageName.defaultMessage,svg:n(918302).s,validators:[m().U7o,m().DFt,n(78449).SO,m().ffD(m().jlf),m().tqC],closeParentMenu:!0,action:e=>{let{environment:t,blocks:n}=e;c().TX(t,n[0].id)}}),B=(0,M().cN)({key:"fork page",displayName:w.duplicatePageName,analyticsName:w.duplicatePageName.defaultMessage,svg:n(802600).a,validators:[m().U7o,m().tqC,m().DFt,m().S4z],closeParentMenu:!0,action:e=>{let{blocks:t,originRect:i,environment:o}=e;n(291338).S({environment:o,store:t[0],originRect:i})}});function D(e){return(0,M().cN)({key:"more actions menu",displayName:w.topbarMobileMoreActionsMenu,analyticsName:w.topbarMobileMoreActionsMenu.defaultMessage,svg:f().O,validators:[m().U7o,m().tqC,m().DFt],closeParentMenu:!0,action:e})}const L=(0,M().cN)({key:"back to my content",displayName:w.backtoNotionName,analyticsName:w.backtoNotionName.defaultMessage,svg:n(965910).h,validators:[m().jlf,m().tqC],closeParentMenu:!0,action:(e,t)=>{let{environment:i}=e;const{currentUserRootStore:o,currentUserSettingsStore:s}=b().default.state;o&&s&&n(224597).L5({environment:i,userRootStore:o,userSettingsStore:s,pageVisitSource:a().tY.SwitchSpace})}}),O=(0,M().cN)({key:"cookie settings",displayName:l().ze.cookieSettingsLabel,analyticsName:l().ze.cookieSettingsLabel.defaultMessage,validators:[m().ffD(m().tYA)],closeParentMenu:!1,render:e=>(0,y.jsx)(n(667710).Z,{hasDismissButton:!1,renderOrigin:t=>{const{onClick:i,...o}=e;return(0,y.jsx)(u().Z,{...o,...t,title:n(527278).Z.formatMessage(l().ze.cookieSettingsLabel),svg:n(166104).H})}}),action:()=>{}}),H=(0,M().cN)({key:"search page",displayName:w.search,analyticsName:w.search.defaultMessage,svg:n(270820).R,validators:[m().U7o,m().tqC,m().DFt,m().m1H],closeParentMenu:!0,action:e=>{let{environment:t}=e;n(278275).UT({environment:t,analyticsFrom:"public-page-topbar",isPublicPageSearch:!0})}});const V=[(0,M().$J)({key:"user",render:e=>(0,y.jsx)(p().Z,{...e}),actions:[L,k,_]}),(0,M().$J)({key:"report page actions",render:e=>(0,y.jsx)(p().Z,{...e}),actions:[C,T,O]})];var U=()=>n(491927),E=()=>n(497065),N=()=>n(352230),F=()=>n(465371),K=()=>n(772084),z=()=>n(890324),W=()=>n(826955),q=()=>n(149809),G=()=>n(198829),Y=()=>n(943620),$=()=>n(384241);function X(e){let{blockStore:t,onDismiss:n}=e;const l=(0,o().O7)(),{isMobile:d}=l.device,c=(0,s().VK)((()=>z().Z.getMode(l,t)),[l,t]),m=(0,s().VK)((()=>t.isFormBlock()),[t]),[f,h]=(0,i.useState)(d&&!m?"initialActions":"more"),v={environment:l,blocks:[t],publicEditMode:c};let x;x=d?{menuType:N().o.ActionSheet}:{menuType:N().o.Popup,width:210,maxHeight:"80vh"};const j=(0,i.useCallback)((e=>{const{mainEditorCurrentBlockStore:t}=b().default.state;if(t){const n=t.getType();var i;if(n)U().dh(l,{analyticsName:e.analyticsName,action_type:e.analyticsActionType,from:"public_topbar_more_menu",block_id:t.id,block_type:n,is_toggleable:(0,F()._A)(n,t.getFormat()),collection_id:null===(i=t.getCollectionStore())||void 0===i?void 0:i.id,parent_collection_id:t.getParentCollectionIdUpToTwoLevels()})}e.closeParentMenu&&n()}),[l,n]),C=(0,s().VK)((()=>{var e;if(!d)return;const n=t.getSpaceStore();if(!n)return;const i=K().gR(t),o=null==i||null===(e=i.getSiteStore())||void 0===e||null===(e=e.getHeader())||void 0===e?void 0:e.customItems;if(!o)return;return{key:"custom nav",render:e=>(0,y.jsx)(p().Z,{...e}),actions:o.filter((e=>"block"===e.type)).map((e=>{const i=W().G.createChildStore(n,{table:r().iU,id:e.blockId}),o=i.getIcon(),s=(0,g().ZP)({store:i,preferPublicLink:!0,pageVisitSource:a().tY.SiteCustomHeader});return{key:e.blockId,analyticsName:e.blockId,displayName:e.blockId,searchName:e.blockId,render:e=>(0,y.jsx)(u().Z,{...e,left:o&&(0,y.jsx)(Y().Z,{icon:o,store:t,disabled:!0,isEmptyPage:i.isEmptyPage(),size:18,emojiSize:18,disableShrinking:!0}),title:(0,y.jsx)($().Z,{store:i,maxLength:30})}),action:()=>{E().c4({environment:l,url:s})},closeParentMenu:!0}}))}}),[l,d,t]),w=(k=()=>{h("more")},(0,M().$J)({key:"page",render:e=>(0,y.jsx)(p().Z,{...e}),actions:[H,B,Z,R,A,S().Kk,I,P,D(k)]}));var k;if("initialActions"===f){const e=C?[C,w]:[w];return(0,y.jsx)(G().Z,{...x,children:(0,y.jsx)(q().Z,{sections:e,onAccept:j,context:v})})}return(0,y.jsx)(G().Z,{...x,children:(0,y.jsx)(q().Z,{sections:V,context:v})})}},683850:(e,t,n)=>{n.r(t),n.d(t,{default:()=>O});n(667294);var i=()=>n(219727),o=()=>n(142735),s=()=>n(846550),a=()=>n(788860);const r=["dmca_no_action"],l=(0,a().vU)({phishing_or_spam:{id:"reportPage.reportReasons.phishing_or_spam",defaultMessage:"Phishing or spam"},inappropriate_content:{id:"reportPage.reportReasons.inappropriate_content",defaultMessage:"Inappropriate content"},other_content_policy_violation:{id:"reportPage.reportReasons.other_content_policy_violation",defaultMessage:"Other"},dmca_no_action:{id:"reportPage.reportReasons.dmca_no_action",defaultMessage:"DMCA takedown request"}});var d=()=>n(568017),c=()=>n(513670),u=()=>n(707513),p=()=>n(824462),m=()=>n(308186),g=()=>n(405129),f=()=>n(718959),h=()=>n(500174),y=()=>n(527278),v=()=>n(352230),x=()=>n(148126),b=n(785893);const S=(0,n(827282).IU)("thanksShield",{viewBox:"0 0 27 32",svg:(0,b.jsx)("path",{d:"M13.5 31.672c.281 0 .672-.125 1.031-.328 8.75-5.063 11.64-6.969 11.64-12.344V7.125c0-1.672-.624-2.219-2.062-2.797-2.218-.89-7.14-2.719-9.375-3.484-.406-.14-.828-.235-1.234-.235-.422 0-.844.11-1.25.235-2.219.719-7.156 2.61-9.375 3.484C1.437 4.891.812 5.453.812 7.125V19c0 5.375 2.922 7.234 11.641 12.344.36.203.75.328 1.047.328zm0-2.14c-.266 0-.547-.126-.922-.36-7.25-4.5-9.844-5.797-9.844-10.547V7.485c0-.782.141-1.063.735-1.298 2.078-.828 7.187-2.656 9.281-3.468.281-.125.547-.188.75-.188.188 0 .438.078.75.188 2.078.812 7.156 2.703 9.266 3.469.593.218.734.515.734 1.296v11.141c0 4.75-2.625 6.016-9.844 10.547-.375.234-.656.36-.906.36zm-1.688-6.75c.391 0 .72-.188.954-.548l7.593-11.859c.141-.234.282-.5.282-.75 0-.531-.485-.906-.985-.906-.312 0-.61.203-.843.547L11.75 20.437 8.156 16c-.281-.375-.562-.484-.89-.484a.944.944 0 00-.938.953c0 .265.11.531.281.765l4.188 5c.297.391.61.547 1.015.547z",fill:"#636363"})});var M=()=>n(804217),j=()=>n(201023),C=()=>n(610146),w=()=>n(573357),k=()=>n(291198),_=()=>n(198829),T=()=>n(18748),I=()=>n(255577),P=()=>n(699347),A=()=>n(661297),R=()=>n(388284),Z=()=>n(360964),B=()=>n(765513),D=()=>n(29090);const L=(0,a().vU)({additionalInformationPlaceholder:{id:"reportPage.additionalInformation.placeholder",defaultMessage:"Please describe how this content violates our Content & Use Policy ({otherSelected, select, true {required} other {optional}})"},dialogLabel:{id:"reportPage.dialogLabel",defaultMessage:"Report page"}});const O=function(){const e=(0,o().VK)((()=>j().default.state.open),[]);return(0,b.jsx)(n(840820).Z,{ariaLabel:y().Z.formatMessage(L.dialogLabel),onDismiss:q,render:()=>(0,b.jsx)(X,{}),isOpen:e})};function H(e){const{reason:t,additionalInformation:n}=e;return void 0!==t&&(!r.includes(t)&&!("other_content_policy_violation"===t&&!n))}function V(){const{state:e}=j().default;if(e.open){const{reason:t,additionalInformation:n}=e;return H({reason:t,additionalInformation:n})}return!1}function U(e){let{modalState:t}=e;const{reason:n}=t;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(P().Z,{title:(0,b.jsx)(a()._H,{id:"reportPageModal.reportReasons.phishing_or_spam",defaultMessage:"Phishing or spam"}),isSelected:"phishing_or_spam"===n,onClick:()=>j().default.setState({...t,reason:"phishing_or_spam"}),name:"report-page-modal"},"phishing_or_spam"),(0,b.jsx)(P().Z,{title:y().Z.formatMessage(l.inappropriate_content),isSelected:"inappropriate_content"===n,onClick:()=>j().default.setState({...t,reason:"inappropriate_content"}),name:"report-page-modal"},"inappropriate_content"),(0,b.jsx)(P().Z,{title:y().Z.formatMessage(l.dmca_no_action),isSelected:"dmca_no_action"===n,onClick:()=>j().default.setState({...t,reason:"dmca_no_action"}),name:"report-page-modal"},"dmca_no_action"),(0,b.jsx)(P().Z,{title:(0,b.jsx)(a()._H,{id:"reportPageModal.reportReasons.other_content_policy_violation",defaultMessage:"Other"}),isSelected:"other_content_policy_violation"===n,onClick:()=>j().default.setState({...t,reason:"other_content_policy_violation"}),name:"report-page-modal"},"other_content_policy_violation")]})}async function E(e){const t=j().default.getState();if(!t.open)return;const{additionalInformation:n,reason:i}=t,o=(0,f().Fv)();if(null==o||!o.id||!i||!H({reason:i,additionalInformation:n}))return void m().UW((0,b.jsx)(a()._H,{defaultMessage:"Something went wrong.",id:"reportPageModal.somethingWentWrong.label"}));const s=await p().callApi({eventName:"reportPage",environment:e,data:{reason:i,page:o,additionalInformation:n}});"failed"===s.type?m().x2(s):(j().default.setState({open:!1}),m().PV({message:(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[S({width:32}),(0,b.jsx)("div",{style:{paddingTop:12,paddingBottom:8,textAlign:"center"},children:(0,b.jsx)(a()._H,{id:"reportPageModal.thanksForReporting",defaultMessage:"Thanks for reporting this page, our team will take a look."})})]})}))}function N(e){return{width:360,padding:24,fontSize:14,color:e.mediumTextColor}}function F(e,t){const{device:n}=e;return{width:"100%",background:t.popoverBackground,display:"block",padding:n.isMobile?16:"10px 12px",height:n.isMobile?150:130,marginTop:17,marginBottom:17,fontSize:n.isMobile?16:14}}function K(e){let{isMobile:t=!1}=e;return(0,b.jsx)(a()._H,{defaultMessage:"This page is hosted by Notion. Use this form to submit a report if you believe this page violates <contentpolicylink>Notion's content policy</contentpolicylink>.{br}{br}<clarification>This is not a contact form for the person or organization that authored this page</clarification>.",id:"reportPageModal.reportButton.description",values:{br:(0,b.jsx)("br",{}),contentpolicylink:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return(0,b.jsx)(Z().Z,{title:n,href:(0,x().UY)("contentPolicy"),analyticsFrom:"report_page",style:{display:"inline",marginLeft:void 0},buttonStyle:{alignItems:"baseline",height:t?u().Nv.UISmall.mobile:u().Nv.UISmall.desktop,paddingLeft:"3px",paddingRight:"2px"},iconStyle:{alignSelf:"center",marginRight:"3px"},textSize:"small",isMobile:t})},clarification:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,b.jsx)("i",{children:t})}}})}function z(){return(0,b.jsx)(a()._H,{defaultMessage:"To submit a formal DMCA takedown request, please follow the instructions detailed in <dmcapolicylink>Notion's official DMCA policy</dmcapolicylink>.",id:"reportPageModal.reportButton.dmcaInstructions",values:{dmcapolicylink:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,b.jsx)(B().Z,{external:!0,href:"https://www.notion.so/notion/DMCA-Policy-69d880bd37fe496a9b7c64ccc65e024d",children:t})}}})}function W(){const e=(0,s().Fg)();return(0,b.jsx)("div",{style:N(e),children:(0,b.jsx)(a()._H,{defaultMessage:"Please go online to make a report.",id:"reportPageModal.offlineMessage.description"})})}function q(){g().q$()}function G(){return(0,s().yK)((e=>({reportPageExplanation:{color:e.lightTextColor,background:e.contentBackground,border:`1px solid ${e.stroke.input}`},reportPageBanner:{justifyContent:void 0,whiteSpace:"normal",display:"block",paddingTop:"7px",paddingBottom:"7px",marginBottom:"15px"},mobileDescription:{color:d().ZP.lightTextColor,padding:"5px",fontSize:u().JB.UISmall.mobile},modalTitle:{fontSize:16,marginBottom:12,fontWeight:u().Ue.medium}})),[])}function Y(e){let{modalState:t}=e;const n=(0,s().Fg)(),o=(0,i().O7)(),l=G();if(!t.open)return null;const{reason:u}=t,p={menuType:v().o.Modal,title:(0,b.jsx)(a()._H,{id:"reportPageModal.mobile.title",defaultMessage:"Report page"}),right:(0,b.jsx)(a()._H,{id:"reportPageModal.closeButton.label",defaultMessage:"Close"}),onClickRight:q};return(0,b.jsx)(_().Z,{...p,children:(0,b.jsx)(I().Z,{type:I().i.Vertical,initialFocus:void 0,sections:c().oA([{key:"help",render:e=>{let{children:t,...n}=e;return(0,b.jsx)(R().Z,{...n,disableMobilePadding:!0,mobileStyle:{marginTop:"20px"},children:t})},items:[{key:"help",render:()=>(0,b.jsx)(T().ZP,{title:(0,b.jsx)(K,{isMobile:!0}),textWrapperStyle:l.mobileDescription,shouldWrapTitle:!0,right:(0,b.jsx)(b.Fragment,{}),onClick:()=>{}}),action:()=>{}}]},{key:"reportOptions",render:e=>{let{children:t,...n}=e;return(0,b.jsx)(R().Z,{...n,disableMobilePadding:!0,mobileStyle:{marginTop:"20px"},children:t})},items:[{key:"options",render:()=>(0,b.jsx)(U,{modalState:t}),action:()=>{}},{key:"additionalInfo",render:()=>u&&!r.includes(u)&&(0,b.jsx)(k().Z,{textarea:!0,style:F(o,n),focus:Boolean(t.reason),value:t.additionalInformation,placeholder:y().Z.formatMessage(L.additionalInformationPlaceholder,{otherSelected:"other_content_policy_violation"===u}),onChange:e=>{j().default.setState({...t,additionalInformation:e.target.value})}}),action:()=>{}}]},"dmca_no_action"===u?{key:"explain_dmca",render:e=>{let{children:t,...n}=e;return(0,b.jsx)(R().Z,{...n,disableMobilePadding:!0,mobileStyle:{marginTop:"20px"},children:t})},items:[{key:"explain_dmca",render:()=>"dmca_no_action"===u&&(0,b.jsx)(T().ZP,{title:(0,b.jsx)(z,{}),textWrapperStyle:{...l.mobileDescription,background:n.accentColors.yellow[100],color:n.accentColors.yellow[600],margin:"0px",padding:"10px 20px"},style:{display:"block"},shouldWrapTitle:!0,right:(0,b.jsx)(b.Fragment,{}),onClick:()=>{}}),action:()=>{}}]}:void 0,{key:"actions",render:e=>{let{children:t,...n}=e;return(0,b.jsx)(R().Z,{...n,disableMobilePadding:!0,mobileStyle:{marginTop:"20px"},isSubmitButton:!0,...n,children:t})},items:[{key:"submit",render:e=>{const{onClick:t,...n}=e,i=V();return(0,b.jsx)(D().Z,{...n,disabled:!i,title:(0,b.jsx)("div",{style:{color:i?d().ZP.red:d().ZP.uiGray},children:(0,b.jsx)(a()._H,{id:"reportPageModal.reportButton.label",defaultMessage:"Report"})}),onClick:t||E})},action:()=>E(o)}]}])},"main list")})}function $(e){let{modalState:t}=e;const n=(0,s().Fg)(),o=(0,i().O7)(),l=G();if(!t.open)return null;const{reason:d}=t,c="dmca_no_action"===d;return(0,b.jsx)(w().Z,{capture:!0,allowUndo:!0,allowEsc:!0,allowTabUntab:!1,render:()=>(0,b.jsxs)("div",{style:{width:360,padding:24,fontSize:14},children:[(0,b.jsx)("div",{style:l.modalTitle,children:(0,b.jsx)(a()._H,{id:"reportPageModal.title",defaultMessage:"Why are you reporting this page?"})}),(0,b.jsx)(C().Z,{isMobile:!1,textSize:"small",styleKey:h().v.Yellow,style:c?l.reportPageBanner:{...l.reportPageExplanation,...l.reportPageBanner},children:c?(0,b.jsx)(z,{}):(0,b.jsx)(K,{})}),(0,b.jsx)("div",{children:(0,b.jsx)(U,{modalState:t})}),d&&!r.includes(d)&&(0,b.jsx)(k().Z,{textarea:!0,style:F(o,n),focus:Boolean(t.reason),value:t.additionalInformation,placeholder:y().Z.formatMessage(L.additionalInformationPlaceholder,{otherSelected:"other_content_policy_violation"===d}),onChange:e=>{j().default.setState({...t,additionalInformation:e.target.value})}}),(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:18},children:[(0,b.jsx)(A().Z,{isLarge:!0,onClick:q,style:{marginRight:12},children:(0,b.jsx)(a()._H,{id:"reportPageModal.cancelButton.label",defaultMessage:"Cancel"})}),(0,b.jsx)(A().Z,{isRed:!0,isLarge:!0,onClick:()=>E(o),disabled:!V(),disabledFeedback:!0,children:(0,b.jsx)(a()._H,{id:"reportPageModal.reportButton.label",defaultMessage:"Report"})})]})]})})}function X(){const e=(0,i().O7)(),{device:t}=e,n=(0,o().VK)((()=>M().default.state.online),[]),s=(0,o().Kw)(j().default);return n?s.open?t.isMobile?(0,b.jsx)(Y,{modalState:s}):(0,b.jsx)($,{modalState:s}):null:(0,b.jsx)(W,{})}},468193:(e,t,n)=>{n.d(t,{Z:()=>B});n(670560),n(267602),n(653476),n(470928),n(241792),n(228244);var i=n.n(n(443261)),o=n(667294),s=()=>n(219727),a=()=>n(226413),r=()=>n(532850),l=()=>n(38883),d=()=>n(956057),c=()=>n(752778),u=()=>n(788860),p=()=>n(513670),m=()=>n(543172),g=()=>n(696459),f=()=>n(491927),h=()=>n(887430),y=()=>n(125659),v=()=>n(861026),x=()=>n(352230),b=()=>n(692304),S=()=>n(827973),M=()=>n(119891),j=()=>n(198829),C=()=>n(255577),w=()=>n(838367),k=()=>n(470386),_=()=>n(388284),T=()=>n(949842),I=()=>n(246471),P=n(785893);const A=o.forwardRef((function(e,t){var i;const{locked:a,option:r,actionMenuOpen:d,property:c,collectionId:u,analyticsFrom:m,onChange:g,onCloseActionMenu:f,focused:h,propertySchema:y,onOpenActionMenu:v}=e,x=(0,n(846550).Fg)(),b=(0,s().O7)(),M=(0,n(142735).qz)(void 0,n(718798).Z),j=(0,o.useRef)(d);return(0,o.useEffect)((()=>{d!==j.current&&M.setState({...M.state,inputValue:r.value}),j.current=d}),[d,r.value,M]),(0,P.jsx)(n(94967).Z,{debugName:"SelectPropertyMenuItem",capture:d,onEnter:p().yR,children:(0,P.jsx)(n(654133).Z,{renderTooltip:e=>(0,P.jsxs)("div",{...e,style:n(514).F6,children:[(0,P.jsx)("div",{children:r.value}),(0,P.jsx)("div",{style:{color:x.mediumInvertedTextColor},children:r.description})]}),placement:n(998901).Placement.Left,disableTooltip:!(null!==(i=r.description)&&void 0!==i&&i.length),render:i=>(0,P.jsx)(S().Z,{...(0,n(164079).Z)(i,e),ref:t,title:(0,P.jsx)(I().a,{format:b.device.isMobile?l().lo.Large:l().lo.Medium,value:r.value,color:r.color,hideTooltip:!0,showRemoveButton:!1,isSingle:!0,showEllipsis:!0}),desktopTitleStyle:{marginRight:6},isTokenTitle:!0,right:!a&&(0,P.jsx)(R,{property:c,collectionId:u,analyticsFrom:m,onChange:g,onCloseActionMenu:f,actionMenuOpen:d,focused:h,option:r,propertySchema:y,onOpenActionMenu:v})})})})}));function R(e){let{property:t,collectionId:i,analyticsFrom:o,onChange:a,onCloseActionMenu:r,actionMenuOpen:l,focused:d,option:c,propertySchema:u,onOpenActionMenu:p}=e;const m=(0,s().O7)(),{device:g}=m;return(0,P.jsx)(n(277443).Z,{open:l,origin:(0,P.jsx)(n(145873).Z,{onClick:e=>function(e,t,n){(0,T().ZP)({event:e,context:T().Af.MenuListClick,callback:()=>t(n.value)})}(e,p,c),isMobile:g.isMobile,style:{opacity:d||g.isMobile?1:0}}),option:c,propertySchema:u,property:t,collectionId:i,analyticsFrom:o,onChange:a,onClose:r})}var Z=()=>n(122671);function B(e){const{allowMultiple:t,analyticsFrom:n,autofillExplanation:m,bulkAutofillButton:S,canConfigureCollection:M,collectionId:T,disabled:A,insertChar:R,onAccept:B,onChange:L,onDismiss:H,property:U,schema:F,value:K}=e,z=(0,s().O7)(),{device:W}=z,q=(0,u().YB)(),G=(0,o.useRef)(void 0),Y=(0,y().Y$)(),$=(0,o.useMemo)((()=>new(b().Z)),[]),[X,Q]=(0,o.useState)(""),[J,ee]=(0,o.useState)(void 0);(0,o.useEffect)((()=>{E(F,U,G),R&&Q(R)}),[R,U,F]);const te=(0,o.useCallback)((e=>function(e){const{change:t,allowMultiple:n,analyticsFrom:i,collectionContextStore:o,collectionId:s,createSelectColorRef:r,environment:l,onChange:u,property:p,schema:m,setInputValue:y}=e;y("");const x=m[p];if(!x)return;if(!a().cu(x))return;const b=x.options||[];let S;if("removeToken"===t.type)S={type:"selectPropertyMenuUpdateRemoveOption",removeOption:t.removedToken};else if("addTokens"===t.type){let e;n?(e=t.newTokens,S={type:"selectPropertyMenuUpdateAddOptions",addOptions:e}):(e=t.newTokens.length>0?[t.newTokens[t.newTokens.length-1]]:[],S={type:"selectPropertyMenuUpdateReplaceOptions",options:e});const a=e.find((e=>!b.find((t=>t.value===e))));if(a){const e={id:d().Il(),value:a,color:r.current};let t;t="alphabetical"===x.auto_sort_options||"reverse_alphabetical"===x.auto_sort_options?[(0,h().Ch)({collectionId:s,property:p,propertySchema:x,newOption:e,isAscending:"alphabetical"===x.auto_sort_options})]:[{pointer:{table:c().vF,id:s},command:"keyedObjectListAfter",path:["schema",p,"options"],args:{value:e}}],S.schemaOperations=t,E(m,p,r),f().$q(l,{...(0,v().Pn)(o),property_type:x.type,action:"select_add_option",from:i})}}else(0,g().t1)(t);u(S)}({allowMultiple:t,analyticsFrom:n,collectionContextStore:Y,collectionId:T,createSelectColorRef:G,environment:z,onChange:L,property:U,schema:F,setInputValue:Q,...e})),[t,n,Y,T,z,L,U,F]),ne=(0,o.useCallback)((e=>p().oA(K.map((t=>{const n=(0,r().i7)(e,t);if(n)return(0,P.jsx)(I().a,{value:n.value,color:n.color,showRemoveButton:!A,isSingle:!1,format:W.isMobile?l().lo.Large:l().lo.Medium,shouldShrink:!0,onClickRemove:()=>{te({change:{type:"removeToken",removedToken:t}})},showEllipsis:!0},n.id)})))),[W.isMobile,A,te,K]),ie=(0,o.useCallback)((e=>{ee(e)}),[]),oe=F[U];if(!oe)return null;if(!a().cu(oe))return null;const se=oe.options||[],ae=function(e,t,n){const o=t.map((e=>e.value));let s;if(e){s=i().filter(e,o).map((e=>e.original));!t.find((t=>t.value===e))&&e.trim().length>0&&n&&s.push(e.trim().replace(/,/g,""))}else s=o;return s}(X,se,M),re=ne(se),le=oe.select_ai_inference,de=0===ae.length,ce=(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(Z().ZP,{focus:W.isMobile?void 0:!J,focusAfterAnimation:!0,format:Z().UR.Select,tokens:re,placeholder:null!=le&&le.auto_update_on_edit?q.formatMessage({id:"database.selectPropertyEditMenu.searchPlaceholder.aiAutoUpdate",defaultMessage:"Empty"}):q.formatMessage({id:"database.selectPropertyEditMenu.searchPlaceholder",defaultMessage:"Search for an option..."}),onRemoveLastToken:()=>{K.length>0&&te({change:{type:"removeToken",removedToken:K[K.length-1]}})},value:X,disabled:A,hideInput:!1,onChange:e=>Q(e.target.value),dontShowBorderBottom:W.isAndroid}),m]});let ue;return ue=W.isMobile?{menuType:x().o.Modal,title:oe.name,right:(0,P.jsx)(k().DoneMenuText,{}),onClickRight:H,header:ce,footer:S}:{menuType:x().o.Popup,header:ce,tokenInputHeader:!0,footer:S},A?(0,P.jsx)(j().Z,{...ue}):(0,P.jsx)(j().Z,{...ue,children:de?(0,P.jsx)(_().Z,{title:M?(0,P.jsx)(O,{}):(0,P.jsx)(D,{}),children:W.isMobileNative&&(0,P.jsx)(w().Z,{title:(0,P.jsx)(D,{})})}):(0,P.jsx)(C().Z,{type:C().i.Vertical,initialFocus:X.length>0?0:void 0,sections:[{key:1,render:e=>(0,P.jsx)(V,{collectionId:T,property:U,schema:F,onChange:L,canConfigureCollection:M,menuListStore:$,args:e,tokens:ae}),items:N({analyticsFrom:n,canConfigureCollection:M,collectionId:T,createSelectColorRef:G,handleOnTokenInputChange:te,handleSetOpenPropertyActionMenu:ie,onChange:L,openPropertyActionMenu:J,options:se,property:U,schema:F,tokens:ae,value:K})}],onAccept:(e,t,n)=>{B(n)},store:$})})}function D(){return(0,P.jsx)(u()._H,{id:"database.selectPropertyEditMenu.noResults",defaultMessage:"No options found"})}function L(){return(0,P.jsx)(u()._H,{id:"database.selectPropertyEditMenu.selectOnlyPrompt",defaultMessage:"Select an option"})}function O(){return(0,P.jsx)(u()._H,{id:"database.selectPropertyEditMenu.selectOrCreatePrompt",defaultMessage:"Select an option or create one"})}function H(e){let{props:t,newOption:n,token:i}=e;const o=(0,s().O7)(),{device:a}=o;return(0,P.jsx)(S().Z,{...t,title:(0,P.jsxs)("div",{style:{display:"flex",minWidth:0},children:[(0,P.jsx)("div",{style:{marginRight:6,lineHeight:1.3},children:(0,P.jsx)(u()._H,{id:"database.selectPropertyEditMenu.createLabel",defaultMessage:"Create"})}),(0,P.jsx)(I().a,{value:n.value,color:n.color,showRemoveButton:!1,isSingle:!0,format:a.isMobile?l().lo.Large:l().lo.Medium,showEllipsis:!0})]}),isTokenTitle:!0})}function V(e){let{args:t,tokens:n,collectionId:i,property:s,schema:r,onChange:l,canConfigureCollection:d,menuListStore:u}=e;const p=(0,o.useCallback)((e=>function(e,t,n,i,o,s){const r=(0,h().YL)({newOptions:e,collectionId:t,property:n,schema:i});if(r){const e=i[n];e&&a().cu(e)&&"manual"!==(e.auto_sort_options||"manual")&&r.push({pointer:{table:c().vF,id:t},command:"update",path:["schema",n],args:{auto_sort_options:"manual"}}),o({type:"selectPropertyMenuUpdateSchema",schemaOperations:r})}s.reset()}(e,i,s,r,l,u)),[i,s,r,l,u]);return d?(0,P.jsx)(_().Z,{...t,title:(0,P.jsx)(O,{}),children:(0,P.jsx)(M().ZP,{direction:"vertical",keys:n,renderKey:e=>t.children[n.indexOf(e)],onDrop:p})}):(0,P.jsx)(_().Z,{...t,title:(0,P.jsx)(L,{}),children:t.children})}function U(e){let{analyticsFrom:t,canConfigureCollection:n,collectionId:i,handleSetOpenPropertyActionMenu:r,onChange:l,openPropertyActionMenu:d,option:c,property:u,props:m,schema:g,value:f}=e;const h=(0,s().Fy)(),y=(0,o.useMemo)((()=>c.value===d),[d,c.value]),v=g[u];return v&&a().cu(v)?(0,P.jsx)(A,{...m,option:c,showDragHandle:n&&!h.isMobile,locked:!n,property:u,analyticsFrom:t,collectionId:i,onChange:e=>function(e,t,n,i,o){const s=n[t];if(!s)return;if(!a().cu(s))return;const r=s.options||[],l=[...r];let d;const c=i.filter((e=>{const t=r.find((t=>t.value===e));return!t||l.some((e=>e.id===t.id))}));d=p().Xy(c,i)?{type:"selectPropertyMenuUpdateSchema",schemaOperations:e}:{type:"selectPropertyMenuUpdateReplaceOptions",options:c,schemaOperations:e};o(d)}(e,u,g,f,l),actionMenuOpen:y,propertySchema:v,onCloseActionMenu:r,onOpenActionMenu:r}):null}function E(e,t,n){const i=e[t];if(!i)return;if(!a().cu(i))return;const o=i.options||[],s=(0,a().TL)(o);n.current=s}function N(e){const{analyticsFrom:t,canConfigureCollection:n,collectionId:i,createSelectColorRef:o,handleOnTokenInputChange:s,handleSetOpenPropertyActionMenu:a,onChange:r,openPropertyActionMenu:l,options:d,property:c,schema:u,tokens:p,value:g}=e;return p.map((e=>{const p=d.find((t=>t.value===e));return{key:e,render:s=>{if(p)return(0,P.jsx)(U,{analyticsFrom:t,canConfigureCollection:n,collectionId:i,handleSetOpenPropertyActionMenu:a,onChange:r,openPropertyActionMenu:l,option:p,property:c,props:s,schema:u,value:g});{const t={id:(0,m().ZP)(),value:e,color:o.current};return(0,P.jsx)(H,{props:s,newOption:t,token:e})}},action:()=>{g.includes(e)||s({change:{type:"addTokens",newTokens:[e]}})}}}))}},7298:(e,t,n)=>{n.r(t),n.d(t,{MembersTabTitle:()=>jn,PeopleRow:()=>Sn,SettingToggle:()=>Cn,SidebarTeamModal:()=>Mn});n(241792);var i=n(667294),o=()=>n(219727),s=()=>n(142735),a=()=>n(846550),r=()=>n(788860),l=()=>n(513670),d=()=>n(696459),c=()=>n(707513),u=()=>n(465755),p=()=>n(247724),m=()=>n(91502),g=()=>n(270895),f=()=>n(520849),h=()=>n(876822),y=()=>n(826955),v=()=>n(965014),x=()=>n(840821),b=()=>n(707581),S=(n(670560),()=>n(568017)),M=()=>n(102182),j=()=>n(269299),C=()=>n(573357),w=()=>n(291198),k=()=>n(906651),_=()=>n(654133),T=()=>n(67961),I=()=>n(527278),P=()=>n(423557),A=n(785893);const R=(0,n(827282).IU)("leaveArrow",{viewBox:"0 0 16 12",svg:(0,A.jsx)("path",{d:"M8.65 11.116a.615.615 0 00.444-.184l4.546-4.54a.66.66 0 00.205-.39v4.526c0 .349.253.588.608.588.356 0 .615-.239.615-.588V1.361a.59.59 0 00-.615-.608.585.585 0 00-.608.608v4.512a.698.698 0 00-.205-.396L9.094.944a.623.623 0 00-.445-.191.58.58 0 00-.594.588c0 .164.054.328.164.437L9.75 3.33l2.242 2.05-1.456-.054h-9.01c-.355 0-.601.253-.601.609 0 .355.246.615.601.615h9.01L12 6.495 9.75 8.54l-1.531 1.559a.616.616 0 00-.164.43c0 .342.26.588.594.588z"})});var Z=()=>n(998901),B=()=>n(555813),D=()=>n(428097),L=()=>n(936968);function O(e){return!(0,L().q)(e)}var H=()=>n(1038),V=()=>n(132222),U=()=>n(12875),E=()=>n(586270),N=()=>n(383694),F=()=>n(838983),K=()=>n(345918),z=()=>n(408491);const W=(0,r().vU)({editor:{id:"TeamSettingsGeneral.generalSettings.teamPermissionsFull",defaultMessage:"Teamspace members have full access"},read_and_write:{id:"TeamSettingsGeneral.generalSettings.teamPermissionsEdit",defaultMessage:"Teamspace members can edit"},comment_only:{id:"TeamSettingsGeneral.generalSettings.teamPermissionsComment",defaultMessage:"Teamspace members can comment"},reader:{id:"TeamSettingsGeneral.generalSettings.teamPermissionsView",defaultMessage:"Teamspace members can view"}}),q=(0,r().vU)({editor:{id:"TeamSettingsGeneral.generalSettings.spacePermissionsFull",defaultMessage:"{showTeam, select, true {Everyone else} other {Everyone at {spaceName}}} has full access"},read_and_write:{id:"TeamSettingsGeneral.generalSettings.spacePermissionsEdit",defaultMessage:"{showTeam, select, true {Everyone else} other {Everyone at {spaceName}}} can edit"},comment_only:{id:"TeamSettingsGeneral.generalSettings.spacePermissionsComment",defaultMessage:"{showTeam, select, true {Everyone else} other {Everyone at {spaceName}}} can comment"},reader:{id:"TeamSettingsGeneral.generalSettings.spacePermissionsView",defaultMessage:"{showTeam, select, true {Everyone else} other {Everyone at {spaceName}}} can view"},none:{id:"TeamSettingsGeneral.generalSettings.spacePermissionsNone",defaultMessage:"{showTeam, select, true {Everyone else} other {Everyone at {spaceName}}} does not have access"}});function G(e){let{teamStore:t}=e;const n=(0,a().yK)((()=>({listItem:{padding:0,margin:0},spacer:{height:20,width:"100%"},accessLevelButton:{border:"none"}})),[]),i=g().a.Members,o=(0,s().VK)((()=>t.getTeamAccessLevel()),[t]);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{style:n.spacer}),(0,A.jsx)(F().Ph,{title:(0,A.jsx)(r()._H,{id:"TeamSettingsGeneral.generalSettings.permissions",defaultMessage:"Permissions"}),rows:[(0,A.jsx)(z()._,{currentAccessLevel:o,teamStore:t,disabledWithRightChevron:!0,style:n.accessLevelButton},"visibility"),(0,A.jsx)(Y,{teamStore:t},"permissions")],onClick:()=>{g().default.state.open&&g().default.setState({...g().default.state,tab:i})},itemStyle:n.listItem})]})}function Y(e){let{teamStore:t}=e;const n=(0,s().VK)((()=>h().default.state.currentSpaceStore),[]),i=(0,o().O7)(),r=(0,a().yK)((e=>({label:{color:e.regularTextColor,whiteSpace:"normal"},row:{display:"inline-flex",alignItems:"center",marginTop:12,marginBottom:12,paddingRight:15,paddingLeft:15},icon:{marginRight:15}})),[]),l=(0,s().VK)((()=>t.getTeamPermission()),[t]),d=(0,s().VK)((()=>t.getSpacePermission()||{type:"space_permission",role:"none"}),[t]),{spaceIcon:c,spaceName:u}=(0,s().VK)((()=>{if(!n)return{spaceIcon:void 0,spaceName:void 0};const e=(0,K().rn)(i,n);return{spaceIcon:(0,A.jsx)(N().p,{disabled:!0,store:n,size:20,style:r.icon}),spaceName:e}}),[n,i,r.icon]),p=(0,s().VK)((()=>(0,A.jsx)(N().p,{disabled:!0,store:t,size:20,style:r.icon})),[t,r.icon]),m=(null==l?void 0:l.role)??"none",g=!(m===d.role),f=g?p:c,y=I().Z.formatMessage(q[d.role],{showTeam:g,spaceName:u}),v=I().Z.formatMessage(W[m]);return(0,A.jsxs)("div",{style:r.row,children:[f,(0,A.jsxs)(T().Z,{isSmall:!0,style:r.label,children:[g&&(0,A.jsxs)(A.Fragment,{children:[v,(0,A.jsx)("span",{style:{marginLeft:5,marginRight:5},children:"•"})]}),y]})]})}var $=()=>n(92175),X=()=>n(454598),Q=()=>n(223160),J=()=>n(453382),ee=()=>n(188296),te=()=>n(617111),ne=(n(267602),n(470928),()=>n(933868)),ie=(n(653476),()=>n(528514));const oe=["none","reader","comment_only","read_and_write","editor"],se=["reader","comment_only","read_and_write"],ae=["reader","comment_only","read_and_write","editor"],re=["editor"];function le(e){const t=function(e){var t,n;let{teamId:i,permissions:o}=e;const s=(null===(t=o.find((e=>(0,ne().Ir)(e))))||void 0===t?void 0:t.role)??"none",a=(null===(n=o.find((e=>(0,ne().zU)(e)&&e.team_id===i)))||void 0===n?void 0:n.role)??s,r=o.find((e=>(0,ne().bm)(e)));return{spacePermission:{type:"space_permission",role:s},teamMemberPermission:{type:"explicit_team_permission",team_id:i,role:a},teamOwnerPermission:{type:"explicit_team_owner_permission",team_id:i,role:"editor"},...r&&{teamGuestPermission:{type:"explicit_team_guest_permission",team_id:i,role:r.role}}}}({teamId:e.id,permissions:e.permissions??[]}),{spacePermission:n,teamMemberPermission:i}=t,o={visibility:["team_members","space_members"],space_member_join_access:["invite_only","self_join"],invite_access:["team_members","team_owners"]},s={spacePermission:ce({roles:oe,currentRole:i.role}),teamGuestPermission:se,teamMemberPermission:de({roles:ae,currentRole:n.role}),teamOwnerPermission:re},{visibility:a,space_member_join_access:r}=e.settings;return"team_members"===a&&(o.space_member_join_access=["invite_only"],s.spacePermission=["none"]),"self_join"===r&&(o.visibility=["space_members"],o.invite_access=["team_members"],s.spacePermission=s.spacePermission.filter((e=>"none"!==e))),e.is_default&&(s.teamMemberPermission=[i.role],s.spacePermission=[i.role]),{settingsOptions:o,permissionItemRoleOptions:s,currentTeamPermissionItems:t}}function de(e){let{roles:t,currentRole:n}=e;return t.filter((e=>(0,ie().IF)(e,n)))}function ce(e){let{roles:t,currentRole:n}=e;return t.filter((e=>(0,ie().SL)(e,n)))}var ue=()=>n(827973),pe=()=>n(448419),me=()=>n(198829),ge=()=>n(255577),fe=()=>n(388284),he=()=>n(471645),ye=()=>n(352230),ve=()=>n(164079),xe=()=>n(615634);function be(e){let{teamStore:t}=e;const n=(0,s().VK)((()=>t.getSettingsStore().getValue()),[t]),i=(0,s().VK)((()=>{const e=t.getSettingsStore().getValue();if(e)return le({id:t.id,permissions:t.getPermissionItems(),settings:e,is_default:t.isDefault()})}),[t]);if(!n||!i)return null;const o=[(0,A.jsx)(Me,{teamStore:t,hasMultiInviteAccessOptions:1===i.settingsOptions.invite_access.length,inviteAccess:n.invite_access},"invite"),(0,A.jsx)(Se,{teamStore:t,disablePageEdits:n.disable_team_page_edits},"editSidebar"),(0,A.jsx)(je,{teamStore:t},"toggleInviteLink")];return(0,A.jsx)(F().Ph,{title:(0,A.jsx)(r()._H,{id:"TeamSettingsSecurity.teamspaceSettingsTitle",defaultMessage:"Teamspace Security"}),rows:o,hideDividers:!0})}function Se(e){const{teamStore:t,disablePageEdits:n}=e,a=(0,o().O7)(),l=O(t),d=(0,s().VK)((()=>{var e;return(null===(e=t.getTeamPermission())||void 0===e?void 0:e.role)??"none"}),[t]),c=(0,i.useCallback)((e=>{j().createAndCommit({userAction:"teamsHelpers.changeTeamSetting",environment:a,canUndo:!0,perform:n=>{B().$x({environment:a,store:t,update:{disable_team_page_edits:e},transaction:n})}})}),[a,t]),u=(0,ne().J5)(d),p=[{option:!0,label:(0,A.jsx)(r()._H,{id:"TeamSettingsPermissions.whoCanEditTeamPages.teamOwners.title",defaultMessage:"Only teamspace owners"}),action:()=>c(!0)}];return u&&p.push({option:!1,label:(0,A.jsx)(r()._H,{id:"TeamSettingsPermissions.whoCanEditTeamPages.teamMembersAndOwners.title",defaultMessage:"Any teamspace member"}),action:()=>c(!1)}),(0,A.jsx)(Ce,{title:(0,A.jsx)(r()._H,{id:"TeamSettingsPermissions.whoCanEditTeamPages.title",defaultMessage:"Who can edit teamspace sidebar"}),caption:(0,A.jsx)(r()._H,{id:"TeamSettingsPermissions.whoCanEditTeamPages.caption",defaultMessage:"Adding, removing, or re-ordering sidebar pages"}),disabled:l||!u,currentOption:!u||Boolean(n),allOptions:p,optionTooltip:u?void 0:(0,A.jsx)(r()._H,{id:"TeamSettingsPermissions.settingSelect.whoCanEditTeamPages.teamMemberPermissionTooltip",defaultMessage:"Change member permissions to Can edit or Full access to allow teamspace members to edit the sidebar"})})}function Me(e){const{teamStore:t,hasMultiInviteAccessOptions:n,inviteAccess:s}=e,a=(0,L().q)(t),l=(0,o().O7)(),d=(0,i.useCallback)((e=>{j().createAndCommit({userAction:"team.setInviteAccess",environment:l,canUndo:!0,perform:n=>{B().$x({environment:l,store:t,update:{invite_access:e},transaction:n})}})}),[l,t]),c=!a||n;return(0,A.jsx)(Ce,{title:(0,A.jsx)(r()._H,{id:"TeamSettingsPermissions.whoCanInviteTeamMembers.title",defaultMessage:"Who can invite or remove teamspace members"}),disabled:c,optionTooltip:c&&a&&(0,A.jsx)(r()._H,{id:"TeamSettingsPermissions.whoCanInviteTeamMembersDisabled.caption",defaultMessage:"Change access level to Closed or Private to restrict who can invite teamspace members"}),currentOption:s,allOptions:[{option:"team_members",label:(0,A.jsx)(r()._H,{id:"TeamSettingsPermissions.whoCanInviteTeamspaceMembers.teamMembersAndOwners.title",defaultMessage:"Any teamspace member"}),action:()=>d("team_members")},{option:"team_owners",label:(0,A.jsx)(r()._H,{id:"TeamSettingsPermissions.whoCanInviteTeamMembers.teamOwners.title",defaultMessage:"Only teamspace owners"}),action:()=>d("team_owners")}]})}function je(e){const{teamStore:t}=e,n=(0,o().O7)(),i=(0,s().VK)((()=>(0,m().U2)(t)),[t]),l=O(t),d=(0,a().yK)((()=>({container:{display:"flex",justifyContent:"space-between"},subtitle:{marginBottom:5},switcher:{marginTop:5}})),[]);return(0,A.jsxs)("div",{style:d.container,children:[(0,A.jsxs)("div",{children:[(0,A.jsx)(T().Z,{children:(0,A.jsx)(r()._H,{id:"TeamsecuritySection.inviteLink.label",defaultMessage:"Invite Link"})}),(0,A.jsx)(T().Z,{isSmall:!0,style:d.subtitle,children:(0,A.jsx)(r()._H,{id:"TeamsecuritySection.inviteLink.description",defaultMessage:"Only users who can invite members can see the invite link"})})]}),(0,A.jsx)("div",{style:d.switcher,children:(0,A.jsx)(he().Z,{disabled:l,on:!i,onClick:()=>{j().createAndCommit({userAction:"team.setInviteAccess",environment:n,canUndo:!0,perform:e=>{B().$x({environment:n,store:t,update:{disable_invite_link:!i},transaction:e})}})}})})]})}function Ce(e){const{title:t,caption:n,currentOption:i,allOptions:s,disabled:r,optionTooltip:l}=e,d=(0,o().Fy)(),c=(0,a().yK)((e=>({root:{display:"flex",alignItems:"center",width:"100%"},title:{fontSize:14,marginRight:8,flexGrow:1},divider:{marginTop:14,marginBottom:14},chevron:{width:10,marginLeft:4,fill:e.lightIconColor},buttonStyle:{fontSize:12.5,color:e.mediumTextColor},tooltipWidth:{width:300}})),[]),u=s.find((e=>e.option===i));return u?(0,A.jsxs)("div",{style:c.root,children:[(0,A.jsxs)("div",{style:c.title,children:[t,n&&(0,A.jsx)(T().Z,{isSmall:!0,isMultiline:!0,style:{marginTop:1,width:"95%",marginBottom:5},children:n})]}),(0,A.jsx)(_().Z,{style:c.tooltipWidth,placement:Z().Placement.Top,alignment:Z().Alignment.Start,textWrap:!0,disableTooltip:!l,renderTooltip:()=>l,render:e=>(0,A.jsx)(pe().ZP,{...e,disablePopup:r,popupType:d.isMobile?pe().Z4.SlideUp:pe().Z4.Popup,alignmentToOrigin:pe().vR.End,renderOrigin:t=>(0,A.jsxs)($().Z,{style:c.buttonStyle,disabled:r,...(0,ve().Z)(e,t),children:[u.label,!r&&(0,xe().i)(c.chevron)]}),render:e=>{let t;t=d.isMobile?{menuType:ye().o.ActionSheet}:{menuType:ye().o.Popup,minWidth:150};const n=[{key:"options",render:e=>(0,A.jsx)(fe().Z,{...e}),items:s.map((t=>{const n={key:t.option.toString(),render:e=>(0,A.jsx)(ue().Z,{...e,title:t.label,caption:t.caption,checkState:i===t.option}),action:()=>{t.action(),e.close()}};return n}))}];return(0,A.jsx)(me().Z,{...t,children:(0,A.jsx)(ge().Z,{type:ge().i.Vertical,initialFocus:void 0,sections:n})})}})})]}):null}function we(e){let{teamStore:t}=e;const n=(0,a().yK)((e=>({learnMoreLinkContainer:{marginTop:15,marginBottom:15},spacer:{height:20,width:"100%"}})),[]);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(be,{teamStore:t}),(0,A.jsx)("div",{style:n.spacer}),(0,A.jsx)(ke,{teamStore:t}),(0,A.jsx)(E().Z,{helpCenterLocation:"settingsAndPermissions",analyticsFrom:"teams_learn_more_team_settings_security",containerStyle:n.learnMoreLinkContainer,message:(0,A.jsx)(r()._H,{id:"teamSettingsSecurity.learnMore",defaultMessage:"Learn about teamspace security"})})]})}function ke(e){let{teamStore:t}=e;const n=(0,s().VK)((()=>h().default.state.currentSpaceStore),[]),i=(0,o().O7)(),l=(0,te().z)(),d="enterprise",{organizationOverrides:c}=(0,X().u)({spaceId:null==n?void 0:n.id}),u=i.currentUser.id,p=(0,s().VK)((()=>({disable_public_access:{spaceIsDisabled:(null==n?void 0:n.getDisablePublicAccess())??!1,teamIsDisabled:t.getDisablePublicAccess(),isControlledByOrganization:Boolean(c.disable_public_access)},disable_export:{spaceIsDisabled:(null==n?void 0:n.getDisableExport())??!1,teamIsDisabled:t.getDisableExport(),isControlledByOrganization:Boolean(c.disable_export)},disable_guests:{spaceIsDisabled:(null==n?void 0:n.getDisableGuests())??!1,teamIsDisabled:t.getDisableGuests(),isControlledByOrganization:Boolean(c.disable_guests)},disable_team_page_edits:{spaceIsDisabled:void 0,teamIsDisabled:t.getDisableTeamPageEdits(),isControlledByOrganization:!1}})),[n,t,c]),m=(0,L().q)(t),g=(0,s().VK)((()=>(null==n?void 0:n.canAdmin())??!1),[n]),f=(0,a().yK)((()=>({switcher:{marginRight:0}})),[]);if(!n)return null;if(!u)return null;const y=e=>l||p[e].teamIsDisabled,v=e=>{if(!y(e))return!1;if(!m)return!1;if(p[e].isControlledByOrganization)return!1;const t=(e=>p[e].spaceIsDisabled&&p[e].teamIsDisabled)(e);return!t||g},x=e=>!y(e)&&g,b=e=>{const{teamIsDisabled:n,spaceIsDisabled:o}=p[e],s=!n;B().d({environment:i,store:t,settingName:e,newTeamSettingValue:Ie(s),spaceSettingValue:void 0===o?void 0:Ie(o)})},S=e=>{if((e=>p[e].spaceIsDisabled)(e))return(e=>p[e].teamIsDisabled)(e)?(0,A.jsx)(r()._H,{id:"teamSettingsSecurity.basedOnWorkspaceSettings",defaultMessage:"Based on <underline>workspace settings</underline>",values:{underline:e=>(0,A.jsx)("span",{style:{textDecoration:"underline"},children:e})}}):(0,A.jsx)(r()._H,{id:"teamSettingsSecurity.overridesWorkspaceSettings",defaultMessage:"Overriding <underline>workspace setting</underline>",values:{underline:e=>(0,A.jsx)("span",{style:{textDecoration:"underline"},children:e})}})},M=(0,A.jsx)(ee().Z,{subscriptionTier:d,analyticsName:"team_security_settings",desktopStyle:{display:"inline-block",marginLeft:8,marginTop:-3}}),j=(0,A.jsx)(r()._H,{id:"teamSettingsSecurity.setting.enterpriseGateToggleTooltip",defaultMessage:"Upgrade to Enterprise Plan to change security settings"}),C=[(0,A.jsx)(Cn,{switcherStyle:f.switcher,upsellTier:d,on:p.disable_public_access.teamIsDisabled,disabled:!v("disable_public_access"),onChange:()=>b("disable_public_access"),shouldTriggerUpsell:x("disable_public_access"),secondCaption:S("disable_public_access"),title:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(r()._H,{id:"teamSettingsSecurity.setting.shareTitle",defaultMessage:"Disable publishing sites and forms"}),!y("disable_public_access")&&M]}),tooltip:!y("disable_public_access")&&j,isLocked:p.disable_public_access.isControlledByOrganization,lockedTooltip:(0,Q().g)()}),(0,A.jsx)(Cn,{switcherStyle:f.switcher,upsellTier:d,on:p.disable_guests.teamIsDisabled,disabled:!v("disable_guests"),onChange:()=>b("disable_guests"),shouldTriggerUpsell:x("disable_guests"),secondCaption:S("disable_guests"),title:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(r()._H,{id:"teamSettingsSecurity.setting.guestTitle",defaultMessage:"Disable guests"}),!y("disable_guests")&&M]}),tooltip:!y("disable_guests")&&j,isLocked:p.disable_guests.isControlledByOrganization,lockedTooltip:(0,Q().g)()}),(0,A.jsx)(Cn,{switcherStyle:f.switcher,upsellTier:d,on:p.disable_export.teamIsDisabled,disabled:!v("disable_export"),onChange:()=>b("disable_export"),shouldTriggerUpsell:x("disable_export"),secondCaption:S("disable_export"),title:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(r()._H,{id:"teamSettingsSecurity.setting.exportTitle",defaultMessage:"Disable export"}),!y("disable_export")&&M]}),tooltip:!y("disable_export")&&j,isLocked:p.disable_export.isControlledByOrganization,lockedTooltip:(0,Q().g)()})],w=(0,A.jsx)(r()._H,{id:"TeamSettingsSecurity.pageSettingsTitle",defaultMessage:"Page Security"});return(0,A.jsx)(F().Ph,{title:w,rows:C,hideDividers:!0})}function _e(e){const t=(0,o().O7)();return(0,A.jsx)($().Z,{style:e.style,icon:e=>(0,J().H)({...e,margin:"2px 17px 2px 2px",width:16,height:16}),onClick:()=>(e=>{let{teamStore:n,teamName:i}=e;B().YH({environment:t,teamStore:n,teamName:i,from:"sidebar_team_modal"})})({teamName:e.teamName,teamStore:e.teamStore}),children:(0,A.jsxs)("div",{children:[(0,A.jsx)(T().Z,{children:(0,A.jsx)(r()._H,{id:"sidebarTeamModalSettingsScreen.dangerZone.restoreTeamButton",defaultMessage:"Restore teamspace"})}),(0,A.jsx)(T().Z,{isSmall:!0,style:{whiteSpace:"normal"},children:(0,A.jsx)(r()._H,{id:"sidebarTeamModalSettingsScreen.dangerZone.restoreTeamCaption",defaultMessage:"Restoring this teamspace will add it to the sidebar for all teamspace members that were previously added."})})]})})}function Te(e){const t=(0,o().O7)(),n=(0,a().yK)((()=>({archiveLabel:{color:S().ZP.red}})),[]);return(0,A.jsx)($().Z,{style:e.style,isRed:!0,icon:e=>(0,J().H)({...e,margin:"2px 17px 2px 2px",width:16,height:16}),disabled:e.disabled,disabledFeedback:e.disabled,onClick:async()=>{e.disabled||await B().aQ({environment:t,teamStore:e.teamStore,from:"sidebar_team_modal"})},...e.tooltipEvents,children:(0,A.jsxs)("div",{children:[(0,A.jsx)(T().Z,{style:n.archiveLabel,children:(0,A.jsx)(r()._H,{id:"teamSettingsSecurity.dangerZone.archiveTeamButton",defaultMessage:"Archive teamspace"})}),(0,A.jsx)(T().Z,{isSmall:!0,style:{whiteSpace:"normal"},children:(0,A.jsx)(r()._H,{id:"sidebarTeamModalSettingsScreen.dangerZone.archiveTeamDescription",defaultMessage:"Removes teamspace from the sidebar for all members"})})]})})}function Ie(e){return e?"disable":"allow"}const Pe=(0,r().vU)({noDescription:{id:"TeamSettingsGeneral.generalSettings.noDescription",defaultMessage:"No description"}});function Ae(e){let{teamStore:t}=e;const n=(0,o().O7)(),l=(0,s().VK)((()=>h().default.state.currentSpaceStore),[]),d=O(t),[c,u]=(0,i.useState)(void 0),[p,m]=(0,i.useState)(void 0),g=(0,a().yK)((()=>({container:{maxWidth:"none",marginLeft:4},nameAndIconWrap:{display:"flex",alignItems:"center",marginBottom:0,marginTop:4},icon:{marginRight:7},name:{height:20,background:"none",boxShadow:"none",padding:"0 8px"},description:{minHeight:20,background:"none",boxShadow:"none",padding:"0 8px",margin:"0 -8px"},updateButton:{marginTop:14},learnMoreLinkContainer:{marginTop:15,marginBottom:15}})),[20]),[f,y]=(0,s().VK)((()=>[t.getName(),t.getDescription()]),[t]);if(void 0===f)return null;const v=f||"",x=y??"",b=x.length>0,S=null==c?void 0:c.trim(),C=null==p?void 0:p.trim(),w=""===S||(void 0===p||C===x.trim())&&(void 0===c||S===v.trim()),_=(0,A.jsx)(r()._H,{id:"TeamSettingsGeneral.generalSettings.iconAndName.title",defaultMessage:"Icon and name"}),R=(0,A.jsxs)("div",{style:g.nameAndIconWrap,children:[(0,A.jsx)(N().p,{disabled:d,store:t,style:g.icon,size:20,onChange:e=>{j().createAndCommit({userAction:"TeamSettingsGeneral.updateIcon",environment:n,canUndo:!0,perform:n=>{B().fs({store:t,update:{icon:e},transaction:n})}})}}),d?(0,A.jsx)(T().Z,{children:v}):(0,A.jsx)(Re,{value:c??v,style:g.name,onBlur:e=>{u(e)},onChange:e=>{u(e)},disabled:d,placeholder:"Acme Labs"})]}),Z=(0,A.jsx)(r()._H,{id:"TeamSettingsGeneral.generalSettings.description.title",defaultMessage:"Description"}),D=I().Z.formatMessage(Pe.noDescription),L=d?(0,A.jsx)(T().Z,{isMultiline:!0,isSecondaryColor:!b,children:b?x:D}):(0,A.jsx)(Re,{value:void 0===p?x:p,onBlur:e=>{m(e)},onChange:e=>{m(e)},disabled:d,textarea:!0,autosize:!0,placeholder:D,style:g.description}),H=[(0,A.jsxs)(i.Fragment,{children:[(0,A.jsx)(T().Z,{isSmall:!0,children:_}),R]},"name"),(0,A.jsxs)(i.Fragment,{children:[(0,A.jsx)(T().Z,{isSmall:!0,children:Z}),L]},"description")];return(0,A.jsxs)("div",{style:g.container,children:[(0,A.jsx)(F().Ph,{title:(0,A.jsx)(r()._H,{id:"TeamSettingsGeneral.generalSettings.details",defaultMessage:"Details"}),rows:H}),!d&&(0,A.jsx)(k().Z,{style:g.updateButton,disabled:w,isLarge:!0,onClick:async()=>{if(w)return;if(S&&S!==v.trim()){if(!(await(0,P().Xg)({environment:n,spaceStore:l,teamName:S})))return}const{performResult:e,serverCommitResult:i}=j().createAndCommit({userAction:"TeamSettingsGeneral.updateNameAndDescription",environment:n,canUndo:!0,perform:e=>{B().fs({store:t,update:{name:S??v,description:C??x},transaction:e})}});try{await Promise.all([e,i])}catch(o){return}M().oV({label:(0,A.jsx)(r()._H,{id:"TeamSettingsGeneral.settingsChanged",defaultMessage:"Updated teamspace details"})})},children:(0,A.jsx)(r()._H,{id:"teamsWorkspaceSettings.updateButton.label",defaultMessage:"Update"})}),(0,A.jsx)("br",{}),(0,A.jsx)(G,{teamStore:t}),(0,A.jsx)(Ze,{teamStore:t}),(0,A.jsx)(E().Z,{helpCenterLocation:"bestPractices",analyticsFrom:"teams_learn_more_team_settings_general",containerStyle:g.learnMoreLinkContainer})]})}function Re(e){const{value:t,style:n,onBlur:o,onChange:s,placeholder:a,disabled:r}=e,[l,d]=(0,i.useState)(!1);return(0,A.jsx)(C().Z,{capture:l,render:i=>(0,A.jsx)(w().Z,{textarea:e.textarea,autosize:e.autosize,onFocus:e=>{d(!0)},onBlur:e=>{d(!1),o(e.target.value)},onChange:e=>{d(!1),s&&s(e.target.value)},onSubmit:e=>{e.target.blur()},placeholder:a,disabled:r,value:t,style:n,...i})})}function Ze(e){let{teamStore:t}=e;const n=(0,a().yK)((()=>({buttonStyle:{alignItems:"center",height:"auto",width:"100%",paddingTop:F().MQ,paddingBottom:F().MQ,paddingLeft:F().oM,paddingRight:F().oM}})),[]),[i,o]=(0,s().VK)((()=>[t.getName(),t.isArchived()]),[t]),l=(0,L().q)(t),d=(0,V().e)(t),c=(0,H().y)(t.id),u=(0,D().n)(),p=c&&!u;if(void 0===i||!d)return null;const m=[],g=(0,A.jsx)(U().Z,{buttonInternals:(0,A.jsx)(Be,{isTeamOwner:l}),teamStore:t,placement:Z().Placement.Bottom,alignment:Z().Alignment.Start,from:"sidebar_team_modal",style:n.buttonStyle,icon:e=>R({...e,margin:"2px 17px 2px 2px",width:16,height:16}),isRed:!l});if(m.push(g),l)if(o)m.push((0,A.jsx)(_e,{teamStore:t,teamName:i,style:n.buttonStyle}));else{const e=(0,A.jsx)(_().Z,{disableTooltip:!p,placement:Z().Placement.Bottom,alignment:Z().Alignment.Start,renderTooltip:()=>(0,A.jsx)(r()._H,{id:"sidebarTeamModalSettingsScreen.dangerZone.cannotArchive",defaultMessage:"Cannot archive this teamspace because it is the only default teamspace in this workspace."}),render:e=>(0,A.jsx)(Te,{disabled:p,teamStore:t,tooltipEvents:e,style:n.buttonStyle})});m.push(e)}return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{style:{height:20,width:"100%"}}),(0,A.jsx)(F().Ph,{title:(0,A.jsx)(r()._H,{id:"sidebarTeamModalSettingsScreen.dangerZone.title",defaultMessage:"Danger zone"}),rows:m,itemStyle:{padding:0,margin:0}})]})}function Be(e){let{isTeamOwner:t}=e;const n=(0,a().yK)((()=>({label:{color:t?"inherit":S().ZP.red}})),[t]);return(0,A.jsxs)("div",{children:[(0,A.jsx)(T().Z,{style:n.label,children:(0,A.jsx)(r()._H,{id:"teamBrowser.teamCard.button.leaveTeam",defaultMessage:"Leave teamspace"})}),(0,A.jsx)(T().Z,{isSmall:!0,style:{whiteSpace:"normal"},children:(0,A.jsx)(r()._H,{id:"teamBrowser.teamCard.button.leaveTeamDescription",defaultMessage:"Removes teamspace from your sidebar"})})]})}var De=()=>n(966296),Le=()=>n(270820),Oe=()=>n(296631),He=()=>n(558999),Ve=()=>n(669200);function Ue(e){let{teamStore:t}=e;const n=(0,a().yK)((e=>({container:{display:"flex",justifyContent:"space-between",alignItems:"center",position:"sticky",top:0,background:e.modalBackground,zIndex:10,paddingBottom:8},input:{boxShadow:e.inputBoxShadow,borderRadius:100,fontSize:12,width:"45%",maxWidth:260,marginRight:2},searchIcon:{width:14,height:14,marginRight:6,flexGrow:0,flexShrink:0,fill:e.mediumIconColor}})),[]),i=(0,r().YB)(),o=(0,s().VK)((()=>g().default.state.memberFilterQuery),[]),l=(0,s().qz)(void 0,Oe().Z),d=(0,He().e)(t),c=(0,s().VK)((()=>d&&!(0,m().U2)(t)),[t,d]);return(0,A.jsxs)("div",{style:n.container,children:[(0,A.jsxs)("div",{children:[(0,A.jsx)(De().B,{store:t,permissionsInviteStore:l,origin:(0,A.jsx)(_().Z,{placement:Z().Placement.Left,alignment:Z().Alignment.Start,textWrap:!0,renderTooltip:()=>d?(0,A.jsx)("div",{style:{width:"max-content",maxWidth:150},children:(0,A.jsx)(r()._H,{id:"teamPermissionsInviteWithModal.addMembers.tooltip",defaultMessage:"Add members and groups"})}):(0,A.jsx)("div",{style:{width:220},children:(0,A.jsx)(r()._H,{id:"teamPermissionsInviteWithModal.addMembersNoPermissions.tooltip",defaultMessage:"You do not have permissions to add members to this teamspace"})}),render:e=>(0,A.jsx)(k().Z,{disabled:!d,isLarge:!0,onClick:()=>{l.setState({...l.state,modalOpen:!0})},...e,children:(0,A.jsx)(r()._H,{id:"teamPermissionsInviteWithModal.openModal",defaultMessage:"Add members"})})})}),c&&(0,A.jsx)(Ve().u,{store:t,isSmall:!0})]}),(0,A.jsx)(w().Z,{placeholder:i.formatMessage({id:"teamPermissionsInviteWithModal.filterGroupsAndMembersInput.placeholder",defaultMessage:"Search for members or groups…"}),style:n.input,value:o,onChange:e=>{g().default.setState({...g().default.state,memberFilterQuery:e.target.value,limitMembers:!0})},left:(0,Le().R)(n.searchIcon),showClearButton:!0,format:w().B.Small})]})}n(122556),n(582845),n(250570),n(533019),n(721473),n(788208),n(22624);var Ee=()=>n(619186),Ne=()=>n(801812),Fe=()=>n(777346),Ke=()=>n(677559),ze=()=>n(828946),We=()=>n(18281),qe=()=>n(255933),Ge=()=>n(499110),Ye=()=>n(207917),$e=()=>n(98991),Xe=()=>n(943620),Qe=()=>n(981583),Je=()=>n(743790),et=()=>n(591914),tt=()=>n(467806),nt=(n(821057),()=>n(308186)),it=()=>n(666414),ot=()=>n(286338),st=()=>n(616433),at=()=>n(15409),rt=()=>n(529048),lt=()=>n(128119),dt=()=>n(815277),ct=()=>n(697623),ut=()=>n(741381),pt=()=>n(463807),mt=(n(228244),()=>n(306164)),gt=()=>n(542487),ft=()=>n(370005),ht=()=>n(122479);function yt(e){const{teamStore:t,memberInfo:n,permissionItem:l,memberName:d,style:c,onMenuItemClicked:u,isPermissionOverridden:p}=e,m=(0,o().O7)(),g=(0,r().YB)(),f=(0,i.useMemo)((()=>new(rt().Z)),[]),y=(0,s().VK)((()=>t.getTeamPermission()),[t]),v=(0,s().VK)((()=>h().default.state.currentSpaceStore),[]),x=(0,s().VK)((()=>!("enterprise"===(null==v?void 0:v.getSubscriptionTier()))&&!p),[v,p]),b=(0,L().q)(t),S=x||!b,M=(0,s().VK)((()=>{if(null==t||!t.isDefined())return;const e=g.formatMessage({id:"teamMemberPermissionRoleSelect.member.permissionitem.description",defaultMessage:"You can't give less access than the teamspace default. Lower teamspace members‘ access to enable this option."}),n=(0,A.jsx)(r()._H,{id:"teamMemberPermissionRoleSelect.permissionItem.defaultTag",defaultMessage:"default"});return["editor","read_and_write","comment_only","reader"].map((function(i){const o=(null==y?void 0:y.role)===i?n:void 0;return(0,ie().bk)({teamValue:{id:t.id,permissions:t.getPermissionItems()},permissionRole:i})?{role:i,disabledInfo:{isDisabled:!0,disabledMessage:e},tag:o}:{role:i,tag:o}}))}),[y,g,t]);const C=(0,a().yK)((e=>({header:{display:"flex",flexDirection:"column",backgroundColor:e.sidebarSecondaryBackground,fontSize:12,color:e.mediumTextColor,alignItems:"flex-start",paddingTop:10,paddingLeft:12,paddingRight:12,paddingBottom:10},overrideTitle:{display:"flex",alignItems:"center",justifyContent:"space-between",height:28},overrideLabel:{paddingLeft:8,color:e.mediumTextColor},roleSelectButton:{marginRight:0,fontSize:12,color:e.mediumTextColor,visibility:p?void 0:"hidden"},disabledItem:{...c,color:e.lightTextColor}})),[c,p]),w=(0,A.jsxs)("div",{style:C.overrideTitle,children:[(0,A.jsx)(r()._H,{id:"TeamMemberOwnerSelect.permissionsOverride",defaultMessage:"Custom permissions"}),x?(0,A.jsx)(ee().Z,{subscriptionTier:"enterprise",analyticsName:"team_member_permission_override",desktopStyle:{marginLeft:8,marginRight:12}}):(0,A.jsx)(ft().ZP,{role:"owner"===n.type?"none":l.role,table:mt().e0,type:"user"===n.entity_type?"user_permission":"group_permission",upgradeButtonName:"user"===n.entity_type?"user_permission_item":"group_permission_item",disabled:S,buttonStyle:C.roleSelectButton,availableRoleItems:M,header:(0,A.jsx)(T().Z,{isSmall:!0,isSecondaryColor:!0,style:{fontWeight:600,marginLeft:16,marginTop:8},children:(0,A.jsx)(r()._H,{id:"teamMemberPermissionRoleSelect.permissionOverride.menuHeader",defaultMessage:"Select custom role"})}),onChange:e=>{"none"!==e&&(!function(e){nt().vC({message:(0,A.jsx)(r()._H,{id:"teamMemberPermissionSettings.permissionSwitcher.confirmation.message",defaultMessage:"Are you sure you want to change {name}'s role to {role}?",values:{name:d,role:(0,ht().r_)(e).toLowerCase()}}),description:(0,A.jsx)(r()._H,{id:"teamMemberPermissionSettings.permissionSwitcher.confirmation.description",defaultMessage:"This change won't apply to any restricted pages in the teamspace."}),showCancel:!0,keepFocus:!1,handleCancel:nt().lo,items:[{label:(0,A.jsx)(r()._H,{id:"teamMemberPermissionSettings.permissionSwitcher.accept",defaultMessage:"Change access"}),color:"red",onAccept:async()=>{const{serverCommitResult:i}=j().createAndCommit({userAction:"TeamMemberPermissionRoleSelect.handleRoleSelect",environment:m,canUndo:!0,perform:i=>{B().jg({memberInfo:n,teamStore:t,transaction:i,environment:m,permissionRole:e})}});await i,t.isDefault()&&(t.getMembershipDefinedOnTeam().some((e=>(0,gt().ah)(e,n)))||await B().Uj({environment:m,teamStore:t,teamMemberInfos:[n],isSettingDefaultTeam:!0,createNewTeamFlowId:void 0}))}}]})}(e),u&&u())},buttonPopupStore:f,placementToOrigin:lt().Iw.Right,alignmentToOrigin:lt().lU.End})]});return(0,A.jsx)(_().Z,{placement:S?Z().Placement.Right:Z().Placement.Left,textWrap:!0,renderTooltip:()=>S&&!b?(0,A.jsx)(r()._H,{id:"teamMemberPermissionRoleSelect.permissionOverride.buttonTooltip.disabled",defaultMessage:"You must be a teamspace owner to set custom permission level"}):(0,A.jsx)(r()._H,{id:"teamMemberPermissionRoleSelect.permissionOverride.buttonTooltip",defaultMessage:"Set a custom permission level for all pages in this teamspace"}),render:e=>(0,A.jsx)(ue().Z,{...e,focused:!1,disabled:S,style:S?C.disabledItem:c,textWrapperStyle:{marginRight:0},onClick:()=>f.setState({open:!0}),title:w,icon:p?(0,A.jsx)("div",{style:{marginTop:8},children:(0,at().e)({width:14})}):void 0})})}function vt(e){let{teamStore:t,memberInfo:n,permissionItem:i,memberName:a,isPermissionOverridden:l,disabled:c}=e;const u=(0,s().qz)(void 0,rt().Z),p=(0,o().O7)(),g=(0,s().VK)((()=>h().default.state.currentSpaceStore),[]),f=(0,s().VK)((()=>h().default.state.currentUserStore),[]),y=(0,s().VK)((()=>{const e=null==f?void 0:f.userId;return"user"===n.entity_type&&n.user_id===e}),[null==f?void 0:f.userId,n]),v=()=>u.setState({...u.state,open:!1}),x=(0,L().q)(t),b=(0,dt().VX)({name:"team_self_promotion",spaceId:null==g?void 0:g.id,userId:null==f?void 0:f.userId}),S=(0,s().VK)((()=>{const{currentSpaceStore:e}=h().default.state;return Boolean(null==e?void 0:e.canAdmin())}),[]),M=(0,s().VK)((()=>{const{ownerUserIds:e,ownerGroupIds:n}=t.getAllOwnerIds();return e.length+n.length}),[t]),C=(0,pt().l)(t),w=0===M,k=async e=>{v();const i="owner"===e?(0,A.jsx)(r()._H,{defaultMessage:"owner",id:"teamMemberPermissionSettings.upgradeGuestConfirmation.roleLabelOwner"}):(0,A.jsx)(r()._H,{defaultMessage:"member",id:"teamMemberPermissionSettings.upgradeGuestConfirmation.roleLabelMember"});if("team_level_guest"!==n.type||"owner"!==e&&"member"!==e)if("owner"===e){if("user"===n.entity_type||"group"===n.entity_type){const e=async()=>{const{serverCommitResult:e}=j().createAndCommit({userAction:"TeamMemberOwnerSelect.handleOwnerMenuItemClicked",environment:p,canUndo:!0,perform:e=>{B().W8({environment:p,memberInfo:n,teamStore:t,transaction:e})}});await e},i=async()=>{await B().wT({environment:p,teamStore:t,currentSpaceStore:g,from:"team_settings_members",action:"upgradeToOwner"})};w&&y?nt().vC({message:(0,A.jsx)(r()._H,{id:"teamMemberPermissionSettings.upgradeOwnerForUnownedTeamConfirmation.message",defaultMessage:"Are you sure you want to become a teamspace owner? You can become the teamspace owner since there are no other owners and you are a workspace admin."}),showCancel:!0,keepFocus:!1,handleCancel:nt().lo,items:[{label:(0,A.jsx)(r()._H,{id:"teamMemberPermissionSettings.upgradeOwnerForUnownedTeamConfirmation.accept",defaultMessage:"Become teamspace owner"}),color:"blue",onAccept:async()=>{await e()}}]}):y&&b&&S?await i():await e()}}else y&&x?nt().vC({message:(0,A.jsx)(r()._H,{id:"teamMemberPermissionSettings.removeSelfTeamOwner.confirmation.message",defaultMessage:"Are you sure you want to remove yourself as a teamspace owner? You'll no longer be able to edit teamspace settings and permissions."}),showCancel:!0,keepFocus:!1,handleCancel:nt().lo,items:[{label:(0,A.jsx)(r()._H,{id:"teamMemberPermissionSettings.permissionSwitcher.accept",defaultMessage:"Change access"}),color:"red",onAccept:_}]}):await _();else{const o=(0,m().s4)(n.user_id).length;nt().vC({message:(0,A.jsx)(A.Fragment,{children:o>1?(0,A.jsx)(r()._H,{id:"teamMemberPermissionSettings.upgradeGuestConfirmationWithOtherTeamspaces.message",defaultMessage:"Are you sure you want to upgrade this user to a teamspace {memberOrOwner}? They will also be added to the workspace as a member, and they will become a member in {numberOfOtherTeams, plural, one {{numberOfOtherTeams} other teamspace} other {{numberOfOtherTeams} other teamspaces}}.",values:{memberOrOwner:i,numberOfOtherTeams:o-1}}):(0,A.jsx)(r()._H,{id:"teamMemberPermissionSettings.upgradeGuestConfirmation.message",defaultMessage:"Are you sure you want to upgrade this user to a teamspace {memberOrOwner}? They will also be added to the workspace as a member.",values:{memberOrOwner:i}})}),showCancel:!0,keepFocus:!1,handleCancel:nt().lo,items:[{label:(0,A.jsx)(r()._H,{id:"teamMemberPermissionSettings.upgradeGuestConfirmation.accept",defaultMessage:"Add to workspace"}),color:"blue",onAccept:async()=>{if(g){const{serverCommitResult:i}=j().createAndCommit({userAction:"TeamMemberOwnerSelect.handleOwnerMenuItemClicked",environment:p,canUndo:!0,perform:i=>{B().Ce({environment:p,userId:n.user_id,teamStore:t,transaction:i,spaceStore:g,newTeamRole:e})}});await i}}}]})}},_=async()=>{if("owner"!==n.type||"user"!==n.entity_type&&"group"!==n.entity_type){if("member"===n.type){const{serverCommitResult:e}=j().createAndCommit({userAction:"TeamMemberOwnerSelect.handleSetMemberAccept",environment:p,canUndo:!0,perform:e=>{B().X0({environment:p,memberInfo:n,teamStore:t,transaction:e})}});await e}}else{const{serverCommitResult:e}=j().createAndCommit({userAction:"TeamMemberOwnerSelect.handleSetMemberAccept",environment:p,canUndo:!0,perform:e=>{B().mX({memberInfo:n,teamStore:t,transaction:e,environment:p})}});await e}},T=async()=>{var e;const{entity_type:i}=n;switch(v(),i){case"group":const o=null===(e=tt().Z.state.permissionGroupsAndMemberCounts.find((e=>e.group.group_id===n.group_id)))||void 0===e?void 0:e.group;if(!o)throw new Error("Permission group not found in space.");B().mN({environment:p,teamStore:t,group:o});break;case"user":await B().WO({environment:p,teamStore:t,userId:n.user_id,from:"team_settings_member_table",userGroupsInTeam:C});break;default:(0,d().t1)(i)}};return(0,A.jsx)(pe().ZP,{buttonPopupStore:u,placementToOrigin:lt().Iw.Bottom,renderOrigin:e=>(0,A.jsx)(bt,{buttonPopupEvents:e,isPermissionOverridden:l,permissionItem:i,memberInfo:n,disabled:c}),render:()=>(0,A.jsx)(xt,{teamStore:t,isPermissionOverridden:l,memberInfo:n,permissionItem:i,memberName:a,numberOfOwners:M,isMemberCurrentUser:y,onMenuItemClicked:k,onRemoveClicked:T,onSubMenuItemClicked:v}),popupType:pe().Z4.Popup})}function xt(e){let{teamStore:t,isPermissionOverridden:n,memberInfo:i,permissionItem:o,memberName:r,numberOfOwners:d,isMemberCurrentUser:u,onRemoveClicked:m,onMenuItemClicked:g,onSubMenuItemClicked:f}=e;const y=(0,s().VK)((()=>{const{currentSpaceStore:e}=h().default.state;return!Boolean(null==e?void 0:e.getSettingsStore().getKeyStore("disable_team_guests").getValue())&&(0,ot().F$)()}),[]),v=(0,s().VK)((()=>t.isDefault()),[t]),x=(0,st().J)(),b=(0,s().VK)((()=>{const{currentSpaceStore:e}=h().default.state;return Boolean((null==e?void 0:e.canAdmin())&&(0,ct().wP)())}),[]),S=(0,L().q)(t),M=(0,He().e)(t),j=1===d,C=0===d,w=(0,a().yK)((e=>{const t={paddingTop:5,paddingBottom:5},n={...t,width:280,alignItems:"flex-start"};return{actionMenu:{marginTop:-4},removeButton:{...t,color:e.errorText},menuItem:n,indentedMenuItem:{...n,paddingLeft:20},overrideLabel:{paddingLeft:10,color:e.mediumTextColor,fontSize:12,fontWeight:c().Ue.regular}}}),[]),k=(e,t,n)=>(0,ut().o)({isCurrentUserTeamOwner:S,role:e,isDefaultTeam:v,userIsSpaceAdmin:Boolean(x),userIsEnterpriseWorkspaceOwner:b,originalTeamMemberInfo:t,onlyHasOneOwner:j,isUnowned:C,isMemberCurrentUser:u,canCurrentUserAddTeamMembers:n}),T=(e,t)=>{const{isDisabled:i,disabledReason:o}=k(e,t,M);return{key:e,action:()=>g(e),render:s=>{const a=!n&&t.type===e;return(0,A.jsx)(_().Z,{disableTooltip:!i,placement:Z().Placement.Right,textWrap:!0,renderTooltip:()=>o,render:t=>(0,A.jsx)("span",{...t,children:(0,A.jsx)(ue().Z,{...s,style:a?w.menuItem:w.indentedMenuItem,disabled:i,disabledFeedback:i,title:(0,A.jsx)(St,{type:e}),caption:jt(e),shouldWrapCaption:!0,icon:a?(0,at().e)({width:14}):void 0})})})}}},I=v&&"user"===i.entity_type,P="group"!==i.entity_type&&y,R=[{key:"teamRoles",items:l().oA([T("owner",i),T("member",i),P?T("team_level_guest",i):void 0,Ct({onRemoveClicked:m,styles:w,...k("none",i,M),isMemberInDefaultTeam:I}),..."owner"===i.type||C?[]:[{key:"divider",action:()=>{},render:()=>(0,A.jsx)(it().Z,{size:10})},{key:"permissions_override",action:()=>{},render:e=>(0,A.jsx)("span",{...e,children:(0,A.jsx)(yt,{teamStore:t,memberInfo:i,permissionItem:o,memberName:r,onMenuItemClicked:f,isPermissionOverridden:n,style:n?w.menuItem:w.indentedMenuItem})})}]]),render:e=>(0,A.jsx)(fe().Z,{...e,topBorder:0!==e.index})}];return(0,A.jsx)(me().Z,{className:p().a6i,menuType:ye().o.Popup,children:(0,A.jsx)(ge().Z,{type:ge().i.Vertical,initialFocus:void 0,sections:R})})}function bt(e){let{buttonPopupEvents:t,disabled:n,isPermissionOverridden:i,permissionItem:o,memberInfo:s}=e;const l=(0,a().yK)((e=>({label:{color:e.regularTextColor,fontSize:12.5,fontWeight:c().Ue.regular},overrideLabel:{color:e.mediumTextColor,fontSize:12,fontWeight:c().Ue.regular},chevron:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]),u=function(e,t,n){if(t&&n)return function(e){switch(e){case"none":return(0,A.jsx)(r()._H,{id:"TeamMemberOwnerSelect.roleName.none",defaultMessage:"No access"});case"reader":return(0,A.jsx)(r()._H,{id:"TeamMemberOwnerSelect.roleName.reader",defaultMessage:"Can view"});case"comment_only":return(0,A.jsx)(r()._H,{id:"TeamMemberOwnerSelect.roleName.comment_only",defaultMessage:"Can comment"});case"content_only_editor":return(0,A.jsx)(r()._H,{id:"TeamMemberOwnerSelect.roleName.content_only_editor",defaultMessage:"Can edit content"});case"membership_admin":case"read_and_write":return(0,A.jsx)(r()._H,{id:"TeamMemberOwnerSelect.roleName.read_and_write",defaultMessage:"Can edit"});case"editor":return(0,A.jsx)(r()._H,{id:"TeamMemberOwnerSelect.roleName.editor",defaultMessage:"Full access"});default:(0,d().t1)(e)}}(n);return Mt(e)}(s.type,i,o.role);return(0,A.jsxs)($().Z,{disabled:n,...t,children:[i&&(0,A.jsxs)("span",{style:l.overrideLabel,children:[(0,A.jsx)(r()._H,{id:"TeamMemberOwnerSelect.roleName.custom",defaultMessage:"Custom"}),(0,A.jsx)("span",{style:{marginLeft:5,marginRight:5},children:"•"})]}),(0,A.jsx)("span",{style:l.label,children:u}),!n&&(0,xe().i)(l.chevron)]})}function St(e){let{type:t}=e;const n=Mt(t);return(0,A.jsx)("div",{children:(0,A.jsx)("span",{children:n})})}function Mt(e){switch(e){case"owner":case"member":case"team_level_guest":return(0,A.jsx)(r()._H,{...m().q9[e].label});case"none":return;default:(0,d().t1)(e)}}function jt(e){switch(e){case"owner":case"member":case"team_level_guest":return(0,A.jsx)(r()._H,{...m().q9[e].caption});case"none":return;default:(0,d().t1)(e)}}function Ct(e){let{styles:t,isDisabled:n,disabledReason:i,onRemoveClicked:o,isMemberInDefaultTeam:s}=e;return{key:"remove",action:o,render:e=>(0,A.jsx)(_().Z,{disableTooltip:!n,placement:Z().Placement.Right,textWrap:!1,renderTooltip:()=>i,render:i=>(0,A.jsx)("span",{...i,children:(0,A.jsx)(ue().Z,{...e,style:{...t.removeButton,...t.indentedMenuItem},disabled:n,disabledFeedback:!0,title:(0,A.jsx)(r()._H,{id:"TeamMemberOwnerSelect.remove",defaultMessage:"Remove"})})})})}}var wt=()=>n(469203);function kt(e){const{icon:t,label:n,name:i,tag:o,style:s}=e,r=(0,a().yK)((e=>({container:{display:"flex",flexDirection:"row",alignItems:"center",gap:10,...s},labelContainer:{display:"flex",flexDirection:"column",...c().Yu,marginLeft:5},name:{minWidth:30},nameContainer:{display:"flex",flexDirection:"row",alignItems:"center"}})),[s]);return(0,A.jsxs)("div",{style:r.container,children:[t,(0,A.jsxs)("div",{style:r.labelContainer,children:[(0,A.jsxs)("div",{style:r.nameContainer,children:[(0,A.jsx)(wt().s,{style:r.name,children:i}),o]}),n&&(0,A.jsx)(T().Z,{isSmall:!0,isSecondaryColor:!1,isMultiline:!0,children:(0,A.jsx)(wt().s,{children:n})})]})]})}function _t(e){const{iconComponent:t,label:n,name:i,permissionRoleSelectComponent:o,tag:s,tooltip:r,style:l}=e,d=(0,a().yK)((e=>({permissionRow:{display:"flex",flexDirection:"row",lineHeight:1.2,fontSize:14,width:"100%",minHeight:36,justifyContent:"space-between",alignItems:"center",...l}})),[l]);return(0,A.jsxs)("div",{style:d.permissionRow,children:[(0,A.jsx)(kt,{icon:t,name:i,tag:s,label:n,style:{minWidth:200,marginRight:6}}),(0,A.jsx)(_().Z,{textWrap:!0,style:{width:210},disableTooltip:!r,placement:Z().Placement.Left,renderTooltip:()=>r,render:e=>(0,A.jsx)("span",{...e,children:o})})]})}function Tt(e){const{type:t,store:n,permissionItem:i,memberInfo:l}=e,c=(0,o().O7)(),u=(0,r().YB)(),p="group"===t?e.permissionGroup:void 0,g="user"===t?e.userStore:void 0,f=(0,s().VK)((()=>h().default.state.currentSpaceStore),[]),y=(0,s().VK)((()=>{var e;switch(t){case"group":return"none";case"user":const n=l.user_id;return(null===(e=(0,et()._P)(f,n))||void 0===e?void 0:e.getMembershipTypeAsRoleOrNone())??"none";default:(0,d().t1)(t)}}),[t,l,f]),v=(0,L().q)(n),x=(0,He().e)(n),b=(0,s().VK)((()=>{const{currentSpaceStore:e}=h().default.state;return null==e?void 0:e.canEditMembership()}),[]),S=(0,s().VK)((()=>{const e=c.currentUser.id,t=n.getSettingsStore().getValue();return!!(null!=f&&f.isDefined()&&n.isDefined()&&t&&e)&&(0,m().W9)({environment:c,teamStore:n,spaceStore:f})}),[c,f,n]),M=(0,s().VK)((()=>{const e=n.getPermissionItems()||[];switch(l.entity_type){case"group":return!!e.find((e=>(0,ne().hV)(e)&&e.group_id===l.group_id));case"user":return!!e.find((e=>(0,ne().jg)(e)&&e.user_id===l.user_id));default:return!1}}),[l,n]),{name:j,label:C,icon:w,isSelfUserPermission:k}=(0,s().VK)((()=>{const e=c.currentUser.id;switch(t){case"group":return Pt({permissionGroup:p,spaceId:null==f?void 0:f.id});case"user":return function(e){var t;let{intl:n,userStore:i,currentUserId:o}=e;const s=void 0!==o&&(null==i||null===(t=i.getModel())||void 0===t?void 0:t.id)===o;return{name:(0,Ge().Nz)(n,null==i?void 0:i.getModel()),label:null==i?void 0:i.getEmail(),icon:(0,A.jsx)(Qe().Z,{avatarShouldShowShadow:!0,userStore:i,size:32}),isSelfUserPermission:s}}({intl:u,userStore:g,currentUserId:e});default:(0,d().t1)(t)}}),[c.currentUser.id,t,p,null==f?void 0:f.id,u,g]),_=(0,A.jsx)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:(0,A.jsx)(vt,{teamStore:n,memberInfo:l,memberName:j,permissionItem:i,isPermissionOverridden:M,disabled:x&&"member"===l.type?!v&&M:!v&&!S||"team_level_guest"===l.type&&!b})}),T=(0,a().yK)((e=>({row:{minHeight:52},pill:{marginLeft:6,height:17},titleYouIndicator:{color:e.mediumTextColor}})),[]),I=(0,A.jsxs)("div",{style:{display:"flex",gap:4},children:[j,k&&(0,A.jsx)("span",{style:T.titleYouIndicator,children:(0,A.jsx)(r()._H,{id:"specificTeamMemberPermissionRow.displayName.youIndicator",defaultMessage:"(You)"})})]});return(0,A.jsx)(_t,{style:T.row,tag:(0,ne().Bc)(y)?(0,A.jsx)(Ye().Z,{desktopStyle:T.pill,mobileStyle:T.pill,role:It(y)}):"group"===t?(0,A.jsx)("div",{style:T.pill,children:w}):void 0,permissionRoleSelectComponent:_,iconComponent:"group"===t?(0,A.jsx)($e().Z,{size:32}):w,name:I,label:C})}function It(e){switch(e){case"editor":return"admin";case"membership_admin":return"membership_admin";default:(0,d().t1)(e)}}function Pt(e){var t;let{spaceId:n,permissionGroup:i}=e;const{name:o,icon:s}=i,a=(null===(t=tt().Z.state.permissionGroupsAndMemberCounts.find((e=>e.group.group_id===i.group_id)))||void 0===t?void 0:t.memberCount)??0;return{name:o||(0,A.jsx)(r()._H,{id:"teamPermissionSettings.untitled",defaultMessage:"Untitled"}),label:(0,A.jsx)(_().Z,{placement:Z().Placement.Bottom,alignment:Z().Alignment.Start,disableTooltip:0===a,renderTooltip:()=>(0,A.jsx)(Je().Y,{group:i,limit:10,noMembersMessage:void 0}),render:e=>(0,A.jsxs)("div",{...e,children:[(0,A.jsx)(r()._H,{id:"teamPermissionSettings.group",defaultMessage:"Group"})," • ",(0,A.jsx)(r()._H,{id:"teamPermissionSettings.numberOfMembers",defaultMessage:"{groupSize, plural, one {{groupSize} member} other {{groupSize} members}}",values:{groupSize:a}})]})}),icon:s&&(0,A.jsx)(Xe().Z,{bucket:"public",disabled:!0,onChange:()=>{},isEmptyPage:!1,title:o,size:18,icon:s&&n?{icon:s,pointer:{table:qe().bx,id:n}}:void 0}),isSelfUserPermission:!1}}var At=()=>n(521777),Rt=()=>n(576387);function Zt(e){let{teamStore:t,...n}=e;const l=(0,o().O7)(),d=(0,s().VK)((()=>{var e;return null===(e=h().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),c=(0,r().YB)(),u=(0,a().yK)((()=>({container:{display:"flex",flexDirection:"row",lineHeight:1.2,fontSize:14,width:"100%",minHeight:52,justifyContent:"space-between",alignItems:"center"},pill:{marginLeft:6,height:17}})),[]),p=(0,i.useCallback)((e=>{M().oV({label:(0,A.jsx)(r()._H,{id:"SpecificTeamMemberToAddRow.team_invite_failure",defaultMessage:"Failed to add {userOrGroupName}",values:{userOrGroupName:e}})})}),[]),m=(0,i.useCallback)((async(e,n)=>{await B().Uj({environment:l,teamMemberInfos:[e],teamStore:t,isSettingDefaultTeam:!1,createNewTeamFlowId:void 0})?await Rt().bi(l):p(n)}),[l,p,t]),g=(0,i.useCallback)(((e,t)=>m({type:"member",entity_type:"user",user_id:e.id},t)),[m]),f=(0,i.useCallback)(((e,t)=>m({type:"member",entity_type:"group",group_id:e.group_id},t)),[m]),y=(0,s().VK)((()=>{if("groupToAdd"in n)return Pt({spaceId:d,permissionGroup:n.groupToAdd})}),[d,n]);if("memberToAdd"in n){const{memberToAdd:e}=n,t=(0,Ge().Nz)(c,e);return(0,A.jsxs)("div",{style:u.container,children:[(0,A.jsx)(kt,{icon:(0,A.jsx)(Qe().Z,{userValue:e,size:32}),name:t,label:e.email}),Bt((()=>{g(e,t)}))]})}{if(!d||!y)return(0,A.jsx)(A.Fragment,{});const{groupToAdd:e}=n;return(0,A.jsxs)("div",{style:u.container,children:[(0,A.jsx)(kt,{icon:(0,A.jsx)($e().Z,{size:32}),name:y.name,label:y.label,tag:(0,A.jsx)("div",{style:u.pill,children:y.icon})}),Bt((()=>{f(e,y.name)}))]})}}function Bt(e){return(0,A.jsx)($().Z,{isBlue:!0,onClick:e,icon:At().R,children:(0,A.jsx)(r()._H,{id:"SpecificTeamMemberToAddRow.addMemberButton.text",defaultMessage:"Add"})})}var Dt=()=>n(404553),Lt=()=>n(536635);function Ot(e){let{sortType:t,onChangeSortType:n}=e;const i=(0,a().yK)((e=>({container:{width:"100%",display:"flex",justifyContent:"space-between",borderBottom:`1px solid ${e.regularDividerColor}`}})),[]),o=e=>e===t.column?t.sortedAscending?"ascending":"descending":"none",s=e=>{const i=e===t.column&&!t.sortedAscending;n({column:e,sortedAscending:i})};return(0,A.jsxs)("div",{style:i.container,children:[(0,A.jsx)(Ht,{title:(0,A.jsx)(r()._H,{id:"TeamPermissionsListHeader.nameColumn",defaultMessage:"Name"}),sortedType:o("name"),onClick:()=>s("name")}),(0,A.jsx)(Ht,{title:(0,A.jsx)(r()._H,{id:"TeamPermissionsListHeader.roleColumn",defaultMessage:"Role"}),sortedType:o("role"),onClick:()=>s("role")})]})}function Ht(e){let{sortedType:t,title:n,onClick:i}=e;const o=(0,a().yK)((e=>({button:{color:e.mediumTextColor,fontSize:12,padding:0},buttonHover:{background:"unset"},sortIcon:{width:14,height:14,marginRight:5,fill:e.mediumIconColor}})),[]);return(0,A.jsxs)($().Z,{style:o.button,hoveredStyle:o.buttonHover,onClick:i,children:["ascending"===t&&(0,Lt().Z)(o.sortIcon),"descending"===t&&(0,Dt().M)(o.sortIcon),n]})}function Vt(e){let{store:t}=e;const n=(0,o().O7)(),l=(0,a().yK)((e=>({container:{display:"block",overflow:"hidden"},membersHeader:{marginBottom:8},noResult:{fontSize:c().JB.UIRegular.desktop,color:e.mediumTextColor,marginTop:8},showMore:{marginBottom:24,width:"max-content"}})),[]),u=(0,r().YB)(),[p,f]=(0,i.useState)({column:"role",sortedAscending:!1}),y=(0,He().e)(t),v=(0,s().VK)((()=>t.getMemberInfoUsingSpaceMembers((0,We().Io)())??[]),[t]),x=(0,s().VK)((()=>h().default.state.currentSpaceStore),[]),b=(0,s().VK)((()=>h().default.state.currentUserStore),[]),{permissionRowInfos:S,numNotShown:M}=(0,s().VK)((()=>{const e=function(e){let{permissionRowInfos:t,memberFilterQuery:n,intl:i}=e;if(""===n)return t;return(0,Ee().ZP)(n,t,(e=>{const{type:t}=e;switch(t){case"group":return e.permissionGroup.name||"";case"user":const{userStore:n}=e;return n.getSearchName(i);default:(0,d().t1)(t)}}))}({permissionRowInfos:(0,m().tu)({currentUserStore:b,currentSpaceStore:x,teamStore:t,members:v}),memberFilterQuery:g().default.state.memberFilterQuery,intl:u}),n=function(e){let{permissionRowInfos:t,sortType:n,intl:i}=e;const{column:o,sortedAscending:s}=n,a={permissionRowInfos:t,sortedAscending:s};if("role"===o)return function(e){let{permissionRowInfos:t,sortedAscending:n}=e;const i=["owner","member","team_level_guest"],o=["group","user"];return[...t].sort(((e,t)=>{const n=e.memberInfo.entity_type,i=t.memberInfo.entity_type;return o.indexOf(n)-o.indexOf(i)})).sort(((e,t)=>{const o=e.memberInfo.type,s=t.memberInfo.type,a=i.indexOf(o)-i.indexOf(s);return n?-a:a}))}(a);if("name"===o)return function(e){let{permissionRowInfos:t,sortedAscending:n,intl:i}=e;return[...t].sort(((e,t)=>{const o=Ut(e,i)??"",s=Ut(t,i)??"";if(o===s)return 0;const a=o<s?-1:1;return n?-a:a}))}({...a,intl:i});(0,d().t1)(o)}({permissionRowInfos:e,sortType:p,intl:u}),i=g().default.state.limitMembers?n.slice(0,50):n;return{permissionRowInfos:i,numNotShown:e.length-i.length}}),[x,b,v,t,p,u]),j=(0,Ke().XJ)(ze().x.searchActions),C=(0,s().VK)((()=>g().default.state.memberFilterQuery),[]),[w]=(0,Ne().r5)((async()=>{if(!y||null==C||!C.trim().length||"resolved"!==j.status)return[];const e=j.value;return[...(await e.searchVisibleSpaceUsers({environment:n,query:C,membersOnly:!0})).map((e=>({type:"user",value:e}))),...e.searchSpaceGroups({query:C,intl:u}).map((e=>({type:"group",value:e})))]}),[y,C,j.status,j.value,n,u]),k=(0,s().VK)((()=>{if("resolved"!==w.status)return[];const e=new Set(S.map(Nt));return w.value.filter((t=>!e.has("user"===t.type?t.value.id:t.value.group_id))).slice(0,5)}),[w.status,w.value,S]),_=Boolean(null==C?void 0:C.trim().length),T=S.length>0;return(0,A.jsxs)("div",{style:l.container,children:[(0,A.jsx)(Et,{title:_?(0,A.jsx)(r()._H,{id:"TeamPermissionsList.search.inThisTeam",defaultMessage:"In this teamspace"}):(0,A.jsx)(Ot,{sortType:p,onChangeSortType:f}),rows:S,renderRow:e=>(0,A.jsx)(Tt,{store:t,...e})}),M>0&&(0,A.jsx)(Fe().Z,{style:l.showMore,onClick:()=>{g().default.update((e=>({...e,limitMembers:!1})))},children:(0,A.jsx)(r()._H,{defaultMessage:"Show {numNotShown} more",id:"teamPermissionSettings.member.showMore",values:{numNotShown:M}})}),k.length>0&&(0,A.jsx)(Et,{title:(0,A.jsx)(r()._H,{id:"TeamPermissionsList.search.notInTeam",defaultMessage:"Not in teamspace"}),rows:k,renderRow:e=>"user"===e.type?(0,A.jsx)(Zt,{teamStore:t,memberToAdd:e.value}):(0,A.jsx)(Zt,{teamStore:t,groupToAdd:e.value})}),!T&&0===k.length&&(0,A.jsx)("div",{style:l.noResult,children:(0,A.jsx)(r()._H,{id:"TeamPermissionsList.search.zeroState",defaultMessage:"No members or groups found"})})]})}function Ut(e,t){const{type:n}=e;if("user"===n){const{userStore:n}=e;return n.getDisplayName(t)}if("group"===n){const{permissionGroup:t}=e;return t.name}(0,d().t1)(n)}function Et(e){let{rows:t,renderRow:n,title:o}=e;const s=(0,a().yK)((e=>({membersList:{flexGrow:1,flexShrink:1,display:"flex",flexDirection:"column",width:"100%",marginBottom:12},memberDivider:{borderBottom:`1px solid ${e.regularDividerColor}`}})),[]);return t.length?(0,A.jsxs)(A.Fragment,{children:[o&&(0,A.jsx)(T().Z,{isSmall:!0,children:o}),(0,A.jsx)("div",{style:s.membersList,children:t.map(((e,t)=>(0,A.jsxs)(i.Fragment,{children:[t>0&&(0,A.jsx)("div",{style:s.memberDivider}),n(e)]},t)))})]}):null}function Nt(e){switch(e.type){case"user":return e.memberInfo.user_id;case"group":return e.memberInfo.group_id;default:(0,d().t1)(e)}}function Ft(e){let{teamStore:t}=e;const n=(0,a().yK)((()=>({content:{display:"grid",gridAutoFlow:"row",rowGap:6}})),[]);return(0,A.jsxs)("div",{style:n.content,children:[(0,A.jsx)(Ue,{teamStore:t}),(0,A.jsx)(Vt,{store:t})]})}var Kt=()=>n(890085);function zt(e){const{teamStore:t}=e,n=(0,o().O7)(),i=(0,r().YB)(),{teamGuestPermissionItem:l,teamPermissions:d}=(0,s().VK)((()=>({teamGuestPermissionItem:t.getTeamGuestsPermission(),teamPermissions:t.getPermissionItems()||[]})),[t]),c=O(t),u=(0,s().VK)((()=>[{role:"editor",disabledInfo:{isDisabled:!0,disabledMessage:i.formatMessage({id:"teamPermissionsSettings.teamspace.guest.disabledPermissionitem.description",defaultMessage:"Teamspace guests can't have full access."})}},{role:"read_and_write",disabledInfo:void 0},{role:"comment_only",disabledInfo:void 0},{role:"reader",disabledInfo:void 0}]),[i]),p=(0,a().yK)((e=>({button:{fontSize:12.5,marginRight:0,color:e.mediumTextColor}})),[]),m=l&&(0,A.jsx)(ft().ZP,{role:l.role,table:mt().e0,type:"explicit_team_guest_permission",upgradeButtonName:"team_permission_item",disabled:c,buttonStyle:p.button,availableRoleItems:u,onChange:async e=>{if(d.filter((t=>((0,ne().jg)(t)||(0,ne().hV)(t))&&(0,ie().xO)(e,t.role))).length>0){if(!(await(0,P().Bt)()))return}j().createAndCommit({userAction:"TeamGuestsPermissionRow.permissionComponent",environment:n,canUndo:!0,perform:i=>{B().$J({environment:n,teamStore:t,newRole:e,transaction:i,permissionsToClear:[]})}})}}),g=(0,s().VK)((()=>t.getName()),[t]),f=(0,s().VK)((()=>t.getIcon()),[t]),h=f&&Kt().V2(f.icon)?Kt().mk(f.icon):"gray",y=f?{...f,icon:`/icons/user-circle_${h}.svg`}:void 0,v=(0,A.jsx)(N().p,{disabled:!0,store:t,size:F().Kt,icon:y});return m?(0,A.jsx)(_t,{permissionRoleSelectComponent:m,iconComponent:v,name:Wt(g)}):null}function Wt(e){return e?(0,A.jsx)(r()._H,{defaultMessage:"Teamspace guests",id:"TeamMembersTopSection.permissionItem.guest.defaultAccessTeamSpaceName",values:{teamName:e}}):(0,A.jsx)(r()._H,{defaultMessage:"Teamspace guests",id:"TeamMembersTopSection.permissionItem.guest.defaultAccessWithoutTeamspaceName"})}function qt(e){const{teamStore:t}=e,n=(0,o().O7)(),i=(0,a().Fg)(),l=(0,r().YB)(),{teamPermissionItem:d,teamPermissions:c}=(0,s().VK)((()=>({teamPermissionItem:t.getTeamPermission(),teamPermissions:t.getPermissionItems()||[]})),[t]),u=O(t),p=(0,s().VK)((()=>{var e;const n=null===(e=t.getPermissionItems())||void 0===e?void 0:e.find((e=>"space_permission"===e.type)),i=l.formatMessage({id:"teamPermissionsSettings.teamspace.disabledPermissionitem.description",defaultMessage:"Teamspace members can't have lower permissions than workspace members"});function o(e){return n&&e!==n.role&&(0,ie().nl)(e,n.role)===n.role&&!t.isDefault()?{role:e,disabledInfo:{isDisabled:!0,disabledMessage:i}}:{role:e,disabledInfo:void 0}}return[o("editor"),o("read_and_write"),o("comment_only"),o("reader")]}),[l,t]),m=d&&(0,A.jsx)(ft().ZP,{role:d.role,table:mt().e0,type:(0,ne().zU)(d)?"explicit_team_permission":"team_permission",upgradeButtonName:"team_permission_item",disabled:u,buttonStyle:{fontSize:12.5,marginRight:0,color:i.mediumTextColor},availableRoleItems:p,onChange:async e=>{const i=c.filter((t=>((0,ne().jg)(t)||(0,ne().hV)(t))&&(0,ie().xO)(e,t.role)));if(i.length>0){if(!(await(0,P().Bt)()))return}j().createAndCommit({userAction:"TeamMembersPermissionRow.permissionComponent",environment:n,canUndo:!0,perform:o=>{B().xI({environment:n,teamStore:t,newRole:e,transaction:o,permissionsToClear:i})}})}}),{teamName:g}=(0,s().VK)((()=>({teamName:t.getName()})),[t]),f=(0,A.jsx)(N().p,{disabled:!0,store:t,size:F().Kt});return(0,A.jsx)(_t,{permissionRoleSelectComponent:m,iconComponent:f,name:Gt(g)})}function Gt(e){return e?(0,A.jsx)(r()._H,{defaultMessage:"Teamspace members",id:"TeamMembersTopSection.permissionItem.defaultAccessTeamSpaceName",values:{teamName:e}}):(0,A.jsx)(r()._H,{defaultMessage:"Teamspace members",id:"TeamMembersTopSection.permissionItem.defaultAccessWithoutTeamspaceName"})}var Yt=()=>n(989478),$t=()=>n(634015);function Xt(e){const{teamStore:t,teamOwnerIds:n}=e,i=(0,a().Fg)(),o=(0,s().VK)((()=>t.getName()),[t]),l=(0,s().VK)((()=>t.getTeamOwnerPermission()),[t]),d=(0,s().VK)((()=>h().default.state.currentUserStore),[]),c=(0,s().VK)((()=>d?n.map((e=>y().U6.createChildStore(d,{table:Yt().KJ,id:e}))):[]),[d,n]);return(0,A.jsx)(_t,{tooltip:(0,A.jsx)(r()._H,{id:"TeamOwnersPermissionRow.teamspaceOwnersRowTooltip",defaultMessage:"Teamspace owners have full access to teamspace pages by default"}),permissionRoleSelectComponent:(0,A.jsx)(ft().ZP,{role:"editor",table:mt().e0,type:l&&(0,ne().LW)(l)?"explicit_team_owner_permission":"team_owner_permission",upgradeButtonName:"team_owner_permission_item",disabled:!0,buttonStyle:{fontSize:12.5,color:i.mediumTextColor,marginRight:0},availableRoleItems:[]}),iconComponent:(0,A.jsx)($t().n,{teamStore:t,ownerStores:c,isSmall:!0}),name:Qt(o)})}function Qt(e){return e?(0,A.jsx)(r()._H,{defaultMessage:"Teamspace owners",id:"TeamOwnersPermissionRow.permissionItem.teamspaceOwnersAccessToggleName",values:{teamName:e}}):(0,A.jsx)(r()._H,{defaultMessage:"Teamspace owners",id:"TeamOwnersPermissionRow.permissionItem.teamspaceOwnersAccessToggleNameWithoutTeamName"})}var Jt=()=>n(784234),en=()=>n(168441);function tn(e){const{teamStore:t}=e,n=(0,o().O7)(),i=(0,s().VK)((()=>h().default.state.currentSpaceStore),[]),{iconComponent:a,spaceName:r}=(0,s().VK)((()=>{if(!i)return{iconComponent:void 0,spaceName:void 0};const e=(0,K().rn)(n,i);return{iconComponent:(0,A.jsx)(N().p,{disabled:!0,store:i,size:F().Kt}),spaceName:e}}),[i,n]);return(0,A.jsx)(_t,{permissionRoleSelectComponent:(0,A.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:(0,A.jsx)(on,{teamStore:t})}),iconComponent:a,name:nn(r)})}function nn(e){return e?(0,A.jsx)(r()._H,{defaultMessage:"Everyone else in {spaceName}",id:"TeamMembersTopSection.permissionItem.defaultAccessSpaceName",values:{spaceName:e}}):(0,A.jsx)(r()._H,{defaultMessage:"Everyone else in the workspace",id:"TeamMembersTopSection.permissionItem.defaultAccessWithoutSpaceName"})}function on(e){const{teamStore:t}=e,n=(0,o().O7)(),i=(0,a().Fg)(),d=(0,s().VK)((()=>t.getSpacePermission()||{type:"space_permission",role:"none"}),[t]),c=O(t),u=(0,s().VK)((()=>{const e=t.getSettingsStore().getValue();if(e)return le({id:t.id,permissions:t.getPermissionItems(),settings:e,is_default:t.isDefault()})}),[t],{useDeepEqual:!0});if(!u)return null;const p=u.permissionItemRoleOptions.spacePermission;if(1===p.length&&"none"===p[0])return(0,A.jsx)(_().Z,{renderTooltip:()=>(0,A.jsx)(r()._H,{id:"teamPermissionsSettings.privateTeam.noAccessTooltip",defaultMessage:"Private teamspaces can only be accessed or joined by invitation"}),render:e=>(0,A.jsxs)("div",{style:{display:"flex",alignItems:"center",maxWidth:170},...e,children:[(0,en().Q)({width:14,height:14,fill:i.timelineRed,marginRight:4}),(0,A.jsx)("div",{style:{fontSize:12.5,color:i.timelineRed,marginRight:8},children:(0,A.jsx)(r()._H,{id:"teamPermissionsSettings.privateTeam.noAccessLabel",defaultMessage:"No access • Invite only"})})]})});{const e=l().MR(p,(e=>-ne().xm[e])).map((e=>({role:e})));return(0,A.jsx)(ft().ZP,{role:d.role,table:mt().e0,type:"space_permission",upgradeButtonName:"space_permission_item",disabled:c||1===p.length,buttonStyle:{fontSize:12.5,marginRight:0,color:i.mediumTextColor},availableRoleItems:e,onChange:e=>{const i={...d,role:e};j().createAndCommit({userAction:"TeamSpacePermissionRow.permissionComponent",environment:n,canUndo:!0,perform:e=>{Jt().$G({environment:n,store:t,permissionItems:[i],transaction:e})}})}})}}function sn(e){let{teamStore:t}=e;const n=(0,s().VK)((()=>t.isDefault()),[t]),i=(0,s().VK)((()=>t.getOwnerUserIds()),[t]),o=(0,s().VK)((()=>{const e=h().default.state.currentSpaceStore;if(!e)return!1;return!(null==e?void 0:e.getDisableTeamGuests())&&(!n&&(0,ot().F$)())}),[n]),r=(0,a().yK)((()=>({container:{marginLeft:15,marginRight:7,paddingBottom:4,paddingTop:4}})),[]);return(0,A.jsxs)("div",{style:r.container,children:[(0,A.jsx)(Xt,{teamStore:t,teamOwnerIds:i},"0"),(0,A.jsx)(qt,{teamStore:t},"1"),o&&(0,A.jsx)(zt,{teamStore:t},"2"),!n&&(0,A.jsx)(tn,{teamStore:t},"3")]})}var an=()=>n(53484);function rn(e){let{teamStore:t}=e;const n=(0,a().yK)((()=>({spacer:{width:"100%",height:20},heading:{marginBottom:10}})),[]);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(ln,{teamStore:t}),(0,A.jsx)("div",{style:n.spacer}),(0,A.jsx)(an().z,{title:(0,A.jsx)(r()._H,{id:"TeamSettingsMembers.memberSettings.membersTitle",defaultMessage:"Members"}),style:n.heading}),(0,A.jsx)(Ft,{teamStore:t})]})}function ln(e){let{teamStore:t}=e;const n=(0,o().O7)(),l=(0,s().VK)((()=>t.getName()),[t]),d=(0,a().yK)((()=>({learnMoreLinkContainer:{marginTop:15,marginBottom:15},teamSettingsListItems:{padding:0,margin:0},accessButton:{border:"none"}})),[]),c=(0,i.useCallback)(((e,i)=>{B().Ju({environment:n,accessLevel:e,isDefault:i,store:t,teamName:l,from:"sidebar_team_modal"})}),[n,t,l]),u=(0,s().VK)((()=>t.getTeamAccessLevel()),[t]),p=[(0,A.jsx)(z()._,{teamStore:t,currentAccessLevel:u,onChange:c,style:d.accessButton},"visibility"),(0,A.jsx)(sn,{teamStore:t},"permissions")];return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(F().Ph,{title:(0,A.jsx)(r()._H,{id:"TeamSettingsMembers.memberSettings.permissionsTitle",defaultMessage:"Permissions"}),rows:p,itemStyle:d.teamSettingsListItems}),(0,A.jsx)(E().Z,{helpCenterLocation:"settingsAndPermissions",analyticsFrom:"teams_learn_more_team_settings_permissions",message:(0,A.jsx)(r()._H,{id:"teamSettingsPermissions.learnMore",defaultMessage:"Learn about teamspace permissions"}),containerStyle:d.learnMoreLinkContainer})]})}var dn=()=>n(983135),cn=()=>n(94967),un=()=>n(708518),pn=()=>n(384241),mn=()=>n(842574),gn=()=>n(239444),fn=()=>n(167830),hn=()=>n(539245),yn=()=>n(946563);function vn(e){return(0,A.jsx)(yn().Z,{...e,children:(0,A.jsx)(r()._H,{id:"sidebarTeamModalTab.unownedBadge",defaultMessage:"Unowned"})})}function xn(e){const{teamStore:t}=e,n=(0,s().VK)((()=>g().default.state.tab),[]);if(void 0===n)return null;switch(n){case g().a.General:return(0,A.jsx)(Ae,{teamStore:t});case g().a.Members:return(0,A.jsx)(rn,{teamStore:t});case g().a.Security:return(0,A.jsx)(we,{teamStore:t});default:(0,d().t1)(n)}}function bn(e){const{userId:t,currentSpaceStore:n}=e,{userStore:i,isDefined:o}=(0,s().VK)((()=>{const e=y().U6.createChildStore(n,{table:"notion_user",id:t,spaceId:n.id});return{userStore:e,isDefined:e.isDefined()}}),[n,t]);return o?(0,A.jsx)(gn().Z,{avatarShouldShowShadow:!0,userStore:i,style:{paddingRight:6,minHeight:34,lineHeight:1.2,fontSize:14,width:"100%"},avatarSize:24}):null}function Sn(e){const{userIds:t,label:n,hasMarginTop:i}=e,o=(0,s().VK)((()=>h().default.state.currentSpaceStore),[]);return o?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(fn().Z,{hasMarginTop:i,children:n}),t.map((e=>(0,A.jsx)(bn,{userId:e,currentSpaceStore:o},e)))]}):null}function Mn(){const e=(0,o().O7)(),t=(0,s().VK)((()=>h().default.state.currentSpaceStore),[]),n=(0,s().VK)((()=>h().default.state.currentSpaceViewStore),[]),i=(0,o().Fy)(),y=(0,a().yK)((e=>({modal:{width:i.isMobile?"auto":630,height:i.isMobile?"auto":640,maxWidth:"calc(100vw - 100px)",maxHeight:"calc(100vh - 100px)",borderRadius:5,overflow:"auto"},modalWrap:{userSelect:"none",height:"100%"},innerWrap:{width:"100%",height:"100%",display:"flex",flexDirection:"column",paddingTop:20},header:{display:"flex",alignItems:"center",flexGrow:0,flexShrink:0,margin:"0px 36px"},tabBar:{display:"flex",width:void 0,flexGrow:0,flexShrink:0,margin:"0px 36px 20px"},scroller:{flexGrow:1},contentWrap:{margin:"0px 36px"},lockIcon:{width:16,marginLeft:6,marginBottom:1,fill:e.mediumIconColor},icon:{marginRight:8,fontWeight:c().Ue.medium},unownedPill:{marginLeft:6,height:17},unownedPillInner:{display:"flex",height:"100%",alignItems:"center",color:e.regularTextColor,fontWeight:c().Ue.regular,textTransform:"unset",fontSize:11}})),[i.isMobile]),{open:v,tab:S,teamStore:M}=(0,s().VK)((()=>{const{open:e,tab:t}=g().default.state;return{open:e,tab:t,teamStore:g().default.getTeamStore()}}),[]),j=(0,s().VK)((()=>null==M?void 0:M.getSettings()),[M]),C=(0,L().q)(M);if(!t||!n||!M)return null;const w=[g().a.General,g().a.Members,g().a.Security];return(0,A.jsx)(un().Z,{open:v,innerStyle:y.modal,onDismiss:()=>{g().default.reset()},render:()=>v?(0,A.jsx)("div",{className:p().rIj,style:{height:"100%"},children:(0,A.jsx)("div",{style:y.modalWrap,children:(0,A.jsx)(cn().Z,{debugName:"SidebarTeamModal",capture:!0,onBackspace:l().yR,onLeft:l().yR,onRight:l().yR,onSelectAll:l().yR,onRedo:l().yR,onUndo:l().yR,onCut:l().yR,onCopy:l().yR,onPaste:l().yR,onKeypress:l().yR,onDelete:l().yR,onTab:l().yR,children:(0,A.jsxs)("div",{style:y.innerWrap,children:[(0,A.jsxs)("div",{style:y.header,children:[(0,A.jsx)(N().p,{disabled:!0,store:M,size:24,style:y.icon}),(0,A.jsx)(pn().Z,{store:M,style:{fontSize:16,fontWeight:c().Ue.semibold}}),(0,m().C2)(j)&&(0,A.jsx)(b().Z,{iconStyle:y.lockIcon}),(0,m().Hu)({membership:M.getRawMembership()})&&(0,A.jsx)("div",{style:{gap:5,display:"flex"},children:(0,A.jsx)(vn,{desktopStyle:y.unownedPill,mobileStyle:y.unownedPill,innerStyle:y.unownedPillInner})}),(0,A.jsx)("div",{style:{flexGrow:1}}),(0,A.jsx)(x().M,{teamStore:M,onLeavingTeam:()=>g().default.reset(),from:"sidebar_team_modal",navigateToTeamHomeOnJoin:!1})]}),(0,A.jsx)(hn().Z,{tabs:w.map((e=>function(e,t){switch(e){case g().a.General:return(0,A.jsx)(r()._H,{id:"sidebarTeamModalTab.option.general",defaultMessage:"General"});case g().a.Members:return(0,A.jsx)(jn,{teamStore:t});case g().a.Security:return(0,A.jsx)(r()._H,{id:"sidebarTeamModalTab.option.security",defaultMessage:"Security"});default:(0,d().t1)(e)}}(e,M))),selectedIndex:(0,d().$K)(S)?w.indexOf(S):1,onChange:t=>{v&&(u().rF(e,{store:M,tab_old_value:S??g().a.General,tab_new_value:w[t]}),g().default.update((e=>e.open?{...e,tab:w[t]}:e)))},tabStyle:{marginLeft:-8},style:y.tabBar,tabTitleStyle:{marginLeft:8,marginRight:8}}),(0,A.jsx)(mn().Z,{type:f().Z.Y,style:y.scroller,children:(0,A.jsx)("div",{style:y.contentWrap,children:(0,A.jsx)(xn,{currentSpaceStore:t,teamStore:M,userIsTeamOwner:C})})})]})})})}):null})}function jn(e){let{teamStore:t}=e;const n=(0,dn().K)(t),i=(0,a().Fg)();return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(r()._H,{id:"sidebarTeamModalTab.option.members",defaultMessage:"Members"}),(0,A.jsx)("span",{children:" "}),(0,A.jsx)("div",{style:{color:i.lightTextColor},children:n})]})}function Cn(e){let{title:t,caption:n,secondCaption:i,on:s,disabled:r,tooltip:l,style:d,switcherStyle:c,onChange:u,shouldTriggerUpsell:p,upsellTier:m,isLocked:g,lockedTooltip:f}=e;const h=(0,o().O7)(),y=(0,a().yK)((()=>({root:{display:"flex",alignItems:"center",width:"100%",marginTop:0,marginBottom:0,cursor:p?"pointer":void 0,...d},title:{fontSize:14,marginRight:8,flexGrow:1},switcherWrap:{marginTop:5,marginRight:18,...c}})),[p,d,c]);return(0,A.jsxs)("div",{style:y.root,onClick:()=>{if(p)return v().y(h,{from:"team_security_settings",upsell:{type:"product",product:m,limit:{type:"none"}},dontOpenPlansOnCancel:!0})},children:[(0,A.jsxs)("div",{style:y.title,children:[t,n&&(0,A.jsx)(T().Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"95%"},children:n}),i&&(0,A.jsx)(T().Z,{isSmall:!0,children:i})]}),(0,A.jsx)("div",{style:y.switcherWrap,children:(0,A.jsx)(_().Z,{disableTooltip:!l,renderTooltip:()=>l,render:e=>(0,A.jsx)("div",{...e,children:(0,A.jsx)(he().Z,{on:s,disabled:r,onClick:u,isLocked:g,lockedTooltip:f})})})})]})}},708212:(e,t,n)=>{n.r(t),n.d(t,{SpaceSettings:()=>Dh});n(821057);var i=n(667294),o=()=>n(219727),s=()=>n(732811),a=()=>n(142735),r=()=>n(846550),l=()=>n(956057),d=()=>n(255393),c=()=>n(629719),u=()=>n(122792),p=()=>n(788860),m=()=>n(513670),g=()=>n(707513),f=()=>n(509417),h=()=>n(513461),y=()=>n(286310),v=()=>n(155055),x=()=>n(308186),b=()=>n(454393),S=()=>n(752127),M=()=>n(224597),j=()=>n(390054),C=()=>n(261930),w=()=>n(269299),k=()=>n(348141),_=(n(122556),n(582845),n(250570),n(533019),n(721473),n(788208),n(22624),n(267602),n(30005),()=>n(874459)),T=()=>n(431595),I=()=>n(741633),P=()=>n(586573),A=()=>n(696056),R=()=>n(989478),Z=()=>n(824462),B=()=>n(443269),D=()=>n(527278),L=()=>n(828946),O=()=>n(582665),H=()=>n(263184);class V extends H().default{getInitialState(){return{spaceId:void 0,allUserIds:new Set,allBotIds:new Set,removedUserIds:new Set,removedBotIds:new Set}}isUserOrBotRemoved(e){return Boolean(e&&(this.state.removedUserIds.has(e)||this.state.removedBotIds.has(e)))}}const U=new V;class E extends H().default{getInitialState(){return{cachedResponses:{}}}getCursor(e,t,n){if(n<=1||this.state.spaceId!==e)return;const i=(0,O().r)(t);if(this.state.filterStr!==i)return;const o=this.state.cachedResponses[n-1];return"success"===o.status?null==o?void 0:o.nextCursor:void 0}startLoading(e,t){this.updateResultHelper(e,t,{status:"loading"})}updateLoadedResult(e,t,n){this.updateResultHelper(e,t,{...n,status:"success",loadedAt:Date.now()})}updateError(e,t){this.updateResultHelper(e,t,{status:"error"})}updateResultHelper(e,t,n){const i=(0,O().r)(t);1!==t.pageNum&&this.state.spaceId===e&&this.state.filterStr===i?this.setState({spaceId:e,filterStr:i,cachedResponses:{...this.state.cachedResponses,[t.pageNum]:{...n}}}):this.setState({spaceId:e,filterStr:i,cachedResponses:{[t.pageNum||1]:{...n}}})}}const N=new E,F=(0,p().vU)({loadCurrentAuditLogError:{id:"auditlog.error.loadCurrentAuditLogError",defaultMessage:"Failed to load audit logs"}});async function K(e){const{environment:t,spaceId:n}=e,i=await Z().callApi({eventName:"getHistoricalAuditLogUsers",environment:t,data:{spaceId:n}});return"success"!==i.type?[]:i.data.results}async function z(e){const{environment:t,spaceId:n}=e;if(U.getState().spaceId!==n&&U.reset(),!n)return;const i=await L().x.searchActions.load(),[o,s]=await Promise.all([i.searchSpaceActorIds({environment:t,membersOnly:!1}),K({environment:t,spaceId:n})]),a={spaceId:n,allUserIds:new Set,allBotIds:new Set,removedUserIds:new Set,removedBotIds:new Set};o.userIds.forEach((e=>{a.allUserIds.add(e)})),o.botIds.forEach((e=>{a.allBotIds.add(e)})),s.forEach((e=>{var t;(t=e.actorId)!==A()._H.id&&t!==R().s$.id&&t!==R().el.id||a.allUserIds.has(e.actorId)?e.actorType!==R().KJ||a.allUserIds.has(e.actorId)?e.actorType!==A().cZ||a.allBotIds.has(e.actorId)||(a.allBotIds.add(e.actorId),a.removedBotIds.add(e.actorId)):(a.allUserIds.add(e.actorId),a.removedUserIds.add(e.actorId)):a.allUserIds.add(e.actorId)})),U.setState(a)}var W=()=>n(998411),q=()=>n(630029),G=()=>n(559333),Y=(n(653476),n(241792),()=>n(816512)),$=()=>n(946563),X=()=>n(523516),Q=()=>n(421887),J=()=>n(826955),ee=()=>n(940125),te=n(785893);const ne=(0,p().XN)((function(e){const{parentStore:t,auditLogHistoricalUserStore:n,selectedActors:s,onChange:a,intl:r}=e,l=(0,o().O7)(),[d,c]=(0,i.useState)(new Set(s.map(ee().eW))),u=(0,te.jsx)(p()._H,{id:"auditlogActorFilter.title",defaultMessage:"User"}),m=(0,i.useCallback)((()=>{const e=Array.from(d).map(ee().Ij).filter((e=>void 0!==e));a(e)}),[d,a]),g=(0,i.useCallback)((()=>{const e=s.map(ee().eW);c(new Set(e))}),[s]),f=(0,i.useCallback)((e=>{"applyButton"!==e?g():m()}),[m,g]);return(0,te.jsx)(q().Z,{mode:q().z.Pill,title:u,icon:Q().f,iconStyles:{marginRight:2},items:Array.from(d),hasItemsSelected:(null==s?void 0:s.length)>0,onChange:e=>{c(new Set(e))},renderFooter:!0,allowApplyBatchSelection:!0,keepInputOnItemConfirm:!0,onMenuDismiss:f,labelText:{title:u,tokenInputPlaceholder:r.formatMessage({defaultMessage:"Search user...",id:"auditlogActorFilter.searchActor.placeholder"}),resultSectionTitle:r.formatMessage({defaultMessage:"Select users",id:"auditlogActorFilter.searchActor.resultsTitle"}),componentDebugName:"SearchActorFilter"},performRequest:e=>async function(e){let{args:t,auditLogHistoricalUserStore:n,selectedActors:i,environment:o}=e;const{query:s}=t,{allUserIds:a,allBotIds:r}=n.getState(),l=100,d=await L().x.searchActions.load(),c=await d.searchActorsById({environment:o,query:s,userIds:[...a],botIds:[...r]}),u=[...c.users.map((e=>`notion_user:${e.id}`)),...c.bots.map((e=>`bot:${e.id}`))];if(s.length>0)return u.slice(0,l);const p=i.map(ee().eW),m=new Set(p),g=u.filter((e=>!m.has(e)));return[...p,...g].slice(0,Math.max(p.length,l))}({args:e,auditLogHistoricalUserStore:n,selectedActors:s,environment:l}),renderResultMenuItem:(e,i)=>{var o;const s=function(e,t){const n=(0,ee().Ij)(e);if(!n)return(0,Y().m3)(void 0);if("notion_user"===n.actorType)return(0,Y().m3)(function(e,t){const n=J().U6.createChildStore(t,{table:R().KJ,id:e});return n.getModel()}(n.actorId,t));return(0,Y().ON)(function(e,t){const n=J().Qx.createChildStore(t,{table:A().cZ,id:e});return n.getModel()}(n.actorId,t))}(e,t);return(0,te.jsx)(ie,{...i,item:e,tempActorSelections:d,showRemovedBadge:n.isUserOrBotRemoved(null===(o=s.asActor)||void 0===o?void 0:o.id),actor:s,intl:r})},renderToken:()=>null,renderFilter:()=>null,renderItemForSummary:()=>null,addItemLabel:null,focused:!1})})),ie=(0,i.forwardRef)(((e,t)=>{const{item:n,intl:i,tempActorSelections:o,showRemovedBadge:s,actor:r}=e,l=(0,a().VK)((()=>(0,Y().$4)(i,r)),[i,r]);return(0,te.jsx)(X().Z,{...e,ref:t,actor:r,useEmailAsTooltip:!0,checkState:o.has(n),userTitle:(0,te.jsxs)("div",{style:{display:"flex",gap:4},children:[l,s&&(0,te.jsx)($().Z,{children:(0,te.jsx)(p()._H,{id:"auditlogActorFilter.removed_user",defaultMessage:"Removed"})})]})})}));ie.displayName="ResultMenuItem";const oe=(0,p().vU)({auditLogNotSupportedDateRangeError:{id:"auditLog.dateTimeRangeMenu.notSupportedDateRange",defaultMessage:"Audit Log retains events from the past year."}});const se=(0,p().XN)((function(e){const{spaceStore:t,intl:i}=e,[o,s]=(0,a().AF)(O().Z),[r,l,d]=(0,a().AF)(U),c=(0,a().qz)(void 0,G().X),u=(0,a().qz)(void 0,G().X),m=(0,_().Uu)((0,W().r)());return(0,te.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:4},children:[(0,te.jsx)(n(777539).Z,{mode:q().z.Pill,focused:!1,title:(0,te.jsx)(p()._H,{id:"auditlogDateFilter.title",defaultMessage:"Date"}),icon:n(155350).C,value:o.timeRange,showButtons:"footer",onChange:e=>{s({...o,timeRange:e,pageNum:1})},minDate:m.minus({years:1}),maxDate:m.endOf("day"),customErrorMessage:e=>{if(e===n(544590).B.NOT_SUPPORTED)return i.formatMessage(oe.auditLogNotSupportedDateRangeError)}}),(0,te.jsx)(ne,{parentStore:t,auditLogHistoricalUserStore:d,selectedActors:o.actors,onChange:e=>{s({...o,actors:e,pageNum:1})}}),(0,te.jsx)(n(242716).Z,{lastSelectionStore:c,componentStore:u,onChange:e=>{s({...o,actions:e,pageNum:1})}})]})}));var ae=()=>n(868614);function re(){return(0,te.jsx)(ae().Z,{large:!0,style:{marginBottom:0,paddingBottom:0,fontSize:16,fontWeight:g().Ue.medium,display:"flex",justifyContent:"space-between"},children:(0,te.jsx)("div",{style:{gap:8,display:"flex"},children:(0,te.jsx)(p()._H,{id:"auditlog.title",defaultMessage:"Audit log"})})})}var le=()=>n(775377),de=()=>n(959137),ce=()=>n(285473),ue=()=>n(154186),pe=()=>n(654133),me=()=>n(67961),ge=()=>n(286338),fe=()=>n(325107),he=()=>n(998901),ye=()=>n(749826),ve=()=>n(421736);function xe(e){const{auditLogEntry:t,spaceStore:n,id:o}=e,s=(0,p().YB)(),l=(0,a().VK)((()=>{if(t.actor.actorType===R().KJ){const e=J().U6.createChildStore(n,{id:t.actor.actorId,table:R().KJ});if(e.isDefined()&&!e.getIsDeleted())return{actorStore:e};if(t.actor.email)return{avatar:{name:t.actor.name,email:t.actor.email}}}else if(t.actor.actorType===A().cZ){const e=J().Qx.createChildStore(n,{id:t.actor.actorId,table:A().cZ});return e.isDefined()?{actorStore:e}:{avatar:{name:t.actor.name,email:t.actor.actorId}}}return{actorStore:void 0}}),[n,t]),d=(0,a().VK)((()=>{var e,t;if(l)return(null===(e=l.actorStore)||void 0===e?void 0:e.getDisplayName(s))??(null===(t=l.avatar)||void 0===t?void 0:t.name)}),[l,s]),c=(0,a().VK)((()=>{var e,t;if(l)return(null===(e=l.actorStore)||void 0===e?void 0:e.getDetail())??(null===(t=l.avatar)||void 0===t?void 0:t.email)}),[l]),u=(0,i.useMemo)((()=>{var e;if(t.actor.actorType===R().KJ)return(0,ve().K)(null===(e=t.actor.meta)||void 0===e?void 0:e.spaceRole)}),[t]),m=(0,r().yK)((()=>({container:{display:"block",width:"100%",paddingBlock:6}})),[]),g=(0,i.createRef)();return(0,te.jsx)(pe().Z,{disableTooltip:be(g.current),renderTooltip:()=>(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)("div",{children:d}),(0,te.jsx)("div",{children:c})]}),placement:he().Placement.Bottom,render:e=>(0,te.jsx)("div",{...e,style:m.container,children:(0,te.jsx)(ve().Z,{id:o,...l,spaceRole:u})})})}function be(e){return!!e&&(e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)}var Se=()=>n(997218);const Me={id:"actor",headerTitle:(0,te.jsx)(p()._H,{id:"auditlog.logTable.userColumn.header",defaultMessage:"User"}),renderCell:e=>{const t=`actor-${e.auditLogEntry.actionName}-${e.id}`;return(0,te.jsx)(xe,{spaceStore:e.spaceStore,auditLogEntry:e.auditLogEntry,id:t})},widthData:{width:30},sortable:!1},je={id:"event",headerTitle:(0,te.jsx)(p()._H,{id:"auditlog.logTable.eventColumn.header",defaultMessage:"Event"}),renderCell:e=>{const t=`event-${e.auditLogEntry.actionName}-${e.id}`;return(0,te.jsx)(n(664357).p,{auditLogEntry:e.auditLogEntry,id:t})},widthData:{width:40},sortable:!1},Ce={id:"dateTimeAndMenu",headerTitle:(0,te.jsx)(p()._H,{id:"auditlog.logTable.dateColumn.header",defaultMessage:"Date"}),renderCell:e=>{const t=`actor-${e.auditLogEntry.actionName}-${e.id}`,i=`event-${e.auditLogEntry.actionName}-${e.id}`,o=`datetime-${e.auditLogEntry.actionName}-${e.id}`;return(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(n(857411).t,{auditLogEntry:e.auditLogEntry,id:o}),(0,te.jsx)(_e,{auditLogEntry:e.auditLogEntry,ids:{actorColumnId:t,eventColumnId:i,dateTimeColumnId:o}})]})},widthData:{width:25},sortable:!0},we=[Me,je,Ce];function ke(){return(0,te.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"40vh",flexDirection:"column"},children:[(0,te.jsx)("div",{children:(0,te.jsx)(me().Z,{isSecondaryColor:!0,style:{fontWeight:500},children:(0,te.jsx)(p()._H,{id:"auditlog.logTable.noResults",defaultMessage:"No results"})})}),(0,te.jsx)(me().Z,{isSecondaryColor:!0,children:(0,te.jsx)(p()._H,{id:"auditlog.logTable.noResultsHelpText",defaultMessage:"Try different filters. Logs may take some time to show up."})})]})}function _e(e){const{auditLogEntry:t,ids:n}=e,i=(0,a().VK)((()=>(0,ge().F$)()),[]),s=(0,a().VK)((()=>ye().default.checkGate({gateName:"audit_log_event_name_column"})?le().pz:le().C9),[]),l=(0,p().YB)(),d=(0,o().O7)(),c=(0,r().Fg)(),u=(0,r().yK)((e=>({container:{display:"flex",alignItems:"center",justifyContent:"flex-end",width:"100%"},button:{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:28,borderRadius:6}})),[]);return(0,te.jsx)(pe().Z,{delayThreshold:80,placement:he().Placement.Bottom,render:e=>(0,te.jsx)("div",{style:u.container,...e,children:(0,te.jsx)(ue().Z,{style:u.button,onClick:async()=>{const e=await de().F.clipboardActions.load();var o;e.copyString({environment:d,stringValue:(0,le().eA)({auditLogEntry:t,intl:l,getAuditLogEventText:(o=n.eventColumnId,e=>{var t;return null===(t=document.getElementById(o))||void 0===t?void 0:t.textContent}),isTeamGuestsEnabled:i,csvColumnNames:s}),copiedMessage:e.clipboardMessages.copiedToClipboard})},children:(0,fe().U)({width:16,height:16,fill:c.mediumIconColor})})}),renderTooltip:()=>(0,te.jsx)(p()._H,{id:"AuditLogSettings.copyAuditLogEvent",defaultMessage:"Copy row"})})}const Te=(0,p().XN)((function(e){const{searchResponse:t,spaceStore:n}=e,[o,s]=(0,a().AF)(O().Z),l=t.results||[],d=t.hasMoreResults,c=Boolean(l.length),u=e=>{const t={...o,pageNum:e};s(t)},m=(0,r().yK)((e=>(0,ce().bE)({columnRenderInfo:we,theme:e,containerMarginTop:0})),[]),g=l.map(((e,t)=>({id:t.toString(),auditLogEntry:e,spaceStore:n,isClickable:!1}))),f=(0,i.useCallback)((()=>{const e=o.sortOrder===P().NQ.CreatedOldest?P().NQ.CreatedNewest:P().NQ.CreatedOldest;s({...o,sortOrder:e,pageNum:1})}),[o,s]),h=(0,i.useMemo)((()=>({column:Ce,sortAscending:o.sortOrder===P().NQ.CreatedOldest})),[o]);return(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(ce().Dp,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:we,rows:g,sortState:h,onSortStateChanged:f,renderNoRowsComponent:ke,styles:m}),c?(0,te.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:10},children:[(0,te.jsx)(Se().v,{onClick:()=>{u(o.pageNum-1)},disabled:1===o.pageNum,children:(0,te.jsx)(p()._H,{id:"auditlog.logTable.previousPage",defaultMessage:"Previous"})}),(0,te.jsx)(Se().v,{disabled:!d,onClick:()=>{u(o.pageNum+1)},children:(0,te.jsx)(p()._H,{id:"auditlog.logTable.nextPage",defaultMessage:"Next"})})]}):null]})}));const Ie=(0,p().XN)((function(e){const{spaceStore:t}=e,s=(0,o().O7)(),r=null==t?void 0:t.id,[l]=(0,a().AF)(N),[d]=(0,a().AF)(O().Z),c=(0,O().r)(d)!==l.filterStr?void 0:l.cachedResponses[d.pageNum];return(0,i.useEffect)((()=>{r&&async function(e){var t,n;const{environment:i,spaceId:o}=e,s=O().Z.getState();N.startLoading(o,s);const{sortOrder:a,pageSize:r,pageNum:l}=s,d={spaceId:o,limit:r,cursor:N.getCursor(o,s,l),filters:{timeRange:{starting:s.timeRange.starting?_().OQ.toUnixMs(s.timeRange.starting):void 0,ending:s.timeRange.ending?_().OQ.toUnixMs(s.timeRange.ending):void 0},...(null===(t=s.actors)||void 0===t?void 0:t.length)>0?{actors:s.actors}:void 0,...(null===(n=s.actions)||void 0===n?void 0:n.length)>0?{actions:s.actions}:void 0},sort:a||P().NQ.CreatedNewest},c=await Z().callApi({eventName:"searchAuditLog",environment:i,data:d,headers:(0,I().Bb)({spaceId:d.spaceId})});if("success"!==c.type)if(N.updateError(o,s),(0,T().Jx)(c.body)){const e=(0,B().wf)(D().Z.getIntl(),c);x().UW(e)}else x().UW(D().Z.formatMessage(F.loadCurrentAuditLogError));else N.updateLoadedResult(o,s,c.data)}({environment:s,spaceId:r})}),[s,r,d]),(0,i.useEffect)((()=>{z({environment:s,spaceId:r})}),[s,r]),(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(re,{}),(0,te.jsxs)("div",{style:{justifyContent:"space-between",display:"flex",paddingTop:12,paddingBottom:12},children:[(0,te.jsx)(se,{spaceStore:t}),(0,te.jsx)(n(553802).Z,{parentStore:t})]}),"loading"===(null==c?void 0:c.status)&&(0,te.jsx)(n(294492).Z,{}),"success"===(null==c?void 0:c.status)&&(0,te.jsx)(Te,{searchResponse:c,spaceStore:t})]})}));var Pe=()=>n(677559);const Ae=new(Pe().Ss)("collectionDebugSettings",(()=>n.e(5e3).then(n.bind(n,293921)))),Re=(0,Pe().kF)(Ae,(e=>e.CollectionDebugSettings)),Ze={settingsTab:new(Pe().Ss)("customEmojiSettings",(()=>n.e(60156).then(n.bind(n,156875))))},Be=(0,Pe().kF)(Ze.settingsTab,(e=>e.CustomEmojiSettings)),De=new(Pe().Ss)("SitesSettingsTab",(async()=>await n.e(79582).then(n.bind(n,113989)))),Le=(0,Pe().kF)(De,(e=>e.SitesSettingsTab));var Oe=()=>n(718959),He=()=>n(247724),Ve=()=>n(606757),Ue=()=>n(849668),Ee=()=>n(148126),Ne=()=>n(332504),Fe=()=>n(90065),Ke=()=>n(10271),ze=()=>n(168441),We=()=>n(721840),qe=()=>n(778265);const Ge=new(Pe().Ss)("offlineModeDebugSettings",(()=>n.e(61860).then(n.bind(n,420952)))),Ye=(0,Pe().kF)(Ge,(e=>e.OfflineModeDebugSettings)),$e=new(Pe().Ss)("offlineSettings",(()=>n.e(61860).then(n.bind(n,420952)))),Xe=(0,Pe().kF)($e,(e=>e.OfflineSettings));var Qe=()=>n(341643),Je=()=>n(18729),et=()=>n(876822),tt=()=>n(180099),nt=()=>n(623521);class it extends H().default{getInitialState(){return{status:"unconfigured",emailDomains:[],domainVerifications:[],spaces:[],createAccount:!1,useMetadataUrl:!0}}}const ot=it;var st=()=>n(812376),at=()=>n(902030);class rt extends H().default{getInitialState(){return{emailDomains:[],spaceCreation:"admins_only",settings:{}}}async updateValueForSpace(e){const{environment:t,spaceId:n,store:i}=e,o=await Z().callApi({eventName:"getEmailDomainsForSpace",environment:t,data:{spaceId:n}});if("failed"===o.type)return void x().x2(o);const{data:s}=o,a=Object.keys(s);return 0!==a.length?i.setState({emailDomains:a,spaceCreation:s[a[0]].spaceCreationEnum,settings:s[a[0]].settings}):i.setState(this.getInitialState()),i.state}}const lt=rt;var dt=()=>n(359023),ct=()=>n(838266),ut=()=>n(219099),pt=()=>n(396992),mt=()=>n(576387),gt=()=>n(827282);const ft=(0,gt().CZ)("paperPlane",{default:{loader:()=>n.e(57702).then(n.bind(n,557702))},small:{loader:()=>n.e(49996).then(n.bind(n,149996))},mini:{loader:()=>n.e(92004).then(n.bind(n,592004))},large:{loader:()=>n.e(67337).then(n.bind(n,767337))}});var ht=()=>n(212493),yt=()=>n(603692),vt=()=>n(661641),xt=()=>n(661297),bt=()=>n(383507),St=()=>n(844958),Mt=()=>n(524434),jt=()=>n(788396),Ct=()=>n(965014),wt=()=>n(178504),kt=()=>n(232695),_t=()=>n(897257),Tt=()=>n(595976),It=()=>n(30795);function Pt(e){let{currentSettingsTab:t}=e;const n=(0,o().O7)(),s=(0,r().yK)((e=>({aiIcon:{width:16,height:16,color:e.icon.purplePrimary},assistantIcon:{width:16,height:16},buttonStyle:{display:"flex",padding:"0px 12px 0px 10px",justifyContent:"center",alignItems:"center",gap:6,borderRadius:6,border:`1px solid ${e.stroke.primary}`}})),[]),l=(0,wt().n_)()&&!["plans","billing"].includes(t),d=(0,a().Kw)(Mt().r4),m=function(){const e=(0,kt().K)(),t=(0,a().VK)((()=>{var e;return null===(e=et().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),n=(0,Tt().p)({spaceId:t}),i=(0,a().Kw)(_t().subscriptionDataStoreInstance),o=(0,It().V)(i);return"eligible"===e&&(n&&(0,c().YK)(n.subscription)&&!(0,u().Aw)((0,c().zt)(n.subscription))||o>5)}(),g=i.useMemo((()=>m?{onClick:()=>(0,jt().nx)({openedFrom:"settings_sidebar"}),text:(0,te.jsx)(p()._H,{id:"settingsUpsellButton.contactSales",defaultMessage:"Chat with Sales"}),icon:(0,te.jsx)(yt().y,{iconGroup:ft,colorName:"primary",variantName:"default"})}:l?{onClick:()=>{Ct().y(n,{from:"ai_upsell_settings",upsell:{type:"product",product:"ai",limit:{type:"none"}}})},text:(0,te.jsx)(p()._H,{id:"AddOnUpsellNudge.title",defaultMessage:"Get unlimited AI"}),icon:d?(0,bt().Q)(s.assistantIcon):(0,St().t)(s.aiIcon)}:void 0),[m,l,d,s,n]);return g?(0,te.jsx)(ht().jX,{direction:"column",padding:16,align:"center-left",children:(0,te.jsxs)(xt().Z,{onClick:g.onClick,style:s.buttonStyle,children:[g.icon,(0,te.jsx)(vt().q,{styleName:"UIRegular-14px/Medium",children:g.text})]})}):null}var At=()=>n(957955),Rt=()=>n(504117),Zt=()=>n(543125),Bt=()=>n(92175);const Dt=(0,p().vU)({apply_credit:{id:"spaceSubscriptionBilling.applyCreditButton.label",defaultMessage:"Apply credit"},update:{id:"spaceSubscriptionBilling.updateButton.label",defaultMessage:"Update"},add:{id:"spaceSubscriptionBilling.addButton.label",defaultMessage:"Add"},apply:{id:"spaceSubscriptionBilling.apply.label",defaultMessage:"Apply"}});const Lt=(0,p().XN)((function(e){const t=(0,r().Fg)(),n={marginLeft:18,marginRight:-4,fontWeight:g().Ue.medium},{title:i,caption:o,buttonArgs:s}=e,a=(0,te.jsx)(p()._H,{...Dt[s.buttonPurpose]});return(0,te.jsxs)("div",{style:{display:"flex",alignItems:"center",fontSize:14},children:[(0,te.jsx)("div",{style:{marginRight:"auto"},children:i}),(0,te.jsx)("div",{style:{color:t.mediumTextColor},children:o}),(0,te.jsx)("div",{style:{minWidth:110,display:"flex",justifyContent:"flex-end"},children:s.showButton&&(0,te.jsx)(Bt().Z,{isBlue:!0,onClick:s.onClick,style:n,children:a})})]})}));var Ot=()=>n(804217);const Ht={workspaceBalance:(0,te.jsx)(p()._H,{id:"spaceSubscriptionBilling.subscriptionSettingsSection.workspaceSubscriptionBalance.title",defaultMessage:"Workspace balance"}),applyCoupon:(0,te.jsx)(p()._H,{id:"spaceSubscriptionBilling.subscriptionSettingsSection.applyCoupon.title",defaultMessage:"Apply coupon"}),discount:(0,te.jsx)(p()._H,{id:"spaceSubscriptionBilling.subscriptionSettingsSection.discount.title",defaultMessage:"Discount"})};var Vt=()=>n(702548);const Ut={height:"100%",padding:"36px 60px"},Et={display:"flex",flexDirection:"column",height:"100%"};const Nt=function(e){let{spaceStore:t,billingData:i}=e;const r=(0,o().O7)(),l=(0,a().qz)(void 0,n(728779).Z),d=(0,p().YB)(),c=(0,a().Kw)(Ot().default),u=(0,a().Kw)(l);return(0,s().K)((()=>{mt().zb(r,l)})),c.online?(0,te.jsx)("div",{style:Et,children:(0,te.jsxs)(n(842574).Z,{style:Ut,type:n(520849).Z.Y,children:[(0,te.jsx)(ae().Z,{large:!0,divider:"full",children:(0,te.jsx)(p()._H,{...Zt().sY.billingTab})}),(0,te.jsx)(Ft,{billingData:i}),(0,te.jsx)(Kt,{}),(0,te.jsx)(n(79624).V,{spaceStore:t,events:u.billingEvents,upcomingInvoiceData:void 0})]})}):(0,te.jsx)(Rt().ZP,{children:(0,te.jsx)(me().Z,{isSmall:!0,style:{textAlign:"center"},children:d.formatMessage(At().s.offline)})})};function Ft(e){let{billingData:t}=e;const n=(0,c().bs)(null==t?void 0:t.subscription);if(!n)return null;const i=(0,c().Et)(t,n),o=-Math.min(0,i.amount);return(0,te.jsx)(Lt,{title:Ht.workspaceBalance,caption:(0,te.jsx)("div",{children:(0,te.jsx)(Vt().W,{cost:{amount:o,currencyCode:n},trailingZeroDisplay:"stripIfInteger"})}),buttonArgs:{showButton:!1,buttonPurpose:"apply_credit",onClick:m().ZT}})}function Kt(){return(0,te.jsx)("div",{style:{flex:"none",marginTop:30}})}var zt=()=>n(548812),Wt=()=>n(661769),qt=()=>n(180410);const Gt={currentPage:"home",setPage:()=>{}},Yt=(0,i.createContext)(Gt);Yt.displayName="RequestsSettingsPageContext";var $t=()=>n(1910),Xt=()=>n(730971),Qt=()=>n(368634),Jt=()=>n(991331),en=()=>n(909763),tn=()=>n(653363),nn=()=>n(218835),on=()=>n(696347),sn=()=>n(277533),an=()=>n(146920);const rn=4;function ln(e){let{spaceStore:t}=e;const n=(0,p().YB)();return(0,te.jsxs)(ht().jX,{direction:"column",padding:"36px 60px",children:[(0,te.jsxs)(ht().jX,{direction:"column",gap:32,children:[(0,te.jsx)(vt().q,{styleName:"UITitle-22px/Semibold",colorName:"primary",children:n.formatMessage(mn.title)}),(0,te.jsxs)(ht().jX,{direction:"row",gap:14,height:113,children:[t&&(0,te.jsx)(un,{spaceStore:t}),t&&(0,te.jsx)(pn,{spaceStore:t})]})]}),(0,te.jsx)(dn,{})]})}function dn(){const e=(0,p().YB)(),{setPage:t}=(0,i.useContext)(Yt);return(0,te.jsx)("div",{style:{width:"100%"},children:(0,te.jsx)(en().Q,{title:e.formatMessage(mn.permissionsTitle),content:(0,te.jsxs)(Xt().T,{children:[(0,te.jsx)(Jt().N,{title:e.formatMessage(mn.membersAndGuestsSettingTitle),byline:e.formatMessage(mn.memberAndGuestsSettingByline),item:(0,te.jsx)(cn,{ariaLabel:e.formatMessage(mn.memberAndGuestsSettingAriaLabel),onClick:()=>{t("people_invitation_settings")}})}),(0,te.jsx)(Jt().N,{title:e.formatMessage(mn.purchaseRequestsSettingTitle),byline:e.formatMessage(mn.purchaseRequestsSettingByline),item:(0,te.jsx)(cn,{ariaLabel:e.formatMessage(mn.purchaseRequestsSettingsAriaLabel),onClick:()=>{}})})]})})})}function cn(e){let{ariaLabel:t,onClick:n}=e;const i=(0,r().yK)((e=>({icon:{height:20,width:20,fill:e.icon.tertiary}})),[]);return(0,te.jsx)($t().Z,{style:i.icon,icon:on().o,ariaLabel:t,onClick:n})}function un(e){let{spaceStore:t}=e;const n=(0,p().YB)(),{setPage:o}=(0,i.useContext)(Yt),{requestsSize:s,requestedUserStores:r,totalRequestedUsersSize:l}=function(e){let{spaceStore:t,userStoreLimit:n}=e;const{requests:i}=(0,an().p)({spaceId:t.id});return(0,a().VK)((()=>{let e=0;const o=new Set;if(!i)return{requestsSize:e,requestedUserStores:[],totalRequestedUsersSize:0};for(const t of Object.values(i)){for(const e of t)o.add(e.created_by_id);e+=t.length}return{requestsSize:e,requestedUserStores:Array.from(o).slice(0,n).map((e=>sn().U.createChildStore(t,{table:R().KJ,id:e}))),totalRequestedUsersSize:o.size}}),[t,i,n])}({spaceStore:t,userStoreLimit:rn});return(0,te.jsx)(Qt().Z,{headerText:n.formatMessage(mn.upgradesTitle),mainText:s,bottom:(0,te.jsx)(tn().s,{users:r,totalMemberCount:l}),onClick:()=>{o("upgrades")}})}function pn(e){let{spaceStore:t}=e;const n=(0,p().YB)(),i=(0,nn().oE)({spaceStore:t,requestType:"member_or_guest"}),o=new Set;for(const a of i)for(const{actor:e}of a.createdByActorsWithReason)o.add(e.id);const s=[...o].slice(0,rn).map((e=>J().U6.createChildStore(t,{table:R().KJ,id:e})));return(0,te.jsx)(Qt().Z,{headerText:n.formatMessage(mn.peoplesTitle),mainText:i.length,bottom:i.length>0&&(0,te.jsx)(tn().s,{users:s,totalMemberCount:o.size}),onClick:()=>{b().r$({currentTab:"members",subtab:"requests"})}})}const mn=(0,p().vU)({title:{id:"RequestsSettingsPage.title",defaultMessage:"Requests"},upgradesTitle:{id:"RequestsSettingsPage.UpgradesTileTitle",defaultMessage:"Upgrades"},peoplesTitle:{id:"RequestsSettingsPage.PeopleTileTitle",defaultMessage:"People"},permissionsTitle:{id:"RequestsSettingsPage.permissionsTitle",defaultMessage:"Permissions"},membersAndGuestsSettingTitle:{id:"RequestsSettingsPage.membersAndGuestsSettingTitle",defaultMessage:"Inviting guests and members"},memberAndGuestsSettingByline:{id:"RequestsSettingsPage.memberAndGuestsSettingByline",defaultMessage:"Configure who can send and approve member additions"},purchaseRequestsSettingTitle:{id:"RequestsSettingsPage.purchaseRequestsSettingTitle",defaultMessage:"Purchase requests"},purchaseRequestsSettingByline:{id:"RequestsSettingsPage.purchaseRequestsSettingByline",defaultMessage:"Configure who can send and approve requests"},memberAndGuestsSettingAriaLabel:{id:"RequestsSettingsPage.memberAndGuestsSettingAriaLabel",defaultMessage:"Configure who can send and approve member additions"},purchaseRequestsSettingsAriaLabel:{id:"RequestsSettingsPage.purchaseRequestsSettingsAriaLabel",defaultMessage:"Configure who can send and approve requests"}});var gn=()=>n(696459),fn=()=>n(395362),hn=()=>n(897373),yn=()=>n(104822),vn=()=>n(223160),xn=()=>n(853571),bn=()=>n(91502),Sn=()=>n(105459),Mn=()=>n(466970),jn=()=>n(730120),Cn=()=>n(429892),wn=()=>n(141455),kn=()=>n(906651),_n=()=>n(360964);function Tn(e){let{title:t,byline:n,settingItem:i,style:o}=e;const s=(0,r().yK)((e=>({settingContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",...o||{}},settingLeft:{width:"60%"},settingTitle:{fontWeight:g().Ue.regular},settingByline:{marginBottom:4}})),[o]);return(0,te.jsxs)("div",{style:s.settingContainer,children:[(0,te.jsxs)("div",{style:s.settingLeft,children:[(0,te.jsx)(ae().Z,{smallMarginBottom:!0,style:s.settingTitle,children:t}),(0,te.jsx)(me().Z,{isSmall:!0,isMultiline:!0,style:s.settingByline,children:n})]}),i]})}var In=()=>n(365969),Pn=()=>n(575154),An=()=>n(815277),Rn=()=>n(469203),Zn=()=>n(18902),Bn=()=>n(745740),Dn=()=>n(291198),Ln=()=>n(921981),On=()=>n(972544),Hn=()=>n(525454),Vn=()=>n(739479);const Un=(0,p().vU)({deleteFromTrashLayoutTitle:{defaultMessage:"Auto-delete from Trash",id:"updateRetentionWindowModal.layoutTitle.deleteFromTrash."},deleteFromTrashTitle:{defaultMessage:"Auto-delete from Trash",id:"updateRetentionWindowModal.title.deleteFromTrash"},deleteFromTrashDescription:{defaultMessage:"Customize how long pages stay in Trash before being automatically deleted",id:"updateRetentionWindowModal.description.deleteFromTrash"},deleteFromTrashDefaultOptionTitle:{defaultMessage:"30 days, then delete from Trash",id:"updateRetentionWindowModal.defaultOption.title.deleteFromTrash"},deleteFromTrashDefaultOptionDescription:{defaultMessage:"Pages deleted from Trash are retained for an additional period of time. Retained pages can be restored by workspace owners",id:"updateRetentionWindowModal.defaultOption.description.deleteFromTrash"},deleteFromTrashImmediateEffect:{defaultMessage:"Reducing this retention setting may lead to pages being deleted from Trash immediately. Please type your workspace name to continue",id:"updateRetentionWindowModal.immediateEffect.deleteFromTrash"},purgeLayoutTitle:{defaultMessage:"Retaining deleted pages",id:"updateRetentionWindowModal.layoutTitle.purge"},purgeTitle:{defaultMessage:"Retaining deleted pages",id:"updateRetentionWindowModal.title.purge"},purgeDescription:{defaultMessage:"Pages deleted from Trash are retained for a period of time. Only workspace owners can view and restore retained pages.",id:"updateRetentionWindowModal.description.purge"},purgeDefaultOptionTitle:{defaultMessage:"30 days, then permanently delete",id:"updateRetentionWindowModal.defaultOption.title.purge"},purgeDefaultOptionDescription:{defaultMessage:"Pages are removed from Notion's servers and cannot be restored",id:"updateRetentionWindowModal.defaultOption.description.purge"},purgeImmediateEffect:{defaultMessage:"Reducing the retain period could lead to pages being deleted from Notion server. Please type your workspace name to continue ",id:"updateRetentionWindowModal.immediateEffect.purge"}});var En=()=>n(579807);const Nn=(0,p().vU)({days:{defaultMessage:"days",id:"customRetentionWindow.relativeDates.days"},years:{defaultMessage:"years",id:"customRetentionWindow.relativeDates.years"}}),Fn=(0,p().vU)({inputPlaceholder:{defaultMessage:"...",id:"customRetentionWindow.timeNum.inputPlaceholder"}}),Kn=(0,gn().Yd)(Cn().tL).map((e=>({key:e,label:(0,te.jsx)(me().Z,{children:D().Z.formatMessage(Nn[e])})})));function zn(e){const{isDropdownEnabled:t,timeNumString:n,timeUnit:i,setTimeNumString:o,setTimeUnit:s}=e,a=(0,p().YB)(),l=(0,r().yK)((e=>({dropdownRow:{display:"flex"},input:{width:70,marginRight:4,marginLeft:6},dropdown:{marginTop:0,marginBottom:0,marginRight:4,borderRadius:4,border:`1px solid ${e.lightDividerColor}`}})),[]);return(0,te.jsxs)("span",{style:l.dropdownRow,children:[(0,te.jsx)(Dn().Z,{style:l.input,value:n,onChange:e=>o(e.target.value),placeholder:a.formatMessage(Fn.inputPlaceholder),disabled:!t}),(0,te.jsx)(En().L,{buttonStyle:l.dropdown,disabled:!t,type:"dropdown",currentOption:i,options:Kn,onSelectOption:e=>t&&s(e),isMobile:!1})]})}const Wn=(0,p().vU)({invalidNumber:{defaultMessage:"Please enter a valid number",id:"updateRetentionWindow.error.invalidNumber"},outOfRangeTrash:{defaultMessage:"Pages can't be in Trash for longer than 10 years",id:"updateRetentionWindow.error.outOfRangeTrash"},outOfRangeRetained:{defaultMessage:"Pages can't be retained for longer than 10 years",id:"updateRetentionWindow.error.outOfRangeRetained"},lowerBoundTrash:{defaultMessage:"Pages can't be in Trash for less than 1 day",id:"updateRetentionWindow.error.lowerBoundTrash"},lowerBoundRetained:{defaultMessage:"Pages can't be retained for less than 1 day",id:"updateRetentionWindow.error.lowerBoundRetained"}});function qn(e){let{isSelected:t,retentionType:n,hasChosenRetentionWindow:o,currentRetentionWindowInSeconds:s,errorMessage:a,onNextRetentionWindowInSecondsChange:l,onClick:d,setErrorMessage:c,style:u}=e;const m=(0,p().YB)(),f=(0,r().yK)((e=>({rowStyles:{display:"flex",fontSize:14,background:t?e.lightBlueBannerBackground:"inherit",...u,alignItems:"flex-start",flexFlow:"column"},centeredRow:{display:"flex",flexFlow:"row",alignItems:"center"},dropdownRow:{marginTop:6},dropdown:{marginTop:0,marginBottom:0,marginRight:4,borderRadius:4,border:`1px solid ${e.lightDividerColor}`},errorMessageStyle:{marginTop:8,width:"100%",display:"flex",paddingLeft:28,color:e.errorText,fontWeight:g().Ue.regular}})),[u,t]),[h,y]=(0,i.useState)((0,Cn().ln)(s)),[v,x]=(0,i.useState)(`${(0,Cn().yR)(s,h)}`),b=Number(v)*Cn().tL[h],S=!o&&t;return(0,i.useEffect)((()=>{l(b)}),[l,b]),(0,i.useEffect)((()=>{if(t){if(void 0===v)return void c(m.formatMessage(Wn.invalidNumber));const e=parseInt(v);if(isNaN(e)||e.toString()!==v)return void c(m.formatMessage(Wn.invalidNumber));const t=Cn().tL[h]*e;if(t>Cn().GL){const e="delete_from_trash"===n?Wn.outOfRangeTrash:Wn.outOfRangeRetained;return void c(m.formatMessage(e))}if(t<Cn().Of){const e="delete_from_trash"===n?Wn.lowerBoundTrash:Wn.lowerBoundRetained;return void c(m.formatMessage(e))}c(void 0)}}),[v,h,t,c,m,n]),(0,te.jsxs)(Bt().Z,{style:f.rowStyles,onClick:d,children:[(0,te.jsxs)("div",{style:f.centeredRow,children:[(0,te.jsx)(On().Z,{isSelected:t}),(0,te.jsx)(me().Z,{style:f.centeredRow,children:"delete_from_trash"===n?(0,te.jsx)(p()._H,{defaultMessage:"<dropdownpicker></dropdownpicker>, then delete from trash",id:"updateRetentionWindowModal.custom.deleteFromTrash",values:{dropdownpicker:e=>(0,te.jsx)(zn,{isDropdownEnabled:S,timeNumString:v,timeUnit:h,setTimeNumString:x,setTimeUnit:y})}}):(0,te.jsx)(p()._H,{defaultMessage:"<dropdownpicker></dropdownpicker>, then permanently delete",id:"updateRetentionWindowModal.custom.permanentlyDelete",values:{dropdownpicker:e=>(0,te.jsx)(zn,{isDropdownEnabled:S,timeNumString:v,timeUnit:h,setTimeNumString:x,setTimeUnit:y})}})})]}),a?(0,te.jsx)(me().Z,{style:f.errorMessageStyle,children:a}):null]})}const Gn=(0,p().vU)({invalidWorkspaceName:{id:"updateRetentionWindow.error.invalidWorkspaceName",defaultMessage:"Must type in workspace name correctly"}});function Yn(e){let{isOpen:t,closeModal:n,currentRetentionWindowInSeconds:s,spaceStore:l,retentionType:d,onSaveRetentionWindow:c}=e;const u=(0,o().O7)(),m=(0,r().yK)((e=>({contentStyle:{display:"flex",flexFlow:"column",alignItems:"center",paddingTop:24,paddingLeft:15,paddingRight:15},headerStyle:{display:"flex",flexFlow:"column",alignItems:"center",marginBottom:16},headerTitleStyle:{fontWeight:g().Ue.semibold,fontSize:17,marginBottom:8},headerDescriptionStyle:{width:"100%",textAlign:"center",fontSize:14},defaultOptionStyle:{display:"flex",flexFlow:"column",paddingLeft:8},defaultOptionTitleStyle:{fontSize:13,fontWeight:g().Ue.medium},defaultOptionDescriptionStyle:{width:350,fontSize:12,whiteSpace:"normal",lineHeight:"16px",fontWeight:g().Ue.regular},iconStyle:{color:e.lightIconColor,width:36,marginBottom:12},saveButtonStyles:{width:"100%",marginBottom:4,marginTop:16},errorMessageStyle:{marginTop:4,color:e.errorText},cancelButtonStyles:{width:"100%",paddingTop:5,paddingBottom:5,display:"flex",justifyContent:"center",marginBottom:16,borderRadius:4},optionStyle:{width:"100%",height:void 0,marginBottom:4,paddingTop:8,paddingBottom:8,fontWeight:g().Ue.medium,display:"flex",flexFlow:"row"},confirmationContainerStyle:{marginTop:16,width:"100%",paddingTop:14,paddingBottom:14,padingLeft:14,paddingRight:14,backgroundColor:e.accentColors.red[100],display:"flex",flexFlow:"column",alignItems:"center",borderRadius:4},confirmationDescription:{color:e.accentColors.red[800],fontSize:14,paddingBottom:6},confirmationContentStyle:{width:"90%"}})),[]),f=(0,a().VK)((()=>l.getName()),[l]),h=(0,Mn().E)("cdrr_deletion_enabled"),[y,x]=(0,i.useState)(void 0),[b,S]=(0,i.useState)(void 0===s),[M,j]=(0,i.useState)(s),C=b?void 0:M,[w,k]=(0,i.useState)(!1),[_,T]=(0,i.useState)(""),I=C===s||(0,gn().$K)(y),P=_!==f,A=(0,i.useCallback)((()=>{y||(v().Ym(u,{type:d,value:C}),c(C),T(""),k(!1),n())}),[u,d,c,C,y,n]),R=(0,i.useCallback)((()=>{w?_===f?A():x(D().Z.formatMessage(Gn.invalidWorkspaceName)):!function(e){let{nextRetentionWindowValue:t,currentRetentionWindowValue:n,retentionType:i}=e;const o=$n(n,i),s=$n(t,i);if(s<o)return!0;return!1}({nextRetentionWindowValue:C,retentionType:d,currentRetentionWindowValue:s})?A():k(!0)}),[w,_,f,C,d,s,A]),Z=(0,i.useCallback)((()=>{w||b||(k(!1),S(!0),x(void 0))}),[w,b,k,S,x]),B=(0,i.useCallback)((()=>{w||b&&(k(!1),S(!1))}),[w,b,k,S]),L=function(e){return(0,i.useMemo)((()=>"delete_from_trash"===e?{layoutTitle:Un.deleteFromTrashLayoutTitle,title:Un.deleteFromTrashTitle,description:Un.deleteFromTrashDescription,defaultOptionTitle:Un.deleteFromTrashDefaultOptionTitle,defaultOptionDescription:Un.deleteFromTrashDefaultOptionDescription,immediateEffect:Un.deleteFromTrashImmediateEffect}:"purge"===e?{layoutTitle:Un.purgeLayoutTitle,title:Un.purgeTitle,description:Un.purgeDescription,defaultOptionTitle:Un.purgeDefaultOptionTitle,defaultOptionDescription:Un.purgeDefaultOptionDescription,immediateEffect:Un.purgeImmediateEffect}:void(0,gn().t1)(e)),[e])}(d);return(0,te.jsx)(Ln().c,{isOpen:t,onDismiss:n,areaConstraint:{width:{type:"max",length:460}},render:e=>{let{displayMode:t}=e;return(0,te.jsx)(Hn().a,{displayMode:t,title:(0,te.jsx)(p()._H,{...L.layoutTitle}),children:(0,te.jsxs)("div",{style:m.contentStyle,children:[(0,te.jsxs)("div",{style:m.headerStyle,children:[(0,te.jsx)("div",{children:(0,Vn().y)(m.iconStyle)}),(0,te.jsx)(me().Z,{style:m.headerTitleStyle,children:(0,te.jsx)(p()._H,{...L.title})}),(0,te.jsx)(me().Z,{style:m.headerDescriptionStyle,isSecondaryColor:!0,isMultiline:!0,children:(0,te.jsx)(p()._H,{...L.description})})]}),(0,te.jsxs)(Bt().Z,{style:m.optionStyle,onClick:Z,children:[(0,te.jsx)(On().Z,{isSelected:b}),(0,te.jsxs)("div",{style:m.defaultOptionStyle,children:[(0,te.jsx)(me().Z,{style:m.defaultOptionTitleStyle,children:(0,te.jsx)(p()._H,{...L.defaultOptionTitle})}),(0,te.jsx)(me().Z,{isSecondaryColor:!0,isMultiline:!0,style:m.defaultOptionDescriptionStyle,children:(0,te.jsx)(p()._H,{...L.defaultOptionDescription})})]})]}),(0,te.jsx)(qn,{style:m.optionStyle,isSelected:!b,retentionType:d,hasChosenRetentionWindow:w,currentRetentionWindowInSeconds:s,errorMessage:y,onClick:B,onNextRetentionWindowInSecondsChange:j,setErrorMessage:x}),w?(0,te.jsxs)("div",{style:m.confirmationContainerStyle,children:[(0,te.jsx)(me().Z,{isMultiline:!0,style:{...m.confirmationContentStyle,...m.confirmationDescription},children:(0,te.jsx)(p()._H,{...L.immediateEffect})}),(0,te.jsx)(Dn().Z,{style:m.confirmationContentStyle,value:_,placeholder:f,onChange:e=>T(e.target.value)})]}):null,(0,te.jsx)(kn().Z,{onClick:h?R:A,disabled:w?P:I,style:m.saveButtonStyles,isLarge:!0,children:(0,te.jsx)(p()._H,{id:"updateRetentionWindowModal.save",defaultMessage:"Save"})}),(0,te.jsx)(Bn().Z,{onClick:n,style:m.cancelButtonStyles,children:(0,te.jsx)(me().Z,{isSecondaryColor:!0,children:(0,te.jsx)(p()._H,{id:"updateRetentionWindowModal.cancel",defaultMessage:"Cancel"})})})]})})}})}function $n(e,t){return e||("delete_from_trash"===t?Zn().A7:Zn().vF)}function Xn(e){const{spaceStore:t}=e,n=(0,o().O7)(),s=(0,p().YB)(),l=(0,r().yK)((e=>({genericSetting:{width:"100%",paddingTop:24},settingItem:{display:"flex",alignItems:"center"},currentSettingLabel:{fontWeight:g().Ue.medium},changeButtonStyle:{fontSize:12,marginLeft:8},lockIconStyle:{color:e.lightTextColor,width:20,marginLeft:4}})),[]),d=(0,a().VK)((()=>!ye().default.checkGate({gateName:"cdrr_deletion_enabled"})),[]),c=(0,An().oo)({name:"configurable_retention",spaceId:t.id,userId:n.currentUser.id}),[u,m]=i.useState({isOpen:!1,retentionType:"delete_from_trash"}),{saveDeleteFromTrashDelay:f,savePurgeDelay:h}=function(e){let{environment:t,spaceStore:n}=e;return{saveDeleteFromTrashDelay:(0,i.useCallback)((e=>{w().createAndCommit({userAction:"securitySettingsActions.saveDataRetentionSettings",environment:t,canUndo:!0,perform:t=>{w().applyOperation({store:n,operation:{pointer:n.pointer,path:["settings"],command:"update",args:{delete_from_trash_delay_seconds:e??null}},transaction:t})}})}),[n,t]),savePurgeDelay:(0,i.useCallback)((e=>{w().createAndCommit({userAction:"securitySettingsActions.saveDataRetentionSettings",environment:t,canUndo:!0,perform:t=>{w().applyOperation({store:n,operation:{pointer:n.pointer,path:["settings"],command:"update",args:{purge_delay_seconds:e??null}},transaction:t})}})}),[n,t])}}({environment:n,spaceStore:t}),{currentDeleteFromTrashDelayInSeconds:y,currentPurgeDelayInSeconds:v}=(0,a().VK)((()=>({currentDeleteFromTrashDelayInSeconds:(0,wn()._e)(c)?t.getSettings().delete_from_trash_delay_seconds:void 0,currentPurgeDelayInSeconds:(0,wn()._e)(c)?t.getSettings().purge_delay_seconds:void 0})),[t,c]);return(0,te.jsxs)("div",{children:[u.isOpen&&(0,te.jsx)(Yn,{isOpen:u.isOpen,closeModal:()=>m({...u,isOpen:!1}),spaceStore:t,currentRetentionWindowInSeconds:u.currentRetentionWindowInSeconds,retentionType:u.retentionType,onSaveRetentionWindow:"delete_from_trash"===u.retentionType?f:h}),(0,te.jsx)(Qn,{dataRetentionAvailability:c,isDeletionDisabled:d}),(0,te.jsx)(Tn,{style:l.genericSetting,title:(0,te.jsx)(p()._H,{id:"securitySettings.dataRetention.deleteFromTrash.title",defaultMessage:"Once pages are moved to Trash, delete them after"}),byline:(0,te.jsx)(p()._H,{id:"securitySettings.dataRetention.deletedFromTrash.byline",defaultMessage:"Anyone with edit or full access will be able to restore or manually delete pages in Trash"}),settingItem:(0,te.jsxs)("div",{style:l.settingItem,children:[(0,te.jsx)(me().Z,{style:l.currentSettingLabel,children:(0,te.jsx)(p()._H,{id:"securitySettings.dataRetention.deleteFromTrash.currentSetting",defaultMessage:"{duration}",values:{duration:(0,Cn().uP)(y,s)}})}),(0,wn()._e)(c)?(0,te.jsx)(xt().Z,{disabled:!1,style:l.changeButtonStyle,onClick:()=>m({isOpen:!0,retentionType:"delete_from_trash",currentRetentionWindowInSeconds:y}),children:(0,te.jsx)(p()._H,{defaultMessage:"Change",id:"securitySettings.dataRetention.deleteFromTrash.button"})}):(0,te.jsx)("div",{children:(0,ze().Q)(l.lockIconStyle)})]})}),(0,te.jsx)(Tn,{style:l.genericSetting,title:(0,te.jsx)(p()._H,{id:"securitySettings.dataRetention.purge.title",defaultMessage:"After pages are deleted from Trash, retain them for"}),byline:(0,te.jsx)(p()._H,{id:"securitySettings.dataRetention.purge.byline",defaultMessage:"During the retention period, only workspace owners can view or restore the page from Content search. After the retention period, the page will be permanently deleted from Notion's servers"}),settingItem:(0,te.jsxs)("div",{style:l.settingItem,children:[(0,te.jsx)(me().Z,{style:l.currentSettingLabel,children:(0,te.jsx)(p()._H,{id:"securitySettings.dataRetention.purge.currentSetting",defaultMessage:"{duration}",values:{duration:(0,Cn().uP)(v,s)}})}),(0,wn()._e)(c)?(0,te.jsx)(xt().Z,{disabled:!1,style:l.changeButtonStyle,onClick:()=>m({isOpen:!0,retentionType:"purge",currentRetentionWindowInSeconds:v}),children:(0,te.jsx)(p()._H,{defaultMessage:"Change",id:"securitySettings.dataRetention.purge.button"})}):(0,te.jsx)("div",{children:(0,ze().Q)(l.lockIconStyle)})]})})]})}function Qn(e){const{dataRetentionAvailability:t,isDeletionDisabled:n}=e,i=(0,r().yK)((e=>({bannerStyle:{borderRadius:4,padding:15,width:"100%",backgroundColor:e.lightBlueBannerBackground,flexFlow:(0,wn()._e)(t)?"column":"row",display:"flex",overflow:"hidden"},bannerLabelStyle:{marginBottom:8},bannerImage:{width:75,display:"flex",alignItems:"center",paddingRight:15},bannerTitleBold:{fontWeight:g().Ue.bold},b:{fontWeight:g().Ue.medium},helpIcon:{fill:"inherit"}})),[t]),s=(0,o().O7)(),a=(0,In().BQ)();return(0,wn()._e)(t)?(0,te.jsxs)("div",{style:i.bannerStyle,children:[(0,te.jsx)(me().Z,{style:i.bannerLabelStyle,children:(0,te.jsx)(p()._H,{id:"securitySettings.dataRetention.disclaimer.title",defaultMessage:"How page deletion and retention works in Notion"})}),(0,te.jsx)(me().Z,{style:i.bannerLabelStyle,isMultiline:!0,isSmall:!0,children:(0,te.jsx)(p()._H,{id:"securitySettings.dataRetention.disclaimer.description",defaultMessage:"A page can be moved to Trash by anyone with edit or full access. The page can then be restored or deleted. Workspace owners can customize whether pages in Trash are automatically deleted after a period of time, and how long deleted pages are retained on Notion's servers."})}),n?(0,te.jsx)(me().Z,{style:i.bannerLabelStyle,isMultiline:!0,isSmall:!0,children:(0,te.jsx)(p()._H,{id:"securitySettings.dataRetention.disclaimer.juneWarning",defaultMessage:"<b>The settings below will go into effect on {localizedDate}</b>",values:{localizedDate:a.toLocaleString(jn().ou.DATE_FULL),b:e=>(0,te.jsx)("b",{style:i.b,children:e})}})}):null," ",(0,te.jsx)(_n().Z,{title:(0,te.jsx)(Rn().s,{children:(0,te.jsx)(p()._H,{defaultMessage:"Learn more about data retention in Notion",id:"securitySettings.dataRetention.learnMore"})}),iconStyle:i.helpIcon,buttonStyle:{maxWidth:"100%",overflow:"hidden"},href:(0,Ee().UY)("guides.customDataRetentionRules"),analyticsFrom:"security_settings"})]}):(0,te.jsxs)("div",{style:i.bannerStyle,children:[(0,te.jsx)("div",{style:i.bannerImage,children:(0,te.jsx)(Pn().q,{product:"enterprise"})}),(0,te.jsxs)("div",{children:[(0,te.jsx)(me().Z,{style:{...i.bannerLabelStyle,...i.bannerTitleBold},children:(0,te.jsx)(p()._H,{id:"securitySettings.dataRetention.upsell.title",defaultMessage:"Upgrade to the Enterprise plan to customize your workspace’s data retention policy"})}),(0,te.jsx)(me().Z,{style:i.bannerLabelStyle,isMultiline:!0,isSecondaryColor:!0,children:(0,te.jsx)(p()._H,{id:"securitySettings.dataRetention.upsell.description",defaultMessage:"Workspaces on the Enterprise plan also get SAML SSO, custom guest limits, audit logging, and other advanced security controls"})}),(0,te.jsx)(kn().Z,{onClick:()=>{null!=t&&t.upsell&&(0,Ct().y)(s,{from:"space_settings_cdrr_settings",upsell:t.upsell})},isLarge:!0,children:(0,te.jsx)(p()._H,{defaultMessage:"Upgrade to Enterprise",id:"securitySettings.upgradeButton.text"})})]})]})}var Jn=()=>n(72950),ei=()=>n(188296),ti=()=>n(14328),ni=()=>n(697623),ii=()=>n(666414),oi=()=>n(312578),si=()=>n(471645),ai=()=>n(146947),ri=()=>n(708518),li=function(e){return e[e.Keep=0]="Keep",e[e.Remove=1]="Remove",e}(li||{});function di(e){return(0,te.jsx)(ri().Z,{open:e.isOpen,onDismiss:e.onDismiss,render:()=>(0,te.jsx)(ci,{...e})})}function ci(e){const{onDismiss:t,onSave:n,guestCount:o}=e,[s,a]=(0,i.useState)(li.Keep),l=(0,r().yK)((e=>({container:{width:350,padding:30,borderRadius:5,height:400,alignItems:"center"},title:{fontFamily:g().F5(ai().locale).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center"},subtitle:{fontFamily:g().F5(ai().locale).sans,fontSize:14,fontWeight:300,lineHeight:"19px",margin:10,textAlign:"center"},radioContainer:{display:"flex",flexDirection:"column"},button:{justifyContent:"space-between",marginTop:10,height:70,borderRadius:5},buttonText:{display:"flex",flexDirection:"column"},optionSubtitle:{whiteSpace:"break-spaces"},actionButtonsContainer:{display:"flex",flexDirection:"column",marginTop:20},cancelButton:{justifyContent:"center",margin:"8px auto 0"}})),[]),d=(0,i.useCallback)((()=>{const e=s===li.Keep;n(e)}),[n,s]);return(0,te.jsxs)("div",{style:l.container,children:[(0,te.jsx)(me().Z,{style:l.title,children:(0,te.jsx)(p()._H,{id:"disableGuestsConfig.title",defaultMessage:"Disable inviting guests?"})}),(0,te.jsx)(me().Z,{isSmall:!0,style:l.subtitle,isMultiline:!0,children:(0,gn().$K)(o)?(0,te.jsx)(p()._H,{id:"disableGuestsConfig.description",defaultMessage:"Your workspace currently has {guestCount, plural, one {1 guest} other {{guestCount} guests}}. You can choose to:",values:{guestCount:o}}):(0,te.jsx)(p()._H,{id:"disableGuestsConfig.description.noGuestCount",defaultMessage:"You are turning off guests in this workspace. You can choose to:"})}),(0,te.jsxs)("div",{style:l.radioContainer,children:[(0,te.jsxs)(xt().Z,{isLarge:!0,onClick:()=>a(li.Keep),style:l.button,children:[(0,te.jsx)(On().Z,{isSelected:s===li.Keep}),(0,te.jsxs)("div",{style:l.buttonText,children:[(0,te.jsx)(me().Z,{children:(0,te.jsx)(p()._H,{id:"disableGuestsConfig.keepExistingGuests.title",defaultMessage:"Keep existing guests"})}),(0,te.jsx)(me().Z,{isSmall:!0,isMultiline:!0,style:l.optionSubtitle,children:(0,te.jsx)(p()._H,{id:"disableGuestsConfig.keepExistingGuests.description",defaultMessage:"Guests will still be able to access the pages they've been invited to"})})]})]}),(0,te.jsxs)(xt().Z,{isLarge:!0,onClick:()=>a(li.Remove),style:l.button,children:[(0,te.jsx)(On().Z,{isSelected:s===li.Remove}),(0,te.jsxs)("div",{style:l.buttonText,children:[(0,te.jsx)(me().Z,{children:(0,te.jsx)(p()._H,{id:"disableGuestsConfig.removeExistingGuests.title",defaultMessage:"Remove existing guests"})}),(0,te.jsx)(me().Z,{isSmall:!0,isMultiline:!0,style:l.optionSubtitle,children:(0,te.jsx)(p()._H,{id:"disableGuestsConfig.removeExistingGuests.description",defaultMessage:"All guests will be removed from your workspace"})})]})]})]}),(0,te.jsxs)("div",{style:l.actionButtonsContainer,children:[(0,te.jsx)(kn().Z,{isLarge:!0,onClick:d,children:(0,te.jsx)(p()._H,{id:"disableGuestsModal.saveChanges",defaultMessage:"Disable inviting guests"})}),(0,te.jsx)(Bt().Z,{onClick:t,style:l.cancelButton,children:(0,te.jsx)(p()._H,{id:"disableGuestsModal.cancel",defaultMessage:"Cancel"})})]})]})}var ui=()=>n(765513),pi=()=>n(872423),mi=()=>n(539245);const gi={security:(0,te.jsx)(p()._H,{id:"securityTabs.security.title",defaultMessage:"Security"}),data_retention:(0,te.jsxs)("div",{style:{display:"flex"},children:[(0,te.jsx)(p()._H,{id:"securityTabs.dataRetention.title",defaultMessage:"Data retention"}),(0,te.jsx)(n(989377).Z,{newBadgeKey:"data_retention_settings",didUserEngage:!1})]})},fi=(0,gn().Yd)(gi),hi=fi.map((e=>gi[e])),yi=.5;const vi=function(e){let{securitySettingsStore:t,spaceStore:n,organizationOverrides:s}=e;const l=(0,o().O7)(),d=(0,r().yK)((()=>({tabMenu:{marginBottom:24}})),[]),c=(0,a().VK)((()=>Ot().default.state.online),[]),u=(0,a().VK)((()=>ct().default.getState().defaultSubtab),[]),[m,g]=(0,i.useState)((()=>u&&fi.includes(u)?fi.indexOf(u):0)),f=(0,i.useCallback)((e=>{v().kA(l,{tab:fi[e]}),g(e)}),[g,l]);return c?(0,te.jsx)(Rt().ZP,{children:(0,te.jsxs)("div",{children:[(0,te.jsx)(ae().Z,{large:!0,divider:"full",children:(0,te.jsx)(p()._H,{id:"securitySettings.securityAndData.title",defaultMessage:"Security & data"})}),(0,te.jsx)(mi().Z,{tabs:hi,selectedIndex:m,onChange:f,style:d.tabMenu}),0===m?(0,te.jsx)(Li,{securitySettingsStore:t,spaceStore:n,organizationOverrides:s}):(0,te.jsx)(Xn,{spaceStore:n})]})}):(0,te.jsx)(xi,{})};function xi(){return(0,te.jsx)(Rt().ZP,{children:(0,te.jsx)(me().Z,{isSmall:!0,isMultiline:!0,style:{textAlign:"center"},children:(0,te.jsx)(p()._H,{defaultMessage:"Please go online to manage security settings.",id:"securitySAMLSettings.offline.message"})})})}function bi(e,t,n,i){hn().y(i,{spaceStore:n,securitySettingsStore:t,fields:e})}function Si(e){return{fontWeight:g().Ue.medium,fontSize:18,borderBottom:`1px solid ${e.regularDividerColor}`,paddingBottom:6,marginBottom:12,display:"flex",alignItems:"center"}}function Mi(e){let{billingData:t}=e;const n=(0,r().Fg)(),i=(0,a().VK)((()=>(0,xn().J)({billingData:t})),[t]),o=(0,a().VK)((()=>(0,ni().Rs)()),[]);return i?null:(0,te.jsxs)("div",{style:{border:`1px solid ${n.regularDividerColor}`,borderRadius:4,padding:16,marginTop:void 0,marginBottom:24},children:[!o&&(0,te.jsx)(ti().Z,{subscriptionTier:"business",from:"space_saml",upgradeMessage:(0,te.jsx)(p()._H,{id:"securitySAMLSettings.upsell.button.business",defaultMessage:"Upgrade to Business"}),title:(0,te.jsx)(p()._H,{id:"securitySAMLSettings.upsell.title.business",defaultMessage:"Upgrade for SAML SSO & more admin tools"}),caption:(0,te.jsx)(p()._H,{id:"securitySAMLSettings.upsell.caption.business",defaultMessage:"The Business Plan includes single sign-on to manage employee access at scale, private teamspaces to collaborate on sensitive docs, and more."}),learnMoreRoute:"guides.securitySettings",style:{marginBottom:"20px"}}),(0,te.jsx)(ti().Z,{subscriptionTier:"enterprise",from:"space_saml",upgradeMessage:(0,te.jsx)(p()._H,{id:"securitySAMLSettings.upsell.button.enterprise",defaultMessage:"Upgrade to Enterprise"}),title:(0,te.jsx)(p()._H,{id:"securitySAMLSettings.upsell.title.enterprise",defaultMessage:"Upgrade for SCIM, advanced security & more"}),caption:(0,te.jsx)(p()._H,{id:"securitySAMLSettings.upsell.caption.enterprise",defaultMessage:"The Enterprise Plan allows you to automatically provision users and groups, and gain more visibility and controls across the workspace."}),learnMoreRoute:"guides.securitySettings"})]})}function ji(e,t){const{subscriptionTier:n="enterprise"}=t||{};Ct().y(e,{from:"space_saml",upsell:{type:"product",product:n,limit:{type:"none"}}})}function Ci(e,t,n,i){const{name:o,isToggleEnabled:s,showUpgradeIfDisabled:a}=e;if(!s)return a?ji(i):void 0;bi({[o]:!t.state[o]},t,n,i)}function wi(e){let{style:t,subscriptionTier:n="enterprise"}=e;const i=(0,o().O7)();return(0,te.jsx)(ei().Z,{subscriptionTier:n,analyticsName:"space_saml",onClick:()=>ji(i,{subscriptionTier:n}),desktopStyle:{display:"inline-block",marginLeft:8,marginTop:-3,...t}})}function ki(e){let{requestTogglesAvailableForTier:t,spaceStore:n,securitySettingsStore:i,organizationOverrides:s}=e;const r=(0,o().O7)(),l=(0,a().VK)((()=>(0,yn().U)(n,r)),[n,r]),d=(0,a().VK)((()=>(0,bn().bq)()),[]),c=(0,a().VK)((()=>t&&!Boolean(i.state.disableMembershipRequests)),[t,i]),u=(0,a().VK)((()=>t&&!Boolean(i.state.disableExternalMembershipRequests)),[t,i]),p=(0,a().VK)((()=>t&&!Boolean(i.state.disableGuestMembershipRequests)),[t,i]);return(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(pi().dy,{environment:r,toggleOn:c,onClick:()=>Ci({name:"disableMembershipRequests",isToggleEnabled:t,showUpgradeIfDisabled:!1},i,n,r),isReadOnly:!1,upsellOrigin:"space_saml",style:{marginBottom:24},shouldShowUpsell:!t,isControlledByOrganization:Boolean(s.disable_membership_requests)}),d&&(0,te.jsx)(pi().ms,{environment:r,toggleOn:u,onClick:()=>Ci({name:"disableExternalMembershipRequests",isToggleEnabled:t,showUpgradeIfDisabled:!1},i,n,r),isReadOnly:!1,upsellOrigin:"space_saml",style:{marginBottom:24},shouldShowUpsell:!t,isControlledByOrganization:Boolean(s.disable_external_membership_requests)}),l&&(0,te.jsx)(pi().Xr,{environment:r,toggleOn:p,onClick:()=>Ci({name:"disableGuestMembershipRequests",isToggleEnabled:t,showUpgradeIfDisabled:!1},i,n,r),isReadOnly:!1,upsellOrigin:"space_saml",style:{marginBottom:24},shouldShowUpsell:!t,isControlledByOrganization:Boolean(s.disable_guest_membership_requests)})]})}function _i(e){let{toggleAvailableForTier:t,guestCount:n,securitySettingsStore:i,spaceStore:s,publicAccessRequestsExpEnabled:r,isControlledByOrganization:l}=e;const d=(0,o().O7)(),c=(0,a().Kw)(i),u=(0,a().VK)((()=>!t||r&&!i.state.disablePublicAccessRequests),[t,i,r]),m=(0,a().VK)((()=>t?u||l?()=>{}:()=>async function(e,t,n){const i=e.state.disableGuests,o=e.state.enableGuestInviteRequests;if(i)bi({disableGuests:!i,...o&&{enableGuestInviteRequests:!o}},e,t,n);else{if(ye().default.checkGate({gateName:"show_keep_existing_guests_modal"}))return void e.setState({...e.state,disableGuestsModalOpen:!0});{const{accept:e}=await x().gt({message:(0,te.jsx)(p()._H,{id:"securitySAMLSettings.disableGuests.confirmationModal.message",defaultMessage:"Are you sure? All guests in this workspace will be removed."}),acceptLabel:(0,te.jsx)(p()._H,{id:"securitySAMLSettings.disableGuests.confirmationModal.confirmButton.label",defaultMessage:"Yes"})});if(!e)return}bi({disableGuests:!i},e,t,n)}}(i,s,d):()=>ji(d)),[d,t,i,s,u,l]);return(0,te.jsxs)("div",{children:[(0,te.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[(0,te.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[(0,te.jsx)(p()._H,{id:"securitySAMLSettings.guestsSection.disableGuests.label",defaultMessage:"Disable members inviting guests to pages"}),!t&&(0,te.jsx)(wi,{}),(0,te.jsx)(me().Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,te.jsx)(p()._H,{id:"securitySAMLSettings.guestsSection.disableGuests.caption",defaultMessage:"Your workspace currently has <gueststablink> {guestCount, plural, one {1 guest} other {{guestCount} guests}}</gueststablink>",values:{gueststablink:e=>(0,te.jsx)(ui().Z,{onClick:()=>{fn().jk(d,{source_tab:ct().default.state.currentTab,destination_tab:"members",destination_subtab:Jn().Q.Guests}),ct().default.setState({...ct().default.state,currentTab:"members",defaultSubtab:Jn().Q.Guests})},children:e}),guestCount:n}})})]}),(0,te.jsx)("div",{onClick:m,style:{marginTop:5,opacity:u?yi:void 0},children:(0,te.jsx)(si().Z,{on:c.disableGuests,disabled:u,isLocked:l,lockedTooltip:(0,vn().g)()})})]}),(0,te.jsx)(ii().Z,{size:24,style:{opacity:0}}),(0,te.jsx)(di,{isOpen:Boolean(c.disableGuestsModalOpen),onDismiss:()=>{i.setState({...i.state,disableGuestsModalOpen:!1})},onSave:e=>{bi({disableGuests:!0,keepExistingGuests:e},i,s,d),i.setState({...i.state,disableGuestsModalOpen:!1})},guestCount:n})]})}function Ti(e){let{toggleAvailableForTier:t,securitySettingsStore:n,spaceStore:i,publicAccessRequestsExpEnabled:s,isControlledByOrganization:r}=e;const l=(0,o().O7)(),d=(0,a().VK)((()=>!t||!n.state.disableGuests||s&&!n.state.disablePublicAccessRequests),[n,t,s]),c=(0,a().VK)((()=>t&&d?()=>{}:()=>{r||Ci({name:"enableGuestInviteRequests",isToggleEnabled:t,showUpgradeIfDisabled:!0},n,i,l)}),[l,t,n,i,d,r]),u=(0,a().VK)((()=>(0,ge().p1)()),[]),m=(0,a().VK)((()=>!t||n.state.disableGuests),[n,t]);return(0,te.jsxs)("div",{children:[(0,te.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[(0,te.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[(0,te.jsxs)("div",{style:{display:"inline-flex",alignItems:"center"},children:[(0,te.jsx)(p()._H,{id:"securitySAMLSettings.guestsSection.enableGuestInviteRequests.label",defaultMessage:"Allow members to request adding guests"}),t&&(0,te.jsx)(_n().Z,{style:{marginLeft:0},href:(0,Ee().UY)("guides.guestRequests"),analyticsFrom:"space_saml"}),!t&&(0,te.jsx)(wi,{style:{marginTop:0}})]}),(0,te.jsx)(me().Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,te.jsx)(p()._H,{id:"securitySAMLSettings.guestsSection.enableGuestInviteRequests.caption",defaultMessage:"{hasRequestTab, select, true {Requests must be approved by a workspace owner. You can view all requests <requeststablink>here</requeststablink>} other {Requests must be approved by a workspace owner}}",values:{hasRequestTab:u,requeststablink:e=>(0,te.jsx)(ui().Z,{onClick:()=>{fn().jk(l,{source_tab:ct().default.state.currentTab,destination_tab:"members",destination_subtab:Jn().Q.Requests}),ct().default.setState({...ct().default.state,currentTab:"members",defaultSubtab:Jn().Q.Requests})},children:e})}})})]}),(0,te.jsx)(pe().Z,{render:e=>(0,te.jsx)("div",{onClick:c,style:{marginTop:5,opacity:d?yi:void 0},...e,children:(0,te.jsx)(si().Z,{on:n.state.enableGuestInviteRequests,disabled:d,isLocked:r,lockedTooltip:(0,vn().g)()})}),renderTooltip:()=>(0,te.jsx)("div",{style:{},children:(0,te.jsx)(p()._H,{id:"securitySAMLSettings.guestsSection.enableGuestInviteRequests.disabled.label",defaultMessage:"Disable inviting guests to use this feature"})}),disableTooltip:m,placement:he().Placement.Top})]}),(0,te.jsx)(ii().Z,{size:24,style:{opacity:0}})]})}function Ii(e){let{disableGuestsAvailableForTier:t,enableGuestInviteRequestAvailableForTier:n,enableExternalAccessRequestSettingForTier:i,securitySettingsStore:o,spaceStore:s,organizationOverrides:a}=e;return(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(ae().Z,{large:!0,divider:"full",children:(0,te.jsx)(p()._H,{id:"securitySAMLSettings.guestsSection.title",defaultMessage:"Inviting members & guests"})}),(0,te.jsx)(Pi,{securitySettingsStore:o,spaceStore:s,disableGuestsAvailableForTier:t,enableGuestInviteRequestAvailableForTier:n,enableExternalAccessRequestSettingForTier:i,organizationOverrides:a})]})}function Pi(e){let{disableGuestsAvailableForTier:t,enableGuestInviteRequestAvailableForTier:n,enableExternalAccessRequestSettingForTier:i,securitySettingsStore:o,spaceStore:s,organizationOverrides:r}=e;const l=(0,a().Kw)(_t().subscriptionDataStoreInstance),d=(0,a().VK)((()=>(0,ge().p1)()),[]),c=(0,a().VK)((()=>ye().default.checkGate({gateName:"allow_public_page_access_request",disableExposureLogging:!0})),[]),u=(0,Sn().Y)(l);return void 0===u?(0,te.jsx)(oi().Z,{}):(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(Di,{spaceStore:s,securitySettingsStore:o,toggleAvailableForTier:i,publicAccessRequestsExpEnabled:c}),(0,te.jsx)(_i,{securitySettingsStore:o,spaceStore:s,toggleAvailableForTier:t,guestCount:u,publicAccessRequestsExpEnabled:c,isControlledByOrganization:Boolean(r.disable_guests)}),(0,te.jsx)(Ti,{securitySettingsStore:o,spaceStore:s,toggleAvailableForTier:n,publicAccessRequestsExpEnabled:c,isControlledByOrganization:Boolean(r.enable_guest_invite_requests)}),(0,te.jsx)(ki,{spaceStore:s,securitySettingsStore:o,requestTogglesAvailableForTier:d,organizationOverrides:r})]})}function Ai(e){let{enable:t,featureUpsellButton:n,securitySettingsStore:i,spaceStore:s,isControlledByOrganization:r}=e;const l=(0,o().O7)(),d=(0,a().VK)((()=>i.state.disablePublicAccess),[i]);return(0,te.jsxs)("div",{children:[(0,te.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:t?()=>{r||async function(e,t,n){const i=e.state.disablePublicAccess;if(!i){const{accept:e}=await x().gt({message:(0,te.jsx)(p()._H,{id:"securitySAMLSettings.preventPublicSharing.confirmationModal.message",defaultMessage:"Are you sure you want to disable publishing sites and forms?"}),description:(0,te.jsx)(p()._H,{id:"securitySAMLSettings.preventPublicSharing.confirmationModal.description",defaultMessage:"This will remove access for anyone who is not a member or guest of the workspace from all pages in this workspace."}),acceptLabel:(0,te.jsx)(p()._H,{id:"securitySAMLSettings.preventPublicSharing.confirmationModal.confirmButton.label",defaultMessage:"Yes"})});if(!e)return}bi({disablePublicAccess:!i},e,t,n)}(i,s,l)}:()=>ji(l),children:[(0,te.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[(0,te.jsx)(p()._H,{id:"securitySAMLSettings.securitySection.preventPublicSharing.label",defaultMessage:"Disable publishing sites and forms"}),!t&&n,(0,te.jsx)(me().Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,te.jsx)(p()._H,{id:"securitySAMLSettings.securitySection.preventPublicSharing.caption",defaultMessage:"Disable the Share to web option in the Share menu on every page and form in this workspace."})})]}),(0,te.jsx)("div",{style:{marginTop:5,opacity:t?void 0:yi},children:(0,te.jsx)(si().Z,{on:d,disabled:!t,isLocked:r,lockedTooltip:(0,vn().g)()})})]}),(0,te.jsx)(ii().Z,{size:24,style:{opacity:0}})]})}function Ri(e){let{enable:t,featureUpsellButton:n,securitySettingsStore:i,spaceStore:s}=e;const r=(0,o().O7)(),l=(0,a().VK)((()=>i.state.disableSpacePageEdits),[i]);return(0,a().VK)((()=>(0,bn().bq)()),[])?null:(0,te.jsxs)("div",{children:[(0,te.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:()=>Ci({name:"disableSpacePageEdits",isToggleEnabled:t,showUpgradeIfDisabled:!0},i,s,r),children:[(0,te.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[(0,te.jsx)(p()._H,{id:"securitySAMLSettings.securitySection.disableSpacePageEdits.label",defaultMessage:"Prevent members from editing the Workspace section"}),!t&&n,(0,te.jsx)(me().Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"85%"},children:(0,te.jsx)(p()._H,{id:"securitySAMLSettings.securitySection.disableSpacePageEdits.caption",defaultMessage:"Disable the ability for members to create, move, reorder, and delete top-level Workspace pages."})})]}),(0,te.jsx)("div",{style:{marginTop:5,opacity:t?void 0:yi},children:(0,te.jsx)(si().Z,{on:l,disabled:!t})})]}),(0,te.jsx)(ii().Z,{size:24,style:{opacity:0}})]})}function Zi(e){let{enable:t,spaceStore:n,securitySettingsStore:i,featureUpsellButton:s,isControlledByOrganization:r}=e;const l=(0,o().O7)(),d=(0,a().VK)((()=>i.state.disableMoveToSpace),[i]);return(0,te.jsxs)("div",{children:[(0,te.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:()=>{r||Ci({name:"disableMoveToSpace",isToggleEnabled:t,showUpgradeIfDisabled:!0},i,n,l)},children:[(0,te.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[(0,te.jsx)(p()._H,{id:"securitySAMLSettings.securitySection.disableMovingPages.label",defaultMessage:"Disable duplicating pages to other workspaces"}),!t&&s,(0,te.jsx)(me().Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,te.jsx)(p()._H,{id:"securitySAMLSettings.securitySection.disableMovingPages.caption",defaultMessage:"Prevent anyone from duplicating pages to other workspaces via the Move To or Duplicate To actions."})})]}),(0,te.jsx)("div",{style:{marginTop:5,opacity:t?void 0:yi},children:(0,te.jsx)(si().Z,{on:d,disabled:!t,isLocked:r,lockedTooltip:(0,vn().g)()})})]}),(0,te.jsx)(ii().Z,{size:24,style:{opacity:0}})]})}function Bi(e){let{enable:t,securitySettingsStore:n,spaceStore:i,featureUpsellButton:s,isControlledByOrganization:r}=e;const l=(0,o().O7)(),d=(0,a().VK)((()=>n.state.disableExport),[n]);return(0,te.jsxs)("div",{children:[(0,te.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:()=>{r||Ci({name:"disableExport",isToggleEnabled:t,showUpgradeIfDisabled:!0},n,i,l)},children:[(0,te.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[(0,te.jsx)(p()._H,{id:"securitySAMLSettings.securitySection.disableExport.label",defaultMessage:"Disable export"}),!t&&s,(0,te.jsx)(me().Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,te.jsx)(p()._H,{id:"securitySAMLSettings.securitySection.disableExport.caption",defaultMessage:"Prevent anyone from exporting as Markdown, CSV, or PDF."})})]}),(0,te.jsx)("div",{style:{marginTop:5,opacity:t?void 0:yi},children:(0,te.jsx)(si().Z,{on:d,disabled:!t||r,isLocked:r,lockedTooltip:(0,vn().g)()})})]}),(0,te.jsx)(ii().Z,{size:24,style:{opacity:0}})]})}function Di(e){let{securitySettingsStore:t,spaceStore:n,publicAccessRequestsExpEnabled:i,toggleAvailableForTier:s,isControlledByOrganization:r}=e;const l=(0,o().O7)(),d=(0,a().VK)((()=>t.state.disablePublicAccessRequests),[t]),c=(0,a().VK)((()=>{if(!s)return()=>ji(l,{subscriptionTier:"plus"});const e=!t.state.disablePublicAccessRequests,i=!e;return()=>{r||bi({disablePublicAccessRequests:e,...i&&{disableGuests:!1,enableGuestInviteRequests:!1}},t,n,l)}}),[l,n,t,s,r]);return i?(0,te.jsxs)("div",{children:[(0,te.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:c,children:[(0,te.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[(0,te.jsx)(p()._H,{id:"securitySAMLSettings.securitySection.disablePublicAccessRequests.label",defaultMessage:"Allow page access requests from non-members"}),!s&&(0,te.jsx)(wi,{subscriptionTier:"plus"}),(0,te.jsx)(me().Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,te.jsx)(p()._H,{id:"securitySAMLSettings.securitySection.disablePublicAccessRequests.caption",defaultMessage:"This allows anyone with the link to a page to request access. Workspace members can always request access."})})]}),(0,te.jsx)("div",{style:{marginTop:5,opacity:s?void 0:yi},children:(0,te.jsx)(si().Z,{on:!d,disabled:!s,isLocked:r,lockedTooltip:(0,vn().g)()})})]}),(0,te.jsx)(ii().Z,{size:24,style:{opacity:0}})]}):null}function Li(e){let{securitySettingsStore:t,spaceStore:n,organizationOverrides:o}=e;const s=(0,r().Fg)(),l=(0,Wt().pQ)({spaceId:n.id}),d=(0,a().VK)((()=>(0,xn().J)({billingData:l})),[l]),c=(0,a().Kw)(t),u=(0,Mn().E)("cdrr_deletion_enabled"),m=(0,a().VK)((()=>(0,ni().wP)()),[]),g=(0,a().VK)((()=>(0,ni().mq)()),[]),f=(0,te.jsx)(wi,{});return d?(0,te.jsxs)(i.Fragment,{children:[(0,te.jsx)(ae().Z,{large:!0,divider:"full",children:(0,te.jsx)(p()._H,{id:"securitySAMLSettings.generalSection.title",defaultMessage:"General"})}),(0,te.jsx)(Ai,{enable:!0,spaceStore:n,securitySettingsStore:t,featureUpsellButton:f,isControlledByOrganization:Boolean(o.disable_public_access)}),(0,te.jsx)(Ri,{enable:!0,spaceStore:n,securitySettingsStore:t,featureUpsellButton:f}),(0,te.jsx)(Zi,{enable:!0,spaceStore:n,securitySettingsStore:t,featureUpsellButton:f,isControlledByOrganization:Boolean(o.disable_move_to_space)}),(0,te.jsx)(Bi,{enable:!0,spaceStore:n,securitySettingsStore:t,featureUpsellButton:f,isControlledByOrganization:Boolean(o.disable_export)}),(0,te.jsx)(Ii,{securitySettingsStore:t,spaceStore:n,disableGuestsAvailableForTier:!0,enableGuestInviteRequestAvailableForTier:m,enableExternalAccessRequestSettingForTier:g,organizationOverrides:o}),(0,te.jsx)("div",{style:{height:36}})]}):(0,te.jsxs)(i.Fragment,{children:[u?null:(0,te.jsx)(Mi,{billingData:l}),(0,te.jsx)("div",{style:Si(s),children:(0,te.jsx)("span",{style:{marginRight:8},children:(0,te.jsx)(p()._H,{id:"securitySAMLSettings.generalSection.title",defaultMessage:"General"})})}),(0,te.jsx)(Ai,{enable:c.disablePublicAccess,spaceStore:n,securitySettingsStore:t,featureUpsellButton:f,isControlledByOrganization:Boolean(o.disable_public_access)}),(0,te.jsx)(Ri,{enable:c.disableSpacePageEdits,spaceStore:n,securitySettingsStore:t,featureUpsellButton:f}),(0,te.jsx)(Zi,{enable:c.disableMoveToSpace,spaceStore:n,securitySettingsStore:t,featureUpsellButton:f,isControlledByOrganization:Boolean(o.disable_move_to_space)}),(0,te.jsx)(Bi,{enable:c.disableExport,spaceStore:n,securitySettingsStore:t,featureUpsellButton:f,isControlledByOrganization:Boolean(o.disable_export)}),(0,te.jsx)(Ii,{securitySettingsStore:t,spaceStore:n,disableGuestsAvailableForTier:c.disableGuests,enableGuestInviteRequestAvailableForTier:c.enableGuestInviteRequests,enableExternalAccessRequestSettingForTier:g,organizationOverrides:o}),(0,te.jsx)("div",{style:{height:32}})]})}var Oi=()=>n(454598),Hi=()=>n(756085);function Vi(e){let{spaceStore:t}=e;const n=(0,p().YB)(),{setPage:o}=(0,i.useContext)(Yt);return(0,te.jsxs)(ht().jX,{height:"fill",direction:"column",gap:32,padding:"40px 60px",children:[(0,te.jsxs)(ht().jX,{direction:"row",gap:6,children:[(0,te.jsx)($t().Z,{ariaLabel:"back",icon:Hi().f,onClick:()=>o("home")}),(0,te.jsx)(vt().q,{styleName:"UIHeader-17px/Medium",colorName:"primary",children:n.formatMessage(Ei.title)})]}),(0,te.jsx)(Ui,{spaceStore:t})]})}function Ui(e){let{spaceStore:t}=e;const n=(0,Tt().p)({spaceId:t.id}),i=(0,a().VK)((()=>(0,xn().J)({billingData:n})),[n]),o=(0,a().qz)(void 0,st().Z);(0,s().K)((()=>{const e=o.getValueForSpace(t);e&&o.setState(e)}));const r=(0,a().Kw)(o),{organizationOverrides:l}=(0,Oi().u)({spaceId:t.id}),d=(0,c().zt)(null==n?void 0:n.subscription),p=(0,a().VK)((()=>(0,u().wP)(d)),[d]),m=(0,a().VK)((()=>(0,u().mq)(d)),[d]);return i?(0,te.jsx)(Pi,{securitySettingsStore:o,spaceStore:t,disableGuestsAvailableForTier:!0,enableExternalAccessRequestSettingForTier:m,enableGuestInviteRequestAvailableForTier:p,organizationOverrides:l}):(0,te.jsx)(Pi,{securitySettingsStore:o,spaceStore:t,disableGuestsAvailableForTier:r.disableGuests,enableExternalAccessRequestSettingForTier:m,enableGuestInviteRequestAvailableForTier:r.enableGuestInviteRequests,organizationOverrides:l})}const Ei=(0,p().vU)({title:{id:"RequestsSettingPage.PeopleInvitationSettings.title",defaultMessage:"Inviting guests and members"}});var Ni=()=>n(450601);function Fi(){const e=(0,p().YB)(),{setPage:t}=(0,i.useContext)(Yt);return(0,te.jsxs)(ht().jX,{height:"fill",direction:"column",gap:32,padding:"40px 60px",children:[(0,te.jsxs)(ht().jX,{direction:"row",gap:6,children:[(0,te.jsx)($t().Z,{ariaLabel:"back",icon:Hi().f,onClick:()=>t("home")}),(0,te.jsx)(vt().q,{styleName:"UIHeader-17px/Medium",colorName:"primary",children:e.formatMessage(zi.title)})]}),(0,te.jsx)(Ki,{})]})}function Ki(){const e=(0,p().YB)(),t=(0,r().yK)((e=>({icon:{height:48,width:48,fill:e.icon.tertiary}})),[]),n=(0,a().VK)((()=>(0,Ni().l)(t.icon)),[t.icon]);return(0,te.jsxs)(ht().jX,{gap:16,align:"center",direction:"column",padding:"32px 0 88px 0",height:"fill",children:[(0,te.jsx)("div",{children:n}),(0,te.jsx)(vt().q,{customStyles:{textAlign:"center"},styleName:"UIRegular-14px/Regular",colorName:"secondary",children:e.formatMessage(zi.noPendingRequests)}),(0,te.jsx)(xt().Z,{onClick:()=>{},ariaLabel:"invite",children:(0,te.jsx)(vt().q,{customStyles:{textAlign:"center"},styleName:"UIRegular-14px/Medium",children:e.formatMessage(zi.invite)})})]})}const zi=(0,p().vU)({title:{id:"RequestsSettingPage.PeopleInvitations.title",defaultMessage:"People"},noPendingRequests:{id:"RequestsSettingPage.PeopleInvitations.noPendingRequests",defaultMessage:"No pending requests in your workspace"},invite:{id:"RequestsSettingPage.PeopleInvitations.invite",defaultMessage:"Invite"}});var Wi=()=>n(802321),qi=()=>n(789938),Gi=()=>n(167705),Yi=()=>n(661849),$i=()=>n(338217);var Xi=()=>n(539306);function Qi(e){let{spaceStore:t}=e;const n=(0,p().YB)(),{setPage:o}=(0,i.useContext)(Yt),{requests:s}=(0,an().p)({spaceId:t.id});if(!s)return null;const a=(0,gn().qP)(s).map((e=>{let[n,i]=e;return(0,te.jsx)(Ji,{requestType:n,requests:i,spaceStore:t},n)}));return(0,te.jsxs)(ht().jX,{height:"fill",direction:"column",gap:32,padding:"40px 60px",children:[(0,te.jsxs)(ht().jX,{direction:"row",gap:6,children:[(0,te.jsx)($t().Z,{ariaLabel:"back",icon:Hi().f,onClick:()=>o("home")}),(0,te.jsx)(vt().q,{styleName:"UIHeader-17px/Medium",colorName:"primary",children:n.formatMessage(lo.title)})]}),a]})}function Ji(e){let{expandByDefault:t=!1,requestType:n,requests:s,spaceStore:a}=e;const r=(0,o().O7)(),l=(0,Tt().p)({spaceId:a.id}),[d,c]=i.useState(t),u=(0,p().YB)(),m=function(e){switch(e){case"ai":return lo.aiUpgrade;case"business":case"enterprise":return lo.planUpgrade;default:return null}}(n);return(0,te.jsxs)("div",{children:[(0,te.jsx)(En().Z,{title:(0,te.jsx)(eo,{requestType:n,requestCount:s.length,isExpanded:d,handleClick:()=>{c(!d)}}),type:"custom",isMobile:!1,disableSettingsItemClick:!0,customButton:m&&(0,te.jsx)(kn().Z,{onClick:async()=>{await(0,Xi().l)({environment:r,spaceStore:a,billingData:l,product:n,from:"upgrade_requests_page"})},children:u.formatMessage(m)})}),d&&(0,te.jsx)(ro,{spaceStore:a,requests:s})]})}function eo(e){let{handleClick:t,isExpanded:n,requestType:i,requestCount:o}=e;const s=(0,p().YB)(),a=function(e){switch(e){case"ai":return lo.ai;case"business":return lo.business;case"enterprise":return lo.enterprise;default:return null}}(i),l=(0,r().yK)((e=>({toggleButton:{color:e.icon.secondary}})),[]);return(0,te.jsxs)(ht().jX,{direction:"row",gap:6,align:"center-left",children:[(0,te.jsx)(Gi().Z,{isSidebar:!1,fill:!0,onClick:()=>{t()},open:n,color:l.toggleButton.color}),a&&(0,te.jsx)(vt().q,{styleName:"UIRegular-14px/Medium",colorName:"primary",children:s.formatMessage(a)}),(0,te.jsx)(vt().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:o})]})}const to={id:"note",headerTitle:(0,te.jsx)(p()._H,{id:"RequestsSettingsPage.UpgradesPage.noteColumn",defaultMessage:"Note"}),renderCell:e=>{let{value:t}=e;const n=t.reason_for_request??"—";return(0,te.jsx)(vt().q,{children:n})},sortable:!1,widthData:{minWidth:150,maxWidth:310,widthPercent:37}};function no(e){let{value:t,isRowHovered:n}=e;const i=(0,r().yK)((e=>({icon:{height:14,width:14,color:e.icon.secondary}})),[]);return(0,te.jsx)(ht().jX,{direction:"row",width:"fill",gap:"auto",align:"center",children:n&&(0,te.jsx)(pe().Z,{placement:he().Placement.Top,renderTooltip:()=>(0,te.jsx)(p()._H,{id:"RequestsSettingsPage.UpgradesPage.displayRequestToolTip",defaultMessage:"View Detail"}),render:e=>(0,te.jsx)($t().Z,{ariaLabel:"View Detail",hasBackground:!0,icon:$i().J,showShadow:!0,iconStyle:i.icon,onClick:e=>{e.stopPropagation()},...e})})})}const io={id:"date",headerTitle:(0,te.jsx)(p()._H,{id:"RequestsSettingsPage.UpgradesPage.dateColumn",defaultMessage:"Date"}),renderCell:e=>{let{value:t}=e;return(0,te.jsx)(Wi().T,{dateTs:t.created_time})},sortable:!1,widthData:{minWidth:150,maxWidth:240,widthPercent:26}},oo={id:"dateWithViewDetail",headerTitle:"",renderCell:e=>{let{value:t,isRowHovered:n}=e;return(0,te.jsx)(no,{value:t,isRowHovered:n})},sortable:!1,widthData:{minWidth:30,maxWidth:30,widthPercent:4}},so=[{id:"requestedBy",headerTitle:(0,te.jsx)(p()._H,{id:"RequestsSettingsPage.UpgradesPage.requestedByColumn",defaultMessage:"Requested By"}),renderCell:e=>{let{userStore:t}=e;return(0,te.jsx)(qi().G,{useSecondaryColorTitle:!0,userStores:[t]})},sortable:!1,widthData:{minWidth:150,maxWidth:240,widthPercent:30}},to,io,oo],ao=8;function ro(e){let{requests:t,spaceStore:n}=e;const o=(0,r().yK)((e=>{const t=(0,ce().bE)({columnRenderInfo:so,theme:e,containerMarginTop:8});return{...t,container:{...t.container,width:"100%"}}}),[]),s=t.map((e=>({value:e,userStore:(0,Yi().o)({userId:e.created_by_id,currentSpaceStore:n}),id:e.id,isClickable:!0}))),{pageRows:a,loadMoreMethod:l}=function(e){let{rows:t,limit:n}=e;const[o,s]=(0,i.useState)(n),[a,r]=(0,i.useState)(0),l=t.length,d=l>n;return{pageRows:(0,i.useMemo)((()=>d?t.slice(a,o):t),[t,a,o,d]),loadMoreMethod:(0,i.useMemo)((()=>{if(d)return{type:"pages",onLoadNext:()=>{if(o>=l)return;const e=Math.min(o+n,l);s(e),r(a+n)},onLoadPrevious:()=>{0!==a&&(s(a),r(a-n))},hasNextPage:o<l,hasPrevPage:a>0,currentPage:Math.floor(a/n)+1,finalPage:Math.floor(l/n)+1}}),[l,a,o,n,d])}}({rows:s,limit:ao});return(0,te.jsx)(ce().Dp,{columnRenderInfo:so,rows:a,renderNoRowsComponent:()=>null,styles:o,loadMoreMethod:l,onRowClick:e=>{e.value}})}const lo=(0,p().vU)({title:{id:"RequestsSettingPage.UpgradePage.title",defaultMessage:"Upgrades"},aiUpgrade:{id:"RequestsSettingsPage.UpgradesPage.aiUpgrade",defaultMessage:"Upgrade AI"},planUpgrade:{id:"RequestsSettingsPage.UpgradesPage.planUpgrade",defaultMessage:"Upgrade Plan"},ai:{id:"RequestsSettingsPage.UpgradesPage.notionAI",defaultMessage:"Notion AI"},business:{id:"RequestsSettingsPage.UpgradesPage.business",defaultMessage:"Business"},enterprise:{id:"RequestsSettingsPage.UpgradesPage.enterprise",defaultMessage:"Enterprise"}});function co(e){let{spaceStore:t}=e;const[n,o]=(0,i.useState)("home");return(0,te.jsx)(Yt.Provider,{value:{currentPage:n,setPage:o},children:(0,te.jsx)(uo,{spaceStore:t})})}function uo(e){let{spaceStore:t}=e;const{currentPage:n}=(0,i.useContext)(Yt);switch(n){case"home":return(0,te.jsx)(ln,{spaceStore:t});case"people_invitations":return(0,te.jsx)(Fi,{});case"people_invitation_settings":return(0,te.jsx)(Vi,{spaceStore:t});case"upgrades":return(0,te.jsx)(Qi,{spaceStore:t});default:return null}}var po=()=>n(645491);const mo={VerifiedPagesSettings:new(Pe().Ss)("VerifiedPagesSettings",(()=>Promise.all([n.e(62904),n.e(19454)]).then(n.bind(n,378341))))},go=(0,Pe().kF)(mo.VerifiedPagesSettings,(e=>e.VerifiedPagesSettings));var fo=()=>n(822819),ho=()=>n(255933),yo=()=>n(158792),vo=()=>n(88142),xo=()=>n(423402),bo=()=>n(68247),So=()=>n(853648),Mo=(n(670560),n(731107),n(228244),()=>n(714230)),jo=()=>n(48826),Co=()=>n(705214),wo=()=>n(657120),ko=()=>n(921787),_o=()=>n(636340),To=()=>n(993261),Io=()=>n(379936),Po=()=>n(521694),Ao=()=>n(666830),Ro=()=>n(853946),Zo=()=>n(202787),Bo=()=>n(138912),Do=()=>n(487985),Lo=()=>n(254687),Oo=()=>n(546464),Ho=()=>n(419157),Vo=()=>n(568017),Uo=()=>n(521777),Eo=()=>n(104088),No=()=>n(235484),Fo=()=>n(85073),Ko=()=>n(342792),zo=()=>n(205228),Wo=()=>n(352230),qo=()=>n(98228),Go=()=>n(154439),Yo=()=>n(827973),$o=()=>n(198829),Xo=()=>n(18748),Qo=()=>n(255577),Jo=()=>n(943620),es=()=>n(388284),ts=()=>n(497459);function ns(e){const{query:t}=e,n=(0,o().O7)(),s=(0,a().VK)((()=>et().default.state.currentSpaceStore),[]),r=(0,a().VK)((()=>null==s?void 0:s.getBotSettingsStore().getValue()),[s]),l="approved_or_built_by_notion"===(null==r?void 0:r.integration_restrictions),d=(0,a().VK)((()=>null!=r&&r.integration_approval_statuses?Object.keys(r.integration_approval_statuses):[]),[r]),c=(0,a().VK)((()=>Object.keys(No().u2).map((e=>{const t=null==s?void 0:s.getRecordModel({id:e,table:Fo().K2});if("published"===(null==t?void 0:t.status))return e})).filter(gn().$K)),[s]),u=(0,i.useMemo)((()=>c.some((e=>e===No().f3))),[c]),m=(0,a().VK)((()=>c.filter((e=>!d.includes(e))).slice(0,5)),[d,c]);return(0,te.jsx)($o().Z,{menuType:Wo().o.Popup,width:255,header:ss(t,m,l),children:(0,te.jsx)(Go().Z,{request:t,performRequest:e=>async function(e){const{query:t,integrationType:n,environment:i,spaceId:o,approvedIntegrationIds:s,popularIntegrationIds:a,autoApproveBuiltByNotion:r}=e;if(!Ot().default.state.online||!o)return[];if((0,Ko().e)(t)||(0,Ko().qn)(t))return[t];if(""===t&&!r)return a;const l=await Z().callApi({eventName:"searchIntegrations",environment:i,data:{query:t,type:n,spaceId:o}});if("success"===l.type){const e=l.data.integrationIds.filter((e=>!s.includes(e))),t="production";if(!r){return e.sort(((e,n)=>(0,No().BP)({integrationId:e,env:t})===(0,No().BP)({integrationId:n,env:t})?0:(0,No().BP)({integrationId:e,env:t})?-1:1)).slice(0,5)}return e.filter((e=>!(0,No().BP)({integrationId:e,env:t}))).slice(0,5)}if("failed"===l.type)throw l.error;return(0,gn().t1)(l)}({query:e,environment:n,spaceId:null==s?void 0:s.id,approvedIntegrationIds:d,popularIntegrationIds:m,autoApproveBuiltByNotion:l}),debounce:qo().vp,render:(i,o,a)=>{if(!o||!a)return(0,te.jsx)(es().Z,{children:(0,te.jsx)(ts().Z,{})});const l=Co().ns.filter((e=>t&&e.name.toLowerCase().includes(t.toLowerCase())&&!d.includes(e.id)&&(e.id!==Co()._o||!u))),c=[];if(0===o.length&&0===l.length)c.push({key:"no_results",render:()=>(0,te.jsx)(me().Z,{isSmall:!0,style:{marginLeft:8},children:(0,te.jsx)(p()._H,{id:"adminIntegrationSettings.search.label.noResults",defaultMessage:"No results"})}),action:()=>{}});else{const t=o.map((t=>{const i={table:Fo().K2,id:t};if(!s)return;const o=J().y2.createChildStore(s,i);if("internal"===o.getType())return;const a=o.getInfo(),l=null==a?void 0:a.icon;return{key:`${t}`,render:e=>(0,te.jsx)(Yo().Z,{...e,title:(0,te.jsx)(me().Z,{style:{fontWeight:g().Ue.semibold},children:o.getName()}),icon:l&&(0,te.jsx)(Jo().Z,{disabled:!0,icon:{pointer:i,icon:l},isEmptyPage:!1,size:20}),style:l?{paddingBottom:12}:{paddingLeft:30,paddingBottom:12},shouldWrapCaption:!0,caption:(0,te.jsx)(as,{tagline:null==a?void 0:a.tagline,isNotionIntegration:(0,No().BP)({integrationId:o.id,env:"production"})}),className:"notranslate"}),action:()=>{e.closeDropdown(),os({environment:n,currentSpaceStore:s,botSettings:r,integrationId:t})}}})).filter(gn().$K),i=l.map((t=>{const i=t.info;return{key:`${t.id}`,render:e=>(0,te.jsx)(Yo().Z,{...e,title:(0,te.jsx)(me().Z,{style:{fontWeight:g().Ue.semibold},children:t.name}),icon:(0,te.jsx)("img",{src:i.icon,style:{height:20}}),caption:i.tagline,style:{paddingBottom:12},shouldWrapCaption:!0,className:"notranslate"}),action:()=>{e.closeDropdown(),os({environment:n,currentSpaceStore:s,botSettings:r,integrationId:t.id})}}})).filter(gn().$K);c.push(...t,...i)}return(0,te.jsx)(Qo().Z,{type:Qo().i.Vertical,initialFocus:0,sections:[{key:"results",render:e=>(0,te.jsx)(es().Z,{...e}),items:c}]})}})})}function is(e){const{query:t}=e,n=(0,o().O7)(),i=(0,a().VK)((()=>et().default.state.currentSpaceStore),[]);return i?(0,te.jsx)($o().Z,{menuType:Wo().o.Popup,width:255,header:ss(t,[],!1),children:(0,te.jsx)(Go().Z,{request:t,performRequest:e=>async function(e){const{query:t,environment:n,spaceId:i}=e;if(!Ot().default.state.online||!i)return[];if((0,Ko().e)(t)||(0,Ko().qn)(t))return[t];const o=await Z().callApi({eventName:"searchIntegrations",environment:n,data:{query:t,type:"compliance",spaceId:i}});if("success"===o.type)return o.data.integrationIds;if("failed"===o.type)throw o.error;return(0,gn().t1)(o)}({query:e,environment:n,spaceId:null==i?void 0:i.id}),debounce:qo().vp,render:(t,n,o)=>{if(!n||!o)return(0,te.jsx)(es().Z,{children:(0,te.jsx)(ts().Z,{})});const s=[];if(0===n.length)s.push({key:"no_results",render:()=>(0,te.jsx)(me().Z,{isSmall:!0,style:{marginLeft:8},children:(0,te.jsx)(p()._H,{id:"adminIntegrationSettings.search.label.noResults",defaultMessage:"No results"})}),action:()=>{}});else{const t=Ao().Z.state.loaded&&Bo().default.state.loaded?Ao().Z.state.webhookSubscriptions.map((e=>{var t;return null===(t=Bo().default.getBotsAsRecordMap().getValue({table:A().cZ,id:e.bot_id}))||void 0===t?void 0:t.integration_id})):[],o=n.map((n=>{var o;const s=J().y2.createChildStore(i,{id:n,table:Fo().K2});if(t.includes(n))return;const a={table:Fo().K2,id:n},r=J().y2.createChildStore(i,a),l=null===(o=r.getInfo())||void 0===o?void 0:o.icon,d=(0,ko().I$)(r.id);return{key:`${n}`,render:e=>(0,te.jsx)(Yo().Z,{...e,title:(0,te.jsxs)("div",{style:{display:"flex",float:"left",alignItems:"center"},children:[(0,te.jsx)(me().Z,{style:{fontWeight:g().Ue.semibold},children:r.getName()}),(null==d?void 0:d.type)&&(0,te.jsx)("div",{style:{marginLeft:4},children:(0,te.jsx)($().Z,{children:d.type})})]}),icon:l&&(0,te.jsx)(Jo().Z,{disabled:!0,icon:{pointer:a,icon:l},isEmptyPage:!1,size:20}),style:null!=d&&d.icon?{paddingBottom:12}:{paddingLeft:30,paddingBottom:12},shouldWrapCaption:!0,caption:(0,te.jsx)(as,{tagline:null!=d&&d.tagline?D().Z.formatMessage(null==d?void 0:d.tagline):"A SIEM or DLP partner",isNotionIntegration:!1})}),action:()=>{var t;e.closeDropdown();s.getModel()&&(null!=d&&null!==(t=d.oauth)&&void 0!==t&&t.accountInfoPropertyNames||"dlp"===(null==d?void 0:d.type))?Zo().Z.setState({open:!0,integrationId:r.id}):Ro().Z.setState({open:!0,integrationId:r.id})}}})).filter(gn().$K);s.push(...o)}return(0,te.jsx)(Qo().Z,{type:Qo().i.Vertical,initialFocus:0,sections:[{key:"results",render:e=>(0,te.jsx)(es().Z,{...e}),items:s}]})}})}):null}function os(e){const{environment:t,currentSpaceStore:n,botSettings:i,integrationId:o}=e;if(n&&!(0,ko().z6)(o)){const e={...null==i?void 0:i.integration_approval_statuses,[o]:{type:"integration",status:"approved"}};w().createAndCommit({userAction:"AdminIntegrationSettingsSearchResults.handleIntegrationSelection",environment:t,canUndo:!0,perform:t=>{_o().sW({store:n,data:{bot_settings:{...i,integration_approval_statuses:e}},transaction:t})}})}}function ss(e,t,n){return!e&&!n&&t.length>0&&(0,te.jsx)(Xo().ZP,{title:(0,te.jsx)(me().Z,{isSmall:!0,style:{marginTop:4,fontWeight:g().Ue.medium},children:(0,te.jsx)(p()._H,{defaultMessage:"Popular integrations",id:"adminIntegrationSettings.search.title.popularIntegrations"})})})}function as(e){const{tagline:t,isNotionIntegration:n}=e,i=(0,r().Fg)(),o=n?{}:{maxHeight:52,overflow:"auto"};return t?(0,te.jsxs)("div",{style:o,children:[t,n&&(0,te.jsxs)("div",{style:{display:"flex",alignItems:"center",marginTop:8},children:[(0,te.jsx)(p()._H,{defaultMessage:"Developed by Notion",id:"adminIntegrationSettings.search.subtitle.notionBuilt"}),(0,Po().X)({marginLeft:3,width:12,height:12,fill:i.invoiceGreen})]})]}):null}var rs=()=>n(967092);const ls=(0,p().vU)({searchInputPlaceholder:{id:"adminConnectionsSettings.search.input.placeholder",defaultMessage:"Add by name or integration ID"},complianceIntegrationSearchInputPlaceholder:{id:"adminConnectionsSettings.search.input.complianceIntegrationPlaceholder",defaultMessage:"Add by name"}});function ds(){const e=(0,o().MO)(),t=(0,r().Fg)(),[n,s]=(0,i.useState)(!0),[a,l]=(0,i.useState)(!1),[d,c]=(0,i.useState)(""),u=(0,i.useRef)(null);return n?(0,te.jsx)(ue().Z,{style:{display:"flex",alignItems:"center",height:28,fontWeight:g().Ue.medium,fontSize:g().JB.UIRegular.desktop,color:Vo().ZP.blue,padding:"0px 6px"},onClick:()=>{s(!1)},children:(0,te.jsx)(p()._H,{id:"adminConnectionsSettings.search.button.label",defaultMessage:"{plusIcon} Add approved connection",values:{plusIcon:(0,Uo().R)({fill:Vo().ZP.blue,width:14,height:14,flexGrow:0,flexShrink:0})}})}):(0,te.jsx)(rs().ZP,{alignmentToOrigin:he().Alignment.Start,keepFocus:e,onDismiss:()=>{var e;const t=null===(e=window)||void 0===e?void 0:e.document.activeElement;u.current&&t===u.current&&u.current.blur(),s(!0),l(!1)},origin:(0,te.jsx)(Dn().Z,{type:"text",style:{width:255},left:(0,Uo().R)({fill:t.lightIconColor,width:14,height:14,marginRight:8,flexGrow:0,flexShrink:0}),ref:u,value:d,onFocus:()=>{l(!0)},placeholder:D().Z.formatMessage(ls.searchInputPlaceholder),onChange:e=>c(e.target.value)}),open:a,popupType:Eo().k.Popup,style:{width:255},render:()=>(0,te.jsx)(ns,{query:d,closeDropdown:()=>l(!1)})})}function cs(){const e=(0,o().MO)(),t=(0,r().Fg)(),[n,s]=(0,i.useState)(!0),[a,l]=(0,i.useState)(!1),[d,c]=(0,i.useState)(""),u=(0,i.useRef)(null);return n?(0,te.jsx)(Bt().Z,{isBlue:!0,style:{display:"flex",alignItems:"center",height:28,fontWeight:g().Ue.medium,fontSize:g().JB.UIRegular.desktop,color:Vo().ZP.blue,padding:"0px 6px"},onClick:()=>{var e;s(!1),null===(e=u.current)||void 0===e||e.focus()},children:(0,te.jsx)(p()._H,{id:"adminConnectionsSettingsAddComplianceMenu.search.button.label",defaultMessage:"{plusIcon} Add connection",values:{plusIcon:(0,Uo().R)({fill:Vo().ZP.blue,width:14,height:14,flexGrow:0,flexShrink:0})}})}):(0,te.jsx)(rs().ZP,{alignmentToOrigin:he().Alignment.Start,keepFocus:e,onDismiss:()=>{var e;const t=null===(e=window)||void 0===e?void 0:e.document.activeElement;u.current&&t===u.current&&u.current.blur(),s(!0),l(!1)},origin:(0,te.jsx)(Dn().Z,{type:"text",style:{width:255},left:(0,Uo().R)({fill:t.lightIconColor,width:14,height:14,marginRight:8,flexGrow:0,flexShrink:0}),focus:!0,ref:u,value:d,onFocus:()=>{l(!0)},placeholder:D().Z.formatMessage(ls.complianceIntegrationSearchInputPlaceholder),onChange:e=>c(e.target.value)}),open:a,popupType:Eo().k.Popup,style:{width:255},render:()=>(0,te.jsx)(is,{query:d,closeDropdown:()=>{s(!0),l(!1)}})})}var us=()=>n(906301),ps=()=>n(625827),ms=()=>n(585649),gs=()=>n(663631);const fs=["member_connections","workspace_connections"];function hs(e){const t=(0,o().O7)(),{isMobile:n}=t.device,{guestBotIds:s,organizationOverrides:d}=e,c=(0,a().VK)((()=>et().default.state.currentSpaceStore),[]),u=(0,a().VK)((()=>Ao().Z.webhookSubscriptions.state.reduce(((e,t)=>{const n=t.getBotId();return n&&(e[n]=t.id),e}),{})),[]),f=(0,a().VK)((()=>ye().default.checkGate({gateName:"webhooks_beta"})||ye().default.checkGate({gateName:"e_discovery"})),[]),h=(0,Mn().E)("ai_connector_discoverability");let y=h?function(e){const t=[];return t.push({id:jo().aP,appName:"Slack",account:void 0,caption:"Get answers about public Slack channels and conversations using Notion AI",logo:Mo().Z.images.externalIntegrations.slackIconPng,capabilities:null,canSelectPageAccess:!1,onDisconnect:function(){throw new Error("Function not implemented.")},shouldShowNewBadge:!0,shouldHideConnectAccount:!1,shouldHideInDiscover:!1,onConnect:async function(){var t;const n=await(0,Oo().$W)(e,{name:"ai_slack_qna",spaceId:null===(t=et().default.state.currentSpaceStore)||void 0===t?void 0:t.id,userId:e.currentUser.id});if("upsell"===n.type){if("product"===n.upsell.type){const t=n.upsell.product;Ct().y(e,{from:"slack_connect_button",upsell:{type:"product",product:t,limit:{type:"none"}}})}return}if("blocked"===n.type)return;const i=l().Il();To().slackUniversalQnAConnectionStore.setState({...To().slackUniversalQnAConnectionStore.state,currentScreen:"introduction",analyticsFrom:"connection_settings",sessionId:i})},integrationTypes:["aiConnector"]}),t.push({id:jo().V,appName:"Google Drive",account:void 0,caption:"Get answers about Google Docs, Slides and Sheets using Notion AI",logo:Mo().Z.images.googleDriveLogoPng,capabilities:null,canSelectPageAccess:!1,onDisconnect:function(){throw new Error("Function not implemented.")},shouldShowNewBadge:!0,shouldHideConnectAccount:!1,shouldHideInDiscover:!1,onConnect:async function(){var t;const n=await(0,Oo().$W)(e,{name:"ai_google_drive_qna",spaceId:null===(t=et().default.state.currentSpaceStore)||void 0===t?void 0:t.id,userId:e.currentUser.id});if("upsell"===n.type){if("product"===n.upsell.type){const t=n.upsell.product;Ct().y(e,{from:"google_drive_connect_button",upsell:{type:"product",product:t,limit:{type:"none"}}})}return}if("blocked"===n.type)return;const i=l().Il();Do().googleDriveConnectionStore.setState({...Do().googleDriveConnectionStore.state,analyticsFrom:"connection_settings",sessionId:i,screenToShow:"info_screen"})},integrationTypes:["aiConnector"]}),t}(t):[];const v=(0,a().VK)((()=>c?(0,m().jj)([...s,...Bo().default.bots.state.map((e=>e.id))]).map((e=>{const t=J().Qx.createChildStore(c,{table:A().cZ,id:e,spaceId:c.id});return t.getAlive()?t:void 0})).filter(gn().$K):[]),[c,s]),x=(0,a().VK)((()=>(0,Io().e2)(v)),[v]),b=(0,a().VK)((()=>bo().Z.state.appsConnectionData),[]),M=(0,a().VK)((()=>function(e){return e.filter((e=>e.isInternalBot())).map((e=>e.id))}(v)),[v]),j=(0,a().VK)((()=>function(e,t){if(!t)return{};return e.reduce(((e,n)=>{const i=sn().U.createChildStore(t,{table:R().KJ,id:n.getCreatedById()}),o=n.getIntegrationId();return o?e[o]=o in e?[...e[o],i]:[i]:e[n.id]=[i],e}),{})}(v,c)),[v,c]),C=(0,a().VK)((()=>null==c?void 0:c.getBotSettingsStore().getValue()),[c]),w=(0,a().VK)((()=>Object.keys(x.nonCompliance).length+M.length),[x.nonCompliance,M]);let k=(0,a().VK)((()=>Object.values(x.compliance).flat().length),[x.compliance]);k+=b.length;const _=(0,a().VK)((()=>null!=C&&C.integration_approval_statuses?Object.keys(C.integration_approval_statuses).length+M.length:M.length),[C,M]),T={member_connections:(0,te.jsx)(p()._H,{id:"admin.connections.tabs.member_connections",defaultMessage:"Member{numberOfIntegrations}",values:{numberOfIntegrations:0!==w&&(0,te.jsx)(me().Z,{isSecondaryColor:!0,style:{marginLeft:6},children:w+Co().T2.length})}}),workspace_connections:(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(p()._H,{id:"admin.connections.tabs.workspace_connections",defaultMessage:"Workspace{numberOfIntegrations}",values:{numberOfIntegrations:0!==k&&(0,te.jsx)(me().Z,{isSecondaryColor:!0,style:{marginLeft:6},children:k})}}),(0,te.jsx)(gs().Z,{})]})},I=fs.map((e=>T[e])),P=(0,a().VK)((()=>"integrations"===ct().default.state.currentTab?ct().default.state.defaultSubtab:void 0),[]),Z=(0,a().VK)((()=>Ao().Z.integrations.state),[]),[B,D]=(0,i.useState)(P||"member_connections"),L=(0,a().VK)((()=>(0,ni().wP)()),[]),O=Boolean(d.integration_restrictions),H=(0,r().yK)((e=>({connectedSection:{display:"flex",justifyContent:"space-between",alignItems:"center",position:"relative"},connectedSectionDescription:{fontSize:14,marginRight:8,color:e.lightTextColor,fontWeight:400,marginBottom:12},addMenu:{position:"absolute",right:0,top:0},discoverSectionUpsell:{backgroundColor:e.accentColors.uiBlue[100],padding:16,borderRadius:6},discoverSectionHeader:{display:"flex",justifyContent:"space-between",marginBottom:8},discoverSectionTitle:{fontSize:16,fontWeight:510},discoverSectionButtons:{display:"flex"},learnMoreButton:{padding:"0px 8px",borderRadius:4,display:"flex",alignItems:"center",color:e.blueColor},upgradeButton:{marginLeft:12,padding:"0px 14px"},alias:{marginLeft:6,width:"0.9em",height:"0.9em",padding:1,border:"1px solid",borderRadius:2}})),[]),V={member_connections:()=>(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(ys,{isIntegrationRestrictionsControlledByOrganization:O}),(null==C?void 0:C.integration_restrictions)&&(0,te.jsx)("div",{style:{marginTop:"19px"},children:(0,te.jsx)(vs,{isIntegrationRestrictionsControlledByOrganization:O})}),(0,te.jsx)("div",{style:{marginTop:"19px"},children:(0,te.jsx)(xs,{})}),(0,te.jsx)(ii().Z,{size:n?32:18,isHidden:!n}),Boolean(null==C?void 0:C.integration_restrictions)?(0,te.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:19},children:[(0,te.jsx)(me().Z,{style:{fontWeight:g().Ue.medium,display:"flex",alignItems:"center",height:28},children:(0,te.jsx)(p()._H,{id:"adminConnectionsSettings.table.allowIntegrations.title",defaultMessage:"Approved connections{numberOfIntegrations}",values:{numberOfIntegrations:0!==_&&(0,te.jsx)(me().Z,{isSecondaryColor:!0,style:{marginLeft:6},children:_})}})}),(0,te.jsx)(ds,{})]}):(0,te.jsx)(me().Z,{style:{fontWeight:g().Ue.medium,display:"flex",height:28,alignItems:"center",marginBottom:"19px"},children:(0,te.jsx)(p()._H,{id:"adminConnectionsSettings.table.default.title",defaultMessage:"All connections{numberOfIntegrations}",values:{numberOfIntegrations:0!==w&&(0,te.jsx)(me().Z,{isSecondaryColor:!0,style:{marginLeft:6},children:w+Co().T2.length})}})}),(0,te.jsx)(us().ZP,{integrationIdToBotIds:x.nonCompliance,internalIntegrationIds:M,integrationIdToUsers:j}),(0,te.jsx)("div",{style:{marginTop:16,marginBottom:32,display:"grid",gridTemplateColumns:"1fr",gap:4},children:(0,te.jsx)(ms().Z,{})})]}),workspace_connections:()=>{const e=Object.keys(x.compliance),n=e.length>0||h&&b.length>0,i=function(e){const{allIntegrations:t,connectedIntegrationIds:n,isEnterprise:i}=e,o=[];for(const s of t)if(!n.includes(s.id)){const e=(0,ko().I$)(s.id);if(!e)continue;if("internal"===s.type)continue;o.push({id:s.id,appName:s.name,account:void 0,caption:s.getInfo().tagline,logo:s.getInfo().icon,shouldHideInDiscover:!1,shouldShowNewBadge:!1,shouldHideConnectAccount:!0,shouldShowUpsell:!i,integrationTypes:[e.type],capabilities:(0,te.jsx)(te.Fragment,{}),canSelectPageAccess:!1,onConnect:()=>{var t;null!=e&&null!==(t=e.oauth)&&void 0!==t&&t.accountInfoPropertyNames||"dlp"===(null==e?void 0:e.type)||"ediscovery"===(null==e?void 0:e.type)?Zo().Z.setState({open:!0,integrationId:s.id}):Ro().Z.setState({open:!0,integrationId:s.id})},onDisconnect:()=>{}})}return o}({allIntegrations:Z,connectedIntegrationIds:e,isEnterprise:L});y=y.filter((e=>!b.some((t=>t.id===e.id)))),L&&i.unshift(...y);const o=i.length>0||y.length>0;return(0,te.jsx)(te.Fragment,{children:f?(0,te.jsxs)(te.Fragment,{children:[n&&(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)("span",{style:H.connectedSectionDescription,children:(0,te.jsx)(p()._H,{id:"admin.connections.tab.workspace_connections.description",defaultMessage:"These integrations connect your workspace to external apps, or improve security and compliance. Only workspace owners can install them"})}),(0,te.jsxs)("div",{style:H.connectedSection,children:[(0,te.jsx)("div",{style:H.addMenu,children:(0,te.jsx)(cs,{})}),(0,te.jsx)(us().cP,{botIdToWebhookSubscriptionId:u,complianceIntegrationsIdToBotIds:x.compliance,aiConnectedApps:b})]})]}),o&&(0,te.jsxs)("div",{children:[!L&&h&&0!==y.length&&(0,te.jsx)("div",{style:{marginBottom:10,marginTop:10},children:(0,te.jsx)(ps().Z,{apps:y,numberOfConnectedApps:0,title:(0,te.jsx)("div",{style:H.discoverSectionTitle,children:(0,te.jsx)(p()._H,{id:"connectionsSettings.discoverNewConnectionsSection.title",defaultMessage:"Discover new connections"})})})}),(0,te.jsx)("div",{style:{...L?{}:H.discoverSectionUpsell,marginTop:n?32:void 0},children:(0,te.jsx)(ps().Z,{apps:i,numberOfConnectedApps:e.length,numberOfDisplayRows:2,title:(0,te.jsxs)("div",{style:H.discoverSectionHeader,children:[(0,te.jsx)("div",{style:H.discoverSectionTitle,children:L?(0,te.jsx)(p()._H,{id:"connectionsSettings.discoverNewConnectionsSection.title",defaultMessage:"Discover new connections"}):(0,te.jsx)(p()._H,{id:"connectionsSettings.discoverNewConnectionsSection.titleUpsell",defaultMessage:"Upgrade to Enterprise to use these connections"})}),!L&&(0,te.jsxs)("div",{style:H.discoverSectionButtons,children:[(0,te.jsxs)(Bn().Z,{onClick:()=>{S().D({environment:t,url:"https://www.notion.so/integrations/collections/security-and-compliance"})},style:H.learnMoreButton,children:[(0,te.jsx)(p()._H,{defaultMessage:"Learn more",id:"connectionsSettings.discoverNewConnectionsSection.learnMore"}),(0,$i().J)(H.alias)]}),(0,te.jsx)(kn().Z,{style:H.upgradeButton,onClick:async()=>{c&&(Lo().Zz({environment:t,spaceId:c.id}),await Ho().Z.waitUntilReady()),Ct().y(t,{from:"workspace_connections",upsell:{type:"product",product:"enterprise",limit:{type:"none"}},dontOpenPlansOnCancel:!0})},children:(0,te.jsx)(p()._H,{defaultMessage:"Upgrade",id:"connectionsSettings.discoverNewConnectionsSection.upgrade"})})]})]})})})]})]}):null})}},U=e=>V[e];return f?(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(mi().Z,{tabs:I,selectedIndex:fs.findIndex((e=>e===B)),onChange:e=>(e=>{D(fs[e])})(e),style:{paddingLeft:0,paddingRight:0,marginTop:-6,marginBottom:14},tabTitleStyle:{fontSize:16}}),U(B)()]}):U("member_connections")()}function ys(e){let{isIntegrationRestrictionsControlledByOrganization:t}=e;const n=(0,o().O7)(),i=(0,a().VK)((()=>et().default.state.currentSpaceStore),[]),{isMobile:s}=n.device,r=(0,a().VK)((()=>(0,ni().wP)()),[]),l=(0,a().VK)((()=>null==i?void 0:i.getBotSettingsStore().getValue()),[i]);return(0,te.jsx)(En().Z,{isMobile:s,isLocked:t,lockedTooltip:(0,vn().g)(),title:(0,te.jsx)(p()._H,{id:"adminConnectionsSettings.requireApprovalSetting.title",defaultMessage:"Restrict members from adding connections"}),caption:(0,wo().CJ)(l)?(0,te.jsx)(p()._H,{id:"adminConnectionsSettings.requireApprovalSetting.allowList.workspaceOwner.caption",defaultMessage:"Workspace members can only install connections pre-approved by workspace owners."}):(0,te.jsx)(p()._H,{id:"adminConnectionsSettings.requireApprovalSetting.off.caption",defaultMessage:"Workspace members can install any new connection."}),upsellOptions:{shouldUpsell:!r,subscriptionTier:"enterprise",analyticsName:"integration_settings"},type:"dropdown",currentOption:(0,wo().CJ)(l)?"allow_list":"any_integrations",options:[{key:"any_integrations",label:(0,te.jsx)(p()._H,{id:"adminIntegrationSettings.integrationRestrictions.off.title",defaultMessage:"No restrictions"}),caption:(0,te.jsx)(p()._H,{id:"adminConnectionsSettings.connectionRestrictions.off.caption",defaultMessage:"Workspace members can install any connection."})},{key:"allow_list",label:(0,te.jsx)(p()._H,{id:"adminIntegrationSettings.integrationRestrictions.allowList.title",defaultMessage:"Only from approved list"}),caption:(0,te.jsx)(p()._H,{id:"adminConnectionsSettings.connectionRestrictions.allowList.caption",defaultMessage:"Workspace members can only install connections pre-approved by a workspace owner."})}],onSelectOption:e=>{t||function(e){const{environment:t,currentSpaceStore:n,botSettings:i,setting:o}=e;if(n){if("allow_list"===o&&(0,wo().CJ)(i))return;const e="allow_list"===o?"approved_only":void 0;w().createAndCommit({userAction:"AdminIntegrationSettings.handleIntegrationRestrictionSelect",environment:t,canUndo:!0,perform:t=>{_o().sW({store:n,data:{bot_settings:{...i,integration_restrictions:e}},transaction:t})}})}}({environment:n,currentSpaceStore:i,botSettings:l,setting:e})},info:[{key:"learn_more",label:(0,te.jsx)(p()._H,{id:"adminConnectionsSettings.connectionRestrictions.info.title",defaultMessage:"Workspace owners can always install and approve new connections."})}]})}function vs(e){const{isIntegrationRestrictionsControlledByOrganization:t}=e,n=(0,o().O7)(),i=(0,r().Fg)(),s=(0,a().VK)((()=>et().default.state.currentSpaceStore),[]),{isMobile:l}=n.device,d=(0,a().VK)((()=>(0,ni().wP)()),[]),c=(0,a().VK)((()=>null==s?void 0:s.getBotSettingsStore().getValue()),[s]);return(0,te.jsx)(En().Z,{isMobile:l,title:(0,te.jsx)(p()._H,{id:"adminConnectionsSettings.autoApproveBuiltByNotion.title",defaultMessage:"Auto-approve <builtbynotion>Built by Notion</builtbynotion> connections",values:{builtbynotion:e=>(0,te.jsxs)("span",{style:{color:i.invoiceGreen,marginRight:4,marginLeft:4},children:[(0,Po().X)({width:14,display:"inline",verticalAlign:"bottom",marginRight:2}),e]})}}),caption:(0,te.jsx)(p()._H,{defaultMessage:"Toggle this on to approve all workspace members to install connections <helpcenterlink>built by Notion</helpcenterlink>.",id:"adminConnectionsSettings.autoApproveBuiltByNotion.caption",values:{helpcenterlink:e=>(0,te.jsx)(ui().Z,{href:(0,Ee().UY)("guides.enterpriseIntegrationSettings"),children:e})}}),upsellOptions:{shouldUpsell:!d,subscriptionTier:"enterprise",analyticsName:"integration_settings"},type:"toggle",isOn:"approved_or_built_by_notion"===(null==c?void 0:c.integration_restrictions),onToggle:()=>{t||function(e){const{environment:t,currentSpaceStore:n,botSettings:i}=e;if(n){const e="approved_or_built_by_notion"===(null==i?void 0:i.integration_restrictions)?"approved_only":"approved_or_built_by_notion";w().createAndCommit({userAction:"AdminIntegrationSettings.handleAutoApproveBuiltByNotionToggle",environment:t,canUndo:!0,perform:t=>{_o().sW({store:n,data:{bot_settings:{...i,integration_restrictions:e}},transaction:t})}})}}({environment:n,currentSpaceStore:s,botSettings:c})},isLocked:t,lockedTooltip:(0,vn().g)()})}function xs(e){const t=(0,o().O7)(),{isMobile:n}=t.device,s=(0,a().VK)((()=>et().default.state.currentSpaceStore),[]),r=(0,a().VK)((()=>(0,ni().wP)()),[]),l=(0,a().VK)((()=>Boolean(null==s?void 0:s.getSettingsStore().getKeyStore("disallow_webhook_automation_action").getValue())),[s]),d=!l,c=(0,i.useCallback)((()=>{s&&w().createAndCommit({userAction:"AdminIntegrationSettings.handleAutoApproveBuiltByNotionToggle",environment:t,canUndo:!0,perform:e=>{_o().sW({store:s.getSettingsStore(),data:{disallow_webhook_automation_action:!l},transaction:e})}})}),[s,l,t]);return(0,te.jsx)(En().Z,{isMobile:n,title:(0,te.jsx)(p()._H,{id:"adminConnectionsSettings.allowWebRequestsInAutomations.title",defaultMessage:"Allow webhooks in automations"}),caption:(0,te.jsx)(p()._H,{defaultMessage:"Allow webhooks to third-party tools in database automations and buttons.",id:"adminConnectionsSettings.allowWebRequestsInAutomations.caption"}),upsellOptions:{shouldUpsell:!r,subscriptionTier:"enterprise",analyticsName:"integration_settings"},type:"toggle",isOn:d,onToggle:c})}var bs=()=>n(690122);const Ss=function(e){let{spaceStore:t,userStore:s,organizationOverrides:r}=e;const l=(0,o().O7)(),d=(0,a().qz)(void 0,So().Z),{device:c}=l,u=(0,a().VK)((()=>(0,n(345918).Fn)(l)),[l]);return(0,i.useEffect)((()=>{u||b().r$({currentTab:"members"})}),[u]),u?(0,te.jsxs)(Rt().ZP,{children:[(0,te.jsx)(ae().Z,{large:!c.isMobile||void 0,divider:c.isMobile?void 0:"full",style:{paddingBottom:12},children:(0,te.jsx)(p()._H,{id:"spaceConnectionsSettings.title",defaultMessage:"Connections"})}),(0,te.jsx)(js,{spaceStore:t,userStore:s,requestStore:d,organizationOverrides:r})]}):null};function Ms(e){let{error:t,result:n,ready:i,organizationOverrides:o}=e;return(0,a().VK)((()=>et().default.state.currentSpaceStore),[])?(0,te.jsxs)(bs().Z,{loaded:i,spinnerSize:16,showSpinnerTimeout:600,children:[t&&(0,te.jsx)("div",{children:(0,te.jsx)(p()._H,{id:"spaceIntegrationSettings.error",defaultMessage:"Something went wrong…"})}),n&&(0,te.jsx)(hs,{...n,organizationOverrides:o})]}):null}function js(e){let{spaceStore:t,userStore:n,requestStore:i,organizationOverrides:s}=e;const r=(0,o().O7)(),l=(0,a().qz)(i,So().Z),d=(0,Mn().E)("ai_connector_discoverability");return(0,te.jsx)(Go().Z,{requestStore:l,request:{spaceId:t.id,userId:n.id},performRequest:async e=>(d&&await async function(e,t){let{spaceId:n}=e;const i=await Z().callApi({eventName:"getConnectedAppsForUniversalQna",environment:t,data:{spaceId:n},headers:(0,I().Bb)({spaceId:n})});var o;return"success"===i.type&&bo().Z.setState({...bo().Z.state,appsConnectionData:(null===(o=i.data)||void 0===o?void 0:o.appsData)||[]}),[]}(e,r),async function(e,t){let{spaceId:n}=e;return{guestBotIds:(await Promise.all([yo().Yw({environment:t,table:ho().bx,id:n,type:"guest"}),yo().Yw({environment:t,table:ho().bx,id:n,type:"external"}),xo().pJ({environment:t}),vo().v({environment:t})]))[0].botIds}}(e,r)),render:(e,t,n)=>(0,te.jsx)(Ms,{error:e,result:t,ready:n,organizationOverrides:s})})}var Cs=()=>n(573357),ws=()=>n(981583),ks=()=>n(253855),_s=()=>n(636133),Ts=()=>n(720866),Is=()=>n(744958);const Ps=10,As=[50,100,200,500,1e3],Rs=50;function Zs(e){var t;let{spaceStore:n,samlConfigStore:s,memberCountFilter:r,isPrimarySpace:l}=e;const d=(0,o().O7)(),c=(0,a().VK)((()=>s.state.emailDomains),[s]),[u,p]=(0,i.useState)({spaces:[],nextEarliestCreatedAt:Date.now(),numPagesLoaded:0,hasNextPage:!1,loading:!1,error:void 0}),m=(0,An().VX)({name:"claimable_spaces",spaceId:n.id,userId:null===(t=d.currentUser)||void 0===t?void 0:t.id}),g=(0,i.useCallback)((async e=>{if(m&&0!==c.length&&l&&u.nextEarliestCreatedAt&&!u.loading&&!(e&&u.numPagesLoaded>0||u.error)){p((e=>({...e,loading:!0})));try{const{spaces:e,earliestCreatedAt:t,hasMoreSpaces:i}=await(0,Is().XD)({fn:async()=>await async function(e,t,n,i,o){const s=await Z().callApi({eventName:"getSpacesCreatedByUserWithDomains",environment:e,data:{spaceId:t,emailDomains:n,spacesLimit:Ps,memberCountFilter:o,spaceCreatedTimeUpperBound:i}});if("failed"===s.type)throw s.error;return{spaces:s.data.results.map((e=>({id:e.id,name:e.spaceName,icon:e.spaceIcon,createdAt:e.spaceCreatedTime,memberCount:e.memberCount,subscriptionTier:e.subscriptionTier,creatorEmailDomain:e.spaceCreatedByDomain,creator:e.spaceCreator,admins:e.admins,spaceRequest:e.spaceRequest,isDelinquent:e.isDelinquent,isPendingBilling:e.isPendingBilling,isActorInSpace:e.isActorInSpace}))),earliestCreatedAt:s.data.hasMoreSpaces?s.data.earliestCreatedAt:void 0,hasMoreSpaces:s.data.hasMoreSpaces}}(d,n.id,c,u.nextEarliestCreatedAt?u.nextEarliestCreatedAt-1:Date.now(),r),handleError:(e,t)=>t?{status:"throw",error:e}:{status:"retry"},retryAttemptsMS:As,retryAttemptRandomOffsetMS:Rs,initialInput:void 0});p((n=>{const o=[...n.spaces],s=new Set(n.spaces.map((e=>e.id)));for(const t of e)s.has(t.id)||o.push(t);return{spaces:o,nextEarliestCreatedAt:t,numPagesLoaded:n.numPagesLoaded+1,hasNextPage:i,loading:!1,error:void 0}}))}catch(t){const e=(0,Ts().t)(t);p((t=>({...t,loading:!1,error:e})))}}}),[d,m,r,l,n,c,u.nextEarliestCreatedAt,u.numPagesLoaded,u.loading,u.error]);const f=(0,i.useCallback)((async()=>{await g(!1)}),[g]),h=(0,i.useCallback)((async()=>{await g(!0)}),[g]),y=(0,i.useCallback)((async()=>{p({spaces:[],nextEarliestCreatedAt:Date.now(),numPagesLoaded:0,hasNextPage:!1,loading:!1,error:void 0}),await g(!0)}),[g]);return{claimableSpaces:u.spaces,loading:u.loading,error:u.error,hasNextPage:u.hasNextPage,loadFirstPage:h,loadNextPage:f,resetFirstPage:y,setSpaceRequest:function(e,t){p((n=>{const i=n.spaces.map((n=>n.id===e?{...n,spaceRequest:t}:n));return{...n,spaces:i}}))},removeClaimableSpace:function(e){p((t=>{const n=t.spaces.filter((t=>t.id!==e));return{...t,spaces:n}}))}}}var Bs=()=>n(801812);async function Ds(e){var t;const{environment:n,spaceId:i,store:o}=e;if(!(await(0,An().KQ)(n,{name:"saml",spaceId:i,userId:null===(t=et().default.state.currentUserStore)||void 0===t?void 0:t.id})))return o.reset(),{};const s=await Z().callApi({eventName:"getSamlConfigForSpace",environment:n,data:{spaceId:i}});if("failed"===s.type)x().x2(s);else if(s.data&&s.data.samlConfig){const e={...s.data.samlConfig,useMetadataUrl:!Boolean(s.data.samlConfig.idpMetadata)};return o.setState(e),s.data}return o.reset(),{}}const Ls={SettingsPage:"settings-page",WorkspacesPage:"workspaces-page",ManagedUsersPage:"managed-users-page"};let Os=function(e){return e[e.Single=0]="Single",e[e.Multi=1]="Multi",e}({});const Hs=(0,i.createContext)(null);function Vs(e){let{spaceStore:t,samlConfigStore:n,domainSettingsStore:s,children:r}=e;const l=(0,o().O7)(),[d,c]=(0,i.useState)(Ls.SettingsPage),[p,m]=(0,i.useState)(Os.Single),g=(0,a().VK)((()=>n.state.emailDomains),[n]),f=(0,a().VK)((()=>Boolean(n.state.id)&&n.state.id===t.id),[n,t]),{loading:h,error:y,loaded:v}=function(e){let{spaceStore:t,samlConfigStore:n,domainSettingsStore:i}=e;const s=(0,o().O7)(),[{status:a,error:r}]=(0,Bs().r5)((async()=>{const e=await Ds({environment:s,spaceId:t.id,store:n});return(0,T().Zw)(e)?e:e.samlConfig?{samlResponse:e,domainResponse:await i.updateValueForSpace({environment:s,spaceId:t.id,store:i})}:{samlResponse:e,domainResponse:void 0}}),[s,n,t,i]);return{loading:"pending"===a,loaded:"resolved"===a,error:r}}({spaceStore:t,samlConfigStore:n,domainSettingsStore:s}),{loading:x,error:b,claimableSpaces:S,setSpaceRequest:M,removeClaimableSpace:j,hasNextPage:C,loadNextPage:w,loadFirstPage:k,resetFirstPage:_}=Zs({spaceStore:t,samlConfigStore:n,isPrimarySpace:f,memberCountFilter:"single"}),{loading:I,error:P,claimableSpaces:A,setSpaceRequest:R,removeClaimableSpace:B,hasNextPage:D,loadNextPage:L,loadFirstPage:O,resetFirstPage:H}=Zs({spaceStore:t,samlConfigStore:n,isPrimarySpace:f,memberCountFilter:"multi"}),V=S.length+A.length>0,[U,E,N,F,K,z,W,q]=p===Os.Single?[x,b,S,M,j,C,w,k,_]:[I,P,A,R,B,D,L,O,H],{loading:G,error:Y,domainVerifications:$}=function(e){let{spaceStore:t}=e;const n=(0,o().O7)(),[s,a]=(0,i.useState)([]),[{status:r,error:l}]=(0,Bs().r5)((async()=>{if(!(0,u().Rs)(t.getSubscriptionTier()))return void a([]);const e=await Z().callApi({eventName:"getDomainVerificationCodesForSpace",environment:n,data:{spaceId:t.id,verifiedOnly:!0}});"success"===e.type?a(e.data.domainVerifications):a([])}),[n,t]);return{loading:"pending"===r,domainVerifications:"resolved"===r?s:[],error:l}}({spaceStore:t,emailDomains:g});(0,i.useEffect)((()=>{k(),O()}),[N,k,O]);const X={page:d,navigateTo:function(e){c(e),0===S.length&&A.length>0&&m(Os.Multi),"workspaces-page"===e&&_s().Ce(l,{verifiedDomains:g,tab:p===Os.Single?"single":"multi"})},loadingSaml:h,loadingSpaces:U,loadingVerifications:G,errorSaml:y,errorClaimableSpaces:E,errorVerifications:Y,loadedSaml:v,domainVerifications:$,hasBrowsableSpaces:V,claimableSpaces:N,setSpaceRequest:F,removeClaimableSpace:K,resetInitialClaimableSpaces:q,hasMoreClaimableSpaces:z,loadMoreClaimableSpaces:W,tab:p,setSelectedTab:function(e){m(e),"workspaces-page"===d&&_s().Ce(l,{verifiedDomains:g,tab:e===Os.Single?"single":"multi"})},verifiedDomains:g};return(0,te.jsx)(Hs.Provider,{value:X,children:r})}var Us=()=>n(653457),Es=()=>n(868982),Ns=(n(470928),()=>n(191918)),Fs=()=>n(102182),Ks=()=>n(568741),zs=()=>n(399673),Ws=()=>n(953293),qs=()=>n(114816),Gs=()=>n(852146);const Ys={managedUsers:[],filters:{query:"",multiFactorStatus:void 0,workspaceId:void 0},numPagesLoaded:0,hasNextPage:!0,paginationToken:void 0,loading:!1,error:void 0};function $s(e){let{spaceStore:t,samlConfigStore:n,userStatus:s}=e;const r=(0,o().O7)(),[l,d]=(0,i.useState)(Ys),c=(0,i.useRef)(void 0),u=(0,a().VK)((()=>Boolean(n.state.id)&&n.state.id===t.id),[n,t]),p=(0,a().VK)((()=>n.state.emailDomains),[n]),g=(0,i.useCallback)((async e=>{if(0===p.length)return;if(!u)return;let n=l.loading,i=l.error,o=l.hasNextPage,a=l.paginationToken;if(e.restartSearch&&(d((e=>({...Ys,filters:e.filters}))),n=Ys.loading,i=Ys.error,o=Ys.hasNextPage,a=Ys.paginationToken),o&&!n&&!i){d((e=>({...e,loading:!0}))),c.current=l.filters;try{var m;const e=await Z().callApi({eventName:"getManagedUsers",environment:r,data:{spaceId:t.id,emailDomains:p,query:l.filters.query,multiFactorStatus:l.filters.multiFactorStatus,workspaceId:l.filters.workspaceId,paginationToken:a,userStatus:s}});if(fn().HH(r,{filters:{multiFactorStatus:l.filters.multiFactorStatus,workspaceId:l.filters.workspaceId},query_length:(null===(m=l.filters.query)||void 0===m?void 0:m.length)??0,current_page:a,user_status:s}),"failed"===e.type)throw e.error;const n=e.data.nextPaginationToken,i=e.data.results;d((e=>{const t=[...e.managedUsers],o=new Set(e.managedUsers.map((e=>e.userId)));for(const n of i)o.has(n.userId)||t.push(n);return{...e,managedUsers:t,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:n,hasNextPage:Boolean(n)}}))}catch(g){const e=(0,Ts().t)(g);d((t=>({...t,loading:!1,error:e})))}}}),[r,t,p,u,l.loading,l.error,l.hasNextPage,l.paginationToken,l.filters,s]);(0,i.useEffect)((()=>{m().Xy(c.current,l.filters)||g({restartSearch:!0})}),[l.filters,g]);const f=(0,i.useCallback)((()=>g({restartSearch:!1})),[g]),h=(0,i.useCallback)((e=>{d((t=>({...t,filters:{...t.filters,...e}})))}),[]),y=(0,i.useCallback)(((e,t)=>{d((n=>({...n,managedUsers:n.managedUsers.map((n=>n.userId===e?{...n,workspaces:n.workspaces.filter((e=>e.id!==t))}:n))})))}),[]),v=(0,i.useCallback)((e=>{d((t=>({...t,managedUsers:[...t.managedUsers,e]})))}),[]),x=(0,i.useCallback)((e=>{d((t=>({...t,managedUsers:t.managedUsers.filter((t=>t.userId!==e))})))}),[]);return{managedUsers:l.managedUsers,filters:l.filters,loading:l.loading,error:l.error,removeWorkspaceFromUser:y,addUserToManagedUsers:v,removeUserFromManagedUsers:x,setFilters:h,hasNextPage:l.hasNextPage,loadNextPage:f}}let Xs=function(e){return e[e.NotSuspended=0]="NotSuspended",e[e.Suspended=1]="Suspended",e}({});function Qs(e){switch(e){case Xs.Suspended:return"suspended";case Xs.NotSuspended:return"notSuspended";default:(0,gn().t1)(e)}}var Js=()=>n(858856),ea=()=>n(259259);function ta(e){let{workspace:t}=e;const n=(0,p().YB)(),i=(0,r().yK)((e=>({container:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"}})),[]);return(0,te.jsxs)("div",{style:i.container,children:[t.name??(0,ea().o)(n),t.isExternal?(0,te.jsx)(na,{}):null]})}function na(){const e=(0,r().yK)((e=>({icon:{marginLeft:4,height:14,width:14,opacity:.5}})),[]);return(0,te.jsx)(pe().Z,{render:t=>(0,te.jsx)("div",{...t,children:(0,Js().D)(e.icon)}),renderTooltip:()=>(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.userAccess.externalSpaceNameTooltipText",defaultMessage:"This is an external workspace that does not belong to this user."})})}function ia(e){let{workspaceSummaries:t}=e;const n=(0,p().YB)(),i=(0,r().yK)((e=>({title:{marginRight:8},noWorkspaces:{paddingInline:8,opacity:.5},workspaceName:{maxWidth:"80%"},plusMore:{opacity:.5,marginLeft:4},titleContainer:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",width:"100%",marginLeft:4}})),[]);if(t.length<=0)return(0,te.jsx)(me().Z,{style:i.noWorkspaces,children:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.table.userAccess.noWorkspaces",defaultMessage:"No workspaces"})});const o=t.find((e=>e.name)),s=o?o.name:(0,ea().o)(n),a=t.length-1;return(0,te.jsxs)("div",{style:i.titleContainer,children:[(0,te.jsx)(me().Z,{isInline:!0,style:i.workspaceName,children:s}),!o||o.isExternal?(0,te.jsx)(na,{}):null,a>0?(0,te.jsxs)(me().Z,{isInline:!0,style:i.plusMore,children:[(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.table.userAccess.additionalCount",defaultMessage:"+{numRemainingWorkspaces}",values:{numRemainingWorkspaces:a}}),""]}):null]})}var oa=()=>n(314379),sa=()=>n(529048),aa=()=>n(855238),ra=()=>n(448419),la=()=>n(508181);const da=(0,p().vU)({menuAriaLabel:{defaultMessage:"Open action menu for this user.",id:"identityAndProvisioning.managedUsers.table.menu.ariaLabel"}});function ca(e){let{managedUser:t,managedUserActionSections:n}=e;const i=(0,a().qz)(void 0,sa().Z),o=(0,p().YB)(),s=(0,r().yK)((()=>({container:{minWidth:265}})),[]);return(0,te.jsx)(ra().ZP,{popupType:rs().kQ.Popup,style:s.container,buttonPopupStore:i,renderOrigin:e=>(0,te.jsx)($t().Z,{ariaLabel:o.formatMessage(da.menuAriaLabel),icon:oa().o,...e}),render:()=>(0,te.jsx)(ua,{managedUser:t,popupStore:i,managedUserActionSections:n})})}function ua(e){let{managedUser:t,popupStore:n,managedUserActionSections:i}=e;const o=[],s=(0,r().yK)((()=>({destructiveIcon:{fill:Vo().ZP.red,color:Vo().ZP.red}})),[]);for(const[a,r]of i.entries()){const e=r.map(((e,n)=>({key:n,render:n=>{var i,o;return(0,te.jsx)(aa().Z,{...n,shouldWrapCaption:!0,svg:t=>e.icon(e.isDestructive?{...t,...s.destructiveIcon}:t),title:e.title,style:{paddingTop:8,paddingBottom:8,...e.isDestructive?s.destructiveIcon:{}},disabled:null===(i=e.getDisabledState)||void 0===i?void 0:i.call(e,t),disabledFeedback:null===(o=e.getDisabledState)||void 0===o?void 0:o.call(e,t)})},action:()=>e.onClick(t)}))),n={key:`section-${a}`,render:e=>(0,te.jsx)(es().Z,{topBorder:a>0,...e}),items:e};o.push(n)}return(0,te.jsxs)($o().Z,{menuType:Wo().o.Popup,children:[(0,te.jsx)(Qo().Z,{type:Qo().i.Vertical,initialFocus:void 0,sections:o,onAccept:()=>{n.setState({open:!1})}}),(0,te.jsx)(es().Z,{topBorder:!0,children:(0,te.jsx)(la().Z,{title:(0,te.jsx)(p()._H,{defaultMessage:"Learn about user suspension",id:"managedUsersDashboard.userActionsMenu.helpButton"}),href:(0,Ee().UY)("guides.managedUsers"),analyticsFrom:"managed_users_dashboard_user_actions_menu"})})]})}var pa=()=>n(816559),ma=function(e){return e.ManagedUser="managed-user",e.Loading="loading",e}(ma||{});const ga={marginLeft:4,height:14,width:14,opacity:.5},fa=[{id:"user",headerTitle:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.table.user",defaultMessage:"Users"}),renderCell:e=>e.type===ma.ManagedUser?(0,te.jsx)(pa().S,{userId:e.managedUser.userId}):(0,te.jsx)(pa().L,{}),widthData:{width:70},sortable:!1},{id:"access",headerTitle:(0,te.jsx)("span",{style:{paddingInline:8},children:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.table.access",defaultMessage:"Workspaces"})}),renderCell:e=>e.type===ma.ManagedUser?(0,te.jsx)(ia,{workspaceSummaries:e.managedUser.workspaces}):(0,te.jsx)(n(365766).z6,{}),widthData:{width:60},sortable:!1},{id:"lastActive",headerTitle:(0,te.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},children:[(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.table.lastActive",defaultMessage:"Last active"}),(0,te.jsx)(pe().Z,{render:e=>(0,te.jsx)("div",{...e,children:(0,Js().D)(ga)}),renderTooltip:()=>(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.table.lastActive.tooltip",defaultMessage:"This may be delayed by several hours."})})]}),renderCell:e=>e.type===ma.ManagedUser?(0,te.jsx)(n(956779).B,{lastActiveAt:e.managedUser.lastActiveAt,containerStyle:{opacity:.5}}):(0,te.jsx)(Wi().I,{}),widthData:{width:60},sortable:!1},{id:"menu",headerTitle:null,renderCell:e=>e.type===ma.ManagedUser?(0,te.jsx)(ca,{managedUser:e.managedUser,managedUserActionSections:e.managedUserActionSections}):null,widthData:{width:15},sortable:!1,hasClickableContents:!0}],ha=[{id:"1",isClickable:!1,type:ma.Loading},{id:"2",isClickable:!1,type:ma.Loading},{id:"3",isClickable:!1,type:ma.Loading}];function ya(e){let{managedUsers:t,loadMoreManagedUsers:n,onEditDetails:i,loading:o,managedUserActionSections:s}=e;const a=t.map((e=>({id:e.userId,type:ma.ManagedUser,managedUser:e,isClickable:!0,managedUserActionSections:s}))),l=(0,r().yK)((e=>(0,ce().bE)({columnRenderInfo:fa,theme:e,containerMarginTop:0})),[]);const d=o?[...a,...ha]:a;return(0,te.jsx)(ce().Dp,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:fa,rows:d,onRowClick:function(e){e.type===ma.ManagedUser&&i(e.managedUser)},renderNoRowsComponent:()=>(0,te.jsx)(va,{loading:o}),styles:l,loadMoreMethod:n?{type:"scroll",onLoadMore:n}:void 0})}function va(e){const t=(0,r().yK)((()=>({text:{marginTop:15,marginBottom:40,textAlign:"center"}})),[]);return(0,te.jsx)(me().Z,{isSmall:!0,style:t.text,children:!e.loading&&(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.table.empty",defaultMessage:"No users found."})})}var xa=()=>n(438771),ba=()=>n(646574),Sa=()=>n(578292),Ma=()=>n(777064),ja=()=>n(176691),Ca=()=>n(628370),wa=()=>n(485156),ka=()=>n(167830);function _a(e){let{title:t,byline:n,isOn:i,onToggle:o,disabled:s,tooltipForDisabled:a}=e;function r(){s||o()}return(0,te.jsx)(pe().Z,{placement:he().Placement.Top,alignment:he().Alignment.End,disableTooltip:!a||!s,renderTooltip:()=>a,render:e=>(0,te.jsx)("div",{...e,children:(0,te.jsx)(Tn,{title:t,byline:n,settingItem:(0,te.jsx)(si().Z,{on:i,disabled:s,onClick:r})})})})}var Ta=()=>n(458852),Ia=()=>n(470374);function Pa(e){const{userId:t,workspaces:n,spaceStore:o,removeWorkspaceFromUser:s}=e,a=(0,r().yK)((()=>({container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",gap:8,marginTop:12}})),[]);return(0,te.jsx)("div",{style:a.container,children:n.map(((e,a)=>(0,te.jsxs)(i.Fragment,{children:[(0,te.jsx)(Aa,{userId:t,spaceId:o.id,workspace:e,removeWorkspaceFromUser:s}),a<n.length-1?(0,te.jsx)(ii().Z,{size:8}):null]},e.id)))})}function Aa(e){const{userId:t,spaceId:n,workspace:i,removeWorkspaceFromUser:s}=e,a=(0,p().YB)(),l=(0,o().O7)(),d=Ra(i),c=(0,r().yK)((()=>({container:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%",gap:12,overflow:"hidden"},workspaceContainer:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",width:"100%",gap:12,overflow:"hidden"},iconContainer:{alignSelf:"center"},textContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",width:"100%"},name:{fontSize:14,fontWeight:500},nameUntitled:{fontSize:14,fontWeight:500,opacity:.25},byline:{lineHeight:1.3,fontSize:12,opacity:.5}})),[]);async function u(){fn().wV(l,{external_space_id:i.id});const{accept:e}=await x().gt({message:(0,te.jsx)(me().Z,{style:x().fq.title,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.managedUsers.removeFromWorkspace.confirmation.message",defaultMessage:"Remove user from workspace?"})}),description:(0,te.jsx)(me().Z,{isMultiline:!0,isSecondaryColor:!0,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.managedUsers.removeFromWorkspace.confirmation.description",defaultMessage:"This user will no longer have access to the workspace you are removing them from. This action is not reversible."})}),acceptLabel:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.managedUsers.removeFromWorkspace.confirmation.acceptLabel",defaultMessage:"Remove"}),cancelLabel:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.managedUsers.removeFromWorkspace.confirmation.cancelLabel",defaultMessage:"Go back"})});if(!e)return;const o=await Z().callApi({eventName:"removeManagedUserFromSpace",environment:l,data:{userId:t,targetSpaceId:i.id,requestingSpaceId:n}});fn().dw(l,{external_space_id:i.id}),"success"===o.type?(s(t,i.id),Fs().oV({label:(0,te.jsx)(p()._H,{defaultMessage:"Successfully removed user from {workspaceName}",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspaceConfirmation",values:{workspaceName:i.name}})})):Fs().oV({label:(0,te.jsx)(p()._H,{defaultMessage:"Failed to remove user from {workspaceName}",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspaceFailure",values:{workspaceName:i.name}})})}const m=i.icon?{pointer:{table:ho().bx,id:i.id,spaceId:i.id},icon:i.icon}:void 0;return(0,te.jsx)("div",{style:c.container,children:(0,te.jsxs)("div",{style:c.workspaceContainer,children:[(0,te.jsx)("div",{style:c.iconContainer,children:(0,te.jsx)(Jo().Z,{disabled:!0,icon:m,isEmptyPage:!1,size:28,title:i.name,isLarge:!0,emojiSize:24,isRaw:!1})}),(0,te.jsxs)("div",{style:c.textContainer,children:[(0,te.jsx)(me().Z,{style:c.name,isMultiline:!0,children:(0,te.jsx)(ta,{workspace:i})}),(0,te.jsx)(me().Z,{style:c.byline,children:(0,te.jsx)(Za,{workspace:i,intl:a})})]}),(0,te.jsx)("div",{children:(0,te.jsx)(pe().Z,{render:e=>(0,te.jsx)(Bt().Z,{isRed:!0,onClick:u,disabled:d,disabledFeedback:d,...e,children:(0,te.jsx)(p()._H,{defaultMessage:"Remove",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspace"})}),renderTooltip:()=>(0,te.jsx)(p()._H,{defaultMessage:"You cannot remove this user from the workspace because they are the only user in the workspace. To remove this user, delete the workspace instead.",id:"identityAndProvisioning.managedUsers.table.userAccess.removeFromWorkspace.disableTooltip"}),disableTooltip:!d,placement:he().Placement.Bottom})})]})})}function Ra(e){const t=e.membersCount;return"number"==typeof t?1===t:1===t.length&&1===t[0]}function Za(e){const{workspace:t,intl:n}=e;return Ra(t)?(0,te.jsx)(p()._H,{defaultMessage:"{plan} · 1 member",id:"identityAndProvisioning.managedUsers.table.userAccess.oneMemberWorkspace",values:{plan:(0,u().v$)(t.plan,n)}}):Array.isArray(t.membersCount)?1===t.membersCount.length?(0,te.jsx)(p()._H,{defaultMessage:"{plan} · {lowerEnd}+ members",id:"identityAndProvisioning.managedUsers.table.userAccess.numMembersLowerEndRange",values:{plan:(0,u().v$)(t.plan,n),lowerEnd:t.membersCount[0]}}):(0,te.jsx)(p()._H,{defaultMessage:"{plan} · {lowerEnd} - {higherEnd} members",id:"identityAndProvisioning.managedUsers.table.userAccess.numMembersRange",values:{plan:(0,u().v$)(t.plan,n),lowerEnd:t.membersCount[0],higherEnd:t.membersCount[1]}}):(0,te.jsx)(p()._H,{defaultMessage:"{plan} · {numMembers} {numMembers, plural, one {member} other {members}}",id:"identityAndProvisioning.managedUsers.table.userAccess.numMembers",values:{plan:(0,u().v$)(t.plan,n),numMembers:t.membersCount}})}const Ba=(0,p().vU)({namePlaceholder:{defaultMessage:"Display name",id:"identityAndProvisioning.managedUsers.table.userAccess.namePlaceholder"},emailPlaceholder:{defaultMessage:"Email",id:"identityAndProvisioning.managedUsers.table.userAccess.emailPlaceholder"},supportAccessFailed:{defaultMessage:"Failed to load user's support access status.",id:"identityAndProvisioning.managedUsers.table.userAccess.supportAccessFailed"}});function Da(e){let{spaceStore:t,managedUser:n,onClose:i,removeWorkspaceFromUser:o}=e;const s=Boolean(n),{isAccessGranted:a,toggleDataAccessConsent:r,loading:l}=(0,Ia().d)({userId:null==n?void 0:n.userId,spaceId:t.id});return(0,te.jsx)(ri().Z,{open:s,onDismiss:i,preventHideChildrenWhileOpening:!0,render:()=>n?(0,te.jsx)(La,{managedUser:n,isAccessGranted:a,toggleDataAccessConsent:r,loadingSupportAccess:l,renderWorkspacesOverview:()=>(0,te.jsx)(Pa,{spaceStore:t,userId:n.userId,workspaces:n.workspaces,removeWorkspaceFromUser:o})}):null})}function La(e){let{managedUser:t,renderWorkspacesOverview:n,isAccessGranted:i,toggleDataAccessConsent:s,loadingSupportAccess:l}=e;const d=(0,p().YB)(),c=(0,o().O7)(),u=(0,a().VK)((()=>new(J().U6)(c,{id:t.userId,table:R().KJ})),[t,c]),{hasStagedChanges:m,resetState:g,saveChanges:f,loading:h,profilePhoto:y,name:v,email:x}=(0,Ta().s)({userStore:u}),b=(0,a().VK)((()=>u.getIsSuspended()?{type:"suspended"}:(0,wa().os)({profilePhoto:y.value,name:v.value,email:x.value})),[u,y.value,v.value,x.value]),S=function(e){const{loadingSupportAccess:t}=e;return(0,r().yK)((e=>({container:{position:"relative",display:"flex",flexDirection:"column",background:e.popoverBackground,width:420,maxHeight:520,overflow:"hidden",borderRadius:8},innerContainer:{position:"relative",display:"flex",flexDirection:"column",width:"100%",height:"100%",overflowY:"auto",padding:"36px 24px",gap:16},label:{color:e.mediumTextColor},horizontalLabel:{color:e.mediumTextColor,display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",gap:4},value:{color:e.regularTextColor},input:{padding:"4px 4px 4px 10px",margin:"0 auto 8px",width:"100%",background:e.modalBackground},avatarContainer:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},iconStyle:{border:`1px solid ${e.tableDividerColor}`,color:e.lightTextColor,fontWeight:500},inputContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",width:"100%",gap:8},inputRow:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",width:"100%"},icon:{color:e.lightIconColor,fill:"currentColor",width:14,height:14},supportAccessRow:{position:"relative",width:"100%",opacity:t?.5:1},infoContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%"},infoRow:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%"},footer:{position:"absolute",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end",paddingInline:4,boxShadow:e.borderBoxShadow,background:e.popoverBackground,left:0,right:0,bottom:0,height:48},button:{height:30,marginInline:4}})),[t])}({loadingSupportAccess:l}),M=(0,Sa().E2)(d),j=(0,a().VK)((()=>!Ot().default.state.online),[]),C=t.mfaMethods.filter((e=>"backup_code"!==e)),w=d.formatList(C.map((e=>(0,Ma().cR)(e))),{type:"conjunction"});return(0,te.jsxs)("div",{style:S.container,children:[(0,te.jsxs)("div",{style:S.innerContainer,children:[(0,te.jsx)("div",{style:S.avatarContainer,children:(0,te.jsx)(wa().ZP,{size:56,avatarType:b,isOffline:j,loading:y.loading,onUploadProfilePhoto:y.set,onRemoveProfilePhoto:y.remove})}),(0,te.jsxs)("div",{style:S.inputContainer,children:[(0,te.jsxs)("div",{style:S.inputRow,children:[(0,te.jsx)(ka().Z,{children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.managedUsers.details.nameLabel",defaultMessage:"Name"})}),(0,te.jsx)(Dn().Z,{style:S.input,disabled:h,value:v.value,placeholder:d.formatMessage(Ba.namePlaceholder),onChange:e=>{v.set(e.target.value)}})]}),(0,te.jsxs)("div",{style:S.inputRow,children:[(0,te.jsx)(ka().Z,{children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.managedUsers.details.emailLabel",defaultMessage:"Email"})}),(0,te.jsx)(Dn().Z,{style:S.input,disabled:h,value:x.value,placeholder:d.formatMessage(Ba.emailPlaceholder),onChange:e=>{x.set(e.target.value)}})]})]}),(0,te.jsxs)("div",{style:S.infoContainer,children:[(0,te.jsxs)("div",{style:S.infoRow,children:[(0,te.jsx)(me().Z,{style:S.label,isSmall:!0,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.managedUsers.details.accountCreatedLabel",defaultMessage:"Account created"})}),t.accountCreatedAt?(0,te.jsx)(me().Z,{isSmall:!0,style:S.value,children:(0,ba().Yx)(t.accountCreatedAt,"medium",M)}):(0,te.jsx)(me().Z,{isSecondaryColor:!0,isSmall:!0,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.managedUsers.details.emptyAccountCreated",defaultMessage:"Incomplete"})})]}),(0,te.jsx)(ii().Z,{size:16}),(0,te.jsxs)("div",{style:S.infoRow,children:[(0,te.jsx)(me().Z,{style:S.label,isSmall:!0,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.managedUsers.details.lastActiveLabel",defaultMessage:"Last active"})}),t.lastActiveAt?(0,te.jsx)(me().Z,{isSmall:!0,style:S.value,children:(0,ja().gs)(t.lastActiveAt)}):(0,te.jsx)(me().Z,{isSecondaryColor:!0,isSmall:!0,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.managedUsers.details.emptyLastActive",defaultMessage:"No activity"})})]}),(0,te.jsx)(ii().Z,{size:16}),(0,te.jsxs)("div",{style:S.infoRow,children:[(0,te.jsx)(me().Z,{style:S.label,isSmall:!0,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.managedUsers.details.mfaLabel",defaultMessage:"2-step verification method"})}),C.length>0?(0,te.jsx)(me().Z,{isSmall:!0,style:S.value,children:w}):(0,te.jsx)(me().Z,{isSecondaryColor:!0,isSmall:!0,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.managedUsers.details.emptyMfa",defaultMessage:"Not configured"})})]}),(0,te.jsx)(ii().Z,{size:16}),(0,te.jsx)("div",{style:S.supportAccessRow,children:(0,te.jsx)(_a,{title:(0,te.jsxs)(me().Z,{style:S.horizontalLabel,isSmall:!0,children:[(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.managedUsers.details.supportAccessToggleMessage",defaultMessage:"Support access"}),(0,te.jsx)(pe().Z,{placement:he().Placement.Bottom,render:e=>(0,te.jsx)("div",{...e,children:(0,Us().m)(S.icon)}),renderTooltip:()=>(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.managedUsers.details.supportAccessToggleMessage.tooltip",defaultMessage:"Grant Notion support temporary access to this account so we can troubleshoot problems or recover content on its behalf"})})]}),byline:null,isOn:i,onToggle:s,disabled:l})})]}),(0,te.jsx)("div",{children:t.workspaces.length>0?(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(ka().Z,{children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.managedUsers.details.workspacesLabel",defaultMessage:"Workspaces"})}),n()]}):null})]}),(0,te.jsxs)(Ca().Z,{visible:m||h,initial:{translateY:48,opacity:0},animate:{opacity:1,translateY:0},exit:{translateY:48,opacity:0},style:S.footer,children:[(0,te.jsx)(xt().Z,{isRed:!0,disabled:h,style:S.button,onClick:g,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.managedUsers.details.cancelButton",defaultMessage:"Cancel"})}),(0,te.jsx)(kn().Z,{disabled:h,style:S.button,onClick:()=>f(),children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.managedUsers.details.saveButton",defaultMessage:"Save changes"})})]})]})}var Oa=()=>n(186596);const Ha=(0,p().vU)({placeholder:{id:"identityProvisioningSettings.managedUsers.searchInput.placeholder",defaultMessage:"Search name, email, or user ID"}});function Va(e){let{spaceStore:t,samlConfigStore:n}=e;const{navigateTo:s}=(0,i.useContext)(Hs),l=(0,o().O7)(),d=(0,p().YB)(),c=(0,r().yK)((e=>({link:{fontSize:14,fontWeight:400,color:e.mediumTextColor,textDecoration:"none"},title:{marginTop:21,fontWeight:g().Ue.semibold,fontSize:17,display:"flex",justifyContent:"flex-start",alignItems:"center"},byline:{fontSize:14,fontWeight:g().Ue.regular,color:e.mediumTextColor,paddingBottom:20},count:{marginLeft:4,opacity:.5,fontWeight:400},tabBarMenu:{margin:"12px 0 0",boxShadow:"none"},filters:{display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%",margin:"0 auto 12px"}})),[]),u=(0,a().VK)((()=>n.state.spaces),[n]),{managedUsers:m,filters:f,loadNextPage:h,setFilters:y,removeWorkspaceFromUser:v,loading:b,selectedTab:M,setSelectedTab:j,onOpenDetailsModal:C,onCloseDetailsModal:w,selectedUser:k,managedUserActionSections:_}=function(e){let{spaceStore:t,samlConfigStore:n}=e;const s=(0,o().O7)(),r=(0,p().YB)(),[l,d]=(0,i.useState)(),[c,u]=(0,i.useState)(Xs.NotSuspended),m=(0,a().VK)((()=>s.currentUser.id),[s]),g=(0,i.useCallback)(((e,t)=>{fn().JX(s,{user_status:Qs(c),from:t}),d(e.userId)}),[s,c]),f=$s({userStatus:"notSuspended",spaceStore:t,samlConfigStore:n}),h=$s({userStatus:"suspended",spaceStore:t,samlConfigStore:n});let y;y=c===Xs.NotSuspended?f:h;const v=(0,i.useCallback)((async e=>{fn().rZ(s);const{accept:n}=await x().gt({message:(0,te.jsx)(me().Z,{style:x().fq.title,children:(0,te.jsx)(p()._H,{defaultMessage:"Suspend this user?",id:"identityAndProvisioning.managedUsers.table.menu.action.suspendUser.dialog.title"})}),acceptLabel:(0,te.jsx)(p()._H,{defaultMessage:"Yes",id:"identityAndProvisioning.managedUsers.table.menu.action.suspendUser.dialog.acceptLabel"}),description:(0,te.jsx)(me().Z,{isMultiline:!0,isSecondaryColor:!0,children:(0,te.jsx)(p()._H,{defaultMessage:"This user will not be able to log into Notion and their Notion integrations will stop working. They can be unsuspended at any time from the Managed Users dashboard.",id:"identityAndProvisioning.managedUsers.table.menu.action.suspendUser.dialog.description"})})});if(!n)return;const i=await Z().callApi({eventName:"updateUserSuspension",environment:s,data:{userId:e.userId,spaceId:t.id,suspend:!0}});fn().rv(s,{suspended_user_id:e.userId}),"failed"===i.type&&x().UW((0,B().wf)(D().Z.getIntl(),i)),h.addUserToManagedUsers(e),f.removeUserFromManagedUsers(e.userId)}),[s,t.id,h,f]),b=(0,i.useCallback)((async e=>{fn().NF(s);const{accept:n}=await x().gt({message:(0,te.jsx)(me().Z,{style:x().fq.title,children:(0,te.jsx)(p()._H,{defaultMessage:"Log out this user?",id:"identityAndProvisioning.managedUsers.table.menu.action.logoutUser.dialog.title"})}),acceptLabel:(0,te.jsx)(p()._H,{defaultMessage:"Log out user",id:"identityAndProvisioning.managedUsers.table.menu.action.logoutUser.dialog.acceptLabel"}),description:(0,te.jsx)(me().Z,{isMultiline:!0,isSecondaryColor:!0,children:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.table.menu.action.logoutUser.dialog.description",defaultMessage:"You are about to log out this user from their current session. They will need to re-authenticate to log back into Notion."})})});if(!n)return;const i=await Z().callApi({eventName:"logoutManagedUsers",environment:s,data:{spaceId:t.id,target:{type:Ns().J.User,userId:e.userId}}});if(fn()._m(s),"failed"===i.type)return x().UW((0,B().wf)(D().Z.getIntl(),i)),void Fs().oV({label:(0,te.jsx)(p()._H,{id:"managedUsers.toastMessage.logout.failed",defaultMessage:"Failed to logged out user"})});Fs().oV({label:(0,te.jsx)(p()._H,{id:"managedUsers.toastMessage.logout.success",defaultMessage:"Successfully logged out user"})})}),[s,t.id]),S=(0,i.useCallback)((async e=>{fn().Zm(s);const{accept:n}=await x().gt({message:(0,te.jsx)(me().Z,{style:x().fq.title,children:(0,te.jsx)(p()._H,{defaultMessage:"Reset password for this user?",id:"identityAndProvisioning.managedUsers.table.menu.action.forcePasswordReset.dialog.title"})}),acceptLabel:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.table.menu.action.forcePasswordReset.dialog.acceptLabel",defaultMessage:"Reset passwords for user"}),description:(0,te.jsx)(me().Z,{isMultiline:!0,isSecondaryColor:!0,children:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.table.menu.action.forcePasswordReset.dialog.description",defaultMessage:"You are about to reset the password for this user. This will also remove any 2-step verification settings they might have and they will be logged out of of their current session.{br}{br}This user will need to re-authenticate via their email the next time they attempt to log back into Notion, and they will be prompted to set a new password upon logging in.",values:{br:(0,te.jsx)("br",{})}})})});if(!n)return;const i=await Z().callApi({eventName:"resetPasswordsForManagedUsers",environment:s,data:{spaceId:t.id,target:{type:Ns().J.User,userId:e.userId}}});if(fn().vC(s),"failed"===i.type)return x().UW((0,B().wf)(r,i)),void Fs().oV({label:(0,te.jsx)(p()._H,{id:"managedUsers.toastMessage.forcePasswordReset.fail",defaultMessage:"Failed to reset password for user"})});Fs().oV({label:(0,te.jsx)(p()._H,{id:"managedUsers.toastMessage.forcePasswordReset.success",defaultMessage:"Successfully reset password for user"})})}),[s,r,t.id]),M=(0,i.useCallback)((async e=>{const n=await Z().callApi({eventName:"updateUserSuspension",environment:s,data:{userId:e.userId,spaceId:t.id,suspend:!1}});fn().Ci(s),"failed"===n.type&&x().RL(n.error.message),h.removeUserFromManagedUsers(e.userId),f.addUserToManagedUsers(e)}),[s,t.id,h,f]),j=(0,i.useCallback)((async e=>{fn().P1(s,{user_status:Qs(c)});const{accept:n}=await x().gt({message:(0,te.jsx)(me().Z,{style:x().fq.title,children:(0,te.jsx)(p()._H,{defaultMessage:"Delete this user?",id:"identityAndProvisioning.managedUsers.table.menu.action.deleteUser.dialog.title"})}),acceptLabel:(0,te.jsx)(p()._H,{defaultMessage:"Yes",id:"identityAndProvisioning.managedUsers.table.menu.action.deleteUser.dialog.acceptLabel"}),description:(0,te.jsx)(me().Z,{isMultiline:!0,isSecondaryColor:!0,children:(0,te.jsx)(p()._H,{defaultMessage:"This action cannot be undone. This will permanently delete the user's entire account. All private workspaces will be deleted, and they will be removed from all shared workspaces.",id:"identityAndProvisioning.managedUsers.table.menu.action.deleteUser.dialog.description"})})});if(!n)return;const i=await Z().callApi({eventName:"deleteManagedUser",environment:s,data:{userId:e.userId,spaceId:t.id}});fn().j7(s,{user_status:Qs(c)}),"success"===i.type?(h.removeUserFromManagedUsers(e.userId),f.removeUserFromManagedUsers(e.userId)):x().UW((0,B().wf)(D().Z.getIntl(),i))}),[s,c,t.id,h,f]),C=(0,i.useMemo)((()=>y.managedUsers.find((e=>{let{userId:t}=e;return t===l}))),[l,y.managedUsers]),w=(0,i.useMemo)((()=>{let e;const t={onClick:e=>g(e,"dropdown_menu"),icon:Ws().R,title:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.table.menu.action.userDetails",defaultMessage:"Edit details"})},n={onClick:e=>j(e),icon:Vn().y,title:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.table.menu.action.deleteUser",defaultMessage:"Delete user"}),isDestructive:!0};switch(c){case Xs.NotSuspended:e=[[t,{onClick:b,icon:zs().S,title:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.table.menu.action.logout",defaultMessage:"Log out"})},{onClick:S,icon:qs().z,title:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.table.menu.action.passwordReset",defaultMessage:"Reset password"})}],[{onClick:v,icon:Ks().V,title:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.table.menu.action.suspendUser",defaultMessage:"Suspend user"}),getDisabledState:e=>e.userId===m},n]];break;case Xs.Suspended:e=[[t],[{onClick:e=>M(e),icon:Gs().u,title:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.table.menu.action.unSuspendUser",defaultMessage:"Reactivate user"})},n]];break;default:(0,gn().t1)(c)}return e.filter((e=>e.length>0))}),[g,m,c,j,v,M,b,S]);return{...y,selectedTab:c,setSelectedTab:u,selectedUser:C,managedUserActionSections:w,onOpenDetailsModal:g,onCloseDetailsModal:function(){d(void 0)}}}({spaceStore:t,samlConfigStore:n}),T=(0,i.useCallback)((e=>C(e,"row_click")),[C]);return(0,te.jsxs)(Rt().ZP,{children:[(0,te.jsx)(ui().Z,{style:c.link,onClick:()=>s(Ls.SettingsPage),children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.managedUsers.breadcrumb",defaultMessage:"← Identity & Provisioning"})}),(0,te.jsxs)(ae().Z,{large:!0,style:c.title,children:[(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.managedUsers.title",defaultMessage:"User management"}),(0,te.jsx)($t().Z,{icon:Us().m,ariaLabel:d.formatMessage({defaultMessage:"Managed users settings help button",id:"identityProvisioningSettings.managedUsers.helpButton.label"}),onClick:()=>S().D({environment:l,url:(0,Ee().UY)("guides.managedUsers")})})]}),(0,te.jsx)(me().Z,{isSmall:!0,isMultiline:!0,style:c.byline,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.managedUsers.byline",defaultMessage:"Manage and view users that are using your verified domains"})}),(0,te.jsx)(mi().Z,{tabs:[(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.managedUsers.table.notSuspendedTab.title",defaultMessage:"Active"},"notSuspended.title"),(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.managedUsers.table.suspendedTab.title",defaultMessage:"Suspended"},"suspended")],selectedIndex:M,onChange:e=>j(e),style:c.tabBarMenu}),(0,te.jsx)(Es().ON,{mode:Es().p3.Button,query:f.query,setQueryFilter:e=>{y({query:e})},placeholderText:D().Z.formatMessage(Ha.placeholder)}),(0,te.jsxs)("div",{style:c.filters,children:[(0,te.jsx)(Oa().O,{selectedSpaceId:f.workspaceId,setSelectedSpaceId:e=>{y({workspaceId:e})},spaceData:u}),(0,te.jsx)(xa().V,{selectedMfaMethod:f.multiFactorStatus,setSelectedMfaMethod:e=>{y({multiFactorStatus:e})}})]}),(0,te.jsx)(ya,{managedUsers:m,loading:b,loadMoreManagedUsers:h,onEditDetails:T,managedUserActionSections:_},M),(0,te.jsx)(Da,{spaceStore:t,managedUser:k,onClose:w,removeWorkspaceFromUser:v})]})}function Ua(e){var t;let{environment:n,samlConfigStore:i,spaceStore:o}=e;const s=(0,An().VX)({name:"saml",spaceId:o.id,userId:null===(t=n.currentUser)||void 0===t?void 0:t.id});return(0,a().VK)((()=>i.state.emailDomains.length>0||s),[i,s])}var Ea=()=>n(458335),Na=()=>n(332087),Fa=()=>n(691119),Ka=()=>n(497065),za=()=>n(107656),Wa=()=>n(265217),qa=()=>n(745159);function Ga(e){let{isPrimary:t,leftIcon:n,rightIcon:i,onClick:o,content:s,style:a}=e;const l=(0,r().yK)((e=>({container:{display:"flex",width:"100%",padding:8,justifyContent:"flex-start",alignItems:"center",borderRadius:8,background:e.onboardingPreviewBackground,...a},iconContainer:{display:"flex",width:20,height:20,paddingTop:1,flexDirection:"column",alignItems:"center",justifyContent:"center",gap:10},title:{display:"flex",fontSize:14,fontWeight:500,color:t?e.text.primary:e.text.secondary,paddingLeft:6,paddingRight:2,height:18,cursor:o?"pointer":"default",width:"100%"},ctaIconContainer:{display:"flex",width:16,height:16,paddingTop:1,flexDirection:"column",alignItems:"center",gap:10,paddingLeft:2,paddingRight:0,cursor:o?"pointer":"default"}})),[o,t,a]);return(0,te.jsxs)("div",{style:l.container,children:[n&&(0,te.jsx)("div",{style:l.iconContainer,onClick:o,children:n}),(0,te.jsx)("div",{style:l.title,onClick:o,children:s}),i&&(0,te.jsx)("div",{style:l.ctaIconContainer,onClick:o,children:i})]})}function Ya(e){let{organizationId:t}=e;const n=(0,o().O7)(),i=Qa();return(0,te.jsxs)("div",{style:i.bannerContainer,children:[(0,te.jsxs)("div",{style:i.title,children:[(0,te.jsx)(vt().q,{styleName:"UITitle-22px/Semibold",children:(0,te.jsx)(p()._H,{id:"workspaceSettingsModal.organizationsBanner.owner.title",defaultMessage:"Get the most out of your Enterprise plan"})}),(0,te.jsx)(vt().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,te.jsx)(p()._H,{id:"workspaceSettingsModal.organizationsBanner.owner.byline",defaultMessage:"Explore other features to help you manage your Notion workspaces"})})]}),(0,te.jsxs)("div",{style:i.features,children:[(0,te.jsx)($a,{icon:ze().Q,title:(0,te.jsx)(p()._H,{id:"workspaceSettingsModal.organizationsBanner.owner.item.moreSecurity.title",defaultMessage:"More security features"}),description:(0,te.jsx)(p()._H,{id:"workspaceSettingsModal.organizationsBanner.owner.item.moreSecurity.description",defaultMessage:"for public page sharing, guest invites, and more"})}),(0,te.jsx)($a,{icon:Wa().K,title:(0,te.jsx)(p()._H,{id:"workspaceSettingsModal.organizationsBanner.owner.item.multiWorkspace.title",defaultMessage:"Multi-workspace management"}),description:(0,te.jsx)(p()._H,{id:"workspaceSettingsModal.organizationsBanner.owner.item.multiWorkspace.description",defaultMessage:"in a new console experience"})}),(0,te.jsx)($a,{icon:qa().K,title:(0,te.jsx)(p()._H,{id:"workspaceSettingsModal.organizationsBanner.owner.item.onePlace.title",defaultMessage:"One place"}),description:(0,te.jsx)(p()._H,{id:"workspaceSettingsModal.organizationsBanner.owner.item.onePlace.description",defaultMessage:"to view all your members and guests"})})]}),(0,te.jsxs)(kn().Z,{isLarge:!0,style:i.button,onClick:()=>{Ka().c4({environment:n,openInNew:"tab",makeTabActive:!0,url:(0,Na().a5)({organizationId:t,tabRoute:Fa().CO})})},children:[(0,te.jsx)(p()._H,{id:"workspaceSettingsModal.organizationsBanner.orgSettingsButton",defaultMessage:"Go to your organization settings"}),(0,za().y)(i.iconArrow)]})]})}function $a(e){const t=(0,r().yK)((e=>({container:{display:"flex",alignItems:"flex-start",justifyContent:"center",flexDirection:"row",gap:8},text:{display:"flex",alignItems:"flex-start",justifyContent:"center",flexDirection:"row",gap:4},icon:{fill:e.icon.uiBluePrimary,height:16,width:16}})),[]);return(0,te.jsxs)("div",{style:t.container,children:[e.icon(t.icon),(0,te.jsxs)("div",{style:t.text,children:[(0,te.jsx)(vt().q,{styleName:"UIRegular-14px/Medium",colorName:"uiBluePrimary",as:"span",children:e.title}),(0,te.jsx)(vt().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",as:"span",children:e.description})]})]})}function Xa(e){let{content:t,tooltipContent:n}=e;const i=Qa();return(0,te.jsx)(Ga,{isPrimary:!0,style:i.bannerContainer,leftIcon:(0,ze().Q)(i.icon),content:(0,te.jsxs)("div",{style:i.content,children:[t,(0,te.jsx)(pe().Z,{placement:he().Placement.Bottom,alignment:he().Alignment.End,render:e=>(0,te.jsx)(_n().Z,{...e,analyticsFrom:"organization_settings_migration_banner"}),renderTooltip:()=>n})]})})}function Qa(){return(0,r().yK)((e=>({bannerContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",gap:20,padding:24,borderRadius:12,marginBlock:12,background:"dark"===e.mode?e.cardBackground:"#F0F6FD"},title:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",gap:6,width:"100%"},content:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},features:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",gap:6,width:"100%"},icon:{height:16,width:16,fill:e.icon.secondary},button:{display:"flex",alignItems:"center",justifyContent:"center",gap:4},iconArrow:{height:14,width:14,fill:"currentColor",transform:"rotate(90deg)",marginTop:4}})),[])}var Ja=()=>n(260599);function er(e){var t;let{spaceStore:n,samlConfigStore:s,domainSettingsStore:r}=e;const l=(0,o().O7)(),d=(0,a().VK)((()=>s.state.emailDomains),[s]),c=(0,a().VK)((()=>"disabled"!==s.state.status&&"unconfigured"!==s.state.status),[s]),u=(0,An().VX)({name:"domain_settings",spaceId:n.id,userId:null===(t=l.currentUser)||void 0===t?void 0:t.id}),p=Ua({environment:l,samlConfigStore:s,spaceStore:n}),m=(0,a().VK)((()=>p&&(!s.state.id||s.state.id===n.id)),[p,s,n]),g=(0,a().VK)((()=>r.state.emailDomains.length>0&&u),[r,u]),f=(0,a().VK)((()=>d.length>0),[d]),h=(0,i.useCallback)((async()=>{if(s.state.emailDomains.length>0)return(0,Ja().B)({onRequest:()=>Z().callApi({eventName:"updateWorkspaceCreationForEmailDomains",environment:l,data:{emailDomains:s.state.emailDomains,workspaceCreationEnum:r.state.spaceCreation,spaceId:n.id}}),onSuccess:()=>{r.setState({...r.state,emailDomains:s.state.emailDomains})}})}),[l,n,r,s]),y=(0,i.useCallback)((async()=>{if(s.state.emailDomains.length>0)return(0,Ja().B)({onRequest:()=>Z().callApi({eventName:"updateEmailDomainSettings",environment:l,data:{emailDomains:s.state.emailDomains,spaceId:n.id,preventProfileEdits:r.state.settings.prevent_profile_edits,preventMembersJoiningExternalWorkspace:r.state.settings.prevent_members_joining_external_workspace,customSessionDuration:(0,ea().K)(r.state.settings.custom_session_duration),preventGrantingSupportAccess:r.state.settings.prevent_granting_support_access,disableNotionMail:r.state.settings.disable_notion_mail}}),onSuccess:()=>{r.setState({...r.state,emailDomains:s.state.emailDomains})}})}),[l,n,r,s]),v=(0,a().VK)((()=>p&&u),[p,u]);return{verifiedDomains:d,isSamlStatusEnabled:c,isSamlAvailable:p,isSamlEditable:m,isDomainSettingsAvailable:g,isClaimSpacesAvailable:v,canSaveWorkspaceCreationSetting:f,saveWorkspaceCreationSetting:h,saveEmailDomainSettings:y}}function tr(e){let{title:t,byline:n,targetTier:s}=e;const a=(0,o().O7)(),r=(0,i.useCallback)((()=>Ct().y(a,{from:"space_saml",upsell:{type:"product",product:s,limit:{type:"none"}}})),[a,s]);return(0,te.jsxs)(te.Fragment,{children:[(0,te.jsxs)(ae().Z,{smallMarginBottom:!0,style:{fontWeight:g().Ue.regular,display:"flex",alignItems:"center"},children:[(0,te.jsx)("span",{style:{marginRight:8},children:t}),(0,te.jsx)(ei().Z,{subscriptionTier:s,analyticsName:"space_saml",onClick:r})]}),(0,te.jsx)(me().Z,{isSmall:!0,isMultiline:!0,children:n})]})}const nr={browseWorkspaces:(0,te.jsx)(p()._H,{defaultMessage:"Browse workspaces",id:"identityAndProvisioning.claimWorkspaces.button"}),noWorkspaces:(0,te.jsx)(p()._H,{defaultMessage:"No workspaces",id:"identityAndProvisioning.claimWorkspaces.buttonEmpty"}),loadingError:(0,te.jsx)(p()._H,{defaultMessage:"Error loading workspaces.",id:"identityAndProvisioning.claimWorkspaces.errorByline"})};function ir(e){let{promptUpgrade:t}=e;const{navigateTo:n,loadingSpaces:o,hasBrowsableSpaces:s,errorClaimableSpaces:a}=(0,i.useContext)(Hs),l=Boolean(a),d=!s||o,c=!s&&!o,u=(0,te.jsx)(p()._H,{id:"identityAndProvisioning.claimWorkspaces.title",defaultMessage:"Claim workspaces"}),m=(0,te.jsx)(p()._H,{id:"identityAndProvisioning.claimWorkspaces.message",defaultMessage:"Claim workspaces created by users with a verified domain or require owners to use an external domain."}),g=(0,r().yK)((e=>({settingContainer:{margin:"18px 0"},buttonAndErrorContainer:{display:"flex",flexDirection:"column",maxWidth:280},button:{opacity:d?.5:1,minWidth:160},settingErrorByline:{color:e.errorText,marginTop:8,fontSize:13}})),[d]);if(t)return(0,te.jsx)(tr,{title:u,byline:m,targetTier:"enterprise"});let f;return f=o?(0,te.jsx)(oi().Z,{}):s?nr.browseWorkspaces:nr.noWorkspaces,(0,te.jsx)("div",{style:g.settingContainer,children:(0,te.jsx)(Tn,{title:u,byline:m,settingItem:(0,te.jsxs)("div",{style:g.buttonAndErrorContainer,children:[(0,te.jsx)(pe().Z,{placement:he().Placement.Top,alignment:he().Alignment.End,render:e=>(0,te.jsx)(xt().Z,{disabled:d,isLarge:!0,style:g.button,onClick:()=>n(Ls.WorkspacesPage),...e,children:f}),disableTooltip:!c,renderTooltip:()=>(0,te.jsx)(p()._H,{id:"identityAndProvisioning.claimWorkspaces.tooltip",defaultMessage:"There are no available workspaces to claim"})}),l?(0,te.jsx)(me().Z,{isSmall:!0,isMultiline:!0,style:g.settingErrorByline,children:nr.loadingError}):null]})})})}var or=()=>n(21234),sr=()=>n(279431);function ar(e){let{spaceStore:t,samlConfigStore:n,promptUpgrade:s,disabled:l,saveWorkspaceCreationSetting:d}=e;const c=(0,o().O7)(),u=(0,a().qz)(void 0,or().Z),m=(0,r().yK)((()=>({flex:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",margin:"18px 0px"},button:{position:"relative",marginLeft:"auto",marginRight:0,opacity:l?.5:1},plusIcon:{width:14,height:14,fill:"inherit",marginRight:"6px"}})),[l]),f=(0,te.jsx)(p()._H,{id:"identityAndProvisioning.emailDomainsSection.title",defaultMessage:"Verified domains"}),h=(0,te.jsx)(p()._H,{id:"identityAndProvisioning.emailDomainsSection.byline",defaultMessage:"Verify ownership of an email domain to access advanced security features including single sign-on."}),y=[...(0,a().VK)((()=>n.state.emailDomains.map(sr().f4)),[n]),...(0,a().VK)((()=>n.state.domainVerifications.filter((e=>!n.state.emailDomains.includes(e.domain))).sort(((e,t)=>e.createdAt-t.createdAt)).map(sr().UV)),[n])],v=(0,i.useCallback)((async()=>{await Ds({environment:c,spaceId:t.id,store:n})}),[c,t,n]),{resetInitialClaimableSpaces:x}=(0,i.useContext)(Hs),b=(0,i.useCallback)((async e=>{switch(e.type){case"verified":return(0,Ja().B)({onRequest:()=>Z().callApi({eventName:"setSamlConfig",environment:c,data:{spaceId:t.id,removedEmailDomains:[e.domain]}}),onSuccess:async()=>{await v(),x()}});case"unverified":case"invalid":return(0,Ja().B)({onRequest:()=>Z().callApi({eventName:"deleteDomainVerificationCode",environment:c,data:{id:e.id}}),onSuccess:()=>v()})}}),[c,t,v,x]),S=(0,i.useCallback)((()=>(0,Ja().B)({onRequest:()=>Z().callApi({eventName:"setSamlConfig",environment:c,data:{spaceId:t.id}}),onSuccess:()=>v()})),[c,v,t]),M=(0,i.useCallback)((async()=>{await v(),await d()}),[d,v]);return s?(0,te.jsx)(tr,{title:f,byline:h,targetTier:"business"}):(0,te.jsx)(sr().ZP,{disabled:l,domains:y,onRemoveDomain:b,domainVerificationStore:u,verificationType:"saml_config",verificationTargetId:t.id,refreshDomains:M,onClickAddDomain:S,renderOverrideAddDomainButton:e=>(0,te.jsxs)("div",{style:m.flex,children:[(0,te.jsxs)("div",{children:[(0,te.jsx)(ae().Z,{smallMarginBottom:!0,style:{fontWeight:g().Ue.medium},children:f}),(0,te.jsx)(me().Z,{isSmall:!0,isMultiline:!0,style:{marginBottom:4},children:h})]}),(0,te.jsx)("div",{children:(0,te.jsx)(Bt().Z,{isBlue:!0,style:m.button,icon:e=>(0,Uo().R)({...e,...m.plusIcon}),disabled:l,onClick:e,children:(0,te.jsx)(p()._H,{defaultMessage:"Add domain",id:"securitySAMLSettings.emailDomainsSection.addDomain"})})})]})})}function rr(e){let{domainSettingsStore:t,samlConfigStore:n,disabled:s,promptUpgrade:l,verifiedDomains:d,tooltip:c,saveWorkspaceCreationSetting:u}=e;const m=(0,o().O7)(),g=(0,r().yK)((()=>({settingContainer:{margin:"18px 0"}})),[]),f=(0,a().VK)((()=>{const e=n.state.id;if(!e)return;return new(J().H2)(m,{table:ho().bx,id:e}).getName()}),[m,n]),h=(0,i.useCallback)((async e=>{t.setState({...t.state,spaceCreation:e}),await u(),_s().ti(m,{workspace_creation:e})}),[t,u,m]),y=(0,a().VK)((()=>d.length>0?t.state.spaceCreation:"admins_only"),[t,d]),v=(0,te.jsx)(p()._H,{id:"domainSettings.workspaceCreation.title",defaultMessage:"Workspace creation"}),x=(0,te.jsx)(p()._H,{id:"domainSettings.workspaceCreation.byline",defaultMessage:"Customize who can create new workspaces."}),b=(0,te.jsx)(p()._H,{id:"domainSettings.workspaceCreation.workspaceOwnersOnly.titleWithSpaceName",defaultMessage:"{primaryWorkspaceName} workspace owners",values:{primaryWorkspaceName:f}}),S=(0,te.jsx)(p()._H,{id:"domainSettings.workspaceCreation.workspaceOwnersOnly.title",defaultMessage:"Only workspace owners"});return l?(0,te.jsx)("div",{style:g.settingContainer,children:(0,te.jsx)(tr,{title:v,byline:x,targetTier:"enterprise"})}):(0,te.jsx)(pe().Z,{placement:he().Placement.Top,alignment:he().Alignment.End,render:e=>(0,te.jsx)("div",{...e,style:g.settingContainer,children:(0,te.jsx)(En().Z,{isMobile:m.device.isMobile,disabled:s,title:v,caption:x,type:"dropdown",currentOption:y,options:[{key:"unrestricted",label:(0,te.jsx)(p()._H,{id:"domainSettings.workspaceCreation.unrestricted.title",defaultMessage:"Anyone"}),caption:(0,te.jsx)(p()._H,{id:"domainSettings.workspaceCreation.unrestricted.caption",defaultMessage:"Any user can create new workspaces."})},{key:"admins_only",label:f?b:S,caption:(0,te.jsx)(p()._H,{id:"domainSettings.workspaceCreation.workspaceOwnersOnly.captionWithSpaceName",defaultMessage:"Only workspace owners of this workspace can create new workspaces."})}],onSelectOption:h})}),disableTooltip:!c,renderTooltip:()=>c})}function lr(e){let{spaceStore:t,samlConfigStore:n,domainSettingsStore:i,isCurrentSpaceEnterprise:o}=e;const{verifiedDomains:s,isSamlAvailable:a,saveWorkspaceCreationSetting:r,isSamlEditable:l,isDomainSettingsAvailable:d,canSaveWorkspaceCreationSetting:c,isClaimSpacesAvailable:u}=er({spaceStore:t,samlConfigStore:n,domainSettingsStore:i}),m=d&&l;return(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(ar,{disabled:!l,promptUpgrade:!a,spaceStore:t,samlConfigStore:n,saveWorkspaceCreationSetting:r}),(0,te.jsx)(rr,{disabled:!m||!c,promptUpgrade:!o,verifiedDomains:s,samlConfigStore:n,domainSettingsStore:i,tooltip:0===s.length?(0,te.jsx)(p()._H,{id:"domainSettings.workspaceCreation.disabledTooltip",defaultMessage:"There must be at least one verified domain to configure the workspace creation setting."}):void 0,saveWorkspaceCreationSetting:r}),(0,te.jsx)(ir,{promptUpgrade:!u})]})}var dr=()=>n(160459);function cr(e){let{domainSettingsStore:t,saveEmailDomainSettings:n,promptUpgrade:s,disabled:l}=e;const d=(0,o().O7)(),c=(0,r().yK)((()=>({settingContainer:{margin:"18px 0"},settingsTitle:{display:"inline-flex",alignItems:"center"}})),[]),u=(0,i.useMemo)((()=>Object.entries(dr().nb).map((e=>{let[t,n]=e;return{key:t,label:(0,te.jsx)(me().Z,{children:(0,ja().hH)(0,n)})}}))),[]),m=(0,a().VK)((()=>(0,ea().K)(t.state.settings.custom_session_duration)??dr().gl),[t]),g=(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.customSessionDuration.title",defaultMessage:"Session duration"}),f=(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.customSessionDuration.message",defaultMessage:"Control how long your managed users can be logged in for before they must re-authenticate."});return s?(0,te.jsx)("div",{style:c.settingContainer,children:(0,te.jsx)(tr,{title:g,byline:f,targetTier:"enterprise"})}):(0,te.jsx)("div",{style:c.settingContainer,children:(0,te.jsx)(En().Z,{isMobile:d.device.isMobile,disabled:l,title:g,caption:f,type:"dropdown",currentOption:m,options:u,onSelectOption:async function(e){const i=t.state.settings.custom_session_duration??dr().nb[dr().gl],o=dr().nb[e];if(void 0===o)return;fn().LO(d,{custom_session_duration_ms:i});const{accept:s}=await x().gt({message:(0,te.jsx)(me().Z,{style:x().fq.title,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.message",defaultMessage:"Confirm change"})}),description:(0,te.jsxs)(me().Z,{isMultiline:!0,isSecondaryColor:!0,children:[(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.description",defaultMessage:"You are about to change the session duration for all of your managed users from <b>{oldDuration}</b> to <b>{newDuration}.</b>",values:{oldDuration:(0,ja().hH)(0,i),newDuration:(0,ja().hH)(0,o),b:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,te.jsx)("b",{children:t})}}}),(0,te.jsx)("br",{}),(0,te.jsx)("br",{}),(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.secondDescription",defaultMessage:"This may log some users out of their current session, including you. The affected users will need to re-authenticate to log back into Notion."})]}),acceptLabel:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.acceptLabel",defaultMessage:"Confirm change"}),cancelLabel:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.managedUsers.customSessionDuration.confirmation.cancelLabel",defaultMessage:"Cancel"})});s&&(t.setState({...t.state,settings:{...t.state.settings,custom_session_duration:o}}),fn().l0(d,{new_session_duration_ms:o}),await n())}})})}function ur(e){let{domainSettingsStore:t,saveEmailDomainSettings:n,promptUpgrade:s,hasVerifiedDomains:l,disabled:d}=e;const c=(0,o().O7)(),u=(0,Mn().E)("enable_notion_mail_settings_toggle"),m=(0,r().yK)((()=>({settingContainer:{margin:"18px 0"},settingsTitle:{display:"inline-flex",alignItems:"center"}})),[]),g=(0,a().VK)((()=>Boolean(!t.state.settings.disable_notion_mail)),[t]),f=(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.enableNotionMail.title",defaultMessage:"Notion Mail"}),h=(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.enableNotionMail.message",defaultMessage:"Enable Notion Mail for all members under your company domains."}),(0,te.jsx)("br",{}),(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.enableNotionMail.terms",defaultMessage:"By using Notion Mail, you agree to the Notion Mail and Notion AI Supplementary Terms."})]}),y=(0,i.useCallback)((async()=>{const e=Boolean(!t.state.settings.disable_notion_mail);t.setState({...t.state,settings:{...t.state.settings,disable_notion_mail:e}}),fn().Dn(c,{new_value:e}),await n()}),[c,t,n]);return u?s?(0,te.jsx)("div",{style:m.settingContainer,children:(0,te.jsx)(tr,{title:f,byline:h,targetTier:"enterprise"})}):(0,te.jsx)("div",{style:m.settingContainer,children:(0,te.jsx)(_a,{title:(0,te.jsx)("div",{style:m.settingsTitle,children:f}),byline:h,isOn:g,onToggle:y,disabled:d||!l})}):null}function pr(e){let{spaceId:t,domainSettingsStore:n,promptUpgrade:i,verifiedDomains:s,disabled:a}=e;const l=s.length>0,d=(0,o().O7)(),c=(0,r().yK)((()=>({settingContainer:{margin:"18px 0"},buttonAndErrorContainer:{display:"flex",flexDirection:"column",maxWidth:280},button:{opacity:!a&&l?1:.5}})),[a,l]),u=(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.forcePasswordReset.title",defaultMessage:"Reset passwords for all users"}),m=(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.forcePasswordReset.message",defaultMessage:"Force reset the passwords for all managed users and require them to create a new one the next time they log in."});async function g(){fn().Jo(d,{email_domains:s});const{accept:e}=await x().gt({message:(0,te.jsx)(me().Z,{style:x().fq.title,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.managedUsers.forcePasswordReset.confirmation.message",defaultMessage:"Reset passwords for your managed users?"})}),description:(0,te.jsx)(me().Z,{isMultiline:!0,isSecondaryColor:!0,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.managedUsers.forcePasswordReset.confirmation.description",defaultMessage:"You are about to reset the passwords for of your managed users, including you. This will also remove any 2-step verification settings they might have and they will be logged out of of their current session.{br}{br}The affected users will need to re-authenticate via their email the next time they attempt to log back into Notion, and they will be prompted to set a new password upon logging in.",values:{br:(0,te.jsx)("br",{})}})}),acceptLabel:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.managedUsers.forcePasswordReset.confirmation.acceptLabel",defaultMessage:"Reset passwords for all managed users"}),cancelLabel:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.managedUsers.forcePasswordReset.confirmation.cancelLabel",defaultMessage:"Cancel"})});if(!e)return;const i=n.state.emailDomains;await Z().callApi({eventName:"resetPasswordsForManagedUsers",environment:d,data:{spaceId:t,target:{type:Ns().J.Domains,emailDomains:i}}}),Fs().oV({label:(0,te.jsx)(p()._H,{id:"managedUsers.toastMessage.forcePasswordReset.all.success",defaultMessage:"Successfully reset passwords for all managed users"})}),fn().aT(d,{email_domains:i})}return i?(0,te.jsx)("div",{style:c.settingContainer,children:(0,te.jsx)(tr,{title:u,byline:m,targetTier:"enterprise"})}):(0,te.jsx)("div",{style:c.settingContainer,children:(0,te.jsx)(Tn,{title:u,byline:m,settingItem:(0,te.jsx)("div",{style:c.buttonAndErrorContainer,children:(0,te.jsx)(pe().Z,{placement:he().Placement.Top,alignment:he().Alignment.End,render:e=>(0,te.jsx)(Bt().Z,{isRed:!0,disabled:a||!l,style:c.button,onClick:g,...e,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.managedUsers.forcePasswordReset.logoutButton",defaultMessage:"Reset passwords for all users"})}),disableTooltip:l,renderTooltip:()=>(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.tooltip",defaultMessage:"You must verify a domain to manage its users"})})})})})}function mr(e){let{spaceId:t,domainSettingsStore:n,promptUpgrade:i,verifiedDomains:s,disabled:a}=e;const l=s.length>0,d=(0,o().O7)(),c=(0,r().yK)((()=>({settingContainer:{margin:"18px 0"},buttonAndErrorContainer:{display:"flex",flexDirection:"column",maxWidth:280},button:{opacity:!a&&l?1:.5}})),[a,l]),u=(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.logoutAllUsers.title",defaultMessage:"Log out all users"}),m=(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.logoutAllUsers.message",defaultMessage:"Force log out all managed users and require them to re-authenticate."});async function g(){fn().KF(d,{email_domains:s});const{accept:e}=await x().gt({message:(0,te.jsx)(me().Z,{style:x().fq.title,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.managedUsers.logoutAllUsers.confirmation.message",defaultMessage:"Log out all of your managed users?"})}),description:(0,te.jsx)(me().Z,{isMultiline:!0,isSecondaryColor:!0,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.managedUsers.logoutAllUsers.confirmation.description",defaultMessage:"You are about to log all of your managed users out of their current session, including you. The affected users will need to re-authenticate to log back into Notion."})}),acceptLabel:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.managedUsers.logoutAllUsers.confirmation.acceptLabel",defaultMessage:"Log out all managed users"}),cancelLabel:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.managedUsers.logoutAllUsers.confirmation.cancelLabel",defaultMessage:"Cancel"})});if(!e)return;const i=n.state.emailDomains;await Z().callApi({eventName:"logoutManagedUsers",environment:d,data:{spaceId:t,target:{type:Ns().J.Domains,emailDomains:i}}}),Fs().oV({label:(0,te.jsx)(p()._H,{id:"managedUsers.toastMessage.logout.all.success",defaultMessage:"Logging out managed users. This may take a few minutes to complete."})}),fn()._6(d,{email_domains:i})}return i?(0,te.jsx)("div",{style:c.settingContainer,children:(0,te.jsx)(tr,{title:u,byline:m,targetTier:"enterprise"})}):(0,te.jsx)("div",{style:c.settingContainer,children:(0,te.jsx)(Tn,{title:u,byline:m,settingItem:(0,te.jsx)("div",{style:c.buttonAndErrorContainer,children:(0,te.jsx)(pe().Z,{placement:he().Placement.Top,alignment:he().Alignment.End,render:e=>(0,te.jsx)(Bt().Z,{isRed:!0,disabled:a||!l,style:c.button,onClick:g,...e,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.managedUsers.logoutAllUsers.logoutButton",defaultMessage:"Log out all users"})}),disableTooltip:l,renderTooltip:()=>(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.tooltip",defaultMessage:"You must verify a domain to manage its users"})})})})})}function gr(e){let{promptUpgrade:t,hasVerifiedDomains:n,disabled:s}=e;const{navigateTo:a}=(0,i.useContext)(Hs),l=(0,o().O7)(),d=(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.title",defaultMessage:"Managed users dashboard"}),c=(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.message",defaultMessage:"Manage and view users that are using your verified domains"}),u=(0,r().yK)((e=>({settingContainer:{margin:"18px 0"},buttonAndErrorContainer:{display:"flex",flexDirection:"column",maxWidth:280},button:{opacity:!s&&n?1:.5}})),[n,s]);return t?(0,te.jsx)("div",{style:u.settingContainer,children:(0,te.jsx)(tr,{title:d,byline:c,targetTier:"enterprise"})}):(0,te.jsx)("div",{style:u.settingContainer,children:(0,te.jsx)(Tn,{title:d,byline:c,settingItem:(0,te.jsx)("div",{style:u.buttonAndErrorContainer,children:(0,te.jsx)(pe().Z,{placement:he().Placement.Top,alignment:he().Alignment.End,render:e=>(0,te.jsx)(xt().Z,{disabled:s||!n,isLarge:!0,style:u.button,onClick:()=>{fn().pC(l),a(Ls.ManagedUsersPage)},...e,children:(0,te.jsx)(p()._H,{defaultMessage:"View dashboard",id:"identityAndProvisioning.managedUsers.button"})}),disableTooltip:n,renderTooltip:()=>(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.tooltip",defaultMessage:"You must verify a domain to manage its users"})})})})})}function fr(e){let{domainSettingsStore:t,saveEmailDomainSettings:n,promptUpgrade:i,verifiedDomains:s,disabled:l}=e;const d=(0,o().O7)(),c=(0,r().yK)((()=>({settingContainer:{margin:"18px 0"},settingsTitle:{display:"inline-flex",alignItems:"center"}})),[]),u=s.length>0,m=(0,a().VK)((()=>Boolean(t.state.settings.prevent_granting_support_access)),[t]),g=(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.preventGrantingSupportAccess.title",defaultMessage:"Prevent managed users from granting support access"}),f=(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.preventGrantingSupportAccess.message",defaultMessage:"Control if managed users can enable support access on their accounts."});return i?(0,te.jsx)("div",{style:c.settingContainer,children:(0,te.jsx)(tr,{title:g,byline:f,targetTier:"enterprise"})}):(0,te.jsx)("div",{style:c.settingContainer,children:(0,te.jsx)(_a,{title:(0,te.jsx)("div",{style:c.settingsTitle,children:g}),byline:f,isOn:m,onToggle:async function(){const e=Boolean(!t.state.settings.prevent_granting_support_access);t.setState({...t.state,settings:{...t.state.settings,prevent_granting_support_access:e}}),fn().Dn(d,{new_value:e}),await n()},disabled:l||!u})})}function hr(e){let{domainSettingsStore:t,saveEmailDomainSettings:n,promptUpgrade:i,disabled:s}=e;const l=(0,o().O7)(),d=(0,r().yK)((()=>({settingContainer:{margin:"18px 0"},settingsTitle:{display:"inline-flex",alignItems:"center"}})),[]),c=(0,a().VK)((()=>Boolean(t.state.settings.prevent_members_joining_external_workspace)),[t]),u=(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.preventMembersJoiningExternalSpaces.title",defaultMessage:"External workspace access"}),m=(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.preventMembersJoiningExternalSpaces.message",defaultMessage:"Control if managed users are able to join workspaces that aren't owned by your organization."});if(i)return(0,te.jsx)("div",{style:d.settingContainer,children:(0,te.jsx)(tr,{title:u,byline:m,targetTier:"enterprise"})});const g=c?"on":"off";return(0,te.jsx)("div",{style:d.settingContainer,children:(0,te.jsx)(En().Z,{isMobile:l.device.isMobile,disabled:s,title:u,caption:m,type:"dropdown",currentOption:g,options:[{key:"on",label:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.externalSpacePrevention.enabled.titleGeneric",defaultMessage:"Only workspace owners"}),caption:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.externalSpacePrevention.enabled.caption",defaultMessage:"Only workspace owners of your connected workspaces can join external workspaces."})},{key:"off",label:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.externalSpacePrevention.disabled.titleWithSpaceName",defaultMessage:"Anyone"}),caption:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.externalSpacePrevention.disabled.caption",defaultMessage:"All users can join any workspace."})}],onSelectOption:async function(){const e=Boolean(!t.state.settings.prevent_members_joining_external_workspace);t.setState({...t.state,settings:{...t.state.settings,prevent_members_joining_external_workspace:e}}),fn().T4(l,{new_value:e}),await n()}})})}function yr(e){let{domainSettingsStore:t,saveEmailDomainSettings:n,promptUpgrade:i,hasVerifiedDomains:s,disabled:l}=e;const d=(0,o().O7)(),c=(0,r().yK)((()=>({settingContainer:{margin:"18px 0"},settingsTitle:{display:"inline-flex",alignItems:"center"}})),[]),u=(0,a().VK)((()=>Boolean(t.state.settings.prevent_profile_edits)),[t]),m=(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.preventProfileEdits.title",defaultMessage:"Allow managed users to change profile information"}),g=(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.preventProfileEdits.message",defaultMessage:"Control if managed users can change their preferred name, email address, and profile photo."});return i?(0,te.jsx)("div",{style:c.settingContainer,children:(0,te.jsx)(tr,{title:m,byline:g,targetTier:"enterprise"})}):(0,te.jsx)("div",{style:c.settingContainer,children:(0,te.jsx)(_a,{title:(0,te.jsx)("div",{style:c.settingsTitle,children:m}),byline:g,isOn:!u,onToggle:async function(){const e=Boolean(!t.state.settings.prevent_profile_edits);t.setState({...t.state,settings:{...t.state.settings,prevent_profile_edits:e}}),fn().Dn(d,{new_value:e}),await n()},disabled:l||!s})})}function vr(e){var t;let{spaceStore:n,samlConfigStore:i,domainSettingsStore:s}=e;const{verifiedDomains:l,isDomainSettingsAvailable:d,isSamlEditable:c,saveEmailDomainSettings:u}=er({spaceStore:n,samlConfigStore:i,domainSettingsStore:s}),m=(0,r().yK)((e=>({byline:{fontSize:14,fontWeight:g().Ue.regular,color:e.mediumTextColor},helpButton:{marginTop:18,marginBottom:16}})),[]),f=(0,o().O7)(),h=d&&c,y=(0,An().VX)({name:"managed_users",spaceId:n.id,userId:null===(t=f.currentUser)||void 0===t?void 0:t.id}),v=(0,a().VK)((()=>n.id),[n]);return(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)("div",{children:(0,te.jsx)(me().Z,{isSmall:!0,isMultiline:!0,style:m.byline,children:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.byline",defaultMessage:"These settings apply to all users with a verified domain, even if they are not a member of this workspace."})})}),(0,te.jsx)(_n().Z,{title:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.managedUsers.helpButton",defaultMessage:"Learn about managed users"}),href:(0,Ee().UY)("guides.managedUsers"),style:m.helpButton,analyticsFrom:"managed_users_section"}),(0,te.jsx)(gr,{promptUpgrade:!y,hasVerifiedDomains:l.length>0,disabled:!h}),(0,te.jsx)(yr,{promptUpgrade:!y,hasVerifiedDomains:l.length>0,domainSettingsStore:s,saveEmailDomainSettings:u,disabled:!h}),(0,te.jsx)(hr,{promptUpgrade:!y,domainSettingsStore:s,saveEmailDomainSettings:u,disabled:!h}),(0,te.jsx)(fr,{promptUpgrade:!y,verifiedDomains:l,domainSettingsStore:s,saveEmailDomainSettings:u,disabled:!h}),(0,te.jsx)(cr,{promptUpgrade:!y,domainSettingsStore:s,saveEmailDomainSettings:u,disabled:!h}),(0,te.jsx)(mr,{spaceId:v,promptUpgrade:!y,domainSettingsStore:s,verifiedDomains:l,disabled:!h}),(0,te.jsx)(pr,{spaceId:v,promptUpgrade:!y,domainSettingsStore:s,verifiedDomains:l,disabled:!h}),(0,te.jsx)(ur,{promptUpgrade:!y,hasVerifiedDomains:l.length>0,domainSettingsStore:s,saveEmailDomainSettings:u,disabled:!h})]})}function xr(e){let{spaceStore:t,samlConfigStore:n}=e;const s=(0,o().O7)();return{updateSamlIdpUrl:(0,i.useCallback)((async e=>{let i=!1;return await(0,Ja().B)({onRequest:()=>Z().callApi({eventName:"setSamlConfig",environment:s,data:{spaceId:t.id,idpMetadataUrl:e}}),onSuccess:()=>{i=!0,n.setState({...n.state,useMetadataUrl:!0,idpMetadataUrl:e,idpMetadata:void 0})}}),i}),[n,t,s]),updateSamlIdpXml:(0,i.useCallback)((async e=>{let i=!1;return await(0,Ja().B)({onRequest:()=>Z().callApi({eventName:"setSamlConfig",environment:s,data:{spaceId:t.id,idpMetadata:e}}),onSuccess:()=>{i=!0,n.setState({...n.state,useMetadataUrl:!1,idpMetadataUrl:void 0,idpMetadata:e})}}),i}),[n,t,s]),updateStatus:(0,i.useCallback)((e=>(0,Ja().B)({onRequest:()=>Z().callApi({eventName:"setSamlConfig",environment:s,data:{spaceId:t.id,status:e}}),onSuccess:()=>{n.setState({...n.state,status:e})}})),[n,t,s]),updateCreateAccount:(0,i.useCallback)((e=>(0,Ja().B)({onRequest:()=>Z().callApi({eventName:"setSamlConfig",environment:s,data:{spaceId:t.id,createAccount:e}}),onSuccess:()=>{n.setState({...n.state,createAccount:e})}})),[n,t,s])}}function br(e){let{spaceStore:t,samlConfigStore:n,disabled:i}=e;const{updateCreateAccount:s}=xr({samlConfigStore:n,spaceStore:t}),l=(0,o().O7)(),d=(0,r().yK)((()=>({settingContainer:{margin:"18px 0"},settingsTitle:{display:"inline-flex",alignItems:"center"}})),[]),c=(0,a().VK)((()=>n.state.createAccount),[n]);return(0,te.jsx)("div",{style:d.settingContainer,children:(0,te.jsx)(_a,{title:(0,te.jsxs)("div",{style:d.settingsTitle,children:[(0,te.jsx)(p()._H,{id:"identityAndProvisioning.createAccount.title",defaultMessage:"Automatic account creation"}),(0,te.jsx)($t().Z,{icon:Us().m,onClick:()=>S().D({environment:l,url:(0,Ee().UY)("guides.samlJIT")})})]}),byline:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.createAccount.byline",defaultMessage:"Automatically create Notion accounts for new users who log in via SAML SSO."}),isOn:c,onToggle:async function(){await s(!n.state.createAccount)},disabled:i})})}function Sr(e){let{spaceStore:t,samlConfigStore:n,promptUpgrade:i,disabled:s}=e;const l=(0,o().O7)(),{updateStatus:d}=xr({samlConfigStore:n,spaceStore:t}),c=(0,r().yK)((()=>({settingContainer:{margin:"18px 0"}})),[]),u=(0,te.jsx)(p()._H,{id:"identityAndProvisioning.accountAuth.title",defaultMessage:"Login method"}),m=(0,te.jsx)(p()._H,{id:"identityAndProvisioning.accountAuth.byline",defaultMessage:"Customize how users access workspaces that have SAML SSO enabled. Workspace owners can always log in with a password or passkey."}),g=(0,a().VK)((()=>"enforced"===n.state.status?"enforced":"enforced_for_domain"===n.state.status?"enforced_for_domain":"not_enforced"),[n]);if(i)return(0,te.jsx)("div",{style:c.settingContainer,children:(0,te.jsx)(tr,{title:u,byline:m,targetTier:"business"})});const f=[{key:"enforced",label:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.accountAuth.option.enforced",defaultMessage:"Only SAML SSO"})},{key:"not_enforced",label:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.accountAuth.option.notEnforced",defaultMessage:"Any method"})}];return"enforced_for_domain"===g?(0,te.jsx)("div",{style:c.settingContainer,children:(0,te.jsx)(En().Z,{isMobile:l.device.isMobile,disabled:!0,title:u,caption:m,type:"custom",customButton:(0,te.jsx)(Bt().Z,{disabled:!0,disabledFeedback:!0,children:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.accountAuth.option.enforcedForDomain",defaultMessage:"Enforced for domain"})})})}):(0,te.jsx)("div",{style:c.settingContainer,children:(0,te.jsx)(En().Z,{isMobile:l.device.isMobile,title:u,caption:m,type:"dropdown",currentOption:g,options:f,onSelectOption:async function(e){"enforced"===e?await d("enforced"):"enforced_for_domain"===e?await d("enforced_for_domain"):await d("configured")}})})}var Mr=()=>n(525579),jr=()=>n(735501);function Cr(e){let{isOpen:t,...n}=e;const i=(0,a().VK)((()=>({active:n.samlConfigStore.state.useMetadataUrl?"url":"xml",url:n.samlConfigStore.state.idpMetadataUrl||"",xml:n.samlConfigStore.state.idpMetadata||""})),[n.samlConfigStore]);return(0,te.jsx)(ri().Z,{open:t,onDismiss:n.onClose,render:()=>(0,te.jsx)(wr,{...n,initialConfiguration:i})})}function wr(e){let{onSaveChanges:t,initialConfiguration:n,samlConfigStore:s,spaceStore:l,onClose:d}=e;const[c,u]=(0,i.useState)(n),m=(0,o().O7)(),f=(0,r().yK)((e=>({container:{background:e.popoverBackground,width:450,padding:24,borderRadius:4,transition:"all 500ms ease"},title:{fontFamily:g().F5(ai().locale).sans,fontSize:17,fontWeight:500,lineHeight:"24px",textAlign:"center"},subtitle:{fontFamily:g().F5(ai().locale).sans,fontSize:14,fontWeight:500,lineHeight:"19px",margin:"20px 0 0"},copyButton:{borderRadius:4,padding:"4px 8px",display:"flex",alignItems:"center",justifyContent:"center",color:e.lightTextColor,fontFamily:g().F5(ai().locale).sans,fontSize:12,fontWeight:500,lineHeight:"14px"},copyIcon:{width:16,height:16,marginRight:4,fill:e.mediumIconColor},url:{width:"100%",color:e.mediumTextColor,fontFamily:g().F5(ai().locale).sans,fontSize:14,fontWeight:400,lineHeight:"18px"},readonlyInput:{display:"flex",alignItems:"center",justifyContent:"center",border:`1px solid ${e.outlineButtonBorder}`,height:32,paddingLeft:12,paddingRight:12,borderRadius:4},divider:{margin:"20px auto 20px"},radioContainer:{display:"flex",justifyContent:"space-evenly",flexDirection:"column",height:60},radioOption:{display:"flex",alignItems:"center"},caption:{margin:"4px 0 8px"},centeredCaption:{margin:"4px 24px 8px",textAlign:"center"},buttonContainer:{display:"flex",alignItems:"center",justifyContent:"flex-end",marginTop:24},buttonSpacing:{marginRight:8},feedback:{color:"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400],display:"flex",flexDirection:"row",alignItems:"center",fontSize:"14px",height:20}})),[]),h=(0,i.useMemo)((()=>_r(c)),[c]),y=(0,a().VK)((()=>"unconfigured"===s.state.status),[s]),v=(0,a().VK)((()=>(0,Mr().v9)(l.id,zo().default.domainBaseUrl)),[l]),x=(0,i.useCallback)((async()=>{const e=await de().F.clipboardActions.load();e.copyString({environment:m,stringValue:v,copiedMessage:e.clipboardMessages.copiedLinkToClipboard})}),[m,v]),b=(0,i.useCallback)((()=>{u((e=>({...e,active:"url"})))}),[]),S=(0,i.useCallback)((()=>{u((e=>({...e,active:"xml"})))}),[]),M=(0,r().yK)((e=>({input:{transition:"all 200ms ease-in-out",boxShadow:"none",margin:"12px 0",width:"100%",background:e.popoverBackground,border:`1px solid ${e.outlineButtonBorder}`}})),[]),j=(0,i.useMemo)((()=>"url"===c.active?{placeholder:"https://...",value:c.url,onChange:e=>{const t=e.target.value;u((e=>({...e,url:t})))},style:{height:32,...M.input}}:{placeholder:'<md:EntityDescriptor entityID="...',value:c.xml,onChange:e=>{const t=e.target.value;u((e=>({...e,xml:t})))},textarea:!0,style:{height:118,...M.input},inputStyle:{width:"100%",height:"100%"}}),[c,M]),C=(0,i.useCallback)((()=>{t(c)}),[t,c]);return(0,te.jsxs)("div",{style:f.container,children:[(0,te.jsx)(me().Z,{style:f.title,children:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.editSamlConfig.title",defaultMessage:"SAML SSO Configuration"})}),(0,te.jsx)(me().Z,{isSmall:!0,style:f.centeredCaption,isMultiline:!0,children:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.editSamlConfig.byline",defaultMessage:"Configure SAML SSO for your Notion workspace with your Identity Provider (IDP). <guidelink>Learn more</guidelink>.",values:{guidelink:e=>(0,te.jsx)(ui().Z,{href:(0,Ee().UY)("guides.samlSettings"),external:!0,children:e})}})}),(0,te.jsx)(me().Z,{style:f.subtitle,children:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.editSamlConfig.acsTitle",defaultMessage:"Assertion Consumer Service (ACS) URL"})}),(0,te.jsx)(me().Z,{isSmall:!0,style:f.caption,isMultiline:!0,children:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.editSamlConfig.acsByline",defaultMessage:"Enter this in your IDP's SAML configuration."})}),(0,te.jsxs)("div",{style:f.readonlyInput,children:[(0,te.jsx)(me().Z,{style:f.url,children:v}),(0,te.jsxs)(ue().Z,{onClick:x,style:f.copyButton,children:[(0,fe().U)(f.copyIcon),(0,te.jsx)(p()._H,{id:"verifyDomainModal.editSamlConfig.copy",defaultMessage:"Copy"})]})]}),(0,te.jsx)(me().Z,{style:f.subtitle,children:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.editSamlConfig.idpTitle",defaultMessage:"Identity Provider Details"})}),(0,te.jsx)(me().Z,{isSmall:!0,style:f.caption,children:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.editSamlConfig.idpUrlByline",defaultMessage:"Enter the value provided by your IDP."})}),(0,te.jsxs)("div",{style:f.radioContainer,children:[(0,te.jsxs)(Bt().Z,{style:f.radioOption,onClick:b,children:[(0,te.jsx)(On().Z,{isSelected:"url"===c.active}),(0,te.jsx)(me().Z,{children:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.editSamlConfig.idpUrl",defaultMessage:"Identity Provider URL"})})]}),(0,te.jsxs)(Bt().Z,{style:f.radioOption,onClick:S,children:[(0,te.jsx)(On().Z,{isSelected:"xml"===c.active}),(0,te.jsx)(me().Z,{children:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.editSamlConfig.idpXml",defaultMessage:"Identity Provider Metadata XML"})})]})]}),(0,te.jsx)(Dn().Z,{...j}),(0,te.jsx)("div",{style:f.feedback,children:(0,te.jsx)(kr,{validation:h})}),(0,te.jsxs)("div",{style:f.buttonContainer,children:[(0,te.jsx)(xt().Z,{isLarge:!0,style:f.buttonSpacing,onClick:d,children:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.editSamlConfig.cancel",defaultMessage:"Cancel"})}),(0,te.jsx)(kn().Z,{isLarge:!0,disabled:"invalid"===h.type,onClick:C,children:y?(0,te.jsx)(p()._H,{id:"identityAndProvisioning.editSamlConfig.enableSaml",defaultMessage:"Enable SAML"}):(0,te.jsx)(p()._H,{id:"identityAndProvisioning.editSamlConfig.saveChanges",defaultMessage:"Save changes"})})]})]})}function kr(e){let t,{validation:n}=e;if("valid"===n.type)return null;switch(n.reason){case"empty":t=(0,te.jsx)(p()._H,{id:"identityAndProvisioning.editSamlConfig.feedback.empty",defaultMessage:"You cannot leave this field blank"});break;case"signed_request":t=(0,te.jsx)(p()._H,{id:"identityAndProvisioning.editSamlConfig.feedback.signed_request",defaultMessage:"Requests cannot be signed"})}return(0,te.jsxs)(te.Fragment,{children:[(0,jr().t)({height:16,width:16,margin:"0 4px 0 8px"}),(0,te.jsx)("span",{children:t})]})}function _r(e){return"url"===e.active?(0,Mr().jY)(e.url):"xml"===e.active?(0,Mr().a7)(e.xml):void(0,gn().t1)(e.active)}function Tr(e){let{spaceStore:t,samlConfigStore:n,domainSettingsStore:o,isSamlStatusEnabled:s,promptUpgrade:a,disabled:l}=e;const[d,c]=(0,i.useState)({isOpened:!1,enableSamlOnSave:!1}),{updateStatus:u,updateSamlIdpUrl:m,updateSamlIdpXml:f}=xr({samlConfigStore:n,spaceStore:t}),{verifiedDomains:h}=er({spaceStore:t,samlConfigStore:n,domainSettingsStore:o}),y=(0,r().yK)((()=>({settingContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",cursor:l?"default":"pointer"},settingTitle:{fontWeight:g().Ue.medium},settingByline:{marginBottom:4},configButton:{marginTop:14}})),[l]),v=(0,te.jsx)(p()._H,{id:"identityAndProvisioning.samlToggle.title",defaultMessage:"Enable SAML SSO"}),x=(0,te.jsx)(p()._H,{id:"identityAndProvisioning.samlToggle.byline",defaultMessage:"Workspace members can log in with SAML SSO if their email address uses a verified domain."});return a?(0,te.jsx)(tr,{title:v,byline:x,targetTier:"business"}):(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(_a,{title:v,byline:x,isOn:s,disabled:l,tooltipForDisabled:0===h.length?(0,te.jsx)(p()._H,{id:"identityAndProvisioning.samlToggle.disabledTooltipNoVerifiedDomains",defaultMessage:"Verify a domain to enable SAML."}):void 0,onToggle:function(){if(l)return;const{useMetadataUrl:e,idpMetadata:t,idpMetadataUrl:i}=n.state,o=e&&i||!e&&t;switch(n.state.status){case"disabled":o?u("configured"):c({isOpened:!0,enableSamlOnSave:!0});break;case"unconfigured":c({isOpened:!0,enableSamlOnSave:!0});break;case"configured":case"enforced":u("disabled");break;case"enforced_for_domain":break;default:(0,gn().t1)(n.state.status)}}}),(0,te.jsx)(xt().Z,{disabled:l,disabledFeedback:l,isLarge:!0,style:y.configButton,onClick:function(){l||c({isOpened:!0,enableSamlOnSave:!1})},children:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.samlToggle.configure",defaultMessage:"Edit SAML SSO configuration"})}),(0,te.jsx)(Cr,{isOpen:d.isOpened,onClose:()=>c({isOpened:!1,enableSamlOnSave:!1}),onSaveChanges:async function(e){if("invalid"===_r(e).type)return;let t=!1;switch(e.active){case"url":t=await m(e.url);break;case"xml":t=await f(e.xml)}if(t){switch(n.state.status){case"disabled":d.enableSamlOnSave&&await u("configured");break;case"unconfigured":await u("configured");break;case"enforced":case"enforced_for_domain":case"configured":break;default:(0,gn().t1)(n.state.status)}c({isOpened:!1,enableSamlOnSave:!1})}},spaceStore:t,samlConfigStore:n})]})}var Ir=()=>n(306743);const Pr={id:"name",headerTitle:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.secondaryWorkspaces.table.name",defaultMessage:"Name"}),renderCell:e=>(0,te.jsx)(Lr,{space:e.space,isCurrentSpace:e.isCurrentSpace}),widthData:{width:50},sortable:!0},Ar={id:"memberCount",headerTitle:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.secondaryWorkspaces.table.memberCount",defaultMessage:"Members"}),renderCell:e=>(0,te.jsx)(me().Z,{children:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.secondaryWorkspaces.table.members",defaultMessage:"{count} members",values:{count:e.space.memberCount}})}),widthData:{width:20},sortable:!0},Rr={id:"createdAt",headerTitle:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.secondaryWorkspaces.table.plan",defaultMessage:"Created at"}),renderCell:e=>{const t=e.space.createdTime;return(0,te.jsx)(me().Z,{children:t&&(0,ba().Yx)(t,"medium",ai().locale)})},widthData:{width:20},sortable:!0},Zr=[Pr,Ar,Rr];function Br(e){let{spaceStore:t,spaces:n}=e;const[o,s]=(0,i.useState)({column:Pr,sortAscending:!1}),l=(0,a().VK)((()=>n.map((e=>({id:e.id,isClickable:!1,isCurrentSpace:t.id===e.id,space:e})))),[n,t]),d=(0,r().yK)((e=>(0,ce().bE)({columnRenderInfo:Zr,theme:e,containerMarginTop:12})),[]);return(0,te.jsx)(ce().Dp,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:Zr,rows:Dr(l,o),sortState:o,onSortStateChanged:s,renderNoRowsComponent:()=>(0,te.jsx)(me().Z,{isSmall:!0,style:{marginTop:15,marginBottom:40,textAlign:"center"},children:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.secondaryWorkspaces.empty",defaultMessage:"No linked workspaces."})}),styles:d})}function Dr(e,t){let{column:n,sortAscending:i}=t,o=[];switch(n.id){case"name":o=m().MR(e,(e=>e.space.name));break;case"createdAt":o=m().MR(e,(e=>e.space.createdTime));break;case"memberCount":o=m().MR(e,(e=>e.space.memberCount))}return i?o:o.reverse()}function Lr(e){const t=(0,r().yK)((()=>({container:{display:"flex",justifyContent:"center",alignItems:"center",gap:4}})),[]);return(0,te.jsxs)(me().Z,{style:t.container,children:[e.space.name,e.isCurrentSpace?(0,te.jsx)($().Z,{children:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.secondaryWorkspaces.table.name.currentBadge",defaultMessage:"Current"})}):null]})}function Or(e){let{spaceStore:t,spaces:n}=e;const s=(0,o().O7)(),l=(0,r().yK)((()=>({settingContainer:{margin:"18px 0"}})),[]),d=(0,i.useCallback)((()=>{Ir().j_({environment:s,from:"saml_settings",prepopulatedContent:`Request to add or remove a workspace for SAML single sign-on on workspace ${t.id}.`})}),[t,s]),c=(0,a().VK)((()=>(0,u().$U)(t.getSubscriptionTier())),[t]);return(0,te.jsxs)("div",{style:l.settingContainer,children:[(0,te.jsx)(Tn,{title:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.secondaryWorkspaces.title",defaultMessage:"Linked workspaces"}),byline:(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(p()._H,{id:"identityAndProvisioning.secondaryWorkspaces.description",defaultMessage:"This SAML SSO configuration applies to the following other workspaces."}),c&&(0,te.jsxs)(te.Fragment,{children:[" ",(0,te.jsx)(p()._H,{id:"identityAndProvisioning.secondaryWorkspaces.contact",defaultMessage:"<contactlink>Contact support</contactlink> to add or remove a workspace.",values:{contactlink:e=>(0,te.jsx)(ui().Z,{onClick:d,children:e})}})]})]}),settingItem:null}),(0,te.jsx)(Br,{spaceStore:t,spaces:n})]})}function Hr(e){let{spaceStore:t,samlConfigStore:n,domainSettingsStore:i}=e;const{verifiedDomains:o,isSamlAvailable:s,isSamlEditable:r,isSamlStatusEnabled:l}=er({spaceStore:t,samlConfigStore:n,domainSettingsStore:i}),d=!r||!s||!l,c=(0,a().VK)((()=>n.state.spaces),[n]);return(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(_n().Z,{title:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.samlToggle.learnMore",defaultMessage:"Learn about SAML SSO"}),href:(0,Ee().UY)("guides.samlSettings"),style:{marginTop:18,marginBottom:16},analyticsFrom:"saml_settings"}),(0,te.jsx)(Tr,{disabled:!r||0===o.length,promptUpgrade:!s,isSamlStatusEnabled:l,spaceStore:t,samlConfigStore:n,domainSettingsStore:i}),(0,te.jsx)(Sr,{disabled:d,promptUpgrade:!s,spaceStore:t,samlConfigStore:n}),(0,te.jsx)(br,{disabled:d,spaceStore:t,samlConfigStore:n}),(0,te.jsx)(Or,{spaceStore:t,spaces:c})]})}const Vr=(0,p().vU)({failedCreatingNewScimToken:{id:"scimTokenSettings.error.failedCreatingNewScimToken",defaultMessage:"Failed to create a new SCIM token, please try again later."}});function Ur(e){const[t,n]=(0,i.useState)(!1),s=(0,o().O7)();const a=!t&&"Able"===e.tokenCreationAbility,r=t||"Able"!==e.tokenCreationAbility,l=(0,te.jsx)(Bt().Z,{isBlue:a,isLightGray:r,disabled:r,style:{position:"relative",marginLeft:"auto",marginRight:0},icon:e=>(0,Uo().R)({...e,width:14,height:14,fill:"inherit",marginRight:"6px"}),onClick:async function(){n(!0);try{const t=await async function(e){let{environment:t,spaceStore:n,userStore:i}=e;const{botStore:o,transactionPromise:s}=yo().lz({environment:t,spaceStore:n,name:"SCIM",userId:i.id,spaceRole:"editor",type:"scim"});return await s,o.id}({...e,environment:s});e.onNewScimToken(t)}catch(t){x().UW(D().Z.formatMessage(Vr.failedCreatingNewScimToken))}n(!1)},children:(0,te.jsx)(p()._H,{id:"scimTokenSettings.NewSCIMTokenButton.title",defaultMessage:"Add token"})});let d;switch(e.tokenCreationAbility){case"Able":return l;case"Undefined":d=(0,te.jsx)(p()._H,{defaultMessage:"Not able to create a new SCIM token right now. Please try again later.",id:"scimTokenSettings.NewSCIMTokenButton.unableToCreateTokenMessage.undefined"});break;case"SpaceHasExistingToken":d=(0,te.jsx)(p()._H,{defaultMessage:"To create a new SCIM token, please revoke the existing token.",id:"scimTokenSettings.NewSCIMTokenButton.unableToCreateTokenMessage.spaceHasLegacyToken"});break;case"UserHasExistingToken":d=(0,te.jsx)(p()._H,{defaultMessage:"You already have a registered SCIM token. To create a new one, please revoke the token created by you.",id:"scimTokenSettings.NewSCIMTokenButton.unableToCreateTokenMessage.userHasExistingToken"});break;default:(0,gn().t1)(e.tokenCreationAbility)}return(0,te.jsx)(pe().Z,{textWrap:!1,renderTooltip:()=>d,placement:he().Placement.Right,render:e=>(0,te.jsx)("div",{...e,style:{paddingLeft:"4px"},children:l})})}var Er=()=>n(163262),Nr=()=>n(530980),Fr=()=>n(777346);const Kr={container:{display:"flex",alignItems:"center",fontSize:g().JB.UIRegular.desktop,overflow:"hidden"},userAvatar:{paddingRight:6},userName:{flexShrink:1,...g().Yu}};function zr(e,t){const n=Nr().kk5.fromValue(A().cZ,e);return n.getCreatedByTable()===R().KJ&&n.getCreatedById()===t}const Wr={buttonStyle:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,height:20,width:20,marginRight:1},menuItemButton:{minWidth:200}};function qr(e){let{onRevokeToken:t}=e;const n=(0,r().Fg)();return(0,te.jsx)(pe().Z,{textWrap:!1,renderTooltip:()=>(0,te.jsx)(p()._H,{defaultMessage:"Revoke this token.",id:"revokeTokenButton.tooltip"}),placement:he().Placement.Right,render:e=>(0,te.jsx)(ra().ZP,{popupType:ra().Z4.Popup,placementToOrigin:ra().pO.Right,renderOrigin:t=>(0,te.jsx)(ue().Z,{className:He().TAd,style:Wr.buttonStyle,mobileFeedback:!1,...e,...t,children:(0,Vn().y)({fill:n.mediumIconColor,width:12,height:12})}),onClick:()=>{x().gt({mode:"wide",message:(0,te.jsx)(p()._H,{id:"manageSCIMTokenTable.ConfirmDeletingTokenModal.message",defaultMessage:"Revoke this token?"}),description:(0,te.jsx)(p()._H,{id:"manageSCIMTokenTable.ConfirmDeletingTokenModal.description",defaultMessage:"Existing SCIM configurations that use this token will no longer work once the token is revoked, and you'll have to provide them with a new token."}),acceptLabel:(0,te.jsx)(p()._H,{id:"manageSCIMTokenTable.ConfirmDeletingTokenModal.acceptButton.label",defaultMessage:"Revoke token"}),cancelLabel:(0,te.jsx)(p()._H,{id:"manageSCIMTokenTable.ConfirmDeletingTokenModal.cancelButton.label",defaultMessage:"Cancel"})}).then((e=>e.accept)).then((e=>e&&t()))},render:e=>(e.close(),(0,te.jsx)(te.Fragment,{}))})})}function Gr(){const e=(0,r().Fg)();return(0,te.jsx)(pe().Z,{textWrap:!1,renderTooltip:()=>(0,te.jsx)(p()._H,{defaultMessage:"Outdated token. Revoke this token and generate a new one to view its contents.",id:"manageScimTokenTable.OutdatedWarningIcon.tooltip"}),placement:he().Placement.Right,render:t=>(0,te.jsx)("div",{...t,style:{paddingLeft:"4px"},children:(0,jr().t)({fill:(0,Vo().fi)("orange",e).fill,width:12,height:12})})})}function Yr(e){let{clipboardTextFn:t}=e;const n=(0,o().O7)();const i=(0,r().Fg)(),s={height:25,background:i.whiteButtonBackground,color:i.regularTextColor,fontWeight:g().Ue.regular,padding:"4px 6px",fontSize:11.5};return(0,te.jsxs)(Fr().Z,{onClick:async function(){const e=await t();if(void 0!==e){const t=await de().F.clipboardActions.load();t.copyString({environment:n,stringValue:e,copiedMessage:t.clipboardMessages.copiedTokenToClipboard,showCopyModal:!!n.device.isSafari||void 0})}},style:s,children:[(0,fe().U)({height:16,width:16,paddingRight:4}),(0,te.jsx)(p()._H,{defaultMessage:"Copy",id:"codeBlock.copyToClipboard.button"})]})}const $r="•••••••••••";function Xr(){return(0,te.jsx)(pe().Z,{textWrap:!1,renderTooltip:()=>(0,te.jsx)(p()._H,{defaultMessage:"This token can only be viewed by its creator.",id:"manageScimTokenTable.renderTokenThatCannotBeViewed.tooltip"}),placement:he().Placement.Right,render:e=>(0,te.jsx)("div",{...e,children:$r})})}function Qr(e){let{row:t}=e;const n=(0,o().O7)();return t.legacy?(0,te.jsxs)(te.Fragment,{children:[$r,(0,te.jsx)(Gr,{})]}):t.ownedByCurrentUser?(0,te.jsxs)(te.Fragment,{children:[$r,(0,te.jsx)(Yr,{clipboardTextFn:()=>yo().VG({environment:n,botId:t.id})})]}):(0,te.jsx)(Xr,{})}const Jr={id:"token",headerTitle:(0,te.jsx)(p()._H,{id:"manageScimTokenTable.columnTitle.token",defaultMessage:"Token"}),renderCell:e=>(0,te.jsx)(Qr,{row:e}),widthData:{width:40},sortable:!1,hasClickableContents:!0};function el(){const e=Kr;return(0,te.jsx)(pe().Z,{textWrap:!1,renderTooltip:()=>(0,te.jsx)(p()._H,{defaultMessage:"This token was created by a user who is no longer an admin in the workspace.",id:"scimTableLegacyUserCell.tooltip"}),placement:he().Placement.Right,render:t=>(0,te.jsx)("div",{...t,children:(0,te.jsxs)("div",{style:e.container,children:[(0,te.jsx)(ws().Z,{style:e.userAvatar,avatarShouldShowShadow:!0,size:20}),(0,te.jsx)("div",{style:e.userName,children:(0,te.jsx)("i",{children:"Deactivated user"})})]})})})}const tl={id:"addedBy",headerTitle:(0,te.jsx)(p()._H,{id:"manageScimTokenTable.columnTitle.addedBy",defaultMessage:"Added by"}),renderCell:e=>{if(e.legacy)return(0,te.jsx)(el,{});{const t=e.ownedByCurrentUser?(0,te.jsx)(me().Z,{isSecondaryColor:!0,style:{marginLeft:4,textAlign:"center"},children:(0,te.jsx)(p()._H,{id:"manageSCIMTokenTable.colums.addedBy.selfIndicator",defaultMessage:"(you)"})}):(0,te.jsx)(te.Fragment,{});return(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(qi().G,{isClickable:!1,userStores:[e.ownerUserStore]}),t]})}},widthData:{width:40},sortable:!1,hasClickableContents:!1},nl={id:"created",headerTitle:(0,te.jsx)(p()._H,{id:"manageScimTokenTable.columnTitle.created",defaultMessage:"Created"}),renderCell:e=>(0,te.jsx)(Wi().T,{includeTime:!0,dateTs:e.createdAt}),widthData:{width:40},sortable:!0,hasClickableContents:!1},il=[Jr,tl,nl,{id:"revokeToken",headerTitle:void 0,renderCell:e=>(0,te.jsx)(qr,{onRevokeToken:()=>{e.onRevokeToken()}}),widthData:{width:10},sortable:!1,hasClickableContents:!0}];function ol(e,t){let{column:n,sortAscending:i}=t;const o=null==n?void 0:n.id;let s=e=>e.id;switch(o){case"name":s=e=>e.name;break;case"created":s=e=>e.createdAt;break;case"token":case"addedBy":case"revokeToken":case void 0:break;default:(0,gn().t1)(o)}const a=m().MR(e,s);return i||a.reverse(),a}function sl(e){let{botStores:t,onRevokeToken:n}=e;const o=(0,a().VK)((()=>et().default.state.currentUserStore),[]),s=(0,a().VK)((()=>et().default.state.currentSpaceStore),[]),l=(0,p().YB)(),d=(0,a().VK)((()=>{if(!s)return[];const e=null==o?void 0:o.id;return m().oA(t.map((t=>{const i=t.getModel();if(!i||!(0,Er().xe)(i))return;const o={id:i.id,isClickable:!1,createdAt:i.getCreatedAt(),userLocale:l.locale,name:i.getName(),onRevokeToken:()=>{n(i.id)}},a=function(e){const t=Nr().kk5.fromValue(A().cZ,e);return"notion_user"===t.getCreatedByTable()&&t.getCreatedById()===R().s$.id}(i);return a?{...o,legacy:a}:{...o,legacy:a,ownedByCurrentUser:zr(i,e),ownerUserStore:"notion_user"===i.getCreatedByTable()?(0,Yi().o)({userId:i.getCreatedById(),currentSpaceStore:s}):void 0}})))}),[t,s,o,l.locale,n]),[c,u]=(0,i.useState)({column:nl,sortAscending:!1}),g=(0,r().yK)((e=>(0,ce().bE)({columnRenderInfo:il,theme:e,containerMarginTop:0})),[]);return(0,te.jsx)(ce().Dp,{columnRenderInfo:il,rows:ol(d,c),sortState:c,onSortStateChanged:u,onRowClick:()=>(0,te.jsx)(te.Fragment,{}),renderNoRowsComponent:()=>(0,te.jsx)(me().Z,{isSmall:!0,style:{marginTop:15,marginBottom:40,textAlign:"center"},children:(0,te.jsx)(p()._H,{id:"manageSCIMTokenTable.noTokensFound.message",defaultMessage:"No active SCIM tokens."})}),styles:g})}async function al(e){let{environment:t,spaceId:n}=e;return(await yo().Yw({environment:t,table:ho().bx,id:n,type:"scim"})).botIds}const rl=function(e){let{botIds:t,setBotIds:n,spaceStore:s}=e;const a=(0,o().O7)(),r=s.id;if((0,i.useEffect)((()=>{void 0===t&&al({environment:a,spaceId:r}).then(n)}),[t,a,n,r]),t){const e=t.map((e=>J().t1.createChildStore(s,{table:A().cZ,id:e,spaceId:r})));return(0,te.jsx)(sl,{botStores:e,onRevokeToken:e=>{yo().P0({environment:a,botId:e,onSuccess:()=>{al({environment:a,spaceId:r}).then(n)}})}})}return(0,te.jsx)(oi().Z,{})};function ll(e){let{userStore:t,spaceStore:n,promptUpgrade:s}=e;const[r,l]=(0,i.useState)(void 0),d=(0,o().O7)(),c=(0,a().VK)((()=>function(e){let{botIds:t,spaceStore:n,environment:i}=e;if(void 0===t)return"Undefined";const o=t.map((e=>J().t1.createChildStore(n,{table:A().cZ,id:e,spaceId:n.id}))).filter((e=>e.isDefined()));if(o.some((e=>e.getCreatedByTable()===R().KJ&&e.getCreatedById()===R().s$.id)))return"SpaceHasExistingToken";const s=o.some((e=>e.getCreatedByTable()===R().KJ&&e.getCreatedById()===i.currentUser.id));if(s)return"UserHasExistingToken";return"Able"}({botIds:r,spaceStore:n,environment:d})),[r,d,n]),u=(0,te.jsx)(p()._H,{id:"identityAndProvisioning.scim.title",defaultMessage:"SCIM tokens"}),m=(0,te.jsx)(p()._H,{id:"identityAndProvisioning.scim.byline",defaultMessage:"Generate a token to configure SCIM."});return s?(0,te.jsx)(tr,{title:u,byline:m,targetTier:"enterprise"}):(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(Tn,{title:u,byline:m,settingItem:(0,te.jsx)(Ur,{onNewScimToken:e=>l((t=>[...t??[],e])),spaceStore:n,userStore:t,tokenCreationAbility:c})}),(0,te.jsx)(_n().Z,{title:(0,te.jsx)(p()._H,{id:"securitySAMLSettings.SCIMSection.helpButton.label",defaultMessage:"Learn about SCIM"}),style:{marginTop:18,marginBottom:24},href:(0,Ee().UY)("guides.scim"),analyticsFrom:"scim_settings"}),(0,te.jsx)(rl,{spaceStore:n,userStore:t,botIds:r,setBotIds:l})]})}function dl(e){let{spaceStore:t}=e;const n=(0,o().O7)(),i=(0,r().yK)((()=>({settingContainer:{margin:"18px 0"},settingsTitle:{display:"inline-flex",alignItems:"center"}})),[]),s=(0,a().VK)((()=>Boolean(t.getSettings().are_scim_invite_emails_suppressed)),[t]),l=(0,te.jsx)(p()._H,{id:"identityAndProvisioning.scim.suppressScimInviteEmails.title",defaultMessage:"Suppress invite emails from SCIM provisioning"}),d=(0,te.jsx)(p()._H,{id:"identityAndProvisioning.scim.suppressScimInviteEmails.message",defaultMessage:"Control if users will receive invite emails when provisioned by SCIM to workspaces and groups."});return(0,te.jsx)("div",{style:i.settingContainer,children:(0,te.jsx)(_a,{title:(0,te.jsx)("div",{style:i.settingsTitle,children:l}),byline:d,isOn:s,onToggle:()=>function(e){let{environment:t,areScimInviteEmailsSuppressed:n,spaceStore:i}=e;w().createAndCommit({userAction:"ScimSection.SuppressScimInviteEmailsSetting",environment:t,canUndo:!0,perform:e=>{w().applyOperation({store:i,operation:{pointer:i.pointer,path:["settings","are_scim_invite_emails_suppressed"],command:"set",args:n},transaction:e})}})}({environment:n,spaceStore:t,areScimInviteEmailsSuppressed:!s})})})}function cl(e){let{userStore:t,spaceStore:n}=e;const i=(0,An().VX)({name:"scim",spaceId:n.id,userId:t.id});return(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(ll,{promptUpgrade:!i,userStore:t,spaceStore:n}),i?(0,te.jsx)(dl,{spaceStore:n}):null]})}function ul(e){let{primarySpaceName:t}=e;const n=(0,r().yK)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",gap:8,width:"100%",padding:"18px 24px",borderRadius:12,marginBlock:12,background:e.onboardingPreviewBackground},title:{fontSize:14,fontWeight:500,color:e.text.primary,width:"100%"},text:{fontSize:14,fontWeight:400,color:e.text.secondary,width:"100%"}})),[]);return(0,te.jsxs)("div",{style:n.container,children:[(0,te.jsx)(me().Z,{style:n.title,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.secondaryWorkspace.uneditableTitle",defaultMessage:"The primary workspace is <bold>{primaryWorkspaceName}</bold>.",values:{primaryWorkspaceName:t,bold:e=>(0,te.jsx)("span",{style:{fontWeight:g().Ue.semibold},children:e})}})}),(0,te.jsx)(me().Z,{style:n.text,isMultiline:!0,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.secondaryWorkspace.uneditableMessage",defaultMessage:"The domain management settings and SAML SSO configuration are being managed by the workspace <bold>{primaryWorkspaceName}</bold>. Please navigate there or contact an admin of that workspace to edit the verified domains or SSO configuration.",values:{primaryWorkspaceName:t,bold:e=>(0,te.jsx)("span",{style:{fontWeight:g().Ue.semibold},children:e})}})})]})}var pl=()=>n(617811);function ml(e){let{userStore:t,spaceStore:n,samlConfigStore:s,domainSettingsStore:l,organizationInfo:d,isOrganizationOwner:c}=e;const u=(0,o().O7)(),m=(0,a().VK)((()=>Ot().default.state.online),[]),{loadingSaml:g,loadedSaml:f,errorSaml:h}=(0,i.useContext)(Hs),y=void 0!==d,v=function(e){let{environment:t,samlConfigStore:n,spaceStore:i}=e;const o=Ua({environment:t,samlConfigStore:n,spaceStore:i}),s=(0,a().VK)((()=>!n.state.id||n.state.id===i.id),[n,i]);return o&&s}({environment:u,samlConfigStore:s,spaceStore:n}),b=(0,a().VK)((()=>s.state.id?Ea().Z.getData(u,{spaceId:s.state.id}):void 0),[u,s]),S=(0,r().yK)((e=>({header:{marginTop:36},byline:{color:e.mediumInvertedTextColor}})),[]),M=(0,a().VK)((()=>(0,ni().wP)()),[]);return(0,i.useEffect)((()=>{m&&!g&&h&&x().RL(h.message)}),[h,g,m]),m?g?(0,te.jsx)(Rt().ZP,{children:(0,te.jsx)(oi().Z,{style:{margin:"0 auto"}})}):h?null:f?y?(0,te.jsxs)(Rt().ZP,{children:[(0,te.jsx)(ae().Z,{large:!0,divider:"full",children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.domainAndUserManagement.title",defaultMessage:"Domain & managed accounts"})}),c?(0,te.jsx)(Ya,{organizationId:d.id}):(0,te.jsx)(Xa,{content:(0,te.jsx)(p()._H,{id:"workspaceSettingsModal.organizationsBanner.member.title",defaultMessage:"These settings can only be managed by organization owners"}),tooltipContent:(0,te.jsx)(p()._H,{id:"workspaceSettingsModal.organizationsBanner.member.tooltip",defaultMessage:"Verifying domains and managing accounts can only be done by organization owners{br}<byline>Organization owners can manage all workspaces in {organizationName}</byline>",values:{br:(0,te.jsx)("br",{}),organizationName:d.name,byline:e=>(0,te.jsx)("span",{style:S.byline,children:e})}})}),!v&&b?(0,te.jsx)(ul,{primarySpaceName:b.name}):null,(0,te.jsx)(ae().Z,{large:!0,divider:"full",style:S.header,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.saml.title",defaultMessage:"SAML single sign-on (SSO)"})}),(0,te.jsx)(Hr,{spaceStore:n,samlConfigStore:s,domainSettingsStore:l}),(0,te.jsx)(ae().Z,{large:!0,divider:"full",style:S.header,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.scim.title",defaultMessage:"SCIM provisioning"})}),(0,te.jsx)(cl,{userStore:t,spaceStore:n}),(0,te.jsx)(ae().Z,{large:!0,divider:"full",style:S.header,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.setupInfo.title",defaultMessage:"Setup information"})}),(0,te.jsx)(pl().H,{spaceStore:n})]}):(0,te.jsxs)(Rt().ZP,{children:[!v&&b?(0,te.jsx)(ul,{primarySpaceName:b.name}):null,(0,te.jsx)(ae().Z,{large:!0,divider:"full",children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.domain.title",defaultMessage:"Domain management"})}),(0,te.jsx)(lr,{spaceStore:n,samlConfigStore:s,domainSettingsStore:l,isCurrentSpaceEnterprise:M}),(0,te.jsx)(ae().Z,{large:!0,divider:"full",style:S.header,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.userManagement.title",defaultMessage:"User management"})}),(0,te.jsx)(vr,{spaceStore:n,samlConfigStore:s,domainSettingsStore:l}),(0,te.jsx)(ae().Z,{large:!0,divider:"full",style:S.header,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.saml.title",defaultMessage:"SAML single sign-on (SSO)"})}),(0,te.jsx)(Hr,{spaceStore:n,samlConfigStore:s,domainSettingsStore:l}),(0,te.jsx)(ae().Z,{large:!0,divider:"full",style:S.header,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.scim.title",defaultMessage:"SCIM provisioning"})}),(0,te.jsx)(cl,{userStore:t,spaceStore:n}),(0,te.jsx)(ae().Z,{large:!0,divider:"full",style:S.header,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.setupInfo.title",defaultMessage:"Setup information"})}),(0,te.jsx)(pl().H,{spaceStore:n})]}):null:(0,te.jsx)(Rt().ZP,{children:(0,te.jsx)(me().Z,{isSmall:!0,isMultiline:!0,style:{textAlign:"center"},children:(0,te.jsx)(p()._H,{defaultMessage:"Please go online to manage identity and provisioning settings.",id:"identityProvisioningSettings.offline.message"})})})}var gl=()=>n(857806),fl=()=>n(947115),hl=()=>n(326966),yl=()=>n(174912),vl=()=>n(904440),xl=()=>n(80510),bl=()=>n(960304),Sl=()=>n(145613),Ml=()=>n(78078);function jl(){return(0,te.jsx)(pe().Z,{renderTooltip:()=>(0,te.jsx)(p()._H,{id:"identityAndProvisioning.claimWorkspaces.table.pendingWorkspaceClaim.Explanation",defaultMessage:"Workspace claim request is being processed."}),render:e=>(0,te.jsx)(me().Z,{...e,children:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.claimWorkspaces.table.pendingClaim",defaultMessage:"Pending"})})})}var Cl=()=>n(499110);function wl(e){let{admin:t}=e;const n=(0,p().YB)();return(0,te.jsx)(pe().Z,{renderTooltip:()=>(0,te.jsx)(p()._H,{id:"identityAndProvisioning.claimWorkspaces.table.pendingWorkspaceTransferExplanation",defaultMessage:"Waiting for {name} to transfer the workspace to an external account.",values:{name:(0,Cl().Nz)(n,t)}}),render:e=>(0,te.jsx)(me().Z,{...e,children:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.claimWorkspaces.table.pendingTransfer",defaultMessage:"Pending"})})})}let kl=function(e){return e.Single="single",e.Multi="multi",e}({});function _l(e){const{space:t,mode:n}=e,i=(0,a().qz)(void 0,sa().Z),o=(0,r().yK)((()=>({container:{minWidth:325}})),[]);return n===kl.Single?(0,te.jsx)(Il,{action:e.action,space:t}):(0,te.jsx)(ra().ZP,{popupType:rs().kQ.Popup,style:o.container,buttonPopupStore:i,renderOrigin:e=>(0,te.jsx)($t().Z,{icon:oa().o,...e}),render:()=>(0,te.jsx)(Tl,{space:t,actions:e.actions,popupStore:i})})}function Tl(e){let{space:t,actions:n,popupStore:i}=e;const o={key:"workspace-actions",render:e=>(0,te.jsx)(es().Z,{...e}),items:n.map((e=>{const n=!!e.getDisabledState&&e.getDisabledState(t),i=e.getTooltip?e.getTooltip(t):null;return{key:e.id,render:t=>(0,te.jsx)(pe().Z,{render:i=>(0,te.jsx)(aa().Z,{...t,...i,shouldWrapCaption:!0,svg:t=>e.getIcon(t),title:e.name,caption:e.caption,style:{paddingTop:8,paddingBottom:8,opacity:n?.5:1},disabled:n}),renderTooltip:()=>i,disableTooltip:!Boolean(i),placement:he().Placement.Left}),action:()=>e.onAction(t)}}))};return(0,te.jsx)($o().Z,{menuType:Wo().o.Popup,children:(0,te.jsx)(Qo().Z,{type:Qo().i.Vertical,initialFocus:void 0,sections:[o],onAccept:()=>{i.setState({open:!1})}})})}function Il(e){const{action:t,space:n}=e,o=(0,r().yK)((e=>({button:{paddingLeft:5,paddingRight:5}})),[]),s=i.useCallback((()=>{t.onAction(n)}),[t,n]);return(0,te.jsx)(Bt().Z,{isSmall:!0,style:o.button,onClick:s,children:t.name})}var Pl=()=>n(587148),Al=()=>n(925514);function Rl(e){let{users:t,deletedUserEmailDomain:n}=e;const i=(0,a().qz)(void 0,sa().Z),o=(0,r().yK)((()=>({container:{minWidth:275}})),[]);return(0,te.jsx)(ra().ZP,{popupType:rs().kQ.Popup,style:o.container,buttonPopupStore:i,renderOrigin:e=>(0,te.jsx)(Dl,{users:t,deletedUserEmailDomain:n,...e}),render:()=>(0,te.jsx)(Zl,{users:t,popupStore:i})})}function Zl(e){let{users:t,popupStore:n}=e;const i=(0,o().O7)(),s={key:"workspace-users-menu",render:e=>(0,te.jsx)(es().Z,{...e}),items:t.map((e=>({key:e.id,render:t=>(0,te.jsx)(Bl,{user:e,...t}),action:()=>S().D({environment:i,url:`mailto:${e.email}`})})))};return(0,te.jsx)($o().Z,{menuType:Wo().o.Popup,children:(0,te.jsx)(Qo().Z,{type:Qo().i.Vertical,initialFocus:0,sections:[s],onAccept:()=>{n.setState({open:!1})}})})}function Bl(e){let{user:t,...n}=e;const i=(0,p().YB)(),o=(0,r().yK)((e=>({container:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",height:"auto",paddingTop:8,paddingBottom:8,margin:"0 6px"},avatarContainer:{display:"flex",justifyContent:"center",alignItems:"center"},copyContainer:{display:"flex",justifyContent:"center",alignItems:"center",marginLeft:"auto",opacity:.5},nameContainer:{marginLeft:8,marginRight:8},name:{fontSize:14,lineHeight:1.2,maxWidth:300},email:{fontSize:12,lineHeight:1.2,opacity:.5,maxWidth:300}})),[]);return(0,te.jsxs)(Bt().Z,{style:o.container,...n,children:[(0,te.jsx)("div",{style:o.avatarContainer,children:(0,te.jsx)(ws().Z,{userValue:t,size:24})}),(0,te.jsxs)("div",{style:o.nameContainer,children:[(0,te.jsx)(me().Z,{style:o.name,children:(0,Cl().Nz)(i,t)}),(0,te.jsx)(me().Z,{style:o.email,children:t.email})]}),(0,te.jsx)("div",{style:o.copyContainer,children:(0,Al().Z)({height:18,width:18})})]})}function Dl(e){let{users:t,deletedUserEmailDomain:n,...i}=e;const o=(0,p().YB)(),s=(0,r().yK)((e=>({container:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginLeft:"-8px",maxWidth:"100%"},empty:{fontSize:14,maxWidth:150,opacity:.5},name:{fontSize:14,maxWidth:150},plusMore:{opacity:.5,display:"inline"}})),[]);return 0===t.length?(0,te.jsx)(pe().Z,{render:e=>(0,te.jsx)(Bt().Z,{style:s.container,disabled:!0,...i,...e,children:(0,te.jsx)(me().Z,{style:s.empty,children:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.claimWorkspaces.users.empty",defaultMessage:"Deleted user"})})}),disableTooltip:!n,renderTooltip:()=>(0,te.jsx)(p()._H,{id:"identityAndProvisioning.claimWorkspaces.users.emptyTooltip",defaultMessage:"Deleted user from {domain}",values:{domain:`@${n}`}})}):(0,te.jsx)(Bt().Z,{style:s.container,...i,children:(0,te.jsx)(me().Z,{children:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.claimWorkspaces.users.name",defaultMessage:"{remainingCount, plural, =0 {{firstUser}} one {{firstUser} <gray>+{remainingCount}</gray>} other {{firstUser} <gray>+{remainingCount}</gray>}}",values:{firstUser:(0,Cl().Nz)(o,t[0]),remainingCount:t.length-1,gray:e=>(0,te.jsx)(me().Z,{style:s.plusMore,children:e})}})})})}const Ll=[{id:"spaces",headerTitle:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.claimWorkspaces.table.name",defaultMessage:"Workspaces"}),renderCell:e=>(0,te.jsx)(Pl().k,{id:e.space.id,name:e.space.name,icon:e.space.icon,subscriptionTier:e.space.subscriptionTier,memberCount:e.space.memberCount}),widthData:{width:60},sortable:!1},{id:"admins",headerTitle:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.claimWorkspaces.table.admins",defaultMessage:"Workspace owners"}),renderCell:e=>(0,te.jsx)(Rl,{users:e.space.admins}),widthData:{width:40},sortable:!1},{id:"createdBy",headerTitle:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.claimWorkspaces.table.createdBy",defaultMessage:"Created by"}),renderCell:e=>e.space.creator?(0,te.jsx)(Rl,{users:[e.space.creator]}):(0,te.jsx)(Rl,{users:[],deletedUserEmailDomain:e.space.creatorEmailDomain}),widthData:{width:40},sortable:!1},{id:"createdAt",headerTitle:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.claimWorkspaces.table.createdAt",defaultMessage:"Created date"}),renderCell:e=>(0,te.jsx)(me().Z,{style:{opacity:.5},children:(0,ja().gs)(e.space.createdAt)}),widthData:{width:30},sortable:!1},{id:"action",headerTitle:null,renderCell:e=>{if((0,wo().DI)(e.space.spaceRequest))return(0,te.jsx)(wl,{admin:e.space.admins[0]});if((0,wo().XR)(e.space.spaceRequest))return(0,te.jsx)(jl,{});if((0,wo().TZ)(e.space.spaceRequest)){const t=e.actions.find((e=>"recover-space"===e.id));return t&&(0,te.jsx)(_l,{space:e.space,action:t,mode:kl.Single})}return e.actions.length>0?(0,te.jsx)(_l,{space:e.space,actions:e.actions.filter((e=>"recover-space"!==e.id)),mode:kl.Multi}):null},widthData:{width:15},sortable:!1}];function Ol(e){let{claimableSpaces:t,spaceActions:n,loadMoreClaimableSpaces:i,loading:o}=e;const s=t.map((e=>({id:e.id,isClickable:!1,space:e,actions:n}))),a=(0,r().yK)((e=>(0,ce().bE)({columnRenderInfo:Ll,theme:e,containerMarginTop:0})),[]);return(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(ce().Dp,{hideHeaderRowPadding:!0,showRowBorders:!0,columnRenderInfo:Ll,rows:s,renderNoRowsComponent:()=>(0,te.jsx)(me().Z,{isSmall:!0,style:{marginTop:15,marginBottom:40,textAlign:"center"},children:!o&&(0,te.jsx)(p()._H,{id:"identityAndProvisioning.claimWorkspaces.table.empty",defaultMessage:"No claimable workspaces."})}),styles:a,getStyleForRow:function(e){if((0,wo().DI)(e.space.spaceRequest)||(0,wo().XR)(e.space.spaceRequest)||(0,wo().TZ)(e.space.spaceRequest))return{opacity:.5}},loadMoreMethod:i?{type:"scroll",onLoadMore:i}:void 0}),o&&(0,te.jsx)(oi().Z,{style:{margin:"24px auto 24px"}})]})}var Hl=()=>n(446866),Vl=()=>n(688049),Ul=()=>n(548557),El=()=>n(733641),Nl=()=>n(108714);const Fl=(0,p().vU)({emailPlaceholder:{id:"identityProvisioningSettings.transferWorkspaces.transferModal.contactEmail.placeholder",defaultMessage:"it@example.com"}});function Kl(e){let{onDismiss:t,spaceQueuedForTransfer:n,currentSpaceId:s}=e;const[a,l]=(0,i.useState)(),[d,c]=(0,i.useState)(!1),{setSpaceRequest:u}=(0,i.useContext)(Hs),m=(0,o().O7)(),f=(0,r().yK)((e=>({modalInnerStyle:{width:406,padding:"24px 20px 16px 20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},closeIconContainer:{position:"absolute",top:10,right:10,backgroundColor:e.accentColors.gray[75],borderRadius:"50%",height:22,width:22,display:"flex",justifyContent:"center",alignItems:"center"},closeIcon:{width:14,height:14,fill:e.mediumTextColor},modalIcon:{fill:e.mediumIconColor,height:24,width:24},title:{fontWeight:g().Ue.medium,fontSize:16,display:"inline-flex",alignItems:"center",justifyContent:"center",marginTop:9},description:{fontWeight:g().Ue.regular,textAlign:"center",fontSize:13,lineHeight:"16px",letterSpacing:"-0.08",marginTop:9},workspaceContainer:{position:"relative",borderRadius:6,border:`1px solid ${e.regularDividerColor}`,padding:"0 12px",boxSizing:"border-box",marginTop:30,width:"100%",height:60,justifyContent:"center",display:"flex",alignItems:"center"},checkContainer:{position:"absolute",right:12,display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20},check:{fill:e.mediumIconColor,height:16,width:16},dividerContainer:{marginTop:20},dividerInner:{borderBottomColor:e.regularDividerColor},contactEmailContainer:{position:"relative",width:"100%",minHeight:56,marginTop:13},contactEmailTitle:{fontWeight:g().Ue.medium,fontSize:14,marginBottom:8,letterSpacing:-.15,display:"inline-flex",alignItems:"center"},helpIcon:{fill:e.lightIconColor,marginLeft:4,height:16,width:16},primaryButton:{width:"100%",marginTop:32},buttonCaption:{color:e.mediumTextColor,marginTop:8,textAlign:"center",fontSize:12},secondaryButton:{margin:"8px auto 0",justifyContent:"center",fontWeight:g().Ue.medium,color:e.lightTextColor},buttonCaptionError:{color:e.errorText,marginTop:8,fontSize:13}})),[]),h=Boolean(n);return(0,te.jsx)(ri().Z,{open:h,innerStyle:f.modalInnerStyle,preventHideChildrenWhileOpening:!0,onDismiss:t,render:()=>(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)("div",{style:f.closeIconContainer,children:(0,te.jsx)(Bt().Z,{isSmall:!0,onClick:t,ignoreLocalHoverState:!0,children:(0,Vl().D)(f.closeIcon)})}),(0,te.jsx)("div",{children:(0,Ul()._)(f.modalIcon)}),(0,te.jsxs)(me().Z,{style:f.title,children:[(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.selfServe.title",defaultMessage:"Require account change"}),(0,te.jsx)(Nl().Z,{href:(0,Ee().UY)("guides.domainManagement"),children:(0,te.jsx)($t().Z,{icon:Us().m})})]}),(0,te.jsx)(me().Z,{isSmall:!0,isMultiline:!0,style:f.description,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.byline",defaultMessage:"You’re about to require the Workspace Owner of 1 workspace to use an external Notion accounts. They will be unable to use the workspace until the change is made."})}),(0,te.jsxs)("div",{style:f.workspaceContainer,children:[n?(0,te.jsx)(Pl().k,{id:n.id,name:n.name,icon:n.icon,subscriptionTier:n.subscriptionTier,memberCount:n.memberCount}):null,(0,te.jsx)("div",{style:f.checkContainer,children:(0,El().k)(f.check)})]}),(0,te.jsx)(ii().Z,{size:"100%",innerStyle:f.dividerInner,style:f.dividerContainer}),(0,te.jsxs)("div",{style:f.contactEmailContainer,children:[(0,te.jsxs)(me().Z,{style:f.contactEmailTitle,children:[(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.contactEmail.title",defaultMessage:"Send request from"}),(0,te.jsx)(pe().Z,{renderTooltip:()=>(0,te.jsx)(p()._H,{id:"identityAndProvisioning.claimWorkspaces.table.pendingExplanation",defaultMessage:"The Workspace Owner can contact this email for inquiries"}),render:e=>(0,te.jsx)("span",{...e,children:(0,Us().m)(f.helpIcon)})})]}),(0,te.jsx)(Dn().Z,{value:a,placeholder:D().Z.formatMessage(Fl.emailPlaceholder),onChange:e=>{c(!1),l(e.target.value)}}),d&&(0,te.jsx)(me().Z,{isSmall:!0,style:f.buttonCaptionError,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.contactEmail.error",defaultMessage:"Invalid email address"})})]}),(0,te.jsx)(kn().Z,{isLarge:!0,style:f.primaryButton,onClick:async()=>{const e=(0,Hl().H3)(a);var i;if((0,Hl().oH)(e)){if(n&&e){const o=await Z().callApi({eventName:"initiateWorkspaceTransfer",environment:m,data:{requestingSpaceId:s,targetSpaceId:n.id,contactEmail:e}});if("failed"===o.type)x().UW((0,B().wf)(D().Z.getIntl(),o));else{const s=o.data.workspaceTransfer;u(n.id,s),_s().az(m,{contactEmail:e,currentOwners:n.admins.map((e=>e.id)),targetSpaceId:n.id,verifiedDomain:n.creatorEmailDomain,subscriptionTier:n.subscriptionTier}),t(),i=n.name,Fs().oV({label:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.toast",defaultMessage:"Account change successfully requested for “{spaceName}“",values:{spaceName:i}})})}}}else c(!0)},children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.confirm",defaultMessage:"Confirm change"})}),(0,te.jsx)(me().Z,{isSmall:!0,isMultiline:!0,style:f.buttonCaption,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.buttonCaption",defaultMessage:"This cannot be undone"})}),(0,te.jsx)(Bt().Z,{style:f.secondaryButton,onClick:t,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.transferWorkspaces.transferModal.cancel",defaultMessage:"Cancel"})})]})})}function zl(e){let{onDismiss:t,spaceQueuedForClaiming:n,requestingSpaceId:s}=e;const a=(0,o().O7)(),{setSpaceRequest:l}=(0,i.useContext)(Hs),d=(0,r().yK)((e=>({modalInnerStyle:{width:406,padding:"24px 20px 16px 20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},closeIconContainer:{position:"absolute",top:10,right:10,backgroundColor:e.accentColors.gray[75],borderRadius:"50%",height:22,width:22,display:"flex",justifyContent:"center",alignItems:"center"},closeIcon:{width:14,height:14,fill:e.mediumTextColor},title:{fontWeight:g().Ue.medium,fontSize:16,marginBottom:8,display:"inline-flex",alignItems:"center",justifyContent:"center"},helpIcon:{fill:e.lightIconColor,marginLeft:4,height:16,width:16},description:{fontWeight:g().Ue.regular,textAlign:"center",fontSize:13,lineHeight:"16px",letterSpacing:"-0.08px",marginTop:9},workspaceContainer:{position:"relative",borderRadius:6,border:`1px solid ${e.regularDividerColor}`,padding:"0 12px",boxSizing:"border-box",marginTop:30,width:"100%",height:60,justifyContent:"center",display:"flex",alignItems:"center"},checkContainer:{position:"absolute",right:12,display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20},check:{fill:e.mediumIconColor,height:16,width:16},primaryButton:{width:"100%",marginTop:32},secondaryButton:{margin:"8px auto 0",justifyContent:"center",fontWeight:g().Ue.medium,color:e.lightTextColor},buttonCaption:{color:e.mediumTextColor,marginTop:8,textAlign:"center",fontSize:12}})),[]),c=Boolean(n),u=async()=>{if(!n)return;const e=await Z().callApi({eventName:"requestClaimAndUpgrade",environment:a,data:{requestingSpaceId:s,targetSpaceId:n.id}});var i;"failed"===e.type?x().x2(e):(_s().eO(a,{currentOwners:n.admins.map((e=>e.id)),targetSpaceId:n.id,verifiedDomain:n.creatorEmailDomain,memberCount:n.memberCount}),l(n.id,e.data.spaceRequest),i=n.name,Fs().oV({label:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.toast",defaultMessage:"Workspace claim successfully requested for “{spaceName}“",values:{spaceName:i}})})),t()};return(0,te.jsx)(ri().Z,{open:c,innerStyle:d.modalInnerStyle,preventHideChildrenWhileOpening:!0,onDismiss:t,render:()=>(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)("div",{style:d.closeIconContainer,children:(0,te.jsx)(Bt().Z,{isSmall:!0,onClick:t,children:(0,Vl().D)(d.closeIcon)})}),(0,te.jsxs)(me().Z,{style:d.title,children:[(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.title",defaultMessage:"Request workspace claim"}),(0,te.jsx)(Nl().Z,{href:(0,Ee().UY)("guides.domainManagement"),children:(0,te.jsx)($t().Z,{icon:Us().m})})]}),(0,te.jsx)(me().Z,{isSmall:!0,isMultiline:!0,style:d.description,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.byline",defaultMessage:"You’re about to take ownership of {currentWorkspaceName} and upgrade it to an Enterprise plan. You’ll become the Workspace owner and the existing owners will be downgraded to members.",values:{currentWorkspaceName:n?n.name:"the workspace below"}})}),(0,te.jsxs)("div",{style:d.workspaceContainer,children:[n?(0,te.jsx)(Pl().k,{id:n.id,name:n.name,icon:n.icon,subscriptionTier:n.subscriptionTier,memberCount:n.memberCount}):null,(0,te.jsx)("div",{style:d.checkContainer,children:(0,El().k)(d.check)})]}),(0,te.jsx)(kn().Z,{isLarge:!0,style:d.primaryButton,onClick:u,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.sendRequest",defaultMessage:"Send request"})}),(0,te.jsx)(me().Z,{isSmall:!0,isMultiline:!0,style:d.buttonCaption,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.buttonCaption",defaultMessage:"This request may take a few days to process. For more information, contact your <accountmanageremail>Account Management team</accountmanageremail>.",values:{accountmanageremail:e=>(0,te.jsx)(ui().Z,{href:"mailto:am@makenotion.com",children:e})}})}),(0,te.jsx)(Bt().Z,{style:d.secondaryButton,onClick:t,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.salesAssisted.cancel",defaultMessage:"Cancel"})})]})})}function Wl(e){let{onDismiss:t,spaceQueuedForClaiming:n}=e;const i=(0,r().yK)((e=>({modalInnerStyle:{width:406,padding:"24px 20px 16px 20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},closeIconContainer:{position:"absolute",top:10,right:10,backgroundColor:e.accentColors.gray[75],borderRadius:"50%",height:22,width:22,display:"flex",justifyContent:"center",alignItems:"center"},closeIcon:{width:14,height:14,fill:e.mediumTextColor},modalIcon:{fill:e.mediumIconColor,height:24,width:24},title:{fontWeight:g().Ue.medium,fontSize:16,display:"inline-flex",alignItems:"center",justifyContent:"center",marginTop:9},helpIcon:{fill:e.lightIconColor,marginLeft:4,height:16,width:16},description:{fontWeight:g().Ue.regular,textAlign:"center",fontSize:13,lineHeight:"16px",letterSpacing:"-0.08px",marginTop:9},workspaceContainer:{position:"relative",borderRadius:6,border:`1px solid ${e.regularDividerColor}`,padding:"0 12px",boxSizing:"border-box",marginTop:30,width:"100%",height:60,justifyContent:"center",display:"flex",alignItems:"center"},checkContainer:{position:"absolute",right:12,display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20},check:{fill:e.mediumIconColor,height:16,width:16},primaryButton:{width:"100%",marginTop:32},secondaryButton:{margin:"8px auto 0",justifyContent:"center",fontWeight:g().Ue.medium,color:e.lightTextColor}})),[]),o=Boolean(n);return(0,te.jsx)(ri().Z,{open:o,innerStyle:i.modalInnerStyle,preventHideChildrenWhileOpening:!0,onDismiss:t,render:()=>(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)("div",{style:i.closeIconContainer,children:(0,te.jsx)(Bt().Z,{isSmall:!0,onClick:t,ignoreLocalHoverState:!0,children:(0,Vl().D)(i.closeIcon)})}),(0,te.jsx)("div",{children:(0,bl().l)(i.modalIcon)}),(0,te.jsxs)(me().Z,{style:i.title,children:[(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.selfServe.title",defaultMessage:"Claim workspace"}),(0,te.jsx)(Nl().Z,{href:(0,Ee().UY)("guides.domainManagement"),children:(0,te.jsx)($t().Z,{icon:Us().m})})]}),(0,te.jsx)(me().Z,{isSmall:!0,isMultiline:!0,style:i.description,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.selfServe.byline",defaultMessage:"You’re about to take ownership of {currentWorkspaceName} and upgrade it to an Enterprise plan. You’ll become the Workspace owner and the existing owners will be downgraded to members.",values:{currentWorkspaceName:n?n.name:"the workspace below"}})}),(0,te.jsxs)("div",{style:i.workspaceContainer,children:[n?(0,te.jsx)(Pl().k,{id:n.id,name:n.name,icon:n.icon,subscriptionTier:n.subscriptionTier,memberCount:n.memberCount}):null,(0,te.jsx)("div",{style:i.checkContainer,children:(0,El().k)(i.check)})]}),(0,te.jsx)(kn().Z,{isLarge:!0,style:i.primaryButton,onClick:async()=>{n&&await mt().Xb(n)},children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.selfServe.reviewAndPay",defaultMessage:"Review and pay"})}),(0,te.jsx)(Bt().Z,{style:i.secondaryButton,onClick:t,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.claimWorkspaces.claimModal.selfServe.cancel",defaultMessage:"Cancel"})})]})})}var ql=()=>n(661727),Gl=()=>n(715139);const Yl=(0,p().vU)({emailPlaceholder:{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.contactEmail.placeholder",defaultMessage:"it@example.com"}});function $l(e){let{onDismiss:t,spaceQueuedForDeletion:n,currentSpaceId:s}=e;const[a,l]=(0,i.useState)({email:void 0,didError:!1}),[d,c]=(0,i.useState)(!1),[u,m]=(0,i.useState)(!1),{setSpaceRequest:f}=(0,i.useContext)(Hs),h=(0,r().yK)((e=>({modalInnerStyle:{width:406,padding:"24px 20px 16px 20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},closeIconContainer:{position:"absolute",top:10,right:10,backgroundColor:e.accentColors.gray[75],borderRadius:"50%",height:22,width:22,display:"flex",justifyContent:"center",alignItems:"center"},closeIcon:{width:14,height:14,fill:e.mediumTextColor},modalIcon:{fill:"dark"===e.mode?e.accentColors.red[700]:e.accentColors.red[500],height:24,width:24},title:{fontWeight:g().Ue.medium,fontSize:16,display:"inline-flex",alignItems:"center",justifyContent:"center",marginTop:9},description:{fontWeight:g().Ue.regular,textAlign:"center",fontSize:13,lineHeight:"16px",letterSpacing:"-0.08px",marginTop:9},workspaceContainer:{position:"relative",borderRadius:6,border:`1px solid ${e.regularDividerColor}`,padding:"0 12px",boxSizing:"border-box",marginTop:30,width:"100%",height:60,justifyContent:"center",display:"flex",alignItems:"center"},checkContainer:{position:"absolute",right:12,display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20},check:{fill:e.mediumIconColor,height:16,width:16},checkboxContainer:{display:"inline-flex",marginTop:8,alignItems:"center"},checkbox:{color:"dark"===e.mode?e.accentColors.gray[400]:e.accentColors.gray[200],marginRight:8},primaryButton:{width:"100%",marginTop:32,background:"dark"===e.mode?e.accentColors.red[700]:e.accentColors.red[500],justifyContent:"center",fontWeight:g().Ue.medium,color:Vo().ZP.white},primaryButtonHovered:{background:"dark"===e.mode?(0,ql()._j)(e.accentColors.red[700],.3):(0,ql()._j)(e.accentColors.red[500],.3)},secondaryButton:{margin:"8px auto 0",justifyContent:"center",fontWeight:g().Ue.medium,color:e.lightTextColor},checkboxCaption:{color:e.mediumTextColor,textAlign:"center",fontSize:12},dividerContainer:{marginTop:18},divider:{borderBottomColor:e.regularDividerColor}})),[]),y=(0,o().O7)(),v=(0,i.useCallback)((()=>{l({email:void 0,didError:!1}),c(!1),m(!1),t()}),[t]),b=(0,i.useCallback)((e=>{l({didError:!1,email:e.target.value})}),[]),S=(0,i.useCallback)((()=>c((e=>!e))),[]),M=(0,i.useCallback)((async()=>{const e=(0,Hl().H3)(a.email);if(!(0,Hl().oH)(e))return void l({...a,didError:!0});if(!n)return;m(!0);const t=await Z().callApi({eventName:"deleteSpaceForDomain",environment:y,data:{requestingSpaceId:s,targetSpaceId:n.id,contactEmail:e}});if("failed"===t.type)m(!1),x().UW((0,B().wf)(D().Z.getIntl(),t));else{const o=t.data.spaceDeletion;f(n.id,o),_s().QF(y,{contactEmail:e,currentOwners:n.admins.map((e=>e.id)),targetSpaceId:n.id,verifiedDomain:n.creatorEmailDomain,targetSubscriptionTier:n.subscriptionTier}),v(),i=n.name,Fs().oV({label:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.toast",defaultMessage:"Successfully deleted “{spaceName}“",values:{spaceName:i}})})}var i}),[v,a,s,y,f,n]),j=Boolean(n);return(0,te.jsx)(ri().Z,{open:j,innerStyle:h.modalInnerStyle,preventHideChildrenWhileOpening:!0,onDismiss:v,render:()=>(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)("div",{style:h.closeIconContainer,children:(0,te.jsx)(Bt().Z,{isSmall:!0,onClick:v,ignoreLocalHoverState:!0,children:(0,Vl().D)(h.closeIcon)})}),(0,te.jsx)("div",{children:(0,Vn().y)(h.modalIcon)}),(0,te.jsxs)(me().Z,{style:h.title,children:[(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.title",defaultMessage:"Delete workspace"}),(0,te.jsx)(Nl().Z,{href:(0,Ee().UY)("guides.domainManagement"),children:(0,te.jsx)($t().Z,{icon:Us().m})})]}),(0,te.jsx)(me().Z,{isSmall:!0,isMultiline:!0,style:h.description,children:n?(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.byline",defaultMessage:"You’re about to permanently delete {currentWorkspaceName} and all of its contents. The workspace owner will be notified.",values:{currentWorkspaceName:n.name}}):void 0}),(0,te.jsxs)("div",{style:h.workspaceContainer,children:[n?(0,te.jsx)(Pl().k,{id:n.id,name:n.name,icon:n.icon,subscriptionTier:n.subscriptionTier,memberCount:n.memberCount}):void 0,(0,te.jsx)("div",{style:h.checkContainer,children:(0,El().k)(h.check)})]}),(0,te.jsx)(ii().Z,{size:0,style:h.dividerContainer,innerStyle:h.divider}),(0,te.jsx)(Xl,{value:a.email,placeholder:D().Z.formatMessage(Yl.emailPlaceholder),onChange:b,labelMessage:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.contactEmail.title",defaultMessage:"Contact email"}),helpMessage:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.deleteWorkspaces.deletionModal.tooltipExplanation",defaultMessage:"The Workspace Owner of the deleted workspace can contact this email for inquiries"}),errorMessage:a.didError?(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.contactEmail.error",defaultMessage:"Invalid email address"}):void 0}),(0,te.jsx)(Bt().Z,{disabled:!d||!a.email||u,disabledFeedback:!0,isLarge:!0,style:h.primaryButton,hoveredStyle:h.primaryButtonHovered,onClick:M,children:u?(0,te.jsx)(oi().Z,{}):(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.deleteButton",defaultMessage:"Delete workspace"})}),(0,te.jsxs)("div",{style:h.checkboxContainer,children:[(0,te.jsx)(Gl().Z,{style:h.checkbox,size:14,checked:d,onClick:S}),(0,te.jsx)(me().Z,{isSmall:!0,style:h.checkboxCaption,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.checkboxLabel",defaultMessage:"I'm sure I want to delete this workspace"})})]}),(0,te.jsx)(Bt().Z,{style:h.secondaryButton,onClick:v,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.deleteWorkspaces.deletionModal.cancel",defaultMessage:"Cancel"})})]})})}function Xl(e){const t=(0,r().yK)((e=>({emailInputTitle:{fontWeight:g().Ue.medium,fontSize:14,marginBottom:8,letterSpacing:-.15,display:"inline-flex",alignItems:"center"},emailContainer:{position:"relative",width:"100%",minHeight:56,marginTop:13},inputCaptionError:{color:e.errorText,marginTop:8,fontSize:13},helpIcon:{fill:e.lightIconColor,marginLeft:4,height:16,width:16}})),[]);return(0,te.jsxs)("div",{style:t.emailContainer,children:[(0,te.jsxs)(me().Z,{style:t.emailInputTitle,children:[e.labelMessage,e.helpMessage&&(0,te.jsx)(pe().Z,{renderTooltip:()=>e.helpMessage,render:e=>(0,te.jsx)("span",{...e,children:(0,Us().m)(t.helpIcon)})})]}),(0,te.jsx)(Dn().Z,{value:e.value,placeholder:e.placeholder,onChange:e.onChange}),e.errorMessage&&(0,te.jsx)(me().Z,{isSmall:!0,style:t.inputCaptionError,children:e.errorMessage})]})}function Ql(e){let{onDismiss:t,onAccept:n,spaceQueued:i,descriptionMessage:o,divider:s,modalIcon:a,title:l,acceptMessage:d,isLoading:c}=e;const u=(0,r().yK)((e=>({modalInnerStyle:{width:406,padding:"24px 20px 16px 20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},closeIconContainer:{position:"absolute",top:10,right:10,backgroundColor:e.accentColors.gray[75],borderRadius:"50%",height:22,width:22,display:"flex",justifyContent:"center",alignItems:"center"},closeIcon:{width:14,height:14,fill:e.mediumTextColor},modalIcon:{height:24,width:24,fill:e.mediumIconColor},title:{fontWeight:g().Ue.medium,fontSize:16,display:"inline-flex",alignItems:"center",justifyContent:"center",marginTop:9},description:{fontWeight:g().Ue.regular,textAlign:"center",fontSize:13,lineHeight:"16px",letterSpacing:"-0.08px",marginTop:9},workspaceContainer:{position:"relative",borderRadius:6,border:`1px solid ${e.regularDividerColor}`,padding:"0 12px",boxSizing:"border-box",marginTop:30,width:"100%",height:60,justifyContent:"center",display:"flex",alignItems:"center"},checkContainer:{position:"absolute",right:12,display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20},check:{fill:e.mediumIconColor,height:16,width:16},primaryButton:{width:"100%",marginTop:32,justifyContent:"center",fontWeight:g().Ue.medium},secondaryButton:{margin:"8px auto 0",width:"100%",justifyContent:"center",fontWeight:g().Ue.medium,color:e.lightTextColor},dividerContainer:{marginTop:18},divider:{borderBottomColor:e.regularDividerColor}})),[]),m=Boolean(i);return(0,te.jsx)(ri().Z,{open:m,innerStyle:u.modalInnerStyle,preventHideChildrenWhileOpening:!0,onDismiss:t,render:()=>(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)("div",{style:u.closeIconContainer,children:(0,te.jsx)(Bt().Z,{isSmall:!0,onClick:t,ignoreLocalHoverState:!0,children:(0,Vl().D)(u.closeIcon)})}),a&&(0,te.jsx)("div",{children:a(u.modalIcon)}),(0,te.jsxs)(me().Z,{style:u.title,children:[l,(0,te.jsx)(Nl().Z,{href:(0,Ee().UY)("guides.domainManagement"),children:(0,te.jsx)($t().Z,{icon:Us().m})})]}),(0,te.jsx)(me().Z,{isSmall:!0,isMultiline:!0,style:u.description,children:o}),(0,te.jsxs)("div",{style:u.workspaceContainer,children:[i?(0,te.jsx)(Pl().k,{id:i.id,name:i.name,icon:i.icon,subscriptionTier:i.subscriptionTier,memberCount:i.memberCount}):void 0,(0,te.jsx)("div",{style:u.checkContainer,children:(0,El().k)(u.check)})]}),s&&(0,te.jsx)(ii().Z,{size:0,style:u.dividerContainer,innerStyle:u.divider}),(0,te.jsx)(kn().Z,{isLarge:!0,style:u.primaryButton,onClick:n,disabled:c,children:c?(0,te.jsx)(oi().Z,{}):d}),(0,te.jsx)(Bt().Z,{style:u.secondaryButton,onClick:t,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.claimWorkspaces.claimableSpaceConfirmationModal.cancel",defaultMessage:"Cancel"})})]})})}function Jl(e){let{onDismiss:t,spaceQueuedForRecovery:n,currentSpaceId:s}=e;const{setSpaceRequest:a}=(0,i.useContext)(Hs),r=(0,o().O7)(),[l,d]=(0,i.useState)(!1),c=(0,i.useCallback)((()=>{d(!1),t()}),[t]),u=(0,i.useCallback)((async()=>{if(!s||!n)return;d(!0);const e=await Z().callApi({eventName:"cancelSpaceDeletionForDomain",environment:r,data:{requestingSpaceId:s,targetSpaceId:n.id}});if("failed"===e.type)return d(!1),void x().UW((0,B().wf)(D().Z.getIntl(),e));var t;a(n.id,void 0),_s().Jv(r,{targetSpaceId:n.id,verifiedDomain:n.creatorEmailDomain}),c(),t=n.name,Fs().oV({label:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.claimWorkspaces.table.recoverSpace.toast",defaultMessage:"Successfully recovered “{spaceName}“",values:{spaceName:t}})})}),[a,s,r,n,c]);return(0,te.jsx)(Ql,{onDismiss:c,onAccept:u,spaceQueued:n,modalIcon:Gs().u,title:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.recoverWorkspaces.confirmationModal.title",defaultMessage:"Recover workspace"}),descriptionMessage:n?(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.recoverWorkspaces.confirmationModal.byline",defaultMessage:"Restore workspace content and the workspace owner's access.",values:{currentWorkspaceName:n.name}}):void 0,acceptMessage:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.recoverWorkspaces.confirmationModal.deleteButton",defaultMessage:"Recover"}),isLoading:l,divider:!1})}let ed=!1;function td(e){let{spaceStore:t,subscriptionDataStore:n}=e;const{claimableSpaces:s,domainVerifications:l,loadingSpaces:d,errorClaimableSpaces:m,errorVerifications:f,navigateTo:h,removeClaimableSpace:y,loadMoreClaimableSpaces:v,tab:b,setSelectedTab:S,verifiedDomains:M}=(0,i.useContext)(Hs),j=(0,o().O7)(),C=(0,Tt().p)({spaceId:null==t?void 0:t.id}),w=(0,a().VK)((()=>!Sl().Z.state.open&&Boolean(Sl().Z.state.succeeded)),[]),[k,_]=(0,i.useState)(),[T,I]=(0,i.useState)(),[P,A]=(0,i.useState)(),[R,Z]=(0,i.useState)(),B=(0,vl().q)(C,n);function D(){_(void 0),I(void 0),A(void 0),Z(void 0)}(0,i.useEffect)((()=>{w&&k&&(y(k.id),_(void 0),Sl().Z.reset())}),[w,k,y,_]);const L=(0,c().ri)(C),O=(0,r().yK)((e=>({link:{fontSize:14,fontWeight:400,color:e.mediumTextColor,textDecoration:"none"},title:{marginTop:21,fontWeight:g().Ue.semibold,fontSize:17},byline:{fontSize:14,fontWeight:g().Ue.regular,color:e.mediumTextColor,marginRight:"auto",paddingRight:20},count:{marginLeft:4,opacity:.5,fontWeight:400},tabBarMenu:{margin:"12px 0 0",boxShadow:"none"}})),[]);if((0,i.useEffect)((()=>{m?x().RL(m.message):f&&x().RL(f.message)}),[m,f]),m)return null;if(f)return null;const H=s.filter((e=>(0,gl().Ns)(e.spaceRequest,e.memberCount))),V=s.filter((e=>!(0,gl().Ns)(e.spaceRequest,e.memberCount))),U=[{id:"external-transfer",getIcon:e=>(0,xl().Z)({...e,height:14,width:14}),name:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.claimWorkspaces.actions.externalTransfer",defaultMessage:"Require account change"}),caption:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.claimWorkspaces.actions.externalTransferCaption",defaultMessage:"Owner will be prompted to change workspace ownership to a personal account."}),onAction:e=>I(e)},{id:"space-deletion",getIcon:e=>(0,Vn().y)({...e,height:14,width:14}),name:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.claimWorkspaces.actions.deleteSpace",defaultMessage:"Delete workspace"}),caption:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.claimWorkspaces.actions.deleteSpaceCaption",defaultMessage:"Owner will lose access to the workspace immediately."}),onAction:e=>A(e),getDisabledState:e=>{const{isEligible:t}=nd(l,e.creatorEmailDomain);return!t||e.isDelinquent||e.isPendingBilling||!(0,u().QM)(e.subscriptionTier)},getTooltip:e=>{const t=nd(l,e.creatorEmailDomain);return t.isEligible?!(0,u().QM)(e.subscriptionTier)||e.isDelinquent||e.isPendingBilling?(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.claimWorkspaces.actions.deleteSpace.ineligibleTooltip",defaultMessage:"The workspace is ineligible for deletion."}):void 0:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.claimWorkspaces.actions.deleteSpace.disabledTooltip",defaultMessage:"You're in the 14-day notification period after verifying a domain.{br} This feature will be enabled in {numDays, plural, one {{numDays} day} other {{numDays} days}}.",values:{numDays:t.daysUntilEligible,br:(0,te.jsx)("br",{})}})}},{id:"recover-space",getIcon:()=>{},name:(0,te.jsx)(p()._H,{id:"identityAndProvisioning.claimWorkspaces.actions.recoverSpace",defaultMessage:"Recover"}),caption:void 0,onAction:e=>Z(e)}],E=[{id:"claim-and-upgrade",getIcon:e=>(0,bl().l)({...e,height:14,width:14}),name:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.claimWorkspaces.actions.claimAndUpgrade",defaultMessage:"Claim and upgrade"}),caption:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.claimWorkspaces.actions.claimAndUpgradeCaption",defaultMessage:"Take ownership of the workspace and upgrade it to an Enterprise plan"}),onAction:e=>_(e),getDisabledState:e=>{const{isEligible:t}=nd(l,e.creatorEmailDomain);return L||!t||e.isDelinquent||e.isPendingBilling},getTooltip:e=>{const t=nd(l,e.creatorEmailDomain);return e.isDelinquent||e.isPendingBilling?(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.claimWorkspaces.actions.claimSpace.ineligibleTooltip",defaultMessage:"The workspace is ineligible for claiming."}):t.isEligible?void 0:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.claimWorkspaces.actions.disabledTooltip",defaultMessage:"You're in the 14-day notification period after verifying a domain.{br} This feature will be enabled in {numDays, plural, one {{numDays} day} other {{numDays} days}}.",values:{numDays:t.daysUntilEligible,br:(0,te.jsx)("br",{})}})}}];return(0,te.jsxs)(Rt().ZP,{children:[(0,te.jsx)(ui().Z,{style:O.link,onClick:()=>h(Ls.SettingsPage),children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.claimWorkspaces.breadcrumb",defaultMessage:"← Identity & Provisioning"})}),(0,te.jsx)(ae().Z,{large:!0,style:O.title,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.claimWorkspaces.title",defaultMessage:"Manage workspaces"})}),(0,te.jsxs)(Ml().X2,{children:[(0,te.jsx)(me().Z,{isSmall:!0,isMultiline:!0,style:O.byline,children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.claimWorkspaces.byline",defaultMessage:"Claim verified-domain workspaces to your Enterprise plan or require Owners to use an external domain."})}),(0,te.jsx)(xt().Z,{isLarge:!0,onClick:()=>{yl().g({environment:j,data:{spaceId:t.id,emailDomains:M}})},children:(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.exportClaimableWorkspaces.button",defaultMessage:"Export to CSV"})})]}),(0,te.jsx)(mi().Z,{tabs:[(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.claimWorkspaces.singleSpaces",defaultMessage:"Single-member"},"single"),(0,te.jsx)(p()._H,{id:"identityProvisioningSettings.claimWorkspaces.multiSpaces",defaultMessage:"Multi-member"},"multi")],selectedIndex:b,onChange:e=>S(e),style:O.tabBarMenu}),(0,te.jsx)(Kl,{onDismiss:D,spaceQueuedForTransfer:T,currentSpaceId:t.id}),b===Os.Single?(0,te.jsx)(Ol,{claimableSpaces:H,spaceActions:U,loadMoreClaimableSpaces:v,loading:d},"single"):(0,te.jsx)(Ol,{claimableSpaces:V,spaceActions:E,loadMoreClaimableSpaces:v,loading:d},"multi"),B?(0,te.jsx)(zl,{onDismiss:D,spaceQueuedForClaiming:k,requestingSpaceId:t.id}):(0,te.jsx)(Wl,{onDismiss:D,spaceQueuedForClaiming:k}),(0,te.jsx)($l,{onDismiss:D,spaceQueuedForDeletion:P,currentSpaceId:t.id}),(0,te.jsx)(Jl,{onDismiss:D,spaceQueuedForRecovery:R,currentSpaceId:t.id})]})}function nd(e,t){if(ed)return{isEligible:!0};const n=e.find((e=>{let{domain:n}=e;return t===n}));if(!n||!n.verified_at)return{isEligible:!0};const i=(Date.now()-n.verified_at)/hl().A0;return i>=14?{isEligible:!0}:{isEligible:!1,daysUntilEligible:Math.ceil(14-i)}}function id(e){let{userStore:t,spaceStore:n,samlConfigStore:o,domainSettingsStore:s,organizationInfo:a,isOrganizationOwner:r}=e;const{page:l}=(0,i.useContext)(Hs);switch(l){case Ls.SettingsPage:return(0,te.jsx)(ml,{userStore:t,spaceStore:n,samlConfigStore:o,domainSettingsStore:s,organizationInfo:a,isOrganizationOwner:r});case Ls.WorkspacesPage:return(0,te.jsx)(td,{spaceStore:n,subscriptionDataStore:_t().subscriptionDataStoreInstance});case Ls.ManagedUsersPage:return(0,te.jsx)(Va,{spaceStore:n,samlConfigStore:o})}}["local","development","staging"].includes("production")&&(0,fl().exposeDebugValue)("bypassDomainVerificationWaitingPeriod",(function(){ed=!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}));const od=function(e){let{userStore:t,spaceStore:n,samlConfigStore:i,domainSettingsStore:o,organizationInfo:s,isOrganizationOwner:a}=e;return(0,te.jsx)(Vs,{spaceStore:n,samlConfigStore:i,domainSettingsStore:o,children:(0,te.jsx)(id,{userStore:t,spaceStore:n,samlConfigStore:i,domainSettingsStore:o,organizationInfo:s,isOrganizationOwner:a})})};var sd=()=>n(3315),ad=()=>n(702075),rd=()=>n(486595),ld=()=>n(799891),dd=()=>n(792409),cd=()=>n(615634),ud=()=>n(128119);const pd=function(e){const[t,s]=i.useState([]),[l,d]=i.useState([]),c=(0,o().O7)(),u=(0,a().qz)(void 0,sa().Z),m=(0,r().yK)((e=>({span:{color:e.mediumTextColor},plainButton:{paddingLeft:8,paddingRight:8,marginLeft:-8},icon:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]);function g(e){return l.some((t=>t.code===e.code))}(0,i.useEffect)((()=>{const e=c.SpellCheckStore;e&&(e.getAvailableLanguages().then(s).catch((e=>{ld().log({level:"error",from:"SpellcheckerLanguagesPicker",type:"getAvailableLanguages",error:(0,dd().Ui)(e)})})),e.getLanguages().then(d).catch((e=>{ld().log({level:"error",from:"SpellcheckerLanguagesPicker",type:"getLanguages",error:(0,dd().Ui)(e)})})))}),[c]),(0,i.useEffect)((()=>{const e=c.SpellCheckStore;if(!e)return;const t=l.map((e=>{let{code:t}=e;return t}));e.setLanguages(t)}),[l,c.SpellCheckStore]);const f=l.length>0?l.slice(0,3).map((e=>{let{name:t}=e;return t})).join(", ")+(l.length>3?"…":""):(0,te.jsx)(p()._H,{id:"languageRegionSettings.spellchecker.picker.label",defaultMessage:"Select languages"});return(0,te.jsx)(ra().ZP,{popupType:ra().Z4.Popup,buttonPopupStore:u,renderOrigin:e=>(0,te.jsxs)(Bt().Z,{style:m.plainButton,...e,children:[f,(0,cd().i)(m.icon)]}),placementToOrigin:ud().Iw.Bottom,alignmentToOrigin:ud().lU.Start,render:e=>{const i=[{key:"spellcheckerlanguages",render:e=>(0,te.jsx)(es().Z,{...e,topBorder:0!==e.index}),items:t.map((e=>{const t={key:e.code,render:t=>function(e){const t=e.language.name||e.language.code;return(0,te.jsx)(Yo().Z,{...e.props,title:(0,te.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,te.jsx)("div",{style:{marginRight:0},children:t})}),shouldWrapCaption:!0,right:g(e.language)?(0,n(286735).$)({width:12,height:12}):void 0})}({language:e,props:t}),action:()=>{g(e)?d(l.filter((t=>t.code!==e.code))):d([...l,e])}};return t}))}],o={menuType:Wo().o.Popup,width:240};return(0,te.jsx)($o().Z,{className:He().hKO,...o,children:(0,te.jsx)(Qo().Z,{type:Qo().i.Vertical,initialFocus:void 0,sections:i})})}})};const md=function(e){const t=(0,o().O7)();return t.device.isElectron&&t.device.isWindows?(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(ii().Z,{size:24,isHidden:!0}),(0,te.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto"},children:(0,te.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",width:"100%"},children:[(0,te.jsxs)("div",{style:{flex:1},children:[(0,te.jsx)(me().Z,{children:(0,te.jsx)(p()._H,{id:"languageRegionSettings.spellchecker.label",defaultMessage:"Spellchecker languages"})}),(0,te.jsx)(me().Z,{isSmall:!0,isMultiline:!0,style:{width:"80%"},children:(0,te.jsx)(p()._H,{id:"languageSettings.spellcheckerSwitcher.subtitle",defaultMessage:"Change the languages used by the spellchecker."})})]}),(0,te.jsx)(pd,{})]})})]}):null};const gd=function(){return(0,a().VK)((()=>Ot().default.state.online),[])?(0,te.jsx)(hd,{}):(0,te.jsx)(fd,{})};function fd(){return(0,te.jsx)(Rt().ZP,{children:(0,te.jsx)(me().Z,{isSmall:!0,style:{textAlign:"center"},children:(0,te.jsx)(p()._H,{defaultMessage:"Please go online to manage your language and region.",id:"languageSettings.offline.message"})})})}function hd(){const e=(0,a().VK)((()=>et().default.state.currentUserSettingsStore),[]),t=(0,a().VK)((()=>{var t;return(null==e||null===(t=e.getSettings())||void 0===t?void 0:t.preferred_locale)||Sa().al}),[e]);return e?(0,te.jsxs)(Rt().ZP,{children:[(0,te.jsx)(ae().Z,{large:!0,divider:"full",children:(0,te.jsx)(p()._H,{id:"languageSettings.languageSection.title",defaultMessage:"Language & region"})}),(0,te.jsx)(rd().Z,{locale:t,userSettingsStore:e}),(0,te.jsx)(md,{}),(0,te.jsx)(ii().Z,{size:24}),(0,te.jsx)(ad().Z,{})]}):null}var yd=()=>n(764605),vd=()=>n(515329),xd=()=>n(637932),bd=()=>n(257822),Sd=()=>n(928066);function Md(){const{isElectron:e,isElectronMac:t,isMobile:n,desktopAppId:i}=(0,o().Fy)(),s=(0,o().O7)(),r=(0,a().VK)((()=>Ot().default.state.online),[]),l=(0,a().VK)((()=>(0,vd().oI)()),[]),d=(0,a().VK)((()=>{const o=(0,vd().kC)();return function(e){const{isMobile:t,isElectron:n,isElectronMac:i,desktopAppId:o,slackFeatureGateChecks:{showSlackNotificationSetting:s,showNotionActivityNotificationsToSlackSetting:a}}=e,r=!t&&n,l=r&&i&&Boolean(o);return[{key:"notify_mobile",renderSettingsItem:()=>(0,te.jsx)(xd().A,{target:"notify_mobile"})},r?{key:"notify_desktop",renderSettingsItem:()=>(0,te.jsx)(xd().A,{target:"notify_desktop"})}:void 0,l?{key:"desktop_badge",renderSettingsItem:()=>(0,te.jsx)(xd().A,{target:"desktop_badge"})}:void 0,s&&!a?{key:"notify_slack",renderSettingsItem:()=>(0,te.jsx)(Sd().O,{target:"notify_slack"})}:void 0].filter(gn().$K)}({isMobile:n,isElectron:e,isElectronMac:t,desktopAppId:i,slackFeatureGateChecks:{showSlackNotificationSetting:o,showNotionActivityNotificationsToSlackSetting:l}})}),[n,e,t,i,l]),c=(0,a().VK)((()=>{var e;const t=(0,vd().kC)();return function(e){const{isSlackNotificationSettingEnabled:t,showSlackNotificationSetting:n,showNotionActivityNotificationsToSlackSetting:i}=e;if(!n||!i)return[];return[{key:"notify_slack",renderSettingsItem:()=>(0,te.jsx)(Sd().O,{target:"notify_slack"})},t?{key:"notify_slack_all_activity",renderSettingsItem:()=>(0,te.jsx)(Sd().O,{target:"notify_slack_all_activity"})}:void 0,t?{key:"notify_slack_mention",renderSettingsItem:()=>(0,te.jsx)(Sd().O,{target:"notify_slack_mention"})}:void 0].filter(gn().$K)}({isSlackNotificationSettingEnabled:Boolean(null===(e=et().default.state.currentSpaceViewStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.notify_slack),showSlackNotificationSetting:t,showNotionActivityNotificationsToSlackSetting:l})}),[l]),u=(0,a().VK)((()=>{var e;return function(e){const{showNotifyEmailAlwaysSetting:t}=e;return[{key:"notify_email",renderSettingsItem:()=>(0,te.jsx)(xd().A,{target:"notify_email"})},t?{key:"notify_email_always",renderSettingsItem:()=>(0,te.jsx)(xd().A,{target:"notify_email_always"})}:void 0,{key:"notify_email_digest",renderSettingsItem:()=>(0,te.jsx)(xd().A,{target:"notify_email_digest"})},{key:"notify_home_digest_email",renderSettingsItem:()=>(0,te.jsx)(xd().A,{target:"notify_home_digest_email"})},{key:"marketing_emails",renderSettingsItem:()=>(0,te.jsx)(xd().A,{target:"marketing_emails"})}].filter(gn().$K)}({showNotifyEmailAlwaysSetting:(null===(e=et().default.state.currentSpaceViewStore)||void 0===e?void 0:e.getNotifyEmail())||!1})}),[]),m=(0,a().VK)((()=>s.WindowSizeStore.state.paddingBottomCSS),[s.WindowSizeStore]);return r?(0,te.jsxs)(Rt().ZP,{disableScroller:n,children:[(0,te.jsx)(ae().Z,{large:!n,divider:"full",children:(0,te.jsx)(p()._H,{id:"notificationSettings.notificationsSection.title",defaultMessage:"My notifications"})}),(0,te.jsx)(bd().O,{items:d}),(0,te.jsx)(ii().Z,{size:48,isHidden:!0}),l?(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(ae().Z,{large:!n,divider:"full",children:(0,te.jsx)(p()._H,{id:"notificationSettings.slackNotificationsSection.title",defaultMessage:"Slack notifications"})}),(0,te.jsx)(bd().O,{items:c}),(0,te.jsx)(ii().Z,{size:48,isHidden:!0})]}):void 0,(0,te.jsx)(ae().Z,{large:!n,divider:"full",children:(0,te.jsx)(p()._H,{id:"notificationSettings.emailNotificationsSection.title",defaultMessage:"Email notifications"})}),(0,te.jsx)(bd().O,{items:u}),(0,te.jsx)(ii().Z,{size:48,isHidden:!0}),(0,te.jsx)("div",{style:{marginTop:4,marginBottom:n?m:void 0},children:(0,te.jsx)(_n().Z,{title:(0,te.jsx)(p()._H,{id:"myNotificationSettings.helpButton.caption",defaultMessage:"Learn about notifications"}),href:(0,Ee().UY)("guides.notificationSettings"),analyticsFrom:"notifications_settings"})})]}):(0,te.jsx)(Rt().ZP,{children:(0,te.jsx)(me().Z,{isSmall:!0,style:{textAlign:"center"},children:(0,te.jsx)(p()._H,{defaultMessage:"Please go online to manage your notification settings.",id:"myNotificationsSettings.goOnline.prompt"})})})}var jd=()=>n(917949);const Cd={whiteSpace:"normal",paddingTop:5,paddingBottom:5,height:"auto"};function wd(e){const t=(0,o().O7)(),{onView:n}=e,s=(0,p().YB)();(0,i.useEffect)((()=>{n(t)}),[t,n]);const a=s.formatMessage({id:"settingsPrompt.learnMore.button",defaultMessage:"Learn more"});return(0,te.jsxs)("div",{children:[(0,te.jsx)(ii().Z,{size:0}),(0,te.jsx)(jd().N,{icon:e.icon,title:e.title,description:e.descriptionMessage,onDismiss:e.onDismiss,primaryAction:{text:e.buttonText,onClick:t=>(e.onDismiss(),e.onClick(t)),ariaLabel:e.buttonAriaLabel},secondaryAction:{icon:e=>(0,Us().m)(e),text:a,ariaLabel:a,onClick:e.onClickLearnMore},customPrimaryButtonStyles:Cd})]})}const kd=function(e){const t=(0,r().yK)((t=>({style:{display:"flex",height:"100%",flexDirection:e.isReversed?"row-reverse":"row"},sidebarStyle:{height:"100%",background:t.cardSidebarBackground,flexGrow:0,flexShrink:0,width:240,overflowY:"auto"},childrenStyle:{flexGrow:1,position:"relative",zIndex:1,height:"100%",overflow:"hidden"}})),[e.isReversed]);return(0,te.jsxs)("div",{style:t.style,onMouseDown:e.onMouseDown,onClick:e.onClick,onDoubleClick:e.onDoubleClick,onContextMenu:e.onContextMenu,children:[(0,te.jsx)("div",{style:t.sidebarStyle,children:e.sidebar}),(0,te.jsx)("div",{style:t.childrenStyle,children:e.children})]})};var _d=()=>n(266093),Td=()=>n(840984),Id=()=>n(565630),Pd=()=>n(768050),Ad=()=>n(928826),Rd=()=>n(220167),Zd=()=>n(407544),Bd=()=>n(85876),Dd=()=>n(693623),Ld=()=>n(356641),Od=()=>n(774933),Hd=()=>n(499214),Vd=()=>n(304109);const Ud=640;function Ed(e){let{data:t,loading:n,error:s,daysFilter:a,setDaysFilter:l}=e;const[d,c]=(0,Zd().e)(),u=(0,r().yK)((e=>({title:{fontWeight:g().Ue.medium,fontSize:16,marginBlock:"8px 4px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:1},titleText:{flexShrink:1},infoIcon:{marginLeft:4,flexShrink:0},container:{display:"flex",flexDirection:"column",gap:16},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16},cardContainer:{justifyContent:"flex-start",gap:18},cardTextContainer:{alignItems:"flex-start"}})),[]),{pageViews:m,uniquePageViews:f,pagesCreated:h,pageEdits:y}=t,v=(0,o().O7)(),x=(0,i.useCallback)((e=>{_d().ky(v,{daysFilter:e}),l(e)}),[v,l]);return(0,te.jsxs)("div",{style:u.container,ref:d,children:[(0,te.jsxs)("div",{style:u.titleContainer,children:[(0,te.jsxs)(me().Z,{style:u.title,children:[(0,te.jsx)("div",{style:u.titleText,children:(0,te.jsx)(p()._H,{id:"workspaceAnalytics.content.contentEngagement.title",defaultMessage:"Content engagement"})}),(0,te.jsx)(pe().Z,{placement:he().Placement.Bottom,render:e=>(0,te.jsx)(_n().Z,{...e,href:(0,Ee().UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:u.infoIcon}),renderTooltip:()=>"all_time"!==a?(0,te.jsx)(p()._H,{id:"settings.workspaceAnalytics.contentTab.contentEngagement.tooltip.lastDays",defaultMessage:"Activity on all workspace pages (includes private and shared) over the {dateRange}",values:{dateRange:D().Z.formatMessage(Pd().xX[a])}}):(0,te.jsx)(p()._H,{id:"settings.workspaceAnalytics.contentTab.contentEngagement.tooltip.allTime",defaultMessage:"All time activity on all pages in the workspace (includes private and shared)"})})]}),(0,te.jsx)(Vd().f,{currentFilter:a,onChangeFilter:x})]}),(0,te.jsxs)(Ld().rj,{gap:16,children:[(0,te.jsx)(Ld().r8,{row:1,col:1,children:(0,te.jsx)(Hd().q,{style:u.cardContainer,textStyles:u.cardTextContainer,loading:n,error:s,icon:Bd().N,iconStyles:{height:48,width:48},title:(0,te.jsx)(p()._H,{id:"workspaceAnalytics.content.contentEngagement.totalViews",defaultMessage:"{pageViews} total views",values:{pageViews:(0,te.jsx)(Od().e,{abbreviateNumber:c<Ud,num:m})}}),byline:(0,te.jsx)(me().Z,{isSecondaryColor:!0,children:(0,te.jsx)(p()._H,{id:"workspaceAnalytics.content.contentEngagement.uniqueViews",defaultMessage:"{uniquePageViews} unique page views",values:{uniquePageViews:(0,te.jsx)(Od().e,{abbreviateNumber:c<Ud,num:f})}})})})}),(0,te.jsx)(Ld().r8,{row:1,col:2,children:(0,te.jsx)(Hd().q,{style:u.cardContainer,textStyles:u.cardTextContainer,loading:n,error:s,icon:Dd().j,iconStyles:{height:36,width:36},title:(0,te.jsx)(p()._H,{id:"workspaceAnalytics.content.contentEngagement.pagesCreated",defaultMessage:"{pagesCreated} pages created",values:{pagesCreated:(0,te.jsx)(Od().e,{abbreviateNumber:c<Ud,num:h})}}),byline:(0,te.jsx)(me().Z,{isSecondaryColor:!0,children:(0,te.jsx)(p()._H,{id:"workspaceAnalytics.content.contentEngagement.pageEdits.byline",defaultMessage:"{pageEdits} edits",values:{pageEdits:(0,te.jsx)(Od().e,{abbreviateNumber:c<Ud,num:y})}})})})})]})]})}var Nd=()=>n(239482),Fd=()=>n(549874),Kd=()=>n(726008),zd=()=>n(330565),Wd=()=>n(506347),qd=()=>n(429725);function Gd(e){let{blockStore:t}=e;const i=(0,o().O7)(),s=(0,a().qz)(void 0,sa().Z),l=(0,r().yK)((e=>({changePermissionsIcon:{height:18,width:18,color:e.regularIconColor,fill:"currentColor"},copyLinkIcon:{height:15,width:15,color:e.regularIconColor,fill:"currentColor"},openLinkIcon:{height:15,width:15,color:e.regularIconColor,fill:"currentColor",transform:"rotate(-45deg)"}})),[]);const d={key:"actions",render:e=>(0,te.jsx)(es().Z,{...e}),items:[{key:"copy-link",render:e=>(0,te.jsx)(Yo().Z,{...e,icon:(0,n(599631).N)(l.copyLinkIcon),title:(0,te.jsx)(p()._H,{id:"adminContentSearchTab.pagesTable.page.actions.copyLink",defaultMessage:"Copy link to page"})}),action:async function(){const e=(0,qd().ZP)({store:t,pageVisitSource:Wd().tY.CopyLink}),n=await de().F.clipboardActions.load();await n.copyString({environment:i,stringValue:e,copiedMessage:n.clipboardMessages.copiedLinkToClipboard}),s.setState({open:!1})}},{key:"open-page-in-new-tab",render:e=>(0,te.jsx)(Yo().Z,{...e,icon:(0,n(522919).n)(l.openLinkIcon),title:(0,te.jsx)(p()._H,{id:"adminContentSearchTab.pagesTable.page.actions.openLink",defaultMessage:"Open in new tab"})}),action:function(){const e=(0,qd().ZP)({store:t,pageVisitSource:Wd().tY.LinkInPage});S().D({environment:i,url:e}),s.setState({open:!1})}}]};return(0,te.jsx)(ra().ZP,{popupType:rs().kQ.Popup,alignmentToOrigin:he().Alignment.Center,placementToOrigin:he().Placement.Right,style:{width:248},render:()=>(0,te.jsx)($o().Z,{menuType:Wo().o.Popup,width:248,children:(0,te.jsx)(Qo().Z,{type:Qo().i.Vertical,initialFocus:void 0,sections:[d]})}),buttonPopupStore:s,renderOrigin:e=>(0,te.jsx)($t().Z,{icon:oa().o,ariaLabel:"open menu for page actions",...e})})}const Yd=(0,p().vU)({views:{id:"workspaceAnalytics.contentTab.contentTable.viewsColumn.tooltip",defaultMessage:"Number of times users have viewed the page"},uniqueViews:{id:"workspaceAnalytics.contentTab.contentTable.uniqueViewsColumn.tooltip",defaultMessage:"Total number of users that have viewed page in the selected period"}}),$d={id:"page",headerTitle:(0,te.jsx)(sc,{message:Pd().y3.page}),renderCell:e=>(0,te.jsx)(n(166124).o,{blockStore:e.navigableBlockStore,rightIcon:(0,te.jsx)(Gd,{blockStore:e.navigableBlockStore})}),widthData:{width:320,maxWidth:320},sortable:!1},Xd={id:"location",headerTitle:(0,te.jsx)(p()._H,{id:"settings.workspaceAnalytics.contentTab.allPages.table.location.name",defaultMessage:"Location"}),renderCell:e=>(0,te.jsx)(n(465498).N,{blockStore:e.navigableBlockStore,teamStore:e.teamStore}),widthData:{width:140},sortable:!1},Qd={id:"audience",headerTitle:(0,te.jsx)(sc,{message:Pd().y3.audience}),renderCell:e=>(0,te.jsx)(me().Z,{children:(0,n(840816).e)(e.audience)}),widthData:{width:140},sortable:!1},Jd={id:"views",headerTitle:(0,te.jsx)(zd().r,{tooltipMessageDescriptor:Yd.views,columnHeader:Pd().y3.allViews}),renderCell:e=>(0,te.jsx)(me().Z,{children:e.views.toLocaleString()}),widthData:{width:100},sortable:!0},ec={id:"uniqueViews",headerTitle:(0,te.jsx)(zd().r,{tooltipMessageDescriptor:Yd.uniqueViews,columnHeader:Pd().y3.uniqueViews}),renderCell:e=>(0,te.jsx)(me().Z,{children:e.uniqueViews.toLocaleString()}),widthData:{width:100},sortable:!0},tc={id:"createdBy",headerTitle:(0,te.jsx)(sc,{message:Pd().y3.createdBy}),renderCell:e=>e.createdById?(0,te.jsx)(Kd().t,{blockStore:e.navigableBlockStore,userIds:[e.createdById]}):null,widthData:{width:140},sortable:!1},nc={id:"createdTime",headerTitle:(0,te.jsx)(sc,{message:Pd().y3.createdAt}),renderCell:e=>(0,te.jsx)(Wi().T,{dateTs:e.createdTime}),widthData:{width:100},sortable:!1},ic=[$d,Jd,ec,Xd,Qd,{id:"lastEditedBy",headerTitle:(0,te.jsx)(sc,{message:Pd().y3.lastEditedBy}),renderCell:e=>e.lastEditedById?(0,te.jsx)(Kd().t,{blockStore:e.navigableBlockStore,userIds:[e.lastEditedById]}):null,widthData:{width:140},sortable:!1},{id:"lastEditedTime",headerTitle:(0,te.jsx)(sc,{message:Pd().y3.lastEditedAt}),renderCell:e=>(0,te.jsx)(Wi().T,{dateTs:e.lastEditedTime}),widthData:{width:100},sortable:!1},tc,nc];function oc(e){let{navigableBlockStores:t,analyticsByPageId:n,runNewSearch:o,sort:s,setSort:l,loadNextPage:d,loading:c,error:u}=e;const m=(0,a().VK)((()=>t.map((e=>{var t,i,o;return{id:e.id,isClickable:!1,navigableBlockStore:e,teamStore:(0,Nd().VP)(e),views:(null===(t=n.get(e.id))||void 0===t?void 0:t.pageViews)||0,uniqueViews:(null===(i=n.get(e.id))||void 0===i?void 0:i.uniquePageViews)||0,createdTime:e.getCreatedTime(),lastEditedTime:e.getLastEditedTime(),createdById:e.getCreatedById(),lastEditedById:e.getLastEditedById(),audience:(null===(o=n.get(e.id))||void 0===o?void 0:o.audience)||"private"}}))),[t,n]),g=(0,i.useMemo)((()=>function(e){const t=ic.find((t=>"pageViews"===e.field&&"views"===t.id||"uniquePageViews"===e.field&&"uniqueViews"===t.id)),n=t?{column:t,sortAscending:"asc"===e.direction}:void 0;return n}(s)),[s]),f=(0,r().yK)((e=>(0,ce().bE)({columnRenderInfo:ic,theme:e,containerMarginTop:0})),[]),h=(0,r().yK)((e=>({emptyQuery:{marginTop:15,marginBottom:40,textAlign:"center"},loadingSpinner:{margin:"24px auto 24px"}})),[]);return u?(0,te.jsx)(Fd().q,{error:u,runNewSearch:o}):(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(ce().Dp,{hideHeaderRowPadding:!0,allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:500,columnRenderInfo:ic,rows:m,sortState:g,onSortStateChanged:e=>{l(function(e){const t="views"===e.column.id?"pageViews":"uniquePageViews",n=e.sortAscending?"asc":"desc";return{field:t,direction:n}}(e))},loadMoreMethod:{type:"scroll",onLoadMore:d},renderNoRowsComponent:()=>(0,te.jsx)(me().Z,{isSmall:!0,style:h.emptyQuery,children:!c&&0===t.length&&(0,te.jsx)(p()._H,{id:"settings.workspaceAnalytics.contentTab.allPages.table.empty",defaultMessage:"No pages found with your query."})}),styles:f}),c?(0,te.jsx)(oi().Z,{style:h.loadingSpinner}):null]})}function sc(e){let{message:t}=e;const n=(0,p().YB)();return(0,te.jsx)(te.Fragment,{children:n.formatMessage(t)})}var ac=()=>n(396136),rc=()=>n(140303);const lc={query:"",createdBy:[],lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},teamIds:[]},dc={field:"pageViews",direction:"desc"},cc=Td().D2,uc={filters:lc,sort:dc,timeRange:cc,navigableBlockIds:[],analyticsByPageId:new Map,numPagesLoaded:0,paginationToken:void 0,hasNextPage:!0,loading:!1,error:void 0,shouldReRunSearch:!1};var pc=()=>n(700696),mc=()=>n(787806),gc=()=>n(343177),fc=()=>n(843346);function hc(e){let{spaceStore:t,teamStores:n,timeRange:i,filters:o,runNewSearch:s,setFilters:l,setTimeRange:d}=e;const c=(0,a().VK)((()=>n??pc().default.state.teams),[n]),u=(0,r().yK)((e=>({container:{width:"100%",margin:"0 auto 14px"},filterPillsContainer:{width:"100%",display:"flex",flexWrap:"wrap",rowGap:4,flexDirectionRow:"row",alignItems:"center"},timeRangeContainer:{display:"flex",flexDirectionRow:"row",alignItems:"center",justifyContent:"center",gap:4,borderRight:`1px solid ${e.tableDividerColor}`,marginRight:12,paddingRight:6}})),[]);return(0,te.jsxs)("div",{style:u.container,children:[(0,te.jsx)(Es().ON,{mode:Es().p3.OnChange,query:o.query,setQueryFilter:function(e){l({query:e},{runSearchAfter:!0})},placeholderText:D().Z.formatMessage(Es()._7.titleOnlyPlaceholder)}),(0,te.jsxs)("div",{style:u.filterPillsContainer,children:[(0,te.jsxs)("div",{style:u.timeRangeContainer,children:[(0,te.jsx)(me().Z,{isSecondaryColor:!0,children:(0,te.jsx)(p()._H,{id:"settings.workspaceAnalytics.contentTab.timeRange",defaultMessage:"Views from"})}),(0,te.jsx)(Vd().f,{currentFilter:i,onChangeFilter:d})]}),(0,te.jsx)(fc().p,{selectedTeamIds:o.teamIds,setSelectedTeamIds:function(e){l({teamIds:e})},onMenuClose:s,teamStores:c}),(0,te.jsx)(mc().y,{spaceStore:t,createdByFilterIds:o.createdBy,setCreatedByFilter:function(e){l({createdBy:e})},runNewSearch:s,includeGuests:!1}),(0,te.jsx)(gc().f,{lastEditedTime:o.lastEditedTime,createdTime:o.createdTime,setLastEditedTime:function(e){l({lastEditedTime:e,createdTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})},setCreatedOnTime:function(e){l({createdTime:e,lastEditedTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})}})]})]})}function yc(e){var t;let{spaceStore:n,teamStores:s,contentEngagement:l}=e;const d=(0,Id().D9)(n.id),c=(0,i.useRef)(!1),{loadNextPage:u,navigableBlockStores:p,analyticsByPageId:g,runNewSearch:f,setFilters:h,setTimeRange:y,timeRange:v,filters:x,sort:b,setSort:S,loading:M,error:j}=function(e){let{spaceStore:t}=e;const n=(0,o().O7)(),[s,a]=(0,i.useState)(uc),r=(0,i.useRef)(lc),l=(0,i.useRef)(dc),d=(0,i.useRef)(cc),{organizationOwnerRecordCache:c,updateCacheWithRecordMap:u}=(0,i.useContext)(rc().V),p=(0,i.useCallback)((async e=>{let{fetchFromFirstPage:i,ignoreSearchInputComparison:o}=e;const c=!m().Xy(s.filters,r.current)||!m().Xy(s.sort,l.current)||!m().Xy(s.timeRange,d.current);if(!o&&!c)return;r.current=s.filters,l.current=s.sort,d.current=s.timeRange;let p=s.loading,g=s.error,f=s.hasNextPage,h=s.paginationToken;if(i&&(a((e=>({...uc,filters:e.filters,timeRange:e.timeRange,sort:e.sort}))),p=uc.loading,g=uc.error,f=uc.hasNextPage,h=uc.paginationToken),!f||p)return;if(g)return;a((e=>({...e,loading:!0})));const y=await Z().callApi({eventName:"loadContentAnalytics",environment:n,data:{spaceId:t.id,sort:s.sort,titleQuery:s.filters.query,filters:{inTeams:s.filters.teamIds,lastEditedTime:(0,ee().Hq)(s.filters.lastEditedTime),createdTime:(0,ee().Hq)(s.filters.createdTime),createdBy:s.filters.createdBy},timeRange:s.timeRange,startCursor:h}});if("failed"===y.type)return void a((e=>({...e,loading:!1,error:y.error})));u(y);const v=y.data.results;a((e=>{const t=[],n=new Set(e.navigableBlockIds),i=new Map(e.analyticsByPageId);for(const s of v){const e=s.id,o=s.analytics;n.has(e)||(t.push(e),i.set(e,o))}const o=[...e.navigableBlockIds,...t];return{...e,navigableBlockIds:o,analyticsByPageId:i,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:y.data.nextCursor,hasNextPage:Boolean(y.data.nextCursor)}}))}),[n,t,s.filters,s.sort,s.timeRange,s.loading,s.error,s.hasNextPage,s.paginationToken,u]),g=(0,i.useMemo)((()=>s.navigableBlockIds.map((e=>new(J().G)(n,{id:e,table:ac().iU},{inMemoryRecordCache:c})))),[s.navigableBlockIds,c,n]);(0,i.useEffect)((()=>{s.shouldReRunSearch&&(a((e=>({...e,shouldReRunSearch:!1}))),p({fetchFromFirstPage:!0,ignoreSearchInputComparison:!1}))}),[s.shouldReRunSearch,p]);const f=(0,i.useCallback)((async()=>{s.shouldReRunSearch||await p({fetchFromFirstPage:!1,ignoreSearchInputComparison:!0})}),[s.shouldReRunSearch,p]),h=(0,i.useCallback)((async e=>{await p({fetchFromFirstPage:!0,ignoreSearchInputComparison:e||!1})}),[p]),y=(0,i.useCallback)(((e,t)=>{a((n=>({...n,filters:{...n.filters,...e},...null!=t&&t.runSearchAfter?{shouldReRunSearch:null==t?void 0:t.runSearchAfter}:void 0})));for(const i of(0,gn().Yd)(e))m().Xy(e[i],lc[i])||_d().uS(n,{filter:i,value:"createdBy"===i||"teamIds"===i?e[i]:void 0})}),[n]),v=(0,i.useCallback)((e=>{a((t=>({...t,timeRange:e,shouldReRunSearch:!0}))),_d().e2(n,{daysFilter:e})}),[n]),x=(0,i.useCallback)((e=>{a((t=>({...t,sort:e,shouldReRunSearch:!0}))),_d().jM(n,{column:e.field,isAscending:"asc"===e.direction})}),[n]);return{filters:s.filters,sort:s.sort,timeRange:s.timeRange,analyticsByPageId:s.analyticsByPageId,loading:s.loading,error:s.error,navigableBlockStores:g,loadNextPage:f,runNewSearch:h,setFilters:y,setTimeRange:v,setSort:x}}({spaceStore:n}),C=(0,r().yK)((e=>({container:{display:"flex",flexDirection:"column",gap:16}})),[]),w=(0,a().VK)((()=>{const e=ye().default.checkGate({gateName:"allow_space_member_to_export_analytics"});return Boolean(n.canAdmin())||e&&n.canRead()}),[n]),k=(0,i.useMemo)((()=>void 0!==d&&n.id!==d),[n.id,d]);(0,i.useEffect)((()=>{c.current&&!k||(f(!0),c.current=!0)}),[f,k]);const _=(0,a().VK)((()=>n.getName()),[n]);if("NotFoundError"===(null==l||null===(t=l.error)||void 0===t?void 0:t.name))return(0,te.jsx)(Rd().y,{type:"empty",spaceName:_});const T={...x,daysFilter:v,lastEditedTime:(0,ee().Hq)(x.lastEditedTime),createdTime:(0,ee().Hq)(x.createdTime)};return(0,te.jsxs)("div",{style:C.container,children:[(0,te.jsx)(Ed,{data:l.data,loading:l.loading,error:l.error,daysFilter:l.daysFilter,setDaysFilter:l.setDaysFilter}),(0,te.jsx)(vc,{canExport:w,filters:T}),(0,te.jsx)(hc,{spaceStore:n,teamStores:s,runNewSearch:f,setFilters:h,filters:x,timeRange:v,setTimeRange:y}),(0,te.jsx)(oc,{navigableBlockStores:p,analyticsByPageId:g,runNewSearch:f,sort:b,setSort:S,loadNextPage:u,loading:M,error:j})]})}function vc(e){const t=(0,r().yK)((()=>({sectionTitle:{fontWeight:g().Ue.semibold,fontSize:16},sectionTitleSection:{display:"flex",flexFlow:"row",alignItems:"center"},helpInfo:{marginLeft:4},wrapper:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginTop:12},exportButton:{marginLeft:5}})),[]),{canExport:n,filters:i}=e,{daysFilter:o}=i,s=(0,te.jsxs)("div",{style:t.sectionTitleSection,children:[(0,te.jsx)(me().Z,{style:t.sectionTitle,children:(0,te.jsx)(p()._H,{id:"settings.workspaceAnalytics.contentTab.allPages.title",defaultMessage:"Pages"})}),(0,te.jsx)(pe().Z,{placement:he().Placement.Bottom,render:e=>(0,te.jsx)(_n().Z,{...e,href:(0,Ee().UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:t.helpInfo}),renderTooltip:()=>"all_time"!==o?(0,te.jsx)(p()._H,{id:"settings.workspaceAnalytics.contentTab.pages.tooltip.lastDays",defaultMessage:"Activity from the {dateRange} on pages you have access to",values:{dateRange:D().Z.formatMessage(Pd().xX[o])}}):(0,te.jsx)(p()._H,{id:"settings.workspaceAnalytics.contentTab.pages.tooltip.allTime",defaultMessage:"All time activity on pages you have access to in the workspace"})})]});return(0,te.jsxs)("div",{style:t.wrapper,children:[s,n&&(0,te.jsx)(Ad().f,{style:t.exportButton,analyticsType:at().x.Content,filters:i})]})}var xc=()=>n(263758),bc=()=>n(589515),Sc=()=>n(637887);const Mc=640;function jc(e){let{data:t,loading:n,error:s,daysFilter:l,setDaysFilter:d}=e;const c=(0,o().O7)(),{organizationOwnerRecordCache:u}=(0,i.useContext)(rc().V),m=(0,r().yK)((e=>({title:{fontWeight:g().Ue.medium,fontSize:16,marginBlock:"9px 4px",display:"flex",alignItems:"center",overflow:"hidden"},titleText:{...g().Yu,flexShrink:1},helpInfo:{marginLeft:4},container:{display:"flex",flexDirection:"column",gap:16},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16},overviewCard:{width:"fit-content"}})),[]),[f,h]=(0,Zd().e)(),{pageViews:y,uniquePageViews:v,pageEdits:x,topPages:b}=t,S=(0,a().VK)((()=>b.map((e=>{let{pageId:t,pageViews:n}=e;return{store:new(J().G)(c,{id:t,table:ac().iU},{inMemoryRecordCache:u}),caption:(0,te.jsx)(p()._H,{id:"workspaceAnalytics.overview.contentEngagement.caption.pageView",defaultMessage:"{pageViews} views",values:{pageViews:(0,te.jsx)(Od().e,{abbreviateNumber:!1,num:n})}})}}))),[c,b,u]),M=(0,i.useCallback)((e=>{d(e),_d().m0(c,{filter:"content_engagement",daysFilter:e})}),[c,d]);return(0,te.jsxs)("div",{style:m.container,ref:f,children:[(0,te.jsxs)("div",{style:m.titleContainer,children:[(0,te.jsxs)(me().Z,{style:m.title,children:[(0,te.jsx)("div",{style:m.titleText,children:(0,te.jsx)(p()._H,{id:"workspaceAnalytics.overview.contentEngagement.title",defaultMessage:"Content engagement"})}),(0,te.jsx)(pe().Z,{placement:he().Placement.Bottom,render:e=>(0,te.jsx)(_n().Z,{...e,href:(0,Ee().UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:m.helpInfo}),renderTooltip:()=>"all_time"!==l?(0,te.jsx)(p()._H,{id:"settings.workspaceAnalytics.overviewTab.contentEngagement.tooltip.lastDays",defaultMessage:"Activity on all pages in the workspace over the {dateRange}",values:{dateRange:D().Z.formatMessage(Pd().xX[l])}}):(0,te.jsx)(p()._H,{id:"settings.workspaceAnalytics.overviewTab.contentEngagement.tooltip.allTime",defaultMessage:"All time activity on all pages in the workspace"})})]}),(0,te.jsx)(Vd().f,{currentFilter:l,onChangeFilter:M})]}),(0,te.jsxs)(Ld().rj,{gap:16,children:[(0,te.jsx)(Ld().r8,{row:1,col:1,colEnd:3,children:(0,te.jsx)(Hd().q,{loading:n,error:s,icon:Bd().N,textStyles:m.overviewCard,title:(0,te.jsx)(p()._H,{id:"workspaceAnalytics.overview.contentEngagement.views",defaultMessage:"{pageViews} total views",values:{pageViews:(0,te.jsx)(Od().e,{abbreviateNumber:h<Mc,num:y})}})})}),(0,te.jsx)(Ld().r8,{row:2,col:1,colEnd:3,children:(0,te.jsx)(Hd().q,{loading:n,error:s,icon:bc().v,textStyles:m.overviewCard,iconStyles:{height:18,width:18},title:(0,te.jsx)(p()._H,{id:"workspaceAnalytics.overview.contentEngagement.uniqueViews",defaultMessage:"{uniquePageViews} unique page views",values:{uniquePageViews:(0,te.jsx)(Od().e,{abbreviateNumber:h<Mc,num:v})}})})}),(0,te.jsx)(Ld().r8,{row:3,col:1,colEnd:3,children:(0,te.jsx)(Hd().q,{loading:n,error:s,icon:xc().E,textStyles:m.overviewCard,iconStyles:{height:18,width:18},title:(0,te.jsx)(p()._H,{id:"workspaceAnalytics.overview.contentEngagement.pageEdits",defaultMessage:"{pageEdits} edits",values:{pageEdits:(0,te.jsx)(Od().e,{abbreviateNumber:h<Mc,num:x})}})})}),(0,te.jsx)(Ld().r8,{row:1,rowEnd:4,col:3,colEnd:5,children:(0,te.jsx)(Sc().$,{loading:n,error:s,title:(0,te.jsx)(p()._H,{id:"workspaceAnalytics.overview.contentEngagement.popularPages",defaultMessage:"Most popular pages"}),items:S})})]})]})}var Cc=()=>n(121056);function wc(e){var t,n;let{onUserTabFilterChange:i,spaceStore:o,contentEngagement:s,userEngagement:l}=e;const d=(0,r().yK)((e=>({container:{display:"flex",flexDirection:"column",gap:24}})),[]),c=(0,a().VK)((()=>o.getName()),[o]);if("NotFoundError"===(null===(t=s.error)||void 0===t?void 0:t.name)||"NotFoundError"===(null===(n=l.error)||void 0===n?void 0:n.name))return(0,te.jsx)(Rd().y,{type:"empty",spaceName:c});return(0,te.jsxs)("div",{style:d.container,children:[(0,te.jsx)(Cc().D,{data:l.data,loading:l.loading,error:l.error,daysFilter:l.daysFilter,setDaysFilter:function(e){i({graphFilter:"all_time"===e?"last_90_days":e}),l.setDaysFilter(e)}}),(0,te.jsx)(jc,{data:s.data,loading:s.loading,error:s.error,daysFilter:s.daysFilter,setDaysFilter:s.setDaysFilter})]})}var kc=()=>n(776981),_c=()=>n(549971);const Tc={[at().x.Overview]:(0,te.jsx)(p()._H,{id:"workspaceAnalyticsTabs.overview.title",defaultMessage:"Overview"}),[at().x.Users]:(0,te.jsx)(p()._H,{id:"workspaceAnalyticsTabs.members.title",defaultMessage:"Members"}),[at().x.Content]:(0,te.jsx)(p()._H,{id:"workspaceAnalyticsTabs.content.title",defaultMessage:"Content"}),[at().x.Search]:(0,te.jsx)(p()._H,{id:"workspaceAnalyticsTabs.search.title",defaultMessage:"Search"})};function Ic(e){const{currentTab:t,spaceAnalyticsStoreState:n,onUserTabFilterChange:i,spaceStore:o}=e;switch(t){case at().x.Content:return(0,te.jsx)(yc,{spaceStore:o,contentEngagement:e.contentEngagementData});case at().x.Users:return(0,te.jsx)(_c().Z,{spaceStore:o,usersTabData:n.usersTabData,onUserTabFilterChange:i,userEngagement:e.userEngagementData});case at().x.Overview:return(0,te.jsx)(wc,{contentEngagement:e.contentEngagementData,userEngagement:e.userEngagementData,spaceStore:o,onUserTabFilterChange:i});case at().x.Search:return(0,te.jsx)(kc().Z,{spaceStore:o});default:(0,gn().t1)(t)}}const Pc=function(e){let{spaceStore:t}=e;const s=(0,r().yK)((e=>({headingStyle:{marginBottom:0,paddingBottom:0,fontSize:16,fontWeight:g().Ue.medium,display:"flex",justifyContent:"space-between"},title:{display:"flex",alignItems:"center"},helpInfo:{marginLeft:4},tabsStyle:{paddingLeft:0,paddingRight:0,marginTop:-6,marginBottom:14}})),[]),l=(0,o().O7)(),d=(0,a().VK)((()=>{var e;return null===(e=et().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),c=(0,n(860570).U)({spaceId:t.id}),u=(0,n(113437).i)({spaceStore:t,userId:d}),[m,f]=(0,a().AF)(at().Z),h=(0,a().VK)((()=>Boolean(null==t?void 0:t.getSettings().disable_page_analytics)),[t]),y=(0,a().VK)((()=>null==t?void 0:t.getName()),[t]),v=(0,i.useCallback)((async e=>{await Td().Pr({environment:l,spaceStore:t,currentTab:m.currentTab,currentSpaceId:m.currentSpaceId,usersTabData:m.usersTabData,setState:f,graphFilter:e.graphFilter,tableFilter:e.tableFilter})}),[l,t,m,f]),x=(0,i.useCallback)((e=>{_d().nK(l,{tab:e}),f({...m,currentTab:e})}),[f,m,l]),b=(0,a().VK)((()=>{const e=[];return function(e){return Boolean(null==e?void 0:e.canAdmin())}(t)&&e.push(at().x.Overview),function(e){return Boolean(null==e?void 0:e.canAdmin())}(t)&&e.push(at().x.Users),e.push(at().x.Content),function(e){return Boolean(null==e?void 0:e.canAdmin())}(t)&&e.push(at().x.Search),e}),[t]),M=(0,a().VK)((()=>b.length>1),[b]),j=m.currentTab||b[0];(0,i.useEffect)((()=>{!async function(){const e=t.id;e&&at().Z.shouldRefreshState(e)&&(j===at().x.Users?await v({graphFilter:"last_90_days",tableFilter:"last_90_days"}):j===at().x.Content||j===at().x.Overview||j===at().x.Search||(0,gn().t1)(j))}()}));const C=(0,i.useCallback)((()=>{S().D({environment:l,url:(0,Ee().UY)("guides.workspaceAnalytics")})}),[l]),w=b.map((e=>Tc[e])),k=h?(0,te.jsx)(Rd().y,{type:"disabled",spaceName:y}):(0,te.jsxs)(te.Fragment,{children:[M&&(0,te.jsx)(mi().Z,{tabs:w,selectedIndex:b.indexOf(j),onChange:e=>{x(b[e])},style:s.tabsStyle}),Ic({currentTab:j,spaceAnalyticsStoreState:m,onUserTabFilterChange:v,spaceStore:t,contentEngagementData:c,userEngagementData:u})]});return(0,te.jsxs)(Rt().ZP,{children:[(0,te.jsxs)(ae().Z,{large:!0,style:s.headingStyle,children:[(0,te.jsxs)("div",{style:s.title,children:[(0,te.jsx)(p()._H,{id:"settings.workspaceAnalytics.title",defaultMessage:"Workspace analytics"}),(0,te.jsx)(pe().Z,{placement:he().Placement.Right,render:e=>(0,te.jsx)(_n().Z,{...e,href:(0,Ee().UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:s.helpInfo}),renderTooltip:()=>(0,te.jsx)(p()._H,{id:"settings.workspaceAnalytics.dataDisclaimerTooltip",defaultMessage:"Data available from the start date of your Enterprise Plan"})})]}),(0,te.jsx)(xt().Z,{isSmall:!0,onClick:C,icon:Us().m,children:(0,te.jsx)(p()._H,{id:"workspaceAnalytics.title.helpButton",defaultMessage:"Learn more"})})]}),(0,Rt().Um)(),k]})};var Ac=()=>n(325803),Rc=()=>n(109757),Zc=()=>n(18281),Bc=()=>n(493462),Dc=()=>n(521632),Lc=()=>n(491927),Oc=()=>n(693622);let Hc=function(e){return e.Password="Password",e.CurrentEmail="TemporaryPasscode",e}({});class Vc extends H().default{getInitialState(){return{open:!1,authorized:!1,authorizationType:void 0}}}const Uc=Vc;var Ec=()=>n(951113);const Nc={modal:{width:460,padding:32,borderRadius:4,fontSize:14},loadingSpinner:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},paragraph:{marginTop:12,marginBottom:14},error:{color:Vo().ZP.red,fontSize:12,marginTop:4,marginLeft:8},bold:{fontWeight:g().Ue.bold},input:{padding:"4px 8px"},button:{marginTop:14,width:"100%"},educationPlanWarning:{display:"flex",marginTop:14,paddingTop:14},claimedEmailDomainWarning:{marginTop:14,marginBottom:14}},Fc=(0,p().vU)({dialogLabel:{id:"profileSettings.accountSecuritySection.emailSetting.dialogLabel",defaultMessage:"Change email"}});const Kc=function(e){let{userValue:t,hasEducationPlan:n,areProfileEditsDisabled:s}=e;const r=(0,o().O7)(),l=(0,p().YB)(),d=(0,a().qz)(void 0,Uc),c=(0,i.useCallback)((()=>(0,te.jsx)(cu,{userValue:t,hasEducationPlan:n,emailChangeStore:d})),[t,n,d]),u=(0,i.useCallback)((()=>Xc(r,n,d)),[r,n,d]),m=(0,a().VK)((()=>d.state.open),[d]);return(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(En().Z,{type:"custom",isMobile:!1,title:(0,te.jsx)(p()._H,{id:"profileSettings.accountSecuritySection.emailSetting.label",defaultMessage:"Email"}),caption:t&&t.email,customButton:(0,te.jsx)(eu,{userValue:t,areProfileEditsDisabled:s,emailChangeStore:d})}),(0,te.jsx)(ri().Z,{ariaLabel:l.formatMessage(Fc.dialogLabel),open:m,onDismiss:u,render:c})]})};function zc(e){let{userValue:t}=e;return t?(0,te.jsx)(p()._H,{id:"profileSettings.changeEmailModal.currentEmail",defaultMessage:"Your current email is {currentEmail}.",values:{currentEmail:(0,te.jsx)("span",{style:Nc.bold,children:t&&t.email})}}):null}function Wc(e){let{state:t}=e;return(0,te.jsx)(me().Z,{isSmall:!0,isMultiline:!0,style:Nc.claimedEmailDomainWarning,children:(0,te.jsx)(p()._H,{id:"profileSettings.changeEmailModal.claimedEmailDomainWarning",defaultMessage:"The email domain {newEmailDomain} has been claimed by an organization. If you continue with changing this email address, any workspaces created by this account can be managed by the organization. See <domainclaimlink>this page</domainclaimlink> for more info.",values:{newEmailDomain:(0,Hl().Gd)(t.newEmail)??t.newEmail,domainclaimlink:e=>(0,te.jsx)(ui().Z,{href:(0,Ee().UY)("guides.domainManagement"),external:!0,children:e})}})})}function qc(e){return{modal:{background:e.contentBackground},educationPlanWarning:{color:e.lightTextColor,borderTop:`1px solid ${e.regularDividerColor}`}}}function Gc(e){let{hasEducationPlan:t}=e;const n=(0,r().Fg)(),i=(0,o().O7)();return t?(0,te.jsxs)("div",{style:{...Nc.educationPlanWarning,...qc(n).educationPlanWarning},children:[(0,Us().m)({width:14,marginTop:4,marginRight:6,fill:n.lightIconColor})," ",(0,te.jsx)("div",{children:(0,te.jsx)(p()._H,{defaultMessage:"Changing your email may downgrade your workspace on a Free Education Plan to the basic Free Plan. You won't lose any data, but you'll need to upgrade to re-access paid features. Have questions about this? <sendmessagelink>Message support</sendmessagelink>.",id:"emailChangeSettings.downgradeEducationPlan.warning.message",values:{sendmessagelink:e=>(0,te.jsx)(ui().Z,{onClick:()=>function(e){Ir().j_({environment:e,from:"change_email_student"})}(i),children:e})}})})]}):null}function Yc(e,t,n){if(e)return e.email;n.setState({open:n.state.open,authorized:!1,authorizationType:void 0,error:t.formatMessage({id:"profileSettings.changeEmailModal.errorNoUserValue",defaultMessage:"User value is undefined."})})}async function $c(e,t,n){if(!n.state.authorized)return;const i=(0,Hl().Gd)(n.state.newEmail);n.setState({...n.state,loading:!0});const[o,s]=await Promise.all([await Z().callApi({eventName:"sendEmailVerification",environment:e,data:{email:n.state.newEmail}}),i?await Z().callApi({eventName:"getVerifiedEmailDomain",environment:e,data:{emailDomain:i}}):void 0]);if("success"===o.type){const e=(0,gn().$K)(s)&&"failed"===s.type?(0,B().wf)(t,s):void 0;n.setState({...n.state,newEmailPasscodeSent:!0,newEmailPasscode:"",error:e,loading:!1,newEmailContainsVerifiedDomain:(0,gn().$K)(s)&&"success"===s.type&&void 0!==s.data.id})}else n.setState({...n.state,loading:!1,error:(0,B().wf)(t,o)})}async function Xc(e,t,n){n.reset(),t&&await mt().bi(e)}async function Qc(e,t,n,i){if(!i.state.authorized)if(i.state.authorizationType===Hc.Password){if(!Yc(t,n,i))return;i.setState({...i.state,loading:!0});const o=await Z().callApi({eventName:"authVerifyPassword",environment:e,data:{password:i.state.password}});if("failed"===o.type)return void i.setState({...i.state,loading:!1,error:(0,B().wf)(n,o)});i.setState({...i.state,authorized:!0,newEmail:"",newEmailPasscode:"",newEmailPasscodeSent:!1,newEmailContainsVerifiedDomain:!1,error:void 0,loading:!1})}else i.state.authorizationType===Hc.CurrentEmail&&i.setState({...i.state,authorized:!0,newEmail:"",newEmailPasscode:"",newEmailPasscodeSent:!1,newEmailContainsVerifiedDomain:!1,error:void 0,loading:!1})}async function Jc(e,t,n,i){if(!i.state.authorized)return;const o=i.state.authorizationType===Hc.Password?{type:"Password",password:i.state.password,newEmail:i.state.newEmail,newEmailPasscode:i.state.newEmailPasscode}:{type:"CurrentEmail",currentEmailPasscode:i.state.currentEmailPasscode,newEmail:i.state.newEmail,newEmailPasscode:i.state.newEmailPasscode};i.setState({...i.state,loading:!0});const s=await Z().callApi({eventName:"changeEmail",environment:e,data:o});if("success"===s.type)Lc().tx(e,{new_email:i.state.newEmail,error:void 0}),i.setState({...i.state,loading:!1}),await Xc(e,t,i);else{const t=(0,B().wf)(n,s);Lc().tx(e,{new_email:i.state.newEmail,error:t}),i.setState({...i.state,loading:!1,error:t})}}function eu(e){let{userValue:t,areProfileEditsDisabled:n,emailChangeStore:o}=e;const s=(0,i.useCallback)((()=>function(e){e.setState({open:!0,authorized:!1,authorizationType:void 0})}(o)),[o]),a=(0,te.jsx)(xt().Z,{isLarge:!0,onClick:n?()=>{}:s,disabled:n,disabledFeedback:n,children:(0,te.jsx)(p()._H,{id:"profileSettings.accountSecuritySection.emailSetting.changeEmailButton.label",defaultMessage:"Change email"})});return n?(0,te.jsx)(pe().Z,{renderTooltip:()=>(0,te.jsx)(p()._H,{id:"editableUserAvatar.profilePhoto.disabledByOrganization",defaultMessage:"Profile editing has been disabled by your organization, {emailDomain}",values:{emailDomain:t?(0,Hl().Gd)(t.email):""}}),placement:he().Placement.Bottom,alignment:he().Alignment.Center,render:e=>(0,te.jsx)("div",{...e,children:a})}):a}function tu(e){let{state:t,userValue:n,emailChangeStore:s}=e;const a=(0,o().O7)(),r=(0,p().YB)(),l=(0,i.useCallback)((()=>Qc(a,n,r,s)),[a,n,r,s]),d=(0,i.useCallback)((()=>function(e){e.setState({open:!0,authorized:!1,authorizationType:Hc.Password,password:""})}(s)),[s]),c=(0,i.useCallback)((e=>function(e,t){t.setState({open:!0,authorized:!1,authorizationType:Hc.Password,password:e.currentTarget.value,error:void 0})}(e,s)),[s]);return n?(0,te.jsxs)(i.Fragment,{children:[(0,te.jsx)("p",{style:{margin:0},children:(0,te.jsx)(zc,{userValue:n})}),(0,te.jsx)("p",{style:Nc.paragraph,children:(0,te.jsx)(p()._H,{id:"profileSettings.changeEmailModal.enterPasswordInstructions",defaultMessage:"Please enter your password."})}),(0,te.jsx)(Dn().Z,{style:{display:"none"},type:"text",value:n.email,autoComplete:"username",disabled:!0}),(0,te.jsx)(Dn().Z,{type:"password",disabled:t.authorized,value:t.password,onChange:c,showClearButton:!0,onClearButtonClick:d,onSubmit:l,placeholder:r.formatMessage({id:"profileSettings.changeEmailModal.passwordInput.label",defaultMessage:"Password"}),style:Nc.input,focusInitial:!0,autoComplete:"current-password"}),!t.authorized&&t.error&&(0,te.jsx)("div",{style:Nc.error,children:t.error}),!t.authorized&&(0,te.jsx)(kn().Z,{isLarge:!0,style:Nc.button,onClick:l,disabled:t.loading,children:t.loading?(0,te.jsx)(oi().Z,{}):(0,te.jsx)(p()._H,{id:"profileSettings.changeEmailModal.continueButton.label",defaultMessage:"Continue"})})]}):null}function nu(e){let{userValue:t,emailChangeStore:n}=e;const s=(0,o().O7)(),r=(0,p().YB)(),l=(0,i.useCallback)((()=>async function(e,t,n,i){if(!t)return;i.setState({...i.state,loading:!0});const o=await Z().callApi({eventName:"sendEmailVerification",environment:e,data:{email:t.email}});"success"===o.type?i.setState({...i.state,currentEmailPasscodeSent:!0,currentEmailPasscode:"",error:void 0,loading:!1}):i.setState({...i.state,currentEmailPasscodeSent:!0,loading:!1,error:(0,B().wf)(n,o)})}(s,t,r,n)),[s,t,r,n]),d=(0,a().VK)((()=>n.state.loading),[n]);return(0,te.jsx)(kn().Z,{isLarge:!0,onClick:l,disabled:d,children:d?(0,te.jsx)(oi().Z,{}):(0,te.jsx)(p()._H,{id:"profileSettings.changeEmailModal.sendCurrentEmailVerificationCode.label",defaultMessage:"Send verification code"})})}function iu(e){let{state:t,userValue:n,emailChangeStore:s}=e;const a=(0,o().O7)(),r=(0,p().YB)(),l=(0,i.useCallback)((()=>Qc(a,n,r,s)),[a,n,r,s]),d=(0,i.useCallback)((e=>function(e,t){t.setState({...t.state,currentEmailPasscode:e.currentTarget.value,error:void 0})}(e,s)),[s]);return(0,te.jsxs)(i.Fragment,{children:[(0,te.jsx)(Dn().Z,{value:t.currentEmailPasscode,onChange:d,onSubmit:l,placeholder:r.formatMessage({id:"profileSettings.changeEmailModal.enterCurrentEmailVerificationCodeInput.placeholder",defaultMessage:"Enter verification code"}),focusInitial:!0,style:Nc.input}),!t.authorized&&(0,te.jsx)(kn().Z,{isLarge:!0,style:Nc.button,onClick:l,disabled:t.loading,children:t.loading?(0,te.jsx)(oi().Z,{}):(0,te.jsx)(p()._H,{id:"profileSettings.changeEmailModal.continueButton.label",defaultMessage:"Continue"})})]})}function ou(e){let{emailChangeStore:t}=e;const n=(0,o().O7)(),s=(0,p().YB)(),r=(0,i.useCallback)((()=>function(e){e.setState({...e.state,newEmail:"",newEmailPasscodeSent:!1,newEmailContainsVerifiedDomain:!1,error:void 0})}(t)),[t]),l=(0,i.useCallback)((()=>$c(n,s,t)),[n,s,t]),d=(0,i.useCallback)((e=>function(e,t){t.setState({...t.state,newEmail:e.currentTarget.value,error:void 0})}(e,t)),[t]),c=(0,a().Kw)(t);return c.authorized?(0,te.jsx)(Dn().Z,{value:c.newEmail,onChange:d,onSubmit:l,showClearButton:!0,onClearButtonClick:r,placeholder:s.formatMessage({id:"profileSettings.changeEmailModal.newEmailInput.placeholder",defaultMessage:"Enter new email"}),style:Nc.input,focusInitial:!0}):null}function su(e){let{state:t,emailChangeStore:n}=e;const s=(0,o().O7)(),a=(0,p().YB)(),r=(0,i.useCallback)((()=>$c(s,a,n)),[s,a,n]);return(0,te.jsxs)(i.Fragment,{children:[t.error&&(0,te.jsx)("div",{style:Nc.error,children:t.error}),(0,te.jsx)(kn().Z,{isLarge:!0,style:Nc.button,onClick:r,disabled:t.loading,children:t.loading?(0,te.jsx)(oi().Z,{}):(0,te.jsx)(p()._H,{id:"profileSettings.changeEmailModal.sendVerificationCodeButton.label",defaultMessage:"Send verification code"})})]})}function au(e){let{state:t,userValue:n,emailChangeStore:o}=e;return(0,te.jsxs)(i.Fragment,{children:[(0,te.jsxs)("p",{style:{...Nc.paragraph,marginTop:0},children:[(0,te.jsx)(zc,{userValue:n})," ",t.currentEmailPasscodeSent?(0,te.jsx)(p()._H,{id:"profileSettings.changeEmailModal.sentVerificationCodeToCurrentEmail",defaultMessage:"We've sent a temporary verification code to this email."}):(0,te.jsx)(p()._H,{id:"profileSettings.changeEmailModal.sendVerificationCodeToCurrentEmail",defaultMessage:"We'll send a temporary verification code to this email."})]}),t.currentEmailPasscodeSent?(0,te.jsx)(iu,{userValue:n,emailChangeStore:o,state:t}):(0,te.jsx)(nu,{userValue:n,emailChangeStore:o})]})}function ru(e,t,n,i,o){if(!o.state.authorized)return()=>{};if(o.state.newEmailContainsVerifiedDomain&&(0,Hl().Gd)(o.state.newEmail)!==(0,Hl().Gd)((null==t?void 0:t.email)||"")){const t=o.state.newEmail;return async()=>{const s=await function(e){return x().gt({mode:"wide",message:(0,te.jsx)(p()._H,{id:"profileSettings.changeEmailModal.confirmationModal.title",defaultMessage:"Change your email?"}),description:(0,te.jsx)(p()._H,{id:"profileSettings.changeEmailModal.confirmationModal.description",defaultMessage:"If you continue changing this email address to this domain, any workspaces created by this account can be managed by the organization.",values:{verifiedDomain:(0,Hl().Gd)(e)}}),acceptLabel:(0,te.jsx)(p()._H,{id:"profileSettings.changeEmailModal.confirmationModal.acceptButton.label",defaultMessage:"Change email"}),cancelLabel:(0,te.jsx)(p()._H,{id:"profileSettings.changeEmailModal.confirmationModal.cancelButton.label",defaultMessage:"Go back"})}).then((e=>e.accept))}(t);s&&await Jc(e,n,i,o)}}return()=>Jc(e,n,i,o)}function lu(e){let{state:t,userValue:n,hasEducationPlan:s,store:r}=e;const l=(0,o().O7)(),d=(0,p().YB)(),c=(0,i.useCallback)((e=>function(e,t){t.setState({...t.state,newEmailPasscode:e.currentTarget.value,error:void 0})}(e,r)),[r]),u=(0,a().VK)((()=>ru(l,n,s,d,r)),[l,n,s,d,r]);return(0,te.jsxs)(i.Fragment,{children:[(0,te.jsx)("p",{style:Nc.paragraph,children:(0,te.jsx)(p()._H,{id:"profileSettings.changeEmailModal.verificationCodeSentMessage",defaultMessage:"We just sent you a temporary verification code to {newEmail}.",values:{newEmail:(0,te.jsx)("span",{style:Nc.bold,children:t.newEmail})}})}),(0,te.jsx)(Dn().Z,{value:t.newEmailPasscode,onChange:c,onSubmit:u,placeholder:d.formatMessage({id:"profileSettings.changeEmailModal.enterVerificationCodeInput.placeholder",defaultMessage:"Enter verification code"}),focusInitial:!0,style:Nc.input}),t.error&&(0,te.jsx)("div",{style:Nc.error,children:t.error}),(0,te.jsx)(kn().Z,{isLarge:!0,style:Nc.button,onClick:u,disabled:t.loading,children:t.loading?(0,te.jsx)(oi().Z,{}):(0,te.jsx)(p()._H,{id:"profileSettings.changeEmailModal.changeEmailButton.label",defaultMessage:"Change email"})})]})}function du(e){let{state:t,userValue:n,hasEducationPlan:o,emailChangeStore:s}=e;const r=(0,a().Kw)(s);if(!r.authorized)return null;const{newEmail:l,newEmailContainsVerifiedDomain:d,newEmailPasscodeSent:c}=r;return(0,te.jsxs)(i.Fragment,{children:[(0,te.jsx)("p",{style:Nc.paragraph,children:(0,te.jsx)(p()._H,{id:"profileSettings.changeEmailModal.newEmailInstructions",defaultMessage:"Please enter a new email and we will send you a verification code."})}),(0,te.jsx)("div",{children:(0,te.jsx)(ou,{emailChangeStore:s})}),d&&(0,Hl().Gd)(l)!==(0,Hl().Gd)((null==n?void 0:n.email)||"")&&(0,te.jsx)(Wc,{state:t}),c?(0,te.jsx)(lu,{userValue:n,hasEducationPlan:o,store:s,state:t}):(0,te.jsx)(su,{emailChangeStore:s,state:t}),(0,te.jsx)(Gc,{hasEducationPlan:o})]})}function cu(e){let{userValue:t,hasEducationPlan:n,emailChangeStore:s}=e;const l=(0,p().YB)(),d=(0,r().Fg)(),c=(0,o().O7)(),u=(0,i.useCallback)((()=>async function(e,t,n,i){const o=Yc(n,t,i);if(!o)return;const s=await Oc().c({environment:e,userEmail:o});s.error?i.setState({open:i.state.open,authorized:!1,authorizationType:void 0,error:t.formatMessage({id:"profileSettings.changeEmailModal.errorFetchingAccountData",defaultMessage:"Could not fetch account information for {currentEmail}."},{currentEmail:o})}):s.value.isSamlEnforced||!s.value.hasPassword?i.setState({open:!0,authorized:!1,authorizationType:Hc.CurrentEmail,currentEmailPasscodeSent:!1,currentEmailPasscode:""}):i.setState({open:!0,authorized:!1,authorizationType:Hc.Password,password:""})}(c,l,t,s)),[c,l,t,s]),m=(0,a().Kw)(s);return(0,te.jsx)("div",{style:{...Nc.modal,...qc(d).modal},children:(0,te.jsx)(Ec().Z,{fetch:u,loading:e=>e?(0,te.jsx)("div",{style:Nc.loadingSpinner,children:(0,te.jsx)(oi().Z,{})}):null,render:()=>(0,te.jsxs)(i.Fragment,{children:[m.authorizationType===Hc.Password?(0,te.jsx)(tu,{userValue:t,emailChangeStore:s,state:m}):m.authorizationType===Hc.CurrentEmail?(0,te.jsx)(au,{userValue:t,emailChangeStore:s,state:m}):void 0,m.authorized&&(0,te.jsx)(du,{userValue:t,hasEducationPlan:n,emailChangeStore:s,state:m})]})})})}var uu=()=>n(968795),pu=()=>n(404553),mu=()=>n(623596),gu=()=>n(536635);const fu=(0,gt().IU)("cellPhone",{viewBox:"0 0 12 18",svg:(0,te.jsx)("path",{d:"M2.938 17.398c-.672 0-1.217-.197-1.633-.593-.412-.39-.617-.912-.617-1.563V2.461c0-.646.205-1.167.617-1.563.416-.395.96-.593 1.633-.593h6.148c.667 0 1.2.198 1.601.593.407.396.61.917.61 1.563v12.781c0 .646-.203 1.167-.61 1.563-.4.396-.934.593-1.601.593H2.937zm.265-1.578h5.594c.307 0 .544-.08.71-.242.173-.161.259-.39.259-.687V2.812c0-.291-.086-.518-.258-.68-.167-.166-.404-.25-.711-.25H3.203c-.312 0-.555.082-.726.243-.167.161-.25.39-.25.688V14.89c0 .296.083.526.25.687.171.162.414.242.726.242zm1.11-.61a.398.398 0 01-.282-.108.368.368 0 01-.117-.282c0-.12.04-.216.117-.289a.398.398 0 01.282-.11h3.375a.38.38 0 01.28.11c.074.073.11.17.11.29a.38.38 0 01-.11.28.38.38 0 01-.28.11H4.313zm.703-11.546a.583.583 0 01-.43-.172.583.583 0 01-.172-.43.57.57 0 01.172-.421.57.57 0 01.43-.18h1.96a.56.56 0 01.422.18c.12.114.18.255.18.421a.583.583 0 01-.172.43.583.583 0 01-.43.172h-1.96z"})});var hu=()=>n(745795),yu=()=>n(695404);class vu extends H().default{getInitialState(){return{open:!1,singleDeviceLogout:!1,deviceName:void 0}}}const xu=new vu;const bu=new(n(168469).q)((e=>{let{userId:t,paginationInfo:n}=e;return`getUserDevices/${t}/limit=${null==n?void 0:n.limit}`}),(async(e,t)=>{let{paginationInfo:i}=t;const o=await Promise.resolve().then(n.bind(n,824462)),s=await o.callApi({eventName:"getUserDevices",environment:e,data:{paginationInfo:i}});if("success"===s.type)return s.data}));fl().exposeDebugValue("DevicesStore",bu);const Su=bu;class Mu extends H().default{getInitialState(){return{deviceListLoadingState:"init",nextCursor:void 0,currentDevice:void 0,allDevices:[],viewDevices:[],sortColumn:void 0,sortAscending:!1}}async fetchDevices(e,t){this.setState({...this.state,deviceListLoadingState:"loading",sortColumn:void 0});const n=await Su.awaitData(e,t);var i,o;n&&n.devices&&n.currentDevice&&(this.setDevices(n.devices),this.setCurrentDevice(n.currentDevice),this.setNextCursor(null===(i=n.devices[n.devices.length-1])||void 0===i?void 0:i.id));n&&n.devices&&!n.currentDevice&&(this.setDevices(n.devices),this.setNextCursor(null===(o=n.devices[n.devices.length-1])||void 0===o?void 0:o.id));void 0!==n?this.setViewDevices():this.setState({...this.state,deviceListLoadingState:"error"})}setCurrentDevice(e){this.setState({...this.state,currentDevice:e})}setViewDevices(){var e;let t=this.state.allDevices.slice(0,3);const n=t.findIndex((e=>{var t;return e.id===(null===(t=this.state.currentDevice)||void 0===t?void 0:t.id)}));-1===n&&this.state.currentDevice?t=[this.state.currentDevice,...t.slice(0,2)]:n>0&&(t=[t[n],...t.slice(0,n),...t.slice(n+1)]);const i=null===(e=this.state.allDevices[t.length-1])||void 0===e?void 0:e.id;this.setNextCursor(i),this.setState({...this.state,deviceListLoadingState:"loaded",viewDevices:t})}setDevices(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return void this.setState({...this.state,allDevices:e,viewDevices:e.slice(0,3)});let t=e;this.state.currentDevice&&(t=[this.state.currentDevice,...e.filter((e=>{var t;return e.id!==(null===(t=this.state.currentDevice)||void 0===t?void 0:t.id)}))]),this.setState({...this.state,allDevices:e,viewDevices:t})}setSorting(e,t){switch(this.setState({...this.state,sortColumn:e,sortAscending:t}),e){case"device-name":this.sortDevicesByName();break;case"last-seen-time":this.sortDevicesByLastSeenTime();break;case"last-login-geographic-location":this.sortDevicesByLocation()}}sortDevicesByLastSeenTime(){const e=this.state.currentDevice,t=this.state.allDevices.filter((t=>t.id!==(null==e?void 0:e.id))),n=m().Xo(t,(e=>e.last_seen_time??e.last_login_at),this.state.sortAscending?"asc":"desc");this.setState({...this.state,viewDevices:e?[e,...n]:n})}sortDevicesByName(){const e=this.state.currentDevice,t=this.state.allDevices.filter((t=>t.id!==(null==e?void 0:e.id))),n=m().Xo(t,(e=>e.device_name.toLowerCase()),this.state.sortAscending?"asc":"desc");this.setState({...this.state,viewDevices:e?[e,...n]:n})}sortDevicesByLocation(){const e=this.state.currentDevice,t=this.state.allDevices.filter((t=>t.id!==(null==e?void 0:e.id))),n=m().Xo(t,(e=>{var t;return(null===(t=e.last_login_geographic_location)||void 0===t?void 0:t.toLowerCase())||"unknown"}),this.state.sortAscending?"asc":"desc");this.setState({...this.state,viewDevices:e?[e,...n]:n})}setNextCursor(e){this.setState({...this.state,nextCursor:e})}loadMoreDevices(){var e;if(void 0===this.state.nextCursor)return;const t=this.state.allDevices.slice(0,3),n=this.state.allDevices.slice(t.length);let i=[...t,...n];this.state.currentDevice&&(i=[this.state.currentDevice,...i.filter((e=>{var t;return e.id!==(null===(t=this.state.currentDevice)||void 0===t?void 0:t.id)}))]);const o=null===(e=this.state.allDevices[i.length-1])||void 0===e?void 0:e.id;this.setNextCursor(o),this.setState({...this.state,viewDevices:i})}}const ju=new Mu;var Cu=()=>n(668001),wu=()=>n(378907);function ku(){var e;const t=(0,o().O7)(),n=(0,r().yK)((e=>({tableBox:{tableLayout:"fixed"},cell:{paddingRight:12,height:44},allDevicesContainer:{display:"flex",flexDirection:"column",marginTop:16},noSessionsMessage:{height:120,width:"100%",fontSize:12,color:e.lightTextColor,display:"flex",alignItems:"center",justifyContent:"center",borderBottom:`1px solid ${e.lightDividerColor}`},shimmerRow:{height:12,gap:16,display:"flex",borderRadius:6},tooltips:{color:e.icon.tertiary,height:14,width:15,marginLeft:4},lastActiveTimeContainer:{display:"flex",alignItems:"center"}})),[]),[s]=(0,Bs().r5)((async()=>{const e=t.currentUser.id;if(!e)return Promise.reject("User ID is not available");try{return await ju.fetchDevices(t,{userId:e}),Promise.resolve()}catch(l){return Promise.reject(l)}}),[t]),l="rejected"===s.status,d=(0,a().Kw)(ju),c=(null===(e=d.currentDevice)||void 0===e?void 0:e.id)??"",u=(0,i.useMemo)((()=>l?[]:d.viewDevices.map((e=>function(e){let{userDevicePointer:t,storeState:n,currentUserDevicePk:i}=e;const o=t.id,s=n.viewDevices.find((e=>e.id===o));if(!s)return;const a=i===s.id,{device_name:r,last_seen_time:l,last_login_geographic_location:d,last_login_at:c}=s;return{key:o,columns:[(0,te.jsx)(Uu,{deviceName:r,isCurrentDevice:a},"device-name"),(0,te.jsx)(Hu,{lastSeenTime:l??c,isCurrentDevice:a},"last-seen-time"),(0,te.jsx)(Vu,{location:d},"location"),(0,te.jsx)(Lu,{deviceId:s.id,isCurrentDevice:a},"action")]}}({userDevicePointer:{id:e.id,table:uu().e},storeState:d,currentUserDevicePk:c}))).filter((e=>void 0!==e))),[c,l,d]),p=(0,i.useMemo)((()=>Array.from({length:3}).map(((e,t)=>({columns:Array.from({length:4}).map(((e,t)=>(0,te.jsx)(Cu().Z,{style:n.shimmerRow},t))),key:`device-loading-shimmer-${t}`})))),[n.shimmerRow]);return(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(Iu,{deviceRows:u,styles:n,storeState:d,shimmerRows:p}),(0,te.jsx)(Bu,{})]})}function _u(e){let{column:t,onSortableColumnClick:n,header:i}=e;const o=(0,r().yK)((e=>({wrapper:{display:"flex"},text:{fontSize:g().JB.UISmall.desktop,fontWeight:g().Ue.regular,color:e.mediumTextColor},sortButton:{display:"flex",alignItems:"center",padding:"3px 5px",overflow:"hidden",maxWidth:"100%",borderRadius:4},sortIcon:{fill:e.mediumTextColor,width:12,height:12,marginLeft:4}})),[]),{sortColumn:s,sortAscending:l}=(0,a().VK)((()=>{const{sortColumn:e,sortAscending:t}=ju.state;return{sortColumn:e,sortAscending:t}}),[]),d=["device-name","last-seen-time","last-login-geographic-location"].includes(t),c=()=>{if(s===t)return(0,mu().K)({...o.sortIcon,...l?{transform:"rotate(180deg)"}:{}})};return i&&d?(0,te.jsx)("div",{style:o.wrapper,children:(0,te.jsxs)(ue().Z,{style:o.sortButton,onClick:()=>n(t),children:[i,c()]})}):i?(0,te.jsx)("div",{style:o.wrapper,children:i}):(0,te.jsx)(te.Fragment,{children:i})}function Tu(e){let{isLoadingState:t,styles:n}=e;const i=t?"3px 5px":0;return[{key:"device-name",header:(0,te.jsx)("div",{children:(0,te.jsx)(p()._H,{id:"manageActiveSessions.table.nameColumn.title",defaultMessage:"Device Name"})}),style:{width:"30%",minWidth:200,padding:i}},{key:"last-seen-time",header:(0,te.jsxs)("div",{style:n.lastActiveTimeContainer,children:[(0,te.jsx)(p()._H,{id:"manageActiveSessions.table.lastSeenColumn.title",defaultMessage:"Last Active"}),(0,te.jsx)(pe().Z,{renderTooltip:()=>(0,te.jsx)(p()._H,{id:"manageActiveSessions.table.lastSeenColumn.tooltip",defaultMessage:"This may be delayed by several hours."}),render:e=>(0,te.jsx)("div",{...e,children:(0,Us().m)(n.tooltips)}),placement:he().Placement.Top,alignment:he().Alignment.Start})]}),style:{width:"25%",padding:i}},{key:"last-login-geographic-location",header:(0,te.jsx)(p()._H,{id:"manageActiveSessions.table.locationColumn.title",defaultMessage:"Location"}),style:{width:"30%",padding:i}},{key:"logout",header:(0,te.jsx)(te.Fragment,{}),style:{width:"10%",padding:i}}]}function Iu(e){const{deviceRows:t,styles:n,storeState:o,shimmerRows:s}=e,a="loading"===o.deviceListLoadingState&&!t.length,r=!a&&!t.length,l=!a&&!r,d=(0,i.useCallback)((e=>{const{sortColumn:t,sortAscending:n}=ju.state,i=t!==e||!n;ju.setSorting(e,i)}),[]);return(0,te.jsxs)(te.Fragment,{children:[a?(0,te.jsx)(wu().Z,{columns:Tu({isLoadingState:!0,styles:n}),rows:s,tableStyle:n.tableBox,cellStyle:n.cell}):(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(wu().Z,{columns:Tu({isLoadingState:!1,styles:n}).map((e=>({key:e.key,header:(0,te.jsx)(_u,{column:e.key,header:e.header,onSortableColumnClick:d}),style:e.style}))),rows:t,tableStyle:n.tableBox,cellStyle:n.cell}),r&&(0,te.jsx)("div",{style:n.noSessionsMessage,children:(0,te.jsx)(p()._H,{id:"manageActiveSessions.noActiveSessions",defaultMessage:"No active sessions found."})})]}),l&&(0,te.jsx)(Nu,{...e})]})}function Pu(e,t){xu.setState({...xu.state,open:!0,singleDeviceLogout:e??!1,deviceName:t})}function Au(){xu.setState({...xu.state,open:!1,singleDeviceLogout:!1,deviceName:void 0})}function Ru(){ju.loadMoreDevices()}function Zu(){ju.setViewDevices()}function Bu(){const e=(0,a().VK)((()=>xu.state.open),[]),t=(0,a().VK)((()=>xu.state.singleDeviceLogout),[]),n=(0,a().VK)((()=>xu.state.deviceName),[]),o=(0,a().VK)((()=>function(){let e;const{currentUserStore:t}=et().default.state;return t&&(e=t.getEmail()),e}()),[]),s=(0,r().yK)((e=>({container:{width:350,padding:24,display:"flex",flexDirection:"column",alignItems:"center"},descriptionText:{marginBottom:20,textAlign:"center"},button:{width:"100%"},bold:{fontWeight:g().Ue.semibold}})),[]),l=(0,i.useCallback)((e=>(0,te.jsx)("span",{style:s.bold,children:e})),[s]);return(0,te.jsx)(ri().Z,{open:e,onDismiss:Au,render:()=>(0,te.jsxs)("div",{style:s.container,children:[(0,te.jsx)("div",{style:s.descriptionText,children:t?(0,te.jsx)(p()._H,{id:"manageActiveSessions.confirmationModal.singleDevice",defaultMessage:"You have been logged out from {br}<bold>{deviceName}</bold>",values:{deviceName:n,bold:l,br:(0,te.jsx)("br",{})}}):o?(0,te.jsx)(p()._H,{id:"manageActiveSessions.confirmationModal.withEmail",defaultMessage:"You have been logged out from other active sessions for <bold>{email}</bold>",values:{email:o,bold:l}}):(0,te.jsx)(p()._H,{id:"manageActiveSessions.confirmationModal.withoutEmail",defaultMessage:"You have been logged out from other active sessions for your account."})}),(0,te.jsx)(kn().Z,{style:s.button,onClick:Au,isLarge:!0,children:(0,te.jsx)(p()._H,{id:"manageActiveSessions.confirmationModal.close",defaultMessage:"Close"})})]})})}function Du(){const e=(0,o().O7)(),t=(0,a().Kw)(ju),{device:n}=e,s=(0,r().yK)((e=>({container:{display:"flex",flexDirection:"column",gap:8,alignItems:"center",justifyContent:"center"},descriptionText:{textAlign:"center"},button:{color:"dark"===e.mode?Vo().ZP.whiteWithAlpha(.81):e.mediumTextColor,fontSize:12,fontWeight:500,padding:"6px 8px",height:28},personBadgeExclamationMarkIcon:{fill:e.icon.tertiary,width:24,height:24,marginBottom:8}})),[]),l=(0,i.useCallback)((async()=>{const n=(0,te.jsxs)("div",{style:s.container,children:[(0,Ul()._)(s.personBadgeExclamationMarkIcon),(0,te.jsx)(p()._H,{id:"manageActiveSessions.handleLogoutAllDevicesClick.confirmationMessage",defaultMessage:"<bold>Log out of all devices?</bold>",values:{bold:e=>(0,te.jsx)("span",{style:{fontWeight:g().Ue.semibold},children:e})}})]}),i=(0,te.jsx)(p()._H,{id:"manageActiveSessions.handleLogoutAllDevicesClick.acceptLabel",defaultMessage:"Log out"}),o=(0,te.jsx)(p()._H,{id:"manageActiveSessions.handleLogoutAllDevicesClick.cancelLabel",defaultMessage:"Cancel"}),a=(0,te.jsx)("div",{style:s.descriptionText,children:(0,te.jsx)(p()._H,{id:"manageActiveSessions.handleLogoutAllDevicesClick.description",defaultMessage:"You will be logged out of all other active sessions on other devices <bold>except</bold> this one.",values:{bold:e=>(0,te.jsx)("span",{style:{fontWeight:g().Ue.semibold},children:e})}})}),{accept:r}=await x().gt({message:n,acceptLabel:i,cancelLabel:o,description:a});if(!r)return;v().AQ(e),await Z().callApi({eventName:"logoutActiveSessions",environment:e,data:{}});const l=t.allDevices.filter((e=>{var n;return e.id===(null===(n=t.currentDevice)||void 0===n?void 0:n.id)}));ju.setDevices(l,!0),Pu(!1)}),[t,e,s]),d=(0,te.jsx)(p()._H,{id:"manageActiveSessions.logOutAllDevices.title",defaultMessage:"Log out of all devices"}),c=(0,te.jsx)(p()._H,{id:"manageActiveSessions.logOutAllDevices.label",defaultMessage:"Log out of all other active sessions on other devices besides this one."});return(0,te.jsx)(En().Z,{type:"custom",isMobile:n.isMobile,disableSettingsItemClick:!0,title:d,caption:c,customButton:(0,te.jsx)(xt().Z,{onClick:l,style:s.button,ariaLabel:"Log out of all devices",children:(0,te.jsx)(p()._H,{id:"manageActiveSessions.logOutAllDevices.button",defaultMessage:"Log out of all devices"})})})}function Lu(e){const t=(0,a().Kw)(ju),n=(0,a().VK)((()=>ju),[]),s=(0,o().O7)(),l=(0,r().yK)((e=>({button:{color:"dark"===e.mode?Vo().ZP.whiteWithAlpha(.81):e.mediumTextColor,fontSize:12,fontWeight:500,padding:"6px 8px",height:28,display:"inline-flex",margin:0},container:{display:"flex",flexDirection:"column",alignItems:"center",gap:2,justifyContent:"center"},descriptionText:{textAlign:"center"},confirmationIcon:{fill:e.icon.tertiary,width:24,height:24,marginBottom:8}})),[]),d=(0,i.useCallback)((e=>(0,te.jsx)(Ou,{...e})),[]),c=(0,i.useCallback)((async e=>{const i=t.allDevices.find((t=>t.id===e)),o=(0,te.jsx)(d,{deviceName:(null==i?void 0:i.device_name)??"Unknown Device",containerStyles:l.container,iconStyles:l.confirmationIcon}),a=(0,te.jsx)(p()._H,{id:"manageActiveSessions.handleLogoutDeviceClick.acceptLabel",defaultMessage:"Log out"}),r=(0,te.jsx)(p()._H,{id:"manageActiveSessions.handleLogoutDeviceClick.cancelLabel",defaultMessage:"Cancel"}),c=(0,te.jsx)("div",{style:l.descriptionText,children:(0,te.jsx)(p()._H,{id:"manageActiveSessions.handleLogoutDeviceClick.description",defaultMessage:"You will be logged out of this device."})}),{accept:u}=await x().gt({message:o,acceptLabel:a,cancelLabel:r,description:c});if(u&&i){v().AQ(s),await Z().callApi({eventName:"logoutSingleDeviceSession",environment:s,data:{deviceId:e}});const o=t.allDevices.filter((t=>t.id!==e));n.setDevices(o),Pu(!0,i.device_name)}}),[n,t,s,l,d]);return e.isCurrentDevice?null:(0,te.jsx)(xt().Z,{onClick:()=>c(e.deviceId),style:l.button,ariaLabel:"Log out of this device",children:(0,te.jsx)(p()._H,{id:"manageActiveSessions.logOutSingleDevice.button",defaultMessage:"Log out"})})}function Ou(e){return(0,te.jsxs)("div",{style:e.containerStyles,children:[(0,Ul()._)(e.iconStyles),(0,te.jsx)(p()._H,{id:"manageActiveSessions.handleLogoutDeviceClick.confirmationMessage",defaultMessage:"<bold>Log out of {deviceName}?</bold>",values:{bold:e=>(0,te.jsx)("span",{style:{fontWeight:g().Ue.semibold},children:e}),deviceName:e.deviceName}})]})}function Hu(e){const t=(0,p().YB)(),n=(0,i.useMemo)((()=>e.isCurrentDevice?t.formatMessage({id:"manageActiveSessions.lastSeenTime.currentDevice",defaultMessage:"Now"}):function(e,t){const n=Number(e);return ba().$b(n,ai().locale,t)}(e.lastSeenTime,t)),[e.lastSeenTime,t,e.isCurrentDevice]);return(0,te.jsx)(me().Z,{className:"notranslate",isSmall:!0,children:n})}function Vu(e){const t=(0,i.useMemo)((()=>{return""===(t=e.location)?"Unknown Location":t;var t}),[e.location]);return(0,te.jsx)(me().Z,{isSmall:!0,children:(0,te.jsx)(p()._H,{id:"manageActiveSessions.location",defaultMessage:"{location}",values:{location:t}})})}function Uu(e){const{deviceName:t,isCurrentDevice:n}=e,o=(0,r().yK)((e=>({container:{display:"flex",alignItems:"center",gap:8,marginLeft:4},stack:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start"},thisDeviceBadge:{color:e.blueColor,fontSize:11,fontWeight:400,margin:0}})),[]),s=(0,i.useMemo)((()=>function(e){const t=e.toLowerCase(),n={mac:"Mac OS X",macintosh:"Mac OS X",windows:"Windows Device",iphone:"iPhone",ipad:"iPad",ipod:"iPod",android:"Android Device",cros:"Chrome OS",ubuntu:"Ubuntu",linux:"Linux",unknown:"Unknown Device",motorola:"Motorola Device",intel:"Mac OS X"},i=Object.keys(n);for(const o of i)if(t.includes(o))return n[o];return e}(t)),[t]);return(0,te.jsxs)("div",{style:o.container,children:[Eu({deviceName:t}),(0,te.jsxs)("div",{style:o.stack,children:[(0,te.jsx)(me().Z,{className:"notranslate",style:{fontSize:12,fontWeight:400},children:(0,te.jsx)(p()._H,{id:"manageActiveSessions.deviceName",defaultMessage:"{deviceName}",values:{deviceName:s}})}),n?(0,te.jsx)("p",{style:o.thisDeviceBadge,children:(0,te.jsx)(p()._H,{id:"manageActiveSessions.deviceName.currentDeviceBadge",defaultMessage:"This Device"})}):void 0]})]})}function Eu(e){const t=(0,r().yK)((e=>({iconStyle:{width:24,height:24,fill:e.lightIconColor}})),[]),n={intel:()=>(0,hu().h)(t.iconStyle),iphone:()=>fu(t.iconStyle),ipad:()=>fu(t.iconStyle),pixel:()=>fu(t.iconStyle),unknown:()=>(0,yu().L)(t.iconStyle),windows:()=>(0,hu().h)(t.iconStyle)},i=e.deviceName.toLowerCase();for(const o in n)if(i.includes(o))return(0,te.jsx)(te.Fragment,{children:n[o]()});return(0,te.jsx)(te.Fragment,{children:n.unknown()})}function Nu(e){const t=(0,r().yK)((e=>({loadMoreButton:{display:"flex",alignItems:"center",height:30,whiteSpace:"break-spaces",borderBottom:`1px solid ${e.lightDividerColor}`,color:e.lightTextColor,fontSize:14,opacity:.7},arrowIcon:{width:14,height:14,marginLeft:4,marginRight:6,fill:e.lightIconColor}})),[]),n=e.deviceRows.length<=3,i=e.deviceRows.length===e.storeState.allDevices.length;return(0,te.jsxs)(ue().Z,{style:t.loadMoreButton,onClick:n?Ru:Zu,children:[i?null:n?(0,pu().M)(t.arrowIcon):(0,gu().Z)(t.arrowIcon),(0,te.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginLeft:n?4:8,fontSize:12},children:n?(0,te.jsx)(p()._H,{id:"manageActiveSessions.loadMoreButton",defaultMessage:"{numberOfDevicesLeft, plural, =0 {All devices loaded} one {Load # more device} other {Load # more devices}}",values:{numberOfDevicesLeft:e.storeState.allDevices.length-e.deviceRows.length}}):(0,te.jsx)(p()._H,{id:"manageActiveSessions.retractLoadMoreButton",defaultMessage:"Show fewer devices"})})]})}var Fu=()=>n(435669),Ku=()=>n(173694),zu=()=>n(365581),Wu=()=>n(359792),qu=()=>n(323143),Gu=()=>n(317493),Yu=()=>n(275678);function $u(e){let{status:t,numMfaSettings:n,onReloadSettings:s,regenerateBackupCodes:l}=e;const d=(0,o().O7)(),[{rootStateMachine:c,settingsStateMachine:u,totpStateMachine:m,smsStateMachine:f,backupCodesStateMachine:h}]=(0,i.useState)((()=>{const e=new(Ku().r)(d),t={totpStore:new(Yu().o),settingsStore:new(qu().c),smsStore:new(Gu().J),backupCodesStore:new(Fu().y),rootStore:new(Wu().M)};return{mfaService:e,rootStateMachine:new(Wu().i)(t.rootStore),settingsStateMachine:new(qu().W)(t.settingsStore,e),totpStateMachine:new(Yu().V)(t.totpStore,e),smsStateMachine:new(Gu().F)(t.smsStore,e),backupCodesStateMachine:new(Fu().o)(t.backupCodesStore,e)}})),y=d.device.isMobile,v=(0,r().yK)((e=>({configureButton:{marginTop:y?12:0,marginBottom:y?4:0},regenerateBackupCodesBadge:{fontWeight:g().Ue.medium,letterSpacing:0,fontSize:11,color:e.blueColor,background:"light"===e.mode?Vo().ZP.diffBackground:"rgba(35, 131, 226, 0.2)",whiteSpace:"nowrap",width:"fit-content"}})),[y]),x=(0,a().VK)((()=>ct().default.state.highlightedSetting===ct().R.TwoStepVerification),[]);return(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(En().Z,{type:"custom",customButton:(0,te.jsx)("div",{style:{marginTop:12},children:(0,te.jsx)(xt().Z,{isLarge:!0,onClick:()=>{!function(e){let{rootStateMachine:t,settingsStateMachine:n}=e;t.rootShowSettings({refresh:!1,startConfirmIdentity:()=>n.settingsConfirmIdentityForSettings()})}({rootStateMachine:c,settingsStateMachine:u})},style:v.configureButton,disabled:"disabled"===t,children:"on"===t?(0,te.jsx)(p()._H,{id:"profileSettings.accountSecuritySection.changeTwoStepVerificationSettingButton.label",defaultMessage:"Change verification methods"}):(0,te.jsx)(p()._H,{id:"profileSettings.accountSecuritySection.addTwoStepVerificationSettingButton.label",defaultMessage:"Add verification method"})})}),isMobile:!1,title:(0,te.jsx)(p()._H,{id:"profileSettings.accountSecuritySection.twoStepVerificationSetting.label",defaultMessage:"2-step verification"}),caption:"on"===t?(0,te.jsx)(p()._H,{id:"profileSettings.accountSecuritySection.twoStepVerificationSetting.settingConfigured.message",defaultMessage:"You have {numMfaSettings} verification methods turned on.",values:{numMfaSettings:n}}):(0,te.jsx)(p()._H,{id:"profileSettings.accountSecuritySection.twoStepVerificationSetting.message",defaultMessage:"Add an additional layer of security to your account during login."}),tooltipLabel:(0,te.jsx)(p()._H,{id:"profileSettings.accountSecuritySection.twoStepVerificationSettingButton.tooltip",defaultMessage:"A password is required to enable 2-step verification"}),disableTooltip:"disabled"!==t,badge:l&&(0,te.jsx)(Dc().Z,{style:v.regenerateBackupCodesBadge,content:(0,te.jsx)(p()._H,{id:"profileSettings.accountSecuritySection.twoStepVerificationSetting.regenerateBackupCodes.badge",defaultMessage:"Regenerate backup codes"})}),shouldHighlight:x}),(0,te.jsx)(zu().Z,{onReloadSettings:s,rootStateMachine:c,settingsStateMachine:u,totpStateMachine:m,smsStateMachine:f,backupCodesStateMachine:h})]})}var Xu=()=>n(113419),Qu=()=>n(761362),Ju=()=>n(418372);const ep=H().default.createClass(!1,{name:"IsEducationStore"});const tp=function(e){let{spaceProfileSettingsStore:t,isEducationPlan:n}=e;const s=(0,p().YB)(),r=(0,o().O7)(),l=(0,a().qz)(void 0,ep);return(0,i.useEffect)((()=>{!async function(){const{currentUserStore:e,currentUserSettingsStore:n,currentUserRootStore:i,currentSpaceStore:o}=et().default.state;if(e&&n){const i=t.getValueForUser(e,n,s);i&&t.setState({...t.state,...i})}if(i&&o){const e=await(0,Zc().Ok)({environment:r,userRootStore:i}),t=o.canAdmin()&&(e||[]).some((e=>"student"===e));l.setState(t)}await j().E(r,t)}()}),[r,s,l,t]),(0,i.useEffect)((()=>()=>{ct().default.state.highlightedSetting&&ct().default.setState({...ct().default.state,highlightedSetting:void 0})}),[]),(0,a().VK)((()=>Ot().default.state.online),[])?(0,te.jsx)(dp,{spaceProfileSettingsStore:t,isEducationPlan:n,isEducationStore:l}):(0,te.jsx)(np,{})};function np(){return(0,te.jsx)(Rt().ZP,{children:(0,te.jsx)(me().Z,{isSmall:!0,style:{textAlign:"center"},children:(0,te.jsx)(p()._H,{defaultMessage:"Please go online to manage your profile.",id:"profileSettings.offline.message"})})})}function ip(e){const{emailDomainForUser:t,spaceProfileSettingsStore:n,areProfileEditsDisabled:i}=e,o=(0,a().VK)((()=>{var e;return Boolean(null===(e=n.state.emailDomainSettings)||void 0===e?void 0:e.isDomainVerified)}),[n]);return(0,te.jsxs)(ae().Z,{large:!0,divider:"full",children:[o?(0,te.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",margin:"0 0 8px"},children:[(0,te.jsx)(Dc().Z,{style:{fontWeight:g().Ue.medium,letterSpacing:0,whiteSpace:"nowrap",width:"fit-content",margin:0},content:(0,te.jsx)(p()._H,{id:"profileSettings.myProfile.managedByline",defaultMessage:"Your account is managed by {domain}",values:{domain:t}})}),i?(0,te.jsx)(pe().Z,{render:e=>(0,te.jsx)("div",{...e,children:(0,Js().D)({marginLeft:4,height:14,width:14,opacity:.5})}),renderTooltip:()=>(0,te.jsx)(p()._H,{id:"profileSettings.myProfile.managedByTooltip",defaultMessage:"Contact your organization's administrator to change your profile information."})}):null]}):null,(0,te.jsx)(p()._H,{id:"profileSettings.myProfile.title",defaultMessage:"My profile"})]})}function op(e){let{spaceProfileSettingsStore:t}=e;const n=(0,r().yK)((e=>({allDevicesHelpIcon:{height:14,width:15,color:e.icon.tertiary},headerContainer:{display:"flex",alignItems:"center",gap:4}})),[]),[i,o]=(0,a().VK)((()=>{var e;return[(null===(e=t.state.emailDomainSettings)||void 0===e?void 0:e.settings)??{},t.state.emailDomainSettings]}),[t]);return(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(ae().Z,{large:!0,divider:"full",children:(0,te.jsx)(p()._H,{id:"profileSettings.support.title",defaultMessage:"Support"})}),(0,te.jsx)(Ju().Z,{emailDomainSettings:i}),(0,te.jsx)(ii().Z,{size:18,isHidden:!0}),(0,te.jsx)(Bc().Z,{userEmailDomainSettings:o}),(0,te.jsx)(ii().Z,{size:14,isHidden:!0}),(0,te.jsx)(ae().Z,{large:!0,divider:"full",children:(0,te.jsxs)("div",{style:n.headerContainer,children:[(0,te.jsx)(p()._H,{id:"profileSettings.devices.title",defaultMessage:"Devices"}),(0,te.jsx)(pe().Z,{renderTooltip:()=>(0,te.jsx)(p()._H,{id:"profileSettings.devices.tooltip",defaultMessage:"All devices logged in to your Notion account."}),render:e=>(0,te.jsx)("div",{...e,children:(0,Us().m)(n.allDevicesHelpIcon)}),placement:he().Placement.Top,alignment:he().Alignment.Start})]})}),(0,te.jsx)(Du,{}),(0,te.jsx)(ii().Z,{size:20,isHidden:!0}),(0,te.jsx)(ku,{})]})}function sp(e,t){v().He(t),Rc().cR({environment:t,onStart:()=>function(e){e.setState({...e.state,uploadingProfilePhoto:!0})}(e),bucket:"public",onError:()=>function(e){e.setState({...e.state,uploadingProfilePhoto:!1}),x().UW((0,te.jsx)(p()._H,{id:"profileSettings.profilePhotoSection.uploadProfilePhotoError.message",defaultMessage:"Upload failed."}))}(e),onComplete:n=>function(e,t,n){const i=e[0];t.setState({...t.state,profilePhoto:i,uploadingProfilePhoto:!1}),w().createAndCommit({userAction:"SpaceProfileSettings.handleUploadComplete",environment:n,canUndo:!0,perform:e=>{const{currentUserStore:t}=et().default.state;t&&h().A({userStore:t,data:{profilePhoto:i},transaction:e})}})}(n,e,t),accept:"image/*"})}function ap(e){const t=(0,o().O7)(),{userName:n,emailDomainForUser:i,areProfileEditsDisabled:s,spaceProfileSettingsStore:a}=e;return s?(0,te.jsx)(pe().Z,{renderTooltip:()=>(0,te.jsx)(p()._H,{id:"editableUserAvatar.profilePhoto.disabledByOrganization",defaultMessage:"Profile editing has been disabled by your organization, {emailDomain}",values:{emailDomain:i}}),placement:he().Placement.Bottom,alignment:he().Alignment.Center,render:e=>(0,te.jsx)("div",{...e,style:{opacity:.4},children:(0,te.jsx)(Dn().Z,{disabled:!0,value:n})})}):(0,te.jsx)(Dn().Z,{value:n,onChange:e=>function(e,t,n){const i=e.target.value;v().O$(n,{from:t.state.name,to:i}),t.setState({...t.state,name:i}),w().createAndCommit({userAction:"SpaceProfileSettings.handleNameChange",environment:n,canUndo:!0,perform:e=>{const{currentUserStore:t}=et().default.state;t&&h().A({userStore:t,data:{name:i},transaction:e})}})}(e,a,t)})}function rp(e){let{currentUserValue:t,spaceProfileSettingsStore:n,isEducationPlan:s,isEducationStore:r}=e;const l=(0,o().O7)(),d=(0,a().VK)((()=>n.state.accountSettings),[n]),c=(0,a().VK)((()=>{var e;return Boolean(null===(e=n.state.emailDomainSettings)||void 0===e||null===(e=e.settings)||void 0===e?void 0:e.prevent_profile_edits)}),[n]),u=(0,i.useCallback)((()=>{j().E(l,n)}),[l,n]),m=(0,a().Kw)(r),g=(0,Mn().E)("enable-passkey-settings-on-mobile");return(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(ae().Z,{large:!0,divider:"full",children:(0,te.jsx)(p()._H,{id:"profileSettings.accountSecurity.title",defaultMessage:"Account security"})}),(0,te.jsx)(Kc,{userValue:t,hasEducationPlan:m,areProfileEditsDisabled:c}),(0,te.jsx)(ii().Z,{size:18,isHidden:!0}),(0,te.jsx)(Qu().Z,{hasPassword:d.hasPassword,hasPasswordActions:d.canConfigurePassword,isEducationPlan:s,samlEnforced:d.isSamlEnforced,email:t.email,isError:Boolean(d.error),onReloadSettings:u,mfaStatus:d.mfaStatus}),(0,te.jsx)(ii().Z,{size:18,isHidden:!0}),(0,te.jsx)($u,{status:d.mfaStatus,numMfaSettings:d.numMfaSettings,onReloadSettings:u,regenerateBackupCodes:d.regenerateBackupCodes}),g&&(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(ii().Z,{size:18,isHidden:!0}),(0,te.jsx)(Xu().Z,{samlEnforced:d.isSamlEnforced,hasPasskeys:d.hasPasskeys})]})]})}function lp(e){const{userName:t,currentUserStore:n,currentUserValue:i,spaceProfileSettingsStore:s,isEducationPlan:r,isEducationStore:l}=e,d=(0,o().O7)(),c=(0,p().YB)(),u=(0,a().VK)((()=>(0,wa().N5)(n,c)),[n,c]),m=(0,Hl().Gd)(i.email),g=(0,a().VK)((()=>{var e;return Boolean(null===(e=s.state.emailDomainSettings)||void 0===e||null===(e=e.settings)||void 0===e?void 0:e.prevent_profile_edits)}),[s]),f=(0,a().VK)((()=>Ot().default.state.online),[]);return(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(ip,{spaceProfileSettingsStore:s,emailDomainForUser:m,areProfileEditsDisabled:g}),(0,te.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,te.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,te.jsx)(wa().ZP,{size:60,avatarType:u,isOffline:!f,onUploadProfilePhoto:()=>sp(s,d),onRemoveProfilePhoto:()=>function(e,t){e.setState({...e.state,profilePhoto:void 0}),w().createAndCommit({userAction:"SpaceProfileSettings.handleRemoveProfilePhoto",environment:t,canUndo:!0,perform:e=>{const{currentUserStore:t}=et().default.state;t&&h().A({userStore:t,data:{profilePhoto:null},transaction:e})}})}(s,d),disabled:g,disabledTooltipMessage:(0,te.jsx)(p()._H,{id:"editableUserAvatar.profilePhoto.disabledByOrganization",defaultMessage:"Profile editing has been disabled by your organization, {emailDomain}",values:{emailDomain:m}})}),(0,te.jsxs)("div",{style:{marginLeft:20,width:250},children:[(0,te.jsx)(ka().Z,{children:(0,te.jsx)(p()._H,{id:"profileSettings.personalInfoSection.nameInput.label",defaultMessage:"Preferred name"})}),(0,te.jsx)(ap,{spaceProfileSettingsStore:s,userName:t,emailDomainForUser:m,areProfileEditsDisabled:g})]})]}),(0,te.jsx)(cp,{avatarType:u,spaceProfileSettingsStore:s,areProfileEditsDisabled:g})]}),(0,te.jsx)(ii().Z,{size:48,isHidden:!0}),(0,te.jsx)(rp,{spaceProfileSettingsStore:s,isEducationPlan:r,isEducationStore:l,currentUserValue:i}),(0,te.jsx)(ii().Z,{size:12,isHidden:!0}),(0,te.jsx)(op,{spaceProfileSettingsStore:s})]})}function dp(e){let{spaceProfileSettingsStore:t,isEducationPlan:n,isEducationStore:i}=e;const o=(0,a().VK)((()=>et().default.state.currentUserStore),[]),s=(0,a().VK)((()=>o?o.getValue():void 0),[o]),r=(0,a().VK)((()=>t.state.name),[t]);return o&&s?(0,te.jsx)(Rt().ZP,{children:(0,te.jsx)(lp,{spaceProfileSettingsStore:t,isEducationPlan:n,isEducationStore:i,currentUserStore:o,currentUserValue:s,userName:r})}):null}function cp(e){const{avatarType:t,spaceProfileSettingsStore:n,areProfileEditsDisabled:i}=e,s=(0,r().Fg)(),a=(0,o().O7)(),l=(0,Mn().E)("enable_add_notion_face_in_setting");return"photo"===t.type||i||l?"photo"!==t.type&&!i&&l?(0,te.jsx)("div",{style:{color:s.mediumIconColor,fontSize:14,marginTop:8},children:(0,te.jsx)(p()._H,{id:"editableUserAvatar.profilePhoto.addPhotoWithNotionFace",defaultMessage:"<addphoto>Add photo</addphoto> or <createface>Create your portrait</createface>",values:{addphoto:e=>(0,te.jsx)(ui().Z,{color:s.blueColor,disableUnderline:!0,disableHover:!0,onClick:()=>{sp(n,a)},children:e}),createface:e=>(0,te.jsx)(ui().Z,{color:s.blueColor,disableUnderline:!0,disableHover:!0,external:!0,href:"https://faces.notion.com",children:e})}})}):!i&&l?(0,te.jsx)("div",{style:{color:s.mediumIconColor,fontSize:14,marginTop:8},children:(0,te.jsx)(p()._H,{id:"editableUserAvatar.profilePhoto.addNotionFace",defaultMessage:"<createface>Create your portrait</createface>",values:{createface:e=>(0,te.jsx)(ui().Z,{color:s.blueColor,disableUnderline:!0,disableHover:!0,external:!0,href:"https://faces.notion.com",children:e})}})}):null:(0,te.jsx)("div",{style:{color:s.mediumIconColor,fontSize:14,marginTop:8},children:(0,te.jsx)(p()._H,{id:"editableUserAvatar.profilePhoto.addPhoto",defaultMessage:"Add photo"})})}var up=()=>n(912732),pp=()=>n(467806),mp=()=>n(663773),gp=()=>n(363832),fp=()=>n(550649),hp=()=>n(819792),yp=()=>n(512220),vp=()=>n(122479),xp=()=>n(186647),bp=()=>n(202937);function Sp(e){let{spaceStore:t,spacePermissionsSettingsStore:n}=e;const{canUseGroups:i,canEditGroups:o,isSpaceStoreDefined:s}=function(e){let{spaceStore:t}=e;const n=(0,yp().VJ)(),{canEditMembership:i,isSpaceStoreDefined:o}=(0,a().VK)((()=>({canEditMembership:t.canEditMembership(),isSpaceStoreDefined:t.isDefined()})),[t]),s=(0,a().VK)((()=>i&&n),[i,n]);return{canUseGroups:n,canEditMembership:i,canEditGroups:s,isSpaceStoreDefined:o}}({spaceStore:t}),r=(0,a().VK)((()=>0!==(0,bn().az)()),[]),l=(0,a().VK)((()=>0!==(0,vp().eL)()),[]);return s?(0,te.jsxs)("div",{children:[i?!l&&(0,te.jsx)(me().Z,{isMultiline:!0,style:{marginTop:17,marginBottom:17},children:r?(0,te.jsx)(p()._H,{id:"spacePermissionsSettings.groupsTab.captionWithTeamsV2",defaultMessage:"Set up groups to streamline page permissions from the share menu and manage teamspace members in bulk."}):(0,te.jsx)(p()._H,{id:"spacePermissionsSettings.groupsTab.caption",defaultMessage:"Set up groups to conveniently control page permissions from the share menu."})}):(0,te.jsx)(ti().Z,{subscriptionTier:"plus",from:"permission_groups",icon:xp().x,title:(0,te.jsx)(p()._H,{id:"spacePermissionsSettings.groupsTab.upgradeTitle",defaultMessage:"Upgrade to create groups"}),caption:(0,te.jsx)(p()._H,{id:"spacePermissionsSettings.groupsTab.upgradeCaption.plus",defaultMessage:"Upgrade to the Plus Plan to set up groups and control permissions from the share menu."}),learnMoreRoute:"guides.groups"}),(0,te.jsx)(bp().Z,{spaceStore:t,permissionsSettingsStore:n,canEdit:o,containerMarginTop:i?0:void 0})]}):null}var Mp=()=>n(779522),jp=()=>n(890085),Cp=()=>n(677181),wp=()=>n(913813);class kp extends H().default{getInitialState(){return{isModalOpen:!1,guests:[],handleClickDecline:()=>{}}}}const _p=new kp;function Tp(e){let{guest:t,spaceStore:n,shouldDisableInteraction:s}=e;const{environment:l,styles:d,isSubscribed:c,handleConvertToMemberClick:u,handleRemoveClick:m}=function(e){let{guest:t,spaceStore:n,shouldDisableInteraction:s}=e;const l=(0,r().yK)((e=>({container:{width:"100%",display:"flex",justifyContent:"flex-end",opacity:s?.5:1},button:{display:"flex",width:24,height:24,justifyContent:"center",alignItems:"center",gap:10,paddingLeft:0,paddingRight:0},buttonIcon:{width:20,height:20,fill:e.icon.secondary},upgradeButton:{padding:"0px 6px 0px 8px",width:257},removeMenuDivider:{paddingTop:4,paddingBottom:4,borderTop:`1px solid ${e.stroke.secondary}`},removeButton:{width:257,padding:"0px 6px 0px 8px",color:jp().Lr[e.mode].red},upgradeIcon:{width:17,height:17}})),[s]),d=(0,a().VK)((()=>{const e=_t().subscriptionDataStoreInstance.state;return Boolean(e&&Zc().YK(e))}),[]),c=(0,o().O7)(),u=(0,i.useCallback)((()=>{const e=J().U6.createChildStore(n,{table:R().KJ,id:t.userId}),i=d?"read_and_write":"editor";Cp().s({environment:c,guestUserStore:e,role:i,store:n,isConvertToAdmin:!d,origin:"guest_pages_popup"})}),[d,n,c,t.userId]),p=(0,i.useCallback)((()=>{_p.setState({..._p.state,isModalOpen:!0,guests:[t.userId],handleClickDecline:()=>{up().b4(c,{from:"guest",button_name:"confirm_in_dialog",count:1});const e=J().U6.createChildStore(n,{table:R().KJ,id:t.userId});Cp().w({environment:c,guestUserStore:e,store:n})}})}),[n,c,t]);return{environment:c,styles:l,isSubscribed:d,handleConvertToMemberClick:u,handleRemoveClick:p}}({guest:t,spaceStore:n,shouldDisableInteraction:s});return(0,te.jsx)("div",{style:d.container,children:(0,te.jsx)(ra().ZP,{popupType:ra().Z4.Popup,renderOrigin:e=>(0,te.jsx)(Bt().Z,{style:d.button,...e,children:(0,te.jsx)(te.Fragment,{children:(0,wp().O)(d.buttonIcon)})}),onClick:()=>{up().b4(l,{from:"guest",button_name:"actions"})},disabled:s,render:()=>(0,te.jsx)("div",{children:(0,te.jsx)(Qo().Z,{type:Qo().i.Vertical,initialFocus:void 0,sections:[{key:"upgrade",render:e=>(0,te.jsx)(es().Z,{...e}),items:[{key:"upgrade",render:e=>(0,te.jsx)(Yo().Z,{...e,buttonStyle:d.upgradeButton,icon:(0,bl().l)(d.upgradeIcon),title:(0,te.jsx)(p()._H,{id:"peopleSectionguestsTab.upgradeToAdmin",defaultMessage:"Upgrade to {isSubscribed, select, true {member} other {admin}}",values:{isSubscribed:c}})}),action:()=>{u(),up().b4(l,{from:"guest",button_name:"upgrade"})}}]},{key:"remove",render:e=>(0,te.jsx)(es().Z,{...e,style:d.removeMenuDivider}),items:[{key:"remove",render:e=>(0,te.jsx)(Yo().Z,{...e,buttonStyle:d.removeButton,icon:(0,Ks().V)(d.upgradeIcon),title:(0,te.jsx)(p()._H,{id:"peopleSectionguestsTab.remove",defaultMessage:"Remove from workspace"})}),action:()=>{m(),up().b4(l,{from:"guest",button_name:"remove"})}}]}]})})})})}const Ip=(0,gt().IU)("peopleFillXmark",{viewBox:"0 0 20 20",svg:(0,te.jsx)("path",{d:"M12.2061 6.75684C12.0374 6.75684 11.8916 6.69531 11.7686 6.57227C11.6501 6.44922 11.5908 6.30339 11.5908 6.13477C11.5908 5.96615 11.6523 5.82259 11.7754 5.7041L13.5801 3.89258L11.7754 2.08105C11.6523 1.96257 11.5908 1.81901 11.5908 1.65039C11.5908 1.47721 11.6501 1.33366 11.7686 1.21973C11.8916 1.10124 12.0374 1.04199 12.2061 1.04199C12.3838 1.04199 12.5319 1.10352 12.6504 1.22656L14.4551 3.02441L16.2803 1.21973C16.4033 1.09212 16.5469 1.02832 16.7109 1.02832C16.8841 1.02832 17.0299 1.08984 17.1484 1.21289C17.2669 1.33138 17.3262 1.47493 17.3262 1.64355C17.3262 1.80762 17.2646 1.95117 17.1416 2.07422L15.3369 3.89258L17.1348 5.69727C17.2624 5.82031 17.3262 5.96615 17.3262 6.13477C17.3262 6.30339 17.2646 6.44922 17.1416 6.57227C17.0231 6.69531 16.8796 6.75684 16.7109 6.75684C16.5332 6.75684 16.3828 6.69303 16.2598 6.56543L14.4551 4.76758L12.6572 6.56543C12.5387 6.69303 12.3883 6.75684 12.2061 6.75684ZM1.89746 13.2441C1.51465 13.2441 1.21387 13.1576 0.995117 12.9844C0.776367 12.8112 0.666992 12.5742 0.666992 12.2734C0.666992 11.8314 0.799154 11.3688 1.06348 10.8857C1.33236 10.4027 1.71745 9.94922 2.21875 9.52539C2.72461 9.10156 3.33301 8.75749 4.04395 8.49316C4.75488 8.22884 5.55241 8.09668 6.43652 8.09668C7.3252 8.09668 8.125 8.22884 8.83594 8.49316C9.54688 8.75749 10.153 9.10156 10.6543 9.52539C11.1602 9.94922 11.5475 10.4027 11.8164 10.8857C12.0853 11.3688 12.2197 11.8314 12.2197 12.2734C12.2197 12.5742 12.1104 12.8112 11.8916 12.9844C11.6729 13.1576 11.3721 13.2441 10.9893 13.2441H1.89746ZM6.44336 6.87988C5.94661 6.87988 5.48861 6.74544 5.06934 6.47656C4.65462 6.20768 4.31966 5.84538 4.06445 5.38965C3.8138 4.93392 3.68848 4.4235 3.68848 3.8584C3.68848 3.30241 3.8138 2.80111 4.06445 2.35449C4.31966 1.90332 4.6569 1.54557 5.07617 1.28125C5.49544 1.01693 5.95117 0.884766 6.44336 0.884766C6.9401 0.884766 7.39811 1.01465 7.81738 1.27441C8.23665 1.53418 8.57161 1.88965 8.82227 2.34082C9.07747 2.78743 9.20508 3.28874 9.20508 3.84473C9.20508 4.41439 9.07747 4.92936 8.82227 5.38965C8.57161 5.84538 8.23665 6.20768 7.81738 6.47656C7.39811 6.74544 6.9401 6.87988 6.44336 6.87988Z"})});function Pp(e){let{isModalOpen:t,handleDismiss:n,handleConfirm:i,title:o,description:s,ctaText:a}=e;const{styles:l}=function(){const e=(0,r().yK)((e=>({modal:{width:300,overflow:"hidden",borderRadius:5},container:{display:"flex",padding:"20px 20px 12px 20px",flexDirection:"column",width:299,justifyContent:"center",alignItems:"flex-start",gap:20},iconAndTitle:{display:"flex",flexDirection:"column",alignItems:"center",gap:9,width:"100%"},iconContainer:{display:"flex",justifyContent:"center",alignItems:"center",width:36,height:36},icon:{color:e.icon.secondary,fontSize:24,fontWeight:510},title:{color:e.text.primary,textAlign:"center",fontSize:17,fontWeight:590,width:"100%",wordBreak:"break-word"},description:{color:e.text.secondary,textAlign:"center"},footer:{display:"flex",flexDirection:"column",gap:8,alignItems:"center",width:"100%"},declineButton:{height:32,padding:"0 12px",borderRadius:6,width:"100%",textAlign:"center",alignItems:"center",justifyContent:"center",background:jp().Lr[e.mode].red},declineButtonHovered:{background:e.tint.uiRedPressed},declineText:{fontWeight:590,color:e.text.contrastPrimary},cancelButton:{display:"flex",height:24,padding:"0px 6px",justifyContent:"center",alignItems:"center",gap:4,textAlign:"center"}})),[]);return{styles:e}}();return(0,Ke().Z)({shouldPreserveTextSelection:!0,shouldPreserveBlockSelection:!0,shouldRestoreSelection:!0}),(0,te.jsx)(ri().Z,{open:t,innerStyle:l.modal,showCloseIcon:!0,onDismiss:n,render:()=>(0,te.jsx)(Cs().Z,{capture:!0,allowEsc:!0,render:()=>(0,te.jsxs)("div",{style:l.container,children:[(0,te.jsxs)("div",{style:l.iconAndTitle,children:[(0,te.jsx)("div",{style:l.iconContainer,children:(0,te.jsx)("div",{style:l.icon,children:Ip({width:24,height:24})})}),(0,te.jsx)("div",{style:l.title,children:o})]}),(0,te.jsx)("div",{style:l.description,children:s}),(0,te.jsxs)("div",{style:l.footer,children:[(0,te.jsx)(Bt().Z,{style:l.declineButton,onClick:()=>{i(),n()},hoveredStyle:l.declineButtonHovered,children:(0,te.jsx)("div",{style:l.declineText,children:a})}),(0,te.jsx)(Bt().Z,{style:l.cancelButton,onClick:n,children:(0,te.jsx)("div",{children:(0,te.jsx)(p()._H,{id:"BulkDeclineConfirmationDialog.cancel",defaultMessage:"Cancel"})})})]})]})})})}function Ap(){const{isModalOpen:e,handleClickDecline:t,handleDismiss:n,guests:s,firstGuestName:r}=function(){const{isModalOpen:e,guests:t,handleClickDecline:n}=(0,a().VK)((()=>{const{isModalOpen:e,guests:t,handleClickDecline:n}=_p.state;return{isModalOpen:e,guests:t,handleClickDecline:n}}),[]),s=(0,p().YB)(),r=(0,a().VK)((()=>{const{currentSpaceStore:e}=et().default.state;if(0===t.length||!e)return;return J().U6.createChildStore(e,{table:R().KJ,id:t[0]}).getDisplayName(s)}),[t,s]),l=(0,o().O7)(),d=(0,i.useCallback)((()=>{_p.reset(),up().b4(l,{from:"guest",button_name:"confirm_in_dialog",count:t.length})}),[l,t]);return{isModalOpen:e,guests:t,firstGuestName:r,handleClickDecline:n,handleDismiss:d}}();return 0===s.length?null:(0,te.jsx)(Pp,{isModalOpen:e,handleDismiss:n,handleConfirm:t,title:(0,te.jsx)(p()._H,{id:"GuestBulkRemoveConfirmationDialog.title",defaultMessage:"Remove {numberOfGuests, plural, one {{firstGuestName}} other {{numberOfGuests} guests}} from the workspace?",values:{numberOfGuests:s.length,firstGuestName:r}}),description:(0,te.jsx)(p()._H,{id:"GuestBulkRemoveConfirmationDialog.description",defaultMessage:"They will lose access to all shared pages. To add them as a guest in the future, a request must be submitted, or an admin must invite them."}),ctaText:(0,te.jsx)(p()._H,{id:"GuestBulkRemoveConfirmationDialog.remove",defaultMessage:"Remove"})})}var Rp=()=>n(528514),Zp=()=>n(231219);function Bp(e){let{guestUserId:t,pageIds:n}=e;const{menuListItems:i,styles:s}=function(e){let{guestUserId:t,pageIds:n}=e;const i=(0,r().yK)((()=>({container:{width:256},chevron:{marginLeft:8,width:16,height:16}})),[]),s=(0,o().O7)(),l=(0,p().YB)(),d=(0,a().VK)((()=>n.map((e=>{var n;const i=new(J().G)(s,{table:ac().iU,id:e}),o=null===(n=i.getPermissionItems().find((e=>"user_permission"===e.type&&e.user_id===t)))||void 0===n?void 0:n.role;return{key:e,render:e=>(0,te.jsx)(Zp().Z,{...e,store:i,placeholder:(0,te.jsx)(p()._H,{id:"guestPagesPopup.privatePagePlaceholder",defaultMessage:"Private page"}),caption:o?l.formatMessage((0,Rp().kD)(o,"block")):void 0}),action:()=>{const e=(0,qd().ZP)({store:i,fullyQualified:!1,pageVisitSource:Wd().tY.LinkInPage});Ka().c4({environment:s,url:e,openInNew:"tab"})}}}))),[n,t,s,l]);return{menuListItems:d,styles:i}}({guestUserId:t,pageIds:n});return(0,te.jsx)("div",{style:s.container,children:(0,te.jsx)(Qo().Z,{type:Qo().i.Vertical,initialFocus:void 0,sections:[{key:"pages",render:e=>(0,te.jsx)(es().Z,{...e}),items:i}]})})}function Dp(e){let{from:t,guestUserId:n,pageIds:i,shouldDisableInteraction:s}=e;const{styles:a}=function(e){let{shouldDisableInteraction:t}=e;const n=(0,r().yK)((e=>({button:{opacity:t?.5:1,color:e.text.secondary},chevron:{width:10,marginLeft:4,fill:e.lightIconColor}})),[t]);return{styles:n}}({shouldDisableInteraction:s}),l=(0,o().O7)(),d=i.length;return 0===d?(0,te.jsx)(Bt().Z,{disabled:!0,style:a.button,children:(0,te.jsx)(p()._H,{id:"peopleSectionguestsTab.GuestPagesButton.noPages",defaultMessage:"No pages"})}):(0,te.jsx)(ra().ZP,{popupType:ra().Z4.Popup,onClick:()=>{up().b4(l,{from:t,button_name:"open_pages"})},renderOrigin:e=>(0,te.jsxs)(Bt().Z,{...e,style:a.button,children:[(0,te.jsx)(p()._H,{id:"GuestPagesButton.button",defaultMessage:"{numOfPages, plural, one {{numOfPages} page} other {{numOfPages} pages}}",values:{numOfPages:d}}),(0,cd().i)(a.chevron)]}),disabled:s,render:()=>(0,te.jsx)(Bp,{pageIds:i,guestUserId:n})})}function Lp(e){let{guest:t,shouldDisableInteraction:n}=e;return(0,te.jsx)(Dp,{pageIds:t.guestPageIds,guestUserId:t.userId,shouldDisableInteraction:n,from:"guest"})}const Op=10,Hp=10,Vp=5;var Up=()=>n(708071),Ep=()=>n(983653);function Np(e){let{userId:t,spaceStore:o,restorationStatus:s,isInternalGuest:l,isForSuggestionsTable:d}=e;const c=(0,p().YB)().formatMessage({id:"peopleSettings.userCell.guest",defaultMessage:"Guest"}),{name:u,email:m,userStore:f,styles:h}=function(e){let{userId:t,spaceStore:n,isForSuggestionsTable:i}=e;const o=(0,r().yK)((e=>({container:{display:"flex",alignItems:"center",fontSize:g().JB.UIRegular.desktop,width:"100%",justifyContent:"space-between"},titleContainer:{maxWidth:i?210:163},userAvatarWrapper:{position:"relative"},userAvatarIcon:{position:"absolute",left:17,top:18},userName:{height:17,alignSelf:"stretch",fontSize:g().JB.UIRegular.desktop,fontStyle:"normal",fontWeight:510,lineHeight:"18px",...g().Yu},userEmail:{height:17,alignSelf:"stretch",fontSize:g().JB.UISmall.desktop,fontStyle:"normal",fontWeight:400,lineHeight:"15px",color:e.text.secondary,...g().Yu},nameContainer:{display:"flex",alignItems:"center",gap:10,marginTop:4,marginBottom:4}})),[i]),s=(0,p().YB)(),l=J().U6.createChildStore(n,{table:R().KJ,id:t}),{name:d,email:c}=(0,a().VK)((()=>({name:l.getDisplayName(s),email:l.getEmail()})),[l,s]);return{name:d,email:c,styles:o,userStore:l}}({userId:t,spaceStore:o,isForSuggestionsTable:d}),[y,v]=(0,i.useState)(!1);return(0,te.jsxs)("div",{style:h.container,children:[(0,te.jsxs)("div",{style:h.nameContainer,children:[(0,te.jsxs)("div",{style:h.userAvatarWrapper,children:[(0,te.jsx)(ws().Z,{userStore:f,size:28}),l&&(0,te.jsx)(pe().Z,{style:{width:250},textWrap:!0,placement:he().Placement.Right,alignment:he().Alignment.Start,render:e=>(0,te.jsx)("div",{...e,style:h.userAvatarIcon,children:(0,te.jsx)(yt().y,{iconGroup:Ep().t,colorName:"secondary",variantName:"mini"})}),renderTooltip:()=>(0,te.jsxs)("div",{children:[(0,te.jsx)(vt().q,{styleName:"Body-12px/Medium",colorName:"contrastPrimary",children:(0,te.jsx)(p()._H,{id:"userCell.internalGuest.tooltip.title",defaultMessage:"Using an email domain associated with your workspace"})}),(0,te.jsx)(vt().q,{styleName:"Body-12px/Medium",colorName:"contrastSecondary",children:(0,te.jsx)(p()._H,{id:"userCell.internalGuest.tooltip.description",defaultMessage:"You'll see this icon for users who have a workspace owner email domain, verified domain, or allowed email domain"})})]})})]}),(0,te.jsxs)("div",{style:h.titleContainer,children:[(0,te.jsx)("div",{style:h.userName,title:d?m:u,children:d?m:u}),(0,te.jsx)("div",{style:h.userEmail,title:d?c:m,children:d?c:m}),s&&(0,te.jsx)(n(490040).Z,{spaceStore:o,restorationStatus:s,didAttemptRecovery:y})]})]}),!y&&"canBeRestored"===(null==s?void 0:s.status)&&(0,te.jsx)(n(582060).Z,{spaceId:o.id,userStore:f,onSubmit:()=>v(!0)})]})}function Fp(e){let{guests:t,spaceStore:n,domainFilterValues:s,internalDomains:l}=e;const{environment:d,tableStyles:c,styles:u,sortState:m,setSortState:g,selectedRowIds:f,setSelectedRowIds:h,rows:y,searchQuery:v,onClickApprove:x,onClickDecline:b,isApproveButtonLoading:S,canEditMembership:M,columnRenderInfo:j,isSubscribed:C,shouldHideActions:w,shouldShowRequest:k,canAdmin:_,guestsCount:T,shouldShowLoadMore:I,onLoadMore:P}=function(e){let{guests:t,spaceStore:n,domainFilterValues:s,internalDomains:l}=e;const d=(0,nn().tA)({spaceStore:n}),c=(0,yp().IH)({spaceStore:n}),u=(0,o().O7)(),m=(0,r().yK)((e=>({titleContainer:{display:"flex",alignItems:"center",gap:6,alignSelf:"stretch",fontSize:"14px",fontStyle:"normal",fontWeight:510,height:32},titleNumber:{color:e.text.tertiary},emptyMessage:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",borderBottom:`1px solid ${e.stroke.primary}`},emptyDivider:{height:1,backgroundColor:e.stroke.secondary},headerContainer:{display:"flex",justifyContent:d&&c?"space-between":"flex-end"},actionsContainer:{display:"flex",borderRadius:6,border:`1px solid ${e.stroke.primary}`,boxShadow:"0px 2px 12px 0px rgba(29, 27, 22, 0.06)"},actionLeftButton:{borderRadius:"4px 0px 0px 4px",paddingLeft:10,paddingRight:0,height:30},buttonContainerApprove:{display:"flex",padding:"0px 12px 0px 0px",justifyContent:"center",alignItems:"center",gap:4,alignSelf:"stretch",color:e.text.uiBluePrimary},buttonContainerDecline:{display:"flex",padding:"0px 12px 0px 10px",justifyContent:"center",alignItems:"center",gap:4,alignSelf:"stretch",color:jp().Lr[e.mode].red},buttonIcon:{width:20,height:20,paddingTop:1,flexDirection:"column",justifyContent:"center",alignItems:"center",gap:10},buttonText:{fontSize:14,fontWeight:510},buttonDivider:{width:1,background:e.stroke.secondary},actionRightButton:{borderRadius:"0px 4px 4px 0px",paddingLeft:0,paddingRight:0,height:30}})),[d,c]),g=(0,yp().eA)({spaceStore:n}),f=(0,a().VK)((()=>g?[Kp,zp,Wp]:[Kp]),[g]),h=(0,r().yK)((e=>({...(0,ce().bE)({columnRenderInfo:f,theme:e,containerMarginTop:0})})),[f]),y=(0,a().VK)((()=>f[0]),[f]),[v,x]=(0,i.useState)({column:y,sortAscending:!0}),[b,S]=(0,i.useState)([]),M=(0,p().YB)(),j=(0,a().VK)((()=>Up().default.state.searchQuery),[]),C=(0,a().VK)((()=>t.map((e=>{const t=J().U6.createChildStore(n,{table:R().KJ,id:e.userId}),i=t.getEmail(),o=null==i?void 0:i.split("@")[1],s=l.some((e=>e.url===o));return{spaceStore:n,user:e,email:i,userName:t.getDisplayName(M),id:e.userId,shouldDisableInteraction:b.includes(e.userId),isClickable:!1,isInternalGuest:s}})).filter((e=>{var t;if(j){var n;if(!((null===(n=e.email)||void 0===n?void 0:n.includes(j))||e.userName.includes(j)))return!1}if(!s||0===s.length)return!0;const i=null===(t=e.email)||void 0===t?void 0:t.split("@")[1];return null==s?void 0:s.some((e=>"other"===e?!(null!=l&&l.some((e=>e.url===i))):i===e))}))),[n,t,M,j,b,l,s]),w=(0,a().VK)((()=>{const e=_t().subscriptionDataStoreInstance.state;return Boolean(e&&Zc().YK(e))}),[]),k=(0,i.useCallback)((()=>{up().b4(u,{from:"guest",button_name:"bulk_upgrade",count:b.length}),b.forEach((e=>{const t=J().U6.createChildStore(n,{table:R().KJ,id:e}),i=w?"read_and_write":"editor";Cp().s({environment:u,guestUserStore:t,role:i,store:n,isConvertToAdmin:!w,origin:"guest_actions"}),S([])}))}),[b,u,w,n]),_=(0,i.useCallback)((()=>{up().b4(u,{from:"guest",button_name:"bulk_remove",count:b.length}),_p.setState({..._p.state,isModalOpen:!0,guests:b,handleClickDecline:()=>{up().b4(u,{from:"guest",button_name:"confirm_in_dialog",count:b.length}),b.forEach((e=>{const t=J().U6.createChildStore(n,{table:R().KJ,id:e});Cp().w({environment:u,guestUserStore:t,store:n})})),S([])}})}),[b,u,n]),T=!C.some((e=>b.includes(e.id))),[I,P]=(0,i.useState)(Hp),A=(0,i.useCallback)((()=>{P(I+Hp)}),[I]),Z=I<C.length,B=C.slice(0,I);return{environment:u,tableStyles:h,styles:m,sortState:v,setSortState:x,selectedRowIds:b,setSelectedRowIds:S,rows:B,searchQuery:j,onClickApprove:k,onClickDecline:_,isApproveButtonLoading:!1,canEditMembership:g,columnRenderInfo:f,isSubscribed:w,shouldHideActions:T,shouldShowRequest:d,canAdmin:c,guestsCount:C.length,shouldShowLoadMore:Z,onLoadMore:A}}({guests:t,spaceStore:n,domainFilterValues:s,internalDomains:l});return(0,te.jsxs)("div",{children:[(0,te.jsxs)("div",{style:u.headerContainer,children:[k&&_&&(0,te.jsxs)("div",{style:u.titleContainer,children:[(0,te.jsx)("span",{children:(0,te.jsx)(p()._H,{id:"peopleSectionguestsTab.activeguests.title",defaultMessage:"Active"})}),(0,te.jsx)("span",{style:u.titleNumber,children:T})]}),f.length>0&&!w&&(0,te.jsxs)("div",{style:u.actionsContainer,children:[(0,te.jsx)(Bt().Z,{style:u.actionLeftButton,onClick:x,isLoading:S,children:(0,te.jsxs)("div",{style:u.buttonContainerApprove,children:[(0,te.jsx)("div",{style:u.buttonIcon,children:(0,bl().l)({width:20,height:16})}),(0,te.jsx)("div",{style:u.buttonText,children:(0,te.jsx)(p()._H,{id:"spaceSettings.peopleSection.guestsTable.bulkUpgrade",defaultMessage:"Upgrade {numberOfRequests, plural, one {1 guest} other {{numberOfRequests} guests}} to {isSubscribed, select, true {member} other {admin}}",values:{numberOfRequests:f.length,isSubscribed:C}})})]})}),(0,te.jsx)("div",{style:u.buttonDivider}),(0,te.jsx)(Bt().Z,{style:u.actionRightButton,onClick:b,children:(0,te.jsxs)("div",{style:u.buttonContainerDecline,children:[(0,te.jsx)("div",{style:{...u.buttonIcon,paddingTop:3},children:(0,Ks().V)({width:20,height:16})}),(0,te.jsx)("div",{style:u.buttonText,children:(0,te.jsx)(p()._H,{id:"spaceSettings.peopleSection.guestsTable.bulkDecline",defaultMessage:"Remove from workspace"})})]})})]})]}),(0,te.jsxs)("div",{style:{marginTop:k&&_?4:-1},children:[(0,te.jsx)(ce().Dp,{allowHorizontalScroll:M,setStickyHeaderRow:!0,columnRenderInfo:j,rows:qp(y,m),showRowBorders:!0,hideHeaderRowPadding:!0,sortState:m,onSortStateChanged:g,loadMoreMethod:I?{type:"button",onLoadMore:P}:void 0,renderNoRowsComponent:()=>(0,te.jsx)(me().Z,{isSmall:!0,style:u.emptyMessage,children:v?(0,te.jsx)(p()._H,{id:"peopleSectionGuestsTab.emptySearch",defaultMessage:"No search results"}):(0,te.jsx)(p()._H,{id:"peopleSectionGuestsTab.emptyRow",defaultMessage:"No guests"})}),styles:c,multiselect:M?{header:{isDisabled:0===y.length,isSelected:f.length>0&&f.length===y.length,onClick:()=>{f.length===y.length?(h([]),up().pZ(d,{from:"guests",action:"deselect_all",row_count:f.length})):(h(y.map((e=>e.id))),up().pZ(d,{from:"guests",action:"select_all",row_count:y.length}))}},row:{getDisabledState:()=>!1,getSelectedState:e=>f.includes(e.id),onClick:e=>{h((t=>t.includes(e.id)?(up().pZ(d,{from:"guests",action:"deselect_row",row_count:1}),t.filter((t=>t!==e.id))):(up().pZ(d,{from:"guests",action:"select_row",row_count:1}),t.concat(e.id))))}}}:void 0}),(0,te.jsx)(Ap,{})]})]})}const Kp={id:"user",headerTitle:(0,te.jsx)("div",{style:{fontSize:14},children:(0,te.jsx)(p()._H,{id:"peopleSectionGuestsTab.user",defaultMessage:"User"})}),renderCell:e=>(0,te.jsx)(Np,{userId:e.user.userId,spaceStore:e.spaceStore,isInternalGuest:e.isInternalGuest}),widthData:{width:210},sortable:!0},zp={id:"access",headerTitle:(0,te.jsx)("div",{style:{paddingLeft:8,fontSize:14},children:(0,te.jsx)(p()._H,{id:"peopleSectionGuestsTab.access",defaultMessage:"Access"})}),renderCell:e=>(0,te.jsx)(Lp,{guest:e.user,shouldDisableInteraction:e.shouldDisableInteraction}),widthData:{width:180},sortable:!1},Wp={id:"actions",headerTitle:(0,te.jsx)(te.Fragment,{}),renderCell:e=>(0,te.jsx)(Tp,{guest:e.user,spaceStore:e.spaceStore,shouldDisableInteraction:e.shouldDisableInteraction}),widthData:{width:300},sortable:!1};function qp(e,t){let{sortAscending:n}=t;const i=m().MR(e,(e=>e.email));return n||i.reverse(),i}var Gp=()=>n(754918),Yp=()=>n(24746),$p=()=>n(624778);const Xp=(0,gt().IU)("checkMarkShield",{viewBox:"0 0 10 11",svg:(0,te.jsx)("path",{d:"M5.08789 10.4893C5.03906 10.4893 4.9821 10.4795 4.91699 10.46C4.85514 10.4437 4.79167 10.4193 4.72656 10.3867C4.02669 10.0189 3.43262 9.68522 2.94434 9.38574C2.45931 9.08952 2.06868 8.79655 1.77246 8.50684C1.47624 8.21712 1.25977 7.90462 1.12305 7.56934C0.989583 7.23405 0.922852 6.84831 0.922852 6.41211V2.8623C0.922852 2.52051 0.986328 2.26335 1.11328 2.09082C1.24023 1.91829 1.45345 1.77018 1.75293 1.64648C1.84733 1.60742 1.98405 1.55534 2.16309 1.49023C2.34212 1.42188 2.54069 1.35026 2.75879 1.27539C2.98014 1.19727 3.19987 1.12077 3.41797 1.0459C3.63932 0.971029 3.83789 0.904297 4.01367 0.845703C4.19271 0.787109 4.32617 0.743164 4.41406 0.713867C4.52148 0.681315 4.63379 0.655273 4.75098 0.635742C4.87142 0.616211 4.98372 0.606445 5.08789 0.606445C5.19206 0.606445 5.30436 0.616211 5.4248 0.635742C5.5485 0.655273 5.66243 0.681315 5.7666 0.713867C5.85449 0.743164 5.98633 0.787109 6.16211 0.845703C6.34115 0.904297 6.53971 0.971029 6.75781 1.0459C6.97591 1.12077 7.19564 1.19727 7.41699 1.27539C7.63835 1.35026 7.83854 1.42025 8.01758 1.48535C8.19661 1.55046 8.33333 1.60417 8.42773 1.64648C8.72721 1.77018 8.9388 1.91829 9.0625 2.09082C9.18945 2.26335 9.25293 2.52051 9.25293 2.8623V6.41211C9.25293 6.84831 9.1862 7.23568 9.05273 7.57422C8.92253 7.91276 8.70931 8.23014 8.41309 8.52637C8.12012 8.81934 7.73112 9.11393 7.24609 9.41016C6.76107 9.70638 6.16374 10.0319 5.4541 10.3867C5.389 10.4193 5.32389 10.4437 5.25879 10.46C5.19694 10.4795 5.13997 10.4893 5.08789 10.4893ZM4.55078 7.73047C4.6582 7.73047 4.75586 7.70605 4.84375 7.65723C4.9349 7.60514 5.01302 7.5319 5.07812 7.4375L7.34863 3.9707C7.3877 3.90885 7.41862 3.84538 7.44141 3.78027C7.46745 3.71517 7.48047 3.65169 7.48047 3.58984C7.48047 3.4401 7.4235 3.31641 7.30957 3.21875C7.19889 3.12109 7.07031 3.07227 6.92383 3.07227C6.73177 3.07227 6.57064 3.17643 6.44043 3.38477L4.54102 6.40723L3.68652 5.3623C3.62142 5.28092 3.55306 5.22233 3.48145 5.18652C3.41309 5.15072 3.33333 5.13281 3.24219 5.13281C3.0957 5.13281 2.96875 5.18652 2.86133 5.29395C2.75391 5.39811 2.7002 5.52507 2.7002 5.6748C2.7002 5.74642 2.71322 5.81478 2.73926 5.87988C2.7653 5.94499 2.80599 6.01172 2.86133 6.08008L4.00391 7.44727C4.08203 7.54167 4.16504 7.61328 4.25293 7.66211C4.34082 7.70768 4.4401 7.73047 4.55078 7.73047Z"})}),Qp=(0,gt().IU)("globe4",{viewBox:"0 0 12 12",svg:(0,te.jsx)("path",{d:"M5.99512 10.5156C5.64355 10.5156 5.31315 10.4001 5.00391 10.1689C4.69792 9.94108 4.42773 9.62207 4.19336 9.21191C3.96224 8.7985 3.77995 8.31673 3.64648 7.7666C3.51302 7.21647 3.44629 6.6224 3.44629 5.98438C3.44629 5.3431 3.51302 4.7474 3.64648 4.19727C3.77995 3.64388 3.96224 3.16211 4.19336 2.75195C4.42448 2.33854 4.69466 2.01628 5.00391 1.78516C5.31315 1.55404 5.64355 1.43848 5.99512 1.43848C6.34993 1.43848 6.68197 1.55404 6.99121 1.78516C7.30046 2.01628 7.57064 2.33854 7.80176 2.75195C8.03613 3.16211 8.21842 3.64388 8.34863 4.19727C8.47884 4.7474 8.54395 5.3431 8.54395 5.98438C8.54395 6.6224 8.47721 7.21647 8.34375 7.7666C8.21354 8.31673 8.03125 8.7985 7.79688 9.21191C7.56576 9.62207 7.29557 9.94108 6.98633 10.1689C6.68034 10.4001 6.34993 10.5156 5.99512 10.5156ZM5.99512 2.15137C5.76725 2.15137 5.5459 2.25553 5.33105 2.46387C5.11947 2.6722 4.92904 2.95703 4.75977 3.31836C4.59375 3.67643 4.46191 4.08496 4.36426 4.54395C4.2666 5.00293 4.21777 5.48307 4.21777 5.98438C4.21777 6.48242 4.2666 6.95931 4.36426 7.41504C4.46191 7.87077 4.59375 8.27767 4.75977 8.63574C4.92904 8.99382 5.11947 9.27702 5.33105 9.48535C5.5459 9.69368 5.76725 9.79785 5.99512 9.79785C6.22624 9.79785 6.44759 9.69368 6.65918 9.48535C6.87402 9.27702 7.06445 8.99382 7.23047 8.63574C7.39974 8.27767 7.5332 7.87077 7.63086 7.41504C7.72852 6.95931 7.77734 6.48242 7.77734 5.98438C7.77734 5.48307 7.72852 5.00293 7.63086 4.54395C7.5332 4.08496 7.39974 3.67643 7.23047 3.31836C7.06445 2.95703 6.87402 2.6722 6.65918 2.46387C6.44759 2.25553 6.22624 2.15137 5.99512 2.15137ZM5.61914 1.50684H6.37598V10.4229H5.61914V1.50684ZM5.99512 7.47363C6.51921 7.47363 7.01562 7.51432 7.48438 7.5957C7.95312 7.67708 8.37142 7.79427 8.73926 7.94727C9.1071 8.10026 9.40007 8.2793 9.61816 8.48438L9.04199 8.96289C8.84017 8.8099 8.58464 8.67806 8.27539 8.56738C7.9694 8.45671 7.62272 8.3737 7.23535 8.31836C6.84798 8.25977 6.43457 8.23047 5.99512 8.23047C5.55892 8.23047 5.14714 8.25977 4.75977 8.31836C4.3724 8.3737 4.02409 8.45671 3.71484 8.56738C3.40885 8.67806 3.15332 8.8099 2.94824 8.96289L2.37207 8.48438C2.59342 8.2793 2.88802 8.10026 3.25586 7.94727C3.6237 7.79427 4.04199 7.67708 4.51074 7.5957C4.97949 7.51432 5.47428 7.47363 5.99512 7.47363ZM10.4189 5.59375V6.35059H1.57617V5.59375H10.4189ZM5.99512 4.5C5.47428 4.5 4.97949 4.45931 4.51074 4.37793C4.04199 4.29329 3.6237 4.17611 3.25586 4.02637C2.88802 3.87337 2.59342 3.69434 2.37207 3.48926L2.94824 3.00586C3.15332 3.16211 3.41048 3.29557 3.71973 3.40625C4.02897 3.51367 4.37728 3.59668 4.76465 3.65527C5.15202 3.71387 5.56217 3.74316 5.99512 3.74316C6.43457 3.74316 6.84798 3.71387 7.23535 3.65527C7.62272 3.59668 7.9694 3.51367 8.27539 3.40625C8.58464 3.29557 8.84017 3.16211 9.04199 3.00586L9.61816 3.48926C9.40007 3.69434 9.1071 3.87337 8.73926 4.02637C8.37142 4.17611 7.95312 4.29329 7.48438 4.37793C7.01562 4.45931 6.51921 4.5 5.99512 4.5ZM5.99512 11.1309C5.28874 11.1309 4.62467 10.9958 4.00293 10.7256C3.38118 10.4587 2.83268 10.0876 2.35742 9.6123C1.88216 9.1403 1.50944 8.59342 1.23926 7.97168C0.972331 7.34993 0.838867 6.68424 0.838867 5.97461C0.838867 5.26823 0.972331 4.60417 1.23926 3.98242C1.50944 3.36068 1.88053 2.81217 2.35254 2.33691C2.8278 1.86165 3.3763 1.49056 3.99805 1.22363C4.62305 0.953451 5.28874 0.818359 5.99512 0.818359C6.7015 0.818359 7.36556 0.953451 7.9873 1.22363C8.6123 1.49056 9.16081 1.86165 9.63281 2.33691C10.1081 2.81217 10.4808 3.36068 10.751 3.98242C11.0212 4.60417 11.1562 5.26823 11.1562 5.97461C11.1562 6.68424 11.0212 7.34993 10.751 7.97168C10.4808 8.59342 10.1081 9.1403 9.63281 9.6123C9.16081 10.0876 8.61393 10.4587 7.99219 10.7256C7.37044 10.9958 6.70475 11.1309 5.99512 11.1309ZM5.99512 10.1396C6.56803 10.1396 7.10514 10.0306 7.60645 9.8125C8.10775 9.5944 8.55046 9.29492 8.93457 8.91406C9.31868 8.52995 9.61816 8.08724 9.83301 7.58594C10.0511 7.08138 10.1602 6.54427 10.1602 5.97461C10.1602 5.40495 10.0511 4.86947 9.83301 4.36816C9.61816 3.86361 9.31868 3.4209 8.93457 3.04004C8.55046 2.65592 8.10612 2.35482 7.60156 2.13672C7.10026 1.91862 6.56478 1.80957 5.99512 1.80957C5.42546 1.80957 4.88835 1.91862 4.38379 2.13672C3.88249 2.35482 3.43978 2.65592 3.05566 3.04004C2.6748 3.4209 2.37533 3.86361 2.15723 4.36816C1.94238 4.86947 1.83496 5.40495 1.83496 5.97461C1.83496 6.54427 1.94238 7.08138 2.15723 7.58594C2.37533 8.08724 2.6748 8.52995 3.05566 8.91406C3.43978 9.29492 3.88249 9.5944 4.38379 9.8125C4.88835 10.0306 5.42546 10.1396 5.99512 10.1396Z"})});var Jp=()=>n(167393),em=()=>n(489434);const tm=(0,p().vU)({infoTitle:{id:"spacePermissionsSettings.guestsTab.internalGuestBanner.title",defaultMessage:"Find teammates more easily by filtering to your workspace's email domains"},infoDescription:{id:"spacePermissionsSettings.guestsTab.internalGuestBanner.description",defaultMessage:"Upgrade these guests to members for better collaboration and reduced page-by-page permissions."},emailDomainTooltip:{defaultMessage:"Your workspace’s email domains include allowed email domains, verified domains, and workspace owner email domains.",id:"spacePermissionsSettings.guestsTab.internalGuestBanner.tooltip"},overLimitTitle:{id:"spacePermissionsSettings.guestsTab.internalGuestBanner.overLimit.title",defaultMessage:"Your workspace is over the {limit}-guest limit"},upsellDescription:{id:"spacePermissionsSettings.guestsTab.internalGuestBanner.overLimit.upselldescription",defaultMessage:"Find teammates who are currently guests by filtering to your workspace's email domains and upgrade them to members to continue collaborating. To get more guest seats, <upgradelink>upgrade your plan</upgradelink> or <saleslink>reach out to sales</saleslink>."},contactSalesDescription:{id:"spacePermissionsSettings.guestsTab.internalGuestBanner.overLimit.contactSales.description",defaultMessage:"Find teammates who are currently guests by filtering to your workspace's email domains and upgrade them to members to continue collaborating. To get more guest seats, <saleslink>reach out to sales</saleslink>."},salesAssistedDescription:{id:"spacePermissionsSettings.guestsTab.internalGuestBanner.overLimit.salesAssisted.description",defaultMessage:"Find teammates who are currently guests by filtering to your workspace's email domains and upgrade them to members to continue collaborating. To get more guest seats, reach out to your account manager."},nonAdminTooltip:{id:"spacePermissionsSettings.guestsTab.internalGuestBanner.overLimit.nonAdmin.tooltip",defaultMessage:"New users can continue to be added as members. To resume adding guests, contact your workspace owner to upgrade or remove existing guests from your workspace."}}),nm={warning_upsell:{iconGroup:Gp().G,tint:"yellow",label:tm.overLimitTitle,description:tm.upsellDescription,tooltip:tm.emailDomainTooltip},warning_contact_sales:{iconGroup:Gp().G,tint:"yellow",label:tm.overLimitTitle,description:tm.contactSalesDescription,tooltip:tm.emailDomainTooltip},warning_sales_assisted:{iconGroup:Gp().G,tint:"yellow",label:tm.overLimitTitle,description:tm.salesAssistedDescription,tooltip:tm.emailDomainTooltip},warning_nonadmin:{iconGroup:Gp().G,tint:"yellow",label:tm.overLimitTitle,tooltip:tm.nonAdminTooltip},info:{iconGroup:Ep().t,tint:"gray",label:tm.infoTitle,description:tm.infoDescription,tooltip:tm.emailDomainTooltip}};function im(e){let{spaceStore:t,internalDomains:n,domainFilterValues:i,setDomainFilterValues:o}=e;const s=(0,yp().IH)({spaceStore:t}),a=n.length>0;if(!a)return null;const r=a&&s,l=(0,te.jsx)(om,{spaceStore:t});return r||l?(0,te.jsxs)(ht().jX,{padding:"16px 0px",gap:16,children:[l,r&&(0,te.jsx)(sm,{internalDomains:n,domainFilterValues:i??[],setDomainFilterValues:o})]}):null}function om(e){let{spaceStore:t}=e;const n=function(e){let{spaceStore:t}=e;const n=(0,o().O7)(),i=(0,yp().IH)({spaceStore:t}),s=n.currentUser.id,a=t.id,r=(0,An().oo)({name:"internal_guests",spaceId:a,userId:s,amount:0});if(!r)return null;return(0,wn().V5)(r,{available:()=>i?{...nm.info,messageValues:{}}:null,upsell:e=>{let{limit:t,upsell:n}=e;return"product"===n.type?{...nm.warning_upsell,messageValues:{limit:t.total,saleslink:e=>(0,te.jsx)(ui().Z,{onClick:()=>(0,jt().nx)({initialQuestion:"manage_guests",openedFrom:"people_guest_limit_banner"}),children:e}),upgradelink:e=>(0,te.jsx)(ui().Z,{onClick:()=>{ct().default.setState({...ct().default.state,currentTab:"plans",defaultSubtab:void 0})},children:e})}}:"contact_sales"===n.type?{...nm.warning_contact_sales,messageValues:{limit:t.total,saleslink:e=>(0,te.jsx)(ui().Z,{onClick:()=>(0,jt().nx)({initialQuestion:"manage_guests",openedFrom:"people_guest_limit_banner"}),children:e})}}:"contact_account_manager"===n.type?{...nm.warning_sales_assisted,messageValues:{limit:t.total}}:(0,gn().t1)(n)},blocked:e=>{let{limit:t}=e;return{...nm.warning_nonadmin,messageValues:{limit:t.total}}}})}({spaceStore:t});if(!n)return null;const i=(0,te.jsx)(pe().Z,{style:{width:250},textWrap:!0,renderTooltip:()=>(0,te.jsx)(p()._H,{...n.tooltip}),originGap:6,placement:he().Placement.Bottom,alignment:he().Alignment.Start,render:e=>(0,te.jsx)("div",{style:{paddingLeft:3,display:"inline-block",verticalAlign:"text-bottom"},...e,children:(0,Us().m)({width:14})})});return(0,te.jsx)(Yp().r,{children:(0,te.jsx)(em().j,{iconGroup:n.iconGroup,display:"inline",tint:n.tint,label:(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(p()._H,{...n.label,values:n.messageValues}),n.description?void 0:i]}),description:n.description&&(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(p()._H,{...n.description,values:n.messageValues}),i]})})})}function sm(e){let{internalDomains:t,domainFilterValues:n,setDomainFilterValues:i}=e;const o=[...t.map((e=>({key:e.url,value:`${e.url}`,title:am({domain:`${e.url}`})}))),{key:"other",value:"other",title:am({domain:"other"})}];return(0,te.jsx)(Jp().F,{pillIcon:$p().p,pillTitle:n?(0,te.jsx)(p()._H,{id:"spacePermissionsSettings.guestsTab.internalDomainFilter.filtered",defaultMessage:"Email domain: {domainFilter}",values:{domainFilter:n.join(", ")}}):(0,te.jsx)(p()._H,{id:"spacePermissionsSettings.guestsTab.internalDomainFilter.placeholder",defaultMessage:"Email domain"}),selectedItems:n,setSelectedItems:e=>{i(e)},items:o})}function am(e){let{domain:t}=e;return(0,te.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:["other"===t?(0,te.jsx)(p()._H,{defaultMessage:"Other",id:"spacePermissionsSettings.guestsTab.internalDomainFilter.other"}):`@${t}`,(0,te.jsx)("div",{style:{paddingLeft:5},children:"other"===t?Qp({width:14}):Xp({width:14})})]})}var rm=()=>n(703976),lm=()=>n(216851),dm=()=>n(392192);function cm(e){let{request:t,shouldDisableInteraction:n,requestType:s,handleApprove:a,handleDecline:l}=e;const d=function(e){let{shouldDisableInteraction:t}=e;return(0,r().yK)((e=>({approveButton:{background:e.outlineBlueButtonHoveredBackground,color:e.blueColor,fontWeight:510,fontSize:14,borderRadius:4,paddingLeft:10,paddingRight:10},declineButton:{marginRight:10,borderRadius:4,paddingLeft:10,paddingRight:10,color:e.text.secondary},container:{opacity:t?.5:1,display:"flex",width:"100%",justifyContent:"flex-end"}})),[t])}({shouldDisableInteraction:n}),[c,u]=(0,i.useState)(!1),m=(0,o().O7)(),g=(0,i.useCallback)((()=>{up().b4(m,{from:`${s}_request`,button_name:"decline"}),l(t)}),[m,s,t,l]),f=(0,i.useCallback)((async()=>{u(!0),up().b4(m,{from:`${s}_request`,button_name:"approve"}),await a(t),u(!1)}),[m,t,s,a]);return(0,te.jsxs)("div",{style:d.container,children:[(0,te.jsx)("div",{children:(0,te.jsx)(Bt().Z,{style:d.declineButton,onClick:g,disabled:n,children:(0,te.jsx)(p()._H,{id:"spaceSettings.peopleSection.requestsTable.Decline",defaultMessage:"Decline"})})}),(0,te.jsx)("div",{children:(0,te.jsx)(Bt().Z,{style:d.approveButton,onClick:f,isLoading:c,disabled:n,children:(0,te.jsx)(p()._H,{id:"spaceSettings.peopleSection.requestsTable.approve",defaultMessage:"Approve"})})})]})}function um(e){const{isModalOpen:t,handleClickDecline:n,handleClickDismiss:s,requestType:r,requests:l}=e,d=function(e,t,n){const s=(0,o().O7)();return(0,i.useCallback)((()=>{n(),up().b4(s,{from:"member"===e?"member_request":"guest_request",button_name:"dismiss_in_dialog",count:t.length})}),[n,s,t,e])}(r,l,s),c=(0,p().YB)(),u=(0,a().VK)((()=>{var e;return null===(e=l[0])||void 0===e||null===(e=e.createdByActorsWithReason[0])||void 0===e?void 0:e.actor.getDisplayName(c)}),[l,c]),m=(0,a().VK)((()=>{var e;return null===(e=l[0])||void 0===e?void 0:e.forActor.email}),[l]);return 0===l.length?null:(0,te.jsx)(Pp,{isModalOpen:t,handleDismiss:d,handleConfirm:()=>n(l),title:(0,te.jsx)(p()._H,{id:"RequestBulkDeclineConfirmationDialog.title",defaultMessage:"Decline {numberOfRequests, plural, one {{requestType} request for {firstRequestEmail}} other {{numberOfRequests} {requestType} requests}}?",values:{numberOfRequests:l.length,requestType:r,firstRequestEmail:m}}),description:(0,te.jsx)(p()._H,{id:"RequestBulkDeclineConfirmationDialog.description",defaultMessage:"{numberOfRequests, plural, one {To add them as a {requestType} in the future, {inviter} must resubmit a request, or an admin must invite them} other {Requests must be resubmitted, or an admin must add them as {isMemberRequest, select, true {members} other {guests}} in the future}}.",values:{numberOfRequests:l.length,requestType:r,isMemberRequest:"member"===r,inviter:u}}),ctaText:(0,te.jsx)(p()._H,{id:"RequestBulkDeclineConfirmationDialog.decline",defaultMessage:"Decline"})})}function pm(e){let{createdByActorsWithReason:t,latestRequestTime:n}=e;return(0,te.jsx)("div",{style:{width:241,maxHeight:600,overflowY:"auto",whiteSpace:"pre-wrap",padding:"12px 12px 12px 12px"},children:t.map((e=>(0,te.jsx)(mm,{createdByActorWithReason:e,latestRequestTime:n},e.actor.id)))})}function mm(e){let{createdByActorWithReason:t,latestRequestTime:n}=e;const{requestorName:i,reason:o,actor:s,styles:l}=function(e){let{createdByActorWithReason:t}=e;const{actor:n,reason:i}=t,o=(0,p().YB)(),s=(0,a().VK)((()=>n.getDisplayName(o)),[o,n]),l=(0,r().yK)((e=>({avatar:{width:24,height:24},metadata:{display:"flex",alignItems:"center",gap:6,flex:"1 0 0"},userName:{textOverflow:"ellipsis",fontSize:14,fontWeight:510,overflow:"hidden",width:100,whiteSpace:"nowrap"},timestamp:{color:e.text.tertiary,textAlign:"right",fontSize:12,fontWeight:400,lineHeight:"15px"},header:{display:"flex",alignItems:"center",gap:10},reason:{paddingLeft:30,fontSize:14,fontWeight:400,color:e.text.primary,letterSpacing:"-0.154px",display:"inline-block",overflowWrap:"break-word",inlineSize:200},noReason:{color:e.text.quaternary}})),[]);return{requestorName:s,reason:i,actor:n,styles:l}}({createdByActorWithReason:t});return(0,te.jsxs)("div",{children:[(0,te.jsxs)("div",{style:l.header,children:[(0,te.jsx)(ws().Z,{hasTooltip:!0,userValue:s,style:l.avatar,size:24,avatarShouldShowShadow:!1}),(0,te.jsxs)("div",{style:l.metadata,children:[(0,te.jsx)("div",{style:l.userName,children:i}),(0,te.jsx)(me().Z,{isSmall:!0,isSecondaryColor:!0,isMultiline:!0,style:l.timestamp,children:(0,ja().IS)(n)})]})]}),(0,te.jsx)("span",{style:l.reason,children:o||(0,te.jsx)("div",{style:l.noReason,children:(0,te.jsx)(p()._H,{id:"requestReasonContent.noReason",defaultMessage:"No message"})})})]})}function gm(e){let{request:t,shouldDisableInteraction:n,requestType:i}=e;const{styles:s,firstRequestorName:l,numberOfRequestors:d}=function(e){let{request:t,shouldDisableInteraction:n}=e;const i=(0,r().yK)((e=>({firstRequestorName:{color:e.text.secondary,opacity:n?.5:1,maxWidth:118,...g().Yu},buttonSuffix:{color:e.text.tertiary,paddingLeft:4},chevron:{width:10,marginLeft:4,fill:e.lightIconColor}})),[n]),s=(0,o().O7)(),l=(0,p().YB)(),d=(0,a().VK)((()=>{if(0===t.createdByActorsWithReason.length)return;return new(J().U6)(s,{table:R().KJ,id:t.createdByActorsWithReason[0].actor.id}).getDisplayName(l)}),[s,l,t.createdByActorsWithReason]);return{styles:i,firstRequestorName:d,numberOfRequestors:t.createdByActorsWithReason?t.createdByActorsWithReason.length:0}}({request:t,shouldDisableInteraction:n}),c=(0,o().O7)();return void 0===l||0===d?null:(0,te.jsx)(ra().ZP,{popupType:ra().Z4.Popup,onClick:()=>{up().b4(c,{from:`${i}_request`,button_name:"open_requested_by"})},renderOrigin:e=>(0,te.jsx)(Bt().Z,{...e,disabled:n,children:(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)("span",{style:s.firstRequestorName,title:l,children:l}),(0,te.jsx)("span",{style:s.buttonSuffix,children:d>1?(0,te.jsxs)("div",{children:["+",d-1]}):null}),(0,cd().i)(s.chevron)]})}),render:()=>(0,te.jsx)(pm,{createdByActorsWithReason:t.createdByActorsWithReason,latestRequestTime:t.accessRequest.created_time})})}function fm(e){let{request:t,spaceStore:n,shouldDisableInteraction:i}=e;const{accessRequest:o,forActor:s}=t,r=function(e){let{accessRequest:t}=e;return(0,a().VK)((()=>t.isGuestInviteRequest()?t.getAttributes().permission_records_and_roles.map((e=>e.id)):[]),[t])}({accessRequest:o});return(0,te.jsx)(Dp,{pageIds:r,guestUserId:s.id,shouldDisableInteraction:i,from:"guest_request"})}var hm=()=>n(306164),ym=()=>n(270895),vm=()=>n(555813),xm=()=>n(383694),bm=()=>n(149809),Sm=()=>n(740046);const Mm=(0,p().vU)({filterTeams:{defaultMessage:"Filter teamspaces…",id:"teamsDropdownForMember.filterForTeams.placeholder"},privateTeamspace:{defaultMessage:"Private teamspace",id:"teamsDropdownForMember.privateTeamspace"}});function jm(e){const t=(0,o().O7)(),[n,s]=(0,i.useState)(""),l=(0,i.useCallback)((e=>vm().RF({environment:t,teamId:e,tab:ym().a.Members,from:"teams_dropdown_space_settings_people"})),[t]),d=(0,r().yK)((e=>({teamName:{color:e.text.primary,fontSize:14},teamMemberCount:{color:e.text.secondary,fontSize:12}})),[]),c=(0,a().VK)((()=>[{key:"teams for member",render:e=>(0,te.jsx)(es().Z,{...e}),actions:e.teamStores.map((e=>{const t={key:e.id,displayName:e.getName()??D().Z.formatMessage(Mm.privateTeamspace),analyticsName:e.getName()||"team_unknown",searchName:e.getName(),render:t=>{var n;return(0,te.jsx)(Yo().Z,{style:{padding:4},textWrapperStyle:{marginLeft:0,marginRight:0},title:(0,te.jsxs)("div",{style:{display:"flex",padding:"4px 6px 4px 8px",alignItems:"flex-start",gap:8,alignSelf:"stretch"},children:[(0,te.jsx)(xm().p,{disabled:!0,store:e,size:20,style:{borderRadius:4}}),(0,te.jsxs)("div",{children:[(0,te.jsx)("div",{style:d.teamName,children:e.getName()??D().Z.formatMessage(Mm.privateTeamspace)}),(0,te.jsx)("div",{style:d.teamMemberCount,children:(0,te.jsx)(p()._H,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"teamsDropdownForMember.numMembers",values:{numMembers:(null===(n=(0,bn().oT)(e))||void 0===n?void 0:n.memberCountWithGuests)??0}})})]})]}),disabled:!Boolean(e.getName()),inline:!0,...t})},action:()=>{l(e.id)},closeParentMenu:!1};return t}))}]),[e.teamStores,l,d.teamMemberCount,d.teamName]),u=n,m=(0,te.jsx)(es().Z,{isInput:!0,children:(0,te.jsx)(Sm().ZP,{value:u,onChange:(0,i.useCallback)((e=>{s(e.target.value)}),[]),focus:!0,focusAfterAnimation:!0,placeholder:D().Z.formatMessage(Mm.filterTeams)})}),g={menuType:Wo().o.Popup,maxWidth:350,maxHeight:300,header:e.teamStores.length>5?m:void 0};return(0,te.jsx)($o().Z,{...g,children:(0,te.jsx)(bm().Z,{filter:u,context:{blocks:[],environment:t,publicEditMode:void 0},initialFocus:void 0,sections:c})})}function Cm(e){let{from:t,teamStores:n}=e;const{styles:s,onClickButton:a}=function(e){let{from:t}=e;const n=(0,r().yK)((e=>({button:{marginRight:8},noTeams:{marginRight:8,color:e.lightTextColor},chevron:{width:10,marginLeft:4,fill:e.lightIconColor},teamspaceName:{color:e.text.secondary,maxWidth:70,...g().Yu},teamspaceNameSuffix:{color:e.text.tertiary,paddingLeft:4}})),[]),s=(0,o().O7)(),a=(0,i.useCallback)((()=>{up().b4(s,{from:t,button_name:"open_teamspaces"})}),[s,t]);return{styles:n,onClickButton:a}}({from:t}),l=n.length;return(0,te.jsx)(ra().ZP,{popupType:ra().Z4.Popup,onClick:a,renderOrigin:e=>(0,te.jsx)(Bt().Z,{disabled:0===l,style:0===l?s.noTeams:s.button,...e,children:0===l?(0,te.jsx)(p()._H,{id:"teamsDropdownForMember.teamsCountNone.label",defaultMessage:"No access"}):(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)("span",{style:s.teamspaceName,title:n[0].getName(),children:n[0].getName()}),(0,te.jsx)("span",{style:s.teamspaceNameSuffix,children:l>1?(0,te.jsxs)("div",{children:["+",l-1]}):null}),(0,cd().i)(s.chevron)]})}),render:()=>(0,te.jsx)(jm,{teamStores:n})})}function wm(e){let{spaceStore:t,request:n}=e;const{teamStores:i}=function(e){let{request:{accessRequest:t},spaceStore:n}=e;const i=(0,a().VK)((()=>{var e,i;const o=pc().default.state.teams.filter((e=>e.isDefault())),s=null===(e=t.getAttributes())||void 0===e?void 0:e.origin_table,a=null===(i=t.getAttributes())||void 0===i?void 0:i.origin_id;if(s&&a){const e=J().zX.createChildStore(n,{table:hm().e0,id:a});o.includes(e)||o.push(e)}return o}),[t,n]);return{teamStores:i}}({request:n,spaceStore:t});return(0,te.jsx)(Cm,{teamStores:i,from:"member_request"})}function km(e){let{request:t,spaceStore:n}=e;const{relativeDate:i,email:o,userStore:s,styles:l}=function(e){let{request:{accessRequest:t,forActor:n},spaceStore:i}=e;const o=(0,r().yK)((e=>({container:{display:"flex",alignItems:"center",fontSize:g().JB.UIRegular.desktop,gap:10,flex:"1 0 0",maxWidth:50},userAvatar:{},title:{height:17,alignSelf:"stretch",fontSize:g().JB.UIRegular.desktop,fontStyle:"normal",fontWeight:510,lineHeight:"18px",maxWidth:160,...g().Yu},subtitle:{height:17,alignSelf:"stretch",fontSize:g().JB.UISmall.desktop,fontStyle:"normal",fontWeight:400,lineHeight:"15px",color:e.text.secondary,maxWidth:160,...g().Yu}})),[]),s=J().U6.createChildStore(i,{table:R().KJ,id:n.id}),{email:l}=(0,a().VK)((()=>({email:s.getEmail()})),[s]),d=(0,p().YB)(),c=(0,a().VK)((()=>t.created_time),[t]),u=_().CQ(c,(0,W().r)()),m=(0,ba().ZV)({value:u,date_format:"relative",userTimeZone:(0,W().r)(),intl:d,allowRelativeDates:!0});return{email:l,styles:o,userStore:s,relativeDate:m}}({request:t,spaceStore:n});return(0,te.jsxs)("div",{style:l.container,children:[(0,te.jsx)(ws().Z,{style:l.userAvatar,userStore:s,size:28}),(0,te.jsxs)("div",{children:[(0,te.jsx)("div",{style:l.title,title:o,children:o}),(0,te.jsx)("div",{style:l.subtitle,title:i,children:i})]})]})}function _m(e){let{spaceStore:t,requests:n,requestType:s,domainFilterValues:l,internalDomains:d}=e;const c=(0,o().O7)(),[u,g]=(0,i.useState)(Vp),[f,h]=(0,i.useState)({column:Tm,sortAscending:!0}),y=(0,a().VK)((()=>Up().default.state.searchQuery),[]),[v,x]=(0,i.useState)([]),{rows:b,hasMore:S}=function(e){let{spaceStore:t,requestType:n,requests:i,searchQuery:o,domainFilters:s=[],internalDomains:r=[],limit:l,selectedRowIds:d,sortState:c}=e;const u=(0,a().VK)((()=>i.map((e=>{const i=J().U6.createChildStore(t,{table:R().KJ,id:e.forActor.id});return{id:e.accessRequest.id,spaceStore:t,isClickable:!1,request:e,requestType:n,email:i.getEmail(),shouldDisableInteraction:d.includes(e.accessRequest.id)}}))),[t,n,i,d]),p=(0,m().oA)(s),g=u.filter((e=>{var t;const n=e.email?(0,Hl().Gd)(e.email):void 0,i=(0,rm().is)(e.email,r);return!(o&&(null===(t=e.email)||void 0===t||!t.includes(o)))&&(!(p.length>0)||p.some((e=>"other"===e?!i:n===e)))})),f=function(e,t){let{sortAscending:n}=t;const i=(0,m().MR)(e,(e=>e.email));n||i.reverse();return i}(g,c),h=f.length>l;return{rows:f.slice(0,l),hasMore:h}}({spaceStore:t,requestType:s,requests:n,domainFilters:(0,m().oA)(l),internalDomains:d,searchQuery:y,limit:u,sortState:f,selectedRowIds:v}),M=(0,i.useMemo)((()=>n.filter((e=>v.includes(e.accessRequest.id)))),[n,v]),[j,C]=(0,i.useState)(!1),[w,k]=(0,i.useState)(void 0),_=!b.some((e=>v.includes(e.id))),T=(0,i.useCallback)((async()=>{C(!0),up().b4(c,{from:`${s}_request`,button_name:"bulk_approve",count:M.length});const e=await Zm({environment:c,spaceStore:t,requests:M.map((e=>e.accessRequest)),requestType:s,status:"approved"});C(!1),e&&x([])}),[c,t,M,s]),I=(0,i.useCallback)((()=>{up().b4(c,{from:`${s}_request`,button_name:"bulk_decline",count:M.length}),k(M)}),[c,s,k,M]),P=(0,i.useCallback)((()=>k(void 0)),[k]),A=function(e){let{requestType:t,onClickApprove:n,onClickDecline:i}=e;return"member"===t?[Tm,Im,Am,Rm({onClickApprove:n,onClickDecline:i})]:[Tm,Pm,Am,Rm({onClickApprove:n,onClickDecline:i})]}({requestType:s,onClickApprove:e=>Zm({environment:c,spaceStore:t,requests:[e.accessRequest],requestType:s,status:"approved"}),onClickDecline:e=>k([e])}),Z=(0,r().yK)((e=>({container:{paddingBottom:30},headerContainer:{display:"flex",justifyContent:"space-between"},titleContainer:{display:"flex",alignItems:"center",gap:6,alignSelf:"stretch",fontSize:"14px",fontStyle:"normal",fontWeight:510,minHeight:30,paddingTop:10},titleNumber:{color:e.text.tertiary},actionsContainer:{display:"flex",borderRadius:6,border:`1px solid ${e.stroke.primary}`,boxShadow:"0px 2px 12px 0px rgba(29, 27, 22, 0.06)"},actionLeftButton:{borderRadius:"4px 0px 0px 4px",paddingLeft:10,paddingRight:0,height:30},buttonContainerApprove:{display:"flex",padding:"0px 12px 0px 0px",justifyContent:"center",alignItems:"center",gap:4,alignSelf:"stretch",color:e.text.uiBluePrimary},buttonContainerDecline:{display:"flex",padding:"0px 12px 0px 10px",justifyContent:"center",alignItems:"center",gap:4,alignSelf:"stretch",color:e.text.secondary},buttonIcon:{width:20,height:20,paddingTop:1,flexDirection:"column",justifyContent:"center",alignItems:"center",gap:10},buttonText:{fontSize:14,fontWeight:510},buttonDivider:{width:1,background:e.stroke.secondary},actionRightButton:{borderRadius:"0px 4px 4px 0px",paddingLeft:0,paddingRight:0,height:30},noRowContainer:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",borderBottom:`1px solid ${e.stroke.primary}`},noRowText:{color:e.text.secondary,fontSize:14,fontWeight:400,textAlign:"center"}})),[]),B=function(e){return(0,r().yK)((t=>({...(0,ce().bE)({columnRenderInfo:e,theme:t,containerMarginTop:0})})),[e])}(A);return 0===n.length?null:(0,te.jsxs)("div",{style:Z.container,children:[(0,te.jsxs)("div",{style:Z.headerContainer,children:[(0,te.jsxs)("div",{style:Z.titleContainer,children:[(0,te.jsx)("div",{children:(0,te.jsx)(p()._H,{id:"peopleSectionMembersTab.memberRequests.title",defaultMessage:"Requests"})}),(0,te.jsx)("span",{style:Z.titleNumber,children:n.length})]}),v.length>0&&!_&&(0,te.jsxs)("div",{style:Z.actionsContainer,children:[(0,te.jsx)(dm().Z,{style:Z.actionLeftButton,onClick:T,isLoading:j,children:(0,te.jsxs)("div",{style:Z.buttonContainerApprove,children:[(0,te.jsx)("div",{style:Z.buttonIcon,children:(0,lm().M)({width:20,height:20})}),(0,te.jsx)("div",{style:Z.buttonText,children:(0,te.jsx)(p()._H,{id:"spaceSettings.peopleSection.requestsTable.bulkApprove",defaultMessage:"Approve {numberOfRequests, plural, one {1 request} other {{numberOfRequests} requests}}",values:{numberOfRequests:v.length}})})]})}),(0,te.jsx)("div",{style:Z.buttonDivider}),(0,te.jsx)(dm().Z,{style:Z.actionRightButton,onClick:I,isLoading:!1,children:(0,te.jsxs)("div",{style:Z.buttonContainerDecline,children:[(0,te.jsx)("div",{style:{...Z.buttonIcon,paddingTop:3},children:Ip({width:20,height:20})}),(0,te.jsx)("div",{style:Z.buttonText,children:(0,te.jsx)(p()._H,{id:"spaceSettings.peopleSection.requestsTable.bulkDecline",defaultMessage:"Decline"})})]})})]})]}),(0,te.jsx)("div",{style:{marginTop:4},children:(0,te.jsx)(ce().Dp,{allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:500,columnRenderInfo:A,rows:b,showRowBorders:!0,hideHeaderRowPadding:!0,sortState:f,onSortStateChanged:h,renderNoRowsComponent:()=>(0,te.jsx)("div",{style:Z.noRowContainer,children:(0,te.jsx)("div",{style:Z.noRowText,children:(0,te.jsx)(p()._H,{id:"peopleSectionRequestTable.emptySearch",defaultMessage:"No search results"})})}),styles:B,getStyleForRow:e=>{if(e.shouldDisableInteraction)return{backgroundColor:"rgba(35, 131, 226, 0.07)"}},loadMoreMethod:S?{type:"button",onLoadMore:()=>g(u+Vp)}:void 0,multiselect:n.length>0?{header:{isDisabled:0===b.length,isSelected:v.length>0&&v.length===b.length,onClick:()=>{v.length===b.length?(x([]),up().pZ(c,{from:`${s}_request`,action:"deselect_all",row_count:v.length})):(x(b.map((e=>e.id))),up().pZ(c,{from:`${s}_request`,action:"select_all",row_count:b.length}))}},row:{getDisabledState:e=>!1,getSelectedState:e=>v.includes(e.id),onClick:e=>{x((t=>t.includes(e.id)?(up().pZ(c,{from:`${s}_request`,action:"deselect_row",row_count:1}),t.filter((t=>t!==e.id))):(up().pZ(c,{from:`${s}_request`,action:"select_row",row_count:1}),t.concat(e.id))))}}}:void 0})}),(0,te.jsx)(um,{isModalOpen:(0,gn().$K)(w),requestType:s,requests:w??[],handleClickDecline:async e=>{await Zm({environment:c,spaceStore:t,requests:e.map((e=>e.accessRequest)),requestType:s,status:"rejected"})&&x([]),k(void 0)},handleClickDismiss:P})]})}const Tm={id:"user",headerTitle:(0,te.jsx)("div",{style:{fontSize:14},children:(0,te.jsx)(p()._H,{id:"peopleSectionRequestsTable.user",defaultMessage:"User"})}),renderCell:e=>(0,te.jsx)(km,{request:e.request,spaceStore:e.spaceStore}),widthData:{width:219},sortable:!0},Im={id:"teamspaces",headerTitle:(0,te.jsx)("div",{style:{paddingLeft:8,fontSize:14},children:(0,te.jsx)(p()._H,{id:"peopleSectionRequestsTable.teamspaces",defaultMessage:"Teamspaces"})}),renderCell:e=>(0,te.jsx)(wm,{spaceStore:e.spaceStore,request:e.request}),widthData:{width:175},sortable:!1},Pm={id:"pages",headerTitle:(0,te.jsx)("div",{style:{paddingLeft:8,fontSize:14,minWidth:175,textAlign:"left"},children:(0,te.jsx)(p()._H,{id:"peopleSectionRequestsTable.pages",defaultMessage:"Access"})}),renderCell:e=>(0,te.jsx)(fm,{request:e.request,spaceStore:e.spaceStore,shouldDisableInteraction:e.shouldDisableInteraction}),widthData:{width:175},sortable:!1},Am={id:"requestBy",headerTitle:(0,te.jsx)("div",{style:{paddingLeft:8,fontSize:14,minWidth:160,textAlign:"left"},children:(0,te.jsx)(p()._H,{id:"peopleSectionRequestsTable.requestBy",defaultMessage:"Requested by"})}),renderCell:e=>(0,te.jsx)(gm,{request:e.request,shouldDisableInteraction:e.shouldDisableInteraction,requestType:e.requestType}),widthData:{width:120},sortable:!1};function Rm(e){let{onClickApprove:t,onClickDecline:n}=e;return{id:"actions",headerTitle:(0,te.jsx)("div",{style:{minWidth:155}}),renderCell:e=>(0,te.jsx)(cm,{request:e.request,shouldDisableInteraction:e.shouldDisableInteraction,requestType:e.requestType,handleApprove:t,handleDecline:n}),widthData:{width:100},sortable:!1}}async function Zm(e){let t,{environment:n,spaceStore:i,requests:o,requestType:s,status:a}=e;if(0===o.length)return!0;if("member"===s){const e=o.filter((e=>"guest_invite_request"!==e.getType())),s=o.filter((e=>"guest_invite_request"===e.getType())),r=await f().YN({environment:n,store:i,requests:e,status:a,from:"requests_center"}),l=await f().fJ({environment:n,store:i,requests:s,status:a,from:"requests_center"});t={failedUsers:r.failedUsers.concat(l.failedUsers),resolvedUsers:r.resolvedUsers.concat(l.resolvedUsers)}}else"guest"===s?t=await f().mY({environment:n,requests:o,status:a,from:"requests_center"}):(0,gn().t1)(s);const r=function(e){let{requestType:t,result:{resolvedUsers:n,failedUsers:i},status:o}=e;if("guest"===t&&"approved"===o&&n.length>0)return{label:(0,te.jsx)(p()._H,{id:"PeopleSectionRequestsTable.bulkApproveToast.guests",defaultMessage:"Approved {numberOfSuccesses, plural, one {guest request for {userEmail}} other {{numberOfSuccesses} guest requests}}",values:{numberOfSuccesses:n.length,userEmail:n[0].getEmail()}})};if("guest"===t&&"approved"===o&&i.length>0)return{label:(0,te.jsx)(p()._H,{id:"PeopleSectionRequestsTable.bulkApproveToast.guests.failed",defaultMessage:"Failed approve {numberOfRequests, plural, one {guest request for {userEmail}} other {{numberOfRequests} guest requests}}, please try again.",values:{numberOfRequests:i.length,userEmail:i[0].getEmail()}})};if("guest"===t&&"rejected"===o&&n.length>0)return{label:(0,te.jsx)(p()._H,{id:"PeopleSectionRequestsTable.bulkDeclineToast.guests.success",defaultMessage:"Declined {numberOfSuccesses, plural, one {guest request for {userEmail}} other {{numberOfSuccesses} guest requests}}",values:{numberOfSuccesses:n.length,userEmail:n[0].getEmail()}})};if("guest"===t&&"rejected"===o&&i.length>0)return{label:(0,te.jsx)(p()._H,{id:"PeopleSectionRequestsTable.bulkDeclineToast.guests.failed",defaultMessage:"Failed decline {numberOfSuccesses, plural, one {guest request for {userEmail}} other {{numberOfSuccesses} guest requests}}, please try again.",values:{numberOfSuccesses:i.length,userEmail:i[0].getEmail()}})};if("member"===t&&"approved"===o&&n.length>0)return{label:(0,te.jsx)(p()._H,{id:"PeopleSectionRequestsTable.bulkApproveToast.members.success",defaultMessage:"Approved {numberOfRequests, plural, one {member request for {userEmail}} other {{numberOfRequests} member requests}}",values:{numberOfRequests:n.length,userEmail:n[0].getEmail()}})};if("member"===t&&"approved"===o&&i.length>0)return{label:(0,te.jsx)(p()._H,{id:"PeopleSectionRequestsTable.bulkApproveToast.members.failed",defaultMessage:"Failed to approve {numberOfRequests, plural, one {member request for {userEmail}} other {{numberOfRequests} member requests}}, please try again.",values:{numberOfRequests:i.length,userEmail:i[0].getEmail()}})};if("member"===t&&"rejected"===o&&n.length>0)return{label:(0,te.jsx)(p()._H,{id:"PeopleSectionRequestsTable.bulkDeclineToast.members.success",defaultMessage:"Declined {numberOfRequests, plural, one {member request for {userEmail}} other {{numberOfRequests} member requests}}",values:{numberOfRequests:n.length,userEmail:n[0].getEmail()}})};if("member"===t&&"rejected"===o&&i.length>0)return{label:(0,te.jsx)(p()._H,{id:"PeopleSectionRequestsTable.bulkDeclineToast.members.failed",defaultMessage:"Failed to decline {numberOfRequests, plural, one {member request for {userEmail}} other {{numberOfRequests} member requests}}, please try again.",values:{numberOfRequests:i.length,userEmail:i[0].getEmail()}})};return}({requestType:s,result:t,status:a});return r&&Fs().oV(r),0===t.failedUsers.length}function Bm(e){let{spaceStore:t}=e;const[n,s]=(0,i.useState)(),r=(0,o().O7)(),l=(0,a().VK)((()=>(0,Zc().A7)()),[]),d=(0,a().VK)((()=>{const e=Mp().Z.getData(r,{spaceId:t.id});return e?e.filter((e=>e.hasGuests)).map((e=>e.domain)):[]}),[r,t]),c=(0,nn().tA)({spaceStore:t}),u=(0,yp().IH)({spaceStore:t}),p=(0,nn().oE)({spaceStore:t,requestType:"guest"});return(0,nn().bn)({requestType:"guest",spaceStore:t}),(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(im,{spaceStore:t,internalDomains:d,domainFilterValues:n,setDomainFilterValues:s}),c&&u&&(0,te.jsx)(_m,{requests:p,spaceStore:t,requestType:"guest",domainFilterValues:n,internalDomains:d}),(0,te.jsx)(Fp,{guests:l,spaceStore:t,domainFilterValues:n??[],internalDomains:d})]})}var Dm=()=>n(196234),Lm=()=>n(933868),Om=()=>n(621099);function Hm(e){let{user:t,spaceStore:n,shouldDisableAction:s}=e;const{styles:l,handleRemoveMemberFromWorkspace:d,environment:c,isCurrentUser:u}=function(e){let{user:t,spaceStore:n}=e;const s=(0,r().yK)((e=>({container:{width:"100%",display:"flex",justifyContent:"flex-end"},button:{display:"flex",width:24,height:24,justifyContent:"center",alignItems:"center",gap:10,paddingLeft:0,paddingRight:0},buttonIcon:{width:20,height:20,fill:e.icon.secondary},upgradeButton:{},removeMenuDivider:{borderTop:e.stroke.secondary},removeButton:{color:jp().Lr[e.mode].red},upgradeIcon:{width:17,height:17}})),[]),l=(0,o().O7)(),d=(0,i.useCallback)((async()=>{const{currentUserSettingsStore:e}=et().default.state;return e?await(0,Om().$A)({user:t,spaceStore:n,environment:l,userSettingStore:e}):()=>{}}),[n,l,t]),c=(0,a().VK)((()=>{var e;return(null===(e=et().default.state.currentUserStore)||void 0===e?void 0:e.id)===t.userId}),[t]);return{styles:s,handleRemoveMemberFromWorkspace:d,environment:l,isCurrentUser:c}}({user:t,spaceStore:n}),m=new(sa().Z);return(0,te.jsx)("div",{style:l.container,children:(0,te.jsx)(ra().ZP,{buttonPopupStore:m,popupType:ra().Z4.Popup,renderOrigin:e=>(0,te.jsx)(Bt().Z,{style:l.button,...e,children:(0,te.jsx)(te.Fragment,{children:(0,wp().O)(l.buttonIcon)})}),onClick:()=>{up().b4(c,{from:"member",button_name:"actions"})},disabled:s,render:()=>(0,te.jsx)("div",{children:(0,te.jsx)(Qo().Z,{type:Qo().i.Vertical,initialFocus:void 0,sections:[{key:"remove",render:e=>(0,te.jsx)(es().Z,{...e,style:l.removeMenuDivider}),items:[{key:"remove",render:e=>(0,te.jsx)(Yo().Z,{...e,buttonStyle:l.removeButton,icon:(0,Ks().V)(l.upgradeIcon),title:(0,te.jsx)(p()._H,{id:"peopleSectionmembersTab.removeMember",defaultMessage:"{isCurrentUser, select, true {Leave workspace} other {Remove from workspace}} ",values:{isCurrentUser:u}})}),action:async()=>{m.setState({open:!1}),await d(),up().b4(c,{from:"member",button_name:"remove"})}}]}]})})})})}var Vm=()=>n(907099);function Um(e){let{shouldShowSearchHeader:t,sections:n,filterPlaceholder:s}=e;const a=(0,o().O7)(),[r,l]=(0,i.useState)(""),d=r,c=(0,te.jsx)(es().Z,{isInput:!0,children:(0,te.jsx)(Sm().ZP,{value:d,onChange:(0,i.useCallback)((e=>{l(e.target.value)}),[]),focus:!0,focusAfterAnimation:!0,placeholder:s&&D().Z.formatMessage(s)})}),u={menuType:Wo().o.Popup,maxWidth:350,maxHeight:300,header:t?c:void 0};return(0,te.jsx)($o().Z,{...u,children:(0,te.jsx)(bm().Z,{filter:d,context:{blocks:[],environment:a,publicEditMode:void 0},initialFocus:0,sections:n})})}const Em=(0,p().vU)({filterGroups:{defaultMessage:"Filter groups...",id:"GroupPopupContent.filterGroups"}});function Nm(e){let{groups:t,spaceStore:n,spacePermissionsSettingsStore:i}=e;const o=t.map((e=>({group:e.group,numberOfGroupMembers:e.memberCount}))),s=(0,r().yK)((e=>({buttonTitle:{display:"flex",padding:"4px 6px 4px 8px",alignItems:"flex-start",gap:8,alignSelf:"stretch"},groupName:{color:e.text.primary,fontSize:14},groupMemberCount:{color:e.text.secondary,fontSize:12}})),[]),a=t.length>5;return(0,te.jsx)(Um,{shouldShowSearchHeader:a,sections:[{key:"groups for member",render:e=>(0,te.jsx)(es().Z,{...e}),actions:o.map((e=>{const{group:t,numberOfGroupMembers:o}=e;return{key:t.group_id,displayName:t.name,analyticsName:t.name??"unknown group",searchName:t.name,render:e=>(0,te.jsx)(Yo().Z,{style:{padding:4},textWrapperStyle:{marginLeft:0,marginRight:0},title:(0,te.jsxs)("div",{style:s.buttonTitle,children:[(0,te.jsx)(Jo().Z,{disabled:!0,bucket:"public",icon:t.icon?{pointer:n.pointer,icon:t.icon}:void 0,size:20,isEmptyPage:!1,title:t.name}),(0,te.jsxs)("div",{children:[(0,te.jsx)("div",{style:s.groupName,children:t.name}),(0,te.jsx)("div",{style:s.groupMemberCount,children:(0,te.jsx)(p()._H,{id:"spacePermissionsSettings.groupsTab.userGroup.memberCount",defaultMessage:"{numberOfGroupMembers, plural, one {{numberOfGroupMembers} member} other {{numberOfGroupMembers} members}}",values:{numberOfGroupMembers:o}})})]})]}),...e}),action:()=>{i.setState({...i.state,currentTab:Jn().Q.Groups})},closeParentMenu:!1}}))}],filterPlaceholder:Em.filterGroups})}function Fm(e){let{user:t,spaceStore:n,spacePermissionsSettingsStore:s,spacePermissionGroupIds:l}=e;const{styles:d,groups:c,numberOfGroups:u,firstGroupName:f,onClick:h}=function(e){let{spacePermissionGroupIds:t}=e;const n=(0,o().O7)(),s=(0,i.useCallback)((()=>{up().b4(n,{from:"member",button_name:"open_groups"})}),[n]),l=(0,r().yK)((e=>({button:{marginRight:8},noGroups:{marginRight:8,color:e.lightTextColor},chevron:{width:10,marginLeft:4,fill:e.lightIconColor},noneGroupText:{color:e.text.tertiary},groupNameText:{color:e.text.secondary,maxWidth:100,...g().Yu},groupNumberText:{color:e.text.secondary}})),[]),d=(0,p().YB)(),c=(0,a().VK)((()=>m().oA(t.map((e=>pp().Z.state.permissionGroupsAndMemberCounts.find((t=>t.group.group_id===e)))))),[t]),u=c.length,f=u>0?(0,Vm().kF)({groupName:c[0].group.name,intl:d}):void 0;return{styles:l,groups:c,numberOfGroups:u,firstGroupName:f,onClick:s}}({spacePermissionGroupIds:l});return(0,te.jsx)(ra().ZP,{popupType:ra().Z4.Popup,onClick:h,renderOrigin:e=>(0,te.jsx)(Bt().Z,{disabled:0===u,style:0===u?d.noGroups:d.button,...e,children:0===u?(0,te.jsx)("span",{style:d.noneGroupText,children:(0,te.jsx)(p()._H,{id:"userGroupsCell.noGroups",defaultMessage:"None"})}):1===u?(0,te.jsx)("span",{style:d.groupNameText,title:f,children:f}):(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)("div",{style:d.groupNumberText,children:u}),(0,cd().i)(d.chevron)]})}),render:()=>(0,te.jsx)(Nm,{groups:c,spaceStore:n,spacePermissionsSettingsStore:s})})}var Km=()=>n(370005);function zm(e){let{user:t,spaceStore:n,maxWidth:i}=e;const s=(0,r().yK)((e=>({button:{color:e.text.secondary,maxWidth:i}})),[i]),l=(0,o().O7)(),{isPermissionSelectDisabled:d,currentUserId:c}=(0,a().VK)((()=>{let e=!0;return(n.canAdmin()||n.canEditMembership()&&(Lm().RN(t.role)||t.userId===l.currentUser.id))&&(e=!1),{isPermissionSelectDisabled:e,currentUserId:l.currentUser.id}}),[n,l,t.role,t.userId]),u=(0,a().VK)((()=>et().default.state.currentUserSettingsStore),[]),g=(0,p().YB)(),f=(0,a().VK)((()=>{const e=g.formatMessage({id:"spacePermissionSettings.memberRoleSelect.permissionitem.roleUpgradeDisabled",defaultMessage:"Cannot upgrade to a higher role than member"}),t="enterprise"===n.getSubscriptionTier();return m().oA(Lm().an.filter((e=>"none"!==e)).map((i=>{if(t||"membership_admin"!==i)return{role:i,disabledInfo:!n.canAdmin()&&Lm().Bc(i)?{isDisabled:!0,disabledMessage:e}:void 0}})))}),[g,n]);return u?(0,te.jsx)(Km().ZP,{role:t.role,table:ho().bx,type:"user_permission",disabled:d,isUserPermission:t.userId===c,upgradeButtonName:"space_permission_item",availableRoleItems:f,buttonStyle:s.button,onChange:async e=>{await Om().Vu({member:t,newRole:e,currentUserSettingsStore:u,spaceStore:n,environment:l})},onClick:()=>{up().b4(l,{from:"member",button_name:"open_role"})}}):null}function Wm(e){let{user:t,spaceStore:n}=e;return(0,te.jsx)("div",{children:(0,te.jsx)(zm,{user:t,spaceStore:n,maxWidth:148})})}function qm(e){let{user:t,userPermissionGroupIds:n}=e;const{userTeamStores:i}=function(e){let{user:t,userPermissionGroupIds:n}=e;const i=(0,a().VK)((()=>pc().default.state.teams.filter((e=>e.isMemberOrGuest(t.userId,n)))),[t.userId,n]);return{userTeamStores:i}}({user:t,userPermissionGroupIds:n});return(0,te.jsx)(Cm,{teamStores:i,from:"member"})}function Gm(e){let{spaceStore:t,spacePermissionsSettingsStore:n,shouldShowHeading:s}=e;const l=(0,a().VK)((()=>(0,Zc().Io)()),[]),{tableStyles:d,styles:c,sortState:u,setSortState:g,rows:f,membersCount:h,searchQuery:y,columnRenderInfo:v,shouldShowLoadMore:x,onLoadMore:b}=function(e){let{members:t,spaceStore:n,spacePermissionsSettingsStore:s}=e;const l=(0,o().O7)(),d=(0,a().VK)((()=>(0,zt().mu)()),[]),c=(0,yp().eA)({spaceStore:n}),u=(0,a().VK)((()=>n.canAdmin()),[n]),g=(0,a().VK)((()=>m().oA([Ym,$m,Xm,Qm,d?eg:void 0,c?Jm:void 0])),[c,d]),f=(0,r().yK)((e=>({...(0,ce().bE)({columnRenderInfo:g,theme:e,containerMarginTop:0})})),[g]),h=(0,r().yK)((e=>({titleContainer:{display:"flex",alignItems:"center",gap:6,alignSelf:"stretch",fontSize:"14px",fontStyle:"normal",fontWeight:510,height:32},titleNumber:{color:e.text.tertiary},emptyMessage:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",borderBottom:`1px solid ${e.stroke.primary}`}})),[]),[y,v]=(0,i.useState)({column:Qm,sortAscending:!1}),x=(0,p().YB)(),b=(0,a().VK)((()=>Up().default.state.searchQuery),[]),S=(0,yp().bS)({spaceStore:n,members:t}),M=(0,a().VK)((()=>n.getSpaceId()),[n]),[{value:j}]=(0,Bs().r5)((async()=>{const e=await Z().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:l,data:{spaceId:M,userIds:t.map((e=>e.userId))},headers:(0,I().Bb)({cellId:void 0,spaceId:M})});return"success"===e.type?e.data.userToGroupMap:{}}),[l,M,t],{debugName:"userToPermissionGroupIds",debounce:300,throttle:1e3}),C=(0,a().VK)((()=>t.map((e=>{const t=J().U6.createChildStore(n,{table:R().KJ,id:e.userId}),i=null==S?void 0:S.find((t=>t.userId===e.userId));return{spaceStore:n,user:e,email:t.getEmail(),userName:t.getDisplayName(x),id:e.userId,isClickable:!1,userRole:e.role,spacePermissionsSettingsStore:s,firstJoinedSpaceTime:e.firstJoinedSpaceTime,shouldDisableAction:!(u||!c||"editor"!==e.role&&"membership_admin"!==e.role),restorationStatus:null==i?void 0:i.restorationStatus,spacePermissionGroupIds:(null==j?void 0:j[e.userId])||[]}})).filter((e=>{var t,n;return void 0===b||(((null===(t=e.email)||void 0===t?void 0:t.includes(b))||(null===(n=e.userName)||void 0===n?void 0:n.includes(b)))??!1)}))),[n,t,x,b,u,c,s,S,j]),w=C.length,k=(0,a().VK)((()=>function(e,t){let{sortAscending:n,column:i}=t,o=e;switch(i.id){case"user":o=m().MR(e,(e=>e.email));break;case"roles":o=m().MR(e,(e=>Lm().xm[e.userRole]))}n||o.reverse();return o}(C,y)),[C,y]),[_,T]=(0,i.useState)(Op),P=(0,i.useCallback)((()=>{T(_+Op)}),[_]),A=_<k.length,B=k.slice(0,_);return{tableStyles:f,styles:h,sortState:y,setSortState:v,rows:B,searchQuery:b,membersCount:w,columnRenderInfo:g,onLoadMore:P,shouldShowLoadMore:A}}({members:l,spaceStore:t,spacePermissionsSettingsStore:n});return(0,te.jsxs)(te.Fragment,{children:[s&&(0,te.jsxs)("div",{style:c.titleContainer,children:[(0,te.jsx)("span",{children:(0,te.jsx)(p()._H,{id:"peopleSectionMembersTab.activeMembers.title",defaultMessage:"Active"})}),(0,te.jsx)("span",{style:c.titleNumber,children:h})]}),(0,te.jsx)("div",{style:{marginTop:s?4:-1},children:(0,te.jsx)(ce().Dp,{allowHorizontalScroll:!0,setStickyHeaderRow:!0,columnRenderInfo:v,rows:f,showRowBorders:!0,hideHeaderRowPadding:!0,sortState:u,onSortStateChanged:g,loadMoreMethod:x?{type:"button",onLoadMore:b}:void 0,renderNoRowsComponent:()=>(0,te.jsx)(me().Z,{isSmall:!0,style:c.emptyMessage,children:y?(0,te.jsx)(p()._H,{id:"peopleSectionMembersTab.emptySearch",defaultMessage:"No search results"}):(0,te.jsx)(p()._H,{id:"peopleSectionMembersTab.emptyRow",defaultMessage:"No members"})}),styles:d})})]})}const Ym={id:"user",headerTitle:(0,te.jsx)("div",{style:{fontSize:14},children:(0,te.jsx)(p()._H,{id:"peopleSectionMembersTab.user",defaultMessage:"User"})}),renderCell:e=>(0,te.jsx)(Np,{userId:e.user.userId,restorationStatus:e.restorationStatus,spaceStore:e.spaceStore}),widthData:{width:219},sortable:!0},$m={id:"teamspaces",headerTitle:(0,te.jsx)("div",{style:{paddingLeft:8,fontSize:14},children:(0,te.jsx)(p()._H,{id:"teamspaces",defaultMessage:"Teamspaces"})}),renderCell:e=>(0,te.jsx)(qm,{user:e.user,userPermissionGroupIds:new Set(e.spacePermissionGroupIds)}),widthData:{width:175},sortable:!1},Xm={id:"groups",headerTitle:(0,te.jsx)("div",{style:{paddingLeft:8,fontSize:14},children:(0,te.jsx)(p()._H,{id:"groups",defaultMessage:"Groups"})}),renderCell:e=>(0,te.jsx)(Fm,{user:e.user,spaceStore:e.spaceStore,spacePermissionsSettingsStore:e.spacePermissionsSettingsStore,spacePermissionGroupIds:e.spacePermissionGroupIds}),widthData:{width:118.5},sortable:!1},Qm={id:"roles",headerTitle:(0,te.jsx)("div",{style:{paddingLeft:8,fontSize:14},children:(0,te.jsx)(p()._H,{id:"peopleSectionMembersTable.userTable.role",defaultMessage:"Role"})}),renderCell:e=>(0,te.jsx)(Wm,{user:e.user,spaceStore:e.spaceStore}),widthData:{width:118.5},sortable:!0},Jm={id:"actions",headerTitle:(0,te.jsx)(te.Fragment,{}),renderCell:e=>(0,te.jsx)(Hm,{user:e.user,spaceStore:e.spaceStore,shouldDisableAction:e.shouldDisableAction}),widthData:{width:51},sortable:!1},eg={id:"joined",headerTitle:(0,te.jsx)("div",{style:{fontSize:14},children:(0,te.jsx)(p()._H,{id:"role",defaultMessage:"Date added"})}),renderCell:e=>e.firstJoinedSpaceTime?(0,ba().Yx)(Number(e.firstJoinedSpaceTime),"medium",ai().locale):"",widthData:{width:118},sortable:!0};var tg=()=>n(306837),ng=()=>n(985481);function ig(e){let{currentTab:t}=e;const n=(0,r().yK)((e=>({icon:{fontSize:14,fontWeight:510,fill:e.icon.secondary,cursor:"pointer"},ctaIcon:{fontSize:12,fill:e.icon.secondary,fontWeight:510}})),[]),s=(0,o().O7)(),a=(0,i.useCallback)((()=>{ct().default.setState({...ct().default.state,currentTab:"security",defaultSubtab:void 0}),up().kx(s,{current_tab:t})}),[s,t]);return(0,i.useEffect)((()=>{up().Ad(s,{current_tab:t})}),[s,t]),(0,te.jsx)(Ga,{leftIcon:(0,tg().C)(n.icon),content:(0,te.jsx)(p()._H,{id:"PeopleSectionSecurityBanner.title",defaultMessage:"Some invite settings have moved, make changes in Security tab"}),rightIcon:(0,ng().k)(n.ctaIcon),onClick:a})}var og=()=>n(607031);const sg=3;function ag(e){let{guests:t,spaceStore:n,internalDomains:s}=e;const{environment:l,tableStyles:d,sortState:c,setSortState:u,selectedRowIds:m,setSelectedRowIds:g,rows:f,searchQuery:h,canEditMembership:y,columnRenderInfo:v,guestsCount:x,onClickApprove:b,isSubscribed:M}=function(e){let{guests:t,spaceStore:n,internalDomains:s}=e;const l=(0,o().O7)(),d=(0,yp().eA)({spaceStore:n}),c=(0,a().VK)((()=>d?[dg,cg,ug]:[dg]),[d]),u=(0,r().yK)((e=>({...(0,ce().bE)({columnRenderInfo:c,theme:e,containerMarginTop:0})})),[c]),m=(0,a().VK)((()=>c[0]),[c]),[g,f]=(0,i.useState)({column:m,sortAscending:!0}),[h,y]=(0,i.useState)([]),v=(0,p().YB)(),x=(0,a().VK)((()=>Up().default.state.searchQuery),[]),b=(0,a().VK)((()=>{const e=_t().subscriptionDataStoreInstance.state;return Boolean(e&&Zc().YK(e))}),[]),S=(0,a().VK)((()=>t.map((e=>{const t=J().U6.createChildStore(n,{table:R().KJ,id:e.userId}),i=t.getEmail(),o=null==i?void 0:i.split("@")[1],a=s.some((e=>e.url===o));return{spaceStore:n,user:e,email:i,userName:t.getDisplayName(v),guestUserStore:t,id:e.userId,shouldDisableInteraction:h.includes(e.userId),isClickable:!1,isInternalGuest:a,isSubscribed:b}})).filter((e=>{if(x){var t;if(!((null===(t=e.email)||void 0===t?void 0:t.includes(x))||e.userName.includes(x)))return!1}return e.isInternalGuest})).slice(0,sg)),[t,n,s,v,h,b,x]),M=(0,i.useCallback)((()=>{up().b4(l,{from:"guest_suggestions",button_name:"bulk_upgrade",count:h.length}),h.forEach((e=>{const t=J().U6.createChildStore(n,{table:R().KJ,id:e}),i=b?"read_and_write":"editor";Cp().s({environment:l,guestUserStore:t,role:i,store:n,isConvertToAdmin:!b,origin:"suggested_guest_table"}),y([])}))}),[h,l,b,n]),j=!S.some((e=>h.includes(e.id)));return{environment:l,tableStyles:u,sortState:g,setSortState:f,selectedRowIds:h,setSelectedRowIds:y,rows:S,searchQuery:x,isApproveButtonLoading:!1,canEditMembership:d,columnRenderInfo:c,isSubscribed:b,shouldHideActions:j,guestsCount:S.length,onClickApprove:M}}({guests:t,spaceStore:n,internalDomains:s}),j=function(){const e=(0,r().yK)((e=>({suggestions:{transition:"opacity 1s",marginTop:12},suggestionsHidden:{transition:"opacity 1s",opacity:0},titleContainer:{display:"flex",alignItems:"center",gap:6,alignSelf:"stretch",fontSize:"14px",fontStyle:"normal",fontWeight:510,height:32},titleNumber:{color:e.text.tertiary},emptyMessage:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",borderBottom:`1px solid ${e.stroke.primary}`},emptyDivider:{height:1,backgroundColor:e.stroke.secondary},headerContainer:{display:"flex",justifyContent:"space-between",alignItems:"center"},suggestionsMenu:{width:265},hideSuggestionIcon:{height:20,width:20},learnMoreIcon:{height:20,width:20},learnMoreMenuItem:{color:e.text.secondary},learnMoreSection:{paddingTop:4,paddingBottom:4,borderTop:`1px solid ${e.stroke.secondary}`},optionsContainer:{display:"flex",alignItems:"center"},actionsContainer:{display:"flex",borderRadius:6,border:`1px solid ${e.stroke.primary}`,boxShadow:"0px 2px 12px 0px rgba(29, 27, 22, 0.06)"},buttonIcon:{width:20,height:20,paddingTop:1,flexDirection:"column",justifyContent:"center",alignItems:"center",gap:10},buttonText:{fontSize:14,fontWeight:510},buttonContainerApprove:{display:"flex",padding:"0px 12px 0px 0px",justifyContent:"center",alignItems:"center",gap:4,alignSelf:"stretch",color:e.text.uiBluePrimary},approveButton:{borderRadius:"4px 0px 0px 4px",paddingLeft:10,paddingRight:0,height:30}})),[]);return e}(),[C,w]=(0,i.useState)(!0),k=(0,i.useCallback)((()=>{S().D({environment:l,url:(0,Ee().UY)("guides.invitePerson")})}),[l]);if(0===s.length)return null;if(0===f.length)return null;if(!C)return null;const _=m.length>0;return(0,te.jsxs)("div",{style:C?j.suggestions:j.suggestionsHidden,children:[(0,te.jsxs)("div",{style:j.headerContainer,children:[(0,te.jsxs)("div",{style:j.titleContainer,children:[(0,te.jsx)("span",{children:(0,te.jsx)(p()._H,{id:"peopleSectionguestsTab.suggestions.title",defaultMessage:"Suggestions"})}),(0,te.jsx)("span",{style:j.titleNumber,children:x})]}),(0,te.jsx)("div",{style:j.optionsContainer,children:_?(0,te.jsx)("div",{style:j.actionsContainer,children:(0,te.jsx)(Bt().Z,{style:j.approveButton,onClick:b,children:(0,te.jsxs)("div",{style:j.buttonContainerApprove,children:[(0,te.jsx)("div",{style:j.buttonIcon,children:(0,bl().l)({width:20,height:16})}),(0,te.jsx)("div",{style:j.buttonText,children:(0,te.jsx)(p()._H,{id:"spaceSettings.peopleSection.guestsTable.bulkUpgrade",defaultMessage:"Upgrade {numberOfRequests, plural, one {1 guest} other {{numberOfRequests} guests}} to {isSubscribed, select, true {member} other {admin}}",values:{numberOfRequests:m.length,isSubscribed:M}})})]})})}):(0,te.jsx)(ra().ZP,{popupType:ra().Z4.Popup,renderOrigin:e=>(0,te.jsx)($t().Z,{icon:wp().O,ariaLabel:"3 Dots",style:{height:24,width:24},iconStyle:{width:20,height:20},...e}),onClick:()=>{up().b4(l,{from:"guest_suggestions",button_name:"upgrade"})},render:()=>(0,te.jsx)("div",{children:(0,te.jsx)(Qo().Z,{type:Qo().i.Vertical,initialFocus:void 0,style:j.suggestionsMenu,sections:[{key:"hide_suggestions",render:e=>(0,te.jsx)(es().Z,{...e}),items:[{key:"hide_suggestions",render:e=>(0,te.jsx)(Yo().Z,{...e,icon:(0,og().B)(j.hideSuggestionIcon),title:(0,te.jsx)(p()._H,{id:"peopleSectionguestsTab.hideSuggestions",defaultMessage:"Hide Suggestions"})}),action:()=>{w(!1),up().b4(l,{from:"guest_suggestions",button_name:"hide_suggestions"})}}]},{key:"learn_more",render:e=>(0,te.jsx)(es().Z,{...e,style:j.learnMoreSection}),items:[{key:"learn_more",render:e=>(0,te.jsx)(Yo().Z,{...e,icon:(0,Us().m)(j.learnMoreIcon),title:(0,te.jsx)(p()._H,{id:"peopleSectionguestsTab.learnMore",defaultMessage:"Learn more"}),style:j.learnMoreMenuItem}),action:()=>{k(),up().b4(l,{from:"guest_suggestions",button_name:"suggestions_learn_more"})}}]}]})})})})]}),(0,te.jsx)("div",{style:{marginBottom:36,marginTop:4},children:(0,te.jsx)(ce().Dp,{allowHorizontalScroll:y,setStickyHeaderRow:!0,columnRenderInfo:v,rows:pg(f,c),showRowBorders:!0,hideHeaderRowPadding:!0,sortState:c,onSortStateChanged:u,renderNoRowsComponent:()=>(0,te.jsx)(me().Z,{isSmall:!0,style:j.emptyMessage,children:h?(0,te.jsx)(p()._H,{id:"peopleSectionGuestsTab.emptySearch",defaultMessage:"No search results"}):(0,te.jsx)(p()._H,{id:"peopleSectionGuestsTab.emptyRow",defaultMessage:"No guests"})}),styles:d,multiselect:y?{header:{isDisabled:0===f.length,isSelected:m.length>0&&m.length===f.length,onClick:()=>{m.length===f.length?(g([]),up().pZ(l,{from:"guest_suggestions",action:"deselect_all",row_count:m.length})):(g(f.map((e=>e.id))),up().pZ(l,{from:"guest_suggestions",action:"select_all",row_count:f.length}))}},row:{getDisabledState:()=>!1,getSelectedState:e=>m.includes(e.id),onClick:e=>{g((t=>t.includes(e.id)?(up().pZ(l,{from:"guest_suggestions",action:"deselect_row",row_count:1}),t.filter((t=>t!==e.id))):(up().pZ(l,{from:"guest_suggestions",action:"select_row",row_count:1}),t.concat(e.id))))}}}:void 0})})]})}function rg(){const e=(0,r().Fg)();return(0,te.jsx)("div",{style:{color:e.text.secondary},children:(0,te.jsx)(p()._H,{id:"peopleSectionguestsTab.suggestions.reason.approvedEmailDomain",defaultMessage:"Approved email domain"})})}function lg(e){let{spaceStore:t,upgradeMember:n,guestUserStore:s,disabled:a}=e;const l=(0,r().Fg)(),d=(0,o().O7)(),[c,u]=(0,i.useState)(!1);return(0,te.jsx)(Bt().Z,{disabled:a,style:{background:l.tint.uiBlue,color:l.text.uiBluePrimary,fontWeight:510,fontSize:14,borderRadius:4,paddingTop:4,paddingBottom:4,paddingLeft:12,paddingRight:12,marginLeft:24,...a&&{color:l.text.uiBlueTertiary}},hoveredStyle:{background:l.tint.uiBlueHover},onClick:async()=>{u(!0),up().b4(d,{from:"guest_suggestions",button_name:"upgrade"}),await n({environment:d,store:t,guestUserStore:s}),u(!1)},isLoading:c,children:(0,te.jsx)(p()._H,{id:"spaceSettings.peopleSection.suggestionsTable.upgrade",defaultMessage:"Upgrade"})})}const dg={id:"user",headerTitle:(0,te.jsx)("div",{style:{fontSize:14},children:(0,te.jsx)(p()._H,{id:"peopleSectionGuestsTab.guest",defaultMessage:"User"})}),renderCell:e=>(0,te.jsx)(Np,{userId:e.user.userId,spaceStore:e.spaceStore,isInternalGuest:e.isInternalGuest,isForSuggestionsTable:!0}),widthData:{width:210},sortable:!0},cg={id:"access",headerTitle:(0,te.jsx)("div",{style:{paddingLeft:8,fontSize:14},children:(0,te.jsx)(p()._H,{id:"peopleSectionGuestsTab.access",defaultMessage:"Access"})}),renderCell:e=>(0,te.jsx)("div",{style:{display:"flex"},children:(0,te.jsx)(Lp,{guest:e.user,shouldDisableInteraction:e.shouldDisableInteraction})}),widthData:{width:120},sortable:!1},ug={id:"reason",headerTitle:(0,te.jsx)("div",{style:{fontSize:14},children:(0,te.jsx)(p()._H,{id:"peopleSectionguestsTab.suggestions.reason",defaultMessage:"Reason"})}),renderCell:e=>(0,te.jsxs)("div",{style:{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center"},children:[(0,te.jsx)(rg,{}),(0,te.jsx)(lg,{upgradeMember:async t=>{await Cp().s({origin:"suggested_guest_table",isConvertToAdmin:!1,role:e.isSubscribed?"read_and_write":"editor",...t})},spaceStore:e.spaceStore,guestUserStore:e.guestUserStore,disabled:e.shouldDisableInteraction})]}),widthData:{width:256},sortable:!1};function pg(e,t){let{sortAscending:n}=t;const i=m().MR(e,(e=>e.email));return n||i.reverse(),i}function mg(e){let{spaceStore:t,spacePermissionsSettingsStore:n}=e;const i=(0,o().O7)(),s=(0,a().VK)((()=>(0,Zc().A7)()),[]),r=(0,a().VK)((()=>{const e=Mp().Z.getData(i,{spaceId:t.id});return(null==e?void 0:e.filter((e=>e.hasMembers)).map((e=>e.domain)))??[]}),[i,t]),l=(0,nn().tA)({spaceStore:t}),d=(0,yp().IH)({spaceStore:t}),c=(0,nn().oE)({spaceStore:t,requestType:"member"});(0,nn().bn)({requestType:"member",spaceStore:t});const u=(0,nn().Mu)({spaceStore:t,guests:s,internalDomains:r}),p=l&&0!==c.length,m=p||u;return(0,te.jsxs)(te.Fragment,{children:[u&&!p&&(0,te.jsx)(ag,{guests:s,spaceStore:t,internalDomains:r}),p&&(0,te.jsxs)("div",{style:{paddingTop:16,paddingBottom:16},children:[d&&(0,te.jsx)(ig,{currentTab:"members"}),(0,te.jsx)(_m,{requests:c,spaceStore:t,requestType:"member"})]}),(0,te.jsx)(Gm,{spaceStore:t,spacePermissionsSettingsStore:n,shouldShowHeading:m}),u&&p&&(0,te.jsx)(ag,{guests:s,spaceStore:t,internalDomains:r})]})}function gg(e){let{recentRecoverableUser:t,spaceStore:s}=e;const{environment:a,styles:l,handleReprovisionToUserChange:d,userId:c,selectedTransferToUser:u}=function(e){let{recentRecoverableUser:t,spaceStore:n}=e;const s=(0,r().yK)((e=>({container:{display:"flex",width:"100%",justifyContent:"flex-end"},button:{display:"flex",width:24,height:24,justifyContent:"center",alignItems:"center",gap:10,paddingLeft:0,paddingRight:0},buttonIcon:{width:20,height:20,fill:e.icon.secondary},removeMenuDivider:{borderTop:e.stroke.secondary},upgradeIcon:{width:17,height:17}})),[]),a=(0,o().O7)(),[l,d]=(0,i.useState)(),c=(0,i.useCallback)((async(e,i)=>{const{accept:o}=await x().gt({message:(0,te.jsx)(p()._H,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmationMessage",defaultMessage:"Transfer their private pages?"}),description:(0,te.jsx)(p()._H,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmationDescription",defaultMessage:"This action cannot be undone."}),acceptLabel:(0,te.jsx)(p()._H,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmButton.label",defaultMessage:"Transfer private pages"})});if(!o)return;d(i);const s=await Z().callApi({eventName:"transferSpaceUserContent",environment:a,data:{spaceId:n.id,fromUserId:e,toUserId:i}});"failed"===s.type?x().x2(s):(t.privatePagesCount=0,Up().default.setState({...Up().default.state,recentRecoverableUsers:[...Up().default.state.recentRecoverableUsers.filter((t=>t.userId!==e)),t]}))}),[a,n,t]);return{environment:a,styles:s,handleReprovisionToUserChange:c,userId:t.userId,selectedTransferToUser:l}}({recentRecoverableUser:t,spaceStore:s});return c?(0,te.jsx)("div",{style:l.container,children:(0,te.jsx)(ra().ZP,{popupType:ra().Z4.Popup,onClick:()=>{up().b4(a,{from:"recently_left",button_name:"actions"})},renderOrigin:e=>(0,te.jsx)(Bt().Z,{style:l.button,...e,children:(0,te.jsx)(te.Fragment,{children:(0,wp().O)(l.buttonIcon)})}),render:()=>(0,te.jsx)("div",{children:(0,te.jsx)(Qo().Z,{type:Qo().i.Vertical,initialFocus:void 0,sections:[{key:"transfer",render:e=>(0,te.jsx)(es().Z,{...e,style:l.removeMenuDivider}),items:[{key:"transfer",render:e=>(0,te.jsx)(n(237427).Z,{mode:q().z.Button,focused:!1,title:(0,te.jsx)(p()._H,{id:"spacePermissionsSettings.reprovision.toUser.title",defaultMessage:"Transfer private pages"}),parentStore:s,userIds:u?[u]:[],onChange:e=>{let[t]=e;d(c,t)}}),action:()=>{up().b4(a,{from:"recently_left",button_name:"open_transfer_ownership"})}}]}]})})})}):null}function fg(e){let{spaceStore:t,recentRecoverableUsers:n}=e;const i=(0,r().yK)((e=>({icon:{fontSize:14,fontWeight:510,fill:e.icon.secondary}})),[]);return(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)("div",{style:{paddingTop:16,paddingBottom:16},children:(0,te.jsx)(Ga,{leftIcon:(0,Js().D)(i.icon),content:(0,te.jsx)(p()._H,{id:"peopleSectionReprovisioningTab.settingsDeeplinkBannerTitle",defaultMessage:"People left the workspace in the past 30 days and had private pages appear here"})})}),(0,te.jsx)(hg,{recentRecoverableUsers:n,spaceStore:t})]})}function hg(e){let{spaceStore:t,recentRecoverableUsers:n}=e;const{rows:o,sortState:s,setSortState:l,tableStyles:d}=function(e){let{recentRecoverableUsers:t,spaceStore:n}=e;const o=(0,r().yK)((e=>(0,ce().bE)({columnRenderInfo:vg,theme:e,containerMarginTop:0})),[]),[s,l]=(0,i.useState)({column:vg[0],sortAscending:!0}),d=(0,a().VK)((()=>t.map((e=>{const t=J().U6.createChildStore(n,{table:R().KJ,id:e.userId});return{spaceStore:n,reprovisioningUser:e,email:t.getEmail(),id:e.userId,isClickable:!1}}))),[n,t]);return{rows:d,sortState:s,setSortState:l,tableStyles:o}}({recentRecoverableUsers:n,spaceStore:t}),c=(0,r().yK)((e=>({noRowContainer:{display:"flex",height:32,padding:"0px 4px",alignItems:"center",borderBottom:`1px solid ${e.stroke.primary}`}})),[]);return(0,te.jsx)("div",{style:{marginTop:4},children:(0,te.jsx)(ce().Dp,{setStickyHeaderRow:!0,maxHeight:500,columnRenderInfo:vg,rows:xg(o,s),showRowBorders:!0,hideHeaderRowPadding:!0,sortState:s,onSortStateChanged:l,renderNoRowsComponent:()=>(0,te.jsx)(me().Z,{isSmall:!0,style:c.noRowContainer,children:(0,te.jsx)(p()._H,{id:"peopleSectionReprovisioningTab.noUser",defaultMessage:"No recent left user"})}),styles:d})})}function yg(e){let{userLeftTime:t}=e;const n=(0,p().YB)(),i=(0,a().VK)((()=>{const e=_().CQ(t,(0,W().r)());return(0,ba().ZV)({value:e,date_format:"relative",userTimeZone:(0,W().r)(),intl:n,allowRelativeDates:!0})}),[t,n]);return(0,te.jsx)(me().Z,{isSmall:!0,children:i})}const vg=[{id:"user",headerTitle:(0,te.jsx)("div",{style:{fontSize:14},children:(0,te.jsx)(p()._H,{id:"peopleSectionReprovisioningTab.user",defaultMessage:"User"})}),renderCell:e=>(0,te.jsx)(Np,{userId:e.reprovisioningUser.userId,spaceStore:e.spaceStore}),widthData:{width:220},sortable:!0},{id:"pageCount",headerTitle:(0,te.jsx)("div",{style:{fontSize:14},children:(0,te.jsx)(p()._H,{defaultMessage:"Private pages",id:"peopleSectionReprovisioningTab.privatePages"})}),renderCell:e=>(0,te.jsx)(me().Z,{isSmall:!0,children:e.reprovisioningUser.privatePagesCount}),widthData:{width:100},sortable:!1},{id:"leftTime",headerTitle:(0,te.jsx)("div",{style:{fontSize:14},children:(0,te.jsx)(p()._H,{defaultMessage:"Left workspace",id:"peopleSectionReprovisioningTab.leftTime"})}),renderCell:e=>(0,te.jsx)(yg,{userLeftTime:e.reprovisioningUser.userLeftTime}),widthData:{width:100},sortable:!1},{id:"actions",headerTitle:"",renderCell:e=>(0,te.jsx)(gg,{recentRecoverableUser:e.reprovisioningUser,spaceStore:e.spaceStore}),widthData:{width:100},sortable:!1}];function xg(e,t){let{sortAscending:n}=t;const i=m().MR(e,(e=>e.email));return n||i.reverse(),i}var bg=()=>n(619186),Sg=()=>n(458196),Mg=()=>n(123638);const jg=(0,gt().IU)("arrowDownPage",{viewBox:"0 0 14 18",svg:(0,te.jsx)("path",{d:"M7.67969 9.39844V11.7891L7.61719 13.0078L8.21875 12.3828L8.8125 11.7656C8.875 11.7031 8.94531 11.6536 9.02344 11.6172C9.10677 11.5755 9.19271 11.5547 9.28125 11.5547C9.45312 11.5547 9.59635 11.612 9.71094 11.7266C9.83073 11.8411 9.89062 11.9844 9.89062 12.1562C9.89062 12.2552 9.8724 12.3411 9.83594 12.4141C9.79948 12.487 9.74479 12.5573 9.67188 12.625L7.51562 14.6016C7.42708 14.6849 7.34115 14.7448 7.25781 14.7812C7.17969 14.8177 7.09375 14.8359 7 14.8359C6.90104 14.8359 6.8125 14.8177 6.73438 14.7812C6.65625 14.7448 6.57031 14.6849 6.47656 14.6016L4.32031 12.625C4.2474 12.5573 4.19271 12.487 4.15625 12.4141C4.11979 12.3411 4.10156 12.2552 4.10156 12.1562C4.10156 11.9844 4.15885 11.8411 4.27344 11.7266C4.39323 11.612 4.54167 11.5547 4.71875 11.5547C4.79688 11.5547 4.8776 11.5755 4.96094 11.6172C5.04427 11.6536 5.11719 11.7031 5.17969 11.7656L5.77344 12.3828L6.375 13.0078L6.32031 11.7891V9.39844C6.32031 9.21615 6.38542 9.0625 6.51562 8.9375C6.65104 8.80729 6.8125 8.74219 7 8.74219C7.18229 8.74219 7.34115 8.80729 7.47656 8.9375C7.61198 9.0625 7.67969 9.21615 7.67969 9.39844ZM2.83594 17.3203C1.9974 17.3203 1.36458 17.1042 0.9375 16.6719C0.510417 16.2396 0.296875 15.6016 0.296875 14.7578V2.96875C0.296875 2.13021 0.510417 1.49479 0.9375 1.0625C1.36458 0.625 1.9974 0.40625 2.83594 0.40625H6.60156C6.92969 0.40625 7.21615 0.429688 7.46094 0.476562C7.70573 0.518229 7.93229 0.598958 8.14062 0.71875C8.34896 0.833333 8.5625 1.0026 8.78125 1.22656L12.875 5.39062C13.1042 5.61979 13.276 5.84115 13.3906 6.05469C13.5104 6.26302 13.5911 6.49479 13.6328 6.75C13.6745 7 13.6953 7.30729 13.6953 7.67188V14.7578C13.6953 15.5964 13.4818 16.2318 13.0547 16.6641C12.6276 17.1016 11.9948 17.3203 11.1562 17.3203H2.83594ZM2.96094 15.7812H11.0312C11.4115 15.7812 11.6953 15.6849 11.8828 15.4922C12.0703 15.2995 12.1641 15.0234 12.1641 14.6641V7.88281H7.95312C7.39583 7.88281 6.97917 7.74479 6.70312 7.46875C6.43229 7.19271 6.29688 6.77604 6.29688 6.21875V1.9375H2.96875C2.58854 1.9375 2.30469 2.03646 2.11719 2.23438C1.92969 2.43229 1.83594 2.71094 1.83594 3.07031V14.6641C1.83594 15.0234 1.92969 15.2995 2.11719 15.4922C2.30469 15.6849 2.58594 15.7812 2.96094 15.7812ZM8.10156 6.53125H11.9531L7.64844 2.14844V6.07031C7.64844 6.23177 7.68229 6.34896 7.75 6.42188C7.82292 6.49479 7.9401 6.53125 8.10156 6.53125Z"})});function Cg(e){let{spaceStore:t}=e;const{styles:n,shouldEnableExportGuests:s,handleExportGuestsClick:l}=function(e){let{spaceStore:t}=e;const n=(0,r().yK)((e=>({button:{display:"flex",width:28,height:28,justifyContent:"center",gap:10,alignItems:"center"},buttonIcon:{width:20,height:20,fontSize:16,fontStyle:"normal",flexDirection:"column",flexShrink:0,fontWeight:510,fill:e.icon.secondary}})),[]),s=(0,a().VK)((()=>{const{currentSpaceStore:e}=et().default.state,t=_t().subscriptionDataStoreInstance.state;return Boolean(e&&t&&"subscribed_admin"===t.type&&ye().default.checkGate({gateName:"enable_guest_export"}))}),[]),l=(0,o().O7)(),d=(0,p().YB)(),c=(0,i.useCallback)((()=>{const e=_t().subscriptionDataStoreInstance.state;if(t&&e&&"subscribed_admin"===e.type){const n=(0,Zc().ND)(e);yl().Mj(l,{intl:d,spaceStore:t,guests:n})}}),[l,d,t]);return{styles:n,shouldEnableExportGuests:s,handleExportGuestsClick:c}}({spaceStore:t});return s?(0,te.jsx)(pe().Z,{render:e=>(0,te.jsx)(Bt().Z,{style:n.button,onClick:l,...e,children:jg(n.buttonIcon)}),renderTooltip:()=>(0,te.jsx)(p()._H,{id:"exportGuestsButton.label",defaultMessage:"Export guests as CSV"})}):null}var wg=()=>n(528918),kg=()=>n(837341),_g=()=>n(123398),Tg=()=>n(936879),Ig=()=>n(563946),Pg=()=>n(21062);function Ag(e){let{spaceStore:t,origin:n,requestFrom:s,inviteFrom:r}=e;const{shouldShowRequestMemberButtion:l,canEditMembership:d}=(0,a().VK)((()=>({shouldShowRequestMemberButtion:!t.canEditMembership()&&!t.getDisableMembershipRequests()&&(0,ge().p1)(),canEditMembership:t.canEditMembership()})),[t]),c=(0,a().VK)((()=>{const e=_t().subscriptionDataStoreInstance.state;return Boolean(e&&Zc().YK(e))}),[]),{isMobile:u}=(0,o().Fy)(),m=(0,a().VK)((()=>{var e;return null===(e=et().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),g=(0,An().VX)({name:"slack_imports_invite",spaceId:t.id,userId:m}),f=(0,a().VK)((()=>(0,Ig().shouldEnableSlackImportsInvite)({canEditPermission:d,isMobile:u,hasAccessToFeature:g})),[d,u,g]),h=(0,i.useCallback)((()=>{const e=(0,p().vU)({updatingPermissions:{id:"spacePermissionsSettings.updatePermissionsMessage",defaultMessage:"Updating…"}});wg().j({message:e.updatingPermissions})}),[]),y=(0,i.useCallback)((()=>{wg().x()}),[]),v=(0,o().O7)(),x=(0,i.useCallback)((()=>{(0,Tg().i)(v)}),[v]);return l?(0,te.jsx)(_g().sf,{store:t,analyticsFrom:s,origin:n?(0,te.jsx)("div",{onClick:x,children:n}):(0,te.jsx)(kn().Z,{isLarge:!0,onClick:x,children:(0,te.jsx)(p()._H,{id:"inviteUserButton.requestMemberLabel",defaultMessage:"Add members"})})}):(0,te.jsx)(Pg().N,{step:"collaborate_add_member",isFullWidth:!1,showContentOverlays:!1,children:(0,te.jsx)(kg().r,{disabled:!d,store:t,onInviteClick:h,onInviteComplete:y,isSubscribed:c,membersOnly:!1,upgradeButtonName:"space_permission_settings",shouldGrow:!1,enableInviteDropdown:f,origin:n,analyticsFrom:r})})}function Rg(e){let{spaceStore:t,currentTab:n,spacePermissionsSettingsStore:o}=e;return(0,i.useEffect)((()=>()=>{Up().default.reset()}),[]),(0,te.jsxs)("div",{style:{display:"flex",height:34,paddingBottom:0,justifyContent:"flex-end",alignItems:"center",gap:10},children:[(0,te.jsxs)("div",{style:{display:"flex",height:28,justifyContent:"flex-end",alignItems:"center",gap:4},children:[(0,te.jsx)(Mg().Z,{handleSearchQueryChange:e=>{Up().default.setState({...Up().default.state,searchQuery:e}),n===Jn().Q.Groups&&o.setState({...o.state,groupsFilter:e??""})},currentTab:n,isSearchBarAlwaysOpen:!0}),n===Jn().Q.Guests?(0,te.jsx)(Cg,{spaceStore:t}):null]}),(0,te.jsx)("div",{style:{paddingBottom:2},children:(0,te.jsx)(Zg,{spaceStore:t,currentTab:n,spacePermissionsSettingsStore:o})})]})}function Zg(e){let{spaceStore:t,currentTab:n,spacePermissionsSettingsStore:s}=e;const{canUseGroups:r,canCreateGroups:l,handleCreateGroupClick:d,shouldShowRequestMemberButtion:c,canEditMembership:u}=function(e){let{spaceStore:t,currentTab:n,spacePermissionsSettingsStore:s}=e;const r=(0,yp().VJ)(),l=(0,yp().eA)({spaceStore:t}),d=(0,o().O7)(),c=(0,i.useCallback)((()=>{w().createAndCommit({userAction:"PeopleSectionGroupsTab.handleCreateGroupClick",environment:d,canUndo:!0,perform:e=>{const n=M().mo({spaceStore:t,transaction:e});if(n){s.setState({...s.state,editingNameGroupId:n.getGroupId(),groupNameInputValue:""});const e=Nr().kk5.fromValue(Sg().GQ,n.getValue()),t=[...pp().Z.state.permissionGroupsAndMemberCounts,{group:e,memberCount:0}],i=(0,bg().ZP)(s.state.groupsFilter,t,(e=>e.group.name||""));pp().Z.setState({...pp().Z.state,permissionGroupsAndMemberCounts:i})}}})}),[d,t,s]),u=(0,a().VK)((()=>!t.canEditMembership()&&!t.getDisableMembershipRequests()&&(0,ge().p1)()),[t]),p=(0,yp().eA)({spaceStore:t});return{canUseGroups:r,canCreateGroups:l,shouldShowRequestMemberButtion:u,canEditMembership:p,handleCreateGroupClick:c}}({spaceStore:t,currentTab:n,spacePermissionsSettingsStore:s});return n===Jn().Q.Groups&&r?l?(0,te.jsx)(pe().Z,{renderTooltip:()=>!l&&(0,te.jsx)(p()._H,{id:"spacePermissionsSettings.groupsTab.groupCreationInsufficientPermissions",defaultMessage:"Only membership admins and workspace owners can add a permission group."}),render:e=>(0,te.jsx)(kn().Z,{isLarge:!0,onClick:d,...e,children:(0,te.jsx)(p()._H,{id:"spacePermissionsSettings.groupsTab.createGroupButton.label",defaultMessage:"Create a group"})})}):null:c||u?(0,te.jsx)(Ag,{spaceStore:t,requestFrom:"space_settings_add_members",inviteFrom:"space_settings_add_members"}):null}var Bg=()=>n(35724);function Dg(){const e=(0,a().VK)((()=>{const e=et().default.state.currentSpaceStore;if(null!=e&&e.isDefined())return e}),[]),t=(0,a().VK)((()=>Ot().default.state.online),[]),n=(0,a().Kw)(_t().subscriptionDataStoreInstance),i=(0,gp().$)({spaceId:null==e?void 0:e.id}),o=(0,a().qz)(void 0,Jn().Z);return e&&n?t?(0,te.jsxs)(Rt().ZP,{children:[(0,te.jsx)(Dm().ZP,{spaceStore:e,inviteLinkCode:i,spacePermissionsSettingsStore:o}),(0,te.jsx)(Og,{subscriptionData:n,spaceStore:e,spacePermissionsSettingsStore:o})]}):(0,te.jsx)(Rt().ZP,{children:(0,te.jsx)(me().Z,{isSmall:!0,style:{textAlign:"center"},children:(0,te.jsx)(p()._H,{id:"spacePermissionsSettings.offlineMessage",defaultMessage:"Please go online to manage members."})})}):(0,te.jsx)(Lg,{})}function Lg(){return(0,te.jsx)(oi().Z,{style:{margin:"calc(50% - 1em) auto"}})}function Og(e){var t;let{subscriptionData:n,spaceStore:s,spacePermissionsSettingsStore:l}=e;(0,i.useEffect)((()=>{if(ct().default.state.open&&"members"===ct().default.state.currentTab&&ct().default.state.defaultSubtab){const e=ct().default.state.defaultSubtab!==Jn().Q.Requests?ct().default.state.defaultSubtab:Jn().Q.Members;l.setState({...l.state,currentTab:e})}}),[l]);const{memberCount:d,recentRecoverableUsers:c,currentTab:u,canReprovisionContent:m,tabs:g,currentTabs:f,environment:h,billingData:y}=function(e){let{subscriptionData:t,spaceStore:n,spacePermissionsSettingsStore:i}=e;const s=(0,o().O7)(),l=(0,It().V)(t),d=(0,Sn().Y)(t);(0,yp().yE)({spaceStore:n,subscriptionData:t});const c=(0,a().VK)((()=>{const{recentRecoverableUsers:e}=Up().default.state;return e.filter((e=>e.privatePagesCount>0))}),[]),u=(0,a().VK)((()=>i.state.currentTab),[i]),m=(0,yp().JJ)({spaceStore:n,subscriptionData:t}),g=(0,nn().O4)({spaceStore:n,requestType:"guest"}),f=(0,nn().O4)({spaceStore:n,requestType:"member"}),h=(0,r().yK)((e=>({activeTabStyle:{color:e.regularTextColor},inactiveTabStyle:{color:e.lightTextColor},redDot:{background:e.redBadgeBackground,marginLeft:6,marginTop:6}})),[]),y=(0,a().VK)((()=>{const e=pp().Z.state.permissionGroupsAndMemberCounts.length;return l?{[Jn().Q.Members]:(0,te.jsx)(Ug,{text:(0,te.jsx)("div",{children:(0,te.jsx)(p()._H,{id:"spacePermissionsSettings.membersTab.title",defaultMessage:"Members"})}),number:l,isCurrentTab:u===Jn().Q.Members,styles:h,unread:(f??0)>0}),[Jn().Q.Guests]:(0,te.jsx)(Ug,{text:(0,te.jsx)(p()._H,{id:"spacePermissionsSettings.guestsTab.title",defaultMessage:"Guests"}),number:d,isCurrentTab:u===Jn().Q.Guests,styles:h,unread:(g??0)>0}),[Jn().Q.Groups]:(0,te.jsx)(Ug,{text:(0,te.jsx)(p()._H,{id:"spaceBasicSettings.groupsTab.title",defaultMessage:"Groups"}),number:e,isCurrentTab:u===Jn().Q.Groups,styles:h}),[Jn().Q.Reprovisioning]:(0,te.jsx)(Ug,{text:(0,te.jsx)(p()._H,{id:"spaceBasicSettings.reprovisioningTab.title",defaultMessage:"Recently left"}),number:c.length,isCurrentTab:u===Jn().Q.Reprovisioning,styles:h}),[Jn().Q.Requests]:(0,te.jsx)(p()._H,{id:"spaceBasicSettings.requestsTab.title",defaultMessage:"Requests"})}:{}}),[l,d,u,h,f,g,c.length]),v=Vg(m),x=(0,Wt().pQ)({spaceId:n.id}),b=v.map((e=>y[e]));return{billingData:x,memberCount:l,recentRecoverableUsers:c,currentTab:u,canReprovisionContent:m,tabs:b,currentTabs:v,environment:s}}({subscriptionData:n,spaceStore:s,spacePermissionsSettingsStore:l}),v=(0,fp().Z)(s),x=(0,mp().kw)(s.id,null==y?void 0:y.subscription,d),b=v&&u===Jn().Q.Members&&(null==y?void 0:y.subscription);return(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(mi().Z,{tabs:g,selectedIndex:f.indexOf(u),onChange:e=>function(e){let{newSelectedIndex:t,environment:n,spacePermissionsSettingsStore:i,currentTab:o,canReprovisionContent:s}=e;const a=Vg(s)[t];switch(a){case Jn().Q.Members:up().qT(n,{tab:"members"});break;case Jn().Q.Groups:up().qT(n,{tab:"groups"});break;case Jn().Q.Guests:up().qT(n,{tab:"guests"});break;case Jn().Q.Reprovisioning:up().qT(n,{tab:"reprovisioning"});break;case Jn().Q.Requests:up().qT(n,{tab:"requests"});break;default:(0,gn().t1)(a)}o===Jn().Q.Requests&&a!==Jn().Q.Requests&&ut().Z.reset();i.setState({...i.state,currentTab:a})}({newSelectedIndex:e,environment:h,spacePermissionsSettingsStore:l,currentTab:u,canReprovisionContent:m}),style:{paddingLeft:0,paddingRight:0,marginTop:-6},tabTitleStyle:{fontSize:16,fontWeight:400},tabBorderStyle:{left:0,right:0},right:(0,te.jsx)(Rg,{spaceStore:s,currentTab:u,spacePermissionsSettingsStore:l})}),b?(0,te.jsx)("div",{style:{margin:"20px 0 20px 0"},children:(0,te.jsx)(Bg().F,{quantityOfPaidSeats:x,quantityOfSpaceMembers:d,nextBillingDate:(null===(t=y.subscription)||void 0===t?void 0:t.currentPeriodEnd.toLocaleString({month:"short",day:"numeric",year:"numeric"}))??""})}):null,(0,te.jsx)(Hg,{currentTab:u,spaceStore:s,spacePermissionsSettingsStore:l,recentRecoverableUsers:c})]})}function Hg(e){let{currentTab:t,spaceStore:n,spacePermissionsSettingsStore:i,recentRecoverableUsers:o}=e;switch(t){case Jn().Q.Members:return(0,te.jsx)(mg,{spaceStore:n,spacePermissionsSettingsStore:i});case Jn().Q.Guests:return(0,te.jsx)(Bm,{spaceStore:n});case Jn().Q.Groups:return(0,te.jsx)(Sp,{spaceStore:n,spacePermissionsSettingsStore:i});case Jn().Q.Reprovisioning:return(0,te.jsx)(fg,{spaceStore:n,recentRecoverableUsers:o});default:return null}}function Vg(e){return[Jn().Q.Members,Jn().Q.Guests,Jn().Q.Groups,...e?[Jn().Q.Reprovisioning]:[]]}function Ug(e){let{text:t,number:n,isCurrentTab:i,unread:o,styles:s}=e;return(0,te.jsxs)("div",{style:{display:"flex",fontSize:g().JB.UIRegular.desktop,fontWeight:g().Ue.medium,lineHeight:"18px",...i?s.activeTabStyle:s.inactiveTabStyle},children:[t,n&&n>0?(0,te.jsx)("div",{style:{fontSize:g().JB.UIRegular.desktop,lineHeight:"18px",paddingLeft:4,...s.inactiveTabStyle},children:n}):void 0,o&&(0,te.jsx)(hp().z,{style:s.redDot,size:6})]})}var Eg=()=>n(391598),Ng=()=>n(37428),Fg=()=>n(586270),Kg=()=>n(17064),zg=()=>n(436614),Wg=()=>n(606021),qg=()=>n(270820),Gg=()=>n(465755),Yg=()=>n(442219),$g=()=>n(61738),Xg=()=>n(397540);function Qg(e){let{selectItems:t,currentSelectedItem:n,onChange:i,icon:o}=e;const s=(0,r().yK)((()=>({filterWrap:{marginRight:0}})),[]);return(0,te.jsx)(Xg().Z,{items:t,getKey:e=>e.key,selectedItem:n,onSelect:i,renderItem:e=>(0,te.jsx)(Yo().Z,{title:e.value.name,...e,checkState:n.key===e.value.key}),renderOrigin:e=>(0,te.jsx)($g().Z,{...e,title:n.originName??n.name,on:!n.showFilterAsOffWhenSelected,icon:o,wrapStyle:s.filterWrap})})}const Jg={[zg().ii]:{key:zg().ii,name:(0,te.jsx)(p()._H,{id:"manageTeamsAccessFilter.accessFilter.filterAllTeams",defaultMessage:"Any"}),originName:(0,te.jsx)(p()._H,{id:"manageTeamsAccessFilter.accessSelectPlaceolder",defaultMessage:"Access"}),showFilterAsOffWhenSelected:!0},[zg().nu]:{key:zg().nu,name:(0,te.jsx)(p()._H,{id:"manageTeamsAccessFilter.accessFilter.filterOpenTeams",defaultMessage:"Open"})},[zg().XI]:{key:zg().XI,name:(0,te.jsx)(p()._H,{id:"manageTeamsAccessFilter.accessFilter.filterClosedTeams",defaultMessage:"Closed"})},[zg().TI]:{key:zg().TI,name:(0,te.jsx)(p()._H,{id:"manageTeamsAccessFilter.accessFilter.filterPrivateTeams",defaultMessage:"Private"})}},ef=m().oA([Jg[zg().ii],Jg[zg().nu],Jg[zg().XI],Jg[zg().TI]]);function tf(e){let{manageTeamsStore:t}=e;const n=(0,o().O7)(),s=(0,a().VK)((()=>t.state.filterAccess),[t]),l=(0,r().yK)((e=>({keyIcon:{width:18,height:18,...s!==zg().ii?{fill:Vo().ZP.blue}:{fill:e.mediumIconColor}}})),[s]),d=(0,i.useCallback)((e=>{t.update((t=>({...t,filterAccess:e.key}))),Gg().GZ(n,{filter:"access",value:e.key})}),[t,n]),c=Jg[s];return(0,te.jsx)(Qg,{selectItems:ef,currentSelectedItem:c,onChange:d,icon:(0,Yg().f)(l.keyIcon)})}const nf=(0,gt().IU)("archiveFilled",{viewBox:"0 0 16 16",svg:(0,te.jsx)("path",{d:"M2.16211 5.06934H13.5029C14.2754 5.06934 14.665 4.61133 14.665 3.8457V3.22363C14.665 2.45801 14.2754 2 13.5029 2H2.16211C1.43066 2 1 2.45801 1 3.22363V3.8457C1 4.61133 1.38965 5.06934 2.16211 5.06934ZM4.08301 14.585H11.582C12.9287 14.585 13.6465 13.8877 13.6465 12.5479V6.00586H2.01855V12.5479C2.01855 13.8945 2.73633 14.585 4.08301 14.585ZM5.58008 8.47363C5.29297 8.47363 5.09473 8.27539 5.09473 7.97461V7.7627C5.09473 7.46191 5.29297 7.27051 5.58008 7.27051H10.0918C10.3789 7.27051 10.584 7.46191 10.584 7.7627V7.97461C10.584 8.27539 10.3789 8.47363 10.0918 8.47363H5.58008Z"})}),of="showArchived",sf="hideArchived",af={[sf]:{key:sf,name:(0,te.jsx)(p()._H,{id:"manageTeamsArchivedFilter.archivedFilter.hideArchivedTeams",defaultMessage:"Active"}),originName:(0,te.jsx)(p()._H,{id:"manageTeamsArchivedFilter.archivedSelectPlaceolder",defaultMessage:"Active"}),showFilterAsOffWhenSelected:!0},[of]:{key:of,name:(0,te.jsx)(p()._H,{id:"manageTeamsArchivedFilter.archivedFilter.showArchivedTeams",defaultMessage:"Archived"})}};function rf(e){let{manageTeamsStore:t}=e;const n=(0,o().O7)(),s=(0,a().VK)((()=>t.state.showOnlyArchivedTeams),[t]),l=(0,r().yK)((e=>({archiveIcon:{width:16,height:16,marginRight:5,...s?{fill:Vo().ZP.blue}:{fill:e.mediumIconColor}}})),[s]),d=[af[sf],af[of]],c=(0,i.useCallback)((e=>{t.update((t=>({...t,showOnlyArchivedTeams:e.key===of}))),Gg().GZ(n,{filter:"archived",value:e.key})}),[t,n]),u=af[s?of:sf];return(0,te.jsx)(Qg,{selectItems:d,currentSelectedItem:u,onChange:c,icon:nf(l.archiveIcon)})}n(749411);const lf="ShowTeamsWithNoOwnersId";function df(e){let{teamStores:t,manageTeamsStore:n}=e;const s=(0,o().O7)(),l=(0,a().VK)((()=>n.state.filterByOwner),[n]),d=function(e){switch(e.type){case zg().uY:return;case zg().yj:return e.id;case zg().R7:return lf;default:(0,gn().t1)(e)}}(l),c=(0,a().VK)((()=>et().default.state.currentSpaceStore),[]),u=(0,p().YB)(),g=(0,a().VK)((()=>{const e=t.flatMap((e=>e.getOwnerUserIds()));return m().jj(e)}),[t]),f=(0,r().yK)((e=>({icon:{marginRight:2,fill:e.mediumIconColor},blueFill:{fill:Vo().ZP.blue}})),[]),h=(0,i.useCallback)((e=>{if(c)return(0,Yi().o)({userId:e,currentSpaceStore:c}).getValue()}),[c]),y=(0,i.useCallback)((e=>{const t=e[e.length-1];let i;i=t===d||void 0===t?{type:zg().uY}:t===lf?{type:zg().R7}:{type:zg().yj,id:t},n.update((e=>({...e,filterByOwner:i}))),Gg().GZ(s,{filter:"owner",value:i.type})}),[d,n,s]),v=(0,Pe().XJ)(L().x.searchActions),x=(0,i.useCallback)((async e=>{let{query:t}=e;if(!c||"resolved"!==v.status)return[];const n=v.value,i=(await n.searchUsers({environment:s,query:t,parentStore:c,userIds:g})).map((e=>e.id));return""===t?[lf,...i]:i}),[s,c,g,v.status,v.value]),b=(0,i.useCallback)(((e,t)=>{if(!c)return null;if(e===lf)return(0,te.jsx)(Yo().Z,{...t,title:(0,te.jsx)(p()._H,{id:"manageTeamsOwnerFilter.noOwnersFilterOption",defaultMessage:"No owners"}),checkState:l.type===zg().R7,className:"notranslate"});const n=h(e);return n?(0,i.createElement)(X().Z,{...t,key:e,actor:(0,Y().m3)(n),checkState:d===e}):null}),[c,h,d,l.type]),S=(0,a().VK)((()=>{if(l.type!==zg().yj)return;const e=h(l.id);return e?(0,Cl().Nz)(u,e):void 0}),[l,h,u]);let M;return M=l.type===zg().R7?(0,te.jsx)(p()._H,{id:"manageTeamsOwnerFilter.filterTitle.onlyOrphanedTeams",defaultMessage:"Owner: None"}):S?(0,te.jsx)(p()._H,{id:"manageTeamsOwnerFilter.filterTitle.withSpecifiedOwner",defaultMessage:"Owner: {teamOwnerName}",values:{teamOwnerName:S}}):(0,te.jsx)(p()._H,{id:"manageTeamsOwnerFilter.filterTitle.unset",defaultMessage:"Owner"}),(0,te.jsx)(q().Z,{mode:q().z.Pill,title:M,disabled:0===t.length,icon:Q().f,iconStyles:{...f.icon,...l.type!==zg().uY&&f.blueFill},items:m().oA([d]),hasItemsSelected:(0,gn().$K)(d),onChange:y,labelText:{title:M,tokenInputPlaceholder:u.formatMessage({defaultMessage:"Search teamspace owner...",id:"manageTeamsOwnerFilter.searchOwner.placeholder"}),resultSectionTitle:u.formatMessage({defaultMessage:"Select users",id:"manageTeamsOwnerFilter.searchOwner.resultsTitle"}),componentDebugName:"ManageTeamsSearchOwnerFilter"},performRequest:x,renderResultMenuItem:b,renderToken:()=>null,renderFilter:()=>null,renderItemForSummary:()=>null,addItemLabel:null,focused:!1})}const cf="showAll",uf="showTeamsWithSecurityOverrides",pf={[cf]:{key:cf,name:(0,te.jsx)(p()._H,{id:"ManageTeamsSecurityOverridesFilter.showAllOption",defaultMessage:"Show all"}),originName:(0,te.jsx)(p()._H,{id:"ManageTeamsSecurityOverridesFilter.showAllPlaceholder",defaultMessage:"Security"}),showFilterAsOffWhenSelected:!0},[uf]:{key:uf,name:(0,te.jsx)(p()._H,{id:"ManageTeamsSecurityOverridesFilter.showTeamsWithSecurityOverrides",defaultMessage:"Has overrides"})}};function mf(e){let{manageTeamsStore:t}=e;const n=(0,o().O7)(),s=(0,a().VK)((()=>t.state.showTeamsWithSecurityOverrides),[t]),l=(0,r().yK)((e=>({securityIcon:{width:14,height:14,marginRight:5,fill:e.mediumIconColor},blueFill:{fill:Vo().ZP.blue}})),[]),d=[pf[cf],pf[uf]],c=(0,i.useCallback)((e=>{t.setState({...t.state,showTeamsWithSecurityOverrides:e.key===uf}),Gg().GZ(n,{filter:"securityOverrides",value:e.key})}),[t,n]),u=pf[s?uf:cf];return(0,te.jsx)(Qg,{selectItems:d,currentSelectedItem:u,onChange:c,icon:(0,Po().X)({...l.securityIcon,...s&&l.blueFill})})}const gf=16,ff=5;function hf(e){let{manageTeamsStore:t,teamStores:n}=e;const o=(0,r().yK)((()=>({container:{display:"flex",alignItems:"center",marginTop:20,flexWrap:"wrap",gap:`${gf}px ${ff}px`},searchContainer:{maxWidth:250,marginRight:"auto"},archivedTeamsSwitch:{display:"flex",alignItems:"center",marginLeft:15,marginRight:15},archivedTeamsLabel:{marginLeft:10},dropdownContainer:{display:"flex",alignContent:"stretch",flexWrap:"wrap",gap:`${gf}px ${ff}px`}})),[]),s=(0,a().VK)((()=>t.state.searchQuery),[t]),l=(0,i.useCallback)((e=>{t.update((t=>({...t,searchQuery:e})))}),[t]);return(0,te.jsxs)("div",{style:o.container,children:[(0,te.jsx)(yf,{style:o.searchContainer,onChange:l,value:s}),(0,te.jsxs)("div",{style:o.dropdownContainer,children:[(0,te.jsx)(rf,{manageTeamsStore:t}),(0,te.jsx)(df,{teamStores:n,manageTeamsStore:t}),(0,te.jsx)(tf,{manageTeamsStore:t}),(0,te.jsx)(mf,{manageTeamsStore:t})]})]})}function yf(e){let{style:t,value:n,onChange:o}=e;const s=(0,p().YB)(),a=(0,r().yK)((e=>({input:{boxShadow:e.inputBoxShadow,borderRadius:100,fontSize:12},searchIcon:{width:14,height:14,marginRight:6,flexGrow:0,flexShrink:0,fill:e.mediumIconColor}})),[]),l=(0,i.useCallback)((e=>o(e.target.value)),[o]);return(0,te.jsx)(Dn().Z,{placeholder:s.formatMessage({defaultMessage:"Search teamspaces...",id:"manageTeamsFilterRow.searchFilter.placeholder"}),style:{...a.input,...t},value:n,onChange:l,left:(0,qg().R)(a.searchIcon),format:Dn().B.Small,showClearButton:!0})}var vf=()=>n(542487),xf=()=>n(949842),bf=()=>n(164079);function Sf(e){let{teamStore:t,accessLevel:i,isTeamOwner:s,isArchivedTeam:l,onChangeAccessLevel:d,width:c}=e;const u=(0,o().O7)(),m=function(e){return(0,a().VK)((()=>e.isDefault()),[e])}(t),f=(0,n(624514).U)({teamStore:t,onChange:d,isDefault:m}),h=m?"default":i,y=f.find((e=>e.key===h)),v=!s||l||Boolean(null==y?void 0:y.disableAllOptionsTooltip);let x;v&&(null!=y&&y.disableAllOptionsTooltip||!s?x=(0,te.jsx)(p()._H,{id:"manageTeamsAccessCell.onlyTeamOwnersCanChangeAccessLevel",defaultMessage:"Only teamspace owners can change teamspace access levels"}):l&&(x=(0,te.jsx)(p()._H,{id:"manageTeamsAccessCell.archivedTeamCannotChangeAccessLevel",defaultMessage:"Cannot change access level for archived team"})));const b=(0,n(617111).P)(),S=(0,r().yK)((e=>{const t=e.lightTextColor;return{selectButton:{paddingLeft:8,marginLeft:-8,maxWidth:c},label:{...v&&{color:t},fontSize:g().JB.UIRegular.desktop,fontWeight:g().Ue.regular},chevron:{width:10,marginLeft:4,fill:e.mediumIconColor,...v&&{fill:t}},tooltip:{width:200}}}),[v,c]);if(!y)throw new Error(`Selected access level is not an option found in team access level option: ${h}`);return(0,te.jsx)(Xg().Z,{items:f,getKey:e=>e.key,selectedItem:y,onSelect:e=>"private"!==e.key||b?e.onSelect():Ct().y(u,{from:"team_security_settings",upsell:{type:"product",product:"business",limit:{type:"none"}}}),renderItem:e=>(0,te.jsx)(pe().Z,{textWrap:!0,style:S.tooltip,placement:he().Placement.Bottom,disableTooltip:!e.value.tooltip,renderTooltip:()=>e.value.tooltip,render:t=>(0,te.jsx)(Yo().Z,{title:e.value.title,...(0,bf().Z)(e,t)})}),disabled:v,renderOrigin:e=>(0,te.jsx)(pe().Z,{textWrap:!0,style:S.tooltip,disableTooltip:!x,renderTooltip:()=>x,alignment:he().Alignment.Center,placement:he().Placement.Left,render:t=>(0,te.jsxs)(Bt().Z,{style:S.selectButton,disabled:v,...(0,bf().Z)(e,t),children:[(0,te.jsx)(Rn().s,{style:S.label,children:y.level}),(0,cd().i)(S.chevron)]})})})}function Mf(e){let{teamOwnerIds:t,manageTeamsStore:o}=e;const s=(0,a().VK)((()=>et().default.state.currentSpaceStore),[]),l=(0,p().YB)(),{userIds:d,groupIds:c}=t,u=(0,i.useMemo)((()=>[...d,...c]),[c,d]),{userStore:m,groupStore:f}=(0,a().VK)((()=>{if(!s)return{userStore:void 0,groupStore:void 0};const{filterByOwner:e}=o.state;let t=d[0]||c[0];if(e.type===zg().yj){const n=e.id;u.includes(n)&&(t=n)}return t?d.includes(t)?{userStore:(0,Yi().o)({userId:t,currentSpaceStore:s}),groupStore:void 0}:{userStore:void 0,groupStore:(0,n(485491).Q)({groupId:t,spaceStore:s})}:{userStore:void 0,groupStore:void 0}}),[s,c,o,u,d]),h=(0,a().VK)((()=>null!=m&&m.isDefined()?(0,Cl().Nz)(l,m.getModel()):null!=f&&f.isDefined()?f.getName():void 0),[m,f,l]),y=(0,r().yK)((e=>({container:{display:"flex",alignItems:"center",fontSize:g().JB.UIRegular.desktop,overflow:"hidden"},userAvatar:{paddingRight:6},nMoreOwnersText:{paddingLeft:3,color:e.mediumTextColor},noOwners:{marginRight:8,color:e.lightTextColor},userName:{flexShrink:1}})),[]);return u.length<1?(0,te.jsx)("div",{style:y.noOwners,children:(0,te.jsx)(p()._H,{id:"manageTeamsOwnersCell.noOwners",defaultMessage:"No owners"})}):(0,te.jsxs)("div",{style:y.container,children:[(0,te.jsx)(ws().Z,{style:y.userAvatar,avatarShouldShowShadow:!0,userStore:m,size:20}),(0,te.jsx)(Rn().s,{style:y.userName,children:h}),u.length>1&&(0,te.jsx)("div",{style:y.nMoreOwnersText,children:(0,te.jsx)(p()._H,{id:"manageTeamsOwnersCell.nMoreOwnersLabel",defaultMessage:"+{numAdditionalOwners}",values:{numAdditionalOwners:u.length-1}})})]})}const jf=[zg().BR,zg().GR,zg().KP,zg().Aw,zg().a9],Cf={[zg().KP]:{headerTitle:(0,te.jsx)(p()._H,{id:"manageTeamsTable.columnTitle.access",defaultMessage:"Access"}),renderCell:e=>{let{data:t,environment:n}=e;return(0,te.jsx)(Sf,{teamStore:t.store,accessLevel:t.accessLevel,isTeamOwner:t.isCurrentUserOwnerOfTeam,isArchivedTeam:t.isArchivedTeam,onChangeAccessLevel:(e,i)=>vm().Ju({environment:n,store:t.store,accessLevel:e,isDefault:i,teamName:t.name,from:"manage_teams_table"}),width:90})},colWidth:{width:90},hasClickableContents:!0},[zg().BR]:{headerTitle:(0,te.jsx)(p()._H,{id:"manageTeamspacesTable.columnTitle.teamspace",defaultMessage:"Teamspace"}),renderCell:e=>{let{data:t}=e;return(0,te.jsx)(wf,{teamStore:t.store,isArchivedTeam:t.isArchivedTeam,name:t.name})},colWidth:{minWidth:30,widthPercent:35}},[zg().GR]:{headerTitle:(0,te.jsx)(p()._H,{id:"manageTeamsTable.columnTitle.owners",defaultMessage:"Owners"}),renderCell:e=>{let{data:t,manageTeamsStore:n}=e;return(0,te.jsx)(Mf,{teamOwnerIds:t.owners,manageTeamsStore:n})},colWidth:{minWidth:60,widthPercent:25}},[zg().Aw]:{headerTitle:(0,te.jsx)(p()._H,{id:"manageTeamsTable.columnTitle.updated",defaultMessage:"Updated"}),renderCell:e=>{let{data:t}=e;return t.lastUpdated&&(0,te.jsx)(kf,{lastUpdatedMillis:t.lastUpdated})},colWidth:{minWidth:50,widthPercent:15}},[zg().a9]:{headerTitle:void 0,renderCell:e=>{let{data:t}=e;return(0,te.jsx)(n(384255).OutlinerTeamOverflow,{teamStore:t.store,from:"manage_teams_table"})},colWidth:{width:30},hasClickableContents:!0}};function wf(e){let{teamStore:t,name:i,isArchivedTeam:s}=e;const a=(0,o().O7)(),l=(0,n(132222).e)(t),d=(0,r().yK)((e=>({container:{display:"flex",alignItems:"center",overflow:"hidden"},teamIcon:{marginRight:12},nameAndMembersContainer:{display:"flex",flexDirection:"column",minWidth:0},nameAndArchivedPillContainer:{display:"flex"},nameText:{lineHeight:"18px",fontWeight:g().Ue.regular},smallText:{fontSize:(0,n(641506).yv)(a,"UISmall"),color:e.mediumTextColor,fontWeight:g().Ue.regular},archivedTag:{marginLeft:5}})),[a]),c=`${(0,n(983135).K)(t)}`,u=(0,te.jsx)(p()._H,{id:"manageTeamsTableColumnData.numMembersLabel",defaultMessage:"{numMembers, plural, one {1 member} other {{numMembers} members}}",values:{numMembers:c}}),f=l?(0,te.jsxs)(te.Fragment,{children:[" • ",(0,te.jsx)(p()._H,{id:"manageTeamsTableColumnData.joinedLabel",defaultMessage:"Joined"})]}):void 0,h=m().oA([u,f]);return(0,te.jsxs)("div",{style:d.container,children:[(0,te.jsx)(xm().p,{style:d.teamIcon,size:28,store:t,disabled:!0}),(0,te.jsxs)("div",{style:d.nameAndMembersContainer,children:[(0,te.jsxs)("div",{style:d.nameAndArchivedPillContainer,children:[(0,te.jsx)(Rn().s,{style:d.nameText,children:i}),s&&(0,te.jsx)($().Z,{desktopStyle:d.archivedTag,mobileStyle:d.archivedTag,children:(0,te.jsx)(p()._H,{id:"manageTeamsTable.archivedTag",defaultMessage:"Archived"})})]}),(0,te.jsx)(Rn().s,{style:d.smallText,children:h})]})]})}function kf(e){let{lastUpdatedMillis:t}=e;return(0,te.jsx)(Rn().s,{children:(0,ba().Yx)(t,"very_short",ai().locale)})}function _f(e){let{teamStores:t,manageTeamsStore:n}=e;const s=(0,o().O7)(),l=(0,a().VK)((()=>et().default.state.currentUserStore),[]),{sortAscending:d,sortColumn:c}=(0,a().VK)((()=>{const{sortAscending:e,sortColumn:t}=n.state;return{sortAscending:e,sortColumn:t}}),[n]),u=(0,a().VK)((()=>{const e=null==l?void 0:l.id;return e?m().oA(t.map((t=>{if(!t.canRead()||!t.isReady())return;const{ownerUserIds:n,ownerGroupIds:i}=t.getAllOwnerIds();return{store:t,name:t.getName()??"",owners:{userIds:n,groupIds:i},isCurrentUserOwnerOfTeam:Boolean(t.isOwner(e)),hasSecurityOverrides:t.hasSecurityOverrides(),accessLevel:t.getTeamAccessLevel(),isArchivedTeam:(0,vf().m4)({archived_by:t.getArchivedBy()}),lastUpdated:t.getLastEditedTime()}}))):[]}),[null==l?void 0:l.id,t]),p=(0,a().VK)((()=>{const{showOnlyArchivedTeams:e,filterByOwner:t,showTeamsWithSecurityOverrides:i,filterAccess:o}=n.state;return u.filter((t=>e?t.isArchivedTeam:!t.isArchivedTeam)).filter((e=>!i||e.hasSecurityOverrides)).filter((e=>{if(o===zg().nu&&"open"!==e.accessLevel)return!1;if(o===zg().XI&&"closed"!==e.accessLevel)return!1;if(o===zg().TI&&"private"!==e.accessLevel)return!1;switch(t.type){case zg().R7:return e.owners.userIds.length+e.owners.groupIds.length===0;case zg().yj:return[...e.owners.userIds,e.owners.groupIds].includes(t.id);case zg().uY:return!0;default:(0,gn().t1)(t)}}))}),[n,u]),g=(0,a().VK)((()=>{const{sortAscending:e,sortColumn:t}=n.state;return(0,Ng().CN)({data:p,sortAscending:e,sortColumn:t})}),[n,p]),f=(0,a().VK)((()=>(0,bg().ZP)(n.state.searchQuery,g,(e=>e.name))),[n,g]),h=(0,i.useCallback)((e=>vm().RF({environment:s,teamId:e,tab:ym().a.Members,from:"manage_teams_table"})),[s]),y=(0,r().yK)((e=>({container:{marginTop:17,tableLayout:"fixed",borderCollapse:"collapse",width:"100%",minWidth:jf.reduce(((e,t)=>e+Df(Cf[t].colWidth)+Zf),0)},tableHeaderRow:{borderTop:`1px solid ${e.tableDividerColor}`,borderBottom:`1px solid ${e.tableDividerColor}`},noTeamsLabel:{marginTop:15,marginBottom:40,textAlign:"center"}})),[]),v=(0,i.useCallback)((e=>{const{sortColumn:t,sortAscending:i}=n.state,o=e===t&&!i;n.setState({...n.state,sortAscending:o,sortColumn:e}),Gg().dw(s,{sortBy:e,sortOrder:i?"ascending":"descending"})}),[n,s]),x=(0,i.useCallback)((()=>{n.reset()}),[n]);return(0,te.jsxs)(te.Fragment,{children:[(0,te.jsxs)("table",{style:y.container,children:[(0,te.jsx)("thead",{children:(0,te.jsx)("tr",{style:y.tableHeaderRow,children:jf.map((e=>(0,te.jsx)(If,{column:e,onSortableColumnClick:v,sortAscending:d,sortColumn:c},`header_${e}`)))})}),(0,te.jsxs)("tbody",{children:[(0,te.jsx)("tr",{children:jf.map((e=>(0,te.jsx)("td",{},`padding_row_${e}`)))}),f.map((e=>(0,te.jsx)(Tf,{onShowTeamSettings:h,teamData:e,manageTeamsStore:n},`${e.store.id}_row`)))]})]}),(0,te.jsx)(Af,{style:y.noTeamsLabel,numItemsAfterFilter:f.length,numItemsBeforeFilter:t.length,onResetFilters:x})]})}function Tf(e){let{teamData:t,manageTeamsStore:n,onShowTeamSettings:o}=e;const[s,a]=(0,i.useState)(!1),l=(0,i.useCallback)((()=>a(!0)),[]),d=(0,i.useCallback)((()=>a(!1)),[]),c=(0,i.useCallback)((e=>{Rf(e,(()=>o(t.store.id)))}),[o,t.store.id]),u=!t.isArchivedTeam,p=(0,r().yK)((e=>({teamRow:{cursor:u?"pointer":"default",borderBottom:`1px solid ${e.tableDividerColor}`}})),[u]);return(0,te.jsx)("tr",{onMouseLeave:u?d:void 0,onMouseEnter:u?l:void 0,style:p.teamRow,onClick:u?c:void 0,children:jf.map((e=>(0,te.jsx)(Pf,{isRowHovered:s,teamData:t,columnData:Cf[e],manageTeamsStore:n},`${t.store.id}_${e}`)))})}function If(e){let{column:t,onSortableColumnClick:n,sortColumn:i,sortAscending:o}=e;const s=Cf[t],a=(0,r().yK)((e=>({th:Lf(s),innerDiv:{display:"flex",alignItems:"center",minWidth:Df(s.colWidth),height:32},text:{fontSize:g().JB.UISmall.desktop,fontWeight:g().Ue.regular,color:e.mediumTextColor},sortButton:{padding:5,margin:-5,overflow:"hidden",maxWidth:"100%"},sortIcon:{fill:e.mediumTextColor,width:12,height:12,marginLeft:4}})),[s]),l=(0,te.jsx)(Rn().s,{style:a.text,children:s.headerTitle}),d=(c=t,zg().xj.includes(c)?(0,te.jsxs)(Bt().Z,{style:a.sortButton,onClick:()=>n(t),children:[l,(()=>{if(t===i)return(0,mu().K)({...a.sortIcon,...o&&{transform:"rotate(180deg)"}})})()]}):l);var c;return(0,te.jsx)("th",{style:a.th,children:(0,te.jsx)("div",{style:a.innerDiv,children:d})})}function Pf(e){let{teamData:t,columnData:n,isRowHovered:i,manageTeamsStore:s}=e;const a=(0,o().O7)(),l=(0,r().yK)((e=>({td:{...Lf(n),...i&&{background:e.buttonHoveredBackground}},innerDiv:{minWidth:Df(n.colWidth),fontSize:g().JB.UIRegular.desktop,color:e.regularTextColor,height:56,display:"flex",alignItems:"center"}})),[n,i]),d=Rf,c=Boolean(n.hasClickableContents);return(0,te.jsx)("td",{style:l.td,children:(0,te.jsx)("div",{style:l.innerDiv,onClick:c?d:void 0,children:n.renderCell({environment:a,data:t,manageTeamsStore:s})})})}function Af(e){let{style:t,numItemsBeforeFilter:n,numItemsAfterFilter:i,onResetFilters:o}=e;if(0!==i)return null;let s;return s=0!==n?(0,te.jsx)(p()._H,{id:"manageTeamsTable.emptyManageTeamTableDisclaimer.teamsFilteredOut",defaultMessage:"Could not find any teamspaces. <linkbutton>Reset your filters</linkbutton>",values:{linkbutton:e=>(0,te.jsx)(ui().Z,{onClick:o,children:e})}}):(0,te.jsx)(p()._H,{id:"manageTeamsTable.emptyManageTeamTableDisclaimer.noTeamsExist",defaultMessage:"Could not find any teamspaces."}),(0,te.jsx)(me().Z,{isSmall:!0,style:t,children:s})}function Rf(e,t){(0,xf().ZP)({event:e,context:xf().Af.ManageTeamsRowClick,callback:t})}const Zf=10,Bf={paddingLeft:Zf/2,paddingRight:Zf/2};function Df(e){return"minWidth"in e?e.minWidth:e.width}function Lf(e){let t={};return t="width"in e.colWidth?{width:e.colWidth.width}:{width:`${e.colWidth.widthPercent}%`,minWidth:e.colWidth.minWidth},{...Bf,...t}}function Of(e){let{}=e;const{isMobile:t=!1}=(0,o().Fy)(),n=(0,o().O7)(),s=(0,a().qz)(zg().yl),l=(0,r().yK)((()=>({container:{marginTop:8},header:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:8},subheader:{display:"flex",flexDirection:"column",flexShrink:1,overflow:"hidden"}})),[]),{unarchivedTeamIds:d,archivedTeamIds:c,isLoading:u}=(0,a().VK)((()=>{const e=Wg().Z.state;return"loaded"!==e.loadingState?{unarchivedTeamIds:[],archivedTeamIds:[],isLoading:!0}:{unarchivedTeamIds:e.unarchivedTeamIds,archivedTeamIds:e.archivedTeamIds,isLoading:!1}}),[]),m=(0,a().VK)((()=>u?[]:(0,Ng().GO)({environment:n,teamIds:[...d,...c]})),[c,n,u,d]),g=(0,i.useCallback)((()=>vm().lo("workspace_settings")),[]);return(0,te.jsxs)("div",{style:l.container,children:[(0,te.jsxs)(ae().Z,{large:!t,style:l.header,small:!0,children:[(0,te.jsxs)("div",{style:l.subheader,children:[(0,te.jsx)(p()._H,{id:"manageTeamsBrowser.title",defaultMessage:"Manage teamspaces"}),(0,te.jsx)(me().Z,{isSmall:!0,style:{marginTop:3},children:(0,te.jsx)(p()._H,{id:"manageTeamsBrowser.subtitle",defaultMessage:"Manage all teamspaces you have access to here"})})]}),(0,te.jsx)(kn().Z,{onClick:g,isLarge:!0,className:He().myM,children:(0,te.jsx)(p()._H,{id:"manageTeamsBrowser.newTeamButton.text",defaultMessage:"New teamspace"})})]}),u?(0,te.jsx)(oi().Z,{}):(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(hf,{teamStores:m,manageTeamsStore:s}),(0,te.jsx)(_f,{teamStores:m,manageTeamsStore:s})]})]})}var Hf=()=>n(635596);function Vf(){const e=(0,o().O7)(),{currentSpaceStore:t,currentUserStore:s}=(0,a().VK)((()=>{const{currentSpaceStore:e,currentUserStore:t}=et().default.state;return{currentSpaceStore:e,currentUserStore:t}}),[]);return(0,i.useEffect)((()=>{if("loading"===Wg().Z.state.loadingState||!t||!s)return;po().F({environment:e,messageStoreEmitValue:-1});const i=Hf().ZP.addListener((0,n(183922).pD)({userId:s.id,spaceId:t.id}),((t,n)=>{po().F({environment:e,messageStoreEmitValue:n})}),void 0,e);return function(){i&&Hf().ZP.removeListener(i,e)}}),[t,s,e]),null}const Uf=i.memo(Vf);var Ef=()=>n(509695);function Nf(){const e=(0,o().Fy)();return(0,te.jsx)(ae().Z,{large:!e.isMobile||void 0,divider:e.isMobile?void 0:"full",children:(0,te.jsx)(p()._H,{id:"teamsWorkspaceSettings.title",defaultMessage:"Teamspace settings"})})}function Ff(){const e=(0,o().O7)(),t=(0,a().VK)((()=>et().default.state.currentSpaceStore),[]),n=(0,a().qz)(void 0,st().Z),s=(0,a().VK)((()=>t&&n.getValueForSpace(t)),[t,n]),r=(0,a().VK)((()=>(0,ge().F$)()),[]),l=(null==s?void 0:s.disableTeamCreation)??!1,d=(null==s?void 0:s.disableTeamGuests)??!1,c=void 0===s,u=(0,i.useCallback)((()=>{const n=l?"allowTeamCreation":"disableTeamCreation";t&&s&&(0,Ng().Bb)({newSettingValue:n,environment:e,spaceStore:t,workspaceSecuritySettings:s})}),[t,l,e,s]);return(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(Ef().O,{disabled:c,onChange:u,title:(0,te.jsx)(p()._H,{id:"teamWorkspacesSettings.disableTeamCreation.workspaceOwners.title",defaultMessage:"Limit teamspace creation to only workspace owners"}),description:(0,te.jsx)(p()._H,{id:"teamWorkspacesSettings.disableTeamCreation.workspaceOwners.caption",defaultMessage:"Only allow workspace owners to create teamspaces"}),selected:l}),(0,te.jsx)(ii().Z,{size:34}),r&&(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(Ef().O,{disabled:c,onChange:async function(){if(t&&s){if(!Boolean(s.disableTeamGuests)){const{accept:e}=await x().gt({message:(0,te.jsx)(p()._H,{id:"teamWorkspacesSettings.disableTeamGuests.confirmDisable.message",defaultMessage:"Are you sure you want to disable teamspace guests?"}),description:(0,te.jsx)(p()._H,{id:"teamWorkspacesSettings.disableTeamGuests.confirmDisable.description",defaultMessage:"This action will remove all teamspace guests from the workspace."}),acceptLabel:(0,te.jsx)(p()._H,{id:"teamWorkspacesSettings.disableTeamGuests.confirmDisable.acceptButton",defaultMessage:"Disable and remove teamspace guests"})});if(!e)return}hn().n(e,{securitySettingsState:{...s,disableTeamGuests:!s.disableTeamGuests},spaceStore:t})}},title:(0,te.jsx)(p()._H,{id:"teamWorkspacesSettings.disableTeamGuests.workspaceOwners.title",defaultMessage:"Allow teamspace owners to add teamspace guests"}),description:(0,te.jsx)(p()._H,{id:"teamWorkspacesSettings.disableTeamGuests.workspaceOwners.caption",defaultMessage:"This will allow teamspace owners with membership admin permissions to add teamspace guests. Disabling will remove all teamspace guests."}),selected:!d}),(0,te.jsx)(ii().Z,{size:34})]})]})}function Kf(e){let{}=e;const t=(0,r().yK)((()=>({learnMoreLinkContainer:{paddingTop:6,paddingBottom:20}})),[]),n=(0,o().O7)(),s=(0,a().VK)((()=>et().default.state.currentSpaceStore),[]),l=(0,i.useCallback)((async e=>{let{addedTeams:t,removedTeams:i}=e;s&&await(0,Ng().ci)({environment:n,addedTeams:t,removedTeams:i,spaceStore:s})}),[s,n]),{unarchivedTeams:d,isLoaded:c}=(0,bn().r8)(),u=0===d.length?null:(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(Kg().h,{unarchivedTeams:d,onUpdate:l,description:(0,te.jsx)(me().Z,{isSmall:!0,isMultiline:!0,children:(0,te.jsx)(p()._H,{id:"teamsWorkspaceSettings.defaultTeams.caption",defaultMessage:"Choose teamspaces that all new and current workspace members will automatically join"})})}),(0,te.jsx)(ii().Z,{size:34})]});return(0,te.jsxs)(Rt().ZP,{children:[(0,te.jsx)(Nf,{}),(0,te.jsx)(Fg().Z,{helpCenterLocation:"settingsAndPermissions",analyticsFrom:"teams_learn_more_workspace_settings",containerStyle:t.learnMoreLinkContainer}),(0,te.jsx)(Uf,{}),c?(0,te.jsxs)(te.Fragment,{children:[u,(0,te.jsx)(Ff,{}),(0,te.jsx)(Of,{})]}):null]})}var zf=()=>n(219592),Wf=()=>n(231077),qf=()=>n(725751),Gf=()=>n(759190),Yf=()=>n(709237);function $f(){const e=(0,a().VK)((()=>{var e;return null===(e=qf().default.state.preferences)||void 0===e?void 0:e.onStartup}),[]);if(!e)return null;const t=[{key:"continue",label:(0,te.jsx)(p()._H,{id:"OnDesktopAppStartupSetting.continue.label",defaultMessage:"Continue where you left off"}),renderIcon:e=>(0,Gf().Y)({width:20,height:20,...e})},{key:"default_page",label:(0,te.jsx)(p()._H,{id:"OnDesktopAppStartupSetting.defaultPage.label",defaultMessage:"Your default page"}),renderIcon:e=>(0,Yf().z)({width:20,height:20,...e})}];return(0,te.jsx)(En().Z,{isMobile:!1,title:(0,te.jsx)(p()._H,{id:"onStartup.title",defaultMessage:"On startup"}),caption:(0,te.jsx)(p()._H,{id:"onStartup.description",defaultMessage:"Choose what to show when the Notion app starts."}),type:"dropdown",currentOption:e,options:t,onSelectOption:e=>{Wf().electronAppFeatures.setPreference("onStartup",e)}})}const Xf=function(){const e=[(0,a().VK)((()=>{var e;return null===(e=qf().default.state.preferences)||void 0===e?void 0:e.onStartup}),[])?{key:"on-startup",renderSettingsItem:()=>(0,te.jsx)($f,{})}:void 0,{key:"default-page",renderSettingsItem:()=>(0,te.jsx)(n(233126).Z,{isMobile:!1})}].filter(gn().$K);return(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(ae().Z,{large:!0,divider:"full",children:(0,te.jsx)(p()._H,{id:"desktopAppStartupSettings.settingsSection.title",defaultMessage:"Startup"})}),(0,te.jsx)(bd().O,{items:e}),(0,te.jsx)(ii().Z,{size:48,isHidden:!0})]})};var Qf=()=>n(218842),Jf=()=>n(806856),eh=()=>n(39092),th=()=>n(138190),nh=()=>n(543573),ih=()=>n(431652);function oh(e){let{isMobile:t}=e;const n=(0,o().O7)(),i=D().Z.getIntl(),s=(0,a().VK)((()=>et().default.state.currentUserSettingsStore),[]),{currentTimeZone:r,auto_update_disabled:l}=(0,a().VK)((()=>{const e=null==s?void 0:s.getSettings();return{currentTimeZone:null!=e&&e.time_zone&&(0,th().XE)(null==e?void 0:e.time_zone)?e.time_zone:void 0,auto_update_disabled:null==e?void 0:e.disable_auto_set_timezone}}),[s]),d=!l||!r;return s?(0,te.jsx)(En().Z,{isMobile:t,type:"timezonePicker",currentTimeZone:r,title:(0,te.jsx)(p()._H,{id:"dateAndTimeSettings.timeZone.title",defaultMessage:"Timezone"}),caption:(0,te.jsx)(p()._H,{id:"dateAndTimeSettings.timeZone.caption",defaultMessage:"Current timezone setting."}),renderOrigin:e=>(0,te.jsx)(ih().X,{focused:!1,disabled:d,buttonStyle:{width:void 0,margin:0},title:r?(0,eh().zU)(i,r):(0,te.jsx)(p()._H,{id:"dateAndTimeSettings.timeZone.error",defaultMessage:"Error finding timezone"}),...e}),disabled:d,onSelect:e=>{nh().l6({environment:n,userSettingsStore:s,timeZone:e})}}):null}function sh(e){let{isMobile:t}=e;const n=(0,o().O7)(),s=(0,a().VK)((()=>et().default.state.currentUserSettingsStore),[]),r=(0,a().VK)((()=>{var e;return null==s||null===(e=s.getSettings())||void 0===e?void 0:e.disable_auto_set_timezone}),[s])??!1,l=(0,i.useCallback)((e=>{const t=!r;nh().k2({environment:n,userSettingsStore:e,disableAutoSetTimezone:t}),t||nh().wk({environment:n,userSettingsStore:e})}),[n,r]),d=(0,te.jsx)(p()._H,{id:"dateAndTimeSettings.autoTimeZone.title",defaultMessage:"Set timezone automatically using your location"}),c=(0,te.jsx)(p()._H,{id:"dateAndTimeSettings.autoTimeZone.caption",defaultMessage:"Reminders, notifications and emails are delivered based on your time zone."});return(s&&(0,te.jsx)(En().Z,{isMobile:t,title:d,caption:c,type:"toggle",isOn:!r,onToggle:()=>l(s)}))??null}const ah=function(e){let{isMobile:t}=e;const n=(0,o().O7)(),s=(0,a().VK)((()=>et().default.state.currentUserSettingsStore),[]),r=(0,a().VK)((()=>{var e;return null==s||null===(e=s.getSettings())||void 0===e?void 0:e.profile_discoverable}),[s])??!0,l=(0,i.useCallback)((e=>{const t=!r;w().createAndCommit({userAction:"ProfileDIscoverabilitySettings.onToggleOption",environment:n,canUndo:!0,perform:e=>{s&&k().d2({userSettingsStore:s,data:{profile_discoverable:t},transaction:e})}})}),[n,r,s]),d=(0,te.jsx)(p()._H,{id:"profileDiscoverabilitySettings.title",defaultMessage:"Profile discoverability"}),c=(0,te.jsx)(p()._H,{id:"profileDiscoverabilitySettings.caption",defaultMessage:"Users with your email can see your name and profile picture when inviting you to a new workspace. <inlinelink>Learn more</inlinelink>.",values:{inlinelink:e=>(0,te.jsx)(ui().Z,{external:!0,href:(0,Ee().UY)("guides.profileSettings"),onClick:e=>{e.stopPropagation()},children:e})}});return(0,te.jsx)(En().Z,{isMobile:t,title:d,caption:c,isOn:r,type:"toggle",onToggle:()=>l(s)})};const rh=(0,n(968433).M)((function(e){let{passwordRequestStore:t,userEmailDomainSettings:r,billingData:l}=e;const{isPhone:d,isMobile:c,isElectron:u,isMobileNative:m}=(0,o().Fy)(),g=(0,o().O7)(),f=(0,a().VK)((()=>Ot().default.state.online),[]),h=(0,Qf().V)({environment:g}),y=(0,a().qz)(void 0,dt().Z);(0,s().K)((()=>{j().E(g,y)}));const v=(0,a().VK)((()=>y.state.accountSettings),[y]),x=(0,qe().P)(),b=(0,a().VK)((()=>c&&t?(0,Qf().E)({isPhone:d,isMobileNative:m,showOfflineSettings:x,passwordRequestStore:t,userEmailDomainSettings:r,billingData:l,accountSettings:v}):h),[h,c,d,m,x,t,r,v,l]);(0,i.useEffect)((()=>(u&&Wf().setGlobalShortcutsEnabled(!1),()=>{u&&Wf().setGlobalShortcutsEnabled(!0)})),[u]);const S=[{key:"timezone-auto",renderSettingsItem:()=>(0,te.jsx)(sh,{isMobile:c})},{key:"timezone-manual",renderSettingsItem:()=>(0,te.jsx)(oh,{isMobile:c})}].filter(gn().$K),M=[(0,a().VK)((()=>(0,Jf().h)(g)),[g])?{key:"cookies",renderSettingsItem:()=>(0,te.jsx)(Jf().Z,{isMobile:c})}:void 0,{key:"view-history",renderSettingsItem:()=>(0,te.jsx)(n(563286).H,{isMobile:c})},{key:"profile-discoverability",renderSettingsItem:()=>(0,te.jsx)(ah,{isMobile:c})}].filter(gn().$K);return f?(0,te.jsxs)(Rt().ZP,{disableScroller:c,children:[(0,te.jsx)(ae().Z,{large:!c,divider:"full",children:(0,te.jsx)(p()._H,{id:"mySettings.settingsSection.title",defaultMessage:"My settings"})}),(0,te.jsx)(bd().O,{items:b}),(0,te.jsx)(ii().Z,{size:48,isHidden:!0}),(0,te.jsx)(Xf,{}),(0,te.jsx)(ae().Z,{large:!c,divider:"full",children:(0,te.jsx)(p()._H,{id:"notificationAndPersonalSettings.dateAndTimeSection.title",defaultMessage:"Date & time"})}),(0,te.jsx)(bd().O,{items:S}),(0,te.jsx)(ii().Z,{size:48,isHidden:!0}),(0,te.jsx)(ae().Z,{large:!c,divider:"full",children:(0,te.jsx)(p()._H,{id:"mySettings.privacySection.title",defaultMessage:"Privacy"})}),(0,te.jsx)(bd().O,{items:M})]}):(0,te.jsx)(Rt().ZP,{children:(0,te.jsx)(me().Z,{isSmall:!0,style:{textAlign:"center"},children:(0,te.jsx)(p()._H,{defaultMessage:"Please go online to manage settings.",id:"mySettings.goOnline.prompt"})})})}));var lh=()=>n(615389);function dh(e){const{up:t}=e,n={width:10,height:10,marginLeft:4};return t?(0,mu().K)({...n,transform:"rotate(180deg)"}):(0,mu().K)(n)}function ch(e){let{users:t,store:n,extraColumns:o,initialSort:s,tableStyle:r}=e;const[l,d]=(0,i.useState)(s),c=(0,p().YB)();function u(e,t){return(0,te.jsxs)(ue().Z,{disabled:!t.sortable,ignoreLocalHoverState:!0,onClick:()=>{!function(e){d({column:e,asc:(null==l?void 0:l.column)===e&&!(null!=l&&l.asc)})}(e)},style:{display:"flex",alignItems:"center"},children:[t.title,t.sortable&&l&&l.column===e&&dh({up:l.asc})]},e)}const g=(0,i.useMemo)((()=>({title:(0,te.jsx)(p()._H,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),style:{width:"60%"},sortable:!0,renderer:e=>(0,te.jsx)(ve().Z,{actorStore:e}),getValue:e=>e.getDisplayName(c)})),[c]),f=(0,i.useMemo)((()=>({name:g,...o})),[o,g]),h=m().XP(f).map((e=>({key:e,header:u(e,f[e]),style:f[e].style}))),y=(0,a().VK)((()=>{const e=t.map((e=>J().U6.createChildStore(n,{table:R().KJ,id:e.userId}))).filter((e=>e.isDefined()));return l?e.sort(((e,t)=>{const n=f[l.column].getValue(e),i=f[l.column].getValue(t),o=n<i?-1:n>i?1:0;return l.asc?o:-1*o})):e}),[t,n,f,l]);return(0,te.jsx)(wu().Z,{columns:h,rows:y.map((e=>{const t=Object.values(f).map(((t,n)=>t.renderer?t.renderer(e):(0,te.jsx)(i.Fragment,{children:t.getValue(e)},n)));return{key:e.id,columns:t}})),tableStyle:r})}function uh(e){const{store:t}=e,{isOnline:n,subscriptionDataStoreData:i,userSimilarityData:o,visibleUsersLoaded:s,visibleUsers:r}=(0,a().VK)((()=>{const e=_t().subscriptionDataStoreInstance.state,n=e?(0,Zc().CM)(e):[],i=m().yW(n.map((e=>J().U6.createChildStore(t,{table:R().KJ,id:e.userId}).isReady())));return{isOnline:Ot().default.state.online,subscriptionDataStoreData:e,userSimilarityData:lh().O.state||{},visibleUsersLoaded:i,visibleUsers:n}}),[t]);if(!n)return(0,te.jsx)(me().Z,{isSmall:!0,style:{textAlign:"center"},children:(0,te.jsx)(p()._H,{id:"spacePermissionsSettings.offlineMessage",defaultMessage:"Please go online to manage members."})});if(!i)return(0,te.jsx)(oi().Z,{style:{margin:"calc(50% - 1em) auto"}});if(!s)return(0,te.jsx)(oi().Z,{style:{margin:"calc(50% - 1em) auto"}});const l={style:{},title:(0,te.jsx)(te.Fragment,{children:"Similarity Score"}),sortable:!0,renderer:e=>{var t;return(0,te.jsx)(te.Fragment,{children:(null===(t=o[e.id])||void 0===t?void 0:t.toFixed(3))||0})},getValue:e=>o[e.id]||0};return(0,te.jsxs)("div",{style:{width:"100%"},children:[(0,te.jsx)(ae().Z,{large:!0,divider:"full",style:{marginBottom:16,paddingBottom:4,display:"flex"},children:"User Similarity Scores"}),(0,te.jsx)(ch,{users:r,store:t,extraColumns:{similarityColumn:l},initialSort:{column:"similarityColumn",asc:!1},tableStyle:{borderTop:void 0}})]})}const ph={overflow:"auto",paddingTop:10,paddingBottom:12},mh={display:"flex",flexDirection:"column",height:"100%",justifyContent:"space-between",paddingLeft:4,paddingRight:4},gh={user_settings:{},profile:{},notifications:{},notifications_and_settings:{},connected_apps:{},language_and_region:{},offline:{},settings:{},teams:{adminOnly:!0,membersOnly:!0},members:{membersOnly:!0},analytics:{membersOnly:!0,enterpriseOnly:!0},plans:{membersOnly:!0},billing:{},subscription:{},requests:{adminOnly:!0},security:{adminOnly:!0},identity_provisioning:{adminOnly:!0},admin_content_search:{adminOnly:!0,enterpriseOnly:!0},integrations:{adminOnly:!0},imports:{},audit_log:{adminOnly:!0,enterpriseOnly:!0},sites:{membersOnly:!0},custom_emoji:{membersOnly:!0},verified_pages:{membersOnly:!0},experiments:{},performance_toolbar:{},user_similarity_scores:{},collection_debug:{},offline_mode_debug:{}},fh=(0,p().vU)({dialogLabel:{id:"spaceSettings.dialogLabel",defaultMessage:"Settings & members"}});function hh(e){let{spaceStore:t,userStore:l}=e;const d=(0,o().O7)(),{open:c,currentTab:u,openedFrom:p,upsellType:m}=(0,a().VK)((()=>{const{open:e,currentTab:t,openedFrom:n,upsellType:i}=ct().default.state;return{open:e,currentTab:t,openedFrom:n,upsellType:i}}),[]),g=(0,a().qz)(void 0,n(536984).Z),h=(0,a().qz)(void 0,dt().Z),y=(0,a().qz)(void 0,st().Z),x=(0,a().qz)(void 0,ot),b=(0,a().qz)(void 0,lt);(0,s().K)((()=>{const e=y.getValueForSpace(t);e&&y.setState(e)})),(0,s().K)((()=>{j().E(d,h)})),(0,i.useEffect)((()=>{c&&v().SU(d,{tab:u,from:p,upsell_type:m})}),[c]);const S=(0,i.useCallback)((()=>{mt().bi(d),vh(),f().kj({environment:d,spaceId:t.id,canAdmin:t.canAdmin()})}),[d,t]),M=(0,i.useCallback)((()=>{Ph((()=>{ct().default.setState({...ct().default.state,open:!1}),n(658530).Z.reset(),b.reset(),vh(),ut().Z.reset()}),d,t,g,h,y)}),[d,t,g,h,y,b]),C=(0,r().yK)((()=>({modalInner:{width:1150,maxWidth:"calc(100vw - 100px)",height:"calc(100vh - 100px)",overflow:"hidden",borderRadius:12,maxHeight:715}})),[]);return(0,te.jsx)(ri().Z,{ariaLabel:D().Z.formatMessage(fh.dialogLabel),open:c,innerStyle:C.modalInner,onOpen:S,onDismiss:M,render:()=>(0,te.jsx)(Bh,{spaceStore:t,userStore:l,spaceBasicSettingsStore:g,spaceProfileSettingsStore:h,securitySettingsStore:y,samlSettingsStore:x,spaceDomainSettingsStore:b}),className:He().zYS})}function yh(e,t){const n=gh[e];return!(n.adminOnly&&!t.canAdmin())&&(!(n.membersOnly&&!t.canRead())&&!(n.enterpriseOnly&&!(0,u().wP)(t.getSubscriptionTier())))}function vh(){O().Z.reset(),N.reset()}function xh(e){let{userStore:t}=e;const n=(0,p().YB)(),i=(0,a().VK)((()=>t.getFullName(n)),[n,t]);return i?(0,te.jsx)(me().Z,{style:{fontWeight:g().Ue.medium},children:i}):null}function bh(e,t,n){const{disablePublicAccess:i,disableGuests:o,disableMoveToSpace:s,disableExport:a,disableSpacePageEdits:r,disablePublicAccessRequests:l,disableTeamCreation:d,disableMembershipRequests:c,disableExternalMembershipRequests:u,disableGuestMembershipRequests:p,enableAiFeature:m,disableTeamGuests:g,enableGuestInviteRequests:f,enableAiTraining:h,zeroRetentionEnabled:y}=e.state;w().createAndCommit({userAction:"SpaceSettings.attemptCloseCurrentTab",environment:n,canUndo:!0,perform:e=>{M().Xr({environment:n,disablePublicAccess:i,disableGuests:o,disableMoveToSpace:s,disableExport:a,disableSpacePageEdits:r,disablePublicAccessRequests:l,transaction:e,spaceStore:t,disableTeamCreation:d,disableMembershipRequests:c,disableExternalMembershipRequests:u,disableGuestMembershipRequests:p,enableAiFeature:Boolean(m),disableTeamGuests:g,enableGuestInviteRequests:f,enableAiTraining:Boolean(h),zeroRetentionEnabled:Boolean(y)})}})}function Sh(e){let{spaceStore:t}=e;const n=(0,o().O7)(),i=(0,a().VK)((()=>(0,ge().wE)(n)),[n]),s=(0,a().VK)((()=>ut().Z.state.count),[]);return i?(0,te.jsx)(Dg,{}):(0,te.jsx)(Je().Z,{store:t,unreadAccessRequests:s})}function Mh(e){let{spaceStore:t}=e;const n=(0,o().O7)(),i=(0,Wt().pQ)({spaceId:t.id}),s=(0,a().Kw)(_t().subscriptionDataStoreInstance),r=(0,a().VK)((()=>pt().Z.getData(n,{spaceId:t.id})),[t,n]);if(!s||!i)return null;if((0,c().YK)(i.subscription)){var l;if("subscribed_admin"!==s.type&&"unsubscribed_admin"!==s.type)return null;const e=null===(l=s.customerData)||void 0===l?void 0:l.stripe;return e?(0,te.jsx)(At().Z,{spaceStore:t,subscriptionData:s,upcomingInvoiceData:r,customerData:e}):null}return(0,te.jsx)(Nt,{billingData:i,spaceStore:t})}function jh(){const e=(0,a().VK)((()=>(0,Ue().tt)()),[]),t=(0,a().VK)((()=>(0,Ue().RT)()),[]);return(0,te.jsx)(Rt().ZP,{children:(0,te.jsx)(sd().Z,{genericImporterEnabled:e,zipImporterEnabled:t})})}function Ch(e){return{fontSize:12,lineHeight:1,marginBottom:1,color:e.mediumTextColor,fontWeight:g().Ue.semibold,alignItems:"center",display:"flex",height:24,paddingLeft:12,paddingRight:11,textOverflow:"ellipsis",overflow:"hidden"}}function wh(e,t){return{width:20,height:20,marginRight:8,color:t?e.text.uiBluePrimary:e.regularIconColor,fill:t?e.text.uiBluePrimary:e.regularIconColor}}function kh(e){return{width:14,height:14,color:e.regularIconColor}}function _h(){const e=(0,r().Fg)(),t=(0,o().O7)(),n=(0,a().VK)((()=>(0,Oe().B7)(t)),[t]),i=(0,a().VK)((()=>null==n?void 0:n.getEmail()),[n]),s={size:20,hasTooltip:!0,avatarShouldShowShadow:!0,userStore:n};return(0,te.jsxs)("div",{style:{display:"flex",alignItems:"center",height:44,paddingLeft:12,paddingRight:12},children:[(0,te.jsx)("div",{style:wh(e),children:(0,te.jsx)(ws().Z,{...s})}),n?(0,te.jsxs)("div",{children:[(0,te.jsx)(xh,{userStore:n}),i&&(0,te.jsx)(me().Z,{isSmall:!0,children:i})]}):(0,te.jsx)(p()._H,{id:"spaceSettings.sidebar.personalSettingsSection.userDetails.title",defaultMessage:"Me"})]})}function Th(e){let{tab:t}=e;const n=(0,r().Fg)(),i=(0,o().O7)(),s=(0,a().VK)((()=>et().default.state.currentSpaceStore),[]);return(0,a().VK)((()=>"members"===t&&i.device.isDesktop&&(null==s?void 0:s.canEditMembership())&&(0,ge().p1)()&&!(0,ge().wE)(i)&&ut().Z.state.count>0),[t,i,s])?(0,te.jsx)(hp().z,{color:n.redBadgeBackground}):null}function Ih(e){let{spaceProfileSettingsStore:t,billingData:n}=e;const i=(0,c().ps)(null==n?void 0:n.subscription,"student");return(0,te.jsx)(tp,{isEducationPlan:i,spaceProfileSettingsStore:t})}async function Ph(e,t,n,i,o,s){const{currentUserStore:a,currentUserSettingsStore:r}=et().default.state;if(!a||!r)throw new Error("No user or settings store.");const l=(0,te.jsx)(p()._H,{id:"spaceSettings.closeSettingsDialog.confirmationMessage",defaultMessage:"Your changes have not been saved. Save changes?"}),d=(0,te.jsx)(p()._H,{id:"spaceSettings.closeSettingsDialog.confirmationButton.label",defaultMessage:"Yes"}),c=(0,te.jsx)(p()._H,{id:"spaceSettings.closeSettingsDialog.cancelationButton.label",defaultMessage:"No"}),{currentTab:u}=ct().default.state;if("profile"===u){if(!m().Xy(o.state,o.getValueForUser(a,r,D().Z.getIntl()))){const{profilePhoto:n,name:i,startDayOfWeek:s}=o.state;return i?x().vC({message:l,showCancel:!0,keepFocus:!0,items:[{label:(0,te.jsx)(p()._H,{id:"spaceSettings.closeSettingsDialog.updateSettingsButton.label",defaultMessage:"Update"}),color:"blue",onAccept:()=>{w().createAndCommit({userAction:"SpaceSettings.attemptCloseCurrentTab",environment:t,canUndo:!0,perform:e=>{const{currentUserStore:t}=et().default.state;if(t&&h().A({userStore:t,data:{name:i,profilePhoto:n},transaction:e}),r){const t=r.getSettings();(null==t?void 0:t.start_day_of_week)!==s&&k().d2({userSettingsStore:r,data:{start_day_of_week:s},transaction:e})}}}),e()}}],handleCancel:()=>{e()}}):x().UW((0,te.jsx)(p()._H,{id:"profileSettings.personalInfoSection.nameMissing.message",defaultMessage:"Please fill in name."})),!0}e()}else if("settings"===u&&n.canEdit()){const o=!m().Xy(s.state,s.getValueForSpace(n)),a=!m().Xy(i.state,i.getValueForSpace(n));if(o||a){const{accept:r}=await x().gt({message:l,acceptLabel:d,cancelLabel:c});return r?(a&&M().OF({environment:t,spaceStore:n,spaceBasicSettingsStore:i}),o&&bh(s,n,t),e()):e(),!0}e()}else if("audit_log"===u)vh(),e();else if("analytics"===u)at().Z.reset(),e();else if("plans"===u&&n.canAdmin()){const i=s.getValueForSpace(n);!m().Xy(s.state,s.getValueForSpace(n))&&i&&(s.setState(i),bh(s,n,t)),e()}else"teams"===u?(po().g(),e()):e();return!1}function Ah(e){let{tab:t,spaceStore:n,spaceBasicSettingsStore:i,spaceProfileSettingsStore:s,securitySettingsStore:l,spaceDomainSettingsStore:d}=e;const c=(0,r().Fg)(),u=(0,o().O7)(),p=(0,a().VK)((()=>ct().default.state.currentTab===t),[t]),m=(0,a().VK)((()=>yh(t,n)),[n,t]),f=(0,a().VK)((()=>Zt().mY[t](u)),[u,t]),h=(0,a().VK)((()=>Zt().j7[t](u)),[u,t]),y=(0,a().VK)((()=>Zt().ap[t](u)),[u,t]),x=(0,Wt().tw)(_t().subscriptionDataStoreInstance),b="plans"===t&&!x,S=p&&!b;if(!m)return null;const M=b?{color:c.text.uiBluePrimary}:void 0;return(0,te.jsxs)(ue().Z,{hovered:p,style:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingLeft:12,paddingRight:12,borderRadius:4,marginTop:1,marginBottom:1,minHeight:27,position:"relative"},onClick:e=>{if(p)return null;Ph((()=>{ct().default.setState({...ct().default.state,currentTab:t,defaultSubtab:void 0}),d.reset(),v().XI(u,{tab:t})}),u,n,i,s,l)},testId:`settings-tab-${t}`,children:[(0,te.jsxs)("div",{style:{display:"flex",alignItems:"center",...S&&{fontWeight:g().Ue.semibold}},children:[(0,te.jsx)("div",{style:wh(c,b),children:f}),(0,te.jsx)(me().Z,{style:M,isMultiline:!0,children:h}),y]}),(0,te.jsx)(Th,{tab:t})]})}function Rh(e){let{spaceStore:t,spaceBasicSettingsStore:n,spaceProfileSettingsStore:i,securitySettingsStore:s,spaceDomainSettingsStore:l,renderBelowPrompt:d}=e;const c=(0,r().Fg)(),u=(0,o().O7)(),m=(0,p().YB)(),g=(0,a().VK)((()=>function(e){var t,n;const{currentSpaceViewStore:i,currentSpaceStore:o,currentUserStore:s}=et().default.state;if(!o||!yh("analytics",o))return!1;if(null==s||!s.id)return!1;if(null==o||!o.isDefined())return!1;const a=null==i?void 0:i.getSettings();return"dismissed"!==(null==a||null===(t=a.space_analytics_settings_prompt)||void 0===t?void 0:t.status)&&"hidden"!==(null==a||null===(n=a.space_analytics_settings_prompt)||void 0===n?void 0:n.status)&&(C().lo(e),!0)}(u)),[u]),f=(0,a().VK)((()=>et().default.state.currentSpaceStore),[]),h=(0,a().VK)((()=>null==f?void 0:f.canAdmin()),[f]),y=(0,a().VK)((()=>function(e,t){var n,i;const{currentSpaceViewStore:o,currentSpaceStore:s,currentUserStore:a}=et().default.state;if(null==a||!a.id)return!1;if(null==s||!s.isDefined())return!1;const r=null==o?void 0:o.getSettings();return"dismissed"!==(null==r||null===(n=r.mfa_settings_prompt)||void 0===n?void 0:n.status)&&"hidden"!==(null==r||null===(i=r.mfa_settings_prompt)||void 0===i?void 0:i.status)&&"off"===t.state.accountSettings.mfaStatus&&(C().GZ(e),!0)}(u,i)),[u,i]);if(g){const e=h?(0,te.jsx)(p()._H,{id:"enterpriseSpaceAnalyticsSettingsPrompt.caption.workspaceOwner",defaultMessage:"Explore how members & guests are engaging with this workspace, common searches that are made, and content engagement metrics with workspace analytics."}):(0,te.jsx)(p()._H,{id:"enterpriseSpaceAnalyticsSettingsPrompt.caption.member",defaultMessage:"See how your content is performing by reviewing metrics like number of views or unique visitors using workspace analytics."});return(0,te.jsx)(wd,{onDismiss:()=>C().TY(u),onClick:()=>{Ph((()=>{ct().default.setState({...ct().default.state,currentTab:"analytics",defaultSubtab:void 0}),l.reset(),v().XI(u,{tab:"analytics"}),C().pE(u)}),u,t,n,i,s)},onView:e=>{"enterprise"===(null==f?void 0:f.getSubscriptionTier())&&C().pE(e)},onClickLearnMore:()=>{const e=(0,Ee().UY)("guides.workspaceAnalytics");S().D({environment:u,url:e})},descriptionMessage:e,title:(0,te.jsx)(p()._H,{id:"enterpriseSpaceAnalyticsSettingsPrompt.title",defaultMessage:"New workspace analytics"}),buttonText:(0,te.jsx)(p()._H,{id:"enterpriseSpaceAnalyticsSettingsPrompt.cta",defaultMessage:"View metrics"}),buttonAriaLabel:m.formatMessage({id:"enterpriseSpaceAnalyticsSettingsPrompt.cta",defaultMessage:"View metrics"}),icon:(0,We().v)(kh(c))})}return y?(0,te.jsx)(wd,{onClick:()=>{Ph((()=>{ct().default.setState({...ct().default.state,open:!0,currentTab:"profile",defaultSubtab:void 0,highlightedSetting:ct().R.TwoStepVerification}),v().XI(u,{tab:"profile"})}),u,t,n,i,s)},onView:C().E6,onDismiss:()=>C().ZJ(u),onClickLearnMore:()=>{const e=(0,Ee().UY)("guides.mfa");S().D({environment:u,url:e})},descriptionMessage:(0,te.jsx)(p()._H,{id:"mfaSettingsPrompt.description",defaultMessage:"2-step verification, also known as 2FA or MFA, is now available. Add a secondary method of verification used during login."}),title:(0,te.jsx)(p()._H,{id:"mfaSettingsPrompt.title",defaultMessage:"Add an extra layer of security to your account."}),buttonText:(0,te.jsx)(p()._H,{id:"mfaSettingsPrompt.button.label",defaultMessage:"Enable 2-step verification"}),buttonAriaLabel:m.formatMessage({id:"mfaSettingsPrompt.button.ariaLabel",defaultMessage:"Enable 2-step verification"}),icon:(0,ze().Q)(kh(c))}):d}function Zh(e){let{spaceStore:t,spaceBasicSettingsStore:n,spaceProfileSettingsStore:i,securitySettingsStore:s,spaceDomainSettingsStore:u}=e;const m=(0,r().Fg)(),g=(0,o().O7)(),f=(0,Wt().pQ)({spaceId:t.id}),h=(0,a().VK)((()=>ct().default.state.currentTab),[]),v=(0,c().TK)(f),x=function(e,t){var n;const i=(0,a().Kw)(_t().subscriptionDataStoreInstance),o=(0,Wt().pQ)({spaceId:t.id}),s=(0,a().VK)((()=>t.canAdmin()),[t]);return!(!i||e||!s||"subscribed_admin"!==i.type&&("unsubscribed_admin"!==i.type||!(0,d().E3)(null===(n=i.customerData)||void 0===n?void 0:n.stripe.addOns))&&!(null!=o&&o.paymentMethod||i.hasPaidNonzero))}(v,t),b=(0,a().VK)((()=>t.canAdmin()),[t]),S=(0,a().VK)((()=>(0,zt().LT)()&&b),[b]),M=Boolean((0,c().a7)(null==f?void 0:f.subscription,"plan")),j=(0,qe().P)(),[C,w,k,_]=(0,a().VK)((()=>{const e=(0,Ne().d)();return[e,e,e,e&&ye().default.checkGate({gateName:"download_for_offline"})]}),[]),T=(0,Qe().hZ)(),I=(0,a().VK)((()=>{const e=tt().Z.getData(g,{spaceId:t.id}),n=e&&(null==e?void 0:e.pointers.length)>0;return!g.device.isMobile&&ye().default.checkGate({gateName:"custom_emojis"})&&((0,Ve().Zr)({spaceStore:t})||n)}),[g,t]);(0,Ke().Z)({shouldPreserveTextSelection:!0,shouldPreserveBlockSelection:!0,shouldRestoreSelection:!0});const P=(0,Fe().Sb)(t);return(0,te.jsxs)("div",{style:mh,children:[(0,te.jsx)("div",{style:ph,children:(0,te.jsxs)("div",{children:[(0,te.jsx)("div",{style:Ch(m),children:(0,te.jsx)(p()._H,{id:"spaceSettings.sidebar.personalSettingsSection.title",defaultMessage:"Account"})}),(0,te.jsx)(_h,{}),(0,te.jsx)(Ah,{spaceStore:t,spaceBasicSettingsStore:n,spaceProfileSettingsStore:i,securitySettingsStore:s,spaceDomainSettingsStore:u,tab:"profile"}),(0,te.jsx)(Ah,{spaceStore:t,spaceBasicSettingsStore:n,spaceProfileSettingsStore:i,securitySettingsStore:s,spaceDomainSettingsStore:u,tab:"user_settings"}),(0,te.jsx)(Ah,{spaceStore:t,spaceBasicSettingsStore:n,spaceProfileSettingsStore:i,securitySettingsStore:s,spaceDomainSettingsStore:u,tab:"notifications"}),(0,te.jsx)(Ah,{spaceStore:t,spaceBasicSettingsStore:n,spaceProfileSettingsStore:i,securitySettingsStore:s,spaceDomainSettingsStore:u,tab:"connected_apps"}),(0,te.jsx)(Ah,{spaceStore:t,spaceBasicSettingsStore:n,spaceProfileSettingsStore:i,securitySettingsStore:s,spaceDomainSettingsStore:u,tab:"language_and_region"}),j&&(0,te.jsx)(Ah,{spaceStore:t,spaceBasicSettingsStore:n,spaceProfileSettingsStore:i,securitySettingsStore:s,spaceDomainSettingsStore:u,tab:"offline"}),(0,te.jsx)(ii().Z,{size:18,isHidden:!0}),(0,te.jsx)("div",{style:Ch(m),children:(0,te.jsx)(p()._H,{id:"spaceSettings.sidebar.workspaceSettingsSection.title",defaultMessage:"Workspace"})}),M?null:(0,te.jsx)(Ah,{spaceStore:t,spaceBasicSettingsStore:n,spaceProfileSettingsStore:i,securitySettingsStore:s,spaceDomainSettingsStore:u,tab:"plans"}),!M&&x?(0,te.jsx)(Ah,{spaceStore:t,spaceBasicSettingsStore:n,spaceProfileSettingsStore:i,securitySettingsStore:s,spaceDomainSettingsStore:u,tab:"billing"}):null,(0,te.jsx)(Ah,{spaceStore:t,spaceBasicSettingsStore:n,spaceProfileSettingsStore:i,securitySettingsStore:s,spaceDomainSettingsStore:u,tab:"settings"}),S&&(0,te.jsx)(Ah,{spaceStore:t,spaceBasicSettingsStore:n,spaceProfileSettingsStore:i,securitySettingsStore:s,spaceDomainSettingsStore:u,tab:"requests"}),(0,te.jsx)(Ah,{spaceStore:t,spaceBasicSettingsStore:n,spaceProfileSettingsStore:i,securitySettingsStore:s,spaceDomainSettingsStore:u,tab:"teams"}),(0,te.jsx)(Ah,{spaceStore:t,spaceBasicSettingsStore:n,spaceProfileSettingsStore:i,securitySettingsStore:s,spaceDomainSettingsStore:u,tab:"members"}),!g.device.isMobile&&(0,te.jsx)(Ah,{spaceStore:t,spaceBasicSettingsStore:n,spaceProfileSettingsStore:i,securitySettingsStore:s,spaceDomainSettingsStore:u,tab:"analytics"}),v&&(0,te.jsx)(Ah,{spaceStore:t,spaceBasicSettingsStore:n,spaceProfileSettingsStore:i,securitySettingsStore:s,spaceDomainSettingsStore:u,tab:"subscription"}),P&&(0,te.jsx)(Ah,{spaceStore:t,spaceBasicSettingsStore:n,spaceProfileSettingsStore:i,securitySettingsStore:s,spaceDomainSettingsStore:u,tab:"verified_pages"}),(0,te.jsx)(Ah,{spaceStore:t,spaceBasicSettingsStore:n,spaceProfileSettingsStore:i,securitySettingsStore:s,spaceDomainSettingsStore:u,tab:"sites"}),I&&(0,te.jsx)(Ah,{spaceStore:t,spaceBasicSettingsStore:n,spaceProfileSettingsStore:i,securitySettingsStore:s,spaceDomainSettingsStore:u,tab:"custom_emoji"}),(0,te.jsx)(Ah,{spaceStore:t,spaceBasicSettingsStore:n,spaceProfileSettingsStore:i,securitySettingsStore:s,spaceDomainSettingsStore:u,tab:"security"}),(0,te.jsx)(Ah,{spaceStore:t,spaceBasicSettingsStore:n,spaceProfileSettingsStore:i,securitySettingsStore:s,spaceDomainSettingsStore:u,tab:"identity_provisioning"}),!g.device.isMobile&&(0,te.jsx)(Ah,{spaceStore:t,spaceBasicSettingsStore:n,spaceProfileSettingsStore:i,securitySettingsStore:s,spaceDomainSettingsStore:u,tab:"admin_content_search"}),(0,te.jsx)(Ah,{spaceStore:t,spaceBasicSettingsStore:n,spaceProfileSettingsStore:i,securitySettingsStore:s,spaceDomainSettingsStore:u,tab:"integrations"}),!g.device.isMobile&&(0,te.jsx)("span",{onClick:()=>{const e=l().Il();nt().Z.setState({flowId:e}),y().Sy(g,{from:"settings",flowId:e})},children:(0,te.jsx)(Ah,{spaceStore:t,spaceBasicSettingsStore:n,spaceProfileSettingsStore:i,securitySettingsStore:s,spaceDomainSettingsStore:u,tab:"imports"})}),!g.device.isMobile&&(0,te.jsx)(Ah,{spaceStore:t,spaceBasicSettingsStore:n,spaceProfileSettingsStore:i,securitySettingsStore:s,spaceDomainSettingsStore:u,tab:"audit_log"}),M&&x?(0,te.jsx)(Ah,{spaceStore:t,spaceBasicSettingsStore:n,spaceProfileSettingsStore:i,securitySettingsStore:s,spaceDomainSettingsStore:u,tab:"billing"}):null,M?(0,te.jsx)(Ah,{spaceStore:t,spaceBasicSettingsStore:n,spaceProfileSettingsStore:i,securitySettingsStore:s,spaceDomainSettingsStore:u,tab:"plans"}):null,C&&(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(ii().Z,{size:18,isHidden:!0}),(0,te.jsx)("div",{style:Ch(m),children:(0,te.jsx)(p()._H,{id:"spaceSettings.sidebar.developmentSettingsSection.title",defaultMessage:"Development"})}),w&&(0,te.jsx)(Ah,{spaceStore:t,spaceBasicSettingsStore:n,spaceProfileSettingsStore:i,securitySettingsStore:s,spaceDomainSettingsStore:u,tab:"experiments"}),T&&(0,te.jsx)(Ah,{spaceStore:t,spaceBasicSettingsStore:n,spaceProfileSettingsStore:i,securitySettingsStore:s,spaceDomainSettingsStore:u,tab:"performance_toolbar"}),k&&(0,te.jsx)(Ah,{spaceStore:t,spaceBasicSettingsStore:n,spaceProfileSettingsStore:i,securitySettingsStore:s,spaceDomainSettingsStore:u,tab:"user_similarity_scores"}),w&&(0,te.jsx)(Ah,{spaceStore:t,spaceBasicSettingsStore:n,spaceProfileSettingsStore:i,securitySettingsStore:s,spaceDomainSettingsStore:u,tab:"collection_debug"}),_&&(0,te.jsx)(Ah,{spaceStore:t,spaceBasicSettingsStore:n,spaceProfileSettingsStore:i,securitySettingsStore:s,spaceDomainSettingsStore:u,tab:"offline_mode_debug"})]})]})}),(0,te.jsx)(Rh,{spaceStore:t,spaceBasicSettingsStore:n,spaceProfileSettingsStore:i,securitySettingsStore:s,spaceDomainSettingsStore:u,renderBelowPrompt:b?(0,te.jsx)(Pt,{currentSettingsTab:h}):null})]})}function Bh(e){let{spaceStore:t,userStore:n,spaceBasicSettingsStore:i,spaceProfileSettingsStore:o,securitySettingsStore:s,samlSettingsStore:r,spaceDomainSettingsStore:l}=e;const{organizationOverrides:d,organizationInfo:c,isOrganizationOwner:u}=(0,Oi().u)({spaceId:t.id}),p=(0,a().VK)((()=>ct().default.state.currentTab),[]),m=(0,Wt().pQ)({spaceId:t.id}),g=(0,a().VK)((()=>function(e,t,n,i,o,s,a,r,l,d,c,u){const p={profile:()=>(0,te.jsx)(Ih,{spaceProfileSettingsStore:o,billingData:u}),notifications_and_settings:()=>(0,te.jsx)(yd().Z,{isMobile:!1,isMobileNative:!1,billingData:u}),user_settings:()=>(0,te.jsx)(rh,{billingData:u}),notifications:()=>(0,te.jsx)(Md,{}),language_and_region:()=>(0,te.jsx)(gd,{}),connected_apps:()=>(0,te.jsx)(zf().Z,{location:"settings-page"}),offline:()=>(0,te.jsx)(Xe,{}),settings:()=>(0,te.jsx)(Ac().ZP,{spaceStore:t,spaceBasicSettingsStore:i,securitySettingsStore:s,organizationOverrides:l}),requests:()=>(0,te.jsx)(co,{spaceStore:t}),teams:()=>(0,te.jsx)(Kf,{}),members:()=>(0,te.jsx)(Sh,{spaceStore:t}),analytics:()=>(0,te.jsx)(Pc,{spaceStore:t}),plans:()=>(0,te.jsx)(qt().Y,{}),billing:()=>(0,te.jsx)(Mh,{spaceStore:t}),subscription:()=>(0,te.jsx)(Rt().ZP,{children:(0,te.jsx)(Eg().y,{})}),security:()=>(0,te.jsx)(vi,{spaceStore:t,userStore:n,securitySettingsStore:s,organizationOverrides:l}),identity_provisioning:()=>(0,te.jsx)(od,{spaceStore:t,userStore:n,samlConfigStore:a,domainSettingsStore:r,organizationInfo:d,isOrganizationOwner:c}),admin_content_search:()=>(0,te.jsx)(fo().Z,{spaceStore:t,userStore:n}),integrations:()=>(0,te.jsx)(Ss,{spaceStore:t,userStore:n,organizationOverrides:l}),audit_log:()=>(0,te.jsx)(Rt().ZP,{children:(0,te.jsx)(Ie,{spaceStore:t})}),imports:()=>(0,te.jsx)(jh,{}),sites:()=>(0,te.jsx)(Le,{spaceStore:t}),custom_emoji:()=>(0,te.jsx)(Be,{spaceStore:t}),verified_pages:()=>(0,te.jsx)(go,{spaceStore:t}),experiments:()=>(0,te.jsx)(Rt().ZP,{children:(0,te.jsx)(ks().U,{})}),performance_toolbar:()=>(0,te.jsx)(Rt().ZP,{children:(0,te.jsx)(Qe().IG,{})}),user_similarity_scores:()=>(0,te.jsx)(Rt().ZP,{children:(0,te.jsx)(uh,{store:t})}),collection_debug:()=>(0,te.jsx)(Rt().ZP,{children:(0,te.jsx)(Re,{})}),offline_mode_debug:()=>(0,te.jsx)(Rt().ZP,{children:(0,te.jsx)(Ye,{})})};if(yh(e,t))return p[e];{const e=b().CT(t);return b().r$({currentTab:e}),p[e]}}(p,t,n,i,o,s,r,l,d,c,u,m)),[p,r,s,i,l,o,t,n,d,c,u,m]);return(0,te.jsx)(Cs().Z,{capture:!0,allowEsc:!0,render:e=>(0,te.jsx)(kd,{sidebar:(0,te.jsx)(Zh,{spaceStore:t,spaceBasicSettingsStore:i,spaceProfileSettingsStore:o,securitySettingsStore:s,spaceDomainSettingsStore:l}),...e,children:g()})})}const Dh=i.memo(hh)},543125:(e,t,n)=>{n.d(t,{T2:()=>se,ap:()=>oe,mY:()=>ne,j7:()=>ie,sY:()=>te});n(667294);var i=()=>n(827282),o=n(785893);const s={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M10 7.75v.843c0 .445.533.664.847.35l1.328-1.329a.49.49 0 0 0 0-.7l-1.328-1.329a.495.495 0 0 0-.847.35V6.5a3.5 3.5 0 1 0 3.5 3.5.625.625 0 1 0-1.25 0A2.25 2.25 0 1 1 10 7.75"}),(0,o.jsx)("path",{d:"M1.75 10a8.25 8.25 0 1 1 16.5 0 8.25 8.25 0 0 1-16.5 0M10 3.25a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5"})]})},a=(0,i().IU)("arrowCircleClockwiseInCircle",s),r={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"m14.03 11.03-3.5 3.5a.75.75 0 0 1-1.06 0l-3.5-3.5a.75.75 0 1 1 1.06-1.06l2.263 2.262V6.5a.75.75 0 0 1 1.5 0v5.646L12.97 9.97a.75.75 0 1 1 1.06 1.06"}),(0,o.jsx)("path",{d:"M10 18.25a8.25 8.25 0 1 0 0-16.5 8.25 8.25 0 0 0 0 16.5M16.75 10a6.75 6.75 0 1 1-13.5 0 6.75 6.75 0 0 1 13.5 0"})]})},l=(0,i().IU)("arrowCircleDown",r),d={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"m14.03 8.97-3.5-3.5a.75.75 0 0 0-1.06 0l-3.5 3.5a.75.75 0 1 0 1.06 1.06l2.263-2.262V13.5a.75.75 0 0 0 1.5 0V7.854l2.177 2.176a.75.75 0 1 0 1.06-1.06"}),(0,o.jsx)("path",{d:"M10 1.75a8.25 8.25 0 1 1 0 16.5 8.25 8.25 0 0 1 0-16.5M16.75 10a6.75 6.75 0 1 0-13.5 0 6.75 6.75 0 0 0 13.5 0"})]})},c=(0,i().IU)("arrowCircleUp",d);const u={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M12 9.08v2.67a.75.75 0 0 0 1.5 0V7.27a.75.75 0 0 0-.75-.75h-4.5a.75.75 0 1 0 0 1.5h2.69l-4.46 4.46a.75.75 0 0 0 1.06 1.06z"}),(0,o.jsx)("path",{d:"M2.5 5.25A2.75 2.75 0 0 1 5.25 2.5h9.5a2.75 2.75 0 0 1 2.75 2.75v9.5a2.75 2.75 0 0 1-2.75 2.75h-9.5a2.75 2.75 0 0 1-2.75-2.75zM5.25 4C4.56 4 4 4.56 4 5.25v9.5c0 .69.56 1.25 1.25 1.25h9.5c.69 0 1.25-.56 1.25-1.25v-9.5C16 4.56 15.44 4 14.75 4z"})]})},p=(0,i().IU)("arrowUpRightSquare",u);const m={viewBox:"0 0 20 20",svg:(0,o.jsx)("path",{d:"M4.25 14.75c-.69 0-1.25-.56-1.25-1.25v-6h14v2.741l1.5.619V6a2.75 2.75 0 0 0-2.75-2.75H4.25A2.75 2.75 0 0 0 1.5 6v7.5a2.75 2.75 0 0 0 2.75 2.75h8.345l-.43-1.5zm4.5-10a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5m-2.25 0a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5m-2.25 0a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5m14.782 12.784a.67.67 0 0 1-.944-.044l-2.49-2.723-.673 1.77a.223.223 0 0 1-.418-.004l-2.327-6.402a.222.222 0 0 1 .31-.274l5.79 2.926a.222.222 0 0 1-.023.408l-1.723.62 2.54 2.78a.665.665 0 0 1-.042.943"})},g=(0,i().IU)("browserClick",m),f={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M12.97 8.08a.75.75 0 1 0-1.285-.771l-2.498 4.163-1.345-1.57a.75.75 0 1 0-1.14.977l2.023 2.36a.75.75 0 0 0 1.213-.103z"}),(0,o.jsx)("path",{d:"M10.487 1.43a.75.75 0 0 0-.973 0L7.249 3.358l-2.966.237a.75.75 0 0 0-.687.687L3.359 7.25l-1.93 2.265a.75.75 0 0 0 0 .973l1.93 2.264.237 2.966a.75.75 0 0 0 .687.687l2.966.237 2.265 1.93a.75.75 0 0 0 .973 0l2.264-1.93 2.966-.236a.75.75 0 0 0 .687-.689l.237-2.965 1.93-2.264a.75.75 0 0 0 0-.973l-1.93-2.265-.236-2.966a.75.75 0 0 0-.689-.687l-2.965-.237zm-2.45 3.228L10 2.985l1.963 1.673a.75.75 0 0 0 .427.177l2.57.205.205 2.57a.75.75 0 0 0 .177.427L17.015 10l-1.673 1.963a.75.75 0 0 0-.177.427l-.205 2.57-2.57.205a.75.75 0 0 0-.427.177L10 17.015l-1.963-1.673a.75.75 0 0 0-.427-.177l-2.57-.205-.205-2.57a.75.75 0 0 0-.177-.427L2.985 10l1.673-1.963a.75.75 0 0 0 .177-.427l.205-2.57 2.57-.205a.75.75 0 0 0 .427-.177"})]})},h=(0,i().IU)("checkmarkSeal",f),y={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M12.893 7.886a.75.75 0 1 0-1.286-.772l-2.465 4.108L7.82 9.679a.75.75 0 1 0-1.138.976l2 2.333a.75.75 0 0 0 1.212-.102z"}),(0,o.jsx)("path",{d:"M10.335 1.33a.75.75 0 0 0-.67 0l-2.1 1.049a8.25 8.25 0 0 1-3.69.871H3a.75.75 0 0 0-.75.75v7.703a5.75 5.75 0 0 0 3.485 5.285l3.97 1.701a.75.75 0 0 0 .59 0l3.97-1.7a5.75 5.75 0 0 0 3.485-5.286V4a.75.75 0 0 0-.75-.75h-.875a8.25 8.25 0 0 1-3.69-.871zm-2.1 2.39L10 2.84l1.764.882a9.75 9.75 0 0 0 4.36 1.029h.126v6.953a4.25 4.25 0 0 1-2.576 3.906L10 17.184l-3.674-1.575a4.25 4.25 0 0 1-2.576-3.906V4.75h.125a9.75 9.75 0 0 0 4.36-1.03"})]})},v=(0,i().IU)("checkmarkShield",y),x={viewBox:"0 0 20 20",svg:(0,o.jsx)("path",{d:"M10 1.75c-1.996 0-3.835.288-5.202.776-.68.243-1.284.55-1.732.928-.444.375-.816.894-.816 1.546v10c0 .652.372 1.17.816 1.546.448.378 1.052.685 1.732.928 1.367.488 3.206.776 5.202.776s3.835-.288 5.202-.776c.68-.243 1.284-.55 1.732-.928.444-.375.816-.894.816-1.546V5c0-.652-.372-1.17-.816-1.546-.448-.378-1.052-.685-1.732-.928-1.367-.488-3.206-.776-5.202-.776M3.75 5c0-.039.02-.177.284-.4.26-.22.682-.452 1.269-.661C6.469 3.522 8.13 3.25 10 3.25s3.531.272 4.698.689c.586.209 1.008.44 1.268.66.264.224.284.362.284.401s-.02.177-.284.4c-.26.22-.682.452-1.268.661-1.167.417-2.828.689-4.698.689s-3.531-.272-4.697-.689c-.587-.209-1.008-.44-1.269-.66C3.77 5.176 3.75 5.038 3.75 5m12.5 2.01V10c0 .039-.02.177-.284.4-.26.22-.682.452-1.268.662-1.167.416-2.828.688-4.698.688s-3.531-.272-4.697-.688c-.587-.21-1.008-.442-1.269-.662-.264-.223-.284-.361-.284-.4V7.01c.317.175.67.33 1.048.464 1.367.488 3.206.776 5.202.776s3.835-.288 5.202-.776c.377-.135.731-.29 1.048-.465m-12.5 5c.317.175.67.33 1.048.464 1.367.488 3.206.776 5.202.776s3.835-.288 5.202-.776c.377-.135.731-.29 1.048-.465V15c0 .039-.02.177-.284.4-.26.22-.682.452-1.268.661-1.167.417-2.828.689-4.698.689s-3.531-.272-4.697-.689c-.587-.209-1.008-.44-1.269-.66-.264-.224-.284-.362-.284-.401z"})},b=(0,i().IU)("collection",x);const S={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M5 11a.5.5 0 0 0-.5.5V13a.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5v-1.5A.5.5 0 0 0 7 11z"}),(0,o.jsx)("path",{d:"M1.5 6.25A2.75 2.75 0 0 1 4.25 3.5h11.5a2.75 2.75 0 0 1 2.75 2.75v7.5a2.75 2.75 0 0 1-2.75 2.75H4.25a2.75 2.75 0 0 1-2.75-2.75zM4.25 5C3.56 5 3 5.56 3 6.25v.375h14V6.25C17 5.56 16.44 5 15.75 5zM3 13.75c0 .69.56 1.25 1.25 1.25h11.5c.69 0 1.25-.56 1.25-1.25V7.875H3z"})]})},M=(0,i().IU)("creditCard",S);const j={viewBox:"0 0 20 20",svg:(0,o.jsx)("path",{d:"M1.8 10a8.2 8.2 0 1 1 16.4 0 8.2 8.2 0 0 1-16.4 0m3.429-4.846a9.6 9.6 0 0 0 2.017.63q.143-.612.324-1.139c.148-.428.318-.824.514-1.171a6.8 6.8 0 0 0-2.855 1.68m-.915 1.114A6.76 6.76 0 0 0 3.235 9.3h3.576a20 20 0 0 1 .18-2.14c-1.01-.203-1.921-.507-2.677-.892M3.235 10.7a6.76 6.76 0 0 0 1.08 3.032c.755-.385 1.665-.69 2.677-.893a20 20 0 0 1-.181-2.14zm4.977 0c.023.68.08 1.33.164 1.931a16 16 0 0 1 3.247 0c.085-.602.142-1.25.165-1.931zm4.977 0a20 20 0 0 1-.181 2.14c.897.18 1.714.44 2.416.764q.137.066.231.173a6.76 6.76 0 0 0 1.11-3.077zm3.575-1.4a6.76 6.76 0 0 0-1.079-3.032c-.755.385-1.666.69-2.677.893.095.674.157 1.393.18 2.139zm-4.976 0c-.023-.681-.08-1.33-.165-1.932a16 16 0 0 1-3.247 0A19 19 0 0 0 8.212 9.3zm-6.559 5.545a6.8 6.8 0 0 0 2.855 1.681 7 7 0 0 1-.514-1.171q-.181-.528-.324-1.139a9.6 9.6 0 0 0-2.017.63m9.542 0a9.6 9.6 0 0 0-2.017-.628q-.143.61-.325 1.137a7 7 0 0 1-.513 1.172 6.8 6.8 0 0 0 2.855-1.68m-3.665.053a10 10 0 0 0 .257-.885 14.6 14.6 0 0 0-2.726 0q.116.478.257.885c.211.614.448 1.06.675 1.34.232.284.382.312.43.312.05 0 .2-.028.431-.312.228-.28.464-.726.676-1.34m3.665-9.744a6.8 6.8 0 0 0-2.855-1.68c.195.347.366.743.513 1.171q.182.527.325 1.139a9.6 9.6 0 0 0 2.017-.63M10 6.05q.706 0 1.363-.063a10 10 0 0 0-.257-.886c-.212-.613-.448-1.06-.676-1.34-.232-.284-.381-.311-.43-.311-.05 0-.199.027-.43.312-.228.28-.465.726-.676 1.34a10 10 0 0 0-.257.885q.658.062 1.363.063"})},C=(0,i().IU)("globe",j),w={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M10 2.75a3.75 3.75 0 0 0-1.666 7.11.75.75 0 0 1 .416.672v5.378L10 17.003l.947-.829-1.016-1.186a.75.75 0 0 1 0-.976l1.319-1.54v-1.94a.75.75 0 0 1 .416-.671A3.75 3.75 0 0 0 10 2.75M4.75 6.5a5.25 5.25 0 1 1 8 4.473v1.777a.75.75 0 0 1-.18.488L11.487 14.5l1.081 1.262a.75.75 0 0 1-.075 1.052l-2 1.75a.75.75 0 0 1-.988 0l-2-1.75a.75.75 0 0 1-.256-.564v-5.277A5.25 5.25 0 0 1 4.75 6.5"}),(0,o.jsx)("path",{d:"M11 5.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0"})]})},k=(0,i().IU)("key",w),_={viewBox:"0 0 20 20",svg:(0,o.jsx)("path",{d:"M11.227 1.285A.75.75 0 0 1 11.75 2v5.75h2.75a.75.75 0 0 1 .608 1.19l-6.5 9a.75.75 0 0 1-1.356-.493l.443-6.197H5a.75.75 0 0 1-.613-1.182l6-8.5a.75.75 0 0 1 .84-.283M6.447 9.75H8.5a.75.75 0 0 1 .748.803l-.312 4.37 4.097-5.673H11a.75.75 0 0 1-.75-.75V4.363z"})},T=(0,i().IU)("lightning",_),I={viewBox:"0 0 20 20",svg:(0,o.jsx)("path",{d:"M8.75 2.5a6.25 6.25 0 1 0 3.857 11.168l4.113 4.112a.75.75 0 1 0 1.06-1.06l-4.112-4.113A6.25 6.25 0 0 0 8.75 2.5M4 8.75a4.75 4.75 0 1 1 9.5 0 4.75 4.75 0 0 1-9.5 0"})},P=(0,i().IU)("magnifyingGlass",I),A={viewBox:"0 0 20 20",svg:(0,o.jsx)("path",{d:"m2.52 17.45 4.896-1.896 4.878 1.888a.75.75 0 0 0 .578 0l5.148-1.993a.75.75 0 0 0 .48-.699v-12a.75.75 0 0 0-1.022-.7l-4.895 1.896L7.687 2.05a.75.75 0 0 0-.542 0l-5.166 2a.75.75 0 0 0-.48.699v12a.75.75 0 0 0 1.021.7m9.313-1.795-3.667-1.419V3.845l3.666 1.419zm1.5-10.391L17 3.844v10.392l-3.666 1.42zM3 5.264l3.666-1.42v10.392L3 15.656z"})},R=(0,i().IU)("map",A),Z={viewBox:"0 0 20 20",svg:(0,o.jsx)("path",{d:"M13.613 2.55c-1.11 0-2.01.459-2.616 1.215-.594.74-.874 1.718-.874 2.735s.28 1.995.874 2.734c.607.757 1.506 1.216 2.616 1.216s2.008-.46 2.616-1.216c.593-.74.874-1.718.874-2.734s-.28-1.995-.875-2.735c-.607-.756-1.506-1.215-2.615-1.215m-2.09 3.95c0-.774.214-1.42.566-1.858.338-.421.833-.692 1.524-.692.69 0 1.186.27 1.524.692.351.438.566 1.084.566 1.858 0 .773-.215 1.42-.566 1.858-.338.421-.834.692-1.524.692s-1.186-.271-1.524-.692c-.352-.438-.566-1.085-.566-1.858m2.09 4.97c-2.445 0-4.518 1.578-5.19 3.774-.341 1.1.498 2.206 1.64 2.206h7.1a1.715 1.715 0 0 0 1.641-2.196l-.002-.01c-.67-2.183-2.742-3.774-5.19-3.774m-3.85 4.185c.489-1.604 2.015-2.785 3.85-2.785 1.83 0 3.357 1.187 3.849 2.78a.316.316 0 0 1-.3.4h-7.1a.31.31 0 0 1-.301-.391zM3.358 5.354C3.886 4.697 4.668 4.3 5.623 4.3c.954 0 1.736.397 2.264 1.054.515.64.756 1.484.756 2.356s-.241 1.715-.756 2.356c-.528.657-1.31 1.054-2.264 1.054-.955 0-1.737-.397-2.265-1.054-.515-.641-.755-1.485-.755-2.356 0-.872.24-1.715.755-2.356m1.091.877c-.272.339-.446.85-.446 1.479 0 .628.174 1.14.446 1.479.26.323.638.53 1.174.53s.913-.207 1.173-.53c.272-.34.447-.85.447-1.48 0-.628-.175-1.14-.447-1.478-.26-.323-.638-.531-1.173-.531-.536 0-.914.208-1.174.53m-1.896 9.26c.02.03.05.06.11.06h4.21c-.03.48.06.96.24 1.4h-4.44c-.49 0-.95-.22-1.24-.62-.3-.4-.38-.89-.24-1.36.58-1.9 2.4-3.23 4.43-3.23.95 0 1.86.3 2.61.81-.3.36-.56.74-.78 1.16-.52-.36-1.16-.57-1.83-.57-1.42 0-2.69.91-3.09 2.23-.02.05 0 .09.02.12"})},B=(0,i().IU)("people",Z),D={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M7.666 5.835C8.21 5.158 9.016 4.75 10 4.75s1.79.408 2.335 1.085c.53.66.775 1.525.775 2.415s-.245 1.756-.775 2.415c-.545.677-1.351 1.085-2.335 1.085s-1.79-.408-2.334-1.085c-.53-.66-.776-1.525-.776-2.415s.245-1.756.776-2.415m1.169.94c-.27.336-.445.845-.445 1.475s.175 1.14.445 1.475c.255.318.629.525 1.165.525s.91-.207 1.165-.525c.27-.336.445-.845.445-1.475s-.175-1.14-.444-1.475c-.256-.318-.63-.525-1.166-.525s-.91.207-1.165.525"}),(0,o.jsx)("path",{d:"M1.75 10a8.25 8.25 0 1 1 16.5 0 8.25 8.25 0 0 1-16.5 0M10 3.25a6.75 6.75 0 0 0-4.347 11.914C6.39 13.664 8.106 12.7 10 12.7c1.882 0 3.61.968 4.343 2.468A6.75 6.75 0 0 0 10 3.25m3.074 12.761C12.693 15.026 11.526 14.2 10 14.2c-1.534 0-2.694.82-3.08 1.808a6.7 6.7 0 0 0 3.08.742 6.7 6.7 0 0 0 3.074-.739"})]})},L=(0,i().IU)("personCircle",D),O={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M7.75 4.625a.625.625 0 1 0 0 1.25h4.5a.625.625 0 1 0 0-1.25zM7.125 7.63c0-.345.28-.625.625-.625h4.5a.625.625 0 1 1 0 1.25h-4.5a.625.625 0 0 1-.625-.625"}),(0,o.jsx)("path",{d:"M1.5 4.29a2.25 2.25 0 0 1 2.25-2.25h9.5a2.25 2.25 0 0 1 2.25 2.25V13h2.25a.75.75 0 0 1 .75.75v2A2.25 2.25 0 0 1 16.25 18h-9.5a2.25 2.25 0 0 1-2.25-2.25V7H2.25a.75.75 0 0 1-.75-.75zM7.242 16.5h.008c.416 0 .75-.334.75-.75v-2a.75.75 0 0 1 .75-.75H14V4.29a.75.75 0 0 0-.75-.75H5.872q.126.354.128.75v11.46c0 .416.334.75.75.75zm7.5-2H9.5v1.25q-.002.396-.128.75h6.878c.416 0 .75-.334.75-.75V14.5zM3 4.29V5.5h1.5V4.29a.75.75 0 0 0-.75-.75.75.75 0 0 0-.75.75"})]})},H=(0,i().IU)("scroll",O);var V=()=>n(429617);const U={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M9.25 6.12a.5.5 0 1 0-1 0c0 .74-.211 1.254-.54 1.582-.33.33-.844.538-1.58.538a.5.5 0 1 0 0 1c.74 0 1.254.211 1.582.54.33.33.538.844.538 1.58a.5.5 0 1 0 1 0c0-.74.211-1.253.54-1.582s.844-.538 1.58-.538a.5.5 0 0 0 0-1c-.74 0-1.253-.21-1.582-.54s-.538-.844-.538-1.58"}),(0,o.jsx)("path",{d:"M8.75 2.5a6.25 6.25 0 1 0 3.857 11.168l4.113 4.112a.75.75 0 1 0 1.06-1.06l-4.112-4.113A6.25 6.25 0 0 0 8.75 2.5M4 8.75a4.75 4.75 0 1 1 9.5 0 4.75 4.75 0 0 1-9.5 0"})]})},E=(0,i().IU)("sparkleMagnifyingGlass",U);const N={viewBox:"0 0 20 20",svg:(0,o.jsx)("path",{d:"M3.5 2.75A1.75 1.75 0 0 0 1.75 4.5v3c0 .966.784 1.75 1.75 1.75h4A1.75 1.75 0 0 0 9.25 7.5v-3A1.75 1.75 0 0 0 7.5 2.75zM3.25 4.5a.25.25 0 0 1 .25-.25h4a.25.25 0 0 1 .25.25v3a.25.25 0 0 1-.25.25h-4a.25.25 0 0 1-.25-.25zm9.25-1.75a1.75 1.75 0 0 0-1.75 1.75v3c0 .966.784 1.75 1.75 1.75h4a1.75 1.75 0 0 0 1.75-1.75v-3a1.75 1.75 0 0 0-1.75-1.75zm-.25 1.75a.25.25 0 0 1 .25-.25h4a.25.25 0 0 1 .25.25v3a.25.25 0 0 1-.25.25h-4a.25.25 0 0 1-.25-.25zm-10.5 8c0-.966.784-1.75 1.75-1.75h4c.966 0 1.75.784 1.75 1.75v3a1.75 1.75 0 0 1-1.75 1.75h-4a1.75 1.75 0 0 1-1.75-1.75zm1.75-.25a.25.25 0 0 0-.25.25v3c0 .138.112.25.25.25h4a.25.25 0 0 0 .25-.25v-3a.25.25 0 0 0-.25-.25zm9-1.5a1.75 1.75 0 0 0-1.75 1.75v3c0 .966.784 1.75 1.75 1.75h4a1.75 1.75 0 0 0 1.75-1.75v-3a1.75 1.75 0 0 0-1.75-1.75zm-.25 1.75a.25.25 0 0 1 .25-.25h4a.25.25 0 0 1 .25.25v3a.25.25 0 0 1-.25.25h-4a.25.25 0 0 1-.25-.25z"})},F=(0,i().IU)("squareGrid2X2",N),K={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M16.125 11.875a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0m-.75 3.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5M6.25 5.875a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0m-.75 3.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5m.75 1.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0M9 6.625a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5m.75 1.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0M9 11.625a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5"}),(0,o.jsx)("path",{d:"M1 4.875a2.75 2.75 0 0 1 2.75-2.75h7a2.75 2.75 0 0 1 2.75 2.75v3.5h2.75a2.75 2.75 0 0 1 2.75 2.75v6a.75.75 0 0 1-.75.75H1.75a.75.75 0 0 1-.75-.75zm12.5 11.5h4v-5.25c0-.69-.56-1.25-1.25-1.25H13.5zM12 4.875c0-.69-.56-1.25-1.25-1.25h-7c-.69 0-1.25.56-1.25 1.25v11.5h2.125v-2.75c0-.345.28-.625.625-.625h4c.345 0 .625.28.625.625v2.75H12zm-6.125 11.5h2.75V14.25h-2.75z"})]})},z=(0,i().IU)("teamspace",K);var W=()=>n(286338),q=()=>n(527278),G=()=>n(18281),Y=()=>n(897257),$=()=>n(846550),X=()=>n(12530),Q=()=>n(218835);function J(){const e=(0,n(142735).VK)((()=>n(876822).default.state.currentSpaceStore),[]);return e?(0,o.jsx)(ee,{spaceStore:e}):null}function ee(e){let{spaceStore:t}=e;const n=((0,Q().O4)({spaceStore:t,requestType:"guest"})??0)+((0,Q().O4)({spaceStore:t,requestType:"member"})??0),i=(0,$().yK)((e=>({container:{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",right:6,top:6},badge:{top:-3,right:-5}})),[]);return 0===n?null:(0,o.jsx)("div",{style:i.container,children:(0,o.jsx)(X().Z,{count:n,style:i.badge,color:X().N.Red})})}const te=(0,n(788860).vU)({offlineModeDebugTab:{id:"spaceSettingsSidebar.offlineModeDebugTab.title",defaultMessage:"Offline Mode"},offlineTab:{id:"spaceSettingsSidebar.offlineTab.title",defaultMessage:"Offline"},accountTab:{id:"spaceSettingsSidebar.accountTab.title",defaultMessage:"My account"},settingsTab:{id:"spaceSettingsSidebar.settingsTab.title",defaultMessage:"Settings"},teamsTab:{id:"spaceSettingsSidebar.teamsTab.title",defaultMessage:"Teamspaces"},peopleTab:{id:"spaceSettingsSidebar.peopleTab.title",defaultMessage:"People"},membersTab:{id:"spaceSettingsSidebar.membersTab.title",defaultMessage:"Members"},explorePlansTab:{id:"spaceSettingsSidebar.explorePlansTab.title",defaultMessage:"Explore plans"},upgradePlanTab:{id:"spaceSettingsSidebar.upgradePlanTab.title",defaultMessage:"Upgrade plan"},billingTab:{id:"spaceSettingsSidebar.billingTab.title",defaultMessage:"Billing"},subscriptionTab:{id:"spaceSettingsSidebar.subscriptionTab.title",defaultMessage:"Subscription"},connectedAppsTab:{id:"spaceSettingsSidebar.connectedAppsTab.title",defaultMessage:"My connected apps"},userConnectionsTab:{id:"spaceSettingsSidebar.userConnectionsTab.title",defaultMessage:"My connections"},securityTab:{id:"spaceSettingsSidebar.securityTab.title",defaultMessage:"Security"},securityAndDataTab:{id:"spaceSettingsSidebar.securityAndDataTab.title",defaultMessage:"Security & data"},identityProvisioningTab:{id:"spaceSettingsSidebar.identity&ProvisioningTab.title",defaultMessage:"Identity & provisioning"},sitesTab:{id:"spaceSettingsSidebar.sites.title",defaultMessage:"Sites"},customEmojiTab:{id:"spaceSettingsSidebar.emoji.title",defaultMessage:"Emoji"},adminContentSearchTab:{id:"spaceSettingsSidebar.adminContentSearch.title",defaultMessage:"Content search"},languageAndRegionTab:{id:"spaceSettingsSidebar.languageAndRegionTab.title",defaultMessage:"Language & region"},integrationsTab:{id:"spaceSettingsSidebar.integrationsTab.title",defaultMessage:"Integrations"},spaceConnectionsTab:{id:"spaceSettingsSidebar.spaceConnectionsTab.title",defaultMessage:"Connections"},auditLogTab:{id:"spaceSettingsSidebar.auditLogTab.title",defaultMessage:"Audit log"},notificationsAndSettings:{id:"spaceSettingsSidebar.notificationsAndSettings.title",defaultMessage:"My notifications & settings"},mySettings:{id:"spaceSettingsSidebar.mySettings.title",defaultMessage:"My settings"},myNotifications:{id:"spaceSettingsSidebar.myNotifications.title",defaultMessage:"My notifications"},analyticsTab:{id:"spaceSettingsSidebar.analyticsTab.title",defaultMessage:"Analytics"},importTab:{id:"spaceSettingsSidebar.importsTab.title",defaultMessage:"Import"},verifiedPagesTab:{id:"spaceSettingsSidebar.verifiedPagesTab.title",defaultMessage:"Verified pages"},requestsTab:{id:"spaceSettingsSidebar.requestsTab.title",defaultMessage:"Requests"},experimentsTab:{id:"spaceSettingsSidebar.experimentsTab.title",defaultMessage:"Experiments"},performanceToolbarTab:{id:"spaceSettingsSidebar.performanceToolbarTab.title",defaultMessage:"Performance Toolbar"},userSimilarityScoresTab:{id:"spaceSettingsSidebar.userSimilarityScoresTab.title",defaultMessage:"User Similarity Scores"},collectionsDebugTab:{id:"spaceSettingsSidebar.collectionsDebug.title",defaultMessage:"Collections"}}),ne={profile:()=>L(),notifications_and_settings:()=>(0,V().m)(),user_settings:()=>(0,V().m)(),notifications:()=>(0,n(844409).t)(),connected_apps:()=>p(),language_and_region:()=>C(),offline:()=>l(),settings:()=>(0,n(809461).w)(),teams:()=>z(),members:()=>B(),plans:()=>{const e=Y().subscriptionDataStoreInstance.state;return e&&G().YK(e)?R():c()},billing:()=>M(),subscription:()=>a(),requests:()=>(0,n(661556).Q)(),security:()=>k(),identity_provisioning:()=>v(),admin_content_search:()=>P(),integrations:()=>F(),audit_log:()=>H(),analytics:()=>E(),imports:()=>(0,n(934590).s)(),sites:()=>g(),custom_emoji:()=>(0,n(949558).emojiFaceIcon)(),experiments:()=>(0,n(47100).t)(),performance_toolbar:()=>T(),user_similarity_scores:()=>B(),collection_debug:()=>b(),offline_mode_debug:()=>l(),verified_pages:()=>h()},ie={profile:()=>`${q().Z.formatMessage(te.accountTab)}`,notifications_and_settings:()=>q().Z.formatMessage(te.notificationsAndSettings),user_settings:()=>q().Z.formatMessage(te.mySettings),notifications:()=>q().Z.formatMessage(te.myNotifications),connected_apps:()=>q().Z.formatMessage(te.userConnectionsTab),language_and_region:()=>q().Z.formatMessage(te.languageAndRegionTab),offline:()=>q().Z.formatMessage(te.offlineTab),settings:()=>q().Z.formatMessage(te.settingsTab),teams:()=>q().Z.formatMessage(te.teamsTab),members:e=>(0,W().F$)()||(0,W().wE)(e)?q().Z.formatMessage(te.peopleTab):q().Z.formatMessage(te.membersTab),plans:()=>function(){const e=Y().subscriptionDataStoreInstance.state;if(G().YK(e))return q().Z.formatMessage(te.explorePlansTab);return q().Z.formatMessage(te.upgradePlanTab)}(),billing:()=>q().Z.formatMessage(te.billingTab),subscription:()=>q().Z.formatMessage(te.subscriptionTab),requests:()=>q().Z.formatMessage(te.requestsTab),security:()=>q().Z.formatMessage(te.securityAndDataTab),identity_provisioning:()=>q().Z.formatMessage(te.identityProvisioningTab),admin_content_search:()=>q().Z.formatMessage(te.adminContentSearchTab),integrations:()=>q().Z.formatMessage(te.spaceConnectionsTab),audit_log:()=>q().Z.formatMessage(te.auditLogTab),analytics:()=>q().Z.formatMessage(te.analyticsTab),imports:()=>q().Z.formatMessage(te.importTab),sites:()=>q().Z.formatMessage(te.sitesTab),custom_emoji:()=>q().Z.formatMessage(te.customEmojiTab),verified_pages:()=>q().Z.formatMessage(te.verifiedPagesTab),experiments:()=>q().Z.formatMessage(te.experimentsTab),performance_toolbar:()=>q().Z.formatMessage(te.performanceToolbarTab),user_similarity_scores:()=>q().Z.formatMessage(te.userSimilarityScoresTab),collection_debug:()=>q().Z.formatMessage(te.collectionsDebugTab),offline_mode_debug:()=>q().Z.formatMessage(te.offlineModeDebugTab)},oe={profile:()=>null,notifications_and_settings:()=>null,user_settings:()=>null,notifications:()=>null,connected_apps:()=>null,language_and_region:()=>null,offline:()=>null,settings:()=>null,teams:()=>null,members:e=>(0,W().wE)(e)&&(0,o.jsx)(J,{}),plans:()=>null,billing:()=>null,subscription:()=>null,requests:()=>null,security:()=>null,identity_provisioning:()=>null,sites:()=>null,custom_emoji:()=>null,admin_content_search:()=>null,integrations:()=>null,audit_log:()=>null,analytics:()=>null,imports:()=>null,verified_pages:()=>null,experiments:()=>null,performance_toolbar:()=>null,user_similarity_scores:()=>null,collection_debug:()=>null,offline_mode_debug:()=>null};function se(e){switch(e){case"profile":case"notifications_and_settings":case"user_settings":case"notifications":case"connected_apps":case"language_and_region":case"offline":case"settings":case"members":case"plans":case"billing":case"subscription":case"security":case"identity_provisioning":case"admin_content_search":case"integrations":case"imports":case"teams":case"audit_log":case"analytics":case"sites":case"custom_emoji":case"verified_pages":case"requests":case"experiments":case"performance_toolbar":case"user_similarity_scores":case"collection_debug":case"offline_mode_debug":return e;default:return}}},251228:(e,t,n)=>{n.d(t,{G:()=>y});var i=n(667294),o=()=>n(219727),s=()=>n(142735),a=()=>n(926724),r=()=>n(331540),l=()=>n(998411),d=()=>n(801812),c=()=>n(605974),u=()=>n(788860),p=()=>n(824462),m=()=>n(125659),g=()=>n(793396),f=n(785893);const h=(0,u().vU)({cannotSetSprintToCurrentTooltip:{id:"SprintStatusPropertyMenu.cannotSetSprintToCurrentTooltip",defaultMessage:"Current sprint already exists"},cannotSetSprintToNextTooltip:{id:"SprintStatusPropertyMenu.cannotSetSprintToNextTooltip",defaultMessage:"Next sprint already exists"},cannotSetSprintToLastTooltip:{id:"SprintStatusPropertyMenu.cannotSetSprintToLastTooltip",defaultMessage:"Last sprint already exists"}});function y(e){const{blockPropertyValueOverlayStore:t}=e,n=(0,o().O7)(),y=(0,m().Y$)(),v=(0,s().Kw)(y.normalizedSchemaStore),x=function(e){let{sprintCollectionStore:t,environment:n,normalizedBlockSchema:i}=e;const[{value:o,status:s}]=(0,d().r5)((async()=>{var e;if(!t)return;const o=t.getSchema(),s=t.getFormat().app_config_uri;if(!s||s!==r().p$)return;const d=(0,c().Zv)(o,s).includes("last"),u=c().qB[s],m=u.current.reducer.get(i),g=u.next.reducer.get(i),f=u.last.reducer.get(i);if(!m||!g)return;const h={userId:n.currentUser.id,userTimeZone:(0,l().r)(),searchQuery:void 0,reducers:{[a().SF]:m,[a().YE]:g,...d&&f?{[a().Rw]:f}:{}},currentPageInRelatedCollection:void 0},y=null===(e=t.getParentBlockStore())||void 0===e?void 0:e.getCollectionViewStores()[0],v=t.getSpaceId();if(!y)return;const x=await p().callApi({eventName:"queryCollection",environment:n,data:{source:{type:"collection",id:t.id,spaceId:v},collectionView:{id:y.id,spaceId:v},loader:h},tracking:{src:"sprint_status_overlay_check"}});if("success"!==x.type)return;const b=x.data.result.reducerResults[a().SF],S=x.data.result.reducerResults[a().YE];if("results"!==b.type||"results"!==S.type)return;const M=b.blockIds.length>0,j=S.blockIds.length>0;if(!d)return{hasCurrentSprint:M,hasNextSprint:j,hasLastSprint:!1};const C=x.data.result.reducerResults[a().Rw];if("results"!==C.type)return;return{hasCurrentSprint:M,hasNextSprint:j,hasLastSprint:C.blockIds.length>0}}),[n,i,t]);if("resolved"!==s||!o)return;return o}({sprintCollectionStore:(0,s().VK)((()=>{const e=t.state;if(e.isOpen)return e.store.getAssociatedCollectionStore()}),[t]),environment:n,normalizedBlockSchema:v}),b=(0,u().YB)(),S=(0,i.useCallback)((e=>void 0===x&&[a().YE,a().SF,a().Rw].includes(e)?{disabled:!0}:e===a().YE&&null!=x&&x.hasNextSprint?{disabled:!0,disableReasonMessage:b.formatMessage(h.cannotSetSprintToNextTooltip)}:e===a().SF&&null!=x&&x.hasCurrentSprint?{disabled:!0,disableReasonMessage:b.formatMessage(h.cannotSetSprintToCurrentTooltip)}:e===a().Rw&&null!=x&&x.hasLastSprint?{disabled:!0,disableReasonMessage:b.formatMessage(h.cannotSetSprintToLastTooltip)}:{disabled:!1}),[x,b]);return(0,f.jsx)(g().x,{...e,shouldDisableOption:S})}},793396:(e,t,n)=>{n.d(t,{x:()=>A});n(267602),n(653476),n(470928),n(241792);var i=n.n(n(443261)),o=n(667294),s=()=>n(219727),a=()=>n(142735),r=()=>n(846550),l=()=>n(532850),d=()=>n(38883),c=()=>n(788860),u=()=>n(513670),p=()=>n(696459),m=()=>n(139224),g=()=>n(932753),f=()=>n(337897),h=()=>n(514),y=()=>n(352230),v=()=>n(164079),x=()=>n(209078),b=()=>n(998901),S=()=>n(759005),M=()=>n(827973),j=()=>n(198829),C=()=>n(255577),w=()=>n(470386),k=()=>n(388284),_=()=>n(654133),T=()=>n(246471),I=()=>n(122671),P=n(785893);function A(e){var t;const{propertySchema:n,blockPropertyValueOverlayStore:A,onChange:R}=e,{device:Z}=(0,s().O7)(),[B,D]=o.useState(e.initialValue??""),[L,O]=o.useState(""),H=(0,r().Fg)(),V=(0,c().YB)(),U=(0,a().VK)((()=>{const e=A.state;if(e.isOpen)return e.collectionContextStore}),[A]),E=(0,a().VK)((()=>(null==U?void 0:U.permissionScopesStore.state.canConfigureCollection)&&"collectionPage"!==(null==U?void 0:U.contextType)),[U]),N=(0,a().VK)((()=>{const e=A.state;return!!e.isOpen&&(0,f().aJ)({store:e.store,additionalStores:e.additionalStores,collectionContextStore:e.collectionContextStore})}),[A]),F=N?[]:n.options??[],K=(0,l().i7)(F,B),z=n.groups??[],W=K&&z.find((e=>{var t;return null===(t=e.optionIds)||void 0===t?void 0:t.includes(K.id)})),q=K?[(0,P.jsx)(T().F,{value:K.value,color:K.color,groupColor:null==W?void 0:W.color,isSingle:!1,format:Z.isMobile?d().lo.Large:d().lo.Medium,onClickRemove:()=>{D(""),R(void 0,void 0)},showRemoveButton:void 0===n.defaultOption,shouldShrink:!0,showEllipsis:!0,tooltipPlacement:b().Placement.Left,hideTooltip:!(null===(t=K.description)||void 0===t||!t.length)},"status")]:[],G=N?null:(0,P.jsx)(I().ZP,{focus:!Z.isMobile||void 0,focusAfterAnimation:!0,format:I().UR.Select,tokens:q,placeholder:V.formatMessage({id:"database.selectPropertyEditMenu.searchStatusPlaceholder",defaultMessage:"Search for an option"}),onRemoveLastToken:u().ZT,value:L,disabled:e.disabled,hideInput:e.disabled,onChange:e=>{O(e.target.value)},dontShowBorderBottom:Z.isAndroid});let Y;if(Y=Z.isMobile?{menuType:y().o.Modal,title:n.name,right:(0,P.jsx)(w().DoneMenuText,{}),onClickRight:e.onDismiss,header:G}:{menuType:y().o.Popup,header:G,tokenInputHeader:!0},e.disabled)return(0,P.jsx)(j().Z,{...Y});let $=F;if(""!==L){const e=i().filter(L,F.map((e=>e.value))).map((e=>e.original));$=F.filter((t=>e.includes(t.value)))}const X=z.map((e=>{const t=$.filter((t=>{var n;return null===(n=e.optionIds)||void 0===n?void 0:n.includes(t.id)}));if(0!==t.length)return{group:e,groupOptions:t}})).filter(p().$K),Q=X.length>1,J=N?[{items:z.map((t=>({key:t.name,render:e=>(0,P.jsx)(M().Z,{...e,disabledFeedback:!0,focused:e.focused,title:(0,P.jsx)(S().r_,{style:{fontWeight:500,marginTop:2},group:t,showIcon:!0,showColor:!0})}),action:()=>{e.onChange(void 0,t.name)}}))),key:"all-groups",render:e=>(0,P.jsx)(k().Z,{...e})}]:X.map(((t,n)=>{let{group:i,groupOptions:o}=t;return{items:o.map((t=>{const n=e.shouldDisableOption?e.shouldDisableOption(t.id):{disabled:!1};return{key:t.value,render:e=>{var o;return(0,P.jsx)(_().Z,{disableTooltip:n.disabled&&!(null!==(o=t.description)&&void 0!==o&&o.length),placement:b().Placement.Left,renderTooltip:e=>n.disabled?n.disableReasonMessage:(0,P.jsxs)("div",{...e,style:h().F6,children:[(0,P.jsx)("div",{children:t.value}),(0,P.jsx)("div",{style:{color:H.mediumInvertedTextColor},children:t.description})]}),render:o=>{var s;return(0,P.jsx)(M().Z,{...(0,v().Z)(o,e),disabled:n.disabled,disabledFeedback:!0,focused:e.focused,title:(0,P.jsx)(T().F,{...o,value:t.value,color:t.color,hideTooltip:!(null===(s=t.description)||void 0===s||!s.length),tooltipPlacement:b().Placement.Left,groupColor:i.color,showRemoveButton:!1,isSingle:!0,format:Z.isMobile?d().lo.Large:d().lo.Medium}),isTokenTitle:!0})}})},action:()=>{e.onChange(t.value,void 0)}}})),key:`group-${n}`,render:e=>(0,P.jsx)(k().Z,{...e,topBorder:e.index>0,title:Q&&(0,P.jsx)(S().r_,{group:i,showColor:!1,style:{fontSize:12}})})}})),ee=U&&E?{items:[{key:"edit property",render:e=>(0,P.jsx)(M().Z,{...e,title:(0,P.jsx)(c()._H,{defaultMessage:"Edit property",id:"database.tableHeaderCell.editProperty"}),icon:(0,x().W)({width:14})}),action:()=>{const t=U.settingsStore;U.collectionStore()&&(e.onDismiss(),g().n1({collectionContextStore:U}),m().r$({collectionContextStore:U,collectionSettingsStore:t}),m().H4({collectionSettingsStore:t,item:{type:"property",formatKey:U.getPropertyFormatKey(),property:e.property}}))}}],key:"edit-property",render:e=>(0,P.jsx)(k().Z,{...e,topBorder:e.index>0})}:void 0;return(0,P.jsx)(j().Z,{...Y,children:(0,P.jsx)(C().Z,{type:C().i.Vertical,initialFocus:L.length>0?0:void 0,sections:u().oA([...J,ee]),onAccept:(t,n,i)=>{e.onAccept(i)}})})}},995744:(e,t,n)=>{n.r(t),n.d(t,{default:()=>M});n(267602),n(258429);var i=n(667294),o=()=>n(219727),s=()=>n(142735),a=()=>n(846550),r=()=>n(836273),l=()=>n(788860),d=()=>n(568017),c=()=>n(707513),u=()=>n(824462),p=()=>n(718959),m=()=>n(653457),g=()=>n(838266),f=()=>n(737244),h=()=>n(291198),y=()=>n(906651),v=()=>n(765513),x=n(785893);const b={padding:"24px 36px 24px",minWidth:300,maxWidth:400},S=n(263184).default.createClass(void 0,{name:"PromoErrorStore"});const M=function(){const e=(0,s().qz)(void 0,S),t=(0,s().qz)(void 0,n(718798).Z),i=(0,s().VK)((()=>f().Z.state.open),[]);return(0,x.jsx)(n(708518).Z,{open:i,innerStyle:b,preventHideChildrenWhileOpening:!0,render:()=>(0,x.jsx)(T,{promoCodeStore:t,promoErrorStore:e}),onDismiss:C})};function j(){const e=(0,a().Fg)();return(0,x.jsxs)("div",{style:{display:"flex",alignItems:"center",color:e.lightTextColor,borderTop:`1px solid ${e.regularDividerColor}`,paddingTop:14},children:[(0,m().m)({width:14,marginTop:1,marginRight:6,fill:e.lightIconColor})," ",(0,x.jsx)("div",{children:(0,x.jsx)(l()._H,{defaultMessage:"Have questions about this? <inlinelink>More info & FAQs</inlinelink>.",id:"studentNotEligibleModal.contactUsSection.message",values:{inlinelink:e=>(0,x.jsx)(v().Z,{href:"https://www.notion.so/Notion-for-students-teachers-adc631df15ee4ab9a7a33dd50f4c16fe",external:!0,children:e})}})})]})}function C(){f().Z.setState({open:!1})}function w(){C(),g().default.setState({open:!0,openedFrom:"student_not_eligible_modal",currentTab:"profile",defaultSubtab:void 0,highlightedSetting:void 0})}function k(){const e=(0,a().Fg)(),t=(0,o().O7)(),n=(0,s().VK)((()=>(0,p().B7)(t)),[t]),i=(0,s().VK)((()=>null==n?void 0:n.getEmail()),[n]);return(0,x.jsxs)("div",{style:{display:"flex",marginTop:16},children:[(0,x.jsx)("div",{style:{width:18,flexShrink:0,color:e.mediumTextColor},children:(0,x.jsx)(l()._H,{defaultMessage:"1.",id:"studentNotEligibleModal.numberedList.firstItem"})}),(0,x.jsxs)("div",{style:{flexGrow:1},children:[(0,x.jsx)("div",{style:{color:e.mediumTextColor},children:(0,x.jsx)(l()._H,{defaultMessage:"Your current email is:",id:"studentNotEligibleModal.numberedList.changeEmailItem.message"})}),(0,x.jsx)("div",{style:{fontWeight:c().Ue.medium,marginTop:0},children:i}),(0,x.jsx)("div",{style:{color:e.mediumTextColor,marginTop:4},children:(0,x.jsx)(l()._H,{defaultMessage:"Thousands of university, college, and post-secondary school domains are already eligible, not just .edu emails!",id:"studentNotEligibleModal.numberedList.changeEmailItem.message2"})}),(0,x.jsx)(y().Z,{style:{marginTop:12},onClick:w,isLarge:!0,children:(0,x.jsx)(l()._H,{defaultMessage:"Change email",id:"studentNotEligibleModal.numberedList.changeEmailItem.button.label"})})]})]})}function _(e){let{promoCodeStore:t,promoErrorStore:n}=e;const r=(0,l().YB)(),c=(0,a().Fg)(),p=(0,o().O7)(),m=(0,i.useCallback)((()=>async function(e,t,n,i){const o=n.state.inputValue;if(o){const s=await u().callApi({eventName:"getPromoCode",environment:e,data:{code:o}});"failed"!==s.type&&s.data.promo?f().Z.state.open&&(await f().Z.state.handlePromoCode(n.state.inputValue),C()):i.setState(t.formatMessage({defaultMessage:"Promo code {code} does not exist",id:"studentNotEligibleModal.numberedList.item2.promocode.errorMessage"},{code:o}))}}(p,r,t,n)),[p,r,t,n]),g=(0,i.useCallback)((e=>function(e,t,n){t.setState({...t.state,inputValue:e.target.value.toUpperCase()}),n.setState(void 0)}(e,t,n)),[t,n]),v=(0,s().VK)((()=>t.state.inputValue),[t]),b=(0,s().Kw)(n),S=r.formatMessage({defaultMessage:"Enter code…",id:"studentNotEligibleModal.numberedList.item2.promocodePlaceholder"});return(0,x.jsxs)("div",{style:{display:"flex",marginTop:16},children:[(0,x.jsx)("div",{style:{width:18,flexShrink:0,color:c.mediumTextColor},children:(0,x.jsx)(l()._H,{defaultMessage:"2.",id:"studentNotEligibleModal.numberedList.secondItem"})}),(0,x.jsxs)("div",{style:{flexGrow:1},children:[(0,x.jsx)("div",{style:{color:c.mediumTextColor},children:(0,x.jsx)(l()._H,{defaultMessage:"Have a student promo code?",id:"studentNotEligibleModal.numberedList.promoCodeItem.message"})}),(0,x.jsxs)("div",{style:{display:"flex",marginTop:12},children:[(0,x.jsx)(h().Z,{style:{marginRight:8,height:32},value:v,onChange:g,onSubmit:m,placeholder:S}),(0,x.jsx)(y().Z,{onClick:m,disabled:!v,isLarge:!0,children:(0,x.jsx)(l()._H,{defaultMessage:"Submit",id:"studentNotEligibleModal.numberedList.promoCodeItem.submitButton"})})]}),(0,x.jsx)("div",{style:{color:d().ZP.red,fontSize:12,marginTop:4,marginLeft:8,height:20},children:b})]})]})}function T(e){let{promoCodeStore:t,promoErrorStore:n}=e;return(0,x.jsxs)("div",{style:{fontSize:14},children:[(0,x.jsx)("div",{children:(0,x.jsx)(l()._H,{defaultMessage:"<p>Unfortunately you are not eligible for a free Education plan if you use this email address.</p><p>K-12 students, K-12 educators, and personal email addresses such as Gmail and Outlook are not eligible to receive the <pricinglink>Education Plan</pricinglink> for free, but anyone is welcome to use the <pricinglink>Free Plan</pricinglink> for free with unlimited storage.</p>",id:"studentNotEligibleModal.header",values:{br:(0,x.jsx)("br",{}),p:e=>(0,x.jsx)("p",{style:{marginTop:0,marginBottom:8},children:1===e.length?e[0]:i.Children.toArray(e)}),pricinglink:e=>(0,x.jsx)(v().Z,{external:!0,href:r().AR.pricing,children:e})}})}),(0,x.jsx)(k,{}),(0,x.jsx)(_,{promoCodeStore:t,promoErrorStore:n}),(0,x.jsx)(j,{})]})}},69255:(e,t,n)=>{n.d(t,{HB:()=>d,K0:()=>p,b6:()=>h,dQ:()=>c,pd:()=>m,re:()=>u,ss:()=>f});n(670560),n(267602),n(241792),n(731107);var i=()=>n(788860),o=()=>n(279830),s=()=>n(269299),a=()=>n(527278),r=()=>n(821227),l=()=>n(838266);const d=(0,i().vU)({emptyWithIcon:{defaultMessage:"Empty page with icon",id:"templatePickerHelpers.basicTemplateItems.emptyWithIcon"},empty:{defaultMessage:"Empty page",id:"templatePickerHelpers.basicTemplateItems.empty"},templates:{defaultMessage:"Templates",id:"templatePickerHelpers.basicTemplateItems.templates"},import:{defaultMessage:"Import",id:"templatePickerHelpers.basicTemplateItems.import"}}),c={name:a().Z.formatMessage(d.empty),iconFn:n(292832).a,type:"empty_page",shouldShow:()=>!0,onClick:(e,t)=>{s().createAndCommit({userAction:"templatePickerHelpers.emptyTemplateItems",environment:e,canUndo:!0,perform:n=>{o().e({environment:e,store:t,transaction:n})}})}},u={name:a().Z.formatMessage(d.templates),type:"templates",iconFn:e=>(0,n(348256).i)(e),shouldShow:()=>!0,onClick:e=>{(0,r().C)({environment:e})}},p={name:a().Z.formatMessage(d.templates),type:"templates",iconFn:e=>(0,n(80159).w)(e),shouldShow:()=>!0,onClick:e=>{(0,r().C)({environment:e})}},m={name:a().Z.formatMessage(d.import),type:"import",iconFn:n(710125).l,shouldShow:()=>!0,onClick:(e,t)=>{const i=n(956057).Il();n(623521).Z.setState({flowId:i}),n(286310).Sy(e,{from:"new_page",flowId:i}),l().default.setState({...l().default.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:void 0})}},g=(0,i().vU)({pageWithIcon:{defaultMessage:"Page with icon",id:"templatePickerHelpers.mobileBasicTemplateItems.pageWithIcon"},emptyPage:{defaultMessage:"Empty page",id:"templatePickerHelpers.mobileBasicTemplateItems.emptyPage"}}),f=[{name:a().Z.formatMessage(g.pageWithIcon),type:"page_with_icon",shouldShow:()=>!0,onClick:(e,t)=>{s().createAndCommit({userAction:"templatePickerHelpers.mobileBasicTemplateItems",environment:e,canUndo:!0,perform:n=>{o().T({environment:e,store:t,transaction:n})}})}},{name:a().Z.formatMessage(g.emptyPage),type:"empty_page",shouldShow:()=>!0,onClick:(e,t)=>{s().createAndCommit({userAction:"templatePickerHelpers.mobileBasicTemplateItems",environment:e,canUndo:!0,perform:n=>{o().e({environment:e,store:t,transaction:n})}})}}];function h(e,t){const n=new Map(e.map((e=>[e.type,e])));return t.reduce(((e,t)=>(n.has(t)&&e.push(n.get(t)),e)),[])}},98693:(e,t,n)=>{n.d(t,{Z:()=>v});var i=n(667294),o=()=>n(219727),s=()=>n(142735),a=()=>n(846550),r=()=>n(788860),l=()=>n(707513),d=()=>n(348141),c=()=>n(876822);function u(){const[e,t]=(0,i.useState)(!1),a=(0,o().O7)(),r=(0,s().VK)((()=>c().default.state.currentUserSettingsStore),[]);return[(0,s().VK)((()=>{const t=n(749826).default.checkGate({gateName:"dictation_new_page_nux"}),i=null==r?void 0:r.getSettings(),o=Boolean(null==i?void 0:i.dismissed_dictation_new_page_nux);return t&&!o&&!e}),[r,e]),(0,i.useCallback)((()=>{r&&(t(!0),d().B1({environment:a,userSettingsStore:r,dismissed:!0}))}),[a,r,t])]}(0,n(947115).exposeDebugValue)("resetDictationTooltip",(e=>{const t=c().default.state.currentUserSettingsStore;t&&d().B1({environment:e,userSettingsStore:t,dismissed:!1})}));var p=n(785893);const m=(0,n(827282).IU)("repeatDisabled",{viewBox:"0 0 16 14",svg:(0,p.jsxs)("svg",{children:[(0,p.jsx)("path",{d:"M1.11621 8.32422C0.888346 8.32422 0.69694 8.24674 0.541992 8.0918C0.391602 7.93685 0.316406 7.74772 0.316406 7.52441V6.77246C0.316406 6.08431 0.469076 5.49186 0.774414 4.99512C1.08431 4.49837 1.51953 4.11784 2.08008 3.85352C2.64518 3.58464 3.31283 3.4502 4.08301 3.4502H9.23047V1.95312C9.23047 1.76628 9.28288 1.62272 9.3877 1.52246C9.49251 1.41764 9.63607 1.36523 9.81836 1.36523C9.90495 1.36523 9.9847 1.37891 10.0576 1.40625C10.1305 1.43359 10.1966 1.47233 10.2559 1.52246L13.0107 3.83301C13.1566 3.9515 13.2272 4.09277 13.2227 4.25684C13.2227 4.4209 13.152 4.56217 13.0107 4.68066L10.2559 6.99121C10.1966 7.03678 10.1305 7.07552 10.0576 7.10742C9.9847 7.13477 9.90495 7.14844 9.81836 7.14844C9.63607 7.14844 9.49251 7.09603 9.3877 6.99121C9.28288 6.88639 9.23047 6.74284 9.23047 6.56055V5.00195H3.98047C3.34245 5.00195 2.83659 5.17741 2.46289 5.52832C2.09375 5.87923 1.90918 6.35319 1.90918 6.9502V7.52441C1.90918 7.74772 1.83171 7.93685 1.67676 8.0918C1.52181 8.24674 1.33496 8.32422 1.11621 8.32422ZM14.8906 7.54492C15.1094 7.54492 15.2962 7.6224 15.4512 7.77734C15.6061 7.92773 15.6836 8.11686 15.6836 8.34473V9.09668C15.6836 9.78483 15.5286 10.3773 15.2188 10.874C14.9134 11.3708 14.4782 11.7536 13.9131 12.0225C13.348 12.2868 12.6803 12.4189 11.9102 12.4189H6.7627V13.9229C6.7627 14.1051 6.71029 14.2464 6.60547 14.3467C6.50521 14.4515 6.36393 14.5039 6.18164 14.5039C6.09505 14.5039 6.01302 14.4902 5.93555 14.4629C5.86263 14.4355 5.79655 14.3968 5.7373 14.3467L2.98242 12.0361C2.84115 11.9222 2.77051 11.7832 2.77051 11.6191C2.77051 11.4505 2.84115 11.307 2.98242 11.1885L5.7373 8.87793C5.79655 8.8278 5.86263 8.78906 5.93555 8.76172C6.01302 8.73438 6.09505 8.7207 6.18164 8.7207C6.36393 8.7207 6.50521 8.77311 6.60547 8.87793C6.71029 8.97819 6.7627 9.12174 6.7627 9.30859V10.8604H12.0127C12.6553 10.8604 13.1611 10.6872 13.5303 10.3408C13.904 9.98991 14.0908 9.51595 14.0908 8.91895V8.34473C14.0908 8.11686 14.166 7.92773 14.3164 7.77734C14.4714 7.6224 14.6628 7.54492 14.8906 7.54492Z",fill:"#C7C6C4"}),(0,p.jsx)("path",{d:"M4 2L12 14",stroke:"white",strokeWidth:"3",strokeLinecap:"round"}),(0,p.jsx)("path",{d:"M4 2L12 14",stroke:"#C7C6C4",strokeLinecap:"round"})]})});var g=()=>n(998901),f=()=>n(944993),h=()=>n(827973),y=()=>n(78078);const v=(0,i.forwardRef)((function(e,t){const{format:n,className:i,icon:o,title:s,isDefault:a,recurrence:r,recurrenceDisabled:l,right:d,focused:c,onClick:u,onMouseMove:m,onMouseEnter:g,onMouseLeave:f,locked:h,type:y}=e;return"collection-overlay"===n?(0,p.jsx)(b,{ref:t,className:i,icon:o,format:n,title:s,isDefault:a,recurrence:r,recurrenceDisabled:l,right:d,focused:c,onClick:u,onMouseMove:m,onMouseEnter:g,onMouseLeave:f,locked:h,type:y}):"phone-modal"===n?(0,p.jsx)(S,{ref:t,icon:o,format:n,title:s,isDefault:a,recurrence:r,focused:c,onClick:u}):"horizontal-new-page"===n?"dictation"===y?(0,p.jsx)(_,{ref:t,focused:c,onClick:u,onMouseMove:m,onMouseEnter:g,onMouseLeave:f,icon:o,title:s,type:y}):(0,p.jsx)(w,{ref:t,focused:c,onClick:u,onMouseMove:m,onMouseEnter:g,onMouseLeave:f,icon:o,title:s,type:y}):"horizontal-new-page-submenu"===n?(0,p.jsx)(k,{ref:t,focused:c,onClick:u,onMouseMove:m,onMouseEnter:g,onMouseLeave:f,icon:o,title:s}):(0,p.jsx)(j,{ref:t,focused:c,onClick:u,onMouseMove:m,onMouseEnter:g,onMouseLeave:f,icon:o,format:n,title:s,isDefault:a,recurrence:r,recurrenceDisabled:l,right:d})}));function x(e){let{format:t,title:i,isDefault:o,recurrenceDisabled:s}=e;const d=(0,a().Fg)();return"collection-overlay"!==t?(0,p.jsx)(p.Fragment,{children:i}):(0,p.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i,(0,p.jsxs)("span",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o&&(0,p.jsx)("span",{style:{fontSize:12,fontWeight:l().Ue.medium,color:d.mediumTextColor},children:(0,p.jsx)(r()._H,{defaultMessage:"DEFAULT",id:"database.templatePickerMenuItem.default"})}),s&&m({width:14,height:12.25,color:n(568017).ZP.lightIconColor,marginLeft:8})]})]})}const b=(0,i.forwardRef)((function(e,t){let{className:n,icon:i,format:s,title:a,isDefault:r,recurrence:l,recurrenceDisabled:d,right:c,focused:u,onClick:m,onMouseMove:g,onMouseEnter:f,onMouseLeave:y,locked:v,type:b}=e;const S=(0,o().O7)(),{device:M}=S;return(0,p.jsx)(h().Z,{ref:t,className:n,icon:i,title:(0,p.jsx)(x,{format:s,title:a,isDefault:r,recurrence:l,recurrenceDisabled:d}),right:c,focused:u,onClick:m,onMouseMove:g,onMouseEnter:f,onMouseLeave:y,showDragHandle:!M.isMobile&&!v,dragHandleDisabled:"empty_page"===b})})),S=(0,i.forwardRef)((function(e,t){let{icon:n,format:i,title:o,isDefault:s,recurrence:a,focused:r,onClick:l}=e;return(0,p.jsx)(h().Z,{ref:t,icon:n?(0,p.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24},children:n}):null,title:(0,p.jsx)(x,{format:i,title:o,isDefault:s,recurrence:a}),focused:r,onClick:l,showDragHandle:!1})}));function M(e,t,i){const{device:o}=e;return{...n(494488).ZD,display:"flex",alignItems:"center",flexGrow:1,height:o.isMobile?36:32,fontSize:16,borderRadius:4,paddingLeft:8,marginBottom:2,color:i?t.mediumTextColor:t.lightTextColor}}const j=(0,i.forwardRef)((function(e,t){let{focused:i,onClick:r,onMouseMove:l,onMouseEnter:d,onMouseLeave:c,icon:u,format:m,title:g,isDefault:f,recurrence:h,recurrenceDisabled:y,right:v}=e;const b=(0,a().Fg)(),S=(0,o().O7)(),j=(0,n(657320).l)(),C=(0,s().VK)((()=>{const e=null==j?void 0:j.publicEditModeStore.state;return(0,n(982855).GD)(e)}),[j]);return(0,p.jsxs)(n(154186).Z,{style:M(S,b,C),hovered:i,onClick:r,onMouseMove:l,onMouseEnter:d,onMouseLeave:c,hoveredStyle:{background:b.buttonHoveredBackground,color:b.regularTextColor},pressedStyle:{background:b.buttonPressedBackground},children:[(0,p.jsx)("div",{style:{display:"flex",alignItems:"center",width:24,height:24,marginRight:10},children:u}),(0,p.jsx)(x,{format:m,title:g,isDefault:f,recurrence:h,recurrenceDisabled:y}),v&&(0,p.jsx)("div",{style:{marginLeft:"auto",marginRight:4},children:v})]})})),C=(0,r().vU)({horizontalNewPageDictationItemTooltip:{id:"TemplatePickerMenuItem.dictationCallout.tooltip",defaultMessage:"Use your voice to write"},dictationCalloutHeader:{id:"TemplatePickerMenuItem.dictationCallout.Header",defaultMessage:"Use your voice to write with high-quality speech-to-text"}}),w=(0,i.forwardRef)((function(e,t){let{focused:n,onClick:i,onMouseMove:r,onMouseEnter:d,onMouseLeave:c,icon:u,title:m,type:g,tooltipEvents:f}=e;const h=(0,o().O7)(),v=(0,a().yK)((e=>({item:{display:"flex",alignItems:"center",padding:"6px 14px 6px 10px",background:e.assistantTintedActionButtonBackground,borderRadius:100,fontSize:13,fontWeight:l().Ue.medium},moreItem:{width:32,height:32,padding:0,justifyContent:"center"},itemFocused:{background:e.tint.regular},itemFilled:{borderColor:e.tint.regular,background:e.assistantTintedActionButtonBackground},itemFilledAndFocused:{background:e.tint.regular}})),[]),x=(0,s().VK)((()=>!h.device.isMobile&&("ai"===g||"dictation"===g)),[h.device.isMobile,g]);return(0,p.jsx)("div",{ref:t,onClick:i,onMouseMove:r,onMouseEnter:d,onMouseLeave:c,...f||{},style:{...v.item,..."more"===g?v.moreItem:{},...x?v.itemFilled:{},...n?v.itemFocused:{},...x&&n?v.itemFilledAndFocused:{}},children:(0,p.jsxs)(y().X2,{gap:4,alignItems:"center",children:[u,m]})})})),k=(0,i.forwardRef)((function(e,t){let{focused:n,onClick:i,onMouseMove:o,onMouseEnter:s,onMouseLeave:r,icon:l,title:d}=e;const c=(0,a().yK)((e=>({item:{display:"flex",alignItems:"center",padding:"4px 10px 4px 8px"},itemFocused:{background:e.tint.regular}})),[]);return(0,p.jsx)("div",{ref:t,onClick:i,onMouseMove:o,onMouseEnter:s,onMouseLeave:r,style:{...c.item,...n?c.itemFocused:{}},children:(0,p.jsxs)(y().X2,{gap:8,alignItems:"center",children:[l,d]})})})),_=(0,i.forwardRef)((function(e,t){const o=(0,i.useRef)(null),[s,l]=u(),d=(0,a().yK)((e=>({tooltipContainer:{display:"flex",flexDirection:"row",gap:"6px",padding:"0px 0",alignItems:"center",marginLeft:"-4px"},badge:{background:e.accentColors.translucentGray[300],color:e.mediumInvertedTextColor,marginLeft:0,width:"fit-content"}})),[]);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(n(577741).g,{shouldShow:s,calloutId:"dictation_new_page_origin_element_tooltip",children:(0,p.jsx)(n(905263).U,{style:{width:200},pointerLength:25,pointerPosition:"50%",origin:o,placementToOrigin:"top",alignmentToOrigin:g().Alignment.Center,header:(0,p.jsx)(f().Z,{style:d.badge}),content:(0,p.jsx)(r()._H,{...C.dictationCalloutHeader}),shouldDismissUponOutsideClick:!0,onCloseClick:l})}),(0,p.jsx)(n(654133).Z,{disableTooltip:s,renderTooltip:()=>(0,p.jsxs)("div",{style:d.tooltipContainer,children:[(0,p.jsx)(f().Z,{style:d.badge}),(0,p.jsx)(r()._H,{...C.horizontalNewPageDictationItemTooltip})]}),originGap:6,placement:g().Placement.Top,render:n=>(0,p.jsx)("div",{ref:o,children:(0,p.jsx)(w,{...e,ref:t,tooltipEvents:n})})})]})}))},54076:(e,t,n)=>{n.d(t,{B:()=>a});n(241792),n(667294);var i=()=>n(846550),o=()=>n(668001),s=n(785893);function a(e){let t=Math.floor(e.areaHeight/124);0===t&&(t=1);const n=(0,i().yK)((e=>({skeletonRect:{height:8,borderRadius:4,margin:10,backgroundColor:e.lightDividerColor},skeletonCircle:{display:"flex",width:28,height:28,marginRight:8,backgroundColor:e.lightDividerColor,borderRadius:20},skeletonSection:{display:"flex",width:"100%",margin:20,flexDirection:"row"}})),[8,10,20]),a=[...Array(t)].map(((e,t)=>(0,s.jsxs)("div",{style:n.skeletonSection,children:[(0,s.jsx)(o().Z,{style:n.skeletonCircle}),(0,s.jsxs)("div",{style:{width:"80%"},children:[(0,s.jsx)(o().Z,{style:{width:"80%",...n.skeletonRect,marginTop:0}}),(0,s.jsx)(o().Z,{style:{width:"50%",...n.skeletonRect}}),(0,s.jsx)(o().Z,{style:{width:"60%",...n.skeletonRect}}),(0,s.jsx)(o().Z,{style:{width:"50%",...n.skeletonRect}})]})]},t)));return(0,s.jsx)("div",{children:a})}},255453:(e,t,n)=>{n.d(t,{W:()=>s,Z:()=>r});n(267602),n(749411);var i=n(667294),o=n(785893);const s={"en-US":"en","ja-JP":"ja","ko-KR":"ko","fr-FR":"fr","de-DE":"de","pt-BR":"pt-BR","es-ES":"es-ES"};function a(e){return e.src?(0,o.jsx)("img",{style:e.style,src:e.src}):null}const r=i.forwardRef((function(e,t){const s=(0,n(846550).Fg)(),r=i.useRef(e);r.current=e,i.useEffect((()=>{const t=document.createElement("script");t.src="https://player.vimeo.com/api/player.js",document.body.appendChild(t);const n=window.Vimeo;if(!n)return()=>{};const i=document.getElementById(e.src),o=new n.Player(i);return o?(o.on("play",(e=>{var t,n;null===(t=(n=r.current).onPlay)||void 0===t||t.call(n,e)})),o.on("pause",(e=>{var t,n;null===(t=(n=r.current).onPause)||void 0===t||t.call(n,e)})),o.on("ended",(e=>{var t,n;null===(t=(n=r.current).onEnd)||void 0===t||t.call(n,e)})),()=>{o.off("play"),o.off("pause"),o.off("ended")}):()=>{}}),[e.src,r.current.src]);const l=function(e,t){const i=(0,n(696459).qP)(t).flatMap((e=>{let[t,n]=e;return`${t}=${n}`})).join("&");return`${e}&${i}`}(r.current.src,{texttrack:r.current.defaultTextTrack,playsinline:!1,...r.current.options}),d={position:"absolute",top:0,left:0,width:"100%",height:"100%",borderStyle:"solid",borderColor:s.tableDividerColor,borderWidth:"0 0 1px 0"};return(0,o.jsxs)(n(728048).Z,{ratio:r.current.aspectRatioOverride??9/16,children:[(0,o.jsx)(a,{style:d,src:r.current.preloadThumbnailSrc}),(0,o.jsx)("iframe",{ref:t,id:r.current.src,className:r.current.className,allowFullScreen:!0,src:l,style:{...d,...r.current.style}})]})}))},260599:(e,t,n)=>{n.d(t,{B:()=>r});var i=()=>n(696459),o=()=>n(308186),s=()=>n(443269),a=()=>n(527278);async function r(e){let{onRequest:t,onSuccess:n}=e;const r=await t();switch(r.type){case"success":n&&await n(r);break;case"failed":o().UW((0,s().wf)(a().Z.getIntl(),r));break;default:(0,i().t1)(r)}}},454598:(e,t,n)=>{n.d(t,{u:()=>l});var i=()=>n(219727),o=()=>n(801812),s=()=>n(696459),a=()=>n(824462);const r={};function l(e){let{spaceId:t}=e;const n=(0,i().O7)(),[{status:l,error:d,value:c}]=(0,o().r5)((async()=>{if(!t)return{overrides:{},organizationInfo:void 0,isOrganizationOwner:!1};const e=await a().callApi({eventName:"getOrganizationSettingsOverrides",environment:n,data:{spaceId:t}});if("success"===e.type)return e.data;if("failed"===e.type)throw e.error;return(0,s().t1)(e)}),[n,t]);return{organizationOverrides:(null==c?void 0:c.overrides)??r,organizationInfo:null==c?void 0:c.organizationInfo,isOrganizationOwner:null==c?void 0:c.isOrganizationOwner,loading:"pending"===l||"idle"===l,error:d}}},189265:(e,t,n)=>{n.d(t,{Z:()=>l});n(667294);var i=()=>n(846550),o=()=>n(788860),s=()=>n(255577),a=()=>n(388284),r=n(785893);const l=function(e){const{importListItems:t}=e,l=(0,n(142735).qz)(void 0,n(692304).Z),d=(0,i().yK)((e=>({InviteDropdownMenu:{background:e.cardContentBackground,width:265,borderRadius:8},helpIcon:{width:14,height:14,fill:e.icon.secondary},helpSection:{color:e.text.secondary,fontSize:12,padding:"0 8px",width:"100%"}})),[]),c={key:"all_import_sections",render:e=>(0,r.jsx)(a().Z,{...e,title:(0,r.jsx)(o()._H,{id:"spacePermissionsSettings.inviteLinkRefreshModal.inviteDropdownMenu.title",defaultMessage:"Import from"})}),items:t},u={key:"help_section",render:e=>(0,r.jsx)(a().Z,{...e,topBorder:!0}),items:[{key:"help_section",render:e=>p,action:()=>{}}]},p=(0,r.jsx)(n(108714).Z,{style:{display:"flex",padding:"0 4px"},className:"notion-print-ignore",href:(0,n(148126).UY)("guides.publicAPI"),external:!0,children:(0,r.jsx)(n(92175).Z,{icon:n(653457).m,iconStyle:d.helpIcon,style:d.helpSection,children:(0,r.jsx)(o()._H,{id:"spacePermissionsSettings.inviteLinkRefreshModal.inviteDropdownMenu.learnMore",defaultMessage:"Learn more"})})});return(0,r.jsx)(n(198829).Z,{menuType:n(352230).o.Popup,children:(0,r.jsx)(s().Z,{type:s().i.Vertical,store:l,initialFocus:void 0,disableInitialScroll:!0,disableCommandEnter:!0,sections:[c,u],style:d.InviteDropdownMenu})})}},218835:(e,t,n)=>{n.d(t,{Mu:()=>b,O4:()=>S,bn:()=>M,oE:()=>v,tA:()=>x});n(267602),n(653476),n(241792),n(228244);var i=n(667294),o=()=>n(219727),s=()=>n(142735),a=()=>n(801812),r=()=>n(989478),l=()=>n(703976),d=()=>n(513670),c=()=>n(326966),u=()=>n(509417),p=()=>n(824462),m=()=>n(269299),g=()=>n(286338),f=()=>n(613119),h=()=>n(876822),y=()=>n(826955);function v(e){let{spaceStore:t,requestType:n}=e;const i=x({spaceStore:t}),r=(0,o().O7)(),[{value:l=[]}]=(0,a().r5)((async()=>{if(!i)return;const e=await p().callApi({eventName:"getAccessRequests",environment:r,data:{parentTable:"space",parentId:t.id,size:100,status:"pending"}});if("failed"===e.type)throw e.error;const n=e.data.accessRequestIds;return u().Vy(r,t,n)}),[t,r,i]),c=(0,s().VK)((()=>l.filter((e=>"pending"===e.accessRequest.status))),[l]),m=(0,f().E)({spaceStore:t,requests:c}),g=(0,s().VK)((()=>(0,d().$R)(c,m??[]).filter((e=>{const[t,i]=e;return"member"===n&&"space_membership_request"===i||("guest"===n&&"guest_invite_request"===i||"member_or_guest"===n&&("guest_invite_request"===i||"space_membership_request"===i))})).map((e=>{let[t]=e;return t}))),[n,m,c]);return(0,d().oA)(g)}function x(e){let{spaceStore:t}=e;return(0,s().VK)((()=>t.canEditMembership()&&(0,g().p1)()),[t])}function b(e){let{spaceStore:t,guests:n,internalDomains:i}=e;return(0,s().VK)((()=>{const e=n.map((e=>y().U6.createChildStore(t,{table:r().KJ,id:e.userId}).getModel())).some((e=>(0,l().dr)(e,i)));return t.canEditMembership()&&e&&"enterprise"!==t.getSubscriptionTier()}),[n,i,t])}function S(e){let{requestType:t,spaceStore:n}=e;const i=v({spaceStore:n,requestType:t});return(0,s().VK)((()=>{const{currentSpaceViewStore:e}=h().default.state;if(e)return i.filter((n=>{const i=function(e){var t,n;let{requestType:i,currentSpaceViewStore:o}=e;const s=Date.now()-10*c()._I,a="member"===i?null===(t=o.getSettings())||void 0===t?void 0:t.last_opened_member_request_tab:null===(n=o.getSettings())||void 0===n?void 0:n.last_opened_guest_request_tab;return a??s}({requestType:t,currentSpaceViewStore:e});return i<n.accessRequest.created_time})).length}),[t,i])}function M(e){let{requestType:t,spaceStore:n}=e;const s=(0,o().O7)(),a=x({spaceStore:n});(0,i.useEffect)((()=>{const{currentSpaceViewStore:e}=h().default.state;e&&a&&"member"!==t&&m().createAndCommit({userAction:"SpaceSettingsRequests.updateLastOpened",environment:s,canUndo:!0,perform:t=>{m().applyOperation({store:e,operation:{pointer:e.pointer,path:["settings","last_opened_guest_request_tab"],command:"set",args:Date.now()},transaction:t})}})}),[t,s,a]),(0,i.useEffect)((()=>()=>{const{currentSpaceViewStore:e}=h().default.state;e&&a&&"guest"!==t&&m().createAndCommit({userAction:"SpaceSettingsRequests.updateLastOpened",environment:s,canUndo:!0,perform:t=>{m().applyOperation({store:e,operation:{pointer:e.pointer,path:["settings","last_opened_member_request_tab"],command:"set",args:Date.now()},transaction:t})}})}),[t,s,a])}},418815:(e,t,n)=>{n.r(t),n.d(t,{TopbarMoreButton:()=>T});var i=n(667294),o=()=>n(219727),s=()=>n(142735),a=()=>n(846550),r=()=>n(788860),l=()=>n(491927),d=()=>n(879952),c=()=>n(677559);const u=new(c().Ss)("topbarMoreMenu",(async()=>await Promise.all([n.e(62743),n.e(52774),n.e(44832),n.e(39938),n.e(90698),n.e(84885),n.e(37358),n.e(5242),n.e(7312),n.e(90424),n.e(81580),n.e(84325),n.e(31189),n.e(69343),n.e(46293),n.e(94556),n.e(78701),n.e(38804),n.e(17100),n.e(11846),n.e(70355),n.e(2971),n.e(80741),n.e(72586),n.e(53335),n.e(71896),n.e(46616),n.e(54940),n.e(49396),n.e(98721),n.e(98032),n.e(57229),n.e(63707),n.e(86609),n.e(91253),n.e(4642),n.e(5006),n.e(6612),n.e(61171),n.e(23179),n.e(75377),n.e(31020),n.e(2942),n.e(73682),n.e(58591),n.e(54803),n.e(1953),n.e(10216),n.e(58565),n.e(69197),n.e(42055),n.e(38739),n.e(44751),n.e(81567),n.e(63257),n.e(34291),n.e(1913),n.e(56054),n.e(95076),n.e(92341),n.e(82658),n.e(4163),n.e(69583),n.e(22759),n.e(20343),n.e(21820),n.e(46945),n.e(10553),n.e(67019),n.e(27039),n.e(25265),n.e(14581),n.e(38632),n.e(61651),n.e(88702),n.e(54307),n.e(43184),n.e(87647),n.e(75861),n.e(46257),n.e(15819),n.e(45376),n.e(74943),n.e(23721),n.e(58461),n.e(72329),n.e(19592),n.e(3331),n.e(98672),n.e(52658),n.e(44642),n.e(78),n.e(58586)]).then(n.bind(n,449785)))),p=(0,c().kF)(u,(e=>e.TopbarMoreMenu));var m=()=>n(465371),g=()=>n(466970),f=n(785893);const h=(0,n(827282).IU)("mobileQuickCaptureMore",{viewBox:"0 0 26 26",svg:(0,f.jsxs)("svg",{width:"26",height:"26",viewBox:"0 0 26 26",xmlns:"http://www.w3.org/2000/svg",children:[(0,f.jsx)("path",{d:"M4.56552 14.857C5.59119 14.857 6.42266 14.0255 6.42266 12.9999C6.42266 11.9742 5.59119 11.1427 4.56552 11.1427C3.53985 11.1427 2.70837 11.9742 2.70837 12.9999C2.70837 14.0255 3.53985 14.857 4.56552 14.857Z"}),(0,f.jsx)("path",{d:"M20.2917 14.8571C21.3174 14.8571 22.1489 14.0257 22.1489 13C22.1489 11.9743 21.3174 11.1429 20.2917 11.1429C19.2661 11.1429 18.4346 11.9743 18.4346 13C18.4346 14.0257 19.2661 14.8571 20.2917 14.8571Z"}),(0,f.jsx)("path",{d:"M12.4283 14.8571C13.454 14.8571 14.2855 14.0257 14.2855 13C14.2855 11.9743 13.454 11.1429 12.4283 11.1429C11.4027 11.1429 10.5712 11.9743 10.5712 13C10.5712 14.0257 11.4027 14.8571 12.4283 14.8571Z"})]})});var y=()=>n(880885),v=()=>n(876822),x=()=>n(570065),b=()=>n(577741),S=()=>n(905263),M=()=>n(289271);function j(e){const{originRef:t}=e,n=(0,a().yK)((e=>({aiTranslateIcon:{height:18,width:18,fill:e.text.uiBluePrimary}})),[]);return(0,f.jsx)(b().P,{calloutId:"ai_page_translation",children:(0,f.jsx)(S().U,{origin:t,placementToOrigin:"bottom",header:(0,f.jsxs)("div",{style:{display:"flex",fontSize:14,gap:12,paddingLeft:4,paddingRight:4},children:[(0,M().Q)(n.aiTranslateIcon),(0,f.jsx)(r()._H,{id:"aiPageTranslationTooltip.header",defaultMessage:"You can always find translation in the top right menu"})]}),content:null,onCloseClick:()=>{y().H.reset()},pointerPosition:"98%",pointerLength:24,pointerOffset:-3,style:{width:300},onPrimaryButtonClick:()=>{y().H.reset()},nextButtonContent:(0,f.jsx)(r()._H,{id:"aiPageTranslationTooltip.dismiss",defaultMessage:"Got it"})})})}var C=()=>n(448419),w=()=>n(542649);function k(e){let{originRef:t}=e;return(0,f.jsx)(b().P,{calloutId:"wiki_promo",children:(0,f.jsx)(S().U,{origin:t,placementToOrigin:"bottom",header:"Upgrade your existing wikis",content:"Look for the Turn into wiki action here",onCloseClick:()=>{x().E.reset()},pointerPosition:"98%",pointerLength:24,pointerOffset:-3,style:{width:w().G5}})})}var _=()=>n(265456);function T(e){let{buttonPopupStore:t,store:n,isLastButton:r,styling:c}=e;const u=(0,o().O7)(),{device:h}=u,[b,S]=(0,i.useState)(void 0),M=(0,i.useRef)(null),w=(0,i.useCallback)((()=>{x().E.reset(),y().H.reset(),d().ZH({environment:u});const e=M.current;e&&S(e.getBoundingClientRect()),l().kq(u)}),[M,u]),_=(0,s().VK)((()=>x().E.state.showConvertTooltip),[]),T=(0,s().Kw)(y().H),I=(0,a().yK)((e=>({mobilePopupStyle:{borderRadius:12,backgroundColor:e.surface.wash}})),[]),P=(0,g().E)("mobile_use_bottom_sheet_popup_container");return(0,f.jsxs)(f.Fragment,{children:[_?(0,f.jsx)(k,{originRef:M}):T?(0,f.jsx)(j,{originRef:M}):null,(0,f.jsx)(C().ZP,{popupType:h.isMobile?P?C().Z4.BottomSheet:C().Z4.SlideUp:C().Z4.Popup,buttonPopupStore:t,renderOrigin:e=>(0,f.jsx)(R,{ref:M,buttonPopupEvents:e,isLastButton:r,styling:c}),onClick:w,render:()=>(0,f.jsx)(p,{blockStore:n,onClickOriginRect:b,handleAccept:e=>function(e,t,n){const{mainEditorCurrentBlockStore:i}=v().default.state;if(i){const t=i.getType();var o;if(t)l().dh(n,{analyticsName:e.analyticsName,action_type:e.analyticsActionType,from:"topbar_more_menu",block_id:i.id,block_type:t,is_toggleable:(0,m()._A)(t,i.getFormat()),collection_id:null===(o=i.getCollectionViewSourceCollectionStore())||void 0===o?void 0:o.id,parent_collection_id:i.getParentCollectionIdUpToTwoLevels(),form_id:i.getFirstFormIdInCollectionViewBlock()})}e.closeParentMenu&&A(t)}(e,t,u),handleDismiss:()=>A(t)}),originGap:h.isElectronWindows?12:8,trapFocus:!0,forceInitialInbound:!0,style:h.isMobile?I.mobilePopupStyle:{width:240,maxHeight:"80vh"}})]})}const I=(0,r().vU)({actions:{defaultMessage:"Actions",id:"topbar.actions"}});function P(e,t,i,o){const{device:s}=e;if(!s.isMobile){const{iconButton:{width:e,height:i}}=(0,n(596986).F_)(t);return{display:"flex",alignItems:"center",justifyContent:"center",width:e,height:i,borderRadius:6}}if("mobile_horizon1_quick_capture_circle_icons"===o)return(0,_().Tg)(t).iconContainer;{const e=(0,_().$d)(t).iconContainer;return i?{...e,marginRight:0}:e}}function A(e){e.setState({...e.state,open:!1})}const R=i.forwardRef((function(e,t){let{buttonPopupEvents:i,isLastButton:s,styling:l}=e;const d=(0,a().Fg)(),c=(0,o().O7)(),{device:u}=c,p=(0,r().YB)(),m=(0,_().Kh)(d);return(0,f.jsx)(n(654133).Z,{renderTooltip:()=>c.currentUser.isLoggedIn()?(0,f.jsx)(r()._H,{defaultMessage:"Style, export, and more…",id:"topbarMoreButton.tooltip"}):(0,f.jsx)(r()._H,{defaultMessage:"More…",id:"topbarMoreButton.loggedOut.tooltip"}),placement:n(998901).Placement.Bottom,originGap:u.isElectronWindows?10:void 0,delayThreshold:400,render:e=>(0,f.jsx)(n(154186).Z,{ref:t,style:P(c,d,s,l),mobileFeedback:u.isMobile,className:n(247724).mSZ,ariaLabel:p.formatMessage(I.actions),...(0,n(164079).Z)(i,e),children:u.isMobile?h("mobile_horizon1_quick_capture_circle_icons"===l?m[l].iconStyle:{height:26,width:26,fill:d.icon.primary}):(0,n(314379).o)({width:18,height:18,fill:d.regularIconColor})})})}))},449785:(e,t,n)=>{n.r(t),n.d(t,{TopbarMoreMenu:()=>sn});var i=n(667294),o=()=>n(219727),s=()=>n(142735),a=()=>n(846550),r=()=>n(788860),l=()=>n(707513),d=(n(821057),n(492176),n(7961),n(267602),n(470928),n(241792),n(228244),()=>n(146947)),c=()=>n(506347),u=()=>n(156642),p=()=>n(799891),m=()=>n(827282),g=n(785893);const f={viewBox:"0 0 20 20",svg:(0,g.jsx)("path",{d:"M5.53 6.53a.75.75 0 0 0-1.06-1.06l-4 4a.75.75 0 0 0 0 1.06l4 4a.75.75 0 0 0 1.06-1.06l-2.72-2.72h5.94a.75.75 0 0 0 0-1.5H2.81zm8.94-1.06a.75.75 0 0 0 0 1.06l2.72 2.72h-5.94a.75.75 0 0 0 0 1.5h5.94l-2.72 2.72a.75.75 0 1 0 1.06 1.06l4-4a.75.75 0 0 0 0-1.06l-4-4a.75.75 0 0 0-1.06 0"})},h=(0,m().IU)("arrowLeftRight",f);const y={viewBox:"0 0 20 20",svg:(0,g.jsx)("path",{d:"M10 18.5a.75.75 0 0 1-.75-.75V6.81l-4.72 4.72a.75.75 0 0 1-1.06-1.06l6-6a.75.75 0 0 1 1.06 0l6 6a.75.75 0 1 1-1.06 1.06l-4.72-4.72v10.94a.75.75 0 0 1-.75.75M16.5 3a.75.75 0 0 0 0-1.5h-13a.75.75 0 0 0 0 1.5z"})},v=(0,m().IU)("arrowLineUp",y);var x=()=>n(844409);const b={viewBox:"0 0 20 20",svg:(0,g.jsx)("path",{d:"M4.063 3.25a.75.75 0 0 0-1.5 0v11.5a2.75 2.75 0 0 0 2.75 2.75H16.75a.75.75 0 0 0 0-1.5H5.313c-.69 0-1.25-.56-1.25-1.25v-1.672l3.195-2.797 2.987 2.987a.75.75 0 0 0 1.06 0l3.425-3.424.92.92a.5.5 0 0 0 .844-.255l.73-3.652a.5.5 0 0 0-.588-.589l-3.652.73a.5.5 0 0 0-.255.845l.94.94-2.894 2.894-2.952-2.952a.75.75 0 0 0-1.024-.034l-2.737 2.394z"})},S=(0,m().IU)("chartLineUptrend",b),M={viewBox:"0 0 20 20",svg:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("path",{d:"M17.558 1.249a.85.85 0 0 1 1.232.033c.302.336.275.863-.061 1.2l-8.815 8.814a1.1 1.1 0 0 1-.396.254l-.987.365-.106.017a.35.35 0 0 1-.327-.472l.36-.97c.055-.148.143-.284.254-.395z"}),(0,g.jsx)("path",{d:"M17 13.25V6.331l1.382-1.381q.117.381.118.8v7.5A2.75 2.75 0 0 1 15.75 16h-1.312v2.375a.75.75 0 0 1-1.208.595L9.37 16H4.25a2.75 2.75 0 0 1-2.75-2.75v-7.5A2.75 2.75 0 0 1 4.25 3h9.435l-1.5 1.5H4.25C3.56 4.5 3 5.06 3 5.75v7.5c0 .69.56 1.25 1.25 1.25h5.375a.75.75 0 0 1 .457.155l2.855 2.197V15.25a.75.75 0 0 1 .75-.75h2.063c.69 0 1.25-.56 1.25-1.25"})]})},j=(0,m().IU)("commentPencil",M);const C={viewBox:"0 0 20 20",svg:(0,g.jsx)("path",{d:"M2.5 4.25c0-.966.784-1.75 1.75-1.75h3.5c.966 0 1.75.784 1.75 1.75v11.5a1.75 1.75 0 0 1-1.75 1.75h-3.5a1.75 1.75 0 0 1-1.75-1.75zM4.25 4a.25.25 0 0 0-.25.25v11.5c0 .138.112.25.25.25h3.5a.25.25 0 0 0 .25-.25V4.25A.25.25 0 0 0 7.75 4zm6.25.25c0-.966.784-1.75 1.75-1.75h3.5c.966 0 1.75.784 1.75 1.75v3.5a1.75 1.75 0 0 1-1.75 1.75h-3.5a1.75 1.75 0 0 1-1.75-1.75zM12.25 4a.25.25 0 0 0-.25.25v3.5c0 .138.112.25.25.25h3.5a.25.25 0 0 0 .25-.25v-3.5a.25.25 0 0 0-.25-.25zm0 6.5a1.75 1.75 0 0 0-1.75 1.75v3.5c0 .966.784 1.75 1.75 1.75h3.5a1.75 1.75 0 0 0 1.75-1.75v-3.5a1.75 1.75 0 0 0-1.75-1.75zM12 12.25a.25.25 0 0 1 .25-.25h3.5a.25.25 0 0 1 .25.25v3.5a.25.25 0 0 1-.25.25h-3.5a.25.25 0 0 1-.25-.25z"})},w=(0,m().IU)("layout",C),k={viewBox:"0 0 20 20",svg:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("path",{d:"M13.488 11.255a.75.75 0 0 1 0-1.06l1.852-1.853a2.4 2.4 0 0 0 0-3.394l-.367-.368a2.4 2.4 0 0 0-3.395 0L9.726 6.433a.75.75 0 1 1-1.06-1.06l1.852-1.853a3.9 3.9 0 0 1 5.515 0l.368.367a3.9 3.9 0 0 1 0 5.516l-1.853 1.852a.75.75 0 0 1-1.06 0m-7.055-2.59a.75.75 0 0 1 0 1.06L4.58 11.579a2.4 2.4 0 0 0 0 3.394l.368.368a2.4 2.4 0 0 0 3.394 0l1.852-1.852a.75.75 0 0 1 1.061 1.06l-1.852 1.853a3.9 3.9 0 0 1-5.516 0l-.367-.368a3.9 3.9 0 0 1 0-5.515l1.852-1.853a.75.75 0 0 1 1.06 0"}),(0,g.jsx)("path",{d:"M13.063 7.918a.75.75 0 1 0-1.06-1.06l-5.447 5.446a.75.75 0 0 0 1.06 1.06z"})]})},_=(0,m().IU)("link",k);var T=()=>n(429617),I=()=>n(47100);const P={viewBox:"0 0 20 20",svg:(0,g.jsx)("path",{d:"M7 2.125a.625.625 0 1 0 0 1.25h6a.625.625 0 1 0 0-1.25zM4.375 5.25c0-.345.28-.625.625-.625h10a.625.625 0 1 1 0 1.25H5a.625.625 0 0 1-.625-.625m-2.25 4.5A2.75 2.75 0 0 1 4.875 7h10.25a2.75 2.75 0 0 1 2.75 2.75v6.5a2.75 2.75 0 0 1-2.75 2.75H4.875a2.75 2.75 0 0 1-2.75-2.75zm2.75-1.25c-.69 0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h10.25c.69 0 1.25-.56 1.25-1.25v-6.5c0-.69-.56-1.25-1.25-1.25z"})},A=(0,m().IU)("stack",P),R={viewBox:"0 0 20 20",svg:(0,g.jsx)("path",{d:"M7.625 15a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5h-10.5a.75.75 0 0 1-.75-.75M5.375 4.25a.75.75 0 0 0 0 1.5h10.5a.75.75 0 0 0 0-1.5zm1.5 5a.75.75 0 0 0 0 1.5h10.5a.75.75 0 0 0 0-1.5zM3.372 15a.75.75 0 0 1 .75-.75h1.401a.75.75 0 0 1 0 1.5H4.122a.75.75 0 0 1-.75-.75M1.122 4.25a.75.75 0 0 0 0 1.5h1.401a.75.75 0 0 0 0-1.5zm1.5 5a.75.75 0 0 0 0 1.5h1.401a.75.75 0 0 0 0-1.5z"})},Z=(0,m().IU)("tableOfContents",R),B={viewBox:"0 0 20 20",svg:(0,g.jsx)("path",{d:"m8.812 12.875 1.236 3.383a.75.75 0 0 0 1.409-.515L7.304 4.381a1.152 1.152 0 0 0-2.165 0L.986 15.742a.75.75 0 1 0 1.409.515l1.236-3.382zm-.549-1.5H4.18L6.22 5.79zm7.207 5.155-2.75-2.75a.75.75 0 1 1 1.06-1.06l1.47 1.47V4.437a.75.75 0 0 1 1.5 0v9.751l1.47-1.47a.75.75 0 0 1 1.06 1.061l-2.75 2.75a.75.75 0 0 1-1.06 0"})},D=(0,m().IU)("textSmall",B);var L=()=>n(568017),O=()=>n(513670),H=()=>n(244540),V=()=>n(421654),U=()=>n(332542),E=()=>n(636340),N=()=>n(47443),F=()=>n(497065),K=()=>n(269299),z=()=>n(887430),W=()=>n(855238),q=()=>n(989377),G=()=>n(388284),Y=()=>n(164079),$=()=>n(998901),X=()=>n(154186),Q=()=>n(654133),J=()=>n(67961);function ee(e,t){return e.isFiltering?function(e){return(0,g.jsx)(W().Z,{...e,title:e.caption,caption:void 0})}(e):function(e,t){let{id:n,caption:i,focused:s,isActive:r,onClick:l,onMouseDown:d,onMouseEnter:c,onMouseLeave:u,role:p,style:m,tooltip:f,ignoreLocalHoverState:h,disallowTabbing:y}=e;const v=(0,o().Fy)(),x=(0,a().yK)((()=>({optionItem:{display:"flex",flexDirection:"column",alignItems:"center",minWidth:34,justifyContent:"flex-end"},button:{width:"100%",...v.isMobile?{padding:16,paddingTop:20,transition:"color 300ms, border 300ms",lineHeight:1}:{padding:6,paddingTop:10,borderRadius:4,transition:"color 300ms, border 300ms",lineHeight:1},justifyContent:"center",color:r?L().ZP.blue:"inherit"}})),[r,v]);return(0,g.jsx)(Q().Z,{renderTooltip:()=>f,placement:$().Placement.Bottom,delayThreshold:80,render:e=>{const o=(0,Y().Z)(e,{onMouseEnter:c,onMouseLeave:u}),{onMouseDown:a,...r}=o;return(0,g.jsx)(X().Z,{...r,id:n,role:p,ref:t,mobileFeedback:v.isMobile,onClick:l,onMouseDown:o.onMouseDown||d,hovered:s,style:x.button,ignoreLocalHoverState:h,disallowTabbing:y,className:"notranslate",children:(0,g.jsxs)("div",{style:x.optionItem,children:[(0,g.jsx)("div",{style:{...m,height:25},children:"Ag"}),(0,g.jsx)(J().Z,{isSmall:!0,style:{marginTop:4},children:i})]})})}})}(e,t)}const te=i.forwardRef(ee);const ne=function(e){const{children:t}=e,n=(0,o().O7)(),{mobileStyle:i,desktopStyle:s}=(0,a().yK)((e=>({mobileStyle:{display:"flex",justifyContent:"space-around",boxShadow:`0 1px 0 ${e.regularDividerColor}`,background:e.popoverBackground},desktopStyle:{display:"flex",justifyContent:"space-between",marginLeft:14,marginRight:14}})),[]);return(0,g.jsx)(G().Z,{...e,children:(0,g.jsx)("div",{style:n.device.isMobile?i:s,children:t})})};var ie=()=>n(251932),oe=()=>n(721094);const se={viewBox:"0 0 20 20",svg:(0,g.jsx)("path",{d:"M14.333 3.999a.75.75 0 0 1 .75.75v1.584H19a.75.75 0 1 1 0 1.5h-3.918v.86c1.762.128 2.934.714 3.673 1.535.823.915.994 1.998.994 2.69 0 .658-.267 1.28-.539 1.748-.278.478-.61.88-.847 1.116a.75.75 0 0 1-1.061-1.06 4.3 4.3 0 0 0 .611-.81c.215-.369.336-.719.336-.994 0-.405-.087-.949-.415-1.437l-.004.014a8.7 8.7 0 0 1-.64 1.758c-.64 1.281-1.863 2.749-4.025 2.749-1.105 0-1.983-.47-2.546-1.206-.55-.717-.77-1.642-.68-2.536.09-.9.495-1.805 1.244-2.486.608-.553 1.414-.933 2.399-1.06v-.881h-2.75a.75.75 0 0 1 0-1.5h2.75V4.749a.75.75 0 0 1 .75-.75m-.75 6.232c-.61.111-1.064.356-1.39.652a2.38 2.38 0 0 0-.76 1.526c-.057.564.088 1.098.377 1.475.275.359.71.618 1.355.618q.222 0 .424-.031a1 1 0 0 1-.006-.095zm1.5 3.461c.31-.314.56-.698.767-1.11.26-.52.425-1.048.526-1.45a7 7 0 0 0 .125-.607l.004-.03a5.4 5.4 0 0 0-1.422-.297zM8.24 15.51l-1.024-2.8H2.972l-1.023 2.8a.75.75 0 1 1-1.41-.516l3.53-9.652a1.092 1.092 0 0 1 2.05 0l3.53 9.652a.75.75 0 1 1-1.41.515M5.093 6.905 3.521 11.21h3.146z"})},ae=(0,m().IU)("translate",se);var re=()=>n(38562),le=()=>n(676922),de=()=>n(358122),ce=()=>n(234478),ue=()=>n(352230),pe=()=>n(804217),me=()=>n(279386),ge=()=>n(749826),fe=()=>n(944993),he=()=>n(198829),ye=()=>n(470386),ve=()=>n(868744),xe=()=>n(902569);function be(e){const{blockStore:t,menuListItemProps:n,title:l,onFocus:d,closeParentMenu:c,shouldRenderMobileRefresh:u}=e,p=(0,o().O7)(),m=(0,a().Fg)(),f=(0,ce().w)({pageStore:t}),h=(0,de().J)(),[y,v]=(0,i.useState)(void 0),x=y??f??h,{isTranslating:b,editorModeConfigTranslateState:S}=(0,s().VK)((()=>{const e=me().MT.getTranslateModeForBlock(t.id);return e?{isTranslating:!0,editorModeConfigTranslateState:e}:{isTranslating:!1,editorModeConfigTranslateState:{mode:"translate_unlocked",status:"pre_activation",sourceLanguage:x}}}),[t,x]),M=(0,s().VK)((()=>!pe().default.state.online&&ge().default.checkGate({gateName:"download_for_offline"})),[]),j=(0,i.useCallback)((e=>{const{sourceLanguage:t}=e;v(t)}),[]),C=(0,i.useCallback)((e=>{const{targetLanguage:n}=e;le().V8({pageStore:t,environment:p}),le().LI({pageStore:t,targetLanguage:n,sourceLanguage:x,environment:p,triggeredFrom:"action_menu"}),c()}),[t,x,p,c]),w=(0,s().VK)((()=>(0,re().Sy)(m,b)),[b,m]);return"pre_activation"!==S.status||M?(0,g.jsx)(W().Z,{...n,title:l,badge:(0,g.jsx)(fe().Z,{}),svg:ae,right:w,onClick:()=>{le().lR({pageStore:t,environment:p,triggeredFrom:"action_menu"}),c()},disabled:M,disabledFeedback:M,tooltipText:M?(0,g.jsx)(r()._H,{...re().RE.unavailableOfflineTooltip}):void 0}):(0,g.jsx)(ve().Z,{...n,disableDefaultClick:!0,onFocus:d,focused:n.focused,disableCloseOnEnter:!0,renderExtension:(e,n)=>{const i=p.device.isMobile?{menuType:ue().o.Modal,right:u?void 0:(0,g.jsx)(ye().DoneMenuText,{}),onClickRight:u?void 0:n.close,onClickLeft:n.close,shouldRenderMobileRefresh:u,isExtensionMenu:u,paddingTop:u?10:void 0,title:l,...e}:{menuType:ue().o.Popup,...e};return(0,g.jsx)(he().Z,{...i,onClick:e=>{e.stopPropagation()},children:(0,g.jsx)(xe().I,{onSelectTargetLanguage:C,onSelectSourceLanguage:j,editorModeConfigTranslateState:S,sourceLanguage:x,detectedPageLanguage:f,preferredLanguage:h,shouldRenderMobileRefresh:u,subMenuPlacement:$().Placement.Left,pageId:t.id})})},renderOrigin:(e,t)=>(0,g.jsx)(W().Z,{...e,ref:t,title:l,badge:(0,g.jsx)(fe().Z,{}),svg:ae,right:w})})}var Se=()=>n(364052),Me=()=>n(283848),je=()=>n(396136),Ce=()=>n(145284),we=()=>n(205228),ke=()=>n(872308),_e=()=>n(234049),Te=()=>n(594546),Ie=()=>n(527278),Pe=()=>n(443471),Ae=()=>n(314169),Re=()=>n(333023),Ze=()=>n(998470),Be=()=>n(876822),De=()=>n(785738),Le=()=>n(102182),Oe=()=>n(369637);const He="template_translation_toast",Ve="Template size too large";async function Ue(e){const{environment:t,pageStore:n,targetLanguage:i,sourceLanguage:o}=e,{currentSpaceStore:s}=Be().default.state;if(!ge().default.checkGate({gateName:"translate_template_top_bar"}))throw new Error("Translate template is not enabled");if(!i||!o||null==s||!s.id)return;const a=Ie().Z.getIntl(),r=await(0,_e().LL)(t,n.id),l=null==r?void 0:r.name,d=performance.now();!function(e){const{intl:t,toastProps:n={},isMobile:i=!1}=e;if(i)return void Le().oV({label:t.formatMessage({id:"inApp.template.translation.started.toast.mobile.message",defaultMessage:"Template is being translated. We will let you know when it's ready to use."}),position:"bottom",style:{maxWidth:"calc(100% - 40px)",justifyContent:"center",textAlign:"center"}});Oe().m2({id:He,title:t.formatMessage({id:"inApp.template.translation.started.toast.title",defaultMessage:"Template is being translated"}),message:t.formatMessage({id:"inApp.template.translation.started.toast.message",defaultMessage:"We will let you know when it's ready to access"}),presentationType:"transient",icon:Pe().r,...n})}({intl:a});const u=De().h.getStateForBlock(n.id),m=await new Promise((e=>{K().createAndCommit({userAction:"translateTemplateActions.translateTemplateBlock",environment:t,perform:r=>{const d=n.getParentStore();if(!d)throw new Error("Cannot duplicate with no parent store found");const m=r.getUserActionForAnalyticsPurposesOnly();p().log({level:"info",from:"translateTemplateActions",type:"translateTemplateBlockStart",data:{miscDataToConvertToString:{pageStoreId:n.id,spaceId:n.getSpaceId(),parentStoreId:n.getParentId(),targetLanguage:i,sourceLanguage:o}}}),(0,Te().j)({environment:t,event:{eventName:"translate_template_block",eventProperties:{duplicate_to:"parent",page_id:n.id,source_language:o,target_language:i,triggered_from:"topbar_more_action"}}}),De().h.setStateForBlock(n.id,{...u,mode:"translate",status:"loading",sourceLanguage:o,targetLanguage:i});const[g,f]=ke().duplicateBlock({environment:t,stores:[n],addCopyName:!1,transaction:r,deepCopyTransclusionContainers:!0,targetSpaceId:null==s?void 0:s.id,resolveTemplateVariables:!n.isInsideTemplate(),baseUrl:we().default.domainBaseUrl,publicDomainName:we().default.publicDomainName,preferDuplicateLocation:"server",shouldTranslate:!0,targetLanguage:i,sourceLanguage:o}),h=g[0];return"block"===d.table?U().jG({parentStore:d,childStore:h,transaction:r,after:n.id}):"space"===d.table&&Be().default.state.currentSpaceViewStore&&Ce().Hj({environment:t,spaceStore:s,spaceViewStore:Be().default.state.currentSpaceViewStore,pageStore:h,isPrivate:!0,location:{type:"append",after:n.id},transaction:r}),f.then((s=>{var r,d;"error"===s.status?(Ee({intl:a,templateName:l,blockLimitError:null===(r=s.error)||void 0===r?void 0:r.message.includes(Ve)}),De().h.clearStateForBlock(n.id),p().log({level:"error",from:"translateTemplateActions",type:"translateTemplateBlockError",data:{miscDataToConvertToString:{pageStoreId:n.id,spaceId:n.getSpaceId(),parentStoreId:n.getParentId(),targetLanguage:i,sourceLanguage:o,errorMessage:null===(d=s.error)||void 0===d?void 0:d.message}}}),e({success:!1,userAction:m})):(!function(e){const{sourceLanguage:t,targetLanguage:n,intl:i,environment:o,blockStores:s,toastProps:a={},isMobile:r=!1,templateName:l}=e,d=(0,Me().E)(t),u=(0,Me().E)(n);if(r)return Le().rN(),void Le().d8({blockToOpenStore:s[0],onOpenBlock:()=>{N()._c({environment:o,store:s[0],pageVisitSource:c().tY.Duplicate})},item:{label:i.formatMessage({id:"inApp.template.translation.finished.toast.mobile.message",defaultMessage:"Template is ready"}),position:"bottom",style:{maxWidth:"calc(100% - 40px)",justifyContent:"center",textAlign:"center"}}});Oe().m2({id:He,title:i.formatMessage({id:"inApp.template.translation.finished.toast.title",defaultMessage:"Template is ready"}),message:d&&u&&l?i.formatMessage({id:"inApp.template.translation.finished.toast.templateName.message",defaultMessage:"''{templateName}'' has been translated from {sourceLanguage} to {targetLanguage}. View your template to continue editing."},{sourceLanguage:d,targetLanguage:u,templateName:l}):i.formatMessage({id:"inApp.template.translation.finished.toast.message",defaultMessage:"Template has been added to your workspace"}),presentationType:"persistent",iconGroup:Se().F,iconGroupColorName:"greenPrimary",iconGroupVariant:"default",actions:{primary:{title:i.formatMessage({id:"inApp.template.translation.finished.toast.seeTemplate.button",defaultMessage:"See template"}),onAction:()=>{N()._c({environment:o,store:s[0],pageVisitSource:c().tY.Duplicate}),Oe().Xd(He)}}},...a})}({environment:t,blockStores:g,sourceLanguage:o,targetLanguage:i,intl:a,templateName:l}),De().h.clearStateForBlock(n.id),p().log({level:"info",from:"translateTemplateActions",type:"translateTemplateBlockSuccess",data:{miscDataToConvertToString:{pageStoreId:n.id,spaceId:n.getSpaceId(),parentStoreId:n.getParentId(),targetLanguage:i,sourceLanguage:o}}}),e({success:!0,duplicateStore:h,userAction:m}))})).catch((t=>{Ee({intl:a,templateName:l}),De().h.clearStateForBlock(n.id),p().log({level:"error",from:"translateTemplateActions",type:"translateTemplateBlockError",data:{miscDataToConvertToString:{pageStoreId:n.id,spaceId:n.getSpaceId(),parentStoreId:n.getParentId(),targetLanguage:i,sourceLanguage:o,error:t}}}),e({success:!1,userAction:m})})),{duplicateStore:h,onComplete:f}}})}));if(m.success&&m.duplicateStore){var g;!function(e){(0,Te().j)({environment:e.environment,event:{eventName:"translate_template_duration",eventProperties:{time:e.time,success:e.success,user_action:e.user_action,total_blocks:e.total_blocks,page_block_id:e.page_block_id}}})}({environment:t,success:!0,time:performance.now()-d,user_action:m.userAction,page_block_id:m.duplicateStore.id});const e=Re().mk({store:m.duplicateStore,environment:t}).mostPermissivePublicItem,{permissionItem:n,from:i}=e,o=i.table===je().iU?i.blockId:i.teamId,s=!(null===(g=Be().default.state.currentSpaceStore)||void 0===g?void 0:g.getDisableMoveToSpace())&&n.allow_duplicate;Ze().Fo({environment:t,type:"site",store:m.duplicateStore}),await(0,Ae().iK)({oldPermissionItem:n,newPermissionItem:{...n,role:"reader",allow_duplicate:s},wasInherited:o!==m.duplicateStore.id,environment:t,store:m.duplicateStore,sudoModeStore:void 0})}}function Ee(e){const{intl:t,toastProps:n={},isMobile:i=!1,templateName:o,blockLimitError:s}=e;i?Le().oV({label:t.formatMessage({id:"inApp.template.translation.error.toast.mobile.message",defaultMessage:"Template translation failed. Please try again."}),position:"bottom",style:{maxWidth:"calc(100% - 40px)",justifyContent:"center",textAlign:"center"}}):Oe().m2({id:He,title:t.formatMessage({id:"inApp.template.translation.error.toast.title",defaultMessage:"Template translation failed"}),message:o?s?t.formatMessage({id:"inApp.template.translation.blockLimitError.toast.templateName.message",defaultMessage:"Unable to translate ''{templateName}'' – template size exceeds limit"},{templateName:o}):t.formatMessage({id:"inApp.template.translation.error.toast.templateName.message",defaultMessage:"Unable to translate ''{templateName}''. Please try again."},{templateName:o}):t.formatMessage({id:"inApp.template.translation.error.toast.message",defaultMessage:"Please try again."}),presentationType:"transient",icon:Pe().r,...n})}var Ne=()=>n(440567);function Fe(e){const{blockStore:t,menuListItemProps:n,title:a,onFocus:r,closeParentMenu:l,shouldRenderMobileRefresh:d}=e,c=(0,o().O7)(),u=(0,ce().w)({pageStore:t}),p=(0,de().J)(),[m,f]=(0,i.useState)(void 0),h=m??u??p,{translateState:y}=(0,s().VK)((()=>{const e=De().h.getStateForBlock(t.id);return"translate"===(null==e?void 0:e.mode)?{isTranslating:!0,translateState:e}:{isTranslating:!1,translateState:{mode:"translate",status:"pre_activation",sourceLanguage:h}}}),[t,h]),v=(0,i.useCallback)((e=>{const{sourceLanguage:t}=e;f(t)}),[]),x=(0,i.useCallback)((async e=>{const{targetLanguage:n}=e;await Ue({pageStore:t,targetLanguage:n,sourceLanguage:h,environment:c}),l()}),[t,h,c,l]);return(0,g.jsx)(ve().Z,{...n,disableDefaultClick:!0,onFocus:r,focused:n.focused,disableCloseOnEnter:!0,renderExtension:(e,n)=>{const i=c.device.isMobile?{menuType:ue().o.Modal,right:d?void 0:(0,g.jsx)(ye().DoneMenuText,{}),onClickRight:d?void 0:n.close,onClickLeft:n.close,shouldRenderMobileRefresh:d,isExtensionMenu:d,paddingTop:d?10:void 0,title:a,...e}:{menuType:ue().o.Popup,...e};return(0,g.jsx)(he().Z,{...i,onClick:e=>{e.stopPropagation()},children:(0,g.jsx)(xe().I,{onSelectTargetLanguage:x,onSelectSourceLanguage:v,editorModeConfigTranslateState:y,sourceLanguage:h,detectedPageLanguage:u,preferredLanguage:p,shouldRenderMobileRefresh:d,subMenuPlacement:$().Placement.Left,pageId:t.id})})},renderOrigin:(e,t)=>(0,g.jsx)(W().Z,{...e,ref:t,title:a,badge:void 0,svg:Ne().W})})}var Ke=()=>n(421797),ze=()=>n(656573),We=()=>n(429725),qe=()=>n(428275);const Ge=(0,m().IU)("fontStyleMono",{viewBox:"0 0 16 16",svg:(0,g.jsx)("g",{children:(0,g.jsx)("path",{d:"M6.817 12 6.08 9.513H3.017L2.28 12H1.192l2.675-8.725h1.388L7.93 12zM4.605 4.388h-.113L3.267 8.6H5.83zm10.008 7.399q0 1.338-.75 2.1-.75.763-2.088.763-1.45 0-2.313-.888l.588-.687q.676.7 1.737.7 1.825 0 1.825-1.925v-1.075h-.05q-.625 1.2-1.987 1.2-1.175 0-1.85-.875-.675-.888-.675-2.412t.675-2.4q.675-.888 1.85-.888 1.361 0 1.988 1.2h.05V5.55h1zm-2.65-.7q.7 0 1.175-.35t.475-.974v-2.15q0-.626-.476-.975-.474-.35-1.175-.35-.862 0-1.35.525-.487.524-.487 1.412v.925q0 .888.488 1.412.487.526 1.35.526Z"})})}),Ye=(0,m().IU)("fontStyleSans",{viewBox:"0 0 16 16",svg:(0,g.jsx)("g",{children:(0,g.jsx)("path",{d:"m.76 12 3.248-8.807h.842v1.422h-.348L1.914 12H.761Zm1.472-2.52.341-.935h3.98l.342.934H2.232ZM7.188 12 4.6 4.615V3.193h.494L8.341 12zm4.557 2.32q-.793 0-1.385-.226a2.26 2.26 0 0 1-.947-.63 1.86 1.86 0 0 1-.433-.94l.012-.005h1.099l.006.006q.085.373.513.61.427.244 1.135.244.885 0 1.38-.402.5-.398.5-1.123v-1.331h-.098a2.24 2.24 0 0 1-1.22 1.007q-.39.128-.843.128-.848 0-1.47-.403a2.7 2.7 0 0 1-.953-1.123q-.336-.714-.336-1.635v-.013q0-.922.336-1.635.342-.72.964-1.13.623-.415 1.484-.415.464 0 .854.147t.69.415q.305.269.506.64h.074V5.42h1.062v6.488q0 .733-.36 1.276a2.27 2.27 0 0 1-1.014.836q-.66.3-1.556.3m-.049-3.602q.61 0 1.044-.28.44-.288.671-.788.238-.5.238-1.153v-.013q0-.653-.238-1.16a1.84 1.84 0 0 0-.671-.793q-.434-.287-1.044-.287t-1.037.287a1.83 1.83 0 0 0-.647.794 2.9 2.9 0 0 0-.22 1.16v.012q0 .653.22 1.153.225.5.646.787.428.282 1.038.281"})})}),$e=(0,m().IU)("fontStyleSerif",{viewBox:"0 0 16 16",svg:(0,g.jsx)("g",{children:(0,g.jsx)("path",{d:"M.29 12v-.416l.753-.299 3.16-7.982.441-.065.455-.13 2.99 8.177.884.286V12h-3.34v-.429l1.104-.299-.793-2.275H2.772l-.754 2.119 1.248.455V12zm4.08-7.462L3.058 8.217h2.613L4.384 4.538h-.013Zm10.764 2.106-1.482-.078-.013.039c.325.273.663.754.663 1.443 0 1.417-1.287 2.327-2.587 2.327q-.488 0-.936-.156c-.3.234-.455.455-.455.65 0 .182.182.429.48.442l2.458.143c1.287.078 1.859.65 1.859 1.456 0 1.079-1.391 2.405-3.81 2.405-1.234 0-2.352-.52-2.352-1.469 0-.481.325-1.027.949-1.365l.312-.169v-.026l-.923-.884c.26-.663.546-.988 1.027-1.391C9.726 9.647 9.297 9.01 9.297 8.1c0-1.417 1.105-2.379 2.496-2.379.598 0 1.014.143 1.534.325l1.807-.195zM11.87 9.816c.689 0 1.248-.611 1.248-1.599 0-1.391-.624-1.989-1.404-1.989-.767 0-1.222.572-1.222 1.56 0 1.274.533 2.028 1.378 2.028m1.274 2.691-2.457-.156c-.195.208-.56.689-.56 1.157 0 .481.43 1.157 1.795 1.157 1.599 0 2.262-.767 2.262-1.365 0-.455-.3-.741-1.04-.793"})})});var Xe=()=>n(965910);const Qe=(0,m().IU)("textStyleIcon",{viewBox:"0 0 16 16",svg:(0,g.jsx)("g",{children:(0,g.jsx)("path",{d:"M.74 13.097c-.355 0-.574-.212-.574-.554 0-.116.02-.226.075-.37l3.206-8.55q.226-.625.862-.623c.437 0 .717.212.875.629l3.206 8.538a1 1 0 0 1 .075.37c0 .34-.233.56-.595.56-.355 0-.533-.137-.663-.52l-.882-2.413H2.292l-.882 2.413c-.13.383-.307.52-.67.52m1.887-3.972h3.356l-1.66-4.6h-.035zm9.604 4.02c-1.449 0-2.454-.875-2.454-2.181 0-1.272.964-2.071 2.694-2.167l2.208-.123v-.588c0-.957-.636-1.552-1.702-1.552-.89 0-1.47.37-1.853 1.162-.103.192-.267.274-.479.274-.293 0-.519-.199-.519-.5 0-.143.055-.307.13-.478.39-.882 1.463-1.449 2.748-1.449 1.736 0 2.83.964 2.83 2.454v4.56c0 .369-.232.594-.56.594-.322 0-.554-.225-.554-.567v-.902h-.028c-.423.888-1.408 1.463-2.46 1.463Zm.28-.95c1.204 0 2.168-.855 2.168-1.942v-.725l-2.065.13c-1.073.069-1.654.554-1.654 1.279 0 .752.629 1.257 1.552 1.257Z"})})});var Je=()=>n(326264),et=()=>n(793935),tt=()=>n(590972),nt=()=>n(838266),it=()=>n(374469);const ot=(0,r().vU)({aiCoEditingName:{id:"action.aiCoEditing.name",defaultMessage:"AI Co-editing"}}),st=(0,re().N$)({key:"ai_co_editing",displayName:ot.aiCoEditingName,label:Ie().Z.formatMessage(ot.aiCoEditingName),svg:I().t,isEnabled:e=>"ai_co_editing"===me().MT.getMode(e),validators:[Ke().ffD(Ke().YGm),Ke().J5S,Ke().ffD(Ke().uY7),Ke().ffD(Ke().p1d),()=>n(524434).KR.isAiEnabled(),Ke().QLY("ai_co_editing")],action:(e,t,n)=>{const i="ai_co_editing"===me().MT.getMode(t)?"default":"ai_co_editing";H().t_({environment:e,navigableBlockStore:t,mode:i,location:"page_more_actions"})}});var at,rt,lt=()=>n(769197),dt=()=>n(142466),ct=()=>n(717538),ut=()=>n(58991),pt=()=>n(668881),mt=()=>n(929626),gt=()=>n(79755),ft=()=>n(838267),ht=()=>n(523709);const yt=(0,r().vU)({customizePageLabel:{id:"action.customizePage.label",defaultMessage:"Customize page"},exportName:{id:"action.export.name",defaultMessage:"Export"},exportCaption:{id:"action.export.caption",defaultMessage:"PDF, HTML, Markdown & CSV"},fontDefaultName:{id:"action.setPageFont.default.fuzzySearchKeywords",defaultMessage:"Font Default"},fontDefaultCaption:{id:"action.setPageFont.default.caption",defaultMessage:"Default"},fontDefaultTooltip:{id:"action.setPageFont.default.tooltip",defaultMessage:"The default sans-serif workhorse"},fontSerifName:{id:"action.setPageFont.serif.fuzzySearchKeywords",defaultMessage:"Font Serif"},fontSerifCaption:{id:"action.setPageFont.serif.caption",defaultMessage:"Serif"},fontSerifTooltip:{id:"action.setPageFont.serif.tooltip",defaultMessage:"Good for publishing"},fontMonoName:{id:"action.setPageFont.mono.fuzzySearchKeywords",defaultMessage:"Font Mono"},fontMonoCaption:{id:"action.setPageFont.mono.caption",defaultMessage:"Mono"},fontMonoTooltip:{id:"action.setPageFont.mono.tooltip",defaultMessage:"Good for drafting and notes"},fontComicName:{id:"action.setPageFont.comic.fuzzySearchKeywords",defaultMessage:"Font Comic"},fontComicCaption:{id:"action.setPageFont.comic.caption",defaultMessage:"Comic"},fontComicTooltip:{id:"action.setPageFont.comic.tooltip",defaultMessage:"Playful but cringe"},fontSmallTextKeywords:{id:"action.fontSmallText.fuzzySearchKeywords",defaultMessage:"Font Small Text"},fontSmallTextLabel:{id:"action.fontSmallText.label",defaultMessage:"Small text"},fontStyleSection:{id:"action.section.fontStyle",defaultMessage:"Style"},fullWidthLabel:{id:"action.fullWidth.label",defaultMessage:"Full width"},getNotifiedFor:{defaultMessage:"Get notified",id:"topbar.moreButton.getNotified"},importName:{id:"action.import.name",defaultMessage:"Import"},lockPageName:{id:"action.lockPage.name",defaultMessage:"Lock page"},floatingTableOfContents:{id:"action.floatingTableOfContents.name",defaultMessage:"Table of contents"},notifyMe:{id:"action.notifyMe.name",defaultMessage:"Notify me"},openAIAssistant:{id:"action.openMobileAIAssistant.name",defaultMessage:"Open AI Assistant"},openinMacAppName:{id:"action.openinMacApp.name",defaultMessage:"Open in Mac app"},openinWindowsAppName:{id:"action.openinWindowsApp.name",defaultMessage:"Open in Windows app"},openiniOSAppName:{id:"action.openiniOSApp.name",defaultMessage:"Open in iOS app"},openinAndroidAppName:{id:"action.openinAndroidApp.name",defaultMessage:"Open in Android app"},pageAnalyticsName:{id:"action.pageAnalytics.name",defaultMessage:"Page analytics"},pageHistoryName:{id:"action.pageHistory.name",defaultMessage:"View edit history"},pageHistoryNewName:{id:"action.pageHistoryNew.name",defaultMessage:"Version history"},pageUpdates:{id:"action.pageUpdates.title",defaultMessage:"Page updates"},privacySettingsName:{id:"action.privacySettings.name",defaultMessage:"Privacy settings"},unlockPageName:{id:"action.unlockPageName.name",defaultMessage:"Unlock page"},textFontStyle:{id:"action.textFontStyle.name",defaultMessage:"Text style"},suggestEditsName:{id:"action.suggestEdits.name",defaultMessage:"Suggest edits"},viewAnalyticsName:{id:"action.viewAnalytics.name",defaultMessage:"View analytics"},viewUpdatesAndAnalyticsName:{id:"action.updatesAndAnalytics.name",defaultMessage:"Updates & analytics"},openPageLayoutEditor:{id:"action.layoutEditor.open",defaultMessage:"Customize layout"},translate:{id:"action.translate",defaultMessage:"Translate"},customizeAIWorkflow:{id:"action.customizeAIWorkflow.open",defaultMessage:"Customize workflow"},translateTemplate:{id:"action.translateTemplate",defaultMessage:"Localize template"}});function vt(e){const{environment:t,context:n,isFiltering:i}=e,{device:o}=t,s=n.blocks[0],a=s.getFollowSettingsKey(),r=Je().Zk({followSettingsKey:a,environment:t,blockStore:s,from:"more_menu"});return[i?jt(t,s.getFormat().page_font||"default"):St({shouldRenderMobileRefresh:!0}),(0,re().$J)({key:"page style and layout",render:e=>(0,g.jsx)(G().Z,{...e,topBorder:!1,shouldRenderMobileRefresh:!0}),actions:(0,O().oA)([Ct,wt,Tt,o.isMobile?void 0:Gt,o.isMobile?void 0:Yt,Rt])}),(0,re().$J)({key:"viewing of page content",render:e=>(0,g.jsx)(G().Z,{...e,shouldRenderMobileRefresh:!0}),actions:[mt().n,st,kt,lt().CU,lt().Bj,lt().fK]}),(0,ut().KE)({shouldRenderMobileRefresh:!0}),(0,re().$J)({key:"editing of page content",render:e=>(0,g.jsx)(G().Z,{...e,shouldRenderMobileRefresh:!0}),actions:[It,dt().gz,Pt({shouldRenderMobileRefresh:!0}),At({shouldRenderMobileRefresh:!0})]}),(0,re().$J)({key:"undo",render:e=>(0,g.jsx)(G().Z,{...e,shouldRenderMobileRefresh:!0}),actions:[ht().Yw]}),(0,re().$J)({key:"topbar primary actions",render:e=>(0,g.jsx)(G().Z,{...e,shouldRenderMobileRefresh:!0}),actions:[lt().q6,lt().hS,ht().aU,Zt,Bt,ct().m7,ct().nh,ct().fI,ct().MI,pt().A,gt().t0]}),(0,re().$J)({key:"topbar import actions",render:e=>(0,g.jsx)(G().Z,{...e,shouldRenderMobileRefresh:!0}),actions:[Wt,lt().mS,qt]}),(0,re().$J)({key:"topbar wiki actions",render:e=>(0,g.jsx)(G().Z,{...e,shouldRenderMobileRefresh:!0}),actions:(0,O().oA)([ft().bV,ft().R$])}),zt(),Kt(t,r,!0),(0,oe().Z)(n),(0,re().$J)({key:"topbar view options",render:e=>(0,g.jsx)(G().Z,{...e,shouldRenderMobileRefresh:!0}),actions:[Dt,Lt,Ot,Ht]})]}function xt(e){return(0,re().cN)({key:`font ${e.font||"default"}`,displayName:e.displayName,analyticsName:e.displayName.defaultMessage,validators:[Ke().or([Ke().ffD(Ke().YGm),Ke().f7f]),Ke().J5S,Ke().ffD(Ke().uY7),...e.extraValidators],render:(t,n)=>{const i=n.blocks[0].getFormat().page_font,o=e.font===i||!e.font&&!i;return(0,g.jsx)(te,{...t,isActive:o,font:e.font,tooltip:e.tooltip,style:e.style,caption:e.caption,isFiltering:e.isFiltering,checkState:e.checkStatus,svg:e.svg})},closeParentMenu:!!e.isFiltering,action:(t,n)=>{let{blocks:i,environment:o}=t;K().createAndCommit({userAction:"actionRegistry.createFontAction",environment:o,canUndo:!0,perform:t=>{V().FH({stores:i,update:{page_font:e.font},transaction:t}),function(e,t){Te().K4(e,"change_font_type",t)}(o,{type:e.font||"default"})}})}})}const bt=[{font:"default",action:function(e){const{isFiltering:t,pageFont:n}=e;return xt({displayName:yt.fontDefaultName,caption:(0,g.jsx)(r()._H,{...yt.fontDefaultCaption}),font:void 0,tooltip:(0,g.jsx)(r()._H,{...yt.fontDefaultTooltip}),style:t?{}:{fontSize:24,fontFamily:l().F5(d().locale).sans,position:"relative",top:-2},extraValidators:[],isFiltering:t,checkStatus:"default"===n,svg:Ye})}},{font:"serif",action:function(e){const{isFiltering:t,pageFont:n}=e;return xt({displayName:yt.fontSerifName,caption:(0,g.jsx)(r()._H,{...yt.fontSerifCaption}),font:"serif",tooltip:(0,g.jsx)(r()._H,{...yt.fontSerifTooltip}),style:t?{}:{fontSize:25,fontFamily:l().F5(d().locale).serif},extraValidators:[],isFiltering:t,checkStatus:"serif"===n,svg:$e})}},{font:"mono",action:function(e){const{isFiltering:t,pageFont:n}=e;return xt({displayName:yt.fontMonoName,caption:(0,g.jsx)(r()._H,{...yt.fontMonoCaption}),font:"mono",tooltip:(0,g.jsx)(r()._H,{...yt.fontMonoTooltip}),style:t?{}:{fontSize:26,fontFamily:l().F5(d().locale).mono,position:"relative",top:-3,letterSpacing:-1},extraValidators:[],isFiltering:t,checkStatus:"mono"===n,svg:Ge})}},{font:"comic",action:function(e){const{isFiltering:t,pageFont:n}=e;return xt({displayName:yt.fontComicName,caption:(0,g.jsx)(r()._H,{...yt.fontComicCaption}),font:"comic",tooltip:(0,g.jsx)(r()._H,{...yt.fontComicTooltip}),style:{fontSize:t?14:26,fontFamily:l().F5(d().locale).comic,position:"relative",top:-3,letterSpacing:-1},extraValidators:[Ke().or([Ke().QLY("comic_sans"),e=>e.blocks.some((e=>"comic"===e.getFormatStore().getKeyStore("page_font").getValue()))])],isFiltering:t,checkStatus:"comic"===n})}}];function St(e){const{shouldRenderMobileRefresh:t}=e;return(0,re().$J)({key:"font section",title:void 0,render:e=>(0,g.jsx)(ne,{...e,shouldRenderMobileRefresh:t}),actions:bt.map((e=>e.action({isFiltering:!1})))})}function Mt(e){return(0,re().$J)({key:"font extension menu",render:e=>(0,g.jsx)(G().Z,{...e,isFiltering:!0}),actions:bt.map((t=>t.action({isFiltering:!0,pageFont:e})))})}function jt(e,t){const n=(0,L().gh)({theme:e.ThemeModeStore.state}),i=bt.map((e=>e.font)).findIndex((e=>e===t))??0;return(0,re().$J)({key:"textStyleAction",render:e=>(0,g.jsx)(G().Z,{...e}),actions:[(0,re().MV)({key:"font style section",displayName:yt.textFontStyle,analyticsName:yt.textFontStyle.defaultMessage,svg:Qe,right:(0,g.jsx)(g.Fragment,{children:t.charAt(0).toUpperCase()+t.slice(1)}),rightStyle:{color:n.lightTextColor,marginRight:5},width:300,validators:[Ke().or([Ke().ffD(Ke().YGm),Ke().f7f]),Ke().J5S,Ke().ffD(Ke().uY7)],subActions:()=>[Mt(t)],initialFocus:i,hideSubActions:!0,fuzzySearchKeywordsArray:[yt.fontDefaultName,yt.fontSerifName,yt.fontMonoName]})]})}const Ct=(0,re().N$)({key:"small text",displayName:yt.fontSmallTextKeywords,label:Ie().Z.formatMessage(yt.fontSmallTextLabel),svg:D,isEnabled:e=>Boolean(e.getFormat().page_small_text),validators:[Ke().ffD(Ke().tqC),Ke().or([Ke().ffD(Ke().YGm),Ke().f7f]),Ke().J5S,Ke().ffD(Ke().uY7)],action:(e,t,n)=>V().FH({stores:[t],update:{page_small_text:!t.getFormat().page_small_text},transaction:n}),afterAction:(e,t)=>{Te().K4(t,"change_font_size",{type:e?"small":"large"})}}),wt=(0,re().N$)({key:"full width",displayName:yt.fullWidthLabel,svg:h,label:Ie().Z.formatMessage(yt.fullWidthLabel),isEnabled:e=>e.isFullWidth(),validators:[Ke().ffD(Ke().Mnk),Ke().ffD(Ke().YGm),Ke().J5S,Ke().ffD(Ke().uY7)],action:(e,t,n)=>V().FH({stores:[t],update:{page_full_width:!t.isFullWidth()},transaction:n}),afterAction:(e,t)=>{Te().K4(t,"change_page_width",{type:e?"full_width":"default_width"})}}),kt=(0,re().N$)({key:"page lock",displayName:yt.lockPageName,label:Ie().Z.formatMessage(yt.lockPageName),svg:n(19296).Y,isEnabled:e=>e.isLocked(),validators:[Ke().ffD(Ke().YGm),Ke().J5S,Ke().ffD(Ke().uY7)],action:(e,t,n)=>E().sW({store:t.getFormatStore(),data:{block_locked:!t.isLocked(),block_locked_by:e.currentUser.id},transaction:n}),afterAction:()=>null}),_t=[Ke().ffD(Ke().YGm),Ke().J5S,Ke().ffD(Ke().uY7),Ke().QLY("floating_table_of_contents"),Ke().ffD(Ke().tqC),Ke().or([Ke().iBZ])],Tt=(0,re().N$)({key:"floating table of contents",displayName:yt.floatingTableOfContents,svg:Z,label:Ie().Z.formatMessage(yt.floatingTableOfContents),isEnabled:e=>{var t;return"off"!==(null===(t=e.getModel())||void 0===t?void 0:t.getFloatingTableOfContentsState())},validators:_t,action:(e,t,n)=>{var i;const o="off"!==(null===(i=t.getModel())||void 0===i?void 0:i.getFloatingTableOfContentsState());E().sW({store:t.getFormatStore(),data:{page_floating_table_of_contents:{state:o?"off":"minimal"}},transaction:n})},afterAction:(e,t)=>{(0,Te().j)({environment:t,event:{eventName:"edit_page_table_of_contents_toggle",eventProperties:{is_table_of_contents_on:e}}})}}),It=(0,re().cN)({key:"suggest edits",displayName:yt.suggestEditsName,analyticsName:yt.suggestEditsName.defaultMessage,badge:(0,g.jsx)(q().Z,{newBadgeKey:"suggested_edits_topbar_more_actions",didUserEngage:Boolean(null===(at=Be().default.state.currentUserSettingsStore)||void 0===at||null===(at=at.getSettings())||void 0===at?void 0:at.dismissed_suggest_mode_tooltip)}),validators:[Ke().ffD(Ke().p1d),Ke().ffD(Ke().tqC),Ke().or([Ke().ffD(Ke().YGm),Ke().f7f]),Ke().iR0,Ke().ffD(Ke().uY7)],render:(e,t)=>{const n="suggest"===me().MT.getMode(t.blocks[0]),i=(0,L().gh)({theme:t.environment.ThemeModeStore.state});return(0,g.jsx)(W().Z,{...e,title:(0,g.jsx)(r()._H,{...yt.suggestEditsName}),svg:j,right:(0,re().Sy)(i,n)})},action:e=>{const t="suggest"===me().MT.getMode(e.blocks[0])?"default":"suggest";"suggest"===t&&it().Z.reset(),H().t_({environment:e.environment,navigableBlockStore:e.blocks[0],mode:t,location:"page_more_actions"})},closeParentMenu:!0});function Pt(e){const{shouldRenderMobileRefresh:t}=e;return(0,re().cN)({key:"translate",displayName:yt.translate,analyticsName:"open_translate_bar_from_topbar",validators:[Ke().tpq,Ke().tIA],closeParentMenu:!0,render:(e,n,i)=>{let{onFocus:o}=i;const s=n.blocks.at(0);if(s)return(0,g.jsx)(be,{onFocus:o,closeParentMenu:()=>{it().Z.reset()},blockStore:s,menuListItemProps:e,title:(0,g.jsx)(r()._H,{...yt.translate}),shouldRenderMobileRefresh:t})},action:()=>{}})}function At(e){const{shouldRenderMobileRefresh:t}=e;return(0,re().cN)({key:"translate template",displayName:yt.translateTemplate,analyticsName:"open_translate_template_bar_from_topbar",validators:[Ke().S0S,Ke().tIA,Ke().ffD(Ke().uY7),Ke().ffD(Ke().NB0)],closeParentMenu:!0,render:(e,n,i)=>{let{onFocus:o}=i;const s=n.blocks.at(0);if(s)return(0,g.jsx)(Fe,{onFocus:o,closeParentMenu:()=>{it().Z.reset()},blockStore:s,menuListItemProps:e,title:(0,g.jsx)(r()._H,{...yt.translateTemplate}),shouldRenderMobileRefresh:t})},action:()=>{}})}const Rt=(0,re().cN)({key:"customize page",displayName:yt.customizePageLabel,analyticsName:yt.customizePageLabel.defaultMessage,svg:T().m,validators:[Ke().ffD(Ke().iBZ),Ke().U_8,Ke().ffD(Ke().uY7),Ke().or([Ke().ffD(Ke().YGm),Ke().f7f]),Ke().or([Ke().tqC,Ke().ffD(Ke().xks),Ke().sVB]),Ke().ffD(Ke().NB0)],closeParentMenu:!0,render:e=>(0,g.jsx)(W().Z,{...e,title:(0,g.jsx)(r()._H,{...yt.customizePageLabel}),svg:T().m}),action:e=>{n(593515).bA({originRect:e.originRect})}}),Zt=(0,re().cs)({key:"copy link to block non-desktop",displayName:re().RE.copyLinkNavigableTypeName,analyticsName:re().RE.copyLinkNavigableTypeName.defaultMessage,svg:_,shortcuts:["copyCurrentPageLinkifiedBlockTitle"],validators:[Ke().jlf,Ke().U7o,Ke().ffD(Ke().daU),Ke().ffD(Ke().uY7),Ke().ffD(Ke().NB0)],closeParentMenu:!0,action:(e,t)=>{const{lazyDependencies:{clipboardActions:n}}=e;n?n.copyLinkToBlock({...e,event:t}):p().log({data:{miscDataToConvertToString:{actionKey:"copy link to block non-desktop"}},from:"topbarMoreActionRegistry",level:"info",type:"lazyDependencies:missingClipboardActions"})}}),Bt=(0,re().cs)({key:"duplicate",displayName:re().RE.duplicateName,analyticsName:re().RE.duplicateName.defaultMessage,svg:n(200962).a,validators:[Ke().DFt,Ke().J5S,Ke().KEd,Ke().xks,Ke().ffD(Ke().P99(u().Ti.externalObjectInstancePage)),Ke().ffD(Ke().sVB),Ke().ffD(Ke().Q_M),Ke().ffD(Ke().uY7)],shortcuts:["duplicate"],closeParentMenu:!0,action:async(e,t)=>{let{environment:i}=e;const o=n(718959).np();if(!o)return;const s=o.getAssociatedCollectionStore();if(s&&(0,n(807230).ww)(i)){const e=new(n(972776).Z)(i);if(e.setContext({type:"collectionPage",collectionViewBlockStore:void 0,collectionStore:s}),(0,n(582835).vJ)(o,e))await n(236087).h5({environment:i,blocks:[o],collectionContextStore:e,useCrdt:(0,n(718048).WA)(s.getSpaceStore())});else{const{duplicateBlock:e}=await(0,n(577041).dF)();K().createAndCommit({userAction:"actionRegistry.duplicateToCollection",environment:i,canUndo:!0,perform:t=>{const[a,r]=e({environment:i,stores:[o],addCopyName:(0,n(924390).Z)(o),transaction:t,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!o.isInsideTemplate(),targetSpaceId:(0,n(81954).J)(s.pointer.spaceId),baseUrl:we().default.domainBaseUrl,publicDomainName:we().default.publicDomainName,preferDuplicateLocation:"local"}),l=a[0];U().zw({childStore:l,parentStore:s,transaction:t}),o.isTemplate()&&n(282662).R3({parentStore:s.getTemplatePagesStore(),appendStore:l,transaction:t}),N()._c({environment:i,store:l,pageVisitSource:c().tY.Duplicate})}})}}}}),Dt=(0,re().cN)({key:"open in mac app",displayName:yt.openinMacAppName,analyticsName:yt.openinMacAppName.defaultMessage,svg:Xe().h,validators:[Ke().U7o,Ke().ffD(Ke().tYA),Ke().ffD(Ke().tqC),Ke().V5r,Ke().ffD(Ke().NB0)],closeParentMenu:!0,action:(e,t)=>{let{blocks:n,environment:i}=e;const o=(0,We().ZP)({store:n[0],fullyQualified:!1,pageVisitSource:c().tY.AppRedirect,embedded:!1});F().RX({url:(0,ze().W)(o),environment:i})}}),Lt=(0,re().cN)({key:"open in windows app",displayName:yt.openinWindowsAppName,analyticsName:yt.openinWindowsAppName.defaultMessage,svg:Xe().h,validators:[Ke().U7o,Ke().ffD(Ke().tYA),Ke().ffD(Ke().tqC),Ke().EDF,Ke().ffD(Ke().NB0)],closeParentMenu:!0,action:(e,t)=>{let{blocks:n,environment:i}=e;const o=(0,We().ZP)({store:n[0],fullyQualified:!1,pageVisitSource:c().tY.AppRedirect,embedded:!1});F().RX({url:(0,ze().W)(o),environment:i})}}),Ot=(0,re().cN)({key:"open in ios app",displayName:yt.openiniOSAppName,analyticsName:yt.openiniOSAppName.defaultMessage,svg:Xe().h,validators:[Ke().U7o,Ke().ffD(Ke().tYA),Ke().gnQ,Ke().ffD(Ke().NB0)],closeParentMenu:!0,action:(e,t)=>{let{blocks:n,environment:i}=e;const o=(0,We().ZP)({store:n[0],fullyQualified:!1,pageVisitSource:c().tY.AppRedirect,embedded:!1});F().RX({url:o,environment:i})}}),Ht=(0,re().cN)({key:"open in android app",displayName:yt.openinAndroidAppName,analyticsName:yt.openinAndroidAppName.defaultMessage,svg:Xe().h,validators:[Ke().U7o,Ke().ffD(Ke().tYA),Ke().DtP,Ke().ffD(Ke().NB0)],closeParentMenu:!0,action:(e,t)=>{let{blocks:n,environment:i}=e;const o=(0,We().ZP)({store:n[0],fullyQualified:!1,pageVisitSource:c().tY.AppRedirect,embedded:!1});F().RX({url:o,environment:i})}}),Vt=(0,re().cN)({key:"open page updates",analyticsName:"Open page updates",displayName:yt.pageUpdates,svg:qe().r,validators:[n(78449).SO,Ke().tqC],closeParentMenu:!0,action:()=>{n(452002).Z.setState({open:!0})},disabled:()=>!pe().default.state.online&&ge().default.checkGate({gateName:"download_for_offline"})}),Ut=(0,re().cN)({key:"action page history",displayName:yt.pageHistoryName,analyticsName:yt.pageHistoryName.defaultMessage,svg:A,validators:[Ke().or([Ke()._Tt,Ke().k5s]),Ke().DFt,Ke().jlf,Ke().ffD(Ke().YO6),Ke().ffD(Ke().Q_M),Ke().ffD(Ke().Jtb),Ke().ffD(Ke().NB0)],closeParentMenu:!0,action:e=>{let{environment:t,blocks:i}=e;return n(932005).jN({environment:t,blockStore:i[0],from:"topbar"})},render:(e,t)=>{let{onClick:i,key:o,...s}=e,{environment:a}=t;return(0,g.jsx)(n(239823).Z,{requireUpgradeToTier:!1,analyticsName:"history_modal",onClick:i,alwaysAllowClick:!0,render:(e,t)=>{const n=ge().default.checkGate({gateName:"download_for_offline"})&&!pe().default.state.online;return(0,g.jsx)(W().Z,{...(0,Y().Z)(s,e),title:Ie().Z.formatMessage(yt.pageHistoryNewName),svg:A,dontShrinkRight:!0,right:t,tooltipText:n?Ie().Z.formatMessage(re().RE.unavailableOfflineTooltip):void 0,disabled:n,disabledFeedback:n})},renderUpgradeTooltip:()=>{}},o)}}),Et=(0,re().cN)({key:"view analytics",displayName:yt.viewAnalyticsName,analyticsName:yt.viewAnalyticsName.defaultMessage,svg:S,validators:[Ke().cFU,Ke().ffD(Ke().NB0)],closeParentMenu:!0,action:e=>{et().handleSidebarButtonClick(e.environment,e.blocks[0],tt().gY.Updates,"more_menu"),tt().default.setState({...tt().default.state,currentSubTab:tt().uF.Analytics})},disabled:()=>!pe().default.state.online&&ge().default.checkGate({gateName:"download_for_offline"}),renderTooltip:()=>Ie().Z.formatMessage(re().RE.unavailableOfflineTooltip),disableTooltip:()=>!(!pe().default.state.online&&ge().default.checkGate({gateName:"download_for_offline"}))}),Nt=(0,re().cN)({key:"view updates and analytics",displayName:yt.viewUpdatesAndAnalyticsName,analyticsName:yt.viewUpdatesAndAnalyticsName.defaultMessage,validators:[Ke().cFU,Ke().ffD(Ke().NB0)],svg:qe().r,closeParentMenu:!0,badge:(0,g.jsx)(q().Z,{newBadgeKey:"new_updates_top_bar_entrypoint",didUserEngage:Boolean(null===(rt=Be().default.state.currentUserSettingsStore)||void 0===rt||null===(rt=rt.getSettings())||void 0===rt?void 0:rt.opened_new_top_bar_updates_entrypoint)}),action:e=>{const{currentUserSettingsStore:t}=Be().default.state;t&&K().createAndCommit({environment:e.environment,userAction:"topbarMoreActonRegistry.openUpdatesAndAnalytics",canUndo:!0,perform:e=>{n(348141).d2({userSettingsStore:t,transaction:e,data:{opened_new_top_bar_updates_entrypoint:!0}})}}),et().handleSidebarButtonClick(e.environment,e.blocks[0],tt().gY.Updates,"more_menu")},disabled:()=>!pe().default.state.online&&ge().default.checkGate({gateName:"download_for_offline"}),renderTooltip:()=>Ie().Z.formatMessage(re().RE.unavailableOfflineTooltip),disableTooltip:()=>!(!pe().default.state.online&&ge().default.checkGate({gateName:"download_for_offline"}))});function Ft(e,t,n){var i;const o=(0,L().gh)({theme:e.ThemeModeStore.state});return(0,re().MV)({key:"notifications",displayName:yt.notifyMe,analyticsName:yt.notifyMe.defaultMessage,svg:x().t,right:(0,g.jsx)(g.Fragment,{children:null===(i=t.find((e=>e.isSelectedOption)))||void 0===i?void 0:i.action.displayName}),rightStyle:{color:o.lightTextColor,marginRight:5},width:300,initialFocus:t.findIndex((e=>e.isSelectedOption))??0,validators:[Ke().ffD(Ke().uY7),Ke().ffD(Ke().NB0)],subActions:()=>[(0,re().$J)({key:"notifications",render:e=>(0,g.jsx)(G().Z,{...e,shouldRenderMobileRefresh:!0}),actions:t.map((e=>{let{action:t}=e;return t}))})],hideSubActions:!0,shouldRenderMobileRefresh:n,fuzzySearchKeywordsArray:(0,O().oA)(t.map((e=>{let{action:t}=e;return t.displayName?Je().bf(t.displayName):void 0})))})}function Kt(e,t,n){return(0,re().$J)({key:"notifyMe",render:e=>(0,g.jsx)(G().Z,{...e,shouldRenderMobileRefresh:n}),actions:[Ft(e,t,n)]})}function zt(){const e="on"===ge().default.getEligibleGroup({experimentId:"remove_updates_topbar_button_v2",defaultGroup:"control",disableExposureLogging:!0});return(0,re().$J)({key:"editorActions",render:e=>(0,g.jsx)(G().Z,{...e,shouldRenderMobileRefresh:!0}),actions:(0,O().oA)([Vt,e?Nt:Et,Ut])})}const Wt=(0,re().cN)({key:"open import modal",displayName:yt.importName,analyticsName:yt.importName.defaultMessage,svg:n(934590).s,validators:[Ke().YZb,Ke().J5S,Ke().ffD(Ke().P99(u().Ti.externalObjectInstancePage)),Ke().ffD(Ke().Q_M),Ke().ffD(Ke().uY7)],closeParentMenu:!0,action:e=>{let{blocks:t}=e,i=!1;if(1===t.length){const[e]=t;i=e.isCollectionView()}i?n(825137).Z.setState({open:!0}):nt().default.setState({...nt().default.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:void 0,openedFrom:"topbar"})},disabled:()=>!pe().default.state.online&&ge().default.checkGate({gateName:"download_for_offline"}),renderTooltip:()=>Ie().Z.formatMessage(re().RE.unavailableOfflineTooltip),disableTooltip:()=>!(!pe().default.state.online&&ge().default.checkGate({gateName:"download_for_offline"}))}),qt=(0,re().cN)({key:"export block",displayName:yt.exportName,analyticsName:yt.exportName.defaultMessage,validators:[Ke().jlf,Ke().KbU,Ke().ffD(Ke().NB0)],closeParentMenu:!0,render:e=>{const t=!pe().default.state.online&&ge().default.checkGate({gateName:"download_for_offline"});return(0,g.jsx)(W().Z,{...e,svg:v,title:(0,g.jsx)(r()._H,{...yt.exportName}),tooltipText:t?(0,g.jsx)(r()._H,{...re().RE.unavailableOfflineTooltip}):(0,g.jsx)(r()._H,{...yt.exportCaption}),disabled:t,disabledFeedback:t})},action:e=>{let{blocks:t,environment:i}=e;const o=t[0];if(!o.isDefined())return;let s=!0;const a=(0,z().fm)(t[0]);if(a){const e=null==a?void 0:a.collectionStore();null!=e&&e.isPageTreeCollection()&&(s=!1)}n(174912).q$({environment:i,root:{id:o.id,table:"block",spaceId:o.getSpaceId()},isCollectionViewExportTypeSupported:s})}}),Gt=(0,re().cN)({key:"open page layout editor",displayName:yt.openPageLayoutEditor,analyticsName:yt.openPageLayoutEditor.defaultMessage,validators:[Ke().iBZ],closeParentMenu:!0,render:function(e){return(0,g.jsx)(W().Z,{...e,svg:w,title:(0,g.jsx)(ie().gq,{children:(0,g.jsx)(r()._H,{...yt.openPageLayoutEditor})})})},action:function(e){let t,i,o,s,{environment:a,blocks:r}=e;for(const n of r)if(n.isCollectionView()){const e=n.getCollectionStore();if(e){t=n,i=e;const a=(0,z().fm)(n);o=null==a?void 0:a.collectionViewStore(),s="customize_database_button_in_three_dot_menu";break}}else{const e=n.getAssociatedCollectionStore();if(e&&!e.isPageTreeCollection()){t=n,i=e,s="customize_page_button_in_three_dot_menu";break}}if(!i||!t||!s)throw new Error("Could not edit page layout: Could not find collection");n(142730).IR({environment:a,blockStore:t,collectionStore:i,collectionViewStore:o,from:s})}});const Yt=(0,re().cN)({key:"customize AI workflow",displayName:yt.customizeAIWorkflow,analyticsName:yt.customizeAIWorkflow.defaultMessage,validators:[Ke().fAV,Ke().YGm,Ke().J5S,Ke().ffD(Ke().p1d),Ke().ffD(Ke().ESL),Ke().ffD(Ke().f7f)],closeParentMenu:!0,render:function(e){return(0,g.jsx)(W().Z,{...e,svg:I().t,title:(0,g.jsx)(ie().gq,{children:(0,g.jsx)(r()._H,{...yt.customizeAIWorkflow})})})},action:function(e){let t,{environment:i,blocks:o}=e;for(const n of o)if(n.isCollectionView()){if(n.getCollectionStore()){t=(0,z().fm)(n);break}}else{const e=n.getAssociatedCollectionStore();if(e&&!e.isPageTreeCollection()){t=(0,z().fm)(n);break}}if(!t)throw new Error("Could not edit page layout: Could not find collection");n(452435).bM({environment:i,collectionContextStore:t})}});var $t=()=>n(148126),Xt=()=>n(270820),Qt=()=>n(985523),Jt=()=>n(149809),en=()=>n(740046),tn=()=>n(18748),nn=()=>n(508181),on=()=>n(912826);function sn(e){const{blockStore:t,onClickOriginRect:n,handleAccept:d,handleDismiss:c}=e,u=(0,o().O7)(),p=(0,o().Fy)(),m=(0,r().YB)(),[f,h]=(0,i.useState)(""),[y,v]=i.useState(!1),x=(0,s().VK)((()=>({environment:u,blocks:[t],originRect:n,publicEditMode:void 0})),[u,t,n]),{initialSections:b,filterSections:S}=(0,s().VK)((()=>({initialSections:vt({environment:u,context:x,isFiltering:!1}),filterSections:vt({environment:u,context:x,isFiltering:!0})})),[u,x]),M=(0,s().VK)((()=>0===f.length&&!t.isCollectionView()&&t.canEdit()&&t.hasContent()),[t,f]),j=(0,s().VK)((()=>0===f.length&&t.canEdit()),[t,f.length]),C=(0,s().VK)((()=>t.canEdit()&&t.isCollectionView()),[t]),w=(0,a().yK)((e=>({caption:{color:e.lightTextColor},icon:{color:e.icon.secondary,width:16,height:16},menuPropIcon:{color:e.accentColors.gray[500]}})),[]),k=(0,g.jsxs)(g.Fragment,{children:[M&&!j&&(0,g.jsx)(tn().ZP,{caption:(0,g.jsx)("span",{style:w.caption,children:(0,g.jsx)(r()._H,{id:"pageMoreButton.wordCount.caption",defaultMessage:"Word count: {count}",values:{count:(0,g.jsx)(on().Z,{store:t})}})})}),j&&(0,g.jsx)("div",{style:{marginBottom:1},children:(0,g.jsx)(Qt().y,{store:t,isPageMoreButton:!0,showWordCount:M,shouldRenderMobileRefresh:!0})})]}),_=p.isMobile?{menuType:ue().o.Modal,title:(0,g.jsx)(r()._H,{defaultMessage:"Actions",id:"topbarMoreButton.mobileActionsMenu.title"}),right:y&&(0,g.jsx)(ye().MobileModalExitButton,{}),leftRightButtonStyle:w.menuPropIcon,onClickRight:c,titleOuterStyle:{fontSize:17,fontWeight:l().Ue.bold},onSwipeDown:y?()=>v(!1):c,paddingTop:10,shouldRenderMobileRefresh:!0,isFullScreen:y,setIsFullScreen:v}:{menuType:ue().o.Popup,maxHeight:"80vh"};return(0,g.jsxs)(he().Z,{..._,children:[!p.isMobile&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(G().Z,{isInput:!0,style:{marginBottom:4,marginTop:4},children:(0,g.jsx)(en().ZP,{value:f,onChange:e=>h(e.target.value),focus:!0,focusAfterAnimation:!0,placeholder:m.formatMessage({defaultMessage:"Search actions…",id:"topbarMenu.filterForActions.placeholder"}),preventCaptureDeleteWhenEmpty:!0,inputLeft:(0,Xt().R)({...w.icon}),showClearButton:!0})}),(0,g.jsx)(G().Z,{style:{paddingTop:0,paddingBottom:0},children:(0,g.jsx)(Jt().Z,{sections:b,filterSections:S,onAccept:d,context:x,filter:f,showNoResultsMessage:!0,initialFocus:f.length>0?0:void 0})})]}),p.isMobile&&(0,g.jsx)(Jt().Z,{sections:b,onAccept:d,context:x}),(M||j)&&(p.isMobile?(0,g.jsx)(g.Fragment,{children:k}):(0,g.jsx)(G().Z,{topBorder:!0,children:k})),C&&(0,g.jsx)(an,{})]})}function an(){return(0,g.jsx)(G().Z,{topBorder:!0,children:(0,g.jsx)(nn().Z,{title:(0,g.jsx)(r()._H,{defaultMessage:"Learn about databases",id:"topbar.moreButton.collectionHelpButton"}),href:(0,$t().UY)("guides.database"),analyticsFrom:"topbar_more_button"})})}},83340:(e,t,n)=>{n.r(t),n.d(t,{PageAnalyticsPageOptOut:()=>v,TopbarPageAnalyticsOptOutMenu:()=>y,TopbarPageAnalyticsOptOutMenuStore:()=>h});n(667294);var i=()=>n(219727),o=()=>n(142735),s=()=>n(788860),a=()=>n(261930),r=()=>n(148126),l=()=>n(998901),d=()=>n(104088),c=()=>n(876822),u=()=>n(78078),p=()=>n(967092),m=()=>n(765513),g=()=>n(579807),f=n(785893);const h=n(263184).default.createValue({isOpen:!1,rect:void 0},{name:"TopbarPageAnalyticsOptOutMenuStore"});function y(){const e=(0,i().O7)(),t=(0,o().VK)((()=>h.state.isOpen),[]),n=(0,o().VK)((()=>h.state.rect),[]),a=(0,o().VK)((()=>c().default.state.mainEditorCurrentBlockStore),[]);return a?(0,f.jsx)(p().ZP,{popupType:e.device.isMobile?d().k.SlideUp:d().k.Popup,alignmentToOrigin:l().Alignment.Center,open:t,render:()=>(0,f.jsx)("div",{style:{minWidth:360,padding:16},children:(0,f.jsxs)(u().sg,{gap:16,children:[(0,f.jsx)("div",{style:{fontSize:16,fontWeight:500},children:(0,f.jsx)(s()._H,{id:"TopbarPageAnalyticsOptOutMenu.heading",defaultMessage:"Privacy settings"})}),(0,f.jsx)(v,{store:a})]})}),originRect:n,onDismiss:()=>h.setState({isOpen:!1,rect:void 0})}):null}function v(e){const t=(0,i().O7)(),n=(0,o().VK)((()=>{const e=c().default.state.currentSpaceViewStore;return null==e?void 0:e.getSettings()}),[]),l=(0,o().VK)((()=>{const t=null==n?void 0:n.page_analytics_opt_out_list;return null==t?void 0:t.includes(e.store.id)}),[n,e.store.id]);return(0,f.jsx)(g().Z,{type:"dropdown",currentOption:l?"do_not_record":"record",options:[{key:"record",label:(0,f.jsx)(s()._H,{id:"page_analytics.opt_out.record",defaultMessage:"Record"})},{key:"do_not_record",label:(0,f.jsx)(s()._H,{id:"page_analytics.opt_out.do_not_record",defaultMessage:"Don't record"})}],onSelectOption:n=>{"do_not_record"===n?a().kY(t,e.store.id):a().pu(t,e.store.id)},isMobile:t.device.isMobile,title:(0,f.jsx)(s()._H,{id:"page_analytics.opt_out.title",defaultMessage:"My view history"}),caption:(0,f.jsx)(s()._H,{id:"page_analytics.opt_out.caption",defaultMessage:"Page editors can see my view history for this page. <inlinelink>Learn more</inlinelink>.",values:{inlinelink:e=>(0,f.jsx)(m().Z,{external:!0,href:(0,r().UY)("guides.pageAnalytics"),children:e})}}),captionStyle:{maxWidth:270}})}},64741:(e,t,n)=>{n.r(t),n.d(t,{TopbarShareButton:()=>E});var i=n(667294),o=()=>n(219727),s=()=>n(142735),a=()=>n(846550),r=()=>n(788860),l=()=>n(358414),d=()=>n(247724),c=()=>n(164079),u=()=>n(683630),p=n(785893);const m=(0,n(827282).IU)("mobileQuickCaptureShare",{viewBox:"0 0 14 17",svg:(0,p.jsx)("path",{d:"M3.05566 15.8516C2.29915 15.8516 1.72266 15.6556 1.32617 15.2637C0.934245 14.8763 0.738281 14.3066 0.738281 13.5547V6.89648C0.738281 6.14453 0.934245 5.57487 1.32617 5.1875C1.72266 4.79557 2.29915 4.59961 3.05566 4.59961H4.9834V6.12402H3.17871C2.87793 6.12402 2.64779 6.2015 2.48828 6.35645C2.33333 6.50684 2.25586 6.73926 2.25586 7.05371V13.3975C2.25586 13.7119 2.33333 13.9466 2.48828 14.1016C2.64779 14.2565 2.87793 14.334 3.17871 14.334H10.8145C11.1107 14.334 11.3385 14.2565 11.498 14.1016C11.6576 13.9466 11.7373 13.7119 11.7373 13.3975V7.05371C11.7373 6.73926 11.6576 6.50684 11.498 6.35645C11.3385 6.2015 11.1107 6.12402 10.8145 6.12402H9.0166V4.59961H10.9443C11.7008 4.59961 12.2751 4.79557 12.667 5.1875C13.0635 5.57943 13.2617 6.14909 13.2617 6.89648V13.5547C13.2617 14.3021 13.0635 14.8717 12.667 15.2637C12.2751 15.6556 11.7008 15.8516 10.9443 15.8516H3.05566ZM6.99316 10.335C6.80176 10.335 6.6377 10.2666 6.50098 10.1299C6.36426 9.99316 6.2959 9.83138 6.2959 9.64453V2.84961L6.35742 1.84473L5.96094 2.35742L5.05859 3.32129C4.93555 3.45345 4.7806 3.51953 4.59375 3.51953C4.42513 3.51953 4.2793 3.46484 4.15625 3.35547C4.03776 3.24154 3.97852 3.09798 3.97852 2.9248C3.97852 2.7653 4.04232 2.61947 4.16992 2.4873L6.45312 0.292969C6.54883 0.201823 6.63997 0.140299 6.72656 0.108398C6.81315 0.0719401 6.90202 0.0537109 6.99316 0.0537109C7.08887 0.0537109 7.18001 0.0719401 7.2666 0.108398C7.35775 0.140299 7.44889 0.201823 7.54004 0.292969L9.82324 2.4873C9.95085 2.61947 10.0146 2.7653 10.0146 2.9248C10.0146 3.09798 9.95312 3.24154 9.83008 3.35547C9.70703 3.46484 9.56348 3.51953 9.39941 3.51953C9.21712 3.51953 9.06445 3.45345 8.94141 3.32129L8.03223 2.35742L7.64258 1.84473L7.69727 2.84961V9.64453C7.69727 9.83138 7.62891 9.99316 7.49219 10.1299C7.36003 10.2666 7.19368 10.335 6.99316 10.335Z"})});var g=()=>n(803728),f=()=>n(878797),h=()=>n(365872),y=()=>n(845465),v=()=>n(681832),x=()=>n(589525),b=()=>n(998901),S=()=>n(804217),M=()=>n(749826),j=()=>n(448419),C=()=>n(64260),w=()=>n(92175),k=()=>n(967092),_=()=>n(654133),T=()=>n(568017),I=()=>n(518530),P=()=>n(628370),A=()=>n(1910),R=()=>n(577741);function Z(e){const{visible:t,onDismiss:n}=e,i=(0,a().yK)((e=>({overlayContainer:{position:"relative",width:240,height:140,paddingTop:0,paddingBottom:20,paddingLeft:20,paddingRight:20},container:{fontSize:12,color:T().ZP.white,position:"absolute",top:13,background:T().ZP.blue,borderRadius:6,padding:"8px 12px 12px 12px",width:200,boxShadow:e.largeLightBoxShadow,zIndex:9999},circle:{position:"absolute",top:-12,left:"calc(50% - 2.5px)",background:T().ZP.blue,width:5,height:5,borderRadius:5,boxShadow:`0 0 0 1.5px ${e.contentBackground}`},verticalLine:{position:"absolute",top:-12,left:"calc(50% - 1px)",background:T().ZP.blue,width:2,height:12},textContainer:{width:"90%",fontWeight:500},iconButton:{position:"absolute",top:4,right:4,opacity:.8},iconStyle:{width:12,fill:T().ZP.white}})),[]);return(0,p.jsx)("div",{style:i.overlayContainer,children:(0,p.jsx)(P().Z,{visible:t,animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},style:i.container,children:(0,p.jsxs)(R().P,{calloutId:"share_button_tooltip",children:[(0,p.jsx)("div",{style:i.circle}),(0,p.jsx)("div",{style:i.verticalLine}),(0,p.jsx)("div",{style:i.textContainer,children:(0,p.jsx)(r()._H,{defaultMessage:"You can share your content with your teammates here",id:"shareButtonIntroTooltip.title"})}),(0,p.jsx)(A().Z,{icon:I().U,style:i.iconButton,iconStyle:i.iconStyle,onClick:()=>n()})]})})})}var B=()=>n(265456),D=()=>n(596986);const L=(0,r().vU)({share:{defaultMessage:"Share",id:"topbar.share"}});function O(e){let{store:t,buttonPopupStore:r,styling:d}=e;const c=(0,o().O7)(),{isMobile:u,isTablet:m}=(0,s().VK)((()=>({isMobile:c.device.isMobile,isTablet:c.device.isTablet})),[c]),g=(0,s().qz)(void 0,n(136765).Z),f=(0,s().qz)(void 0,n(257934).ZP),x=(0,s().qz)(void 0,n(885414).Z),b=(0,s().VK)((()=>function(e,t){if(t.shouldUserHaveAccessToPrivatePageBlock()&&t.state.changePermissionsEnabled&&t.state.privatePageStore&&t.state.privatePageStore.id===e.id)return t.state.privatePageStore;return e}(t,x)),[t,x]),S=(0,s().VK)((()=>(0,n(779733).wZ)({disableLogging:!0})),[]),C=(0,s().VK)((()=>t.canAdmin()),[t]),w=(0,s().VK)((()=>!u&&function(e,t){const{permissionsInviteStore:n}=e.state;return n.state.inviteTargets.length>0||t.state.inviteTargets.length>0}(g,f)),[f,u,g]),{isPrivatePageInfoGateEnabled:k,sudoModeStoreId:_}=(0,s().VK)((()=>{var e;const t=null===(e=x.state.privatePageStore)||void 0===e?void 0:e.id;return{isPrivatePageInfoGateEnabled:M().default.checkGate({gateName:"enable_get_private_page_info_endpoint"}),sudoModeStoreId:t}}),[x]),T=(0,s().VK)((()=>n(876822).default.state.currentSpaceStore),[]);(0,i.useEffect)((()=>{!function(e){var t;let{environment:n,store:i,sudoModeStore:o,canAdmin:s,currentSpaceStore:a}=e;null!==(t=o.state.privatePageStore)&&void 0!==t&&t.id&&o.state.privatePageStore.id!==i.id&&o.reset();s||l().i({environment:n,sudoModeStore:o,pageBlockId:i.id,currentSpaceStore:a})}({environment:c,sudoModeStore:x,store:t,canAdmin:C,currentSpaceStore:T})}),[C,c,t,x,k,_,T]),(0,i.useEffect)((()=>{v().default.setState({...v().default.state,isInitialized:!0})}));const I=(0,i.useCallback)((()=>{r.reset()}),[r]),P=(0,i.useCallback)((()=>{U({buttonPopupStore:r,universalMemberInviteStore:g,inviteTargetsStore:f}),n(879952).ZH({environment:c}),h().lG(c),c.currentUser.isLoggedIn()&&n(576387).bi(c)}),[r,g,f,c]),A=(0,i.useCallback)((e=>(0,p.jsx)(H,{buttonPopupEvents:e,styling:d,handleClick:P})),[P,d]),R=(0,i.useCallback)((async()=>{if(f.state.inviteTargets.length>0){return void(await h().zd({environment:c,inviteTargetsStore:f})&&(h().a6(c),U({buttonPopupStore:r,universalMemberInviteStore:g,inviteTargetsStore:f})))}const{permissionsInviteStore:e}=g.state;"invitee"===e.state.inputFocus&&e.setState({...e.state,inputFocus:"none"});await(0,n(88476).Aw)({environment:c,permissionsInviteStoreState:e.state,from:"share_menu"})||(h().a6(c),U({buttonPopupStore:r,universalMemberInviteStore:g,inviteTargetsStore:f}))}),[r,c,f,g]),Z=(0,a().yK)((e=>({buttonPopup:{...u?{width:"100%"}:m?{width:460}:{width:S?y().SD:500,overflow:"hidden",...S&&{borderRadius:y().q5,boxShadow:e.lightMediumElevationBoxShadow,..."dark"===e.mode&&{border:`1px solid ${e.largePopupBorder}`}}}}})),[u,S,m]);return(0,p.jsx)(j().ZP,{popupType:u?j().Z4.SlideUp:j().Z4.Popup,forceInitialInbound:!0,buttonPopupStore:r,renderOrigin:A,originGap:u?void 0:8,style:Z.buttonPopup,onClick:P,render:()=>(0,p.jsx)(n(886123)._,{buttonPopupStore:r,sudoModeStore:x,store:b,inviteTargetsStore:f,universalMemberInviteStore:g,onUpgradeButtonClick:I,location:u?"topbar_mobile":"topbar_share_button",onClose:R}),persistOnClose:w,onDismiss:R,onClose:R})}function H(e){let{buttonPopupEvents:t,styling:n,handleClick:l}=e;const{isMobile:d}=(0,o().Fy)(),u=(0,s().VK)((()=>!S().default.state.online&&M().default.checkGate({gateName:"download_for_offline"})),[]),m=(0,s().VK)((()=>M().default.checkGate({gateName:"sharing_anyone_with_the_link"})&&(0,x().pW)()),[]),g=(0,a().yK)((e=>({shortcut:{color:e.mediumInvertedTextColor}})),[]),f=(0,i.useCallback)((()=>u?(0,p.jsx)(r()._H,{defaultMessage:"Unavailable while offline",id:"topbar.shareButton.offlineTooltip"}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{children:m?(0,p.jsx)(r()._H,{defaultMessage:"Share",id:"topbar.shareButton.tooltipAWTL"}):(0,p.jsx)(r()._H,{defaultMessage:"Share or publish to the web",id:"topbar.shareButton.tooltip"})}),(0,p.jsx)(C().Z,{style:g.shortcut,name:"openShareMenu"})]})),[u,m,g.shortcut]);return(0,p.jsx)(_().Z,{disableTooltip:d,renderTooltip:f,placement:b().Placement.Bottom,delayThreshold:400,render:e=>(0,p.jsx)(V,{events:(0,c().Z)(e,t),styling:n,handleClick:l,disabled:u})})}function V(e){let{events:t,styling:n,handleClick:l,disabled:h}=e;const y=(0,o().O7)(),{isMobile:v}=(0,o().Fy)(),x=(0,r().YB)(),S=(0,a().yK)((e=>{const t=(0,B().Kh)(e),i=(0,D().F_)(e);return{mobileIconStyle:t[n??"mobile_horizon1_quick_capture"].iconStyle,shareButton:{...v?t[n??"mobile_horizon1_quick_capture"].iconContainer:{marginRight:i.iconButton.marginRight,marginLeft:i.iconButton.marginRight}},popup:{boxShadow:"none",backgroundColor:"rgba(0, 0, 0, 0)"}}}),[v,n]);const M=v?"mobile_horizon1_quick_capture_circle_icons"===n?m(S.mobileIconStyle):(0,u().s)(S.mobileIconStyle):(0,p.jsx)(r()._H,{defaultMessage:"Share",id:"topbar.shareButton.title"});(0,i.useEffect)((()=>{g().yM(y,"share_button_tooltip")}),[y]);const j=(0,s().VK)((()=>f().default.isVisible("share_button_tooltip")),[]),C=(0,i.useCallback)((()=>{g().Gi(y,"share_button_tooltip")}),[y]),_=(0,i.useCallback)((()=>(0,p.jsx)(Z,{visible:!0,onDismiss:C})),[C]),T=(0,p.jsx)(w().Z,{id:void 0,className:d().MD7,...(0,c().Z)(t,{onClick:C}),mobileFeedback:v,style:S.shareButton,"aria-label":x.formatMessage(L.share),disabled:h,disabledFeedback:h,children:M});return j?(0,p.jsx)(k().ZP,{popupType:k().kQ.Popup,open:!0,origin:T,placementToOrigin:b().Placement.Bottom,alignmentToOrigin:b().Alignment.Center,preventScaleTransition:!0,preventOpacityTransition:!0,viewportPadding:4,preventCaptureEsc:!0,preventPointerEvents:!1,disableMouseCapture:!0,render:_,style:S.popup}):T}function U(e){let{buttonPopupStore:t,universalMemberInviteStore:n,inviteTargetsStore:i}=e;t.reset(),n.reset(),i.reset()}const E=i.memo(O)},496669:(e,t,n)=>{n.r(t),n.d(t,{TopbarStopSuggestModeButton:()=>C});var i=n(667294),o=()=>n(219727),s=()=>n(142735),a=()=>n(846550),r=()=>n(788860),l=()=>n(244540),d=()=>n(348141),c=()=>n(442531),u=()=>n(45909),p=()=>n(677559),m=()=>n(688049),g=()=>n(275023),f=()=>n(590972),h=()=>n(998901),y=()=>n(876822),v=()=>n(725751),x=()=>n(154186),b=()=>n(905263),S=n(785893);const M=(0,r().vU)({stopSuggestRole:{defaultMessage:"Turn off suggesting",id:"topbar.stopsuggestmodel."},tooltip:{defaultMessage:"You’re suggesting",id:"topbarStopSuggestModeButton.tooltip"},tooltipCommentOnlyContent:{defaultMessage:"Suggest edits or add comments",id:"topbarStopSuggestModeButton.tooltipCommentOnlyContent"}});function j(e){let{store:t,isVisible:n,compact:d,framerMotion:c}=e;const p=(0,o().O7)(),h=(0,r().YB)(),y=(0,s().VK)((()=>Boolean(v().default.state.isShowingTabBar)),[]),b=(0,s().VK)((()=>f().default.state.expanded),[]),j=(0,a().yK)((e=>({button:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:256,color:e.text.uiBluePrimary,gap:0,height:28,background:e.accentColors.uiBlue[100],...(0,u().X)({noDrag:p.device.isElectron&&!y})},hoveredButton:{background:e.accentColors.uiBlue[200]},pressedButton:{background:e.accentColors.uiBlue[300]},suggestionIcon:{height:18,width:18,marginLeft:9,marginRight:7},text:{fontSize:14,lineHeight:1.428,marginRight:7},closeIcon:{height:14,width:14,fill:e.text.uiBlueSecondary,marginRight:9}})),[p.device.isElectron,y]),C=(0,i.useCallback)((()=>{l().t_({environment:p,navigableBlockStore:t,mode:"default",location:"stop_suggest_pill"})}),[p,t]),k=(0,i.useRef)(null),{AnimatePresence:_,motion:T}=c;return(0,S.jsx)(_,{children:n&&(0,S.jsxs)(T.div,{ref:k,initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:{duration:.1},children:[(0,S.jsxs)(x().Z,{style:j.button,hoveredStyle:j.hoveredButton,pressedStyle:j.pressedButton,onClick:C,ariaLabel:h.formatMessage(M.stopSuggestRole),children:[(0,g().I)(j.suggestionIcon),(0,S.jsx)(_,{initial:b,children:!d&&!b&&(0,S.jsx)(T.div,{initial:{width:0},exit:{width:0},animate:{width:"auto"},transition:{duration:.1},style:j.text,children:(0,S.jsx)(r()._H,{id:"topbar.stopsuggestmodel.label",defaultMessage:"Suggesting"})})}),(0,m().D)(j.closeIcon)]},"button"),!d&&!b&&(0,S.jsx)(w,{store:t,origin:k})]})})}function C(e){const{value:t}=(0,p().XJ)(c().io);return t?(0,S.jsx)(j,{...e,framerMotion:t}):null}function w(e){const{store:t,origin:n}=e,a=(0,r().YB)(),l=(0,o().O7)(),c=(0,s().VK)((()=>t.isCommentOnly()),[t]),u=(0,s().VK)((()=>{var e;return null===(e=y().default.state.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.dismissed_suggest_mode_tooltip}),[]),p=c||!u,[m,g]=(0,i.useState)(p);return m?(0,S.jsx)(b().U,{origin:n,alignmentToOrigin:h().Alignment.Center,placementToOrigin:"bottom",header:(0,S.jsx)(S.Fragment,{children:a.formatMessage(M.tooltip)}),content:c?a.formatMessage(M.tooltipCommentOnlyContent):null,headerStyle:{marginBottom:-2,width:"max-content",maxWidth:240},contentStyle:{width:"max-content",maxWidth:240},hideCloseButton:!0,shouldDismissUponOutsideClick:!0,onCloseClick:()=>{g(!1),d().g2({environment:l,dismissed:!0})},pointerPosition:"50%",pointerLength:24}):null}},902569:(e,t,n)=>{n.d(t,{I:()=>y});n(267602),n(653476),n(241792);var i=n(667294),o=()=>n(219727),s=()=>n(846550),a=()=>n(283848),r=()=>n(416403),l=()=>n(594546),d=()=>n(352230),c=()=>n(733641),u=()=>n(827973),p=()=>n(198829),m=()=>n(255577),g=()=>n(388284),f=()=>n(868744),h=n(785893);function y(e){const{onSelectTargetLanguage:t,onSelectSourceLanguage:n,editorModeConfigTranslateState:y,sourceLanguage:v,detectedPageLanguage:x,preferredLanguage:b,subMenuPlacement:S,subMenuAlignment:M,shouldRenderMobileRefresh:j,pageId:C}=e,w=(0,o().O7)(),k=(0,o().Fy)(),_="loading"===y.status,T=(0,s().yK)((e=>({menuItemSectionBottomBorder:{boxShadow:`${e.regularDividerColor} 0px 1px 0px`},button:{color:_?e.lightTextColor:e.regularTextColor}})),[_]),I=(0,i.useMemo)((()=>{const e=[...r().RY];if(x){const t=e.indexOf(x);t>=0&&e.splice(t,1),e.unshift(x)}return e}),[x]);return(0,i.useEffect)((()=>{if("pre_activation"===y.status){const e=setTimeout((()=>{(0,l().j)({environment:w,event:{eventName:"translate_page_interaction",eventProperties:{type:"action_menu_rendered",page_id:C}}})}),750);return()=>clearTimeout(e)}}),[y.status,C,w]),(0,h.jsx)(m().Z,{initialFocus:void 0,type:m().i.Vertical,sections:[{key:"sourceLanguage",render:e=>(0,h.jsx)(g().Z,{...e,title:"From",desktopTitleStyle:{marginLeft:2,marginRight:2},style:T.menuItemSectionBottomBorder,shouldRenderMobileRefresh:j}),items:[{key:v,render:(e,t)=>{let{onFocus:i}=t;return(0,h.jsx)(f().Z,{...e,onFocus:i,disableDefaultClick:!0,placementToOrigin:S,alignmentToOrigin:M,renderOrigin:(e,t)=>(0,h.jsx)(u().Z,{...e,disabled:_,buttonStyle:T.button,ref:t,title:(0,a().E)(v),caption:v===x?"Detected language":v===b?"Preferred language":void 0}),renderExtension:(e,t)=>{const i=k.isMobile?{menuType:d().o.ActionSheet,...e}:{menuType:d().o.Popup,width:200,...e};return(0,h.jsx)(p().Z,{...i,onClick:e=>{e.preventDefault()},children:(0,h.jsx)(m().Z,{initialFocus:void 0,type:m().i.Vertical,sections:[{key:"originalLanguage",render:e=>(0,h.jsx)(g().Z,{...e}),items:I.filter((e=>void 0===y.targetLanguage||y.targetLanguage!==e)).map((e=>({key:e,render:(t,n)=>(0,h.jsx)(u().Z,{...t,disabled:_,buttonStyle:T.button,title:(0,a().E)(e),right:v===e?(0,c().k)({width:14,height:14}):void 0}),action:()=>{_||n({sourceLanguage:e})}})))}]})})}})},action:()=>{}}]},{key:"selectLanguage",render:e=>(0,h.jsx)(g().Z,{...e,title:"To",desktopTitleStyle:{marginLeft:2,marginRight:2},shouldRenderMobileRefresh:j}),items:r().Gx.filter((e=>e!==v)).map((e=>({key:e,render:(t,n)=>(0,h.jsx)(u().Z,{...t,buttonStyle:T.button,disabled:_,title:(0,a().E)(e),right:y.targetLanguage===e?(0,c().k)({width:14,height:14}):void 0}),action:()=>{_||t({targetLanguage:e})}})))}]})}},259098:(e,t,n)=>{n.d(t,{IR:()=>m,Rc:()=>d,Wc:()=>r,eN:()=>u,nL:()=>s});var i=()=>n(788860);const o=(0,i().vU)({expanded:{id:"customizePageMenuVisibilitySelect.expanded.label",defaultMessage:"Expanded"},off:{id:"customizePageMenuVisibilitySelect.off.label",defaultMessage:"Off"}}),s={section_show:o.expanded,section_collapsed:o.expanded,section_hide:o.off},a=(0,i().vU)({default:{id:"customizePageMenuVisibilitySelect.default.label",defaultMessage:"Default"},minimal:{id:"customizePageMenuVisibilitySelect.minimal.label",defaultMessage:"Minimal"}}),r={inline:a.default,minimal:a.minimal},l=(0,i().vU)({showOnHover:{id:"visibilityLevelMessages.backlinksPageSection.showOnHover",defaultMessage:"Show on hover"},alwaysShow:{id:"visibilityLevelMessages.backlinksPageSection.alwaysShow",defaultMessage:"Always show"},off:{id:"customizePageMenuVisibilitySelect.off.label",defaultMessage:"Off"}}),d={always_show:l.alwaysShow,section_show:l.showOnHover,section_collapsed:l.showOnHover,section_hide:l.off,inline:l.off,minimal:l.off},c=(0,i().vU)({asPageSection:{id:"customizePageMenuVisibilitySelect.section.label",defaultMessage:"As page section"},minimal:{id:"visibilityLevelMessages.propertyPageSection.minimal",defaultMessage:"Minimal"}}),u={inline:c.asPageSection,minimal:c.minimal},p=(0,i().vU)({alwaysShow:{id:"customizePageMenuVisibilitySelect.show.label",defaultMessage:"Always show"},alwaysHide:{id:"customizePageMenuVisibilitySelect.hide.label",defaultMessage:"Always hide"},hideWhenEmpty:{id:"customizePageMenuVisibilitySelect.hideIfEmpty.label",defaultMessage:"Hide when empty"},asPageSection:{id:"customizePageMenuVisibilitySelect.section.label",defaultMessage:"As page section"}}),m={show:p.alwaysShow,hide:p.alwaysHide,hide_if_empty:p.hideWhenEmpty,section:p.asPageSection}},550757:(e,t,n)=>{n.d(t,{K1:()=>y,Xv:()=>b,YV:()=>h,h9:()=>x,pb:()=>v});n(267602),n(653476),n(241792),n(667294);var i=()=>n(219727),o=()=>n(846550),s=()=>n(109477),a=()=>n(788860),r=()=>n(670655),l=()=>n(352230),d=()=>n(15409),c=()=>n(827973),u=()=>n(198829),p=()=>n(255577),m=()=>n(388284),g=()=>n(259098),f=n(785893);function h(e){const{currentVisibility:t,propertySchema:n,onSelect:i,onClose:o}=e;let l=[...s().AX];l=l.filter((e=>"section"!==e)),(0,r().kq)({propertySchema:n})||(l=l.filter((e=>"hide_if_empty"!==e)));const d=l.map((e=>({visibility:e,label:(0,f.jsx)(a()._H,{...g().IR[e]})})));return(0,f.jsx)(S,{currentVisibility:t,visibilityLevelsWithLabels:d,onSelect:i,onClose:o})}function y(e){const{currentVisibility:t,onSelect:n,onClose:i}=e,o=(0,r().AN)(t),s=["always_show","section_collapsed","section_hide"].map((e=>({visibility:e,label:(0,f.jsx)(a()._H,{...g().Rc[e]})})));return(0,f.jsx)(S,{currentVisibility:o,visibilityLevelsWithLabels:s,onSelect:n,onClose:i})}function v(e){const{currentVisibility:t,onSelect:n,onClose:i}=e,o=s().UR.filter((e=>"section_hide"!==e)).map((e=>({visibility:e,label:(0,f.jsx)(a()._H,{...g().eN[e]})}))),r="section_hide"===t?void 0:t;return(0,f.jsx)(S,{currentVisibility:r,visibilityLevelsWithLabels:o,onSelect:n,onClose:i})}function x(e){const{currentVisibility:t,onSelect:n,onClose:i}=e,o=s().uH.filter((e=>"section_collapsed"!==e)).map((e=>({visibility:e,label:(0,f.jsx)(a()._H,{...g().nL[e]})}))),r="section_collapsed"===t?"section_show":t;return(0,f.jsx)(S,{currentVisibility:r,visibilityLevelsWithLabels:o,onSelect:n,onClose:i})}function b(e){const{currentVisibility:t,onSelect:n,onClose:i}=e,o=s().iK.map((e=>({visibility:e,label:(0,f.jsx)(a()._H,{...g().Wc[e]})})));return(0,f.jsx)(S,{currentVisibility:t,visibilityLevelsWithLabels:o,onSelect:n,onClose:i})}function S(e){const{currentVisibility:t,visibilityLevelsWithLabels:n,onSelect:o,onClose:s}=e,r=(0,i().Fy)(),d=n.map((e=>{let{visibility:n,label:i}=e;return{key:n,render:e=>(0,f.jsx)(M,{buttonMenuItemProps:e,isChecked:n===t,label:i}),action:()=>{o(n),s&&s()}}})),c=[{key:"visibilityLevels",render:e=>(0,f.jsx)(m().Z,{...e,topBorder:0!==e.index}),items:d}];let g;return g=r.isMobile?{menuType:l().o.Modal,title:(0,f.jsx)(a()._H,{id:"customizePageMenuVisibilitySelect.mobile.title",defaultMessage:"Select visibility"}),right:(0,f.jsx)(a()._H,{id:"customizePageMenuVisibilitySelect.mobile.doneButton.label",defaultMessage:"Done"}),onClickRight:()=>s&&s()}:{menuType:l().o.Popup,width:"auto",maxWidth:360},(0,f.jsx)(u().Z,{...g,children:(0,f.jsx)(p().Z,{type:p().i.Vertical,initialFocus:void 0,sections:c})})}function M(e){const{buttonMenuItemProps:t,label:n,isChecked:s}=e,{isMobile:a}=(0,i().Fy)(),r=(0,o().yK)((()=>({title:{display:"flex",alignItems:"center",width:150},checkedIcon:{width:a?16:14}})),[a]),l=(0,f.jsx)("div",{style:r.title,children:n}),u=(0,f.jsx)("div",{style:r.checkedIcon,children:(0,d().e)()});return(0,f.jsx)(c().Z,{...t,textWrapperStyle:{marginRight:0},title:l,right:s?u:void 0})}},706003:(e,t,n)=>{n.d(t,{GY:()=>m,k7:()=>g,nm:()=>p});n(667294);var i=()=>n(219727),o=()=>n(846550),s=()=>n(788860),a=()=>n(615634),r=()=>n(448419),l=()=>n(92175),d=()=>n(259098),c=()=>n(550757),u=n(785893);function p(e){const{buttonPopupStore:t,disabled:n,currentVisibility:i}=e,o=(0,u.jsx)(s()._H,{...d().Rc[i]});return(0,u.jsx)(f,{disabled:n,buttonPopupStore:t,currentVisibilityLabel:o,renderVisibilityLevelsMenu:t=>(0,u.jsx)(c().K1,{...e,onClose:()=>{var n;null===(n=e.onClose)||void 0===n||n.call(e),t.close()}})})}function m(e){const{buttonPopupStore:t,disabled:n,currentVisibility:i}=e,o=(0,u.jsx)(s()._H,{...d().nL[i]});return(0,u.jsx)(f,{disabled:n,buttonPopupStore:t,currentVisibilityLabel:o,renderVisibilityLevelsMenu:t=>(0,u.jsx)(c().h9,{...e,onClose:()=>{var n;null===(n=e.onClose)||void 0===n||n.call(e),t.close()}})})}function g(e){const{buttonPopupStore:t,disabled:n,currentVisibility:i}=e,o=(0,u.jsx)(s()._H,{...d().Wc[i]});return(0,u.jsx)(f,{disabled:n,buttonPopupStore:t,currentVisibilityLabel:o,renderVisibilityLevelsMenu:t=>(0,u.jsx)(c().Xv,{...e,onClose:()=>{var n;null===(n=e.onClose)||void 0===n||n.call(e),t.close()}})})}function f(e){const t=(0,i().Fy)(),{buttonPopupStore:n,currentVisibilityLabel:s,renderVisibilityLevelsMenu:d,disabled:c}=e,p=t.isMobile?r().Z4.SlideUp:r().Z4.Popup,m=(0,o().yK)((e=>({chevronDownIcon:{width:10,marginLeft:4,marginRight:4,fill:e.lightIconColor},currentVisibilityLabel:{color:e.mediumTextColor,paddingRight:4,height:t.isMobile?32:22}})),[t.isMobile]);return(0,u.jsx)(r().ZP,{popupType:p,buttonPopupStore:n,renderOrigin:e=>(0,u.jsxs)(l().Z,{style:m.currentVisibilityLabel,disabled:c,...e,children:[s,(0,a().i)(m.chevronDownIcon)]}),render:d})}},542649:(e,t,n)=>{n.d(t,{EZ:()=>o,FD:()=>s,G5:()=>i,rK:()=>a});const i=220,o=24,s=-7,a=-3},562219:(e,t,n)=>{n.d(t,{J:()=>s});var i=()=>n(677559);const o=new(i().Ss)("UpdateSidebarTabInfo",(async()=>await n.e(60895).then(n.bind(n,931656)))),s=(0,i().kF)(o,(e=>e.UpdateSidebarTabInfo))},675393:(e,t,n)=>{n.d(t,{DG:()=>f,Di:()=>o,F7:()=>d,Lq:()=>c,Q3:()=>l,ZH:()=>p,aL:()=>r,aP:()=>y,db:()=>s,gS:()=>S,i4:()=>g,lG:()=>x,mN:()=>b,oC:()=>m,op:()=>h,pn:()=>u,q4:()=>a,w3:()=>v});var i=()=>n(677559);const o=new(i().Ss)("menus",(async()=>{const[{default:e},{TopbarPageAnalyticsOptOutMenu:t},{default:i},{default:o},{default:s},{default:a},{default:r},{default:l},{default:d},{default:c},{default:u},{SidebarTeamModal:p},{SidebarCreateTeamModal:m},{CreateTeamFromPageConfirmModal:g},{CollectionTypedDatabaseMigrationModal:f},{default:h},{default:y},{default:v}]=await Promise.all([Promise.all([n.e(62743),n.e(52774),n.e(44832),n.e(39938),n.e(90698),n.e(84885),n.e(37358),n.e(5242),n.e(7312),n.e(90424),n.e(81580),n.e(84325),n.e(31189),n.e(69343),n.e(46293),n.e(94556),n.e(78701),n.e(38804),n.e(17100),n.e(11846),n.e(70355),n.e(2971),n.e(80741),n.e(72586),n.e(53335),n.e(71896),n.e(46616),n.e(54940),n.e(49396),n.e(98721),n.e(98032),n.e(57229),n.e(63707),n.e(86609),n.e(91253),n.e(4642),n.e(5006),n.e(6612),n.e(61171),n.e(23179),n.e(75377),n.e(31020),n.e(2942),n.e(73682),n.e(58591),n.e(54803),n.e(1953),n.e(10216),n.e(58565),n.e(69197),n.e(42055),n.e(38739),n.e(44751),n.e(81567),n.e(63257),n.e(34291),n.e(1913),n.e(56054),n.e(95076),n.e(92341),n.e(82658),n.e(4163),n.e(69583),n.e(22759),n.e(20343),n.e(21820),n.e(46945),n.e(10553),n.e(67019),n.e(27039),n.e(25265),n.e(14581),n.e(38632),n.e(61651),n.e(88702),n.e(54307),n.e(43184),n.e(87647),n.e(75861),n.e(46257),n.e(15819),n.e(45376),n.e(74943),n.e(23721),n.e(58461),n.e(72329),n.e(19592),n.e(3331),n.e(98672),n.e(52658),n.e(44642),n.e(78),n.e(58586)]).then(n.bind(n,55351)),Promise.all([n.e(62743),n.e(52774),n.e(44832),n.e(39938),n.e(90698),n.e(84885),n.e(37358),n.e(5242),n.e(7312),n.e(90424),n.e(81580),n.e(84325),n.e(31189),n.e(69343),n.e(46293),n.e(94556),n.e(78701),n.e(38804),n.e(17100),n.e(11846),n.e(70355),n.e(2971),n.e(80741),n.e(72586),n.e(53335),n.e(71896),n.e(46616),n.e(54940),n.e(49396),n.e(98721),n.e(98032),n.e(57229),n.e(63707),n.e(86609),n.e(91253),n.e(4642),n.e(5006),n.e(6612),n.e(61171),n.e(23179),n.e(75377),n.e(31020),n.e(2942),n.e(73682),n.e(58591),n.e(54803),n.e(1953),n.e(10216),n.e(58565),n.e(69197),n.e(42055),n.e(38739),n.e(44751),n.e(81567),n.e(63257),n.e(34291),n.e(1913),n.e(56054),n.e(95076),n.e(92341),n.e(82658),n.e(4163),n.e(69583),n.e(22759),n.e(20343),n.e(21820),n.e(46945),n.e(10553),n.e(67019),n.e(27039),n.e(25265),n.e(14581),n.e(38632),n.e(61651),n.e(88702),n.e(54307),n.e(43184),n.e(87647),n.e(75861),n.e(46257),n.e(15819),n.e(45376),n.e(74943),n.e(23721),n.e(58461),n.e(72329),n.e(19592),n.e(3331),n.e(98672),n.e(52658),n.e(44642),n.e(78),n.e(58586)]).then(n.bind(n,83340)),Promise.all([n.e(62743),n.e(52774),n.e(44832),n.e(39938),n.e(90698),n.e(84885),n.e(37358),n.e(5242),n.e(7312),n.e(90424),n.e(81580),n.e(84325),n.e(31189),n.e(69343),n.e(46293),n.e(94556),n.e(78701),n.e(38804),n.e(17100),n.e(11846),n.e(70355),n.e(2971),n.e(80741),n.e(72586),n.e(53335),n.e(71896),n.e(46616),n.e(54940),n.e(49396),n.e(98721),n.e(98032),n.e(57229),n.e(63707),n.e(86609),n.e(91253),n.e(4642),n.e(5006),n.e(6612),n.e(61171),n.e(23179),n.e(75377),n.e(31020),n.e(2942),n.e(73682),n.e(58591),n.e(54803),n.e(1953),n.e(10216),n.e(58565),n.e(69197),n.e(42055),n.e(38739),n.e(44751),n.e(81567),n.e(63257),n.e(34291),n.e(1913),n.e(56054),n.e(95076),n.e(92341),n.e(82658),n.e(4163),n.e(69583),n.e(22759),n.e(20343),n.e(21820),n.e(46945),n.e(10553),n.e(67019),n.e(27039),n.e(25265),n.e(14581),n.e(38632),n.e(61651),n.e(88702),n.e(54307),n.e(43184),n.e(87647),n.e(75861),n.e(46257),n.e(15819),n.e(45376),n.e(74943),n.e(23721),n.e(58461),n.e(72329),n.e(19592),n.e(3331),n.e(98672),n.e(52658),n.e(44642),n.e(78),n.e(58586)]).then(n.bind(n,11070)),Promise.all([n.e(62743),n.e(52774),n.e(44832),n.e(39938),n.e(90698),n.e(84885),n.e(37358),n.e(5242),n.e(7312),n.e(90424),n.e(81580),n.e(84325),n.e(31189),n.e(69343),n.e(46293),n.e(94556),n.e(78701),n.e(38804),n.e(17100),n.e(11846),n.e(70355),n.e(2971),n.e(80741),n.e(72586),n.e(53335),n.e(71896),n.e(46616),n.e(54940),n.e(49396),n.e(98721),n.e(98032),n.e(57229),n.e(63707),n.e(86609),n.e(91253),n.e(4642),n.e(5006),n.e(6612),n.e(61171),n.e(23179),n.e(75377),n.e(31020),n.e(2942),n.e(73682),n.e(58591),n.e(54803),n.e(1953),n.e(10216),n.e(58565),n.e(69197),n.e(42055),n.e(38739),n.e(44751),n.e(81567),n.e(63257),n.e(34291),n.e(1913),n.e(56054),n.e(95076),n.e(92341),n.e(82658),n.e(4163),n.e(69583),n.e(22759),n.e(20343),n.e(21820),n.e(46945),n.e(10553),n.e(67019),n.e(27039),n.e(25265),n.e(14581),n.e(38632),n.e(61651),n.e(88702),n.e(54307),n.e(43184),n.e(87647),n.e(75861),n.e(46257),n.e(15819),n.e(45376),n.e(74943),n.e(23721),n.e(58461),n.e(72329),n.e(19592),n.e(3331),n.e(98672),n.e(52658),n.e(44642),n.e(78),n.e(58586)]).then(n.bind(n,487974)),Promise.all([n.e(62743),n.e(52774),n.e(44832),n.e(39938),n.e(90698),n.e(84885),n.e(37358),n.e(5242),n.e(7312),n.e(90424),n.e(81580),n.e(84325),n.e(31189),n.e(69343),n.e(46293),n.e(94556),n.e(78701),n.e(38804),n.e(17100),n.e(11846),n.e(70355),n.e(2971),n.e(80741),n.e(72586),n.e(53335),n.e(71896),n.e(46616),n.e(54940),n.e(49396),n.e(98721),n.e(98032),n.e(57229),n.e(63707),n.e(86609),n.e(91253),n.e(4642),n.e(5006),n.e(6612),n.e(61171),n.e(23179),n.e(75377),n.e(31020),n.e(2942),n.e(73682),n.e(58591),n.e(54803),n.e(1953),n.e(10216),n.e(58565),n.e(69197),n.e(42055),n.e(38739),n.e(44751),n.e(81567),n.e(63257),n.e(34291),n.e(1913),n.e(56054),n.e(95076),n.e(92341),n.e(82658),n.e(4163),n.e(69583),n.e(22759),n.e(20343),n.e(21820),n.e(46945),n.e(10553),n.e(67019),n.e(27039),n.e(25265),n.e(14581),n.e(38632),n.e(61651),n.e(88702),n.e(54307),n.e(43184),n.e(87647),n.e(75861),n.e(46257),n.e(15819),n.e(45376),n.e(74943),n.e(23721),n.e(58461),n.e(72329),n.e(19592),n.e(3331),n.e(98672),n.e(52658),n.e(44642),n.e(78),n.e(58586)]).then(n.bind(n,293660)),Promise.all([n.e(62743),n.e(52774),n.e(44832),n.e(39938),n.e(90698),n.e(84885),n.e(37358),n.e(5242),n.e(7312),n.e(90424),n.e(81580),n.e(84325),n.e(31189),n.e(69343),n.e(46293),n.e(94556),n.e(78701),n.e(38804),n.e(17100),n.e(11846),n.e(70355),n.e(2971),n.e(80741),n.e(72586),n.e(53335),n.e(71896),n.e(46616),n.e(54940),n.e(49396),n.e(98721),n.e(98032),n.e(57229),n.e(63707),n.e(86609),n.e(91253),n.e(4642),n.e(5006),n.e(6612),n.e(61171),n.e(23179),n.e(75377),n.e(31020),n.e(2942),n.e(73682),n.e(58591),n.e(54803),n.e(1953),n.e(10216),n.e(58565),n.e(69197),n.e(42055),n.e(38739),n.e(44751),n.e(81567),n.e(63257),n.e(34291),n.e(1913),n.e(56054),n.e(95076),n.e(92341),n.e(82658),n.e(4163),n.e(69583),n.e(22759),n.e(20343),n.e(21820),n.e(46945),n.e(10553),n.e(67019),n.e(27039),n.e(25265),n.e(14581),n.e(38632),n.e(61651),n.e(88702),n.e(54307),n.e(43184),n.e(87647),n.e(75861),n.e(46257),n.e(15819),n.e(45376),n.e(74943),n.e(23721),n.e(58461),n.e(72329),n.e(19592),n.e(3331),n.e(98672),n.e(52658),n.e(44642),n.e(78),n.e(58586)]).then(n.bind(n,743405)),Promise.all([n.e(62743),n.e(52774),n.e(44832),n.e(39938),n.e(90698),n.e(84885),n.e(37358),n.e(5242),n.e(7312),n.e(90424),n.e(81580),n.e(84325),n.e(31189),n.e(69343),n.e(46293),n.e(94556),n.e(78701),n.e(38804),n.e(17100),n.e(11846),n.e(70355),n.e(2971),n.e(80741),n.e(72586),n.e(53335),n.e(71896),n.e(46616),n.e(54940),n.e(49396),n.e(98721),n.e(98032),n.e(57229),n.e(63707),n.e(86609),n.e(91253),n.e(4642),n.e(5006),n.e(6612),n.e(61171),n.e(23179),n.e(75377),n.e(31020),n.e(2942),n.e(73682),n.e(58591),n.e(54803),n.e(1953),n.e(10216),n.e(58565),n.e(69197),n.e(42055),n.e(38739),n.e(44751),n.e(81567),n.e(63257),n.e(34291),n.e(1913),n.e(56054),n.e(95076),n.e(92341),n.e(82658),n.e(4163),n.e(69583),n.e(22759),n.e(20343),n.e(21820),n.e(46945),n.e(10553),n.e(67019),n.e(27039),n.e(25265),n.e(14581),n.e(38632),n.e(61651),n.e(88702),n.e(54307),n.e(43184),n.e(87647),n.e(75861),n.e(46257),n.e(15819),n.e(45376),n.e(74943),n.e(23721),n.e(58461),n.e(72329),n.e(19592),n.e(3331),n.e(98672),n.e(52658),n.e(44642),n.e(78),n.e(58586)]).then(n.bind(n,995744)),Promise.all([n.e(62743),n.e(52774),n.e(44832),n.e(39938),n.e(90698),n.e(84885),n.e(37358),n.e(5242),n.e(7312),n.e(90424),n.e(81580),n.e(84325),n.e(31189),n.e(69343),n.e(46293),n.e(94556),n.e(78701),n.e(38804),n.e(17100),n.e(11846),n.e(70355),n.e(2971),n.e(80741),n.e(72586),n.e(53335),n.e(71896),n.e(46616),n.e(54940),n.e(49396),n.e(98721),n.e(98032),n.e(57229),n.e(63707),n.e(86609),n.e(91253),n.e(4642),n.e(5006),n.e(6612),n.e(61171),n.e(23179),n.e(75377),n.e(31020),n.e(2942),n.e(73682),n.e(58591),n.e(54803),n.e(1953),n.e(10216),n.e(58565),n.e(69197),n.e(42055),n.e(38739),n.e(44751),n.e(81567),n.e(63257),n.e(34291),n.e(1913),n.e(56054),n.e(95076),n.e(92341),n.e(82658),n.e(4163),n.e(69583),n.e(22759),n.e(20343),n.e(21820),n.e(46945),n.e(10553),n.e(67019),n.e(27039),n.e(25265),n.e(14581),n.e(38632),n.e(61651),n.e(88702),n.e(54307),n.e(43184),n.e(87647),n.e(75861),n.e(46257),n.e(15819),n.e(45376),n.e(74943),n.e(23721),n.e(58461),n.e(72329),n.e(19592),n.e(3331),n.e(98672),n.e(52658),n.e(44642),n.e(78),n.e(58586)]).then(n.bind(n,795879)),Promise.all([n.e(62743),n.e(52774),n.e(44832),n.e(39938),n.e(90698),n.e(84885),n.e(37358),n.e(5242),n.e(7312),n.e(90424),n.e(81580),n.e(84325),n.e(31189),n.e(69343),n.e(46293),n.e(94556),n.e(78701),n.e(38804),n.e(17100),n.e(11846),n.e(70355),n.e(2971),n.e(80741),n.e(72586),n.e(53335),n.e(71896),n.e(46616),n.e(54940),n.e(49396),n.e(98721),n.e(98032),n.e(57229),n.e(63707),n.e(86609),n.e(91253),n.e(4642),n.e(5006),n.e(6612),n.e(61171),n.e(23179),n.e(75377),n.e(31020),n.e(2942),n.e(73682),n.e(58591),n.e(54803),n.e(1953),n.e(10216),n.e(58565),n.e(69197),n.e(42055),n.e(38739),n.e(44751),n.e(81567),n.e(63257),n.e(34291),n.e(1913),n.e(56054),n.e(95076),n.e(92341),n.e(82658),n.e(4163),n.e(69583),n.e(22759),n.e(20343),n.e(21820),n.e(46945),n.e(10553),n.e(67019),n.e(27039),n.e(25265),n.e(14581),n.e(38632),n.e(61651),n.e(88702),n.e(54307),n.e(43184),n.e(87647),n.e(75861),n.e(46257),n.e(15819),n.e(45376),n.e(74943),n.e(23721),n.e(58461),n.e(72329),n.e(19592),n.e(3331),n.e(98672),n.e(52658),n.e(44642),n.e(78),n.e(58586)]).then(n.bind(n,720940)),Promise.all([n.e(62743),n.e(52774),n.e(44832),n.e(39938),n.e(90698),n.e(84885),n.e(37358),n.e(5242),n.e(7312),n.e(90424),n.e(81580),n.e(84325),n.e(31189),n.e(69343),n.e(46293),n.e(94556),n.e(78701),n.e(38804),n.e(17100),n.e(11846),n.e(70355),n.e(2971),n.e(80741),n.e(72586),n.e(53335),n.e(71896),n.e(46616),n.e(54940),n.e(49396),n.e(98721),n.e(98032),n.e(57229),n.e(63707),n.e(86609),n.e(91253),n.e(4642),n.e(5006),n.e(6612),n.e(61171),n.e(23179),n.e(75377),n.e(31020),n.e(2942),n.e(73682),n.e(58591),n.e(54803),n.e(1953),n.e(10216),n.e(58565),n.e(69197),n.e(42055),n.e(38739),n.e(44751),n.e(81567),n.e(63257),n.e(34291),n.e(1913),n.e(56054),n.e(95076),n.e(92341),n.e(82658),n.e(4163),n.e(69583),n.e(22759),n.e(20343),n.e(21820),n.e(46945),n.e(10553),n.e(67019),n.e(27039),n.e(25265),n.e(14581),n.e(38632),n.e(61651),n.e(88702),n.e(54307),n.e(43184),n.e(87647),n.e(75861),n.e(46257),n.e(15819),n.e(45376),n.e(74943),n.e(23721),n.e(58461),n.e(72329),n.e(19592),n.e(3331),n.e(98672),n.e(52658),n.e(44642),n.e(78),n.e(58586)]).then(n.bind(n,515445)),Promise.all([n.e(62743),n.e(52774),n.e(44832),n.e(39938),n.e(90698),n.e(84885),n.e(37358),n.e(5242),n.e(7312),n.e(90424),n.e(81580),n.e(84325),n.e(31189),n.e(69343),n.e(46293),n.e(94556),n.e(78701),n.e(38804),n.e(17100),n.e(11846),n.e(70355),n.e(2971),n.e(80741),n.e(72586),n.e(53335),n.e(71896),n.e(46616),n.e(54940),n.e(49396),n.e(98721),n.e(98032),n.e(57229),n.e(63707),n.e(86609),n.e(91253),n.e(4642),n.e(5006),n.e(6612),n.e(61171),n.e(23179),n.e(75377),n.e(31020),n.e(2942),n.e(73682),n.e(58591),n.e(54803),n.e(1953),n.e(10216),n.e(58565),n.e(69197),n.e(42055),n.e(38739),n.e(44751),n.e(81567),n.e(63257),n.e(34291),n.e(1913),n.e(56054),n.e(95076),n.e(92341),n.e(82658),n.e(4163),n.e(69583),n.e(22759),n.e(20343),n.e(21820),n.e(46945),n.e(10553),n.e(67019),n.e(27039),n.e(25265),n.e(14581),n.e(38632),n.e(61651),n.e(88702),n.e(54307),n.e(43184),n.e(87647),n.e(75861),n.e(46257),n.e(15819),n.e(45376),n.e(74943),n.e(23721),n.e(58461),n.e(72329),n.e(19592),n.e(3331),n.e(98672),n.e(52658),n.e(44642),n.e(78),n.e(58586)]).then(n.bind(n,683850)),Promise.all([n.e(62743),n.e(52774),n.e(44832),n.e(39938),n.e(90698),n.e(84885),n.e(37358),n.e(5242),n.e(7312),n.e(90424),n.e(81580),n.e(84325),n.e(31189),n.e(69343),n.e(46293),n.e(94556),n.e(78701),n.e(38804),n.e(17100),n.e(11846),n.e(70355),n.e(2971),n.e(80741),n.e(72586),n.e(53335),n.e(71896),n.e(46616),n.e(54940),n.e(49396),n.e(98721),n.e(98032),n.e(57229),n.e(63707),n.e(86609),n.e(91253),n.e(4642),n.e(5006),n.e(6612),n.e(61171),n.e(23179),n.e(75377),n.e(31020),n.e(2942),n.e(73682),n.e(58591),n.e(54803),n.e(1953),n.e(10216),n.e(58565),n.e(69197),n.e(42055),n.e(38739),n.e(44751),n.e(81567),n.e(63257),n.e(34291),n.e(1913),n.e(56054),n.e(95076),n.e(92341),n.e(82658),n.e(4163),n.e(69583),n.e(22759),n.e(20343),n.e(21820),n.e(46945),n.e(10553),n.e(67019),n.e(27039),n.e(25265),n.e(14581),n.e(38632),n.e(61651),n.e(88702),n.e(54307),n.e(43184),n.e(87647),n.e(75861),n.e(46257),n.e(15819),n.e(45376),n.e(74943),n.e(23721),n.e(58461),n.e(72329),n.e(19592),n.e(3331),n.e(98672),n.e(52658),n.e(44642),n.e(78),n.e(58586)]).then(n.bind(n,7298)),Promise.all([n.e(62743),n.e(52774),n.e(44832),n.e(39938),n.e(90698),n.e(84885),n.e(37358),n.e(5242),n.e(7312),n.e(90424),n.e(81580),n.e(84325),n.e(31189),n.e(69343),n.e(46293),n.e(94556),n.e(78701),n.e(38804),n.e(17100),n.e(11846),n.e(70355),n.e(2971),n.e(80741),n.e(72586),n.e(53335),n.e(71896),n.e(46616),n.e(54940),n.e(49396),n.e(98721),n.e(98032),n.e(57229),n.e(63707),n.e(86609),n.e(91253),n.e(4642),n.e(5006),n.e(6612),n.e(61171),n.e(23179),n.e(75377),n.e(31020),n.e(2942),n.e(73682),n.e(58591),n.e(54803),n.e(1953),n.e(10216),n.e(58565),n.e(69197),n.e(42055),n.e(38739),n.e(44751),n.e(81567),n.e(63257),n.e(34291),n.e(1913),n.e(56054),n.e(95076),n.e(92341),n.e(82658),n.e(4163),n.e(69583),n.e(22759),n.e(20343),n.e(21820),n.e(46945),n.e(10553),n.e(67019),n.e(27039),n.e(25265),n.e(14581),n.e(38632),n.e(61651),n.e(88702),n.e(54307),n.e(43184),n.e(87647),n.e(75861),n.e(46257),n.e(15819),n.e(45376),n.e(74943),n.e(23721),n.e(58461),n.e(72329),n.e(19592),n.e(3331),n.e(98672),n.e(52658),n.e(44642),n.e(78),n.e(58586)]).then(n.bind(n,216867)),Promise.all([n.e(62743),n.e(52774),n.e(44832),n.e(39938),n.e(90698),n.e(84885),n.e(37358),n.e(5242),n.e(7312),n.e(90424),n.e(81580),n.e(84325),n.e(31189),n.e(69343),n.e(46293),n.e(94556),n.e(78701),n.e(38804),n.e(17100),n.e(11846),n.e(70355),n.e(2971),n.e(80741),n.e(72586),n.e(53335),n.e(71896),n.e(46616),n.e(54940),n.e(49396),n.e(98721),n.e(98032),n.e(57229),n.e(63707),n.e(86609),n.e(91253),n.e(4642),n.e(5006),n.e(6612),n.e(61171),n.e(23179),n.e(75377),n.e(31020),n.e(2942),n.e(73682),n.e(58591),n.e(54803),n.e(1953),n.e(10216),n.e(58565),n.e(69197),n.e(42055),n.e(38739),n.e(44751),n.e(81567),n.e(63257),n.e(34291),n.e(1913),n.e(56054),n.e(95076),n.e(92341),n.e(82658),n.e(4163),n.e(69583),n.e(22759),n.e(20343),n.e(21820),n.e(46945),n.e(10553),n.e(67019),n.e(27039),n.e(25265),n.e(14581),n.e(38632),n.e(61651),n.e(88702),n.e(54307),n.e(43184),n.e(87647),n.e(75861),n.e(46257),n.e(15819),n.e(45376),n.e(74943),n.e(23721),n.e(58461),n.e(72329),n.e(19592),n.e(3331),n.e(98672),n.e(52658),n.e(44642),n.e(78),n.e(58586)]).then(n.bind(n,253032)),Promise.all([n.e(62743),n.e(52774),n.e(44832),n.e(39938),n.e(90698),n.e(84885),n.e(37358),n.e(5242),n.e(7312),n.e(90424),n.e(81580),n.e(84325),n.e(31189),n.e(69343),n.e(46293),n.e(94556),n.e(78701),n.e(38804),n.e(17100),n.e(11846),n.e(70355),n.e(2971),n.e(80741),n.e(72586),n.e(53335),n.e(71896),n.e(46616),n.e(54940),n.e(49396),n.e(98721),n.e(98032),n.e(57229),n.e(63707),n.e(86609),n.e(91253),n.e(4642),n.e(5006),n.e(6612),n.e(61171),n.e(23179),n.e(75377),n.e(31020),n.e(2942),n.e(73682),n.e(58591),n.e(54803),n.e(1953),n.e(10216),n.e(58565),n.e(69197),n.e(42055),n.e(38739),n.e(44751),n.e(81567),n.e(63257),n.e(34291),n.e(1913),n.e(56054),n.e(95076),n.e(92341),n.e(82658),n.e(4163),n.e(69583),n.e(22759),n.e(20343),n.e(21820),n.e(46945),n.e(10553),n.e(67019),n.e(27039),n.e(25265),n.e(14581),n.e(38632),n.e(61651),n.e(88702),n.e(54307),n.e(43184),n.e(87647),n.e(75861),n.e(46257),n.e(15819),n.e(45376),n.e(74943),n.e(23721),n.e(58461),n.e(72329),n.e(19592),n.e(3331),n.e(98672),n.e(52658),n.e(44642),n.e(78),n.e(58586)]).then(n.bind(n,910002)),Promise.all([n.e(62743),n.e(52774),n.e(44832),n.e(39938),n.e(90698),n.e(84885),n.e(37358),n.e(5242),n.e(7312),n.e(90424),n.e(81580),n.e(84325),n.e(31189),n.e(69343),n.e(46293),n.e(94556),n.e(78701),n.e(38804),n.e(17100),n.e(11846),n.e(70355),n.e(2971),n.e(80741),n.e(72586),n.e(53335),n.e(71896),n.e(46616),n.e(54940),n.e(49396),n.e(98721),n.e(98032),n.e(57229),n.e(63707),n.e(86609),n.e(91253),n.e(4642),n.e(5006),n.e(6612),n.e(61171),n.e(23179),n.e(75377),n.e(31020),n.e(2942),n.e(73682),n.e(58591),n.e(54803),n.e(1953),n.e(10216),n.e(58565),n.e(69197),n.e(42055),n.e(38739),n.e(44751),n.e(81567),n.e(63257),n.e(34291),n.e(1913),n.e(56054),n.e(95076),n.e(92341),n.e(82658),n.e(4163),n.e(69583),n.e(22759),n.e(20343),n.e(21820),n.e(46945),n.e(10553),n.e(67019),n.e(27039),n.e(25265),n.e(14581),n.e(38632),n.e(61651),n.e(88702),n.e(54307),n.e(43184),n.e(87647),n.e(75861),n.e(46257),n.e(15819),n.e(45376),n.e(74943),n.e(23721),n.e(58461),n.e(72329),n.e(19592),n.e(3331),n.e(98672),n.e(52658),n.e(44642),n.e(78),n.e(58586)]).then(n.bind(n,270615)),Promise.all([n.e(62743),n.e(52774),n.e(44832),n.e(39938),n.e(90698),n.e(84885),n.e(37358),n.e(5242),n.e(7312),n.e(90424),n.e(81580),n.e(84325),n.e(31189),n.e(69343),n.e(46293),n.e(94556),n.e(78701),n.e(38804),n.e(17100),n.e(11846),n.e(70355),n.e(2971),n.e(80741),n.e(72586),n.e(53335),n.e(71896),n.e(46616),n.e(54940),n.e(49396),n.e(98721),n.e(98032),n.e(57229),n.e(63707),n.e(86609),n.e(91253),n.e(4642),n.e(5006),n.e(6612),n.e(61171),n.e(23179),n.e(75377),n.e(31020),n.e(2942),n.e(73682),n.e(58591),n.e(54803),n.e(1953),n.e(10216),n.e(58565),n.e(69197),n.e(42055),n.e(38739),n.e(44751),n.e(81567),n.e(63257),n.e(34291),n.e(1913),n.e(56054),n.e(95076),n.e(92341),n.e(82658),n.e(4163),n.e(69583),n.e(22759),n.e(20343),n.e(21820),n.e(46945),n.e(10553),n.e(67019),n.e(27039),n.e(25265),n.e(14581),n.e(38632),n.e(61651),n.e(88702),n.e(54307),n.e(43184),n.e(87647),n.e(75861),n.e(46257),n.e(15819),n.e(45376),n.e(74943),n.e(23721),n.e(58461),n.e(72329),n.e(19592),n.e(3331),n.e(98672),n.e(52658),n.e(44642),n.e(78),n.e(58586)]).then(n.bind(n,914038)),Promise.all([n.e(62743),n.e(52774),n.e(44832),n.e(39938),n.e(90698),n.e(84885),n.e(37358),n.e(5242),n.e(7312),n.e(90424),n.e(81580),n.e(84325),n.e(31189),n.e(69343),n.e(46293),n.e(94556),n.e(78701),n.e(38804),n.e(17100),n.e(11846),n.e(70355),n.e(2971),n.e(80741),n.e(72586),n.e(53335),n.e(71896),n.e(46616),n.e(54940),n.e(49396),n.e(98721),n.e(98032),n.e(57229),n.e(63707),n.e(86609),n.e(91253),n.e(4642),n.e(5006),n.e(6612),n.e(61171),n.e(23179),n.e(75377),n.e(31020),n.e(2942),n.e(73682),n.e(58591),n.e(54803),n.e(1953),n.e(10216),n.e(58565),n.e(69197),n.e(42055),n.e(38739),n.e(44751),n.e(81567),n.e(63257),n.e(34291),n.e(1913),n.e(56054),n.e(95076),n.e(92341),n.e(82658),n.e(4163),n.e(69583),n.e(22759),n.e(20343),n.e(21820),n.e(46945),n.e(10553),n.e(67019),n.e(27039),n.e(25265),n.e(14581),n.e(38632),n.e(61651),n.e(88702),n.e(54307),n.e(43184),n.e(87647),n.e(75861),n.e(46257),n.e(15819),n.e(45376),n.e(74943),n.e(23721),n.e(58461),n.e(72329),n.e(19592),n.e(3331),n.e(98672),n.e(52658),n.e(44642),n.e(78),n.e(58586)]).then(n.bind(n,969016))]);return{CustomizePageMenuRenderer:e,TopbarPageAnalyticsOptOutMenu:t,ImportModal:i,ExportModal:o,PageTemplateModal:s,GoogleAuthPromptModal:a,StudentNotEligibleModal:r,CookieModal:l,ForkPagePopup:d,DatePropertyMenu:c,ReportPageModal:u,SidebarCreateTeamModal:m,SidebarTeamModal:p,CreateTeamFromPageConfirmModal:g,CollectionTypedDatabaseMigrationModal:f,OpenInDesktopAppPopup:h,BlockMenu:y,ImportIntoNewPageModal:v}})),s=(0,i().kF)(o,(e=>e.CustomizePageMenuRenderer)),a=(0,i().kF)(o,(e=>e.TopbarPageAnalyticsOptOutMenu)),r=(0,i().kF)(o,(e=>e.PageTemplateModal)),l=(0,i().kF)(o,(e=>e.ImportModal)),d=(0,i().kF)(o,(e=>e.ExportModal)),c=(0,i().kF)(o,(e=>e.ReportPageModal)),u=(0,i().kF)(o,(e=>e.GoogleAuthPromptModal)),p=(0,i().kF)(o,(e=>e.StudentNotEligibleModal)),m=(0,i().kF)(o,(e=>e.CookieModal)),g=(0,i().kF)(o,(e=>e.BlockMenu)),f=(0,i().kF)(o,(e=>e.ForkPagePopup)),h=(0,i().kF)(o,(e=>e.CollectionTypedDatabaseMigrationModal)),y=(0,i().kF)(o,(e=>e.SidebarCreateTeamModal)),v=(0,i().kF)(o,(e=>e.SidebarTeamModal)),x=(0,i().kF)(o,(e=>e.CreateTeamFromPageConfirmModal)),b=(0,i().kF)(o,(e=>e.OpenInDesktopAppPopup)),S=(0,i().kF)(o,(e=>e.ImportIntoNewPageModal))},81821:(e,t,n)=>{n.d(t,{Z:()=>o});class i extends(()=>n(442))().Z{}const o=new i},661849:(e,t,n)=>{n.d(t,{o:()=>s});var i=()=>n(989478),o=()=>n(826955);function s(e){let{userId:t,currentSpaceStore:n}=e;return o().U6.createChildStore(n,{table:i().KJ,id:t})}},688293:(e,t,n)=>{n.d(t,{N:()=>m,t:()=>g});n(670560);var i=n(667294),o=()=>n(219727),s=()=>n(142735),a=()=>n(799891),r=(n(821057),()=>n(386616)),l=()=>n(826955),d=()=>n(269299);var c=()=>n(109083),u=()=>n(910135),p=()=>n(142109);function m(e,t){let{canUndo:n,shouldPersistOperation:m}=t;const g=(0,o().O7)(),f=(0,i.useRef)([]).current,h=(0,i.useCallback)((e=>{f.push(...e)}),[f]),y=(0,i.useCallback)((e=>{m&&!m(e)||h([e])}),[h,m]),v=(0,p().$)(e,{cacheFallback:g.defaultRecordCache.inMemoryRecordCache,isTemporaryData:!0,onOperationCallback:y});(0,i.useEffect)((()=>{c().Z.initializeCache(e,v)}),[e,v]);const x=(0,i.useCallback)((()=>{u().default.reset(),c().Z.clearCache(e)}),[e]);(0,i.useEffect)((()=>(u().default.reset(),()=>{u().default.reset(),c().Z.expire(e)})),[e]);const b=(0,s().VK)((()=>u().default.state.undoStack.length>0),[]);(0,i.useEffect)((()=>{c().Z.updateUnsavedCacheState(e,b)}),[e,b]);const S=(0,i.useCallback)((async e=>{if(0===f.length)return void 0;v.assertUnexpired(),function(e){for(const t of u().default.state.undoStack)for(const n of t.transactions)for(const t of n.stores)if(t.inMemoryRecordCache!==e&&!t.inMemoryRecordCache.isMockTextStore){const i=n.getUserActionForAnalyticsPurposesOnly(),o=t.inMemoryRecordCache.name,s=e.name,r=`Undoable user action "${i}" was applied to cache "${o}", but only operations in the cache "${s}" should be in the undo stack!`;(0,a().log)({from:"useLocalDraft",type:"invalidStoreInRevisionStack",level:"error",data:{message:r,miscDataToConvertToString:{userAction:i,inMemoryRecordCacheName:o,expectedInMemoryRecordCacheName:s}}})}}(v);const{serverCommitResult:t}=d().createAndCommit({environment:g,userAction:e,perform(e){!function(e){let{environment:t,transaction:n,operationsWithStores:i}=e;for(const{operation:o,store:s}of i){if(!(s instanceof l().ST))continue;const e=s.clone(t.defaultRecordCache.inMemoryRecordCache);(0,r().Qf)(o)?d().applyCrdtTextOperation({store:s,operation:o,transaction:n,invertedOperation:void 0}):d().applyOperation({transaction:n,store:e,operation:o})}}({environment:g,transaction:e,operationsWithStores:f}),e.postSubmitCallbacks.push((e=>{e||(v.expire(),u().default.reset())}))},canUndo:n});return t}),[e,n,g,f,v]);return(0,i.useMemo)((()=>({cache:v,hasChanges:b,persist:S,reset:x})),[b,S,x,v])}function g(e,t){return(0,s().VK)((()=>t.clone(e.cache)),[t,e.cache])}},746324:(e,t,n)=>{n.d(t,{Q:()=>a});var i=()=>n(219727),o=()=>n(142735),s=()=>n(718959);function a(){const e=(0,i().O7)();return(0,o().Kw)((0,s().k_)(e))}},118447:(e,t,n)=>{n.d(t,{Q:()=>o});n(667294);var i=n(785893);const o=(0,n(827282).IU)("androidShare",{viewBox:"0 0 15 15",svg:(0,i.jsx)("path",{d:"M11.9952,10.6024 C11.4229,10.6024 10.9108,10.8283 10.51928,11.1822 L5.15029999,8.05723 C5.18794999,7.88404 5.21806999,7.71084 5.21806999,7.53012 C5.21806999,7.3494 5.18794999,7.1762 5.15029999,7.00301 L10.45904,3.90813 C10.8657,4.28464 11.4003,4.51807 11.9952,4.51807 C13.2452,4.51807 14.2542,3.50904 14.2542,2.25904 C14.2542,1.00904 13.2452,0 11.9952,0 C10.7452,0 9.73614999,1.00904 9.73614999,2.25904 C9.73614999,2.43976 9.76626999,2.61295 9.80391999,2.78614 L4.49517999,5.88102 C4.08854999,5.50452 3.55391999,5.27108 2.95903999,5.27108 C1.70903999,5.27108 0.699999988,6.28012 0.699999988,7.53012 C0.699999988,8.78012 1.70903999,9.78916 2.95903999,9.78916 C3.55391999,9.78916 4.08854999,9.55572 4.49517999,9.17922 L9.85662999,12.3117 C9.81897999,12.4699 9.79638999,12.6355 9.79638999,12.8012 C9.79638999,14.0136 10.7828,15 11.9952,15 C13.2075,15 14.194,14.0136 14.194,12.8012 C14.194,11.5889 13.2075,10.6024 11.9952,10.6024 Z"})})},960304:(e,t,n)=>{n.d(t,{l:()=>o});n(667294);var i=n(785893);const o=(0,n(827282).IU)("arrowUpCircled",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M7.993 15.126c.966 0 1.875-.185 2.728-.554a7.218 7.218 0 003.787-3.78 6.788 6.788 0 00.553-2.728c0-.966-.184-1.875-.553-2.727a7.136 7.136 0 00-1.531-2.25 7.219 7.219 0 00-2.256-1.53 6.805 6.805 0 00-2.735-.554c-.966 0-1.875.185-2.727.554a7.241 7.241 0 00-3.774 3.78 6.788 6.788 0 00-.553 2.727c0 .967.184 1.876.553 2.728.37.852.878 1.604 1.525 2.256a7.124 7.124 0 002.256 1.524 6.77 6.77 0 002.727.554zm0-1.395a5.598 5.598 0 01-4.013-1.654 5.735 5.735 0 01-1.21-1.804 5.567 5.567 0 01-.437-2.209c0-.783.146-1.517.438-2.2a5.715 5.715 0 011.21-1.812 5.6 5.6 0 011.797-1.217 5.599 5.599 0 012.208-.438c.789 0 1.525.146 2.208.438a5.66 5.66 0 013.029 3.028 5.55 5.55 0 01.437 2.201c0 .789-.146 1.525-.437 2.209a5.68 5.68 0 01-1.217 1.804 5.68 5.68 0 01-1.805 1.217 5.567 5.567 0 01-2.208.437zM8 11.51a.597.597 0 00.43-.164.584.584 0 00.172-.431V7.688L8.547 6.28l.622.78.759.793a.53.53 0 00.417.177c.16 0 .291-.052.396-.157a.518.518 0 00.164-.39.595.595 0 00-.164-.417L8.485 4.783A.664.664 0 008 4.558c-.173 0-.333.075-.479.225L5.26 7.066a.593.593 0 00-.157.417.538.538 0 00.554.547.557.557 0 00.416-.177l.766-.8.615-.766-.055 1.401v3.227c0 .173.057.317.171.43.114.11.258.165.431.165z"})})},624778:(e,t,n)=>{n.d(t,{p:()=>i().p});var i=()=>n(775404)},193384:(e,t,n)=>{n.d(t,{j:()=>o});n(667294);var i=n(785893);const o=(0,n(827282).IU)("bellDisabled",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M7 15.2285C6.48047 15.2285 6.02246 15.11 5.62598 14.873C5.23405 14.6406 4.92188 14.333 4.68945 13.9502C4.46159 13.5719 4.33854 13.1618 4.32031 12.7197H1.51074C1.15072 12.7197 0.868164 12.6331 0.663086 12.46C0.462565 12.2822 0.362305 12.0475 0.362305 11.7559C0.362305 11.5143 0.426107 11.2842 0.553711 11.0654C0.681315 10.8421 0.843099 10.6279 1.03906 10.4229C1.23958 10.2178 1.44466 10.015 1.6543 9.81445C1.8138 9.65951 1.93685 9.45671 2.02344 9.20605C2.11003 8.9554 2.17611 8.67969 2.22168 8.37891C2.26725 8.07812 2.30371 7.77051 2.33105 7.45605C2.34017 7.08691 2.36296 6.73828 2.39941 6.41016C2.44043 6.08203 2.49512 5.77669 2.56348 5.49414L3.73926 6.66992C3.71647 6.8431 3.69596 7.02539 3.67773 7.2168C3.66406 7.4082 3.65495 7.60872 3.65039 7.81836C3.63216 8.12826 3.60482 8.41536 3.56836 8.67969C3.5319 8.94401 3.48405 9.18555 3.4248 9.4043C3.36556 9.62305 3.29264 9.81901 3.20605 9.99219C3.12402 10.1654 3.02604 10.3158 2.91211 10.4434C2.80273 10.571 2.68652 10.6963 2.56348 10.8193C2.44499 10.9378 2.33561 11.0472 2.23535 11.1475C2.13965 11.2477 2.06217 11.3275 2.00293 11.3867V11.4688H8.54492L10.0078 12.9385H9.64551C9.59538 13.3532 9.45182 13.7337 9.21484 14.0801C8.98242 14.4264 8.6748 14.7044 8.29199 14.9141C7.91374 15.1237 7.48307 15.2285 7 15.2285ZM7 14.1348C7.38737 14.1348 7.70866 14.0072 7.96387 13.752C8.21908 13.4967 8.35807 13.1527 8.38086 12.7197H5.6123C5.63965 13.1527 5.78092 13.4967 6.03613 13.752C6.29134 14.0072 6.61263 14.1348 7 14.1348ZM4.01953 2.99902C4.15625 2.89421 4.30208 2.7985 4.45703 2.71191C4.61654 2.62533 4.78516 2.55241 4.96289 2.49316C5.09049 2.04199 5.33431 1.66374 5.69434 1.3584C6.05436 1.05306 6.48958 0.900391 7 0.900391C7.50586 0.900391 7.9388 1.05306 8.29883 1.3584C8.65885 1.66374 8.90495 2.04199 9.03711 2.49316C9.9349 2.81673 10.5889 3.41146 10.999 4.27734C11.4137 5.14323 11.6416 6.2666 11.6826 7.64746C11.7008 7.9209 11.7282 8.17383 11.7646 8.40625C11.8011 8.63411 11.849 8.84603 11.9082 9.04199C11.972 9.2334 12.0518 9.41113 12.1475 9.5752C12.2477 9.73926 12.3685 9.89648 12.5098 10.0469C12.7786 10.3021 13.0293 10.5664 13.2617 10.8398C13.4941 11.1133 13.6104 11.4027 13.6104 11.708C13.6104 11.9587 13.5329 12.166 13.3779 12.3301L10.6641 9.55469C10.5911 9.39518 10.5342 9.22884 10.4932 9.05566C10.4567 8.87793 10.4271 8.68424 10.4043 8.47461C10.3815 8.26497 10.361 8.03027 10.3428 7.77051C10.3245 6.80892 10.222 6.04557 10.0352 5.48047C9.84831 4.91081 9.60449 4.4847 9.30371 4.20215C9.00293 3.9196 8.66569 3.72819 8.29199 3.62793C8.20996 3.6097 8.14616 3.5778 8.10059 3.53223C8.05501 3.4821 8.02767 3.41146 8.01855 3.32031C8.00033 2.97396 7.90007 2.69368 7.71777 2.47949C7.54004 2.2653 7.30078 2.1582 7 2.1582C6.69922 2.1582 6.45768 2.2653 6.27539 2.47949C6.0931 2.69368 5.99284 2.97396 5.97461 3.32031C5.97005 3.41146 5.94271 3.4821 5.89258 3.53223C5.84701 3.5778 5.78548 3.6097 5.70801 3.62793C5.57585 3.66439 5.44824 3.70996 5.3252 3.76465C5.20671 3.81934 5.09277 3.88542 4.9834 3.96289L4.01953 2.99902ZM0.615234 2.35645C0.514974 2.25163 0.464844 2.12402 0.464844 1.97363C0.464844 1.81868 0.514974 1.6888 0.615234 1.58398C0.724609 1.47917 0.854492 1.42676 1.00488 1.42676C1.15983 1.42676 1.28971 1.47917 1.39453 1.58398L13.8086 13.9912C13.9134 14.096 13.9658 14.2236 13.9658 14.374C13.9658 14.5244 13.9134 14.6543 13.8086 14.7637C13.7038 14.8685 13.5739 14.9209 13.4189 14.9209C13.2686 14.9209 13.141 14.8685 13.0361 14.7637L0.615234 2.35645Z"})})},74582:(e,t,n)=>{n.d(t,{e:()=>o});n(667294);var i=n(785893);const o=(0,n(827282).IU)("checkedRoundedCheckmark",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M7.99617 16C12.3807 16 15.9923 12.3807 15.9923 7.99617C15.9923 3.61167 12.373 0 7.99617 0C3.61167 0 0 3.61167 0 7.99617C0 12.3807 3.61167 16 7.99617 16ZM7.99617 14.2018C4.5605 14.2018 1.80583 11.4319 1.80583 7.99617C1.80583 4.5605 4.55285 1.79818 7.99617 1.79818C11.4319 1.79818 14.1942 4.5605 14.2018 7.99617C14.2018 11.4319 11.4319 14.2018 7.99617 14.2018ZM7.18508 11.6461C7.47585 11.6461 7.73601 11.4931 7.912 11.2329L11.3324 5.96078C11.4395 5.79244 11.5237 5.60115 11.5237 5.42516C11.5237 5.01196 11.1564 4.72119 10.7585 4.72119C10.506 4.72119 10.2841 4.86657 10.1081 5.14969L7.16212 9.84027L5.80775 8.14921C5.6241 7.912 5.43281 7.82783 5.18795 7.82783C4.7824 7.82783 4.45337 8.14921 4.45337 8.56241C4.45337 8.76136 4.52224 8.93735 4.66762 9.12099L6.42755 11.2406C6.6418 11.5084 6.87901 11.6461 7.18508 11.6461Z"})})},701572:(e,t,n)=>{n.d(t,{C:()=>o});n(667294);var i=n(785893);const o=(0,n(827282).IU)("eyeHide",{viewBox:"0 0 16 12",svg:(0,i.jsx)("path",{d:"M12.2754 10.9346L3.08545 1.76074C2.91895 1.59424 2.91895 1.3042 3.08545 1.1377C3.25732 0.96582 3.53662 0.971191 3.7085 1.1377L12.8931 10.3169C13.0649 10.4888 13.0703 10.752 12.8931 10.9346C12.7212 11.1172 12.4473 11.1064 12.2754 10.9346ZM8 1.44922C12.4526 1.44922 15.4067 5.02637 15.4067 6.13281C15.4067 6.76123 14.4346 8.20605 12.7588 9.31787L11.8618 8.41553C13.167 7.58301 13.978 6.54102 13.978 6.13281C13.978 5.50977 11.3516 2.62012 8 2.62012C7.43066 2.62012 6.9043 2.70068 6.39404 2.84033L5.42188 1.86816C6.21143 1.61035 7.06006 1.44922 8 1.44922ZM8 10.811C3.60645 10.811 0.587891 7.22852 0.587891 6.13281C0.587891 5.48828 1.6084 4.0166 3.33789 2.89404L4.25635 3.8125C2.87598 4.67725 2.0166 5.77832 2.0166 6.13281C2.0166 6.87402 4.64307 9.64014 8 9.64014C8.6123 9.64014 9.18701 9.54883 9.73486 9.39307L10.707 10.3652C9.88525 10.6445 8.98291 10.811 8 10.811ZM10.6211 7.06201L7.06543 3.50635C7.35547 3.38818 7.66699 3.32373 8 3.32373C9.55762 3.32373 10.8145 4.56445 10.8145 6.12744C10.8145 6.45508 10.7446 6.77734 10.6211 7.06201ZM8 8.93652C6.43164 8.93652 5.18555 7.6582 5.18018 6.13281C5.18018 5.75146 5.26074 5.39697 5.41113 5.08008L9.04199 8.70557C8.7251 8.85059 8.37598 8.93652 8 8.93652Z"})})},133924:(e,t,n)=>{n.d(t,{R:()=>o});n(667294);var i=n(785893);const o=(0,n(827282).IU)("googleLogo",{viewBox:"0 0 20 20",svg:(0,i.jsxs)("g",{children:[(0,i.jsx)("path",{d:"M19.9996 10.2297C19.9996 9.54995 19.9434 8.8665 19.8234 8.19775H10.2002V12.0486H15.711C15.4823 13.2905 14.7475 14.3892 13.6716 15.0873V17.586H16.9593C18.89 15.8443 19.9996 13.2722 19.9996 10.2297Z",fill:"#4285F4"}),(0,i.jsx)("path",{d:"M10.2002 20.0003C12.9518 20.0003 15.2723 19.1147 16.963 17.5862L13.6753 15.0875C12.7606 15.6975 11.5797 16.0429 10.2039 16.0429C7.54224 16.0429 5.28544 14.2828 4.4757 11.9165H1.08301V14.4923C2.81497 17.8691 6.34261 20.0003 10.2002 20.0003Z",fill:"#34A853"}),(0,i.jsx)("path",{d:"M4.47227 11.9163C4.04491 10.6743 4.04491 9.32947 4.47227 8.0875V5.51172H1.08333C-0.363715 8.33737 -0.363715 11.6664 1.08333 14.4921L4.47227 11.9163Z",fill:"#FBBC04"}),(0,i.jsx)("path",{d:"M10.2002 3.95756C11.6547 3.93552 13.0605 4.47198 14.1139 5.45674L17.0268 2.60169C15.1824 0.904099 12.7344 -0.0292099 10.2002 0.000185607C6.34261 0.000185607 2.81497 2.13136 1.08301 5.51185L4.47195 8.08764C5.27795 5.71762 7.53849 3.95756 10.2002 3.95756Z",fill:"#EA4335"})]})})},440567:(e,t,n)=>{n.d(t,{W:()=>i().W});var i=()=>n(214924)},877691:(e,t,n)=>{n.d(t,{J:()=>o});n(667294);var i=n(785893);const o=(0,n(827282).IU)("layout",{viewBox:"0 0 14 14",svg:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.39999 2.19999C2.28953 2.19999 2.19999 2.28953 2.19999 2.39998V11.5999C2.19999 11.7103 2.28953 11.7999 2.39999 11.7999H4.99997C5.11042 11.7999 5.19997 11.7103 5.19997 11.5999V2.39998C5.19997 2.28953 5.11042 2.19999 4.99997 2.19999H2.39999ZM1 2.39998C1 1.6268 1.62679 1 2.39999 1H4.99997C5.77316 1 6.39995 1.6268 6.39995 2.39998V11.5999C6.39995 12.3731 5.77316 12.9999 4.99997 12.9999H2.39999C1.62679 12.9999 1 12.3731 1 11.5999V2.39998ZM9 8.80036C8.88954 8.80036 8.8 8.88991 8.8 9.00036V11.6003C8.8 11.7108 8.88954 11.8003 9 11.8003H11.6C11.7105 11.8003 11.8 11.7108 11.8 11.6003V9.00036C11.8 8.88991 11.7105 8.80036 11.6 8.80036H9ZM7.60001 9.00036C7.60001 8.22717 8.2268 7.60037 9 7.60037H11.6C12.3731 7.60037 13 8.22717 13 9.00036V11.6003C13 12.3736 12.3731 13.0003 11.6 13.0003H9C8.2268 13.0003 7.60001 12.3736 7.60001 11.6003V9.00036ZM8.79994 2.39998C8.79994 2.28953 8.88949 2.19999 8.99994 2.19999H11.5999C11.7104 2.19999 11.7999 2.28953 11.7999 2.39998V4.99997C11.7999 5.11043 11.7104 5.19996 11.5999 5.19996H8.99994C8.88949 5.19996 8.79994 5.11043 8.79994 4.99997V2.39998ZM8.99994 1C8.22675 1 7.59995 1.6268 7.59995 2.39998V4.99997C7.59995 5.77316 8.22675 6.39995 8.99994 6.39995H11.5999C12.3731 6.39995 12.9999 5.77316 12.9999 4.99997V2.39998C12.9999 1.6268 12.3731 1 11.5999 1H8.99994Z"})})},528921:(e,t,n)=>{n.d(t,{N:()=>o});n(667294);var i=n(785893);const o=(0,n(827282).IU)("ledger",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M.706 4.113c0 .41.273.677.697.677h1.778v8.388c0 1.435.704 2.146 2.14 2.146h7.813c1.299 0 2.153-.889 2.153-2.235v-1.86c0-.41-.273-.676-.697-.676h-.567V2.95c0-1.429-.711-2.146-2.12-2.146H2.497c-1.066 0-1.79.724-1.79 1.866v1.442Zm3.575 9.072V2.67c0-.28-.027-.54-.082-.766h7.643c.71 0 1.08.376 1.08 1.06v7.588H7.05c-.424 0-.704.266-.704.676v1.956c0 .622-.431 1.039-1.026 1.039-.608 0-1.039-.438-1.039-1.04ZM1.807 3.689V2.671c0-.479.294-.766.69-.766.41 0 .684.287.684.766v1.018H1.807ZM6.25 4.797h4.703a.413.413 0 0 0 .424-.424.412.412 0 0 0-.424-.417H6.25a.418.418 0 0 0-.43.417c0 .24.184.424.43.424Zm0 2.386h2.454a.406.406 0 0 0 .424-.41c0-.24-.178-.431-.424-.431H6.25a.425.425 0 0 0-.43.43c0 .233.184.41.43.41Zm.93 7.04c.17-.3.266-.67.266-1.114v-1.456h6.74v1.436c0 .677-.423 1.135-1.052 1.135H7.18Z"})})},399673:(e,t,n)=>{n.d(t,{S:()=>o});n(667294);var i=n(785893);const o=(0,n(827282).IU)("logout",{viewBox:"0 0 30 30",svg:(0,i.jsx)("path",{d:"M17,24l9-9l-9-9l-1.406,1.406L22.188,14H8v2h14.188l-6.594,6.594L17,24z M6,4h16V2H4v26h18v-2H6V4z"})})},448045:(e,t,n)=>{n.d(t,{$:()=>o});n(667294);var i=n(785893);const o=(0,n(827282).IU)("minus",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M3.037 8.844h9.92a.705.705 0 00.368-.103.825.825 0 00.28-.28.73.73 0 000-.773.752.752 0 00-.28-.28.705.705 0 00-.369-.102H3.037a.705.705 0 00-.369.102.824.824 0 00-.28.28.73.73 0 000 .772.914.914 0 00.28.281.705.705 0 00.37.103z"})})},174674:(e,t,n)=>{n.d(t,{D:()=>o});n(667294);var i=n(785893);const o=(0,n(827282).IU)("notionCalendarLogo",{viewBox:"0 0 20 21",svg:(0,i.jsxs)("svg",{width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",children:[(0,i.jsxs)("g",{clipPath:"url(#clip0_970_53429)",children:[(0,i.jsx)("path",{d:"M2.17141 17.1924C1.81019 17.1884 1.48919 17.0958 1.23979 16.8633C1.23979 16.8633 1.23899 16.8633 1.23819 16.8617C1.20922 16.8336 1.18187 16.8046 1.15613 16.7756C0.959022 16.5504 0.852023 16.2615 0.852023 15.9494L0.849609 3.0915C0.849609 2.34732 1.47712 1.67957 2.21968 1.63371L15.0636 0.838839C15.0918 0.83723 15.1191 0.836426 15.1473 0.836426C15.4683 0.836426 15.7675 0.952277 15.996 1.16789C16.0274 1.19766 16.0572 1.22823 16.0845 1.26041C16.1585 1.34488 16.2197 1.43821 16.268 1.53877C16.2205 1.43901 16.1585 1.34569 16.0845 1.26121C16.2768 1.48487 16.3822 1.76967 16.3822 2.07861V2.40766C16.3822 2.40766 16.3902 2.67717 16.1231 2.69487L16.1247 2.69648L4.3114 3.43664C3.44494 3.49055 2.741 4.24117 2.741 5.10925C2.741 5.10925 2.73617 16.9768 2.73537 16.9961C2.72652 17.1924 2.56481 17.1924 2.43127 17.1924H2.17141Z",fill:"black"}),(0,i.jsx)("path",{d:"M19.1589 18.1882C19.1589 18.2075 19.1573 18.2269 19.1556 18.2462C19.1275 18.6589 18.7984 19.0225 18.3938 19.0973C18.3857 19.0973 18.3777 19.0998 18.3696 19.0998L4.66812 19.9292H4.62548C4.35758 19.9155 4.10979 19.8126 3.91671 19.6307C3.7003 19.4272 3.57882 19.1488 3.56997 18.8439C3.56997 18.8319 3.56836 18.8198 3.56836 18.8069V5.19278C3.56836 5.17347 3.56836 5.15497 3.56997 5.13566C3.59974 4.6988 3.96498 4.31746 4.40102 4.2724C4.41229 4.2724 4.42355 4.26919 4.43481 4.26838L17.5531 3.44616L18.1436 3.40915C18.1653 3.40754 18.187 3.40674 18.2087 3.40674C18.4557 3.40674 18.6858 3.49604 18.862 3.66097C18.9851 3.77601 19.072 3.92002 19.1186 4.08012C19.1388 4.14851 19.1508 4.22011 19.1556 4.29332V13.1785L19.1589 18.1874V18.1882Z",fill:"black"}),(0,i.jsx)("path",{d:"M20.001 4.36907C20.001 3.86302 19.8023 3.3972 19.4402 3.0577C19.0782 2.71819 18.6011 2.54763 18.0967 2.57981L17.3928 2.62245C17.2166 2.62808 17.2246 2.49212 17.2246 2.49212V2.08583C17.2246 1.49692 16.9929 0.955478 16.5722 0.560458C16.1514 0.165437 15.5955 -0.0324757 15.009 0.00372785L2.16349 0.798596C0.97121 0.872612 0.000976562 1.90482 0.000976562 3.09953L0.00339008 15.9574C0.00339008 16.5455 0.235088 17.0878 0.655844 17.4836C1.04442 17.8488 1.54724 18.0468 2.08465 18.0468C2.12889 18.0468 2.55448 18.0387 2.55448 18.0387C2.70975 18.0387 2.73549 18.1103 2.73549 18.2439V18.9012C2.73549 19.4289 2.94547 19.9157 3.32278 20.2705C3.67113 20.5979 4.12246 20.7749 4.60436 20.7749C4.62366 20.7749 4.64217 20.7733 4.66148 20.7733C4.67113 20.7733 4.67998 20.7749 4.68963 20.7749C4.73147 20.7749 4.7733 20.7733 4.81594 20.7709L18.3477 19.9519C18.4081 19.9478 18.4668 19.9406 18.5255 19.931C19.3461 19.8304 19.9994 19.1071 19.9994 18.2728L19.9978 18.2648C19.9978 18.2415 20.001 18.2181 20.001 18.1948V4.36907ZM2.17153 17.1996C1.81031 17.1956 1.48931 17.1031 1.23991 16.8705C1.23991 16.8705 1.23911 16.8705 1.23831 16.8689C1.20934 16.8408 1.18199 16.8118 1.15625 16.7829C0.959142 16.5576 0.852143 16.2688 0.852143 15.9566L0.84973 3.09873C0.84973 2.35454 1.47724 1.68679 2.2198 1.64093L15.0637 0.846063C15.0919 0.844454 15.1192 0.84365 15.1474 0.84365C15.4684 0.84365 15.7677 0.959501 15.9961 1.17511C16.0275 1.20488 16.0573 1.23545 16.0846 1.26763C16.1587 1.35211 16.2198 1.44543 16.2681 1.546C16.2206 1.44624 16.1587 1.35291 16.0846 1.26844C16.2769 1.49209 16.3823 1.7769 16.3823 2.08583V2.41488C16.3823 2.41488 16.3904 2.6844 16.1233 2.7021L16.1249 2.70371L4.31152 3.44387C3.44506 3.49777 2.74112 4.24839 2.74112 5.11647C2.74112 5.11647 2.73629 16.984 2.73549 17.0033C2.72664 17.1996 2.56493 17.1996 2.43139 17.1996H2.17153ZM19.1635 18.1948C19.1635 18.2141 19.1619 18.2334 19.1603 18.2527C19.1321 18.6654 18.8031 19.0291 18.3984 19.1039C18.3904 19.1039 18.3823 19.1063 18.3743 19.1063L4.67274 19.9358H4.6301C4.3622 19.9221 4.11441 19.8191 3.92133 19.6373C3.70492 19.4338 3.58344 19.1554 3.57459 18.8505C3.57459 18.8384 3.57298 18.8263 3.57298 18.8135V5.19934C3.57298 5.18003 3.57298 5.16152 3.57459 5.14221C3.60436 4.70536 3.9696 4.32402 4.40564 4.27896C4.41691 4.27896 4.42817 4.27574 4.43943 4.27494L17.5577 3.45272L18.1482 3.41571C18.1699 3.4141 18.1916 3.4133 18.2134 3.4133C18.4603 3.4133 18.6904 3.5026 18.8666 3.66752C18.9897 3.78257 19.0766 3.92658 19.1233 4.08668C19.1434 4.15507 19.1554 4.22667 19.1603 4.29988V13.185L19.1635 18.194V18.1948Z",fill:"white"}),(0,i.jsx)("path",{d:"M17.1877 17.7582L5.7163 18.426C5.24727 18.459 4.83215 18.2997 4.84502 17.685V8.11764C4.84502 7.7894 5.11533 7.57942 5.4138 7.56413L17.3398 6.84891C17.6375 6.83362 17.8812 7.04924 17.8812 7.34771V16.932C17.8812 17.2828 17.7935 17.7341 17.1901 17.7574H17.1885L17.1877 17.7582Z",fill:"white"}),(0,i.jsx)("path",{d:"M8.39759 10.4651C7.83685 10.4997 7.64699 10.9277 7.64779 11.5858V11.7016C7.58102 11.7177 7.5247 11.7322 7.45712 11.7362C7.05326 11.7612 6.76203 11.4329 6.76123 10.844C6.76042 9.94293 7.56654 9.09577 9.10234 9.00003C10.47 8.91475 11.3453 9.57607 11.3469 10.7426C11.3469 11.6204 10.6196 12.2439 9.90282 12.4386C11.248 12.5045 11.8095 13.2551 11.8111 14.2141C11.8127 15.8546 10.614 16.7838 8.76445 16.8988L8.71939 16.9012C7.32921 16.9881 6.35334 16.4596 6.35254 15.5472C6.35254 15.0275 6.73227 14.5882 7.30427 14.552C7.34932 14.5488 7.39357 14.5577 7.43862 14.5553C7.55206 15.4837 8.18037 15.8256 8.80789 15.787C9.41288 15.7492 9.83846 15.3413 9.83846 14.7636V14.7403C9.83766 13.8392 9.08625 13.7942 7.9535 13.7491L7.77329 12.6743C8.8272 12.4812 9.35334 12.1369 9.35254 11.5134C9.35254 10.8432 8.98166 10.4273 8.3984 10.4643H8.39759V10.4651Z",fill:"black"}),(0,i.jsx)("path",{d:"M13.4544 10.0227C12.3338 10.3469 12.0868 9.85373 12.2091 9.33803C12.8816 9.18034 14.6298 8.65579 15.2911 8.41846L15.2992 15.3374L16.5212 15.5152C16.5212 15.9657 16.2638 16.2473 15.8044 16.2762C15.4231 16.2996 14.5373 16.3317 14.1117 16.3583C13.4504 16.3993 12.2396 16.4983 12.2396 16.4983C12.2058 16.4082 12.1946 16.3165 12.1946 16.2352C12.1946 16.0156 12.2839 15.7903 12.5751 15.6913L13.4601 15.4049L13.4536 10.0227H13.4544Z",fill:"black"})]}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_970_53429",children:(0,i.jsx)("rect",{width:"20",height:"20.7752",fill:"white"})})})]})})},209078:(e,t,n)=>{n.d(t,{W:()=>o});n(667294);var i=n(785893);const o=(0,n(827282).IU)("options",{viewBox:"0 0 17 15",svg:(0,i.jsx)("path",{d:"M11.287 4.484c.844 0 1.57-.53 1.875-1.265h2.57c.391 0 .72-.344.72-.758 0-.414-.329-.75-.72-.75h-2.57A2.023 2.023 0 0 0 11.287.437c-.852 0-1.578.532-1.875 1.274H1.045a.744.744 0 0 0-.742.75.75.75 0 0 0 .742.758h8.367a2.044 2.044 0 0 0 1.875 1.265Zm0-1.062c-.539 0-.96-.43-.96-.961 0-.547.421-.969.96-.969.547 0 .961.422.961.969a.95.95 0 0 1-.96.96ZM1.021 6.586c-.39 0-.718.336-.718.75 0 .406.328.75.718.75h2.657A2.03 2.03 0 0 0 5.56 9.359c.843 0 1.57-.523 1.875-1.273h8.273a.744.744 0 0 0 .742-.75.744.744 0 0 0-.742-.75H7.436A2.032 2.032 0 0 0 5.56 5.32c-.852 0-1.579.524-1.883 1.266H1.02Zm4.54 1.719a.964.964 0 0 1-.97-.97c0-.546.43-.96.97-.96.539 0 .96.414.96.96 0 .54-.421.97-.96.97Zm5.726 5.93c.852 0 1.578-.532 1.875-1.274h2.57c.391 0 .72-.336.72-.75a.734.734 0 0 0-.72-.75h-2.57a2.023 2.023 0 0 0-1.875-1.274c-.844 0-1.578.532-1.875 1.274H1.045a.744.744 0 0 0-.742.75c0 .406.328.75.742.75h8.367a2.023 2.023 0 0 0 1.875 1.273Zm0-1.063c-.539 0-.96-.43-.96-.961 0-.547.421-.961.96-.961a.94.94 0 0 1 .961.96.95.95 0 0 1-.96.962Z"})})},795269:(e,t,n)=>{n.d(t,{c:()=>o});n(667294);var i=n(785893);const o=(0,n(827282).IU)("pageErrorUnsafe",{viewBox:"0 0 72 72",svg:(0,i.jsx)("path",{d:"M36 68C36.5 68 37.2812 67.8125 38.0625 67.4062C55.8438 58.0938 61.5625 53.4375 61.5625 42.2188V18.6562C61.5625 15.4375 60.1875 14.4062 57.5625 13.3125C53.9062 11.8125 42.2188 7.5625 38.5938 6.3125C37.75 6.03125 36.875 5.875 36 5.875C35.125 5.875 34.25 6.0625 33.4375 6.3125C29.7812 7.5 18.0938 11.8438 14.4375 13.3125C11.8438 14.375 10.4375 15.4375 10.4375 18.6562V42.2188C10.4375 53.4375 16.4688 57.5625 33.9375 67.4062C34.75 67.8438 35.5 68 36 68ZM36 41.5938C34.375 41.5938 33.5 40.6875 33.4688 39.0312L33.0312 22C33 20.3438 34.2188 19.1562 35.9688 19.1562C37.6875 19.1562 38.9688 20.375 38.9375 22.0312L38.5 39.0312C38.4688 40.7188 37.5625 41.5938 36 41.5938ZM36 52.0625C34.125 52.0625 32.5 50.5625 32.5 48.7188C32.5 46.875 34.0938 45.3438 36 45.3438C37.9062 45.3438 39.5 46.8438 39.5 48.7188C39.5 50.5938 37.875 52.0625 36 52.0625Z"})})},281214:(e,t,n)=>{n.d(t,{f:()=>i().f});var i=()=>n(483586)},617691:(e,t,n)=>{n.d(t,{A:()=>o});n(667294);var i=n(785893);const o=(0,n(827282).IU)("pinStrikethrough",{viewBox:"0 0 15 19",svg:(0,i.jsx)("path",{d:"M3.094 1.328c0 .227.094.492.297.758.398.531 1.343 1.266 2.328 1.914l-.055.86 1.149 1.156.156-2.594c.008-.11-.008-.149-.086-.188-1.172-.601-2.078-1.312-2.14-1.468-.063-.102.007-.164.085-.164h6.68c.086 0 .148.062.086.164-.063.156-.961.867-2.14 1.468-.071.04-.087.079-.079.188l.234 3.875a7.12 7.12 0 00-1.437-.14h-.203l1.203 1.226c2.164.219 3.758 1.984 3.758 3.234 0 .04-.008.078-.008.117l.844.97c.257-.157.468-.477.468-.93 0-1.649-1.32-3.313-3.359-4.11L10.617 4c.992-.648 1.93-1.383 2.336-1.914.203-.266.297-.531.297-.758 0-.476-.367-.828-.914-.828H4.008c-.555 0-.914.352-.914.828zM.367 2.656l14.125 14.11a.603.603 0 00.852 0 .597.597 0 000-.852L1.227 1.804a.606.606 0 00-.86 0 .618.618 0 000 .852zm1.735 9.117c0 .665.445 1.102 1.148 1.102h4.234v3.648c0 1.196.493 2.188.688 2.188.195 0 .687-.992.687-2.188V12.97h.446L8.03 11.695H3.562c-.171 0-.257-.101-.226-.312.094-.875.828-1.805 1.984-2.399l-.82-.82c-1.477.867-2.398 2.234-2.398 3.61z"})})},695404:(e,t,n)=>{n.d(t,{L:()=>i().L});var i=()=>n(175771)},795941:(e,t,n)=>{n.d(t,{y:()=>o});n(667294);var i=n(785893);const o=(0,n(827282).IU)("settingsNotificationsAndPersonal",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M12.5361 7.54883C13.2744 7.54883 13.9033 7.09082 14.1631 6.44141H16.4258C16.7607 6.44141 17.0479 6.14746 17.0479 5.79199C17.0479 5.43652 16.7676 5.14258 16.4258 5.14258H14.1699C13.9102 4.49316 13.2744 4.03516 12.5361 4.03516C11.7979 4.03516 11.1621 4.49316 10.9023 5.14258H3.59473C3.23242 5.14258 2.95215 5.43652 2.95215 5.79199C2.95215 6.14746 3.23926 6.44141 3.59473 6.44141H10.9023C11.1621 7.09082 11.7979 7.54883 12.5361 7.54883ZM12.5361 6.62598C12.0713 6.62598 11.6953 6.25684 11.6953 5.79199C11.6953 5.31348 12.0713 4.95117 12.5361 4.95117C13.0078 4.95117 13.3701 5.31348 13.3701 5.79199C13.3701 6.25684 13.0078 6.62598 12.5361 6.62598ZM3.56738 9.40137C3.23242 9.40137 2.95215 9.68848 2.95215 10.0508C2.95215 10.3994 3.23926 10.6934 3.56738 10.6934H5.91211C6.16504 11.3428 6.80078 11.8076 7.5459 11.8076C8.27734 11.8076 8.91309 11.3428 9.17285 10.6934H16.4053C16.7607 10.6934 17.0479 10.4062 17.0479 10.0508C17.0479 9.68848 16.7676 9.40137 16.4053 9.40137H9.17285C8.91309 8.75195 8.27734 8.29395 7.5459 8.29395C6.80762 8.29395 6.17188 8.75195 5.91211 9.40137H3.56738ZM7.5459 10.8848C7.07422 10.8848 6.70508 10.5156 6.70508 10.0508C6.70508 9.57227 7.07422 9.20996 7.5459 9.20996C8.01758 9.20996 8.37988 9.57227 8.37988 10.0508C8.37988 10.5156 8.01758 10.8848 7.5459 10.8848ZM12.5361 16.0596C13.2744 16.0596 13.9102 15.6016 14.1699 14.9521H16.4258C16.7607 14.9521 17.0479 14.6582 17.0479 14.3027C17.0479 13.9404 16.7676 13.6533 16.4258 13.6533H14.1631C13.9102 13.0039 13.2744 12.5459 12.5361 12.5459C11.7979 12.5459 11.1621 13.0039 10.9023 13.6533H3.59473C3.23242 13.6533 2.95215 13.9473 2.95215 14.3027C2.95215 14.6582 3.23926 14.9521 3.59473 14.9521H10.9023C11.1621 15.6016 11.7979 16.0596 12.5361 16.0596ZM12.5361 15.1436C12.0713 15.1436 11.6953 14.7676 11.6953 14.3027C11.6953 13.8311 12.0713 13.4619 12.5361 13.4619C13.0078 13.4619 13.3701 13.8311 13.3701 14.3027C13.3701 14.7676 13.0078 15.1436 12.5361 15.1436Z"})})},738740:(e,t,n)=>{n.d(t,{k:()=>b});var i=n(667294),o=()=>n(219727),s=()=>n(142735),a=()=>n(846550),r=()=>n(61951),l=()=>n(317924),d=()=>n(879952),c=()=>n(990966),u=()=>n(573357),p=()=>n(708518),m=()=>n(764767),g=()=>n(205228),f=()=>n(148126),h=()=>n(838266),y=()=>n(110372),v=()=>n(878797),x=n(785893);function b(e){const{messageKey:t,desktopRenderInner:n,desktopInnerStyle:i,desktopOnDismiss:d,phoneRenderInner:c,phoneInnerStyle:m}=e,b=(0,o().O7)(),M=(0,o().Fy)(),j=(0,a().yK)((e=>({modalStyle:{background:e.surface.wash,borderRadius:12,...i}})),[i]),C=(0,s().VK)((()=>{var e;const t=(0,l().w_)(b.TabbedRouterStore.state);return"web"===t.type&&((null===(e=t.redirectedTo)||void 0===e?void 0:e.route)||t.route)}),[b.TabbedRouterStore]),w=(0,s().VK)((()=>!(M.isPhone&&(0,f().__)(b)&&(!C||"page"!==C.name))&&!g().default.isAdminMode&&!h().default.state.open),[M.isPhone,b,C]),k=(0,s().VK)((()=>v().default.isVisible(t)),[t])&&w;return(0,r().Z)((()=>{y().gF(b,{callout_key:t,is_forced:v().default.isForced(t)})}),k),k?M.isPhone?(0,x.jsx)(S,{messageKey:t,renderInner:c,innerStyle:m}):(0,x.jsx)(p().Z,{open:!0,preventHideChildrenWhileOpening:!0,onDismiss:d,innerStyle:j.modalStyle,render:()=>(0,x.jsx)(u().Z,{capture:!0,allowEsc:!0,render:n})}):null}function S(e){const{renderInner:t,innerStyle:n,messageKey:s}=e,a=(0,o().O7)(),r=(0,i.useCallback)((()=>{y().bl(a,{callout_key:s,dismiss_type:"modal_background_clicked"})}),[a,s]),l=(0,i.useCallback)((()=>{y().bl(a,{callout_key:s,dismiss_type:"modal_dismiss_clicked"})}),[a,s]);return(0,i.useEffect)((()=>{d().ZH({environment:a}),c().blurActiveElement()}),[a]),(0,x.jsx)(m().n,{renderInner:t,innerStyle:n,onDismiss:r,onClosed:l})}},620770:(e,t,n)=>{n.d(t,{p:()=>k});var i=n(667294),o=()=>n(219727),s=()=>n(142735),a=()=>n(61951),r=()=>n(573357),l=()=>n(708518),d=()=>n(838266),c=()=>n(803728),u=()=>n(110372),p=()=>n(878797),m=()=>n(846550),g=()=>n(707513),f=()=>n(212493),h=()=>n(779300),y=()=>n(408478),v=()=>n(729775),x=()=>n(661641),b=()=>n(388957),S=n(785893);function M(e){const{src:t}=e,n=(0,m().yK)((()=>({container:{width:480,height:294,marginLeft:-16,marginTop:-16,overflow:"hidden"},img:{width:480}})),[]);return(0,S.jsx)("div",{style:n.container,children:t?(0,S.jsx)("img",{src:t,style:n.img}):void 0})}function j(e){const{title:t,body:n,badge:i}=e,o=(0,m().yK)((e=>({container:{paddingRight:8,paddingBottom:12,paddingLeft:8,paddingTop:24},body:{maxWidth:380}})),[]);return(0,S.jsxs)(f().jX,{style:o.container,gap:4,children:[(0,S.jsxs)(f().jX,{direction:"row",align:"center-left",width:"hug",gap:8,children:[(0,S.jsx)(x().q,{styleName:"UITitle-26px/Bold",colorName:"primary",children:t}),i]}),(0,S.jsx)(x().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",customStyles:o.body,children:n})]})}function C(e){const{link:t,secondary:n,primary:i}=e,o=(0,m().yK)((e=>({container:{marginTop:16,height:40},link:{color:e.text.secondary,borderRadius:6,padding:"4px 8px",display:"flex",alignItems:"center"},externalLinkIcon:{width:16},secondary:{color:e.text.secondary,padding:"0 12px",borderRadius:6,height:32,display:"flex",alignItems:"center"},primary:{padding:"0 12px",borderRadius:6,height:32,fontSize:g().JB.UIRegular.desktop,fontWeight:g().Ue.semibold}})),[]);let s=(0,S.jsx)("div",{});t&&(s=(0,S.jsxs)(v().Z,{onClick:t.onClick,style:o.link,external:t.external,children:[(0,S.jsx)(x().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:t.text}),t.external?(0,b().K)(o.externalLinkIcon):void 0]}));const a=n?(0,S.jsx)(v().Z,{onClick:n.onClick,style:o.secondary,external:n.external,children:(0,S.jsx)(x().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:n.text})}):void 0,r=i?(0,S.jsx)(h().h,{styles:o.primary,onClick:i.onClick,children:i.text}):void 0;return(0,S.jsxs)(f().jX,{style:o.container,direction:"row",align:"center",gap:"auto",children:[s,(0,S.jsxs)(f().jX,{direction:"row",gap:8,align:"center",width:"hug",children:[a,r]})]})}function w(e){const{title:t,body:n,primary:i,secondary:o,link:s,imageSrc:a,onDismiss:r,badge:l}=e,d=(0,m().yK)((e=>({container:{width:480,padding:16,position:"relative",backgroundColor:e.surface.wash}})),[]);return(0,S.jsxs)(f().jX,{style:d.container,direction:"column",children:[(0,S.jsx)(M,{src:a}),(0,S.jsx)(j,{title:t,body:n,badge:l}),(0,S.jsx)(C,{primary:i,secondary:o,link:s}),(0,S.jsx)(y().Z,{onClick:r})]})}function k(e){const{message:t}=e,n=(0,o().O7)(),m=(0,s().VK)((()=>!d().default.state.open&&!n.device.isMobile),[n]),g=(0,s().VK)((()=>m&&p().default.isVisible(t.key)),[t,m]);(0,a().Z)((()=>{u().gF(n,{callout_key:t.key})}),g);const f=(0,i.useCallback)((()=>{u().bl(n,{callout_key:t.key,dismiss_type:"modal_dismiss_clicked"}),c().pl(n,t)}),[n,t]),h=(0,i.useCallback)(((e,i)=>()=>{u().lZ(n,{callout_key:t.key,click_type:e}),null==i||i()}),[n,t]);let y;var v;e.primary&&(y={...e.primary,onClick:h("primary_cta",null===(v=e.primary)||void 0===v?void 0:v.onClick)});let x;var b;e.secondary&&(x={...e.secondary,onClick:h("secondary_cta",null===(b=e.secondary)||void 0===b?void 0:b.onClick)});let M;var j;e.link&&(M={...e.link,onClick:h("learn_more",null===(j=e.link)||void 0===j?void 0:j.onClick)});return g?(0,S.jsx)(l().Z,{open:!0,preventHideChildrenWhileOpening:!0,onDismiss:f,render:()=>(0,S.jsx)(r().Z,{capture:!0,allowEsc:!0,render:()=>(0,S.jsx)(w,{...e,onDismiss:f,primary:y,secondary:x,link:M})})}):null}},264305:(e,t,n)=>{n.r(t),n.d(t,{DummyModal:()=>d});n(667294);var i=()=>n(714230),o=()=>n(788860),s=()=>n(620770),a=n(785893);function r(e){const{messageKey:t}=e,n={id:"",key:t,type:"static",props:{}};return(0,a.jsx)(s().p,{...e,message:n})}const l=(0,o().vU)({title:{id:"dummyModal.title",defaultMessage:"Dummy Modal"},body:{id:"dummyModal.body",defaultMessage:"This is the body for the dummy modal."},primaryButton:{id:"dummyModal.primaryButton",defaultMessage:"Primary"},secondaryButton:{id:"dummyModal.secondaryButton",defaultMessage:"Secondary"},learnMore:{id:"dummyModal.learnMore",defaultMessage:"Learn More"}});function d(){const e=(0,o().YB)();return(0,a.jsx)(r,{messageKey:"dummy_modal",title:e.formatMessage(l.title),body:e.formatMessage(l.body),imageSrc:i().Z.images.sites.sitesLaunchModalPng,primary:{text:e.formatMessage(l.primaryButton)},secondary:{text:e.formatMessage(l.secondaryButton)},link:{text:e.formatMessage(l.learnMore),external:!0}})}},216697:(e,t,n)=>{n.d(t,{E:()=>a});var i=()=>n(799891),o=()=>n(792409),s=()=>n(123398);async function a(e){const{environment:t,onInviteComplete:n,onInviteClick:a,flowId:r,intl:l,spaceStore:d,inviteTargetsStore:c,inviteOrigin:u,onError:p}=e;let m={success:!1};try{const e=await s().sR.personPropertyInviteActions.load();m=await e.inviteToSpaceAsMembers({environment:t,spaceStore:d,from:u,flowId:r,intl:l,inviteTargetsStore:c,onInviteStart:()=>{null==a||a()}})}catch(g){null==p||p(g),i().log({level:"error",from:"contactsImportsInviteActions",type:"handleMemberInvite",error:(0,o().Ui)(g)})}finally{null==n||n(m)}}},336932:(e,t,n)=>{n.d(t,{x:()=>s});n(667294);var i=()=>n(788860),o=n(785893);function s(e){let{totalInviteCount:t}=e;return 0===t?(0,o.jsx)(i()._H,{id:"invite.contacts_imports.button.title.no_selected",defaultMessage:"Add members",values:{totalInviteCount:t}}):(0,o.jsx)(i()._H,{id:"invite.contacts_imports.button.title.selected",defaultMessage:"Add {totalInviteCount} {totalInviteCount, plural, one {member} other {members}}",values:{totalInviteCount:t}})}},648905:(e,t,n)=>{n.d(t,{K:()=>r});n(667294);var i=()=>n(846550),o=()=>n(568017),s=()=>n(15409),a=n(785893);function r(e){const{checked:t}=e,n=(0,i().yK)((e=>({circleCheckmark:{display:"flex",justifyContent:"center",alignItems:"center",width:18,height:18,borderRadius:"50%",borderStyle:"solid",borderWidth:1.75,borderColor:t?o().ZP.blue:e.buttonPressedBackground,backgroundColor:t?o().ZP.blue:"transparent"},checkIcon:{height:12,width:12,color:"white"}})),[t]);return(0,a.jsx)("div",{style:n.circleCheckmark,children:t&&(0,s().e)(n.checkIcon)})}},376429:(e,t,n)=>{n.d(t,{u:()=>r});n(667294);var i=()=>n(788860),o=()=>n(838367),s=()=>n(64131),a=n(785893);function r(e){let{isLoading:t}=e;return(0,a.jsx)(s().l,{loading:t,children:(0,a.jsx)(o().Z,{title:(0,a.jsx)(i()._H,{id:"contactsImportsInviteSearchRequest.searchInput.errorMessage",defaultMessage:"Something went wrong"})})})}},563946:(e,t,n)=>{n.r(t),n.d(t,{SlackImportsInviteWithModal:()=>W,shouldEnableSlackImportsInvite:()=>G});var i=n(667294),o=()=>n(219727),s=()=>n(142735),a=()=>n(846550),r=()=>n(714230),l=()=>n(788860),d=()=>n(832024),c=()=>n(643051),u=()=>n(923550),p=()=>n(602137),m=()=>n(876822),g=()=>n(257934),f=()=>n(815277),h=()=>n(842576),y=()=>n(188447);let v=function(e){return e.SearchInput="search_input",e.NoFocus="no_focus",e}({});class x extends(()=>n(263184))().default{getInitialState(){return{flowId:n(956057).Il(),modalOpen:!1,focus:v.NoFocus}}}const b=x;var S=()=>n(720866),M=()=>n(692304),j=(n(267602),n(653476),n(241792),n(785893));const C=function(e){const{slackImportsInviteStore:t,inviteTargetsStore:a,inviteOrigin:r,onInviteComplete:c,onInviteClick:u}=e,p=(0,o().O7)(),g=(0,l().YB)(),f=(0,h().M6)(),y=(0,s().VK)((()=>m().default.state.currentSpaceStore),[]),x=(0,s().VK)((()=>t.state.flowId),[t]),b=(0,s().VK)((()=>a.state.inviteTargets.length),[a]),M=(0,i.useCallback)((async e=>{const{response:i,invitedUserEmails:o}=e;d().u0(p,{invite_stage:"invite_complete",invite_flow_id:x,origin:r,is_success:i.success,invited_user_count:o.length}),i.success&&t.setState({...t.state,modalOpen:!1}),null==c||c(i.success,b);(await n(123398).sR.personPropertyInviteActions.load()).showMessageForInviteComplete({success:i.success,invitedUserEmails:o})}),[r,p,x,c,t,b]),C=(0,i.useCallback)((e=>{const t=(0,S().t)(e);d().u0(p,{invite_stage:"invite_member",invited_user_count:b,invite_flow_id:x,error:t,origin:r,is_success:!1})}),[p,x,r,b]),w=(0,i.useCallback)((async()=>{const e=a.state.inviteTargets.filter((e=>"newUser"===e.type||"existingUser"===e.type)).map((e=>e.value.email));if(!y)return null;await n(216697).E({environment:p,spaceStore:y,flowId:x,intl:g,inviteTargetsStore:a,inviteOrigin:r,onInviteComplete:t=>M({response:t,invitedUserEmails:e}),onInviteClick:u,onError:C}),a.reset()}),[y,p,x,a,g,r,u,M,C]),k=(0,i.useCallback)((async()=>{t.setState({...t.state,focus:v.NoFocus}),d().AK(p,{invited_user_count:b,origin:r,inviteTargets:a.state.inviteTargets.map((e=>e.type.toString())),inviteTokenQuery:a.state.tokenQuery,invite_flow_id:x}),await w()}),[w,p,x,r,t,a,b]);return(0,j.jsx)("div",{style:f.footerStyle,children:(0,j.jsx)(n(906651).Z,{isLarge:!0,style:{borderRadius:6},onClick:k,disabled:0===b,children:(0,j.jsx)(n(336932).x,{totalInviteCount:b})})})};var w=()=>n(67961);const k=function(e){const{isLoading:t}=e,i=(0,h().wg)(),o=t?(0,j.jsx)(n(312578).Z,{style:{marginLeft:6}}):null;return(0,j.jsxs)("div",{style:i.topContainer,children:[(0,j.jsx)(w().Z,{style:i.sendInviteLabel,children:(0,j.jsx)(l()._H,{id:"invite.slack_imports.header_title",defaultMessage:"Import from Slack"})}),o]})};var _=()=>n(930085),T=()=>n(122671);const I=function(e){const{inviteTargetsStore:t,slackImportsInviteStore:a,inviteOrigin:r}=e,d=(0,l().YB)(),c=(0,o().O7)(),{tokenQuery:u}=(0,s().VK)((()=>{const{tokenQuery:e}=t.state;return{tokenQuery:e}}),[t]),{focus:p,flowId:m}=(0,s().VK)((()=>({focus:a.state.focus===v.SearchInput,flowId:a.state.flowId})),[a]),g=(0,h().$w)({focus:p}),f=d.formatMessage({id:"invite.slack_imports.search.placeholder",defaultMessage:"Search people, emails..."}),y=(0,n(356140).W)(),x=(0,n(661769).nL)({spaceId:y}),b=(0,i.useCallback)((e=>{t.setState({...t.state,tokenQuery:e.target.value}),P({environment:c,flowId:m,billingData:x,origin:r})}),[t,m,r,c,x]);return(0,j.jsx)("div",{style:g.searchBar,children:(0,j.jsx)(T().ZP,{focus:p,onClick:()=>{a.setState({...a.state,focus:v.SearchInput})},format:T().UR.Share,value:u,onChange:b,type:"email",tokens:[],autoComplete:"off",placeholder:f,onRemoveLastToken:()=>{},showBorder:!0,style:g.tokenInputMenuItem,inputFullWidth:!0})})},P=n(513670).Ds((e=>{let{environment:t,flowId:n,billingData:i,origin:o}=e;_().UW(t,{invite_flow_id:n,billingData:i,invite_origin:o})}),1e3);var A=()=>n(801812),R=()=>n(849129),Z=()=>n(827973),B=()=>n(666414),D=()=>n(255577),L=()=>n(388284),O=()=>n(581356),H=()=>n(697623),V=()=>n(648905),U=()=>n(376429);function E(e){const{inviteTargetsStore:t,slackImportsInviteStore:n}=e,i=(0,o().O7)(),a=(0,l().YB)(),r=(0,s().VK)((()=>t.state.tokenQuery),[t]),d=(0,s().VK)((()=>n.state.flowId),[n]),[{value:c,status:u}]=(0,A().r5)((async()=>R().jL({query:r,sectionLimit:{userLimit:0,botLimit:0,groupLimit:0,importContactLimit:1e3},environment:i,intl:a,membersOnly:!1,importContactType:"slack"})),[i,a,r],{debounce:40});return(0,j.jsx)(N,{...e,tokenQuery:r,ready:"pending"!==u,error:"rejected"===u,result:c,flowId:d,environment:i})}function N(e){const{inviteTargetsStore:t,slackImportsInviteStore:n,tokenQuery:i,error:o,ready:a,result:r,inviteOrigin:c,flowId:u,environment:p}=e,m=(0,h().N2)(),g=(0,s().VK)((()=>(null==r?void 0:r.importedContacts)??[]),[r]),f=(0,s().qz)(e.menuListStore,M().Z),y={key:"select all",render:e=>(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(L().Z,{...e,style:m.selectAllSectionStyle}),(0,j.jsx)(B().Z,{size:1,innerStyle:m.dividerInnerStyle,style:m.dividerStyle})]}),items:[{key:"select all item",render:e=>(0,j.jsx)(Z().Z,{...e,title:(0,j.jsxs)("div",{style:m.selectAllStyle,children:[(0,j.jsx)(l()._H,{id:"invite.slack_imports.select_all.title",defaultMessage:"Select all"}),(0,j.jsx)(w().Z,{style:m.totalCountsStyle,isSmall:!0,children:`(${g.length})`})]}),right:(0,j.jsx)(V().K,{checked:(0,h().sM)({filteredImportedContacts:g,inviteTargetsStore:t})})}),action:()=>{!function(e){const{filteredImportedContacts:t,inviteTargetsStore:n,environment:i,origin:o,flowId:s,tokenQuery:a}=e;if(n.state.inviteTargets.length===t.length)return n.setState({...n.state,inviteTargets:[]}),void d().hc(i,{origin:o,invite_flow_id:s,invited_user_count:0,is_unselect:!0,invite_token_query:a});d().hc(i,{origin:o,invite_flow_id:s,invited_user_count:t.length,is_unselect:!1,invite_token_query:a}),n.setState({...n.state,inviteTargets:t})}({filteredImportedContacts:g,inviteTargetsStore:t,origin:c,flowId:u,environment:p,tokenQuery:i}),n.setState({...n.state,focus:v.NoFocus})}}]},x=(0,h().M_)({filteredImportedContacts:g}),b=Object.keys(x).sort(((e,t)=>"#"===e?1:"#"===t?-1:e.localeCompare(t))).map((e=>function(e){const{charKey:t,importedContacts:n,inviteTargetsStore:i,slackImportsInviteStore:o,menuListStore:s,style:a,tokenQuery:r,environment:d}=e,c={key:`imported contacts with ${t}`,render:e=>(0,j.jsx)(L().Z,{...e,style:a,title:(0,j.jsx)(l()._H,{id:"invite.slack_imports.grouped_section.title",defaultMessage:"{charKey}",values:{charKey:t}})}),items:n.sort(((e,t)=>(e.value.name||"").localeCompare(t.value.name||""))).map(((e,t)=>({key:e.value.email,render:t=>(0,j.jsx)(F,{...t,invited:!1,inviteTarget:e,isInInviteTargets:O().H({target:e,inviteTargetsStore:i})}),action:()=>{O().H({target:e,inviteTargetsStore:i})?i.setState({...i.state,inviteTargets:i.state.inviteTargets.filter((t=>"newUser"!==t.type||e.value.email!==t.value.email))}):(_().hE(d,{invite_token_query:r,selected_user_token:e,selected_user_token_rank:t,from:"slack_imports_space_setting",subscription_tier:(0,H().zt)(),type:"slack"}),o.setState({...o.state,focus:v.NoFocus}),i.setState({...i.state,inviteTargets:[...i.state.inviteTargets,e]}),s.unsetFocus())}})))};return c}({charKey:e,importedContacts:x[e],inviteTargetsStore:t,slackImportsInviteStore:n,menuListStore:f,style:m.sectionMenuItem,tokenQuery:i,environment:p})));return o?(0,j.jsx)(U().u,{isLoading:!a}):(0,j.jsx)(D().Z,{type:D().i.Vertical,initialFocus:i.length>0?0:void 0,sections:[y,...b],store:f})}const F=i.forwardRef((function(e,t){const{inviteTarget:n}=e;return(0,j.jsx)(K,{...e,ref:t,inviteTarget:n})})),K=i.forwardRef((function(e,t){const{inviteTarget:o,isInInviteTargets:s,...l}=e,d=(0,a().yK)((()=>({cellMemberAvatarContainer:{paddingTop:8,paddingBottom:8},iconBox:{position:"absolute",bottom:-3,right:-3},iconBoxImage:{background:"white",padding:2,borderRadius:"100%"}})),[]),u=(0,i.useMemo)((()=>({actorStore:void 0,avatar:{email:o.value.email,name:"slack"===o.source?o.value.name:void 0,avatarUrl:"slack"===o.source?o.value.avatar_url:void 0}})),[o]);return(0,j.jsx)(Z().Z,{...l,ref:t,title:(0,j.jsx)(n(421736).Z,{isLarge:!0,...u,containerStyle:d.cellMemberAvatarContainer,avatarBadge:(0,j.jsx)(c().Z,{type:"image_url",imageURL:r().Z.images.externalIntegrations.slackIconPng,size:18,style:d.iconBox,imageStyle:d.iconBoxImage})}),right:(0,j.jsx)(V().K,{checked:s})})}));const z=function(e){const{inviteTargetsStore:t,slackImportsInviteStore:a,inviteOrigin:r,onInviteComplete:l,onInviteClick:c}=e,u=(0,o().O7)(),[p,g]=(0,i.useState)(!1),f=(0,s().Kw)(n(138912).default.completeSlackAuthentications),h=(0,s().VK)((()=>m().default.state.currentSpaceStore),[]),y=(0,s().VK)((()=>a.state.flowId),[a]),v=(0,s().qz)(void 0,M().Z);(0,i.useEffect)((()=>{d().e8(u,{invite_flow_id:a.state.flowId,origin:r}),async function(){if(h&&!p){for(const e of f)await n(824462).callApi({eventName:"loadContacts",environment:u,data:{botId:e.id,spaceId:h.id,integrationId:n(235484).nO,importContactType:"slack"}}).catch((e=>{const t=(0,S().t)(e);d().u0(u,{invite_stage:"load_slack_contacts",invited_user_count:0,invite_flow_id:y,error:t,origin:r,is_success:!1}),n(799891).log({level:"error",from:"SlackImportsInvite",type:"loadSlackContacts",error:(0,n(792409).Ui)(e)})}));g(!0)}}()}),[h,f,u,p,r,a,y]);const x=function(e){let{slackImportsInviteStore:t,inviteTargetsStore:n,inviteOrigin:i,isLoading:o}=e;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(k,{isLoading:o}),(0,j.jsx)(I,{inviteTargetsStore:n,slackImportsInviteStore:t,inviteOrigin:i})]})}({inviteTargetsStore:t,slackImportsInviteStore:a,inviteOrigin:r,isLoading:!p}),b=function(e){let{slackImportsInviteStore:t,inviteTargetsStore:n,inviteOrigin:i,onInviteComplete:o,onInviteClick:s}=e;return(0,j.jsx)(C,{slackImportsInviteStore:t,inviteTargetsStore:n,inviteOrigin:i,onInviteComplete:o,onInviteClick:s})}({slackImportsInviteStore:a,inviteTargetsStore:t,inviteOrigin:r,onInviteComplete:l,onInviteClick:c}),w=function(e){let{slackImportsInviteStore:t,inviteTargetsStore:n,inviteOrigin:i,menuListStore:o,isLoading:s}=e;if(s)return null;return(0,j.jsx)(E,{slackImportsInviteStore:t,inviteTargetsStore:n,inviteOrigin:i,menuListStore:o})}({slackImportsInviteStore:a,inviteTargetsStore:t,inviteOrigin:r,menuListStore:v,isLoading:!p}),_={menuType:n(352230).o.Popup,width:480,height:"60vh",header:x,footer:b,tokenInputHeader:!1,disableScroller:!1};return(0,j.jsx)(n(198829).Z,{..._,className:n(247724).FJA,children:(0,j.jsx)("div",{children:w})})};function W(e){const t=(0,o().O7)(),{inviteOrigin:n,canEditPermission:a,onInviteComplete:r,onInviteClick:l,buttonLabel:c,buttonStyle:v,buttonContainerStyle:x}=e,{isMobile:S}=(0,o().Fy)(),M=(0,h().Tr)(v,x),C=(0,s().qz)(void 0,b),w=(0,s().qz)(void 0,g().ZP),{modalOpen:k,flowId:_}=(0,s().Kw)(C),{userId:T,spaceId:I}=(0,s().VK)((()=>{var e,t;return{userId:null===(e=m().default.state.currentUserStore)||void 0===e?void 0:e.id,spaceId:null===(t=m().default.state.currentSpaceStore)||void 0===t?void 0:t.id}}),[]),P=(0,i.useCallback)((()=>{!function(e){e.reset()}(C),d().Td(t,{origin:n,invite_flow_id:_})}),[C,n,t,_]),A=(0,i.useCallback)((()=>function(e){const{slackImportsInviteStore:t,inviteTargetsStore:n,inviteOrigin:i,onInviteComplete:o,onInviteClick:s}=e;return(0,j.jsx)(z,{slackImportsInviteStore:t,inviteTargetsStore:n,inviteOrigin:i,onInviteComplete:o,onInviteClick:s})}({inviteTargetsStore:w,slackImportsInviteStore:C,inviteOrigin:n,onInviteComplete:r,onInviteClick:l})),[w,C,n,l,r]),R=(0,f().VX)({name:"slack_imports_invite",spaceId:I,userId:T});return(0,s().VK)((()=>{const e=G({canEditPermission:a,isMobile:S,hasAccessToFeature:R});return e&&(0,y().e)({environment:t,flowId:_,origin:n,type:"slack"}),e}),[a,S,t,_,n,R])?(0,j.jsx)(u().Z,{open:k,onDismiss:P,renderContent:A,origin:(0,j.jsx)(p().hF,{onClickAuthenticated:()=>{!function(e){e.setState({...e.state,modalOpen:!0})}(C)},title:c??(0,j.jsx)(q,{}),hideChevronIcon:!0,containerStyle:M.buttonContainer,buttonStyle:M.button,from:"space_settings",inviteOrigin:n,loadContacts:!1})}):null}function q(){const e=(0,a().yK)((e=>({slackTitle:{display:"flex",fontSize:14,color:e.text.primary},integrationIcon:{marginRight:4}})),[]);return(0,j.jsxs)("div",{style:e.slackTitle,children:[(0,j.jsx)(c().Z,{type:"image_url",imageURL:r().Z.images.externalIntegrations.slackIconPng,size:16,imageStyle:e.integrationIcon}),(0,j.jsx)(l()._H,{defaultMessage:"Import from Slack",id:"invite.slack_imports.button.label"})]})}function G(e){const{canEditPermission:t,isMobile:n,hasAccessToFeature:i}=e;return!(n||i||!t)}},873175:(e,t,n)=>{n.d(t,{S:()=>l,e:()=>d});n(667294);var i=()=>n(123398),o=()=>n(884749),s=()=>n(602137),a=()=>n(681832),r=n(785893);function l(e){const{onInviteClick:t,onInviteComplete:n,buttonStyle:s,buttonContainerStyle:a}=e;return[{key:"slack_imports",render:()=>(0,r.jsx)(o()._,{inviteOrigin:"space_setting_slack_dropdown",canEditPermission:!0,onInviteClick:t,onInviteComplete:n,buttonLabel:(0,r.jsx)(i().ai,{type:"slack"}),buttonStyle:s,buttonContainerStyle:a}),action:()=>{}},{key:"google_imports",render:()=>(0,r.jsx)(i().ZY,{inviteOrigin:"space_setting_google_dropdown",canEditPermission:!0,onInviteClick:t,onInviteComplete:n,buttonLabel:(0,r.jsx)(i().ai,{type:"google"}),buttonStyle:s,buttonContainerStyle:a}),action:()=>{}}]}function d(e){const{onClickAuthenticated:t,hideChevronIcon:n,containerStyle:o,buttonStyle:l,flowId:d}=e;return[{key:"slack_imports",render:()=>(0,r.jsx)(s().hF,{onClickAuthenticated:()=>t(a().T5.Slack),title:(0,r.jsx)(i().ai,{type:"slack"}),containerStyle:o,buttonStyle:l,from:"share_menu",inviteOrigin:"page_share_modal",flowId:d,loadContacts:!0,hideChevronIcon:n}),action:()=>{}},{key:"google_imports",render:()=>(0,r.jsx)(s().oI,{onClickAuthenticated:()=>t(a().T5.Google),containerStyle:o,buttonStyle:l,from:"share_menu",inviteOrigin:"page_share_modal",flowId:d,loadContacts:!0,hideChevronIcon:n,buttonLabel:(0,r.jsx)(i().ai,{type:"google"})}),action:()=>{}}]}},842576:(e,t,n)=>{n.d(t,{$w:()=>a,M6:()=>l,M_:()=>m,N2:()=>r,Tr:()=>u,ph:()=>d,sM:()=>p,wg:()=>c});n(670560),n(267602),n(30005);var i=()=>n(846550),o=()=>n(568017),s=()=>n(707513);function a(e){const{focus:t}=e;return(0,i().yK)((e=>({searchBar:{padding:16},inputStyle:{minWidth:60,width:"auto",borderTopLeftRadius:4,borderTopRightRadius:4,fontSize:14,fontWeight:s().Ue.regular},tokenInputMenuItem:{padding:6,borderRadius:6,height:20,alignItems:"center",minHeight:32,background:e.accentColors.gray[30],...t&&{background:"none"}}})),[t])}function r(){return(0,i().yK)((e=>({selectAllSectionStyle:{display:"flex",flexDirection:"column",gap:2,padding:"8px 0px 16px 0px"},sectionMenuItem:{padding:"12px 0px 0px 2px",display:"flex",flexDirection:"column",gap:2},dividerStyle:{margin:"0px 16px"},dividerInnerStyle:{borderBottom:`1px solid ${e.stroke.secondary}`},selectAllStyle:{display:"flex",fontSize:14,color:e.text.primary},totalCountsStyle:{paddingLeft:3,fontSize:14,color:e.text.tertiary}})),[])}function l(){return(0,i().yK)((e=>({footerStyle:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:60,padding:"12px 16px 16px 16px",borderTop:`1px solid ${e.stroke.secondary}`}})),[])}function d(){return(0,i().yK)((e=>({labelContainer:{display:"flex",alignItems:"center",color:o().ZP.uiLightBlack,size:14,gap:6},importListButton:{height:28,borderRadius:4,border:void 0,width:"100%"},importListButtonContainer:{padding:"0 6px",alignItems:"center"}})),[])}function c(){return(0,i().yK)((e=>({topContainer:{display:"flex",alignItems:"center",width:"100%",height:40,padding:"0 16px",borderBottom:`1px solid ${e.stroke.secondary}`},sendInviteLabel:{color:e.text.primary,fontSize:14,fontWeight:s().Ue.medium,textAlign:"left",verticalAlign:"top"}})),[])}function u(e,t){return(0,i().yK)((n=>({buttonContainer:{padding:"0 8px",...t},button:{height:32,borderRadius:4,border:`1px solid ${n.stroke.primary}`,...e}})),[e,t])}function p(e){const{filteredImportedContacts:t,inviteTargetsStore:n}=e,i=n.state.inviteTargets.length;return 0!==i&&i===t.length}function m(e){const{filteredImportedContacts:t}=e,n={};return t.forEach(((e,t)=>{const i=e.value.email[0].toUpperCase(),o=/^[A-Za-z]$/.test(i)?i:"#";n[o]||(n[o]=[]),n[o].push(e)})),n}},188447:(e,t,n)=>{n.d(t,{e:()=>i});const i=n(513670).Ds((e=>{let{environment:t,flowId:i,origin:o,type:s}=e;switch(s){case"slack":n(832024).gV(t,{origin:o,invite_flow_id:i});break;case"google":break;default:(0,n(696459).t1)(s)}}),2e3)},638445:(e,t,n)=>{n.d(t,{Z:()=>o});class i extends(()=>n(263184))().default{getInitialState(){return{open:!1}}}const o=new i},885607:(e,t,n)=>{n.d(t,{Z:()=>m,v:()=>p});var i=n(667294),o=()=>n(142735),s=()=>n(788860),a=()=>n(231077),r=()=>n(906651),l=()=>n(205228),d=()=>n(876822),c=()=>n(827510),u=n(785893);const p=(0,s().vU)({continueWithGoogle:{id:"notionCalendarLaunchButton.continueWithGoogle",defaultMessage:"Continue with Google"},downloadApp:{id:"notionCalendarLaunchButton.downloadApp",defaultMessage:"Download app"},openCalendar:{id:"notionCalendarLaunchButton.openCalendar",defaultMessage:"Open Calendar"}});const m=function(e){let{style:t,openCalendarFrom:m,continueWithGoogleFrom:g,onOpenCalendarClick:f,onContinueWithGoogleClick:h,onDownloadClick:y}=e;const v=(0,n(219727).O7)(),x=(0,n(846550).yK)((e=>({button:{height:32,marginLeft:8,fontSize:14,whiteSpace:"nowrap",...t},googleLogoIcon:{width:14,height:14,marginRight:8}})),[t]),b=(0,o().VK)((()=>(0,n(909859).tE)()),[]),S=(0,o().VK)((()=>d().default.state.currentSpaceStore&&(0,n(345918).XY)({env:"production",spaceStore:d().default.state.currentSpaceStore})),[]),[{value:M}]=(0,n(801812).r5)((async()=>{var e;return!(null===(e=a().electronApi)||void 0===e||!e.isProtocolRegistered)&&a().electronApi.isProtocolRegistered(l().default.calendar.desktopProtocol)}),[]),j=(0,i.useCallback)((()=>{c().sh({environment:v,spaceStore:void 0,collectionViewStore:void 0,from:m}),null==f||f()}),[v,m,f]),C=(0,i.useCallback)((()=>{const{currentUserSettingsStore:e,currentSpaceStore:t}=d().default.state;e&&t&&(c().sh({environment:v,spaceStore:t,collectionViewStore:void 0,from:g}),null==h||h())}),[v,g,h]),w=(0,i.useCallback)((()=>{n(752127).D({environment:v,url:l().default.calendar.downloadUrl}),null==y||y()}),[v,y]);return v.device.isElectron?M?(0,u.jsx)(r().Z,{style:x.button,onClick:j,children:(0,u.jsx)(s()._H,{...p.openCalendar})}):(0,u.jsx)(r().Z,{style:x.button,onClick:w,children:(0,u.jsx)(s()._H,{...p.downloadApp})}):b||S?(0,u.jsx)(r().Z,{style:x.button,onClick:j,children:(0,u.jsx)(s()._H,{...p.openCalendar})}):(0,u.jsxs)(n(779300).h,{styles:x.button,onClick:C,children:[(0,n(133924).R)(x.googleLogoIcon),(0,u.jsx)(s()._H,{...p.continueWithGoogle})]})}},707165:(e,t,n)=>{n.r(t),n.d(t,{NotionCalendarLaunchModal:()=>Z});var i=n(667294),o=()=>n(146947),s=()=>n(219727),a=()=>n(142735),r=()=>n(846550),l=()=>n(788860),d=()=>n(707513),c=()=>n(880026),u=()=>n(752127),p=()=>n(423402),m=()=>n(666414),g=()=>n(729775),f=()=>n(906651),h=()=>n(67961),y=()=>n(255453),v=()=>n(205228),x=()=>n(916095),b=()=>n(148126),S=()=>n(74582),M=()=>n(174674),j=()=>n(636754),C=()=>n(803728),w=()=>n(110372),k=()=>n(738740),_=()=>n(876822),T=()=>n(660293),I=()=>n(827510),P=()=>n(942625),A=()=>n(885607),R=n(785893);function Z(){const e=(0,s().O7)(),t=(0,r().yK)((e=>({container:{maxWidth:442},closeButton:{position:"absolute",top:12,right:12,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.outlineButtonPressedBackground,width:18,height:18},closeButtonHovered:{background:e.outlineButtonPressedBackground},content:{padding:24,display:"flex",flexDirection:"column"},title:{fontWeight:d().Ue.bold,fontSize:25,display:"flex",marginBottom:6},divider:{backgroundColor:e.tableLightDividerColor,opacity:.5},footer:{padding:"20px 24px",display:"flex",alignItems:"center",justifyContent:"space-between"},learnMoreLink:{display:"flex",alignItems:"center",fontSize:12,color:e.mediumTextColor,padding:"0 4px",marginLeft:-4},inlineLearnMoreLink:{display:"inline-flex",fontSize:"inherit",marginLeft:0,padding:0},externalLinkIcon:{width:14,height:14,marginLeft:2},inlineExternalLinkIcon:{width:16,height:16},successCheckmark:{width:50,height:50,display:"flex",alignItems:"center",justifyContent:"center"},successCheckmarkIcon:{width:32,height:32,color:e.mediumTextColor},successTitle:{fontSize:25,fontWeight:d().Ue.bold,margin:"8px 0"},downloadContainer:{display:"flex",padding:"16px 20px",marginTop:28,borderRadius:12,background:e.cardBackground},downloadContent:{display:"flex",flexDirection:"column",paddingRight:8},downloadTitle:{fontSize:16,fontWeight:d().Ue.semibold,marginBottom:4},downloadButtonContainer:{display:"flex"},downloadButton:{height:32,marginTop:12},notionCalendarLogo:{display:"flex",alignSelf:"end"},notionCalendarLogoIcon:{width:56,height:58}})),[]);(0,i.useEffect)((()=>{const t=()=>{T().Z.state.isVisible&&P().Z.state.isConnectingCalendar&&(P().Z.setState({isConnectingCalendar:!1}),p().pJ({environment:e}))};return T().Z.addListener(t),()=>{T().Z.removeListener(t)}}),[e]);const n=(0,a().VK)((()=>P().Z.state.signupCtaAttribution||"onboardingModalSignIn"),[]),Z=(0,i.useCallback)((()=>{const{currentUserSettingsStore:t}=_().default.state;t&&(w().bl(e,{callout_key:"notion_calendar_launch_promo",dismiss_type:"modal_dismiss_clicked"}),C().Gi(e,"notion_calendar_launch_promo"),I().tE({environment:e,userSettingsStore:t}),P().Z.setState({signupCtaAttribution:void 0}))}),[e]),D=(0,i.useCallback)((()=>{const{currentUserSettingsStore:t,currentSpaceStore:n}=_().default.state;t&&n&&(w().lZ(e,{callout_key:"notion_calendar_launch_promo",click_type:"primary_cta"}),C().Gi(e,"notion_calendar_launch_promo"),I().WS(e,{phase:"dismissed_completely",transactionUserAction:"NotionCalendarLaunchModal.openCalendar",userSettingsStore:t}))}),[e]),L=(0,i.useCallback)((()=>{const{currentUserSettingsStore:t,currentSpaceStore:n}=_().default.state;t&&n&&(w().lZ(e,{callout_key:"notion_calendar_launch_promo",click_type:"secondary_cta"}),C().Gi(e,"notion_calendar_launch_promo"),I().WS(e,{phase:"dismissed_completely",transactionUserAction:"NotionCalendarLaunchModal.existingNotionCalendarUser",userSettingsStore:t}),I().sh({environment:e,spaceStore:n,collectionViewStore:void 0,from:"onboardingModalExistingUser"}))}),[e]),O=(0,i.useCallback)((()=>{const{currentUserSettingsStore:t,currentSpaceStore:n}=_().default.state;t&&n&&(w().lZ(e,{callout_key:"notion_calendar_launch_promo",click_type:"primary_cta"}),e.device.isElectron&&C().Gi(e,"notion_calendar_launch_promo"),I().WS(e,{phase:"connected_notion_calendar",transactionUserAction:"NotionCalendarLaunchModal.continueWithGoogle",userSettingsStore:t}))}),[e]),H=(0,i.useCallback)((()=>{const{currentUserSettingsStore:t}=_().default.state;t&&(w().lZ(e,{callout_key:"notion_calendar_launch_promo",click_type:"primary_cta"}),C().Gi(e,"notion_calendar_launch_promo"),I().WS(e,{phase:"dismissed_completely",transactionUserAction:"NotionCalendarLaunchModal.clickDownload",userSettingsStore:t}))}),[e]),V=(0,a().VK)((()=>_().default.state.currentUserSettingsStore),[]),U=(0,a().VK)((()=>{const e=null==V?void 0:V.getSettings();return null==e?void 0:e.notion_calendar_launch_modal_phase}),[V]),E=()=>(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(x().U4,{onClick:Z}),(0,R.jsxs)("div",{style:t.content,children:[(0,R.jsx)("div",{style:t.successCheckmark,children:(0,S().e)(t.successCheckmarkIcon)}),(0,R.jsx)("div",{style:t.successTitle,children:(0,R.jsx)(l()._H,{defaultMessage:"Success!",id:"notionCalendarLaunchModal.successTitle"})}),(0,R.jsx)(h().Z,{isSecondaryColor:!0,isMultiline:!0,children:(0,R.jsx)(l()._H,{defaultMessage:"You can now view Notion docs, projects, tasks, and timelines alongside calendar events on Notion Calendar",id:"notionCalendarLaunchModal.successCaption"})}),(0,R.jsxs)("div",{style:t.downloadContainer,children:[(0,R.jsxs)("div",{style:t.downloadContent,children:[(0,R.jsx)("div",{style:t.downloadTitle,children:(0,R.jsx)(l()._H,{defaultMessage:"Get the desktop app",id:"notionCalendarLaunchModal.downloadTitle"})}),(0,R.jsx)(h().Z,{isSecondaryColor:!0,isMultiline:!0,children:(0,R.jsx)(l()._H,{defaultMessage:"See notifications, view your schedule, and join meetings from anywhere",id:"notionCalendarLaunchModal.downloadCaption"})}),(0,R.jsx)("div",{style:t.downloadButtonContainer,children:(0,R.jsx)(f().Z,{style:t.downloadButton,onClick:()=>{c().G(e,{cta:"download"}),u().D({environment:e,url:v().default.calendar.downloadUrl}),H()},children:(0,R.jsx)(l()._H,{...A().v.downloadApp})})})]}),(0,R.jsx)("div",{style:t.notionCalendarLogo,children:(0,M().D)(t.notionCalendarLogoIcon)})]})]})]}),N=()=>(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(y().Z,{src:"https://player.vimeo.com/video/900939588?h=187435ef3c",defaultTextTrack:y().W[o().locale]||"en",options:{muted:!0,autoplay:!0,loop:!0,background:!0,playsinline:!0}}),(0,R.jsx)(x().U4,{style:t.closeButton,hoveredStyle:t.closeButtonHovered,onClick:Z}),(0,R.jsxs)("div",{style:t.content,children:[(0,R.jsx)("div",{style:t.title,children:(0,R.jsx)(l()._H,{defaultMessage:"Meet Notion Calendar",id:"notionCalendarLaunchModal.title"})}),(0,R.jsxs)(h().Z,{isSecondaryColor:!0,isMultiline:!0,children:[(0,R.jsx)(l()._H,{defaultMessage:"The beautifully designed calendar for your life and work. Integrated and synced with all your Google Calendar events.",id:"notionCalendarLaunchModal.caption"})," ",(0,R.jsxs)(g().Z,{external:!0,href:(0,b().UY)("blog.notionCalendarLaunch"),style:{...t.learnMoreLink,...t.inlineLearnMoreLink},children:[(0,R.jsx)(l()._H,{defaultMessage:"Learn more",id:"notionCalendarLaunchModal.learnMore"}),(0,j().g)({...t.externalLinkIcon,...t.inlineExternalLinkIcon})]})]})]}),(0,R.jsx)(m().Z,{size:1,style:t.divider}),(0,R.jsxs)("div",{style:t.footer,children:[(0,R.jsx)(g().Z,{external:!0,onClick:L,style:t.learnMoreLink,children:(0,R.jsx)(l()._H,{defaultMessage:"I already use Notion Calendar",id:"notionCalendarLaunchModal.alreadyUseNotionCalendar"})}),(0,R.jsx)(A().Z,{openCalendarFrom:"onboardingModalOpenCalendar",continueWithGoogleFrom:n,onOpenCalendarClick:()=>{c().Et(e,{cta:"open_calendar"}),D()},onContinueWithGoogleClick:()=>{c().Et(e,{cta:"continue_with_google"}),O()},onDownloadClick:()=>{c().Et(e,{cta:"download"}),H()}})]})]});return(0,R.jsx)(k().k,{messageKey:"notion_calendar_launch_promo",desktopRenderInner:()=>(0,R.jsx)(B,{launchModalPhase:U,renderChild:()=>"connected_notion_calendar"===U?E():N()}),desktopInnerStyle:t.container,desktopOnDismiss:Z,phoneRenderInner:()=>null})}function B(e){let{launchModalPhase:t,renderChild:n}=e;const o=(0,s().O7)();return(0,i.useEffect)((()=>{"connected_notion_calendar"===t?c().Wy(o):c().QL(o)}),[o,t]),n()}},707235:(e,t,n)=>{n.r(t),n.d(t,{createRelationViewsModule:()=>m});var i=()=>n(226413),o=()=>n(956057),s=()=>n(396136),a=()=>n(139978),r=()=>n(543172),l=()=>n(332542),d=()=>n(636340),c=()=>n(269299),u=()=>n(487270),p=()=>n(826955);function m(e){const{environment:t,layoutStore:n,collectionStore:m,relationPropertyId:g}=e,f=m.getSchema(),h=g?f[g]:void 0;if(!h||!(0,i().p_)(h))return;const y=h.collection_pointer;if(!y)return;const v=h.property;if(!v)return;const x=p().NW.createChildStore(m,y);if(!x)return;const b=x.getParentBlockStore();if(!b)return;const{performResult:S}=c().createAndCommit({environment:t,perform:e=>{const{inMemoryRecordCache:i}=b,p=d().j4({environment:t,type:"collection_view",inMemoryRecordCache:i,transaction:e}),m=b.getSpaceId(),g=(0,r().ZP)(),f=(0,u().$x)({environment:t,table:a().np,spaceId:m}).id,y=p.pointer,S={id:f,type:"table",parent_id:y.id,parent_table:s().iU,space_id:m,alive:!0,name:h.name,format:{collection_pointer:x.pointer,property_filters:[{id:o().Il(),filter:{property:v,filter:{operator:"relation_contains",value:{type:"relative",value:{type:"current_page_in_related_collection"}}}}}],subitem_display_mode:"disabled",hide_linked_collection_name:!0}};c().applyOperation({store:p,operation:{pointer:p.pointer,path:["view_ids"],command:"listAfter",args:{id:f}},transaction:e}),l().jG({childStore:p,parentStore:n,transaction:e}),d().ae({environment:t,table:a().np,value:S,inMemoryRecordCache:i,transaction:e});return{id:g,type:"views",collection_view_block_pointer:{...y,spaceId:m}}},userAction:"viewsModuleActions.createRelationViewsModule"});return S}},455962:(e,t,n)=>{n.d(t,{O:()=>p,c:()=>m});n(821057);var i=()=>n(396136),o=()=>n(139978),s=()=>n(332542),a=()=>n(636340),r=()=>n(269299),l=()=>n(487270),d=()=>n(527278),c=()=>n(826955),u=()=>n(844650);function p(e){const{environment:t,layoutStore:n,transaction:i,options:o}=e,{inMemoryRecordCache:r}=n,l=n.getSpaceId(),d=n.getParentPointer();if(!d||"collection"!==d.table)throw new Error("Invalid state: no collection pointer");if(!l)throw new Error("Cannot add collection view to views main module -- Invalid state: no space id");const c=a().j4({environment:t,type:"collection_view",inMemoryRecordCache:r,transaction:i});s().jG({childStore:c,parentStore:n,transaction:i});const{collectionViewStore:u}=m({environment:t,transaction:i,layoutStore:n,collectionViewBlockStore:c,options:o});return{collectionViewStore:u,collectionViewBlockStore:c}}function m(e){const{environment:t,transaction:n,layoutStore:s,collectionViewBlockStore:p,options:m}=e,{inMemoryRecordCache:g}=s,f=s.getParentPointer();if(!f||"collection"!==f.table)throw new Error("Invalid state: no collection pointer");const h=s.getSpaceId();if(!h)throw new Error("Cannot add collection view to views main module -- Invalid state: no space id");const y=(0,l().$x)({environment:t,table:o().np,spaceId:h}),v={id:y.id,type:"page",parent_id:p.pointer.id,parent_table:i().iU,space_id:h,alive:!0,name:d().Z.formatMessage(u().B.editor),format:{collection_pointer:f,hide_linked_collection_name:!0}};return null!=m&&m.viewsTabId&&(v.format={...v.format,page_layout_pointer:{...s.pointer,views_main_tab_id:m.viewsTabId}}),a().ae({environment:t,table:o().np,value:v,inMemoryRecordCache:g,transaction:n}),r().applyOperation({store:p,operation:{pointer:p.pointer,path:["view_ids"],command:"listBefore",args:{id:y.id}},transaction:n}),{collectionViewStore:c().Xr.createChildStore(p,y)}}},220025:(e,t,n)=>{n.r(t),n.d(t,{PageLayoutEditor:()=>Yn});var i=n(667294),o=()=>n(219727),s=()=>n(142735),a=()=>n(846550),r=()=>n(696459),l=()=>n(628370),d=()=>n(842574),c=()=>n(439320),u=()=>n(251932),p=()=>n(949842),m=()=>n(520849),g=()=>n(893695),f=()=>n(267553),h=()=>n(367933),y=()=>n(26796),v=()=>n(714230),x=()=>n(109477),b=()=>n(305580),S=()=>n(788860),M=()=>n(707513),j=()=>n(593515),C=()=>n(421654),w=()=>n(269299),k=()=>n(411094),_=()=>n(18748),T=()=>n(471645),I=()=>n(654133),P=()=>n(259098),A=()=>n(706003),R=()=>n(677559),Z=()=>n(466970),B=()=>n(998901);const D={switchFromSimpleToTabbedLayoutActions:new(R().Ss)("switchFromSimpleToTabbedLayoutActions",(async()=>n.e(23656).then(n.bind(n,588533)))),switchFromTabbedToSimpleLayoutActions:new(R().Ss)("switchFromTabbedToSimpleLayoutActions",(async()=>n.e(40284).then(n.bind(n,238198)))),createRelationViewsModuleActions:new(R().Ss)("createRelationViewsModuleActinos",(async()=>Promise.resolve().then(n.bind(n,707235)))),deleteViewsModuleDependenciesActions:new(R().Ss)("deleteViewsModuleDependenciesActions",(async()=>Promise.resolve().then(n.bind(n,772669))))};n(670560),n(241792);var L=()=>n(226413),O=()=>n(766933),H=()=>n(827973),V=()=>n(740046),U=()=>n(255577),E=()=>n(388284),N=()=>n(125659),F=()=>n(270315),K=()=>n(827282),z=n(785893);const W=(0,K().IU)("propertyText",{viewBox:"0 0 26 17",svg:(0,z.jsx)("path",{d:"M0.066 16V15.296L1.342 14.79L6.688 1.282L7.436 1.172L8.206 0.952L13.266 14.79L14.762 15.274V16H9.108V15.274L10.978 14.768L9.636 10.918H4.268L2.992 14.504L5.104 15.274V16H0.066ZM6.974 3.372L4.752 9.598H9.174L6.996 3.372H6.974ZM18.5422 16.33C17.3762 16.33 15.9022 15.516 15.9022 13.756C15.9022 11.996 17.1782 11.204 19.4442 10.61L21.7102 10.016V8.872C21.6662 7.178 20.7862 6.298 19.6202 6.298C18.9602 6.298 18.4102 6.584 18.2342 6.694L18.1462 8.872C18.1462 8.872 17.5962 8.938 17.2662 8.938C16.5622 8.938 16.2102 8.586 16.2102 7.992C16.2102 6.98 18.1462 5.374 20.4122 5.374C22.6342 5.374 23.6022 6.386 23.6022 8.564V14.504C23.6022 14.944 23.7122 15.098 24.3282 15.098H25.4282V15.714C25.4282 15.714 24.1522 16.264 23.3382 16.264C22.2162 16.264 21.7542 15.494 21.7542 14.548H21.6882C20.4562 15.714 19.9282 16.33 18.5422 16.33ZM19.7082 14.834C20.7642 14.834 21.4462 14.042 21.7102 13.646V10.742L19.5982 11.446C18.5642 11.798 17.9042 12.216 17.9042 13.14C17.9042 14.262 18.7622 14.834 19.7082 14.834Z"})});var q=()=>n(270820),G=()=>n(162178),Y=()=>n(712185),$=()=>n(543172),X=()=>n(99537);function Q(e){const{propertyId:t,propertyType:n,environment:i,transaction:o,layoutStore:s,collectionStore:a,currentModuleSelection:r,sessionId:l,isPropertyCreation:d}=e,c=s.getModel(),u=a.getModel();if(!c||!u||"new_module"!==(null==r?void 0:r.type))return;const p={id:(0,$().ZP)(),type:"property",propertyId:t,style:"expanded"};if("person"===n||"created_by"===n||"last_edited_by"===n?p.config={property_person:{style:"compact"}}:"number"===n&&(p.config={property_number:{style:"large"}}),"form_conditional_modules"===r.area)return;const m=(0,Y().bf)({collectionModel:u,module:p});return(0,X().sW)({environment:i,transaction:o,layoutStore:s,position:"views_main_tab_modules"===r.area?{type:"area_relative",area:r.area,viewId:r.viewsMainTabId,location:"end_moveable"}:{type:"area_relative",area:r.area,location:"end_moveable"},module:m,sessionId:l,isPropertyCreation:d}),p}function J(){const e=(0,o().O7)(),{layoutStore:t,currentModuleSelection:s,setModuleSelection:a,sessionId:r}=(0,G().J9)(),{collectionStore:l}=(0,G().PP)();return(0,i.useCallback)((i=>{let{propertyType:o,isPropertyCreation:d}=i;const{performResult:c}=w().createAndCommit({userAction:"AddPageLayoutModuleEditorSidebar.handleCreateNewStandardProperty",environment:e,canUndo:!0,perform:i=>{const a=t.getModel(),c=l.getModel();if(!a||!c||"new_module"!==(null==s?void 0:s.type))return;return Q({propertyId:n(984871).G3({environment:e,collectionStore:l,collectionViewArgs:void 0,propertyName:F().SO[o],propertyType:o,transaction:i}),propertyType:o,environment:e,transaction:i,layoutStore:t,collectionStore:l,currentModuleSelection:s,sessionId:r,isPropertyCreation:d})}});c&&a({type:"existing_module",moduleId:c.id,isDragging:!1})}),[e,a,t,l,s,r])}function ee(){const e=(0,o().O7)(),{layoutStore:t,currentModuleSelection:n,setModuleSelection:s,sessionId:a}=(0,G().J9)(),{collectionStore:r}=(0,G().PP)();return(0,i.useCallback)((i=>{const{propertyId:o,propertyType:l}=i,{performResult:d}=w().createAndCommit({userAction:"AddPageLayoutModuleEditorSidebar.AddPropertyAsNewModule",environment:e,canUndo:!0,perform:i=>Q({propertyId:o,propertyType:l,environment:e,transaction:i,layoutStore:t,collectionStore:r,currentModuleSelection:n,sessionId:a,isPropertyCreation:!1})});return d?(s({type:"existing_module",moduleId:d.id,isDragging:!1}),d):null}),[e,s,t,r,n,a])}n(122556),n(582845),n(250570),n(533019),n(721473),n(788208),n(22624),n(267602),n(653476);var te=()=>n(532850),ne=()=>n(639708),ie=()=>n(579012);function oe(e){return void 0!==e[1]}function se(e){let{propertySortPriority:t,defaultCount:o,moreButtonStyle:a,moreButtonTitleStyle:l,isSearching:d}=e;const{layoutStore:c}=(0,G().J9)(),{collectionStore:u}=(0,G().PP)(),p=(0,ie().K)(),m=(0,s().VK)((()=>new Set([...c.getModules().page_main,...c.getModules().page_details].filter(ne().f).map((e=>e.propertyId)))),[c]),[g,f]=i.useState(!1);return(0,s().VK)((()=>{const e=u.getSchema();if(!c.getModel())return[];const i=(0,r().qP)(e).filter(oe).sort(((e,n)=>{const i=e[1],o=n[1];return(t[i.type]??1/0)-(t[o.type]??1/0)})).map((e=>{let[t,i]=e;if(t!==L().iw&&!m.has(t))return(0,L().U8)(i)?{id:(0,$().ZP)(),type:`property_${i.type}`,propertyId:t,style:"compact"}:(0,L().G$)(i)?{id:(0,$().ZP)(),type:`property_${i.type}`,propertyId:t,style:"large"}:"formula"===i.type?{id:(0,$().ZP)(),type:`property_${i.type}`,propertyId:t,style:(0,n(834458).isNumberFormulaPropertySchema)(i)?"large":"small"}:"file"===i.type?{id:(0,$().ZP)(),type:`property_${i.type}`,propertyId:t,style:"landscape"}:{id:(0,$().ZP)(),type:`property_${i.type}`,propertyId:t}})).filter(r().$K).map((t=>{const i=(0,te().Qm)({schema:e,property:t.propertyId});if(i)return{key:t.id,keywords:[i.name,F().SO[i.type]],render:e=>{let{ref:i,...o}=e;return(0,z.jsx)(n(204927).R,{...o,propertyId:t.propertyId})},action:()=>{p({layoutModule:t})}}})).filter(r().$K),s={keywords:[],key:"use-existing-property-show-more",render:e=>(0,z.jsx)(H().Z,{...e,buttonStyle:a,desktopTitleStyle:l,title:g?(0,z.jsx)(S()._H,{defaultMessage:"Less",id:"layoutBuilderProperties.less.buttonTitle"}):(0,z.jsx)(S()._H,{defaultMessage:"More",id:"layoutBuilderProperties.more.buttonTitle"})}),action:()=>f((e=>!e))};return i.length>o&&!d?[...g?i:i.slice(0,o),s]:i}),[p,u,c,m,t,o,g,a,l,d])}var ae=()=>n(72766);function re(e){const{propertyId:t}=e,{collectionStore:n}=(0,G().PP)(),i=(0,a().Fg)(),o=(0,s().VK)((()=>{const e=n.getSchema();return(0,te().Qm)({schema:e,property:t})}),[n,t]);return o?(0,z.jsx)(ae().z,{...e,icon:(0,z.jsx)(O().ZP,{size:16,theme:i,icon:o.icon,type:o.type}),name:o.name}):null}function le(){const{layoutStore:e,currentModuleSelection:t}=(0,G().J9)(),{collectionStore:a}=(0,G().PP)(),l=(0,Z().E)("layout_view_module_next"),d=(0,o().O7)(),c=(0,ie().K)(),u=(0,i.useCallback)((t=>{const i=(0,n(707235).createRelationViewsModule)({environment:d,collectionStore:a,relationPropertyId:t,layoutStore:e});i&&c({layoutModule:i})}),[c,a,e,d]),p=(0,s().VK)((()=>"new_module"===(null==t?void 0:t.type)&&"page_details"===t.area),[t]);return(0,s().VK)((()=>{if(!l||p)return[];const t=a.getSchema();if(!e.getModel())return[];return Object.keys(t).filter((e=>{const n=null==t?void 0:t[e];return n&&(0,L().p_)(n)&&(0,r().$K)(n.property)})).map((e=>{const n=(0,te().Qm)({schema:t,property:e});if(n)return{key:e,keywords:[n.name],render:t=>{let{ref:n,...i}=t;return(0,z.jsx)(re,{...i,propertyId:e})},action:()=>{u(e)}}})).filter(r().$K)}),[l,p,a,e,u])}const de=(0,S().vU)({addToPage:{id:"AddPageLayoutModuleEditorSidebar.addToPage",defaultMessage:"Add to page"},addToPanel:{id:"AddPageLayoutModuleEditorSidebar.addToPanel",defaultMessage:"Add to panel"},suggestedModulesSectionTitle:{defaultMessage:"Suggested",id:"AddPageLayoutModuleEditorSidebar.suggestedModulesSectionTitle"},existingPropertiesSectionTitle:{defaultMessage:"Use an existing property",id:"AddPageLayoutModuleEditorSidebar.existingPropertiesSectionTitle"},relatedCollectionPropertiesSectionTitle:{defaultMessage:"Add a database view",id:"AddPageLayoutModuleEditorSidebar.relatedCollectionPropertiesSectionTitle"},createNewPropertyModuleSectionTitle:{defaultMessage:"Create new property",id:"AddPageLayoutModuleEditorSidebar.createNewPropertyModuleSectionTitle"},closeAddModulesMenu:{defaultMessage:"Close add modules menu",id:"AddPageLayoutModuleEditorSidebar.closeAddModulesMenu"},searchInputPlaceholder:{defaultMessage:"Search...",id:"AddPageLayoutModuleEditorSidebar.searchInputPlaceholder"},propertyFileCaption:{id:"AddPageLayoutModuleButton.tooltip.files.caption",defaultMessage:"Add images, videos, or files"},propertyAiSummaryCaption:{id:"AddPageLayoutModuleButton.tooltip.aiSummary.caption",defaultMessage:"Use AI to summarize the page"},propertyPersonCaption:{id:"AddPageLayoutModuleButton.tooltip.person.caption",defaultMessage:"Add anyone in your workspace"},propertyTextCaption:{id:"AddPageLayoutModuleButton.tooltip.text.caption",defaultMessage:"Just start writing with plain text"},propertyNumberCaption:{id:"AddPageLayoutModuleButton.tooltip.number.caption",defaultMessage:"Display numbers with rings or bars"}}),ce={file:{icon:v().Z.images.layouts.configuration.propertyFilesMediaPreviewJpg,tooltip:{image:v().Z.images.layouts.configuration.propertyFilesMediaPreviewLargePng,caption:de.propertyFileCaption}},ai_summary:{icon:v().Z.images.layouts.configuration.propertyAiSummaryPreviewPng,tooltip:{image:v().Z.images.layouts.configuration.propertyAiSummaryPreviewLargePng,caption:de.propertyAiSummaryCaption}},person:{icon:v().Z.images.layouts.configuration.propertyPersonPreviewPng,tooltip:{image:v().Z.images.layouts.configuration.propertyPersonPreviewLargePng,caption:de.propertyPersonCaption}},text:{icon:W,tooltip:{image:v().Z.images.tooltips.blocks.textPng,caption:de.propertyTextCaption}},number:{icon:v().Z.images.layouts.configuration.propertyNumberPreviewPng,tooltip:{image:v().Z.images.layouts.configuration.propertyNumberPreviewLargePng,caption:de.propertyNumberCaption}}},ue={file:1,ai_summary:2,number:3,text:4,person:5},pe=i.memo((function(){const e=(0,o().O7)(),t=(0,a().Fg)(),r=(0,S().YB)(),{currentModuleSelection:l,isPropertyTypeSearchInputDirtyStore:d}=(0,G().J9)(),c=(0,N().Y$)(),p="new_module"===(null==l?void 0:l.type)&&"page_details"===l.area,m=(0,s().VK)((()=>[...(0,F().TP)({collectionContextStore:c,environment:e}),"ai_summary"].sort(((e,t)=>(ue[e]??1/0)-(ue[t]??1/0)))),[c,e]),g=le(),[f,h]=(0,i.useState)(!1),[y,v]=(0,i.useState)(),x=(0,i.useCallback)((e=>{d.setState(!0),v(e.target.value)}),[d]);i.useEffect((()=>()=>{d.setState(!1)}),[d]);const b=J(),j=ee(),C=(0,i.useMemo)((()=>({actionHandler:e=>b({propertyType:e,isPropertyCreation:!0}),tooltip:e=>{const t=ce[e];return null==t?void 0:t.tooltip},renderIcon:e=>{const n=ce[e],i="dark"===t.mode&&null!=n&&n.darkModeIcon?null==n?void 0:n.darkModeIcon:null==n?void 0:n.icon;return i&&"string"!=typeof i?i({width:20,fill:"light"===t.mode?"rgba(79, 79, 79, 1)":(0,O().RE)(t)}):(0,z.jsx)(O().ZP,{size:i?36:16,theme:t,type:e,icon:i,style:{fill:(0,L().XU)(e)?t.aiPurpleColor:void 0}})},propertySettingsPopupProps:e=>"relation"!==e?null:{settingsViewToOpen:{property:void 0,type:"selectRelationSource",formatKey:"page_view_properties"},isPropertyEditComplete:e=>Boolean((0,L().p_)(e)&&e.collection_id),onPropertyEditComplete:t=>{j({propertyId:t,propertyType:e})},rollbackIfEditIncomplete:!0}})),[b,t,j]),w=(0,n(600264).c)(C),k=(0,a().yK)((e=>({sidebarHeading:{fontSize:16,lineHeight:"24px",fontWeight:M().Ue.medium,marginLeft:8,paddingBottom:2},closeButton:{marginLeft:"auto",marginRight:4},searchInputContainer:{marginTop:8,marginBottom:14,marginLeft:6},searchInput:{background:e.contentBackground},searchInputIcon:{fill:e.mediumIconColor,width:10},moreButton:{marginLeft:0},moreButtonTitle:{margin:0,color:e.lightTextColor,fontSize:12,padding:"0 0 0 6px"},sectionTitle:{padding:"0 0 0 6px"}})),[]),_=(0,s().VK)((()=>{const e=y||f,t={keywords:[],key:"create-new-property-more",render:e=>(0,z.jsx)(H().Z,{...e,buttonStyle:k.moreButton,desktopTitleStyle:k.moreButtonTitle,title:f?(0,z.jsx)(S()._H,{defaultMessage:"Less",id:"layoutBuilderProperties.less.buttonTitle"}):(0,z.jsx)(S()._H,{defaultMessage:"More",id:"layoutBuilderProperties.more.buttonTitle"})}),action:()=>h((e=>!e))};return[...m.slice(0,e?void 0:5).map(w),...y?[]:[t]]}),[m,f,w,y,k.moreButton,k.moreButtonTitle]),T=se({propertySortPriority:ue,defaultCount:4,moreButtonStyle:k.moreButton,moreButtonTitleStyle:k.moreButtonTitle,isSearching:Boolean(y)}),I=(0,i.useMemo)((()=>{const e=[];return T.length>0&&e.push({key:"existing-properties",render:e=>(0,z.jsx)(E().Z,{title:r.formatMessage(de.existingPropertiesSectionTitle),desktopTitleStyle:k.sectionTitle,...e}),items:T}),e.push({key:"create-new-properties",render:e=>(0,z.jsx)(E().Z,{title:r.formatMessage(de.createNewPropertyModuleSectionTitle),desktopTitleStyle:k.sectionTitle,...e}),items:_}),g.length>0&&e.push({key:"related-collection-properties",render:e=>(0,z.jsx)(E().Z,{title:r.formatMessage(de.relatedCollectionPropertiesSectionTitle),desktopTitleStyle:k.sectionTitle,...e}),items:g}),e}),[_,T,r,g,k.sectionTitle]);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(u().gq,{style:k.sidebarHeading,alignItems:"center",children:(0,z.jsx)(S()._H,{...p?de.addToPanel:de.addToPage})}),(0,z.jsx)(V().ZP,{focusInitial:!0,onChange:x,placeholder:r.formatMessage(de.searchInputPlaceholder),showClearButton:!0,value:y||"",style:k.searchInputContainer,inputOuterStyle:k.searchInput,inputLeft:(0,q().R)(k.searchInputIcon),itemMarginLeft:0}),(0,z.jsx)(n(320123).f,{filterQuery:y,initialFocus:0,type:U().i.Vertical,sections:I})]})}));var me=()=>n(844650),ge=(n(30005),()=>n(293836)),fe=()=>n(177610),he=()=>n(763058),ye=(n(749411),n.n(n(443261))),ve=()=>n(263184),xe=()=>n(565630),be=()=>n(509917),Se=()=>n(328939),Me=()=>n(275200);function je(e){const{propertyGroups:t,propertyIdsToExclude:n,mergedPropertiesMap:a}=e,r=i.useMemo((()=>ve().default.createValue("")),[]),[l,d]=i.useState([]),[c,u]=i.useState({}),[p,m]=i.useState(null),g=i.useMemo((()=>{let e=t?t.flatMap((e=>e.propertyIds||[])):Object.keys(a);return n&&(e=e.filter((e=>!n.has(e)))),e}),[a,t,n]),f=(0,s().Kw)(r),h=(0,xe().Kt)(f,100,((e,t)=>e===t));i.useEffect((()=>{const e=[],t={};if(""!==h)for(const n of g){const i=a[n];i&&null!==ye().match(h,i.name)&&(e.push(n),t[n]=e.length-1)}(l.length!==e.length||e.some(((e,t)=>e!==l[t])))&&(d(e),u(t))}),[g,l,h,a]),i.useEffect((()=>{if(0===l.length)return void m(null);const e=null!==p?l[p]:null;e&&void 0!==c[e]?m(c[e]):m(0)}),[p,l,c]);const y=(0,o().O7)(),v=null!==p?l[p]:null;return i.useEffect((()=>{const e=document.getElementsByClassName(be().qp).item(0);e&&!(0,Se().G)({element:e})&&(0,Me().Oc)({el:e,environment:y,windowHeight:window.innerHeight,minEdgeDist:16})}),[y,v]),{searchInputValueStore:r,searchMatchesMap:c,searchMatches:l,activeSearchMatchIndex:p,moveToNextSearchMatch:()=>{if(null===p||l.length<=1)return;const e=p+1;m(e<=l.length-1?e:0)},moveToPreviousSearchMatch:()=>{if(null===p||l.length<=1)return;const e=p-1;m(e>=0?e:l.length-1)}}}var Ce=()=>n(686929);function we(e){let{propertyGroupId:t,pagePropertiesStore:n}=e;const{collectionStore:i}=(0,G().PP)(),o=(0,a().yK)((e=>({button:{color:e.text.secondary,paddingLeft:8,height:34},buttonIcon:{fill:e.icon.secondary,marginRight:8}})),[]);return(0,z.jsx)(Ce().le,{style:o.button,iconStyle:o.buttonIcon,collectionStore:i,isInPeekRenderer:!1,propertyGroupId:t,pagePropertiesStore:n})}const ke=i.memo(we);n(821057);var _e=()=>n(955620),Te=()=>n(513670),Ie=()=>n(448419),Pe=()=>n(9641),Ae=()=>n(206352),Re=()=>n(291198),Ze=()=>n(198829),Be=()=>n(92175),De=()=>n(967092),Le=()=>n(906651),Oe=()=>n(352230),He=()=>n(404553),Ve=()=>n(536635),Ue=()=>n(263758),Ee=()=>n(739479),Ne=()=>n(529048),Fe=()=>n(170075);class Ke extends ve().default{getInitialState(){return{}}isRenameInputForcedOpenForGroup(e){var t;return(null===(t=this.getState())||void 0===t?void 0:t.forceOpenRenameInputForGroupId)===e}resetForceRenameInputOpen(){const e=this.getState();return this.setState({...e,forceOpenRenameInputForGroupId:void 0})}}const ze=new Ke;function We(e){const{title:t,propertyGroupId:n,isFirstPropertyGroup:r,isLastPropertyGroup:l,styles:d}=e,c=(0,s().qz)(void 0,Ne().Z),u=(0,s().VK)((()=>ze.isRenameInputForcedOpenForGroup(n)),[n]),[p,m]=(0,i.useState)(u);(0,i.useEffect)((()=>{c.setState({...c.state,open:u})}),[c,u]);const g=(0,i.useCallback)((()=>{m(!1),ze.resetForceRenameInputOpen()}),[]),f=function(){const{collectionStore:e}=(0,G().PP)(),t=(0,o().O7)();return(0,i.useCallback)((n=>{w().createAndCommit({environment:t,perform(t){(0,Fe().Xh)({collectionStore:e,groupId:n,transaction:t})},canUndo:!0,userAction:"ConfigurePropertyGroupModuleGroupHeading.deleteCollectionPropertyGroup"})}),[e,t])}(),h=function(){const{collectionStore:e}=(0,G().PP)(),t=(0,o().O7)();return(0,i.useCallback)((n=>{w().createAndCommit({environment:t,perform(t){(0,Fe().CE)({collectionStore:e,groupId:n,transaction:t})},canUndo:!0,userAction:"ConfigurePropertyGroupModuleGroupHeading.deleteCollectionPropertyGroup"})}),[e,t])}(),y=function(){const{collectionStore:e}=(0,G().PP)(),t=(0,o().O7)();return(0,i.useCallback)((n=>{w().createAndCommit({environment:t,perform(t){(0,Fe().D_)({collectionStore:e,groupId:n,transaction:t})},canUndo:!0,userAction:"ConfigurePropertyGroupModuleGroupHeading.deleteCollectionPropertyGroup"})}),[e,t])}(),v=(0,a().yK)((e=>({container:{display:"flex",alignItems:"center",padding:"0 2px",...(null==d?void 0:d.container)||{}},titleContainer:{display:"flex",alignItems:"center",marginRight:"auto",paddingLeft:5,borderRadius:4,height:"auto",width:"100%"},label:{fontSize:"12px",lineHeight:"24px",color:e.mediumTextColor,fontWeight:500,padding:"0 8px 0 5px",display:"block",...M().Yu},menuIcon:{width:16,height:16},dragIcon:{fill:e.icon.secondary}})),[d]);return(0,z.jsx)("div",{style:v.container,children:(0,z.jsx)(Ie().ZP,{style:{width:268},onClose:g,popupType:De().kQ.Popup,renderOrigin:e=>(0,z.jsxs)(Be().Z,{...e,style:v.titleContainer,children:[(0,z.jsx)(Pe().Z,{iconSize:12,iconStyle:v.dragIcon}),(0,z.jsx)("div",{style:v.label,children:t})]}),buttonPopupStore:c,alignmentToOrigin:B().Alignment.Start,render:e=>{return p?(0,z.jsx)(qe,{propertyGroupId:n,value:t||"",afterSubmit:e.close}):(0,z.jsx)(Ze().Z,{menuType:Oe().o.Popup,children:(0,z.jsx)(U().Z,{type:U().i.Vertical,initialFocus:0,sections:[{key:0,render:e=>(0,z.jsx)(E().Z,{...e}),items:(i=e.close,(0,Te().oA)([{key:"rename",render:e=>(0,z.jsx)(H().Z,{...e,icon:(0,Ue().E)(v.menuIcon),title:(0,z.jsx)(S()._H,{defaultMessage:"Rename",id:"ConfigurePropertyGroupModuleGroupHeading.rename"})}),action:()=>{m(!0)}},!r&&{key:"move-up",render:e=>(0,z.jsx)(H().Z,{...e,icon:(0,Ve().Z)(v.menuIcon),title:(0,z.jsx)(S()._H,{defaultMessage:"Move up",id:"ConfigurePropertyGroupModuleGroupHeading.moveUp"})}),action:()=>{h(n),i()}},!l&&{key:"move-down",render:e=>(0,z.jsx)(H().Z,{...e,icon:(0,He().M)(v.menuIcon),title:(0,z.jsx)(S()._H,{defaultMessage:"Move down",id:"ConfigurePropertyGroupModuleGroupHeading.moveDown"})}),action:()=>{y(n),i()}},{key:"delete",render:e=>(0,z.jsx)(H().Z,{...e,icon:(0,Ee().y)({width:16,height:16}),title:(0,z.jsx)(S()._H,{defaultMessage:"Delete",id:"ConfigurePropertyGroupModuleGroupHeading.delete"}),caption:(0,z.jsx)(S()._H,{defaultMessage:"No properties will be deleted",id:"ConfigurePropertyGroupModuleGroupHeading.deleteCaption"})}),action:()=>{f(n),i()}}]))}]})});var i}})})}function qe(e){let{propertyGroupId:t,afterSubmit:n,value:s}=e;const[r,l]=(0,i.useState)(s),d=(0,a().yK)((()=>({container:{display:"flex",padding:"6px"},input:{marginRight:4,flexGrow:1},button:{}})),[]),c=function(){const{collectionStore:e}=(0,G().PP)(),t=(0,o().O7)();return(0,i.useCallback)(((n,i)=>{const o=e.getNormalizedPropertyGroups();if(void 0===o)throw new Error("Error renaming property group. Collection Does not have property groups.");const s=o.map((e=>e.id===n?{...e,title:i}:e));w().createAndCommit({environment:t,perform(t){C().FH({stores:[e],update:{property_groups:s},transaction:t})},canUndo:!0,userAction:"ConfigurePropertyExplorerModule.renameCollectionPropertyGroup"})}),[e,t])}(),u=(0,i.useCallback)((()=>{const e=(0,_e().vJ3)(r).trim();0!==e.length&&(c(t,e),n())}),[n,c,r,t]),p=(0,i.useCallback)((e=>{l(e.target.value)}),[]);return(0,z.jsx)(Ae().Z,{debugName:"ConfigurePropertyGroupHeader",capture:!0,allowUndo:!0,allowEsc:!0,allowTabUntab:!0,children:(0,z.jsxs)("div",{style:d.container,children:[(0,z.jsx)(Re().Z,{style:d.input,onSubmit:u,selectAll:!0,value:r,onChange:p,focusInitial:!0}),(0,z.jsx)(Le().Z,{style:d.button,onClick:u,children:(0,z.jsx)(S()._H,{id:"ConfigurePropertyGroupModuleGroupHeading.updatePropertyGroupTitle",defaultMessage:"Done"})})]})})}var Ge=()=>n(601521),Ye=()=>n(119891),$e=()=>n(845991);function Xe(e){const{collectionFormat:t,mergedProperties:n,renderPropertyRow:o}=e,{collectionStore:a}=(0,G().PP)(),r=(0,s().VK)((()=>null==n?void 0:n.map((e=>e.property))),[n]),l=(0,i.useCallback)(((e,t)=>o({propertyId:e,rowIndex:t})),[o]),d=(0,fe().G_)({collectionStore:a,format:t});return r?(0,z.jsx)(Ye().ZP,{keys:r,onDrop:d,direction:"vertical",renderKey:l}):null}function Qe(e){const{renderPropertyRow:t,renderPropertyGroupRow:n,renderAddPropertyButton:a}=e,l=(0,o().O7)(),{collectionStore:d}=(0,G().PP)(),c=(0,s().VK)((()=>d.getNormalizedPropertyGroups()??[]),[d]),u=(0,i.useMemo)((()=>Object.fromEntries(c.map((e=>[e.id,e])))),[c]),p=(0,s().VK)((()=>c.map((e=>{var t;return{key:{key:e.id,draggable:!0},items:[...(null===(t=e.propertyIds)||void 0===t?void 0:t.map((e=>({key:e,draggable:!0}))))??[],(0,Ge().zR)(e.id)]}}))),[c]),m=(0,i.useCallback)((e=>{let{flattenedKeys:t,isSection:n}=e;return n?new Set(t.flatMap(((e,t)=>(0,r().$K)(u[e])?[]:[t]))):new Set(t.flatMap(((e,t)=>(0,Ge().h)(e)?[t+1]:[])))}),[u]),g=(0,i.useCallback)((e=>{var i;return e.isSection?n({groupId:e.key,groupTitle:null===(i=u[e.key])||void 0===i?void 0:i.title,rowIndex:e.sectionIndex}):(0,Ge().h)(e.key)?a((0,Ge().Dw)(e.key)):t({propertyId:e.key,rowIndex:e.sectionIndex})}),[u,a,n,t]),f=(0,i.useCallback)((e=>{const t=e.newSections.map((e=>{var t;const n=e.items.map((e=>"string"==typeof e?e:e.key)).filter((e=>!(0,Ge().h)(e))),i="string"==typeof e.key?e.key:e.key.key;return{id:i,title:null===(t=u[i])||void 0===t?void 0:t.title,propertyIds:n}}));w().createAndCommit({environment:l,perform(e){(0,Fe().N7)({collectionStore:d,newGroups:t,transaction:e})},canUndo:!0,userAction:"ConfigurePropertyExplorerModule.onDrop"})}),[d,l,u]);return(0,z.jsx)($e().Z,{direction:"vertical",sections:p,renderKey:g,onDrop:f,getInvalidDropIndices:m})}var Je=()=>n(1910),et=()=>n(109806),tt=()=>n(701572);const nt=(0,K().IU)("eyelash",{viewBox:"0 0 16 16",svg:(0,z.jsx)("path",{fillRule:"evenodd",d:"M2.1488 5.12366C1.94088 4.76541 1.48191 4.64354 1.12366 4.85145C0.76541 5.05937 0.643537 5.51833 0.851451 5.87659C1.05856 6.23345 1.30425 6.56012 1.58188 6.85746L0.46967 7.96967C0.176777 8.26256 0.176777 8.73744 0.46967 9.03033C0.762563 9.32322 1.23744 9.32322 1.53033 9.03033L2.73804 7.82262C3.18107 8.11266 3.66308 8.35645 4.17017 8.55584L3.30384 10.7217C3.15001 11.1062 3.33707 11.5427 3.72166 11.6966C4.10624 11.8504 4.54272 11.6633 4.69656 11.2787L5.61111 8.99235C6.14972 9.11164 6.70058 9.18864 7.25 9.22519V11.5C7.25 11.9142 7.58579 12.25 8 12.25C8.41421 12.25 8.75 11.9142 8.75 11.5V9.2252C9.29955 9.18866 9.85054 9.11164 10.3893 8.99232L11.3038 11.2787C11.4577 11.6633 11.8942 11.8504 12.2787 11.6966C12.6633 11.5427 12.8504 11.1062 12.6966 10.7217L11.8302 8.55579C12.3372 8.35643 12.8191 8.11269 13.2621 7.82272L14.4697 9.03033C14.7626 9.32322 15.2374 9.32322 15.5303 9.03033C15.8232 8.73744 15.8232 8.26256 15.5303 7.96967L14.4182 6.85759C14.6959 6.56021 14.9417 6.2335 15.1488 5.87659C15.3567 5.51833 15.2348 5.05937 14.8766 4.85145C14.5183 4.64354 14.0594 4.76541 13.8515 5.12366C12.883 6.79244 10.5428 7.75012 8.00012 7.75012C5.45748 7.75012 3.11728 6.79244 2.1488 5.12366Z"})});var it=()=>n(663221);function ot(e){let{collectionStore:t,pageStore:n,layoutModule:o,pagePropertiesStore:r,propertyId:l,draggable:d,rightButton:c,searchHighlighted:u}=e;const p=(0,s().VK)((()=>n.isNonEditableState()),[n]),{collectionSchema:m,collectionFormat:g,canEditCollection:f}=(0,s().VK)((()=>({collectionSchema:t.getSchema(),collectionFormat:t.getFormat(),canEditCollection:t.canEdit()})),[t]),h=(0,a().yK)((()=>({propertyRowContainer:{width:"100%",minWidth:"100%",display:"grid",alignItems:"center",gridTemplateColumns:"1fr auto",gap:2,paddingLeft:2}})),[]),y=(0,i.useMemo)((()=>({color:"primary",size:"medium",fontWeight:"regular",width:{variant:"fixed",widthDesktop:"100%",widthMobile:"100%"}})),[]),v=Boolean(u),x=Boolean(u&&u.active);return(0,z.jsxs)("div",{style:h.propertyRowContainer,children:[(0,z.jsx)(it().Z,{schema:m,styleVariants:y,format:g,property:l,collectionStore:t,disabled:!1,locked:p,canConfigureCollection:f,isInPeekRenderer:!1,hideDragHandle:!d,showDragHandleAsIcon:!0,dragHandleStyle:{width:16,marginRight:2},blockStore:n,pagePropertiesStore:r,layoutModule:o,forceHighlight:v,forceFocusedHighlight:x}),c?c():null]})}function st(e){const{propertyId:t,propertyFormat:n,pagePropertiesStore:a,collectionStore:r,pageStore:l,searchHighlighted:d}=e,c=(0,S().YB)(),u=(0,o().O7)(),p=(0,s().VK)((()=>r.getSchema()),[r]),m=(0,s().VK)((()=>(0,b().i)(r.getFormat(),p,void 0,x().j5.Collection)),[r,p]),g=p[t],f=(0,i.useCallback)((e=>{w().createAndCommit({environment:u,userAction:"LayoutBuilder.propertiesConfiguration.toggleVisibility",canUndo:!0,perform:n=>{j().M0({property:t,visibility:e,store:r,format:m,transaction:n})}})}),[m,r,u,t]),h="show"===(null==n?void 0:n.visibility)?et().c:"hide_if_empty"===(null==n?void 0:n.visibility)?tt().C:nt,y="show"===(null==n?void 0:n.visibility)||"hide_if_empty"===(null==n?void 0:n.visibility);if(!g)return null;return(0,z.jsx)(ot,{pageStore:l,collectionStore:r,propertyId:t,pagePropertiesStore:a,draggable:!0,rightButton:()=>(0,z.jsx)(Ie().ZP,{popupType:De().kQ.Popup,renderOrigin:e=>(0,z.jsx)(Je().Z,{ariaLabel:c.formatMessage(rt.visibilityToggleIconAriaLabel,{propertyName:g.name}),icon:h,isDarkIconColor:y,...e}),alignmentToOrigin:B().Alignment.Start,render:e=>(0,z.jsx)(at,{parentClose:e.close,setVisibilityOfProperty:f})}),searchHighlighted:d,layoutModule:e.layoutModule})}function at(e){const{setVisibilityOfProperty:t,parentClose:n}=e,o=(0,i.useMemo)((()=>[{key:0,render:e=>(0,z.jsx)(E().Z,{...e}),items:[{key:"always_show",render:e=>(0,z.jsx)(H().Z,{...e,icon:(0,et().c)({width:16,height:16}),title:(0,z.jsx)(S()._H,{defaultMessage:"Always show",id:"ConfigurePropertiesPropertyRow.visibility.alwaysShow"})}),action:()=>{t("show"),n()}},{key:"hide_if_empty",render:e=>(0,z.jsx)(H().Z,{...e,icon:(0,tt().C)({width:16,height:16}),title:(0,z.jsx)(S()._H,{defaultMessage:"Hide when empty",id:"ConfigurePropertiesPropertyRow.visibility.hide_when_empty"})}),action:()=>{t("hide_if_empty"),n()}},{key:"hide",render:e=>(0,z.jsx)(H().Z,{...e,icon:nt({width:16,height:16}),title:(0,z.jsx)(S()._H,{defaultMessage:"Always hide",id:"ConfigurePropertiesPropertyRow.visibility.alwaysHide"})}),action:()=>{t("hide"),n()}}]}]),[n,t]);return(0,z.jsx)(Ze().Z,{menuType:Oe().o.Popup,children:(0,z.jsx)(U().Z,{type:U().i.Vertical,initialFocus:0,sections:o})})}const rt=(0,S().vU)({visibilityToggleIconAriaLabel:{id:"pageLayout.configureProperties.visibilityToggleIconAriaLabel",defaultMessage:"Toggle the visibility {propertyName}"}}),lt=(0,S().vU)({filterPropertiesInputPlaceholder:{id:"layouts.configurePropertiesModule.filterProperties.input.placeholder",defaultMessage:"Search..."},notFound:{id:"layouts.configurePropertiesModule.filterProperties.input.notFound",defaultMessage:"Not Found"},arrowButtonDownAriaLabel:{id:"layouts.configurePropertiesModule.filterProperties.input.arrowButtonDown.ariaLabel",defaultMessage:"Button to navigate to the next result"},arrowButtonUpAriaLabel:{id:"layouts.configurePropertiesModule.filterProperties.input.arrowButtonUp.ariaLabel",defaultMessage:"Button to navigate to the previous result"}});function dt(e){const{searchInputValueStore:t,activeSearchMatchIndex:n,searchMatches:o,moveToNextSearchMatch:r,moveToPreviousSearchMatch:l}=e,d=(0,s().Kw)(t),c=(0,S().YB)(),p=i.useCallback((e=>{"Enter"===e.key?(e.preventDefault(),r()):"ArrowUp"===e.key?l():"ArrowDown"===e.key&&r()}),[r,l]),m=(0,a().yK)((e=>({searchMatchCount:{fontSize:".8rem",color:e.text.tertiary,userSelect:"none",cursor:"default",flexShrink:0,marginRight:4},searchMatchArrowButton:{padding:3,width:void 0,height:void 0,cursor:"pointer"},searchMatchArrowIcon:{width:12,height:12,color:e.icon.secondary,strokeWidth:.4,stroke:"currentcolor"},searchInputIcon:{fill:e.mediumIconColor,width:10},searchInputOuter:{background:e.white}})),[]),g=i.useMemo((()=>{if(""!==d)return(0,z.jsxs)(u().gq,{alignItems:"center",gap:8,children:[(0,z.jsx)("div",{children:null!==n?`${n+1} of ${o.length}`:c.formatMessage(lt.notFound)}),null!==n&&(0,z.jsxs)(u().gq,{gap:0,alignItems:"center",children:[(0,z.jsx)(Je().Z,{icon:He().M,iconStyle:m.searchMatchArrowIcon,style:m.searchMatchArrowButton,ariaLabel:c.formatMessage(lt.arrowButtonDownAriaLabel),onClick:r}),(0,z.jsx)(Je().Z,{icon:Ve().Z,iconStyle:m.searchMatchArrowIcon,style:m.searchMatchArrowButton,ariaLabel:c.formatMessage(lt.arrowButtonUpAriaLabel),onClick:l})]})]})}),[d,n,o.length,c,m,r,l]);return(0,z.jsx)(V().ZP,{focusInitial:!0,itemMarginLeft:0,itemMarginRight:0,onChange:e=>{t.setState(e.target.value.trim())},onKeyDown:p,placeholder:c.formatMessage(lt.filterPropertiesInputPlaceholder),showClearButton:!0,value:d,inputLeft:(0,q().R)(m.searchInputIcon),inputOuterStyle:m.searchInputOuter,inputRightStyle:m.searchMatchCount,inputRight:g})}function ct(e){const{module:t}=e,{layoutStore:n}=(0,G().J9)(),{collectionStore:o,pageStore:l}=(0,G().PP)(),c=(0,s().VK)((()=>n.getModules()),[n]),p=(0,s().VK)((()=>o.getSchema()),[o]),g=(0,s().VK)((()=>(0,b().i)(o.getFormat(),p,void 0,x().j5.Collection)),[o,p]),f=(0,i.useMemo)((()=>new Set((0,ge().m)({modulesByArea:c,collectionSchema:p,collectionFormat:g}))),[g,c,p]),h=(0,i.useMemo)((()=>new(he().pB)),[]),y=(0,s().VK)((()=>o.getNormalizedPropertyGroups()),[o]),v=(0,s().VK)((()=>{const e={};return null==y||y.forEach(((t,n)=>{e[t.id]=n})),e}),[y]),S=(0,fe().nd)({store:l,format:g,schema:p,collectionStore:o}),M=(0,i.useMemo)((()=>{const e={};return S.forEach((t=>e[t.property]=t)),e}),[S]),{searchInputValueStore:j,searchMatches:C,searchMatchesMap:w,activeSearchMatchIndex:k,moveToNextSearchMatch:_,moveToPreviousSearchMatch:T}=je({mergedPropertiesMap:M,propertyGroups:y,propertyIdsToExclude:f}),I=(0,i.useCallback)((e=>{let{propertyId:n}=e;if(f.has(n))return null;const i=void 0!==w[n]&&null!==k?{active:n===C[k]}:void 0;return(0,z.jsx)(st,{propertyId:n,propertyFormat:M[n],collectionStore:o,pagePropertiesStore:h,pageStore:l,searchHighlighted:i,layoutModule:t})}),[k,o,M,t,h,l,f,C,w]),P=(0,i.useCallback)((e=>{let{groupId:t,groupTitle:n}=e;const i=v[t],o=0===i,s=(0,r().$K)(y)&&i===y.length-1,a={container:o?void 0:{marginTop:20}};return(0,z.jsx)(We,{title:n,propertyGroupId:t,isFirstPropertyGroup:o,isLastPropertyGroup:s,styles:a})}),[v,y]),A=(0,i.useCallback)((e=>(0,z.jsx)(ke,{propertyGroupId:e,pagePropertiesStore:h})),[h]),R=Boolean(S.length&&S.length>f.size),Z=(0,a().yK)((e=>({addPropertyButtonContainer:{marginLeft:2,paddingBottom:8},container:{marginTop:R?4:8,height:"100%",overflow:"visible hidden",marginLeft:-Yt,width:`calc(100% + ${2*Yt}px)`},searchInputContainer:{marginRight:Yt,marginLeft:Yt,flexShrink:0,paddingTop:2,overflow:"visible",marginBottom:14,paddingLeft:6,paddingRight:6},listContainer:{padding:`0 ${Yt}px 56px`}})),[R]);return(0,z.jsxs)(u().Ht,{style:Z.container,children:[R&&(0,z.jsx)("div",{style:Z.searchInputContainer,children:(0,z.jsx)(dt,{searchInputValueStore:j,activeSearchMatchIndex:k,searchMatches:C,moveToNextSearchMatch:_,moveToPreviousSearchMatch:T})}),(0,z.jsx)(d().Z,{type:m().Z.Y,style:Z.listContainer,children:Boolean(y)?(0,z.jsx)(Qe,{renderPropertyRow:I,renderPropertyGroupRow:P,renderAddPropertyButton:A}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Xe,{collectionFormat:g,mergedProperties:S,renderPropertyRow:I}),(0,z.jsx)("div",{style:Z.addPropertyButtonContainer,children:(0,z.jsx)(ke,{pagePropertiesStore:h})})]})})]})}var ut=()=>n(641506),pt=()=>n(419273);const mt=(0,S().vU)({addSection:{id:"NewCollectionPropertyGroupButton.label",defaultMessage:"Add section"},newSection:{id:"NewCollectionPropertyGroupButton.newItemName",defaultMessage:"New section"}});function gt(){const{collectionStore:e}=(0,G().PP)(),t=(0,o().O7)(),n=(0,S().YB)(),s=(0,a().yK)((e=>({button:{fontSize:(0,ut().yv)(t,"UISmall"),color:e.text.secondary,padding:8,fontWeight:M().Ue.medium},icon:{fill:e.icon.secondary,marginRight:4}})),[t]),r=(0,i.useCallback)((()=>{const i=n.formatMessage(mt.newSection),{performResult:o}=w().createAndCommit({environment:t,perform:t=>(0,Fe().xN)({collectionStore:e,newGroupTitle:i,transaction:t}),canUndo:!0,userAction:"ConfigurePropertyExplorerModule.onDrop"});o&&ze.setState({forceOpenRenameInputForGroupId:o})}),[e,t,n]);return(0,z.jsx)(Be().Z,{icon:pt().f,onClick:r,style:s.button,iconStyle:s.icon,children:(0,z.jsx)(S()._H,{...mt.addSection})})}function ft(e){const{title:t}=e;return(0,z.jsxs)(u().gq,{justifyContent:"space-between",children:[t,(0,z.jsx)(gt,{})]})}var ht=()=>n(139224),yt=()=>n(765458),vt=()=>n(347577);function xt(e){return(0,z.jsx)("div",{style:{marginLeft:-8,marginRight:-8},children:e.children})}function bt(e){let{module:t}=e;const{collectionStore:n}=(0,G().PP)(),o=(0,N().Y$)(),a=(0,s().VK)((()=>n.getSchema()),[n]),r=(0,s().VK)((()=>{if((0,ne().f)(t))return t}),[t]),l=(0,s().VK)((()=>r&&a[r.propertyId]),[r,a]);if((0,i.useEffect)((()=>{if(r)return ht().r$({collectionContextStore:o,collectionSettingsStore:o.settingsStore,closeOnEscape:!1}),ht().FK({collectionSettingsStore:o.settingsStore,item:{type:"property",property:r.propertyId,formatKey:void 0}}),()=>{ht().E3({collectionSettingsStore:o.settingsStore})}}),[o,r]),!l||!r)return null;const d=(0,z.jsx)("span",{style:{fontSize:16,lineHeight:"24px",fontWeight:M().Ue.medium},children:F().SO[l.type]});return(0,z.jsx)(xt,{children:(0,z.jsx)(yt().PJ,{collectionContextStore:o,collectionSettingsStore:o.settingsStore,context:vt().HV.ViewSettings,collectionSettingsPropertyTitleOverride:d,fullHeight:!0})})}n(470928);var St=()=>n(421551);function Mt(e){let{module:t}=e;const{collectionStore:n,pageStore:i}=(0,G().PP)(),o=(0,a().yK)((e=>({configureContainer:{display:"flex",flexDirection:"column",justifyContent:"flex-start",gap:12,marginTop:16},configureDescription:{fontSize:M().JB.UISmall.desktop,fontWeight:M().Ue.regular,color:e.text.secondary,marginLeft:8}})),[]);return(0,z.jsxs)("div",{style:o.configureContainer,children:[(0,z.jsx)("div",{style:o.configureDescription,children:(0,z.jsx)(S()._H,{defaultMessage:"Relations can be shown as either minimal or responsive page sections",id:"pageLayout.ConfigureRelationsGroupModule.moduleDescription"})}),(0,z.jsx)(jt,{layoutModule:t,pageStore:i,collectionStore:n})]})}function jt(e){let{collectionStore:t,pageStore:n,layoutModule:a}=e;const r=(0,o().O7)(),l=(0,i.useMemo)((()=>new(he().pB)),[]),{collectionPagePropertySections:d}=(0,s().VK)((()=>{const e=t.getSchema(),n=t.getFormat();return{collectionPagePropertySections:(0,St().n)({format:n,schema:e,visibilityLevels:["inline","minimal"]})}}),[t]),c=d.map((e=>e.section)),u=(0,i.useCallback)((e=>{if(!d)return;const n=e.map((e=>{const t=d.find((t=>t.section===e));if(!t)throw Error("collection does not have a section corresponding to one of the dropped keys");return t}));w().createAndCommit({userAction:"ConfigureRelationsGroupModule.onDraggablePageSectionsDrop",environment:r,canUndo:!0,perform:e=>{j().Do({environment:r,pageSectionFormats:n,store:t,transaction:e})}})}),[d,t,r]);return d.length?(0,z.jsx)(Ye().ZP,{direction:"vertical",keys:c,renderKey:e=>(0,z.jsx)(ot,{pageStore:n,collectionStore:t,propertyId:e,pagePropertiesStore:l,layoutModule:a,draggable:!0}),onDrop:e=>u(e)}):null}var Ct=()=>n(839212),wt=()=>n(149319),kt=()=>n(133009),_t=()=>n(142730),Tt=()=>n(356117);function It(e){const{environment:t,layoutModule:n,collectionStore:i,layoutStore:o,propertyId:s}=e,a=i.getSchema(),r=o.getModel(),l=null==r?void 0:r.getPageModuleAreaById(n.id);if(!l||!r||"normalizedTitleWithIcon"!==n.type)return;const{pinnedPropertyIds:d}=function(e,t,n){let i,o=[...t??[]];return o.includes(e)?(o=o.filter((t=>t!==e)),i=!1):(o.push(e),o.length>Ct().c&&(o=(0,te().bQ)(o,n)),i=!0),{isNowPinned:i,pinnedPropertyIds:o}}(s,n.propertyIds,a),c={...n,propertyIds:d};w().createAndCommit({environment:t,perform(e){(0,_t().iQ)({environment:t,transaction:e,property:s,layoutStore:o}),(0,Tt().Uq)({environment:t,transaction:e,layoutStore:o,position:{area:l,moduleId:n.id},updatedModule:c})},canUndo:!0,userAction:"titleWithIconActions.togglePinnedProperty"})}var Pt=()=>n(57956);function At(e){let{module:t}=e;const{collectionStore:n,pageStore:l}=(0,G().PP)(),d=(0,s().VK)((()=>n.getSchema()),[n]),c=(0,s().VK)((()=>(0,b().i)(n.getFormat(),d,void 0,x().j5.Collection)),[n,d]),p=(0,i.useMemo)((()=>new(he().pB)),[]),m=(0,i.useMemo)((()=>"normalizedTitleWithIcon"!==t.type?[]:(0,te().bQ)(t.propertyIds,d)),[t,d]),g=(0,i.useMemo)((()=>new Set(m)),[m]),f=(0,s().VK)((()=>{var e;return null===(e=c.property_visibility||[])||void 0===e?void 0:e.map((e=>e.property)).filter((e=>!(0,L().pn)(e)&&!g.has(e)))}),[c.property_visibility,g]),h=(0,s().VK)((()=>(0,r().Yd)(d)),[d]),y=(0,fe().nd)({store:l,format:c,schema:d,collectionStore:n,propertyIds:h}),v=(0,i.useMemo)((()=>{const e={};for(const t of y)e[t.property]=t;return e}),[y]),{searchInputValueStore:j,searchMatches:C,activeSearchMatchIndex:k,moveToNextSearchMatch:T,moveToPreviousSearchMatch:P,searchMatchesMap:R}=je({mergedPropertiesMap:v,propertyGroups:void 0,propertyIdsToExclude:void 0}),Z=function(e){const t=(0,o().O7)(),{layoutStore:n}=(0,G().J9)();return(0,i.useCallback)((i=>{const o=n.getModel(),s=null==o?void 0:o.getPageModuleAreaById(e.id);if(!s||!o)return;const a={...e,propertyIds:i};w().createAndCommit({environment:t,perform(i){(0,Tt().Uq)({environment:t,transaction:i,layoutStore:n,position:{area:s,moduleId:e.id},updatedModule:a})},canUndo:!0,userAction:"ConfigureTitleAndIconModule.handlePinnedPropertyReorderDrop"})}),[t,e,n])}(t),D=(0,a().yK)((e=>{const t={fontSize:M().JB.UISmall.desktop,lineHeight:"24px",color:e.mediumTextColor,fontWeight:500};return{container:{height:"100%",overflow:"visible hidden",gap:14,marginLeft:-Yt,width:`calc(100% + ${2*Yt}px)`},propertySearchInputContainer:{flexShrink:0,margin:`10px ${Yt+6}px 0`},scrollableContainer:{padding:`0 ${Yt}px 56px`,flexGrow:1,overflow:"hidden auto"},pinnedPropertiesLabel:{...t,marginLeft:8},popoverMessage:{color:e.lightTextColor,fontSize:M().JB.UISmall.desktop,marginTop:10},optionsContainer:{marginTop:24},optionsLabel:{...t,marginLeft:6,marginBottom:6},switcherButton:{marginRight:0},textWrapperStyle:{marginLeft:6},addPropertyButton:{color:e.text.secondary,height:34},addPropertyButtonIcon:{color:e.text.secondary}}}),[]),O=m.length?(0,z.jsx)(Ye().ZP,{keys:m,onDrop:Z,direction:"vertical",renderKey:e=>(0,z.jsx)(Zt,{layoutModule:t,propertyId:e,isPinned:!0,draggable:!0,pinButtonDisabled:!1,pagePropertiesStore:p,searchHighlighted:null!==k&&void 0!==R[e]?{active:e===C[k]}:void 0})}):null,H=m.length>=Ct().c,V=f.map((e=>(0,z.jsx)(Zt,{layoutModule:t,propertyId:e,isPinned:!1,draggable:!1,pinButtonDisabled:H,pagePropertiesStore:p,searchHighlighted:null!==k&&void 0!==R[e]?{active:e===C[k]}:void 0},e))),U=Rt(t),E=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,z.jsx)(Ce().le,{...e,style:D.addPropertyButton,iconStyle:D.addPropertyButtonIcon,collectionStore:n,isInPeekRenderer:!1,pagePropertiesStore:p,onPropertyAdded:U,disabled:H})},{backlinksVisibility:N,updateBacklinksVisibility:F}=(0,Pt().F6)({store:n,format:c}),K=(0,S().YB)(),W=(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{style:{...D.pinnedPropertiesLabel},children:(0,z.jsx)(S()._H,{...Bt.pinnedPropertiesLabel})}),O,(0,z.jsx)("div",{style:{marginLeft:2},children:H?(0,z.jsx)(I().Z,{placement:B().Placement.Left,render:e=>E(e),renderTooltip:()=>K.formatMessage(Bt.maxPinnedPropertiesAddPropertyTooltip,{br:(0,z.jsx)("br",{})})}):E()}),V.length>0&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{style:{...D.pinnedPropertiesLabel,marginTop:24},children:(0,z.jsx)(S()._H,{...Bt.unpinnedPropertiesLabel})}),V]})]});return(0,z.jsxs)(u().Ht,{style:D.container,children:[(0,z.jsx)("div",{style:D.propertySearchInputContainer,children:(0,z.jsx)(dt,{activeSearchMatchIndex:k,searchMatches:C,moveToNextSearchMatch:T,moveToPreviousSearchMatch:P,searchInputValueStore:j})}),(0,z.jsxs)("div",{style:D.scrollableContainer,children:[W,(0,z.jsxs)("div",{style:D.optionsContainer,children:[(0,z.jsx)("div",{style:D.optionsLabel,children:(0,z.jsx)(S()._H,{...Bt.optionsLabel})}),(0,z.jsx)(_().ZP,{right:(0,z.jsx)(A().nm,{currentVisibility:N,onSelect:F}),textWrapperStyle:D.textWrapperStyle,rightStyle:D.switcherButton,title:(0,z.jsx)(S()._H,{...Bt.showBacklinksOption})})]})]})]})}function Rt(e){const{layoutStore:t}=(0,G().J9)(),{collectionStore:n}=(0,G().PP)(),s=(0,o().O7)();return(0,i.useCallback)((i=>{It({environment:s,layoutModule:e,collectionStore:n,layoutStore:t,propertyId:i})}),[s,e,n,t])}function Zt(e){let{layoutModule:t,propertyId:n,isPinned:i,pinButtonDisabled:o,...r}=e;const l=(0,S().YB)(),d=(0,a().Fg)(),{collectionStore:c,pageStore:u}=(0,G().PP)(),p=(0,s().VK)((()=>c.getSchema()),[c])[n],m=Rt(t);if(!p)return null;const g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,z.jsx)(Je().Z,{...e,disabled:o,ariaLabel:i?l.formatMessage(Bt.toggleUnpinnedAriaLabel,{propertyName:p.name}):l.formatMessage(Bt.togglePinnedAriaLabel,{propertyName:p.name}),icon:i?kt()._:wt().P,iconStyle:{fill:d.icon.primary},onClick:()=>m(n)})};return(0,z.jsx)(ot,{pageStore:u,collectionStore:c,propertyId:n,layoutModule:t,rightButton:()=>o?(0,z.jsx)(I().Z,{placement:B().Placement.Left,render:e=>g(e),renderTooltip:()=>l.formatMessage(Bt.maxPinnedPropertiesTooltip,{br:(0,z.jsx)("br",{})})}):g(),...r})}const Bt=(0,S().vU)({togglePinnedAriaLabel:{id:"pageLayout.configurePinnedProperties.togglePinnedAriaLabel",defaultMessage:"Show {propertyName} as pinned"},toggleUnpinnedAriaLabel:{id:"pageLayout.configurePinnedProperties.toggleUnpinnedAriaLabel",defaultMessage:"Do not show {propertyName} as pinned"},pinnedPropertiesLabel:{id:"pageLayout.configurePinnedProperties.pinnedPropertiesLabel",defaultMessage:"Pinned properties"},unpinnedPropertiesLabel:{id:"pageLayout.configurePinnedProperties.unpinnedPropertiesLabel",defaultMessage:"Unpinned properties"},noUnpinnedPropertiesMessage:{id:"pageLayout.configurePinnedProperties.noUnpinnedPropertiesMessage",defaultMessage:"No properties to pin"},maxPinnedPropertiesTooltip:{id:"pageLayout.configurePinnedProperties.maxPinnedPropertiesTooltip",defaultMessage:"Maximum number of pinned properties reached. {br} Unpin a property to pin another."},maxPinnedPropertiesAddPropertyTooltip:{id:"pageLayout.configurePinnedProperties.maxPinnedPropertiesAddPropertyTooltip",defaultMessage:"Maximum number of pinned properties reached. {br} Unpin a property to create a new pinned property."},optionsLabel:{id:"pageLayout.configurePinnedProperties.optionsLabel",defaultMessage:"Options"},showBacklinksOption:{id:"pageLayout.configurePinnedProperties.showBacklinksOption",defaultMessage:"Backlinks"}});var Dt=()=>n(932753),Lt=()=>n(716025),Ot=()=>n(887430),Ht=()=>n(521777),Vt=()=>n(533622);function Ut(e){let{module:t}=e;const{moduleStateByIdStore:n}=(0,G().PP)(),o=(0,s().VK)((()=>{var e;return null===(e=n.get(t.id))||void 0===e?void 0:e.collectionContextStore}),[n,t.id]),r=(0,s().VK)((()=>{var e;return null==o||null===(e=o.collectionViewStore())||void 0===e?void 0:e.id}),[o]),l=(0,s().VK)((()=>null==o?void 0:o.settingsStore),[o]),d=(0,a().yK)((()=>({titleWrapper:{...zt,marginBottom:6,display:"flex"},viewsContainer:{marginTop:8,width:"100%",display:"flex",flexDirection:"column"}})),[]);(0,i.useEffect)((()=>{o&&ht().r$({collectionContextStore:o,collectionSettingsStore:o.settingsStore,closeOnEscape:!1})}),[o]);const c=(0,s().VK)((()=>{var e;return null==o||null===(e=o.settingsStore)||void 0===e?void 0:e.getState().open}),[o]);return"viewsMain"===t.type&&o&&l&&c?(0,z.jsx)(xt,{children:(0,z.jsx)(N().cu.Provider,{value:o,children:(0,z.jsx)(yt().PJ,{collectionContextStore:o,collectionSettingsStore:l,context:vt().HV.ViewSettings})})}):(0,z.jsxs)("div",{children:[(0,z.jsx)("div",{style:d.titleWrapper,children:(0,z.jsx)(S()._H,{...me().B.viewsMain})}),(0,z.jsxs)("div",{style:d.viewsContainer,children:[(0,z.jsx)(Et,{collectionContextStore:o,currentViewId:r,module:t}),(0,z.jsx)(Vt().ConfigureViewsMainModuleAddNewViewButtonWrapper,{renderOrigin:e=>(0,z.jsx)(Be().Z,{icon:Ht().R,isGray:!0,...e,children:(0,z.jsx)(S()._H,{defaultMessage:"New view",id:"database.viewSettings.createViewTab.newView"})})})]})]})}function Et(e){let{collectionContextStore:t,currentViewId:n,module:i}=e;const a=(0,o().O7)(),r=(0,s().VK)((()=>{if(!t)return[];const e=t.collectionViewBlockStore(),n=null==e?void 0:e.getCollectionViewStores();return null==n?void 0:n.map((e=>{var t;return{id:e.id,icon:null===(t=e.getFormat())||void 0===t?void 0:t.collection_view_icon,type:e.getType(),name:e.getName(),pointer:e.pointer}}))}),[t]);return"editor"===i.type?(0,z.jsx)(Be().Z,{children:(0,z.jsx)("div",{style:{fontWeight:600},children:(0,z.jsx)(S()._H,{...me().B.editor})})},"editor"):r&&t?(0,z.jsx)(z.Fragment,{children:r.map((e=>(0,z.jsx)(Be().Z,{icon:t=>(0,z.jsx)(Lt().F,{viewIcon:e.icon,viewType:e.type,color:"regular",style:t}),onClick:()=>{Dt().f8({environment:a,collectionContextStore:t,collectionViewId:e.id,isFullScreen:!1,isRootChild:!1,isInPeekRenderer:!1}),ht().r$({collectionContextStore:t,collectionSettingsStore:t.settingsStore})},children:(0,z.jsx)("div",{style:{fontWeight:e.id===n?600:void 0},children:void 0!==e.type?(0,Ot().Cc)({collectionViewName:e.name,collectionViewType:e.type}):(0,z.jsx)(S()._H,{...Nt.newView})})},e.id)))}):null}const Nt=(0,S().vU)({newView:{defaultMessage:"New view",id:"database.viewSettings.createViewTab.newView"},back:{defaultMessage:"Back",id:"collectionsSettingsMenu.back"}});function Ft(e){let{module:t}=e;const{moduleStateByIdStore:n}=(0,G().PP)(),i=(0,s().VK)((()=>{var e;return null===(e=n.get(t.id))||void 0===e?void 0:e.collectionContextStore}),[n,t.id]),o=(0,s().VK)((()=>null==i?void 0:i.settingsStore),[i]);return t&&i&&o?(0,z.jsx)(xt,{children:(0,z.jsx)(N().cu.Provider,{value:i,children:(0,z.jsx)(yt().PJ,{collectionContextStore:i,collectionSettingsStore:o,context:vt().HV.ViewSettings})})}):null}function Kt(e){let{moduleId:t}=e;const{layoutStore:n}=(0,G().J9)(),i=(0,s().VK)((()=>n.getModuleById(t)),[n,t]),o=(0,a().yK)((()=>({container:{display:"flex",flexDirection:"column",..."properties"!==(null==i?void 0:i.type)&&"normalizedTitleWithIcon"!==(null==i?void 0:i.type)?{paddingBottom:80}:{height:"100%"}}})),[null==i?void 0:i.type]);return i?(0,z.jsxs)("div",{style:o.container,children:[(r=i,"viewsMain"!==r.type&&"editor"!==r.type&&!(0,ne().f)(r)&&(0,z.jsx)(Wt,{module:i})),(0,z.jsx)(qt,{module:i})]}):null;var r}const zt={fontWeight:M().Ue.medium,marginBottom:0,marginLeft:6,fontSize:16,lineHeight:"24px"};function Wt(e){const{module:t}=e,n=(0,z.jsx)("div",{style:zt,children:(0,z.jsx)(S()._H,{...me().B[t.type]})});return"properties"===t.type?(0,z.jsx)(ft,{title:n}):n}function qt(e){const{module:t}=e;if((0,ne().f)(t))return(0,z.jsx)(bt,{module:t});const{type:n}=t;switch(n){case"properties":return(0,z.jsx)(ct,{module:t});case"normalizedTitleWithIcon":return(0,z.jsx)(At,{module:t});case"relationsGroup":return(0,z.jsx)(Mt,{module:t});case"views":return(0,z.jsx)(Ft,{module:t});case"viewsMain":case"editor":return(0,z.jsx)(Ut,{module:t});case"deleted_property":case"cover":case"inlinePageSections":case"expandedBacklinks":case"discussions":case"bottomControls":case"transcript":case"formQuestion":case"formTitle":case"formSubmit":case"placeholder":return null;default:(0,r().t1)(n)}return null}const Gt=290,Yt=16;function $t(){const{currentModuleSelection:e,layoutStore:t}=(0,G().J9)(),{collectionStore:n}=(0,G().PP)(),i=(0,Z().E)("layout_view_module_next"),o=i,r=!i,l=i,c=(0,s().VK)((()=>{const e=n.getFormat(),t=n.getSchema();return(0,b().i)(e,t,void 0,x().j5.Collection)}),[n]),u=(0,a().yK)((t=>({container:{padding:`8px ${Yt}px ${"existing_module"===(null==e?void 0:e.type)?"0":"24px"}`,minWidth:Gt,width:Gt,maxWidth:Gt},title:{fontSize:16,lineHeight:"24px",fontWeight:M().Ue.medium,margin:"0px 8px 0px 8px"},label:{fontSize:M().JB.UISmall.desktop,fontWeight:M().Ue.medium,margin:"24px 8px 6px 8px",color:t.text.secondary},optionMenuItemStyle:{marginTop:6},switcherButton:{marginRight:0},textWrapperStyle:{marginLeft:8}})),[e]),p=(0,s().VK)((()=>Boolean(n.getFormat().external_object_id)),[n]);return e?(0,z.jsxs)(d().Z,{type:m().Z.Y,style:u.container,children:["existing_module"===e.type&&(0,z.jsx)(Kt,{moduleId:e.moduleId}),"new_module"===e.type&&(0,z.jsx)(pe,{})]}):(0,z.jsxs)("div",{style:u.container,children:[(0,z.jsx)("div",{style:u.title,children:(0,z.jsx)(S()._H,{id:"PageLayoutConfigurationSidebar.title",defaultMessage:"Page settings"})}),o&&(0,z.jsx)(Xt,{collectionStore:n,layoutStore:t,styles:u}),r&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Jt,{disabled:p,collectionStore:n,normalizedCollectionFormat:c,styles:u}),(0,z.jsx)(Qt,{disabled:p,collectionStore:n,normalizedCollectionFormat:c,styles:u})]}),(0,z.jsx)("div",{style:u.label,children:(0,z.jsx)(S()._H,{id:"PageLayoutConfigurationSidebar.options",defaultMessage:"Options"})}),l&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(tn,{disabled:p,collectionStore:n,normalizedCollectionFormat:c,styles:u}),(0,z.jsx)(en,{disabled:p,collectionStore:n,normalizedCollectionFormat:c,styles:u})]}),(0,z.jsx)(nn,{layoutStore:t,styles:u})]})}function Xt(e){const{layoutStore:t,styles:n}=e,a=(0,o().O7)(),l=(0,s().VK)((()=>t.isTabbedPageLayout()),[t]),{value:d}=(0,R().XJ)(D.switchFromSimpleToTabbedLayoutActions),{value:c}=(0,R().XJ)(D.switchFromTabbedToSimpleLayoutActions),u=!d||!c,p=l?"tabbed":"simple",m=(0,i.useMemo)((()=>({available:["simple","tabbed"],appearance:{simple:{label:(0,z.jsx)(S()._H,{id:"PageLayoutConfigurationSidebar.structure.simple",defaultMessage:"Simple"}),image:{src:v().Z.images.layouts.configuration.simplePageLayoutStructurePng,width:112,height:80}},tabbed:{label:(0,z.jsx)(S()._H,{id:"PageLayoutConfigurationSidebar.structure.tabbed",defaultMessage:"Tabbed"}),image:{src:v().Z.images.layouts.configuration.tabbedPageLayoutStructurePng,width:112,height:80}}}})),[]),g=(0,i.useCallback)((e=>{d&&c&&("simple"===e?c.switchFromTabbedToSimpleLayout({environment:a,layoutStore:t}):"tabbed"===e?d.switchFromSimpleToTabbedLayout({environment:a,layoutStore:t}):(0,r().t1)(e))}),[t,a,d,c]);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{style:n.label,children:(0,z.jsx)(S()._H,{id:"PageLayoutConfigurationSidebar.structure",defaultMessage:"Structure"})}),(0,z.jsx)(k().Z,{disabled:u,options:m,selectedOption:p,onOptionSelected:g,height:"tall"})]})}function Qt(e){var t;const{disabled:n,collectionStore:s,normalizedCollectionFormat:a,styles:r}=e,l=(0,o().O7)(),d="section_hide"===(null===(t=a.page_section_visibility)||void 0===t?void 0:t.comments)?"section_hide":"section_show",c=(0,i.useMemo)((()=>({available:["section_show","section_hide"],appearance:{section_show:{label:(0,z.jsx)(S()._H,{...P().nL.section_show}),image:{src:v().Z.images.layouts.configuration.pageCommentsExpandedPng,width:112,height:80}},section_hide:{label:(0,z.jsx)(S()._H,{...P().nL.section_hide}),image:{src:v().Z.images.layouts.configuration.pageCommentsOffPng,width:112,height:80}}}})),[]),u=(0,i.useCallback)((e=>{const t=s.getFormat(),n=s.getSchema(),i=(0,b().i)(t,n,void 0,x().j5.Collection);j().W4({environment:l,pageSection:"comments",visibility:e,store:s,format:i})}),[s,l]);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{style:r.label,children:(0,z.jsx)(S()._H,{id:"PageLayoutConfigurationSidebar.pageDiscussions",defaultMessage:"Page discussions"})}),(0,z.jsx)(I().Z,{placement:B().Placement.Bottom,disableTooltip:!n,renderTooltip:()=>(0,z.jsx)(S()._H,{id:"PageLayoutConfigurationSidebar.pageDiscussions.tooltip.pageDiscussionSettingNotAvailable",defaultMessage:"This setting is not available for synced databases"}),render:e=>(0,z.jsx)("div",{...e,children:(0,z.jsx)(k().Z,{disabled:!!n,options:c,selectedOption:d,onOptionSelected:u,height:"tall"})})})]})}function Jt(e){var t;const{disabled:n,collectionStore:s,normalizedCollectionFormat:a,styles:r}=e,l=(0,o().O7)(),d="minimal"===(null===(t=a.page_section_visibility)||void 0===t?void 0:t.margin_comments)?"minimal":"inline",c=(0,i.useMemo)((()=>({available:["inline","minimal"],appearance:{inline:{label:(0,z.jsx)(S()._H,{...P().Wc.inline}),image:{src:v().Z.images.layouts.configuration.inlineDefaultPng,width:112,height:80}},minimal:{label:(0,z.jsx)(S()._H,{...P().Wc.minimal}),image:{src:v().Z.images.layouts.configuration.inlineMinimalPng,width:34,height:24}}}})),[]),u=(0,i.useCallback)((e=>{const t=s.getFormat(),n=s.getSchema(),i=(0,b().i)(t,n,void 0,x().j5.Collection);j().W4({environment:l,pageSection:"margin_comments",visibility:e,store:s,format:i})}),[s,l]);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{style:r.label,children:(0,z.jsx)(S()._H,{id:"PageLayoutConfigurationSidebar.inlineComments",defaultMessage:"Inline comments"})}),(0,z.jsx)(I().Z,{placement:B().Placement.Bottom,disableTooltip:!n,renderTooltip:()=>(0,z.jsx)(S()._H,{id:"PageLayoutConfigurationSidebar.inlineComments.tooltip.inlineCommentSettingNotAvailable",defaultMessage:"This setting is not available for synced databases"}),render:e=>(0,z.jsx)("div",{...e,children:(0,z.jsx)(k().Z,{disabled:!!n,options:c,selectedOption:d,onOptionSelected:u,height:"tall"})})})]})}function en(e){var t;const{disabled:n,collectionStore:s,normalizedCollectionFormat:a,styles:r}=e,l=(0,o().O7)(),d="section_hide"===(null===(t=a.page_section_visibility)||void 0===t?void 0:t.comments)?"section_hide":"section_show",c=(0,i.useCallback)((e=>{const t=s.getFormat(),n=s.getSchema(),i=(0,b().i)(t,n,void 0,x().j5.Collection);j().W4({environment:l,pageSection:"comments",visibility:e,store:s,format:i})}),[s,l]);return(0,z.jsx)(_().ZP,{title:(0,z.jsx)(S()._H,{id:"PageLayoutConfigurationSidebar.pageDiscussions",defaultMessage:"Page discussions"}),onClick:()=>{},style:r.optionMenuItemStyle,right:(0,z.jsx)(A().GY,{disabled:n,currentVisibility:d,onSelect:c}),rightStyle:r.switcherButton,textWrapperStyle:r.textWrapperStyle})}function tn(e){var t;const n=(0,o().O7)(),{disabled:s,collectionStore:a,normalizedCollectionFormat:r,styles:l}=e,d="minimal"===(null===(t=r.page_section_visibility)||void 0===t?void 0:t.margin_comments)?"minimal":"inline",c=(0,i.useCallback)((e=>{const t=a.getFormat(),i=a.getSchema(),o=(0,b().i)(t,i,void 0,x().j5.Collection);j().W4({environment:n,pageSection:"margin_comments",visibility:e,store:a,format:o})}),[a,n]);return(0,z.jsx)(_().ZP,{title:(0,z.jsx)(S()._H,{id:"PageLayoutConfigurationSidebar.inlineComments",defaultMessage:"Inline comments"}),onClick:()=>{},style:l.optionMenuItemStyle,right:(0,z.jsx)(A().k7,{disabled:s,currentVisibility:d,onSelect:c}),rightStyle:l.switcherButton,textWrapperStyle:l.textWrapperStyle})}function nn(e){const{layoutStore:t,styles:n}=e,a=(0,o().O7)(),r=(0,s().VK)((()=>{var e;return"show"===((null===(e=t.getFormat())||void 0===e?void 0:e.property_icons_visibility)??"show")}),[t]),l=(0,i.useCallback)((()=>{w().createAndCommit({environment:a,userAction:"pageLayoutActions.handleShowPropertyIcons",canUndo:!0,perform:e=>{var n;C().FH({stores:[t],update:{property_icons_visibility:"hide"===(null===(n=t.getFormat())||void 0===n?void 0:n.property_icons_visibility)?"show":"hide"},transaction:e})}})}),[t,a]);return(0,z.jsx)(_().ZP,{title:(0,z.jsx)(S()._H,{id:"PageLayoutConfigurationSidebar.showPropertyIcons",defaultMessage:"Show property icons"}),onClick:l,style:n.optionMenuItemStyle,right:(0,z.jsx)(T().Z,{on:r}),rightStyle:n.switcherButton,textWrapperStyle:n.textWrapperStyle})}var on=()=>n(8564),sn=()=>n(583824),an=()=>n(857719),rn=()=>n(947115),ln=()=>n(396136),dn=()=>n(688293);const cn=i.memo((function(e){let{children:t,collectionStore:a,pageStore:r,sessionId:l,layoutBuilderModuleSelectionStore:d}=e;const c=(0,o().O7)(),u=(0,s().VK)((()=>{var e;return null===(e=n(876822).default.state.currentUserStore)||void 0===e?void 0:e.userId}),[]),p=(0,s().VK)((()=>a.getSpaceId()),[a]),m=(0,i.useMemo)((()=>(null==r?void 0:r.id)??(0,n(487270).TS)({environment:c,table:ln().iU,spaceId:p})),[c,null==r?void 0:r.id,p]),g=(0,i.useCallback)((e=>{var t;if(e.operation.pointer.id===m)return!1;if((null===(t=e.operation)||void 0===t||null===(t=t.args)||void 0===t?void 0:t.parent_id)===m)throw new Error("Unexpected operation on temporary page.");return!0}),[m]),f=(0,dn().N)(n(473244).he,{canUndo:!1,shouldPersistOperation:r?void 0:g}),h=(0,s().VK)((()=>{if(r)return r.clone(f.cache);return w().createAndCommit({environment:c,perform(e){const t=n(636340).j4({environment:c,type:"page",id:m,inMemoryRecordCache:f.cache,transaction:e});return w().applyOperation({store:t,operation:n(481529).op.update({pointer:{id:t.pointer.id,table:ln().iU,spaceId:t.pointer.spaceId},path:[],args:{parent_id:a.id,parent_table:a.table}}),transaction:e}),t},userAction:"PageLayoutEditorContext.createEmptyPageStore",canUndo:!1}).performResult}),[a,f.cache,c,r,m]),y=function(e,t){const a=(0,o().O7)(),r=(0,i.useMemo)((()=>new(n(972776).Z)(a)),[a]),l=(0,dn().t)(e,t),d=(0,s().VK)((()=>null==t?void 0:t.getParentBlockStore()),[t]);return(0,i.useEffect)((()=>{r.setContext({type:"collectionPage",collectionViewBlockStore:d,collectionStore:l})}),[r,l,d]),r}(f,a),v=(0,s().VK)((()=>y.collectionStore()),[y]),x=(0,s().VK)((()=>null==v?void 0:v.getLayoutStore()),[v]),b=(0,s().qz)(void 0,n(560801).Z),S=i.useRef(!1);(0,s().VK)((()=>{u&&v&&!x&&(w().createAndCommit({environment:c,perform:e=>_t().m2({environment:c,transaction:e,collectionStore:v,userId:u}),userAction:"PageLayoutEditorContext.initCollectionLayout",canUndo:!1}),S.current=!0)}),[c,v,x,u]);const M=(0,i.useCallback)((async()=>{if(u&&x)return f.persist("PageLayoutEditorContext.updateLayout")}),[f,x,u]),j=(0,i.useCallback)((()=>{f.reset();const e=a.getLayoutStore();return!!e&&(w().createAndCommit({environment:c,perform(t){Tt().Wb({environment:c,transaction:t,layoutStore:e,collectionStore:a})},userAction:"PageLayoutEditorContext.resetLayoutToDefault",canUndo:!1}),!0)}),[a,f,c]),C=(0,s().VK)((()=>d.getState()),[d]),k=(0,i.useCallback)((e=>{d.setState(e)}),[d]),_=(0,s().VK)((()=>h.isReady()&&(null==x?void 0:x.isReady())),[x,h]),[T,I]=(0,i.useState)([]),P=(0,i.useMemo)((()=>new(n(623361).p)),[]),A=ve().default.createValue(!1),R=(0,i.useMemo)((()=>x&&{layoutStore:x,collectionStore:v,currentModuleSelection:C,setModuleSelection:k,sessionId:l,addModuleHoverMenuStore:b,canEditLayout:!0,isPropertyTypeSearchInputDirtyStore:A,layoutBuilderModuleSelectionStore:d}),[x,v,C,k,l,b,A,d]),Z=(0,i.useMemo)((()=>v&&{pageStore:h,hasUnsavedChanges:f.hasChanges,saveChanges:M,moduleIdsMovedFromSidebar:T,setModuleIdsMovedFromSidebar:I,isNewLayout:S.current,resetLayoutToDefault:j,moduleStateByIdStore:P,collectionContextStore:y,collectionStore:v}),[f.hasChanges,T,P,j,M,h,y,v]);return _&&x&&R&&Z?(0,z.jsx)(N().L1,{value:y,children:(0,z.jsx)(G().Dt.Provider,{value:R,children:(0,z.jsxs)(G().eK.Provider,{value:Z,children:[(0,rn().isConsoleEnabled)()&&(0,z.jsx)(un,{}),t]})})}):null}));function un(){return(0,i.useEffect)((()=>()=>{(0,rn().exposeDebugValue)("baseLayoutEditorContext",void 0),(0,rn().exposeDebugValue)("pageLayoutEditorContext",void 0)}),[]),(0,rn().exposeDebugValue)("baseLayoutEditorContext",(0,G().J9)()),(0,rn().exposeDebugValue)("pageLayoutEditorContext",(0,G().PP)()),null}var pn=n.n(n(294184)),mn=()=>n(467171),gn=()=>n(308186),fn=()=>n(943620),hn=()=>n(384241),yn=()=>n(247724),vn=()=>n(518530),xn=()=>n(725751),bn=()=>n(655260),Sn=()=>n(899133),Mn=()=>n(312578),jn=()=>n(838367),Cn=()=>n(231219),wn=()=>n(527278),kn=()=>n(164079),_n=()=>n(766463),Tn=()=>n(15409),In=()=>n(615634);function Pn(e){let{collectionStore:t}=e;const n=(0,i.useRef)(null),[o,a]=i.useState(""),{pageStore:r}=(0,G().PP)(),{results:l,isResultsLoading:d}=(0,_n().s)({type:Sn().n8.BlocksInCollection,source:"layout_builder_page_selector",limit:10,disable:!1,filters:{parentId:t.id},searchQuery:o}),c=(0,s().VK)((()=>d?[{key:"loading",action:()=>{},render:e=>(0,z.jsx)(jn().Z,{...e,title:(0,z.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,z.jsx)(Mn().Z,{})})})}]:0===l.length?[{key:"no_results",action:()=>{},render:e=>(0,z.jsx)(jn().Z,{...e,title:(0,z.jsx)(S()._H,{id:"pageLayoutEditor.pagePicker.noResults",defaultMessage:"No results."})})}]:l.map((e=>{const t=(null==r?void 0:r.id)===e.id;return{key:e.id,render:n=>(0,z.jsx)(Cn().Z,{...n,store:e.store,hidePath:!0,right:t?(0,Tn().e)({width:10}):null}),action:()=>{if(t)return;if(!y().Z.state.isOpen||!y().Z.state.collectionStore)throw new Error("Expected page layout editor to be open.");const n={isOpen:y().Z.state.isOpen,mode:"layout-editor",pageStore:e.store,sessionId:y().Z.state.sessionId,collectionStore:y().Z.state.collectionStore};y().Z.setState(n)}}}))),[null==r?void 0:r.id,d,l]),u=(0,z.jsx)(E().Z,{isInput:!0,style:{paddingBottom:0},desktopTitleStyle:{paddingBottom:0,marginBottom:0},children:(0,z.jsx)(V().ZP,{ref:n,value:o,placeholder:wn().Z.formatMessage(Rn.searchPlaceholder),focusAfterAnimation:!0,showClearButton:!0,style:{marginBottom:10},onChange:e=>{a(e.target.value)},focusInitial:l.length>0||void 0})}),p=(0,z.jsx)(Ze().Z,{menuType:Oe().o.Popup,header:u,width:300,children:(0,z.jsx)(U().Z,{type:U().i.Vertical,style:{marginBottom:0},sections:[{key:"results",items:c,render:e=>(0,z.jsx)(E().Z,{...e})}],initialFocus:l.length>0?0:void 0})});return(0,z.jsx)(Ie().ZP,{popupType:Ie().Z4.Popup,renderOrigin:e=>(0,z.jsx)(An,{...e,pageStore:r}),originGap:2,render:()=>p,onClose:()=>a("")})}function An(e){const{pageStore:t,...n}=e,i=(0,a().yK)((e=>({previewButton:{color:e.text.secondary,fontWeight:M().Ue.medium,display:"flex",gap:6,alignItems:"center",justifyContent:"center",padding:"3px 6px",height:void 0,fontSize:12,overflow:"hidden",maxWidth:"100%"},recordTitle:{...M().Yu,flexGrow:1},previewLabelContainer:{display:"flex",gap:3,minWidth:0},previewLabel:{flexShrink:0},chevronDownIcon:{flexShrink:0,width:10}})),[]);return(0,z.jsx)(I().Z,{placement:B().Placement.Right,renderTooltip:()=>(0,z.jsx)(S()._H,{defaultMessage:"Choose page to preview",id:"PageLayoutEditorHeader.pagePicker.title"}),render:e=>(0,z.jsxs)(Be().Z,{...(0,kn().Z)(e,n),style:i.previewButton,children:[(0,z.jsxs)("div",{style:i.previewLabelContainer,children:[(0,z.jsx)("div",{style:i.previewLabel,children:(0,z.jsx)(S()._H,{defaultMessage:"Preview:",id:"PageLayoutEditorHeader.pagePicker.titlePrefix"})}),(0,z.jsx)(hn().Z,{store:t,style:i.recordTitle})]}),(0,In().i)(i.chevronDownIcon)]})})}const Rn=(0,S().vU)({searchPlaceholder:{id:"pageLayoutEditor.pagePicker.searchPlaceholder",defaultMessage:"Search pages..."}});const Zn=function(){const e=(0,S().YB)(),{setModuleSelection:t,currentModuleSelection:o}=(0,i.useContext)(G().Dt)||{},s=void 0===o,r=(0,a().yK)((e=>({button:{...s&&{background:e.state.hover}},icon:{width:18,height:18}})),[s]);return t?(0,z.jsx)(Be().Z,{"aria-label":e.formatMessage({id:"pageLayoutEditorPageSettingsButton.ariaLabel",defaultMessage:"Page settings"}),icon:n(795941).y,iconStyle:r.icon,onClick:()=>null==t?void 0:t(void 0),style:r.button,isLarge:!0,children:(0,z.jsx)(S()._H,{id:"pageLayoutEditorPageSettingsButton.label",defaultMessage:"Page settings"})}):null},Bn=(0,K().CZ)("arrowUTurnLeft",{default:{loader:()=>n.e(44621).then(n.bind(n,444621))},small:{loader:()=>n.e(42147).then(n.bind(n,42147))},mini:{loader:()=>n.e(28244).then(n.bind(n,822827))},large:{loader:()=>n.e(1168).then(n.bind(n,701168))}});var Dn=()=>n(830581),Ln=()=>n(921981),On=()=>n(542401),Hn=()=>n(181758),Vn=()=>n(817771),Un=()=>n(491174),En=()=>n(104088);const Nn={id:"pageLayoutAreas.page_main",defaultMessage:"main page",description:"Name for the main area of the page"},Fn={id:"pageLayoutAreas.page_details",defaultMessage:"sidebar",description:"Name for the details sidebar"},Kn={id:"pageLayoutAreas.form_layout_schema",defaultMessage:"form",description:"Name for the form area"},zn=(0,S().vU)({page_main:Nn,page_layout_schema:Nn,page_details:Fn,page_info_layout_schema:Fn,form_layout_schema:Kn,form_conditional_modules:Kn,views_main_tab_modules:{id:"pageLayoutAreas.views_main_tab_modules",defaultMessage:"views main tab",description:"Name for the views main tab"},generic:{id:"pageLayoutEditor.generic",defaultMessage:"area"}});function Wn(){const{collectionStore:e,hasUnsavedChanges:t,saveChanges:n,isNewLayout:s,resetLayoutToDefault:r}=(0,G().PP)(),{sessionId:l,layoutStore:d}=(0,G().J9)(),c=(0,o().O7)(),p=(0,S().YB)(),m=(0,a().yK)((e=>({saveButton:{height:32},saveButtonCheckMarkIcon:{width:14,height:14},saveButtonInner:{lineHeight:1.2,fontSize:14,fontWeight:M().Ue.medium},saveButtonRevertItemTitle:{fontSize:M().JB.UIRegular.desktop,lineHeight:"20px",color:e.text.primary},saveButtonRevertItemSubtitle:{fontSize:M().JB.UISmall.desktop,lineHeight:"16px",color:e.text.secondary},saveButtonRevertItemIcon:{width:16,height:16,marginTop:2,fill:e.primaryBlack},saveButtonRevertItem:{margin:"4px",padding:"0 4px 4px"},saveButtonSectionMenuItem:{minWidth:254,padding:0}})),[]),g=(0,i.useCallback)((t=>{_t().gm({environment:c}),bn().tV({environment:c,sessionId:l,collectionId:e.id,existingLayoutId:s?void 0:d.id,layoutSaved:t,context:"layout"})}),[e.id,c,s,d.id,l]),f=(0,i.useCallback)((async()=>{if(t)try{await n(),g(!0)}catch(e){if(!(e instanceof Hn().x7))throw e;{const t=e.clientData;if("cannot_move_unmoveable_module"===(null==t?void 0:t.type))gn().UW(p.formatMessage({id:"layoutBuilder.saveButton.error.moduleCannotBeMoved",defaultMessage:"The {moduleType} module cannot be moved."},{moduleType:p.formatMessage(me().B[t.moduleType]).toLowerCase()}));else if("cannot_remove_undeletable_module"===(null==t?void 0:t.type))gn().UW(p.formatMessage({id:"layoutBuilder.saveButton.error.moduleCannotBeDeleted",defaultMessage:"The {moduleType} module cannot be removed."},{moduleType:p.formatMessage(me().B[t.moduleType]).toLowerCase()}));else{if("unallowed_module_in_area"!==(null==t?void 0:t.type)){const e=p.formatMessage({id:"layoutBuilder.saveButton.error.fallback",defaultMessage:"Something went wrong while saving layout."});return void gn().UW(e)}{const e={moduleType:p.formatMessage(me().B[t.moduleType]).toLowerCase(),area:"page_layout_schema"===t.area?p.formatMessage(zn.page_main):"page_info_layout_schema"===t.area?p.formatMessage(zn.page_details):p.formatMessage(zn.generic)};gn().UW(p.formatMessage({id:"layoutBuilder.saveButton.error.unallowedModuleInArea",defaultMessage:"The {moduleType} module is not allowed in {area}."},e))}}}}else g(!1)}),[g,t,p,n]),h=(0,i.useCallback)((()=>{r(),bn().Kv({environment:c,context:"layout",sessionId:l,collectionId:e.id,layoutId:s?void 0:d.id}),v(!1),g(!0)}),[g,e.id,c,s,d.id,r,l]),[y,v]=i.useState(!1);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Ie().ZP,{popupType:En().k.Popup,alignmentToOrigin:B().Alignment.End,originGap:4,render:e=>(0,z.jsx)(E().Z,{style:m.saveButtonSectionMenuItem,children:(0,z.jsx)(H().Z,{onClick:()=>{v(!0),e.close()},focused:!1,itemMarginLeft:0,itemMarginRight:0,style:m.saveButtonRevertItem,body:(0,z.jsxs)(u().gq,{gap:10,children:[(0,Un().s)(m.saveButtonRevertItemIcon),(0,z.jsxs)(u().Ht,{children:[(0,z.jsx)("div",{style:m.saveButtonRevertItemTitle,children:(0,z.jsx)(S()._H,{id:"pageLayoutEditor.revertToOriginalLayout",defaultMessage:"Reset to original page layout"})}),(0,z.jsx)("div",{children:(0,z.jsx)(S()._H,{id:"pageLayoutEditor.revertToOriginalLayoutSubtitle",defaultMessage:"No properties will be deleted"})})]})]})})}),renderOrigin:e=>(0,z.jsx)(On().Z,{style:m.saveButton,mainButtonStyle:m.saveButtonInner,title:(0,z.jsx)(S()._H,{id:"pageLayoutEditor.saveAndClose",defaultMessage:"Apply to all pages"}),color:"blue",onClick:f,disableDropdown:!1,icon:Vn().A,iconStyle:m.saveButtonCheckMarkIcon,onDropdownClick:e.onClick})}),y&&(0,z.jsx)(Ln().c,{isOpen:!0,showCloseIcon:!0,allowDismissByEscape:!0,onDismiss:()=>v(!1),areaConstraint:{width:{type:"min",length:300}},render:e=>{let{sizeRange:t}=e;return(0,z.jsx)(Dn().sR,{header:(0,z.jsx)(Dn().vI,{iconAndTitle:(0,z.jsx)(Dn().kC,{iconGroup:Bn,title:(0,z.jsx)(S()._H,{id:"pageLayoutEditor.revertToOriginalLayout.modal.title",defaultMessage:"Reset to original page layout?"})}),description:(0,z.jsx)(S()._H,{id:"pageLayoutEditor.revertToOriginalLayout.modal.subtitle",defaultMessage:"No properties will be deleted."})}),footer:(0,z.jsx)(Dn().a6,{layout:"vertical",primaryButtons:[{buttonType:"destructive",label:(0,z.jsx)(S()._H,{id:"pageLayoutEditor.revertToOriginalLayout.modal.revertButton",defaultMessage:"Reset"}),onClick:h}],secondaryButtons:[{buttonType:"dismiss",label:(0,z.jsx)(S()._H,{id:"pageLayoutEditor.revertToOriginalLayout.modal.cancelButton",defaultMessage:"Cancel"})}]}),sizeRange:t})}})]})}function qn(){const e=(0,o().O7)(),{device:t}=e,{isElectron:n,isElectronMac:r}=t,{sessionId:l,layoutStore:d}=(0,G().J9)(),{collectionStore:c,hasUnsavedChanges:p,isNewLayout:m}=(0,G().PP)(),g=(0,s().VK)((()=>!!n&&!xn().default.state.isShowingTabBar),[n]),f=(0,s().VK)((()=>(0,mn().R6)(r)),[r]),h=(0,i.useCallback)((async()=>{bn().tV({environment:e,sessionId:l,collectionId:c.id,existingLayoutId:m?void 0:d.id,layoutSaved:!1,context:"layout"});const t=()=>_t().gm({environment:e});if(!p)return void t();const{accept:n}=await gn().gt({message:(0,z.jsx)(S()._H,{id:"pageLayoutEditor.closeConfirmModal.content",defaultMessage:"Discard all layout changes?"}),acceptLabel:(0,z.jsx)(S()._H,{id:"pageLayoutEditor.closeConfirmModal.discard",defaultMessage:"Discard"})});n&&t()}),[e,l,c.id,p,d.id,m]),y=(0,a().yK)((e=>{const t={pointerEvents:"auto"};return{header:{zIndex:1},headerContent:{display:"flex",position:"relative",margin:"8px 16px 8px 16px"},topbarPlaceholder:{minHeight:f,background:e.onboardingPreviewBackground,borderBottom:`1px solid ${e.stroke.primary}`},sideButtonsContainer:{display:"flex",justifyContent:"space-between",width:"100%",height:"100%",gap:"6px",position:"absolute",left:0,top:0,pointerEvents:"none"},rightButtons:{...t},pageSettingsButtonContainer:{display:"flex",...t},subtitle:{fontSize:M().JB.UISmall.desktop,fontWeight:M().Ue.regular,color:e.text.secondary,alignSelf:"center"},titlePreviewContainer:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",flexGrow:1,position:"relative",...M().Yu},titlePreviewElementContainer:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",maxWidth:400,overflow:"hidden"}}}),[f]);return(0,z.jsxs)("header",{style:y.header,children:[g?(0,z.jsx)("div",{style:y.topbarPlaceholder,className:pn()({[yn().lIT]:!0,[yn().pMC]:!0})}):null,(0,z.jsxs)("div",{style:y.headerContent,children:[(0,z.jsx)("div",{style:y.titlePreviewContainer,children:(0,z.jsxs)("div",{style:y.titlePreviewElementContainer,children:[(0,z.jsx)(Gn,{collectionStore:c}),(0,z.jsx)(Pn,{collectionStore:c})]})}),(0,z.jsxs)(u().gq,{style:y.sideButtonsContainer,alignItems:"center",justifyContent:"space-between",children:[(0,z.jsx)("div",{style:y.pageSettingsButtonContainer,children:(0,z.jsx)(Zn,{})}),(0,z.jsxs)(u().gq,{gap:8,alignItems:"center",style:y.rightButtons,children:[(0,z.jsx)(Be().Z,{onClick:h,icon:vn().U,isLarge:!0,children:(0,z.jsx)(S()._H,{id:"pageLayoutEditor.close",defaultMessage:"Cancel"})}),(0,z.jsx)(Wn,{})]})]})]})]})}function Gn(e){let{collectionStore:t}=e;const n=(0,a().yK)((e=>({container:{display:"flex",alignItems:"center",justifyContent:"center",gap:4,color:e.text.primary,fontWeight:M().Ue.medium,width:"100%",...M().Yu}})),[]),i=(0,s().VK)((()=>t.getIcon()),[t]);return(0,z.jsxs)("div",{style:n.container,children:[(0,z.jsx)(fn().Z,{icon:i,size:20,isEmptyPage:!1,disabled:!0}),(0,z.jsx)(hn().Z,{store:t})]})}function Yn(e){const t=(0,a().yK)((e=>({container:{width:"100%",backgroundColor:e.surface.wash,cursor:"default"},innerContainer:{overflowY:"auto",padding:"20px 0 0 24px",height:"100%",marginTop:-20,minWidth:f().DJ,zIndex:0,position:"relative"}})),[]),n=(0,s().VK)((()=>y().Z.getState()),[]),o=n.isOpen&&"layout-editor"===n.mode?n.initialSelectedModuleId:void 0,r=(0,s().qz)(e.layoutBuilderModuleSelectionStore,h().Z),d=n.isOpen&&"layout-editor"===n.mode;return(0,i.useEffect)((()=>{d&&r.setState(o?{type:"existing_module",moduleId:o,isDragging:!1}:void 0)}),[o,d,r]),n.isOpen&&"layout-editor"===n.mode?(0,z.jsxs)(cn,{...n,layoutBuilderModuleSelectionStore:r,children:[e.debugChildForTestsOnly,(0,z.jsxs)(l().Z,{tag:u().Ht,initial:{translateY:5,opacity:0},animate:{translateY:0,opacity:1},config:{duration:650,timingFunction:"ease-in-out"},style:t.container,children:[(0,z.jsx)(qn,{}),(0,z.jsxs)(u().gq,{style:t.innerContainer,children:[(0,z.jsx)($n,{}),(0,z.jsx)($t,{})]})]})]}):null}function $n(){const{pageStore:e}=(0,G().PP)(),{setModuleSelection:t,layoutBuilderModuleSelectionStore:n}=(0,G().J9)(),i=(0,o().O7)(),l=(0,s().VK)((()=>{var e;return Boolean(null===(e=n.state)||void 0===e?void 0:e.isDragging)}),[n]),u=(0,s().VK)((()=>{const t=(0,f().f8)(i);switch(t){case"xSmall":case"small":return"layout-editor-narrow";case"medium":case"large":case"xLarge":return e.getFormat().page_full_width?"layout-editor-wide":"layout-editor";default:(0,r().t1)(t)}}),[i,e]),h=(0,s().VK)((()=>(0,g().h)(i).totalWidth),[i]),y=(0,s().VK)((()=>e.hasCover()),[e]),v=(0,a().yK)((e=>({container:{height:"100%",background:e.contentBackground,flexGrow:3,borderRadius:"12px 12px 0 0",boxShadow:"0px 9px 12px 0px rgba(15, 15, 15, 0.1)",borderColor:e.accentColors.gray[75],borderWidth:1,overflowY:"auto",display:"flex",...l?{cursor:"grabbing"}:{}},mainPage:{flex:3,paddingTop:y?void 0:24},sidebarScroller:{borderLeft:`solid 1px ${e.outlineBlueButtonPressedBackground}`,height:"100%"},mainPageContainer:{flex:1,height:"100%"},mainPageScrollContainer:{height:"100%"},sidebar:{padding:g().i,marginBottom:100,flex:1,minWidth:h,maxWidth:h,width:h,transition:"width 0.1s, min-width 0.1s, max-width 0.1s"}})),[l,y,h]);return(0,z.jsxs)("div",{role:"presentation",style:v.container,onClick:e=>{(0,p().ZP)({event:e,context:p().Af.EditorClick,callback:()=>{t(void 0)}})},children:[(0,z.jsx)(sn().E,{area:"page_main",style:v.mainPageContainer,children:(0,z.jsx)(c().F,{children:(0,z.jsx)(d().Z,{type:m().Z.Y,style:v.mainPageScrollContainer,children:(0,z.jsx)("div",{style:v.mainPage,children:(0,z.jsx)(an().Xg,{type:u,children:(0,z.jsx)(on().v,{area:"page_main"})})})})})}),(0,z.jsx)(sn().E,{area:"page_details",children:(0,z.jsx)(d().Z,{type:m().Z.Y,style:v.sidebarScroller,children:(0,z.jsx)("div",{style:v.sidebar,children:(0,z.jsx)(on().v,{area:"page_details"})})})})]})}},533622:(e,t,n)=>{n.r(t),n.d(t,{ConfigureViewsMainModuleAddNewViewButtonWrapper:()=>W});n(267602),n(653476),n(241792);var i=n(667294),o=()=>n(492788),s=()=>n(219727),a=()=>n(142735),r=()=>n(846550),l=()=>n(263184),d=()=>n(226413),c=()=>n(766933),u=()=>n(752778),p=()=>n(788860),m=()=>n(696459),g=()=>n(139224),f=()=>n(932753),h=()=>n(827973),y=()=>n(448419),v=()=>n(198829),x=()=>n(255577),b=()=>n(388284),S=()=>n(654133),M=()=>n(352230),j=()=>n(466970),C=()=>n(676232),w=()=>n(998901),k=()=>n(104088),_=(n(821057),()=>n(956057)),T=()=>n(792197),I=()=>n(308240),P=()=>n(215134),A=()=>n(396136),R=()=>n(139978),Z=()=>n(543172),B=()=>n(636340),D=()=>n(269299),L=()=>n(487270),O=()=>n(527278),H=()=>n(826955),V=()=>n(99537),U=()=>n(455962);function E(e){var t,n;const{environment:i,layoutStore:o,relationPropertySchema:s}=e,a=null===(t=o.getModel())||void 0===t?void 0:t.firstRawModuleOfType("editor"),r=null===(n=o.getModel())||void 0===n?void 0:n.firstRawModuleOfType("viewsMain");if(!a&&!r)throw new Error("Invalid state: no editor or viewsMain module");const{performResult:l}=D().createAndCommit({environment:i,canUndo:!0,perform:e=>{const{inMemoryRecordCache:t}=o;let n,l=r;if(l){var d;if("viewsMain"!==(null===(d=l)||void 0===d?void 0:d.type))throw new Error("Invalid state: editor or viewsMain module is not of the expected type");n=H().G.createChildStore(o,l.collection_view_block_pointer)}else{const t=(0,Z().ZP)(),{collectionViewBlockStore:s}=(0,U().O)({environment:i,layoutStore:o,transaction:e});n=s,l={id:t,type:"viewsMain",collection_view_block_pointer:{...n.pointer,spaceId:n.getSpaceId()}};const r=(0,P().B1)(o.getModules(),(e=>"editor"===e.type));if(!r||!a||"form_conditional_modules"===r.area)throw new Error("Invalid state: no editor module");if("views_main_tab_modules"===r.area)throw new Error("Cannot add views main module when editor is already in views main module");D().applyOperation({store:o,transaction:e,operation:T().CI.deleteModuleInArea({pointer:o.pointer,area:I().mt[r.area],moduleId:a.id})}),(0,V().sW)({position:{type:"absolute",area:r.area,index:r.index},module:l,layoutStore:o,transaction:e,environment:i,sessionId:(0,_().Il)(),isPropertyCreation:!1})}if(!l)throw new Error("Invalid state: no views main module");const c=(0,L().$x)({environment:i,table:R().np,spaceId:n.getSpaceId()}).id,u={id:c,type:"table",parent_id:n.pointer.id,parent_table:A().iU,space_id:n.getSpaceId(),alive:!0,name:s?s.name:O().Z.formatMessage(N.view),format:{hide_linked_collection_name:!0,...null!=s&&s.property?{collection_pointer:s.collection_pointer,property_filters:[{id:_().Il(),filter:{property:s.property,filter:{operator:"relation_contains",value:{type:"relative",value:{type:"current_page_in_related_collection"}}}}}]}:{},subitem_display_mode:null!=s&&s.property?"disabled":void 0}};return D().applyOperation({store:n,operation:{pointer:n.pointer,path:["view_ids"],command:"listAfter",args:{id:c}},transaction:e}),B().ae({environment:i,table:R().np,value:u,inMemoryRecordCache:t,transaction:e}),{viewsMainModule:l,collectionViewBlockPointer:n.pointer,collectionViewPointer:{id:c,table:R().np,spaceId:n.getSpaceId()}}},userAction:"viewsModuleActions.addViewToViewsMainModule"});if(!l)throw new Error("Transaction to add collection view to views main module failed");return{viewsMainModule:l.viewsMainModule,collectionViewPointer:l.collectionViewPointer,collectionViewBlockPointer:l.collectionViewBlockPointer}}const N=(0,p().vU)({view:{defaultMessage:"View",id:"pageLayout.viewsModuleActions.defaultViewName"}});var F=()=>n(95294),K=()=>n(162178),z=n(785893);function W(e){let{renderOrigin:t,onClose:n}=e;const[o,r]=(0,i.useState)(!1),l=(0,i.useRef)(null),c=(0,i.useContext)(K().eK),p=null==c?void 0:c.moduleStateByIdStore,h=null==c?void 0:c.collectionContextStore,[v,x]=(0,i.useState)(!1),b=(0,s().O7)(),{layoutStore:S}=(0,K().J9)(),M=(0,i.useCallback)(((e,t)=>{var n;const i=t?null==p||null===(n=p.get(t))||void 0===n?void 0:n.collectionContextStore:void 0;i&&(f().f8({environment:b,collectionContextStore:i,collectionViewId:e.id,isFullScreen:!1,isRootChild:!1,isInPeekRenderer:!1}),g().r$({collectionContextStore:i,collectionSettingsStore:i.settingsStore,closeOnEscape:!1}))}),[b,p]),j=(0,a().VK)((()=>{var e;const t=null===(e=S.getParentStore())||void 0===e?void 0:e.getModel();if((null==t?void 0:t.table)===u().vF)return t}),[S]),C=(0,a().VK)((()=>{const e=null==j?void 0:j.getNormalizedSchema();return Object.entries(e??{}).filter((e=>{let[t,n]=e;return(0,m().$K)(n)&&(0,d().p_)(n)&&n.property}))}),[j]),_=(0,i.useCallback)((()=>{r(!1),null==n||n()}),[n]),T=(0,i.useCallback)((()=>{r(!0)}),[r]),I=(0,i.useCallback)((()=>(0,z.jsx)(q,{setIsOpen:r,onClose:n,relations:C,setCurrentViewPointer:M,collectionModel:j,setIsRelationPopupOpen:x})),[C,j,M,n,x]),P=(0,i.useCallback)((e=>t(e)),[t]);return h&&j?(0,z.jsxs)("div",{ref:l,children:[(0,z.jsx)(y().ZP,{alignmentToOrigin:w().Alignment.Center,popupType:k().k.Popup,onClose:_,onClick:T,open:o,render:I,renderOrigin:P,disablePopup:!0}),(0,z.jsx)(G,{currentCollectionId:j.id,buttonRef:l,isRelationPopupOpen:v,setIsRelationPopupOpen:x,collectionContextStore:h,setCurrentViewPointer:M,onClose:n})]}):null}function q(e){let{setIsOpen:t,onClose:n,relations:a,setCurrentViewPointer:l,collectionModel:d,setIsRelationPopupOpen:u}=e;const{layoutStore:m,setModuleSelection:g}=(0,K().J9)(),f=(0,s().O7)(),y=(0,r().Fg)(),k=(0,j().E)("layout_view_module_next"),_=(0,r().yK)((e=>({icon:{width:16,height:16}})),[]),T=(0,i.useMemo)((()=>{if(0!==a.length)return{key:0,items:[],render:e=>(0,z.jsx)(b().Z,{...e,title:(0,z.jsx)(p()._H,{...Y.relatedToDatabase,values:{database:null==d?void 0:d.getName()}}),children:a.map((e=>{let[t,i]=e;return(0,z.jsx)(h().Z,{title:null==i?void 0:i.name,icon:(0,z.jsx)(c().ZP,{size:16,theme:y,icon:null==i?void 0:i.icon,type:"relation"}),focused:!1,onClick:()=>{const{viewsMainModule:e,collectionViewPointer:t}=E({environment:f,layoutStore:m,relationPropertySchema:i});e&&g({type:"existing_module",moduleId:e.id,isDragging:!1}),t&&o().default.afterNextFlush((()=>{l(t,null==e?void 0:e.id),null==n||n()}))}},t)}))})}}),[d,f,m,n,a,l,g,y]),I=(0,i.useMemo)((()=>{const e=a.length>0;return{key:1,items:[],render:t=>(0,z.jsx)(b().Z,{...t,topBorder:e,children:(0,z.jsx)(S().Z,{renderTooltip:()=>(0,z.jsx)("div",{style:{maxWidth:300,width:"max-content",overflowWrap:"break-word",textWrap:"wrap"},children:(0,z.jsx)(p()._H,{...Y.linkAnExistingDatabaseTooltip})}),placement:w().Placement.Bottom,render:e=>(0,z.jsx)(h().Z,{title:(0,z.jsx)(p()._H,{...Y.linkAnExistingDatabase}),onClick:()=>{u(!0)},focused:!1,...e},"link_existing_database")})})}}),[a.length,u]),P=(0,i.useMemo)((()=>{if(k)return{key:2,items:[],render:e=>(0,z.jsx)(b().Z,{...e,topBorder:!0,children:(0,z.jsx)(h().Z,{...e,focused:!1,title:(0,z.jsx)(p()._H,{...Y.newView}),icon:(0,C().t)(_.icon),onClick:()=>{const{viewsMainModule:e,collectionViewPointer:t}=E({environment:f,layoutStore:m});e&&g({type:"existing_module",moduleId:e.id,isDragging:!1}),t&&o().default.afterNextFlush((()=>{l(t,null==e?void 0:e.id),null==n||n()}))}})})}}),[k,_.icon,f,m,g,l,n]);return(0,z.jsx)(v().Z,{menuType:M().o.Popup,onClick:()=>t(!1),width:270,paddingBottom:2,children:(0,z.jsx)(x().Z,{initialFocus:void 0,sections:[T,I,P].filter((e=>void 0!==e)),type:x().i.Vertical})})}function G(e){let{currentCollectionId:t,buttonRef:n,isRelationPopupOpen:a,setIsRelationPopupOpen:r,setCurrentViewPointer:c,onClose:p,collectionContextStore:m}=e;const g=(0,s().O7)(),{layoutStore:f,setModuleSelection:h}=(0,K().J9)(),y=(0,i.useMemo)((()=>l().default.createValue({open:!1,stack:[]},{name:"newRelationMenuCollectionSettingsStore"})),[]);return a?(0,z.jsx)(F().b,{originRef:n,propertyType:"relation",settingsViewToOpen:{type:"selectRelationSource",property:void 0,formatKey:void 0,enforceTwoWayRelation:"ifNotSelf"},open:a,isPropertyEditComplete:e=>Boolean((0,d().p_)(e)&&e.collection_id),onPropertyEditComplete:e=>{var t;const n=null===(t=f.getParentStore())||void 0===t?void 0:t.getModel();if((null==n?void 0:n.table)!==u().vF)return;const i=null==n?void 0:n.getNormalizedSchema()[e];if(!i||!(0,d().p_)(i))return;r(!1),y.setState({stack:[],open:!1});const{viewsMainModule:s,collectionViewPointer:a}=E({environment:g,layoutStore:f,relationPropertySchema:i});s&&h({type:"existing_module",moduleId:s.id,isDragging:!1}),a&&o().default.afterNextFlush((()=>{c(a,null==s?void 0:s.id),null==p||p()}))},onDismiss:()=>{r(!1),y.setState({stack:[],open:!1})},rollbackIfEditIncomplete:!0,collectionContextStore:m,collectionSettingsStore:y}):null}const Y=(0,p().vU)({relatedToDatabase:{defaultMessage:"Related to {database}",id:"pageLayout.configureViews.relatedToDatabase"},linkAnExistingDatabase:{defaultMessage:"Link an existing database",id:"pageLayout.configureViews.linkAnExistingDatabase"},linkAnExistingDatabaseTooltip:{defaultMessage:"Create a view representing a new relation property. Must be a two-way relation if linking to a different database.",id:"pageLayout.configureViews.linkAnExistingDatabaseTooltip"},newView:{defaultMessage:"New view",id:"database.viewSettings.createViewTab.newView"},newRelation:{defaultMessage:"New relation",id:"pageLayout.configureViews.newRelation"},back:{defaultMessage:"Back",id:"collectionsSettingsMenu.back"}})},274707:(e,t,n)=>{n.d(t,{Z4:()=>a,yP:()=>s});var i=()=>n(677559);const o={TopbarLayoutInfoButtonEducationTooltip:new(i().Ss)("TopbarLayoutInfoButtonEducationTooltip",(()=>Promise.all([n.e(62743),n.e(36815)]).then(n.bind(n,811418)))),BuilderAddModuleButtonEducationTooltip:new(i().Ss)("BuilderAddModuleButtonEducationTooltip",(()=>n.e(41103).then(n.bind(n,737690))))},s=(0,i().kF)(o.TopbarLayoutInfoButtonEducationTooltip,(e=>e.default),{renderLoading:(e,t)=>t.children}),a=(0,i().kF)(o.BuilderAddModuleButtonEducationTooltip,(e=>e.default))},8564:(e,t,n)=>{n.d(t,{v:()=>z});n(821057),n(241792);var i=n(667294),o=()=>n(219727),s=()=>n(142735),a=()=>n(846550),r=()=>n(66006),l=()=>n(766537),d=()=>n(628370),c=()=>n(119891),u=()=>n(796408),p=()=>n(275200),m=()=>n(280977),g=()=>n(99537),f=()=>n(294630),h=()=>n(602801),y=()=>n(896641),v=(n(492176),n(7961),n(267602),n(653476),()=>n(210349)),x=()=>n(788860),b=()=>n(1910),S=()=>n(654133),M=()=>n(247724),j=()=>n(466970),C=()=>n(135515),w=()=>n(75433),k=()=>n(998901),_=()=>n(243144),T=()=>n(274860),I=()=>n(162178),P=n(785893);const A=(0,x().vU)({formLayoutAddModule:{id:"addModuleHoverMenu.formLayout.add",defaultMessage:"Add question"},pageLayoutAddModule:{id:"addModuleHoverMenu.pageLayout.add",defaultMessage:"Add"}}),R=32;function Z(e){if("views_main_tab_modules"===e.area)throw new Error("[ViewsMain Not Implemented] AddModuleHoverMenu not implemented for views_main_tab_modules");const t=(0,x().YB)(),{layoutStore:n,addModuleHoverMenuStore:i,currentModuleSelection:o}=(0,I().J9)(),r=(0,s().VK)((()=>{if(i.state.isOpen)return i.state.moduleId}),[i]),l=(0,s().VK)((()=>{if(!r)return;const e=w().Z.findModuleContainer({layoutStore:n,moduleId:r});return e?e.getNode():void 0}),[r,n]),c=(0,s().VK)((()=>{if(!o||"new_module"===o.type)return!1;const e=n.getModuleById(o.moduleId);return"placeholder"===(null==e?void 0:e.type)}),[o,n]),u=(0,j().E)("layout_view_module"),p=(0,j().E)("layout_view_module_next"),m=(0,s().VK)((()=>{var t;if("views_main_tab_modules"===e.area)throw new Error("[ViewsMain Not Implemented] AddModuleHoverMenu not implemented for views_main_tab_modules");if("form_conditional_modules"===e.area)return!1;const o=n.getModules()[e.area].filter((e=>(0,v().s)(e,{isLayoutViewModuleEnabled:u,isLayoutViewModuleNextEnabled:p}))),s=0===o.length||(null===(t=o.at(-1))||void 0===t?void 0:t.id)===r;return i.state.isOpen&&!c&&!s}),[i,r,c,u,p,n,e.area]),g=(0,T().G)({area:e.area,afterModuleId:r}),f=(0,_().F)(),h=(0,a().yK)((e=>({bigRoundButton:{...f.button,width:R,height:R,borderTopLeftRadius:"100%",borderTopRightRadius:"100%",borderBottomLeftRadius:"100%",transform:"rotate(-45deg)"},bigRoundButtonHovered:{...f.buttonHovered},bigRoundButtonPressed:{...f.buttonPressed}})),[f]),y="form"===(0,s().VK)((()=>{var e;return null===(e=n.getModel())||void 0===e?void 0:e.getLayoutType()}),[n])?t.formatMessage(A.formLayoutAddModule):t.formatMessage(A.pageLayoutAddModule),Z=l?l.offsetLeft-40:void 0,B=l?l.offsetTop+l.offsetHeight-4:void 0;return(0,P.jsx)(d().Z,{visible:m,animate:{opacity:1,scale:1,transformOrigin:"center right"},initial:{opacity:0,scale:.3,transformOrigin:"center right"},exit:{opacity:0,scale:.3,transformOrigin:"center right"},style:{position:"absolute",left:Z,top:B},children:(0,P.jsx)(S().Z,{placement:k().Placement.Left,renderTooltip:()=>y,render:e=>(0,P.jsx)(b().Z,{...e,style:h.bigRoundButton,hoveredStyle:h.bigRoundButtonHovered,className:M().AWi,pressedStyle:h.bigRoundButtonPressed,onClick:g,icon:C().A,iconStyle:{width:16,height:16,transform:"rotate(45deg)"},isBlue:!0,ariaLabel:y})})})}var B=()=>n(251932),D=()=>n(42392),L=()=>n(857719);const O=(0,x().vU)({addPageModule:{id:"pageLayout.builder.addModuleToPage.button.ariaLabel",defaultMessage:"Add page module"},addQuestionModuleTooltip:{id:"pageLayout.builder.addModuleToPage.button.addQuestionModuleTooltip",defaultMessage:"Add question"},addModuleToPanelButton:{id:"pageLayout.builder.addModuleToPanel.button.label",defaultMessage:"Add to panel"}}),H=i.forwardRef((function(e,t){const{area:i}=e,{layoutStore:o}=(0,I().J9)(),r=(0,s().VK)((()=>o.getLayoutType()),[o]),l=(0,x().YB)(),d=(0,_().F)(),c=(0,a().yK)((e=>({bigRoundButton:{...d.button,width:32,height:32,borderRadius:"100%"},bigRoundButtonHovered:{...d.buttonHovered},bigRoundButtonPressed:{...d.buttonPressed},emptyModuleAreaAddButton:{cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",padding:"8px 16px 8px 12px",fontSize:14,lineHeight:"20px",fontWeight:500,background:"light"===e.mode?e.accentColors.uiBlue[100]:e.accentColors.uiBlue[200],color:e.accentColors.uiBlue[600],borderRadius:28,transition:"background 0.2s"},emptyModuleAreaAddButtonHover:{...d.buttonHovered},emptyModuleAreaAddButtonPressed:{...d.buttonPressed}})),[d]),u=(0,T().G)("views_main_tab_modules"===i?{area:i,viewsMainTabId:e.viewsMainTabId}:{area:i});if("form_conditional_modules"===i)throw new Error("[Forms Conditional Logic Not Implemented] AddPageLayoutModuleButton not implemented for form_conditional_modules yet.");const p=(0,s().VK)((()=>{var t;const n=o.getModules();return("views_main_tab_modules"===i?(null===(t=n[i])||void 0===t?void 0:t[e.viewsMainTabId])||[]:n[i]).length>0}),[o,i,e.viewsMainTabId]);return"page_details"!==i||p?(0,P.jsx)(S().Z,{renderTooltip:()=>l.formatMessage(O.addQuestionModuleTooltip),disableTooltip:"form"!==r,placement:k().Placement.Bottom,render:e=>(0,P.jsx)(b().Z,{style:c.bigRoundButton,hoveredStyle:c.bigRoundButtonHovered,pressedStyle:c.bigRoundButtonPressed,onClick:u,icon:C().A,iconStyle:{width:16,height:16},isBlue:!0,className:M().AWi,ariaLabel:l.formatMessage(O.addPageModule),ref:t,...e})}):(0,P.jsxs)(n(745740).Z,{style:c.emptyModuleAreaAddButton,onClick:u,hoveredStyle:c.emptyModuleAreaAddButtonHover,pressedStyle:c.emptyModuleAreaAddButtonPressed,ref:t,children:[(0,n(419273).f)({width:12,marginRight:4}),(0,P.jsx)(x()._H,{...O.addModuleToPanelButton})]})})),V=i.memo((function(e){var t;const{shouldShowTooltip:o}=(0,n(946650).w)(),{area:a}=e,r=o&&"page_main"===a,l=o&&"form_layout_schema"!==a,d=i.useRef(null),{currentModuleSelection:c,layoutStore:u,setModuleSelection:p,isPropertyTypeSearchInputDirtyStore:m}=(0,I().J9)(),g=(0,s().VK)((()=>"existing_module"===(null==c?void 0:c.type)?u.getModuleById(c.moduleId):void 0),[c,u]),f=(0,s().VK)((()=>{var t;if("form_conditional_modules"===a)throw new Error("[Forms Conditional Logic Not Implemented] AddPageLayoutModuleButton not implemented for form_conditional_modules yet.");const n=u.getModules();return("views_main_tab_modules"===a?(null===(t=n[a])||void 0===t?void 0:t[e.viewsMainTabId])||[]:n[a]).length>0}),[u,a,e.viewsMainTabId]),[h,y]=i.useState(!1),v=i.useCallback((()=>{m.state||p(void 0)}),[m,p]);return"new_module"===(null==c?void 0:c.type)&&c.area===e.area?(0,P.jsx)(n(94967).Z,{onUndo:v,capture:!0,priority:1,debugName:"AddPageLayoutModuleButton",children:(0,P.jsx)(U,{})}):"placeholder"===(null==g?void 0:g.type)?null:r||l?(0,P.jsxs)(B().gq,{justifyContent:"center",style:null===(x=e.styles)||void 0===x?void 0:x.buttonContainer,className:L().Vc,children:[(0,P.jsx)(D().p,{shape:"page_main"===e.area?"circle":"pill",size:"page_main"===e.area||f?32:34,onDependencyLoaded:()=>y(!0),children:(0,P.jsx)(H,{isEducationCalloutVisible:r,...e,ref:d})}),r&&h&&(0,P.jsx)(n(274707).Z4,{buttonRef:d})]}):(0,P.jsx)(B().gq,{justifyContent:"center",style:null===(t=e.styles)||void 0===t?void 0:t.buttonContainer,className:L().Vc,children:(0,P.jsx)(H,{isEducationCalloutVisible:!1,ref:d,...e})});var x}));function U(){const e=(0,a().yK)((e=>({ghostPageModuleContainer:{paddingBottom:12},ghostPageModule:{width:"100%",height:160,background:e.accentColors.uiBlue[75],borderRadius:12,boxShadow:`0px 0px 0px 0px ${e.stroke.uiBlueSecondary}, inset 0px 0px 0px 1px ${e.stroke.uiBlueSecondary}`}})),[]);return(0,P.jsx)("div",{style:e.ghostPageModuleContainer,className:L().Vc,children:(0,P.jsx)(D().p,{shape:"square",borderRadius:e.ghostPageModule.borderRadius,width:e.ghostPageModule.width,height:e.ghostPageModule.height,children:(0,P.jsx)("div",{style:e.ghostPageModule})})})}var E=()=>n(513670);const N=12;function F(){const{addModuleHoverMenuStore:e}=(0,I().J9)(),t=(0,h().j)(),n=(0,i.useCallback)((n=>{const i=w().Z.getMembersByDOMOrder({filter:e=>"cover"!==e.moduleType&&"form_conditional_modules"!==e.area});let o=null;for(const e of i){const i=e.getNode();if(!i)continue;const s=i.getBoundingClientRect();if(n.clientX>s.right||n.clientX<s.left&&s.left-n.clientX>300)continue;if(n.clientY<=s.bottom&&s.bottom-n.clientY<N||n.clientY>s.bottom&&n.clientY-s.bottom<N+t){o=e;break}}if(o)e.setState({isOpen:!0,moduleId:o.moduleId,menuIsOpen:!1});else{const t=e.getState();t.isOpen&&!t.menuIsOpen&&e.setState({isOpen:!1})}}),[e,t]),o=E().P2(n,30);return(0,i.useEffect)((()=>(window.addEventListener("mousemove",o),()=>{window.removeEventListener("mousemove",o)})),[o]),null}var K=()=>n(761651);function z(e){const{area:t}=e;if("form_conditional_modules"===t)throw new Error("[Forms Conditional Logic] Can't render builder layout modules for nested form_conditional_modules directly.");const n=(0,o().O7)(),{sessionId:v,layoutStore:x,currentModuleSelection:b,setModuleSelection:S,canEditLayout:M,layoutBuilderModuleSelectionStore:j}=(0,I().J9)(),C=(0,i.useRef)(null),w=(0,y().L)({layoutStore:x,pageStoreId:void 0}),k=(0,s().VK)((()=>x.isTabbedPageLayout()),[x]),_=(0,h().j)(),{nonMoveableHeaderModules:T,moveableModules:A,nonMoveableFooterModules:R}=(0,s().VK)((()=>{var n;const i="views_main_tab_modules"===t?(null===(n=w[t])||void 0===n?void 0:n[null==e?void 0:e.viewsMainTabId])||[]:w[t];return(0,l().Lk)(t,i)}),[t,w,null==e?void 0:e.viewsMainTabId]),B=(0,s().VK)((()=>{const e=j.state;if(null!=e&&e.isDragging){const n=e.draggingModuleInitialArea,i=e.draggingModuleFinalArea;return{isDraggingIntoThisArea:n.area!==t&&i.area===t,isDraggingFromThisAreaToOtherArea:n.area===t&&i.area!==t,isDraggingAnyModuleList:!0,dragArea:i}}return{isDraggingIntoThisArea:!1,isDraggingFromThisAreaToOtherArea:!1,isDraggingAnyModuleList:!1,dragArea:void 0}}),[t,j]),D=A.map((e=>"form_layout_schema"===t?{key:e.id,draggable:"placeholder"!==e.type}:{key:e.id,draggable:!0})),O=(0,i.useMemo)((()=>new(m().Z)),[]),H=(0,s().VK)((()=>O.state.isDragging),[O]),U=(0,s().VK)((()=>{var e;return null===(e=x.getModel())||void 0===e?void 0:e.getLayoutType()}),[x]);(0,i.useEffect)((()=>{C.current&&B.isDraggingIntoThisArea&&(0,p().n5)({element:C.current,additionalPadding:{top:200,bottom:200}})}),[B.isDraggingIntoThisArea]);const E=(0,i.useCallback)((n=>{const i="views_main_tab_modules"===t?{area:"views_main_tab_modules",viewsMainTabId:e.viewsMainTabId}:{area:t};S({type:"existing_module",moduleId:n,isDragging:!0,draggingModuleInitialArea:i,draggingModuleFinalArea:i})}),[t,e.viewsMainTabId,S]),N=(0,i.useCallback)((e=>{e&&S({type:"existing_module",moduleId:e,isDragging:!1})}),[S]),z=(0,i.useCallback)((()=>{const e=j.state,t=x.getLayoutType();t&&(0,r().K)(t)?S(void 0):null!=e&&e.isDragging&&j.setState({...e,isDragging:!1,draggingModuleInitialArea:void 0,draggingModuleFinalArea:void 0})}),[j,S,x]),W=(0,i.useCallback)((e=>{const i=j.state,o=null!=i&&i.isDragging?i.draggingModuleFinalArea:void 0;"form_conditional_modules"!==(null==o?void 0:o.area)&&(null!=e&&e.key&&o&&o.area!==t&&((0,g().ST)({environment:n,position:{type:"area_relative",location:"end_moveable",..."views_main_tab_modules"===o.area?{area:o.area,viewId:o.viewsMainTabId}:{area:o.area}},moduleId:e.key,layoutStore:x,sessionId:v}),(0,f().O)({moduleId:e.key,layoutStore:x})),z())}),[j,t,z,n,x,v]),q=(0,i.useCallback)((i=>{let{key:o,endPosition:s,startPosition:a}=i;if(B.isDraggingFromThisAreaToOtherArea)return;const r=T.length,l="views_main_tab_modules"===t?{area:"views_main_tab_modules",viewId:e.viewsMainTabId}:{area:t};(0,g().ST)({environment:n,layoutStore:x,position:{type:"absolute",index:r+s,...l},moduleId:o,sessionId:v}),(0,f().O)({moduleId:o,layoutStore:x})}),[B.isDraggingFromThisAreaToOtherArea,T.length,t,e.viewsMainTabId,n,x,v]),G=(0,a().yK)((e=>({draggableList:{display:"flex",flexDirection:"column",gap:_,marginBottom:_},addButtonContainer:{paddingTop:"page_in_collection"===U?8:0,marginBottom:"form"===U?0:12,width:"100%"},dropzoneHalo:{background:u().e2,height:u().D0,marginTop:-u().D0},hiddenModuleStyle:{display:"none"}})),[_,U]),Y=(0,i.useCallback)((e=>{const n="existing_module"===(null==b?void 0:b.type)&&b.moduleId===e,i=n&&H;return(0,P.jsx)(K().x,{active:n,pageModuleId:e,isDragging:i,area:t,style:i&&B.isDraggingFromThisAreaToOtherArea?G.hiddenModuleStyle:void 0},e)}),[B.isDraggingFromThisAreaToOtherArea,b,H,G.hiddenModuleStyle,t]),$=(0,i.useMemo)((()=>T.length?T.map((e=>Y(e.id))):null),[T,Y]),X=(0,i.useMemo)((()=>R.length?R.map((e=>Y(e.id))):null),[R,Y]),Q=(0,i.useMemo)((()=>({enter:{opacity:0},animate:{opacity:1},exit:{opacity:0}})),[]),J=(0,i.useMemo)((()=>({buttonContainer:G.addButtonContainer})),[G.addButtonContainer]);if(!x)return null;let ee;return ee=!!M&&(!k||("views_main_tab_modules"===t||"page_details"===t)),(0,P.jsxs)(P.Fragment,{children:[$,!!D.length&&(0,P.jsx)(c().ZP,{forceDragKeyIndex:B.isDraggingFromThisAreaToOtherArea?D.length-1:void 0,className:L().Vc,store:O,keys:D,direction:"vertical",onDraggingKeyChanged:E,onDrop:(e,t)=>{q(t)},onDragCancel:z,onDragEnd:W,onClick:N,style:G.draggableList,renderKey:Y,disabled:!M,...k?{}:{hoverCursorStyleOverride:B.isDraggingAnyModuleList?"grabbing":void 0}}),(0,P.jsx)(d().Z,{visible:B.isDraggingIntoThisArea,initial:Q.enter,animate:Q.animate,exit:Q.exit,skip:!B.isDraggingAnyModuleList,className:"layout-content",ref:C,style:G.dropzoneHalo}),ee&&(0,P.jsx)(V,{...e,styles:J}),"form"===U&&M&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(F,{}),(0,P.jsx)(Z,{area:t})]}),X]})}},583824:(e,t,n)=>{n.d(t,{E:()=>a});var i=n(667294),o=()=>n(582025),s=n(785893);const a=i.memo((function(e){let{area:t,viewsMainTabId:a,children:r,className:l,style:d}=e;const{layoutBuilderModuleSelectionStore:c,layoutStore:u}=(0,n(162178).J9)(),p=(0,i.useCallback)((()=>{const e=c.state;if(null==e||!e.isDragging)return;const n=e.moduleId,i=u.getModuleById(n);i&&(0,o().B)(i,t)&&("page_main"===t&&u.isTabbedPageLayout()||c.setState({...e,draggingModuleFinalArea:{..."views_main_tab_modules"===t?{area:t,viewsMainTabId:a}:{area:t}}}))}),[t,c,u,a]),m=(0,i.useCallback)((()=>{const e=c.state;if(null==e||!e.isDragging)return;const n=e.moduleId,i=u.getModuleById(n);i&&(0,o().B)(i,t)&&c.setState({...e,draggingModuleFinalArea:e.draggingModuleInitialArea})}),[t,c,u]);return(0,s.jsx)("div",{onMouseEnter:p,onMouseLeave:m,className:l,style:d,children:r})}))},560801:(e,t,n)=>{n.d(t,{Z:()=>i});class i extends(()=>n(263184))().default{getInitialState(){return{isOpen:!1}}}},367933:(e,t,n)=>{n.d(t,{Z:()=>i});class i extends(()=>n(263184))().default{getInitialState(){}}},776958:(e,t,n)=>{n.d(t,{W:()=>s,Z:()=>r});var i=n(667294),o=n(785893);const s=16;function a(e){let{icon:t,style:i,size:a=s}=e;return(0,o.jsx)(n(643051).Z,{type:"notion_icon",size:a,icon:`/icons/${t}_lightgray.svg`,largeIcon:!0,style:i})}const r=i.memo(a)},957001:(e,t,n)=>{n.d(t,{Z:()=>b});var i=n(667294),o=()=>n(219727),s=()=>n(142735),a=()=>n(846550),r=()=>n(707513),l=()=>n(654133),d=()=>n(641506),c=()=>n(998901),u=()=>n(170210),p=()=>n(263184);class m extends p().default{getInitialState(){}}class g extends p().default{getInitialState(){return!1}}var f=()=>n(696459),h=n(785893);const y=function(e){let{additionalStyles:t,transitionMs:i,force:o,children:s}=e;const r=(0,n(187784).f)(),l=(0,a().yK)((()=>{let e;switch(o){case"forceShow":e=1;break;case"forceHide":e=0;break;case void 0:e=r?1:0;break;default:(0,f().t1)(o)}return{hoverStyle:{opacity:e,transition:`opacity ${(0,f().$K)(i)?i:200}ms ease-in`,...t}}}),[t,o,r,i]);return(0,h.jsx)("div",{style:l.hoverStyle,children:s})};var v=()=>n(776958);function x(e){let{icon:t,title:n,tooltip:i,hasRightElement:s,iconContainerStyle:u}=e;const p=(0,o().O7)(),m=(0,a().yK)((e=>({panelTitleAndIcon:{display:"flex",alignItems:"center",fontSize:(0,d().yv)(p,"UISmall"),fontWeight:r().Ue.medium,color:e.text.secondary,fill:e.mediumIconColor,flexShrink:0,maxWidth:s?200:"100%"},title:{...r().Yu},panelIconContainer:{display:"flex",alignItems:"center",justifyContent:"center",width:v().W,height:v().W,marginRight:8,marginTop:1,...u}})),[p,u,s]);return n?(0,h.jsx)(l().Z,{renderTooltip:()=>i,disableTooltip:!i,placement:c().Placement.Top,alignment:c().Alignment.Start,render:e=>(0,h.jsxs)("div",{style:m.panelTitleAndIcon,...e,children:[(0,h.jsx)("div",{style:m.panelIconContainer,children:t}),(0,h.jsx)("span",{style:m.title,children:n})]})}):null}const b=function(e){let{children:t,title:r,icon:l,tooltip:d,iconContainerStyle:c,panelStyle:p,headerStyle:f,rightStyle:v,actions:b,right:S,disableRightFadeIn:M,disableActionsFadeIn:j,hideWrapStyle:C,actionsGap:w}=e;const k=(0,o().MO)(),_=Boolean(r),T=Boolean(S),I=(0,s().qz)(void 0,g),P=(0,s().qz)(void 0,m),A=(0,i.useMemo)((()=>({isHoveredOnPanelStore:I,sizeStore:P})),[I,P]),R=(0,i.useCallback)((()=>I.setState(!0)),[I]),Z=(0,i.useCallback)((()=>I.setState(!1)),[I]),B=(0,i.useCallback)((e=>{e.width<u().d_?P.setState("narrow"):P.setState("wide")}),[P]),D=(0,a().yK)((e=>({tile:{userSelect:"none"},panel:C?{}:{paddingLeft:12,paddingRight:12,...(0,u().KI)({isPhone:k,theme:e}),...p},headerContainer:{flexShrink:0,display:"flex",justifyContent:"space-between",alignItems:"center",height:n(706363).Ct,marginLeft:u().pW,...f},rightActions:{display:"flex",flexDirection:"row",alignItems:"center"},actions:{display:"flex",alignItems:"center",gap:w??6,paddingLeft:6}})),[k,C,p,f,w]),L=(_||T)&&(0,h.jsxs)("div",{style:D.headerContainer,children:[(0,h.jsx)(x,{title:r,icon:l,tooltip:d,hasRightElement:T,iconContainerStyle:c}),(T||b)&&(0,h.jsxs)("div",{style:D.rightActions,children:[T&&(0,h.jsx)(y,{force:M?"forceShow":void 0,additionalStyles:v,children:S}),b&&(0,h.jsx)(y,{force:j?"forceShow":void 0,additionalStyles:D.actions,children:b})]})]});return(0,h.jsx)(n(38160).u.Provider,{value:A,children:(0,h.jsxs)("div",{style:D.tile,onMouseEnter:R,onMouseLeave:Z,children:[L,(0,h.jsx)(n(965865).n4,{onSizeChange:B,children:(0,h.jsx)("div",{style:D.panel,children:t})})]})})}},187784:(e,t,n)=>{n.d(t,{f:()=>a});var i=n(667294),o=()=>n(142735),s=()=>n(38160);function a(){var e;const t=null===(e=(0,i.useContext)(s().u))||void 0===e?void 0:e.isHoveredOnPanelStore;return(0,o().VK)((()=>Boolean(null==t?void 0:t.getState())),[t])}},38160:(e,t,n)=>{n.d(t,{u:()=>i});const i=(0,n(667294).createContext)({isHoveredOnPanelStore:void 0,sizeStore:void 0});i.displayName="HomePanelContext"},884310:(e,t,n)=>{n.d(t,{Z:()=>o});n(267602),n(470928);class i extends(()=>n(442))().Z{findCollectionTemplatePickerItemFromStore(e){if(e)return this.find((t=>(null==t?void 0:t.templateStore)===e))}}const o=new i},915914:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var i=n(667294),o=()=>n(142735),s=()=>n(645805),a=()=>n(127519),r=(n(267602),n(470928),()=>n(8208)),l=()=>n(250625),d=()=>n(275200),c=n(785893);const u=i.forwardRef((function(e,t){var a;const u=(0,n(219727).O7)(),{exactTargetBlockStore:p,container:m}=e,{targetSelectable:g,targetBlockStore:f}=(0,o().VK)((()=>({targetSelectable:n(32969).C.findSelectablesFromStore(p).find((e=>Boolean(e.props.shouldShowHoverMenu||e.props.shouldShowCommentMenu))),targetBlockStore:p})),[p]),[h,y]=(0,i.useState)(null==g||null===(a=g.getNode())||void 0===a?void 0:a.getBoundingClientRect()),v=(0,o().VK)((()=>{if(!p)return!1;if(null!=p&&p.pathIsDead())return!0;const e=n(239482).Dg(p);return e&&(0,n(95718).xR)(e.id)}),[p]);(0,i.useEffect)((()=>{if(!g)return;const e=g.getNode();if(!e)return;const t=()=>{y(e.getBoundingClientRect())},n=(0,d().VW)(e);n&&(0,l().lj)(n,"scroll",t);const i=(0,d().xH)(e);return i&&i!==n&&(0,l().lj)(i,"scroll",t),t(),()=>{n&&(0,l().ZV)(n,"scroll",t),i&&(0,l().ZV)(i,"scroll",t)}}),[g]);const x=(0,o().VK)((()=>"suggest"===n(279386).MT.getMode(f)),[f]),b=(0,o().VK)((()=>(0,n(345918).Fn)(u)),[u]),S=(0,o().VK)((()=>{if(!s().default.isRightMarginCommentHovered())return!1;const e=f.getNavigableBlockStore();return!Boolean((null==e?void 0:e.isPost())&&!(null!=e&&e.isPublishedPost()))}),[f]),M=!S&&(null==g?void 0:g.props.shouldShowHoverMenu),j=M;(0,i.useEffect)((()=>{!S&&r().Z.state.isHovered&&r().Z.resetHoverSource("right_margin_button")}),[S]);const C=null==m?void 0:m.getBoundingClientRect(),w=(0,o().VK)((()=>(0,n(273444).WA)({marginItemType:"selectable_hover_menu_overlay_item",store:f,nodeRect:h,containerRect:C,environment:u})),[f,h,C,u]),k=(0,n(846550).yK)((()=>({container:{position:"absolute",top:w,...e.style},commentMenu:{marginLeft:3}})),[e.style,w]);return v?null:(0,n(84080).Z)((e=>(0,c.jsxs)("div",{style:k.container,ref:t,...e,children:[S&&(0,c.jsx)("div",{style:k.commentMenu,children:(0,c.jsx)(n(88409).Z,{selectable:g,store:f,containerRect:C})}),M&&(0,c.jsx)(n(22819).Z,{selectable:g,store:f,disableDrag:x,isWorkspaceAdmin:b,nodeRect:h,containerRect:C}),j&&(0,c.jsx)(n(860489).ZP,{store:f,nodeRect:h,containerRect:C})]})))}));const p={position:"absolute",top:0,left:0,zIndex:n(492522).Mo};const m=function(e){const t=(0,i.useRef)(null),r=(0,n(644235).hq)(),l=(0,o().Kw)(s().default),d=(0,o().VK)((()=>!(!l.isOpen||l.container!==e.selectableContainer)&&((!n(591051).Z.state.isActive||"editing"!==a().default.state.mode||!(0,n(191003).qS)(a().default.state.multiSelection))&&"closed"===n(845622).default.state.type)),[l,e.selectableContainer]),m=(0,o().VK)((()=>{if(l.isOpen&&l.container===e.selectableContainer)return l.currentStore}),[l,e.selectableContainer]);return r&&d&&l.isOpen?(0,c.jsx)("div",{style:p,ref:t,children:(0,c.jsx)(n(773398).sT,{container:t.current??void 0,state:l})}):(0,c.jsx)("div",{style:p,ref:t,children:(0,c.jsx)(n(372353).Z,{className:n(247724).$Ot,render:()=>d&&m?[(0,c.jsx)(n(628370).Z,{tag:u,animate:{opacity:1},initial:{opacity:1},exit:{opacity:0},exactTargetBlockStore:m,container:t.current??void 0},m.id)]:[]})})}},666638:(e,t,n)=>{n.r(t),n.d(t,{ShareMenuContainer:()=>yo});var i=n(667294),o=()=>n(219727),s=()=>n(142735),a=()=>n(846550),r=()=>n(788860),l=()=>n(879952),d=()=>n(990966),c=()=>n(206352),u=()=>n(198829),p=()=>n(470386),m=()=>n(67961),g=()=>n(641481),f=()=>n(247724),h=()=>n(352230),y=()=>n(148126),v=()=>n(677559),x=()=>n(228772),b=()=>n(591914),S=()=>n(707513),M=()=>n(539245),j=()=>n(641506),C=()=>n(942560),w=()=>n(423470),k=()=>n(529048),_=n(785893);function T(e){const{store:t,calculatedPermissions:n,permissionItemArgs:i,onClose:l}=e,d=(0,o().Fy)(),g=(0,s().VK)((()=>d.isMobile),[d.isMobile]),y=function(e){return(0,a().yK)((t=>({title:{fontSize:16},topbarStyle:{paddingTop:15,paddingBottom:15,height:"auto",background:e?t.surface.page:void 0}})),[e])}(g),v=(0,s().qz)(void 0,k().Z),x=d.isMobile?{menuType:h().o.Modal,disableHeaderShadow:!0,title:(0,_.jsx)(m().Z,{isMobile:d.isMobile,style:y.title,children:(0,_.jsx)(r()._H,{defaultMessage:"Share",id:"loggedOutShareMenu.title"})}),topbarStyle:y.topbarStyle,right:(0,_.jsx)(p().DoneMenuText,{}),onClickRight:l,whiteBackground:!0}:{menuType:h().o.Popup,maxHeight:"90vh"};return(0,_.jsx)(u().Z,{...x,className:f().B8p,children:(0,_.jsx)(c().Z,{debugName:"LoggedOutShareMenuContainer",capture:!0,allowEsc:!0,children:(0,_.jsx)(I,{store:t,isMobile:g,calculatedPermissions:n,permissionItemArgs:i,buttonPopupStore:v})})})}function I(e){let{store:t,isMobile:n,calculatedPermissions:s,permissionItemArgs:c,buttonPopupStore:u}=e;const p=(0,o().O7)(),m=function(e){const t=(0,o().O7)();return(0,a().yK)((n=>({tabStyle:{color:n.lightTextColor,...e&&{width:"50%",textAlign:"center"}},selectedTabStyle:{fontWeight:S().Ue.medium},tabTitleStyle:{color:"inherit",fontSize:(0,j().yv)(t,"UIRegular"),fontWeight:S().Ue.medium},style:e?{marginBottom:8,justifyContent:"space-between"}:{marginBottom:16,paddingLeft:16},tabBorderStyle:{left:0,right:0}})),[t,e])}(n),g=[(0,_.jsx)(i.Fragment,{children:(0,_.jsx)(r()._H,{defaultMessage:"Share",id:"shareMenu.shareTab.title"},"share")},"title")];return(0,i.useEffect)((()=>{l().ZH({preventDismissMobileKeyboard:!0,environment:p}),d().clear({preventDismissMobileKeyboard:!0,environment:p})}),[p]),(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(M().Z,{...m,tabs:g,selectedIndex:0,onChange:()=>{}}),(0,_.jsx)(w().w,{store:t,calculatedPermissions:s,permissionItemArgs:c}),(0,_.jsx)(C().Z,{store:t,buttonPopupStore:u,calculatedPermissions:s,permissionItemArgs:c})]})}var P=()=>n(589525),A=()=>n(834758),R=()=>n(807463),Z=()=>n(749826),B=()=>n(136765),D=()=>n(428241),L=()=>n(779733),O=()=>n(333023),H=()=>n(681832),V=()=>n(930085),U=()=>n(303858),E=()=>n(345918),N=()=>n(696459),F=()=>n(174896);async function K(e,t,n,i,o){if(o.state.inviteStage===R().TG.closed||o.state.inviteStage===R().TG.share_page)return;const{selection:s}=o.state;switch(s){case R().uq.request_workspace_member:V().d(e,{...U().Oh(e,o),from:"share_menu"}),await U().fC({environment:e,spaceStore:t,originId:n.id,originType:"share_menu",reasonMessage:void 0,contextualInviteStore:o,intl:i});break;case R().uq.workspace_member:if(V().E0(e,U().Oh(e,o)),!t.isTeamsEnabled()){o.setState({...o.state,inviteStage:R().TG.closed});if(!(await F().HD({environment:e,flowId:o.state.flowId??"",trackCreateTeamComplete:!1})))return}await U().j_({environment:e,spaceStore:t,contextualInviteStore:o,from:"page_contextual_invite",intl:i});break;case R().uq.page_guest:case R().uq.unselected:case R().uq.closed:o.reset();break;default:(0,N().t1)(s)}}n(241792);var z=()=>n(530980),W=()=>n(989478),q=()=>n(212493),G=()=>n(661641),Y=()=>n(661297),$=()=>n(916095),X=()=>n(168441),Q=()=>n(168509),J=()=>n(563701),ee=()=>n(981583),te=()=>n(993989);function ne(e){let{users:t}=e;const n=(0,a().yK)((e=>({avatarsContainer:{marginLeft:"16px",display:"flex"},avatarWrapper:{marginLeft:"-16px"},upgradeWrapper:{alignSelf:"end",marginLeft:"-14px",borderRadius:"50%",background:e.surface.wash},upgradeIcon:{height:16,width:16,fill:e.icon.uiBluePrimary}})),[]);return(0,_.jsxs)("div",{style:n.avatarsContainer,children:[t.slice(0,10).map(((e,t)=>(0,_.jsx)("div",{style:n.avatarWrapper,children:(0,_.jsx)(ee().Z,{userValue:e,size:40})},t))),(0,_.jsx)("div",{style:n.upgradeWrapper,children:(0,te().r)(n.upgradeIcon)})]})}function ie(e){const{guestEmails:t,spaceStore:n,contextualInviteStore:i,blockStore:l,paysPerSeat:d}=e,c=(0,o().O7)(),u=(0,r().YB)(),p=(0,s().VK)((()=>i.state.inviteStage===R().TG.request_workspace),[i]),m=(0,s().VK)((()=>t.map((e=>{const t=i.state.invitedEmailToUserIdMap[e];return z().kk5.fromValue(W().KJ,{id:t,email:e,version:1})}))),[i,t]),g=(0,a().yK)((e=>({icon:{width:16,height:16,fill:e.icon.secondary},cta:{flex:1},facepileContainer:{display:"flex",justifyContent:"center"}})),[]);return(0,_.jsxs)("div",{className:f().B8p,children:[(0,_.jsx)($().U4,{onClick:()=>i.reset()}),(0,_.jsxs)(q().jX,{padding:"24px 22px 18px 22px",gap:24,children:[(0,_.jsxs)(q().jX,{gap:20,children:[(0,_.jsx)("div",{style:g.facepileContainer,children:(0,_.jsx)(ne,{users:m})}),(0,_.jsxs)(q().jX,{gap:8,children:[(0,_.jsx)(G().q,{styleName:"Heading-17px/Semibold",children:(0,_.jsx)(r()._H,{id:"ContextualInvite.variantD.header",defaultMessage:"{inviteCount, plural, one {Upgrade guest to member?} other {Upgrade {inviteCount} guests to members?}}",values:{inviteCount:t.length}})}),(0,_.jsxs)(q().jX,{gap:20,children:[(0,_.jsx)(G().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:d?p?(0,_.jsx)(r()._H,{id:"ContextualInvite.variantD.description.request",defaultMessage:"{otherInviteCount, plural, =0 {{firstGuest} will have access to these features.} one {{firstGuest} and 1 other will have access to these features.} other {{firstGuest} and {otherInviteCount} others will have access to these features.}} A workspace admin will review your request.",values:{firstGuest:t[0],otherInviteCount:t.length-1}}):(0,_.jsx)(r()._H,{id:"ContextualInvite.variantD.description",defaultMessage:"{otherInviteCount, plural, =0 {{firstGuest} will have access to these features} one {{firstGuest} and 1 other will have access to these features} other {{firstGuest} and {otherInviteCount} others will have access to these features}} and {totalInviteCount, plural, one {this workspace will be billed for 1 member} other {this workspace will be billed for {totalInviteCount} members}}",values:{firstGuest:t[0],totalInviteCount:t.length,otherInviteCount:t.length-1}}):(0,_.jsx)(r()._H,{id:"ContextualInvite.variantD.description.free",defaultMessage:"{otherInviteCount, plural, =0 {{firstGuest} will have access to these features} one {{firstGuest} and 1 other will have access to these features} other {{firstGuest} and {otherInviteCount} others will have access to these features}}",values:{firstGuest:t[0],otherInviteCount:t.length-1}})}),(0,_.jsxs)(q().jX,{gap:14,children:[(0,_.jsxs)(q().jX,{gap:8,direction:"row",align:"center-left",children:[(0,X().Q)(g.icon),(0,_.jsx)(G().q,{styleName:"UIRegular-14px/Regular",children:(0,_.jsx)(r()._H,{id:"ContextualInvite.variantD.memberBenefits.private",defaultMessage:"Create private pages and drafts"})})]}),(0,_.jsxs)(q().jX,{gap:8,direction:"row",align:"center-left",children:[(0,Q().S)(g.icon),(0,_.jsx)(G().q,{styleName:"UIRegular-14px/Regular",children:(0,_.jsx)(r()._H,{id:"ContextualInvite.variantD.memberBenefits.public",defaultMessage:"Access all public pages in the workspace"})})]}),(0,_.jsxs)(q().jX,{gap:8,direction:"row",align:"center-left",children:[(0,J().O)(g.icon),(0,_.jsx)(G().q,{styleName:"UIRegular-14px/Regular",children:(0,_.jsx)(r()._H,{id:"ContextualInvite.variantD.memberBenefits.collaboration",defaultMessage:"Unlimited collaboration with others"})})]})]})]})]})]}),(0,_.jsxs)(q().jX,{direction:"row",gap:10,children:[(0,_.jsx)(Y().Z,{isLarge:!0,style:g.cta,onClick:async()=>{!function(e){e.setState({...e.state,selection:R().uq.page_guest})}(i),await K(c,n,l,u,i)},children:(0,_.jsx)(r()._H,{id:"contextualInvite.skip.button",defaultMessage:"Skip for now"})}),(0,_.jsx)(Y().Z,{isLarge:!0,style:g.cta,onClick:async()=>{i.state.inviteStage===R().TG.share_workspace&&function(e){e.setState({...e.state,selection:R().uq.workspace_member})}(i),i.state.inviteStage===R().TG.request_workspace&&function(e){e.setState({...e.state,selection:R().uq.request_workspace_member})}(i),await K(c,n,l,u,i)},children:p?(0,_.jsx)(r()._H,{id:"ContextualInvite.variantD.request",defaultMessage:"Request upgrade"}):(0,_.jsx)(r()._H,{id:"ContextualInvite.variantD.upgrade",defaultMessage:"Upgrade to member"})})]})]})]})}function oe(e){const{spaceStore:t,blockStore:i}=e,a=(0,o().O7)(),r=(0,n(595976).p)({spaceId:t.id}),l=(0,s().VK)((()=>(0,n(91502).$)(a,r)),[a,r]),d=(0,s().qz)(e.contextualInviteStore,R().ZP),c=(0,s().VK)((()=>n(629719).A(null==r?void 0:r.subscription)),[r]),u=(0,s().VK)((()=>d.getGuestEmails()),[d]),p=(0,s().VK)((()=>(0,E().Q6)(t)),[t]);return(0,n(732811).K)((()=>{!function(e,t){t&&e.setState({...e.state,selection:R().uq.page_guest})}(d,l),V().$2(a,U().Oh(a,d))})),u.length?(0,_.jsx)(ie,{contextualInviteStore:d,spaceStore:t,blockStore:i,useZeroTeamsExperience:l,paysPerSeat:c,guestEmails:u,useGuestInviteRequestExperience:p}):null}const se=i.memo(oe);var ae=()=>n(827282);const re=(0,ae().IU)("wifiSlash",{viewBox:"0 0 32 32",svg:(0,_.jsx)("path",{d:"M5.33984 5.32812L8.04688 8.04688C6.17969 8.8125 4.50781 9.97656 3.03125 11.5391C2.90625 11.6719 2.75781 11.7422 2.58594 11.75C2.42188 11.75 2.27734 11.6836 2.15234 11.5508L0.5 9.89844C0.390625 9.78125 0.332031 9.65625 0.324219 9.52344C0.324219 9.38281 0.371094 9.25391 0.464844 9.13672C1.08984 8.39453 1.8125 7.70312 2.63281 7.0625C3.46094 6.41406 4.36328 5.83594 5.33984 5.32812ZM13.6719 6.91016L10.3203 3.54688C10.9688 3.42187 11.5938 3.32812 12.1953 3.26562C12.8047 3.20313 13.4023 3.17188 13.9883 3.17188C15.8086 3.17188 17.5703 3.42969 19.2734 3.94531C20.9844 4.46094 22.5469 5.17188 23.9609 6.07812C25.375 6.97656 26.5625 7.99609 27.5234 9.13672C27.6172 9.25391 27.6641 9.38281 27.6641 9.52344C27.6641 9.65625 27.6016 9.78125 27.4766 9.89844L25.8359 11.5391C25.7109 11.6719 25.5664 11.7422 25.4023 11.75C25.2383 11.75 25.0977 11.6914 24.9805 11.5742C23.543 10.0898 21.9141 8.94531 20.0938 8.14062C18.2812 7.33594 16.2852 6.91016 14.1055 6.86328C14.0352 6.86328 13.9609 6.86719 13.8828 6.875C13.8125 6.88281 13.7422 6.89453 13.6719 6.91016ZM10.6016 10.5781L13.7773 13.7656C13.0273 13.7812 12.2969 13.9023 11.5859 14.1289C10.875 14.3555 10.207 14.6641 9.58203 15.0547C8.96484 15.4375 8.42188 15.8828 7.95312 16.3906C7.82031 16.5312 7.67188 16.6094 7.50781 16.625C7.34375 16.6328 7.19141 16.5703 7.05078 16.4375L5.21094 14.6328C5.10156 14.5234 5.03906 14.4023 5.02344 14.2695C5.01562 14.1367 5.0625 14.0117 5.16406 13.8945C5.78906 13.1602 6.56641 12.5039 7.49609 11.9258C8.43359 11.3398 9.46875 10.8906 10.6016 10.5781ZM22.0859 15.3242L17.3398 10.5781C18.4492 10.8594 19.4922 11.2969 20.4688 11.8906C21.4453 12.4844 22.2344 13.1523 22.8359 13.8945C22.9219 14.0117 22.9609 14.1367 22.9531 14.2695C22.9531 14.4023 22.8945 14.5234 22.7773 14.6328L22.0859 15.3242ZM14 16.9531C14.8281 16.9531 15.5898 17.1367 16.2852 17.5039C16.9805 17.8711 17.5312 18.3125 17.9375 18.8281C18.0312 18.9453 18.0703 19.0742 18.0547 19.2148C18.0391 19.3555 17.9766 19.4766 17.8672 19.5781L15.0078 22.3438C14.7734 22.5703 14.582 22.7227 14.4336 22.8008C14.293 22.8867 14.1484 22.9297 14 22.9297C13.8594 22.9297 13.7188 22.8867 13.5781 22.8008C13.4375 22.7227 13.2461 22.5703 13.0039 22.3438L10.1328 19.5781C10.0312 19.4844 9.96484 19.3789 9.93359 19.2617C9.91016 19.1367 9.93359 19.0234 10.0039 18.9219C10.4102 18.375 10.9688 17.9102 11.6797 17.5273C12.3906 17.1445 13.1641 16.9531 14 16.9531ZM23.8906 21.7812L4.09766 2C3.91797 1.82812 3.82812 1.60938 3.82812 1.34375C3.82812 1.07812 3.91797 0.855469 4.09766 0.675781C4.26953 0.496094 4.48828 0.410156 4.75391 0.417969C5.01953 0.417969 5.24219 0.507813 5.42188 0.6875L25.2031 20.4688C25.3906 20.6484 25.4844 20.8672 25.4844 21.125C25.4844 21.3828 25.3906 21.6016 25.2031 21.7812C25.0312 21.9609 24.8164 22.0508 24.5586 22.0508C24.3008 22.0508 24.0781 21.9609 23.8906 21.7812Z"})});var le=()=>n(257934),de=()=>n(897257),ce=()=>n(714022),ue=()=>n(514737);function pe(e){const{store:t,mostPermissivePublicItem:n,permissionItemArgs:i}=e,{permissionItem:o}=n;return(0,s().VK)((()=>(0,ue().L)(o)),[o])?(0,_.jsx)(A().D7,{store:t,mostPermissivePublicItem:n,sudoModeStore:i.sudoModeStore,location:i.location,showManageAllDomains:!0,showAllPublishedSites:!0,shouldAskForConfirmationOnPublish:!1}):(0,_.jsx)(A().vk,{store:t,mostPermissivePublicItem:n,sudoModeStore:i.sudoModeStore,location:i.location})}n(267602),n(653476);var me=()=>n(446866),ge=()=>n(703976),fe=()=>n(259408),he=()=>n(94967),ye=()=>n(512220),ve=()=>n(594777),xe=()=>n(581356),be=()=>n(239482),Se=()=>n(466970),Me=()=>n(692304),je=()=>n(770975),Ce=()=>n(815277),we=()=>n(367246);function ke(e){const{currentMembersAndGuests:t,inviteTarget:n}=e,i=_e(n);if(!i)return;const o=function(e){const{email:t,currentMembersAndGuests:n}=e;return n.memberEmails.has(t)?"member":n.guestEmails.has(t)?"guest":void 0}({email:i,currentMembersAndGuests:t});return{email:i,currentRole:o}}function _e(e){const{type:t}=e;switch(t){case"newUser":case"existingUser":return e.value.email;case"invalidUser":case"group":return;default:(0,N().t1)(t)}}var Te=()=>n(845465),Ie=()=>n(429490);var Pe=()=>n(963588),Ae=()=>n(557876),Re=()=>n(681941),Ze=()=>n(661727),Be=()=>n(603692),De=()=>n(392192),Le=()=>n(847354),Oe=()=>n(838266),He=()=>n(19072);function Ve(e){const{spaceId:t,userId:n,spaceModel:i,spaceUserModel:o,teamModel:l,domains:d,blockStore:c}=e,u=(0,r().YB)(),p=(0,Ce().oo)({name:"internal_guests",spaceId:t,userId:n,amount:1}),m=(0,Le().u)({blockStore:c}),g=(0,Ce().VX)({name:"non_admin_members",spaceId:t,userId:n}),f=(0,a().yK)((e=>{const t=p&&!(0,fe()._e)(p),n=t?20:5,i=t?e.accentColors.orange[100]:"transparent",o=t?e.accentColors.orange[400]:e.fill.uiBlue;return{container:{borderImage:`repeating-linear-gradient(-45deg, ${i}, ${i} ${n}px, ${o} ${n}px, ${o} ${2*n}px) 5 0`,borderWidth:"4px 0 0 0",borderStyle:"solid",background:t?(0,Ze().Fq)(e.accentColors.orange[400],.15):(0,Ze().Fq)(e.fill.uiBlue,.15),position:"relative",padding:10,zIndex:5},fill:{background:e.surface.elevated,border:`1px solid ${e.stroke.secondary}`},button:{height:"auto",width:"calc(100% + 16px)",padding:8,margin:-8}}}),[p]),h=(0,s().VK)((()=>{var e;const t=(0,Re().KE)((null===(e=de().subscriptionDataStoreInstance.state)||void 0===e?void 0:e.subscriptionTier)??"free");return He().i$[t].label}),[]),y=(0,s().VK)((()=>null==o?void 0:o.isWorkspaceOwner()),[o]),v=(0,s().VK)((()=>null==o?void 0:o.isMember()),[o]);let x;x=y?"You are a workspace owner":v?"You are a member":"You are a guest";const b=(0,s().VK)((()=>[{label:"Disable members inviting guests to pages",isEnabled:(null==i?void 0:i.getDisableGuests())??!1},{label:"Allow members to request adding guests",isEnabled:(null==i?void 0:i.getSettings().enable_guest_invite_requests)??!1},{label:"Allow members to request adding other members",isEnabled:!(null!=i&&i.getSettings().disable_membership_requests)}]),[i]),S=(0,s().VK)((()=>[{label:"Disable guests",isEnabled:(null==l?void 0:l.getSettings().disable_guests)??!1}]),[l]),M=(0,s().VK)((()=>{if(!i||!d||!o)return;const{autojoinDomains:e}=(0,Ae().tV)({space:i,spaceUser:o,domains:d});return e}),[i,o,d]),j=(0,s().VK)((()=>{if(!i||!o)return;const{type:e}=(0,Ae().tX)({space:i,spaceUser:o,team:l,publicPageDataGuestSetting:m});switch(e){case"can_add":return"You can add guests.";case"can_request":return"You can request to add guests.";case"cannot_add":return"You can't add or request to add guests.";default:(0,N().t1)(e)}}),[i,o,l,m]),C=(0,s().VK)((()=>{if(!i||!d||!o)return;const{type:e}=(0,Ae().tV)({space:i,spaceUser:o,domains:d});switch(e){case"can_add":return"You can add members.";case"can_request":return"You can request to add members.";case"cannot_add":return"You can't add or request to add members.";default:(0,N().t1)(e)}}),[i,o,d]),w=(0,s().VK)((()=>{if(!i||!o||!d)return!1;return"can_add"===(0,Ae().tV)({space:i,spaceUser:o,domains:d}).type}),[i,o,d]),k=(0,s().VK)((()=>{if(!p)return;const e=p.type;switch(e){case"available":return"You can add an internal guest.";case"blocked":case"upsell":return w?g?"Internal guests will be added to the space with member access.":"Internal guests will be added to the space with workspace owner access.":"You can't add internal guests.";default:(0,N().t1)(e)}}),[p,g,w]),T=(0,s().VK)((()=>{if(!p)return"Guest limit data is unavailable";if("cumulative"===p.limit.type){const{current:e,total:t}=p.limit;return"unlimited"===t?"No guest limit":`Space has ${e} of ${t} guests`}}),[p]),I=e=>{Oe().default.setState({open:!0,openedFrom:"misc",currentTab:e,defaultSubtab:void 0,highlightedSetting:void 0})};return(0,_.jsxs)(q().jX,{gap:10,style:f.container,children:[(0,_.jsxs)(q().jX,{gap:12,borderRadius:6,padding:10,style:f.fill,children:[(0,_.jsx)(De().Z,{onClick:()=>I("security"),style:f.button,children:(0,_.jsxs)(q().jX,{gap:4,children:[(0,_.jsx)(G().q,{styleName:"UISmall-12px/Medium",children:"Space security settings"}),b.map(((e,t)=>(0,_.jsxs)(q().jX,{direction:"row",gap:4,align:"center-left",children:[(0,_.jsx)(Ue,{isEnabled:e.isEnabled}),(0,_.jsx)(G().q,{colorName:e.isEnabled?"secondary":"tertiary",styleName:"UISmall-12px/Regular",children:e.label})]},t)))]})}),(0,_.jsxs)(q().jX,{gap:4,children:[(0,_.jsx)(G().q,{styleName:"UISmall-12px/Medium",children:"Team security settings"}),S.map(((e,t)=>(0,_.jsxs)(q().jX,{direction:"row",gap:4,align:"center-left",children:[(0,_.jsx)(Ue,{isEnabled:e.isEnabled}),(0,_.jsx)(G().q,{colorName:e.isEnabled?"secondary":"tertiary",styleName:"UISmall-12px/Regular",children:e.label})]},t)))]}),(0,_.jsx)(De().Z,{onClick:()=>I("billing"),style:f.button,children:(0,_.jsxs)(q().jX,{gap:4,children:[(0,_.jsx)(G().q,{styleName:"UISmall-12px/Medium",children:"Subscription"}),(0,_.jsx)(G().q,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:`${u.formatMessage(h)} plan`}),(0,_.jsx)(G().q,{colorName:"secondary",styleName:"UISmall-12px/Regular",children:T})]})}),(0,_.jsx)(De().Z,{onClick:()=>I("settings"),style:f.button,children:(0,_.jsxs)(q().jX,{gap:4,children:[(0,_.jsx)(G().q,{styleName:"UISmall-12px/Medium",children:"Allowed email domains"}),null==M?void 0:M.map((e=>(0,_.jsx)(G().q,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:e},e))),0===(null==M?void 0:M.length)&&(0,_.jsx)(G().q,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:"None"})]})})]}),(0,_.jsxs)(q().jX,{gap:4,borderRadius:6,padding:10,style:f.fill,children:[(0,_.jsx)(G().q,{styleName:"UISmall-12px/Medium",children:x}),(0,_.jsx)(G().q,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:C}),(0,_.jsx)(G().q,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:j}),(0,_.jsx)(G().q,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:k})]})]})}function Ue(e){const{isEnabled:t}=e,n=(0,a().yK)((e=>({circle:{width:10,height:10,borderRadius:"50%",border:`1px solid ${e.icon.quaternary}`}})),[]);return t?(0,_.jsx)(Be().y,{iconGroup:Pe().K,variantName:"mini",colorName:"secondary"}):(0,_.jsx)(q().jX,{width:14,height:14,align:"center",children:(0,_.jsx)("div",{style:n.circle})})}var Ee=()=>n(714230),Ne=()=>n(235484),Fe=()=>n(602137),Ke=()=>n(824462),ze=()=>n(448419),We=()=>n(643051),qe=()=>n(92175),Ge=()=>n(842574),Ye=()=>n(189265),$e=()=>n(286338);const Xe=(0,ae().IU)("squareAndArrowDown",{viewBox:"0 0 20 20",svg:(0,_.jsx)("g",{children:(0,_.jsx)("path",{d:"M6.063 16.817c-.739 0-1.297-.186-1.675-.56-.379-.374-.568-.928-.568-1.661V7.869c0-.729.19-1.28.568-1.654.378-.378.936-.568 1.675-.568h1.866v1.347H6.145c-.32 0-.563.084-.732.253-.164.164-.246.413-.246.745v6.487c0 .333.082.582.246.746.169.168.413.252.732.252h7.704c.314 0 .556-.084.724-.252.173-.165.26-.413.26-.745V7.991c0-.332-.087-.58-.26-.745-.168-.169-.41-.253-.724-.253h-1.77V5.647h1.858c.739 0 1.297.19 1.675.568.379.374.568.925.568 1.654v6.727c0 .729-.19 1.28-.568 1.654-.378.378-.936.567-1.675.567H6.064ZM10 12.387a.715.715 0 0 1-.24-.04.832.832 0 0 1-.245-.171L7.218 9.96a.567.567 0 0 1-.171-.403c0-.16.052-.29.157-.39.11-.1.244-.15.403-.15a.54.54 0 0 1 .424.184l.957 1.019.445.499L9.364 9.7V2.62c0-.168.062-.314.185-.437A.629.629 0 0 1 10 1.997c.173 0 .321.062.444.185a.588.588 0 0 1 .192.437v7.082l-.069 1.019.438-.5.957-1.018a.554.554 0 0 1 .424-.184c.155 0 .287.05.396.15.114.1.171.23.171.39 0 .15-.06.284-.178.403l-2.296 2.215a.758.758 0 0 1-.24.17.715.715 0 0 1-.239.042Z"})})});var Qe=()=>n(873175),Je=()=>n(842576),et=()=>n(520849),tt=()=>n(104088),nt=()=>n(876822),it=()=>n(138912),ot=()=>n(365872),st=()=>n(293338),at=()=>n(291198);function rt(e){const{shouldShowLengthWarning:t,shouldShowLinkWarning:n,value:i,maxLength:o}=e,s=(0,a().yK)((e=>({container:{position:"absolute",top:0,display:"flex",justifyContent:"center",fontSize:12,color:e.lightTextColor,width:"100%"},warning:{display:"flex",justifyContent:"center",width:"calc(100% - 36px)",backgroundColor:e.modalBackground,marginTop:1}})),[]);return(0,_.jsx)("div",{style:s.container,children:(0,_.jsxs)("div",{style:s.warning,children:[t&&(0,_.jsx)(r()._H,{defaultMessage:"{characters} / {maxCharacters} characters",id:"ContextualInvite.permissions_invites.messageLengthWarning",values:{characters:i.length,maxCharacters:o}}),t&&n&&" · ",n&&(0,_.jsx)(r()._H,{defaultMessage:"Links will be omitted from your message",id:"ContextualInvite.permissions_invites.removeLinkWarning"})]})})}const lt=100;function dt(e){const{open:t,focus:n,value:i,maxLength:o,onFocus:s,onChange:l,onCancel:d}=e,c=(0,r().YB)(),u=i.length/o>=.8,p=(0,st().TQ)(i),m=u||p,g=(0,a().yK)((e=>({container:{maxHeight:t?lt:0,position:"absolute",bottom:0,width:"100%",backgroundColor:e.modalBackground,pointerEvents:t?"all":"none",transitionProperty:"max-height",transitionDuration:"0.3s",boxShadow:"0px -4px 4px rgba(0, 0, 0, 0.03)",overflow:"hidden",zIndex:1},input:{maxHeight:t?100:0,borderTop:1,borderTopStyle:"solid",borderTopColor:e.regularDividerColor,padding:18,fontSize:14,transitionProperty:"max-height",transitionDuration:"0.3s"}})),[t]),f=c.formatMessage({id:"shareMenu.emailMessageInput.placeholder",defaultMessage:"Add a message to your invite..."});return(0,_.jsxs)("div",{style:g.container,children:[m&&(0,_.jsx)(rt,{value:i,maxLength:o,shouldShowLengthWarning:u,shouldShowLinkWarning:p}),(0,_.jsx)(at().Z,{textarea:!0,focusInitial:!1,format:at().B.Transparent,placeholder:f,maxlength:o,focus:n,value:i,onFocus:s,onChange:l,inputStyle:g.input,onCancel:d})]})}n(670560),n(122556),n(582845),n(250570),n(533019),n(721473),n(788208),n(22624),n(470928),n(30005),n(731107),n(228244);var ct=()=>n(619186),ut=()=>n(801812),pt=()=>n(741633),mt=()=>n(933868),gt=()=>n(396136),ft=()=>n(243225),ht=()=>n(306164),yt=()=>n(542487),vt=()=>n(912732),xt=()=>n(849129),bt=()=>n(827973),St=()=>n(255577),Mt=()=>n(838367),jt=()=>n(943620),Ct=()=>n(384241),wt=()=>n(388284),kt=()=>n(654133),_t=()=>n(777814),Tt=()=>n(64131),It=()=>n(54076),Pt=()=>n(98148),At=()=>n(164079),Rt=()=>n(122479),Zt=()=>n(88476),Bt=()=>n(17922),Dt=()=>n(267842),Lt=()=>n(306837),Ot=()=>n(107656),Ht=()=>n(384697),Vt=()=>n(493155),Ut=()=>n(548557),Et=()=>n(998901),Nt=()=>n(245845),Ft=()=>n(826955),Kt=()=>n(969243),zt=()=>n(18281),Wt=()=>n(697623),qt=()=>n(495712),Gt=()=>n(65404),Yt=()=>n(975899);function $t(e){const{publicPermission:t}=e,n=(0,a().yK)((e=>({banner:{...(0,Te().S2)({theme:e,inheritanceBannerEnabled:!1}),display:"flex",flexDirection:"row",alignItems:"center",gap:8},content:{display:"flex",alignItems:"flex-start",gap:2,flex:"1 0 0"},label:{fontSize:14,lineHeight:"20px",color:e.text.secondary,flex:"1 0 0",paddingLeft:4},icon:{height:16,width:16,color:e.icon.secondary},iconContainer:{height:20,width:20,display:"flex",alignItems:"center",justifyContent:"center"},manageButton:{color:e.text.uiBluePrimary,fontWeight:S().Ue.medium}})),[]),i=t.permissionItem.role;return mt().YX(i)?(0,_.jsxs)("div",{style:n.banner,children:[(0,_.jsxs)("div",{style:n.content,children:[(0,_.jsx)("div",{style:n.iconContainer,children:(0,Yt().o)(n.icon)}),(0,_.jsx)(m().Z,{style:n.label,isMultiline:!0,children:(0,_.jsx)(Xt,{role:i})})]}),(0,_.jsx)(qe().Z,{isSmall:!0,style:n.manageButton,onClick:()=>H().default.setState({...H().default.state,display:H().wV.Publish,tab:H().XF.Publish}),children:(0,_.jsx)(r()._H,{id:"shareMenu.managePublishSettingsButton.label",defaultMessage:"Settings"})})]}):null}function Xt(e){const{role:t}=e;switch(t){case"read_and_write":return(0,_.jsx)(r()._H,{id:"shareMenu.publicPermissionBanner.canEdit",defaultMessage:"This page allows edits from anyone on the web"});case"comment_only":return(0,_.jsx)(r()._H,{id:"shareMenu.publicPermissionBanner.canComment",defaultMessage:"This page allows comments from anyone on the web"});case"reader":return(0,_.jsx)(r()._H,{id:"shareMenu.publicPermissionBanner.canRead",defaultMessage:"This page can be viewed by anyone on the web"});case"editor":case"membership_admin":case"content_only_editor":case"none":return null;default:(0,N().t1)(t)}}var Qt=()=>n(421736),Jt=()=>n(907099);function en(e){let{inviteTarget:t,isRedesignEnabled:i,isMobile:o,captionOverride:l}=e;const d=(0,r().YB)(),c=(0,s().VK)((()=>nt().default.state.currentSpaceStore),[]),u=(0,s().VK)((()=>(0,Jt().kF)({groupName:t.value.name,intl:d})),[t,d]),p=(0,s().VK)((()=>{if(c&&t.value.icon)return{pointer:{table:c.table,id:c.id},icon:t.value.icon}}),[c,t]),g=(0,s().VK)((()=>(0,Jt().c7)({groupId:t.value.group_id})),[t]),f=(0,a().yK)((()=>({container:(0,Te().u0)({isRedesignEnabled:i,isMobile:o}),titleContainer:{display:"flex",alignItems:"center",paddingTop:i?void 0:8,paddingBottom:i?void 0:8,marginLeft:i?void 0:2,minHeight:36},groupInfoContainer:{display:"flex",flexDirection:"column"},nameAndIconContainer:{display:"flex",alignItems:"center"},groupNameLabel:{marginLeft:10,marginRight:4},groupMembersLabel:{marginLeft:10}})),[o,i]);return(0,_.jsxs)("div",{style:f.titleContainer,children:[(0,_.jsx)(n(724902).Z,{groupIcon:null==p?void 0:p.icon,isRedesignEnabled:i,spaceId:t.value.space_id}),(0,_.jsxs)("div",{style:f.groupInfoContainer,children:[(0,_.jsxs)("div",{style:f.nameAndIconContainer,children:[(0,_.jsx)(m().Z,{style:f.groupNameLabel,children:u}),!i&&Boolean(null==p?void 0:p.icon)&&(0,_.jsx)(jt().Z,{disabled:!0,bucket:"public",title:u,icon:p,size:18,isEmptyPage:!1})]}),(0,_.jsx)(m().Z,{isSmall:!0,style:f.groupMembersLabel,children:l||(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(r()._H,{defaultMessage:"Group",id:"blockPermissionsSettings.groupPermission.label"})," · ",(0,_.jsx)(r()._H,{defaultMessage:"{numberOfGroupMembers, plural, one {{numberOfGroupMembers} person} other {{numberOfGroupMembers} people}}",id:"blockPermissionsSettings.groupPermission.none",values:{numberOfGroupMembers:g}})]})})]})]})}const tn=i.memo(en);var nn=()=>n(568017),on=()=>n(154186),sn=()=>n(15409),an=()=>n(277533);function rn(e,t){let{blockStore:n,isInvited:i,isRedesignEnabled:o,disabled:s,spaceVisibleUserMap:r,inviteTarget:l,id:d,focused:c,onClick:u,onAuxClick:p,onMouseEnter:m,role:g,disallowTabbing:f,ignoreLocalHoverState:h,isMobile:y}=e;const v=(0,a().yK)((()=>({container:(0,Te().u0)({isRedesignEnabled:o,isMobile:y}),titleStyle:o?{marginLeft:Te().gf}:{}})),[y,o]);return(0,_.jsx)(bt().Z,{ref:t,textWrapperStyle:v.titleStyle,buttonStyle:v.container,title:"group"===l.type?(0,_.jsx)(tn,{inviteTarget:l,isRedesignEnabled:o,isMobile:y}):(0,_.jsx)(ln,{blockStore:n,inviteTarget:l,isRedesignEnabled:o,spaceVisibleUserMap:r,isMobile:y}),disabled:s,right:!s&&(0,_.jsx)(dn,{onClick:u,checked:i,isRedesignEnabled:o}),id:d,focused:c,onClick:u,onAuxClick:p,onMouseEnter:m,role:g,disallowTabbing:f,ignoreLocalHoverState:h})}function ln(e){let{blockStore:t,inviteTarget:n,isRedesignEnabled:o,isMobile:r,spaceVisibleUserMap:l}=e;const d=(0,s().VK)((()=>"existingUser"===n.type?(0,Pt().B)({spaceVisibleUserMap:l,userId:n.value.id,blockStore:t}):void 0),[n,l,t]),c=(0,i.useMemo)((()=>"existingUser"===n.type?{actorStore:an().U.createChildStore(t,{table:W().KJ,id:n.value.id}),avatar:void 0}:"newUser"===n.type?{actorStore:void 0,avatar:{email:n.value.email,..."slack"===n.source||"google"===n.source?{name:n.value.name,avatarUrl:n.value.avatar_url}:{name:void 0,avatarUrl:void 0}}}:void(0,N().t1)(n)),[n,t]),u=(0,a().yK)((()=>({container:(0,Te().u0)({isRedesignEnabled:o,isMobile:r}),cellMemberAvatarContainer:o?{}:{paddingTop:8,paddingBottom:8},iconBox:{position:"absolute",bottom:-3,right:-3},iconBoxImage:{background:"white",padding:2,borderRadius:"100%"}})),[r,o]);return(0,_.jsx)(Qt().Z,{isLarge:!0,...c,containerStyle:u.cellMemberAvatarContainer,avatarBadge:(()=>{const e=(()=>{if("newUser"!==n.type)return null;switch(n.source){case"slack":return Ee().Z.images.externalIntegrations.slackIconPng;case"google":return Ee().Z.images.externalIntegrations.googleGIconPng;default:return null}})();return e?(0,_.jsx)(We().Z,{type:"image_url",imageURL:e,size:18,style:u.iconBox,imageStyle:u.iconBoxImage}):null})(),spaceRole:d})}function dn(e){const{checked:t,isRedesignEnabled:n}=e,i=(0,a().yK)((e=>{const i=i=>{if(!n)return t?{background:nn().ZP.blue,borderColor:nn().ZP.blue}:{background:"transparent",borderColor:e.buttonPressedBackground};switch(i){case"default":return{background:t?e.checkboxBackground:"transparent",borderColor:t?e.checkboxBackground:e.icon.tertiary};case"hovered":return{background:t?e.checkboxHoveredBackground:e.uncheckedCheckboxHoveredBackground,borderColor:t?e.checkboxHoveredBackground:e.icon.tertiary};case"pressed":return{background:t?e.checkboxPressedBackground:e.uncheckedCheckboxPressedBackground,borderColor:t?e.checkboxPressedBackground:e.icon.tertiary};default:return(0,N().P)(i),{}}};return{circleCheckmark:{display:"flex",justifyContent:"center",alignItems:"center",width:n?18:22,height:n?18:22,borderRadius:"50%",borderStyle:"solid",borderWidth:1.75,...i("default"),marginRight:6},hovered:i("hovered"),pressed:i("pressed"),checkIcon:{height:n?9:12,width:n?9:12,color:"white"}}}),[t,n]);return(0,_.jsx)(on().Z,{onClick:e.onClick,style:i.circleCheckmark,hoveredStyle:i.hovered,pressedStyle:i.pressed,children:t&&(0,sn().e)(i.checkIcon)})}const cn=i.memo(i.forwardRef(rn));var un=()=>n(487780),pn=()=>n(850204),mn=()=>n(564256),gn=()=>n(302656),fn=()=>n(874977);function hn(e){var t,n;const{store:i,shouldShowSlackOnly:l,shouldShowGoogleOnly:d,calculatedPermissions:c,permissionItemArgs:u,tokenQuery:p,showShimmer:g,error:f,ready:h,result:y}=e,v=c.pagePermissionUIModel,x=(0,o().O7)(),b=(0,s().qz)(e.inviteTargetsStore,le().ZP),S=(0,s().VK)((()=>H().default.state.display===H().wV.Invite&&H().default.state.focus&&"message"===H().default.state.focus),[]),M=(0,s().qz)(e.menuListStore,Me().Z),j=(0,s().VK)((()=>(0,Pt().v)()),[]),C=(0,s().VK)((()=>$e().Rv()),[]),w=(0,s().VK)((()=>$e().rd()),[]),k=(0,s().VK)((()=>(0,L().wZ)()),[]),T=(0,a().yK)((e=>({sectionMenuItem:{paddingTop:0,display:"flex",flexDirection:"column",gap:2},sectionMenuItemTitle:k?{paddingLeft:Te().J4,paddingRight:Te().J4}:{},keepTypingMessage:{paddingLeft:Te().J4,paddingRight:Te().J4,marginTop:6,marginBottom:8,fontWeight:500},zeroState:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",textAlign:"center",color:e.mediumTextColor,fontSize:14,position:"relative",pointerEvents:"auto",paddingTop:10,marginTop:40,marginBottom:40},zeroStateText:{width:"70%",alignSelf:"center"},zeroStateIcon:{height:36,width:36,marginBottom:12,fill:e.mediumIconColor},arrowUpLeftIcon:{width:12,height:12,marginRight:3,marginTop:3,color:e.text.quaternary}})),[k]),[{value:I}]=(0,ut().r5)((async()=>{if(void 0===(null==y?void 0:y.inviteUsers))return{};const e=await Ke().callApi({eventName:"getSpacePermissionGroupIdsContainingMembers",environment:x,data:{spaceId:i.getSpaceId(),userIds:null==y?void 0:y.inviteUsers.map((e=>e.value.id)).filter((e=>void 0!==e))},headers:(0,pt().Bb)({cellId:void 0,spaceId:i.getSpaceId()})});return"success"===e.type?e.data.userToGroupMap:{}}),[x,i,y],{debugName:"userToPermissionGroupIds",debounce:300,throttle:1e3}),{inPageTargets:P,notInPageTargets:A,filteredImportedContacts:R}=(0,s().VK)((()=>{const{inviteUsers:e,inviteGroups:t,importedContacts:n=[]}=y??{inviteUsers:[],inviteGroups:[],importedContacts:[]},o=[...e,...t],s=[],a=[],r=new Set;o.forEach((e=>{"group"!==e.type&&r.add(e.value.email.toLowerCase());const t=Boolean(Zt().Zp({store:i,target:e})),n=function(e){const{inviteTarget:t,blockStore:n,spacePermission:i,teamMemberPermission:o,groupPermission:s,userPermissionGroupIds:a}=e,r=t.type;if("newUser"===r)return{role:"none",type:"user_permission",user_id:t.value.email};if("existingUser"===r)return Rt().uY({userId:t.value.id,store:n,userPermissionGroupIds:a??new Set});if("group"===r){const e={role:"none",type:"group_permission",group_id:t.value.group_id},a=(0,be().VP)(n),r=null==a?void 0:a.getRawMembership().find((e=>(0,yt().lF)({groupId:t.value.group_id,teamMember:e})));return[i,...a&&o&&r?[o]:[],s||{permissionItem:e,from:{table:gt().iU,blockId:n.id}}].sort(((e,t)=>mt().xm[t.permissionItem.role]-mt().xm[e.permissionItem.role]))}(0,N().t1)(r)}({inviteTarget:e,blockStore:i,spacePermission:c.mostPermissiveSpaceItem,teamMemberPermission:c.mostPermissiveAncestorTeamMemberItem,groupPermission:"group"===e.type?v.mostPermissiveGroupPermissions.find((t=>t.permissionItem.group_id===e.value.group_id)):void 0,userPermissionGroupIds:"existingUser"===e.type?new Set((null==I?void 0:I[e.value.id])??[]):void 0});if("existingUser"===e.type&&!Boolean(e.spaceRole)){let t;if(Nt().Z.state.shouldUseEdgeCache){var o;const n=null===(o=Kt().r.getData(x,{userId:e.value.id,spaceId:i.getSpaceId()}))||void 0===o?void 0:o.membership_type;t=n?(0,ft().h5)(n):void 0}else{var l;t=null===(l=j.get(e.value.id))||void 0===l?void 0:l.role}e.spaceRole=t||"not_in_space"}const d=Array.isArray(n)?n[0].permissionItem:n,u=function(e,t){const n="existingUser"===t.type?"user_permission":"group"===t.type?"group_permission":void 0;if(Array.isArray(e)){const t=e.filter((e=>e.permissionItem.type===n));if(t.length>0)return t[0].permissionItem}else if(e.type===n)return e}(n,e),p=k?!!u&&(t||mt().YX(u.role??"none")):t||mt().YX(d.role??"none"),m=k?u:d;p&&"newUser"!==e.type?m&&s.push({inviteTarget:e,permissionItem:m,mostPermissivePermissions:Array.isArray(n)?n:void 0}):"newUser"!==e.type&&a.push(e)}));const l=n.filter((e=>!r.has(e.value.email.toLowerCase())));return{inPageTargets:s,notInPageTargets:a,filteredImportedContacts:l}}),[y,i,c.mostPermissiveSpaceItem,c.mostPermissiveAncestorTeamMemberItem,v.mostPermissiveGroupPermissions,I,k,x,j]),{isValidEmail:Z,isEmailInTargets:B}=(0,s().VK)((()=>{const e=(0,me().H3)(p);return{isValidEmail:(0,me().oH)(e),isEmailInTargets:[...P.map((e=>{let{inviteTarget:t}=e;return t})),...A].some((t=>"group"!==t.type&&t.value.email===e))}}),[p,P,A]),D=(0,s().VK)((()=>b.state.inviteTargets.length>0),[b]),O=Z&&!B,V=c.showRestrictedPermissionBanner,U=!l&&!d&&A.length>0&&(0===p.length||0===(null==y?void 0:y.tokenQuery.length)),E=!l&&!d&&p.length>0&&Boolean(null==y||null===(t=y.tokenQuery)||void 0===t?void 0:t.length)&&P.length>0,F=!l&&!d&&A.length>0&&p.length>0&&Boolean(null==y||null===(n=y.tokenQuery)||void 0===n?void 0:n.length),K=R.filter((e=>"slack"===e.source)),z=R.filter((e=>"google"===e.source)),q=C&&K.length>0,G=w&&z.length>0,Y={key:"imported slack contacts",render:e=>(0,_.jsx)(wt().Z,{...e,style:T.sectionMenuItem,title:(0,_.jsx)(r()._H,{id:"shareMenuSearchRequest.importedSlackContactsSection.title",defaultMessage:"From Slack"}),loading:!h}),items:yn({filteredContacts:K,isRedesignEnabled:k,environment:x,inviteTargetsStore:b,blockStore:i,spaceVisibleUserMap:j,tokenQuery:p,menuListStore:M,importContactType:"slack"})},$={key:"imported google contacts",render:e=>(0,_.jsx)(wt().Z,{...e,style:T.sectionMenuItem,title:(0,_.jsx)(r()._H,{id:"shareMenuSearchRequest.importedGoogleContactsSection.title",defaultMessage:"From Google"}),loading:!h}),items:yn({filteredContacts:z,isRedesignEnabled:k,environment:x,inviteTargetsStore:b,blockStore:i,spaceVisibleUserMap:j,tokenQuery:p,menuListStore:M,importContactType:"google"})},X=O||!U&&!E&&!F&&!q&&!G&&!l&&!d&&p.length>0,Q=(0,s().VK)((()=>{const e=de().subscriptionDataStoreInstance.state,{currentSpaceStore:t}=nt().default.state;return t&&e?zt().hn(e).map((n=>{if(("unsubscribed_admin"===e.type||"unsubscribed_member"===e.type||"subscribed_admin"===e.type)&&e.joinedMemberIds.includes(n.userId)){const e=Ft().U6.createChildStore(t,{table:W().KJ,id:n.userId}).getEmail();return e&&(0,me().Gd)(e)}})).reduce(((e,t)=>(t&&!e.includes(t)&&e.push(t),e)),[]):[]}),[]),J=(0,Bt().Z)(i);if(f)return(0,_.jsx)(Tt().l,{loading:!h,children:(0,_.jsx)(Mt().Z,{title:(0,_.jsx)(r()._H,{id:"inviteUserModal.searchInput.errorMessage",defaultMessage:"Something went wrong"})})});if(!h&&g)return(0,_.jsx)(It().B,{areaHeight:window.innerHeight});const ee={key:"user results",render:e=>(0,_.jsx)(wt().Z,{...e,style:T.sectionMenuItem,loading:!h,title:(0,_.jsx)(r()._H,{id:"shareMenuSearchRequest.suggestedEmail.title",defaultMessage:"Keep typing an email to invite"})}),items:Tn({tokenQuery:p,possibleDomains:Q,shouldShowAutoFillEmail:X,isGuestInviteRequestRequired:J.isGuestRequestRequired,environment:x,inviteTargetsStore:b,menuListStore:M,store:i,styles:T})},te={key:"suggested",render:e=>(0,_.jsx)(wt().Z,{...e,style:T.sectionMenuItem,desktopTitleStyle:T.sectionMenuItemTitle,title:(0,_.jsx)(r()._H,{id:"shareMenuSearchRequest.suggestedSection.title",defaultMessage:"Suggested"}),loading:!h}),items:A.map(((e,t)=>({key:"newUser"===e.type?e.value.email:e.value.id,render:t=>{const n=xe().H({target:e,inviteTargetsStore:b});return(0,_.jsx)(cn,{...t,isRedesignEnabled:k,isMobile:x.device.isMobile,disabled:!1,inviteTarget:e,isInvited:n,blockStore:i,spaceVisibleUserMap:j})},action:()=>xn({inviteTarget:e,inviteTargetsStore:b,menuListStore:M,rank:t,tokenQuery:p,environment:x,type:"suggested"})})))},ne={key:"in page",render:e=>(0,_.jsx)(wt().Z,{...e,style:T.sectionMenuItem,title:k?(0,_.jsx)(r()._H,{id:"shareMenuSearchRequest.inPageSection.titleRedesign",defaultMessage:"Already invited"}):(0,_.jsx)(r()._H,{id:"shareMenuSearchRequest.inPageSection.title",defaultMessage:"In page"}),loading:!h}),items:P.map(((e,t)=>{const{inviteTarget:n,permissionItem:o,mostPermissivePermissions:s}=e,{type:a}=n;if("existingUser"===a){if(!!s&&s.length>1)return{key:n.value.id,render:e=>(0,_.jsx)(Mn,{...e,isRedesignEnabled:k,blockStore:i,inviteTarget:n,permissionItem:o,mostPermissivePermissions:s,spaceVisibleUserMap:j,permissionItemArgs:u,rank:t,tokenQuery:p,isRestricted:V}),action:()=>{}};{const e=v.mostPermissiveUserPermissions.find((e=>e.permissionItem.user_id===n.value.id));return e?{key:n.value.id,render:s=>k?(0,_.jsx)(Mn,{...s,isRedesignEnabled:k,blockStore:i,inviteTarget:n,permissionItem:o,spaceVisibleUserMap:j,permissionItemArgs:u,rank:t,tokenQuery:p,isRestricted:V}):(0,_.jsx)(bt().Z,{...s,itemMarginLeft:0,itemMarginRight:0,title:(0,_.jsx)(Gt().Z,{store:i,userPermission:e,showInherited:!0,ignoreLocalHoverState:!0,spaceVisibleUserMap:j,permissionItemArgs:u})}),action:()=>{}}:{key:n.value.id,render:e=>(0,_.jsx)(Mn,{...e,isRedesignEnabled:k,blockStore:i,inviteTarget:n,permissionItem:o,spaceVisibleUserMap:j,permissionItemArgs:u,rank:t,tokenQuery:p,isRestricted:V}),action:()=>xn({inviteTarget:n,inviteTargetsStore:b,menuListStore:M,rank:t,tokenQuery:p,environment:x,type:"in_page"})}}}if("group"===a){if(!!s&&s.length>1)return{key:n.value.id,render:s=>(0,_.jsx)(Mn,{...s,isRedesignEnabled:k,blockStore:i,inviteTarget:n,permissionItem:o,mostPermissivePermissions:e.mostPermissivePermissions,spaceVisibleUserMap:j,permissionItemArgs:u,rank:t,tokenQuery:p,isRestricted:V}),action:()=>{}};{const e=v.mostPermissiveGroupPermissions.find((e=>e.permissionItem.group_id===n.value.group_id));return e?{key:n.value.id,render:t=>(0,_.jsx)(bt().Z,{...t,itemMarginLeft:0,itemMarginRight:0,title:(0,_.jsx)(qt().Z,{store:i,groupPermission:e,spaceId:i.getSpaceId(),showInherited:!0,permissionItemArgs:u})}),action:()=>{}}:{key:n.value.id,render:e=>(0,_.jsx)(Mn,{...e,isRedesignEnabled:k,blockStore:i,inviteTarget:n,permissionItem:o,spaceVisibleUserMap:j,permissionItemArgs:u,rank:t,tokenQuery:p,isRestricted:V}),action:()=>xn({inviteTarget:n,inviteTargetsStore:b,menuListStore:M,rank:t,tokenQuery:p,environment:x,type:"in_page"})}}}(0,N().t1)(a)}))},ie={key:"not in page",render:e=>(0,_.jsx)(wt().Z,{...e,style:T.sectionMenuItem,title:p.length>0&&(k?(0,_.jsx)(r()._H,{id:"shareMenuSearchRequest.notInPageSection.titleRedesign",defaultMessage:"Not invited to page"}):(0,_.jsx)(r()._H,{id:"shareMenuSearchRequest.notInPageSection.title",defaultMessage:"Not in page"})),loading:!h}),items:A.map(((e,t)=>({key:"newUser"===e.type?e.value.email:e.value.id,render:t=>(0,_.jsx)(cn,{...t,disabled:!1,isRedesignEnabled:k,isMobile:x.device.isMobile,inviteTarget:e,isInvited:xe().H({target:e,inviteTargetsStore:b}),blockStore:i,spaceVisibleUserMap:j}),action:()=>xn({inviteTarget:e,inviteTargetsStore:b,menuListStore:M,rank:t,tokenQuery:p,environment:x,type:"not_in_page"})})))};let oe=[];if(O&&oe.push(ee),U&&oe.push(te),E&&oe.push(ne),F&&oe.push(ie),q&&oe.push(Y),G&&oe.push($),l&&(oe=[Y],0===Y.items.length))return(0,_.jsx)(wn,{styles:T,importContactType:"slack"});if(d&&(oe=[$],0===$.items.length))return(0,_.jsx)(wn,{styles:T,importContactType:"google"});if(0===oe.length){if(oe=[ee],0===p.length&&!D)return(0,_.jsx)(kn,{styles:T});if(0===p.length&&D)return(0,_.jsx)("div",{style:T.keepTypingMessage,children:(0,_.jsx)(m().Z,{isSecondaryColor:!0,isSmall:!0,children:(0,_.jsx)(r()._H,{id:"shareMenuSearchRequest.suggestedEmail.title",defaultMessage:"Keep typing an email to invite"})})})}return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)($t,{publicPermission:c.mostPermissivePublicItem}),(0,_.jsx)(St().Z,{type:St().i.Vertical,initialFocus:p.length>0?0:void 0,sections:oe,store:M,disableKeyboard:S})]})}function yn(e){const{filteredContacts:t,isRedesignEnabled:n,environment:i,inviteTargetsStore:o,blockStore:s,spaceVisibleUserMap:a,tokenQuery:r,menuListStore:l,importContactType:d}=e;return t.map(((e,t)=>({key:e.value.email,render:t=>(0,_.jsx)(cn,{...t,isRedesignEnabled:n,isMobile:i.device.isMobile,disabled:!1,inviteTarget:e,isInvited:xe().H({target:e,inviteTargetsStore:o}),blockStore:s,spaceVisibleUserMap:a}),action:()=>{xe().H({target:e,inviteTargetsStore:o})?o.setState({...o.state,inviteTargets:o.state.inviteTargets.filter((t=>"newUser"!==t.type||e.value.email!==t.value.email))}):(V().hE(i,{invite_token_query:r,selected_user_token:e,selected_user_token_rank:t,from:"share_modal_invite",subscription_tier:(0,Wt().zt)(),type:vn(d)}),o.setState({inviteTargets:[...o.state.inviteTargets,e],tokenQuery:""}),l.unsetFocus())}})))}function vn(e){return"google"===e?"google_contacts":"slack"===e?"slack":void(0,N().t1)(e)}function xn(e){const{inviteTarget:t,inviteTargetsStore:n,menuListStore:i,rank:o,tokenQuery:s,environment:a,type:r}=e;if(xe().H({target:t,inviteTargetsStore:n})){const e=n.state.inviteTargets.filter((e=>"group"===t.type&&"group"===e.type?t.value.group_id!==e.value.group_id:"existingUser"===t.type&&"existingUser"===e.type?t.value.id!==e.value.id:"newUser"!==t.type||"newUser"!==e.type||t.value.email!==e.value.email));return n.setState({...n.state,inviteTargets:e}),void i.unsetFocus()}V().hE(a,{invite_token_query:s,selected_user_token:t,selected_user_token_rank:o,from:"share_modal_invite",subscription_tier:(0,Wt().zt)(),type:r}),n.setState({inviteTargets:[...n.state.inviteTargets,t],tokenQuery:""}),i.unsetFocus()}const bn=i.forwardRef((function(e,t){const{blockStore:n,inviteTarget:r,permissionItem:l,mostPermissivePermissions:d,permissionItemArgs:c,isRedesignEnabled:u}=e,p=(0,o().O7)(),[m,g]=(0,i.useState)(!1),f=(0,s().VK)((()=>n.getSpaceId()),[n]),h=(0,s().VK)((()=>d&&d.length>0),[d]),y=(0,i.useCallback)((()=>{if(h){const e=!1===m;g(!m),e&&vt().dS(p,{share_menu_session_id:H().default.state.sessionId,type:"group",group_id:r.value.group_id})}}),[p,h,m,g,r]),v=(0,a().yK)((e=>({buttonMenuItem:(0,Te().u0)({isRedesignEnabled:u,isMobile:p.device.isMobile}),permissionRoleButton:{marginRight:-6,color:e.mediumTextColor,fontSize:12},container:{whiteSpace:"nowrap",fontWeight:S().Ue.bold},recordIcon:{marginRight:4,display:"inline-block",verticalAlign:"middle"},recordTitle:{display:"inline"},tooltip:{maxWidth:180},expandablePermissionList:{paddingLeft:16},roundedPermissionItem:{borderRadius:4,overflow:"hidden",marginRight:4}})),[p.device.isMobile,u]);return(0,_.jsx)(kt().Z,{delayThreshold:0,placement:Et().Placement.Left,textWrap:!0,style:v.tooltip,renderTooltip:()=>(0,_.jsx)(jn,{blockStore:n,blockPermissionItem:l}),render:i=>(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("div",{...i,children:(0,_.jsx)(bt().Z,{...e,buttonStyle:v.buttonMenuItem,...(0,At().Z)(e,{onClick:y}),ref:t,title:(0,_.jsx)(tn,{inviteTarget:r,isRedesignEnabled:u,isMobile:p.device.isMobile,captionOverride:h&&m?(0,_.jsx)(Cn,{}):void 0}),right:(0,_.jsx)(_t().d,{type:l.type,table:gt().iU,disabled:!0,icon:h?m?Ht().R:Vt().P:void 0,role:l.role??"none",isCurrentUser:!1,buttonStyle:v.permissionRoleButton})})}),h&&m&&(0,_.jsx)("div",{style:v.expandablePermissionList,children:null==d?void 0:d.map(((t,i)=>{const o=t.permissionItem.type;let s=null;switch(o){case"space_permission":s=(0,_.jsx)(pn().Z,{store:n,spacePermission:t,showTrustedDomainPermission:!1,trustedDomainPermission:void 0,permissionItemArgs:c,fromPermissionWrapper:"expandable_permission",isRestricted:e.isRestricted});break;case"explicit_team_permission":s=(0,_.jsx)(gn().Z,{store:n,blockTeamPermission:t,isExternalTeam:!0,permissionItemArgs:c,fromPermissionWrapper:"expandable_permission"});break;case"group_permission":s=(0,_.jsx)(qt().Z,{spaceId:f,store:n,groupPermission:t,permissionItemArgs:c,showInherited:!0,isRemovableOverride:!1,fromPermissionWrapper:"expandable_permission"});break;case"user_permission":case"explicit_team_owner_permission":case"explicit_team_guest_permission":case"public_permission":case"bot_permission":case"deleted_permission":case"restricted_permission":case"exclusive_user_permission":case"trusted_domain_permission":case"team_owner_permission":case"team_permission":break;default:(0,N().t1)(o)}return(0,_.jsx)("div",{style:v.roundedPermissionItem,children:s},i)}))})]})})})),Sn=i.forwardRef((function(e,t){const{blockStore:n,inviteTarget:r,permissionItem:l,mostPermissivePermissions:d,spaceVisibleUserMap:c,permissionItemArgs:u}=e,p=(0,o().O7)(),[m,g]=(0,i.useState)(!1),f="existingUser"===r.type?Ft().U6.createChildStore(n,{table:W().KJ,id:r.value.id}):void 0,h=(0,s().VK)((()=>"none"===r.spaceRole?(0,Pt().B)({spaceVisibleUserMap:c,userId:r.value.id,blockStore:n}):(0,Qt().K)(r.spaceRole)),[r,c,n]),y=(0,s().VK)((()=>n.getSpaceId()),[n]),v=(0,s().VK)((()=>d&&d.length>0),[d]),x=(0,i.useCallback)((()=>{const e=!1===m;g(!m),e&&vt().dS(p,{share_menu_session_id:H().default.state.sessionId,type:"user",userId:r.value.id})}),[p,m,g,r]),b=(0,a().yK)((e=>({permissionRoleButton:{marginRight:-6,color:e.mediumTextColor,fontSize:12},container:{whiteSpace:"nowrap",fontWeight:S().Ue.bold},cellMemberAvatarContainer:{paddingTop:8,paddingBottom:8},recordIcon:{marginRight:4,display:"inline-block",verticalAlign:"middle"},recordTitle:{display:"inline"},tooltip:{maxWidth:180},expandablePermissionList:{paddingLeft:Te().w5},roundedPermissionItem:{borderRadius:4,overflow:"hidden",marginRight:4}})),[]);return(0,_.jsx)(kt().Z,{delayThreshold:0,placement:Et().Placement.Left,textWrap:!0,style:b.tooltip,renderTooltip:()=>(0,_.jsx)(jn,{blockStore:n,blockPermissionItem:l}),render:i=>(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("div",{...i,children:(0,_.jsx)(bt().Z,{...e,...(0,At().Z)(e,{onClick:x}),ref:t,title:(0,_.jsx)(Qt().Z,{isLarge:!0,actorStore:f,containerStyle:b.cellMemberAvatarContainer,spaceRole:h,caption:v&&m?(0,_.jsx)(Cn,{}):void 0}),right:(0,_.jsx)(_t().d,{type:l.type,table:gt().iU,disabled:!0,icon:v?m?Ht().R:Vt().P:void 0,role:l.role??"none",isCurrentUser:!1,buttonStyle:b.permissionRoleButton})})}),v&&m&&(0,_.jsx)("div",{style:b.expandablePermissionList,children:null==d?void 0:d.map(((t,i)=>{const o=t.permissionItem.type;let s=null;switch(o){case"space_permission":s=(0,_.jsx)(pn().Z,{store:n,spacePermission:t,showTrustedDomainPermission:!1,trustedDomainPermission:void 0,permissionItemArgs:u,fromPermissionWrapper:"expandable_permission",isRestricted:e.isRestricted});break;case"explicit_team_owner_permission":s=(0,_.jsx)(fn().Z,{store:n,blockTeamOwnerPermission:t,isExternalTeam:!0,permissionItemArgs:u,fromPermissionWrapper:"expandable_permission"});break;case"explicit_team_permission":s=(0,_.jsx)(gn().Z,{store:n,blockTeamPermission:t,isExternalTeam:!0,permissionItemArgs:u,fromPermissionWrapper:"expandable_permission"});break;case"explicit_team_guest_permission":s=(0,_.jsx)(mn().Z,{store:n,blockTeamGuestPermission:t,isExternalTeam:!0,permissionItemArgs:u,fromPermissionWrapper:"expandable_permission"});break;case"group_permission":s=(0,_.jsx)(qt().Z,{store:n,spaceId:y,groupPermission:t,permissionItemArgs:u,showInherited:!0,isRemovableOverride:!1,fromPermissionWrapper:"expandable_permission"});break;case"user_permission":s=(0,_.jsx)(Gt().Z,{store:n,userPermission:t,permissionItemArgs:u,spaceVisibleUserMap:c,showInherited:!0,isRemovableOverride:!1,fromPermissionWrapper:"expandable_permission"});break;case"public_permission":case"bot_permission":case"deleted_permission":case"restricted_permission":case"exclusive_user_permission":case"trusted_domain_permission":case"team_owner_permission":case"team_permission":break;default:(0,N().t1)(o)}return(0,_.jsx)("div",{style:b.roundedPermissionItem,children:s},i)}))})]})})})),Mn=i.forwardRef((function(e,t){const{inviteTarget:n}=e,i=n.type,o=(0,s().VK)((()=>(0,L().wZ)()),[]);switch(i){case"group":return o?(0,_.jsx)(un().ZP,{...e,inviteTarget:n}):(0,_.jsx)(bn,{...e,ref:t,inviteTarget:n});case"existingUser":return o?(0,_.jsx)(un().ZP,{...e,inviteTarget:n}):(0,_.jsx)(Sn,{...e,ref:t,inviteTarget:n});default:(0,N().t1)(i)}}));function jn(e){const{blockStore:t,blockPermissionItem:n}=e,i=(0,o().O7)(),l=(0,s().VK)((()=>nt().default.state.currentSpaceStore),[]),d=(0,s().VK)((()=>{if(l)return(0,E().Wd)(i,l)}),[i,l]),c=(0,s().VK)((()=>{const e=n.type;if("explicit_team_permission"===e||"explicit_team_owner_permission"===e||"explicit_team_guest_permission"===e){return Ft().zX.createChildStore(t,{table:ht().e0,id:n.team_id})}}),[t,n]),u=(0,s().VK)((()=>null==c?void 0:c.getIcon()),[c]),p=(0,a().yK)((()=>({container:{fontWeight:S().Ue.bold,...S().Yu},recordIcon:{marginRight:4,display:"inline-block",verticalAlign:"middle"},recordTitle:{display:"inline"}})),[]),m=n.type;return"space_permission"===m?(0,_.jsx)(r()._H,{id:"shareMenu.searchResult.spacePermission.tooltip",defaultMessage:"Everyone at {spaceIconAndName} has access.",values:{spaceIconAndName:(0,_.jsxs)("span",{style:p.container,children:[d&&(0,_.jsx)(jt().Z,{disabled:!0,icon:d,isEmptyPage:!1,size:12,style:p.recordIcon}),l&&(0,_.jsx)(Ct().Z,{store:l,style:p.recordTitle})]})}}):"explicit_team_owner_permission"===m?(0,_.jsx)(r()._H,{id:"shareMenu.searchResult.teamPermission.tooltip",defaultMessage:"Teamspace owners of {teamIconAndName} have access.",values:{teamIconAndName:(0,_.jsxs)("span",{style:p.container,children:[u&&(0,_.jsx)(jt().Z,{disabled:!0,icon:u,isEmptyPage:!1,size:12,style:p.recordIcon}),c&&(0,_.jsx)(Ct().Z,{store:c,style:p.recordTitle})]})}}):"explicit_team_permission"===m?(0,_.jsx)(r()._H,{id:"shareMenu.searchResult.teamMemberPermission.tooltip",defaultMessage:"Teamspace members of {teamIconAndName} have access.",values:{teamIconAndName:(0,_.jsxs)("span",{style:p.container,children:[u&&(0,_.jsx)(jt().Z,{disabled:!0,icon:u,isEmptyPage:!1,size:12,style:p.recordIcon}),c&&(0,_.jsx)(Ct().Z,{store:c,style:p.recordTitle})]})}}):"explicit_team_guest_permission"===m?(0,_.jsx)(r()._H,{id:"shareMenu.searchResult.teamGuestPermission.tooltip",defaultMessage:"Teamspace guests of {teamIconAndName} have access.",values:{teamIconAndName:(0,_.jsxs)("span",{style:p.container,children:[u&&(0,_.jsx)(jt().Z,{disabled:!0,icon:u,isEmptyPage:!1,size:12,style:p.recordIcon}),c&&(0,_.jsx)(Ct().Z,{store:c,style:p.recordTitle})]})}}):"group_permission"===m?(0,_.jsx)(r()._H,{id:"shareMenu.searchResult.groupPermission.tooltip",defaultMessage:"This group has access."}):"user_permission"===m||"exclusive_user_permission"===m||"public_permission"===m||"trusted_domain_permission"===m||"restricted_permission"===m||"deleted_permission"===m||"team_permission"===m||"team_owner_permission"===m||"bot_permission"===m?(0,_.jsx)(_.Fragment,{children:mt().YX(n.role??"none")&&(0,_.jsx)(r()._H,{id:"shareMenu.searchResult.userPermission.tooltip",defaultMessage:"This user has access"})}):void(0,N().t1)(m)}function Cn(){return(0,_.jsx)(r()._H,{id:"shareMenu.inPageSearchResult.caption",defaultMessage:"Permission from"})}function wn(e){const{styles:t,importContactType:n}=e,i="google"===n?"Google account":"Slack workspace";return(0,_.jsxs)("div",{style:t.zeroState,children:[(0,Ut()._)(t.zeroStateIcon),(0,_.jsxs)("div",{style:t.zeroStateText,children:[(0,_.jsx)("div",{style:{fontWeight:S().Ue.semibold,marginBottom:4},children:(0,_.jsx)(r()._H,{id:"shareMenuSearchRequest.noImportedContacts.title",defaultMessage:"No contacts found"})}),(0,_.jsx)("div",{children:(0,_.jsx)(r()._H,{id:"shareMenuSearchRequest.noImportedContacts.text",defaultMessage:"Try connecting a different {externalIntegrationCopy} or typing an email address",values:{externalIntegrationCopy:i}})})]})]})}function kn(e){const{styles:t}=e;return(0,_.jsxs)("div",{style:t.zeroState,children:[(0,Lt().C)(t.zeroStateIcon),(0,_.jsxs)("div",{style:t.zeroStateText,children:[(0,_.jsx)("div",{style:{fontWeight:S().Ue.semibold,marginBottom:4},children:(0,_.jsx)(r()._H,{id:"shareMenuSearchRequest.noSuggestions.title",defaultMessage:"Members and guests will appear here"})}),(0,_.jsx)("div",{children:(0,_.jsx)(r()._H,{id:"shareMenuSearchRequest.noSuggestions.text",defaultMessage:"Try inviting someone with their email address or importing contacts"})})]})]})}function _n(e){let{tokenQuery:t,possibleDomains:n,shouldShowAutoFillEmail:i}=e;const o=(0,ct().ZP)(t,function(e,t,n){return n?Array.from(new Set([...t,"gmail.com","yahoo.com","outlook.com","hotmail.com"])).map(((t,n)=>({tokenQuery:`${e.split("@")[0]}@${t}`,weight:n}))).slice(0,3):[{tokenQuery:e,weight:0}]}(t,n,i),(e=>e.tokenQuery));return 0===o.length?[{tokenQuery:t,weight:0}]:o}function Tn(e){let{tokenQuery:t,possibleDomains:n,isGuestInviteRequestRequired:i,shouldShowAutoFillEmail:o,environment:s,inviteTargetsStore:a,menuListStore:l,store:d,styles:c}=e;return _n({tokenQuery:t,possibleDomains:n,shouldShowAutoFillEmail:o}).map(((e,n)=>({key:e.tokenQuery,render:t=>(0,_.jsx)(bt().Z,{icon:(0,Dt().a)({width:24,height:24}),title:(0,_.jsx)(In,{tokenQuery:e.tokenQuery,shouldShowAutofillEmail:o,isGuestInviteRequestRequired:i}),caption:i?(0,_.jsx)(r()._H,{id:"shareMenuSearchRequest.requestNewUser.buttonItem.caption",defaultMessage:"Workspace owners are required to view and approve guest invites"}):void 0,right:(0,_.jsx)(_.Fragment,{children:o?(0,Ot().y)(c.arrowUpLeftIcon):null}),rightStyle:{marginRight:4},...t}),action:async()=>{const i=(0,me().H3)(e.tokenQuery);if(!(0,me().oH)(i)){const t={type:"invalidUser",value:{text:e.tokenQuery}};return void(xe().H({target:t,inviteTargetsStore:a})||a.setState({inviteTargets:[...a.state.inviteTargets,t],tokenQuery:""}))}const o=await xt().M5(s,[i]);if(!o.length)return;const r=o[0];xe().H({target:r,inviteTargetsStore:a})||(V().hE(s,{invite_token_query:t,selected_user_token:r,selected_user_token_rank:n,from:"share_modal_invite",subscription_tier:(0,Wt().zt)(),type:"autofill"}),a.setState({inviteTargets:[...a.state.inviteTargets,r],tokenQuery:""}),l.unsetFocus())}})))}function In(e){const{tokenQuery:t,shouldShowAutofillEmail:n,isGuestInviteRequestRequired:i}=e;return i?(0,_.jsx)(r()._H,{id:"shareMenuSearchRequest.requestNewUser.buttonItem",defaultMessage:"Request {tokenQuery} as a guest",values:{tokenQuery:t}}):n?(0,_.jsx)(r()._H,{id:"shareMenuSearchRequest.inviteNewUser.buttonItem.v1",defaultMessage:"”{tokenQuery}”",values:{tokenQuery:t}}):(0,_.jsx)(r()._H,{id:"shareMenuSearchRequest.inviteNewUser.buttonItem",defaultMessage:"Invite {tokenQuery}",values:{tokenQuery:t}})}const Pn=function(e){const t=(0,o().O7)(),n=(0,r().YB)(),[a,l]=(0,i.useState)(!0),d=(0,s().VK)((()=>e.inviteTargetsStore.state.tokenQuery),[e.inviteTargetsStore]),c=(0,s().VK)((()=>{if(e.shouldShowSlackOnly||e.shouldShowGoogleOnly)return{userLimit:0,botLimit:0,groupLimit:0,importContactLimit:e.sectionRenderLimit};const t=it().default.completeSlackAuthentications.state.length>0&&$e().Rv(),n=it().default.externalAuthentications.state.filter((e=>e.integration_id===Ne().lT)).length>0&&$e().rd();return{userLimit:e.sectionRenderLimit,botLimit:0,groupLimit:e.shouldShowGroups?e.sectionRenderLimit:0,importContactLimit:t||n?e.sectionRenderLimit:0}}),[e.sectionRenderLimit,e.shouldShowGroups,e.shouldShowSlackOnly,e.shouldShowGoogleOnly]),[{value:u,status:p}]=(0,ut().r5)((async()=>({...await xt().jL({query:d,sectionLimit:c,membersOnly:e.membersOnly,environment:t,intl:n}).finally((()=>l(!1))),tokenQuery:d})),[t,n,e.membersOnly,d,c],{debounce:40});return(0,_.jsx)(hn,{...e,tokenQuery:d,showShimmer:a,ready:"pending"!==p&&"idle"!==p,error:"rejected"===p,result:u})};function An(e){const t=(0,o().O7)(),n=(0,s().qz)(e.inviteTargetsStore,le().ZP),a=(0,s().VK)((()=>n.state.inviteTargets),[n]),{display:r,source:l,focus:d,emailMessage:c}=(0,s().VK)((()=>{const{display:e}=H().default.state;return e===H().wV.Invite?H().default.state:{display:e,source:void 0,focus:void 0,emailMessage:""}}),[]),u=(0,s().VK)((()=>nt().default.state.currentSpaceStore),[]),p=r===H().wV.Invite&&a.length>0,m=(0,s().VK)((()=>l===H().T5.Notion&&0===a.length&&(0,$e().Rv)()),[a.length,l]),g=(0,s().Kw)(it().default.completeSlackAuthentications),f=(0,s().VK)((()=>l===H().T5.Notion&&0===a.length&&(0,$e().rd)()),[a.length,l]),h=(0,s().VK)((()=>(0,L().wZ)()),[]),[y,v]=(0,i.useState)(!1),x=p&&!m,b=(0,i.useCallback)((()=>{n.reset()}),[n]);(0,i.useEffect)((()=>{if(u&&!y&&m){for(const e of g)Ke().callApi({eventName:"loadContacts",environment:t,data:{botId:e.id,spaceId:u.id,integrationId:Ne().nO,importContactType:"slack"}}).catch((e=>{}));v(!0)}}),[m]);const S=Dn({scrollerMarginBottom:x?lt:0});return r!==H().wV.Invite?null:(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(Ge().Z,{type:et().Z.Y,style:S.scroller,children:(0,_.jsx)(Pn,{inviteTargetsStore:n,store:e.store,menuListStore:e.menuListStore,shouldShowGroups:!0,shouldShowSlackOnly:l===H().T5.Slack,shouldShowGoogleOnly:l===H().T5.Google,membersOnly:!1,sectionRenderLimit:10,calculatedPermissions:e.calculatedPermissions,permissionItemArgs:e.permissionItemArgs})}),(0,_.jsx)(Rn,{shouldShowSlackImportContactsButton:m,shouldShowGoogleImportContactsButton:f,emailMessage:c,inviteTargetsStore:n,isRedesignEnabled:h,emailMessageOpen:x,flowId:e.flowId}),(0,_.jsx)(dt,{open:p&&!m,focus:d===H().Sw.Message,value:c,onFocus:()=>{l&&r===H().wV.Invite&&H().default.setState({...H().default.state,focus:H().Sw.Message,tab:H().XF.Share,display:r,source:l,emailMessage:c})},onChange:e=>{H().default.setState({...H().default.state,focus:d,tab:H().XF.Share,display:r,source:l,emailMessage:e.target.value})},onCancel:async()=>{await ot().zd({environment:t,inviteTargetsStore:n})&&(ot().a6(t),b())},maxLength:1e3})]})}function Rn(e){const{shouldShowSlackImportContactsButton:t,shouldShowGoogleImportContactsButton:n,emailMessage:i,inviteTargetsStore:o,isRedesignEnabled:s,emailMessageOpen:a,flowId:r}=e,l=Dn({scrollerMarginBottom:a?lt:0}),d=(0,Je().ph)(),c=e=>{H().default.setState({...H().default.state,tab:H().XF.Share,display:H().wV.Invite,focus:H().Sw.Search,source:e,emailMessage:i}),o.setState({...o.state,tokenQuery:""})};if(t&&n){const e=(0,Qe().e)({onClickAuthenticated:c,hideChevronIcon:s,containerStyle:d.importListButtonContainer,buttonStyle:d.importListButton,flowId:r});return(0,_.jsx)(ze().ZP,{popupType:tt().k.Popup,alignmentToOrigin:ze().vR.Start,placementToOrigin:ze().pO.Left,render:()=>(0,_.jsx)(Ye().Z,{importListItems:e}),originGap:12,renderOrigin:e=>(0,_.jsx)("div",{style:l.importContactsContainer,children:(0,_.jsx)(qe().Z,{style:l.importContactsButton,onClick:e.onClick,children:(0,_.jsx)("div",{style:d.labelContainer,children:s?(0,_.jsx)(Zn,{}):(0,_.jsx)(Bn,{})})})})})}return t?(0,_.jsx)(Fe().hF,{onClickAuthenticated:()=>c(H().T5.Slack),title:s?(0,_.jsx)(Zn,{}):(0,_.jsx)(Bn,{}),containerStyle:l.importContactsContainer,buttonStyle:s?l.importContactsButtonV2:l.importContactsButton,from:"share_menu",inviteOrigin:"page_share_modal",flowId:r,loadContacts:!0,hideChevronIcon:s}):null}function Zn(){const e=(0,a().yK)((e=>({integrationName:{display:"flex"},importContactsButtonTitle:{display:"flex",alignItems:"center",color:e.regularTextColor,gap:8},arrowDownIcon:{height:20,width:20}})),[]);return(0,_.jsxs)("div",{style:e.importContactsButtonTitle,children:[(0,_.jsx)("div",{style:e.integrationName,children:Xe(e.arrowDownIcon)}),(0,_.jsx)(r()._H,{defaultMessage:"Import contacts",id:"importContactsButton.importContacts.label"})]})}function Bn(){const e=(0,a().yK)((()=>({integrationName:{display:"flex"},integrationIcon:{marginRight:4}})),[]),t=(0,_.jsxs)("div",{style:e.integrationName,children:[(0,_.jsx)(We().Z,{type:"image_url",imageURL:Ee().Z.images.externalIntegrations.slackIconPng,size:18,imageStyle:e.integrationIcon}),(0,_.jsx)(r()._H,{defaultMessage:"Slack",id:"importContactsButton.integrationName"})]});return(0,_.jsx)(r()._H,{defaultMessage:"Add contacts from {integrationNameWithLogo}",id:"importContactsButton.integrationButton.label",values:{integrationNameWithLogo:t}})}function Dn(e){let{scrollerMarginBottom:t}=e;return(0,a().yK)((e=>({scroller:{flexGrow:1,marginBottom:t},importContactsContainer:{height:36,bottom:0,width:"100%",backgroundColor:e.modalBackground,pointerEvents:"all",transitionProperty:"max-height",transitionDuration:"0.3s",boxShadow:"0px -4px 4px rgba(0, 0, 0, 0.03)",padding:3},importContactsButton:{width:"100%",paddingTop:15,paddingBottom:15,paddingLeft:9,gap:8},importContactsButtonV2:{width:"100%",paddingTop:15,paddingBottom:15,paddingLeft:9,gap:8,fill:e.regularTextColor}})),[t])}var Ln=()=>n(370005),On=()=>n(480089),Hn=()=>n(921981),Vn=()=>n(631842),Un=()=>n(754918),En=()=>n(830581),Nn=()=>n(906651),Fn=()=>n(779522),Kn=()=>n(983653);function zn(e){const{email:t}=e;return(0,_.jsx)(ee().Z,{avatar:{email:t},size:28})}function Wn(e){const{children:t}=e,n=(0,a().yK)((()=>({wrapper:{position:"relative"},shield:{position:"absolute",left:17,top:18}})),[]);return(0,_.jsxs)("div",{style:n.wrapper,children:[t,(0,_.jsx)("div",{style:n.shield,children:(0,_.jsx)(Be().y,{iconGroup:Kn().t,colorName:"secondary",variantName:"mini"})})]})}function qn(e){const{rows:t,internalDomains:n}=e,i=(0,a().yK)((e=>({inviteTargetList:{background:e.surface.wash,borderRadius:12,maxHeight:227,overflowY:"auto",padding:"12px 16px",width:"100%"}})),[]);return(0,_.jsx)(Ge().Z,{type:et().Z.Y,style:i.inviteTargetList,children:(0,_.jsx)(q().jX,{gap:16,children:t.map((e=>{const{type:t}=e;switch(t){case"new":return(0,_.jsx)(Gn,{email:e.email,internalDomains:n},e.email);case"existing":return(0,_.jsx)(Yn,{userStore:e.userStore,internalDomains:n},e.userStore.id);default:(0,N().t1)(t)}}))})})}function Gn(e){const{email:t,internalDomains:n}=e,i=(0,ge().is)(t,n);return(0,_.jsx)($n,{avatar:i?(0,_.jsx)(Wn,{children:(0,_.jsx)(zn,{email:t})}):(0,_.jsx)(zn,{email:t}),name:t,email:t})}function Yn(e){const{userStore:t,internalDomains:n}=e,i=(0,r().YB)(),{name:o,email:a}=(0,s().VK)((()=>({name:t.getDisplayName(i),email:t.getEmail()})),[t,i]);if(!o||!a)return null;const l=(0,ge().is)(a,n);return(0,_.jsx)($n,{avatar:l?(0,_.jsx)(Wn,{children:(0,_.jsx)(ee().Z,{userStore:t,size:28})}):(0,_.jsx)(ee().Z,{userStore:t,size:28}),name:o,email:a})}function $n(e){const{avatar:t,name:n,email:i}=e;return(0,_.jsxs)(q().jX,{direction:"row",gap:10,align:"center-left",children:[t,(0,_.jsxs)(q().jX,{gap:2,children:[(0,_.jsx)(G().q,{styleName:"Body-14px/Medium",children:n}),(0,_.jsx)(G().q,{styleName:"Caption-12px/Regular",colorName:"secondary",children:i})]})]})}function Xn(e){const{type:t}=e;switch(t){case"new":return e.email;case"existing":return e.userStore.getEmail();default:(0,N().t1)(t)}}function Qn(e){const{inviteUserListRows:t,spaceStore:n,spaceUserStore:a,onClickAddMembers:l,onClickManageGuests:d}=e,c=(0,o().O7)(),u=(0,r().YB)(),[p,m]=(0,s().VK)((()=>[n.id,n.getName()]),[n]),g=(0,s().VK)((()=>null==a?void 0:a.getUserId()),[a]),f=(0,s().VK)((()=>{var e;return(null===(e=Fn().Z.getData(c,{spaceId:p}))||void 0===e?void 0:e.filter((e=>e.hasGuests)).map((e=>e.domain)))??[]}),[c,p]),h=(0,Ce().oo)({name:"internal_guests",spaceId:p,userId:g,amount:0}),y=(0,i.useCallback)((()=>{const e=t.map(Xn).filter(N().$K);l(e)}),[t,l]);return h&&f?(0,_.jsx)(he().Z,{debugName:"AddAsMembersModalContent",capture:!0,onEnter:y,children:(0,_.jsx)(En().sR,{header:(0,_.jsx)(En().vI,{iconAndTitle:(0,_.jsx)(En().kC,{iconGroup:Un().G,iconColorName:"secondary",title:u.formatMessage(ei.title,{spaceName:m,guestLimit:h.limit.total})}),description:u.formatMessage(ei.description,{domain:f[0].url,p:e=>(0,_.jsx)(G().q,{colorName:"uiBluePrimary",children:(0,_.jsx)("p",{children:e})})})}),footer:(0,_.jsx)(Jn,{rowCount:t.length,onClickAddMembers:y,onClickManageGuests:d}),children:(0,_.jsx)(qn,{rows:t,internalDomains:f})})}):null}function Jn(e){const{rowCount:t,onClickAddMembers:n,onClickManageGuests:i}=e,o=(0,r().YB)(),s=o.formatMessage(ei.addMember,{rowCount:t});return(0,_.jsxs)(q().jX,{gap:16,children:[(0,_.jsxs)(q().jX,{gap:8,children:[(0,_.jsx)(Nn().Z,{"aria-label":s,onClick:n,style:{height:32},children:s}),(0,_.jsx)(Y().Z,{"aria-label":o.formatMessage(ei.manageGuestsInSettings),onClick:i,children:o.formatMessage(ei.manageGuestsInSettings)})]}),(0,_.jsx)("div",{style:{textAlign:"center"},children:(0,_.jsx)(G().q,{styleName:"Caption-12px/Regular",colorName:"secondary",children:o.formatMessage(ei.billingNotice)})})]})}const ei=(0,r().vU)({title:{id:"addAsMembersModal.title",defaultMessage:"{spaceName} is over the guest limit of {guestLimit}"},description:{id:"addAsMembersModal.description",defaultMessage:"Shares to work email domains ending with ‘@{domain}’ must be added as members with access to your entire workspace."},upgradeButton:{id:"addAsMembersModal.addMembersButton",defaultMessage:"{guestCount, plural, one {Add as member} other {Add as {guestCount} members}}"},addMember:{id:"addAsMembersModal.addMember",defaultMessage:"Add {rowCount, plural, one {member} other {{rowCount} members}}"},manageGuestsInSettings:{id:"addAsMembersModal.manageGuestsInSettings",defaultMessage:"Manage guests in settings"},billingNotice:{id:"addAsMembersModal.billingNotice",defaultMessage:"Each new member will be billed as an additional seat"}});n(821057);var ti=()=>n(839002),ni=()=>n(102182),ii=()=>n(799891),oi=()=>n(578292),si=()=>n(720866),ai=()=>n(308186),ri=()=>n(784234),li=()=>n(527278);const di=(0,r().vU)({nonAdminCannotEditPermissions:{defaultMessage:"You cannot give this person access to this page. Ask your admin to do this for you.",id:"permissions.nonAdminCannotEditPermissions.message"}});async function ci(e){const{environment:t,email:n}=e,i=await Ke().callApi({eventName:"findUser",environment:t,data:{email:n}});if("success"===i.type){const e=i.data;if(e.value)return e.value.value.id}return await async function(e){const{environment:t,email:n}=e,i=await Ke().callApi({eventName:"createEmailUser",environment:t,data:{email:n,preferredLocaleOrigin:"inferred_from_inviter",preferredLocale:(0,oi().E2)(li().Z.getIntl())}});if("failed"===i.type)throw i.error;return i.data.userId}({environment:t,email:n})}async function ui(e){const{blockPermissionItem:t,blockStore:n,environment:i,metadata:o,sudoModeStore:s}=e;await ri().pk({environment:i,store:n,sudoModeStore:s,permissionItems:[t],invite:o,skipGuestLimitValidation:!0})}var pi=()=>n(343308);async function mi(e){const{environment:t,intl:n,internalDomains:i,destination:o,invites:s,metadata:a,sudoModeStore:r,contextualInviteStore:l}=e,d=await async function(e){const{environment:t,invites:n,destination:i,metadata:o,sudoModeStore:s,contextualInviteStore:a}=e,r=(await(0,ti().qd)(n,20,(e=>async function(e){const{invite:t}=e,{defaultAddability:n}=t;switch(n.type){case"none":break;case"member":return await async function(e){const{environment:t,invite:n,destination:i,metadata:o}=e,{invitee:s,defaultAddability:a}=n;if(void 0===s)throw new Error("Expected invite.invitee to be defined");const{email:r}=s,{blockRole:l,blockStore:d,spaceRole:c,spaceStore:u}=i,{inviteOrigin:p}=o,m=await ci({environment:t,email:r});if(!m)return;const g={type:"user_permission",role:c,user_id:m},f={type:"user_permission",role:l,user_id:m},h=await async function(e){const{blockPermissionItem:t,blockStore:n,environment:i,inviteOrigin:o,spacePermissionItem:s,spaceStore:a,sudoModeStore:r}=e;if(t.user_id!==s.user_id)throw new Error("User IDs for block and space permission items must match");if(!a.isTeamsEnabled()&&!(await F().HD({environment:i,flowId:"",trackCreateTeamComplete:!1})))return!1;try{await ri().pk({environment:i,store:a,sudoModeStore:r,permissionItems:[s],invite:{inviteOrigin:o}}),await ri().pk({environment:i,store:n,sudoModeStore:r,permissionItems:[t],skipGuestLimitValidation:!0,invite:{inviteOrigin:o}})}catch(l){return(0,si().t)(l).message.toLowerCase().includes("non-admin cannot edit permissions")&&(ai().UW(li().Z.formatMessage(di.nonAdminCannotEditPermissions)),ii().log({level:"info",from:"createMember",type:"nonAdminCannotEditPermissionsButInviteSent",data:{miscDataToConvertToString:{message:"Member invited a previously removed member to a page, invite was sent but access to space and page not granted.",spaceId:a.id,blockId:n.id,actorId:i.currentUser.id,inviteeId:s.user_id}}})),!1}return!0}({blockPermissionItem:f,blockStore:d,environment:t,inviteOrigin:p,spacePermissionItem:g,spaceStore:u});if(!h)return;const y="member"===a.type&&"over_internal_guest_limit"===a.reason;return{type:"createdMember",invite:n,inviteeUserId:m,spacePermissionItem:g,blockPermissionItem:f,wasInternalDomainEnforced:y}}(e);case"member_request":return await async function(e){const{environment:t,invite:n,destination:i,metadata:o}=e,{invitee:s,internalDomain:a}=n;if(void 0===s)throw new Error("Expected invite.invitee to be defined");const{email:r}=s,{spaceStore:l}=i,{inviteMessage:d}=o,c=await ci({environment:t,email:r});if(!c)return;await async function(e){const{environment:t,spaceStore:n,inviteeUserId:i,inviteMessage:o}=e;if(n.canAdmin())throw new Error("This operation is not valid for workspace owners, because member requests are immediately approved when created by a workspace owner. Use createMember instead.");const s=await Ke().callApi({eventName:"requestAccess",environment:t,data:{type:"actor-to-space",forActorId:i,spaceId:n.id,message:o}});if("failed"===s.type)throw s.error}({environment:t,inviteeUserId:c,inviteMessage:d,spaceStore:l});const u=void 0!==a;return{type:"createdMemberRequest",invite:n,wasInternalDomainEnforced:u}}(e);case"guest":case"guest_page_add":case"member_page_add":return await async function(e){const{environment:t,invite:n,destination:i,metadata:o,sudoModeStore:s}=e,{invitee:a}=n;if(void 0===a)throw new Error("Expected invite.invitee to be defined");const{email:r}=a,{blockRole:l,blockStore:d}=i,c=await ci({environment:t,email:r});if(!c)return;const u={type:"user_permission",role:l,user_id:c};return await ui({blockPermissionItem:u,blockStore:d,environment:t,metadata:o,sudoModeStore:s}),{type:"addedUserPermission",invite:n,inviteeUserId:c,blockPermissionItem:u}}(e);case"guest_request":return await async function(e){const{environment:t,invite:n,destination:i,metadata:o}=e;if(void 0===n.invitee)throw new Error("Expected invite.invitee to be defined");const{email:s}=n.invitee,{blockRole:a,blockStore:r,spaceStore:l}=i,{inviteMessage:d}=o,c={id:r.id,spaceId:l.id},u=await ci({environment:t,email:s});if(!u)return;return await async function(e){const{block:t,blockRole:n,environment:i,inviteeUserId:o,inviteMessage:s}=e,a=await Ke().callApi({eventName:"requestAccess",environment:i,data:{type:"guest-invite-request",block:t,forActorId:o,message:void 0,attributes:{role:n,inviteMessage:s}}});if("failed"===a.type)throw a.error}({block:c,blockRole:a,environment:t,inviteeUserId:u,inviteMessage:d}),{type:"createdGuestRequest",invite:n}}(e);case"group":return await async function(e){const{environment:t,invite:n,destination:i,metadata:o,sudoModeStore:s}=e,{blockRole:a,blockStore:r}=i;if("group"!==n.inviteTarget.type)throw new Error("Expected invite.inviteTarget to be a group");const l=n.inviteTarget.value,d={type:"group_permission",role:a,group_id:l.group_id};return await ui({blockPermissionItem:d,blockStore:r,environment:t,metadata:o,sudoModeStore:s}),{type:"addedGroupPermission",invite:n,group:l,blockPermissionItem:d}}(e);default:(0,N().t1)(n)}}({environment:t,invite:e,destination:i,metadata:o,sudoModeStore:s})))).filter(N().$K);if(a){const e={};for(const t of r)"addedUserPermission"!==t.type&&"createdMember"!==t.type||"group"===t.invite.inviteTarget.type||(e[t.invite.inviteTarget.value.email]=t.inviteeUserId);a.setState({...a.state,invitedEmailToUserIdMap:e})}return r}({destination:o,environment:t,invites:s,metadata:a,sudoModeStore:r,contextualInviteStore:l});(0,pi().CC)({destination:o,environment:t,internalDomains:i,inviteResults:d,metadata:a});const c=(0,L().wZ)();d.length>0&&(c?ni().oV({label:gi({invites:s,intl:n})}):ni().oV({label:n.formatMessage({id:"shareMenu.inviteResultsToast.label",defaultMessage:"Successfully sent"})}))}function gi(e){var t;const{invites:n,intl:i}=e,o=null===(t=n[0].invitee)||void 0===t?void 0:t.email;o||i.formatMessage({id:"shareMenu.inviteResultsToast.label",defaultMessage:"Successfully sent"});const s=n.length-1;return n.filter((e=>{var t;return"member"!==(null===(t=e.invitee)||void 0===t?void 0:t.currentRole)})).length===n.length?s<=0?i.formatMessage({id:"shareMenu.inviteResultsToast.inviteGuest.label",defaultMessage:"Invite sent to {firstInvitee}"},{firstInvitee:o}):i.formatMessage({id:"shareMenu.inviteResultsToast.inviteGuests.label",defaultMessage:"Invite sent to {firstInvitee} and {numAdditionalInvites, plural, one {{numAdditionalInvites} other person} other {{numAdditionalInvites} others}}"},{firstInvitee:o,numAdditionalInvites:s}):s<=0?i.formatMessage({id:"shareMenu.inviteResultsToast.shareWithMember.label",defaultMessage:"Shared with {firstInvitee}"},{firstInvitee:o}):i.formatMessage({id:"shareMenu.inviteResultsToast.shareWithMultiple.label",defaultMessage:"Shared with {firstInvitee} and {numAdditionalInvites, plural, one {{numAdditionalInvites} other person} other {{numAdditionalInvites} others}}"},{firstInvitee:o,numAdditionalInvites:s})}function fi(e){e.reset(),H().default.setState({...H().default.state,tab:H().XF.Share,display:H().wV.MainShareMenu,source:H().Xd.ShareTopbarButton})}async function hi(e){const{addAsMembersResult:t,destination:n,environment:i,internalDomains:o,intl:s,invites:a,inviteTargetsStore:r,metadata:l}=e;var d;t&&("manageGuests"===t?(d="members",Oe().default.setState({currentTab:d,defaultSubtab:void 0,highlightedSetting:void 0,open:!0,openedFrom:"share_menu"})):"addMembers"===t?(fi(r),await mi({destination:n,environment:i,internalDomains:o,invites:a,intl:s,metadata:l})):(0,N().t1)(t))}async function yi(e){const{destination:t,contextualInviteStore:n,defaultAddabilities:i,metadata:o,invites:s,environment:a,internalDomains:r,intl:l,inviteTargetsStore:d,spaceStore:c,spaceUserStore:u,sudoModeStore:p}=e,m=s.map((e=>e.defaultAddability)).some((e=>"member"===e.type&&"over_internal_guest_limit"===e.reason)),g=s.map((e=>e.defaultAddability)).some((e=>["guest","guest_request","guest_page_add"].includes(e.type)));if(m){const e=s.map((e=>function(e){const{inviteTarget:t,environment:n}=e,{type:i}=t;switch(i){case"existingUser":return{type:"existing",userStore:new(Ft().U6)(n,{table:W().KJ,id:t.value.id})};case"newUser":return{type:"new",email:t.value.email};case"group":return;default:(0,N().t1)(i)}}({environment:a,inviteTarget:e.inviteTarget}))).filter(N().$K),n=await async function(e){const{inviteUserListRows:t,spaceStore:n,spaceUserStore:i}=e;return await Vn().o.showAsyncModal((e=>(0,_.jsx)(Hn().c,{isOpen:e.isOpen,onDismiss:e.onDismiss,onClosed:e.onClosed,areaConstraint:{width:{type:"fixed",length:400}},render:()=>(0,_.jsx)(Qn,{inviteUserListRows:t,spaceStore:n,spaceUserStore:i,onClickAddMembers:()=>{e.resolve("addMembers")},onClickManageGuests:()=>{e.resolve("manageGuests")}})})))}({inviteUserListRows:e,spaceStore:c,spaceUserStore:u});await hi({addAsMembersResult:n,destination:t,environment:a,internalDomains:r,intl:l,invites:s,inviteTargetsStore:d,metadata:o})}else{fi(d),await mi({destination:t,environment:a,internalDomains:r,intl:l,invites:s,metadata:o,sudoModeStore:p,contextualInviteStore:n});const e=s.map((e=>e.invitee)).filter(N().$K);g&&function(e){const{contextualInviteStore:t,defaultAddabilities:n,environment:i,invitees:o,spaceStore:s}=e,a=o.filter((e=>function(e){const t=e.type;return["guest","guest_request","guest_page_add"].includes(t)}(n[e.email]))).map((e=>({email:e.email,isGuest:"member"!==(null==e?void 0:e.currentRole)})));t.setState({...t.state,invitedUsers:a}),U().fr({environment:i,spaceStore:s,contextualInviteStore:t})}({contextualInviteStore:n,environment:a,spaceStore:c,defaultAddabilities:i,invitees:e})}}function vi(e){const{tooltip:t,disabled:n,onClick:i}=e,o=(0,s().VK)((()=>(0,L().wZ)()),[]);return(0,_.jsx)(kt().Z,{disableTooltip:!Boolean(t),renderTooltip:()=>t,render:e=>(0,_.jsx)(Nn().Z,{isLarge:!0,style:{marginLeft:8,...o&&{borderRadius:6,paddingLeft:12,paddingRight:12}},disabled:n,onClick:i,...e,children:(0,_.jsx)(r()._H,{id:"shareMenu.inviteButton.invite",defaultMessage:"Invite"})})})}var xi=()=>n(513670),bi=()=>n(429394),Si=()=>n(122671),Mi=()=>n(189783),ji=()=>n(364052),Ci=()=>n(311988),wi=()=>n(770708),ki=()=>n(981219);const _i=(0,r().vU)({autojoinMember:{defaultMessage:"{email} will automatically be added to the workspace since @{domain} is an allowed email domain",id:"inviteTargetToken.autojoinMember.tooltip"},guestsDisabledMember:{defaultMessage:"Since guests are disabled, {email} will automatically be added to the workspace as a member",id:"inviteTargetToken.guestsDisabledMember.tooltip"},guest:{defaultMessage:"{email} will be invited as a guest",id:"inviteTargetToken.guest.tooltip"},guestV2:{defaultMessage:"Invite {email} as a guest",id:"inviteTargetToken.guest.tooltipV2"},guestRequest:{id:"inviteTargetToken.guestRequest.tooltip",defaultMessage:"This guest must be approved by a workspace owner first"},invalidUser:{defaultMessage:"{text} is not a valid email",id:"inviteTargetToken.invalidUser.tooltip"},overInternalGuestLimit:{id:"inviteTargetToken.overInternalGuestLimit.tooltip",defaultMessage:"This workspace has reached its internal guest limit"},overGeneralGuestLimit:{id:"inviteTargetToken.overGeneralGuestLimit.tooltip",defaultMessage:"This workspace has reached its guest limit"},disabledByAdmins:{id:"inviteTargetToken.disabledByAdmins.tooltip",defaultMessage:"Inviting users has been disabled by admins for this page"},notAuthorizedDomain:{id:"inviteTargetToken.notAuthorizedDomain.tooltip",defaultMessage:"{email} does not belong to an allowed email domain"}});function Ti(e){const{inviteTarget:t,defaultAddability:n,onClickRemove:o}=e,a=function(e,t){if("group"===e.type)return"gray";if("invalidUser"===e.type)return"red";if("existingUser"!==e.type&&"newUser"!==e.type)return(0,N().t1)(e);if(void 0===t)return"red";if("member"===t.type)return"autojoin_domain"===t.reason||"guests_disabled"===t.reason?"green":"over_internal_guest_limit"===t.reason?"yellow":(0,N().t1)(t.reason);if("member_request"===t.type)return"yellow";if("member_page_add"===t.type)return"gray";if("guest"===t.type)return"yellow";if("guest_request"===t.type)return"yellow";if("guest_page_add"===t.type)return"yellow";if("none"===t.type){if("must_upgrade"===t.reason)return"yellow";if("over_internal_guest_limit"===t.reason)return"red";if("over_general_guest_limit"===t.reason)return"red";if("disabled_by_admins"===t.reason)return"red";if("not_authorized_domain"===t.reason)return"red";if("invalid_email"===t.reason)return"red";if("other"===t.reason)return"red";(0,N().t1)(t.reason)}else(0,N().t1)(t)}(t,n),l=(0,r().YB)(),d=Pi(a),c=(0,i.useCallback)((()=>{o(t)}),[t,o]),u=(0,s().VK)((()=>(0,L().wZ)()),[]),p=function(e){const{inviteTarget:t,defaultAddability:n,intl:i,isRedesignEnabled:o}=e,s=_e(t),a=t.type;if("group"===a)return;if("invalidUser"===a)return i.formatMessage(_i.invalidUser,{text:t.value.text});if(!s)return;if("existingUser"!==a&&"newUser"!==a)return(0,N().t1)(a);if(void 0===n)return;if("none"===n.type){if("must_upgrade"===n.reason)return;if("other"===n.reason)return;if("over_internal_guest_limit"===n.reason)return i.formatMessage(_i.overInternalGuestLimit);if("over_general_guest_limit"===n.reason)return i.formatMessage(_i.overInternalGuestLimit);if("disabled_by_admins"===n.reason)return i.formatMessage(_i.disabledByAdmins);if("not_authorized_domain"===n.reason)return i.formatMessage(_i.notAuthorizedDomain,{email:s});if("invalid_email"===n.reason)return i.formatMessage(_i.invalidUser,{text:"unknown"});(0,N().t1)(n.reason)}if("member"===n.type)return"autojoin_domain"===n.reason?i.formatMessage(_i.autojoinMember,{email:s,domain:(0,me().Gd)(s)}):"guests_disabled"===n.reason?i.formatMessage(_i.guestsDisabledMember,{email:s}):"over_internal_guest_limit"===n.reason?s:(0,N().t1)(n.reason);if("member_request"===n.type)return s;if("member_page_add"===n.type)return s;if("guest"===n.type)return o?i.formatMessage(_i.guestV2,{email:s}):i.formatMessage(_i.guest,{email:s});if("guest_request"===n.type)return i.formatMessage(_i.guestRequest);if("guest_page_add"===n.type)return o?i.formatMessage(_i.guestV2,{email:s}):i.formatMessage(_i.guest,{email:s});(0,N().t1)(n)}({inviteTarget:t,defaultAddability:n,intl:l,isRedesignEnabled:u});return(0,_.jsx)(kt().Z,{placement:Et().Placement.Top,renderTooltip:()=>p,disableTooltip:!p,render:e=>(0,_.jsx)("div",{style:{maxWidth:"100%"},...e,children:(0,_.jsxs)(q().jX,{gap:2,style:d.token,borderRadius:u?4:3,padding:"2px 4px",width:"hug",children:[(0,_.jsxs)(q().jX,{align:"center-left",borderRadius:3,direction:"row",gap:4,width:"hug",children:[(0,_.jsx)(Ii,{inviteTarget:t,tokenColor:a}),(0,_.jsx)(G().q,{colorName:Ai(a),styleName:"UIRegular-14px/Regular",customStyles:d.label,children:Di(t,l)}),(0,_.jsx)(on().Z,{hoveredStyle:d.removeButtonHovered,pressedStyle:d.removeButtonPressed,onClick:c,children:(0,_.jsx)(Be().y,{iconGroup:ki().U,colorName:"secondary",variantName:"mini"})})]}),(0,_.jsx)(je().m,{featureGateId:"guest_limit_debug_ui",whenEnabled:(0,_.jsx)("div",{style:{marginLeft:24,paddingBottom:2},children:(0,_.jsx)(G().q,{colorName:"secondary",styleName:"UISmall-12px/Medium",children:null==n?void 0:n.type})}),whenDisabled:null})]})})})}function Ii(e){const{inviteTarget:t,tokenColor:n}=e,i=Pi(n);switch(n){case"green":return(0,_.jsx)(Be().y,{iconGroup:ji().F,colorName:"greenPrimary",variantName:"default"});case"yellow":return(0,_.jsx)(Be().y,{iconGroup:wi().U,colorName:"yellowPrimary",variantName:"default"});case"red":return(0,_.jsx)(Be().y,{iconGroup:Ci().x,colorName:"uiRedPrimary",variantName:"default"});case"gray":return"existingUser"===t.type?(0,_.jsx)(q().jX,{align:"center",width:20,height:20,children:(0,_.jsx)(ee().Z,{userValue:t.value,size:16})}):(0,_.jsx)("div",{style:i.iconCircle,children:(0,J().O)(i.icon)});default:(0,N().t1)(n)}}function Pi(e){return(0,a().yK)((t=>({token:Ri(e,t),iconCircle:{alignItems:"center",backgroundColor:t.white,borderRadius:"50%",display:"flex",height:16,justifyContent:"center",width:16},icon:{color:t.icon.secondary,height:12,width:12},label:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},removeButtonHovered:{background:"transparent",opacity:.8},removeButtonPressed:{background:"transparent",opacity:.6}})),[e])}function Ai(e){switch(e){case"green":return"greenPrimary";case"yellow":return"yellowPrimary";case"red":return"uiRedPrimary";case"gray":return"grayPrimary";default:(0,N().t1)(e)}}function Ri(e,t){return{background:Zi(e,t),border:Bi(e,t)}}function Zi(e,t){switch(e){case"green":return t.fill.greenPrimary;case"yellow":return t.fill.yellowSecondary;case"red":return t.tint.uiRed;case"gray":return t.legacyDefaultSelectColor;default:(0,N().t1)(e)}}function Bi(e,t){switch(e){case"red":return`1px dashed ${t.stroke.uiRedPrimary}`;case"green":case"yellow":case"gray":return;default:(0,N().t1)(e)}}function Di(e,t){const{type:n}=e;switch(n){case"newUser":return e.value.email.trim();case"invalidUser":return e.value.text.trim();case"existingUser":return z().kk5.fromValue(W().KJ,e.value).getDisplayName(t);case"group":return(0,Jt().kF)({intl:t,groupName:e.value.name});default:(0,N().t1)(n)}}function Li(e){const{addabilities:t,disabled:n,metadata:r,focus:l,onFocus:d,onInputChanged:c,onSubmit:u,placeholder:p,right:m,showEmptyError:g,setAutoFocusInput:f}=e,h=(0,o().O7)(),y=(0,o().Fy)(),v=function(e){const{focus:t,disabled:n,tokens:i}=e,o=(0,s().VK)((()=>(0,L().wZ)()),[]);return(0,a().yK)((e=>({tokenSpan:{maxWidth:"100%"},inputRightItemStyle:o?{alignSelf:"flex-start"}:{},tokenInputMenuItem:{paddingTop:i.length>0||o?4:6,paddingLeft:4,paddingRight:4,paddingBottom:4,borderRadius:o?6:4,minHeight:32,...t&&!o&&{background:"none"},...n&&{background:e.inputBackground,color:e.mediumTextColor,fill:nn().ZP.white,opacity:.4},...o&&{alignItems:"center"}},inputAndTokenWrapRight:{gap:2},tokenInputMenuItemInput:{paddingTop:0},warningMessage:{color:"#DE5550"}})),[i.length,o,t,n])}({focus:l,disabled:n,tokens:[]}),x=(0,s().qz)(e.inviteTargetsStore,le().ZP),b=(0,s().VK)((()=>x.state.inviteTargets),[x]),S=(0,s().VK)((()=>x.state.tokenQuery),[x]),M=(0,s().VK)((()=>(0,L().wZ)()),[]),{inputFieldText:j}=(0,s().VK)((()=>({inputFieldText:x.state.tokenQuery.trim()})),[x]),C=(0,i.useCallback)((e=>{bi().P({inviteTargetsStore:x,targetToRemove:e})}),[x]);return b?(0,_.jsx)(Si().ZP,{focus:l,focusAfterAnimation:!0,onClick:()=>{y.isMobile||null==d||d()},format:Si().UR.Share,value:S,onChange:e=>{if(M&&0===j.length){const e=H().default.state;H().default.setState({...e,tab:H().XF.Share,display:H().wV.Invite,focus:H().Sw.Search,source:e.display===H().wV.Invite?e.source:H().T5.Notion,emailMessage:e.display===H().wV.Invite?e.emailMessage:""}),null==f||f(!1)}bi().j({environment:h,event:e,inviteTargetsStore:x,inviteOrigin:r.inviteOrigin,flowId:r.inviteFlowId,onInputChanged:c})},type:"email",tokens:b.map(((e,n)=>(0,_.jsx)(Ti,{inviteTarget:e,onClickRemove:C,defaultAddability:Oi(e,t)},n))),disabled:n,autoComplete:"off",placeholder:p,onRemoveLastToken:()=>{x.setState({...x.state,inviteTargets:x.state.inviteTargets.slice(0,-1)})},right:m,rightWrapStyle:v.inputRightItemStyle,showBorder:!0,inputStyle:v.tokenInputMenuItemInput,inputAndTokenWrapRightStyle:v.inputAndTokenWrapRight,style:v.tokenInputMenuItem,onSubmit:u,inputFullWidth:!0,message:(0,_.jsx)(Mi().z,{invalidInvites:(0,xi().oA)(b.map((e=>"invalidUser"===e.type?e:void 0))),showEmptyError:g,styles:v.warningMessage})}):null}function Oi(e,t){const n=_e(e);if(n)return null==t?void 0:t[n]}var Hi=()=>n(356380);function Vi(e){const{onClick:t,featureAvailability:n}=e;return(0,_.jsx)(kt().Z,{disableTooltip:!1,renderTooltip:()=>(0,_.jsx)(Hi().e,{featureAvailability:n}),render:e=>(0,_.jsx)(Nn().Z,{isLarge:!0,style:{marginLeft:8},onClick:t,...e,children:(0,_.jsx)(r()._H,{id:"shareMenu.inviteButton.upgrade",defaultMessage:"Upgrade"})})})}const Ui=1e3;function Ei(e){const{blockStore:t,contextualInviteStore:n,defaultAddabilities:l,internalDomains:d,inviteTargetsStore:c,invites:u,metadata:p,spaceRole:m,spaceStore:g,spaceUserStore:f,sudoModeStore:h}=e,y=(0,o().O7)(),v=(0,r().YB)(),x=(0,a().yK)((()=>({permissionsRoleSelectButton:{display:"flex",whiteSpace:"nowrap",height:20,margin:2,borderRadius:4,color:nn().ZP.uiGray}})),[]),[b,S]=(0,i.useState)("editor"),[M,j]=(0,i.useState)(!1),C=(0,s().VK)((()=>(0,L().wZ)()),[]),{source:w,focus:k,emailMessage:T,display:I}=(0,s().VK)((()=>{const{display:e}=H().default.state;return e===H().wV.Invite?H().default.state:{display:e,source:void 0,focus:void 0,emailMessage:""}}),[]),P=(0,s().VK)((()=>t.getType()),[t]),{inviteTargets:A,inputFieldText:R}=(0,s().VK)((()=>({inviteTargets:(0,xe().B)({inviteTargetsStore:c,includeInputFieldText:!0}),inputFieldText:c.state.tokenQuery.trim()})),[c]),Z=async()=>{if(!M&&l&&d)if(0===A.length&&C){const e=H().default.state;H().default.setState({...e,tab:H().XF.Share,display:H().wV.Invite,focus:H().Sw.Search,source:e.display===H().wV.Invite?e.source:H().T5.Notion,emailMessage:e.display===H().wV.Invite?e.emailMessage:""})}else{j(!0);try{const e={blockRole:b,blockStore:t,spaceRole:m,spaceStore:g};await yi({contextualInviteStore:n,defaultAddabilities:l,destination:e,environment:y,internalDomains:d,intl:v,invites:u,inviteTargetsStore:c,metadata:p,spaceStore:g,spaceUserStore:f,sudoModeStore:h})}finally{j(!1)}}},B=(0,Ae().I2)(u.map((e=>e.invitee)).filter(N().$K)),D=(0,s().VK)((()=>f.getUserId()),[f]),O=(0,Ce().oo)({name:"guests",spaceId:g.id,userId:D,amount:B}),U=(0,s().VK)((()=>t.canEditMembership()),[t]),E=(0,On().cR)(t),F=(0,On().xb)(t),K=Object.values(l??{}).some((e=>"none"===e.type)),z=T.length>Ui,W=M||!U||E||F,[q,G]=(0,i.useState)(!W);return(0,_.jsx)(kt().Z,{disableTooltip:U&&!E&&!F,placement:Et().Placement.Left,renderTooltip:()=>U?E?(0,_.jsx)(r()._H,{id:"shareMenu.inviteButton.fullAccessOnlyMessage.tooltip.pageInTrash",defaultMessage:"Restore page from trash to add people"}):F?(0,_.jsx)(r()._H,{id:"shareMenu.inviteButton.fullAccessOnlyMessage.tooltip.hasAIEdits",defaultMessage:"Resolve pending edits to add people"}):void 0:C?(0,_.jsx)(r()._H,{id:"shareMenu.inviteButton.fullAccessOnlyMessage.tooltip.needFullAccessRedesign",defaultMessage:"Request full access to share with others"}):(0,_.jsx)(r()._H,{id:"shareMenu.inviteButton.fullAccessOnlyMessage.tooltip.needFullAccess",defaultMessage:"Only those with full access can add people"}),render:e=>(0,_.jsxs)("div",{style:{display:"flex"},...e,children:[(0,_.jsx)(Li,{inviteTargetsStore:c,metadata:p,focus:k===H().Sw.Search||C&&I===H().wV.MainShareMenu&&q,setAutoFocusInput:G,addabilities:l,disabled:W,onFocus:()=>{H().default.setState({...H().default.state,tab:H().XF.Share,display:H().wV.Invite,focus:H().Sw.Search,source:w||H().T5.Notion,emailMessage:T||""}),V().yE(y,{source:w||H().T5.Notion})},onSubmit:()=>{R.length>0||Z()},placeholder:v.formatMessage({id:"shareMenu.inviteTargetsInput.placeholder.exp",defaultMessage:"Email or group, separated by commas"}),right:C&&R.length>0&&H().default.getState().display===H().wV.Invite||A.length>0?(0,_.jsx)(Ln().ZP,{disabled:!U||E||F,role:b,table:"block",type:"user_permission",blockType:P,isInvite:!0,upgradeButtonName:"invite_permission_block",buttonStyle:x.permissionsRoleSelectButton,isMenuItem:!1,onChange:e=>S(e)}):void 0}),O&&(0,Ce().V5)(O,{available:()=>(0,_.jsx)(vi,{tooltip:T.length>Ui?(0,_.jsx)(r()._H,{id:"shareMenu.inviteButton.emailOverMaxLength.tooltip",defaultMessage:"Message exceeds the limit of 1000 characters."}):void 0,disabled:!U||E||F||K||z,onClick:Z}),unavailable:e=>(0,_.jsx)(Vi,{featureAvailability:e,onClick:()=>{H().default.setState({...H().default.state,tab:H().XF.Share,display:H().wV.Invite,focus:void 0,source:w||H().T5.Notion,emailMessage:T||""}),xt().Vu({environment:y,upgradeButtonName:"user_permission_item"})}})})]})})}var Ni=()=>n(837341);const Fi=function(e){const{store:t}=e,{isMobile:i}=(0,o().Fy)(),l=(0,s().VK)((()=>t.canEditMembership()),[t]),d=(0,s().VK)((()=>(0,L().wZ)()),[]),c=(0,On().cR)(t),u=(0,On().xb)(t),p=(0,a().yK)((e=>({buttonContainer:{display:"flex",alignItems:"center",gap:st().p_},inputButton:{flex:1,justifyContent:"flex-start",height:30,overflow:"hidden",...d?{background:e.tint.regular,borderRadius:10,color:e.text.tertiary,boxShadow:"none",height:i?36:30}:{}},inputContent:{display:"flex",alignItems:"center",fontSize:16,fontWeight:400,...S().Yu},iconContainer:{fill:e.icon.secondary,marginRight:8},blueButton:{minWidth:st().UF}})),[i,d]);return(0,_.jsx)(kt().Z,{renderTooltip:()=>u?(0,_.jsx)(r()._H,{id:"inviteUserButton.tooltip.resolveAIEditsMessage",defaultMessage:"Resolve pending edits to add people"}):(0,_.jsx)(r()._H,{id:"inviteUserButton.tooltip.fullAccessOnlyMessage",defaultMessage:"Only those with full access can add people."}),disableTooltip:l&&!c&&!u,render:t=>(0,_.jsxs)("div",{style:p.buttonContainer,...t,children:[(0,_.jsx)(n(576978).Z,{onClick:e.onClick,disabled:!l||c||u,style:p.inputButton,children:(0,_.jsx)("div",{style:p.inputContent,children:i&&d?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("div",{style:p.iconContainer,children:(0,n(270820).R)({height:16,width:16})}),(0,_.jsx)(r()._H,{defaultMessage:"Invite people, emails, groups...",id:"ContexualInvites.inviteUserModal.searchInput.placeholderWithoutBots.mobile"})]}):(0,_.jsx)(r()._H,{defaultMessage:"Add emails or people",id:"ContexualInvites.inviteUserModal.searchInput.placeholderWithoutBots"})})}),!i&&(0,_.jsx)(Nn().Z,{isLarge:!0,onClick:e.onClick,disabled:!l||c||u,style:p.blueButton,children:(0,_.jsx)(r()._H,{id:"inviteUserButton.invitePersonLabel",defaultMessage:"Invite"})})]})})};function Ki(e){const{store:t,permissionItemArgs:n}=e,{onUpgradeButtonClick:l}=n,d=(0,o().O7)(),c=(0,o().MO)(),u=(0,s().qz)(void 0,B().Z),p=(0,s().VK)((()=>u.state.permissionsInviteStore),[u]),m=(0,s().VK)((()=>u.stage),[u]),g=(0,s().VK)((()=>p.state.modalOpen),[p]),f=(0,s().VK)((()=>(0,L().wZ)()),[]),h=(0,s().VK)((()=>t.canAdmin()),[t]),y=(0,s().VK)((()=>{const e=de().subscriptionDataStoreInstance.state;return Boolean(e&&zt().YK(e))}),[]),v=(0,s().VK)((()=>(0,O().pR)({store:t})),[t]),x=(0,a().yK)((e=>({button:{display:"flex",alignItems:"center",minHeight:f?0:52,marginBottom:f?16:void 0},buttonInner:{width:"100%"},modalButton:{height:36},requestedUsersToast:{marginBottom:96}})),[f]),b=(0,i.useCallback)(((e,t)=>{e&&t>0&&ni().oV({label:(0,_.jsx)(r()._H,{id:"mobileInviteSection.onInviteComplete.toastMessage.requestedUsers",defaultMessage:"Sent request to invite {numRequests, plural, one {a guest} other {{numRequests} guests}}",values:{numRequests:t}}),style:c?x.requestedUsersToast:void 0})}),[c,x.requestedUsersToast]);return m!==R().TG.closed||c&&!h?null:(0,_.jsx)(on().Z,{mobileFeedback:!0,disabled:!0,style:x.button,children:(0,_.jsxs)("div",{style:x.buttonInner,children:[g&&(0,_.jsx)(Ni().r,{store:t,disabled:!h,membersOnly:v,isSubscribed:y,onUpgradeButtonClick:l,upgradeButtonName:"invite_permission_block",shouldGrow:!0,buttonStyle:x.modalButton,permissionsInviteStore:p,onInviteComplete:b,analyticsFrom:"mobile_invite"}),(0,_.jsx)(Fi,{store:t,onClick:()=>(0,Zt().z5)({environment:d,permissionsInviteStore:p,store:t,isSubscribed:y,renderInShareModal:!1})})]})})}var zi=()=>n(489434);function Wi(e){const{spaceName:t,domainUrl:n}=e,i=(0,r().YB)();return(0,_.jsx)(zi().j,{tint:"gray",iconGroup:Un().G,label:i.formatMessage(qi.label,{spaceName:t}),description:i.formatMessage(qi.description,{domain:n}),display:"inline"})}const qi=(0,r().vU)({label:{id:"shareMenu.overLimitBanner.label",defaultMessage:"{spaceName} is over the guest limit"},description:{id:"shareMenu.overLimitBanner.description",defaultMessage:"If you share this page to a ‘@{domain}‘ email, the invite will be sent to your workspace owners as a request to add them as a member with full access to the workspace."}});var Gi=()=>n(499110),Yi=()=>n(467806),$i=()=>n(98774),Xi=()=>n(729775),Qi=()=>n(718959),Ji=()=>n(186647),eo=()=>n(383694),to=()=>n(447475);const no=(0,r().vU)({fullAccess:{id:"permissionsLevelBanner.fullAccess.label",defaultMessage:"You have full access to this page {hasAttribution, select, true {via {attribution}} other {}}"},editor:{id:"permissionsLevelBanner.editor.label",defaultMessage:"You have edit access to this page {hasAttribution, select, true {via {attribution}} other {}}"},contentEditor:{id:"permissionsLevelBanner.contentEditor.label",defaultMessage:"You have edit access to content on this page {hasAttribution, select, true {via {attribution}} other {}}"},commenter:{id:"permissionsLevelBanner.commenter.label",defaultMessage:"You have comment access to this page {hasAttribution, select, true {via {attribution}} other {}}"},reader:{id:"permissionsLevelBanner.reader.label",defaultMessage:"You have view access to this page {hasAttribution, select, true {via {attribution}} other {}}"}});function io(e){let{store:t}=e;const n=(0,o().O7)(),l=(0,s().VK)((()=>(0,Qi().B7)(n)),[n]),d=(0,s().VK)((()=>t.canEditContentOnly()),[t]),{role:c,attribution:u}=(0,s().VK)((()=>{if(!l)return{role:"none",attribution:null};const e=(0,Rt().Dt)({userId:l.id,store:t}),i=function(e){let{environment:t,calculatedPermission:n,store:i}=e;const o=(0,be().Pj)(i)||nt().default.state.currentSpaceStore;if(!o)return null;if((0,mt().hV)(n)){const e=(0,E().TC)({groupId:n.group_id}),t=null==e?void 0:e.name;return t?(0,_.jsxs)(_.Fragment,{children:[(0,Ji().x)({width:18,marginRight:5}),t]}):null}if((0,mt().fG)(n)){var s;const e=n.team_id||(null===(s=(0,be().VP)(i))||void 0===s?void 0:s.id);if(!e)return null;const t=Ft().zX.createChildStore(o,{table:ht().e0,id:e,spaceId:o.id});return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(eo().p,{disabled:!0,store:t,size:18,style:{marginRight:5}}),(0,_.jsx)(to().q,{navigableParentStore:t,showUnderline:!0,maxLength:30})]})}if((0,mt().Ir)(n))return(0,mt().tx)(n)?(0,_.jsx)(r()._H,{defaultMessage:"the link",id:"permissionsLevelBanner.spacePermission.attribution"}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(eo().p,{disabled:!0,store:o,size:18,style:{marginRight:5}}),(0,E().rn)(t,o)]});if((0,mt().$D)(n))return(0,_.jsx)(Xi().Z,{underline:!0,inline:!0,onClick:()=>{H().default.setState({...H().default.state,display:H().wV.Publish,tab:H().XF.Publish})},children:(0,_.jsx)(r()._H,{defaultMessage:"the published site",id:"permissionsLevelBanner.publicPermission.attribution"})});return null}({environment:n,calculatedPermission:e,store:t});return{role:e.role,attribution:i}}),[l,t,n]),{userId:p,spaceId:g}=(0,s().VK)((()=>({userId:t.userId,spaceId:t.getSpaceId()})),[t]),f=(0,Ce().VX)({name:"block_read_and_write_role",spaceId:g,userId:p}),h=(0,s().VK)((()=>!!c&&(f&&!(0,mt().J5)(c))),[c,f]);(0,i.useEffect)((()=>{c&&vt().hY(n,{share_menu_session_id:H().default.state.sessionId,role:c})}),[]);const y=(0,a().yK)((e=>({container:{background:e.surface.wash,border:1,borderStyle:"solid",borderColor:e.accentColors.gray[75],borderRadius:4,marginLeft:14,marginRight:14,marginTop:5,marginBottom:5,paddingTop:10,paddingBottom:10,paddingLeft:12,paddingRight:12,display:"flex",alignItems:"center",justifyContent:"space-between"},bannerBodyContainer:{display:"flex",alignItems:"center"},icon:{marginRight:8},bannerLabel:{fontSize:12,display:"flex",flexDirection:h?"column":"row"},attribution:{display:"inline-flex",alignItems:"center",fill:e.regularIconColor,marginLeft:h?0:5},requestAccessContainer:{fontSize:12,flexShrink:0},pendingAccessRequestButton:{color:e.lightTextColor},accessRequestButton:{color:e.blueColor,padding:5,borderRadius:4}})),[h]),[v,x]=(0,i.useState)(!1),[b,S]=(0,i.useState)(!1),M=(0,i.useCallback)((async()=>{var e;if("reader"!==c&&"comment_only"!==c)return;const i=await Ke().callApi({eventName:"requestAccess",environment:n,data:{type:"current-actor-to-block",block:{id:t.id,spaceId:t.getSpaceId()},attributes:{origin_type:"share_menu",add_permissions_on_approval:!1,role:"read_and_write",existing_permissions:c},message:void 0}});"success"===i.type&&i.data.request?(x(!0),vt().dU(n,{request_access_type:"page",previous_access_level:c,requested_access_level:"read_and_write",requestId:i.data.requestId})):"failed"===i.type&&"UserRateLimitResponse"===(null===(e=i.body)||void 0===e?void 0:e.name)&&S(!0)}),[n,c,t]);if(!(0,mt().iC)(c))return null;const j=function(e){switch(e){case"editor":return no.fullAccess;case"read_and_write":return no.editor;case"content_only_editor":return no.contentEditor;case"comment_only":return no.commenter;case"reader":return no.reader;case"none":case"membership_admin":return null;default:(0,N().t1)(e)}}(c);return j?(0,_.jsx)(kt().Z,{delayThreshold:0,renderTooltip:()=>(0,_.jsx)(r()._H,{defaultMessage:"Content editors can edit pages, but cannot change view and database settings.",id:"database.viewSettings.mainTab.contentOnlyEditorPill.subtitle"}),disableTooltip:!d,textWrap:!0,style:{maxWidth:180},render:e=>(0,_.jsxs)("div",{style:y.container,...e,children:[(0,_.jsxs)("div",{style:y.bannerBodyContainer,children:[(0,_.jsx)(ee().Z,{userStore:l,size:20,style:y.icon}),(0,_.jsx)(m().Z,{style:y.bannerLabel,isMultiline:!0,children:(0,_.jsx)(r()._H,{...j,values:{hasAttribution:Boolean(u),attribution:(0,_.jsx)("span",{style:y.attribution,children:u})}})})]}),h&&(0,_.jsx)("div",{style:y.requestAccessContainer,children:(0,_.jsx)(on().Z,{style:v||b?y.pendingAccessRequestButton:y.accessRequestButton,onClick:M,disabled:v||b,children:v?(0,_.jsx)(r()._H,{defaultMessage:"Edit access requested",id:"permissionsLevelBanner.requestPermission.accessRequested"}):b?(0,_.jsx)(r()._H,{defaultMessage:"Try again later",id:"permissionsLevelBanner.requestPermission.rateLimited"}):(0,_.jsx)(r()._H,{defaultMessage:"Request edit access",id:"permissionsLevelBanner.requestPermission.requestEdit"})})})]}),placement:Et().Placement.Left}):null}var oo=()=>n(899018),so=()=>n(17571),ao=()=>n(564735);function ro(e){const{store:t,permissionItemArgs:n}=e,{showTeamPermission:i,showSpacePermission:o,mostPermissiveAncestorTeamOwnerItem:s,mostPermissiveAncestorTeamMemberItem:a,mostPermissiveAncestorTeamGuestItem:r,mostPermissiveTrustedDomainItem:l,mostPermissiveSpaceItem:d,pagePermissionUIModel:c,mostPermissivePublicItem:u,showSitePublicPermission:p,showTrustedDomainPermission:m,showRestrictedPermissionBanner:g}=e.calculatedPermissions,f=Number(i)+Number(o)+Number(p);return(0,_.jsxs)(_.Fragment,{children:[p&&u&&(0,_.jsx)(so().W,{store:t,publicPermissionItem:u,permissionItemArgs:n}),i&&s&&a&&(0,_.jsx)(ao().Z,{store:t,blockTeamOwnerPermission:s,blockTeamMemberPermission:a,blockTeamGuestPermission:r,permissionItemArgs:n}),o&&(0,_.jsx)(pn().Z,{store:t,spacePermission:d,publicPermission:u,trustedDomainPermission:l,showTrustedDomainPermission:m,permissionItemArgs:n,fromPermissionWrapper:"permission_list",isRestricted:g}),(0,_.jsx)(lo,{store:t,pagePermissions:c,numberPermissionsAlreadyRendered:f,permissionItemArgs:n})]})}function lo(e){const t=(0,r().YB)(),n=(0,s().VK)((()=>{const e=nt().default.state.currentSpaceStore;return null!=e&&e.isDefined()?e.id:""}),[]),{store:i,pagePermissions:o,numberPermissionsAlreadyRendered:a,permissionItemArgs:l,showHeader:d}=e,{showUserPermissions:c,mostPermissiveGroupPermissions:u,mostPermissiveTeamPermissions:p,mostPermissiveUserPermissions:m}=o,g=(0,s().VK)((()=>(0,Pt().v)()),[]),f=(0,s().VK)((()=>{const e=c?function(e){const{mostPermissiveUserPermissions:t,spaceVisibleUserMap:n}=e,i={};return t.forEach((t=>{i[t.permissionItem.user_id]=(0,_.jsx)(Gt().Z,{store:e.store,userPermission:t,showInherited:!1,permissionItemArgs:e.permissionItemArgs,spaceVisibleUserMap:n,fromPermissionWrapper:"permission_list"},t.permissionItem.user_id)})),i}({store:i,mostPermissiveUserPermissions:m,permissionItemArgs:l,spaceVisibleUserMap:g}):[];return xi().oA(Object.keys(e).map((n=>{const o=Ft().U6.createChildStore(i,{table:W().KJ,id:n}),s=o.getModel();if(!o.isReady()||s)return{title:(0,Gi().Nz)(t,s),permissionItem:e[n]}})))}),[c,m,l,i,t,g]),h=function(e){const{store:t,mostPermissiveTeamPermissions:n,permissionItemArgs:i}=e;return n.map((e=>mt().LW(e.permissionItem)?(0,_.jsx)(fn().Z,{store:t,blockTeamOwnerPermission:e,isExternalTeam:!0,permissionItemArgs:i,fromPermissionWrapper:"permission_list"},`${e.permissionItem.team_id}.owner`):mt().bm(e.permissionItem)?(0,_.jsx)(mn().Z,{store:t,blockTeamGuestPermission:e,isExternalTeam:!0,permissionItemArgs:i,fromPermissionWrapper:"permission_list"},`${e.permissionItem.team_id}.teamGuest`):(0,_.jsx)(gn().Z,{store:t,blockTeamPermission:e,isExternalTeam:!0,permissionItemArgs:i,fromPermissionWrapper:"permission_list"},`${e.permissionItem.team_id}.member`)))}({store:i,mostPermissiveTeamPermissions:p,permissionItemArgs:l}),y=(0,s().VK)((()=>{const e=n?function(e){const{spaceId:t,mostPermissiveGroupPermissions:n}=e,i={},o=new Set(Yi().Z.state.permissionGroupsAndMemberCounts.map((e=>e.group.group_id)));return n.forEach((n=>{const s=n.permissionItem.group_id;o.has(s)&&(i[s]=(0,_.jsx)(qt().Z,{store:e.store,groupPermission:n,spaceId:t,showInherited:!1,permissionItemArgs:e.permissionItemArgs,fromPermissionWrapper:"permission_list"}))})),i}({store:i,spaceId:n,mostPermissiveGroupPermissions:u,permissionItemArgs:l}):{};return Object.entries(e).map((e=>{let[n,i]=e;const o=Yi().Z.state.permissionGroupsAndMemberCounts.find((e=>e.group.group_id===n));return{title:o?(0,Jt().kF)({intl:t,groupName:o.group.name}):"",permissionItem:i}}))}),[t,u,l,n,i]),v=[...f,...y];v.sort(((e,t)=>e.title.localeCompare(t.title)));const x=h.concat(v.map((e=>e.permissionItem))),b=x.length;if(0===b)return null;if(b>5-a){const e=Math.max(2-a,0);return(0,_.jsxs)(_.Fragment,{children:[d&&(0,_.jsx)(oo().GE,{}),x.slice(0,e),(0,_.jsx)($i().Z,{permissions:x.slice(e,-1)}),x[b-1]]})}return(0,_.jsxs)(_.Fragment,{children:[d&&(0,_.jsx)(oo().GE,{}),x]})}function co(e,t){return e.from.table===gt().iU&&e.from.blockId===t.id}const uo=function(e){const t=(0,o().O7)(),{device:r}=t,{store:l,permissionItemArgs:d,calculatedPermissions:c}=e,{sudoModeStore:u}=d,{permissionItemsCount:p,pagePermissionUIModel:m,showRestrictedPermissionBanner:g}=c,f=(0,s().VK)((()=>{const e=nt().default.state.currentSpaceStore;if(!e)return!0;if(l.isTopLevelPrivatePage({spaceStore:e,environment:t}))return!0;const i=(0,be().uJ)(l);for(const o of i)if((0,n(852465).OY)(o)&&o.isTopLevelPrivatePage({spaceStore:e,environment:t}))return!0;return!1}),[l,t]);let h=null;const y=(0,s().VK)((()=>(0,O().up)({store:l,showRestrictedPermissionBanner:g})),[l,g]),{canAccessParent:v}=(0,s().VK)((()=>(0,O().HB)({store:l})),[l]),x={...c};if(!y&&v){const[e,t]=function(e,t){const{mostPermissiveGroupPermissions:n,mostPermissiveTeamPermissions:i,mostPermissiveUserPermissions:o}=t,[s,a]=xi().uK(n,(t=>co(t,e))),[r,l]=xi().uK(i,(t=>co(t,e))),[d,c]=xi().uK(o,(t=>co(t,e))),u={...t,mostPermissiveGroupPermissions:a,mostPermissiveTeamPermissions:l,mostPermissiveUserPermissions:c},p={...t,mostPermissiveGroupPermissions:s,mostPermissiveTeamPermissions:r,mostPermissiveUserPermissions:d};return[u,p]}(l,m);x.pagePermissionUIModel=e,h=(0,_.jsx)(lo,{store:l,pagePermissions:t,numberPermissionsAlreadyRendered:0,permissionItemArgs:d,showHeader:!0})}const b=(0,s().VK)((()=>!(0,O().gi)({store:l})),[l]),S=r.isMobile?et().Z.None:et().Z.Y,M=(0,a().yK)((e=>({scroller:{paddingBottom:10,minHeight:r.isMobile||0===p?void 0:1===p?60:90}})),[r,p]);return(0,i.useEffect)((()=>{vt().oE({environment:t,calculatedPermissions:c})}),[]),(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(Ge().Z,{style:M.scroller,type:S,children:[!f&&(0,_.jsx)(io,{store:l}),(0,_.jsx)(n(417235).Z,{store:l,showRestrictedPermissionBanner:g,showPermissionInheritanceBanner:!1,sudoModeStore:u}),!y&&p>0&&(0,_.jsx)(oo().ZP,{store:l}),(0,_.jsx)(ro,{store:l,calculatedPermissions:x,permissionItemArgs:d}),h,b&&(0,_.jsx)(n(995114).Z,{store:l})]}),!r.isMobile&&(0,_.jsx)(C().Z,{store:l,buttonPopupStore:e.buttonPopupStore,calculatedPermissions:x,permissionItemArgs:d})]})};function po(e){const{blockStore:t,contextualInviteStore:n,inviteTargetsStore:r,permissionItemArgs:l,spaceStore:d,spaceUserStore:c,subscriptionDataStore:u}=e,p=(0,o().Fy)(),m=p.isMobile,{spaceId:g,spaceName:f,userId:h,spaceModel:y}=(0,s().VK)((()=>({spaceId:d.getSpaceId(),spaceName:d.getName(),userId:c.getUserId(),spaceModel:d.getModel()})),[d,c]),v=(0,s().VK)((()=>(0,be().VP)(t)),[t]),[x,b]=(0,s().VK)((()=>[null==c?void 0:c.getModel(),null==v?void 0:v.getModel()]),[c,v]),S=(0,s().VK)((()=>H().default.state.display),[]),M=(0,s().VK)((()=>(0,L().wZ)()),[]),j=function(e,t){return(0,a().yK)((()=>({container:{position:"relative",height:"unset",transition:"all",transitionDuration:"0.3s",display:"flex",flexDirection:"column",maxHeight:t?530:540}})),[t])}(0,M),C=(0,s().qz)(void 0,Me().Z),k=(0,s().VK)((()=>n.state.flowId),[n]),T=function(e){const t=(0,o().Fy)();return(0,i.useCallback)((n=>{n.preventDefault(),t.isMobile||e!==H().wV.MainShareMenu||H().default.setState({...H().default.state,tab:H().XF.Share,display:H().wV.Invite,focus:H().Sw.Search,source:H().T5.Notion,emailMessage:""})}),[t,e])}(S),I=(0,Ie().U)(u),P=(0,s().VK)((()=>(0,xe().B)({inviteTargetsStore:r,includeInputFieldText:!0}).map((e=>({inviteTarget:e,invitee:ke({currentMembersAndGuests:I,inviteTarget:e})}))).filter(N().$K)),[r,I]),A=(0,we().AW)({space:d,spaceUser:c,team:v,invitees:P.map((e=>e.invitee)).filter(N().$K),blockStore:t}),R=(0,ve().U)(d),Z=P.map((e=>e.invitee)).filter((e=>void 0!==e&&void 0===e.currentRole&&R&&(0,ge().is)(e.email,R))),B=(0,Ce().oo)({name:"internal_guests",spaceId:g,userId:h,amount:Z.length}),D=(0,Ce().VX)({name:"non_admin_members",spaceId:g,userId:h})?"read_and_write":"editor",O=(0,ye().IH)({spaceStore:d}),V=(0,s().VK)((()=>{const e=H().default.state,t=e.display===H().wV.Invite?e.emailMessage:"";return{inviteFlowId:n.state.flowId,inviteMessage:t,inviteOrigin:"share_menu",shareMenuSessionId:e.sessionId}}),[n]),U=(0,s().VK)((()=>A?P.map((e=>{const{inviteTarget:t,invitee:n}=e,i=null==n?void 0:n.email;let o,s;return"group"===t.type?s={type:"group"}:i?(o=(0,ge().TC)(i,R??[]),s=A[i]??{type:"none",reason:"other"}):s={type:"none",reason:"other"},{defaultAddability:s,internalDomain:o,invitee:n,inviteTarget:t}})):[]),[P,A,R]),E=(0,fe().Kz)(B,(()=>{if(!f)return;if(O)return;const e=Z[0];if(!e)return;const t=(0,me().Gd)(e.email);return t?(0,_.jsx)(Wi,{spaceName:f,domainUrl:t}):void 0})),F=(0,Se().E)("share_menu_inheritance_banner");return(0,_.jsx)(he().Z,{debugName:"ShareMenuShareTab",capture:!0,onTab:T,children:(0,_.jsxs)("div",{style:j.container,children:[(0,_.jsxs)(q().jX,{direction:"column",gap:16,padding:M?m?`0 ${Te().gr}px 0px ${Te().gr}px`:`0 ${Te().J4}px 8px ${Te().J4}px`:"0 14px 8px 14px",children:[p.isMobile?(0,_.jsx)(Ki,{store:t,permissionItemArgs:l}):(0,_.jsx)(Ei,{blockStore:t,contextualInviteStore:n,defaultAddabilities:A,internalDomains:R,invites:U,inviteTargetsStore:r,metadata:V,spaceRole:D,spaceStore:d,spaceUserStore:c,sudoModeStore:l.sudoModeStore}),E]}),S===H().wV.MainShareMenu&&!M&&(0,_.jsx)(uo,{store:t,calculatedPermissions:e.calculatedPermissions,buttonPopupStore:e.buttonPopupStore,permissionItemArgs:l}),S===H().wV.MainShareMenu&&M&&(0,_.jsx)(w().Z,{store:t,calculatedPermissions:e.calculatedPermissions,buttonPopupStore:e.buttonPopupStore,permissionItemArgs:l,showPermissionInheritanceBanner:F}),S===H().wV.Invite&&!p.isMobile&&(0,_.jsx)(An,{store:t,inviteTargetsStore:r,menuListStore:C,calculatedPermissions:e.calculatedPermissions,permissionItemArgs:e.permissionItemArgs,flowId:k}),(0,_.jsx)(je().m,{featureGateId:"guest_limit_debug_ui",whenEnabled:(0,_.jsx)(Ve,{domains:R,spaceId:g,spaceModel:y,userId:h,spaceUserModel:x,teamModel:b,blockStore:t}),whenDisabled:null})]})})}const mo=function(e){const{store:t,sudoModeStore:i}=e,o=(0,s().VK)((()=>i.state.changePermissionsEnabled),[i]),l=(0,s().VK)((()=>i&&i.shouldUserHaveAccessToPrivatePageBlock()&&!i.doesUserAlreadyHaveEditorAccessOnBlock(t.id)&&i.state.privatePageStore),[i,t]),d=(0,a().yK)((e=>({container:{background:e.cardBackground,padding:"12px 18px",boxShadow:e.borderBoxShadow,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"baseline"},button:{fontWeight:S().Ue.medium,justifyContent:"center",marginTop:8,opacity:o?.5:1},icon:{width:16,height:16,marginRight:6,transition:"all 200ms ease",transform:o?"rotate(-90deg)":void 0}})),[o]);return l?(0,_.jsxs)("div",{style:d.container,children:[(0,_.jsx)(m().Z,{isMultiline:!0,children:(0,_.jsx)(r()._H,{id:"blockPermissionsSettings.workspaceOwner.canChangePermissionsMessage",defaultMessage:"As a <b>workspace owner</b>, you can change the permissions of this page to add yourself or others. Any changes will appear in the audit log.",values:{b:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,_.jsx)("b",{children:t})}}})}),(0,_.jsxs)(Y().Z,{disabled:o,style:d.button,onClick:()=>{i.setState({...i.state,changePermissionsEnabled:!0})},children:[(0,n(371873).I)(d.icon),o?(0,_.jsx)(r()._H,{id:"blockPermissionsSettings.workspaceOwner.isChangingPermissionsMessageButton",defaultMessage:"Changing permissions"}):(0,_.jsx)(r()._H,{id:"blockPermissionsSettings.workspaceOwner.canChangePermissionsMessageButton",defaultMessage:"Change permissions"})]})]}):null};function go(e){const t=(0,s().VK)((()=>H().default.state.tab),[]);switch(t){case H().XF.Share:return(0,_.jsx)(po,{...e,blockStore:e.store,subscriptionDataStore:de().subscriptionDataStoreInstance});case H().XF.Publish:return(0,_.jsx)(pe,{store:e.store,permissionItemArgs:e.permissionItemArgs,mostPermissivePublicItem:e.calculatedPermissions.mostPermissivePublicItem});default:(0,N().t1)(t)}}function fo(){const e=(0,o().Fy)(),t=(0,a().yK)((e=>({container:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:276},offlineMessageHeadline:{fontWeight:S().Ue.medium},iconStyle:{width:32,height:32,marginBottom:10,fill:e.icon.tertiary}})),[]);return(0,_.jsxs)("div",{style:t.container,children:[re(t.iconStyle),(0,_.jsx)("div",{style:t.offlineMessageHeadline,children:(0,_.jsx)(m().Z,{isMobile:e.isMobile,isSecondaryColor:!0,isMultiline:!0,children:(0,_.jsx)(r()._H,{defaultMessage:"You're offline",id:"blockPermissionsSettings.offline.headline"})})}),(0,_.jsx)(m().Z,{isMobile:e.isMobile,isSecondaryColor:!0,isMultiline:!0,children:(0,_.jsx)(r()._H,{defaultMessage:"Go online to share and publish",id:"blockPermissionsSettings.offline.prompt"})})]})}const ho=function(e){const{store:t,permissionItemArgs:i}=e,r=(0,o().Fy)(),l=(0,s().qz)(e.inviteTargetsStore,le().ZP),d=(0,a().yK)((()=>({container:{display:"flex",flexDirection:"column",height:"100%"}})),[]),c=(0,s().VK)((()=>n(804217).default.state.online),[]);return(0,_.jsxs)("div",{style:d.container,children:[i.sudoModeStore&&(0,_.jsx)(mo,{store:t,sudoModeStore:i.sudoModeStore}),!r.isMobile&&(0,_.jsx)(ce().Tm,{inviteTargetsStore:l,mostPermissivePublicItem:e.calculatedPermissions.mostPermissivePublicItem}),c?(0,_.jsx)(go,{inviteTargetsStore:l,...e}):(0,_.jsx)(fo,{})]})};function yo(e){const{store:t,sudoModeStore:n,onUpgradeButtonClick:l,location:d}=e,S=(0,o().O7)(),M=(0,o().Fy)();(0,v().XJ)(A().Ug.publishSite),(0,v().XJ)(A().Ug.publishedSiteSettings);const j=(0,s().qz)(e.universalMemberInviteStore,B().Z),w=(0,s().VK)((()=>j.state.contextualInviteStore),[j]),k=(0,D().u)(),I=(0,x().r)(),V=(0,b().r_)(),U=(0,s().VK)((()=>(0,L().wZ)()),[]),E=(0,s().VK)((()=>O().mk({store:t,environment:S,trustedDomainsStore:k})),[S,t,k]),N=(0,s().VK)((()=>w.state.inviteStage),[w]),F=(0,s().VK)((()=>H().default.state.tab),[]),K=(0,a().yK)((e=>({title:{fontSize:U?16:18},topbarStyle:{paddingTop:15,paddingBottom:15,height:"auto",background:U&&M.isMobile?e.surface.page:void 0},backChevronIcon:{fill:e.icon.primary}})),[M.isMobile,U]),z=(0,i.useMemo)((()=>({onUpgradeButtonClick:l,sudoModeStore:n,location:d})),[l,n,d]),W=(0,s().VK)((()=>(0,P().pW)()&&Z().default.checkGate({gateName:"sharing_anyone_with_the_link"})),[]);if(!I)return W?(0,_.jsx)(T,{calculatedPermissions:E,store:t,permissionItemArgs:z,onClose:e.onClose}):null;if(!M.isMobile&&(N===R().TG.share_workspace||N===R().TG.request_workspace))return(0,_.jsx)(se,{blockStore:t,spaceStore:I,contextualInviteStore:w});const q=M.isMobile?{menuType:h().o.Modal,disableHeaderShadow:!0,title:U?(0,_.jsx)(m().Z,{isMobile:M.isMobile,style:K.title,children:(0,_.jsx)(r()._H,{defaultMessage:"Share settings",id:"blockPermissionsSettings.mobileShareMenu.titleV2"})}):(0,_.jsx)(m().Z,{isMobile:M.isMobile,style:K.title,children:(0,_.jsx)(r()._H,{defaultMessage:"Share",id:"blockPermissionsSettings.mobileShareMenu.title"})}),additionalTopbarContent:(0,_.jsx)(ce().zC,{mostPermissivePublicItem:E.mostPermissivePublicItem}),left:(0,_.jsx)(g().Z,{href:(0,y().UY)("guides.sharing"),analyticsFrom:"sharing"}),footer:F===H().XF.Share&&(0,_.jsx)(C().Z,{store:t,buttonPopupStore:e.buttonPopupStore,calculatedPermissions:E,permissionItemArgs:z}),topbarStyle:K.topbarStyle,right:(0,_.jsx)(p().DoneMenuText,{}),onClickRight:e.onClose,whiteBackground:!0}:{menuType:h().o.Popup,maxHeight:"90vh"};return V?(0,_.jsx)(u().Z,{...q,className:f().B8p,children:(0,_.jsx)(c().Z,{debugName:"ShareMenuContainer",capture:!0,allowEsc:!0,children:(0,_.jsx)(vo,{store:t,spaceStore:I,spaceUserStore:V,permissionItemArgs:z,calculatedPermissions:E,buttonPopupStore:e.buttonPopupStore,inviteTargetsStore:e.inviteTargetsStore,contextualInviteStore:w})})}):null}function vo(e){let{store:t,spaceStore:n,spaceUserStore:s,permissionItemArgs:a,calculatedPermissions:r,buttonPopupStore:c,inviteTargetsStore:u,contextualInviteStore:p}=e;const m=(0,o().O7)();return(0,i.useEffect)((()=>{l().ZH({preventDismissMobileKeyboard:!0,environment:m}),d().clear({preventDismissMobileKeyboard:!0,environment:m})}),[m]),(0,_.jsx)(ho,{store:t,spaceStore:n,spaceUserStore:s,permissionItemArgs:a,calculatedPermissions:r,buttonPopupStore:c,inviteTargetsStore:u,contextualInviteStore:p})}},602137:(e,t,n)=>{n.d(t,{hF:()=>s,oI:()=>a});var i=()=>n(677559);const o={SlackImportContactsButton:new(i().Ss)("SlackImportContactsButton",(()=>n.e(45379).then(n.bind(n,221937)))),GoogleImportContactsButton:new(i().Ss)("GoogleImportContactsButton",(()=>n.e(24149).then(n.bind(n,81223))))},s=(0,i().kF)(o.SlackImportContactsButton,(e=>e.default)),a=(0,i().kF)(o.GoogleImportContactsButton,(e=>e.GoogleImportContactsButton))},616728:(e,t,n)=>{n.r(t),n.d(t,{AuthSyncListener:()=>v});var i=n(667294),o=()=>n(219727),s=()=>n(142735);const a="initial_handshake";var r=()=>n(989478),l=()=>n(788860),d=()=>n(513670),c=()=>n(839002),u=()=>n(342792),p=()=>n(205228),m=()=>n(826955),g=()=>n(704259),f=()=>n(385875),h=n(785893);const y=1;function v(){const e=(0,o().O7)(),t=(0,l().YB)(),n=`${p().default.identity.domainBaseUrl}/authSync`,v=e.currentUser.isLoggedIn(),[x,b]=(0,i.useState)(null),[S,M]=(0,i.useState)({value:!1,count:0}),j=(0,s().VK)((()=>g().default.getTotalUnreadMentionsCount()),[]),C=(0,s().VK)((()=>f().Z.getAllSpaceViewStores(e)),[e]);(0,i.useEffect)((()=>{const e=t=>{const n=p().default.identity.domainBaseUrl;t.origin===n&&t.ports&&t.ports[0]&&(b(t.ports[0]),window.removeEventListener("message",e))};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}}),[]),(0,i.useEffect)((()=>{v&&(S.value||0===S.count||null==x||x.postMessage({version:y,name:"unreadCount",source:"notion",unreadCount:j}))}),[v,S.count,S.value,x,j]);const w=(0,i.useCallback)((async()=>{const e=d().mN(C,"userId"),n=await(0,c().qd)(e,10,(async e=>{if(!e.userId)return;const n=m().U6.createChildStore(e,{table:r().KJ,id:e.userId});await n.load();const i=n.getEmail(),o=n.getDisplayName(t);return{id:e.userId,displayName:o,emailAddress:i}}));null==x||x.postMessage({version:y,name:"accountSwitcher",source:"notion",accounts:n})}),[t,x,C]);(0,i.useEffect)((()=>{v&&(S.value||0===S.count)&&w()}),[v,w,S.count,S.value]),(0,i.useEffect)((()=>{e.currentUser.id&&(0,u().e)(e.currentUser.id)&&(null==x||x.postMessage({version:y,name:"setNotionUserID",source:"notion",notionUserID:e.currentUser.id,type:"mutation"}))}),[e.currentUser.id,x]),(0,i.useEffect)((()=>{v||null==x||x.postMessage({version:y,name:"setNotionUserID",source:"notion",notionUserID:"",type:"mutation"})}),[v,x]);const k=(0,i.useCallback)((e=>{if(e.data.version!==y)return;const{source:t}=e.data;if("notion"!==t&&"mailLoaded"===e.data.name)M((e=>({value:!0,count:e.count+1})))}),[]);return(0,i.useEffect)((()=>(b((e=>(e&&(e.onmessage=k),e))),()=>{b((e=>(e&&(e.onmessage=null),e)))})),[k,x]),(0,h.jsx)("iframe",{src:n,style:{display:"none"},onLoad:e=>function(e){const t=e.currentTarget;setTimeout((()=>{var e;null===(e=t.contentWindow)||void 0===e||e.postMessage(a,p().default.identity.domainBaseUrl)}),50)}(e),title:"Notion Identity"})}},711112:(e,t,n)=>{n.d(t,{f:()=>s});var i=()=>n(142735),o=()=>n(906591);function s(){return(0,i().VK)((()=>(0,o().B8)()),[])}},834758:(e,t,n)=>{n.d(t,{D7:()=>s,Ug:()=>o,vk:()=>a});var i=()=>n(677559);const o={publishSite:new(i().Ss)("PublishSite",(async()=>await n.e(63061).then(n.bind(n,701009)))),publishedSiteSettings:new(i().Ss)("PublishedSiteSettings",(async()=>await Promise.all([n.e(77404),n.e(78421)]).then(n.bind(n,294658))))},s=(0,i().kF)(o.publishedSiteSettings,(e=>e.default)),a=(0,i().kF)(o.publishSite,(e=>e.default))},688450:(e,t,n)=>{n.d(t,{FJ:()=>a,KS:()=>s});var i=()=>n(677559);const o=new(i().Ss)("slashMenu",(()=>n.e(49674).then(n.bind(n,684151)))),s=(0,i().kF)(o,(e=>e.SlashMenu)),a="suggested"},880885:(e,t,n)=>{n.d(t,{H:()=>i});const i=n(263184).default.createValue(!1,{name:"AiPageTranslationCalloutStore"})},583352:(e,t,n)=>{n.d(t,{Z:()=>s});var i=()=>n(632314);class o extends(()=>n(263184))().default{getInitialState(){return{automationActionStore:void 0,automationStore:void 0,contextType:void 0,typecheckResult:void 0}}blur(e){void 0!==this.state.automationStore&&(void 0===e||(0,i().Z)(this.state,e))&&this.setState({automationActionStore:void 0,automationStore:void 0,contextType:void 0,typecheckResult:void 0})}focus(e){(0,i().Z)(this.instanceState,e)||this.setState(e)}}const s=new o;(0,n(947115).exposeDebugValue)("AutomationFocusStore",o)},771097:(e,t,n)=>{n.d(t,{CachedTypedDatabasesStore:()=>i,a:()=>o});const i=n(263184).default.createValue(void 0,{name:"CachedTypedDatabasesStore"});function o(e){const t=i.state;t&&i.setState({...t,typedDatabases:[...t.typedDatabases,e]})}},516623:(e,t,n)=>{n.d(t,{default:()=>o});class i extends(()=>n(263184))().default{getInitialState(){return{active:!1,stringValue:""}}}const o=new i},202787:(e,t,n)=>{n.d(t,{Z:()=>o});class i extends(()=>n(263184))().default{getInitialState(){return{open:!1}}}const o=new i},953624:(e,t,n)=>{n.d(t,{Z:()=>o});class i extends(()=>n(263184))().default{getInitialState(){return{open:!1}}}const o=new i},825137:(e,t,n)=>{n.d(t,{Z:()=>o});class i extends(()=>n(263184))().default{getInitialState(){return{open:!1}}}const o=new i},886970:(e,t,n)=>{n.d(t,{Z:()=>i});const i=new(n(561280).Z)},201023:(e,t,n)=>{n.d(t,{default:()=>o});class i extends(()=>n(263184))().default{getInitialState(){return{open:!1}}}const o=new i},737244:(e,t,n)=>{n.d(t,{Z:()=>o});class i extends(()=>n(263184))().default{getInitialState(){return{open:!1}}}const o=new i},136765:(e,t,n)=>{n.d(t,{Z:()=>o});class i extends(()=>n(263184))().default{getInitialState(){return{permissionsInviteStore:new(n(223023).Z),contextualInviteStore:new(n(807463).ZP)}}get stage(){return this.state.contextualInviteStore.state.inviteStage}}const o=i},969243:(e,t,n)=>{n.d(t,{r:()=>o});var i=()=>n(143346);const o=new(n(168469).q)((e=>{let{userId:t,spaceId:n}=e;return`${t}-${n}`}),(async function(e,t){var o;let{userId:s,spaceId:a}=t;const[r,l]=await Promise.all([i().bG({environment:e,inMemoryRecordCache:e.defaultRecordCache.inMemoryRecordCache,pointer:{table:n(989478).KJ,id:s},userId:s}),i().bG({environment:e,inMemoryRecordCache:e.defaultRecordCache.inMemoryRecordCache,pointer:(0,n(243225).v8)({userId:s,spaceId:a}),userId:s})]),d=null===(o=n(876822).default.state.currentSpaceViewStore)||void 0===o||null===(o=o.getModel())||void 0===o?void 0:o.first_joined_space_time,c=null==r?void 0:r.value,u=null==l?void 0:l.value;if(c&&u&&d)return{id:c.id,space_id:u.id,membership_type:u.membership_type,email:c.email,name:c.name,profile_photo:c.profile_photo,onboarding_completed:c.onboarding_completed,notion_user_version:c.version,space_user_version:u.version,first_joined_space_time:d}}));n(947115).exposeDebugValue("UserOnSpaceStore",o)},570065:(e,t,n)=>{n.d(t,{E:()=>i});const i=n(263184).default.createValue({showConvertTooltip:!1,forceShow:!1},{name:"WikiPromoStore"})},770975:(e,t,n)=>{n.d(t,{m:()=>s});var i=()=>n(142735),o=()=>n(749826);function s(e){const{featureGateId:t,whenEnabled:n,whenDisabled:s,disableExposureLogging:a}=e,r=function(e){const{featureGateId:t,disableExposureLogging:n}=e;return(0,i().VK)((()=>o().default.checkGate({gateName:t,disableExposureLogging:n})),[t,n])}({featureGateId:t,disableExposureLogging:a});return r?n:s}},29285:(e,t,n)=>{n.d(t,{V:()=>l});n(241792),n(667294);var i=()=>n(846550),o=()=>n(212493),s=()=>n(661641),a=()=>n(985481),r=n(785893);function l(e){let{title:t,tint:n,features:i}=e;const a=c(n),l="red"===n?"primary":"uiBluePrimary";return(0,r.jsxs)(o().jX,{gap:12,padding:"16px",style:a.container,children:[(0,r.jsx)(s().q,{styleName:"UIRegular-14px/Medium",colorName:l,children:t}),(0,r.jsx)(o().jX,{gap:12,children:i.map(((e,t)=>(0,r.jsx)(d,{feature:e,tint:n},`feature-${t}`)))})]})}function d(e){let{feature:t,tint:n}=e;const i=c(n),l="red"===n?"uiRedPrimary":"uiBluePrimary",d=t.beforeMessage&&t.message;return(0,r.jsxs)(o().jX,{direction:"row",gap:4,align:"center-left",height:22,children:[t.icon({...i.icon,...t.iconStyle??{}}),t.beforeMessage?(0,r.jsx)(s().q,{styleName:"Body-14px/Regular",colorName:"secondary",customStyles:{textDecoration:"line-through"},children:t.beforeMessage}):null,d?(0,a().k)(i.arrowIcon):null,t.message?(0,r.jsx)(s().q,{styleName:"Body-14px/Regular",colorName:l,children:t.message}):null]})}function c(e){return(0,i().yK)((t=>({container:{background:"red"===e?t.surface.wash:t.tint.uiBlue,borderRadius:6},icon:{display:"flex",height:20,width:20,color:t.icon.secondary,padding:2},arrowIcon:{width:12,height:12,color:t.icon.secondary}})),[e])}},662479:(e,t,n)=>{n.r(t),n.d(t,{AddOnUpgradeModal:()=>z,isCancellationStage:()=>le,isConfirmPurchaseStage:()=>re,isLimitReachedStage:()=>ae});n(821057);var i=n(667294),o=()=>n(146947),s=()=>n(219727),a=()=>n(142735),r=()=>n(846550),l=()=>n(714230),d=()=>n(646574),c=()=>n(629719),u=()=>n(976102),p=()=>n(893146),m=()=>n(381348),g=()=>n(788860),f=()=>n(568017),h=()=>n(696459),y=()=>n(707513),v=()=>n(308186),x=()=>n(102182),b=()=>n(745740),S=()=>n(312578),M=()=>n(906651),j=()=>n(840820),C=()=>n(765513),w=()=>n(148126),k=()=>n(688049),_=()=>n(858856),T=()=>n(876822),I=()=>n(518019),P=()=>n(538992),A=()=>n(576387),R=()=>n(768064),Z=()=>n(965014),B=()=>n(178504),D=()=>n(339538),L=()=>n(971025),O=()=>n(18281),H=()=>n(661769),V=()=>n(30795),U=()=>n(547526),E=()=>n(419157),N=()=>n(897257),F=()=>n(702548),K=n(785893);function z(e){const{data:t}=e,n=(0,O().GJ)(t),i=se(),o=(0,a().VK)((()=>T().default.state.currentSpaceStore),[]),r=(0,H().pQ)({spaceId:null==o?void 0:o.id}),l=O().YK(t),d=(0,s().O7)(),{isOpen:c,addOnFeature:u}=(0,a().VK)((()=>{const{state:e}=U().default;return{isOpen:e.open,addOnFeature:e.addOnFeature}}),[]);return d.device.isMobileNative?(0,K.jsx)(j().Z,{innerStyle:i.innerStyle,isOpen:c,onDismiss:()=>P().v5(),render:()=>(0,K.jsx)("div",{style:i.mobileModal,children:(0,K.jsx)("div",{style:i.innerModalPadding,children:(0,K.jsx)(oe,{})})})}):(0,K.jsx)(j().Z,{innerStyle:i.innerStyle,isOpen:c,onDismiss:()=>P().v5(),render:()=>(0,K.jsx)("div",{style:re()||ae()&&l&&n?i.largeModal:le()?i.cancellationModal:i.modal,children:(0,K.jsxs)("div",{style:le()?i.cancellationInnerModalPadding:i.innerModalPadding,children:[(0,K.jsx)(b().Z,{onClick:()=>{P().v5()},style:i.cancelButton,hoveredStyle:i.hovered,children:(0,k().D)(i.closeIcon)}),ae()&&u&&(0,K.jsx)(W,{addOnFeature:u,canPurchaseAddOn:n,isSubscribed:l}),re()&&u&&(0,K.jsx)(q,{addOnFeature:u,canPurchaseAddOn:n}),le()&&u&&(0,K.jsx)(ie,{addOnFeature:u,canPurchaseAddOn:n,data:t,billingData:r})]})})})}function W(e){const{addOnFeature:t,canPurchaseAddOn:n,isSubscribed:i}=e,o=se(),a=(0,s().O7)();return n&&i?(0,K.jsx)(q,{addOnFeature:t,canPurchaseAddOn:n}):(0,K.jsxs)(K.Fragment,{children:[(0,_().D)(o.icon),(0,K.jsx)(Y,{addOnFeature:t,canPurchaseAddOn:n}),(0,K.jsx)($,{addOnFeature:t,canPurchaseAddOn:n}),(0,K.jsx)(M().Z,{isLarge:!0,style:o.button,onClick:async()=>n?i?P().Cl(void 0):async function(e,t){await Z().y(e,{from:"plans_page",upsell:{type:"product",product:t,limit:{type:"none"}}}),P().v5()}(a,t):P().v5(),children:n?(0,K.jsx)(g()._H,{id:"addOnUpgradeModal.purchase.button.label",defaultMessage:"Purchase"}):(0,K.jsx)(g()._H,{id:"addOnUpgradeModal.gotIt.button.label",defaultMessage:"Got it"})})]})}function q(e){var t;const{addOnFeature:n,canPurchaseAddOn:i}=e,o=(0,s().O7)(),r=se(),d=(0,a().Kw)(N().subscriptionDataStoreInstance),u=(0,a().VK)((()=>U().default.state.open?U().default.state.coupon:null),[]),p=(0,a().VK)((()=>T().default.state.currentSpaceStore),[]),m=(0,H().pQ)({spaceId:null==p?void 0:p.id});if(!p)return null;if(o.device.isMobileNative||(0,c().gy)(m))return null;let f;if(!d||"unsubscribed_admin"!==d.type&&"subscribed_admin"!==d.type||(f=d),(0,c().TK)(m)){const e=(0,K.jsx)(g()._H,{id:"addOnUpgradeModal.errorMessage.switchPlanFromInAppPurchase",defaultMessage:"You're currently subscribed through an in-app purchase with Apple. To switch plans, cancel your subscription with Apple first."});return v().UW(e),null}const y=(0,K.jsx)(g()._H,{id:"addOnUpgradeModal.errorMessage.notAdmin",defaultMessage:"You don't have permissions to upgrade this workspace to an add-on. If you think this is a mistake please contact your administrator."});if(!(0,O().GJ)(d))return v().UW(y),null;const x=null===(t=f)||void 0===t||null===(t=t.customerData)||void 0===t?void 0:t.stripe;if(!x)return null;const b=(0,c().Hw)(null==m?void 0:m.subscription)??"month",S=u?function(e){if("ai_fifty_percent"===e)return(0,K.jsx)(g()._H,{id:"addOnUpgradeModal.coupon.fiftyPercent.label",defaultMessage:"50% off discount"});(0,h().t1)(e)}(u):"year"===b?(0,K.jsx)(g()._H,{id:"addOnUpgradeModal.coupon.twentyPercent.label",defaultMessage:"20% off discount"}):null;return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("img",{src:l().Z.images.pricing.aiLogoPng,style:r.aiLogo}),(0,K.jsx)(Y,{addOnFeature:n,canPurchaseAddOn:i}),(0,K.jsx)(X,{addOnFeature:n}),S?G(S):null,(0,K.jsx)(Q,{addOnFeature:n,interval:b,stripeData:x,spaceStore:p,billingData:m})]})}function G(e){const t=se();return(0,K.jsx)(b().Z,{style:{...t.sharedStyleForDiscountBadge},disabled:!0,children:(0,K.jsx)("div",{style:{...t.innerStyleForDiscountBadge},children:e})})}function Y(e){const{addOnFeature:t,canPurchaseAddOn:n}=e,i=se();let o;switch(t){case"ai":o=n?(0,K.jsx)(g()._H,{id:"subscriptionUpgradeModal.ai.addOn.title",defaultMessage:"Upgrade to unlimited AI"}):(0,K.jsx)(g()._H,{id:"addOnUpgrade.title.nonAdmin",defaultMessage:"You've used up all free AI responses in your plan"});break;case"sites_custom_hostnames":throw new Error("not implemented");default:(0,h().t1)(t)}return(0,K.jsx)("h3",{style:i.title,children:o})}function $(e){const{addOnFeature:t,canPurchaseAddOn:n}=e;let i;const o=se();switch(t){case"ai":i=n?(0,K.jsx)(g()._H,{id:"addOnUpgrade.description.admins",defaultMessage:"Your one-time promotion has ran out. To continue using AI features, purchase more AI uses for your workspace"}):(0,K.jsx)(g()._H,{id:"addOnUpgrade.description.nonAdmins",defaultMessage:"Your workspace’s one-time Notion AI promotion is over. Contact a workspace admin to purchase unlimited AI for your team to use."});break;case"sites_custom_hostnames":throw new Error("not implemented");default:(0,h().t1)(t)}return(0,K.jsx)("p",{style:o.paragraph,children:(0,K.jsx)("div",{style:o.text,children:i})})}function X(e){const{addOnFeature:t}=e;let n;const i=se();if(!(0,a().VK)((()=>T().default.state.currentSpaceStore),[]))return null;switch(t){case"ai":n=(0,K.jsx)(g()._H,{id:"addOnUpgrade.confirmation.description",defaultMessage:"Generate content, summarize key points, and find info across Notion and your connected apps"});break;case"sites_custom_hostnames":throw new Error("not implemented");default:(0,h().t1)(t)}return(0,K.jsx)("p",{style:i.paragraph,children:(0,K.jsx)("div",{style:i.text,children:n})})}function Q(e){const{addOnFeature:t,interval:n,stripeData:o,spaceStore:r,billingData:l}=e,d=se(),f=(0,s().O7)(),h=(0,a().Kw)(N().subscriptionDataStoreInstance),y=(0,V().V)(h),v=(0,c().bs)(null==l?void 0:l.subscription)??"USD",{tax:b,coupon:j}=(0,a().VK)((()=>({tax:U().default.state.open?U().default.state.tax:0,coupon:U().default.state.open?U().default.state.coupon:void 0})),[]),k=(0,a().VK)((()=>E().Z.getPrice(f,(e=>e.product===t&&e.billingInterval===n&&e.currencyCode===v))),[t,f,n,v]),_=(0,a().VK)((()=>E().Z.getPrice(f,(e=>e.product===t&&"month"===e.billingInterval&&e.currencyCode===v))),[t,v,f]);if((0,i.useEffect)((()=>{!async function(){const e=j?(0,m().Ef)((0,p().I8)(j)):void 0;if(k.result&&o&&null!=l&&l.address){const t=k.result.getCostPerBillingInterval({quantity:y,offer:e}).amount;await R().nf({environment:f,priceForTaxCalculation:t,address:l.address,customerId:(0,c().KU)(l),vatId:o.vatId})}}()}),[f,o,k,y,j,l]),!k.isLoaded||!_.isLoaded)return(0,K.jsx)(S().Z,{});if(!k.result||!_.result)return null;const T=k.result,Z=j?(0,m().Ef)((0,p().I8)(j)):void 0,L=T.getCostPerBillingInterval({quantity:y,offer:Z}).withAddedAmount(b),O=_.result,H=O.getMonthlyUnitCost();let z=O.getMonthlyCost({quantity:y});"year"===n&&(z=z.withMultipliedAmount(12));const{addOnCostItem:W,addOnCostItemWithMembers:q}=(0,B().OL)(t,y,n,(0,K.jsx)(F().W,{cost:H.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"}));return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsxs)("p",{style:d.monthlyCostText,children:[(0,K.jsx)("h3",{style:d.title,children:(0,K.jsx)(g()._H,{id:"addOnUpgrade.confirmation.monthlyCost.title",defaultMessage:"Add on"})}),(0,K.jsxs)("div",{style:d.costSectionTitle,children:[(0,K.jsx)("div",{children:W}),(0,K.jsx)("div",{style:d.rightAlign,children:(0,K.jsx)(F().W,{cost:z.toMoneyValue(),trailingZeroDisplay:"auto"})})]}),(0,K.jsx)("div",{style:d.costSection,children:q}),(0,K.jsx)(J,{cost:T.getCostPerBillingInterval({quantity:y}),fullCost:z}),(0,K.jsx)(ee,{price:T,coupon:j,quantity:y}),(0,K.jsxs)("div",{style:d.costSection,children:[(0,K.jsx)(g()._H,{id:"addOnUpgrade.confirmation.costSection.taxes",defaultMessage:"Taxes:"}),(0,K.jsx)("div",{style:d.rightAlign,children:(0,K.jsx)(F().W,{cost:{amount:b,currencyCode:v},trailingZeroDisplay:"auto"})})]}),(0,K.jsxs)("div",{style:d.totalCostSection,children:[(0,K.jsx)("h3",{style:d.title,children:(0,K.jsx)(g()._H,{id:"addOnUpgrade.confirmation.costSection.total",defaultMessage:"Total"})}),(0,K.jsx)("div",{style:d.rightAlign,children:(0,K.jsx)("h3",{style:d.title,children:(0,K.jsx)(F().W,{cost:L.toMoneyValue(),trailingZeroDisplay:"auto"})})})]}),(0,K.jsx)("div",{style:d.perMonth,children:(0,K.jsx)(g()._H,{id:"addOnUpgrade.confirmation.costSection.interval.label",defaultMessage:"{interval, select, month {per month} other {per year}}",values:{interval:n}})})]}),(0,K.jsx)(M().Z,{isLarge:!0,style:d.button,onClick:async()=>{const e=await I().Z.awaitData(f,{spaceId:r.id});if(!e)throw new Error("Billing data not loaded");const n=(0,c().Lg)(e),i=(0,u().AI)(n,{price:T,quantity:y});await A().Mg({environment:f,spaceStore:r,from:"add_on_upgrade_modal",desiredState:i,inAppOffer:j}),P().v5();const o=D().aQ({addOnFeature:t});o&&x().oV(o)},children:(0,K.jsx)(g()._H,{id:"addOnUpgradeModal.confirmPurchase.button.label",defaultMessage:"Confirm purchase"})}),(0,K.jsx)("p",{style:d.termsOfService,children:(0,K.jsx)("div",{style:d.text,children:(0,K.jsx)(g()._H,{id:"addOnUpgrade.confirmation.prorated.description",defaultMessage:"Performance subject to <fairUsePolicies>fair use policies</fairUsePolicies>.{br}By clicking Confirm Purchase you agree to the <terms>Notion AI Supplementary Terms</terms>.",values:{br:(0,K.jsx)("br",{}),fairUsePolicies:e=>(0,K.jsx)(C().Z,{href:(0,w().UY)("ai.fairUsePolicies"),children:e}),terms:e=>(0,K.jsx)(C().Z,{href:(0,w().UY)("ai.terms"),children:e})}})})})]})}function J(e){const t=se(),{cost:n,fullCost:i}=e;if(n.amount===i.amount)return null;const o=i.minus(n),s=Math.floor(o.amount/i.amount*100);return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsxs)("div",{style:t.costSectionTitle,children:[(0,K.jsx)("div",{children:(0,K.jsx)(g()._H,{id:"addOnUpgrade.confirmation.costSection.annual.dynamicDiscountMessage",defaultMessage:"<bold>Annual discount ({discountPercent}%)</bold>",values:{bold:e=>(0,K.jsx)("b",{children:e}),discountPercent:s}})}),(0,K.jsx)("div",{style:t.greenRightAlign,children:(0,K.jsx)(F().W,{cost:o.withMultipliedAmount(-1).toMoneyValue(),trailingZeroDisplay:"auto",currencySign:"standard"})})]}),(0,K.jsx)("div",{style:t.costSection,children:(0,K.jsx)(g()._H,{id:"addOnUpgrade.confirmation.costSection.specialDiscount.annualPlanMessage",defaultMessage:"for being on the annual plan"})})]})}function ee(e){const t=se(),{price:n,coupon:i,quantity:o}=e;if(!(0,m().pp)(i))return null;const s=n.getDiscountPerBillingInterval({quantity:o,coupon:i}).withMultipliedAmount(-1);return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsxs)("div",{style:t.costSectionTitle,children:[(0,K.jsx)("div",{children:(0,K.jsx)(g()._H,{id:"addOnUpgrade.confirmation.costSection.specialDiscount",defaultMessage:"<bold>Special discount ({percentage})</bold>",values:{bold:e=>(0,K.jsx)("b",{children:e}),percentage:(0,L().ov)(i)}})}),(0,K.jsx)("div",{style:t.greenRightAlign,children:(0,K.jsx)(F().W,{cost:s,trailingZeroDisplay:"auto",currencySign:"standard"})})]}),(0,K.jsx)("div",{style:t.costSection,children:(0,K.jsx)(g()._H,{id:"addOnUpgrade.confirmation.costSection.specialDiscount.threeMonthsMessage",defaultMessage:"for the next 3 months"})})]})}function te(e){const{addOnFeature:t}=e,n=se(),i=(0,s().O7)();return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("div",{style:n.buttonWithTopPadding,children:(0,K.jsx)(b().Z,{style:n.redButton,hoveredStyle:{background:f().ZP.redWithAlpha(.8)},onClick:async()=>{const e=(0,K.jsx)(g()._H,{id:"addOnUpgradeModal.cancellationStage.errorMessage",defaultMessage:"Unable to cancel add-on subscription. Please try again later."}),n=T().default.state.currentSpaceStore;if(!n)return v().UW(e);const o=await I().Z.awaitData(i,{spaceId:n.id});if(!o)throw new Error("Billing data not loaded");const s=(0,c().Lg)(o),a=(0,u().t4)(s,t);await A().Mg({environment:i,spaceStore:n,from:"add_on_upgrade_modal",desiredState:a}),P().v5()},children:(0,K.jsx)(g()._H,{id:"addOnUpgradeModal.midterm.yesButton.label",defaultMessage:"Schedule removal"})})}),(0,K.jsx)("div",{style:n.buttonWithTopPadding,children:(0,K.jsx)(b().Z,{style:n.noButton,onClick:()=>P().v5(),children:(0,K.jsx)(g()._H,{id:"addOnUpgradeModal.noButton.label",defaultMessage:"Cancel"})})})]})}function ne(e){var t;const{billingData:n}=e,i=se(),s=null==n||null===(t=n.subscription)||void 0===t||null===(t=t.currentPeriodEnd)||void 0===t?void 0:t.toMillis();return s?(0,K.jsx)("p",{style:i.paragraph,children:(0,K.jsx)("div",{style:i.text,children:(0,K.jsx)(g()._H,{id:"addOnUpgradeModal.midterm.cancellation.description",defaultMessage:"Thank you for your input! You can continue to enjoy Notion AI until the end of your billing period on <bold>{periodEnd}</bold>. You can resubscribe anytime.",values:{periodEnd:(0,d().Yx)(s,"long",o().locale),bold:e=>(0,K.jsx)("b",{children:e})}})})}):null}function ie(e){const{addOnFeature:t,canPurchaseAddOn:n,billingData:i,data:o}=e,s=se();if(!n)return null;let a;switch(t){case"ai":a=(0,K.jsx)(g()._H,{id:"addOnUpgradeModal.midterm.cancellation.title.ai",defaultMessage:"Remove AI at the end of your billing period?"});break;case"sites_custom_hostnames":a=(0,K.jsx)(g()._H,{id:"addOnUpgradeModal.midterm.cancellation.title.sites",defaultMessage:"Remove Custom domains at the end of your billing period?"});break;default:(0,h().t1)(t)}return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("h3",{style:s.cancellationTitle,children:a}),(0,K.jsx)(ne,{billingData:i}),(0,K.jsx)(te,{data:o,addOnFeature:t})]})}function oe(){const e=se(),t=(0,s().O7)();let n=(0,K.jsx)(g()._H,{id:"addOnUpgradeModal.mobileMessage.button.label",defaultMessage:"Use the web or desktop app to add Notion AI to your plan and go unlimited."});return(t.device.isIOS||t.device.isIpad)&&(n=(0,K.jsx)(g()._H,{id:"addOnUpgradeModal.mobileMessage.ios.button.label",defaultMessage:"Unlimited AI cannot be purchased on mobile."})),(0,K.jsxs)(K.Fragment,{children:[(0,_().D)(e.icon),(0,K.jsx)("h3",{style:e.title,children:(0,K.jsx)(g()._H,{id:"addOnUpgrade.title.nonAdmin",defaultMessage:"You've used up all free AI responses in your plan"})}),(0,K.jsx)("p",{style:e.paragraph,children:(0,K.jsx)("div",{style:e.text,children:n})}),(0,K.jsx)(M().Z,{isLarge:!0,style:e.button,onClick:()=>P().v5(),children:(0,K.jsx)(g()._H,{id:"addOnUpgradeModal.gotIt.button.label",defaultMessage:"Got it"})})]})}function se(){return(0,r().yK)((e=>({modal:{maxWidth:350,padding:24,fontSize:14,textAlign:"center"},largeModal:{maxWidth:420,padding:24,fontSize:14,textAlign:"center"},mobileModal:{padding:24,fontSize:14,textAlign:"center"},cancellationModal:{maxWidth:350,padding:"24px 16px 12px",fontSize:14,textAlign:"center"},innerModalPadding:{padding:"0px 8px"},cancellationInnerModalPadding:{padding:0},innerStyle:{borderRadius:10},title:{margin:0,marginBottom:0},cancellationTitle:{margin:0,marginBottom:0,marginTop:14},monthlyCostText:{textAlign:"left",paddingBottom:16},costSection:{margin:0,marginBottom:8,display:"flex",color:e.mediumTextColor},costSectionTitle:{display:"flex",color:e.mediumTextColor},totalCostSection:{display:"flex"},paymentMethodSection:{marginBottom:8,marginTop:8,display:"flex"},rightAlign:{position:"absolute",right:24},greenRightAlign:{position:"absolute",right:24,color:e.invoiceGreen},paragraph:{lineHeight:1.4,marginTop:4,marginBottom:12},termsOfService:{fontSize:"small",marginTop:8},text:{margin:0,color:e.mediumTextColor,marginBottom:8},icon:{display:"inline",height:24,fill:e.lightIconColor,marginTop:8,marginBottom:8},aiLogo:{height:60},button:{width:"100%"},buttonWithTopPadding:{paddingTop:12},noButton:{width:"100%",height:24,display:"inline-flex",alignItems:"center",justifyContent:"center"},cancelButton:{position:"absolute",top:"10px",right:"10px",background:e.buttonHoveredBackground,borderRadius:"100%",width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",zIndex:10},redButton:{width:"100%",color:f().ZP.white,background:e.redBadgeBackground,display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,borderRadius:4,lineHeight:1.2,paddingLeft:12,paddingRight:12,fontWeight:y().Ue.medium},closeIcon:{width:14,fill:e.mediumTextColor},hovered:{background:e.buttonPressedBackground},perMonth:{position:"absolute",right:24,display:"flex",color:e.mediumTextColor,marginTop:-4},sharedStyleForDiscountBadge:{display:"inline-flex",alignItems:"center",borderRadius:4},innerStyleForDiscountBadge:{padding:"2px 6px",borderRadius:4,color:e.regularTextColor,background:e.accentColors.gray[75],fontWeight:400,fontSize:14,lineHeight:"16px",letterSpacing:"0.04em",whiteSpace:"nowrap"}})),[])}function ae(){return de("limit_reached")}function re(){return de("confirm_purchase")}function le(){return de("cancel_plan")}function de(e){const t=U().default.state;if(t.open)return t.stage===e}},971025:(e,t,n)=>{n.d(t,{IY:()=>u,W9:()=>c,fz:()=>p,ov:()=>d,yR:()=>m});n(667294);var i=()=>n(396955),o=()=>n(381348),s=()=>n(122792),a=()=>n(788860),r=()=>n(696459),l=n(785893);function d(e){switch(e){case"team_three_months":case"ai_fifty_percent":case"lic_25":case"lic_50":case"new_year_2025":return(0,l.jsx)(a()._H,{id:"coupon.percentage.fiftyPercent",defaultMessage:"50%"});case"team_annual":case"business_three_months":case"business_annual":case"enterprise_three_months":case"resurrection_offer":case"enterprise_annual":return(0,l.jsx)(a()._H,{id:"coupon.percentage.tenPercent",defaultMessage:"10%"});default:(0,r().t1)(e)}}function c(e){switch(e){case"team_annual":case"business_annual":case"enterprise_annual":return(0,l.jsx)(a()._H,{id:"coupon.duration.twelveMonths",defaultMessage:"12 months"});case"team_three_months":case"business_three_months":case"enterprise_three_months":case"ai_fifty_percent":return(0,l.jsx)(a()._H,{id:"coupons.duration.threeMonths",defaultMessage:"3 months"})}}function u(e){return"resurrection_offer"===e.campaign?"fifty_off_3_months":"lic_25"===e.campaign?"twenty_five_off_12_months":"lic_50"===e.campaign?"fifty_off_12_months":"new_year_2025"===e.campaign?"fifty_off_3_months":void 0}function p(e,t,n,o){return(0,s().QM)(e)?o&&(0,i().yC)(o.campaign,t)?o:void 0:n&&e===t&&(0,i().yC)(n.campaign,e)?n:void 0}function m(e,t,n){if(e&&(0,o().PG)(e)&&function(e,t,n){const o=(0,i().b4)(e.offer.campaign).includes(t),s=!!n&&(0,i().l8)(e.offer.campaign,n);return o&&s}(e,t,n))return(0,o().U_)(e)}},19072:(e,t,n)=>{n.d(t,{AU:()=>y,Ly:()=>u,UI:()=>j,ZK:()=>m,aq:()=>d,bp:()=>p,cM:()=>s,gU:()=>l,i$:()=>g,j2:()=>a,mY:()=>M,or:()=>r,oy:()=>h});var i=()=>n(122792),o=()=>n(788860);const s=["free","plus","business","enterprise"],a=(0,o().vU)({activePlan:{id:"ProductLimit.activePlan",defaultMessage:"Active plan"},addToPlan:{id:"ProductLimit.addToPlan",defaultMessage:"Add to plan"},aiAddOnLabel:{id:"ProductLimit.aiAddOnLabel",defaultMessage:"Notion AI"},aiAddOnUsage:{id:"ProductLimit.aiAddOnUsage",defaultMessage:"{usedCount}/{totalCount} AI responses used"},aiAddedToPlan:{id:"ProductLimit.aiAddedToPlan",defaultMessage:"Added to plan"},otherPlans:{id:"ProductLimit.otherPlans",defaultMessage:"Other plans to consider"},teamBlocksLabel:{id:"ProductLimit.teamBlocksLabel",defaultMessage:"Team blocks"},teamBlocksUsage:{id:"ProductLimit.teamBlocksUsage",defaultMessage:"{usedCount}/{totalCount} team blocks used"},upgrade:{id:"ProductLimit.upgrade",defaultMessage:"Upgrade"},restrictions:{id:"ProductLimit.downgrade",defaultMessage:"Downgrade"},ctaPrice:{id:"SpaceSubscriptionPlans.productCta",defaultMessage:"From {money}/member per month"},ctaButtonLabel:{id:"SpaceSubscriptionPlans.productCtaButtonLabel",defaultMessage:"Upgrade"},unlimitedBlocksForIndividuals:{id:"SpaceSubscriptionPlans.includes.unlimitedBlocksForIndividuals",defaultMessage:"Unlimited blocks for individuals"},unlimitedBlocksForTeams:{id:"SpaceSubscriptionPlans.includes.unlimitedBlocksForTeams",defaultMessage:"Unlimited blocks for teams"},unlimitedFileUploads:{id:"SpaceSubscriptionPlans.includes.unlimitedFileUploads",defaultMessage:"Unlimited file uploads"},collaborativeWorkspace:{id:"SpaceSubscriptionPlans.includes.collaborativeWorkspaces",defaultMessage:"Collaborative workspace"},integrations:{id:"SpaceSubscriptionPlans.includes.integrations",defaultMessage:"Slack, GitHub, and more integrations"},pageHistory7Days:{id:"SpaceSubscriptionPlans.includes.pageHistory.7",defaultMessage:"7 day page history"},pageHistory30Days:{id:"SpaceSubscriptionPlans.includes.pageHistory.30",defaultMessage:"30 day page history"},pageHistory90Days:{id:"SpaceSubscriptionPlans.includes.pageHistory.90",defaultMessage:"90 day page history"},pageHistoryUnlimited:{id:"SpaceSubscriptionPlans.includes.pageHistory.unlimited",defaultMessage:"Unlimited page history"},guests10:{id:"SpaceSubscriptionPlans.includes.guests.10",defaultMessage:"Invite up to 10 guests"},guests100:{id:"SpaceSubscriptionPlans.includes.guests.100",defaultMessage:"Invite up to 100 guests"},guests250:{id:"SpaceSubscriptionPlans.includes.guests.250",defaultMessage:"Invite up to 250 guests"},guestsCustom:{id:"SpaceSubscriptionPlans.includes.guests.custom",defaultMessage:"Custom guest limits"},aiCredits:{id:"SpaceSubscriptionPlans.includes.aiCredits",defaultMessage:"10 free AI credits"},samlSSO:{id:"SpaceSubscriptionPlans.includes.saml.sso",defaultMessage:"SAML SSO"},userProvisioning:{id:"SpaceSubscriptionPlans.includes.scim",defaultMessage:"User provisioning (SCIM)"},advancedSecurityControls:{id:"SpaceSubscriptionPlans.includes.advancedSecurityControls",defaultMessage:"Advanced security controls"},auditLog:{id:"SpaceSubscriptionPlans.includes.auditLog",defaultMessage:"Audit log"},privateTeamspaces:{id:"SpaceSubscriptionPlans.includes.privateTeamspaces",defaultMessage:"Private Teamspaces"},bulkPdfExport:{id:"SpaceSubscriptionPlans.includes.bulkPdfExport",defaultMessage:"Bulk PDF export"},customerSuccessManager:{id:"SpaceSubscriptionPlans.includes.customerSuccessManager",defaultMessage:"Customer success manager"},includesFree:{id:"SpaceSubscriptionPlans.includes.free",defaultMessage:"Includes"},includesPlus:{id:"SpaceSubscriptionPlans.includes.plus",defaultMessage:"Everything in Free, and"},includesBusiness:{id:"SpaceSubscriptionPlans.includes.business",defaultMessage:"Everything in Plus, and"},includesEnterprise:{id:"SpaceSubscriptionPlans.includes.enterprise",defaultMessage:"Everything in Business, and"},seeAllPlans:{id:"SpaceSubscriptionPlans.seeAllPlans",defaultMessage:"See all plans"},allPlans:{id:"spaceSubscriptionPlans.allPlans.title",defaultMessage:"All plans"},salesAssistedDisabled:{id:"spaceSubscriptionPlans.referToSalesRep",defaultMessage:"Please contact your Notion account manager to make changes to your plan"},request:{id:"spaceSubscriptionPlans.inAppRequests.request",defaultMessage:"Request"},pending:{id:"spaceSubscriptionPlans.inAppRequests.requestPending",defaultMessage:"Pending"},approved:{id:"spaceSubscriptionPlans.inAppRequests.requestApproved",defaultMessage:"Approved"},declined:{id:"spaceSubscriptionPlans.inAppRequests.requestDeclined",defaultMessage:"Declined"},requestPendingTooltip:{id:"spaceSubscriptionPlans.inAppRequests.requestPendingTooltip",defaultMessage:"You’ve already sent a request to your workspace owners"}}),r=(0,o().vU)({free:{id:"ProductOverview.free.caption",defaultMessage:"Organize every corner of your work and life"},plus:{id:"ProductOverview.plus.caption",defaultMessage:"For small groups to plan and get organized"},business:{id:"ProductOverview.business.caption",defaultMessage:"For small groups to plan and get organized"},enterprise:{id:"ProductOverview.enterprise.caption",defaultMessage:"For companies connecting several teams and tools"}}),l={free:a.includesFree,student:a.includesPlus,plus:a.includesPlus,business:a.includesBusiness,enterprise:a.includesEnterprise},d=(0,o().vU)({summary:{id:"plansPage.highlightCards.summary",defaultMessage:"Summary"},highlights:{id:"plansPage.highlightCards.highlights",defaultMessage:"Highlights"},compareAllFeatures:{id:"plansPage.compareAllFeatures.button.label",defaultMessage:"Compare all features"},price:{id:"plansPage.price",defaultMessage:"{money} per member / month"},priceOnTrial:{id:"plansPage.price.onTrial",defaultMessage:"{money} per member / month until {date}"},billedAnnually:{id:"plansPage.billedAnnually",defaultMessage:"billed annually"},billedMonthly:{id:"plansPage.billedMonthly",defaultMessage:"billed monthly"},priceMonthly:{id:"plansPage.price.monthly",defaultMessage:"{money} billed monthly"}}),c=(0,o().vU)({free:{id:"plansPage.activePlan.free.description",defaultMessage:"For organizing every corner of your work and life"},student:{id:"plansPage.activePlan.student.description",defaultMessage:"For students & educators"},personal:{id:"plansPage.activePlan.personal.description",defaultMessage:"A place to plan and get organized, with a 1-member limit"},personalForIos:{id:"plansPage.activePlan.personal.ios.description",defaultMessage:"Purchased in-app, through Apple"},personalForAndroid:{id:"plansPage.activePlan.personal.android.description",defaultMessage:"Purchased in-app, through Google Play"},plus:{id:"plansPage.activePlan.plus.description",defaultMessage:"A place for small groups to plan & get organized"},business:{id:"plansPage.activePlan.business.description",defaultMessage:"For companies to connect several teams & tools"},enterprise:{id:"plansPage.activePlan.enterprise.description",defaultMessage:"Advanced controls & support to run your entire org"}}),u=(0,o().vU)({singlePlayerPlans:{id:"plansPage.activePlan.generic.tooltip",defaultMessage:"Your plan has a 1-member limit. Switch your plan to add more members."},iosPlans:{id:"plansPage.activePlan.personal.ios.tooltip",defaultMessage:"Your plan has a 1-member limit. You can cancel this plan through Apple Subscriptions, and then upgrade in Notion."},androidPlans:{id:"plansPage.activePlan.personal.android.tooltip",defaultMessage:"Your plan has a 1-member limit. You can cancel this plan through Google Play, and then upgrade in Notion."}}),p={label:i().aw.personalForIos,description:c.personalForIos,tooltip:u.iosPlans},m={label:i().aw.personalForAndroid,description:c.personalForAndroid,tooltip:u.androidPlans},g={free:{label:i().aw.free,description:c.free},student:{label:i().aw.educationPlus,description:c.student},personal:{label:i().aw.plus,description:c.personal,tooltip:u.singlePlayerPlans},plus:{label:i().aw.plus,description:c.plus},business:{label:i().aw.business,description:c.business},enterprise:{label:i().aw.enterprise,description:c.enterprise}},f=(0,o().vU)({description:{id:"plansPage.aiSection.description",defaultMessage:"Unlimited use of AI for Q&A, Autofill, Writer, and more"},descriptionV2:{id:"plansPage.aiSection.descriptionV2",defaultMessage:"Search, generate, analyze, and chat with unlimited AI"},price:{id:"plansPage.aiSection.price",defaultMessage:"From {money} per member / month, billed annually"},added:{id:"plansPage.aiSection.added",defaultMessage:"Added"}}),h={heading:a.aiAddOnLabel,description:f.description,descriptionV2:f.descriptionV2,planPrice:f.price,ctaMessage:a.addToPlan,added:f.added,request:a.request},y=(0,o().vU)({active:{id:"plansPage.highlightCards.badge.active",defaultMessage:"Active"},popular:{id:"plansPage.highlightCards.badge.popular",defaultMessage:"Popular"},best_value:{id:"plansPage.highlightCards.badge.bestValue",defaultMessage:"Best value"},recommended:{id:"plansPage.highlightCards.badge.recommended",defaultMessage:"Recommended"},free_trial:{id:"plansPage.highlightCards.badge.freeTrial",defaultMessage:"Free trial"},coming_soon:{id:"plansPage.highlightCards.badge.comingSoon",defaultMessage:"Coming soon"},fifty_off_3_months:{id:"plansPage.highlightCards.badge.fiftyOff",defaultMessage:"50% off"},fifty_off_12_months:{id:"plansPage.highlightCards.badge.fiftyOff",defaultMessage:"50% off"},twenty_five_off_12_months:{id:"plansPage.highlightCards.badge.twentyFiveOff",defaultMessage:"25% off"}}),v=(0,o().vU)({guests:{id:"plansPage.highlightCards.free.guests",defaultMessage:"Up to 10 guests"},pageHistory:{id:"plansPage.highlightCards.free.pageHistory",defaultMessage:"7 day page history"},integrations:{id:"plansPage.highlightCards.free.integrations",defaultMessage:"70+ integrations"},integrationsTooltip:{id:"plansPage.highlightCards.free.integrations.tooltip",defaultMessage:"Connect your Notion content to Slack, Google Drive, Figma and more"}}),x=(0,o().vU)({guests:{id:"plansPage.highlightCards.plus.guests",defaultMessage:"Up to 100 guests"},pageHistory:{id:"plansPage.highlightCards.plus.pageHistory",defaultMessage:"30 day page history"},blocks:{id:"plansPage.highlightCards.plus.blocks",defaultMessage:"Unlimited blocks"},blocksTooltip:{id:"plansPage.highlightCards.plus.blocks.tooltip",defaultMessage:"Workspaces with 2+ members are limited to {blockLimitNumber} blocks on the Free plan"},fileUploads:{id:"plansPage.highlightCards.plus.fileUploads",defaultMessage:"Unlimited file uploads"},charts:{id:"plansPage.highlightCards.plus.charts",defaultMessage:"Unlimited charts"}}),b=(0,o().vU)({guests:{id:"plansPage.highlightCards.business.guests",defaultMessage:"Up to 250 guests"},pageHistory:{id:"plansPage.highlightCards.business.pageHistory",defaultMessage:"90 day page history"},teamspaces:{id:"plansPage.highlightCards.business.teamspaces",defaultMessage:"Private teamspaces"},teamspacesTooltip:{id:"plansPage.highlightCards.business.teamspaces.tooltip",defaultMessage:"Private spaces for you and your team to create and organize content"},saml:{id:"plansPage.highlightCards.business.saml.sso",defaultMessage:"SAML SSO"}}),S=(0,o().vU)({guests:{id:"plansPage.highlightCards.enterprise.guests",defaultMessage:"Custom guest limits"},userProvisioning:{id:"plansPage.highlightCards.enterprise.userProvisioning",defaultMessage:"User provisioning"},analytics:{id:"plansPage.highlightCards.enterprise.analytics",defaultMessage:"Workspace analytics"},auditLog:{id:"plansPage.highlightCards.enterprise.auditLog",defaultMessage:"Audit log"},security:{id:"plansPage.highlightCards.enterprise.security",defaultMessage:"Advanced security"}}),M={free:i().aw.free,plus:i().aw.plus,business:i().aw.business,enterprise:i().aw.enterprise};function j(e){let{intl:t,salesStatus:n}=e;return{free:[v.guests,v.pageHistory,{message:v.integrations,tooltip:t.formatMessage(v.integrationsTooltip)}],plus:[x.guests,x.pageHistory,{message:x.blocks,tooltip:t.formatMessage(x.blocksTooltip,{blockLimitNumber:(0,i().v5)()})},x.fileUploads,x.charts],business:[b.guests,b.pageHistory,{message:b.teamspaces,tooltip:t.formatMessage(b.teamspacesTooltip)},b.saml],enterprise:[void 0!==n?S.guests:b.guests,S.userProvisioning,S.analytics,S.auditLog,S.security]}}},253032:(e,t,n)=>{n.r(t),n.d(t,{CreateTeamFromPageConfirmModal:()=>y});n(667294);var i=()=>n(219727),o=()=>n(142735),s=()=>n(846550),a=()=>n(788860),r=()=>n(707513),l=()=>n(661297),d=()=>n(906651),c=()=>n(840820),u=()=>n(251932),p=()=>n(424097),m=()=>n(174896),g=()=>n(853680),f=()=>n(586270),h=n(785893);function y(){const e=(0,i().O7)(),t=(0,a().YB)(),n=(0,s().yK)((e=>({modal:{maxWidth:350,padding:24},loopIcon:{height:28,width:28,fill:e.darkTextColor},infoIcon:{height:16,width:16,fill:e.lightIconColor,marginRight:4},title:{marginTop:16,marginBottom:12,color:e.regularTextColor,fontWeight:r().Ue.semibold,fontSize:18},description:{color:e.darkTextColor,textAlign:"center",fontSize:14,marginBottom:18},confirmButton:{width:"100%",marginBottom:8},cancelButton:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:14}})),[]),y=(0,o().VK)((()=>g().default.state.open),[]);return(0,h.jsx)(c().Z,{onDismiss:()=>{g().default.setState({open:!1})},render:()=>(0,h.jsx)("div",{style:n.modal,children:(0,h.jsxs)(u().gq,{flexDirection:"column",justifyContent:"center",alignItems:"center",children:[(0,p().z)(n.loopIcon),(0,h.jsx)("div",{style:n.title,children:(0,h.jsx)(a()._H,{id:"createTeamFromPage.confirmModal.title",defaultMessage:"Turn into teamspace?"})}),(0,h.jsx)("div",{style:n.description,children:(0,h.jsx)(a()._H,{id:"createTeamFromPage.confirmModal.description",defaultMessage:"This will move this page into a newly created teamspace along with people who already have access to this page."})}),(0,h.jsx)(d().Z,{isLarge:!0,style:n.confirmButton,onClick:()=>{if(g().default.state.open){const{pageStore:n,flowId:i}=g().default.state;m().Sq({environment:e,intl:t,page:n,flowId:i}),g().default.setState({open:!1})}},children:(0,h.jsx)(a()._H,{id:"createTeamFromPage.confirmModal.confirmButton",defaultMessage:"Create teamspace"})}),(0,h.jsx)(l().Z,{isLarge:!0,style:n.cancelButton,onClick:()=>g().default.setState({open:!1}),children:(0,h.jsx)(a()._H,{id:"createTeamFromPage.confirmModal.cancelButton",defaultMessage:"Cancel"})}),(0,h.jsx)(f().Z,{message:(0,h.jsx)(a()._H,{id:"createTeamFromPage.confirmModal.learnMore",defaultMessage:"Learn more about teamspaces"}),analyticsFrom:"teams_learn_more_turn_page_into_team",helpCenterLocation:"bestPractices"})]})}),isOpen:y})}},707581:(e,t,n)=>{n.d(t,{Z:()=>l});n(667294);var i=()=>n(788860),o=()=>n(654133),s=()=>n(168441),a=()=>n(998901),r=n(785893);function l(e){let{iconStyle:t}=e;return(0,r.jsx)(o().Z,{textWrap:!0,style:{width:210},placement:a().Placement.Bottom,renderTooltip:()=>(0,r.jsx)(i()._H,{id:"teamLockIcon.tooltip",defaultMessage:"Private teamspaces can only be accessed or joined by invitation"}),render:e=>(0,r.jsx)("div",{...e,children:(0,s().Q)(t)})})}},939123:(e,t,n)=>{n.r(t),n.d(t,{TeamPermissionsInvite:()=>D});n(267602),n(653476),n(241792),n(667294);var i=()=>n(219727),o=()=>n(142735),s=()=>n(846550),a=()=>n(446866),r=()=>n(801812),l=()=>n(788860),d=()=>n(198829),c=()=>n(711658),u=()=>n(301741),p=()=>n(122671),m=()=>n(286338),g=()=>n(352230),f=()=>n(88476),h=()=>n(91502),y=()=>n(876822),v=()=>n(296631),x=()=>n(576387),b=()=>n(513670),S=()=>n(827973),M=()=>n(448419),j=()=>n(255577),C=()=>n(92175),w=()=>n(388284),k=()=>n(654133),_=()=>n(615634),T=()=>n(998901),I=()=>n(128119),P=()=>n(741381),A=()=>n(936968),R=n(785893);function Z(e){const{selectedRole:t,allRoles:n,onChange:a,store:r,labelStyle:c}=e,{device:u}=(0,i().O7)(),p=(0,s().Fg)(),m=(0,A().q)(r),f=(0,o().VK)((()=>{const{currentSpaceStore:e}=y().default.state;return null==e?void 0:e.canEditMembership()}),[]),v=(0,o().VK)((()=>r.isDefault()),[r]);return(0,R.jsx)(M().ZP,{popupType:u.isMobile?M().Z4.SlideUp:M().Z4.Popup,renderOrigin:e=>(0,R.jsxs)(C().Z,{style:c,...e,children:[(0,R.jsx)(l()._H,{...h().q9[t].label}),(0,_().i)({width:10,marginLeft:4,fill:p.lightIconColor})]}),placementToOrigin:I().Iw.Bottom,render:e=>{const i=[{key:"roles",render:e=>(0,R.jsx)(w().Z,{...e,topBorder:0!==e.index}),items:n.map((n=>{const{isDisabled:i,disabledReason:o}=(0,P().j)({role:n,isCurrentUserTeamOwner:Boolean(m),userIsSpaceAdmin:Boolean(f),isDefaultTeam:v}),s={key:n,render:e=>(0,R.jsx)(k().Z,{disableTooltip:!i,placement:T().Placement.Right,textWrap:!0,renderTooltip:()=>o,render:o=>(0,R.jsx)("span",{...o,children:(0,R.jsx)(S().Z,{...e,checkState:b().Xy(n,t),disabled:i,disabledFeedback:i,title:(0,R.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,R.jsx)(l()._H,{...h().q9[n].label})}),caption:(0,R.jsx)("span",{style:{color:p.mediumTextColor},children:(0,R.jsx)(l()._H,{...h().q9[n].caption})}),shouldWrapCaption:!0})})}),action:()=>{a(n),e.close()}};return s}))}];let o;return o=u.isMobile?{menuType:g().o.Modal,title:(0,R.jsx)(l()._H,{id:"teamPermissionsMenu.mobile.title",defaultMessage:"Select teamspace role"}),right:(0,R.jsx)(l()._H,{id:"teamPermissionsMenu.mobile.doneButton.label",defaultMessage:"Done"}),onClickRight:e.close}:{menuType:g().o.Popup,width:264},(0,R.jsx)(d().Z,{...o,children:(0,R.jsx)(j().Z,{type:j().i.Vertical,initialFocus:void 0,sections:i})})}})}const B="member";function D(e){const{store:t,onEmptySubmit:n}=e,a=(0,i().O7)();(0,r().r5)((async()=>{await x().bi(a)}),[]);const l=(0,o().qz)(e.permissionsInviteStore,v().Z),u=(0,o().VK)((()=>Boolean(l.state.isFocused)),[l]),p=(0,o().VK)((()=>l.state.tokenQuery),[l]),m=(0,o().VK)((()=>u&&p.length>0),[u,p]),f=(0,s().yK)((e=>({permissionsInviteSearchRequest:{position:"absolute",width:"100%",borderRadius:4,backgroundColor:e.contentBackground,boxShadow:e.largeBoxShadow,marginTop:4},scroller:{zIndex:1}})),[]);function h(e){l.setState({...l.state,isFocused:e})}return(0,R.jsx)("div",{onFocus:()=>h(!0),onBlur:()=>h(!1),children:(0,R.jsx)(d().Z,{menuType:g().o.Popup,header:(0,R.jsx)(L,{store:t,permissionsInviteStore:l,onEmptySubmit:n}),scrollerStyle:f.scroller,width:"100%",tokenInputHeader:!1,disableScroller:!0,children:m&&(0,R.jsx)("div",{style:f.permissionsInviteSearchRequest,children:(0,R.jsx)(c().Z,{permissionsInviteStore:l,store:t,defaultRoleForSpaceBot:"editor",shouldShowBots:!1,shouldShowGroups:!0,sectionRenderLimit:10,membersOnly:!1,hideUserTypeToken:!0,disableInvitedUsers:!0})})})})}function L(e){const{store:t,permissionsInviteStore:n,onEmptySubmit:i}=e,r=(0,l().YB)(),d=(0,o().VK)((()=>Boolean(n.state.isFocused)),[n]),c=(0,o().VK)((()=>n.state.tokenQuery),[n]),m=(0,o().VK)((()=>n.state.inviteRole),[n]),g=(0,o().VK)((()=>n.state.inviteTargets),[n]),h=(0,s().yK)((e=>({inputTokenVerticalMargin:{marginTop:3,marginBottom:3},tokenMenuItem:{alignItems:"unset",borderRadius:4,paddingTop:5,paddingBottom:5,paddingLeft:8,paddingRight:5,boxShadow:d?e.outlineBlueInputBoxShadow:e.inputBoxShadow,maxHeight:"40vh"},inputDiv:{marginBottom:0}})),[d]);function y(e){if(n.state.isInviteTargetsEmpty)return;const t=n.state.inviteTargets.filter((t=>t!==e));0===g.length?n.setState({...n.state,inviteTargets:[],inviteRole:B,isInviteTargetsEmpty:!0}):n.setState({...n.state,inviteTargets:t})}function v(e){n.setState({...n.state,isFocused:e})}const x=g.map((e=>{const t="newUser"===e.type?e.value.email:`${e.type}-${e.value.id}`;return(0,R.jsx)(u().Z,{target:e,onClickRemove:y,role:m,shouldWrap:!0,style:h.inputTokenVerticalMargin,backgroundColor:(0,f().gQ)(e)},t)}));return(0,R.jsx)(p().ZP,{focus:d,onClick:()=>v(!0),format:p().UR.Share,value:c,onChange:function(e){const t=e.target.value,{extractedEmails:i,newInputValue:o}=(0,a().zI)(t),s=i.map((e=>({type:"newUser",value:{email:e},source:"email"}))).filter((e=>!(0,f().Nd)({target:e,permissionsInviteStore:n}))),r=[...n.state.inviteTargets,...s];r.length>0?(n.setState({...n.state,inviteTargets:r,isInviteTargetsEmpty:!1,tokenQuery:o}),v(!(s.length>0))):n.setState({...n.state,inviteTargets:[],isInviteTargetsEmpty:!0,tokenQuery:o})},onEmptySubmit:i,type:"email",placeholder:r.formatMessage({id:"teamPermissionsInvite.searchInput.placeholder",defaultMessage:"Search people or groups"}),tokens:x,onRemoveLastToken:function(){const e={...n.state};e.inviteTargets=e.inviteTargets.slice(0,-1),0===e.inviteTargets.length&&(e.isInviteTargetsEmpty=!0,e.inviteRole=B),n.setState(e)},focusAfterAnimation:!0,right:(0,R.jsx)(O,{store:t,permissionsInviteStore:n}),style:h.tokenMenuItem,inputStyle:h.inputTokenVerticalMargin,inputDivStyle:h.inputDiv,inputFullWidth:!0})}function O(e){const{store:t,permissionsInviteStore:n}=e,i=(0,o().VK)((()=>{const e=y().default.state.currentSpaceStore;return!(null!=e&&e.getDisableTeamGuests())&&(0,m().F$)()}),[]),a=(0,o().VK)((()=>n.state.inviteRole),[n]),r=(0,s().yK)((()=>({teamRoleLabel:{marginTop:3,marginBottom:3,marginLeft:5}})),[]);function l(e){n.setState({...n.state,inviteRole:e})}return i?(0,R.jsx)(Z,{store:t,selectedRole:a,allRoles:h().ZN,onChange:l,labelStyle:r.teamRoleLabel}):(0,R.jsx)(Z,{store:t,selectedRole:a,allRoles:h().$r,onChange:l,labelStyle:r.teamRoleLabel})}},824033:(e,t,n)=>{n.r(t),n.d(t,{TeamPermissionsInviteWithModal:()=>l});n(667294);var i=()=>n(142735),o=()=>n(846550),s=()=>n(923550),a=()=>n(669200),r=n(785893);function l(e){let{store:t,permissionsInviteStore:n,origin:l}=e;const d=(0,i().VK)((()=>n.state.modalOpen),[n]),c=()=>{n.reset()},u=(0,o().yK)((()=>({modal:{alignSelf:"center",overflow:"visible",top:0,width:500},overlay:{display:"flex",flexDirection:"column",alignItems:"end",padding:22}})),[]);return(0,r.jsx)(s().Z,{modalStyle:u.modal,open:d,onDismiss:c,renderContent:()=>(0,r.jsx)("div",{style:u.overlay,children:(0,r.jsx)(a().Z,{store:t,permissionsInviteStore:n,isNewlyCreatedTeam:!1,onSubmitSuccessful:c,onDismiss:c})}),origin:l})}},509695:(e,t,n)=>{n.d(t,{O:()=>a});n(667294);var i=()=>n(471645),o=()=>n(67961),s=n(785893);function a(e){let{title:t,description:n,disabled:a=!1,selected:r,onChange:l=(()=>{})}=e;return(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:()=>!a&&l(!r),children:[(0,s.jsxs)("div",{style:{fontSize:14,marginRight:8,flexGrow:1},children:[t,n&&(0,s.jsx)(o().Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:n})]}),(0,s.jsx)("div",{style:{marginTop:5},children:(0,s.jsx)(i().Z,{on:r,disabled:a})})]})}},741381:(e,t,n)=>{n.d(t,{j:()=>a,o:()=>r});n(667294);var i=()=>n(788860),o=n(785893);const s=(0,i().vU)({addingGuestsToDefaultTeam:{id:"getTeamRoleDisabled.addingGuestsToDefaultTeam",defaultMessage:"Default teams can't contain teamspace guests"},addingGuestsAsNonOwner:{id:"getTeamRoleDisabled.addingGuestsAsNonOwner",defaultMessage:"You must be a workspace owner and a teamspace owner to add teamspace guests"},makingAGroupAnOwner:{id:"getTeamRoleDisabled.makingAGroupAnOwner",defaultMessage:"Groups can’t be teamspace owners"},makingAGroupATeamGuest:{id:"getTeamRoleDisabled.makingAGroupATeamGuest",defaultMessage:"Groups can’t be teamspace guests"},upgradingAnOwnerAsNonOwner:{id:"getTeamRoleDisabled.upgradingAnOwnerAsNonOwner",defaultMessage:"You must be a teamspace owner to add another owner"},downgradeLastUserOwner:{id:"getTeamRoleDisabled.downgradeLastUserOwner",defaultMessage:"Add another teamspace owner to downgrade yourself to member"},downgradeToOwnerAsNonOwner:{id:"getTeamRoleDisabled.downgradeToOwnerAsNonOwner",defaultMessage:"You must be a teamspace owner to downgrade other teamspace owners"},removeLastUserOwner:{id:"getTeamRoleDisabled.removeLastUserOwner",defaultMessage:"Add another teamspace owner to leave the team"},removeLastGroupOwner:{id:"getTeamRoleDisabled.removeLastGroupOwner",defaultMessage:"Add another teamspace owner to remove this group"},downgradeLastMakingAGroupAnOwner:{id:"getTeamRoleDisabled.downgradeLastMakingAGroupAnOwner",defaultMessage:"Add another teamspace owner to make this group a member"},downgradingAMemberToAGuest:{id:"getTeamRoleDisabled.downgradingAMemberToAGuest",defaultMessage:"To change this user to a teamspace guest, first remove them from the workspace."},removingMemberFromDefaultTeam:{id:"getTeamRoleDisabled.removingMemberFromDefaultTeam",defaultMessage:"Members cannot be removed from a default teamspace."},removingMemberAsMember:{id:"getTeamRoleDisabled.removingMemberTeam.noPermission",defaultMessage:"You must be a team owner to remove other team members in this teamspace."},changingTeamRoleAsNonTeamOwner:{id:"getTeamRoleDisabled.changingTeamRoleAsNonMember",defaultMessage:"You must be a teamspace owner to adjust team membership."}});function a(e){let{isCurrentUserTeamOwner:t,role:n,isDefaultTeam:i,userIsSpaceAdmin:o}=e;return t||"owner"!==n?i&&"team_level_guest"===n?l(s.addingGuestsToDefaultTeam):!o&&"team_level_guest"===n||!t&&"team_level_guest"===n?l(s.addingGuestsAsNonOwner):{isDisabled:!1,disabledReason:void 0}:l(s.upgradingAnOwnerAsNonOwner)}function r(e){let{isCurrentUserTeamOwner:t,role:n,isDefaultTeam:i,userIsSpaceAdmin:o,userIsEnterpriseWorkspaceOwner:r,originalTeamMemberInfo:d,onlyHasOneOwner:c,isUnowned:u,isMemberCurrentUser:p,canCurrentUserAddTeamMembers:m}=e;if("team_level_guest"===n&&"team_level_guest"!==d.type)return l(s.downgradingAMemberToAGuest);const g="owner"!==n&&"owner"===d.type;if(g&&!t)return l(s.downgradeToOwnerAsNonOwner);if(g&&c)return l("none"===n?"group"===d.entity_type?s.removeLastGroupOwner:s.removeLastUserOwner:"group"===d.entity_type?s.downgradeLastMakingAGroupAnOwner:s.downgradeLastUserOwner);if("none"===n&&i)return l(s.removingMemberFromDefaultTeam);return"group"===d.entity_type&&"team_level_guest"===n?l(s.makingAGroupATeamGuest):"owner"===n&&o&&"user"===d.entity_type&&u&&p||"owner"===n&&r&&p?{isDisabled:!1,disabledReason:void 0}:"none"===n?t||m&&"member"===d.type?{isDisabled:!1,disabledReason:void 0}:l(s.removingMemberAsMember):t?a({isCurrentUserTeamOwner:t,role:n,isDefaultTeam:i,userIsSpaceAdmin:o}):l(s.changingTeamRoleAsNonTeamOwner)}function l(e){return{isDisabled:!0,disabledReason:(0,o.jsx)(i()._H,{...e})}}},431671:(e,t,n)=>{n.d(t,{F:()=>h});n(241792);var i=()=>n(142735),o=()=>n(331540),s=()=>n(801812),a=()=>n(752778),r=()=>n(826955),l=()=>n(824462);var d=()=>n(384791),c=()=>n(677559),u=()=>n(466970),p=()=>n(828946),m=()=>n(98228),g=()=>n(771097),f=()=>n(241449);function h(e){let{environment:t,spaceStore:n,joinedTeamIds:h,parentStore:y,moveToTargets:v,overrideDatabaseType:x}=e;const b=(0,i().VK)((()=>{const e=null==n?void 0:n.id;if(e)return function(e){if(!g().CachedTypedDatabasesStore.state)return;if(e!==g().CachedTypedDatabasesStore.state.spaceId)return;return g().CachedTypedDatabasesStore.state.typedDatabases}(e)}),[null==n?void 0:n.id]),S=(0,u().E)("typed_move_to_improved_default_results"),M=(0,c().XJ)(p().x.searchActions),[{value:j,status:C}]=(0,s().r5)((async()=>{if(b)return b;if(!n||!y)return;const e=x??f().default.getDatabaseType();if(!e)return;if("resolved"!==M.status)return;const i=M.value;let s=[];if(S){const o=((await i.searchCollectionsWithRecents({environment:t,query:"",limit:20,databaseType:[e],spaceStore:n,parentStore:n,collectionViewBlockStore:void 0,searchSessionId:f().default.state.isOpen?f().default.state.flowId:void 0})).results||[]).map((e=>r().NW.createChildStore(y,{table:a().vF,id:e})));s=(0,d().qJ)({typedDatabases:o,blocksToFilterParents:v})}else{const i=await async function(e){let{environment:t,spaceId:n,databaseType:i,parentStore:o}=e;if(!n)return;const s=await l().callApi({eventName:"getTypedDatabases",environment:t,data:{spaceId:n,databaseType:i}});return"success"===s.type?s.data.result.map((e=>r().NW.createChildStore(o,{table:a().vF,id:e.collectionId}))):void 0}({environment:t,spaceId:n.id,databaseType:e,parentStore:y})??[];s=(0,d().mL)({environment:t,typedDatabases:i,spaceStore:n,joinedTeamIds:h})}return g().CachedTypedDatabasesStore.setState({typedDatabases:s,spaceId:n.id}),f().default.update((e=>({...e,variant:o().ii}))),s}),[b,n,y,x,M.status,M.value,S,t,v,h],{debounce:m().vp,throttle:m().vp});return b?{success:!0,typedDatabases:b}:"resolved"===C&&j?{success:!0,typedDatabases:j}:{success:!1}}},697360:(e,t,n)=>{n.d(t,{kj:()=>l,zY:()=>r});n(821057);var i=()=>n(139224),o=()=>n(932753),s=()=>n(382474);const a={property:function(e){let{template:t,collectionStore:o,collectionViewStore:a,collectionSettingsStore:r}=e;const l=(0,s().ZQ)({collectionStore:o,templateId:t.templateId,instancePointerType:"property"});if(!l)throw new Error(`No property instance found for property template ${t.templateId}`);const d=a.getType();i().H4({collectionSettingsStore:r,item:{type:"property",property:l.id,formatKey:d?n(109477).oz(d):void 0}})},collection_view:function(e){let{template:t,environment:n,collectionStore:i,collectionContextStore:o}=e;const a=(0,s().ZQ)({collectionStore:i,templateId:t.templateId,instancePointerType:"collection_view"});if(!a)throw new Error(`No collection view instance found for property template ${t.templateId}`);l({environment:n,collectionContextStore:o,collectionViewId:a.id})},compound:function(e){}};function r(e){a[e.template.type](e)}function l(e){var t;let{environment:n,collectionContextStore:s,collectionViewId:a}=e;(null===(t=s.collectionViewStore())||void 0===t?void 0:t.id)!==a&&(0,o().f8)({environment:n,collectionContextStore:s,collectionViewId:a,isFullScreen:s.isFullScreenStore.state,isRootChild:s.isRootChildStore.state,isInPeekRenderer:s.isInPeekRendererStore.state}),i().H4({collectionSettingsStore:s.settingsStore,item:{type:"main"}})}},792329:(e,t,n)=>{n.r(t),n.d(t,{WorkflowSettingsConfirmAddTemplate:()=>_,isWorkflowTemplateWithConfirmStep:()=>P});n(821057);var i=n(667294),o=()=>n(219727),s=()=>n(846550),a=()=>n(353329),r=()=>n(788860),l=()=>n(513670),d=()=>n(139224),c=()=>n(269299),u=()=>n(205951),p=()=>n(477253),m=()=>n(18748),g=()=>n(906651),f=()=>n(388284),h=()=>n(125659),y=()=>n(594546),v=()=>n(298032),x=()=>n(697360),b=()=>n(281236),S=(n(241792),()=>n(38883)),M=()=>n(246471),j=n(785893);function C(e){let{template:t,style:n}=e;const i=(0,s().yK)((e=>({container:{...n,padding:12,border:`1px solid ${e.regularDividerColor}`,borderRadius:6}})),[n]),o=function(e){if((0,a().U2)(e,"property")&&(0,a().kw)(e)){const{options:t=[]}=e.value;if(0===t.length)return;return(0,j.jsx)(w,{options:t})}}(t);return o?(0,j.jsx)("div",{style:i.container,children:o}):null}function w(e){let{options:t}=e;const n=(0,s().yK)((()=>({container:{display:"flex",flexDirection:"column",gap:8}})),[]);return(0,j.jsx)("div",{style:n.container,children:t.map((e=>(0,j.jsx)("div",{children:(0,j.jsx)(M().a,{format:S().lo.Medium,isSingle:!0,value:e.value,color:e.color,showRemoveButton:!1})},e.id)))})}var k=()=>n(499819);function _(e){let{template:t,collectionSettingsStore:n}=e;const[a,l]=(0,i.useState)("sample"===t.propertyOptionsType),{device:{isMobile:d}}=(0,o().O7)(),c=(0,s().yK)((e=>{const t={display:"flex",flexDirection:"column",minHeight:0};return{shrinkableHeight:t,noShrink:{flexShrink:0},featurePreviewWrapper:{...t,width:"-webkit-fill-available"},featurePreviewBody:{...t,gap:16,...d?{margin:"16px 0"}:{margin:0}},featurePreview:{...t,overflow:"auto"},addButtonContainer:{...d?{margin:"12px 0"}:{marginBottom:6}}}}),[d]),g=(0,b().getWorkflowTemplateName)(t);return(0,j.jsxs)(u().ZP,{collectionSettingsStore:n,title:(0,j.jsx)(r()._H,{id:"workflowTemplateSettings.confirmAddTemplate.title",defaultMessage:"Turn on {templateName}",values:{templateName:g}}),disableScroller:!0,menuScrollerStyle:c.shrinkableHeight,innerContentWrapperStyle:c.shrinkableHeight,children:[(0,j.jsx)(f().Z,{style:c.shrinkableHeight,children:(0,j.jsx)(m().ZP,{style:c.shrinkableHeight,textWrapperStyle:c.featurePreviewWrapper,bodyStyle:c.featurePreviewBody,body:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(T,{template:t,style:c.noShrink}),(0,j.jsx)(C,{template:t,style:c.featurePreview})]})})}),(0,j.jsx)(f().Z,{style:c.noShrink,children:t.value.options&&t.value.options.length>0&&(0,j.jsx)(p().Z,{title:(0,j.jsx)(r()._H,{id:"workflowTemplateSettings.confirmAddTemplate.propertyOptionsToggle",defaultMessage:"Set my own options"}),switcherProps:{on:a,disallowTabbing:!0},onClick:()=>{l(!a)}})}),(0,j.jsx)(f().Z,{style:c.noShrink,children:(0,j.jsx)(m().ZP,{body:(0,j.jsx)(I,{template:t,startEmpty:a}),bodyStyle:c.addButtonContainer})})]})}function T(e){let{template:t,style:n}=e;const i=(0,o().Fy)(),r=(0,s().yK)((()=>({container:{...n,display:"flex",alignItems:"center",gap:12},textWrapper:{lineHeight:i.isMobile?"20px":"18px"},title:{fontSize:i.isMobile?16:13},caption:{fontSize:i.isMobile?14:12,overflow:"hidden",color:"gray",whiteSpace:"nowrap",textOverflow:"ellipsis"}})),[i,n]),l=(0,b().getWorkflowTemplateName)(t),d=(0,a().ym)(t);return(0,j.jsxs)("div",{style:r.container,children:[(0,j.jsx)(k().$,{template:t,backgroundSize:32}),(0,j.jsxs)("div",{style:r.textWrapper,children:[(0,j.jsx)("div",{style:r.title,children:l}),d&&(0,j.jsx)("div",{style:r.caption,children:d})]})]})}function I(e){let{template:t,startEmpty:n}=e;const i=(0,s().yK)((()=>({section:{paddingTop:12,paddingBottom:12},button:{width:"100%"}})),[]),a=(0,o().O7)(),u=(0,h().Y$)(),p=(0,b().getWorkflowTemplateName)(t),m=l().Xh(t);return n&&delete m.value.options,(0,j.jsx)(g().Z,{style:i.button,isLarge:!0,onClick:()=>{c().createAndCommit({userAction:"WorkflowSettingsConfirmAddTemplate.addFeatureTemplateToTarget",environment:a,canUndo:!0,perform:e=>{const n=u.collectionStore();if(!n)throw new Error("collectionStore not found");v().rU({environment:a,transaction:e,collectionStore:n,template:m,logger:new(b().WorkflowTemplateLogger),origin:"suggested_feature"});const i=u.settingsStore;d().z$({collectionSettingsStore:i});const o=n.getWorkflowTemplateId();(0,y().j)({environment:a,event:{eventName:"suggested_feature_template_added",eventProperties:{origin:"suggested_properties",template_id_added:t.templateId,collection_template_id:o}}});const s=u.collectionViewStore();s&&(0,x().zY)({template:t,environment:a,collectionStore:n,collectionViewStore:s,collectionSettingsStore:i,collectionContextStore:u})}})},children:(0,j.jsx)(r()._H,{id:"workflowTemplateSettings.confirmAddTemplate.button",defaultMessage:"Add {templateName}",values:{templateName:p}})})}function P(e){return"property"===e.type&&("select"===e.value.type||"multi_select"===e.value.type)}},499819:(e,t,n)=>{n.d(t,{$:()=>j,l:()=>S});n(821057),n(667294);var i=()=>n(142735),o=()=>n(846550),s=()=>n(353329),a=()=>n(445520),r=()=>n(766933),l=()=>n(890085),d=()=>n(696459),c=()=>n(716025),u=()=>n(828458),p=()=>n(850790),m=()=>n(383507),g=()=>n(877691),f=()=>n(80159),h=()=>n(413894),y=()=>n(281236),v=n(785893);const x=16;function b(e){let{icon:t,theme:n,size:i,style:s}=e;const r=(0,o().yK)((e=>({icon:{fill:(0,h().A)(t,e).icon.primary,...s}})),[t,s]);return(0,v.jsx)(a().Z,{icon:t,theme:n,size:i,style:r.icon})}function S(e){var t;let{template:n,size:i,iconStyle:a}=e;const r=i??x,u=(0,o().yK)((()=>({icon:{width:r,height:r,...a}})),[r,a]),h=(0,o().Fg)();if((0,s().Wl)(n.templateId))return(0,m().Q)(u.icon);const{type:y}=n;switch(y){case"property":return(0,v.jsx)(M,{template:n,iconSize:r,styles:u});case"collection_view":return(0,v.jsx)(c().F,{viewIcon:null===(t=n.value.format)||void 0===t?void 0:t.collection_view_icon,viewType:n.value.type,color:"lightGray",style:u.icon});case"layout":return(0,v.jsx)(v.Fragment,{children:(0,g().J)(u.icon)});case"block":return(0,v.jsx)(v.Fragment,{children:(0,f().w)(u.icon)});case"collection":case"compound":const e="collection"===n.type?n.value.targetCollection.icon:n.icon;if(!(0,l().V2)(e))throw new Error("Only Notion static icons are allowed for template icons");return(0,v.jsx)(b,{icon:e,theme:h,size:r,style:u.icon});case"automation":return(0,v.jsx)(v.Fragment,{children:(0,p().K)(u.icon)});default:(0,d().t1)(y)}}function M(e){let{template:t,iconSize:n,styles:s}=e;const a=(0,o().Fg)(),l=(0,i().VK)((()=>{const{relatedCollectionTemplateId:e}=t;if("relation"===t.value.type&&e){return y().globalWorkflowTemplates.fromIdOfType({templateId:e,type:"collection"}).value.targetCollection.icon}return t.value.icon}),[t]);return(0,v.jsx)(r().ZP,{type:t.value.type,icon:l,size:n,style:s.icon,theme:a})}function j(e){let{template:t,backgroundSize:n}=e;const i=(0,o().yK)((e=>({iconContainer:{background:C({theme:e,template:t})[30]},icon:{fill:C({theme:e,template:t})[400]}})),[t]);return(0,v.jsx)(u().I,{backgroundColor:i.iconContainer.background,backgroundSize:n,icon:(0,v.jsx)(S,{template:t,iconStyle:i.icon})})}function C(e){let{theme:t,template:n}=e;const{type:i}=n;switch(i){case"collection_view":case"automation":return t.accentColors.blue;case"property":return"relation"===n.value.type?t.accentColors.yellow:t.accentColors.red;case"layout":return t.accentColors.orange;case"block":return t.accentColors.purple;case"compound":return t.accentColors.green;case"collection":return t.accentColors.pink;default:(0,d().t1)(i)}}},413894:(e,t,n)=>{n.d(t,{A:()=>s});var i=()=>n(890085);const o={light:{gray:{stroke:{secondary:"rgba(84, 72, 49, 0.15)"},fill:{primary:"rgba(84, 72, 49, 0.15)",secondary:"rgba(84, 72, 49, 0.08)",tertiary:"rgba(84, 72, 49, 0.04)"},text:{primary:"#1D1B16"}},red:{stroke:{secondary:"rgba(244, 171, 159, 0.40)"},fill:{primary:"rgba(244, 171, 159, 0.40)",secondary:"rgba(244, 171, 159, 0.40)",tertiary:"rgba(243, 136, 118, 0.07)"},text:{primary:"#5D1715"}},brown:{stroke:{secondary:"rgba(210, 162, 141, 0.35)"},fill:{primary:"rgba(210, 162, 141, 0.35)",secondary:"rgba(210, 162, 141, 0.17)",tertiary:"rgba(210, 162, 141, 0.07)"},text:{primary:"#442A1E"}},orange:{stroke:{secondary:"rgba(224, 124, 57, 0.27)"},fill:{primary:"rgba(224, 124, 57, 0.27)",secondary:"rgba(224, 124, 57, 0.15)",tertiary:"rgba(224, 124, 57, 0.07)"},text:{primary:"#49290E"}},yellow:{stroke:{secondary:"rgba(236, 191, 66, 0.39)"},fill:{primary:"rgba(236, 191, 66, 0.39)",secondary:"rgba(215, 177, 24, 0.15)",tertiary:"rgba(215, 177, 24, 0.07)"},text:{primary:"#402C1B"}},green:{stroke:{secondary:"rgba(123, 183, 129, 0.27)"},fill:{primary:"rgba(123, 183, 129, 0.27)",secondary:"rgba(123, 183, 129, 0.15)",tertiary:"rgba(123, 183, 129, 0.07)"},text:{primary:"#1C3829"}},blue:{stroke:{secondary:"rgba(93, 165, 206, 0.27)"},fill:{primary:"rgba(93, 165, 206, 0.27)",secondary:"rgba(95, 167, 208, 0.15)",tertiary:"rgba(91, 166, 209, 0.07)"},text:{primary:"#183347"}},purple:{stroke:{secondary:"rgba(168, 129, 197, 0.27)"},fill:{primary:"rgba(168, 129, 197, 0.27)",secondary:"rgba(204, 170, 229, 0.15)",tertiary:"rgba(206, 175, 229, 0.07)"},text:{primary:"#412454"}},pink:{stroke:{secondary:"rgba(225, 136, 179, 0.27)"},fill:{primary:"rgba(225, 136, 179, 0.27)",secondary:"rgba(235, 159, 196, 0.15)",tertiary:"rgba(231, 147, 188, 0.07)"},text:{primary:"#4C2337"}}},dark:{gray:{stroke:{secondary:"rgba(255, 255, 255, 0.09)"},fill:{primary:"rgba(255, 255, 255, 0.13)",secondary:"rgba(255, 255, 255, 0.09)",tertiary:"rgba(255, 255, 255, 0.03)"},text:{primary:"rgba(255, 255, 255, 0.81)"}},red:{stroke:{secondary:"rgba(222, 85, 85, 0.25)"},fill:{primary:"rgba(222, 85, 84, 0.30)",secondary:"rgba(222, 85, 84, 0.30)",tertiary:"rgba(222, 85, 88, 0.10)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},brown:{stroke:{secondary:"rgba(184, 101, 69, 0.25)"},fill:{primary:"rgba(184, 101, 68, 0.30)",secondary:"rgba(184, 101, 68, 0.30)",tertiary:"rgba(184, 101, 72, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},orange:{stroke:{secondary:"rgba(233, 126, 37, 0.20)"},fill:{primary:"rgba(233, 126, 36, 0.30)",secondary:"rgba(233, 126, 36, 0.30)",tertiary:"rgba(233, 126, 40, 0.06)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},yellow:{stroke:{secondary:"rgba(179, 129, 61, 0.20)"},fill:{primary:"rgba(231, 161, 55, 0.30)",secondary:"rgba(231, 161, 55, 0.30)",tertiary:"rgba(162, 105, 50, 0.10)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},green:{stroke:{secondary:"rgba(45, 153, 100, 0.20)"},fill:{primary:"rgba(45, 153, 100, 0.30)",secondary:"rgba(45, 153, 100, 0.30)",tertiary:"rgba(45, 153, 100, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},blue:{stroke:{secondary:"rgba(51, 126, 169, 0.20)"},fill:{primary:"rgba(51, 126, 169, 0.33)",secondary:"rgba(51, 126, 169, 0.33)",tertiary:"rgba(51, 126, 169, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},purple:{stroke:{secondary:"rgba(155, 97, 211, 0.18)"},fill:{primary:"rgba(155, 97, 211, 0.28)",secondary:"rgba(155, 97, 211, 0.28)",tertiary:"rgba(155, 97, 211, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},pink:{stroke:{secondary:"rgba(220, 76, 145, 0.22)"},fill:{primary:"rgba(220, 76, 145, 0.30)",secondary:"rgba(220, 76, 145, 0.30)",tertiary:"rgba(220, 76, 145, 0.06)"},text:{primary:"rgba(255, 255, 255, 0.87)"}}}};function s(e,t){const n=(0,i().mk)(e),s="lightgray"===n?"gray":n;return{...o[t.mode][s],icon:{primary:i().Lr[t.mode][s]}}}},752348:(e,t,n)=>{n.r(t),n.d(t,{getAllContextValues:()=>p,getContextValueForActionById:()=>g,getContextValuesForAction:()=>m,typecheckAutomation:()=>c,typecheckAutomationAsync:()=>u});n(670560),n(267602),n(241792),n(228244);var i=()=>n(513670),o=()=>n(855741),s=()=>n(696459),a=()=>n(870910),r=()=>n(177634),l=()=>n(360517),d=()=>n(227666);const{sync:c,async:u}=a().R.makeRunners((function*(e){const{actionModels:t,automationModel:c,contextType:u,formulasModule:p,runtimeStats:m}=e,g={valueTypes:e.valueTypes,actionInputValueTypes:{},actionValidationFailures:{}},f=performance.now();let h,y,v;if("button_block"===u||"button_property"===u){if(!c.isButtonType())return{error:new(l().MO)(`Automation trigger (${c.getTriggerType()}) does not match context type (${u}).`)};const t=c.getTrigger();v=(0,d().o)(c.getTriggerType()).typecheck(e,t)}else if("event"===u){if(!c.isEventType()&&!c.isNotificationType())return{error:new(l().MO)(`Automation trigger (${c.getTriggerType()}) does not match context type (${u}).`)};const t=c.getTrigger();v=(0,d().o)(c.getTriggerType()).typecheck(e,t)}else if("recurrence"===u){if(!c.isRecurrenceType())return{error:new(l().MO)(`Automation trigger (${c.getTriggerType()}) does not match context type (${u}).`)};const t=c.getTrigger();v=(0,d().o)(c.getTriggerType()).typecheck(e,t)}else(0,s().t1)(e);if(o().x.isFail(v))return v;g.valueTypes.push(...i().d9(v.value.valueTypes));for(const s of t){h=void 0,m&&(h=n(870691).Fv.getOrCreateAction(m,s.pointer,s.getType()));const t=(0,n(969583).getActionRegistryItem)(s.getType());if(!t){y={error:new(l().EP)({actionId:s.id,message:`Unsupported action type: ${s.getType()}`})};break}const d=performance.now(),u=(0,n(782827).C)({automationModel:c,formulasModule:p,formulaValueTypes:g.valueTypes}),f=(0,n(750239).xg)(yield*t.resolveExecutionDependencies(u,s));yield*a().R.fetchRecords(f.map((e=>e.pointer))),h&&(h.totalDependencies=f.length,h.getDependenciesDurationMs=Math.trunc(performance.now()-d));const v=t.typecheck(e,s),x=i().d9(g.valueTypes);if(g.actionInputValueTypes[s.id]=x,o().x.isFail(v)){y=v;break}for(const e of v.value.valueTypes??[]){g.valueTypes.some((t=>(0,r().Fl)(e,t)))||g.valueTypes.push(e)}v.value.validationFailures&&v.value.validationFailures.length>0&&(g.actionValidationFailures[s.id]=v.value.validationFailures)}const x=Math.trunc(performance.now()-f);return m&&(m.typecheckStartTime=f,m.typecheckDurationMs=x,m.typecheckSuccess=!(0,s().$K)(y)),y??{value:g}}));function p(e){return o().x.isFail(e)?[]:e.value.valueTypes.slice(0)}function m(e,t){return o().x.isFail(e)?[]:e.value.actionInputValueTypes[t]??[]}function g(e,t,n){const i=m(e,t);return(0,r().vx)(i,n)}},227666:(e,t,n)=>{n.d(t,{o:()=>u});var i=()=>n(513670),o=()=>n(696459),s=()=>n(998411),a=()=>n(752778),r=()=>n(309968);const l={type:"button",getCreatePermissions(e){const{parentPointer:t}=e;return[{minimumRole:"read_and_write",pointer:t,type:"record_permission"}]},getEditPermissions(e){const{automationModel:t}=e;return[{minimumRole:"read_and_write",pointer:t.getParentPointer(),type:"record_permission"}]},getManagePermissions(e){const{automationModel:t}=e;return[{minimumRole:"read_and_write",pointer:t.getParentPointer(),type:"record_permission"}]},getExecutePermissions(e){const{automationModel:t}=e;return[{minimumRole:"reader",pointer:t.getParentPointer(),type:"record_permission"}]},typecheck(e){const{automationModel:t,contextType:s,getRecordModel:l,intl:d}=e,c=r().q6.compile(d),u=r()._V.compile(d),p=r().ZH.compile(d),m=t.getParentPointer();let g,f;if("button_block"===s){if(e.pageBlockModel){const t=(0,n(942275).J2)({block:e.pageBlockModel,getRecordModel:l});t&&(g=r().xL.compile(d,t.pointer),f=r().lg.compile(d))}}else if("button_property"===s){const e=l(m);if((null==e?void 0:e.table)!==a().vF)return{error:new(n(360517).MO)(`Unable to load automation parent: ${n(827370).dr.toKey(m)}`)};g=r().xL.compile(d,e.pointer),f=r().lg.compile(d)}else(0,o().t1)(s);return{value:{valueTypes:(0,i().oA)([c,u,p,g,f])}}},execute(e){const{formulaVariableResolution:t}=e,{executingUserPointer:n,executingUserTimeZone:o,thisPageBlockModel:a}=t??{},l=a?r().xL.evaluate(a.pointer):void 0,d=null==a?void 0:a.getCreatedByPointer(),c=d?r().lg.evaluate(d):void 0,u=n?r().q6.evaluate(n):void 0,p=(0,s().r)(),m=r()._V.evaluate(o??p),g=r().ZH.evaluate(o??p);return{value:{values:(0,i().oA)([l,c,u,m,g])}}},isAvailableForContext:e=>!0};n(670560);const d={type:"event",getCreatePermissions(e){const{parentPointer:t,spacePointer:n}=e;return[{minimumRole:"editor",pointer:t,type:"record_permission"},{minimumRole:"read_and_write",pointer:n,type:"record_permission"}]},getEditPermissions(e){const{automationModel:t}=e,i=[{minimumRole:"editor",pointer:t.getParentPointer(),type:"record_permission"},{minimumRole:"read_and_write",pointer:t.getSpacePointer(),type:"record_permission"}],s=t.getTrigger();if("event"===s.type){const e=s.event;(0,o().$K)(e.source)&&"filter"!==e.source.type&&(e.source.type===a().vF||e.source.type===n(139978).np?i.push({minimumRole:"reader",pointer:e.source.pointer,type:"record_permission"}):(0,o().t1)(e.source))}return i},getManagePermissions(e){const{automationModel:t}=e;return[{minimumRole:"editor",pointer:t.getParentPointer(),type:"record_permission"},{minimumRole:"read_and_write",pointer:t.getSpacePointer(),type:"record_permission"}]},getExecutePermissions(e){const{automationModel:t}=e;return[{minimumRole:"reader",pointer:t.getParentPointer(),type:"record_permission"}]},typecheck(e){const{automationModel:t,intl:n}=e,o=r().TW.compile(n),s=r().Nq.compile(n),l=r()._V.compile(n),d=r().ZH.compile(n),c=t.getParentPointer();let u;return c.table===a().vF&&(u=r().Hr.compile(n,c)),{value:{valueTypes:(0,i().oA)([o,s,l,d,u])}}},execute(e){const{formulaVariableResolution:t}=e,{executingUserPointer:n,executingUserTimeZone:a,thisPageBlockModel:l}=t??{},d=l?r().Hr.evaluate(l.pointer):void 0,c=n?r().TW.evaluate(n):void 0,u=(0,s().r)(),p=r()._V.evaluate(a??u),m=null==l?void 0:l.getCreatedByPointer(),g=(0,o().$K)(m)?r().Nq.evaluate(m):void 0,f=r().ZH.evaluate(a??u);return{value:{values:(0,i().oA)([d,c,p,f,g])}}},isAvailableForContext:e=>!0};const c={button:l,event:d,notification_event:d,recurrence:{type:"recurrence",getCreatePermissions(e){const{parentPointer:t}=e;return[{minimumRole:"read_and_write",pointer:t,type:"record_permission"}]},getEditPermissions(e){const{automationModel:t}=e;return[{minimumRole:"read_and_write",pointer:t.getParentPointer(),type:"record_permission"}]},getManagePermissions(e){const{automationModel:t}=e;return[{minimumRole:"read_and_write",pointer:t.getParentPointer(),type:"record_permission"}]},getExecutePermissions(e){const{automationModel:t}=e;return[{minimumRole:"reader",pointer:t.getParentPointer(),type:"record_permission"}]},typecheck(e){const{intl:t}=e;return{value:{valueTypes:[r()._V.compile(t),r().ZH.compile(t)]}}},execute(e){const{formulaVariableResolution:t}=e,{executingUserTimeZone:n}=t??{},i=(0,s().r)();return{value:{values:[r()._V.evaluate(n??i),r().ZH.evaluate(n??i)]}}},isAvailableForContext(e){const{automation:t,automationActions:i,hasPremiumAutomations:s}=e;if(t.parent_table===n(396136).iU)return!0;if(t.parent_table===a().vF){const e=n(217465).RecordMap.create();for(const t of i)e.addModel(t);return!!t.isCompleteSprintAutomation({getRecordModel:n(530980).omK.fromRecordMap(e)})||s}(0,o().t1)(t.parent_table)}}};function u(e){return c[e]}},159408:(e,t,n)=>{n.d(t,{t:()=>i});const i=(0,n(827282).CZ)("arrowUpCircled",{default:{loader:()=>n.e(1387).then(n.bind(n,301387))},small:{loader:()=>n.e(47737).then(n.bind(n,947737))},mini:{loader:()=>n.e(96178).then(n.bind(n,396178))},large:{loader:()=>n.e(60099).then(n.bind(n,60099))}})},983653:(e,t,n)=>{n.d(t,{t:()=>i});const i=(0,n(827282).CZ)("checkmarkShieldFill",{default:{loader:()=>n.e(69449).then(n.bind(n,169449))},small:{loader:()=>n.e(48227).then(n.bind(n,448227))},mini:{loader:()=>n.e(8854).then(n.bind(n,908854))},large:{loader:()=>n.e(35833).then(n.bind(n,735833))}})},934590:(e,t,n)=>{n.d(t,{s:()=>o});n(667294);const i={viewBox:"0 0 20 20",svg:(0,n(785893).jsx)("path",{d:"M10 1.5a.75.75 0 0 1 .75.75v10.94l4.72-4.72a.75.75 0 1 1 1.06 1.06l-6 6a.75.75 0 0 1-1.06 0l-6-6a.75.75 0 0 1 1.06-1.06l4.72 4.72V2.25A.75.75 0 0 1 10 1.5M3.5 17a.75.75 0 0 0 0 1.5h13a.75.75 0 0 0 0-1.5z"})},o=(0,n(827282).IU)("arrowLineDown",i)},775404:(e,t,n)=>{n.d(t,{p:()=>o});n(667294);var i=n(785893);const o=(0,n(827282).IU)("at",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M.911 8.034c0 4.505 3.049 7.24 7.246 7.24 1.135 0 2.215-.158 2.885-.376.472-.15.622-.397.622-.65a.44.44 0 00-.451-.444 1.3 1.3 0 00-.321.048c-.834.205-1.552.341-2.516.341-3.74 0-6.29-2.255-6.29-6.118 0-3.698 2.407-6.275 6.03-6.275 3.206 0 5.886 1.975 5.886 5.523 0 2.072-.697 3.466-1.825 3.466-.752 0-1.176-.437-1.176-1.183V4.972c0-.37-.205-.595-.554-.595-.341 0-.553.226-.553.595v.779h-.062c-.349-.84-1.203-1.374-2.222-1.374-1.77 0-3.014 1.51-3.014 3.678 0 2.187 1.237 3.712 3.042 3.712 1.06 0 1.88-.575 2.276-1.545h.062c.13.963.943 1.551 2.023 1.551 1.907 0 3.09-1.873 3.09-4.498 0-3.971-2.92-6.548-6.96-6.548C3.886.727.912 3.632.912 8.034zm6.911 2.652c-1.223 0-2.003-1.018-2.003-2.638 0-1.593.786-2.611 2.01-2.611 1.258 0 2.05.998 2.05 2.584 0 1.62-.813 2.665-2.057 2.665z"})})},844409:(e,t,n)=>{n.d(t,{t:()=>o});n(667294);const i={viewBox:"0 0 20 20",svg:(0,n(785893).jsx)("path",{d:"M10 1.478A2.6 2.6 0 0 0 7.518 3.31 5.5 5.5 0 0 0 4.5 8.217v1.275c0 .966-.35 1.898-.986 2.625l-.877 1.002c-.99 1.132-.187 2.903 1.317 2.903H7.04a3 3 0 0 0 5.917 0h3.088c1.504 0 2.307-1.771 1.317-2.903l-.877-1.002a4 4 0 0 1-.986-2.625V8.217a5.5 5.5 0 0 0-3.018-4.908A2.6 2.6 0 0 0 10 1.479m1.415 14.544a1.5 1.5 0 0 1-2.83 0zM8.91 3.937A1.1 1.1 0 0 1 10 2.978c.555 0 1.015.413 1.09.959l.058.424.395.166A4 4 0 0 1 14 8.217v1.275c0 1.33.482 2.613 1.357 3.613l.877 1.002a.25.25 0 0 1-.188.415H3.954a.25.25 0 0 1-.189-.415l.877-1.002A5.5 5.5 0 0 0 6 9.492V8.217a4 4 0 0 1 2.456-3.69l.396-.166z"})},o=(0,n(827282).IU)("bell",i)},949558:(e,t,n)=>{n.r(t),n.d(t,{emojiFaceIcon:()=>s,iconDefinition:()=>o});n(667294);var i=n(785893);const o={viewBox:"0 0 20 20",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M7.367 11.24a.65.65 0 0 1 .87.28l.006.011q.014.025.056.08c.055.074.146.18.28.286.26.208.704.443 1.421.443s1.16-.235 1.42-.443a1.6 1.6 0 0 0 .337-.366l.007-.012a.65.65 0 0 1 1.156.594l-.58-.293.58.293v.001l-.001.002-.002.003-.004.008-.011.021-.036.061q-.044.075-.126.185a3 3 0 0 1-.508.519c-.473.377-1.199.727-2.232.727s-1.76-.35-2.232-.727a3 3 0 0 1-.508-.519 2 2 0 0 1-.161-.246l-.012-.02-.004-.009-.002-.003v-.002s-.001-.001.579-.294l-.58.293a.65.65 0 0 1 .287-.873m.003-1.57c.486 0 .88-.457.88-1.02s-.394-1.02-.88-1.02-.88.457-.88 1.02.394 1.02.88 1.02m6.14-1.02c0 .563-.394 1.02-.88 1.02s-.88-.457-.88-1.02.394-1.02.88-1.02.88.457.88 1.02"}),(0,i.jsx)("path",{d:"M10 1.75a8.25 8.25 0 1 0 0 16.5 8.25 8.25 0 0 0 0-16.5M3.25 10a6.75 6.75 0 1 1 13.5 0 6.75 6.75 0 0 1-13.5 0"})]})},s=(0,n(827282).IU)("emojiFace",o)},745795:(e,t,n)=>{n.d(t,{h:()=>o});n(667294);var i=n(785893);const o=(0,n(827282).IU)("laptop",{viewBox:"0 0 64 64",svg:(0,i.jsx)("path",{d:"m54,40H10v-24c0-2.47,1.53-4,4-4h36c2.47,0,4,1.53,4,4v24Zm-50,4c0,4.94,3.06,8,8,8h40c4.94,0,8-3.06,8-8H4Z"})})},429617:(e,t,n)=>{n.d(t,{m:()=>o});n(667294);const i={viewBox:"0 0 20 20",svg:(0,n(785893).jsx)("path",{d:"M10.431 6.25H3a.75.75 0 0 1 0-1.5h7.431a2.2 2.2 0 0 1 4.138 0H17a.75.75 0 0 1 0 1.5h-2.431a2.201 2.201 0 0 1-4.138 0M11.7 5.5a.8.8 0 1 0 1.6 0 .8.8 0 0 0-1.6 0M3 9.25a.75.75 0 0 0 0 1.5h2.431a2.2 2.2 0 0 0 4.138 0H17a.75.75 0 0 0 0-1.5H9.569a2.2 2.2 0 0 0-4.138 0zm3.7.75a.8.8 0 1 1 1.6 0 .8.8 0 0 1-1.6 0m-4.45 4.5a.75.75 0 0 1 .75-.75h7.431a2.2 2.2 0 0 1 4.138 0H17a.75.75 0 0 1 0 1.5h-2.431a2.2 2.2 0 0 1-4.138 0H3a.75.75 0 0 1-.75-.75m10.25-.8a.8.8 0 1 0 0 1.6.8.8 0 0 0 0-1.6"})},o=(0,n(827282).IU)("sliders",i)},47100:(e,t,n)=>{n.d(t,{t:()=>o});n(667294);const i={viewBox:"0 0 20 20",svg:(0,n(785893).jsx)("path",{d:"M5.95 2a.7.7 0 1 0-1.4 0c0 .6-.378 1.37-1.029 2.022-.65.65-1.42 1.028-2.021 1.028a.7.7 0 0 0 0 1.4c.6 0 1.37.378 2.021 1.029S4.55 8.899 4.55 9.5a.7.7 0 1 0 1.4 0c0-.6.378-1.37 1.029-2.021s1.42-1.029 2.02-1.029a.7.7 0 1 0 0-1.4c-.6 0-1.37-.378-2.02-1.028C6.328 3.37 5.949 2.6 5.949 2M4.51 5.012c.27-.27.523-.577.739-.906A5.7 5.7 0 0 0 6.895 5.75 5.7 5.7 0 0 0 5.25 7.395 5.7 5.7 0 0 0 3.605 5.75c.33-.215.636-.468.906-.738M13.58 6.75a.7.7 0 1 0-1.4 0c0 1.238-.583 2.475-1.519 3.412S8.488 11.68 7.25 11.68a.7.7 0 0 0 0 1.4c1.238 0 2.475.583 3.411 1.519s1.519 2.173 1.519 3.411a.7.7 0 1 0 1.4 0c0-1.238.582-2.475 1.518-3.411.937-.936 2.174-1.519 3.412-1.519a.7.7 0 1 0 0-1.4c-1.238 0-2.475-.582-3.412-1.518-.936-.937-1.518-2.174-1.518-3.412m-1.929 4.402a6.9 6.9 0 0 0 1.229-1.663 6.9 6.9 0 0 0 1.229 1.662 6.9 6.9 0 0 0 1.663 1.23 6.9 6.9 0 0 0-1.663 1.228 6.9 6.9 0 0 0-1.23 1.663 6.9 6.9 0 0 0-1.228-1.663 6.9 6.9 0 0 0-1.663-1.229 6.9 6.9 0 0 0 1.663-1.229"})},o=(0,n(827282).IU)("sparkles",i)},283848:(e,t,n)=>{n.d(t,{E:()=>o});const i={aa:"Afar",ab:"Abkhazian",af:"Afrikaans",ak:"Akan",sq:"Albanian",am:"Amharic",ar:"Arabic",an:"Aragonese",hy:"Armenian",as:"Assamese",av:"Avaric",ae:"Avestan",ay:"Aymara",az:"Azerbaijani",ba:"Bashkir",bm:"Bambara",eu:"Basque",be:"Belarusian",bn:"Bengali",bh:"Bihari languages",bi:"Bislama",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan; Valencian",ch:"Chamorro",ce:"Chechen",zh:"Chinese",cu:"Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic",cv:"Chuvash",kw:"Cornish",co:"Corsican",cr:"Cree",cs:"Czech",da:"Danish",dv:"Divehi; Dhivehi; Maldivian",nl:"Dutch",dz:"Dzongkha",en:"English",eo:"Esperanto",et:"Estonian",ee:"Ewe",fo:"Faroese",fj:"Fijian",fi:"Finnish",fr:"French",fy:"Western Frisian",ff:"Fulah",ka:"Georgian",de:"German",gd:"Gaelic; Scottish Gaelic",ga:"Irish",gl:"Galician",gv:"Manx",el:"Greek, Modern (1453-)",gn:"Guarani",gu:"Gujarati",ht:"Haitian; Haitian Creole",ha:"Hausa",he:"Hebrew",hz:"Herero",hi:"Hindi",ho:"Hiri Motu",hr:"Croatian",hu:"Hungarian",ig:"Igbo",is:"Icelandic",io:"Ido",ii:"Sichuan Yi; Nuosu",iu:"Inuktitut",ie:"Interlingue; Occidental",ia:"Interlingua (International Auxiliary Language Association)",id:"Indonesian",ik:"Inupiaq",it:"Italian",jv:"Javanese",ja:"Japanese",kl:"Kalaallisut; Greenlandic",kn:"Kannada",ks:"Kashmiri",kr:"Kanuri",kk:"Kazakh",km:"Central Khmer",ki:"Kikuyu; Gikuyu",rw:"Kinyarwanda",ky:"Kirghiz; Kyrgyz",kv:"Komi",kg:"Kongo",ko:"Korean",kj:"Kuanyama; Kwanyama",ku:"Kurdish",lo:"Lao",la:"Latin",lv:"Latvian",li:"Limburgan; Limburger; Limburgish",ln:"Lingala",lt:"Lithuanian",lb:"Luxembourgish; Letzeburgesch",lu:"Luba-Katanga",lg:"Ganda",mk:"Macedonian",mh:"Marshallese",ml:"Malayalam",mi:"Maori",mr:"Marathi",ms:"Malay",mg:"Malagasy",mt:"Maltese",mn:"Mongolian",na:"Nauru",nv:"Navajo; Navaho",nr:"Ndebele, South; South Ndebele",nd:"Ndebele, North; North Ndebele",ng:"Ndonga",ne:"Nepali",nn:"Norwegian Nynorsk; Nynorsk, Norwegian",nb:"Bokmål, Norwegian; Norwegian Bokmål",no:"Norwegian",ny:"Chichewa; Chewa; Nyanja",oc:"Occitan (post 1500)",oj:"Ojibwa",or:"Oriya",om:"Oromo",os:"Ossetian; Ossetic",pa:"Panjabi; Punjabi",fa:"Persian",pi:"Pali",pl:"Polish",pt:"Portuguese",ps:"Pushto; Pashto",qu:"Quechua",rm:"Romansh",ro:"Romanian; Moldavian; Moldovan",rn:"Rundi",ru:"Russian",sg:"Sango",sa:"Sanskrit",si:"Sinhala; Sinhalese",sk:"Slovak",sl:"Slovenian",se:"Northern Sami",sm:"Samoan",sn:"Shona",sd:"Sindhi",so:"Somali",st:"Sotho, Southern",es:"Spanish",sc:"Sardinian",sr:"Serbian",ss:"Swati",su:"Sundanese",sw:"Swahili",sv:"Swedish",ty:"Tahitian",ta:"Tamil",tt:"Tatar",te:"Telugu",tg:"Tajik",tl:"Tagalog",th:"Thai",bo:"Tibetan",ti:"Tigrinya",to:"Tonga (Tonga Islands)",tn:"Tswana",ts:"Tsonga",tk:"Turkmen",tr:"Turkish",tw:"Twi",ug:"Uighur; Uyghur",uk:"Ukrainian",ur:"Urdu",uz:"Uzbek",ve:"Venda",vi:"Vietnamese",vo:"Volapük",cy:"Welsh",wa:"Walloon",wo:"Wolof",xh:"Xhosa",yi:"Yiddish",yo:"Yoruba",za:"Zhuang; Chuang",zu:"Zulu"};(0,n(696459).Yd)(i);function o(e){return i[e]}},396955:(e,t,n)=>{n.d(t,{yC:()=>a,b4:()=>r,l8:()=>l});n(670560),n(267602),n(228244);var i=()=>n(730120);const o=["BR","IN","ID","MX","PH","AR","CO","TR","PE","UA","TH","CL","MY","EG","ZA","NG","PK","KZ","MA","EC","BD","VE","BY"];const s={team_three_months:{minMemberCount:1,maxMemberCount:Number.MAX_SAFE_INTEGER,couponRefreshDays:Number.MAX_SAFE_INTEGER,trialRefreshDays:Number.MAX_SAFE_INTEGER,billingIntervals:["month"],productsCustomerMustHave:["plus"],productsOfferCanApplyTo:["plus"]},team_annual:{minMemberCount:2,maxMemberCount:Number.MAX_SAFE_INTEGER,couponRefreshDays:Number.MAX_SAFE_INTEGER,trialRefreshDays:Number.MAX_SAFE_INTEGER,billingIntervals:["year"],productsCustomerMustHave:["plus"],productsOfferCanApplyTo:["plus"]},business_three_months:{minMemberCount:1,maxMemberCount:Number.MAX_SAFE_INTEGER,couponRefreshDays:Number.MAX_SAFE_INTEGER,trialRefreshDays:Number.MAX_SAFE_INTEGER,billingIntervals:["month"],productsCustomerMustHave:["business"],productsOfferCanApplyTo:["business"]},business_annual:{minMemberCount:2,maxMemberCount:Number.MAX_SAFE_INTEGER,couponRefreshDays:Number.MAX_SAFE_INTEGER,trialRefreshDays:Number.MAX_SAFE_INTEGER,billingIntervals:["year"],productsCustomerMustHave:["business"],productsOfferCanApplyTo:["business"]},enterprise_three_months:{minMemberCount:1,maxMemberCount:Number.MAX_SAFE_INTEGER,couponRefreshDays:Number.MAX_SAFE_INTEGER,trialRefreshDays:Number.MAX_SAFE_INTEGER,billingIntervals:["month"],productsCustomerMustHave:["enterprise"],productsOfferCanApplyTo:["enterprise"]},enterprise_annual:{minMemberCount:2,maxMemberCount:Number.MAX_SAFE_INTEGER,couponRefreshDays:Number.MAX_SAFE_INTEGER,trialRefreshDays:Number.MAX_SAFE_INTEGER,billingIntervals:["year"],productsCustomerMustHave:["enterprise"],productsOfferCanApplyTo:["enterprise"]},ai_fifty_percent_upgrade:{minMemberCount:1,maxMemberCount:1,couponRefreshDays:Number.MAX_SAFE_INTEGER,trialRefreshDays:Number.MAX_SAFE_INTEGER,billingIntervals:["month","year"],productsCustomerMustHave:["student"],productsOfferCanApplyTo:["ai"],requiresStudentDomains:!0},ai_fifty_percent_downgrade:{minMemberCount:1,maxMemberCount:Number.MAX_SAFE_INTEGER,couponRefreshDays:Number.MAX_SAFE_INTEGER,trialRefreshDays:Number.MAX_SAFE_INTEGER,billingIntervals:["month"],productsCustomerMustHave:["ai"],productsOfferCanApplyTo:["ai"]},resurrection_offer:{minMemberCount:1,maxMemberCount:Number.MAX_SAFE_INTEGER,couponRefreshDays:Number.MAX_SAFE_INTEGER,trialRefreshDays:Number.MAX_SAFE_INTEGER,productsCustomerMustHave:["free"],productsOfferCanApplyTo:["plus"],lastSubscriptionEndTimeRange:{start:i().nL.fromObject({days:3}),end:i().nL.fromObject({days:60})}},personal:{minMemberCount:1,maxMemberCount:1,couponRefreshDays:Number.MAX_SAFE_INTEGER,trialRefreshDays:Number.MAX_SAFE_INTEGER,billingIntervals:["month"],productsCustomerMustHave:["personal"],productsOfferCanApplyTo:["personal"]},lic_25:{minMemberCount:1,maxMemberCount:Number.MAX_SAFE_INTEGER,couponRefreshDays:365,trialRefreshDays:1,billingIntervals:["month","year"],productsCustomerMustHave:["free"],productsCustomerCantHave:["ai"],productsOfferCanApplyTo:["plus","business"],eligibleCountryCodes:o,requiresNonSalesEligibleDomains:!0,experimentDetails:{id:"lic",group:"lic_25"}},lic_50:{minMemberCount:1,maxMemberCount:Number.MAX_SAFE_INTEGER,couponRefreshDays:365,trialRefreshDays:1,billingIntervals:["month","year"],productsCustomerMustHave:["free"],productsCustomerCantHave:["ai"],productsOfferCanApplyTo:["plus","business"],eligibleCountryCodes:o,requiresNonSalesEligibleDomains:!0,experimentDetails:{id:"lic",group:"lic_50"}},new_year_2025:{minMemberCount:1,maxMemberCount:Number.MAX_SAFE_INTEGER,couponRefreshDays:365,trialRefreshDays:1,billingIntervals:["month"],productsCustomerMustHave:["free"],productsCustomerCantHave:["ai","sites_custom_hostnames"],productsOfferCanApplyTo:["ai"],requiresNonSalesEligibleDomains:!0,experimentDetails:{id:"new_year_2025",group:"on"}},default:{minMemberCount:1,maxMemberCount:Number.MAX_SAFE_INTEGER,couponRefreshDays:Number.MAX_SAFE_INTEGER,trialRefreshDays:Number.MAX_SAFE_INTEGER,productsCustomerMustHave:["free"],productsOfferCanApplyTo:["plus","business"]},mm_ent:{minMemberCount:1,maxMemberCount:Number.MAX_SAFE_INTEGER,couponRefreshDays:Number.MAX_SAFE_INTEGER,trialRefreshDays:Number.MAX_SAFE_INTEGER,productsCustomerMustHave:["free"],productsOfferCanApplyTo:["plus"]},upwork:{minMemberCount:1,maxMemberCount:Number.MAX_SAFE_INTEGER,couponRefreshDays:Number.MAX_SAFE_INTEGER,trialRefreshDays:Number.MAX_SAFE_INTEGER,productsCustomerMustHave:["free"],productsOfferCanApplyTo:["plus"]},perfmark:{minMemberCount:1,maxMemberCount:Number.MAX_SAFE_INTEGER,couponRefreshDays:Number.MAX_SAFE_INTEGER,trialRefreshDays:Number.MAX_SAFE_INTEGER,productsCustomerMustHave:["free"],productsOfferCanApplyTo:["plus"]},reverse:{minMemberCount:1,maxMemberCount:Number.MAX_SAFE_INTEGER,couponRefreshDays:Number.MAX_SAFE_INTEGER,trialRefreshDays:Number.MAX_SAFE_INTEGER,productsCustomerMustHave:["free"],productsOfferCanApplyTo:["plus"]},reverse_mm_ent:{minMemberCount:1,maxMemberCount:Number.MAX_SAFE_INTEGER,couponRefreshDays:Number.MAX_SAFE_INTEGER,trialRefreshDays:Number.MAX_SAFE_INTEGER,productsCustomerMustHave:["free"],productsOfferCanApplyTo:["plus"]},enterprise:{minMemberCount:1,maxMemberCount:Number.MAX_SAFE_INTEGER,couponRefreshDays:Number.MAX_SAFE_INTEGER,trialRefreshDays:Number.MAX_SAFE_INTEGER,productsCustomerMustHave:["free"],productsOfferCanApplyTo:["plus"]},admin_3m:{minMemberCount:1,maxMemberCount:Number.MAX_SAFE_INTEGER,couponRefreshDays:Number.MAX_SAFE_INTEGER,trialRefreshDays:Number.MAX_SAFE_INTEGER,productsCustomerMustHave:["free"],productsOfferCanApplyTo:["plus","ai"]},admin_6m:{minMemberCount:1,maxMemberCount:Number.MAX_SAFE_INTEGER,couponRefreshDays:Number.MAX_SAFE_INTEGER,trialRefreshDays:Number.MAX_SAFE_INTEGER,productsCustomerMustHave:["free"],productsOfferCanApplyTo:["plus","ai"]},admin_12m:{minMemberCount:1,maxMemberCount:Number.MAX_SAFE_INTEGER,couponRefreshDays:Number.MAX_SAFE_INTEGER,trialRefreshDays:Number.MAX_SAFE_INTEGER,productsCustomerMustHave:["free"],productsOfferCanApplyTo:["plus","ai"]},admin_3m_smb:{minMemberCount:1,maxMemberCount:Number.MAX_SAFE_INTEGER,couponRefreshDays:Number.MAX_SAFE_INTEGER,trialRefreshDays:Number.MAX_SAFE_INTEGER,productsCustomerMustHave:["free"],productsOfferCanApplyTo:["plus","ai"]},admin_6m_smb:{minMemberCount:1,maxMemberCount:Number.MAX_SAFE_INTEGER,couponRefreshDays:Number.MAX_SAFE_INTEGER,trialRefreshDays:Number.MAX_SAFE_INTEGER,productsCustomerMustHave:["free"],productsOfferCanApplyTo:["plus","ai"]},admin_12m_lenny:{minMemberCount:1,maxMemberCount:Number.MAX_SAFE_INTEGER,couponRefreshDays:Number.MAX_SAFE_INTEGER,trialRefreshDays:Number.MAX_SAFE_INTEGER,productsCustomerMustHave:["free"],productsOfferCanApplyTo:["plus","ai"]}};function a(e,t){var n;if(!e)return!1;const i=null===(n=s[e])||void 0===n?void 0:n.productsOfferCanApplyTo;return Boolean(!i||i.includes(t))}function r(e){return e?s[e].productsOfferCanApplyTo??[]:[]}function l(e,t){const n=s[e].billingIntervals;return!n||n.includes(t)}}}]);