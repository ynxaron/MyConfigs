"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[44751],{472675:(e,t,i)=>{i.d(t,{S:()=>g});i(667294);var n=()=>i(142735),o=()=>i(846550),r=()=>i(934158),l=()=>i(696056),a=()=>i(989478),s=()=>i(696459),c=()=>i(634760),d=()=>i(981583),u=()=>i(871953),p=i(785893);function g(e){let{authorStore:t,avatarSize:i,avatarStyle:g}=e;const m=(0,n().VK)((()=>(0,u().TL)(t)),[t]),h=(0,o().yK)((e=>({placeholder:{width:i,height:i,background:e.lightDividerColor,borderRadius:i/2,flexShrink:0,...g}})),[i,g]);return m.asActor?m.table===a().KJ?(0,p.jsx)(d().Z,{hasTooltip:!0,userValue:m.asActor,style:g,size:i,avatarShouldShowShadow:!1}):m.table===l().cZ?(0,p.jsx)(c().Z,{botValue:m,size:i,style:g}):m.table===r().y0?(0,p.jsx)("div",{style:h.placeholder}):void(0,s().t1)(m):(0,p.jsx)("div",{style:h.placeholder})}},625449:(e,t,i)=>{i.r(t),i.d(t,{ExternalObjectInstanceBlockMenu:()=>B});i(670560);var n=i(667294),o=()=>i(219727),r=()=>i(142735),l=()=>i(235484),a=()=>i(696056),s=()=>i(788860),c=()=>i(696459),d=()=>i(769197),u=()=>i(959137),p=()=>i(269299),g=()=>i(423402),m=()=>i(964433),h=()=>i(542058),f=()=>i(141735),x=()=>i(352230),y=()=>i(677559),v=()=>i(424097),S=()=>i(315136),j=()=>i(138912),k=()=>i(855238),b=()=>i(198829),I=()=>i(255577),w=()=>i(388284),C=i(785893);function B(e){const{titleForReloadMenuOption:t,store:i,parentBlockStore:B,onAccept:T,onDismiss:M,extraSecondaryItemKey:R,token:U}=e,_=(0,o().O7)(),{value:A}=(0,y().XJ)(m().p),{value:P}=(0,y().XJ)(h().m),{value:z}=(0,y().XJ)(f().F.formulas),{value:O}=(0,y().XJ)(u().F.clipboardActions),D=(0,n.useCallback)((e=>{const t={blocks:[i],environment:_,publicEditMode:void 0,lazyDependencies:{clipboardActions:O,formulasModule:z,markdownLinkifyIt:A,tinyMceMicrosoftWordPasteFilter:P}};return{key:e.key,render:(i,n)=>e.render(i,t,{onAccept:T,onFocus:n.onFocus}),action:i=>{let{event:n}=i;return e.action(t,n)}}}),[i,_,z,A,P,T,O]),Z=[];(0,r().VK)((()=>{const e=i.getFormat().bot_id,t=j().default.getBotsAsRecordMap();if(e&&!0===j().default.state.loaded){const i=t.getValue({table:a().cZ,id:e});if(i&&i.integration_id&&i.integration_id===l().U9)return!1}return!0}),[i])&&Z.push({key:0,render:e=>(0,C.jsx)(w().Z,{...e,style:{paddingTop:0,paddingBottom:0}}),items:[{key:"reload external instance object",render:e=>(0,C.jsx)(k().Z,{...e,title:t,svg:S().b}),action:()=>{i&&(i.isExternalObjectInstanceBlockStore()||i.isExternalObjectInstancePageBlockStore())&&g().qK({environment:_,from:"page_more_menu",store:i,spaceId:i.getSpaceId()})}}]});const L=(0,r().VK)((()=>{switch(R){case"preview_to_mention":return[D(d().OH)];case"mention_to_preview":if(!i.isExternalObjectInstanceBlockStore())return[];const e={key:"turn preview into block",render:e=>(0,C.jsx)(k().Z,{...e,title:(0,C.jsx)(s()._H,{id:"hoverPreviewOverlay.action.turnPreviewIntoPreview",defaultMessage:"Turn into preview"}),svg:v().z}),action:()=>{B&&U&&p().createAndCommit({userAction:"HoverPreviewOverlay.transformExternalObjectInstanceMentionIntoBlock",environment:_,canUndo:!0,perform:e=>{g().aV({block:i,parentStore:B,transaction:e,token:U}),e.postSubmitCallbacks.push((e=>{e||null==M||M()}))}})}};return[e];default:(0,c().t1)(R)}}),[R,D,i,B,U,_,M]);return Z.push({key:1,render:e=>(0,C.jsx)(w().Z,{...e,style:{paddingTop:0,paddingBottom:0}}),items:[...L,D(d().IK)]}),(0,C.jsx)(b().Z,{menuType:x().o.Popup,children:(0,C.jsx)(I().Z,{type:I().i.Vertical,initialFocus:void 0,onAccept:T,sections:Z,style:{paddingTop:3,paddingBottom:3}})})}},34683:(e,t,i)=>{i.d(t,{g:()=>j});var n=i(667294),o=()=>i(219727),r=()=>i(846550),l=()=>i(788860),a=()=>i(568017),s=()=>i(145990),c=()=>i(314379),d=()=>i(953293),u=()=>i(998901),p=()=>i(35982),g=()=>i(826955),m=()=>i(154186),h=()=>i(448419),f=()=>i(1910),x=()=>i(733518),y=()=>i(54782),v=()=>i(904912),S=i(785893);function j(e){const{height:t,padding:i,padding_top:j,iframe_url:k,hoverData:b,store:I,token:w,href:C,onDismiss:B}=e,T=(0,l().vU)({editLink:{defaultMessage:"Edit link",id:"hoverPreviewOverlay.editLink"}}),M=(0,o().O7)(),R=(0,l().YB)(),U=(0,n.useRef)(null),_=(0,r().yK)((e=>({content:{width:340,height:"100%",aspectRatio:"auto",position:"relative"},container:{width:340,maxHeight:420,flexDirection:"column",alignItems:"flex-start"},buttonStyle:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:4,fill:e.lightIconColor,background:(0,v().M1)(M)}})),[M]),A=I&&I.recordStoreUIParentStore&&I.recordStoreUIParentStore instanceof g().G?I.recordStoreUIParentStore:I instanceof g().G?I:void 0;return(0,S.jsxs)("div",{style:_.container,children:[e.showEditButton&&(0,S.jsx)(f().Z,{onClick:e.handleEditClick,icon:d().R,isDarkIconColor:!0,ariaLabel:R.formatMessage(T.editLink),hasBackground:!0,style:{position:"absolute",top:8,right:8,zIndex:1}}),w&&A&&b&&(0,S.jsx)("div",{style:{position:"absolute",top:8,right:8,zIndex:2},children:(0,S.jsx)(h().ZP,{popupType:h().Z4.Popup,placementToOrigin:u().Placement.Right,alignmentToOrigin:u().Alignment.Start,originGap:4,onClose:()=>{let e=!1;const t=U.current;t&&(e=(0,p().uh)(t.getBoundingClientRect(),s().IL.x,s().IL.y)),e||null==B||B()},renderOrigin:e=>(0,S.jsx)(m().Z,{style:_.buttonStyle,...e,children:(0,c().o)({width:14,fill:a().ZP.white})}),render:e=>(0,S.jsx)(y().Z,{parentBlockStore:A,store:I,token:w,href:C,hoverData:b,onAccept:()=>e.close()})})}),(0,S.jsx)(x().Z,{source:k,style:_.content,preserveScale:!!(t&&t<1||i),background:!1,height:t&&t>0?t:void 0,aspectRatio:i?i/100:.75,paddingTop:j||void 0})]})}},863406:(e,t,i)=>{i.d(t,{Y:()=>R});var n=i(667294),o=()=>i(492788),r=()=>i(219727),l=()=>i(846550),a=()=>i(788860),s=()=>i(568017),c=()=>i(707513),d=()=>i(959137),u=()=>i(145990),p=()=>i(641506),g=()=>i(325107),m=()=>i(314379),h=()=>i(599631),f=()=>i(953293),x=()=>i(998901),y=()=>i(35982),v=()=>i(826955),S=()=>i(154186),j=()=>i(448419),k=()=>i(643051),b=()=>i(1910),I=()=>i(518242),w=()=>i(668001),C=()=>i(251932),B=()=>i(54782),T=()=>i(904912),M=i(785893);function R(e){const t=(0,r().O7)(),{hoverData:i,href:R,handleEditClick:U,showEditButton:_,loading:A,store:P,token:z,onDismiss:O}=e,D=(0,l().yK)((e=>({newWrapper:{width:280,flexDirection:"column",alignItems:"flex-start"},coverContainer:{width:280,height:120},pageTitle:{display:"inline",fontWeight:c().Ue.semibold,color:e.text.primary,fontSize:13,lineHeight:1.15},highlightedBlockWrapper:{display:"flex",marginBottom:8},contentNew:{display:"flex",flexDirection:"column",alignItems:"flex-start",padding:"12px 16px",gap:12,width:280},titleAndDescription:{display:"flex",flexDirection:"column",alignItems:"flex-start",padding:0,gap:2,width:248},linkTitle:{...(0,p().pd)(2),fontStyle:"normal",fontWeight:c().Ue.semibold,fontSize:14,letterSpacing:-.154,lineHeight:"143%",fontFeatureSettings:"'case' on",textOverflow:"ellipsis",color:e.regularTextColor},newDescription:{display:"flex",flexDirection:"column",alignItems:"flex-start",padding:0,...(0,p().pd)(3),textOverflow:"ellipsis",width:248},newText:{fontSize:12,fontWeight:400,whiteSpace:"normal",wordBreak:"break-word",color:e.regularTextColor},buttonStyle:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:4,fill:e.lightIconColor,background:i?(0,T().M1)(t):"dark"===e.mode?e.accentColors.gray[100]:e.buttonBackground,border:i?void 0:"1px solid var(--Stroke-Deemphasized, rgba(227, 226, 224, 0.50))"},iconBoxImageStyle:{margin:1}})),[t,i]),Z=(0,a().YB)(),L=(0,n.useRef)(null),V=(0,a().vU)({copyLink:{defaultMessage:"Copy link",id:"hoverPreviewOverlay.copyLink"},editLink:{defaultMessage:"Edit link",id:"hoverPreviewOverlay.editLink"}}),K=(0,n.useCallback)((async()=>{await o().default.afterNextFlush();const e=await d().F.clipboardActions.load(),i=e.clipboardMessages.copiedLinkToClipboard,n=R;e.copyString({environment:t,stringValue:n,copiedMessage:i})}),[t,R]),H=P&&P.recordStoreUIParentStore&&P.recordStoreUIParentStore instanceof v().G?P.recordStoreUIParentStore:P instanceof v().G?P:void 0,E=(null==i?void 0:i.thumbnail_url)??((null==i?void 0:i.images)&&i.images.length>0&&i.images[0].url);return(0,M.jsxs)(C().Ht,{style:D.newWrapper,children:[_&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(b().Z,{onClick:K,icon:g().U,isDarkIconColor:!0,ariaLabel:Z.formatMessage(V.copyLink),hasBackground:!0,style:{position:"absolute",top:8,right:8}}),(0,M.jsx)(b().Z,{onClick:U,icon:f().R,isDarkIconColor:!0,ariaLabel:Z.formatMessage(V.editLink),hasBackground:!0,style:{position:"absolute",top:8,right:35}})]}),z&&H&&!_&&(0,M.jsx)("div",{style:{position:"absolute",top:8,right:8},children:(0,M.jsx)(j().ZP,{popupType:j().Z4.Popup,placementToOrigin:x().Placement.Right,alignmentToOrigin:x().Alignment.Start,originGap:4,onClose:()=>{let e=!1;const t=L.current;t&&(e=(0,y().uh)(t.getBoundingClientRect(),u().IL.x,u().IL.y)),e||null==O||O()},renderOrigin:e=>(0,M.jsx)(S().Z,{style:D.buttonStyle,...e,children:(0,m().o)({width:14,fill:i?s().ZP.white:s().ZP.uiGray})}),render:e=>(0,M.jsx)(B().Z,{parentBlockStore:H,store:P,token:z,href:R,hoverData:i,onAccept:()=>e.close()})})}),E&&(0,M.jsx)(C().gq,{style:D.coverContainer,children:(0,M.jsx)(I().ZP,{src:E,style:{width:"100%",height:"100%",left:0,top:"calc(50% - 280px/2)"}})}),(0,M.jsxs)(C().Ht,{style:D.contentNew,children:[((null==i?void 0:i.title)||(null==i?void 0:i.description))&&(0,M.jsxs)(C().Ht,{style:D.titleAndDescription,children:[(null==i?void 0:i.title)&&(0,M.jsx)(C().gq,{gap:2,children:(0,M.jsx)("div",{style:D.linkTitle,children:null==i?void 0:i.title})}),(null==i?void 0:i.description)&&(0,M.jsx)(C().gq,{gap:2,children:(0,M.jsx)("div",{style:D.newDescription,children:(0,M.jsx)("div",{spellCheck:!1,style:D.newText,children:(0,M.jsx)("div",{children:null==i?void 0:i.description})})})})]}),A?(0,M.jsx)(w().Z,{style:{width:200,height:16}}):(0,M.jsxs)(C().gq,{alignItems:"left",style:{display:"flex",flexDirection:"row",alignItems:"center",padding:0,gap:4,width:205,height:16},children:[null!=i&&i.favicon_url?(0,M.jsx)(k().Z,{type:"image_url",imageURL:null==i?void 0:i.favicon_url,size:16,style:D.iconBoxImageStyle}):null!=i&&i.icon_url?(0,M.jsx)(k().Z,{type:"image_url",imageURL:null==i?void 0:i.icon_url,size:16,style:D.iconBoxImageStyle}):(0,M.jsx)(b().Z,{icon:h().N,isDarkIconColor:!0,disabled:!0}),(0,M.jsx)("div",{style:{flexGrow:0,fontWeight:c().Ue.medium,color:"#787774",fontSize:12,...c().Yu},children:(null==i?void 0:i.provider_name)||(null==i?void 0:i.link_provider)||R})]})]})]})}},878517:(e,t,i)=>{i.d(t,{D5:()=>et,E5:()=>at,s6:()=>Ve,Tq:()=>ot,yD:()=>tt,n1:()=>lt});i(267602),i(653476),i(470928),i(241792),i(228244);var n=i(667294),o=()=>i(219727),r=()=>i(142735),l=()=>i(846550),a=()=>i(646574),s=()=>i(278606),c=()=>i(235484),d=()=>i(565630),u=()=>i(956057),p=()=>i(995867),g=()=>i(396136),m=()=>i(602299),h=()=>i(955620),f=()=>i(727207),x=()=>i(830968),y=()=>i(788860),v=()=>i(513670),S=()=>i(696459),j=()=>i(707513),k=()=>i(30238),b=()=>i(448046),I=()=>i(145990),w=()=>i(681035),C=()=>i(103908),B=()=>i(337897),T=()=>i(286338),M=()=>i(250625),R=()=>i(417746),U=()=>i(485569),_=()=>i(659234),A=()=>i(641506),P=()=>i(480089),z=()=>i(485491),O=()=>i(155350),D=()=>i(314379),Z=()=>i(472753),L=()=>i(998901),V=()=>i(104088),K=()=>i(35982),H=()=>i(876822),E=()=>i(197666),W=()=>i(202842),F=()=>i(111124),q=()=>i(56810),N=()=>i(826955),G=()=>i(9656),J=()=>i(154186),Y=()=>i(448419),$=()=>i(643051),X=()=>i(518242),Q=()=>i(967092),ee=()=>i(943620),te=()=>i(679063),ie=()=>i(384241),ne=()=>i(989560),oe=()=>i(625449),re=()=>i(743790),le=()=>i(251932),ae=()=>i(75751),se=()=>i(801812),ce=()=>i(824462),de=()=>i(34683),ue=()=>i(863406),pe=i(785893);function ge(e){const{annotation:t,token:i,store:l}=e.state,a=e.onDismiss,s=(0,o().O7)(),[c,d]=(0,n.useState)(!0),u=h().r0m(t),{iframe_url:p,height:g,padding:m,href:f,padding_top:x}=u,[{value:y}]=(0,se().r5)((async()=>{var e,t;if(p)return void k().wB(s,{type:"iframe"});if(u.hasOwnProperty("description"))return d(!1),v().xb(u)?k().wB(s,{type:"default"}):k().wB(s,{type:"custom"}),u;d(!0);const i=await ce().callApi({eventName:"getDataForLinkMention",environment:s,data:{url:f,spaceId:(null===(e=H().default.state.currentSpaceStore)||void 0===e?void 0:e.id)??(null===(t=H().default.state.mainEditorCurrentBlockStore)||void 0===t?void 0:t.getSpaceId()),source:"link_mention_hover"}});return"success"===i.type?"error"in i.data?void d(!1):(k().wB(s,{type:"custom"}),d(!1),i.data):"failed"===i.type?void d(!1):(d(!1),(0,S().t1)(i))}),[u,s,f,p]),j=(0,r().VK)((()=>{if(y)return y}),[y]);return j&&!p||!j&&!p?(0,pe.jsx)(ue().Y,{hoverData:j,href:f,showEditButton:!1,store:l,token:i,onDismiss:a,loading:c}):p?(0,pe.jsx)(de().g,{hoverData:u,iframe_url:p,showEditButton:!1,height:g,padding:m,store:l,token:i,onDismiss:a,href:f,padding_top:x}):(0,pe.jsx)(ue().Y,{hoverData:j,href:f,showEditButton:!1,store:l,token:i,onDismiss:a,loading:c})}var me=()=>i(492788),he=()=>i(506347),fe=()=>i(135857),xe=()=>i(526839),ye=()=>i(572680),ve=()=>i(572948),Se=()=>i(959137),je=()=>i(33649),ke=()=>i(970105),be=()=>i(205228),Ie=()=>i(718611),we=()=>i(338530),Ce=()=>i(325107),Be=()=>i(975899),Te=()=>i(624528),Me=()=>i(1910);function Re(e){const{onDismiss:t,state:i}=e,{store:a}=i,s=(0,o().O7)(),c=(0,l().Fg)(),[d,u]=(0,n.useState)(!0),p="token"===i.type?h().zW$(i.annotation):i.hyperlink,m=(0,xe().A5)({url:p,baseUrl:be().default.domainBaseUrl,publicDomainName:be().default.publicDomainName}),f=(0,n.useCallback)((async()=>{switch(t(),await me().default.afterNextFlush(),i.type){case"token":ke().AE({token:i.token,store:i.store,readOnly:!1}),je().dz({type:"focusOnly",focus:!0});break;case"block":Te().KB({store:i.store});break;default:(0,S().t1)(i)}}),[t,i]),x=(0,n.useCallback)((async()=>{t(),await me().default.afterNextFlush();const e=await Se().F.clipboardActions.load(),i=e.clipboardMessages.copiedLinkToClipboard;let n=p;const o=(0,ye().parseRoute)({url:p,baseUrl:be().default.domainBaseUrl,publicDomainName:be().default.publicDomainName,isMobile:s.device.isMobile,protocol:be().default.protocol,currentUrl:window.location.href});if("page"===o.name&&o.blockId){const e=N().G.createChildStore(a,{table:g().iU,id:o.blockId});n=(0,fe().Z)({pageId:o.blockId,pageModel:e.getModel(),baseUrl:be().default.domainBaseUrl,discussionId:o.discussionId,scrollToBlockId:o.scrollToBlockId,peekViewBlockId:o.peekViewBlockId,peekMode:o.peekMode,pageVisitSource:he().tY.CopyLink})}e.copyString({environment:s,stringValue:n,copiedMessage:i})}),[s,t,a,p]),v=(0,r().VK)((()=>(0,T().L0)()),[]),[{value:b}]=(0,se().r5)((async()=>{var e,t;if(m||!v)return;u(!0);const i=await ce().callApi({eventName:"getDataForLinkMention",environment:s,data:{url:p,spaceId:(null===(e=H().default.state.currentSpaceStore)||void 0===e?void 0:e.id)??(null===(t=H().default.state.mainEditorCurrentBlockStore)||void 0===t?void 0:t.getSpaceId()),source:"hyperlink_hover"}});if("success"===i.type)return"error"in i.data?void u(!1):(u(!1),i.data);if("failed"===i.type)throw void u(!1);return u(!1),(0,S().t1)(i)}),[s,p,m,v]),I=s.device.isSafari||s.device.isIOS,w=(0,l().yK)((e=>({wrapper:{fontSize:j().JB.UISmall.desktop,color:e.mediumTextColor,fontWeight:j().Ue.regular,fill:e.mediumIconColor,flexDirection:"column"},destination:{padding:"4px 0 4px 6px",alignItems:"center"},button:{display:"flex",flexDirection:"column",alignItems:"center",padding:"2px 6px",whiteSpace:"nowrap",marginRight:2,borderRadius:4,color:e.regularTextColor},destinationText:{paddingRight:6,maxWidth:250,...j().Yu},icon:{height:"1em",width:"1em",marginRight:I?"0.4em":"0.5em",fill:e.mediumIconColor},content:{width:340,height:"100%",aspectRatio:"auto"},title:{color:e.regularTextColor,fontWeight:j().Ue.semibold,whiteSpace:"normal",wordBreak:"break-word",fontSize:13,padding:"4px 0",maxWidth:300},author:{color:e.mediumTextColor,fontSize:j().JB.UISmall.desktop},description:{wordBreak:"break-word",maxWidth:300,...j().Yu,color:e.regularTextColor,fontSize:12,lineHeight:1.45,whiteSpace:"normal",flexDirection:"column"},text:{color:e.regularTextColor,fontSize:12,lineHeight:1.45},buttons:{fontWeight:j().Ue.medium}})),[I]),C=(0,y().YB)(),B=(0,y().vU)({copyLink:{defaultMessage:"Copy link",id:"hoverPreviewOverlay.copyLink"}}),M=(0,r().VK)((()=>{if(!m)return{pageIcon:(0,Be().o)(w.icon),title:(0,pe.jsx)("div",{style:w.destinationText,children:p})};const e=N().G.createChildStore(a,{table:g().iU,id:m});return{pageIcon:(0,ve().tp)({pageModel:e.getModel(),pageRole:e.getRole(),baseUrl:be().default.domainBaseUrl,getRecordModel:a.getRecordModel,emojiType:(0,Ie().e_)(s),isSafariOrIOS:I,isClient:!0,showEmojiInline:s.device.isWindows,currentUserId:s.currentUser.id,theme:c,emojiData:we().Z.state}),title:(0,pe.jsx)(ie().Z,{placeholder:`${window.location.protocol}//${window.location.host}${p}`,style:w.destinationText,store:e})}}),[s,a,m,w,c,I,p]),R=(0,r().VK)((()=>{if(!s.device.isMobile)return b?(b.hasOwnProperty("iframe")?k().uo(s,{type:"iframe"}):k().uo(s,{type:"custom"}),b):void 0}),[s,b]);if(v&&!m){if(R&&!R.iframe||!R)return(0,pe.jsx)(ue().Y,{hoverData:R,href:p,handleEditClick:f,showEditButton:e.isHoveredTokenEditable,store:a,loading:d});if(R&&R.iframe)return(0,pe.jsx)(de().g,{hoverData:R,iframe_url:R.iframe,height:R.height,padding:R.padding,padding_top:R.padding_top,handleEditClick:f,store:a,href:p,onDismiss:t,showEditButton:e.isHoveredTokenEditable})}return(0,pe.jsx)(le().gq,{style:w.wrapper,alignItems:"center",children:(0,pe.jsxs)(le().gq,{style:w.destination,alignItems:"center",children:[M.pageIcon,M.title,(0,pe.jsx)(Me().Z,{onClick:x,icon:Ce().U,isDarkIconColor:!0,ariaLabel:C.formatMessage(B.copyLink)}),e.isHoveredTokenEditable&&(0,pe.jsx)(J().Z,{style:w.button,onClick:f,children:(0,pe.jsx)(y()._H,{defaultMessage:"Edit",id:"hoverPreviewOverlay.editButton.label"})})]})})}var Ue=()=>i(146947),_e=()=>i(472675),Ae=()=>i(218181),Pe=()=>i(654133);function ze(e){const{store:t,closestNonAliveAncestorStore:i,originRect:n}=e,o=(0,y().YB)(),r=(0,l().yK)((e=>({tooltipStyle:{fontSize:14},mentionPageInTrashTime:{fontWeight:j().Ue.regular,color:e.text.secondary,fontSize:14},avatarStyle:{margin:"0 6px"},placeholderStyle:{marginRight:6}})),[]),{trashAuthorStore:s,trashAuthorDisplayName:c,trashTimestamp:d,isMovedToTrashMetadata:u}=(0,Ae().q)({blockStore:t,closestNonAliveAncestorStore:i,intl:o}),p=(0,a().$b)(d,Ue().locale,o),g=s&&(0,pe.jsx)(_e().S,{authorStore:s,avatarSize:18,avatarStyle:r.avatarStyle,placeholderStyle:{}});return(0,pe.jsx)(Pe().Z,{forceVisibleState:!0,originRect:n,render:()=>{},renderTooltip:()=>(0,pe.jsxs)("div",{children:[(0,pe.jsxs)(le().gq,{alignItems:"center",children:[u?(0,pe.jsx)(y()._H,{defaultMessage:"Moved to Trash by",id:"hoverPreviewOverlay.pageInTrash.message.movedToTrashBy"}):(0,pe.jsx)(y()._H,{defaultMessage:"Last edited by",id:"hoverPreviewOverlay.pageInTrash.message.lastEditedBy"}),g||(0,pe.jsx)("div",{style:r.placeholderStyle}),c]}),(0,pe.jsx)("div",{style:r.mentionPageInTrashTime,children:p})]}),placement:L().Placement.Bottom,alignment:L().Alignment.Start,style:r.tooltipStyle})}var Oe=()=>i(989478),De=()=>i(80164);function Ze(e){const t=(0,r().VK)((()=>H().default.state.currentSpaceStore),[]),i=(0,r().VK)((()=>{var t;return null===(t=e.state)||void 0===t?void 0:t.annotation}),[e.state]),n=(0,d().Rm)(i,void 0,600,Object.is),o=(0,r().VK)((()=>{if(t&&n)return N().U6.createChildStore(t,{id:n[1],table:Oe().KJ})}),[t,n]),l=(0,r().VK)((()=>!!o&&o.isDefined()),[o]);return o&&l&&t?(0,pe.jsx)(De().Z,{targetUserStore:o}):null}const Le=20;function Ve(e){const t=(0,o().O7)(),i=(0,r().Kw)(E().Z,{debugName:"HoverPreviewOverlay"}),{state:l,pinPopup:a,unpinPopup:s,hasBeenHovering:c,isPinned:u,dismissPopup:p}=function(){const[e,t]=(0,n.useState)(!1),[i]=(0,r().AF)(F().Z),o=(0,d().Kt)(i,400,Object.is),[l,a]=(0,n.useState)(void 0),s=l||(e?void 0:o),c=(0,n.useCallback)((()=>a(s)),[s]),u=(0,n.useCallback)((()=>{a(void 0)}),[]),p=(0,n.useCallback)((()=>{u(),t(!0)}),[u]);return(0,n.useEffect)((()=>{t(!1)}),[o]),{state:s,pinPopup:c,unpinPopup:u,hasBeenHovering:i&&i===s,isPinned:Boolean(l),dismissPopup:p}}(),g=(0,r().VK)((()=>(0,T().En)()),[]),m=function(e){const t=(0,o().O7)();return(0,r().VK)((()=>!!e&&(0,_().E)(t,e.store)),[e,t])}(l),f=(0,n.useMemo)((()=>Boolean(l&&function(e,t){switch(e.type){case"token":return e.annotations.some(h().j0F)||t&&e.annotations.some(h().nSN)||e.annotations.some(h().IWo)||e.annotations.some(h().vuC);case"block":return!!e.hyperlink;default:(0,S().t1)(e)}}(l,m))),[l,m]),x=(0,n.useMemo)((()=>l&&("token"===l.type?l.token.node.getBoundingClientRect():Z().R.getRect(null==l?void 0:l.store))),[l]),y=x&&0===x.width&&0===x.height&&0===x.left&&0===x.top,j=f?!y:Boolean(!i&&c&&!y),[,k]=(0,r().AF)(W().Z);(0,n.useEffect)((()=>(k({isPinned:u}),()=>k({isPinned:!1}))),[u,k]);const I=!("token"!==(null==l?void 0:l.type)||null!=l&&l.annotations.some(h().nSN)||null!=l&&l.annotations.some(h().STW)),w=(0,n.useMemo)((()=>"token"===(null==l?void 0:l.type)&&(null==l?void 0:l.annotations.some(h().VOE))),[l]),C=(0,n.useMemo)((()=>(g&&"token"===(null==l?void 0:l.type)&&(null==l?void 0:l.annotations.some(h().IWo)))??!1),[g,l]),B=(0,n.useCallback)((()=>C?L().Alignment.End:w?L().Alignment.Center:L().Alignment.Start),[C,w]),R=(0,n.useCallback)((()=>C?L().Placement.Top:L().Placement.Bottom),[C]),U=(0,r().Kw)(t.RouterStore);return(0,n.useEffect)((()=>{p()}),[U,p]),(0,n.useEffect)((()=>{const e=v().P2((()=>{b().lY(),p()}),200,{leading:!0});return M().lj(window,"scroll",e,!0),()=>M().ZV(window,"scroll",e,!0)}),[p]),(0,pe.jsx)(Q().ZP,{disableMouseCapture:!0,preventCaptureEsc:!0,preventPointerEvents:j&&!f,preventScaleTransition:!0,preventOpacityTransition:!0,popupType:V().k.Popup,open:j,originRect:x,originGap:6,alignmentToOrigin:B(),placementToOrigin:R(),useLightBoxShadow:I,render:()=>l&&(0,pe.jsx)("div",{onMouseEnter:a,onMouseLeave:s,children:(0,pe.jsx)(Ke,{state:l,isHoveredTokenEditable:m,onDismiss:s,originRect:x})}),...w?{borderRadius:6}:{}})}function Ke(e){const t=(0,r().VK)((()=>(0,T().En)()),[]),i=(0,r().VK)((()=>H().default.state.currentSpaceStore),[]),n=(0,o().Fy)(),a=(0,l().yK)((e=>({noMembersInGroupStyle:{fontSize:j().JB.UISmall.desktop,color:e.mediumTextColor,padding:"4px 8px"}})),[]),s=(0,r().VK)((()=>(0,T().d3)()),[]),c="token"===e.state.type?e.state.annotations:void 0,d=null==c?void 0:c.find(h().j0F),u=null==c?void 0:c.find(h().fpG),p=null==c?void 0:c.find(h()._bk),g=s?null==c?void 0:c.find(h().vuC):void 0,f=null==c?void 0:c.find(h().aq),x=c?h().frE(c):void 0,v=null==c?void 0:c.find(h().STW),S=t?null==c?void 0:c.find(h().IWo):void 0,k=null==c?void 0:c.find(h().VOE),b=(0,r().VK)((()=>{if(!p)return;const e=h().kxk(p);if(!e)return;return i?(0,z().Q)({groupId:null==e?void 0:e.groupId,spaceStore:i}).getModel():void 0}),[i,p]);if("token"!==e.state.type)return null;if(d&&e.state.store.table!==m().x_)return(0,pe.jsx)(Re,{...e,state:{...e.state,annotation:d}});if(u)return(0,pe.jsx)(Ee,{...e,state:{...e.state,annotation:u}});if(p){if(h().kxk(p)&&b)return(0,pe.jsx)(re().Y,{group:b,limit:10,color:"white_background",trackHover:!0,noMembersMessage:(0,pe.jsx)(le().gq,{style:a.noMembersInGroupStyle,children:(0,pe.jsx)("div",{style:j().Yu,children:(0,pe.jsx)(y()._H,{id:"groupPreview.noUsers",defaultMessage:"No users in this group"})})})})}else if(g&&!n.isMobile)return(0,pe.jsx)(ge,{...e,state:{...e.state,annotation:g},onDismiss:e.onDismiss});return k?(0,pe.jsx)(He,{...e,state:{...e.state,annotation:k}}):f?(0,pe.jsx)(We,{...e,state:{...e.state,annotation:f}}):x&&!n.isMobile?(0,pe.jsx)(et,{...e,state:{...e.state,annotation:x},onDismiss:e.onDismiss}):v&&!n.isMobile?(0,pe.jsx)(nt,{...e,state:{...e.state,annotation:v},onDismiss:e.onDismiss}):S&&!n.isMobile?(0,pe.jsx)(Ze,{...e,state:{...e.state,annotation:S},onDismiss:e.onDismiss}):null}function He(e){const{store:t,annotation:i}=e.state,n=h().PtE(i),o=n&&N().t1.createChildStore(t,n),a=(0,r().VK)((()=>{if(null!=o&&o.isDefined())return null==o?void 0:o.getModel().getRenderTitle()}),[o]),s=(0,l().yK)((e=>({container:{backgroundColor:e.tooltipBackground,padding:"4px 8px",maxWidth:250,width:"max-content"},text:{color:e.mediumInvertedTextColor}})),[]);return o?(0,pe.jsx)("div",{style:s.container,children:(0,pe.jsx)(C().Z,{type:"custom",customEmojiStore:o,text:(0,pe.jsx)("span",{className:"notranslate",children:a}),deletedText:(0,pe.jsx)(y()._H,{defaultMessage:"{name} <medium>(deleted)</medium>",id:"HoverPreviewOverlay.customEmojiDeleted",values:{name:(0,pe.jsx)("span",{className:"notranslate",children:a}),medium:e=>(0,pe.jsx)("span",{style:s.text,children:e})}})})}):null}function Ee(e){const{annotation:t}=e.state,i=h().zyO(t),n=(0,l().yK)((e=>({container:{fontSize:j().JB.UISmall.desktop,color:e.mediumTextColor,padding:"4px 8px"},icon:{height:"1em",width:"1em",marginRight:"0.25em",fill:e.mediumIconColor}})),[]),o=(0,y().YB)(),r="relative"===i.date_format?"ll":"relative",s=(0,a().ZV)({value:i,date_format:r,time_format:"h:mm A",allowRelativeDates:!0,intl:o});return s===(0,a().ZV)({value:i,date_format:i.date_format,time_format:i.time_format,allowRelativeDates:!0,intl:o})?null:(0,pe.jsxs)(le().gq,{style:n.container,alignItems:"center",children:[(0,O().C)(n.icon),(0,pe.jsx)("div",{style:j().Yu,children:s})]})}function We(e){const{annotation:t}=e.state,i=h().fsE(t),n=(0,y().YB)(),o=(0,f().Z0)(i.type,n),r=(0,l().yK)((e=>({container:{fontSize:j().JB.UISmall.desktop,color:e.mediumTextColor,padding:"4px 8px"}})),[]);return(0,pe.jsx)(le().gq,{style:r.container,alignItems:"center",children:(0,pe.jsx)("div",{style:j().Yu,children:o})})}function Fe(e){var t;const{renderConfig:i,store:n}=e,o=(0,l().yK)((e=>({title:{color:e.regularTextColor,fontWeight:j().Ue.semibold,whiteSpace:"initial",fontSize:13,padding:"4px 0",width:"100%"},header:{color:e.mediumTextColor,fontSize:j().JB.UISmall.desktop},dictionaryKey:{color:e.lightTextColor,fontWeight:j().Ue.regular,fontSize:j().JB.UISmall.desktop},dictionaryValue:{color:e.mediumTextColor,fontSize:j().JB.UISmall.desktop,whiteSpace:"normal",wordBreak:"break-word"}})),[]);return(0,pe.jsxs)(pe.Fragment,{children:[i.title&&(0,pe.jsx)(le().gq,{children:(0,pe.jsx)(U().ox,{...i.title,store:n,style:o.title})}),i.headerAttributes&&i.headerAttributes.length>0&&(0,pe.jsx)(le().gq,{alignItems:"center",style:{...o.header,marginBottom:8},children:(0,p().Z)(i.headerAttributes.map(((e,t)=>(0,pe.jsx)(U().ox,{...e,store:n,style:{...o.header,...j().Yu}},`attribute-${t}`)))||[],(e=>(0,pe.jsxs)("span",{children:[" ","·"," "]},`dot-${e}`)))}),i.dictionaryAttributes&&i.dictionaryAttributes.length>0&&(0,pe.jsx)(le().Ht,{children:i.dictionaryAttributes.map(((e,t)=>{var r;let{key:l,value:a}=e;return(0,pe.jsxs)(le().gq,{style:{marginBottom:t!==((null===(r=i.dictionaryAttributes)||void 0===r?void 0:r.length)??0)-1?4:8},children:[(0,pe.jsx)("div",{style:{marginRight:8,width:"30%",display:"flex",alignItems:"center"},children:(0,pe.jsx)("span",{style:o.dictionaryKey,children:(0,pe.jsx)(y()._H,{...l.formatter,values:{value:a.attribute.name}})})}),(0,pe.jsxs)("div",{style:{width:"70%",display:"flex",alignItems:"center"},children:[a.icon&&(0,x().li)(a.icon)&&(0,pe.jsx)($().Z,{type:"image_url",imageURL:a.icon.values[0],size:16,style:{marginRight:6}}),(0,pe.jsx)(U().ox,{...a,store:n,style:o.dictionaryValue,avatarStyle:{marginRight:6}})]})]},t)}))}),i.bodyAttribute&&!(0,x().O0)(i.bodyAttribute)&&(0,pe.jsx)(le().gq,{style:((null===(t=i.dictionaryAttributes)||void 0===t?void 0:t.length)??0)>0?{marginTop:3}:{},children:(0,pe.jsx)(U().hx,{attribute:i.bodyAttribute,store:n})}),i.previewImageAttribute&&(0,pe.jsx)("div",{style:{marginTop:i.dictionaryAttributes?6:0,marginBottom:4,display:"flex",justifyContent:"center"},children:(0,pe.jsx)("div",{children:(0,pe.jsx)(X().ZP,{src:i.previewImageAttribute.values[0],style:{width:"100%",maxHeight:200}})})})]})}function qe(e,t){if(!e)return null;const i=e.find((e=>e.key.formatter.id===t));return i?i.value:null}function Ne(e,t){if(!e)return null;return e.filter((e=>e.attribute&&t.includes(e.attribute.id)))}function Ge(e,t){if(!e)return null;const i=e.find((e=>e.value.attribute.id===t));return i?i.value:null}function Je(e){var t;const{renderConfig:i,store:n,integration:o,haveInstanceAction:r,containerDivRef:a,token:s,parentBlockStore:c,onDismiss:d}=e,u=(0,l().yK)((e=>({title:{color:e.regularTextColor,fontWeight:j().Ue.medium,whiteSpace:"initial",fontSize:14,padding:"4px 0",width:"100%"},header:{color:e.mediumTextColor,fontSize:j().JB.UISmall.desktop,paddingLeft:8,flexGrow:1,fontWeight:j().Ue.regular},dictionaryKey:{color:e.lightTextColor,fontWeight:j().Ue.regular,fontSize:j().JB.UISmall.desktop},dictionaryValue:{color:e.regularTextColor,fontSize:j().JB.UISmall.desktop,whiteSpace:"normal",wordBreak:"break-word"},buttonOrigin:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:4,fill:e.lightIconColor},innerBox:{width:"fit-content",display:"flex",alignItems:"center",gap:4}})),[]),p=null===(t=qe(i.dictionaryAttributes,"unfurling.github.pullRequest"))||void 0===t?void 0:t.attribute.values[0],g=qe(i.dictionaryAttributes,"unfurling.generic.status"),m=qe(i.dictionaryAttributes,"unfurling.generic.author"),h=function(e,t){if(!e)return null;return e.find((e=>e.formatter&&t.includes(e.formatter.id)))||null}(i.headerAttributes,["unfurling.github.githubPullMerged","unfurling.github.githubPullClosed","unfurling.github.githubPullOpened"]);return(0,pe.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:295},children:[(0,pe.jsxs)(le().gq,{alignItems:"center",style:{fontSize:12},children:[(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)($().Z,{type:"image_url",imageURL:o.icon,size:16,style:{marginRight:4}}),(0,pe.jsx)("div",{style:{fontWeight:j().Ue.medium},children:"GitHub"})]}),p&&(0,pe.jsx)("div",{style:u.header,children:(0,pe.jsx)(y()._H,{id:"unfurling.github.pullRequestNo",defaultMessage:"PR {prNumber}",values:{prNumber:p}})}),!r&&(0,pe.jsx)("div",{style:{position:"relative"},children:(0,pe.jsx)(Y().ZP,{popupType:Y().Z4.Popup,placementToOrigin:L().Placement.Right,alignmentToOrigin:L().Alignment.Start,originGap:4,onClose:()=>{let e=!1;const t=a.current;t&&(e=(0,K().uh)(t.getBoundingClientRect(),I().IL.x,I().IL.y)),e||null==d||d()},renderOrigin:e=>(0,pe.jsx)(J().Z,{style:u.buttonOrigin,...e,children:(0,D().o)({width:14})}),render:e=>(0,pe.jsx)(oe().ExternalObjectInstanceBlockMenu,{titleForReloadMenuOption:(0,pe.jsx)(y()._H,{id:"linkMention.reload",defaultMessage:"Reload mention"}),parentBlockStore:c,store:n,token:s,onAccept:()=>e.close(),extraSecondaryItemKey:"mention_to_preview"})})})]}),i.title&&(0,pe.jsx)(le().gq,{children:(0,pe.jsx)(U().ox,{...i.title,store:n,style:u.title})}),(0,pe.jsxs)(le().gq,{style:{gap:4,alignSelf:"stretch",alignItems:"center"},children:[g&&(0,pe.jsxs)("div",{style:{width:"fit-content",display:"flex",alignItems:"center"},children:[g.icon&&(0,x().li)(g.icon)&&(0,pe.jsx)($().Z,{type:"image_url",imageURL:g.icon.values[0],size:14}),(0,pe.jsx)(U().ox,{...g,store:n,style:u.dictionaryValue,avatarStyle:{marginRight:6}})]}),(0,pe.jsxs)("div",{style:{lineHeight:"16px",display:"flex",gap:4},children:[h&&(0,pe.jsx)("div",{style:u.innerBox,children:(0,pe.jsx)(U().ox,{attribute:h.attribute,store:n,style:u.dictionaryValue})}),m&&(0,pe.jsxs)("div",{style:u.innerBox,children:[(0,pe.jsx)("div",{style:u.dictionaryValue,children:(0,pe.jsx)(y()._H,{id:"unfurling.generic.by",defaultMessage:"by"})}),m.icon&&(0,x().li)(m.icon)&&(0,pe.jsx)($().Z,{type:"image_url",imageURL:m.icon.values[0],size:16,style:{marginLeft:4}}),(0,pe.jsx)(U().ox,{...m,store:n,style:u.dictionaryValue})]})]})]})]})}function Ye(e){const{renderConfig:t,store:i,integration:n,haveInstanceAction:o,containerDivRef:r,token:a,parentBlockStore:s,onDismiss:c}=e,d=(0,l().yK)((e=>({title:{color:e.regularTextColor,fontWeight:j().Ue.medium,whiteSpace:"initial",fontSize:14,padding:"4px 0",width:"100%"},header:{color:e.mediumTextColor,fontSize:j().JB.UISmall.desktop,paddingLeft:8,flexGrow:1,fontWeight:j().Ue.regular},dictionaryKey:{color:e.lightTextColor,fontWeight:j().Ue.regular,fontSize:j().JB.UISmall.desktop},dictionaryValue:{color:e.regularTextColor,fontSize:j().JB.UISmall.desktop,whiteSpace:"normal",wordBreak:"break-word"},buttonOrigin:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:4,fill:e.lightIconColor},actionButton:{position:"absolute",top:10,right:10,zIndex:2}})),[]),u=qe(t.dictionaryAttributes,"unfurling.generic.lastModifiedBy"),p=qe(t.dictionaryAttributes,"unfurling.generic.lastModifiedAt");return(0,pe.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:295},children:[(0,pe.jsx)(le().gq,{alignItems:"center",style:{fontSize:12},children:(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)($().Z,{type:"image_url",imageURL:n.icon,size:16,style:{marginRight:4}}),(0,pe.jsx)("div",{style:{fontWeight:j().Ue.medium},children:"Figma"})]})}),(0,pe.jsxs)(le().gq,{style:{gap:4,alignSelf:"stretch",alignItems:"center"},children:[p&&(0,pe.jsxs)("div",{style:{width:"fit-content",display:"flex",alignItems:"center",gap:4},children:[(0,pe.jsx)("div",{style:d.dictionaryValue,children:(0,pe.jsx)(y()._H,{id:"unfurling.generic.editor",defaultMessage:"Edited"})}),(0,pe.jsx)(U().ox,{...p,store:i,style:d.dictionaryValue})]}),u&&(0,pe.jsxs)("div",{style:{width:"fit-content",display:"flex",alignItems:"center",gap:4},children:[(0,pe.jsx)("div",{style:d.dictionaryValue,children:(0,pe.jsx)(y()._H,{id:"unfurling.generic.from",defaultMessage:"by"})}),u.icon&&(0,x().li)(u.icon)&&(0,pe.jsx)($().Z,{type:"image_url",imageURL:u.icon.values[0],size:16,style:{marginLeft:4}}),(0,pe.jsx)(U().ox,{...u,store:i,style:d.dictionaryValue})]})]}),t.previewImageAttribute&&(0,pe.jsx)("div",{style:{marginTop:t.dictionaryAttributes?6:0,marginBottom:4,display:"flex",justifyContent:"center"},children:(0,pe.jsx)("div",{children:(0,pe.jsx)(X().ZP,{src:t.previewImageAttribute.values[0],style:{width:"100%",maxHeight:200}})})}),!o&&(0,pe.jsx)("div",{style:d.actionButton,children:(0,pe.jsx)(Y().ZP,{popupType:Y().Z4.Popup,placementToOrigin:L().Placement.Right,alignmentToOrigin:L().Alignment.Start,originGap:4,onClose:()=>{let e=!1;const t=r.current;t&&(e=(0,K().uh)(t.getBoundingClientRect(),I().IL.x,I().IL.y)),e||null==c||c()},renderOrigin:e=>(0,pe.jsx)(J().Z,{style:d.buttonOrigin,...e,children:(0,D().o)({width:14})}),render:e=>(0,pe.jsx)(oe().ExternalObjectInstanceBlockMenu,{titleForReloadMenuOption:(0,pe.jsx)(y()._H,{id:"linkMention.reload",defaultMessage:"Reload mention"}),parentBlockStore:s,store:i,token:a,onAccept:()=>e.close(),extraSecondaryItemKey:"mention_to_preview"})})})]})}function $e(e){var t;const{renderConfig:i,store:n,integration:o,haveInstanceAction:r,containerDivRef:a,token:s,parentBlockStore:c,onDismiss:d}=e,u=(0,l().yK)((e=>({title:{color:e.regularTextColor,fontWeight:j().Ue.medium,whiteSpace:"initial",fontSize:14,padding:"4px 0",width:"100%"},header:{color:e.mediumTextColor,fontSize:j().JB.UISmall.desktop,paddingLeft:8,flexGrow:1,fontWeight:j().Ue.regular},dictionaryKey:{color:e.lightTextColor,fontWeight:j().Ue.regular,fontSize:j().JB.UISmall.desktop},dictionaryValue:{color:e.regularTextColor,fontSize:j().JB.UISmall.desktop,whiteSpace:"normal",wordBreak:"break-word"},channelValue:{color:e.mediumTextColor,fontSize:j().JB.UISmall.desktop,whiteSpace:"normal",wordBreak:"break-word"},buttonOrigin:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:4,fill:e.lightIconColor},author:{paddingTop:8,alignSelf:"stretch",alignItems:"center"},replyIcons:{},actionButton:{position:"absolute",top:10,right:10,zIndex:2}})),[]),p=qe(i.dictionaryAttributes,"unfurling.generic.author"),g=function(e,t){if(!e)return null;return e.find((e=>e.key.formatter.id===t))||null}(i.dictionaryAttributes,"unfurling.slack.slackReplyCount"),m=Ne(i.headerAttributes,["title","name"]),h=Ne(i.headerAttributes,["sent_at"]),f=v().mN(i.icons||[],(e=>`${e.type}:${e.values[0].toString()}`)),S=f.length>5?5:f.length;return(0,pe.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:295},children:[(0,pe.jsxs)(le().gq,{alignItems:"center",style:{fontSize:12},children:[(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)($().Z,{type:"image_url",imageURL:o.icon,size:16,style:{padding:2}}),(0,pe.jsx)("div",{style:{fontWeight:j().Ue.medium,marginRight:8},children:"Slack"})]}),m&&m.length>0&&(0,pe.jsx)(U().ox,{attribute:m[0].attribute,store:n,style:u.channelValue,avatarStyle:{marginRight:6}})]}),(0,pe.jsxs)(le().gq,{style:u.author,children:[p&&(0,pe.jsx)("div",{style:{width:"fit-content",display:"flex",alignItems:"center"},children:(0,pe.jsx)(U().ox,{...p,store:n,style:u.dictionaryValue})}),h&&(0,pe.jsx)("div",{style:{marginLeft:8},children:(0,pe.jsx)(U().ox,{...h[0],store:n,style:u.channelValue})})]}),(0,pe.jsxs)(le().Ht,{style:{gap:8},children:[i.bodyAttribute&&!(0,x().O0)(i.bodyAttribute)&&(0,pe.jsx)(le().gq,{style:((null===(t=i.dictionaryAttributes)||void 0===t?void 0:t.length)??0)>0?{marginTop:3}:{},children:(0,pe.jsx)(U().hx,{attribute:i.bodyAttribute,store:n})}),(0,pe.jsxs)(le().gq,{style:{alignSelf:"stretch",alignItems:"center"},children:[i.icons&&g&&(0,pe.jsx)(Qe,{renderConfig:i}),g&&(0,pe.jsx)(U().ox,{formatter:g.key.formatter,attribute:g.value.attribute,store:n,style:{...u.channelValue,transform:`translateX(-${3*(S-1)}px)`},avatarStyle:{marginRight:6}})]})]}),!r&&(0,pe.jsx)("div",{style:u.actionButton,children:(0,pe.jsx)(Y().ZP,{popupType:Y().Z4.Popup,placementToOrigin:L().Placement.Right,alignmentToOrigin:L().Alignment.Start,originGap:4,onClose:()=>{let e=!1;const t=a.current;t&&(e=(0,K().uh)(t.getBoundingClientRect(),I().IL.x,I().IL.y)),e||null==d||d()},renderOrigin:e=>(0,pe.jsx)(J().Z,{style:u.buttonOrigin,...e,children:(0,D().o)({width:14})}),render:e=>(0,pe.jsx)(oe().ExternalObjectInstanceBlockMenu,{titleForReloadMenuOption:(0,pe.jsx)(y()._H,{id:"linkMention.reload",defaultMessage:"Reload mention"}),parentBlockStore:c,store:n,token:s,onAccept:()=>e.close(),extraSecondaryItemKey:"mention_to_preview"})})})]})}function Xe(e){const{renderConfig:t,store:i,integration:n,haveInstanceAction:o,containerDivRef:r,token:a,parentBlockStore:s,onDismiss:c,fileType:d}=e,u=(0,l().yK)((e=>({title:{color:e.regularTextColor,fontWeight:j().Ue.medium,whiteSpace:"initial",fontSize:14,padding:"4px 0",width:"100%"},header:{color:e.mediumTextColor,fontSize:j().JB.UISmall.desktop,paddingLeft:8,flexGrow:1,fontWeight:j().Ue.regular},dictionaryKey:{color:e.lightTextColor,fontWeight:j().Ue.regular,fontSize:j().JB.UISmall.desktop},dictionaryValue:{color:e.regularTextColor,fontSize:j().JB.UISmall.desktop,whiteSpace:"normal",wordBreak:"break-word"},buttonOrigin:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:4,fill:e.lightIconColor},actionButton:{position:"absolute",top:10,right:10,zIndex:2},imageBackground:{marginTop:t.dictionaryAttributes?6:0,marginBottom:4,display:"flex",justifyContent:"center",padding:"docs"===d?"14px 54px":"14px 34px",borderRadius:6,background:"doc"===d?"#4285F4":"sheet"===d?"#34A853":"#F8CB4A"}})),[d,t.dictionaryAttributes]),p=Ge(t.dictionaryAttributes,"username"),g=Ge(t.dictionaryAttributes,"updated_at"),m="doc"===d?"Google Docs":"sheet"===d?"Google Sheets":"Google Slides";return(0,pe.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:288},children:[(0,pe.jsx)(le().gq,{alignItems:"center",style:{fontSize:12},children:(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)($().Z,{type:"image_url",imageURL:n.icon,size:16,style:{marginRight:4}}),(0,pe.jsx)("div",{style:{fontWeight:j().Ue.medium},children:m})]})}),(0,pe.jsxs)(le().gq,{style:{gap:4,alignSelf:"stretch",alignItems:"center"},children:[g&&(0,pe.jsxs)("div",{style:{width:"fit-content",display:"flex",alignItems:"center",gap:4},children:[(0,pe.jsx)("div",{style:u.dictionaryValue,children:(0,pe.jsx)(y()._H,{id:"unfurling.generic.editor",defaultMessage:"Edited"})}),(0,pe.jsx)(U().ox,{...g,store:i,style:u.dictionaryValue})]}),p&&(0,pe.jsxs)("div",{style:{width:"fit-content",display:"flex",alignItems:"center",gap:4},children:[(0,pe.jsx)("div",{style:u.dictionaryValue,children:(0,pe.jsx)(y()._H,{id:"unfurling.generic.from",defaultMessage:"by"})}),(0,pe.jsx)(U().ox,{...p,store:i,style:u.dictionaryValue})]})]}),t.previewImageAttribute&&(0,pe.jsx)("div",{style:u.imageBackground,children:(0,pe.jsx)("div",{children:(0,pe.jsx)(X().ZP,{src:t.previewImageAttribute.values[0],style:{width:"100%",maxHeight:200}})})}),!o&&(0,pe.jsx)("div",{style:u.actionButton,children:(0,pe.jsx)(Y().ZP,{popupType:Y().Z4.Popup,placementToOrigin:L().Placement.Right,alignmentToOrigin:L().Alignment.Start,originGap:4,onClose:()=>{let e=!1;const t=r.current;t&&(e=(0,K().uh)(t.getBoundingClientRect(),I().IL.x,I().IL.y)),e||null==c||c()},renderOrigin:e=>(0,pe.jsx)(J().Z,{style:u.buttonOrigin,...e,children:(0,D().o)({width:14})}),render:e=>(0,pe.jsx)(oe().ExternalObjectInstanceBlockMenu,{titleForReloadMenuOption:(0,pe.jsx)(y()._H,{id:"linkMention.reload",defaultMessage:"Reload mention"}),parentBlockStore:s,store:i,token:a,onAccept:()=>e.close(),extraSecondaryItemKey:"mention_to_preview"})})})]})}function Qe(e){let{renderConfig:t}=e;const i=v().mN(t.icons||[],(e=>`${e.type}:${e.values[0].toString()}`));return i.length>=2?(0,pe.jsx)(le().gq,{style:{height:16,gap:-5.333,justifyContent:"flex-end"},children:i.slice(0,5).map(((e,t)=>(0,pe.jsx)(U().lf,{attribute:e,isSmall:!0,isUltraSmall:!0,style:{zIndex:10-t,transform:`translateX(${-5*t}px)`,position:"relative"}},t)))}):1===i.length?(0,pe.jsx)("div",{style:{paddingRight:4},children:(0,pe.jsx)(U().lf,{attribute:i[0],isSmall:!0,isUltraSmall:!0})}):null}function et(e){const{state:{annotation:t,store:i,token:a},onDismiss:d}=e,u=h().frW(t),p=(0,o().O7)(),m=(0,l().Fg)(),f=(0,n.useRef)(null),x=(0,r().VK)((()=>{const t=N().G.createChildStore(i,{table:g().iU,id:u,spaceId:i.pointer.spaceId}),n=t.canEdit(),o=(0,T().k1)(),r=(0,R()._F)({store:t,isInDarkMode:"dark"===m.mode,canEdit:n,currentUserId:p.currentUser.id,getRenderFn:e=>t=>{var i,n;return(null===(i=e.hover)||void 0===i?void 0:i.call(e,t))||(null===(n=s().j.hover)||void 0===n?void 0:n.call(s().j,t))},showAction:void 0});if(!r)return;const{renderConfig:l,integration:h}=r,x=Boolean(r.action),v=e.isHoveredTokenEditable,S=i.recordStoreUIParentStore&&i.recordStoreUIParentStore instanceof N().G?i.recordStoreUIParentStore:void 0;if(o){if(h.id===c().Gw||h.id===c().Xs)return(0,pe.jsx)(Je,{store:t,integration:h,renderConfig:l,haveInstanceAction:x,containerDivRef:f,token:a,parentBlockStore:S,onDismiss:d});if(h.id===c().mQ)return(0,pe.jsx)(Ye,{store:t,integration:h,renderConfig:l,haveInstanceAction:x,containerDivRef:f,token:a,parentBlockStore:S,onDismiss:d});if(h.id===c().nO)return(0,pe.jsx)($e,{store:t,integration:h,renderConfig:l,haveInstanceAction:x,containerDivRef:f,token:a,parentBlockStore:S,onDismiss:d});if(h.id===c().f3){const e=t.getFormat().uri;let i="drive";if(e&&(i=e.includes("spreadsheets")?"sheet":e.includes("document")?"doc":e.includes("presentation")?"slide":"drive"),"drive"!==i)return(0,pe.jsx)(Xe,{store:t,integration:h,renderConfig:l,haveInstanceAction:x,containerDivRef:f,token:a,parentBlockStore:S,onDismiss:d,fileType:i})}}return(0,pe.jsxs)("div",{style:{display:"flex",flexDirection:"column"},ref:f,children:[(0,pe.jsxs)(le().gq,{alignItems:"center",style:{fontSize:12},children:[(0,pe.jsx)($().Z,{type:"image_url",imageURL:h.icon,size:16,style:{margin:4}}),(0,pe.jsx)("div",{style:{flexGrow:1,fontWeight:j().Ue.medium},children:h.name}),a&&!x&&v&&(0,pe.jsx)("div",{children:(0,pe.jsx)(Y().ZP,{popupType:Y().Z4.Popup,placementToOrigin:L().Placement.Right,alignmentToOrigin:L().Alignment.Start,originGap:4,onClose:()=>{let e=!1;const t=f.current;t&&(e=(0,K().uh)(t.getBoundingClientRect(),I().IL.x,I().IL.y)),e||null==d||d()},renderOrigin:e=>(0,pe.jsx)(J().Z,{style:{display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:4,fill:m.lightIconColor},...e,children:(0,D().o)({width:14})}),render:e=>(0,pe.jsx)(oe().ExternalObjectInstanceBlockMenu,{titleForReloadMenuOption:(0,pe.jsx)(y()._H,{id:"linkMention.reload",defaultMessage:"Reload mention"}),parentBlockStore:S,store:t,token:a,onAccept:()=>e.close(),extraSecondaryItemKey:"mention_to_preview"})})})]}),x&&v?(0,pe.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",margin:"6px 0"},children:(0,pe.jsx)(ne().Z,{canEdit:n,store:t,isHoverPreview:!0,postActionCallback:d})}):(0,pe.jsx)(Fe,{renderConfig:l,store:t})]})}),[u,i,p,m,a,d,e.isHoveredTokenEditable,f]);return x?(0,pe.jsx)("div",{style:{padding:"12px 16px",minWidth:260,maxWidth:450},children:x}):null}function tt(){return(0,l().yK)((e=>({icon:{height:16,width:16,fill:e.icon.purplePrimary,marginRight:2},title:{fontSize:12,color:e.icon.purplePrimary},summary:{...(0,A().pd)(4),fontSize:12,lineHeight:1.35,color:e.text.secondary,marginBottom:12},contentCover:{color:e.text.primary,fontSize:11,lineHeight:1.5,marginBottom:0,width:"110%",transform:"translateX(-13px) translateY(-2px) scale(0.91)"},contentCoverEmpty:{height:16},imageCoverWrap:{marginBottom:16},contentCoverFade:{height:48,background:`linear-gradient(to bottom, transparent, ${e.surface.elevated} 100%)`},loadingShimmer:{marginBottom:0},rendererBlockStyle:{fontSize:9}})),[])}function it(e){const t=(0,o().O7)(),{store:i,startBlockId:l,size:a}=e,s=tt(),c=(0,r().VK)((()=>B().TP(i)),[i]),d=c&&h().Vkf(c)>=Le,p=(0,n.useMemo)((()=>u().Il()),[]),g=(0,r().VK)((()=>{var e;if("tall"===a)return 200;const t=i.getModel();return!t||!t.isCollectionView()||t.hasWikiBlockUri()||null!==(e=i.getAssociatedCollectionStore())&&void 0!==e&&e.isPageTreeCollection()?84:125}),[a,i]);return(0,n.useEffect)((()=>{const e=q().$g.getCurrentPageVisitId();return k().pi(t,{hover_session_id:p,mentioned_page_id:i.pointer.id,hover_content_type:d?"ai_summary":"content_preview",page_visit_id:e}),()=>{k().Yo(t,{hover_session_id:p,hover_content_type:d?"ai_summary":"content_preview",mentioned_page_id:i.pointer.id,page_visit_id:e})}}),[t,p,d,i.pointer.id]),d?(0,pe.jsx)("div",{children:(0,pe.jsx)("div",{style:s.summary,children:(0,pe.jsx)(G().A,{textValue:c,parentStore:i})})}):(0,pe.jsx)(w().S,{variant:"default",store:i,coverFormat:{type:"page_content"},coverContentFadedOverlay:!0,coverContentFadedOverlayStyle:s.contentCoverFade,coverHeight:g,startBlockId:l,contentWrapStyle:s.contentCover,imageCoverWrapStyle:s.imageCoverWrap,emptyGalleryCoverStyle:s.contentCoverEmpty,loadingShimmerStyle:s.loadingShimmer,showLoadingShimmer:!0,showEmptyGalleryCover:!0,onLoadProxiedImage:()=>{},rendererBlockStyle:s.rendererBlockStyle,renderAdditionalBlocks:!0})}function nt(e){const{store:t,contentBlockStart:i}=(0,r().VK)((()=>{const t=H().default.state.currentSpaceStore;if(!t)return{store:void 0,contentBlockStart:void 0};const i=N().G.createChildStore(t,{id:e.state.annotation[1],table:"block"});if(!i.isNavigableBlock()){return{store:i.getNavigableBlockStore(),contentBlockStart:i}}return i.isDefined()?{store:i}:{store:void 0,contentBlockStart:void 0}}),[e.state.annotation]),n=(0,P().FS)(t);return t&&n&&e.originRect?(0,pe.jsx)(ze,{store:t,closestNonAliveAncestorStore:n,originRect:e.originRect}):(0,pe.jsx)(at,{store:t,contentBlocks:i&&[i]})}const ot=260,rt=24;function lt(){return(0,l().yK)((e=>({wrapper:{width:ot},coverContainer:{height:36,zIndex:1},content:{padding:"0 16px"},breadcrumb:{color:e.text.tertiary,fontSize:11,marginBottom:-2},pageTitle:{display:"inline",fontWeight:j().Ue.semibold,color:e.text.primary,fontSize:13,lineHeight:1.15},pageTitleIcon:{zIndex:2,position:"relative",marginLeft:16,marginTop:-15,marginBottom:8},pageTitleContainer:{...(0,A().pd)(2),verticalAlign:"top",lineHeight:1.15},description:{fontSize:j().JB.UISmall.desktop,color:e.icon.primary,lineHeight:1.2},empty:{height:16},highlightedBlockWrapper:{display:"flex",marginBottom:8}})),[])}function at(e){const{store:t,contentBlocks:i,events:n,size:o="regular"}=e,l=lt(),{icon:a,isEmptyPage:s,content:c}=(0,r().VK)((()=>{if(!t)return{icon:void 0,isEmptyPage:!1,content:null};const e=t.isEmptyPage(),n=e?(0,pe.jsx)("div",{style:{height:rt}}):i?i.map(((e,i)=>(0,pe.jsx)("div",{style:l.highlightedBlockWrapper,children:(0,pe.jsx)(it,{store:t,startBlockId:null==e?void 0:e.id,size:o})},`${e.id}_${i}`))):(0,pe.jsx)(it,{store:t,size:o});return{icon:t.getIcon(),isEmptyPage:e,content:n}}),[t,i,l.highlightedBlockWrapper,o]);return t?(0,pe.jsxs)("div",{style:l.wrapper,...n,children:[(0,pe.jsx)("div",{style:l.coverContainer,children:(0,pe.jsx)(ae().Z,{store:t,disabled:!0,paddingLeft:0,paddingRight:0,height:36,proxyWidth:260})}),(0,pe.jsx)(ee().Z,{disabled:!0,icon:a,isEmptyPage:s,isLarge:!0,disableShrinking:!0,size:26,emojiSize:26,largeIcon:!0,style:l.pageTitleIcon}),(0,pe.jsxs)(le().Ht,{gap:4,style:l.content,children:[(0,pe.jsxs)(le().Ht,{gap:2,children:[(0,pe.jsx)(te().ZP,{store:t,style:l.breadcrumb}),(0,pe.jsx)("div",{style:l.pageTitleContainer,children:(0,pe.jsx)(ie().Z,{shouldWrap:!0,maxLines:2,store:t,style:l.pageTitle})})]}),c]})]}):null}},54782:(e,t,i)=>{i.d(t,{Z:()=>v});i(670560),i(667294);var n=()=>i(219727),o=()=>i(156642),r=()=>i(955620),l=()=>i(788860),a=()=>i(551771),s=()=>i(959137),c=()=>i(636340),d=()=>i(269299),u=()=>i(352230),p=()=>i(325107),g=()=>i(424097),m=()=>i(855238),h=()=>i(198829),f=()=>i(255577),x=()=>i(388284),y=i(785893);function v(e){const{store:t,parentBlockStore:i,onAccept:v,token:S,href:j,hoverData:k}=e,b=(0,n().O7)(),I=[];return I.push({key:0,render:e=>(0,y.jsx)(x().Z,{...e,style:{paddingTop:0,paddingBottom:0}}),items:[{key:"copy link",render:e=>(0,y.jsx)(m().Z,{...e,title:(0,y.jsx)(l()._H,{id:"linkMention.copyLink",defaultMessage:"Copy Link"}),svg:p().U}),action:async()=>{if(!t)return;if(!S)return;const e=await s().F.clipboardActions.load(),i=e.clipboardMessages.copiedLinkToClipboard,n=j;e.copyString({environment:b,stringValue:n,copiedMessage:i})}}]}),I.push({key:1,render:e=>(0,y.jsx)(x().Z,{...e,style:{paddingTop:0,paddingBottom:0}}),items:[{key:"convert to bookmark",render:e=>(0,y.jsx)(m().Z,{...e,title:(0,y.jsx)(l()._H,{id:"linkMention.convertToBookmark",defaultMessage:"Turn into preview"}),svg:g().z}),action:()=>{t&&S&&d().createAndCommit({userAction:"LinkMentionMenu.convertToBookmark",environment:b,canUndo:!0,perform:e=>{if(k){const n=c().j4({environment:b,type:o().Ti.bookmark,inMemoryRecordCache:t.inMemoryRecordCache,properties:{title:k&&k.title?r().TPx(k.title):r().TPx(j),link:r().TPx(j),description:k&&k.description?r().TPx(k.description):void 0},format:{bookmark_cover:k.thumbnail_url,bookmark_icon:k.favicon_url?k.favicon_url:k.icon_url},transaction:e,spaceId:t.pointer.spaceId});a().e1({environment:b,parentBlockStore:i,blockStore:n,token:S,transaction:e})}else{const n=c().j4({environment:b,type:o().Ti.bookmark,inMemoryRecordCache:t.inMemoryRecordCache,properties:{title:r().TPx(j),link:r().TPx(j)},transaction:e,spaceId:t.pointer.spaceId});a().e1({environment:b,parentBlockStore:i,blockStore:n,token:S,transaction:e})}}})}}]}),(0,y.jsx)(h().Z,{menuType:u().o.Popup,children:(0,y.jsx)(f().Z,{type:f().i.Vertical,initialFocus:void 0,onAccept:v,sections:I,style:{paddingTop:3,paddingBottom:3}})})}},80164:(e,t,i)=>{i.d(t,{Z:()=>D});i(670560),i(267602),i(653476),i(30005),i(241792);var n=i(667294),o=()=>i(219727),r=()=>i(142735),l=()=>i(846550),a=()=>i(109477),s=()=>i(305580),c=()=>i(396136),d=()=>i(989478),u=()=>i(788860),p=()=>i(513670),g=()=>i(342792),m=()=>i(707513),h=()=>i(125659),f=()=>i(338217),x=()=>i(155350),y=()=>i(876822),v=()=>i(972776),S=()=>i(804217),j=()=>i(749826),k=()=>i(121700),b=()=>i(826955),I=()=>i(615389),w=()=>i(18281),C=()=>i(897257),B=()=>i(768826),T=()=>i(356321),M=()=>i(981583),R=()=>i(251932),U=()=>i(722917),_=()=>i(527278),A=i(785893);i(226413).Ae;function P(e){return(0,r().VK)((()=>{if(!e)return{collectionStore:void 0,schema:void 0,format:void 0};const t=e.getAssociatedCollectionStore();let i,n;return i=t?t.getSchema():(0,U().Kc)(_().Z.getIntl()),t&&(n=(0,s().i)(t.getFormat(),i,void 0,a().j5.Collection)),{collectionStore:t,schema:i,format:n}}),[e])}const z=["Title","Pronoun","Teams","Office","Manager","Languages (Fluency)","Tenure"],O={"Languages (Fluency)":"Languages"};function D(e){let{targetUserStore:t}=e;const i=(0,l().yK)((e=>({wrapper:{minWidth:100,maxWidth:300},profile:{padding:"10px 12px 12px 10px"},content:{padding:"8px 10px 10px"},breadcrumb:{color:e.text.secondary},profileTitle:{paddingLeft:20,fontSize:18,lineHeight:1.25,fontWeight:m().Ue.semibold,color:e.text.primary},profileSubtitle:{paddingLeft:20,paddingTop:2,fontSize:m().JB.UISmall.desktop,color:e.icon.primary,paddingBottom:1},profileMeetingContainer:{display:"flex",alignItems:"center",paddingLeft:20,paddingTop:2,cursor:"pointer"},profileMeetingLeftIcon:{},profileMeetingText:{paddingLeft:4,paddingRight:4,fontSize:m().JB.UISmall.desktop,lineHeight:1.25,color:e.text.primary},profileMeetingRightIcon:{},profileKeyRow:{minWidth:80},profileKeyText:{textTransform:"capitalize",fontWeight:500},description:{padding:"6px 8px 12px 20px",fontSize:m().JB.UISmall.desktop,color:e.icon.primary,borderTop:`1px solid ${e.regularDividerColor}`}})),[]),d=(0,r().VK)((()=>y().default.state.currentSpaceStore),[]),u=(0,r().VK)((()=>y().default.state.currentUserStore),[]),f=(0,r().VK)((()=>!!t&&t.isDefined()),[t]),x=(0,r().VK)((()=>{const e=t.getEmail();if(!e)return;const i=j().default.getConfigKey("notion_people_block_id","data")[e];if(!i)return;return b().G.createChildStore(t,{table:c().iU,id:(0,g().Mt)(i)})}),[t]),{collectionStore:S,schema:I,format:w}=P(x),C=function(e){let{collectionStore:t,format:i,schema:n,userPeopleCollectionPageStore:o}=e;return(0,r().VK)((()=>{var e;if(!(t&&i&&n&&o))return;const r=null===(e=(0,s().i)(i,n,void 0,a().j5.Collection).collection_page_properties)||void 0===e?void 0:e.filter((e=>{var t;const i=null===(t=n[e.property])||void 0===t?void 0:t.name;return void 0!==i&&z.includes(i)}));if(!r)return;const l={};return r.forEach((e=>{var i;l[(null===(i=n[e.property])||void 0===i?void 0:i.name)||""]=(0,A.jsx)(B().m,{store:o,property:e.property,locked:!0,disabled:!0,format:T().C.Page,onTab:p().ZT,onUntab:p().ZT,tableWrap:!1,blockPropertyValueOverlayStore:k().Z,collectionStore:t})})),l}),[t,n,i,o])}({collectionStore:S,format:w,schema:I,userPeopleCollectionPageStore:x}),M=(0,o().O7)(),U=(0,n.useMemo)((()=>new(v().Z)(M)),[M]);(0,n.useEffect)((()=>{S&&U.setContext({type:"collectionPage",collectionStore:S})}),[U,S]);const _=(0,r().VK)((()=>!!(t&&u&&f)&&t.id===u.id),[t,u,f]);return t&&f&&d?x&&U&&C?(0,A.jsx)("div",{style:i.wrapper,children:(0,A.jsx)(h().L1,{value:U,children:(0,A.jsxs)(R().Ht,{children:[(0,A.jsx)(R().gq,{gap:3,alignItems:"center",style:i.profile,children:(0,A.jsx)(Z,{userStore:t,styles:i})}),(0,A.jsxs)("div",{style:i.description,children:[(0,A.jsx)(L,{userProfile:C,styles:i}),_?(0,A.jsx)(R().gq,{gap:1,alignItems:"center",children:(0,A.jsx)(V,{spaceStore:d,limit:5,styles:i})}):void 0]})]})})}):(0,A.jsx)("div",{style:i.wrapper,children:(0,A.jsxs)(R().Ht,{children:[(0,A.jsx)(R().gq,{gap:3,alignItems:"center",style:i.profile,children:(0,A.jsx)(Z,{userStore:t,styles:i})}),_?(0,A.jsx)("div",{style:i.description,children:(0,A.jsx)(R().gq,{gap:1,alignItems:"center",children:(0,A.jsx)(V,{spaceStore:d,limit:5,styles:i})})}):void 0]})}):null}function Z(e){let{userStore:t,styles:i}=e;const n=(0,u().YB)(),{name:o,email:l,firstName:a}=(0,r().VK)((()=>{var e;return{name:t.getFullName(n),email:t.getEmail(),firstName:null===(e=t.getFullName(n))||void 0===e?void 0:e.split(" ")[0]}}),[t,n]);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(M().Z,{userStore:t,size:70,borderStyle:"none"}),(0,A.jsxs)(R().Ht,{gap:1,children:[(0,A.jsx)("div",{style:i.profileTitle,children:o}),(0,A.jsx)("div",{style:i.profileSubtitle,children:l}),a?(0,A.jsxs)("div",{style:i.profileMeetingContainer,onClick:()=>{window.open(`https://calendar.notion.so/meet-with/${l}`,"_blank")},children:[(0,A.jsx)("div",{style:i.profileMeetingLeftIcon,children:(0,x().C)({width:12,height:12})}),(0,A.jsx)("div",{style:i.profileMeetingText,children:(0,A.jsx)(u()._H,{id:"people.profile.setMeeting",defaultMessage:"Meet with {name}",values:{name:a}})}),(0,A.jsx)("div",{style:i.profileMeetingRightIcon,children:(0,f().J)({width:12,height:12})})]}):void 0]})]})}function L(e){let{userProfile:t,styles:i}=e;return t?(0,A.jsx)(A.Fragment,{children:z.filter((e=>t[e])).map((e=>(0,A.jsxs)(R().gq,{gap:1,alignItems:"center",children:[(0,A.jsx)(R().Ht,{children:(0,A.jsx)(R().gq,{style:i.profileKeyRow,children:(0,A.jsx)("div",{style:i.profileKeyText,children:O[e]?O[e]:e})})}),(0,A.jsx)(R().Ht,{style:{transform:"scale(0.9)",transformOrigin:"center left"},children:t[e]})]},e)))}):null}function V(e){let{spaceStore:t,limit:i,styles:n}=e;const{userSimilarityList:o}=(0,r().VK)((()=>{const e=C().subscriptionDataStoreInstance.state,n=e?w().CM(e):[],o=I().O.state||{},r=n.map((e=>{const t=o[e.userId];return{id:e.userId,similarity:t||0}})).sort(((e,t)=>t.similarity-e.similarity)).slice(0,i),l=[],a=p().yW(r.map((e=>{const i=b().U6.createChildStore(t,{table:d().KJ,id:e.id});return l.push({id:e.id,similarity:e.similarity,userStore:i}),i.isReady()})));return{isOnline:S().default.state.online,subscriptionDataStoreData:e,userSimilarityData:I().O.state||{},visibleUsersLoaded:a,visibleUsers:n,userSimilarityList:l}}),[t,i]);return t&&o&&0!==o.length?(0,A.jsxs)(R().gq,{gap:1,alignItems:"center",style:{paddingTop:4},children:[(0,A.jsx)(R().Ht,{children:(0,A.jsx)(R().gq,{style:n.profileKeyRow,children:(0,A.jsx)("div",{style:n.profileKeyText,children:"Coworkers"})})}),(0,A.jsx)(R().Ht,{children:(0,A.jsx)(R().gq,{gap:5,children:(0,A.jsx)("div",{children:(0,A.jsx)("div",{style:{display:"flex",position:"relative",float:"right"},children:o.map((e=>(0,A.jsx)("div",{style:{marginLeft:1.5},children:(0,A.jsx)(M().Z,{userStore:e.userStore,size:18})},e.id)))})})})})]}):null}},90452:(e,t,i)=>{i.d(t,{Z:()=>l});i(667294);var n=()=>i(219727),o=()=>i(846550),r=i(785893);function l(){(0,n().O7)(),(0,o().yK)((e=>({container:{margin:"8px 16px",background:e.accentColors.yellow[100],borderRadius:8,height:"fit-content"}})),[]);return(0,r.jsx)(r.Fragment,{})}},743790:(e,t,i)=>{i.d(t,{Y:()=>h});i(241792),i(667294);var n=()=>i(219727),o=()=>i(142735),r=()=>i(846550),l=()=>i(801812),a=()=>i(788860),s=()=>i(707513),c=()=>i(30238),d=()=>i(824462),u=()=>i(907099),p=()=>i(876822),g=()=>i(239444),m=i(785893);function h(e){const{group:t,limit:i,noMembersMessage:h,color:f,trackHover:x}=e,y=(0,r().yK)((e=>({container:{marginBottom:4,..."white_background"===f?{fontSize:s().JB.UISmall.desktop,color:e.mediumTextColor,padding:"4px 8px"}:{}},userContainer:{display:"flex",alignContent:"flex-end",minWidth:140,width:"100%",marginTop:4},user:{flexGrow:1},moreMessage:{marginLeft:2,marginTop:4,..."white_background"===f?{fontSize:s().JB.UISmall.desktop,color:e.mediumTextColor}:{color:e.mediumInvertedTextColor}}})),[f]),v=(0,o().VK)((()=>p().default.state.currentSpaceStore),[]),S=(0,n().O7)();(0,o().VK)((()=>{x&&c().iH(S,{group_id:t.group_id})}),[x,t,S]);const[{value:j}]=(0,l().r5)((async()=>{if(!v)return;const e=await d().callApi({eventName:"getSpacePermissionGroupMembers",environment:S,data:{groupIds:[t.group_id],spaceId:v.id}});if("success"===e.type){var n;const o=null===(n=e.data.groupUsersMap[t.group_id])||void 0===n?void 0:n.userIds;return(0,u().rm)({userIds:o,limit:i,spaceStore:v})}}),[v,S,t,i]);return 0===(null==j?void 0:j.limitedUserStores.length)?(0,m.jsx)(m.Fragment,{children:h}):(0,m.jsxs)("div",{style:y.container,children:[null==j?void 0:j.limitedUserStores.map((e=>(0,m.jsx)("div",{style:y.userContainer,children:(0,m.jsx)(g().Z,{style:y.user,userStore:e,avatarSize:18})},e.id))),j&&j.countRemainingUsers>0&&(0,m.jsx)("div",{style:y.moreMessage,children:(0,m.jsx)(a()._H,{id:"blockPermissionsSettings.groupPermissionUsers.tooltip",defaultMessage:"{countRemainingUsers} more…",values:{countRemainingUsers:j.countRemainingUsers}})})]})}},237427:(e,t,i)=>{i.d(t,{Z:()=>f});i(122556),i(582845),i(250570),i(533019),i(721473),i(788208),i(22624),i(267602),i(653476),i(241792),i(667294);var n=()=>i(219727),o=()=>i(142735),r=()=>i(816512),l=()=>i(989478),a=()=>i(499110),s=()=>i(788860),c=()=>i(828946),d=()=>i(826955),u=()=>i(864832),p=()=>i(793041),g=()=>i(114755),m=()=>i(523516),h=i(785893);const f=function(e){let{mode:t,title:o,userIds:r,onChange:l,disabled:a,focused:d,onMenuDismiss:u,onMenuOpen:p,parentStore:g}=e;const m=(0,n().O7)(),f=(0,s().YB)();return(0,h.jsx)(i(630029).Z,{mode:t,title:o,icon:i(421887).f,iconStyles:j(m).recordIcon,items:r,onChange:l,disabled:a,focused:d,renderFilter:(e,t)=>(0,h.jsx)(k,{item:e,args:t,parentStore:g}),renderToken:(e,t)=>(0,h.jsx)(v,{item:e,handlers:t,userIds:r,parentStore:g}),renderItemForSummary:e=>(0,h.jsx)(y,{item:e,parentStore:g}),addItemLabel:(0,h.jsx)(s()._H,{defaultMessage:"Add a person",id:"search.filterMenu.addAPersonButton.label"}),labelText:{title:o,tokenInputPlaceholder:f.formatMessage({defaultMessage:"Search people",id:"search.filterMenu.searchPeople.placeholder"}),componentDebugName:"SearchPersonFilter"},performRequest:e=>async function(e,t){let{query:i,current:n}=e;const o=new Set(n),r=await c().x.searchActions.load(),l=await r.searchVisibleSpaceUsers({environment:t,query:i,membersOnly:!1});return l.filter((e=>!o.has(e.id))).slice(0,20).map((e=>e.id))}(e,m),renderResultMenuItem:(e,t)=>(0,h.jsx)(S,{item:e,props:t,parentStore:g}),onMenuDismiss:u,onMenuOpen:p,hasItemsSelected:(null==r?void 0:r.length)>0})};function x(e,t){const i=function(e,t){return d().U6.createChildStore(t,{table:l().KJ,id:e})}(e,t);return i.getValue()}function y(e){let{item:t,parentStore:i}=e;const n=(0,s().YB)(),r=(0,o().VK)((()=>x(t,i)),[t,i]);return(0,h.jsx)(h.Fragment,{children:(0,a().Nz)(n,r)})}function v(e){let{item:t,handlers:i,userIds:l,parentStore:a}=e;const s=(0,n().O7)(),c=1===l.length,d=(0,o().VK)((()=>x(t,a)),[t,a]);return d?(0,h.jsx)(u().ZP,{format:s.device.isMobile?p().lP.Large:p().lP.Small,showRemoveButton:!0,isSingle:c,onClickRemove:i.onRemove,actor:(0,r().m3)(d),shouldShrink:!0,style:{background:"transparent"}},t):null}function S(e){let{item:t,props:i,parentStore:n}=e;const l=(0,o().VK)((()=>x(t,n)),[t,n]);return(0,h.jsx)(m().Z,{...i,actor:(0,r().m3)(l)})}function j(e){return{menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},menuItemTitle:{width:"100%"},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginRight:12},recordIcon:{marginRight:2,fill:"currentColor"}}}function k(e){let{item:t,args:i,parentStore:l}=e;const{disabled:a,onRemove:s,onClick:c}=i,d=j((0,n().O7)()),u=(0,o().VK)((()=>x(t,l)),[t,l]),p=(0,h.jsx)(g().Z,{disabled:a,onClick:s});return(0,h.jsx)(m().Z,{disabled:a,focused:!1,actor:(0,r().m3)(u),right:p,style:d.menuItem,desktopTitleStyle:d.menuItemTitle,onClick:c},t)}},103908:(e,t,i)=>{i.d(t,{Z:()=>o});i(667294);var n=i(785893);const o=function(e){const{type:t,emoji:o,customEmojiStore:r,text:l,deletedText:a}=e,s=(0,i(142735).VK)((()=>"custom"===t&&r.isDefined()&&r.getAlive()),[r,t]),c=(0,i(846550).yK)((e=>({container:{alignItems:"center"},label:{color:e.regularInvertedTextColor,fontWeight:i(707513).Ue.medium,textAlign:"center",overflowWrap:"anywhere"},emojiContainer:{background:"white",borderRadius:4,padding:4,display:"flex",lineHeight:1,marginTop:2}})),[]);return(0,n.jsxs)(i(251932).Ht,{gap:4,style:c.container,children:["custom"===t&&s?(0,n.jsx)("div",{style:c.emojiContainer,children:(0,n.jsx)(i(537876).Z,{emojiStore:r,size:40})}):"unicode"===t?(0,n.jsx)("div",{style:c.emojiContainer,children:(0,n.jsx)(i(754668).Z,{size:40,char:o})}):null,(0,n.jsx)(i(67961).Z,{isSmall:!0,isMultiline:!0,style:c.label,children:"unicode"===t||s?l:a})]})}},659234:(e,t,i)=>{i.d(t,{E:()=>s,N:()=>a});var n=()=>i(890324),o=()=>i(826955),r=()=>i(239482),l=()=>i(122479);function a(e,t){const i=t.getRecordStoreUIRoot(),a=i instanceof o().G&&i.isPageBlock()&&i.isNonEditableState(),s=(0,r().n3)(i)&&n().Z.getMode(e,i),c=Boolean((0,l().Ix)(s));return!t.canEdit()||c||a}function s(e,t){return!a(e,t)}},218181:(e,t,i)=>{i.d(t,{q:()=>l});var n=()=>i(142735),o=()=>i(530980),r=()=>i(396136);function l(e){let{blockStore:t,closestNonAliveAncestorStore:i,intl:l}=e;return(0,n().VK)((()=>{var e;let n,a,s;const c=i&&i.table===r().iU&&i.getMovedToTrashTime();c?(n=!0,s=c,a=i.getMovedToTrashStore()):(s=t.getLastEditedTime(),a=t.getLastEditedByStore(),n=!1);return{trashAuthorStore:a,trashAuthorDisplayName:(null===(e=a)||void 0===e?void 0:e.getDisplayName(l))||l.formatMessage(o().T_T.messages.anonymousPlaceholder),trashTimestamp:s,isMovedToTrashMetadata:n}}),[t,i,l])}},568741:(e,t,i)=>{i.d(t,{V:()=>o});i(667294);var n=i(785893);const o=(0,i(827282).IU)("handWave",{viewBox:"0 0 14 15",svg:(0,n.jsx)("path",{d:"M12.223 12.396c.888-.893 1.406-1.886 1.551-2.98.15-1.098-.08-2.288-.69-3.568l-1.552-3.275a2.264 2.264 0 00-.417-.594 1.28 1.28 0 00-.95-.404c-.36 0-.677.135-.95.404a1.211 1.211 0 00-.335.628c-.05.247-.023.502.082.766l.383.91c.013.031.011.056-.007.074-.023.019-.048.016-.075-.006L5.537.625C5.232.32 4.897.167 4.532.167c-.36-.005-.688.144-.984.444a1.115 1.115 0 00-.219.308 1.13 1.13 0 00-.096.349c-.291-.2-.59-.288-.895-.26-.3.023-.574.157-.82.403a1.278 1.278 0 00-.397.827c-.023.306.057.6.24.882a.876.876 0 00-.602.287c-.278.274-.415.584-.41.93.004.346.148.66.43.943l.458.458a.877.877 0 00-.348.09 1.115 1.115 0 00-.308.218 1.32 1.32 0 00-.37.615 1.29 1.29 0 00.021.684 1.6 1.6 0 00.397.635l4.231 4.232c.78.775 1.6 1.294 2.461 1.559.866.264 1.72.28 2.564.047.843-.232 1.622-.706 2.338-1.421zm-.841-.793c-.579.58-1.197.957-1.853 1.135-.651.178-1.317.15-1.996-.082-.674-.228-1.335-.663-1.982-1.305L1.497 7.297a.452.452 0 01-.143-.308.38.38 0 01.13-.3.403.403 0 01.3-.137c.119 0 .223.045.315.136l2.495 2.489a.45.45 0 00.355.15.476.476 0 00.342-.15.478.478 0 00.164-.349.461.461 0 00-.15-.362l-3.733-3.74a.446.446 0 01-.143-.3.38.38 0 01.13-.301.425.425 0 01.307-.137.45.45 0 01.315.137l3.48 3.486c.104.1.225.148.361.144a.476.476 0 00.342-.15c.1-.1.153-.22.157-.356a.47.47 0 00-.143-.362L2.283 2.799a.477.477 0 01-.143-.315.41.41 0 01.136-.307.39.39 0 01.301-.123c.119.004.223.05.315.136l4.04 4.034a.434.434 0 00.348.15.5.5 0 00.349-.15c.1-.1.153-.22.157-.356a.46.46 0 00-.137-.355L4.218 2.08a.425.425 0 01-.137-.308c0-.113.041-.216.123-.307a.41.41 0 01.308-.123c.114 0 .218.045.314.136L9.64 6.292c.136.141.282.212.437.212a.577.577 0 00.403-.178.71.71 0 00.192-.342c.032-.136.011-.298-.062-.485L9.748 3.25a.52.52 0 01-.014-.37.42.42 0 01.22-.232.362.362 0 01.32 0c.1.05.185.149.253.294l1.586 3.377c.52 1.121.702 2.108.547 2.96-.155.853-.58 1.627-1.278 2.325z"})})},632518:(e,t,i)=>{i.d(t,{I:()=>o});i(667294);var n=i(785893);const o=(0,i(827282).IU)("openTeamSearch",{viewBox:"0 0 16 14",svg:(0,n.jsx)("path",{d:"M9.506 13.342h4.447c.348 0 .621-.11.82-.328.2-.22.3-.516.3-.891V4.852c0-.375-.1-.67-.3-.885-.199-.219-.472-.328-.82-.328H9.922v1.136h3.709c.101 0 .178.026.228.077.051.05.076.127.076.228v6.815c0 .101-.025.177-.076.228-.05.05-.127.076-.228.076H9.506v1.143zm2.28-6.358h.925c.129 0 .193-.064.193-.193v-.896c0-.133-.064-.2-.193-.2h-.926c-.125 0-.187.067-.187.2v.896c0 .129.062.193.187.193zm0 2.168h.925c.129 0 .193-.066.193-.199v-.896c0-.133-.064-.2-.193-.2h-.926c-.125 0-.187.067-.187.2v.896c0 .133.062.2.187.2zm0 2.163h.925c.129 0 .193-.067.193-.2v-.896c0-.13-.064-.194-.193-.194h-.926c-.125 0-.187.065-.187.194v.896c0 .133.062.2.187.2zm-10.864.808c0 .375.1.672.299.89.199.22.474.329.826.329H9.44c.348 0 .621-.11.82-.328.204-.22.305-.516.305-.891V1.928c0-.38-.101-.676-.304-.89-.2-.22-.473-.329-.82-.329H2.046c-.352 0-.627.11-.826.328-.2.215-.3.512-.3.89v10.196zm1.142-.228V2.162c0-.105.026-.183.077-.234.05-.051.127-.076.228-.076h6.75c.102 0 .178.025.229.076.05.05.076.129.076.234v9.733c0 .101-.026.177-.076.228-.051.05-.127.076-.229.076H2.37c-.101 0-.178-.025-.228-.076-.051-.05-.077-.127-.077-.228zm1.588.85h.891v-1.946c0-.117.06-.176.182-.176h2.039c.12 0 .181.059.181.176v1.945h.89V10.5c0-.25-.058-.435-.175-.557-.117-.125-.295-.187-.533-.187H4.36c-.238 0-.416.062-.533.187-.117.122-.176.307-.176.557v2.244zm.17-8.362h1.12c.156 0 .234-.078.234-.235v-1.09c0-.156-.078-.234-.235-.234H3.822c-.148 0-.222.078-.222.235v1.09c0 .156.074.234.222.234zm2.719 0h1.12c.152 0 .228-.078.228-.235v-1.09c0-.156-.077-.234-.229-.234H6.541c-.152 0-.229.078-.229.235v1.09c0 .156.077.234.229.234zM3.822 6.627h1.12c.156 0 .234-.078.234-.234V5.309c0-.157-.078-.235-.235-.235H3.822c-.148 0-.222.078-.222.235v1.084c0 .156.074.234.222.234zm2.719 0h1.12c.152 0 .228-.078.228-.234V5.309c0-.157-.077-.235-.229-.235H6.541c-.152 0-.229.078-.229.235v1.084c0 .156.077.234.229.234zm-2.719 2.25h1.12c.156 0 .234-.08.234-.24V7.553c0-.157-.078-.235-.235-.235H3.822c-.148 0-.222.078-.222.235v1.084c0 .16.074.24.222.24zm2.719 0h1.12c.152 0 .228-.08.228-.24V7.553c0-.157-.077-.235-.229-.235H6.541c-.152 0-.229.078-.229.235v1.084c0 .16.077.24.229.24z"})})},672788:(e,t,i)=>{i.d(t,{_:()=>o});i(667294);var n=i(785893);const o=(0,i(827282).IU)("settingsUpgrade",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M9.969 17.938c4.36 0 7.969-3.618 7.969-7.97C17.938 5.61 14.32 2 9.96 2 5.609 2 2 5.61 2 9.969c0 4.351 3.617 7.969 7.969 7.969zm0-1.329a6.609 6.609 0 01-6.633-6.64 6.602 6.602 0 016.625-6.64 6.627 6.627 0 016.648 6.64 6.61 6.61 0 01-6.64 6.64zm0-2.734a.562.562 0 00.586-.586V9.383l-.063-1.656.797.945.922.937a.52.52 0 00.414.172c.32 0 .57-.242.57-.562a.566.566 0 00-.164-.406L10.43 6.219c-.149-.149-.29-.227-.461-.227-.164 0-.297.07-.453.227l-2.61 2.593a.555.555 0 00-.148.407c0 .32.242.562.562.562a.572.572 0 00.414-.172l.93-.937.781-.938-.062 1.649v3.906c0 .344.25.586.586.586z"})})},993989:(e,t,i)=>{i.d(t,{r:()=>o});i(667294);var n=i(785893);const o=(0,i(827282).IU)("settingsUpgradeFilled",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M10 19c4.935 0 9.009-4.073 9.009-9 0-4.926-4.082-9-9.018-9C5.065 1 1 5.074 1 10c0 4.927 4.074 9 9 9zm0-4.422c-.47 0-.818-.33-.818-.8v-4.23l.087-1.863-.81 1.01-1 1.053a.762.762 0 01-.558.235c-.435 0-.757-.314-.757-.74 0-.218.07-.392.218-.549l2.994-3.029c.2-.217.4-.313.644-.313.261 0 .461.104.662.313l2.976 3.03a.73.73 0 01.227.548c0 .426-.322.74-.758.74a.73.73 0 01-.557-.235l-.992-1.045-.818-1.027.087 1.871v4.23c0 .47-.348.801-.827.801z"})})},297444:(e,t,i)=>{i.d(t,{K9:()=>S,Uy:()=>v,nx:()=>g});i(670560),i(122556),i(582845),i(250570),i(533019),i(721473),i(788208),i(22624),i(267602),i(653476);var n=i(667294),o=()=>i(244222),r=()=>i(219727),l=()=>i(846550),a=()=>i(788860),s=()=>i(513670),c=()=>i(291198),d=i(785893);const u=["control+t","control+shift+n","control+shift+t","control+w","control+shift+w","control+r","control+shift+r","control+shift+i","control+\\","control+=","control+-","control+0","control+[","control+]","control+shift+tab","control+tab","control+1","control+2","control+3","control+4","control+5","control+6","control+7","control+8","control+9"],p=["command+,","command+t","command+shift+n","command+shift+t","command+w","command+shift+w","command+r","command+shift+r","alt+command+i","command+\\","command+=","command+-","command+0","command+[","command+]","control+shift+tab","control+tab","command+option+left","command+option+right","command+shift+[","command+shift+]","command+1","command+2","command+3","command+4","command+5","command+6","command+7","command+8","command+9"];function g(e){function t(){return e.shortcut?v(e.shortcut,e.isMac):void 0}const{isMac:i,isWindows:g}=(0,r().Fy)(),j=(0,r().O7)(),[k,b]=(0,n.useState)(t()),[I,w]=(0,n.useState)(new Set([])),[C,B]=(0,n.useState)(),[T,M]=(0,n.useState)(!1),R=(0,n.useRef)(!1),U=(0,n.useRef)(!1),_=(0,n.useRef)(!1),A=(0,l().yK)((e=>({container:{display:"flex",flexDirection:"column",gap:10,alignItems:"flex-end"},takenShortcutError:{color:e.accentColors.red[500],fontSize:12}})),[]);function P(){if(k&&_.current)if(k.key)if(i?k.control||k.option||k.command:k.control||k.option)if(function(e,t,i){for(const r of Object.values((0,o().x)(e.device)))for(const e of r)if(s().Xy(v(e,i),t))return!0;const n=i?p:u;for(const o of n)if(s().Xy(v(o,i),t))return!0;return!1}(j,k,i)||function(e,t,i){for(const n of t)if(s().Xy(v(n,i),e))return!0;return!1}(k,e.conflictingShortcuts||[],i)){b(t());const e=S(k,i);B((0,d.jsx)(a()._H,{id:"desktopQuickSearch.error.shortcutAlreadyUsed",defaultMessage:"{reservedShortcut} is already used",values:{reservedShortcut:e}}))}else{const t=function(e,t){const i=[];e.shift&&i.push("shift");e.control&&(t?i.push("control"):i.push("ctrl"));e.option&&(t?i.push("option"):i.push("alt"));e.command&&(t?i.push("command"):i.push("meta"));e.key&&i.push(e.key.toLowerCase());return i.join("+")}(k,i);e.onChange(t)}else b(t()),B(i?(0,d.jsx)(a()._H,{id:"desktopQuickSearch.error.macModifierRequired",defaultMessage:"Use one of Option, Control, or Command for global keyboard shortcuts"}):(0,d.jsx)(a()._H,{id:"desktopQuickSearch.error.windowsModifierRequired",defaultMessage:"Use one of Control or Alt for global keyboard shortcuts"}));else b(void 0);else _.current||b(t());R.current=!0,M(!1),_.current=!1}function z(e){if(g&&e.startsWith("Meta"))return;const t=new Set([...I,e]),i=function(e){const t={};for(const n of e)n.startsWith(h)?t.command=!0:n.startsWith(x)?t.option=!0:n.startsWith(f)?t.shift=!0:n.startsWith(y)?t.control=!0:n.startsWith("Key")?t.key=n.substring(3).toLowerCase():n.startsWith("Digit")?t.key=n.substring(5):m[n]&&(t.key=m[n]);const i=0===Object.values(t).filter((e=>!s().o8(e))).length;return i?void 0:t}(t);w(t),b(i),B(void 0),_.current=!0}return(0,d.jsxs)("div",{style:A.container,children:[(0,d.jsx)(c().Z,{onKeyDown:function(e){U.current=!0,"Escape"===e.key?e.currentTarget.blur():"Tab"!==e.key&&(e.preventDefault(),e.stopPropagation(),z(e.code))},onKeyUp:function(e){U.current&&function(e){const t=new Set([...I]);if(t.delete(e),e.startsWith("Meta"))for(const i of t)i.startsWith(f)||i.startsWith(x)||i.startsWith(y)||t.delete(i);w(t),0===t.size&&P()}(e.code)},onFocus:function(e){b(void 0),M(!0)},onBlur:function(e){R.current||P(),R.current=!1,U.current=!1,w(new Set),M(!1)},focus:T,readOnly:!0,inputStyle:{textAlign:"center",caretColor:"transparent"},value:k&&S(k,i)}),C&&(0,d.jsx)("div",{style:A.takenShortcutError,children:C})]})}const m={ArrowDown:"down",ArrowLeft:"left",ArrowRight:"right",ArrowUp:"up",Backquote:"`",Backslash:"\\",Backspace:"backspace",BracketLeft:"[",BracketRight:"]",Comma:",",Delete:"delete",Enter:"return",Equal:"=",Minus:"-",Period:".",Quote:"'",Semicolon:";",Slash:"/",Space:"space"},h="Meta",f="Shift",x="Alt",y="Control";function v(e,t){const i={};for(let n of e.split("+"))n=n.toLowerCase(),"command"===n||"meta"===n?i.command=!0:"option"===n||"alt"===n?i.option=!0:"shift"===n?i.shift=!0:"control"===n||"ctrl"===n?i.control=!0:"cmdorctrl"===n||"commandorcontrol"===n?t?i.command=!0:i.control=!0:i.key=n;return i}function S(e,t){const i=[];if(e.shift&&(t?i.push("shift"):i.push("Shift")),e.control&&(t?i.push("control"):i.push("Ctrl")),e.option&&(t?i.push("option"):i.push("Alt")),e.command&&(t?i.push("⌘"):i.push("Win")),e.key){const t=1===e.key.length?e.key.toUpperCase():e.key;i.push(t)}return i.join("+")}}}]);