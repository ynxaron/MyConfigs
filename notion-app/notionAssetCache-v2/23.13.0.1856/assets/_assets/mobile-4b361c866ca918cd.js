"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[25008],{399528:(e,t,o)=>{o.r(t),o.d(t,{default:()=>ie});o(241792);var i=()=>o(730120),n=o(667294),a=()=>o(219727),r=()=>o(142735),s=()=>o(846550),l=()=>o(263184),c=()=>o(506347),d=()=>o(803021),u=()=>o(646574),m=()=>o(874459),g=()=>o(998411),b=()=>o(396136),p=()=>o(788860),h=()=>o(513670),f=()=>o(384667),v=()=>o(497065),y=()=>o(269299),x=()=>o(672526),S=()=>o(887430),k=()=>o(292612),C=()=>o(882292),T=()=>o(827973),M=()=>o(1910),w=()=>o(198829),B=()=>o(838367),_=()=>o(470386),A=()=>o(388284),I=()=>o(497459),j=()=>o(41340),P=()=>o(141735),Z=()=>o(429725),R=()=>o(352230),V=()=>o(677559),F=()=>o(756085),L=()=>o(696347),E=()=>o(848854);class N extends l().default{getInitialState(){return{}}}const O=N;var H=()=>o(826955),U=()=>o(23151),D=()=>o(907573),q=(o(267602),o(653476),o(470928),()=>o(941310)),K=()=>o(768826),G=()=>o(356321),z=()=>o(615676),Q=()=>o(527278),W=()=>o(876822),J=()=>o(749826),$=o(785893);const Y=function(e){let{time:t,store:i,format:a,schema:l,blockPropertyValueOverlayStore:d,collectionStore:u}=e;const m=(0,s().Fg)(),g=(0,r().VK)((()=>i.getIcon()),[i]),b=(0,r().VK)((()=>i.hasIcon()||!i.isEmptyPage()),[i]),p=(0,r().VK)((()=>i.hasError()),[i]),h=(0,r().VK)((()=>i.isEmptyPage()),[i]),f=(0,r().VK)((()=>(0,Z().ZP)({store:i,fullyQualified:!1,pageVisitSource:c().tY.LinkInPage})),[i]),v=(0,r().VK)((()=>o(852465).Xp(i,{recursivelyLoadAllDiscussions:!1})),[i]),y=(0,r().VK)((()=>{var e;return(null==a?void 0:a.table_wrap)||!0===(null==a||null===(e=a.calendar_properties)||void 0===e||null===(e=e.find((e=>"title"===(null==e?void 0:e.property))))||void 0===e?void 0:e.wrap)}),[null==a?void 0:a.calendar_properties,null==a?void 0:a.table_wrap]);return(0,$.jsx)(o(108714).Z,{href:f,children:(0,$.jsx)(T().Z,{focused:!1,title:(0,$.jsxs)(n.Fragment,{children:[t&&(0,$.jsx)("div",{style:{display:"flex",color:m.mediumTextColor,fontSize:14,marginTop:8,marginBottom:6},children:t}),(0,$.jsxs)("div",{style:{display:"flex",alignItems:"center",...t&&{marginBottom:8}},children:[b&&!p&&(0,$.jsx)(o(943620).Z,{disabled:!0,icon:g,isEmptyPage:h,size:24,style:{flexShrink:0,marginRight:8,alignSelf:"baseline"}}),p&&(0,o(735501).t)({marginLeft:2,marginRight:10,width:20,fill:m.accentColors.orange[500]}),(0,$.jsx)(o(384241).Z,{store:i,style:{fontWeight:o(707513).Ue.semibold,whiteSpace:y?"pre-wrap":void 0}}),v>0&&(0,$.jsxs)("div",{style:{display:"flex",alignItems:"center",color:m.mediumTextColor,fontSize:12,marginLeft:4,flexShrink:0,alignSelf:"baseline"},children:[(0,o(918302).s)({width:12,height:12,marginRight:4,fill:m.mediumIconColor}),v]})]})]}),caption:(0,$.jsx)(ee,{format:a,schema:l,store:i,blockPropertyValueOverlayStore:d,collectionStore:u})})})};function X(e){let{property:t,schema:o,store:i,blockPropertyValueOverlayStore:n,collectionStore:a}=e;return o[t]?(0,$.jsx)(K().m,{store:i,property:t,disabled:!0,locked:!1,format:G().C.Calendar,tableWrap:!1,blockPropertyValueOverlayStore:n,collectionStore:a},t):null}function ee(e){let{format:t,schema:o,store:i,blockPropertyValueOverlayStore:n,collectionStore:a}=e;const{value:s}=(0,V().XJ)(P().F.formulas),l=(0,r().VK)((()=>(t.calendar_properties?t.calendar_properties.filter((e=>e.visible)).map((e=>e.property)):[]).filter((e=>{var t;return(0,q().X)({block:i.getModel(),property:e,schema:o,getRecordModel:i.getRecordModel,userId:null===(t=W().default.state.currentUserStore)||void 0===t?void 0:t.id,userTimeZone:(0,g().r)(),intl:Q().Z.getIntl(),experimentService:J().default,collectionFeatureGates:(0,z().W)(),formulasModule:s})}))),[t.calendar_properties,o,i,s]);return l.length>0?(0,$.jsx)("div",{style:{marginTop:8},children:l.map((e=>(0,$.jsx)(X,{property:e,schema:o,store:i,blockPropertyValueOverlayStore:n,collectionStore:a},e)))}):null}const te={display:"flex",alignItems:"center",height:"100%"},oe=l().default.createClass(void 0,{name:"ResultStore"});const ie=function(e){let{collectionContextStore:t,initialStartOfDay:i,calendarBy:a,disabled:s,onDismiss:l,blockPropertyValueOverlayStore:c,schema:d,format:u}=e;const m=(0,r().qz)(void 0,oe),g=(0,r().qz)(void 0,O),b=(0,r().VK)((()=>(0,D().YG)({collectionContextStore:t,startOfDay:re(i,g).valueOf()})),[t,i,g]),p=(0,n.useCallback)((()=>(0,$.jsx)(le,{collectionContextStore:t,calendarBy:a,initialStartOfDay:i,disabled:s,onDismiss:l,blockPropertyValueOverlayStore:c,schema:d,format:u,store:g,resultStore:m})),[t,a,i,s,l,c,d,u,g,m]);return b?(0,$.jsx)(o(67901).Z,{id:"calendar_day_results",reducer:b,collectionContextStore:t,render:p,resultStore:m}):null};function ne(e){let{item:t,currentStartOfDay:o,currentEndOfDay:i,schema:n,calendarBy:a,intl:r}=e;const s=n[a];if(!s||"date"!==s.type)return;const l=s.date_format||d().sF,c=s.time_format||d().c_,b=t.start,p=t.end,h=Boolean(!(o<=b&&b<=i)||p&&!(o<=p&&p<=i));if(t.end){const e=m().iC(t.start.valueOf(),t.end?t.end.valueOf():t.start.valueOf(),t.timeZone??(0,g().r)());return h?(0,u().ZV)({value:e,date_format:l,time_format:c,userTimeZone:t.timeZone,allowRelativeDates:!0,intl:r}):(0,u().ns)({start_time:e.start_time,end_time:e.end_time,time_format:c,humanReadable:!0,intl:r})}return(0,u().mr)({start_time:m().CQ(t.start.valueOf(),t.timeZone??(0,g().r)()).start_time,time_format:c,humanReadable:!0,intl:r})}function ae(e){let{blockStore:t,item:o,currentStartOfDay:i,currentEndOfDay:n,disabled:a,blockPropertyValueOverlayStore:s,collectionContextStore:l,schema:c,calendarBy:d,format:u}=e;const m=(0,p().YB)(),g=(0,r().VK)((()=>l.collectionStore()),[l]);return g?(0,$.jsx)(Y,{store:t,time:o.includeTime?ne({schema:c,calendarBy:d,intl:m,item:o,currentStartOfDay:i,currentEndOfDay:n}):void 0,disabled:a,format:u,schema:c,blockPropertyValueOverlayStore:s,collectionStore:g},o.id):null}function re(e,t){const{currentStartOfDay:o}=t.state;return o?i().ou.fromMillis(o):i().ou.fromMillis(e)}function se(e,t,o,i,n,a){const r=re(i,n),s=y().createAndCommit({userAction:"MobileCalendarDayMenu.newStore",environment:e,canUndo:!0,perform:i=>{const n=f().IW({environment:e,collectionContextStore:t,groupsPointer:[],insertAtIndex:0,shouldCoerce:!0,templateStore:t.defaultPageTemplateStore.state,transaction:i,from:{createBlock:"mobile_calendar_day_menu"},inMemoryRecordCache:e.defaultRecordCache.inMemoryRecordCache});if(n)return U().xD({type:"timestamp",environment:e,store:n.newStore,propertyId:o,timestampMs:r.valueOf(),transaction:i}),n.newStore}});if(!s.performResult)return;!function(e,t,o){o?o(e):v().c4({environment:t,url:e})}((0,Z().ZP)({store:s.performResult,pageVisitSource:c().tY.Create}),e,a)}function le(e){let{collectionContextStore:t,calendarBy:o,initialStartOfDay:i,disabled:l,onDismiss:c,blockPropertyValueOverlayStore:d,schema:m,format:g,store:f,resultStore:v}=e;const y=(0,a().O7)(),Z=(0,p().YB)(),{value:N}=(0,V().XJ)(P().F.formulas),O=(0,n.useContext)(j().Z),q=(0,r().VK)((()=>t.collectionStore()),[t]),K=(0,r().VK)((()=>re(i,f)),[i,f]),G=K.endOf("day"),z=(0,n.useCallback)((()=>se(y,t,o,i,f,O)),[y,t,o,i,f,O]),Q=(0,n.useCallback)(((e,t)=>{U().xD({type:"timestamp",environment:y,store:t,propertyId:o,timestampMs:K.valueOf(),transaction:e})}),[o,K,y]),W=(0,n.useCallback)((()=>function(e,t){const o=re(e,t);t.setState({...t.state,currentStartOfDay:o.plus({day:1}).valueOf()})}(i,f)),[i,f]),J=(0,n.useCallback)((()=>function(e,t){const o=re(e,t);t.setState({...t.state,currentStartOfDay:o.minus({day:1}).valueOf()})}(i,f)),[i,f]),Y=(0,r().VK)((()=>function(e,t,o,i,n){const a=t.collectionStore();if(!a)return;const r=i.state,s=t.normalizedQueryStore.state,l=t.normalizedSchemaStore.state,c=s?s.calendar_by:void 0;if(!(r&&s&&c&&l))return;const d=new Map,u=new Map;let m=h().oA(r.blockIds.map((t=>{const i=H().G.createChildStore(a,{id:t,table:b().iU});return(0,D().BO)({blockStore:i,calendarBy:c,schema:l,getRecordValue:a.getRecordValue,userId:e.currentUser.id,intl:o,resultCache:d,regExpCache:u,formulasModule:n})})));return s.sort||(m=h().MR(m,(e=>e.start))),m}(y,t,Z,v,N)),[y,t,Z,v,N]),X=(0,r().VK)((()=>S().Il({collectionContextStore:t,environment:y,intl:Z})),[t,y,Z]),ee=(0,s().yK)((e=>({linkExistingButton:{color:e.mediumTextColor,fill:e.mediumTextColor}})),[]);return q?(0,$.jsxs)(w().Z,{menuType:R().o.Modal,title:(0,$.jsxs)("div",{style:te,children:[(0,$.jsx)(M().Z,{onClick:J,icon:F().f,style:{marginRight:8,marginTop:2},mobileFeedback:!0}),(0,$.jsx)("div",{children:(0,u().ZW)({value:K,preset:"month_day_long"})}),(0,$.jsx)(M().Z,{onClick:W,icon:L().o,style:{marginLeft:8,marginTop:2},mobileFeedback:!0})]}),right:(0,$.jsx)(_().DoneMenuText,{}),onClickRight:c,children:[!Y&&(0,$.jsx)(A().Z,{children:(0,$.jsx)(I().Z,{})}),Y&&0===Y.length&&(0,$.jsx)(A().Z,{children:(0,$.jsx)(B().Z,{title:(0,$.jsx)(p()._H,{defaultMessage:"No items",id:"mobileCalendarDayMenu.noResults.message"})})}),Y&&Y.length>0&&(0,$.jsx)(A().Z,{children:Y.map((e=>{const i=H().G.createChildStore(q,{id:e.id,table:b().iU});return(0,$.jsx)(ae,{disabled:l,blockPropertyValueOverlayStore:d,collectionContextStore:t,schema:m,calendarBy:o,format:g,blockStore:i,item:e,currentStartOfDay:K,currentEndOfDay:G},e.id)}))}),!l&&(0,$.jsxs)(A().Z,{topBorder:!0,children:[(0,$.jsx)(k().Z,{focused:!1,onClick:z,title:(0,$.jsx)(p()._H,{defaultMessage:"New item",id:"mobileCalendarDayMenu.newItemButton.label"})}),X&&(0,$.jsx)(x().a,{collectionContextStore:t,renderLinkButton:e=>(0,$.jsx)(T().Z,{...e,focused:!1,title:(0,$.jsx)(p()._H,{id:"mobileCalendarDayMenu.linkExistingButton.label",defaultMessage:"Link existing"}),icon:(0,$.jsx)(C().Z,{icon:E().v}),style:ee.linkExistingButton}),onAddOrLink:Q})]})]}):null}},907573:(e,t,o)=>{o.d(t,{BO:()=>v,Ft:()=>b,YG:()=>p,y$:()=>f});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(30005),o(241792);var i=()=>o(730120),n=()=>o(721927),a=()=>o(803021),r=()=>o(874459),s=()=>o(998411),l=()=>o(530980),c=()=>o(513670),d=()=>o(718959),u=()=>o(412511),m=()=>o(615676),g=()=>o(749826);function b(e){const{collectionContextStore:t}=e,o=t.collectionViewStore();if(!o)return;const i=t.normalizedSchemaStore.state,n=o.getQuery(i);if(!n||!n.calendar_by)return;const a=t.dateRangeStartStore.state,l=t.dateRangeEndStore.state,c=(0,r().hT)(a,(0,s().r)()),d=(0,r().hT)(l,(0,s().r)());return h({calendarBy:n.calendar_by,dateRangeStartDate:c,dateRangeEndDate:d})}function p(e){const{collectionContextStore:t,startOfDay:o}=e,n=t.collectionViewStore();if(!n)return;const a=t.normalizedSchemaStore.state,l=n.getQuery(a);if(!l||!l.calendar_by)return;const c=i().ou.fromMillis(o).endOf("day").valueOf(),d=(0,r().hT)(o,(0,s().r)()),u=(0,r().hT)(c,(0,s().r)());return h({calendarBy:l.calendar_by,dateRangeStartDate:d,dateRangeEndDate:u})}function h(e){const{dateRangeStartDate:t,dateRangeEndDate:o,calendarBy:i}=e;return{type:"results",filter:{operator:"and",filters:[{property:i,filter:{operator:"date_is_on_or_after",use_end:!0,value:{type:"exact",value:t}}},{property:i,filter:{operator:"date_is_on_or_before",value:{type:"exact",value:o}}}]},limit:5e3}}function f(e){var t;const{collectionContextStore:o,results:i,getRecordValue:n,intl:l,formulasModule:m}=e,g=o.collectionViewStore(),b=o.normalizedQueryStore.state,p=o.normalizedSchemaStore.state,h=b?b.calendar_by:void 0,f=o.dateRangeStartStore.state,x=o.dateRangeEndStore.state,S=(null===(t=o.collectionViewStore())||void 0===t?void 0:t.getFormat().calendar_show_weekends)??!0,k=d().AK.state,C=(0,s().r)(),T=o.getCurrentUserId();if(!(g&&b&&h&&p))return;const M=new Map,w=new Map,B=c().oA(i.map((e=>v({blockStore:e,calendarBy:h,schema:p,getRecordValue:n,userId:T,intl:l,resultCache:M,regExpCache:w,formulasModule:m})))),_={};i.forEach(((e,t)=>{_[e.id]=t}));0===(b.sort||[]).length&&B.sort(((e,t)=>{const o=e.start.valueOf(),i=t.start.valueOf();if(o===i){return _[e.id]-_[t.id]}return o-i}));const A=S?(0,r().em)(f,k,C):(0,r().Ty)(f,k,C),I=S?(0,r().gQ)(x,k,C):(0,r().Kw)(x,k,C);let j=A;const P=[];do{const e=S?(0,r().gQ)(j.valueOf(),k,C):(0,r().Kw)(j.valueOf(),k,C),t={},o=B.filter((t=>(0,a().b8)(j.valueOf(),e.valueOf(),t.start.valueOf(),t.end?t.end.valueOf():void 0))).map((o=>{const{id:i,start:n,end:a,includeTime:r,timeZone:s}=o,{startColumn:l,columnCount:c}=(0,u().du)({startUnixTimestampMS:n.valueOf(),endUnixTimestampMS:a?a.valueOf():void 0,startOfWeekUnixTimestampMS:j.valueOf(),endOfWeekUnixTimestampMS:e.valueOf()}),d=y(l,c,t);return{id:i,start:n.valueOf(),end:a?a.valueOf():void 0,row:d,includeTime:r,timeZone:s}}));P.push({start:j.valueOf(),end:e.valueOf(),items:o}),j=S?(0,r().em)(j.plus({week:1}).plus({hour:25}).valueOf(),k,C):(0,r().Ty)(j.plus({week:1}).plus({hour:25}).valueOf(),k,C)}while(j<I);return P}function v(e){const{blockStore:t,calendarBy:o,schema:i,getRecordValue:a,intl:c,userId:d,resultCache:u,regExpCache:b,formulasModule:p}=e,h=t.getAssociatedCollectionStore(),f=t.getModel();if(!f)return;const v=(0,n().FT)({property:o,schema:i,block:f,getRecordModel:l().omK.fromGetRecordValueFn(a),propertyMapping:null==h?void 0:h.getPropertyMapping(),collectionRequestContext:{userId:d,userTimeZone:(0,s().r)(),depth:0,intl:c,visitedProperties:new Set,resultCache:u,regExpCache:b,experimentService:g().default,collectionFeatureGates:(0,m().W)()},formulasModule:p}).next().value;if("date"!==(null==v?void 0:v.type))return;const y=v.value;if(!y)return;const x=(0,r().NK)(y,(0,s().r)());if(!x)return;return{id:f.id,start:x.start,end:x.end,includeTime:"datetime"===y.type||"datetimerange"===y.type,timeZone:"datetime"===y.type||"datetimerange"===y.type?y.time_zone:void 0}}function y(e,t,o){let i=0;for(;;){let n=!1;for(let a=0;a<t;a++)x(o,e+a,i)&&(n=!0);if(!n)break;i++}for(let n=0;n<t;n++)S(o,e+n,i);return i}function x(e,t,o){return Boolean(e[o]&&e[o][t])}function S(e,t,o){e[o]||(e[o]={}),e[o][t]=!0}(0,o(788860).vU)({week:{defaultMessage:"Week",id:"calendar.viewRanges.week"},month:{defaultMessage:"Month",id:"calendar.viewRanges.month"}})},128039:(e,t,o)=>{o.r(t),o.d(t,{FORMS_SHARE_CALLOUT_KEY:()=>X,changeFormClosedState:()=>me,changeFormSubmissionPermissions:()=>ge,createAndFocusCollectionFormEditorView:()=>ne,createCollectionFormEditorView:()=>ae,createDummyFormPage:()=>fe,createFormInPrivate:()=>re,createFormQuestion:()=>ce,createFormQuestionAndModuleForNewlyDuplicatedProperty:()=>de,createFormQuestionAndUpdateOrCreateModule:()=>ue,createResponsesCollectionView:()=>se,deleteFormQuestion:()=>le,handleUpdateFormQuestionName:()=>te,incrementAndTrackUserFormsCreated:()=>ee,maybeAlertAboutUnsupportedPublicQuestions:()=>ve,maybeSyncQuestionNameToPropertyName:()=>oe,remapQuestionToNewProperty:()=>he,toggleAnonymousFormSubmissionState:()=>be,toggleNotionBrandingState:()=>pe});o(821057),o(670560),o(267602),o(653476),o(470928),o(30005),o(667294);var i=()=>o(846550),n=()=>o(506347),a=()=>o(156642),r=()=>o(863112),s=()=>o(226413),l=()=>o(532850),c=()=>o(817629),d=()=>o(998411),u=()=>o(667932),m=()=>o(217465),g=()=>o(375255),b=()=>o(396136),p=()=>o(139978),h=()=>o(26645),f=()=>o(483791),v=()=>o(955620),y=()=>o(788860),x=()=>o(342792),S=()=>o(543172),k=()=>o(707513),C=()=>o(984871),T=()=>o(139224),M=()=>o(132156),w=()=>o(308186),B=()=>o(421654),_=()=>o(636340),A=()=>o(47443),I=()=>o(145284),j=()=>o(269299),P=()=>o(348141),Z=()=>o(932753),R=()=>o(594546),V=()=>o(907005),F=()=>o(270315),L=()=>o(487270),E=()=>o(527278),N=()=>o(660065),O=()=>o(909679),H=()=>o(676232),U=()=>o(803728),D=()=>o(99537),q=()=>o(913011),K=()=>o(356117),G=()=>o(876822),z=()=>o(749826),Q=()=>o(808282),W=()=>o(807230),J=()=>o(469753),$=o(785893);const Y=(0,y().vU)({responsesViewName:{id:"formEditorActions.responsesViewName",defaultMessage:"Responses"},newFormViewName:{id:"formEditorActions.newFormViewName",defaultMessage:"Form builder"},formDatabaseTitle:{id:"newBlock.databaseInline.formDatabaseTitle",defaultMessage:"New form"}}),X="forms_share_form_tooltip";function ee(e,t){const{currentUserSettingsStore:o}=G().default.state;if(!o)return;const i=function(){const{currentUserSettingsStore:e}=G().default.state;if(!e)return;return e.getSettingsStore().getKeyStore("user_forms_created_count").getValue()??0}();void 0!==i&&(P().d2({userSettingsStore:o,transaction:t,data:{user_forms_created_count:i+1}}),function(e,t){(0,R().j)({environment:e,event:{eventName:"form_created",eventProperties:{user_total_form_count:t.userFormsCreatedCount}}})}(e,{userFormsCreatedCount:i+1})),z().default.logEvent("form_created")}function te(e){var t;const{questionStore:o,newName:i,environment:n,collectionStore:a,collectionSchema:r,collectionContextStore:s}=e,l=null===(t=o.getConfig())||void 0===t?void 0:t.propertyId;if(!l)throw new Error("No property ID found for question");j().createAndCommit({userAction:"formQuestion.changeName",environment:n,canUndo:!0,perform:e=>{var t,n;const c=null===(t=o.getConfig())||void 0===t?void 0:t.name;if(!c)return;const u=(0,g().Xh)({textValue:c,getRecordModel:o.getRecordModel,deterministic:!0,userTimeZone:(0,d().r)(),intl:E().Z.getIntl()})===(null===(n=r[l])||void 0===n?void 0:n.name);j().applyOperation({store:o,operation:{pointer:o.pointer,path:["config","name"],command:"set",args:[[i]]},transaction:e}),o.shouldSyncQuestionNameToPropertyName()&&(u&&!(0,F().Gu)({property:l,collectionContextStore:s,newValue:i})?C().Bv({collectionStore:a,property:l,name:i,transaction:e}):j().applyOperation({store:o,operation:{pointer:o.pointer,path:["config","shouldSyncQuestionNameToPropertyName"],command:"set",args:!1},transaction:e}))}})}function oe(e){var t;const{questionStore:o,environment:i,collectionStore:n,collectionContextStore:a}=e,r=null===(t=o.getConfig())||void 0===t?void 0:t.propertyId;if(!r)throw new Error("No property ID found for question");j().createAndCommit({userAction:"formQuestion.changeName",environment:i,canUndo:!0,perform:e=>{if(!o.shouldSyncQuestionNameToPropertyName())return;const t=o.getNameStore().getValue();if(!t)return;const i=(0,g().Xh)({textValue:t,getRecordModel:o.getRecordModel,deterministic:!0,userTimeZone:(0,d().r)(),intl:E().Z.getIntl()}),s=(0,F().Gu)({property:r,collectionContextStore:a,newValue:i})?(0,c().n)(i):i;C().Bv({collectionStore:n,property:r,name:s,transaction:e})}})}function ie(){const e=(0,i().yK)((e=>({container:{display:"flex",flexDirection:"column"},iconGroup:{display:"flex",flexDirection:"row",justifyContent:"center",color:e.icon.secondary,alignItems:"center"},dialogTitle:{fontSize:16,fontWeight:k().Ue.semibold,lineHeight:"22px",marginTop:12,marginBottom:12},dialogDescription:{color:e.text.secondary,fontSize:14,lineHeight:"20px"}})),[]);return(0,$.jsxs)("div",{style:e.container,children:[(0,$.jsxs)("div",{style:e.iconGroup,children:[(0,H().t)({width:24}),(0,N().r)({width:16,marginLeft:16,marginRight:14}),(0,O().E)({width:24})]}),(0,$.jsx)("span",{style:e.dialogTitle,children:(0,$.jsx)(y()._H,{defaultMessage:"Auto-create form questions based on existing properties?",id:"NewFormOnExistingCollectionDialogTitle.message"})}),(0,$.jsx)("span",{style:e.dialogDescription,children:(0,$.jsx)(y()._H,{defaultMessage:"Only supported property types will create new questions.",id:"NewFormOnExistingCollectionDialogTitle.description"})})]})}function ne(e){const{environment:t,collectionContextStore:o,transaction:i}=e,n=o.collectionViewBlockStore(),a=o.collectionStore();if(!n||!a)return;const r=o.normalizedSchemaStore.state,s=ae({environment:t,collectionViewBlockStore:n,schema:r,transaction:i,initializeWithAllDefaultQuestions:!1});if(!s)return;(0,Z().f8)({environment:t,collectionContextStore:o,collectionViewId:s.newViewId,isFullScreen:o.isFullScreenStore.state,isRootChild:o.isRootChildStore.state,isInPeekRenderer:o.isInPeekRendererStore.state});const l=s.layoutStore,c=Object.keys(r).filter((e=>{const t=r[e];return"title"!==e&&t&&(0,J().I0)(t)}));c.length>0&&c.length<=J().h0&&w().vC({showCancel:!1,keepFocus:!1,message:(0,$.jsx)(ie,{}),mode:"wide",items:[{label:(0,$.jsx)(y()._H,{defaultMessage:"Create {numQuestions, plural, one {1 question} other {{numQuestions} questions}}",id:"formEditorActions.createQuestions.primaryAction",values:{numQuestions:c.length}}),color:"blue",buttonType:"solid",onAccept(){j().createAndCommit({environment:t,userAction:"formActions.autoCreateFormQuestionsForExistingDatabase",canUndo:!0,perform:e=>{for(const i of c)de({environment:t,transaction:e,layoutStore:l,collectionStore:a,propertyId:i,position:{type:"area_relative",area:"form_layout_schema",location:"end_moveable"},addLayoutModule:o=>{(0,D().sW)({environment:t,sessionId:(0,x().ZP)(),layoutStore:l,position:o.position??{type:"area_relative",area:"form_layout_schema",location:"end_moveable"},module:o.layoutModule,transaction:e,isPropertyCreation:!1})},collectionContextStore:o,shouldLogEvent:!0,autoCreatedFromExistingDatabase:!0})}})}},{label:(0,$.jsx)(y()._H,{defaultMessage:"Start from scratch",id:"formEditorActions.createQuestions.secondary"}),color:"gray",buttonType:"plain",onAccept(){}}]})}function ae(e){const{environment:t,collectionViewBlockStore:o,transaction:i,schema:n,initializeWithAllDefaultQuestions:a}=e;if(!o)return;const l=o.getSpaceId(),{formBlockStore:c,layoutStore:d}=function(e){var t;const{environment:o,spaceId:i,inMemoryRecordCache:n,transaction:a,schema:l,initializeWithAllDefaultQuestions:c}=e,d=Object.keys(l).find((e=>{var t;return"select"===(null===(t=l[e])||void 0===t?void 0:t.type)})),m=Boolean(c&&void 0!==d),g=(0,L().TS)({environment:o,table:b().iU,spaceId:i}),p=(0,L().TS)({environment:o,table:h().L_,spaceId:i}),v=m?(0,L().TS)({environment:o,table:h().L_,spaceId:i}):void 0,y=_().j4({id:g,environment:o,type:"form",permissions:(0,r().wG)(),inMemoryRecordCache:n,transaction:a}),x=_().ae({environment:o,table:f().Bh,value:{space_id:i,parent_table:b().iU,parent_id:y.id,modules:(0,u().l2)(p,v)},inMemoryRecordCache:n,transaction:a});var S;B().FH({stores:[y],update:{form_layout_pointer:{id:x.id,spaceId:i,table:f().Bh}},transaction:a}),ce({environment:o,questionId:p,spaceId:i,layoutId:x.id,propertyId:s().iw,initialQuestionTitle:(null===(t=l[s().iw])||void 0===t?void 0:t.name)??"",inMemoryRecordCache:n,transaction:a,shouldSyncQuestionNameToPropertyName:!0,shouldLogEvent:!1}),m&&v&&d&&ce({environment:o,questionId:v,spaceId:i,layoutId:x.id,propertyId:d,initialQuestionTitle:(null===(S=l[d])||void 0===S?void 0:S.name)??"",inMemoryRecordCache:n,transaction:a,shouldSyncQuestionNameToPropertyName:!0,shouldLogEvent:!1});return{formBlockStore:y,layoutStore:x}}({environment:t,spaceId:l,inMemoryRecordCache:o.inMemoryRecordCache,transaction:i,schema:n,initializeWithAllDefaultQuestions:a}),m=(0,Z().W9)({environment:t,collectionViewBlockStore:o,collectionView:{type:"form_editor",parent_id:o.id,parent_table:b().iU,alive:!0,space_id:l,name:E().Z.formatMessage(Y.newFormViewName),format:{form_block_pointer:{id:c.id,spaceId:l,table:b().iU}}},transaction:i});return _().sW({store:c,data:{parent_id:m.id,parent_table:p().np,alive:!0},transaction:i}),Q().Z.setState({openTooltip:m.id}),U().yM(t,X),ee(t,i),{newViewId:m.id,layoutStore:d,formId:c.id}}function re(e){const{environment:t,navigateToFormBuilder:o}=e,{currentSpaceStore:i,currentSpaceViewStore:a}=G().default.state;if(!i||!a)return;if(!(0,W().ww)(t))return void(0,W().eD)(t);if(!(i&&i.canEdit()&&a))return;const r=i.id,s=t.idCreator.getSpaceIdCreatorSync(r);j().createAndCommit({environment:t,userAction:"formActions.createAndNavigateToFormInPrivate",canUndo:!0,perform:e=>{var l;const{targetBlockStore:c}=M().Z({environment:t,sourceBlockId:"root",targetBlockPointer:(0,L().Ii)({environment:t,table:b().iU,spaceId:r}),sourceBlockSubtree:(0,m().partialRecordMapToRecordMap)(V().Xq({isInline:!0,name:(0,v().TPx)(E().Z.formatMessage(Y.formDatabaseTitle))})),targetRecordCache:i.inMemoryRecordCache,transaction:e,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!1,spaceIdCreator:s}),d=c.getCollectionStore(),u=null==d||null===(l=d.getModel())||void 0===l?void 0:l.getNormalizedSchema(),g=c;if(!u)throw new Error("Schema not found");ae({environment:t,transaction:e,collectionViewBlockStore:g,schema:u,initializeWithAllDefaultQuestions:!0}),se({environment:t,transaction:e,collectionViewBlockStore:g,schema:u}),I().Hj({environment:t,spaceStore:i,spaceViewStore:a,pageStore:c,isPrivate:!0,transaction:e,location:{type:"prepend"}}),o&&A()._c({environment:t,store:c,pageVisitSource:n().tY.CreateFormDeepLink})}})}function se(e){const{environment:t,collectionViewBlockStore:o,transaction:i}=e,n=o.getSpaceId(),a=Object.keys(e.schema).find((t=>{var o;return"created_by"===(null===(o=e.schema[t])||void 0===o?void 0:o.type)}));(0,Z().W9)({environment:t,collectionViewBlockStore:o,collectionView:{type:"table",parent_id:o.id,parent_table:b().iU,alive:!0,name:E().Z.formatMessage(Y.responsesViewName),space_id:n,format:{table_properties:[{property:"title",visible:!0},...a?[{property:a,visible:!0}]:[]],table_wrap:!0,collection_pointer:o.getCollectionPointer()}},transaction:i})}function le(e){let{environment:t,moduleId:o,sessionId:i,layoutStore:n,collectionSettingsStore:a,isCollectionEmpty:r,collectionContextStore:s,propertyId:l,questionId:c}=e;const d=s.collectionStore();if(!d)throw new Error("Could not find collection store");const u=s.normalizedSchemaStore.state;j().createAndCommit({environment:t,userAction:"formActions.deleteFormQuestion",canUndo:!0,perform:e=>{var a;(0,q().H)({environment:t,position:{area:"form_layout_schema",moduleId:o},layoutStore:n,sessionId:i,transaction:e});const s=null===(a=u[l])||void 0===a?void 0:a.type;r&&s&&"title"!==s&&C().E2({environment:t,collectionStore:d,schema:u,property:l,transaction:e})}}),(0,R().j)({environment:t,event:{eventName:"delete_form_question",eventProperties:(0,J().Pz)({collectionContextStore:s,propertyId:l,questionId:c})}}),T().E3({collectionSettingsStore:a})}function ce(e){const{environment:t,questionId:o,spaceId:i,layoutId:n,propertyId:a,initialQuestionTitle:r,inMemoryRecordCache:s,transaction:l,shouldSyncQuestionNameToPropertyName:c,collectionContextStore:d,shouldLogEvent:u=!0,autofocusTitle:m,existingFormQuestionConfig:g,autoCreatedFromExistingDatabase:b}=e;_().ae({environment:t,table:h().L_,value:{id:o,space_id:i,parent_table:f().Bh,parent_id:n,alive:!0,config:{...g,propertyId:a,name:[[r]],shouldSyncQuestionNameToPropertyName:c}},inMemoryRecordCache:s,transaction:l}),u&&(0,R().j)({environment:t,event:{eventName:"add_form_question",eventProperties:{...(0,J().Pz)({collectionContextStore:d,propertyId:a,questionId:o}),auto_created_from_existing_database:Boolean(b)}}}),m&&m.autofocusedQuestionTextStore.autofocusQuestionTitle({questionId:o})}function de(e){const{environment:t,transaction:o,layoutStore:i,collectionStore:n,propertyId:a,position:r,addLayoutModule:s,collectionContextStore:l,shouldLogEvent:c=!0,autofocusTitle:d,existingFormQuestionConfig:u,autoCreatedFromExistingDatabase:m}=e,g=n.getSchema()[a];if(!g)throw new Error(`No schema found for property ${a}`);const b=u?(0,v().QaF)(null==u?void 0:u.name):g.name,p=i.getSpaceId(),f=(0,L().TS)({environment:t,table:h().L_,spaceId:p});return ce({environment:t,questionId:f,spaceId:p,layoutId:i.id,propertyId:a,initialQuestionTitle:b,inMemoryRecordCache:i.inMemoryRecordCache,transaction:o,shouldSyncQuestionNameToPropertyName:!0,shouldLogEvent:c,collectionContextStore:l,autofocusTitle:d,existingFormQuestionConfig:u,autoCreatedFromExistingDatabase:m}),s({layoutModule:{type:"formQuestion",id:(0,S().ZP)(),formQuestionId:f},position:r,transaction:o}),{questionId:f}}function ue(e){const{environment:t,transaction:o,layoutStore:i,propertyId:n,initialQuestionTitle:a,moduleId:r,shouldSyncQuestionNameToPropertyName:s,collectionContextStore:l,autofocusTitle:c,area:d}=e,u=i.getModel();if(!u)throw new Error("Layout model cannot be undefined");const m=i.getSpaceId(),g=(0,L().TS)({environment:t,table:h().L_,spaceId:m});ce({environment:t,questionId:g,spaceId:m,layoutId:u.id,propertyId:n,initialQuestionTitle:a,inMemoryRecordCache:i.inMemoryRecordCache,transaction:o,shouldSyncQuestionNameToPropertyName:s,collectionContextStore:l,autofocusTitle:c});const b={type:"formQuestion",id:r??(0,S().ZP)(),formQuestionId:g,..."form_conditional_modules"===d?{parentModuleId:e.parentModuleId,parentConditionalGroupId:e.parentConditionalGroupId}:{}};return r?(0,K().Uq)({environment:t,transaction:o,layoutStore:i,position:{area:d,moduleId:r},updatedModule:b}):"form_conditional_modules"===d&&(0,D().sW)({environment:t,transaction:o,layoutStore:i,position:{type:"absolute",area:"form_conditional_modules",parentConditionalGroupId:e.parentConditionalGroupId,parentModuleId:e.parentModuleId},module:b,sessionId:(0,x().ZP)(),isPropertyCreation:!1}),{updatedModuleId:b.id}}function me(e){let{environment:t,formBlockStore:o,isClosed:i}=e;o.getIsFormClosed()!==i&&j().createAndCommit({userAction:"formActions.changeFormClosedState",environment:t,canUndo:!0,perform:e=>{B().FH({stores:[o],update:{form_config:{...o.getFormConfig(),is_form_closed:i}},transaction:e})}})}function ge(e){let{environment:t,formBlockStore:o,permissions:i}=e;o.getFormSubmissionPermissions()!==i&&j().createAndCommit({userAction:"formActions.changeFormSubmissionPermissions",environment:t,canUndo:!0,perform:e=>{B().FH({stores:[o],update:{form_config:{...o.getFormConfig(),submission_permissions:i}},transaction:e})}})}function be(e){let{environment:t,formBlockStore:o}=e;const i=o.getIsFormAnonymousSubmissionEnabled();j().createAndCommit({userAction:"formActions.changeAnonymousFormSubmissionState",environment:t,canUndo:!0,perform:e=>{B().FH({stores:[o],update:{form_config:{...o.getFormConfig(),anonymous_submissions:!i}},transaction:e})}})}function pe(e){var t;let{environment:o,formBlockStore:i}=e;const n=i.getSiteStore();if(!n)return;const a=(null===(t=n.getHeader())||void 0===t?void 0:t.hideWatermark)??!1;j().createAndCommit({userAction:"formBlockStore.publicForm.toggleNotionBranding",environment:o,canUndo:!0,perform:e=>{j().applyOperation({store:n,operation:{pointer:n.pointer,path:["header","hideWatermark"],command:"set",args:!a},transaction:e})}})}function he(e){let{environment:t,newPropertyId:o,formQuestionStore:i}=e;j().createAndCommit({userAction:"formQuestion.remapQuestionToNewProperty",environment:t,canUndo:!0,perform:e=>{j().applyOperation({store:i,operation:{pointer:i.pointer,path:["config","propertyId"],command:"set",args:o},transaction:e})}})}function fe(e){const{environment:t,collectionSchema:o,temporaryRecordCache:i,spaceId:n,collectionId:r,formMode:s}=e,l={};Object.keys(o).forEach((e=>{l[e]=(0,v().TPx)("")}));const{performResult:c}=j().createAndCommit({environment:t,userAction:"formActions.createDummyFormPage",perform:e=>{const o=_().j4({environment:t,type:a().Ti.page,inMemoryRecordCache:i,transaction:e,spaceId:n,properties:{...l}});return _().sW({store:o,data:{alive:"viewer"===s,parent_id:r,parent_table:"collection"},transaction:e}),o},canUndo:!1});return c}async function ve(e){const{environment:t,formBlockStore:o,collectionSchema:i,theme:n,onAccept:a}=e;if(!i)return;const r=(0,J().jj)(o),s=(null==r?void 0:r.getFormQuestionsForFormLayout())??[],c=[];if(s.forEach((e=>{const o=e.getPropertyId();if(!o)return;const n=(0,l().Qm)({schema:i,property:o}),a=null==n?void 0:n.type;if(!a)return;(0,J().Hz)({environment:t,propertyType:a,propertySchema:n,isPublicForm:!0})&&c.push(e)})),0===c.length)return void a();const u=c.map(((e,t)=>{const o=(0,g().Xh)({textValue:e.getNameStore().getValue(),getRecordModel:e.getRecordModel,deterministic:!0,userTimeZone:(0,d().r)(),intl:E().Z.getIntl()}),i=t===c.length-1;return(0,$.jsx)("div",{style:{fontSize:14,textAlign:"start",padding:"8px 12px",borderBottom:i?void 0:`1px solid ${n.lightDividerColor}`},children:o},e.id)})),{accept:m}=await w().gt({message:(0,$.jsx)(y()._H,{id:"formEditorActions.maybeAlertAboutUnsupportedPublicQuestions.message",defaultMessage:"These questions are not supported in public forms and will not be shown to respondents:"}),description:(0,$.jsx)("div",{style:{borderRadius:6,border:`1px solid ${n.lightDividerColor}`,width:"calc(100% + 24px)",marginLeft:-12,marginTop:12,maxHeight:210,overflow:"auto"},children:u}),acceptLabel:(0,$.jsx)(y()._H,{id:"formEditorActions.maybeAlertAboutUnsupportedPublicQuestions.acceptLabel",defaultMessage:"Got it"}),acceptColor:"blue",cancelButtonType:"plain",mode:"wide"});m&&a()}},672526:(e,t,o)=>{o.d(t,{a:()=>l});o(667294);var i=()=>o(219727),n=()=>o(138555),a=()=>o(448419),r=()=>o(998901),s=o(785893);function l(e){let{collectionContextStore:t,groupFormat:o,renderLinkButton:l,onAddOrLink:c,...d}=e;const u=(0,i().Fy)();return(0,s.jsx)(a().ZP,{popupType:u.isMobile?a().Z4.BottomSheet:a().Z4.Popup,alignmentToOrigin:r().Alignment.Start,disableFlippingPlacement:!0,...d,renderOrigin:l,render:e=>(0,s.jsx)(n().mN,{collectionContextStore:t,groupFormat:o,onClose:()=>e.close(),onAddOrLink:c})})}},292612:(e,t,o)=>{o.d(t,{Z:()=>a});var i=o(667294),n=o(785893);const a=i.forwardRef((function(e,t){const i=(0,o(846550).yK)((t=>({base:{color:e.isBlue?o(568017).ZP.blue:t.mediumTextColor},disabled:{cursor:"not-allowed"},buttonMenuItem:{...e.style,...e.disabled?{cursor:"not-allowed"}:{}}})),[e.disabled,e.isBlue,e.style]),{color:a}=i.base;return(0,n.jsx)(o(827973).Z,{ref:t,...e,title:(0,n.jsx)("div",{style:{color:a,fill:a},children:e.title}),icon:(0,n.jsx)(o(882292).Z,{icon:o(521777).R,styles:{fill:a}}),style:i.buttonMenuItem})}))},42809:(e,t,o)=>{o.r(t),o.d(t,{MobileActionBar:()=>xe,handleDismissKeyboard:()=>Oe});var i=o(667294),n=()=>o(146947),a=()=>o(219727),r=()=>o(142735),s=()=>o(846550),l=()=>o(156642),c=()=>o(788860),d=()=>o(707513),u=()=>o(353141),m=()=>o(80072),g=()=>o(207874),b=()=>o(879952),p=()=>o(990966),h=()=>o(141735),f=()=>o(233936),v=()=>o(814139),y=()=>o(191003),x=()=>o(505462),S=()=>o(466970),k=()=>o(615634),C=()=>o(737484),T=()=>o(206643),M=()=>o(827282),w=o(785893);const B=(0,M().IU)("indentDown",{viewBox:"0 0 30 30",svg:(0,w.jsx)("path",{d:"M24,15l-1.406-1.406L16,20.188V2h-2v18.188l-6.594-6.594L6,15l9,9L24,15z M2,26v2h26v-2H2z"})});var _=()=>o(103485);const A=(0,M().IU)("moveUp",{viewBox:"0 0 30 30",svg:(0,w.jsx)("path",{d:"M14,5.813V24h2V5.813l6.594,6.594L24,11l-9-9l-9,9l1.406,1.406L14,5.813z M2,26v2h26v-2H2z"})});var I=()=>o(133450),j=()=>o(918302),P=()=>o(348256),Z=()=>o(750106),R=()=>o(739479),V=()=>o(491174),F=()=>o(998901),L=()=>o(104088),E=()=>o(72041),N=()=>o(302353),O=()=>o(253225),H=()=>o(121700),U=()=>o(965903),D=()=>o(127519),q=()=>o(154186),K=()=>o(967092),G=()=>o(313358),z=()=>o(161035),Q=()=>o(629013),W=()=>o(657320),J=()=>o(236029),$=()=>o(675876),Y=()=>o(393322),X=()=>o(284831);const ee=42;function te(e){const{stores:t,position:o,currentBlockStore:b}=e,p=(0,a().O7)(),S=(0,W().l)(),k=(0,a().Fy)(),C=k.isMobileNative,T=k.isSmallPhone,M=(0,J().Z)(!0),B=(0,r().VK)((()=>f().$3(p,b,null==S?void 0:S.publicEditModeStore.state)),[p,b,null==S?void 0:S.publicEditModeStore]),_=(0,r().VK)((()=>p.WindowSizeStore.state),[p]),A=(0,s().yK)((e=>({button:{display:"flex",alignItems:"center",padding:"0 8px",whiteSpace:"nowrap"},actionButton:{height:"100%",width:"100%",fontSize:15,display:"flex",boxShadow:o===v().nd.Bottom?e.bottomActionBarShadow:e.mediumBoxShadow,backgroundColor:e.keyboardActionBarBackground,paddingLeft:C?_.paddingLeftCSS:0,paddingRight:C?_.paddingRightCSS:0},item:{display:"flex",alignItems:"center",justifyContent:"center",paddingLeft:T?8:10,paddingRight:T?8:10,borderRight:`1px solid ${e.regularDividerColor}`,whiteSpace:"nowrap",height:ee,flexShrink:0,flexGrow:0,flexBasis:"auto",color:e.regularTextColor,minWidth:T?42:44},minorItem:{width:34,justifyContent:"center"},itemBorderLeft:{borderLeft:`1px solid ${e.regularDividerColor}`},selectionLinkSpan:{borderBottom:`1px solid ${e.linkDecorationColor}`},actionMenu:{flexGrow:1,flexShrink:1,marginRight:-1,display:"flex",overflowX:"auto",overflowY:"hidden",WebkitOverflowScrolling:"touch"}})),[o,C,_,T]),I=(0,r().VK)((()=>p.device.isMobileBrowser?t.store.state.isOpen:B.shouldShow),[p,t,B]),j=(0,r().VK)((()=>N().default.mobileNativeBottomPadding(p)),[p]),P=(0,r().VK)((()=>f().Tz({environment:p,store:b})),[p,b]),Z=(0,r().VK)((()=>f().oQ(t.ignoreSelectionAreaStore,p.TextSelectionCompositionStore,b,!1)),[t,p,b]),{canTriggerTextActions:R,canTriggerCommentAction:V,canTriggerBlockActions:L,hasMultiBlockSelection:O,currentSelection:te}=(0,r().VK)((()=>{const e=f().eQ(S&&S.publicEditModeStore.state,b),t=b.canComment(),o=!Z&&f().Bo(S&&S.publicEditModeStore.state),i=D().default.state;return{canTriggerTextActions:e,canTriggerCommentAction:t,canTriggerBlockActions:o,hasMultiBlockSelection:"editing"===i.mode&&!(0,y().qS)(i.multiSelection),currentSelection:U().default.state.stores[0]}}),[S,b,Z]),fe=((0,r().VK)((()=>{const e=D().default.state;if("editing"===e.mode){const t=e.multiSelection.end;return{scrollTop:E().Z.state.scrollTop_DEPRECATED,editing:!0,store:t.store.id,selection:t}}return{scrollTop:E().Z.state.scrollTop_DEPRECATED,editing:!1}}),[]),(0,Q().y)((()=>u().FG(p)),500)),ve=(0,i.useRef)(null),ye=(0,i.useRef)(void 0),xe=(0,i.useRef)(!1);(0,i.useLayoutEffect)((()=>{if(C)B.shouldShow!==xe.current&&(xe.current=B.shouldShow,ve.current&&(ve.current.scrollLeft=0));else{const e=t.store.state.isOpen;B.shouldShow?e?void 0!==ye.current&&(window.clearTimeout(ye.current),ye.current=void 0):(t.store.setState({...t.store.state,isOpen:!0}),ve.current&&(ve.current.scrollLeft=0)):e&&void 0===ye.current&&(ye.current=window.setTimeout((()=>{ye.current=void 0,t.store.setState({...t.store.state,isOpen:!1})}),200))}}),[p,C,B.shouldShow,t.store]);const Se=()=>{let e=!1,o=!1;const i=b.getType();if(i){const t=b.getFormat();(0,l()._T)(i,t)||(e=!0),(0,l().lQ)(i)||(o=!0)}return H().Z.state.isOpen&&(e=!1),(0,w.jsxs)("div",{ref:ve,style:A.actionMenu,onScroll:fe,children:[(0,w.jsxs)(q().Z,{mobileFeedback:!0,disabledFeedback:!0,style:{...A.item,...!T&&{paddingLeft:12,paddingRight:12}},onClick:()=>{t.store.setState({...t.store.state,isInsertOpen:!0}),he("insert",p)},disabled:!L,children:[se,(0,w.jsx)(ie,{})]}),(0,w.jsxs)(q().Z,{mobileFeedback:!0,disabledFeedback:!0,style:{...A.item,fontWeight:d().Ue.medium},onClick:e=>{t.store.setState({...t.store.state,isTurnIntoOpen:!0}),he("turn_into",p)},disabled:!L,children:[(0,w.jsx)(c()._H,{defaultMessage:"Turn into",id:"mobileActionBar.turnInto.buttonTitle"}),(0,w.jsx)(ie,{})]}),(0,w.jsx)(q().Z,{mobileFeedback:!0,disabledFeedback:!0,...M,style:A.item,onClick:()=>f().Z3(p),disabled:!o,children:(0,w.jsx)("span",{style:{fontSize:19,lineHeight:1,fontWeight:d().Ue.medium,marginBottom:p.device.isAndroid?4:0},children:"@"})}),(0,w.jsx)(q().Z,{mobileFeedback:!0,disabledFeedback:!0,style:A.item,onClick:async()=>{const e=await h().F.formulas.load();f().ol(p,"mobile_action_bar",e)},disabled:!e,children:le}),(0,w.jsx)(q().Z,{mobileFeedback:!0,disabledFeedback:!0,style:A.item,onClick:()=>f().vs(p),disabled:!L,children:ce}),(0,w.jsx)(q().Z,{mobileFeedback:!0,disabledFeedback:!0,style:A.item,onClick:()=>f().fn(p),disabled:!L,children:de}),(0,w.jsxs)("div",{style:{...A.item,paddingLeft:6,paddingRight:6},children:[(0,w.jsx)(q().Z,{mobileFeedback:!0,disabledFeedback:!0,style:A.minorItem,disabled:!L||!m().gq(te),onClick:()=>f().$$(p),children:ne}),(0,w.jsx)(q().Z,{mobileFeedback:!0,disabledFeedback:!0,style:A.minorItem,disabled:!m().nt(te),onClick:()=>f().O2(p),children:ae}),(0,w.jsx)(q().Z,{mobileFeedback:!0,disabledFeedback:!0,style:A.minorItem,disabled:!L,onClick:()=>f().s0(p),children:ue}),(0,w.jsx)(q().Z,{mobileFeedback:!0,disabledFeedback:!0,style:A.minorItem,disabled:!L,onClick:()=>f().rZ(p),children:me})]}),(0,w.jsxs)("div",{style:{...A.item,paddingLeft:6,paddingRight:6},children:[(0,w.jsx)(q().Z,{mobileFeedback:!0,disabledFeedback:!0,style:A.minorItem,disabled:!g().L0(),onClick:()=>f().i2(p),children:ge}),(0,w.jsx)(q().Z,{mobileFeedback:!0,disabledFeedback:!0,style:A.minorItem,disabled:!g().AZ(),onClick:()=>f().GH(p),children:be})]}),(0,w.jsxs)(q().Z,{mobileFeedback:!0,disabledFeedback:!0,style:{...A.item,fontWeight:d().Ue.medium},onClick:e=>{t.store.setState({...t.store.state,isColorOpen:!0}),he("color",p)},disabled:!L,children:[(0,w.jsx)(c()._H,{defaultMessage:"Color",id:"mobileActionBar.color.buttonTitle"}),(0,w.jsx)(ie,{})]}),(0,w.jsxs)(q().Z,{mobileFeedback:!0,disabledFeedback:!0,style:{...A.item,fontWeight:d().Ue.medium},onClick:()=>f().w1(p),disabled:!L,children:[(0,w.jsx)(c()._H,{defaultMessage:"More",id:"mobileActionBar.more.buttonTitle"}),(0,w.jsx)(ie,{})]})]})},ke=()=>(0,w.jsxs)("div",{style:A.actionButton,children:[P?(0,w.jsx)(oe,{itemStyle:A.item,actionMenuStyle:A.actionMenu}):Z?(0,w.jsxs)("div",{style:A.actionMenu,onScroll:fe,children:[V&&!H().Z.state.isOpen&&(0,w.jsx)(z().Z,{style:A.item,blockStore:te,iconOnly:!1}),(0,w.jsx)($().Z,{type:"b",style:A.item,onClick:()=>he("bold",p),disabled:!R,children:(0,w.jsx)("span",{style:{fontWeight:d().Ue.semibold},children:(0,w.jsx)(c()._H,{defaultMessage:"B",id:"mobileActionBar.bold.symbol"})})}),(0,w.jsx)($().Z,{type:"i",style:A.item,onClick:()=>he("italic",p),disabled:!R,children:(0,w.jsx)("span",{style:{fontStyle:"italic",fontWeight:d().Ue.semibold},children:(0,w.jsx)(c()._H,{defaultMessage:"i",id:"mobileActionBar.italic.symbol"})})}),(0,w.jsx)($().Z,{type:"_",style:A.item,onClick:()=>he("underline",p),disabled:!R,children:(0,w.jsx)("span",{style:{textDecoration:"underline"},children:(0,w.jsx)(c()._H,{defaultMessage:"U",id:"mobileActionBar.underline.symbol"})})}),(0,w.jsx)($().Z,{type:"s",style:A.item,onClick:()=>he("strike_through",p),disabled:!R,children:(0,w.jsx)("span",{style:{textDecoration:"line-through"},children:(0,w.jsx)(c()._H,{defaultMessage:"S",id:"mobileActionBar.strikeThrough.symbol"})})}),(0,w.jsx)(q().Z,{mobileFeedback:!0,disabledFeedback:!0,style:A.button,disabled:!m().gq(te),onClick:()=>f().$$(p),children:ne}),(0,w.jsx)(q().Z,{mobileFeedback:!0,disabledFeedback:!0,style:A.button,disabled:!m().nt(te),onClick:()=>f().O2(p),children:ae}),(0,w.jsx)($().Z,{type:"c",style:A.item,onClick:()=>he("code",p),disabled:!R,children:(0,w.jsx)("span",{style:{fontFamily:d().F5(n().locale).githubMono},children:(0,w.jsx)(c()._H,{defaultMessage:"Code",id:"mobileActionBar.code.symbol"})})}),(0,w.jsx)(X().Z,{style:A.item,disabled:!R||O,children:(0,w.jsx)("span",{style:A.selectionLinkSpan,children:(0,w.jsx)(c()._H,{defaultMessage:"Link",id:"mobileActionBar.link.symbol"})})}),(0,w.jsx)(Y().Z,{onClick:()=>he("equation",p),disabled:!R||O,style:A.item,children:re}),(0,w.jsx)(G().Z,{style:A.item,disabled:!R})]}):Se(),(0,w.jsx)(q().Z,{mobileFeedback:!0,disabledFeedback:!0,style:{...A.item,...A.itemBorderLeft,borderRight:"none"},onClick:()=>Oe(t,p),children:pe})]});if(o===v().nd.Bottom)return(0,w.jsx)("div",{style:{position:"absolute",bottom:j,left:0,height:ee,width:"100%",pointerEvents:I?"auto":"none",opacity:I?1:0,transform:I?"translateY(0)":`translateY(${ee}px)`,transition:"opacity 120ms ease-out, transform 120ms ease-out"},children:ke()});{const e=x().getSelectionRect();if(!e)return null;const t=document.body.getBoundingClientRect(),o={...e,left:10,top:e.top+10-t.top};return(0,w.jsx)(K().ZP,{popupType:C?K().kQ.SlideUp:K().kQ.Popup,open:I,preventBlockRenderQueueOnEnter:!0,placementToOrigin:F().Placement.Bottom,alignmentToOrigin:F().Alignment.Start,originRect:o,disableMouseCapture:!0,keepFocus:!0,render:()=>(0,w.jsx)("div",{style:{height:ee,borderRadius:4,overflow:"hidden"},children:ke()})})}}function oe(e){let{itemStyle:t,actionMenuStyle:o}=e;const i=(0,a().O7)();return(0,w.jsx)("div",{style:o,children:(0,w.jsxs)(q().Z,{mobileFeedback:!0,disabledFeedback:!0,style:{...t,borderRight:"none",fontWeight:d().Ue.medium},onClick:e=>{O().Z.setState({open:!0}),he("templates",i)},children:[(0,P().i)({width:20,marginRight:8}),(0,w.jsx)(c()._H,{defaultMessage:"Choose a template...",id:"mobileActionBar.templates.buttonTitle"}),(0,w.jsx)(ie,{})]})})}function ie(){const e=(0,s().yK)((e=>({chevron:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]);return(0,k().i)(e.chevron)}const ne=B({width:18,height:18,transform:"rotate(90deg)",position:"relative",left:1}),ae=B({width:18,height:18,transform:"rotate(-90deg)",position:"relative",left:-1}),re=(0,C().G)({width:16,height:16}),se=(0,Z().C)({width:14,height:14}),le=(0,j().s)({width:18,height:18}),ce=(0,T().y)({width:18,height:18}),de=(0,R().y)({width:18,height:18}),ue=A({width:18,height:18,position:"relative",left:2}),me=A({width:18,height:18,transform:"rotate(180deg)",position:"relative",left:2}),ge=(0,V().s)({width:19,height:19}),be=(0,I().N)({width:19,height:19}),pe=(0,_().z)({width:18,height:18});function he(e,t){u().YO(t,{itemName:e})}const fe={width:34,justifyContent:"center"},ve=42;class ye extends(()=>o(10227))().Z{constructor(){super(...arguments),this.scrollerDiv=void 0,this.currentlyShownTimer=void 0,this.previouslyShownOnNative=!1,this.handleScrollerRef=e=>{e&&(this.scrollerDiv=e)},this.handleActionsScrollDebounced=o(513670).Ds((()=>{return e=this.environment,void u().FG(e);var e}),500),this.listenForPositionChangesStore=this.createComputedStore((()=>{const e=D().default.state;if("editing"===e.mode){const t=e.multiSelection.end;return{scrollTop:E().Z.state.scrollTop_DEPRECATED,editing:!0,store:t.store.id,selection:t}}return{scrollTop:E().Z.state.scrollTop_DEPRECATED,editing:!1}})),this.renderStore=this.createComputedStore((()=>{var e;return f().$3(this.environment,this.props.currentBlockStore,null===(e=this.pageContext)||void 0===e?void 0:e.publicEditModeStore.state)})),this.mobileBottomPaddingStore=this.createComputedStore((()=>N().default.mobileNativeBottomPadding(this.environment))),this.shouldShowTextActionsStore=this.createComputedStore((()=>f().oQ(this.props.stores.ignoreSelectionAreaStore,this.environment.TextSelectionCompositionStore,this.props.currentBlockStore,!1))),this.canTriggerBlockActionsStore=this.createComputedStore((()=>!this.shouldShowTextActionsStore.state&&f().Bo(this.pageContext&&this.pageContext.publicEditModeStore.state))),this.canTriggerTextActionsStore=this.createComputedStore((()=>f().eQ(this.pageContext&&this.pageContext.publicEditModeStore.state,this.props.currentBlockStore))),this.hasMultiBlockSelectionStore=this.createComputedStore((()=>{const e=D().default.state;return"editing"===e.mode&&!(0,y().qS)(e.multiSelection)}))}UNSAFE_willMountOrUpdate(){const{device:e}=this.environment,t=this.renderStore.state.shouldShow;if(e.isMobileBrowser){const e=this.props.stores.store.state.isOpen;t?e?void 0!==this.currentlyShownTimer&&(window.clearTimeout(this.currentlyShownTimer),this.currentlyShownTimer=void 0):(this.props.stores.store.setState({...this.props.stores.store.state,isOpen:!0}),this.scrollerDiv&&(this.scrollerDiv.scrollLeft=0)):e&&void 0===this.currentlyShownTimer&&(this.currentlyShownTimer=window.setTimeout((()=>{this.currentlyShownTimer=void 0,this.props.stores.store.setState({...this.props.stores.store.state,isOpen:!1})}),200))}else t!==this.previouslyShownOnNative&&(this.previouslyShownOnNative=t,this.scrollerDiv&&(this.scrollerDiv.scrollLeft=0))}renderComponent(){const e=function(e,t,o){const{device:i}=e;return i.isMobileBrowser?t.store.state.isOpen:o.state.shouldShow}(this.environment,this.props.stores,this.renderStore);if(this.props.position===v().nd.Bottom){const t=this.mobileBottomPaddingStore.state;return(0,w.jsx)("div",{style:{position:"absolute",bottom:t,left:0,height:ve,width:"100%",pointerEvents:e?"auto":"none",opacity:e?1:0,transform:e?"translateY(0)":`translateY(${ve}px)`,transition:"opacity 120ms ease-out, transform 120ms ease-out"},children:this.renderActionButtons()})}{this.listenForPositionChangesStore.state;const t=x().getSelectionRect();if(!t)return;const o=document.body.getBoundingClientRect(),i={...t,left:10,top:t.top+10-o.top},{device:n}=this.environment;return(0,w.jsx)(K().ZP,{popupType:n.isMobileNative?L().k.SlideUp:L().k.Popup,open:e,preventBlockRenderQueueOnEnter:!0,placementToOrigin:F().Placement.Bottom,alignmentToOrigin:F().Alignment.Start,originRect:i,disableMouseCapture:!0,keepFocus:!0,render:()=>(0,w.jsx)("div",{style:{height:ve,width:"calc(80wv)",borderRadius:4,overflow:"hidden"},children:this.renderActionButtons()})})}}renderActions(){return f().Tz({environment:this.environment,store:this.props.currentBlockStore})?(0,w.jsx)(Ue,{stores:this.props.stores}):this.shouldShowTextActionsStore.state?this.renderTextActions():this.renderBlockActions()}renderActionButtons(){return(0,w.jsxs)("div",{style:Ve(this.props.position,this.environment,this.theme),children:[this.renderActions(),(0,w.jsx)(q().Z,{mobileFeedback:!0,disabledFeedback:!0,style:{...Ne(this.environment.device.isSmallPhone,this.theme),borderLeft:Re(this.theme),borderRight:"none"},onClick:()=>Oe(this.props.stores,this.environment),children:Ie})]})}renderBlockActions(){const e=this.canTriggerBlockActionsStore.state;let t=!1,i=!1;const n=this.props.currentBlockStore.getType();if(n){const e=this.props.currentBlockStore.getFormat();(0,l()._T)(n,e)||(t=!0),(0,l().lQ)(n)||(i=!0)}H().Z.state.isOpen&&(t=!1);const{device:a}=this.environment;return(0,w.jsxs)("div",{ref:this.handleScrollerRef,style:Pe(),onScroll:this.handleActionsScrollDebounced,children:[(0,w.jsxs)(q().Z,{mobileFeedback:!0,disabledFeedback:!0,style:{...Ne(this.environment.device.isSmallPhone,this.theme),...!a.isSmallPhone&&{paddingLeft:12,paddingRight:12}},onClick:()=>{return e=this.props.stores,t=this.environment,e.store.setState({...e.store.state,isInsertOpen:!0}),void Ze("insert",t);var e,t},disabled:!e,children:[Ae,(0,w.jsx)(Fe,{})]}),(0,w.jsxs)(q().Z,{mobileFeedback:!0,disabledFeedback:!0,style:{...Ne(this.environment.device.isSmallPhone,this.theme),fontWeight:d().Ue.medium},onClick:e=>{this.props.stores.store.setState({...this.props.stores.store.state,isTurnIntoOpen:!0}),Ze("turn_into",this.environment)},disabled:!e,children:[(0,w.jsx)(c()._H,{defaultMessage:"Turn into",id:"mobileActionBar.turnInto.buttonTitle"}),(0,w.jsx)(Fe,{})]}),(0,w.jsx)(o(681074).Z,{capture:!0,render:e=>(0,w.jsx)(q().Z,{mobileFeedback:!0,disabledFeedback:!0,...e,style:Ne(this.environment.device.isSmallPhone,this.theme),onClick:()=>{return e=this.environment,void f().Z3(e);var e},disabled:!i,children:(0,w.jsx)("span",{style:{fontSize:19,lineHeight:1,fontWeight:d().Ue.medium,marginBottom:a.isAndroid?4:0},children:"@"})})}),(0,w.jsx)(q().Z,{mobileFeedback:!0,disabledFeedback:!0,style:Ne(this.environment.device.isSmallPhone,this.theme),onClick:()=>async function(e){const t=await h().F.formulas.load();f().ol(e,"mobile_action_bar",t)}(this.environment),disabled:!t,children:_e}),(0,w.jsx)(q().Z,{mobileFeedback:!0,disabledFeedback:!0,style:Ne(this.environment.device.isSmallPhone,this.theme),onClick:()=>{return e=this.environment,void f().vs(e);var e},disabled:!e,children:je}),(0,w.jsx)(q().Z,{mobileFeedback:!0,disabledFeedback:!0,style:Ne(this.environment.device.isSmallPhone,this.theme),onClick:()=>{return e=this.environment,void f().fn(e);var e},disabled:!e,children:Be}),(0,w.jsx)(De,{canTriggerBlockActionsStore:this.canTriggerBlockActionsStore}),(0,w.jsx)(He,{}),(0,w.jsxs)(q().Z,{mobileFeedback:!0,disabledFeedback:!0,style:{...Ne(this.environment.device.isSmallPhone,this.theme),fontWeight:d().Ue.medium},onClick:e=>{this.props.stores.store.setState({...this.props.stores.store.state,isColorOpen:!0}),Ze("color",this.environment)},disabled:!e,children:[(0,w.jsx)(c()._H,{defaultMessage:"Color",id:"mobileActionBar.color.buttonTitle"}),(0,w.jsx)(Fe,{})]}),(0,w.jsxs)(q().Z,{mobileFeedback:!0,disabledFeedback:!0,style:{...Ne(this.environment.device.isSmallPhone,this.theme),fontWeight:d().Ue.medium},onClick:()=>{return e=this.environment,void f().w1(e);var e},disabled:!e,children:[(0,w.jsx)(c()._H,{defaultMessage:"More",id:"mobileActionBar.more.buttonTitle"}),(0,w.jsx)(Fe,{})]})]})}renderTextActions(){const e=this.canTriggerTextActionsStore.state,t=this.hasMultiBlockSelectionStore.state,o=this.props.currentBlockStore.canComment(),i=U().default.state.stores[0],a={display:"flex",alignItems:"center",padding:"0 8px",whiteSpace:"nowrap"};return(0,w.jsxs)("div",{style:Pe(),onScroll:this.handleActionsScrollDebounced,children:[o&&!H().Z.state.isOpen&&(0,w.jsx)(z().Z,{style:Ne(this.environment.device.isSmallPhone,this.theme),blockStore:U().default.state.stores[0],iconOnly:!1}),(0,w.jsx)($().Z,{type:"b",style:Ne(this.environment.device.isSmallPhone,this.theme),onClick:()=>Ze("bold",this.environment),disabled:!e,children:(0,w.jsx)("span",{style:{fontWeight:d().Ue.semibold},children:(0,w.jsx)(c()._H,{defaultMessage:"B",id:"mobileActionBar.bold.symbol"})})}),(0,w.jsx)($().Z,{type:"i",style:Ne(this.environment.device.isSmallPhone,this.theme),onClick:()=>Ze("italic",this.environment),disabled:!e,children:(0,w.jsx)("span",{style:{fontStyle:"italic",fontWeight:d().Ue.semibold},children:(0,w.jsx)(c()._H,{defaultMessage:"i",id:"mobileActionBar.italic.symbol"})})}),(0,w.jsx)($().Z,{type:"_",style:Ne(this.environment.device.isSmallPhone,this.theme),onClick:()=>Ze("underline",this.environment),disabled:!e,children:(0,w.jsx)("span",{style:{textDecoration:"underline"},children:(0,w.jsx)(c()._H,{defaultMessage:"U",id:"mobileActionBar.underline.symbol"})})}),(0,w.jsx)($().Z,{type:"s",style:Ne(this.environment.device.isSmallPhone,this.theme),onClick:()=>Ze("strike_through",this.environment),disabled:!e,children:(0,w.jsx)("span",{style:{textDecoration:"line-through"},children:(0,w.jsx)(c()._H,{defaultMessage:"S",id:"mobileActionBar.strikeThrough.symbol"})})}),(0,w.jsx)(q().Z,{mobileFeedback:!0,disabledFeedback:!0,style:a,disabled:!m().gq(i),onClick:()=>Le(this.environment),children:Se}),(0,w.jsx)(q().Z,{mobileFeedback:!0,disabledFeedback:!0,style:{...a,borderRight:Re(this.theme)},disabled:!m().nt(i),onClick:()=>Ee(this.environment),children:ke}),(0,w.jsx)($().Z,{type:"c",style:Ne(this.environment.device.isSmallPhone,this.theme),onClick:()=>Ze("code",this.environment),disabled:!e,children:(0,w.jsx)("span",{style:{fontFamily:d().F5(n().locale).githubMono},children:(0,w.jsx)(c()._H,{defaultMessage:"Code",id:"mobileActionBar.code.symbol"})})}),(0,w.jsx)(X().Z,{style:Ne(this.environment.device.isSmallPhone,this.theme),disabled:!e||t,children:(0,w.jsx)("span",{style:{borderBottom:`1px solid ${this.theme.linkDecorationColor}`},children:(0,w.jsx)(c()._H,{defaultMessage:"Link",id:"mobileActionBar.link.symbol"})})}),(0,w.jsx)(Y().Z,{onClick:()=>Ze("equation",this.environment),disabled:!e||t,style:Ne(this.environment.device.isSmallPhone,this.theme),children:(0,C().G)({width:16,height:16})}),(0,w.jsx)(G().Z,{style:Ne(this.environment.device.isSmallPhone,this.theme),disabled:!e})]})}}function xe(e){return(0,S().E)("mobile_action_bar_fc_gate")?(0,w.jsx)(te,{...e}):(0,w.jsx)(ye,{...e})}ye.displayName="MobileActionBar";const Se=B({width:18,height:18,transform:"rotate(90deg)",position:"relative",left:1}),ke=B({width:18,height:18,transform:"rotate(-90deg)",position:"relative",left:-1}),Ce=A({width:18,height:18,position:"relative",left:2}),Te=A({width:18,height:18,transform:"rotate(180deg)",position:"relative",left:2}),Me=(0,V().s)({width:19,height:19}),we=(0,I().N)({width:19,height:19}),Be=(0,R().y)({width:18,height:18}),_e=(0,j().s)({width:18,height:18}),Ae=(0,Z().C)({width:14,height:14}),Ie=(0,_().z)({width:18,height:18}),je=(0,T().y)({width:18,height:18});function Pe(){return{flexGrow:1,flexShrink:1,marginRight:-1,display:"flex",overflowX:"auto",overflowY:"hidden",WebkitOverflowScrolling:"touch"}}function Ze(e,t){u().YO(t,{itemName:e})}function Re(e){return`1px solid ${e.regularDividerColor}`}function Ve(e,t,o){const{device:i,WindowSizeStore:n}=t;return{height:"100%",width:"100%",fontSize:15,display:"flex",boxShadow:e===v().nd.Bottom?o.bottomActionBarShadow:o.mediumBoxShadow,backgroundColor:o.keyboardActionBarBackground,paddingLeft:i.isMobileNative?n.state.paddingLeftCSS:0,paddingRight:i.isMobileNative?n.state.paddingRightCSS:0}}function Fe(){const e=(0,s().Fg)();return(0,k().i)({width:10,marginLeft:4,fill:e.lightIconColor})}function Le(e){f().$$(e)}function Ee(e){f().O2(e)}function Ne(e,t){return{display:"flex",alignItems:"center",justifyContent:"center",paddingLeft:e?8:10,paddingRight:e?8:10,borderRight:Re(t),whiteSpace:"nowrap",height:ve,flexShrink:0,flexGrow:0,flexBasis:"auto",color:t.regularTextColor,minWidth:e?42:44}}function Oe(e,t){b().ZH({environment:t}),e.store.setState({...e.store.state,isInsertOpen:!1}),Ze("hide_keyboard",t),p().blurActiveElement()}function He(){const e=(0,s().Fg)(),t=(0,a().O7)(),o=(0,r().VK)((()=>t.device.isSmallPhone),[t]),i=(0,r().VK)((()=>g().L0()),[]),n=(0,r().VK)((()=>g().AZ()),[]);return(0,w.jsxs)("div",{style:{...Ne(o,e),paddingLeft:6,paddingRight:6},children:[(0,w.jsx)(q().Z,{mobileFeedback:!0,disabledFeedback:!0,style:fe,disabled:!i,onClick:()=>function(e){f().i2(e)}(t),children:Me}),(0,w.jsx)(q().Z,{mobileFeedback:!0,disabledFeedback:!0,style:fe,disabled:!n,onClick:()=>function(e){f().GH(e)}(t),children:we})]})}function Ue(e){let{stores:t}=e;const o=(0,s().Fg)(),i=(0,a().O7)(),n=(0,r().VK)((()=>i.device.isSmallPhone),[i]);return(0,w.jsx)("div",{style:{flexGrow:1,flexShrink:1,marginRight:-1,display:"flex",overflowX:"auto",overflowY:"hidden",WebkitOverflowScrolling:"touch"},children:(0,w.jsxs)(q().Z,{mobileFeedback:!0,disabledFeedback:!0,style:{...Ne(n,o),borderRight:"none",fontWeight:d().Ue.medium},onClick:e=>{O().Z.setState({open:!0}),Ze("templates",i)},children:[(0,P().i)({width:20,marginRight:8}),(0,w.jsx)(c()._H,{defaultMessage:"Choose a template...",id:"mobileActionBar.templates.buttonTitle"}),(0,w.jsx)(Fe,{})]})})}function De(e){let{canTriggerBlockActionsStore:t}=e;const o=(0,s().Fg)(),i=(0,a().O7)(),n=(0,r().Kw)(t),l=(0,r().VK)((()=>U().default.state.stores[0]),[]),c=(0,r().VK)((()=>m().gq(l)),[l]),d=(0,r().VK)((()=>m().nt(l)),[l]),u=(0,r().VK)((()=>i.device.isSmallPhone),[i]);return(0,w.jsxs)("div",{style:{...Ne(u,o),paddingLeft:6,paddingRight:6},children:[(0,w.jsx)(q().Z,{mobileFeedback:!0,disabledFeedback:!0,style:fe,disabled:!n||!c,onClick:()=>Le(i),children:Se}),(0,w.jsx)(q().Z,{mobileFeedback:!0,disabledFeedback:!0,style:fe,disabled:!n||!d,onClick:()=>Ee(i),children:ke}),(0,w.jsx)(q().Z,{mobileFeedback:!0,disabledFeedback:!0,style:fe,disabled:!n,onClick:()=>function(e){f().s0(e)}(i),children:Ce}),(0,w.jsx)(q().Z,{mobileFeedback:!0,disabledFeedback:!0,style:fe,disabled:!n,onClick:()=>function(e){f().rZ(e)}(i),children:Te})]})}},166350:(e,t,o)=>{o.r(t),o.d(t,{default:()=>j});var i=o(667294),n=()=>o(219727),a=()=>o(142735),r=()=>o(846550),s=()=>o(788860),l=()=>o(159357),c=()=>o(69863),d=()=>o(790082),u=()=>o(241516),m=()=>o(352230),g=()=>o(233936),b=()=>o(10271),p=()=>o(487424),h=()=>o(104088),f=()=>o(263184);class v extends f().default{getInitialState(){return{}}}const y=v;class x extends f().default{getInitialState(){return{isOpen:!1,isInsertOpen:!1,isTurnIntoOpen:!1,isColorOpen:!1,isTemplatesOpen:!1}}}const S=x;var k=()=>o(253225),C=()=>o(965903),T=()=>o(149809),M=()=>o(198829),w=()=>o(470386),B=()=>o(967092),_=()=>o(293660),A=()=>o(997823),I=o(785893);const j=function(e){let{currentBlockStore:t,makeActionBarComponent:r,isNativeMobileActionBar:s}=e;const l=(0,n().O7)(),c=(0,o(657320).l)(),d=(0,a().qz)(void 0,o(692304).Z),u=(0,a().qz)(void 0,y),m=(0,a().qz)(void 0,S),p=(0,a().VK)((()=>g().$3(l,t,null==c?void 0:c.publicEditModeStore.state)),[l,t,c]),{shouldShow:h}=p,{device:f,WindowSizeStore:v}=l,x=(0,a().VK)((()=>function(e,t,o){const{device:i}=e;return i.isMobileBrowser?t.state.isOpen:o}(l,m,h)),[l,m,h]),k=(0,a().VK)((()=>v.state.paddingBottomCSS),[v]),C=l.NativeMobileActionBarStore,T=(0,a().VK)((()=>g().c7(l)),[l]),M=(0,a().VK)((()=>"editing"!==o(127519).default.state.mode&&!(null==C||!C.state.shouldRestoreSelectionForMenu)),[C]);return(0,b().Z)({shouldPreserveTextSelection:T,shouldPreserveBlockSelection:!1,shouldRestoreSelection:M}),(0,I.jsxs)(i.Fragment,{children:[(0,I.jsx)(o(681074).Z,{capture:!0,render:e=>(0,I.jsxs)("div",{...e,style:{position:"relative",width:"100%",height:0,zIndex:o(492522).Eo},children:[r({store:m,ignoreSelectionAreaStore:u,templatePickerMenuListStore:d}),!s&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(Z,{store:m}),(0,I.jsx)(R,{store:m}),(0,I.jsx)(V,{store:m})]}),(0,I.jsx)(F,{})]})}),!x&&f.isIPhoneX&&f.isNative&&(0,I.jsx)("div",{style:{position:"absolute",bottom:0,background:"transparent",height:k,width:"100%",pointerEvents:"none",userSelect:"none"}})]})};function P(e){e.setState({...e.state,isInsertOpen:!1})}function Z(e){let{store:t}=e;const o=(0,n().O7)(),r=(0,i.useCallback)((()=>P(t)),[t]),{device:l}=o,d=(0,a().VK)((()=>t.state.isInsertOpen),[t]),u=(0,i.useMemo)((()=>(0,c().PU)(o)),[o]),{insertActions:g}=(0,a().Kw)(u);return(0,I.jsx)(B().ZP,{popupType:l.isMobile?h().k.SlideUp:h().k.Popup,preventBlockRenderQueueOnEnter:!0,open:d,keepFocus:!0,onDismiss:()=>{P(t)},render:()=>(0,I.jsx)(M().Z,{menuType:m().o.Modal,title:(0,I.jsx)(s()._H,{defaultMessage:"Insert block",id:"mobileActionBar.insertBlock.modalTitle"}),right:(0,I.jsx)(w().CancelMenuText,{}),onClickRight:()=>{P(t)},children:(0,I.jsx)(T().Z,{sections:g,context:{environment:o,blocks:C().default.state.stores,publicEditMode:void 0},onAccept:r})})})}function R(e){let{store:t}=e;const o=(0,n().O7)(),r=(0,i.useCallback)((()=>function(e){e.setState({...e.state,isTurnIntoOpen:!1})}(t)),[t]),l=(0,a().VK)((()=>t.state.isTurnIntoOpen),[t]);(0,b().Z)({shouldPreserveTextSelection:l,shouldPreserveBlockSelection:!1,shouldRestoreSelection:!0});const{device:c}=o;return(0,I.jsx)(B().ZP,{popupType:c.isMobile?h().k.SlideUp:h().k.Popup,open:l,keepFocus:!0,onDismiss:r,preventBlockRenderQueueOnEnter:!0,render:()=>(0,I.jsx)(M().Z,{menuType:m().o.Modal,title:(0,I.jsx)(s()._H,{defaultMessage:"Turn into",id:"mobileActionBar.turnInto.modalTitle"}),right:(0,I.jsx)(w().CancelMenuText,{}),onClickRight:r,children:(0,I.jsx)(T().Z,{sections:[{...d().gH,title:""}],context:{environment:o,blocks:C().default.state.stores,publicEditMode:void 0},onAccept:r})})})}function V(e){let{store:t}=e;const o=(0,n().O7)(),r=(0,i.useCallback)((()=>function(e){e.setState({...e.state,isColorOpen:!1})}(t)),[t]),{device:c}=o,d=(0,a().VK)((()=>t.state.isColorOpen),[t]);return(0,b().Z)({shouldPreserveTextSelection:d,shouldPreserveBlockSelection:!1,shouldRestoreSelection:!0}),(0,I.jsx)(B().ZP,{popupType:c.isMobile?h().k.SlideUp:h().k.Popup,open:d,keepFocus:!0,onDismiss:r,preventBlockRenderQueueOnEnter:!0,render:()=>(0,I.jsx)(M().Z,{menuType:m().o.Modal,title:(0,I.jsx)(s()._H,{defaultMessage:"Block color",id:"mobileActionBar.blockColor.modalTitle"}),right:(0,I.jsx)(w().CancelMenuText,{}),onClickRight:r,children:(0,I.jsx)(T().Z,{sections:[l().te,l().rz,l().Vm],context:{environment:o,blocks:C().default.state.stores,publicEditMode:void 0},onAccept:r})})})}function F(){const e=(0,n().O7)(),t=(0,r().yK)((e=>({popupStyles:{background:e.contentBackground}})),[]),o=(0,i.useCallback)((()=>function(e,t){const o=k().Z.state.isFromNativeHome;k().Z.setState({open:!1}),t.shouldCancel&&o&&(0,A().handleCancelQuickAdd)(e,{isMobileHorizon1QuickCapture:!1})}(e,{shouldCancel:!0})),[e]),{isTemplatesOpen:l}=(0,a().VK)((()=>({isTemplatesOpen:k().Z.state.open})),[]),{device:c}=e;return(0,I.jsx)(B().ZP,{popupType:c.isMobile?h().k.SlideUp:h().k.Popup,open:l,onDismiss:o,keepFocus:!0,style:t.popupStyles,render:()=>(0,I.jsx)(M().Z,{menuType:m().o.Modal,whiteBackground:!0,disableHeaderShadow:l,hideMobileTopbar:l,title:(0,I.jsx)(s()._H,{defaultMessage:"Templates",id:"mobileActionBar.templates.modalTitle"}),right:(0,I.jsx)(_().CloseTemplatesPopupComponent,{handleClick:o,style:{marginRight:20}}),disableScroller:!0,onClickRight:o,shouldRenderRightDirectly:!0,onCancel:o,forceFullScreenSlideUp:!0,children:(0,I.jsx)(p().Z,{onTemplateItemSelect:t=>{u().openWithItem({environment:e,item:t,createNewPage:!1,isPrivate:!1,disablePointerEvents:!0})},onClose:o})})})}},414236:(e,t,o)=>{o.r(t),o.d(t,{default:()=>_});var i=o(667294),n=()=>o(219727),a=()=>o(142735),r=()=>o(846550),s=()=>o(492522),l=()=>o(353141),c=()=>o(207874),d=()=>o(278275),u=()=>o(247724),m=()=>o(118761),g=()=>o(827282),b=o(785893);const p=(0,g().IU)("mobileBottomBarAddPage",{viewBox:"0 0 26 26",svg:(0,b.jsx)("path",{d:"M22.5713 3.95215L23.3447 3.15722C23.71 2.78125 23.7207 2.25488 23.3555 1.90039L23.1084 1.64258C22.7754 1.30957 22.2383 1.35254 21.8945 1.69629L21.1104 2.46972L22.5713 3.95215ZM10.207 15.124L12.3018 14.2109L21.7764 4.73633L20.3047 3.28613L10.8408 12.7607L9.87402 14.7803C9.78809 14.9629 10.0029 15.21 10.207 15.124ZM5.74902 23.1162H18.3604C20.2832 23.1162 21.4111 21.999 21.4111 19.7861V7.83008L19.6816 9.55957V19.7002C19.6816 20.8174 19.0693 21.3867 18.3281 21.3867H5.77051C4.69629 21.3867 4.10547 20.8174 4.10547 19.7002V7.50781C4.10547 6.39062 4.69629 5.81054 5.77051 5.81054H15.0625L16.792 4.08105H5.74902C3.50391 4.08105 2.37598 5.19824 2.37598 7.41113V19.7861C2.37598 22.0098 3.50391 23.1162 5.74902 23.1162Z"})}),h=(0,g().IU)("mobileBottomBarRedo",{viewBox:"0 0 26 26",svg:(0,b.jsx)("path",{d:"M2.84863 17.498C2.84863 21.6123 5.54492 24.3516 10.3574 24.3516H12.8389C13.4297 24.3516 13.8164 23.9219 13.8164 23.3955C13.8164 22.8691 13.4297 22.4395 12.8389 22.4395H10.3682C6.70508 22.4395 4.76074 20.291 4.76074 17.3906C4.76074 14.501 6.70508 12.4814 10.3682 12.4814H17.7373L20.2617 12.374L18.2207 14.1143L15.127 17.1328C14.9551 17.3047 14.8691 17.5088 14.8691 17.7881C14.8691 18.3467 15.2451 18.7334 15.8145 18.7334C16.0508 18.7334 16.3301 18.626 16.5127 18.4326L22.8291 12.2344C23.0439 12.0303 23.1514 11.7832 23.1514 11.5254C23.1514 11.2568 23.0439 11.0098 22.8291 10.8057L16.5127 4.60742C16.3301 4.4248 16.0508 4.30664 15.8145 4.30664C15.2451 4.30664 14.8691 4.69336 14.8691 5.25195C14.8691 5.53125 14.9551 5.73535 15.127 5.90723L18.2207 8.93652L20.2617 10.6768L17.7373 10.5586H10.5293C5.62012 10.5586 2.84863 13.3945 2.84863 17.498Z"})});var f=()=>o(730509);const v=(0,g().IU)("mobileBottomBarUndo",{viewBox:"0 0 26 26",svg:(0,b.jsx)("path",{d:"M23.1514 17.498C23.1514 13.3945 20.3691 10.5586 15.4707 10.5586H8.25195L5.73828 10.6768L7.76855 8.93652L10.873 5.90723C11.0342 5.73535 11.1309 5.53125 11.1309 5.25195C11.1309 4.69336 10.7549 4.30664 10.1748 4.30664C9.94922 4.30664 9.66992 4.4248 9.4873 4.60742L3.1709 10.8057C2.95605 11.0098 2.84863 11.2568 2.84863 11.5254C2.84863 11.7832 2.95605 12.0303 3.1709 12.2344L9.4873 18.4326C9.66992 18.626 9.94922 18.7334 10.1748 18.7334C10.7549 18.7334 11.1309 18.3467 11.1309 17.7881C11.1309 17.5088 11.0342 17.3047 10.873 17.1328L7.76855 14.1143L5.73828 12.374L8.25195 12.4814H15.6318C19.2949 12.4814 21.2285 14.501 21.2285 17.3906C21.2285 20.291 19.2949 22.4395 15.6318 22.4395H13.1611C12.5703 22.4395 12.1836 22.8691 12.1836 23.3955C12.1836 23.9219 12.5703 24.3516 13.1611 24.3516H15.6426C20.4443 24.3516 23.1514 21.6123 23.1514 17.498Z"})});var y=()=>o(280056),x=()=>o(793935),S=()=>o(297861),k=()=>o(876822),C=()=>o(302353);const T=new(o(435308).default)((()=>{const{phase:e}=C().default.state;if(o(609306).default.state.open)return!0;return(0,S().Y)("supportsFixedSizeWebView")||e===C().i.hidden||e===C().i.willHide}),{debugName:"MobileBottomBarStore"});var M=()=>o(154186),w=()=>o(759469);const B=54;const _=function(){const e=(0,r().Fg)(),t=(0,n().O7)(),i=(0,a().Kw)(T),l=(0,S().Y)("supportsNativeBottomBar"),{isTablet:c}=(0,n().Fy)(),d=(0,a().VK)((()=>function(e,t,o){const{WindowSizeStore:i}=t,{isTablet:n}=t.device;return{position:"absolute",left:0,right:0,bottom:0,display:"flex",justifyContent:n?"flex-start":"space-around",height:i.getSafePaddingBottomCSS(y().VG),paddingBottom:i.state.paddingBottomCSS,background:o.contentBackground,borderTop:`1px ${o.darkDividerColor} solid`,zIndex:s().D_,pointerEvents:e?"auto":"none",cursor:"pointer"}}(i,t,e)),[i,t,e]),m=(0,o(466970).E)("tablet_refresh_gate");return!i||c&&m?null:l?(0,b.jsx)("div",{className:u().alX,children:(0,b.jsx)(A,{})}):(0,b.jsx)("div",{style:d,className:u().rKl,children:c?(0,b.jsx)(V,{}):(0,b.jsx)(R,{})})};function A(){const e=(0,n().O7)(),t=(0,a().VK)((()=>e.device.isTablet),[e]);return(0,b.jsx)(w().Z,{format:t?m().EX.MobileBottomBarTablet:m().EX.MobileBottomBarPhone})}function I(e){return{width:26,fill:e.regularTextColor}}function j(){const e=(0,r().Fg)(),t=(0,n().O7)(),o=(0,a().VK)((()=>function(e){const{WindowSizeStore:t}=e,{isTablet:o}=e.device;return{display:"flex",alignItems:"center",justifyContent:"flex-start",flex:1,paddingLeft:t.getSafePaddingLeftCSS(18),...o&&{flex:"none",paddingLeft:2,width:B,justifyContent:"center"}}}(t)),[t]);return(0,b.jsx)(M().Z,{style:o,onClick:()=>function(e){d().Kf({environment:e,analyticsFrom:"mobile-bottom-bar"}),l().nB(e,{itemName:"search"})}(t),mobileFeedback:!0,children:(0,f().w)(I(e))})}function P(){const e=(0,r().Fg)(),t=(0,n().O7)(),o=(0,a().VK)((()=>function(e){const{WindowSizeStore:t}=e;return{display:"flex",alignItems:"center",justifyContent:"flex-start",flex:"none",paddingLeft:t.getSafePaddingLeftCSS(18),width:B}}(t)),[t]),s=(0,a().VK)((()=>c().L0()),[]),d=(0,a().VK)((()=>c().AZ()),[]);return(0,b.jsxs)(i.Fragment,{children:[(0,b.jsx)(M().Z,{style:o,onClick:()=>function(e){c().Yw(e,!0),l().nB(e,{itemName:"undo"})}(t),mobileFeedback:!0,disabled:!s,disabledFeedback:!0,children:v(I(e))}),(0,b.jsx)(M().Z,{style:{display:"flex",alignItems:"center",justifyContent:"center",flex:"none",width:B,paddingRight:4},onClick:()=>function(e){c().KX(e,!0),l().nB(e,{itemName:"redo"})}(t),mobileFeedback:!0,disabled:!d,disabledFeedback:!0,children:h(I(e))})]})}function Z(){const e=(0,r().Fg)(),t=(0,n().O7)(),o=(0,a().VK)((()=>function(e){const{WindowSizeStore:t}=e,{isTablet:o}=e.device;return{display:"flex",alignItems:"center",justifyContent:"flex-end",flex:1,paddingRight:t.getSafePaddingRightCSS(18),...o&&{justifyContent:"center",flex:"none",paddingRight:0,width:B,marginRight:"auto"}}}(t)),[t]),i=(0,a().VK)((()=>Boolean(k().default.state.currentSpaceStore&&k().default.state.currentSpaceStore.canEdit())),[]);return(0,b.jsx)(M().Z,{style:o,onClick:()=>function(e){x().quickAddPage({environment:e,from:"mobile_bottom_bar"}),l().nB(e,{itemName:"add_page"})}(t),mobileFeedback:!0,disabled:!i,disabledFeedback:!0,children:p(I(e))})}function R(){return(0,b.jsxs)(i.Fragment,{children:[(0,b.jsx)(j,{}),(0,b.jsx)(A,{}),(0,b.jsx)(Z,{})]})}function V(){return(0,b.jsxs)(i.Fragment,{children:[(0,b.jsx)(j,{}),(0,b.jsx)(A,{}),(0,b.jsx)(Z,{}),(0,b.jsx)(P,{})]})}},723912:(e,t,o)=>{o.r(t),o.d(t,{MobileNativeFullPageComponents:()=>I});var i=o(667294),n=()=>o(219727),a=()=>o(142735),r=()=>o(317924),s=()=>o(543172),l=()=>o(302485),c=()=>o(118761),d=()=>o(436605),u=()=>o(106342),m=()=>o(726143),g=()=>o(252097),b=()=>o(379072),p=()=>o(705111),h=o(785893);const f=function(){const e=(0,n().O7)(),[t,s]=(0,i.useState)(!1),l=(0,a().VK)((()=>p().g.state),[]),c=(0,a().VK)((()=>(0,r().w_)(e.TabbedRouterStore.state)),[e]),d=(0,a().VK)((()=>{var e,t;return Boolean("web"===c.type&&("nativeTab"===c.route.name&&"assistant"===c.route.tab||"nativeTab"===(null===(e=c.redirectedTo)||void 0===e?void 0:e.route.name)&&"assistant"===(null===(t=c.redirectedTo)||void 0===t?void 0:t.route.tab)))}),[c]),u=(0,a().VK)((()=>e.WindowSizeStore.state.paddingTopCSS),[e.WindowSizeStore]),f=(0,o(76225).Ij)(),v=(0,a().VK)((()=>({paddingLeft:e.WindowSizeStore.state.paddingLeftCSS,paddingRight:e.WindowSizeStore.state.paddingRightCSS})),[e]);return(0,o(801812).r5)((async()=>{const{assistantActions:t}=await o(650996).assistantDependency.load(),i=b().default.getActiveSessionId();if(g().d.setState({...g().d.state,from:l.from??"mobile_app_start"}),!i||l.shouldReset){var n;p().g.update((e=>({...e,shouldReset:!1})));const i=Boolean(l.query&&l.query.length>o(278275).LR),a=i?void 0:l.query;(0,o(789168).setPrimeTextInput)(a);const r=b().default.getNextSessionId();if(i){const i=await t.resetAndInitializeAssistantSession({environment:e});await t.commitHumanStep({environment:e,text:(0,o(955620).TPx)(l.query),sessionId:i.sessionId,assistantSurfaceType:"mobileNative"})}const c=null===(n=b().default.getSessionContext(r))||void 0===n||null===(n=n.assistantConfigurationStore)||void 0===n?void 0:n.state,d=b().default.getSessionContext(r);o(236692).trackAssistantOpened(e,{hasQuery:i,from:l.from??"mobile_app_start",searchSessionId:l.searchSessionId,isReminder:!1,reminderType:void 0,sessionId:r,startTimestamp:(null==c?void 0:c.sessionStartTimestamp)||Date.now(),transcript:(null==d?void 0:d.evaluator.getTranscript())||[]}),s(!0)}else d&&s(!0)}),[l.shouldReset,l.query,l.from,l.searchSessionId,d,e]),(0,i.useEffect)((()=>{d&&o(316773).assistantMenuActions.navigateToView({view:"chat"})}),[d]),(0,i.useEffect)((()=>{var o;d&&t&&(null===(o=e.mobileNative)||void 0===o||o.markTransitionReady({type:"assistant"}))}),[e.mobileNative,d,t]),(0,h.jsx)(o(681074).Z,{capture:!0,render:t=>(0,h.jsx)("div",{style:{paddingTop:u,paddingBottom:f,...v,flex:1,minWidth:0},...t,children:(0,h.jsx)(m().JU,{surface:m().FP.mobileNative,children:(0,h.jsx)(o(442298).Q,{onClose:()=>o(497065).op(e)})})})})};var v=()=>o(788860),y=()=>o(96271),x=()=>o(352230),S=()=>o(198829),k=()=>o(67961),C=()=>o(504117);function T(){return(0,h.jsx)(C().ZP,{children:(0,h.jsx)(k().Z,{isSmall:!0,style:{textAlign:"center"},children:(0,h.jsx)(v()._H,{defaultMessage:"Please go online to manage members.",id:"mobileMembers.goOnline.prompt"})})})}function M(e){y().navigateToHomeTab(e)}const w=function(){const e=(0,n().O7)(),t=(0,a().VK)((()=>o(876822).default.state.currentSpaceStore),[]),r=(0,o(940823).Q)(),s=(0,a().VK)((()=>o(804217).default.state.online),[]);if((0,i.useEffect)((()=>{t&&o(576387).OR({environment:e,spaceId:t.id})}),[e,t]),!r||!t)return null;if(s){const i={menuType:x().o.Modal,title:(0,h.jsx)(v()._H,{defaultMessage:"Members",id:"mobileMembers.mobileMemberSettings.title"}),right:(0,h.jsx)(v()._H,{defaultMessage:"Done",id:"mobileMembers.rightActionButton.done"}),onClickRight:()=>M(e),onCancel:()=>M(e)};return(0,h.jsx)(S().Z,{...i,children:(0,h.jsx)(o(18729).Z,{store:t,isMobile:!0})})}return(0,h.jsx)(T,{})};var B=()=>o(282833);const _=function(){const e=(0,n().O7)(),t=(0,i.useCallback)((()=>{y().navigateToHomeTab(e)}),[e]),{isTemplatesOpen:r}=(0,a().VK)((()=>({isTemplatesOpen:o(253225).Z.state.open})),[]);return(0,h.jsx)(S().Z,{menuType:x().o.Modal,whiteBackground:!0,disableHeaderShadow:r,hideMobileTopbar:!0,title:(0,h.jsx)(v()._H,{defaultMessage:"Templates",id:"mobileActionBar.templates.modalTitle"}),right:(0,h.jsx)(o(293660).CloseTemplatesPopupComponent,{handleClick:t,style:{marginRight:20}}),disableScroller:!0,onClickRight:t,shouldRenderRightDirectly:!0,onCancel:t,forceFullScreenSlideUp:!0,children:(0,h.jsx)(o(487424).Z,{onTemplateItemSelect:t=>{o(241516).openWithItem({environment:e,item:t,createNewPage:!0,isPrivate:!0,disablePointerEvents:!0})},onClose:t})})};var A=()=>o(759469);function I(e){const t=(0,n().O7)(),[o,m]=(0,i.useState)(""),g=(0,a().VK)((()=>{const e=(0,r().w_)(t.TabbedRouterStore.state);if("web"===e.type){var o,i;if("nativeTab"===(null===(o=e.redirectedTo)||void 0===o?void 0:o.route.name))return null===(i=e.redirectedTo)||void 0===i?void 0:i.route.tab;if("nativeTab"===e.route.name)return e.route.tab}}),[t]);(0,i.useEffect)((()=>{var e;o!==g||"trash"!==g&&"members"!==g&&"help"!==g&&"templates"!==g||(null===(e=t.mobileNative)||void 0===e||e.markTransitionReady({type:g}))}),[t.mobileNative,g,o]);const{route:b}=e;return(0,i.useEffect)((()=>{m(b.tab)}),[b.tab]),"updates"===b.tab?(0,h.jsx)(A().Z,{format:c().EX.RenderAsPage,renderId:(0,s().ZP)()}):"assistant"===b.tab?(0,h.jsx)(f,{}):"trash"===b.tab?(0,h.jsx)("div",{style:{width:"100%"},children:(0,h.jsx)(u().U1,{})}):"settings"===b.tab?(0,h.jsx)("div",{style:{width:"100%"},children:(0,h.jsx)(B().i,{})}):"members"===b.tab?(0,h.jsx)("div",{style:{width:"100%"},children:(0,h.jsx)(w,{})}):"help"===b.tab?(0,h.jsx)("div",{style:{width:"100%"},children:(0,h.jsx)(l().F,{})}):"templates"===b.tab?(0,h.jsx)("div",{style:{width:"100%"},children:(0,h.jsx)(_,{})}):"offline"===b.tab?(0,h.jsx)("div",{style:{width:"100%"},children:(0,h.jsx)(d().dv,{})}):null}},320662:(e,t,o)=>{o.r(t),o.d(t,{NativeMobileActionBar:()=>He});o(267602),o(916054),o(749411),o(30005),o(241792),o(228244);var i=o(667294),n=()=>o(488858),a=()=>o(219727),r=()=>o(70186),s=()=>o(657320),l=()=>o(142735),c=()=>o(156642),d=()=>o(956057),u=(o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(653476),o(470928),()=>o(568017)),m=()=>o(696459),g=()=>o(714230),b=(o(731107),()=>o(957042)),p=()=>o(124199);function h(e,t,o){const{content:i,apiRequestValue:n}=o;return{id:e,content:i,action:{type:t,apiRequestValue:n}}}function f(e,t,o,i,n){return h(e,"webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:t},accessibilityText:n,selected:i},apiRequestValue:{menuType:o,actionId:e,context:void 0}})}function v(e,t,o,i,n){return h(e,"webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:t},accessibilityText:n,selected:i},apiRequestValue:{menuType:o,actionId:e,context:void 0}})}const y=["insertBlock","turnInto","textColor","textSelectionColor"];const x=["suggested","textFormatting","slashMenu","turnInto","textColor","textSelectionColor","more"];function S(e,t){return{type:e,apiRequestValue:t}}function k(e,t){const o={from:t,data:e};return JSON.stringify(o)}const C=p().object({required:{data:p().object({required:{action:p().literals("bold","italic","underline","strikethrough","link","code","equation","mention","trash","comment","filePicker","indent","unindent","moveUp","moveDown","undo","redo","dismissKeyboard","more","ai","voiceInput","filing","templates","todoListTemplate","weeklyPlanTemplate","copyLinkToBlock")},optional:{}})},optional:{from:p().literals("mobile_action_bar","mobile_text_formatting_menu")}});let T=function(e){return e[e.InvalidActionType=0]="InvalidActionType",e[e.MissingPayload=1]="MissingPayload",e[e.InvalidRequestType=2]="InvalidRequestType",e[e.InvalidData=3]="InvalidData",e}({});class M{constructor(e,t){this.type=e,this.message=t}}function w(e){return 0===e.reduce(((e,t)=>e+t.items.length),0)}const B=h("mab.button.back","nativeAction_setSubMenuType",{content:{type:"icon",imageReference:{sfProGlyphName:"chevron.backward.2",localImageIdentifier:"back"},accessibilityText:""},apiRequestValue:{subMenuType:void 0,context:void 0}});h("mab.button.noResults","nativeAction_setSubMenuType",{content:{type:"text_and_icon",imageReference:{},accessibilityText:"",text:"No results",fullWidth:!0,disabled:!0},apiRequestValue:{subMenuType:void 0,context:void 0}});function _(e,t,o,i){return h("mab.button.indent","webAction_generic",{content:{type:"icon",imageReference:i,disabled:e||t,accessibilityText:o},apiRequestValue:{jsonPayload:k({action:"indent"}),context:void 0}})}function A(e,t,o,i){return h("mab.button.unindent","webAction_generic",{content:{type:"icon",imageReference:i,accessibilityText:o,disabled:e||t},apiRequestValue:{jsonPayload:k({action:"unindent"}),context:void 0}})}function I(e,t,o){return h("mab.button.moveUp","webAction_generic",{content:{type:"icon",imageReference:o,accessibilityText:t,disabled:e},apiRequestValue:{jsonPayload:k({action:"moveUp"}),context:void 0}})}function j(e,t,o){return h("mab.button.moveDown","webAction_generic",{content:{type:"icon",imageReference:o,accessibilityText:t,disabled:e},apiRequestValue:{jsonPayload:k({action:"moveDown"}),context:void 0}})}function P(e){const{createAIAction:t,createDictationAction:o,disableDictationActions:i,disableTextActions:n,disableAIAction:a,disableBlockActions:r,disableCommentAction:s,disableMentionAction:l,disableInsertBlockAction:c,disableTurnIntoAction:d,disableTextFormatting:m,disableTextColorAction:b,disableDeleteBlock:p,disableUndo:y,disableRedo:x,disableIndent:S,disableUnindent:C,disableLinkAction:T,disableCopyLinkToBlock:M,disableEquationAction:w,isEditingTitle:B,selectedMenuType:P,isPersonalizedActionsEnabled:Z,shouldShowTextActions:R,usePillStyling:V,textSelectionColor:F,textFormattingSelections:E,titleTexts:O,accessibilityTexts:H,theme:U}=e,D=R?"textSelectionColor":"textColor",q=function(e){const{usePillStyling:t,titleTexts:o}=e,i=t?"pill":"filled";return{todoListTemplate:h("mab.button.template.todolist","webAction_generic",{content:{type:"text_and_icon",text:o.todoListTemplate,style:i,imageReference:{sfProGlyphName:"checkmark.square",localImageIdentifier:"checkbox"}},apiRequestValue:{jsonPayload:k({action:"todoListTemplate"}),context:void 0}}),weeklyPlanTemplate:h("mab.button.template.weeklyPlan","webAction_generic",{content:{type:"text_and_icon",text:o.weeklyPlanTemplate,style:i,imageReference:{sfProGlyphName:"calendar",localImageIdentifier:"calendar"}},apiRequestValue:{jsonPayload:k({action:"weeklyPlanTemplate"}),context:void 0}}),templates:h("mab.buttonSection.template","webAction_generic",{content:{type:"text_and_icon",text:t?o.moreTemplates:o.template,style:i,imageReference:{sfProGlyphName:t?"ellipsis":void 0,localImageIdentifier:t?"ellipsis":"template"}},apiRequestValue:{jsonPayload:k({action:"templates"}),context:void 0}})}}({usePillStyling:V,titleTexts:O});return{ai:t?h("mab.button.ai","webAction_generic",{content:{type:"icon",imageReference:Z?{imageUrl:g().Z.images.mab.actions.aiFaceSvg,imageTintColor:(0,u().J1)(U.icon.secondary)}:{localImageIdentifier:"ai"},disabled:a,accessibilityText:H.ai},apiRequestValue:{jsonPayload:k({action:"ai"}),context:void 0}}):void 0,speech:o?h("mab.button.speech","webAction_generic",{content:{type:"icon",imageReference:Z?{imageUrl:g().Z.images.mab.actions.micSvg,imageTintColor:(0,u().J1)(U.icon.secondary)}:{sfProGlyphName:"mic.fill",localImageIdentifier:"micFilled"},style:V?"pill":void 0,accessibilityText:H.ai,disabled:i},apiRequestValue:{jsonPayload:k({action:"voiceInput"}),context:void 0}}):void 0,insert:h("mab.button.insert","nativeAction_setMenuType",{content:{type:"icon",imageReference:Z?{imageUrl:g().Z.images.mab.actions.plusSvg,imageTintColor:(0,u().J1)(U.icon.secondary)}:{sfProGlyphName:"plus",localImageIdentifier:"insertBlock"},accessibilityText:H.insert,disabled:r||c,selected:"insertBlock"===P},apiRequestValue:{menuType:"insertBlock",context:void 0}}),turnInto:h("mab.button.turnInto","nativeAction_setMenuType",{content:{type:"icon",imageReference:Z?{imageUrl:g().Z.images.mab.actions.turnIntoSvg,imageTintColor:(0,u().J1)(U.icon.secondary)}:{sfProGlyphName:"arrow.2.squarepath",localImageIdentifier:"turnInto"},disabled:r||d,selected:"turnInto"===P,accessibilityText:H.turnInto},apiRequestValue:{menuType:"turnInto",context:void 0}}),filePicker:h("mab.button.filePicker","webAction_generic",{content:{type:"icon",imageReference:Z?{imageUrl:g().Z.images.mab.actions.photoMultipleSvg,imageTintColor:(0,u().J1)(U.icon.secondary)}:{sfProGlyphName:"photo.on.rectangle.angled",localImageIdentifier:"filePicker"},style:V?"pill":void 0,disabled:!B&&r,accessibilityText:H.filePicker},apiRequestValue:{jsonPayload:k({action:"filePicker"}),context:void 0}}),mention:h("mab.button.mention","webAction_generic",{content:{type:"icon",imageReference:Z?{imageUrl:g().Z.images.mab.actions.mentionSvg,imageTintColor:(0,u().J1)(U.icon.secondary)}:{sfProGlyphName:"at",localImageIdentifier:"mention"},disabled:l,accessibilityText:H.mention},apiRequestValue:{jsonPayload:k({action:"mention"}),context:void 0}}),comment:h("mab.button.comment","webAction_generic",{content:{type:"icon",imageReference:Z?{imageUrl:g().Z.images.mab.actions.commentSvg,imageTintColor:(0,u().J1)(U.icon.secondary)}:{sfProGlyphName:"text.bubble",localImageIdentifier:"comment"},disabled:s,accessibilityText:H.comment},apiRequestValue:{jsonPayload:k({action:"comment"},"mobile_action_bar"),context:void 0}}),biu:h("bold.italic.underline","nativeAction_setSubMenuType",{content:{type:"icon",imageReference:Z?{imageUrl:g().Z.images.mab.actions.textFormattingSvg,imageTintColor:(0,u().J1)(U.icon.secondary)}:{sfProGlyphName:"textformat",localImageIdentifier:"textFormat"},disabled:m,accessibilityText:H.textFormatting},apiRequestValue:{subMenuType:"textFormatting",context:void 0}}),delete:h("mab.button.delete","webAction_generic",{content:{type:"icon",imageReference:Z?{imageUrl:g().Z.images.mab.actions.trashSvg,imageTintColor:(0,u().J1)(U.icon.secondary)}:{sfProGlyphName:"trash",localImageIdentifier:"trash"},disabled:p,accessibilityText:H.trash},apiRequestValue:{jsonPayload:k({action:"trash"}),context:void 0}}),undo:h("mab.button.undo","webAction_generic",{content:{type:"icon",imageReference:Z?{imageUrl:g().Z.images.mab.actions.undoSvg,imageTintColor:(0,u().J1)(U.icon.secondary)}:{sfProGlyphName:"arrow.uturn.backward",localImageIdentifier:"undo"},disabled:y,accessibilityText:H.undo},apiRequestValue:{jsonPayload:k({action:"undo"}),context:void 0}}),redo:h("mab.button.redo","webAction_generic",{content:{type:"icon",imageReference:Z?{imageUrl:g().Z.images.mab.actions.redoSvg,imageTintColor:(0,u().J1)(U.icon.secondary)}:{sfProGlyphName:"arrow.uturn.forward",localImageIdentifier:"redo"},disabled:x,accessibilityText:H.redo},apiRequestValue:{jsonPayload:k({action:"redo"}),context:void 0}}),more:h("mab.button.more","webAction_generic",{content:{type:"icon",imageReference:Z?{imageUrl:g().Z.images.mab.actions.moreSvg,imageTintColor:(0,u().J1)(U.icon.secondary)}:{sfProGlyphName:"ellipsis",localImageIdentifier:"ellipsis"},accessibilityText:H.more,disabled:r},apiRequestValue:{jsonPayload:k({action:"more"}),context:void 0}}),indent:_(r,S,H.indent,Z?{imageUrl:g().Z.images.mab.actions.indentSvg,imageTintColor:(0,u().J1)(U.icon.secondary)}:{sfProGlyphName:"increase.indent",localImageIdentifier:"indent"}),unindent:A(r,C,H.unindent,Z?{imageUrl:g().Z.images.mab.actions.outdentSvg,imageTintColor:(0,u().J1)(U.icon.secondary)}:{sfProGlyphName:"decrease.indent",localImageIdentifier:"unindent"}),moveUp:I(r,H.moveUp,Z?{imageUrl:g().Z.images.mab.actions.moveUpSvg,imageTintColor:(0,u().J1)(U.icon.secondary)}:{sfProGlyphName:"arrow.up.to.line.alt",localImageIdentifier:"moveUp"}),moveDown:j(r,H.moveDown,Z?{imageUrl:g().Z.images.mab.actions.moveDownSvg,imageTintColor:(0,u().J1)(U.icon.secondary)}:{sfProGlyphName:"arrow.down.to.line.alt",localImageIdentifier:"moveDown"}),indentPrioritized:L(_(r,S,H.indent,Z?{imageUrl:g().Z.images.mab.actions.indentSvg,imageTintColor:(0,u().J1)(U.icon.secondary)}:{sfProGlyphName:"increase.indent",localImageIdentifier:"indent"})),unindentPioritized:L(A(r,C,H.unindent,Z?{imageUrl:g().Z.images.mab.actions.outdentSvg,imageTintColor:(0,u().J1)(U.icon.secondary)}:{sfProGlyphName:"decrease.indent",localImageIdentifier:"unindent"})),moveUpPrioritized:L(I(r,H.moveUp,Z?{imageUrl:g().Z.images.mab.actions.moveUpSvg,imageTintColor:(0,u().J1)(U.icon.secondary)}:{sfProGlyphName:"arrow.up.to.line.alt",localImageIdentifier:"moveUp"})),moveDownPrioritized:L(j(r,H.moveDown,Z?{imageUrl:g().Z.images.mab.actions.moveDownSvg,imageTintColor:(0,u().J1)(U.icon.secondary)}:{sfProGlyphName:"arrow.down.to.line.alt",localImageIdentifier:"moveDown"})),color:Z?n||b?void 0:h("mab.button.textFormatting.textSelectionColor.native","nativeAction_setMenuType",{content:{type:"icon",imageReference:{imageUrl:g().Z.images.mab.actions.textColorSvg,imageTintColor:(0,u().J1)(U.icon.secondary)},selected:P===D,accessibilityText:H.textColor},apiRequestValue:{menuType:D,context:void 0}}):h("mab.button.textFormatting.textSelectionColor.native","nativeAction_setMenuType",{content:{type:"icon",imageReference:N(F,U),disabled:n||b,selected:P===D,accessibilityText:H.textColor},apiRequestValue:{menuType:D,context:void 0}}),bold:h("mab.button.bold","webAction_generic",{content:{type:"icon",imageReference:Z?{imageUrl:g().Z.images.mab.actions.boldSvg,imageTintColor:(0,u().J1)(U.icon.secondary)}:{sfProGlyphName:"bold",localImageIdentifier:"bold"},accessibilityText:H.bold,disabled:n,selected:E.bold},apiRequestValue:{jsonPayload:k({action:"bold"}),context:void 0}}),italic:h("mab.button.italic","webAction_generic",{content:{type:"icon",imageReference:Z?{imageUrl:g().Z.images.mab.actions.italicSvg,imageTintColor:(0,u().J1)(U.icon.secondary)}:{sfProGlyphName:"italic",localImageIdentifier:"italic"},disabled:n,selected:E.italic,accessibilityText:H.italics},apiRequestValue:{jsonPayload:k({action:"italic"}),context:void 0}}),underline:h("mab.button.underline","webAction_generic",{content:{type:"icon",imageReference:Z?{imageUrl:g().Z.images.mab.actions.underlineSvg,imageTintColor:(0,u().J1)(U.icon.secondary)}:{sfProGlyphName:"underline",localImageIdentifier:"underline"},disabled:n,selected:E.underline,accessibilityText:H.underline},apiRequestValue:{jsonPayload:k({action:"underline"}),context:void 0}}),strikethrough:h("mab.button.strikethrough","webAction_generic",{content:{type:"icon",imageReference:Z?{imageUrl:g().Z.images.mab.actions.strikethroughSvg,imageTintColor:(0,u().J1)(U.icon.secondary)}:{sfProGlyphName:"strikethrough",localImageIdentifier:"strikethrough"},disabled:n,selected:E.strikethrough,accessibilityText:H.strikethrough},apiRequestValue:{jsonPayload:k({action:"strikethrough"}),context:void 0}}),linkToPage:h("insert link_to_page-Link to page","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:g().Z.images.mab.blocks.linkToPageSvg,imageTintColor:(0,u().J1)(U.icon.secondary)},accessibilityText:"Link",disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert link_to_page-Link to page",context:void 0}}),link:h("mab.button.link","webAction_generic",{content:{type:"icon",imageReference:Z?{imageUrl:g().Z.images.mab.actions.linkAddSvg,imageTintColor:(0,u().J1)(U.icon.secondary)}:{sfProGlyphName:"link.badge.plus",localImageIdentifier:"link"},accessibilityText:H.link,disabled:n||T,selected:E.link},apiRequestValue:{jsonPayload:k({action:"link"}),context:void 0}}),copyLinkToBlock:Z?h("mab.button.copyLinkToBlock","webAction_generic",{content:{type:"icon",imageReference:Z?{imageUrl:g().Z.images.mab.actions.linkSvg,imageTintColor:(0,u().J1)(U.icon.secondary)}:{sfProGlyphName:"link",localImageIdentifier:"link"},accessibilityText:H.copyLinkToBlock,disabled:M},apiRequestValue:{jsonPayload:k({action:"copyLinkToBlock"}),context:void 0}}):void 0,code:h("mab.button.code","webAction_generic",{content:{type:"icon",imageReference:Z?{imageUrl:g().Z.images.mab.blocks.codeSvg,imageTintColor:(0,u().J1)(U.icon.secondary)}:{sfProGlyphName:"chevron.left.slash.chevron.right",localImageIdentifier:"code"},accessibilityText:H.code,disabled:n,selected:E.code},apiRequestValue:{jsonPayload:k({action:"code"}),context:void 0}}),equation:h("mab.button.equation","webAction_generic",{content:{type:"icon",imageReference:Z?{imageUrl:g().Z.images.mab.blocks.inlineEquationSvg,imageTintColor:(0,u().J1)(U.icon.secondary)}:{sfProGlyphName:"x.squareroot",localImageIdentifier:"equation"},accessibilityText:H.equation,disabled:n||w,selected:E.equation},apiRequestValue:{jsonPayload:k({action:"equation"}),context:void 0}}),filing:h("mab.button.filing","webAction_generic",{content:O.filing?{type:"text_and_icon",text:O.filing,style:"filled",imageReference:{sfProGlyphName:"folder",localImageIdentifier:"folder"},accessibilityText:H.filing}:{type:"icon",style:"filled",imageReference:{sfProGlyphName:"folder",localImageIdentifier:"folder"},accessibilityText:H.filing},apiRequestValue:{jsonPayload:k({action:"filing"}),context:void 0}}),text:Z?h("insert text-Text","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:g().Z.images.mab.blocks.textSvg,imageTintColor:(0,u().J1)(U.icon.secondary)},accessibilityText:"Text",disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert text-Text",context:void 0}}):void 0,encryptedText:Z?h("insert encrypted_text-Encrypted Text","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:g().Z.images.mab.blocks.encryptedTextSvg,imageTintColor:(0,u().J1)(U.icon.secondary)},accessibilityText:"Encrypted Text",disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert encrypted_text-Encrypted Text",context:void 0}}):void 0,page:Z?h("insert page-Page","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:g().Z.images.mab.blocks.pageSvg,imageTintColor:(0,u().J1)(U.icon.secondary)},accessibilityText:"Page",disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert page-Page",context:void 0}}):void 0,divider:h("insert divider-Divider","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:g().Z.images.mab.blocks.dividerSvg,imageTintColor:(0,u().J1)(U.icon.secondary)},accessibilityText:"Divider",disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert divider-Divider",context:void 0}}),table:h("insert table-Table","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:g().Z.images.mab.blocks.simpleTableSvg,imageTintColor:(0,u().J1)(U.icon.secondary)},accessibilityText:"Table",disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert table-Table",context:void 0}}),toDoList:Z?h("insert to_do-To-do list","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:g().Z.images.mab.blocks.toDoSvg,imageTintColor:(0,u().J1)(U.icon.secondary)},accessibilityText:H.todoList,disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert to_do-To-do list",context:void 0}}):void 0,h1:Z?h("insert header-Heading 1","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:g().Z.images.mab.blocks.headerH1Svg,imageTintColor:(0,u().J1)(U.icon.secondary)},accessibilityText:H.h1,disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert header-Heading 1",context:void 0}}):void 0,h2:Z?h("insert sub_header-Heading 2","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:g().Z.images.mab.blocks.headerH2Svg,imageTintColor:(0,u().J1)(U.icon.secondary)},accessibilityText:H.h2,disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert sub_header-Heading 2",context:void 0}}):void 0,h3:Z?h("insert sub_sub_header-Heading 3","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:g().Z.images.mab.blocks.headerH3Svg,imageTintColor:(0,u().J1)(U.icon.secondary)},accessibilityText:H.h3,disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert sub_sub_header-Heading 3",context:void 0}}):void 0,bulletedList:Z?h("insert bulleted_list-Bulleted list","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:g().Z.images.mab.blocks.bulletedListSvg,imageTintColor:(0,u().J1)(U.icon.secondary)},accessibilityText:H.bulletedList,disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert bulleted_list-Bulleted list",context:void 0}}):void 0,numberedList:Z?h("insert numbered_list-Numbered list","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:g().Z.images.mab.blocks.numberedListSvg,imageTintColor:(0,u().J1)(U.icon.secondary)},accessibilityText:H.numberedList,disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert numbered_list-Numbered list",context:void 0}}):void 0,toggleList:Z?h("insert toggle-Toggle list","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:g().Z.images.mab.blocks.toggleListSvg,imageTintColor:(0,u().J1)(U.icon.secondary)},accessibilityText:H.toggleList,disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert toggle-Toggle list",context:void 0}}):void 0,quote:Z?h("insert quote-Quote","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:g().Z.images.mab.blocks.quoteSvg,imageTintColor:(0,u().J1)(U.icon.secondary)},accessibilityText:H.quote,disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert quote-Quote",context:void 0}}):void 0,callout:Z?h("insert callout-Callout","webAction_genericAction",{content:{type:"icon",imageReference:{imageUrl:g().Z.images.mab.blocks.calloutSvg,imageTintColor:(0,u().J1)(U.icon.secondary)},accessibilityText:H.callout,disabled:!1,selected:!1},apiRequestValue:{menuType:"insertBlock",actionId:"insert callout-Callout",context:void 0}}):void 0,backgroundColorDefault:Z&&"default_background"!==E.backgroundHighlight?v("action color default_background-Default background","dark"===U.mode?g().Z.images.mab.textBackground.dark.defaultSvg:g().Z.images.mab.textBackground.light.defaultSvg,D,!1,"Default"):void 0,backgroundColorGray:Z?v("action color gray_background-Gray background","dark"===U.mode?g().Z.images.mab.textBackground.dark.graySvg:g().Z.images.mab.textBackground.light.graySvg,D,"gray_background"===E.backgroundHighlight,"Gray"):void 0,backgroundColorBrown:Z?v("action color brown_background-Brown background","dark"===U.mode?g().Z.images.mab.textBackground.dark.brownSvg:g().Z.images.mab.textBackground.light.brownSvg,D,"brown_background"===E.backgroundHighlight,"Brown"):void 0,backgroundColorOrange:Z?v("action color orange_background-Orange background","dark"===U.mode?g().Z.images.mab.textBackground.dark.orangeSvg:g().Z.images.mab.textBackground.light.orangeSvg,D,"orange_background"===E.backgroundHighlight,"Orange"):void 0,backgroundColorYellow:Z?v("action color yellow_background-Yellow background","dark"===U.mode?g().Z.images.mab.textBackground.dark.yellowSvg:g().Z.images.mab.textBackground.light.yellowSvg,D,"yellow_background"===E.backgroundHighlight,"Yellow"):void 0,backgroundColorTeal:Z?v("action color teal_background-Green background","dark"===U.mode?g().Z.images.mab.textBackground.dark.greenSvg:g().Z.images.mab.textBackground.light.greenSvg,D,"teal_background"===E.backgroundHighlight,"Green"):void 0,backgroundColorBlue:Z?v("action color blue_background-Blue background","dark"===U.mode?g().Z.images.mab.textBackground.dark.blueSvg:g().Z.images.mab.textBackground.light.blueSvg,D,"blue_background"===E.backgroundHighlight,"Blue"):void 0,backgroundColorPurple:Z?v("action color purple_background-Purple background","dark"===U.mode?g().Z.images.mab.textBackground.dark.purpleSvg:g().Z.images.mab.textBackground.light.purpleSvg,D,"purple_background"===E.backgroundHighlight,"Purple"):void 0,backgroundColorPink:Z?v("action color pink_background-Pink background","dark"===U.mode?g().Z.images.mab.textBackground.dark.pinkSvg:g().Z.images.mab.textBackground.light.pinkSvg,D,"pink_background"===E.backgroundHighlight,"Pink"):void 0,backgroundColorRed:Z?v("action color red_background-Red background","dark"===U.mode?g().Z.images.mab.textBackground.dark.redSvg:g().Z.images.mab.textBackground.light.redSvg,D,"red_background"===E.backgroundHighlight,"Red"):void 0,textColorRed:Z?f("action color red-Red text","dark"===U.mode?g().Z.images.mab.textColor.dark.redSvg:g().Z.images.mab.textColor.light.redSvg,D,"red"===F,"Red"):void 0,textColorOrange:Z?f("action color orange-Orange text","dark"===U.mode?g().Z.images.mab.textColor.dark.orangeSvg:g().Z.images.mab.textColor.light.orangeSvg,D,"orange"===F,"Orange"):void 0,textColorYellow:Z?f("action color yellow-Yellow text","dark"===U.mode?g().Z.images.mab.textColor.dark.yellowSvg:g().Z.images.mab.textColor.light.yellowSvg,D,"yellow"===F,"Yellow"):void 0,textColorTeal:Z?f("action color teal-Green text","dark"===U.mode?g().Z.images.mab.textColor.dark.greenSvg:g().Z.images.mab.textColor.light.greenSvg,D,"teal"===F,"Green"):void 0,textColorBlue:Z?f("action color blue-Blue text","dark"===U.mode?g().Z.images.mab.textColor.dark.blueSvg:g().Z.images.mab.textColor.light.blueSvg,D,"blue"===F,"Blue"):void 0,textColorPurple:Z?f("action color purple-Purple text","dark"===U.mode?g().Z.images.mab.textColor.dark.purpleSvg:g().Z.images.mab.textColor.light.purpleSvg,D,"purple"===F,"Purple"):void 0,textColorPink:Z?f("action color pink-Pink text","dark"===U.mode?g().Z.images.mab.textColor.dark.pinkSvg:g().Z.images.mab.textColor.light.pinkSvg,D,"pink"===F,"Pink"):void 0,textColorGray:Z?f("action color gray-Gray text","dark"===U.mode?g().Z.images.mab.textColor.dark.graySvg:g().Z.images.mab.textColor.light.graySvg,D,"gray"===F,"Gray"):void 0,textColorBrown:Z?f("action color brown-Brown text","dark"===U.mode?g().Z.images.mab.textColor.dark.brownSvg:g().Z.images.mab.textColor.light.brownSvg,D,"brown"===F,"Brown"):void 0,textColorDefault:Z&&"default"!==F?f("action color default-Default text","dark"===U.mode?g().Z.images.mab.textColor.dark.defaultSvg:g().Z.images.mab.textColor.light.defaultSvg,D,!1,"Default"):void 0,...q,dismissKeyboard:h("mab.dismissKeyboard","webAction_generic",{content:{type:"icon",imageReference:Z?{imageUrl:g().Z.images.mab.actions.keyboardDownSvg,imageTintColor:(0,u().J1)(U.icon.secondary)}:{sfProGlyphName:"keyboard.chevron.compact.down",localImageIdentifier:"keyboardDown"},accessibilityText:H.dismissKeyboard},apiRequestValue:{jsonPayload:k({action:"dismissKeyboard"}),context:void 0}}),closeActionMenu:h("mab.dismissKeyboard","nativeAction_setMenuType",{content:{type:"icon",imageReference:Z?{imageUrl:g().Z.images.mab.actions.xCircleSvg,imageTintColor:(0,u().J1)(U.icon.secondary)}:{sfProGlyphName:"xmark.circle.fill",localImageIdentifier:"cancel"},accessibilityText:H.closeActionMenu},apiRequestValue:{menuType:void 0,context:void 0}})}}function Z(e){const{buttonMap:t,shouldShowTemplatePills:o,frecentlyRankedActions:i,isEditingTitle:n,isEditingHeader:a,isEditingSimpleTable:r,isEditingCallout:s,isEditingQuote:l,shouldPrioritizeList:c,shouldShowFiling:d,shouldShowTemplates:u,someBlockPrioritizesIndentation:g,isTablet:b,isPersonalizedActionsEnabled:p,shouldShowSelectedTextButtons:h,isIndentable:f,isEmpty:v}=e;let y=[];if(n)if(o)y=[t.todoListTemplate,t.weeklyPlanTemplate,t.templates];else{const e=b?[]:[t.speech,t.filePicker],o=d?[t.filing]:[],i=u?[t.templates]:[];y=[...o,...i,...e]}if(!n&&p){let e=[];if(e=function(e,t,o,i,n,a,r,s){const l=new Set(["todoListTemplate","weeklyPlanTemplate","templates","filing"]),c=new Set(["bold","italic","underline","strikethrough","biu","dismissKeyboard","closeActionMenu","indent","unindent","moveUp","moveDown","ai"]),d=new Set(["color","backgroundColorDefault","backgroundColorGray","backgroundColorBrown","backgroundColorOrange","backgroundColorYellow","backgroundColorTeal","backgroundColorBlue","backgroundColorPurple","backgroundColorPink","backgroundColorRed","textColorDefault","textColorGray","textColorBrown","textColorOrange","textColorYellow","textColorTeal","textColorBlue","textColorPurple","textColorPink","textColorRed"]);let u;u=n?new Set([...c,...l,...d,"insert","biu","turnInto","more"]):r||s?new Set([...c,...l,...d,"insert","turnInto","more"]):o?new Set([...c,...l,...d,"copyLinkToBlock","insert","turnInto","more"]):a?new Set([...c,...l,...d,"toDoList","h1","h2","h3","bulletedList","numberedList","toggleList","quote","callout","insert","speech","turnInto","filePicker","ai","more"]):new Set([...c,...l,...d,"insert","turnInto","more"]);const g=Object.keys(e).filter((o=>{var i;return!u.has(o)&&t.includes(o)&&!(null!==(i=e[o])&&void 0!==i&&null!==(i=i.content)&&void 0!==i&&i.disabled)})).sort(((e,o)=>t.indexOf(e)-t.indexOf(o))).map((t=>e[t])).filter(m().$K).slice(0,3).sort(((e,t)=>e.id>t.id?1:-1));return g}(t,i,v,0,a,r,s,l),e.length<3){const o=function(e,t){return t?[e.toDoList,e.bulletedList,e.toggleList].filter(m().$K):[e.toDoList,e.bulletedList,e.h1].filter(m().$K)}(t,a);e=Array.from(new Set([...e,...o])).slice(0,3)}const o=function(e){const{buttonMap:t,shouldShowSelectedTextButtons:o,isIndentable:i,isEditingSimpleTable:n,isEditingCallout:a}=e;let r=[];r=o?[t.color,t.bold,t.underline,t.italic,t.strikethrough,t.link,t.comment,t.turnInto,t.code,t.equation,t.copyLinkToBlock,t.more]:n?[t.color,t.bold,t.underline,t.italic,t.strikethrough,t.mention,t.link,t.comment,t.code,t.equation,t.copyLinkToBlock]:a?[t.insert,t.biu,t.filePicker,t.speech,t.turnInto,t.undo,t.redo,t.moveUp,t.moveDown,t.delete,t.mention,t.more]:i?[t.unindent,t.indent,t.insert,t.biu,t.moveUp,t.moveDown,t.filePicker,t.speech,t.turnInto,t.undo,t.redo,t.mention,t.delete,t.more]:[t.insert,t.biu,t.filePicker,t.speech,t.turnInto,t.undo,t.redo,t.moveUp,t.moveDown,t.mention,t.delete,t.more];return r.filter(m().$K)}({buttonMap:t,shouldShowSelectedTextButtons:h,isIndentable:f,isEditingSimpleTable:r,isEditingCallout:s}),n=function(e,t){const o=new Set(t.map((e=>e.id)));return e.filter((e=>!o.has(e.id)))}(o,e);return[e.length>0?{id:"mab.buttonSection.main.personalized",buttons:[...[t.ai,...e].filter(m().$K).entries()].map((e=>{let[t,o]=e;return V(o,t)})),skipSectionDivider:!1,shouldFadeIn:!0}:void 0,{id:"mab.buttonSection.main",buttons:[...n.entries()].map((e=>{let[t,o]=e;return V(o,t)})),shouldFadeIn:!0}].filter(m().$K)}if(c&&g){return[{id:"mab.buttonSection.main",buttons:[...[t.ai,t.unindentPioritized,t.indentPrioritized,t.moveUpPrioritized,t.moveDownPrioritized].filter(m().$K),...b?[t.insert,t.turnInto,t.filePicker,t.speech].filter(m().$K):[t.insert,t.speech,t.filePicker,t.turnInto].filter(m().$K),...[t.biu,t.comment,t.undo,t.mention,t.delete,t.more].filter(m().$K)],skipSectionDivider:!0}]}return[{id:"mab.buttonSection.main",buttons:(()=>{if(n)return y;const e=b?[t.turnInto,t.speech,t.filePicker]:[t.speech,t.filePicker,t.turnInto];return[d&&b?t.filing:void 0,t.ai,t.insert,...e,t.biu,t.comment,t.undo,t.mention,t.delete,t.indent,t.unindent,t.moveUp,t.moveDown,t.more]})().filter(m().$K)}]}const R="static-";function V(e,t){return{...e,id:`${e.id}.${R}${t}`}}function F(e){const t=e.split(".");if(t.length>0){if(t[t.length-1].startsWith(R))return t.slice(0,-1).join(".")}return e}function L(e){return e.id=`${e.id}.prioritized`,e}const E={"insert text-Text":"text","insert page-Page":"page","insert to_do-To-do list":"toDoList","insert header-Heading 1":"h1","insert sub_header-Heading 2":"h2","insert sub_sub_header-Heading 3":"h3","insert bulleted_list-Bulleted list":"bulletedList","insert numbered_list-Numbered list":"numberedList","insert toggle-Toggle list":"toggleList","insert quote-Quote":"quote","insert callout-Callout":"callout","insert link_to_page-Link to page":"linkToPage","insert divider-Divider":"divider","insert table-Table":"table","insert encrypted_text-Encrypted Text":"encryptedText","action color default_background-Default background":"backgroundColorDefault","action color gray_background-Gray background":"backgroundColorGray","action color brown_background-Brown background":"backgroundColorBrown","action color orange_background-Orange background":"backgroundColorOrange","action color yellow_background-Yellow background":"backgroundColorYellow","action color teal_background-Green background":"backgroundColorTeal","action color blue_background-Blue background":"backgroundColorBlue","action color purple_background-Purple background":"backgroundColorPurple","action color pink_background-Pink background":"backgroundColorPink","action color red_background-Red background":"backgroundColorRed","action color default-Default text":"textColorDefault","action color gray-Gray text":"textColorGray","action color brown-Brown text":"textColorBrown","action color orange-Orange text":"textColorOrange","action color yellow-Yellow text":"textColorYellow","action color teal-Green text":"textColorTeal","action color blue-Blue text":"textColorBlue","action color purple-Purple text":"textColorPurple","action color pink-Pink text":"textColorPink","action color red-Red text":"textColorRed"};function N(e,t){let o="textColor";const i=u().E_.find((t=>t===e));let n;"default"===e||i&&(i.includes("background")?(n="background",o="textBackgroundColor"):n="color");const a=n&&i?(0,u().fi)(i,t)[n]:void 0;return{localImageIdentifier:o,imageTintColor:a?(0,u().J1)(a):void 0}}var O=()=>o(955620),H=()=>o(788860),U=()=>o(513670),D=()=>o(69863),q=()=>o(790082),K=()=>o(491927),G=()=>o(959137),z=()=>o(80072),Q=()=>o(207874),W=()=>o(964433),J=()=>o(542058),$=()=>o(23338),Y=()=>o(141735),X=()=>o(421797),ee=()=>o(594546),te=()=>o(718959),oe=()=>o(286338),ie=()=>o(982855),ne=()=>o(527278),ae=()=>o(233936),re=()=>o(191003),se=()=>o(271308),le=()=>o(852465),ce=()=>o(549813),de=()=>o(550054),ue=()=>o(465371);var me=()=>o(677559),ge=()=>o(696764);const be={TIME_BUCKETS:[{hours:24,weight:100},{hours:96,weight:70},{hours:168,weight:50},{hours:720,weight:30}],DEFAULT_BUCKET_WEIGHT:10},pe={TIME_BUCKETS:[{hours:4,weight:100},{hours:12,weight:80},{hours:24,weight:70},{hours:72,weight:60},{hours:168,weight:50},{hours:336,weight:40},{hours:672,weight:30}],DEFAULT_BUCKET_WEIGHT:20};var he=()=>o(687117),fe=()=>o(608085),ve=()=>o(639832),ye=()=>o(876822),xe=()=>o(524434),Se=()=>o(749826),ke=()=>o(121700),Ce=()=>o(826955),Te=()=>o(965903),Me=()=>o(127519),we=(o(670560),()=>o(963069)),Be=()=>o(159357),_e=()=>o(879952),Ae=()=>o(990966),Ie=()=>o(454573),je=()=>o(201741),Pe=()=>o(267629);function Ze(e){const{type:t,actionSections:o,closeParentMenu:i,context:n}=e,a={},r=[];for(const s of o){const e={id:`${s.key}`,title:s.title,items:s.actions.map((e=>{var o;const r=`${e.key}-${e.analyticsName||""}`;return a[r]={...e,closeParentMenu:i},{id:r,title:e.displayName||"",icon:(null===(o=e.nativeImageReference)||void 0===o?void 0:o.call(e,n))??{},action:S("webAction_genericAction",{menuType:t,actionId:r,context:void 0}),checked:!1}}))};r.push(e)}return{actions:a,sections:r}}function Re(e){const{key:t,displayName:o,analyticsName:i,closeParentMenu:n,action:a}=e,r=o;return{key:`action ${t}`,displayName:o?ne().Z.formatMessage(o):void 0,analyticsName:i||`textformatting_action_${t}`,searchName:r?`${ne().Z.formatMessage(r)} ${r.defaultMessage}`:void 0,validators:[],action:a,closeParentMenu:Boolean(n)}}const Ve={bold:Re({key:"bold",closeParentMenu:!1,action:e=>{let{environment:t}=e;ae().pk(t,["b"])}}),italic:Re({key:"italic",closeParentMenu:!1,action:e=>{let{environment:t}=e;ae().pk(t,["i"])}}),underline:Re({key:"underline",closeParentMenu:!1,action:e=>{let{environment:t}=e;ae().pk(t,["_"])}}),strikethrough:Re({key:"strikethrough",closeParentMenu:!1,action:e=>{let{environment:t}=e;ae().pk(t,["s"])}}),code:Re({key:"code",closeParentMenu:!1,action:e=>{let{environment:t}=e;ae().pk(t,["c"])}}),comment:Re({key:"comment",closeParentMenu:!0,action:async e=>{var t;let{environment:o}=e;await(null===(t=o.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary());const i=await Y().F.formulas.load();ae().ol(o,"mobile_action_bar",i)}}),equation:Re({key:"equation",closeParentMenu:!0,action:async e=>{var t;let{environment:o}=e;await(null===(t=o.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary()),ae()._W(o)}}),filePicker:Re({key:"filePicker",closeParentMenu:!0,action:async e=>{var t;let{environment:o}=e;await(null===(t=o.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary()),ae().vs(o)}}),indent:Re({key:"indent",closeParentMenu:!1,action:e=>{let{environment:t}=e;ae().O2(t)}}),unindent:Re({key:"unindent",closeParentMenu:!1,action:e=>{let{environment:t}=e;ae().$$(t)}}),moveDown:Re({key:"moveDown",closeParentMenu:!1,action:e=>{let{environment:t}=e;ae().rZ(t)}}),moveUp:Re({key:"moveUp",closeParentMenu:!1,action:e=>{let{environment:t}=e;ae().s0(t)}}),undo:Re({key:"undo",closeParentMenu:!1,action:e=>{let{environment:t}=e;ae().i2(t)}}),redo:Re({key:"redo",closeParentMenu:!1,action:e=>{let{environment:t}=e;ae().GH(t)}}),trash:Re({key:"trash",closeParentMenu:!1,action:e=>{let{environment:t}=e;ae().fn(t)}}),mention:Re({key:"mention",closeParentMenu:!0,action:async e=>{var t;let{environment:o}=e;await(null===(t=o.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary()),ae().Z3(o)}}),ai:Re({key:"ai",closeParentMenu:!0,action:async e=>{var t;let{environment:o}=e;await(null===(t=o.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary()),ae().QG(o)}}),voiceInput:Re({key:"voiceInput",closeParentMenu:!0,action:async e=>{var t;let{environment:o}=e;await(null===(t=o.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary());je().default.state.enabled&&!je().default.state.loading?await Ie().dictationActions.stopDictation({environment:o,from:"native_action"}):await Ie().dictationActions.smartToggleDictation({environment:o,from:"native_action",preCreateDictationBlock:o.device.isIOS&&Fe()})}}),link:Re({key:"link",closeParentMenu:!0,action:async e=>{var t;let{environment:o}=e;await(null===(t=o.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary()),ae().UF(o)}}),copyLinkToBlock:Re({key:"copyLinkToBlock",closeParentMenu:!1,action:async e=>{let{environment:t}=e;const o=Te().default.state.stores[0];if(!o)return;(await G().F.clipboardActions.load()).copyLinkToBlock({environment:t,blocks:[o],event:void 0})}}),more:Re({key:"more",closeParentMenu:!1,action:e=>{let{environment:t}=e;ae().w1(t)}}),filing:Re({key:"filing",closeParentMenu:!1,action:async e=>{let{environment:t}=e;const i=(0,te().np)();if(!i)return;const n=i.getParentStore();if(!n)return;const a=!t.device.isTablet,r=Te().default.getEditing(),s=Me().default.state,l="editing"===s.mode?(0,re().QY)(s.multiSelection):void 0;Ae().blurActiveElement(),Ae().clear({environment:t}),_e().ZH({environment:t});const c=()=>{if(a&&(r&&_e().eP({environment:t,store:r}),l)){Se().default.checkGate({gateName:"mobile_move_to_restore_selection_v2"})?(Ae().setSelectionAtEnd({store:l.store}),o(492788).default.afterNextFlush((()=>{Ae().setSelection(l)}))):Ae().setSelection(l)}},{currentSpaceStore:d}=ye().default.state,u=n instanceof Ce().H2&&d&&n.id===d.id,m=t.RouterStore.state.route,g="page"===m.name&&m.showMoveTo;await o(525038).$X({environment:t,blocks:[i],moveToContext:"quick_add_mab",disableSuccessToast:!0,onAccept:e=>{o(353141).xx(t),c()},onCanceled:()=>{c()},isAddTo:g,isDefaultPrivateLocation:u})}}),dismissKeyboard:Re({key:"dismissKeyboard",closeParentMenu:!0,action:e=>{let{environment:t}=e;_e().ZH({environment:t}),o(156958).MO(),ae().hc(t,void 0,!1),ae().hD(t,void 0,!1),ae().Oh(t,"hide_keyboard"),Ae().blurActiveElement()}}),todoListTemplate:Re({key:"todoListTemplate",closeParentMenu:!1,action:e=>{let{environment:t}=e;_e().ZH({environment:t}),ae().T5(t,we().Yt.todoListMobile)}}),weeklyPlanTemplate:Re({key:"weeklyPlanTemplate",closeParentMenu:!1,action:e=>{let{environment:t}=e;_e().ZH({environment:t}),ae().T5(t,we().Yt.weeklyPlanMobile)}}),templates:Re({key:"templates",closeParentMenu:!1,action:e=>{let{environment:t}=e;ae().em(t)}})};function Fe(){if("editing"!==Me().default.state.mode)return!1;const e=Me().default.state.multiSelection.start.store;return!!(0,o(339523).x7)(e)}var Le=o(785893);const Ee=(0,H().vU)({subMenuLabelSuggested:{defaultMessage:"Suggested",id:"mobileActionBar.subMenuLabel.suggested"},subMenuLabelInsert:{defaultMessage:"Add",id:"mobileActionBar.subMenuLabel.insert"},subMenuLabelTurnInto:{defaultMessage:"Turn into",id:"mobileActionBar.subMenuLabel.turnInto"},subMenuLabelTextFormatting:{defaultMessage:"Format",id:"mobileActionBar.subMenuLabel.textFormatting"},subMenuLabelTextColor:{defaultMessage:"Text color",id:"mobileActionBar.subMenuLabel.textColor"},templatesButtonTitle:{defaultMessage:"Templates",id:"mobileActionBar.templateButtonTitle"},moreTemplatesButtonTitle:{defaultMessage:"More",id:"mobileActionBar.moreTemplatesButtonTitle"},todoListTemplateTitle:{defaultMessage:"To-do list",id:"mobileActionBar.templateTitle.todoList"},weeklyPlanTemplateTitle:{defaultMessage:"Weekly plan",id:"mobileActionBar.templateTitle.weeklyPlan"},actionMenuInsertBlockTitle:{defaultMessage:"Insert Block",id:"mobileActionBar.actionMenuTitle.insertBlock"},actionMenuTurnIntoTitle:{defaultMessage:"Turn Into",id:"mobileActionBar.actionMenuTitle.turnInto"},actionMenuColorTitle:{defaultMessage:"Color",id:"mobileActionBar.actionMenuTitle.blockColor"},accessibilityInsert:{defaultMessage:"Add block",id:"mobileActionBar.accessibility.insertBlock"},accessibilityTurnInto:{defaultMessage:"Turn into block",id:"mobileActionBar.accessibility.turnInto"},accessibilityFilePicker:{defaultMessage:"Add image",id:"mobileActionBar.accessibility.filePicker"},accessibilityMention:{defaultMessage:"Add mention",id:"mobileActionBar.accessibility.mention"},accessibilityBlockColor:{defaultMessage:"Change block color",id:"mobileActionBar.accessibility.blockColor"},accessibilityTextFormatting:{defaultMessage:"Open text formatting menu",id:"mobileActionBar.accessibility.textFormatting"},accessibilityComment:{defaultMessage:"Add comment",id:"mobileActionBar.accessibility.comment"},accessibilityTrash:{defaultMessage:"Delete block",id:"mobileActionBar.accessibility.trash"},accessibilityIndent:{defaultMessage:"Indent block",id:"mobileActionBar.accessibility.indent"},accessibilityDedent:{defaultMessage:"Unindent block",id:"mobileActionBar.accessibility.unindent"},accessibilityMoveUp:{defaultMessage:"Move a block up",id:"mobileActionBar.accessibility.moveUp"},accessibilityMoveDown:{defaultMessage:"Move a block down",id:"mobileActionBar.accessibility.moveDown"},accessibilityUndo:{defaultMessage:"Undo edit",id:"mobileActionBar.accessibility.undo"},accessibilityRedo:{defaultMessage:"Redo edit",id:"mobileActionBar.accessibility.redo"},accessibilityMore:{defaultMessage:"More block actions",id:"mobileActionBar.accessibility.more"},accessibilityBold:{defaultMessage:"Bold",id:"mobileActionBar.accessibility.bold"},accessibilityItalics:{defaultMessage:"Italicize",id:"mobileActionBar.accessibility.italics"},accessibilityUnderline:{defaultMessage:"Underline",id:"mobileActionBar.accessibility.underline"},accessibilityStrikethrough:{defaultMessage:"Strikethrough",id:"mobileActionBar.accessibility.strikethrough"},accessibilityTextColor:{defaultMessage:"Text color",id:"mobileActionBar.accessibility.textColor"},accessibilityCode:{defaultMessage:"Code",id:"mobileActionBar.accessibility.code"},accessibilityLink:{defaultMessage:"Add link",id:"mobileActionBar.accessibility.link"},accessibilityCopyLinkToBlock:{defaultMessage:"Copy link to block",id:"mobileActionBar.accessibility.copyLinkToBlock"},accessibilityEquation:{defaultMessage:"Add equation",id:"mobileActionBar.accessibility.equation"},accessibilityFiling:{defaultMessage:"Page location",id:"mobileActionBar.accessibility.filing"},accessibilityCloseTextFormattingMenu:{defaultMessage:"Close text formatting menu",id:"mobileActionBar.accessibility.close"},accessibilityDismissKeyboard:{defaultMessage:"End editing",id:"mobileActionBar.accessibility.endEditing"},accessibilityCloseActionMenu:{defaultMessage:"Close menu",id:"mobileActionBar.accessibility.closeMenu"},accessibilityAi:{defaultMessage:"Notion AI",id:"mobileActionBar.accessibility.ai"},filingButtonPrivateSection:{defaultMessage:"Private",id:"mobileActionBar.filing.private"},accessibilityTodoList:{defaultMessage:"Add a to-do list",id:"mobileActionBar.accessibility.todoList"},accessibilityH1:{defaultMessage:"Add an H1 heading",id:"mobileActionBar.accessibility.h1"},accessibilityH2:{defaultMessage:"Add an H2 heading",id:"mobileActionBar.accessibility.h2"},accessibilityH3:{defaultMessage:"Add an H3 heading",id:"mobileActionBar.accessibility.h3"},accessibilityBulletedList:{defaultMessage:"Add a bulleted list",id:"mobileActionBar.accessibility.bulletedList"},accessibilityNumberedList:{defaultMessage:"Add a numbered list",id:"mobileActionBar.accessibility.numberedList"},accessibilityToggleList:{defaultMessage:"Add a toggle list",id:"mobileActionBar.accessibility.toggleList"},accessibilityQuote:{defaultMessage:"Add a quote block",id:"mobileActionBar.accessibility.quote"},accessibilityCallout:{defaultMessage:"Add a callout block",id:"mobileActionBar.accessibility.callout"}}),Ne={text:!1,to_do:!0,bulleted_list:!0,numbered_list:!0,toggle:!0,column:!1,transclusion_container:!1,callout:!1,quote:!1,post:!1};function Oe(e){var t;const{onAction:o,fallbackRenderer:r,...s}=e,l=null===(t=(0,a().O7)().mobileNative)||void 0===t?void 0:t.api.renderMobileActionBar,c=(0,n().e)(l,s);return function(e,t,o,n){var r;const s=null===(r=(0,a().O7)().mobileNative)||void 0===r?void 0:r.componentEvents;(0,i.useEffect)((()=>{if(s&&n&&t)return s.addListener(e,t,o,n)}),[e,t,o,n,s])}("MobileActionBar",c,"onAction",o),!c&&r?(0,Le.jsx)(Le.Fragment,{children:r()}):null}function He(e){const{currentBlockStore:t,fallbackRenderer:o,stores:n,shouldShowMoveTo:g,renderApi:h}=e,f=(0,a().O7)(),v=(0,s().l)(),S=(0,H().YB)(),{value:k}=(0,me().XJ)(W().p),{value:_}=(0,me().XJ)(J().m),{value:A}=(0,me().XJ)(Y().F.formulas),{value:I}=(0,me().XJ)(G().F.clipboardActions),j=(0,l().VK)((()=>Se().default.getEligibleGroup({experimentId:"mab_refresh_personalization",defaultGroup:"control"})),[]),R="v1"===j||"v2"===j,V=(0,i.useRef)(void 0),L=(0,l().VK)((()=>{const e=null==v?void 0:v.publicEditModeStore.state;return ae().$3(f,t,e)}),[f,t,null==v?void 0:v.publicEditModeStore]),N=(0,i.useMemo)((()=>U().HP((e=>{const{blocks:t,environment:o}=e;return function(e,t,o){return{insertBlock:Ze({type:"insertBlock",actionSections:Pe().L1(t,e),context:e,closeParentMenu:!0}),turnInto:Ze({type:"turnInto",actionSections:Pe().L1(o,e),context:e,closeParentMenu:!0}),textColor:Ze({type:"textColor",actionSections:Pe().L1([Be().rz,Be().Vm],e),context:e,closeParentMenu:!0}),textSelectionColor:Ze({type:"textSelectionColor",actionSections:Pe().L1([Be().b4,Be().Sw],e),context:e,closeParentMenu:!0})}}({environment:o,blocks:t,publicEditMode:void 0},function(e){return(0,D().vC)(e).state.insertActions}(R),[(0,q().qF)({isPersonalizedActionsEnabled:R})])}),(e=>{let{blocks:t,environment:o}=e;const i=t.map((e=>e.key)).join(",");return`${o.key}-${i}`}))),[R]),oe=(0,l().VK)((()=>N({blocks:Ue(),environment:f,isPersonalizedActionsEnabled:R})),[f,N,R]),se=(0,l().VK)((()=>{const e=Qe(n.ignoreSelectionAreaStore);return 1===(null==e?void 0:e.length)?e[0]:void 0}),[n.ignoreSelectionAreaStore],{useDeepEqual:!0}),we=(0,l().VK)((()=>!0===ae().oQ(n.ignoreSelectionAreaStore,f.TextSelectionCompositionStore,se,R)),[f,n,se,R]),_e=(0,l().VK)((()=>{const e=(e,t)=>{if(!e||"editing"!==e.mode)return;const{multiSelection:o}=e;return{startRecord:o.start.store.pointer,startIndex:o.start.index,endRecord:o.end.store.pointer,endIndex:o.end.index,source:t}};return e(Me().default.state,"TextSelectionStore")||e(n.ignoreSelectionAreaStore.state.savedTextSelectionStoreState,"IgnoreSelectionAreaStore")}),[n.ignoreSelectionAreaStore],{useDeepEqual:!0}),Ae=(0,l().VK)((()=>{if(!_e)return;const{source:e,...t}=_e;return t}),[_e],{useDeepEqual:!0}),Ie=(0,l().VK)((()=>{var e;const{NativeMobileActionBarStore:o}=f,i=(0,u().gh)({theme:f.ThemeModeStore.state}),a=ke().Z.state.isOpen,r=t.getType(),s=t.getFormat(),l=De(),d=fe().Z.state.isActive,m=ke().Z.state.isOpen,b=ze(n.ignoreSelectionAreaStore),p=Boolean(b&&(0,re().qS)(b)),h=(0,ie().GD)(null==v?void 0:v.publicEditModeStore.state),y=!(0,te().VV)()&&(0,$().d)(),x=d||m,k=l||d,C=!ae().eQ(v&&v.publicEditModeStore.state,t),T=!ae().Bo(v&&v.publicEditModeStore.state),M=function(){let e;e="editing"===Me().default.state.mode?(0,de().KF)([O().GKr.Bold,O().GKr.Italic,O().GKr.Underline,O().GKr.Strike,O().GKr.Code,O().GKr.Link,O().GKr.Equation,...(0,O().F7H)(O().GKr.Highlight)],Me().default.state.multiSelection,Me().default.state.forceExtendAnnotations):{};const t=e.hf,o=e.hb;return{bold:Boolean(e[O().GKr.Bold]),italic:Boolean(e[O().GKr.Italic]),underline:Boolean(e[O().GKr.Underline]),strikethrough:Boolean(Boolean(e[O().GKr.Strike])),code:Boolean(e[O().GKr.Code]),link:Boolean(e[O().GKr.Link]),equation:Boolean(e[O().GKr.Equation]),textHighlight:t&&(0,O().LAI)(t)?(0,O().zIN)(t):void 0,backgroundHighlight:o&&(0,O().LAI)(o)?(0,O().zIN)(o):void 0}}(),B=Boolean(L.disableStyleAnnotations),_=null==o||null===(e=o.state.menu)||void 0===e?void 0:e.type,A=w(oe.insertBlock.sections),I=w(oe.turnInto.sections),j=w(oe.textColor.sections),Z=function(e,t,o){var i;const{NativeMobileActionBarStore:n}=e,a=n&&void 0!==(null===(i=n.state.menu)||void 0===i?void 0:i.type)?t.state.savedTextSelectionStoreState:void 0;if(!a)return o;const r="editing"===a.mode&&(0,de().KF)(["hf","hb"],a.multiSelection,a.forceExtendAnnotations);if(r){const e=r.hf??r.hb;return e&&(0,O().LAI)(e)?(0,O().zIN)(e):void 0}}(f,n.ignoreSelectionAreaStore,M.textHighlight),V=!Q().L0(),F=!Q().AZ(),E=!Ue().every(z().nt),N=!Ue().every(z().gq),H=l||m,U=!p,D=!p,q=Boolean(r&&(0,c().lQ)(r))||!p,K=Boolean(r&&(0,c()._T)(r,s))||Boolean(L.disableComment)||a,G=(null==se?void 0:se.isNavigableBlock())||(0,X().l2t)(se),W=l&&Ge(f,t)&&Ke(f),J=g&&!Ke(f),Y=function(e,t,o,i){if(!o||!t)return;if(e.device.isTablet&&!function(e){if(!e.hasContent())return!0;return e.getContentStores().every((e=>e.isEmptyEditableBlock()))}(t))return;const n=t.getParentStore();if(!n||!(0,ce().JL)(n))return;function a(e){if(!e)return;const t=10;return e.length>t?`${Array.from(e).slice(0,t).join("").trim()}…`:e}const{currentSpaceStore:r}=ye().default.state;if(n instanceof Ce().H2&&r&&n.id===r.id)return a(ne().Z.formatMessage(Ee.filingButtonPrivateSection));return a((0,ce().V)(n,i,e,xe().KR.shouldEnablePageTitleDiffs(e.device)))}(f,null==v?void 0:v.pageStore,J,S);return P({createAIAction:h,createDictationAction:y,disableDictationActions:x,disableAIAction:k,disableTextActions:C,disableBlockActions:T,disableLinkAction:U,disableEquationAction:D,disableCommentAction:K,disableMentionAction:q,disableTextFormatting:B,disableInsertBlockAction:A,disableTurnIntoAction:I,disableTextColorAction:j,disableDeleteBlock:H,disableUndo:V,disableRedo:F,disableIndent:E,disableUnindent:N,disableCopyLinkToBlock:G,selectedMenuType:_,isEditingTitle:l,shouldShowTextActions:we,usePillStyling:W,isPersonalizedActionsEnabled:R,textSelectionColor:Z,textFormattingSelections:M,titleTexts:{filing:Y,template:ne().Z.formatMessage(Ee.templatesButtonTitle),moreTemplates:ne().Z.formatMessage(Ee.moreTemplatesButtonTitle),todoListTemplate:ne().Z.formatMessage(Ee.todoListTemplateTitle),weeklyPlanTemplate:ne().Z.formatMessage(Ee.weeklyPlanTemplateTitle)},accessibilityTexts:{insert:ne().Z.formatMessage(Ee.accessibilityInsert),turnInto:ne().Z.formatMessage(Ee.accessibilityTurnInto),filePicker:ne().Z.formatMessage(Ee.accessibilityFilePicker),mention:ne().Z.formatMessage(Ee.accessibilityMention),comment:ne().Z.formatMessage(Ee.accessibilityComment),textFormatting:ne().Z.formatMessage(Ee.accessibilityTextFormatting),trash:ne().Z.formatMessage(Ee.accessibilityTrash),ai:ne().Z.formatMessage(Ee.accessibilityAi),undo:ne().Z.formatMessage(Ee.accessibilityUndo),redo:ne().Z.formatMessage(Ee.accessibilityRedo),more:ne().Z.formatMessage(Ee.accessibilityMore),indent:ne().Z.formatMessage(Ee.accessibilityIndent),unindent:ne().Z.formatMessage(Ee.accessibilityDedent),moveUp:ne().Z.formatMessage(Ee.accessibilityMoveUp),moveDown:ne().Z.formatMessage(Ee.accessibilityMoveDown),bold:ne().Z.formatMessage(Ee.accessibilityBold),italics:ne().Z.formatMessage(Ee.accessibilityItalics),underline:ne().Z.formatMessage(Ee.accessibilityUnderline),strikethrough:ne().Z.formatMessage(Ee.accessibilityStrikethrough),textColor:ne().Z.formatMessage(Ee.accessibilityTextColor),code:ne().Z.formatMessage(Ee.accessibilityCode),link:ne().Z.formatMessage(Ee.accessibilityLink),copyLinkToBlock:ne().Z.formatMessage(Ee.accessibilityCopyLinkToBlock),equation:ne().Z.formatMessage(Ee.accessibilityEquation),close:ne().Z.formatMessage(Ee.accessibilityCloseTextFormattingMenu),filing:ne().Z.formatMessage(Ee.accessibilityFiling),todoList:ne().Z.formatMessage(Ee.accessibilityTodoList),h1:ne().Z.formatMessage(Ee.accessibilityH1),h2:ne().Z.formatMessage(Ee.accessibilityH2),h3:ne().Z.formatMessage(Ee.accessibilityH3),bulletedList:ne().Z.formatMessage(Ee.accessibilityBulletedList),numberedList:ne().Z.formatMessage(Ee.accessibilityNumberedList),toggleList:ne().Z.formatMessage(Ee.accessibilityToggleList),quote:ne().Z.formatMessage(Ee.accessibilityQuote),callout:ne().Z.formatMessage(Ee.accessibilityCallout),dismissKeyboard:ne().Z.formatMessage(Ee.accessibilityDismissKeyboard),closeActionMenu:ne().Z.formatMessage(Ee.accessibilityCloseActionMenu)},theme:i})}),[f,se,t,n.ignoreSelectionAreaStore,g,v,oe,L,we,R,S]),je=(0,l().VK)((()=>{var e;const t=f.NativeMobileActionBarStore,o=Boolean(null==t||null===(e=t.state)||void 0===e?void 0:e.isSubMenuOverridden),i=ve().Z.state.open,n=Boolean(L.disableStyleAnnotations);var a;return o?null==t||null===(a=t.state.subMenu)||void 0===a?void 0:a.type:i?"slashMenu":!we||n||R?void 0:"textFormatting"}),[f.NativeMobileActionBarStore,L.disableStyleAnnotations,we,R]),Re=(0,l().VK)((()=>{var e;const{NativeMobileActionBarStore:o}=f,i=De(),a=qe(se),r=fe().Z.state.isActive,s="callout"===(null==(l=se)||null===(c=l.getParentBlockStore())||void 0===c?void 0:c.getType());var l,c;const d=function(e){const t=null==e?void 0:e.getType();return"quote"===t}(se),u=!ae().Bo(v&&v.publicEditModeStore.state),m=!Ue().every(z().nt),b=!Ue().every(z().gq),p=Qe(n.ignoreSelectionAreaStore),h=!!p&&p.some((e=>{const t=e.getType();return t&&Ne[t]})),y=Ge(f,t)&&Ke(f),x=Boolean(se&&(0,le().Nm)(se)),S=null==se?void 0:se.getType(),k=S&&Ne[S],C=Boolean(L.disableStyleAnnotations),T=Boolean(null==o||null===(e=o.state)||void 0===e?void 0:e.isSubMenuOverridden),M=Boolean(!T&&we&&!C&&!r),w=!(u||m&&b),B=R?function(e,t){const o=new(ge().Z),i=t?pe:be;return o.getFrecencyRankedActions(e,i)}(he().Z.get(),"v2"===j):[];return Z({buttonMap:Ie,shouldShowTemplatePills:y,frecentlyRankedActions:B,isEditingTitle:i,isEditingHeader:a,isEditingSimpleTable:r,isEditingCallout:s,isEditingQuote:d,shouldPrioritizeList:w,someBlockPrioritizesIndentation:h,shouldShowFiling:g&&!Ke(f),shouldShowTemplates:Ge(f,t),isTablet:f.device.isTablet,isPersonalizedActionsEnabled:R,shouldShowSelectedTextButtons:M,isIndentable:k,isEmpty:x})}),[se,t,v,n.ignoreSelectionAreaStore,f,L.disableStyleAnnotations,we,R,j,Ie,g]),Fe=(0,l().VK)((()=>{var e;const{NativeMobileActionBarStore:t}=f,o=null==t||null===(e=t.state.menu)||void 0===e?void 0:e.type,i=function(e){const{buttonMap:t,shouldShowTextActions:o}=e;let i;return i=o?[B,t.ai,t.color,t.comment,t.bold,t.italic,t.underline,t.strikethrough,t.link,t.code,t.equation].filter(m().$K):[B,t.color,t.bold,t.italic,t.underline,t.strikethrough,t.link,t.code,t.equation].filter(m().$K),{id:"mab.buttonSection.textFormatting",shouldFadeIn:!0,buttons:i}}({buttonMap:Ie,shouldShowTextActions:we}),n=void 0===o?Ie.dismissKeyboard:Ie.closeActionMenu,a=function(e){const{version:t,selectedMenu:o,selectedSubMenu:i,nativeMenus:n,buttonSections:a,nativeSubMenus:r,dismissKeyboardButton:s,localizedMessages:l}=e;return{nativeMenus:n,nativeSubMenus:r,localizedMessages:l,state:{buttonSections:a,selectedMenu:o,selectedSubMenu:i,dismissKeyboardButton:s},version:t}}({version:R?3:1,selectedMenu:o,selectedSubMenu:je,nativeMenus:{textColor:{id:"textColor",title:ne().Z.formatMessage(Ee.actionMenuColorTitle),sections:oe.textColor.sections},textSelectionColor:{id:"textSelectionColor",title:ne().Z.formatMessage(Ee.actionMenuColorTitle),sections:oe.textSelectionColor.sections},insertBlock:{id:"insertBlock",title:ne().Z.formatMessage(Ee.actionMenuInsertBlockTitle),sections:oe.insertBlock.sections},turnInto:{id:"turnInto",title:ne().Z.formatMessage(Ee.actionMenuTurnIntoTitle),sections:oe.turnInto.sections}},nativeSubMenus:{suggested:[],textFormatting:[i],slashMenu:[],turnInto:[],textColor:[],textSelectionColor:[],more:[]},buttonSections:Re,accessibilityTexts:{dismissKeyboard:ne().Z.formatMessage(Ee.accessibilityDismissKeyboard),closeActionMenu:ne().Z.formatMessage(Ee.accessibilityCloseActionMenu)},localizedMessages:{...We(je)},dismissKeyboardButton:n});if(Se().default.checkGate({gateName:"mobile_mab_mrr"})){var r;const e=null===(r=f.NativeMobileActionBarStore)||void 0===r?void 0:r.state,t=7,i=Boolean(null==e?void 0:e.isSubMenuOverridden)?t:0;if(a.state.buttonSections.flatMap((e=>e.buttons)).forEach(((e,t)=>{e.action.apiRequestValue&&(e.action.apiRequestValue.context={index:t+1+i,id:e.id})})),je){var s,l;let o=0;null!=e&&null!==(s=e.subMenu)&&void 0!==s&&s.type&&null!=e&&null!==(l=e.subMenu)&&void 0!==l&&l.context&&(o=t+e.subMenu.context.index),a.nativeSubMenus[je].flatMap((e=>e.buttons)).forEach(((e,t)=>{e.action.apiRequestValue&&(e.action.apiRequestValue.context={index:t+1+o,id:e.id})}))}if(o){var c,d;let i=0;null!=e&&null!==(c=e.menu)&&void 0!==c&&c.type&&null!=e&&null!==(d=e.menu)&&void 0!==d&&d.context&&(i=t+e.menu.context.index),a.nativeMenus[o].sections.flatMap((e=>e.items)).forEach(((e,t)=>{e.action.apiRequestValue&&(e.action.apiRequestValue.context={index:t+1+i,id:e.id})}))}}return a}),[f,je,we,Ie,oe,Re,R],{useDeepEqual:!0,debugName:"getCurrentActionBarSchema"}),He=(0,i.useCallback)((e=>{var t,o,i;let{action:n}=e;if(null!==(t=n.apiRequestValue)&&void 0!==t&&t.context&&null!==(o=n.apiRequestValue)&&void 0!==o&&o.context.id&&null!==(i=n.apiRequestValue)&&void 0!==i&&i.context.index){var a,r,s;const e=Boolean(se&&(0,le().Nm)(se)),t=null==se?void 0:se.getType(),o=Boolean(t&&Ne[t]),i=null==_e?void 0:_e.startIndex,l=null==_e?void 0:_e.endIndex,c=Te().default.state.stores[0],d={action_id:F(n.apiRequestValue.context.id),reciprocal_rank:1/(null===(a=n.apiRequestValue)||void 0===a?void 0:a.context.index),block_type:null==c?void 0:c.getType(),is_editing_title:De(),text_selection_start_index:i,text_selection_end_index:l,is_indentable:o,is_empty:e,is_editing_header:qe(se),session_id:null===(r=f.NativeMobileActionBarStore)||void 0===r||null===(r=r.state.session)||void 0===r?void 0:r.session_id,render_id:null===(s=f.NativeMobileActionBarStore)||void 0===s||null===(s=s.state.session)||void 0===s?void 0:s.render_id,algorithm_version:j};(0,ee().j)({environment:f,event:{eventName:"mobile_action_bar_reciprocal_rank",eventProperties:d}})}switch(n.type){case"nativeAction_setMenuType":!function(e,t,o){var i;const n=function(e){if("nativeAction_setMenuType"!==e.type)return new M(T.InvalidActionType,void 0);const t=e.apiRequestValue;if(!t||!("menuType"in t))return new M(T.MissingPayload,void 0);null===t.menuType&&(t.menuType=void 0);const o=p().object({required:{menuType:p().undefinable(p().literals(...y))},optional:{}}),i=(0,b().Gu)(o,t);return i?new M(T.InvalidRequestType,JSON.stringify(i)):t.menuType}(e);if(n instanceof M)return void console.error(JSON.stringify(n));const a=t.NativeMobileActionBarStore?null===(i=t.NativeMobileActionBarStore.state.menu)||void 0===i?void 0:i.type:void 0;if(a===n)ae().hc(t,void 0,!0);else{var r;if(!n)return void ae().hc(t,void 0,!0);switch(ae().hc(t,{type:n,context:null===(r=e.apiRequestValue)||void 0===r?void 0:r.context},!0),o(n),n){case"insertBlock":ae().Oh(t,"insert");break;case"turnInto":ae().Oh(t,"turn_into");break;case"textColor":ae().Oh(t,"color","mobile_action_bar");break;case"textSelectionColor":ae().Oh(t,"color","mobile_text_formatting_menu")}}}(n,f,(e=>{const t=function(e){if("turnInto"===e)return"turnInto"}(e);void 0!==t&&he().Z.track(t)}));break;case"nativeAction_setSubMenuType":!function(e,t,o){const i=function(e){if("nativeAction_setSubMenuType"!==e.type)return new M(T.InvalidActionType,void 0);const t=e.apiRequestValue;if(!t||!("subMenuType"in t))return new M(T.MissingPayload,void 0);null===t.subMenuType&&(t.subMenuType=void 0);const o=p().object({required:{subMenuType:p().undefinable(p().literals(...x))},optional:{}}),i=(0,b().Gu)(o,t);return i?new M(T.InvalidRequestType,JSON.stringify(i)):t.subMenuType}(e);if(i instanceof M)return void console.error(JSON.stringify(i));if(i){var n;ae().hD(t,{type:i,context:null===(n=e.apiRequestValue)||void 0===n?void 0:n.context},!0),o(i)}else ae().hD(t,void 0,!0)}(n,f,(e=>{const t=function(e){switch(e){case"textFormatting":return"biu";case"turnInto":return"turnInto";default:return}}(e);void 0!==t&&he().Z.track(t)}));break;case"webAction_generic":!function(e,t,o,i,n,a,r){const s=function(e){if("webAction_generic"!==e.type)return new M(T.InvalidActionType,void 0);const t=e.apiRequestValue;if(!t||!("jsonPayload"in t))return new M(T.MissingPayload,void 0);const o=JSON.parse(t.jsonPayload),i=(0,b().Gu)(C,o);return i?new M(T.InvalidData,JSON.stringify(i)):o}(e);if(s instanceof M)return void console.error(JSON.stringify(s));const{mainEditorCurrentBlockStore:l}=ye().default.state;if(!l)return;const{device:c}=a,d=Ve[s.data.action];d.closeParentMenu&&!c.isTablet&&ae().hc(a,void 0,!0);(0,d.action)({environment:a,blocks:[l],publicEditMode:void 0,lazyDependencies:{clipboardActions:t,formulasModule:o,markdownLinkifyIt:i,tinyMceMicrosoftWordPasteFilter:n}}),r(s.data.action)}(n,I,A,k,_,f,(e=>{const t=e??E[e];Ie[t]&&he().Z.track(t)}));break;case"webAction_genericAction":!function(e,t,o,i,n,a,r,s,l){var c,d;const u=null===(c=e.apiRequestValue)||void 0===c?void 0:c.menuType,m=null===(d=e.apiRequestValue)||void 0===d?void 0:d.actionId;if(!u||!m)return;const g=a({environment:s,blocks:Te().default.state.stores,isPersonalizedActionsEnabled:r})[u].actions[m];if(!g)return;const b=g.action;b&&(g.closeParentMenu&&ae().hc(s,void 0,!0),b({environment:s,blocks:Te().default.state.stores,publicEditMode:void 0,lazyDependencies:{clipboardActions:t,formulasModule:o,markdownLinkifyIt:i,tinyMceMicrosoftWordPasteFilter:n}}));const p=Te().default.state.stores[0];if(p){const e=p.getType(),t=p.getFormat();K().dh(s,{analyticsName:g.analyticsName,action_type:g.analyticsActionType,from:"slash_menu",block_id:p.id,block_type:e,is_toggleable:e?(0,ue()._A)(e,t):void 0,slash_menu_filter_length:0,slash_menu_section:`Mobile Action Bar ${u}`,parent_collection_id:p.getParentCollectionIdUpToTwoLevels()}),g.analyticsName&&ae().Oh(s,g.analyticsName,u)}l(m)}(n,I,A,k,_,N,R,f,(e=>{const t=E[e];void 0!==t&&Ie[t]&&he().Z.track(t)}))}}),[se,_e,f,j,A,k,_,N,Ie,R,I]);return(0,i.useEffect)((()=>{if(!L){const{NativeMobileActionBarStore:e}=f,t=window.setTimeout((()=>{var t,o;null!=e&&null!==(t=e.state.menu)&&void 0!==t&&t.type&&ae().hc(f,void 0,!1),null!=e&&null!==(o=e.state.subMenu)&&void 0!==o&&o.type&&ae().hD(f,void 0,!1)}),500);return()=>{window.clearTimeout(t)}}}),[L,f]),(0,i.useEffect)((()=>{var e;const t=f.NativeMobileActionBarStore;Boolean(null==t||null===(e=t.state)||void 0===e?void 0:e.isSubMenuOverridden)||"slashMenu"!==je&&"textFormatting"!==je||null==t||t.update((e=>({...e,isSubMenuOverridden:!1,subMenu:void 0})))}),[f.NativeMobileActionBarStore,je]),(0,i.useEffect)((()=>{var e;if(!_e)return;const{NativeMobileActionBarStore:t,device:o}=f;"TextSelectionStore"===_e.source&&null!=t&&null!==(e=t.state.menu)&&void 0!==e&&e.type&&!o.isTablet&&ae().hc(f,void 0,!0)}),[f,_e]),(0,i.useEffect)((()=>{var e;Ae&&null!==(e=f.NativeMobileActionBarStore)&&void 0!==e&&e.state.isSubMenuOverridden&&!ve().Z.state.open&&ae().hD(f,void 0,!1)}),[f,Ae]),(0,i.useEffect)((()=>{var e,t,o;const{NativeMobileActionBarStore:i}=f,n=L.shouldShow,a=(je?Fe.nativeSubMenus[je]:Fe.state.buttonSections).map((e=>{let{id:t,buttons:o}=e;return{id:t,buttonIds:o.map((e=>{let{id:t}=e;return F(t)}))}}));let r=!0,s=!0;V.current&&(r=n&&V.current.isOpen!==n,s=r||!U().Xy(a,V.current.sectionsState));const l=null==i||null===(e=i.state.session)||void 0===e?void 0:e.session_id,c=s||!l?d().Il():l,u=null==i||null===(t=i.state.session)||void 0===t?void 0:t.render_id,m=s||!u?d().Il():u;if(null===(o=f.NativeMobileActionBarStore)||void 0===o||o.update((e=>({...e,session:{session_id:c,render_id:m}}))),V.current={isOpen:n,sectionsState:a},(r||s)&&n){const e=Boolean(se&&(0,le().Nm)(se)),t=null==se?void 0:se.getType(),o=Boolean(t&&Ne[t]),i=null==_e?void 0:_e.startIndex,n=null==_e?void 0:_e.endIndex,a=Te().default.state.stores[0];(0,ee().j)({environment:f,event:{eventName:"mobile_action_bar_render",eventProperties:{session_id:c,render_id:m,block_type:null==a?void 0:a.getType(),is_editing_title:De(),text_selection_start_index:i,text_selection_end_index:n,is_indentable:o,is_empty:e,is_editing_header:qe(se),algorithm_version:j}}})}}),[f,Fe,je,L.shouldShow,se,_e,j]),(0,r().L)((0,i.useCallback)((()=>{h&&h({type:"unmount",id:""})}),[h])),(0,Le.jsx)(Oe,{isOpen:L.shouldShow,canShow:L.canShowNativeBar,isEmpty:L.isEmpty,schema:Fe,onAction:He,fallbackRenderer:o&&(()=>o(n))})}function Ue(){return Te().default.state.stores}function De(){return(0,te().JE)()||(0,te().VV)()}function qe(e){const t=null==e?void 0:e.getType();return"header"===t||"sub_header"===t||"sub_sub_header"===t}function Ke(e){return(0,oe().yU)({environment:e})}function Ge(e,t){return ae().Tz({environment:e,store:t})}function ze(e){const t="editing"===Me().default.state.mode&&Me().default.state.multiSelection,o=e.state.savedTextSelectionStoreState,i=o&&"editing"===o.mode&&o.multiSelection;return t||i||void 0}function Qe(e){var t;const o=ze(e);return o&&(null===(t=(0,se().tp)({multiSelection:o,focus:void 0,filterCommonAncestors:!1}))||void 0===t?void 0:t.stores)}function We(e){let t;switch(e){case void 0:break;case"suggested":t=ne().Z.formatMessage(Ee.subMenuLabelSuggested);break;case"slashMenu":t=ve().Z.state.open&&ve().Z.state.isAddMenu?ne().Z.formatMessage(Ee.subMenuLabelInsert):ne().Z.formatMessage(Ee.subMenuLabelTurnInto);break;case"turnInto":t=ne().Z.formatMessage(Ee.subMenuLabelTurnInto);break;case"textFormatting":t=ne().Z.formatMessage(Ee.subMenuLabelTextFormatting);break;case"textColor":case"textSelectionColor":t=ne().Z.formatMessage(Ee.subMenuLabelTextColor)}return t?{selectedSubMenuLabel:t}:void 0}},997823:(e,t,o)=>{o.r(t),o.d(t,{default:()=>dt,handleCancelQuickAdd:()=>Ct});o(670560),o(267602),o(228244);var i=o(667294),n=()=>o(492788),a=()=>o(219727),r=()=>o(142735),s=()=>o(846550),l=()=>o(317924),c=()=>o(751052),d=()=>o(506347),u=()=>o(161002),m=()=>o(836273),g=()=>o(396136),b=()=>o(492522),p=()=>o(788860),h=()=>o(707513),f=()=>o(491927),v=()=>o(353141),y=()=>o(253502),x=()=>o(525038),S=()=>o(47443),k=()=>o(497065),C=()=>o(96271),T=()=>o(879952),M=()=>o(224597),w=()=>o(990966),B=()=>o(269299),_=()=>o(663366),A=()=>o(853516),I=()=>o(152027),j=()=>o(874018),P=()=>o(19029),Z=()=>o(958783),R=()=>o(174939),V=()=>o(912701),F=()=>o(71410),L=()=>o(594546),E=()=>o(718959),N=()=>o(247724),O=()=>o(286338),H=()=>o(352230),U=()=>o(239482),D=()=>o(549813),q=()=>o(148126),K=()=>o(345918),G=()=>o(90065),z=()=>o(480089),Q=()=>o(677559),W=()=>o(466970),J=()=>o(518530),$=()=>o(787352),Y=()=>o(560962),X=()=>o(827282),ee=o(785893);const te=(0,X().IU)("mobileQuickCaptureComment",{viewBox:"0 0 14 14",svg:(0,ee.jsx)("path",{d:"M4.25781 13.373C4 13.373 3.79688 13.2891 3.64844 13.1211C3.50391 12.9531 3.43164 12.7285 3.43164 12.4473V11.0586H3.0918C2.53711 11.0586 2.05469 10.9473 1.64453 10.7246C1.23438 10.502 0.916016 10.1816 0.689453 9.76367C0.466797 9.3457 0.355469 8.84375 0.355469 8.25781V3.66992C0.355469 3.08398 0.464844 2.58203 0.683594 2.16406C0.90625 1.74609 1.22656 1.42578 1.64453 1.20312C2.0625 0.976562 2.56641 0.863281 3.15625 0.863281H10.8379C11.4316 0.863281 11.9355 0.976562 12.3496 1.20312C12.7676 1.42578 13.0859 1.74609 13.3047 2.16406C13.5273 2.58203 13.6387 3.08398 13.6387 3.66992V8.25781C13.6387 8.84375 13.5273 9.3457 13.3047 9.76367C13.0859 10.1816 12.7676 10.502 12.3496 10.7246C11.9355 10.9473 11.4316 11.0586 10.8379 11.0586H7.32227L5.33008 12.8164C5.11133 13.0078 4.92188 13.1484 4.76172 13.2383C4.60547 13.3281 4.4375 13.373 4.25781 13.373ZM4.57422 11.9141L6.42578 10.0918C6.55469 9.95898 6.67578 9.87109 6.78906 9.82812C6.90234 9.78125 7.05273 9.75781 7.24023 9.75781H10.7793C11.3027 9.75781 11.6934 9.62695 11.9512 9.36523C12.209 9.10352 12.3379 8.71484 12.3379 8.19922V3.72266C12.3379 3.21094 12.209 2.82422 11.9512 2.5625C11.6934 2.30078 11.3027 2.16992 10.7793 2.16992H3.21484C2.6875 2.16992 2.29492 2.30078 2.03711 2.5625C1.7832 2.82422 1.65625 3.21094 1.65625 3.72266V8.19922C1.65625 8.71484 1.7832 9.10352 2.03711 9.36523C2.29492 9.62695 2.6875 9.75781 3.21484 9.75781H4.07031C4.24219 9.75781 4.36914 9.79688 4.45117 9.875C4.5332 9.94922 4.57422 10.0781 4.57422 10.2617V11.9141ZM4.04102 4.47266C3.93555 4.47266 3.8457 4.43555 3.77148 4.36133C3.70117 4.2832 3.66602 4.19336 3.66602 4.0918C3.66602 3.98633 3.70117 3.89648 3.77148 3.82227C3.8457 3.74805 3.93555 3.71094 4.04102 3.71094H9.90039C10.0059 3.71094 10.0957 3.74805 10.1699 3.82227C10.2441 3.89648 10.2812 3.98633 10.2812 4.0918C10.2812 4.19336 10.2441 4.2832 10.1699 4.36133C10.0957 4.43555 10.0059 4.47266 9.90039 4.47266H4.04102ZM4.04102 6.30664C3.93555 6.30664 3.8457 6.26953 3.77148 6.19531C3.70117 6.12109 3.66602 6.03125 3.66602 5.92578C3.66602 5.82422 3.70117 5.73438 3.77148 5.65625C3.8457 5.57812 3.93555 5.53906 4.04102 5.53906H9.90039C10.0059 5.53906 10.0957 5.57812 10.1699 5.65625C10.2441 5.73047 10.2812 5.82031 10.2812 5.92578C10.2812 6.03125 10.2441 6.12109 10.1699 6.19531C10.0957 6.26953 10.0059 6.30664 9.90039 6.30664H4.04102ZM4.04102 8.14648C3.93555 8.14648 3.8457 8.10938 3.77148 8.03516C3.70117 7.95703 3.66602 7.86719 3.66602 7.76562C3.66602 7.66016 3.70117 7.57031 3.77148 7.49609C3.8457 7.41797 3.93555 7.37891 4.04102 7.37891H7.86133C7.9668 7.37891 8.05664 7.41602 8.13086 7.49023C8.20508 7.56445 8.24219 7.65625 8.24219 7.76562C8.24219 7.86719 8.20508 7.95703 8.13086 8.03516C8.05664 8.10938 7.9668 8.14648 7.86133 8.14648H4.04102Z"})}),oe=(0,X().IU)("mobileTopbarComments",{viewBox:"0 0 26 26",svg:(0,ee.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.95898 5.69632C1.95898 3.82135 3.48993 2.29041 5.3649 2.29041H20.6364C22.5114 2.29041 24.0423 3.82135 24.0423 5.69632V15.656C24.0423 17.531 22.5114 19.0619 20.6364 19.0619H13.59L7.81729 23.5518C7.59118 23.7276 7.28464 23.7593 7.02732 23.6335C6.77 23.5076 6.60683 23.2462 6.60683 22.9598V19.0619H5.3649C3.48993 19.0619 1.95898 17.531 1.95898 15.656V5.69632ZM5.3649 3.79041C4.31836 3.79041 3.45898 4.64978 3.45898 5.69632V15.656C3.45898 16.7025 4.31836 17.5619 5.3649 17.5619H7.35683C7.77105 17.5619 8.10683 17.8977 8.10683 18.3119V21.4263L12.8722 17.7199C13.0038 17.6175 13.1659 17.5619 13.3326 17.5619H20.6364C21.6829 17.5619 22.5423 16.7025 22.5423 15.656V5.69632C22.5423 4.64978 21.6829 3.79041 20.6364 3.79041H5.3649ZM6.60676 7.02433C6.60676 6.61011 6.94255 6.27433 7.35676 6.27433H18.6444C19.0586 6.27433 19.3944 6.61011 19.3944 7.02433C19.3944 7.43854 19.0586 7.77433 18.6444 7.77433H7.35676C6.94255 7.77433 6.60676 7.43854 6.60676 7.02433ZM6.60676 10.6756C6.60676 10.2614 6.94255 9.92559 7.35676 9.92559H18.6444C19.0586 9.92559 19.3944 10.2614 19.3944 10.6756C19.3944 11.0898 19.0586 11.4256 18.6444 11.4256H7.35676C6.94255 11.4256 6.60676 11.0898 6.60676 10.6756ZM6.60669 14.328C6.60669 13.9138 6.94248 13.578 7.35669 13.578H14.6605C15.0747 13.578 15.4105 13.9138 15.4105 14.328C15.4105 14.7422 15.0747 15.078 14.6605 15.078H7.35669C6.94248 15.078 6.60669 14.7422 6.60669 14.328Z"})});var ie=()=>o(280217),ne=()=>o(657174),ae=()=>o(681819),re=()=>o(790891),se=()=>o(772529),le=()=>o(365872),ce=()=>o(779733),de=()=>o(793935),ue=()=>o(589525),me=()=>o(291335),ge=()=>o(980316),be=()=>o(998901),pe=()=>o(297861),he=()=>o(876822),fe=()=>o(302353),ve=()=>o(241449),ye=()=>o(452002),xe=()=>o(826955),Se=()=>o(127519),ke=()=>o(374469),Ce=()=>o(342267),Te=()=>o(527308),Me=()=>o(154186),we=()=>o(448419),Be=()=>o(1910),_e=()=>o(198829),Ae=()=>o(470386),Ie=()=>o(967092),je=()=>o(943620),Pe=()=>o(384241),Ze=()=>o(396439),Re=()=>o(12530),Ve=()=>o(844659),Fe=()=>o(857773),Le=()=>o(648432);function Ee(){const e=(0,i.useCallback)((()=>(0,ee.jsx)(Le().Z,{message:(0,ee.jsx)(p()._H,{defaultMessage:"Any changes to this page will show up here.",id:"updatesModal.currentPageTab.emptyPrompt"}),title:(0,ee.jsx)(p()._H,{defaultMessage:"No page updates",id:"updatesModal.currentPageTab.emptyPromptTitle"})})),[]),t=(0,r().VK)((()=>he().default.state.currentSpaceStore),[]),o=(0,r().VK)((()=>he().default.state.mainEditorCurrentBlockStore),[]),n=(0,r().VK)((()=>{var e;const t=null==o||null===(e=o.getCollectionPointer())||void 0===e?void 0:e.id,i=null==o?void 0:o.isCollectionView();return null!=o&&o.isDefined()?{id:o.id,isCollection:i,collectionId:t}:void 0}),[o]),a=(0,s().yK)((()=>({getNotifiedFor:{padding:18}})),[]);return t&&n&&o?(0,ee.jsxs)("div",{children:[(0,ee.jsx)(ne().Xm,{navigableBlockStore:o,from:"page_updates",buttonPopupStore:Ve().Z,style:a.getNotifiedFor}),(0,ee.jsx)(Fe().Z,{navigableBlockStore:o,collectionId:n.collectionId,spaceId:t.id,empty:e,source:"updates_sidebar"},"current-page")]}):null}var Ne=()=>o(44105),Oe=()=>o(946735),He=()=>o(981476),Ue=()=>o(115699);const De=(0,X().IU)("mobileQuickCaptureChevronLeft",{viewBox:"0 0 8 14",svg:(0,ee.jsx)("path",{d:"M-0.00488281 7.06445C-0.000325521 6.92318 0.0270182 6.79329 0.0771484 6.6748C0.131836 6.55632 0.213867 6.44238 0.323242 6.33301L5.58691 1.18555C5.76009 1.01237 5.97201 0.925781 6.22266 0.925781C6.39583 0.925781 6.55078 0.966797 6.6875 1.04883C6.82878 1.13086 6.94043 1.24251 7.02246 1.38379C7.10905 1.52051 7.15234 1.67318 7.15234 1.8418C7.15234 2.09701 7.05664 2.32031 6.86523 2.51172L2.18262 7.06445L6.86523 11.6172C7.05664 11.8132 7.15234 12.0365 7.15234 12.2871C7.15234 12.4603 7.10905 12.6152 7.02246 12.752C6.94043 12.8887 6.82878 12.998 6.6875 13.0801C6.55078 13.1621 6.39583 13.2031 6.22266 13.2031C5.97201 13.2031 5.76009 13.1165 5.58691 12.9434L0.323242 7.7959C0.20931 7.68652 0.125 7.57259 0.0703125 7.4541C0.0201823 7.33105 -0.00488281 7.20117 -0.00488281 7.06445Z"})}),qe=(0,X().IU)("mobileTopbarArrowLeft",{viewBox:"0 0 26 26",svg:(0,ee.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,ee.jsx)("path",{d:"M3.83496 12.1544C3.83496 11.9317 3.92578 11.7354 4.10742 11.5655L9.92578 5.75592C10.0195 5.66217 10.1133 5.59479 10.207 5.55377C10.3066 5.51276 10.4092 5.49225 10.5146 5.49225C10.7314 5.49225 10.9131 5.56549 11.0596 5.71198C11.2119 5.8526 11.2881 6.03131 11.2881 6.24811C11.2881 6.35358 11.2676 6.45612 11.2266 6.55573C11.1914 6.64948 11.1387 6.73151 11.0684 6.80182L9.09961 8.80573L5.61914 11.9874L5.43457 11.5479L8.26465 11.3721H19.3828C19.6113 11.3721 19.7959 11.4454 19.9365 11.5919C20.083 11.7383 20.1562 11.9258 20.1562 12.1544C20.1562 12.3829 20.083 12.5704 19.9365 12.7169C19.7959 12.8633 19.6113 12.9366 19.3828 12.9366H8.26465L5.43457 12.7608L5.61914 12.3301L9.09961 15.503L11.0684 17.5069C11.1387 17.5772 11.1914 17.6622 11.2266 17.7618C11.2676 17.8555 11.2881 17.9551 11.2881 18.0606C11.2881 18.2774 11.2119 18.4561 11.0596 18.5967C10.9131 18.7432 10.7314 18.8165 10.5146 18.8165C10.3037 18.8165 10.1133 18.7344 9.94336 18.5704L4.10742 12.7432C3.92578 12.5733 3.83496 12.377 3.83496 12.1544Z",fill:"#32302C"})})}),Ke=(0,X().IU)("mobileTopbarArrowRight",{viewBox:"0 0 26 26",svg:(0,ee.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,ee.jsx)("path",{d:"M20.1562 12.1544C20.1562 12.377 20.0684 12.5733 19.8926 12.7432L14.0479 18.5704C13.8779 18.7344 13.6875 18.8165 13.4766 18.8165C13.2598 18.8165 13.0781 18.7432 12.9316 18.5967C12.7852 18.4561 12.7119 18.2774 12.7119 18.0606C12.7119 17.9551 12.7295 17.8555 12.7646 17.7618C12.7998 17.6622 12.8525 17.5772 12.9229 17.5069L14.8916 15.503L18.3809 12.3301L18.5566 12.7608L15.7266 12.9366H4.6084C4.37988 12.9366 4.19238 12.8633 4.0459 12.7169C3.90527 12.5704 3.83496 12.3829 3.83496 12.1544C3.83496 11.9258 3.90527 11.7383 4.0459 11.5919C4.19238 11.4454 4.37988 11.3721 4.6084 11.3721H15.7266L18.5566 11.5479L18.3809 11.9874L14.8916 8.80573L12.9229 6.80182C12.8525 6.73151 12.7998 6.64948 12.7646 6.55573C12.7295 6.45612 12.7119 6.35358 12.7119 6.24811C12.7119 6.03131 12.7852 5.8526 12.9316 5.71198C13.0781 5.56549 13.2598 5.49225 13.4766 5.49225C13.582 5.49225 13.6816 5.51276 13.7754 5.55377C13.875 5.59479 13.9717 5.66217 14.0654 5.75592L19.8926 11.5655C20.0684 11.7354 20.1562 11.9317 20.1562 12.1544Z",fill:"#32302C"})})});var Ge=()=>o(241653);const ze=(0,X().IU)("mobileTopbarChevronRight",{viewBox:"0 0 26 26",svg:(0,ee.jsxs)("svg",{width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,ee.jsx)("path",{d:"M17.6504 13.0001L9.85039 20.8001",strokeWidth:"1.5",strokeLinecap:"round"}),(0,ee.jsx)("path",{d:"M17.6504 13.0001L9.85039 5.20012",strokeWidth:"1.5",strokeLinecap:"round"})]})});var Qe=()=>o(265456);const We=(0,p().vU)({back:{defaultMessage:"Back",id:"mobile.topbar.back"},forward:{defaultMessage:"Forward",id:"mobile.topbar.forward"}});function Je(e){let{supportsNativeHomeTabPhone:t,styling:o,defaultMobileButtonStyle:i}=e;const n=(0,a().O7)(),s=(0,r().VK)((()=>!t&&!q().NW(n)),[t,n]),{isTablet:l}=(0,a().Fy)(),c=(0,Qe().Kr)(),d=(0,p().YB)(),u=(0,W().E)("tablet_refresh_gate");let m,g;return"mobile_horizon1_quick_capture_circle_icons"===o?(m=De(c.mobile_horizon1_quick_capture_circle_icons.iconStyle),g={...c.mobile_horizon1_quick_capture_circle_icons.iconContainer,marginLeft:16}):l&&u?(m=qe({width:24,height:24}),g={...i,fill:c.mobile_horizon1_quick_capture.iconStyle.fill}):(m=(0,Ge().V)({width:24,height:24}),g={...i,fill:c.mobile_horizon1_quick_capture.iconStyle.fill}),(0,ee.jsx)(Me().Z,{onClick:()=>function(e,t){const{mobileNative:o}=e;q().__(e)||!t||q().NW(e)?k().op(e):null==o||o.showNativeHomeTab()}(n,t),className:"notion-history-back-button",disabled:s,disabledFeedback:!0,mobileFeedback:!0,style:g,ariaLabel:d.formatMessage(We.back),children:m})}function $e(e){let{defaultMobileButtonStyle:t}=e;const o=(0,a().O7)(),i=(0,r().VK)((()=>!q().vy(o)),[o]),{isTablet:n}=(0,a().Fy)(),s=(0,W().E)("tablet_refresh_gate"),l=(0,p().YB)();let c;return c=n&&s?Ke({width:24,height:24}):ze({width:24,height:24}),(0,ee.jsx)(Me().Z,{onClick:()=>{k().eH()},className:"notion-history-forward-button",disabled:i,mobileFeedback:!0,disabledFeedback:!0,style:t,ariaLabel:l.formatMessage(We.forward),children:c})}const Ye=function(e){let{supportsNativeHomeTabPhone:t,styling:o}=e;const{isTablet:i}=(0,a().Fy)(),n=(0,s().yK)((e=>({container:t?{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",paddingLeft:4,paddingRight:t||i?0:4}:{display:"flex",flexShrink:0,height:"100%",paddingLeft:4,paddingRight:t||i?0:4},defaultMobileButtonStyle:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:32,stroke:e.icon.primary}})),[t,i]);return(0,ee.jsx)(F().Z,{capture:!0,render:e=>(0,ee.jsxs)("div",{style:n.container,...e,children:[(0,ee.jsx)(Je,{supportsNativeHomeTabPhone:t,styling:o,defaultMobileButtonStyle:n.defaultMobileButtonStyle}),!t&&(0,ee.jsx)($e,{defaultMobileButtonStyle:n.defaultMobileButtonStyle})]})})};var Xe=()=>o(767628),et=()=>o(234004),tt=()=>o(211009),ot=()=>o(71064),it=()=>o(403878),nt=()=>o(259878),at=()=>o(451102),rt=()=>o(302358),st=()=>o(730764);const lt=(0,p().vU)({comments:{id:"topbarMobile.commentsButton.label",defaultMessage:"Comments"}});function ct(e,t){(0,L().K4)(e,"page_creation_topbar_click",t)}const dt=function(e){const t=(0,a().O7)(),{store:n,banners:s,shouldShowAddTo:l}=e,{device:c}=t,d=(0,r().VK)((()=>n&&(0,o(122479).IJ)(t,n)),[t,n]),u=(0,i.useMemo)((()=>new(o(385021).Z)),[]),m=(0,r().VK)((()=>{if(!n)return!1;const e=(n.isLocked()||u.state.justUnlocked)&&n.canEdit();return(!d||n.canEditCollection())&&c.isPhone&&(n.isRestricted()&&!(0,ce().E1)()||e)}),[n,u,d,c]),g=(0,r().VK)((()=>(0,ce().E1)()),[]);return(0,ee.jsx)(F().Z,{capture:!0,render:i=>(0,ee.jsxs)("header",{...i,style:{width:"100%",maxWidth:"100vw",zIndex:b().lI},children:[d&&n?(0,ee.jsx)(Mt,{store:n,shouldShowAddTo:l,showTopPadding:!0}):(0,ee.jsx)(Pt,{...e,showTopPadding:!0}),n&&(0,ee.jsx)(o(87098).kE,{blockStore:n}),m&&n&&(0,ee.jsx)(o(489434).j,{label:(0,ee.jsx)("div",{children:(0,ee.jsx)(Ne().Z,{store:n,lockStore:u},n.id)}),tint:"gray",display:"full-width",actions:n.isRestricted()&&!g?[{label:(0,ee.jsx)(at().Z,{onClick:()=>le().lG(t)}),onClick:()=>{}}]:void 0}),(0,ee.jsx)(o(188407).t,{banners:s,isMobile:!0,isInPeekRenderer:!1})]})})};function ut(){const e={menuType:H().o.Modal,title:(0,ee.jsx)(p()._H,{defaultMessage:"Page Updates",id:"pageUpdatesModal.mobileMenu.title"}),right:(0,ee.jsx)(Ae().DoneMenuText,{}),onClickRight:()=>ye().Z.setState({open:!1}),whiteBackground:!0},t=(0,r().VK)((()=>ye().Z.state.open),[]);return(0,ee.jsx)(Ie().ZP,{open:t,popupType:we().Z4.SlideUp,alignmentToOrigin:be().Alignment.Start,placementToOrigin:be().Placement.Right,onDismiss:()=>ye().Z.setState({open:!1}),originGap:0,isWideTabletWidth:!0,render:()=>(0,ee.jsx)(_e().Z,{...e,children:(0,ee.jsx)(Ee,{})}),isFullWidthOnMobile:!0,preventScaleTransition:!0})}function mt(e){const t=e.getParentStore(),{currentSpaceStore:o}=he().default.state;return t instanceof xe().H2&&o&&t.id===o.id}function gt(e,t){return e&&function(e){return e.isEmptyTitle()&&e.isEmptyPage()}(t)}function bt(e){let{store:t,spaceViewStore:o,isInvalidPage:i}=e;const n=(0,z().cR)(t);return i||!o?null:(0,ee.jsxs)(ee.Fragment,{children:[!n&&(0,ee.jsx)(it().Z,{store:t,spaceViewStore:o}),(0,ee.jsx)(re().Z,{})]})}function pt(e){let{store:t,isLastButton:o,styling:i}=e;return(0,ee.jsx)(R().K,{store:t,buttonPopupStore:ke().Z,isLastButton:o,styling:i})}function ht(e){let{store:t,styling:o}=e;return(0,ee.jsx)(V().j,{store:t,buttonPopupStore:Ce().Z,styling:o})}function ft(e){return(0,pe().Y)("supportsNativeHome")&&e.device.isTablet}function vt(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2?arguments[2]:void 0;const{mobileNative:i}=e;return{flexGrow:0,marginLeft:null!=i&&i.supportsNativeHomeOnPhone()?t?0:20:2,overflow:"auto",WebkitOverflowScrolling:"touch",marginRight:o?16:8,height:"100%"}}function yt(){const e=(0,a().O7)(),t=(0,r().VK)((()=>(0,ue().Jr)(e)&&me().sidebarExpandedStore.state),[e]);return(0,ee.jsxs)(Me().Z,{mobileFeedback:!0,style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,height:"100%",width:36,marginLeft:4},onClick:()=>{var t;if(ft(e))null===(t=e.mobileNative)||void 0===t||t.toggleNativeHome();else if((0,ue().Jr)(e))de().setExpand({environment:e,isExpanded:!me().sidebarExpandedStore.state,from:"topbar_mobile",saveDetailsSidebarPreference:!0});else{var o;const{NativeMobileActionBarStore:t}=e,i=t?null===(o=t.state.menu)||void 0===o?void 0:o.type:void 0;"editing"===Se().default.state.mode||void 0!==i?(w().clear({environment:e}),null==t||t.clear(!1),fe().default.onHide((()=>{n().default.afterNextFlush((()=>de().open({fromElectron:!1})))}))):de().open({fromElectron:!1})}v().jD(e)},children:[(0,Y()._)({width:18,height:18}),t?(0,ee.jsx)(Re().Z,{color:Re().N.Red,style:{position:"absolute",top:9,right:1},count:0}):(0,ee.jsx)(ne().k2,{type:e.device.isMobileBrowser?"allSpaces":"otherSpaces",color:Re().N.Red,style:{position:"absolute",top:9,right:1}})]})}function xt(e){let{defaultMobileButtonStyle:t}=e;const o=(0,a().O7)(),i=(0,r().VK)((()=>(0,ue().Jr)(o)&&me().sidebarExpandedStore.state),[o]),s={...t,fill:(0,Qe().Kr)().mobile_horizon1_quick_capture.iconStyle.fill};return(0,ee.jsxs)(Me().Z,{mobileFeedback:!0,style:s,onClick:()=>{var e;if(ft(o))null===(e=o.mobileNative)||void 0===e||e.toggleNativeHome();else if((0,ue().Jr)(o))de().setExpand({environment:o,isExpanded:!me().sidebarExpandedStore.state,from:"topbar_mobile",saveDetailsSidebarPreference:!0});else{var t;const{NativeMobileActionBarStore:e}=o,i=e?null===(t=e.state.menu)||void 0===t?void 0:t.type:void 0;"editing"===Se().default.state.mode||void 0!==i?(w().clear({environment:o}),null==e||e.clear(!1),fe().default.onHide((()=>{n().default.afterNextFlush((()=>de().open({fromElectron:!1})))}))):de().open({fromElectron:!1})}v().jD(o)},children:[(0,ie().$)({width:22,height:17}),i?(0,ee.jsx)(Re().Z,{color:Re().N.Red,style:{position:"absolute",top:9,right:1},count:0}):(0,ee.jsx)(ne().k2,{type:o.device.isMobileBrowser?"allSpaces":"otherSpaces",color:Re().N.Red,style:{position:"absolute",top:9,right:1}})]})}function St(e,t,o,i){const{WindowSizeStore:n}=t;let a=`0 ${1/(window.devicePixelRatio||1)}px 0 ${o.regularDividerColor}`;return((0,O().oj)(t)||e)&&(a=void 0),{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",maxWidth:"100vw",height:c().g5,marginTop:i?n.state.paddingTopCSS:0,paddingLeft:n.getSafePaddingLeftCSS(0),paddingRight:e?n.getSafePaddingRightCSS(0):n.getSafePaddingRightCSS(7),boxShadow:a,background:o.contentBackground,transition:"box-shadow 300ms",userSelect:"none",cursor:"pointer"}}function kt(e){T().ZH({environment:e})}function Ct(e,t){const o=he().default.state.mainEditorCurrentBlockStore,i=ve().default.state.lastPageId;if(o){var n;const a=null===(n=e.mobileNative)||void 0===n?void 0:n.supportsNativeHomeOnPhone();a?C().navigateToHomeTab(e):i?S()._c({environment:e,store:xe().G.createChildStore(o,{table:g().iU,id:i}),showMoveTo:!1,saveParent:!1,redirect:a,pageVisitSource:d().tY.BackForward}):k().c4({environment:e,url:m()._j.root,redirect:!0}),t.isMobileHorizon1QuickCapture&&ct(e,{action:"cancel"}),B().createAndCommit({userAction:"TopbarMobile.handleCancelQuickAdd",environment:e,canUndo:!0,perform:t=>{_().y8({environment:e,blocks:[o],transaction:t}),t.postSubmitCallbacks.push((t=>{t||f().dh(e,{analyticsName:"delete",from:"mobile_topbar",block_id:o.id,block_type:"page"})}))}})}}async function Tt(e,t){await x().$X({environment:t,blocks:[e],moveToContext:"quick_add",onAccept:e=>function(e){v().xx(e)}(t),isAddTo:!0,isDefaultPrivateLocation:mt(e)})}function Mt(e){let{store:t,shouldShowAddTo:o,showTopPadding:n}=e;const l=(0,s().Fg)(),c=(0,a().O7)(),u=(0,a().Fy)(),m=Boolean(c.currentUser.isLoggedIn()||c.publicDomainUserId),g=u.isTablet,b=(0,r().VK)((()=>St(o,c,l,n)),[c,o,l,n]),f=(0,r().VK)((()=>vt(c,!0,g)),[c,g]);return(0,ee.jsxs)("div",{onClick:()=>kt(c),style:b,className:N().ZHw,children:[c.currentUser.isLoggedIn()&&(0,ee.jsxs)(i.Fragment,{children:[(0,ee.jsx)(Me().Z,{style:{display:"flex",alignItems:"center",height:"100%",paddingLeft:14,paddingRight:14,fontWeight:h().Ue.medium,color:l.regularTextColor,whiteSpace:"nowrap"},mobileFeedback:!0,onClick:()=>function(e){const{currentUserRootStore:t,currentUserSettingsStore:o}=he().default.state;t&&o&&M().L5({environment:e,userRootStore:t,userSettingsStore:o,pageVisitSource:d().tY.SwitchSpace})}(c),children:(0,ee.jsx)(p()._H,{defaultMessage:"Back",id:"topbarMobile.backButton.label"})}),(0,ee.jsx)("div",{style:{height:18,width:1,flexShrink:0,marginRight:6,background:l.darkDividerColor}})]}),(0,ee.jsx)(A().l2,{store:t,style:f,maxAncestorCount:1,showCurrentPageControls:!1,ancestorMaxWidth:100,currentPageMaxWidth:220,isMobile:!0}),!m&&(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(Xe().Q,{store:t}),(0,ee.jsx)(Ze().Z,{size:8})]}),(0,ee.jsx)(He().Z,{store:t,buttonPopupStore:ke().Z,isSiteTopbar:!m})]})}function wt(e){let{store:t}=e;const o=(0,a().O7)(),i=(0,r().VK)((()=>t.getParentStore()),[t]),n=(0,r().VK)((()=>mt(t)),[t]),l=(0,r().VK)((()=>(null==i?void 0:i.table)===g().iU&&i.isEmptyPage()),[i]),c=(0,r().VK)((()=>!i||!(0,D().JL)(i)||i instanceof xe().Xr?void 0:i.getIcon()),[i]),d=(0,r().VK)((()=>i instanceof xe().H2?(0,K().rn)(o,i):void 0),[o,i]),u=(0,s().yK)((e=>({folderIcon:{width:16,color:e.icon.primary},folderIconContainer:{height:32,width:32,backgroundColor:e.tint.regular,display:"inline-flex",justifyContent:"center",alignItems:"center",borderRadius:4},filingButton:{display:"flex",alignItems:"center",paddingLeft:20,paddingRight:12,fontSize:h().JB.UIRegular.mobile,fontWeight:h().Ue.medium,lineHeight:h().Nv.UIRegular.mobile,whiteSpace:"nowrap",minWidth:0,color:e.text.primary}})),[]);return i&&(0,D().JL)(i)?n?(0,ee.jsxs)(Me().Z,{mobileFeedback:!0,style:u.filingButton,onClick:()=>Tt(t,o),children:[(0,ee.jsx)("div",{style:{marginRight:8,...u.folderIconContainer},children:(0,$().v)(u.folderIcon)}),(0,ee.jsx)(p()._H,{defaultMessage:"Private",id:"topbarMobile.filingPrivateSectionButton.label"})]}):(0,ee.jsxs)(Me().Z,{mobileFeedback:!0,style:u.filingButton,onClick:()=>Tt(t,o),children:[(0,ee.jsx)(je().Z,{disabled:!0,icon:c,isEmptyPage:l,title:d,size:24,style:{marginRight:8}}),(0,ee.jsx)(Pe().Z,{store:i})]}):null}function Bt(){const e=(0,a().O7)(),t=(0,p().YB)(),o=(0,s().yK)((e=>({iconButton:{background:e.tint.regular,marginRight:20,borderRadius:16,width:32,height:32}})),[]);return(0,ee.jsx)(Be().Z,{icon:e=>(0,J().U)({width:20,height:20}),style:o.iconButton,isDarkIconColor:!0,onClick:t=>Ct(e,{isMobileHorizon1QuickCapture:!0}),ariaLabel:t.formatMessage({defaultMessage:"Close",id:"topbarMobile.closeButton.label"})})}function _t(){const e=(0,a().O7)(),t=(0,s().yK)((e=>({doneButton:{display:"flex",alignItems:"center",height:32,paddingLeft:12,paddingRight:12,marginLeft:2,marginRight:16,fontWeight:h().Ue.medium,color:e.text.primary,background:e.tint.regular,borderRadius:16}})),[]);return(0,ee.jsx)(Me().Z,{mobileFeedback:!0,style:t.doneButton,onClick:t=>function(e,t){const o=he().default.state.mainEditorCurrentBlockStore,i=ve().default.state.lastPageId;if(o){var n;const e=null===(n=t.mobileNative)||void 0===n?void 0:n.supportsNativeHomeOnPhone();e?C().navigateToHomeTab(t):i?S()._c({environment:t,store:xe().G.createChildStore(o,{table:g().iU,id:i}),showMoveTo:!1,saveParent:!1,redirect:e,pageVisitSource:d().tY.BackForward}):k().c4({environment:t,url:m()._j.root,redirect:!0}),ct(t,{action:"done"})}}(0,e),children:(0,ee.jsx)(p()._H,{defaultMessage:"Done",id:"topbarMobile.doneQuickAddButton.label"})})}function At(e){let{showingHistoryButtons:t=!0,store:o}=e;const i=(0,a().O7)(),n=(0,a().Fy)().isTablet,s=(0,r().VK)((()=>vt(i,t,n)),[i,n,t]);return(0,ee.jsx)(A().l2,{store:o,style:s,maxAncestorCount:n?2:1,showCurrentPageControls:!1,ancestorMaxWidth:n?160:100,currentPageMaxWidth:n?240:220,isMobile:!0})}function It(e){let{shouldShowCommentsIndicator:t,styling:o}=e;const n=(0,p().YB)(),a=(0,r().VK)((()=>ge().Z.state.open),[]),[s,l]=(0,i.useState)(Date.now());(0,i.useEffect)((()=>{a&&l(Date.now())}),[a]);const c=(0,Qe().Kr)();let d;d="mobile_horizon1_quick_capture_circle_icons"===o?{}:{position:"relative",height:"100%"};const u="mobile_horizon1_quick_capture_circle_icons"===o?te:oe;return(0,ee.jsx)(we().ZP,{buttonPopupStore:ge().Z,popupType:we().Z4.SlideUp,alignmentToOrigin:be().Alignment.Start,placementToOrigin:be().Placement.Right,originGap:0,stopClickPropagation:!0,isWideTabletWidth:!0,render:e=>(0,ee.jsx)(Ue().J,{timeViewed:s,location:"popup",onMobileClose:()=>e.close()}),isFullWidthOnMobile:!0,preventScaleTransition:!0,renderOrigin:e=>(0,ee.jsxs)("div",{style:d,children:[(0,ee.jsx)(Be().Z,{icon:u,iconStyle:c[o].iconStyle,ariaLabel:n.formatMessage(lt.comments),isDarkIconColor:!0,style:c[o].iconContainer,mobileFeedback:!0,...e}),t&&(0,ee.jsx)(tt().Iq,{})]})})}function jt(e){let{store:t,spaceStore:o,spaceViewStore:n,isInvalidPage:s,shouldShowAddTo:l,styling:c}=e;const d=(0,a().O7)(),{isTablet:u}=(0,a().Fy)(),m=(0,W().E)("tablet_refresh_gate"),{value:g}=(0,Q().XJ)(j().commentsDependency),b=(0,r().VK)((()=>{if(!g)return!1;const{discussionViewActions:e,discussionHelpers:{getAndSortCommentStoresByTime:o}}=g;return(0,P().getDiscussions)(t).some((t=>!t.getResolved()&&o(t).some((o=>e.isCommentUnread({discussionStore:t,commentStore:o})))))}),[g,t]),p=(0,r().VK)((()=>Boolean(o&&!o.canEdit())),[o]),h=(0,r().VK)((()=>t.canEdit()),[t]),f=(0,r().VK)((()=>t.isFormBlock()),[t]),v=(0,et().shouldShowTopbarShareMenu)({isSpaceGuest:p,canEditPage:h,isPersonalHomePage:!1,isFormBlock:f,isTranslated:!1}),x=(0,r().VK)((()=>(0,et().shouldShowTopbarUpdatesMenu)({canEditPage:h,device:d.device,isPersonalHomePage:!1,isFormBlock:!1,isTranslated:!1})),[h,d.device]),S=(0,r().VK)((()=>Z().default.state.open),[]),k=(0,r().VK)((()=>!l&&(!t.isCollectionView()||t.isCollectionViewPageWithContent())&&!f),[f,l,t]),C=!f,T=b||S;return s?null:(0,ee.jsxs)(i.Fragment,{children:[u&&(0,ee.jsx)("div",{style:{width:16}}),(0,ee.jsx)(ut,{}),v&&(0,ee.jsx)(ht,{store:t,styling:c}),k&&(0,ee.jsx)(It,{shouldShowCommentsIndicator:T,styling:c}),u&&m&&(0,ee.jsx)(it().Z,{store:t,spaceViewStore:n,isTablet:u,styling:c}),x&&(0,ee.jsx)(rt().lI,{onClick:()=>function(e){ye().Z.setState({open:!0}),y().gM(e)}(d)}),C&&(0,ee.jsx)(pt,{store:t,isLastButton:!l,styling:c}),l&&(0,ee.jsx)(_t,{}),(0,ee.jsx)("div",{style:{width:4}})]})}function Pt(e){const t=(0,s().Fg)(),o=(0,a().O7)(),{isTablet:i}=(0,a().Fy)(),{shouldShowAddTo:n,routerState:c,store:d,spaceStore:u,spaceViewStore:m,isInvalidPage:g,pageVisitStore:b,presenceStore:p,hideActionButtons:h,showTopPadding:f,isSidebarExpanded:v}=e,y=(0,r().VK)((()=>function(e){const{shouldShowAddTo:t,environment:o}=e,{TabbedRouterStore:i}=o;if(t)return!1;const n=(0,q().NW)(o)||"native"===(0,l().w_)(i.state).type;return!(0,q().__)(o)||n}({shouldShowAddTo:n,environment:o})),[n,o]),x=(0,r().VK)((()=>{var e;return null===(e=o.mobileNative)||void 0===e?void 0:e.supportsNativeHomeOnPhone()}),[o.mobileNative]),{isDraftPost:S,isPersonalHome:k,isTeamHome:C,isMyTasks:T,isFormBlock:M,teamStore:w,canEdit:B,canEditCollection:_,isRestricted:A,shouldShowCancelQuickAdd:j}=(0,r().VK)((()=>d?{isDraftPost:d.isPost()&&!d.isPublishedPost(),isRestricted:d.isRestricted(),canEdit:d.canEdit(),canEditCollection:d.canEditCollection(),shouldShowCancelQuickAdd:gt(n,d),isMyTasks:(0,E().qG)(d.id),isPersonalHome:(0,se().WE)(d),isTeamHome:!1,isFormBlock:d.isFormBlock(),teamStore:void 0}:{isRestricted:!1,canEdit:!1,canEditCollection:!1,isPersonalHome:!1,isTeamHome:!0,isMyTasks:!1,isFormBlock:!1,shouldShowCancelQuickAdd:!1,teamStore:u&&xe().t1.createChildStore(u,{table:"team",id:c.route.teamId,spaceId:u.id})}),[d,u,c,n]),P=(0,r().VK)((()=>(0,O().oj)(o)?"mobile_horizon1_quick_capture_circle_icons":"mobile_horizon1_quick_capture"),[o]),Z=(0,r().VK)((()=>(0,ce().E1)()),[]);let R;j?R=(0,ee.jsx)(Bt,{}):T&&d?R=(0,ee.jsx)(bt,{store:d,spaceViewStore:m,isInvalidPage:g}):d&&(R=(0,ee.jsx)(jt,{store:d,spaceStore:u,spaceViewStore:m,isInvalidPage:g,shouldShowAddTo:n,styling:P}));const V=k&&d?(0,ee.jsx)(ae().E,{store:d,isInvalidPage:Boolean(g)}):C&&w?(0,ee.jsx)(Te().o,{teamStore:w}):(0,ee.jsxs)(ee.Fragment,{children:[A&&i&&!Z&&(0,ee.jsx)(at().Z,{style:{marginRight:8},onClick:()=>le().lG(o)}),i&&B&&d&&b&&p&&(0,ee.jsx)(nt().ZP,{rootStore:d,pageVisitStore:b,presenceStore:p}),R]}),F=(0,r().VK)((()=>St(n||Boolean(S),o,t,f)),[o,n,t,f,S]),L=(0,r().VK)((()=>function(e){return ft(e)||!(0,pe().Y)("supportsNativeHome")}(o)),[o]),H=(0,r().VK)((()=>function(e,t){return e&&(0,O().yU)({environment:t})}(n,o)),[o,n]),U=(0,r().VK)((()=>!n&&("mobile_horizon1_quick_capture_circle_icons"!==P&&(!g&&!M))),[n,P,g,M]),D=(0,r().VK)((()=>(0,G().$v)({blockStore:d})),[d]),K=(0,W().E)("tablet_refresh_gate"),z=(0,s().yK)((()=>({tabletSidebarButton:{height:24,marginLeft:19,marginRight:17,marginTop:26,marginBottom:21,width:"auto"}})),[]);return(0,ee.jsx)("div",{onClick:()=>kt(o),style:F,className:N().ZHw,children:S&&d?(0,ee.jsx)(Zt,{store:d}):(0,ee.jsxs)(ee.Fragment,{children:[L&&!v&&i&&K&&(0,ee.jsx)(xt,{defaultMobileButtonStyle:z.tabletSidebarButton}),L&&i&&!K&&(0,ee.jsx)(yt,{}),L&&!i&&(0,ee.jsx)(yt,{}),y&&(i||x)&&(0,ee.jsx)(Ye,{supportsNativeHomeTabPhone:x,styling:P}),U&&d&&(0,ee.jsx)(At,{store:d,showingHistoryButtons:y}),D&&d&&(0,ee.jsx)(Oe().Dr,{blockStore:d}),M&&d&&(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(Pe().Z,{store:d,removeIfEmpty:!0,style:{fontSize:14,paddingLeft:6}}),(0,ee.jsx)(Ze().Z,{size:8})]}),H&&d&&(0,ee.jsx)(wt,{store:d}),_&&i&&d&&(0,ee.jsx)(Ne().Z,{store:d},d.id),(0,ee.jsx)(ot().Z,{}),!h&&!M&&V,M&&!h&&d?(0,ee.jsx)(I().Z,{formBlockStore:d,inPeekMode:!1}):null]})})}function Zt(e){const{store:t}=e,o=(0,a().O7)(),n=(0,p().YB)(),r=(0,i.useCallback)((()=>{if(!t)return;const e=(0,U().VP)(t);e&&k().c4({environment:o,url:(0,u().y)({teamId:e.id})})}),[o,t]),l=(0,s().yK)((e=>({doneButton:{display:"flex",alignItems:"center",height:32,paddingLeft:12,paddingRight:12,marginRight:16,fontWeight:h().Ue.medium,color:e.text.primary,background:e.tint.regular,borderRadius:16},iconButton:{marginLeft:16,background:e.tint.regular,borderRadius:16,width:32,height:32},rightButtons:{display:"flex",alignItems:"center"}})),[]);return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(Be().Z,{icon:()=>(0,J().U)({width:20,height:20}),style:l.iconButton,isDarkIconColor:!0,onClick:r,ariaLabel:n.formatMessage({defaultMessage:"Close",id:"topbarMobile.closeButton.label"})}),(0,ee.jsxs)("div",{style:l.rightButtons,children:[(0,ee.jsx)(ht,{store:t,styling:"mobile_horizon1_quick_capture"}),(0,ee.jsx)(pt,{store:t,styling:"mobile_horizon1_quick_capture",isLastButton:!1}),(0,ee.jsx)(st().n,{store:t})]})]})}},412511:(e,t,o)=>{o.d(t,{$G:()=>s,AN:()=>c,Xq:()=>u,du:()=>r});o(670560),o(267602),o(916054),o(653476),o(470928);var i=()=>o(730120),n=()=>o(803021),a=()=>o(526243);function r(e){const t=i().ou.fromMillis(e.startUnixTimestampMS),o=e.endUnixTimestampMS?i().ou.fromMillis(e.endUnixTimestampMS):void 0,n=i().ou.fromMillis(e.startOfWeekUnixTimestampMS),a=i().ou.fromMillis(e.endOfWeekUnixTimestampMS),r=t.startOf("day"),s=i().ou.max(n,r),l=Math.ceil(s.diff(n,"days").get("days"));let c=1;if(o){const e=o.endOf("day"),t=i().ou.min(a,e);c=Math.ceil(t.diff(s,"days").get("days"))}return{start:t,end:o,startOfWeek:n,endOfWeek:a,startColumn:l,columnCount:c}}function s(e){const t=(e.attendees||[]).filter((e=>!e.self&&!e.resource));return e.hasParticipants&&t.length>0&&t.every((e=>"declined"===e.responseStatus))}const l={upcomingMinsThreshold:10,startingMinsThreshold:5,startedMinsThreshold:15};function c(e){const t=e.filter((e=>{var t;if(!e.conferencing)return!1;return!function(e){if("declined"===e)return!0;return!1}((null===(t=e.attendees)||void 0===t?void 0:t.find((e=>e.self)))?e.responseStatus??"accepted":"accepted")&&!e.isAllDay}));if(0===t.length)return;const{upcomingMinsThreshold:o,startingMinsThreshold:n,startedMinsThreshold:a}=l,r=[],s=[],c=[],u=[],m=[];for(const l of t){if(l.isAllDay)continue;const e=d(l),t=i().ou.now(),g=e.start.diff(t,"minutes").minutes;g>=0&&g<=o?r.push(l):-g>=n?c.push(l):-g>=a?u.push(l):e.contains(t)?s.push(l):m.push(l)}return[...r,...c,...u,...s,...m][0]}function d(e){const t=i().ou.fromISO(e.start.dateTime,{zone:e.start.timeZone}),o=i().ou.fromISO(e.end.dateTime,{zone:e.end.timeZone});return i().Xp.fromDateTimes(t,o)}function u(e){let{newCalendarStart:t,newCalendarEnd:o,collectionViewId:i,currentUserId:r="0"}=e;(0,n().nQ)(t,o,Date.now())?a().ZP.clearLocalDateRangeStart({collectionViewId:i,currentUserId:r}):a().ZP.setLocalDateRangeStart({collectionViewId:i,currentUserId:r,dateRangeStart:t})}},13234:(e,t,o)=>{o.d(t,{C:()=>n});o(667294);var i=o(785893);const n=(0,o(827282).IU)("databaseEmpty",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{fillRule:"evenodd",d:"M10 1.75c-1.996 0-3.835.288-5.202.776-.68.243-1.284.55-1.732.928-.444.375-.816.894-.816 1.546v10c0 .652.372 1.17.816 1.546.448.378 1.052.685 1.732.928 1.367.488 3.206.776 5.202.776s3.835-.288 5.202-.776c.68-.243 1.284-.55 1.732-.928.444-.375.816-.894.816-1.546V5c0-.652-.372-1.17-.816-1.546-.448-.378-1.052-.685-1.732-.928-1.367-.488-3.206-.776-5.202-.776zM3.75 5c0-.039.02-.177.284-.4.26-.22.682-.452 1.269-.661C6.469 3.522 8.13 3.25 10 3.25s3.531.272 4.697.689c.587.209 1.009.44 1.269.66.264.224.284.362.284.401 0 .039-.02.177-.284.4-.26.22-.682.452-1.268.661-1.167.417-2.828.689-4.698.689-1.87 0-3.531-.272-4.697-.689-.587-.209-1.008-.44-1.269-.66C3.77 5.176 3.75 5.038 3.75 5zm12.5 2.01c-.317.175-.67.33-1.048.464-1.367.488-3.206.776-5.202.776s-3.835-.288-5.202-.776A7.105 7.105 0 013.75 7.01V10c0 .039.02.177.284.4.26.22.682.452 1.269.662 1.166.416 2.827.688 4.697.688s3.531-.272 4.697-.688c.587-.21 1.009-.442 1.269-.662.264-.223.284-.361.284-.4V7.01zm-12.5 5c.317.175.67.33 1.048.464 1.367.488 3.206.776 5.202.776s3.835-.288 5.202-.776c.377-.135.731-.29 1.048-.465V15c0 .039-.02.177-.284.4-.26.22-.682.452-1.268.661-1.167.417-2.828.689-4.698.689-1.87 0-3.531-.272-4.697-.689-.587-.209-1.008-.44-1.269-.66-.264-.224-.284-.362-.284-.401v-2.99z",clipRule:"evenodd"})})},103485:(e,t,o)=>{o.d(t,{z:()=>n});o(667294);var i=o(785893);const n=(0,o(827282).IU)("keyboard",{viewBox:"0 0 30 30",svg:(0,i.jsxs)("g",{children:[" ",(0,i.jsx)("path",{d:"M15,30l8-10H7Zm0-3.2L11.16,22h7.68Z"})," ",(0,i.jsx)("path",{d:"M6,4H4V6H6V4Zm4,0H8V6h2V4Zm4,0H12V6h2V4Zm4,0H16V6h2V4Zm4,0H20V6h2V4Zm4,0H24V6h2V4ZM10,8H8v2h2V8Zm4,0H12v2h2V8Zm4,0H16v2h2V8Zm4,0H20v2h2V8Zm-2,4H10v2H20V12Zm5,0H22v2h3V12ZM5,14H8V12H5v2ZM0,0V18H30V0H0ZM28,16H2V2H28V16Z"})," "]})})},280217:(e,t,o)=>{o.d(t,{$:()=>n});o(667294);var i=o(785893);const n=(0,o(827282).IU)("sidebarMenu",{viewBox:"0 0 22 17",svg:(0,i.jsx)("svg",{width:"22",height:"17",viewBox:"0 0 22 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{d:"M3.39746 16.2579C2.47754 16.2579 1.78613 16.0294 1.32324 15.5723C0.866211 15.1212 0.637695 14.4415 0.637695 13.5333V2.80182C0.637695 1.89362 0.866211 1.21393 1.32324 0.762756C1.78613 0.305725 2.47754 0.0772095 3.39746 0.0772095H18.6025C19.5283 0.0772095 20.2197 0.305725 20.6768 0.762756C21.1338 1.21393 21.3623 1.89362 21.3623 2.80182V13.5333C21.3623 14.4415 21.1338 15.1212 20.6768 15.5723C20.2197 16.0294 19.5283 16.2579 18.6025 16.2579H3.39746ZM3.41504 14.8428H18.585C19.0186 14.8428 19.3525 14.7286 19.5869 14.5001C19.8271 14.2657 19.9473 13.92 19.9473 13.463V2.87213C19.9473 2.4151 19.8271 2.07233 19.5869 1.84381C19.3525 1.60944 19.0186 1.49225 18.585 1.49225H3.41504C2.97559 1.49225 2.63867 1.60944 2.4043 1.84381C2.16992 2.07233 2.05273 2.4151 2.05273 2.87213V13.463C2.05273 13.92 2.16992 14.2657 2.4043 14.5001C2.63867 14.7286 2.97559 14.8428 3.41504 14.8428ZM7.33496 15.1153V1.22858H8.71484V15.1153H7.33496ZM5.64746 4.75299H3.75781C3.62891 4.75299 3.51465 4.70319 3.41504 4.60358C3.31543 4.49811 3.26562 4.38385 3.26562 4.2608C3.26562 4.12604 3.31543 4.01178 3.41504 3.91803C3.51465 3.81842 3.62891 3.76862 3.75781 3.76862H5.64746C5.77637 3.76862 5.89062 3.81842 5.99023 3.91803C6.0957 4.01178 6.14844 4.12604 6.14844 4.2608C6.14844 4.38385 6.0957 4.49811 5.99023 4.60358C5.89062 4.70319 5.77637 4.75299 5.64746 4.75299ZM5.64746 7.02936H3.75781C3.62891 7.02936 3.51465 6.97955 3.41504 6.87994C3.31543 6.78033 3.26562 6.66315 3.26562 6.52838C3.26562 6.39948 3.31543 6.28815 3.41504 6.1944C3.51465 6.09479 3.62891 6.04498 3.75781 6.04498H5.64746C5.77637 6.04498 5.89062 6.09479 5.99023 6.1944C6.0957 6.28815 6.14844 6.39948 6.14844 6.52838C6.14844 6.66315 6.0957 6.78033 5.99023 6.87994C5.89062 6.97955 5.77637 7.02936 5.64746 7.02936ZM5.64746 9.29694H3.75781C3.62891 9.29694 3.51465 9.25006 3.41504 9.15631C3.31543 9.0567 3.26562 8.94244 3.26562 8.81354C3.26562 8.67877 3.31543 8.56451 3.41504 8.47076C3.51465 8.37115 3.62891 8.32135 3.75781 8.32135H5.64746C5.77637 8.32135 5.89062 8.37115 5.99023 8.47076C6.0957 8.56451 6.14844 8.67877 6.14844 8.81354C6.14844 8.94244 6.0957 9.0567 5.99023 9.15631C5.89062 9.25006 5.77637 9.29694 5.64746 9.29694Z",fill:"#32302C"})})})},750106:(e,t,o)=>{o.d(t,{C:()=>n});o(667294);var i=o(785893);const n=(0,o(827282).IU)("thinPlus",{viewBox:"0 0 14 14",svg:(0,i.jsx)("path",{d:"M 7.75 0L 6.25 0L 6.25 6.25L 0 6.25L 0 7.75L 6.25 7.75L 6.25 14L 7.75 14L 7.75 7.75L 14 7.75L 14 6.25L 7.75 6.25L 7.75 0Z"})})},263569:(e,t,o)=>{o.r(t),o.d(t,{TopLevelMobileComponents:()=>f});o(667294);var i=()=>o(219727),n=()=>o(142735),a=()=>o(154439),r=()=>o(174491),s=()=>o(146531),l=()=>o(282833),c=()=>o(463907),d=()=>o(247724),u=()=>o(777064),m=()=>o(707138),g=()=>o(617935),b=()=>o(876822),p=()=>o(853648),h=o(785893);function f(){const e=(0,i().O7)(),t=(0,n().qz)(void 0,p().Z),o=(0,n().VK)((()=>{const e=m().default.state;return e.isOnboarding&&"workspace_setup"===e.stage}),[]),f=(0,n().VK)((()=>b().default.state.currentSpaceStore),[]),v=(0,n().VK)((()=>b().default.state.mainEditorCurrentBlockStore),[]),y=(0,n().VK)((()=>f&&f.canEdit()),[f]);return o?(0,h.jsx)(h.Fragment,{}):(0,h.jsxs)("div",{className:d().alX,children:[(0,h.jsx)(g().Z,{createType:"add-account"}),f&&(0,h.jsx)(s().Z,{store:f}),(0,h.jsx)(a().Z,{request:{},render:()=>null,requestStore:t,performRequest:()=>(0,u().pu)(e)}),(0,h.jsx)(l().a,{}),y&&v&&(0,h.jsx)(c().Z,{store:v,isMobile:!0}),(0,h.jsx)(r().Z,{})]})}},696764:(e,t,o)=>{o.d(t,{Z:()=>n});var i=()=>o(730120);class n{constructor(){this.UNVISITED_FRECENCY_SCORE=1}getFrecencyRankedActions(e,t){const o=Date.now();return Object.keys(e).sort(((i,n)=>{const a=e=>Math.ceil(e.frequency*this.getWeightForVisit(o,e.lastAccessed,t)),r=e[i],s=e[n],l=void 0!==(null==r?void 0:r.frequency)&&void 0!==(null==r?void 0:r.lastAccessed)?a(r):this.UNVISITED_FRECENCY_SCORE,c=void 0!==(null==s?void 0:s.frequency)&&void 0!==(null==s?void 0:s.lastAccessed)?a(s):this.UNVISITED_FRECENCY_SCORE;return l===c?0:c-l}))}getWeightForVisit(e,t,o){const{TIME_BUCKETS:n,DEFAULT_BUCKET_WEIGHT:a}=o,r=i().ou.fromMillis(e).diff(i().ou.fromMillis(t),"hours").as("hours");for(const i of n){if(r<=i.hours)return i.weight}return a}}},808282:(e,t,o)=>{o.d(t,{Z:()=>n});class i extends(()=>o(263184))().default{getInitialState(){return{openTooltip:void 0}}}const n=new i},705111:(e,t,o)=>{o.d(t,{g:()=>i});const i=o(263184).default.createValue({shouldReset:!1},{name:"MobileAssistantMenuStore"})},941310:(e,t,o)=>{o.d(t,{X:()=>n});var i=()=>o(532850);function n(e){const{block:t,property:o,schema:n,getRecordModel:a,userId:r,userTimeZone:s,intl:l,experimentService:c,collectionFeatureGates:d,formulasModule:u}=e;if(!t)return!1;if("title"===o)return!1;const m=n[o];return!(!m||"checkbox"!==m.type)||(!(!m||"button"!==m.type)||(!(!m||"status"!==m.type)||!i().wV({property:o,schema:n,block:t,getRecordModel:a,userId:r,userTimeZone:s,intl:l,experimentService:c,collectionFeatureGates:d,formulasModule:u})))}}}]);