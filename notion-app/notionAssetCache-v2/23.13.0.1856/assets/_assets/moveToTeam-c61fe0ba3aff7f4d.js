"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[61218,14705],{630903:(e,t,n)=>{n.r(t),n.d(t,{maybeTurnCollectionViewIntoCollectionViewPage:()=>C,transformBlocks:()=>T,transformIntoColumnList:()=>y});n(241792);var o=()=>n(492788),r=()=>n(156642),a=()=>n(396136),i=()=>n(513670),c=()=>n(282662),s=()=>n(332542),l=()=>n(771678),d=()=>n(636340),S=()=>n(453999),m=()=>n(879952),p=()=>n(990966),f=()=>n(269299),u=()=>n(28063),v=()=>n(540413),g=()=>n(487270),b=()=>n(852465),h=()=>n(749826),k=()=>n(826955),I=()=>n(262453);function T(e){const{environment:t,blocks:n,blockType:I,transaction:T}=e;if(I!==r().Ti.transclusionContainer)if(I===r().Ti.callout&&h().default.checkGate({gateName:"create_v2_callouts"}))!function(e){const{environment:t,blocks:n,transaction:o}=e,i=n[0];if(!i)return;const c=i.getRecordStoreUIParent();if(!c||!(0,b().dz)(c))return;const S=c.getRecordStoreUIParent();if(!(S&&S instanceof k().G))return;const f=(0,g().TS)({environment:t,table:a().iU,spaceId:S.getSpaceId()}),u=d().j4({environment:t,id:f,type:r().Ti.callout,inMemoryRecordCache:c.inMemoryRecordCache,transaction:o,spaceId:S.getSpaceId(),format:{callout_version:2}});s().jG({parentStore:c,childStore:u,after:i.id,transaction:o});R({newParentStore:u.getContentStore(),blocks:n,transaction:o}),l().WO({store:u,transaction:o}),p().clear({environment:t}),m().ZH({environment:t}),m().Z5({environment:t,stores:[u]})}({environment:t,blocks:n,transaction:T});else if(I!==r().Ti.columnList)if(I!==r().Ti.slide)if((0,r().sX)(I)){const e=parseInt(I.replace("column","").replace("block","")),r=i().oA(i().DZ(e-1,(()=>v().insertTextBelow({environment:t,blocks:n,transaction:T})))),a=[...n,...r],c=y({environment:t,blocks:a,transaction:T});o().default.afterNextFlush((()=>{p().setSelectionAtStart({store:c[0].getBlockTitleStore()})}))}else for(const r of n)if(r.isCalloutV2()){const e=r.getParentBlockStore();if(e){const a=r.getContentStores();f().applyOperation({store:e,operation:{pointer:e.pointer,path:["content"],command:"insertChildrenAfter",args:{ids:a.map((e=>e.id)),after:r.id}},transaction:T}),s().hr({parentStore:e.getContentStore(),childStore:r,transaction:T});for(const e of a)u().vs({environment:t,block:e,blockType:I,transaction:T,isMultiBlockTransformation:n.length>1});o().default.afterNextFlush((()=>{S().DQ(t,a.map((e=>e.id)))}))}}else u().vs({environment:t,block:r,blockType:I,transaction:T,isMultiBlockTransformation:n.length>1});else!function(e){const{environment:t,blocks:n,transaction:o}=e,i=n[0];if(!i)return;const c=i.getRecordStoreUIParent();if(!c||!(0,b().dz)(c))return;const l=c.getRecordStoreUIParent();if(!(l&&l instanceof k().G))return;const S=(0,g().TS)({environment:t,table:a().iU,spaceId:l.getSpaceId()}),f=d().j4({environment:t,id:S,type:r().Ti.slide,inMemoryRecordCache:c.inMemoryRecordCache,transaction:o,spaceId:l.getSpaceId()});s().jG({parentStore:c,childStore:f,after:i.id,transaction:o});R({newParentStore:f.getContentStore(),blocks:n,transaction:o}),p().clear({environment:t}),m().ZH({environment:t}),m().Z5({environment:t,stores:[f]})}({environment:t,blocks:n,transaction:T});else y({environment:t,blocks:n,transaction:T});else!function(e){const{environment:t,blocks:n,transaction:o}=e,i=n[0];if(!i)return;const s=i.getRecordStoreUIParent();if(!s||!(0,b().dz)(s))return;const l=s.getRecordStoreUIParent();if(!l||!(0,b().OY)(l))return;if(!l.isDefined())return;const S=(0,g().TS)({environment:t,table:a().iU,spaceId:l.getSpaceId()}),f=d().j4({environment:t,id:S,type:r().Ti.transclusionContainer,inMemoryRecordCache:s.inMemoryRecordCache,transaction:o,spaceId:l.getSpaceId()});c().BE({parentStore:s,insertStore:f,afterStore:i,transaction:o});R({newParentStore:f.getContentStore(),blocks:n,transaction:o}),p().clear({environment:t}),m().ZH({environment:t}),m().Z5({environment:t,stores:[f]})}({environment:t,blocks:n,transaction:T})}function C(e){let{environment:t,blocks:n,transaction:o}=e;(function(e){return 1===e.length&&"collection_view"===e[0].getType()})(n)&&T({environment:t,blocks:n,blockType:"collection_view_page",transaction:o})}function y(e){const{environment:t,blocks:n,transaction:o}=e,i=n[0];if(!i)return[];const s=i.recordStoreUIParentStore;if(null==s||!s.valueIs(I().i))return[];const l=(0,g().TS)({environment:t,table:a().iU,spaceId:i.getSpaceId()}),S=d().j4({environment:t,id:l,type:r().Ti.columnList,inMemoryRecordCache:i.inMemoryRecordCache,transaction:o,spaceId:i.getSpaceId()}),{childStore:m}=c().Vt({parentStore:s,insertStore:S,beforeStore:i,transaction:o});return n.map((e=>{const n=(0,g().TS)({environment:t,table:a().iU,spaceId:i.getSpaceId()}),l=d().j4({environment:t,id:n,type:r().Ti.column,inMemoryRecordCache:i.inMemoryRecordCache,transaction:o,spaceId:i.getSpaceId()}),{childStore:S}=c().Od({parentStore:s,childToRemoveStore:e,transaction:o}),{childStore:p}=c().BE({parentStore:m.getContentStore(),insertStore:l,transaction:o}),{childStore:f}=c().BE({parentStore:p.getContentStore(),insertStore:S,transaction:o});return f}))}function R(e){const{newParentStore:t,blocks:n,transaction:o}=e;for(const r of n){const e=r.getRecordStoreUIParent();null!=e&&e.valueIs(I().i)&&(c().Od({parentStore:e,childToRemoveStore:r,transaction:o}),c().R3({parentStore:t,appendStore:r,transaction:o}))}}},128646:(e,t,n)=>{n.r(t),n.d(t,{moveToTeamImpl:()=>s});var o=()=>n(513670),r=()=>n(696459),a=()=>n(332542),i=()=>n(968377),c=()=>n(630903);function s(e){let{transaction:t,currentSpaceViewStore:n,teamStore:s,targets:l,location:d,environment:S}=e;const m=n.getTeamsStores(),p=s.getTeamPagesStore();c().maybeTurnCollectionViewIntoCollectionViewPage({environment:S,blocks:l,transaction:t});for(const c of l){const e=o().sE(m,(e=>{const t=e.getTeamPagesStore().getValue();if(t)return t.includes(c.id)}));(null==e?void 0:e.id)!==s.id&&("append"===d.type?a().jG({parentStore:p,childStore:c,after:d.after,transaction:t}):"prepend"===d.type?a().SH({parentStore:p,childStore:c,before:d.before,transaction:t}):(0,r().t1)(d),e&&i().sp({teamStore:e,store:c,transaction:t}))}return s}}}]);