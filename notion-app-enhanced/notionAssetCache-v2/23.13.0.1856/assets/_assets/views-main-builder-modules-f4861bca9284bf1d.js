"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[54308],{42392:(e,t,o)=>{o.d(t,{p:()=>a});var n=()=>o(677559);const r=new(n().Ss)("PulsingWrapper",(async()=>o.e(66043).then(o.bind(o,125756)))),a=(0,n().iS)(r,(e=>e.PulsingWrapper),{renderLoading:(e,t)=>t.children})},820545:(e,t,o)=>{o.d(t,{I:()=>r});o(667294);var n=o(785893);const r=(0,o(827282).IU)("arrowLeftRounded",{viewBox:"0 0 16 13",svg:(0,n.jsx)("path",{d:"M0.617188 6.85156C0.617188 6.60677 0.710938 6.39323 0.898438 6.21094L6.03906 1.07812C6.13281 0.984375 6.23177 0.914062 6.33594 0.867188C6.4401 0.820312 6.54948 0.796875 6.66406 0.796875C6.90365 0.796875 7.10417 0.875 7.26562 1.03125C7.42708 1.1875 7.50781 1.38281 7.50781 1.61719C7.50781 1.74219 7.48438 1.85677 7.4375 1.96094C7.39062 2.0599 7.32812 2.14844 7.25 2.22656L5.5 4L2.59375 6.66406L2.3125 6.15625L5.02344 5.99219H14.5156C14.776 5.99219 14.9844 6.07292 15.1406 6.23438C15.3021 6.39062 15.3828 6.59635 15.3828 6.85156C15.3828 7.10156 15.3021 7.30729 15.1406 7.46875C14.9844 7.625 14.776 7.70312 14.5156 7.70312H5.02344L2.3125 7.54688L2.59375 7.04688L5.5 9.70312L7.25 11.4688C7.32812 11.5469 7.39062 11.638 7.4375 11.7422C7.48438 11.8464 7.50781 11.9583 7.50781 12.0781C7.50781 12.3125 7.42708 12.5078 7.26562 12.6641C7.10417 12.8203 6.90365 12.8984 6.66406 12.8984C6.4349 12.8984 6.22917 12.8099 6.04688 12.6328L0.898438 7.49219C0.710938 7.3099 0.617188 7.09635 0.617188 6.85156Z"})})},660065:(e,t,o)=>{o.d(t,{r:()=>r});o(667294);var n=o(785893);const r=(0,o(827282).IU)("arrowRightRounded",{viewBox:"0 0 16 13",svg:(0,n.jsx)("path",{d:"M15.3828 6.85156C15.3828 7.09635 15.2917 7.3099 15.1094 7.49219L9.95312 12.6328C9.77083 12.8099 9.5651 12.8984 9.33594 12.8984C9.09635 12.8984 8.89583 12.8203 8.73438 12.6641C8.57812 12.5078 8.5 12.3125 8.5 12.0781C8.5 11.9583 8.52083 11.8464 8.5625 11.7422C8.60938 11.638 8.67188 11.5469 8.75 11.4688L10.5 9.70312L13.4141 7.04688L13.6875 7.54688L10.9766 7.70312H1.48438C1.22396 7.70312 1.01302 7.625 0.851562 7.46875C0.695312 7.30729 0.617188 7.10156 0.617188 6.85156C0.617188 6.59635 0.695312 6.39062 0.851562 6.23438C1.01302 6.07292 1.22396 5.99219 1.48438 5.99219H10.9766L13.6875 6.15625L13.4141 6.66406L10.5 4L8.75 2.22656C8.67188 2.14844 8.60938 2.0599 8.5625 1.96094C8.52083 1.85677 8.5 1.74219 8.5 1.61719C8.5 1.38281 8.57812 1.1875 8.73438 1.03125C8.89583 0.875 9.09635 0.796875 9.33594 0.796875C9.45052 0.796875 9.5599 0.820312 9.66406 0.867188C9.76823 0.914062 9.86719 0.984375 9.96094 1.07812L15.1094 6.21094C15.2917 6.39323 15.3828 6.60677 15.3828 6.85156Z"})})},536635:(e,t,o)=>{o.d(t,{Z:()=>r});o(667294);var n=o(785893);const r=(0,o(827282).IU)("arrowUp",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M8 14.5586C8.44434 14.5586 8.74512 14.251 8.74512 13.7998V5.30957L8.69043 3.83984L10.4951 5.84961L12.0469 7.38086C12.1836 7.51074 12.3682 7.59961 12.5801 7.59961C12.9902 7.59961 13.291 7.28516 13.291 6.86816C13.291 6.66992 13.2158 6.49219 13.0586 6.32812L8.55371 1.81641C8.40332 1.66602 8.20508 1.57715 8 1.57715C7.79492 1.57715 7.59668 1.66602 7.44629 1.81641L2.94141 6.32812C2.78418 6.49219 2.70898 6.66992 2.70898 6.86816C2.70898 7.28516 3.0166 7.59961 3.42676 7.59961C3.63184 7.59961 3.82324 7.51074 3.95312 7.38086L5.50488 5.84961L7.30957 3.83301L7.25488 5.30957V13.7998C7.25488 14.251 7.5625 14.5586 8 14.5586Z"})})},135515:(e,t,o)=>{o.d(t,{A:()=>r});o(667294);var n=o(785893);const r=(0,o(827282).IU)("plusMedium",{viewBox:"0 0 16 16",svg:(0,n.jsx)("g",{children:(0,n.jsx)("path",{d:"M2 8a.77.77 0 01.237-.566.762.762 0 01.566-.244h4.394V2.803a.77.77 0 01.237-.566A.773.773 0 018 2c.225 0 .416.079.573.237a.773.773 0 01.237.566V7.19h4.387c.22 0 .409.081.566.244A.773.773 0 0114 8a.781.781 0 01-.237.573.785.785 0 01-.566.23H8.81v4.401a.764.764 0 01-.237.56A.781.781 0 018 14a.773.773 0 01-.566-.237.764.764 0 01-.237-.559V8.803H2.803a.785.785 0 01-.566-.23A.781.781 0 012 8z"})})})},395272:(e,t,o)=>{o.d(t,{p:()=>r});o(667294);var n=o(785893);const r=(0,o(827282).IU)("trashSmall",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M5.31055 14.3398C4.85742 14.3398 4.49414 14.2129 4.2207 13.959C3.95117 13.7051 3.80664 13.3516 3.78711 12.8984L3.38867 4.45508H2.74414C2.59961 4.45508 2.47656 4.4043 2.375 4.30273C2.27344 4.20117 2.22266 4.07812 2.22266 3.93359C2.22266 3.79297 2.27344 3.67383 2.375 3.57617C2.47656 3.47461 2.59961 3.42383 2.74414 3.42383H13.2617C13.4062 3.42383 13.5273 3.47266 13.625 3.57031C13.7266 3.66797 13.7773 3.78906 13.7773 3.93359C13.7773 4.07812 13.7266 4.20117 13.625 4.30273C13.5273 4.4043 13.4062 4.45508 13.2617 4.45508H12.6172L12.2188 12.8926C12.1992 13.3457 12.0527 13.6992 11.7793 13.9531C11.5059 14.2109 11.1445 14.3398 10.6953 14.3398H5.31055ZM5.42773 13.3027H10.5723C10.7363 13.3027 10.8711 13.248 10.9766 13.1387C11.082 13.0332 11.1387 12.8926 11.1465 12.7168L11.5273 4.45508H4.45508L4.85352 12.7168C4.86133 12.8887 4.91797 13.0293 5.02344 13.1387C5.12891 13.248 5.26367 13.3027 5.42773 13.3027ZM6.27734 12.3535C6.15625 12.3535 6.05859 12.3203 5.98438 12.2539C5.91016 12.1836 5.87109 12.0898 5.86719 11.9727L5.69141 5.83203C5.6875 5.71875 5.72266 5.62695 5.79688 5.55664C5.87109 5.48242 5.96875 5.44531 6.08984 5.44531C6.21094 5.44531 6.30859 5.48047 6.38281 5.55078C6.45703 5.62109 6.49414 5.71289 6.49414 5.82617L6.67578 11.9668C6.67578 12.084 6.63867 12.1777 6.56445 12.248C6.49414 12.3184 6.39844 12.3535 6.27734 12.3535ZM8 12.3535C7.87891 12.3535 7.7793 12.3184 7.70117 12.248C7.62695 12.1777 7.58984 12.0859 7.58984 11.9727V5.83203C7.58984 5.71875 7.62695 5.62695 7.70117 5.55664C7.7793 5.48242 7.87891 5.44531 8 5.44531C8.125 5.44531 8.22461 5.48242 8.29883 5.55664C8.37695 5.62695 8.41602 5.71875 8.41602 5.83203V11.9727C8.41602 12.0859 8.37695 12.1777 8.29883 12.248C8.22461 12.3184 8.125 12.3535 8 12.3535ZM9.72852 12.3535C9.60352 12.3535 9.50391 12.3184 9.42969 12.248C9.35938 12.1777 9.32617 12.084 9.33008 11.9668L9.50586 5.83203C9.50977 5.71484 9.54883 5.62109 9.62305 5.55078C9.69727 5.48047 9.79297 5.44531 9.91016 5.44531C10.0352 5.44531 10.1328 5.48242 10.2031 5.55664C10.2773 5.62695 10.3125 5.71875 10.3086 5.83203L10.1328 11.9727C10.1289 12.0898 10.0898 12.1836 10.0156 12.2539C9.94141 12.3203 9.8457 12.3535 9.72852 12.3535ZM5.33984 3.81055V2.54492C5.33984 2.0957 5.47461 1.74609 5.74414 1.49609C6.01758 1.24219 6.39648 1.11523 6.88086 1.11523H9.10742C9.5918 1.11523 9.9707 1.24219 10.2441 1.49609C10.5176 1.74609 10.6543 2.0957 10.6543 2.54492V3.81055H9.57031V2.59766C9.57031 2.44922 9.52148 2.33008 9.42383 2.24023C9.32617 2.14648 9.19531 2.09961 9.03125 2.09961H6.95703C6.79688 2.09961 6.66797 2.14648 6.57031 2.24023C6.47266 2.33008 6.42383 2.44922 6.42383 2.59766V3.81055H5.33984Z"})})},579012:(e,t,o)=>{o.d(t,{K:()=>s});var n=o(667294),r=()=>o(219727),a=()=>o(142735),i=()=>o(99537),l=()=>o(162178);function s(){const{layoutStore:e,currentModuleSelection:t,setModuleSelection:o,sessionId:s}=(0,l().J9)(),c=(0,r().O7)(),d=(0,a().VK)((()=>{var t;return null===(t=e.getModel())||void 0===t?void 0:t.getLayoutType()}),[e]),p="form"===d?"form_layout_schema":"new_module"===(null==t?void 0:t.type)?t.area:void 0;return(0,n.useCallback)((n=>{const{layoutModule:r,transaction:a}=n;if(!e.getModel()||!p||"form_conditional_modules"===p)return;let l;if("form"===d)l=n.position??{type:"area_relative",area:"form_layout_schema",location:"end_moveable"};else{if("new_module"!==(null==t?void 0:t.type))return;if("form_conditional_modules"===t.area)return;l="views_main_tab_modules"===t.area?{type:"area_relative",area:t.area,viewId:t.viewsMainTabId,location:"end_moveable"}:{type:"area_relative",area:t.area,location:"end_moveable"}}(0,i().sW)({environment:c,sessionId:s,layoutStore:e,position:l,module:r,transaction:a,isPropertyCreation:!1}),o({type:"existing_module",moduleId:r.id,isDragging:!1})}),[p,t,c,e,d,s,o])}},946650:(e,t,o)=>{o.d(t,{l:()=>p,w:()=>u});var n=o(667294),r=()=>o(219727),a=()=>o(142735),i=()=>o(269299),l=()=>o(348141),s=()=>o(718959),c=()=>o(876822);function d(e){let{userSettingsDismissibleKey:t}=e;const o=(0,r().O7)(),d=(0,a().VK)((()=>c().default.state.currentUserSettingsStore),[]),p=(0,a().VK)((()=>{const e=null==d?void 0:d.getSettings();return!e||Boolean(e[t])}),[t,d]),u=(0,a().VK)((()=>{const e=(0,s().B7)(o),t=null==d?void 0:d.getSettings();return Boolean(e)&&Boolean(t)&&!o.device.isMobile&&!p}),[o,d,p]),m=n.useCallback((()=>{d&&!p&&u&&i().createAndCommit({environment:o,userAction:"LayoutInfoPanelButtonEducationTooltip.dismiss",canUndo:!1,perform:e=>{l().d2({userSettingsStore:d,transaction:e,data:{[t]:Date.now()}})}})}),[o,u,t,d,p]);return{shouldShowTooltip:u,dismissTooltip:m}}function p(){return d({userSettingsDismissibleKey:"layout_info_panel_button_education_tooltip_dismissed_at"})}function u(){return d({userSettingsDismissibleKey:"layout_builder_add_module_button_education_tooltip_dismissed_at"})}},583824:(e,t,o)=>{o.d(t,{E:()=>i});var n=o(667294),r=()=>o(582025),a=o(785893);const i=n.memo((function(e){let{area:t,viewsMainTabId:i,children:l,className:s,style:c}=e;const{layoutBuilderModuleSelectionStore:d,layoutStore:p}=(0,o(162178).J9)(),u=(0,n.useCallback)((()=>{const e=d.state;if(null==e||!e.isDragging)return;const o=e.moduleId,n=p.getModuleById(o);n&&(0,r().B)(n,t)&&("page_main"===t&&p.isTabbedPageLayout()||d.setState({...e,draggingModuleFinalArea:{..."views_main_tab_modules"===t?{area:t,viewsMainTabId:i}:{area:t}}}))}),[t,d,p,i]),m=(0,n.useCallback)((()=>{const e=d.state;if(null==e||!e.isDragging)return;const o=e.moduleId,n=p.getModuleById(o);n&&(0,r().B)(n,t)&&d.setState({...e,draggingModuleFinalArea:e.draggingModuleInitialArea})}),[t,d,p]);return(0,a.jsx)("div",{onMouseEnter:u,onMouseLeave:m,className:s,style:c,children:l})}))},343642:(e,t,o)=>{o.r(t),o.d(t,{ViewsMainBuilderModules:()=>d});var n=o(667294),r=()=>o(949842),a=()=>o(162178),i=()=>o(857719),l=()=>o(8564),s=()=>o(583824),c=o(785893);function d(e){const{setModuleSelection:t}=(0,a().J9)(),{viewsMainTabId:o}=e,d=(0,n.useCallback)((e=>{(0,r().ZP)({event:e,context:r().Af.EditorClick,callback:()=>{t(void 0)}})}),[t]);return(0,c.jsx)("div",{role:"presentation",onClick:d,children:(0,c.jsx)(s().E,{area:"views_main_tab_modules",viewsMainTabId:o,children:(0,c.jsx)(i().Xg,{type:"default",children:(0,c.jsx)(l().v,{area:"views_main_tab_modules",viewsMainTabId:o})})})})}},274860:(e,t,o)=>{o.d(t,{G:()=>s});var n=o(667294),r=()=>o(543172),a=()=>o(579012),i=()=>o(946650),l=()=>o(162178);function s(e){const{setModuleSelection:t,layoutStore:o}=(0,l().J9)(),s=(0,a().K)(),{dismissTooltip:c}=(0,i().w)();return(0,n.useCallback)((()=>{var n;"form"===(null===(n=o.getModel())||void 0===n?void 0:n.getLayoutType())&&"form_conditional_modules"!==e.area?s({layoutModule:{type:"placeholder",id:(0,r().ZP)()},position:e.afterModuleId?{type:"module_relative",area:e.area,direction:"below",relativeToModuleId:e.afterModuleId}:void 0}):(t({type:"new_module",isDragging:!1,..."views_main_tab_modules"===e.area?{area:"views_main_tab_modules",viewsMainTabId:e.viewsMainTabId}:{area:e.area}}),"page_main"===e.area&&c())}),[o,e,s,t,c])}},688745:(e,t,o)=>{o.d(t,{D5:()=>L,Ym:()=>I,cP:()=>S});o(821057),o(267602),o(916054),o(653476),o(241792),o(667294);var n=()=>o(146947),r=()=>o(780741),a=()=>o(481529),i=()=>o(494616),l=()=>o(396136),s=()=>o(752778),c=()=>o(139978),d=()=>o(483791),p=()=>o(212360),u=()=>o(788860),m=()=>o(513670),C=()=>o(696459),y=()=>o(250303),v=()=>o(984871),f=()=>o(308186),_=()=>o(269299),g=()=>o(90065),h=()=>o(826955),w=()=>o(382474),b=o(785893);function S(e){let{transaction:t,collectionStore:o,templateId:n,instance:r,logger:u}=e;u.debug(`Creating/updating ${p().qB} record for "${n}".`);const m=o.getSpaceId(),y=r.id;if("automation"===r.type){const e={table:i().cv,id:y,spaceId:m};_().applyOperation({store:h().Mz.createChildStore(o,e),operation:a().op.set({pointer:e,path:["properties","workflow_template_instance"],args:{template_id:n}}),transaction:t})}else if("block"===r.type){const e={table:l().iU,id:y,spaceId:m};_().applyOperation({store:h().G.createChildStore(o,e),operation:a().op.set({pointer:e,path:["format","workflow_template_instance"],args:{template_id:n}}),transaction:t})}else if("collection"===r.type){const e={table:s().vF,id:y,spaceId:m};_().applyOperation({store:o,operation:a().op.set({pointer:e,path:["format","workflow_template_instance"],args:{template_id:n}}),transaction:t})}else if("collection_view"===r.type){const e={table:c().np,id:y,spaceId:m};_().applyOperation({store:h().Xr.createChildStore(o,e),operation:a().op.set({pointer:e,path:["format","workflow_template_instance"],args:{template_id:n}}),transaction:t})}else if("layout"===r.type){const e={table:d().Bh,id:y,spaceId:m};_().applyOperation({store:h().xj.createChildStore(o,e),operation:a().op.set({pointer:e,path:["format","workflow_template_instance"],args:{template_id:n}}),transaction:t})}else if("compound"===r.type){if(r.instancePointers.length<2)throw new Error(`Compound template instance ${r.id} must contain 2 or more instances`);const e=r.instancePointers.map((e=>{switch(e.type){case"automation":return{type:"automation",id:e.id};case"block":return{type:"block",id:e.id};case"collection_view":return{type:"collection_view",id:e.id};case"layout":return{type:"layout",id:e.id};case"property":return{type:"property",id:e.id}}(0,C().t1)(e)}));_().applyOperation({store:o,operation:{command:"keyedObjectListUpdate",pointer:o.pointer,path:["format","compound_workflow_template_instances"],args:{value:{template_id:n,id:r.id,instance_pointers:e}}},transaction:t})}else"property"===r.type?_().applyOperation({store:o,operation:a().op.update({pointer:o.pointer,path:["schema",r.id],args:{workflow_template_instance:{template_id:n}}}),transaction:t}):(0,C().t1)(r)}function I(e){let{environment:t,collectionStore:o,propertyId:n,compoundTemplateInstancesToDelete:a,collectionContextStore:i,from:l}=e;if(!a.every((e=>e.templateId===r()._5)))return!1;if(!(0,g().h$)())return!1;const s=(0,w().OA)({environment:t,collectionStore:o,compoundTemplateInstancesToDelete:a}),c=m().jj(s.filter((e=>"property"===e.type&&e.id!==n)).map((e=>e.id)));return M({environment:t,collectionStore:o,clickedPropertyId:n,otherPropertyIds:c,collectionContextStore:i,from:l}),!0}function L(e){let{environment:t,collectionStore:o,propertyId:n,collectionContextStore:r,from:a}=e;const i=o.getSchema(),l=Object.keys(i).filter((e=>e!==n&&((0,g().TJ)({collectionStore:o,propertyId:e})||(0,g().e_)(e))));return M({environment:t,collectionStore:o,clickedPropertyId:n,otherPropertyIds:l,collectionContextStore:r,from:a}),!0}function M(e){var t;let{environment:o,collectionStore:r,clickedPropertyId:a,otherPropertyIds:i,collectionContextStore:l,from:s}=e;const c=[a,...i],d=[{label:(0,b.jsx)(u()._H,{id:"workflowTemplateInstanceActions.deleteRequiredProperty.deleteOption",defaultMessage:"{count, plural, one {Delete {count} property} other {Delete {count} properties}}",values:{count:c.length}}),color:"red",onAccept:()=>function(e){let{environment:t,collectionStore:o,collectionContextStore:n,propertyIds:r,from:a}=e;_().createAndCommit({userAction:"workflowTemplateInstanceActions.handleDeleteAccept",environment:t,canUndo:!0,perform:e=>{const i=o.getSchema();for(const l of r){v().E2({environment:t,collectionStore:o,schema:i,property:l,transaction:e});const r=i[l];r&&y().y9({environment:t,collectionContextStore:n,property_type:r.type,from:a,property:l})}}})}({environment:o,collectionStore:r,collectionContextStore:l,propertyIds:c,from:s})}],p=r.getSchema(),m=i.map((e=>{if(e===a)return;const t=p[e];return null==t?void 0:t.name})).filter(C().$K),g=null===(t=p[a])||void 0===t?void 0:t.name,h=new Intl.ListFormat(n().locale,{style:"long",type:"conjunction"}),w=(0,b.jsx)(u()._H,{id:"workflowTemplateInstanceActions.deleteRequiredProperty.deletePropertyFromDb",defaultMessage:"{hasPropertyName, select, true {Delete {propertyName} from this database? This will also delete the following properties: {otherPropertyNames}} other {Delete this property from this database? This will also delete the following properties: {otherPropertyNames}}}",values:{hasPropertyName:Boolean(g),propertyName:g,otherPropertyNames:h.format(m)}});f().vC({message:(0,b.jsx)("span",{children:w}),showCancel:!0,keepFocus:!0,innerStyle:{width:400},items:d})}},994085:(e,t,o)=>{o.d(t,{m:()=>s});o(492176),o(7961),o(398858),o(461318),o(33228);const n="://",r="www.",a=/.+\..+\..+/,i=/\.{2,}/,l=/.+\..+/;function s(e){const t=e.trim();if(0===t.length)return!1;if(-1===t.indexOf(".")&&-1===t.indexOf("localhost"))return!1;if("."===t.at(t.length-1)||-1!==t.indexOf(" "))return!1;let o,s=`${-1===t.indexOf(n)?"http://":""}${t}`;try{o=new URL(s)}catch(d){const e=-1===s.indexOf(r),[t,a]=s.split(n);s=`${t}${n}${e?"www.":""}${a}`;try{o=new URL(s)}catch(d){return!1}}const c=o.hostname;return!i.test(c)&&(!(t.includes(r)&&"localhost"!==c&&!a.test(c))&&!("localhost"!==c&&!l.test(c)))}}}]);