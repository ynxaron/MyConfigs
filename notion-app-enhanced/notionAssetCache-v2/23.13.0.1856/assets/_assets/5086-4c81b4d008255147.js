"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[5086],{877289:(e,t,n)=>{n.d(t,{wd:()=>m});n(267602),n(653476),n(241792);var r=n(667294),o=()=>n(206489),i=()=>n(219727),a=()=>n(846550),s=()=>n(435308),l=()=>n(200568),d=()=>n(523733),c=()=>n(568017),u=()=>n(707513),g=()=>n(998901),f=()=>n(654133),p=()=>n(67961),h=n(785893);(0,n(788860).vU)({copyColor:{defaultMessage:"Copied '{stringValue}'",id:"uidoc.colors.copied"}});function m(e){const[t,n]=(0,r.useState)(!1);return(0,h.jsx)("div",{onMouseEnter:()=>{n(!0)},onMouseLeave:()=>{n(!1)},children:(0,h.jsx)(x,{marginTopBottom:e.marginTopBottom,isInverted:e.isInverted,children:(0,h.jsx)(y,{showSize:e.showSize??t,showInsets:e.showInsets??t,insetSize:24,children:(0,h.jsx)(v,{isInverted:e.isInverted,children:e.children})})})})}function x(e){const{marginTopBottom:t}=e,n=(0,a().Fg)(),o=w(),i=e.isInverted?o:n,s=(0,r.useMemo)((()=>({borderRadius:4,overflow:"hidden",border:`1px solid ${i.regularDividerColor}`,backgroundColor:i.contentBackground,marginTop:t??12,marginBottom:t??12,color:i.regularTextColor})),[i,t]);return(0,h.jsx)("div",{style:s,children:e.children})}function y(e){const{showInsets:t,showSize:n,insetSize:o,children:i}=e,s=(0,r.useRef)(null),l=(0,a().yK)((e=>{const n=t?"rgba(255, 105, 180, 1)":"rgba(255, 105, 180, 0)",r=`1px dashed ${n}`,i=`${o}px`,a="all 0.1s ease-in-out",s={t:{borderBottom:r,transition:a},l:{borderRight:r,transition:a},r:{borderLeft:r,transition:a},b:{borderTop:r,transition:a,position:"relative"}};return{grid:{display:"grid",gridTemplateColumns:`${i} auto ${i}`,gridTemplateRows:`${i} auto ${i}`,...s.t,...s.l,...s.r,...s.b},...s,tl:{...s.t,...s.l},tr:{...s.t,...s.r},bl:{...s.b,...s.l},br:{...s.b,...s.r},c:{position:"relative"},insetText:{color:n,fontSize:10,paddingLeft:(o-10)/2,fontFamily:u().Gl.githubMono,lineHeight:i,maxHeight:o,transition:a,position:"absolute"}}}),[t,o]);return(0,h.jsxs)("div",{style:l.grid,children:[(0,h.jsx)("div",{style:l.tl}),(0,h.jsx)("div",{style:l.t}),(0,h.jsx)("div",{style:l.tr}),(0,h.jsx)("div",{style:l.l}),(0,h.jsx)("div",{style:l.c,ref:s,children:i}),(0,h.jsx)(f().Z,{forceVisibleState:n??t,renderTooltip:()=>{var e;return`${null===(e=s.current)||void 0===e?void 0:e.getBoundingClientRect().height}px`},placement:g().Placement.Right,render:()=>(0,h.jsx)("div",{style:l.r})}),(0,h.jsx)("div",{style:l.bl}),(0,h.jsx)(f().Z,{placement:g().Placement.Bottom,forceVisibleState:n??t,renderTooltip:()=>{var e;return`${null===(e=s.current)||void 0===e?void 0:e.getBoundingClientRect().width}px`},render:()=>(0,h.jsx)("div",{style:l.b,children:(0,h.jsx)(p().Z,{style:l.insetText,children:`${o}px inset`})})}),(0,h.jsx)("div",{style:l.br})]})}function w(){const{mode:e}=(0,a().Fg)();return(0,c().gh)({theme:"light"===e?"dark":"light"})}function v(e){let{children:t,isInverted:n}=e;const{mode:a}=w(),c=function(e){const t=(0,i().O7)();return(0,r.useMemo)((()=>{const n=new(l().Z);return n.setState({mode:e}),{...t,ThemeStore:n,ThemeModeStore:new(s().default)((()=>n.state.mode),{debugName:"UIDocComponents.ThemeModeStore"})}}),[t,e])}(a);return n?(0,h.jsx)(o().B,{value:c,children:t}):(0,d().jD)(t)}const k=(0,r.createContext)(!1);k.displayName="UIDocExpandAllCode"},568672:(e,t,n)=>{n.d(t,{Y:()=>o});var r=n(667294);function o(e,t){const n=(0,r.useRef)(),o=(0,r.useRef)(null),[i,a]=(0,r.useState)(t),s=(0,r.useCallback)((()=>a((e=>null===e?t:null))),[t]);function l(){var e;null===(e=n.current)||void 0===e||e.call(n)}const d=(0,r.useCallback)((()=>{o.current&&clearInterval(o.current)}),[]),c=(0,r.useCallback)((()=>{d(),o.current=setInterval(l,t)}),[d,t]);return(0,r.useEffect)((()=>{n.current=e}),[e]),(0,r.useEffect)((()=>(o.current&&clearInterval(o.current),null!==i&&(o.current=setInterval(l,i)),d)),[i,d]),{toggle:s,clear:d,reset:c}}},711498:(e,t,n)=>{n.d(t,{M:()=>o});n(667294);var r=n(785893);const o=(0,n(827282).IU)("bolt",{svg:(0,r.jsx)("path",{d:"M4.629 21.418l8.877-11.416c.166-.205.254-.4.254-.625 0-.371-.293-.654-.703-.654H7.539l2.91-7.598C10.84.12 9.766-.428 9.131.412L.254 11.818c-.166.215-.254.41-.254.626 0 .38.293.663.703.663h5.518l-2.91 7.588c-.391 1.006.683 1.553 1.318.723zm.576-2.627l3.272-7.139H2.44l6.377-8.466-.273-.147-3.262 7.139h6.026l-6.377 8.467z"}),viewBox:"0 0 14 22"})},648275:(e,t,n)=>{n.d(t,{U:()=>o});n(667294);var r=n(785893);const o=(0,n(827282).IU)("chevronUpDown",{viewBox:"0 0 20 20",svg:(0,r.jsx)("path",{d:"M10 3.20801C10.1185 3.20801 10.2279 3.23307 10.3281 3.2832C10.4329 3.32878 10.5332 3.39714 10.6289 3.48828L14.5186 7.2207C14.5915 7.29362 14.6507 7.37793 14.6963 7.47363C14.7464 7.56934 14.7715 7.67643 14.7715 7.79492C14.7715 7.94987 14.735 8.08887 14.6621 8.21191C14.5892 8.3304 14.4912 8.42383 14.3682 8.49219C14.2497 8.56055 14.1198 8.59473 13.9785 8.59473C13.8828 8.59473 13.7826 8.57878 13.6777 8.54688C13.5775 8.51042 13.484 8.44889 13.3975 8.3623L10 5.04004L6.60254 8.3623C6.51595 8.45345 6.42253 8.51497 6.32227 8.54688C6.22201 8.57878 6.12174 8.59473 6.02148 8.59473C5.87565 8.59473 5.74349 8.56055 5.625 8.49219C5.50651 8.42383 5.41081 8.3304 5.33789 8.21191C5.26497 8.08887 5.22852 7.94987 5.22852 7.79492C5.22852 7.67643 5.2513 7.56934 5.29688 7.47363C5.34701 7.37793 5.41081 7.29362 5.48828 7.2207L9.37109 3.48828C9.4668 3.39714 9.56706 3.32878 9.67188 3.2832C9.77669 3.23307 9.88607 3.20801 10 3.20801ZM10 16.9209C9.88607 16.9209 9.77669 16.8958 9.67188 16.8457C9.56706 16.8001 9.4668 16.7318 9.37109 16.6406L5.48828 12.9082C5.41081 12.8307 5.34701 12.7441 5.29688 12.6484C5.2513 12.5527 5.22852 12.4456 5.22852 12.3271C5.22852 12.1722 5.26497 12.0355 5.33789 11.917C5.41081 11.7985 5.50651 11.7051 5.625 11.6367C5.74349 11.5684 5.87565 11.5342 6.02148 11.5342C6.12174 11.5342 6.22201 11.5501 6.32227 11.582C6.42253 11.6139 6.51595 11.6755 6.60254 11.7666L10 15.0889L13.3975 11.7666C13.484 11.68 13.5775 11.6208 13.6777 11.5889C13.7826 11.5524 13.8828 11.5342 13.9785 11.5342C14.1198 11.5342 14.2497 11.5684 14.3682 11.6367C14.4912 11.7051 14.5892 11.7985 14.6621 11.917C14.735 12.0355 14.7715 12.1722 14.7715 12.3271C14.7715 12.4456 14.7464 12.5527 14.6963 12.6484C14.6507 12.7441 14.5915 12.8307 14.5186 12.9082L10.6289 16.6406C10.5332 16.7318 10.4329 16.8001 10.3281 16.8457C10.2279 16.8958 10.1185 16.9209 10 16.9209Z"})})},210251:(e,t,n)=>{n.d(t,{a:()=>r().a});var r=()=>n(728267)},644618:(e,t,n)=>{n.d(t,{P:()=>o});n(667294);var r=n(785893);const o=(0,n(827282).IU)("commentAdd",{viewBox:"0 0 16 15",svg:(0,r.jsx)("path",{d:"M4.73926 14.6865C4.46582 14.6865 4.25163 14.5977 4.09668 14.4199C3.94629 14.2422 3.87109 14.0007 3.87109 13.6953V12.0137H3.50195C2.84115 12.0137 2.27376 11.8861 1.7998 11.6309C1.3304 11.3757 0.968099 11.0111 0.712891 10.5371C0.46224 10.0586 0.336914 9.47982 0.336914 8.80078V3.49609C0.336914 2.81706 0.46224 2.24056 0.712891 1.7666C0.963542 1.28809 1.32585 0.921224 1.7998 0.666016C2.27832 0.410807 2.86165 0.283203 3.5498 0.283203H12.4434C13.127 0.283203 13.708 0.410807 14.1865 0.666016C14.665 0.921224 15.0296 1.28809 15.2803 1.7666C15.5309 2.24056 15.6562 2.81706 15.6562 3.49609V8.80078C15.6562 9.47982 15.5309 10.0586 15.2803 10.5371C15.0296 11.0111 14.665 11.3757 14.1865 11.6309C13.708 11.8861 13.127 12.0137 12.4434 12.0137H8.21875L5.88086 14.085C5.64844 14.29 5.44792 14.4404 5.2793 14.5361C5.11068 14.6364 4.93066 14.6865 4.73926 14.6865ZM5.07422 13.1758L7.24121 11.0293C7.38704 10.8835 7.52148 10.7878 7.64453 10.7422C7.77214 10.6921 7.94076 10.667 8.15039 10.667H12.4023C13.0495 10.667 13.528 10.5075 13.8379 10.1885C14.1523 9.86491 14.3096 9.38639 14.3096 8.75293V3.53711C14.3096 2.9082 14.1523 2.43424 13.8379 2.11523C13.528 1.79167 13.0495 1.62988 12.4023 1.62988H3.58398C2.94141 1.62988 2.46289 1.79167 2.14844 2.11523C1.83854 2.43424 1.68359 2.9082 1.68359 3.53711V8.75293C1.68359 9.38639 1.83854 9.86491 2.14844 10.1885C2.46289 10.5075 2.94141 10.667 3.58398 10.667H4.52051C4.71191 10.667 4.85091 10.7103 4.9375 10.7969C5.02865 10.8789 5.07422 11.0225 5.07422 11.2275V13.1758ZM4.8418 6.14844C4.8418 5.95703 4.90104 5.80208 5.01953 5.68359C5.13802 5.56055 5.29525 5.49902 5.49121 5.49902H7.36426V3.62598C7.36426 3.43913 7.4235 3.28646 7.54199 3.16797C7.66048 3.04492 7.81087 2.9834 7.99316 2.9834C8.18457 2.9834 8.33952 3.04264 8.45801 3.16113C8.58105 3.27962 8.64258 3.43457 8.64258 3.62598V5.49902H10.5156C10.707 5.49902 10.862 5.56055 10.9805 5.68359C11.099 5.80208 11.1582 5.95703 11.1582 6.14844C11.1582 6.33073 11.099 6.48112 10.9805 6.59961C10.862 6.7181 10.707 6.77734 10.5156 6.77734H8.64258V8.65723C8.64258 8.84408 8.58105 8.99902 8.45801 9.12207C8.33952 9.24056 8.18457 9.2998 7.99316 9.2998C7.81087 9.2998 7.66048 9.24056 7.54199 9.12207C7.4235 8.99902 7.36426 8.84408 7.36426 8.65723V6.77734H5.49121C5.2998 6.77734 5.14258 6.7181 5.01953 6.59961C4.90104 6.48112 4.8418 6.33073 4.8418 6.14844Z"})})},590470:(e,t,n)=>{n.d(t,{G:()=>o});n(667294);var r=n(785893);const o=(0,n(827282).IU)("exclamation",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M7.99634 15.5659C6.96118 15.5659 5.98706 15.3682 5.07397 14.9727C4.16089 14.582 3.35522 14.0376 2.65698 13.3394C1.96362 12.6411 1.41919 11.8354 1.02368 10.9224C0.628174 10.0093 0.43042 9.03516 0.43042 8C0.43042 6.96484 0.628174 5.99072 1.02368 5.07764C1.41919 4.16455 1.96362 3.36133 2.65698 2.66797C3.35522 1.96973 4.15845 1.42285 5.06665 1.02734C5.97974 0.631836 6.95386 0.434082 7.98901 0.434082C9.02905 0.434082 10.0056 0.631836 10.9187 1.02734C11.8318 1.42285 12.6375 1.96973 13.3357 2.66797C14.0339 3.36133 14.5808 4.16455 14.9763 5.07764C15.3718 5.99072 15.5696 6.96484 15.5696 8C15.5696 9.03516 15.3718 10.0093 14.9763 10.9224C14.5808 11.8354 14.0339 12.6411 13.3357 13.3394C12.6375 14.0376 11.8318 14.582 10.9187 14.9727C10.0056 15.3682 9.03149 15.5659 7.99634 15.5659ZM7.99634 14.0718C8.84106 14.0718 9.62964 13.9155 10.3621 13.603C11.0945 13.2905 11.739 12.856 12.2957 12.2993C12.8523 11.7427 13.2869 11.0981 13.5994 10.3657C13.9119 9.6333 14.0681 8.84473 14.0681 8C14.0681 7.16016 13.9119 6.37402 13.5994 5.6416C13.2869 4.9043 12.8523 4.25732 12.2957 3.70068C11.739 3.14404 11.092 2.70947 10.3547 2.39697C9.62231 2.08447 8.83374 1.92822 7.98901 1.92822C7.14917 1.92822 6.3606 2.08447 5.62329 2.39697C4.89087 2.70947 4.24878 3.14404 3.69702 3.70068C3.14526 4.25732 2.71313 4.9043 2.40063 5.6416C2.08813 6.37402 1.93188 7.16016 1.93188 8C1.93188 8.84473 2.08813 9.6333 2.40063 10.3657C2.71313 11.0981 3.14526 11.7427 3.69702 12.2993C4.25366 12.856 4.89819 13.2905 5.63062 13.603C6.36792 13.9155 7.15649 14.0718 7.99634 14.0718ZM7.99634 9.21582C7.57153 9.21582 7.35181 9.00098 7.33716 8.57129L7.23462 5.01172C7.22485 4.79688 7.29077 4.62109 7.43237 4.48438C7.57397 4.34766 7.75708 4.2793 7.98169 4.2793C8.2063 4.2793 8.39185 4.3501 8.53833 4.4917C8.68481 4.62842 8.75317 4.80176 8.74341 5.01172L8.62622 8.57129C8.61646 9.00098 8.40649 9.21582 7.99634 9.21582ZM7.99634 11.6475C7.75708 11.6475 7.552 11.5718 7.3811 11.4204C7.21509 11.2642 7.13208 11.0713 7.13208 10.8418C7.13208 10.6123 7.21509 10.4219 7.3811 10.2705C7.552 10.1143 7.75708 10.0361 7.99634 10.0361C8.23071 10.0361 8.43091 10.1118 8.59692 10.2632C8.76782 10.4146 8.85327 10.6074 8.85327 10.8418C8.85327 11.0762 8.76782 11.269 8.59692 11.4204C8.42603 11.5718 8.22583 11.6475 7.99634 11.6475Z"})})},695404:(e,t,n)=>{n.d(t,{L:()=>r().L});var r=()=>n(175771)},192651:(e,t,n)=>{n.d(t,{L:()=>o});n(667294);var r=n(785893);const o=(0,n(827282).IU)("topbarComment",{viewBox:"0 0 20 20",svg:(0,r.jsx)("path",{d:"M5.9375 18.4844C6.38281 18.4844 6.71094 18.2656 7.25 17.7891L9.92969 15.4297H14.6328C16.9844 15.4297 18.3047 14.0703 18.3047 11.75V5.67969C18.3047 3.35938 16.9844 2 14.6328 2H4.67188C2.32812 2 1 3.35938 1 5.67969V11.75C1 14.0781 2.36719 15.4297 4.61719 15.4297H4.9375V17.3438C4.9375 18.0391 5.30469 18.4844 5.9375 18.4844ZM6.32812 16.7344V14.5078C6.32812 14.0469 6.125 13.8672 5.6875 13.8672H4.72656C3.25781 13.8672 2.55469 13.125 2.55469 11.7031V5.72656C2.55469 4.30469 3.25781 3.5625 4.72656 3.5625H14.5859C16.0469 3.5625 16.75 4.30469 16.75 5.72656V11.7031C16.75 13.125 16.0469 13.8672 14.5859 13.8672H9.84375C9.36719 13.8672 9.13281 13.9453 8.80469 14.2891L6.32812 16.7344Z"})})},338215:(e,t,n)=>{n.d(t,{H:()=>h});n(267602),n(470928),n(241792);var r=n(667294),o=()=>n(219727),i=()=>n(142735),a=()=>n(846550),s=()=>n(269299),l=()=>n(466970),d=()=>n(452435),c=()=>n(286427),u=()=>n(832770),g=()=>n(401848),f=n(785893);function p(e){const t=(0,a().yK)((e=>({codeContainer:{display:"grid",gridTemplateColumns:"auto 1fr",fontFamily:"monospace",background:e.codeBlockBackground,margin:0,marginBottom:12,fontSize:12,padding:16,borderRadius:12,gap:16,maxHeight:800,overflow:"scroll"},lineNumbers:{color:e.lightTextColor,textAlign:"right",userSelect:"none",whiteSpace:"pre-wrap",paddingRight:6,paddingLeft:6},codeContent:{whiteSpace:"pre-wrap",wordWrap:"break-word",color:e.lightTextColor,"& code":{fontFamily:"inherit",fontSize:"inherit",padding:0,background:"none"}}})),[]),n=e.value.split("\n");return(0,f.jsxs)("div",{style:t.codeContainer,children:[(0,f.jsx)("div",{style:t.lineNumbers,children:n.map(((e,t)=>(0,f.jsx)("div",{children:t+1},t)))}),(0,f.jsx)("div",{style:t.codeContent,children:n.map(((e,t)=>(0,f.jsx)("div",{children:e},t)))})]})}function h(e){var t;const{workflowStore:n,functionKey:h,hideTitle:m}=e,x=(0,o().O7)(),y=(0,i().VK)((()=>(0,c().x)(n)),[n]),w=null==y||null===(t=y.functions)||void 0===t?void 0:t.find((e=>e.key===h)),v=(0,r.useCallback)((e=>{if(!n||!w)return;const t={...w,value:e||void 0};s().createAndCommit({userAction:"WorkflowFunction.handleSaveFunction",environment:x,canUndo:!0,perform:e=>(0,d().Kj)({workflowStore:n,functionValue:t,transaction:e})})}),[w,n,x]),k=(0,r.useCallback)((e=>{const t=JSON.parse(e);s().createAndCommit({userAction:"WorkflowFunction.handleSaveDebug",environment:x,canUndo:!0,perform:e=>(0,d().Kj)({workflowStore:n,functionValue:t,transaction:e})})}),[n,x]),[C,j]=(0,r.useState)(!1),b=(0,l().E)("workflows_debug_tools"),S=(0,a().yK)((e=>({container:{position:"relative"},debugButtonContainer:{position:"absolute",right:m?0:24,top:m?-26:0,zIndex:1}})),[m]);return w?(0,f.jsxs)("div",{style:S.container,children:[!m&&(0,f.jsx)(g().z,{title:w.name,debugComponent:(0,f.jsx)(u().c,{value:JSON.stringify(w,null,2),onSave:k,language:"json"})}),b&&(0,f.jsx)("div",{style:S.debugButtonContainer,children:(0,f.jsx)(g().l,{isDebugging:C,onClick:()=>j((e=>!e))})}),C?(0,f.jsx)(u().c,{value:w.value||"",onSave:v,language:"typescript"}):(0,f.jsx)(p,{value:w.value||""})]}):null}},699640:(e,t,n)=>{n.d(t,{ti:()=>E,BT:()=>z,Ll:()=>N,DV:()=>F});n(267602),n(470928);var r=n(667294),o=()=>n(219727),i=()=>n(142735),a=()=>n(846550),s=()=>n(361929),l=()=>n(846940),d=()=>n(783190),c=()=>n(788860),u=()=>n(513670),g=()=>n(269299),f=()=>n(827973),p=()=>n(448419),h=()=>n(1910),m=()=>n(198829),x=()=>n(255577),y=()=>n(661297),w=()=>n(967092),v=()=>n(388284),k=(n(821057),n(670560),n(653476),n(241792),n(228244),n(313429),()=>n(704923)),C=()=>n(352230),j=()=>n(92175),b=n(785893);n(492176),n(821319),n(7961);n(30005);n(749411);n(731107);function S(e){const t=e.model;return(0,b.jsx)(p().ZP,{popupType:p().Z4.Popup,placementToOrigin:p().pO.Bottom,alignmentToOrigin:p().vR.Start,renderOrigin:t=>(0,b.jsx)(j().Z,{...t,children:e.model||"Select model"}),render:n=>(0,b.jsx)(m().Z,{menuType:C().o.Popup,children:(0,b.jsx)(x().Z,{type:x().i.Vertical,initialFocus:0,sections:[{key:"models",render:e=>(0,b.jsx)(v().Z,{...e,title:"Models",shouldShowBottomDivider:!0}),items:k().Kz.map((r=>({key:r,action:()=>{e.setModel(r),n.close()},render:e=>(0,b.jsx)(f().Z,{...e,title:r,right:r===t})})))}]})})})}u().HP((async e=>{const t=e.currentUser.id;if(!t)throw new Error("No current user id");const r=new(n(826955).r9)(e,{table:n(691970).dx,id:t});await r.load();const o=r.getSpaceViewStores();await Promise.all(o.map((e=>e.load())));const i=o.map((e=>e.getSpaceStore())).find((e=>Boolean(e)));return null==i?void 0:i.id}));var M=()=>n(314379),I=()=>n(590470),T=()=>n(187435),H=()=>n(452435),A=()=>n(152399),D=()=>n(286427),K=()=>n(536603),P=()=>n(832770),R=()=>n(707513),W=()=>n(507159),_=()=>n(708518),B=()=>n(906651),Z=()=>n(251932);const O={zendesk:{VendorSpecificAuthDetails:function(e){const{navigateWithModuleSpecificAuth:t}=e,[o,i]=(0,r.useState)(""),[s,l]=(0,r.useState)(!1),d=(0,a().yK)((e=>({title:{fontSize:20,margin:"0 50px 32px",textAlign:"center",fontWeight:R().Ue.medium},inputContainer:{display:"flex",flexDirection:"column",paddingLeft:20,paddingRight:20,paddingTop:5,paddingBottom:5},input:{marginLeft:5,marginRight:5,marginBottom:55},row:{justifyContent:"center"}})),[]),u=(0,r.useCallback)((e=>{i(n(955620).vJ3(e.target.value))}),[i]),g=(0,r.useCallback)((()=>{l(!0),t(o)}),[t,o]),f=(0,r.useCallback)((e=>{"Enter"===e.key&&g()}),[g]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{style:d.title,children:(0,b.jsx)(c()._H,{id:"workflows.authDetails.title",defaultMessage:"Connect to {integrationName}",values:{integrationName:"Zendesk"}})}),(0,b.jsxs)("div",{style:d.inputContainer,children:[(0,b.jsxs)(Z().gq,{children:["https://",(0,b.jsx)(n(291198).Z,{style:d.input,value:o,onChange:u,onKeyDown:f}),".zendesk.com"]}),(0,b.jsx)(Z().gq,{style:d.row,children:(0,b.jsx)(B().Z,{onClick:g,disabled:!o,isLoading:s,children:s?"Authenticating...":"Authenticate"})})]})]})}},notionmail:{VendorSpecificAuthDetails:function(e){const{onDismiss:t,moduleKey:i,workflowPointer:s}=e,[l,d]=(0,r.useState)(!1),[u,g]=(0,r.useState)(),f=(0,o().O7)(),p=(0,a().yK)((e=>({title:{fontSize:20,margin:"0 50px 32px",textAlign:"center",fontWeight:R().Ue.medium},inputContainer:{display:"flex",flexDirection:"column",paddingLeft:20,paddingRight:20,paddingTop:5,paddingBottom:5},row:{justifyContent:"center"},errorMessage:{color:e.errorText,marginBottom:10}})),[]),h=(0,r.useCallback)((()=>{d(!0),n(824462).callApi({eventName:"connectAiWorkflowToNotionMailAccount",environment:f,data:{moduleKey:i,workflowPointer:s}}).then(t).catch((()=>{g("Error connecting to Notion Mail")}))}),[t,i,s,f]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{style:p.title,children:(0,b.jsx)(c()._H,{id:"workflows.authDetails.title",defaultMessage:"Connect to {integrationName}",values:{integrationName:"Notion Mail"}})}),(0,b.jsxs)("div",{style:p.inputContainer,children:[u&&(0,b.jsx)("div",{style:p.errorMessage,children:u}),(0,b.jsx)(Z().gq,{style:p.row,children:(0,b.jsx)(B().Z,{onClick:h,isLoading:l,children:l?"Connecting...":"Connect"})})]})]})}}};function U(e){const{onDismiss:t,isOpen:n,moduleType:r,moduleKey:o,workflowPointer:i,navigateWithModuleSpecificAuth:s}=e,{VendorSpecificAuthDetails:l}=O[r]??{},d=(0,a().yK)((e=>({container:{padding:16,display:"flex",flexDirection:"column",gap:8,minWidth:460,maxWidth:460,maxHeight:565,position:"relative"},closeButton:{position:"absolute",right:16,top:16}})),[]);return l?(0,b.jsx)(_().Z,{open:n,preventHideChildrenWhileOpening:!0,onDismiss:t,innerStyle:d.container,render:()=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(W().Z,{onClose:t,style:d.closeButton}),(0,b.jsx)(l,{navigateWithModuleSpecificAuth:s,onDismiss:t,moduleKey:o,workflowPointer:i})]})}):null}var V=()=>n(401848),L=()=>n(753970);function N(e){var t;const{store:n,workflowStore:s,moduleKey:d}=e,u=(0,c().YB)(),f=(0,o().O7)(),p=(0,i().VK)((()=>{var e;return null===(e=(0,D().x)(s))||void 0===e||null===(e=e.modules)||void 0===e?void 0:e.find((e=>e.key===d))}),[s,d]),h=(0,r.useCallback)((e=>{const t=JSON.parse(e);g().createAndCommit({userAction:"WorkflowModule.handleSaveDebug",environment:f,canUndo:!0,perform:e=>(0,H().mJ)({workflowStore:s,module:t,transaction:e})})}),[s,f]),m=(0,a().yK)((e=>({failedIcon:{width:16,height:16,fill:e.accentColors.red[400]},errorMessageContainer:{display:"flex",flexDirection:"column",gap:8,padding:8,borderRadius:4,backgroundColor:e.accentColors.red[100]},errorMessage:{display:"flex",alignItems:"center",gap:8},container:{display:"flex",flexDirection:"column",gap:4}})),[]),x=(0,i().VK)((()=>{if(p&&!A()._T.isValidAndConnected(p,s,n))return A()._T.getMessageIfNotValid(p,u)}),[p,s,n,u]),[w,v]=(0,r.useState)(!1),k=(0,r.useCallback)((()=>{v(!0)}),[]),C=(0,r.useCallback)((e=>{v(e)}),[]);if(!p)return null;const j=l().O[p.type];return j?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(V().z,{title:A()._T.getName(p,u),subtitle:A()._T.getDescription(p,u),debugComponent:(0,b.jsx)(P().c,{value:JSON.stringify(p,null,2),onSave:h,disabled:!s,language:"json"}),actions:(0,b.jsx)(F,{module:p,store:n,workflowStore:s})}),(0,b.jsxs)("div",{style:m.container,children:["oauth2"===(null===(t=j.authentication)||void 0===t?void 0:t.type)&&n&&s&&(0,b.jsx)(z,{store:n,module:p,workflowStore:s}),"database"===p.type&&n&&s&&(0,b.jsx)(K().A,{store:n,module:p,title:"View database"}),"ai"===p.type&&s&&(0,b.jsx)(E,{workflowStore:s,module:p}),x&&(0,b.jsxs)("div",{style:m.errorMessageContainer,children:[(0,b.jsxs)("div",{style:m.errorMessage,children:[(0,I().G)(m.failedIcon),x]}),"database"===p.type&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(y().Z,{onClick:k,children:(0,b.jsx)(c()._H,{id:"syncChangesModal.button",defaultMessage:"Sync schema changes"})}),(0,b.jsx)(L().o,{store:n,workflowStore:s,module:p,open:w,onOpenChange:C})]})]})]})]}):null}function F(e){const{module:t,store:n,workflowStore:a}=e,c=(0,o().O7)(),[p,h]=(0,r.useState)(!1),m=(0,i().VK)((()=>n.getSpaceId()),[n]),x=(0,r.useCallback)((e=>{const n=(0,d().S1)({moduleType:t.type,workflowId:a.id,moduleKey:t.key,spaceId:m,moduleSpecific:e});n&&(window.location.href=n)}),[t,a,m]),y=(0,r.useCallback)((()=>{var e;e=t.type,void 0!==O[e]?h(!0):x()}),[t.type,x]),w=(0,r.useCallback)((()=>{h(!1)}),[]),k=function(e){var t;const{workflowStore:n,module:i,handleConnect:a}=e,s=l().O[i.type],d=(0,o().O7)(),c=i.state,p=!(!c||!("connectionPointer"in c))&&Boolean(c.connectionPointer),h=(0,r.useCallback)((()=>{g().createAndCommit({userAction:"ModuleOauth2Controls.handleDisconnect",environment:d,canUndo:!0,perform:e=>(0,H().P$)({workflowStore:n,moduleKey:i.key,transaction:e})})}),[i,n,d]),m="oauth2"===(null===(t=s.authentication)||void 0===t?void 0:t.type),x="notionmail"===i.type;if(!m&&!x)return[];return u().oA([{key:"connect",action:a,render:e=>(0,b.jsx)(f().Z,{...e,title:p?"Reconnect":"Connect"})},p&&{key:"disconnect",action:h,render:e=>(0,b.jsx)(f().Z,{...e,title:"Disconnect",isRedOnHover:!0})}])}({workflowStore:a,module:t,handleConnect:y}),C=function(e){const{store:t,workflowStore:n,module:a}=e,s=(0,o().O7)(),l="database"===a.type?a:void 0,d=(0,r.useCallback)((()=>{l&&g().createAndCommit({userAction:"DatabaseModuleControls.handleDisconnectDatabase",environment:s,canUndo:!0,perform:e=>{(0,H().VP)({workflowStore:n,module:l,transaction:e})}})}),[l,n,s]),c=(0,r.useCallback)((()=>{g().createAndCommit({userAction:"DatabaseModuleControls.handleCreateDatabase",environment:s,canUndo:!0,perform:e=>(0,T().P4)({environment:s,store:t,workflowStore:n,transaction:e})})}),[t,n,s]),p=(0,i().VK)((()=>(0,A().Dk)({store:t,databaseModule:l,workflowStore:n})),[t,l,n]);if(!l)return[];return u().oA(["needs-create"===p&&{key:"create",action:c,render:e=>(0,b.jsx)(f().Z,{...e,title:"Create databases"})},"loading-database"!==p&&{key:"disconnect",action:d,render:e=>(0,b.jsx)(f().Z,{...e,title:"Disconnect database",isRedOnHover:!0})}])}({store:n,workflowStore:a,module:t}),j=(0,r.useCallback)((()=>{a&&g().createAndCommit({userAction:"WorkflowModule.handleRemoveModule",environment:c,canUndo:!0,perform:e=>{(0,H().R$)({workflowStore:a,module:t,transaction:e})}})}),[t,a,c]),S=(0,r.useMemo)((()=>{const e=[{key:"actions",render:e=>(0,b.jsx)(v().Z,{...e}),items:[...k,...C,{key:"remove",action:j,render:e=>(0,b.jsx)(f().Z,{...e,title:"Remove",isRedOnHover:!0})}]}];return e}),[j,k,C]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)($,{sections:S}),(0,b.jsx)(U,{onDismiss:w,isOpen:p,moduleType:t.type,navigateWithModuleSpecificAuth:x,moduleKey:t.key,workflowPointer:{table:s().An,id:a.id,spaceId:m}})]})}function E(e){var t;const{workflowStore:n,module:i}=e,a=(0,o().O7)(),s=null===(t=i.state)||void 0===t?void 0:t.model,l=(0,r.useCallback)((e=>{g().createAndCommit({userAction:"AIModuleControls.handleSetModel",environment:a,canUndo:!0,perform:t=>{(0,H().tF)({workflowStore:n,moduleKey:i.key,state:{...i.state,model:e},transaction:t})}})}),[i,n,a]);return(0,b.jsx)(S,{model:s,setModel:l})}function z(e){const{module:t}=e,n=t.state,r=!(!n||!("connectionPointer"in n))&&Boolean(n.connectionPointer);return(0,b.jsx)(b.Fragment,{children:r&&(0,b.jsx)("div",{children:"Connected"})})}function $(e){const{sections:t}=e,n=(0,o().Fy)(),r=(0,a().yK)((e=>({iconButton:{height:24,width:24,flexShrink:0,borderRadius:4},icon:{height:16,width:16}})),[]);return(0,b.jsx)(p().ZP,{originGap:0,alignmentToOrigin:p().vR.Center,placementToOrigin:p().pO.Bottom,popupType:n.isMobile?w().kQ.SlideUp:w().kQ.Popup,render:()=>{const e={menuType:C().o.Popup,width:250};return(0,b.jsx)(m().Z,{...e,children:(0,b.jsx)(x().Z,{type:x().i.Vertical,sections:t,initialFocus:0})})},renderOrigin:e=>(0,b.jsx)(h().Z,{...e,ariaLabel:"More",hasBackground:!0,icon:M().o,iconStyle:r.icon,style:r.iconButton})})}},401848:(e,t,n)=>{n.d(t,{l:()=>d,z:()=>c});var r=n(667294),o=()=>n(846550),i=()=>n(707513),a=()=>n(1910),s=()=>n(688173),l=n(785893);function d(e){const{isDebugging:t,onClick:n}=e;return(0,l.jsx)(a().Z,{icon:s().r,ariaLabel:"Debug",onClick:n,isBlue:t})}function c(e){const{title:t,subtitle:n,debugComponent:a,actions:s}=e,c=(0,o().yK)((e=>({paneHeaderContainer:{},paneHeader:{display:"flex",alignItems:"center",padding:"1px 0px 0px 0px",justifyContent:"space-between"},paneHeaderTitle:{color:e.text.primary,fontSize:17,fontStyle:"normal",fontWeight:i().Ue.medium,lineHeight:"22px",letterSpacing:"-0.442px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",height:28,display:"flex"},paneHeaderActions:{display:"flex",alignItems:"center",gap:4},paneHeaderSubtitle:{},debugContainer:{marginBottom:12}})),[]),[u,g]=(0,r.useState)(!1),f=(0,r.useCallback)((()=>g((e=>!e))),[]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{style:c.paneHeaderContainer,children:[(0,l.jsxs)("div",{style:c.paneHeader,children:[(0,l.jsx)("div",{style:c.paneHeaderTitle,children:t}),(0,l.jsxs)("div",{style:c.paneHeaderActions,children:[(0,l.jsx)(d,{isDebugging:u,onClick:f}),s]})]}),n&&(0,l.jsx)("div",{style:c.paneHeaderSubtitle,children:n})]}),u&&(0,l.jsx)("div",{style:c.debugContainer,children:a})]})}},677196:(e,t,n)=>{n.d(t,{q:()=>U,T:()=>Y});n(821057),n(267602),n(653476),n(470928),n(241792),n(228244);var r=()=>n(730120),o=n(667294),i=()=>n(219727),a=()=>n(142735),s=()=>n(846550),l=()=>n(5234),d=()=>n(783190),c=()=>n(788860),u=()=>n(696459),g=()=>n(707513),f=()=>n(154186),p=()=>n(448419),h=()=>n(1910),m=()=>n(291198),x=()=>n(661297),y=()=>n(641506),w=()=>n(621378),v=()=>n(711498),k=()=>n(518530),C=()=>n(363253),j=()=>n(528851),b=()=>n(590470),S=n(785893);const M=(0,n(827282).IU)("sidebarSearch",{viewBox:"0 0 20 20",svg:(0,S.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.24609 8.82031C3.24609 8.05469 3.38965 7.33691 3.67676 6.66699C3.96842 5.99251 4.36947 5.40007 4.87988 4.88965C5.3903 4.37467 5.98047 3.97363 6.65039 3.68652C7.32487 3.39941 8.04492 3.25586 8.81055 3.25586C9.58073 3.25586 10.3008 3.39941 10.9707 3.68652C11.6452 3.97363 12.2376 4.37467 12.748 4.88965C13.2585 5.40007 13.6572 5.99251 13.9443 6.66699C14.236 7.33691 14.3818 8.05469 14.3818 8.82031C14.3818 9.42188 14.2884 9.99382 14.1016 10.5361C13.9193 11.0785 13.6663 11.5729 13.3428 12.0195L16.46 15.1504C16.5557 15.2415 16.6263 15.3486 16.6719 15.4717C16.722 15.5947 16.7471 15.7246 16.7471 15.8613C16.7471 16.0527 16.7038 16.2259 16.6172 16.3809C16.5306 16.5358 16.4121 16.6566 16.2617 16.7432C16.1113 16.8343 15.9382 16.8799 15.7422 16.8799C15.6055 16.8799 15.4733 16.8548 15.3457 16.8047C15.2227 16.7591 15.111 16.6862 15.0107 16.5859L11.873 13.4482C11.4355 13.7399 10.957 13.9701 10.4375 14.1387C9.92253 14.3027 9.38021 14.3848 8.81055 14.3848C8.04492 14.3848 7.32487 14.2412 6.65039 13.9541C5.98047 13.667 5.3903 13.2682 4.87988 12.7578C4.36947 12.2474 3.96842 11.6572 3.67676 10.9873C3.38965 10.3128 3.24609 9.59049 3.24609 8.82031ZM4.70215 8.82031C4.70215 9.38997 4.80697 9.92318 5.0166 10.4199C5.23079 10.9167 5.52702 11.3542 5.90527 11.7324C6.28353 12.1061 6.72103 12.4001 7.21777 12.6143C7.71452 12.8285 8.24544 12.9355 8.81055 12.9355C9.38021 12.9355 9.91341 12.8285 10.4102 12.6143C10.9069 12.4001 11.3421 12.1061 11.7158 11.7324C12.0941 11.3542 12.3903 10.9167 12.6045 10.4199C12.8187 9.92318 12.9258 9.38997 12.9258 8.82031C12.9258 8.25521 12.8187 7.72428 12.6045 7.22754C12.3903 6.73079 12.0941 6.29329 11.7158 5.91504C11.3421 5.53678 10.9069 5.24284 10.4102 5.0332C9.91341 4.81901 9.38021 4.71191 8.81055 4.71191C8.24544 4.71191 7.71452 4.81901 7.21777 5.0332C6.72103 5.24284 6.28353 5.53678 5.90527 5.91504C5.52702 6.29329 5.23079 6.73079 5.0166 7.22754C4.80697 7.72428 4.70215 8.25521 4.70215 8.82031Z"})});var I=()=>n(814866),T=()=>n(452435),H=()=>n(286427),A=()=>n(342792);function D(e){const{runData:t}=e;return{id:(0,A().ZP)(),type:"workflow-run-context",value:t}}const K=1.5,P=(16-K)/2+4,R=26,W=2-R,_=`calc(100% + ${W}px)`,B=`calc(100% + ${W+R}px)`;var Z=()=>n(401848);function O(){return(0,s().yK)((e=>({code:{whiteSpace:"pre-wrap",wordWrap:"break-word",fontFamily:"monospace",background:e.codeBlockBackground,color:e.regularTextColor,padding:8,margin:0,fontSize:12},failedIcon:{width:16,height:16,fill:e.accentColors.red[400]},errorMessage:{display:"flex",alignItems:"center",gap:8,padding:8,borderRadius:4,backgroundColor:e.accentColors.red[100]},inlineIcon:{width:16,height:16},logEntryLine:{display:"flex",alignItems:"center",gap:6,padding:4,borderRadius:4}})),[])}function U(e){const{runStore:t,workflowStore:n,store:i}=e,l=(0,s().yK)((e=>({topBar:{display:"flex",alignItems:"center",marginBottom:8,gap:8},heading:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:12,marginBottom:4,fontWeight:g().Ue.medium}})),[]),c=O(),u=(0,a().VK)((()=>{var e;return null===(e=t.getData())||void 0===e?void 0:e.trigger_key}),[t]),f=(0,a().VK)((()=>{var e,r;const o=null===(e=t.getData())||void 0===e?void 0:e.trigger_key;if(!o)return;const i=null===(r=(0,H().x)(n).functions)||void 0===r?void 0:r.find((e=>e.key===o));return(null==i?void 0:i.name)||o}),[t,n]),p=(0,a().VK)((()=>t.getCreatedAt()),[t]),m=(0,a().VK)((()=>{var e;return null===(e=t.getData())||void 0===e?void 0:e.status}),[t]),x=(0,a().VK)((()=>{var e;return null===(e=n.getModel())||void 0===e?void 0:e.getVersion()}),[n]),y=(0,a().VK)((()=>{var e;return null===(e=t.getData())||void 0===e?void 0:e.workflow_version}),[t]),w=(0,I().Xe)(i),v=(0,o.useCallback)((()=>{w({type:"runs"})}),[w]),C=(0,a().VK)((()=>{var e;return null===(e=t.getData())||void 0===e?void 0:e.trigger_data}),[t]),j=(0,a().VK)((()=>{var e;return(null===(e=t.getData())||void 0===e?void 0:e.effects)||[]}),[t]),M=(0,a().VK)((()=>{var e;return((null===(e=t.getData())||void 0===e?void 0:e.console_log)||[]).join("\n\n")}),[t]),T=(0,a().VK)((()=>{var e;return null===(e=t.getData())||void 0===e?void 0:e.event_log}),[t]),A=(0,a().VK)((()=>{var e;const n=null===(e=t.getData())||void 0===e?void 0:e.error;return n&&n.message||""}),[t]),D=(0,a().VK)((()=>{var e;return null===(e=t.getData())||void 0===e?void 0:e.trigger_at}),[t]),[K,P]=(0,o.useState)(!1),R=(0,o.useCallback)((()=>P((e=>!e))),[]),[W,_]=(0,o.useState)(!1),B=(0,o.useCallback)((()=>_((e=>!e))),[]);return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{style:l.topBar,className:"workflow-run-top-bar",children:[(0,S.jsx)("div",{style:l.heading,children:f}),(0,S.jsx)("div",{style:{flexGrow:1}}),(0,S.jsx)(h().Z,{onClick:v,icon:k().U,ariaLabel:"close run viewer"})]}),y&&x!==y&&(0,S.jsxs)("div",{style:c.errorMessage,children:[(0,b().G)(c.failedIcon),"This was run on an older version of the workflow"]}),(0,S.jsx)("div",{style:l.heading,children:"Created"}),(0,S.jsx)("div",{children:r().ou.fromMillis(p).toRelative()}),D&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{style:l.heading,children:"Trigger at"}),(0,S.jsx)("div",{children:r().ou.fromMillis(D).toRelative()})]}),m&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{style:l.heading,children:"Status"}),(0,S.jsx)("div",{style:{display:"flex"},children:(0,S.jsx)(Y,{status:m})})]}),(0,S.jsx)(L,{workflowStore:n,store:i,triggerKey:u,eventLog:T,runStore:t}),C&&!T&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{style:l.heading,children:"Trigger variables"}),(0,S.jsx)("div",{style:c.code,children:JSON.stringify(JSON.parse(C),null,2)})]}),(null==j?void 0:j.length)>0&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{style:l.heading,children:"Action log"}),(0,S.jsx)("div",{style:c.code,children:j.map((e=>JSON.stringify(e,null,2))).join("\n\n")})]}),M&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{style:l.heading,children:"Console log"}),(0,S.jsx)("div",{style:c.code,children:M})]}),T&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{style:l.heading,children:["Timeline",(0,S.jsx)(Z().l,{isDebugging:K,onClick:R})]}),K&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{style:l.heading,children:"Trigger variables"}),(0,S.jsx)("div",{style:c.code,children:JSON.stringify(JSON.parse(C||"{}"),null,2)}),(0,S.jsxs)("div",{style:l.heading,children:[W?"Console Log (without effects)":"Event Log",(0,S.jsx)(Z().l,{isDebugging:W,onClick:B})]}),(0,S.jsx)("div",{style:c.code,children:W?T.filter((e=>"log"===e.type)).map(d().hi).join("\n\n"):JSON.stringify(T,null,2)})]}),(0,S.jsx)(E,{triggerName:f,triggerData:C,eventLog:T,workflowStore:n,store:i})]}),A&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{style:l.heading,children:"Error"}),(0,S.jsx)(V,{error:A,workflowStore:n,store:i,triggerKey:u,eventLog:T,runStore:t})]})]})}function V(e){const{error:t,workflowStore:n,store:r,triggerKey:o,eventLog:i,runStore:a}=e,s=O();return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(L,{workflowStore:n,store:r,triggerKey:o,eventLog:i,runStore:a,error:t}),(0,S.jsx)("div",{style:s.code,children:t})]})}function L(e){const{workflowStore:t,store:n,runStore:r,error:a}=e,l=(0,i().Fy)(),d=(0,i().O7)(),c=!!a,[u,g]=o.useState(""),f=(0,s().yK)((e=>({wrap:{width:340,padding:8},button:{marginTop:8}})),[]),h=(0,o.useCallback)((()=>{if(!n||!t)throw new Error("WorkflowRunFeedbackButton: store or workflowStore is undefined");const e=r.getData(),o=a?function(e){const{error:t,userFeedback:n}=e;return`The workflow encountered the following error on a run:\n<error>\n${t}\n</error>\n\nDescribe in detail what went wrong and how to fix the issue. ${n}`}({error:a,userFeedback:u}):function(e){const{userFeedback:t}=e;return`After the above run, the user provided the following feedback:\n${t}`}({userFeedback:u});(0,T().Ek)({environment:d,workflowStore:t,store:n,inputValue:o,additionalSteps:e?[D({runData:e})]:[]})}),[r,u,n,t,d,a]);return(0,S.jsx)(p().ZP,{popupType:l.isMobile?p().Z4.SlideUp:p().Z4.Popup,placementToOrigin:p().pO.Bottom,alignmentToOrigin:p().vR.Center,originGap:4,renderOrigin:e=>(0,S.jsx)(x().Z,{style:f.button,isBlue:!c,isRed:c,icon:c?w().d:void 0,isSmall:!0,...e,children:c?"Fix issue":"Provide feedback on run"}),render:()=>(0,S.jsx)("div",{style:f.wrap,children:(0,S.jsx)(m().Z,{value:u,textarea:!0,autoFocus:!0,autosize:!0,autosizeMinHeight:200,autosizeMaxHeight:600,onChange:e=>g(e.target.value),textareaSubmitOnEnter:!0,onSubmit:h,placeholder:c?"Optional additional feedback on the failing run.":"What should I fix about this run?"})})})}function N(e){const{triggerName:t,triggerData:n}=e,r=O();return(0,S.jsx)(q,{isInError:!1,iconIfNotInError:(0,v().M)(r.inlineIcon),fullContent:JSON.stringify(JSON.parse(n||"{}"),null,2),children:`Triggered by: ${t||"Unknown"}`})}function F(e){const{functionKey:t,stringifiedDebugContent:n,isFunctionCall:r,workflowStore:i,store:s}=e,l=(0,a().VK)((()=>{var e;return null===(e=(0,H().x)(i).functions)||void 0===e?void 0:e.find((e=>e.key===t))}),[i,t]),d=O(),c=(0,I().Xe)(s),u=(0,o.useCallback)((()=>{c({type:"function",key:t})}),[t,c]);return(0,S.jsxs)(q,{fullContent:n,iconIfNotInError:r?(0,C().z)(d.inlineIcon):void 0,children:[!r&&"Finished: ",(0,S.jsx)(f().Z,{onClick:u,children:null==l?void 0:l.name})]})}function E(e){const{triggerName:t,triggerData:n,eventLog:r,store:o,workflowStore:i}=e,a=(0,s().yK)((e=>({list:{...y().mK,color:e.regularTextColor}})),[]);return(0,S.jsxs)("ul",{style:a.list,children:[(0,S.jsx)("li",{children:(0,S.jsx)(N,{triggerName:t,triggerData:n})}),r.map(((e,t)=>{const n=(()=>{switch(e.type){case"log":return(0,S.jsx)($,{event:e},`${e.type}-${t}`);case"effect":return(0,S.jsx)(G,{effect:e.effect});case"functionCall":return(0,S.jsx)(F,{functionKey:e.function_key,stringifiedDebugContent:JSON.stringify(e.function_arguments,null,2),isFunctionCall:!0,workflowStore:i,store:o});case"functionReturn":return(0,S.jsx)(F,{functionKey:e.function_key,stringifiedDebugContent:JSON.stringify(e.function_return,null,2),isFunctionCall:!1,workflowStore:i,store:o});default:return(0,u().t1)(e)}})();return(0,S.jsx)("li",{children:n},`${e.type}-${t}`)}))]})}function z(e){const{errorMessage:t,stack:n,isExpanded:r}=e,o=O();return(0,S.jsxs)(S.Fragment,{children:[t,r&&(0,S.jsx)("div",{style:o.code,children:n})]})}function $(e){const{event:t}=e,n=O(),r=(0,s().yK)((e=>({inlineLogMessage:{marginRight:4},expandableContextText:{color:e.text.secondary},messages:{display:"block"}})),[]),{logLevelPrefix:i,isError:a}=(0,o.useMemo)((()=>{switch(t.level){case"error":return{logLevelPrefix:"Error: ",isError:!0};case"warn":return{logLevelPrefix:"Warning: ",isError:!1};case"info":return{logLevelPrefix:void 0,isError:!1};default:(0,u().t1)(t.level)}}),[t.level]),l=(0,o.useMemo)((()=>t.messages.some((e=>"object"===e.type||"error"===e.type))),[t.messages]),d=(0,S.jsx)("div",{style:n.code,children:t.messages.map(((e,t)=>{switch(e.type){case"msg":return e.data;case"object":return(0,S.jsx)("div",{children:JSON.stringify(JSON.parse(e.data),null,2)},`${e.type}-${t}`);case"undefined":return"undefined";case"error":return(0,S.jsx)(z,{errorMessage:e.message,stack:e.stack,isExpanded:!0},`${e.type}-${t}`);case"database":return`${e.database_key}`;default:return(0,u().t1)(e)}}))});return(0,S.jsxs)(q,{isInError:a,iconIfNotInError:void 0,fullContent:l?d:void 0,children:[i,(0,S.jsx)("div",{style:r.messages,children:t.messages.map(((e,t)=>{switch(e.type){case"msg":return(0,S.jsx)("span",{style:r.inlineLogMessage,children:e.data});case"object":return null;case"undefined":return"undefined";case"error":return(0,S.jsx)(z,{errorMessage:e.message,stack:e.stack,isExpanded:!1});case"database":return(0,S.jsx)("span",{style:r.inlineLogMessage,children:e.database_key});default:return(0,u().t1)(e)}}))}),l&&(0,S.jsx)("div",{style:r.expandableContextText,children:"{Collapsed information}"})]})}function J(e){const{effect:t}=e;switch(t.key){case"ai.prompt":return(0,S.jsx)(c()._H,{defaultMessage:"Generated a response using an AI prompt",id:"workflow.run.effect.ai.prompt.description"});case"ai.promptJson":return(0,S.jsx)(c()._H,{defaultMessage:"Generated a JSON response using an AI prompt",id:"workflow.run.effect.ai.promptJson.description"});case"agents.runAgent":return(0,S.jsx)(c()._H,{defaultMessage:"Ran an agent in chat",id:"workflow.run.effect.agents.runAgent.description"});case"agents.createThread":return(0,S.jsx)(c()._H,{defaultMessage:"Created a thread in chat",id:"workflow.run.effect.agents.createThread.description"});case"databases.query":return(0,S.jsx)(c()._H,{defaultMessage:"Queried a database",id:"workflow.run.effect.databases.query.description"});case"databases.getPage":return(0,S.jsx)(c()._H,{defaultMessage:"Retrieved a page from a database",id:"workflow.run.effect.databases.getPage.description"});case"databases.createPage":return(0,S.jsx)(c()._H,{defaultMessage:"Created a page in a database",id:"workflow.run.effect.databases.createPage.description"});case"databases.updatePage":return(0,S.jsx)(c()._H,{defaultMessage:"Updated a page in a database",id:"workflow.run.effect.databases.updatePage.description"});case"databases.getPageContent":return(0,S.jsx)(c()._H,{defaultMessage:"Read the content of a page in a database",id:"workflow.run.effect.databases.getPageContent.description"});case"databases.setPageContent":return(0,S.jsx)(c()._H,{defaultMessage:"Set the content of a page in a database",id:"workflow.run.effect.databases.setPageContent.description"});case"databases.insertPageContent":return(0,S.jsx)(c()._H,{defaultMessage:"Inserted content into a page in a database",id:"workflow.run.effect.databases.insertPageContent.description"});case"databases.pickPages":return(0,S.jsx)(c()._H,{defaultMessage:"Picked pages from a database",id:"workflow.run.effect.databases.pickPages.description"});case"databases.pickSelectOption":return(0,S.jsx)(c()._H,{defaultMessage:"Picked a select option from a database",id:"workflow.run.effect.databases.pickSelectOption.description"});case"databases.pickMultiSelectOptions":return(0,S.jsx)(c()._H,{defaultMessage:"Picked multiple select options from a database",id:"workflow.run.effect.databases.pickMultiSelectOptions.description"});case"discussions.getPageDiscussions":return(0,S.jsx)(c()._H,{defaultMessage:"Got the discussions for a page",id:"workflow.run.effect.discussions.getPageDiscussions.description"});case"discussions.addCommentToPage":return(0,S.jsx)(c()._H,{defaultMessage:"Added a comment to a page",id:"workflow.run.effect.discussions.addCommentToPage.description"});case"discussions.addCommentToDiscussion":return(0,S.jsx)(c()._H,{defaultMessage:"Added a comment to a discussion",id:"workflow.run.effect.discussions.addCommentToDiscussion.description"});case"search.answerQuestions":return(0,S.jsx)(c()._H,{defaultMessage:"Answered questions using search",id:"workflow.run.effect.search.answerQuestions.description"});case"slack.createThreadInChannel":return(0,S.jsx)(c()._H,{defaultMessage:"Created a new thread in a Slack channel",id:"workflow.run.effect.slack.createThreadInChannel.description"});case"slack.replyInThread":return(0,S.jsx)(c()._H,{defaultMessage:"Replied to a Slack thread",id:"workflow.run.effect.slack.replyInThread.description"});case"slack.updateMessage":return(0,S.jsx)(c()._H,{defaultMessage:"Updated a Slack message",id:"workflow.run.effect.slack.updateMessage.description"});case"slack.addReactionToMessage":return(0,S.jsx)(c()._H,{defaultMessage:"Added a reaction to a Slack message",id:"workflow.run.effect.slack.addReactionToMessage.description"});case"slack.removeReactionFromMessage":return(0,S.jsx)(c()._H,{defaultMessage:"Removed a reaction from a Slack message",id:"workflow.run.effect.slack.removeReactionFromMessage.description"});case"slack.getThreadsInChannelSince":return(0,S.jsx)(c()._H,{defaultMessage:"Retrieved Slack threads from a channel",id:"workflow.run.effect.slack.getThreadsInChannelSince.description"});case"slack.queryChannels":return(0,S.jsx)(c()._H,{defaultMessage:"Queried Slack channels",id:"workflow.run.effect.slack.queryChannels.description"});case"slack.getUser":return(0,S.jsx)(c()._H,{defaultMessage:"Retrieved a Slack user's information",id:"workflow.run.effect.slack.getUser.description"});case"slack.findUserByEmail":return(0,S.jsx)(c()._H,{defaultMessage:"Found a Slack user by their email address",id:"workflow.run.effect.slack.findUserByEmail.description"});case"users.getUser":return(0,S.jsx)(c()._H,{defaultMessage:"Retrieved a user's information",id:"workflow.run.effect.users.getUser.description"});case"users.findUserByEmail":return(0,S.jsx)(c()._H,{defaultMessage:"Found a user by their email address",id:"workflow.run.effect.users.findUserByEmail.description"});case"files.getFileName":return(0,S.jsx)(c()._H,{defaultMessage:"Retrieved the name of a file",id:"workflow.run.effect.files.getFileName.description"});case"files.getFileContent":return(0,S.jsx)(c()._H,{defaultMessage:"Retrieved the content of a file",id:"workflow.run.effect.files.getFileContent.description"});case"zendesk.getTicket":return(0,S.jsx)(c()._H,{defaultMessage:"Retrieved a Zendesk ticket",id:"workflow.run.effect.zendesk.getTicket.description"});case"zendesk.getComments":return(0,S.jsx)(c()._H,{defaultMessage:"Retrieved comments from a Zendesk ticket",id:"workflow.run.effect.zendesk.getComments.description"});case"zendesk.addTicket":return(0,S.jsx)(c()._H,{defaultMessage:"Created a new Zendesk ticket",id:"workflow.run.effect.zendesk.addTicket.description"});case"zendesk.updateTicket":return(0,S.jsx)(c()._H,{defaultMessage:"Updated a Zendesk ticket",id:"workflow.run.effect.zendesk.updateTicket.description"});case"zendesk.addComment":return(0,S.jsx)(c()._H,{defaultMessage:"Added a comment to a Zendesk ticket",id:"workflow.run.effect.zendesk.addComment.description"});default:return(0,u().t1)(t.key)}}function q(e){const{children:t,isInError:n,iconIfNotInError:r,fullContent:i}=e,a=!!i,l=O(),[d,c]=(0,o.useState)(!1),u=(0,o.useCallback)((()=>{c((e=>!e))}),[]),g=(0,s().yK)((e=>({logEntryLine:{...l.logEntryLine,...r?{}:{marginLeft:18,paddingLeft:8}},errorLogEntryLine:{...l.logEntryLine,gap:0,alignItems:"center",justifyContent:"left",marginLeft:-1},threadLine:{position:"absolute",backgroundColor:e.stroke.secondary,borderRadius:2,width:K,height:r?_:B,left:P,top:r?R:0},logEntryContainer:{position:"relative"}})),[l.logEntryLine,r]),p=n?(0,S.jsx)(x().Z,{icon:b().G,iconStyle:l.failedIcon,isRed:!0,style:g.errorLogEntryLine,onClick:u,children:t}):a?(0,S.jsxs)(f().Z,{style:g.logEntryLine,onClick:u,children:[r,t]}):(0,S.jsx)("div",{style:g.logEntryLine,children:t});return(0,S.jsxs)("div",{style:g.logEntryContainer,children:[p,(0,S.jsx)("div",{style:g.threadLine}),d&&(0,S.jsx)("div",{style:l.code,children:i})]})}function G(e){const{effect:t}=e,n=O(),r=JSON.stringify(t,null,2),o=t.finished,i=o?"read"===t.type?M(n.inlineIcon):(0,j().g)(n.inlineIcon):(0,b().G)(n.failedIcon);return(0,S.jsxs)(q,{isInError:!o,iconIfNotInError:i,fullContent:r,children:[!o&&(0,S.jsx)(c()._H,{defaultMessage:"Did not finish: ",id:"workflow.run.effect.didNotFinish"}),(0,S.jsx)(J,{effect:t})]})}function Y(e){const{status:t}=e,n=(0,s().yK)((e=>({status:{borderRadius:12,padding:"2px 6px",fontSize:12,fontWeight:500,color:e.contentBackground},statusSuccess:{backgroundColor:e.fill.greenPrimary},statusFailure:{backgroundColor:e.fill.redPrimary},statusPending:{backgroundColor:e.fill.lightGraySecondary},statusRunning:{backgroundColor:e.fill.lightGraySecondary}})),[]);return(0,S.jsx)("div",{style:{...n.status,..."success"===t?n.statusSuccess:"failure"===t?n.statusFailure:n.statusPending},children:(0,l().Z)(t)})}},868997:(e,t,n)=>{n.d(t,{r:()=>I});n(267602),n(470928),n(241792);var r=()=>n(730120),o=n(667294),i=()=>n(219727),a=()=>n(142735),s=()=>n(846550),l=()=>n(801812),d=()=>n(365873),c=()=>n(788860),u=()=>n(707513),g=()=>n(824462),f=()=>n(154186),p=()=>n(552064),h=()=>n(291198),m=()=>n(661297),x=()=>n(92175),y=()=>n(568672),w=()=>n(210251),v=()=>n(804217),k=()=>n(826955),C=()=>n(814866),j=()=>n(286427),b=()=>n(677196),S=n(785893);const M=3e4;function I(e){const{store:t,workflowStore:n}=e,r=(0,i().O7)(),[d,f]=(0,o.useState)(""),k=(0,s().yK)((e=>({paneHeader:{display:"flex",alignItems:"center",padding:"1px 8px 0px 8px",marginBottom:18,justifyContent:"space-between"},paneHeaderTitle:{color:e.text.primary,fontSize:17,fontStyle:"normal",fontWeight:u().Ue.medium,lineHeight:"22px",letterSpacing:"-0.442px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",height:28,display:"flex"},list:{display:"flex",flexDirection:"column",gap:1,alignItems:"flex-start",alignSelf:"stretch"},emptyStateContainer:{display:"flex",justifyContent:"center",alignItems:"flex-start",paddingTop:96,height:"100%"},searchInput:{width:200}})),[]),C=(0,a().VK)((()=>{const e=t.getSpaceId();if(e)return{spaceId:e,workflowId:n.id,search:d}}),[t,n,d]),[{value:j},b]=(0,l().r5)((async()=>{if(!C)return;if(!v().default.state.online)return;const e=await g().callApi({eventName:"getWorkflowRuns",environment:r,data:C});return"failed"!==e.type?e.data.runIds:void 0}),[C,r]),I=(0,o.useCallback)((e=>{f(e.target.value)}),[f]);return(0,y().Y)(b,M),(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{style:k.paneHeader,children:[(0,S.jsx)("div",{style:k.paneHeaderTitle,children:(0,S.jsx)(c()._H,{defaultMessage:"Run history",id:"workflowRuns.header"})}),j&&(j.length>0||d)&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(x().Z,{onClick:b,children:(0,S.jsx)(c()._H,{defaultMessage:"Refresh",id:"workflowRuns.refreshButton"})}),(0,S.jsx)(h().Z,{style:k.searchInput,placeholder:"Search",value:d,onChange:I})]})]}),j&&(j.length>0||d)?(0,S.jsx)("div",{style:k.list,children:j.map((e=>(0,S.jsx)(T,{store:t,workflowStore:n,runId:e},e)))}):(0,S.jsx)("div",{style:k.emptyStateContainer,children:(0,S.jsx)(p().Z,{icon:w().a,title:"No runs yet",description:"Workflow runs will appear here",cta:(0,S.jsx)(m().Z,{onClick:b,children:(0,S.jsx)(c()._H,{defaultMessage:"Refresh",id:"workflowRuns.refreshButton"})})})})]})}function T(e){const{store:t,runId:n,workflowStore:r}=e,i=(0,s().yK)((e=>({button:{display:"flex",gap:8,padding:4},timestamp:{color:e.text.tertiary,fontSize:14,fontStyle:"normal",fontWeight:u().Ue.regular,lineHeight:"20px",letterSpacing:"-0.154px"}})),[]),l=(0,o.useMemo)((()=>k().US.createChildStore(t,{table:d().I_,id:n,spaceId:t.getSpaceId()})),[t,n]),c=(0,a().VK)((()=>{var e,t;const n=null===(e=l.getData())||void 0===e?void 0:e.trigger_key;if(!n)return;const o=null===(t=(0,j().x)(r).functions)||void 0===t?void 0:t.find((e=>e.key===n));return(null==o?void 0:o.name)||n}),[l,r]),g=(0,a().VK)((()=>{var e,t;const n=l.getCreatedAt(),r=null===(e=l.getData())||void 0===e?void 0:e.trigger_at;return"pending"===(null===(t=l.getData())||void 0===t?void 0:t.status)?r:n}),[l]),p=(0,a().VK)((()=>{var e;return null===(e=l.getData())||void 0===e?void 0:e.status}),[l]),h=(0,C().Xe)(t),m=(0,o.useCallback)((()=>{h({type:"runs",runId:n})}),[n,h]);return g?(0,S.jsxs)(f().Z,{style:i.button,onClick:m,children:[(0,S.jsx)("div",{children:c}),(0,S.jsx)("div",{style:{flexGrow:1}}),(0,S.jsx)("div",{style:i.timestamp,children:(0,S.jsx)(H,{timestamp:g})}),p&&(0,S.jsx)(b().T,{status:p})]}):null}function H(e){const{timestamp:t}=e,[,n]=(0,o.useState)({}),i=r().ou.now(),a=r().ou.fromMillis(t),s=i.diff(a).as("minutes"),l=s>0,d=Math.abs(s)<1;return(0,y().Y)((()=>{n({})}),d&&!l?1e3:6e4),(0,S.jsx)(S.Fragment,{children:r().ou.fromMillis(t).toRelative()})}},905086:(e,t,n)=>{n.d(t,{ur:()=>pe,Z6:()=>de,fv:()=>ce});n(267602),n(653476),n(241792),n(228244);var r=n(667294),o=()=>n(219727),i=()=>n(142735),a=()=>n(846550),s=()=>n(801812),l=()=>n(217465),d=()=>n(827370),c=()=>n(396136),u=()=>n(696056),g=()=>n(361929),f=()=>n(365873),p=()=>n(788860),h=()=>n(707513),m=()=>n(824462),x=()=>n(269299),y=()=>n(573357),w=()=>n(92175),v=()=>n(471645),k=()=>n(850790),C=()=>n(665525),j=()=>n(15409),b=()=>n(210251),S=()=>n(518530),M=()=>n(363253),I=()=>n(869851),T=()=>n(745435),H=()=>n(590470),A=()=>n(877691),D=()=>n(521777),K=()=>n(192651),P=()=>n(826955),R=()=>n(814866),W=()=>n(452435),_=()=>n(152399),B=()=>n(286427),Z=()=>n(832770),O=(n(821057),n(470928),()=>n(308186)),U=()=>n(311419),V=()=>n(448419),L=()=>n(187435),N=n(785893);function F(e){const{workflowStore:t,renderButton:n}=e,r=(0,o().Fy)();return(0,N.jsx)(V().ZP,{popupType:r.isMobile?V().Z4.SlideUp:V().Z4.Popup,placementToOrigin:V().pO.Bottom,alignmentToOrigin:V().vR.Center,originGap:4,renderOrigin:n,render:e=>(0,N.jsx)(E,{handleClose:e.close,workflowStore:t})})}function E(e){const{handleClose:t,workflowStore:n}=e,i=(0,o().O7)(),a=(0,r.useCallback)((e=>{var r;if("collection"!==e.type)throw new Error("Expected collection target");((null===(r=n.getData())||void 0===r?void 0:r.modules)||[]).find((t=>{var n;return"database"===t.type&&(null===(n=t.state)||void 0===n||null===(n=n.pointer)||void 0===n?void 0:n.id)===e.collection.id}))?O().PV({message:"Database already connected"}):(x().createAndCommit({userAction:"WorkflowPreview.DatabasePickerContent.handleChange",environment:i,canUndo:!0,perform:t=>{(0,L().TR)({workflowStore:n,pointer:e.collection,transaction:t})}}),t())}),[n,i,t]);return(0,N.jsx)(U().L,{onChange:a,onClose:t,parentRecordStore:n,skipPages:!0,skipVariables:!0})}var z=()=>n(338215),$=()=>n(699640),J=()=>n(677196),q=()=>n(868997);n(749411);function G(e){var t;const{workflowStore:n,name:s,functionKey:l}=e,d=(0,o().O7)(),c=(0,a().yK)((e=>({header:{fontWeight:600,marginBottom:12}})),[]),u=(0,r.useCallback)((e=>{if(!n)return;const t=JSON.parse(e);x().createAndCommit({userAction:"WorkflowTest.handleSaveTest",environment:d,canUndo:!0,perform:e=>(0,W().gM)({workflowStore:n,functionKey:l,test:t,transaction:e})})}),[n,l,d]),g=(0,i().VK)((()=>(0,B().x)(n)),[n]),f=null==g||null===(t=g.functions)||void 0===t||null===(t=t.flatMap((e=>{var t;return null===(t=e.tests)||void 0===t?void 0:t.filter((e=>e.description.name===s))})))||void 0===t?void 0:t[0];return f?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{style:c.header,children:s}),(0,N.jsx)(Z().c,{value:JSON.stringify(f,null,2),onSave:u,disabled:!n,language:"json"})]}):null}var Y=()=>n(730120),Q=()=>n(836273),X=()=>n(342792),ee=()=>n(552064),te=()=>n(729775),ne=()=>n(568672),re=()=>n(804217);const oe=6e4;function ie(e){const{store:t,workflowStore:n}=e,r=(0,o().O7)(),l=(0,a().yK)((e=>({paneHeader:{display:"flex",alignItems:"center",padding:"1px 8px 0px 8px",marginBottom:18},paneHeaderTitle:{color:e.text.primary,fontSize:17,fontStyle:"normal",fontWeight:h().Ue.medium,lineHeight:"22px",letterSpacing:"-0.442px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",height:28,display:"flex"},list:{display:"flex",flexDirection:"column",gap:1,alignItems:"flex-start",alignSelf:"stretch"},emptyStateContainer:{display:"flex",justifyContent:"center",alignItems:"flex-start",paddingTop:96,height:"100%"}})),[]),d=(0,i().VK)((()=>{const e=t.getSpaceId();if(e)return{spaceId:e,workflowId:n.id}}),[t,n]),[{value:c},u]=(0,s().r5)((async()=>{if(!d)return;if(!re().default.state.online)return;const e=await m().callApi({eventName:"getWorkflowTranscripts",environment:r,data:d});return"failed"!==e.type?e.data.transcripts:void 0}),[d,r]);return(0,ne().Y)(u,oe),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{style:l.paneHeader,children:(0,N.jsx)("div",{style:l.paneHeaderTitle,children:(0,N.jsx)(p()._H,{defaultMessage:"Chats",id:"workflowTranscriptsViewer.header"})})}),c?(0,N.jsx)("div",{style:l.list,children:c.map((e=>(0,N.jsx)(ae,{transcript:e},e.id)))}):(0,N.jsx)("div",{style:l.emptyStateContainer,children:(0,N.jsx)(ee().Z,{icon:K().L,title:"No chats yet",description:"Configuration chats will appear here"})})]})}function ae(e){const{transcript:t}=e,n=(0,a().yK)((e=>({transcript:{padding:"8px 8px",borderRadius:6,width:"100%"},transcriptInner:{display:"flex",justifyContent:"space-between",gap:8},transcriptTitle:{fontSize:14,fontStyle:"normal",fontWeight:h().Ue.medium,lineHeight:"20px",letterSpacing:"-0.154px",color:e.text.primary},transcriptDate:{color:e.text.tertiary,fontSize:14,fontStyle:"normal",fontWeight:h().Ue.regular,lineHeight:"20px",letterSpacing:"-0.154px"}})),[]);return(0,N.jsxs)(te().Z,{href:`${Q().VP.aiInferenceTranscript}?t=${(0,X().cj)(t.id)}`,style:n.transcript,innerStyle:n.transcriptInner,children:[(0,N.jsx)("span",{style:n.transcriptTitle,children:t.title||"Untitled chat"}),(0,N.jsx)("div",{style:{flexGrow:1}}),(0,N.jsx)("span",{style:n.transcriptDate,children:Y().ou.fromMillis(t.created_at).toRelative()})]})}var se=()=>n(762382);function le(e){var t;const{workflowStore:n,viewKey:r}=e,o=(0,a().yK)((e=>({paneHeader:{display:"flex",alignItems:"center",padding:"1px 8px 0px 8px",marginBottom:18,justifyContent:"space-between"},paneHeaderTitle:{color:e.text.primary,fontSize:17,fontStyle:"normal",fontWeight:h().Ue.medium,lineHeight:"22px",letterSpacing:"-0.442px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",height:28,display:"flex"}})),[]),s=(0,i().VK)((()=>(0,B().x)(n)),[n]),l=null==s||null===(t=s.views)||void 0===t?void 0:t.find((e=>e.key===r));return l?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{style:o.paneHeader,children:(0,N.jsx)("div",{style:o.paneHeaderTitle,children:l.name})}),(0,N.jsx)(Z().c,{value:JSON.stringify(l,null,2),language:"json",disabled:!0})]}):null}function de(e){const{store:t,clientNavigationPane:n}=e,s=(0,o().O7)(),l=(0,a().yK)((e=>({wrap:{display:"flex",gap:16,width:"100%",overflow:"hidden",fontSize:14,flexGrow:1},sidebar:{display:"flex",flexDirection:"column",gap:8,maxWidth:300,width:"100%",overflow:"scroll",paddingBottom:24},sidebarHeader:{display:"flex",gap:10,alignItems:"flex-start",flexDirection:"column",padding:"1px 8px 12px 8px"},sidebarHeaderContent:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:2,alignSelf:"stretch"},sidebarHeaderTitle:{fontSize:14,fontStyle:"normal",fontWeight:h().Ue.regular,lineHeight:"20px",letterSpacing:"-0.154px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},sidebarHeaderTitleEmpty:{color:e.text.tertiary},sidebarSections:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:4,alignSelf:"stretch"},sidebarSection:{display:"flex",flexDirection:"column",gap:2,alignSelf:"stretch"},sidebarSectionTitle:{display:"flex",height:30,padding:"0px 8px",alignItems:"center",alignSelf:"stretch",fontSize:12,fontStyle:"normal",fontWeight:h().Ue.medium,lineHeight:"16px",color:e.text.secondary},list:{display:"flex",flexDirection:"column",gap:2,alignItems:"flex-start",alignSelf:"stretch",paddingBottom:12},sidebarHeaderDescription:{fontSize:14,color:e.text.secondary,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},emptySidebarHeaderDescription:{color:e.text.quaternary},header:{fontSize:12,color:e.text.primary},enabledRow:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},passedIcon:{width:14,height:14,fill:e.accentColors.green[400]},failedIcon:{width:16,height:16,fill:e.accentColors.red[400]},paneWrapper:{width:"100%",height:"100%",overflow:"scroll",display:"flex",flexDirection:"column",alignItems:"center",padding:"0px 96px 36px 96px"},pane:{width:"100%",maxWidth:900,paddingBottom:12},runPeek:{position:"absolute",top:0,right:0,bottom:0,background:e.contentBackground,zIndex:1e3,width:600,height:"100%",overflow:"scroll",padding:12,borderLeft:`1px solid ${e.outlineButtonBorder}`},workflowDatabasePicker:{display:"flex",flexDirection:"column",alignSelf:"stretch",marginTop:-12,paddingBottom:12}})),[]),d=(0,i().VK)((()=>{var e;const n=null===(e=t.getFormat())||void 0===e?void 0:e.workflow_id;if(n)return P().hA.createChildStore(t,{table:g().An,id:n,spaceId:t.getSpaceId()})}),[t]),c=(0,i().VK)((()=>{if(d)return(0,B().x)(d)}),[d]),u=null==n?void 0:n.settingsPane,m=(0,R().Xe)(t),w=(0,r.useCallback)((()=>{c&&d&&x().createAndCommit({userAction:"WorkflowPageBlock.handleToggleEnabled",environment:s,canUndo:!0,perform:e=>{(0,W()._s)({workflowStore:d,workflow:c,transaction:e})}})}),[d,c,s]),I=(0,i().VK)((()=>{if(d&&"runs"===(null==u?void 0:u.type)&&u.runId)return P().US.createChildStore(d,{table:f().I_,id:u.runId,spaceId:t.getSpaceId()})}),[d,u,t]),{runtimeActorStore:T,runtimeActorName:_,missingRuntimeActorRoles:Z,runtimeActorHasSufficientAccess:O,grantAccess:U}=ce({workflowStore:d,store:t}),V=(null==c?void 0:c.modules)||[],L=[...V.filter((e=>"database"===e.type)),...V.filter((e=>"database"!==e.type))];return d&&c&&u?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{style:l.wrap,children:[(0,N.jsxs)("div",{style:l.sidebar,children:[(0,N.jsx)("div",{style:l.sidebarHeader,children:(0,N.jsxs)("div",{style:l.enabledRow,children:[(0,N.jsx)("span",{children:"Enabled"}),(0,N.jsx)(v().Z,{on:Boolean(c.enabled),onClick:w})]})}),(0,N.jsxs)("div",{style:l.sidebarSections,children:[(0,N.jsxs)("div",{style:l.list,children:[(0,N.jsx)(ue,{icon:b().a,label:"Run history",active:"runs"===u.type,onClick:()=>m({type:"runs"})}),(0,N.jsx)(ue,{icon:K().L,label:"Chats",active:"chat"===u.type,onClick:()=>m({type:"chat"})})]}),T&&(0,N.jsxs)("div",{style:l.sidebarSection,children:[(0,N.jsx)("div",{style:l.sidebarSectionTitle,children:(0,N.jsx)(p()._H,{id:"workflows.sidebar.runtime_actor",defaultMessage:"Runs as"})}),(0,N.jsx)("div",{style:l.list,children:(0,N.jsx)(ue,{icon:C().S,label:_,active:"runtime_actor"===u.type,onClick:()=>m({type:"runtime_actor"}),right:O?(0,j().e)(l.passedIcon):(0,H().G)(l.failedIcon)},T.id)})]}),c.views&&c.views.length>0&&(0,N.jsxs)("div",{style:l.sidebarSection,children:[(0,N.jsx)("div",{style:l.sidebarSectionTitle,children:(0,N.jsx)(p()._H,{id:"workflows.sidebar.views",defaultMessage:"Views"})}),(0,N.jsx)("div",{style:l.list,children:c.views.map((e=>(0,N.jsx)(ue,{icon:A().J,label:e.name,active:"view_settings"===u.type&&u.key===e.key,onClick:()=>m({type:"view_settings",key:e.key})},e.key)))})]}),L.length>0&&(0,N.jsxs)("div",{style:l.sidebarSection,children:[(0,N.jsx)("div",{style:l.sidebarSectionTitle,children:(0,N.jsx)(p()._H,{id:"workflows.sidebar.connections",defaultMessage:"Connections"})}),(0,N.jsx)("div",{style:l.list,children:L.map((e=>(0,N.jsx)(ge,{module:e,setSettingsPane:m,settingsPane:u,failedIconStyle:l.failedIcon,workflowStore:d,store:t},e.key)))})]}),d&&(0,N.jsx)("div",{style:l.workflowDatabasePicker,children:(0,N.jsx)(F,{workflowStore:d,renderButton:e=>{let{onClick:t}=e;return(0,N.jsx)(ue,{icon:D().R,label:"Connect a database",active:!1,onClick:t})}})}),c.triggers&&c.triggers.length>0&&(0,N.jsxs)("div",{style:l.sidebarSection,children:[(0,N.jsx)("div",{style:l.sidebarSectionTitle,children:(0,N.jsx)(p()._H,{id:"workflows.sidebar.triggers",defaultMessage:"Triggers"})}),(0,N.jsx)("div",{style:l.list,children:c.triggers.map((e=>(0,N.jsx)(ue,{icon:k().K,label:e.name,active:"trigger"===u.type&&u.key===e.key,onClick:()=>m({type:"trigger",key:e.key})},e.key)))})]}),c.functions&&c.functions.length>0&&(0,N.jsxs)("div",{style:l.sidebarSection,children:[(0,N.jsx)("div",{style:l.sidebarSectionTitle,children:(0,N.jsx)(p()._H,{id:"workflows.sidebar.functions",defaultMessage:"Functions"})}),(0,N.jsx)("div",{style:l.list,children:c.functions.map((e=>{const t=e.tests||[],n=t.filter((e=>{var t;return null===(t=e.result)||void 0===t?void 0:t.passed})),o="function"===u.type&&u.key===e.key,i="test"===u.type&&u.functionKey===e.key;return(0,N.jsxs)(r.Fragment,{children:[(0,N.jsx)(ue,{label:e.name,icon:M().z,right:`${n.length}/${t.length}`,active:o,onClick:()=>m({type:"function",key:e.key})}),(o||i)&&t.map((t=>{var n;return(0,N.jsx)(ue,{label:t.description.name,right:null!==(n=t.result)&&void 0!==n&&n.passed?(0,j().e)(l.passedIcon):(0,S().U)(l.failedIcon),active:"test"===u.type&&u.name===t.description.name,onClick:()=>m({type:"test",name:t.description.name,functionKey:e.key})},t.description.name)}))]},e.key)}))})]}),(0,N.jsx)(ue,{label:"Debug",active:"debug"===u.type,onClick:()=>m({type:"debug"})})]})]}),(0,N.jsx)("div",{style:l.paneWrapper,children:(0,N.jsxs)("div",{style:l.pane,children:["runtime_actor"===u.type&&(0,N.jsx)(fe,{missingRuntimeActorRoles:Z,grantAccess:U}),"runs"===u.type&&(0,N.jsx)(q().r,{store:t,workflowStore:d}),"chat"===u.type&&(0,N.jsx)(ie,{store:t,workflowStore:d}),"debug"===u.type&&(0,N.jsx)(pe,{workflowStore:d}),"module"===u.type&&(0,N.jsx)($().Ll,{store:t,workflowStore:d,moduleKey:u.key},u.key),"trigger"===u.type&&(0,N.jsx)(se().i,{store:t,workflowStore:d,triggerKey:u.key},u.key),"function"===u.type&&(0,N.jsx)(z().H,{workflowStore:d,functionKey:u.key},u.key),"test"===u.type&&(0,N.jsx)(G,{workflowStore:d,name:u.name,functionKey:u.functionKey},u.name),"view_settings"===u.type&&(0,N.jsx)(le,{workflowStore:d,viewKey:u.key})]})})]}),I&&(0,N.jsx)(y().Z,{capture:!0,render:e=>(0,N.jsx)("div",{style:l.runPeek,...e,children:(0,N.jsx)(J().q,{runStore:I,workflowStore:d,store:t})})})]}):null}function ce(e){const{workflowStore:t,store:n}=e,a=(0,o().O7)(),g=(0,i().VK)((()=>{var e;const n=null==t||null===(e=t.getDataStore())||void 0===e?void 0:e.getKeyStore("runtime_actor_pointer").getValue();if(!t||!n||!(0,d().$O)(n,u().cZ))return;const r=P().Qx.createChildStore(t,n);return r.isWorkflowBot()?r:void 0}),[t]),f=(0,i().VK)((()=>{if(g)return g.getName()}),[g]),[{value:p},h]=(0,s().r5)((async()=>{if(!t||!g)return;const e=await m().callApi({eventName:"getWorkflowRuntimeActorPermissions",environment:a,data:{workflowId:t.id,spaceId:n.getSpaceId()}});return"failed"!==e.type?l().RecordMapWithRole.create(e.data.missingRoles):void 0}),[t,g,n,a]),y=(0,i().VK)((()=>{var e;return!p||0===(null===(e=p.getByTable(c().iU))||void 0===e?void 0:e.length)}),[p]),w=(0,r.useCallback)((async()=>{if(!g||!p)return;const e=x().createAndCommit({userAction:"WorkflowPageBlock.WorkflowRuntimeActor.grantAccess",environment:a,canUndo:!0,perform:e=>{(0,W().b$)({environment:a,runtimeActorStore:g,missingRoles:p,transaction:e})}});await e.serverCommitResult,await h()}),[g,p,a,h]);return{runtimeActorStore:g,runtimeActorName:f,missingRuntimeActorRoles:p,runtimeActorHasSufficientAccess:y,grantAccess:w}}function ue(e){const t=(0,a().yK)((e=>({button:{width:"100%",fontWeight:h().Ue.medium,color:e.text.secondary,textOverflow:"ellipsis",whiteSpace:"nowrap",padding:"5px 8px"},isActive:{color:e.text.primary},icon:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,width:20,height:20,fill:e.icon.secondary},iconActive:{fill:e.icon.primary},trailingItems:{fontWeight:h().Ue.regular,color:e.text.tertiary},labelContainer:{display:"flex",alignItems:"center",alignSelf:"stretch",flex:1,minWidth:0},labelText:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",minWidth:0}})),[]);return(0,N.jsxs)(w().Z,{shouldShrink:!1,icon:e.icon,iconStyle:e.active?{...t.icon,...t.iconActive}:t.icon,hovered:!!e.active||void 0,onClick:e.onClick,style:e.active?{...t.button,...t.isActive}:t.button,children:[(0,N.jsx)("div",{style:t.labelContainer,children:(0,N.jsx)("div",{style:t.labelText,children:e.label})}),(0,N.jsx)("div",{style:{flexShrink:0}}),e.right&&(0,N.jsx)("div",{style:{...t.trailingItems,flexShrink:0},children:e.right})]})}function ge(e){const{module:t,setSettingsPane:n,settingsPane:o,failedIconStyle:a,workflowStore:s,store:l}=e,d=(0,p().YB)(),c=(0,r.useCallback)((()=>{n({type:"module",key:t.key})}),[t,n]),u=(0,i().VK)((()=>_()._T.isValidAndConnected(t,s,l)),[t,s,l]);return(0,N.jsx)(ue,{icon:"database"===t.type?T().t:I().L,label:_()._T.getName(t,d),active:"module"===o.type&&o.key===t.key,onClick:c,right:u?void 0:(0,H().G)(a)})}function fe(e){const{missingRuntimeActorRoles:t,grantAccess:n}=e,r=(0,a().yK)((e=>({paneHeader:{display:"flex",alignItems:"center",padding:"1px 8px 0px 8px",marginBottom:18},paneHeaderTitle:{color:e.text.primary,fontSize:17,fontStyle:"normal",fontWeight:h().Ue.medium,lineHeight:"22px",letterSpacing:"-0.442px"}})),[]),o=(0,i().VK)((()=>JSON.stringify((null==t?void 0:t.getByTable(c().iU))??[],null,2)),[t]);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{style:r.paneHeader,children:(0,N.jsx)("div",{style:r.paneHeaderTitle,children:"Missing roles"})}),(0,N.jsx)(w().Z,{onClick:n,children:"Grant access"}),(0,N.jsx)(Z().c,{value:o,disabled:!0,language:"json"})]})}function pe(e){const{workflowStore:t,hideTitle:n}=e,s=(0,o().O7)(),l=(0,a().yK)((e=>({paneHeader:{display:"flex",alignItems:"center",padding:"1px 8px 0px 8px",marginBottom:18},paneHeaderTitle:{color:e.text.primary,fontSize:17,fontStyle:"normal",fontWeight:h().Ue.medium,lineHeight:"22px",letterSpacing:"-0.442px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",height:28,display:"flex"}})),[]),d=(0,i().VK)((()=>{const e=t.getData();return e?JSON.stringify(e,null,2):""}),[t]),c=(0,r.useCallback)((e=>{const n=e?JSON.parse(e):void 0;x().createAndCommit({userAction:"WorkflowPageBlock.WorkflowDebugPopupContent.handleSave",environment:s,canUndo:!0,perform:e=>{(0,W().U0)({environment:s,workflowStore:t,workflow:n,transaction:e})}})}),[t,s]),u=(0,i().VK)((()=>{const e=t.getData();return!!e&&(e.modules||[]).some((e=>!("database"!==e.type||e.key&&e.name)))}),[t]),g=(0,r.useCallback)((()=>{const e=t.getData();if(!e)return;const n=(r=e,{...r,modules:null===(o=r.modules)||void 0===o?void 0:o.map((e=>{if("database"!==e.type)return e;if(e.key&&e.name)return e;const{key:t,name:n}=e.state;return t&&n?{...e,key:t,name:n}:e}))});var r,o;x().createAndCommit({userAction:"WorkflowPageBlock.WorkflowDebugPopupContent.handleMigrate",environment:s,canUndo:!0,perform:e=>{(0,W().U0)({environment:s,workflowStore:t,workflow:n,transaction:e})}})}),[t,s]);return(0,N.jsxs)(N.Fragment,{children:[!n&&(0,N.jsx)("div",{style:l.paneHeader,children:(0,N.jsx)("div",{style:l.paneHeaderTitle,children:"Debug"})}),u&&(0,N.jsx)(w().Z,{onClick:g,children:"Migrate"}),(0,N.jsx)(Z().c,{value:d,onSave:c,language:"json"})]})}},753970:(e,t,n)=>{n.d(t,{o:()=>Z});n(821057),n(267602),n(653476),n(241792);var r=n.n(n(452027)),o=n(667294),i=()=>n(219727),a=()=>n(142735),s=()=>n(846550),l=()=>n(766933),d=()=>n(335696),c=()=>n(783190),u=()=>n(788860),g=()=>n(269299),f=()=>n(827973),p=()=>n(448419),h=()=>n(507159),m=()=>n(1910),x=()=>n(198829),y=()=>n(255577),w=()=>n(708518),v=()=>n(661641),k=()=>n(92175),C=()=>n(967092),j=()=>n(906651),b=()=>n(388284),S=()=>n(352230),M=()=>n(590058),I=()=>n(338217),T=()=>n(688173),H=()=>n(615634),A=()=>n(826955),D=()=>n(187435),K=()=>n(152399),P=()=>n(286427);const R=["database","workflow"],W=(0,u().vU)({database:{id:"syncChangesModal.source.database",defaultMessage:"Update the database"},databaseCaption:{id:"syncChangesModal.source.database.caption",defaultMessage:"Update the connected database with the schema defined in this workflow. May cause data loss."},databaseDiff:{id:"syncChangesModal.source.database.diff",defaultMessage:"Apply these changes to the database:"},workflow:{id:"syncChangesModal.source.workflow",defaultMessage:"Update this workflow"},workflowCaption:{id:"syncChangesModal.source.workflow.caption",defaultMessage:"Pull the latest schema from the database."},workflowDiff:{id:"syncChangesModal.source.workflow.diff",defaultMessage:"Apply these changes to the workflow:"}});function _(e){return"database"===e?{label:W.database,caption:W.databaseCaption,diff:W.databaseDiff}:{label:W.workflow,caption:W.workflowCaption,diff:W.workflowDiff}}var B=n(785893);function Z(e){const{store:t,workflowStore:n,module:r,open:a,onOpenChange:l}=e,c=(0,i().O7)(),[f,p]=(0,o.useState)("workflow"),x=(0,o.useCallback)((()=>{p("workflow"),l(!1)}),[l]),y=(0,o.useCallback)((()=>{var e,o,i;if("database"!==r.type||null===(e=r.state)||void 0===e||!e.pointer)throw new Error("Invalid module");const a=(0,K()._4)({store:t,workflowStore:n,databaseModule:r}),s=(0,K().VI)({store:t,workflowStore:n,databaseModule:r}),l=null===(o=A().NW.createChildStore(t,r.state.pointer))||void 0===o?void 0:o.getSchema(),c=(null===(i=(0,P().x)(n).modules)||void 0===i?void 0:i.filter((e=>"database"===e.type)))||[],u=(0,D().v8)(c),g=(0,d().c1)({notionSchema:l,databaseKey:r.key,databaseKeyMap:u}),f=(0,d().yr)({databaseKey:r.key,databaseKeyMap:u,workflowSchema:r.state.schema,notionSchema:l,connectedRelationCollections:g,databaseModules:c});console.log({workflowDiff:a,notionDiff:s,mergeToNotion:f})}),[r,t,n]),k=(0,o.useCallback)((()=>{"database"===f?g().createAndCommit({userAction:"DatabaseModuleControls.handlePushToDatabases",environment:c,canUndo:!0,perform:e=>(0,D().pX)({environment:c,workflowStore:n,transaction:e})}):g().createAndCommit({userAction:"DatabaseModuleControls.handlePullFromDatabases",environment:c,canUndo:!0,perform:e=>(0,D().tO)({workflowStore:n,transaction:e})}),x()}),[f,c,n,x]),C=(0,s().yK)((e=>({container:{padding:16,display:"flex",flexDirection:"column",gap:8,minWidth:460,maxWidth:460,maxHeight:565},headerContainer:{display:"flex",flexDirection:"column",gap:8},header:{display:"flex",justifyContent:"space-between",alignItems:"center"},footer:{display:"flex",justifyContent:"end"},dropdownButtonContainer:{display:"flex",flexDirection:"column",width:"100%",gap:8},selectedDataSourceLabel:{color:e.mediumTextColor},debugButton:{height:22,width:22,flexShrink:0,borderRadius:"50%"},debugButtonIcon:{width:14,height:14,fill:e.lightIconColor}})),[]);return"database"!==r.type?null:(0,B.jsx)(w().Z,{open:a,onDismiss:x,render:()=>(0,B.jsxs)("div",{style:C.container,children:[(0,B.jsxs)("div",{style:C.headerContainer,children:[(0,B.jsxs)("div",{style:C.header,children:[(0,B.jsx)(v().q,{styleName:"Heading-17px/Semibold",children:(0,B.jsx)(u()._H,{id:"syncChangesModal.title",defaultMessage:"Sync database changes"})}),(0,B.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,B.jsx)(m().Z,{ariaLabel:"Report bug",hasBackground:!0,icon:T().r,iconStyle:C.debugButtonIcon,style:C.debugButton,onClick:y}),(0,B.jsx)(h().Z,{onClose:x})]})]}),(0,B.jsx)(O,{selectedSource:f,setSelectedSource:p})]}),(0,B.jsx)("div",{style:C.dropdownButtonContainer,children:(0,B.jsx)(v().q,{styleName:"UIRegular-14px/Regular",color:"mediumTextColor",children:(0,B.jsx)(u()._H,{..._(f).diff})})}),(0,B.jsx)(U,{selectedSource:f,store:t,workflowStore:n,databaseModule:r}),(0,B.jsx)("div",{style:C.footer,children:(0,B.jsx)(j().Z,{onClick:k,children:"database"===f?(0,B.jsx)(u()._H,{id:"syncChangesModal.button.updateDatabase",defaultMessage:"Update database"}):(0,B.jsx)(u()._H,{id:"syncChangesModal.button.updateWorkflow",defaultMessage:"Update workflow"})})})]})})}function O(e){const{selectedSource:t,setSelectedSource:n}=e,r=(0,s().yK)((e=>({menu:{width:"100%",backgroundColor:e.inputBackground,borderRadius:6,boxShadow:"rgba(15, 15, 15, 0.1) 0px 0px 0px 1px inset"},button:{display:"flex",minHeight:34,margin:0,width:"100%"},content:{display:"flex",alignItems:"center"},selected:{width:"100%",color:e.mediumTextColor},downIcon:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]);return(0,B.jsx)(p().ZP,{popupType:C().kQ.Popup,sameWidthAsOrigin:!0,render:e=>(0,B.jsx)(x().Z,{menuType:S().o.Popup,children:(0,B.jsx)(y().Z,{type:y().i.Vertical,initialFocus:void 0,sections:[{key:"sources",render:e=>(0,B.jsx)(b().Z,{...e}),items:R.map((t=>({key:t,render:e=>{const{label:n,caption:r}=_(t);return(0,B.jsx)(f().Z,{...e,title:n.defaultMessage,caption:null==r?void 0:r.defaultMessage,shouldWrapCaption:!0})},action:()=>{n(t),e.close()}})))}]})}),renderOrigin:e=>(0,B.jsx)(f().Z,{style:r.menu,buttonStyle:r.button,title:(0,B.jsxs)("div",{style:r.content,children:[(0,B.jsx)("div",{style:r.selected,children:(0,B.jsx)(v().q,{styleName:"UIRegular-14px/Regular",children:(0,B.jsx)(u()._H,{..._(t).label})})}),(0,H().i)(r.downIcon)]}),focused:!1,...e})})}function U(e){var t;const{selectedSource:n,store:r,workflowStore:i,databaseModule:l}=e,d=(0,a().VK)((()=>(0,K().N6)({store:r,workflowStore:i,databaseModule:l})),[r,i,l]),[c,u]=(0,o.useState)(!1),g=(0,s().yK)((e=>({container:{display:"flex",flexDirection:"column",overflowX:"auto",overflowY:"auto",flexGrow:1,gap:4},propertyChangesContainer:{display:"flex",flexDirection:"column",gap:8},propertyChangeContainer:{padding:"2px 6px",borderRadius:4,backgroundColor:e.accentColors.yellow[100],color:e.accentColors.yellow[600],fontSize:12}})),[]),f="workflow"===n?null==d?void 0:d.addedProperties:null==d?void 0:d.removedProperties,p="workflow"===n?null==d?void 0:d.removedProperties:null==d?void 0:d.addedProperties;return(0,B.jsxs)("div",{style:g.container,children:[(0,B.jsxs)("div",{style:g.propertyChangesContainer,children:[null==f?void 0:f.map((e=>(0,B.jsx)(V,{name:e.name,type:e.type,change:"added"},e.name))),null==p?void 0:p.map((e=>(0,B.jsx)(V,{name:e.name,type:e.type,change:"removed"},e.name))),null==d||null===(t=d.changedProperties)||void 0===t?void 0:t.map((e=>(0,B.jsx)(V,{name:e.name,type:e.type,change:"changed"},e.name)))]}),(null==d?void 0:d.propertyMapChanged)&&(0,B.jsx)("div",{style:g.propertyChangeContainer,children:"Metadata changed"}),c?(0,B.jsx)(F,{selectedSource:n,store:r,workflowStore:i,databaseModule:l}):(0,B.jsx)(k().Z,{onClick:()=>u(!0),isGray:!0,children:"View details"})]})}function V(e){const{name:t,type:n,change:r}=e,o=(0,s().yK)((e=>({container:{display:"flex",alignItems:"center",gap:8},name:{marginRight:4}})),[]);return(0,B.jsxs)("div",{style:o.container,children:[(0,B.jsx)(L,{type:n}),(0,B.jsx)("div",{style:o.name,children:t}),(0,B.jsx)(N,{status:r})]})}function L(e){const{type:t}=e,n=(0,s().Fg)();return"content"===t?null:"external_relation"===t?(0,I().J)({width:16,height:16,padding:2,marginRight:6}):(0,B.jsx)(l().ZP,{type:t,icon:void 0,size:16,theme:n})}function N(e){const{status:t}=e,n=(0,s().yK)((e=>({container:{padding:"2px 4px",borderRadius:4,backgroundColor:"added"===t?e.accentColors.green[100]:"removed"===t?e.accentColors.red[100]:e.accentColors.yellow[100],color:"added"===t?e.accentColors.green[600]:"removed"===t?e.accentColors.red[600]:e.accentColors.yellow[600],fontSize:10,fontWeight:500}})),[t]);return(0,B.jsx)("div",{style:n.container,children:"added"===t?"Added":"removed"===t?"Deleted":"Updated"})}function F(e){const{selectedSource:t,store:n,workflowStore:o,databaseModule:i}=e,l=(0,a().VK)((()=>{let e=null,a=null;if("workflow"===t){const t=(0,K()._4)({store:n,workflowStore:o,databaseModule:i});if(!t)return null;e=(0,c().qq)(t.moduleState,!0),a=(0,c().qq)(t.notionState,!0)}else{const t=(0,K().VI)({store:n,workflowStore:o,databaseModule:i});if("needs-create"===t||"loading-database"===t)return null;e=(0,c().qq)(t.notionSchema,!0),a=(0,c().qq)(t.workflowSchema,!0)}const s=new(r()),l=s.diff_linesToChars_(e,a),d=s.diff_main(l.chars1,l.chars2,!1);return s.diff_charsToLines_(d,l.lineArray),d}),[t,n,o,i]),d=(0,s().yK)((e=>({container:{display:"flex",flexDirection:"column",padding:8,backgroundColor:e.inputBackground,borderRadius:4},pre:{lineHeight:1,margin:0,padding:0},diffNone:{fontFamily:"monospace"},diffDelete:{fontFamily:"monospace",background:e.accentColors.red[100],color:e.accentColors.red[500]},diffInsert:{fontFamily:"monospace",background:e.accentColors.green[100],color:e.accentColors.green[500]}})),[]);return(0,B.jsx)("div",{style:d.container,children:(0,B.jsx)("pre",{style:d.pre,children:null==l?void 0:l.map(((e,t)=>{let[n,r]=e;return(0,B.jsx)("span",{style:n===M().NL?d.diffDelete:n===M().D$?d.diffInsert:d.diffNone,children:r},t)}))})})}},762382:(e,t,n)=>{n.d(t,{P:()=>ie,i:()=>oe});n(267602),n(470928);var r=n(667294),o=()=>n(219727),i=()=>n(142735),a=()=>n(846550),s=()=>n(788860),l=()=>n(707513),d=()=>n(269299),c=()=>n(471645),u=()=>n(654133),g=()=>n(641506),f=()=>n(832566),p=()=>n(452435),h=()=>n(286427),m=()=>n(832770),x=()=>n(196007),y=()=>n(982614),w=()=>n(154186),v=()=>n(363253),k=()=>n(814866),C=()=>n(696459),j=()=>n(997141),b=()=>n(210251),S=()=>n(644618),M=()=>n(745435),I=()=>n(925514),T=()=>n(695404),H=()=>n(435797),A=()=>n(536603),D=()=>n(157955),K=()=>n(803021),P=()=>n(790819),R=()=>n(158548),W=()=>n(166312),_=()=>n(676279),B=()=>n(448419),Z=()=>n(529048),O=n(785893);function U(e){const{recurrenceTrigger:t}=e,n=(0,s().YB)(),o=(0,i().qz)(void 0,Z().Z),d=(0,_().d)(),c=(0,r.useMemo)((()=>({start_date:(0,K().kq)((0,K().tg)(2025,0,0,0,0,0)),...t})),[t]),u=(0,a().yK)((e=>({temporaryReadonly:{display:"flex",alignItems:"center",justifyContent:"center",color:e.lightErrorText,fontSize:l().JB.UISmall.desktop,marginTop:4}})),[]),g=c?(0,W().De)({intl:n,recurrence:(0,D().convertFromUnpersistedRecurrenceConfig)(c)}):(0,O.jsx)(s()._H,{id:"RecurrenceTrigger.frequency",defaultMessage:"frequency"}),f=c;return(0,O.jsx)(B().ZP,{alignmentToOrigin:B().vR.End,buttonPopupStore:o,disabled:!1,originGap:0,placementToOrigin:B().pO.Bottom,popupType:d,renderOrigin:e=>(0,O.jsx)(P().S,{...e,disabled:!1,isError:!1,hasActionRequired:!0,tooltipMessage:void 0,dropdownButtonType:"dropdown",children:g}),render:()=>(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("span",{style:u.temporaryReadonly,children:"Read only - use chat to edit"}),(0,O.jsx)(R().w,{currentValue:f,onChange:()=>{}})]})})}n(821057),n(916054),n(653476),n(241792),n(228244);var V=()=>n(824462),L=()=>n(198829),N=()=>n(255577),F=()=>n(953349),E=()=>n(352230),z=()=>n(385010);function $(e){var t,n;const{workflowStore:a,moduleKey:d,isAllChannels:c,channelIds:u,writeChannelIds:g}=e,f=u&&u.length>0,p=(0,i().qz)(void 0,Z().Z),m=(0,r.useCallback)((()=>p.reset()),[p]);if("slack"!==d)throw new Error("WorkflowSlackChannelPicker can only be used for slack");const x=(0,i().VK)((()=>(0,h().x)(a)),[a]),y=(0,i().VK)((()=>a.getSpaceId()),[a]),w=(0,i().VK)((()=>a.id),[a]),v=null==x||null===(t=x.modules)||void 0===t?void 0:t.find((e=>e.key===d)),k=null==v||null===(n=v.state)||void 0===n?void 0:n.connectionPointer,C=(0,o().O7)(),{loadedChannelsForAccount:j,isLoading:b}=(0,F().U7)(k?{type:"workflow",workflowExternalAuthenticationId:k.id}:void 0),S=(0,r.useMemo)((()=>u&&u.length>=0&&u.every((e=>null==j?void 0:j.some((t=>t.id===e))))),[j,u]),M=(0,r.useMemo)((()=>u?u.map((e=>{const t=null==j?void 0:j.find((t=>t.id===e));return{id:e,type:(null==t?void 0:t.type)??"public",name:(null==t?void 0:t.name)??e,isMember:(null==t?void 0:t.isMember)??!1}})):void 0),[u,j]),I=(0,r.useMemo)((()=>null==M?void 0:M.filter((e=>!e.isMember))),[M]),T=(null==k?void 0:k.spaceId)??y,H=(0,r.useMemo)((()=>k?{type:"workflow",workflowExternalAuthenticationId:k.id}:void 0),[k]);r.useEffect((()=>{H&&T&&(0,F().uV)({environment:C,spaceId:T,externalAuthConfig:H})}),[C,T,H]),r.useEffect((()=>{H&&T&&u&&async function(e){const{environment:t,spaceId:n,externalAuthConfig:r,channelIds:o,workflowId:i,moduleKey:a}=e,s=await V().callApi({eventName:"getViaWorkflowModuleConfigurationUtil",environment:t,data:{workflowId:i,spaceId:n,moduleKey:a,moduleType:"slack",callArguments:{functionName:"getSlackChannelNames",functionArgs:[o]}}});if("success"===s.type){if("getSlackChannelNames"!==s.data.functionName)throw new Error("Invalid function name");z().l.addChannelsForBot(r,s.data.functionReturn)}}({environment:C,spaceId:T,externalAuthConfig:H,channelIds:u,workflowId:w,moduleKey:d})}),[C,T,H,u,w,d]);const A=(0,_().d)();if(c)return(0,O.jsx)("div",{children:(0,O.jsx)(s()._H,{defaultMessage:"Any channel",id:"workflows.targetPicker.anyChannel"})});const D=(0,O.jsx)(B().ZP,{alignmentToOrigin:B().vR.End,buttonPopupStore:p,disabled:!1,originGap:0,placementToOrigin:B().pO.Bottom,popupType:A,renderOrigin:e=>(0,O.jsx)(P().S,{...e,disabled:!1,isError:!1,hasActionRequired:!f,tooltipMessage:void 0,dropdownButtonType:"dropdown",children:S?(0,O.jsx)("span",{style:l().Yu,children:null==M?void 0:M.map((e=>e.name)).join(", ")}):b?(0,O.jsx)(s()._H,{id:"workflows.targetPicker.loading",defaultMessage:"Loading channels"}):(0,O.jsx)(s()._H,{id:"workflows.targetPicker.noTarget",defaultMessage:"Select Slack channels"})}),render:()=>(0,O.jsx)(J,{currentNotificationChannels:M,connectionPointer:k,channelIds:u,writeChannelIds:g,onClose:m})});return S&&I&&I.length>0?(0,O.jsxs)("div",{children:[D,(0,O.jsx)("div",{children:(0,O.jsx)(s()._H,{id:"workflows.targetPicker.channelsBotIsNotAMemberOf",defaultMessage:"Bot must be added to: {channels}",values:{channels:null==I?void 0:I.map((e=>`#${e.name}`)).join(", ")}})})]}):D}function J(e){const{connectionPointer:t,currentNotificationChannels:n,channelIds:o,writeChannelIds:i,onClose:d}=e,c=r.useCallback(((e,t)=>{const n=null==o?void 0:o.includes(e.id);i(n&&o?o.filter((t=>t!==e.id)):[...o??[],e.id])}),[i,o]),u=(0,a().yK)((e=>({header:{display:"flex",alignItems:"center",margin:8,color:e.mediumTextColor,fontWeight:l().Ue.medium,fontSize:l().JB.UISmall.desktop}})),[]);return(0,O.jsx)(F().ZP,{workflowExternalAuthenticationPointer:t,currentNotificationChannels:n,onClose:d,onNotificationChannelSelect:c,onNewSlackAccountAdded:()=>{},isMultiSelectMode:!0,shouldHideSlackAccountSection:!0,renderMenu:e=>(0,O.jsx)(L().Z,{menuType:E().o.Popup,width:266,maxHeight:"50vh",header:(0,O.jsx)("div",{style:u.header,children:(0,O.jsx)(s()._H,{id:"workflows.selectChannelView.title",defaultMessage:"Select Slack channels"})}),children:(0,O.jsx)(N().Z,{type:N().i.Vertical,initialFocus:0,sections:e})})})}const q=(0,s().vU)({databasePageCreated:{defaultMessage:"When a page is created in",id:"aiWorkflow.trigger.title.database.page.created"},databasePageUpdated:{defaultMessage:"When a page is updated in",id:"aiWorkflow.trigger.title.database.page.updated"},databasePageDeleted:{defaultMessage:"When a page is deleted in",id:"aiWorkflow.trigger.title.database.page.deleted"},slackMessage:{defaultMessage:"New slack message in",id:"aiWorkflow.trigger.title.slack.message"},slackReactionAdded:{defaultMessage:"Slack reaction added in",id:"aiWorkflow.trigger.title.slack.reaction.added"},slackThreadCreated:{defaultMessage:"Slack thread created in",id:"aiWorkflow.trigger.title.slack.thread.created"},slackThreadUpdated:{defaultMessage:"Slack thread updated in",id:"aiWorkflow.trigger.title.slack.thread.updated"},recurrence:{defaultMessage:"Triggers every",id:"aiWorkflow.trigger.title.recurrence"},pageDiscussionCommentAdded:{defaultMessage:"When a comment is added to a page in",id:"aiWorkflow.trigger.title.page.discussion.comment.added"},chatMessage:{defaultMessage:"When a chat message is received",id:"aiWorkflow.trigger.title.chat.message"},notionMailEmailReceived:{defaultMessage:"When an email is received",id:"aiWorkflow.trigger.title.notionmail.email.received"},zendeskTicket:{defaultMessage:"When a Zendesk ticket is created",id:"aiWorkflow.trigger.title.zendesk.ticket"}});function G(e){const{workflowStore:t,trigger:n,store:i}=e,a=(0,o().O7)(),s=(0,r.useCallback)((e=>{d().createAndCommit({userAction:"WorkflowTrigger.handleSaveTrigger",environment:a,canUndo:!0,perform:n=>(0,p().DE)({workflowStore:t,trigger:e,transaction:n})})}),[t,a]);if(!n.state)return null;switch(n.state.type){case"database.page.created":case"database.page.updated":case"database.page.deleted":{const{moduleKey:e}=n.state;return(0,O.jsx)(A().b,{store:i,workflowStore:t,moduleKey:e})}case"slack.message":case"slack.reaction.added":case"slack.thread.created":case"slack.thread.updated":{const{state:e}=n;return(0,O.jsx)($,{workflowStore:t,isAllChannels:!!e.allChannels,channelIds:e.channelIds,moduleKey:e.moduleKey,writeChannelIds:t=>{const r={...n,state:{...e,channelIds:t}};s(r)}})}case"page.discussion.comment.added":{const{databaseKey:e}=n.state;return(0,O.jsx)(A().b,{store:i,workflowStore:t,moduleKey:e})}case"recurrence":{const{state:e}=n;return(0,O.jsx)(U,{workflowStore:t,recurrenceTrigger:e})}case"agent.message":case"notionmail.email.received":case"zendesk.ticket":return null;default:(0,C().t1)(n.state)}}function Y(e){const{workflowStore:t,trigger:n,store:r}=e,o=(0,a().yK)((e=>({container:{display:"flex",gap:4},title:{fontWeight:500}})),[]);if(!n.state)return null;const i=function(e){switch(e.type){case"database.page.created":return q.databasePageCreated;case"database.page.updated":return q.databasePageUpdated;case"database.page.deleted":return q.databasePageDeleted;case"slack.message":return q.slackMessage;case"slack.reaction.added":return q.slackReactionAdded;case"slack.thread.created":return q.slackThreadCreated;case"slack.thread.updated":return q.slackThreadUpdated;case"recurrence":return q.recurrence;case"page.discussion.comment.added":return q.pageDiscussionCommentAdded;case"agent.message":return q.chatMessage;case"notionmail.email.received":return q.notionMailEmailReceived;case"zendesk.ticket":return q.zendeskTicket;default:(0,C().t1)(e)}}(n.state);return(0,O.jsxs)("div",{style:o.container,children:[(0,O.jsx)("div",{style:o.title,children:(0,O.jsx)(s()._H,{...i})}),(0,O.jsx)(G,{store:r,workflowStore:t,trigger:n})]})}function Q(e){const{children:t}=e,n=(0,x().RD)();return(0,O.jsx)("div",{style:n.wrap,children:(0,O.jsx)("div",{style:n.list,children:t})})}function X(e){const{children:t,icon:n,subtitle:o,onClick:i}=e,s=(0,a().yK)((e=>({componentWrap:{borderRadius:10},buttonWrap:{borderRadius:10},headerWrap:{alignItems:"center"}})),[]),l=(0,y().on)({disabled:!1,hasActionMenu:!1,isActionMenuVisible:!1,overrideStyles:s}),d=(0,r.useMemo)((()=>({...l.componentWrap,...l.border})),[l.border,l.componentWrap]),c=(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)("div",{style:l.headerWrap,children:[n&&(0,O.jsx)("div",{"aria-hidden":"true",style:l.iconContainer,children:(0,O.jsx)("div",{style:l.iconWrap,children:n(l.icon)})}),(0,O.jsx)("div",{style:l.titleWrap,children:t})]}),o&&(0,O.jsx)("div",{style:l.subtitleWrap,children:o})]});return i?(0,O.jsx)("div",{style:l.buttonWrap,children:(0,O.jsx)(w().Z,{onClick:i,style:l.componentWrap,children:c})}):(0,O.jsx)("div",{style:d,children:c})}function ee(e){const{store:t,workflowStore:n,trigger:r}=e,o=function(e){if(!e)return T().L;switch(e.type){case"database.page.created":case"database.page.updated":case"database.page.deleted":return M().t;case"slack.message":case"slack.reaction.added":case"slack.thread.created":case"slack.thread.updated":return H().P;case"recurrence":return b().a;case"page.discussion.comment.added":return S().P;case"agent.message":return j().n;case"notionmail.email.received":return I().Z;case"zendesk.ticket":return T().L;default:(0,C().t1)(e)}}(r.state);return(0,O.jsx)(X,{icon:o,children:(0,O.jsx)(Y,{store:t,workflowStore:n,trigger:r})})}function te(e){const{store:t,workflowStore:n,functionKey:o}=e,l=(0,s().YB)(),d=(0,i().VK)((()=>{var e;return null===(e=(0,h().x)(n).functions)||void 0===e?void 0:e.find((e=>e.key===o))}),[n,o]),c=(0,a().yK)((e=>({title:{fontWeight:500}})),[]),u=(0,k().Xe)(t),g=(0,r.useCallback)((()=>{u({type:"function",key:o})}),[o,u]);return d?(0,O.jsx)(X,{icon:v().z,onClick:g,children:(0,O.jsx)("div",{style:c.title,children:d.name})}):(0,O.jsx)(X,{icon:v().z,subtitle:l.formatMessage({defaultMessage:"This automation is misconfigured. The function {functionKey} is not found in the workflow.",id:"aiWorkflow.function.notFound.subtitle"},{functionKey:o}),children:(0,O.jsx)("div",{style:c.title,children:(0,O.jsx)(s()._H,{defaultMessage:"Not found",id:"aiWorkflow.function.notFound.title"})})})}var ne=()=>n(401848);const re=(0,s().vU)({triggerEnabledLabel:{defaultMessage:"Active",id:"aiWorkflow.trigger.triggerEnabledLabel"},triggerPausedLabel:{defaultMessage:"Inactive",id:"aiWorkflow.trigger.triggerPausedLabel"},triggerEnabledHiddenAriaLabel:{defaultMessage:"Trigger is active.",id:"aiWorkflow.trigger.triggerEnabledHiddenAriaLabel"},triggerPausedHiddenAriaLabel:{defaultMessage:"Trigger is paused.",id:"aiWorkflow.trigger.triggerPausedHiddenAriaLabel"},triggerDisabledTooltip:{defaultMessage:"You do not have permission to resume this trigger.",id:"aiWorkflow.trigger.triggerDisabledTooltip"},triggerErrorsDisabledTooltip:{defaultMessage:"Fix any errors or remove failing steps to enable this trigger",id:"aiWorkflow.trigger.triggerErrorsDisabledTooltip"}});function oe(e){const{store:t,workflowStore:n,triggerKey:c,hideTitle:u}=e,g=(0,o().O7)(),f=(0,a().yK)((e=>({section:{display:"flex",flexDirection:"column",gap:8,width:"100%",marginBottom:28},header:{alignItems:"center",display:"flex",flexDirection:"row"},title:{color:e.lightTextColor,fontSize:12,lineHeight:1.3,fontWeight:l().Ue.medium}})),[]),x=(0,r.useCallback)((e=>{if(!n)return;const t=JSON.parse(e);d().createAndCommit({userAction:"WorkflowTrigger.handleSaveTrigger",environment:g,canUndo:!0,perform:e=>(0,p().DE)({workflowStore:n,trigger:t,transaction:e})})}),[n,g]),y=(0,i().VK)((()=>{var e;return null===(e=(0,h().x)(n))||void 0===e||null===(e=e.triggers)||void 0===e?void 0:e.find((e=>e.key===c))}),[n,c]);return y?(0,O.jsxs)(O.Fragment,{children:[!u&&(0,O.jsx)(ne().z,{title:y.name,debugComponent:(0,O.jsx)(m().c,{value:JSON.stringify(y,null,2),onSave:x,disabled:!n,language:"json"})}),(0,O.jsx)(ae,{trigger:y,workflowStore:n,cantSaveDueToError:!1,disabled:!1}),(0,O.jsxs)("section",{style:f.section,children:[(0,O.jsx)("header",{style:f.header,children:(0,O.jsx)("div",{style:f.title,children:(0,O.jsx)(s()._H,{defaultMessage:"When",id:"aiWorkflow.trigger.when"})})}),(0,O.jsx)(Q,{children:(0,O.jsx)(ee,{store:t,workflowStore:n,trigger:y})})]}),(0,O.jsxs)("section",{style:f.section,children:[(0,O.jsx)("header",{style:f.header,children:(0,O.jsx)("div",{style:f.title,children:(0,O.jsx)(s()._H,{defaultMessage:"Do",id:"aiWorkflow.trigger.do"})})}),(0,O.jsx)(Q,{children:(0,O.jsx)(te,{store:t,workflowStore:n,functionKey:y.key})})]})]}):null}function ie(e){const{trigger:t}=e,n=!1!==t.enabled,r=(0,a().yK)((e=>({container:{display:"flex",alignItems:"center",gap:4,fontWeight:l().Ue.regular,fontSize:13,color:e.text.secondary},icon:{width:12,height:12,fill:n?e.performanceToolbarIndicator.green:e.performanceToolbarIndicator.red}})),[n]);return(0,O.jsxs)("span",{style:r.container,children:[(0,f().U)(r.icon),n?(0,O.jsx)(s()._H,{...re.triggerEnabledLabel}):(0,O.jsx)(s()._H,{...re.triggerPausedLabel})]})}function ae(e){const{trigger:t,workflowStore:n,cantSaveDueToError:i,disabled:f}=e,h=(0,o().O7)(),m=!1!==t.enabled,x=`toggle-${t.key}`,y=(0,o().Fy)().isMobile,w=(0,r.useCallback)((()=>{d().createAndCommit({userAction:"WorkflowTrigger.handleTriggerActiveToggle",environment:h,canUndo:!0,perform:e=>(0,p().DE)({workflowStore:n,trigger:{...t,enabled:!m},transaction:e})})}),[n,h,t,m]),v=(0,a().yK)((e=>({labelWrap:{color:f?e.text.tertiary:e.text.secondary,flex:"1 1 auto",fontSize:y?l().JB.UIRegular.mobile:l().JB.UIRegular.desktop},sectionWrap:{alignItems:"start",display:"flex",flexDirection:"row",gap:6,marginBlockEnd:0,...y?{paddingBottom:0,paddingTop:0}:{paddingBottom:12,borderBottom:`1px solid ${e.stroke.secondary}`,marginBottom:16}},toggleWrap:{flex:"0 0 auto",paddingBlockStart:y?5:2}})),[f,y]),k=re.triggerEnabledLabel,C=m?re.triggerEnabledHiddenAriaLabel:re.triggerPausedHiddenAriaLabel;return(0,O.jsxs)("section",{style:v.sectionWrap,children:[(0,O.jsx)("div",{style:v.toggleWrap,children:(0,O.jsx)(u().Z,{disableTooltip:!f||!m,renderTooltip:()=>i?(0,O.jsx)(s()._H,{...re.triggerErrorsDisabledTooltip}):(0,O.jsx)(s()._H,{...re.triggerDisabledTooltip}),render:e=>(0,O.jsx)("div",{...e,children:(0,O.jsx)(c().Z,{disabled:f,inputId:x,on:m,onClick:w})})})}),(0,O.jsx)("div",{style:v.labelWrap,children:(0,O.jsxs)("label",{htmlFor:x,children:[(0,O.jsx)("span",{"aria-hidden":!0,children:(0,O.jsx)(s()._H,{...k})}),(0,O.jsx)("span",{style:g().jy,children:(0,O.jsx)(s()._H,{...C})})]})})]})}},536603:(e,t,n)=>{n.d(t,{A:()=>f,b:()=>p});n(821057),n(267602),n(470928),n(667294);var r=()=>n(142735),o=()=>n(846550),i=()=>n(506347),a=()=>n(396136),s=()=>n(729775),l=()=>n(384241),d=()=>n(429725),c=()=>n(826955),u=()=>n(286427),g=n(785893);function f(e){var t;const{store:n,module:u,title:f}=e,p=null===(t=u.state)||void 0===t?void 0:t.pointer,h=(0,r().VK)((()=>{if(p)return c().NW.createChildStore(n,p)}),[p,n]),m=(0,r().VK)((()=>{if(!h)return;const e=h.getParentPointer();if(!e||e.table!==a().iU)return;const t=c().G.createChildStore(h,e);return(0,d().ZP)({store:t,fullyQualified:!1,pageVisitSource:i().tY.LinkInPage})}),[h]),x=(0,o().yK)((e=>({container:{padding:"2px",borderRadius:4,margin:"-2px"}})),[]);return h&&m?(0,g.jsx)(s().Z,{href:m,style:x.container,children:f||(0,g.jsx)(l().Z,{store:h})}):null}function p(e){const{store:t,workflowStore:n,moduleKey:o}=e,i=(0,r().VK)((()=>{var e;const t=(0,u().x)(n);return null==t||null===(e=t.modules)||void 0===e?void 0:e.find((e=>e.key===o))}),[n,o]);if(!i)return null;if("database"!==i.type)throw new Error("Database trigger controls called with non-database module");return(0,g.jsx)(f,{store:t,module:i})}},728267:(e,t,n)=>{n.d(t,{a:()=>o});n(667294);var r=n(785893);const o=(0,n(827282).IU)("clock",{viewBox:"0 0 20 20",svg:(0,r.jsx)("path",{d:"M6.541 10.919a.53.53 0 0 1-.39-.157.53.53 0 0 1-.157-.39c0-.155.053-.283.157-.383a.53.53 0 0 1 .39-.157h2.905V5.895c0-.15.053-.278.158-.383a.521.521 0 0 1 .382-.158.53.53 0 0 1 .39.158.521.521 0 0 1 .157.383v4.477a.53.53 0 0 1-.157.39.53.53 0 0 1-.39.157H6.541Zm3.452 6.207a6.789 6.789 0 0 1-2.727-.554 7.124 7.124 0 0 1-2.256-1.524 7.277 7.277 0 0 1-1.525-2.256 6.788 6.788 0 0 1-.553-2.727c0-.967.184-1.876.553-2.728a7.241 7.241 0 0 1 3.773-3.78 6.788 6.788 0 0 1 2.728-.554c.971 0 1.882.184 2.735.554.852.369 1.604.88 2.256 1.53a7.136 7.136 0 0 1 1.53 2.25c.37.852.554 1.761.554 2.728 0 .966-.184 1.875-.553 2.727a7.218 7.218 0 0 1-3.787 3.78 6.789 6.789 0 0 1-2.728.554Zm0-1.395c.789 0 1.525-.145 2.208-.437a5.678 5.678 0 0 0 1.805-1.217 5.68 5.68 0 0 0 1.217-1.804c.291-.684.437-1.42.437-2.208a5.55 5.55 0 0 0-.437-2.202 5.66 5.66 0 0 0-3.029-3.028 5.567 5.567 0 0 0-2.208-.438c-.784 0-1.52.146-2.208.438A5.6 5.6 0 0 0 5.98 6.052a5.715 5.715 0 0 0-1.21 1.811 5.55 5.55 0 0 0-.437 2.202c0 .788.146 1.524.438 2.208a5.735 5.735 0 0 0 1.21 1.804 5.598 5.598 0 0 0 4.013 1.654Z"})})}}]);