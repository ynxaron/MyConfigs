"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[47509],{832024:(e,t,n)=>{n.d(t,{AK:()=>u,Mc:()=>a,OS:()=>d,Td:()=>f,Uu:()=>s,XC:()=>l,ZK:()=>S,e8:()=>p,gV:()=>m,hc:()=>v,n0:()=>b,u0:()=>_,xi:()=>c});var o=()=>n(594546),i=()=>n(572623),r=()=>n(697623);function a(e){o().K4(e,"add_slack_integration")}function s(e){o().K4(e,"remove_slack_integration")}function l(e,t){o().K4(e,"slack_notification_create",t)}function c(e,t){o().K4(e,"slack_notification_delete",t)}function d(e,t){o().K4(e,"slack_notification_update",t)}function m(e,t){const n=r().zt(),a=i().JF();o().K4(e,"slack_imports_invite_render_button",{subscription_tier:n,domain_type:a,origin:t.origin,invite_flow_id:t.invite_flow_id})}function p(e,t){const n=r().zt(),a=i().JF();o().K4(e,"slack_imports_invite_render_invite_popup",{subscription_tier:n,domain_type:a,origin:t.origin,invite_flow_id:t.invite_flow_id})}function u(e,t){const n=r().zt(),a=i().JF();o().K4(e,"slack_imports_invite_click_invite_button",{subscription_tier:n,domain_type:a,invited_user_count:t.invited_user_count,origin:t.origin,invite_token_query:t.inviteTokenQuery,invite_targets:t.inviteTargets,invite_flow_id:t.invite_flow_id})}function _(e,t){const n=r().zt(),a=i().JF();o().K4(e,"slack_imports_invite_completed",{subscription_tier:n,domain_type:a,invited_user_count:t.invited_user_count,is_success:t.is_success,origin:t.origin,invite_flow_id:t.invite_flow_id,error:t.error,invite_stage:t.invite_stage})}function f(e,t){const n=r().zt(),a=i().JF();o().K4(e,"slack_imports_invite_dismiss_popup",{subscription_tier:n,domain_type:a,origin:t.origin,invite_flow_id:t.invite_flow_id})}function v(e,t){const n=r().zt(),a=i().JF();o().K4(e,"slack_imports_invite_click_select_all",{subscription_tier:n,domain_type:a,origin:t.origin,invite_flow_id:t.invite_flow_id,invited_user_count:t.invited_user_count,is_unselect:t.is_unselect,invite_token_query:t.invite_token_query})}function b(e,t){const n=r().zt(),a=i().JF();o().K4(e,"slack_imports_invite_start_slack_integration",{subscription_tier:n,domain_type:a,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from})}function S(e,t){const n=r().zt(),a=i().JF();o().K4(e,"slack_imports_invite_complete_slack_integration",{subscription_tier:n,domain_type:a,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from,is_success:t.is_success})}},158792:(e,t,n)=>{n.d(t,{Dw:()=>A,P0:()=>T,RN:()=>R,VG:()=>M,Yw:()=>P,jX:()=>F,k2:()=>D,lz:()=>k,v2:()=>j});n(267602),n(653476),n(30005);var o=()=>n(741633),i=()=>n(528514),r=()=>n(933868),a=()=>n(217465),s=()=>n(396136),l=()=>n(696056),c=()=>n(255933),d=()=>n(989478),m=()=>n(696459),p=()=>n(308186),u=()=>n(577041),_=()=>n(527278),f=()=>n(122479),v=()=>n(826955),b=()=>n(824462),S=()=>n(528918),g=()=>n(784234),y=()=>n(636340),C=()=>n(102182),h=()=>n(269299),x=()=>n(423402);const w=(0,n(788860).vU)({duplicatingTemplate:{id:"botActions.duplicatingTemplate.loadingMessage",defaultMessage:"Duplicating template..."},duplicatingTemplateError:{id:"botActions.duplicateTemplateAndShareWithBot.snackbar.failure",defaultMessage:"Failed to duplicate template for to your workspace"}});function I(e,t){const{environment:n,spaceStore:o,spaceRole:i}=t,r=function(e){const{name:t,spaceStore:n,userId:o,icon:i,type:r}=e,a=Date.now(),s={name:t,created_at:a,created_by_table:d().KJ,created_by_id:o,alive:!0,icon:i,space_id:n.id,last_edited_at:a,last_edited_by_id:o,last_edited_by_table:d().KJ};switch(r){case"guest":return{...s,type:"guest",capabilities:e.capabilities,parent_table:c().bx,parent_id:n.id,integration_id:void 0};case"scim":return{...s,type:"scim",parent_table:d().KJ,parent_id:o};default:(0,m().t1)(r)}}(t),a=y().ae({environment:n,table:l().cZ,value:r,inMemoryRecordCache:n.defaultRecordCache.inMemoryRecordCache,transaction:e});return g().tQ({environment:n,spaceStore:o,permissionItems:[{type:"bot_permission",role:i,bot_id:a.id}],transaction:e}),{botStore:a}}function k(e){const{environment:t}=e,{serverCommitResult:n,performResult:{botStore:o}}=h().createAndCommit({userAction:"botActions.createSpaceBot",environment:t,canUndo:!0,perform:t=>I(t,e)});return{botStore:o,transactionPromise:n}}async function T(e){const{environment:t,botId:n,onSuccess:o}=e,i=await b().callApi({eventName:"deleteBot",environment:t,data:{botId:n}});"failed"===i.type?p().x2(i):"success"===i.type&&o&&(await x().pJ({environment:t}),o())}async function P(e){const{environment:t,table:n,id:i,type:r}=e,a=await b().callApi({eventName:"getBots",environment:t,data:{table:n,id:i,type:r},headers:(0,o().Bb)({spaceId:n===c().bx?i:void 0})});if("failed"===a.type)throw p().x2(a),a;return{botIds:a.data.botIds,recordMap:a.data.recordMap}}async function A(e){const{environment:t,currentSpaceStore:n,botIds:o}=e;if(!n)return;const i=await b().callApi({eventName:"getBotSharedPageIds",environment:t,data:{spaceId:n.id,botIds:o}});if("failed"!==i.type)return i.data;p().x2(i)}async function M(e){const{environment:t,botId:n}=e,o=await b().callApi({eventName:"getBotToken",environment:t,data:{botId:n}});if("failed"!==o.type)return o.data.token;p().x2(o)}function j(e){const{botValue:t,store:n,environment:o}=e,{id:r,parent_id:a,parent_table:s,capabilities:l}=t,c={type:"bot_permission",bot_id:r,parent_id:a,parent_table:s,role:(0,i().uH)(l)};h().createAndCommit({userAction:"TopbarMoreButton.handleAddingConnection",environment:o,canUndo:!0,perform:e=>{g().l3({environment:o,store:n,permissionItems:[c],transaction:e})}})}function R(e){const{botId:t,store:n,environment:o}=e,i=n.getPermissionItems().filter((0,m().AO)((e=>(0,r().FB)(e)?{true:e}:{false:e})));for(const r of i)if(r.bot_id===t){const e={...r,role:"none"};h().createAndCommit({userAction:"TopbarMoreButton.handleRemovingConnection",environment:o,canUndo:!0,perform:t=>{g().l3({environment:o,store:n,permissionItems:[e],transaction:t})}})}}function F(e){const{currentSpaceStore:t,environment:n,pages:o,botStore:i,addPermission:r}=e;if(!t)return;const a=(0,f().zT)({botStore:i,addPermission:r});o.forEach((e=>{const o=v().t1.createChildStore(t,{table:s().iU,id:e});h().createAndCommit({userAction:"botActions.updateBlockPermissionsForBot",environment:n,canUndo:!0,perform:e=>{g().l3({environment:n,store:o,permissionItems:[a],transaction:e})}})}))}async function D(e){const{environment:t,spaceStore:n,spaceViewStore:o,templatePageId:i,botValue:r,pages:s}=e;if(!n)return;const c=v().t1.createChildStore(n,{table:l().cZ,id:r.id});if(i)return await async function(e){const{environment:t,spaceStore:n,spaceViewStore:o,templatePageId:i,botStore:r}=e;if(!n||!o)return;try{S().j({message:w.duplicatingTemplate});const e=await b().callApi({eventName:"loadBlockSubtree",environment:t,data:{block:{id:i,spaceId:n.id},shallow:!1}});if("failed"===e.type)return;const s=a().RecordMapWithRole.create(e.data.subtreeRecordMap),{createAndDuplicatePageInSpace:l}=await(0,u().uP)(),{performResult:c}=h().createAndCommit({userAction:"botActions.duplicateTemplateAndShareWithBot",environment:t,canUndo:!0,perform:e=>{const a=l({environment:t,recordMap:s,copyPageId:i,isPrivate:!0,spaceStore:n,spaceViewStore:o,transaction:e,allowCopyExternalObjectInstances:!1}),c=o.getPrivatePageIds();c.length>0&&y().sW({store:o,data:{private_pages:[a.id,...c]},transaction:e});const d=(0,f().zT)({botStore:r,addPermission:!0});return g().l3({environment:t,store:a,permissionItems:[d],transaction:e}),a}});return c}catch(s){C().oV({label:_().Z.formatMessage(w.duplicatingTemplateError)})}finally{S().x()}}({environment:t,templatePageId:i,botStore:c,spaceStore:n,spaceViewStore:o});F({environment:t,currentSpaceStore:n,botStore:c,pages:s,addPermission:!0})}},493843:(e,t,n)=>{n.d(t,{$o:()=>Z,Fv:()=>E,IL:()=>N,J4:()=>K,KA:()=>z,Nf:()=>V,_p:()=>Q,cQ:()=>X,f$:()=>H,fX:()=>q,j2:()=>B,k2:()=>W,mg:()=>G,mz:()=>O,oP:()=>L,tF:()=>Y,td:()=>U,x:()=>J});n(670560),n(267602),n(470928),n(30005),n(241792),n(228244);var o=()=>n(730120),i=()=>n(492788),r=()=>n(506347),a=()=>n(926724),s=()=>n(331540),l=()=>n(874459),c=()=>n(998411),d=()=>n(35980),m=()=>n(513670),p=()=>n(696459),u=()=>n(250303),_=()=>n(384667),f=()=>n(366257),v=()=>n(139224),b=()=>n(421654),S=()=>n(636340),g=()=>n(531515),y=()=>n(47443),C=()=>n(794586),h=()=>n(879952),x=()=>n(970105),w=()=>n(990966),I=()=>n(269299),k=()=>n(932753),T=()=>n(887430),P=()=>n(861026),A=()=>n(804217),M=()=>n(826955),j=()=>n(965903),R=()=>n(807230),F=()=>n(701182),D=()=>n(645843);function B(e){const{collectionViewStore:t,collectionContextStore:n,timelineState:o,environment:i}=e,r=i.currentUser.id,a=(0,F().B8)(t.id),s=(0,F().pQ)(t,i),l=n.permissionScopesStore.state,c=m().Ds((()=>{if(o.destroyed)return;const e={zoomLevel:o.zoomLevel.state,centerTimestamp:(0,F().al)(o)};d().Z.set({userId:r,key:a,value:e})}),1e3),p=m().Ds((()=>{if(o.destroyed||!A().default.state.online||!i.currentUser.isLoggedIn()||!l.canConfigureBlock)return;const e={zoomLevel:o.zoomLevel.state,centerTimestamp:(0,F().al)(o)},n=t.getFormat().timeline_preference;m().Xy(n,e)||I().createAndCommit({userAction:"collectionTimelineViewActions.setRemotePreference",environment:i,canUndo:!0,perform:n=>{b().FH({stores:[t],update:{timeline_preference:e},transaction:n})}})}),5e3);o.savePreference=()=>{c(),p()},V({timelineState:o,environment:i,...s})}function V(e){const{timelineState:t,zoomLevel:n,centerTimestamp:o,environment:r}=e,{savePreference:a}=t,s=r.WindowSizeStore.state.width+2*F().Ge,l=(0,F().x2)(n,s),c=o-l/2,d=o+l/2;t.zoomLevel.setState(n),t.currentRange.setState({startTimestamp:c,endTimestamp:d}),i().default.afterNextFlush((()=>{z({timelineState:t,centerTimestamp:o}),a&&a()}))}function z(e){const{timelineState:t,centerTimestamp:n}=e,{horizontalScroller:o,outerSizeObserver:i}=t;if(!o)return;const r=t.zoomLevel.state,{startTimestamp:a,endTimestamp:s}=t.currentRange.state,l=i.rect.state.width;if(l===(0,F().e$)(r,s-a))return;const c=(0,F().e$)(r,n-a)-l/2;o.scrollLeft=c,t.scrollLeft.setState(c)}function L(e){const{environment:t,store:n,query:o,date:i,schema:r,transaction:a}=e,{timeline_by:s}=o;if(!s)return;const l=n.getAssociatedCollectionStore(),c=(null==l?void 0:l.getMappedProperty(s))??s,d=o.timeline_by_end?(null==l?void 0:l.getMappedProperty(o.timeline_by_end))??o.timeline_by_end:void 0,m=(0,F().TW)({store:n,dateValue:i,query:o,schema:(null==l?void 0:l.getSchema())??r}),p=n.getPropertyValue(c),u=d?n.getPropertyValue(d):void 0;return S().sW({store:n.getPropertiesStore(),data:m,transaction:a}),f().H({environment:t,store:n,dateProperty:{id:c,newValue:(null==m?void 0:m[c])??[],oldValue:p},otherDateProperty:d?{id:d,newValue:(null==m?void 0:m[d])??[],oldValue:u}:void 0}),n}function E(e){var t;const{environment:n,timelineState:i,collectionStore:r,collectionContextStore:a,store:s,query:d,groupFormat:m,transaction:p}=e,u=i.zoomLevel.state,f=(0,F().al)(i),{snapUnit:v,getDateRangePlaceholderDuration:b}=F().BJ[u],{timeline_by:S}=d;if(!S)return;const g=null===(t=a.groupsStore.getGroupState(m))||void 0===t?void 0:t.resultsStore.state;if(!g)return;const y=o().ou.fromMillis(f),C=(0,F().DS)(y,v),h=(0,F().DS)(b(y),v),x=(0,F().AZ)({startValue:(0,l().Lg)((0,c().r)()),snapUnit:v,desiredStart:C,desiredEnd:h});return L({environment:n,store:s,query:d,schema:r.getSchema(),date:x,transaction:p}),_().$T({environment:n,collectionStore:r,before:!0,store:g[0],insertStores:[s],collectionContextStore:a,groupsPointer:m?[m]:[],transaction:p}),s}function H(e){const{type:t,timelineState:n,store:o,startX:i,query:r,schema:a,intl:s,environment:l}=e,{horizontalScroller:c}=n,{startTimestamp:d}=n.currentRange.state;if(!c)return;h().Ys({environment:l,store:o});const p=c.scrollLeft,{stores:u}=j().default.state,_=m().oA(u.map((e=>{const t=(0,F().bk)({store:e,query:r,schema:a,userId:l.currentUser.id,intl:s,formulasModule:void 0});if(t)return{startValue:t,store:e}})));n.dragState.setState({type:t,startStore:o,stores:_.map((e=>{let{store:t}=e;return t})),startValues:_.map((e=>{let{startValue:t}=e;return t})),temporaryValues:_.map((e=>{let{startValue:t}=e;return t})),startX:i,startStartTimestamp:d,startScrollLeft:p})}function K(e){const{timelineState:t,store:n,startX:o,startY:i,schema:r,collectionContextStore:a,verticalScroller:s}=e,{horizontalScroller:l}=t,{startTimestamp:c}=t.currentRange.state;if(!l||!s)return;const d=l.scrollLeft,m=s.scrollTop,p=(0,F().YE)(a,n,r);t.drawState.setState({startStore:n,startDependencyRelationPointers:p,temporaryDependencyRelationPointers:[...p],startX:o,startY:i,startScrollLeft:d,startScrollTop:m,startStartTimestamp:c,xOffsetPx:0,yOffsetPx:0,tryToCompleteDrawnArrow:!1})}function U(e){const{timelineState:t,currentX:n}=e,{horizontalScroller:o}=t,i=t.zoomLevel.state,r=t.dragState.state,{startTimestamp:a}=t.currentRange.state;if(!r||!o)return;const{type:s,startStartTimestamp:c,startValues:d,startScrollLeft:u,startX:_,startStore:f,stores:v}=r,b=F().BJ[i],{snapUnit:S}=b,g=o.scrollLeft-u+(n-_)+(0,F().e$)(i,a-c),y=(0,F().x2)(i,g),C=d[v.indexOf(f)];let h;if(s===F().px.LeftResizer){const{start:e}=(0,F().XO)(C,S),t=e.plus(y);h=d.map((e=>{const n=(0,F().AZ)({startValue:e,snapUnit:S,desiredStart:t});return(0,l().gW)(n)}))}else if(s===F().px.RightResizer){const{end:e}=(0,F().XO)(C,S),t=e.plus(y);h=d.map((e=>{const n=(0,F().AZ)({startValue:e,snapUnit:S,desiredEnd:t});return(0,l().Qq)(n)}))}else s===F().px.ItemDrag?h=d.map((e=>{const{start:t,end:n}=(0,F().XO)(e,S),o=t.plus(y),i=o.plus(n.valueOf()-t.valueOf());return(0,F().AZ)({startValue:e,snapUnit:S,desiredStart:o,desiredEnd:i})})):(0,p().t1)(s);m().Xy(r.temporaryValues,h)||t.dragState.setState({...r,temporaryValues:h})}function O(e){const{timelineState:t,currentX:n,currentY:o,verticalScroller:i}=e,r=t.drawState.state,a=t.zoomLevel.state,{startTimestamp:s}=t.currentRange.state,{horizontalScroller:l}=t;if(!r||!l||!i)return;const{startDependencyRelationPointers:c,startStore:d,startX:p,startY:u,startScrollLeft:_,startScrollTop:f,startStartTimestamp:v}=r,b=l.scrollLeft,S=i.scrollTop,g=b-_+(n-p)+(0,F().e$)(a,s-v),y=S-f+(o-u),C=t.hoveredItem.state;if(C&&C!==d&&!c.some((e=>e.id===C.id))){const e=[...c,{table:"block",id:C.id,spaceId:C.getSpaceId()}];m().Xy(r.temporaryDependencyRelationPointers,e)||t.drawState.setState({...r,temporaryDependencyRelationPointers:e,xOffsetPx:void 0,yOffsetPx:void 0})}else t.drawState.setState({...r,temporaryDependencyRelationPointers:[...c],xOffsetPx:g,yOffsetPx:y})}function q(e){const{environment:t,collectionContextStore:n,timelineState:o,query:i,schema:r,transaction:a}=e,s=o.dragState.state,{timeline_by:l}=i;if(!s||!l)return;const{temporaryValues:c,stores:d}=s;c.forEach(((e,o)=>{const s=d[o];L({environment:t,store:s,query:i,schema:r,transaction:a,date:e}),u().rv({environment:t,collectionContextStore:n,block_id:s.id,property:l,property_type:"date",from:"timeline"})})),o.dragState.setState(void 0)}function Z(e){var t;const{timelineState:n,environment:o,transaction:i,collectionContextStore:r,isFullScreen:a,isRootChild:s}=e,l=n.drawState.state,c=n.dateRangePlaceholder.state;if(!l)return;const{startStore:d,startDependencyRelationPointers:m,temporaryDependencyRelationPointers:p}=l;if(!d)return void n.drawState.setState(void 0);let _;if(c.active){const{date:e,store:t,parentStore:a,groupFormat:s,newTimelineItemProps:l,existingTimelineItemProps:m}=c;if(t&&m){const{query:n,schema:r}=m;L({environment:o,store:t,query:n,schema:r,date:e,transaction:i}),_={table:"block",id:t.id,spaceId:d.getSpaceId()}}else if(l){const{query:n,schema:c,isFullScreen:m,canEditTimelineItems:p,subitemPath:u}=l,f=G({environment:o,date:e,store:t,parentStore:a,query:n,schema:c,isFullScreen:m,groupFormat:s,canEditTimelineItems:p,collectionContextStore:r,subitemPath:u,transaction:i,from:"timeline_complete_draw"});f&&(_={table:"block",id:f.id,spaceId:d.getSpaceId()})}n.dateRangePlaceholder.setState({active:!1})}else _=p.find((e=>!m.includes(e)));const f=(0,F()._e)(r);if(f){const{property:e}=f;_&&(g().hE({environment:o,propertyWithInverse:f,sourceStore:d,destStore:M().G.createChildStore(d,_),position:{type:"after"},transaction:i}),u().rv({environment:o,collectionContextStore:r,block_id:d.id,property:e,property_type:"relation",from:"timeline",isFromBulkActionsToolbar:!1,isUnthrottled:!0})),n.drawState.setState(void 0)}else v().wl({item:{type:"dependencies",from:"view_options"},collectionSettingsStore:r.settingsStore}),n.drawState.setState({...l,tryToCompleteDrawnArrow:!0});const b=null===(t=_)||void 0===t?void 0:t.id;b&&(0,D().LE)(o,{...(0,P().Pn)(r),...(0,D().Ii)({environment:o,collectionContextStore:r,timelineState:n,isFullScreen:a,isRootChild:s}),dependenciesPropertyID:null==f?void 0:f.property,blockedByStoreID:d.id,blockingStoreID:b})}function X(e){const{timelineState:t,environment:n}=e;t.dragState.state&&(t.dragState.setState(void 0),h().ZH({environment:n}))}function J(e){const{timelineState:t,environment:n}=e;t.drawState.state&&(t.drawState.setState(void 0),h().ZH({environment:n}))}function W(e){const{stores:t,collectionViewStore:n,schema:o,transaction:i}=e,r=n.getType(),a=n.getQuery(o),s=[];a&&("calendar"===r?a.calendar_by&&s.push(a.calendar_by):"timeline"===r&&(a.timeline_by&&s.push(a.timeline_by),a.timeline_by_end&&s.push(a.timeline_by_end)));for(const l of t)for(const e of s)x().sO({environment:l.environment,store:l.getPropertyStore(e),value:void 0,transaction:i})}function N(e){const{dependency:t,collectionContextStore:n,environment:o,timelineState:i,isFullScreen:r,isRootChild:a}=e,s=(0,F()._e)(n),l=n.collectionStore();if(!s||!l)return;const{property:c}=s,{store:d,relationPointer:m}=t,p=d.getSchema()[c];p&&"relation"===p.type&&(I().createAndCommit({userAction:"CollectionTimelineDependenciesOverlay.handleRemoveRelation",environment:o,canUndo:!0,perform:e=>{g().Bl({environment:o,propertyWithInverse:s,sourceStore:d,destStore:M().G.createChildStore(d,m),transaction:e}),u().rv({environment:o,block_id:m.id,property:c,property_type:p.type,from:"timeline",collectionContextStore:n,isFromBulkActionsToolbar:!1,isUnthrottled:!0})}}),(0,D().lf)(o,{...(0,P().Pn)(n),...(0,D().Ii)({environment:o,collectionContextStore:n,timelineState:i,isFullScreen:r,isRootChild:a}),dependenciesPropertyID:c,blockedByStoreID:d.id,blockingStoreID:m.id}))}function Y(e){const{collectionViewStore:t,newProperty:n,transaction:o}=e;b().FH({stores:[t],update:{timeline_arrows_by:{property:n}},transaction:o})}function Q(e){var t;const{collectionContextStore:n,relationPropertyId:o,transaction:i}=e,r=n.collectionStore();if(!r)return;const l=o?r.getSchema()[o]:void 0,c="relation"===(null==l?void 0:l.type)&&l.property&&"relation"===(null===(t=r.getSchema()[l.property])||void 0===t?void 0:t.type)?l.property:void 0;b().FH({stores:[r],update:{collection_default_arrows_by:o,...r.getFormat().app_config_uri===s().iS?{app_uri_map:{...r.getFormat().app_uri_map?r.getFormat().app_uri_map:{},[a().Es.BlockingRelation]:o,[a().Es.BlockedRelation]:c}}:{}},transaction:i})}function G(e){const{environment:t,transaction:n,date:o,parentStore:i,query:a,schema:s,isFullScreen:l,groupFormat:c,canEditTimelineItems:d,collectionContextStore:m,from:p}=e;if(!(0,R().ww)(t))return;const u=c?[c]:[],f=m.groupsStore.getGroupState(u);if(!f)return;if(i)return function(e){const{environment:t,transaction:n,date:o,store:i,parentStore:a,query:s,schema:l,groupFormat:c,canEditTimelineItems:d,collectionContextStore:m,subitemPath:p}=e;if(!i||!a)return;const u=c?[c]:[],f=_().yk({environment:t,collectionContextStore:m,groupsPointer:u,store:i,before:!1,collectionStore:a,transaction:n,subitemPath:p,subitemInsertDirection:"into"});if(f){if(L({environment:t,store:f,query:s,schema:l,date:o,transaction:n}),t.device.isMobile)y()._c({environment:t,store:f,pageVisitSource:r().tY.Create});else if(f&&d){const e=f.getBlockTitleStore();w().setSelectionAtStart({store:e})}return f}}(e);m.searchQueryStore.state&&k().Ug({searchQuery:"",collectionContextStore:m,isFullScreen:l});const v=_().IW({environment:t,collectionContextStore:m,groupsPointer:u,shouldCoerce:!0,templateStore:m.defaultPageTemplateStore.state,transaction:n,from:{createBlock:p},inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache});if(!v)return;const b=v.coercionSucceeded,S=v.newStore;if(L({environment:t,store:S,query:a,schema:s,date:o,transaction:n}),t.device.isMobile)y()._c({environment:t,store:S,pageVisitSource:r().tY.Create});else if(b&&d){const e=S.getBlockTitleStore();w().setSelectionAtEnd({store:e})}else C().CH({environment:t,store:S,peekMode:(0,T().kr)(m),resultsStore:null==f?void 0:f.resultsStore,collectionContextStore:m,pageVisitSource:r().tY.Create});return S}},645843:(e,t,n)=>{n.d(t,{Al:()=>l,CB:()=>c,H6:()=>s,Ii:()=>_,LE:()=>p,gw:()=>d,iR:()=>r,lf:()=>u,ne:()=>m,zI:()=>a});n(267602),n(653476);var o=()=>n(594546),i=()=>n(701182);function r(e,t){o().lu(e,"timeline_view","timeline_view",5,t)}function a(e,t){o().K4(e,"timeline_zoom_level_update",t)}function s(e,t){o().K4(e,"timeline_today_click",t)}function l(e,t){o().K4(e,"timeline_shift_time_click",t)}function c(e,t){o().K4(e,"timeline_toggle_table_click",t)}function d(e,t){o().K4(e,"timeline_item_scroll_arrow_click",t)}function m(e,t){o().K4(e,"timeline_item_resize",t)}function p(e,t){o().K4(e,"timeline_dependency_arrow_add",t)}function u(e,t){o().K4(e,"timeline_dependency_arrow_delete",t)}function _(e){const{environment:t,collectionContextStore:n,timelineState:o,isFullScreen:r,isRootChild:a}=e,s=o.zoomLevel.state,l=n.normalizedFormatStore.state,c=(0,i().C1)({environment:t,format:l,isFullScreen:r,isRootChild:a}),d=c&&l.timeline_table_properties?l.timeline_table_properties.length:0,m=l.timeline_properties||[],p=m.filter((e=>"title"!==e.property));return{zoom_level:s,show_table:c,show_table_properties_count:d,show_timeline_title:m.length!==p.length,show_timeline_properties_count:p.length}}},183680:(e,t,n)=>{n.d(t,{VR:()=>m,ac:()=>d,zq:()=>c});n(667294);var o=()=>n(846550),i=()=>n(788860),r=()=>n(518530),a=()=>n(733641),s=n(785893);function l(e){const{enabled:t,labelIfEnabled:n,labelIfDisabled:i}=e,r=(0,o().yK)((e=>({container:{color:t?e.mediumTextColor:e.lightTextColor}})),[t]);return(0,s.jsxs)("div",{style:r.container,children:[p(t)," ",t?n:i]})}function c(e){const t="none"!==e;return[(0,s.jsx)(l,{enabled:t&&e.read_content,labelIfEnabled:(0,s.jsx)(i()._H,{id:"capabilitiesTooltip.mixedAccess.readContent.enabled",defaultMessage:"Can read content."}),labelIfDisabled:(0,s.jsx)(i()._H,{id:"capabilitiesTooltip.mixedaccess.readContent.disabled",defaultMessage:"Cannot read content."})},"read_content"),(0,s.jsx)(l,{enabled:t&&e.insert_content,labelIfEnabled:(0,s.jsx)(i()._H,{id:"capabilitiesTooltip.mixedaccess.insertContent.enabled",defaultMessage:"Can insert content."}),labelIfDisabled:(0,s.jsx)(i()._H,{id:"capabilitiesTooltip.mixedaccess.insertContent.disabled",defaultMessage:"Cannot insert content."})},"insert_content"),(0,s.jsx)(l,{enabled:t&&e.update_content,labelIfEnabled:(0,s.jsx)(i()._H,{id:"capabilitiesTooltip.mixedaccess.updateContent.enabled",defaultMessage:"Can update content."}),labelIfDisabled:(0,s.jsx)(i()._H,{id:"capabilitiesTooltip.mixedaccess.updateContent.disabled",defaultMessage:"Cannot update content."})},"update_content"),(0,s.jsx)(l,{enabled:t&&e.insert_comment,labelIfEnabled:(0,s.jsx)(i()._H,{id:"capabilitiesTooltip.insertComment.enabled",defaultMessage:"Can comment."}),labelIfDisabled:(0,s.jsx)(i()._H,{id:"capabilitiesTooltip.insertComment.disabled",defaultMessage:"Cannot comment."})},"insert_comment"),(0,s.jsx)(l,{enabled:t&&e.read_comment,labelIfEnabled:(0,s.jsx)(i()._H,{id:"capabilitiesTooltip.readComment.enabled",defaultMessage:"Can read comments."}),labelIfDisabled:(0,s.jsx)(i()._H,{id:"capabilitiesTooltip.readComment.disabled",defaultMessage:"Cannot read comments."})},"read_comment")]}function d(e){return[(0,s.jsx)(l,{enabled:e.read_user_without_email,labelIfEnabled:(0,s.jsx)(i()._H,{id:"capabilitiesTooltip.userAccess.readUsers.enabled",defaultMessage:"Can view users."}),labelIfDisabled:(0,s.jsx)(i()._H,{id:"capabilitiesTooltip.userAccess.readUsers.disabled",defaultMessage:"Cannot view users."})},"read_user_without_email"),(0,s.jsx)(l,{enabled:e.read_user_with_email,labelIfEnabled:(0,s.jsx)(i()._H,{id:"capabilitiesTooltip.userAccess.readUserEmailAddresses.enabled",defaultMessage:"Can view user email addresses."}),labelIfDisabled:(0,s.jsx)(i()._H,{id:"capabilitiesTooltip.userAccess.readUserEmailAddresses.disabled",defaultMessage:"Cannot view user email addresses."})},"read_user_with_email")]}function m(e){return[(0,s.jsx)(l,{enabled:e.link_preview,labelIfEnabled:(0,s.jsx)(i()._H,{id:"capabilitiesTooltip.linkPreview.enabled",defaultMessage:"Can preview links."}),labelIfDisabled:(0,s.jsx)(i()._H,{id:"capabilitiesTooltip.linkPreview.disabled",defaultMessage:"Cannot preview links."})},"link_preview"),(0,s.jsx)(l,{enabled:e.synced_database,labelIfEnabled:(0,s.jsx)(i()._H,{id:"capabilitiesTooltip.syncedDatabase.enabled",defaultMessage:"Can sync databases."}),labelIfDisabled:(0,s.jsx)(i()._H,{id:"capabilitiesTooltip.syncedDatabase.disabled",defaultMessage:"Cannot sync databases."})},"synced_database")]}function p(e){const t={width:12,display:"inline",verticalAlign:"middle"};return e?(0,a().k)(t):(0,r().U)(t)}},670346:(e,t,n)=>{n.d(t,{_:()=>c});n(667294);var o=()=>n(219727),i=()=>n(528514),r=()=>n(788860),a=()=>n(183680),s=()=>n(18748),l=n(785893);function c(e){const{role:t}=e,n=(0,r().YB)(),{device:c}=(0,o().O7)(),d=(0,a().zq)(t);return(0,l.jsx)(s().ZP,{...e,title:n.formatMessage((0,i().Gx)(t,void 0).label),shouldWrapCaption:!0,style:c.isMobile?{padding:"12px 4px"}:{padding:4,marginTop:2,marginBottom:2},captionStyle:{marginTop:4},caption:(0,l.jsx)("div",{children:d})})}},625449:(e,t,n)=>{n.r(t),n.d(t,{ExternalObjectInstanceBlockMenu:()=>T});n(670560);var o=n(667294),i=()=>n(219727),r=()=>n(142735),a=()=>n(235484),s=()=>n(696056),l=()=>n(788860),c=()=>n(696459),d=()=>n(769197),m=()=>n(959137),p=()=>n(269299),u=()=>n(423402),_=()=>n(964433),f=()=>n(542058),v=()=>n(141735),b=()=>n(352230),S=()=>n(677559),g=()=>n(424097),y=()=>n(315136),C=()=>n(138912),h=()=>n(855238),x=()=>n(198829),w=()=>n(255577),I=()=>n(388284),k=n(785893);function T(e){const{titleForReloadMenuOption:t,store:n,parentBlockStore:T,onAccept:P,onDismiss:A,extraSecondaryItemKey:M,token:j}=e,R=(0,i().O7)(),{value:F}=(0,S().XJ)(_().p),{value:D}=(0,S().XJ)(f().m),{value:B}=(0,S().XJ)(v().F.formulas),{value:V}=(0,S().XJ)(m().F.clipboardActions),z=(0,o.useCallback)((e=>{const t={blocks:[n],environment:R,publicEditMode:void 0,lazyDependencies:{clipboardActions:V,formulasModule:B,markdownLinkifyIt:F,tinyMceMicrosoftWordPasteFilter:D}};return{key:e.key,render:(n,o)=>e.render(n,t,{onAccept:P,onFocus:o.onFocus}),action:n=>{let{event:o}=n;return e.action(t,o)}}}),[n,R,B,F,D,P,V]),L=[];(0,r().VK)((()=>{const e=n.getFormat().bot_id,t=C().default.getBotsAsRecordMap();if(e&&!0===C().default.state.loaded){const n=t.getValue({table:s().cZ,id:e});if(n&&n.integration_id&&n.integration_id===a().U9)return!1}return!0}),[n])&&L.push({key:0,render:e=>(0,k.jsx)(I().Z,{...e,style:{paddingTop:0,paddingBottom:0}}),items:[{key:"reload external instance object",render:e=>(0,k.jsx)(h().Z,{...e,title:t,svg:y().b}),action:()=>{n&&(n.isExternalObjectInstanceBlockStore()||n.isExternalObjectInstancePageBlockStore())&&u().qK({environment:R,from:"page_more_menu",store:n,spaceId:n.getSpaceId()})}}]});const E=(0,r().VK)((()=>{switch(M){case"preview_to_mention":return[z(d().OH)];case"mention_to_preview":if(!n.isExternalObjectInstanceBlockStore())return[];const e={key:"turn preview into block",render:e=>(0,k.jsx)(h().Z,{...e,title:(0,k.jsx)(l()._H,{id:"hoverPreviewOverlay.action.turnPreviewIntoPreview",defaultMessage:"Turn into preview"}),svg:g().z}),action:()=>{T&&j&&p().createAndCommit({userAction:"HoverPreviewOverlay.transformExternalObjectInstanceMentionIntoBlock",environment:R,canUndo:!0,perform:e=>{u().aV({block:n,parentStore:T,transaction:e,token:j}),e.postSubmitCallbacks.push((e=>{e||null==A||A()}))}})}};return[e];default:(0,c().t1)(M)}}),[M,z,n,T,j,R,A]);return L.push({key:1,render:e=>(0,k.jsx)(I().Z,{...e,style:{paddingTop:0,paddingBottom:0}}),items:[...E,z(d().IK)]}),(0,k.jsx)(x().Z,{menuType:b().o.Popup,children:(0,k.jsx)(w().Z,{type:w().i.Vertical,initialFocus:void 0,onAccept:P,sections:L,style:{paddingTop:3,paddingBottom:3}})})}},951877:(e,t,n)=>{n.d(t,{L:()=>c,N:()=>d});n(667294);var o=()=>n(219727),i=()=>n(846550),r=()=>n(766933),a=()=>n(270315),s=()=>n(827973),l=n(785893);let c=function(e){return e[e.Name=0]="Name",e[e.Type=1]="Type",e}({});function d(e){const{propertySchema:t,format:n,locked:d}=e,m=(0,i().Fg)(),p=(0,o().O7)(),{name:u,type:_,icon:f}=t,v=n===c.Name?u:a().SO[_];return(0,l.jsx)(s().Z,{title:v,icon:(0,l.jsx)(r().ZP,{icon:f,type:_,size:p.device.isMobile?18:16,theme:m,style:{fill:m.regularIconColor,marginLeft:6,marginRight:2}}),disabled:d,...e})}},404553:(e,t,n)=>{n.d(t,{M:()=>o().M});var o=()=>n(682890)},292735:(e,t,n)=>{n.d(t,{h:()=>i});n(667294);var o=n(785893);const i=(0,n(827282).IU)("replace",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M3.26465 3.96094C2.95996 4.26562 2.979 4.66553 3.23291 4.8877C3.49316 5.12256 3.86133 5.12256 4.16602 4.83057C5.11182 3.80225 6.48291 3.15479 8 3.15479C10.6851 3.15479 12.856 5.12891 13.2051 7.66162H12.2466C11.7642 7.66162 11.6309 8.01709 11.9102 8.41064L13.4209 10.5435C13.6494 10.8608 13.9985 10.8608 14.2334 10.5435L15.7441 8.41699C16.0298 8.02344 15.8965 7.66162 15.4077 7.66162H14.519C14.1445 4.44336 11.3516 1.85986 8 1.85986C6.13379 1.85986 4.43262 2.68506 3.26465 3.96094ZM0.249512 8.42334C-0.0297852 8.81689 0.097168 9.17871 0.585938 9.17871H1.4873C1.85547 12.397 4.64844 14.9805 8 14.9805C9.87256 14.9805 11.5737 14.1553 12.748 12.873C13.0464 12.5684 13.0273 12.1685 12.7734 11.9399C12.5132 11.7051 12.1514 11.7114 11.8403 12.0034C10.9009 13.0381 9.52979 13.6855 8 13.6855C5.32129 13.6855 3.14404 11.7178 2.79492 9.17871H3.74707C4.22949 9.17871 4.36279 8.82324 4.0835 8.42969L2.57275 6.29688C2.34424 5.97949 1.99512 5.97949 1.7666 6.29688L0.249512 8.42334Z"})})},682890:(e,t,n)=>{n.d(t,{M:()=>i});n(667294);var o=n(785893);const i=(0,n(827282).IU)("arrowDown",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M8 1.57715C7.5625 1.57715 7.25488 1.88477 7.25488 2.33594V10.8262L7.30957 12.3027L5.50488 10.2861L3.95312 8.75488C3.82324 8.625 3.63184 8.53613 3.42676 8.53613C3.0166 8.53613 2.70898 8.85059 2.70898 9.26758C2.70898 9.46582 2.78418 9.64355 2.94141 9.80762L7.44629 14.3193C7.59668 14.4697 7.79492 14.5586 8 14.5586C8.20508 14.5586 8.40332 14.4697 8.55371 14.3193L13.0586 9.80762C13.2158 9.64355 13.291 9.46582 13.291 9.26758C13.291 8.85059 12.9902 8.53613 12.5801 8.53613C12.3682 8.53613 12.1836 8.625 12.0469 8.75488L10.4951 10.2861L8.69043 12.2959L8.74512 10.8262V2.33594C8.74512 1.88477 8.44434 1.57715 8 1.57715Z"})})},809461:(e,t,n)=>{n.d(t,{w:()=>r});n(667294);var o=n(785893);const i={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M10 7c-1.654 0-3 1.346-3 3s1.346 3 3 3 3-1.346 3-3-1.346-3-3-3m0 4.5c-.827 0-1.5-.673-1.5-1.5s.673-1.5 1.5-1.5 1.5.673 1.5 1.5-.673 1.5-1.5 1.5"}),(0,o.jsx)("path",{d:"M18.307 8.445a.7.7 0 0 0-.57-.56l-1.643-.283-.056-.138.973-1.378a.7.7 0 0 0 .008-.795 8.5 8.5 0 0 0-2.244-2.264.7.7 0 0 0-.8.006l-1.36.96-.138-.056-.289-1.661a.7.7 0 0 0-.554-.567 8.5 8.5 0 0 0-3.188-.015.7.7 0 0 0-.562.569l-.282 1.643-.139.056-1.377-.971a.7.7 0 0 0-.794-.01q-.68.457-1.284 1.06a8.5 8.5 0 0 0-.98 1.185.7.7 0 0 0 .005.799l.961 1.36q-.03.069-.057.139l-1.66.287a.7.7 0 0 0-.569.555 8.5 8.5 0 0 0-.015 3.188.7.7 0 0 0 .57.561l1.643.283.056.14-.971 1.375a.7.7 0 0 0-.01.793 8.6 8.6 0 0 0 2.244 2.267.7.7 0 0 0 .8-.006l1.36-.961.14.058.286 1.66a.7.7 0 0 0 .555.568 8.5 8.5 0 0 0 3.188.015.7.7 0 0 0 .561-.57l.283-1.643q.07-.027.138-.056l1.378.972a.7.7 0 0 0 .795.008 8.6 8.6 0 0 0 2.264-2.243.7.7 0 0 0-.006-.8l-.961-1.36.058-.138 1.66-.289a.7.7 0 0 0 .567-.554q.159-.806.16-1.656a8.5 8.5 0 0 0-.144-1.533m-1.314 2.45-1.567.271a.7.7 0 0 0-.545.47c-.09.27-.189.508-.303.726a.7.7 0 0 0 .05.728l.904 1.28a7 7 0 0 1-1.22 1.207l-1.297-.915a.7.7 0 0 0-.716-.055 5 5 0 0 1-.734.298.7.7 0 0 0-.476.548l-.267 1.549a7.2 7.2 0 0 1-1.717-.009l-.27-1.567a.7.7 0 0 0-.47-.545 5 5 0 0 1-.728-.303.69.69 0 0 0-.726.05l-1.281.904a7.2 7.2 0 0 1-1.208-1.22l.916-1.297a.7.7 0 0 0 .054-.717 5 5 0 0 1-.297-.732.7.7 0 0 0-.549-.477l-1.548-.267a7.2 7.2 0 0 1 .009-1.717l1.567-.27a.7.7 0 0 0 .545-.468c.09-.273.19-.512.303-.731a.7.7 0 0 0-.05-.726l-.904-1.28a7.2 7.2 0 0 1 1.22-1.208l1.298.916c.21.15.486.17.716.054a5 5 0 0 1 .732-.297.7.7 0 0 0 .478-.549l.266-1.548a7.3 7.3 0 0 1 1.717.008l.271 1.568a.7.7 0 0 0 .468.545c.271.09.51.19.73.303a.7.7 0 0 0 .725-.05l1.281-.904a7.2 7.2 0 0 1 1.208 1.22l-.916 1.298a.7.7 0 0 0-.054.716c.117.233.216.48.297.733.08.25.291.433.548.477l1.549.267a7 7 0 0 1-.009 1.716"})]})},r=(0,n(827282).IU)("gear",i)}}]);