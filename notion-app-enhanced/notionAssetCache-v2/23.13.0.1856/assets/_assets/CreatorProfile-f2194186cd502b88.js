(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[60613],{30312:(e,t,a)=>{"use strict";a.d(t,{uU:()=>D,EC:()=>z,Pk:()=>A,A1:()=>F,QO:()=>H,bO:()=>P,JJ:()=>L});a(670560),a(267602),a(653476),a(241792);var i=()=>a(163262),r=()=>a(799891),n=()=>a(565271),o=()=>a(836273),s=()=>a(696056),l=()=>a(17630),d=()=>a(85073),c=()=>a(989478),u=()=>a(921787),p=()=>a(830968),g=()=>a(792409),m=()=>a(342792),f=()=>a(696459),h=()=>a(957042),b=()=>a(286310),y=()=>a(158792),v=()=>a(308186),x=()=>a(255933),_=()=>a(824462),w=()=>a(636340);var C=()=>a(411187),S=()=>a(183224),j=()=>a(527278),M=()=>a(876822),k=()=>a(826955),I=()=>a(497065),T=()=>a(269299);function P(e){const{environment:t,integrationStore:a}=e;T().createAndCommit({userAction:"developerIntegrationActions.setIntegrationSecretView",environment:t,canUndo:!0,perform:e=>{!function(e){const{integrationStore:t,transaction:a}=e,i=(0,k().Vh)(t,t.pointer,"info");w().sW({store:i,data:{has_viewed_secret:!0},transaction:a})}({integrationStore:a,transaction:e})}})}async function D(e){const{environment:t,recordStore:a}=e;function i(){b().tf(t,{table:a.table})}a.table===s().cZ?await y().P0({environment:t,botId:a.id,onSuccess:i}):a.table===d().K2?await async function(e){const{environment:t,integrationId:a,onSuccess:i}=e,r=await _().callApi({eventName:"deleteIntegration",environment:t,data:{integrationId:a}});"failed"===r.type?v().x2(r):"success"===r.type&&i&&i()}({environment:t,integrationId:a.id,onSuccess:i}):(0,f().t1)(a)}function L(e){const{environment:t,formState:a,formData:i}=e;if("create-bot"===a.type)return E({environment:t,formData:i});if("update-bot"===a.type)return function(e){const{environment:t,botPointer:a,formData:i}=e,{currentUserRootStore:r}=M().default.state;if(!r)return;const n=(0,k().Kv)(r,a),o="developerIntegrationActions.updateBot";T().createAndCommit({userAction:o,environment:t,canUndo:!0,perform:e=>{w().sW({store:n,data:{name:i.name,icon:i.icon??null,parent_id:i.space.id,last_edited_by_id:r.id,last_edited_by_table:c().KJ,last_edited_at:Date.now(),capabilities:i.capabilities},transaction:e}),e.postSubmitCallbacks=[t=>{t&&N(t,o,e.spaceId)}]}}),b().FB(t,{table:s().cZ});const l=n.getKeyStore("integration_id").getValue();if(l){const e=(0,k().Kv)(r,{id:l,table:d().K2}),a={name:i.name,capabilities:i.capabilities},n=(0,k().Vh)(e,e.pointer,"info"),o="developerIntegrationActions.updateIntegration";T().createAndCommit({userAction:o,environment:t,canUndo:!0,perform:t=>{w().sW({store:e,data:a,transaction:t}),w().sW({store:n,data:{icon:i.icon??""},transaction:t}),t.postSubmitCallbacks=[e=>{e&&N(e,o,t.spaceId)}]}})}else U({environment:t,botPointer:a,formData:i});return a}({environment:t,botPointer:{id:a.startingRecord.value.id,table:a.startingRecord.table,spaceId:a.startingRecord.value.space_id},formData:i});if("create-guest-integration"===a.type){if(!a.startingRecord)return;const e=a.startingRecord.value.integration_id;return e?B({environment:t,integrationPointer:{id:e,table:d().K2},formData:i,botPointer:{id:a.startingRecord.value.id,table:a.startingRecord.table,spaceId:a.startingRecord.value.space_id}}):R({environment:t,botPointer:{id:a.startingRecord.value.id,table:a.startingRecord.table,spaceId:a.startingRecord.value.space_id},formData:i})}return"update-guest-integration"===a.type?B({environment:t,integrationPointer:{id:a.startingRecord.value.id,table:a.startingRecord.table},formData:i}):"create-third-party-external-integration"===a.type?function(e){const{environment:t,formData:a,integrationPointer:i}=e,{currentUserRootStore:r}=M().default.state,n=i.id;if(!r)return;const o=V(a);if(!o)return;const s=o.oauth_authorize_url;B({environment:t,integrationPointer:i,formData:a,hasLinkPreviewCapabilities:!0,redirect_uris:[s]});const u="developerIntegrationActions.createThirdPartyExternalIntegration";return T().createAndCommit({userAction:u,environment:t,canUndo:!0,perform:e=>{!function(e,t,a){const{integrationId:i,userRootStore:r,config:{oauth_authorize_url:n,oauth_token_url:o,client_id:s,client_secret:d,scopes:u,deletion_url:p}}=a,g={id:i,oauth_authorize_url:n,oauth_token_url:o,client_id:s,client_secret:d,scopes:u,parent_id:r.id,parent_table:c().KJ,deletion_url:p};w().ae({environment:e,table:l().r9,value:g,transaction:t,inMemoryRecordCache:r.inMemoryRecordCache})}(t,e,{integrationId:n,userRootStore:r,config:o}),e.postSubmitCallbacks=[t=>{t&&N(t,u,e.spaceId)}]}}),Z(t,i),b().PR(t,{table:d().K2}),i}({environment:t,integrationPointer:{id:a.startingRecord.value.id,table:a.startingRecord.table},formData:i}):"update-third-party-external-integration"===a.type?function(e){const{environment:t,integrationPointer:a,formData:i}=e,{currentUserRootStore:r}=M().default.state;if(!r)return;const n=V(i);if(!n)return;const o=(0,k().Kv)(r,{table:l().r9,id:a.id}),s={oauth_authorize_url:n.oauth_authorize_url,oauth_token_url:n.oauth_token_url,client_id:n.client_id,client_secret:n.client_secret,scopes:n.scopes||null,deletion_url:n.deletion_url||null},d=n.oauth_authorize_url;B({environment:t,integrationPointer:a,formData:i,hasLinkPreviewCapabilities:!0,redirect_uris:[d]});const c="developerIntegrationActions.updateThirdPartyExternalIntegration";return T().createAndCommit({userAction:c,environment:t,canUndo:!0,perform:e=>{w().sW({store:o,data:s,transaction:e}),e.postSubmitCallbacks=[t=>{t&&N(t,c,e.spaceId)}]}}),a}({environment:t,integrationPointer:{id:a.startingRecord.value.id,table:a.startingRecord.table},formData:i}):"update-first-party-external-integration"===a.type?B({environment:t,integrationPointer:{id:a.startingRecord.value.id,table:a.startingRecord.table},formData:i,hasLinkPreviewCapabilities:!0}):"update-compliance-integration"===a.type?function(e){const{environment:t,integrationPointer:a,formData:i}=e,{currentUserRootStore:r}=M().default.state;if(!r)return;const n=V(i),o=null==n?void 0:n.oauth_authorize_url;if(B({environment:t,integrationPointer:a,formData:i,...o?{redirect_uris:[o]}:void 0}),n){const e=(0,k().Kv)(r,{table:l().r9,id:a.id}),i={oauth_authorize_url:n.oauth_authorize_url,oauth_token_url:n.oauth_token_url,client_id:n.client_id,client_secret:n.client_secret,scopes:n.scopes||null,deletion_url:n.deletion_url||null},o="developerIntegrationActions.updateComplianceIntegration";T().createAndCommit({userAction:o,environment:t,canUndo:!0,perform:t=>{w().sW({store:e,data:i,transaction:t}),t.postSubmitCallbacks=[e=>{e&&N(e,o,t.spaceId)}]}})}return a}({environment:t,integrationPointer:{id:a.startingRecord.value.id,table:a.startingRecord.table},formData:i}):(0,f().t1)(a)}function E(e){const{environment:t,formData:a}=e,{currentUserRootStore:i}=M().default.state;if(!i)return;const{botStore:r}=y().lz({environment:t,name:a.name,icon:a.icon,userId:i.id,spaceStore:a.space,spaceRole:"none",type:"guest",capabilities:a.capabilities||{read_content:!0,insert_content:!0,update_content:!0,read_user_without_email:!0,read_user_with_email:!0}});return Z(t,{id:r.id,table:s().cZ,spaceId:a.space.id}),b().PR(t,{table:s().cZ}),{id:r.id,table:s().cZ,spaceId:a.space.id}}function R(e){const{environment:t,botPointer:a,formData:r}=e,{currentUserRootStore:n}=M().default.state;if(!n)return;const o=(0,k().Kv)(n,a),s=o.getValue(),l=s&&(0,i().hA)(s)?s.capabilities:{read_content:!0,insert_content:!0,update_content:!0,read_user_without_email:!0,read_user_with_email:!0},u={name:r.name,tagline:r.tagline,icon:r.icon,email:r.email,website_url:r.website_url,privacy_policy_url:r.privacy_policy_url,terms_of_use_url:r.terms_of_use_url,template_page_id:r.template_page_id,redirect_uris:r.redirect_uris,capabilities:l,userRootStore:n,developer_name:r.developer_name},p="developerIntegrationActions.integrationId",{performResult:g}=T().createAndCommit({userAction:p,environment:t,canUndo:!0,perform:e=>{const a=function(e,t,a){const{name:i,tagline:r,icon:n,email:o,website_url:s,privacy_policy_url:l,terms_of_use_url:u,template_page_id:p,redirect_uris:g,capabilities:m,userRootStore:f,developer_name:h}=a,b=Date.now(),y=f.id,v={name:i,parent_table:c().KJ,parent_id:y,created_at:b,created_by_id:y,created_by_table:c().KJ,updated_at:b,updated_by_id:y,updated_by_table:c().KJ,redirect_uris:g,type:"guest",status:"unpublished",info:{tagline:r,icon:n,email:o,website_url:s,privacy_policy_url:l,terms_of_use_url:u,template_page_id:p,developer_name:h},capabilities:m,alive:!0};return w().ae({environment:e,table:d().K2,value:v,transaction:t,inMemoryRecordCache:f.inMemoryRecordCache})}(t,e,u),i=a.id;return w().sW({store:o,data:{integration_id:i,parent_table:c().KJ,parent_id:n.id},transaction:e}),e.postSubmitCallbacks=[t=>{t&&N(t,p,e.spaceId)}],i}}),m={id:g,table:d().K2};return Z(t,m),b().PR(t,{table:d().K2,template_id:r.template_page_id}),m}function U(e){const{environment:t,botPointer:a,formData:r}=e,{currentUserRootStore:n}=M().default.state;if(!n||!a.spaceId)return;const o=(0,k().Kv)(n,a),s=o.getValue(),l=s&&(0,i().hA)(s)?s.capabilities:{read_content:!0,insert_content:!0,update_content:!0,read_user_without_email:!0,read_user_with_email:!0},u={name:r.name,icon:r.icon,capabilities:l,userRootStore:n,spaceId:a.spaceId},p="developerIntegrationActions.integrationId";return T().createAndCommit({userAction:p,environment:t,canUndo:!0,perform:e=>{const a=function(e,t,a){const{name:i,icon:r,spaceId:n,capabilities:o,userRootStore:s}=a,l=Date.now(),u=s.id,p={name:i,parent_table:x().bx,parent_id:n,created_at:l,created_by_id:u,created_by_table:c().KJ,updated_at:l,updated_by_id:u,updated_by_table:c().KJ,redirect_uris:[""],type:"internal",status:"unpublished",info:{icon:r??""},capabilities:o,alive:!0};return w().ae({environment:e,table:d().K2,value:p,transaction:t,inMemoryRecordCache:s.inMemoryRecordCache})}(t,e,u),i=a.id;return w().sW({store:o,data:{integration_id:i},transaction:e}),e.postSubmitCallbacks=[t=>{t&&N(t,p,e.spaceId)}],i}}),Z(t,a),a}function B(e){const{environment:t,integrationPointer:a,formData:i,hasLinkPreviewCapabilities:r,redirect_uris:o,botPointer:s}=e,{currentUserRootStore:l}=M().default.state;if(!l)return;const g=void 0!==s,m=(0,k().Kv)(l,a),h=m.getValue(),y=a.id,v=h&&(0,d().R8)(h)||null==h?void 0:h.info.template_page_id,x=(0,u().I$)(y),_=x?x.allowedBotCapabilities:r?{...i.capabilities,link_preview:!0}:i.capabilities,C=r?"external":"guest";let j;j=!h||(0,d().R8)(h)?l.id:h.parent_id;const I={name:i.name,redirect_uris:o??i.redirect_uris,capabilities:_,type:C,parent_table:c().KJ,parent_id:j},P=(0,k().Vh)(m,m.pointer,"info"),D=function(e){const{hasLinkPreviewCapabilities:t,integrationId:a,formData:i,currentIntegrationInfo:r}=e;if(t)return function(e){var t,a,i;const{integrationId:r,formData:o,currentIntegrationInfo:s}=e,l=(null==s||null===(t=s.original_url_patterns)||void 0===t?void 0:t.filter((e=>{var t;return!0===(null===(t=e.additional_types)||void 0===t?void 0:t.collection)})))??[],d=(null===(a=o.url_matching_and_placeholder)||void 0===a||null===(a=a.map((e=>{const t=[];for(const a of e.attributes){const e=(0,p().GY)(a);if(!(0,n().nj)(e))return;t.push(e)}return{name:(0,S().X)({patternName:e.name,integrationId:r}),regex:e.regex,attributes:t,sample_urls:e.sampleUrls}})))||void 0===a?void 0:a.filter(f().$K))??[],c=null===(i=o.domain)||void 0===i||null===(i=i.domainVerifications)||void 0===i||null===(i=i.filter((e=>"unverified"===e.type)))||void 0===i?void 0:i.map((e=>e.domain));return{template_page_id:o.template_page_id,tagline:o.tagline,icon:o.icon,email:o.email,website_url:o.website_url,privacy_policy_url:o.privacy_policy_url,terms_of_use_url:o.terms_of_use_url,developer_name:o.developer_name,unfurl_url:o.unfurl_url,development_url_domains:c,original_url_patterns:[...d,...l],dark_icon:(null==s?void 0:s.dark_icon)??o.icon,accent_color:(null==s?void 0:s.accent_color)??{r:36,g:41,b:47},accent_icon:(null==s?void 0:s.accent_icon)??o.icon}}({integrationId:a,formData:i,currentIntegrationInfo:r});return{tagline:i.tagline,icon:i.icon,email:i.email,website_url:i.website_url,privacy_policy_url:i.privacy_policy_url,terms_of_use_url:i.terms_of_use_url,template_page_id:i.template_page_id,developer_name:i.developer_name}}({hasLinkPreviewCapabilities:r,integrationId:y,formData:i,currentIntegrationInfo:P.getValue()}),L="developerIntegrationActions.updateIntegration";T().createAndCommit({userAction:L,environment:t,canUndo:!0,perform:e=>{if(w().sW({store:m,data:I,transaction:e}),w().sW({store:P,data:D,transaction:e}),g&&s){const t=(0,k().Kv)(l,s);w().sW({store:t,data:{integration_id:y,parent_table:c().KJ,parent_id:l.id},transaction:e})}e.postSubmitCallbacks=[t=>{t&&N(t,L,e.spaceId)}]}});const E=i.template_page_id??void 0,R=v!==E;return b().FB(t,{table:d().K2,...R&&{template_id_before:v},...R&&{template_id_after:E}}),a}function H(e){const{environment:t,integrationId:a,allVerifiedDomains:i,domainToRemove:r}=e,{currentUserRootStore:n}=M().default.state;if(!n)return;const o=(0,k().Kv)(n,{table:d().K2,id:a}),s=(0,k().Vh)(o,o.pointer,"info"),l="developerIntegrationActions.removeVerifiedDomain";T().createAndCommit({userAction:l,environment:t,canUndo:!0,perform:e=>{w().sW({store:s,data:{original_url_domains:i.filter((e=>e!==r))},transaction:e}),e.postSubmitCallbacks=[t=>{t&&N(t,l,e.spaceId)}]}}),b().FB(t,{table:d().K2})}function F(e){I().c4({environment:e,url:o()._j.creatorProfileIntegrations})}function Z(e,t){if(!(arguments.length>2&&void 0!==arguments[2]&&arguments[2]))return;const a={[s().cZ]:"internal",[d().K2]:"public"}[t.table],i=(0,m().cj)(t.id);I().c4({environment:e,url:`${o()._j.creatorProfileIntegrations}/${a}/${i}`})}function A(e){return`${o()._j.creatorProfileIntegrations}/public/${e.id}/lab`}function V(e){const t={oauth_authorize_url:e.external_oauth_authorize_url,oauth_token_url:e.external_oauth_token_url,client_id:e.external_client_id,client_secret:e.external_client_secret,scopes:e.external_oauth_scopes,deletion_url:e.external_deletion_url};return(0,h().Gu)(l().wG,t)?void 0:t}function N(e,t,a){v().UW(j().Z.formatMessage(C().sY.transactionGenericError)),r().log({level:"error",from:"developerIntegrationActions",type:"createAndCommit",error:(0,g().Ui)(e),data:{userAction:t,spaceId:a}})}function z(e){const{environment:t,formState:a,formData:i}=e;if("create-bot"===a.type){const e=E({environment:t,formData:i});if(!e)return;return U({environment:t,botPointer:{id:e.id,table:e.table,spaceId:e.spaceId},formData:i})}if("create-guest-integration"===a.type){const e=E({environment:t,formData:i});if(!e)return;return R({environment:t,botPointer:{id:e.id,table:e.table,spaceId:e.spaceId},formData:i})}return(0,f().t1)(a)}},579217:(e,t,a)=>{"use strict";a.d(t,{_:()=>n,s:()=>r});var i=()=>a(677559);const r=(0,i().kF)(new(i().Ss)("UniversalQnaModals",(async()=>await Promise.all([a.e(62743),a.e(52774),a.e(90698),a.e(84885),a.e(37358),a.e(5242),a.e(7312),a.e(90424),a.e(81580),a.e(84325),a.e(31189),a.e(69343),a.e(46293),a.e(2971),a.e(80741),a.e(72586),a.e(53335),a.e(71896),a.e(46616),a.e(54940),a.e(49396),a.e(98721),a.e(98032),a.e(57229),a.e(63707),a.e(86609),a.e(91253),a.e(4642),a.e(5006),a.e(6612),a.e(61171),a.e(23179),a.e(75377),a.e(31020),a.e(2942),a.e(73682),a.e(58591),a.e(54803),a.e(1953),a.e(10216),a.e(58565),a.e(69197),a.e(42055),a.e(38739),a.e(44751),a.e(81567),a.e(58183)]).then(a.bind(a,260685)))),(e=>e.UniversalQnaModals)),n=(0,i().kF)(new(i().Ss)("SlackConnectionOptions",(async()=>await a.e(16982).then(a.bind(a,945272)))),(e=>e.SlackConnectionOptions))},493843:(e,t,a)=>{"use strict";a.d(t,{$o:()=>K,Fv:()=>Z,IL:()=>$,J4:()=>V,KA:()=>H,Nf:()=>B,_p:()=>X,cQ:()=>q,f$:()=>A,fX:()=>O,j2:()=>U,k2:()=>G,mg:()=>J,mz:()=>z,oP:()=>F,tF:()=>Y,td:()=>N,x:()=>W});a(670560),a(267602),a(470928),a(30005),a(241792),a(228244);var i=()=>a(730120),r=()=>a(492788),n=()=>a(506347),o=()=>a(926724),s=()=>a(331540),l=()=>a(874459),d=()=>a(998411),c=()=>a(35980),u=()=>a(513670),p=()=>a(696459),g=()=>a(250303),m=()=>a(384667),f=()=>a(366257),h=()=>a(139224),b=()=>a(421654),y=()=>a(636340),v=()=>a(531515),x=()=>a(47443),_=()=>a(794586),w=()=>a(879952),C=()=>a(970105),S=()=>a(990966),j=()=>a(269299),M=()=>a(932753),k=()=>a(887430),I=()=>a(861026),T=()=>a(804217),P=()=>a(826955),D=()=>a(965903),L=()=>a(807230),E=()=>a(701182),R=()=>a(645843);function U(e){const{collectionViewStore:t,collectionContextStore:a,timelineState:i,environment:r}=e,n=r.currentUser.id,o=(0,E().B8)(t.id),s=(0,E().pQ)(t,r),l=a.permissionScopesStore.state,d=u().Ds((()=>{if(i.destroyed)return;const e={zoomLevel:i.zoomLevel.state,centerTimestamp:(0,E().al)(i)};c().Z.set({userId:n,key:o,value:e})}),1e3),p=u().Ds((()=>{if(i.destroyed||!T().default.state.online||!r.currentUser.isLoggedIn()||!l.canConfigureBlock)return;const e={zoomLevel:i.zoomLevel.state,centerTimestamp:(0,E().al)(i)},a=t.getFormat().timeline_preference;u().Xy(a,e)||j().createAndCommit({userAction:"collectionTimelineViewActions.setRemotePreference",environment:r,canUndo:!0,perform:a=>{b().FH({stores:[t],update:{timeline_preference:e},transaction:a})}})}),5e3);i.savePreference=()=>{d(),p()},B({timelineState:i,environment:r,...s})}function B(e){const{timelineState:t,zoomLevel:a,centerTimestamp:i,environment:n}=e,{savePreference:o}=t,s=n.WindowSizeStore.state.width+2*E().Ge,l=(0,E().x2)(a,s),d=i-l/2,c=i+l/2;t.zoomLevel.setState(a),t.currentRange.setState({startTimestamp:d,endTimestamp:c}),r().default.afterNextFlush((()=>{H({timelineState:t,centerTimestamp:i}),o&&o()}))}function H(e){const{timelineState:t,centerTimestamp:a}=e,{horizontalScroller:i,outerSizeObserver:r}=t;if(!i)return;const n=t.zoomLevel.state,{startTimestamp:o,endTimestamp:s}=t.currentRange.state,l=r.rect.state.width;if(l===(0,E().e$)(n,s-o))return;const d=(0,E().e$)(n,a-o)-l/2;i.scrollLeft=d,t.scrollLeft.setState(d)}function F(e){const{environment:t,store:a,query:i,date:r,schema:n,transaction:o}=e,{timeline_by:s}=i;if(!s)return;const l=a.getAssociatedCollectionStore(),d=(null==l?void 0:l.getMappedProperty(s))??s,c=i.timeline_by_end?(null==l?void 0:l.getMappedProperty(i.timeline_by_end))??i.timeline_by_end:void 0,u=(0,E().TW)({store:a,dateValue:r,query:i,schema:(null==l?void 0:l.getSchema())??n}),p=a.getPropertyValue(d),g=c?a.getPropertyValue(c):void 0;return y().sW({store:a.getPropertiesStore(),data:u,transaction:o}),f().H({environment:t,store:a,dateProperty:{id:d,newValue:(null==u?void 0:u[d])??[],oldValue:p},otherDateProperty:c?{id:c,newValue:(null==u?void 0:u[c])??[],oldValue:g}:void 0}),a}function Z(e){var t;const{environment:a,timelineState:r,collectionStore:n,collectionContextStore:o,store:s,query:c,groupFormat:u,transaction:p}=e,g=r.zoomLevel.state,f=(0,E().al)(r),{snapUnit:h,getDateRangePlaceholderDuration:b}=E().BJ[g],{timeline_by:y}=c;if(!y)return;const v=null===(t=o.groupsStore.getGroupState(u))||void 0===t?void 0:t.resultsStore.state;if(!v)return;const x=i().ou.fromMillis(f),_=(0,E().DS)(x,h),w=(0,E().DS)(b(x),h),C=(0,E().AZ)({startValue:(0,l().Lg)((0,d().r)()),snapUnit:h,desiredStart:_,desiredEnd:w});return F({environment:a,store:s,query:c,schema:n.getSchema(),date:C,transaction:p}),m().$T({environment:a,collectionStore:n,before:!0,store:v[0],insertStores:[s],collectionContextStore:o,groupsPointer:u?[u]:[],transaction:p}),s}function A(e){const{type:t,timelineState:a,store:i,startX:r,query:n,schema:o,intl:s,environment:l}=e,{horizontalScroller:d}=a,{startTimestamp:c}=a.currentRange.state;if(!d)return;w().Ys({environment:l,store:i});const p=d.scrollLeft,{stores:g}=D().default.state,m=u().oA(g.map((e=>{const t=(0,E().bk)({store:e,query:n,schema:o,userId:l.currentUser.id,intl:s,formulasModule:void 0});if(t)return{startValue:t,store:e}})));a.dragState.setState({type:t,startStore:i,stores:m.map((e=>{let{store:t}=e;return t})),startValues:m.map((e=>{let{startValue:t}=e;return t})),temporaryValues:m.map((e=>{let{startValue:t}=e;return t})),startX:r,startStartTimestamp:c,startScrollLeft:p})}function V(e){const{timelineState:t,store:a,startX:i,startY:r,schema:n,collectionContextStore:o,verticalScroller:s}=e,{horizontalScroller:l}=t,{startTimestamp:d}=t.currentRange.state;if(!l||!s)return;const c=l.scrollLeft,u=s.scrollTop,p=(0,E().YE)(o,a,n);t.drawState.setState({startStore:a,startDependencyRelationPointers:p,temporaryDependencyRelationPointers:[...p],startX:i,startY:r,startScrollLeft:c,startScrollTop:u,startStartTimestamp:d,xOffsetPx:0,yOffsetPx:0,tryToCompleteDrawnArrow:!1})}function N(e){const{timelineState:t,currentX:a}=e,{horizontalScroller:i}=t,r=t.zoomLevel.state,n=t.dragState.state,{startTimestamp:o}=t.currentRange.state;if(!n||!i)return;const{type:s,startStartTimestamp:d,startValues:c,startScrollLeft:g,startX:m,startStore:f,stores:h}=n,b=E().BJ[r],{snapUnit:y}=b,v=i.scrollLeft-g+(a-m)+(0,E().e$)(r,o-d),x=(0,E().x2)(r,v),_=c[h.indexOf(f)];let w;if(s===E().px.LeftResizer){const{start:e}=(0,E().XO)(_,y),t=e.plus(x);w=c.map((e=>{const a=(0,E().AZ)({startValue:e,snapUnit:y,desiredStart:t});return(0,l().gW)(a)}))}else if(s===E().px.RightResizer){const{end:e}=(0,E().XO)(_,y),t=e.plus(x);w=c.map((e=>{const a=(0,E().AZ)({startValue:e,snapUnit:y,desiredEnd:t});return(0,l().Qq)(a)}))}else s===E().px.ItemDrag?w=c.map((e=>{const{start:t,end:a}=(0,E().XO)(e,y),i=t.plus(x),r=i.plus(a.valueOf()-t.valueOf());return(0,E().AZ)({startValue:e,snapUnit:y,desiredStart:i,desiredEnd:r})})):(0,p().t1)(s);u().Xy(n.temporaryValues,w)||t.dragState.setState({...n,temporaryValues:w})}function z(e){const{timelineState:t,currentX:a,currentY:i,verticalScroller:r}=e,n=t.drawState.state,o=t.zoomLevel.state,{startTimestamp:s}=t.currentRange.state,{horizontalScroller:l}=t;if(!n||!l||!r)return;const{startDependencyRelationPointers:d,startStore:c,startX:p,startY:g,startScrollLeft:m,startScrollTop:f,startStartTimestamp:h}=n,b=l.scrollLeft,y=r.scrollTop,v=b-m+(a-p)+(0,E().e$)(o,s-h),x=y-f+(i-g),_=t.hoveredItem.state;if(_&&_!==c&&!d.some((e=>e.id===_.id))){const e=[...d,{table:"block",id:_.id,spaceId:_.getSpaceId()}];u().Xy(n.temporaryDependencyRelationPointers,e)||t.drawState.setState({...n,temporaryDependencyRelationPointers:e,xOffsetPx:void 0,yOffsetPx:void 0})}else t.drawState.setState({...n,temporaryDependencyRelationPointers:[...d],xOffsetPx:v,yOffsetPx:x})}function O(e){const{environment:t,collectionContextStore:a,timelineState:i,query:r,schema:n,transaction:o}=e,s=i.dragState.state,{timeline_by:l}=r;if(!s||!l)return;const{temporaryValues:d,stores:c}=s;d.forEach(((e,i)=>{const s=c[i];F({environment:t,store:s,query:r,schema:n,transaction:o,date:e}),g().rv({environment:t,collectionContextStore:a,block_id:s.id,property:l,property_type:"date",from:"timeline"})})),i.dragState.setState(void 0)}function K(e){var t;const{timelineState:a,environment:i,transaction:r,collectionContextStore:n,isFullScreen:o,isRootChild:s}=e,l=a.drawState.state,d=a.dateRangePlaceholder.state;if(!l)return;const{startStore:c,startDependencyRelationPointers:u,temporaryDependencyRelationPointers:p}=l;if(!c)return void a.drawState.setState(void 0);let m;if(d.active){const{date:e,store:t,parentStore:o,groupFormat:s,newTimelineItemProps:l,existingTimelineItemProps:u}=d;if(t&&u){const{query:a,schema:n}=u;F({environment:i,store:t,query:a,schema:n,date:e,transaction:r}),m={table:"block",id:t.id,spaceId:c.getSpaceId()}}else if(l){const{query:a,schema:d,isFullScreen:u,canEditTimelineItems:p,subitemPath:g}=l,f=J({environment:i,date:e,store:t,parentStore:o,query:a,schema:d,isFullScreen:u,groupFormat:s,canEditTimelineItems:p,collectionContextStore:n,subitemPath:g,transaction:r,from:"timeline_complete_draw"});f&&(m={table:"block",id:f.id,spaceId:c.getSpaceId()})}a.dateRangePlaceholder.setState({active:!1})}else m=p.find((e=>!u.includes(e)));const f=(0,E()._e)(n);if(f){const{property:e}=f;m&&(v().hE({environment:i,propertyWithInverse:f,sourceStore:c,destStore:P().G.createChildStore(c,m),position:{type:"after"},transaction:r}),g().rv({environment:i,collectionContextStore:n,block_id:c.id,property:e,property_type:"relation",from:"timeline",isFromBulkActionsToolbar:!1,isUnthrottled:!0})),a.drawState.setState(void 0)}else h().wl({item:{type:"dependencies",from:"view_options"},collectionSettingsStore:n.settingsStore}),a.drawState.setState({...l,tryToCompleteDrawnArrow:!0});const b=null===(t=m)||void 0===t?void 0:t.id;b&&(0,R().LE)(i,{...(0,I().Pn)(n),...(0,R().Ii)({environment:i,collectionContextStore:n,timelineState:a,isFullScreen:o,isRootChild:s}),dependenciesPropertyID:null==f?void 0:f.property,blockedByStoreID:c.id,blockingStoreID:b})}function q(e){const{timelineState:t,environment:a}=e;t.dragState.state&&(t.dragState.setState(void 0),w().ZH({environment:a}))}function W(e){const{timelineState:t,environment:a}=e;t.drawState.state&&(t.drawState.setState(void 0),w().ZH({environment:a}))}function G(e){const{stores:t,collectionViewStore:a,schema:i,transaction:r}=e,n=a.getType(),o=a.getQuery(i),s=[];o&&("calendar"===n?o.calendar_by&&s.push(o.calendar_by):"timeline"===n&&(o.timeline_by&&s.push(o.timeline_by),o.timeline_by_end&&s.push(o.timeline_by_end)));for(const l of t)for(const e of s)C().sO({environment:l.environment,store:l.getPropertyStore(e),value:void 0,transaction:r})}function $(e){const{dependency:t,collectionContextStore:a,environment:i,timelineState:r,isFullScreen:n,isRootChild:o}=e,s=(0,E()._e)(a),l=a.collectionStore();if(!s||!l)return;const{property:d}=s,{store:c,relationPointer:u}=t,p=c.getSchema()[d];p&&"relation"===p.type&&(j().createAndCommit({userAction:"CollectionTimelineDependenciesOverlay.handleRemoveRelation",environment:i,canUndo:!0,perform:e=>{v().Bl({environment:i,propertyWithInverse:s,sourceStore:c,destStore:P().G.createChildStore(c,u),transaction:e}),g().rv({environment:i,block_id:u.id,property:d,property_type:p.type,from:"timeline",collectionContextStore:a,isFromBulkActionsToolbar:!1,isUnthrottled:!0})}}),(0,R().lf)(i,{...(0,I().Pn)(a),...(0,R().Ii)({environment:i,collectionContextStore:a,timelineState:r,isFullScreen:n,isRootChild:o}),dependenciesPropertyID:d,blockedByStoreID:c.id,blockingStoreID:u.id}))}function Y(e){const{collectionViewStore:t,newProperty:a,transaction:i}=e;b().FH({stores:[t],update:{timeline_arrows_by:{property:a}},transaction:i})}function X(e){var t;const{collectionContextStore:a,relationPropertyId:i,transaction:r}=e,n=a.collectionStore();if(!n)return;const l=i?n.getSchema()[i]:void 0,d="relation"===(null==l?void 0:l.type)&&l.property&&"relation"===(null===(t=n.getSchema()[l.property])||void 0===t?void 0:t.type)?l.property:void 0;b().FH({stores:[n],update:{collection_default_arrows_by:i,...n.getFormat().app_config_uri===s().iS?{app_uri_map:{...n.getFormat().app_uri_map?n.getFormat().app_uri_map:{},[o().Es.BlockingRelation]:i,[o().Es.BlockedRelation]:d}}:{}},transaction:r})}function J(e){const{environment:t,transaction:a,date:i,parentStore:r,query:o,schema:s,isFullScreen:l,groupFormat:d,canEditTimelineItems:c,collectionContextStore:u,from:p}=e;if(!(0,L().ww)(t))return;const g=d?[d]:[],f=u.groupsStore.getGroupState(g);if(!f)return;if(r)return function(e){const{environment:t,transaction:a,date:i,store:r,parentStore:o,query:s,schema:l,groupFormat:d,canEditTimelineItems:c,collectionContextStore:u,subitemPath:p}=e;if(!r||!o)return;const g=d?[d]:[],f=m().yk({environment:t,collectionContextStore:u,groupsPointer:g,store:r,before:!1,collectionStore:o,transaction:a,subitemPath:p,subitemInsertDirection:"into"});if(f){if(F({environment:t,store:f,query:s,schema:l,date:i,transaction:a}),t.device.isMobile)x()._c({environment:t,store:f,pageVisitSource:n().tY.Create});else if(f&&c){const e=f.getBlockTitleStore();S().setSelectionAtStart({store:e})}return f}}(e);u.searchQueryStore.state&&M().Ug({searchQuery:"",collectionContextStore:u,isFullScreen:l});const h=m().IW({environment:t,collectionContextStore:u,groupsPointer:g,shouldCoerce:!0,templateStore:u.defaultPageTemplateStore.state,transaction:a,from:{createBlock:p},inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache});if(!h)return;const b=h.coercionSucceeded,y=h.newStore;if(F({environment:t,store:y,query:o,schema:s,date:i,transaction:a}),t.device.isMobile)x()._c({environment:t,store:y,pageVisitSource:n().tY.Create});else if(b&&c){const e=y.getBlockTitleStore();S().setSelectionAtEnd({store:e})}else _().CH({environment:t,store:y,peekMode:(0,k().kr)(u),resultsStore:null==f?void 0:f.resultsStore,collectionContextStore:u,pageVisitSource:n().tY.Create});return y}},645843:(e,t,a)=>{"use strict";a.d(t,{Al:()=>l,CB:()=>d,H6:()=>s,Ii:()=>m,LE:()=>p,gw:()=>c,iR:()=>n,lf:()=>g,ne:()=>u,zI:()=>o});a(267602),a(653476);var i=()=>a(594546),r=()=>a(701182);function n(e,t){i().lu(e,"timeline_view","timeline_view",5,t)}function o(e,t){i().K4(e,"timeline_zoom_level_update",t)}function s(e,t){i().K4(e,"timeline_today_click",t)}function l(e,t){i().K4(e,"timeline_shift_time_click",t)}function d(e,t){i().K4(e,"timeline_toggle_table_click",t)}function c(e,t){i().K4(e,"timeline_item_scroll_arrow_click",t)}function u(e,t){i().K4(e,"timeline_item_resize",t)}function p(e,t){i().K4(e,"timeline_dependency_arrow_add",t)}function g(e,t){i().K4(e,"timeline_dependency_arrow_delete",t)}function m(e){const{environment:t,collectionContextStore:a,timelineState:i,isFullScreen:n,isRootChild:o}=e,s=i.zoomLevel.state,l=a.normalizedFormatStore.state,d=(0,r().C1)({environment:t,format:l,isFullScreen:n,isRootChild:o}),c=d&&l.timeline_table_properties?l.timeline_table_properties.length:0,u=l.timeline_properties||[],p=u.filter((e=>"title"!==e.property));return{zoom_level:s,show_table:d,show_table_properties_count:c,show_timeline_title:u.length!==p.length,show_timeline_properties_count:p.length}}},887330:(e,t,a)=>{"use strict";a.d(t,{C:()=>r,L:()=>n});var i=()=>a(707513);function r(e){const{theme:t,isInHomeWidget:a}=e;return{display:"flex",alignItems:"center",fontSize:14,padding:6,...a?{height:24,width:24,color:t.lightTextColor,fill:t.lightIconColor}:{height:28,width:28,color:t.mediumIconColor,fill:t.mediumIconColor},fontWeight:i().Ue.regular,lineHeight:1,borderRadius:6}}function n(e){const{theme:t}=e;return{display:"flex",alignItems:"center",fontSize:14,height:28,padding:6,color:t.mediumIconColor,fontWeight:i().Ue.regular,lineHeight:1,borderRadius:4}}},615912:(e,t,a)=>{"use strict";a.d(t,{Z:()=>M});a(667294);var i=()=>a(219727),r=()=>a(788860),n=()=>a(30312),o=()=>a(247724),s=()=>a(969798),l=()=>a(146947),d=()=>a(714230),c=()=>a(836273),u=()=>a(568017),p=()=>a(707513),g=()=>a(338217),m=()=>a(861050),f=()=>a(520849),h=()=>a(154186),b=()=>a(108714),y=()=>a(92175),v=()=>a(842574),x=()=>a(891900),_=()=>a(820072),w=()=>a(837600),C=a(785893);function S(e){const{className:t,title:a,subtitle:i,onNavigateBack:s,navigateBackMessage:l,children:u,icon:p,sideContent:S,innerContainerStyles:M}=e,k=(0,r().YB)();return(0,C.jsx)(w().Z,{title:k.formatMessage({id:"developerIntegrationsLayout.document.title",defaultMessage:"My integrations | Notion Developers"}),children:(0,C.jsxs)(v().Z,{className:t,style:j.scroller,type:f().Z.Y,children:[(0,C.jsx)(_().Z,{}),(0,C.jsxs)("div",{className:o().rIs,style:j.topBar,children:[(0,C.jsx)("div",{children:(0,C.jsx)(b().Z,{href:c()._j.developerPortal,external:!0,children:(0,C.jsx)("img",{src:d().Z.images.integrations.notionDevsLogoGaSvg})})}),(0,C.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,C.jsx)(b().Z,{style:{display:"flex",marginLeft:-6},href:c()._j.developerPortal,external:!0,children:(0,C.jsx)(y().Z,{icon:g().J,isSmall:!0,children:"View documentation"})}),(0,C.jsx)(x().ZP,{onChange:e=>{n().A1(e)}})]})]}),(0,C.jsxs)("div",{style:{...j.innerContainer,...M},children:[(0,C.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:80,marginBottom:80},children:[(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"66%",justifyContent:"center"},children:[(0,C.jsx)(h().Z,{style:{...j.button,...!s&&{display:"none"}},onClick:s,children:(0,C.jsxs)("div",{style:{...j.buttonContent,fontSize:20},children:[(0,m().S)(j.arrowIcon),(0,C.jsx)("div",{style:{marginLeft:12},children:l||(0,C.jsx)(r()._H,{id:"developerIntegrationsLayout.backButton.label",defaultMessage:"My integrations"})})]})}),(0,C.jsx)("div",{style:j.header,children:a}),(0,C.jsx)("div",{style:j.subtitle,children:i})]}),(0,C.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"center",flex:1},children:p})]}),S?(0,C.jsxs)("div",{style:j.gridContainer,children:[(0,C.jsx)("div",{style:j.leftColumn,children:S}),(0,C.jsx)("div",{style:j.rightColumn,children:u})]}):u]}),(0,C.jsxs)("footer",{style:j.footerContainer,children:[(0,C.jsxs)("section",{style:j.footerColophon,children:[(0,C.jsx)("h1",{style:j.footerLogo,children:(0,C.jsx)("img",{src:d().Z.images.integrations.notionFooterLogoSvg})}),(0,C.jsx)("h6",{style:j.footerCopy,children:"The all-in-one workspace for your notes, tasks, wikis, and databases."}),(0,C.jsx)("h6",{style:j.footerCopy,children:`©${(new Date).getFullYear()} Notion Labs, Inc.`}),(0,C.jsx)(b().Z,{external:!0,href:c()._j.termsAndPrivacy,style:j.footerLink,children:"Terms & Privacy"})]}),(0,C.jsxs)("nav",{style:{...j.footerNav,gridColumnStart:7},children:[(0,C.jsx)("h5",{style:j.footerSectionHeader,children:"Developers"}),(0,C.jsx)(b().Z,{external:!0,href:"https://developers.notion.com/docs",style:j.footerLink,children:"Guides"}),(0,C.jsx)(b().Z,{external:!0,href:"https://developers.notion.com/reference",style:j.footerLink,children:"API Reference"}),(0,C.jsx)(b().Z,{external:!0,href:c()._j.creatorProfileIntegrations,style:j.footerLink,children:"My integrations"}),(0,C.jsx)(b().Z,{external:!0,href:"https://developers.notion.com/page/frequently-asked-questions",style:j.footerLink,children:"FAQs"}),(0,C.jsx)(b().Z,{external:!0,href:c()._j.developerTerms,style:j.footerLink,children:"Developer terms"})]}),(0,C.jsxs)("nav",{style:j.footerNav,children:[(0,C.jsx)("h5",{style:j.footerSectionHeader,children:"Notion"}),(0,C.jsx)(b().Z,{external:!0,href:c()._j.product,style:j.footerLink,children:"Product"}),(0,C.jsx)(b().Z,{external:!0,href:c()._j.teams,style:j.footerLink,children:"Teams"}),(0,C.jsx)(b().Z,{external:!0,href:c()._j.enterprise,style:j.footerLink,children:"Enterprise"}),(0,C.jsx)(b().Z,{external:!0,href:c()._j.blog,style:j.footerLink,children:"Blog"}),(0,C.jsx)(b().Z,{external:!0,href:c()._j.careers,style:j.footerLink,children:"Careers"})]}),(0,C.jsxs)("nav",{style:j.footerNav,children:[(0,C.jsx)("h5",{style:j.footerSectionHeader,children:"Social"}),(0,C.jsx)(b().Z,{external:!0,href:"https://notionup.typeform.com/to/dSurQQp2Q",style:j.footerLink,children:"Developer newsletter"}),(0,C.jsx)(b().Z,{external:!0,href:"http://twitter.com/notionapi",style:j.footerLink,children:"Twitter"})]})]})]})})}const j={footerLink:{color:u().ZP.frontTextMedium,cursor:"pointer",textDecoration:"none",display:"block",marginBottom:4},footerColophon:{gridColumn:"auto/span 3"},footerNav:{gridColumn:"auto/span 2",marginBottom:16},footerLogo:{margin:"0 auto 20px",fontSize:0,display:"block"},footerSectionHeader:{fontFamily:p().F5(l().locale).mono,fontWeight:p().Ue.medium,margin:"0 auto 8px",marginBottom:"1.1em",fontSize:15},footerCopy:{fontSize:15,fontWeight:p().Ue.regular,lineHeight:"1.5em",color:u().ZP.frontTextMedium,margin:"0 auto 8px",marginBottom:"1.1em"},footerContainer:{padding:"70px 30px",alignItems:"flex-start",justifyItems:"flex-start",flex:"1 0 auto",zIndex:999,width:"100%",maxWidth:1160,boxSizing:"border-box",margin:"0 auto",borderTop:`1px solid ${u().ZP.dividerColor}`,display:"grid",gridTemplateColumns:"repeat(12,1fr)",columnGap:16,gap:16},scroller:{height:"100vh",background:u().ZP.frontCreamBackground,padding:"0px 10px"},innerContainer:{margin:"auto",width:914},topBar:{maxWidth:1100,height:60,margin:"0 auto",display:"flex",alignItems:"center",marginTop:13,marginBottom:10,justifyContent:"space-between"},header:{fontWeight:p().Ue.bold,fontFamily:p().F5(l().locale).sans,fontSize:50,color:u().ZP.frontText,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},subtitle:{fontWeight:p().Ue.regular,fontSize:24,color:u().ZP.frontTextMedium,letterSpacing:"0.015em"},button:{display:"inline-flex",color:u().ZP.frontTextMedium,borderRadius:4,padding:6,fontSize:15,width:"fit-content"},buttonContent:{display:"flex",alignItems:"center"},arrowIcon:{width:20,height:20},gridContainer:{display:"grid",gridTemplateColumns:"180px auto",paddingBottom:120,gap:60},leftColumn:{gridColumnStart:1,gridColumnEnd:2},rightColumn:{gridColumnStart:2,gridColumnEnd:3}};function M(){const e=(0,i().O7)();return(0,C.jsx)(S,{className:o().wG0,title:(0,C.jsx)(r()._H,{id:"developerIntegrationNotFound.title.label",defaultMessage:"Not Found"}),subtitle:(0,C.jsx)(r()._H,{id:"developerIntegrationNotFound.subtitle.label",defaultMessage:"This integration doesn't exist."}),onNavigateBack:()=>n().A1(e),icon:(0,s().H)({width:98,height:98}),sideContent:null,children:null})}},820072:(e,t,a)=>{"use strict";a.d(t,{Z:()=>f});var i=a(667294),r=()=>a(142735),n=()=>a(492522),o=()=>a(788860),s=()=>a(568017),l=()=>a(239730),d=()=>a(707513),c=()=>a(628642),u=()=>a(154186),p=()=>a(291198),g=()=>a(708518),m=a(785893);function f(){const e=(0,r().Kw)(c().Z);return(0,m.jsx)(g().Z,{open:e.open,overlayZIndex:n().Wd,onDismiss:()=>{c().Z.reset()},preventHideChildrenWhileOpening:!0,innerStyle:{overflow:"hidden",borderRadius:6,padding:"24px 32px",width:336,fontSize:16,boxShadow:l().n,background:s().ZP.white},render:()=>(0,m.jsx)(h,{...e})})}function h(e){const[t,a]=i.useState(""),[r,n]=i.useState(!1);if(!e.open)return null;const{title:l,message:g,onConfirm:f}=e,h=a=>{const{deleteIntegrationIfConfirmationInputMatch:i}=a;e.isDestructive&&e.deleteMatchText!==t?n(!0):i&&(f(),c().Z.reset())};return(0,m.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,m.jsx)("div",{style:{fontSize:16,fontWeight:d().Ue.semibold},children:l}),(0,m.jsx)("div",{style:{fontSize:14,color:s().ZP.frontTextMedium,margin:"8px 0 16px"},children:g}),e.isDestructive&&(0,m.jsxs)("div",{style:{marginBottom:12},children:[(0,m.jsx)(p().Z,{autoFocus:!0,placeholder:e.deleteMatchText,value:t,onChange:t=>{const i=t.target.value;r&&e.deleteMatchText===i&&n(!1),a(i)},onSubmit:()=>h({deleteIntegrationIfConfirmationInputMatch:!1})}),r&&(0,m.jsx)("div",{style:{marginTop:4,color:s().ZP.frontRed,fontSize:12},children:e.deleteMatchError})]}),(0,m.jsxs)("div",{style:{display:"flex"},children:[(0,m.jsx)(u().Z,{onClick:()=>{c().Z.reset()},style:{...y.button,border:`1px solid ${s().ZP.uiLightBorder}`,marginRight:8,fontSize:15},children:(0,m.jsx)(o()._H,{id:"developerIntegration.confirmationModal.cancelLabel",defaultMessage:"Cancel"})}),(0,m.jsx)(b,{onSubmit:()=>h({deleteIntegrationIfConfirmationInputMatch:!0}),isWarning:e.isDestructive||e.isWarning,confirmationMessage:e.confirmationMessage})]})]})}function b(e){const{onSubmit:t,confirmationMessage:a,isWarning:i}=e;return(0,m.jsx)(u().Z,{onClick:t,style:{...y.button,background:i?s().ZP.frontRedButtonBackground:s().ZP.blue,color:s().ZP.white,fontSize:15},hoveredStyle:{backgroundColor:i?s().ZP.frontRedButtonBackgroundHovered:s().ZP.frontBlueButtonHoveredBackground},pressedStyle:{backgroundColor:i?s().ZP.frontRedButtonBackgroundPressed:s().ZP.frontBlueButtonPressedBackground},children:a})}const y={button:{padding:6,borderRadius:6,flex:1,textAlign:"center"}}},708232:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});a(267602),a(653476),a(241792);var i=a(667294),r=a(785893);function n(){const[e,t]=(0,i.useReducer)(((e,t)=>{switch(t.type){case"push":return[...e.map((e=>({...e,isAnimatingOut:!0}))),{item:t.item,isAnimatingOut:!1}];case"delete":return e.filter((e=>e.item.key!==t.key));case"clear":return e.map((e=>({...e,isAnimatingOut:!0})));default:return e}}),[]);return(0,i.useEffect)((()=>{const e=new(a(435308).default)((()=>a(584989).ZP.state.currentItem),{debugName:"currentItemStore"});let i=null;function r(){const a=e.state;a&&i!==a.key?(t({type:"push",item:a}),i=a.key):a||t({type:"clear"})}return e.addListener(r),()=>{e.removeListener(r)}}),[]),(0,r.jsx)(a(748621).Z,{open:e.length>0,zIndex:201,children:e.map((e=>(0,i.createElement)(s,{...e,key:e.item.key,dispatch:t})))})}const o=i.memo(n),s=i.memo((function(e){let{dispatch:t,isAnimatingOut:n,item:o}=e;const s=(0,a(846550).Fg)(),l=(0,a(894787).k)(),d=(0,i.useCallback)((()=>{t({type:"delete",key:o.key})}),[t,o.key]),c=(0,i.useRef)(n);(0,i.useEffect)((()=>{if(!c.current&&n){const e=setTimeout(d,270);return()=>{d(),clearTimeout(e)}}c.current=n}),[n,d]);const u=o.position??"bottom",p="top"===u?{top:24}:{bottom:l};return(0,r.jsx)("div",{style:{...p,position:"fixed",left:0,width:"100%",display:"flex",zIndex:a(492522).E,padding:4,pointerEvents:"none"},children:(0,r.jsxs)("div",{"aria-live":"polite",style:{background:s.tooltipBackground,color:s.regularInvertedTextColor,borderRadius:8,padding:"11px 16px",boxShadow:s.largeBoxShadow,margin:"0 auto",fontSize:14,display:"flex",alignItems:"center",pointerEvents:"auto",...o.style,animationName:`snackbar-slide-in-${u}`,animationDuration:"270ms",animationTimingFunction:"ease",transitionProperty:"transform, opacity",transitionDuration:"270ms",transitionTimingFunction:"ease",transform:n?"scale(0.95)":"scale(1)",opacity:n?0:1},onTransitionEnd:n?d:void 0,children:[o.label,o.helpUrl&&(0,r.jsx)(a(729775).Z,{href:o.helpUrl,external:!0,style:{marginLeft:8,width:16,height:16,color:s.regularInvertedTextColor},children:(0,a(653457).m)({fill:s.mediumInvertedTextColor})}),(0,r.jsx)("div",{style:{marginLeft:4,marginRight:-4},children:o.right})]})})}))},817870:(e,t,a)=>{"use strict";a.d(t,{C:()=>o,g:()=>s});a(821057);var i=a(667294),r=a(785893);const n=i.createContext(void 0);function o(e){return(0,r.jsx)(n.Provider,{value:e.value,children:e.children})}function s(){const e=i.useContext(n);if(!e)throw new Error("useChartStore must be used within a ChartContextProvider");return e}n.displayName="ChartContext"},568650:(e,t,a)=>{"use strict";a.r(t),a.d(t,{CreatorProfile:()=>Dg});var i=a(667294),r=()=>a(219727),n=()=>a(142735),o=()=>a(846550),s=()=>a(714230),l=()=>a(801812),d=()=>a(788860),c=()=>a(568017),u=()=>a(842574),p=()=>a(837600),g=()=>a(708232),m=()=>a(673893),f=()=>a(604258),h=()=>a(520849),b=()=>a(876822),y=(a(821057),a(267602),a(653476),()=>a(578292)),v=()=>a(102892),x=()=>a(824462),_=()=>a(308186),w=()=>a(207874),C=()=>a(102182),S=()=>a(594546),j=()=>a(92175),M=()=>a(518530),k=a(785893);function I(e){const{children:t}=e,a=(0,o().yK)((()=>({wrapperContainer:{fontSize:15}})),[]);return(0,k.jsx)("span",{style:a.wrapperContainer,children:t})}function T(e){const{children:t}=e,a=(0,o().yK)((()=>({actionWrapperContainer:{display:"flex",alignItems:"center",gap:2,marginLeft:20}})),[]);return(0,k.jsx)("div",{style:a.actionWrapperContainer,children:t})}function P(e){const t=(0,o().yK)((()=>({actionButton:{color:"rgba(153, 153, 153, 1)",fontWeight:500,height:void 0,marginLeft:0,fontSize:15,padding:"3px 8px"},actionButtonHovered:{background:"rgba(255, 255, 255, 0.125)",borderRadius:"4px",color:"rgba(230, 230, 230, 1)"},actionButtonPressed:{background:"rgba(255, 255, 255, 0.125)",borderRadius:"4px",color:"rgba(191, 191, 191, 1)"}})),[]),{buttonLabel:a,onClick:i,onClose:r}=e;return(0,k.jsxs)(T,{children:[(0,k.jsx)(j().Z,{onClick:i,style:t.actionButton,hoveredStyle:t.actionButtonHovered,pressedStyle:t.actionButtonPressed,children:a}),(0,k.jsx)(D,{onClose:r})]})}function D(e){const{onClose:t}=e,a=(0,o().yK)((e=>({closeIconContainer:{padding:4,color:"rgba(153, 153, 153, 1)"},closeIconContainerHovered:{background:"rgba(255, 255, 255, 0.125)",borderRadius:"4px",color:"rgba(230, 230, 230, 1)"},closeIconContainerPressed:{background:"rgba(255, 255, 255, 0.125)",borderRadius:"4px",color:"rgba(191, 191, 191, 1)"},closeIcon:{width:20,height:20}})),[]);return(0,k.jsx)(j().Z,{onClick:()=>{C().rN(),null==t||t()},style:a.closeIconContainer,hoveredStyle:a.closeIconContainerHovered,pressedStyle:a.closeIconContainerPressed,children:(0,M().U)(a.closeIcon)})}var L=()=>a(707513);function E(){return(0,k.jsx)(I,{children:(0,k.jsx)(d()._H,{id:"creatorProfile.templates.pin.error.tooManyPinnedTemplates",defaultMessage:"No more than {maxPinnedTemplateCount} can be pinned.",values:{maxPinnedTemplateCount:v().zq}})})}function R(e){const{templateName:t}=e,a=F();return(0,k.jsx)(I,{children:(0,k.jsx)(d()._H,{id:"creatorProfile.templates.pin.success",defaultMessage:"<bold>{templateName}</bold> has been pinned.",values:{templateName:t||"Template",bold:e=>(0,k.jsx)("span",{style:t?a.templateNameBold:{},children:e})}})})}function U(e){const{templateName:t}=e,a=F();return(0,k.jsx)(I,{children:(0,k.jsx)(d()._H,{id:"creatorProfile.templates.unpin.success",defaultMessage:"<bold>{templateName}</bold> has been unpinned.",values:{bold:e=>(0,k.jsx)("span",{style:t?a.templateNameBold:{},children:e}),templateName:t||"Template"}})})}function B(e){const{templateName:t}=e,a=F();return(0,k.jsx)(I,{children:(0,k.jsx)(d()._H,{id:"creatorProfile.templates.pin.error",defaultMessage:"Failed to pin <bold>{templateName}</bold>.",values:{bold:e=>(0,k.jsx)("span",{style:t?a.templateNameBold:{},children:e}),templateName:t||"template"}})})}function H(e){const{templateName:t}=e,a=F();return(0,k.jsx)(I,{children:(0,k.jsx)(d()._H,{id:"creatorProfile.templates.unpin.error",defaultMessage:"Failed to unpin <bold>{templateName}</bold>.",values:{bold:e=>(0,k.jsx)("span",{style:t?a.templateNameBold:{},children:e}),templateName:t||"template"}})})}function F(){return(0,o().yK)((()=>({templateNameBold:{fontWeight:L().Ue.semibold}})),[])}a(670560),a(228244);var Z=()=>a(550471),A=()=>a(18610),V=()=>a(696459),N=()=>a(411187),z=()=>a(527278);const O=(0,d().vU)({publicIntegrationLabel:{id:"creatorProfile.integrationSubmission.publicIntegrationLabel",defaultMessage:"Public"},internalIntegrationLabel:{id:"creatorProfile.integrationSubmission.internalIntegrationLabel",defaultMessage:"Internal"},integrationTypeLabel:{id:"creatorProfile.integrationSubmission.integrationType.label",defaultMessage:"Type"},integrationLogoLabel:{id:"creatorProfile.integrationSubmission.integrationLogo.label",defaultMessage:"Logo"},spaceLabel:{id:"creatorProfile.integrationSubmission.space.label",defaultMessage:"Associated workspace"},spaceSubtitle:{id:"creatorProfile.integrationSubmission.space.subtitle",defaultMessage:"Select a workspace to install the integration to. Workspace owners will be able to manage the integration as well. You can upgrade the integration to use OAuth later"},websiteUrlTypeLabel:{id:"creatorProfile.integrationSubmission.websiteUrlType.label",defaultMessage:"Website"},privacyPolicyTypeLabel:{id:"creatorProfile.integrationSubmission.privacyPolicyType.label",defaultMessage:"Privacy Policy URL"},privacyPolicyTypeSubtitle:{id:"creatorProfile.integrationSubmission.privacyPolicyType.subtitle",defaultMessage:"Used to link to your integration’s privacy policy in your integration page and authentication screens"},developerNameLabel:{id:"creatorProfile.integrationSubmission.developerName.label",defaultMessage:"Company name"},termsOfUseTypeLabel:{id:"creatorProfile.integrationSubmission.termsOfUseType.label",defaultMessage:"Terms of Use URL"},termsOfUseTypeSubtitle:{id:"creatorProfile.integrationSubmission.termsOfUseType.subtitle",defaultMessage:"Used to link to your integration’s terms of use in your integration page and authentication screens"},emailLabel:{id:"creatorProfile.integrationSubmission.email.label",defaultMessage:"Email"},emailSubtitle:{id:"creatorProfile.integrationSubmission.email.subtitle",defaultMessage:"Enter the email address of the integration's developer"},oauthSectionHeader:{id:"creatorProfile.integrationSubmission.oauthSectionHeader",defaultMessage:"OAuth domains & URIs"},redirectUrisTypeLabel:{id:"creatorProfile.integrationSubmission.redirectUrisType.label",defaultMessage:"Redirect URIs"},redirectUrisTypeSubtitle:{id:"creatorProfile.integrationSubmission.redirectUrisType.subtitle",defaultMessage:"In the Notion OAuth flow, users will be redirected to this path after they have authenticated with Notion. The path will be appended with the authorization code for access and must have a protocol. It can’t contain URL fragments, relative paths or wildcards, and can’t be a public IP address. It must also be included in the token request."},taglineTypeLabel:{id:"creatorProfile.integrationSubmission.taglineType.label",defaultMessage:"Tagline"},templateUrlTypeLabel:{id:"creatorProfile.integrationSubmission.templateUrlType.label",defaultMessage:"Notion URL for optional template"},templateUrlTypeSubtitle:{id:"creatorProfile.integrationSubmission.templateUrlType.subtitle",defaultMessage:"Use this field if you'd like to offer a user a Notion page to duplicate into their workspace during OAuth. URL must be to a public Notion page."},tokenTypeLabel:{id:"creatorProfile.integrationSubmission.tokenType.label",defaultMessage:"Internal Integration Secret"},capabilitiesTypeHeader:{id:"creatorProfile.integrationSubmission.capabilitiesType.header",defaultMessage:"Capabilities"},unfurlUrlLabel:{id:"creatorProfile.integrationSubmission.unfurlUrl.label",defaultMessage:"Unfurl Callback URL"},unfurlUrlCaption:{id:"creatorProfile.integrationSubmission.unfurlUrl.caption",defaultMessage:"Called with a POST request when an unfurl action occurs and with a DELETE request when unfurl url preview(s) or mention(s) is deleted"},unfurlUrlSectionHeader:{id:"creatorProfile.integrationSubmission.unfurlUrl.header",defaultMessage:"Unfurling domain & patterns"},domainLabel:{id:"creatorProfile.integrationSubmission.domain.label",defaultMessage:"Unfurl Url Domain"},urlMatchingAndPlaceholderLabel:{id:"creatorProfile.integrationSubmission.urlmatching.label",defaultMessage:"URL matching and placeholder"},urlMatchingAndPlaceholderCaption:{id:"creatorProfile.integrationSubmission.urlmatching.caption",defaultMessage:"When users paste a URL that matches this pattern on your verified domain, they'll have the option to unfurl it as a preview. Any sample URLs are validated against provided patterns"},externalOauthAuthorizeUrlLabel:{id:"creatorProfile.integrationSubmission.externalOauthAuthorizeUrl.label",defaultMessage:"OAuth Authorize URL"},externalOauthAuthorizeUrlCaption:{id:"creatorProfile.integrationSubmission.externalOauthAuthorizeUrl.caption",defaultMessage:"Used by Notion to initiate user authorization with the integration"},externalOauthTokenUrlLabel:{id:"creatorProfile.integrationSubmission.externalOauthTokenUrl.label",defaultMessage:"OAuth Token URL"},externalOauthTokenUrlCaption:{id:"creatorProfile.integrationSubmission.externalOauthTokenUrl.caption",defaultMessage:"Called by Notion to retrieve an access token for the unfurl callback URL"},externalOauthScopesLabel:{id:"creatorProfile.integrationSubmission.externalOauthScopes.label",defaultMessage:"OAuth Scopes"},externalOauthScopesCaption:{id:"creatorProfile.integrationSubmission.externalOauthScopes.caption",defaultMessage:"Optional scopes string"},externalDeletionUrlLabel:{id:"creatorProfile.integrationSubmission.externalDeletionUrl.label",defaultMessage:"Deleted Token Callback URL "},externalDeletionUrlCaption:{id:"creatorProfile.integrationSubmission.externalDeletionUrl.caption",defaultMessage:"Called by Notion when a user removes your integration"},externalClientIdLabel:{id:"creatorProfile.integrationSubmission.externalClientId.label",defaultMessage:"OAuth Client ID"},externalClientSecretLabel:{id:"creatorProfile.integrationSubmission.externalClientSecret.label",defaultMessage:"OAuth Client Secret"},externalOauthSectionTitle:{id:"creatorProfile.integrationSubmission.externalOauthSectionTitle",defaultMessage:"External authorization setup"},externalOauthSectionSubtitle:{id:"creatorProfile.integrationSubmission.externalOauthSectionSubtitle",defaultMessage:"See Notion 2.0 documentation for information on OAuth 2.0"},unfurlingSectionTitle:{id:"creatorProfile.integrationSubmission.unfurlingSectionTitle",defaultMessage:"Unfurling domain & patterns"},unfurlingSwitcherLabel:{id:"creatorProfile.integrationSubmission.unfurlingSwitcherLabel",defaultMessage:"Enable link preview"},authorizationUrlLabel:{id:"creatorProfile.integrationSubmission.authorizationUrlLabel",defaultMessage:"Authorization URL"},disallowedWordError:{id:"creatorProfile.integrationSubmission.errorMessages.disallowedWordError",defaultMessage:'{field} cannot contain the word "{word}"'}}),K=(0,d().vU)({nameIsTakenError:{id:"creatorProfile.integrationPublishRequest.errorMessages.nameIsTakenError",defaultMessage:"This integration name has already been used. Please try another one."},previewImages:{id:"creatorProfile.integrationPublishRequest.previewImages.label",defaultMessage:"Preview images"},description:{id:"creatorProfile.integrationPublishRequest.description.label",defaultMessage:"Description"},descriptionPlaceholder:{id:"creatorProfile.integrationPublishRequest.description.placeholder",defaultMessage:"Explain how your integration works"},howToUse:{id:"creatorProfile.integrationPublishRequest.howToUse.label",defaultMessage:"How to use"},howToUsePlaceholder:{id:"creatorProfile.integrationPublishRequest.howToUse.placeholder",defaultMessage:"1. In clear numbered steps, describe how to use your integration"},addToNotion:{id:"creatorProfile.integrationPublishRequest.addToNotion.label",defaultMessage:"Installation URL"},slug:{id:"creatorProfile.integrationPublishRequest.slug.label",defaultMessage:"Slug"},slugPlaceholder:{id:"creatorProfile.integrationPublishRequest.slug.placeholder",defaultMessage:"Optional custom slug"},categoryLabel:{id:"creatorProfile.integrationPublishRequest.category.label",defaultMessage:"Category"},featureLabel:{id:"creatorProfile.integrationPublishRequest.feature.label",defaultMessage:"Feature"},requiredFieldError:{id:"creatorProfile.integrationPublishRequest.errorMessages.requiredFieldError",defaultMessage:"{name} is required"},submitError:{id:"creatorProfile.integrationPublishRequest.errorMessages.submitError",defaultMessage:"There was an error submitting the integration for publishing"},previewImagesRequiredError:{id:"creatorProfile.integrationPublishRequest.errorMessages.previewImagesError",defaultMessage:"At least one preview image is required"},maxCategoriesError:{id:"creatorProfile.integrationPublishRequest.errorMessages.maxCategoriesError",defaultMessage:"You can only select up to 3 categories"},nameContainsIntegrationError:{id:"creatorProfile.integrationPublishRequest.errorMessages.nameContainsIntegrationError",defaultMessage:"Integration name must not contain the word 'Integration'"},invalidUrlError:{id:"creatorProfile.integrationPublishRequest.errorMessages.invalidUrlError",defaultMessage:"Invalid URL"},maxFeaturesError:{id:"creatorProfile.integrationPublishRequest.errorMessages.maxFeaturesError",defaultMessage:"You can only select up to 3 features"},howToUseTooLongError:{id:"creatorProfile.integrationPublishRequest.errorMessages.howToUseTooLongError",defaultMessage:"How to use is too long"},descriptionTooLongError:{id:"creatorProfile.integrationPublishRequest.errorMessages.descriptionTooLongError",defaultMessage:"Description is too long"},notCreator:{id:"creatorProfile.integrationPublishRequest.errorMessages.notCreator",defaultMessage:"You are not the creator of this integration. Only the creator can publish this integration"},featuresMismatchError:{id:"creatorProfile.integrationPublishRequest.errorMessages.featuresMismatchError",defaultMessage:'The selected features: "{features}" do not match integration capabilities'},integrationError:{id:"creatorProfile.integrationPublishRequest.errorMessages.integrationError",defaultMessage:"There is an error in the integration Configuration and/or Basic information."}}),q=(0,d().vU)({slugIsEmptyError:{id:"creatorProfile.integrationPublishRequest.errorMessages.slugIsEmptyError",defaultMessage:"Slug cannot be empty"},slugTooLongError:{id:"creatorProfile.integrationPublishRequest.errorMessages.slugTooLongError",defaultMessage:"Slug is too long"},slugCharactersError:{id:"creatorProfile.integrationPublishRequest.errorMessages.slugCharactersError",defaultMessage:"Slug can only contain lowercase letters, numbers, and hyphens"},slugHyphenError:{id:"creatorProfile.integrationPublishRequest.errorMessages.slugHyphenError",defaultMessage:"Slug cannot contain consecutive hyphens."},slugIsTakenError:{id:"creatorProfile.integrationPublishRequest.errorMessages.slugIsTakenError",defaultMessage:"This integration slug has already been used. Please try another one."}});function W(e){if(!e)return;const t=JSON.parse(e);return"document"===t.nodeType&&"text"===t.content[0].content[0].nodeType?t.content[0].content[0].value:void 0}function G(e){try{const t=e.get("locale");return t&&A().uI.some((e=>e===t))?t:void 0}catch(t){return}}function $(e){const[t,a,i,r,n,o]=(null==e?void 0:e.split("/"))||[],s=function(e){if("draft"===e)return"draft";if("published"===e)return"published";if("new"===e)return"new";throw new Error("Bad form type provided")}(n);return"new"===s?{type:s,id:void 0,contentfulId:o}:"draft"===s||"published"===s?{type:s,id:o}:void(0,V().t1)(s)}function Y(e){const{setFormData:t,formData:a,formFields:i,formStateType:r,templateStore:n,actorEmail:o}=e,s=(0,N().m0)({formData:a,setFormData:t,formStateType:r,currentFieldNames:i,formFieldValidationSchema:re}),l=(0,N().Z6)({formData:a,setFormData:t,formStateType:r,templateStore:n,currentFieldNames:i,formFieldValidationSchema:re}),d=function(e){const{name:t,actorEmail:a,setFormData:i,companyName:r}=e;let n=!0;if((0,Z().DI)(a))return n;for(const o of v().kz)t&&t.toLowerCase().includes(o)&&(i({field:"name",error:z().Z.formatMessage(O.disallowedWordError,{field:"Name",word:o})}),n=!1),r&&r.toLowerCase().includes(o)&&(i({field:"developer_name",error:z().Z.formatMessage(O.disallowedWordError,{field:"Company Name",word:o})}),n=!1);return n}({name:a.name.value,actorEmail:o,companyName:a.developer_name.value,setFormData:t});return l.length>0||(null==s?void 0:s.length)>0||!d||(0,N().tm)({formData:a,formStateType:r,currentFieldNames:i,formFieldValidationSchema:re})}function X(e,t){return"approved"===e?"published":"pending"===e&&null!=t&&t.id?"published_in_review":"rejected"===e&&null!=t&&t.id?"published_rejected":"rejected"===e?"rejected":"in_review"}const J=["icon","external_oauth_authorize_url","external_oauth_token_url","external_client_id","external_client_secret","external_oauth_scopes","external_deletion_url"],Q=["unfurl_url","domain","url_matching_and_placeholder"],ee=["update-third-party-external-integration","update-first-party-external-integration"],te=["update-third-party-external-integration","update-compliance-integration","update-first-party-external-integration","create-third-party-external-integration","create-compliance-integration"],ae=["update-third-party-external-integration","update-first-party-external-integration","create-third-party-external-integration","create-first-party-external-integration"],ie=["create-bot","update-bot","create-guest-integration","create-third-party-external-integration","update-compliance-integration"],re={type:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1},requiredBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},name:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},icon:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},space:{supportedBy:{"create-bot":!0,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1},requiredBy:{"create-bot":!0,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},capabilities:{supportedBy:{"create-bot":!1,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},token:{supportedBy:{"create-bot":!1,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},client_id:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!0,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},client_secret:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!0,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},authorization_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!0,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},redirect_uris:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},template_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},developer_name:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},website_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},tagline:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},privacy_policy_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},terms_of_use_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},email:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},unfurl_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},domain:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!1}},url_matching_and_placeholder:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!1}},external_oauth_authorize_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},external_oauth_token_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},external_oauth_scopes:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},external_client_id:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},external_client_secret:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},external_deletion_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!0}}};function ne(e,t){return t&&void 0!==e&&"published"!==e?`published_${e}`:e}var oe=()=>a(167987);const se=20;function le(e){const{creatorId:t,orderBy:a,paid:i}=e;return`${t}::${a}::${i}`}async function de(e){var t;const{environment:a,locale:i,creatorId:r,includeLocalizedTemplates:n}=e,{page:o,orderBy:s="recent",paid:l="all"}=oe().default.state.publishedTemplateSearchArgs,d=le({creatorId:r,orderBy:s,paid:l}),c=oe().default.state.publishedTemplatesSearch;if(null!=c&&null!==(t=c[d])&&void 0!==t&&null!==(t=t.templates)&&void 0!==t&&t[o-1])return!0;const u=await x().callApi({eventName:"getCreatorTemplates",environment:a,data:{offset:se*(o-1),limit:se,locale:(0,y().E2)(i),orderBy:s,filterBy:{paid:"all"===l?void 0:l},includeLocalizedTemplates:n}});if("success"===u.type){const e=u.data.templateIds,t=u.data.templateGroupsByContentfulId,a=u.data.count||0;if(c[d]){const i=c[d];return oe().default.setState({...oe().default.state,publishedTemplatesSearch:{...oe().default.state.publishedTemplatesSearch,[d]:{count:a,templates:[...i.templates,e],templateGroupsByContentfulId:{...i.templateGroupsByContentfulId,...t||{}}}}}),!0}return oe().default.setState({...oe().default.state,publishedTemplatesSearch:{...c,[d]:{count:a,templates:[e],templateGroupsByContentfulId:t||{}}}}),!0}return!1}async function ce(e){const{templateId:t,environment:a,type:i,templateName:r,isUndo:n,creatorId:o}=e;try{const e=oe().default.state.pinnedTemplates,s="pin"===i?[...e,t]:e.filter((e=>e!==t));if(s.length>v().zq)return C().oV({label:(0,k.jsx)(E,{})}),!1;if("success"===(await x().callApi({eventName:"updatePinnedTemplates",environment:a,data:{templateIds:s}})).type){oe().default.setState({...oe().default.state,pinnedTemplates:s});const e="pin"===i?"creator_profile_template_pin":"creator_profile_template_unpin";return S().K4(a,e),n||C().oV({label:"pin"===i?(0,k.jsx)(R,{templateName:r}):(0,k.jsx)(U,{templateName:r}),right:(0,k.jsx)(P,{buttonLabel:(0,k.jsx)(d()._H,{id:"creatorProfile.templates.pin.unpin.undo",defaultMessage:"Undo"}),onClick:async()=>{w().Yw(a,!0),C().rN();await ce({environment:a,templateId:t,templateName:r,creatorId:o,isUndo:!0,type:"pin"===i?"unpin":"pin"})&&C().oV({label:"pin"===i?(0,k.jsx)(U,{templateName:r}):(0,k.jsx)(R,{templateName:r}),right:(0,k.jsx)(T,{children:(0,k.jsx)(D,{})})})}})}),!0}throw new Error}catch(s){return C().oV({label:"pin"===i?(0,k.jsx)(B,{templateName:r}):(0,k.jsx)(H,{templateName:r}),right:(0,k.jsx)(P,{buttonLabel:(0,k.jsx)(d()._H,{id:"creatorProfile.templates.pin.unpin.error.retry",defaultMessage:"Retry"}),onClick:async()=>{C().rN(),await ce({environment:a,templateId:t,templateName:r,creatorId:o,isUndo:n,type:i})}})}),!1}}async function ue(e){const{environment:t,id:a}=e,i=await x().callApi({eventName:"deleteTemplateDraft",environment:t,data:{templateDraftId:a}});return"success"===i.type?(S().K4(t,"creator_profile_template_delete_draft"),oe().default.setState({...oe().default.state,draftTemplates:{}}),!0):(_().x2(i),!1)}async function pe(e){const{environment:t,id:a}=e,i=await x().callApi({eventName:"deleteTemplate",environment:t,data:{templateId:a}});return"success"===i.type?(S().K4(t,"creator_profile_template_delete"),!0):(_().x2(i),!1)}async function ge(e,t){if(!t.startsWith("/profile/templates/form/"))return!0;const{type:a,id:i}=$(t);if("new"===a)return!0;const r=await x().callApi({eventName:"validateActorOwnsTemplate",environment:e,data:{type:a,id:i}});return"success"===r.type&&r.data.actorOwnsTemplate}var me=()=>a(915222);var fe=()=>a(767021),he=()=>a(111300),be=(a(470928),a(241792),()=>a(624563)),ye=()=>a(154186),ve=()=>a(448419),xe=()=>a(198829),_e=()=>a(18748),we=()=>a(603692),Ce=()=>a(396439),Se=()=>a(352230),je=()=>a(263184);class Me extends je().default{getInitialState(){return{profileFormType:null}}}const ke=new Me;var Ie=()=>a(779300);function Te(e){const{showCreatorProfileForm:t,header:a,description:i,subdescription:r}=e,n=(0,o().yK)((e=>({container:{display:"flex",flexDirection:"column",alignItems:"space-between",gap:24,flexWrap:"wrap"},topContainer:{display:"flex",flexDirection:"column",gap:4},sidebarHeader:{fontSize:18,fontWeight:L().Ue.semibold,color:e.regularTextColor},sidebarDescription:{fontSize:14,color:e.lightTextColor,fontWeight:L().Ue.regular},createButtonColor:{background:e.white}})),[]);return(0,k.jsxs)("div",{style:n.container,children:[(0,k.jsxs)("div",{style:n.topContainer,children:[a,i,r]}),(0,k.jsx)("div",{children:(0,k.jsx)(Ie().h,{onClick:t,children:(0,k.jsx)(d()._H,{id:"creatorProfileEmptyState.template.button.createProfile",defaultMessage:"Create a Profile"})})})]})}const Pe=Te;var De=()=>a(539245);function Le(e){let{tabs:t,style:a,defaultSelectedIndex:r=0}=e;const n=(0,o().yK)((()=>({menuItem:{paddingLeft:0,marginTop:"20px",marginBottom:"48px"},selectedTabTitleStyle:{fontWeight:L().Ue.semibold}})),[]),[s,l]=(0,i.useState)(r);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(De().Z,{tabs:t.map((e=>e.title)),selectedIndex:s,onChange:e=>{var a,i;l(e),null===(a=(i=t[e]).onChange)||void 0===a||a.call(i)},style:{...n.menuItem,...a},selectedTabTitleStyle:n.selectedTabTitleStyle}),t[s].content]})}var Ee=()=>a(386509),Re=(a(398858),a(461318),a(33228),()=>a(572680)),Ue=()=>a(497065),Be=()=>a(205228),He=()=>a(827282);const Fe=(0,He().IU)("bookOpen",{viewBox:"0 0 20 20",svg:(0,k.jsx)("path",{d:"M9.375 6.25v10.625H7.812l-.59-1.184C6.984 15.219 6.634 15 6.103 15H1.875V3.75h5c1.544 0 2.5.956 2.5 2.5zm3.75-2.5c-1.544 0-2.5.956-2.5 2.5v10.625h1.563l.59-1.184c.238-.472.588-.691 1.119-.691h4.228V3.75h-5z"})});var Ze=()=>a(431685);function Ae(e){const{children:t}=e,a=(0,o().yK)((()=>({creatorProfileNavTabWrapperContainer:{display:"flex",gap:"6px",alignItems:"center",fontSize:"15px"}})),[]);return(0,k.jsx)("span",{style:a.creatorProfileNavTabWrapperContainer,children:t})}const Ve=["creatorProfile","creatorProfileTemplates","creatorProfileIntegrations","creatorProfileAnalytics","creatorProfileCoupons","creatorProfileLearn"],Ne={creatorProfile:{index:Ve.indexOf("creatorProfile"),route:"/profile",tabLabel:(0,k.jsxs)(Ae,{children:[(0,a(589515).v)({height:16,width:16}),(0,k.jsx)(d()._H,{defaultMessage:"Profile",id:"creatorProfile.tabs.header.profile"})]},"profile")},creatorProfileTemplates:{index:Ve.indexOf("creatorProfileTemplates"),route:"/profile/templates",tabLabel:(0,k.jsxs)(Ae,{children:[(0,a(768927).s)({height:16,width:16}),(0,k.jsx)(d()._H,{defaultMessage:"Templates",id:"creatorProfile.tabs.header.templates"})]},"templates")},creatorProfileIntegrations:{index:Ve.indexOf("creatorProfileIntegrations"),route:"/profile/integrations",tabLabel:(0,k.jsxs)(Ae,{children:[(0,a(941700).T)({height:16,width:16}),(0,k.jsx)(d()._H,{defaultMessage:"Integrations",id:"creatorProfile.tabs.header.integrations"})]},"integrations")},creatorProfileAnalytics:{index:Ve.indexOf("creatorProfileAnalytics"),route:"/profile/analytics",tabLabel:(0,k.jsxs)(Ae,{children:[(0,a(483004).B)({height:16,width:16}),(0,k.jsx)(d()._H,{defaultMessage:"Analytics",id:"creatorProfile.tabs.header.analytics"})]},"analytics")},creatorProfileLearn:{index:Ve.indexOf("creatorProfileLearn"),route:"https://www.notion.com/help/notion-academy/course/templates-and-marketplace",tabLabel:(0,k.jsxs)(Ae,{children:[Fe({height:16,width:16}),(0,k.jsx)(d()._H,{defaultMessage:"Learn",id:"creatorProfile.tabs.header.learn"})]},"learn")},creatorProfileCoupons:{index:Ve.indexOf("creatorProfileCoupons"),route:"/profile/coupons",tabLabel:(0,k.jsxs)(Ae,{children:[(0,Ze().T)({height:16,width:16}),(0,k.jsx)(d()._H,{defaultMessage:"Coupons",id:"creatorProfile.tabs.header.coupons"})]},"coupons")}},ze=["/profile","/profile/templates","/profile/templates/faq","/profile/templates/form/new","/profile/templates/form/new/","/profile/templates/form/published/","/profile/templates/form/draft/","/profile/integrations","/profile/integrations/form/new-integration","/profile/integrations/public/","/profile/integrations/internal/","/profile/analytics","/profile/coupons","/profile/coupons/new-coupon","/profile/coupons/edit/"];function Oe(e,t){return`/profile/templates/form/${e}/${t}`}const Ke={hideTabBorder:!0,tabBorderStyle:{borderWidth:0},style:{flexDirection:"column",boxShadow:"none"}};function qe(e){const{handleChange:t,activeIndex:a,isVertical:r}=e,n=(0,o().yK)((()=>({navTab:{fontWeight:L().Ue.medium,color:c().ZP.frontTextLight,paddingBottom:0,paddingTop:"4px"},tabTitle:{color:"inherit"},selectedTab:{color:c().ZP.frontText}})),[]),s=(0,i.useMemo)((()=>Ve.map((e=>Ne[e].tabLabel))),[]);return(0,k.jsx)(De().Z,{tabs:s,selectedIndex:a,onChange:e=>{const i=Ve[e],r=Ne[i];"creatorProfileLearn"!==i?(a!==e&&"creatorProfile"===i&&ke.reset(),t(r.route)):window.open(r.route,"_blank","noopener,noreferrer")},tabTitleStyle:n.tabTitle,tabStyle:n.navTab,selectedTabStyle:n.selectedTab,...r?Ke:{}})}const We=(0,i.createContext)({onBeforeViewChange:{current:null},name:void 0,setView:()=>{},searchParams:new URLSearchParams});function Ge(){const e=i.useContext(We);if(void 0===e)throw new Error("useCreatorProfileNavContext must be used within CreatorProfileNav");return e}function $e(e){const{children:t}=e,a=(0,r().O7)(),i=window.location.search,o=new URLSearchParams(i);(0,n().Kw)(a.RouterStore);const s=window.location.pathname.endsWith("/")?window.location.pathname.slice(0,window.location.pathname.length-1):window.location.pathname,l=(0,Re().parseRoute)({url:window.location.href,isMobile:a.device.isMobile,baseUrl:Be().default.domainBaseUrl,publicDomainName:Be().default.publicDomainName,protocol:Be().default.protocol,currentUrl:window.location.href}).name;return(0,V().qg)(Ne,l)&&function(e){for(const t of ze){if(e===t)return!0;if(e.includes("/profile/templates/form/published/")||e.includes("/profile/templates/form/new/")||e.includes("/profile/templates/form/draft/")||e.includes("/profile/integrations/public/")||e.includes("/profile/integrations/internal/")||e.includes("/profile/coupons/new-coupon")||e.includes("/profile/coupons/edit/"))return!0}return!1}(s)?(0,k.jsx)(Ye,{name:l,path:s,searchParams:o,children:t}):null}function Ye(e){const{name:t,children:a,path:n,searchParams:s}=e,{isMobileWidth:l,isLowResolutionTabletWidth:d}=(0,m().EQ)(),c=(0,o().yK)((()=>({navContainerLarge:{display:"flex",justifyContent:"space-between"},navMenuLarge:{width:"160px",marginRight:"24px",marginLeft:"24px"},pageLargeLayout:{width:"66vw",margin:"0 auto"},navContainerSmall:{display:"flex",flexDirection:"column",marginBottom:"32px"},navMenuSmall:{width:"100%"},pageSmallLayout:{margin:"0 24px"},navMenuLargeFixedContainer:{position:"fixed",top:"106px"}})),[]),u=(0,r().O7)(),p=(0,i.useRef)(null),g=(0,i.useCallback)((async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=!0;if(p.current&&!t)try{await p.current()}catch(i){if(!(i instanceof Error&&"abandon_route"===i.message))throw i;a=!1}a&&Ue().c4({environment:u,url:e})}),[u]),f=Ne[t].index,h=l||d;return(0,k.jsx)(We.Provider,{value:{name:n,onBeforeViewChange:p,setView:g,searchParams:s},children:(0,k.jsxs)("section",{style:h?c.navContainerSmall:c.navContainerLarge,children:[(0,k.jsx)("section",{style:h?c.navContainerSmall:c.navMenuLarge,children:h?(0,k.jsx)(qe,{activeIndex:f,handleChange:g,isVertical:!h}):(0,k.jsx)("div",{style:c.navMenuLargeFixedContainer,children:(0,k.jsx)(qe,{activeIndex:f,handleChange:g,isVertical:!h})})}),(0,k.jsx)("section",{style:h?c.pageSmallLayout:c.pageLargeLayout,children:a})]})})}We.displayName="CreatorProfileNavContext";var Xe=()=>a(112566),Je=()=>a(114079),Qe=()=>a(358281),et=()=>a(965105),tt=()=>a(817870),at=()=>a(619384),it=()=>a(827973),rt=()=>a(661641),nt=()=>a(397540);const ot=["web","app"],st=["1d","7d","28d","total"],lt=["all","paid","free"];function dt(){const{isFeatureEnabled:e}=(0,Xe().o)("marketplace_analytics_filters"),[t,a]=(0,i.useState)({dateRange:"7d",sources:["web","app"],paid:["paid","free"],templateListingId:void 0});(0,i.useEffect)((()=>{e&&a((e=>({...e,dateRange:"28d"})))}),[e]);return{filtersConfig:t,onDateRangeChange:e=>{a({...t,dateRange:e})},onSourceChange:e=>{const{sources:i}=t;if(i.includes(e)&&i.length<=1)return;const r=[...i];r.includes(e)?r.splice(r.indexOf(e),1):r.push(e),a({...t,sources:r})},onPaidChange:e=>{a("all"!==e?{...t,paid:[e]}:{...t,paid:["paid","free"]})},onTemplateListingIdChange:e=>{t.templateListingId!==e?a({...t,templateListingId:e}):a({...t,templateListingId:void 0})}}}function ct(e){const{onDateRangeChange:t,dateRange:a}=e,i=(0,o().yK)((()=>({filtersButton:{display:"flex",alignItems:"center",gap:5}})),[]),r={onSelect:e=>{t(e)},items:st,renderOrigin:e=>(0,k.jsxs)(j().Z,{...e,style:i.filtersButton,children:[(0,k.jsx)(rt().q,{styleName:"UIRegular-14px/Semibold",colorName:"primary",children:ut[a]}),(0,k.jsx)(we().y,{iconGroup:be().m,variantName:"mini",colorName:"secondary"})]}),getKey:e=>e,renderItem:e=>(0,k.jsx)(it().Z,{...e,title:ut[e.value]}),selectedItem:a};return(0,k.jsx)(nt().Z,{...r})}const ut={"1d":(0,k.jsx)(d()._H,{id:"creatorProfile.analytics.dateRange.filter.1day.label",defaultMessage:"1 day ago"}),"7d":(0,k.jsx)(d()._H,{id:"creatorProfile.analytics.dateRange.filter.7days.label",defaultMessage:"Last 7 days"}),"28d":(0,k.jsx)(d()._H,{id:"creatorProfile.analytics.dateRange.filter.28days.label",defaultMessage:"Last 28 days"}),total:(0,k.jsx)(d()._H,{id:"creatorProfile.analytics.dateRange.filter.total.label",defaultMessage:"All-time"})};function pt(e){const{onPaidChange:t,paid:a}=e,i=2===a.length?"all":a[0],r=(0,o().yK)((()=>({filtersButton:{display:"flex",alignItems:"center",gap:5}})),[]),n={onSelect:e=>{t(e)},items:lt,renderOrigin:e=>(0,k.jsxs)(j().Z,{...e,style:r.filtersButton,children:[(0,k.jsx)(rt().q,{styleName:"UIRegular-14px/Semibold",colorName:"primary",children:gt[i]}),(0,k.jsx)(we().y,{iconGroup:be().m,variantName:"mini",colorName:"secondary"})]}),getKey:e=>e,renderItem:e=>(0,k.jsx)(it().Z,{...e,title:gt[e.value]}),selectedItem:i};return(0,k.jsx)(nt().Z,{...n})}const gt={all:(0,k.jsx)(d()._H,{id:"creatorProfile.analytics.paid.filter.freeAndAll.label",defaultMessage:"Free + Paid"}),free:(0,k.jsx)(d()._H,{id:"creatorProfile.analytics.paid.filter.paid.label",defaultMessage:"Free"}),paid:(0,k.jsx)(d()._H,{id:"creatorProfile.analytics.paid.filter.free.label",defaultMessage:"Paid"})};var mt=()=>a(423087);function ft(e){const{onSourceChange:t,sources:a}=e,i=(0,o().yK)((()=>({filtersButton:{display:"flex",alignItems:"center",gap:5},dropdownMenuItemTextContainer:{display:"flex",flexDirection:"column",gap:1},dropdownMenuItemContainer:{minHeight:40,padding:"8px 0px",display:"flex",alignItems:"center",justifyContent:"space-between"}})),[]);if(0===a.length)return null;const r=a.includes("web")&&a.includes("app"),n=a[0],s=ht[n],l={onSelect:e=>{t(e)},items:ot,renderOrigin:e=>(0,k.jsxs)(j().Z,{...e,style:i.filtersButton,children:[(0,k.jsx)(rt().q,{styleName:"UIRegular-14px/Semibold",colorName:"primary",children:r?(0,k.jsx)(d()._H,{id:"creatorProfile.analytics.sourceFilter.both.buttonLabel",defaultMessage:"Logged-in + Logged-out"}):s.buttonLabel}),(0,k.jsx)(we().y,{iconGroup:be().m,variantName:"mini",colorName:"secondary"})]}),getKey:e=>e,renderItem:e=>{const t=ht[e.value];return(0,k.jsx)(it().Z,{...e,title:(0,k.jsxs)("div",{style:i.dropdownMenuItemContainer,children:[(0,k.jsxs)("div",{style:i.dropdownMenuItemTextContainer,children:[(0,k.jsx)(rt().q,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:t.dropdownTitle}),(0,k.jsx)(rt().q,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:t.dropdownSubtitle})]}),a.includes(e.value)&&(0,k.jsx)(we().y,{iconGroup:mt().$,variantName:"mini",colorName:"primary"})]})})},selectedItem:r?void 0:n,width:"100%",minWidth:305};return(0,k.jsx)(nt().Z,{...l})}const ht={app:{buttonLabel:(0,k.jsx)(d()._H,{id:"creatorProfile.analytics.sourceFilter.item.app.buttonLabel",defaultMessage:"Logged-in"}),dropdownTitle:(0,k.jsx)(d()._H,{id:"creatorProfile.analytics.sourceFilter.item.app.dropdownTitle",defaultMessage:"Logged-in"}),dropdownSubtitle:(0,k.jsx)(d()._H,{id:"creatorProfile.analytics.sourceFilter.item.app.dropdownSubtitle",defaultMessage:"Visits from inside the Notion product (notion.so/marketplace)"})},web:{buttonLabel:(0,k.jsx)(d()._H,{id:"creatorProfile.analytics.sourceFilter.item.web.buttonLabel",defaultMessage:"Logged-out"}),dropdownTitle:(0,k.jsx)(d()._H,{id:"creatorProfile.analytics.sourceFilter.item.web.dropdownTitle",defaultMessage:"Logged-out"}),dropdownSubtitle:(0,k.jsx)(d()._H,{id:"creatorProfile.analytics.sourceFilter.item.web.dropdownSubtitle",defaultMessage:"Visits from web traffic (notion.com/marketplace)"})}};var bt=()=>a(793331),yt=()=>a(416641),vt=()=>a(314072),xt=()=>a(826955);function _t(e){const{selectedTemplateListingId:t,onTemplateChange:a}=e,o=(0,r().O7)(),s=Ct(),c=(0,d().YB)(),[u]=(0,l().r5)((async()=>{const e=await x().callApi({eventName:"getCreatorTemplates",environment:o,data:{locale:(0,y().E2)(c),limit:500,includeLocalizedTemplates:!0}});return"success"===e.type?e.data.templateIds:[]}),[o,c]),p=(0,i.useMemo)((()=>(null==u?void 0:u.value)??[]),[u.value]),g=(0,n().VK)((()=>p.map((e=>{const t=new(xt().j$)(o,{table:yt().nE,id:e});if(t.isDefined()&&t.isReady())return{id:t.id,name:t.getName(),price:t.getPrice(),imageUrl:t.getAttributes().image.url,listingId:t.getListingId()}})).filter(V().$K)),[o,p]),m=g.find((e=>e.listingId===t&&void 0!==t)),f={onSelect:e=>{e.listingId&&a(e.listingId)},items:g,renderOrigin:e=>(0,k.jsxs)(j().Z,{...e,style:s.filtersButton,children:[(0,k.jsx)(rt().q,{styleName:"UIRegular-14px/Semibold",colorName:"primary",children:m?m.name:(0,k.jsx)(d()._H,{id:"creatorProfile.analytics.templateFilter.allTemplates.buttonLabel",defaultMessage:"All templates"})}),(0,k.jsx)(we().y,{iconGroup:be().m,variantName:"mini",colorName:"secondary"})]}),getKey:e=>e.id,renderItem:e=>(0,k.jsx)(wt,{template:e.value,menuProps:e,selectedTemplate:m}),selectedItem:void 0,width:"100%",minWidth:482};return(0,k.jsx)(nt().Z,{...f})}function wt(e){const{template:t,menuProps:a,selectedTemplate:i}=e,r=Ct(),n=(0,d().YB)();return(0,k.jsx)(it().Z,{...a,title:(0,k.jsxs)("div",{style:r.templateDropdownMenuItemContainer,children:[(0,k.jsxs)("div",{style:r.templateDropdownMetadataContainer,children:[(0,k.jsx)(vt().K7,{src:t.imageUrl,imageHeight:50,imageWidth:80,imageBorderRadius:4,isDisabled:!0,imageContainerStyle:r.templatePreviewImageContainer}),(0,k.jsxs)("div",{style:r.templateDropdownTextContainer,children:[(0,k.jsx)(rt().q,{styleName:"UIRegular-14px/Medium",colorName:"primary",children:t.name}),(0,k.jsx)(rt().q,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:0!==t.price&&void 0!==t.price?(0,k.jsx)(bt().W,{cost:{amount:100*t.price,currencyCode:"USD"},intl:n,trailingZeroDisplay:"stripIfInteger"}):(0,k.jsx)(d()._H,{id:"creatorProfile.analytics.templateDropdownItem.price.free",defaultMessage:"Free"})})]})]}),i&&i.id===t.id&&(0,k.jsx)(we().y,{iconGroup:mt().$,variantName:"mini",colorName:"primary"})]})})}function Ct(){return(0,o().yK)((()=>({filtersButton:{display:"flex",alignItems:"center",gap:5},templateDropdownTextContainer:{display:"flex",flexDirection:"column",gap:1},templateDropdownMetadataContainer:{display:"flex",alignItems:"center",gap:16},templateDropdownMenuItemContainer:{minHeight:40,padding:"8px 0px",display:"flex",alignItems:"center",justifyContent:"space-between"},templatePreviewImageContainer:{border:"1px solid rgba(0, 0, 0, 0.04)",borderRadius:4,boxShadow:"0 4px 18px rgb(0 0 0 / 4%), 0 2.025px 7.84688px rgb(0 0 0 / 2.7%), 0 0.8px 2.925px rgb(0 0 0 / 2%), 0 0.175px 1.04062px rgb(0 0 0 / 1.3%)"}})),[])}function St(e){const{onDateRangeChange:t,onSourceChange:a,filtersConfig:i,shouldShowPaidFilter:r,shouldShowTemplateFilter:n,onTemplateChange:s,onPaidChange:l}=e,c=(0,o().yK)((()=>({filtersContainer:{display:"flex",alignItems:"center",gap:18,marginLeft:-6},filters:{fontSize:15,lineHeight:"22px",margin:0,fontWeight:L().Ue.semibold}})),[]),{isFeatureEnabled:u}=(0,Xe().o)("marketplace_analytics_filters");return u?(0,k.jsxs)("div",{style:c.filtersContainer,children:[(0,k.jsx)(ct,{dateRange:i.dateRange,onDateRangeChange:t}),(0,k.jsx)(ft,{sources:i.sources,onSourceChange:a}),r&&l&&(0,k.jsx)(pt,{paid:i.paid,onPaidChange:l}),n&&s&&(0,k.jsx)(_t,{selectedTemplateListingId:i.templateListingId,onTemplateChange:s})]}):(0,k.jsx)("div",{style:c.filters,children:(0,k.jsx)(d()._H,{id:"creatorProfile.analytics.template.subHeader",defaultMessage:"Last 7 days"})})}function jt(e){return e.success}function Mt(e){const{templateMetrics:t,filtersConfig:a,type:i}=e,{dateRange:r,sources:n}=a,o=t,s="views"===i?"views":"downloads";let l="";l=n.includes("web")&&n.includes("app")?"app_web":n.includes("web")?"web":"app";const d=`${s}_${l}_${r}`;if(d in o){return o[d]}return 0}a(731107);var kt=()=>a(513670);function It(){const e=(0,d().YB)(),t=(0,o().yK)((e=>({defaultContainer:{border:`1px solid ${e.accentColors.gray[100]}`,borderRadius:"8px",backgroundColor:e.cardContentBackground,maxHeight:"375px",maxWidth:"300px",width:"max-content",overflow:"hidden",pointerEvents:"auto",boxShadow:"0px 2px 4px rgb(0, 0, 0, 0.1)"},scrollContainer:{overflow:"auto",padding:"15px 15px 10px 15px",maxHeight:"375px"},row:{fontSize:"12px",lineHeight:"18px",textAlign:"left",display:"flex",justifyContent:"space-between",gap:"16px"},square:{height:"7px",width:"7px",minWidth:"7px",borderRadius:"1px",borderWidth:"0px",marginRight:"6px",marginTop:"6px",verticalAlign:"top",display:"inline-block"},rowLeft:{display:"inline-block",color:e.chartRowLeftColor,overflowX:"hidden",whiteSpace:"normal"},rowLeftContainer:{display:"inline-flex"},rowRight:{color:e.chartRowRightColor}})),[]),a=(0,i.useCallback)((e=>Object.keys(e).reduce(((t,a)=>`${t}${(0,kt().GL)(a)}:${e[a]};`),"")),[]),{rowStyle:r,squareStyle:n,rowLeftStyles:s,rowLeftContainerStyle:l,rowRightStyles:c,outsideContainerStyle:u,scrollContainerStyle:p}=(0,i.useMemo)((()=>({outsideContainerStyle:a(t.defaultContainer),scrollContainerStyle:a(t.scrollContainer),rowStyle:a(t.row),rowLeftContainerStyle:a(t.rowLeftContainer),squareStyle:a(t.square),rowLeftStyles:a(t.rowLeft),rowRightStyles:a(t.rowRight)})),[t,a]),g=(0,i.useMemo)((()=>({useHTML:!0,shadow:!1,borderWidth:0,backgroundColor:void 0,outside:!1,stickOnContact:!0,hideDelay:100})),[]);return(0,i.useMemo)((()=>({...g,shared:!0,formatter:function(){const t=this.points??[];return`\n\t\t\t\t<div style="${u}">\n\t\t\t\t<div style="${p}">\n\t\t\t\t\t${t.map((t=>{const a=t.color??t.series.color,i=t.series.name,o=(0,Je().uf)(t.y??void 0,"compact",e),d=""===i?e.formatMessage(Tt.empty):i;return`\n\t\t\t\t\t\t\t<div style="${r}">\n\t\t\t\t\t\t\t\t<div style="${l}">\n\t\t\t\t\t\t\t\t\t<div style="${n} background-color: ${a};"></div> \n\t\t\t\t\t\t\t\t\t\t<div style="${s}">\n\t\t\t\t\t\t\t\t\t\t\t${d}\n\t\t\t\t\t\t\t\t\t\t</div> \n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<span style="${c}">\n\t\t\t\t\t\t\t\t\t${o}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t`})).join("")}\n\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`}})),[g,u,p,e,r,n,s,c,l])}const Tt=(0,d().vU)({noData:{defaultMessage:"No data",id:"creatorProfile.chart.tooltip.noData"},empty:{defaultMessage:"Empty",id:"creatorProfile.chart.tooltip.empty"}});function Pt(e){const t=(0,o().yK)((()=>({lastUpdated:{fontSize:12,textAlign:"right",color:"rgba(17, 17, 17, 0.5)"}})),[]),{value:a}=e,{isMobileWidth:i}=(0,m().EQ)();return i||!a?null:(0,k.jsx)("div",{style:t.lastUpdated,children:(0,k.jsx)(d()._H,{id:"creatorProfile.analytics.lastUpdated",defaultMessage:"Last updated {date} (UTC)",values:{date:(0,k.jsx)(d().Ji,{value:a,year:"numeric",month:"short",day:"numeric",timeZone:"UTC"})}})})}function Dt(){var e,t;const a=(0,r().O7)(),i=(0,d().YB)(),s=dt(),c=(0,n().VK)((()=>{const{currentUserStore:e}=b().default.state;return null==e?void 0:e.id}),[]),[{status:u,value:p}]=(0,l().r5)((async()=>{if(!c)return{timeseriesData:[],lastUpdated:void 0};const e=await x().callApi({eventName:"getMarketplaceMetrics",environment:a,data:{metrics:["views"],sources:s.filtersConfig.sources,dateRange:s.filtersConfig.dateRange,by:"date"}});if("success"===e.type&&jt(e.data)){const t=e.data;return{webTimeseriesData:t.metrics.map((e=>({x:new Date(e.ds).getTime(),y:e.views_web_1d,name:i.formatMessage(Lt.web)}))),appTimeseriesData:t.metrics.map((e=>({x:new Date(e.ds).getTime(),y:e.views_app_1d,name:i.formatMessage(Lt.app)}))),lastUpdated:e.data.lastUpdated}}return{webTimeseriesData:[],appTimeseriesData:[],lastUpdated:void 0}}),[c,a,i,s.filtersConfig]),g=(0,n().qz)(void 0,at().Z),m=(0,o().yK)((()=>({header:{fontSize:24,lineHeight:"30px",fontWeight:L().Ue.semibold,marginBottom:4},subheader:{display:"flex",justifyContent:"space-between"},container:{marginTop:72}})),[]),f=It();return(0,k.jsxs)("div",{style:m.container,children:[(0,k.jsx)("div",{style:m.header,children:(0,k.jsx)(d()._H,{id:"creatorProfile.analytics.templateViews.header",defaultMessage:"Template views"})}),(0,k.jsxs)("div",{style:m.subheader,children:[(0,k.jsx)(St,{filtersConfig:s.filtersConfig,onDateRangeChange:s.onDateRangeChange,onSourceChange:s.onSourceChange}),(0,k.jsx)(Pt,{value:null==p?void 0:p.lastUpdated})]}),(0,k.jsx)(tt().C,{value:g,children:(0,k.jsx)(Qe().AxisChart,{tooltipOptions:f,onLoadEventHandler:()=>{},seriesData:[{name:i.formatMessage(Lt.web),type:"area",fillColor:"rgba(0, 0, 0, 0)",color:"rgba(165, 121, 217, 1)",data:(null==p?void 0:p.webTimeseriesData)??[]},{name:i.formatMessage(Lt.app),type:"area",fillColor:"rgba(0, 0, 0, 0)",color:"rgba(234, 139, 66, 1)",data:(null==p?void 0:p.appTimeseriesData)??[]}],xAxisType:"datetime",showHorizontalGridLines:!0,xAxisTitle:i.formatMessage(Lt.date),yAxisTitle:i.formatMessage(Lt.views),yLabelFormatter:e=>(0,Je().uf)(e,e>9999?"compact":"number",i),timezone:"UTC",xLabelFormatter:e=>new Date(e).toLocaleDateString(i.locale,{month:"numeric",day:"numeric",timeZone:"UTC"}),axisType:"line",dataLabelsEnabled:!1,loadingProps:{isInitialLoading:"pending"===u,isThrottledLoading:"pending"===u,initialLoadingSvg:()=>(0,k.jsx)(et().f,{chartType:"line",showCopy:!1})},hasData:"resolved"===u&&(((null==p||null===(e=p.webTimeseriesData)||void 0===e?void 0:e.length)??0)>0||((null==p||null===(t=p.appTimeseriesData)||void 0===t?void 0:t.length)??0)>0)})})]})}const Lt=(0,d().vU)({web:{id:"creatorProfile.analytics.profileViews.web",defaultMessage:"Web"},app:{id:"creatorProfile.analytics.profileViews.app",defaultMessage:"App"},date:{id:"creatorProfile.analytics.profileViews.date",defaultMessage:"Date"},views:{id:"creatorProfile.analytics.profileViews.views",defaultMessage:"Views"}});var Et=()=>a(108714),Rt=()=>a(378907),Ut=()=>a(786);function Bt(e){const{header:t,sortBy:a,limit:o,shouldShowPaidFilter:s=!0}=e,c=(0,r().O7)(),p=dt(),g=(0,n().VK)((()=>{const{currentUserStore:e}=b().default.state;return null==e?void 0:e.id}),[]),[{status:m,value:f}]=(0,l().r5)((async()=>{if(!g)return{timeseriesData:[],lastUpdated:void 0};const e=await x().callApi({eventName:"getMarketplaceMetrics",environment:c,data:{by:"template",metrics:["views","downloads"],sources:p.filtersConfig.sources,dateRange:p.filtersConfig.dateRange,templateFilterBy:{paid:p.filtersConfig.paid.includes("paid")&&p.filtersConfig.paid.includes("free")?void 0:p.filtersConfig.paid[0]}}});if("success"===e.type&&jt(e.data)){const t=e.data.templatesMap;return{templateMetrics:t?Object.values(t):[],lastUpdated:e.data.lastUpdated}}return{tableData:[],lastUpdated:void 0}}),[g,c,p.filtersConfig]),y=Ft({isLoading:"pending"===m}),_=(0,i.useMemo)((()=>[...Array(10)].map(((e,t)=>({key:`loading-row-${t}`,columns:[(0,k.jsx)(Ut().e,{width:224,height:14},`loadingProduct-${t}-1`),(0,k.jsx)(Ut().e,{width:119,height:14},`loadingCreatedBy-${t}-2`),(0,k.jsx)(Ut().e,{width:119,height:14},`loadingPrice-${t}-3`)]})))),[]),w=function(e){const{templateMetrics:t,sortBy:a,limit:i,filtersConfig:r}=e;let n=[...t];a&&n.sort(((e,t)=>{const i=Mt({templateMetrics:e.metrics||v().BX,filtersConfig:r,type:a});return Mt({templateMetrics:t.metrics||v().BX,filtersConfig:r,type:a})-i}));void 0!==i&&i>0&&(n=n.slice(0,i));return n}({templateMetrics:(null==f?void 0:f.templateMetrics)??[],sortBy:a,filtersConfig:p.filtersConfig,limit:o}),C=(0,i.useMemo)((()=>w.map(((e,t)=>{if(!e)return;const a=(null==e?void 0:e.metrics)||v().BX,i=Mt({templateMetrics:a,filtersConfig:p.filtersConfig,type:"views"}),r=Mt({templateMetrics:a,filtersConfig:p.filtersConfig,type:"downloads"});return{key:`template-${t}`,columns:[(0,k.jsx)(Ht,{name:e.name,image:e.image,slug:e.slug},`template-row-name-${t}`),(0,k.jsx)(rt().q,{styleName:"UIRegular-14px/Regular",children:(0,k.jsx)(d().BK,{maximumFractionDigits:2,...i>9999?{notation:"compact"}:{},value:i})},`template-row-views-${t}`),(0,k.jsx)(rt().q,{styleName:"UIRegular-14px/Regular",children:(0,k.jsx)(d().BK,{maximumFractionDigits:2,...r>9999?{notation:"compact"}:{},value:r})},`template-row-downloads-${t}`)]}})).filter(V().$K)),[w,p.filtersConfig]),S=[{key:"name",header:(0,k.jsx)(rt().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,k.jsx)(d()._H,{id:"creatorProfile.analytics.templateAnalytics.name",defaultMessage:"Name"})}),style:{width:"47%",minWidth:300}},{key:"views",header:(0,k.jsx)(rt().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,k.jsx)(d()._H,{id:"creatorProfile.analytics.templateAnalytics.views",defaultMessage:"Views"})}),style:{width:"20%",minWidth:200}},{key:"downloads",header:(0,k.jsx)(rt().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,k.jsx)(d()._H,{id:"creatorProfile.analytics.templateAnalytics.downloads",defaultMessage:"Downloads"})}),style:{width:"20%",minWidth:200}}];return(0,k.jsxs)("div",{style:y.container,children:[t,(0,k.jsxs)("div",{style:y.subheader,children:[(0,k.jsx)(St,{filtersConfig:p.filtersConfig,onDateRangeChange:p.onDateRangeChange,onSourceChange:p.onSourceChange,shouldShowPaidFilter:s,onPaidChange:p.onPaidChange}),(0,k.jsx)(Pt,{value:null==f?void 0:f.lastUpdated})]}),(0,k.jsx)(u().Z,{type:h().Z.X,style:{overflow:"unset"},children:(0,k.jsx)(Rt().Z,{columns:S,rows:"pending"===m?_:C??[],rowStyle:y.row,hideTopBorderForHeader:!0})})]})}function Ht(e){const{name:t,image:a,slug:i}=e,r=Ft({isLoading:!1});return(0,k.jsxs)("div",{style:r.templatePreview,children:[(0,k.jsx)(vt().K7,{src:(null==a?void 0:a.url)||"",imageHeight:50,imageWidth:80,imageBorderRadius:6,isDisabled:!0,imageContainerStyle:r.templatePreviewImageContainer}),(0,k.jsx)(Et().Z,{href:`/marketplace/templates/${i}`,children:(0,k.jsx)(rt().q,{styleName:"UIRegular-14px/Regular",colorName:"primary",children:t})})]})}function Ft(e){const{isLoading:t}=e;return(0,o().yK)((()=>({tableContainer:{width:"100%",height:t?"100%":void 0,display:"flex",flexDirection:"column",position:"relative",gap:16},row:{height:58},filters:{fontSize:15,lineHeight:"22px",margin:0,fontWeight:L().Ue.semibold,marginBottom:24},subheader:{display:"flex",justifyContent:"space-between"},container:{marginTop:72},templatePreview:{display:"flex",alignItems:"center",gap:16},templatePreviewImageContainer:{border:"1px solid rgba(0, 0, 0, 0.04)",borderRadius:4,boxShadow:"0 4px 18px rgb(0 0 0 / 4%), 0 2.025px 7.84688px rgb(0 0 0 / 2.7%), 0 0.8px 2.925px rgb(0 0 0 / 2%), 0 0.175px 1.04062px rgb(0 0 0 / 1.3%)"}})),[t])}const Zt=(0,He().CZ)("eye",{default:{loader:()=>a.e(27183).then(a.bind(a,427183))},small:{loader:()=>a.e(29885).then(a.bind(a,829885))},mini:{loader:()=>a.e(50323).then(a.bind(a,550323))},large:{loader:()=>a.e(67920).then(a.bind(a,167920))}}),At=(0,He().CZ)("templateDownloads",{default:{loader:()=>a.e(48800).then(a.bind(a,748800))},small:{loader:()=>a.e(61699).then(a.bind(a,761699))},mini:{loader:()=>a.e(77659).then(a.bind(a,977659))},large:{loader:()=>a.e(16762).then(a.bind(a,516762))}});var Vt=()=>a(668001);const Nt=(0,He().IU)("productDownloads",{viewBox:"0 0 55 41",svg:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("path",{d:"M2.7168 6.78613H42.498V9.40234H2.7168V6.78613ZM6.55762 34.6924C4.61556 34.6924 3.15592 34.21 2.17871 33.2451C1.21387 32.2926 0.731445 30.8639 0.731445 28.959V6.28516C0.731445 4.36784 1.21387 2.93294 2.17871 1.98047C3.15592 1.01562 4.61556 0.533203 6.55762 0.533203H38.6572C40.6117 0.533203 42.0713 1.01562 43.0361 1.98047C44.001 2.94531 44.4834 4.38021 44.4834 6.28516V28.959C44.4834 30.8639 44.001 32.2926 43.0361 33.2451C42.0713 34.21 40.6117 34.6924 38.6572 34.6924H6.55762ZM6.59473 31.7051H38.6201C39.5355 31.7051 40.2406 31.4639 40.7354 30.9814C41.2425 30.4867 41.4961 29.7568 41.4961 28.792V6.45215C41.4961 5.4873 41.2425 4.75749 40.7354 4.2627C40.2406 3.7679 39.5355 3.52051 38.6201 3.52051H6.59473C5.66699 3.52051 4.95573 3.7679 4.46094 4.2627C3.96615 4.75749 3.71875 5.4873 3.71875 6.45215V28.792C3.71875 29.7568 3.96615 30.4867 4.46094 30.9814C4.95573 31.4639 5.66699 31.7051 6.59473 31.7051Z",fill:"#E7B533"}),(0,k.jsxs)("mask",{id:"path-2-outside-1_446_28461",maskUnits:"userSpaceOnUse",x:"31.5142",y:"19",width:"23",height:"24",fill:"black",children:[(0,k.jsx)("rect",{fill:"white",x:"31.5142",y:"19",width:"23",height:"24"}),(0,k.jsx)("path",{d:"M43.1626 38.6094C42.0324 38.6094 40.9699 38.3932 39.9751 37.9609C38.9803 37.5339 38.1027 36.9401 37.3423 36.1797C36.5819 35.4245 35.9855 34.5495 35.5532 33.5547C35.1261 32.5599 34.9126 31.4948 34.9126 30.3594C34.9126 29.2292 35.1261 28.1667 35.5532 27.1719C35.9855 26.1771 36.5793 25.2995 37.3345 24.5391C38.0949 23.7786 38.9725 23.1849 39.9673 22.7578C40.9673 22.3255 42.0324 22.1094 43.1626 22.1094C44.2928 22.1094 45.3553 22.3255 46.3501 22.7578C47.3501 23.1849 48.2277 23.7786 48.9829 24.5391C49.7433 25.2995 50.3397 26.1771 50.772 27.1719C51.2043 28.1667 51.4204 29.2292 51.4204 30.3594C51.4204 31.4948 51.2043 32.5599 50.772 33.5547C50.3397 34.5495 49.7433 35.4245 48.9829 36.1797C48.2277 36.9401 47.3527 37.5339 46.3579 37.9609C45.3631 38.3932 44.298 38.6094 43.1626 38.6094ZM43.1782 26.0781C42.9126 26.0781 42.6886 26.1615 42.5063 26.3281C42.3293 26.4948 42.2407 26.7057 42.2407 26.9609V30.4297L42.3345 32.0469L41.7407 31.2422L40.9126 30.3203C40.7616 30.1432 40.561 30.0547 40.311 30.0547C40.0715 30.0547 39.8761 30.1302 39.7251 30.2812C39.5741 30.4271 39.4985 30.612 39.4985 30.8359C39.4985 31.0755 39.5819 31.2839 39.7485 31.4609L42.4204 34.2344C42.6287 34.4688 42.8813 34.5859 43.1782 34.5859C43.4751 34.5859 43.7303 34.4688 43.9438 34.2344L46.6079 31.4609C46.7746 31.2786 46.8579 31.0703 46.8579 30.8359C46.8579 30.612 46.7824 30.4271 46.6313 30.2812C46.4803 30.1302 46.285 30.0547 46.0454 30.0547C45.7902 30.0547 45.5897 30.1432 45.4438 30.3203L44.6235 31.2188L44.022 32.0547L44.1157 30.4297V26.9609C44.1157 26.7057 44.0246 26.4948 43.8423 26.3281C43.6652 26.1615 43.4438 26.0781 43.1782 26.0781Z"})]}),(0,k.jsx)("path",{d:"M43.1626 38.6094C42.0324 38.6094 40.9699 38.3932 39.9751 37.9609C38.9803 37.5339 38.1027 36.9401 37.3423 36.1797C36.5819 35.4245 35.9855 34.5495 35.5532 33.5547C35.1261 32.5599 34.9126 31.4948 34.9126 30.3594C34.9126 29.2292 35.1261 28.1667 35.5532 27.1719C35.9855 26.1771 36.5793 25.2995 37.3345 24.5391C38.0949 23.7786 38.9725 23.1849 39.9673 22.7578C40.9673 22.3255 42.0324 22.1094 43.1626 22.1094C44.2928 22.1094 45.3553 22.3255 46.3501 22.7578C47.3501 23.1849 48.2277 23.7786 48.9829 24.5391C49.7433 25.2995 50.3397 26.1771 50.772 27.1719C51.2043 28.1667 51.4204 29.2292 51.4204 30.3594C51.4204 31.4948 51.2043 32.5599 50.772 33.5547C50.3397 34.5495 49.7433 35.4245 48.9829 36.1797C48.2277 36.9401 47.3527 37.5339 46.3579 37.9609C45.3631 38.3932 44.298 38.6094 43.1626 38.6094ZM43.1782 26.0781C42.9126 26.0781 42.6886 26.1615 42.5063 26.3281C42.3293 26.4948 42.2407 26.7057 42.2407 26.9609V30.4297L42.3345 32.0469L41.7407 31.2422L40.9126 30.3203C40.7616 30.1432 40.561 30.0547 40.311 30.0547C40.0715 30.0547 39.8761 30.1302 39.7251 30.2812C39.5741 30.4271 39.4985 30.612 39.4985 30.8359C39.4985 31.0755 39.5819 31.2839 39.7485 31.4609L42.4204 34.2344C42.6287 34.4688 42.8813 34.5859 43.1782 34.5859C43.4751 34.5859 43.7303 34.4688 43.9438 34.2344L46.6079 31.4609C46.7746 31.2786 46.8579 31.0703 46.8579 30.8359C46.8579 30.612 46.7824 30.4271 46.6313 30.2812C46.4803 30.1302 46.285 30.0547 46.0454 30.0547C45.7902 30.0547 45.5897 30.1432 45.4438 30.3203L44.6235 31.2188L44.022 32.0547L44.1157 30.4297V26.9609C44.1157 26.7057 44.0246 26.4948 43.8423 26.3281C43.6652 26.1615 43.4438 26.0781 43.1782 26.0781Z",fill:"#E7B533"}),(0,k.jsx)("path",{d:"M39.9751 37.9609L41.1708 35.2095L41.1586 35.2043L39.9751 37.9609ZM37.3423 36.1797L39.4636 34.0584L39.4563 34.0511L37.3423 36.1797ZM35.5532 33.5547L32.7965 34.7382L32.8018 34.7503L35.5532 33.5547ZM35.5532 27.1719L32.8018 25.9762L32.7965 25.9884L35.5532 27.1719ZM37.3345 24.5391L35.2131 22.4177L35.2059 22.425L37.3345 24.5391ZM39.9673 22.7578L41.1508 25.5145L41.1577 25.5115L39.9673 22.7578ZM46.3501 22.7578L45.1544 25.5093L45.1631 25.513L45.1718 25.5167L46.3501 22.7578ZM48.9829 24.5391L46.8543 26.6531L46.8616 26.6604L48.9829 24.5391ZM48.9829 36.1797L46.8689 34.0511L46.8616 34.0584L46.8543 34.0657L48.9829 36.1797ZM46.3579 37.9609L45.1744 35.2042L45.1623 35.2095L46.3579 37.9609ZM42.5063 26.3281L40.482 24.114L40.466 24.1287L40.4503 24.1435L42.5063 26.3281ZM42.2407 30.4297H39.2407V30.5166L39.2458 30.6033L42.2407 30.4297ZM42.3345 32.0469L39.9205 33.8281L45.9136 41.9504L45.3294 31.8733L42.3345 32.0469ZM41.7407 31.2422L44.1547 29.461L44.069 29.3448L43.9725 29.2374L41.7407 31.2422ZM40.9126 30.3203L38.6301 32.2672L38.6551 32.2965L38.6808 32.3251L40.9126 30.3203ZM39.7251 30.2812L41.8089 32.4395L41.8278 32.4212L41.8464 32.4026L39.7251 30.2812ZM39.7485 31.4609L37.5639 33.517L37.5759 33.5298L37.588 33.5423L39.7485 31.4609ZM42.4204 34.2344L44.6626 32.2413L44.6227 32.1963L44.5809 32.153L42.4204 34.2344ZM43.9438 34.2344L41.7803 32.1561L41.7529 32.1847L41.7263 32.2139L43.9438 34.2344ZM46.6079 31.4609L48.7715 33.5392L48.7971 33.5125L48.822 33.4852L46.6079 31.4609ZM46.6313 30.2812L44.51 32.4026L44.5286 32.4212L44.5476 32.4395L46.6313 30.2812ZM45.4438 30.3203L47.6593 32.3431L47.7109 32.2866L47.7596 32.2274L45.4438 30.3203ZM44.6235 31.2188L42.4081 29.1959L42.2904 29.3248L42.1885 29.4664L44.6235 31.2188ZM44.022 32.0547L41.027 31.8819L40.4329 42.1781L46.457 33.807L44.022 32.0547ZM44.1157 30.4297L47.1107 30.6025L47.1157 30.5162V30.4297H44.1157ZM43.8423 26.3281L41.7862 28.5127L41.802 28.5276L41.818 28.5422L43.8423 26.3281ZM43.1626 35.6094C42.4261 35.6094 41.7724 35.4709 41.1707 35.2095L38.7794 40.7124C40.1674 41.3155 41.6387 41.6094 43.1626 41.6094V35.6094ZM41.1586 35.2043C40.5115 34.9264 39.9528 34.5475 39.4636 34.0584L35.221 38.301C36.2526 39.3327 37.4491 40.1413 38.7916 40.7176L41.1586 35.2043ZM39.4563 34.0511C38.9689 33.567 38.5874 33.0096 38.3047 32.359L32.8018 34.7503C33.3837 36.0894 34.1949 37.282 35.2283 38.3083L39.4563 34.0511ZM38.3099 32.3712C38.0512 31.7685 37.9126 31.1081 37.9126 30.3594H31.9126C31.9126 31.8815 32.2011 33.3513 32.7965 34.7382L38.3099 32.3712ZM37.9126 30.3594C37.9126 29.6178 38.0504 28.9598 38.3099 28.3554L32.7965 25.9884C32.2019 27.3735 31.9126 28.8405 31.9126 30.3594H37.9126ZM38.3047 28.3675C38.5901 27.7107 38.974 27.1455 39.4631 26.6531L35.2059 22.425C34.1845 23.4534 33.3809 24.6435 32.8018 25.9762L38.3047 28.3675ZM39.4558 26.6604C39.9449 26.1712 40.5037 25.7923 41.1508 25.5145L38.7838 20.0011C37.4413 20.5775 36.2448 21.3861 35.2132 22.4177L39.4558 26.6604ZM41.1577 25.5115C41.7677 25.2478 42.4262 25.1094 43.1626 25.1094V19.1094C41.6386 19.1094 40.1668 19.4032 38.7769 20.0041L41.1577 25.5115ZM43.1626 25.1094C43.8991 25.1094 44.5528 25.2478 45.1544 25.5093L47.5457 20.0064C46.1578 19.4032 44.6865 19.1094 43.1626 19.1094V25.1094ZM45.1718 25.5167C45.8218 25.7943 46.3754 26.1709 46.8543 26.6531L51.1115 22.425C50.08 21.3864 48.8784 20.5755 47.5284 19.9989L45.1718 25.5167ZM46.8616 26.6604C47.3534 27.1522 47.737 27.7151 48.0205 28.3675L53.5234 25.9762C52.9424 24.6391 52.1333 23.4468 51.1042 22.4177L46.8616 26.6604ZM48.0205 28.3675C48.282 28.9692 48.4204 29.6229 48.4204 30.3594H54.4204C54.4204 28.8354 54.1265 27.3642 53.5234 25.9762L48.0205 28.3675ZM48.4204 30.3594C48.4204 31.1031 48.2812 31.7591 48.0205 32.359L53.5234 34.7503C54.1273 33.3606 54.4204 31.8865 54.4204 30.3594H48.4204ZM48.0205 32.359C47.7378 33.0096 47.3563 33.567 46.8689 34.0511L51.0969 38.3083C52.1303 37.282 52.9415 36.0894 53.5234 34.7503L48.0205 32.359ZM46.8543 34.0657C46.3728 34.5505 45.8196 34.9273 45.1744 35.2043L47.5414 40.7176C48.8858 40.1404 50.0826 39.3298 51.1115 38.2937L46.8543 34.0657ZM45.1623 35.2095C44.5624 35.4702 43.9063 35.6094 43.1626 35.6094V41.6094C44.6898 41.6094 46.1639 41.3163 47.5536 40.7124L45.1623 35.2095ZM43.1782 23.0781C42.225 23.0781 41.2611 23.4017 40.482 24.114L44.5307 28.5422C44.347 28.7102 44.1189 28.8549 43.8572 28.9523C43.5992 29.0483 43.3629 29.0781 43.1782 29.0781V23.0781ZM40.4503 24.1435C39.6381 24.9079 39.2407 25.9245 39.2407 26.9609H45.2407C45.2407 27.186 45.2003 27.47 45.0733 27.7724C44.945 28.0781 44.76 28.3268 44.5624 28.5127L40.4503 24.1435ZM39.2407 26.9609V30.4297H45.2407V26.9609H39.2407ZM39.2458 30.6033L39.3395 32.2205L45.3294 31.8733L45.2357 30.2561L39.2458 30.6033ZM44.7485 30.2657L44.1547 29.461L39.3267 33.0234L39.9205 33.8281L44.7485 30.2657ZM43.9725 29.2374L43.1444 28.3155L38.6808 32.3251L39.509 33.247L43.9725 29.2374ZM43.1951 28.3735C42.4278 27.4739 41.3654 27.0547 40.311 27.0547V33.0547C40.0772 33.0547 39.7687 33.0119 39.4371 32.8655C39.0998 32.7165 38.8285 32.4998 38.6301 32.2672L43.1951 28.3735ZM40.311 27.0547C39.3815 27.0547 38.388 27.3757 37.6038 28.1599L41.8464 32.4026C41.6325 32.6165 41.3669 32.7934 41.0668 32.9094C40.7733 33.0229 40.5085 33.0547 40.311 33.0547V27.0547ZM37.6413 28.123C36.8626 28.8749 36.4985 29.8586 36.4985 30.8359H42.4985C42.4985 31.0659 42.4586 31.3548 42.3324 31.6637C42.2046 31.9766 42.0175 32.2381 41.8089 32.4395L37.6413 28.123ZM36.4985 30.8359C36.4985 31.8524 36.8823 32.7927 37.5639 33.517L41.9331 29.4048C42.0856 29.5668 42.2373 29.7848 42.3465 30.0577C42.4559 30.3314 42.4985 30.6002 42.4985 30.8359H36.4985ZM37.588 33.5423L40.2599 36.3158L44.5809 32.153L41.909 29.3795L37.588 33.5423ZM40.1782 36.2275C40.9195 37.0615 41.9713 37.5859 43.1782 37.5859V31.5859C43.4365 31.5859 43.7335 31.6397 44.0286 31.7766C44.3197 31.9117 44.528 32.0899 44.6626 32.2413L40.1782 36.2275ZM43.1782 37.5859C44.3817 37.5859 45.4229 37.0654 46.1614 36.2548L41.7263 32.2139C41.8558 32.0717 42.0576 31.9016 42.3404 31.7717C42.6278 31.6398 42.9197 31.5859 43.1782 31.5859V37.5859ZM46.1074 36.3126L48.7715 33.5392L44.4444 29.3827L41.7803 32.1561L46.1074 36.3126ZM48.822 33.4852C49.4644 32.7827 49.8579 31.8627 49.8579 30.8359H43.8579C43.8579 30.5887 43.9036 30.3197 44.01 30.0538C44.1153 29.7905 44.258 29.5852 44.3938 29.4366L48.822 33.4852ZM49.8579 30.8359C49.8579 29.8586 49.4938 28.8749 48.7151 28.123L44.5476 32.4395C44.339 32.2381 44.1518 31.9766 44.024 31.6637C43.8979 31.3548 43.8579 31.0659 43.8579 30.8359H49.8579ZM48.7527 28.1599C47.9684 27.3757 46.9749 27.0547 46.0454 27.0547V33.0547C45.8479 33.0547 45.5831 33.0229 45.2896 32.9094C44.9895 32.7934 44.7239 32.6165 44.51 32.4026L48.7527 28.1599ZM46.0454 27.0547C45.0078 27.0547 43.9125 27.4606 43.1281 28.4132L47.7596 32.2274C47.5492 32.483 47.2635 32.7118 46.9154 32.8655C46.5763 33.0152 46.2672 33.0547 46.0454 33.0547V27.0547ZM43.2284 28.2975L42.4081 29.1959L46.839 33.2416L47.6593 32.3431L43.2284 28.2975ZM42.1885 29.4664L41.5869 30.3024L46.457 33.807L47.0586 32.9711L42.1885 29.4664ZM47.017 32.2275L47.1107 30.6025L41.1207 30.2569L41.027 31.8819L47.017 32.2275ZM47.1157 30.4297V26.9609H41.1157V30.4297H47.1157ZM47.1157 26.9609C47.1157 25.8952 46.6936 24.8701 45.8666 24.114L41.818 28.5422C41.6201 28.3613 41.4283 28.1134 41.2935 27.8013C41.1596 27.4915 41.1157 27.1972 41.1157 26.9609H47.1157ZM45.8984 24.1435C45.1112 23.4027 44.1311 23.0781 43.1782 23.0781V29.0781C42.9941 29.0781 42.7526 29.0485 42.4865 28.9483C42.2157 28.8463 41.978 28.6932 41.7862 28.5127L45.8984 24.1435Z",fill:"white",mask:"url(#path-2-outside-1_446_28461)"})]})}),zt=(0,He().IU)("productViews",{viewBox:"0 0 55 41",svg:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("path",{d:"M2.7168 6.78613H42.498V9.40234H2.7168V6.78613ZM6.55762 34.6924C4.61556 34.6924 3.15592 34.21 2.17871 33.2451C1.21387 32.2926 0.731445 30.8639 0.731445 28.959V6.28516C0.731445 4.36784 1.21387 2.93294 2.17871 1.98047C3.15592 1.01562 4.61556 0.533203 6.55762 0.533203H38.6572C40.6117 0.533203 42.0713 1.01562 43.0361 1.98047C44.001 2.94531 44.4834 4.38021 44.4834 6.28516V28.959C44.4834 30.8639 44.001 32.2926 43.0361 33.2451C42.0713 34.21 40.6117 34.6924 38.6572 34.6924H6.55762ZM6.59473 31.7051H38.6201C39.5355 31.7051 40.2406 31.4639 40.7354 30.9814C41.2425 30.4867 41.4961 29.7568 41.4961 28.792V6.45215C41.4961 5.4873 41.2425 4.75749 40.7354 4.2627C40.2406 3.7679 39.5355 3.52051 38.6201 3.52051H6.59473C5.66699 3.52051 4.95573 3.7679 4.46094 4.2627C3.96615 4.75749 3.71875 5.4873 3.71875 6.45215V28.792C3.71875 29.7568 3.96615 30.4867 4.46094 30.9814C4.95573 31.4639 5.66699 31.7051 6.59473 31.7051Z",fill:"#2E98EA"}),(0,k.jsx)("circle",{cx:"43.5",cy:"30.5",r:"1.5",fill:"white"}),(0,k.jsxs)("mask",{id:"path-3-outside-1_446_28461",maskUnits:"userSpaceOnUse",x:"28",y:"20",width:"29",height:"21",fill:"black",children:[(0,k.jsx)("rect",{fill:"white",x:"28",y:"20",width:"29",height:"21"}),(0,k.jsx)("path",{d:"M42.4297 37.1562C41.3672 37.1562 40.3646 37.026 39.4219 36.7656C38.4844 36.5104 37.6198 36.1719 36.8281 35.75C36.0365 35.3281 35.3255 34.8646 34.6953 34.3594C34.0703 33.849 33.5365 33.3385 33.0938 32.8281C32.6562 32.3177 32.3229 31.8464 32.0938 31.4141C31.8646 30.9818 31.75 30.6328 31.75 30.3672C31.75 30.1068 31.8646 29.7604 32.0938 29.3281C32.3229 28.8958 32.6562 28.4245 33.0938 27.9141C33.5365 27.4036 34.0703 26.8958 34.6953 26.3906C35.3255 25.8802 36.0365 25.4141 36.8281 24.9922C37.6198 24.5703 38.4844 24.2318 39.4219 23.9766C40.3646 23.7214 41.3672 23.5938 42.4297 23.5938C43.5078 23.5938 44.5182 23.7214 45.4609 23.9766C46.4089 24.2318 47.2786 24.5703 48.0703 24.9922C48.8672 25.4141 49.5755 25.8802 50.1953 26.3906C50.8203 26.8958 51.349 27.4036 51.7812 27.9141C52.2188 28.4245 52.5521 28.8958 52.7812 29.3281C53.0104 29.7604 53.125 30.1068 53.125 30.3672C53.125 30.6328 53.0104 30.9818 52.7812 31.4141C52.5521 31.8464 52.2188 32.3177 51.7812 32.8281C51.349 33.3385 50.8229 33.849 50.2031 34.3594C49.5833 34.8646 48.875 35.3281 48.0781 35.75C47.2865 36.1719 46.4167 36.5104 45.4688 36.7656C44.5208 37.026 43.5078 37.1562 42.4297 37.1562ZM42.4375 34.5C43.0104 34.5 43.5469 34.3932 44.0469 34.1797C44.5521 33.9609 44.9948 33.6615 45.375 33.2812C45.7552 32.8958 46.0521 32.4557 46.2656 31.9609C46.4844 31.4661 46.5938 30.9375 46.5938 30.375C46.5938 29.7969 46.4844 29.2604 46.2656 28.7656C46.0521 28.2656 45.7552 27.8255 45.375 27.4453C44.9948 27.0651 44.5521 26.7708 44.0469 26.5625C43.5469 26.349 43.0104 26.2422 42.4375 26.2422C41.8646 26.2422 41.3255 26.349 40.8203 26.5625C40.3203 26.7708 39.8776 27.0651 39.4922 27.4453C39.112 27.8203 38.8151 28.2578 38.6016 28.7578C38.388 29.2578 38.2812 29.7969 38.2812 30.375C38.2812 30.9375 38.388 31.4661 38.6016 31.9609C38.8203 32.4557 39.1198 32.8958 39.5 33.2812C39.8802 33.6615 40.3203 33.9609 40.8203 34.1797C41.3255 34.3932 41.8646 34.5 42.4375 34.5ZM42.4297 32C41.9818 32 41.599 31.8411 41.2812 31.5234C40.9635 31.2057 40.8047 30.8255 40.8047 30.3828C40.8047 29.9349 40.9635 29.5521 41.2812 29.2344C41.599 28.9115 41.9818 28.75 42.4297 28.75C42.8828 28.75 43.2682 28.9115 43.5859 29.2344C43.9089 29.5521 44.0703 29.9349 44.0703 30.3828C44.0703 30.8255 43.9089 31.2057 43.5859 31.5234C43.2682 31.8411 42.8828 32 42.4297 32Z"})]}),(0,k.jsx)("path",{d:"M42.4297 37.1562C41.3672 37.1562 40.3646 37.026 39.4219 36.7656C38.4844 36.5104 37.6198 36.1719 36.8281 35.75C36.0365 35.3281 35.3255 34.8646 34.6953 34.3594C34.0703 33.849 33.5365 33.3385 33.0938 32.8281C32.6562 32.3177 32.3229 31.8464 32.0938 31.4141C31.8646 30.9818 31.75 30.6328 31.75 30.3672C31.75 30.1068 31.8646 29.7604 32.0938 29.3281C32.3229 28.8958 32.6562 28.4245 33.0938 27.9141C33.5365 27.4036 34.0703 26.8958 34.6953 26.3906C35.3255 25.8802 36.0365 25.4141 36.8281 24.9922C37.6198 24.5703 38.4844 24.2318 39.4219 23.9766C40.3646 23.7214 41.3672 23.5938 42.4297 23.5938C43.5078 23.5938 44.5182 23.7214 45.4609 23.9766C46.4089 24.2318 47.2786 24.5703 48.0703 24.9922C48.8672 25.4141 49.5755 25.8802 50.1953 26.3906C50.8203 26.8958 51.349 27.4036 51.7812 27.9141C52.2188 28.4245 52.5521 28.8958 52.7812 29.3281C53.0104 29.7604 53.125 30.1068 53.125 30.3672C53.125 30.6328 53.0104 30.9818 52.7812 31.4141C52.5521 31.8464 52.2188 32.3177 51.7812 32.8281C51.349 33.3385 50.8229 33.849 50.2031 34.3594C49.5833 34.8646 48.875 35.3281 48.0781 35.75C47.2865 36.1719 46.4167 36.5104 45.4688 36.7656C44.5208 37.026 43.5078 37.1562 42.4297 37.1562ZM42.4375 34.5C43.0104 34.5 43.5469 34.3932 44.0469 34.1797C44.5521 33.9609 44.9948 33.6615 45.375 33.2812C45.7552 32.8958 46.0521 32.4557 46.2656 31.9609C46.4844 31.4661 46.5938 30.9375 46.5938 30.375C46.5938 29.7969 46.4844 29.2604 46.2656 28.7656C46.0521 28.2656 45.7552 27.8255 45.375 27.4453C44.9948 27.0651 44.5521 26.7708 44.0469 26.5625C43.5469 26.349 43.0104 26.2422 42.4375 26.2422C41.8646 26.2422 41.3255 26.349 40.8203 26.5625C40.3203 26.7708 39.8776 27.0651 39.4922 27.4453C39.112 27.8203 38.8151 28.2578 38.6016 28.7578C38.388 29.2578 38.2812 29.7969 38.2812 30.375C38.2812 30.9375 38.388 31.4661 38.6016 31.9609C38.8203 32.4557 39.1198 32.8958 39.5 33.2812C39.8802 33.6615 40.3203 33.9609 40.8203 34.1797C41.3255 34.3932 41.8646 34.5 42.4375 34.5ZM42.4297 32C41.9818 32 41.599 31.8411 41.2812 31.5234C40.9635 31.2057 40.8047 30.8255 40.8047 30.3828C40.8047 29.9349 40.9635 29.5521 41.2812 29.2344C41.599 28.9115 41.9818 28.75 42.4297 28.75C42.8828 28.75 43.2682 28.9115 43.5859 29.2344C43.9089 29.5521 44.0703 29.9349 44.0703 30.3828C44.0703 30.8255 43.9089 31.2057 43.5859 31.5234C43.2682 31.8411 42.8828 32 42.4297 32Z",fill:"#2E98EA"}),(0,k.jsx)("path",{d:"M39.4219 36.7656L40.2207 33.8739L40.2099 33.871L39.4219 36.7656ZM34.6953 34.3594L32.7977 36.683L32.8083 36.6916L32.8189 36.7001L34.6953 34.3594ZM33.0938 32.8281L30.816 34.7805L30.8217 34.7872L30.8274 34.7938L33.0938 32.8281ZM33.0938 27.9141L30.8274 25.9484L30.8217 25.955L30.816 25.9617L33.0938 27.9141ZM34.6953 26.3906L36.5812 28.7237L36.5835 28.7219L34.6953 26.3906ZM39.4219 23.9766L38.6379 21.0808L38.6339 21.0819L39.4219 23.9766ZM45.4609 23.9766L44.677 26.8723L44.681 26.8734L45.4609 23.9766ZM48.0703 24.9922L46.6594 27.6397L46.6666 27.6436L48.0703 24.9922ZM50.1953 26.3906L48.2882 28.7064L48.2988 28.7151L48.3094 28.7237L50.1953 26.3906ZM51.7812 27.9141L49.492 29.8529L49.4977 29.8597L49.5035 29.8664L51.7812 27.9141ZM51.7812 32.8281L49.5035 30.8758L49.4977 30.8825L49.492 30.8893L51.7812 32.8281ZM50.2031 34.3594L52.0986 36.6847L52.1044 36.68L52.1102 36.6752L50.2031 34.3594ZM48.0781 35.75L46.6745 33.0986L46.6673 33.1025L48.0781 35.75ZM45.4688 36.7656L44.6888 33.8688L44.6814 33.8708L44.674 33.8728L45.4688 36.7656ZM44.0469 34.1797L45.2252 36.9386L45.232 36.9357L45.2389 36.9327L44.0469 34.1797ZM45.375 33.2812L47.4963 35.4026L47.5035 35.3954L47.5107 35.3881L45.375 33.2812ZM46.2656 31.9609L43.5218 30.7479L43.5165 30.76L43.5112 30.7722L46.2656 31.9609ZM46.2656 28.7656L43.5067 29.9439L43.5141 29.9613L43.5218 29.9787L46.2656 28.7656ZM44.0469 26.5625L42.8686 29.3214L42.8858 29.3288L42.9032 29.3359L44.0469 26.5625ZM40.8203 26.5625L41.9742 29.3317L41.9812 29.3288L41.9883 29.3258L40.8203 26.5625ZM39.4922 27.4453L41.5988 29.5812L41.599 29.581L39.4922 27.4453ZM38.6016 31.9609L35.8471 33.1497L35.8524 33.1619L35.8578 33.174L38.6016 31.9609ZM39.5 33.2812L37.3643 35.3881L37.3715 35.3954L37.3787 35.4026L39.5 33.2812ZM40.8203 34.1797L39.6179 36.9282L39.635 36.9357L39.6523 36.943L40.8203 34.1797ZM41.2812 29.2344L43.4026 31.3557L43.4112 31.3471L43.4197 31.3384L41.2812 29.2344ZM43.5859 29.2344L41.4474 31.3384L41.4645 31.3558L41.4819 31.3729L43.5859 29.2344ZM43.5859 31.5234L41.4819 29.3849L41.4732 29.3935L41.4646 29.4021L43.5859 31.5234ZM42.4297 34.1562C41.614 34.1562 40.8818 34.0566 40.2207 33.8739L38.6231 39.6573C39.8473 39.9955 41.1204 40.1562 42.4297 40.1562V34.1562ZM40.2099 33.871C39.4708 33.6698 38.8173 33.4106 38.239 33.1025L35.4173 38.3975C36.4223 38.9331 37.4979 39.3511 38.6339 39.6603L40.2099 33.871ZM38.239 33.1025C37.5939 32.7587 37.0417 32.3954 36.5718 32.0187L32.8189 36.7001C33.6093 37.3338 34.479 37.8976 35.4173 38.3975L38.239 33.1025ZM36.5929 32.0358C36.0761 31.6137 35.6712 31.2212 35.3601 30.8625L30.8274 34.7938C31.4017 35.4559 32.0645 36.0842 32.7977 36.683L36.5929 32.0358ZM35.3715 30.8758C35.0287 30.4758 34.8394 30.1883 34.7443 30.0089L29.4432 32.8192C29.8064 33.5044 30.2838 34.1596 30.816 34.7805L35.3715 30.8758ZM34.7443 30.0089C34.685 29.8971 34.6762 29.8619 34.6862 29.8922C34.6921 29.9101 34.7068 29.958 34.7207 30.0322C34.7344 30.1058 34.75 30.2202 34.75 30.3672H28.75C28.75 31.3807 29.1474 32.2612 29.4432 32.8192L34.7443 30.0089ZM34.75 30.3672C34.75 30.5194 34.7335 30.6375 34.7194 30.7124C34.7051 30.7881 34.69 30.8367 34.6841 30.8544C34.6743 30.8841 34.6837 30.8476 34.7443 30.7333L29.4432 27.923C29.153 28.4704 28.75 29.3524 28.75 30.3672H34.75ZM34.7443 30.7333C34.8394 30.5539 35.0287 30.2664 35.3715 29.8664L30.816 25.9617C30.2838 26.5826 29.8064 27.2378 29.4432 27.923L34.7443 30.7333ZM35.3601 29.8797C35.6678 29.525 36.0687 29.1381 36.5812 28.7237L32.8094 24.0575C32.072 24.6536 31.4052 25.2823 30.8274 25.9484L35.3601 29.8797ZM36.5835 28.7219C37.0503 28.3438 37.5986 27.981 38.239 27.6397L35.4173 22.3446C34.4743 22.8471 33.6007 23.4166 32.8072 24.0593L36.5835 28.7219ZM38.239 27.6397C38.8173 27.3315 39.4708 27.0724 40.2099 26.8712L38.6339 21.0819C37.4979 21.3911 36.4223 21.8091 35.4173 22.3446L38.239 27.6397ZM40.2058 26.8723C40.8716 26.6921 41.6089 26.5938 42.4297 26.5938V20.5938C41.1255 20.5938 39.8576 20.7506 38.6379 21.0808L40.2058 26.8723ZM42.4297 26.5938C43.2702 26.5938 44.0148 26.6931 44.677 26.8723L46.2449 21.0808C45.0217 20.7497 43.7454 20.5938 42.4297 20.5938V26.5938ZM44.681 26.8734C45.4302 27.0751 46.0858 27.334 46.6595 27.6397L49.4812 22.3446C48.4715 21.8066 47.3875 21.3884 46.2409 21.0797L44.681 26.8734ZM46.6666 27.6436C47.3063 27.9822 47.8422 28.3391 48.2882 28.7064L52.1024 24.0748C51.3089 23.4213 50.4281 22.8459 49.474 22.3408L46.6666 27.6436ZM48.3094 28.7237C48.8161 29.1333 49.2029 29.5116 49.492 29.8529L54.0705 25.9752C53.495 25.2957 52.8245 24.6584 52.0812 24.0575L48.3094 28.7237ZM49.5035 29.8664C49.8463 30.2664 50.0356 30.5539 50.1307 30.7333L55.4318 27.923C55.0686 27.2378 54.5912 26.5826 54.059 25.9617L49.5035 29.8664ZM50.1307 30.7333C50.1913 30.8476 50.2007 30.8841 50.1909 30.8544C50.185 30.8367 50.1699 30.7881 50.1556 30.7124C50.1415 30.6375 50.125 30.5194 50.125 30.3672H56.125C56.125 29.3524 55.722 28.4704 55.4318 27.923L50.1307 30.7333ZM50.125 30.3672C50.125 30.2202 50.1406 30.1058 50.1543 30.0322C50.1682 29.958 50.1829 29.9101 50.1888 29.8922C50.1988 29.8619 50.19 29.8971 50.1307 30.0089L55.4318 32.8192C55.7276 32.2612 56.125 31.3807 56.125 30.3672H50.125ZM50.1307 30.0089C50.0356 30.1883 49.8463 30.4758 49.5035 30.8758L54.059 34.7805C54.5912 34.1596 55.0686 33.5044 55.4318 32.8192L50.1307 30.0089ZM49.492 30.8893C49.1958 31.2389 48.8039 31.6253 48.296 32.0436L52.1102 36.6752C52.8419 36.0726 53.5021 35.4381 54.0705 34.767L49.492 30.8893ZM48.3077 32.034C47.8586 32.4001 47.3188 32.7575 46.6745 33.0986L49.4818 38.4014C50.4312 37.8987 51.3081 37.3291 52.0986 36.6847L48.3077 32.034ZM46.6673 33.1025C46.0936 33.4082 45.4381 33.6671 44.6888 33.8688L46.2487 39.6625C47.3953 39.3538 48.4793 38.9356 49.489 38.3975L46.6673 33.1025ZM44.674 33.8728C44.0087 34.0556 43.265 34.1562 42.4297 34.1562V40.1562C43.7506 40.1562 45.033 39.9965 46.2635 39.6584L44.674 33.8728ZM42.4375 37.5C43.3933 37.5 44.3329 37.3197 45.2252 36.9386L42.8686 31.4208C42.7609 31.4668 42.6276 31.5 42.4375 31.5V37.5ZM45.2389 36.9327C46.0824 36.5675 46.8425 36.0564 47.4963 35.4026L43.2537 31.1599C43.1471 31.2665 43.0217 31.3544 42.8548 31.4267L45.2389 36.9327ZM47.5107 35.3881C48.1511 34.7389 48.6583 33.9879 49.0201 33.1497L43.5112 30.7722C43.4459 30.9236 43.3593 31.0527 43.2393 31.1744L47.5107 35.3881ZM49.0094 33.174C49.4039 32.2819 49.5938 31.3383 49.5938 30.375H43.5938C43.5938 30.5367 43.5649 30.6504 43.5218 30.7479L49.0094 33.174ZM49.5938 30.375C49.5938 29.4082 49.4085 28.4552 49.0094 27.5526L43.5218 29.9787C43.5602 30.0656 43.5938 30.1855 43.5938 30.375H49.5938ZM49.0245 27.5873C48.6623 26.7392 48.1504 25.978 47.4963 25.324L43.2537 29.5666C43.36 29.673 43.4418 29.792 43.5067 29.9439L49.0245 27.5873ZM47.4963 25.324C46.8318 24.6594 46.0553 24.1457 45.1906 23.7891L42.9032 29.3359C43.0488 29.396 43.1578 29.4708 43.2537 29.5666L47.4963 25.324ZM45.2252 23.8036C44.3329 23.4225 43.3933 23.2422 42.4375 23.2422V29.2422C42.6276 29.2422 42.7609 29.2754 42.8686 29.3214L45.2252 23.8036ZM42.4375 23.2422C41.4816 23.2422 40.5435 23.4225 39.6523 23.7992L41.9883 29.3258C42.1075 29.2754 42.2476 29.2422 42.4375 29.2422V23.2422ZM39.6665 23.7933C38.8113 24.1496 38.045 24.6589 37.3853 25.3096L41.599 29.581C41.7102 29.4713 41.8293 29.3921 41.9742 29.3317L39.6665 23.7933ZM37.3855 25.3094C36.7227 25.9632 36.2065 26.7276 35.8426 27.5795L41.3605 29.9361C41.4237 29.788 41.5013 29.6774 41.5988 29.5812L37.3855 25.3094ZM35.8426 27.5795C35.4601 28.4752 35.2812 29.4179 35.2812 30.375H41.2812C41.2812 30.1758 41.3159 30.0404 41.3605 29.9361L35.8426 27.5795ZM35.2812 30.375C35.2812 31.3281 35.4645 32.2631 35.8471 33.1497L41.356 30.7722C41.3115 30.6692 41.2812 30.5469 41.2812 30.375H35.2812ZM35.8578 33.174C36.2235 34.0013 36.7291 34.7442 37.3643 35.3881L41.6357 31.1744C41.5105 31.0474 41.4171 30.9101 41.3454 30.7479L35.8578 33.174ZM37.3787 35.4026C38.0274 36.0513 38.7804 36.5618 39.6179 36.9282L42.0228 31.4312C41.8602 31.3601 41.733 31.2716 41.6213 31.1599L37.3787 35.4026ZM39.6523 36.943C40.5435 37.3197 41.4816 37.5 42.4375 37.5V31.5C42.2476 31.5 42.1075 31.4668 41.9883 31.4164L39.6523 36.943ZM42.4297 29C42.5682 29 42.7548 29.0263 42.9565 29.11C43.1579 29.1935 43.3069 29.3064 43.4026 29.4021L39.1599 33.6448C40.0383 34.5231 41.1833 35 42.4297 35V29ZM43.4026 29.4021C43.495 29.4945 43.6076 29.6415 43.6919 29.8435C43.7767 30.0463 43.8047 30.237 43.8047 30.3828H37.8047C37.8047 31.6344 38.289 32.7739 39.1599 33.6448L43.4026 29.4021ZM43.8047 30.3828C43.8047 30.5213 43.7784 30.708 43.6947 30.9096C43.6111 31.111 43.4983 31.26 43.4026 31.3557L39.1599 27.1131C38.2816 27.9914 37.8047 29.1365 37.8047 30.3828H43.8047ZM43.4197 31.3384C43.3263 31.4333 43.1774 31.5489 42.9725 31.6353C42.7669 31.722 42.5746 31.75 42.4297 31.75V25.75C41.1674 25.75 40.0172 26.2416 39.1428 27.1304L43.4197 31.3384ZM42.4297 31.75C42.2921 31.75 42.1038 31.7237 41.8994 31.6381C41.695 31.5525 41.5441 31.4367 41.4474 31.3384L45.7244 27.1304C44.8426 26.2341 43.6867 25.75 42.4297 25.75V31.75ZM41.4819 31.3729C41.387 31.2795 41.2715 31.1305 41.185 30.9256C41.0983 30.72 41.0703 30.5277 41.0703 30.3828H47.0703C47.0703 29.1206 46.5787 27.9703 45.6899 27.0959L41.4819 31.3729ZM41.0703 30.3828C41.0703 30.2305 41.1001 30.0342 41.1879 29.8274C41.2751 29.622 41.3903 29.4751 41.4819 29.3849L45.6899 33.6619C46.5711 32.795 47.0703 31.6504 47.0703 30.3828H41.0703ZM41.4646 29.4021C41.5636 29.3031 41.7145 29.19 41.9154 29.1072C42.1158 29.0246 42.2984 29 42.4297 29V35C43.6709 35 44.8216 34.5304 45.7073 33.6448L41.4646 29.4021Z",fill:"white",mask:"url(#path-3-outside-1_446_28461)"})]})}),Ot={views:null,downloads:null};function Kt(e){const t=(0,r().O7)(),a=dt(),i=(0,n().VK)((()=>{const{currentUserStore:e}=b().default.state;return null==e?void 0:e.id}),[]),[{value:s,status:c}]=(0,l().r5)((async()=>{if(!i)return{metrics:Ot,lastUpdated:void 0};const e=await x().callApi({eventName:"getMarketplaceMetricSummary",environment:t,data:{metrics:["views","downloads"],sources:a.filtersConfig.sources,dateRange:a.filtersConfig.dateRange}});return"success"===e.type&&e.data.success?e.data:{metrics:Ot,lastUpdated:void 0}}),[i,t,a.filtersConfig]),u="resolved"===c?s.metrics:Ot,p=(0,d().YB)(),g=e.product,{isMobileWidth:f}=(0,m().EQ)(),h=function(e){return(0,o().yK)((t=>({shimmer:{height:"100%",width:"100%"},container:{display:"flex",gap:24,...e?{flexDirection:"column"}:{}},metricTitle:{fontSize:16,fontWeight:L().Ue.medium},header:{fontSize:24,lineHeight:"30px",fontWeight:L().Ue.semibold,marginBottom:4},subheader:{display:"flex",justifyContent:"space-between"},metricContainer:{border:"1px solid rgba(17, 17, 17, 0.1)",borderRadius:6,display:"flex",alignItems:"center",...e?{height:78,width:"100%",justifyContent:"space-between",paddingLeft:20,paddingRight:20}:{height:180,width:304,justifyContent:"center",flexDirection:"column"},gap:8},viewValue:{color:"rgba(46, 152, 234, 1)",fontSize:e?32:42,fontWeight:L().Ue.semibold},metricValue:{display:"flex",alignItems:"center",gap:6},viewIcon:{color:"rgba(46, 152, 234, 0.5)"},downloadValue:{color:"rgba(231, 181, 51, 1)",fontSize:e?32:42,fontWeight:L().Ue.semibold},downloadIcon:{color:"rgba(231, 181, 51, 0.5)"}})),[e])}(f);return(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{style:h.header,children:(0,k.jsx)(d()._H,{id:"creatorProfile.analytics.template.header",defaultMessage:"Top line Metrics"})}),(0,k.jsxs)("div",{style:h.subheader,children:[(0,k.jsx)(St,{filtersConfig:a.filtersConfig,onDateRangeChange:a.onDateRangeChange,onSourceChange:a.onSourceChange}),(0,k.jsx)(Pt,{value:null==s?void 0:s.lastUpdated})]}),(0,k.jsx)(Ce().Z,{size:16}),(0,k.jsxs)("div",{style:h.container,children:[(0,k.jsx)("div",{style:h.metricContainer,children:"pending"===c?(0,k.jsx)(Vt().Z,{style:h.shimmer}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{style:h.metricTitle,children:g?p.formatMessage(qt[g].views):(0,k.jsx)(d()._H,{id:"creatorProfile.analytics.topLineMetrics.views",defaultMessage:"All product views"})}),null!=u&&u.views?(0,k.jsxs)("div",{style:h.metricValue,children:[(0,k.jsx)("div",{style:h.viewIcon,children:(0,k.jsx)(we().y,{iconGroup:Zt,variantName:"large"})}),(0,k.jsx)("div",{style:h.viewValue,children:(0,k.jsx)(d().BK,{value:u.views,maximumFractionDigits:2,...u.views>9999?{notation:"compact"}:{}})})]}):(0,k.jsx)("div",{children:zt({width:54,height:40})})]})}),(0,k.jsx)("div",{style:h.metricContainer,children:"pending"===c?(0,k.jsx)(Vt().Z,{style:h.shimmer}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{style:h.metricTitle,children:g?p.formatMessage(qt[g].downloads):(0,k.jsx)(d()._H,{id:"creatorProfile.analytics.topLineMetrics.downloads",defaultMessage:"All product downloads"})}),null!=u&&u.downloads?(0,k.jsxs)("div",{style:h.metricValue,children:[(0,k.jsx)("div",{style:h.downloadIcon,children:(0,k.jsx)(we().y,{iconGroup:At,variantName:"large"})}),(0,k.jsx)("div",{style:h.downloadValue,children:(0,k.jsx)(d().BK,{value:u.downloads,maximumFractionDigits:2,...u.downloads>9999?{notation:"compact"}:{}})})]}):(0,k.jsx)("div",{children:Nt({width:54,height:40})})]})})]})]})}const qt={template:(0,d().vU)({views:{id:"creatorProfile.analytics.topLineMetrics.templates.views",defaultMessage:"All template views"},downloads:{id:"creatorProfile.analytics.topLineMetrics.templates.downloads",defaultMessage:"All template downloads"}})};function Wt(){const e=(0,o().yK)((()=>({header:{fontSize:24,lineHeight:"30px",fontWeight:L().Ue.semibold,marginBottom:4}})),[]),{isFeatureEnabled:t}=(0,Xe().o)("marketplace_analytics_templates_chart");return(0,k.jsxs)("div",{children:[(0,k.jsx)(Kt,{}),(0,k.jsx)(Dt,{}),t&&(0,k.jsx)(Bt,{header:(0,k.jsx)("div",{style:e.header,children:(0,k.jsx)(d()._H,{id:"creatorProfile.analytics.templateAnalytics.topTemplates.header",defaultMessage:"Top 5 templates"})}),sortBy:"downloads",limit:5,shouldShowPaidFilter:!1})]})}function Gt(){var e,t;const a=(0,r().O7)(),i=(0,d().YB)(),s=dt(),c=(0,n().VK)((()=>{const{currentUserStore:e}=b().default.state;return null==e?void 0:e.id}),[]),[{status:u,value:p}]=(0,l().r5)((async()=>{if(!c)return{timeseriesData:[],lastUpdated:void 0};const e=await x().callApi({eventName:"getMarketplaceMetrics",environment:a,data:{metrics:["downloads"],sources:s.filtersConfig.sources,dateRange:s.filtersConfig.dateRange,by:s.filtersConfig.templateListingId?"templateDate":"date",templateListingId:s.filtersConfig.templateListingId}});if("success"===e.type&&jt(e.data)){const t=e.data;return{webTimeseriesData:t.metrics.map((e=>({x:new Date(e.ds).getTime(),y:e.downloads_web_1d,name:i.formatMessage($t.web)}))),appTimeseriesData:t.metrics.map((e=>({x:new Date(e.ds).getTime(),y:e.downloads_app_1d,name:i.formatMessage($t.app)}))),lastUpdated:e.data.lastUpdated}}return{webTimeseriesData:[],appTimeseriesData:[],lastUpdated:void 0}}),[c,a,i,s.filtersConfig]),g=(0,n().qz)(void 0,at().Z),m=(0,o().yK)((e=>({header:{fontSize:24,lineHeight:"30px",fontWeight:L().Ue.semibold,marginBottom:4},filters:{fontSize:15,lineHeight:"22px",margin:0,fontWeight:L().Ue.semibold},subheader:{display:"flex",justifyContent:"space-between"},container:{marginTop:72}})),[]),f=It();return(0,k.jsxs)("div",{style:m.container,children:[(0,k.jsx)("div",{style:m.header,children:(0,k.jsx)(d()._H,{id:"creatorProfile.analytics.templateDownloads.header",defaultMessage:"Template Downloads"})}),(0,k.jsxs)("div",{style:m.subheader,children:[(0,k.jsx)(St,{filtersConfig:s.filtersConfig,onDateRangeChange:s.onDateRangeChange,onSourceChange:s.onSourceChange,shouldShowTemplateFilter:!0,onTemplateChange:s.onTemplateListingIdChange}),(0,k.jsx)(Pt,{value:null==p?void 0:p.lastUpdated})]}),(0,k.jsx)(tt().C,{value:g,children:(0,k.jsx)(Qe().AxisChart,{tooltipOptions:f,onLoadEventHandler:()=>{},seriesData:[{name:i.formatMessage($t.web),type:"area",fillColor:"rgba(0, 0, 0, 0)",color:"rgba(165, 121, 217, 1)",data:(null==p?void 0:p.webTimeseriesData)??[]},{name:i.formatMessage($t.app),type:"area",fillColor:"rgba(0, 0, 0, 0)",color:"rgba(234, 139, 66, 1)",data:(null==p?void 0:p.appTimeseriesData)??[]}],xAxisType:"datetime",showHorizontalGridLines:!0,xAxisTitle:i.formatMessage($t.date),yAxisTitle:i.formatMessage($t.downloads),yLabelFormatter:e=>(0,Je().uf)(e,e>9999?"compact":"number",i),timezone:"UTC",xLabelFormatter:e=>new Date(e).toLocaleDateString(i.locale,{month:"numeric",day:"numeric",timeZone:"UTC"}),axisType:"line",dataLabelsEnabled:!1,loadingProps:{isInitialLoading:"pending"===u,isThrottledLoading:"pending"===u,initialLoadingSvg:()=>(0,k.jsx)(et().f,{chartType:"line",showCopy:!1})},hasData:"resolved"===u&&(((null==p||null===(e=p.webTimeseriesData)||void 0===e?void 0:e.length)??0)>0||((null==p||null===(t=p.appTimeseriesData)||void 0===t?void 0:t.length)??0)>0)})})]})}const $t=(0,d().vU)({web:{id:"creatorProfile.analytics.templateDownloads.web",defaultMessage:"Web"},app:{id:"creatorProfile.analytics.templateDownloads.app",defaultMessage:"App"},date:{id:"creatorProfile.analytics.templateDownloads.date",defaultMessage:"Date"},downloads:{id:"creatorProfile.analytics.templateDownloads.downloads",defaultMessage:"Downloads"}});function Yt(){const e=(0,o().yK)((()=>({header:{fontSize:24,lineHeight:"30px",fontWeight:L().Ue.semibold,marginBottom:4}})),[]),{isFeatureEnabled:t}=(0,Xe().o)("marketplace_analytics_templates_chart");return(0,k.jsxs)("div",{children:[(0,k.jsx)(Kt,{product:"template"}),t&&(0,k.jsx)(Gt,{}),(0,k.jsx)(Bt,{header:(0,k.jsx)("div",{style:e.header,children:(0,k.jsx)(d()._H,{id:"creatorProfile.analytics.templateAnalytics.allTemplates.header",defaultMessage:"All Templates"})})})]})}function Xt(e){const{creatorId:t}=e,{setView:a}=Ge(),r=(0,o().yK)((e=>({creatorProfileTemplatesEmptyStateHeader:{fontSize:24,color:e.regularTextColor,fontWeight:L().Ue.semibold},creatorProfileTemplatesEmptyStateDescription:{fontSize:15,color:e.mediumTextColor}})),[]),{isMobileWidth:n}=(0,m().EQ)(),[s,l]=(0,i.useState)("overview");return(0,k.jsxs)("div",{children:[(0,k.jsx)(Ee().t,{size:"large",header:(0,k.jsx)(d()._H,{id:"creatorProfile.analytics.pageHeader",defaultMessage:"Analytics"}),subHeader:(0,k.jsx)(d()._H,{id:"creatorProfile.analytics.pageHeaderSubtitle",defaultMessage:"Insights to help you track, analyze, and optimize your content"})}),null==t?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Ce().Z,{size:24}),(0,k.jsx)(Pe,{showCreatorProfileForm:()=>{ke.setState({profileFormType:"create"}),a("/profile")},header:(0,k.jsx)("div",{style:r.creatorProfileTemplatesEmptyStateHeader,children:(0,k.jsx)(d()._H,{id:"creatorProfileEmptyState.analytics.header",defaultMessage:"Create a Creator Profile"})}),description:(0,k.jsx)("div",{style:r.creatorProfileTemplatesEmptyStateDescription,children:(0,k.jsx)(d()._H,{id:"creatorProfileEmptyState.analytics.description",defaultMessage:"A Creator Profile is required to submit, manage, and analyze Notion templates."})})})]}):n?(0,k.jsx)(Qt,{selectedSection:s,onSectionChange:e=>l(e)}):(0,k.jsx)(Jt,{selectedSection:s,onSectionChange:e=>l(e)})]})}function Jt(e){const t=(0,d().YB)(),{selectedSection:a,onSectionChange:i}=e;return(0,k.jsx)(Le,{style:{marginBottom:40},tabs:[{title:t.formatMessage(ea.overview),content:(0,k.jsx)(Wt,{}),onChange:()=>{i("overview")}},{title:t.formatMessage(ea.templates),content:(0,k.jsx)(Yt,{}),onChange:()=>{i("templates")}}],defaultSelectedIndex:"overview"===a?0:1})}function Qt(e){const{selectedSection:t,onSectionChange:a}=e,n=(0,r().O7)(),[s,l]=(0,i.useState)(!1),c=(0,d().YB)(),u=(0,i.useMemo)((()=>function(e){return[{value:"overview",label:e.formatMessage(ea.overviewLabel)},{value:"templates",label:e.formatMessage(ea.templateLabel)}]}(c)),[c]),p=(0,o().yK)((e=>({dropdownButton:{width:"100%",border:"1px solid rgba(0, 0, 0, 0.08)",padding:"8px 16px",borderRadius:4,marginBottom:40,display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:15,fontWeight:455}})),[]);return(0,k.jsxs)("div",{children:[(0,k.jsx)(ve().ZP,{open:s,onClick:()=>{l(!0)},renderOrigin:e=>{var a;let{onClick:i}=e;return(0,k.jsxs)(ye().Z,{style:p.dropdownButton,role:"select",onClick:i,children:[null===(a=u.find((e=>e.value===t)))||void 0===a?void 0:a.label,(0,k.jsx)(we().y,{colorName:"tertiary",iconGroup:be().m,variantName:"small"})]})},popupType:n.device.isMobile?ve().Z4.SlideUp:ve().Z4.Popup,render:()=>(0,k.jsx)(xe().Z,{menuType:Se().o.ActionSheet,children:u.map((e=>(0,k.jsx)(_e().ZP,{title:e.label,onClick:()=>{l(!1),a(e.value)}},e.value)))})}),"overview"===t&&(0,k.jsx)(Wt,{}),"templates"===t&&(0,k.jsx)(Yt,{})]})}const ea=(0,d().vU)({overview:{id:"creatorProfile.analytics.tabs.analytics.overview",defaultMessage:"Overview"},templates:{id:"creatorProfile.analytics.tabs.analytics.templates",defaultMessage:"Templates"},overviewLabel:{id:"creatorProfile.analytics.dropdown.overview",defaultMessage:"Overview"},templateLabel:{id:"creatorProfile.analytics.dropdown.templates",defaultMessage:"Templates"}});var ta=()=>a(906651),aa=()=>a(765513),ia=()=>a(251932),ra=()=>a(148126);function na(){const e=(0,fe().h)();return"completed"===(null==e?void 0:e.stripe_connect_onboarding_phase)}var oa=()=>a(745740),sa=()=>a(593864);function la(e){const{displayName:t,hideProfile:a}=e,{name:i=""}=Ge(),r=function(e){const t=e.split("/"),a=[];for(const i of t)if(i in ua){const e=ua[i];a.push(e)}return a}(i),n=function(e){const t=e.split("/");for(const a of t)try{if("number"==typeof parseInt(a,10))return a}catch{}}(i),o=ca();return a&&r.shift(),(0,k.jsx)("ul",{style:o.crumbContainer,children:r.map(((e,a)=>(0,k.jsx)(da,{isLast:a===r.length-1,value:e.value(n),display:e.display(t)},e.value(n))))})}function da(e){const{isLast:t,value:a,display:i}=e,{setView:r}=Ge(),n=ca();return(0,k.jsx)(k.Fragment,{children:t?(0,k.jsx)("li",{style:n.activeCrumb,children:i},a):(0,k.jsxs)("li",{style:n.crumb,children:[(0,k.jsx)(oa().Z,{onClick:()=>a?r(a):null,style:n.crumbButton,hoveredStyle:n.crumbButton,children:i}),(0,sa().C)({height:16,width:16,color:"rgba(17, 17, 17, 0.5)"})]},a)})}function ca(){return(0,o().yK)((e=>({activeCrumb:{fontWeight:L().Ue.semibold,color:e.regularTextColor},crumb:{display:"flex",gap:"4px",alignItems:"center",fontWeight:L().Ue.semibold,color:"rgba(17, 17, 17, 0.5)"},crumbButton:{borderRadius:"4px",padding:"2px 8px"},crumbContainer:{listStyle:"none",display:"flex",gap:"12px",alignItems:"center",margin:0,padding:"0 0 12px 0"}})),[])}const ua={"new-coupon":{display:()=>(0,k.jsx)(d()._H,{defaultMessage:"New Coupon",id:"creatorProfile.breadcrumb.createCoupon"}),value:()=>"/profile/coupons/new-coupon"},edit:{display:()=>(0,k.jsx)(d()._H,{defaultMessage:"Edit Coupon",id:"creatorProfile.breadcrumb.editCoupon"}),value:e=>`/profile/coupons/edit/${e}`},coupons:{display:()=>(0,k.jsx)(d()._H,{defaultMessage:"Coupons",id:"creatorProfile.breadcrumb.coupons"}),value:()=>"/profile/coupons"},profile:{display:()=>(0,k.jsx)(d()._H,{defaultMessage:"Profile",id:"creatorProfile.breadcrumb.profile"}),value:()=>"/profile"},templates:{display:()=>(0,k.jsx)(d()._H,{defaultMessage:"Templates",id:"creatorProfile.breadcrumb.templates"}),value:()=>"/profile/templates"},faq:{display:()=>(0,k.jsx)(d()._H,{defaultMessage:"Template Creator FAQ",id:"creatorProfile.breadcrumb.faq"}),value:()=>"/profile/templates/faq"},new:{display:()=>(0,k.jsx)(d()._H,{defaultMessage:"New Template",id:"creatorProfile.breadcrumb.newTemplate"}),value:()=>"/profile/templates/form/new"},draft:{display:()=>(0,k.jsx)(d()._H,{defaultMessage:"Edit Template",id:"creatorProfile.breadcrumb.editTemplate"}),value:e=>`/profile/templates/form/draft/${e}`},published:{display:()=>(0,k.jsx)(d()._H,{defaultMessage:"Edit Template",id:"creatorProfile.breadcrumb.editTemplate"}),value:e=>`/profile/templates/form/published/${e}`},integrations:{display:()=>(0,k.jsx)(d()._H,{defaultMessage:"Integrations",id:"creatorProfile.breadcrumb.viewIntegrations"}),value:()=>"/profile/integrations"},"new-integration":{display:()=>(0,k.jsx)(d()._H,{defaultMessage:"New Integration",id:"creatorProfile.breadcrumb.newIntegrationForm"}),value:()=>"/profile/integrations/form/new-integration"},public:{display:e=>(0,k.jsx)(k.Fragment,{children:e}),value:e=>`/profile/integrations/public/${e}`},internal:{display:e=>(0,k.jsx)(k.Fragment,{children:e}),value:e=>`/profile/integrations/internal/${e}`}};function pa(e){const{route:t,children:a,exact:o,shouldRenderCallback:s}=e,{name:l}=Ge(),d=(null==l?void 0:l.split("/"))||[],c=t.split("/"),u=function(e,t){const{name:a}=Ge(),[o,s]=(0,i.useState)(null),l=(0,r().O7)(),d=Boolean(t);i.useEffect((()=>{async function e(e){if(!a)return!1;const t=await e(l,a);s(t)}t&&e(t)}),[t,a,e,l]);const c=(0,n().VK)((()=>!(d&&!o)||(!1===o?(Ue().c4({environment:l,url:"/not-found",redirect:!0}),!1):null!==o&&void 0)),[o,l,d]);return c}(t,s);if(!u)return null;if(o&&l!==t)return null;for(const i of c)if(!d.includes(i))return null;return(0,k.jsx)(ga,{children:a})}function ga(e){return i.useEffect((()=>{const e=document.getElementsByClassName("notion-scroller").item(0);e&&e.scrollTo({top:0,behavior:"smooth"})}),[]),(0,k.jsx)(k.Fragment,{children:e.children})}function ma(){const e=(0,o().yK)((e=>({creatorProfileCouponsEmptyStateHeader:{fontSize:24,color:e.regularTextColor,fontWeight:L().Ue.semibold},creatorProfileCouponsEmptyStateDescription:{fontSize:15,color:e.mediumTextColor}})),[]),{setView:t}=Ge();return(0,k.jsx)(Pe,{showCreatorProfileForm:()=>{ke.setState({profileFormType:"create"}),t("/profile")},header:(0,k.jsx)("div",{style:e.creatorProfileCouponsEmptyStateHeader,children:(0,k.jsx)(d()._H,{id:"creatorProfileEmptyState.coupons.header",defaultMessage:"Create a Creator Profile"})}),description:(0,k.jsx)("div",{style:e.creatorProfileCouponsEmptyStateDescription,children:(0,k.jsx)(d()._H,{id:"creatorProfileEmptyState.coupons.description",defaultMessage:"A Creator Profile is required to manage your coupons."})})})}var fa=()=>a(217465),ha=()=>a(338381);class ba extends je().default{getInitialState(){return{activeCoupons:[],inactiveCoupons:[]}}}const ya=new ba;async function va(e){let{environment:t}=e;const a=await x().callApi({eventName:"getCreatorCoupons",environment:t,data:{}});if("success"===a.type){const e=fa().RecordMapWithRole.create(a.data.recordMap).getModelsByTable(ha().iL),t=e.filter((e=>e.active)).sort(((e,t)=>e.created_time-t.created_time)),i=e.filter((e=>!e.active)).sort(((e,t)=>e.created_time-t.created_time));ya.setState({activeCoupons:t.map((e=>e.id)),inactiveCoupons:i.map((e=>e.id))})}}async function xa(e){let{environment:t,couponId:a}=e;"success"===(await x().callApi({eventName:"deleteMarketplaceCoupon",environment:t,data:{couponId:a}})).type&&await va({environment:t})}async function _a(e){let{environment:t,couponId:a,active:i}=e;const r=new(xt().Qd)(t,{table:ha().iL,id:a});if(!r.canRead())return;const n=r.getModel();if(!n)return;const o=n.getStartTime()??0,s=n.getEndTime()??0;"success"===(await x().callApi({eventName:"createOrUpdateMarketplaceCoupon",environment:t,data:{id:a,active:i,discountType:n.getDiscount().type,discountValue:n.getDiscount().value,usageLimit:n.getCouponUsage().limit,applyToAll:n.getApplyToAll(),eligibleListingIds:n.getEligibleListingIds(),startDate:o,endDate:s}})).type&&await va({environment:t})}var wa=()=>a(661297);const Ca=(0,He().IU)("shop",{viewBox:"0 0 18 18",svg:(0,k.jsx)("path",{d:"M18 3V4.875C18 6.73875 16.4888 8.25 14.625 8.25C13.4513 8.25 12.4163 7.65 11.8125 6.73875C11.2087 7.65 10.1737 8.25 9 8.25C7.82625 8.25 6.79125 7.65 6.1875 6.73875C5.58375 7.65 4.54875 8.25 3.375 8.25C1.51125 8.25 0 6.73875 0 4.875V3L1.5 0H16.5L18 3ZM14.25 13.5H3.75V9.75H1.5V18H16.5V9.75H14.25V13.5Z"})}),Sa=(0,He().IU)("stripeLogo",{viewBox:"0 0 400 400",svg:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("rect",{width:"400",height:"400",rx:"62",fill:"#635bff"}),(0,k.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"#fff",d:"M184.4 155.5c0-9.4 7.7-13.1 20.5-13.1 18.4 0 41.6 5.6 60 15.5v-56.8C244.8 93.1 225 90 205 90c-49.1 0-81.7 25.6-81.7 68.4 0 66.7 91.9 56.1 91.9 84.9 0 11.1-9.7 14.7-23.2 14.7-20.1 0-45.7-8.2-66-19.3v57.5c22.5 9.7 45.2 13.8 66 13.8 50.3 0 84.9-24.9 84.9-68.2-.4-72-92.5-59.2-92.5-86.3z"})]})});var ja=()=>a(521632);function Ma(e){const{message:t,badgeContainerStyle:a,badgeTitleStyle:i}=e,r=(0,o().yK)((e=>({badgeContainer:{borderRadius:"20px",padding:"1px 8px",marginLeft:0,alignSelf:"inherit"},badgeTitle:{fontSize:"12px",fontWeight:L().Ue.semibold,textWrap:"nowrap"}})),[]),n={...r.badgeContainer,...a},s={...r.badgeTitle,...i};return(0,k.jsx)(ja().Z,{style:n,content:(0,k.jsx)("span",{style:s,children:t})})}function ka(e){const{title:t,subtitle:a,pill:i,left:r,right:n}=e,s=(0,o().yK)((e=>({cardContainer:{display:"flex",alignItems:"center",borderRadius:8,border:`1px solid ${e.outlineButtonBorder}`,padding:16,paddingLeft:20,width:"100%"},leftContainer:{marginRight:16},centerContainer:{width:"100%"},rightContainer:{marginLeft:16},titleContainer:{display:"flex",alignItems:"center",justifyContent:"flex-start"},title:{fontWeight:L().Ue.semibold,fontSize:16,lineHeight:"22px"},subtitle:{fontSize:14,color:e.mediumTextColor,lineHeight:"22px"},pillContainer:{marginLeft:9}})),[]);return(0,k.jsxs)("div",{style:s.cardContainer,children:[r?(0,k.jsx)("div",{style:s.leftContainer,children:r}):null,(0,k.jsxs)("div",{style:s.centerContainer,children:[(0,k.jsxs)("div",{style:s.titleContainer,children:[(0,k.jsx)("div",{style:s.title,children:t}),(0,k.jsx)("div",{style:s.pillContainer,children:i})]}),(0,k.jsx)("div",{style:s.subtitle,children:a})]}),n?(0,k.jsx)("div",{style:s.rightContainer,children:n}):null]})}var Ia=()=>a(779247),Ta=()=>a(921981),Pa=()=>a(443269);class Da extends je().default{getInitialState(){return{name:"",handle:"",contactEmail:"",creatorDescription:"",links:kt().DZ(5,kt().a9("")),image:"",coverImage:"",webhookUrl:"",webhookUrlTested:!1,imageErrorMessage:void 0,nameErrorMessage:void 0,handleErrorMessage:void 0,contactEmailErrorMessage:void 0,creatorDescriptionErrorMessage:void 0,coverImageErrorMessage:void 0,webhookUrlErrorMessage:void 0,linksErrorMessage:kt().DZ(5,kt().a9(void 0)),contactEmailToggleError:!1,initialValues:{name:"",handle:"",contactEmail:"",creatorDescription:"",links:kt().DZ(5,kt().a9("")),image:"",coverImage:"",webhookUrl:"",webhookUrlTested:!1}}}}const La=new Da,Ea=(0,He().IU)("thoughtAlertCloud",{viewBox:"0 0 20 20",svg:(0,k.jsx)("path",{d:"M5.3125 16.0938C5.3125 16.8719 4.68438 17.5 3.90625 17.5C3.12812 17.5 2.5 16.8719 2.5 16.0938C2.5 15.3156 3.12812 14.6875 3.90625 14.6875C4.68438 14.6875 5.3125 15.3156 5.3125 16.0938ZM18.125 11.25C18.125 13.6656 16.1656 15.625 13.75 15.625C13.4375 15.625 13.1344 15.5906 12.8406 15.5281C12.0437 16.3562 10.9281 16.875 9.6875 16.875C7.70312 16.875 6.03125 15.5531 5.49375 13.7437C3.48438 13.675 1.875 12.0281 1.875 10C1.875 8.48125 2.77813 7.17812 4.07812 6.5875C4.22813 3.95937 6.4 1.875 9.0625 1.875C10.4469 1.875 11.6969 2.4375 12.6031 3.34375C12.9594 3.20312 13.3438 3.125 13.75 3.125C15.475 3.125 16.875 4.525 16.875 6.25C16.875 6.82188 16.7188 7.35313 16.4531 7.8125C17.4688 8.6125 18.125 9.85313 18.125 11.25ZM11.25 12.1875H8.75V14.0625H11.25V12.1875ZM11.25 4.6875H8.75V8.4375L9.375 10.9375H10.625L11.25 8.4375V4.6875Z"})});function Ra(e){let{primaryOnClick:t,secondaryOnClick:a}=e;const i=(0,d().YB)(),r=(0,o().yK)((e=>({title:{marginBottom:24},icon:{height:28,width:28,fill:"#FFBA33",marginBottom:21},font:{font:"inter",fontSize:16},modalContainer:{padding:"24px 28px",width:400},bullet:{marginBottom:12,paddingLeft:0},list:{marginBottom:22,paddingLeft:22},primaryCta:{justifyContent:"center",width:"100%",height:38,marginBottom:12,color:e.white,background:e.primaryBlack},primaryCtaHovered:{background:e.grayButtonBackground},secondaryCta:{justifyContent:"center",width:"100%",height:38,backgroundColor:e.white,border:`1px solid ${e.grayButtonBackground}`}})),[]);return(0,k.jsxs)("div",{style:r.modalContainer,children:[(0,k.jsx)("span",{children:Ea(r.icon)}),(0,k.jsx)(rt().q,{styleName:"Title-24px/Bold",style:r.title,children:i.formatMessage(Ua.importantNote)}),(0,k.jsxs)("ul",{style:r.list,children:[(0,k.jsx)("li",{style:r.bullet,children:(0,k.jsx)(rt().q,{customStyles:r.font,children:i.formatMessage(Ua.firstBullet)})}),(0,k.jsx)("li",{style:r.bullet,children:(0,k.jsx)(rt().q,{customStyles:r.font,children:i.formatMessage(Ua.secondBullet)})}),(0,k.jsx)("li",{style:r.bullet,children:(0,k.jsx)(rt().q,{customStyles:r.font,children:i.formatMessage(Ua.thirdBullet)})})]}),(0,k.jsx)(j().Z,{style:r.primaryCta,hoveredStyle:r.primaryCtaHovered,onClick:t,children:(0,k.jsx)(rt().q,{styleName:"Heading-17px/Medium",children:i.formatMessage(Ua.primaryCta)})}),(0,k.jsx)(j().Z,{style:r.secondaryCta,onClick:a,children:(0,k.jsx)(rt().q,{styleName:"Heading-17px/Medium",children:i.formatMessage(Ua.secondaryCta)})})]})}const Ua=(0,d().vU)({importantNote:{id:"creatorProfile.sellerImportantNoteModal.importantNote",defaultMessage:"Important note"},firstBullet:{id:"creatorProfile.sellerImportantNoteModal.firstBullet",defaultMessage:"Once you onboard to payments, all existing paid templates will automatically start accepting Notion payments."},secondBullet:{id:"creatorProfile.sellerImportantNoteModal.secondBullet",defaultMessage:"In addition, any links to your template (the notion.site URL) will automatically re-direct to your listing in Marketplace."},thirdBullet:{id:"creatorProfile.sellerImportantNoteModal.thirdBullet",defaultMessage:"You can modify any individual listing to accept payments from a third-party platform in your template settings."},primaryCta:{id:"creatorProfile.sellerImportantNoteModal.primaryCta",defaultMessage:"Continue onboarding"},secondaryCta:{id:"creatorProfile.sellerImportantNoteModal.secondaryCta",defaultMessage:"Learn more"}});function Ba(e){const t=(0,r().O7)(),a=(0,d().YB)(),o=(0,fe().h)(),{onboardingStatus:s,setOnboardingStatus:l}=e,[c,u]=(0,i.useState)(!1),p=i.useCallback((async()=>{if(c)return;u(!0);const e=await x().callApi({eventName:"initiateCreatorStripeOnboarding",environment:t,data:{}});"success"===e.type?(l("started"),window.location.reload(),window.open(e.data.onboardingLink,"_blank","noreferrer")):_().UW((0,Pa().wf)(a,e)),u(!1)}),[t,l,a,c]),g=(0,n().VK)((()=>La.state.contactEmail),[]),m=i.useCallback((async()=>{if(c)return;u(!0);const e=await x().callApi({eventName:"retrieveCreatorStripeDashboardLink",environment:t,data:{}});"success"===e.type?window.open(e.data.dashboardLink,"_blank"):_().UW((0,Pa().wf)(a,e)),u(!1)}),[t,a,c]),[f,h]=i.useState(!1);return"enabled"===s?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Ha,{onClick:()=>{var e;o&&(g&&null!==(e=o.attributes)&&void 0!==e&&e.contactEmail?h(!0):La.setState({...La.state,contactEmailToggleError:!0,contactEmailErrorMessage:a.formatMessage(Fa.contactEmailRequiredForOnboardingErrorMessage)}))},children:(0,k.jsx)(d()._H,{id:"creatorProfileSeller.button.getStarted",defaultMessage:"Get started"})}),(0,k.jsx)(Ta().c,{isOpen:f,onClosed:()=>h(!1),render:()=>(0,k.jsx)(Ra,{primaryOnClick:p,secondaryOnClick:()=>{h(!1),window.open(ra().UY("guides.marketplaceSelling"),"_blank","noreferrer")}}),showCloseIcon:!0})]}):"started"===s?(0,k.jsx)(Ha,{onClick:p,children:(0,k.jsx)(d()._H,{id:"creatorProfileSeller.button.completeOnboarding",defaultMessage:"Complete onboarding"})}):"completed"===s?(0,k.jsx)(Ha,{onClick:m,children:(0,k.jsx)(d()._H,{id:"creatorProfileSeller.button.sellerDashboard",defaultMessage:"Stripe seller dashboard"})}):null}function Ha(e){const{children:t,...a}=e,i=(0,o().yK)((e=>({externalIcon:{paddingLeft:4}})),[]);return(0,k.jsxs)(j().Z,{isBlue:!0,...a,ignoreLocalHoverState:void 0,children:[t,(0,k.jsx)("div",{style:i.externalIcon,children:(0,k.jsx)(we().y,{iconGroup:Ia().T,variantName:"small"})})]})}const Fa=(0,d().vU)({contactEmailRequiredForOnboardingErrorMessage:{id:"creatorProfileSellerAreaButtons.contactEmailRequiredForOnboardingErrorMessage",defaultMessage:"Stripe requires that you add an email address. Please add and 'Save' to continue."}}),Za="https://notion.notion.site/11fefdeead0581efa85cccef11c2fdda?pvs=105";function Aa(e){const{onboardingStatus:t,setOnboardingStatus:a}=e,i=(0,d().YB)(),r=(0,o().yK)((e=>({button:{fontWeight:L().Ue.semibold},inProgressBadgeContainer:{backgroundColor:e.accentColors.orange[100]},inProgressBadgeTitle:{color:e.accentColors.orange[500]},completedBadgeContainer:{backgroundColor:e.accentColors.green[100]},completedBadgeTitle:{color:e.accentColors.green[500]}})),[]);switch(t){case"disabled":return(0,k.jsx)(ka,{title:i.formatMessage(Va.calloutTitleDisabled),subtitle:i.formatMessage(Va.calloutSubtitleDisabled),left:Ca({height:16,width:16}),right:(0,k.jsx)("div",{style:r.button,children:(0,k.jsx)(wa().Z,{onClick:()=>{window.open(Za)},children:(0,k.jsx)(d()._H,{id:"creatorProfileSellerCallout.button.fillOutSurvey",defaultMessage:"Fill out survey"})})})});case"enabled":return(0,k.jsx)(ka,{title:i.formatMessage(Va.calloutTitleEnabled),subtitle:i.formatMessage(Va.calloutSubtitleEnabled),left:Sa({height:24,width:24}),right:(0,k.jsx)(Ba,{onboardingStatus:t,setOnboardingStatus:a})});case"started":return(0,k.jsx)(ka,{title:i.formatMessage(Va.calloutTitleStarted),subtitle:i.formatMessage(Va.calloutSubtitleStarted),pill:(0,k.jsx)(Ma,{message:(0,k.jsx)(d()._H,{id:"creatorProfileSellerCallout.badge.inProgress",defaultMessage:"In Progress"}),badgeContainerStyle:r.inProgressBadgeContainer,badgeTitleStyle:r.inProgressBadgeTitle}),left:Sa({height:24,width:24}),right:(0,k.jsx)(Ba,{onboardingStatus:t,setOnboardingStatus:a})});case"completed":return(0,k.jsx)(ka,{title:i.formatMessage(Va.calloutTitleCompleted),subtitle:i.formatMessage(Va.calloutSubtitleCompleted),pill:(0,k.jsx)(Ma,{message:(0,k.jsx)(d()._H,{id:"creatorProfileSellerCallout.badge.complete",defaultMessage:"Complete"}),badgeContainerStyle:r.completedBadgeContainer,badgeTitleStyle:r.completedBadgeTitle}),left:Sa({height:24,width:24}),right:(0,k.jsx)(Ba,{onboardingStatus:t,setOnboardingStatus:a})})}}const Va=(0,d().vU)({calloutTitleDisabled:{id:"creatorProfileSellerCallout.title.stageDisabled",defaultMessage:"Get access to Stripe Merchant"},calloutSubtitleDisabled:{id:"creatorProfileSellerCallout.subtitle.stageDisabled",defaultMessage:"Complete a short survey to get started with payments in Notion"},calloutTitleEnabled:{id:"creatorProfileSellerCallout.title.stageEnabled",defaultMessage:"Complete onboarding with Stripe"},calloutSubtitleEnabled:{id:"creatorProfileSellerCallout.subtitle.stageEnabled",defaultMessage:"Get all of your paid templates processed on Notion"},calloutTitleStarted:{id:"creatorProfileSellerCallout.title.stageStarted",defaultMessage:"Pick up where you left off"},calloutSubtitleStarted:{id:"creatorProfileSellerCallout.subtitle.stageStarted",defaultMessage:"After completing all the steps, it should take up to 20 minutes to get verified"},calloutTitleCompleted:{id:"creatorProfileSellerCallout.title.stageCompleted",defaultMessage:"You've been successfully onboarded"},calloutSubtitleCompleted:{id:"creatorProfileSellerCallout.subtitle.stageCompleted",defaultMessage:"All of your information has been verified. Go forth and sell!"}});function Na(){const e=(0,o().yK)((e=>({icon:{height:32,width:32,color:e.accentColors.gray[200]},container:{width:"100%",border:"2px dashed",borderColor:e.accentColors.gray[100],borderRadius:8,display:"grid",placeItems:"center",height:"100%",minHeight:297},header:{display:"flex",flexDirection:"column",alignItems:"center",color:e.accentColors.gray[500],gap:"12px"}})),[]),t=(0,fe().h)();return(0,k.jsx)("div",{style:e.container,children:(0,k.jsxs)("div",{style:e.header,children:[(0,Ze().T)(e.icon),za(null==t?void 0:t.stripe_connect_onboarding_phase)]})})}function za(e){if(!e)return null;switch(e){case"completed":return(0,k.jsx)(d()._H,{id:"creatorProfile.coupons.emptyState.headerCanCreate",defaultMessage:"You haven't created any coupons yet."});case"disabled":return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(d()._H,{id:"creatorProfile.coupons.emptyState.headerCannotCreate",defaultMessage:"You must be a Stripe-verified creator to add coupons."}),(0,k.jsx)(ta().Z,{onClick:()=>{window.open(Za)},children:(0,k.jsx)(d()._H,{id:"creatorProfile.coupons.emptyStateApplyButton",defaultMessage:"Apply"})})]});case"enabled":case"started":return(0,k.jsx)(d()._H,{id:"creatorProfile.coupons.emptyState.headerStatusPending",defaultMessage:"Your Stripe verification status is still pending, you can add coupons upon completion."});default:return(0,V().t1)(e)}}var Oa=()=>a(86282);const Ka=30,qa="DELETED__",Wa=1e6,Ga=5e3;function $a(e){return new Date(parseInt(e.toString())).toISOString().split("T")[0]}var Ya=()=>a(473759),Xa=()=>a(1910),Ja=()=>a(255577),Qa=()=>a(388284),ei=()=>a(627990),ti=()=>a(913813),ai=()=>a(701572),ii=()=>a(337968),ri=()=>a(739479);const ni=(0,d().vU)({edit:{id:"creatorProfile.coupons.actions.edit",defaultMessage:"Edit"},deactivate:{id:"creatorProfile.coupons.actions.deactivate",defaultMessage:"Deactivate"},delete:{id:"creatorProfile.coupons.actions.delete",defaultMessage:"Delete coupon"},relist:{id:"creatorProfile.coupons.actions.relist",defaultMessage:"Make coupon active"},couponActionsAriaLabel:{id:"creatorProfile.coupons.actions.ariaLabel",defaultMessage:"Coupons actions"}});function oi(e){const{type:t,couponId:a}=e,i=(0,r().O7)(),n=(0,d().YB)(),s=(0,o().yK)((e=>({buttonIcon:{width:20,height:20},deleteButton:{color:e.icon.uiRedPrimary}})),[]),l="active"===t?[{key:"edit",render:e=>(0,k.jsx)(it().Z,{...e,icon:(0,ii().D)(s.buttonIcon),title:n.formatMessage(ni.edit)}),action:()=>{(0,S().j)({environment:i,event:{eventName:"marketplace_coupon_self_serve",eventProperties:{action:"edit",source:"creator_coupons_active",coupon_id:a}}}),Ue().c4({environment:i,url:`/profile/coupons/edit/${a}`})}},{key:"deactivate",render:e=>(0,k.jsx)(it().Z,{...e,icon:(0,ai().C)(s.buttonIcon),title:n.formatMessage(ni.deactivate)}),action:async()=>{await async function(e){let{environment:t,couponId:a}=e;await _a({environment:t,couponId:a,active:!1})}({environment:i,couponId:a}),(0,S().j)({environment:i,event:{eventName:"marketplace_coupon_self_serve",eventProperties:{action:"deactivate",source:"creator_coupons_active",coupon_id:a}}})}},{key:"delete",render:e=>(0,k.jsx)(it().Z,{...e,icon:(0,ri().y)(s.buttonIcon),title:n.formatMessage(ni.delete),buttonStyle:s.deleteButton}),action:async()=>{await xa({environment:i,couponId:a}),(0,S().j)({environment:i,event:{eventName:"marketplace_coupon_self_serve",eventProperties:{action:"delete",source:"creator_coupons_active",coupon_id:a}}})}}]:[{key:"edit",render:e=>(0,k.jsx)(it().Z,{...e,icon:(0,ii().D)(s.buttonIcon),title:n.formatMessage(ni.edit)}),action:()=>{(0,S().j)({environment:i,event:{eventName:"marketplace_coupon_self_serve",eventProperties:{action:"edit",source:"creator_coupons_inactive",coupon_id:a}}}),Ue().c4({environment:i,url:`/profile/coupons/edit/${a}`})}},{key:"relist",render:e=>(0,k.jsx)(it().Z,{...e,icon:(0,k.jsx)(we().y,{iconGroup:Ya().v,variantName:"default"}),title:n.formatMessage(ni.relist)}),action:async()=>{(0,S().j)({environment:i,event:{eventName:"marketplace_coupon_self_serve",eventProperties:{action:"activate",source:"creator_coupons_inactive",coupon_id:a}}}),await async function(e){let{environment:t,couponId:a}=e;await _a({environment:t,couponId:a,active:!0})}({environment:i,couponId:a})}},{key:"delete",render:e=>(0,k.jsx)(it().Z,{...e,icon:(0,ri().y)(s.buttonIcon),title:n.formatMessage(ni.delete),buttonStyle:s.deleteButton}),action:async()=>{(0,S().j)({environment:i,event:{eventName:"marketplace_coupon_self_serve",eventProperties:{action:"delete",source:"creator_coupons_inactive",coupon_id:a}}}),await xa({environment:i,couponId:a})}}];return(0,k.jsx)(xe().Z,{menuType:Se().o.Popup,width:200,children:(0,k.jsx)(Ja().Z,{initialFocus:void 0,type:Ja().i.Vertical,sections:[{key:"actions",render:e=>(0,k.jsx)(Qa().Z,{...e}),items:l}]})})}function si(e){const{type:t,couponId:a}=e,i=(0,o().yK)((()=>({buttonIcon:{width:14,height:14}})),[]),r=(0,d().YB)();return(0,k.jsx)(ve().ZP,{alignmentToOrigin:ei().v2.End,renderOrigin:e=>(0,k.jsx)(Xa().Z,{...e,ariaLabel:r.formatMessage(ni.couponActionsAriaLabel),icon:ti().O,iconStyle:i.buttonIcon}),popupType:ve().Z4.Popup,render:()=>(0,k.jsx)(oi,{type:t,couponId:a})})}var li=()=>a(396136),di=()=>a(355732),ci=()=>a(943620);function ui(e){const t=(0,r().O7)();return(0,n().VK)((()=>{if(!e)return[];return e.map((e=>new(xt().y$)(t,{table:di().Vj,id:e}))).filter((e=>e.getCheckoutEnabled())).map((e=>e.getProductId())).filter((e=>(0,V().$K)(e))).map((e=>new(xt().j$)(t,{table:yt().nE,id:e}))).filter((e=>{var t;return(0,V().$K)(e)&&(null===(t=e.getAttributes())||void 0===t?void 0:t.checkout_enabled)})).map((e=>e.getListingId())).filter((e=>(0,V().$K)(e)))}),[t,e])}const pi=4,gi=(0,d().vU)({unknownTemplate:{defaultMessage:"Unknown template",id:"creatorProfile.couponsTable.templatesDropdown.unknownTemplate"},showMore:{defaultMessage:"View {count} more",id:"creatorProfile.couponsTable.templatesDropdown.showMore"}});function mi(e){const{eligibleListingIds:t}=e,a=(0,r().O7)(),o=(0,d().YB)(),[s,l]=(0,i.useState)(t.length<=pi),c=(0,n().VK)((()=>{const e=[];for(const i of t){const t=new(xt().y$)(a,{table:di().Vj,id:i});if(!t.isReady())continue;const r=t.getProductId();if(void 0===r||!t.getCheckoutEnabled())continue;const n=new(xt().j$)(a,{table:yt().nE,id:r});if(!n.isReady())continue;const o=n.getBlockId();if(void 0===o)continue;const s=new(xt().G)(a,{table:li().iU,id:o});if(!s.isReady())continue;const l=s.getIcon();e.push({templateName:n.getName(),icon:l})}return e}),[t,a]),u=(0,i.useMemo)((()=>{const e=(s?c:c.slice(0,pi)).map(((e,t)=>({key:`template-${t}`,render:t=>(0,k.jsx)(it().Z,{focused:!1,...t,icon:e.icon?(0,k.jsx)(ci().Z,{icon:e.icon,isEmptyPage:!1,size:16,disabled:!0}):void 0,title:e.templateName,disabled:!0}),action:()=>{},disabled:!0})));return s||e.push({key:"show-more",render:e=>(0,k.jsx)(it().Z,{focused:!1,...e,title:o.formatMessage(gi.showMore,{count:c.length-pi})}),action:()=>l(!0),disabled:!1}),e}),[c,s,o]);return(0,k.jsx)(xe().Z,{menuType:Se().o.Popup,width:264,children:(0,k.jsx)(Ja().Z,{type:Ja().i.Vertical,initialFocus:void 0,sections:[{key:"templates",items:u,render:e=>(0,k.jsx)(Qa().Z,{...e})}]})})}function fi(e){const{applyToAll:t,eligibleListingIds:a}=e,i=ui(a).length;return(0,k.jsx)(ve().ZP,{alignmentToOrigin:ei().v2.End,renderOrigin:e=>(0,k.jsx)(j().Z,{disabled:t,...e,children:t?(0,k.jsx)(d()._H,{id:"creatorProfile.couponsTable.templatesDropdown.allTemplates",defaultMessage:"All templates"}):(0,k.jsx)(d()._H,{id:"creatorProfile.couponsTable.templatesDropdown.templates",defaultMessage:"{count, plural, one {1 template} other {{count} templates}}",values:{count:i}})}),popupType:ve().Z4.Popup,render:()=>(0,k.jsx)(mi,{eligibleListingIds:a}),disabled:0===i})}const hi=[{key:"code",header:(0,k.jsx)(d()._H,{id:"creatorProfile.couponsTable.column.code",defaultMessage:"Code"}),style:{width:"15%"}},{key:"value",header:(0,k.jsx)(d()._H,{id:"creatorProfile.couponsTable.column.value",defaultMessage:"Value"}),style:{width:"15%"}},{key:"startDate",header:(0,k.jsx)(d()._H,{id:"creatorProfile.couponsTable.column.startDate",defaultMessage:"Start date (UTC)"}),style:{width:"15%"}},{key:"endDate",header:(0,k.jsx)(d()._H,{id:"creatorProfile.couponsTable.column.endDate",defaultMessage:"End date (UTC)"}),style:{width:"15%"}},{key:"usage",header:(0,k.jsx)(d()._H,{id:"creatorProfile.couponsTable.column.usage",defaultMessage:"Uses"}),style:{width:"15%"}},{key:"templates",header:(0,k.jsx)(d()._H,{id:"creatorProfile.couponsTable.column.templates",defaultMessage:"Templates"}),style:{width:"15%"}},{key:"edit",header:(0,k.jsx)("div",{}),style:{width:"10%"}}],bi=(0,d().vU)({unlimited:{id:"creatorProfile.couponsTable.unlimited",defaultMessage:"Unlimited"},unspecified:{id:"creatorProfile.couponsTable.unspecified",defaultMessage:"Unspecified"},percentageDiscount:{id:"creatorProfile.couponsTable.percentageDiscount",defaultMessage:"{value}% off"},fixedDiscount:{id:"creatorProfile.couponsTable.fixedDiscount",defaultMessage:"${value} off"},active:{id:"creatorProfile.couponsTable.active",defaultMessage:"Active"},inactive:{id:"creatorProfile.couponsTable.inactive",defaultMessage:"Inactive"}});function yi(e,t,a){const i=t.code,r="percentage"===t.getDiscount().type?e.formatMessage(bi.percentageDiscount,{value:t.getDiscount().value}):e.formatMessage(bi.fixedDiscount,{value:t.getDiscount().value/100}),n=t.getStartTime()?$a(t.getStartTime()):e.formatMessage(bi.unspecified),o=t.getEndTime()?$a(t.getEndTime()):e.formatMessage(bi.unspecified),s=t.getCouponUsage().number_of_uses,l=t.getCouponUsage().limit===Number.MAX_VALUE?e.formatMessage(bi.unlimited):t.getCouponUsage().limit;return[(0,k.jsx)("div",{style:{wordBreak:"break-word"},children:i},"code"),(0,k.jsx)("div",{children:r},"value"),(0,k.jsx)("div",{children:n},"startDate"),(0,k.jsx)("div",{children:o},"endDate"),(0,k.jsx)("div",{children:`${s} / ${l}`},"usage"),(0,k.jsx)(fi,{applyToAll:t.apply_to_all,eligibleListingIds:t.getEligibleListingIds()},`templates-${t.id}`),(0,k.jsx)(si,{type:a,couponId:t.id},`action-${t.id}`)]}function vi(e){const{type:t}=e,a=(0,d().YB)(),i=(0,o().yK)((()=>({title:{fontSize:24,fontWeight:L().Ue.semibold},container:{overflowX:"auto"},table:{minWidth:640}})),[]),s=(0,r().O7)(),l=(0,n().VK)((()=>("active"===t?ya.state.activeCoupons:ya.state.inactiveCoupons).map((e=>{const i=new(xt().Qd)(s,{table:ha().iL,id:e}).getModel();if(i)return{key:i.id,columns:yi(a,i,t)}})).filter(V().$K)),[s,a,t]),c="active"===t?a.formatMessage(bi.active):a.formatMessage(bi.inactive);return(0,k.jsxs)("div",{style:i.container,children:[(0,k.jsx)("div",{style:i.title,children:c}),(0,k.jsx)(Ce().Z,{size:24}),(0,k.jsx)(Rt().Z,{columns:hi,rows:l,tableStyle:i.table})]})}function xi(){const e=(0,r().O7)(),[t]=(0,l().r5)((async()=>{await va({environment:e})}),[e]),{activeCoupons:a,inactiveCoupons:i}=(0,n().Kw)(ya);return"resolved"===t.status&&0===a.length&&0===i.length?(0,k.jsx)(Na,{}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(vi,{type:"active"}),(0,k.jsx)(Ce().Z,{size:24}),(0,k.jsx)(vi,{type:"inactive"})]})}var _i=()=>a(730120),wi=()=>a(366767),Ci=()=>a(990966),Si=()=>a(312578),ji=()=>a(296034),Mi=()=>a(328482),ki=()=>a(384510),Ii=()=>a(431595);const Ti=["codeError","discountValueError","discountTypeError","startDateError","endDateError","usageLimitError","eligibleListingIdsError"];class Pi extends je().default{getInitialState(){return{id:void 0,code:"",discount:{type:"percentage",value:0},coupon_usage:{limit:Number.MAX_VALUE,number_of_uses:0},active:!0,startDate:"",endDate:"",apply_to_all:!1,eligible_listing_ids:[],codeError:void 0,discountValueError:void 0,discountTypeError:void 0,startDateError:void 0,endDateError:void 0,usageLimitError:void 0,eligibleListingIdsError:void 0,initialValues:{id:void 0,code:"",discount:{type:"percentage",value:0},active:!1,startDate:"",endDate:"",coupon_usage:{limit:Number.MAX_VALUE,number_of_uses:0},apply_to_all:!1,eligible_listing_ids:[]}}}}const Di=new Pi;class Li extends je().default{getInitialState(){return{templateIds:[]}}}const Ei=new Li;async function Ri(e,t){const a=await x().callApi({eventName:"checkMarketplaceCouponExists",environment:e,data:{code:t}});"success"===a.type&&a.data.codeExists&&Di.setState({...Di.state,codeError:z().Z.formatMessage(Yi.couponCodeTakenError)})}async function Ui(e){const{initialValues:t,...a}=Di.state;Di.state.id||(Zi(a.code),await Ri(e,a.code)),Ai(a.discount),a.endDate&&Ni(a.endDate),a.startDate&&Vi(a.startDate),zi(a.coupon_usage.limit),function(e,t){if(t)return;Fi({value:e,validationFunction:$i,fieldName:"eligibleListingIdsError"})}(a.eligible_listing_ids,a.apply_to_all);for(const o of Ti)if(Di.state[o])return!1;const i={discountType:a.discount.type,discountValue:a.discount.value,active:a.active,applyToAll:a.apply_to_all,startDate:a.startDate,endDate:a.endDate,usageLimit:a.coupon_usage.limit,eligibleListingIds:a.eligible_listing_ids??[]},r=a.id?{id:a.id,...i}:{code:a.code,...i},n=await x().callApi({eventName:"createOrUpdateMarketplaceCoupon",environment:e,data:{...r}});return!(!n||(0,Ii().Rp)(n)||"failed"===n.type)&&n.data.success}function Bi(e){Di.setState({...Di.state,[e]:void 0})}const Hi=200;function Fi(e){const{value:t,validationFunction:a,fieldName:i}=e;try{a(t)}catch(r){if((0,Ii().Cx)(r)){const e=(0,Pa().nX)(z().Z.getIntl(),r.body);e&&Di.setState({...Di.state,[i]:e})}}}function Zi(e){Fi({value:e,validationFunction:Gi,fieldName:"codeError"})}function Ai(e){Fi({value:e,validationFunction:Wi,fieldName:"discountValueError"})}function Vi(e){Fi({value:e,validationFunction:qi,fieldName:"startDateError"})}function Ni(e){Fi({value:e,validationFunction:qi,fieldName:"endDateError"})}function zi(e){Fi({value:e,validationFunction:Oi,fieldName:"usageLimitError"})}function Oi(e){if(!function(e,t){const a=Number.isInteger(e)&&e>0,i=e<=Wa||e===Number.MAX_VALUE;return a&&i&&e>=t}(e,Di.state.coupon_usage.number_of_uses)){if(e<Di.state.coupon_usage.number_of_uses)throw new(Ii().XV)("Coupon has already been used more times than this limit",{type:"marketplace_coupon_submission_invalid_usage_limit_already_surpassed"});throw new(Ii().XV)("Invalid usage limit",{type:"marketplace_coupon_submission_invalid_usage_limit"})}}function Ki(e){const t=_i().ou.now().toUTC().startOf("day").toMillis();return _i().ou.fromFormat(e,"yyyy-MM-dd",{zone:"utc"}).startOf("day").toMillis()<t}function qi(e){if(""!==e){if(isNaN(Date.parse(e)))throw new(Ii().XV)("Date is misformed",{type:"marketplace_coupon_submission_invalid_date"});if(Ki(e))throw new(Ii().XV)("Date cannot be in the past",{type:"marketplace_coupon_submission_invalid_date_in_past"});if(Di.state.startDate&&Di.state.endDate&&_i().ou.fromFormat(Di.state.endDate,"yyyy-MM-dd",{zone:"utc"}).endOf("day").toMillis()<_i().ou.fromFormat(Di.state.startDate,"yyyy-MM-dd",{zone:"utc"}).startOf("day").toMillis())throw new(Ii().XV)("End date cannot be before start date",{type:"marketplace_coupon_submission_start_date_end_date_out_of_order"})}}function Wi(e){if(!function(e){const{type:t,value:a}=e;if(isNaN(a)||!(a>=1))return!1;if("percentage"===t){const e=a<=99,t=Math.floor(a)===a;return e&&t}return"fixed"===t}(e))throw new(Ii().XV)("Invalid discount",{type:"marketplace_coupon_submission_invalid_discount"})}function Gi(e){if(!function(e){const t=!(0,Oa().f)(e)&&!e.startsWith(qa)&&""!==e&&function(e){return/^[A-Z0-9]+$/.test(e)}(e),a=e.length<=Ka;return t&&a}(e))throw new(Ii().XV)("Coupon code invalid",{type:"marketplace_coupon_submission_invalid_code"})}function $i(e){if(!e||0===e.length)throw new(Ii().XV)("No eligible listing ids provided",{type:"marketplace_coupon_submission_invalid_eligible_listing_ids"})}const Yi=(0,d().vU)({couponCodeTakenError:{id:"couponFormActions.codeAlreadyUsedError",defaultMessage:"Invalid code, code already in use by another coupon"}});var Xi=()=>a(839328);var Ji=()=>a(806095);const Qi=(0,He().IU)("exclamationMarkTriangle",{viewBox:"0 0 16 16",svg:(0,k.jsx)("path",{d:"M2.94141 14.1181C2.54493 14.1181 2.20085 14.0315 1.90918 13.8584C1.61752 13.6852 1.39193 13.4528 1.23243 13.1611C1.07748 12.8694 1 12.5459 1 12.1904C1 11.844 1.09115 11.5136 1.27344 11.1992L6.56446 1.97754C6.74219 1.65397 6.98145 1.41016 7.28223 1.2461C7.58301 1.08203 7.89747 1 8.22559 1C8.55369 1 8.86589 1.08203 9.16209 1.2461C9.45829 1.4056 9.69989 1.64942 9.88669 1.97754L15.1777 11.1992C15.2689 11.3541 15.3373 11.5159 15.3828 11.6845C15.4284 11.8531 15.4512 12.0218 15.4512 12.1904C15.4512 12.5459 15.3714 12.8694 15.2119 13.1611C15.0524 13.4528 14.8268 13.6852 14.5352 13.8584C14.2481 14.0315 13.9063 14.1181 13.5098 14.1181H2.94141ZM3.06446 12.8261H13.3867C13.6009 12.8261 13.7695 12.7556 13.8926 12.6143C14.0156 12.473 14.0772 12.3089 14.0772 12.122C14.0772 11.9899 14.0453 11.8624 13.9815 11.7393L8.81349 2.68848C8.74509 2.57455 8.65849 2.49252 8.55369 2.44239C8.44889 2.3877 8.33949 2.36035 8.22559 2.36035C8.11166 2.36035 8 2.3877 7.89063 2.44239C7.78581 2.49252 7.7015 2.57455 7.6377 2.68848L2.46289 11.7255C2.43099 11.7893 2.40821 11.8577 2.39454 11.9306C2.38086 11.999 2.37403 12.0628 2.37403 12.122C2.37403 12.3089 2.43555 12.473 2.5586 12.6143C2.68164 12.7556 2.85026 12.8261 3.06446 12.8261ZM8.23239 9.38765C7.83594 9.38765 7.63086 9.18715 7.61719 8.78615L7.52149 5.46387C7.51237 5.26335 7.5739 5.09929 7.70606 4.97168C7.83822 4.84408 8.00912 4.78028 8.21875 4.78028C8.42839 4.78028 8.60159 4.84636 8.73829 4.97852C8.87499 5.10612 8.93879 5.26791 8.92969 5.46387L8.82029 8.78615C8.81119 9.18715 8.61519 9.38765 8.23239 9.38765ZM8.23239 11.6572C8.00912 11.6572 7.81771 11.5865 7.65821 11.4453C7.50326 11.2994 7.42579 11.1194 7.42579 10.9052C7.42579 10.691 7.50326 10.5133 7.65821 10.372C7.81771 10.2262 8.00912 10.1533 8.23239 10.1533C8.45119 10.1533 8.63799 10.2239 8.79299 10.3652C8.95249 10.5065 9.03219 10.6865 9.03219 10.9052C9.03219 11.124 8.95249 11.304 8.79299 11.4453C8.63349 11.5865 8.44659 11.6572 8.23239 11.6572Z"})}),er=(0,i.forwardRef)((function(e,t){const r=(0,i.useRef)(null),[n,s]=(0,i.useState)(!1),l=(0,o().yK)((e=>({iconStyles:{height:"14px",width:"14px",fill:e.accentColors.red[500]},creatorProfileSubmissionErrorBannerContainer:{color:e.accentColors.red[500],fontSize:"13.5px",marginTop:"20px",scrollMarginTop:"300px",maxWidth:"960px",minHeight:"40px",borderRadius:"8px",padding:"10px 24px 10px 24px",display:"flex",alignItems:"center",flexWrap:"wrap",gap:"10px",backgroundColor:e.accentColors.red[100]},creatorProfileSubmissionErrorBannerHidden:{scrollMarginTop:"300px"}})),[]),{count:c}=e,u=(0,a(565630).D9)(c);let p=null;return(0,i.useEffect)((()=>{void 0!==u&&c<u&&s(!1)}),[c,u]),0!==c&&n&&(p=(0,k.jsxs)(k.Fragment,{children:[Qi(l.iconStyles),(0,k.jsx)(d()._H,{defaultMessage:"{count, plural, one {There is {count} error below} other {There are {count} errors below}}",id:"creatorProfile.form.CreatorProfileSubmissionErrorBanner",values:{count:c}})]})),(0,i.useImperativeHandle)(t,(()=>({scrollIntoView(e){var t,a;s(!0),null==r||null===(t=r.current)||void 0===t||null===(a=t.scrollIntoView)||void 0===a||a.call(t,e)}})),[]),(0,k.jsx)("div",{ref:r,style:c>0&&n?l.creatorProfileSubmissionErrorBannerContainer:l.creatorProfileSubmissionErrorBannerHidden,children:p})}));var tr=()=>a(327411),ar=()=>a(915725);function ir(e){const[t,a]=i.useState(!1),{name:r,isActive:n,disabled:s,onClick:l,style:d}=e,c=(0,o().yK)((()=>({toggleInner:{background:"#ffffff",width:"14px",height:"14px",borderRadius:"14px",position:"relative",left:"0",transition:"left 150ms"},toggleInnerActive:{transition:"left 150ms",left:"12px"},toggleActive:{background:"#2383e2"},toggle:{display:"block",width:"30px",height:"18px",background:"rgba(0, 0, 0, 0.2)",borderRadius:"30px",border:"0",padding:"2px"},toggleFocus:{outline:"rgba(35, 131, 226, 0.57) solid 2px"},disabled:{opacity:.5}})),[]),u={...c.toggle,...n?c.toggleActive:{},...t?c.toggleFocus:{},...s?c.disabled:{},...d};return(0,k.jsx)("button",{style:u,type:"button",onClick:l,name:r,id:r,"aria-pressed":n?"true":"false","aria-label":r,"aria-describedby":r,disabled:s,onFocus:()=>a(!0),onBlur:()=>a(!1),children:(0,k.jsx)("div",{style:n?{...c.toggleInner,...c.toggleInnerActive}:c.toggleInner})})}const rr=ir;a(122556),a(582845),a(250570),a(533019),a(721473),a(788208),a(22624);var nr=()=>a(151236),or=()=>a(291198),sr=()=>a(167934),lr=()=>a(431652),dr=()=>a(80510);function cr(e){const t=(0,r().O7)();return(0,n().VK)((()=>{const a=new(xt().j$)(t,{table:"template",id:e});return{image:a.getTemplateImage(),name:a.getName(),price:a.getPrice(),numberDuplicates:a.getNumberOfDuplicates(),slug:a.getSlug(),templateDraftId:a.getTemplateDraftId(),contentfulId:a.getContentfulId()}}),[t,e])}function ur(e){const{children:t,href:a}=e;return(0,k.jsx)(Ji().z,{variant:"light",href:a,children:t||(0,k.jsx)(d()._H,{id:"creatorProfile.templates.button.editTemplate",defaultMessage:"Edit Template"})})}var pr=()=>a(697466),gr=()=>a(654133);const mr=(0,He().IU)("clockFilled",{viewBox:"0 0 64 64",svg:(0,k.jsx)("g",{children:(0,k.jsx)("path",{d:"M32 8C18.75 8 8 18.75 8 32s10.75 24 24 24 24-10.75 24-24S45.25 8 32 8zm14 28H29V16h6v14h11v6z"})})});var fr=()=>a(440567),hr=()=>a(735501);const br=(0,i.createContext)({displaySection:"published"});function yr(e){let{localizedTemplateDraftData:t,displaySection:a}=e;const i=Mr(),r=function(e){const t=e.reduce(((e,t)=>{const a="in_review"===t.status||"rejected"===t.status?t.status:"published",i=e.find((e=>e.status===a));return i?i.data.push(t):e.push({status:a,data:[t]}),e}),[]),a=["published","in_review","rejected"];return t.sort(((e,t)=>a.indexOf(e.status)-a.indexOf(t.status)))}(t);return(0,k.jsx)(br.Provider,{value:{displaySection:a},children:(0,k.jsxs)("div",{style:i.localizedTemplateContainer,children:[(0,fr().W)({...i.icon,...i.languageIcon}),(0,k.jsx)(vr,{groups:r})]})})}function vr(e){let{groups:t}=e;const a=Mr();return(0,k.jsx)("div",{style:a.languageDisplayItem,children:t.map(((e,i)=>{let{status:r,data:n}=e;return(0,k.jsxs)("div",{style:a.languageDisplayItem,children:[(0,k.jsx)(_r,{status:r,locales:n}),i<t.length-1&&(0,k.jsx)("span",{style:a.languageDisplaySeparator,children:" · "})]},r)}))})}function xr(e,t){return"in_review"===e?(0,k.jsx)(d()._H,{id:"creatorProfile.templates.draftTemplates.languagesInReviewCount",defaultMessage:"{count, plural, one {1 in review} other {{count} in review}}",values:{count:t}}):"rejected"===e?(0,k.jsx)(d()._H,{id:"creatorProfile.templates.draftTemplates.languagesRejectedCount",defaultMessage:"{count, plural, one {1 rejected} other {{count} rejected}}",values:{count:t}}):(0,k.jsx)(d()._H,{id:"creatorProfile.templates.draftTemplates.languagesCount",defaultMessage:"{count, plural, one {1 language} other {{count} languages}}",values:{count:t}})}function _r(e){let{status:t,locales:a}=e;const r=(0,d().YB)(),n=Mr(),{displaySection:o}=function(){const e=(0,i.useContext)(br);if(!e)throw new Error("useLocalizedTemplatesDisplay must be used within a LocalizedTemplatesDisplayContext.Provider");return e}();let s=null;return 0===a.length?null:(s=a.length<=2?(0,k.jsx)("div",{style:n.languageDisplayItem,children:a.map(((e,i)=>{if(!e.locale||!e.id)return null;const s=e.id,l=Oe(o,s);return(0,k.jsx)("div",{style:n.languageDisplayItemWithGap,children:(0,k.jsxs)("div",{style:n.languageDisplayItem,children:[(0,k.jsx)(Sr,{status:t,hideIcon:i>0,text:(0,pr().t)(r)[e.locale].caption,href:l}),i<a.length-1&&(0,k.jsx)("span",{style:n.languageDisplaySeparator,children:" · "})]})},e.id)}))}):(0,k.jsx)(jr,{localizedTemplateDraftData:a,status:t,tooltipText:xr(t,a.length)}),(0,k.jsx)("div",{children:s}))}br.displayName="LocalizedTemplatesDisplayContext";const wr={in_review:mr,draft:a(953293).R,rejected:hr().t,published:null};function Cr(e){let{status:t,styles:a}=e;if(!t||!wr[t])return null;const i=wr[t];return(0,k.jsx)("span",{children:i("rejected"===t?{...a.icon,...a.rejectedIcon}:a.icon)})}function Sr(e){let{href:t,text:a,status:r,hideIcon:n}=e;const[s,l]=(0,i.useState)(!1),d=function(e,t){return(0,o().yK)((a=>{const i=kr(a,e);return{localizedTemplateLink:{color:t?i.hovered:i.base,fontSize:12,fontWeight:L().Ue.medium,display:"flex",alignItems:"center"},icon:{height:16,width:16,fill:t?i.hovered:i.base,marginRight:2},rejectedIcon:{height:12,width:12}}}),[e,t])}(r,s),{setView:c}=Ge(),u=(0,i.useCallback)((e=>{t&&(e.preventDefault(),e.stopPropagation(),e.ctrlKey||e.metaKey?window.open(t,"_blank"):c(t))}),[t,c]),p=(0,i.useCallback)((e=>{t&&1===e.button&&(e.preventDefault(),window.open(t,"_blank"))}),[t]);return(0,k.jsxs)("div",{style:d.localizedTemplateLink,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),onClick:u,onAuxClick:p,children:[!n&&r&&(0,k.jsx)(Cr,{status:r,styles:d}),a]})}function jr(e){let{localizedTemplateDraftData:t,status:a,tooltipText:i}=e;const r=Mr(),n=(0,d().YB)();return(0,k.jsx)("div",{children:(0,k.jsx)(gr().Z,{renderTooltip:()=>(0,k.jsx)("div",{style:r.tooltipContent,children:t.map((e=>e.locale&&(0,k.jsx)(rt().q,{styleName:"Body-12px/Regular",colorName:"contrastPrimary",children:(0,pr().t)(n)[e.locale].caption},e.id)))}),render:e=>(0,k.jsx)("div",{...e,children:(0,k.jsx)(Sr,{text:i,status:a})})})})}function Mr(){return(0,o().yK)((e=>({localizedTemplateContainer:{display:"flex",alignItems:"flex-start"},languageIcon:{marginTop:2},languageDisplaySeparator:{paddingLeft:4,paddingRight:4,display:"flex",alignItems:"center",color:c().ZP.frontTextLight,height:18},localizedTemplateLink:{color:c().ZP.frontTextLight,fontSize:12,fontWeight:L().Ue.medium},languageDisplayItemWithGap:{display:"flex",alignItems:"center",gap:4},languageDisplayItem:{display:"flex",alignItems:"center",flexWrap:"wrap"},hoveredTextStyle:{color:c().ZP.frontTextDark},tooltipContent:{display:"flex",flexDirection:"column",gap:4},icon:{height:16,width:16,fill:c().ZP.frontTextLight,marginRight:6}})),[])}function kr(e,t){return"in_review"===t?{base:e.creatorProfile.inReviewText,hovered:e.creatorProfile.inReviewHoveredText}:"rejected"===t?{base:e.accentColors.red[500],hovered:e.accentColors.red[700]}:"draft"===t?{base:e.accentColors.blue[500],hovered:e.accentColors.blue[700]}:{base:c().ZP.frontTextLight,hovered:c().ZP.frontTextDark}}const Ir=yr;a(258429);var Tr=()=>a(518242),Pr=()=>a(26103),Dr=()=>a(629489);function Lr(e){const[t,a]=(0,i.useState)(!1),r=(0,Pr().Z)("(hover: none)");return(0,i.useEffect)((()=>{e.current&&(e.current.onmouseenter=()=>{a(!0)},e.current.onmouseleave=()=>{a(!1)})}),[e]),{isHovered:t,isTouchDevice:r}}const Er=(0,i.createContext)(void 0);function Rr(){const e=(0,i.useContext)(Er);if(!e)throw new Error("TemplateCardContext not found. Please make sure this is used within a TemplateCard.");return e}Er.displayName="TemplateCardContext";const Ur=["in_review","rejected","published","published_draft","published_rejected","published_in_review"],Br={published:(0,k.jsx)(d()._H,{id:"creatorProfile.draftTemplates.status.published",defaultMessage:"Published"}),rejected:(0,k.jsx)(d()._H,{id:"creatorProfile.draftTemplates.status.rejected",defaultMessage:"Rejected"}),in_review:(0,k.jsx)(d()._H,{id:"creatorProfile.draftTemplates.status.inReview",defaultMessage:"Awaiting Approval"}),published_draft:(0,k.jsx)(d()._H,{id:"creatorProfile.draftTemplates.status.publishedDraft",defaultMessage:"Unpublished Changes"}),published_rejected:(0,k.jsx)(d()._H,{id:"creatorProfile.draftTemplates.status.publishedRejected",defaultMessage:"Changes Rejected"}),published_in_review:(0,k.jsx)(d()._H,{id:"creatorProfile.draftTemplates.status.publishedInReview",defaultMessage:"Changes Awaiting Approval"}),draft:null};function Hr(e){const t=(0,o().yK)((e=>({rejectedBadgeContainer:{backgroundColor:e.accentColors.red[100]},inReviewBadgeContainer:{backgroundColor:"rgba(230, 230, 230, 1)"},inReviewBadgeNewContainer:{backgroundColor:e.creatorProfile.inReviewBackground},inReviewBadgeTitle:{color:"rgba(102, 102, 102, 1)"},inReviewBadgeNewTitle:{color:e.creatorProfile.inReviewText},rejectedBadgeTitle:{color:e.accentColors.red[500]},publishedBadgeContainer:{backgroundColor:e.accentColors.green[100]},publishedBadgeTitle:{color:e.accentColors.green[500]},publishedDraftBadgeContainer:{backgroundColor:e.accentColors.blue[100]},publishedDraftBadgeTitle:{color:e.accentColors.blue[500]}})),[]),{templateStatus:a}=e,{isFeatureEnabled:i}=(0,Xe().o)("self_serve_localization_frontend");if(void 0===a||!Ur.includes(a))return null;const r={..."published"===a?t.publishedBadgeContainer:{},..."published_draft"===a?t.publishedDraftBadgeContainer:{},..."in_review"===a||"published_in_review"===a?i?t.inReviewBadgeNewContainer:t.inReviewBadgeContainer:{},..."rejected"===a||"published_rejected"===a?t.rejectedBadgeContainer:{}},n={..."published_draft"===a?t.publishedDraftBadgeTitle:{},..."published"===a?t.publishedBadgeTitle:{},..."in_review"===a||"published_in_review"===a?i?t.inReviewBadgeNewTitle:t.inReviewBadgeTitle:{},..."rejected"===a||"published_rejected"===a?t.rejectedBadgeTitle:{}},s=Br[a];return(0,k.jsx)(Ma,{message:s,badgeContainerStyle:r,badgeTitleStyle:n})}function Fr(e){const{children:t,topRightCardOverlay:a,bottomRightCardOverlay:r,onClick:n,href:s,actions:l,shouldShowHoverBackground:d=!0,selected:c=!1}=e,u=(0,o().yK)((e=>({templateCardContainer:{width:"100%",display:"flex",alignItems:"center",gap:"24px",borderRadius:"8px",padding:"16px 24px",cursor:"pointer"},templateCardMobileContainer:{display:"flex",flexDirection:"column",gap:"12px",borderRadius:"8px",cursor:"pointer"},templateCardContainerHovered:{background:"rgba(0, 0, 0, 0.03)"},templateCardContainerPressed:{background:"rgba(0, 0, 0, 0.03)"},templateCardContainerNoHovered:{background:"none"},templateCardContainerNoPressed:{background:"none"},templateCardContainerSelected:{boxShadow:e.lightBoxShadow}})),[]),p=(0,i.useRef)(null),{isHovered:g,isTouchDevice:f}=Lr(p),h=(0,Pr().Z)("(max-width: 1190px)")&&Boolean(l),{isMobileWidth:b}=(0,m().EQ)(),y={...b?u.templateCardMobileContainer:u.templateCardContainer,...g&&d?u.templateCardContainerHovered:u.templateCardContainerNoHovered,...c?u.templateCardContainerSelected:{}};return(0,k.jsx)(Er.Provider,{value:{isHovered:g,isTouchDevice:f,shouldShowActionsBelowContent:h},children:(0,k.jsxs)("div",{ref:p,style:{position:"relative"},children:[(0,k.jsxs)(ye().Z,{style:y,hoveredStyle:d?u.templateCardContainerHovered:u.templateCardContainerNoHovered,pressedStyle:d?u.templateCardContainerPressed:u.templateCardContainerNoPressed,onClick:n,href:s,children:[a?(0,k.jsx)("div",{children:a}):null,r?(0,k.jsx)("div",{children:r}):null,t]}),l]})})}function Zr(e){const{imageSrc:t,node:a,topLeftOverlay:i,topRightOverlay:r,onClick:n,type:s="template",style:l}=e,{isMobileWidth:d}=(0,m().EQ)(),c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"rectangle";return(0,o().yK)((()=>({thumbnail:{position:"relative",borderRadius:"6px",aspectRatio:"16/10",boxShadow:"0px 3px 9px rgb(0 0 0 / 3%)",border:"1px solid rgba(0, 0, 0, 0.08)",flexShrink:0},thumbnailMobile:{height:"210px"},templateCardImage:{...Vr[e],objectFit:"cover",borderRadius:"6px"},templateCardImageMobile:{width:"100%",height:"210px",objectFit:"cover",borderRadius:"6px"}})),[e])}("integration"===s?"square":"rectangle"),u=d?c.templateCardImageMobile:c.templateCardImage;return(0,k.jsx)(Ar,{onClick:n,children:(0,k.jsxs)("div",{style:{...c.thumbnail,...d?c.thumbnailMobile:{},...l},children:["string"==typeof t?(0,k.jsx)(Tr().ZP,{src:t.startsWith("http")?t:`https:${t}`,style:u,placeholderLoadedStyle:u,loading:"lazy"}):(0,k.jsx)("div",{style:u,children:a}),i||null,r||null]})})}function Ar(e){const{onClick:t,children:a}=e,{isMobileWidth:i}=(0,m().EQ)(),r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"rectangle";return(0,o().yK)((()=>({templateCardImageWrapper:Vr[e],templateCardImageMobileWrapper:{width:"100%",height:"210px"},templateCardImageHover:{background:"transparent"}})),[e])}();return t?(0,k.jsx)(ye().Z,{onClick:t,style:i?r.templateCardImageMobileWrapper:r.templateCardImageWrapper,hoveredStyle:r.templateCardImageHover,children:a}):(0,k.jsx)(k.Fragment,{children:a})}const Vr={square:{width:80,height:80},rectangle:{width:160,height:100}};function Nr(e){const{title:t,subtitle:a,children:i}=e,{isTouchDevice:r,shouldShowActionsBelowContent:n}=Rr(),s=(0,o().yK)((()=>({templateCardTitleAndSubtitleContainer:{display:"flex",flexDirection:"column",gap:"2px"},templateCardContentSmallContainer:{display:"flex",flexDirection:"column",gap:"8px"},templateCardContentBigContainer:{display:"flex",alignSelf:"center",justifyContent:"space-between",flexGrow:3},templateCardTitle:{fontWeight:L().Ue.semibold,fontSize:15,lineHeight:"22px"},templateCardContentActionStub:{height:"34px",width:"100%"}})),[]),{isMobileWidth:l}=(0,m().EQ)(),d=r||n;return(0,k.jsxs)("div",{style:d?s.templateCardContentSmallContainer:s.templateCardContentBigContainer,children:[(0,k.jsxs)("div",{style:s.templateCardTitleAndSubtitleContainer,children:["string"==typeof t?(0,k.jsx)("span",{style:s.templateCardTitle,children:t}):(0,k.jsx)(k.Fragment,{children:t}),a||null]}),i,n&&!l?(0,k.jsx)("div",{style:s.templateCardContentActionStub}):null]})}function zr(e){const{children:t,imageType:a="rectangle",extraLeftSpacing:r=0,forceShow:n=!1}=e,{isHovered:s,isTouchDevice:l,shouldShowActionsBelowContent:d}=Rr(),{isMobileWidth:c}=(0,m().EQ)(),u=s&&!l,p=function(e){const{imageType:t,extraLeftSpacing:a}=e,i=Vr[t].width;return(0,o().yK)((()=>({templateCardActionsContainer:{position:"absolute",display:"flex",gap:"8px 4px",alignItems:"center",flexWrap:"wrap"},templateCardActionsContainerRight:{right:"24px",top:"50%",transform:"translateY(-50%)"},templateCardActionsContainerBelow:{bottom:"4px",left:i+25+a}})),[i,a])}({imageType:a,extraLeftSpacing:r});if((!u&&!d&&!l||c)&&!n)return null;const g=i.Children.toArray(t),f={...p.templateCardActionsContainer,...d?p.templateCardActionsContainerBelow:p.templateCardActionsContainerRight};return(0,k.jsx)("div",{style:f,children:l||d?g.reverse():g})}function Or(e){const t=(0,o().yK)((()=>({templateTitleContainer:{display:"flex",alignItems:"center",gap:"6px"},templateNarrowWidthTitleContainer:{display:"flex",flexDirection:"column",alignSelf:"self-start",gap:"2px"},templateTitle:{fontWeight:L().Ue.semibold,fontSize:15,lineHeight:"22px"}})),[]),a=(0,Pr().Z)("(max-width: 816px)"),{templateName:i,templateStatus:r}=e;return a?(0,k.jsxs)("div",{style:t.templateNarrowWidthTitleContainer,children:[(0,k.jsx)(Hr,{templateStatus:r}),(0,k.jsx)("span",{style:t.templateTitle,children:i})]}):(0,k.jsxs)("div",{style:t.templateTitleContainer,children:[(0,k.jsx)("span",{style:t.templateTitle,children:i}),(0,k.jsx)(Hr,{templateStatus:r})]})}function Kr(e){const{templateStatus:t}=e,a=(0,o().yK)((e=>({imageOverlayContainer:{position:"absolute",top:-6,right:-7},lockedIconContainer:{height:"20px",width:"20px",borderRadius:"50%",backgroundColor:"rgba(128, 128, 128, 1)",display:"flex",alignItems:"center",justifyContent:"center"},lockedIcon:{width:"14px",height:"14px",fill:e.white}})),[]);return"in_review"===t||"published_in_review"===t?(0,k.jsx)("div",{style:a.imageOverlayContainer,children:(0,k.jsx)("div",{style:a.lockedIconContainer,children:(0,k.jsx)("span",{children:(0,Dr()._)(a.lockedIcon)})})}):null}function qr(e){const{children:t,style:a}=e,{isMobileWidth:i}=(0,m().EQ)(),r=(0,o().yK)((()=>({templateCardGrid:{display:"flex",flexDirection:"column",gap:"28px"},templateCardGridMobile:{display:"flex",flexDirection:"column",gap:"40px"}})),[]);return(0,k.jsx)("div",{style:{...i?r.templateCardGridMobile:r.templateCardGrid,...a},children:t})}function Wr(){const e=(0,o().yK)((()=>({ellipseContainer:{width:"2px",height:"2px",borderRadius:"50%",background:"rgba(128, 128, 128, 1)"}})),[]);return(0,k.jsx)("div",{style:e.ellipseContainer})}function Gr(e){var t,a;const{creatorId:s}=e,c=(0,o().yK)((e=>({publishedTemplatesSubHeader:{display:"flex",marginLeft:"-12px",marginTop:"-4px",color:"black"},publishedTemplateLoadMore:{display:"flex",justifyContent:"center",marginTop:"24px"},templateCardGridContainer:{minHeight:"300px"},noPublishedTemplatesText:{color:e.regularTextColor}})),[]),u=(0,r().O7)(),p=(0,d().YB)(),g=(0,i.useRef)("idle"),{isStatsigReady:m,isFeatureEnabled:f}=(0,Xe().o)("self_serve_localization_frontend"),{name:h}=Ge(),b=(0,n().VK)((()=>{const e=oe().default.state,{orderBy:t,page:a,paid:i="all"}=e.publishedTemplateSearchArgs;return{publishedTemplatesSearch:e.publishedTemplatesSearch,orderBy:t,page:a,paid:i}}),[]),{publishedTemplatesSearch:y,orderBy:v,page:x,paid:_}=b,[w,C]=(0,i.useState)(le({creatorId:s,orderBy:v,paid:_})),[{status:S}]=(0,l().r5)((async()=>m&&h?de({environment:u,locale:p,creatorId:s,orderBy:v,paid:_,page:x,includeLocalizedTemplates:f}):Promise.resolve({})),[u,p,s,v,_,x,m,f,h]),j=(0,i.useCallback)((async(e,t)=>{await ce({environment:u,templateId:e,templateName:t,creatorId:s,type:"pin"})}),[s,u]);(0,i.useEffect)((()=>{"resolved"===S&&"pending"===g.current&&C(`${s}::${v}::${_}`),g.current=S}),[S,v,_,s]);const M=y[w],I=(null==M||null===(t=M.templates)||void 0===t?void 0:t.reduce(((e,t)=>t.length+e),0))||0;return 0===I&&"recent"===v&&"all"===_?null:(0,k.jsxs)("section",{children:[(0,k.jsx)(Ee().t,{size:"medium",header:(0,k.jsx)(d()._H,{defaultMessage:"Published",id:"creatorProfile.templates.published"}),subHeader:(0,k.jsx)("div",{style:c.publishedTemplatesSubHeader,children:(0,k.jsxs)("div",{style:{display:"flex"},children:[(0,k.jsx)(nt().Z,{items:Qr,getKey:e=>e.value,onSelect:e=>{oe().default.setState({...oe().default.state,publishedTemplateSearchArgs:{...oe().default.state.publishedTemplateSearchArgs,paid:e.val,page:1}})},selectedItem:Qr.find((e=>e.val===_)),renderItem:e=>(0,k.jsx)(it().Z,{...e,title:e.key}),renderOrigin:e=>{var t;return(0,k.jsx)(lr().X,{focused:!1,title:void 0===_?Qr[0].value:null===(t=Qr.find((e=>e.val===_)))||void 0===t?void 0:t.value,...e})}}),(0,k.jsx)(nt().Z,{items:en,getKey:e=>e.value,onSelect:e=>{oe().default.setState({...oe().default.state,publishedTemplateSearchArgs:{...oe().default.state.publishedTemplateSearchArgs,orderBy:e.val,page:1}})},selectedItem:en.find((e=>e.val===v)),renderItem:e=>(0,k.jsx)(it().Z,{...e,title:e.key}),renderOrigin:e=>{var t;return(0,k.jsx)(lr().X,{focused:!1,title:null===(t=en.find((e=>e.val===v)))||void 0===t?void 0:t.value,...e})}})]})})}),m?0===I?(0,k.jsx)("div",{style:c.templateCardGridContainer,children:(0,k.jsx)("span",{style:c.noPublishedTemplatesText,children:(0,k.jsx)(d()._H,{id:"creatorPlatform.publishedTemplates.noTemplates.label",defaultMessage:"No published templates found."})})}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(qr,{style:c.templateCardGridContainer,children:(null==M||null===(a=M.templates)||void 0===a?void 0:a[0].length)>0?(0,k.jsx)(k.Fragment,{children:M.templates.map((e=>e.map((e=>{const t=null==M?void 0:M.templateGroupsByContentfulId;return(0,k.jsx)($r,{templateId:e,pinTemplate:j,localizedTemplateGroups:t},`publishedTemplateCard--${e}`)}))))}):null}),["idle","resolved"].includes(S)&&(null==M?void 0:M.count)>I?(0,k.jsx)("div",{style:c.publishedTemplateLoadMore,children:(0,k.jsx)(Ji().z,{variant:"light",onClick:()=>{oe().default.setState({...oe().default.state,publishedTemplateSearchArgs:{...oe().default.state.publishedTemplateSearchArgs,page:oe().default.state.publishedTemplateSearchArgs.page+1}})},children:(0,k.jsx)(d()._H,{id:"creatorProfile.templates.publishedTemplates.button.loadMore",defaultMessage:"Load More"})})}):null]}):(0,k.jsx)("div",{children:(0,k.jsx)(Si().Z,{})})]})}function $r(e){var t,a;const{templateId:i,pinTemplate:o}=e,{isFeatureEnabled:s}=(0,Xe().o)("self_serve_localization_frontend"),l=(0,r().O7)(),c=cr(i),u=c.contentfulId,p=function(e){const t=(0,r().O7)(),{isFeatureEnabled:a}=(0,Xe().o)("self_serve_localization_frontend");return(0,n().VK)((()=>e&&a?e.map((e=>{const a=new(xt().j$)(t,{table:"template",id:e}),i=a.getTemplateDraftId();let r;if(i){const e=new(xt().XG)(t,{table:"template_draft",id:i});if(e.isReady()&&e.isDefined()){const t=e.getStatus();"published"!==t&&(r=t)}}return{name:a.getName(),locale:a.getLocale(),id:e,...r?{status:r}:{}}})):[]),[t,e,a])}(u?null===(t=e.localizedTemplateGroups)||void 0===t?void 0:t[u]:[]),g=c.templateDraftId,{setView:m}=Ge(),f=(0,n().VK)((()=>{if(!g)return;const e=new(xt().XG)(l,{table:"template_draft",id:g});return e.isReady()&&e.isDefined()?e.getStatus():void 0}),[l,g]),h="published"!==f&&void 0!==f?`published_${f}`:f,b=Oe("published",i);return(0,k.jsxs)(Fr,{href:s?void 0:b,onClick:s?()=>m(b):void 0,actions:(0,k.jsxs)(zr,{children:[(0,k.jsx)(Xr,{pinTemplate:o,templateId:i,templateName:c.name||""},`pinPublishedTemplate-${i}`),"in_review"===f?(0,k.jsx)(ur,{href:`/profile/templates/form/published/${i}`,children:(0,k.jsx)(d()._H,{id:"creatorProfile.templates.button.viewTemplate",defaultMessage:"View Submission"})}):(0,k.jsx)(ur,{href:`/profile/templates/form/published/${i}`})]}),children:[(0,k.jsx)(Zr,{imageSrc:null==c||null===(a=c.image)||void 0===a?void 0:a.url,node:null,topRightOverlay:(0,k.jsx)(Kr,{templateStatus:h})}),(0,k.jsx)(Nr,{title:(0,k.jsx)(Or,{templateName:c.name||"",templateStatus:s||"published"===h?void 0:h}),subtitle:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Yr,{price:c.price,duplicationCount:c.numberDuplicates}),s&&p.length>0&&(0,k.jsx)(yr,{localizedTemplateDraftData:p,displaySection:"published"})]})})]})}function Yr(e){const t=(0,o().yK)((()=>({publishedTemplatesSubHeader:{display:"flex",marginLeft:"-12px",marginTop:"-4px",color:"black"},priceText:{color:c().ZP.black,fontWeight:L().Ue.medium},publishedTemplateLoadMore:{display:"flex",justifyContent:"center",marginTop:"24px"},publishedTemplateCardContentContainer:{display:"flex",alignItems:"center",gap:"5px",color:c().ZP.frontTextLight,fontSize:"12px",minHeight:"12px"},publishedTemplateCardDuplicates:{display:"flex",alignItems:"center",gap:"2px",fontSize:"12px"}})),[]),{price:a,duplicationCount:i}=e,r=(0,d().YB)(),n=i&&i>0,s=void 0!==a;return n||s?(0,k.jsxs)("div",{style:t.publishedTemplateCardContentContainer,children:[s&&(0,k.jsx)("span",{style:t.priceText,children:(0,k.jsx)(bt().W,{cost:{currencyCode:"USD",amount:100*a},trailingZeroDisplay:"auto",intl:r})}),n&&s&&(0,k.jsx)(Wr,{}),(0,k.jsx)("span",{style:t.publishedTemplateCardDuplicates,children:n?(0,k.jsxs)(k.Fragment,{children:[(0,dr().Z)({height:12,width:12}),Je().uf(e.duplicationCount,"compact",r)]}):null})]}):null}function Xr(e){const{pinTemplate:t,templateId:a,templateName:i}=e;return(0,k.jsx)(j().Z,{isLightGray:!0,onClick:()=>t(a,i),children:(0,k.jsx)(d()._H,{id:"creatorProfile.templates.publishedTemplates.button.pin",defaultMessage:"Pin"})},`pin-button-${a}`)}const Jr=(0,d().vU)({selectPriceFilterAll:{id:"creatorProfile.filter.all",defaultMessage:"Free & Paid"},selectPriceFilterPaid:{defaultMessage:"Paid",id:"creatorProfile.filter.paid"},selectPriceFilterFree:{defaultMessage:"Free",id:"creatorProfile.filter.free"},selectSortValueRecent:{defaultMessage:"Most Recent",id:"creatorProfile.sort.recent"},selectSortValueDuplication:{defaultMessage:"Duplications",id:"creatorProfile.sort.duplication"}}),Qr=[{value:Jr.selectPriceFilterAll.defaultMessage,val:"all"},{value:Jr.selectPriceFilterPaid.defaultMessage,val:"paid"},{value:Jr.selectPriceFilterFree.defaultMessage,val:"free"}],en=[{value:Jr.selectSortValueRecent.defaultMessage,val:"recent"},{value:Jr.selectSortValueDuplication.defaultMessage,val:"duplications"}],tn=(0,d().vU)({eligibleTemplateCount:{id:"creatorProfile.couponForm.templates.eligibleTemplateCount",defaultMessage:"{count, plural, one {{count} eligible template} other {{count} eligible templates}}"},selectedTemplateCount:{id:"creatorProfile.couponForm.templates.selectedTemplateCount",defaultMessage:"{count, plural, one {{count} selected} other {{count} selected}}"},searchPlaceholder:{id:"creatorProfile.couponForm.templates.searchPlaceholder",defaultMessage:"Search templates"},selectTemplate:{id:"creatorProfile.couponForm.templates.selectTemplate",defaultMessage:"Select"},unselectTemplate:{id:"creatorProfile.couponForm.templates.unselectTemplate",defaultMessage:"Unselect"}});function an(){const e=(0,d().YB)(),t=(0,r().O7)(),a=(0,o().yK)((e=>({templatePickerSection:{display:"flex",flexDirection:"column",gap:6},container:{display:"flex",flexDirection:"column",gap:12,borderWidth:1,borderStyle:"solid",borderRadius:12,borderColor:e.stroke.primary},errorContainer:{display:"flex",flexDirection:"column",gap:12,borderWidth:1,borderStyle:"solid",borderRadius:12,borderColor:e.stroke.uiRedPrimary},header:{display:"flex",justifyContent:"space-between",borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:e.stroke.primary,padding:"16px 24px"},headerTitle:{alignSelf:"center",fontWeight:500,fontSize:14},searchInput:{lineHeight:"40px",fontSize:16,width:300,borderRadius:10},templatesContainer:{display:"flex",flexDirection:"column",gap:12,padding:"8px 24px 16px 24px",maxHeight:772,overflowY:"auto"},errorMessage:{color:e.errorText,fontSize:12,fontWeight:400,lineHeight:"16px"}})),[]),[{status:s}]=(0,l().r5)((async()=>await async function(e){const{environment:t,intl:a}=e,i=(0,y().E2)(a),r=await x().callApi({eventName:"getCreatorTemplates",environment:t,data:{locale:i,limit:Hi,offset:0,orderBy:"recent",filterBy:{checkoutEnabled:!0},includeLocalizedTemplates:!0}});"success"===r.type&&Ei.setState({templateIds:r.data.templateIds})}({environment:t,intl:e})),[t,e]),c=(0,n().VK)((()=>Ei.state.templateIds),[]),u=(0,n().VK)((()=>Di.state.eligible_listing_ids??[]),[]),p=(0,n().VK)((()=>Di.state.eligibleListingIdsError),[]),{templateStores:g,listingStores:m}=(0,n().VK)((()=>{const e=c.map((e=>new(sr().j)(t,{table:yt().nE,id:e}))),a=e.map((e=>{const a=e.getListingId();return a?new(xt().y$)(t,{table:di().Vj,id:a}):null}));return{templateStores:e,listingStores:a}}),[t,c]),[f,h]=(0,i.useState)(""),[b,v]=(0,i.useState)(g);(0,i.useEffect)((()=>{if(!f)return void v(g);const e=g.filter((e=>{var t;return null===(t=e.getName())||void 0===t?void 0:t.toLowerCase().includes(f.toLowerCase())}));v(e)}),[g,f]);const _=(0,n().VK)((()=>b.map((t=>{var a;const i=m.find((e=>(null==e?void 0:e.id)===t.getListingId()));if(!i)return null;const r=i.id,n=(i.getPrice()??0)/100,o=i.getInstallationCount(),s=o&&o>0?o:void 0,l=u.includes(r);return(0,k.jsxs)(Fr,{selected:l,actions:(0,k.jsx)(zr,{forceShow:l,children:(0,k.jsx)(Ji().z,{variant:l?"neutral":"light",onClick:()=>{if(l)Di.setState({...Di.state,eligible_listing_ids:[...u.filter((e=>e!==r))]});else{const e=Array.from(new Set([...u,r]));Di.setState({...Di.state,eligible_listing_ids:e})}},children:l?e.formatMessage(tn.unselectTemplate):e.formatMessage(tn.selectTemplate)})}),children:[(0,k.jsx)(Zr,{type:"template",imageSrc:null===(a=t.getAttributes())||void 0===a||null===(a=a.image)||void 0===a?void 0:a.url,node:void 0}),(0,k.jsx)(Nr,{title:t.getName(),subtitle:(0,k.jsx)(Yr,{price:n,duplicationCount:s})})]},t.id)}))),[b,m,e,u]),w=ui(u);return(0,i.useEffect)((()=>{w.length>0&&Di.setState({...Di.state,eligibleListingIdsError:void 0,eligible_listing_ids:w})}),[w]),"pending"===s?(0,k.jsx)(Si().Z,{}):(0,k.jsxs)("div",{style:a.templatePickerSection,children:[(0,k.jsxs)("div",{style:p?a.errorContainer:a.container,children:[(0,k.jsxs)("div",{style:a.header,children:[(0,k.jsx)("div",{style:a.headerTitle,children:w.length>0?e.formatMessage(tn.selectedTemplateCount,{count:w.length}):e.formatMessage(tn.eligibleTemplateCount,{count:b.length})}),(0,k.jsx)(or().Z,{left:(0,k.jsx)(we().y,{iconGroup:nr().D,variantName:"default",colorName:"secondary"}),style:a.searchInput,placeholder:e.formatMessage(tn.searchPlaceholder),value:f,onChange:e=>h(e.target.value)})]}),(0,k.jsx)("div",{style:a.templatesContainer,children:_})]}),p&&(0,k.jsx)("div",{style:a.errorMessage,children:p})]})}let rn=function(e){return e[e.Default=0]="Default",e}({});function nn(){const e=dn(),t=(0,d().YB)(),[a,o]=(0,i.useState)(!1),s=_i().ou.now().toUTC().startOf("day"),l=s.toMillis(),c=s.toFormat("yyyy-MM-dd"),u=(0,r().O7)(),p=(0,r().Fy)(),g=i.useRef(null),{setView:m,name:f}=Ge(),h=na();(0,i.useEffect)((()=>{h||m("/profile/coupons")}),[h,m]);const b=null!=f&&f.startsWith("/profile/coupons/edit/")?f.split("/profile/coupons/edit/")[1]:void 0;!function(e){const t=(0,r().O7)();(0,n().VK)((()=>{if(!e){const e=Di.getInitialState();return void Di.setState({...e,initialValues:{...e}})}const a=new(Xi().Q)(t,{table:ha().iL,id:e});if(!a.canRead())return;const i=a.getModel();if(!i)return;const r=i.start_time?_i().ou.fromMillis(parseInt(i.start_time.toString()),{zone:"utc"}).toFormat("yyyy-MM-dd"):"",n=i.end_time?_i().ou.fromMillis(parseInt(i.end_time.toString()),{zone:"utc"}).toFormat("yyyy-MM-dd"):"",o=Di.getInitialState(),s={id:i.id,code:i.code,discount:{value:i.getDiscount().value,type:i.getDiscount().type},coupon_usage:{limit:i.getCouponUsage().limit,number_of_uses:i.getCouponUsage().number_of_uses},active:i.active,startDate:r,endDate:n,apply_to_all:i.apply_to_all,eligible_listing_ids:i.getEligibleListingIds()};Di.setState({...o,...s,initialValues:{...s}})}),[t,e])}(b);const y=Boolean(b),{code:v,codeError:x,discountValueError:_,active:w,startDate:C,startDateError:j,endDate:M,endDateError:I,coupon_usage:T,usageLimitError:P,apply_to_all:D,eligibleListingIdsError:L}=(0,n().VK)((()=>Di.state),[]),E=Intl.DateTimeFormat().resolvedOptions().timeZone,R=Boolean(C&&Ki(C)),U=[x,_,j,I,P,L].filter((e=>Boolean(e))).length;(0,i.useEffect)((()=>{const e=e=>{Ci().blurActiveElement()};return document.addEventListener("wheel",e),()=>{document.removeEventListener("wheel",e)}}),[]);const B=C?_i().ou.fromFormat(C,"yyyy-MM-dd").startOf("day").toMillis():void 0,H=M?_i().ou.fromFormat(M,"yyyy-MM-dd").endOf("day").toMillis():void 0;return(0,k.jsxs)("div",{children:[(0,k.jsx)(Ee().t,{size:"large",header:y?(0,k.jsx)(d()._H,{defaultMessage:"Edit coupon",id:"creatorProfile.coupons.form.editTitle"}):(0,k.jsx)(d()._H,{defaultMessage:"Create a coupon",id:"creatorProfile.coupons.form.createTitle"}),subHeader:y?(0,k.jsx)(d()._H,{defaultMessage:"Edits will immediately take effect",id:"creatorProfile.coupons.form.editSubtitle"}):(0,k.jsx)(d()._H,{defaultMessage:"New coupons will be available for use immediately.",id:"creatorProfile.coupons.form.createSubtitle"})}),(0,k.jsx)(er,{count:U,ref:g}),(0,k.jsxs)("div",{style:e.container,children:[(0,k.jsxs)("div",{style:e.basicDetails,children:[(0,k.jsx)(rt().q,{styleName:"UITitle-22px/Semibold",children:(0,k.jsx)(d()._H,{defaultMessage:"Basic details",id:"creatorProfile.coupons.form.couponBody"})}),(0,k.jsx)("div",{children:(0,k.jsx)(ar().w,{htmlLabel:"couponCode",label:(0,k.jsx)(d()._H,{defaultMessage:"Coupon code",id:"creatorProfile.coupons.form.couponCode"}),required:!0,placeholder:t.formatMessage(ln.couponPlaceholder),type:"text",format:rn.Default,style:y?e.textInputEditing:e.textInput,error:x,errorMessageStyle:e.errorMessage,value:v,disabled:y,onChange:e=>{Di.setState({...Di.state,code:e.target.value.toLocaleUpperCase()})},onFocus:()=>Bi("codeError"),onBlur:async e=>{Zi(e.target.value),await Ri(u,e.target.value)},maxlength:Ka,children:!x&&(0,k.jsxs)("div",{style:e.codeHelperText,children:[y?t.formatMessage(ln.codeHelperTextEdit):t.formatMessage(ln.codeHelperText),(0,k.jsx)(tr().G,{maxLength:Ka,inputLength:v.length})]})})}),(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{style:e.discountSection,children:[(0,k.jsx)(on,{}),(0,k.jsx)("div",{style:_?e.discountPickerError:e.discountPicker,children:(0,k.jsx)(sn,{})})]}),!_&&(0,k.jsx)("div",{style:e.helperText,children:t.formatMessage(ln.discountHelperText)})]}),(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{style:e.activeToggle,children:[(0,k.jsx)(rr,{isActive:w,onClick:()=>{Di.setState({...Di.state,active:!w})}}),(0,k.jsx)(d()._H,{defaultMessage:"Active",id:"creatorProfile.coupons.form.activeToggle"})]}),(0,k.jsx)("div",{style:e.helperText,children:t.formatMessage(ln.activeToggleText)})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)(ve().ZP,{popupType:p.isMobile?ve().Z4.SlideUp:ve().Z4.Popup,render:t=>(0,k.jsx)("div",{style:e.datePickerContainer,children:(0,k.jsx)(ji().Z,{value:B||l,firstDayOfWeek:0,onChange:e=>{var a;const i=_i().ou.fromMillis(e);Di.setState({...Di.state,startDate:null===(a=i.toISO())||void 0===a?void 0:a.split("T")[0]}),t.close()},onBlur:e=>{var t,a;const i=_i().ou.fromJSDate(e,{zone:E});Di.setState({...Di.state,startDate:null===(t=i.toISO())||void 0===t?void 0:t.split("T")[0]}),Vi(null===(a=i.toISO())||void 0===a?void 0:a.split("T")[0])},onFocus:()=>{Bi("startDateError")},disabledDays:{before:_i().ou.fromFormat(c,"yyyy-MM-dd").toJSDate(),...H?{after:new Date(H)}:{}}})}),placementToOrigin:ve().pO.Top,renderOrigin:a=>(0,k.jsx)(Mi().Z,{htmlLabel:"startDate",errorMessage:j,errorMessageStyle:e.errorMessage,name:(0,k.jsx)(d()._H,{defaultMessage:"Start date (UTC)",id:"creatorProfile.coupons.form.startDate"}),children:(0,k.jsxs)("div",{style:e.dateButtonLabel,children:[(0,k.jsx)(ye().Z,{...a,style:!C||y&&R?{...e.dateButton,...e.datePlaceholder}:e.dateButton,disabled:y&&R,children:C||"YYYY-MM-DD"}),(!y||!R)&&(0,k.jsx)(ye().Z,{onClick:()=>{Di.setState({...Di.state,startDate:""})},ariaLabel:t.formatMessage(ln.clearStartDate),children:(0,k.jsx)(we().y,{iconGroup:wi().$,variantName:"small",colorName:"tertiary"})})]})})}),!j&&(0,k.jsx)("div",{style:e.helperText,children:y&&R?t.formatMessage(ln.startDateEditText):t.formatMessage(ln.startDateHelperText)})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)(ve().ZP,{popupType:p.isMobile?ve().Z4.SlideUp:ve().Z4.Popup,render:t=>(0,k.jsx)("div",{style:e.datePickerContainer,children:(0,k.jsx)(ji().Z,{value:H||l,firstDayOfWeek:0,onChange:e=>{var a;const i=_i().ou.fromMillis(e,{zone:E});Di.setState({...Di.state,endDate:null===(a=i.toISO())||void 0===a?void 0:a.split("T")[0]}),t.close()},onBlur:e=>{var t;Ni(null===(t=_i().ou.fromJSDate(e,{zone:E}).toISO())||void 0===t?void 0:t.split("T")[0])},onFocus:()=>{Bi("endDateError")},disabledDays:{before:new Date(B&&B>l?B:l)}})}),placementToOrigin:ve().pO.Top,renderOrigin:a=>(0,k.jsx)(Mi().Z,{htmlLabel:"endDate",errorMessage:I,errorMessageStyle:e.errorMessage,name:(0,k.jsx)(d()._H,{defaultMessage:"End date (UTC)",id:"creatorProfile.coupons.form.endDate"}),children:(0,k.jsxs)("div",{style:e.dateButtonLabel,children:[(0,k.jsx)(ye().Z,{...a,style:M?e.dateButton:{...e.dateButton,...e.datePlaceholder},children:M||"YYYY-MM-DD"}),(0,k.jsx)(ye().Z,{onClick:()=>{Di.setState({...Di.state,endDate:""})},ariaLabel:t.formatMessage(ln.clearEndDate),children:(0,k.jsx)(we().y,{iconGroup:wi().$,variantName:"small",colorName:"tertiary"})})]})})}),!I&&(0,k.jsx)("div",{style:e.helperText,children:t.formatMessage(ln.endDateHelperText)})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)(ar().w,{htmlLabel:"usageLimit",label:(0,k.jsx)(d()._H,{defaultMessage:"Usage limit",id:"creatorProfile.coupons.form.usageLimit"}),placeholder:t.formatMessage(ln.usageLimitPlaceholder),type:"number",format:rn.Default,style:e.textInput,value:T.limit===Number.MAX_VALUE?"":T.limit.toString(),error:P,onChange:e=>{const a=Number(e.target.value);a>Wa?Di.setState({...Di.state,usageLimitError:t.formatMessage(ln.usageLimitTooHigh)}):(Bi("usageLimitError"),Di.setState({...Di.state,coupon_usage:{...Di.state.coupon_usage,limit:""===e.target.value?Number.MAX_VALUE:a}}))},onFocus:e=>{parseInt(e.target.value)>Wa||Bi("usageLimitError")},onBlur:e=>{zi(Di.state.coupon_usage.limit)},inputElementAttributes:{min:0,step:1,max:1e6}}),!P&&(0,k.jsx)("div",{style:e.helperText,children:t.formatMessage(ln.usageLimitHelperText)})]})]}),(0,k.jsxs)("div",{style:e.eligibleProducts,children:[(0,k.jsx)("div",{style:e.eligibleProductsTitle,children:(0,k.jsx)(rt().q,{styleName:"UITitle-22px/Semibold",children:(0,k.jsx)(d()._H,{defaultMessage:"Eligible products",id:"creatorProfile.coupons.form.eligibleProducts"})})}),(0,k.jsxs)("div",{style:e.activeToggle,children:[(0,k.jsx)(rr,{isActive:D,onClick:()=>{Di.setState({...Di.state,apply_to_all:!D,eligible_listing_ids:[],eligibleListingIdsError:void 0})}}),(0,k.jsx)(d()._H,{defaultMessage:"Apply to all products",id:"creatorProfile.coupons.form.applyToAllToggle"})]}),D?null:(0,k.jsx)(an,{})]})]}),(0,k.jsxs)("div",{style:e.submitSection,children:[(0,k.jsx)(Ji().z,{variant:"light",onClick:()=>{(0,S().j)({environment:u,event:{eventName:"marketplace_coupon_self_serve",eventProperties:{action:"cancel",source:y?"edit_form":"new_coupon_form"}}}),m("/profile/coupons")},children:(0,k.jsx)(d()._H,{id:"creatorProfileForm.cancel.button",defaultMessage:"Cancel"})}),(0,k.jsx)(Ji().z,{variant:"dark",onClick:async()=>{o(!0);try{const t=await Ui(u);var e;if(!0===t)Di.reset(),m("/profile/coupons",!0);else null==g||null===(e=g.current)||void 0===e||e.scrollIntoView({behavior:"smooth"});(0,S().j)({environment:u,event:{eventName:"marketplace_coupon_self_serve",eventProperties:{action:"save",source:y?"edit_form":"new_coupon_form",coupon_id:y?b:void 0,result:!0===t?"success":"error"}}})}catch(t){}finally{o(!1)}},children:a?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(d()._H,{id:"creatorProfileForm.editCoupon.button.saving",defaultMessage:"Saving"}),(0,k.jsx)(Si().Z,{style:e.spinner})]}):(0,k.jsx)(d()._H,{id:"creatorProfileForm.editCoupon.button.save",defaultMessage:"Save"})})]})]})}function on(){const e=(0,d().YB)(),t=dn(),[a,r]=i.useState(""),{discount:o,discountValueError:s}=(0,n().VK)((()=>Di.state),[]);return(0,i.useEffect)((()=>{r(0===o.value?"":(o.value/100).toFixed(2))}),[o.value]),(0,k.jsxs)("div",{style:t.discountValue,children:["fixed"===o.type&&(0,k.jsx)(ar().w,{htmlLabel:"discountValue",label:(0,k.jsx)(d()._H,{defaultMessage:"Discount",id:"creatorProfile.coupons.form.discountValue"}),required:!0,type:"number",error:s,placeholder:e.formatMessage({defaultMessage:"Amount",id:"creatorProfile.couponSubmission.fixedDiscountPlaceholder"}),format:rn.Default,style:t.discountTextInput,value:a,onChange:t=>{Number(t.target.value)>Ga?Di.setState({...Di.state,discountValueError:e.formatMessage(ln.discountTooHigh)}):Bi("discountValueError"),r(t.target.value)},onFocus:e=>{Number(a)>Ga||Bi("discountValueError")},onBlur:e=>{Di.setState({...Di.state,discount:{...o,value:100*Number(a)}}),Ai(Di.state.discount)}}),"percentage"===o.type&&(0,k.jsx)(ar().w,{htmlLabel:"discountValue",label:(0,k.jsx)(d()._H,{defaultMessage:"Discount",id:"creatorProfile.coupons.form.discountValue"}),required:!0,error:s,placeholder:e.formatMessage({defaultMessage:"Percentage",id:"creatorProfile.couponSubmission.percentageDiscountPlaceholder"}),format:rn.Default,style:t.discountTextInput,value:0===o.value?"":o.value.toString(),onChange:e=>{Di.setState({...Di.state,discount:{...o,value:""===e.target.value?0:parseInt(e.target.value)}})},onFocus:e=>{Bi("discountValueError")},onBlur:e=>{Ai(o)},type:"number"})]})}function sn(){const e=dn(),t={percentage:(0,k.jsx)(d()._H,{id:"creatorProfile.couponForm.percentOffDiscount",defaultMessage:"% off"}),fixed:(0,k.jsx)(d()._H,{id:"creatorProfile.couponForm.fixedDiscount",defaultMessage:"Fixed discount ($)"})},a=(0,n().VK)((()=>Di.state.discount.type),[]),i={items:["fixed","percentage"],getKey:e=>e,selectedItem:a,width:"100%",minWidth:"100%",onSelect:e=>{Di.setState({...Di.state,discountValueError:void 0,discount:{type:e,value:0}})},renderItem:e=>(0,k.jsx)(it().Z,{...e,title:t[e.value]}),renderOrigin:i=>(0,k.jsxs)(wa().Z,{isLarge:!0,...i,buttonStyle:e.discountPickerButton,children:[(0,k.jsx)("span",{children:t[a]}),(0,k.jsx)(we().y,{colorName:"secondary",iconGroup:be().m,variantName:"small"})]}),sameWidthAsOrigin:!0};return(0,k.jsx)("div",{children:(0,k.jsx)(nt().Z,{...i})})}const ln=(0,d().vU)({clearStartDate:{id:"creatorProfile.coupons.form.clearStartDate",defaultMessage:"Clear start date"},clearEndDate:{id:"creatorProfile.coupons.form.clearEndDate",defaultMessage:"Clear end date"},discountHelperText:{id:"creatorProfile.coupons.form.discountHelperText",defaultMessage:"If the discount makes the template price less than $0.99, it will be rounded up to $0.99."},codeHelperText:{id:"creatorProfile.coupons.form.codeHelperText",defaultMessage:"Coupon code must only use numbers and letters."},codeHelperTextEdit:{id:"creatorProfile.coupons.form.codeHelperTextEdit",defaultMessage:"Coupon code cannot be edited after it has been created."},couponPlaceholder:{id:"creatorProfileForm.creatorDetail.form.couponPlaceholder",defaultMessage:"Enter coupon code"},activeToggleText:{id:"creatorProfile.coupons.form.activeToggleText",defaultMessage:"If you don't activate the coupon now, you can activate it later."},startDateHelperText:{id:"creatorProfile.coupons.form.startDateHelperText",defaultMessage:"Start date for when coupon is valid. If empty, coupon will start immediately."},startDateEditText:{id:"creatorProfile.coupons.form.startDateEditText",defaultMessage:"Cannot edit start date of coupon that has already passed."},endDateHelperText:{id:"creatorProfile.coupons.form.endDateHelperText",defaultMessage:"End date for when coupon is valid. If empty, coupon will not expire."},usageLimitPlaceholder:{id:"creatorProfile.coupons.form.usageLimitPlaceholder",defaultMessage:"Number of uses"},usageLimitHelperText:{id:"creatorProfile.coupons.form.usageLimitHelperText",defaultMessage:"Number of times coupon can be used. If empty, coupon can be used unlimited times."},usageLimitTooHigh:{id:"creatorProfile.coupons.form.usageLimitTooHighError",defaultMessage:"Usage limit is too high."},discountTooHigh:{id:"creatorProfile.coupons.form.discountTooHigh",defaultMessage:"Fixed discount is too large."}});function dn(){return(0,o().yK)((e=>({datePickerContainer:{padding:"18px 14px 14px"},container:{display:"flex",flexDirection:"column",gap:"60px"},title:{marginBottom:"10px"},basicDetails:{gap:"32px",paddingTop:"12px",display:"flex",flexDirection:"column"},helperText:{fontSize:12,marginTop:"6px",color:e.lightTextColor},codeHelperText:{fontSize:12,marginTop:"6px",color:e.lightTextColor,display:"flex",flexDirection:"row",justifyContent:"space-between"},sectionSubtitle:{fontSize:14,color:e.lightTextColor},textInput:{background:"transparent",fontSize:14,borderRadius:ki().Z.borderRadius,padding:"9px"},textInputEditing:{background:"transparent",fontSize:14,borderRadius:ki().Z.borderRadius,padding:"9px",color:e.lightTextColor},discountTextInput:{background:"transparent",fontSize:14,borderRadius:ki().Z.borderRadius,padding:"9px"},discountMenuItem:{width:"100%"},activeToggle:{display:"flex",alignItems:"center",gap:"8px",width:"fit-content"},eligibleProductsTitle:{display:"flex",flexDirection:"column",gap:"4px"},eligibleProducts:{display:"flex",flexDirection:"column",gap:"24px"},submitSection:{display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center",gap:12,marginTop:40,background:"white",padding:"10px 0 20px 0"},discountSection:{display:"flex",flexDirection:"row",gap:"8px",alignItems:"flex-end"},discountValue:{width:"50%"},discountPicker:{width:"50%",marginTop:"22px"},discountPickerError:{width:"50%",marginTop:"22px",marginBottom:"24px"},discountPickerButton:{display:"flex",flexDirection:"row",justifyContent:"space-between",border:`1px solid ${e.outlineButtonBorder}`,padding:"9px",height:"38px"},errorMessage:{marginTop:"6px"},spinner:{marginLeft:"4px"},dateButton:{display:"flex",alignItems:"center",flexGrow:1,fontSize:15,lineHeight:"26px",borderRadius:6,paddingTop:4,paddingBottom:4,paddingLeft:10,paddingRight:10,boxShadow:e.inputBoxShadow},datePlaceholder:{color:e.lightTextColor},dateButtonLabel:{display:"flex",alignItems:"center",gap:"4px"}})),[])}function cn(e){const{creatorId:t}=e,{setView:a,name:n}=Ge(),o=(0,r().O7)(),s=null!=t,l=na();return(0,i.useEffect)((()=>{l||"/profile/coupons"===n||a("/profile/coupons")}),[l,a,n]),(0,k.jsxs)("div",{children:[(0,k.jsxs)(pa,{route:"/profile/coupons",exact:!0,children:[(0,k.jsxs)(ia().gq,{justifyContent:"space-between",children:[(0,k.jsx)(Ee().t,{size:"large",header:(0,k.jsx)(d()._H,{id:"creatorProfile.coupons.pageHeader",defaultMessage:"Coupons"}),subHeader:(0,k.jsx)(d()._H,{id:"creatorProfile.coupons.pageHeaderSubtitle",defaultMessage:"Manage all of your coupons. Learn more about coupons <couponLink>here</couponLink>",values:{couponLink:e=>(0,k.jsx)(aa().Z,{external:!0,href:(0,ra().UY)("guides.marketplaceSelling"),children:e})}})}),s&&l&&(0,k.jsx)(ta().Z,{onClick:()=>{(0,S().j)({environment:o,event:{eventName:"marketplace_coupon_self_serve",eventProperties:{action:"create",source:"creator_coupons"}}}),a("/profile/coupons/new-coupon")},children:(0,k.jsx)(d()._H,{id:"creatorProfile.coupons.createCouponButton",defaultMessage:"Create Coupon"})})]}),(0,k.jsx)(Ce().Z,{size:24}),s?(0,k.jsx)(xi,{}):(0,k.jsx)(ma,{})]}),l&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(pa,{route:"/profile/coupons/new-coupon",children:[(0,k.jsx)(la,{}),(0,k.jsx)(nn,{})]}),(0,k.jsxs)(pa,{route:"/profile/coupons/edit",children:[(0,k.jsx)(la,{}),(0,k.jsx)(nn,{})]})]})]})}var un=()=>a(696514),pn=()=>a(820072),gn=()=>a(705214),mn=()=>a(696056),fn=()=>a(85073);class hn extends je().default{getInitialState(){return{type:"create-bot",startingRecord:void 0,recordTypeOnSubmission:"internal",status:"unpublished"}}updateRecordTypeOnSwitch(e){if("update-bot"===this.state.type){if("public"!==e)return;this.setState({type:"create-guest-integration",startingRecord:this.state.startingRecord,recordTypeOnSubmission:e,status:"unpublished"})}else if("create-guest-integration"===this.state.type){if("internal"!==e||!this.state.startingRecord)return;this.setState({type:"update-bot",startingRecord:this.state.startingRecord,recordTypeOnSubmission:e,status:"unpublished"})}else if("update-guest-integration"===this.state.type){if("unfurling"!==e)return;this.setState({type:"create-third-party-external-integration",startingRecord:this.state.startingRecord,recordTypeOnSubmission:e,startingAuthRecord:void 0,status:"unpublished"})}else if("create-third-party-external-integration"===this.state.type){if("public"!==e)return;this.setState({type:"update-guest-integration",startingRecord:this.state.startingRecord,recordTypeOnSubmission:e,status:"unpublished"})}else"create-bot"===this.state.type||"update-third-party-external-integration"===this.state.type||"update-first-party-external-integration"===this.state.type||"update-compliance-integration"===this.state.type||(0,V().t1)(this.state)}updateCreationFormType(e){"create-guest-integration"===e&&this.setState({type:"create-guest-integration",startingRecord:void 0,recordTypeOnSubmission:"public",status:"unpublished"}),"create-bot"===e&&this.setState({type:"create-bot",startingRecord:void 0,recordTypeOnSubmission:"internal",status:"unpublished"})}initializeNewForm(e,t,i){if(e.table===mn().cZ)this.setState({type:"update-bot",startingRecord:e,recordTypeOnSubmission:"internal",status:"unpublished"});else if(e.table===fn().K2)if((0,a(921787).z6)(e.value.id))((0,gn().t9)(e.value)||(0,gn().Mq)(e.value))&&this.setState({type:"update-compliance-integration",startingRecord:{table:fn().K2,value:e.value},startingAuthRecord:t,recordTypeOnSubmission:"compliance",status:e.value.status});else if((0,gn().VM)(e.value)||(0,gn().hB)(e.value))if((0,a(235484).BP)({integrationId:e.value.id,env:"production"}))this.setState({type:"update-first-party-external-integration",startingRecord:{table:e.table,value:e.value},recordTypeOnSubmission:"unfurling",status:e.value.status});else{if(!t)return;const r=i.map((e=>({type:e.verified_at?"verified":"unverified",id:e.id,domain:e.domain,verificationCode:e.verification_code,createdAt:e.created_at,expiresAt:e.expires_at,alive:e.alive})));this.setState({type:"update-third-party-external-integration",startingRecord:{table:e.table,value:e.value},startingAuthRecord:t,recordTypeOnSubmission:"unfurling",status:e.value.status,domainVerifications:r,domainVerificationStore:"update-third-party-external-integration"===this.state.type?this.state.domainVerificationStore:new(a(21234).Z)})}else"guest"===e.value.type&&this.setState({type:"update-guest-integration",startingRecord:{table:e.table,value:e.value},recordTypeOnSubmission:"public",status:e.value.status});else(0,V().t1)(e)}}const bn=hn;var yn=()=>a(632599),vn=()=>a(615912),xn=()=>a(198690),_n=()=>a(163262),wn=()=>a(989349),Cn=()=>a(17630),Sn=()=>a(255933),jn=()=>a(286310),Mn=()=>a(763266),kn=()=>a(345918);class In extends je().default{getInitialState(){return{description:"",how_to_use:"",features:[],categories:[],slug:"",preview_images:[],add_to_notion_url:"",listing_status:null,errors:{description:"",how_to_use:"",add_to_notion_url:"",slug:"",preview_images:"",features:"",categories:"",_general:""}}}setErrors(e){this.setState({...this.state,errors:{...this.state.errors,...e}})}setValues(e){this.setState({...this.state,...e})}}const Tn=new In;const Pn=function(){const e=(0,o().yK)((()=>({icon:{display:"flex",alignItems:"flex-end",justifyContent:"center",flex:1},innerContainer:{display:"flex",justifyContent:"space-between",marginTop:80,marginBottom:80},contentContainer:{display:"flex",flexDirection:"column",width:"66%",justifyContent:"center"},header:{fontWeight:L().Ue.bold,fontSize:50,color:c().ZP.frontText,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},subtitle:{fontWeight:L().Ue.regular,fontSize:24,color:c().ZP.frontTextMedium,letterSpacing:"0.015em"},button:{display:"inline-flex",color:c().ZP.frontTextMedium,borderRadius:4,padding:6,fontSize:15,width:"fit-content"},buttonContent:{display:"flex",alignItems:"center"},arrowIcon:{width:20,height:20}})),[]);return(0,k.jsxs)("div",{style:e.innerContainer,children:[(0,k.jsxs)("div",{style:e.contentContainer,children:[(0,k.jsx)("div",{style:e.header,children:(0,k.jsx)(d()._H,{id:"creatorProfile.integration.notFound.title.label",defaultMessage:"Not Found"})}),(0,k.jsx)("div",{style:e.subtitle,children:(0,k.jsx)(d()._H,{id:"creatorProfile.integration.notFound.subtitle.label",defaultMessage:"This integration doesn't exist."})})]}),(0,k.jsx)("div",{style:e.icon,children:(0,a(969798).H)({width:98,height:98})})]})};var Dn=()=>a(836273);Object.entries({"8btEqLBipIhzrURDtMiMp":"Security & compliance",LrLnDt6KMdjAjuzJx3Mue:"Sales","6Nnak0fGdhHnYOqbbRmGbP":"Identity","4jaNdw5xVtuE1Kb7WH8VDW":"Marketing","4917v9HZijGubR4nmfJdhV":"Finance","2YuNhKaZMbW7vxlqx8DNef":"Customer experience","29jYzS08IK5xXF2k5R40gP":"Forms","6b0oRAGgoFg76mFv6lMK1m":"File management","1gyl4Y79DvZ0TM3D5FyYX5":"Engineering","2xVe1cxdZe794uAIyw6Kl9":"Design","6b0K7wADJ37fQorrlSQsaq":"Automations","6HgHpfWS9cNQn9EXZkndTW":"Productivity","3Tmdhi67ZGO3xHaaooyCgj":"Collaboration","5qR7nmskJp1EvKEsGwPGjf":"Communication","4Cbg47uBGFaVqIoP4yW39W":"Analytics"}).reduce(((e,t)=>{let[a,i]=t;return{...e,[i]:a}}),{});const Ln=(0,d().vU)({generalQuality:{defaultMessage:"This integration does not meet our quality standards. Please review our guidelines and resubmit.",id:"creatorProfile.integration.status.rejected.generalQuality"},selfPromotion:{defaultMessage:"This integration is self-promotional. Please review our guidelines and resubmit.",id:"creatorProfile.integration.status.rejected.selfPromotion"},offensiveContent:{defaultMessage:"This integration contains offensive content. Please review our guidelines and resubmit.",id:"creatorProfile.integration.status.rejected.offensiveContent"},offensiveContentImages:{defaultMessage:"This integration contains offensive images. Please review our guidelines and resubmit.",id:"creatorProfile.integration.status.rejected.offensiveContentPhoto"},logoIsNotUnique:{defaultMessage:"This integration's logo is not unique. Please review our guidelines and resubmit.",id:"creatorProfile.integration.status.rejected.logoIsNotUnique"},impersonatingBrand:{defaultMessage:"This integration is impersonating a brand. Please review our guidelines and resubmit.",id:"creatorProfile.integration.status.rejected.impersonatingBrand"},supportEmailDomain:{defaultMessage:"This integration's support email domain does not match the integration domain. Please review our guidelines and resubmit.",id:"creatorProfile.integration.status.rejected.supportEmailDomain"},oauthFlowError:{defaultMessage:"This integration's OAuth flow is incorrect. Please review our guidelines and resubmit.",id:"creatorProfile.integration.status.rejected.oauthFlowError"},privateAPI:{defaultMessage:"This integration is using private APIs. We only accept integrations using public Notion APIs. Please review our guidelines and resubmit.",id:"creatorProfile.integration.status.rejected.privateAPI"},notSupportedType:{defaultMessage:"This integration is not supported. Please review our guidelines and resubmit.",id:"creatorProfile.integration.status.rejected.notSupportedType"},custom:{defaultMessage:"This integration has been rejected.",id:"creatorProfile.integration.status.rejected.custom"},notSupportedLanguage:{defaultMessage:"We currently only support integrations in English. Please review our guidelines and resubmit.",id:"creatorProfile.integration.status.rejected.notSupportedLanguage"}});var En=()=>a(752127),Rn=()=>a(452009);function Un(e){const t=(0,r().O7)();return(0,n().VK)((()=>{if(!e)return{};const a=new(xt().y2)(t,{table:fn().K2,id:e}),i=new(xt().ll)(t,{table:Rn().uV,id:(0,gn().Xv)({integrationId:e,locale:"en-US"})});return{listingStatus:a.getListingStatus(),slug:i.getSlug(),integrationListingModel:i.getModel()}}),[t,e])}function Bn(e){const{integrationId:t}=e,a=(0,r().O7)(),i=Fn(),{listingStatus:n,integrationListingModel:o,slug:s}=Un(t);if(!n)return null;const l=X(n||null,o),c="published"===l||"published_in_review"===l||"published_rejected"===l;return(0,k.jsxs)("div",{style:i.messageContainerOuter,children:[(0,k.jsxs)("div",{style:i.messageContainer,children:[(0,k.jsxs)("div",{style:i.messageInfo,children:[(0,k.jsx)(Hr,{templateStatus:l}),(0,k.jsx)("span",{style:i.messageText,children:(0,k.jsx)(Hn,{integrationStatus:l,isPublished:c,integrationId:t,slug:s})})]}),c?(0,k.jsx)(Ji().z,{variant:"neutral",onClick:()=>En().D({environment:a,url:`${Be().default.domainBaseUrl}${Dn()._j.integrations}/${s}`}),children:(0,k.jsx)(d()._H,{id:"creatorProfile.integrationPublishForm.status.published.cta",defaultMessage:"View live integration"})}):null]}),("approved"===n||"pending"===n)&&(0,k.jsx)(rt().q,{styleName:"Body-13px/Regular",children:(0,k.jsx)(d()._H,{id:"creatorProfile.integrationPublishForm.disabledAfterPublish",defaultMessage:"You are no longer be able to update the configuration of this integration. To update, you will need to create a new integration."})})]})}function Hn(e){const{integrationStatus:t,integrationId:a}=e;return(0,k.jsxs)(k.Fragment,{children:["in_review"===t?(0,k.jsx)(d()._H,{id:"creatorProfile.integrationPublishForm.status.inReview.message",defaultMessage:"Integrations under review are not editable. Review time is 5-10 business days."}):null,"published_in_review"===t?(0,k.jsx)(d()._H,{id:"creatorProfile.integrationPublishForm.status.approvedAndinReview.message",defaultMessage:"Integration is live on the gallery. Changes are under review."}):null,"published"===t?(0,k.jsx)(d()._H,{id:"creatorProfile.integrationPublishForm.status.published.message",defaultMessage:"Integration is live on the gallery."}):null,"rejected"===t||"published_rejected"===t?(0,k.jsx)(Zn,{integrationId:a}):null,"published_draft"===t?(0,k.jsx)(d()._H,{id:"creatorProfile.integrationPublishForm.status.publishedDraft.Message",defaultMessage:"Integration has unpublished changes"}):null]})}function Fn(){const{isDesktopWidth:e}=(0,m().EQ)();return(0,o().yK)((t=>({rejectMessage:{gap:"4px",display:"flex"},messageInfo:{display:"flex",gap:"10px",alignItems:"center"},messageContainerOuter:{display:"flex",flexDirection:"column",gap:"10px",backgroundColor:"rgba(0, 0, 0, 0.03)",padding:"10px 24px 10px 24px",maxWidth:"960px",minHeight:"60px",marginBottom:32},messageContainer:{justifyContent:"space-between",borderRadius:"8px",display:"flex",alignItems:"center",flexWrap:e?"nowrap":"wrap",gap:"10px",marginTop:"10px"},messageText:{color:t.regularTextColor,fontSize:"13.5px",flexShrink:e?10:"inherit"}})),[e])}function Zn(e){const{integrationId:t}=e,a=Fn(),i=(0,r().O7)(),{rejectReason:o,customRejectReason:s}=(0,n().VK)((()=>{if(void 0===t)return{};const e=new(xt().y2)(i,{table:fn().K2,id:t});if("internal"===e.getType())throw new Error("Integration type should not be internal");const a=e.getInfo();return{rejectReason:null==a?void 0:a.reject_reason,customRejectReason:null==a?void 0:a.custom_reject_reason}}),[i,t]),l=o?(0,kt().U2)(Ln,o):void 0;return"custom"===o&&s?(0,k.jsxs)("div",{style:a.rejectMessage,children:[(0,k.jsx)(d()._H,{...Ln.custom}),s]}):l?(0,k.jsx)(d()._H,{...l}):(0,k.jsx)(d()._H,{...Ln.generalQuality})}var An=()=>a(799891),Vn=()=>a(792409),Nn=()=>a(30312),zn=()=>a(466970);function On(e){const{botOrIntegrationPointer:t}=e,a=(0,n().VK)((()=>b().default.state.currentUserRootStore),[]);return(0,n().VK)((()=>{if(t.table===mn().cZ){if(!a)return;const e=xt().Qx.createChildStore(a,t);return null==e?void 0:e.getIntegrationPointer()}if(t.table===fn().K2)return t;(0,V().t1)(t)}),[t,a])}function Kn(){const e=(0,n().VK)((()=>b().default.state.currentUserRootStore),[]);return async t=>{let a;if(t.template_url.value){const i=(0,ra().K2)(t.template_url.value);e&&i&&(a=xt().G.createChildStore(e,{table:li().iU,id:i}),await a.load())}return a}}a(492176),a(7961);var qn=()=>a(749826);function Wn(e){var t;return{responseType:"error",data:{field:(null===(t=e.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type)??"base",message:e.body&&"debugMessage"in e.body&&e.body.debugMessage?e.body.debugMessage:void 0}}}async function Gn(e){const{environment:t,...a}=e,i=await x().callApi({eventName:"updateWebhookSubscription",environment:t,data:a});return"failed"===i.type?Wn(i):{responseType:"success",data:i.data}}var $n=()=>a(690122),Yn=()=>a(580794);function Xn(e){const t=(0,r().O7)(),{integrationPointer:a}=e,[{status:i,error:n,value:o},s]=(0,l().r5)((async()=>{if(!a)return[];const e=await async function(e){const{environment:t,integrationId:a}=e;if(!qn().default.checkGate({gateName:"self_serve_integration_webhooks"}))return{integrationWebhookSubscriptionIds:[],recordMap:{__version__:3}};const i=await x().callApi({eventName:"listWebhookSubscriptions",environment:t,data:{integrationId:a}});if("failed"===i.type)throw i.error;return i.data}({environment:t,integrationId:a.id});return fa().RecordMap.create(e.recordMap).getModels(e.integrationWebhookSubscriptionIds.map((e=>({id:e,table:Yn().k4})))).filter(V().$K).map((e=>({id:e.pointer.id,integration_id:e.getIntegrationId(),status:e.getStatus(),url:e.getUrl(),event_types:e.getEventTypes()})))}),[t,a]);return{result:o,status:i,error:n,refetch:s}}var Jn=()=>a(552064),Qn=()=>a(869851),eo=()=>a(521777),to=()=>a(212493),ao=()=>a(715139),io=()=>a(67961),ro=()=>a(512221),no=()=>a(167705),oo=()=>a(653457),so=()=>a(692304),lo=()=>a(356641),co=()=>a(603757),uo=()=>a(615634);function po(e){const{sections:t}=e,a=(0,o().yK)((e=>({container:{flex:1},section:{marginBottom:6},sectionButton:{background:e.lightGrayButtonBackground,borderRadius:6},sectionButtonHovered:{background:e.lightGrayButtonHoveredBackground},sectionButtonPressed:{background:e.lightGrayButtonPressedBackground},sectionButtonLabel:{padding:"12px 24px",justifyContent:"space-between",display:"flex",alignItems:"center"},sectionTitle:{fontWeight:L().Ue.semibold},sectionButtonIconArea:{alignItems:"center"},chevronIcon:{width:12,height:12,marginLeft:12,transition:"transform 200ms ease-out"},sectionContent:{padding:"12px 24px"}})),[]),[r,n]=i.useState({});return(0,k.jsx)("div",{style:a.container,children:t.map((e=>{if(e.hidden)return null;const t=Boolean(r[e.key]);return(0,k.jsxs)("div",{style:a.section,children:[(0,k.jsx)("div",{children:(0,k.jsx)(ye().Z,{onClick:()=>n({...r,[e.key]:!t}),style:a.sectionButton,hoveredStyle:a.sectionButtonHovered,children:(0,k.jsxs)(ia().gq,{style:a.sectionButtonLabel,children:[(0,k.jsx)("div",{children:(0,k.jsx)(io().Z,{style:a.sectionTitle,children:e.title})}),(0,k.jsxs)(ia().gq,{style:a.sectionButtonIconArea,children:[e.secondaryLabel&&(0,k.jsx)(io().Z,{isSecondaryColor:!0,children:e.secondaryLabel}),(0,uo().i)({...a.chevronIcon,transform:`rotateZ(${t?180:0}deg)`})]})]})})}),t&&(0,k.jsx)("div",{style:a.sectionContent,children:e.content})]},e.key)}))})}const go=(0,d().vU)({userCategoryLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.user",defaultMessage:"User"},userDeletedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.userDeleted",defaultMessage:"User deleted"},userDeletedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.userDeleted",defaultMessage:"A user is deleted."},userSuspendedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.userSuspended",defaultMessage:"User suspended"},userSuspendedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.userSuspended",defaultMessage:"A user is suspended."},userUnsuspendedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.userUnsuspended",defaultMessage:"User unsuspended"},userUnsuspendedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.userUnsuspended",defaultMessage:"A user is unsuspended."},userUpdatedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.userUpdated",defaultMessage:"User updated"},userUpdatedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.userUpdated",defaultMessage:"A user's properties, such as name, avatar, or email, are updated. Consecutive events of this type within a short time window are aggregated."},pageCategoryLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.page",defaultMessage:"Page"},pageAutomationCreatedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.pageAutomationCreated",defaultMessage:"Automation created"},pageAutomationCreatedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.pageAutomationCreated",defaultMessage:"An automation is added for a page. Updates to the automation within a short time window are aggregated."},pageAutomationDeletedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.pageAutomationDeleted",defaultMessage:"Automation deleted"},pageAutomationDeletedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.pageAutomationDeleted",defaultMessage:"An automation is deleted for a page."},pageAutomationUpdatedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.pageAutomationUpdated",defaultMessage:"Automation updated"},pageAutomationUpdatedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.pageAutomationUpdated",defaultMessage:"An automation is updated for a page."},pageContentUpdatedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.pageContentUpdated",defaultMessage:"Page content updated"},pageContentUpdatedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.pageContentUpdated",defaultMessage:"A page's content is changed, such as adding or removing a block on the page. Consecutive events of this type within a short time window are aggregated."},pageCreatedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.pageCreated",defaultMessage:"Page created"},pageCreatedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.pageCreated",defaultMessage:"A new page is created. Updates to the page within a short time window are aggregated."},pageDeletedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.pageDeleted",defaultMessage:"Page deleted"},pageDeletedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.pageDeleted",defaultMessage:"A page is moved to the trash. Events of this type are aggregated by canceling out any subsequent page.undeleted events within a short time frame."},pageLockedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.pageLocked",defaultMessage:"Page locked"},pageLockedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.pageLocked",defaultMessage:"A page is locked from editing."},pageMovedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.pageMoved",defaultMessage:"Page moved"},pageMovedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.pageMoved",defaultMessage:"A page is moved to a different location. Consecutive events of this type within a short time window are aggregated."},pagePropertiesUpdatedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.pagePropertiesUpdated",defaultMessage:"Page properties updated"},pagePropertiesUpdatedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.pagePropertiesUpdated",defaultMessage:"A page's properties are updated. Consecutive events of this type within a short time window are aggregated."},pageUndeletedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.pageUndeleted",defaultMessage:"Page undeleted"},pageUndeletedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.pageUndeleted",defaultMessage:"A page is restored from the trash. Events of this type are aggregated by canceling out any subsequent page.deleted events within a short time frame."},pageUnlockedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.pageUnlocked",defaultMessage:"Page unlocked"},pageUnlockedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.pageUnlocked",defaultMessage:"A page is unlocked for editing."},databaseCategoryLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.database",defaultMessage:"Database"},databaseAutomationCreatedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.databaseAutomationCreated",defaultMessage:"Automation created"},databaseAutomationCreatedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.databaseAutomationCreated",defaultMessage:"An automation is added for a database. A new database is created. Updates to the automation within a short time window are aggregated."},databaseAutomationDeletedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.databaseAutomationDeleted",defaultMessage:"Automation deleted"},databaseAutomationDeletedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.databaseAutomationDeleted",defaultMessage:"An automation is deleted for a database."},databaseAutomationUpdatedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.databaseAutomationUpdated",defaultMessage:"Automation updated"},databaseAutomationUpdatedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.databaseAutomationUpdated",defaultMessage:"An automation is updated for a database. Consecutive events of this type within a short time window are aggregated."},databaseContentUpdatedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.databaseContentUpdated",defaultMessage:"Database content updated"},databaseContentUpdatedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.databaseContentUpdated",defaultMessage:"A database's contents are updated, such as adding or removing a child page. Consecutive events of this type within a short time window are aggregated."},databaseCreatedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.databaseCreated",defaultMessage:"Database created"},databaseCreatedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.databaseCreated",defaultMessage:"A new database is created. Updates to the database within a short time window are aggregated."},databaseDeletedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.databaseDeleted",defaultMessage:"Database deleted"},databaseDeletedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.databaseDeleted",defaultMessage:"A database is moved to the trash. Events of this type are aggregated by canceling out any subsequent database.undeleted events within a short time frame."},databaseMovedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.databaseMoved",defaultMessage:"Database moved"},databaseMovedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.databaseMoved",defaultMessage:"A database is moved to a different location. Consecutive events of this type within a short time window are aggregated."},databaseSchemaUpdatedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.databaseSchemaUpdated",defaultMessage:"Database schema updated"},databaseSchemaUpdatedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.databaseSchemaUpdated",defaultMessage:"A database's schema is updated, such as adding or removing a property or changing the type of an existing property. Consecutive events of this type within a short time window are aggregated."},databaseUndeletedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.databaseUndeleted",defaultMessage:"Database undeleted"},databaseUndeletedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.databaseUndeleted",defaultMessage:"A database is restored from the trash. Events of this type are aggregated by canceling out any subsequent database.deleted events within a short time frame."},commentCategoryLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.comment",defaultMessage:"Comment"},commentCreatedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.commentCreated",defaultMessage:"Comment created"},commentCreatedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.commentCreated",defaultMessage:"A new discussion or suggestion comment is added."},commentDeletedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.commentDeleted",defaultMessage:"Comment deleted"},commentDeletedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.commentDeleted",defaultMessage:"A comment is deleted."},commentUpdatedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.commentUpdated",defaultMessage:"Comment updated"},commentUpdatedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.commentUpdated",defaultMessage:"A comment is updated."},blockCategoryLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.block",defaultMessage:"Block"},blockAutomationCreatedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.blockAutomationCreated",defaultMessage:"Automation created"},blockAutomationCreatedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.blockAutomationCreated",defaultMessage:"An automation for a block, such as a button automation, is created. Consecutive events of this type within a short time window are aggregated."},blockAutomationUpdatedEventType:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeLabels.blockAutomationUpdated",defaultMessage:"Automation updated"},blockAutomationUpdatedEventDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.eventTypeDescriptions.blockAutomationUpdated",defaultMessage:"An automation for a block, such as a button automation, is updated. Consecutive events of this type within a short time window are aggregated."}}),mo={hidden:!0,type:"user",label:(0,k.jsx)(d()._H,{...go.userCategoryLabel}),eventTypes:[{type:"user.deleted",name:(0,k.jsx)(d()._H,{...go.userDeletedEventType}),description:(0,k.jsx)(d()._H,{...go.userDeletedEventDescription}),ariaLabel:z().Z.formatMessage(go.userDeletedEventDescription)},{type:"user.suspended",name:(0,k.jsx)(d()._H,{...go.userSuspendedEventType}),description:(0,k.jsx)(d()._H,{...go.userSuspendedEventDescription}),ariaLabel:z().Z.formatMessage(go.userSuspendedEventDescription)},{type:"user.unsuspended",name:(0,k.jsx)(d()._H,{...go.userUnsuspendedEventType}),description:(0,k.jsx)(d()._H,{...go.userUnsuspendedEventDescription}),ariaLabel:z().Z.formatMessage(go.userUnsuspendedEventDescription)},{type:"user.updated",name:(0,k.jsx)(d()._H,{...go.userUpdatedEventType}),description:(0,k.jsx)(d()._H,{...go.userUpdatedEventDescription}),ariaLabel:z().Z.formatMessage(go.userUpdatedEventDescription)}]},fo={type:"page",label:(0,k.jsx)(d()._H,{...go.pageCategoryLabel}),eventTypes:[{type:"page.automation_created",name:(0,k.jsx)(d()._H,{...go.pageAutomationCreatedEventType}),description:(0,k.jsx)(d()._H,{...go.pageAutomationCreatedEventDescription}),ariaLabel:z().Z.formatMessage(go.pageAutomationCreatedEventDescription)},{type:"page.automation_deleted",name:(0,k.jsx)(d()._H,{...go.pageAutomationDeletedEventType}),description:(0,k.jsx)(d()._H,{...go.pageAutomationDeletedEventDescription}),ariaLabel:z().Z.formatMessage(go.pageAutomationDeletedEventDescription)},{type:"page.automation_updated",name:(0,k.jsx)(d()._H,{...go.pageAutomationUpdatedEventType}),description:(0,k.jsx)(d()._H,{...go.pageAutomationUpdatedEventDescription}),ariaLabel:z().Z.formatMessage(go.pageAutomationUpdatedEventDescription)},{type:"page.content_updated",name:(0,k.jsx)(d()._H,{...go.pageContentUpdatedEventType}),description:(0,k.jsx)(d()._H,{...go.pageContentUpdatedEventDescription}),ariaLabel:z().Z.formatMessage(go.pageContentUpdatedEventDescription)},{type:"page.created",name:(0,k.jsx)(d()._H,{...go.pageCreatedEventType}),description:(0,k.jsx)(d()._H,{...go.pageCreatedEventDescription}),ariaLabel:z().Z.formatMessage(go.pageCreatedEventDescription)},{type:"page.deleted",name:(0,k.jsx)(d()._H,{...go.pageDeletedEventType}),description:(0,k.jsx)(d()._H,{...go.pageDeletedEventDescription}),ariaLabel:z().Z.formatMessage(go.pageDeletedEventDescription)},{type:"page.locked",name:(0,k.jsx)(d()._H,{...go.pageLockedEventType}),description:(0,k.jsx)(d()._H,{...go.pageLockedEventDescription}),ariaLabel:z().Z.formatMessage(go.pageLockedEventDescription)},{type:"page.moved",name:(0,k.jsx)(d()._H,{...go.pageMovedEventType}),description:(0,k.jsx)(d()._H,{...go.pageMovedEventDescription}),ariaLabel:z().Z.formatMessage(go.pageMovedEventDescription)},{type:"page.properties_updated",name:(0,k.jsx)(d()._H,{...go.pagePropertiesUpdatedEventType}),description:(0,k.jsx)(d()._H,{...go.pagePropertiesUpdatedEventDescription}),ariaLabel:z().Z.formatMessage(go.pagePropertiesUpdatedEventDescription)},{type:"page.undeleted",name:(0,k.jsx)(d()._H,{...go.pageUndeletedEventType}),description:(0,k.jsx)(d()._H,{...go.pageUndeletedEventDescription}),ariaLabel:z().Z.formatMessage(go.pageUndeletedEventDescription)},{type:"page.unlocked",name:(0,k.jsx)(d()._H,{...go.pageUnlockedEventType}),description:(0,k.jsx)(d()._H,{...go.pageUnlockedEventDescription}),ariaLabel:z().Z.formatMessage(go.pageUnlockedEventDescription)}]},ho={type:"database",label:(0,k.jsx)(d()._H,{...go.databaseCategoryLabel}),eventTypes:[{type:"database.automation_created",name:(0,k.jsx)(d()._H,{...go.databaseAutomationCreatedEventType}),description:(0,k.jsx)(d()._H,{...go.databaseAutomationCreatedEventDescription}),ariaLabel:z().Z.formatMessage(go.databaseAutomationCreatedEventDescription)},{type:"database.automation_deleted",name:(0,k.jsx)(d()._H,{...go.databaseAutomationDeletedEventType}),description:(0,k.jsx)(d()._H,{...go.databaseAutomationDeletedEventDescription}),ariaLabel:z().Z.formatMessage(go.databaseAutomationDeletedEventDescription)},{type:"database.automation_updated",name:(0,k.jsx)(d()._H,{...go.databaseAutomationUpdatedEventType}),description:(0,k.jsx)(d()._H,{...go.databaseAutomationUpdatedEventDescription}),ariaLabel:z().Z.formatMessage(go.databaseAutomationUpdatedEventDescription)},{type:"database.content_updated",name:(0,k.jsx)(d()._H,{...go.databaseContentUpdatedEventType}),description:(0,k.jsx)(d()._H,{...go.databaseContentUpdatedEventDescription}),ariaLabel:z().Z.formatMessage(go.databaseContentUpdatedEventDescription)},{type:"database.created",name:(0,k.jsx)(d()._H,{...go.databaseCreatedEventType}),description:(0,k.jsx)(d()._H,{...go.databaseCreatedEventDescription}),ariaLabel:z().Z.formatMessage(go.databaseCreatedEventDescription)},{type:"database.deleted",name:(0,k.jsx)(d()._H,{...go.databaseDeletedEventType}),description:(0,k.jsx)(d()._H,{...go.databaseDeletedEventDescription}),ariaLabel:z().Z.formatMessage(go.databaseDeletedEventDescription)},{type:"database.moved",name:(0,k.jsx)(d()._H,{...go.databaseMovedEventType}),description:(0,k.jsx)(d()._H,{...go.databaseMovedEventDescription}),ariaLabel:z().Z.formatMessage(go.databaseMovedEventDescription)},{type:"database.schema_updated",name:(0,k.jsx)(d()._H,{...go.databaseSchemaUpdatedEventType}),description:(0,k.jsx)(d()._H,{...go.databaseSchemaUpdatedEventDescription}),ariaLabel:z().Z.formatMessage(go.databaseSchemaUpdatedEventDescription)},{type:"database.undeleted",name:(0,k.jsx)(d()._H,{...go.databaseUndeletedEventType}),description:(0,k.jsx)(d()._H,{...go.databaseUndeletedEventDescription}),ariaLabel:z().Z.formatMessage(go.databaseUndeletedEventDescription)}]},bo={type:"comment",label:(0,k.jsx)(d()._H,{...go.commentCategoryLabel}),eventTypes:[{type:"comment.created",name:(0,k.jsx)(d()._H,{...go.commentCreatedEventType}),description:(0,k.jsx)(d()._H,{...go.commentCreatedEventDescription}),ariaLabel:z().Z.formatMessage(go.commentCreatedEventDescription)},{type:"comment.deleted",name:(0,k.jsx)(d()._H,{...go.commentDeletedEventType}),description:(0,k.jsx)(d()._H,{...go.commentDeletedEventDescription}),ariaLabel:z().Z.formatMessage(go.commentDeletedEventDescription)},{type:"comment.updated",name:(0,k.jsx)(d()._H,{...go.commentUpdatedEventType}),description:(0,k.jsx)(d()._H,{...go.commentUpdatedEventDescription}),ariaLabel:z().Z.formatMessage(go.commentUpdatedEventDescription)}]},yo=[fo,ho,{type:"block",label:(0,k.jsx)(d()._H,{...go.blockCategoryLabel}),eventTypes:[{type:"block.automation_created",name:(0,k.jsx)(d()._H,{...go.blockAutomationCreatedEventType}),description:(0,k.jsx)(d()._H,{...go.blockAutomationCreatedEventDescription}),ariaLabel:z().Z.formatMessage(go.blockAutomationCreatedEventDescription)},{type:"block.automation_updated",name:(0,k.jsx)(d()._H,{...go.blockAutomationUpdatedEventType}),description:(0,k.jsx)(d()._H,{...go.blockAutomationUpdatedEventDescription}),ariaLabel:z().Z.formatMessage(go.blockAutomationUpdatedEventDescription)}]},bo,mo],vo=(0,d().vU)({enabledEventCount:{defaultMessage:"{numEnabledEvents}/{numTotalEvents} events",id:"creatorProfile.integrations.webhookSubscriptionDetail.enabledEventCount"}});function xo(e){let{event:t,tooltipEvents:a}=e;const i=wo();return(0,k.jsxs)("div",{style:i.tooltip,...a,children:[(0,k.jsx)("div",{children:t.type}),(0,k.jsx)("div",{style:i.tooltipBody,children:t.description})]})}function _o(e){const{enabledEventTypes:t}=e,a=wo(),i=function(e){return yo.map((t=>{const a=t.eventTypes.map((t=>({type:t.type,name:t.name,description:t.description,isEnabled:!e||!!e[t.type]}))),i=a.filter((e=>{let{isEnabled:t}=e;return t})).length;return{type:t.type,title:t.label,numEnabledEvents:i,numTotalEvents:a.length,eventInfo:a,hidden:t.hidden}}))}(t),r=i.map((e=>function(e){let{category:t,styles:a}=e;return{key:t.type,title:t.title,secondaryLabel:Co({category:t}),content:jo({category:t,styles:a}),hidden:t.hidden}}({category:e,styles:a})));return(0,k.jsx)(po,{sections:r})}function wo(){return(0,o().yK)((e=>({eventRow:{alignItems:"center"},eventName:{lineHeight:"18px",paddingLeft:6,fontWeight:L().Ue.medium},checkbox:{background:e.icon.uiBluePrimary,fill:e.white},disabledCheckbox:{background:e.icon.secondary,fill:e.white},tooltip:{display:"flex",flexDirection:"column",alignItems:"flex-start"},tooltipBody:{color:e.text.secondary}})),[])}function Co(e){let{category:t}=e;const{numEnabledEvents:a,numTotalEvents:i}=t;return(0,k.jsx)(d()._H,{...vo.enabledEventCount,values:{numEnabledEvents:a,numTotalEvents:i}})}function So(e){let{event:t,styles:a}=e;return(0,k.jsx)(gr().Z,{textWrap:!0,render:e=>(0,k.jsx)("div",{...e,children:(0,k.jsxs)(ia().gq,{style:a.eventRow,children:[(0,k.jsx)(co().K,{size:12,round:!0,thinOutline:!0,checked:!0,disabled:!0,style:t.isEnabled?a.checkbox:a.disabledCheckbox}),(0,k.jsx)(io().Z,{isSecondaryColor:!t.isEnabled,style:a.eventName,children:t.name})]})}),renderTooltip:e=>(0,k.jsx)(xo,{event:t,tooltipEvents:e})})}function jo(e){let{category:t,styles:a}=e;const i=t.eventInfo.map(((e,t)=>{const i=Math.floor(t/3)+1,r=t%3+1;return(0,k.jsx)(lo().r8,{row:i,col:r,children:So({event:e,styles:a})},e.type)}));for(let r=i.length+1;r<=3;r++)i.push((0,k.jsx)(lo().r8,{row:1,col:r,children:(0,k.jsx)(io().Z,{})},`empty-${r}`));return(0,k.jsx)(lo().rj,{gap:8,children:i})}const Mo=(0,d().vU)({allSelectedEventsCount:{id:"webhookSubscriptionModal.numTotalEventsSelected",defaultMessage:"Events ({totalEventsSelected})"},allSelectedCategoryCount:{id:"webhookSubscriptionModal.allCategoryEventsSelected",defaultMessage:"({totalNum} events)"},selectedCategoryCount:{id:"webhookSubscriptionModal.numCategoryEventsSelected",defaultMessage:"({numSelected} of {totalNum} events selected)"},endpointUrl:{id:"webhookSubscriptionModal.endpointURL",defaultMessage:"Endpoint URL"},selectedEventTypes:{id:"webhookSubscriptionModal.selectEvents",defaultMessage:"Select the events to listen to"},createButton:{id:"webhookSubscriptionModal.create",defaultMessage:"Create webhook"},editButton:{id:"webhookSubscriptionModal.edit",defaultMessage:"Update webhook"},cancelButton:{id:"webhookSubscriptionModal.cancel",defaultMessage:"Cancel"},genericError:{id:"webhookSubscriptionModal.genericErrorMessage",defaultMessage:"Something went wrong, please retry again"},createHeader:{defaultMessage:"Create webhook",id:"webhookSubscriptionModal.createModalTitle"},editHeader:{defaultMessage:"Edit webhook",id:"webhookSubscriptionModal.editModalTitle"},createByline:{defaultMessage:"Set up your webhook endpoint to receive live events from Notion",id:"webhookSubscriptionModal.modalByline"}});function ko(e){var t;let{integrationId:a,onRefetchSubscription:s,setIsOpen:l,webhookSubscription:u}=e;const p=null!==u;function g(e){const{eventCategory:t,totalNumEventsForCategory:a,numSelectedForCategory:r}=e,n=t.type,o=()=>{M((e=>({...e,[n]:!e[n]})))},s=()=>{0!==_[n].length?w((e=>({...e,[n]:[]}))):w((e=>({...e,[n]:b[n]})))};let l;return l=a===r?(0,k.jsx)(d()._H,{...Mo.allSelectedCategoryCount,values:{totalNum:a}}):(0,k.jsx)(d()._H,{...Mo.selectedCategoryCount,values:{numSelected:r,totalNum:a}}),{key:n,action:o,render:e=>{let d;return d=r===a||r>0&&"partial",(0,i.createElement)(it().Z,{textWrapperStyle:R.textWrapperStyle,title:(0,k.jsxs)("div",{style:R.title,children:[(0,k.jsx)(no().Z,{style:R.toggleButton,open:j[n],onClick:o,isSidebar:!1,fill:!1,icon:"chevron"}),(0,k.jsx)(ao().Z,{checked:d,size:14,checkSize:8,onClick:s}),(0,k.jsx)(io().Z,{style:R.categoryText,children:t.label}),(0,k.jsx)(io().Z,{isSecondaryColor:!0,style:R.categorySubHeader,children:l})]}),...e,key:n})}}}const m=(0,n().qz)(void 0,so().Z),f=(0,d().YB)(),h=i.useMemo((()=>yo.filter((e=>{let{hidden:t}=e;return!t}))),[]),b=i.useMemo((()=>h.reduce(((e,t)=>({...e,[t.type]:t.eventTypes.map((e=>{let{type:t}=e;return t}))})),{})),[h]),y=i.useMemo((()=>h.reduce(((e,t)=>e+t.eventTypes.length),0)),[h]),v=i.useMemo((()=>p?h.reduce(((e,t)=>({...e,[t.type]:t.eventTypes.map((e=>{let{type:t}=e;return t})).filter((e=>{var t;return null==u||null===(t=u.event_types)||void 0===t?void 0:t[e]}))})),{}):h.reduce(((e,t)=>({...e,[t.type]:t.eventTypes.map((e=>{let{type:t}=e;return t}))})),{})),[u,p,h]),[_,w]=i.useState(v),[C,S]=i.useState(p?u.url:""),[j,M]=i.useState(Object.keys(b).reduce(((e,t)=>(e[t]=!1,e)),{})),[I,T]=i.useState(""),[P,D]=i.useState(""),[L,E]=i.useState(!1),R=function(e){let{hasEventTypesError:t}=e;return(0,o().yK)((e=>({textWrapperStyle:{margin:0},textInput:{background:e.white,height:32,fontSize:15},disabledTextInput:{height:32,fontSize:15,color:e.lightTextColor},wrapper:{display:"flex"},webhookUrlSection:{marginTop:24,marginBottom:24},label:{fontSize:13.5,color:c().ZP.black},required:{color:c().ZP.red,marginLeft:2},container:{paddingBottom:8},toggleButton:{marginLeft:2,marginRight:2},title:{margin:0,display:"flex",alignItems:"center"},categoryText:{marginLeft:8,fontWeight:600},categorySubHeader:{marginLeft:6},icon:{height:32,width:32,fill:e.icon.secondary},eventTypesContainer:{height:310,borderRadius:15,border:`1px solid ${t?e.stroke.uiRedSecondary:e.stroke.secondary}`},eventTypesSection:{padding:8,maxHeight:280,overflowY:"scroll"},errorLabel:{marginTop:3,color:e.text.uiRedPrimary,paddingLeft:16},actionButton:{marginTop:15,width:"100%",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},eventName:{display:"flex",alignItems:"center"},helpIcon:{width:15,height:15},eventTypesHeader:{display:"flex",height:40,padding:16,borderBottom:`1px solid ${e.regularDividerColor}`,gap:10,alignItems:"center"}})),[t])}({hasEventTypesError:P.length>0}),U=(0,r().O7)(),B=p&&"pending"!==u.status,H=!(0,kt().Xy)(C.trim(),(null==u||null===(t=u.url)||void 0===t?void 0:t.trim())||""),F=!(0,kt().Xy)(_,v),Z=H||F;async function A(){if(p&&!C)return void T("Webhook URL cannot be blank");T(""),D(""),E(!0);const e=Object.values(_).flat().reduce(((e,t)=>({...e,[t]:!0})),{});let t;if(t=p?await Gn({environment:U,subscriptionId:u.id,eventTypes:e,...B?{}:{url:C}}):await async function(e){const{environment:t,...a}=e,i=await x().callApi({eventName:"createWebhookSubscription",environment:t,data:a});return"failed"===i.type?Wn(i):{responseType:"success",data:i.data}}({environment:U,integrationId:a,url:C,eventTypes:e}),E(!1),"error"===t.responseType){const e=t.data.message??f.formatMessage(Mo.genericError);"url"===t.data.field?T(e):"eventTypes"===t.data.field&&D(e)}else"success"===t.responseType?(l(!1),s()):(0,V().t1)(t)}const N=[];let z=0;for(const i of h){if(i.hidden)continue;const e=i.type,t=[];let a=0;for(const{type:r,name:n,description:o,ariaLabel:s}of i.eventTypes)t.push({key:r,action:()=>{const t=_[e].filter((e=>e!==r));_[e].includes(r)||t.push(r),w((a=>({...a,[e]:t})))},render:t=>(0,k.jsx)(it().Z,{...t,icon:(0,k.jsx)(ao().Z,{checked:_[e].includes(r),size:14,checkSize:8,onClick:()=>{const t=_[e].filter((e=>e!==r));_[e].includes(r)||t.push(r),w((a=>({...a,[e]:t})))}}),focused:!1,title:(0,k.jsx)(gr().Z,{textWrap:!0,renderTooltip:e=>(0,k.jsx)(xo,{event:{type:r,description:o},tooltipEvents:e}),render:e=>(0,k.jsxs)("div",{style:R.eventName,children:[n,(0,k.jsx)(Xa().Z,{...e,ariaLabel:s,icon:oo().m,iconStyle:R.helpIcon})]})}),className:"notranslate",style:{paddingLeft:32},textWrapperStyle:{marginLeft:4}})}),_[e].includes(r)&&(a++,z+=1);N.push(g({eventCategory:i,shouldShowCount:!0,totalNumEventsForCategory:t.length,numSelectedForCategory:a})),j[e]&&N.push(...t)}const O={key:"results",items:N,render:e=>(0,k.jsx)(Qa().Z,{...e,title:null,loading:!1})},K=p?Mo.editButton:Mo.createButton;let q;return q=0!==z&&(z===y||"partial"),(0,k.jsxs)(to().jX,{padding:24,children:[(0,k.jsx)(ro().xB,{icon:(0,Qn().L)(R.icon),title:p?f.formatMessage(Mo.editHeader):f.formatMessage(Mo.createHeader),byline:f.formatMessage(Mo.createByline)}),(0,k.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),await A()},children:[(0,k.jsxs)("div",{style:R.webhookUrlSection,children:[(0,k.jsxs)("header",{style:R.wrapper,children:[(0,k.jsx)("div",{style:R.label,children:(0,k.jsx)(d()._H,{...Mo.endpointUrl})}),(0,k.jsx)("div",{style:R.required,children:"*"})]}),(0,k.jsx)(or().Z,{errorOutline:I.length>0,value:C,style:B?R.disabledTextInput:R.textInput,onChange:e=>S(e.target.value),disabled:B}),I.length>0&&(0,k.jsx)(rt().q,{styleName:"UIRegular-14px/Regular",style:R.errorLabel,children:I})]}),(0,k.jsx)("div",{children:(0,k.jsx)("header",{style:R.wrapper,children:(0,k.jsx)("div",{style:R.label,children:(0,k.jsx)(d()._H,{...Mo.selectedEventTypes})})})}),(0,k.jsxs)("div",{style:R.eventTypesContainer,children:[(0,k.jsxs)("div",{style:R.eventTypesHeader,children:[(0,k.jsx)(ao().Z,{checked:q,size:14,checkSize:8,onClick:function(){w(0===z?h.reduce(((e,t)=>({...e,[t.type]:b[t.type]})),{}):h.reduce(((e,t)=>({...e,[t.type]:[]})),{}))}}),(0,k.jsx)(rt().q,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,k.jsx)(d()._H,{...Mo.allSelectedEventsCount,values:{totalEventsSelected:z}})})]}),(0,k.jsx)("div",{style:R.eventTypesSection,children:(0,k.jsx)(Ja().Z,{type:Ja().i.Vertical,store:m,initialFocus:0,sections:[O]})}),P.length>0&&(0,k.jsx)(rt().q,{styleName:"UIRegular-14px/Regular",style:R.errorLabel,children:P})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)(ta().Z,{onClick:async()=>await A(),style:R.actionButton,disabled:L||!Z,children:(0,k.jsx)(d()._H,{...K})}),(0,k.jsx)(ye().Z,{style:R.actionButton,onClick:()=>{l(!1)},disabled:L,children:(0,k.jsx)(d()._H,{...Mo.cancelButton})})]})]})}function Io(e){let{onRefetchSubscription:t,isOpen:a,setIsOpen:i,integrationId:r,webhookSubscription:n}=e;return a?(0,k.jsx)(Ta().c,{areaConstraint:{width:{type:"min",length:600},height:{type:"min",length:600}},isOpen:a,onClosed:()=>i(!1),render:()=>(0,k.jsx)(ko,{integrationId:r,onRefetchSubscription:t,setIsOpen:i,webhookSubscription:n})}):null}function To(e){let{integrationId:t,onRefetchSubscription:a,modalIsOpen:i,setModalIsOpen:r}=e;const n=(0,o().yK)((()=>({createWebhookButton:{marginTop:"12px"}})),[]);return(0,k.jsxs)(ia().Ht,{gap:4,children:[(0,k.jsx)(Jn().Z,{icon:Qn().L,title:(0,k.jsx)(d()._H,{defaultMessage:"No webhooks",id:"creatorProfile.integrations.emptyWebhookSubscriptionView.title"}),description:(0,k.jsx)(d()._H,{defaultMessage:"You currently have no active webhooks",id:"creatorProfile.integrations.emptyWebhookSubscriptionView.description"})}),(0,k.jsxs)(ia().gq,{justifyContent:"center",children:[(0,k.jsx)(wa().Z,{icon:eo().R,style:n.createWebhookButton,onClick:()=>r(!0),children:(0,k.jsx)(d()._H,{defaultMessage:"Create webhook",id:"creatorProfile.integrations.emptyWebhookSubscriptionView.createWebhookButton.label"})}),(0,k.jsx)(Io,{isOpen:i,setIsOpen:r,integrationId:t,onRefetchSubscription:a,webhookSubscription:null})]})]})}var Po=()=>a(666414),Do=()=>a(360964),Lo=(a(749411),()=>a(835673));const Eo=(0,d().vU)({subscriptionIdLabel:{id:"creatorProfile.integrations.webhookSubscriptionIds.subscriptionIdLabel",defaultMessage:"Webhook subscription ID"},copyTooltip:{id:"creatorProfile.integrations.webhookSubscriptionIds.copyTooltip",defaultMessage:"Click to copy ID"}});function Ro(e){const{webhookSubscription:t}=e,a=(0,d().YB)(),r=[{key:"subscriptionId",label:(0,k.jsx)(d()._H,{...Eo.subscriptionIdLabel}),value:t.id}].flatMap(((e,t)=>(0,k.jsxs)(i.Fragment,{children:[(0,k.jsx)(lo().r8,{row:t+1,col:1,children:(0,k.jsx)(io().Z,{isSmall:!0,isMultiline:!0,children:e.label})}),(0,k.jsx)(lo().r8,{row:t+1,col:2,children:(0,k.jsx)(io().Z,{isSmall:!0,isMultiline:!0,children:(0,k.jsx)(Lo().v,{text:e.value,tooltip:a.formatMessage(Eo.copyTooltip)})})})]},e.key)));return(0,k.jsx)(lo().rj,{gap:8,children:r})}var Uo=()=>a(146947);const Bo=(0,d().vU)({verifySubscription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verificationModal.verifySubscription",defaultMessage:"Verify subscription"},byLine:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verificationModal.byLine",defaultMessage:"Verify subscription to start receiving webhook events"},urlLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verificationModal.urlLabel",defaultMessage:"URL"},resendToken:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verificationModal.resendToken",defaultMessage:"Resend token"},verificationTokenLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verificationModal.verificationTokenLabel",defaultMessage:"Verification token"},verificationMessage:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verificationModal.verificationMessage",defaultMessage:"{message}"},verificationTokenHint:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verificationModal.verificationTokenHint",defaultMessage:"Enter the verification token sent to the URL above"},verifyButtonLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verificationModal.verifyButton",defaultMessage:"Verify"},cancelButtonLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verificationModal.cancelButton",defaultMessage:"Cancel"},verificationFailure:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verificationModal.verificationFailure",defaultMessage:"Check the verification token and try again"},resendTokenFailure:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verificationModal.resendTokenFailure",defaultMessage:"Failed to send verification token with status {httpCode}"},resendTokenSuccess:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verificationModal.resendTokenSuccess",defaultMessage:"Verification token was successfully sent to the URL"}});function Ho(e){const{webhookSubscription:t,onClosed:a,onRefetchSubscription:n}=e,[s,l]=i.useState(""),[c,u]=i.useState(""),[p,g]=i.useState({status:"",message:""}),m=(0,o().yK)(Zo,[]),f=(0,r().O7)(),h=(0,d().YB)(),b=(0,i.useCallback)((async e=>{let{id:t,verificationToken:i}=e;u("");try{const e=await async function(e){const{environment:t,...a}=e,i=await x().callApi({eventName:"verifyWebhookSubscription",environment:t,data:a});if("failed"===i.type)throw i.error;return i.data}({environment:f,id:t,verificationToken:i});e&&(a(),n())}catch(r){return u(h.formatMessage(Bo.verificationFailure))}}),[f,n,h,a]),y=(0,i.useCallback)((async e=>{g({status:"",message:""});const t=await async function(e){const{environment:t,...a}=e,i=await x().callApi({eventName:"sendWebhookVerificationToken",environment:t,data:a});if("failed"===i.type)throw i.error;return i.data}({environment:f,id:e});"failure"===t.status?g({status:"failure",message:h.formatMessage(Bo.resendTokenFailure,{httpCode:t.httpCode})}):g({status:"success",message:h.formatMessage(Bo.resendTokenSuccess)})}),[f,h]);return(0,k.jsxs)(to().jX,{padding:24,children:[(0,k.jsxs)("div",{style:m.modalHeader,children:[(0,k.jsx)("div",{style:m.iconContainer,children:(0,Qn().L)(m.icon)}),(0,k.jsx)(rt().q,{styleName:"Heading-17px/Semibold",customStyles:{marginBottom:10},children:(0,k.jsx)(d()._H,{...Bo.verifySubscription})}),(0,k.jsx)(rt().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,k.jsx)(d()._H,{...Bo.byLine})})]}),(0,k.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),await b({id:t.id,verificationToken:s})},style:m.topSpacing,children:[(0,k.jsx)(io().Z,{isSecondaryColor:!0,children:(0,k.jsx)(d()._H,{...Bo.urlLabel})}),(0,k.jsx)(or().Z,{value:t.url,disabled:!0,right:(0,k.jsxs)(ia().gq,{children:[(0,k.jsx)("div",{style:m.resendButtonContainer}),(0,k.jsx)(ye().Z,{onClick:async()=>{await y(t.id)},style:m.resendButton,children:(0,k.jsx)(d()._H,{...Bo.resendToken})})]})}),["success","failure"].includes(p.status)&&(0,k.jsx)(rt().q,{styleName:"UIRegular-14px/Regular",style:"failure"===p.status?m.errorLabel:m.successLabel,children:p.message}),(0,k.jsxs)("div",{style:m.topSpacing,children:[(0,k.jsx)(io().Z,{isSecondaryColor:!0,children:(0,k.jsx)(d()._H,{...Bo.verificationTokenLabel})}),(0,k.jsx)(or().Z,{errorOutline:c.length>0,type:"text",value:s,onChange:e=>l(e.target.value)})]}),c.length>0?(0,k.jsx)(rt().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",style:m.errorLabel,children:(0,k.jsx)(d()._H,{...Bo.verificationMessage,values:{message:c}})}):(0,k.jsx)(rt().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,k.jsx)(d()._H,{...Bo.verificationTokenHint})}),(0,k.jsx)("div",{style:m.topSpacing,children:(0,k.jsx)(ta().Z,{style:m.modalButton,onClick:async()=>{await b({id:t.id,verificationToken:s})},children:(0,k.jsx)(d()._H,{...Bo.verifyButtonLabel})},"btn-verify")}),(0,k.jsx)("div",{children:(0,k.jsx)(j().Z,{isLarge:!0,style:m.modalButton,onClick:a,children:(0,k.jsx)(d()._H,{...Bo.cancelButtonLabel})})})]})]})}function Fo(e){const{webhookSubscription:t,isOpen:a,setIsOpen:i,onRefetchSubscription:r}=e;if(!a)return null;const n=()=>{i(!1)};return(0,k.jsx)(Ta().c,{areaConstraint:{width:{type:"min",length:600},height:{type:"min",length:300}},isOpen:a,onClosed:n,render:()=>(0,k.jsx)(Ho,{webhookSubscription:t,onClosed:n,onRefetchSubscription:r})})}function Zo(e){return{icon:{height:32,width:32},iconContainer:{width:"100%",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},resendButtonContainer:{width:30,marginLeft:-30,height:24,backgroundImage:"linear-gradient(to left, #f7f7f3 20%, rgba(255, 255, 255, 0) 100%)",zIndex:1},resendButton:{display:"inline-flex",alignItems:"center",fontFamily:L().F5(Uo().locale).sans,borderRadius:6,padding:"0 6px",height:24,width:100,color:c().ZP.blue},modalHeader:{textAlign:"center"},modalButton:{marginTop:10,width:"100%",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},topSpacing:{marginTop:20},successLabel:{marginTop:3,color:"green"},errorLabel:{marginTop:3,color:e.text.uiRedPrimary}}}const Ao=(0,d().vU)({activeWebhookStatusLabel:{defaultMessage:"This endpoint is currently active",id:"creatorProfile.integrations.webhookSubscriptionDetail.activeWebhookStatusLabel"},confirmDeleteModalTitle:{id:"creatorProfile.integrations.webhookSubscriptionDetail.confirmDelete.message",defaultMessage:"Delete webhook?"},confirmDeleteModalDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.confirmDelete.description",defaultMessage:"Once deleted, your webhook subscription permanently stops receiving events for all workspaces."},confirmResumeModalTitle:{id:"creatorProfile.integrations.webhookSubscriptionDetail.confirmResume.message",defaultMessage:"Resume webhook?"},confirmResumeModalDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.confirmResume.description",defaultMessage:"Once resumed, your webhook subscription will receive Notion events and should be ready to return a successful HTTP response."},urlLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.urlLabel",defaultMessage:"Endpoint URL"},urlDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.urlDescription",defaultMessage:"Notion is sending events to the following endpoint URL"},enabledEventsLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.enabledEventsLabel",defaultMessage:"Events to listen to"},enabledEventsDescription:{id:"creatorProfile.integrations.webhookSubscriptionDetail.enabledEventsDescription",defaultMessage:"Currently listening to the following Notion events"},deleteButtonLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.buttonLabels.delete",defaultMessage:"Delete"},editButtonLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.buttonLabels.edit",defaultMessage:"Edit webhook"},verifyButtonLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.buttonLabels.verify",defaultMessage:"Verify"},resumeButtonLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.buttonLabels.resume",defaultMessage:"Resume"},learnMoreButtonLabel:{id:"creatorProfile.integrations.webhookSubscriptionDetail.learnMoreFooterText",defaultMessage:"Learn more about webhooks"},verifyCalloutHeader:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verifyCalloutHeader",defaultMessage:"You must verify your endpoint to receive webhook events"},verifyCalloutBody:{id:"creatorProfile.integrations.webhookSubscriptionDetail.verifyCalloutBody",defaultMessage:"To start receiving events, you need to verify your endpoint. This ensures a secure connection between Notion and your application."},pausedCalloutHeader:{id:"creatorProfile.integrations.webhookSubscriptionDetail.pausedCalloutHeader",defaultMessage:"Webhook subscription is currently paused"},pausedCalloutBody:{id:"creatorProfile.integrations.webhookSubscriptionDetail.pausedCalloutBody",defaultMessage:"Your webhook subscription is currently paused due to high error rate. Please fix the problem and resume to enable event delivery."}});function Vo(e){return"pending"===e?Ao.verifyCalloutHeader:"paused"===e?Ao.pausedCalloutHeader:void 0}function No(e){return"pending"===e?Ao.verifyCalloutBody:"paused"===e?Ao.pausedCalloutBody:void 0}function zo(e){let{status:t,styles:a}=e;return"pending"!==t&&"paused"!==t?null:(0,k.jsxs)("div",{style:a.calloutContainer,children:[(0,k.jsxs)(ia().gq,{style:a.sectionTitle,children:[Qi(a.calloutIcon),(0,k.jsx)(io().Z,{children:(0,k.jsx)(d()._H,{...Vo(t)})})]}),(0,k.jsx)("p",{style:a.calloutBody,children:(0,k.jsx)(d()._H,{...No(t)})})]})}function Oo(e){const{webhookSubscription:t,onDeleteSubscription:a,onResumeSubscription:r,onRefetchSubscription:n,modalIsOpen:s,setModalIsOpen:l}=e,c=(0,o().yK)((e=>({activeText:{fontSize:14,lineHeight:"18px",color:e.text.uiBluePrimary,paddingLeft:6,letterSpacing:"-0.154px"},mainButtonArea:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:8},secondaryButtonArea:{display:"flex",justifyContent:"flex-start",alignItems:"center",gap:8},mediumBoldButton:{fontWeight:L().Ue.medium,height:32},frame:{border:`1px solid ${e.regularDividerColor}`,borderRadius:6},frameBody:{padding:24},frameFooter:{padding:"12px 24px",justifyContent:"space-between",display:"flex",alignItems:"center"},footerButton:{height:32},urlInput:{color:e.lightTextColor},sectionTitle:{fontWeight:L().Ue.semibold,paddingBottom:4},sectionSubtitle:{paddingBottom:12,alignItems:"center"},sectionBody:{paddingBottom:8},divider:{paddingTop:16,paddingBottom:16},learnMoreButton:{display:"inline-flex",marginLeft:1,fontWeight:L().Ue.medium},warningIcon:{width:18,height:17,color:e.statusTokenText.yellow,marginRight:6,marginTop:2},belowFrameArea:{marginLeft:2,marginTop:8},calloutContainer:{marginTop:30,marginBottom:10,padding:15,borderRadius:10,backgroundColor:e.accentColors.yellow[50]},calloutHeader:{fontWeight:L().Ue.bold,marginBlockStart:"0.5em",marginBlockEnd:"0.5em"},calloutIcon:{width:18,height:18,color:e.statusTokenText.yellow,marginTop:3,marginRight:6},calloutBody:{paddingLeft:25,color:e.lightTextColor,marginBlockStart:"0.2em",marginBlockEnd:"0.2em",fontSize:14},idProperties:{marginLeft:24,marginTop:12}})),[]),[u,p]=i.useState(!1);const g=[{key:"url",title:(0,k.jsx)(d()._H,{...Ao.urlLabel}),subtitle:(0,k.jsx)(d()._H,{...Ao.urlDescription}),main:(0,k.jsx)(or().Z,{value:t.url,disabled:!0,style:c.urlInput,format:or().B.Large}),footer:"active"===t.status&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(ao().Z,{size:12,round:!0,thinOutline:!0,checked:!0,disabled:!0}),(0,k.jsx)("div",{style:c.activeText,children:(0,k.jsx)(d()._H,{...Ao.activeWebhookStatusLabel})})]})},{key:"events",title:(0,k.jsx)(d()._H,{...Ao.enabledEventsLabel}),subtitle:(0,k.jsx)(d()._H,{...Ao.enabledEventsDescription}),main:(0,k.jsx)(_o,{enabledEventTypes:t.event_types})}],m=g.map(((e,t)=>(0,k.jsxs)("div",{children:[(0,k.jsx)(ia().gq,{style:c.sectionTitle,children:(0,k.jsx)(io().Z,{children:e.title})}),(0,k.jsx)(ia().gq,{style:c.sectionSubtitle,children:(0,k.jsx)(io().Z,{isSecondaryColor:!0,children:e.subtitle})}),(0,k.jsx)("div",{style:c.sectionBody,children:e.main}),e.footer&&(0,k.jsx)(ia().gq,{style:c.sectionSubtitle,children:e.footer}),t<g.length-1&&(0,k.jsx)(Ce().Z,{axis:"y",size:8})]},e.key))),f=[(0,k.jsx)(j().Z,{isRed:!0,onClick:async()=>await async function(e){const{accept:t}=await _().gt({message:(0,k.jsx)(d()._H,{...Ao.confirmDeleteModalTitle}),description:(0,k.jsx)(d()._H,{...Ao.confirmDeleteModalDescription})});t&&a(e)}(t.id),style:c.mediumBoldButton,children:(0,k.jsx)(d()._H,{...Ao.deleteButtonLabel})},"btn-delete"),(0,k.jsx)(ta().Z,{style:c.footerButton,onClick:()=>l(!0),children:(0,k.jsx)(d()._H,{...Ao.editButtonLabel})},"btn-edit")];let h=null;"pending"===t.status?h=(0,k.jsxs)("span",{children:[(0,k.jsxs)(wa().Z,{onClick:()=>p(!0),style:c.mediumBoldButton,children:[Qi(c.warningIcon),(0,k.jsx)(d()._H,{...Ao.verifyButtonLabel})]}),(0,k.jsx)(Fo,{isOpen:u,setIsOpen:p,webhookSubscription:t,onRefetchSubscription:n})]},"btn-verify"):"paused"===t.status&&(h=(0,k.jsxs)(wa().Z,{onClick:async()=>await async function(e){const{accept:t}=await _().gt({message:(0,k.jsx)(d()._H,{...Ao.confirmResumeModalTitle}),description:(0,k.jsx)(d()._H,{...Ao.confirmResumeModalDescription})});t&&r(e)}(t.id),style:c.mediumBoldButton,children:[Qi(c.warningIcon),(0,k.jsx)(d()._H,{...Ao.resumeButtonLabel})]},"btn-resume"));const b=(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{children:(0,k.jsx)("span",{style:c.secondaryButtonArea,children:h})}),(0,k.jsx)("div",{children:(0,k.jsx)("span",{style:c.mainButtonArea,children:f})})]}),y=(0,k.jsx)(Do().Z,{title:(0,k.jsx)(d()._H,{...Ao.learnMoreButtonLabel}),href:(0,ra().UY)("guides.publicAPI"),style:c.learnMoreButton,analyticsFrom:"webhook_subscription_detail"});return(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{style:c.frame,children:[(0,k.jsxs)("div",{style:c.frameBody,children:[m,(0,k.jsx)(zo,{status:t.status,styles:c})]}),(0,k.jsx)(Po().Z,{size:2}),(0,k.jsx)("div",{style:c.frameFooter,children:b})]}),(0,k.jsx)(Io,{isOpen:s,setIsOpen:l,webhookSubscription:t,onRefetchSubscription:n,integrationId:t.integration_id}),(0,k.jsxs)("div",{style:c.belowFrameArea,children:[y,(0,k.jsx)("div",{style:c.idProperties,children:(0,k.jsx)(Ro,{webhookSubscription:t})})]})]})}function Ko(e){const{botOrIntegrationPointer:t}=e,a=On({botOrIntegrationPointer:t}),[n,o]=(0,i.useState)([]),{status:s,result:l,refetch:d}=Xn({integrationPointer:a});(0,i.useEffect)((()=>{l&&o(l)}),[l]);const[c,u]=i.useState(!1),p=(0,r().O7)(),g=(0,i.useCallback)((async e=>{await Gn({environment:p,subscriptionId:e,status:"archived"}),d()}),[p,d]),m=(0,i.useCallback)((async e=>{await Gn({environment:p,subscriptionId:e,status:"active"}),d()}),[p,d]),f=n.at(0);let h=null;return f?h=(0,k.jsx)(Oo,{webhookSubscription:f,onDeleteSubscription:g,onResumeSubscription:m,onRefetchSubscription:d,modalIsOpen:c,setModalIsOpen:u}):a&&(h=(0,k.jsx)(To,{integrationId:a.id,onRefetchSubscription:d,modalIsOpen:c,setModalIsOpen:u})),(0,k.jsx)($n().Z,{loaded:"resolved"===s||"rejected"===s,spinnerSize:20,showSpinnerTimeout:500,children:h})}async function qo(e){var t;const{integrationFields:a,integrationListingContentfulId:i,userId:r,errors:n,setErrors:o,values:s,environment:l,actorEmail:d,isInstallationUrlOptional:c}=e;let u=!1;const p=function(e){var t,a,i,r;const{values:n}=e,o=[];return n.description||o.push("description"),n.how_to_use||o.push("how_to_use"),null!=n&&null!==(t=n.categories)&&void 0!==t&&t.length||o.push("categories"),null!=n&&null!==(a=n.features)&&void 0!==a&&a.length||o.push("features"),null!=n&&null!==(i=n.preview_images)&&void 0!==i&&i.length&&(null==n||null===(r=n.preview_images)||void 0===r?void 0:r.length)<1&&o.push("preview_images"),null!=n&&n.add_to_notion_url||e.isInstallationUrlOptional||o.push("add_to_notion_url"),o}({values:s,isInstallationUrlOptional:c});if(p.length>0){let e=n;for(const t of p)e={...e,[t]:z().Z.formatMessage(K.requiredFieldError,{name:(0,kt().kC)(t.replaceAll("_"," "))})};o(e),u=!0}(null==a?void 0:a.created_by_id)!==r&&o({_general:z().Z.formatMessage(K.notCreator)});const g=await async function(e){var t,a,i;const{name:r,values:n,setErrors:o,environment:s,integrationFields:l,integrationListingContentfulId:d,actorEmail:c}=e;let u=!0;null!=n&&null!==(t=n.categories)&&void 0!==t&&t.length&&n.categories.length>3&&(o({categories:z().Z.formatMessage(K.maxCategoriesError)}),u=!1);null!=n&&null!==(a=n.features)&&void 0!==a&&a.length&&n.features.length>3&&(o({features:z().Z.formatMessage(K.maxFeaturesError)}),u=!1);if(n.features){var p,g;const e=[];!n.features.includes("linkPreview")||null!=l&&null!==(p=l.capabilities)&&void 0!==p&&p.link_preview||e.push("Link Preview"),!n.features.includes("syncedDatabase")||null!=l&&null!==(g=l.capabilities)&&void 0!==g&&g.synced_database||e.push("Synced Database"),e.length>0&&(o({features:z().Z.formatMessage(K.featuresMismatchError,{features:e.join(", ")})}),u=!1)}const m=await async function(e){const{setErrors:t,name:a,environment:i,integrationId:r,actorEmail:n}=e;let o=!0;if(!a)return t({_general:z().Z.formatMessage(K.requiredFieldError,{name:"Name"})}),!1;const s=(0,Z().DI)(n);if(!s)for(const d of[...v().kz,"integration"])if(a&&a.toLowerCase().includes(d))return t({_general:z().Z.formatMessage(O.disallowedWordError,{word:d,field:"Name"})}),!1;const l=await x().callApi({eventName:"validateIntegrationName",environment:i,data:{name:a,actorEmail:n,integrationId:r,locale:A().al}});"success"!==l.type&&(t({_general:z().Z.formatMessage(K.nameIsTakenError)}),o=!1);return o}({name:r??"",actorEmail:c??"",setErrors:o,environment:s,integrationId:(null==l?void 0:l.id)??""});m||(u=!1);(!n.preview_images||n.preview_images.length<1)&&(o({preview_images:z().Z.formatMessage(K.previewImagesRequiredError)}),u=!1);if(n.slug){const e=await async function(e){const{setErrors:t,environment:a,slug:i,contentfulId:r,integrationId:n}=e,o=function(e){return 0===e.length?z().Z.formatMessage(q.slugIsEmptyError):e.length>v().d0?z().Z.formatMessage(q.slugTooLongError):/^[a-z0-9-]+$/.test(e)?e.startsWith("-")||e.endsWith("-")||e.includes("--")?z().Z.formatMessage(q.slugHyphenError):void 0:z().Z.formatMessage(q.slugCharactersError)}(i);if(o)return t({slug:o}),!1;const s=await x().callApi({eventName:"validateTemplateDraftSlug",environment:a,data:{slug:i,integrationId:n,contentfulId:r,locale:"en-US"}});if("success"!==s.type)return t({slug:z().Z.formatMessage(q.slugIsTakenError)}),!1;return!0}({environment:s,slug:n.slug,contentfulId:d,integrationId:null==l?void 0:l.id,setErrors:o});e||(u=!1)}n.how_to_use&&(null===(i=n.how_to_use)||void 0===i?void 0:i.length)>v().Pu&&(o({how_to_use:z().Z.formatMessage(K.howToUseTooLongError)}),u=!1);n.description&&n.description.length>v().Pu&&(o({description:z().Z.formatMessage(K.descriptionTooLongError)}),u=!1);if(n.add_to_notion_url){new RegExp(/^(https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/g).test(n.add_to_notion_url)||(o({add_to_notion_url:z().Z.formatMessage(K.invalidUrlError)}),u=!1)}return u}({values:s,setErrors:o,integrationFields:a,environment:l,integrationListingContentfulId:i,name:s.name,actorEmail:d});if(!g)return;if(u)return;const m=await x().callApi({eventName:"submitIntegrationPublishRequest",environment:l,data:{id:(null==a?void 0:a.id)??"",category_contentful_ids:s.categories??[],logo:(null==a?void 0:a.icon)??"",description:s.description??"",how_to_use:s.how_to_use??"",preview_images:(null===(t=s.preview_images)||void 0===t?void 0:t.filter((e=>!!e)))??[],features:s.features??[],add_to_notion_url:s.add_to_notion_url??"",slug:s.slug,name:s.name,icon:s.icon}});"success"===m.type&&m.data.success?he().Z.setState({isOpen:!0,type:"IntegrationPublishRequestSuccess",onAccept:()=>{Ue().c4({url:Dn()._j.creatorProfileIntegrations,environment:l})},onDismiss:()=>{Ue().c4({url:Dn()._j.creatorProfileIntegrations,environment:l})}}):_().UW(z().Z.formatMessage(K.submitError))}const Wo=(0,d().vU)({securityAndCompliance:{id:"creatorProfile.integrationPublish.category.security",defaultMessage:"Security & compliance"},sales:{id:"creatorProfile.integrationPublish.category.sales",defaultMessage:"Sales"},identity:{id:"creatorProfile.integrationPublish.category.identity",defaultMessage:"Identity"},marketing:{id:"creatorProfile.integrationPublish.category.marketing",defaultMessage:"Marketing"},finance:{id:"creatorProfile.integrationPublish.category.finance",defaultMessage:"Finance"},customerExperience:{id:"creatorProfile.integrationPublish.category.customerExperience",defaultMessage:"Customer experience"},forms:{id:"creatorProfile.integrationPublish.category.forms",defaultMessage:"Forms"},fileManagement:{id:"creatorProfile.integrationPublish.category.fileManagement",defaultMessage:"File management"},engineering:{id:"creatorProfile.integrationPublish.category.engineering",defaultMessage:"Engineering"},design:{id:"creatorProfile.integrationPublish.category.design",defaultMessage:"Design"},automations:{id:"creatorProfile.integrationPublish.category.automations",defaultMessage:"Automations"},productivity:{id:"creatorProfile.integrationPublish.category.productivity",defaultMessage:"Productivity"},collaboration:{id:"creatorProfile.integrationPublish.category.collaboration",defaultMessage:"Collaboration"},communication:{id:"creatorProfile.integrationPublish.category.communication",defaultMessage:"Communication"},analytics:{id:"creatorProfile.integrationPublish.category.analytics",defaultMessage:"Analytics"}}),Go=(0,d().vU)({workspacesEvents:{id:"creatorProfile.integrationPublish.feature.workspacesEvents",defaultMessage:"Workspace Events"},contentRedaction:{id:"creatorProfile.integrationPublish.feature.contentRedaction",defaultMessage:"Content Redaction"},permissionsRedaction:{id:"creatorProfile.integrationPublish.feature.permissionsRedaction",defaultMessage:"Permissions Redaction"},workflowAutomation:{id:"creatorProfile.integrationPublish.feature.workflowAutomation",defaultMessage:"Workflow Automation"},linkPreview:{id:"creatorProfile.integrationPublish.feature.linkPreview",defaultMessage:"Link Preview"},syncedDatabase:{id:"creatorProfile.integrationPublish.feature.syncedDatabase",defaultMessage:"Synced Database"},importer:{id:"creatorProfile.integrationPublish.feature.importer",defaultMessage:"Importer"},connectedProperty:{id:"creatorProfile.integrationPublish.feature.connectedProperty",defaultMessage:"Connected property"}}),$o={workspaceEvents:z().Z.formatMessage(Go.workspacesEvents),contentRedaction:z().Z.formatMessage(Go.contentRedaction),connectedProperty:z().Z.formatMessage(Go.connectedProperty),permissionsRedaction:z().Z.formatMessage(Go.permissionsRedaction),workflowAutomation:z().Z.formatMessage(Go.workflowAutomation),linkPreview:z().Z.formatMessage(Go.linkPreview),syncedDatabase:z().Z.formatMessage(Go.syncedDatabase),importer:z().Z.formatMessage(Go.importer)},Yo={"8btEqLBipIhzrURDtMiMp":z().Z.formatMessage(Wo.securityAndCompliance),LrLnDt6KMdjAjuzJx3Mue:z().Z.formatMessage(Wo.sales),"6Nnak0fGdhHnYOqbbRmGbP":z().Z.formatMessage(Wo.identity),"4jaNdw5xVtuE1Kb7WH8VDW":z().Z.formatMessage(Wo.marketing),"4917v9HZijGubR4nmfJdhV":z().Z.formatMessage(Wo.finance),"2YuNhKaZMbW7vxlqx8DNef":z().Z.formatMessage(Wo.customerExperience),"29jYzS08IK5xXF2k5R40gP":z().Z.formatMessage(Wo.forms),"6b0oRAGgoFg76mFv6lMK1m":z().Z.formatMessage(Wo.fileManagement),"1gyl4Y79DvZ0TM3D5FyYX5":z().Z.formatMessage(Wo.engineering),"2xVe1cxdZe794uAIyw6Kl9":z().Z.formatMessage(Wo.design),"6b0K7wADJ37fQorrlSQsaq":z().Z.formatMessage(Wo.automations),"6HgHpfWS9cNQn9EXZkndTW":z().Z.formatMessage(Wo.productivity),"3Tmdhi67ZGO3xHaaooyCgj":z().Z.formatMessage(Wo.collaboration),"5qR7nmskJp1EvKEsGwPGjf":z().Z.formatMessage(Wo.communication),"4Cbg47uBGFaVqIoP4yW39W":z().Z.formatMessage(Wo.analytics)};var Xo=()=>a(38883),Jo=()=>a(967092),Qo=()=>a(78014),es=()=>a(122671),ts=()=>a(998901),as=()=>a(104088);function is(){return(0,o().yK)((()=>({noCursorAllowed:{cursor:"not-allowed"},inputDisabled:{cursor:"not-allowed",backgroundColor:"rgba(0, 0, 0, 0.03)",color:"rgba(128, 128, 128, 1)"}})),[])}function rs(e){const{disabled:t,selectedIds:a=[],setSelectedIds:r,candidates:n,title:s}=e,l=(0,o().yK)((e=>({textInput:{borderRadius:ki().Z.borderRadius,background:"none"},icon:{fill:e.lightTextColor,height:"16px",width:"16px"},token:{marginLeft:"6px",color:e.regularTextColor}})),[]),c=is(),[u,p]=(0,i.useState)(""),[g,m]=(0,i.useState)(!1),f=(0,i.useMemo)((()=>[{key:"default-features-list",render:e=>(0,k.jsx)(Qa().Z,{...e,title:(0,k.jsx)(d()._H,{id:"integrationSubmission.featurePicker.title",defaultMessage:"{title}",values:{title:s}}),loading:!1}),items:(void 0!==n?Object.entries(n).map((e=>{let[t,a]=e;return{id:t,name:a}})):[]).filter((e=>!(null!=a&&a.includes(e.id)))).map((e=>({key:e.id,render:t=>(0,k.jsx)(it().Z,{...t,title:e.name}),action:()=>{p(""),null!=a&&a.includes(e.id)||r([...a,e.id])}})))}]),[n,a,r,s]);return(0,k.jsx)(Jo().ZP,{popupType:as().k.Popup,placementToOrigin:ts().Placement.Bottom,sameWidthAsOrigin:!0,open:g,onDismiss:()=>{p(""),m(!1)},origin:(0,k.jsx)(es().ZP,{disabled:t,style:{...l.textInput,...t?c.inputDisabled:{}},focus:g,focusInitial:!1,focusAfterAnimation:!0,format:es().UR.Share,inputDivStyle:{alignItems:"center"},value:u,onChange:e=>{p(e.target.value)},onClick:()=>{m(!0)},onRemoveLastToken:()=>{r([])},placeholder:"",type:"integration-features",tokens:null==a?void 0:a.map((e=>(0,k.jsx)(Qo().Z,{showRemoveButton:!t,isSingle:!1,style:{...l.token,...t?c.noCursorAllowed:{}},onClickRemove:t=>{t.stopPropagation(),r(a.filter((t=>t!==e)))},disabled:t,value:(0,k.jsx)("div",{style:{display:"flex"},children:n[e]}),format:Xo().lo.Small},e))),onEmptySubmit:kt().yR,showBorder:!0}),render:()=>(0,k.jsx)(xe().Z,{menuType:Se().o.Popup,tokenInputHeader:!0,disableHeaderBorder:!0,maxHeight:"25dvh",children:(0,k.jsx)(Ja().Z,{type:Ja().i.Vertical,initialFocus:0,sections:f})})})}function ns(e){const{handleReset:t,handleSave:a,isFormDirty:i=!0,isLoading:r,disabled:n,hideTermsOfService:s=!1,submitCTA:l=(0,k.jsx)(d()._H,{id:"creatorProfile.integrationSubmission.save",defaultMessage:"Save"})}=e,u=function(e){return(0,o().yK)((()=>({container:{marginTop:"12px",display:"flex",width:"100%",justifyContent:e?"flex-end":"space-between",alignItems:"center"},formActions:{display:"flex",gap:12,justifyContent:"flex-end"},terms:{fontSize:12,color:c().ZP.frontTextLight}})),[e])}(s);return(0,k.jsxs)("div",{style:u.container,children:[!s&&(0,k.jsx)("div",{style:u.terms,children:(0,k.jsx)(d()._H,{id:"creatorProfile.integrationSubmission.developerTermsOnSubmit",defaultMessage:"By submitting, you agree to Notion's <developerTermsLink>Developer Terms</developerTermsLink>.",values:{developerTermsLink:e=>(0,k.jsx)(aa().Z,{href:Dn()._j.developerTerms,children:e})}})}),(0,k.jsxs)("div",{style:u.formActions,children:[(0,k.jsx)(Ji().z,{disabled:n,variant:"light",onClick:t,children:(0,k.jsx)(d()._H,{id:"creatorProfile.integrationSubmission.cancel",defaultMessage:"Cancel"})}),(0,k.jsx)(Ji().z,{disabled:n||!i,variant:"dark",onClick:a,isLoading:r,children:l})]})]})}var os=()=>a(392192);const ss=(0,He().IU)("creatorProfileUpload",{viewBox:"0 0 18 18",svg:(0,k.jsx)("g",{children:(0,k.jsx)("path",{d:"M18.125 9.375c0 1.928-1.197 3.125-3.125 3.125h-1.25v-1.875H15c.887 0 1.25-.363 1.25-1.25s-.363-1.25-1.25-1.25h-1.25V6.25c0-2.044-1.081-3.125-3.125-3.125S7.5 4.206 7.5 6.25v.625H5.625c-1.278 0-1.875.597-1.875 1.875s.597 1.875 1.875 1.875h.625V12.5h-.625c-2.313 0-3.75-1.438-3.75-3.75C1.875 6.437 3.313 5 5.625 5c.04 0 .078.003.119.006C6.2 2.662 7.98 1.25 10.625 1.25c3.084 0 5 1.916 5 5v.047c1.56.234 2.503 1.369 2.503 3.078h-.003zM5.937 13.988l1.325 1.325 1.8-1.8v5.237h1.876v-5.238l1.8 1.8 1.325-1.324L10 9.925l-4.063 4.063z"})})});var ls=()=>a(607967);function ds(e){const{value:t,setValue:a,setError:i,showRemove:n=!0,dimensionsCopy:s="512 x 512",containerStyle:l={height:100,width:100},vertical:c}=e,u=(0,r().O7)(),p=function(e){return(0,o().yK)((t=>({uploadButton:{height:100,width:100,display:"flex",flexDirection:"column",justifyContent:"center",background:e?`url(${e}) no-repeat center bottom/cover`:t.accentColors.gray[30]},uploadContent:{textAlign:"center"},dimensionsText:{color:t.lightTextColor},icon:{width:18,height:18},image:{width:100,height:100,objectFit:"cover",borderRadius:4},container:{display:"flex",alignItems:"flex-start",gap:16},verticalContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:16},imagePlaceholderLoaded:{width:"fit-content"},buttonContainer:{display:"flex",flexDirection:"column",justifyContent:"center",gap:4}})),[e])}(t),{isUploading:g,uploadFile:m}=(0,ls().FL)({onError:e=>{i(e.message)},onSuccess:e=>{a(e)},environment:u}),f=c?p.verticalContainer:p.container;return t?(0,k.jsxs)("div",{style:f,children:[(0,k.jsx)(Tr().ZP,{placeholderLoadedStyle:p.imagePlaceholderLoaded,src:t,style:{...p.image,...l}}),(0,k.jsxs)("div",{style:p.buttonContainer,children:[(0,k.jsx)(Ji().z,{isLoading:g,variant:"light",onClick:m,children:(0,k.jsx)(d()._H,{id:"creatorProfile.integrationSubmission.imageUpload.upload",defaultMessage:"Upload image"})}),n&&(0,k.jsx)(Ji().z,{variant:"neutral",onClick:()=>{a(void 0)},children:(0,k.jsx)(d()._H,{id:"creatorProfile.integrationSubmission.imageUpload.remove",defaultMessage:"Remove"})})]})]}):(0,k.jsx)(os().Z,{style:{...p.uploadButton,...l},iconStyle:p.icon,icon:ss,onClick:m,children:g?(0,k.jsx)(Si().Z,{style:{marginLeft:4}}):(0,k.jsxs)("div",{style:p.uploadContent,children:[(0,k.jsx)(d()._H,{id:"creatorProfile.integrationSubmission.imageUpload.label",defaultMessage:"Upload"}),(0,k.jsx)("br",{}),(0,k.jsx)("div",{style:p.dimensionsText,children:(0,k.jsx)(d()._H,{id:"creatorProfile.integrationSubmission.imageUpload.dimensions",defaultMessage:"{dimensionsCopy}",values:{dimensionsCopy:s}})})]})})}function cs(e){const{values:t,setValue:a,setError:i,error:r,disabled:n}=e,s=(0,o().yK)((e=>({error:{color:e.errorText,fontSize:12,marginTop:2},image:{width:200,height:100},container:{display:"flex",gap:8},outer:{overflowX:"scroll"},helperText:{fontSize:12,fontWeight:L().Ue.regular,color:e.accentColors.gray[400],marginBottom:4},linkText:{cursor:"pointer",color:e.accentColors.gray[400]},disabled:{pointerEvents:"none",opacity:.7}})),[]),l={...s.container,...n?{...s.disabled}:{}};return(0,k.jsxs)("div",{style:s.outer,children:[(0,k.jsx)("div",{style:s.helperText,children:(0,k.jsx)(d()._H,{defaultMessage:"Recommended: Use our Figma template for high quality preview images. {figmaLink}.",id:"creatorProfile.integrationPublishRequest.previewImageUpload.helperText",values:{figmaLink:(0,k.jsx)("a",{style:s.linkText,href:"https://www.figma.com/design/9eNjv5T6ZNg4eQVcWWpszX/Integration-Gallery-Preview-Image-Templates?node-id=0-1&t=pUEQmZOJ5aHhKMpC-1",target:"_blank",children:(0,k.jsx)(d()._H,{defaultMessage:"Figma template",id:"creatorProfile.integrationPublishRequest.previewImageUpload.figmaTemplate"})})}})}),(0,k.jsxs)("div",{style:l,children:[(0,k.jsx)(ds,{value:t[0],dimensionsCopy:"1080 x 920",containerStyle:s.image,setError:i,setValue:e=>a(0,e),vertical:!0}),(0,k.jsx)(ds,{value:t[1],dimensionsCopy:"1080 x 920",containerStyle:s.image,setError:i,setValue:e=>a(1,e),vertical:!0}),(0,k.jsx)(ds,{value:t[2],dimensionsCopy:"1080 x 920",containerStyle:s.image,setError:i,setValue:e=>a(2,e),vertical:!0}),(0,k.jsx)(ds,{value:t[3],dimensionsCopy:"1080 x 920",containerStyle:s.image,setError:i,setValue:e=>a(3,e),vertical:!0})]}),r&&(0,k.jsx)("div",{style:s.error,children:r})]})}function us(e){const{integrationPointer:t,values:a,setValues:o}=e,s=(0,n().VK)((()=>b().default.state.currentUserRootStore),[]),l=(0,n().VK)((()=>{var e;return null===(e=b().default.state.currentUserStore)||void 0===e||null===(e=e.getModel())||void 0===e?void 0:e.email}),[]),c=(0,n().VK)((()=>{var e;return null===(e=b().default.state.currentUserStore)||void 0===e||null===(e=e.getModel())||void 0===e?void 0:e.id}),[]),[u,p]=i.useState(!1),g=(0,n().VK)((()=>{if(t&&s){const e=s.getRecordModel(t);return{name:null==e?void 0:e.getName(),id:null==e?void 0:e.id,created_by_id:null==e?void 0:e.getCreatedById(),icon:null==e?void 0:e.getInfo().icon,listing_status:null==e?void 0:e.getListingStatus(),capabilities:null==e?void 0:e.getCapabilities()}}}),[t,s]),m=(0,n().VK)((()=>Tn.getState().errors),[]),f=(0,r().O7)(),h=e=>{Tn.setErrors(e)},y=async()=>{p(!0),await qo({integrationFields:g,environment:f,errors:m,setErrors:h,values:{...a,name:null==g?void 0:g.name,icon:null==g?void 0:g.icon},actorEmail:l,userId:null==s?void 0:s.userId,isInstallationUrlOptional:_}),p(!1)},v=(0,n().VK)((()=>qn().default.getConfigKey("integration_tech_partners","tech_partner_ids")),[]),x=gs(),_=!!c&&(null==v?void 0:v.includes(c));return(0,k.jsxs)("form",{onSubmit:y,children:[(0,k.jsxs)("div",{style:x.header,children:[(0,k.jsx)(Tr().ZP,{placeholderLoadedStyle:x.imagePlaceholderLoaded,src:null==g?void 0:g.icon,style:x.image}),(0,k.jsx)(rt().q,{style:x.name,styleName:"UITitle-30px/Semibold",children:null==g?void 0:g.name})]}),(0,k.jsx)(ps,{errors:m,values:a,setValues:e=>o({...a,...e}),isSubmitting:u,setErrors:h,isInstallationUrlOptional:_}),(0,k.jsx)(rt().q,{style:x.warningText,styleName:"Body-14px/Regular",children:(0,k.jsx)(d()._H,{id:"creatorProfile.integrationPublishRequest.disabledAfterPublish",defaultMessage:"Once your integration is submitted and approved for publishing on the Integration Gallery, you will no longer be able to update the configuration of this integration. To update the configuration, you will need to create a new integration."})}),(0,k.jsx)("div",{style:x.formActions,children:(0,k.jsx)(ns,{handleSave:y,handleReset:()=>{Ue().c4({url:Dn()._j.creatorProfileIntegrations,environment:f})},isLoading:u,submitCTA:(0,k.jsx)(d()._H,{id:"creatorProfile.integrationPublishRequest.submit",defaultMessage:"Submit"})})})]})}function ps(e){const{errors:t,values:a,setValues:i,isSubmitting:r=!1,disabled:n=!1,setErrors:o,isInstallationUrlOptional:s=!1}=e,l=(0,d().YB)(),c=gs();return(0,k.jsxs)("div",{style:c.container,children:[(0,k.jsx)(Mi().Z,{name:l.formatMessage(K.featureLabel),htmlLabel:"features",hideLabel:!1,errorMessage:t.features,required:!0,labelStyle:c.label,children:(0,k.jsx)(rs,{selectedIds:a.features,setSelectedIds:e=>i({features:e}),title:l.formatMessage(K.featureLabel),disabled:r||n,candidates:$o})}),(0,k.jsx)(Mi().Z,{name:l.formatMessage(K.categoryLabel),htmlLabel:"categories",hideLabel:!1,errorMessage:t.categories,required:!0,labelStyle:c.label,children:(0,k.jsx)(rs,{selectedIds:a.categories,setSelectedIds:e=>i({categories:e}),title:l.formatMessage(K.categoryLabel),disabled:r||n,candidates:Yo})}),(0,k.jsx)(ar().w,{htmlLabel:"description",value:a.description,placeholder:l.formatMessage(K.descriptionPlaceholder),type:"text",style:c.textInput,onChange:e=>i({description:e.target.value}),onFocus:()=>{null!=t&&t.description&&o({description:""})},textareaElementAttributes:{rows:6},labelStyle:c.label,required:!0,textarea:!0,disabled:r||n,format:or().B.Default,label:l.formatMessage(K.description),error:t.description}),(0,k.jsx)(ar().w,{htmlLabel:"how to use",value:a.how_to_use,placeholder:l.formatMessage(K.howToUsePlaceholder),required:!0,type:"text",style:c.textInput,onChange:e=>i({how_to_use:e.target.value}),onFocus:()=>{null!=t&&t.how_to_use&&o({how_to_use:""})},textareaElementAttributes:{rows:6},labelStyle:c.label,textarea:!0,disabled:r||n,format:or().B.Default,label:l.formatMessage(K.howToUse),error:t.how_to_use}),(0,k.jsx)(ar().w,{required:!s,htmlLabel:"add to notion",value:a.add_to_notion_url,placeholder:"https://www.acme.com/integration/notion-dlp",type:"text",style:c.textInput,onChange:e=>i({add_to_notion_url:e.target.value}),onFocus:()=>{null!=t&&t.add_to_notion_url&&o({add_to_notion_url:""})},labelStyle:c.label,disabled:r||n,format:or().B.Default,label:l.formatMessage(K.addToNotion),error:t.add_to_notion_url}),(0,k.jsx)(ar().w,{htmlLabel:"slug",value:a.slug,placeholder:l.formatMessage(K.slugPlaceholder),type:"text",style:c.textInput,onChange:e=>i({slug:e.target.value}),onFocus:()=>{null!=t&&t.slug&&o({slug:""})},labelStyle:c.label,disabled:r||n,format:or().B.Default,label:l.formatMessage(K.slug),error:t.slug}),(0,k.jsx)(Mi().Z,{name:l.formatMessage(K.previewImages),htmlLabel:"preview_images",hideLabel:!1,required:!0,labelStyle:c.label,children:(0,k.jsx)(cs,{setValue:(e,r)=>{t.preview_images&&o({preview_images:""});const n=a.preview_images??[];n.splice(e,1,r),i({preview_images:n.filter(V().lm)})},setError:e=>o({preview_images:e}),error:t.preview_images,values:a.preview_images??[],disabled:r||n})}),t._general&&(0,k.jsx)(rt().q,{style:c.error,styleName:"Body-14px/Regular",children:t._general})]})}function gs(){return(0,o().yK)((e=>({error:{color:e.accentColors.red[500],marginBottom:8},imagePlaceholderLoaded:{width:"fit-content"},header:{marginBottom:32},formActions:{marginTop:32},warningText:{marginTop:32,color:e.accentColors.gray[400]},textInput:{background:"transparent",fontSize:14,borderRadius:4,padding:"9px"},label:{fontSize:13},disabledInput:{color:e.accentColors.gray[400],background:e.accentColors.gray[30],cursor:"not-allowed"},container:{gap:32,display:"flex",flexDirection:"column"},image:{width:100,height:100},name:{marginTop:16}})),[])}var ms=()=>a(58988);function fs(e){const{value:t}=e,[a,r]=i.useState(!1),n=()=>r(!1);return(0,k.jsx)(Jo().ZP,{popupType:as().k.Popup,alignmentToOrigin:ts().Alignment.Start,placementToOrigin:ts().Placement.Bottom,originGap:2,sameWidthAsOrigin:!0,open:a,onDismiss:n,render:()=>(0,k.jsx)(bs,{...e,value:t,onClose:n}),origin:(0,k.jsx)(hs,{...e,value:t,onClick:()=>r(!0)})})}function hs(e){const{onClick:t,value:a,renderMenuItem:i}=e,r=(0,o().yK)((e=>({dropdown:{background:e.whiteButtonBackground,border:`1px solid ${e.outlineButtonBorder}`,borderRadius:6,height:32},expandIcon:{height:12,width:12,fill:e.lightIconColor}})),[]);return(0,k.jsx)(k.Fragment,{children:i({item:a,focused:!1,onClick:t,style:r.dropdown,right:(0,ms().s)(r.expandIcon)})})}function bs(e){const{keyName:t,items:a,value:i,setValue:r,renderMenuItem:n,onClose:o}=e;let s=0;const l=a.map(((e,t)=>(e.id===(null==i?void 0:i.id)&&(s=t),{key:e.id,action:()=>{r(e),o()},render:t=>n({...t,item:e})})));return(0,k.jsx)(xe().Z,{menuType:Se().o.Popup,children:(0,k.jsx)(Ja().Z,{type:Ja().i.Vertical,initialFocus:s,sections:[{key:`form-input-section-${t}`,items:l,render:e=>(0,k.jsx)(Qa().Z,{...e})}]})})}function ys(e){const{label:t,subtitle:a,caption:i,error:r,children:n,field:s,formStateType:l,formFieldValidationSchema:d=N().aP,isNewIntegrationUiEnabled:u=!1}=e,p=d[s].requiredBy[l],g=(0,o().yK)((()=>({wrapper:{display:"flex"},label:{fontSize:13.5,fontWeight:u?L().Ue.regular:L().Ue.medium,color:u?c().ZP.black:c().ZP.frontTextMedium},required:{color:c().ZP.red,marginLeft:2},subtitle:{fontSize:u?12:15,color:c().ZP.frontTextLight},caption:{fontSize:u?12:15,color:c().ZP.frontTextLight},error:{marginTop:4,fontSize:15,color:c().ZP.frontRed},field:{display:"grid",gridTemplateColumns:"1fr",gap:6,marginBottom:32}})),[u]);return(0,k.jsxs)("div",{style:g.field,children:[(0,k.jsxs)("header",{style:g.wrapper,children:[(0,k.jsx)("div",{style:g.label,children:t}),p&&(0,k.jsx)("div",{style:g.required,children:"*"})]}),i&&(0,k.jsx)("div",{style:g.caption,children:i}),n,a&&(0,k.jsx)("div",{style:g.subtitle,children:a}),r&&(0,k.jsx)("div",{style:g.error,children:r})]})}var vs=()=>a(578062),xs=()=>a(959137),_s=()=>a(631986),ws=()=>a(628642),Cs=()=>a(101225);function Ss(e){const{currentValue:t,setNewValue:a,typeaheadTitle:r,style:n}=e,o=t||[],[s,l]=i.useState(""),d=()=>l("");return(0,k.jsx)(Jo().ZP,{popupType:as().k.Popup,sameWidthAsOrigin:!0,open:s.length>0,onDismiss:d,origin:(0,k.jsx)(Cs().Z,{style:{background:c().ZP.white,minHeight:32,fontSize:15},placeholder:"",value:s,onChange:e=>l(e.target.value),tokens:o.map(((e,t)=>(0,k.jsx)(Qo().Z,{format:Xo().lo.Medium,showRemoveButton:!0,isSingle:!1,shouldWrap:!0,value:e,style:n,onClickRemove:()=>{a(o.filter((t=>t!==e)))}},`${e}-${t}`))),onRemoveLastToken:()=>{o.length>0&&a(o.slice(0,o.length-1))}}),render:()=>{const e=s.trim(),t=(0,gn().ue)(Be().default.domainBaseUrl,e).map((e=>({key:e,render:t=>(0,k.jsx)(it().Z,{...t,title:e}),action:()=>{d(),a([...o,e])}})));return(0,k.jsx)(xe().Z,{menuType:Se().o.Popup,children:(0,k.jsx)(Ja().Z,{type:Ja().i.Vertical,initialFocus:0,sections:[{key:"valid-url-suggestion",items:t,render:e=>(0,k.jsx)(Qa().Z,{...e,title:r})}]})})}})}function js(e){const{currentRule:t,onUpdate:a,shouldShowDelete:r,onDelete:n,onError:s}=e,{name:l,regex:u,attributes:p,sampleUrls:g}=t,[m,f]=i.useState(JSON.stringify(p,null,2)),h=(0,o().yK)((()=>({container:{marginBottom:24,display:"flex",flexDirection:"column",gap:12},label:{fontSize:13.5,fontWeight:L().Ue.regular,color:c().ZP.frontTextMedium}})),[]);return(0,k.jsxs)("div",{style:h.container,children:[(0,k.jsxs)("label",{children:[(0,k.jsx)("div",{style:h.label,children:(0,k.jsx)(d()._H,{id:"developerIntegrationForm.regexRule.name.label",defaultMessage:"Rule Name"})}),(0,k.jsx)(or().Z,{inputClassName:l,style:{background:c().ZP.white,height:32,fontSize:15},value:l,onChange:e=>{a({...t,name:e.target.value})},right:r&&(0,k.jsx)(Ms,{onDelete:n})})]}),(0,k.jsxs)("label",{children:[(0,k.jsx)("div",{style:h.label,children:(0,k.jsx)(d()._H,{id:"developerIntegrationForm.sampleUrls.label",defaultMessage:"Sample URLs"})}),(0,k.jsx)(Ss,{currentValue:g,setNewValue:e=>{a({...t,sampleUrls:e})},style:{color:c().ZP.black},setErrorValue:e=>s(e),typeaheadTitle:(0,k.jsx)(d()._H,{id:"developerIntegrationsForm.urlsInput.typePrompt",defaultMessage:"Type or paste a url…"})})]}),(0,k.jsxs)("label",{children:[(0,k.jsx)("div",{style:h.label,children:(0,k.jsx)(d()._H,{id:"developerIntegrationForm.regexRule.pattern.label",defaultMessage:"Pattern"})}),(0,k.jsx)(or().Z,{style:{background:c().ZP.white,fontSize:15},autosize:!0,textarea:!0,value:u,onChange:e=>{a({...t,regex:e.target.value})}})]}),(0,k.jsxs)("label",{children:[(0,k.jsx)("div",{style:h.label,children:(0,k.jsx)(d()._H,{id:"developerIntegrationForm.regexRule.attributes.label",defaultMessage:"Attributes"})}),(0,k.jsx)(or().Z,{format:or().B.ExtraLarge,style:{backgroundColor:c().ZP.white},inputStyle:{fontSize:14,lineHeight:"18px",height:200,fontFamily:L().Gl.mono,padding:4},textarea:!0,value:m,onChange:e=>{const i=e.target.value;f(i);const r=(0,_s().Jv)(i);void 0===r?s((0,k.jsx)(d()._H,{id:"developerIntegrationForm.jsonEditor.error",defaultMessage:"{value} attributes has invalid JSON.",values:{value:l}})):a({...t,attributes:r})}})]})]})}function Ms(e){let{onDelete:t}=e;return(0,k.jsx)(ye().Z,{style:{padding:4,borderRadius:3},onClick:()=>{ws().Z.setState({open:!0,isDestructive:!1,isWarning:!0,title:(0,k.jsx)(d()._H,{id:"developerIntegrationFormRegexRule.deletionModal.title",defaultMessage:"Are you sure you want to delete this regex pattern rule?"}),message:(0,k.jsx)(d()._H,{id:"developerIntegrationFormRegexRule.deletionModal.message",defaultMessage:"Changes will not be saved until you submit the form."}),confirmationMessage:(0,k.jsx)(d()._H,{id:"developerIntegrationFormRegexRule.deletionModal.confirm",defaultMessage:"Delete"}),onConfirm:()=>{t()}})},children:(0,ri().y)({width:15,height:15})})}function ks(e,t){const{spaceStore:i,...o}=e,s=(0,r().O7)(),l=(0,n().VK)((()=>i&&(0,kn().Wd)(s,i)),[s,i]),d=(0,n().VK)((()=>i&&(0,kn().rn)(s,i)),[s,i]);return(0,k.jsx)(it().Z,{...o,ref:t,title:i&&(0,k.jsx)(a(384241).Z,{store:i}),icon:i&&(0,k.jsx)(ci().Z,{disabled:!0,icon:l,title:d,isEmptyPage:!1,size:19})})}const Is=i.forwardRef(ks);function Ts(e){const{secret:t,secretName:a,onCopy:i,actionButtons:r}=e;return(0,k.jsx)(or().Z,{type:t?"text":"password",disabled:!0,style:{fontFamily:L().F5(Uo().locale).mono,color:c().ZP.frontTextMedium},inputStyle:t?{cursor:"text"}:void 0,value:t||" ".repeat(40),right:(0,k.jsxs)("div",{style:{display:"flex"},children:[(0,k.jsx)("div",{style:{width:30,marginLeft:-30,height:24,backgroundImage:"linear-gradient(to left, #f7f7f3 20%, rgba(255, 255, 255, 0) 100%)",zIndex:1}}),t?(0,k.jsx)(Ps,{onCopy:i,secret:t,secretName:a}):r]})})}function Ps(e){const{secretName:t,secret:a,onCopy:n}=e,o=(0,r().O7)(),[s,l]=i.useState(!1),u=i.useCallback((async()=>{const e=await xs().F.clipboardActions.load();e.copyString({environment:o,stringValue:a,copiedMessage:e.clipboardMessages.copiedToClipboard}),n()}),[o,n,a]),p=s?(0,k.jsx)(d()._H,{defaultMessage:"{secretName} copied",id:"formSecretShow.secretCopied.tooltip",values:{secretName:t}}):(0,k.jsx)(d()._H,{defaultMessage:"Copy {secretName}",id:"formSecretShow.copySecret.tooltip",values:{secretName:t}});return(0,k.jsx)(gr().Z,{placement:ts().Placement.Top,renderTooltip:()=>p,render:e=>(0,k.jsx)(ye().Z,{onClick:e=>{e.preventDefault(),l(!0),setTimeout((()=>{l(!1)}),1500),u()},...e,style:{...Ds.button,color:s?c().ZP.mediumTextColor:c().ZP.blue},children:s?(0,k.jsx)(d()._H,{id:"formSecretShow.copied.label",defaultMessage:"Copied"}):(0,k.jsx)(d()._H,{id:"formSecretShow.copySecret.label",defaultMessage:"Copy"})})})}const Ds={button:{display:"inline-flex",alignItems:"center",fontFamily:L().F5(Uo().locale).sans,borderRadius:4,padding:"0 6px",height:24,color:c().ZP.blue}};function Ls(e){const{onError:t,bot:a}=e,n=(0,r().O7)(),o=(0,d().YB)(),s=a.id,[l,c]=i.useState(),u=i.useCallback((async()=>{const e=await x().callApi({eventName:"getBotToken",environment:n,data:{botId:s}});"success"===e.type?(jn().Cm(n,{table:mn().cZ}),c(e.data.token)):t((0,Pa().wf)(o,e)??"Error fetching bot token.")}),[n,s,t,o]),p=i.useCallback((async()=>{const e=await x().callApi({eventName:"revokeBotToken",environment:n,data:{botId:s}});return"success"===e.type?{success:!0}:(t((0,Pa().wf)(o,e)??"Error revoking bot token."),{success:!1})}),[n,s,t,o]);return(0,k.jsx)(Ts,{secret:l,secretName:(0,k.jsx)(d()._H,{id:"developerIntegrationForm.botToken.secretName",defaultMessage:"token"}),onCopy:()=>{jn().IV(n,{table:mn().cZ,from:"developer-integrations-view"})},actionButtons:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(ye().Z,{onClick:()=>{!function(e){const{onConfirm:t}=e;ws().Z.setState({isDestructive:!1,isWarning:!1,open:!0,onConfirm:t,title:(0,k.jsx)(d()._H,{id:"developerIntegrationForm.refreshBotToken.confirmationModal.title",defaultMessage:"Refresh token?"}),message:(0,k.jsx)(d()._H,{id:"developerIntegrationForm.refreshBotToken.confirmationModal.message",defaultMessage:"Refreshing will revoke the existing token and generate a new one. Make sure you’re storing the token securely."}),confirmationMessage:(0,k.jsx)(d()._H,{id:"developerIntegrationForm.refreshBotToken.confirmationModal.confirm",defaultMessage:"Continue"})})}({onConfirm:async()=>{(await p()).success&&await u()}})},style:Es.button,children:(0,k.jsx)(d()._H,{id:"developerIntegrationShotBotToken.refreshSecret.label",defaultMessage:"Refresh"})}),(0,k.jsx)(ye().Z,{onClick:()=>{u()},style:Es.button,children:(0,k.jsx)(d()._H,{id:"developerIntegrationShotBotToken.showSecret.label",defaultMessage:"Show"})})]})})}const Es={button:{display:"inline-flex",alignItems:"center",fontFamily:L().F5(Uo().locale).sans,borderRadius:6,padding:"0 6px",height:24,color:c().ZP.blue}};function Rs(e){const{onError:t,integration:a}=e,o=(0,r().O7)(),s=(0,d().YB)(),[l,c]=i.useState(),u=a.id,p=a.info.has_viewed_secret,g=(0,n().VK)((()=>b().default.state.currentUserStore),[]),m=g?(0,xt().Kv)(g,{id:u,table:fn().K2}):void 0,f=i.useCallback((async()=>{if(!m)return;const e=await x().callApi({eventName:"getIntegrationSecret",environment:o,data:{integrationId:u}});"success"===e.type?(Nn().bO({environment:o,integrationStore:m}),jn().Cm(o,{table:fn().K2}),c(e.data.secret)):t((0,Pa().wf)(s,e)??"Error fetching client secret.")}),[o,m,u,t,s]);return(0,k.jsx)(Ts,{secret:l,secretName:(0,k.jsx)(d()._H,{id:"developerIntegrationForm.integrationSecret.secretName",defaultMessage:"secret"}),onCopy:()=>{jn().IV(o,{table:fn().K2,from:"developer-integrations-view"})},actionButtons:(0,k.jsx)(Us,{onClick:()=>{!function(e){const{hasSecretBeenViewed:t,onConfirm:a}=e,i=t?(0,k.jsx)(d()._H,{id:"developerIntegrationForm.clientSecret.confirmationModal.refreshTitle",defaultMessage:"Refresh OAuth client secret?"}):(0,k.jsx)(d()._H,{id:"developerIntegrationForm.clientSecret.confirmationModal.showTitle",defaultMessage:"Show OAuth client secret?"}),r=t?(0,k.jsx)(d()._H,{id:"developerIntegrationForm.clientSecret.confirmationModal.alreadyViewedMessage",defaultMessage:"You’ve already viewed the client secret. Viewing again will revoke and generate a new one. Make sure you’re storing the secret securely."}):(0,k.jsx)(d()._H,{id:"developerIntegrationForm.clientSecret.confirmationModal.displayOnceMessage",defaultMessage:"This client secret will only be displayed once and cannot be viewed again. Make sure you’re storing the secret securely."});ws().Z.setState({isDestructive:!1,isWarning:!1,open:!0,onConfirm:a,title:i,message:r,confirmationMessage:(0,k.jsx)(d()._H,{id:"developerIntegrationForm.clientSecret.confirmationModal.confirm",defaultMessage:"Continue"})})}({hasSecretBeenViewed:p,onConfirm:()=>{f()}})},hasSecretBeenViewed:p})})}function Us(e){const{onClick:t,hasSecretBeenViewed:a}=e;return(0,k.jsx)(ye().Z,{onClick:t,style:Bs.button,children:a?(0,k.jsx)(d()._H,{id:"formSecretShow.refreshSecret.label",defaultMessage:"Refresh"}):(0,k.jsx)(d()._H,{id:"formSecretShow.showSecret.label",defaultMessage:"Show"})})}const Bs={button:{display:"inline-flex",alignItems:"center",fontFamily:L().F5(Uo().locale).sans,borderRadius:6,padding:"0 6px",height:24,color:c().ZP.blue}};var Hs=()=>a(972544),Fs=()=>a(825820);const Zs=(0,d().vU)({read_comment_title:{id:"developerIntegrationForm.capabilities.read_comment.title",defaultMessage:"Read comments"},read_comment_caption:{id:"developerIntegrationForm.capabilities.read_comment.caption",defaultMessage:"Read comments on blocks and pages."},insert_comment_title:{id:"developerIntegrationForm.capabilities.insert_comment.title",defaultMessage:"Insert comments"},insert_comment_caption:{id:"developerIntegrationForm.capabilities.insert_comment.caption",defaultMessage:"Create comments on blocks and pages."},comment_capabilities_title:{id:"developerIntegrationForm.capabilities.comment_capabilities.title",defaultMessage:"Comment Capabilities"},content_capabilities_title:{id:"developerIntegrationForm.capabilities.content_capabilities.headerTitle",defaultMessage:"Content Capabilities"},user_capabilities_title:{id:"developerIntegrationForm.capabilities.user_capabilities.headerTitle",defaultMessage:"User Capabilities"},read_content_title:{id:"developerIntegrationForm.capabilities.read_content.title",defaultMessage:"Read content"},read_content_caption:{id:"developerIntegrationForm.capabilities.read_content.caption",defaultMessage:"Request to read content."},update_content_title:{id:"developerIntegrationForm.capabilities.update_content.title",defaultMessage:"Update content"},update_content_caption:{id:"developerIntegrationForm.capabilities.update_content.caption",defaultMessage:"Request to update existing content."},insert_content_title:{id:"developerIntegrationForm.capabilities.insert_content.title",defaultMessage:"Insert content"},insert_content_caption:{id:"developerIntegrationForm.capabilities.insert_content.caption",defaultMessage:"Request to create new content."},no_user_capabilities_title:{id:"developerIntegrationForm.capabilities.no_user_capabilities.title",defaultMessage:"No user information"},no_user_capabilities_caption:{id:"developerIntegrationForm.capabilities.no_user_capabilities.caption",defaultMessage:"Do not request any user information access."},read_user_without_email_title:{id:"developerIntegrationForm.capabilities.read_user_without_email.title",defaultMessage:"Read user information without email addresses"},read_user_without_email_caption:{id:"developerIntegrationForm.capabilities.read_user_without_email.caption",defaultMessage:"Request access to user information, not including email addresses."},read_user_with_email_title:{id:"developerIntegrationForm.capabilities.read_user_with_email.title",defaultMessage:"Read user information including email addresses"},read_user_with_email_caption:{id:"developerIntegrationForm.capabilities.read_user_with_email.caption",defaultMessage:"Request access to user information, including email addresses."},workspace_capabilities_title:{id:"developerIntegrationForm.capabilities.workspace_capabilities.title",defaultMessage:"Workspace Capabilities"},workspace_content_transfer_title:{id:"developerIntegrationForm.capabilities.workspace_content_transfer.title",defaultMessage:"Transfer content"},workspace_content_transfer_caption:{id:"developerIntegrationForm.capabilities.workspace_content_transfer.caption",defaultMessage:"Transfer content between workspace users"}});function As(e,t,a){return{key:e,action:()=>null,render:r=>{const n=i=>{i.preventDefault(),a({...t,[e]:!t[e]})};return(0,i.createElement)(it().Z,{...r,title:z().Z.formatMessage(Zs[`${e}_title`]),caption:z().Z.formatMessage(Zs[`${e}_caption`]),icon:(0,k.jsx)(ao().Z,{checked:Boolean(t[e]),size:16,onClick:n}),key:e,onClick:n})}}}function Vs(){return(0,o().yK)((()=>({basicTextInput:{background:c().ZP.white,height:32,fontSize:15},domainInputTitle:{marginTop:15,fontSize:15,fontWeight:L().Ue.regular,color:c().ZP.frontTextMedium},plainButton:{display:"flex",alignItems:"center"},icon:{width:15,height:15}})),[])}function Ns(e){return(0,o().yK)((()=>({authInput:{color:c().ZP.frontTextMedium,fontFamily:L().F5(Uo().locale).mono},authInputRight:{width:30,marginLeft:-30,height:24,backgroundImage:"linear-gradient(to left, #f7f7f3 20%, rgba(255, 255, 255, 0) 100%)",zIndex:1},authButton:{display:"inline-flex",alignItems:"center",borderRadius:4,padding:"0 6px",height:24,color:e?c().ZP.frontTextMedium:c().ZP.blue,fontFamily:L().F5(Uo().locale).sans}})),[e])}function zs(e){const{formData:t,setFormData:a,formStoreState:i,formFieldDetail:r,field:s,disabled:l}=e,d=(0,n().VK)((()=>b().default.state.currentUserRootStore),[]),c=(0,n().VK)((()=>d?d.getAdminSpaceStores():[]),[d]),{type:u}=i,{label:p,subtitle:g,caption:m,sectionHeader:f,sectionSubheader:h}=r[s]??{},y=(0,o().yK)((()=>({header:{marginBottom:24,marginTop:64},sectionHeader:{fontSize:24,fontWeight:L().Ue.semibold},sectionSubheader:{fontSize:15},disabled:{pointerEvents:"none",opacity:.7}})),[]),v=Os[s];return v?(0,k.jsxs)(k.Fragment,{children:[f&&(0,k.jsxs)("div",{style:y.header,children:[(0,k.jsx)("div",{style:y.sectionHeader,children:f}),(0,k.jsx)("div",{style:y.sectionSubheader,children:h})]}),(0,k.jsx)("div",{style:l?y.disabled:void 0,children:(0,k.jsx)(ys,{label:p,subtitle:g,caption:m,error:t[s].error,field:s,formStateType:u,formFieldValidationSchema:re,isNewIntegrationUiEnabled:!0,children:(0,k.jsx)(v,{autoFocus:!1,spaces:c,currentValue:t[s].value,setErrorValue:e=>{a({field:s,error:e})},setNewValue:e=>{a({value:e,field:s})},formStoreState:i})},s)})]}):null}const Os={type:function(e){const{currentValue:t="create-bot",setNewValue:a}=e,i=e=>"create-bot"===e||"create-guest-integration"===e||"update-bot"===e,r=(0,o().yK)((()=>({caption:{fontSize:12,color:c().ZP.frontTextLight}})),[]);if(!i(t))return(0,k.jsx)(fs,{keyName:"type",value:{id:t,title:"Public"},setValue:e=>{i(e.id)&&a(e.id)},items:qs,renderMenuItem:e=>{var t;return(0,k.jsx)(it().Z,{...e,title:null==e||null===(t=e.item)||void 0===t?void 0:t.title,disabled:!0})}});const n=t.includes("bot")?"create-bot":"create-guest-integration";return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(fs,{keyName:"type",value:{id:n,title:Ks[n]},setValue:e=>{i(e.id)&&a(e.id)},items:qs,renderMenuItem:e=>{var t;return(0,k.jsx)(it().Z,{...e,title:null==e||null===(t=e.item)||void 0===t?void 0:t.title})}}),(0,k.jsx)("div",{style:r.caption,children:(0,k.jsx)(d()._H,{id:"creatorProfile.integrationSubmission.typeCaption",defaultMessage:"You can change the type of your integration at any time. Please note that switching to a public integration may require additional fields."})})]})},space:function(e){const{spaces:t,currentValue:a,setNewValue:r,setErrorValue:n,disabled:o}=e,[s,l]=i.useState(!1);return(0,i.useEffect)((()=>{s||0!==t.length||(l(!0),n((0,k.jsx)(d()._H,{id:"developerIntegrationsForm.spacePicker.missingSpacesError",defaultMessage:"You are not an owner of any workspaces. Please <linktonotion>create a new one</linktonotion> or ask your workspace owner to update your access.",values:{linktonotion:e=>(0,k.jsx)(aa().Z,{href:(0,ra().UY)("guides.joinOrCreateWorkspace"),children:e})}}))),s&&t.length>0&&(l(!1),n(void 0))}),[t,n,s]),(0,k.jsx)(fs,{keyName:"space",items:t,value:a,setValue:r,renderMenuItem:e=>(0,k.jsx)(Is,{...e,spaceStore:e.item,disabled:o})})},icon:function(e){const{currentValue:t,setNewValue:a,setErrorValue:i,formStoreState:r}=e,n=r.type;return(0,k.jsx)(ds,{value:t,setError:i,setValue:a,showRemove:n.includes("bot")})},name:null,token:function(e){const t=(0,r().O7)(),{currentValue:a,setErrorValue:i}=e,o=(0,n().VK)((()=>b().default.state.currentUserStore),[]),s=(0,n().VK)((()=>{if(!o||!a)return;if(a.value.parent_table!==Sn().bx)return;const e=xt().H2.createChildStore(o,{id:a.value.parent_id,table:a.value.parent_table});return(0,kn().rn)(t,e)}),[o,a,t]);return a?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Ls,{bot:a.value,onError:i}),s&&(0,k.jsx)("div",{style:{fontSize:12,color:c().ZP.frontTextLight},children:(0,k.jsx)(d()._H,{id:"developerIntegrationForm.botToken.subtitle",defaultMessage:"Only works with the <bold>{spaceName}</bold> workspace. To change workspace, <developertermslink>create another integration</developertermslink>.",values:{spaceName:s,bold:e=>(0,k.jsx)("b",{children:e}),developertermslink:e=>(0,k.jsx)(aa().Z,{href:Dn()._j.creatorProfileIntegrations,children:e})}})})]}):null},client_id:function(e){const{currentValue:t}=e,a=(0,r().O7)(),[n,o]=i.useState(!1),s=Ns(n);if(!t)return null;const l=n?(0,k.jsx)(d()._H,{defaultMessage:"ID copied",id:"developerIntegrationsForm.clientIdCopied.tooltip"}):(0,k.jsx)(d()._H,{defaultMessage:"Copy client ID",id:"developerIntegrationsForm.copyClientId.tooltip"});return(0,k.jsx)(or().Z,{type:"text",disabled:!0,style:s.authInput,value:t.value.id,right:(0,k.jsxs)("div",{style:{display:"flex"},children:[(0,k.jsx)("div",{style:s.authInputRight}),(0,k.jsx)(gr().Z,{placement:ts().Placement.Top,renderTooltip:()=>l,render:e=>(0,k.jsx)(ye().Z,{onClick:async e=>{e.preventDefault(),o(!0),setTimeout((()=>{o(!1)}),1500);const i=await xs().F.clipboardActions.load();i.copyString({environment:a,stringValue:t.value.id,copiedMessage:i.clipboardMessages.copiedLinkToClipboard})},...e,style:s.authButton,children:n?(0,k.jsx)(d()._H,{id:"developerIntegrationsForm.copiedId.label",defaultMessage:"Copied"}):(0,k.jsx)(d()._H,{id:"developerIntegrationsForm.copyId.label",defaultMessage:"Copy"})})})]})})},client_secret:function(e){const{currentValue:t,setErrorValue:a}=e;return t&&"internal"!==t.value.type?(0,k.jsx)(Rs,{integration:t.value,onError:a}):null},authorization_url:function(e){const{currentValue:t}=e,a=(0,r().O7)(),[n,o]=i.useState(!1),s=Ns(n);if(!t)return null;const l=n?(0,k.jsx)(d()._H,{defaultMessage:"URL copied",id:"developerIntegrationsForm.authUrlCopied.tooltip"}):(0,k.jsx)(d()._H,{defaultMessage:"Copy authorization URL",id:"developerIntegrationsForm.authUrlCopy.tooltip"});return(0,k.jsx)(or().Z,{type:"text",disabled:!0,style:s.authInput,value:t,right:(0,k.jsxs)("div",{style:{display:"flex"},children:[(0,k.jsx)("div",{style:s.authInputRight}),(0,k.jsx)(gr().Z,{placement:ts().Placement.Top,renderTooltip:()=>l,render:e=>(0,k.jsx)(ye().Z,{onClick:async e=>{e.preventDefault(),o(!0),setTimeout((()=>{o(!1)}),1500);const i=await xs().F.clipboardActions.load();i.copyString({environment:a,stringValue:t,copiedMessage:i.clipboardMessages.copiedLinkToClipboard})},...e,style:s.authButton,children:n?(0,k.jsx)(d()._H,{id:"developerIntegrationsForm.copiedAuthUrl.label",defaultMessage:"Copied"}):(0,k.jsx)(d()._H,{id:"developerIntegrationsForm.copyAuthUrl.label",defaultMessage:"Copy"})})})]})})},capabilities:function(e){const{setNewValue:t,currentValue:r,formStoreState:o}=e,s={...N().fP,...r},l=(0,n().VK)((()=>b().default.state.currentUserStore),[]),d=o.startingRecord,c=(0,n().VK)((()=>{if(!l||!d||d.table!==mn().cZ)return!1;const e=d.value;if(e.parent_table!==Sn().bx||"guest"!==e.type)return!1;const t=xt().H2.createChildStore(l,{id:e.parent_id,table:e.parent_table});return t&&(0,a(122792).wP)(t.getSubscriptionTier())}),[d,l]),u={no_user_capabilities:!1===s.read_user_without_email&&!1===s.read_user_with_email,read_user_without_email:!0===s.read_user_without_email&&!1===s.read_user_with_email,read_user_with_email:!0===s.read_user_with_email};return(0,k.jsx)(Ja().Z,{type:Ja().i.Vertical,initialFocus:void 0,sections:kt().oA([{key:"content_capabilities",items:["read_content","update_content","insert_content"].map((e=>As(e,s,t))),render:e=>(0,k.jsx)(Qa().Z,{...e,title:z().Z.formatMessage(Zs.content_capabilities_title)})},{key:"comment_capabilities",items:["read_comment","insert_comment"].map((e=>As(e,s,t))),render:e=>(0,k.jsx)(Qa().Z,{...e,title:z().Z.formatMessage(Zs.comment_capabilities_title)})},c&&{key:"workspace_capabilities",items:["workspace_content_transfer"].map((e=>As(e,s,t))),render:e=>(0,k.jsx)(Qa().Z,{...e,title:z().Z.formatMessage(Zs.workspace_capabilities_title)})},{key:"user_capabilities",items:["no_user_capabilities","read_user_without_email","read_user_with_email"].map((e=>function(e,t,a,r){return{key:e,action:()=>null,render:n=>(0,i.createElement)(it().Z,{...n,title:z().Z.formatMessage(Zs[`${e}_title`]),caption:z().Z.formatMessage(Zs[`${e}_caption`]),icon:(0,k.jsx)(Hs().Z,{isSelected:t}),key:e,onClick:t=>{t.preventDefault(),r({...a,read_user_without_email:"no_user_capabilities"!==e,read_user_with_email:"read_user_with_email"===e})}})}}(e,u[e],s,t))),render:e=>(0,k.jsx)(Qa().Z,{...e,title:z().Z.formatMessage(Zs.user_capabilities_title)})}])})},template_url:Ws,redirect_uris:function(e){return(0,k.jsx)(Ss,{...e,style:{color:c().ZP.frontTextMedium},typeaheadTitle:(0,k.jsx)(d()._H,{id:"developerIntegrationsForm.redirectUri.typePrompt",defaultMessage:"Type a redirect uri…"})})},tagline:Ws,privacy_policy_url:Ws,terms_of_use_url:Ws,email:Ws,developer_name:Ws,website_url:Ws,unfurl_url:Ws,domain:function(e){const{currentValue:t,autoFocus:i,setNewValue:n,formStoreState:o,setErrorValue:s}=e,l=(0,r().O7)(),c=(0,d().YB)(),u=Vs();if("update-third-party-external-integration"!==o.type&&"update-first-party-external-integration"!==o.type)return null;const{developmentDomain:p,verifiedDomains:g,domainVerifications:m}=t||{developmentDomain:"",verifiedDomains:[],domainVerifications:[]},f=g.map((e=>({domain:e,status:Fs().YF.Success,data:{type:"verified",domain:e}}))),h=Date.now(),b=m.filter(vs().AS).sort(((e,t)=>e.createdAt-t.createdAt)).map((e=>({domain:e.domain,status:h>e.expiresAt?Fs().YF.Failure:Fs().YF.Pending,data:{...e,type:h>e.expiresAt?"invalid":"unverified"}}))),y=o.startingRecord.value.id;async function v(){const e=await x().callApi({eventName:"getIntegrationDomainVerifications",environment:l,data:{integrationId:y}});if("success"===e.type){const t=fa().RecordMapWithRole.create(e.data.recordMap),i=a(160916).mF.fromRecordMapWithRole(t),r=e.data.verificationIds.map((e=>i({table:wn().Jd,id:e}))).filter(V().$K).map(vs().Hs).filter((e=>"verified"!==e.type));n({developmentDomain:p,verifiedDomains:g,domainVerifications:r})}}return"update-third-party-external-integration"===o.type?(0,k.jsx)(a(279431).ZP,{domains:[...f,...b],domainVerificationStore:o.domainVerificationStore,verificationType:"integration",verificationTargetId:y,refreshDomains:v,onRemoveDomain:async function(e){if("verified"!==e.type){const t=await x().callApi({eventName:"deleteDomainVerificationCode",environment:l,data:{id:e.id}});"failed"===t.type&&s(t.error.message),await v()}else Nn().QO({environment:l,integrationId:y,allVerifiedDomains:g,domainToRemove:e.domain})}}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{style:u.domainInputTitle,children:(0,k.jsx)(d()._H,{id:"developerIntegrationForm.domain.developmentDomain.label",defaultMessage:"Development domain"})}),(0,k.jsx)(or().Z,{autoFocus:i,style:u.basicTextInput,value:p,onChange:e=>n({verifiedDomains:g,domainVerifications:m,developmentDomain:e.target.value})}),(0,k.jsx)("div",{style:u.domainInputTitle,children:(0,k.jsx)(d()._H,{id:"developerIntegrationForm.domain.verifiedDomains.label",defaultMessage:"Verified domain(s)"})}),(0,k.jsx)(Cs().Z,{placeholder:c.formatMessage({id:"domainVerificationInput.domainInput.placeholder",defaultMessage:"No domains configured"}),value:"",onChange:kt().ZT,onRemoveLastToken:kt().ZT,readOnly:!0,tokens:f.map((e=>{let{domain:t,status:a}=e;return(0,k.jsx)(Fs().ZP,{status:a,showRemoveButton:!1,isSingle:!1,format:Xo().lo.Medium,value:t},t)}))})]})},url_matching_and_placeholder:function(e){const{currentValue:t,setNewValue:i,setErrorValue:r}=e,n=Vs();return(0,k.jsxs)(k.Fragment,{children:[null==t?void 0:t.map(((e,a)=>(0,k.jsx)(js,{currentRule:e,shouldShowDelete:0!==a,onUpdate:e=>{i([...t.slice(0,a),e,...t.slice(a+1)])},onDelete:()=>{0!==a&&i([...t.slice(0,a),...t.slice(a+1)])},onError:r},`regex-rule-${a}`))),(0,k.jsxs)(j().Z,{style:n.plainButton,isBlue:!0,onClick:e=>{e.preventDefault(),i([...t??[],a(859193).VH])},children:[(0,eo().R)(n.icon),(0,k.jsx)(d()._H,{id:"developerIntegrationsForm.regexPatternRulesInput.addMore.label",defaultMessage:"Add another rule"})]})]})},external_oauth_authorize_url:Ws,external_oauth_token_url:Ws,external_client_id:Ws,external_client_secret:function(e){const{autoFocus:t,currentValue:a,setNewValue:i}=e,r=Gs();return(0,k.jsx)(or().Z,{type:"password",autoFocus:t,style:r.basicTextInput,value:a,onChange:e=>i(e.target.value)})},external_oauth_scopes:Ws,external_deletion_url:Ws},Ks={"create-bot":z().Z.formatMessage(O.internalIntegrationLabel),"create-guest-integration":z().Z.formatMessage(O.publicIntegrationLabel)},qs=[{id:"create-bot",title:"Internal"},{id:"create-guest-integration",title:"Public"}];function Ws(e){const{autoFocus:t,currentValue:a,setNewValue:i}=e,r=Gs();return(0,k.jsx)(or().Z,{autoFocus:t,style:r.basicTextInput,value:a,onChange:e=>i(e.target.value)})}function Gs(){return(0,o().yK)((e=>({basicTextInput:{background:e.white,height:32,fontSize:15}})),[])}var $s=()=>a(471645);function Ys(e){const{label:t,subtitle:a,onClick:i,isDisabled:r,isActive:n,labelStyles:s={},subtitleStyles:l={}}=e,d=(0,o().yK)((e=>({label:{fontSize:15,color:e.lightTextColor,display:"flex",justifyContent:"space-between"},subtitle:{fontSize:15,color:e.lightTextColor,paddingTop:15}})),[]);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{style:{...d.label,...s},children:[t,(0,k.jsx)($s().Z,{onClick:i,on:n,disabled:r})]}),(0,k.jsx)("div",{style:{...d.subtitle,...l},children:a})]})}function Xs(e){const{integrationFormStore:t,formData:a,setFormData:r,formFieldDetail:s,disabled:l}=e,c=(0,n().VK)((()=>t.getState().type),[t]),u=(0,n().VK)((()=>{var e;return null===(e=t.getState().startingRecord)||void 0===e?void 0:e.value.id}),[t]),p=ee.includes(c)||l,g=te.includes(c),[m,f]=(0,i.useState)(g),h=(b=u,{key:"unfurling",title:z().Z.formatMessage(O.unfurlingSectionTitle),subtitle:(0,k.jsx)(d()._H,{id:"developerIntegrationForm.sectionCaption.unfurling",defaultMessage:"Visit the <previewlab>Link Preview Lab</previewlab> to plan out unfurling previews and responses.",values:{previewlab:e=>{if(!b)return"";const t=Nn().Pk({table:fn().K2,id:b});return(0,k.jsx)(aa().Z,{external:!1,href:t,children:e})}}}),fields:Q});var b;const y="create-third-party-external-integration"===c?[Qs]:[Qs,h],v=(0,n().VK)((()=>t.getState()),[t]),x=y.map((e=>({...e,fields:e.fields.filter((e=>{const{supportedBy:t}=re[e];return t[c]}))}))),_=(0,o().yK)((()=>({sectionHeader:{fontSize:24,fontWeight:L().Ue.semibold,marginBottom:24},switcherSubtitle:{paddingTop:8,fontSize:12},switcher:{justifyContent:"flex-end",alignItems:"center",flexDirection:"row-reverse",gap:8}})),[]);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{style:_.sectionHeader,children:(0,k.jsx)(d()._H,{defaultMessage:"Link Preview",id:"creatorProfile.manageIntegration.linkPreview.title"})}),(0,k.jsx)(Ys,{onClick:()=>{const e=m?"public":"unfurling";f(!m),t.updateRecordTypeOnSwitch(e),r({field:"icon",error:void 0})},label:z().Z.formatMessage(O.unfurlingSwitcherLabel),subtitle:(0,k.jsx)(d()._H,{id:"creatorProfile.manageIntegration.linkPreview.switcher.subtitle",defaultMessage:"Unfurl external data inside Notion. Requires additional fields to configure the matching URL pattern and interface."}),isActive:m,isDisabled:p,labelStyles:_.switcher,subtitleStyles:_.switcherSubtitle}),m&&(0,k.jsx)(k.Fragment,{children:x.map((e=>(0,k.jsx)(i.Fragment,{children:e.fields.map((e=>(0,k.jsx)(zs,{formData:a,setFormData:r,formStoreState:v,formFieldDetail:Js("unfurl_url",h.subtitle,s),field:e,disabled:l},e)))},e.key)))})]})}function Js(e,t,a){return{...a,[e]:{...null==a?void 0:a[e],sectionSubheader:t}}}const Qs={key:"external_oauth",title:z().Z.formatMessage(O.externalOauthSectionTitle),fields:J};const el=[{tabName:"configuration",tabTitle:(0,k.jsx)(d()._H,{id:"creatorProfile.integrationManagement.tabs.configuration",defaultMessage:"Configuration"},"creatorProfile.integrationManagement.tabs.configuration")},{tabName:"basicInformation",tabTitle:(0,k.jsx)(d()._H,{id:"creatorProfile.integrationManagement.tabs.basicInformation",defaultMessage:"Basic information"},"creatorProfile.integrationManagement.tabs.basicInformation")}],tl={tabName:"listing",tabTitle:(0,k.jsx)(d()._H,{id:"creatorProfile.integrationManagement.tabs.listing",defaultMessage:"Listing information"},"creatorProfile.integrationManagement.tabs.listing")},al={tabName:"webhooks",tabTitle:(0,k.jsx)(d()._H,{id:"creatorProfile.integrationManagement.tabs.webhooks",defaultMessage:"Webhooks"},"creatorProfile.integrationManagement.tabs.webhooks")};function il(e){const{tabIndex:t,setTabIndex:a,tabs:i}=e,r=Math.floor(100/i.length);return(0,k.jsx)(De().Z,{tabs:i.map((e=>{let{tabTitle:t}=e;return t})),selectedIndex:t,hideTabBorder:!0,onChange:e=>a(e),style:{backgroundColor:"rgba(247,247,247,1)",borderRadius:"4px",padding:0},tabBorderStyle:{display:"none"},tabStyle:{display:"flex",width:`calc(${r}% - 4px)`,margin:"3px",borderRadius:"4px",opacity:.5,padding:0,fontWeight:L().Ue.semibold},selectedTabStyle:{backgroundColor:c().ZP.white,opacity:1},tabTitleStyle:{display:"flex",width:"100%",justifyContent:"center"}})}const rl=function(){return(0,k.jsx)(d()._H,{id:"developerIntegrationForm.domainVerification.caption",defaultMessage:"Development and verified domains for URLs to unfurl with this integration. Domains must be verified before publishing to users. See the <textlink>Notion documentation</textlink> for more verification process.",values:{textlink:e=>(0,k.jsx)(aa().Z,{href:"https://developers.notion.com/docs/building-a-link-preview#domain-verification",external:!0,children:e})}})};function nl(e){switch(e){case"create-bot":return{formFields:["name","space","type","icon"],fieldDetails:{type:{label:z().Z.formatMessage(O.integrationTypeLabel)},space:{label:z().Z.formatMessage(O.spaceLabel),subtitle:z().Z.formatMessage(O.spaceSubtitle)},icon:{label:z().Z.formatMessage(O.integrationLogoLabel)}}};case"create-guest-integration":return{formFields:["name","space",...sl.formFields,"icon","redirect_uris","template_url"],fieldDetails:{space:{label:z().Z.formatMessage(O.spaceLabel),subtitle:z().Z.formatMessage(O.spaceSubtitle)},icon:{label:z().Z.formatMessage(O.integrationLogoLabel)},...sl.fieldDetails}};default:return{formFields:[],fieldDetails:{}}}}const ol={unfurl_url:{sectionHeader:z().Z.formatMessage(O.unfurlUrlSectionHeader),label:z().Z.formatMessage(O.unfurlUrlLabel),caption:z().Z.formatMessage(O.unfurlUrlCaption)},domain:{label:z().Z.formatMessage(O.domainLabel),caption:(0,k.jsx)(rl,{})},url_matching_and_placeholder:{label:z().Z.formatMessage(O.urlMatchingAndPlaceholderLabel),caption:z().Z.formatMessage(O.urlMatchingAndPlaceholderCaption)},external_oauth_authorize_url:{label:z().Z.formatMessage(O.externalOauthAuthorizeUrlLabel),caption:z().Z.formatMessage(O.externalOauthAuthorizeUrlCaption),sectionHeader:z().Z.formatMessage(O.externalOauthSectionTitle),sectionSubheader:(0,k.jsx)(d()._H,{id:"creatorProfile.manageIntegration.linkPreview.sectionSubtitle.external_oauth",defaultMessage:"See <textlink>Notion documentation</textlink> for information on <authlink>OAuth 2.0.</authlink>",values:{textlink:e=>(0,k.jsx)(aa().Z,{href:"https://developers.notion.com/docs/build-a-link-preview-integration",external:!0,children:e}),authlink:e=>(0,k.jsx)(aa().Z,{href:"https://datatracker.ietf.org/doc/html/rfc6749",external:!0,children:e})}})},external_oauth_token_url:{label:z().Z.formatMessage(O.externalOauthTokenUrlLabel),caption:z().Z.formatMessage(O.externalOauthTokenUrlCaption)},external_oauth_scopes:{label:z().Z.formatMessage(O.externalOauthScopesLabel),caption:z().Z.formatMessage(O.externalOauthScopesCaption)},external_client_id:{label:z().Z.formatMessage(O.externalClientIdLabel)},external_client_secret:{label:z().Z.formatMessage(O.externalClientSecretLabel)},external_deletion_url:{label:z().Z.formatMessage(O.externalDeletionUrlLabel),caption:z().Z.formatMessage(O.externalDeletionUrlCaption)}},sl={formFields:["name","type","developer_name","website_url","tagline","privacy_policy_url","terms_of_use_url","email"],fieldDetails:{type:{label:z().Z.formatMessage(O.integrationTypeLabel)},developer_name:{label:z().Z.formatMessage(O.developerNameLabel)},website_url:{label:z().Z.formatMessage(O.websiteUrlTypeLabel)},privacy_policy_url:{label:z().Z.formatMessage(O.privacyPolicyTypeLabel),subtitle:z().Z.formatMessage(O.privacyPolicyTypeSubtitle)},terms_of_use_url:{label:z().Z.formatMessage(O.termsOfUseTypeLabel),subtitle:z().Z.formatMessage(O.termsOfUseTypeSubtitle)},tagline:{label:z().Z.formatMessage(O.taglineTypeLabel)},email:{label:z().Z.formatMessage(O.emailLabel),subtitle:z().Z.formatMessage(O.emailSubtitle)},redirect_uris:{label:z().Z.formatMessage(O.redirectUrisTypeLabel),subtitle:z().Z.formatMessage(O.redirectUrisTypeSubtitle),sectionHeader:z().Z.formatMessage(O.oauthSectionHeader)},template_url:{label:z().Z.formatMessage(O.templateUrlTypeLabel),subtitle:z().Z.formatMessage(O.templateUrlTypeSubtitle)}}},ll={formFields:["publish"],fieldDetails:{}};const dl=function(e){const{formData:t,setFormData:a,disabled:i}=e,r=(0,d().YB)(),n=function(){const{isMobileWidth:e}=(0,m().EQ)();return(0,o().yK)((()=>({titleInput:{fontSize:e?30:36,lineHeight:e?"34px":"40px",fontWeight:L().Ue.semibold},errorMessage:{fontSize:15},label:{fontSize:13.5,fontWeight:L().Ue.regular,color:c().ZP.black}})),[e])}();return(0,k.jsx)(ar().w,{labelStyle:n.label,htmlLabel:"integrationName",label:(0,k.jsx)(d()._H,{defaultMessage:"Integration Name",id:"creatorProfile.integrationSubmission.integrationName"}),disabled:i,errorMessageStyle:n.errorMessage,shouldHideLabel:Boolean(i),error:t.name.error,placeholder:r.formatMessage({defaultMessage:"Add integration name",id:"creatorProfile.integrationSubmission.namePlaceholder"}),inputStyle:n.titleInput,value:t.name.value,onChange:e=>{a({value:e.target.value,field:"name"})},type:"text",focusInitial:!1,onFocus:()=>{a({field:"name",error:""})}})};function cl(e){var t;const a=(0,o().yK)((()=>({errorMessage:{fontSize:15},label:{height:1},icon:{marginBottom:24}})),[]),s=(0,d().YB)(),{integrationFormStore:l,setIsConvertingToPublic:c,botOrIntegrationPointer:u}=e,[p,g]=i.useState(0),[m,f]=i.useState(!1),h=(0,r().O7)(),y=(0,n().VK)((()=>Tn.getState()),[]),v=(0,n().VK)((()=>l.getState()),[l]),x=(0,n().VK)((()=>b().default.state.currentUserRootStore),[]),w=(0,n().VK)((()=>{var e;return null===(e=b().default.state.currentUserStore)||void 0===e||null===(e=e.getModel())||void 0===e?void 0:e.email}),[]),S=(0,n().VK)((()=>{if(u&&x){return!!x.getRecordModel({table:Rn().uV,id:(0,gn().Xv)({integrationId:u.id,locale:"en-US"})})}return!1}),[u,x]),j=v.type,M=y.listing_status,I=function(e){const{botOrIntegrationPointer:t}=e,a=(0,zn().E)("self_serve_integration_webhooks"),i=(0,n().VK)((()=>b().default.state.currentUserRootStore),[]),r=On({botOrIntegrationPointer:t}),o=(0,n().VK)((()=>{if(!a)return!1;if(!i||!r)return!1;const e=i.getRecordModel(r);return"internal"===(null==e?void 0:e.type)}),[r,i,a]),s=(0,n().VK)((()=>{if(!a)return!1;if(!i||t.table!==mn().cZ)return!1;const e=i.getRecordModel(t);if(!e)return!1;const r=i.getRecordModel({id:e.getSpaceId(),table:Sn().bx});return(0,V().$K)(r)&&"enterprise"===r.getSubscriptionTier()}),[t,i,a]);return a&&o&&s}({botOrIntegrationPointer:u}),T=(0,i.useMemo)((()=>[...el,...M?[tl]:[],...I?[al]:[]]),[M,I]),P="pending"===y.listing_status||"configuration"===T[p].tabName&&S,[D,L]=i.useReducer(N().x6,N().yb),E=Kn(),R=(0,n().VK)((()=>{if(u&&x){const e=x.getRecordModel({table:Rn().uV,id:(0,gn().Xv)({integrationId:u.id,locale:"en-US"})});return null==e?void 0:e.getContentfulId()}}),[u,x]),U=(0,n().VK)((()=>{if(u&&x&&u.table===fn().K2){const e=x.getRecordModel(u);return{name:null==e?void 0:e.getName(),id:null==e?void 0:e.id,icon:null==e?void 0:e.getInfo().icon,listing_status:null==e?void 0:e.getListingStatus(),created_by_id:null==e?void 0:e.getCreatedById(),capabilities:null==e?void 0:e.getCapabilities()}}}),[u,x]),B=e=>{Tn.setErrors(e)},H=async()=>{if(f(!0),"listing"===T[p].tabName)await qo({integrationFields:U,environment:h,errors:y.errors,setErrors:B,values:{...y,name:D.name.value,icon:D.icon.value},userId:null==x?void 0:x.userId,integrationListingContentfulId:R,actorEmail:w}),f(!1);else{const t=F.filter((e=>"link_preview"!==e));"configuration"===T[p].tabName&&(ae.includes(j)&&t.push(...J),ie.includes(j)||t.push(...Q));const a=await E(D);if(Y({formData:D,formStateType:j,setFormData:L,formFields:t,templateStore:a,actorEmail:w}))return void f(!1);try{if(!Nn().JJ({environment:h,formState:v,formData:(0,N().Xr)(D)}))throw new Error("Record pointer is undefined");C().oV({label:s.formatMessage({id:"creatorProfile.integrationUpdate.successMessage",defaultMessage:"Integration updated successfully"})})}catch(e){_().UW(s.formatMessage({id:"creatorProfile.integrationUpdate.errorMessages.submitError",defaultMessage:"There was an error updating the integration"})),An().log({level:"error",from:"CreatorProfileIntegrationUpdate",type:"updateError",error:(0,Vn().Ui)(e)})}finally{f(!1)}}},{formFields:F,fieldDetails:Z}=null===(t=function(e){switch(e){case"update-bot":return{configuration:{formFields:["name","token","capabilities"],fieldDetails:{token:{label:z().Z.formatMessage(O.tokenTypeLabel)},capabilities:{label:"",sectionHeader:z().Z.formatMessage(O.capabilitiesTypeHeader),sectionSubheader:(0,k.jsx)(d()._H,{id:"developerIntegrationForm.capabilities.caption",defaultMessage:"These requested capabilities will be displayed to users when they authorize your integration. See <inlinetextlink>developer docs</inlinetextlink> for more help.",values:{inlinetextlink:e=>(0,k.jsx)(aa().Z,{href:"https://developers.notion.com/docs/authorization",children:e})}})}}},basicInformation:{formFields:["name","type"],fieldDetails:{type:{label:z().Z.formatMessage(O.integrationTypeLabel)},space:{label:z().Z.formatMessage(O.spaceLabel),subtitle:z().Z.formatMessage(O.spaceSubtitle)}}},listing:{formFields:[],fieldDetails:{}},webhooks:{formFields:[],fieldDetails:{}}};case"update-compliance-integration":return{configuration:{formFields:["name","client_id","client_secret","authorization_url","icon","external_oauth_authorize_url","external_oauth_token_url","external_client_id","external_client_secret","external_oauth_scopes","external_deletion_url"],fieldDetails:{token:{label:z().Z.formatMessage(O.tokenTypeLabel)},capabilities:{label:"",sectionHeader:z().Z.formatMessage(O.capabilitiesTypeHeader),sectionSubheader:(0,k.jsx)(d()._H,{id:"developerIntegrationForm.capabilities.caption",defaultMessage:"These requested capabilities will be displayed to users when they authorize your integration. See <inlinetextlink>developer docs</inlinetextlink> for more help.",values:{inlinetextlink:e=>(0,k.jsx)(aa().Z,{href:"https://developers.notion.com/docs/authorization",children:e})}})},client_id:{label:z().Z.formatMessage(O.externalClientIdLabel)},client_secret:{label:z().Z.formatMessage(O.externalClientSecretLabel)},icon:{label:z().Z.formatMessage(O.integrationLogoLabel)},authorization_url:{label:z().Z.formatMessage(O.authorizationUrlLabel)},...ol}},basicInformation:{formFields:[...sl.formFields,"redirect_uris","template_url"],fieldDetails:sl.fieldDetails},listing:ll,webhooks:{formFields:[],fieldDetails:{}}};default:return{configuration:{formFields:["name","client_id","client_secret","authorization_url","capabilities","link_preview"],fieldDetails:{token:{label:z().Z.formatMessage(O.tokenTypeLabel)},capabilities:{label:"",sectionHeader:z().Z.formatMessage(O.capabilitiesTypeHeader),sectionSubheader:(0,k.jsx)(d()._H,{id:"developerIntegrationForm.capabilities.caption",defaultMessage:"These requested capabilities will be displayed to users when they authorize your integration. See <inlinetextlink>developer docs</inlinetextlink> for more help.",values:{inlinetextlink:e=>(0,k.jsx)(aa().Z,{href:"https://developers.notion.com/docs/authorization",children:e})}})},client_id:{label:z().Z.formatMessage(O.externalClientIdLabel)},client_secret:{label:z().Z.formatMessage(O.externalClientSecretLabel)},authorization_url:{label:z().Z.formatMessage(O.authorizationUrlLabel)},...ol}},basicInformation:{formFields:[...sl.formFields,"redirect_uris","template_url"],fieldDetails:sl.fieldDetails},listing:ll,webhooks:{formFields:[],fieldDetails:{}}}}}(j))||void 0===t?void 0:t[T[p].tabName],[A,K]=(0,i.useState)({});(0,i.useEffect)((()=>{if(!x)return;(async()=>{const e=await(0,N().hl)({formStoreState:l.getState(),userRootStore:x,environment:h,initialUrlMatchingAndPlaceholder:[]});K(e);for(const t of(0,V().Yd)(e))L({field:t,value:e[t]})})()}),[x,h,l]),(0,i.useEffect)((()=>{L({field:"type",value:j})}),[j]);const q=(0,V().Yd)(D).some((e=>"type"!==e&&!(0,kt().Xy)(D[e].value,A[e])));(0,i.useEffect)((()=>{"create-guest-integration"===D.type.value&&he().Z.setState({isOpen:!0,type:"IntegrationInternalToPublicConfirmation",onAccept:()=>{l.updateRecordTypeOnSwitch("public"),c(!0)},onDismiss:()=>{l.updateRecordTypeOnSwitch("internal"),c(!1),L({field:"type",value:"update-bot"})}})}),[h,D.type.value,l,c]);const W="pending"===y.listing_status||"webhooks"===T[p].tabName;return(0,k.jsxs)("form",{onSubmit:H,children:[(0,k.jsx)("div",{style:a.icon,children:(0,k.jsx)(zs,{field:"icon",setFormData:L,formData:D,formStoreState:v,formFieldDetail:{...Z,icon:{...Z.icon,label:z().Z.formatMessage(O.integrationLogoLabel)}},disabled:W})}),(0,k.jsx)(dl,{disabled:W,formData:D,setFormData:L}),(0,k.jsx)(Ce().Z,{size:32}),(0,k.jsx)(il,{tabIndex:p,setTabIndex:g,tabs:T}),(0,k.jsx)(Ce().Z,{size:32}),"webhooks"===T[p].tabName?(0,k.jsx)(Ko,{botOrIntegrationPointer:u}):F.map((e=>function(e){const{field:t,integrationFormStore:a,formData:i,setFormData:r,fieldDetails:n,formStoreState:o,disabled:s,integrationPointer:l,listingValues:d,listingErrors:c}=e;if("link_preview"===t)return(0,k.jsx)(Xs,{integrationFormStore:a,formData:i,setFormData:r,formFieldDetail:n,disabled:s},t);if("publish"===t){const e=e=>{Tn.setValues(e)},t=e=>{Tn.setErrors(e)};return(null==l?void 0:l.table)===fn().K2?(0,k.jsx)(ps,{setValues:e,values:d,errors:c,setErrors:t,disabled:s}):null}const u="client_id"===t||"client_secret"===t||"authorization_url"===t;return(0,k.jsx)(zs,{formData:i,setFormData:r,formStoreState:o,field:t,formFieldDetail:n,disabled:!u&&s},t)}({field:e,integrationFormStore:l,formData:D,setFormData:L,fieldDetails:Z,formStoreState:v,listingData:y,disabled:P,integrationPointer:u,listingErrors:y.errors,listingValues:{description:y.description,how_to_use:y.how_to_use,features:y.features,categories:y.categories,slug:y.slug,preview_images:y.preview_images,add_to_notion_url:y.add_to_notion_url}}))),"webhooks"===T[p].tabName?null:(0,k.jsx)(ns,{handleSave:H,handleReset:async()=>{const e=await(0,N().hl)({formStoreState:l.getState(),userRootStore:x,environment:h});for(const t of(0,V().Yd)(e))L({field:t,value:e[t]})},isFormDirty:q,isLoading:m,disabled:P||!q,hideTermsOfService:!0,submitCTA:"listing"===T[p].tabName?(0,k.jsx)(d()._H,{id:"creatorProfile.integrationPublishRequest.save",defaultMessage:"Submit to Gallery"}):void 0})]})}function ul(e){const t=(0,d().YB)(),{integrationFormStore:a,setIsConvertingToPublic:o}=e,s="create-guest-integration",l=(0,n().VK)((()=>b().default.state.currentUserRootStore),[]),c=(0,n().VK)((()=>a.getState()),[a]),u=(0,n().VK)((()=>{var e;return null===(e=b().default.state.currentUserStore)||void 0===e||null===(e=e.getModel())||void 0===e?void 0:e.email}),[]),p=(0,r().O7)(),[g,m]=i.useReducer(N().x6,N().yb),{formFields:f,fieldDetails:h}=nl(s),y=(0,V().qP)(g).filter((e=>{let[t,a]=e;return f.includes(t)&&"type"!==t})).some((e=>{let[t,a]=e;return!!a.value})),v=Kn(),x=async()=>{const e=await v(g);if(Y({formData:g,formStateType:s,setFormData:m,formFields:f,templateStore:e,actorEmail:u}))return;if("create-guest-integration"!==c.type)return void _().UW(t.formatMessage({id:"creatorProfile.integrationSubmission.errorMessages.submitError",defaultMessage:"There was an error creating the integration"}));const a=Nn().JJ({environment:p,formState:c,formData:(0,N().Xr)(g)});if(!a)return void _().UW(t.formatMessage({id:"creatorProfile.integrationSubmission.errorMessages.submitError",defaultMessage:"There was an error creating the integration"}));const i=()=>{const e={[mn().cZ]:"internal",[fn().K2]:"public"}[a.table];Ue().c4({environment:p,url:`${Dn()._j.creatorProfileIntegrations}/${e}/${a.id}`})};he().Z.setState({isOpen:!0,type:"IntegrationConversionSuccess",onDismiss:i,onAccept:i})};(0,i.useEffect)((()=>{if(!l)return;(async()=>{const e=await(0,N().hl)({formStoreState:a.getState(),userRootStore:l,environment:p});for(const t of(0,V().Yd)(e))m({field:t,value:e[t]});m({field:"type",value:s})})()}),[l,p,a]);return(0,k.jsxs)("form",{onSubmit:x,children:[(0,k.jsx)(dl,{formData:g,setFormData:m}),(0,k.jsx)(Ce().Z,{size:32}),f.map(((e,t)=>(0,k.jsx)(zs,{formData:g,setFormData:m,formStoreState:c,field:e,formFieldDetail:h,disabled:"type"===e},e+t))),(0,k.jsx)(ns,{handleSave:x,handleReset:()=>{a.updateRecordTypeOnSwitch("internal"),o(!1)},isFormDirty:y})]})}function pl(e){var t;const a=(0,r().O7)(),{botOrIntegrationPointer:o}=e,[s,d]=i.useState(!1),{loadedFormState:c,integrationFormStore:u,spaceName:p}=function(e){const{botOrIntegrationPointer:t,existingFormStore:a}=e,o=(0,r().O7)(),s=(0,n().VK)((()=>b().default.state.currentUserRootStore),[]),d=(0,n().qz)(a,bn),c=(0,n().VK)((()=>d.getState().type),[d]),u=(0,n().VK)((()=>d.getState().startingRecord),[d]),p=(0,n().VK)((()=>d.getState().status),[d]),g=(0,n().VK)((()=>{const e=(0,Mn().QS)();return(0,N().H)(c,e)}),[c]),[m,f]=(0,i.useState)("secrets"),h="published"===p&&"secrets"!==m,y=(0,n().VK)((()=>{if(t&&s){const e=t.table,a=s.getRecordValue(t);if(a){const i=e===fn().K2&&((0,_n().Be)(a.capabilities)||(0,_n().Uz)(a.capabilities))&&s.getRecordValue({table:Cn().r9,id:t.id});return{botOrIntegrationRecord:{value:a,table:t.table},maybeExternalAuthRecord:i?{table:Cn().r9,value:i}:void 0}}}}),[s,t]),[{value:v}]=(0,l().r5)((async()=>{if(!s||!y||y.botOrIntegrationRecord.table!==fn().K2)return[];const e=y.botOrIntegrationRecord.value.id,t=await x().callApi({eventName:"getIntegrationDomainVerifications",environment:o,data:{integrationId:e}});if("success"===t.type)return t.data.verificationIds.map((e=>s.getRecordValue({table:wn().Jd,id:e}))).filter(V().$K);if("failed"===t.type)throw t.error;return(0,V().t1)(t)}),[o,y,s]);(0,i.useEffect)((()=>{if(!y)return;const{botOrIntegrationRecord:e,maybeExternalAuthRecord:t}=y;d.initializeNewForm(e,t,v||[]),jn().DU(o,{table:e.table})}),[d,o,y,v]);const _=(0,n().VK)((()=>{if(!s||!y)return;const{botOrIntegrationRecord:e}=y;if(e.value.parent_table!==Sn().bx)return;const t=xt().H2.createChildStore(s,{id:e.value.parent_id,table:e.value.parent_table});return(0,kn().rn)(o,t)}),[y,s,o]);return{loadedFormState:(0,xn().V)({value:u}),selectedPage:m,integrationFormStore:d,setSelectedPage:f,showPublishedIntegrationWarning:h,supportedPages:g,spaceName:_}}(e),g=c.value;if((0,i.useEffect)((()=>{if(g&&g.table===fn().K2){var e;const t=g.value.info.gallery_listing_info,a=g.value.info.installation_url||g.value.info.installation_info_url;Tn.setState({description:W(null==t?void 0:t.description),how_to_use:W(null==t?void 0:t.how_to_use),features:null==t?void 0:t.features,categories:null==t?void 0:t.tags,add_to_notion_url:a,slug:null==t?void 0:t.slug,preview_images:null==t||null===(e=t.preview_images)||void 0===e?void 0:e.map((e=>e.url)),errors:{},listing_status:g.value.listing_status})}else Tn.setState(Tn.getInitialState())}),[g]),"pending"===c.status)return(0,k.jsx)(yn().Z,{});if("rejected"===c.status||!o)return(0,k.jsx)(Pn,{});const m=a.currentUser.id;return(null==g?void 0:g.table)===fn().K2&&(null==g||null===(t=g.value)||void 0===t?void 0:t.parent_id)!==m?(0,k.jsx)(vn().Z,{}):s?(0,k.jsx)(ul,{integrationFormStore:u,setIsConvertingToPublic:d}):(0,k.jsxs)("main",{children:[(0,k.jsx)(Bn,{integrationId:o.id}),(0,k.jsx)(cl,{integrationFormStore:u,spaceName:p,botOrIntegrationPointer:o,setIsConvertingToPublic:d})]})}function gl(){const e=(0,o().yK)((e=>({readFaq:{cursor:"pointer",color:e.regularTextColor,fontWeight:L().Ue.semibold},linkStyles:{color:e.regularTextColor,textDecoration:"none"}})),[]);return(0,k.jsx)("span",{style:e.readFaq,children:(0,k.jsx)("a",{style:e.linkStyles,href:"https://developers.notion.com",children:(0,k.jsx)(d()._H,{defaultMessage:"Learn more",id:"creatorProfile.integrations.listLink"})})})}const ml=function(){const e=(0,o().yK)((e=>({container:{display:"flex",flexDirection:"column",alignItems:"space-between",gap:24,flexWrap:"wrap"},topContainer:{display:"flex",flexDirection:"column",gap:4},sidebarHeader:{fontSize:18,fontWeight:L().Ue.semibold,color:e.regularTextColor},sidebarDescription:{fontSize:14,color:e.lightTextColor,fontWeight:L().Ue.regular},createButtonColor:{background:e.white},faq:{display:"flex",color:e.lightTextColor,gap:8}})),[]);return(0,k.jsx)("div",{style:e.container,children:(0,k.jsx)(Ee().t,{size:"large",header:(0,k.jsx)(d()._H,{id:"creatorProfile.integrations.pageHeader",defaultMessage:"Integrations"}),subHeader:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(d()._H,{id:"creatorProfile.integrations.pageHeaderSubtitle",defaultMessage:"Create, review, and edit development information and credentials."}),(0,k.jsxs)("div",{style:e.faq,children:[(0,k.jsx)(d()._H,{defaultMessage:"Integrations use the API to access Notion's pages, databases, and users. ",id:"creatorProfile.templates.listSubheader"}),(0,k.jsx)(gl,{})]})]})})})};var fl=()=>a(326966),hl=()=>a(265075),bl=()=>a(989478);const yl=function(e){const{record:t,hasCreatorProfile:a}=e,i=(0,o().yK)((e=>({iconText:{fontSize:28},icon:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",borderRadius:"6px"},subtitleType:{fontSize:12,fontWeight:L().Ue.semibold},subtitleCreatedBy:{fontSize:12,color:e.lightTextColor},subtitle:{display:"flex",alignItems:"center"}})),[]),s=(0,r().O7)(),l=(0,n().VK)((()=>b().default.state.currentUserStore),[]),c=(0,n().VK)((()=>t.name??""),[t]),u=(0,n().VK)((()=>t.table===fn().K2?t.getInfo().icon:t.icon),[t]),p=(0,n().VK)((()=>t.table===fn().K2),[t]),g=(0,n().VK)((()=>t.table===fn().K2&&("external"===t.getType()||"guest"===t.getType())),[t]),m=function(e){const t=(0,d().YB)(),a=(0,n().VK)((()=>b().default.state.currentUserStore),[]),i=(0,n().VK)((()=>{if(!a)return;if(e.created_by_id===a.id)return(0,k.jsx)(d()._H,{id:"developerIntegrationCard.createdByTagline.creatorIsUser",defaultMessage:"Created by you"});const i=xt().U6.createChildStore(a,{table:bl().KJ,id:e.created_by_id}),r=i.getModel();return i.isReady()&&r?(0,k.jsx)(d()._H,{id:"developerIntegrationCard.createdByTagline.placeholder",defaultMessage:"Created by {userFullDisplayName}",values:{userFullDisplayName:r.getFullName(t)}}):void 0}),[a,e,t]);return i}(t),f=Un(t.id);if(!l)return null;const h=(0,xt().Kv)(l,{id:t.id,table:t.table}),y=`${Dn()._j.creatorProfileIntegrations}/${p?"public":"internal"}/${t.id}`;return(0,k.jsxs)(Fr,{actions:(0,k.jsxs)(zr,{imageType:"square",extraLeftSpacing:25,children:[(0,k.jsx)(Ji().z,{variant:"neutral",onClick:()=>{he().Z.setState({isOpen:!0,type:"DeleteIntegrationConfirmation",modalButtonType:"destructive",onAccept:()=>function(e){const{recordStore:t,environment:a}=e;jn().DW(a,{table:t.table}),Nn().uU({environment:a,recordStore:t}).then((()=>{C().oV({label:(0,k.jsx)(d()._H,{id:"creatorProfile.integrationDeletion.snackbar.success",defaultMessage:"Integration deleted"})})})).catch((()=>{C().oV({label:(0,k.jsx)(d()._H,{id:"creatorProfile.integrationDeletion.snackbar.fail",defaultMessage:"Error deleting integration. Please try again"})})}))}({recordStore:h,environment:s})})},children:(0,k.jsx)(d()._H,{id:"creatorProfile.integrationDeletion.hover.deleteButton",defaultMessage:"Delete"})}),(0,k.jsx)(Ji().z,{variant:"light",href:y,children:(0,k.jsx)(d()._H,{id:"creatorProfile.integrationDeletion.hover.editButton",defaultMessage:"Edit Settings"})}),g&&!f.listingStatus&&(0,k.jsx)(Ji().z,{variant:"dark",onClick:()=>{a?Ue().c4({url:`${Dn()._j.creatorProfileIntegrations}/public/${t.id}/publish`,environment:s}):he().Z.setState({isOpen:!0,type:"CreatorProfileRequired",onAccept:()=>Ue().c4({url:Dn()._j.creatorProfile,environment:s})})},children:(0,k.jsx)(d()._H,{id:"creatorProfile.integrationPublish.hover.submitButton",defaultMessage:"Submit to Gallery"})})]}),href:y,children:[(0,k.jsx)(Zr,{type:"integration",imageSrc:u,node:u?null:(0,k.jsx)("div",{style:i.icon,children:(0,k.jsx)("span",{style:i.iconText,children:c[0]})})}),(0,k.jsx)(Nr,{title:(0,k.jsx)(Or,{templateName:c,templateStatus:f.listingStatus?X(f.listingStatus,f.integrationListingModel):void 0}),subtitle:(0,k.jsxs)("div",{style:i.subtitle,children:[(0,k.jsx)("div",{style:i.subtitleType,children:g?(0,k.jsx)(d()._H,{id:"creatorProfile.integrations.subtitlePublic",defaultMessage:"Public Integration"}):(0,k.jsx)(d()._H,{id:"creatorProfile.integrations.subtitleInternal",defaultMessage:"Internal Integration"})})," ","·"," ",(0,k.jsx)("div",{style:i.subtitleCreatedBy,children:(0,k.jsx)("div",{style:i.subtitleCreatedBy,children:m})})]})})]})};const vl={all:(0,k.jsx)(d()._H,{id:"creatorProfile.integrations.allFilter.label",defaultMessage:"View all"}),internal:(0,k.jsx)(d()._H,{id:"creatorProfile.integrations.internalFilter.label",defaultMessage:"Internal"}),public:(0,k.jsx)(d()._H,{id:"creatorProfile.integrations.publicFilter.label",defaultMessage:"Public"})},xl=function(e){const{setFilter:t,filter:a}=e,i=(0,o().yK)((e=>({filterButton:{fontSize:15,height:28,marginBottom:16,width:"fit-content"},selectedFilterButton:{color:c().ZP.frontText,fontWeight:L().Ue.medium}})),[]),n=(0,r().O7)(),s={onSelect:e=>{t(e),jn().EJ(n,{type:e})},items:[...hl().$Z],renderOrigin:e=>(0,k.jsxs)(j().Z,{...e,children:[vl[a],(0,k.jsx)(we().y,{iconGroup:be().m,variantName:"mini"})]}),getKey:e=>e,renderItem:e=>(0,k.jsx)(it().Z,{...e,title:vl[e.value]}),selectedItem:a};return(0,k.jsx)("div",{style:i.filterButton,children:(0,k.jsx)(nt().Z,{...s})})};function _l(e){let{children:t}=e;const a=(0,o().yK)((()=>({integrationCardGrid:{display:"flex",flexDirection:"column",gap:"28px"},integrationCardGridMobile:{display:"flex",flexDirection:"column",gap:"40px"}})),[]),{isMobileWidth:i}=(0,m().EQ)();return(0,k.jsx)("div",{style:{...i?a.integrationCardGridMobile:a.integrationCardGrid},children:t})}const wl=function(){const e=(0,r().O7)(),t=(0,o().yK)((e=>({newIntegrationTitle:{color:e.mediumTextColor},icon:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",background:e.accentColors.gray[30],borderRadius:"6px"}})),[]),[s,c]=i.useState([]),[u,p]=i.useState([]),g=Boolean((0,fe().h)()),m=(0,n().VK)((()=>b().default.state.currentUserStore),[]),f=(0,n().VK)((()=>b().default.state.currentUserRootStore),[]),h=(0,n().VK)((()=>f?f.getAdminSpaceStores():[]),[f]),[y,v]=i.useState("all");i.useEffect((()=>{c([]),p([])}),[e.currentUser.id]),i.useEffect((()=>{jn().BI(e)}),[e]);const[{value:_,status:w}]=(0,l().r5)((async()=>{const t=h.map((e=>e.id)),a=await x().callApi({eventName:"getDeveloperBotsAndIntegrations",environment:e,data:{ownedSpaceIds:t}});if("success"===a.type)return a.data;if("failed"===a.type)throw An().log({level:"error",from:"creatorProfile",type:"IntegrationLoadError",data:{message:`Cannot load user integrations and bots ${a.error}`}}),a.error;return(0,V().t1)(a)}),[e,h]),C=null==_?void 0:_.integrationIds;i.useEffect((()=>{C&&c((e=>(0,fl().jj)([...e,...C])))}),[C]);const S=null==_?void 0:_.botIds;i.useEffect((()=>{S&&p((e=>(0,fl().jj)([...e,...S])))}),[S]);const j=(0,n().VK)((()=>{if(m){return(0,hl().GU)({ids:s,table:fn().K2,userStore:m}).filter((e=>e.alive))}return[]}),[m,s]),M=(0,n().VK)((()=>{if(m){return(0,hl().GU)({ids:u,table:mn().cZ,userStore:m}).filter((e=>e.alive))}return[]}),[m,u]),I=(0,n().VK)((()=>(0,hl().cr)([...j,...M])),[j,M]),T=(0,n().VK)((()=>({all:I,internal:M,public:j}[y])),[y,I,M,j]);return"pending"===w?(0,k.jsx)(yn().Z,{}):(0,k.jsxs)("section",{children:[0===T.length&&(0,k.jsx)(Ee().t,{header:(0,k.jsx)(d()._H,{id:"creatorProfile.integrations.listHeaderNew",defaultMessage:"Create a new integration"}),subHeader:(0,k.jsx)(k.Fragment,{}),size:"medium"}),(0,k.jsx)(xl,{filter:y,setFilter:v}),(0,k.jsxs)(_l,{children:[(0,k.jsxs)(Fr,{href:"/profile/integrations/form/new-integration",onClick:()=>jn().Ng(e),children:[(0,k.jsx)(Zr,{type:"integration",node:(0,k.jsx)("div",{style:t.icon,children:(0,k.jsx)(we().y,{overrideSize:e=>2.25*e,variantName:"default",colorName:"secondary",iconGroup:a(774119)._})})}),(0,k.jsx)(Nr,{title:(0,k.jsx)("div",{style:t.newIntegrationTitle,children:(0,k.jsx)(d()._H,{defaultMessage:"New integration",id:"creatorProfile.integrations.newIntegration"})})})]}),T.map((e=>(0,k.jsx)(yl,{hasCreatorProfile:g,record:e},e.id)))]})]})};var Cl=()=>a(677559);const Sl=new(Cl().Ss)("integrations",(async()=>{const[{default:e}]=await Promise.all([a.e(50801).then(a.bind(a,725819))]);return{DeveloperIntegrationLab:e}})),jl=(0,Cl().kF)(Sl,(e=>e.DeveloperIntegrationLab));function Ml(e){const{botOrIntegrationPointer:t}=e,a=(0,n().VK)((()=>{const{description:e,slug:t,how_to_use:a,preview_images:i,add_to_notion_url:r,features:n,categories:o}=Tn.getInitialState();return{description:e,slug:t,how_to_use:a,preview_images:i,add_to_notion_url:r,features:n,categories:o}}),[]),[r,o]=i.useState(a);return(0,k.jsx)(us,{integrationPointer:t,values:r,setValues:o})}function kl(e){const{botOrIntegrationPointer:t,isPublish:a,isLab:i,integrationFormStore:r}=e;return a?(null==t?void 0:t.table)===fn().K2&&t?(0,k.jsx)(Ml,{botOrIntegrationPointer:t}):null:i?(null==t?void 0:t.table)===fn().K2&&t?(0,k.jsx)(jl,{integrationPointer:t}):null:(0,k.jsx)(pl,{botOrIntegrationPointer:t,integrationsFormStore:r})}function Il(e){const t=(0,d().YB)(),{integrationFormStore:a}=e,[o,s]=i.useState("create-bot"),l=(0,n().VK)((()=>a.getState()),[a]),c=(0,r().O7)(),u=(0,n().VK)((()=>b().default.state.currentUserStore),[]),p=(0,n().VK)((()=>{var e;return null==u||null===(e=u.getModel())||void 0===e?void 0:e.email}),[u]),[g,m]=i.useReducer(N().x6,N().yb),[{formFields:f,fieldDetails:h},y]=i.useState((()=>nl(o))),v=Object.entries(g).filter((e=>{let[t,a]=e;return f.includes(t)&&"type"!==t})).some((e=>{let[t,a]=e;return!!a.value})),x=Kn(),w=async()=>{const e=await x(g);if(Y({formData:g,formStateType:o,setFormData:m,formFields:f,templateStore:e,actorEmail:p}))return;if("create-bot"!==l.type&&"create-guest-integration"!==l.type)return void _().UW(t.formatMessage({id:"creatorProfile.integrationSubmission.errorMessages.submitError",defaultMessage:"There was an error creating the integration"}));const a=Nn().EC({environment:c,formState:l,formData:(0,N().Xr)(g)});if(!a)return void _().UW(t.formatMessage({id:"creatorProfile.integrationSubmission.errorMessages.submitError",defaultMessage:"There was an error creating the integration"}));const i=()=>{const e={[mn().cZ]:"internal",[fn().K2]:"public"};Ue().c4({environment:c,url:`${Dn()._j.creatorProfileIntegrations}/${e[a.table]}/${a.id}`})};he().Z.setState({isOpen:!0,type:"IntegrationSuccessCreation",onAccept:i,onDismiss:i})};return(0,i.useEffect)((()=>{m({value:"create-bot",field:"type"})}),[]),(0,i.useEffect)((()=>{const e=g.type.value;e&&(s(e),y(nl(e)),a.updateCreationFormType(e))}),[a,g.type.value]),(0,k.jsxs)("form",{onSubmit:w,children:[(0,k.jsx)(dl,{formData:g,setFormData:m}),(0,k.jsx)(Ce().Z,{size:32}),f.map(((e,t)=>(0,k.jsx)(zs,{formData:g,setFormData:m,formStoreState:l,field:e,formFieldDetail:h},e+t))),(0,k.jsx)(ns,{handleSave:w,handleReset:()=>{a.reset(),Ue().c4({environment:c,url:Dn().VP.creatorProfileIntegrations})},isFormDirty:v})]})}function Tl(e){const{botOrIntegrationPointer:t,isPublish:a,isLab:i}=e,r=(0,n().qz)(void 0,bn),o=(0,n().VK)((()=>b().default.state.currentUserRootStore),[]),s=(0,n().VK)((()=>{if(t&&o){const e=o.getRecordModel(t);return null==e?void 0:e.getName()}}),[o,t]);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(pa,{route:"/profile/integrations",exact:!0,children:[(0,k.jsx)(ml,{}),(0,k.jsx)(wl,{})]}),(0,k.jsxs)(pa,{route:"/profile/integrations/form/new-integration",exact:!0,children:[(0,k.jsx)(la,{hideProfile:!0}),(0,k.jsx)(Il,{integrationFormStore:r})]}),(0,k.jsxs)(pa,{route:"/profile/integrations/public/",children:[(0,k.jsx)(la,{hideProfile:!0,displayName:s}),(0,k.jsx)(kl,{botOrIntegrationPointer:t,isPublish:a,isLab:i,integrationFormStore:r})]}),(0,k.jsxs)(pa,{route:"/profile/integrations/internal/",children:[(0,k.jsx)(la,{hideProfile:!0,displayName:s}),(0,k.jsx)(pl,{botOrIntegrationPointer:t,integrationsFormStore:r})]}),(0,k.jsx)(pn().Z,{})]})}const Pl={CreatorProfileModal:new(Cl().Ss)("CreatorProfileModal",(async()=>await a.e(91242).then(a.bind(a,996518))))},Dl=(0,Cl().kF)(Pl.CreatorProfileModal,(e=>e.default));var Ll=()=>a(727794),El=()=>a(169154),Rl=()=>a(491074),Ul=()=>a(26116);var Bl=()=>a(331034),Hl=()=>a(830742),Fl=()=>a(124199);Fl().object({required:{webhookUrl:Fl().string()},optional:{}});const Zl=(0,Hl().LS)("testMarketplaceWebhook");var Al=()=>a(782646),Vl=()=>a(269299),Nl=()=>a(154060),zl=()=>a(326177),Ol=()=>a(707378);const Kl=["llc","llp","inc.","inc","corp","corp.","corporation","holdings","global",".com","international"].map((e=>e.toLowerCase()));const ql=new Set(["3M","amark","A-Mark Precious Metals","ABM Industries","ADP","AECOM","AES","AGCO","AGL Resources","AIG","AK Steel Holding","ARRIS Group","AT&T","AbbVie","Abbott Laboratories","Activision Blizzard","Activision","Blizzard","Adobe","Adobe Systems","Advance Auto Parts","Advanced Micro Devices","AMD","Aetna","Aflac","Agilent Technologies","Air Products & Chemicals","Airgas","Alaska Air Group","Albertsons Cos.","Alcoa","Alleghany","Allergan","Alliance Data Systems","Allstate","Ally Financial","Alphabet","Altria Group","AmTrust Financial Services","Amazon","Ameren","American Airlines Group","American Axle & Manufacturing","American Electric Power","American Express","American Family Insurance Group","American Financial Group","American Tower","Ameriprise Financial","AmerisourceBergen","Amgen","Amphenol","Anadarko Petroleum","Andeavor","Anixter International","Anthem","Apache","Apple","Apple","Applied Materials","Aramark","Archer Daniels Midland","Arconic","Arrow Electronics","Arthur J. Gallagher","Asbury Automotive Group","Ascena Retail Group","Ashland","Assurant","Auto-Owners Insurance","AutoNation","AutoZone","Autoliv","Automatic Data Processing","Avery Dennison","Avis Budget Group","Avnet","Avon Products","BB&T Corp.","Baker Hughes","Ball","Bank of America Corp.","Bank of New York Mellon Corp.","Bank of New York Mellon","Barnes & Noble","Baxalta","Baxter International","Becton Dickinson","Bed Bath & Beyond","Berkshire Hathaway","Berry Global Group","Best Buy","Big Lots","Biogen","BlackRock","Blackstone Group","Boeing","Booking Holdings","Booz Allen Hamilton Holding","Booz Allen Hamilton","BorgWarner","Boston Scientific","Bristol-Myers Squibb","BT","British Telecom","Cox","Broadcom","Buckeye Partners","Builders FirstSource","Burlington Stores","C.H. Robinson Worldwide","CBRE Group","CBS","CDW","CH2M Hill","CHS","CMS Energy","CST Brands","CSX","CVS Health","Cablevision Systems","Caesars Entertainment","CalAtlantic Group","Calpine","Calumet Specialty Products Partners","Cameron International","Campbell Soup","Capital One Financial","CarMax","Cardinal Health","Casey’s General Stores","Caterpillar","Celanese","Celgene","Centene","CenterPoint Energy","CenturyLink","Charles Schwab","Charter Communications","Chemours","Cheniere Energy","Chesapeake Energy","Chevron","Chubb","Cigna","Cincinnati Financial","Cintas","Cisco Systems","Citigroup","Citizens Financial Group","Clorox","Coca-Cola Enterprises","Coca-Cola European Partners","Coca-Cola","Cognizant","Cognizant Technology Solutions","Colgate-Palmolive","Comcast","Commercial Metals","Community Health Systems","Computer Sciences","Con-way","ConAgra Foods","Conagra Brands","Conduent","ConocoPhillips","Consolidated Edison","Constellation Brands","Core-Mark Holding","Corning","Costco","Coty","Crown Holdings","Cummins","D.R. Horton","DCP Midstream","DISH Network","DTE Energy","DXC Technology","DaVita HealthCare Partners","DaVita","Dana Holding","Dana","Danaher","Darden Restaurants","Dean Foods","Deere","Delek US Holdings","Dell Technologies","Delta Air Lines","Devon Energy","Dick’s Sporting Goods","Dillard’s","DirecTV","Discover Financial Services","Discovery Communications","Discovery","Disney","Dollar General","Dollar Tree","Dominion Energy","Dominion Resources","Domtar","Dover","Dow Chemical","DowDuPont","Dr Pepper Snapple Group","DuPont","Duke Energy","EMC","EMCOR Group","EOG Resources","Eastman Chemical","Ecolab","Edison International","Eli Lilly","Emerson Electric","Energy Future Holdings","Energy Transfer Equity","Entergy","Enterprise Products Partners","Envision Healthcare Holdings","Envision Healthcare","Erie Insurance Group","Essendant","Estee Lauder","Eversource Energy","Exelon","Expedia Group","Expedia","Expeditors International of Washington","Expeditors Intl. of Washington","Express Scripts Holding","Exxon Mobil","FMC Technologies","Facebook","Family Dollar Stores","Fannie Mae","Farmers Insurance Exchange","FedEx","Fidelity National Financial","Fidelity National Information Services","Fifth Third Bancorp","First American Financial","First Data","FirstEnergy","Fiserv","Fluor","Foot Locker","Ford Motor","Fortive","Franklin Resources","Freddie Mac","Freeport-McMoRan","Frontier Communications","GameStop","Gap","General Cable","General Dynamics","General Electric","General Mills","General Motors","Genesis Healthcare","Genuine Parts","Genworth Financial","Gilead Sciences","Global Partners","Goldman Sachs Group","Goodyear Tire & Rubber","Graybar Electric","Group 1 Automotive","Guardian Life Ins. Co. of America","H.J. Heinz","HCA Healthcare","HCA Holdings","HD Supply Holdings","HP","HRG Group","Halliburton","Hanesbrands","Harley-Davidson","Harman International Industries","Harris","Hartford Financial Services Group","Hartford Financial Services","Health Net","Henry Schein","Hershey","Hertz Global Holdings","Hess","Hewlett Packard Enterprise","Hilton Worldwide Holdings","HollyFrontier","Home Depot","Honeywell International","Hormel Foods","Host Hotels & Resorts","Humana","Huntington Ingalls Industries","Huntsman","IBM","INTL FCStone","IQVIA Holdings","Icahn Enterprises","Illinois Tool Works","Ingram Micro","Ingredion","Insight Enterprises","Integrys Energy Group","Intel","Intercontinental Exchange","International Paper","Interpublic Group","J.B. Hunt Transport Services","J.C. Penney","J.M. Smucker","J.P. Morgan Chase","JP Morgan Chase","JPMorgan Chase","Jabil Circuit","Jabil","Jacobs Engineering Group","Jarden","Jefferies Financial Group","JetBlue Airways","Johnson & Johnson","J and J","Johnson Controls","Jones Financial","Jones Lang LaSalle","KBR","KKR","Kellogg","Kelly Services","KeyCorp","Kimberly-Clark","Kinder Morgan","Kindred Healthcare","Kohl’s","Kraft Foods Group","Kraft Heinz","Kroger","L Brands","L-3 Communications","L3 Technologies","LKQ","Laboratory Corp. of America","Lam Research","Land O’Lakes","Lansing Trade Group","Las Vegas Sands","Lear","Leidos Holdings","Lennar","Leucadia National","Level 3 Communications","Liberty Interactive","Liberty Media","Liberty Mutual Insurance Group","LifePoint Health","Lincoln National","Lithia Motors","Live Nation Entertainment","Lockheed Martin","Loews","Lowe’s","M&T Bank Corp.","MGM Resorts International","MRC Global","Macy’s","Magellan Health","ManpowerGroup","Marathon Oil","Marathon Petroleum","Markel","Marriott International","Marsh & McLennan","MasTec","Masco","Massachusetts Mutual Life Insurance","MasterCard","Mastercard","Mattel","McDonald’s","McGraw Hill Financial","McKesson","MeadWestvaco","Merck","MetLife","Michaels Cos.","Micron Technology","Microsoft","Microsoft Office","Microsoft Office 365","Mohawk Industries","Molina Healthcare","Molson Coors Brewing","Mondelez International","Monsanto","Morgan Stanley","Mosaic","Motorola Solutions","Murphy Oil","Murphy USA","Mutual of Omaha Insurance","NCR","NGL Energy Partners","NRG Energy","NVR","National Oilwell Varco","Nationwide","Navient","Navistar International","NetApp","Netflix","New York Life Insurance","Newell Brands","Newmont Mining","News Corp.","NextEra Energy","NiSource","Nike","Nordstrom","Norfolk Southern","Northern Trust","Northrop Grumman","Northwestern Mutual","Nucor","Nvidia","ON Semiconductor","Occidental Petroleum","Office Depot","Old Republic International","Olin","Omnicare","Omnicom Group","Oneok","Oracle","Oshkosh","Owens & Minor","Owens Corning","Owens-Illinois","O’Reilly Automotive","PBF Energy","PG&E Corp.","PNC Financial Services Group","PNC Financial Services","PPG Industries","PPL","PVH","Paccar","Pacific Life","Packaging Corp. of America","Pantry","Parker-Hannifin","Patterson","PayPal Holdings","Peabody Energy","Penske Automotive Group","pepsi","PepsiCo","Performance Food Group","PetSmart","Peter Kiewit Sons’","Pfizer","Philip Morris International","Phillips 66","Phillips","Pixar","Pioneer Natural Resources","Plains GP Holdings","Polaris Industries","Praxair","Precision Castparts","Priceline Group","Principal Financial Group","Principal Financial","Procter & Gamble","Progressive","Prudential Financial","Public Service Enterprise Group","Publix Super Markets","PulteGroup","Qualcomm","Quanta Services","Quest Diagnostics","Quintiles IMS Holdings","Quintiles Transnational Holdings","Qurate Retail","R.R. Donnelley & Sons","Ralph Lauren","Raymond James Financial","Raytheon","Realogy Holdings","Regeneron Pharmaceuticals","Regions Financial","Reinsurance Group of America","Reliance Steel & Aluminum","Republic Services","Reynolds American","Rite Aid","Robert Half International","Rockwell Automation","Rockwell Collins","Ross Stores","Ryder System","S&P Global","Safeway","SanDisk","Sanmina","Seaboard","Sealed Air","Sears Holdings","Securian Financial Group","Sempra Energy","Sherwin-Williams","Simon Property Group","Sonic Automotive","Southern","Southwest Airlines","SpartanNash","Spectra Energy","Spectrum Brands Holdings","Spirit AeroSystems Holdings","St. Jude Medical","Stanley Black & Decker","Staples","Starbucks","Starwood Hotels & Resorts","State Farm Insurance Cos.","State Street Corp.","Steel Dynamics","Stryker","SunTrust Banks","Supervalu","Symantec","Synchrony Financial","Synnex","Sysco","TEGNA","TIAA","TIAA-CREF","TJX","TRW Automotive Holdings","Targa Resources","Target","Tech Data","Telephone & Data Systems","Tenet Healthcare","Tenneco","Terex","Tesla","Tesoro","Texas Instruments","Textron","Thermo Fisher Scientific","Thor Industries","Thrivent Financial for Lutherans","Time Warner Cable","Time Warner","Toll Brothers","Toys R Us","Tractor Supply","TravelCenters of America","Travelers Cos.","TreeHouse Foods","Trinity Industries","Twenty-First Century Fox","Tyson Foods","U.S. Bancorp","UGI","UPS","US Foods Holding","US Foods","USAA","Ulta","Ulta Beauty","Union Pacific","United","United Continental Holdings","United Natural Foods","United Rentals","United States Steel","United Technologies","UnitedHealth Group","Univar","Universal Health Services","Unum Group","VF","Valero Energy","Veritiv","Verizon Communications","Verizon","Viacom","Visa","Visteon","Vistra Energy","Voya Financial","W.R. Berkley","W.W. Grainger","WEC Energy Group","WESCO International","Walgreens Boots Alliance","Walgreens","Walmart","Walt Disney","Waste Management","WellCare Health Plans","Wells Fargo","WestRock","Western & Southern Financial Group","Western & Southern Financial","Western Digital","Western Refining","Western Union","Westlake Chemical","Weyerhaeuser","Whirlpool","Whole Foods Market","Williams","Windstream Holdings","World Fuel Services","Wyndham Destinations","Wyndham Worldwide","Wynn Resorts","XPO Logistics","Xcel Energy","Xerox","Yahoo","Yum Brands","Yum China Holdings","Zimmer Biomet Holdings","eBay","iHeartMedia","salesforce.com","atlassian","www","google","facebook","youtube","baidu","yahoo","amazon","wikipedia","qq","twitter","slashdot","google","taobao","live","sina","yahoo","linkedin","weibo","ebay","google","yandex","bing","vk","hao123","google","instagram","t","msn","amazon","tmall","google","pinterest","ask","reddit","wordpress","mail","google","blogspot","paypal","onclickads","google","tumblr","apple","google","aliexpress","sohu","microsoft","imgur","xvideos","google","imdb","google","netflix","gmw","amazon","fc2","360","alibaba","go","stackoverflow","ok","google","google","amazon","google","tianya","amazon","craigslist","pornhub","rakuten","naver","blogger","diply","google","xhamster","flipkart","espn","soso","outbrain","nicovideo","google","cnn","xinhuanet","dropbox","google","googleusercontent","github","bongacams","ebay","kat","bbc","google","google","pixnet","tradeadexchange","popads","googleadservices","ebay","dailymotion","sogou","adnetworkperformance","adobe","directrev","nytimes","jd","wikia","adcash","livedoor","booking","163","bbc","alipay","coccoc","dailymail","indiatimes","china","dmm","china","chase","xnxx","buzzfeed","google","huffingtonpost","youku","google","google","terraclicks","uol","amazon","snapdeal","office","google","microsoftonline","walmart","ameblo","amazon","daum","amazonaws","blogspot","slideshare","etsy","twitch","google","whatsapp","bankofamerica","yelp","globo","theguardian","tudou","flickr","aol","stackexchange","chinadaily","cnet","weather","indeed","ettoday","amazon","reimageplus","quora","redtube","soundcloud","tmall","google","forbes","douban","loading-delivery2","naver","blogspot","cntv","cnzz","google","wellsfargo","google","target","youporn","adf","zillow","vice","google","leboncoin","kakaku","ikea","gmail","bestbuy","vimeo","avito","godaddy","spaceshipads","goo","salesforce","about","tripadvisor","allegro","livejournal","nih","tubecup","adplxmd","foxnews","deviantart","wordpress","doublepimp","google","washingtonpost","theladbible","w3schools","themeforest","feedly","wikihow","wordpress","office365","taboola","9gag","mozilla","akamai","akamaihd","zol","hclips","mediafire","businessinsider","google","onet","comcast","gfycat","softonic","google","pixiv","google","zhihu","americanexpress","amazon","mystart","nfl","wix","steamcommunity","archive","usps","ups","google","wikimedia","bilibili","homedepot","google","secureserver","doorblog","force","telegraph","skype","detik","shutterstock","google","ebay-kleinanzeigen","ebaykleinanzeigen","weebly","popcash","google","addthis","steampowered","web","bitauto","blogspot","google","github","rambler","avg","ndtv","hulu","gamer","xywy","huanqiu","nametests","51","orange","tlbb8","sourceforge","hdfcbank","livejasmin","espncricinfo","answers","hp","gmx","youm7","mailchimp","mercadolivre","speedtest","xfinity","ebay","webmd","ifeng","google","groupon","blogfa","wordreference","uptodown","xuite","tumblr","hootsuite","usatoday","google","capitalone","stumbleupon","goodreads","wp","people","bet365","google","t-online","paytm","fedex","fbcdn","icicibank","blog","google","thesaurus","bloomberg","mashable","caijing","bild","extratorrent","warmportrait","dmm","pandora","putlocker","amazon","spiegel","seznam","google","spotify","wsj","dell","ign","jabong","udn","2ch","macys","chaturbate","kaskus","att","engadget","accuweather","gameforge","varzesh3","tmall","life","smzdm","badoo","google","mama","samsung","adidas","tmall","rutracker","1688","chaoshi","1905","gsmarena","google","youth","onlinesbi","styletv","abs-cbnnews","mega","twimg","liveadexchanger","livedoor","upornia","zendesk","trello","mlb","rediff","tistory","39","reference","google","google","google","milliyet","reuters","icloud","verizonwireless","haosou","liputan6","kohls","kickstarter","kouclo","sahibinden","shopclues","enet","ebay","mydomainadvisor","iqiyi","sberbank","impress","eksisozluk","bleacherreport","slickdeals","yaolan","tube8","evernote","trackingclick","babytree","baike","lady8844","infusionsoft","hurriyet","ask","google","liveinternet","flirchi","newegg","ijreview","torrentz","vid","likes","kinopoisk","thefreedictionary","youradexchange","pinimg","oracle","ppomppu","google","gap","4shared","rt","google","yandex","scribd","ebay","quikr","photobucket","ltn","taleo","repubblica","ce","libero","onedio","list-manage","listmanage","uploaded","slack","blogspot","blogimg","livedoor","meetup","cbssports","retailmenot","goal","goodgamestudios","cnnic","eastday","citi","lifehacker","51yes","exoclick","buzzfil","olx","hm","neobux","ameba","cloudfront","teepr","pconline","google","kinogo","gizmodo","elpais","savefrom","rbc","disqus","fiverr","theverge","ewt","marca","xda-developers","xda","xdadevelopers","developers","lowes","free","google","allrecipes","xe","battle","torrentz","kompas","surveymonkey","aparat","souq","ilividnewtab","mobile","nordstrom","stockstar","nyaa","time","asos","intuit","youboy","nbcnews","naukri","4dsply","epweike","streamcloud","techcrunch","medium","tabelog","independent","chip","zippyshare","lenovo","expedia","wunderground","java","corriere","gmarket","subscene","webssearches","plarium","hotels","autohome","playstation","irctc","glassdoor","eyny","ancestry","gamefaqs","sabq","qunar","myway","google","cnbeta","urdupoint","17ok","albawabhnews","youtube-mp3","youtubemp3","blackboard","airbnb","google","hatena","azlyrics","mercadolibre","nifty","ero-advertising","eroadvertising","kijiji","doubleclick","justdial","6pm","mercadolibre","shopify","olx","instructables","bestadbid","realtor","chinaz","costco","nike","people","npr","timeanddate","gmanetwork","issuu","digikala","lenta","kayak","jimdo","subito","beeg","codecanyon","box","rottentomatoes","kooora","vcommission","seesaa","verizon","siteadvisor","discovercard","blogspot","elmundo","xunlei","11st","tmz","douyutv","donga","google","taringa","haber7","youdao","okcupid","bukalapak","clien","thepiratebay","microsoftstore","gazeta","bhaskar","all2lnk","mirror","hupu","sh","k618","instructure","so-net","sonet","ebay","zomato","squarespace","urbandictionary","focus","google","zulily","wired","overstock","wetransfer","itmedia","southwest","latimes","fidelity","b5m","list","csdn","nba","change","sakura","gearbest","drudgereport","freepik","moneycontrol","eonline","livescore","google","asana","vnexpress","airtel","duckduckgo","agoda","japanpost","yandex","r10","cookpad","yodobashi","rdsa2012","mixi","unblocked","woot","ytimg","php","pof","makemytrip","udemy","wayfair","domaintools","statcounter","hespress","trulia","slate","asus","billdesk","sears","aweber","musicboxnewtab","wow","foodnetwork","pch","yts","ca","constantcontact","bomb01","yandex","blogspot","researchgate","mihanblog","interia","goo","ensonhaber","superuser","lefigaro","workercn","gigazine","cnbc","eventbrite","swagbucks","suning","blog","staticwebdom","rednet","yallakora","lazada","bookmyshow","popsugar","pcmag","staples","ero-video","erovideo","chron","twoo","admtpmp127","houzz","youjizz","topfansgames","abril","tokopedia","abcnews","upwork","state","ria","asahi","wonderlandads","bitly","food","onlylady","tinyurl","lemonde","ci123","nikkei","hatenablog","hostgator","academia","megapopads","custhelp","redirectvoluum","zoho","alicdn","cdiscount","thewatchseries","bhphotovideo","howtogeek","mercadolibre","norton","appledaily","momoshop","cbc","biglobe","315che","semrush","shareasale","tnaflix","zappos","zara","egou","chinaso","gismeteo","sciencedirect","nypost","byinmind","patch","fanli","nydailynews","littlethings","voc","histats","faithtap","jcpenney","coursera","wp","topf1le","intoday","cbsnews","rightmove","zing","babycenter","auction","wikiwiki","backpage","weblio","messenger","xbox","oeeee","marketwatch","windows","fanduel","clixsense","gemius","aa","58","commentcamarche","nikkeibp","olx","bodybuilding","jrj","mynet","nhk","lequipe","gawker","usaa","exblog","clipconverter","mi","videodownloadconverter","investing","mayoclinic","jumia","rapidgator","behance","delta-homes","deltahomes","dropbooks","e-hentai","ehentai","ticketmaster","to8to","vetogate","leagueoflegends","mit","gamespot","reverso","techradar","sbnation","liveleak","europa","mobile01","ibm","zeroredirect1","himado","farsnews","wiktionary","vk","myfitnesspal","nhl","alexa","kdnet","21cn","123cha","google","altervista","cbs","tmall","milanuncios","askmebazaar","gutefrage","gov","atlassian","primewire","saramin","theatlantic","sozcu","giphy","yoka","adp","okezone","olx","mystartsearch","junbi-tracker","junbitracker","junbi","acfun","informer","delta","dianping","androidcentral","webex","cam4","t-mobile","tmobile","cracked","usbank","stamplive","ted","google","drtuber","gyazo","investopedia","adschemist","drom","anitube","cityadspix","thesportbible","agar","zone-telechargement","telechargement","zone","zonetelechargement","united","hubspot","4chan","emol","netteller","jin115","infoseek","ehow","uniqlo","geocities","disq","mega","leadzupc","atwiki","sfgate","cpasbien","novinky","filehippo","dreamstime","cisco","getpocket","facenama","feclik","iflscience","priceline","blogspot","wav","thekitchn","gazzetta","thedailybeast","trklnks","pureadexchange","digitaltrends","sapo","tomshardware","quizlet","android","rev2pub","mackeeper","nbcsports","123rf","ruten","friv","yomiuri","indianexpress","gamepedia","prpops","intel","deezer","deviantart","bluehost","qvc","tutorialspoint","allocine","offpageads","eastmoney","india","india-mmm","indiammm","roblox","fishki","adme","genius","ew","vodlocker","seasonvar","tsite","ebates","audible","rakuten","almasryalyoum","welt","google","google","thehindu","yadi","nasa","mapquest","idnes","news","tagged","dafont","4pda","ebay","banggood","etao","chexun","sex","google","haberturk","yandex","digg","carview","cqnews","prezi","match","ampclicks","as","ultimate-guitar","ultimateguitar","ccm","topix","admtpmp124","usmagazine","monster","lapatilla","admtpmp123","fandango","indianrail","coupons","189","2chblog","sky","yaplakal","yellowpages","wiley","rarbg","whitepages","mysmartprice","entrepreneur","google","id","istockphoto","ea","walgreens","toysrus","mynavi","noaa","sankei","cnblogs","immobilienscout24","mackolik","pagesjaunes","weather","kotaku","google","basecamp","clarin","quanjing","folha","lolesports","otto","nairaland","lun","fanpage","bt","forever21","vine","marriott","pchome","padsdel","thisav","stg","staging","msgstore","dev","development","prod","production","login","signin","signup","status","www","not-found","support","contact","account","app","api","partner","partners","company","developer","design","art","marketing","conference","business","integrations","privacy","security","events","reviews","review","overview","integration","integrations","downloads","webinar","features","feature","news","contact","legal","privacy","gallery","blog","update","updates","champions","guides","help","releases","sites","marketplace","marketplaces","oauth2","faces"].flatMap((function(e){const t=e.replace("'","").toLowerCase();let a=[t];t.includes("&")&&(a=[t.replace("&","and"),t.replace("&","")]),t.includes("and")&&a.push(t.replace("and","")),t.includes(".com")&&a.push(t.replace(".com","dotcom"));for(const i of Kl)for(const e of a)e.endsWith(i)&&a.push(e.slice(0,e.length-i.length));return a.map((e=>e.replace(/[^a-z0-9]/g,"")))})));function Wl(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Ol().U.has(e)||ql.has(e)||(0,Re().IF)(e)||!t&&e.includes("notion")}a(30005);var Gl=()=>a(446866);function $l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e)throw new(Ii().XV)("Missing name",{type:"template_creator_missing_name"});if(e.length>v().Oh)throw new(Ii().XV)("Name too long",{type:"template_creator_name_too_long"});Xl(e,t)}function Yl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e)throw new(Ii().XV)("Missing handle",{type:"template_creator_missing_handle"});if(e.length>v().Oh)throw new(Ii().XV)("Handle too long",{type:"template_creator_handle_too_long"});if(!/^[a-z0-9_-]+$/.test(e))throw new(Ii().XV)("Invalid handle",{type:"template_creator_invalid_handle"});Xl(e,t)}function Xl(e,t){if(Wl(e.toLowerCase(),!0))throw new(Ii().XV)("Name is not allowed",{type:"template_creator_name_reserved"});if(!t.includes(e)&&(0,Oa().f)(e))throw new(Ii().XV)("Name is not allowed",{type:"template_creator_name_not_allowed"})}function Jl(e){if(!e)throw new(Ii().XV)("Missing description",{type:"template_creator_missing_description"});if(e.length>v()._h)throw new(Ii().XV)("Description too long",{type:"template_creator_description_too_long"})}function Ql(e){if(void 0!==e&&0===e.trim().length)throw new(Ii().XV)("Missing email",{type:"template_creator_missing_email"});if(e&&!(0,Gl().oH)((0,Gl().H3)(e)))throw new(Ii().XV)("Invalid email",{type:"template_creator_invalid_email"})}function ed(e){if(e){if(e.length>v().G6)throw new(Ii().XV)("Invalid link",{type:"template_creator_link_too_long"});if(!new RegExp(/^(https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/g).test(e))throw new(Ii().XV)("Invalid link",{type:"template_creator_invalid_link"})}}function td(e){if(e&&!e.startsWith("https://s3.us-west-2.amazonaws.com/public.notion-static.com")&&!e.startsWith("https://s3-us-west-2.amazonaws.com/public.notion-static.com"))throw new(Ii().XV)("Url is not notion secured URL",{type:"template_creator_invalid_image_url"})}function ad(e){const{creator:t,usernameAllowlist:a,nameAllowlist:i}=e;$l(t.name,i),Yl(t.handle,a),Jl(t.creatorDescription),Ql(t.contactEmail),t.links.forEach((e=>ed(e))),td(t.image),td(t.coverImage)}var id=()=>a(896174);function rd(e){nd({value:e,validationFunction:e=>{if(""!==e&&!(0,zl().Z)(e))throw new(Ii().XV)("Webhook URL invalid",{type:"template_creator_webhook_url_invalid"})},fieldName:"webhookUrlErrorMessage"})}function nd(e){const{value:t,validationFunction:a,fieldName:i}=e;try{a(t)}catch(r){if((0,Ii().Cx)(r)){const t=(0,Pa().nX)(z().Z.getIntl(),r.body);t&&od("linksErrorMessage"===i?{fieldName:i,errorMessage:t,linkIndex:e.linkIndex}:{fieldName:i,errorMessage:t})}}}function od(e){const{fieldName:t,errorMessage:a}=e;if("linksErrorMessage"===t){const i=La.getState().linksErrorMessage;i[e.linkIndex]=a,La.setState({...La.getState(),[t]:[...i]})}else La.setState({...La.getState(),[t]:a})}function sd(e){const{errorFieldName:t}=e;if("linksErrorMessage"===t){const a=La.getState().linksErrorMessage;a[e.linkIndex]=void 0,La.setState({...La.getState(),[t]:a})}else La.setState({...La.getState(),[t]:void 0})}function ld(e){let t=[];if(e.length<5){const a=5-e.length;t=[...Array(a)].map((()=>""))}return[...e,...t]}function dd(e){return e.preventDefault(),e.returnValue=""}function cd(){return(0,k.jsx)(d()._H,{defaultMessage:"Save",id:"creatorProfile.confirmNavigation.confirm"})}function ud(){return(0,k.jsx)(d()._H,{defaultMessage:"Discard and Exit",id:"creatorProfile.confirmNavigation.reject"})}function pd(){return(0,k.jsx)(d()._H,{defaultMessage:"Continue",id:"creatorProfile.confirmNavigation.confirm.continue"})}function gd(){return(0,k.jsx)(d()._H,{defaultMessage:"Keep Editing",id:"creatorProfile.confirmNavigation.reject.edit"})}function md(e){const{isActive:t,onAccept:a,onReject:r,onFinal:n,acceptLabel:s,rejectLabel:l}=e,{onBeforeViewChange:u}=Ge(),p=(0,o().yK)((()=>({header:{fontSize:"24px",lineHeight:"30px",fontWeight:L().Ue.bold,display:"flex",gap:"16px",flexDirection:"column"},description:{color:c().ZP.black}})),[]),g=(0,i.useMemo)((()=>({message:(0,k.jsxs)("div",{style:p.header,children:[(0,hr().t)({height:"28px",width:"28px",color:"rgba(234, 79, 68, 1)"}),(0,k.jsx)(d()._H,{defaultMessage:"Unsaved changes",id:"creatorProfile.confirmNavigation.header"})]}),description:(0,k.jsx)("div",{style:p.description,children:(0,k.jsx)(d()._H,{defaultMessage:"Your changes will be discarded if you exit this page without saving.",id:"creatorProfile.confirmNavigation.description"})}),acceptLabel:s,cancelLabel:l})),[p.description,p.header,s,l]),m=(0,i.useCallback)((()=>async function(e){const{isActive:t,onAccept:a,onReject:i,onFinal:r,userActionArgs:n}=e;t&&((await _().gt(n)).accept?await a():await i(),await r())}({isActive:t,onAccept:async()=>{await a()},onReject:async()=>{r&&await r()},onFinal:async()=>{n&&await n(),u.current=null},userActionArgs:g})),[t,a,u,n,r,g]);(0,i.useEffect)((()=>(t?(u.current=m,window.addEventListener("beforeunload",dd)):(u.current=null,window.removeEventListener("beforeunload",dd)),()=>{u.current=null,window.removeEventListener("beforeunload",dd)})),[t,u,m])}var fd=()=>a(209439);function hd(e){return(0,n().VK)((()=>{const t=e.state,a=t.initialValues,i=(0,V().Yd)(a).reduce(((e,a)=>({...e,[a]:t[a]})),{});return!(0,kt().Xy)(i,a)}),[e])}function bd(e){const{onboardingStatus:t,setOnboardingStatus:a}=e,i=(0,o().yK)((e=>({sectionTitle:{fontSize:24,fontWeight:L().Ue.semibold},sectionSubtitle:{fontSize:15,fontWeight:455},red_circle:{color:"#D30000"},light_green_circle:{color:"#1Fd655"},dark_green_circle:{color:"#0B6E4F"},yellow_circle:{color:"#FFF200"},black_circle:{color:"#000000"},delayText:{fontSize:12,color:e.lightTextColor,width:"max-content"},container:{display:"flex",flexDirection:"column",gap:4,alignSelf:"flex-start",width:"max-content"},inlineLink:{color:e.regularTextColor,fontWeight:L().Ue.bold},caption:{fontSize:12,color:"rgba(17, 17, 17, 0.5)"},inlineEmailLink:{color:"rgba(17, 17, 17, 0.5)",fontWeight:L().Ue.semibold}})),[]),r=(0,d().YB)();return(0,k.jsxs)(to().jX,{gap:16,padding:"0 0 24px 0",width:"hug",children:[(0,k.jsxs)(to().jX,{gap:2,children:[(0,k.jsx)("div",{style:i.sectionTitle,children:r.formatMessage(yd.sellWithNotionTitle)}),(0,k.jsx)("div",{style:i.sectionSubtitle,children:r.formatMessage(yd.sellWithNotionSubtitle,{link:e=>(0,k.jsx)(aa().Z,{href:Dn()._j.sellerOnboardingLearnMore,external:!0,style:i.inlineLink,disableUnderline:!0,children:e})})})]}),(0,k.jsxs)(to().jX,{gap:10,direction:"column",align:"center-left",width:"hug",children:[(0,k.jsx)(Aa,{onboardingStatus:t,setOnboardingStatus:a}),(0,k.jsx)("div",{style:i.caption,children:r.formatMessage(yd.sellWithNotionCaption,{link:e=>(0,k.jsx)(aa().Z,{href:`mailto:${v().nB}`,external:!0,style:i.inlineEmailLink,disableUnderline:!0,children:e})})})]})]})}const yd=(0,d().vU)({sellWithNotionTitle:{id:"creatorProfileForm.seller.onboarding.title",defaultMessage:"Sell with Notion"},beginOnboarding:{id:"creatorProfileForm.seller.onboarding.begin",defaultMessage:"Begin {accountType} Onboarding"},status:{id:"creatorProfileForm.seller.onboarding.status",defaultMessage:"Onboarding Status: {status}"},stripeDashboard:{id:"creatorProfileForm.seller.onboarding.dashboard",defaultMessage:"Seller Dashboard"},delayText:{id:"creatorProfileForm.seller.onboarding.delayText",defaultMessage:"Please allow a few minutes for onboarding status to update"},sellWithNotionSubtitle:{id:"creatorProfileForm.seller.onboarding.commissionDisclaimer",defaultMessage:"Process payments via Notion with a low commission rate. <link>Learn more</link>"},sellWithNotionCaption:{id:"creatorProfileForm.seller.onboarding.caption",defaultMessage:"Notion has partnered with Stripe to provide a seamless payment experience for creators. If you run into any issues, please contact <link>templates@makenotion.com</link>."}});function vd(){return(0,k.jsx)(I,{children:(0,k.jsx)(d()._H,{id:"creatorProfile.templates.form.deleteSuccess",defaultMessage:"Template deleted successfully"})})}function xd(){return(0,k.jsx)(I,{children:(0,k.jsx)(d()._H,{id:"creatorProfile.templates.draft.form.discardSuccess",defaultMessage:"Template draft discarded successfully"})})}function _d(){return(0,k.jsx)(I,{children:(0,k.jsx)(d()._H,{id:"creatorProfile.form.save.success",defaultMessage:"Profile updated successfully"})})}function wd(){return(0,k.jsx)(I,{children:(0,k.jsx)(d()._H,{id:"creatorProfileActions.createCreatorProfileSuccess",defaultMessage:"Profile created successfully. You can now upload templates and submit them to the Marketplace."})})}var Cd=()=>a(135499);const Sd=(0,d().vU)({uploadAvatar:{id:"creatorProfileForm.avatarUploadButton.label",defaultMessage:"Upload profile picture"}}),jd=function(e){const{disabled:t}=e,s=(0,r().O7)(),l=(0,o().yK)((e=>({uploader:{display:"flex",gap:15,alignItems:"center",justifyContent:"left"},uploadedImageContainer:{width:"56px",height:"56px"},uploadedImage:{width:"56px",height:"56px",objectFit:"cover",borderRadius:"50%",background:"rgba(0, 0, 0, 0.08)"},buttonsContainer:{display:"flex",alignItems:"center",gap:8},removeButton:{fontSize:13.5,color:e.lightTextColor},loadingSpinner:{marginLeft:4},avatarEmptyStateContainer:{display:"flex",justifyContent:"center",alignItems:"center",height:"56px",width:"56px",borderRadius:"50%",background:"rgba(0, 0, 0, 0.08)"},avatarEmptyState:{height:"40px",width:"40px",fill:"white"}})),[]),c=(0,n().VK)((()=>La.state.image),[]),u=(0,i.useCallback)((e=>La.setState({...La.state,image:e})),[]),p=(0,i.useCallback)((e=>{La.setState({...La.state,image:c||""}),_().UW(e.message),"upload"===e.type&&An().log({level:"error",from:"TemplateCreatorSubmissionFormIconUpload",type:"uploadError",error:(0,Vn().Ui)(e)})}),[c]),{uploadFile:g,isUploading:m}=(0,ls().FL)({onSuccess:u,onError:p,environment:s}),f=(0,i.useCallback)((()=>{La.setState({...La.state,image:""})}),[]);return(0,k.jsxs)("div",{style:l.uploader,children:[c?(0,k.jsx)(Cd().Z,{url:c,isAuthenticated:!1,stripGoogleIconQuery:!0,width:56,render:(e,t)=>(0,k.jsx)("div",{style:l.uploadedImageContainer,children:(0,k.jsx)(Tr().ZP,{src:t,style:l.uploadedImage})})}):(0,k.jsx)("div",{style:l.avatarEmptyStateContainer,children:(0,a(421887).f)(l.avatarEmptyState)}),(0,k.jsxs)("div",{style:l.buttonsContainer,children:[(0,k.jsxs)(Ji().z,{disabled:m||t,onClick:g,variant:"light",children:[(0,k.jsx)(d()._H,{...Sd.uploadAvatar}),m&&(0,k.jsx)(Si().Z,{style:l.loadingSpinner})]}),c?(0,k.jsx)(Ji().z,{disabled:m||t,variant:"neutral",style:l.removeButton,onClick:f,children:(0,k.jsx)(d()._H,{id:"templateCreator.removeButton.label",defaultMessage:"Remove"})}):null]})]})};function Md(e){const{actionType:t,handleUpload:a,handleRemove:i,isUploading:r,isDisabled:n}=e,o=kd();return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(Ji().z,{disabled:n,onClick:a,variant:"light",children:["change"===t?(0,k.jsx)(d()._H,{...Id.changeCoverImage}):(0,k.jsx)(d()._H,{...Id.uploadCoverImage}),r&&(0,k.jsx)(Si().Z,{style:o.loadingSpinner})]}),"change"===t?(0,k.jsx)(Ji().z,{disabled:n,variant:"light",onClick:i,children:(0,k.jsx)(d()._H,{id:"templateCreator.removeButton.label",defaultMessage:"Remove"})}):null]})}function kd(){return(0,o().yK)((e=>({uploader:{display:"flex",gap:15,alignItems:"center",marginBottom:"8px"},uploadedImage:{width:"100%",height:"100%",objectFit:"cover"},loadingSpinner:{marginLeft:4},uploadActionContainer:{right:8,bottom:8,position:"absolute",gap:8,display:"flex"},imagePreviewContainer:{width:"100%",height:"auto",aspectRatio:4,position:"relative",background:"rgba(0, 0, 0, 0.08)",display:"flex",justifyContent:"center",borderRadius:"6px",overflow:"hidden"},uploadEmptyState:{textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"2px"},uploadEmptyStateIcon:{height:18,width:18,fill:"rgba(102, 102, 102, 1)",paddingBottom:"2px"},uploadEmptyStateTitle:{fontSize:"13.5px",weight:554,lineHeight:"19px",color:"rgba(102, 102, 102, 1)"},uploadEmptyStateSubtitle:{fontSize:"12px",weight:459,lineHeight:"17px",color:"rgba(17, 17, 17, 0.5)"}})),[])}const Id=(0,d().vU)({uploadCoverImage:{id:"creatorProfileForm.coverPhotoUploadButton.label",defaultMessage:"Upload cover image"},changeCoverImage:{id:"creatorProfileForm.coverPhotoUploadButton.label.change",defaultMessage:"Change cover image"}}),Td=function(e){const{disabled:t}=e,a=(0,n().VK)((()=>La.state.coverImage),[]),o=(0,i.useCallback)((e=>{La.setState({...La.state,coverImage:e})}),[]),s=(0,i.useCallback)((e=>{La.setState({...La.state,coverImage:""}),_().UW(e.message),"upload"===e.type&&An().log({level:"error",from:"TemplateCreatorSubmissionFormCoverPhotoUpload",type:"uploadError",error:(0,Vn().Ui)(e.error)})}),[]),l=(0,r().O7)(),c=kd(),{uploadFile:u,isUploading:p}=(0,ls().FL)({onSuccess:o,onError:s,environment:l}),g=(0,i.useCallback)((()=>{La.setState({...La.state,coverImage:""})}),[]);return(0,k.jsx)("div",{style:c.uploader,children:a?(0,k.jsx)(Cd().Z,{url:a,isAuthenticated:!1,stripGoogleIconQuery:!0,width:650,render:(e,a)=>(0,k.jsxs)("div",{style:c.imagePreviewContainer,children:[(0,k.jsx)(Tr().ZP,{src:a,style:c.uploadedImage}),(0,k.jsx)("div",{style:c.uploadActionContainer,children:(0,k.jsx)(Md,{handleUpload:u,handleRemove:g,isUploading:p,isDisabled:p||!!t,actionType:"change"})})]})}):(0,k.jsxs)("div",{style:c.imagePreviewContainer,children:[(0,k.jsxs)("div",{style:c.uploadEmptyState,children:[(0,k.jsx)("div",{children:ss(c.uploadEmptyStateIcon)}),(0,k.jsx)("div",{style:c.uploadEmptyStateTitle,children:(0,k.jsx)(d()._H,{defaultMessage:"Upload Header Image",id:"creatorProfile.coverImage.uploadEmptyState"})}),(0,k.jsx)("div",{style:c.uploadEmptyStateSubtitle,children:(0,k.jsx)(d()._H,{defaultMessage:"1920 × 480 • Max 2MB",id:"creatorProfile.coverImage.uploadEmptyStateInfo"})})]}),(0,k.jsx)("div",{style:c.uploadActionContainer,children:(0,k.jsx)(Md,{actionType:"upload",handleUpload:u,isUploading:p,isDisabled:p||!!t})})]})})},Pd=75;function Dd(e){const{type:t,templateCreatorProfile:a,marketplaceSellerProfile:o}=e,s=(0,d().YB)(),l=(0,r().O7)(),c=Hd(),u=Bd(),{setView:p}=Ge(),g=(0,i.useRef)(null),m=(0,i.useRef)(null),f=(0,fe().h)(),[h,y]=(0,i.useState)(!1),[v,w]=(0,i.useState)(!1),[S,j]=(0,i.useState)(!1),[M,I]=(0,i.useState)(""),[T,P]=(0,i.useState)(1),[D,L]=(0,i.useState)((null==f?void 0:f.stripe_connect_onboarding_phase)??"disabled"),E=na(),R=(0,zn().E)("enable_marketplace_seller")&&E,{name:U,handle:B,contactEmail:H,creatorDescription:F,nameErrorMessage:Z,handleErrorMessage:A,contactEmailErrorMessage:V,creatorDescriptionErrorMessage:N,linksErrorMessage:O,contactEmailToggleError:K,webhookUrl:q,webhookUrlErrorMessage:W}=(0,n().VK)((()=>{const{name:e,handle:t,contactEmail:a,creatorDescription:i,nameErrorMessage:r,handleErrorMessage:n,contactEmailErrorMessage:o,creatorDescriptionErrorMessage:s,linksErrorMessage:l,contactEmailToggleError:d,webhookUrl:c,webhookUrlErrorMessage:u}=La.state;return{name:e,handle:t,contactEmail:a,creatorDescription:i,nameErrorMessage:r,handleErrorMessage:n,contactEmailErrorMessage:o,creatorDescriptionErrorMessage:s,linksErrorMessage:l,contactEmailToggleError:d,webhookUrl:c,webhookUrlErrorMessage:u}}),[]),G=(0,n().VK)((()=>b().default.state.currentUserStore),[]),$=(0,n().VK)((()=>null==G?void 0:G.getEmail()),[G]),Y=(0,fd().n)();(0,i.useEffect)((()=>{var e,t;a&&(!function(e,t){var a,i,r,n,o;if(null===e)return;const s=(null===(a=e.attributes)||void 0===a?void 0:a.links)||[...Array(5)].map((()=>"")),l={name:e.name||"",handle:e.username||"",contactEmail:(null===(i=e.attributes)||void 0===i?void 0:i.contactEmail)||"",creatorDescription:(null===(r=e.attributes)||void 0===r?void 0:r.description)||"",image:(null===(n=e.attributes)||void 0===n||null===(n=n.image)||void 0===n?void 0:n.url)||"",links:ld(s.filter((e=>!!e))),coverImage:(null===(o=e.attributes)||void 0===o||null===(o=o.cover_image)||void 0===o?void 0:o.url)||"",webhookUrl:t||"",webhookUrlTested:!1};La.setState({...La.getInitialState(),...l,initialValues:{...l}})}(a,null==o||null===(e=o.webhook_config)||void 0===e?void 0:e.all),j(Boolean(null===(t=a.attributes)||void 0===t?void 0:t.contactEmail)),I(a.username||""),y(!0))}),[a,o]),(0,i.useEffect)((()=>{!S&&h&&La.setState({...La.state,contactEmail:""})}),[S,h]),(0,i.useEffect)((()=>{var e;K&&(j(!0),null===(e=m.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center"}))}),[K]);const X=[Z,A,V,N,W,...O.filter((e=>Boolean(e)))].filter((e=>Boolean(e))).length,J=hd(La);md({isActive:J,onAccept:()=>Promise.resolve(),onReject:()=>{throw new Error("abandon_route")},acceptLabel:(0,k.jsx)(pd,{}),rejectLabel:(0,k.jsx)(gd,{})});const Q=(0,i.useMemo)((()=>({...u.textInput,...v?u.disabledInput:{}})),[u.textInput,u.disabledInput,v]);if(null===t)return null;const ee=v||!J;return(0,k.jsxs)("div",{children:[(0,k.jsx)(Ee().t,{size:"large",header:(0,k.jsx)(d()._H,{id:"creatorProfileForm.title",defaultMessage:"Creator Profile"}),subHeader:(0,k.jsxs)("div",{style:c.subheaderContainer,children:[(0,k.jsx)(d()._H,{id:"creatorProfileForm.subTitle",defaultMessage:"Information here is separate from your Notion account profile. Items with asterisk * are required."}),a&&(0,k.jsx)(k.Fragment,{children:a&&Y?(0,k.jsx)(Et().Z,{href:(0,Nl().D2)(a.username),external:!0,children:(0,k.jsx)("span",{style:c.viewProfileText,children:(0,k.jsx)(d()._H,{id:"creatorProfileForm.viewProfile.label",defaultMessage:"View Profile↗"})})}):(0,k.jsx)("span",{style:c.noPublishedTemplatesText,children:(0,k.jsx)(d()._H,{id:"creatorProfileForm.noPublishedTemplates.label",defaultMessage:"Your creator profile will be available at {url} after you have at least one published template.",values:{url:(0,Nl().D2)(a.username)}})})})]})}),(0,k.jsx)(er,{count:X,ref:g}),(0,k.jsxs)("div",{style:c.basicInformation,children:[(0,k.jsx)(Td,{disabled:v}),(0,k.jsx)("div",{style:c.avatarUploadContainer,children:(0,k.jsx)(jd,{disabled:v})}),(0,k.jsxs)("div",{style:c.creatorProfileContainer,children:[$&&(0,k.jsx)(ar().w,{htmlLabel:"currentEmail",label:s.formatMessage(Fd.notionAccount),value:$,type:"text",style:{...u.textInput,...u.disabledInput},disabled:!0,format:or().B.Default}),(0,k.jsx)(ar().w,{htmlLabel:"creatorDisplayName",value:U,format:or().B.Default,placeholder:s.formatMessage(Fd.displayNamePlaceholderWithIntegration),type:"text",style:Q,onFocus:()=>sd({errorFieldName:"nameErrorMessage"}),onChange:e=>{La.setState({...La.state,name:e.target.value})},onBlur:e=>{!function(t){nd({value:t,validationFunction:e=>{$l(e,qn().default.getConfigKey("creator_profile_allowlist","names"))},fieldName:"nameErrorMessage"});try{if(La.state.initialValues.name!==t&&Wl(t.toLowerCase(),!1))throw new(Ii().XV)("Name is not allowed",{type:"template_creator_name_reserved"})}catch(e){if((0,Ii().Cx)(e)){const a=(0,Pa().nX)(z().Z.getIntl(),e.body);a&&od({fieldName:"nameErrorMessage",errorMessage:a})}}}(e.target.value)},disabled:v,label:s.formatMessage(Fd.displayName),error:Z,children:(0,k.jsx)("div",{style:u.helperText,children:s.formatMessage(Fd.displayNameHelperText)})}),(0,k.jsx)(ar().w,{htmlLabel:"handle",value:`@${B}`,placeholder:"@",type:"text",style:Q,onFocus:()=>sd({errorFieldName:"handleErrorMessage"}),onChange:e=>La.setState({...La.state,handle:e.target.value.replace("@","")}),onBlur:async e=>{const t=e.target.value.replace("@","");""!==M&&t===M||await async function(t){const{environment:a,handle:i}=t;nd({value:i,validationFunction:e=>{Yl(e,qn().default.getConfigKey("creator_profile_allowlist","usernames"))},fieldName:"handleErrorMessage"});try{if(i!==La.state.initialValues.handle&&Wl(i.toLowerCase(),!1))throw new(Ii().XV)("Name is not allowed",{type:"template_creator_name_reserved"})}catch(e){if((0,Ii().Cx)(e)){const a=(0,Pa().nX)(z().Z.getIntl(),e.body);a&&od({fieldName:"handleErrorMessage",errorMessage:a})}}if(!La.getState().handleErrorMessage){const e=await x().callApi({eventName:"validateTemplateCreatorHandle",environment:a,data:{handle:i}});"success"!==e.type&&od({fieldName:"handleErrorMessage",errorMessage:(0,Pa().wf)(z().Z.getIntl(),e)})}}({environment:l,handle:t})},disabled:v,format:or().B.Default,label:s.formatMessage(Fd.handle),error:A}),(0,k.jsxs)("div",{style:c.emailContainer,ref:m,children:[(0,k.jsx)(Ed,{checked:S,onChange:()=>{j(!S),La.setState({...La.state,contactEmailErrorMessage:void 0})},disabled:v,onboardingStatus:D}),S&&(0,k.jsx)(ar().w,{htmlLabel:"contactEmail",label:s.formatMessage(Fd.email),error:V,format:or().B.Default,value:H,type:"email",style:Q,onFocus:()=>{La.setState({...La.state,contactEmailToggleError:!1,contactEmailErrorMessage:void 0})},onChange:e=>La.setState({...La.state,contactEmail:e.target.value}),onBlur:e=>{nd({value:e.target.value,validationFunction:Ql,fieldName:"contactEmailErrorMessage"})},disabled:v,children:(0,k.jsx)("div",{style:u.helperText,children:s.formatMessage(Fd.emailHelperText)})})]}),(0,k.jsx)(ar().w,{htmlLabel:"description",format:or().B.Default,label:s.formatMessage(Fd.creatorDescription),error:N,maxlength:280,value:F,type:"text",textarea:!0,style:Q,onFocus:()=>sd({errorFieldName:"creatorDescriptionErrorMessage"}),onChange:e=>{La.setState({...La.state,creatorDescription:e.target.value})},onBlur:e=>{nd({value:e.target.value,validationFunction:Jl,fieldName:"creatorDescriptionErrorMessage"})},disabled:v,showCharacterCounter:!0}),R&&(0,k.jsx)("div",{style:c.webhookInput,children:(0,k.jsx)(ar().w,{htmlLabel:"webhookUrl",format:or().B.Default,label:(0,k.jsx)(Rd,{}),error:W,maxlength:Pd,value:q,type:"text",style:Q,onFocus:()=>sd({errorFieldName:"webhookUrlErrorMessage"}),onChange:e=>{La.setState({...La.state,webhookUrl:e.target.value,webhookUrlTested:!1})},onBlur:e=>{rd(e.target.value)},disabled:v,showCharacterCounter:void 0===W,right:(0,k.jsx)(Ud,{})})})]})]}),(0,k.jsxs)("div",{style:c.remainingSections,children:[(0,k.jsx)(Ld,{intl:s,disabled:v,numberOfVisibleLinks:T,setNumberOfVisibleLinks:P}),(0,k.jsx)(bd,{onboardingStatus:D,setOnboardingStatus:L})]}),(0,k.jsx)("div",{style:c.submitSection,children:(0,k.jsx)(Ji().z,{variant:"dark",disabled:ee,onClick:async()=>{w(!0);const{initialValues:e,...a}=La.state;var i;if(X>0)null===(i=g.current)||void 0===i||i.scrollIntoView({behavior:"smooth"});else if(await async function(e){var t,a;const{environment:i,creator:r,onSuccess:n}=e,o={name:r.name.trim(),handle:r.handle.trim(),creatorDescription:null===(t=r.creatorDescription)||void 0===t?void 0:t.trim(),links:r.links.map((e=>kt().lf(e.trim(),"/"))).filter((e=>e.length>0)),contactEmail:null===(a=r.contactEmail)||void 0===a?void 0:a.trim(),image:r.image,coverImage:r.coverImage};try{ad({creator:o,usernameAllowlist:qn().default.getConfigKey("creator_profile_allowlist","usernames"),nameAllowlist:qn().default.getConfigKey("creator_profile_allowlist","names")})}catch(d){if((0,Ii().Cx)(d)){const e=(0,Pa().nX)(z().Z.getIntl(),d.body);if(e)return void _().UW(e)}}const s={...o,name:(0,id().Sl)("production",o.name),handle:(0,id().Sl)("production",o.handle)},l=await x().callApi({eventName:"submitTemplateCreator",environment:i,data:s});"success"!==l.type?_().x2(l):l.data.success?(me().default.setState({creatorId:l.data.creatorId}),null==n||n()):_().PV({message:"Failed to create or edit creator profile"})}({environment:l,creator:{...a,...!S&&{contactEmail:void 0}},onSuccess:()=>{!function(){const{name:e,handle:t,contactEmail:a,creatorDescription:i,links:r,image:n,coverImage:o,webhookUrl:s,webhookUrlTested:l}=La.state,d=ld(r.filter((e=>!!e))),c={name:e,handle:t,contactEmail:a,creatorDescription:i,links:d,image:n,coverImage:o,webhookUrl:s,webhookUrlTested:l};La.setState({...La.state,links:d,initialValues:{...c}})}(),P(1),"create"!==t?C().oV({label:(0,k.jsx)(_d,{})}):(C().oV({label:(0,k.jsx)(wd,{})}),p("/profile/templates",!0))}}),null!=o&&o.id&&R){const e=new(xt().Yl)(l,{table:Ll().We,id:o.id});Vl().createAndCommit({userAction:"creatorProfile.updateWebhookUrl",environment:l,perform:t=>{Vl().applyOperation({store:e,operation:{pointer:e.pointer,path:["webhook_config"],command:"update",args:{all:q}},transaction:t})}})}w(!1)},children:v?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(d()._H,{id:"creatorProfileForm.save.button.saving",defaultMessage:"Saving"}),(0,k.jsx)(Si().Z,{style:{marginLeft:4}})]}):(0,k.jsx)(d()._H,{id:"creatorProfileForm.save.button",defaultMessage:"Save"})})})]})}function Ld(e){const{intl:t,disabled:a,numberOfVisibleLinks:i,setNumberOfVisibleLinks:r}=e,o=Bd(),s=Hd(),{links:l,linksErrorMessage:d}=(0,n().VK)((()=>{const{links:e,linksErrorMessage:t}=La.state;return{links:e,linksErrorMessage:t}}),[]),c=function(e){const t=[...e];for(;t.length>0&&""===t[t.length-1];)t.pop();return t}(l);let u=c;return i>c.length?u=[...c,...kt().DZ(i-c.length,kt().a9(""))]:r(c.length),(0,k.jsxs)("div",{style:s.linksInputContainer,children:[(0,k.jsxs)("div",{style:s.linksTitleSection,children:[(0,k.jsx)("div",{style:s.sectionTitle,children:t.formatMessage(Fd.links)}),(0,k.jsx)("div",{style:s.linksSubTitle,children:t.formatMessage(Fd.linksHelperText)})]}),u.map(((e,i)=>(0,k.jsx)(ar().w,{htmlLabel:`link-${i}`,format:or().B.Default,label:t.formatMessage(Fd.link,{number:i+1}),error:d[i],value:e,placeholder:"https://",type:"url",style:{...o.textInput,...a?o.disabledInput:{}},onFocus:()=>sd({errorFieldName:"linksErrorMessage",linkIndex:i}),onChange:e=>{La.setState({...La.state,links:l.map(((t,a)=>a===i?e.target.value:t))})},onBlur:e=>function(e,t){nd({value:e,validationFunction:ed,fieldName:"linksErrorMessage",linkIndex:t})}(e.target.value,i),disabled:a},`link-${i}`))),(0,k.jsx)("div",{style:s.linksAddButton,children:(0,k.jsx)(wa().Z,{onClick:()=>{i>=5||(i>=c.length?r(i+1):r(c.length+1))},disabled:u.length>=5,children:t.formatMessage(Fd.addLinkButtonLabel)})})]})}function Ed(e){const{checked:t,onChange:a,disabled:i,onboardingStatus:r}=e,n=Bd();return(0,k.jsx)(Mi().Z,{name:(0,k.jsx)(d()._H,{defaultMessage:"Let people email me",id:"creatorProfileForm.allowPeopleToEmailMe"}),htmlLabel:"emailToggle",children:(0,k.jsx)(gr().Z,{placement:ts().Placement.Right,renderTooltip:()=>(0,k.jsx)(rt().q,{styleName:"UIRegular-14px/Regular",colorName:"contrastPrimary",children:(0,k.jsx)(d()._H,{id:"creatorProfileForm.email.tooltip",defaultMessage:"You must maintain a public email address as a Stripe verified seller"})}),render:e=>(0,k.jsx)("div",{...e,style:n.contactEmailToggle,children:(0,k.jsx)(ir,{isActive:t,onClick:a,disabled:i||"started"===r||"completed"===r})}),disableTooltip:"disabled"===r||"enabled"===r})})}function Rd(){const e=(0,d().YB)(),t=Hd();return(0,k.jsxs)("div",{style:t.webhookUrlLabel,children:[e.formatMessage(Fd.webhookUrl),(0,k.jsx)(gr().Z,{placement:ts().Placement.Bottom,allowHover:!0,delayThreshold:400,closeDelay:2e3,renderTooltip:()=>(0,k.jsxs)("div",{style:t.webhookUrlTooltip,children:[(0,k.jsx)(d()._H,{id:"creatorProfileForm.webhookUrl.tooltip",defaultMessage:"Register to receive Marketplace notifications."}),(0,k.jsx)(aa().Z,{href:Dn()._j.marketplaceWebhookLearnMore,external:!0,disableUnderline:!0,children:(0,k.jsx)(d()._H,{id:"creatorProfileForm.webhookUrl.tooltip.learnMore",defaultMessage:"Learn more →"})})]}),render:e=>(0,k.jsx)("div",{...e,children:(0,k.jsx)(we().y,{iconGroup:Bl().b,variantName:"small",colorName:"tertiary"})})})]})}function Ud(){const e=Hd(),[t,a]=(0,i.useState)(!1),o=(0,r().O7)(),[s,l]=(0,i.useState)(0),{webhookUrl:c,webhookUrlTested:u,webhookUrlErrorMessage:p}=(0,n().Kw)(La),g=(0,d().YB)();return(0,k.jsx)(ye().Z,{style:e.webhookTestButton,onClick:async()=>{if(rd(c),(0,V().$K)(p))return;const e=Date.now();if(e-s<fl().hM)La.setState({...La.state,webhookUrlErrorMessage:g.formatMessage(Fd.webhookTestButtonRateLimit)});else{l(e),a(!0);try{for await(const e of(0,Al().Lj)(o,Zl,{webhookUrl:c})){if(e.error){La.setState({...La.state,webhookUrlErrorMessage:g.formatMessage(Fd.webhookTestButtonError)});break}if(e.value.error&&e.value.statusCode){La.setState({...La.state,webhookUrlErrorMessage:`${g.formatMessage(Fd.webhookTestButtonInputError)} ${e.value.statusCode} (${e.value.error})`});break}La.setState({...La.state,webhookUrlTested:!0})}}finally{a(!1)}}},disabled:t||u,hoveredStyle:e.webhookTestButtonHovered,children:t?(0,k.jsxs)("div",{style:e.webhookTestInProgressButton,children:[(0,k.jsx)(Si().Z,{}),(0,k.jsx)(d()._H,{id:"creatorProfile.testWebhookUrlInProgressButton",defaultMessage:"Testing"})]}):u?(0,k.jsxs)("div",{style:e.webhookTestValidatedButton,children:[(0,k.jsx)(we().y,{iconGroup:mt().$,variantName:"mini",colorName:"bluePrimary"}),(0,k.jsx)(d()._H,{id:"creatorProfile.WebhookUrlValidatedButton",defaultMessage:"Validated"})]}):(0,k.jsx)(d()._H,{id:"creatorProfile.testWebhookUrlButton",defaultMessage:"Test"})})}function Bd(){return(0,o().yK)((e=>({textInput:{background:"transparent",fontSize:14,borderRadius:ki().Z.borderRadius,padding:"9px"},disabledInput:{color:e.accentColors.gray[400],background:e.accentColors.gray[30],cursor:"not-allowed"},textContainer:{padding:"1px"},helperText:{fontSize:12,color:e.lightTextColor},contactEmailToggle:{width:"fit-content"},inlineLink:{color:e.regularTextColor,fontWeight:L().Ue.bold}})),[])}function Hd(){return(0,o().yK)((e=>({webhookUrlLabel:{display:"flex",flexDirection:"row",alignItems:"center",gap:4},webhookInput:{display:"flex",flexDirection:"row"},subheaderContainer:{display:"flex",flexDirection:"column"},webhookUrlTooltip:{display:"flex",flexDirection:"row",alignItems:"center",gap:4},webhookTestButton:{color:e.blueColor,paddingLeft:"7px",paddingRight:"7px",borderRadius:"4px"},webhookTestInProgressButton:{color:e.text.secondary,display:"flex",flexDirection:"row",gap:"8px",alignItems:"center"},webhookTestValidatedButton:{display:"flex",flexDirection:"row",gap:"8px",alignItems:"center"},webhookTestButtonHovered:{background:e.accentColors.uiBlue[200]},viewProfileText:{color:e.accentColors.blue[500],fontSize:"13px"},noPublishedTemplatesText:{color:"rgba(17, 17, 17, 0.5)",fontSize:"13px"},sectionTitle:{fontSize:24,fontWeight:L().Ue.semibold},basicInformation:{marginTop:54,display:"flex",flexDirection:"column",marginBottom:72},creatorProfileContainer:{display:"flex",flexDirection:"column",gap:32},avatarUploadContainer:{marginTop:32,marginBottom:24},emailContainer:{display:"flex",flexDirection:"column",gap:"8px"},submitSection:{display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center",gap:12,marginTop:40,background:"white",padding:"10px 0 20px 0"},linksInputContainer:{display:"flex",flexDirection:"column",width:"100%",gap:24,marginBottom:24},linksTitleSection:{display:"flex",flexDirection:"column",gap:2},linksSubTitle:{fontSize:15},creatorDescriptionContainer:{display:"flex",flexDirection:"column",gap:4},linksAddButton:{width:"fit-content"},remainingSections:{display:"flex",flexDirection:"column",gap:72}})),[])}const Fd=(0,d().vU)({webhookTestButtonInputError:{id:"creatorProfileForm.webhookTestButtonInputError",defaultMessage:"Webhook URL destination returned an error:"},webhookTestButtonError:{id:"creatorProfileForm.webhookTestButtonError",defaultMessage:"Something went wrong"},webhookTestButtonRateLimit:{id:"creatorProfileForm.webhookTestButtonRateLimit",defaultMessage:"Please wait at least one minute before testing your webhook again."},webhookUrl:{id:"creatorProfileForm.creatorDetail.form.webhookUrl",defaultMessage:"Webhook URL"},notionAccount:{id:"creatorProfileForm.creatorDetail.form.notionAccount",defaultMessage:"Notion account"},displayName:{id:"creatorProfileForm.creatorDetail.form.name",defaultMessage:"Display name *"},displayNamePlaceholder:{id:"creatorProfileForm.creatorDetail.form.namePlaceholder",defaultMessage:"This is the name that will be associated on your template."},displayNamePlaceholderWithIntegration:{id:"creatorProfileForm.creatorDetail.form.namePlaceholderWithIntegration",defaultMessage:"This is the name that will be associated on your templates and integrations."},displayNameHelperText:{id:"creatorProfileForm.creatorDetail.form.nameHelperText",defaultMessage:"Can be different from your Notion account name. This can be the name of your company or organization."},handle:{id:"creatorProfileForm.creatorDetail.form.handle",defaultMessage:"Creator handle *"},email:{id:"creatorProfileForm.creatorDetail.form.email",defaultMessage:"Email"},emailHelperText:{id:"creatorProfileForm.creatorDetail.form.emailHelperText",defaultMessage:"Can be different from your Notion email. Will be publicly displayed."},creatorDescription:{id:"creatorProfileForm.creatorDetail.form.creatorDescription",defaultMessage:"A short description of yourself *"},links:{id:"creatorProfileForm.creatorDetail.form.links",defaultMessage:"Contact"},linksHelperText:{id:"creatorProfileForm.creatorDetail.form.linksHelperText",defaultMessage:"Display up to 5 links on your Profile."},link:{id:"creatorProfileForm.creatorDetail.form.link",defaultMessage:"Link {number}"},addLinkButtonLabel:{id:"creatorProfileForm.creatorDetail.form.addLinkButtonLabel",defaultMessage:"Add a Link"}});function Zd(){const e=(0,fe().h)(),t=function(){const{creatorId:e}=(0,n().Kw)(me().default),t=(0,r().O7)();return(0,n().VK)((()=>{if(!e)return null;const a=(0,Rl().T)({table:Ll().We,parentTable:El().zg,parentId:e}),i=new(Ul().Y)(t,{table:Ll().We,id:a});if(!(0,V().$K)(i))return null;const r=i.id,n=i.getWebhookConfig();return r?{id:r,webhook_config:n}:null}),[e,t])}(),{profileFormType:a}=(0,n().VK)((()=>ke.state),[]);(0,i.useEffect)((()=>{e&&ke.setState({profileFormType:"edit"})}),[e]);const s=(0,o().yK)((e=>({creatorInfoContainer:{position:"relative",flex:"400px",gap:"12px"},creatorInfoPrimaryHeader:{fontWeight:L().Ue.medium,fontSize:30,color:c().ZP.uiBlack},profileHandle:{color:c().ZP.frontTextMedium,fontSize:13.5},creatorInfoDescription:{fontSize:15,maxWidth:"600px"},creatorInfoCount:{color:c().ZP.frontTextMedium,fill:c().ZP.frontTextMedium,display:"flex",alignItems:"center",justifyContent:"flex-start",gap:"6px",fontSize:13.5}})),[]);return e||null!==a?(0,k.jsx)("section",{style:s.creatorInfoContainer,children:(0,k.jsx)(Dd,{type:a,templateCreatorProfile:e,marketplaceSellerProfile:t})}):(0,k.jsx)(Ad,{showCreatorProfileForm:()=>ke.setState({profileFormType:"create"})})}function Ad(e){const{showCreatorProfileForm:t}=e,a=(0,o().yK)((e=>({creatorInfoEmptyStateHeader:{fontSize:36,color:e.regularTextColor,fontWeight:L().Ue.semibold},creatorInfoEmptyStateDescription:{fontSize:16,color:e.regularTextColor},creatorInfoEmptyStateSubdescription:{fontSize:13.5,color:e.mediumTextColor}})),[]);return(0,k.jsx)(Te,{showCreatorProfileForm:t,header:(0,k.jsx)("div",{style:a.creatorInfoEmptyStateHeader,children:(0,k.jsx)(d()._H,{id:"creatorProfileEmptyState.creatorProfile.header",defaultMessage:"Creator Profile"})}),description:(0,k.jsx)("div",{style:a.creatorInfoEmptyStateDescription,children:(0,k.jsx)(d()._H,{id:"creatorProfileEmptyState.creatorProfile.description",defaultMessage:"Create a Creator Profile to submit and manage Notion templates."})}),subdescription:(0,k.jsx)("div",{style:a.creatorInfoEmptyStateSubdescription,children:(0,k.jsx)(d()._H,{id:"creatorProfileEmptyState.creatorProfile.subdescription",defaultMessage:"Your Creator profile is separate from your Notion user account."})})})}function Vd(){const e=(0,o().yK)((e=>({readFaq:{cursor:"pointer",color:e.regularTextColor,fontWeight:L().Ue.semibold}})),[]),{setView:t}=Ge();return(0,k.jsx)("span",{style:e.readFaq,onClick:()=>t("/profile/templates/faq"),children:(0,k.jsx)("a",{children:(0,k.jsx)(d()._H,{defaultMessage:"Read FAQ",id:"creatorProfile.templates.draftSubtitleLink"})})})}var Nd=()=>a(575861),zd=()=>a(652809),Od=()=>a(500721);function Kd(e){const t=(0,o().yK)((()=>({loadMoreContainer:{display:"flex",justifyContent:"center",marginTop:"24px"}})),[]),[a,s]=(0,i.useState)(1),c=(0,r().O7)(),{isStatsigReady:u,isFeatureEnabled:p}=(0,Xe().o)("self_serve_localization_frontend"),{name:g}=Ge(),m=(0,n().VK)((()=>{var e,t;const a=null===(e=b().default.state.currentUserSettingsStore)||void 0===e?void 0:e.id,i=oe().default.state;if(!a)return[];return(null===(t=i.draftTemplates[a])||void 0===t?void 0:t.templates)||[]}),[]),f=(0,n().VK)((()=>{var e,t;const a=null===(e=b().default.state.currentUserSettingsStore)||void 0===e?void 0:e.id;if(!a)return{};return null===(t=oe().default.state.draftTemplates[a])||void 0===t?void 0:t.templateDraftsByContentfulId}),[]),h=(0,n().VK)((()=>{var e,t;const a=null===(e=b().default.state.currentUserSettingsStore)||void 0===e?void 0:e.id;if(!a)return{};return null===(t=oe().default.state.draftTemplates[a])||void 0===t?void 0:t.contentfulIdToDefaultLocaleTemplateId}),[]),{totalUserDraftTemplatesCount:y,currentFetchedTemplateCount:v}=(0,n().VK)((()=>{var e;const t=null===(e=b().default.state.currentUserSettingsStore)||void 0===e?void 0:e.id;if(void 0===t)return{totalUserDraftTemplatesCount:0,currentFetchedTemplateCount:0};const a=oe().default.state.draftTemplates[t],i=(null==a?void 0:a.count)||0,r=(null==a?void 0:a.templates)||[];return{totalUserDraftTemplatesCount:i,currentFetchedTemplateCount:null==r?void 0:r.reduce(((e,t)=>e+t.length),0)}}),[]),_=y>v;return(0,l().r5)((async()=>u&&g?async function(e){var t;const{environment:a,page:i,groupByContentfulId:r}=e,n=a.currentUser.id,o=oe().default.state.draftTemplates;if(!n||null!=o&&null!==(t=o[n])&&void 0!==t&&t.templates[i-1])return;const s=await x().callApi({eventName:"getTemplateDrafts",environment:a,data:{offset:se*(i-1),limit:se,includeCount:!0,groupByContentfulId:r}});if("success"===s.type){const e=s.data.templateDraftIds,t=s.data.templateDraftsByContentfulId,a=s.data.contentfulIdToDefaultLocaleTemplateId;if(0===e.length)return;const r={...oe().default.state,draftTemplates:{...o,[n]:{count:s.data.count||0,templates:[...o[n]?o[n].templates.slice(0,i):[],e,...o[n]?o[n].templates.slice(i):[]],templateDraftsByContentfulId:{...o[n]?o[n].templateDraftsByContentfulId:{},...t},contentfulIdToDefaultLocaleTemplateId:{...o[n]?o[n].contentfulIdToDefaultLocaleTemplateId:{},...a}}}};oe().default.setState(r)}}({environment:c,page:a,groupByContentfulId:p}):async()=>Promise.resolve({})),[c,a,u,p,g]),(0,k.jsxs)("section",{children:[(0,k.jsx)(Ee().t,{header:(0,k.jsx)(d()._H,{id:"creatorProfile.templates.draftHeader",defaultMessage:"Drafts"}),subHeader:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(d()._H,{defaultMessage:"Start a template and submit for approval.",id:"creatorProfile.templates.draftSubtitle"})," ",(0,k.jsx)(Vd,{})]}),size:"medium"}),u?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(qr,{children:[(0,k.jsxs)(Fr,{href:"/profile/templates/form/new",shouldShowHoverBackground:!1,children:[(0,k.jsx)(Zr,{node:(0,k.jsx)($d,{})}),(0,k.jsx)(Nr,{title:(0,k.jsx)(qd,{})})]}),c.currentUser.id?m.map((e=>e.map((e=>(0,k.jsx)(Wd,{templateId:e,templateDraftGroupsByContentfulId:f,contentfulIdToDefaultLocaleTemplateId:h},e))))):null]}),_?(0,k.jsx)("div",{style:t.loadMoreContainer,children:(0,k.jsx)(Ji().z,{variant:"light",onClick:()=>s((e=>e+1)),children:(0,k.jsx)(d()._H,{id:"creatorProfile.draftTemplate.loadMore",defaultMessage:"Load more"})})}):null]}):(0,k.jsx)("div",{children:(0,k.jsx)(Si().Z,{})})]})}function qd(){const{isHovered:e,isTouchDevice:t}=Rr(),a=(0,o().yK)((()=>({draftTemplatesSubtitle:{color:c().ZP.frontTextLight},draftTemplatesSubtitleHovered:{color:c().ZP.black,fontWeight:L().Ue.medium}})),[]);return(0,k.jsx)("span",{style:e&&!t?a.draftTemplatesSubtitleHovered:a.draftTemplatesSubtitle,children:(0,k.jsx)(d()._H,{defaultMessage:"Start a New Template",id:"creatorProfile.templates.newTemplateCTA"})})}function Wd(e){var t;const{templateId:a,templateDraftGroupsByContentfulId:i,contentfulIdToDefaultLocaleTemplateId:o}=e,s=(0,r().O7)(),{isFeatureEnabled:l}=(0,Xe().o)("self_serve_localization_frontend"),{setView:c}=Ge(),u=(0,n().VK)((()=>{const e=new(xt().XG)(s,{table:"template_draft",id:a});return{name:e.getName(),status:e.getStatus(),image:e.getCoverImage(),lastUpdatedAt:e.getLastUpdatedAt(),price:e.getPrice(),slug:e.getSlug(),isPublished:(e.getPublishedVersion()||0)>0,contentfulId:e.getContentfulId()}}),[s,a]),p=u.contentfulId,g=function(e){const t=(0,r().O7)(),{isFeatureEnabled:a}=(0,Xe().o)("self_serve_localization_frontend");return(0,n().VK)((()=>e&&a?e.map((e=>{const a=new(xt().XG)(t,{table:Od().Az,id:e});return{name:a.getName(),locale:a.getLocale(),id:e,status:a.getStatus()}})):[]),[t,e,a])}(p?null==i?void 0:i[p]:[]),m=function(e){const t=(0,r().O7)();return(0,n().VK)((()=>e?new(xt().j$)(t,{table:"template",id:e}).getName():""),[t,e])}(p&&l?null==o?void 0:o[p]:void 0);if(u.isPublished)return null;const f=Oe("draft",a);return(0,k.jsxs)(Fr,{href:l?void 0:f,onClick:l?()=>c(f):void 0,actions:(0,k.jsx)(zr,{children:"in_review"===u.status?(0,k.jsx)(ur,{href:`/profile/templates/form/draft/${a}`,children:(0,k.jsx)(d()._H,{id:"creatorProfile.templates.button.viewTemplateDraft",defaultMessage:"View Submission"})}):(0,k.jsx)(ur,{href:`/profile/templates/form/draft/${a}`})}),children:[(0,k.jsx)(Zr,{imageSrc:null==u||null===(t=u.image)||void 0===t?void 0:t.url,node:null,topRightOverlay:(0,k.jsx)(Kr,{templateStatus:u.status})}),(0,k.jsx)(Nr,{title:(0,k.jsx)(Or,{templateName:l&&m?m:u.name||"",templateStatus:l?void 0:u.status}),subtitle:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Gd,{templatePrice:u.price,templateLastUpdatedAt:u.lastUpdatedAt,templateStatus:u.status}),l&&g.length>0&&(0,k.jsx)(Ir,{localizedTemplateDraftData:g,displaySection:"draft"})]})})]})}function Gd(e){const t=(0,d().YB)(),{templatePrice:a,templateLastUpdatedAt:i,templateStatus:r}=e,n=(0,o().yK)((()=>({draftTemplateSubtitleContainer:{display:"flex",alignItems:"center",gap:"5px",fontSize:"12px"},priceText:{fontWeight:L().Ue.medium,color:"rgba(0, 0, 0, 1)"},lastEditedText:{fontWeight:L().Ue.medium,color:"rgba(128, 128, 128, 1)"}})),[]);return(0,k.jsxs)("div",{style:n.draftTemplateSubtitleContainer,children:[void 0!==a&&(0,k.jsx)("span",{style:n.priceText,children:(0,k.jsx)(bt().W,{cost:{currencyCode:"USD",amount:100*a},trailingZeroDisplay:"auto",intl:t})}),void 0!==a&&void 0!==i&&(0,k.jsx)(Wr,{}),void 0!==i&&(0,k.jsx)("span",{style:n.lastEditedText,children:"rejected"===r?(0,k.jsx)(d()._H,{id:"creatorProfile.template.draft.lastRejected.label",defaultMessage:"Rejected {messageOfTimestampMs} ago",values:{messageOfTimestampMs:(0,Nd().Ct)(Date.now()-i,t)}}):(0,k.jsx)(d()._H,{id:"creatorProfile.template.draft.lastEdited.label",defaultMessage:"Last edited {messageOfTimestampMs} ago",values:{messageOfTimestampMs:(0,Nd().Ct)(Date.now()-i,t)}})}),(0,k.jsx)("span",{style:n.lastEditedText})]})}function $d(){const{isHovered:e,isTouchDevice:t}=Rr(),a=(0,o().yK)((()=>({createTemplateCTA:{backgroundColor:"#F6F5F4",height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",color:c().ZP.frontTextLight},circlePlusIcon:{height:"30px",width:"30px"},circlePlusIconHovered:{color:"rgba(102, 102, 102, 1)"}})),[]),i={...a.circlePlusIcon,...e&&!t?a.circlePlusIconHovered:{}};return(0,k.jsx)("div",{style:a.createTemplateCTA,children:(0,zd().e)(i)})}var Yd=()=>a(488850);const Xd=(0,Hl().LS)("exportMarketplacePurchases");var Jd=()=>a(491927),Qd=()=>a(369637),ec=()=>a(959003),tc=()=>a(764153);function ac(){const e=(0,r().O7)(),t=function(){const{isMobileWidth:e}=(0,m().EQ)();return(0,o().yK)((t=>({container:{display:"flex",flexDirection:e?"column":"row",justifyContent:"space-between",alignItems:e?"start":"center",borderWidth:1,borderStyle:"solid",borderColor:t.stroke.primary,borderRadius:8,paddingLeft:20,paddingRight:20,paddingTop:17.5,paddingBottom:17.5,gap:18,marginTop:52,marginBottom:52},leftContainer:{display:"flex",flexDirection:"row",justifyContent:"start",alignItems:"center",gap:18},madeASaleContainer:{display:"flex",flexDirection:"column",gap:4},madeASaleTitle:{fontSize:16,lineHeight:"24px",letterSpacing:-.15},madeASaleDescription:{color:t.mediumTextColor,lineHeight:"19px",fontSize:13.5},purchaseExportButtonContainer:{width:e?"100%":"auto",display:"flex",flexDirection:"row",justifyContent:"end",alignItems:"center"}})),[e])}(),a=(0,d().YB)(),[n,s]=(0,i.useState)(!1);(0,i.useEffect)((()=>{x().callApi({eventName:"getMarketplaceAcquisitionsCountByCreator",environment:e,data:{statuses:["succeeded","refunded"]}}).then((e=>{s(Boolean("success"===(null==e?void 0:e.type)&&e.data.success&&e.data.acquisitionCount>0))}))}),[e]);const l=(0,i.useCallback)((async()=>{await async function(e){let{environment:t,intl:a}=e;const i=(0,Al().Lj)(t,Xd,{statuses:["succeeded","refunded"]});Jd().Xe(t,{});const r=await i.next();if(r.value.error){const e=(0,Pa().HV)(a,r.value.error);Qd().m2({id:"marketplace_purchase_export_toast",title:a.formatMessage({id:"creatorProfile.templates.purchaseExport.error.toast.title",defaultMessage:"Something went wrong"}),message:e,presentationType:"transient",icon:tc().l})}else Qd().m2({id:"marketplace_purchase_export_toast",title:a.formatMessage({id:"creatorProfile.templates.purchaseExport.started.toast.title",defaultMessage:"Your CSV export is currently being generated"}),message:a.formatMessage({id:"creatorProfile.templates.purchaseExport.started.toast.message",defaultMessage:"Once it is ready, an email will be sent to you with the download link."}),presentationType:"transient",icon:ec().c})}({environment:e,intl:a})}),[e,a]);return n?(0,k.jsxs)("section",{style:t.container,children:[(0,k.jsxs)("div",{style:t.leftContainer,children:[(0,Yd().V)({width:24,height:24}),(0,k.jsxs)("div",{style:t.madeASaleContainer,children:[(0,k.jsx)("div",{style:t.madeASaleTitle,children:(0,k.jsx)(d()._H,{id:"creatorProfile.templates.madeASale.title",defaultMessage:"You’ve made a sale!"})}),(0,k.jsx)("div",{style:t.madeASaleDescription,children:(0,k.jsx)(d()._H,{id:"creatorProfile.templates.madeASale.description",defaultMessage:"Download a CSV of all of your sales from the Notion Marketplace"})})]})]}),(0,k.jsx)("div",{style:t.purchaseExportButtonContainer,children:(0,k.jsx)(wa().Z,{onClick:l,children:(0,k.jsx)(d()._H,{id:"creatorProfile.templates.purchaseExportButton",defaultMessage:"Download CSV"})})})]}):null}var ic=()=>a(133009);function rc(e){const{creatorId:t}=e,a=(0,r().O7)(),o=(0,d().YB)(),s=(0,fe().h)();(0,l().r5)((async()=>{await async function(e){var t;const{locale:a,templateCreatorProfile:i,environment:r}=e,n=(null==i||null===(t=i.attributes)||void 0===t?void 0:t.pinned_templates)??[],o=await x().callApi({eventName:"getCreatorTemplates",environment:r,data:{locale:(0,y().E2)(a),limit:v().zq,filterBy:{contentfulIds:n}}});if("success"===o.type){const e=o.data.templateIds;return oe().default.setState({...oe().default.state,pinnedTemplates:e}),!0}return!1}({locale:o,templateCreatorProfile:s,environment:a})}),[o,s,a]);const c=(0,n().VK)((()=>oe().default.state.pinnedTemplates),[]),u=(0,i.useCallback)((async(e,i)=>{await ce({environment:a,templateId:e,templateName:i,creatorId:t,type:"unpin"})}),[t,a]);return 0===c.length?null:(0,k.jsxs)("section",{children:[(0,k.jsx)(Ee().t,{size:"medium",header:(0,k.jsx)(d()._H,{id:"creatorProfile.templates.pinnedTemplatesHeader",defaultMessage:"{pinnedTemplatesCount} Pinned",values:{pinnedTemplatesCount:c.length}}),subHeader:(0,k.jsx)(d()._H,{id:"creatorProfile.templates.pinnedTemplatesSubheader",defaultMessage:"Pinned templates stay at the top of your profile, and appear in the order you pinned them."})}),(0,k.jsx)(qr,{children:c.map((e=>(0,k.jsx)(nc,{templateId:e,unpinTemplate:u},`pinnedTemplateCard-${e}`)))})]})}function nc(e){var t;const{templateId:a,unpinTemplate:i}=e,r=cr(a),n=(0,o().yK)((e=>({imageOverlayContainer:{position:"absolute",top:-6,left:-7},pinnedIconContainer:{height:20,width:20,borderRadius:"50%",backgroundColor:e.accentColors.orange[400],display:"flex",alignItems:"center",justifyContent:"center"},pinIcon:{width:7,height:11.38,color:e.white}})),[]);return(0,k.jsxs)(Fr,{href:`/profile/templates/form/published/${a}`,actions:(0,k.jsxs)(zr,{children:[(0,k.jsx)(oc,{unpinTemplate:i,templateId:a,templateName:r.name||""},`unpinPinnedTemplate-${a}`),(0,k.jsx)(ur,{href:`/profile/templates/form/published/${a}`})]}),children:[(0,k.jsx)(Zr,{imageSrc:null==r||null===(t=r.image)||void 0===t?void 0:t.url,node:null,topLeftOverlay:(0,k.jsx)("div",{style:n.imageOverlayContainer,children:(0,k.jsx)("div",{style:n.pinnedIconContainer,children:(0,k.jsx)("span",{children:(0,ic()._)(n.pinIcon)})})})}),(0,k.jsx)(Nr,{title:r.name,subtitle:(0,k.jsx)(Yr,{price:r.price,duplicationCount:r.numberDuplicates})})]})}function oc(e){const{unpinTemplate:t,templateId:a,templateName:i}=e;return(0,k.jsx)(j().Z,{isLightGray:!0,onClick:()=>t(a,i),children:(0,k.jsx)(d()._H,{id:"creatorProfile.templates.pinnedTemplates.button.unpin",defaultMessage:"Unpin"})},`unpin-button-${a}`)}var sc=()=>a(284337),lc=()=>a(617606),dc=()=>a(924172);const cc=(0,He().CZ)("arrowTurnUpLeft",{default:{loader:()=>a.e(10387).then(a.bind(a,410387))},small:{loader:()=>a.e(21582).then(a.bind(a,621582))},mini:{loader:()=>a.e(44468).then(a.bind(a,144468))},large:{loader:()=>a.e(92514).then(a.bind(a,992514))}});var uc=()=>a(567237),pc=()=>a(482962),gc=()=>a(292718);const mc={isOpen:!1,reviewId:void 0,currentCreatorResponse:void 0};class fc extends je().default{getInitialState(){return{...mc}}openModal(e,t){this.setState({...mc,isOpen:!0,reviewId:e,currentCreatorResponse:t})}closeModal(){this.setState(mc)}}const hc=new fc;function bc(e){let{reviewId:t,templateId:a,creatorAvatar:i}=e;const s=(0,r().O7)(),l=(0,o().yK)((()=>({templateCardImage:{alignSelf:"flex-start"}})),[]),{isCreatorResponseButtonVisible:d,creatorResponse:c}=(0,n().VK)((()=>{var e;const a=new(xt().wP)(s,{table:uc().ZI,id:t});return{isCreatorResponseButtonVisible:a.isDefined()&&(0,dc().AG)(a.getModel()),creatorResponse:null===(e=a.getSerializedCreatorResponse())||void 0===e?void 0:e.raw_value}}),[s,t]),{slug:u,imageUrl:p}=(0,n().VK)((()=>{var e;const t=new(xt().j$)(s,{table:"template",id:a});return{slug:t.getSlug(),imageUrl:null===(e=t.getTemplateImage())||void 0===e?void 0:e.url}}),[s,a]),g=(0,pc().EE)(u);return(0,k.jsxs)(Fr,{href:g,actions:d&&(0,k.jsx)(vc,{reviewId:t,creatorResponse:c}),children:[(0,k.jsx)(Zr,{imageSrc:p,node:null,style:l.templateCardImage}),(0,k.jsx)(gc().u,{reviewId:t,creatorAvatar:i,appearance:"narrow",isCreatorResponseTitleVisible:!0})]})}function yc(){const e=(0,o().yK)((()=>({container:{width:"100%",display:"flex",alignItems:"center",gap:"24px",borderRadius:"8px"},image:{width:"160px",height:"100px",borderRadius:"6px"}})),[]);return(0,k.jsxs)("div",{style:e.container,children:[(0,k.jsx)(Vt().Z,{style:e.image}),(0,k.jsx)(gc().Q,{})]})}function vc(e){let{reviewId:t,creatorResponse:a}=e;const i=(0,o().yK)((e=>({buttonGroup:{display:"flex",gap:"2px",borderRadius:"6px",padding:"2px",background:e.surface.elevated,boxShadow:`0px 0px 0px 1px ${e.stroke.secondary}, rgba(227, 226, 224, 0.50), 0px 2px 4px 0px rgba(0, 0, 0, 0.04)`}})),[]),r=(0,d().YB)(),n=Boolean(a)?r.formatMessage(xc.editLabel):r.formatMessage(xc.replyLabel);return(0,k.jsx)(zr,{children:(0,k.jsx)("div",{style:i.buttonGroup,children:(0,k.jsx)(gr().Z,{renderTooltip:e=>(0,k.jsx)("span",{...e,children:n}),render:e=>(0,k.jsx)(Xa().Z,{...e,icon:e=>(0,k.jsx)(we().y,{iconGroup:cc,variantName:"default",colorName:"secondary",style:e}),onClick:()=>hc.openModal(t,a),ariaLabel:n})})})})}const xc=(0,d().vU)({replyLabel:{id:"creatorProfile.templates.review.creatorResponse.replyLabel",defaultMessage:"Reply"},editLabel:{id:"creatorProfile.templates.review.creatorResponse.editLabel",defaultMessage:"Edit your reply"}});function _c(){const{isOpen:e,reviewId:t,currentCreatorResponse:a}=(0,n().Kw)(hc),r=(0,i.useCallback)((()=>{hc.closeModal()}),[]);return(0,k.jsx)(Ta().c,{isOpen:e,onDismiss:r,render:()=>{if(e)return(0,k.jsx)(wc,{reviewId:t,currentCreatorResponse:a})},showCloseIcon:!0})}function wc(e){let{reviewId:t,currentCreatorResponse:a}=e;const n=(0,r().O7)(),s=(0,o().yK)((e=>({container:{display:"flex",flexDirection:"column",gap:"20px",padding:"24px 28px",minWidth:"300px",width:"50vw",maxWidth:"650px"},header:{display:"flex",flexDirection:"column",gap:"8px"},reviewContainer:{borderRadius:"6px",border:"1px solid rgba(0, 0, 0, 0.04)",background:"rgba(246, 245, 244, 0.50)",padding:"20px"},input:{background:e.white},responseContainer:{display:"flex",flexDirection:"column",gap:"6px"},cancelButton:{height:"36px",fontWeight:500},footer:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"12px"}})),[]),c=(0,d().YB)(),[u,p]=(0,i.useState)(a||""),[g,m]=(0,i.useState)(""),[f,h]=(0,l().UK)((async()=>{try{(0,dc().Gp)(u),await x().callApi({eventName:"updateCreatorMarketplaceListingReview",environment:n,data:{reviewId:t,creatorResponse:u}}),hc.closeModal()}catch(e){if((0,Ii().Cx)(e)){const t=(0,Pa().nX)(c,e.body);return void(t&&m(t))}m(c.formatMessage({id:"creatorProfile.templateReviewResponseModal.error",defaultMessage:"Something went wrong. Please try again."}))}}),[c,n,t,u]),b=(0,i.useCallback)((()=>{hc.closeModal()}),[]),y=(0,i.useCallback)((e=>{p(e.target.value),m("")}),[]);return(0,k.jsxs)("form",{method:"dialog",style:s.container,children:[(0,k.jsxs)("div",{style:s.header,children:[(0,k.jsx)(rt().q,{styleName:"Title-24px/Bold",children:(0,k.jsx)(d()._H,{id:"creatorProfile.templateReviewResponseModal.title",defaultMessage:"Reply to review"})}),(0,k.jsx)(rt().q,{styleName:"Body-14px/Regular",children:(0,k.jsx)(d()._H,{id:"creatorProfile.templateReviewResponseModal.description",defaultMessage:"Write a short response to the feedback you've received on your template."})})]}),(0,k.jsx)("div",{style:s.reviewContainer,children:(0,k.jsx)(gc().u,{reviewId:t,appearance:"narrow",isCreatorResponseVisible:!1})}),(0,k.jsxs)("div",{style:s.responseContainer,children:[(0,k.jsx)(rt().q,{styleName:"Caption-12px/Regular",children:(0,k.jsx)(d()._H,{id:"creatorProfile.templateReviewResponseModal.responseHeading",defaultMessage:"Creator response"})}),(0,k.jsx)(or().Z,{textarea:!0,autosize:!0,ignoreKeyboardMode:!0,textareaSubmitOnEnter:!1,showClearButton:!1,autosizeMinHeight:140,value:u,onChange:y,placeholder:c.formatMessage({id:"creatorProfile.templateReviewResponseModal.responsePlaceholder",defaultMessage:"Hey there..."}),style:s.input}),g&&(0,k.jsx)(rt().q,{styleName:"Caption-12px/Regular",colorName:"redTertiary",children:g})]}),(0,k.jsxs)("div",{style:s.footer,children:[(0,k.jsx)(wa().Z,{onClick:b,style:s.cancelButton,children:(0,k.jsx)(d()._H,{id:"creatorProfile.templateReviewResponseModal.cancelButton",defaultMessage:"Cancel"})}),(0,k.jsx)(Ie().h,{onClick:h,isLoading:"pending"===f.status,disabled:Boolean(g),children:(0,k.jsx)(d()._H,{id:"creatorProfile.templateReviewResponseModal.submitButton",defaultMessage:"Submit reply"})})]})]})}const Cc=10;function Sc(){const e=(0,o().yK)((()=>({sortSelect:{width:"fit-content",marginBottom:"20px"},reviewsList:{display:"flex",flexDirection:"column",gap:"24px"},loadMore:{marginTop:"48px",marginLeft:"-8px"}})),[]),{ids:t,isEmpty:a,isLoadingMore:s,isFirstPageLoading:l,showLoadMoreButton:c,handleLoadMoreClick:u,sort:p,handleSortChange:g}=(0,sc().b)({getReviews:jc,limit:Cc}),m=function(){const e=(0,r().O7)();return(0,n().VK)((()=>{var t,a,i;const{creatorId:r}=me().default.state;let n;return r&&(n=new(lc().y)(e,{table:El().zg,id:r})),{email:null===(t=n)||void 0===t||null===(t=t.getAttributes())||void 0===t?void 0:t.contactEmail,name:null===(a=n)||void 0===a?void 0:a.getName(),avatarUrl:(null===(i=n)||void 0===i||null===(i=i.getAttributes())||void 0===i||null===(i=i.image)||void 0===i?void 0:i.url)??""}}),[e])}();return a?null:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{style:e.sortSelect,children:(0,k.jsx)(nt().Z,{items:kc,getKey:e=>e.value,onSelect:e=>g(e.val),selectedItem:kc.find((e=>e.val===p)),renderItem:e=>(0,k.jsx)(it().Z,{...e,title:e.key}),renderOrigin:e=>{var t;return(0,k.jsx)(lr().X,{focused:!1,title:null===(t=kc.find((e=>e.val===p)))||void 0===t?void 0:t.value,...e})}})}),(0,k.jsx)(qr,{children:t.map((e=>(0,k.jsx)(i.Fragment,{children:l||!("productId"in e)?(0,k.jsx)(yc,{}):(0,k.jsx)(bc,{reviewId:e.reviewId,templateId:e.productId,creatorAvatar:m})},e.reviewId)))}),c?(0,k.jsx)(j().Z,{onClick:u,isGray:!0,style:e.loadMore,isLoading:s,children:(0,k.jsx)(d()._H,{id:"creatorProfile.reviewList.viewAll",defaultMessage:"Load more"})}):null,(0,k.jsx)(_c,{})]})}async function jc(e){return await async function(e){let{environment:t,productTable:a,sort:i,offset:r,limit:n}=e;const o=await x().callApi({eventName:"getCreatorMarketplaceListingReviews",environment:t,data:{productTable:a,sort:(0,dc().n$)(i??"mostRecent"),limit:n,offset:r}});let s=[];return"success"===o.type&&o.data.success&&(s=o.data.ids),{ids:s}}({...e,productTable:yt().nE,limit:Cc})}const Mc=(0,d().vU)({mostRecent:{id:"creatorProfile.reviewList.mostRecent",defaultMessage:"Most recent"},highestRating:{id:"creatorProfile.reviewList.highestRating",defaultMessage:"High to low ratings"},lowestRating:{id:"creatorProfile.reviewList.lowestRating",defaultMessage:"Low to high ratings"}}),kc=[{value:z().Z.formatMessage(Mc.mostRecent),val:"mostRecent"},{value:z().Z.formatMessage(Mc.highestRating),val:"highestRating"},{value:z().Z.formatMessage(Mc.lowestRating),val:"lowestRating"}];var Ic=()=>a(448045);const Tc=(0,d().vU)({question1:{id:"templateSubmission.templateCreatorFaq.question1",defaultMessage:"How are templates reviewed?"},answer1:{id:"templateSubmission.templateCreatorFaq.answer1",defaultMessage:"The Notion team regularly reviews template submissions to maintain the quality of our gallery. You can learn more about the review process and qualifications for publication on the <term>Marketplace Guidelines and Terms</term> page."},question2:{id:"templateSubmission.templateCreatorFaq.question2",defaultMessage:"I’ve submitted my template. Now what?"},answer2:{id:"templateSubmission.templateCreatorFaq.answer2",defaultMessage:"We’ll review your template and send you an email if the template or the revision is accepted and published or rejected. This process can take 1-2 weeks."},question3:{id:"templateSubmission.templateCreatorFaq.question3",defaultMessage:"How many templates can a Notion user submit?"},answer3:{id:"templateSubmission.templateCreatorFaq.answer3",defaultMessage:"You can submit as many templates as you’d like."},question4:{id:"templateSubmission.templateCreatorFaq.question4",defaultMessage:"How do I change my creator profile information?"},answer4:{id:"templateSubmission.templateCreatorFaq.answer4",defaultMessage:"You can make changes to your creator profile, including the name, handle, image, links, and more at <submitProfile>https://www.notion.so/profile.</submitProfile>"},question5:{id:"templateSubmission.templateCreatorFaq.question5",defaultMessage:"Can I make updates to my template after submission?"},answer5:{id:"templateSubmission.templateCreatorFaq.answer5",defaultMessage:"You can make changes to your template itself any time after it’s been published in the gallery. To make changes to like the title, price, or description, simply edit the template in your creator profile and submit for review."},question6:{id:"templateSubmission.templateCreatorFaq.question6",defaultMessage:"Do I get to keep all the proceeds from a paid template?"},answer6:{id:"templateSubmission.templateCreatorFaq.answer6",defaultMessage:"Currently, Notion’s template gallery only supports payment through third-party sites. Revenue splits are subject to the individual terms and conditions described by those websites."},question7:{id:"templateSubmission.templateCreatorFaq.question7",defaultMessage:"I have questions about submitting templates or templates I’ve already submitted. Who can I contact?"},answer7:{id:"templateSubmission.templateCreatorFaq.answer7",defaultMessage:"For any and all things related to templates, simply email <supportEmail>templates@makenotion.com</supportEmail> and we’ll be happy to assist you!"},question8:{id:"templateSubmission.templateCreatorFaq.question8",defaultMessage:"What makes a good template?"},answer8:{id:"templateSubmission.templateCreatorFaq.answer8",defaultMessage:"<p>If you have a specific template or workflow you’d like to share with the community, we highly encourage you to create and submit a template!</p><p>Before you set off building and sharing, there are some important considerations for creating a template:</p><p>Good templates are useful. Templates are tools; tools solve a clear problem or need for someone. There’s both a clear audience for your template and a clear problem to be solved, and your template solves that problem.</p><p>Good templates are differentiated. Notion is more flexible than typical word document. Differentiated templates combine one or more of Notion’s core product types (docs, projects, and wikis), or are very clearly visually different than a basic word document.</p><p>Good templates are scalable. If your template is intended for team use, it should be able to work with more than just one person. There are a few key points to check to ensure scalability: If it’s intended for collaboration, what might this look like if you added 10 people? 50? 100? If you added content from the last two months, what would it look like? If you already have lots of stuff in your Notion, does it easily fit in?</p><p>Good templates have the basics. They’re inoffensive, use correct spelling, and are thoughtfully structured.</p>"},question9:{id:"templateSubmission.templateCreatorFaq.question9",defaultMessage:"Can I use my templates to get people to sign up to Notion and earn a commission?"},answer9:{id:"templateSubmission.templateCreatorFaq.answer9",defaultMessage:"Yes! You can do that by <affiliateLink>becoming a Notion Affiliate partner</affiliateLink>. Affiliates earn 50% commission for every new sign-up that upgrades to our Plus, Business, or AI plans, for 12 months. You can direct your affiliate links to anywhere on the Notion website, including your own templates."}});function Pc(e){let{faq:t}=e;const[a,r]=(0,i.useState)(!1),n=(0,o().yK)((e=>({faq:{borderBottom:`1px solid ${e.lightDividerColor}`},question:{margin:0,cursor:"pointer",display:"flex",alignItems:"center",width:"100%",justifyContent:"space-between"},questionText:{padding:"1em 20px 1em 0",fontWeight:L().Ue.semibold},answer:{paddingBottom:"1em"}})),[]);return(0,k.jsxs)("section",{style:n.faq,children:[(0,k.jsxs)("header",{style:n.question,role:"button","aria-pressed":a?"true":"false",onClick:()=>r((e=>!e)),children:[(0,k.jsx)("div",{style:n.questionText,children:t.question}),a?(0,Ic().$)({width:14,height:14}):(0,eo().R)({width:14,height:14})]}),a&&(0,k.jsx)("div",{style:n.answer,children:t.answer})]})}const Dc=function(){const e=(0,d().YB)(),t=[{question:e.formatMessage(Tc.question1),answer:e.formatMessage(Tc.answer1,{term:e=>(0,k.jsx)(aa().Z,{href:"https://www.notion.so/Template-Gallery-Guidelines-and-Terms-ec93f618c12d4f08b75b9132a7e55b33",external:!0,children:e})})},{question:e.formatMessage(Tc.question2),answer:e.formatMessage(Tc.answer2)},{question:e.formatMessage(Tc.question3),answer:e.formatMessage(Tc.answer3)},{question:e.formatMessage(Tc.question4),answer:e.formatMessage(Tc.answer4,{submitProfile:e=>(0,k.jsx)(aa().Z,{href:"https://www.notion.so/profile",children:e})})},{question:e.formatMessage(Tc.question5),answer:e.formatMessage(Tc.answer5,{supportEmail:e=>(0,k.jsx)(aa().Z,{href:"mailto:templates@makenotion.com",children:e})})},{question:e.formatMessage(Tc.question6),answer:e.formatMessage(Tc.answer6)},{question:e.formatMessage(Tc.question9),answer:e.formatMessage(Tc.answer9,{affiliateLink:e=>(0,k.jsx)(aa().Z,{href:"https://www.notion.com/affiliates",children:e})})},{question:e.formatMessage(Tc.question7),answer:e.formatMessage(Tc.answer7,{supportEmail:e=>(0,k.jsx)(aa().Z,{href:"mailto:templates@makenotion.com",children:e})})},{question:e.formatMessage(Tc.question8),answer:e.formatMessage(Tc.answer8,{p:e=>(0,k.jsx)("p",{children:e})})}],a=(0,o().yK)((e=>({faqWrap:{borderTop:`1px solid ${e.lightDividerColor}`}})),[]);return(0,k.jsx)("article",{style:a.faqWrap,children:t.length>0&&t.map(((e,t)=>(0,k.jsx)(Pc,{faq:e},`faq-${t}`)))})};function Lc(){const e=(0,o().yK)((()=>({templateFAQContainer:{display:"flex",flexDirection:"column",gap:36}})),[]);return(0,k.jsxs)("div",{style:e.templateFAQContainer,children:[(0,k.jsx)(Ee().t,{size:"large",header:(0,k.jsx)(d()._H,{id:"creatorProfile.templates.faq",defaultMessage:"Template Creator FAQ"}),subHeader:null}),(0,k.jsx)(Dc,{})]})}var Ec=a.n(a(968337)),Rc=a.n(a(809980)),Uc=a.n(a(391036)),Bc=()=>a(665553);const Hc=99,Fc=5e5;var Zc=()=>a(92025);function Ac(e){const{name:t,isExemptFromDisallowedWords:a,env:i}=e;if(!t)throw new(Ii().XV)("Missing name",{type:"template_missing_name"});if(t.length>v().Oh)throw new(Ii().XV)("Name too long",{type:"template_name_too_long"});if("production"===i&&!a){for(const e of v().yt)if(t.toLowerCase().includes(e))throw new(Ii().XV)("Name has template or notion in it.",{type:"template_name_invalid_words",messageValues:{word:e}});if(/\bfree\b/.test(t.toLowerCase()))throw new(Ii().XV)("Name has free",{type:"template_name_invalid_words",messageValues:{word:"free"}})}}function Vc(e){if(!e)throw new(Ii().XV)("Missing short description",{type:"template_missing_description"});if(e.length>v()._h)throw new(Ii().XV)("Short description too long",{type:"template_description_too_long"})}function Nc(e){if(!e)throw new(Ii().XV)("Missing long description",{type:"template_missing_long_description"});if(e.length>v().Pu)throw new(Ii().XV)("Long description too long",{type:"template_long_description_too_long"})}function zc(e){if(e&&e>=Fc/100)throw new(Ii().XV)("Paid templates must be less than $5000.00",{type:"template_above_maximum_price"})}function Oc(e){!function(e){if(e<0)throw new(Ii().XV)("Invalid price",{type:"template_invalid_price"})}(e),zc(e)}function Kc(e){!function(e){if(!e||e<Hc/100)throw new(Ii().XV)("Paid templates must be at least $0.99",{type:"template_below_minimum_price"})}(e),zc(e||0)}function qc(e){const{purchaseUrl:t,publicDomainName:a}=e;if(!t)throw new(Ii().XV)("Missing purchase url",{type:"template_missing_purchase_url"});if(t.length>=v().G6)throw new(Ii().XV)("Invalid purchase url",{type:"template_url_too_long"});try{const e=new URL(t);if("https:"!==e.protocol)throw new(Ii().XV)("Insecure purchase url",{type:"template_insecure_url"});if(e.host.endsWith(a))throw new(Ii().XV)("Notion page cannot be purchase url",{type:"template_notion_domain_as_purchase_url"});if(i=e.host,Wc.some((e=>i.includes(e))))throw new(Ii().XV)("Invalid payment destination",{type:"template_invalid_payment_destination"});if(!t.includes("https://"))throw new(Ii().XV)("Invalid purchase url",{type:"template_invalid_purchase_url"});const r=new RegExp(/^(https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/g);if(!r.test(t))throw new(Ii().XV)("Invalid purchase url",{type:"template_invalid_purchase_url"})}catch(r){throw r instanceof Ii().XV?r:new(Ii().XV)("Invalid purchase url",{type:"template_invalid_purchase_url"})}var i}const Wc=["paypal","venmo","docs.google"];function Gc(e){if(e&&e.length>v().ZX)throw new(Ii().XV)("Categories too long",{type:"template_categories_too_long"});if(e&&0===e.length)throw new(Ii().XV)("Missing categories",{type:"template_missing_categories"})}function $c(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a=e.replace(/[^\w]/g," ").trim().slice(0,v().d0).split(/\s+/g).join("-").toLowerCase();return t?a.concat(`-${(0,Zc().Iy)([100,999])}`):a}function Yc(e){if(0===e.length)return;const t=Xc(e),a=(0,kt().AK)(t);if(a!==e)throw new(Ii().XV)("Invalid custom email snippet, please remove any HTML from the snippet.",{type:"template_invalid_custom_email_snippet"});if(a&&a.length>1e3)throw new(Ii().XV)("Custom email snippet too long",{type:"template_invalid_custom_email_snippet"})}function Xc(e){if(!e)return;return Uc()(e,{allowedTags:[],allowedAttributes:{}})}var Jc=()=>a(839002);const Qc=(0,Hl().LS)("generateTemplateScreenshot");async function eu(e){const{url:t,environment:a}=e,i=qn().default.checkGate({gateName:"disable_template_screenshot_generation",disableExposureLogging:!0}),r=Jc().UZ();if(i)return r.reject({success:!1,error:"Template screenshot generation is disabled"}),r.promise;const n=Date.now(),o=(0,Al().Lj)(a,Qc,{url:t});let s;for await(const l of o)s=l;if(s)if(s.error){const e=(0,Pa().HV)(z().Z.getIntl(),s.error);r.reject(e)}else r.resolve(s);else r.reject(void 0);return S().K4(a,"generate_template_screenshot_client",{time:Date.now()-n}),r.promise}var tu=()=>a(720595);const au={contentfulId:void 0,locales:[],isInitialized:!1};class iu extends je().default{getInitialState(){return{...au}}setContentfulId(e){this.setState({...this.state,contentfulId:e})}getLocales(){return this.state.locales}setLocales(e){this.setState({...this.state,locales:[...e]})}setIsInitialized(e){this.setState({...this.state,isInitialized:e})}updateState(e){this.setState({...this.state,...e})}resetState(){this.setState(au)}getDefaultLocaleTemplate(){var e;const{locales:t}=this.state;if(t&&0!==t.length)return null==t||null===(e=t.find((e=>{var t;return null==e||null===(t=e.template)||void 0===t?void 0:t.is_default_locale})))||void 0===e?void 0:e.template}getDefaultLocaleTemplateDraft(){var e;const{locales:t}=this.state;if(t&&0!==t.length)return null==t||null===(e=t.find((e=>{var t;return null==e||null===(t=e.template)||void 0===t?void 0:t.is_default_locale})))||void 0===e?void 0:e.templateDraft}removeLocale(e){this.setState({...this.state,locales:[...this.state.locales.filter((t=>t.locale!==e))]})}}const ru=new iu,nu={isOpen:!1,isTranslating:!1,shouldTranslate:!0,hasTranslated:!1};class ou extends je().default{getInitialState(){return{...nu}}openModal(){this.setState({...nu,isOpen:!0})}closeModal(){this.setState({...nu,isOpen:!1})}updateState(e){this.setState({...this.state,...e})}setIsTranslating(e){this.setState({...this.state,isTranslating:e})}setShouldTranslate(e){this.setState({...this.state,shouldTranslate:e})}setHasTranslated(e){this.setState({...this.state,hasTranslated:e})}}const su=new ou,lu=(0,d().vU)({submitTemplateMissingImage:{id:"templateSubmitActions.submitTemplateMissingImage",defaultMessage:"Please generate an image for your template by re-entering the template URL"},saveTemplateDraftSuccess:{id:"templateSubmitActions.saveTemplateDraftSuccess",defaultMessage:"Template saved."},submitTemplateSuccess:{id:"templateSubmitActions.submitSuccess",defaultMessage:"Template submitted! We will review it shortly."},submitTemplateMissingUrl:{id:"templateSubmitActions.submitTemplateMissingUrl",defaultMessage:"Please enter a valid url for your template."},submitTemplateInvalidUuid:{id:"templateSubmitActions.submitTemplateInvalidUuid",defaultMessage:"The link does not seem to be a valid Notion template."},submitTemplateMissingName:{id:"templateSubmitActions.submitTemplateMissingName",defaultMessage:"Please enter a name for your template"},submitTemplateMissingVerifiedInstantDelivery:{id:"templateSubmitActions.submitTemplateMissingVerifiedInstantDelivery",defaultMessage:"Please confirm that the template will be delivered instantly upon purchase."}});function du(){const e=tu().default.state,{initialValues:t,...a}=e;return{url:a.url,name:a.name,locale:a.locale,shortDescription:a.shortDescription,longDescription:a.longDescription,categories:a.categories.map((e=>e.id)),image:a.image,mobileImage:a.mobileImage,emoji:a.emoji,purchaseUrl:a.purchaseUrl,price:a.price,icon:a.icon,templateDraftId:a.templateDraftId,slug:a.slug,screenshots:a.screenshots,mobileScreenshots:a.mobileScreenshots,videos:a.videos,restrictRedistribution:a.restrictRedistribution,checkoutEnabled:a.checkoutEnabled,emailRequirement:a.emailRequirement,verifiedInstantDelivery:a.verifiedInstantDelivery,isDefaultLocale:e.isDefaultLocale,...a.isFree?{price:void 0,purchaseUrl:void 0,checkoutEnabled:void 0}:{},...a.contentfulId?{contentfulId:a.contentfulId}:{},marketplaceAcquisitionEmail:a.isFree||a.checkoutEnabled?a.marketplaceAcquisitionEmail:void 0}}async function cu(e){const{environment:t,action:a,currentView:i,templateContentfulId:r,hasTemplateBeenReviewed:n}=e;let o;const s=du(),l=!s.contentfulId;if(!(await gu({environment:t,url:s.url,templateDraftId:s.templateDraftId,shouldValidateBlockIdUsedByOtherTemplate:l})))return!1;if("save_draft"===a){if(!uu(s))return!1;{const e={...s,status:"draft",name:(0,id().Sl)("production",s.name??"Untitled")};o=await x().callApi({eventName:"submitTemplateDraft",environment:t,data:e})}}else if("publish"===a){const e=await async function(e,t,a,i){var r;let n=!0;const o=tu().default.state.initialValues;uu(t)?void 0===t.locale&&(n=!1):n=!1;null!=t&&null!==(r=t.image)&&void 0!==r&&r.url||Be().default.isLocalhost||tu().default.setState({...tu().default.state,imageError:z().Z.formatMessage(lu.submitTemplateMissingImage)});if(!t.name||!o.name||o.name!==t.name){var s;mu((0,Z().p2)(null===(s=b().default.state.currentUserStore)||void 0===s?void 0:s.getModel()),t.name)}yu(t.shortDescription),vu(t.longDescription);const l=tu().default.state.isDefaultLocale;!a&&l&&xu(t.categories||[]);t.slug&&o.slug&&o.slug===t.slug||await _u({environment:e,slug:t.slug||"",contentfulId:i});t.checkoutEnabled&&hu(t.price);if("number"==typeof t.price){var d;if(fu(t.price??0),t.checkoutEnabled)null!==(d=t.purchaseUrl)&&void 0!==d&&d.length&&t.purchaseUrl.length>0&&bu(t.purchaseUrl);else bu(t.purchaseUrl??""),t.purchaseUrl&&Tu(t.purchaseUrl)&&!t.verifiedInstantDelivery&&tu().default.setState({...tu().default.state,purchaseUrlError:z().Z.formatMessage(lu.submitTemplateMissingVerifiedInstantDelivery)})}for(const c of tu().x)void 0!==tu().default.state[c]&&(n=!1);return function(e){return!!n}}(t,s,n,r);if(!e(s))return!1;{const e={...s,status:"in_review",name:(0,id().Sl)("production",s.name??"Untitled")};o=await x().callApi({eventName:"submitTemplateDraft",environment:t,data:e})}}else(0,V().t1)(a);const{type:d}=$(i),c="published"!==d;return"success"===o.type?("save_draft"===a?(S().j({environment:t,event:{eventName:"creator_profile_template_save_draft",eventProperties:{}}}),_().PV({message:z().Z.formatMessage(lu.saveTemplateDraftSuccess)}),qn().default.logEvent("creator_profile_template_save_draft")):"publish"===a&&(S().j({environment:t,event:{eventName:"creator_profile_template_request_review",eventProperties:{is_new_submission:c}}}),qn().default.logEvent("creator_profile_template_request_review",void 0,{is_new_submission:c}),_().PV({message:z().Z.formatMessage(lu.submitTemplateSuccess)})),tu().default.reset(),!0):(_().x2(o),!1)}function uu(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.url?tu().default.state.uuid||tu().default.state.urlError?!!e.name||(t&&tu().default.setState({...tu().default.state,nameError:z().Z.formatMessage(lu.submitTemplateMissingName)}),!1):(t&&tu().default.setState({...tu().default.state,urlError:z().Z.formatMessage(lu.submitTemplateInvalidUuid)}),!1):(t&&tu().default.setState({...tu().default.state,urlError:z().Z.formatMessage(lu.submitTemplateMissingUrl)}),!1)}function pu(e){const{value:t,validationFunction:a,fieldName:i}=e;try{a(t)}catch(r){if((0,Ii().Cx)(r)){const e=(0,Pa().nX)(z().Z.getIntl(),r.body);e&&tu().default.setState({...tu().default.state,[i]:e})}}}async function gu(e){const{environment:t,url:a,templateDraftId:i,shouldValidateBlockIdUsedByOtherTemplate:r,shouldValidateBlockIdForLocalization:n}=e;if(tu().default.setState({...tu().default.state,url:a}),!a)return tu().default.setState({...tu().default.state,urlError:z().Z.formatMessage(lu.submitTemplateMissingUrl)}),!1;const o=await x().callApi({eventName:"validateTemplate",environment:t,data:{url:a,templateDraftId:i,shouldValidateBlockIdUsedByOtherTemplate:r,contentfulId:tu().default.state.contentfulId,shouldValidateBlockIdForLocalization:n}});if("success"!==o.type)return tu().default.setState({...tu().default.state,urlError:(0,Pa().wf)(z().Z.getIntl(),o)}),!1;tu().default.setState({...tu().default.state,urlError:void 0});const{blockId:s}=o.data;return tu().default.setState({...tu().default.state,url:a,uuid:s}),!0}function mu(e,t){pu({value:{name:t||"",isExemptFromDisallowedWords:e,env:"production"},validationFunction:Ac,fieldName:"nameError"})}function fu(e){pu({value:e,validationFunction:Oc,fieldName:"priceError"})}function hu(e){pu({value:e||0,validationFunction:Kc,fieldName:"priceError"})}function bu(e){pu({value:{purchaseUrl:e,publicDomainName:Be().default.publicDomainName},validationFunction:qc,fieldName:"purchaseUrlError"})}function yu(e){pu({value:e||"",validationFunction:Vc,fieldName:"shortDescriptionError"})}function vu(e){pu({value:e||"",validationFunction:Nc,fieldName:"longDescriptionError"})}function xu(e){pu({value:e,validationFunction:Gc,fieldName:"categoriesError"}),e.length<=v().ZX&&e.length>0&&tu().default.setState({...tu().default.state,categoriesError:void 0})}async function _u(e){const{environment:t,slug:a,contentfulId:i}=e;tu().default.setState({...tu().default.state,slug:a});const r=await x().callApi({eventName:"validateTemplateDraftSlug",environment:t,data:{slug:a,templateDraftId:tu().default.state.templateDraftId,contentfulId:i}});"success"===r.type?tu().default.setState({...tu().default.state,slugError:void 0}):tu().default.setState({...tu().default.state,slugError:(0,Pa().wf)(z().Z.getIntl(),r)})}function wu(e){tu().default.setState({...tu().default.state,[e]:void 0})}function Cu(){tu().default.reset()}function Su(e,t){var a,i,r,n;const o=tu().default.getInitialState(),s={contentfulId:(null==t?void 0:t.contentfulId)||e.getContentfulId(),templateDraftId:e.id,name:e.getName()||"",url:e.getTemplatePublicUrl()||"",price:e.getPrice(),slug:e.getSlug(),isFree:void 0===e.getPrice()&&void 0===e.getPurchaseUrl(),longDescription:e.getLongDescription()||"",shortDescription:e.getDescription()||"",uuid:e.getBlockId(),categories:[],locale:e.getLocale(),purchaseUrl:e.getPurchaseUrl(),image:(null===(a=e.getAttributes())||void 0===a?void 0:a.image)||{url:"",width:0,height:0},mobileImage:(null===(i=e.getAttributes())||void 0===i?void 0:i.mobile_image)||{url:"",width:0,height:0},mobileScreenshots:e.getMobileScreenshots(),screenshots:e.getScreenshots(),videos:e.getVideos(),status:e.getStatus()||"draft",restrictRedistribution:e.getRestrictRedistribution()||void 0,checkoutEnabled:e.getCheckoutEnabled()||void 0,emailRequirement:e.getEmailRequirement()||void 0,isDefaultLocale:(null==t?void 0:t.isDefaultLocale)??!1,verifiedInstantDelivery:(null===(r=e.getDraftAttributes())||void 0===r?void 0:r.verified_instant_delivery)??!1,marketplaceAcquisitionEmail:(null===(n=e.getAttributes())||void 0===n||null===(n=n.custom_emails)||void 0===n?void 0:n.marketplace_acquisition)??""};tu().default.setState({...o,...s,initialValues:{...s}})}async function ju(e,t){const a=tu().default.state,{isGeneratingImage:i,url:r}=a;tu().default.setState({...tu().default.state,isGeneratingImage:!0});const n=t??r;if(i)return!1;const o=await eu({url:n,environment:e}).catch((()=>{C().oV({label:(0,k.jsx)(I,{children:(0,k.jsx)(d()._H,{defaultMessage:"Error generating screenshot",id:"creatorProfile.snackbar.error.screenshot"})})})}));return o&&"value"in o&&tu().default.setState({...a,mobileImage:o.value.mobile,image:o.value.desktop}),tu().default.setState({...tu().default.state,isGeneratingImage:!1}),!0}function Mu(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const a=ru.getDefaultLocaleTemplate(),i=ru.getDefaultLocaleTemplateDraft();if(!a||t)return;const{attributes:r,price:n,slug:o}=a;return{slug:o,price:n,purchaseUrl:null==r?void 0:r.purchase_url,restrictRedistribution:null==r?void 0:r.restrict_redistribution,emailRequirement:null==r?void 0:r.email_requirement,checkoutEnabled:null==r?void 0:r.checkout_enabled,url:null!=r&&r.public_site_url?r.public_site_url:"",isFree:(void 0===n||0===n)&&void 0===(null==r?void 0:r.purchase_url),...(null==r?void 0:r.image)&&{image:r.image},...(null==r?void 0:r.mobile_image)&&{mobileImage:r.mobile_image},...(null==r?void 0:r.screenshots)&&{screenshots:r.screenshots},...(null==r?void 0:r.mobile_screenshots)&&{mobileScreenshots:r.mobile_screenshots},verifiedInstantDelivery:(null==i||null===(e=i.draft_attributes)||void 0===e?void 0:e.verified_instant_delivery)??!0}}async function ku(e){const{environment:t,data:a}=e,i=await x().callApi({eventName:"translateTemplateListingData",environment:t,data:a}),r=Mu(),n=tu().default.state,o=n.initialValues;if("success"!==i.type)return _().x2(i),!1;{const{name:e,shortDescription:t,longDescription:a}=i.data;tu().default.setState({...n,...e&&{name:e},...t&&{shortDescription:t},...a&&{longDescription:a},...r||{},initialValues:{...o}})}return su.updateState({isTranslating:!1,isOpen:!1,shouldTranslate:!0,hasTranslated:!0}),!0}const Iu=["gumroad.com","etsy.com","lemonsqueezy.com","payhip.com","ko-fi.com"];function Tu(e){try{const t=new URL(e);return!Iu.find((e=>t.hostname.endsWith(e)))}catch(t){return!0}}var Pu=()=>a(916673);function Du(e,t){const a=!e.some((e=>e.locale===t));return i=t,A().uI.some((e=>e===i))&&a;var i}function Lu(e,t,a){const{isFeatureEnabled:n}=(0,Xe().o)("self_serve_localization_frontend"),o=(0,r().O7)(),s=(0,i.useCallback)((async()=>{if(!n||!e&&!t)return{localizedTemplates:[],localizedTemplateDrafts:[]};const a=e?{contentfulId:e,slug:void 0}:{contentfulId:void 0,slug:t??""},{localizedTemplates:i,localizedTemplateDrafts:r}=await async function(e){let{environment:t,args:a}=e;const i=await x().callApi({eventName:"getLocalizedTemplatesByIdOrSlug",environment:t,data:a});if("success"===i.type&&i.data.success){const{localizedTemplates:e,localizedTemplateDrafts:t}=i.data;return{localizedTemplates:e,localizedTemplateDrafts:t??[]}}return{localizedTemplates:[],localizedTemplateDrafts:[]}}({environment:o,args:a});return{localizedTemplates:i,localizedTemplateDrafts:r}}),[o,e,t,n]),[{value:d={localizedTemplates:[],localizedTemplateDrafts:[]}}]=(0,l().r5)((async()=>n?s():{localizedTemplates:[],localizedTemplateDrafts:[]}),[s,n]);(0,i.useEffect)((()=>{var i,r,o;if(!n||!d.localizedTemplates||0===d.localizedTemplates.length&&0===d.localizedTemplateDrafts.length||!e&&!t)return;const s=(null===(i=d.localizedTemplates)||void 0===i?void 0:i.reduce(((e,t)=>{const a=(0,A().gq)(t.locale);return a&&e.push({locale:a,template:t}),e}),[]))||[];null===(r=d.localizedTemplateDrafts)||void 0===r||r.forEach((e=>{const t=s.find((t=>t.locale===e.locale)),a=(0,A().gq)(e.locale);if(a)if(t){var i;const t=s.find((t=>t.locale===e.locale));t&&"published"!==(null==t||null===(i=t.templateDraft)||void 0===i?void 0:i.status)&&(t.templateDraft=e)}else s.push({locale:a,templateDraft:e})}));const l=(0,A().gq)(a);if(l){if(1===s.length){if(!s.find((e=>{var t;return null===(t=e.template)||void 0===t?void 0:t.is_default_locale})))return void ru.setLocales([{locale:l}])}Du(s,l)&&s.push({locale:l})}s.length>0&&(ru.setLocales(s),ru.setIsInitialized(!0));const c=s.find((e=>{var t;return null===(t=e.template)||void 0===t?void 0:t.is_default_locale}));null!=c&&null!==(o=c.template)&&void 0!==o&&o.contentful_id&&ru.setContentfulId(c.template.contentful_id)}),[d,a,n,e,t])}function Eu(e){const t=(0,r().O7)();return(0,n().VK)((()=>{if(!e)return!1;const a=new(xt().XG)(t,{table:"template_draft",id:e}),i=a.getStatus(),r=a.getPublishedVersion(),n=a.getRejectReason();return"in_review"===i||void 0!==r&&r>0||void 0!==n}),[e,t])}var Ru=()=>a(7132);function Uu(e){const{type:t,id:a,contentfulId:o,locale:s}=e,l=(0,r().O7)(),c=(0,d().YB)(),u=s??(0,y().E2)(c),p=(0,y().E2)(c),g=(0,n().VK)((()=>Ru().Z.getState()),[]),m=(0,n().VK)((()=>{var e;return null===(e=b().default.state.currentUserSettingsStore)||void 0===e?void 0:e.getSettings()}),[]),f=(0,i.useRef)(void 0),h=(0,i.useRef)(!1),v=(0,i.useRef)(void 0),x=(0,i.useRef)(void 0);(0,i.useEffect)((()=>{"new"!==t&&(f.current=void 0),x.current=a}),[t,a]),(0,n().VK)((()=>{if("new"===t){if(u===f.current)return;const e=e=>A().uI.some((t=>t===e)),t=s??(null!=m&&m.preferred_locale&&e(null==m?void 0:m.preferred_locale)?null==m?void 0:m.preferred_locale:A().al);!function(e){let{locale:t,contentfulId:a,values:i}=e;const r=tu().default.getInitialState(),n=!a,o=n?{}:Mu(n)||{};t&&tu().default.setState({...r,...a&&{contentfulId:a},locale:t,isDefaultLocale:n,...i,...o,initialValues:{...r.initialValues,locale:t,isDefaultLocale:n,...i}})}({locale:t,contentfulId:o,values:g}),f.current=t}}),[t,null==m?void 0:m.preferred_locale,o,s,u,g]);const _=(0,n().VK)((()=>{if("new"===t){if(!o)return;const e=ru.getDefaultLocaleTemplate();if(!e)return;const t=new(xt().j$)(l,{table:"template",id:e.id}).getTemplateDraftId();if(!t)return;return new(xt().XG)(l,{table:"template_draft",id:t}).getTags()}if(void 0!==a){if("published"===t){const e=new(xt().j$)(l,{table:"template",id:a}),t=e.getTemplateDraftId();if(!t)return;const i=new(xt().XG)(l,{table:"template_draft",id:t});return Su(i,{contentfulId:e.getContentfulId(),isDefaultLocale:e.isDefaultLocale()}),v.current=a,i.getTags()}if("draft"===t){const e=new(xt().XG)(l,{table:"template_draft",id:a});return Su(e),e.getTags()}(0,V().t1)(t)}}),[t,a,l,o]);(0,n().VK)((()=>{if(!_)return[];const e=[];for(const t of _){const a=(0,Rl().p)({table:"template_tag",locale:p,contentful_id:t}),i=new(xt().$m)(l,{table:"template_tag",id:a});e.push({id:i.getContentfulId()||"",name:i.getName()||""})}const i=e.filter((e=>Boolean(e.name))),r="new"===t&&o||"draft"===t||"published"===t,n=!h.current||f.current||v.current===a||"draft"===t&&x.current!==a;r&&i.length>0&&i.length===_.length&&n&&(!function(e){const t=tu().default.state,a={...t.initialValues,categories:e};tu().default.setState({...t,categories:e,initialValues:a})}(i),h.current=!0)}),[_,l,t,o,f,v,a,p])}function Bu(){const[e,t]=(0,i.useState)(!0),a=(0,n().VK)((()=>ru.state.locales),[]),r=(0,n().VK)((()=>ru.state.isInitialized),[]),o=(0,n().VK)((()=>ru.getDefaultLocaleTemplate()),[]),s=(0,n().VK)((()=>tu().default.state.locale),[]);return(0,i.useEffect)((()=>{if(!r)return;const e=o?o.locale===s:1===a.length;tu().default.setIsDefaultLocale(e),t(e)}),[o,s,a,r]),e}function Hu(e){const t=(0,r().O7)();return(0,n().VK)((()=>{if(void 0===e)return;return new(xt().XG)(t,{table:"template_draft",id:e}).getStatus()}),[t,e])}const Fu={isOpen:!1};class Zu extends je().default{getInitialState(){return{...Fu}}openModal(){this.setState({...Fu,isOpen:!0})}closeModal(){this.setState({...Fu,isOpen:!1})}updateState(e){this.setState({...this.state,...e})}}const Au=new Zu;function Vu(e){let{isFormDisabled:t,marketplaceAcquisitionEmailError:a,marketplaceAcquisitionEmail:r,submissionFormStyles:n,disabledInputStyles:s}=e;const{isStatsigReady:l,isFeatureEnabled:c}=(0,Xe().o)("template_custom_email_snippet"),u=(0,i.useMemo)((()=>function(e){const t=Xc(e);if(t)return(0,Bc().c8)({markdown:t,options:{breaks:!0,linkify:!0},MarkdownIt:Rc(),LinkifyIt:Ec()})}(r)??""),[r]),{isMobileWidth:p}=(0,m().EQ)(),g=(f=p,(0,o().yK)((e=>({errorMessage:{fontSize:12,color:e.errorText},emailInputContainer:{display:"flex",gap:"12px",flexDirection:f?"column":"row"},emailPreview:{width:"100%",display:"flex",flexDirection:"column"},emailPreviewContent:{boxShadow:e.inputBoxShadow,borderRadius:"4px",padding:"8px 14px",height:216,backgroundColor:e.surface.wash},emailPreviewText:{fontSize:12,paddingBottom:4,color:"rgba(55, 53, 47, 0.8)"},emailPreviewHelp:{fontSize:12,color:"rgba(17, 17, 17, 0.5)"},emailPreviewHelpContainer:{alignSelf:"flex-end"}})),[f]));var f;return l&&c?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{style:g.emailInputContainer,children:[(0,k.jsx)(ar().w,{htmlLabel:"templateEmailSnippet",label:(0,k.jsx)(d()._H,{defaultMessage:"Custom Markdown email snippet",id:"creatorProfile.templateSubmission.marketplaceAcquisitionEmail"}),maxlength:1e3,textarea:!0,textareaElementAttributes:{rows:10},showCharacterCounter:!0,format:or().B.Default,style:{...n.inputStyle,...t?s.inputDisabled:{},fontFamily:"monospace"},inputStyle:t?s.noCursorAllowed:n.fullDescription,onChange:e=>{const t=tu().default.state;tu().default.setState({...t,marketplaceAcquisitionEmail:e.target.value})},onFocus:e=>wu("marketplaceAcquisitionEmailError"),onBlur:e=>{pu({value:e.target.value,validationFunction:Yc,fieldName:"marketplaceAcquisitionEmailError"})},value:r,disabled:t}),(0,k.jsxs)("div",{style:g.emailPreview,children:[(0,k.jsx)("div",{style:g.emailPreviewText,children:(0,k.jsx)(d()._H,{defaultMessage:"Preview",id:"creatorProfile.templateSubmission.emailPreview"})}),(0,k.jsx)("div",{style:g.emailPreviewContent,children:(0,k.jsx)("div",{dangerouslySetInnerHTML:{__html:`\n\t\t\t\t\t\t\t\t\t <div>\n\t\t\t\t\t\t\t\t\t\t<style>\n\t\t\t\t\t\t\t\t\t\t\tbody {\n\t\t\t\t\t\t\t\t\t\t\t\t:first-child {\n\t\t\t\t\t\t\t\t\t\t\t\t\tmargin-block-start: 0;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t.email-preview-content {\n\t\t\t\t\t\t\t\t\t\t\t\t\tmax-height: 200px;\n\t\t\t\t\t\t\t\t\t\t\t\t\toverflow: scroll;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t</style>\n\t\t\t\t\t\t\t\t\t\t<div class="email-preview-content">\n\t\t\t\t\t\t\t\t\t\t\t${u}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t`}})}),(0,k.jsx)("div",{style:g.emailPreviewHelpContainer,children:(0,k.jsx)(j().Z,{onClick:()=>{he().Z.setState({isOpen:!0,type:"MarkdownGuide",onAccept:()=>{}})},style:g.emailPreviewHelp,children:(0,k.jsx)(d()._H,{defaultMessage:"Get help",id:"creatorProfile.templateSubmission.emailPreviewHelp"})})})]})]}),a&&(0,k.jsx)("div",{role:"alert",style:g.errorMessage,children:a})]}):(0,k.jsx)(k.Fragment,{})}var Nu=()=>a(666157),zu=()=>a(417710),Ou=()=>a(87730),Ku=()=>a(805971),qu=()=>a(410871),Wu=()=>a(648668);function Gu(e){let{longDescriptionError:t,isFormDisabled:a,longDescription:i}=e;const r=(0,o().yK)((()=>({editorWrapper:{border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px",backgroundColor:"white",minHeight:"200px",fontSize:"14px",marginBottom:"-6px"},emailPreviewHelp:{fontSize:12,color:"rgba(17, 17, 17, 0.5)"},emailPreviewHelpContainer:{alignSelf:"flex-end"}})),[]);return(0,k.jsxs)(Mi().p,{htmlLabel:"templateLongDescription",name:(0,k.jsx)(d()._H,{defaultMessage:"Full description",id:"creatorProfile.templateSubmission.fullDescription"}),errorMessage:t,children:[(0,k.jsx)("div",{style:r.editorWrapper,children:(0,k.jsx)(Nu().P,{markdown:i||"",onChange:e=>{const t=tu().default.state;tu().default.setState({...t,longDescription:e})},contentEditableClassName:"mdx-editor",readOnly:a,plugins:[(0,zu().bB)(),(0,Ou().df)(),(0,Ku().q)(),(0,qu().a)(),(0,Wu().O)()]})}),(0,k.jsx)("div",{style:r.emailPreviewHelpContainer,children:(0,k.jsx)(j().Z,{onClick:()=>{he().Z.setState({isOpen:!0,type:"MarkdownGuide",onAccept:()=>{}})},style:r.emailPreviewHelp,children:(0,k.jsx)(d()._H,{defaultMessage:"Get help",id:"creatorProfile.templateSubmission.emailPreviewHelp"})})})]})}function $u(e){const{disabled:t}=e,a=(0,o().yK)((e=>({selectInputButton:{border:"none",boxShadow:e.inputBoxShadow,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"18px 14px",width:"100%"},selectText:{height:"20px",fontSize:14,lineHeight:"20px"},selectChevron:{width:16,height:16,fill:e.lightTextColor},accessLockingPickerSubtitle:{display:"inline-flex",gap:"4px",flexWrap:"wrap"},buttonStyles:{borderRadius:"4px",padding:"0px 4px"}})),[]),i=is(),r=(0,d().YB)(),{selectedSellWith:s,isPaid:l}=(0,n().VK)((()=>({selectedSellWith:tu().default.state.checkoutEnabled?"notion":"other",isPaid:!tu().default.state.isFree})),[]),c=(0,n().VK)((()=>({open:{label:r.formatMessage({id:"creatorProfile.templateSubmissionForm.openRedistribution",defaultMessage:"Open"}),caption:r.formatMessage({id:"creatorProfile.templateSubmissionForm.allowRedistribution",defaultMessage:"Allow users to redistribute blocks in my template"})},restricted:{label:r.formatMessage({id:"creatorProfile.templateSubmissionForm.restrictedRedistribution",defaultMessage:"Restricted"}),caption:r.formatMessage({id:"creatorProfile.templateSubmissionForm.disallowRedistribution",defaultMessage:"Prevent users from redistributing blocks in my template"})}})),[r]),{selectedAccessLocking:u}=(0,n().VK)((()=>({selectedAccessLocking:tu().default.state.restrictRedistribution?"restricted":"open"})),[]),p={items:["open","restricted"],getKey:e=>e,selectedItem:u,onSelect:e=>{const t=tu().default.state;tu().default.setState({...t,restrictRedistribution:"restricted"===e})},originGap:6,width:"100%",minWidth:"100%",renderItem:e=>{const t=c[e.value];return(0,k.jsx)(it().Z,{...e,title:null==t?void 0:t.label,caption:null==t?void 0:t.caption})},renderOrigin:e=>{var r;return(0,k.jsxs)(wa().Z,{isLarge:!0,...e,style:{...a.selectInputButton,...t?i.inputDisabled:{}},disabled:t,children:[(0,k.jsx)("span",{style:a.selectText,children:null===(r=c[u])||void 0===r?void 0:r.label}),(0,uo().i)(a.selectChevron)]})},disabled:t,sameWidthAsOrigin:!0};return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(gr().Z,{disableTooltip:!("other"===s&&l),renderTooltip:()=>(0,k.jsx)(d()._H,{defaultMessage:"Access locking can not be set to restricted on templates sold via 3rd party platforms",id:"creatorProfile.templateSubmissionForm.accessLockingTooltip"}),placement:ts().Placement.Bottom,render:e=>(0,k.jsx)("div",{...e,children:(0,k.jsx)(nt().Z,{...p})})}),(0,k.jsx)("div",{style:a.accessLockingPickerSubtitle,children:(0,k.jsx)(rt().q,{colorName:"secondary",styleName:"Caption-12px/Regular",customStyles:a.accessLockingPickerSubtitle,children:(0,k.jsx)(d()._H,{id:"templateSubmission.accessLocking.label",defaultMessage:"Prevent people from duplicating templates across workspaces, or re-selling purchased templates in Marketplace. {link}",values:{link:(0,k.jsx)(ye().Z,{href:ra().UY("guides.marketplaceSelling"),style:a.buttonStyles,external:!0,children:(0,k.jsx)(rt().q,{colorName:"primary",styleName:"Caption-12px/Regular",children:(0,k.jsx)(d()._H,{id:"templateSubmission.accessLocking.learnMore",defaultMessage:"Learn more"})})})}})})})]})}var Yu=()=>a(735957),Xu=()=>a(475335);function Ju(e){const{disabled:t}=e,a=(0,r().O7)(),s=(0,d().YB)(),c=(0,o().yK)((e=>({textInput:{borderRadius:ki().Z.borderRadius,background:"none"},icon:{fill:e.lightTextColor,height:"16px",width:"16px"},token:{marginLeft:"6px",color:e.regularTextColor}})),[]),u=is(),p=A().uI.some((e=>e===Uo().locale))?Uo().locale:A().al,[g,m]=(0,i.useState)(""),[f,h]=(0,i.useState)(""),[b,y]=(0,i.useState)(!1),_=(0,n().VK)((()=>tu().default.state.categories),[]),w=(0,n().VK)((()=>tu().default.state.templateDraftId),[]),C=(0,n().VK)((()=>tu().default.state.isDefaultLocale),[]),S=Eu(w),M=(0,n().VK)((()=>new Set(_.map((e=>e.id)))),[_]);(0,i.useEffect)((()=>{M.size>0&&!S&&C&&xu(Array.from(M))}),[M,S,C]);const[{value:I,status:T}]=(0,l().r5)((async()=>{var e;const t=await x().callApi({eventName:"getTemplateSearchResults",environment:a,data:{query:g,locale:p,limit:""!==g?10:100,type:"category",includeRootCategory:!0}});if("success"!==t.type||!t.data.success)return[];const i=null===(e=t.data.templatesCategories)||void 0===e||null===(e=e.items)||void 0===e?void 0:e.filter((e=>!v().dz.has(e.contentful_id))).map((e=>{var t,a;return{id:e.contentful_id,name:e.name,icon:null==e?void 0:e.icon,rootCategory:{name:null===(t=e.rootCategory)||void 0===t?void 0:t.name,icon:null===(a=e.rootCategory)||void 0===a?void 0:a.icon}}}));if(Xu().default.setKeyboardMode(!1),""===g){const e=kt().vM(i,(e=>e.rootCategory.name)),t=Object.values(e),a=Math.max(...t.map((e=>e.length))),r=[];for(let i=0;i<a;i++)t.forEach((e=>{i<e.length&&r.push(e[i])}));return kt().TV(r.slice(0,60))}return i}),[a,g,p],{debounce:500}),P=(0,i.useMemo)((()=>[{key:"default-teams-list",render:e=>(0,k.jsx)(Qa().Z,{...e,title:(0,k.jsx)(d()._H,{id:"templateSubmission.categoryPicker.title",defaultMessage:"Categories"}),loading:!1}),items:("resolved"===T?void 0!==I?I:[]:[]).filter((e=>!M.has(e.id))).map((e=>({key:e.id,render:t=>{var a;return(0,k.jsx)(it().Z,{...t,title:e.name,right:(0,k.jsx)(j().Z,{disabled:!0,icon:t=>(0,k.jsx)(Qu,{icon:e.icon,style:t,rootCategory:e.rootCategory}),children:null===(a=e.rootCategory)||void 0===a?void 0:a.name}),rightStyle:{paddingTop:2,paddingBottom:2}})},action:()=>{h(""),M.has(e.id)||tu().default.setState({...tu().default.state,categories:[..._,e]})}})))}]),[I,_,M,T]),D=(0,n().SI)((()=>tu().default.state.categories.length),[]);return(0,k.jsx)(Jo().ZP,{popupType:as().k.Popup,placementToOrigin:ts().Placement.Bottom,sameWidthAsOrigin:!0,open:b,onDismiss:()=>{m(""),h(""),y(!1)},forceRemeasureStore:D,origin:(0,k.jsx)(es().ZP,{disabled:t,style:{...c.textInput,...t?u.inputDisabled:{}},focus:b,focusInitial:!1,focusAfterAnimation:!0,format:es().UR.Share,inputDivStyle:{alignItems:"center"},value:f,onChange:e=>{m(e.target.value),h(e.target.value)},onClick:()=>{y(!0)},onRemoveLastToken:()=>{tu().default.setState({...tu().default.state,categories:tu().default.state.categories.slice(0,-1)})},type:"template-categories",tokens:_.map((e=>(0,k.jsx)(Qo().Z,{showRemoveButton:!t,isSingle:!1,style:{...c.token,...t?u.noCursorAllowed:{}},onClickRemove:t=>{t.stopPropagation(),tu().default.setState({...tu().default.state,categories:_.filter((t=>t.id!==e.id))})},disabled:t,value:(0,k.jsx)("div",{style:{display:"flex"},children:e.name}),format:Xo().lo.Small},e.id))),placeholder:t?"":s.formatMessage({id:"templateSubmission.categoryPicker.placeholder",defaultMessage:"Type to search..."}),onEmptySubmit:kt().yR,showBorder:!0,right:(0,Yu().e)(c.icon)}),render:()=>(0,k.jsx)(xe().Z,{menuType:Se().o.Popup,tokenInputHeader:!0,disableHeaderBorder:!0,maxHeight:"25dvh",children:(0,k.jsx)(Ja().Z,{type:Ja().i.Vertical,initialFocus:0,sections:P})})})}const Qu=i.memo((function(e){var t,i;const{rootCategory:r,style:n,icon:o}=e,s=(null==r||null===(t=r.icon)||void 0===t?void 0:t.name)||(null==o?void 0:o.name)||"square",l=(null==r||null===(i=r.icon)||void 0===i?void 0:i.color)||(null==o?void 0:o.color)||"lightgray",d="teal"===l?"green":l;return(0,k.jsx)(a(643051).Z,{type:"notion_icon",icon:`/icons/${s}_${d}.svg`,size:16,style:n})}),((e,t)=>{var a,i,r,n;return(null==e||null===(a=e.rootCategory.icon)||void 0===a?void 0:a.name)===(null==t||null===(i=t.rootCategory.icon)||void 0===i?void 0:i.name)&&(null==e||null===(r=e.rootCategory.icon)||void 0===r?void 0:r.color)===(null==t||null===(n=t.rootCategory.icon)||void 0===n?void 0:n.color)}));function ep(e){let{disabled:t}=e;const a=(0,o().yK)((e=>({selectInputButton:{border:"none",boxShadow:e.inputBoxShadow,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"18px 14px",width:"100%"},selectText:{height:"20px",fontSize:14,lineHeight:"20px"},selectChevron:{width:16,height:16,fill:e.lightTextColor},buttonStyles:{borderRadius:"4px",padding:"0px 4px"}})),[]),r=is(),s=function(){const e=(0,d().YB)();return(0,i.useMemo)((()=>({none:{label:e.formatMessage({id:"creatorProfile.templateSubmissionForm.emailRequirement.none",defaultMessage:"None"}),caption:e.formatMessage({id:"creatorProfile.templateSubmissionForm.emailRequirement.noneCaption",defaultMessage:"Users do not need to share their email address with me to download my template"})},optional:{label:e.formatMessage({id:"creatorProfile.templateSubmissionForm.emailRequirement.optional",defaultMessage:"Optional"}),caption:e.formatMessage({id:"creatorProfile.templateSubmissionForm.emailRequirement.optionalCaption",defaultMessage:"Let users opt-in to sharing their email address with me to download my template"})},required:{label:e.formatMessage({id:"creatorProfile.templateSubmissionForm.emailRequirement.required",defaultMessage:"Required"}),caption:e.formatMessage({id:"creatorProfile.templateSubmissionForm.emailRequirement.requiredCaption",defaultMessage:"Users must share their email address with me to download my template"})}})),[e])}(),l=(0,n().VK)((()=>tu().default.state.emailRequirement||"none"),[]);return(0,k.jsx)(nt().Z,{items:[...yt().WQ],getKey:e=>e,selectedItem:l,onSelect:e=>{tu().default.setState({...tu().default.state,emailRequirement:e})},originGap:6,width:"100%",minWidth:"100%",renderItem:e=>{const t=s[e.value];return(0,k.jsx)(it().Z,{...e,title:t.label,caption:t.caption})},renderOrigin:e=>(0,k.jsxs)(wa().Z,{...e,isLarge:!0,style:{...a.selectInputButton,...t?r.inputDisabled:{}},disabled:t,children:[(0,k.jsx)("span",{style:a.selectText,children:s[l].label}),(0,uo().i)(a.selectChevron)]}),disabled:t,sameWidthAsOrigin:!0})}function tp(e){const{currentLocale:t}=e,a=(0,d().YB)(),r=(0,o().yK)((e=>({outerContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8,maxWidth:960},barContainer:{display:"flex",padding:4,gap:4,background:e.accentColors.translucentGray[75],borderRadius:4,maxWidth:960,flex:1,flexWrap:"nowrap",overflowX:"auto",scrollbarWidth:"none",whiteSpace:"nowrap"},buttonBaseStyle:{padding:"5.5px 24px",flex:"1 1 auto"},buttonUnselected:{display:"flex",justifyContent:"center",alignItems:"center",color:e.accentColors.translucentGray[700],borderRadius:4,textAlign:"center"},buttonSelected:{color:e.accentColors.translucentGray[700],background:e.white,borderRadius:4},languageButton:{padding:6,border:"1px solid rgba(0, 0, 0, 0.06)",borderRadius:6,boxShadow:"0px 0.7px 1.46px 0px rgba(0, 0, 0, 0.01)"},languageContainer:{display:"flex",alignItems:"center",gap:4},languageIcon:{width:14,height:14},baseIndicator:{width:4,height:4,borderRadius:"50%",marginRight:4},inReviewIndicator:{background:e.creatorProfile.inReviewText},rejectedIndicator:{background:e.accentColors.red[500]},draftIndicator:{background:e.accentColors.gray[200]}})),[]),s=i.useRef(null),{setView:l,name:c}=Ge(),{type:u}=$(c),p=(0,n().VK)((()=>tu().default.state.isDefaultLocale),[])?["new","draft"].includes(u):void 0,g=(0,n().VK)((()=>tu().default.state.locale),[]),m=(0,A().gq)(g),f=m&&{locale:m,template:void 0,templateDraft:void 0},h=(0,n().VK)((()=>ru.getLocales()),[]),b=p&&f?[f]:h,y=(0,n().VK)((()=>ru.state.contentfulId),[]);i.useEffect((()=>{s.current&&s.current.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}),[t]);const{isStatsigReady:v,isFeatureEnabled:x}=(0,Xe().o)("self_serve_localization_frontend");if(!v||!t||!h)return null;if(0===b.length||v&&!x)return null;const _=()=>{y&&(ru.setContentfulId(y),Au.openModal())};return v&&(0,k.jsxs)("div",{style:r.outerContainer,children:[(0,k.jsxs)("div",{style:r.barContainer,children:[b.map((e=>{var i;const n=e.locale===t,o={...r.buttonBaseStyle,...r.buttonUnselected,...n?r.buttonSelected:{}},d=null==e||null===(i=e.templateDraft)||void 0===i?void 0:i.status,c=!!d&&["in_review","draft","rejected"].includes(d);return(0,k.jsxs)(ye().Z,{style:o,hoveredStyle:o,pressedStyle:o,ref:n?s:null,onClick:()=>(e=>{var t,a,i,r;const n=null!==(t=e.template)&&void 0!==t&&t.id?`/profile/templates/form/published/${null===(a=e.template)||void 0===a?void 0:a.id}`:null!==(i=e.templateDraft)&&void 0!==i&&i.id?`/profile/templates/form/draft/${null===(r=e.templateDraft)||void 0===r?void 0:r.id}`:y?`/profile/templates/form/new/${y}?locale=${e.locale}`:void 0;n&&l(n)})(e),children:[c&&(0,k.jsx)("span",{style:{...r.baseIndicator,..."in_review"===d?r.inReviewIndicator:{},..."rejected"===d?r.rejectedIndicator:{},..."draft"===d?r.draftIndicator:{}}}),(0,k.jsx)(rt().q,{styleName:"Body-13px/Semibold",children:(0,pr().t)(a)[e.locale].caption})]},e.locale)})),y&&1===h.length&&(0,k.jsx)(ye().Z,{style:{...r.buttonBaseStyle,...r.buttonUnselected},hoveredStyle:r.buttonUnselected,pressedStyle:r.buttonUnselected,onClick:_,children:(0,k.jsxs)("div",{style:r.languageContainer,children:[(0,fr().W)(r.languageIcon),(0,k.jsx)(rt().q,{styleName:"Body-13px/Semibold",children:(0,k.jsx)(d()._H,{id:"TemplateFormLocaleBar.addLanguageCta",defaultMessage:"Add Language"})})]})})]}),y&&h.length>1&&(0,k.jsx)(ye().Z,{onClick:_,style:r.languageButton,children:(0,fr().W)(r.languageIcon)})]})}function ap(e){const{disabled:t}=e,a=(0,o().yK)((e=>({selectInputButton:{border:"none",boxShadow:e.inputBoxShadow,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"18px 14px",width:"100%"},selectText:{height:"20px",fontSize:14,lineHeight:"20px"},selectChevron:{width:16,height:16,fill:e.lightTextColor},SellWithPickerSubtitle:{display:"inline-flex",gap:"4px",flexWrap:"wrap"},buttonStyles:{borderRadius:"4px",padding:"0px 4px"}})),[]),i=is(),r=(0,d().YB)(),s=(0,n().VK)((()=>({notion:{label:r.formatMessage({id:"creatorProfile.templateSubmissionForm.sellWithNotionTitle",defaultMessage:"Notion"}),caption:r.formatMessage({id:"creatorProfile.templateSubmissionForm.sellWithNotionDescription",defaultMessage:"Sell with Notion"})},other:{label:r.formatMessage({id:"creatorProfile.templateSubmissionForm.sellWithOtherTitle",defaultMessage:"Other"}),caption:r.formatMessage({id:"creatorProfile.templateSubmissionForm.sellWithOtherDescription",defaultMessage:"Sell via a 3rd party platform"})}})),[r]),{selectedSellWith:l}=(0,n().VK)((()=>({selectedSellWith:tu().default.state.checkoutEnabled?"notion":"other"})),[]),c={items:["notion","other"],getKey:e=>e,selectedItem:l,onSelect:e=>{const t=tu().default.state;let{restrictRedistribution:a,emailRequirement:i}=t;"other"===e&&(a=!1,i="none"),tu().default.setState({...t,checkoutEnabled:"notion"===e,restrictRedistribution:a,emailRequirement:i})},originGap:6,width:"100%",minWidth:"100%",renderItem:e=>{const t=s[e.value];return(0,k.jsx)(it().Z,{...e,title:null==t?void 0:t.label,caption:null==t?void 0:t.caption})},renderOrigin:e=>{var r;return(0,k.jsxs)(wa().Z,{isLarge:!0,...e,style:{...a.selectInputButton,...t?i.inputDisabled:{}},disabled:t,children:[(0,k.jsx)("span",{style:a.selectText,children:null===(r=s[l])||void 0===r?void 0:r.label}),(0,uo().i)(a.selectChevron)]})},disabled:t};return(0,k.jsx)(nt().Z,{...c})}function ip(e){const{isMobileWidth:t}=(0,m().EQ)(),{disabled:a}=e,{price:r,purchaseUrl:s,isFree:l,checkoutEnabled:c,purchaseUrlError:u,priceError:p,verifiedInstantDelivery:g}=(0,n().VK)((()=>tu().default.state),[]),f=(0,o().yK)((e=>({priceFields:{transition:"height 100ms",display:"flex",flexDirection:"column",gap:"16px"},priceFieldsValues:{display:"flex",gap:"16px"},priceFieldsValuesMobile:{display:"flex",flexDirection:"column",gap:"12px"},priceFieldsCost:{width:"auto",flexBasis:"20%",flex:1},priceFieldsCostMobile:{width:"100%"},priceFieldsSellWith:{flexBasis:"160px",width:"auto"},priceFieldsSellWithMobile:{width:"100%"},priceFieldsUrl:{width:"auto",flex:2},priceFieldsUrlMobile:{width:"100%"},inputStyle:{background:"none",padding:"8px 14px"},subtext:{fontSize:12,color:e.lightTextColor},inlineLink:{color:e.regularTextColor,fontWeight:L().Ue.semibold}})),[]),h=is(),b=function(){const e=na();if(!e)return"required_seller_not_onboarded";return"optional"}(),[y,v]=(0,i.useState)(!1);(0,i.useEffect)((()=>{v(!!s&&Tu(s))}),[s]),(0,i.useEffect)((()=>{void 0!==r&&(c?hu(r):fu(r))}),[c,r]);const x=na();return(0,k.jsxs)("section",{style:f.priceFields,children:[(0,k.jsx)(Mi().p,{htmlLabel:"paidTemplate",name:(0,k.jsx)(d()._H,{defaultMessage:"Paid template",id:"creatorProfile.templateSubmission.paidToggleLabel"}),children:(0,k.jsx)(ir,{isActive:!l,onClick:()=>{const e=!l,t=void 0===c?!e:c;tu().default.setState({...tu().default.state,isFree:e,...x?{checkoutEnabled:t}:{},...e?{priceError:void 0,purchaseUrlError:void 0}:{}})},disabled:a})}),l?null:(0,k.jsxs)("section",{style:t?f.priceFieldsValuesMobile:f.priceFieldsValues,children:["optional"===b&&(0,k.jsx)(Mi().p,{htmlLabel:"templateSellWith",style:t?f.priceFieldsSellWithMobile:f.priceFieldsSellWith,name:(0,k.jsx)(d()._H,{defaultMessage:"Sell with",id:"creatorProfile.templateSubmission.sellWithPickerLabel"}),children:(0,k.jsx)(ap,{disabled:a})}),(0,k.jsx)(Mi().p,{errorMessage:p,htmlLabel:"templatePrice",style:t?f.priceFieldsCostMobile:f.priceFieldsCost,name:(0,k.jsx)(d()._H,{defaultMessage:"Price (USD)",id:"creatorProfile.templateSubmission.priceLabel"}),children:(0,k.jsx)(or().Z,{value:null==r?void 0:r.toFixed(2),type:"number",id:"templatePrice",onBlur:e=>{const t=e.target.value?Math.floor(Math.abs(100*parseFloat(e.target.value)))/100:void 0,a=tu().default.state;tu().default.setState({...a,price:t})},onFocus:e=>wu("priceError"),min:"0.00",step:"0.01",placeholder:"0.00",style:{...f.inputStyle,...a?h.inputDisabled:{}},inputStyle:a?h.noCursorAllowed:{},disabled:a})}),("optional"!==b||!c)&&(0,k.jsxs)(Mi().p,{errorMessage:u,style:t?f.priceFieldsUrlMobile:f.priceFieldsUrl,name:(0,k.jsx)(d()._H,{defaultMessage:"Purchase URL",id:"creatorProfile.templateSubmission.purchaseUrlLabel"}),children:[(0,k.jsx)(or().Z,{value:null==s?void 0:s.trim(),type:"url",onChange:e=>{const t=tu().default.state;tu().default.setState({...t,purchaseUrl:e.target.value})},onFocus:e=>wu("purchaseUrlError"),onBlur:e=>{c?wu("purchaseUrlError"):(bu(e.target.value),v(Tu(e.target.value)))},placeholder:"https://",style:{...f.inputStyle,...a?h.inputDisabled:{}},inputStyle:a?h.noCursorAllowed:{},disabled:a}),y&&(0,k.jsxs)("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[(0,k.jsx)(ao().Z,{size:14,checked:g??!1,onClick:()=>{tu().default.setState({...tu().default.state,verifiedInstantDelivery:!g}),wu("purchaseUrlError")},disabled:a}),(0,k.jsx)(rt().q,{styleName:"Caption-12px/Regular",children:(0,k.jsx)(d()._H,{id:"creatorProfile.templateSubmission.verifyInstantDelivery",defaultMessage:"I confirm that the template will be delivered instantly upon purchase via this link."})})]}),(0,k.jsx)("div",{style:f.subtext,children:"required_seller_not_onboarded"===b?(0,k.jsx)(d()._H,{id:"creatorProfile.templateSubmission.purchaseUrlSubtext.sellerNotOnboarded",defaultMessage:"You are not a Stripe verified creator. To sell directly with Notion get started <link>here</link>.",values:{link:e=>(0,k.jsx)(aa().Z,{href:Dn()._j.creatorProfile,external:!0,style:f.inlineLink,disableUnderline:!0,children:e})}}):null})]})]})]})}var rp=()=>a(503741),np=()=>a(239482),op=()=>a(852465),sp=()=>a(258058),lp=()=>a(435144),dp=()=>a(68149);function cp(e){const{desktopImage:t,mobileImage:a}=e;sp().default.setState({...sp().default.state,...t?{desktopImage:t}:{},...a?{mobileImage:a}:{}}),lp().default.setState({...lp().default.state,video:void 0})}function up(e){const t=tu().default.state.mobileScreenshots,a=tu().default.state.screenshots;if(t&&a){const i=1===t.length?[]:[...t.slice(0,e),...t.slice(e+1)],r=1===a.length?[]:[...a.slice(0,e),...a.slice(e+1)];tu().default.setState({...tu().default.state,screenshots:r,mobileScreenshots:i})}}function pp(){sp().default.setState({...sp().default.state,desktopImage:sp().iH})}function gp(){sp().default.setState({...sp().default.state,mobileImage:sp().RK})}var mp=()=>a(354935);var fp=()=>a(733518),hp=()=>a(756085),bp=()=>a(696347);const yp=i.createContext({activeItem:{name:"",itemNode:(0,k.jsx)("div",{}),mainNode:(0,k.jsx)("div",{})}});function vp(){const e=(0,i.useContext)(yp);if(!e)throw new Error("Must be used within an TemplateImageCarousel");return e}function xp(e){const{items:t,shouldNotShowCarousel:a}=e,r=(0,d().YB)(),n=(0,i.useRef)(null),o=(0,i.useRef)(null),s=(0,i.useRef)(null),l=Cp(),[c,u]=(0,i.useState)(0),{canScrollLeft:p,canScrollRight:g,onScroll:m}=function(e){const{rootRef:t,scrollLeftRef:a,scrollRightRef:r}=e,[n,o]=(0,i.useState)(!1),[s,l]=(0,i.useState)(!1),d="function"==typeof IntersectionObserver,c=e=>{const[t]=e;o(!t.isIntersecting)},u=e=>{const[t]=e;l(!t.isIntersecting)},p=(0,i.useCallback)((e=>{const{current:a}=t;if(a){const t=Math.abs(.3*a.clientWidth),i="left"===e?-1:1;a.scrollTo({left:a.scrollLeft+t*i,behavior:"smooth"})}}),[t]);return(0,i.useEffect)((()=>{if(d&&a.current&&r.current&&t.current){const e=new IntersectionObserver(c,{threshold:[1],root:t.current}),i=new IntersectionObserver(u,{threshold:[1],root:t.current});return e.observe(a.current),i.observe(r.current),()=>{o(!1),l(!1),e.disconnect(),i.disconnect()}}return()=>{}}),[a,r,d,t]),{canScrollLeft:n,canScrollRight:s,onScroll:p}}({rootRef:n,scrollLeftRef:o,scrollRightRef:s}),f=(0,i.useCallback)((e=>{var a;const i=t[e];null===(a=i.onItemClick)||void 0===a||a.call(i),null!==i.mainNode&&u(e)}),[t]),h=t.length;(0,i.useEffect)((()=>{if(c===h-1){const e=Math.max(0,c-1);f(e)}}),[h,f,c]);const b=t[c];return(0,k.jsx)(yp.Provider,{value:{activeItem:b},children:(0,k.jsxs)("div",{style:l.imageCarousel,children:[(0,k.jsx)(wp,{}),!a&&(0,k.jsxs)("div",{style:l.imageCarouselRowContainer,children:[(0,k.jsxs)("section",{style:l.imageCarouselRow,ref:n,id:"templateImageCarouselRow",children:[(0,k.jsx)("div",{style:l.carouselScrollStub,ref:o}),t.map(((e,t)=>(0,k.jsx)(_p,{name:e.name,onClick:f,index:t,itemNode:e.itemNode,overlay:e.overlay},e.name))),(0,k.jsx)("div",{style:l.carouselScrollStub,ref:s})]}),p&&(0,k.jsx)("button",{style:{...l.arrow,...l.arrowLeft},onClick:()=>m("left"),"aria-label":r.formatMessage({id:"creatorProfile.templateSubmission.imageCarousel.leftButton",defaultMessage:"View previous images"}),type:"button",children:(0,hp().f)(l.chevronIcon)}),g&&(0,k.jsx)("button",{style:{...l.arrow,...l.arrowRight},onClick:()=>m("right"),"aria-label":r.formatMessage({id:"creatorProfile.templateSubmission.imageCarousel.rightButton",defaultMessage:"View next images"}),type:"button",children:(0,bp().o)(l.chevronIcon)})]})]})})}function _p(e){const{onClick:t,name:a,index:i,itemNode:r,overlay:n}=e,{activeItem:s}=vp(),l=function(e){return(0,o().yK)((()=>({imageCarouselItem:{padding:"16px 10px",background:e?"rgba(246, 245, 244, 1)":""},imageCarouselItemContainer:{height:"auto",minWidth:"160px",position:"relative",flexShrink:0,borderRadius:"8px",overflow:"hidden"}})),[e])}(s.name===a);return(0,k.jsxs)("div",{style:l.imageCarouselItemContainer,children:[(0,k.jsx)(oa().Z,{style:l.imageCarouselItem,onClick:()=>t(i),children:r}),n]})}function wp(){const{activeItem:e}=vp(),t=Cp();return(0,k.jsx)("div",{style:t.imageCarouselMain,children:null==e?void 0:e.mainNode})}function Cp(){return(0,o().yK)((()=>({imageCarousel:{display:"flex",gap:"32px",flexDirection:"column"},carouselScrollStub:{width:"1px"},imageCarouselRow:{position:"relative",display:"flex",alignItems:"center",marginLeft:"-10px",overflowX:"scroll",gap:"4px"},imageCarouselRowContainer:{position:"relative",overflow:"hidden"},imageCarouselMain:{width:"100%",background:"transparent",position:"relative"},arrow:{zIndex:2,width:"34px",height:"34px",borderRadius:"50%",display:"flex",backgroundColor:"rgba(26, 26, 26, 1)",justifyContent:"center",alignItems:"center",border:"1px solid rgba(26, 26, 26, 1)",position:"absolute",top:"40%",boxShadow:"\n\t\t\t\t\t0px 0.17499999701976776px 1.040624976158142px 0px rgba(0, 0, 0, 0.013),\n\t\t\t\t\t0px 0.800000011920929px 2.924999952316284px 0px rgba(0, 0, 0, 0.02),\n\t\t\t\t\t0px 2.0250000953674316px 7.846875190734863px 0px rgba(0, 0, 0, 0.027),\n\t\t\t\t\t0px 4px 18px 0px rgba(0, 0, 0, 0.04)\n\t\t\t\t"},arrowLeft:{left:"5px"},arrowRight:{right:"5px"},chevronIcon:{height:"20px",width:"20px",color:c().O9.white}})),[])}function Sp(e){const{data:t}=e,a=(0,o().yK)((()=>({videoContainer:{width:"100%",height:"100%",overflow:"hidden",background:"rgba(0, 0, 0, 1)",position:"relative",borderRadius:"6px",aspectRatio:"16/7.4",boxShadow:"0px 0.6666666865348816px 3.502314805984497px 0px rgba(0, 0, 0, 0.0096),\n\t\t\t\t\t0px 2.933333396911621px 7.251852035522461px 0px rgba(0, 0, 0, 0.0157),\n\t\t\t\t\t0px 7.199999809265137px 14.462499618530273px 0px rgba(0, 0, 0, 0.02),\n\t\t\t\t\t0px 13.866666793823242px 28.348148345947266px 0px rgba(0, 0, 0, 0.0243),\n\t\t\t\t\t0px 23.33333396911621px 52.122684478759766px 0px rgba(0, 0, 0, 0.0304),\n\t\t\t\t\t0px 36px 89px 0px rgba(0, 0, 0, 0.04)"}})),[]);return(0,k.jsx)("div",{style:a.videoContainer,children:(0,k.jsx)(fp().Z,{source:t.iFrameSrcUrl,background:!1,isFullWidth:!0,isFullHeight:!0})})}function jp(e){const{data:t}=e,a=Ip();return(0,k.jsx)("div",{style:a.itemContainer,children:(0,k.jsx)("div",{style:a.desktopImageContainer,children:(0,k.jsx)(Tr().ZP,{src:t.thumbnailImage.url||"",style:a.desktopImage})})})}function Mp(e){var t,a;const i=(0,o().yK)((()=>({imageContainer:{display:"flex",width:"100%",height:"100%",justifyContent:"space-between",alignItems:"center",gap:"25px"},desktopImageContainerLoading:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",width:"100%"},desktopImageContainer:{width:"80%",aspectRatio:"16/10",overflow:"hidden",boxShadow:"0px 0.6666666865348816px 3.502314805984497px 0px rgba(0, 0, 0, 0.0096),\n\t\t\t\t\t0px 2.933333396911621px 7.251852035522461px 0px rgba(0, 0, 0, 0.0157),\n\t\t\t\t\t0px 7.199999809265137px 14.462499618530273px 0px rgba(0, 0, 0, 0.02),\n\t\t\t\t\t0px 13.866666793823242px 28.348148345947266px 0px rgba(0, 0, 0, 0.0243),\n\t\t\t\t\t0px 23.33333396911621px 52.122684478759766px 0px rgba(0, 0, 0, 0.0304),\n\t\t\t\t\t0px 36px 89px 0px rgba(0, 0, 0, 0.04)",borderRadius:"6px"},mobileImageContainer:{width:"25%",overflow:"hidden",aspectRatio:"0.5",boxShadow:"0px 0.6666666865348816px 3.502314805984497px 0px rgba(0, 0, 0, 0.0096),\n\t\t\t\t\t0px 2.933333396911621px 7.251852035522461px 0px rgba(0, 0, 0, 0.0157),\n\t\t\t\t\t0px 7.199999809265137px 14.462499618530273px 0px rgba(0, 0, 0, 0.02),\n\t\t\t\t\t0px 13.866666793823242px 28.348148345947266px 0px rgba(0, 0, 0, 0.0243),\n\t\t\t\t\t0px 23.33333396911621px 52.122684478759766px 0px rgba(0, 0, 0, 0.0304),\n\t\t\t\t\t0px 36px 89px 0px rgba(0, 0, 0, 0.04)",borderRadius:"6px"},desktopImage:{width:"100%",height:"100%",objectFit:"cover",transition:"-webkit-filter 180ms"},mobileImage:{width:"100%",height:"100%",objectFit:"cover",transition:"-webkit-filter 180ms"},hoveredImage:{filter:"brightness(0.8)"}})),[]),{data:r,isHovered:n,isGeneratingImage:s}=e;return(0,k.jsxs)("div",{style:i.imageContainer,children:[(0,k.jsx)("div",{style:i.desktopImageContainer,children:s?(0,k.jsx)("div",{style:i.desktopImageContainerLoading,children:(0,k.jsx)(Si().Z,{})}):(0,k.jsx)(Tr().ZP,{src:(null===(t=r.desktop)||void 0===t?void 0:t.url)||"",style:{...i.desktopImage,...n?i.hoveredImage:{}}})}),(0,k.jsx)("div",{style:i.mobileImageContainer,children:s?(0,k.jsx)("div",{style:i.desktopImageContainerLoading,children:(0,k.jsx)(Si().Z,{})}):(0,k.jsx)(Tr().ZP,{style:{...i.mobileImage,...n?i.hoveredImage:{}},src:(null===(a=r.mobile)||void 0===a?void 0:a.url)||""})})]})}function kp(e){var t,a;const{data:i}=e,r=Ip();return(0,k.jsxs)("div",{style:r.itemContainer,children:[(0,k.jsx)("div",{style:r.desktopImageContainer,children:(0,k.jsx)(Tr().ZP,{style:r.desktopImage,src:(null===(t=i.desktop)||void 0===t?void 0:t.url)||""})}),(0,k.jsx)("div",{style:r.mobileImageContainer,children:(0,k.jsx)(Tr().ZP,{style:r.mobileImage,src:(null===(a=i.mobile)||void 0===a?void 0:a.url)||""})})]})}function Ip(){return(0,o().yK)((()=>({itemContainer:{display:"flex",width:"100%",height:"100%",justifyContent:"space-between",gap:"12px",alignItems:"center",padding:"12px",position:"relative"},desktopImageContainer:{width:"160px",aspectRatio:"16/10",overflow:"hidden",borderRadius:"6px",boxShadow:"\n\t\t\t\t0px 0.17499999701976776px 1.040624976158142px 0px rgba(0, 0, 0, 0.013),\n\t\t\t\t0px 0.800000011920929px 2.924999952316284px 0px rgba(0, 0, 0, 0.02),\n\t\t\t\t0px 2.0250000953674316px 7.846875190734863px 0px rgba(0, 0, 0, 0.027),\n\t\t\t\t0px 4px 18px 0px rgba(0, 0, 0, 0.04)\n\t\t\t\t"},mobileImageContainer:{width:"51px",height:"100px",overflow:"hidden",borderRadius:"6px",boxShadow:"\n\t\t\t\t0px 0.17499999701976776px 1.040624976158142px 0px rgba(0, 0, 0, 0.013),\n\t\t\t\t0px 0.800000011920929px 2.924999952316284px 0px rgba(0, 0, 0, 0.02),\n\t\t\t\t0px 2.0250000953674316px 7.846875190734863px 0px rgba(0, 0, 0, 0.027),\n\t\t\t\t0px 4px 18px 0px rgba(0, 0, 0, 0.04)\n\t\t\t\t"},desktopImage:{width:"100%",height:"100%",objectFit:"cover"},mobileImage:{width:"100%",height:"100%",objectFit:"cover"}})),[])}function Tp(){return(0,o().yK)((e=>({imageUploadTabViewContainer:{display:"flex",flexDirection:"column",gap:"10px"},imagesContainer:{display:"flex",gap:"20px",alignItems:"center",maxHeight:"184px"},imageContainer:{display:"flex",flexDirection:"column",gap:"10px",width:"100%",height:"100%"},desktopImageContainer:{width:"80%",aspectRatio:"16/10",flexShrink:"initial"},mobileImageContainer:{width:"25%",aspectRatio:"0.5",flexShrink:"initial"},uploadedImageContainer:{width:"100%",height:"100%",position:"relative"},uploadedImage:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"6px"},toggleAndInputContainer:{display:"flex",flexDirection:"column",gap:"10px"},errorMessage:{fontSize:"12px",color:e.accentColors.red[500],width:"303px"}})),[])}function Pp(e){const{children:t}=e,a=(0,o().yK)((()=>({customErrorText:{fontSize:"12px",color:"rgba(17, 17, 17, 0.5)"}})),[]);return(0,k.jsx)("span",{style:a.customErrorText,children:t})}function Dp(e){const{isActive:t,onClick:a,disabled:i}=e,r=(0,o().yK)((()=>({toggleContainer:{display:"flex",alignItems:"center",gap:"10px"},uploadCustomImagesText:{fontSize:"12px",color:"rgba(51, 51, 51, 1)"}})),[]);return(0,k.jsxs)("div",{style:r.toggleContainer,children:[(0,k.jsx)(ir,{isActive:t,onClick:a,disabled:i}),(0,k.jsx)("span",{style:r.uploadCustomImagesText,children:(0,k.jsx)(d()._H,{id:"creatorPlatform.templateImageUploader.dialog.imageUpload.templateLink.toggle.label",defaultMessage:"Upload my own images"})})]})}function Lp(){return(0,o().yK)((()=>({titleText:{fontSize:"13.5px",color:"rgba(102, 102, 102, 1)",fontWeight:L().Ue.medium},subTitleText:{fontSize:"12px",color:"rgba(17, 17, 17, 0.5)"},uploadCustomImageContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",gap:"4px"},uploadIcon:{width:"16px",height:"16px",color:"rgba(102, 102, 102, 1)"},titleContainer:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px"}})),[])}function Ep(e){const{isCustomImageUpload:t,isDisabled:a}=e,i=Lp(),r=(0,o().yK)((()=>({desktopImageTemplateLinkPlaceholderText:{textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"center",padding:"12px"}})),[]);return a?null:t?(0,k.jsxs)("div",{style:i.uploadCustomImageContainer,children:[(0,k.jsxs)("div",{style:i.titleContainer,children:[(0,k.jsx)("span",{children:ss(i.uploadIcon)}),(0,k.jsx)("span",{style:i.titleText,children:(0,k.jsx)(d()._H,{id:"creatorPlatform.templateImageUploader.dialog.imageUpload.customImage.desktop.title",defaultMessage:"Desktop"})})]}),(0,k.jsx)("span",{style:i.subTitleText,children:(0,k.jsx)(d()._H,{id:"creatorPlatform.templateImageUploader.dialog.imageUpload.customImage.desktop.subtitle",defaultMessage:"2048 × 1280 · Required"})})]}):(0,k.jsx)("span",{style:r.desktopImageTemplateLinkPlaceholderText,children:(0,k.jsx)(d()._H,{id:"creatorPlatform.templateImageUploader.dialog.imageUpload.templateLink.placeholder",defaultMessage:"Enter template link to generate image"})})}function Rp(e){const{style:t,onClick:a,isUploading:r,disabled:n,imageUrl:s,emptyState:l,imageOverlay:d,isStatic:c}=e,u=(0,o().yK)((()=>({imageUploadContainer:{display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(246, 245, 244, 1)",borderRadius:"6px",border:"1px solid rgba(0, 0, 0, 0.04)",height:"100%",padding:0},buttonHovered:{background:"rgba(0, 0, 0, 0.04)"},buttonHoveredWithImage:{background:"rgba(0, 0, 0, 0.2)"},hoveredDiv:{cursor:"pointer"}})),[]),p=(0,i.useRef)(null),{isHovered:g,isTouchDevice:m}=Lr(p),f=!c&&(g||m),h=g&&!c&&!n;return void 0===a||c?(0,k.jsx)("div",{style:{...u.imageUploadContainer,...h?u.hoveredDiv:{},...t},ref:p,children:(0,k.jsx)(Up,{imageUrl:s,imageOverlay:f?d:void 0,isUploading:r,emptyState:l,isStatic:c})}):(0,k.jsx)(j().Z,{onClick:a,disabled:n,style:{...u.imageUploadContainer,...h?u.hoveredDiv:{},...t},ref:p,children:(0,k.jsx)(Up,{imageUrl:s,imageOverlay:f?d:void 0,isUploading:r,emptyState:l})})}function Up(e){const{isUploading:t,imageUrl:a,emptyState:r,imageOverlay:n,isStatic:s}=e,l=Tp(),d=(0,o().yK)((()=>({imageHovered:{filter:"brightness(0.8)"}})),[]),c=(0,i.useRef)(null),{isHovered:u,isTouchDevice:p}=Lr(c);return t?(0,k.jsx)(Si().Z,{}):a?(0,k.jsxs)("div",{style:l.uploadedImageContainer,ref:c,children:[n,(0,k.jsx)(Tr().ZP,{src:a,style:{...l.uploadedImage,...!u||p||s?{}:d.imageHovered}})]}):(0,k.jsx)(k.Fragment,{children:r})}function Bp(e){const{onClick:t}=e,a=(0,o().yK)((()=>({button:{top:-8,right:-4,position:"absolute",borderRadius:"12px",height:"24px",padding:"0px",zIndex:2},icon:{height:24,width:24,fill:"white"}})),[]);return(0,k.jsx)(Ji().z,{testId:"remove-image-preview-button",variant:"dark",style:a.button,onClick:t,children:(0,rp().B)(a.icon)})}function Hp(e){const{isCustomImageUpload:t,isDisabled:a}=e,i=Lp();return a?null:t?(0,k.jsxs)("div",{style:i.uploadCustomImageContainer,children:[(0,k.jsxs)("div",{style:i.titleContainer,children:[(0,k.jsx)("span",{children:ss(i.uploadIcon)}),(0,k.jsx)("span",{style:i.titleText,children:(0,k.jsx)(d()._H,{id:"creatorPlatform.templateImageUploader.dialog.imageUpload.customImage.mobile.title",defaultMessage:"Mobile"})})]}),(0,k.jsx)("span",{style:i.subTitleText,children:(0,k.jsx)(d()._H,{id:"creatorPlatform.templateImageUploader.dialog.imageUpload.customImage.mobile.subtitle",defaultMessage:"750 × 1500"})}),(0,k.jsx)("span",{style:i.subTitleText,children:(0,k.jsx)(d()._H,{id:"creatorPlatform.templateImageUploader.dialog.imageUpload.customImage.mobile.required",defaultMessage:"Required"})})]}):null}function Fp(e){const{desktopImage:t,mobileImage:a,errorMessage:o}=(0,n().VK)((()=>sp().default.state),[]),{screenshots:s}=(0,n().VK)((()=>tu().default.state),[]),{onToggle:l,type:c}=e,[u,p]=(0,i.useState)(null),g=(0,r().O7)(),m=Tp(),f=(0,i.useCallback)((e=>{null!==u&&cp("desktop"===u?{desktopImage:{url:e,width:sp().OB,height:sp().dD}}:{mobileImage:{url:e,width:sp().gM,height:sp().g}})}),[u]),h=(0,i.useCallback)((e=>{"upload"===e.type&&An().log({level:"error",from:"TemplateSubmissionFormImageUpload",type:"uploadError",error:(0,Vn().Ui)(e.error)}),sp().default.setState({...sp().default.state,errorMessage:e.message})}),[]),b=(0,i.useCallback)((()=>{sp().default.setState({...sp().default.state,errorMessage:void 0,isUploading:!0})}),[]),y=(0,i.useCallback)((()=>{p(null),sp().default.setState({...sp().default.state,errorMessage:void 0,isUploading:!1})}),[]),{uploadFile:x,isUploading:_}=(0,ls().FL)({onStart:b,onSuccess:f,onError:h,onComplete:y,environment:g});(0,i.useEffect)((()=>{null!==u&&x()}),[u]);const w=_&&"desktop"===u,C=_&&"mobile"===u,S=s&&s.length===v().R2&&"new"===c,j=_||S,M=w||S,I=C||S;return(0,k.jsxs)("div",{style:m.imageUploadTabViewContainer,children:[(0,k.jsxs)("div",{style:m.imagesContainer,children:[(0,k.jsx)(Rp,{style:m.desktopImageContainer,isUploading:w,onClick:()=>{"desktop"!==u?p("desktop"):x()},disabled:j,imageUrl:t.url,emptyState:(0,k.jsx)(Ep,{isCustomImageUpload:!0,isDisabled:M}),imageOverlay:(0,k.jsx)(Bp,{onClick:()=>pp()})}),(0,k.jsx)(Rp,{style:m.mobileImageContainer,isUploading:C,onClick:()=>{"mobile"!==u?p("mobile"):x()},disabled:j,imageUrl:a.url,emptyState:(0,k.jsx)(Hp,{isCustomImageUpload:!0,isDisabled:I}),imageOverlay:(0,k.jsx)(Bp,{onClick:()=>gp()})})]}),(0,k.jsxs)("div",{style:m.toggleAndInputContainer,children:[(0,k.jsx)(Dp,{isActive:!0,onClick:l}),S&&(0,k.jsx)(Pp,{children:(0,k.jsx)(d()._H,{id:"creatorPlatform.template.imageUpload.status.maxLimit",defaultMessage:"You can only upload a maximum of {maxNumImages} images.",values:{maxNumImages:v().R2}})}),void 0!==o&&(0,k.jsx)("span",{style:m.errorMessage,children:o})]})]})}yp.displayName="TemplateImageCarouselContext";var Zp=()=>a(286735);function Ap(e){const t=(0,d().YB)(),{generationFn:a,validationFn:r}=e,[n,o]=(0,i.useState)("idle"),[s,l]=(0,i.useState)(null);return{status:n,errorMessage:s,onScreenshotGeneration:async()=>{try{l(null),o("parsing"),await r(),o("uploading"),await a(),o("success")}catch(e){o("error"),e instanceof Error?l(e.message):l(t.formatMessage({id:"templates.screenshotGeneration.generic.error",defaultMessage:"Unable to generate screenshot. Please try again."}))}}}}function Vp(e){const{inputProps:t,buttonProps:a}=e,i=(0,o().yK)((()=>({linkContainer:{display:"flex",alignItems:"center",gap:"20px"}})),[]);return(0,k.jsxs)("div",{style:i.linkContainer,children:[(0,k.jsx)(or().Z,{...t}),(0,k.jsx)(Ji().z,{...a,children:(0,k.jsx)(d()._H,{defaultMessage:"Generate",id:"creatorProfile.templateImageUploader.dialog.link.generate"})})]})}function Np(e){const{status:t,left:a,children:i}=e,r=(0,o().yK)((e=>({statusContainer:{display:"flex",alignItems:"center",gap:"2px"},statusText:{fontSize:"12px"},parsingText:{color:"rgba(17, 17, 17, 0.5)"},generatingText:{color:"rgba(39, 145, 141, 1)"},successText:{color:"rgba(42, 157, 153, 1)"},errorText:{color:e.accentColors.red[500]}})),[]),n={...r.statusText,..."parsing"===t?r.parsingText:{},..."uploading"===t?r.generatingText:{},..."success"===t?r.successText:{},..."error"===t?r.errorText:{}};return(0,k.jsxs)("div",{style:{...r.statusContainer,...n},children:[a,i]})}function zp(e){const{onToggle:t,type:a}=e,s=(0,r().O7)(),l=(0,o().yK)((e=>({templateLinkContainer:{display:"flex",flexDirection:"column",gap:"4px"},templateLinkInput:{backgroundColor:e.white,height:"36px",width:"303px"},checkmarkIcon:{width:"14px",height:"14px"},uploadStatusMessageContainer:{width:"303px"}})),[]),c=is(),u=Tp(),{desktopImage:p,mobileImage:g,errorMessage:m}=(0,n().VK)((()=>sp().default.state),[]),{screenshots:f}=(0,n().VK)((()=>tu().default.state),[]),{status:h,onScreenshotGeneration:b,errorMessage:y}=Ap({validationFn:async()=>{try{const e=await async function(e){const t=tu().default.state,{environment:a,url:i}=e;if(!i){const e=new(Ii().XV)("Missing template URL.",{type:"template_missing_url"});return{success:!1,error:(0,Pa().nX)(z().Z.getIntl(),e.body)}}const r=(0,Re().parseRoute)({url:i.trim(),baseUrl:Be().default.domainBaseUrl,isMobile:a.device.isMobile,publicDomainName:Be().default.publicDomainName,protocol:Be().default.protocol,currentUrl:window.location.href});if(!r||"page"!==r.name||!r.blockId){const e=new(Ii().XV)(`Invalid template URL ${i}`,{type:"template_not_exists"});return{success:!1,error:(0,Pa().nX)(z().Z.getIntl(),e.body)}}if(!r.requestedOnPublicDomain){const e=new(Ii().XV)(`Template ${i} is not on public domain`,{type:"template_not_on_public_domain"});return{success:!1,error:(0,Pa().nX)(z().Z.getIntl(),e.body)}}if("page"===r.name){const e=new(xt().G)(a,{table:li().iU,id:r.blockId});await(0,op().M1)(e);const i=(0,np().uJ)(e);let n=!1;for(const a of i)if(a.id===t.uuid){n=!0;break}if(!n){const e=new(Ii().XV)("This link doesn’t seem to belong to the same template. Please try again.",{type:"template_not_child_of_parent"});return{success:!1,error:(0,Pa().nX)(z().Z.getIntl(),e.body)}}}return{success:!0}}({environment:s,url:x});if(!e.success)throw new Error(e.error)}catch(e){throw e}},generationFn:async()=>{const e=Kp(a,x);try{await async function(e){const{url:t,environment:a}=e,i=await eu({url:t,environment:a}).catch((e=>{throw e}));return i&&"value"in i&&cp({desktopImage:i.value.desktop,mobileImage:i.value.mobile}),!0}({environment:s,url:e})}catch(t){throw t}}}),[x,_]=(0,i.useState)(""),w=f&&f.length===v().R2&&"new"===a,C="uploading"===h||"parsing"===h||w,S=(0,i.useCallback)((()=>{const e=Kp(a,x);_(e);try{sp().default.setState({...sp().default.state,isUploading:!0}),b()}catch(t){}finally{sp().default.setState({...sp().default.state,isUploading:!1})}}),[b,x,a]);return(0,k.jsxs)("div",{style:u.imageUploadTabViewContainer,children:[(0,k.jsxs)("div",{style:u.imagesContainer,children:[(0,k.jsx)(Rp,{isStatic:"cover"===a,style:u.desktopImageContainer,isUploading:"uploading"===h,imageUrl:p.url,emptyState:(0,k.jsx)(Ep,{isCustomImageUpload:!1,isDisabled:C}),imageOverlay:(0,k.jsx)(Bp,{onClick:()=>pp()}),disabled:C}),(0,k.jsx)(Rp,{isStatic:"cover"===a,style:u.mobileImageContainer,isUploading:"uploading"===h,imageUrl:g.url,emptyState:(0,k.jsx)(Hp,{isCustomImageUpload:!1,isDisabled:C}),imageOverlay:(0,k.jsx)(Bp,{onClick:()=>gp()}),disabled:C})]}),(0,k.jsxs)("div",{style:u.toggleAndInputContainer,children:["cover"!==a?(0,k.jsx)(Dp,{isActive:!1,onClick:t,disabled:C}):null,(0,k.jsxs)("div",{style:l.templateLinkContainer,children:[(0,k.jsx)(Vp,{inputProps:{format:or().B.Default,placeholder:"https://",value:x,style:{...l.templateLinkInput,...C?c.inputDisabled:{}},inputStyle:{...C?c.noCursorAllowed:{}},onChange:e=>_(e.target.value),type:"url",disabled:C},buttonProps:{onClick:S,variant:"light",disabled:!x.startsWith("https://")||C}}),(0,k.jsxs)("div",{style:l.uploadStatusMessageContainer,children:[w&&(0,k.jsx)(Pp,{children:(0,k.jsx)(d()._H,{id:"creatorPlatform.template.imageUpload.status.maxLimit",defaultMessage:"You can only upload a maximum of {maxNumImages} images.",values:{maxNumImages:v().R2}})}),"idle"!==h&&(0,k.jsx)(Np,{status:h,left:"success"===h?(0,k.jsx)("span",{children:(0,Zp().$)(l.checkmarkIcon)}):void 0,children:(0,k.jsx)(Op,{status:h,errorMessage:y})}),m?(0,k.jsx)("span",{style:u.errorMessage,children:m}):null]})]})]})]})}function Op(e){const{status:t,errorMessage:a}=e;return"parsing"===t?(0,k.jsx)(d()._H,{id:"creatorPlatform.template.imageUpload.templateLink.status.parsing",defaultMessage:"Parsing link..."}):"uploading"===t?(0,k.jsx)(d()._H,{id:"creatorPlatform.template.imageUpload.templateLink.status.generating",defaultMessage:"Generating Preview..."}):"success"===t?(0,k.jsx)(d()._H,{id:"creatorPlatform.template.imageUpload.templateLink.status.success",defaultMessage:"Preview saved."}):"error"===t?(0,k.jsx)(k.Fragment,{children:a}):void(0,V().t1)(t)}function Kp(e,t){if("cover"===e){const e=new URL(t);return`${e.origin}${e.pathname}`}return t}function qp(e){const{type:t}=e,[a,r]=(0,i.useState)(!1),n=i.useCallback((()=>{r((e=>!e))}),[]);return a&&"cover"!==t?(0,k.jsx)(Fp,{onToggle:n,type:t}):(0,k.jsx)(zp,{onToggle:n,type:t})}function Wp(){const e=(0,n().VK)((()=>lp().default.state.video),[]),t=(0,n().VK)((()=>tu().default.state.videos||[]),[]),a=(0,d().YB)(),s=(0,r().O7)(),[l,c]=(0,i.useState)(""),[u,p]=(0,i.useState)((()=>(null==e?void 0:e.url)||"")),g=is(),m=(0,o().yK)((e=>({videoTabContainer:{display:"flex",flexDirection:"column",gap:"10px"},iframeContainer:{width:"400px",height:"224px",position:"relative",background:"rgba(0, 0, 0, 1)"},videoLinkInputContainer:{display:"flex",flexDirection:"column",gap:"4px"},videoLinkInput:{background:"none",height:"36px",width:"303px",padding:"8px 14px"},statusMessageContainer:{width:"303px"}})),[]),{status:f,onScreenshotGeneration:h,errorMessage:b}=Ap({validationFn:async()=>{},generationFn:async()=>{const e=await(0,dp().nC)({environment:s,url:u});if(!e.success)throw new Error(e.error);(0,dp().CO)({video:e.templateVideo})}});(0,i.useEffect)((()=>{e?(async()=>{if(e){const t=await(0,dp().s$)({environment:s,video:e});c(t.iFrameSrcUrl)}})():(c(""),p(""))}),[e,s]);const y="parsing"===f||"error"===f,v=0!==t.length&&!e;return(0,k.jsxs)("div",{style:m.videoTabContainer,children:[l&&(0,k.jsx)("div",{style:m.iframeContainer,children:(0,k.jsx)(fp().Z,{source:l,background:!1,style:m.iframeContainer,isFullHeight:!0,isFullWidth:!0})}),(0,k.jsxs)("div",{style:m.videoLinkInputContainer,children:[(0,k.jsx)(Vp,{inputProps:{format:or().B.Default,placeholder:a.formatMessage({id:"creatorPlatform.templates.imageUpload.video.link.placeholder",defaultMessage:"Enter YouTube or Vimeo link..."}),value:u,onChange:e=>p(e.target.value),type:"url",disabled:v,style:{...m.videoLinkInput,...v?g.inputDisabled:{}},inputStyle:v?g.noCursorAllowed:{}},buttonProps:{onClick:h,variant:"light",disabled:0===u.length||v}}),(0,k.jsxs)("div",{style:m.statusMessageContainer,children:[v&&(0,k.jsx)(Pp,{children:(0,k.jsx)(d()._H,{id:"creatorPlatform.template.videoUpload.status.maxLimit",defaultMessage:"Only one preview video is supported at this time."})}),y&&(0,k.jsx)(Np,{status:f,children:(0,k.jsx)(Gp,{status:f,errorMessage:b})})]})]})]})}function Gp(e){const{status:t,errorMessage:a}=e;return"parsing"===t?(0,k.jsx)(d()._H,{id:"creatorPlatform.template.imageUpload.templateLink.status.parsing",defaultMessage:"Parsing link..."}):"error"===t?(0,k.jsx)(k.Fragment,{children:a}):void(0,V().t1)(t)}function $p(e){const{selectedIndex:t,onTabChange:a,type:i}=e,r=(0,o().yK)((e=>({tab:{color:"rgba(17, 17, 17, 0.5)"},selectedTab:{color:e.regularTextColor}})),[]),n=Object.keys(Xp).filter((e=>"cover"!==i||"image"===e)).map((e=>{if((0,V().qg)(Xp,e))return Xp[e].tabLabel}));return(0,k.jsx)(De().Z,{tabs:n,selectedIndex:t,onChange:e=>{a(e)},tabStyle:r.tab,selectedTabStyle:r.selectedTab})}const Yp=["image","video"],Xp={image:{index:Yp.indexOf("image"),tabLabel:(0,k.jsx)("span",{children:(0,k.jsx)(d()._H,{id:"creatorProfile.templates.imageUpload.tabs.image",defaultMessage:"Image"})},"templateImageUploadTab-image")},video:{index:Yp.indexOf("video"),tabLabel:(0,k.jsx)("span",{children:(0,k.jsx)(d()._H,{id:"creatorProfile.templates.imageUpload.tabs.video",defaultMessage:"Video"})},"templateImageUploadTab-video")}};function Jp(e){const t=(0,r().O7)(),{type:a}=e,[s,l]=(0,i.useState)("video"===a?1:0),c=(0,o().yK)((e=>({imageDialogContainer:{display:"flex",flexDirection:"column"},tabMenuDialogContainer:{position:"relative",marginBottom:"20px"},removeButton:{position:"absolute",top:8,right:0,fontSize:"13.5px",color:e.accentColors.red[500],zIndex:2},actionContainer:{display:"flex",justifyContent:"flex-end",paddingRight:"0",marginTop:"24px",marginBottom:"-10px",gap:"12px"}})),[]),u=(0,d().YB)(),{desktopImage:p,mobileImage:g}=(0,n().VK)((()=>sp().default.state),[]),{video:m}=(0,n().VK)((()=>lp().default.state),[]),f=i.useCallback((()=>{const e=function(e){const{intl:t}=e,{desktopImage:a,mobileImage:i}=sp().default.state;return i.url&&!a.url?(sp().default.setState({...sp().default.state,errorMessage:t.formatMessage({id:"creatorPlatform.template.imageUpload.desktopImage.required.error",defaultMessage:"Desktop image is required."})}),!1):!(a.url&&!i.url&&(sp().default.setState({...sp().default.state,errorMessage:t.formatMessage({id:"creatorPlatform.template.imageUpload.mobileImage.required.error",defaultMessage:"Mobile image is required."})}),1))}({intl:u});e&&(!function(e,t){var a,i;const{desktopImage:r,mobileImage:n,index:o}=sp().default.state,s=[...tu().default.state.screenshots||[]],l=[...tu().default.state.mobileScreenshots||[]];if((void 0!==o||r.url||n.url)&&(void 0===o||r.url!==(null===(a=s[o])||void 0===a?void 0:a.url)||n.url!==(null===(i=l[o])||void 0===i?void 0:i.url)))if(void 0===o||r.url||n.url){if("cover"===e)return S().K4(t,"creator_profile_template_update_cover"),void(r.url&&n.url&&tu().default.setState({...tu().default.state,image:r,mobileImage:n}));void 0===o?(s.push(r),l.push(n)):(s[o]=r,l[o]=n),S().K4(t,"creator_profile_template_add_image_preview"),tu().default.setState({...tu().default.state,screenshots:s,mobileScreenshots:l})}else up(o)}(a,t),(0,dp().fB)(t),_().lo())}),[u,a,t]),h=i.useCallback((e=>{l(e)}),[]),b=0===s&&(Boolean(null==p?void 0:p.url)||Boolean(null==g?void 0:g.url)),y="cover"!==a&&(b||1===s&&m);return(0,k.jsxs)("div",{style:c.imageDialogContainer,children:[(0,k.jsxs)("div",{style:c.tabMenuDialogContainer,children:[(0,k.jsx)($p,{selectedIndex:s,onTabChange:h,type:a}),y&&(0,k.jsx)(j().Z,{onClick:()=>{sp().default.setState({...sp().default.state,desktopImage:sp().iH,mobileImage:sp().RK}),(0,dp().uk)()},style:c.removeButton,children:(0,k.jsx)(d()._H,{id:"creatorPlatform.templates.imageUpload.remove",defaultMessage:"Remove"})})]}),(0,k.jsx)("div",{children:0===s?(0,k.jsx)(qp,{type:a}):1===s?(0,k.jsx)(Wp,{}):null}),(0,k.jsxs)("div",{style:c.actionContainer,children:[(0,k.jsx)(Ji().z,{variant:"neutral",onClick:()=>_().lo(),children:(0,k.jsx)(d()._H,{defaultMessage:"Cancel",id:"creatorPlatform.templates.imageUpload.cancel"})}),(0,k.jsx)(Ji().z,{variant:"dark",onClick:f,children:(0,k.jsx)(d()._H,{defaultMessage:"Save",id:"creatorPlatform.templates.imageUpload.save"})})]})]})}function Qp(e){const{type:t}=e,a=(0,o().yK)((e=>({imageUploaderHeaderContainer:{display:"flex",flexDirection:"column",gap:"4px"},imageUploaderHeader:{fontSize:"24px",fontWeight:L().Ue.bold,color:e.regularTextColor},imageUploaderSubheader:{fontSize:"15px",color:e.regularTextColor},closeIconButtonContainer:{position:"absolute",top:"12px",right:"12px"},closeIconButton:{padding:"4px"},closeIconDisabled:{cursor:"not-allowed"},closeIconButtonHovered:{background:"rgba(0, 0, 0, 0.04)",borderRadius:"4px"},closeIcon:{width:"20px",height:"20px"}})),[]),{isUploading:r}=(0,n().VK)((()=>sp().default.state),[]),s=(0,i.useCallback)((()=>{_().lo()}),[]);return(0,k.jsxs)("div",{style:a.imageUploaderHeaderContainer,children:[(0,k.jsx)("div",{style:a.closeIconButtonContainer,children:(0,k.jsx)(j().Z,{style:{...a.closeIconButton,...r?a.closeIconDisabled:{}},hoveredStyle:a.closeIconButtonHovered,onClick:s,disabled:r,children:(0,k.jsx)("span",{children:(0,M().U)(a.closeIcon)})})}),(0,k.jsx)("span",{style:a.imageUploaderHeader,children:(0,k.jsx)(eg,{type:t})}),(0,k.jsx)("span",{style:a.imageUploaderSubheader,children:(0,k.jsx)(tg,{type:t})})]})}function eg(e){const{type:t}=e;return"image"===t||"new"===t?(0,k.jsx)(d()._H,{id:"creatorProfile.templates.imageUpload.header.images",defaultMessage:"Add Preview"}):"cover"===t?(0,k.jsx)(d()._H,{id:"creatorProfile.templates.imageUpload.header.cover",defaultMessage:"Template Cover"}):"video"===t?(0,k.jsx)(d()._H,{id:"creatorProfile.templates.imageUpload.header.video",defaultMessage:"Add Video Preview"}):void(0,V().t1)(t)}function tg(e){const{type:t}=e;return"new"===t||"video"===t||"image"===t?(0,k.jsx)(d()._H,{id:"creatorProfile.templates.imageUpload.subheader",defaultMessage:"Link to another location in your template, upload your own images, or link to a video."}):"cover"===t?(0,k.jsx)(d()._H,{id:"creatorProfile.templates.imageUpload.subheader.cover",defaultMessage:"Cover is your template’s default preview image. It is automatically generated from its link, or can be set to another location in your template."}):void(0,V().t1)(t)}const ag=[{itemNode:(0,k.jsx)("div",{}),mainNode:(0,k.jsx)(ng,{}),name:"loading"}];function ig(e){const{type:t,index:a}=e,i=(0,o().yK)((()=>({button:{position:"absolute",top:"4px",right:"4px",borderRadius:"12px",height:"24px",padding:"0px"},icon:{height:24,width:24,fill:"white"}})),[]),n=(0,r().O7)();return(0,k.jsx)(Ji().z,{variant:"dark",style:i.button,onClick:()=>function(e){const{index:t,type:a,environment:i}=e;"image"===a?(S().K4(i,"creator_profile_template_remove_image_preview"),up(t)):"video"===a&&(S().K4(i,"creator_profile_template_remove_video_preview"),(0,dp().aX)(t))}({type:t,index:a,environment:n}),children:(0,rp().B)(i.icon)})}function rg(){const e=is(),t=(0,o().yK)((e=>({addPreviewThumbnailContainer:{display:"flex",height:"110px",alignItems:"center",flexDirection:"column",justifyContent:"center",gap:"4px",borderRadius:"6px",border:"1px solid rgba(0, 0, 0, 0.04)",backgroundColor:"rgba(246, 245, 244, 1)",cursor:"pointer"},addPreviewIcon:{width:"18px",height:"18px"},addPreviewText:{fontSize:"13.5px",color:"rgba(102, 102, 102, 1)"},imageUploaderDialog:{width:"456px"},mainImageEditContainer:{opacity:0,position:"absolute",bottom:"12px",right:"12px",transition:"opacity 180ms",display:"flex",gap:"14px"},hoveredMainImageEditContainer:{opacity:1},errorMessage:{fontSize:12,color:e.errorText}})),[]),a=(0,r().O7)(),{screenshots:i,coverImage:s,hasImages:l,videos:c,imageError:u,status:p,isGeneratingImage:g}=(0,n().VK)((()=>{const{mobileImage:e,image:t,mobileScreenshots:a,screenshots:i,imageError:r,videos:n,status:o,isGeneratingImage:s}=tu().default.state,l={mobile:e,desktop:t},d=null==i?void 0:i.map(((e,t)=>({mobile:null==a?void 0:a[t],desktop:e})));return{coverImage:l,hasImages:Boolean(t&&t.url),screenshots:d,videos:n,status:o,isGeneratingImage:s,imageError:r}}),[]),m=(0,mp().a)({videos:c}),f="in_review"===p||g,h=e=>{!function(e){"image"===e.type||"cover"===e.type?sp().default.setState({...sp().default.state,desktopImage:e.desktopImage,mobileImage:e.mobileImage,index:e.index}):"video"===e.type?lp().default.setState({video:e.video,index:e.index}):"new"===e.type&&(sp().default.reset(),lp().default.reset())}(e),_().vC({items:[],message:(0,k.jsx)(Qp,{type:e.type}),description:(0,k.jsx)(Jp,{type:e.type}),showCancel:!1,keepFocus:!0,mode:"wide",innerStyle:t.imageUploaderDialog,disableBackgroundDismiss:!0,onDismiss:()=>{sp().default.reset(),lp().default.reset()}})},b=[{itemNode:(0,k.jsx)(kp,{data:s}),mainNode:(0,k.jsx)(og,{children:e=>{let{isHovered:i,isTouchDevice:r}=e;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Mp,{data:s,isHovered:i&&!f,isGeneratingImage:g}),void 0===s.desktop||f?null:(0,k.jsxs)("div",{style:{...t.mainImageEditContainer,...i||r?t.hoveredMainImageEditContainer:{}},children:[(0,k.jsx)(Ji().z,{variant:"light",onClick:()=>ju(a),children:(0,k.jsx)(d()._H,{defaultMessage:"Regenerate",id:"creatorProfile.imageUploader.main.regenCover"})}),(0,k.jsx)(Ji().z,{variant:"light",onClick:()=>h({desktopImage:s.desktop||sp().iH,mobileImage:s.mobile||sp().RK,index:0,type:"cover"}),children:(0,k.jsx)(d()._H,{defaultMessage:"Edit Cover",id:"creatorProfile.imageUploader.main.editCover"})})]})]})}}),name:"cover-image"},...m.map(((e,a)=>({itemNode:(0,k.jsx)(og,{children:t=>{let{isHovered:i,isTouchDevice:r}=t;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(jp,{data:e}),!i&&!r||f?null:(0,k.jsx)(ig,{index:a,type:"video"})]})}}),mainNode:(0,k.jsx)(og,{children:i=>{let{isHovered:r,isTouchDevice:n}=i;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Sp,{data:e}),!f&&(0,k.jsx)(Ji().z,{style:{...t.mainImageEditContainer,...r||n?t.hoveredMainImageEditContainer:{}},variant:"light",onClick:()=>h({type:"video",index:a,video:c[a]}),children:(0,k.jsx)(d()._H,{defaultMessage:"Edit Video",id:"creatorProfile.imageUploader.main.editVideo"})})]})}}),name:`video-${a}`}))),...i?i.map(((e,a)=>{var i;return{itemNode:(0,k.jsx)(og,{children:t=>{let{isHovered:i,isTouchDevice:r}=t;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(kp,{data:e}),!i&&!r||f?null:(0,k.jsx)(ig,{index:a,type:"image"})]})}}),mainNode:(0,k.jsx)(og,{children:i=>{let{isHovered:r,isTouchDevice:n}=i;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Mp,{data:e,isHovered:r&&!f}),!f&&(0,k.jsx)(Ji().z,{variant:"light",onClick:()=>h({desktopImage:e.desktop,mobileImage:e.mobile||sp().RK,index:a,type:"image"}),style:{...t.mainImageEditContainer,...r||n?t.hoveredMainImageEditContainer:{}},children:(0,k.jsx)(d()._H,{defaultMessage:"Edit Preview",id:"creatorProfile.imageUploader.main.editPreview"})})]})}}),name:`${`${null==e||null===(i=e.desktop)||void 0===i?void 0:i.url}-${a}`||`image-${a}`} `}})):[],{itemNode:(0,k.jsxs)("div",{style:{...t.addPreviewThumbnailContainer,...f?e.noCursorAllowed:{}},children:[(0,k.jsx)("span",{children:(0,zd().e)(t.addPreviewIcon)}),(0,k.jsx)("span",{style:t.addPreviewText,children:(0,k.jsx)(d()._H,{id:"creatorProfile.templates.imageUpload.addPreview",defaultMessage:"Add Preview"})})]}),mainNode:null,onItemClick:()=>{f||(S().K4(a,"creator_profile_click_template_add_preview"),h({type:"new"}))},name:"add-preview"}];return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(xp,{items:l?b:ag,shouldNotShowCarousel:!l}),u?(0,k.jsx)("div",{style:t.errorMessage,children:u}):null]})}function ng(){const e=(0,o().yK)((()=>({loadingContainer:{boxShadow:"\n\t\t\t\t0px 0.6666666865348816px 3.502314805984497px 0px rgba(0, 0, 0, 0.0096),\n\t\t\t\t0px 2.933333396911621px 7.251852035522461px 0px rgba(0, 0, 0, 0.0157),\n\t\t\t\t0px 7.199999809265137px 14.462499618530273px 0px rgba(0, 0, 0, 0.02),\n \t\t\t\t0px 13.866666793823242px 28.348148345947266px 0px rgba(0, 0, 0, 0.0243),\n\t\t\t\t0px 23.33333396911621px 52.122684478759766px 0px rgba(0, 0, 0, 0.0304),\n\t\t\t\t0px 36px 89px 0px rgba(0, 0, 0, 0.04)\n\t\t\t\t",backgroundColor:"rgba(246, 245, 244, 1)",aspectRatio:2.15,width:"100%",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"6px"},loadingContainerCopy:{color:"rgba(191, 191, 191, 1)",fontSize:"24px",lineHeight:"30px",padding:"24px",fontWeight:L().Ue.semibold,textAlign:"center"}})),[]),t=(0,n().VK)((()=>{const{isGeneratingImage:e}=tu().default.state;return e}),[])?(0,k.jsx)(d()._H,{id:"creatorProfile.templates.imageUpload.generatingPreview",defaultMessage:"Generating image..."}):(0,k.jsx)(d()._H,{id:"creatorProfile.templates.imageUpload.generatePreview",defaultMessage:"Enter template link to generate cover image"});return(0,k.jsx)("div",{style:e.loadingContainer,children:(0,k.jsx)("span",{style:e.loadingContainerCopy,children:t})})}function og(e){const{children:t}=e,a=(0,o().yK)((()=>({mainItemContainer:{width:"100%",height:"100%",position:"relative"}})),[]),r=i.useRef(null),{isHovered:n,isTouchDevice:s}=Lr(r);return(0,k.jsx)("div",{style:a.mainItemContainer,ref:r,children:t?t({isHovered:!s&&n,isTouchDevice:s}):null})}function sg(e){const{disabled:t}=e,a=(0,o().yK)((e=>({selectInputButton:{border:"none",boxShadow:e.inputBoxShadow,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"12px 14px"},selectText:{height:"20px",fontSize:14,lineHeight:"20px"},selectChevron:{width:16,height:16,fill:e.lightTextColor}})),[]),i=is(),r=(0,d().YB)(),s=(0,n().VK)((()=>(0,pr().t)(r)),[r]),{selectedLocale:l}=(0,n().VK)((()=>({selectedLocale:tu().default.state.locale??A().al})),[]),c={items:[...A().uI],getKey:e=>e,selectedItem:l,onSelect:e=>{const t=tu().default.state;tu().default.setState({...t,locale:e})},originGap:6,width:200,renderItem:e=>{const t=s[e.value];return(0,k.jsx)(it().Z,{...e,title:null==t?void 0:t.label,caption:null==t?void 0:t.caption})},renderOrigin:e=>{var r;return(0,k.jsxs)(wa().Z,{isLarge:!0,...e,style:{...a.selectInputButton,...t?i.inputDisabled:{}},disabled:t,children:[(0,k.jsx)("span",{style:a.selectText,children:null===(r=s[l])||void 0===r?void 0:r.label}),(0,uo().i)(a.selectChevron)]})},disabled:t};return(0,k.jsx)(nt().Z,{...c})}var lg=()=>a(522319);function dg(e){const{submittingState:t,isDirty:a,handleSubmit:o}=e,{setView:s,name:l}=Ge(),{type:d,id:c}=$(l),{isMobileWidth:u}=(0,m().EQ)(),p=cg(),g=(0,r().O7)(),f=(0,n().VK)((()=>tu().default.state.templateDraftId),[]),h=Bu(),b=(0,n().VK)((()=>tu().default.state.locale),[]),y=Hu(f),{isFeatureEnabled:v}=(0,Xe().o)("self_serve_localization_frontend"),{isFeatureEnabled:w}=(0,Xe().o)("template_listing_translate"),S=(0,n().VK)((()=>ru.getDefaultLocaleTemplate()),[]),j=v?"published"===d&&h:"published"===d,M=function(e,t,a,i){return!(!e||!t)&&!(a||"in_review"===i||"draft"===i&&a)}(v,w,h,y),I="rejected"===y||"draft"===y||a,T=(0,n().VK)((()=>su.state.isTranslating),[]),P=ne(y,"published"===d),D=i.useCallback((()=>{oe().default.reset(),s("/profile/templates",!0),Cu()}),[s]),L=i.useCallback((async()=>{if((await _().gt(v?pg:ug)).accept&&c){let e=!1;e=v?await async function(e){const{environment:t,templateId:a,locale:i}=e;return"success"===(await x().callApi({eventName:"deleteLocalizedTemplates",environment:t,data:{templateId:a,locale:i}})).type}({environment:g,templateId:c,locale:b}):await pe({environment:g,id:c}),e&&(D(),C().oV({label:(0,k.jsx)(vd,{})}))}}),[c,g,D,b,v]),E=i.useCallback((async()=>{const e="draft"===y||"rejected"===y;if((await _().gt(gg)).accept)if(e&&f){await ue({environment:g,id:f})&&(D(),C().oV({label:(0,k.jsx)(xd,{})}))}else D(),C().oV({label:(0,k.jsx)(xd,{})})}),[g,D,y,f]),R=i.useCallback((async()=>{b&&null!=S&&S.id&&(su.openModal(),await ku({environment:g,data:{templateId:S.id,targetLocale:b}}))}),[g,b,null==S?void 0:S.id]);return(0,k.jsx)("section",{children:(0,k.jsxs)("div",{style:u?p.formActionsMobile:p.formActions,children:[(0,k.jsx)(mg,{onDeleteTemplate:L,onDeleteTemplateDraft:E,isDeleteDisabled:!1!==t,isDiscardDisabled:!1!==t,shouldRenderDelete:j,shouldRenderDiscard:I,isPublished:"published"===d,shouldRenderRegenerateTranslation:M,onRegenerateTranslation:R,isRegenerateTranslationDisabled:T}),(0,k.jsx)(fg,{onSaveTemplateDraft:()=>o("save_draft"),onSubmitTemplateDraft:()=>o("publish"),isSaveDisabled:!a||!1!==t,isSubmitDisabled:"published"===d&&"published_draft"!==P&&!a||!1!==t,isSaveLoading:"save_draft"===t,isSubmitLoading:"publish"===t})]})})}function cg(){return(0,o().yK)((()=>({formActions:{display:"flex",justifyContent:"space-between",alignItems:"center"},formActionsMobile:{display:"flex",flexDirection:"column-reverse",alignItems:"center",gap:"24px"},deleteAndDiscardContainer:{display:"flex",gap:"12px"},deleteAndDiscardMobileContainer:{display:"flex",alignItems:"center",gap:"20px"},saveAndSubmitContainer:{display:"flex",gap:"12px"},saveAndSubmitMobileContainer:{display:"flex",flexDirection:"column",width:"100%",gap:"12px"}})),[])}const ug={message:(0,k.jsx)("div",{style:{fontSize:"24px",fontWeight:L().Ue.bold,lineHeight:"30px"},children:(0,k.jsx)(d()._H,{defaultMessage:"Are you sure?",id:"creatorProfile.deleteTemplate.header"})}),description:(0,k.jsx)("div",{style:{color:c().ZP.black},children:(0,k.jsx)(d()._H,{defaultMessage:"You can’t recover this template once it has been deleted.",id:"creatorProfile.deleteTemplate.description"})}),acceptLabel:(0,k.jsx)(d()._H,{defaultMessage:"Yes, delete",id:"creatorProfile.deleteTemplate.confirm"}),cancelLabel:(0,k.jsx)(d()._H,{defaultMessage:"Cancel",id:"creatorProfile.deleteTemplate.reject"})},pg={message:(0,k.jsx)("div",{style:{fontSize:"24px",fontWeight:L().Ue.bold,lineHeight:"30px"},children:(0,k.jsx)(d()._H,{defaultMessage:"Are you sure?",id:"creatorProfile.deleteLocalizedTemplates.header"})}),description:(0,k.jsx)("div",{style:{color:c().ZP.black},children:(0,k.jsx)(d()._H,{defaultMessage:"Deleting this template will remove all localized versions and cannot be undone. You can’t recover these templates once they have been deleted.",id:"creatorProfile.deleteLocalizedTemplates.description"})}),acceptLabel:(0,k.jsx)(d()._H,{defaultMessage:"Yes, delete",id:"creatorProfile.deleteTemplate.confirm"}),cancelLabel:(0,k.jsx)(d()._H,{defaultMessage:"Cancel",id:"creatorProfile.deleteTemplate.reject"})},gg={message:(0,k.jsx)("div",{style:{fontSize:"24px",fontWeight:L().Ue.bold,lineHeight:"30px"},children:(0,k.jsx)(d()._H,{defaultMessage:"Are you sure?",id:"creatorProfile.discardTemplateDraft.header"})}),description:(0,k.jsx)("div",{style:{color:c().ZP.black},children:(0,k.jsx)(d()._H,{defaultMessage:"You can’t recover this template draft once it has been discarded.",id:"creatorProfile.discardTemplateDraft.description"})}),acceptLabel:(0,k.jsx)(d()._H,{defaultMessage:"Yes, discard",id:"creatorProfile.discardTemplateDraft.confirm"}),cancelLabel:(0,k.jsx)(d()._H,{defaultMessage:"Cancel",id:"creatorProfile.discardTemplateDraft.reject"})};function mg(e){const{onDeleteTemplate:t,onDeleteTemplateDraft:a,isDeleteDisabled:i,isDiscardDisabled:r,shouldRenderDelete:o,shouldRenderDiscard:s,isPublished:l,shouldRenderRegenerateTranslation:c,isRegenerateTranslationDisabled:u,onRegenerateTranslation:p}=e,g=cg(),{isMobileWidth:f}=(0,m().EQ)(),h=(0,n().VK)((()=>su.state.hasTranslated),[]);return(0,k.jsxs)("div",{style:f?g.deleteAndDiscardMobileContainer:g.deleteAndDiscardContainer,children:[o&&(0,k.jsx)(Ji().z,{variant:"warning",onClick:t,disabled:i,children:(0,k.jsx)(d()._H,{defaultMessage:"Delete template",id:"creatorProfile.templateForm.deleteTemplate"})},"deleteTemplateButton"),c&&(0,k.jsx)(Ji().z,{variant:"neutral",onClick:p,disabled:u,children:h?(0,k.jsx)(d()._H,{defaultMessage:"Re-generate translation",id:"creatorProfile.templateForm.regenerateTranslation"}):(0,k.jsx)(d()._H,{defaultMessage:"Generate translation",id:"creatorProfile.templateForm.generateTranslation"})},"regenerateTranslationButton"),s&&(0,k.jsx)(Ji().z,{variant:"neutral",onClick:a,disabled:r,children:l?(0,k.jsx)(d()._H,{defaultMessage:"Discard changes",id:"creatorProfile.templateForm.discardChanges"}):(0,k.jsx)(d()._H,{defaultMessage:"Discard draft",id:"creatorProfile.templateForm.discardDraft"})},"discardTemplateDraftButton")]})}function fg(e){const{onSaveTemplateDraft:t,onSubmitTemplateDraft:a,isSaveDisabled:i,isSubmitDisabled:r,isSaveLoading:n,isSubmitLoading:o}=e,s=cg(),{isMobileWidth:l}=(0,m().EQ)();return(0,k.jsxs)("div",{style:l?s.saveAndSubmitMobileContainer:s.saveAndSubmitContainer,children:[(0,k.jsx)(Ji().z,{variant:"light",onClick:t,isLoading:n,disabled:i,children:(0,k.jsx)(d()._H,{defaultMessage:"Save",id:"creatorProfile.templateForm.saveDraft"})},"saveTemplateDraftButton"),(0,k.jsx)(Ji().z,{variant:"dark",onClick:a,isLoading:o,disabled:r,children:(0,k.jsx)(d()._H,{defaultMessage:"Submit for review",id:"creatorProfile.templateForm.submit"})},"submitTemplateDraftForReviewButton")]})}function hg(){const e=(0,r().O7)(),t=(0,d().YB)(),a=function(e){let{width:t=400}=e;return(0,o().yK)((e=>({container:{display:"flex",flexDirection:"column",alignItems:"center",width:`${t}px`,padding:"20px"},iconStyle:{width:"28px",height:"28px",fill:e.blueColor},header:{display:"flex",flexDirection:"column",alignItems:"flex-start",textAlign:"left",gap:8,fontWeight:L().Ue.semibold,fontSize:16,marginTop:20,marginBottom:24},alignLeftContainer:{display:"flex",justifyContent:"flex-start",width:"100%"},languageDisplayList:{marginTop:8,display:"flex",flexDirection:"column",width:"100%"},languageSelect:{width:"100%"},innerButtonStyle:{padding:"8px 16px",height:34,width:"100%",display:"flex",justifyContent:"space-between"},selectedText:{color:e.regularTextColor},saveButton:{marginTop:20,width:"100%",textAlign:"center",display:"flex",justifyContent:"center"},removeCta:{color:e.redBadgeBackground},checkboxContainer:{display:"flex",gap:4,alignItems:"center",marginTop:12,marginBottom:12}})),[t])}({}),{isFeatureEnabled:s}=(0,Xe().o)("template_listing_translate"),[l,c]=(0,i.useState)(void 0),u=(0,n().VK)((()=>ru.state.locales),[]),p=(0,n().VK)((()=>ru.state.contentfulId),[]),{isOpen:g}=(0,n().Kw)(Au),m=(0,n().VK)((()=>su.state.shouldTranslate),[]),f=()=>{l&&p&&(ru.setLocales([...u,{locale:l}]),Ue().c4({url:`/profile/templates/form/new/${p}?locale=${l}`,environment:e})),Au.closeModal()},h=A().uI.filter((e=>!u.some((t=>t.locale===e)))),b=(0,i.useCallback)((()=>{Au.closeModal()}),[]);return(0,k.jsx)(Ta().c,{isOpen:g,onDismiss:b,showCloseIcon:!0,render:()=>(0,k.jsxs)("div",{style:a.container,children:[(0,k.jsx)("div",{style:a.alignLeftContainer,children:(0,fr().W)(a.iconStyle)}),(0,k.jsxs)("div",{style:a.header,children:[(0,k.jsx)(rt().q,{styleName:"Title-24px/Bold",children:(0,k.jsx)(d()._H,{id:"creatorProfile.templateLanguagePickerModal.title",defaultMessage:"Language versions"})}),(0,k.jsx)(rt().q,{styleName:"Body-14px/Regular",children:(0,k.jsx)(d()._H,{id:"creatorProfile.templateLanguagePickerModal.description",defaultMessage:"Form fields are separate in each language version of your template."})})]}),(0,k.jsx)("div",{style:a.alignLeftContainer,children:(0,k.jsx)(rt().q,{styleName:"Body-12px/Regular",color:"secondary",children:(0,k.jsx)(d()._H,{id:"creatorProfile.templateLanguagePickerModal.numLanguages",defaultMessage:"{num, number} languages",values:{num:u.length}})})}),(0,k.jsx)("div",{style:a.languageDisplayList,children:u.map((e=>(0,k.jsx)(bg,{localizedTemplate:e},e.locale)))}),h.length>0&&(0,k.jsx)(lg().Z,{style:a.languageSelect,innerButtonStyle:a.innerButtonStyle,renderMenuSections:e=>[{key:"addNewLanguage",render:e=>(0,k.jsx)(Qa().Z,{...e}),items:h.map((a=>({key:a,action:()=>{c(a),e.close()},render:e=>(0,k.jsx)(it().Z,{...e,title:(0,k.jsx)(rt().q,{styleName:"Body-13px/Regular",children:(0,pr().t)(t)[a].caption})})})))}],selectedTitle:(0,k.jsx)(rt().q,{styleName:"Body-14px/Regular",style:a.selectedText,children:l?(0,pr().t)(t)[l].caption:"Add a language"})}),(0,k.jsx)(Ie().h,{onClick:f,styles:a.saveButton,disabled:!l,children:(0,k.jsx)(d()._H,{defaultMessage:"Save",id:"creatorProfile.templateLanguagePickerModal.saveCta"})}),s&&(0,k.jsxs)("div",{style:a.checkboxContainer,children:[(0,k.jsx)(ao().Z,{checked:m,onClick:()=>{su.setShouldTranslate(!m)},size:14}),(0,k.jsx)("div",{onClick:()=>{su.setShouldTranslate(!m)},children:(0,k.jsx)(io().Z,{style:{cursor:"pointer"},isSmall:!0,children:(0,k.jsx)(d()._H,{defaultMessage:"Let Notion translate template listing",id:"creatorProfile.templateLanguagePickerModal.translateTemplateListing"})})})]})]}),animateSizeTransition:!1})}function bg(e){var t,a,n,s;let{localizedTemplate:l}=e;const c=(0,r().O7)(),[u,p]=(0,i.useState)(null),g=(0,o().yK)((e=>({languageItem:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"4px",padding:"8px 16px",borderRadius:"4px"},hoveredLanguageItem:{background:e.state.hover},removeCta:{color:e.redBadgeBackground},primaryLocale:{opacity:.5}})),[]),m=(0,d().YB)(),{setView:f}=Ge(),h=(null===(t=l.template)||void 0===t?void 0:t.template_draft_id)||(null===(a=l.templateDraft)||void 0===a?void 0:a.id),b=Hu(h),y=null===(n=l.template)||void 0===n?void 0:n.is_default_locale,v=function(e){var t,a,i;let{localizedTemplate:r,templateDraftStatus:n}=e;return!0!==(null==r||null===(t=r.template)||void 0===t?void 0:t.is_default_locale)&&"in_review"!==(null==r||null===(a=r.templateDraft)||void 0===a?void 0:a.status)&&"published"!==(null==r||null===(i=r.templateDraft)||void 0===i?void 0:i.status)&&!(null!=r&&r.template)}({localizedTemplate:l,templateDraftStatus:b}),x=function(e){var t,a;let{localizedTemplate:i,templateDraftStatus:r,shouldRenderDiscard:n}=e;return!n&&!0!==(null==i||null===(t=i.template)||void 0===t?void 0:t.is_default_locale)&&"in_review"!==(null==i||null===(a=i.templateDraft)||void 0===a?void 0:a.status)&&!(null==i||!i.template)&&"published"===r}({localizedTemplate:l,templateDraftStatus:b,shouldRenderDiscard:v}),w=null===(s=l.template)||void 0===s?void 0:s.id,S=i.useCallback((()=>{Au.closeModal(),f("/profile/templates",!0)}),[f]),j=i.useCallback((async()=>{if((await _().gt(ug)).accept&&w){await pe({environment:c,id:w})&&(S(),C().oV({label:(0,k.jsx)(vd,{})}))}}),[w,c,S]),M=i.useCallback((async()=>{const e="draft"===b||"rejected"===b;if((await _().gt(gg)).accept)if(e&&h){await ue({environment:c,id:h})&&(S(),C().oV({label:(0,k.jsx)(xd,{})}))}else S(),C().oV({label:(0,k.jsx)(xd,{})})}),[h,b,c,S]);return(0,k.jsxs)("div",{style:{...g.languageItem,...u&&g.hoveredLanguageItem},onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:[(0,k.jsx)(rt().q,{styleName:"Body-14px/Regular",children:(0,pr().t)(m)[l.locale].caption}),y&&(0,k.jsx)(rt().q,{styleName:"Body-12px/Regular",color:"tertiary",style:g.primaryLocale,children:(0,k.jsx)(d()._H,{id:"creatorProfile.templateLanguagePickerModal.primaryLocale",defaultMessage:"Primary"})}),u&&x&&(0,k.jsx)(oa().Z,{style:g.removeCta,onClick:()=>j(),hoveredStyle:{background:"transparent"},pressedStyle:{background:"transparent"},children:(0,k.jsx)(rt().q,{styleName:"Body-12px/Medium",color:"red",children:(0,k.jsx)(d()._H,{id:"creatorProfile.templateLanguagePickerModal.removeCta",defaultMessage:"Remove"})})}),u&&v&&(0,k.jsx)(oa().Z,{style:g.removeCta,onClick:()=>M(),hoveredStyle:{background:"transparent"},pressedStyle:{background:"transparent"},children:(0,k.jsx)(rt().q,{styleName:"Body-12px/Medium",color:"red",children:(0,k.jsx)(d()._H,{id:"creatorProfile.templateLanguagePickerModal.discardCta",defaultMessage:"Discard"})})})]})}const yg=["in_review","rejected","published","published_rejected","published_in_review","published_draft"];function vg(e){const{templateStatus:t,templateDraftId:a,isPublished:i,templateId:s}=e,l=function(){const{isDesktopWidth:e}=(0,m().EQ)();return(0,o().yK)((t=>({messageContainer:{maxWidth:"960px",minHeight:"60px",borderRadius:"8px",padding:"10px 24px 10px 24px",display:"flex",alignItems:"center",flexWrap:e?"nowrap":"wrap",gap:"10px",backgroundColor:"rgba(0, 0, 0, 0.03)",marginTop:"10px"},messageText:{color:t.regularTextColor,fontSize:"13.5px",flexShrink:e?10:"inherit"}})),[e])}(),c=(0,r().O7)(),{slug:u}=(0,n().VK)((()=>{if(i&&s){return{slug:new(xt().j$)(c,{table:"template",id:s}).getSlug()}}if(!a)return{};return{slug:new(xt().XG)(c,{table:"template_draft",id:a}).getSlug()}}),[c,a,i,s]),p=(0,pc().EE)(u),g=ne(t,i);return void 0===g||void 0===t?null:yg.includes(g)?(0,k.jsxs)("div",{style:l.messageContainer,children:[(0,k.jsx)(Hr,{templateStatus:g}),(0,k.jsx)("span",{style:l.messageText,children:(0,k.jsx)(xg,{templateStatus:g,templateDraftId:a,isPublished:i,templateId:s,slug:u})}),i?(0,k.jsx)(Ji().z,{variant:"neutral",onClick:()=>En().D({environment:c,url:p}),children:(0,k.jsx)(d()._H,{id:"creatorProfile.submissionForm.status.published.cta",defaultMessage:"View live template"})}):null]}):null}function xg(e){const{templateStatus:t,templateDraftId:a,slug:i}=e,r=(0,pc().EE)(i);return(0,k.jsxs)(k.Fragment,{children:["in_review"===t||"published_in_review"===t?(0,k.jsx)(d()._H,{id:"creatorProfile.submissionForm.status.inReview.message",defaultMessage:"Templates under review are not editable. Review time is 1-3 business days."}):null,"published"===t?(0,k.jsx)(d()._H,{id:"creatorProfile.submissionForm.status.published.message",defaultMessage:"Template is live at {url}",values:{url:r}}):null,"rejected"===t||"published_rejected"===t?(0,k.jsx)(Cg,{templateId:a}):null,"published_draft"===t?(0,k.jsx)(d()._H,{id:"creatorProfile.submissionForm.status.publishedDraft.Message",defaultMessage:"Template has unpublished changes"}):null]})}const _g=(0,d().vU)({bad_purchase_url:{id:"creatorProfile.submissionForm.status.rejected.badPurchaseUrl.message",defaultMessage:"We are unable to access the purchase link provided: {purchaseUrl}."},bad_public_url:{id:"creatorProfile.submissionForm.status.rejected.badPublicUrl.message",defaultMessage:"We are unable to access the Notion link provided: {publicSiteUrl}. Please make sure your template is public via the <b>Publish</b> tab in the <b>Share</b> menu."},duplication_not_enabled:{id:"creatorProfile.submissionForm.status.rejected.duplicationNotEnabled.message",defaultMessage:"Duplication wasn’t turned on. Make sure you turn on duplications via the <b>Published</b> tab in the <b>Share</b> menu."},bad_images:{id:"creatorProfile.submissionForm.status.rejected.badImages.message",defaultMessage:"The images or videos attached do not meet our standards."},title_notion_mention:{id:"creatorProfile.submissionForm.status.rejected.titleNotionMention.message",defaultMessage:"Please remove 'Notion' from your title and re-submit."},title_notion_template_mention:{id:"creatorProfile.submissionForm.status.rejected.titleNotionTemplateMention.message",defaultMessage:"Please remove 'Notion' and 'Template' from your title and re-submit."},title_template_mention:{id:"creatorProfile.submissionForm.status.rejected.titleTemplateMention.message",defaultMessage:"Please remove 'Template' from your title and re-submit."},language_mismatch:{id:"creatorProfile.submissionForm.status.rejected.languageMismatch.message",defaultMessage:"The content of your submission does not match the language selected. Please update the content or change to the correct language."},content_template:{id:"creatorProfile.submissionForm.status.rejected.contentTemplate.message",defaultMessage:"Your submission resembles a content product more than a template that other users can replicate and adjust for their own use-case. Whilst Notion can be used to publish and share such interesting and useful content, the Marketplace is not currently suitable for hosting them."},content_over_size_limit:{id:"templateReviewEmail.status.rejected.contentOverSizeLimit.message",defaultMessage:"Your template was rejected because it contains too many blocks ({numBlocks, number} blocks). We cap the size of templates at {maxNumBlocks, number} blocks to prevent duplication issues. You can edit the template to reduce its size and submit again for approval."},unsupported_language:{id:"creatorProfile.submissionForm.status.rejected.unsupportedLanguage.message",defaultMessage:"We currently support seven languages and are unable to list any template that is not in those. We are working on adding more!"},general_quality:{id:"creatorProfile.submissionForm.status.rejected.general.message",defaultMessage:"The template does not meet our quality criteria. You can edit and submit again."},restricted_content:{id:"creatorProfile.submissionForm.status.rejected.restrictedContent.message",defaultMessage:"The template contains content that is not allowed to be redistributed. Remove the content and re-submit."},payment_link_mismatch:{id:"templateReviewEmail.status.rejected.paymentLinkMismatch.message",defaultMessage:"The purchase link you provided doesn’t match the template you submitted! Please update the link and re-submit."},currency_mismatch:{id:"templateReviewEmail.status.rejected.currencyMismatch.message",defaultMessage:"The price of the template should be in USD. Please convert the currency of your template and re-submit."},unsupported_payment_method:{id:"templateReviewEmail.status.rejected.unsupportedPaymentMethod.message",defaultMessage:"We do not support the payment link you’ve submitted. The payment link must be for purchasing a specific product with a visible template title that delivers automatically upon purchase. Please update the purchase link and resubmit."},dark_mode_screenshot:{id:"templateReviewEmail.status.rejected.darkModeScreenshot.message",defaultMessage:"While your template looks great, we don’t accept dark mode screenshots for the first thumbnail. Please generate a new screenshot in light mode and resubmit."},private_subpage:{id:"templateReviewEmail.status.rejected.privateSubpage.message",defaultMessage:"Some of your template’s subpages are private and not accessible to users. Please edit your template to make all content accessible and able to be duplicated, then resubmit."}}),wg={bad_purchase_url:e=>{let{purchaseUrl:t}=e;return t?(0,k.jsx)(d()._H,{..._g.bad_purchase_url,values:{purchaseUrl:t}}):(0,k.jsx)(d()._H,{..._g.general_quality})},bad_public_url:e=>{let{publicSiteUrl:t}=e;return t?(0,k.jsx)(d()._H,{..._g.bad_public_url,values:{publicSiteUrl:t,b:e=>(0,k.jsx)("b",{children:e})}}):(0,k.jsx)(d()._H,{..._g.general_quality})},duplication_not_enabled:()=>(0,k.jsx)(d()._H,{..._g.duplication_not_enabled,values:{b:e=>(0,k.jsx)("b",{children:e})}}),bad_images:()=>(0,k.jsx)(d()._H,{..._g.bad_images,values:{a:e=>(0,k.jsx)("a",{href:"https://www.notion.com/help/how-to-submit-a-template",children:e})}}),title_notion_mention:()=>(0,k.jsx)(d()._H,{..._g.title_notion_mention}),title_notion_template_mention:()=>(0,k.jsx)(d()._H,{..._g.title_notion_template_mention}),title_template_mention:()=>(0,k.jsx)(d()._H,{..._g.title_template_mention}),language_mismatch:()=>(0,k.jsx)(d()._H,{..._g.language_mismatch}),unsupported_language:()=>(0,k.jsx)(d()._H,{..._g.unsupported_language}),content_template:()=>(0,k.jsx)(d()._H,{..._g.content_template}),content_over_size_limit:e=>{let{numBlocks:t,maxNumBlocks:a}=e;return(0,k.jsx)(d()._H,{..._g.content_over_size_limit,values:{numBlocks:t,maxNumBlocks:a}})},custom:e=>{let{customRejectReason:t}=e;return t?(0,k.jsx)(k.Fragment,{children:t}):(0,k.jsx)(d()._H,{..._g.general_quality})},general_quality:()=>(0,k.jsx)(d()._H,{..._g.general_quality}),restricted_content:()=>(0,k.jsx)(d()._H,{..._g.restricted_content}),payment_link_mismatch:()=>(0,k.jsx)(d()._H,{..._g.payment_link_mismatch}),currency_mismatch:()=>(0,k.jsx)(d()._H,{..._g.currency_mismatch}),unsupported_payment_method:()=>(0,k.jsx)(d()._H,{..._g.unsupported_payment_method}),dark_mode_screenshot:()=>(0,k.jsx)(d()._H,{..._g.dark_mode_screenshot}),private_subpage:()=>(0,k.jsx)(d()._H,{..._g.private_subpage})};function Cg(e){const{templateId:t}=e,a=(0,r().O7)(),{numBlocks:i,rejectReason:o,customRejectReason:s,purchaseUrl:l,publicSiteUrl:c}=(0,n().VK)((()=>{var e;if(void 0===t)return{};const i=new(xt().XG)(a,{table:Od().Az,id:t});return{numBlocks:null===(e=i.getDraftAttributes())||void 0===e?void 0:e.num_blocks,rejectReason:i.getRejectReason(),customRejectReason:i.getCustomRejectReason(),purchaseUrl:i.getPurchaseUrl(),publicSiteUrl:i.getTemplatePublicUrl()}}),[a,t]),u=(0,n().VK)((()=>qn().default.getConfigKey("template_limits","maxNumBlocks")),[]);if(void 0!==o){const e=(0,wg[o])({purchaseUrl:l,publicSiteUrl:c,customRejectReason:s,numBlocks:i,maxNumBlocks:u});return(0,k.jsx)(k.Fragment,{children:e})}return(0,k.jsx)(d()._H,{..._g.general_quality})}function Sg(){const e=function(e){let{width:t=400}=e;return(0,o().yK)((e=>({container:{display:"flex",flexDirection:"column",alignItems:"center",width:`${t}px`,padding:20},iconStyle:{width:28,height:28,fill:e.blueColor},header:{display:"flex",flexDirection:"column",alignItems:"flex-start",textAlign:"left",gap:8,fontWeight:L().Ue.semibold,fontSize:16,marginTop:20,marginBottom:24,width:"100%"},alignLeftContainer:{display:"flex",justifyContent:"flex-start",width:"100%"},skipButton:{marginTop:20,width:"100%",textAlign:"center",display:"flex",justifyContent:"center"}})),[t])}({}),{isOpen:t}=(0,n().Kw)(su);return(0,k.jsx)(Ta().c,{isOpen:t,render:()=>(0,k.jsxs)("div",{style:e.container,children:[(0,k.jsx)("div",{style:e.alignLeftContainer,children:(0,fr().W)(e.iconStyle)}),(0,k.jsx)("div",{style:e.header,children:(0,k.jsx)(rt().q,{styleName:"Title-24px/Bold",children:(0,k.jsx)(d()._H,{id:"creatorProfile.templateTranslationModal.title",defaultMessage:"Translating..."})})})]}),animateSizeTransition:!1,allowDismissByEscape:!1})}function jg(){const{isMobileWidth:e}=(0,m().EQ)(),t=(0,d().YB)(),a=(0,r().O7)(),[s,l]=i.useState(!1),c=function(){const{isMobileWidth:e}=(0,m().EQ)();return(0,o().yK)((()=>({formContainer:{display:"flex",flexDirection:"column",gap:"32px",maxWidth:"960px"},titleInput:{fontSize:e?30:36,lineHeight:e?"34px":"40px",fontWeight:L().Ue.semibold},noCursorAllowed:{cursor:"not-allowed"},inputStyle:{background:"none",padding:"8px 14px"},inputDisabled:{cursor:"not-allowed",backgroundColor:"rgba(0, 0, 0, 0.03)",color:"rgba(128, 128, 128, 1)"},formRow:{display:"flex",gap:"12px"},formRowMobile:{flexDirection:"column"},languageInput:{width:"33%"},languageInputMobile:{width:"100%"},fullDescription:{resize:"vertical"},urlSlugLeftContainer:{marginLeft:"-13px",padding:"9px 0px 9px 9px",marginRight:"-6px",fontSize:e?12:"inherit",borderTopLeftRadius:"4px",borderBottomLeftRadius:"4px",backgroundColor:"rgba(0, 0, 0, 0.03)",color:"rgba(128, 128, 128, 1)"}})),[e])}(),u=is(),p=i.useRef(null),{isFeatureEnabled:g}=(0,Xe().o)("self_serve_localization_frontend"),{isFeatureEnabled:f}=(0,Xe().o)("template_description_markdown_enabled"),{name:h,setView:y,searchParams:v}=Ge(),{type:_,id:w,contentfulId:C}=$(h),S=G(v);Uu({type:_,id:w,contentfulId:C,locale:g&&"new"===_?S:void 0});const j=hd(tu().default),M=(0,n().VK)((()=>uu(du(),!1)),[]),I=async e=>{l(e);try{var t;if(!0===await cu({action:e,environment:a,templateContentfulId:J??void 0,hasTemplateBeenReviewed:ne,currentView:h}))oe().default.reset(),Cu(),y("/profile/templates",!0);else null==p||null===(t=p.current)||void 0===t||t.scrollIntoView({behavior:"smooth"})}catch(i){}finally{l(!1)}};md({isActive:j,onAccept:()=>I("save_draft"),onReject:M?void 0:()=>{throw new Error("abandon_route")},acceptLabel:M?(0,k.jsx)(cd,{}):(0,k.jsx)(pd,{}),rejectLabel:M?(0,k.jsx)(ud,{}):(0,k.jsx)(gd,{})});const{url:T,name:P,shortDescription:D,longDescription:E,slug:R,isFree:U,checkoutEnabled:B,urlError:H,imageError:F,nameError:A,categoriesError:V,shortDescriptionError:N,longDescriptionError:z,accessLockingError:O,slugError:K,isGeneratingImage:q,templateDraftId:W,initialValues:Y,locale:X,contentfulId:J,purchaseUrlError:Q,marketplaceAcquisitionEmail:ee,marketplaceAcquisitionEmailError:te}=(0,n().VK)((()=>tu().default.state),[]);Lu(J,R,X),function(){const e=(0,r().O7)(),{isFeatureEnabled:t}=(0,Xe().o)("self_serve_localization_frontend"),{isFeatureEnabled:a}=(0,Xe().o)("template_listing_translate"),{name:o,searchParams:s}=Ge(),{type:l,contentfulId:d}=$(o),c=G(s),u=(0,n().VK)((()=>ru.getDefaultLocaleTemplate()),[]),p=(0,n().VK)((()=>su.state.isTranslating),[]),g=(0,n().VK)((()=>su.state.shouldTranslate),[]),m=(0,n().VK)((()=>Au.state.isOpen),[]),{templateDraftId:f,locale:h}=(0,n().VK)((()=>tu().default.state),[]);(0,i.useEffect)((()=>{su.setHasTranslated(!1)}),[f]),(0,i.useEffect)((()=>{su.setHasTranslated(!1)}),[h]),(0,i.useEffect)((()=>{t&&a&&"new"===l&&d&&c&&c!==(null==u?void 0:u.locale)&&null!=u&&u.id&&!p&&g&&!m&&(su.openModal(),ku({environment:e,data:{templateId:null==u?void 0:u.id,targetLocale:c}}).catch((()=>{})))}),[t,a,l,d,c,u,e,p,g,m])}();const{publishedVersion:ae,templateContentfulId:ie}=(0,n().VK)((()=>{if(void 0===W)return{publishedVersion:0,templateContentfulId:void 0};const e=new(xt().XG)(a,{table:"template_draft",id:W});return{publishedVersion:e.getPublishedVersion()||0,templateContentfulId:e.getContentfulId()}}),[a,W]),re=Hu(W),ne=Eu(W),se=na(),le="in_review"===re||!1!==s||q,de=!U&&!B,ce=[H,A,V,N,z,K,F,Q].filter((e=>Boolean(e))).length,ue=(0,n().VK)((()=>Au.state.isOpen),[]),pe=(0,n().VK)((()=>su.state.isOpen),[]),ge=Bu(),me=g&&!ge,fe=me&&("published"===re||"draft"===re||void 0===re),he=(0,n().VK)((()=>{var e;const t=null===(e=b().default.state.currentUserStore)||void 0===e?void 0:e.getEmail();return!(null==t||!t.match(/.*@makenotion\.com$/))}),[]),be=U||B||he;return(0,i.useEffect)((()=>()=>{ru.resetState()}),[]),(0,k.jsxs)("main",{children:[(0,k.jsx)(tp,{currentLocale:X}),(0,k.jsx)(vg,{templateStatus:re,templateDraftId:W,isPublished:"published"===_,templateId:w}),(0,k.jsx)(er,{count:ce,ref:p}),(0,k.jsxs)("div",{style:c.formContainer,children:[(0,k.jsx)(ar().w,{htmlLabel:"templateName",label:(0,k.jsx)(d()._H,{defaultMessage:"Template Name",id:"creatorProfile.templateSubmission.templateName"}),shouldHideLabel:!0,error:A,placeholder:t.formatMessage({defaultMessage:"Add template title",id:"creatorProfile.templateSubmission.titlePlaceholder"}),inputStyle:{...c.titleInput,...le?u.noCursorAllowed:{}},value:P,onChange:e=>{tu().default.setState({...tu().default.state,name:e.target.value})},type:"text",onFocus:()=>wu("nameError"),onBlur:async e=>{const t=e.target.value.trim();if(!t||!Y.name||Y.name!==t){var i;mu((0,Z().p2)(null===(i=b().default.state.currentUserStore)||void 0===i?void 0:i.getModel()),t)}if(t.length>0&&(!R||0===R.length)){const e=await async function(e){var t;const{environment:a,name:i}=e,r=$c(i),n=await x().callApi({eventName:"validateTemplateDraftSlug",environment:a,data:{slug:r}});if("success"===n.type)return r;if("template_slug_already_exists"!==(null===(t=n.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return"";for(let o=0;o<3;o++){const e=$c(i,!0);if("success"===(await x().callApi({eventName:"validateTemplateDraftSlug",environment:a,data:{slug:e}})).type)return e}return""}({environment:a,name:t});e&&tu().default.setState({...tu().default.state,slug:e,slugError:void 0})}},focusInitial:"new"===_,disabled:le||q}),(0,k.jsx)(ar().w,{htmlLabel:"templateLink",label:(0,k.jsx)(d()._H,{defaultMessage:"Template link",id:"creatorProfile.templateSubmission.linkLabel"}),error:H,format:or().B.Default,style:{...c.inputStyle,...le?u.inputDisabled:{}},inputStyle:le?u.noCursorAllowed:{},placeholder:"https://",value:T,type:"url",onFocus:e=>{wu("urlError"),wu("imageError")},onBlur:async e=>{var t,i;const r=await gu({environment:a,url:(null===(t=e.target.value)||void 0===t?void 0:t.trim())||"",templateDraftId:W,shouldValidateBlockIdUsedByOtherTemplate:!me,shouldValidateBlockIdForLocalization:me});if(null!==(i=e.target.value)&&void 0!==i&&i.trim()&&r){const t=function(e){const t=Pu().gy(e.trim());return t?(t.search="",t.hash="",t.toString()):""}(e.target.value);tu().default.setState({...tu().default.state,url:t}),await async function(e,t){const a=tu().default.state,{uuid:i,image:r,mobileImage:n,isGeneratingImage:o}=a;return!(!Boolean(i)||o)&&(!((!a.initialValues.uuid||a.uuid===a.initialValues.uuid)&&(Boolean(null==r?void 0:r.url)||Boolean(null==n?void 0:n.url)))&&await ju(e,t))}(a,t)}},disabled:le}),(0,k.jsx)(rg,{}),(0,k.jsxs)("div",{style:{...c.formRow,...e?c.formRowMobile:{}},children:[(0,k.jsx)(Mi().p,{htmlLabel:"templateCategories",name:(0,k.jsx)(d()._H,{defaultMessage:"Template categories",id:"creatorProfile.templateSubmission.categorySelectLabel"}),errorMessage:V,children:(0,k.jsx)(Ju,{disabled:fe||le||ne})}),!fe&&(0,k.jsx)("div",{style:e?c.languageInputMobile:c.languageInput,children:(0,k.jsx)(Mi().p,{htmlLabel:"templateLanguage",name:(0,k.jsx)(d()._H,{defaultMessage:"Language",id:"creatorProfile.templateSubmission.languageSelectLabel"}),children:(0,k.jsx)(sg,{disabled:le||ae>0})})})]}),(0,k.jsx)(ar().w,{htmlLabel:"templateUrlSlug",label:(0,k.jsx)(d()._H,{defaultMessage:"Template URL slug",id:"creatorProfile.templateSubmission.slugLabel"}),error:K,format:or().B.Default,style:{...c.inputStyle,...le?u.inputDisabled:{}},inputStyle:le?u.noCursorAllowed:{},value:R,onChange:e=>{tu().default.setState({...tu().default.state,slug:e.target.value})},disabled:fe||le,onFocus:()=>wu("slugError"),onBlur:async e=>{var t;const i=(null===(t=e.target.value)||void 0===t?void 0:t.trim())||"";i&&Y.slug&&Y.slug===i||await _u({environment:a,slug:i,contentfulId:ie})},left:(0,k.jsx)("span",{style:c.urlSlugLeftContainer,children:`${(0,pc().EE)()}/`})}),(0,k.jsx)(ip,{disabled:le||fe}),(0,k.jsx)(Mi().p,{htmlLabel:"accessLocking",name:(0,k.jsx)(d()._H,{defaultMessage:"Access locking",id:"creatorProfile.templateSubmission.accessLockingLabel"}),errorMessage:O,children:(0,k.jsx)($u,{disabled:fe||le||de||!se})}),(0,k.jsx)(ar().w,{htmlLabel:"templateShortDescription",label:(0,k.jsx)(d()._H,{defaultMessage:"Brief description",id:"creatorProfile.templateSubmission.shortDescription"}),error:N,maxlength:280,textarea:!0,format:or().B.Default,style:{...c.inputStyle,...le?u.inputDisabled:{}},inputStyle:le?u.noCursorAllowed:{},onChange:e=>{const t=tu().default.state;tu().default.setState({...t,shortDescription:e.target.value})},onFocus:e=>wu("shortDescriptionError"),onBlur:e=>yu(e.target.value),value:D,disabled:le,showCharacterCounter:!0}),f?(0,k.jsx)(Gu,{longDescriptionError:z,isFormDisabled:le,longDescription:E}):(0,k.jsx)(ar().w,{htmlLabel:"templateLongDescription",label:(0,k.jsx)(d()._H,{defaultMessage:"Full description",id:"creatorProfile.templateSubmission.fullDescription"}),error:z,textarea:!0,textareaElementAttributes:{rows:6},format:or().B.Default,style:{...c.inputStyle,...le?u.inputDisabled:{}},inputStyle:le?u.noCursorAllowed:c.fullDescription,onChange:e=>{const t=tu().default.state;tu().default.setState({...t,longDescription:e.target.value})},onFocus:e=>wu("longDescriptionError"),onBlur:e=>vu(e.target.value),value:E,disabled:le}),se?(0,k.jsx)(Mi().p,{htmlLabel:"templateEmailRequirement",name:(0,k.jsx)(d()._H,{defaultMessage:"Email requirement",id:"creatorProfile.templateSubmission.emailRequirementLabel"}),children:(0,k.jsx)(ep,{disabled:le||de||fe})}):null,be&&(0,k.jsx)(Vu,{submissionFormStyles:c,disabledInputStyles:u,marketplaceAcquisitionEmail:ee,isFormDisabled:le,marketplaceAcquisitionEmailError:te}),"in_review"!==re&&(0,k.jsx)(dg,{submittingState:s,isDirty:j,handleSubmit:I}),ue&&(0,k.jsx)(hg,{}),pe&&(0,k.jsx)(Sg,{})]})]})}function Mg(e){const{creatorId:t}=e,{isMobile:a}=(0,r().Fy)();return(0,k.jsxs)("div",{children:[(0,k.jsxs)(pa,{route:"/profile/templates",exact:!0,children:[(0,k.jsx)(Ee().t,{size:"large",header:(0,k.jsx)(d()._H,{id:"creatorProfile.templates.pageHeader",defaultMessage:"Templates"}),subHeader:(0,k.jsx)(d()._H,{id:"creatorProfile.templates.pageHeaderSubtitle",defaultMessage:"Update template information, pin templates, and more."})}),!a&&(0,k.jsx)(ac,{}),null==t?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Ce().Z,{size:24}),(0,k.jsx)(kg,{})]}):(0,k.jsx)(Tg,{creatorId:t})]}),(0,k.jsxs)(pa,{route:"/profile/templates/form",shouldRenderCallback:ge,children:[(0,k.jsx)(la,{}),(0,k.jsx)(jg,{})]}),(0,k.jsxs)(pa,{route:"/profile/templates/faq",children:[(0,k.jsx)(la,{}),(0,k.jsx)(Lc,{})]})]})}function kg(){const e=(0,o().yK)((e=>({creatorProfileTemplatesEmptyStateHeader:{fontSize:24,color:e.regularTextColor,fontWeight:L().Ue.semibold},creatorProfileTemplatesEmptyStateDescription:{fontSize:15,color:e.mediumTextColor}})),[]),{setView:t}=Ge();return(0,k.jsx)(Te,{showCreatorProfileForm:()=>{ke.setState({profileFormType:"create"}),t("/profile")},header:(0,k.jsx)("div",{style:e.creatorProfileTemplatesEmptyStateHeader,children:(0,k.jsx)(d()._H,{id:"creatorProfileEmptyState.templates.header",defaultMessage:"Create a Creator Profile"})}),description:(0,k.jsxs)("div",{style:e.creatorProfileTemplatesEmptyStateDescription,children:[(0,k.jsx)(d()._H,{id:"creatorProfileEmptyState.templates.description",defaultMessage:"A Creator Profile is required to submit and manage Notion templates."})," ",(0,k.jsx)(Vd,{})]})})}function Ig(e){const{creatorId:t}=e,a=(0,o().yK)((e=>({creatorProfileMainSection:{display:"flex",gap:"72px",flexDirection:"column"}})),[]);return(0,k.jsxs)("section",{style:a.creatorProfileMainSection,children:[(0,k.jsx)(Kd,{creatorId:t}),(0,k.jsx)(rc,{creatorId:t}),(0,k.jsx)(Gr,{creatorId:t})]})}function Tg(e){let{creatorId:t}=e;const a=(0,d().YB)();return(0,k.jsx)(Le,{tabs:[{title:a.formatMessage(Pg.templateListings),content:(0,k.jsx)(Ig,{creatorId:t})},{title:a.formatMessage(Pg.ratingsAndReviews),content:(0,k.jsx)(Sc,{})}]})}const Pg=(0,d().vU)({templateListings:{id:"creatorProfile.templates.tabs.listings",defaultMessage:"Template listings"},ratingsAndReviews:{id:"creatorProfile.templates.tabs.ratingsAndReviews",defaultMessage:"Ratings & reviews"}});function Dg(e){const t=(0,n().VK)((()=>{var e;return null===(e=b().default.state.currentUserSettingsStore)||void 0===e?void 0:e.userId}),[]),a=(0,n().VK)((()=>b().default.state.renderPhase),[]),y=(0,r().O7)(),v=(0,d().YB)(),[{status:_}]=(0,l().r5)((async()=>{if(t)return async function(e){const{environment:t,userId:a}=e,i=await x().callApi({eventName:"getCurrentTemplateCreatorId",environment:t,data:{}});if("success"===i.type&&i.data.success){const e=i.data.userIdToTemplateCreatorIdMap[a];me().default.setState({creatorId:e})}}({environment:y,userId:t})}),[y,t]),w=(0,fe().h)(),C=(0,o().yK)((()=>({scroller:{height:"100dvh",paddingBottom:"120px",backgroundColor:c().ZP.white},center:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}})),[]);(0,i.useEffect)((()=>{const e=document.querySelector('link[rel="shortcut icon"]');e&&e.setAttribute("href",s().Z.images.templates.faviconIco)}),[]);const[{status:S}]=(0,l().r5)((async()=>{if(w&&w.contentful_id)return de({environment:y,locale:v,creatorId:w.contentful_id,orderBy:"recent",paid:"all",page:1})}),[]),j="pending"!==_,M=(0,n().VK)((()=>he().Z.getState().isOpen),[]);return(0,k.jsxs)(p().Z,{title:v.formatMessage({id:"creatorProfile.document.title",defaultMessage:"My Creator Profile | Notion"}),children:[(0,k.jsx)(g().Z,{}),(0,k.jsx)(u().Z,{style:C.scroller,type:h().Z.Y,children:(0,k.jsxs)(m().PT,{children:[(0,k.jsx)(un().p,{}),(0,k.jsx)($e,{children:j&&"pending"!==S&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(pa,{route:"/profile",exact:!0,children:(0,k.jsx)(Zd,{})}),(0,k.jsx)(pa,{route:"/profile/templates",children:(0,k.jsx)(Mg,{creatorId:null==w?void 0:w.contentful_id})}),(0,k.jsx)(pa,{route:"/profile/integrations",children:(0,k.jsx)(Tl,{isPublish:e.publish,isLab:e.lab,botOrIntegrationPointer:e.botOrIntegrationPointer})}),(0,k.jsx)(pa,{route:"/profile/analytics",children:(0,k.jsx)(Xt,{creatorId:null==w?void 0:w.contentful_id})}),(0,k.jsx)(pa,{route:"/profile/coupons",children:(0,k.jsx)(cn,{creatorId:null==w?void 0:w.contentful_id})})]})})]})}),M&&(0,k.jsx)(Dl,{}),"rendered"!==a||y.device.isMobile?null:(0,k.jsx)(f().r2,{})]})}},111300:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});class i extends(()=>a(263184))().default{getInitialState(){return{isOpen:!1}}}const r=new i},681035:(e,t,a)=>{"use strict";a.d(t,{S:()=>n});var i=()=>a(677559);const r=new(i().Ss)("CollectionItemCover",(async()=>{const{CollectionItemCover:e}=await Promise.all([a.e(62743),a.e(37912)]).then(a.bind(a,682652));return{CollectionItemCover:e}})),n=(0,i().kF)(r,(e=>e.CollectionItemCover))},265195:(e,t,a)=>{"use strict";a.d(t,{EE:()=>d,GL:()=>u,Ns:()=>y,TR:()=>g,Y9:()=>m,iM:()=>c,jl:()=>f,jr:()=>b,zn:()=>p});var i=()=>a(145112),r=()=>a(226413),n=()=>a(661727),o=()=>a(568017),s=()=>a(696459),l=()=>a(559729);function d(e){return void 0!==e&&"auto"!==e&&"colorful"!==e}function c(e,t){if("auto"!==e){if("colorful"===e)return o().ZE.colorful.slice(0,6);if(u(e)){const a="gray"===e?"dark"===t.mode?"white":"black":e;return o().ZE[a]}(0,s().t1)(e)}}function u(e){return i().Fh.includes(e)}function p(e,t,a){const i=function(e,t,a){if("auto"===e)return;let i;if(i="gray"===e?"dark"===a.mode?"white":"black":e,t&&u(e)){const e=o().ZE[i];return[e[0],e[3]]}return o().ZE[i]}(e,t,a);if(i)return u(e)&&t?{colorAxis:{minColor:i[1],maxColor:i[0],showInLegend:!1},colors:i}:{colorAxis:void 0,colors:i}}function g(e){var t,a;let{collectionContextStore:i,groupValue:n,index:s,groupBy:d,theme:c,environment:u}=e;const g=i.normalizedSchemaStore.state,m=i.normalizedFormatStore.state;if("placeholder"===(null===(t=m.chart_config)||void 0===t?void 0:t.type)||void 0===n.value)return"light"===c.mode?o().ZE.translucentGray[0]:o().ZE.translucentGray[1];const f=g[d.property],h=f&&((0,r().cu)(f)||(0,r().gB)(f)),b=(null===(a=m.chart_config)||void 0===a||null===(a=a.chartFormat)||void 0===a?void 0:a.colorTheme)||"auto";if("auto"===b&&h){const e=(0,l().II)({environment:u,groupFormat:{property:d.property,value:n},schema:g,format:m,theme:c,ignoreDisableColorColumns:!0});if(e)return e.chartColor}const y=p("auto"===b?"colorful":b,!1,c),v=(null==y?void 0:y.colors)||o().ZE.colorful;return v[s%v.length]}function m(e,t){return t?{linearGradient:{x1:0,x2:0,y1:0,y2:1},stops:[[0,"rgba(0, 0, 0, 0)"],[1,"rgba(0, 0, 0, 0)"]]}:{linearGradient:{x1:0,x2:0,y1:0,y2:1},stops:[[0,(0,n().Fq)(e,.1)],[1,(0,n().Fq)(e,0)]]}}const f=["gradient","blue","red","yellow","grey","none"],h=(0,a(788860).vU)({gradient:{defaultMessage:"Gradient",id:"chart.export.background.gradient"},blue:{defaultMessage:"Blue",id:"chart.export.background.blue"},red:{defaultMessage:"Red",id:"chart.export.background.red"},yellow:{defaultMessage:"Yellow",id:"chart.export.background.yellow"},grey:{defaultMessage:"Grey",id:"chart.export.background.grey"},none:{defaultMessage:"None",id:"chart.export.background.none"}});function b(e){return h[e]}function y(e,t,a){const i="light"===e.mode?a?100:50:a?600:500;switch(t){case"blue":return e.accentColors.blue[i];case"red":return e.accentColors.red[i];case"yellow":return e.accentColors.yellow[i];case"grey":return e.accentColors.gray[i];case"none":const r=a?e.buttonHoveredBackground:e.popoverBackground;return`linear-gradient(to top right, ${r} calc(50% - 1px), ${e.regularDividerColor}, ${r} calc(50% + 1px) )`;case"gradient":return`${a?`linear-gradient(${e.buttonHoveredBackground}, ${e.buttonHoveredBackground}), `:""}${"dark"===e.mode?"linear-gradient(123deg, #3C3F41 40.15%, #4A2F27 89.33%)":"linear-gradient(123deg, #FEF5E9 40.15%, #FEE9E9 89.33%)"}`;default:(0,s().t1)(t)}}},593695:(e,t,a)=>{"use strict";a.d(t,{M:()=>r,e:()=>n});var i=()=>a(527278);const r=(0,a(788860).vU)({noData:{defaultMessage:"No data",id:"chartError.noData"},badYAxisRange:{defaultMessage:"No data due to axis range",id:"chartError.badYAxisRange"},unconfiguredProperty:{id:"chartError.unconfiguredProperty",defaultMessage:"Property is not configured. Please make another selection."},unsupportedProperty:{id:"chartError.unsupportedProperty",defaultMessage:"This property type is not supported. Please select another property"},unsupportedFormula:{id:"chartError.unsupportedFormula",defaultMessage:"This formula is not supported. Please select another property or adjust your formula."},deletedProperty:{id:"chartError.deletedProperty",defaultMessage:"This property has been deleted. Please select another property."},invalidAggregation:{id:"chartError.invalidAggregation",defaultMessage:"Previously selected property is no longer valid with the current aggregation. Please make another selection."},invalidPropertyValueChart:{id:"chartError.invalidPropertyValueChart",defaultMessage:"Selected property is no longer valid with the previous configured chart. Please make another selection."},noValues:{id:"chartError.noValues",defaultMessage:"This property has no values. Please add some values or select another property."}});function n(e){switch(e){case"groupBy_property_not_configured":case"aggregation_property_not_configured":case"name_property_not_configured":case"property_value_property_not_configured":return i().Z.formatMessage(r.unconfiguredProperty);case"groupBy_property_not_groupable":case"stackBy_property_not_groupable":return i().Z.formatMessage(r.unsupportedProperty);case"groupBy_formula_not_groupable":case"stackBy_formula_not_groupable":return i().Z.formatMessage(r.unsupportedFormula);case"groupBy_property_deleted":case"stackBy_property_deleted":case"aggregation_deleted":case"name_property_deleted":case"property_value_property_deleted":return i().Z.formatMessage(r.deletedProperty);case"aggregation_invalid":return i().Z.formatMessage(r.invalidAggregation);case"stackBy_property_no_values":return i().Z.formatMessage(r.noValues);case"name_property_invalid":case"property_value_property_invalid":return i().Z.formatMessage(r.invalidPropertyValueChart);default:return}}},75468:(e,t,a)=>{"use strict";a.d(t,{CN:()=>g,C_:()=>d,FZ:()=>n,LY:()=>i,QG:()=>r,TZ:()=>p,VD:()=>b,Yh:()=>f,b:()=>s,lM:()=>m,nZ:()=>h,qM:()=>c,rV:()=>o,y9:()=>u});const i=(0,a(788860).vU)({chart:{defaultMessage:"chart",id:"chartExport.chart"},exportChart:{defaultMessage:"Save chart as...",id:"chartExport.exportChart"},exportChartPreview:{defaultMessage:"Preview",id:"chartExport.exportChartPreview"},exportChartBackground:{defaultMessage:"Background",id:"chartExport.exportChartBackground"},copyPng:{defaultMessage:"Copy as PNG",id:"chartExport.copyAsPng"},downloadPng:{defaultMessage:"Download PNG",id:"chartExport.downloadPng"},downloadSvg:{defaultMessage:"Download SVG",id:"chartExport.downloadSVG"},madeWithNotion:{defaultMessage:"Made with Notion",id:"chartExport.madeWithNotion"}}),r=200,n=2,o=800,s=500,l=240,d=120,c=96,u=64,p=2*d,g=2*c,m=2*u;function f(e){let t={width:o,height:s};return"none"===e&&(t={width:o+p,height:s+g}),{chart:t,plotOptions:{pie:{size:l}}}}const h=20,b=8},411187:(e,t,a)=>{"use strict";a.d(t,{H:()=>_,Xr:()=>M,Z6:()=>S,aP:()=>w,fP:()=>I,hl:()=>R,m0:()=>C,sY:()=>v,tm:()=>k,x6:()=>L,yb:()=>D});a(670560),a(267602),a(653476),a(749411),a(30005),a(241792),a(228244),a(667294);var i=()=>a(446866),r=()=>a(396136),n=()=>a(255933),o=()=>a(830968),s=()=>a(513670),l=()=>a(696459),d=()=>a(916673),c=()=>a(826955),u=()=>a(848643),p=()=>a(183224),g=()=>a(631986),m=()=>a(859193),f=()=>a(429725),h=()=>a(527278),b=()=>a(148126),y=a(785893);const v=(0,a(788860).vU)({missingValuesError:{id:"developerIntegrationForm.error.missingFieldRequired",defaultMessage:"{ fieldName } is required."},invalidInputError:{id:"developerIntegrationForm.error.invalidInput",defaultMessage:"{ fieldName } is invalid."},transactionGenericError:{id:"developerIntegrationAction.error.failedTransaction",defaultMessage:"Something went wrong, please try again"},basicSectionTitle:{id:"developerIntegrationForm.sectionHeader.basic",defaultMessage:"Basic information"},secretSectionTitle:{id:"developerIntegrationForm.sectionHeader.secrets",defaultMessage:"Secrets"},capabilitiesSectionTitle:{id:"developerIntegrationForm.sectionHeader.capabilities",defaultMessage:"Capabilities"},oauthSectionTitle:{id:"developerIntegrationForm.sectionHeader.oauthAndUri",defaultMessage:"OAuth Domain & URIs"},organizationSectionTitle:{id:"developerIntegrationForm.sectionHeader.organization",defaultMessage:"Organization Information"},externalOauthSectionTitle:{id:"developerIntegrationForm.sectionHeader.external_oauth_setup",defaultMessage:"External Authorization Setup"},unfurlingSectionTitle:{id:"developerIntegrationForm.sectionHeader.unfurlingDomains",defaultMessage:"Unfurling Domain & Patterns"},basicPageTitle:{id:"developerIntegrationFormHelpers.pageTitle.basic",defaultMessage:"Basic information"},secretPageTitle:{id:"developerIntegrationFormHelpers.pageTitle.secrets",defaultMessage:"Secrets"},capabilitiesPageTitle:{id:"developerIntegrationFormHelpers.pageTitle.capabilities",defaultMessage:"Capabilities"},distributionPageTitle:{id:"developerIntegrationFormHelpers.pageTitle.distribution",defaultMessage:"Distribution"},linkPreviewPageTitle:{id:"developerIntegrationFormHelpers.pageTitle.unfurling",defaultMessage:"Link Preview"},distributionSwitcherLabel:{id:"developerIntegrationFormDistributionView.switcher.label",defaultMessage:"Do you want to make this integration public?"},unfurlingSwitcherLabel:{id:"developerIntegrationFormUnfurlingView.switcher.label",defaultMessage:"Do you want to enable link preview for this integration?"},integrationTypeLabel:{id:"developerIntegrationFormBasicView.integrationType.label",defaultMessage:"Type"},integrationTypeSubtitle:{id:"developerIntegrationFormBasicView.integrationType.subtitle",defaultMessage:"Internal integrations are installed to a specific workspace. You can make this integration public later"},nameLabel:{id:"developerIntegrationFormBasicView.name.label",defaultMessage:"Name"},nameSubtitle:{id:"developerIntegrationFormBasicView.name.subtitle",defaultMessage:"Name to identify your integration to users"},typeLabel:{id:"developerIntegrationFormBasicView.type.label",defaultMessage:"Type"},typeSubtitle:{id:"developerIntegrationFormBasicView.type.subtitle",defaultMessage:"Type of integration"},iconLabel:{id:"developerIntegrationFormBasicView.icon.label",defaultMessage:"Logo"},iconSubtitle:{id:"developerIntegrationFormBasicView.icon.subtitle",defaultMessage:"512px x 512px in PNG format is recommended"},spaceLabel:{id:"developerIntegrationFormBasicView.space.label",defaultMessage:"Associated workspace"},spaceSubtitle:{id:"developerIntegrationFormBasicView.space.subtitle",defaultMessage:"Select a workspace to install the integration to. Workspace owners will be able to manage the integration as well. You can upgrade the integration to use OAuth later"},tokenLabel:{id:"developerIntegrationFormSecretView.secret.label",defaultMessage:"Internal Integration Secret"},authorizationUrlLabel:{id:"developerIntegrationFormSecretView.integrationAuthUrl.label",defaultMessage:"Authorization URL"},clientIdLabel:{id:"developerIntegrationFormSecretView.clientId.label",defaultMessage:"OAuth client ID"},clientSecretLabel:{id:"developerIntegrationFormSecretView.clientSecret.label",defaultMessage:"OAuth client secret"},capabilitiesLabel:{id:"developerIntegrationFormCapabilitiesView.capabilities.label",defaultMessage:"Capabilities"},redirectUrisLabel:{id:"developerIntegrationFormDistributionView.redirect_uris.label",defaultMessage:"Redirect URIs"},redirectUrisSubtitle:{id:"developerIntegrationFormDistributionView.redirect_uri.subtitle",defaultMessage:"In the Notion OAuth flow, users will be redirected to this path after they have authenticated with Notion. The path will be appended with the authorization code for access and must have a protocol. It can’t contain URL fragments, relative paths or wildcards, and can’t be a public IP address. It must also be included in the token request"},websiteUrlLabel:{id:"developerIntegrationFormDistributionView.website_url.label",defaultMessage:"Website or homepage"},websiteUrlSubtitle:{id:"developerIntegrationFormDistributionView.website_url.subtitle",defaultMessage:"Used to link to your integration’s website or homepage in your integration page and authentication screens"},taglineLabel:{id:"developerIntegrationFormDistributionView.tagline.label",defaultMessage:"Tagline"},taglineSubtitle:{id:"developerIntegrationFormDistributionView.tagline.subtitle",defaultMessage:"A short description of what the integration does"},privacyPolicyUrlLabel:{id:"developerIntegrationFormDistributionView.privacy_policy_url.label",defaultMessage:"Privacy policy"},privacyPolicyUrlSubtitle:{id:"developerIntegrationFormDistributionView.privacy_policy_url.subtitle",defaultMessage:"Used to link to your integration’s privacy policy in your integration page and authentication screens"},termOfUseLabel:{id:"developerIntegrationFormDistributionView.term_of_use.label",defaultMessage:"Terms of use"},termOfUseSubtitle:{id:"developerIntegrationFormDistributionView.term_of_use.subtitle",defaultMessage:"Used to link to your integration’s terms of use in your integration page and authentication screens"},emailLabel:{id:"developerIntegrationFormDistributionView.email.label",defaultMessage:"Support email"},emailSubtitle:{id:"developerIntegrationFormDistributionView.email.subtitle",defaultMessage:"Used to link to your integration’s support email in your integration page and authentication screens"},developerNameLabel:{id:"developerIntegrationFormDistributionView.developer_name.label",defaultMessage:"Company name"},developerNameSubtitle:{id:"developerIntegrationFormDistributionView.developer_name.subtitle",defaultMessage:"The name of your company or organization. You may use your own name if this does not apply"},templateLabel:{id:"developerIntegrationFormDistributionView.template.label",defaultMessage:"Notion URL for optional template"},templateSubtitle:{id:"developerIntegrationFormDistributionView.template.subtitle",defaultMessage:"Use this field if you'd like to offer a user a Notion page to duplicate into their workspace during OAuth. URL must be to a public Notion page"},unfurlUrlLabel:{id:"developerIntegrationFormUnfurlingView.unfurlUrl.label",defaultMessage:"Unfurl Callback URL"},unfurlUrlCaption:{id:"developerIntegrationFormUnfurlingView.unfurlUrl.caption",defaultMessage:"Called with a POST request when an unfurl action occurs and with a DELETE request when unfurl url preview(s) or mention(s) is deleted"},domainLabel:{id:"developerIntegrationFormUnfurlingView.domain.label",defaultMessage:"Unfurl Url Domain"},urlMatchingAndPlaceholderLabel:{id:"developerIntegrationFormUnfurlingView.urlmatching.label",defaultMessage:"URL matching and placeholder"},urlMatchingAndPlaceholderCaption:{id:"developerIntegrationFormUnfurlingView.urlmatching.caption",defaultMessage:"When users paste a URL that matches this pattern on your verified domain, they'll have the option to unfurl it as a preview. Any sample URLs are validated against provided patterns"},externalOauthAuthorizeUrlLabel:{id:"developerIntegrationFormUnfurlingView.externalOauthAuthorizeUrl.label",defaultMessage:"OAuth Authorize URL"},externalOauthAuthorizeUrlCaption:{id:"developerIntegrationFormUnfurlingView.externalOauthAuthorizeUrl.caption",defaultMessage:"Used by Notion to initiate user authorization with the integration"},externalOauthTokenUrlLabel:{id:"developerIntegrationFormUnfurlingView.externalOauthTokenUrl.label",defaultMessage:"OAuth Token URL"},externalOauthTokenUrlCaption:{id:"developerIntegrationFormUnfurlingView.externalOauthTokenUrl.caption",defaultMessage:"Called by Notion to retrieve an access token for the unfurl callback URL"},externalOauthScopesLabel:{id:"developerIntegrationFormUnfurlingView.externalOauthScopes.label",defaultMessage:"OAuth Scopes"},externalOauthScopesCaption:{id:"developerIntegrationFormUnfurlingView.externalOauthScopes.caption",defaultMessage:"Optional scopes string"},externalDeletionUrlLabel:{id:"developerIntegrationFormUnfurlingView.externalDeletionUrl.label",defaultMessage:"Deleted Token Callback URL "},externalDeletionUrlCaption:{id:"developerIntegrationFormUnfurlingView.externalDeletionUrl.caption",defaultMessage:"Called by Notion when a user removes your integration"},externalClientIdLabel:{id:"developerIntegrationFormUnfurlingView.externalClientId.label",defaultMessage:"OAuth Client ID"},externalClientSecretLabel:{id:"developerIntegrationFormUnfurlingView.externalClientSecret.label",defaultMessage:"OAuth Client Secret"},termsOfUseUrlLabel:{id:"developerIntegrationFormDistributionView.term_of_use_url.label",defaultMessage:"Terms of use"},termsOfUseUrlSubtitle:{id:"developerIntegrationFormDistributionView.term_of_use_url.subtitle",defaultMessage:"Used to link to your integration’s terms of use in your integration page and authentication screens"}});function x(e){return`${s().eV(e)}Label`}(0,l().AO)((e=>"distribution"===e||"secrets"===e||"basic"===e||"linkPreview"===e||"capabilities"===e||"compliance"===e?{true:e}:{false:e})),h().Z.formatMessage(v.basicPageTitle),h().Z.formatMessage(v.secretPageTitle),h().Z.formatMessage(v.capabilitiesPageTitle),h().Z.formatMessage(v.distributionPageTitle),h().Z.formatMessage(v.organizationSectionTitle),h().Z.formatMessage(v.oauthSectionTitle),h().Z.formatMessage(v.linkPreviewPageTitle),h().Z.formatMessage(v.externalOauthSectionTitle),h().Z.formatMessage(v.unfurlingSectionTitle);function _(e,t){const a=["basic","secrets","capabilities","distribution"];switch(e){case"create-bot":return["basic"];case"update-bot":case"create-guest-integration":return a;case"update-compliance-integration":return["basic","secrets","distribution","compliance"];default:return t&&a.push("linkPreview"),a}}const w={type:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},name:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},icon:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},space:{supportedBy:{"create-bot":!0,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1},requiredBy:{"create-bot":!0,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},capabilities:{supportedBy:{"create-bot":!1,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},token:{supportedBy:{"create-bot":!1,"update-bot":!0,"create-guest-integration":!0,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},client_id:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!0,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},client_secret:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!0,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},authorization_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!0,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},redirect_uris:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},template_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},developer_name:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},website_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},tagline:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},privacy_policy_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},terms_of_use_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},email:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!0,"update-guest-integration":!0,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!0}},unfurl_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},domain:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!1}},url_matching_and_placeholder:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!0,"update-first-party-external-integration":!0,"update-compliance-integration":!1}},external_oauth_authorize_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},external_oauth_token_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},external_oauth_scopes:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!1}},external_client_id:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},external_client_secret:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!0}},external_deletion_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!0,"update-third-party-external-integration":!0,"update-first-party-external-integration":!1,"update-compliance-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-guest-integration":!1,"update-guest-integration":!1,"create-third-party-external-integration":!1,"update-third-party-external-integration":!1,"update-first-party-external-integration":!1,"update-compliance-integration":!0}}};function C(e){const{formData:t,setFormData:a,formStateType:i,currentFieldNames:r,formFieldValidationSchema:n}=e,o=function(e){const{formData:t,formStateType:a,currentFieldNames:i,formFieldValidationSchema:r=w}=e;return i.filter((e=>{const i=t[e].value;return r[e].requiredBy[a]&&!i}))}({formData:t,formStateType:i,currentFieldNames:r,formFieldValidationSchema:n});return o.forEach((e=>{const t=x(e);a({field:e,error:h().Z.formatMessage(v.missingValuesError,{fieldName:h().Z.formatMessage(v[t])})})})),o}function S(e){const{formData:t,formStateType:a,templateStore:i,setFormData:r,currentFieldNames:n}=e,o=function(e){const{formData:t,formStateType:a,templateStore:i,currentFieldNames:r,formFieldValidationSchema:n=w}=e,o=[];return r.forEach((e=>{const r=t[e].value,s=n[e].supportedBy[a],l=g().tV[e];if(s&&r&&l){const a=l({value:r,formData:t,templateStore:i});var d;a.validated||o.push({fieldName:e,errorMessages:null===(d=a.errorMessages)||void 0===d?void 0:d.map((e=>{let{descriptor:t,values:a}=e;return{descriptor:t,values:a??{}}}))})}})),o}({formData:t,formStateType:a,templateStore:i,currentFieldNames:n});return o.forEach((e=>{var t;r({field:e.fieldName,error:e.errorMessages?e.errorMessages.map(((e,t)=>{let{descriptor:a,values:i}=e;return(0,y.jsx)("div",{children:h().Z.formatMessage(a,i)},`validation-error-${t}`)})):h().Z.formatMessage(v.invalidInputError,{fieldName:null==v||null===(t=v[x(e.fieldName)])||void 0===t?void 0:t.defaultMessage})})})),o}function j(e){if(!e)return;const t={};return(0,l().qP)(e).forEach((e=>{let[a,i]=e;i&&(t[a]=!0)})),t}function M(e){return{token:e.token.value,client_id:e.client_id.value,client_secret:e.client_secret.value,authorization_url:e.authorization_url.value,name:e.name.value,icon:e.icon.value,space:e.space.value,redirect_uris:(e.redirect_uris.value||[]).map((e=>g().FR(e))),website_url:g().FR(e.website_url.value),tagline:e.tagline.value,privacy_policy_url:g().FR(e.privacy_policy_url.value),terms_of_use_url:g().FR(e.terms_of_use_url.value),template_page_id:(0,b().K2)(e.template_url.value??"")??null,email:i().H3(e.email.value),capabilities:j(e.capabilities.value),developer_name:e.developer_name.value,unfurl_url:e.unfurl_url.value,domain:e.domain.value,url_matching_and_placeholder:e.url_matching_and_placeholder.value,external_oauth_authorize_url:g().FR(e.external_oauth_authorize_url.value),external_oauth_token_url:g().FR(e.external_oauth_token_url.value),external_client_id:e.external_client_id.value,external_client_secret:e.external_client_secret.value,external_oauth_scopes:e.external_oauth_scopes.value,external_deletion_url:g().FR(e.external_deletion_url.value)}}function k(e){const{formData:t,formStateType:a,currentFieldNames:i,formFieldValidationSchema:r=w}=e;return i.some((e=>r[e].supportedBy[a]&&t[e].error))}const I={read_content:!1,update_content:!1,insert_content:!1,read_user_without_email:!1,read_user_with_email:!1,read_comment:!1,insert_comment:!1,link_preview:!1,synced_database:!1,workspace_content_transfer:!1};function T(e){const t={...I};return e&&(0,l().qP)(e).forEach((e=>{let[a,i]=e;i&&(0,l().qg)(t,a)&&(t[a]=!0)})),t}const P={value:void 0,error:void 0},D={type:P,name:P,icon:P,space:P,capabilities:P,token:P,authorization_url:P,client_secret:P,client_id:P,tagline:P,email:P,website_url:P,privacy_policy_url:P,terms_of_use_url:P,template_url:P,redirect_uris:P,developer_name:P,external_oauth_authorize_url:P,external_oauth_token_url:P,external_client_id:P,external_client_secret:P,external_oauth_scopes:P,external_deletion_url:P,unfurl_url:P,domain:P,url_matching_and_placeholder:P};function L(e,t){return"error"in t?{...e,[t.field]:{...e[t.field],error:t.error}}:{...e,[t.field]:{...e[t.field],...t.value&&{error:void 0},value:t.value}}}async function E(e){const{pageId:t,store:a}=e;if(!a||!t)return;const i=c().G.createChildStore(a,{table:r().iU,id:t});return await i.load(),(0,f().ZP)({store:i,preferPublicLink:!0,pageVisitSource:void 0})}async function R(e){const{userRootStore:t,formStoreState:a,environment:i,initialUrlMatchingAndPlaceholder:r=[m().VH]}=e;if("create-bot"===a.type){return{token:void 0,client_id:void 0,client_secret:void 0,authorization_url:void 0,space:(t?t.getAdminSpaceStores():[])[0],developer_name:void 0,tagline:void 0,email:void 0,website_url:void 0,privacy_policy_url:void 0,terms_of_use_url:void 0,template_url:void 0,redirect_uris:void 0,capabilities:{read_content:!0,insert_content:!0,update_content:!0,read_comment:!1,insert_comment:!1,read_user_with_email:!1,read_user_without_email:!1,link_preview:!1,synced_database:!1,workspace_content_transfer:!1},unfurl_url:void 0,domain:void 0,url_matching_and_placeholder:void 0,external_oauth_authorize_url:void 0,external_oauth_token_url:void 0,external_client_id:void 0,external_client_secret:void 0,external_oauth_scopes:void 0,external_deletion_url:void 0}}if("update-bot"===a.type||"create-guest-integration"===a.type){var s;const e=null===(s=a.startingRecord)||void 0===s?void 0:s.value,i=t&&e&&c().H2.createChildStore(t,{id:e.space_id,table:n().bx});return{token:a.startingRecord,client_id:void 0,client_secret:void 0,authorization_url:void 0,name:null==e?void 0:e.name,icon:null==e?void 0:e.icon,space:i,tagline:void 0,email:void 0,website_url:void 0,privacy_policy_url:void 0,terms_of_use_url:void 0,template_url:void 0,redirect_uris:void 0,capabilities:T(null==e?void 0:e.capabilities),developer_name:void 0,unfurl_url:void 0,domain:void 0,url_matching_and_placeholder:void 0,external_oauth_authorize_url:void 0,external_oauth_token_url:void 0,external_client_id:void 0,external_client_secret:void 0,external_oauth_scopes:void 0,external_deletion_url:void 0}}if("update-guest-integration"===a.type){const e=a.startingRecord.value;return{token:void 0,client_id:a.startingRecord,client_secret:a.startingRecord,authorization_url:(0,d().LH)({baseUrl:(0,u().k2)("production"),clientId:a.startingRecord.value.id,redirectUri:a.startingRecord.value.redirect_uris[0]}),name:e.name,icon:e.info.icon,space:void 0,tagline:e.info.tagline,email:e.info.email,website_url:e.info.website_url,privacy_policy_url:e.info.privacy_policy_url,terms_of_use_url:e.info.terms_of_use_url,template_url:await E({pageId:e.info.template_page_id,store:t,environment:i}),redirect_uris:e.redirect_uris,capabilities:T(e.capabilities),developer_name:e.info.developer_name,unfurl_url:void 0,domain:void 0,url_matching_and_placeholder:void 0,external_oauth_authorize_url:void 0,external_oauth_token_url:void 0,external_client_id:void 0,external_client_secret:void 0,external_oauth_scopes:void 0,external_deletion_url:void 0}}if("create-third-party-external-integration"===a.type){const e=a.startingRecord.value;return{token:void 0,client_id:a.startingRecord,client_secret:a.startingRecord,authorization_url:(0,d().LH)({baseUrl:(0,u().k2)("production"),clientId:a.startingRecord.value.id,redirectUri:a.startingRecord.value.redirect_uris[0]}),name:e.name,icon:e.info.icon,space:void 0,tagline:e.info.tagline,email:e.info.email,website_url:e.info.website_url,privacy_policy_url:e.info.privacy_policy_url,terms_of_use_url:e.info.terms_of_use_url,template_url:await E({pageId:e.info.template_page_id,store:t,environment:i}),redirect_uris:void 0,capabilities:T(e.capabilities),developer_name:e.info.developer_name,unfurl_url:void 0,domain:{developmentDomain:m().nZ,verifiedDomains:[],domainVerifications:[]},url_matching_and_placeholder:r,external_oauth_authorize_url:void 0,external_oauth_token_url:void 0,external_client_id:void 0,external_client_secret:void 0,external_oauth_scopes:void 0,external_deletion_url:void 0}}if("update-third-party-external-integration"===a.type){var g,f;const e=a.startingRecord.value,r=null===(g=a.startingAuthRecord)||void 0===g?void 0:g.value,n=a.domainVerifications,s=e.info.original_url_patterns||[],c={developmentDomain:(null===(f=e.info.development_url_domains)||void 0===f?void 0:f[0])||"",verifiedDomains:e.info.original_url_domains||[],domainVerifications:n},m=s.map((t=>{var a;if(!0!==(null===(a=t.additional_types)||void 0===a?void 0:a.collection))return{name:(0,p().R)({patternName:t.name,integrationId:e.id}),regex:t.regex,attributes:((null==t?void 0:t.attributes)??[]).map(o().Ah),sampleUrls:(null==t?void 0:t.sample_urls)??[]}})).filter(l().$K);return{token:void 0,client_id:a.startingRecord,client_secret:a.startingRecord,authorization_url:(0,d().LH)({baseUrl:(0,u().k2)("production"),clientId:a.startingRecord.value.id,redirectUri:a.startingRecord.value.redirect_uris[0]}),name:e.name,icon:e.info.icon,space:void 0,tagline:e.info.tagline,email:e.info.email,website_url:e.info.website_url,privacy_policy_url:e.info.privacy_policy_url,terms_of_use_url:e.info.terms_of_use_url,template_url:await E({pageId:e.info.template_page_id,store:t,environment:i}),redirect_uris:e.redirect_uris,capabilities:T(e.capabilities),developer_name:e.info.developer_name,domain:c,url_matching_and_placeholder:m,unfurl_url:e.info.unfurl_url,external_oauth_authorize_url:null==r?void 0:r.oauth_authorize_url,external_oauth_token_url:null==r?void 0:r.oauth_token_url,external_client_id:null==r?void 0:r.client_id,external_client_secret:null==r?void 0:r.client_secret,external_oauth_scopes:null==r?void 0:r.scopes,external_deletion_url:null==r?void 0:r.deletion_url}}if("update-first-party-external-integration"===a.type){var h;const e=a.startingRecord.value,t=e.info.original_url_patterns||[],i={developmentDomain:(null===(h=e.info.development_url_domains)||void 0===h?void 0:h[0])||"",verifiedDomains:e.info.original_url_domains??[],domainVerifications:[]},r=t.map((t=>{var a;if(!0!==(null===(a=t.additional_types)||void 0===a?void 0:a.collection))return{name:(0,p().R)({patternName:t.name,integrationId:e.id}),regex:t.regex,attributes:((null==t?void 0:t.attributes)??[]).map(o().Ah),sampleUrls:(null==t?void 0:t.sample_urls)??[]}})).filter(l().$K);return{token:void 0,client_id:a.startingRecord,client_secret:a.startingRecord,authorization_url:void 0,name:e.name,icon:e.info.icon,space:void 0,tagline:e.info.tagline,email:e.info.email,website_url:e.info.website_url,privacy_policy_url:e.info.privacy_policy_url,terms_of_use_url:e.info.terms_of_use_url,template_url:void 0,redirect_uris:e.redirect_uris,capabilities:T(e.capabilities),developer_name:e.info.developer_name,domain:i,url_matching_and_placeholder:r,unfurl_url:e.info.unfurl_url,external_oauth_authorize_url:void 0,external_oauth_token_url:void 0,external_client_id:void 0,external_client_secret:void 0,external_oauth_scopes:void 0,external_deletion_url:void 0}}if("update-compliance-integration"===a.type){var b;const e=a.startingRecord.value,r=null===(b=a.startingAuthRecord)||void 0===b?void 0:b.value;return{token:void 0,client_id:a.startingRecord,client_secret:a.startingRecord,authorization_url:(0,d().LH)({baseUrl:(0,u().k2)("production"),clientId:a.startingRecord.value.id,redirectUri:a.startingRecord.value.redirect_uris[0]}),name:e.name,icon:e.info.icon,space:void 0,tagline:e.info.tagline,email:e.info.email,website_url:e.info.website_url,privacy_policy_url:e.info.privacy_policy_url,terms_of_use_url:e.info.terms_of_use_url,template_url:await E({pageId:e.info.template_page_id,store:t,environment:i}),redirect_uris:e.redirect_uris,capabilities:T(e.capabilities),developer_name:e.info.developer_name,domain:void 0,url_matching_and_placeholder:void 0,unfurl_url:void 0,external_oauth_authorize_url:null==r?void 0:r.oauth_authorize_url,external_oauth_token_url:null==r?void 0:r.oauth_token_url,external_client_id:null==r?void 0:r.client_id,external_client_secret:null==r?void 0:r.client_secret,external_oauth_scopes:null==r?void 0:r.scopes,external_deletion_url:null==r?void 0:r.deletion_url}}(0,l().t1)(a)}},183224:(e,t,a)=>{"use strict";a.d(t,{R:()=>n,X:()=>o});var i=()=>a(235484);const r="entity_item";function n(e){const{patternName:t,integrationId:a}=e;if((0,i().BP)({integrationId:a,env:"production"}))return t;{const e=t.indexOf("_");return e<0?r:t.slice(e+1)}}function o(e){const{patternName:t,integrationId:a}=e;return(0,i().BP)({integrationId:a,env:"production"})?t:`${a}_${t}`}},631986:(e,t,a)=>{"use strict";a.d(t,{FR:()=>b,Jv:()=>p,tV:()=>x});a(670560),a(267602),a(916054),a(653476),a(241792),a(228244);var i=()=>a(446866),r=()=>a(565271),n=()=>a(36588),o=()=>a(830968),s=()=>a(696459),l=()=>a(916673),d=()=>a(326966),c=()=>a(957042);const u=(0,a(788860).vU)({capabilityErrorMessage:{id:"developerIntegrationsCreate.error.capabilities.invalidContent2",defaultMessage:"At least one capability must be requested."},regexPatternErrorMessage:{id:"developerIntegrationFormValidator.urlMatchingAndPlaceholder.regex.error",defaultMessage:"{value} regex pattern is invalid."},regexAttributesErrorMessage:{id:"developerIntegrationFormValidator.urlMatchingAndPlaceholder.attributes.error",defaultMessage:"{value} attributes JSON does not match request schema."},sampleUrlMissingDomain:{id:"developerIntegrationFormValidator.sampleUrls.sampleUrlMissingDomain.error",defaultMessage:'URL "{value}" is missing a domain.'},sampleUrlDoesNotMatchProvidedDomain:{id:"developerIntegrationFormValidator.sampleUrls.sampleUrlDoesNotMatchProvidedDomain.error",defaultMessage:'URL "{value}" does not match a provided domain.'},sampleUrlDoesNotMatchProvidedRegexes:{id:"developerIntegrationFormValidator.sampleUrls.sampleUrlDoesNotMatchProvidedRegexes.error",defaultMessage:'URL "{value}" does not match a provided regex pattern.'},templateUrlIsNotNotionPage:{id:"developerIntegrationFormValidator.templateUrl.templateUrlIsNotNotionPage.error",defaultMessage:"URL must direct to a public Notion template."},templateUrlCannotBeDuplicated:{id:"developerIntegrationFormValidator.templateUrl.templateUrlCannotBeDuplicated.error",defaultMessage:"Linked template must be public."}});function p(e){let t;try{t=JSON.parse(e)}catch(a){t=void 0}return t}function g(e){const{value:t}=e,a=l().yn(t);if(!a)return{validated:!1};return l().Qc(a).hostname?{validated:!0}:{validated:!1}}function m(e){try{return new RegExp(e),{validated:!0}}catch{return{validated:!1}}}function f(e){if((0,c().Gu)(n().$1,e))return{validated:!1};for(const t of e){const e=(0,o().GY)(t);if(!(0,r().nj)(e))return{validated:!1}}return{validated:!0}}function h(e){const{domains:t,regex:a,urls:i}=e;if(0===i.length)return[];const r=[];for(const n of i){const e=(0,o().XR)({url:n,domains:t,regex:new RegExp(a)});"invalid_url"===e.type?r.push({descriptor:u.sampleUrlMissingDomain,value:n}):"url_does_not_match_domain"===e.type?r.push({descriptor:u.sampleUrlDoesNotMatchProvidedDomain,value:n}):"url_does_not_match_regex"===e.type?r.push({descriptor:u.sampleUrlDoesNotMatchProvidedRegexes,value:n}):"success"===e.type||(0,s().t1)(e)}return r}function b(e){const t=l().yn(e);if(!t||!e)return;const a=t[t.length-1],i=e[e.length-1];return"/"===a&&"/"!==i?t.slice(0,t.length-1):t}const y={insert_comment:!0,insert_content:!0,read_comment:!0,read_content:!0,update_content:!0,link_preview:!0,synced_database:!0,workspace_content_transfer:!0,read_user_with_email:!1,read_user_without_email:!1},v=(0,s().Yd)(y).filter((e=>y[e]));const x={email:function(e){const{value:t}=e,a=i().H3(t);return a?{validated:i().oH(a).valueOf()}:{validated:!1}},redirect_uris:function(e){const{value:t}=e;return{validated:t.every((e=>(0,a(705214).mb)(a(205228).default.domainBaseUrl,e)))}},website_url:g,privacy_policy_url:g,terms_of_use_url:g,template_url:function(e){const{value:t,templateStore:i}=e;return l().yn(t)?(0,a(148126).K2)(t)?i&&(0,a(122479).u$)(i)?{validated:!0}:{validated:!1,errorMessages:[{descriptor:u.templateUrlCannotBeDuplicated}]}:{validated:!1,errorMessages:[{descriptor:u.templateUrlIsNotNotionPage}]}:{validated:!1}},capabilities:function(e){const{value:t}=e;return v.some((e=>t[e]))?{validated:!0}:{validated:!1,errorMessages:[{descriptor:u.capabilityErrorMessage}]}},unfurl_url:g,url_matching_and_placeholder:function(e){const{value:t,formData:a}=e,i=[];for(const o of t){if(m(o.regex).validated){var r;const e=h({domains:(n=null===(r=a.domain)||void 0===r?void 0:r.value,n?(0,d().jj)([...n.developmentDomain&&[n.developmentDomain],...n.domainVerifications.map((e=>{let{domain:t}=e;return t})),...n.verifiedDomains]):[]),regex:o.regex,urls:o.sampleUrls});i.push(...e)}else i.push({descriptor:u.regexPatternErrorMessage,value:o.name});f(o.attributes).validated||i.push({descriptor:u.regexAttributesErrorMessage,value:o.name})}var n;return i.length>0?{validated:!1,errorMessages:i.map((e=>{let{descriptor:t,value:a}=e;return{descriptor:t,values:{value:a}}}))}:{validated:!0}},external_oauth_authorize_url:g,external_oauth_token_url:g,external_deletion_url:g}},859193:(e,t,a)=>{"use strict";a.d(t,{Az:()=>x,C:()=>v,Hx:()=>T,P4:()=>C,SV:()=>j,TG:()=>b,VH:()=>S,VR:()=>I,e_:()=>w,nZ:()=>_,rn:()=>y});a(670560),a(267602),a(653476),a(749411),a(241792);var i=()=>a(66077),r=()=>a(156642),n=()=>a(962888),o=()=>a(565271),s=()=>a(956057),l=()=>a(530980),d=()=>a(396136),c=()=>a(989478),u=()=>a(955620),p=()=>a(830968),g=()=>a(696459),m=()=>a(326966),f=()=>a(826955),h=()=>a(487270);function b(e){return(0,m().jj)(e.flatMap((e=>{if("relation"===e.type)return e.relation.uri})).filter(g().$K))}function y(e){const{environment:t,integration:a,rootUrl:g,rootAttributes:m,relatedUrisToAttributes:b}=e,y=s().Ar(),v=t.currentUser.id,x=new(i().Z)({name:"developerIntegrationLabHelpers.getBlockStores"}),_=[],w={};for(const[i,r]of Object.entries(b)){const e=s().Il();_.push({id:e,uri:i,attributes:r}),w[i]=e}const C=[{id:"rootInstanceId",original_url:g,attributes:m,related_external_object_uris_to_instance_ids:w},..._].map((e=>{const t=[];for(const a of e.attributes){const e=(0,p().GY)(a);(0,o().nj)(e)&&t.push(e)}return{...e,attributes:t}}));if("success"!==(0,p().ny)({url:g,integrations:[a],currentSpaceId:y}).type)return{error:"Sample URL does not match provided integration regex."};const S=(0,h().$x)({table:d().iU,environment:t,spaceId:y});let j;for(const i of C){const e={table:d().iU,id:i.id,spaceId:y},a={...i,domain:"test"},n={id:i.id,type:r().Ti.externalObjectInstance,version:0,created_at:0,created_by_table:c().KJ,created_by_id:(0,h().TS)({table:c().KJ,spaceId:y,environment:t}),last_edited_time:0,last_edited_by_table:c().KJ,last_edited_by_id:(0,h().TS)({table:c().KJ,spaceId:y,environment:t}),parent_table:d().iU,parent_id:(0,h().TS)({table:d().iU,spaceId:y,environment:t}),space_id:y,alive:!0,domain:"",format:a};if(x.setRecord({pointer:e,userId:v},{role:"editor",value:n}),i===C[0]){const t={...n,format:{...a,attributes:void 0}};x.setRecord({pointer:S,userId:v},{role:"editor",value:t}),j=e}}if(!j)return{error:"Root external object was not defined."};const M=new(f().G)(t,S,{inMemoryRecordCache:x}),k=new(f().G)(t,j,{inMemoryRecordCache:x}),I=(0,h().$x)({table:d().iU,environment:t,spaceId:y}),T=new(f().G)(t,I,{inMemoryRecordCache:x}),{model:P}=l().yJh.create({id:I.id,type:"text",space_id:y,parent:{id:(0,h().TS)({table:d().iU,spaceId:y,environment:t}),table:d().iU,spaceId:y},properties:{title:[(0,u().YCD)((0,u().x36)(S.id))]},createdBy:{table:c().KJ,id:(0,h().TS)({table:c().KJ,spaceId:y,environment:t})}},{useCrdt:n().l()}),D=P.__IM_SORRY__getValue();x.setRecord({pointer:I,userId:v},{role:"editor",value:D});const L=(0,h().$x)({table:d().iU,environment:t,spaceId:y}),E=new(f().G)(t,L,{inMemoryRecordCache:x}),{model:R}=l().yJh.create({id:L.id,type:"text",space_id:y,parent:{id:(0,h().TS)({table:d().iU,spaceId:y,environment:t}),table:d().iU,spaceId:y},properties:{title:[(0,u().YCD)((0,u().x36)(C[0].id))]},createdBy:{table:c().KJ,id:(0,h().TS)({table:c().KJ,spaceId:y,environment:t})}},{useCrdt:n().l()}),U=R.__IM_SORRY__getValue();return x.setRecord({pointer:L,userId:v},{role:"editor",value:U}),{emptyInstanceBlockStore:M,previewBlockStore:k,emptyInlineBlockStore:T,inlineBlockStore:E}}const v=s().Ar(),x="https://acme.com/items/23487",_="acme.com",w="^(?<site>https\\:\\/\\/acme\\.com)\\/items\\/(?<itemNo>\\d+)$",C=[{id:"title",name:"Title",type:"inline",inline:{title:{value:"Acme Item #$<itemNo>",section:"title"}}},{id:"itemId",name:"Item Id",type:"inline",inline:{plain_text:{value:"#$<itemNo>",section:"identifier"}}},{id:"site",name:"Site",type:"inline",inline:{plain_text:{value:"$<site>",section:"secondary"}}}],S={name:"item",regex:w,attributes:C,sampleUrls:[x]},j=[{id:"title",name:"Title",type:"inline",inline:{title:{value:"Feature Request: Link Previews",section:"title"}}},{id:"state",name:"State",type:"relation",relation:{uri:"acme:item_state/open",mention:{section:"primary"}}},{id:"itemId",name:"Item Id",type:"inline",inline:{plain_text:{value:"#23487",section:"identifier"}}},{id:"itemIcon",name:"Item Icon",type:"inline",inline:{color:{value:{r:247,g:247,b:42},section:"entity"}}},{id:"user",name:"User",type:"relation",relation:{uri:"https://acme.com/fig-ment",extension:[{id:"title",section:"secondary"},{id:"avatar_url",section:"avatar"}]}},{id:"description",name:"Description",type:"inline",inline:{plain_text:{value:"Would love to be able to preview some Acme resources in Notion!\n Maybe an open item?",section:"body"}}},{id:"updated_at",name:"Updated At",type:"inline",inline:{datetime:{value:"2022-01-11T19:53:18.829Z",section:"secondary"}}},{id:"label",name:"Label",type:"inline",inline:{enum:{value:"🔨 Ready to Build",color:{r:100,g:100,b:100},section:"primary"}}}],M={uri:"https://acme.com/fig-ment",attributes:[{id:"title",name:"User Name",type:"inline",inline:{title:{value:"fig"}}},{id:"avatar_url",name:"Avatar URL",type:"embed",embed:{src_url:"https://avatars.githubusercontent.com/u/93556354?s=88&u=4967f0be0900684b6963a953ca7fe0ff2268746f&v=4",image:{}}}]},k={uri:"acme:item_state/open",attributes:[{id:"title",name:"Title",type:"inline",inline:{title:{value:"Open",section:"title"}}},{id:"icon",name:"Icon",type:"embed",embed:{src_url:"/images/external_integrations/acme-icon.png",image:{section:"avatar"}}},{id:"color",name:"Color",type:"inline",inline:{color:{value:{r:235,g:64,b:52},section:"background"}}}]};function I(){const e=[M,k],t=b(j),a={};for(const i of t){const t=e.find((e=>e.uri===i));t&&(a[i]=t.attributes)}return a}function T(e){const{domain:t,regex:a,currentIntegration:i}=e,r={...i.info,original_url_domains:[t],original_url_patterns:[{name:"acme-issue",regex:a,attributes:e.attributes.map((e=>{const t=(0,p().GY)(e);if((0,o().nj)(t))return t})).filter(g().$K)}]};return{...i,info:r}}},894026:(e,t,a)=>{"use strict";a.d(t,{b:()=>r});var i=a(667294);function r(e){const[t,a]=(0,i.useState)(!1),r="function"==typeof IntersectionObserver;return(0,i.useEffect)((()=>{if(r&&e.current){const t=new IntersectionObserver((e=>{const t=e[0];a(t.intersectionRatio<1)}),{threshold:[1]});return t.observe(e.current),()=>{a(!1),t.disconnect()}}return()=>{}}),[r,e]),t}},673893:(e,t,a)=>{"use strict";a.d(t,{EQ:()=>l,PT:()=>d});a(821057);var i=a(667294),r=()=>a(846550),n=()=>a(985551),o=a(785893);const s=(0,i.createContext)({screenWidthType:"desktop",isMobileWidth:!1,isLowResolutionTabletWidth:!1,isDesktopWidth:!1,isTabletWidth:!1});function l(){const e=(0,i.useContext)(s);if(!e)throw new Error("ScreenWidthContext not found. Please make sure this is used within a ScreenWidthContext.Provider.");return e}function d(e){const{children:t,mobileUpperBound:a=550,lowResolutionTabletUpperBound:l=720,tabletUpperBound:d=1024,throttle:c=0}=e,u=(0,i.useRef)(null),p=(0,r().yK)((()=>({sizeObserverContainer:{width:"100%",height:0,position:"absolute"}})),[]),[g,m]=(0,i.useState)("desktop"),f=(0,i.useCallback)((e=>{e.state.width<=a?m("mobile"):e.state.width>a&&e.state.width<=l?m("lowResolutionTablet"):e.state.width>l&&e.state.width<=d?m("tablet"):m("desktop")}),[a,l,d]);(0,n().I)(u,f,c);const h="mobile"===g,b="desktop"===g,y="tablet"===g,v="lowResolutionTablet"===g,x=i.useMemo((()=>({screenWidthType:g,isMobileWidth:h,isLowResolutionTabletWidth:v,isDesktopWidth:b,isTabletWidth:y})),[g,h,v,b,y]);return(0,o.jsxs)(s.Provider,{value:x,children:[(0,o.jsx)("div",{ref:u,style:p.sizeObserverContainer}),t]})}s.displayName="ScreenWidthContext"},985551:(e,t,a)=>{"use strict";a.d(t,{I:()=>n});a(821057);var i=a(667294),r=()=>a(200936);function n(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,i.useEffect)((()=>{const i=new(r().E)({throttleMs:a});if(!e.current)throw new Error("ref.current is null");return i.observe(e.current),i.rect.addListener(t),()=>{i.destroy()}}),[t])}},850790:(e,t,a)=>{"use strict";a.d(t,{K:()=>r});a(667294);var i=a(785893);const r=(0,a(827282).IU)("boltFilled",{svg:(0,i.jsx)("path",{d:"M0 12.117c0 .38.293.664.703.664h5.518l-2.91 7.91c-.381 1.006.664 1.543 1.318.723l8.877-11.094c.166-.205.254-.4.254-.625 0-.371-.293-.664-.703-.664H7.539l2.91-7.91C10.83.115 9.785-.422 9.131.408L.254 11.492c-.166.215-.254.41-.254.625z"}),viewBox:"0 0 14 22"})},286735:(e,t,a)=>{"use strict";a.d(t,{$:()=>i().$});var i=()=>a(235665)},593864:(e,t,a)=>{"use strict";a.d(t,{C:()=>r});a(667294);var i=a(785893);const r=(0,a(827282).IU)("chevronRightRoundedThin",{viewBox:"0 0 24 24",svg:(0,i.jsx)("path",{d:"M17.0078 11.8594C17.0078 11.724 16.9818 11.599 16.9297 11.4844C16.8776 11.3698 16.7995 11.2604 16.6953 11.1562L10.6094 5.20312C10.4375 5.03125 10.224 4.94531 9.96875 4.94531C9.80208 4.94531 9.64844 4.98698 9.50781 5.07031C9.36719 5.14844 9.25521 5.25521 9.17188 5.39062C9.09375 5.52604 9.05469 5.67969 9.05469 5.85156C9.05469 6.09635 9.14844 6.3151 9.33594 6.50781L14.8203 11.8594L9.33594 17.2109C9.14844 17.4036 9.05469 17.625 9.05469 17.875C9.05469 18.0417 9.09375 18.1927 9.17188 18.3281C9.25521 18.4688 9.36719 18.5781 9.50781 18.6562C9.64844 18.7396 9.80208 18.7812 9.96875 18.7812C10.224 18.7812 10.4375 18.6927 10.6094 18.5156L16.6953 12.5625C16.7995 12.4583 16.8776 12.349 16.9297 12.2344C16.9818 12.1198 17.0078 11.9948 17.0078 11.8594Z"})})},652809:(e,t,a)=>{"use strict";a.d(t,{e:()=>r});a(667294);var i=a(785893);const r=(0,a(827282).IU)("circlePlus",{viewBox:"0 0 22 22",svg:(0,i.jsx)("path",{d:"M11 22C17.0326 22 22 17.0326 22 11C22 4.97795 17.0221 0 10.9895 0C4.9674 0 0 4.97795 0 11C0 17.0326 4.9674 22 11 22ZM5.83221 11.0105C5.83221 10.3461 6.30681 9.87152 6.96069 9.87152H9.88207V6.95014C9.88207 6.30681 10.3461 5.83221 10.9895 5.83221C11.6539 5.83221 12.1285 6.30681 12.1285 6.95014V9.87152H15.0499C15.6932 9.87152 16.1678 10.3461 16.1678 11.0105C16.1678 11.6539 15.6932 12.1179 15.0499 12.1179H12.1285V15.0499C12.1285 15.6932 11.6539 16.1572 10.9895 16.1572C10.3461 16.1572 9.88207 15.6932 9.88207 15.0499V12.1179H6.96069C6.30681 12.1179 5.83221 11.6539 5.83221 11.0105Z"})})},869851:(e,t,a)=>{"use strict";a.d(t,{L:()=>r});a(667294);var i=a(785893);const r=(0,a(827282).IU)("connections",{viewBox:"0 0 16 14",svg:(0,i.jsx)("g",{children:(0,i.jsx)("path",{d:"M2.825 5.581A2.32 2.32 0 112.832.939a2.32 2.32 0 01-.007 4.642zm10.343 0A2.32 2.32 0 1113.175.94a2.32 2.32 0 01-.007 4.641zM2.825 4.331c.609 0 1.073-.473 1.073-1.074 0-.602-.464-1.067-1.073-1.067a1.05 1.05 0 00-1.06 1.067c0 .601.465 1.073 1.06 1.073zm10.343 0c.608 0 1.066-.473 1.066-1.074 0-.602-.458-1.067-1.066-1.067-.595 0-1.066.465-1.066 1.067a1.06 1.06 0 001.066 1.073zm-6.89-.466a.595.595 0 110-1.19.595.595 0 010 1.19zm1.722 0a.595.595 0 110-1.19.595.595 0 010 1.19zm1.723 0a.595.595 0 010-1.19.6.6 0 01.594.596.6.6 0 01-.594.594zm1.675 3.131a.594.594 0 01-.595-.588c0-.328.266-.595.595-.595a.592.592 0 010 1.183zm-6.795 0a.594.594 0 01-.595-.588.595.595 0 011.19 0 .594.594 0 01-.595.588zm5.502 1.429a.595.595 0 010-1.19.6.6 0 01.595.595.6.6 0 01-.595.595zm-4.21 0a.595.595 0 010-1.19.6.6 0 01.594.595.6.6 0 01-.594.595zM8 13.196a2.327 2.327 0 01-2.317-2.33 2.32 2.32 0 014.642 0A2.328 2.328 0 018 13.195zm0-1.258c.608 0 1.066-.471 1.066-1.073 0-.595-.458-1.06-1.066-1.06a1.05 1.05 0 00-1.066 1.06A1.06 1.06 0 008 11.938z"})})})},109806:(e,t,a)=>{"use strict";a.d(t,{c:()=>r});a(667294);var i=a(785893);const r=(0,a(827282).IU)("eye",{viewBox:"0 0 32 32",svg:(0,i.jsx)("path",{d:"M16.006 25.812c8.863 0 14.994-7.17 14.994-9.406C31 14.16 24.858 7 16.006 7 7.252 7 1 14.16 1 16.406c0 2.236 6.252 9.406 15.006 9.406zm0-3.242a6.194 6.194 0 01-6.197-6.164c-.012-3.452 2.744-6.164 6.197-6.164 3.419 0 6.185 2.711 6.185 6.164 0 3.364-2.766 6.164-6.185 6.164zm0-3.94c1.228 0 2.246-1.007 2.246-2.224 0-1.228-1.018-2.235-2.246-2.235-1.24 0-2.258 1.007-2.258 2.235 0 1.217 1.018 2.224 2.258 2.224z"})})},701572:(e,t,a)=>{"use strict";a.d(t,{C:()=>r});a(667294);var i=a(785893);const r=(0,a(827282).IU)("eyeHide",{viewBox:"0 0 16 12",svg:(0,i.jsx)("path",{d:"M12.2754 10.9346L3.08545 1.76074C2.91895 1.59424 2.91895 1.3042 3.08545 1.1377C3.25732 0.96582 3.53662 0.971191 3.7085 1.1377L12.8931 10.3169C13.0649 10.4888 13.0703 10.752 12.8931 10.9346C12.7212 11.1172 12.4473 11.1064 12.2754 10.9346ZM8 1.44922C12.4526 1.44922 15.4067 5.02637 15.4067 6.13281C15.4067 6.76123 14.4346 8.20605 12.7588 9.31787L11.8618 8.41553C13.167 7.58301 13.978 6.54102 13.978 6.13281C13.978 5.50977 11.3516 2.62012 8 2.62012C7.43066 2.62012 6.9043 2.70068 6.39404 2.84033L5.42188 1.86816C6.21143 1.61035 7.06006 1.44922 8 1.44922ZM8 10.811C3.60645 10.811 0.587891 7.22852 0.587891 6.13281C0.587891 5.48828 1.6084 4.0166 3.33789 2.89404L4.25635 3.8125C2.87598 4.67725 2.0166 5.77832 2.0166 6.13281C2.0166 6.87402 4.64307 9.64014 8 9.64014C8.6123 9.64014 9.18701 9.54883 9.73486 9.39307L10.707 10.3652C9.88525 10.6445 8.98291 10.811 8 10.811ZM10.6211 7.06201L7.06543 3.50635C7.35547 3.38818 7.66699 3.32373 8 3.32373C9.55762 3.32373 10.8145 4.56445 10.8145 6.12744C10.8145 6.45508 10.7446 6.77734 10.6211 7.06201ZM8 8.93652C6.43164 8.93652 5.18555 7.6582 5.18018 6.13281C5.18018 5.75146 5.26074 5.39697 5.41113 5.08008L9.04199 8.70557C8.7251 8.85059 8.37598 8.93652 8 8.93652Z"})})},440567:(e,t,a)=>{"use strict";a.d(t,{W:()=>i().W});var i=()=>a(214924)},448045:(e,t,a)=>{"use strict";a.d(t,{$:()=>r});a(667294);var i=a(785893);const r=(0,a(827282).IU)("minus",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M3.037 8.844h9.92a.705.705 0 00.368-.103.825.825 0 00.28-.28.73.73 0 000-.773.752.752 0 00-.28-.28.705.705 0 00-.369-.102H3.037a.705.705 0 00-.369.102.824.824 0 00-.28.28.73.73 0 000 .772.914.914 0 00.28.281.705.705 0 00.37.103z"})})},133009:(e,t,a)=>{"use strict";a.d(t,{_:()=>r});a(667294);var i=a(785893);const r=(0,a(827282).IU)("pinFilled",{viewBox:"0 0 13 19",svg:(0,i.jsx)("path",{d:"M.102 11.773c0 .665.445 1.102 1.148 1.102h4.227v3.648c0 1.196.5 2.188.695 2.188.187 0 .687-.992.687-2.188v-3.648h4.227c.703 0 1.148-.438 1.148-1.102 0-1.648-1.32-3.39-3.515-4.187L8.46 4c1.14-.648 2.078-1.383 2.484-1.906.203-.266.305-.531.305-.766 0-.476-.367-.828-.914-.828H2.008c-.555 0-.914.352-.914.828 0 .234.093.5.297.766.406.523 1.343 1.258 2.484 1.906l-.258 3.586C1.422 8.383.102 10.125.102 11.773z"})})},622674:(e,t,a)=>{"use strict";a.d(t,{p:()=>r});a(667294);var i=a(785893);const r=(0,a(827282).IU)("starFilled",{viewBox:"0 0 24 24",svg:(0,i.jsx)("path",{d:"M4.603 22.837c.375.277.826.2 1.4-.22l6.002-4.411 6.003 4.41c.561.42 1.024.498 1.387.221.375-.276.463-.73.232-1.403l-2.346-7.075 6.047-4.366c.572-.41.77-.83.627-1.271-.143-.432-.55-.653-1.255-.653l-7.424.045-2.269-7.108C12.787.32 12.457 0 12.005 0c-.463 0-.782.32-1.002 1.006l-2.27 7.108-7.423-.045c-.716 0-1.123.221-1.266.653-.144.442.066.862.638 1.27l6.036 4.367-2.335 7.075c-.231.674-.143 1.127.22 1.403z"})})},848854:(e,t,a)=>{"use strict";a.d(t,{v:()=>i().v});var i=()=>a(545914)},314072:(e,t,a)=>{"use strict";a.d(t,{K7:()=>c,Zw:()=>u,wt:()=>d});a(667294);var i=()=>a(846550),r=()=>a(154186),n=()=>a(518242),o=()=>a(661641),s=()=>a(644248),l=a(785893);function d(e){const{children:t,onClick:a,width:n,height:o,shouldHideBorders:d=!1,href:c,orientation:u="vertical",style:p,isDisabled:g=!1,hoveredStyle:m,pressedStyle:f}=e,[h,b]=(0,s().C)(),y=function(e){const{width:t,height:a,orientation:r,isHovered:n,isDisabled:o}=e;return(0,i().yK)((e=>({marketplaceCardWrapper:{position:"relative",width:"100%",display:"flex"},marketplaceCardContainer:{position:"relative",borderRadius:"12px",transition:"background 20ms ease-in 0s",display:"flex",flexDirection:"vertical"===r?"column":"row",cursor:"pointer",overflow:"hidden",width:t??252,height:a??"auto",..."dark"===e.mode&&{background:"rgba(255, 255, 255, 0.05)"},flex:1},marketplaceCardContainerHovered:{background:"dark"===e.mode?"rgba(255, 255, 255, 0.05)":"none"},marketplaceCardContainerPressed:{background:"dark"===e.mode?"rgba(255, 255, 255, 0.05)":"none"},boxShadow:{position:"absolute",pointerEvents:"none",borderRadius:12,inset:0,zIndex:1,..."dark"===e.mode?{boxShadow:n&&!o?"rgba(255, 255, 255, 0.05) 0px 0px 0px 1px inset":"unset"}:{boxShadow:n&&!o?"0px 12px 32px 0px rgba(0, 0, 0, 0.03), 0px 0px 0px 1px rgba(0, 0, 0, 0.08)":"0px 12px 32px 0px rgba(0, 0, 0, 0.02), 0px 0px 0px 1px rgba(0, 0, 0, 0.05)"}}})),[r,t,a,n,o])}({width:n,height:o,orientation:u,isHovered:b,isDisabled:g});return(0,l.jsxs)("div",{ref:h,style:y.marketplaceCardWrapper,children:[(0,l.jsx)(r().Z,{style:{...y.marketplaceCardContainer,...p},hoveredStyle:{...y.marketplaceCardContainerHovered,...m},pressedStyle:{...y.marketplaceCardContainerPressed,...f},onClick:a,href:c,disabled:g,children:t}),!d&&(0,l.jsx)("div",{style:y.boxShadow})]})}function c(e){const{imageHeight:t,imageWidth:a,src:r,overlay:o,alt:d,shouldShowBorders:c=!1,imageContainerStyle:u={},imageStyle:p={},isDisabled:g=!1,imageBorderRadius:m=12,href:f}=e,[h,b]=(0,s().C)(),y=function(e){const{isHovered:t,imageHeight:a,src:r,href:n,borderRadius:o,isDisabled:s,imageWidth:l}=e;return(0,i().yK)((e=>({marketplaceCardImageContainer:{position:"relative",borderRadius:o,transition:"background 20ms ease-in 0s",cursor:n&&"pointer"},marketplaceCardImageOverlay:{position:"absolute",top:30,left:16},marketplaceCardImage:{borderRadius:o,objectPosition:"inherit",...void 0!==a?{height:a}:{height:"auto"},...void 0!==l?{width:l}:{width:"inherit"},...!r&&{background:e.surface.wash},..."dark"===e.mode&&{border:"1px solid",borderColor:e.marketplaceEditorial.border.white,...t&&{borderColor:e.marketplaceEditorial.border.hover.white}}},marketplaceCardImageBoxContainer:{objectPosition:"inherit"},boxShadow:{position:"absolute",pointerEvents:"none",borderRadius:o,inset:0,zIndex:1,..."dark"===e.mode?{boxShadow:t&&!s?"rgba(255, 255, 255, 0.05) 0px 0px 0px 1px inset":"unset"}:{boxShadow:t&&!s?"0px 12px 32px 0px rgba(0, 0, 0, 0.03), 0px 0px 0px 1px rgba(0, 0, 0, 0.08)":"0px 12px 32px 0px rgba(0, 0, 0, 0.02), 0px 0px 0px 1px rgba(0, 0, 0, 0.05)"}}})),[n,t,a,r,o,s,l])}({isHovered:b,imageHeight:t,imageWidth:a,src:r,isDisabled:g,href:f,borderRadius:m}),v=(0,l.jsxs)("div",{style:{...y.marketplaceCardImageContainer,...u},ref:h,children:[r?(0,l.jsx)(n().ZP,{src:r,style:{...y.marketplaceCardImage,...p},placeholderLoadedStyle:y.marketplaceCardImageBoxContainer,loading:"lazy",alt:d}):(0,l.jsx)("div",{style:{...y.marketplaceCardImage,...p}}),o&&(0,l.jsx)("div",{style:y.marketplaceCardImageOverlay,children:o}),c&&(0,l.jsx)("div",{style:y.boxShadow})]});return f?(0,l.jsx)("a",{href:f,children:v}):v}function u(e){const{title:t,subtitle:a,children:r,style:n}=e,s=(0,i().yK)((()=>({marketplaceCardContentContainer:{position:"relative",padding:"12px 16px 16px 16px"},marketplaceCardTitleContainer:{display:"flex",flexDirection:"column",gap:"2px",height:"100%"}})),[]);return(0,l.jsxs)("div",{style:{...s.marketplaceCardContentContainer,...n},children:[(0,l.jsxs)("div",{style:s.marketplaceCardTitleContainer,children:["string"==typeof t?(0,l.jsx)(o().q,{styleName:"Body-14px/Regular",colorName:"primary",children:t}):(0,l.jsx)(l.Fragment,{children:t}),a?"string"==typeof a?(0,l.jsx)(o().q,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:a}):a:null]}),r]})}},809368:(e,t,a)=>{"use strict";a.d(t,{T:()=>o});a(667294);var i=()=>a(846550),r=()=>a(668001),n=a(785893);function o(e){const{size:t=22,radius:a=100}=e,o=function(e){const{size:t,radius:a}=e;return(0,i().yK)((()=>({loadingAvatar:{width:t,height:t,borderRadius:a}})),[t,a])}({size:t,radius:a});return(0,n.jsx)(r().Z,{style:o.loadingAvatar})}},786:(e,t,a)=>{"use strict";a.d(t,{e:()=>o});a(667294);var i=()=>a(846550),r=()=>a(668001),n=a(785893);function o(e){const{width:t,height:a,borderRadius:o,marginBottom:s}=e,l=function(e){const{width:t,height:a,borderRadius:r,marginBottom:n}=e;return(0,i().yK)((()=>({loadingText:{width:t??120,height:a??14,borderRadius:r??2,marginBottom:n??0}})),[t,a,r,n])}({width:t,height:a,borderRadius:o,marginBottom:s});return(0,n.jsx)(r().Z,{style:l.loadingText})}},619384:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});class i extends(()=>a(263184))().default{constructor(){super(...arguments),this.updatePreviewState=e=>{this.update((t=>({...t,previewCanvasState:e(t.previewCanvasState)})))}}getInitialState(){return{chart:void 0,responsiveChartOptions:void 0,previewCanvasState:void 0,exportBackgroundColor:"gradient"}}}const r=i},974442:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});const i=a(263184).default.createValue({open:!1},{name:"ConfirmOverwriteModalStore"})},628642:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});class i extends(()=>a(263184))().default{getInitialState(){return{open:!1}}}const r=new i},779522:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});const i=new(a(168469).q)((e=>{let{spaceId:t}=e;return t}),(async function(e,t){var i;let{spaceId:r}=t;const n=await Promise.resolve().then(a.bind(a,824462)),o=await n.callApi({eventName:"getInternalDomains",environment:e,data:{spaceId:r}});return"success"===o.type?null===(i=o.data)||void 0===i?void 0:i.internalDomainsWithInfo:void 0}));a(947115).exposeDebugValue("InternalDomainsStore",i);const r=i},994875:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});class i extends(()=>a(263184))().default{getInitialState(){return{discussionIdToExpansionStartPointMap:{}}}}const r=new i},815277:(e,t,a)=>{"use strict";a.d(t,{CH:()=>g,DE:()=>l().DE,KQ:()=>l().KQ,Rv:()=>l().Rv,V5:()=>p().V5,VX:()=>m,eB:()=>l().eB,oo:()=>l().oo});var i=()=>a(255933),r=()=>a(779709),n=()=>a(205228),o=()=>a(845682),s=()=>a(30795),l=()=>a(546464),d=()=>a(404791),c=()=>a(897257),u=()=>a(18281),p=()=>a(259408);const g={guests:e=>{if(!c().subscriptionDataStoreInstance.state)return"loading";return{current:(0,u().s1)(e.environment,e.spaceId,c().subscriptionDataStoreInstance.state)}},team_self_promotion:e=>{},internal_guests:e=>{if(!c().subscriptionDataStoreInstance.state)return"loading";return{current:(0,u().s1)(e.environment,e.spaceId,c().subscriptionDataStoreInstance.state),hasLowGuestLimit:(0,a(548812).fc)()}},members:e=>{const t=c().subscriptionDataStoreInstance.state;return{current:t?(0,s().W)(e.environment,e.spaceId,t):0}},non_admin_members:e=>{},view_chart:e=>{},form_filesize:e=>{},form_customization:e=>{},premium_automations:e=>{},move_to:e=>{},claimable_spaces:e=>{},domain_settings:e=>{},managed_users:e=>{},invite_user_to_workspace_mentions:e=>{},saml:e=>{},scim:e=>{},export_members:e=>{},hipaa_compliance:e=>{},sites_multiple_public_domains:e=>{},custom_image_upload_favicon:e=>{},custom_public_sites_layout:e=>{},seo_title_and_description:e=>{},admin_transfer_private_content:e=>{},ai_slack_qna:e=>{},configurable_mention_invites:e=>{},configurable_retention:e=>{},unbranded_forms:e=>{},ai_google_drive_qna:e=>{},watermarkless_chart_export:e=>{},configurable_deletion_and_retention_settings:e=>{},sudo_mode:e=>{},ai_github_connector:e=>{},ai_jira_connector:e=>{},slack_imports_invite:e=>{},content_reprovisioning:e=>{},ai_space_usage:e=>{var t;let{environment:a,spaceId:l}=e;const u=new(o().H)(a,{table:i().bx,id:l}).getModel(),p=(0,r().oc)(n().default.promotions.ai,u),g=(null===(t=d().Z.state)||void 0===t?void 0:t.spaceUsage)??0,m=c().subscriptionDataStoreInstance.state;return{current:g,memberCount:m?(0,s().W)(a,l,m):0,aiPromotionConfig:p,space:u}},ai_user_usage:e=>{var t;let{environment:a,spaceId:l}=e;const u=new(o().H)(a,{table:i().bx,id:l}).getModel(),p=(0,r().oc)(n().default.promotions.ai,u),g=(null===(t=d().Z.state)||void 0===t?void 0:t.userUsage)??0,m=c().subscriptionDataStoreInstance.state;return{current:g,memberCount:m?(0,s().W)(a,l,m):0,aiPromotionConfig:p,space:u}},block_read_and_write_role:e=>{}};function m(e){return(0,l().Rv)(e)??!1}},877727:(e,t,a)=>{"use strict";a.d(t,{C3:()=>s,D:()=>l,QZ:()=>o,fo:()=>n});var i=()=>a(146947),r=()=>a(749826);function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r().default.checkGate({gateName:"packaging_m2_additional_entrypoints"})&&o(e,t)}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!e.device.isPhone&&s(t)}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r().default.checkGate({gateName:"workflow_templates_prototype",...e})||"control"!==l(e)}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i().locale.startsWith("en-")||r().default.checkGate({gateName:"packaging_m2_localize_templates"})?r().default.getEligibleGroup({experimentId:"packaging_m2_entry_point",defaultGroup:"control",...e}):"control"}},999582:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});class i extends(()=>a(263184))().default{getInitialState(){return{}}}const r=new i;a(947115).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",r);const n=r},184441:(e,t,a)=>{"use strict";a.d(t,{default:()=>n});class i extends(()=>a(263184))().default{getInitialState(){return{open:!1,isShowingLoadingState:!1}}updateUserCustomizations(e,t){this.state.open&&this.state.collectionTemplate&&this.setState({...this.state,userCustomizations:{...this.state.userCustomizations,[e]:t}})}updateCollectionTemplate(e){this.state.open&&this.state.collectionTemplate&&this.setState({...this.state,collectionTemplate:e})}updatePreviewCollectionViewTemplateId(e){this.state.open&&this.state.collectionTemplate&&this.setState({...this.state,previewCollectionViewTemplateId:e})}getParentStore(){return this.state.open?this.state.parentStore:void 0}getShouldShowExpandedTemplateList(){return this.state.open&&this.state.shouldShowExpandedTemplateList}setShouldShowExpandedTemplateList(e){this.state.open&&this.setState({...this.state,shouldShowExpandedTemplateList:e})}close(e){var t,a;this.state.open&&(null===(t=(a=this.state).onClose)||void 0===t||t.call(a,e),this.setState({open:!1,isShowingLoadingState:!1}))}reset(){this.setState(this.getInitialState())}}const r=new i;(0,a(947115).exposeDebugValue)("InitializeWorkflowTemplateModalStore",r);const n=r},29488:(e,t,a)=>{"use strict";function i(e){return`${e.table}:${e.id}`}a.d(t,{O:()=>i})},912203:(e,t,a)=>{"use strict";a.d(t,{$M:()=>h,GQ:()=>w,Jy:()=>j,LF:()=>S,NO:()=>g,Of:()=>M,SF:()=>u,TX:()=>_,XO:()=>b,Y_:()=>c,Ym:()=>f,bD:()=>v,cO:()=>p,fo:()=>C,rR:()=>m});a(267602),a(653476),a(228244);var i=()=>a(513670),r=()=>a(696459),n=()=>a(226413),o=()=>a(109477),s=()=>a(455222),l=()=>a(305580);(0,r().AO)((e=>(0,r().$K)(e)&&(0,r().$K)(e.target)&&(0,r().$K)(e.external_bot_id)?{true:{external_bot_id:e.external_bot_id,target:e.target}}:{false:e}));const d={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1},c={checkbox:[{type:"checkbox"}],date:[{type:"date"}],email:[{type:"text"}],multi_select:[{type:"text"},{of:{type:"text"},type:"array"}],number:[{type:"number"}],person:[{type:"person"},{of:{type:"person"},type:"array"}],phone_number:[{type:"text"}],relation:[{type:"block"},{of:{type:"block"},type:"array"}],select:[{type:"text"},{of:{type:"text"},type:"array"}],status:[{type:"text"},{of:{type:"text"},type:"array"}],text:void 0,title:void 0,url:[{type:"text"}]};function u(e){return Boolean(d[e.type]&&!(0,n().NK)(e)&&(!(0,n().qQ)(e)||void 0===(0,n().q3)(e)))}function p(e){const{collectionFormat:t,collectionSchema:a,filter:s,sort:d,sourcePropertyIds:c}=e,p=(c??(0,r().Yd)(a)).filter(((t,i,r)=>{const o=a[t];return!(!o||!u(o))&&(("relation"!==o.type||!e.restrictCrossSpace||!(0,n().Qh)(e.spaceId,o))&&(!s||s([t,o],i,a)))}));if(0===p.length)return[];if(!t||!1===d)return p;const g=(0,l().i)(t,a,void 0,o().j5.Page).collection_page_properties||[];return i().MR(p,(e=>g.findIndex((t=>t.property===e))))}function g(e){const{collectionFormat:t,collectionSchema:a,sort:s}=e,d=(0,r().Yd)(a).filter(((e,t,i)=>{const r=a[e];return!(!r||!(0,n().U8)(r))}));if(0===d.length)return[];if(!t||!1===s)return d;const c=(0,l().i)(t,a,void 0,o().j5.Page).collection_page_properties||[];return i().MR(d,(e=>c.findIndex((t=>t.property===e))))}function m(e){return e.type===s().$E.InvalidCharacter?{type:e.type,character:e.character}:e.type===s().$E.TokenExpected?{type:e.type,token:e.token}:e.type===s().FY.MissingSchemaPropertyOnThisRow||e.type===s().FY.MissingSchemaPropertyOnCollection?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===s().FY.ThisRowBlockPropertyMismatchCollection?{type:e.type,thisRowCollection:e.thisRowCollection}:e.type===s().FY.MissingContextVariable?{type:e.type,valueId:e.valueId}:e.type===s().FY.FunctionCallTooFewArguments?{type:e.type,numArguments:e.numArguments}:e.type===s().FY.FunctionCallUnexpectedArgument?{type:e.type,parameterIndex:e.parameterIndex}:e.type===s().FY.FunctionCallArgumentWrongType?{type:e.type,argumentType:e.argumentType,libraryFunctionName:e.libraryFunction.name,parameterIndex:e.parameterIndex}:e.type===s().FY.MissingDataDependencyBlock?{type:e.type,blockPointer:e.blockPointer}:e.type===s().FY.MissingDataDependencyPerson?{type:e.type,personPointer:e.personPointer}:e.type===s().FY.MemberPropertyMismatchCollection?{type:e.type,blockCollection:e.blockCollection}:e.type===s().FY.DownstreamParseFailure?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===s().FY.ContextVariableWrongType?{type:e.type,valueId:e.valueId,expectedType:e.expectedType,resultType:e.resultType}:e.type===s().FY.DisallowedValueType?{type:e.type,expressionValue:e.expressionValue,allowedValueTypes:e.allowedValueTypes}:e.type===s().FY.LibraryFunctionExecutionError?{type:e.type,error:e.error,libraryFunctionName:e.libraryFunction.name}:{type:e.type}}const f={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,button:!1,file:!1,verification:!1,auto_increment_id:!1,created_by:!1,created_time:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1};function h(e){return Boolean(f[e.type])}function b(e){const{collectionFormat:t,collectionSchema:a,filter:s,sort:d}=e,c=(0,r().Yd)(a).filter(((e,t,i)=>{var r;const o=a[e];return!(!o||!f[o.type])&&((!(0,n().qQ)(o)||null===(r=(0,n().q3)(o))||void 0===r||!r.auto_update_on_edit)&&(!s||s([e,o],t,a)))}));if(0===c.length)return[];if(!t||!1===d)return c;const u=(0,l().i)(t,a,void 0,o().j5.Page).collection_page_properties||[];return i().MR(c,(e=>u.findIndex((t=>t.property===e))))}const y={checkbox:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,date:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1};function v(e){return y[e.type]}const x={checkbox:!0,created_by:!0,created_time:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,last_edited_by:!0,last_edited_time:!0,auto_increment_id:!1,button:!1,file:!1,formula:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1};function _(e){return x[e.type]}function w(e){return 0===e}function C(e){return function(e){return"button_block"===e||"button_property"===e}(e)}function S(e){const{property:t,collectionSchema:a}=e;return!!a&&!a[t]}function j(e){const{collectionSchema:t,property:a,type:i}=e,r=null==t?void 0:t[a];return!r||("action"===i?!u(r):!f[r.type])}function M(e){let{automationTrigger:t,collectionSchema:a}=e;if("event"===(null==t?void 0:t.type)||"notification_event"===(null==t?void 0:t.type)){const{pagesAdded:e,pagePropertiesEdited:i,source:n}=t.event;if(void 0===n)return!1;const o="some"===i.type&&i.some,s="all"===i.type&&i.all;if((o||s||[]).some((e=>S({collectionSchema:a,property:e.property})||j({collectionSchema:a,property:e.property,type:"trigger"}))))return!1;const l="some"===i.type&&(!(0,r().$K)(i.some)||0===i.some.length),d="all"===i.type&&(!(0,r().$K)(i.all)||0===i.all.length);if(!e&&("none"===i.type||l||d))return!1}else{if("recurrence"!==(null==t?void 0:t.type))return!1;if(!t.recurrence)return!1}return!0}},157955:(e,t,a)=>{"use strict";a.r(t),a.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>T,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>w,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>_,MAX_RECURRENCE_INTERVAL:()=>h,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>b,RRULE_WEEKDAYS_MAP:()=>f,convertFromUnpersistedRecurrenceConfig:()=>L,convertToUnpersistedRecurrenceConfig:()=>P,getFormattedEndCondition:()=>I,getFormattedNextRecurrenceTime:()=>k,getNextDateUtc:()=>M,getRecurrenceAfter:()=>S,isRunningBetweenMidnightAnd3AM:()=>j,isValidRecurrenceInterval:()=>y,isValidRecurrenceNumberOfRuns:()=>v,rruleFromRecurrence:()=>x,templateAncestorsViolateRecurrenceNesting:()=>C});a(267602),a(653476),a(241792);var i=()=>a(730120);a(670560);function r(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];if(0===a.length)return e.map((e=>[e]));const n=[];for(const o of e)n.push(...r(a[0],...a.slice(1)).map((e=>[o,...e])));return n}var n=()=>a(696459),o=()=>a(326966),s=()=>a(803021),l=()=>a(646574),d=()=>a(998411),c=()=>a(578292);class u extends(()=>a(484885))().Ci{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var p=()=>a(494616);const g=(0,a(788860).vU)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12–3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),m={day:u.DAILY,week:u.WEEKLY,month:u.MONTHLY,year:u.YEARLY},f={MO:u.MO,TU:u.TU,WE:u.WE,TH:u.TH,FR:u.FR,SA:u.SA,SU:u.SU},h=99,b=999;function y(e){return(0,o().hj)(e)&&Number.isInteger(e)&&e>0&&e<=h}function v(e){return(0,o().hj)(e)&&Number.isInteger(e)&&e>0&&e<=b}function x(e){const{start_date:t,frequency:a,interval:i,weekdays:o,timezone:l,hour:d,minute:c}=e,p="week"===a&&o?o.map((e=>f[e])):void 0,g={};return(0,n().$K)(e.end_condition)&&("date"===e.end_condition.type?g.until=(0,s().pd)(e.end_condition.end_at):"number"===e.end_condition.type?g.count=e.end_condition.number_of_occurrences:(0,n().t1)(e.end_condition)),"month"===e.frequency&&(0,n().$K)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?g.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?g.byweekday=r(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((e=>{let[t,a]=e;return f[t].nth(a)})):(0,n().t1)(e.monthly_restriction)),new u({freq:m[a],dtstart:(0,s().pd)(t),interval:i,byweekday:p,tzid:l,byhour:d??0,byminute:c??0,bysecond:0,...g})}const _=1,w=1;function C(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const a=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),i=e.length,r=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,n=i>_,o=a.length>=w;return{violatesConstraint:n||o,templateNestingExceedsMaxDepth:n,ancestorHasDailyTemplate:o,nestedDepthOfAutomationAncestors:i,immediateAncestorRecurrenceType:r}}function S(e){const{recurrence:t,afterDate:a}=e;if((0,p().nA)(t)){const e=(0,s().kq)(a);return t.start_date>=e?new Date(t.start_date):void 0}{const e=x(t).after((0,s().pd)(a));if(!e)return;return(0,s().YL)(e)}}function j(e){return 0===e.hour||1===e.hour||2===e.hour}function M(e){return x(e).after((0,s().pd)((0,s().Jh)()))||void 0}function k(e){const{recurrence:t,intl:a}=e,r=M(L(t));if(!r)return;const n=j(t),o=i().ou.fromJSDate(r).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,c().E2)(a)).setZone(t.timezone),s=(0,l().p6)({date:o,dateFormat:"relative",allowRelativeDates:!0,intl:a,shortenDate:!0});if(n)return a.formatMessage(g.dateBetweenMidnightAnd3AM,{date:s});{let e=o.toLocaleString(i().ou.TIME_SIMPLE);return t.timezone!==(0,d().r)()&&(e+=` ${o.toFormat("ZZZZ")}`),a.formatMessage(g.dateAtTime,{date:s,time:e})}}function I(e,t){return(0,n().$K)(e)?"number"===e.type?t.formatMessage(g.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,l().p6)({date:i().ou.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,n().t1)(e):t.formatMessage(g.noEndCondition)}const T=100;function P(e){return{...e,start_date:(0,s().kq)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,s().kq)(e.end_condition.end_at)}:(0,n().t1)(e.end_condition):void 0}}function D(e,t){const a=i().ou.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,s().Jh)(a.toJSDate())}}function L(e){return{...e,start_date:(0,s().Jh)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?D(e,e.end_condition):(0,n().t1)(e.end_condition):void 0}}},970977:(e,t,a)=>{"use strict";a.d(t,{C:()=>m,Ib:()=>p,SO:()=>u,lY:()=>g,o0:()=>f,se:()=>h});a(122556),a(582845),a(250570),a(533019),a(721473),a(788208),a(22624);var i=()=>a(332143),r=()=>a(834458),n=()=>a(608352),o=()=>a(532850),s=()=>a(820271),l=()=>a(145112),d=()=>a(790300);const c=new Set(["groupBy_property_not_configured","groupBy_property_deleted","groupBy_property_not_groupable","groupBy_formula_not_groupable","aggregation_property_not_configured","aggregation_invalid","aggregation_deleted","stackBy_property_not_groupable","stackBy_formula_not_groupable","stackBy_property_deleted","name_property_not_configured","name_property_deleted","name_property_invalid","property_value_property_not_configured","property_value_property_deleted","property_value_property_invalid"]);function u(e){let{chartConfig:t,collectionSchema:a}=e;if(!t||"placeholder"===t.type)return"chart_config_not_found";if(void 0===t.dataConfig)return"data_model_invalid";if("groups_reducer"===t.dataConfig.type){const e=t.dataConfig.groupBy;if(!e)return"groupBy_property_not_configured";const s=(0,o().Qm)({schema:a,property:e.property});if(!s)return"groupBy_property_deleted";const u=(0,n().LG)(s);if("formula"===s.type&&!u)return"groupBy_formula_not_groupable";if(!u)return"groupBy_property_not_groupable";const p=t.dataConfig.aggregationConfig;if(!p)return"aggregation_property_not_configured";if("count"!==p.aggregation.aggregator){const e=p.aggregation.property,t=(0,o().Qm)({schema:a,property:e});if(!t)return"aggregation_deleted";if((0,i().nC)(p.aggregation)&&t&&!(0,l().HQ)(t))return"aggregation_invalid";if("formula"===(null==t?void 0:t.type)&&"unique"===p.aggregation.aggregator){const e=(0,r().getFormulaPropertySchemaResultType)(t);if(!(0,l().Oy)(e))return"aggregation_invalid"}}if((0,d().u)(t)){var c;const e=null===(c=t.dataConfig.aggregationConfig.stackOptions)||void 0===c?void 0:c.groupBy.property;if(e){const t=(0,o().Qm)({schema:a,property:e});if(!t)return"stackBy_property_deleted";const i=(0,n().LG)(t);if("formula"===t.type&&!i)return"stackBy_formula_not_groupable";if(!i)return"stackBy_property_not_groupable"}}}else{if("results_reducer"!==t.dataConfig.type)return"data_model_invalid";{const e=t.dataConfig.nameProperty;if(!e)return"name_property_not_configured";const i=(0,o().Qm)({schema:a,property:e});if(!i)return"name_property_deleted";if(!(0,s().HT)(i))return"name_property_invalid";const r=t.dataConfig.valueProperty;if(!r)return"property_value_property_not_configured";const n=(0,o().Qm)({schema:a,property:r});if(!n)return"property_value_property_deleted";if(!(0,s()._i)(n))return"property_value_property_invalid"}}}function p(e){return"groupBy_property_not_configured"===e||"groupBy_property_deleted"===e||"groupBy_property_not_groupable"===e||"groupBy_formula_not_groupable"===e||"name_property_not_configured"===e||"name_property_deleted"===e||"name_property_invalid"===e}function g(e){return"aggregation_property_not_configured"===e||"aggregation_deleted"===e||"aggregation_invalid"===e||"property_value_property_not_configured"===e||"property_value_property_deleted"===e||"property_value_property_invalid"===e}function m(e){return"stackBy_property_deleted"===e||"stackBy_property_not_groupable"===e||"stackBy_formula_not_groupable"===e||"stackBy_property_no_values"===e}function f(e){return c.has(e)}function h(e){return"stackBy_property_no_values"===e}},145112:(e,t,a)=>{"use strict";a.d(t,{Dv:()=>p,Fh:()=>c,GX:()=>w,Gs:()=>u,HQ:()=>I,Ni:()=>g,OY:()=>_,Oy:()=>L,Q5:()=>m,R1:()=>C,Sw:()=>P,T9:()=>M,UJ:()=>y,Xg:()=>h,Xm:()=>b,dY:()=>S,f3:()=>T,gg:()=>v,l2:()=>D,lr:()=>f,qL:()=>E,qV:()=>k,v6:()=>j,vi:()=>R});var i=()=>a(696459),r=()=>a(834458),n=()=>a(608352),o=()=>a(226413),s=()=>a(532850),l=()=>a(964120),d=()=>a(790300);const c=["gray","blue","yellow","green","purple","teal","orange","pink","red"],u=["auto","colorful"];let p=function(e){return e.small="small",e.medium="medium",e.large="large",e.extra_large="extra_large",e}({});function g(e){switch(e){case p.small:return 300;case p.medium:return 400;case p.large:return 600;case p.extra_large:return 800;default:(0,i().t1)(e)}}function m(e){switch(e){case p.small:return 150;case p.medium:return 250;case p.large:return 300;case p.extra_large:return 400;default:(0,i().t1)(e)}}let f=function(e){return e.avatar="avatar",e.avatar_name="avatar_name",e.name="name",e}({}),h=function(e){return e.none="none",e.x_axis="x_axis",e.y_axis="y_axis",e.both="both",e}({}),b=function(e){return e.none="none",e.horizontal="horizontal",e.vertical="vertical",e.both="both",e}({}),y=function(e){return e.normal="normal",e.percent="percent",e.side_by_side="side_by_side",e}({}),v=function(e){return e.none="none",e.value="value",e.name="name",e.name_and_value="name_and_value",e}({});function x(e){if(!e)return!1;return n().z8.includes(e)}function _(e){const t=(0,r().getFormulaPropertySchemaBaseResultType)(e);return"text"===t||"number"===t||"checkbox"===t||"person"===t||"date"===t}function w(e,t){var a,r;let o,d=e.chartFormat;if("groups_reducer"===e.dataConfig.type){var c;const{chartFormat:a,chartGroupByFormat:i}=function(e,t,a,i){const r=(0,s().Qm)({schema:i,property:e.property});if(r&&"donut"===a&&(0,l().jn)(r)){const a=(0,n().Cc)(e);return{chartFormat:{...t,mainSort:l().MN.yDescending},chartGroupByFormat:a}}return{chartFormat:t,chartGroupByFormat:e}}(null==e||null===(c=e.dataConfig)||void 0===c?void 0:c.groupBy,null==e?void 0:e.chartFormat,"donut",t);d=a,o={...e.dataConfig,groupBy:i,aggregationConfig:{aggregation:e.dataConfig.aggregationConfig.aggregation}}}else"results_reducer"===e.dataConfig.type?(o=e.dataConfig,d={...d,mainSort:l().MN.yDescending}):(0,i().t1)(e.dataConfig);R(e)&&d&&(void 0===(null===(a=d)||void 0===a?void 0:a.donutDataLabels)||(null===(r=d)||void 0===r?void 0:r.donutDataLabels)===v.none)?d.donutDataLabels=v.value:!R(e)&&d&&(d.donutDataLabels=v.none);const u={...e,type:"donut",dataConfig:o};return d&&(u.chartFormat=d),u}function C(e,t){let a;"groups_reducer"===e.dataConfig.type?a={...e.dataConfig,aggregationConfig:{...e.dataConfig.aggregationConfig,seriesFormat:{displayType:t},stackOptions:void 0}}:"results_reducer"===e.dataConfig.type?a={...e.dataConfig,valueSeriesFormat:{displayType:t}}:(0,i().t1)(e.dataConfig);const r=e.chartFormat;return r&&r.donutDataLabels&&r.donutDataLabels!==v.none?r.axisShowDataLabels=!0:!r||r.donutDataLabels!==v.none&&void 0!==r.donutDataLabels||(r.axisShowDataLabels=!1),{...e,type:t,dataConfig:a}}function S(e,t){let a;if("groups_reducer"===e.dataConfig.type){var r;const i=null==e||null===(r=e.dataConfig)||void 0===r?void 0:r.groupBy;a={...e.dataConfig,groupBy:i,aggregationConfig:{...e.dataConfig.aggregationConfig,seriesFormat:{displayType:t}}}}else"results_reducer"===e.dataConfig.type?a={...e.dataConfig,valueSeriesFormat:{displayType:t}}:(0,i().t1)(e.dataConfig);return{...e,type:t,dataConfig:a}}const j={main:l().MN.xAscending,stacked:l().MN.manual};function M(e){let{chartConfig:t,xAxisPropertyId:a,newDataConfigType:r,groupBy:n,aggregation:o,valueProperty:s}=e;const d="groups_reducer"===t.dataConfig.type?t.dataConfig.aggregationConfig.seriesFormat:t.dataConfig.valueSeriesFormat;"groups_reducer"===r?t.dataConfig={type:"groups_reducer",groupBy:n,aggregationConfig:{aggregation:o,seriesFormat:d,stackOptions:"groups_reducer"===t.dataConfig.type?t.dataConfig.aggregationConfig.stackOptions:void 0}}:"results_reducer"===r?t.dataConfig={type:"results_reducer",nameProperty:a,valueProperty:s,valueSeriesFormat:d}:(0,i().t1)(r);const c="formula"===n.type?n.groupBy.sort:n.sort;return t.chartFormat={...t.chartFormat,mainSort:(0,l().H9)(c)},t}function k(e){let{property:t,propertySchema:a,groupByOption:i,hideEmptyGroups:o}=e;const s=a.type;if((0,n().LG)(a)){if((0,n().A1)(s)){if(i&&x(i))return{type:s,property:t,groupBy:i,sort:{type:"ascending"}}}else{if((0,n().zb)(s)||"select"===s||"multi_select"===s)return{type:s,property:t,sort:{type:"ascending"}};if((0,n().H1)(s)){if(i&&((l=i)&&n().vu.includes(l)))return{type:s,property:t,groupBy:i,sort:{type:"ascending"}}}else{if("number"===s)return{type:s,property:t,groupBy:{type:"unique"},start:-1,end:-1,size:-1,sort:{type:"ascending"}};if("formula"===s){const e=(0,r().getFormulaPropertySchemaResultType)(a);if("number"===e)return{type:"formula",property:t,groupBy:{type:"number",groupBy:{type:"unique"},start:-1,end:-1,size:-1,sort:{type:"ascending"}}};if("date"===e&&x(i))return{type:"formula",property:t,groupBy:{type:"date",groupBy:i,sort:{type:"ascending"}}}}else if("person"===s)return{type:s,property:t,sort:{type:"manual"}}}}var l;return(0,n().fw)({property:t,propertySchema:a,hideEmptyGroups:o})}}function I(e){const t="formula"===e.type?(0,r().getFormulaPropertySchemaResultType)(e):void 0;return(0,o().G$)(e)||"number"===t}function T(e){const t="formula"===e.type?(0,r().getFormulaPropertySchemaResultType)(e):void 0;return(0,n().A1)(e.type)||"date"===t}function P(e){const t="formula"===e.type?(0,r().getFormulaPropertySchemaResultType)(e):void 0;return(0,o().U8)(e)||"person"===t}function D(e){if("formula"===e.type){const t=(0,r().getFormulaPropertySchemaResultType)(e);return(0,n().A1)(t)}return(0,n().A1)(e.type)}function L(e){return"text"===e||"number"===e||"person"===e||"date"===e}function E(e){var t;return!(!e||!(0,d().u)(e))&&("groups_reducer"!==e.dataConfig.type||!e.dataConfig.aggregationConfig.stackOptions||"percent"!==(null===(t=e.chartFormat)||void 0===t?void 0:t.axisGroupStyle))}function R(e){return!!E(e)&&(!(!e||!(0,d().u)(e))&&(void 0===(null===(t=e.chartFormat)||void 0===t?void 0:t.axisShowDataLabels)||(null===(a=e.chartFormat)||void 0===a?void 0:a.axisShowDataLabels)));var t,a}},793331:(e,t,a)=>{"use strict";a.d(t,{W:()=>n});a(667294);var i=()=>a(948505),r=a(785893);function n(e){const{cost:t,intl:a}=e,n=e.trailingZeroDisplay??"auto",o=e.currencySign??"accounting",s=i().n.fromValue(t);let l=a.formatNumber(s.amount/Math.pow(10,s.currencyValue.minorUnitDigits),{style:"currency",currency:s.currencyCode,currencyDisplay:"symbol",currencySign:o});return"stripIfInteger"===n&&(l=l.replace(new RegExp(`[.,]0{${s.currencyValue.minorUnitDigits}}(\\s+.*)?$`),"$1")),(0,r.jsx)(r.Fragment,{children:l})}},473759:(e,t,a)=>{"use strict";a.d(t,{v:()=>i});const i=(0,a(827282).CZ)("arrowCounterClockwise",{default:{loader:()=>a.e(26518).then(a.bind(a,126518))},small:{loader:()=>a.e(98759).then(a.bind(a,598759))},mini:{loader:()=>a.e(51079).then(a.bind(a,451079))},large:{loader:()=>a.e(50632).then(a.bind(a,432680))}})},423087:(e,t,a)=>{"use strict";a.d(t,{$:()=>i});const i=(0,a(827282).CZ)("checkmark",{default:{loader:()=>a.e(55967).then(a.bind(a,155967))},small:{loader:()=>a.e(23626).then(a.bind(a,823626))},mini:{loader:()=>a.e(88900).then(a.bind(a,888900))},large:{loader:()=>a.e(80739).then(a.bind(a,180739))}})},624563:(e,t,a)=>{"use strict";a.d(t,{m:()=>i});const i=(0,a(827282).CZ)("chevronDown",{default:{loader:()=>a.e(17395).then(a.bind(a,117395))},small:{loader:()=>a.e(36908).then(a.bind(a,736908))},mini:{loader:()=>a.e(95167).then(a.bind(a,295167))},large:{loader:()=>a.e(83265).then(a.bind(a,583265))}})},331034:(e,t,a)=>{"use strict";a.d(t,{b:()=>i});const i=(0,a(827282).CZ)("infoCircle",{default:{loader:()=>a.e(15215).then(a.bind(a,715215))},small:{loader:()=>a.e(16454).then(a.bind(a,916454))},mini:{loader:()=>a.e(49412).then(a.bind(a,949412))},large:{loader:()=>a.e(24225).then(a.bind(a,524225))}})},151236:(e,t,a)=>{"use strict";a.d(t,{D:()=>i});const i=(0,a(827282).CZ)("magnifyingGlass",{default:{loader:()=>a.e(27711).then(a.bind(a,27711))},small:{loader:()=>a.e(5879).then(a.bind(a,305879))},mini:{loader:()=>a.e(39603).then(a.bind(a,39603))},large:{loader:()=>a.e(62219).then(a.bind(a,662219))}})},774119:(e,t,a)=>{"use strict";a.d(t,{_:()=>i});const i=(0,a(827282).CZ)("plusCircleFill",{default:{loader:()=>a.e(49422).then(a.bind(a,549422))},small:{loader:()=>a.e(44318).then(a.bind(a,644318))},mini:{loader:()=>a.e(96836).then(a.bind(a,796836))},large:{loader:()=>a.e(43249).then(a.bind(a,543249))}})},366767:(e,t,a)=>{"use strict";a.d(t,{$:()=>i});const i=(0,a(827282).CZ)("xmarkCircle",{default:{loader:()=>a.e(56486).then(a.bind(a,56486))},small:{loader:()=>a.e(89980).then(a.bind(a,889980))},mini:{loader:()=>a.e(15752).then(a.bind(a,915752))},large:{loader:()=>a.e(17084).then(a.bind(a,817084))}})},483004:(e,t,a)=>{"use strict";a.d(t,{B:()=>r});a(667294);var i=a(785893);const r=(0,a(827282).IU)("chartMixed",{viewBox:"0 0 64 64",svg:(0,i.jsx)("path",{d:"m60,48v6H4v-6h6v-14h12v14h4v-8h12v8h4v-22h12v22h6ZM16,28c1.84,0,3.49-.83,4.59-2.14l5.41,2.03s0,.07,0,.11c0,3.31,2.69,6,6,6s6-2.69,6-6c0-.78-.15-1.53-.43-2.22l7.49-6.55c.87.49,1.87.77,2.94.77,3.31,0,6-2.69,6-6s-2.69-6-6-6-6,2.69-6,6c0,.78.15,1.53.43,2.22l-7.49,6.55c-.87-.49-1.87-.77-2.94-.77-1.84,0-3.49.83-4.59,2.14l-5.41-2.03s0-.07,0-.11c0-3.31-2.69-6-6-6s-6,2.69-6,6,2.69,6,6,6Z"})})},809461:(e,t,a)=>{"use strict";a.d(t,{w:()=>n});a(667294);var i=a(785893);const r={viewBox:"0 0 20 20",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M10 7c-1.654 0-3 1.346-3 3s1.346 3 3 3 3-1.346 3-3-1.346-3-3-3m0 4.5c-.827 0-1.5-.673-1.5-1.5s.673-1.5 1.5-1.5 1.5.673 1.5 1.5-.673 1.5-1.5 1.5"}),(0,i.jsx)("path",{d:"M18.307 8.445a.7.7 0 0 0-.57-.56l-1.643-.283-.056-.138.973-1.378a.7.7 0 0 0 .008-.795 8.5 8.5 0 0 0-2.244-2.264.7.7 0 0 0-.8.006l-1.36.96-.138-.056-.289-1.661a.7.7 0 0 0-.554-.567 8.5 8.5 0 0 0-3.188-.015.7.7 0 0 0-.562.569l-.282 1.643-.139.056-1.377-.971a.7.7 0 0 0-.794-.01q-.68.457-1.284 1.06a8.5 8.5 0 0 0-.98 1.185.7.7 0 0 0 .005.799l.961 1.36q-.03.069-.057.139l-1.66.287a.7.7 0 0 0-.569.555 8.5 8.5 0 0 0-.015 3.188.7.7 0 0 0 .57.561l1.643.283.056.14-.971 1.375a.7.7 0 0 0-.01.793 8.6 8.6 0 0 0 2.244 2.267.7.7 0 0 0 .8-.006l1.36-.961.14.058.286 1.66a.7.7 0 0 0 .555.568 8.5 8.5 0 0 0 3.188.015.7.7 0 0 0 .561-.57l.283-1.643q.07-.027.138-.056l1.378.972a.7.7 0 0 0 .795.008 8.6 8.6 0 0 0 2.264-2.243.7.7 0 0 0-.006-.8l-.961-1.36.058-.138 1.66-.289a.7.7 0 0 0 .567-.554q.159-.806.16-1.656a8.5 8.5 0 0 0-.144-1.533m-1.314 2.45-1.567.271a.7.7 0 0 0-.545.47c-.09.27-.189.508-.303.726a.7.7 0 0 0 .05.728l.904 1.28a7 7 0 0 1-1.22 1.207l-1.297-.915a.7.7 0 0 0-.716-.055 5 5 0 0 1-.734.298.7.7 0 0 0-.476.548l-.267 1.549a7.2 7.2 0 0 1-1.717-.009l-.27-1.567a.7.7 0 0 0-.47-.545 5 5 0 0 1-.728-.303.69.69 0 0 0-.726.05l-1.281.904a7.2 7.2 0 0 1-1.208-1.22l.916-1.297a.7.7 0 0 0 .054-.717 5 5 0 0 1-.297-.732.7.7 0 0 0-.549-.477l-1.548-.267a7.2 7.2 0 0 1 .009-1.717l1.567-.27a.7.7 0 0 0 .545-.468c.09-.273.19-.512.303-.731a.7.7 0 0 0-.05-.726l-.904-1.28a7.2 7.2 0 0 1 1.22-1.208l1.298.916c.21.15.486.17.716.054a5 5 0 0 1 .732-.297.7.7 0 0 0 .478-.549l.266-1.548a7.3 7.3 0 0 1 1.717.008l.271 1.568a.7.7 0 0 0 .468.545c.271.09.51.19.73.303a.7.7 0 0 0 .725-.05l1.281-.904a7.2 7.2 0 0 1 1.208 1.22l-.916 1.298a.7.7 0 0 0-.054.716c.117.233.216.48.297.733.08.25.291.433.548.477l1.549.267a7 7 0 0 1-.009 1.716"})]})},n=(0,a(827282).IU)("gear",r)},214924:(e,t,a)=>{"use strict";a.d(t,{W:()=>r});a(667294);var i=a(785893);const r=(0,a(827282).IU)("language",{viewBox:"0 0 64 64",svg:(0,i.jsx)("path",{d:"m20,19.24l2.16,5.76h-4.32l2.16-5.76Zm5.95,4.62c2.49-3.27,6.07-5.64,10.5-6.87-2.61-5.68-8.42-8.99-16.45-8.99C8.89,8,2,14.32,2,24.5c0,5.19,1.8,9.37,5.03,12.22l-5.03,5.03,1.5,2.25c4.06,0,7.8-1.36,10.81-3.63,1.74.41,3.64.63,5.69.63.82,0,1.61-.05,2.39-.11-.25-1.39-.39-2.85-.39-4.39,0-2.73.43-5.23,1.22-7.5h-6.88l-1.12,3h-4.22l6-16h6l2.95,7.86Zm18.05,13.46c.99-.9,1.84-1.99,2.4-3.32h-4.79c.56,1.33,1.41,2.42,2.4,3.32Zm12.97,11.4l5.03,5.03-1.5,2.25c-4.06,0-7.8-1.36-10.81-3.63-1.74.41-3.64.63-5.69.63-11.11,0-18-6.32-18-16.5s6.89-16.5,18-16.5,18,6.32,18,16.5c0,5.19-1.8,9.37-5.03,12.22Zm-3.97-18.72h-7v-3h-4v3h-7v4h2.49c.58,1.97,1.68,3.86,3.22,5.52-2.76,1.36-5.38,1.74-5.38,1.74l1.4,3.75c2.78-.5,5.21-1.48,7.26-2.78,2.05,1.3,4.49,2.29,7.26,2.78l1.4-3.75s-2.62-.38-5.38-1.74c1.55-1.66,2.64-3.55,3.22-5.52h2.49v-4Z"})})},431685:(e,t,a)=>{"use strict";a.d(t,{T:()=>r});a(667294);var i=a(785893);const r=(0,a(827282).IU)("ticket",{viewBox:"0 0 64 64",svg:(0,i.jsx)("path",{d:"m44,40h-24v-16h24v16Zm8-8c0,3.7,2.3,6,6,6v12H6v-12c3.7,0,6-2.3,6-6s-2.3-6-6-6v-12h52v12c-3.7,0-6,2.3-6,6Zm-4-12H16v24h32v-24Z"})})},697466:(e,t,a)=>{"use strict";function i(e){return{"en-US":{label:"English",caption:e.formatMessage({defaultMessage:"English (US)",id:"languagePicker.captions.englishUS"})},"de-DE":{label:"Deutsch",caption:e.formatMessage({defaultMessage:"German",id:"languagePicker.captions.germanDE"})},"ko-KR":{label:"한국어",caption:e.formatMessage({defaultMessage:"Korean",id:"languagePicker.captions.koreanKo"})},"zh-CN":{label:"简体中文",caption:e.formatMessage({defaultMessage:"Simplified Chinese",id:"languagePicker.captions.chineseS"})},"zh-TW":{label:"繁體中文",caption:e.formatMessage({defaultMessage:"Traditional Chinese",id:"languagePicker.captions.chineseT"})},"ja-JP":{label:"日本語",caption:e.formatMessage({defaultMessage:"Japanese",id:"languagePicker.captions.japaneseJa"})},"es-ES":{label:"Español (España)",caption:e.formatMessage({defaultMessage:"Spanish (Spain)",id:"languagePicker.captions.spanishEs"})},"es-LA":{label:"Español (Latinoamérica)",caption:e.formatMessage({defaultMessage:"Spanish (Latin America)",id:"languagePicker.captions.spanishLatam"})},"pt-BR":{label:"Português (Brasil)",caption:e.formatMessage({defaultMessage:"Portuguese (Brazil)",id:"languagePicker.captions.portugueseBr"})},"fr-FR":{label:"Français (France)",caption:e.formatMessage({defaultMessage:"French",id:"languagePicker.captions.frenchFr"})},"da-DK":{label:"Dansk",caption:e.formatMessage({defaultMessage:"Danish",id:"languagePicker.captions.danishDk"})},"fi-FI":{label:"Suomi",caption:e.formatMessage({defaultMessage:"Finnish",id:"languagePicker.captions.finnishFi"})},"nb-NO":{label:"Norsk",caption:e.formatMessage({defaultMessage:"Norwegian",id:"languagePicker.captions.norwegianNo"})},"nl-NL":{label:"Nederlands",caption:e.formatMessage({defaultMessage:"Dutch",id:"languagePicker.captions.dutchNl"})},"sv-SE":{label:"Svenska",caption:e.formatMessage({defaultMessage:"Swedish",id:"languagePicker.captions.swedishSe"})},pseudo:{label:"🤡Pseudolocale🤡",caption:e.formatMessage({defaultMessage:"Pseudolocale",id:"languagePicker.captions.pseudolocale"})}}}function r(e){return{en:{name:e.formatMessage({defaultMessage:"English",id:"languagePicker.name.english"}),abbreviation:e.formatMessage({defaultMessage:"EN",id:"languagePicker.abbreviation.english"})},de:{name:e.formatMessage({defaultMessage:"German",id:"languagePicker.name.german"}),abbreviation:e.formatMessage({defaultMessage:"DE",id:"languagePicker.abbreviation.german"})},ko:{name:e.formatMessage({defaultMessage:"Korean",id:"languagePicker.name.korean"}),abbreviation:e.formatMessage({defaultMessage:"KO",id:"languagePicker.abbreviation.korean"})},zh:{name:e.formatMessage({defaultMessage:"Chinese",id:"languagePicker.name.chinese"}),abbreviation:e.formatMessage({defaultMessage:"ZH",id:"languagePicker.abbreviation.chinese"})},ja:{name:e.formatMessage({defaultMessage:"Japanese",id:"languagePicker.name.japanese"}),abbreviation:e.formatMessage({defaultMessage:"JA",id:"languagePicker.abbreviation.japanese"})},es:{name:e.formatMessage({defaultMessage:"Spanish",id:"languagePicker.name.spanish"}),abbreviation:e.formatMessage({defaultMessage:"ES",id:"languagePicker.abbreviation.spanish"})},pt:{name:e.formatMessage({defaultMessage:"Portuguese",id:"languagePicker.name.portuguese"}),abbreviation:e.formatMessage({defaultMessage:"PT",id:"languagePicker.abbreviation.portuguese"})},fr:{name:e.formatMessage({defaultMessage:"French",id:"languagePicker.name.french"}),abbreviation:e.formatMessage({defaultMessage:"FR",id:"languagePicker.abbreviation.french"})},da:{name:e.formatMessage({defaultMessage:"Danish",id:"languagePicker.name.danish"}),abbreviation:e.formatMessage({defaultMessage:"DA",id:"languagePicker.abbreviation.danish"})},fi:{name:e.formatMessage({defaultMessage:"Finnish",id:"languagePicker.name.finnish"}),abbreviation:e.formatMessage({defaultMessage:"FI",id:"languagePicker.abbreviation.finnish"})},nb:{name:e.formatMessage({defaultMessage:"Norwegian",id:"languagePicker.name.norwegian"}),abbreviation:e.formatMessage({defaultMessage:"NB",id:"languagePicker.abbreviation.norwegian"})},nl:{name:e.formatMessage({defaultMessage:"Dutch",id:"languagePicker.name.dutch"}),abbreviation:e.formatMessage({defaultMessage:"NL",id:"languagePicker.abbreviation.dutch"})},sv:{name:e.formatMessage({defaultMessage:"Swedish",id:"languagePicker.name.swedish"}),abbreviation:e.formatMessage({defaultMessage:"SV",id:"languagePicker.abbreviation.swedish"})}}}a.d(t,{i:()=>r,t:()=>i})},924172:(e,t,a)=>{"use strict";a.d(t,{AG:()=>x,Gp:()=>v,Hs:()=>h,L8:()=>m,OB:()=>_,St:()=>u,d8:()=>l,n$:()=>w});var i=()=>a(696459),r=()=>a(575861),n=()=>a(431595),o=()=>a(567237);const s=15;function l(e){if(!o().ZK.includes(e))throw new(n().XV)("Rating must be an integer between 1 and 5.",{type:"marketplace_listing_review_invalid_rating"});return!0}const d=3,c=100;function u(e){if(e.length<d)throw new(n().XV)("Title too short",{type:"marketplace_listing_review_title_too_short"});if(e.length>c)throw new(n().XV)("Title too long",{type:"marketplace_listing_review_title_too_long"})}const p=50,g=1500;function m(e){if(e.length<p)throw new(n().XV)("Description too short",{type:"marketplace_listing_review_description_too_short"});if(e.length>g)throw new(n().XV)("Title too long",{type:"marketplace_listing_review_description_too_long"})}const f=40;function h(e){if(0===e.length)throw new(n().XV)("Name is required",{type:"marketplace_listing_review_name_too_short"});if(e.length>f)throw new(n().XV)("Name too long",{type:"marketplace_listing_review_name_too_long"})}const b=5,y=1500;function v(e){if(e.length<b)throw new(n().XV)("Creator response too short",{type:"marketplace_listing_review_creator_response_too_short"});if(e.length>y)throw new(n().XV)("Creator response too long",{type:"marketplace_listing_review_creator_response_too_long"})}function x(e){return void 0!==e.getTitle()&&void 0!==e.getSerializedContent()}function _(e){return(0,r().Je)(e)<s}function w(e){switch(e){case"mostRecent":return{columnName:"updated_time",direction:"descending"};case"highestRating":return{columnName:"rating",direction:"descending"};case"lowestRating":return{columnName:"rating",direction:"ascending"};default:(0,i().t1)(e)}}},36588:(e,t,a)=>{"use strict";a.d(t,{$1:()=>B});var i=()=>a(124199),r=()=>a(577219),n=()=>a(976436);const o=i().object({required:{r:i().lte(i().gte(i().integer(),0),255),g:i().lte(i().gte(i().integer(),0),255),b:i().lte(i().gte(i().integer(),0),255)},optional:{}}),s=i().object({required:{value:i().union([i().string(),i().nonEmpty(i().array(i().string()))])},optional:{section:i().literals(n().kE.avatar,n().kE.identifier,n().kE.primary,n().kE.secondary,n().kE.body)}}),l=r().kB.object({required:{url:r().kB.string()},optional:{}}),d=r().kB.object({required:{content:r().kB.string()},optional:{link:r().kB.nullable(l)}}),c=r().kB.union([r().kB.object({required:{text:d},optional:{type:r().kB.literal("text")}})]),u=r().kB.object({required:{value:r().kB.array(c)},optional:{section:r().kB.literals(n().kE.body,n().kE.title)}}),p=i().object({required:{value:i().union([i().string(),i().nonEmpty(i().array(i().string()))])},optional:{language:i().string(),section:i().literals(n().kE.body)}}),g=i().object({required:{value:i().union([i().boolean(),i().nonEmpty(i().array(i().boolean()))])},optional:{}}),m=i().object({required:{value:i().union([i().number(),i().nonEmpty(i().array(i().number()))])},optional:{}}),f=i().object({required:{value:i().union([i().string(),i().nonEmpty(i().array(i().string()))])},optional:{color:o,section:i().literals(n().kE.primary)}}),h=i().object({required:{value:i().union([i().string(),i().tuple([i().string()])])},optional:{color:o,section:i().literal(n().kE.title)}}),b=i().object({required:{value:i().union([o,i().nonEmpty(i().array(o))])},optional:{section:i().literals(n().kE.entity,n().kE.background)}}),y=i().object({required:{value:i().union([i().dateString(),i().nonEmpty(i().array(i().dateString()))])},optional:{section:i().literals(n().kE.primary,n().kE.secondary)}}),v=i().object({required:{value:i().union([i().dateString(),i().nonEmpty(i().array(i().dateString()))])},optional:{section:i().literals(n().kE.primary,n().kE.secondary)}}),x=i().object({required:{value:i().tuple([i().dateString(),i().dateString()])},optional:{section:i().literals(n().kE.primary,n().kE.secondary)}}),_=i().object({required:{value:i().union([i().dateString(),i().tuple([i().dateString()])])},optional:{section:i().literals(n().kE.primary,n().kE.secondary)}}),w=i().object({required:{value:i().union([i().dateString(),i().tuple([i().dateString()])])},optional:{section:i().literals(n().kE.primary,n().kE.secondary)}}),C=i().union([i().object({required:{plain_text:s},optional:{type:i().literal("plain_text")}}),i().object({required:{rich_text:u},optional:{type:i().literal("rich_text")}}),i().object({required:{boolean:g},optional:{type:i().literal("boolean")}}),i().object({required:{number:m},optional:{type:i().literal("number")}}),i().object({required:{enum:f},optional:{type:i().literal("enum")}}),i().object({required:{title:h},optional:{type:i().literal("title")}}),i().object({required:{color:b},optional:{type:i().literal("color")}}),i().object({required:{date:y},optional:{type:i().literal("date")}}),i().object({required:{datetime:v},optional:{type:i().literal("datetime")}}),i().object({required:{datetimerange:x},optional:{type:i().literal("datetimerange")}}),i().object({required:{created_datetime:_},optional:{type:i().literal("created_datetime")}}),i().object({required:{last_edited_datetime:w},optional:{type:i().literal("last_edited_datetime")}}),i().object({required:{code:p},optional:{type:i().literal("code")}})]),S=i().object({required:{},optional:{section:i().literal(n().kE.embed)}}),j=i().object({required:{},optional:{section:i().literal(n().kE.embed)}}),M=i().object({required:{},optional:{section:i().literal(n().kE.embed)}}),k=i().object({required:{},optional:{section:i().literal("embed")}}),I=i().object({required:{},optional:{format:i().nullable(i().literals("icon")),section:i().literals(n().kE.avatar,n().kE.entity,n().kE.embed)}}),T=i().intersection([i().object({required:{src_url:i().union([i().string(),i().nonEmpty(i().array(i().string()))])},optional:{default_height:i().number(),default_width:i().number()}}),i().union([i().object({required:{html:S},optional:{type:i().literal("html")}}),i().object({required:{pdf:j},optional:{type:i().literal("pdf")}}),i().object({required:{audio:M},optional:{type:i().literal("audio")}}),i().object({required:{video:k},optional:{type:i().literal("video")}}),i().object({required:{image:I},optional:{type:i().literal("image")}})])]),P=i().union([i().string(),i().nonEmpty(i().array(i().string()))]),D=i().object({required:{uri:P},optional:{type:i().literal("mention"),mention:i().object({required:{},optional:{section:i().literal(n().kE.primary)}}),extension:i().isNull()}}),L=i().object({required:{uri:P},optional:{type:i().literal("extension"),extension:i().nonEmpty(i().array(i().object({required:{id:i().string()},optional:{section:i().literals(n().kE.avatar,n().kE.embed,n().kE.primary,n().kE.secondary)}}))),mention:i().isNull()}}),E=i().union([D,L]),R=i().object({required:{uri:P},optional:{}}),U=i().intersection([i().object({required:{id:i().string(),name:i().string()},optional:{}}),i().union([i().object({required:{inline:C},optional:{type:i().literal("inline")}}),i().object({required:{embed:T},optional:{type:i().literal("embed")}}),i().object({required:{relation:E},optional:{type:i().literal("relation")}}),i().object({required:{people:R},optional:{type:i().literal("people")}})])]),B=i().array(U)},92025:(e,t,a)=>{"use strict";function i(e){let[t,a]=e;return Math.floor(function(e){let[t,a]=e;return Math.random()*(a-t)+t}([t,a]))}function r(e){if(!e)return Math.random;let t=function(e){let t=0;for(let a=0;a<e.length;a++){t=(t<<5)-t+e.charCodeAt(a),t|=0}return t}(e);return()=>{t|=0,t=t+1831565813|0;let e=Math.imul(t^t>>>15,1|t);return e=e+Math.imul(e^e>>>7,61|e)^e,((e^e>>>14)>>>0)/4294967296}}a.d(t,{Iy:()=>i,yH:()=>r})},259408:(e,t,a)=>{"use strict";a.d(t,{$W:()=>p,KQ:()=>u,_e:()=>m,Ay:()=>b,fS:()=>c,t:()=>n(),V5:()=>f,Kz:()=>h});a(267602),a(653476);var i=()=>a(513670),r=()=>a(696459),n=()=>a(124199),o=()=>a(629719);const s=["student","personal","plus","business","enterprise"];function l(e){return(0,r().DE)(s,e)}var d=()=>a(122792);const c=["plus","business","enterprise","ai","sites_custom_hostnames"];function u(e,t,a,i){return m(p(e,t,a,i))}function p(e,t,a,i){const{name:n,scope:o,actor:s}=i,l={...i,billingData:o.billingData},d=o.premiumFeatureOverrides,c=n in d?function(e,t,a){const i={type:"contact_account_manager"},n=e[t.name].type;if("check"===n){const e={type:"none"};return!0===a?{type:"available",limit:e}:{type:"upsell",upsell:i,limit:e}}if("per_use"===n){const e=t.amount,r={type:"per_use",amount:a};return"unlimited"===a||a>e?{type:"available",limit:r}:{type:"upsell",upsell:i,limit:r}}if("cumulative"===n){const e=t.amount,r=t.data.current,n={type:"cumulative",current:r,total:a};return"unlimited"===a||a>=r+e?{type:"available",limit:n}:{type:"upsell",upsell:i,limit:n}}(0,r().t1)(n)}(t,i,d[n]):a[n](l);let u;if("available"===c.type){const e=c.upsell?g(o.billingData,c.upsell,i.supportedProducts):void 0;u={...c,upsell:e}}else if("blocked"===c.type){const e=g(o.billingData,c.upsell,i.supportedProducts);u={...c,upsell:e}}else{const e=g(o.billingData,c.upsell,i.supportedProducts),t=function(e){const{actor:t,supportedProducts:a,upsell:i}=e;if(!t.isSpaceAdmin)return"blocked";const n=i.type;switch(n){case"product":return a.includes(i.product)?"upsell":"blocked";case"contact_sales":case"contact_account_manager":return"upsell";default:(0,r().t1)(n)}}({actor:s,supportedProducts:i.supportedProducts,upsell:e});u={...c,type:t,upsell:e}}return Math.random()<.001&&e({level:"info",from:"premiumFeatureFramework",type:"getPremiumFeatureAvailability",data:{featureName:n,featureScope:o,featureActor:s,featureAvailability:c}}),u}function g(e,t,a){if((0,o().Rd)(e.subscription))return{type:"contact_account_manager"};if("product"!==(null==t?void 0:t.type)||a.includes(t.product)||!l(t.product))return t;const r=t.product,n=a.filter((e=>l(e))).filter((e=>"student"!==e)).filter((e=>d().rC[e]>=d().rC[r])),s=(0,i().F)(n,(e=>d().rC[e]));return s?{...t,product:s}:t}function m(e){return"available"===(null==e?void 0:e.type)}function f(e,t){const{available:a}=t;let i,n;return"unavailable"in t?(i=t.unavailable,n=t.unavailable):(i=t.blocked,n=t.upsell),"available"===e.type?a():"upsell"===e.type?n(e):"blocked"===e.type?i(e):(0,r().t1)(e)}function h(e,t){if(void 0!==e)return f(e,{available:()=>{},blocked:t,upsell:()=>{}})}function b(e){return n().object({required:e,optional:{}})}},275347:()=>{},831777:()=>{},634017:()=>{},159905:()=>{},464604:()=>{}}]);