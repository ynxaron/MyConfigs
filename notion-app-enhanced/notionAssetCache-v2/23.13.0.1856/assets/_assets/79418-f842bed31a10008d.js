"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[79418],{900596:(e,t,o)=>{o.d(t,{Z:()=>r});o(667294);var i=()=>o(788860),n=o(785893);const r=function(e){let{collectionViewName:t,collectionViewType:r}=e;return t?(0,n.jsx)(o(827618).Z,{children:t}):"page"===r?(0,n.jsx)(i()._H,{id:"database.collectionView.untitledName.untitled",defaultMessage:"Untitled"}):(0,n.jsx)(i()._H,{...o(887430).b1[r]})}},468754:(e,t,o)=>{o.d(t,{Z:()=>w});o(267602),o(653476),o(241792);var i=o(667294),n=()=>o(219727),r=()=>o(142735),a=()=>o(846550),l=()=>o(993407),s=()=>o(788860),d=()=>o(239730),c=()=>o(711608),u=()=>o(986286),p=()=>o(945634),m=()=>o(247724),g=()=>o(906591),y=()=>o(419273),f=()=>o(876822),b=o(785893);const v=i.memo((e=>{const{disabled:t,childStores:a,areChildrenLoading:s,itemDepth:c,type:p}=e,y=(0,n().O7)(),v=(0,r().VK)((()=>f().default.state.mainEditorCurrentBlockStore),[]),T=(0,r().VK)((()=>(0,o(731322).wF)(f().default.state.currentUserSettingsStore,"jira-sync-onboarding")),[]),w=y.device,C=(0,i.useRef)(),j=(0,i.useRef)(),k=(0,r().Kw)(o(308939).ZP),V=(0,r().VK)((()=>{const e=(0,o(95718).wY)();if(k.showOnboardingTour){let e=null,r=null;for(const i of a){if(i.isCollectionView()){const n=i.getCollectionStore();if((null==v?void 0:v.id)===i.id){var t;const a=null===(t=i.getCollectionStore())||void 0===t?void 0:t.getFormat();if("notion://projects_collection"===(null==a?void 0:a.app_config_uri)||"notion://tasks_collection"===(null==a?void 0:a.app_config_uri)){const t=(0,o(148976).$s)(n);e=t.projectCollectionPointer,r=t.taskCollectionPointer;break}}}}for(const t of a){if(t.isCollectionView()){var i,n;const o=t.getCollectionStore();if(o&&(null==o?void 0:o.id)===(null===(i=e)||void 0===i?void 0:i.id)){C.current=t.id;continue}if(o&&o.id===(null===(n=r)||void 0===n?void 0:n.id)){j.current=t.id;continue}}}}return(0,o(696459).$K)(e)?a.filter((t=>!e.includes(t.id))):a}),[a,null==v?void 0:v.id,k.showOnboardingTour]).map(((t,o)=>{const n=i.createRef();return k.showOnboardingTour&&C.current===t.id&&"all-projects-tooltip"===T?(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{ref:n,style:{boxShadow:d().v.outlineBlueInputBoxShadow.light,borderRadius:6},children:(0,i.createElement)(I,{...e,key:t.id,store:t,index:o})}),(0,b.jsx)(u().YW,{origin:n})]},t.id):k.showOnboardingTour&&j.current===t.id&&"all-issues-tooltip"===T?(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{ref:n,style:{boxShadow:d().v.outlineBlueInputBoxShadow.light,borderRadius:6},children:(0,i.createElement)(I,{...e,key:t.id,store:t,index:o})}),(0,b.jsx)(u().lM,{origin:n})]},t.id):(0,i.createElement)(I,{...e,key:t.id,store:t,index:o})})),D=(0,r().VK)((()=>f().default.state.currentSpaceViewStore),[]),_=(0,r().VK)((()=>void 0!==D&&(0,g().Wu)({spaceViewStore:D})),[D]),P=(0,r().VK)((()=>(0,o(91502).ku)()&&!w.isMobile),[w]),K=0===c,M=0===(null==V?void 0:V.length),Z=(M||e.isHeaderless||w.isMobile)&&K&&("private"===p||"workspace"===p)&&!t,B=M&&!Z&&!K&&!P,O={offline:m().blN,bookmarks:m().fe0,workspace:m().BEs,shared:m().JkF,private:m().q1J,team:m().l24,[l().PT]:void 0,[l().cz]:void 0,[l().mu]:void 0,[l().kg]:void 0,[l().g$]:void 0}[e.type];return(0,b.jsxs)(o(690122).Z,{id:e.id,"aria-labelledby":e["aria-labelledby"],role:K?"tree":"group",style:e.style,innerStyle:{display:"flex",flexDirection:"column",gap:1},className:O,loaded:!s,showSpinnerTimeout:3e3,spinnerSize:"1em",children:[(0,b.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:1},children:V}),M&&K&&!("private"===p&&_)&&(0,b.jsx)(x,{type:e.type,parentStore:e.parentStore}),Z&&(0,b.jsx)(h,{type:e.type,from:"main_sidebar"}),B&&(0,b.jsx)(S,{itemStyle:e.itemStyle})]})}));function S(e){const{isMobile:t}=(0,n().Fy)(),o=(0,a().yK)((e=>({placeholder:{color:e.lightTextColor,paddingLeft:16,...t&&{display:"flex",alignItems:"center",height:32}}})),[t]);return(0,b.jsx)(p().Z,{role:"treeitem",style:e.itemStyle,children:(0,b.jsx)("div",{style:o.placeholder,children:(0,b.jsx)(s()._H,{defaultMessage:"No pages inside",id:"outliner.NoPagesInside.placeholder"})})})}function h(e){const{type:t,from:r}=e,l=(0,n().O7)(),d=l.device.isMobile,u=(0,a().yK)((e=>({sidebarItem:{color:e.sidebarSecondaryColor},hovered:{background:e.sidebarItemSelectedBackground}})),[]),m=(0,o(589525).hr)(),g=(0,i.useCallback)((async()=>{if("team"===t||!f().default.state.currentSpaceStore||!f().default.state.currentSpaceViewStore)return;await c().kC({environment:l,spaceStore:f().default.state.currentSpaceStore,spaceViewStore:f().default.state.currentSpaceViewStore,type:t,outlinerItemFrom:r,prepend:!1,shouldPersistToggleState:!0})&&d&&o(793935).close()}),[t,r,l,d]);return(0,b.jsx)(o(154186).Z,{style:m.baseSidebarItem,hoveredStyle:u.hovered,mobileFeedback:d,onClick:g,children:(0,b.jsx)(p().Z,{style:u.sidebarItem,left:(0,b.jsx)(T,{}),disableMobileBorder:!0,children:(0,b.jsx)(s()._H,{defaultMessage:"Add a page",id:"sidebar.addAWorkspaceOrPrivatePage.tooltip"})})})}v.displayName="Outliner";const I=i.memo((function(e){const{store:t,index:i}=e;return(0,b.jsx)(o(187709).ZP,{type:e.type,from:e.from,variant:"primary",store:t,style:e.itemStyle,toggleStyle:e.itemToggleStyle,itemIndex:i,itemDepth:e.itemDepth,itemOpenByDefault:e.itemOpenByDefault,parentStore:t.getRecordStoreUIParent(),onNavigate:e.onNavigate,disabled:e.disabled},t.id)})),x=i.memo((function(e){const t=(0,n().O7)(),{type:i,parentStore:r}=e,a=`OutlinerItem${i??""}${(null==r?void 0:r.id)??""}`;return(0,b.jsx)(o(796408).GR,{dropTargetKey:a,canDropBelow:!0,onSelectableDrop:async e=>{await c().NP({dropArgs:e,environment:t,type:i,isDroppingOnFullSection:!1,parentStore:r})},shouldShowDropZone:!0,canAcceptDrop:e=>{const{currentSpaceStore:o}=f().default.state;return!!o&&(0,g().Pl)({environment:t,draggingStores:e.draggingStores,parentStore:r,currentSpaceStore:o})}})}));function T(){const e=(0,a().yK)((e=>({icon:{fill:e.sidebarSecondaryColor,width:16,height:16},iconContainer:{display:"flex",alignItems:"center",justifyContent:"center"}})),[]);return(0,b.jsx)("div",{style:e.iconContainer,children:(0,y().f)(e.icon)})}const w=v},187709:(e,t,o)=>{o.d(t,{U2:()=>te,gZ:()=>X,aZ:()=>ee,ZP:()=>oe});var i=o(667294),n=()=>o(219727),r=()=>o(142735),a=()=>o(846550),l=()=>o(156642),s=()=>o(696459),d=()=>o(711608),c=()=>o(906591),u=()=>o(856546),p=()=>o(826955),m=()=>o(589525),g=(o(821057),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(241792),()=>o(396136)),y=()=>o(788860),f=()=>o(707513),b=()=>o(381140),v=()=>o(110232),S=()=>o(729775),h=()=>o(384241),I=()=>o(654133),x=()=>o(67961),T=()=>o(945634),w=()=>o(429725),C=()=>o(459805),j=()=>o(239482),k=()=>o(91502),V=()=>o(176691),D=()=>o(105649),_=()=>o(998901),P=()=>o(876822),K=()=>o(636340),M=()=>o(269299),Z=()=>o(943620),B=()=>o(772529),O=o(785893);function A(e){const{targetStore:t,canEditItem:o}=e,i=(0,y().YB)(),l=(0,n().O7)(),{isMobile:s}=l.device,d=(0,r().VK)((()=>t.getIcon()),[t]),c=(0,r().VK)((()=>!s&&o&&!t.isNonEditableState()&&!(0,B().Kj)(t.id)),[s,o,t]),u=(0,r().VK)((()=>{var e;return null===(e=t.getIconStore())||void 0===e?void 0:e.table}),[t]),p=(0,a().yK)((e=>({pageIcon:{fill:e.sidebarSecondaryColor}})),[]),m=e=>{const o=t.getIconStore();o&&M().createAndCommit({userAction:"OutlinerItem.handleRecordIconChange",environment:l,canUndo:!0,perform:t=>{K().sO({store:o,value:e,transaction:t})}})},g=(0,r().VK)((()=>{var e;return{recordTable:u,source:"sidebar",block_type:t.getType(),collection_id:"collection"===u?null===(e=t.getIconStore())||void 0===e?void 0:e.id:void 0}}),[u,t]);return(0,O.jsx)(I().Z,{renderTooltip:()=>(0,O.jsx)(y()._H,{defaultMessage:"Change icon",id:"sidebarItem.changeIconButton.tooltip"}),placement:_().Placement.Bottom,render:e=>c?(0,O.jsx)(Z().Z,{bucket:"secure",disabled:!0,icon:d,store:t,title:void 0,isEmptyPage:t.isEmptyPage(),size:s?24:20,onChange:m,pageIconStyle:p.pageIcon,...e,largeIcon:!0,iconLoggingData:g,label:i.formatMessage({defaultMessage:"Change page icon",id:"sidebarItem.changeIconButton.buttonLabel"}),disableAnimation:!0}):(0,O.jsx)(Z().Z,{disabled:!0,icon:d,title:void 0,isEmptyPage:t.isEmptyPage(),size:s?24:20,pageIconStyle:p.pageIcon,largeIcon:!0,label:i.formatMessage({defaultMessage:"Page icon",id:"sidebarItem.changeIconButton.disabledLabel"}),disableAnimation:!0,iconLoggingData:g})})}var L=()=>o(167705);function N(e){const{store:t,from:o,type:i,itemIndex:r,itemDepth:l,isOpen:s,onToggle:d}=e,u=(0,n().O7)(),p=(0,a().yK)((e=>({toggle:{color:e.lightIconColor}})),[]);return(0,O.jsx)(L().Z,{isSidebar:!0,fill:!0,icon:"chevron",open:s,color:p.toggle.color,onClick:()=>{const e=0===l,n=j().VP(t);b().t8(u,{teamStore:n,type:e?"top_level":"nested",is_toggled:!s,outliner_type:i,outliner_position:r,outliner_depth:l,outliner_location:"main_sidebar"===o?"sidebar":"pane"}),d(),c().Ps({store:t,toOpen:!s,environment:u,isTopLevelItem:e})},"aria-describedby":e["aria-describedby"],"aria-controls":e["aria-controls"]})}var F=()=>o(257448);const E=function(e){const{store:t,from:l,variant:s,style:d,targetStore:u,itemDepth:p,type:g,nestedOutlinerAriaId:f,titleAriaId:v,isOpen:h,itemIndex:x,onFocus:k,onBlur:V,onMouseMove:K,onMouseLeave:M,onNavigate:Z}=e,B=(0,n().O7)(),A=B.device.isMobile,L=(0,r().VK)((()=>function(e){const{targetStore:t,type:o,from:i}=e;if(!t)return;const n=(0,c().N)({type:o,from:i});if(t.isNavigableBlock())return(0,w().ZP)({store:t,fullyQualified:!1,pageVisitSource:n});{const e=j().Dg(t);if(e)return(0,w().ZP)({store:e,scrollToBlockId:t.id,fullyQualified:!1,pageVisitSource:n})}}({targetStore:u,type:g,from:l})),[l,u,g]),{isCopyIndicator:N,shouldShowAsLoadingSpinner:F}=(0,m().Qu)(t),E=(0,r().VK)((()=>{const{mainEditorCurrentBlockStore:e}=P().default.state;return e&&t.id===e.id}),[t]),H=(0,r().VK)((()=>{var e;return new Set(null===(e=o(63317).Z.get(t.getSpaceId()))||void 0===e?void 0:e.map((e=>e.pageId)))}),[t]),W=(0,r().VK)((()=>!o(804217).default.state.online&&B.device.isElectron&&o(749826).default.checkGate({gateName:"download_for_offline"})&&!o(991007)._(t.id)&&!H.has(t.id)),[B.device.isElectron,H,t.id]),G=(0,r().VK)((()=>{const e=t.getFormat();if("workflow_template_placeholder"===e.collection_view_sub_type&&e.placeholder_workflow_template_id&&t.isCollectionView())return{collectionTemplateId:e.placeholder_workflow_template_id,collectionViewBlockStore:t}}),[t]),U=(0,r().VK)((()=>(0,C().G$)({isMobile:A})),[A]),z=(0,m().hr)(),Y=(0,a().yK)((e=>({sidebarItem:{...!A&&{paddingLeft:5},...E&&z.currentSelectedSidebarItem,...!A&&(0,C().Z3)(),...d,..."secondary"===s&&{padding:8,height:"unset"},...W&&$(!1)},children:{display:"flex",alignItems:"center"},loadingSpinner:{marginLeft:6},moveOrDuplicateProgress:{flex:1,marginLeft:A?10:6,marginRight:A?12:void 0},link:{width:"100%"},sidebarItemHovered:{background:e.sidebarItemSelectedBackground},tooltipContainer:{maxWidth:280,width:"max-content"},tooltipMessage:{color:e.text.secondary}})),[A,E,z.currentSelectedSidebarItem,d,s,W]),Q=(0,i.useCallback)((e=>{if(W)return;Z&&Z(t);if(!(e.metaKey||e.ctrlKey)){("secondary_sidebar"===l?"peek"===D().default.state.mode&&D().default.isVisible():D().default.isVisible())&&o(815532).TN({environment:B,skipAnimation:!0})}const i=j().VP(t);b().Yg(B,{teamStore:i,type:0===p?"top_level":"nested",outliner_type:g,outliner_position:x,outliner_depth:p})}),[l,Z,g,x,t,B,p,W]),J={role:"treeitem","aria-current":E?"page":void 0,"aria-expanded":!!h,"aria-owns":f,"aria-labelledby":v};if(N)return F?(0,O.jsxs)(T().Z,{style:Y.sidebarItem,childrenStyle:Y.children,onFocus:k,onBlur:V,onMouseMove:K,onMouseLeave:M,children:[(0,O.jsx)(o(312578).Z,{style:Y.loadingSpinner}),(0,O.jsx)(o(417622).Z,{targetRecordId:t.id,style:Y.moveOrDuplicateProgress})]}):null;if(G)return(0,O.jsx)(o(154186).Z,{onClick:async()=>{const{collectionTemplateId:e,collectionViewBlockStore:i}=G,{getCollectionTemplateFromId:n}=await o(293307).Vh.load(),r=n(e);if(!r)throw new Error("Collection template not found");Z&&Z(t);const{onNavigateToPlaceholderWorkflowTemplateBlock:a}=await o(114104).ZJ.load();a({environment:B,collectionTemplate:r,collectionViewBlockStore:i})},children:(0,O.jsx)(R,{...e,onFocus:k,onBlur:V,sidebarItemStyle:Y.sidebarItem,sidebarItemChildrenStyle:Y.children,titleAriaId:v,nestedOutlinerAriaId:f,isWorkflowTemplatePlaceholder:!0,...J})});const q=(0,O.jsxs)("div",{style:Y.tooltipContainer,children:[(0,O.jsx)(y()._H,{id:"blockSidebarItem.offlineTooltip.title",defaultMessage:"Unavailable offline"}),(0,O.jsx)("div",{style:Y.tooltipMessage,children:(0,O.jsx)(y()._H,{id:"blockSidebarItem.offlineTooltip.message",defaultMessage:"Return online to view or make the page available offline."})})]});return L?(0,O.jsx)(I().Z,{disableTooltip:!W,placement:_().Placement.Right,textWrap:!0,renderTooltip:()=>q,render:t=>(0,O.jsx)(S().Z,{disabled:W,onFocus:k,onBlur:V,style:Y.link,href:W?void 0:L,onClick:Q,innerStyle:U,hoveredStyle:Y.sidebarItemHovered,...J,...t,children:(0,O.jsx)(R,{...e,sidebarItemStyle:Y.sidebarItem,sidebarItemChildrenStyle:Y.children,titleAriaId:v,nestedOutlinerAriaId:f,disableRightButtons:W})})}):(0,O.jsx)(R,{...e,onFocus:k,onBlur:V,sidebarItemStyle:Y.sidebarItem,sidebarItemChildrenStyle:Y.children,titleAriaId:v,nestedOutlinerAriaId:f,...J})};function R(e){const{store:t,variant:o,from:i,parentStore:s,targetStore:d,itemDepth:u,type:m,onFocus:y,onBlur:b,onMouseMove:S,onMouseLeave:I,onToggle:w,titleAriaId:j,nestedOutlinerAriaId:D,isOpen:_,isHovered:P,isFocused:K}=e,M=(0,r().VK)((()=>function(e){const{store:t,parentStore:o,isTopLevelItem:i,type:n}=e;if(t.isDefined()&&(0,v().h7)(t))return!1;if(t.isCollectionView()&&!(0,k().bq)())return!t.getCollectionViewSourceCollectionStore();if("block"===(null==o?void 0:o.table)){if(p().G.createChildStore(o,{table:g().iU,id:o.id,spaceId:t.getSpaceId()}).isType("collection_view_page"))return!1}if(t.isDefined()&&t.getType()===l().Ti.alias)return!0;if(i&&"team"!==n)return!1;if(!o)return!1;if(t.isDefined())return t.getParentId()!==o.id;return!1}({store:t,parentStore:s,isTopLevelItem:0===u,type:m})),[t,s,u,m]),Z=(0,n().Fy)().isMobile,B=(0,r().VK)((()=>{const e=t.getLastEditedTime();return(0,V().IS)(e,{useLowercase:!1,useCompactFormat:!0})}),[t]),L=P||K,E=(0,r().VK)((()=>{if((0,k().ku)()){const e=Boolean(null==d?void 0:d.isCollectionView()),o=c().Yz(t).length>0;return e||o}return!0}),[t,d]),R=L&&E,W=(0,a().yK)((t=>({iconContainer:{display:"grid"},toggle:{gridColumn:1,gridRow:1,zIndex:1,opacity:R?1:0,order:R?1:0,transition:`opacity ${C().PP}`},itemIcon:{gridColumn:1,gridRow:1,opacity:R?0:1,transition:`opacity ${C().PP}`,order:R?0:1,..."secondary"===o&&{marginTop:-6}},rightIcons:{...!Z&&{opacity:L?1:0,transition:`opacity ${C().PP}`}},childrenStyle:{...e.sidebarItemChildrenStyle,..."secondary"===o&&{display:"flex",flexDirection:"column",alignItems:"flex-start"}},title:{fontWeight:f().Ue.medium,..."secondary"===o&&{width:"100%"}},subtitle:{marginTop:2}})),[Z,e.sidebarItemChildrenStyle,L,o,R]);return(0,O.jsxs)(T().Z,{role:e.role,"aria-current":e["aria-current"],"aria-expanded":e["aria-expanded"],"aria-owns":e["aria-owns"],"aria-labelledby":e["aria-labelledby"],style:e.sidebarItemStyle,childrenStyle:W.childrenStyle,left:Z?(0,O.jsx)(N,{store:t,from:i,type:m,itemIndex:e.itemIndex,itemDepth:u,"aria-controls":D,"aria-describedby":j,onToggle:w,isOpen:_}):void 0,icon:Z?d&&(0,O.jsx)(A,{targetStore:d,canEditItem:e.canEditItem}):(0,O.jsxs)("div",{style:W.iconContainer,children:[E&&(0,O.jsx)("div",{style:W.toggle,children:(0,O.jsx)(N,{store:t,from:i,type:m,itemIndex:e.itemIndex,itemDepth:u,"aria-controls":D,"aria-describedby":j,onToggle:w,isOpen:_})}),(0,O.jsx)("div",{style:W.itemIcon,children:d&&(0,O.jsxs)(O.Fragment,{children:[e.isWorkflowTemplatePlaceholder&&(0,O.jsx)(H,{}),(0,O.jsx)(A,{targetStore:d,canEditItem:e.canEditItem})]})})]}),right:e.disableRightButtons?void 0:(0,O.jsx)("div",{style:W.rightIcons,children:(0,O.jsx)(F().ZP,{store:t,from:i,type:m,itemIndex:e.itemIndex,itemDepth:u,canEditItem:e.canEditItem,onToggle:w,isHovered:P,isFocused:K})}),onFocus:y,onBlur:b,onMouseMove:S,onMouseLeave:I,isAlias:M,children:[(0,O.jsx)(h().Z,{id:j,store:t,style:W.title}),"secondary"===o&&(0,O.jsx)(x().Z,{isSmall:!0,isSecondaryColor:!0,style:W.subtitle,children:B})]})}function H(){const e=(0,a().yK)((e=>({circle:{position:"absolute",background:e.blueColor,borderRadius:"50%",border:`1px solid ${e.surface.wash}`,width:8,height:8,left:14,zIndex:1}})),[]);return(0,O.jsx)("div",{style:e.circle})}var W=function(e){return e[e.opacity=0]="opacity",e}(W||{});function $(e){if((arguments.length>1&&void 0!==arguments[1]?arguments[1]:W.opacity)===W.opacity)return{opacity:"0.2",cursor:"default"}}var G=()=>o(949842),U=(o(267602),o(228244),()=>o(900596)),z=()=>o(468754);function Y(e){const{store:t,collectionViewStore:o,onNavigate:l,type:s,from:d}=e,g=(0,n().O7)(),y=(0,r().VK)((()=>t.getCollectionViewStores().some((e=>"page"===e.getType()))),[t]),f=(0,r().VK)((()=>{if(y)return!1;const{mainEditorCurrentBlockStore:e,currentCollectionViewStore:i}=P().default.state;return Boolean(e&&t.id===e.id&&i&&i.id===o.id)}),[o.id,t.id,y]),b=(0,m().hr)(),v=(0,a().yK)((t=>({initialIcon:{fontSize:12,fontWeight:500,marginLeft:5,color:t.mediumTextColor},sidebarItem:{...f&&b.currentSelectedSidebarItem,...(0,C().Z3)(),...e.style},hoveredItem:{background:t.sidebarItemSelectedBackground},linkBox:{width:"100%"}})),[f,b.currentSelectedSidebarItem,e.style]),h=(0,r().VK)((()=>(0,w().ZP)({store:t,fullyQualified:!1,collectionViewId:o.id,pageVisitSource:(0,c().N)({type:s,from:d})})),[o.id,d,t,s]),I=(0,r().VK)((()=>({ready:o.isReady(),type:o.getType(),pagePointer:o.getFormat().page_pointer,name:o.getName()})),[o]),x=(0,r().VK)((()=>{if("page"!==I.type||!I.pagePointer)return null;const e=p().G.createChildStore(t,{table:I.pagePointer.table,id:I.pagePointer.id});return{ready:(0,u().b)(e),outlinerItems:(0,c().Q2)({rootStore:e})}}),[I,t]),j=(0,r().VK)((()=>t.getContentStore()),[t]),k=(0,i.useCallback)((()=>{l&&l(t)}),[t,l]),V=(0,r().VK)((()=>(0,C().G$)({isMobile:g.device.isMobile})),[g]);if(!I.ready)return null;if("page"===I.type&&x){const{ready:t,outlinerItems:o}=x;return(0,O.jsx)(z().Z,{type:e.type,childStores:o,areChildrenLoading:!t,itemDepth:e.itemDepth+1,parentStore:j,itemStyle:v.sidebarItem,itemToggleStyle:e.itemToggleStyle,onNavigate:e.onNavigate,disabled:e.disabled,from:d})}return y?null:(0,O.jsx)(S().Z,{href:h,style:v.linkBox,hoveredStyle:v.hoveredItem,innerStyle:V,onClick:k,role:"treeitem","aria-current":f?"step":void 0,children:(0,O.jsx)(T().Z,{icon:(0,O.jsx)("div",{style:v.initialIcon,children:"•"}),style:v.sidebarItem,children:(0,O.jsx)(U().Z,{collectionViewName:I.name,collectionViewType:I.type??"table"})})})}function Q(e){const{store:t,from:o}=e,i=(0,r().VK)((()=>t.getCollectionViewStores()),[t]);return(0,O.jsx)("div",{role:"group",id:e.id,"aria-labelledby":e["aria-labelledby"],onContextMenu:e=>{e.preventDefault(),(0,G().ZP)({event:e,context:G().Af.EditorContextMenu,callback:()=>{}})},children:i.map((i=>(0,O.jsx)(Y,{store:t,from:o,collectionViewStore:i,style:e.itemStyle,onNavigate:e.onNavigate,type:e.type,itemDepth:e.itemDepth,disabled:e.disabled,childStores:e.childStores},i.id)))})}function J(e){const{disabled:t,store:o,from:i,style:l,targetStore:s,itemDepth:d,nestedOutlinerAriaId:p,titleAriaId:m,onNavigate:g,type:y,toggleStyle:f}=e,{isMobile:b}=(0,n().Fy)(),v=(0,r().VK)((()=>!(0,u().b)(o)),[o]),S=(0,r().VK)((()=>s.isCollectionView()?s:null),[s]),h=(0,r().VK)((()=>(0,c().Yz)(o)),[o]),I=(0,r().VK)((()=>s.getContentStore()),[s]),x=(0,a().yK)((()=>{const e="number"==typeof(null==l?void 0:l.paddingLeft)?l.paddingLeft:b?X:5,t=b?ee:te;return{item:{...l,paddingLeft:e+t}}}),[l,b]);return S?(0,O.jsx)(Q,{store:S,from:i,itemStyle:x.item,onNavigate:g,type:y,childStores:h,areChildrenLoading:!1,itemDepth:d+1,parentStore:I,itemToggleStyle:e.toggleStyle,disabled:t,id:p,"aria-labelledby":m}):(0,O.jsx)(z().Z,{from:i,type:y,childStores:h,areChildrenLoading:v,itemDepth:d+1,parentStore:I,itemStyle:x.item,itemToggleStyle:f,onNavigate:g,disabled:t,id:p,"aria-labelledby":m})}function q(e){return`Outliner-${e.id}`}const X=6,ee=22,te=8,oe=function(e){const{store:t,itemIndex:c,parentStore:u,type:g,itemDepth:y,disabled:f,from:b,variant:v}=e,S=(0,n().O7)(),h=(0,o(657320).l)(),I=function(e){return 0===e}(y),[x,T]=(0,i.useState)((()=>{if((0,s().$K)(e.itemOpenByDefault))return e.itemOpenByDefault;if(I){const e=o(35980).Z.get({userId:S.currentUser.id,key:q(t)});if((0,s().$K)(e))return e}return!1})),[w,C]=(0,i.useState)(!1),[j,k]=(0,i.useState)(!1),V=(0,i.useId)(),D=(0,i.useId)(),_=(0,r().VK)((()=>function(e){if(e.getType()===l().Ti.alias){const t=e.getAliasTargetStore();return t instanceof p().G?t:void 0}return e}(t)),[t]),P=(0,r().VK)((()=>m().Bb(t)),[t]),K=0===c,M=(0,r().VK)((()=>!f&&(0,o(421797).J5S)({environment:S,blocks:[t],publicEditMode:h&&h.publicEditModeStore.state})),[f,h,S,t]),Z=(0,r().VK)((()=>M&&!t.isLinkedCollectionView()),[t,M]),{isCopyIndicator:B,shouldShowAsLoadingSpinner:A}=(0,m().Qu)(t),L=(0,i.useRef)(null);(0,o(98642).c)(o(972079).Z,(()=>({store:t,parentStore:u,type:g,isTopLevelItem:I,getNode:()=>L.current})),[t,u,g,I]);const N=(0,i.useMemo)((()=>P&&u?{onInsertBelow:e=>d().LR({...e,environment:S,store:t,parentStore:u,before:!0,type:g}),onInsertAbove:e=>d().LR({...e,environment:S,store:t,parentStore:u,before:!1,type:g})}:{}),[P,S,u,t,g]),F=(0,i.useCallback)((e=>{const t=e.target;t instanceof HTMLElement&&(0,o(474788).E)(t)&&k(!0)}),[]),R=(0,i.useCallback)((()=>{k(!1)}),[]),H=(0,i.useCallback)((()=>{o(158083).Z.state.isDragging||C(!0)}),[]),W=(0,i.useCallback)((()=>{C(!1)}),[]),$=(0,i.useCallback)((e=>{T(void 0!==e?e:e=>!e)}),[]),G=(0,a().yK)((()=>({selectableStyle:{display:"flex",flexDirection:"column",gap:1,paddingBottom:x&&"secondary"===v?8:0}})),[x,v]),U=(0,i.useCallback)((e=>{const i=t.getRecordStoreUIParent();null!=i&&i.valueIs(o(262453).i)&&d().A5({...e,type:g,targetStore:t,targetParentStore:i,isTopLevelItem:I})}),[t,g,I]),z=(0,i.useCallback)((async e=>{const{droppedDirection:o,droppedStores:i,duplicate:n}=e;u&&await d().v9({environment:S,type:g,targetParentStore:u,targetStore:t,isTopLevelItem:I,droppedDirection:o,droppedStores:i,duplicate:n,isDroppingOnFullSection:!1})}),[S,t,u,g,I]);return _?B&&!A?null:(0,O.jsxs)(o(307369).Z,{analyticsName:"outliner_item",actionSectionGroupKey:"sidebar_outliner",contextMenuAndDragStores:[t],canDrag:P,canDropAbove:K,canDropBelow:P,canDropOnto:Z,canInsertBelow:P,canInsertAbove:P,canSelect:P,canTriggerContextMenu:!0,onRemove:U,onSelectableDrop:z,shouldShowDropZone:!0,showBlockMenuInput:!1,store:t,ref:L,style:G.selectableStyle,...N,children:[(0,O.jsx)(E,{variant:v,from:b,store:t,style:e.style,parentStore:u,type:g,itemIndex:e.itemIndex,itemDepth:e.itemDepth,onNavigate:e.onNavigate,targetStore:_,canEditItem:M,nestedOutlinerAriaId:V,titleAriaId:D,onFocus:F,onBlur:R,onMouseMove:H,onMouseLeave:W,onToggle:$,isHovered:w,isFocused:j,isOpen:x}),x&&(0,O.jsx)(J,{disabled:f,store:t,from:b,style:e.style,targetStore:_,itemDepth:e.itemDepth,nestedOutlinerAriaId:V,titleAriaId:D,onNavigate:e.onNavigate,type:g,toggleStyle:e.toggleStyle})]}):null}},257448:(e,t,o)=>{o.d(t,{Pr:()=>W,ZP:()=>A,nW:()=>$});o(492176),o(7961),o(241792);var i=o(667294),n=()=>o(219727),r=()=>o(142735),a=()=>o(846550),l=()=>o(139978),s=()=>o(788860),d=()=>o(242619),c=()=>o(711608),u=()=>o(879952),p=()=>o(932753),m=()=>o(154186),g=()=>o(827973),y=()=>o(448419),f=()=>o(198829),b=()=>o(255577),v=()=>o(470386),S=()=>o(943620),h=()=>o(384241),I=()=>o(388284),x=()=>o(654133),T=()=>o(527278),w=()=>o(352230),C=()=>o(164079),j=()=>o(239482),k=()=>o(641506),V=()=>o(314379),D=()=>o(419273),_=()=>o(998901),P=()=>o(876822),K=()=>o(826955),M=()=>o(431671),Z=()=>o(273212),B=o(785893);function O(e){const{store:t,from:i,type:a,canEditItem:l,itemDepth:s,isHovered:d,isFocused:c,onToggle:u}=e,{isMobile:p}=(0,n().Fy)(),m=p||d||c,g=(0,r().VK)((()=>{var e;const o=Boolean(t.getAppContainerBlockStore()),i=t.isPlaceholderWorkflowTemplateBlock(),n=null===(e=t.getCollectionStore())||void 0===e?void 0:e.isSyncedCollection();return Boolean(t.getType()&&l&&!o&&!i&&!n)}),[t,l]),y=$({showRightIcons:m});return a===o(993407).g$?null:(0,B.jsxs)("div",{style:y.iconContainer,children:[(0,B.jsx)(H,{store:t,from:i,type:e.type,itemIndex:e.itemIndex,itemDepth:s}),g&&(0,B.jsx)(L,{store:t,onToggle:u,isTopLevelItem:0===s,from:i,type:a})]})}const A=i.memo(O);function L(e){const{store:t,onToggle:o,isTopLevelItem:i,from:a,type:s}=e,d=(0,n().O7)(),{isMobile:u}=d.device,p=(0,r().VK)((()=>t.isCollectionView()),[t]),m=(0,r().VK)((()=>t.getLinkedViewCollectionBlockStores()),[t]),g=(0,r().VK)((()=>{var e;const o=null===(e=t.getCollectionViewStores().at(0))||void 0===e?void 0:e.id;if(!o)return;const i=K().Xr.createChildStore(t,{table:l().np,id:o});return null==i?void 0:i.getFormatStore().getValue()}),[t]),f=(0,r().VK)((()=>{const e=null==g?void 0:g.collection_view_source;if("typed"===(null==e?void 0:e.type))return null==e?void 0:e.databaseType}),[g]),b=T().Z.formatMessage(Z().V.addAPageInside);return p&&!g&&0===m.length?(0,B.jsx)(E,{disabled:!0}):p&&f?(0,B.jsx)(F,{store:t,databaseType:f}):m.length<=1?(0,B.jsx)(x().Z,{renderTooltip:()=>b,placement:_().Placement.Bottom,render:e=>{const n={...e,onClick:e=>{c().bS({blockStore:m[0]??t,shouldNavigateToSource:!1,environment:d,event:e,analytics:{from:a,type:s},toggleOptions:{onToggle:o,isTopLevelItem:i}})}};return(0,B.jsx)(E,{events:n})}}):(0,B.jsx)(x().Z,{renderTooltip:()=>b,placement:_().Placement.Bottom,render:e=>(0,B.jsx)(y().ZP,{popupType:u?y().Z4.SlideUp:y().Z4.Popup,renderOrigin:t=>(0,B.jsx)(E,{events:(0,C().Z)(e,t)}),render:e=>(0,B.jsx)(R,{store:t,onToggle:o,parent:e,isTopLevelItem:i,from:a,type:s})})})}const N=[];function F(e){const{store:t,databaseType:o}=e,a=(0,n().O7)(),l=(0,r().VK)((()=>P().default.state.currentSpaceViewStore),[]),s=(0,r().VK)((()=>P().default.state.currentSpaceStore),[]),d=(0,r().VK)((()=>null==l?void 0:l.getTeamsStores().map((e=>e.id))),[l]),c=(0,M().F)({environment:a,spaceStore:s,parentStore:s,joinedTeamIds:d??N,overrideDatabaseType:o,moveToTargets:N}),u=(0,r().SI)((()=>c.success?c.typedDatabases:[]),[c]),m=(0,r().Kw)(u),g=(0,i.useCallback)((e=>{const o=u.state;o&&p().rm({store:t,event:e,typedDatabases:o,environment:a})}),[a,u,t]),y=T().Z.formatMessage(Z().V.addAPageInside);return c.success&&0!==m.length?(0,B.jsx)(x().Z,{renderTooltip:()=>y,placement:_().Placement.Bottom,render:e=>{const t={...e,onClick:g};return(0,B.jsx)(E,{events:t})}}):(0,B.jsx)(E,{disabled:!0})}function E(e){const{isMobile:t}=(0,n().Fy)(),o=W();return(0,B.jsx)(m().Z,{ariaLabel:T().Z.formatMessage(Z().V.addAPageInside),mobileFeedback:t,style:o.button,disabled:e.disabled,disabledFeedback:e.disabled,...e.events,children:(0,D().f)(o.buttonIcon)})}function R(e){const{store:t,onToggle:o,parent:i,isTopLevelItem:l,from:d,type:u}=e,p=(0,n().O7)(),{isMobile:m}=p.device,y=(0,r().VK)((()=>t.getLinkedViewCollectionBlockStores()),[t]),x=(0,a().yK)((()=>({menuItem:{display:"flex",alignItems:"center",whiteSpace:"pre"}})),[]),T={menuType:m?w().o.Modal:w().o.Popup,right:m?(0,B.jsx)(v().DoneMenuText,{}):void 0},C={key:"collections",render:e=>(0,B.jsx)(I().Z,{...e,title:(0,B.jsx)(s()._H,{defaultMessage:"Add to",id:"sidebarItem.addAPageInside.popup.addTo"})}),items:y.map((e=>({key:e.id,render:t=>(0,B.jsx)(g().Z,{...t,title:(0,B.jsx)("div",{style:x.menuItem,children:(0,B.jsx)(h().Z,{store:e})}),icon:(0,B.jsx)(S().Z,{disabled:!0,icon:e.getIcon(),isEmptyPage:e.isEmptyPage(),size:14})}),action:t=>{c().bS({blockStore:e,environment:p,event:t.event,shouldNavigateToSource:!0,analytics:{from:d,type:u},toggleOptions:{onToggle:o,isTopLevelItem:l}})}})))};return(0,B.jsx)(f().Z,{...T,children:(0,B.jsx)(b().Z,{type:b().i.Vertical,onAccept:i.close,initialFocus:void 0,sections:[C]})})}function H(e){const{store:t,from:o,type:i,itemDepth:r,itemIndex:a,iconStyle:l}=e,c=(0,s().YB)(),p=(0,n().O7)(),{isMobile:g}=p.device,y=W(),f=e=>{const n=j().VP(t);u().Ys({environment:p,store:t}),d().Qn({environment:p,stores:[t],left:e.clientX,top:e.clientY,showInput:!1,actionSectionGroupKey:"sidebar_outliner",analyticsFrom:"sidebar_more_menu",optionalAnalyticsProperties:{teamStore:n,type:0===r?"top_level":"nested",outliner_type:i,outliner_position:a,outliner_depth:r,outliner_location:"main_sidebar"===o?"sidebar":"pane"}})},b="bookmarks"===i?c.formatMessage({defaultMessage:"Remove, rename, and more…",id:"sidebarItem.favoritedPageMenuButton.tooltip"}):c.formatMessage({defaultMessage:"Delete, duplicate, and more…",id:"sidebarItem.pageMenuButton.tooltip"});return(0,B.jsx)(x().Z,{renderTooltip:()=>b,placement:_().Placement.Bottom,render:e=>(0,B.jsx)(m().Z,{ariaLabel:b,mobileFeedback:g,style:y.button,onClick:f,...e,children:(0,V().o)({...y.buttonIcon,...l})})})}function W(){const e=(0,n().O7)().device.isMobile;return(0,a().yK)((t=>({button:e?{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:32,borderRadius:4,marginLeft:0}:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,borderRadius:4,marginLeft:4},buttonIcon:e?{fill:t.lightIconColor,width:18}:{fill:t.mediumIconColor,width:14}})),[e])}function $(e){const{showRightIcons:t}=e;return(0,a().yK)((()=>({iconContainer:{display:"flex",paddingLeft:3,...t?{}:{...k().jy,display:"block"}}})),[t])}},273212:(e,t,o)=>{o.d(t,{V:()=>n,g:()=>r});var i=()=>o(788860);const n=(0,i().vU)({addAPageInside:{defaultMessage:"Add a page inside",id:"sidebarItem.addAPageInside.tooltip"}}),r=(0,i().vU)({addPageTooltip:{defaultMessage:"Add a page",id:"sidebar.addButton.addPageTooltip"}})},771097:(e,t,o)=>{o.d(t,{CachedTypedDatabasesStore:()=>i,a:()=>n});const i=o(263184).default.createValue(void 0,{name:"CachedTypedDatabasesStore"});function n(e){const t=i.state;t&&i.setState({...t,typedDatabases:[...t.typedDatabases,e]})}},431671:(e,t,o)=>{o.d(t,{F:()=>f});o(241792);var i=()=>o(142735),n=()=>o(331540),r=()=>o(801812),a=()=>o(752778),l=()=>o(826955),s=()=>o(824462);var d=()=>o(384791),c=()=>o(677559),u=()=>o(466970),p=()=>o(828946),m=()=>o(98228),g=()=>o(771097),y=()=>o(241449);function f(e){let{environment:t,spaceStore:o,joinedTeamIds:f,parentStore:b,moveToTargets:v,overrideDatabaseType:S}=e;const h=(0,i().VK)((()=>{const e=null==o?void 0:o.id;if(e)return function(e){if(!g().CachedTypedDatabasesStore.state)return;if(e!==g().CachedTypedDatabasesStore.state.spaceId)return;return g().CachedTypedDatabasesStore.state.typedDatabases}(e)}),[null==o?void 0:o.id]),I=(0,u().E)("typed_move_to_improved_default_results"),x=(0,c().XJ)(p().x.searchActions),[{value:T,status:w}]=(0,r().r5)((async()=>{if(h)return h;if(!o||!b)return;const e=S??y().default.getDatabaseType();if(!e)return;if("resolved"!==x.status)return;const i=x.value;let r=[];if(I){const n=((await i.searchCollectionsWithRecents({environment:t,query:"",limit:20,databaseType:[e],spaceStore:o,parentStore:o,collectionViewBlockStore:void 0,searchSessionId:y().default.state.isOpen?y().default.state.flowId:void 0})).results||[]).map((e=>l().NW.createChildStore(b,{table:a().vF,id:e})));r=(0,d().qJ)({typedDatabases:n,blocksToFilterParents:v})}else{const i=await async function(e){let{environment:t,spaceId:o,databaseType:i,parentStore:n}=e;if(!o)return;const r=await s().callApi({eventName:"getTypedDatabases",environment:t,data:{spaceId:o,databaseType:i}});return"success"===r.type?r.data.result.map((e=>l().NW.createChildStore(n,{table:a().vF,id:e.collectionId}))):void 0}({environment:t,spaceId:o.id,databaseType:e,parentStore:b})??[];r=(0,d().mL)({environment:t,typedDatabases:i,spaceStore:o,joinedTeamIds:f})}return g().CachedTypedDatabasesStore.setState({typedDatabases:r,spaceId:o.id}),y().default.update((e=>({...e,variant:n().ii}))),r}),[h,o,b,S,x.status,x.value,I,t,v,f],{debounce:m().vp,throttle:m().vp});return h?{success:!0,typedDatabases:h}:"resolved"===w&&T?{success:!0,typedDatabases:T}:{success:!1}}},877727:(e,t,o)=>{o.d(t,{C3:()=>l,D:()=>s,QZ:()=>a,fo:()=>r});var i=()=>o(146947),n=()=>o(749826);function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n().default.checkGate({gateName:"packaging_m2_additional_entrypoints"})&&a(e,t)}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!e.device.isPhone&&l(t)}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n().default.checkGate({gateName:"workflow_templates_prototype",...e})||"control"!==s(e)}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i().locale.startsWith("en-")||n().default.checkGate({gateName:"packaging_m2_localize_templates"})?n().default.getEligibleGroup({experimentId:"packaging_m2_entry_point",defaultGroup:"control",...e}):"control"}}}]);