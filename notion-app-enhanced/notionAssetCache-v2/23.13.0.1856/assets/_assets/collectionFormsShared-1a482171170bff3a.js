"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[58658],{250976:(e,o,t)=>{t.r(o),t.d(o,{FormResponseSnapshotModal:()=>q});t(241792);var s=t(667294),n=()=>t(219727),a=()=>t(732811),r=()=>t(142735),i=()=>t(846550),d=()=>t(788860),l=()=>t(824462),p=()=>t(102182),c=()=>t(708518),u=()=>t(661297),m=()=>t(967092),h=()=>t(906651),f=()=>t(842574),g=()=>t(654133),S=()=>t(753463),x=()=>t(998901),y=()=>t(520849),C=()=>t(876822),v=()=>t(732466),M=()=>t(506347),j=()=>t(156642),w=()=>t(955620),R=()=>t(421654),T=()=>t(332542),F=()=>t(636340),P=()=>t(47443),b=()=>t(145284),A=()=>t(269299),k=()=>t(594546),_=()=>t(527278),D=()=>t(469753);function I(e){let{environment:o,inMemoryRecordCache:t,formSnapshotData:s,currentSpaceStore:n,currentSpaceViewStore:a,handleModalClose:r}=e;A().createAndCommit({environment:o,userAction:"FormResponseSnapshot.saveFormResponseAsPage",canUndo:!0,perform:e=>{const i=""!==s.formTitle?(0,w().TPx)(s.formTitle):(0,w().TPx)(_().Z.formatMessage(Z.defaultFormResponseTitle)),d=F().j4({environment:o,type:j().Ti.page,properties:{title:i},format:{page_icon:"/icons/drafts_gray.svg"},inMemoryRecordCache:t,transaction:e,spaceId:n.id});s.questionsAndAnswers.map((s=>{const a=""!==s.question?(0,w().TPx)(s.question):(0,w().TPx)(_().Z.formatMessage(Z.defaultQuestion)),r=F().j4({environment:o,type:j().Ti.subHeader,properties:{title:a},inMemoryRecordCache:t,transaction:e,spaceId:n.id});T().jG({parentStore:d,childStore:r,transaction:e});const i="checkbox"===s.questionType?(0,D().mJ)(s.answer):s.answer,l=""!==s.answer?(0,w().TPx)(i):(0,w().TPx)(_().Z.formatMessage(Z.defaultAnswer)),p=F().j4({environment:o,type:j().Ti.text,properties:{title:l},inMemoryRecordCache:t,transaction:e,spaceId:n.id});T().jG({parentStore:d,childStore:p,transaction:e})})),b().Hj({environment:o,spaceStore:n,spaceViewStore:a,pageStore:d,isPrivate:!0,transaction:e,location:{type:"prepend"}}),R().Wq({environment:o,store:d,isLocked:!0,transaction:e}),(0,k().j)({environment:o,event:{eventName:"form_response_save_page",eventProperties:{page_id:d.id}}}),r(),P()._c({environment:o,store:d,pageVisitSource:M().tY.FormResponseSnapshot})}})}const Z=(0,d().vU)({defaultFormResponseTitle:{id:"FormResponseSnapshotModal.saveResponseAsPage.defaultPageTitle",defaultMessage:"Your form response"},defaultAnswer:{id:"FormResponseSnapshotModal.saveResponseAsPage.defaultAnswer",defaultMessage:"(No answer)"},defaultQuestion:{id:"FormResponseSnapshotModal.saveResponseAsPage.defaultQuestion",defaultMessage:"(Untitled question)"}});var B=t(785893);const L=72,H=72;function q(){const e=(0,n().O7)(),{isPhone:o}=(0,n().Fy)(),t=(0,d().YB)(),[u,h]=(0,s.useState)(void 0),[g,S]=(0,s.useState)(!1),{open:x,formResponseId:C,secretKey:M,formSpaceId:j}=(0,r().Kw)(v().Z),w=(0,r().VK)((()=>e.WindowSizeStore.getSafePaddingTopCSS(24)),[e]),R=(0,i().yK)((e=>({mobilePopup:{display:"flex",flexDirection:"column",alignItems:"center",height:"100%",paddingTop:w,paddingBottom:w},desktopModal:{padding:96,height:"100%",width:"100%",display:"flex",flexDirection:"column",alignItems:"center"}})),[w]);(0,a().K)((async()=>{if(!C||!M||!j)return;const o=e.currentUser.id,t=await l().callApi({eventName:"getFormResponseSnapshot",environment:e,data:{snapshotId:C,secretKey:M,spaceId:j},userId:o});"failed"!==t.type?(h(t.data.snapshotData),S(!0)):p().oV({label:(0,B.jsx)(d()._H,{defaultMessage:"There was an error loading your form response. Please contact the form creator.",id:"FormResponseSnapshotModal.Error"})})}));const T=(0,s.useCallback)((()=>{v().Z.setState({open:!1,formResponseId:void 0,secretKey:void 0,formSpaceId:void 0})}),[]);return!x||g&&!u?null:o?(0,B.jsx)(m().ZP,{popupType:m().kQ.SlideUp,style:R.mobilePopup,open:void 0!==u,onDismiss:T,render:()=>u?(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(f().Z,{type:y().Z.Y,style:{marginBottom:50,width:"100%"},children:(0,B.jsx)("div",{style:{padding:20,width:"100%"},children:(0,B.jsx)(K,{formSnapshotData:u})})}),(0,B.jsx)(z,{handleModalClose:T,formSnapshotData:u})]}):null}):(0,B.jsx)(c().Z,{ariaLabel:t.formatMessage({id:"FormResponseSnapshotModal.ariaLabel",defaultMessage:"Form Response"}),style:{},innerStyle:{height:`calc(100% - ${L}px*2)`,width:`calc(100% - ${H}px*2)`,maxWidth:960},open:void 0!==u,onDismiss:T,render:()=>u?(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(W,{formSnapshotData:u,handleModalClose:T}),(0,B.jsx)(f().Z,{type:y().Z.Y,style:R.desktopModal,children:(0,B.jsx)(K,{formSnapshotData:u})})]}):null})}function V(){const e=`/icons/drafts_gray.svg?mode=${(0,i().Fg)().mode}`;return(0,B.jsx)("img",{src:e,style:{height:75}})}function K(e){let{formSnapshotData:o}=e;const t=(0,i().Fg)(),s=(0,n().Fy)().isPhone,a=(0,r().VK)((()=>o.questionsAndAnswers??[]),[o]);return(0,B.jsxs)("div",{style:{maxWidth:700,wordBreak:"break-word",marginTop:12},children:[(0,B.jsx)(V,{}),(0,B.jsx)("h1",{style:{fontSize:s?28:40,fontWeight:700,marginBottom:42,lineHeight:1.2},children:(0,B.jsx)("span",{children:""===o.formTitle?(0,B.jsx)(d()._H,{id:"FormResponseSnapshotModal.yourResponse",defaultMessage:"Your form response"}):(0,B.jsx)(d()._H,{id:"FormResponseSnapshotModal.yourResponseToTitle",defaultMessage:"Your response to <a>{formTitle}</a>",values:{a:e=>(0,B.jsx)("a",{href:o.formUrl,style:{color:t.grayButtonPressedBackground,cursor:"pointer"},children:e}),formTitle:o.formTitle}})})}),(0,B.jsx)("div",{children:a.map(((e,o)=>(0,B.jsx)(U,{questionAndAnswer:e},o)))})]})}function U(e){let{questionAndAnswer:o}=e;const t=""===o.question?(0,B.jsx)(d()._H,{defaultMessage:"(Untitled question)",id:"FormResponseSnapshotModal.Question.defaultQuestion"}):o.question,s="checkbox"===o.questionType?(0,D().mJ)(o.answer):o.answer;return(0,B.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginBottom:25},children:[(0,B.jsx)("span",{style:{fontSize:24,fontWeight:600},children:t}),(0,B.jsx)("span",{style:{fontSize:16,fontWeight:400,marginTop:6,wordWrap:"break-word"},children:""!==s?s:(0,B.jsx)(d()._H,{defaultMessage:"(No answer)",id:"FormResponseSnapshotModal.Answer.defaultAnswer"})})]})}function W(e){let{formSnapshotData:o,handleModalClose:t}=e;const a=(0,n().O7)(),r=(0,i().yK)((e=>({savePageIcon:{width:16,fill:e.icon.secondary,marginRight:5}})),[]),l=(0,s.useCallback)((()=>{const{currentSpaceStore:e,currentSpaceViewStore:s}=C().default.state;e&&s&&I({environment:a,inMemoryRecordCache:a.defaultRecordCache.inMemoryRecordCache,formSnapshotData:o,currentSpaceStore:e,currentSpaceViewStore:s,handleModalClose:t})}),[a,o,t]);return(0,B.jsx)(g().Z,{placement:x().Placement.Bottom,renderTooltip:()=>(0,B.jsx)(d()._H,{defaultMessage:"Save a copy of your response to your private section",id:"FormResponseSnapshotModal.ActionButtons.SavePage.tooltip"}),render:e=>(0,B.jsx)("div",{style:{position:"absolute",top:10,right:10,zIndex:2},children:(0,B.jsxs)(u().Z,{onClick:l,...e,children:[(0,S().$)(r.savePageIcon),(0,B.jsx)(d()._H,{defaultMessage:"Save page",id:"FormResponseSnapshotModal.ActionButtons.SavePage"})]})})})}function z(e){let{handleModalClose:o,formSnapshotData:t}=e;const a=(0,n().O7)(),r=(0,s.useCallback)((()=>{const{currentSpaceStore:e,currentSpaceViewStore:s}=C().default.state;e&&s&&I({environment:a,inMemoryRecordCache:a.defaultRecordCache.inMemoryRecordCache,formSnapshotData:t,currentSpaceStore:e,currentSpaceViewStore:s,handleModalClose:o})}),[a,t,o]),l=(0,i().yK)((e=>({actionButtons:{height:47,width:"50%",fontSize:17,borderRadius:12}})),[]);return(0,B.jsxs)("div",{style:{display:"flex",width:"100%",position:"absolute",bottom:10,gap:12,zIndex:2,paddingLeft:10,paddingRight:10,paddingBottom:40},children:[(0,B.jsx)(h().Z,{onClick:r,style:{...l.actionButtons,justifyContent:"center"},children:(0,B.jsx)(d()._H,{defaultMessage:"Save",id:"FormResponseSnapshotModal.Mobile.SavePage"})}),(0,B.jsx)(u().Z,{onClick:o,style:l.actionButtons,children:(0,B.jsx)(d()._H,{defaultMessage:"Close",id:"FormResponseSnapshotModal.Mobile.Close"})})]})}},753463:(e,o,t)=>{t.d(o,{$:()=>n});t(667294);var s=t(785893);const n=(0,t(827282).IU)("arrowDownLine",{viewBox:"0 0 16 16",svg:(0,s.jsx)("path",{d:"M13.2944 8.45459C13.2944 8.65967 13.217 8.84196 13.062 9.00146L8.55713 13.5132C8.48421 13.5907 8.39762 13.6499 8.29736 13.6909C8.20166 13.7319 8.10368 13.7524 8.00342 13.7524C7.8986 13.7524 7.79834 13.7319 7.70264 13.6909C7.60693 13.6499 7.52035 13.5907 7.44287 13.5132L2.93799 9.00146C2.78304 8.84196 2.70557 8.65967 2.70557 8.45459C2.70557 8.24495 2.77393 8.07178 2.91064 7.93506C3.04736 7.79834 3.21826 7.72998 3.42334 7.72998C3.52816 7.72998 3.62614 7.75049 3.71729 7.7915C3.80843 7.82796 3.88818 7.88037 3.95654 7.94873L5.5083 9.47998L7.7915 12.0229L7.3335 12.2485L7.25146 10.0132V1.52295C7.25146 1.3042 7.31982 1.12419 7.45654 0.98291C7.59782 0.841634 7.78011 0.770996 8.00342 0.770996C8.22217 0.770996 8.3999 0.841634 8.53662 0.98291C8.6779 1.12419 8.74854 1.3042 8.74854 1.52295V10.0132L8.6665 12.2485L8.21533 12.0229L10.4917 9.47998L12.0435 7.94873C12.1118 7.88037 12.1916 7.82796 12.2827 7.7915C12.3739 7.75049 12.4718 7.72998 12.5767 7.72998C12.7817 7.72998 12.9526 7.79834 13.0894 7.93506C13.2261 8.07178 13.2944 8.24495 13.2944 8.45459ZM13.2944 14.4839C13.2944 14.6981 13.2261 14.8758 13.0894 15.0171C12.9526 15.1584 12.7817 15.229 12.5767 15.229H3.43701C3.22282 15.229 3.04736 15.1584 2.91064 15.0171C2.77393 14.8758 2.70557 14.6981 2.70557 14.4839C2.70557 14.2743 2.77393 14.0988 2.91064 13.9575C3.04736 13.8208 3.22282 13.7524 3.43701 13.7524H12.5767C12.7817 13.7524 12.9526 13.8208 13.0894 13.9575C13.2261 14.0988 13.2944 14.2743 13.2944 14.4839Z"})})}}]);