"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[37912],{682652:(e,t,r)=>{r.d(t,{CollectionItemCover:()=>B,v:()=>K});r(670560),r(267602),r(653476),r(470928),r(241792);var o=r(667294),i=()=>r(100808),n=()=>r(219727),l=()=>r(142735),a=()=>r(846550),d=()=>r(435308),s=()=>r(156642),c=()=>r(532850),v=()=>r(455530),y=()=>r(565630),u=()=>r(396136),m=()=>r(696459),h=()=>r(887430),g=()=>r(384510),p=()=>r(465371),S=()=>r(729201),C=()=>r(826955),b=()=>r(283403),x=()=>r(518242),f=()=>r(901690),k=()=>r(135499),F=()=>r(838444),j=r(785893);function I(e){return"number"==typeof e}function B(e){const{store:t,coverFormat:r,coverContentFadedOverlay:i,coverContentFadedOverlayStyle:a,coverHeight:c,coverWidth:v,coverAspectFormat:m,coverSizeFormat:g,coverPosition:p,imageCoverWrapStyle:S,onLoadProxiedImage:b,showEmptyGalleryCover:x,showLoadingShimmer:f,loadingShimmerStyle:k,emptyGalleryCoverStyle:F,style:I,rendererBlockStyle:B,contentWrapStyle:W,renderAdditionalBlocks:w=!1,isInHomeWidget:L,variant:A,startBlockId:G}=e,{ThemeStore:R}=(0,n().O7)();(0,y().wr)(null==r?void 0:r.type,((e,t)=>e!==t&&(b(),!0)));const H=(0,o.useCallback)((()=>w&&G?"table":"image"),[w,G]),z=(0,l().VK)((()=>{const e=G?(0,h().wK)({rootStore:t,renderAdditionalBlocks:w,startBlockId:G,tableRenderMode:H()}):(0,h().NU)({rootStore:t,renderAdditionalBlocks:w,theme:R.state.mode});return e.image?e.image:!(f&&0===e.blockIds.length&&!e.isDefined)&&e.blockIds}),[R,t,w,G,f,H]),K=new(d().default)((()=>{const e=(0,h().wK)({rootStore:t,renderAdditionalBlocks:w,startBlockId:G,tableRenderMode:H()});return e.image?void 0:e.blockIds}),{debugName:"restrictedContentStore"}),O=new(d().default)((()=>{const e=[];if(Array.isArray(z)){let r=0;for(;r<z.length;){let o=z[r],i=C().G.createChildStore(t,{table:u().iU,id:o});if(i.getType()===s().Ti.numberedList){const n=[{blockId:o,idx:1}],l=[{id:o,format:void 0,depth:n.length-1,index:n[0].idx}];for(r+=1;r<z.length&&(o=z[r],i=C().G.createChildStore(t,{table:u().iU,id:o}),i.getType()===s().Ti.numberedList);){{const e=i.getParentId();if(i.getParentId()===n[n.length-1].blockId)n.push({blockId:o,idx:1});else{let t=n[n.length-1].idx;for(;n.length>0&&n[n.length-1].blockId!==e;)t=n[n.length-1].idx,n.pop();n.push({blockId:o,idx:t+1})}l.push({id:o,format:void 0,depth:n.length-1,index:n[n.length-1].idx})}r+=1}e.push(l)}else r+=1}}return e}),{debugName:"numberedListsStore"});return"page_cover"===r.type?(0,j.jsx)($,{store:t,coverHeight:c,coverSizeFormat:g,imageCoverWrapStyle:S,coverWidth:v,onLoadProxiedImage:b,style:I,variant:A,coverAspectFormat:m,coverPosition:p,showEmptyGalleryCover:x,emptyGalleryCoverStyle:F}):"page_content"===r.type?(0,j.jsx)(P,{coverData:z,restrictedContentStore:K,renderAdditionalBlocks:w,numberedListsStore:O,store:t,coverHeight:c,coverSizeFormat:g,coverContentFadedOverlay:i,coverContentFadedOverlayStyle:a,contentWrapStyle:W,coverPosition:p,coverWidth:v,coverAspectFormat:m,isInHomeWidget:L,loadingShimmerStyle:k,showEmptyGalleryCover:x,emptyGalleryCoverStyle:F,variant:A,onLoadProxiedImage:b,imageCoverWrapStyle:S,style:I,rendererBlockStyle:B}):"property"===r.type?(0,j.jsx)(_,{store:t,coverHeight:c,coverSizeFormat:g,imageCoverWrapStyle:S,onLoadProxiedImage:b,coverWidth:v,style:I,variant:A,coverAspectFormat:m,coverPosition:p,showEmptyGalleryCover:x,emptyGalleryCoverStyle:F,property:r.property},r.property):null}function P(e){const{coverData:t,restrictedContentStore:r,numberedListsStore:o,renderAdditionalBlocks:i,store:n,coverHeight:l,coverSizeFormat:a,coverContentFadedOverlay:d,coverContentFadedOverlayStyle:s,contentWrapStyle:c,coverPosition:v,coverWidth:y,coverAspectFormat:u,isInHomeWidget:m,loadingShimmerStyle:h,showEmptyGalleryCover:g,emptyGalleryCoverStyle:p,variant:S,onLoadProxiedImage:C,imageCoverWrapStyle:b,style:x,rendererBlockStyle:f}=e;return!1===t?(0,j.jsx)(O,{coverHeight:l,coverSizeFormat:a,loadingShimmerStyle:h}):t?(0,j.jsx)(w,{coverData:t,restrictedContentStore:r,renderAdditionalBlocks:i,store:n,coverHeight:l,coverSizeFormat:a,coverContentFadedOverlay:d,coverContentFadedOverlayStyle:s,contentWrapStyle:c,coverPosition:v,coverWidth:y,coverAspectFormat:u,isInHomeWidget:m,showEmptyGalleryCover:g,emptyGalleryCoverStyle:p,variant:S,onLoadProxiedImage:C,imageCoverWrapStyle:b,style:x,rendererBlockStyle:f,numberedListsStore:o}):g?(0,j.jsx)(K,{coverHeight:l,coverSizeFormat:a,emptyGalleryCoverStyle:p}):null}function W(e){const{store:t,renderAdditionalBlocks:r,rendererBlockStyle:o,blockId:n,blockIdsToRender:s,restrictedContentStore:c,numberedListsStore:v}=e,y=(0,a().yK)((e=>({renderer:{fontSize:12,opacity:.8,pointerEvents:"none",...o}})),[o]),m=C().G.createChildStore(t,{table:u().iU,id:n}),h=(0,l().VK)((()=>m.getType()),[m]),g=(0,l().VK)((()=>{const e="table_row"===h?m.getParentBlockStore():m;return r&&void 0!==h?e&&(0,F().u)({store:e,restrictedBlockIds:s,tableRenderMode:"table"}):(0,b().h)(m)}),[r,h,m,s]),S=new(d().default)((()=>({depth:0,numberedListBlockIdsWithFormat:N(n,v)})),{debugName:"numberedListCounterStore"}),x=(0,l().VK)((()=>(0,p().BX)(m)),[m]);return g?(0,j.jsx)(i().D,{value:c,children:(0,j.jsx)(g,{store:m,disabled:!0,disableCommentMenu:!0,disableHoverMenu:!0,hideContent:x,style:y.renderer,isQuickFind:!0,numberedListCounterStore:S})},n):null}function w(e){const{coverData:t,restrictedContentStore:r,numberedListsStore:o,renderAdditionalBlocks:i,store:d,coverHeight:s,coverSizeFormat:c,coverContentFadedOverlay:v,coverContentFadedOverlayStyle:y,contentWrapStyle:u,coverPosition:m,coverWidth:h,coverAspectFormat:g,isInHomeWidget:p,showEmptyGalleryCover:S,emptyGalleryCoverStyle:C,variant:b,onLoadProxiedImage:f,imageCoverWrapStyle:F,style:I,rendererBlockStyle:B}=e,P=(0,n().O7)(),w=(0,a().Fg)(),G=(0,l().VK)((()=>({contentWrapStyle:E(b,P,w,s,c,v,u,p),coverContentFadedOverlay:V(w,y),imageBox:{...A(),...M({renderCollectionImage:!0},b,w,s,c),...H(),objectPosition:`center ${100*(1-L(d,m))}%`},imageCoverWrap:z(s,c,F),proxiedImageBox:{...A(I),...M({renderCollectionImage:!1},b,w,s,c),...H(g),objectPosition:`center ${100*(1-L(d,m))}%`}})),[b,P,w,s,m,c,v,y,g,d,I,u,p,F]),O=(0,l().Kw)(r),T=(0,l().VK)((()=>t&&Array.isArray(t)?t.filter((e=>!O||O.includes(e))):[]),[t,O]),Z=(0,l().VK)((()=>{var e;return i&&d.isCollectionView()&&!(null===(e=d.getModel())||void 0===e?void 0:e.hasWikiBlockUri())}),[i,d]);return Array.isArray(t)?t.length>0?(0,j.jsxs)("div",{style:G.contentWrapStyle,children:[O?t.filter((e=>O.indexOf(e)>=0)).map((e=>(0,j.jsx)(W,{store:d,renderAdditionalBlocks:i,rendererBlockStyle:B,blockId:e,blockIdsToRender:T,restrictedContentStore:r,numberedListsStore:o},e))):t.map((e=>(0,j.jsx)(W,{store:d,renderAdditionalBlocks:i,rendererBlockStyle:I,blockId:e,blockIdsToRender:T,restrictedContentStore:r,numberedListsStore:o},e))),v&&(0,j.jsx)("div",{style:G.coverContentFadedOverlay})]}):S?(0,j.jsx)(K,{coverHeight:s,coverSizeFormat:c,emptyGalleryCoverStyle:C??G.contentWrapStyle}):null:Z?(0,j.jsxs)("div",{style:G.contentWrapStyle,children:[(0,j.jsx)(k().Z,{url:t.url,onFinishedLoadingProxyUrl:e=>f(e),isAuthenticated:!0,permissionRecord:t.pointer,width:R(),render:(e,t)=>{if(t)return(0,j.jsx)(x().ZP,{style:G.imageBox,placeholderLoadedStyle:{display:"flex",justifyContent:"center",alignItems:"end"},src:t})}}),(0,j.jsx)(D,{variant:b}),(0,j.jsx)("div",{style:G.coverContentFadedOverlay})]}):(0,j.jsxs)("div",{style:G.imageCoverWrap,children:[(0,j.jsx)(k().Z,{url:t.url,onFinishedLoadingProxyUrl:e=>f(e),isAuthenticated:!0,permissionRecord:t.pointer,width:R(h,c),render:(e,t)=>{if(t)return(0,j.jsx)(x().ZP,{style:G.proxiedImageBox,src:t})}}),(0,j.jsx)(D,{variant:b})]})}function L(e,t){if(I(t))return t;if(e.getFormatStore().isDefined()){const{page_cover_position:t,card_cover_position:r}=e.getFormat();if(I(r))return r;if(I(t))return t}return.5}function A(e){return e||{}}function G(e,t){if(e)return e;switch(t){case"large":return g().Z.card.desktop.large.height;case"small":return g().Z.card.desktop.small.height;default:return g().Z.card.desktop.medium.height}}function R(e,t){return e||(0,h().rD)(t)}function H(e){return{objectFit:void 0===e?"cover":e}}function z(e,t,r){return{height:G(e,t),position:"relative",pointerEvents:"none",overflow:"hidden",...r}}function K(e){let{coverHeight:t,coverSizeFormat:r,emptyGalleryCoverStyle:o}=e;return(0,j.jsx)("div",{style:{height:G(t,r),...o}})}function O(e){let{coverHeight:t,coverSizeFormat:r,loadingShimmerStyle:o}=e;const i=(0,S().Z)(!0,100,0);return(0,j.jsx)("div",{style:{height:G(t,r),...o},children:i?(0,j.jsx)(f().Z,{paragraphs:[{lineHeight:12,lineMargin:6,sectionWidths:[100,100,50],repeat:1,sectionMargin:0}]}):null})}function T(e,t,r,o,i){const{ThemeStore:n}=t,l="dark"===n.state.mode,a=i?r.lightDividerColor:r.regularDividerColor;switch(e){case"default":return{};case"gallery":return{background:r.collectionGalleryPreviewCardCover,padding:"8px 8px 0",boxShadow:l?"transparent":`inset 0 -1px 0 0 ${a}`,...o};default:(0,m().t1)(e)}}function V(e,t){return{width:"100%",height:40,position:"absolute",bottom:0,left:0,background:`linear-gradient(to bottom, transparent, ${e.accentColors.gray[30]} 100%)`,...t}}function Z(e,t){switch(e){case"default":return{border:`1px solid ${t.stroke.primary}`,borderTopLeftRadius:6,borderTopRightRadius:6,borderBottomRightRadius:6,borderBottomLeftRadius:6};case"gallery":return{borderRadius:0,borderTopLeftRadius:1,borderTopRightRadius:1};default:(0,m().t1)(e)}}function D(e){let{variant:t}=e;const r=(0,a().Fg)();switch(t){case"default":return null;case"gallery":return(0,j.jsx)("div",{style:{position:"absolute",left:0,right:0,bottom:0,borderBottom:`1px solid ${r.regularDividerColor}`}});default:(0,m().t1)(t)}return null}function E(e,t,r,o,i,n,l,a){return{height:G(o,i),pointerEvents:"none",overflow:"hidden",position:n?"relative":"static",...T(e,t,r,l,a),...l}}function U(e,t,r,o){return{width:"100%",height:G(r,o),...Z(e,t),objectPosition:"center"}}function $(e){let{store:t,coverHeight:r,coverSizeFormat:o,imageCoverWrapStyle:i,coverWidth:n,onLoadProxiedImage:d,style:s,variant:c,coverAspectFormat:v,coverPosition:y,showEmptyGalleryCover:u,emptyGalleryCoverStyle:m}=e;const h=(0,a().Fg)(),g=(0,l().VK)((()=>{var e;return null===(e=t.getCover())||void 0===e?void 0:e.cover}),[t]),p=(0,l().VK)((()=>t.pointer),[t]),S=(0,l().VK)((()=>L(t,y)),[y,t]);return g?(0,j.jsxs)("div",{style:z(r,o,i),children:[(0,j.jsx)(k().Z,{url:g,isAuthenticated:!0,permissionRecord:p,width:R(n,o),onFinishedLoadingProxyUrl:e=>d(e),render:(e,t)=>{if(t)return(0,j.jsx)(x().ZP,{style:{...A(s),...U(c,h,r,o),...H(v),objectPosition:`center ${100*(1-S)}%`},src:t})}}),(0,j.jsx)(D,{variant:c})]}):u?(0,j.jsx)(K,{coverHeight:r,coverSizeFormat:o,emptyGalleryCoverStyle:m}):null}function _(e){let{property:t,store:r,coverHeight:o,coverSizeFormat:i,imageCoverWrapStyle:n,onLoadProxiedImage:d,coverWidth:s,style:y,variant:u,coverAspectFormat:m,coverPosition:h,showEmptyGalleryCover:g,emptyGalleryCoverStyle:p}=e;const S=(0,a().Fg)(),C=(0,l().VK)((()=>(0,c().g)(r.getPropertyValue(t)).find((e=>(0,v().SR)({url:e.url})))),[t,r]),b=(0,l().VK)((()=>r.pointer),[r]),f=(0,l().VK)((()=>L(r,h)),[h,r]);return C?(0,j.jsxs)("div",{style:z(o,i,n),children:[(0,j.jsx)(k().Z,{onFinishedLoadingProxyUrl:e=>d(e),url:C.url,isAuthenticated:!0,permissionRecord:b,width:R(s,i),render:(e,t)=>{if(t)return(0,j.jsx)(x().ZP,{style:{...A(y),...U(u,S,o,i),...H(m),objectPosition:`center ${100*(1-f)}%`},src:t})}}),(0,j.jsx)(D,{variant:u})]}):g?(0,j.jsx)(K,{coverHeight:o,coverSizeFormat:i,emptyGalleryCoverStyle:p}):null}function M(e,t,r,o,i){const{renderCollectionImage:n}=e;return{...U(t,r,o,i),objectPosition:"center center",...n&&{height:void 0,border:`1px solid ${r.lightDividerColor}`,borderBottom:"none",borderBottomLeftRadius:0,borderBottomRightRadius:0}}}function N(e,t){const r=t.state;for(const o of r)if(o.find((t=>t.id===e)))return o;return[]}}}]);