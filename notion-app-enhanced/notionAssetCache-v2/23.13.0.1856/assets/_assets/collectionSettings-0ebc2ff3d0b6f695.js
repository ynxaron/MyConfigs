"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[58799,92329],{140798:(e,t,n)=>{n.d(t,{Lg:()=>m,N:()=>p,aG:()=>u});var o=()=>n(139978),r=()=>n(306164),i=()=>n(269299),a=()=>n(932753),s=()=>n(6006),l=()=>n(384334),c=()=>n(662062),d=()=>n(876822);function u(e){const{environment:t,currentSpaceViewStore:n,...o}=e;if(!n.getModel())return;const r=!(0,c().q)(n)[e.feature];i().createAndCommit({userAction:"userHomeActions.toggleHomeFeature",environment:t,canUndo:!0,perform:t=>{i().applyOperation({store:n,operation:{pointer:n.pointer,path:["settings","personal_home","enabled_features"],command:"update",args:{[e.feature]:r}},transaction:t})}}),(0,l().cY)({environment:t,show:r,...o})}function p(e){let{environment:t,option:n,from:o,userAction:r}=e;const a=d().default.state.currentSpaceViewStore;if(!a)return!1;const c=a.getOnAppStartStore().getValue();return i().createAndCommit({userAction:r,environment:t,canUndo:!0,perform:e=>{i().applyOperation({store:a,operation:{pointer:a.pointer,path:["settings","on_app_start"],command:"set",args:n},transaction:e})}}),(0,s().pJ)({spaceView:a.getModel(),preference:n}),(0,l().BX)({environment:t,oldValue:c,newValue:n,from:o}),!0}function m(e){const{environment:t,selectedStore:n,currentSpaceViewStore:s,collectionContextStore:c}=e,d=c.collectionViewStore(),u=c.collectionStore(),p=c.collectionViewBlockStore();if(!(u&&d&&p&&s))return;const m=s.getTeamsStores(),y=n.table===r().e0?m.indexOf(n)+1:0,g=n.table===r().e0?n.id:void 0;i().createAndCommit({environment:t,userAction:"PersonalHomeTrendingPanel.setCollectionViewSourceTeamId",canUndo:!0,perform:e=>{i().applyOperation({store:d,operation:{pointer:{id:d.id,table:o().np},path:["format","collection_view_source","teamId"],command:"set",args:g},transaction:e}),a().mc({environment:t,collectionViewBlockStore:p,collectionViewStore:d,collectionStore:u,collectionContextStore:c,isFullScreen:!1,isRootChild:!1,isInPeekRenderer:!1,viewsModuleContextType:void 0,forceLocalQueryCollection:!1})}}),(0,l().Ay)({environment:t,teamId:g,index:y})}},949719:(e,t,n)=>{n.d(t,{Z:()=>g});n(670560),n(267602),n(653476),n(241792);var o=n.n(n(443261)),r=n(667294),i=()=>n(788860),a=()=>n(513670),s=()=>n(827973),l=()=>n(255577),c=()=>n(388284),d=()=>n(951877),u=()=>n(527278),p=n(785893);const m=(0,i().vU)({inputPlaceholder:{defaultMessage:"Search for a propertyâ€¦",id:"database.viewSettings.propertySelect.inputPlaceholder"},none:{defaultMessage:"None",id:"database.viewSettings.propertySelect.noneMessage"},remove:{defaultMessage:"Remove",id:"database.viewSettings.propertySelect.removeMessage"}});function y(e){let{currentProperty:t,showNoneOption:y,showRemoveOption:g,getProperties:f,onAccept:h,inputPlaceholder:S,defaultShowPropertyCount:v,schema:b,format:_,renderProperty:w}=e;const C=(0,n(219727).Fy)(),[x,I]=(0,r.useState)(""),[k,T]=(0,r.useState)(!1),P=(0,n(142735).qz)(void 0,n(692304).Z),M=(0,n(846550).yK)((e=>({icon:{width:16,fill:e.mediumTextColor,marginLeft:4,marginRight:2},menuItem:{color:e.mediumTextColor}})),[]),L=(0,n(305580).i)(_,b,void 0,n(109477).j5.Page).collection_page_properties||[],j=!v||k,A=u().Z.formatMessage(m.none),V=y?{key:"none",render:e=>(0,p.jsx)(s().Z,{...e,checkState:!t,title:A}),action:()=>{h(void 0)}}:void 0,R=g?{key:"remove",render:e=>(0,p.jsx)(s().Z,{...e,icon:(0,n(739479).y)(M.icon),title:u().Z.formatMessage(m.remove)}),action:()=>{h(void 0)}}:void 0,Z=f();let D=a().MR(Z,(e=>L.findIndex((t=>t.property===e))));if(x){const e=new Map;let t=D.map((t=>{const o=b[t],r=o?`${o.name} ${n(270315).SO[o.type]}`:"";return e.set(t,r),r}));t=o().filter(x,t).map((e=>{let{original:t}=e;return t})),D=D.filter((n=>t.includes(e.get(n)||"")))}else!j&&v&&(D=D.slice(0,v));const F=a().oA([!x||o().test(x,A)?V:void 0,...D.map((e=>function(e,t,n,o,r){const i=t[e];if(!i)return;const a={key:e,render:t=>{const n=e===o;return r?r(t,e,n,i):(0,p.jsx)(d().N,{...t,propertySchema:i,format:d().L.Name,checkState:n})},action:()=>{n(e)}};return a}(e,b,h,t,w)))]);if(!j&&Z.length>D.length&&!x){const e={key:"show_more",render:e=>(0,p.jsx)(s().Z,{...e,icon:(0,n(314379).o)(M.icon),style:M.menuItem,title:(0,p.jsx)(i()._H,{defaultMessage:"{moreCount} more",id:"database.viewSettings.propertySelect.showMoreTitle",values:{moreCount:Z.length-D.length}})}),action:()=>{T(!0)}};F.push(e)}const E=F.length>0,H=Boolean(x),O=!R||E||H;O&&!E&&F.push({action:a().ZT,key:"noResults",render:e=>(0,p.jsx)(n(178498).Z,{...e,caption:(0,p.jsx)(i()._H,{defaultMessage:"No results",id:"database.viewSettings.propertySelect.noResultsTitle"})})});const B=[];return O&&B.push({key:"input",comp:(0,p.jsx)(c().Z,{isInput:!0,children:(0,p.jsx)(n(740046).ZP,{focusInitial:!C.isMobile||void 0,focus:!C.isMobile||void 0,value:x,onChange:e=>{I(e.target.value),P.setState({...P.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}}),T(!1)},placeholder:S||u().Z.formatMessage(m.inputPlaceholder)})})}),(F.length>0||R)&&B.push({key:"properties",comp:(0,p.jsx)(l().Z,{type:l().i.Vertical,initialFocus:0,sections:[...F.length>0?[{key:"results",render:e=>(0,p.jsx)(c().Z,{...e}),items:F}]:[],...R?[{key:"remove",render:e=>(0,p.jsx)(c().Z,{topBorder:F.length>0,...e}),items:[R]}]:[]],store:P})}),(0,p.jsx)(p.Fragment,{children:B.map((e=>{let{key:t,comp:n}=e;return(0,p.jsx)(r.Fragment,{children:n},t)}))})}const g=r.memo(y,n(632314).Z)},477253:(e,t,n)=>{n.d(t,{Z:()=>r});n(667294);var o=n(785893);const r=function(e){let{switcherProps:t,...r}=e;return(0,o.jsx)(n(446955).Z,{right:(0,o.jsx)(n(471645).Z,{onClick:r.onClick,disabled:r.disabled,...t}),...r})}},493843:(e,t,n)=>{n.d(t,{$o:()=>W,Fv:()=>H,IL:()=>$,J4:()=>B,KA:()=>F,Nf:()=>D,_p:()=>G,cQ:()=>K,f$:()=>O,fX:()=>z,j2:()=>Z,k2:()=>J,mg:()=>Q,mz:()=>U,oP:()=>E,tF:()=>q,td:()=>N,x:()=>Y});n(670560),n(267602),n(470928),n(30005),n(241792),n(228244);var o=()=>n(730120),r=()=>n(492788),i=()=>n(506347),a=()=>n(926724),s=()=>n(331540),l=()=>n(874459),c=()=>n(998411),d=()=>n(35980),u=()=>n(513670),p=()=>n(696459),m=()=>n(250303),y=()=>n(384667),g=()=>n(366257),f=()=>n(139224),h=()=>n(421654),S=()=>n(636340),v=()=>n(531515),b=()=>n(47443),_=()=>n(794586),w=()=>n(879952),C=()=>n(970105),x=()=>n(990966),I=()=>n(269299),k=()=>n(932753),T=()=>n(887430),P=()=>n(861026),M=()=>n(804217),L=()=>n(826955),j=()=>n(965903),A=()=>n(807230),V=()=>n(701182),R=()=>n(645843);function Z(e){const{collectionViewStore:t,collectionContextStore:n,timelineState:o,environment:r}=e,i=r.currentUser.id,a=(0,V().B8)(t.id),s=(0,V().pQ)(t,r),l=n.permissionScopesStore.state,c=u().Ds((()=>{if(o.destroyed)return;const e={zoomLevel:o.zoomLevel.state,centerTimestamp:(0,V().al)(o)};d().Z.set({userId:i,key:a,value:e})}),1e3),p=u().Ds((()=>{if(o.destroyed||!M().default.state.online||!r.currentUser.isLoggedIn()||!l.canConfigureBlock)return;const e={zoomLevel:o.zoomLevel.state,centerTimestamp:(0,V().al)(o)},n=t.getFormat().timeline_preference;u().Xy(n,e)||I().createAndCommit({userAction:"collectionTimelineViewActions.setRemotePreference",environment:r,canUndo:!0,perform:n=>{h().FH({stores:[t],update:{timeline_preference:e},transaction:n})}})}),5e3);o.savePreference=()=>{c(),p()},D({timelineState:o,environment:r,...s})}function D(e){const{timelineState:t,zoomLevel:n,centerTimestamp:o,environment:i}=e,{savePreference:a}=t,s=i.WindowSizeStore.state.width+2*V().Ge,l=(0,V().x2)(n,s),c=o-l/2,d=o+l/2;t.zoomLevel.setState(n),t.currentRange.setState({startTimestamp:c,endTimestamp:d}),r().default.afterNextFlush((()=>{F({timelineState:t,centerTimestamp:o}),a&&a()}))}function F(e){const{timelineState:t,centerTimestamp:n}=e,{horizontalScroller:o,outerSizeObserver:r}=t;if(!o)return;const i=t.zoomLevel.state,{startTimestamp:a,endTimestamp:s}=t.currentRange.state,l=r.rect.state.width;if(l===(0,V().e$)(i,s-a))return;const c=(0,V().e$)(i,n-a)-l/2;o.scrollLeft=c,t.scrollLeft.setState(c)}function E(e){const{environment:t,store:n,query:o,date:r,schema:i,transaction:a}=e,{timeline_by:s}=o;if(!s)return;const l=n.getAssociatedCollectionStore(),c=(null==l?void 0:l.getMappedProperty(s))??s,d=o.timeline_by_end?(null==l?void 0:l.getMappedProperty(o.timeline_by_end))??o.timeline_by_end:void 0,u=(0,V().TW)({store:n,dateValue:r,query:o,schema:(null==l?void 0:l.getSchema())??i}),p=n.getPropertyValue(c),m=d?n.getPropertyValue(d):void 0;return S().sW({store:n.getPropertiesStore(),data:u,transaction:a}),g().H({environment:t,store:n,dateProperty:{id:c,newValue:(null==u?void 0:u[c])??[],oldValue:p},otherDateProperty:d?{id:d,newValue:(null==u?void 0:u[d])??[],oldValue:m}:void 0}),n}function H(e){var t;const{environment:n,timelineState:r,collectionStore:i,collectionContextStore:a,store:s,query:d,groupFormat:u,transaction:p}=e,m=r.zoomLevel.state,g=(0,V().al)(r),{snapUnit:f,getDateRangePlaceholderDuration:h}=V().BJ[m],{timeline_by:S}=d;if(!S)return;const v=null===(t=a.groupsStore.getGroupState(u))||void 0===t?void 0:t.resultsStore.state;if(!v)return;const b=o().ou.fromMillis(g),_=(0,V().DS)(b,f),w=(0,V().DS)(h(b),f),C=(0,V().AZ)({startValue:(0,l().Lg)((0,c().r)()),snapUnit:f,desiredStart:_,desiredEnd:w});return E({environment:n,store:s,query:d,schema:i.getSchema(),date:C,transaction:p}),y().$T({environment:n,collectionStore:i,before:!0,store:v[0],insertStores:[s],collectionContextStore:a,groupsPointer:u?[u]:[],transaction:p}),s}function O(e){const{type:t,timelineState:n,store:o,startX:r,query:i,schema:a,intl:s,environment:l}=e,{horizontalScroller:c}=n,{startTimestamp:d}=n.currentRange.state;if(!c)return;w().Ys({environment:l,store:o});const p=c.scrollLeft,{stores:m}=j().default.state,y=u().oA(m.map((e=>{const t=(0,V().bk)({store:e,query:i,schema:a,userId:l.currentUser.id,intl:s,formulasModule:void 0});if(t)return{startValue:t,store:e}})));n.dragState.setState({type:t,startStore:o,stores:y.map((e=>{let{store:t}=e;return t})),startValues:y.map((e=>{let{startValue:t}=e;return t})),temporaryValues:y.map((e=>{let{startValue:t}=e;return t})),startX:r,startStartTimestamp:d,startScrollLeft:p})}function B(e){const{timelineState:t,store:n,startX:o,startY:r,schema:i,collectionContextStore:a,verticalScroller:s}=e,{horizontalScroller:l}=t,{startTimestamp:c}=t.currentRange.state;if(!l||!s)return;const d=l.scrollLeft,u=s.scrollTop,p=(0,V().YE)(a,n,i);t.drawState.setState({startStore:n,startDependencyRelationPointers:p,temporaryDependencyRelationPointers:[...p],startX:o,startY:r,startScrollLeft:d,startScrollTop:u,startStartTimestamp:c,xOffsetPx:0,yOffsetPx:0,tryToCompleteDrawnArrow:!1})}function N(e){const{timelineState:t,currentX:n}=e,{horizontalScroller:o}=t,r=t.zoomLevel.state,i=t.dragState.state,{startTimestamp:a}=t.currentRange.state;if(!i||!o)return;const{type:s,startStartTimestamp:c,startValues:d,startScrollLeft:m,startX:y,startStore:g,stores:f}=i,h=V().BJ[r],{snapUnit:S}=h,v=o.scrollLeft-m+(n-y)+(0,V().e$)(r,a-c),b=(0,V().x2)(r,v),_=d[f.indexOf(g)];let w;if(s===V().px.LeftResizer){const{start:e}=(0,V().XO)(_,S),t=e.plus(b);w=d.map((e=>{const n=(0,V().AZ)({startValue:e,snapUnit:S,desiredStart:t});return(0,l().gW)(n)}))}else if(s===V().px.RightResizer){const{end:e}=(0,V().XO)(_,S),t=e.plus(b);w=d.map((e=>{const n=(0,V().AZ)({startValue:e,snapUnit:S,desiredEnd:t});return(0,l().Qq)(n)}))}else s===V().px.ItemDrag?w=d.map((e=>{const{start:t,end:n}=(0,V().XO)(e,S),o=t.plus(b),r=o.plus(n.valueOf()-t.valueOf());return(0,V().AZ)({startValue:e,snapUnit:S,desiredStart:o,desiredEnd:r})})):(0,p().t1)(s);u().Xy(i.temporaryValues,w)||t.dragState.setState({...i,temporaryValues:w})}function U(e){const{timelineState:t,currentX:n,currentY:o,verticalScroller:r}=e,i=t.drawState.state,a=t.zoomLevel.state,{startTimestamp:s}=t.currentRange.state,{horizontalScroller:l}=t;if(!i||!l||!r)return;const{startDependencyRelationPointers:c,startStore:d,startX:p,startY:m,startScrollLeft:y,startScrollTop:g,startStartTimestamp:f}=i,h=l.scrollLeft,S=r.scrollTop,v=h-y+(n-p)+(0,V().e$)(a,s-f),b=S-g+(o-m),_=t.hoveredItem.state;if(_&&_!==d&&!c.some((e=>e.id===_.id))){const e=[...c,{table:"block",id:_.id,spaceId:_.getSpaceId()}];u().Xy(i.temporaryDependencyRelationPointers,e)||t.drawState.setState({...i,temporaryDependencyRelationPointers:e,xOffsetPx:void 0,yOffsetPx:void 0})}else t.drawState.setState({...i,temporaryDependencyRelationPointers:[...c],xOffsetPx:v,yOffsetPx:b})}function z(e){const{environment:t,collectionContextStore:n,timelineState:o,query:r,schema:i,transaction:a}=e,s=o.dragState.state,{timeline_by:l}=r;if(!s||!l)return;const{temporaryValues:c,stores:d}=s;c.forEach(((e,o)=>{const s=d[o];E({environment:t,store:s,query:r,schema:i,transaction:a,date:e}),m().rv({environment:t,collectionContextStore:n,block_id:s.id,property:l,property_type:"date",from:"timeline"})})),o.dragState.setState(void 0)}function W(e){var t;const{timelineState:n,environment:o,transaction:r,collectionContextStore:i,isFullScreen:a,isRootChild:s}=e,l=n.drawState.state,c=n.dateRangePlaceholder.state;if(!l)return;const{startStore:d,startDependencyRelationPointers:u,temporaryDependencyRelationPointers:p}=l;if(!d)return void n.drawState.setState(void 0);let y;if(c.active){const{date:e,store:t,parentStore:a,groupFormat:s,newTimelineItemProps:l,existingTimelineItemProps:u}=c;if(t&&u){const{query:n,schema:i}=u;E({environment:o,store:t,query:n,schema:i,date:e,transaction:r}),y={table:"block",id:t.id,spaceId:d.getSpaceId()}}else if(l){const{query:n,schema:c,isFullScreen:u,canEditTimelineItems:p,subitemPath:m}=l,g=Q({environment:o,date:e,store:t,parentStore:a,query:n,schema:c,isFullScreen:u,groupFormat:s,canEditTimelineItems:p,collectionContextStore:i,subitemPath:m,transaction:r,from:"timeline_complete_draw"});g&&(y={table:"block",id:g.id,spaceId:d.getSpaceId()})}n.dateRangePlaceholder.setState({active:!1})}else y=p.find((e=>!u.includes(e)));const g=(0,V()._e)(i);if(g){const{property:e}=g;y&&(v().hE({environment:o,propertyWithInverse:g,sourceStore:d,destStore:L().G.createChildStore(d,y),position:{type:"after"},transaction:r}),m().rv({environment:o,collectionContextStore:i,block_id:d.id,property:e,property_type:"relation",from:"timeline",isFromBulkActionsToolbar:!1,isUnthrottled:!0})),n.drawState.setState(void 0)}else f().wl({item:{type:"dependencies",from:"view_options"},collectionSettingsStore:i.settingsStore}),n.drawState.setState({...l,tryToCompleteDrawnArrow:!0});const h=null===(t=y)||void 0===t?void 0:t.id;h&&(0,R().LE)(o,{...(0,P().Pn)(i),...(0,R().Ii)({environment:o,collectionContextStore:i,timelineState:n,isFullScreen:a,isRootChild:s}),dependenciesPropertyID:null==g?void 0:g.property,blockedByStoreID:d.id,blockingStoreID:h})}function K(e){const{timelineState:t,environment:n}=e;t.dragState.state&&(t.dragState.setState(void 0),w().ZH({environment:n}))}function Y(e){const{timelineState:t,environment:n}=e;t.drawState.state&&(t.drawState.setState(void 0),w().ZH({environment:n}))}function J(e){const{stores:t,collectionViewStore:n,schema:o,transaction:r}=e,i=n.getType(),a=n.getQuery(o),s=[];a&&("calendar"===i?a.calendar_by&&s.push(a.calendar_by):"timeline"===i&&(a.timeline_by&&s.push(a.timeline_by),a.timeline_by_end&&s.push(a.timeline_by_end)));for(const l of t)for(const e of s)C().sO({environment:l.environment,store:l.getPropertyStore(e),value:void 0,transaction:r})}function $(e){const{dependency:t,collectionContextStore:n,environment:o,timelineState:r,isFullScreen:i,isRootChild:a}=e,s=(0,V()._e)(n),l=n.collectionStore();if(!s||!l)return;const{property:c}=s,{store:d,relationPointer:u}=t,p=d.getSchema()[c];p&&"relation"===p.type&&(I().createAndCommit({userAction:"CollectionTimelineDependenciesOverlay.handleRemoveRelation",environment:o,canUndo:!0,perform:e=>{v().Bl({environment:o,propertyWithInverse:s,sourceStore:d,destStore:L().G.createChildStore(d,u),transaction:e}),m().rv({environment:o,block_id:u.id,property:c,property_type:p.type,from:"timeline",collectionContextStore:n,isFromBulkActionsToolbar:!1,isUnthrottled:!0})}}),(0,R().lf)(o,{...(0,P().Pn)(n),...(0,R().Ii)({environment:o,collectionContextStore:n,timelineState:r,isFullScreen:i,isRootChild:a}),dependenciesPropertyID:c,blockedByStoreID:d.id,blockingStoreID:u.id}))}function q(e){const{collectionViewStore:t,newProperty:n,transaction:o}=e;h().FH({stores:[t],update:{timeline_arrows_by:{property:n}},transaction:o})}function G(e){var t;const{collectionContextStore:n,relationPropertyId:o,transaction:r}=e,i=n.collectionStore();if(!i)return;const l=o?i.getSchema()[o]:void 0,c="relation"===(null==l?void 0:l.type)&&l.property&&"relation"===(null===(t=i.getSchema()[l.property])||void 0===t?void 0:t.type)?l.property:void 0;h().FH({stores:[i],update:{collection_default_arrows_by:o,...i.getFormat().app_config_uri===s().iS?{app_uri_map:{...i.getFormat().app_uri_map?i.getFormat().app_uri_map:{},[a().Es.BlockingRelation]:o,[a().Es.BlockedRelation]:c}}:{}},transaction:r})}function Q(e){const{environment:t,transaction:n,date:o,parentStore:r,query:a,schema:s,isFullScreen:l,groupFormat:c,canEditTimelineItems:d,collectionContextStore:u,from:p}=e;if(!(0,A().ww)(t))return;const m=c?[c]:[],g=u.groupsStore.getGroupState(m);if(!g)return;if(r)return function(e){const{environment:t,transaction:n,date:o,store:r,parentStore:a,query:s,schema:l,groupFormat:c,canEditTimelineItems:d,collectionContextStore:u,subitemPath:p}=e;if(!r||!a)return;const m=c?[c]:[],g=y().yk({environment:t,collectionContextStore:u,groupsPointer:m,store:r,before:!1,collectionStore:a,transaction:n,subitemPath:p,subitemInsertDirection:"into"});if(g){if(E({environment:t,store:g,query:s,schema:l,date:o,transaction:n}),t.device.isMobile)b()._c({environment:t,store:g,pageVisitSource:i().tY.Create});else if(g&&d){const e=g.getBlockTitleStore();x().setSelectionAtStart({store:e})}return g}}(e);u.searchQueryStore.state&&k().Ug({searchQuery:"",collectionContextStore:u,isFullScreen:l});const f=y().IW({environment:t,collectionContextStore:u,groupsPointer:m,shouldCoerce:!0,templateStore:u.defaultPageTemplateStore.state,transaction:n,from:{createBlock:p},inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache});if(!f)return;const h=f.coercionSucceeded,S=f.newStore;if(E({environment:t,store:S,query:a,schema:s,date:o,transaction:n}),t.device.isMobile)b()._c({environment:t,store:S,pageVisitSource:i().tY.Create});else if(h&&d){const e=S.getBlockTitleStore();x().setSelectionAtEnd({store:e})}else _().CH({environment:t,store:S,peekMode:(0,T().kr)(u),resultsStore:null==g?void 0:g.resultsStore,collectionContextStore:u,pageVisitSource:i().tY.Create});return S}},645843:(e,t,n)=>{n.d(t,{Al:()=>l,CB:()=>c,H6:()=>s,Ii:()=>y,LE:()=>p,gw:()=>d,iR:()=>i,lf:()=>m,ne:()=>u,zI:()=>a});n(267602),n(653476);var o=()=>n(594546),r=()=>n(701182);function i(e,t){o().lu(e,"timeline_view","timeline_view",5,t)}function a(e,t){o().K4(e,"timeline_zoom_level_update",t)}function s(e,t){o().K4(e,"timeline_today_click",t)}function l(e,t){o().K4(e,"timeline_shift_time_click",t)}function c(e,t){o().K4(e,"timeline_toggle_table_click",t)}function d(e,t){o().K4(e,"timeline_item_scroll_arrow_click",t)}function u(e,t){o().K4(e,"timeline_item_resize",t)}function p(e,t){o().K4(e,"timeline_dependency_arrow_add",t)}function m(e,t){o().K4(e,"timeline_dependency_arrow_delete",t)}function y(e){const{environment:t,collectionContextStore:n,timelineState:o,isFullScreen:i,isRootChild:a}=e,s=o.zoomLevel.state,l=n.normalizedFormatStore.state,c=(0,r().C1)({environment:t,format:l,isFullScreen:i,isRootChild:a}),d=c&&l.timeline_table_properties?l.timeline_table_properties.length:0,u=l.timeline_properties||[],p=u.filter((e=>"title"!==e.property));return{zoom_level:s,show_table:c,show_table_properties_count:d,show_timeline_title:u.length!==p.length,show_timeline_properties_count:p.length}}},388573:(e,t,n)=>{n.d(t,{DF:()=>k,Ri:()=>j,Xi:()=>M,YF:()=>T,Zo:()=>L,bh:()=>P});n(670560),n(122556),n(582845),n(250570),n(533019),n(721473),n(788208),n(22624),n(267602),n(653476),n(30005);var o=()=>n(492788),r=()=>n(279865),i=()=>n(26970),a=()=>n(513670),s=()=>n(248825),l=()=>n(799454),c=()=>n(282662),d=()=>n(636340),u=()=>n(844085),p=()=>n(203927),m=()=>n(970105),y=()=>n(269299),g=()=>n(109757),f=()=>n(852465),h=()=>n(505462),S=()=>n(826955),v=()=>n(781022),b=()=>n(600785),_=()=>n(596308),w=()=>n(52566),C=()=>n(354988),x=()=>n(433908),I=()=>n(533492);function k(e){var t,n;const{environment:o,store:i,text:a,files:l,transaction:c,discussionLocation:d,property_id:u,blockStore:p}=e,y=f().GP(i);if(!y)return;const{filesToCreate:g,fileStoresToDelete:h}=function(e,t){const n=[],o=new Set;t.forEach((e=>{"local"===e.type&&e.file instanceof File?n.push(e.file):o.add(e.id)}));const r=f().le(e),i=r.filter((e=>e.getAlive()&&!o.has(e.id)));return{filesToCreate:n,fileStoresToDelete:i}}(i,l);L({commentStore:i,fileBlocks:h,transaction:c}),(0,C().J)({commentStore:i,files:g,environment:o,transaction:c});const S=f().zP(i);m().sO({environment:o,store:S,value:a,transaction:c}),(0,I().Q)(i,c);const b=null==i||null===(t=i.getParentStore())||void 0===t?void 0:t.getParentStore(),w=r().B7.includes(d),x=null==y||null===(n=y.getParentStore())||void 0===n?void 0:n.getNavigableBlockStore(),{property_type:k,collection_id:T,collection_view_id:P,view_type:M,collection_view_block_id:j}=(0,_().o)(u,p);s().zd(o,{from:d,comment_id:i.id,discussion_id:y.id,discussion_type:y.getType(),parent_block_id:y.getParentId(),parent_collection_id:null==b?void 0:b.getParentCollectionIdUpToTwoLevels(),...w&&{inbox_session_id:v().default.state.sessionId,notification_page_id:null==x?void 0:x.id},property_type:k,collection_id:T,collection_view_id:P,view_type:M,collection_view_block_id:j})}function T(e){var t,n;const{environment:o,commentStore:i,transaction:a,discussionLocation:l}=e,c=f().GP(i);if(!c)return;const u=f().ak(c),p=u.getValue();if(!p)return;L({commentStore:i,fileBlocks:f().le(i),transaction:a}),d().sW({store:i,transaction:a,data:{alive:!1}}),y().applyOperation({store:u,operation:{pointer:u.pointer,path:u.path,command:"listRemove",args:{id:i.id}},transaction:a}),(0===p.length||1===p.length&&p[0]===i.id)&&(0,x().d)({environment:o,discussionStore:c,transaction:a}),(0,I().Q)(i,a);const m=r().B7.includes(l),g=null==c||null===(t=c.getParentStore())||void 0===t?void 0:t.getNavigableBlockStore();s().k$(o,{from:e.discussionLocation,discussion_id:c.id,discussion_type:c.getType(),comment_id:i.id,parent_block_id:c.getParentId(),parent_collection_id:null===(n=c.getParentStore())||void 0===n?void 0:n.getParentCollectionIdUpToTwoLevels(),...m&&{inbox_session_id:v().default.state.sessionId,notification_page_id:null==g?void 0:g.id}})}function P(e){var t,n;const{environment:o,commentStore:i,discussionStore:a,transaction:l,discussionLocation:c}=e;d().sW({store:a,data:{resolved:!1},transaction:l});const u=r().B7.includes(c),p=null==a||null===(t=a.getParentStore())||void 0===t?void 0:t.getNavigableBlockStore();s().SU(o,{comment_id:i.id,discussion_id:a.id,from:e.discussionLocation,parent_block_id:a.getParentId(),parent_collection_id:null===(n=a.getParentStore())||void 0===n?void 0:n.getAssociatedCollectionId(),...u&&{inbox_session_id:v().default.state.sessionId,notification_page_id:null==p?void 0:p.id}})}function M(e){var t,n;const{environment:o,discussionStore:i,textValue:l,transaction:c,files:d,property_id:u,blockStore:p}=e,{id:m}=o.currentUser;if(!m)return;const y=g().dm(d);if(a().Xy(l,[])&&0===y.length)return;const f=(0,w().X)({discussionStore:i,text:l,files:y,environment:o,transaction:c}),h=r().B7.includes(e.discussionLocation),S=null===(t=i.getParentStore())||void 0===t?void 0:t.getNavigableBlockStore(),{property_type:b,collection_id:C,collection_view_id:x,view_type:I,collection_view_block_id:k}=(0,_().o)(u,p);s().d2(o,{from:e.discussionLocation,comment_id:f.id,discussion_id:i.id,discussion_type:i.getType(),parent_block_id:i.getParentId(),parent_collection_id:null==i||null===(n=i.getParentStore())||void 0===n?void 0:n.getParentCollectionIdUpToTwoLevels(),...h&&{inbox_session_id:v().default.state.sessionId,notification_page_id:null==S?void 0:S.id},property_type:b,collection_id:C,collection_view_id:x,view_type:I,collection_view_block_id:k})}function L(e){const{commentStore:t,fileBlocks:n,transaction:o}=e,r=f().ig(t);n.forEach((e=>{d().sW({store:e,data:{alive:!1},transaction:o}),c().Od({parentStore:r,childToRemoveStore:e,transaction:o})}))}async function j(e){var t;let{discussionStore:n,currentBlockStore:r,environment:a,analyticsFrom:s,currentEl:c}=e;if(!r)return null;if(!n.isDefined())return;function d(e){const t=(0,b().L)({discussionId:n.id,blockId:e});if(!t)return;const o=document.getElementsByClassName((0,i().dk)({discussionId:n.id}))[0];return o?u().bx({element:o,scrollerContext:t.getScrollerContext(),vertical:{reveal:"top"},horizontal:{reveal:"closest"},animate:!0}):u().XW({handle:t,vertical:{reveal:"top"},horizontal:{reveal:"closest"},animate:!0}),t.displaySelectionHalo(750),t}const m=(null===(t=n.getRecordStoreUIParent())||void 0===t?void 0:t.id)??n.getParentId();d(m)||(await p().Nz(r,[m]),await o().default.afterNextFlush(),d(m));const y=S().G.createChildStore(r,n.getParentPointer()),g=h().get(),f=null==g?void 0:g.commonAncestorContainer,v=!(null!=g&&g.collapsed)&&f&&(c===f||(null==c?void 0:c.contains(f)));l().Ib({environment:a,blockStore:y||r,analyticsFrom:s,discussionIds:[n.id],shouldFocusDiscussion:!v,recursivelyLoadAllDiscussions:!1})}},857739:(e,t,n)=>{n.d(t,{o:()=>P,Z:()=>x});n(267602),n(653476),n(470928),n(241792),n(228244),n(667294);var o=()=>n(219727),r=()=>n(788860),i=()=>n(568017),a=()=>n(513670),s=()=>n(250303),l=()=>n(446955),c=()=>n(949842),d=()=>n(352230),u=n(785893);const p=(0,n(827282).IU)("collectionDeleteRule",{viewBox:"0 0 14 14",svg:(0,u.jsx)("path",{d:"M12 3.27273L10.7273 2L7 5.72727L3.27273 2L2 3.27273L5.72727 7L2 10.7273L3.27273 12L7 8.27273L10.7273 12L12 10.7273L8.27273 7L12 3.27273Z"})});var m=()=>n(739479),y=()=>n(882292),g=()=>n(696768),f=()=>n(827973),h=()=>n(119891),S=()=>n(1910),v=()=>n(18748),b=()=>n(967092),_=()=>n(388284),w=()=>n(654133);const C=(0,r().vU)({inputPlaceholder:{defaultMessage:"Search for a propertyâ€¦",id:"database.viewSettings.collectionSortMenu.inputPlaceholder"},deleteButtonTooltip:{defaultMessage:"Remove sort rule",id:"database.sortMenu.deleteButtonTooltip"}});const x=function(e){let{schema:t,format:i,sorts:a,showDeleteAll:c,disabled:p,parentStore:y,collectionContextStore:g,onChange:f,onDeleteAll:h}=e;const S=(0,o().O7)(),{device:v}=S,w=!!Object.keys(t).some((e=>!a.find((t=>t.property===e)))),x=c&&a.length>0;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(L,{sorts:a,schema:t,disabled:p,parentStore:y,collectionContextStore:g,onChange:f}),(w||x)&&(0,u.jsxs)(_().Z,{children:[w&&(0,u.jsx)(n(448419).ZP,{popupType:v.isMobile?b().kQ.SlideUp:b().kQ.Popup,renderOrigin:e=>(0,u.jsx)(l().Z,{icon:n(521777).R,isGray:!0,title:(0,u.jsx)(r()._H,{id:"database.viewSettings.sortTab.newSort",defaultMessage:"Add sort"}),...e}),render:e=>{let o;return o=v.isMobile?{menuType:d().o.ActionSheet}:{menuType:d().o.Popup,width:280,height:287},(0,u.jsx)(n(198829).Z,{...o,children:(0,u.jsx)(n(949719).Z,{schema:t,format:i,getProperties:()=>Object.entries(t).filter((e=>{let[t,o]=e;return!a.find((e=>e.property===t))&&(0,n(532850).bA)(o)})).map((e=>{let[t]=e;return t})),onAccept:n=>{!function(e,t,n,o,r,i){var a;if(!e)return;const l=null===(a=n[e])||void 0===a?void 0:a.type,c=[...o,{property:e,direction:"ascending"}];r(c),s().wd({environment:t,action:"create_sort_accept",collectionContextStore:i,property_type:l})}(n,S,t,a,f,g),e.close()},inputPlaceholder:n(527278).Z.formatMessage(C.inputPlaceholder)})})}}),x&&(0,u.jsx)(l().Z,{icon:m().y,isRed:!0,isGray:!0,title:(0,u.jsx)(r()._H,{id:"database.viewSettings.sortTab.deleteAllSorts",defaultMessage:"Delete sort"}),onClick:()=>function(e,t,n,o){t([]),null==o||o(),s().wd({environment:e,action:"delete_all_sorts",collectionContextStore:n})}(S,f,g,h)})]})]})};function I(e,t,n,o,r,i){o(r.map(((n,o)=>o===e?t:n))),s().wd({environment:n,collectionContextStore:i,action:"update_sort"})}function k(e,t,n,o,r){n(o.filter(((t,n)=>n!==e))),s().wd({environment:t,action:"delete_sort",collectionContextStore:r})}function T(e){let{index:t,onChange:n,sorts:a,collectionContextStore:s}=e;const l=(0,o().O7)();return(0,u.jsx)(f().Z,{title:(0,u.jsx)("div",{style:{color:i().ZP.red},children:(0,u.jsx)(r()._H,{defaultMessage:"Delete",id:"database.viewSettings.sortTab.mobileDeleteButtonTitle"})}),icon:(0,u.jsx)(y().Z,{icon:m().y,styles:{color:i().ZP.red}}),onClick:()=>k(t,l,n,a,s),focused:!1})}function P(e){let{onDeleteClick:t}=e;const n=(0,r().YB)();return(0,u.jsx)(w().Z,{render:e=>(0,u.jsx)(S().Z,{ariaLabel:n.formatMessage(C.deleteButtonTooltip),icon:p,onClick:t,style:{marginRight:-6},...e}),renderTooltip:()=>n.formatMessage(C.deleteButtonTooltip)})}function M(e){let{sort:t,index:n,schema:r,disabled:i,parentStore:a,collectionContextStore:s,onChange:l,sorts:d}=e;const p=(0,o().O7)(),{device:m}=p;return m.isMobile?(0,u.jsxs)(_().Z,{children:[(0,u.jsx)(g().ZP,{index:n,sort:t,schema:r,parentStore:a,collectionContextStore:s,onChange:(e,t)=>I(e,t,p,l,d,s)}),!i&&(0,u.jsx)(T,{onChange:l,sorts:d,collectionContextStore:s,index:n})]}):(0,u.jsx)(_().Z,{extraTopPadding:!0,desktopStyle:{padding:"8px 0 0 8px",width:"100%"},children:(0,u.jsx)(v().ZP,{showDragHandle:!m.isMobile&&!i,title:(0,u.jsx)("div",{style:{display:"flex",alignItems:"center",flexGrow:1,whiteSpace:"nowrap"},onMouseDown:c().$0,children:(0,u.jsx)(g().ZP,{index:n,sort:t,schema:r,parentStore:a,collectionContextStore:s,onChange:(e,t)=>I(e,t,p,l,d,s)})}),right:!i&&(0,u.jsx)(P,{onDeleteClick:()=>k(n,p,l,d,s)}),rightStyle:{marginRight:19}})})}function L(e){let{sorts:t,schema:n,disabled:r,parentStore:i,collectionContextStore:l,onChange:c}=e;const d=(0,o().O7)(),{device:p}=d;if(p.isMobile)return(0,u.jsx)(u.Fragment,{children:t.map(((e,o)=>(0,u.jsx)(M,{schema:n,disabled:r,parentStore:i,collectionContextStore:l,onChange:c,sorts:t,sort:e,index:o},o)))});{const e=t.map(((e,t)=>t.toString()));return e.length>0?(0,u.jsx)("div",{style:{marginBottom:2},children:(0,u.jsx)(h().ZP,{direction:"vertical",keys:e,renderKey:e=>(0,u.jsx)(M,{schema:n,disabled:r,parentStore:i,collectionContextStore:l,onChange:c,sorts:t,sort:t[parseInt(e)],index:parseInt(e)}),onDrop:e=>function(e,t,n,o,r){n(a().oA(e.map((e=>o[parseInt(e)])))),s().wd({environment:t,action:"reorder_sorts",collectionContextStore:r})}(e,d,c,t,l)})}):null}}},696768:(e,t,n)=>{n.d(t,{G8:()=>S,OI:()=>v,ZP:()=>h});var o=n(667294),r=()=>n(219727),i=()=>n(532850),a=()=>n(943181),s=()=>n(788860),l=()=>n(491927),c=()=>n(250303),d=()=>n(827973),u=()=>n(448419),p=()=>n(397540),m=()=>n(360197),y=()=>n(960647),g=()=>n(697475),f=n(785893);const h=function(e){let{schema:t,sort:n,disabled:r,onChange:i,index:a,collectionViewType:s,collectionContextStore:l}=e;const c=t[n.property];return c?(0,f.jsxs)(o.Fragment,{children:[(0,f.jsx)(_,{disabled:r,schema:t,sort:n,onChange:i,index:a,collectionViewType:s,collectionContextStore:l,propertySchema:c}),(0,f.jsx)(b,{sort:n,index:a,onChange:i,collectionViewType:s,collectionContextStore:l,disabled:r})]}):null},S={ascending:(0,f.jsx)(s()._H,{defaultMessage:"Ascending",id:"collectionSortMenuRow.sortDirectionSelectMenu.ascending"}),descending:(0,f.jsx)(s()._H,{defaultMessage:"Descending",id:"collectionSortMenuRow.sortDirectionSelectMenu.descending"})},v=(0,s().vU)({menuTitle:{id:"collectionSortMenuRow.sortDirectionSelectMenu.title",defaultMessage:"Sort"},emptyPlaceholder:{id:"collectionSortMenuRow.sortDirectionSelectMenu.placeholder",defaultMessage:"Empty"}});function b(e){let{sort:t,index:n,onChange:o,collectionViewType:i,collectionContextStore:u,disabled:m}=e;const g=(0,r().O7)(),h=(0,s().YB)(),b=t.direction,_={menuTitle:h.formatMessage(v.menuTitle),items:[...a().C6],getKey:e=>e,selectedItem:b,disabled:m,onSelect:e=>{const r={...t,direction:e};o(n,r),u?c().wd({environment:g,action:"set_sort_direction",collectionContextStore:u}):i&&l().wd(g,{view_type:i,action:"set_sort_direction"})},renderItem:e=>(0,f.jsx)(d().Z,{title:S[e.value],...e}),renderOrigin:e=>(0,f.jsx)(y().Z,{...e,placeholder:h.formatMessage(v.emptyPlaceholder),title:b&&S[b],disabled:m,desktopStyle:{opacity:1}})};return(0,f.jsx)(p().Z,{..._,mobileActionSheet:!0},"direction")}function _(e){let{propertySchema:t,disabled:n,schema:o,sort:a,onChange:s,index:d,collectionViewType:p,collectionContextStore:y}=e;const h=(0,r().O7)(),{device:S}=h;return(0,f.jsx)(u().ZP,{popupType:S.isMobile?u().Z4.SlideUp:u().Z4.Popup,renderOrigin:e=>(0,f.jsx)(g().Z,{...e,propertySchema:t,disabled:n,textWrapperStyle:{opacity:1}}),render:e=>(0,f.jsx)(m().Z,{isRelationProperty:!1,schema:o,onAccept:e=>function(e,t,n,o,r,i,a){o(r,{...n,property:e}),a?c().wd({environment:t,action:"set_sort_property",collectionContextStore:a}):i&&l().wd(t,{view_type:i,action:"set_sort_property"})}(e,h,a,s,d,p,y),onClose:e.close,allowProperty:i().bA}),disabled:n})}},12530:(e,t,n)=>{n.d(t,{N:()=>i,Z:()=>s});n(667294);var o=n(785893);const r={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:16,height:16,fontSize:10,textAlign:"center",fontWeight:n(707513).Ue.semibold,borderRadius:4,color:n(568017).ZP.white,position:"static",marginLeft:6,WebkitFontSmoothing:"auto"};let i=function(e){return e[e.Red=0]="Red",e[e.Gray=1]="Gray",e}({});function a(e){return!!e&&e>0}const s=function(e){let{count:t,color:s,style:c,numberStyle:d,fadeIn:u}=e;const p=s===i.Red,m=(0,n(846550).yK)((e=>({badge:{...r,...c,...(t??0)>99&&{width:void 0,padding:2},background:p?e.redBadgeBackground:e.lightIconColor,...u&&{transition:"opacity 0.1s",opacity:a(t)?1:0}}})),[t,u,p,c]);return u||a(t)?(0,o.jsx)("div",{style:m.badge,children:(0,o.jsx)(l,{count:t,numberStyle:d})}):null};function l(e){let{count:t,numberStyle:n}=e;return t?1===t?(0,o.jsx)("span",{style:{marginLeft:-.5,...n},children:"1"}):t>99?(0,o.jsx)("span",{style:{letterSpacing:-.5,...n},children:"99+"}):t>9?(0,o.jsx)("span",{style:{letterSpacing:-.5,marginLeft:-.5,...n},children:t}):(0,o.jsx)("span",{style:{...n},children:t}):null}},951877:(e,t,n)=>{n.d(t,{L:()=>c,N:()=>d});n(667294);var o=()=>n(219727),r=()=>n(846550),i=()=>n(766933),a=()=>n(270315),s=()=>n(827973),l=n(785893);let c=function(e){return e[e.Name=0]="Name",e[e.Type=1]="Type",e}({});function d(e){const{propertySchema:t,format:n,locked:d}=e,u=(0,r().Fg)(),p=(0,o().O7)(),{name:m,type:y,icon:g}=t,f=n===c.Name?m:a().SO[y];return(0,l.jsx)(s().Z,{title:f,icon:(0,l.jsx)(i().ZP,{icon:g,type:y,size:p.device.isMobile?18:16,theme:u,style:{fill:u.regularIconColor,marginLeft:6,marginRight:2}}),disabled:d,...e})}},360197:(e,t,n)=>{n.d(t,{Z:()=>y});n(267602),n(653476),n(241792),n(228244);var o=n.n(n(443261)),r=(n(667294),()=>n(142735)),i=()=>n(226413),a=()=>n(532850),s=()=>n(788860),l=()=>n(513670),c=()=>n(352230),d=()=>n(255577),u=()=>n(388284),p=()=>n(951877),m=n(785893);const y=function(e){let{selectedProperty:t,onAccept:y,schema:g,onClose:f,allowProperty:h,isRelationProperty:S}=e;const v=(0,n(219727).O7)(),b=(0,s().YB)(),_=(0,r().qz)(void 0,n(718798).Z);let w=Object.keys(g);const C=w.some(n(15607).w);w=l().MR(w,(e=>{const t=(0,a().Qm)({schema:g,property:e});return t?t.name:""}));const x=C?i().bf:i().iw;w=l().zu(w,x),w.unshift(x);const I=(0,r().VK)((()=>_.state.inputValue),[_]);if(h&&(w=w.filter((e=>{const t=(0,a().Qm)({schema:g,property:e});return t&&h(t)}))),I){let e=w.map((e=>{const t=(0,a().Qm)({schema:g,property:e});return t&&t.name}));e=o().filter(I,e).map((e=>{let{original:t}=e;return t})),w=w.filter((t=>{const n=(0,a().Qm)({schema:g,property:t});return n&&n.name&&e.includes(n.name)}))}const k=I||w.length>n(347577).nt,T=l().oA(w.map((e=>{const n=(0,a().Qm)({schema:g,property:e});if(!n)return null;return{key:e,render:o=>(0,m.jsx)(p().N,{...o,propertySchema:n,format:p().L.Name,checkState:e===t}),action:()=>y(e)}}))),P=[{key:0,render:e=>(0,m.jsx)(u().Z,{...e}),items:T}],{device:M}=v,L=k?(0,m.jsx)(u().Z,{isInput:!0,children:(0,m.jsx)(n(740046).ZP,{focus:!M.isMobile||void 0,focusAfterAnimation:!0,value:I,onChange:e=>_.setState({focus:!0,inputValue:e.target.value}),placeholder:S?b.formatMessage({defaultMessage:"Search for a relation propertyâ€¦",id:"propertySelectMenu.searchForProperty.relation.placeholder"}):b.formatMessage({defaultMessage:"Search for a propertyâ€¦",id:"propertySelectMenu.searchForProperty.default.placeholder"})})}):null;let j;return j=M.isMobile?{menuType:c().o.Modal,title:S?b.formatMessage({defaultMessage:"Relation property",id:"propertySelectMenu.mobileMenu.relationProperty.header"}):b.formatMessage({defaultMessage:"Property",id:"propertySelectMenu.mobileMenu.property.header"}),right:(0,m.jsx)(n(470386).CancelMenuText,{}),onClickRight:f,header:L}:{menuType:c().o.Popup,width:280,maxHeight:480,header:L},(0,m.jsx)(n(198829).Z,{...j,children:0===T.length?(0,m.jsx)(u().Z,{children:(0,m.jsx)(n(838367).Z,{title:(0,m.jsx)(s()._H,{defaultMessage:"No results",id:"propertySelectMenu.search.noResults.title"})})}):(0,m.jsx)(d().Z,{type:d().i.Vertical,sections:P,onAccept:f,initialFocus:I.length>0?0:void 0})})}},697475:(e,t,n)=>{n.d(t,{Z:()=>a});n(667294);var o=()=>n(788860),r=()=>n(951877),i=n(785893);const a=function(e){const t=(0,n(219727).O7)(),{device:a}=t;if(a.isMobile)return e.propertySchema?(0,i.jsx)(r().N,{propertySchema:e.propertySchema,onClick:e.onClick,focused:!1,format:r().L.Name,showExtensionArrow:!e.disabled}):(0,i.jsx)(n(827973).Z,{focused:!1,title:(0,i.jsx)(o()._H,{defaultMessage:"Property",id:"database.mobileFilterAndSortMenu.property.buttonMenuItem.label"})});{const t=e.propertySchema&&(0,i.jsx)(n(899316).ZP,{propertySchema:e.propertySchema,showIcon:!0,style:{lineHeight:1.4}}),r=(0,i.jsx)(o()._H,{defaultMessage:"Property",id:"database.filterAndSortMenu.propertyButton.label"});return(0,i.jsx)(n(960647).Z,{title:t,placeholder:r,onClick:e.onClick,disabled:e.disabled,disableMargins:e.disableMargins,desktopStyle:e.textWrapperStyle})}}},972544:(e,t,n)=>{n.d(t,{S:()=>i,Z:()=>s});var o=n(667294),r=n(785893);const i=8;function a(e,t){let{isSelected:o}=e;const{radioButtonStyle:a,dotStyle:s}=(0,n(846550).yK)((e=>({radioButtonStyle:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:16,height:16,borderRadius:16,marginRight:i,background:o?e.blueColor:e.whiteButtonBackground,border:o?"none":`1px solid ${e.radioButtonBorder}`,transition:"background 100ms ease-out"},dotStyle:{width:6,height:6,borderRadius:6,background:e.regularInvertedTextColor,transition:"opacity 100ms ease-out",opacity:o?1:0}})),[o]);return(0,r.jsx)("div",{ref:t,style:a,children:(0,r.jsx)("div",{style:s})})}const s=o.forwardRef(a)},986286:(e,t,n)=>{n.d(t,{FW:()=>l,Pe:()=>d,Re:()=>u,Rs:()=>p,YW:()=>s,ht:()=>m,lM:()=>c,rM:()=>y,vK:()=>a,yY:()=>g});var o=()=>n(677559);const r={JiraSyncInfoPopup:new(o().Ss)("JiraSyncInfoPopup",(async()=>await Promise.all([n.e(52774),n.e(57023)]).then(n.bind(n,453110)))),ImproveJiraSyncPopup:new(o().Ss)("ImproveJiraSyncPopup",(async()=>await Promise.all([n.e(52774),n.e(81263)]).then(n.bind(n,931329)))),JiraDCAuthModal:new(o().Ss)("JiraDCAuthModal",(async()=>await n.e(40205).then(n.bind(n,253458)))),ExternalImportAndSyncIndicator:new(o().Ss)("ExternalImportAndSyncIndicator",(async()=>await n.e(47433).then(n.bind(n,635604)))),JiraSyncedAllProjectsTooltip:new(o().Ss)("JiraSyncedAllProjectsTooltip",(async()=>await Promise.all([n.e(62743),n.e(75433)]).then(n.bind(n,205959)))),JiraSyncedAllIssuesTooltip:new(o().Ss)("JiraSyncedAllIssuesTooltip",(async()=>await Promise.all([n.e(62743),n.e(75433)]).then(n.bind(n,205959)))),JiraSyncedDatabaseViewsAndFiltersTooltip:new(o().Ss)("JiraSyncedDatabaseViewsAndFiltersTooltip",(async()=>await Promise.all([n.e(62743),n.e(75433)]).then(n.bind(n,205959)))),JiraSyncSourceTooltip:new(o().Ss)("JiraSyncSourceTooltip",(async()=>await Promise.all([n.e(62743),n.e(75433)]).then(n.bind(n,205959)))),JiraSyncedSettingsToSetupProjectsAndIssuesTooltip:new(o().Ss)("JiraSyncedSettingsToSetupProjectsAndIssuesTooltip",(async()=>await Promise.all([n.e(62743),n.e(75433)]).then(n.bind(n,205959))))},i={JiraSyncTeamSpaceModal:new(o().Ss)("JiraSyncTeamSpaceModal",(async()=>Promise.all([n.e(62743),n.e(94568)]).then(n.bind(n,860619))))},a=(0,o().kF)(i.JiraSyncTeamSpaceModal,(e=>e.default)),s=(0,o().kF)(r.JiraSyncedAllProjectsTooltip,(e=>e.JiraSyncedAllProjectsTooltip)),l=(0,o().kF)(r.JiraDCAuthModal,(e=>e.default)),c=(0,o().kF)(r.JiraSyncedAllIssuesTooltip,(e=>e.JiraSyncedAllIssuesTooltip)),d=(0,o().kF)(r.JiraSyncedDatabaseViewsAndFiltersTooltip,(e=>e.JiraSyncedDatabaseViewsAndFiltersTooltip)),u=(0,o().kF)(r.JiraSyncedSettingsToSetupProjectsAndIssuesTooltip,(e=>e.JiraSyncedSettingsToSetupProjectsAndIssuesTooltip)),p=(0,o().kF)(r.JiraSyncSourceTooltip,(e=>e.JiraSyncSourceTooltip)),m=(0,o().kF)(r.JiraSyncInfoPopup,(e=>e.JiraSyncInfoPopup)),y=(0,o().kF)(r.ImproveJiraSyncPopup,(e=>e.ImproveJiraSyncPopup)),g=(0,o().kF)(r.ExternalImportAndSyncIndicator,(e=>e.ExternalImportAndSyncIndicator));(0,n(827282).CZ)("jira",{default:{loader:()=>n.e(7061).then(n.bind(n,207061)),size:20},small:{loader:()=>n.e(7061).then(n.bind(n,207061)),size:16},mini:{loader:()=>n.e(7061).then(n.bind(n,207061)),size:14},large:{loader:()=>n.e(7061).then(n.bind(n,207061)),size:24}})},442531:(e,t,n)=>{n.d(t,{HZ:()=>r,YD:()=>a,_7:()=>i,io:()=>o});const o=new(n(677559).Ss)("framer-motion",(async()=>await Promise.all([n.e(37358),n.e(7312),n.e(70355),n.e(99464)]).then(n.bind(n,524138))));function r(e){return e.useAnimate()}function i(e){return e.useAnimation()}function a(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return e.useInView(...n)}},244303:(e,t,n)=>{n.d(t,{a:()=>l});n(667294);var o=()=>n(816512),r=()=>n(696459),i=()=>n(634760),a=()=>n(981583),s=n(785893);function l(e){const{actor:t}=e,n={size:e.size??14,style:{marginRight:2,...e.style}};return(0,o().YU)(t)?(0,s.jsx)(i().Z,{botValue:t.asActor,...n}):(0,o().$S)(t)?(0,s.jsx)(a().Z,{userValue:t.asActor,...n}):(0,o().Iq)(t)?(0,s.jsx)(a().Z,{userValue:void 0,...n}):void(0,r().t1)(t)}},352701:(e,t,n)=>{n.d(t,{n:()=>p});n(670560),n(267602),n(470928);var o=()=>n(459264),r=()=>n(926724),i=()=>n(714230),a=()=>n(235484),s=()=>n(253335),l=()=>n(749826),c=()=>n(138912),d=()=>n(338855);const u=[a().U9,a().f3,a().mQ,a().Dv,a().Nw,a().nO];function p(e,t){if(!e)return[];const n=l().default.checkGate({gateName:"cron_connected_relation"}),p=l().default.checkGate({gateName:"connected_relation"}),m=l().default.checkGate({gateName:"slack_connected_relation"}),y=l().default.checkGate({gateName:"salesforce_connected_relation_database_actions_enabled"}),g=e.getDatabaseType()===r().Ym,f=c().default.state;if(!f.loaded)return[];const h=f.integrations,S={};if(!g){const e=h.find((e=>e.id===a().U9)),t=(0,s().GT)();var v;if(e)S[t.name]={name:t.name,pattern:o().x,integration:e,tooltipImage:{img:i().Z.images.tooltips.properties.githubSyncPullStatusPng,scale:.5},description:t.description,canOnlyAdminAuth:{disabledPropertyTooltipMessage:null===(v=t.canOnlyAdminAuth)||void 0===v?void 0:v.disabledPropertyTooltipMessage}}}const b=[];if(t&&(b.push(a().f3,a().mQ,a().Nw),m&&b.push(a().nO)),n&&b.push(a().Dv),b.forEach((e=>{const t=h.find((t=>t.id===e));if(null!=t&&t.info.original_url_patterns)for(const o of t.info.original_url_patterns){var n;null!==(n=o.additional_types)&&void 0!==n&&n.connectedRelation&&(S[o.name]||(S[o.name]={name:(0,d().ni)({pattern:o,integration:t}),pattern:o,integration:t}))}})),!p)return Object.values(S);for(const o of h)if(o.info.original_url_patterns&&t&&![...u,a().Ff].includes(o.id))for(const e of o.info.original_url_patterns){var _;null!==(_=e.additional_types)&&void 0!==_&&_.connectedRelation&&(S[e.name]||(o.id===a().aW&&y?S[o.name]={name:o.name,pattern:e,integration:o}:S[e.name]={name:(0,d().ni)({pattern:e,integration:o}),pattern:e,integration:o}))}return Object.values(S)}},228772:(e,t,n)=>{n.d(t,{r:()=>i});var o=()=>n(142735),r=()=>n(876822);function i(){return(0,o().VK)((()=>r().default.state.currentSpaceStore),[])}},728243:(e,t,n)=>{n.d(t,{Z:()=>d});n(267602),n(30005);var o=n(667294),r=()=>n(142735),i=()=>n(396035),a=()=>n(217465),s=()=>n(269299),l=()=>n(757590),c=()=>n(876822);function d(e){let{unpersistedInMemoryRecordCache:t}=e;const n=(0,r().VK)((()=>{var e;return null===(e=c().default.state.currentUserStore)||void 0===e?void 0:e.userId}),[]);return{createAndCommit:(0,o.useCallback)((e=>{let{perform:o}=e;const r=new(l().Y)({deadlockTimeoutMs:s().DEADLOCK_WARNING_TIMEOUT_MS}),c=o(r),d=a().RecordMap.create();r.stores.forEach((e=>{const t=e.getRecordModel(e.pointer);t&&d.addModel(t)})),(0,i().FS)({operations:r.operations,recordMap:d,updateOnly:!1});for(const i of d){const{model:e,pointer:o}=i;t.setModelAndRole({pointer:o,userId:n},e,"editor")}return t.emitAll(),{performResult:c,serverCommitResult:Promise.resolve()}}),[t,n])}}},753463:(e,t,n)=>{n.d(t,{$:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("arrowDownLine",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M13.2944 8.45459C13.2944 8.65967 13.217 8.84196 13.062 9.00146L8.55713 13.5132C8.48421 13.5907 8.39762 13.6499 8.29736 13.6909C8.20166 13.7319 8.10368 13.7524 8.00342 13.7524C7.8986 13.7524 7.79834 13.7319 7.70264 13.6909C7.60693 13.6499 7.52035 13.5907 7.44287 13.5132L2.93799 9.00146C2.78304 8.84196 2.70557 8.65967 2.70557 8.45459C2.70557 8.24495 2.77393 8.07178 2.91064 7.93506C3.04736 7.79834 3.21826 7.72998 3.42334 7.72998C3.52816 7.72998 3.62614 7.75049 3.71729 7.7915C3.80843 7.82796 3.88818 7.88037 3.95654 7.94873L5.5083 9.47998L7.7915 12.0229L7.3335 12.2485L7.25146 10.0132V1.52295C7.25146 1.3042 7.31982 1.12419 7.45654 0.98291C7.59782 0.841634 7.78011 0.770996 8.00342 0.770996C8.22217 0.770996 8.3999 0.841634 8.53662 0.98291C8.6779 1.12419 8.74854 1.3042 8.74854 1.52295V10.0132L8.6665 12.2485L8.21533 12.0229L10.4917 9.47998L12.0435 7.94873C12.1118 7.88037 12.1916 7.82796 12.2827 7.7915C12.3739 7.75049 12.4718 7.72998 12.5767 7.72998C12.7817 7.72998 12.9526 7.79834 13.0894 7.93506C13.2261 8.07178 13.2944 8.24495 13.2944 8.45459ZM13.2944 14.4839C13.2944 14.6981 13.2261 14.8758 13.0894 15.0171C12.9526 15.1584 12.7817 15.229 12.5767 15.229H3.43701C3.22282 15.229 3.04736 15.1584 2.91064 15.0171C2.77393 14.8758 2.70557 14.6981 2.70557 14.4839C2.70557 14.2743 2.77393 14.0988 2.91064 13.9575C3.04736 13.8208 3.22282 13.7524 3.43701 13.7524H12.5767C12.7817 13.7524 12.9526 13.8208 13.0894 13.9575C13.2261 14.0988 13.2944 14.2743 13.2944 14.4839Z"})})},660065:(e,t,n)=>{n.d(t,{r:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("arrowRightRounded",{viewBox:"0 0 16 13",svg:(0,o.jsx)("path",{d:"M15.3828 6.85156C15.3828 7.09635 15.2917 7.3099 15.1094 7.49219L9.95312 12.6328C9.77083 12.8099 9.5651 12.8984 9.33594 12.8984C9.09635 12.8984 8.89583 12.8203 8.73438 12.6641C8.57812 12.5078 8.5 12.3125 8.5 12.0781C8.5 11.9583 8.52083 11.8464 8.5625 11.7422C8.60938 11.638 8.67188 11.5469 8.75 11.4688L10.5 9.70312L13.4141 7.04688L13.6875 7.54688L10.9766 7.70312H1.48438C1.22396 7.70312 1.01302 7.625 0.851562 7.46875C0.695312 7.30729 0.617188 7.10156 0.617188 6.85156C0.617188 6.59635 0.695312 6.39062 0.851562 6.23438C1.01302 6.07292 1.22396 5.99219 1.48438 5.99219H10.9766L13.6875 6.15625L13.4141 6.66406L10.5 4L8.75 2.22656C8.67188 2.14844 8.60938 2.0599 8.5625 1.96094C8.52083 1.85677 8.5 1.74219 8.5 1.61719C8.5 1.38281 8.57812 1.1875 8.73438 1.03125C8.89583 0.875 9.09635 0.796875 9.33594 0.796875C9.45052 0.796875 9.5599 0.820312 9.66406 0.867188C9.76823 0.914062 9.86719 0.984375 9.96094 1.07812L15.1094 6.21094C15.2917 6.39323 15.3828 6.60677 15.3828 6.85156Z"})})},850790:(e,t,n)=>{n.d(t,{K:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("boltFilled",{svg:(0,o.jsx)("path",{d:"M0 12.117c0 .38.293.664.703.664h5.518l-2.91 7.91c-.381 1.006.664 1.543 1.318.723l8.877-11.094c.166-.205.254-.4.254-.625 0-.371-.293-.664-.703-.664H7.539l2.91-7.91C10.83.115 9.785-.422 9.131.408L.254 11.492c-.166.215-.254.41-.254.625z"}),viewBox:"0 0 14 22"})},77152:(e,t,n)=>{n.d(t,{k:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("collectionNumberType",{viewBox:"0 0 14 14",svg:(0,o.jsx)("path",{d:"M1.73457,9.90096 L1.73457,4.54339 L1.65064,4.54339 L0,5.68112 L0,4.37087 L1.73923,3.17252 L3.14274,3.17252 L3.14274,9.90096 L1.73457,9.90096 Z M3.59633,5.22882 C3.59633,3.90925 4.62215,3 6.0956,3 C7.52242,3 8.43633,3.82532 8.43633,4.96304 C8.43633,5.75106 8.09128,6.29195 6.97221,7.34108 L5.57337,8.64667 L5.57337,8.7306 L8.52959,8.7306 L8.52959,9.90096 L3.6756,9.90096 L3.6756,8.91711 L6.03498,6.66031 C6.87429,5.85364 7.05614,5.5459 7.05614,5.0936 C7.05614,4.55738 6.67379,4.13306 6.01633,4.13306 C5.3309,4.13306 4.90192,4.58536 4.90192,5.22882 L3.59633,5.22882 Z M10.4889,6.96805 L10.4889,5.93757 L11.3282,5.93757 C11.967,5.93757 12.4007,5.55988 12.4007,5.00967 C12.4007,4.50609 12.0043,4.12374 11.3469,4.12374 C10.6661,4.12374 10.2464,4.47345 10.1998,5.07495 L8.89888,5.07495 C8.94551,3.83464 9.90139,3 11.4168,3 C12.9089,3 13.7389,3.82532 13.7342,4.80917 C13.7296,5.62516 13.2166,6.16139 12.4939,6.33857 L12.4939,6.42717 C13.4311,6.56239 14,7.15923 14,8.05915 C14,9.23884 12.8903,10.0735 11.3702,10.0735 C9.8501,10.0735 8.81495,9.24351 8.75434,7.97056 L10.1019,7.97056 C10.1439,8.53942 10.6288,8.90312 11.3515,8.90312 C12.0649,8.90312 12.5639,8.51611 12.5639,7.93326 C12.5639,7.33642 12.0976,6.96805 11.3422,6.96805 L10.4889,6.96805 Z"})})},109806:(e,t,n)=>{n.d(t,{c:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("eye",{viewBox:"0 0 32 32",svg:(0,o.jsx)("path",{d:"M16.006 25.812c8.863 0 14.994-7.17 14.994-9.406C31 14.16 24.858 7 16.006 7 7.252 7 1 14.16 1 16.406c0 2.236 6.252 9.406 15.006 9.406zm0-3.242a6.194 6.194 0 01-6.197-6.164c-.012-3.452 2.744-6.164 6.197-6.164 3.419 0 6.185 2.711 6.185 6.164 0 3.364-2.766 6.164-6.185 6.164zm0-3.94c1.228 0 2.246-1.007 2.246-2.224 0-1.228-1.018-2.235-2.246-2.235-1.24 0-2.258 1.007-2.258 2.235 0 1.217 1.018 2.224 2.258 2.224z"})})},85876:(e,t,n)=>{n.d(t,{N:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("eyePadded",{viewBox:"0 0 24 24",svg:(0,o.jsx)("path",{d:"M12 17.9912C17.6055 17.9912 21.3857 13.4727 21.3857 12.0713C21.3857 10.6699 17.5986 6.1582 12 6.1582C6.47656 6.1582 2.60742 10.6699 2.60742 12.0713C2.60742 13.4727 6.46973 17.9912 12 17.9912ZM12 16.6787C7.63184 16.6787 4.15918 13.0283 4.15918 12.0713C4.15918 11.2715 7.63184 7.4707 12 7.4707C16.3613 7.4707 19.8408 11.2715 19.8408 12.0713C19.8408 13.0283 16.3613 16.6787 12 16.6787ZM12 15.7559C14.0508 15.7559 15.6914 14.0811 15.6914 12.0713C15.6914 10.0137 14.0508 8.39355 12 8.39355C9.94238 8.39355 8.29492 10.0137 8.30176 12.0713C8.31543 14.0811 9.94238 15.7559 12 15.7559ZM12 13.2607C11.3369 13.2607 10.7969 12.7275 10.7969 12.0713C10.7969 11.415 11.3369 10.8818 12 10.8818C12.6631 10.8818 13.1963 11.415 13.1963 12.0713C13.1963 12.7275 12.6631 13.2607 12 13.2607Z"})})},710125:(e,t,n)=>{n.d(t,{l:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("import",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M13.291 14.5723C13.291 14.1484 12.9902 13.834 12.5732 13.834H8.06836C8.24609 13.8203 8.42383 13.7314 8.56055 13.5947L13.0586 9.08301C13.2158 8.91895 13.291 8.74121 13.291 8.54297C13.291 8.12598 12.9902 7.81836 12.5801 7.81836C12.3682 7.81836 12.1836 7.90039 12.0469 8.03711L10.4951 9.56836L8.69043 11.585L8.75195 10.1084V1.61133C8.75195 1.16016 8.44434 0.852539 8 0.852539C7.5625 0.852539 7.25488 1.16016 7.25488 1.61133V10.1084L7.30957 11.5781L5.50488 9.56836L3.95312 8.03711C3.82324 7.90039 3.63184 7.81836 3.42676 7.81836C3.0166 7.81836 2.70898 8.12598 2.70898 8.54297C2.70898 8.74121 2.78418 8.91895 2.94141 9.08301L7.44629 13.5947C7.58301 13.7314 7.75391 13.8203 7.93848 13.834H3.44043C3.0166 13.834 2.70898 14.1484 2.70898 14.5723C2.70898 14.9893 3.0166 15.3037 3.44043 15.3037H12.5732C12.9902 15.3037 13.291 14.9893 13.291 14.5723Z"})})},877691:(e,t,n)=>{n.d(t,{J:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("layout",{viewBox:"0 0 14 14",svg:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.39999 2.19999C2.28953 2.19999 2.19999 2.28953 2.19999 2.39998V11.5999C2.19999 11.7103 2.28953 11.7999 2.39999 11.7999H4.99997C5.11042 11.7999 5.19997 11.7103 5.19997 11.5999V2.39998C5.19997 2.28953 5.11042 2.19999 4.99997 2.19999H2.39999ZM1 2.39998C1 1.6268 1.62679 1 2.39999 1H4.99997C5.77316 1 6.39995 1.6268 6.39995 2.39998V11.5999C6.39995 12.3731 5.77316 12.9999 4.99997 12.9999H2.39999C1.62679 12.9999 1 12.3731 1 11.5999V2.39998ZM9 8.80036C8.88954 8.80036 8.8 8.88991 8.8 9.00036V11.6003C8.8 11.7108 8.88954 11.8003 9 11.8003H11.6C11.7105 11.8003 11.8 11.7108 11.8 11.6003V9.00036C11.8 8.88991 11.7105 8.80036 11.6 8.80036H9ZM7.60001 9.00036C7.60001 8.22717 8.2268 7.60037 9 7.60037H11.6C12.3731 7.60037 13 8.22717 13 9.00036V11.6003C13 12.3736 12.3731 13.0003 11.6 13.0003H9C8.2268 13.0003 7.60001 12.3736 7.60001 11.6003V9.00036ZM8.79994 2.39998C8.79994 2.28953 8.88949 2.19999 8.99994 2.19999H11.5999C11.7104 2.19999 11.7999 2.28953 11.7999 2.39998V4.99997C11.7999 5.11043 11.7104 5.19996 11.5999 5.19996H8.99994C8.88949 5.19996 8.79994 5.11043 8.79994 4.99997V2.39998ZM8.99994 1C8.22675 1 7.59995 1.6268 7.59995 2.39998V4.99997C7.59995 5.77316 8.22675 6.39995 8.99994 6.39995H11.5999C12.3731 6.39995 12.9999 5.77316 12.9999 4.99997V2.39998C12.9999 1.6268 12.3731 1 11.5999 1H8.99994Z"})})},54634:(e,t,n)=>{n.d(t,{C:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("membersFilled",{viewBox:"0 0 30 30",svg:(0,o.jsx)("path",{d:"M20.31 14.731c2.22 0 4.097-1.967 4.097-4.513 0-2.485-1.887-4.391-4.098-4.391-2.2 0-4.097 1.937-4.087 4.411 0 2.526 1.866 4.493 4.087 4.493zm-11.725.233c1.937 0 3.57-1.724 3.57-3.935 0-2.17-1.653-3.823-3.57-3.823-1.917 0-3.57 1.683-3.56 3.844 0 2.19 1.633 3.914 3.56 3.914zm-5.588 9.21h7.606c-1.085-1.552.082-4.615 2.374-6.42-1.116-.72-2.566-1.248-4.392-1.248-4.533 0-7.464 3.337-7.464 6.085 0 1.004.507 1.582 1.876 1.582zm10.994-.01h12.637c1.673 0 2.251-.508 2.251-1.44 0-2.607-3.316-6.198-8.57-6.198-5.263 0-8.57 3.59-8.57 6.197 0 .933.578 1.44 2.252 1.44z"})})},965910:(e,t,n)=>{n.d(t,{h:()=>o().h});var o=()=>n(968061)},589515:(e,t,n)=>{n.d(t,{v:()=>o().v});var o=()=>n(820717)},453710:(e,t,n)=>{n.d(t,{N:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("properties",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M1.91602 4.83789C2.44238 4.83789 2.87305 4.40723 2.87305 3.87402C2.87305 3.34766 2.44238 2.91699 1.91602 2.91699C1.38281 2.91699 0.952148 3.34766 0.952148 3.87402C0.952148 4.40723 1.38281 4.83789 1.91602 4.83789ZM5.1084 4.52344H14.3984C14.7607 4.52344 15.0479 4.23633 15.0479 3.87402C15.0479 3.51172 14.7607 3.22461 14.3984 3.22461H5.1084C4.74609 3.22461 4.45898 3.51172 4.45898 3.87402C4.45898 4.23633 4.74609 4.52344 5.1084 4.52344ZM1.91602 9.03516C2.44238 9.03516 2.87305 8.60449 2.87305 8.07129C2.87305 7.54492 2.44238 7.11426 1.91602 7.11426C1.38281 7.11426 0.952148 7.54492 0.952148 8.07129C0.952148 8.60449 1.38281 9.03516 1.91602 9.03516ZM5.1084 8.7207H14.3984C14.7607 8.7207 15.0479 8.43359 15.0479 8.07129C15.0479 7.70898 14.7607 7.42188 14.3984 7.42188H5.1084C4.74609 7.42188 4.45898 7.70898 4.45898 8.07129C4.45898 8.43359 4.74609 8.7207 5.1084 8.7207ZM1.91602 13.2324C2.44238 13.2324 2.87305 12.8018 2.87305 12.2686C2.87305 11.7422 2.44238 11.3115 1.91602 11.3115C1.38281 11.3115 0.952148 11.7422 0.952148 12.2686C0.952148 12.8018 1.38281 13.2324 1.91602 13.2324ZM5.1084 12.918H14.3984C14.7607 12.918 15.0479 12.6309 15.0479 12.2686C15.0479 11.9062 14.7607 11.6191 14.3984 11.6191H5.1084C4.74609 11.6191 4.45898 11.9062 4.45898 12.2686C4.45898 12.6309 4.74609 12.918 5.1084 12.918Z"})})},960852:(e,t,n)=>{n.d(t,{N:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("repeat",{viewBox:"0 0 16 14",svg:(0,o.jsx)("path",{d:"M1.185 7.317a.689.689 0 00.697-.704v-.601c0-1.19.806-1.942 2.064-1.942H9.23v1.573c0 .328.199.52.527.52a.66.66 0 00.403-.144l2.68-2.236c.253-.212.26-.547 0-.765L10.16.782A.62.62 0 009.757.64c-.328 0-.527.184-.527.52v1.53H4.05C1.875 2.69.48 3.9.48 5.875v.738c0 .397.308.704.705.704zm13.624-.649a.689.689 0 00-.698.704v.608c0 1.19-.806 1.942-2.064 1.942H6.763V8.35c0-.329-.199-.52-.527-.52a.66.66 0 00-.403.144l-2.68 2.242c-.26.212-.26.547 0 .759l2.68 2.242a.66.66 0 00.403.143c.328 0 .527-.191.527-.52v-1.544h5.181c2.174 0 3.569-1.21 3.569-3.179v-.745a.695.695 0 00-.704-.704z"})})},80159:(e,t,n)=>{n.d(t,{w:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("templates",{viewBox:"0 0 20 20",svg:(0,o.jsxs)("g",{children:[(0,o.jsx)("path",{d:"M6.39733 5.67853C5.89764 5.50234 5.36002 5.40649 4.8 5.40649C2.14904 5.40649 0 7.55432 0 10.2038C0 12.8533 2.14904 15.0011 4.8 15.0011C6.52165 15.0011 8.0316 14.0952 8.87867 12.7343L5.26487 12.0975L6.39733 5.67853Z"}),(0,o.jsx)("path",{d:"M17.3126 3.66609L7.85843 2L6.19141 11.4489L10.6545 12.2354L14.3998 5.81854L16.3449 9.15116L17.3126 3.66609Z"}),(0,o.jsx)("path",{d:"M8.80078 17L14.4008 7.4054L20.0008 17H8.80078Z"})]})})},848854:(e,t,n)=>{n.d(t,{v:()=>o().v});var o=()=>n(545914)},586365:(e,t,n)=>{n.d(t,{c:()=>o().c});var o=()=>n(562027)},260747:(e,t,n)=>{n.d(t,{U:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("unlocked",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M2.49023 14.7227H8.89551C9.94824 14.7227 10.4746 14.1963 10.4746 13.0479V8.20801C10.4746 7.22363 10.085 6.69727 9.29883 6.57422V4.83105C9.29883 3.22461 10.3174 2.35645 11.541 2.35645C12.7646 2.35645 13.79 3.22461 13.79 4.83105V6.28711C13.79 6.76562 14.0703 7.01855 14.4395 7.01855C14.8018 7.01855 15.082 6.7793 15.082 6.28711V4.96094C15.082 2.36328 13.3525 1.1123 11.541 1.1123C9.72949 1.1123 8 2.36328 8 4.96094V6.54004H2.49023C1.43066 6.54004 0.911133 7.06641 0.911133 8.20801V13.0479C0.911133 14.1963 1.43066 14.7227 2.49023 14.7227ZM2.68848 13.5059C2.3877 13.5059 2.2373 13.3623 2.2373 13V8.25586C2.2373 7.89355 2.3877 7.76367 2.68848 7.76367H8.7041C9.00488 7.76367 9.14844 7.89355 9.14844 8.25586V13C9.14844 13.3623 9.00488 13.5059 8.7041 13.5059H2.68848ZM7.99316 21.1123C6.5918 21.1123 5.2793 21.8779 4.75293 23.375L5.78516 24.4141C5.94922 23.0811 6.87891 22.3564 7.99316 22.3564C9.2168 22.3564 10.2422 23.2246 10.2422 24.8311V26.54H7.9248L9.1416 27.7637H11.0078C11.3086 27.7637 11.4521 27.8936 11.4521 28.2559V30.0742L12.7783 31.4072V28.208C12.7783 27.2031 12.3682 26.6768 11.541 26.5674V24.9609C11.541 22.3633 9.81152 21.1123 7.99316 21.1123ZM13.749 35.126C13.9609 35.3379 14.3164 35.3379 14.5215 35.126C14.7266 34.9072 14.7334 34.5723 14.5215 34.3535L2.46973 22.3154C2.25781 22.1035 1.90918 22.0967 1.69043 22.3154C1.48535 22.5205 1.48535 22.876 1.69043 23.0811L13.749 35.126ZM4.79395 34.7227H11.1992C11.5 34.7227 11.7598 34.6816 11.9785 34.5928L10.8711 33.4922C10.8096 33.499 10.7549 33.5059 10.6865 33.5059H4.99219C4.69141 33.5059 4.54102 33.3623 4.54102 33V28.2559C4.54102 27.9004 4.68457 27.7637 4.97852 27.7637H5.14258L4.04883 26.6631C3.48828 26.8818 3.21484 27.3809 3.21484 28.208V33.0479C3.21484 34.1963 3.73438 34.7227 4.79395 34.7227Z"})})},356140:(e,t,n)=>{n.d(t,{W:()=>i});var o=()=>n(142735),r=()=>n(876822);function i(){const{currentSpaceStore:e}=(0,o().VK)((()=>r().default.state),[]);return null==e?void 0:e.id}},291848:(e,t,n)=>{n.d(t,{w:()=>i});var o=()=>n(142735),r=()=>n(26796);function i(){return(0,o().VK)((()=>r().Z.state.isOpen),[])}},420406:(e,t,n)=>{n.d(t,{$:()=>o});function o(e,t){t.route.name;return!1}},341643:(e,t,n)=>{n.d(t,{DW:()=>S,IG:()=>g,J4:()=>h,hZ:()=>f,q9:()=>y,qq:()=>v,s4:()=>m});var o=n(667294),r=()=>n(219727),i=()=>n(142735),a=()=>n(801812),s=()=>n(677559),l=()=>n(690664),c=()=>n(105649),d=()=>n(291335),u=()=>n(590972),p=()=>n(420406);const m=new(s().Ss)("PerformanceToolbar",(()=>Promise.all([n.e(62743),n.e(5242),n.e(4642),n.e(69197),n.e(52658),n.e(54194)]).then(n.bind(n,333301)))),y=(0,s().kF)(m,(e=>e.PerformanceToolbar)),g=(0,s().kF)(m,(e=>e.PerformanceToolbarSettings));function f(){const e=(0,r().O7)();return(0,i().VK)((()=>(0,p().$)(e,e.RouterStore.state)),[e])}function h(){const e=(0,r().O7)(),t=b("PerformanceToolbarStore"),n=b("isPerformanceToolbarVisible");return(0,i().VK)((()=>!(!t||!n)&&n(e,e.RouterStore.state,t.state)),[n,e,t])}function S(){const e=b("PerformanceToolbarStore");return(0,i().VK)((()=>!!e&&e.state.isPerformanceToolbarMounted),[e])}function v(){const e=(0,r().O7)(),t=b("createPerformanceToolbarMouseListeners"),n=b("PerformanceToolbarStore"),{sidebarExpanded:a,sidebarWidth:s,secondarySidebarExpanded:p,secondarySidebarWidth:m,updateSidebarExpanded:y,updateSidebarWidth:g}=(0,i().VK)((()=>({sidebarExpanded:d().sidebarExpandedStore.state,sidebarWidth:d().sidebarWidthStore.state,secondarySidebarExpanded:c().default.isOpen(),secondarySidebarWidth:l().default.getWidth(),updateSidebarExpanded:u().default.state.expanded,updateSidebarWidth:u().default.state.width})),[]);return(0,o.useEffect)((()=>{if(n&&t)return t(e,(e=>n.update((t=>({...t,isMouseNearPerformanceToolbar:e})))),a,s,p,m,y,g)}),[t,e,n,a,s,p,m,y,g])}function b(e){const t=f(),[{value:n}]=(0,a().r5)((()=>t?m.load().then((t=>t[e])):Promise.resolve(void 0)),[e,t]);return n}},662062:(e,t,n)=>{n.d(t,{q:()=>r});const o={greeting:!0,tasks:!1,tips:!1,templates:!1,calendar:!1,custom_db:!1};function r(e){const t=(null==e?void 0:e.getHomeEnabledFeatures())??{};return{...o,...t}}},106128:(e,t,n)=>{n.d(t,{NW:()=>a,Qi:()=>r,Rt:()=>o,WO:()=>s,wI:()=>i});let o=function(e){return e[e.SelectedPage=0]="SelectedPage",e[e.SearchPage=1]="SearchPage",e[e.NewPage=2]="NewPage",e}({});const r=4,i=32,a=400,s=20},820748:(e,t,n)=>{n.d(t,{ev:()=>a,NW:()=>o().NW,Qi:()=>o().Qi,wI:()=>o().wI});var o=()=>n(106128),r=()=>n(677559);const i=new(r().Ss)("RelationPropertyMenu",(async()=>{const{default:e}=await Promise.all([n.e(62743),n.e(44832),n.e(90698),n.e(84885),n.e(5242),n.e(90424),n.e(2971),n.e(80741),n.e(72586),n.e(53335),n.e(71896),n.e(46616),n.e(54940),n.e(49396),n.e(98721),n.e(98032),n.e(57229),n.e(63707),n.e(86609),n.e(91253),n.e(4642),n.e(5006),n.e(6612),n.e(2942),n.e(73682),n.e(1953),n.e(58565),n.e(34291),n.e(72329),n.e(13856)]).then(n.bind(n,835698));return{RelationPropertyMenu:e}})),a=(0,r().kF)(i,(e=>e.RelationPropertyMenu))},974442:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n(263184).default.createValue({open:!1},{name:"ConfirmOverwriteModalStore"})},719157:(e,t,n)=>{n.d(t,{D:()=>i});var o=()=>n(142735),r=()=>n(749826);function i(e){const{experimentId:t,groups:n,disableExposureLogging:i}=e,a=function(e){const{experimentId:t,disableExposureLogging:n,defaultGroup:i}=e;return(0,o().VK)((()=>r().default.getEligibleGroup({experimentId:t,defaultGroup:i??"control",disableExposureLogging:n})),[t,n,i])}({experimentId:t,disableExposureLogging:i});return n[a]}},385337:(e,t,n)=>{n.d(t,{R:()=>f});n(667294);var o=()=>n(219727),r=()=>n(142735),i=()=>n(846550),a=()=>n(788860),s=()=>n(568017),l=()=>n(696459),c=()=>n(707513),d=()=>n(946563),u=()=>n(654133),p=()=>n(998901),m=()=>n(876822),y=()=>n(965014),g=n(785893);function f(e){let{upsell:t,mobileStyle:n,desktopStyle:f,analyticsName:h,onClick:S,disableTooltip:v}=e;const b=(0,i().Fg)(),_=(0,o().O7)(),{device:w}=_,C=(0,r().VK)((()=>{const{currentSpaceStore:e}=m().default.state;return null==e?void 0:e.canAdmin()}),[]),x=(0,r().VK)((()=>function(e,t){if("product"!==e.type)return{};switch(e.product){case"plus":case"business":case"enterprise":return{color:t.blueColor,background:"light"===t.mode?s().ZP.diffBackground:"rgba(35, 131, 226, 0.2)",fontWeight:c().Ue.medium};default:return{}}}(t,b)),[t,b]);if("product"!==t.type)return null;if(w.isMobileNative)return null;const I=(()=>{switch(t.product){case"personal":return(0,g.jsx)(a()._H,{defaultMessage:"Personal Pro",id:"upgradeButton.personal.text"});case"plus":return(0,g.jsx)(a()._H,{defaultMessage:"Plus â†—",id:"upgradeButton.plus.textWithArrow"});case"business":return(0,g.jsx)(a()._H,{defaultMessage:"Business â†—",id:"upgradeButton.business.textWithArrow"});case"enterprise":return(0,g.jsx)(a()._H,{defaultMessage:"Enterprise â†—",id:"upgradeButton.enterprise.textWithArrow"});case"ai":return(0,g.jsx)(a()._H,{defaultMessage:"AI â†—",id:"upgradeButton.ai.textWithArrow"});case"sites_custom_hostnames":return(0,g.jsx)(a()._H,{defaultMessage:"Custom Hostnames â†—",id:"upgradeButton.sites_custom_hostnames.textWithArrow"});default:(0,l().t1)(t.product)}})();return w.isMobile||!C?(0,g.jsx)(d().Z,{mobileStyle:n,children:I}):(0,g.jsx)(u().Z,{delayThreshold:120,disableTooltip:v,placement:p().Placement.Bottom,renderTooltip:()=>(0,g.jsx)("div",{style:{maxWidth:500},children:(0,g.jsx)(a()._H,{defaultMessage:"Upgrade to use this feature.",id:"premiumFeatureUpgradeButton.upgrade.tooltip"})}),originGap:6,render:e=>(0,g.jsx)(d().Z,{desktopStyle:f,innerStyle:x,onClick:e=>function(e,t,n,o,r){y().y(o,{from:t,upsell:n}),r&&r(e)}(e,h,t,_,S),...e,children:I})})}},815277:(e,t,n)=>{n.d(t,{CH:()=>m,DE:()=>l().DE,KQ:()=>l().KQ,Rv:()=>l().Rv,V5:()=>p().V5,VX:()=>y,eB:()=>l().eB,oo:()=>l().oo});var o=()=>n(255933),r=()=>n(779709),i=()=>n(205228),a=()=>n(845682),s=()=>n(30795),l=()=>n(546464),c=()=>n(404791),d=()=>n(897257),u=()=>n(18281),p=()=>n(259408);const m={guests:e=>{if(!d().subscriptionDataStoreInstance.state)return"loading";return{current:(0,u().s1)(e.environment,e.spaceId,d().subscriptionDataStoreInstance.state)}},team_self_promotion:e=>{},internal_guests:e=>{if(!d().subscriptionDataStoreInstance.state)return"loading";return{current:(0,u().s1)(e.environment,e.spaceId,d().subscriptionDataStoreInstance.state),hasLowGuestLimit:(0,n(548812).fc)()}},members:e=>{const t=d().subscriptionDataStoreInstance.state;return{current:t?(0,s().W)(e.environment,e.spaceId,t):0}},non_admin_members:e=>{},view_chart:e=>{},form_filesize:e=>{},form_customization:e=>{},premium_automations:e=>{},move_to:e=>{},claimable_spaces:e=>{},domain_settings:e=>{},managed_users:e=>{},invite_user_to_workspace_mentions:e=>{},saml:e=>{},scim:e=>{},export_members:e=>{},hipaa_compliance:e=>{},sites_multiple_public_domains:e=>{},custom_image_upload_favicon:e=>{},custom_public_sites_layout:e=>{},seo_title_and_description:e=>{},admin_transfer_private_content:e=>{},ai_slack_qna:e=>{},configurable_mention_invites:e=>{},configurable_retention:e=>{},unbranded_forms:e=>{},ai_google_drive_qna:e=>{},watermarkless_chart_export:e=>{},configurable_deletion_and_retention_settings:e=>{},sudo_mode:e=>{},ai_github_connector:e=>{},ai_jira_connector:e=>{},slack_imports_invite:e=>{},content_reprovisioning:e=>{},ai_space_usage:e=>{var t;let{environment:n,spaceId:l}=e;const u=new(a().H)(n,{table:o().bx,id:l}).getModel(),p=(0,r().oc)(i().default.promotions.ai,u),m=(null===(t=c().Z.state)||void 0===t?void 0:t.spaceUsage)??0,y=d().subscriptionDataStoreInstance.state;return{current:m,memberCount:y?(0,s().W)(n,l,y):0,aiPromotionConfig:p,space:u}},ai_user_usage:e=>{var t;let{environment:n,spaceId:l}=e;const u=new(a().H)(n,{table:o().bx,id:l}).getModel(),p=(0,r().oc)(i().default.promotions.ai,u),m=(null===(t=c().Z.state)||void 0===t?void 0:t.userUsage)??0,y=d().subscriptionDataStoreInstance.state;return{current:m,memberCount:y?(0,s().W)(n,l,y):0,aiPromotionConfig:p,space:u}},block_read_and_write_role:e=>{}};function y(e){return(0,l().Rv)(e)??!1}},697360:(e,t,n)=>{n.d(t,{kj:()=>l,zY:()=>s});n(821057);var o=()=>n(139224),r=()=>n(932753),i=()=>n(382474);const a={property:function(e){let{template:t,collectionStore:r,collectionViewStore:a,collectionSettingsStore:s}=e;const l=(0,i().ZQ)({collectionStore:r,templateId:t.templateId,instancePointerType:"property"});if(!l)throw new Error(`No property instance found for property template ${t.templateId}`);const c=a.getType();o().H4({collectionSettingsStore:s,item:{type:"property",property:l.id,formatKey:c?n(109477).oz(c):void 0}})},collection_view:function(e){let{template:t,environment:n,collectionStore:o,collectionContextStore:r}=e;const a=(0,i().ZQ)({collectionStore:o,templateId:t.templateId,instancePointerType:"collection_view"});if(!a)throw new Error(`No collection view instance found for property template ${t.templateId}`);l({environment:n,collectionContextStore:r,collectionViewId:a.id})},compound:function(e){}};function s(e){a[e.template.type](e)}function l(e){var t;let{environment:n,collectionContextStore:i,collectionViewId:a}=e;(null===(t=i.collectionViewStore())||void 0===t?void 0:t.id)!==a&&(0,r().f8)({environment:n,collectionContextStore:i,collectionViewId:a,isFullScreen:i.isFullScreenStore.state,isRootChild:i.isRootChildStore.state,isInPeekRenderer:i.isInPeekRendererStore.state}),o().H4({collectionSettingsStore:i.settingsStore,item:{type:"main"}})}},792329:(e,t,n)=>{n.r(t),n.d(t,{WorkflowSettingsConfirmAddTemplate:()=>T,isWorkflowTemplateWithConfirmStep:()=>L});n(821057);var o=n(667294),r=()=>n(219727),i=()=>n(846550),a=()=>n(353329),s=()=>n(788860),l=()=>n(513670),c=()=>n(139224),d=()=>n(269299),u=()=>n(205951),p=()=>n(477253),m=()=>n(18748),y=()=>n(906651),g=()=>n(388284),f=()=>n(125659),h=()=>n(594546),S=()=>n(298032),v=()=>n(697360),b=()=>n(281236),_=(n(241792),()=>n(38883)),w=()=>n(246471),C=n(785893);function x(e){let{template:t,style:n}=e;const o=(0,i().yK)((e=>({container:{...n,padding:12,border:`1px solid ${e.regularDividerColor}`,borderRadius:6}})),[n]),r=function(e){if((0,a().U2)(e,"property")&&(0,a().kw)(e)){const{options:t=[]}=e.value;if(0===t.length)return;return(0,C.jsx)(I,{options:t})}}(t);return r?(0,C.jsx)("div",{style:o.container,children:r}):null}function I(e){let{options:t}=e;const n=(0,i().yK)((()=>({container:{display:"flex",flexDirection:"column",gap:8}})),[]);return(0,C.jsx)("div",{style:n.container,children:t.map((e=>(0,C.jsx)("div",{children:(0,C.jsx)(w().a,{format:_().lo.Medium,isSingle:!0,value:e.value,color:e.color,showRemoveButton:!1})},e.id)))})}var k=()=>n(499819);function T(e){let{template:t,collectionSettingsStore:n}=e;const[a,l]=(0,o.useState)("sample"===t.propertyOptionsType),{device:{isMobile:c}}=(0,r().O7)(),d=(0,i().yK)((e=>{const t={display:"flex",flexDirection:"column",minHeight:0};return{shrinkableHeight:t,noShrink:{flexShrink:0},featurePreviewWrapper:{...t,width:"-webkit-fill-available"},featurePreviewBody:{...t,gap:16,...c?{margin:"16px 0"}:{margin:0}},featurePreview:{...t,overflow:"auto"},addButtonContainer:{...c?{margin:"12px 0"}:{marginBottom:6}}}}),[c]),y=(0,b().getWorkflowTemplateName)(t);return(0,C.jsxs)(u().ZP,{collectionSettingsStore:n,title:(0,C.jsx)(s()._H,{id:"workflowTemplateSettings.confirmAddTemplate.title",defaultMessage:"Turn on {templateName}",values:{templateName:y}}),disableScroller:!0,menuScrollerStyle:d.shrinkableHeight,innerContentWrapperStyle:d.shrinkableHeight,children:[(0,C.jsx)(g().Z,{style:d.shrinkableHeight,children:(0,C.jsx)(m().ZP,{style:d.shrinkableHeight,textWrapperStyle:d.featurePreviewWrapper,bodyStyle:d.featurePreviewBody,body:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(P,{template:t,style:d.noShrink}),(0,C.jsx)(x,{template:t,style:d.featurePreview})]})})}),(0,C.jsx)(g().Z,{style:d.noShrink,children:t.value.options&&t.value.options.length>0&&(0,C.jsx)(p().Z,{title:(0,C.jsx)(s()._H,{id:"workflowTemplateSettings.confirmAddTemplate.propertyOptionsToggle",defaultMessage:"Set my own options"}),switcherProps:{on:a,disallowTabbing:!0},onClick:()=>{l(!a)}})}),(0,C.jsx)(g().Z,{style:d.noShrink,children:(0,C.jsx)(m().ZP,{body:(0,C.jsx)(M,{template:t,startEmpty:a}),bodyStyle:d.addButtonContainer})})]})}function P(e){let{template:t,style:n}=e;const o=(0,r().Fy)(),s=(0,i().yK)((()=>({container:{...n,display:"flex",alignItems:"center",gap:12},textWrapper:{lineHeight:o.isMobile?"20px":"18px"},title:{fontSize:o.isMobile?16:13},caption:{fontSize:o.isMobile?14:12,overflow:"hidden",color:"gray",whiteSpace:"nowrap",textOverflow:"ellipsis"}})),[o,n]),l=(0,b().getWorkflowTemplateName)(t),c=(0,a().ym)(t);return(0,C.jsxs)("div",{style:s.container,children:[(0,C.jsx)(k().$,{template:t,backgroundSize:32}),(0,C.jsxs)("div",{style:s.textWrapper,children:[(0,C.jsx)("div",{style:s.title,children:l}),c&&(0,C.jsx)("div",{style:s.caption,children:c})]})]})}function M(e){let{template:t,startEmpty:n}=e;const o=(0,i().yK)((()=>({section:{paddingTop:12,paddingBottom:12},button:{width:"100%"}})),[]),a=(0,r().O7)(),u=(0,f().Y$)(),p=(0,b().getWorkflowTemplateName)(t),m=l().Xh(t);return n&&delete m.value.options,(0,C.jsx)(y().Z,{style:o.button,isLarge:!0,onClick:()=>{d().createAndCommit({userAction:"WorkflowSettingsConfirmAddTemplate.addFeatureTemplateToTarget",environment:a,canUndo:!0,perform:e=>{const n=u.collectionStore();if(!n)throw new Error("collectionStore not found");S().rU({environment:a,transaction:e,collectionStore:n,template:m,logger:new(b().WorkflowTemplateLogger),origin:"suggested_feature"});const o=u.settingsStore;c().z$({collectionSettingsStore:o});const r=n.getWorkflowTemplateId();(0,h().j)({environment:a,event:{eventName:"suggested_feature_template_added",eventProperties:{origin:"suggested_properties",template_id_added:t.templateId,collection_template_id:r}}});const i=u.collectionViewStore();i&&(0,v().zY)({template:t,environment:a,collectionStore:n,collectionViewStore:i,collectionSettingsStore:o,collectionContextStore:u})}})},children:(0,C.jsx)(s()._H,{id:"workflowTemplateSettings.confirmAddTemplate.button",defaultMessage:"Add {templateName}",values:{templateName:p}})})}function L(e){return"property"===e.type&&("select"===e.value.type||"multi_select"===e.value.type)}},499819:(e,t,n)=>{n.d(t,{$:()=>C,l:()=>_});n(821057),n(667294);var o=()=>n(142735),r=()=>n(846550),i=()=>n(353329),a=()=>n(445520),s=()=>n(766933),l=()=>n(890085),c=()=>n(696459),d=()=>n(716025),u=()=>n(828458),p=()=>n(850790),m=()=>n(383507),y=()=>n(877691),g=()=>n(80159),f=()=>n(413894),h=()=>n(281236),S=n(785893);const v=16;function b(e){let{icon:t,theme:n,size:o,style:i}=e;const s=(0,r().yK)((e=>({icon:{fill:(0,f().A)(t,e).icon.primary,...i}})),[t,i]);return(0,S.jsx)(a().Z,{icon:t,theme:n,size:o,style:s.icon})}function _(e){var t;let{template:n,size:o,iconStyle:a}=e;const s=o??v,u=(0,r().yK)((()=>({icon:{width:s,height:s,...a}})),[s,a]),f=(0,r().Fg)();if((0,i().Wl)(n.templateId))return(0,m().Q)(u.icon);const{type:h}=n;switch(h){case"property":return(0,S.jsx)(w,{template:n,iconSize:s,styles:u});case"collection_view":return(0,S.jsx)(d().F,{viewIcon:null===(t=n.value.format)||void 0===t?void 0:t.collection_view_icon,viewType:n.value.type,color:"lightGray",style:u.icon});case"layout":return(0,S.jsx)(S.Fragment,{children:(0,y().J)(u.icon)});case"block":return(0,S.jsx)(S.Fragment,{children:(0,g().w)(u.icon)});case"collection":case"compound":const e="collection"===n.type?n.value.targetCollection.icon:n.icon;if(!(0,l().V2)(e))throw new Error("Only Notion static icons are allowed for template icons");return(0,S.jsx)(b,{icon:e,theme:f,size:s,style:u.icon});case"automation":return(0,S.jsx)(S.Fragment,{children:(0,p().K)(u.icon)});default:(0,c().t1)(h)}}function w(e){let{template:t,iconSize:n,styles:i}=e;const a=(0,r().Fg)(),l=(0,o().VK)((()=>{const{relatedCollectionTemplateId:e}=t;if("relation"===t.value.type&&e){return h().globalWorkflowTemplates.fromIdOfType({templateId:e,type:"collection"}).value.targetCollection.icon}return t.value.icon}),[t]);return(0,S.jsx)(s().ZP,{type:t.value.type,icon:l,size:n,style:i.icon,theme:a})}function C(e){let{template:t,backgroundSize:n}=e;const o=(0,r().yK)((e=>({iconContainer:{background:x({theme:e,template:t})[30]},icon:{fill:x({theme:e,template:t})[400]}})),[t]);return(0,S.jsx)(u().I,{backgroundColor:o.iconContainer.background,backgroundSize:n,icon:(0,S.jsx)(_,{template:t,iconStyle:o.icon})})}function x(e){let{theme:t,template:n}=e;const{type:o}=n;switch(o){case"collection_view":case"automation":return t.accentColors.blue;case"property":return"relation"===n.value.type?t.accentColors.yellow:t.accentColors.red;case"layout":return t.accentColors.orange;case"block":return t.accentColors.purple;case"compound":return t.accentColors.green;case"collection":return t.accentColors.pink;default:(0,c().t1)(o)}}},877727:(e,t,n)=>{n.d(t,{C3:()=>s,D:()=>l,QZ:()=>a,fo:()=>i});var o=()=>n(146947),r=()=>n(749826);function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r().default.checkGate({gateName:"packaging_m2_additional_entrypoints"})&&a(e,t)}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!e.device.isPhone&&s(t)}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r().default.checkGate({gateName:"workflow_templates_prototype",...e})||"control"!==l(e)}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o().locale.startsWith("en-")||r().default.checkGate({gateName:"packaging_m2_localize_templates"})?r().default.getEligibleGroup({experimentId:"packaging_m2_entry_point",defaultGroup:"control",...e}):"control"}},999582:(e,t,n)=>{n.d(t,{Z:()=>i});class o extends(()=>n(263184))().default{getInitialState(){return{}}}const r=new o;n(947115).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",r);const i=r},413894:(e,t,n)=>{n.d(t,{A:()=>i});var o=()=>n(890085);const r={light:{gray:{stroke:{secondary:"rgba(84, 72, 49, 0.15)"},fill:{primary:"rgba(84, 72, 49, 0.15)",secondary:"rgba(84, 72, 49, 0.08)",tertiary:"rgba(84, 72, 49, 0.04)"},text:{primary:"#1D1B16"}},red:{stroke:{secondary:"rgba(244, 171, 159, 0.40)"},fill:{primary:"rgba(244, 171, 159, 0.40)",secondary:"rgba(244, 171, 159, 0.40)",tertiary:"rgba(243, 136, 118, 0.07)"},text:{primary:"#5D1715"}},brown:{stroke:{secondary:"rgba(210, 162, 141, 0.35)"},fill:{primary:"rgba(210, 162, 141, 0.35)",secondary:"rgba(210, 162, 141, 0.17)",tertiary:"rgba(210, 162, 141, 0.07)"},text:{primary:"#442A1E"}},orange:{stroke:{secondary:"rgba(224, 124, 57, 0.27)"},fill:{primary:"rgba(224, 124, 57, 0.27)",secondary:"rgba(224, 124, 57, 0.15)",tertiary:"rgba(224, 124, 57, 0.07)"},text:{primary:"#49290E"}},yellow:{stroke:{secondary:"rgba(236, 191, 66, 0.39)"},fill:{primary:"rgba(236, 191, 66, 0.39)",secondary:"rgba(215, 177, 24, 0.15)",tertiary:"rgba(215, 177, 24, 0.07)"},text:{primary:"#402C1B"}},green:{stroke:{secondary:"rgba(123, 183, 129, 0.27)"},fill:{primary:"rgba(123, 183, 129, 0.27)",secondary:"rgba(123, 183, 129, 0.15)",tertiary:"rgba(123, 183, 129, 0.07)"},text:{primary:"#1C3829"}},blue:{stroke:{secondary:"rgba(93, 165, 206, 0.27)"},fill:{primary:"rgba(93, 165, 206, 0.27)",secondary:"rgba(95, 167, 208, 0.15)",tertiary:"rgba(91, 166, 209, 0.07)"},text:{primary:"#183347"}},purple:{stroke:{secondary:"rgba(168, 129, 197, 0.27)"},fill:{primary:"rgba(168, 129, 197, 0.27)",secondary:"rgba(204, 170, 229, 0.15)",tertiary:"rgba(206, 175, 229, 0.07)"},text:{primary:"#412454"}},pink:{stroke:{secondary:"rgba(225, 136, 179, 0.27)"},fill:{primary:"rgba(225, 136, 179, 0.27)",secondary:"rgba(235, 159, 196, 0.15)",tertiary:"rgba(231, 147, 188, 0.07)"},text:{primary:"#4C2337"}}},dark:{gray:{stroke:{secondary:"rgba(255, 255, 255, 0.09)"},fill:{primary:"rgba(255, 255, 255, 0.13)",secondary:"rgba(255, 255, 255, 0.09)",tertiary:"rgba(255, 255, 255, 0.03)"},text:{primary:"rgba(255, 255, 255, 0.81)"}},red:{stroke:{secondary:"rgba(222, 85, 85, 0.25)"},fill:{primary:"rgba(222, 85, 84, 0.30)",secondary:"rgba(222, 85, 84, 0.30)",tertiary:"rgba(222, 85, 88, 0.10)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},brown:{stroke:{secondary:"rgba(184, 101, 69, 0.25)"},fill:{primary:"rgba(184, 101, 68, 0.30)",secondary:"rgba(184, 101, 68, 0.30)",tertiary:"rgba(184, 101, 72, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},orange:{stroke:{secondary:"rgba(233, 126, 37, 0.20)"},fill:{primary:"rgba(233, 126, 36, 0.30)",secondary:"rgba(233, 126, 36, 0.30)",tertiary:"rgba(233, 126, 40, 0.06)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},yellow:{stroke:{secondary:"rgba(179, 129, 61, 0.20)"},fill:{primary:"rgba(231, 161, 55, 0.30)",secondary:"rgba(231, 161, 55, 0.30)",tertiary:"rgba(162, 105, 50, 0.10)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},green:{stroke:{secondary:"rgba(45, 153, 100, 0.20)"},fill:{primary:"rgba(45, 153, 100, 0.30)",secondary:"rgba(45, 153, 100, 0.30)",tertiary:"rgba(45, 153, 100, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},blue:{stroke:{secondary:"rgba(51, 126, 169, 0.20)"},fill:{primary:"rgba(51, 126, 169, 0.33)",secondary:"rgba(51, 126, 169, 0.33)",tertiary:"rgba(51, 126, 169, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},purple:{stroke:{secondary:"rgba(155, 97, 211, 0.18)"},fill:{primary:"rgba(155, 97, 211, 0.28)",secondary:"rgba(155, 97, 211, 0.28)",tertiary:"rgba(155, 97, 211, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},pink:{stroke:{secondary:"rgba(220, 76, 145, 0.22)"},fill:{primary:"rgba(220, 76, 145, 0.30)",secondary:"rgba(220, 76, 145, 0.30)",tertiary:"rgba(220, 76, 145, 0.06)"},text:{primary:"rgba(255, 255, 255, 0.87)"}}}};function i(e,t){const n=(0,o().mk)(e),i="lightgray"===n?"gray":n;return{...r[t.mode][i],icon:{primary:o().Lr[t.mode][i]}}}},184441:(e,t,n)=>{n.d(t,{default:()=>i});class o extends(()=>n(263184))().default{getInitialState(){return{open:!1,isShowingLoadingState:!1}}updateUserCustomizations(e,t){this.state.open&&this.state.collectionTemplate&&this.setState({...this.state,userCustomizations:{...this.state.userCustomizations,[e]:t}})}updateCollectionTemplate(e){this.state.open&&this.state.collectionTemplate&&this.setState({...this.state,collectionTemplate:e})}updatePreviewCollectionViewTemplateId(e){this.state.open&&this.state.collectionTemplate&&this.setState({...this.state,previewCollectionViewTemplateId:e})}getParentStore(){return this.state.open?this.state.parentStore:void 0}getShouldShowExpandedTemplateList(){return this.state.open&&this.state.shouldShowExpandedTemplateList}setShouldShowExpandedTemplateList(e){this.state.open&&this.setState({...this.state,shouldShowExpandedTemplateList:e})}close(e){var t,n;this.state.open&&(null===(t=(n=this.state).onClose)||void 0===t||t.call(n,e),this.setState({open:!1,isShowingLoadingState:!1}))}reset(){this.setState(this.getInitialState())}}const r=new o;(0,n(947115).exposeDebugValue)("InitializeWorkflowTemplateModalStore",r);const i=r},814866:(e,t,n)=>{n.d(t,{$v:()=>v,Hi:()=>f,Xe:()=>w,Y$:()=>x,dY:()=>C,oD:()=>h,r3:()=>_});var o=n(667294),r=()=>n(219727),i=()=>n(142735),a=()=>n(506347),s=()=>n(342792),l=()=>n(696459),c=()=>n(957042),d=()=>n(497065),u=()=>n(887430),p=()=>n(429725),m=()=>n(876822);const y=n(124199).literals("view","instructions","runs","chat","module","view_settings","database","trigger","function","test","debug","runtime_actor");function g(e){const{RouterStore:t}=e;if("page"!==t.state.route.name)return;const{workflowViewType:n,workflowViewKey:o}=t.state.route;return function(e){const t=(0,c().OD)(y,e.workflowViewType);if(t)switch(t){case"view":return e.workflowViewKey?{view:{type:"settings"},settingsPane:{type:"instructions"},view:{type:"view",key:e.workflowViewKey}}:{view:{type:"settings"},settingsPane:{type:"instructions"}};case"instructions":case"debug":case"runtime_actor":return{view:{type:"settings"},settingsPane:{type:t}};case"module":case"view_settings":case"trigger":case"function":case"database":if(!e.workflowViewKey)return{view:{type:"settings"},settingsPane:{type:"instructions"}};const n=(0,s().xP)(e.workflowViewKey);return n?{view:{type:"settings"},settingsPane:{type:"database",collectionId:n}}:{view:{type:"settings"},settingsPane:{type:"instructions"}};case"runs":return{view:{type:"settings"},settingsPane:{type:"runs",runId:(0,s().xP)(e.workflowViewKey)}};case"chat":return{view:{type:"settings"},settingsPane:{type:"chat",transcriptId:e.workflowViewKey}};case"test":if(!e.workflowViewKey)return{view:{type:"settings"},settingsPane:{type:"instructions"}};const[o,r]=e.workflowViewKey.split(",");return o&&r?{view:{type:"settings"},settingsPane:{type:"test",name:r,functionKey:o}}:{view:{type:"settings"},settingsPane:{type:"instructions"}};default:(0,l().t1)(t)}}({workflowViewType:n,workflowViewKey:o})}function f(e){return void 0!==g(e)}function h(e){const t=(0,r().O7)();return(0,i().VK)((()=>g(t)??e),[t,e])}function S(e){const t=e.view.type;switch(t){case"settings":return function(e){const t=e.type;switch(t){case"instructions":case"debug":case"runtime_actor":return{workflowViewType:t};case"runs":return{workflowViewType:t,workflowViewKey:e.runId};case"chat":return{workflowViewType:t,workflowViewKey:e.transcriptId};case"test":return{workflowViewType:t,workflowViewKey:`${e.functionKey},${e.name}`};case"database":return{workflowViewType:t,workflowViewKey:e.collectionId};case"module":case"view_settings":case"trigger":case"function":return{workflowViewType:t,workflowViewKey:e.key};default:(0,l().t1)(t)}}(e.settingsPane);case"view":return{workflowViewType:t,workflowViewKey:e.view.key};default:(0,l().t1)(t)}}function v(e){const{store:t,environment:n,navigationPane:o}=e,{workflowViewType:r,workflowViewKey:i}=S(o),s=(0,p().Hu)({store:t,pageVisitSource:a().tY.Workflows,workflowViewType:r,workflowViewKey:i});d().c4({environment:n,url:s})}function b(e){const t=(0,r().O7)();return(0,o.useCallback)((n=>{v({store:e,environment:t,navigationPane:n})}),[t,e])}function _(e){const{store:t,environment:n}=e,o=(0,p().Hu)({store:t,pageVisitSource:a().tY.Workflows});d().c4({environment:n,url:o})}function w(e){const t=b(e);return(0,o.useCallback)((e=>{t({view:{type:"settings"},settingsPane:e})}),[t])}function C(e){const t=b(e);return(0,o.useCallback)((e=>{t({view:{type:"settings"},settingsPane:{type:"instructions"},view:e})}),[t])}function x(){return(0,i().VK)((()=>{const e=m().default.state.mainEditorCurrentBlockStore;if(e)if(e.isCollectionView()){if(e.getCollectionStore())return(0,u().fm)(e)}else{const t=e.getAssociatedCollectionStore();if(t&&!t.isPageTreeCollection())return(0,u().fm)(e)}}),[])}},29488:(e,t,n)=>{function o(e){return`${e.table}:${e.id}`}n.d(t,{O:()=>o})},912203:(e,t,n)=>{n.d(t,{$M:()=>f,GQ:()=>w,Jy:()=>I,LF:()=>x,NO:()=>m,Of:()=>k,SF:()=>u,TX:()=>_,XO:()=>h,Y_:()=>d,Ym:()=>g,bD:()=>v,cO:()=>p,fo:()=>C,rR:()=>y});n(267602),n(653476),n(228244);var o=()=>n(513670),r=()=>n(696459),i=()=>n(226413),a=()=>n(109477),s=()=>n(455222),l=()=>n(305580);(0,r().AO)((e=>(0,r().$K)(e)&&(0,r().$K)(e.target)&&(0,r().$K)(e.external_bot_id)?{true:{external_bot_id:e.external_bot_id,target:e.target}}:{false:e}));const c={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1},d={checkbox:[{type:"checkbox"}],date:[{type:"date"}],email:[{type:"text"}],multi_select:[{type:"text"},{of:{type:"text"},type:"array"}],number:[{type:"number"}],person:[{type:"person"},{of:{type:"person"},type:"array"}],phone_number:[{type:"text"}],relation:[{type:"block"},{of:{type:"block"},type:"array"}],select:[{type:"text"},{of:{type:"text"},type:"array"}],status:[{type:"text"},{of:{type:"text"},type:"array"}],text:void 0,title:void 0,url:[{type:"text"}]};function u(e){return Boolean(c[e.type]&&!(0,i().NK)(e)&&(!(0,i().qQ)(e)||void 0===(0,i().q3)(e)))}function p(e){const{collectionFormat:t,collectionSchema:n,filter:s,sort:c,sourcePropertyIds:d}=e,p=(d??(0,r().Yd)(n)).filter(((t,o,r)=>{const a=n[t];return!(!a||!u(a))&&(("relation"!==a.type||!e.restrictCrossSpace||!(0,i().Qh)(e.spaceId,a))&&(!s||s([t,a],o,n)))}));if(0===p.length)return[];if(!t||!1===c)return p;const m=(0,l().i)(t,n,void 0,a().j5.Page).collection_page_properties||[];return o().MR(p,(e=>m.findIndex((t=>t.property===e))))}function m(e){const{collectionFormat:t,collectionSchema:n,sort:s}=e,c=(0,r().Yd)(n).filter(((e,t,o)=>{const r=n[e];return!(!r||!(0,i().U8)(r))}));if(0===c.length)return[];if(!t||!1===s)return c;const d=(0,l().i)(t,n,void 0,a().j5.Page).collection_page_properties||[];return o().MR(c,(e=>d.findIndex((t=>t.property===e))))}function y(e){return e.type===s().$E.InvalidCharacter?{type:e.type,character:e.character}:e.type===s().$E.TokenExpected?{type:e.type,token:e.token}:e.type===s().FY.MissingSchemaPropertyOnThisRow||e.type===s().FY.MissingSchemaPropertyOnCollection?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===s().FY.ThisRowBlockPropertyMismatchCollection?{type:e.type,thisRowCollection:e.thisRowCollection}:e.type===s().FY.MissingContextVariable?{type:e.type,valueId:e.valueId}:e.type===s().FY.FunctionCallTooFewArguments?{type:e.type,numArguments:e.numArguments}:e.type===s().FY.FunctionCallUnexpectedArgument?{type:e.type,parameterIndex:e.parameterIndex}:e.type===s().FY.FunctionCallArgumentWrongType?{type:e.type,argumentType:e.argumentType,libraryFunctionName:e.libraryFunction.name,parameterIndex:e.parameterIndex}:e.type===s().FY.MissingDataDependencyBlock?{type:e.type,blockPointer:e.blockPointer}:e.type===s().FY.MissingDataDependencyPerson?{type:e.type,personPointer:e.personPointer}:e.type===s().FY.MemberPropertyMismatchCollection?{type:e.type,blockCollection:e.blockCollection}:e.type===s().FY.DownstreamParseFailure?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===s().FY.ContextVariableWrongType?{type:e.type,valueId:e.valueId,expectedType:e.expectedType,resultType:e.resultType}:e.type===s().FY.DisallowedValueType?{type:e.type,expressionValue:e.expressionValue,allowedValueTypes:e.allowedValueTypes}:e.type===s().FY.LibraryFunctionExecutionError?{type:e.type,error:e.error,libraryFunctionName:e.libraryFunction.name}:{type:e.type}}const g={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,button:!1,file:!1,verification:!1,auto_increment_id:!1,created_by:!1,created_time:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1};function f(e){return Boolean(g[e.type])}function h(e){const{collectionFormat:t,collectionSchema:n,filter:s,sort:c}=e,d=(0,r().Yd)(n).filter(((e,t,o)=>{var r;const a=n[e];return!(!a||!g[a.type])&&((!(0,i().qQ)(a)||null===(r=(0,i().q3)(a))||void 0===r||!r.auto_update_on_edit)&&(!s||s([e,a],t,n)))}));if(0===d.length)return[];if(!t||!1===c)return d;const u=(0,l().i)(t,n,void 0,a().j5.Page).collection_page_properties||[];return o().MR(d,(e=>u.findIndex((t=>t.property===e))))}const S={checkbox:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,date:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1};function v(e){return S[e.type]}const b={checkbox:!0,created_by:!0,created_time:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,last_edited_by:!0,last_edited_time:!0,auto_increment_id:!1,button:!1,file:!1,formula:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1};function _(e){return b[e.type]}function w(e){return 0===e}function C(e){return function(e){return"button_block"===e||"button_property"===e}(e)}function x(e){const{property:t,collectionSchema:n}=e;return!!n&&!n[t]}function I(e){const{collectionSchema:t,property:n,type:o}=e,r=null==t?void 0:t[n];return!r||("action"===o?!u(r):!g[r.type])}function k(e){let{automationTrigger:t,collectionSchema:n}=e;if("event"===(null==t?void 0:t.type)||"notification_event"===(null==t?void 0:t.type)){const{pagesAdded:e,pagePropertiesEdited:o,source:i}=t.event;if(void 0===i)return!1;const a="some"===o.type&&o.some,s="all"===o.type&&o.all;if((a||s||[]).some((e=>x({collectionSchema:n,property:e.property})||I({collectionSchema:n,property:e.property,type:"trigger"}))))return!1;const l="some"===o.type&&(!(0,r().$K)(o.some)||0===o.some.length),c="all"===o.type&&(!(0,r().$K)(o.all)||0===o.all.length);if(!e&&("none"===o.type||l||c))return!1}else{if("recurrence"!==(null==t?void 0:t.type))return!1;if(!t.recurrence)return!1}return!0}},157955:(e,t,n)=>{n.r(t),n.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>M,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>w,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>_,MAX_RECURRENCE_INTERVAL:()=>f,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>h,RRULE_WEEKDAYS_MAP:()=>g,convertFromUnpersistedRecurrenceConfig:()=>A,convertToUnpersistedRecurrenceConfig:()=>L,getFormattedEndCondition:()=>P,getFormattedNextRecurrenceTime:()=>T,getNextDateUtc:()=>k,getRecurrenceAfter:()=>x,isRunningBetweenMidnightAnd3AM:()=>I,isValidRecurrenceInterval:()=>S,isValidRecurrenceNumberOfRuns:()=>v,rruleFromRecurrence:()=>b,templateAncestorsViolateRecurrenceNesting:()=>C});n(267602),n(653476),n(241792);var o=()=>n(730120);n(670560);function r(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];if(0===n.length)return e.map((e=>[e]));const i=[];for(const a of e)i.push(...r(n[0],...n.slice(1)).map((e=>[a,...e])));return i}var i=()=>n(696459),a=()=>n(326966),s=()=>n(803021),l=()=>n(646574),c=()=>n(998411),d=()=>n(578292);class u extends(()=>n(484885))().Ci{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var p=()=>n(494616);const m=(0,n(788860).vU)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12â€“3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),y={day:u.DAILY,week:u.WEEKLY,month:u.MONTHLY,year:u.YEARLY},g={MO:u.MO,TU:u.TU,WE:u.WE,TH:u.TH,FR:u.FR,SA:u.SA,SU:u.SU},f=99,h=999;function S(e){return(0,a().hj)(e)&&Number.isInteger(e)&&e>0&&e<=f}function v(e){return(0,a().hj)(e)&&Number.isInteger(e)&&e>0&&e<=h}function b(e){const{start_date:t,frequency:n,interval:o,weekdays:a,timezone:l,hour:c,minute:d}=e,p="week"===n&&a?a.map((e=>g[e])):void 0,m={};return(0,i().$K)(e.end_condition)&&("date"===e.end_condition.type?m.until=(0,s().pd)(e.end_condition.end_at):"number"===e.end_condition.type?m.count=e.end_condition.number_of_occurrences:(0,i().t1)(e.end_condition)),"month"===e.frequency&&(0,i().$K)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?m.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?m.byweekday=r(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((e=>{let[t,n]=e;return g[t].nth(n)})):(0,i().t1)(e.monthly_restriction)),new u({freq:y[n],dtstart:(0,s().pd)(t),interval:o,byweekday:p,tzid:l,byhour:c??0,byminute:d??0,bysecond:0,...m})}const _=1,w=1;function C(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const n=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),o=e.length,r=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,i=o>_,a=n.length>=w;return{violatesConstraint:i||a,templateNestingExceedsMaxDepth:i,ancestorHasDailyTemplate:a,nestedDepthOfAutomationAncestors:o,immediateAncestorRecurrenceType:r}}function x(e){const{recurrence:t,afterDate:n}=e;if((0,p().nA)(t)){const e=(0,s().kq)(n);return t.start_date>=e?new Date(t.start_date):void 0}{const e=b(t).after((0,s().pd)(n));if(!e)return;return(0,s().YL)(e)}}function I(e){return 0===e.hour||1===e.hour||2===e.hour}function k(e){return b(e).after((0,s().pd)((0,s().Jh)()))||void 0}function T(e){const{recurrence:t,intl:n}=e,r=k(A(t));if(!r)return;const i=I(t),a=o().ou.fromJSDate(r).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,d().E2)(n)).setZone(t.timezone),s=(0,l().p6)({date:a,dateFormat:"relative",allowRelativeDates:!0,intl:n,shortenDate:!0});if(i)return n.formatMessage(m.dateBetweenMidnightAnd3AM,{date:s});{let e=a.toLocaleString(o().ou.TIME_SIMPLE);return t.timezone!==(0,c().r)()&&(e+=` ${a.toFormat("ZZZZ")}`),n.formatMessage(m.dateAtTime,{date:s,time:e})}}function P(e,t){return(0,i().$K)(e)?"number"===e.type?t.formatMessage(m.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,l().p6)({date:o().ou.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,i().t1)(e):t.formatMessage(m.noEndCondition)}const M=100;function L(e){return{...e,start_date:(0,s().kq)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,s().kq)(e.end_condition.end_at)}:(0,i().t1)(e.end_condition):void 0}}function j(e,t){const n=o().ou.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,s().Jh)(n.toJSDate())}}function A(e){return{...e,start_date:(0,s().Jh)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?j(e,e.end_condition):(0,i().t1)(e.end_condition):void 0}}},77973:(e,t,n)=>{n.d(t,{U:()=>L});var o=n.n(n(389539)),r=(n(821057),n(409045),n(453627),n(994774),n(995194),n(520522),n(200082),n(379976),n(724224),n(761121),n(637133),n(241792),n.n(n(402568))),i=()=>n(513670),a=()=>n(326966),s=()=>n(431595),l=()=>n(24945),c=()=>n(255933);const d={version:8,notion_version:0,variant:2},u={version:8,notion_version:1,variant:2},p=0,m=1,y=6,g=8,f=10,h=Date.UTC(2024,0,1);function S(e,t){if(e)return t[p]=255,t[p+1]=240|15&t[p+1],t;const n=Math.floor(((new Date).getTime()-h)/a().A0);if(n>=4096||n<0)throw new Error("Invalid offsetInDays.");return t[p]=n>>4,t[p+1]=n<<4&240|15&t[p+1],t}function v(e,t){if(e>=2**36||e<0)throw new Error("Invalid spaceShortId.");t[m]=240&t[m]|e/2**32&15;for(let n=0;n<4;n++)t[m+1+n]=e/2**(24-8*n)&255;return t}function b(e,t){const n=e?1:0;return t[y]=d.version<<4&240|d.notion_version<<1&14|1&n,t[g]=d.variant<<6&192|63&t[g],t}function _(e,t){if("block"===e)return t[f]=(0,l().ym)(e)|63&t[f],t;const n=(0,l().ym)(e);return t[f]=n>>8&127,t[f+1]=255&n,t}function w(e,t){const n=(0,l().Nq)(e);return t[f]=127&n|128&t[f],t}function C(e,t,n,o){const r=new Uint8Array(16),i=globalThis.crypto.getRandomValues(r);return n!==c().bx&&S(e,i),v(t,i),b(o,i),_(n,i),T(i)}function x(e,t,n){return I(e,t,n)}function I(e,t,n){const o=r()(n),a=i().yo(o,2).map((e=>parseInt(e.join(""),16)));if((0,l().LV)(t)){if(void 0===e)throw new(s().D3)(`Deterministic ID for '${t}' must specify a space short id`)}else if(void 0!==e)throw new(s().D3)(`Deterministic ID for '${t}' should not provide a space short id`);const c=new Uint8Array(a);return e&&v(e,c),w(t,c),function(e){e[y]=240&u.version<<4|14&u.notion_version<<1|1&e[y],e[g]=192&u.variant<<6|63&e[g]}(c),T(c)}const k=new Array(256).fill(0).map(((e,t)=>t.toString(16).padStart(2,"0")));function T(e){let t=0;return k[e[t++]]+k[e[t++]]+k[e[t++]]+k[e[t++]]+"-"+k[e[t++]]+k[e[t++]]+"-"+k[e[t++]]+k[e[t++]]+"-"+k[e[t++]]+k[e[t++]]+"-"+k[e[t++]]+k[e[t++]]+k[e[t++]]+k[e[t++]]+k[e[t++]]+k[e[t++]]}var P=()=>n(956057);const M=`,${[n(363777).uK].join(",")},`;class L{constructor(e){this.environmentName=void 0,this.mainShortId=void 0,this.getSettings=void 0,this.isServerOriginated=void 0,this.mapSpaceIdToShortId=void 0,this.idCreatorLogger=void 0,this.environmentName=e.environmentName,this.mainShortId=n(631871).jF[this.environmentName],this.getSettings=e.getSettings,this.isServerOriginated=e.isServerOriginated,this.mapSpaceIdToShortId=e.mapSpaceIdToShortId,this.idCreatorLogger=e.idCreatorLogger??(()=>{})}idInMain(e,t){const{enableTestDateOffset:n,enableIdSchema:o}=this.getSettings(t);return!o||M.includes(`,${e},`)?this.legacyId(e,"disabled",t):(this.idCreatorLogger(void 0,e,n?"id_schema_test":"id_schema",t),function(e,t,n,o){return C(e,t,n,o)}(n,this.mainShortId,e,this.isServerOriginated))}pointerInMain(e,t){return{table:e,id:this.idInMain(e,t)}}async idWithSpaceId(e,t,n){const{enableTestDateOffset:r,enableIdSchema:i}=this.getSettings(n);if(!i)return this.legacyId(t,"disabled",n);const a=this.mapSpaceIdToShortId(e),s=o().types.isPromise(a)?await a:a;return s?(this.idCreatorLogger(e,t,r?"id_schema_test":"id_schema",n),C(r,s,t,this.isServerOriginated)):this.legacyId(t,"missing_short_id",n)}async pointerWithSpaceId(e,t,n){return{table:t,spaceId:e,id:await this.idWithSpaceId(e,t,n)}}idWithSpaceShortId(e,t,n){const{enableTestDateOffset:o,enableIdSchema:r}=this.getSettings(n);return r?(this.idCreatorLogger(void 0,t,o?"id_schema_test":"id_schema",n),C(o,e,t,this.isServerOriginated)):this.legacyId(t,"disabled",n)}legacyId(e,t,n){return this.idCreatorLogger(void 0,e,t,n),P().Il()}async deterministicIdWithSpaceId(e,t,n,r){const{enableTestDateOffset:i,enableIdSchema:a}=this.getSettings(r);if(!a)return this.idCreatorLogger(e,t,"disabled",r),P().Ul(n);const s=this.mapSpaceIdToShortId(e),l=o().types.isPromise(s)?await s:s;return l?(this.idCreatorLogger(e,t,i?"id_schema_test":"id_schema",r),x(l,t,n)):(this.idCreatorLogger(e,t,"missing_short_id",r),P().Ul(n))}deterministicIdWithSpaceShortId(e,t,n,o){const{enableTestDateOffset:r,enableIdSchema:i}=this.getSettings(o);return i?(this.idCreatorLogger(void 0,t,r?"id_schema_test":"id_schema",o),x(e,t,n)):(this.idCreatorLogger(void 0,t,"disabled",o),P().Ul(n))}async getSpaceIdCreator(e){if(!e)return new j(e,this.idCreatorLogger);const{enableIdSchema:t}=this.getSettings();if(!t)return new j(e,this.idCreatorLogger);const n=this.mapSpaceIdToShortId(e),r=o().types.isPromise(n)?await n:n;return this.getSpaceShortIdCreator(e,r)}getSpaceIdCreatorSync(e){if(!e)return new j(e,this.idCreatorLogger);const{enableIdSchema:t}=this.getSettings();if(!t)return new j(e,this.idCreatorLogger);const n=this.mapSpaceIdToShortId(e),r=o().types.isPromise(n)?void 0:n;return this.getSpaceShortIdCreator(e,r)}getSpaceShortIdCreator(e,t){const{enableIdSchema:n}=this.getSettings();return n&&t?new A(e,this,t):new j(e,this.idCreatorLogger)}async getSpaceIdCreatorFromModel(e){return e.getShortIdStr()?this.getSpaceShortIdCreator(e.id,Number(e.getShortIdStr())):await this.getSpaceIdCreator(e.id)}}class j{constructor(e,t){this.spaceId=void 0,this.idCreatorLogger=void 0,this.spaceId=e,this.idCreatorLogger=t}idInSavedSpace(e,t){return this.idCreatorLogger(void 0,e,"disabled",t),P().Il()}idInMain(e,t){return this.idCreatorLogger(void 0,e,"disabled",t),P().Il()}deterministicIdInSavedSpace(e,t,n){return this.idCreatorLogger(void 0,e,"disabled",n),P().Ul(t)}pointerInMain(e,t){return{id:this.idInMain(e),table:e}}pointerInSavedSpace(e,t){return{id:this.idInSavedSpace(e),table:e,spaceId:this.spaceId}}getSpaceId(){return this.spaceId}}class A{constructor(e,t,n){this.spaceId=void 0,this.idCreator=void 0,this.spaceShortId=void 0,this.spaceId=e,this.idCreator=t,this.spaceShortId=n}idInSavedSpace(e,t){return this.idCreator.idWithSpaceShortId(this.spaceShortId,e,t)}idInMain(e,t){return this.idCreator.idInMain(e,t)}deterministicIdInSavedSpace(e,t,n){return this.idCreator.deterministicIdWithSpaceShortId(this.spaceShortId,e,t,n)}pointerInMain(e,t){return{id:this.idInMain(e,t),table:e}}pointerInSavedSpace(e,t){return{id:this.idInSavedSpace(e,t),table:e,spaceId:this.spaceId}}getSpaceId(){return this.spaceId}}},259408:(e,t,n)=>{n.d(t,{$W:()=>p,KQ:()=>u,_e:()=>y,Ay:()=>h,fS:()=>d,t:()=>i(),V5:()=>g,Kz:()=>f});n(267602),n(653476);var o=()=>n(513670),r=()=>n(696459),i=()=>n(124199),a=()=>n(629719);const s=["student","personal","plus","business","enterprise"];function l(e){return(0,r().DE)(s,e)}var c=()=>n(122792);const d=["plus","business","enterprise","ai","sites_custom_hostnames"];function u(e,t,n,o){return y(p(e,t,n,o))}function p(e,t,n,o){const{name:i,scope:a,actor:s}=o,l={...o,billingData:a.billingData},c=a.premiumFeatureOverrides,d=i in c?function(e,t,n){const o={type:"contact_account_manager"},i=e[t.name].type;if("check"===i){const e={type:"none"};return!0===n?{type:"available",limit:e}:{type:"upsell",upsell:o,limit:e}}if("per_use"===i){const e=t.amount,r={type:"per_use",amount:n};return"unlimited"===n||n>e?{type:"available",limit:r}:{type:"upsell",upsell:o,limit:r}}if("cumulative"===i){const e=t.amount,r=t.data.current,i={type:"cumulative",current:r,total:n};return"unlimited"===n||n>=r+e?{type:"available",limit:i}:{type:"upsell",upsell:o,limit:i}}(0,r().t1)(i)}(t,o,c[i]):n[i](l);let u;if("available"===d.type){const e=d.upsell?m(a.billingData,d.upsell,o.supportedProducts):void 0;u={...d,upsell:e}}else if("blocked"===d.type){const e=m(a.billingData,d.upsell,o.supportedProducts);u={...d,upsell:e}}else{const e=m(a.billingData,d.upsell,o.supportedProducts),t=function(e){const{actor:t,supportedProducts:n,upsell:o}=e;if(!t.isSpaceAdmin)return"blocked";const i=o.type;switch(i){case"product":return n.includes(o.product)?"upsell":"blocked";case"contact_sales":case"contact_account_manager":return"upsell";default:(0,r().t1)(i)}}({actor:s,supportedProducts:o.supportedProducts,upsell:e});u={...d,type:t,upsell:e}}return Math.random()<.001&&e({level:"info",from:"premiumFeatureFramework",type:"getPremiumFeatureAvailability",data:{featureName:i,featureScope:a,featureActor:s,featureAvailability:d}}),u}function m(e,t,n){if((0,a().Rd)(e.subscription))return{type:"contact_account_manager"};if("product"!==(null==t?void 0:t.type)||n.includes(t.product)||!l(t.product))return t;const r=t.product,i=n.filter((e=>l(e))).filter((e=>"student"!==e)).filter((e=>c().rC[e]>=c().rC[r])),s=(0,o().F)(i,(e=>c().rC[e]));return s?{...t,product:s}:t}function y(e){return"available"===(null==e?void 0:e.type)}function g(e,t){const{available:n}=t;let o,i;return"unavailable"in t?(o=t.unavailable,i=t.unavailable):(o=t.blocked,i=t.upsell),"available"===e.type?n():"upsell"===e.type?i(e):"blocked"===e.type?o(e):(0,r().t1)(e)}function f(e,t){if(void 0!==e)return g(e,{available:()=>{},blocked:t,upsell:()=>{}})}function h(e){return i().object({required:e,optional:{}})}},971095:(e,t,n)=>{n.d(t,{A:()=>o});const o=(0,n(830742).LS)("importEvernote")}}]);