"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[51839],{493843:(e,t,n)=>{n.d(t,{$o:()=>H,Fv:()=>Y,IL:()=>$,J4:()=>B,KA:()=>U,Nf:()=>V,_p:()=>G,cQ:()=>W,f$:()=>O,fX:()=>K,j2:()=>L,k2:()=>Z,mg:()=>Q,mz:()=>q,oP:()=>z,tF:()=>j,td:()=>N,x:()=>X});n(670560),n(267602),n(470928),n(30005),n(241792),n(228244);var o=()=>n(730120),r=()=>n(492788),i=()=>n(506347),a=()=>n(926724),l=()=>n(331540),s=()=>n(874459),c=()=>n(998411),d=()=>n(35980),u=()=>n(513670),p=()=>n(696459),m=()=>n(250303),y=()=>n(384667),f=()=>n(366257),_=()=>n(139224),S=()=>n(421654),v=()=>n(636340),h=()=>n(531515),C=()=>n(47443),g=()=>n(794586),b=()=>n(879952),x=()=>n(970105),k=()=>n(990966),R=()=>n(269299),w=()=>n(932753),I=()=>n(887430),T=()=>n(861026),F=()=>n(804217),P=()=>n(826955),A=()=>n(965903),E=()=>n(807230),M=()=>n(701182),D=()=>n(645843);function L(e){const{collectionViewStore:t,collectionContextStore:n,timelineState:o,environment:r}=e,i=r.currentUser.id,a=(0,M().B8)(t.id),l=(0,M().pQ)(t,r),s=n.permissionScopesStore.state,c=u().Ds((()=>{if(o.destroyed)return;const e={zoomLevel:o.zoomLevel.state,centerTimestamp:(0,M().al)(o)};d().Z.set({userId:i,key:a,value:e})}),1e3),p=u().Ds((()=>{if(o.destroyed||!F().default.state.online||!r.currentUser.isLoggedIn()||!s.canConfigureBlock)return;const e={zoomLevel:o.zoomLevel.state,centerTimestamp:(0,M().al)(o)},n=t.getFormat().timeline_preference;u().Xy(n,e)||R().createAndCommit({userAction:"collectionTimelineViewActions.setRemotePreference",environment:r,canUndo:!0,perform:n=>{S().FH({stores:[t],update:{timeline_preference:e},transaction:n})}})}),5e3);o.savePreference=()=>{c(),p()},V({timelineState:o,environment:r,...l})}function V(e){const{timelineState:t,zoomLevel:n,centerTimestamp:o,environment:i}=e,{savePreference:a}=t,l=i.WindowSizeStore.state.width+2*M().Ge,s=(0,M().x2)(n,l),c=o-s/2,d=o+s/2;t.zoomLevel.setState(n),t.currentRange.setState({startTimestamp:c,endTimestamp:d}),r().default.afterNextFlush((()=>{U({timelineState:t,centerTimestamp:o}),a&&a()}))}function U(e){const{timelineState:t,centerTimestamp:n}=e,{horizontalScroller:o,outerSizeObserver:r}=t;if(!o)return;const i=t.zoomLevel.state,{startTimestamp:a,endTimestamp:l}=t.currentRange.state,s=r.rect.state.width;if(s===(0,M().e$)(i,l-a))return;const c=(0,M().e$)(i,n-a)-s/2;o.scrollLeft=c,t.scrollLeft.setState(c)}function z(e){const{environment:t,store:n,query:o,date:r,schema:i,transaction:a}=e,{timeline_by:l}=o;if(!l)return;const s=n.getAssociatedCollectionStore(),c=(null==s?void 0:s.getMappedProperty(l))??l,d=o.timeline_by_end?(null==s?void 0:s.getMappedProperty(o.timeline_by_end))??o.timeline_by_end:void 0,u=(0,M().TW)({store:n,dateValue:r,query:o,schema:(null==s?void 0:s.getSchema())??i}),p=n.getPropertyValue(c),m=d?n.getPropertyValue(d):void 0;return v().sW({store:n.getPropertiesStore(),data:u,transaction:a}),f().H({environment:t,store:n,dateProperty:{id:c,newValue:(null==u?void 0:u[c])??[],oldValue:p},otherDateProperty:d?{id:d,newValue:(null==u?void 0:u[d])??[],oldValue:m}:void 0}),n}function Y(e){var t;const{environment:n,timelineState:r,collectionStore:i,collectionContextStore:a,store:l,query:d,groupFormat:u,transaction:p}=e,m=r.zoomLevel.state,f=(0,M().al)(r),{snapUnit:_,getDateRangePlaceholderDuration:S}=M().BJ[m],{timeline_by:v}=d;if(!v)return;const h=null===(t=a.groupsStore.getGroupState(u))||void 0===t?void 0:t.resultsStore.state;if(!h)return;const C=o().ou.fromMillis(f),g=(0,M().DS)(C,_),b=(0,M().DS)(S(C),_),x=(0,M().AZ)({startValue:(0,s().Lg)((0,c().r)()),snapUnit:_,desiredStart:g,desiredEnd:b});return z({environment:n,store:l,query:d,schema:i.getSchema(),date:x,transaction:p}),y().$T({environment:n,collectionStore:i,before:!0,store:h[0],insertStores:[l],collectionContextStore:a,groupsPointer:u?[u]:[],transaction:p}),l}function O(e){const{type:t,timelineState:n,store:o,startX:r,query:i,schema:a,intl:l,environment:s}=e,{horizontalScroller:c}=n,{startTimestamp:d}=n.currentRange.state;if(!c)return;b().Ys({environment:s,store:o});const p=c.scrollLeft,{stores:m}=A().default.state,y=u().oA(m.map((e=>{const t=(0,M().bk)({store:e,query:i,schema:a,userId:s.currentUser.id,intl:l,formulasModule:void 0});if(t)return{startValue:t,store:e}})));n.dragState.setState({type:t,startStore:o,stores:y.map((e=>{let{store:t}=e;return t})),startValues:y.map((e=>{let{startValue:t}=e;return t})),temporaryValues:y.map((e=>{let{startValue:t}=e;return t})),startX:r,startStartTimestamp:d,startScrollLeft:p})}function B(e){const{timelineState:t,store:n,startX:o,startY:r,schema:i,collectionContextStore:a,verticalScroller:l}=e,{horizontalScroller:s}=t,{startTimestamp:c}=t.currentRange.state;if(!s||!l)return;const d=s.scrollLeft,u=l.scrollTop,p=(0,M().YE)(a,n,i);t.drawState.setState({startStore:n,startDependencyRelationPointers:p,temporaryDependencyRelationPointers:[...p],startX:o,startY:r,startScrollLeft:d,startScrollTop:u,startStartTimestamp:c,xOffsetPx:0,yOffsetPx:0,tryToCompleteDrawnArrow:!1})}function N(e){const{timelineState:t,currentX:n}=e,{horizontalScroller:o}=t,r=t.zoomLevel.state,i=t.dragState.state,{startTimestamp:a}=t.currentRange.state;if(!i||!o)return;const{type:l,startStartTimestamp:c,startValues:d,startScrollLeft:m,startX:y,startStore:f,stores:_}=i,S=M().BJ[r],{snapUnit:v}=S,h=o.scrollLeft-m+(n-y)+(0,M().e$)(r,a-c),C=(0,M().x2)(r,h),g=d[_.indexOf(f)];let b;if(l===M().px.LeftResizer){const{start:e}=(0,M().XO)(g,v),t=e.plus(C);b=d.map((e=>{const n=(0,M().AZ)({startValue:e,snapUnit:v,desiredStart:t});return(0,s().gW)(n)}))}else if(l===M().px.RightResizer){const{end:e}=(0,M().XO)(g,v),t=e.plus(C);b=d.map((e=>{const n=(0,M().AZ)({startValue:e,snapUnit:v,desiredEnd:t});return(0,s().Qq)(n)}))}else l===M().px.ItemDrag?b=d.map((e=>{const{start:t,end:n}=(0,M().XO)(e,v),o=t.plus(C),r=o.plus(n.valueOf()-t.valueOf());return(0,M().AZ)({startValue:e,snapUnit:v,desiredStart:o,desiredEnd:r})})):(0,p().t1)(l);u().Xy(i.temporaryValues,b)||t.dragState.setState({...i,temporaryValues:b})}function q(e){const{timelineState:t,currentX:n,currentY:o,verticalScroller:r}=e,i=t.drawState.state,a=t.zoomLevel.state,{startTimestamp:l}=t.currentRange.state,{horizontalScroller:s}=t;if(!i||!s||!r)return;const{startDependencyRelationPointers:c,startStore:d,startX:p,startY:m,startScrollLeft:y,startScrollTop:f,startStartTimestamp:_}=i,S=s.scrollLeft,v=r.scrollTop,h=S-y+(n-p)+(0,M().e$)(a,l-_),C=v-f+(o-m),g=t.hoveredItem.state;if(g&&g!==d&&!c.some((e=>e.id===g.id))){const e=[...c,{table:"block",id:g.id,spaceId:g.getSpaceId()}];u().Xy(i.temporaryDependencyRelationPointers,e)||t.drawState.setState({...i,temporaryDependencyRelationPointers:e,xOffsetPx:void 0,yOffsetPx:void 0})}else t.drawState.setState({...i,temporaryDependencyRelationPointers:[...c],xOffsetPx:h,yOffsetPx:C})}function K(e){const{environment:t,collectionContextStore:n,timelineState:o,query:r,schema:i,transaction:a}=e,l=o.dragState.state,{timeline_by:s}=r;if(!l||!s)return;const{temporaryValues:c,stores:d}=l;c.forEach(((e,o)=>{const l=d[o];z({environment:t,store:l,query:r,schema:i,transaction:a,date:e}),m().rv({environment:t,collectionContextStore:n,block_id:l.id,property:s,property_type:"date",from:"timeline"})})),o.dragState.setState(void 0)}function H(e){var t;const{timelineState:n,environment:o,transaction:r,collectionContextStore:i,isFullScreen:a,isRootChild:l}=e,s=n.drawState.state,c=n.dateRangePlaceholder.state;if(!s)return;const{startStore:d,startDependencyRelationPointers:u,temporaryDependencyRelationPointers:p}=s;if(!d)return void n.drawState.setState(void 0);let y;if(c.active){const{date:e,store:t,parentStore:a,groupFormat:l,newTimelineItemProps:s,existingTimelineItemProps:u}=c;if(t&&u){const{query:n,schema:i}=u;z({environment:o,store:t,query:n,schema:i,date:e,transaction:r}),y={table:"block",id:t.id,spaceId:d.getSpaceId()}}else if(s){const{query:n,schema:c,isFullScreen:u,canEditTimelineItems:p,subitemPath:m}=s,f=Q({environment:o,date:e,store:t,parentStore:a,query:n,schema:c,isFullScreen:u,groupFormat:l,canEditTimelineItems:p,collectionContextStore:i,subitemPath:m,transaction:r,from:"timeline_complete_draw"});f&&(y={table:"block",id:f.id,spaceId:d.getSpaceId()})}n.dateRangePlaceholder.setState({active:!1})}else y=p.find((e=>!u.includes(e)));const f=(0,M()._e)(i);if(f){const{property:e}=f;y&&(h().hE({environment:o,propertyWithInverse:f,sourceStore:d,destStore:P().G.createChildStore(d,y),position:{type:"after"},transaction:r}),m().rv({environment:o,collectionContextStore:i,block_id:d.id,property:e,property_type:"relation",from:"timeline",isFromBulkActionsToolbar:!1,isUnthrottled:!0})),n.drawState.setState(void 0)}else _().wl({item:{type:"dependencies",from:"view_options"},collectionSettingsStore:i.settingsStore}),n.drawState.setState({...s,tryToCompleteDrawnArrow:!0});const S=null===(t=y)||void 0===t?void 0:t.id;S&&(0,D().LE)(o,{...(0,T().Pn)(i),...(0,D().Ii)({environment:o,collectionContextStore:i,timelineState:n,isFullScreen:a,isRootChild:l}),dependenciesPropertyID:null==f?void 0:f.property,blockedByStoreID:d.id,blockingStoreID:S})}function W(e){const{timelineState:t,environment:n}=e;t.dragState.state&&(t.dragState.setState(void 0),b().ZH({environment:n}))}function X(e){const{timelineState:t,environment:n}=e;t.drawState.state&&(t.drawState.setState(void 0),b().ZH({environment:n}))}function Z(e){const{stores:t,collectionViewStore:n,schema:o,transaction:r}=e,i=n.getType(),a=n.getQuery(o),l=[];a&&("calendar"===i?a.calendar_by&&l.push(a.calendar_by):"timeline"===i&&(a.timeline_by&&l.push(a.timeline_by),a.timeline_by_end&&l.push(a.timeline_by_end)));for(const s of t)for(const e of l)x().sO({environment:s.environment,store:s.getPropertyStore(e),value:void 0,transaction:r})}function $(e){const{dependency:t,collectionContextStore:n,environment:o,timelineState:r,isFullScreen:i,isRootChild:a}=e,l=(0,M()._e)(n),s=n.collectionStore();if(!l||!s)return;const{property:c}=l,{store:d,relationPointer:u}=t,p=d.getSchema()[c];p&&"relation"===p.type&&(R().createAndCommit({userAction:"CollectionTimelineDependenciesOverlay.handleRemoveRelation",environment:o,canUndo:!0,perform:e=>{h().Bl({environment:o,propertyWithInverse:l,sourceStore:d,destStore:P().G.createChildStore(d,u),transaction:e}),m().rv({environment:o,block_id:u.id,property:c,property_type:p.type,from:"timeline",collectionContextStore:n,isFromBulkActionsToolbar:!1,isUnthrottled:!0})}}),(0,D().lf)(o,{...(0,T().Pn)(n),...(0,D().Ii)({environment:o,collectionContextStore:n,timelineState:r,isFullScreen:i,isRootChild:a}),dependenciesPropertyID:c,blockedByStoreID:d.id,blockingStoreID:u.id}))}function j(e){const{collectionViewStore:t,newProperty:n,transaction:o}=e;S().FH({stores:[t],update:{timeline_arrows_by:{property:n}},transaction:o})}function G(e){var t;const{collectionContextStore:n,relationPropertyId:o,transaction:r}=e,i=n.collectionStore();if(!i)return;const s=o?i.getSchema()[o]:void 0,c="relation"===(null==s?void 0:s.type)&&s.property&&"relation"===(null===(t=i.getSchema()[s.property])||void 0===t?void 0:t.type)?s.property:void 0;S().FH({stores:[i],update:{collection_default_arrows_by:o,...i.getFormat().app_config_uri===l().iS?{app_uri_map:{...i.getFormat().app_uri_map?i.getFormat().app_uri_map:{},[a().Es.BlockingRelation]:o,[a().Es.BlockedRelation]:c}}:{}},transaction:r})}function Q(e){const{environment:t,transaction:n,date:o,parentStore:r,query:a,schema:l,isFullScreen:s,groupFormat:c,canEditTimelineItems:d,collectionContextStore:u,from:p}=e;if(!(0,E().ww)(t))return;const m=c?[c]:[],f=u.groupsStore.getGroupState(m);if(!f)return;if(r)return function(e){const{environment:t,transaction:n,date:o,store:r,parentStore:a,query:l,schema:s,groupFormat:c,canEditTimelineItems:d,collectionContextStore:u,subitemPath:p}=e;if(!r||!a)return;const m=c?[c]:[],f=y().yk({environment:t,collectionContextStore:u,groupsPointer:m,store:r,before:!1,collectionStore:a,transaction:n,subitemPath:p,subitemInsertDirection:"into"});if(f){if(z({environment:t,store:f,query:l,schema:s,date:o,transaction:n}),t.device.isMobile)C()._c({environment:t,store:f,pageVisitSource:i().tY.Create});else if(f&&d){const e=f.getBlockTitleStore();k().setSelectionAtStart({store:e})}return f}}(e);u.searchQueryStore.state&&w().Ug({searchQuery:"",collectionContextStore:u,isFullScreen:s});const _=y().IW({environment:t,collectionContextStore:u,groupsPointer:m,shouldCoerce:!0,templateStore:u.defaultPageTemplateStore.state,transaction:n,from:{createBlock:p},inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache});if(!_)return;const S=_.coercionSucceeded,v=_.newStore;if(z({environment:t,store:v,query:a,schema:l,date:o,transaction:n}),t.device.isMobile)C()._c({environment:t,store:v,pageVisitSource:i().tY.Create});else if(S&&d){const e=v.getBlockTitleStore();k().setSelectionAtEnd({store:e})}else g().CH({environment:t,store:v,peekMode:(0,I().kr)(u),resultsStore:null==f?void 0:f.resultsStore,collectionContextStore:u,pageVisitSource:i().tY.Create});return v}},645843:(e,t,n)=>{n.d(t,{Al:()=>s,CB:()=>c,H6:()=>l,Ii:()=>y,LE:()=>p,gw:()=>d,iR:()=>i,lf:()=>m,ne:()=>u,zI:()=>a});n(267602),n(653476);var o=()=>n(594546),r=()=>n(701182);function i(e,t){o().lu(e,"timeline_view","timeline_view",5,t)}function a(e,t){o().K4(e,"timeline_zoom_level_update",t)}function l(e,t){o().K4(e,"timeline_today_click",t)}function s(e,t){o().K4(e,"timeline_shift_time_click",t)}function c(e,t){o().K4(e,"timeline_toggle_table_click",t)}function d(e,t){o().K4(e,"timeline_item_scroll_arrow_click",t)}function u(e,t){o().K4(e,"timeline_item_resize",t)}function p(e,t){o().K4(e,"timeline_dependency_arrow_add",t)}function m(e,t){o().K4(e,"timeline_dependency_arrow_delete",t)}function y(e){const{environment:t,collectionContextStore:n,timelineState:o,isFullScreen:i,isRootChild:a}=e,l=o.zoomLevel.state,s=n.normalizedFormatStore.state,c=(0,r().C1)({environment:t,format:s,isFullScreen:i,isRootChild:a}),d=c&&s.timeline_table_properties?s.timeline_table_properties.length:0,u=s.timeline_properties||[],p=u.filter((e=>"title"!==e.property));return{zoom_level:l,show_table:c,show_table_properties_count:d,show_timeline_title:u.length!==p.length,show_timeline_properties_count:p.length}}},887330:(e,t,n)=>{n.d(t,{C:()=>r,L:()=>i});var o=()=>n(707513);function r(e){const{theme:t,isInHomeWidget:n}=e;return{display:"flex",alignItems:"center",fontSize:14,padding:6,...n?{height:24,width:24,color:t.lightTextColor,fill:t.lightIconColor}:{height:28,width:28,color:t.mediumIconColor,fill:t.mediumIconColor},fontWeight:o().Ue.regular,lineHeight:1,borderRadius:6}}function i(e){const{theme:t}=e;return{display:"flex",alignItems:"center",fontSize:14,height:28,padding:6,color:t.mediumIconColor,fontWeight:o().Ue.regular,lineHeight:1,borderRadius:4}}},681035:(e,t,n)=>{n.d(t,{S:()=>i});var o=()=>n(677559);const r=new(o().Ss)("CollectionItemCover",(async()=>{const{CollectionItemCover:e}=await Promise.all([n.e(62743),n.e(37912)]).then(n.bind(n,682652));return{CollectionItemCover:e}})),i=(0,o().kF)(r,(e=>e.CollectionItemCover))},850790:(e,t,n)=>{n.d(t,{K:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("boltFilled",{svg:(0,o.jsx)("path",{d:"M0 12.117c0 .38.293.664.703.664h5.518l-2.91 7.91c-.381 1.006.664 1.543 1.318.723l8.877-11.094c.166-.205.254-.4.254-.625 0-.371-.293-.664-.703-.664H7.539l2.91-7.91C10.83.115 9.785-.422 9.131.408L.254 11.492c-.166.215-.254.41-.254.625z"}),viewBox:"0 0 14 22"})},756085:(e,t,n)=>{n.d(t,{f:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("chevronLeft",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M3.61816 8.06445C3.61816 8.29688 3.70703 8.49512 3.8916 8.67285L9.22363 13.8887C9.36719 14.0391 9.55859 14.1143 9.77734 14.1143C10.2217 14.1143 10.5703 13.7725 10.5703 13.3213C10.5703 13.1025 10.4814 12.9043 10.3311 12.7539L5.52539 8.06445L10.3311 3.375C10.4814 3.21777 10.5703 3.01953 10.5703 2.80078C10.5703 2.35645 10.2217 2.01465 9.77734 2.01465C9.55859 2.01465 9.36719 2.08984 9.22363 2.24023L3.8916 7.45605C3.70703 7.63379 3.625 7.83203 3.61816 8.06445Z"})})},430267:(e,t,n)=>{n.d(t,{_:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("cursor",{viewBox:"0 0 21 22",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.11946 12.3088C3.83546 11.9498 3.49046 11.2158 2.87646 10.3248C2.52846 9.82078 1.66546 8.87178 1.40846 8.38978C1.18546 7.96378 1.20946 7.77278 1.26246 7.41978C1.35646 6.79178 2.00046 6.30278 2.68746 6.36878C3.20646 6.41778 3.64646 6.76078 4.04246 7.08478C4.28146 7.27978 4.57546 7.65878 4.75246 7.87278C4.91546 8.06878 4.95546 8.14978 5.12946 8.38178C5.35946 8.68878 5.43146 8.84078 5.34346 8.50278C5.27246 8.00678 5.15646 7.15978 4.98846 6.41078C4.86046 5.84278 4.82946 5.75378 4.70746 5.31778C4.57846 4.85378 4.51246 4.52878 4.39146 4.03678C4.30746 3.68878 4.15646 2.97778 4.11546 2.57778C4.05846 2.03078 4.02846 1.13878 4.37946 0.728782C4.65446 0.407782 5.28546 0.310782 5.67646 0.508782C6.18846 0.767782 6.47946 1.51178 6.61246 1.80878C6.85146 2.34278 6.99946 2.95978 7.12846 3.76978C7.29246 4.80078 7.59446 6.23178 7.60446 6.53278C7.62846 6.16378 7.53646 5.38678 7.60046 5.03278C7.65846 4.71178 7.92846 4.33878 8.26646 4.23778C8.55246 4.15278 8.88746 4.12178 9.18246 4.18278C9.49546 4.24678 9.82546 4.47078 9.94846 4.68178C10.3105 5.30578 10.3175 6.58078 10.3325 6.51278C10.4185 6.13678 10.4035 5.28378 10.6165 4.92878C10.7565 4.69478 11.1135 4.48378 11.3035 4.44978C11.5975 4.39778 11.9585 4.38178 12.2675 4.44178C12.5165 4.49078 12.8535 4.78678 12.9445 4.92878C13.1625 5.27278 13.2865 6.24578 13.3235 6.58678C13.3385 6.72778 13.3975 6.19478 13.6165 5.85078C14.0225 5.21178 15.4595 5.08778 15.5145 6.48978C15.5395 7.14378 15.5345 7.11378 15.5345 7.55378C15.5345 8.07078 15.5225 8.38178 15.4945 8.75578C15.4635 9.15578 15.3775 10.0598 15.2525 10.4978C15.1665 10.7988 14.8815 11.4758 14.6005 11.8818C14.6005 11.8818 13.5265 13.1318 13.4095 13.6948C13.2915 14.2568 13.3305 14.2608 13.3075 14.6598C13.2845 15.0578 13.4285 15.5818 13.4285 15.5818C13.4285 15.5818 12.6265 15.6858 12.1945 15.6168C11.8035 15.5538 11.3195 14.7758 11.1945 14.5378C11.0225 14.2098 10.6555 14.2728 10.5125 14.5148C10.2875 14.8978 9.80346 15.5848 9.46146 15.6278C8.79346 15.7118 7.40746 15.6588 6.32246 15.6478C6.32246 15.6478 6.50746 14.6368 6.09546 14.2898C5.79046 14.0308 5.26546 13.5058 4.95146 13.2298L4.11946 12.3088Z",fill:"white"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.11946 12.3088C3.83546 11.9498 3.49046 11.2158 2.87646 10.3248C2.52846 9.82078 1.66546 8.87178 1.40846 8.38978C1.18546 7.96378 1.20946 7.77278 1.26246 7.41978C1.35646 6.79178 2.00046 6.30278 2.68746 6.36878C3.20646 6.41778 3.64646 6.76078 4.04246 7.08478C4.28146 7.27978 4.57546 7.65878 4.75246 7.87278C4.91546 8.06878 4.95546 8.14978 5.12946 8.38178C5.35946 8.68878 5.43146 8.84078 5.34346 8.50278C5.27246 8.00678 5.15646 7.15978 4.98846 6.41078C4.86046 5.84278 4.82946 5.75378 4.70746 5.31778C4.57846 4.85378 4.51246 4.52878 4.39146 4.03678C4.30746 3.68878 4.15646 2.97778 4.11546 2.57778C4.05846 2.03078 4.02846 1.13878 4.37946 0.728782C4.65446 0.407782 5.28546 0.310782 5.67646 0.508782C6.18846 0.767782 6.47946 1.51178 6.61246 1.80878C6.85146 2.34278 6.99946 2.95978 7.12846 3.76978C7.29246 4.80078 7.59446 6.23178 7.60446 6.53278C7.62846 6.16378 7.53646 5.38678 7.60046 5.03278C7.65846 4.71178 7.92846 4.33878 8.26646 4.23778C8.55246 4.15278 8.88746 4.12178 9.18246 4.18278C9.49546 4.24678 9.82546 4.47078 9.94846 4.68178C10.3105 5.30578 10.3175 6.58078 10.3325 6.51278C10.4185 6.13678 10.4035 5.28378 10.6165 4.92878C10.7565 4.69478 11.1135 4.48378 11.3035 4.44978C11.5975 4.39778 11.9585 4.38178 12.2675 4.44178C12.5165 4.49078 12.8535 4.78678 12.9445 4.92878C13.1625 5.27278 13.2865 6.24578 13.3235 6.58678C13.3385 6.72778 13.3975 6.19478 13.6165 5.85078C14.0225 5.21178 15.4595 5.08778 15.5145 6.48978C15.5395 7.14378 15.5345 7.11378 15.5345 7.55378C15.5345 8.07078 15.5225 8.38178 15.4945 8.75578C15.4635 9.15578 15.3775 10.0598 15.2525 10.4978C15.1665 10.7988 14.8815 11.4758 14.6005 11.8818C14.6005 11.8818 13.5265 13.1318 13.4095 13.6948C13.2915 14.2568 13.3305 14.2608 13.3075 14.6598C13.2845 15.0578 13.4285 15.5818 13.4285 15.5818C13.4285 15.5818 12.6265 15.6858 12.1945 15.6168C11.8035 15.5538 11.3195 14.7758 11.1945 14.5378C11.0225 14.2098 10.6555 14.2728 10.5125 14.5148C10.2875 14.8978 9.80346 15.5848 9.46146 15.6278C8.79346 15.7118 7.40746 15.6588 6.32246 15.6478C6.32246 15.6478 6.50746 14.6368 6.09546 14.2898C5.79046 14.0308 5.26546 13.5058 4.95146 13.2298L4.11946 12.3088Z",stroke:"#1D1B16",strokeWidth:"0.75",strokeLinecap:"round",strokeLinejoin:"round"}),(0,o.jsx)("path",{d:"M12.3535 12.6641V9.20508",stroke:"#1D1B16",strokeWidth:"0.75",strokeLinecap:"round"}),(0,o.jsx)("path",{d:"M10.3383 12.6761L10.3223 9.20312",stroke:"#1D1B16",strokeWidth:"0.75",strokeLinecap:"round"}),(0,o.jsx)("path",{d:"M8.3418 9.23438L8.3628 12.6604",stroke:"#1D1B16",strokeWidth:"0.75",strokeLinecap:"round"})]})})},109806:(e,t,n)=>{n.d(t,{c:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("eye",{viewBox:"0 0 32 32",svg:(0,o.jsx)("path",{d:"M16.006 25.812c8.863 0 14.994-7.17 14.994-9.406C31 14.16 24.858 7 16.006 7 7.252 7 1 14.16 1 16.406c0 2.236 6.252 9.406 15.006 9.406zm0-3.242a6.194 6.194 0 01-6.197-6.164c-.012-3.452 2.744-6.164 6.197-6.164 3.419 0 6.185 2.711 6.185 6.164 0 3.364-2.766 6.164-6.185 6.164zm0-3.94c1.228 0 2.246-1.007 2.246-2.224 0-1.228-1.018-2.235-2.246-2.235-1.24 0-2.258 1.007-2.258 2.235 0 1.217 1.018 2.224 2.258 2.224z"})})},801325:(e,t,n)=>{n.d(t,{e:()=>o().e});var o=()=>n(319427)},848854:(e,t,n)=>{n.d(t,{v:()=>o().v});var o=()=>n(545914)},738740:(e,t,n)=>{n.d(t,{k:()=>C});var o=n(667294),r=()=>n(219727),i=()=>n(142735),a=()=>n(846550),l=()=>n(61951),s=()=>n(317924),c=()=>n(879952),d=()=>n(990966),u=()=>n(573357),p=()=>n(708518),m=()=>n(764767),y=()=>n(205228),f=()=>n(148126),_=()=>n(838266),S=()=>n(110372),v=()=>n(878797),h=n(785893);function C(e){const{messageKey:t,desktopRenderInner:n,desktopInnerStyle:o,desktopOnDismiss:c,phoneRenderInner:d,phoneInnerStyle:m}=e,C=(0,r().O7)(),b=(0,r().Fy)(),x=(0,a().yK)((e=>({modalStyle:{background:e.surface.wash,borderRadius:12,...o}})),[o]),k=(0,i().VK)((()=>{var e;const t=(0,s().w_)(C.TabbedRouterStore.state);return"web"===t.type&&((null===(e=t.redirectedTo)||void 0===e?void 0:e.route)||t.route)}),[C.TabbedRouterStore]),R=(0,i().VK)((()=>!(b.isPhone&&(0,f().__)(C)&&(!k||"page"!==k.name))&&!y().default.isAdminMode&&!_().default.state.open),[b.isPhone,C,k]),w=(0,i().VK)((()=>v().default.isVisible(t)),[t])&&R;return(0,l().Z)((()=>{S().gF(C,{callout_key:t,is_forced:v().default.isForced(t)})}),w),w?b.isPhone?(0,h.jsx)(g,{messageKey:t,renderInner:d,innerStyle:m}):(0,h.jsx)(p().Z,{open:!0,preventHideChildrenWhileOpening:!0,onDismiss:c,innerStyle:x.modalStyle,render:()=>(0,h.jsx)(u().Z,{capture:!0,allowEsc:!0,render:n})}):null}function g(e){const{renderInner:t,innerStyle:n,messageKey:i}=e,a=(0,r().O7)(),l=(0,o.useCallback)((()=>{S().bl(a,{callout_key:i,dismiss_type:"modal_background_clicked"})}),[a,i]),s=(0,o.useCallback)((()=>{S().bl(a,{callout_key:i,dismiss_type:"modal_dismiss_clicked"})}),[a,i]);return(0,o.useEffect)((()=>{c().ZH({environment:a}),d().blurActiveElement()}),[a]),(0,h.jsx)(m().n,{renderInner:t,innerStyle:n,onDismiss:l,onClosed:s})}},994875:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});class o extends(()=>n(263184))().default{getInitialState(){return{discussionIdToExpansionStartPointMap:{}}}}const r=new o},877727:(e,t,n)=>{n.d(t,{C3:()=>l,D:()=>s,QZ:()=>a,fo:()=>i});var o=()=>n(146947),r=()=>n(749826);function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r().default.checkGate({gateName:"packaging_m2_additional_entrypoints"})&&a(e,t)}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!e.device.isPhone&&l(t)}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r().default.checkGate({gateName:"workflow_templates_prototype",...e})||"control"!==s(e)}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o().locale.startsWith("en-")||r().default.checkGate({gateName:"packaging_m2_localize_templates"})?r().default.getEligibleGroup({experimentId:"packaging_m2_entry_point",defaultGroup:"control",...e}):"control"}},999582:(e,t,n)=>{n.d(t,{Z:()=>i});class o extends(()=>n(263184))().default{getInitialState(){return{}}}const r=new o;n(947115).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",r);const i=r},29488:(e,t,n)=>{function o(e){return`${e.table}:${e.id}`}n.d(t,{O:()=>o})},912203:(e,t,n)=>{n.d(t,{$M:()=>_,GQ:()=>b,Jy:()=>R,LF:()=>k,NO:()=>m,Of:()=>w,SF:()=>u,TX:()=>g,XO:()=>S,Y_:()=>d,Ym:()=>f,bD:()=>h,cO:()=>p,fo:()=>x,rR:()=>y});n(267602),n(653476),n(228244);var o=()=>n(513670),r=()=>n(696459),i=()=>n(226413),a=()=>n(109477),l=()=>n(455222),s=()=>n(305580);(0,r().AO)((e=>(0,r().$K)(e)&&(0,r().$K)(e.target)&&(0,r().$K)(e.external_bot_id)?{true:{external_bot_id:e.external_bot_id,target:e.target}}:{false:e}));const c={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1},d={checkbox:[{type:"checkbox"}],date:[{type:"date"}],email:[{type:"text"}],multi_select:[{type:"text"},{of:{type:"text"},type:"array"}],number:[{type:"number"}],person:[{type:"person"},{of:{type:"person"},type:"array"}],phone_number:[{type:"text"}],relation:[{type:"block"},{of:{type:"block"},type:"array"}],select:[{type:"text"},{of:{type:"text"},type:"array"}],status:[{type:"text"},{of:{type:"text"},type:"array"}],text:void 0,title:void 0,url:[{type:"text"}]};function u(e){return Boolean(c[e.type]&&!(0,i().NK)(e)&&(!(0,i().qQ)(e)||void 0===(0,i().q3)(e)))}function p(e){const{collectionFormat:t,collectionSchema:n,filter:l,sort:c,sourcePropertyIds:d}=e,p=(d??(0,r().Yd)(n)).filter(((t,o,r)=>{const a=n[t];return!(!a||!u(a))&&(("relation"!==a.type||!e.restrictCrossSpace||!(0,i().Qh)(e.spaceId,a))&&(!l||l([t,a],o,n)))}));if(0===p.length)return[];if(!t||!1===c)return p;const m=(0,s().i)(t,n,void 0,a().j5.Page).collection_page_properties||[];return o().MR(p,(e=>m.findIndex((t=>t.property===e))))}function m(e){const{collectionFormat:t,collectionSchema:n,sort:l}=e,c=(0,r().Yd)(n).filter(((e,t,o)=>{const r=n[e];return!(!r||!(0,i().U8)(r))}));if(0===c.length)return[];if(!t||!1===l)return c;const d=(0,s().i)(t,n,void 0,a().j5.Page).collection_page_properties||[];return o().MR(c,(e=>d.findIndex((t=>t.property===e))))}function y(e){return e.type===l().$E.InvalidCharacter?{type:e.type,character:e.character}:e.type===l().$E.TokenExpected?{type:e.type,token:e.token}:e.type===l().FY.MissingSchemaPropertyOnThisRow||e.type===l().FY.MissingSchemaPropertyOnCollection?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===l().FY.ThisRowBlockPropertyMismatchCollection?{type:e.type,thisRowCollection:e.thisRowCollection}:e.type===l().FY.MissingContextVariable?{type:e.type,valueId:e.valueId}:e.type===l().FY.FunctionCallTooFewArguments?{type:e.type,numArguments:e.numArguments}:e.type===l().FY.FunctionCallUnexpectedArgument?{type:e.type,parameterIndex:e.parameterIndex}:e.type===l().FY.FunctionCallArgumentWrongType?{type:e.type,argumentType:e.argumentType,libraryFunctionName:e.libraryFunction.name,parameterIndex:e.parameterIndex}:e.type===l().FY.MissingDataDependencyBlock?{type:e.type,blockPointer:e.blockPointer}:e.type===l().FY.MissingDataDependencyPerson?{type:e.type,personPointer:e.personPointer}:e.type===l().FY.MemberPropertyMismatchCollection?{type:e.type,blockCollection:e.blockCollection}:e.type===l().FY.DownstreamParseFailure?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===l().FY.ContextVariableWrongType?{type:e.type,valueId:e.valueId,expectedType:e.expectedType,resultType:e.resultType}:e.type===l().FY.DisallowedValueType?{type:e.type,expressionValue:e.expressionValue,allowedValueTypes:e.allowedValueTypes}:e.type===l().FY.LibraryFunctionExecutionError?{type:e.type,error:e.error,libraryFunctionName:e.libraryFunction.name}:{type:e.type}}const f={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,button:!1,file:!1,verification:!1,auto_increment_id:!1,created_by:!1,created_time:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1};function _(e){return Boolean(f[e.type])}function S(e){const{collectionFormat:t,collectionSchema:n,filter:l,sort:c}=e,d=(0,r().Yd)(n).filter(((e,t,o)=>{var r;const a=n[e];return!(!a||!f[a.type])&&((!(0,i().qQ)(a)||null===(r=(0,i().q3)(a))||void 0===r||!r.auto_update_on_edit)&&(!l||l([e,a],t,n)))}));if(0===d.length)return[];if(!t||!1===c)return d;const u=(0,s().i)(t,n,void 0,a().j5.Page).collection_page_properties||[];return o().MR(d,(e=>u.findIndex((t=>t.property===e))))}const v={checkbox:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,date:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1};function h(e){return v[e.type]}const C={checkbox:!0,created_by:!0,created_time:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,last_edited_by:!0,last_edited_time:!0,auto_increment_id:!1,button:!1,file:!1,formula:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1};function g(e){return C[e.type]}function b(e){return 0===e}function x(e){return function(e){return"button_block"===e||"button_property"===e}(e)}function k(e){const{property:t,collectionSchema:n}=e;return!!n&&!n[t]}function R(e){const{collectionSchema:t,property:n,type:o}=e,r=null==t?void 0:t[n];return!r||("action"===o?!u(r):!f[r.type])}function w(e){let{automationTrigger:t,collectionSchema:n}=e;if("event"===(null==t?void 0:t.type)||"notification_event"===(null==t?void 0:t.type)){const{pagesAdded:e,pagePropertiesEdited:o,source:i}=t.event;if(void 0===i)return!1;const a="some"===o.type&&o.some,l="all"===o.type&&o.all;if((a||l||[]).some((e=>k({collectionSchema:n,property:e.property})||R({collectionSchema:n,property:e.property,type:"trigger"}))))return!1;const s="some"===o.type&&(!(0,r().$K)(o.some)||0===o.some.length),c="all"===o.type&&(!(0,r().$K)(o.all)||0===o.all.length);if(!e&&("none"===o.type||s||c))return!1}else{if("recurrence"!==(null==t?void 0:t.type))return!1;if(!t.recurrence)return!1}return!0}},157955:(e,t,n)=>{n.r(t),n.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>F,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>b,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>g,MAX_RECURRENCE_INTERVAL:()=>_,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>S,RRULE_WEEKDAYS_MAP:()=>f,convertFromUnpersistedRecurrenceConfig:()=>E,convertToUnpersistedRecurrenceConfig:()=>P,getFormattedEndCondition:()=>T,getFormattedNextRecurrenceTime:()=>I,getNextDateUtc:()=>w,getRecurrenceAfter:()=>k,isRunningBetweenMidnightAnd3AM:()=>R,isValidRecurrenceInterval:()=>v,isValidRecurrenceNumberOfRuns:()=>h,rruleFromRecurrence:()=>C,templateAncestorsViolateRecurrenceNesting:()=>x});n(267602),n(653476),n(241792);var o=()=>n(730120);n(670560);function r(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];if(0===n.length)return e.map((e=>[e]));const i=[];for(const a of e)i.push(...r(n[0],...n.slice(1)).map((e=>[a,...e])));return i}var i=()=>n(696459),a=()=>n(326966),l=()=>n(803021),s=()=>n(646574),c=()=>n(998411),d=()=>n(578292);class u extends(()=>n(484885))().Ci{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var p=()=>n(494616);const m=(0,n(788860).vU)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12â€“3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),y={day:u.DAILY,week:u.WEEKLY,month:u.MONTHLY,year:u.YEARLY},f={MO:u.MO,TU:u.TU,WE:u.WE,TH:u.TH,FR:u.FR,SA:u.SA,SU:u.SU},_=99,S=999;function v(e){return(0,a().hj)(e)&&Number.isInteger(e)&&e>0&&e<=_}function h(e){return(0,a().hj)(e)&&Number.isInteger(e)&&e>0&&e<=S}function C(e){const{start_date:t,frequency:n,interval:o,weekdays:a,timezone:s,hour:c,minute:d}=e,p="week"===n&&a?a.map((e=>f[e])):void 0,m={};return(0,i().$K)(e.end_condition)&&("date"===e.end_condition.type?m.until=(0,l().pd)(e.end_condition.end_at):"number"===e.end_condition.type?m.count=e.end_condition.number_of_occurrences:(0,i().t1)(e.end_condition)),"month"===e.frequency&&(0,i().$K)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?m.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?m.byweekday=r(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((e=>{let[t,n]=e;return f[t].nth(n)})):(0,i().t1)(e.monthly_restriction)),new u({freq:y[n],dtstart:(0,l().pd)(t),interval:o,byweekday:p,tzid:s,byhour:c??0,byminute:d??0,bysecond:0,...m})}const g=1,b=1;function x(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const n=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),o=e.length,r=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,i=o>g,a=n.length>=b;return{violatesConstraint:i||a,templateNestingExceedsMaxDepth:i,ancestorHasDailyTemplate:a,nestedDepthOfAutomationAncestors:o,immediateAncestorRecurrenceType:r}}function k(e){const{recurrence:t,afterDate:n}=e;if((0,p().nA)(t)){const e=(0,l().kq)(n);return t.start_date>=e?new Date(t.start_date):void 0}{const e=C(t).after((0,l().pd)(n));if(!e)return;return(0,l().YL)(e)}}function R(e){return 0===e.hour||1===e.hour||2===e.hour}function w(e){return C(e).after((0,l().pd)((0,l().Jh)()))||void 0}function I(e){const{recurrence:t,intl:n}=e,r=w(E(t));if(!r)return;const i=R(t),a=o().ou.fromJSDate(r).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,d().E2)(n)).setZone(t.timezone),l=(0,s().p6)({date:a,dateFormat:"relative",allowRelativeDates:!0,intl:n,shortenDate:!0});if(i)return n.formatMessage(m.dateBetweenMidnightAnd3AM,{date:l});{let e=a.toLocaleString(o().ou.TIME_SIMPLE);return t.timezone!==(0,c().r)()&&(e+=` ${a.toFormat("ZZZZ")}`),n.formatMessage(m.dateAtTime,{date:l,time:e})}}function T(e,t){return(0,i().$K)(e)?"number"===e.type?t.formatMessage(m.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,s().p6)({date:o().ou.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,i().t1)(e):t.formatMessage(m.noEndCondition)}const F=100;function P(e){return{...e,start_date:(0,l().kq)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,l().kq)(e.end_condition.end_at)}:(0,i().t1)(e.end_condition):void 0}}function A(e,t){const n=o().ou.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,l().Jh)(n.toJSDate())}}function E(e){return{...e,start_date:(0,l().Jh)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?A(e,e.end_condition):(0,i().t1)(e.end_condition):void 0}}}}]);