"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[78421],{584006:(e,t,i)=>{i.d(t,{U:()=>d});i(667294);var n=()=>i(846550),o=()=>i(92175),s=()=>i(788860),a=()=>i(67961),l=i(785893);function r(e){const{title:t,icon:i,iconStyle:o,disabled:r}=e,d=(0,n().yK)((e=>({container:{display:"flex",alignItems:"center",gap:6},icon:{height:16,width:16,fill:e.icon.secondary,...o},text:{color:r?e.text.secondary:void 0}})),[o,r]);return(0,l.jsxs)("div",{style:d.container,children:[i&&i(d.icon),(0,l.jsx)(a().Z,{style:d.text,children:(0,l.jsx)(s()._H,{...t})})]})}function d(e){const{title:t,icon:i,iconStyle:s,right:a,disabled:d,onClick:c,style:u,badge:p}=e,g=(0,n().yK)((()=>({container:{minHeight:32,paddingLeft:8,paddingRight:8,width:"100%",paddingTop:2,paddingBottom:2,...u},titleContainer:{display:"flex",flex:1}})),[u]);return(0,l.jsxs)(o().Z,{disabled:d,onClick:c,style:g.container,children:[(0,l.jsxs)("div",{style:g.titleContainer,children:[(0,l.jsx)(r,{title:t,icon:i,iconStyle:s,disabled:d}),p]}),a]})}},554870:(e,t,i)=>{i.d(t,{m:()=>c});i(667294);var n=()=>i(219727),o=()=>i(142735),s=()=>i(846550),a=()=>i(67961),l=()=>i(151684),r=()=>i(663132),d=i(785893);function c(e){const{domain:t,style:i}=e,{device:c}=(0,n().O7)(),[u,p]=(0,o().VK)((()=>[t?r().Bk({domainName:t.getDomainName(),domainType:t.getDomainType()}):"",null==t?void 0:t.getDomainStatus()]),[t]),g=(0,s().yK)((e=>({container:{display:"flex",alignItems:"center",gap:6,maxWidth:c.isMobile?185:320},label:{color:"payment_required"===p?e.text.uiRedPrimary:void 0,flex:1},chevronIcon:{height:10,width:10,fill:"payment_required"===p?e.text.uiRedSecondary:e.icon.tertiary}})),[c,p]);return(0,d.jsxs)("div",{style:{...g.container,...i},children:[(0,d.jsx)(a().Z,{style:g.label,children:u}),(0,l().E)(g.chevronIcon)]})}},689653:(e,t,i)=>{i.d(t,{O:()=>I});var n=i(667294),o=()=>i(219727),s=()=>i(142735),a=()=>i(846550),l=()=>i(788860),r=()=>i(707513),d=()=>i(959137),c=()=>i(212493),u=()=>i(291198),p=()=>i(661297),g=()=>i(471645),h=()=>i(654133),m=()=>i(627990),f=()=>i(594546),b=()=>i(527278),x=()=>i(733047),S=()=>i(53650),y=()=>i(998901),v=()=>i(998470),j=()=>i(479875),k=()=>i(772084),T=()=>i(457088),_=()=>i(584006),w=i(785893);const C=(0,l().vU)({showTitle:{id:"embedSettingsContent.showPageTitle.toggle",defaultMessage:"Show page title"},showFormTitle:{id:"embedSettingsContent.showFormTitle.toggle",defaultMessage:"Show form title"},showTitleTooltip:{id:"embedSettingsContent.showTitleTooltip",defaultMessage:"Show page title & icon in the embedded view"}});function I(e){const t=(0,o().O7)(),{currentBlockStore:i}=e,I=(0,s().VK)((()=>{var e;if(i)return null===(e=(0,k().gR)(i))||void 0===e?void 0:e.getSiteStore()}),[i]),M=(0,s().VK)((()=>{var e;return null==I||null===(e=I.getSettings())||void 0===e?void 0:e.embedSettings}),[I]),B=(0,s().VK)((()=>i?(0,j().$)({store:i,embedded:!0,pageVisitSource:void 0}).url:""),[i]),R=(0,s().VK)((()=>B?`\n\t\t\t\t<iframe src="${B}"\n\t\t\t\t\twidth="100%"\n\t\t\t\t\theight="600"\n\t\t\t\t\tframeborder="0"\n\t\t\t\t\tallowfullscreen\n\t\t\t\t/>\n\t\t\t\t`.trim().replace(/\s+/g," "):""),[B]),Z=n.useCallback((async()=>{const e=await d().F.clipboardActions.load();e.copyString({environment:t,stringValue:R,copiedMessage:e.clipboardMessages.copiedLinkToClipboard}),(0,f().j)({environment:t,event:{eventName:"copy_embed_code",eventProperties:{target_block_id:i.id}}})}),[R,t,i.id]),H=n.useCallback((()=>{I&&(0,v().cy)({environment:t,siteStore:I,embedSettings:{hideTitle:!(null!=M&&M.hideTitle)}})}),[I,null==M?void 0:M.hideTitle,t]),P=(0,s().VK)((()=>i.isFormBlock()?C.showFormTitle:C.showTitle),[i]),K=(0,a().yK)((e=>({title:{fontWeight:r().Ue.bold,fontSize:25,marginTop:20},copyIcon:{width:16,height:16,marginLeft:0,marginRight:6},primaryButton:{height:32,marginLeft:"auto",marginRight:0,width:"fit-content"},titleIcon:{width:16,height:16},container:{paddingLeft:8,paddingRight:8}})),[]);return(0,w.jsxs)(c().jX,{direction:"column",gap:14,style:K.container,children:[(0,w.jsx)(h().Z,{renderTooltip:()=>b().Z.formatMessage(C.showTitleTooltip),disableTooltip:!1,render:e=>(0,w.jsx)("div",{...e,children:(0,w.jsx)(_().U,{title:P,icon:S().V,iconStyle:K.titleIcon,right:(0,w.jsx)(g().Z,{on:!Boolean(null==M?void 0:M.hideTitle),onClick:H}),disabled:!1,onClick:H,style:{marginBottom:-6}})}),placement:y().Placement.Bottom,alignment:m().v2.Center,textWrap:!0,style:{maxWidth:T().SITE_SETTINGS_TOOLTIP_WIDTH}}),(0,w.jsx)(u().Z,{disabled:!0,textarea:!0,textareaSubmitOnEnter:!1,autosize:!0,autosizeMinHeight:50,showClearButton:!1,readOnly:!0,value:R,textareaElementAttributes:{cols:50}}),(0,w.jsx)(p().Z,{onClick:Z,style:K.primaryButton,icon:e=>(0,x().W)({...e,...K.copyIcon}),children:(0,w.jsx)(l()._H,{id:"embedSettingsContent.copyEmbedCode",defaultMessage:"Copy code"})})]})}},594539:(e,t,i)=>{i.d(t,{Z:()=>R});i(670560),i(241792);var n=i(667294),o=()=>i(146947),s=()=>i(219727),a=()=>i(142735),l=()=>i(846550),r=()=>i(646574),d=()=>i(933868),c=()=>i(788860),u=()=>i(326966),p=()=>i(827973),g=()=>i(448419),h=()=>i(198829),m=()=>i(255577),f=()=>i(388284),b=()=>i(67961),x=()=>i(296034),S=()=>i(868744),y=()=>i(718959),v=()=>i(352230),j=()=>i(128119),k=()=>i(965014),T=()=>i(188296),_=()=>i(18281),w=i(785893);function C(e,t){const{permissionItem:n,hideIcon:o,onChange:a}=e,r=(0,s().Fy)(),d=(0,l().yK)((e=>({icon:{margin:0,height:16,width:16,fill:e.icon.secondary},chevronIcon:{height:12,width:12,fill:e.icon.tertiary,transform:"rotate(90deg)"}})),[]);return(0,w.jsx)(i(838003).Z,{...e,popupType:r.isMobile?g().Z4.SlideUp:g().Z4.Popup,renderOrigin:s=>(0,w.jsx)(i(492077).C,{...(0,i(164079).Z)(e,s),ref:t,title:(0,w.jsx)(c()._H,{defaultMessage:"Link expiration",id:"publishSiteSettings.linkExpiration.settingTitle"}),icon:!o&&(0,i(428275).r)(d.icon),right:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(I,{permissionItem:n}),(0,i(696347).o)(d.chevronIcon)]})}),alignmentToOrigin:j().lU.End,placementToOrigin:j().Iw.Bottom,render:e=>(0,w.jsx)(M,{value:n.expiration_timestamp,onChange:a,onClose:()=>{e.close()}})})}function I(e){const{permissionItem:t}=e,i=(0,c().YB)(),n=(0,l().yK)((e=>({container:{color:e.text.secondary}})),[]);if(!t.expiration_timestamp||(0,d().o7)(t))return(0,w.jsx)(b().Z,{style:n.container,children:(0,w.jsx)(c()._H,{defaultMessage:"None",id:"publishSiteSettings.linkExpiration.never"})});const s=r().$b(t.expiration_timestamp,o().locale,i);return(0,w.jsx)(b().Z,{style:n.container,children:s})}function M(e){const{value:t,onChange:i,onClose:r}=e,d=(0,s().O7)(),g=d.device,b=(0,a().VK)((()=>!_().y$()),[]),x=(0,a().VK)((()=>_().M9(d)),[d]),S=(0,n.useCallback)((e=>{void 0!==e&&e<=(new Date).getTime()||(i(e),r())}),[i,r]),y=(0,l().yK)((e=>({disabledContainer:{display:"flex",gap:6},disabledText:{color:e.text.tertiary}})),[]),j=function(){const e=Date.now(),t=e+u().U6,i=e+u().A0,n=e+7*u().A0;return[{key:"none",time:void 0,title:(0,w.jsx)(c()._H,{defaultMessage:"None",id:"publishSiteSettings.linkExpiration.never"})},{key:"hour",time:t,title:(0,w.jsx)(c()._H,{defaultMessage:"In an hour",id:"publishSiteSettings.linkExpiration.oneHour"}),caption:new Intl.DateTimeFormat(o().locale,{hour:"numeric",minute:"numeric"}).format(t)},{key:"day",time:i,title:(0,w.jsx)(c()._H,{defaultMessage:"In a day",id:"publishSiteSettings.linkExpiration.oneDay"}),caption:new Intl.DateTimeFormat(o().locale,{day:"numeric",month:"long",hour:"numeric",minute:"numeric"}).format(i)},{key:"week",time:n,title:(0,w.jsx)(c()._H,{defaultMessage:"In a week",id:"publishSiteSettings.linkExpiration.oneWeek"}),caption:new Intl.DateTimeFormat(o().locale,{day:"numeric",month:"long",hour:"numeric",minute:"numeric"}).format(n)}]}().map((e=>({key:e.key,action:()=>{S(e.time)},render:t=>(0,w.jsx)(p().Z,{...t,title:e.title,titleStyle:b?y.disabledText:{},caption:e.caption,captionStyle:b?y.disabledText:{},disabled:b})}))),C=[{key:"predefined-expiration",render:e=>(0,w.jsx)(f().Z,{...e}),items:j},{key:"custom-expiration",render:e=>(0,w.jsx)(f().Z,{...e,topBorder:!0}),items:[B(S,t,b,y.disabledText)]}];return x&&b&&C.push({key:"upgrade-for-expiration",render:e=>(0,w.jsx)(f().Z,{...e,topBorder:!0}),items:[{key:"upsell",action:()=>{k().y(d,{from:"public_permission_item_expiration",upsell:{type:"product",product:x,limit:{type:"none"}}})},render:e=>(0,w.jsx)(p().Z,{...e,focused:e.focused,title:(0,w.jsxs)("div",{style:y.disabledContainer,children:[(0,w.jsx)(c()._H,{defaultMessage:"Unlock link expiration",id:"publishSiteSettings.linkExpiration.upgrade"}),(0,w.jsx)(T().Z,{subscriptionTier:x,analyticsName:"public_permission_item_expiration"})]})})}]}),(0,w.jsx)(h().Z,{menuType:g.isMobile?v().o.ActionSheet:v().o.Popup,width:240,children:(0,w.jsx)(m().Z,{type:m().i.Vertical,initialFocus:void 0,sections:C})})}function B(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{key:"custom",action:()=>{window.parent.close()},render:(o,s)=>(0,w.jsx)(S().Z,{...o,renderOrigin:e=>(0,w.jsx)(p().Z,{...e,disabled:i,title:(0,w.jsx)(c()._H,{id:"publicPermissionItem.expiration.chooseDate",defaultMessage:"Choose date"}),titleStyle:i?n:{}}),onFocus:s.onFocus,disableDefaultClick:!0,renderExtension:(n,o)=>(0,w.jsx)("div",{style:{padding:"18px 14px 14px"},children:(0,w.jsx)(x().Z,{...n,firstDayOfWeek:y().AK.state,value:t||Date.now(),onChange:t=>{e(t),o.close()},disabledDays:i||{before:new Date}})})})}}const R=n.forwardRef(C)},294658:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Ct});var n=i(667294),o=()=>i(219727),s=()=>i(142735),a=()=>i(846550),l=()=>i(396136),r=()=>i(594546),d=()=>i(314169),c=()=>i(998470),u=()=>i(772084),p=()=>i(787093),g=()=>i(836756),h=()=>i(689653),m=()=>i(506347),f=()=>i(955620),b=()=>i(788860),x=()=>i(513670),S=()=>i(707513),y=()=>i(491927),v=()=>i(152862),j=()=>i(255577),k=()=>i(661297),T=()=>i(906651),_=()=>i(388284),w=()=>i(654133),C=()=>i(345918),I=()=>i(466970),M=()=>i(142730),B=()=>i(266184),R=()=>i(663132),Z=()=>i(998901),H=()=>i(876822),P=()=>i(314160),K=()=>i(566245),D=()=>i(457088),E=()=>i(454393),V=()=>i(92175),L=()=>i(67961),O=()=>i(779733),U=i(785893);const A=(0,b().vU)({allSiteSettingsTitle:{defaultMessage:"Manage all sites",id:"publishSiteSettings.allSites.settingTitle"},viewTemplateListingTitle:{defaultMessage:"View template listing",id:"publishSiteSettings.viewTemplateListing.settingTitle"}});function F(e){let{store:t}=e;const i=(0,o().O7)(),{isMobile:l}=i.device,r=(0,s().VK)((()=>{const e=H().default.state.currentSpaceStore;return!l&&!(0,C().Cx)(e)}),[l]),d=(0,s().VK)((()=>(0,O().wZ)()),[]),c=(0,n.useCallback)((()=>{E().r$({currentTab:"sites"})}),[]),u=(0,a().yK)((e=>({button:{height:32,color:e.text.secondary,fontWeight:d?void 0:S().Ue.medium,paddingLeft:8},iconStyle:{height:16,width:16,fill:"transparent",stroke:e.icon.secondary}})),[d]);return i.device.isMobile||!r?null:d?(0,U.jsx)(V().Z,{onClick:c,style:u.button,children:(0,U.jsx)(L().Z,{isSecondaryColor:!0,children:(0,U.jsx)(b()._H,{...A.allSiteSettingsTitle})})}):(0,U.jsx)(V().Z,{onClick:c,style:u.button,children:(0,U.jsx)(b()._H,{...A.allSiteSettingsTitle})})}var N=()=>i(492077);function W(e,t){const n=(0,a().yK)((e=>({icon:{margin:0,height:16,width:16,fill:e.icon.secondary}})),[]);return(0,U.jsx)(N().C,{role:"button",...e,ref:t,title:(0,U.jsx)(b()._H,{defaultMessage:"Site customization",id:"publishSiteSettings.customizeSite.settingTitle"}),icon:(0,i(271904).a)(n.icon)})}const z=n.forwardRef(W);var Y=()=>i(836416),$=()=>i(527278),q=()=>i(164079),G=()=>i(696347);const X=(0,b().vU)({embedPageTitleTooltip:{defaultMessage:"Embed this page in other websites outside of Notion",id:"publishSiteSettings.embed.settingTitleTooltip"}});function Q(e,t){const n=(0,a().yK)((e=>({icon:{margin:0,height:16,width:16,fill:e.icon.secondary},chevronIcon:{height:12,width:12,fill:e.icon.tertiary}})),[]);return(0,U.jsx)(w().Z,{renderTooltip:()=>$().Z.formatMessage(X.embedPageTitleTooltip),disableTooltip:!1,render:o=>(0,U.jsx)(N().C,{...(0,q().Z)(e,o),ref:t,title:(0,U.jsx)(b()._H,{defaultMessage:"Embed this page",id:"publishSiteSettings.embed.settingTitle"}),icon:(0,i(363253).z)(n.icon),right:(0,G().o)(n.chevronIcon),badge:(0,U.jsx)(i(989377).Z,{newBadgeKey:"publish_site_settings_embed_page",didUserEngage:!1,style:{display:"inline"}})}),placement:Z().Placement.Bottom,alignment:Z().Alignment.Center,textWrap:!0,style:{maxWidth:D().SITE_SETTINGS_TOOLTIP_WIDTH}})}const J=n.forwardRef(Q);var ee=()=>i(594539);function te(e,t){const{siteRootBlockStore:n,permissionItem:o}=e,l=(0,s().VK)((()=>u().LC(n,o)),[n,o]),r=(0,a().yK)((e=>({icon:{margin:0,height:16,width:16,fill:e.icon.secondary},chevronIcon:{height:12,width:12,fill:e.icon.tertiary}})),[]);return(0,U.jsx)(N().C,{...e,ref:t,title:(0,U.jsx)(b()._H,{defaultMessage:"Search engine indexing",id:"publishSiteSettings.SEO.settingTitle"}),icon:(0,i(35089).p)(r.icon),right:(0,U.jsxs)(U.Fragment,{children:[l?(0,U.jsx)(b()._H,{defaultMessage:"On",id:"publishSiteSettings.SEO.valueOn"}):(0,U.jsx)(b()._H,{defaultMessage:"Off",id:"publishSiteSettings.SEO.valueOff"}),(0,G().o)(r.chevronIcon)]})})}const ie=n.forwardRef(te);var ne=()=>i(803728),oe=()=>i(878797),se=(i(670560),i(267602),i(241792),i(228244),()=>i(311988)),ae=()=>i(827973),le=()=>i(448419),re=()=>i(666414),de=()=>i(198829),ce=()=>i(603692),ue=()=>i(765513),pe=()=>i(352230),ge=()=>i(166104),he=()=>i(733641),me=()=>i(865479),fe=()=>i(128119),be=()=>i(838266),xe=()=>i(965014),Se=()=>i(385337),ye=()=>i(815277),ve=()=>i(554870);function je(e){const{store:t,siteRootBlockStore:i,disabled:l,showManageAllDomains:r}=e,d=(0,o().O7)(),{device:u}=d,p=(0,s().VK)((()=>{var e;const n=t.getSpaceStore(),o=null===(e=i.getSiteStore())||void 0===e?void 0:e.getDomainId();return o?R().Nc(n,o):R().VA(n)}),[t,i]),g=(0,s().VK)((()=>null==p?void 0:p.getDomainStatus()),[p]),h=(0,n.useCallback)((e=>{i.id===t.id&&(c().dM({environment:d,siteRootBlockStore:i,domainId:e.id,resetWatermark:"custom"===(null==p?void 0:p.domain_type)&&"custom"!==e.domain_type}),(0,P()._F)(d,{site_root_block_id:i.id,previous_domain_id:(null==p?void 0:p.id)??null,new_domain_id:e.id}))}),[d,i,t,p]),m=(0,s().VK)((()=>C().Cx(t.getSpaceStore())),[t]),f=l||m,x=(0,a().yK)((e=>({valueButton:{paddingLeft:10,paddingRight:8,height:"100%",borderTopRightRadius:0,borderBottomRightRadius:0,background:"payment_required"===g?e.tint.uiRed:"inherit",color:"payment_required"===g?e.text.uiRedPrimary:e.text.primary},valueButtonPressed:{background:"payment_required"===g?e.tint.uiRedPressed:"inherit"},icon:{marginRight:4}})),[g]);return(0,U.jsx)(w().Z,{renderTooltip:()=>(0,U.jsx)(b()._H,{id:"publishSiteSettings.publicDomain.noDomainUpdateForGuest",defaultMessage:"You do not have access to update the domain for this published site"}),disableTooltip:!f,render:e=>(0,U.jsx)(le().ZP,{popupType:u.isMobile?le().Z4.SlideUp:le().Z4.Popup,renderOrigin:t=>(0,U.jsxs)(V().Z,{...(0,q().Z)(e,t),disabled:f,style:x.valueButton,hoveredStyle:x.valueButton,pressedStyle:{...x.valueButton,...x.valueButtonPressed},children:["payment_required"===g&&(0,U.jsx)("div",{style:x.icon,children:(0,U.jsx)(ce().y,{iconGroup:se().x,colorName:"redPrimary",variantName:"small"})}),(0,U.jsx)(ve().m,{domain:p})]}),alignmentToOrigin:fe().lU.Start,placementToOrigin:fe().Iw.Bottom,render:e=>(0,U.jsx)(ke,{store:t,siteRootBlockStore:i,currentDomainId:null==p?void 0:p.id,onChange:h,showManageAllDomains:r,onClose:()=>{e.close()}})}),textWrap:!0,placement:Z().Placement.Bottom,alignment:Z().Alignment.End})}function ke(e){const{store:t,siteRootBlockStore:i,currentDomainId:l,onChange:r,showManageAllDomains:d,onClose:c}=e,u=(0,o().O7)(),p=u.device,{spaceId:g,userId:h}=(0,s().VK)((()=>{var e,i;return{spaceId:null===(e=t.getSpaceStore())||void 0===e?void 0:e.id,userId:null===(i=t.getSpaceStore())||void 0===i?void 0:i.userId}}),[t]),[m,f]=(0,n.useState)(!1),y=(0,ye().oo)({name:"sites_multiple_public_domains",spaceId:g,userId:h}),v=null==y?void 0:y.upsell,k=()=>{be().default.setState({open:!0,currentTab:"billing",defaultSubtab:void 0,highlightedSetting:void 0,openedFrom:"share_menu"})},T=i.id===t.id,C=(0,s().VK)((()=>R().Vg(t.getSpaceStore())),[t]),I=(0,s().VK)((()=>C.some((e=>"payment_required"===e.getDomainStatus()))),[C]),M=(0,a().yK)((e=>({icon:{height:14,width:14,fill:e.icon.secondary},checkIcon:{height:12,width:12,fill:e.icon.secondary},aliasIcon:{marginRight:10},titleText:S().Yu,disabledText:{color:e.text.tertiary,...S().Yu},paymentRequiredText:{color:e.text.uiRedPrimary,...S().Yu},disabledMessageContainer:{paddingTop:4,display:"flex",flexDirection:"column",gap:4,whiteSpace:"normal"},billingTabLink:{backgroundColor:m?e.tint.regular:void 0}})),[m]),B=[];I&&B.push({key:"payment-required",render:e=>(0,U.jsx)(_().Z,{...e,style:{paddingTop:0}}),items:[{key:"payment-required",action:x().ZT,render:e=>(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("div",{style:{padding:"8px 16px",fontSize:14},...e,children:(0,U.jsx)(b()._H,{defaultMessage:"Update payment method for your custom domain in the {billingTabLink}",id:"publishSiteSettings.publicDomain.paymentRequired",values:{billingTabLink:(0,U.jsx)(ue().Z,{disableHover:!0,onClick:k,onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),style:M.billingTabLink,children:(0,U.jsx)(b()._H,{defaultMessage:"Billing tab",id:"publishSiteSettings.publicDomain.paymentRequiredLink"})})}})}),(0,U.jsx)(re().Z,{size:"100%"})]})}]}),T||B.push({key:"disabled",render:e=>(0,U.jsx)(_().Z,{...e}),items:[{key:"disabled",action:x().ZT,render:e=>(0,U.jsx)(ae().Z,{...e,focused:e.focused,disabled:!0,title:(0,U.jsxs)("div",{style:M.disabledMessageContainer,children:[(0,U.jsx)(b()._H,{defaultMessage:"The domain for this site can only be updated on the root page",id:"publishSiteSettings.publicDomain.disallowedForNonRoot"}),(0,U.jsx)(me().Z,{store:i})]})})}]});const H=C.map((e=>({key:e.id,action:()=>{r(e),c()},render:t=>{const i="active"!==e.getDomainStatus()||!T,n="payment_required"===e.getDomainStatus(),o=i?M.disabledText:n?M.paymentRequiredText:M.titleText,s=i?{...M.checkIcon,...M.disabledText}:M.checkIcon,a=(0,U.jsx)(ae().Z,{...t,disabled:i,title:R().Bk({domainName:e.getDomainName(),domainType:e.getDomainType()}),titleStyle:o,right:e.id===l||!l&&e.isDefault()?(0,he().k)(s):null});return n?(0,U.jsx)(w().Z,{placement:Z().Placement.Bottom,render:e=>(0,U.jsx)("div",{...e,children:a}),renderTooltip:()=>(0,U.jsx)(b()._H,{id:"sites.sitesSettingModal.domainMenu.paymentRequiredTooltip",defaultMessage:"Update payment method to use this domain for publishing"})}):a}})));return B.push({key:"domains",render:e=>(0,U.jsx)(_().Z,{...e,topBorder:!T,style:I?{paddingTop:0}:{}}),items:H}),!p.isMobile&&d&&B.push({key:"manage",render:e=>(0,U.jsx)(_().Z,{...e,topBorder:!0}),items:[{key:"manage",action:()=>{v?xe().y(u,{from:"manage_all_domains",upsell:v}):E().r$({currentTab:"sites"}),c()},render:e=>(0,U.jsx)(ae().Z,{...e,focused:e.focused,disabled:!1,title:(0,U.jsx)("div",{style:{display:"flex",gap:6},children:v?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(b()._H,{defaultMessage:"Get multiple domains",id:"publishSiteSettings.publicDomain.getDomains"}),(0,U.jsx)(Se().R,{upsell:v,analyticsName:"manage_all_domains",desktopStyle:{paddingTop:2}})]}):(0,U.jsx)(b()._H,{defaultMessage:"Manage all domains",id:"publishSiteSettings.publicDomain.manageDomains"})}),left:v?void 0:(0,ge().H)(M.icon)})}]}),(0,U.jsx)(de().Z,{menuType:p.isMobile?pe().o.ActionSheet:pe().o.Popup,width:265,children:(0,U.jsx)(j().Z,{type:j().i.Vertical,initialFocus:void 0,sections:B})})}var Te=()=>i(342792),_e=()=>i(86282),we=()=>i(836273);const Ce=/^[-a-z0-9]+$/,Ie=/^[-]+$/,Me=60;var Be=()=>i(916673),Re=()=>i(291198),Ze=()=>i(443269),He=()=>i(429725),Pe=()=>i(901447),Ke=()=>i(826955);function De(){const e=(0,a().yK)((e=>({separator:{color:e.text.tertiary,paddingRight:4}})),[]);return(0,U.jsx)("div",{style:e.separator,children:"/"})}const Ee=(0,b().vU)({max_length_exceeded:{id:"customSlugInput.maxLengthExceeded.message",defaultMessage:"Sorry, slug exceeds 60 characters"},invalid_characters:{id:"customSlugInput.invalidCharacters.message",defaultMessage:"Sorry, slug can only contain - and lower case alphanumeric characters"},missing_alphanumeric_characters:{id:"customSlugInput.missingAlphanumericCharacters.message",defaultMessage:"Sorry, slug must contain at least one alphanumeric character"},uuid_format:{id:"customSlugInput.incorrectUuidFormat.message",defaultMessage:"Sorry, slug cannot be of UUID format"},disallowed_words:{id:"customSlugInput.disallowedWords.message",defaultMessage:"Sorry, slug contains disallowed words"}});function Ve(e){const{store:t,siteRootBlockStore:i,onSave:l,onBlur:d,isError:u,onError:p,clearError:g}=e,h=(0,o().O7)(),f=(0,b().YB)(),x=(0,s().VK)((()=>{var e;return t.getSlug()||(null===(e=Be().Qc((0,He().ZP)({store:t,preferPublicLink:!0,pageVisitSource:m().tY.CopyLink})).pathname)||void 0===e?void 0:e.substring(1))}),[t]),[y,v]=(0,n.useState)(x??""),j=(0,n.useRef)(null),k=(0,n.useRef)(null),T=(0,n.useCallback)((()=>{var e,t;(0,r().j)({environment:h,event:{eventName:"clear_slug",eventProperties:{slug:y,site_id:i.getSiteId(),domain_id:null===(e=i.getSiteStore())||void 0===e?void 0:e.getDomainId()}}}),g(),v(""),null===(t=j.current)||void 0===t||t.focus()}),[h,y,g,v,i]),_=(0,n.useCallback)((async()=>{var e;if((0,r().j)({environment:h,event:{eventName:"save_slug",eventProperties:{slug:y,is_new:Boolean(!x),site_id:i.getSiteId(),domain_id:null===(e=i.getSiteStore())||void 0===e?void 0:e.getDomainId()}}}),!y)return;if(y===x)return void d();const n=function(e){if(e.length>Me)return"max_length_exceeded";if(!Ce.test(e))return"invalid_characters";if(Ie.test(e))return"missing_alphanumeric_characters";if((0,Te().e)(e)||(0,Te().qn)(e))return"uuid_format";const t=[...Object.values(we().VP),...Object.values(we().AR)],i=`/${e}`;return t.findIndex((e=>e===i))>=0||(0,_e().f)(e)?"disallowed_words":"ok"}(y);if("ok"!==n){const e=f.formatMessage(Ee[n]);return void p(e)}const o=await c().C$({environment:h,blockStore:t,slug:y});if(null!=o&&o.error){var s;const e=null===(s=o.error.body)||void 0===s?void 0:s.clientData;if(e&&"slug_unavailable"===e.type&&e.existingBlockIdWithSlug){const i=e.existingBlockIdWithSlug,n=Ke().G.createChildStore(t,{id:i,table:"block"}),o=(0,Ze().mH)(e);if(o){const e=f.formatMessage(o,{pageName:(0,U.jsx)(me().Z,{store:n,hideIcon:!0})});return void p(e)}}const i=(0,Ze().wf)(f,o.error);p(i)}else l(y),d()}),[h,f,t,i,l,d,p,x,y]),C=(0,n.useCallback)((e=>{"Enter"===e.key&&_()}),[_]),I=(0,a().yK)((e=>({inputContainer:{display:"flex",alignItems:"center",paddingLeft:4,paddingRight:4,height:30,flex:1,borderTopRightRadius:6,borderBottomRightRadius:6,borderLeft:`1px solid ${e.outlineButtonBorder}`,background:e.surface.wash,lineHeight:2.14,...S().Yu}})),[]),M=(0,n.useCallback)((e=>{e.relatedTarget!==k.current&&d()}),[d]);(0,n.useEffect)((()=>{j.current&&(0,Pe().O)(h,j.current)}),[h]);const B=!y||u;return(0,U.jsxs)("div",{style:I.inputContainer,children:[(0,U.jsx)(De,{}),(0,U.jsx)(Re().Z,{ref:j,type:"text",value:y,onChange:e=>{g(),v(e.target.value)},onKeyDown:C,format:Re().B.Transparent,onBlur:M,inputStyle:{height:"90%"}}),u?(0,U.jsx)(Oe,{onClear:T}):(0,U.jsx)(w().Z,{render:e=>(0,U.jsx)(Le,{ref:k,tooltipEvents:e,disabled:B,onConfirm:()=>{_()}}),renderTooltip:()=>y?(0,U.jsx)(b()._H,{id:"customSlugInput.existingError.tooltip",defaultMessage:"Please fix the error before saving"}):(0,U.jsx)(b()._H,{id:"customSlugInput.emptySlug.tooltip",defaultMessage:"Please enter a slug to save"}),disableTooltip:!B,placement:Z().Placement.Top})]})}const Le=n.forwardRef((function(e,t){const{disabled:i,onConfirm:n,tooltipEvents:o}=e,s=(0,a().yK)((e=>({buttonHoveredContainer:{background:i?"transparent":e.tint.uiBlue},button:{border:"none",height:24,paddingLeft:2,marginLeft:4,paddingRight:2,color:i?e.text.tertiary:e.text.uiBluePrimary,fontSize:12,fontWeight:S().Ue.medium}})),[i]);return(0,U.jsx)(k().Z,{...o,ref:t,onClick:n,style:s.button,hoveredStyle:s.buttonHoveredContainer,disabled:i,children:(0,U.jsx)(b()._H,{id:"customSlugInput.save.button",defaultMessage:"Save"})})}));function Oe(e){const{onClear:t}=e,i=(0,a().yK)((e=>({buttonContainer:{marginRight:3},button:{border:"none",height:24,paddingLeft:4,paddingRight:4,color:e.text.secondary,fontSize:12,fontWeight:S().Ue.medium}})),[]);return(0,U.jsx)(k().Z,{onClick:t,style:i.button,buttonStyle:i.buttonContainer,children:(0,U.jsx)(b()._H,{id:"customSlugInput.clear.button",defaultMessage:"Clear"})})}var Ue=()=>i(959137),Ae=()=>i(599631),Fe=()=>i(188296),Ne=()=>i(18281),We=()=>i(697623),ze=()=>i(479875);function Ye(e){const{store:t,siteRootBlockStore:i,onClick:l,slugOverride:d}=e,c=(0,o().O7)(),[u,p]=(0,n.useState)(!1),{url:g,isHomepage:h}=(0,s().VK)((()=>ze().$({store:t,pageVisitSource:m().tY.CopyLink})),[t]),f=(0,n.useCallback)((async()=>{const{mobileNative:e}=c,t=await Ue().F.clipboardActions.load();e?e.copyText(g,$().Z.formatMessage(t.clipboardMessages.copiedLinkToClipboard)):t.copyString({environment:c,stringValue:g,copiedMessage:t.clipboardMessages.copiedLinkToClipboard}),(0,r().j)({environment:c,event:{eventName:"copy_web_link",eventProperties:{}}})}),[c,g]),b=(0,s().VK)((()=>We().sX()),[])&&Boolean(l),x=(0,a().yK)((e=>({container:{display:"flex",flex:1,overflow:"auto",height:30,background:e.surface.wash,borderTopRightRadius:6,borderBottomRightRadius:6,...b&&{background:u?e.surface.wash:e.surface.page}},copyButtonBackground:b?{background:u?e.surface.wash:e.surface.page}:{}})),[b,u]);return(0,U.jsxs)("div",{style:x.container,children:[(0,U.jsx)("div",{style:{flex:1,overflow:"auto"},onClick:b?l:void 0,children:(0,U.jsx)($e,{store:t,siteRootBlockStore:i,siteUrl:g,slugOverride:d,isHomepage:h,isClickable:b,setIsHovering:p})}),(0,U.jsx)(qe,{style:x.copyButtonBackground,onCopySite:f})]})}function $e(e){const{store:t,siteRootBlockStore:i,siteUrl:n,slugOverride:l,isHomepage:r,isClickable:d,setIsHovering:c}=e,p=(0,o().O7)(),g=(0,s().VK)((()=>{var e;return null===(e=t.getSpaceStore())||void 0===e?void 0:e.canAdmin()}),[t]),h=(0,s().VK)((()=>u().iE(t,i)),[t,i]),m=(0,s().VK)((()=>Ne().M9(p)),[p]),f=(0,s().VK)((()=>We().sX()),[]),x=(0,a().yK)((e=>({inputContainer:{display:"flex",paddingLeft:h?4:10,paddingRight:4,color:e.text.tertiary,borderLeft:`1px solid ${e.outlineButtonBorder}`,background:"transparent",lineHeight:2.14,...!h&&{borderLeft:void 0,borderTopLeftRadius:6,borderBottomLeftRadius:6},...d&&{color:e.text.primary,cursor:"pointer"}},input:{...S().Yu,flex:1},tooltipTitle:{color:e.text.contrastPrimary},tooltipDescription:{color:e.text.contrastSecondary,whiteSpace:"normal"}})),[h,d]);let y;var v;r?y=g?(0,U.jsx)(De,{}):(0,U.jsx)("div",{style:x.input,children:`${Be().Qc(n).hostname}/`}):y=(0,U.jsxs)("div",{style:{display:"flex",overflowX:"auto",overflowY:"hidden"},children:[(0,U.jsx)(De,{}),(0,U.jsx)("div",{style:x.input,children:Boolean(l)?`${l}`:null===(v=Be().Qc(n).pathname)||void 0===v?void 0:v.substring(1)})]});const j=!f&&m?(0,U.jsx)(Fe().Z,{subscriptionTier:m,analyticsName:"site_slugs",disableTooltip:!0,desktopStyle:{alignSelf:"center",height:"fit-content"}}):null;return r?(0,U.jsx)(w().Z,{renderTooltip:()=>(0,U.jsx)(b()._H,{id:"publishSiteSettings.publicDomain.disabledHomepageTitle",defaultMessage:"This is the homepage of your domain"}),disableTooltip:!1,render:e=>(0,U.jsxs)("div",{style:x.inputContainer,children:[(0,U.jsx)("div",{style:x.input,...e,children:y}),j]}),placement:Z().Placement.Bottom,textWrap:!0,style:{maxWidth:240}}):(0,U.jsxs)("div",{style:x.inputContainer,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:[y,j]})}function qe(e){const{style:t,onCopySite:i}=e,n=(0,a().yK)((e=>({copyContainer:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",borderTopRightRadius:6,borderBottomRightRadius:6,...t},copyButton:{border:"none",height:24,width:24,marginRight:4,paddingLeft:0},copyIcon:{height:16,width:16,fill:e.icon.secondary,marginRight:0}})),[t]);return(0,U.jsx)(w().Z,{renderTooltip:()=>(0,U.jsx)(b()._H,{id:"publishSiteSettings.copySiteLink.tooltip",defaultMessage:"Copy site link"}),render:e=>(0,U.jsx)("div",{style:n.copyContainer,children:(0,U.jsx)(k().Z,{...e,icon:Ae().N,onClick:i,style:n.copyButton,iconStyle:n.copyIcon})}),placement:Z().Placement.Top})}function Ge(e){const{store:t,siteRootBlockStore:i,isError:o,setError:a,showSlugInput:l,setShowSlugInput:r}=e,[d,c]=(0,n.useState)(),p=(0,s().VK)((()=>t.canAdmin()),[t]),g=(0,s().VK)((()=>u().Qn(t,i)),[t,i]);return p&&!g?l?(0,U.jsx)(Ve,{store:t,siteRootBlockStore:i,onSave:e=>{c(e)},onBlur:()=>{r(!1)},isError:o,onError:e=>{a(e)},clearError:()=>{a(void 0)}}):(0,U.jsx)(Ye,{store:t,siteRootBlockStore:i,slugOverride:d,onClick:()=>{r(!0)}}):(0,U.jsx)(Ye,{store:t,siteRootBlockStore:i})}var Xe=()=>i(577741),Qe=()=>i(663631),Je=()=>i(905263);const et="customize_slug_tooltip";function tt(e){const{originRef:t}=e,i=(0,o().O7)(),n=(0,s().VK)((()=>oe().default.isVisible(et)),[]);return(0,U.jsx)(Xe().g,{shouldShow:n,calloutId:et,children:(0,U.jsx)(Je().U,{style:{width:220},pointerLength:25,pointerPosition:"50%",origin:t,placementToOrigin:"left",alignmentToOrigin:Z().Alignment.Center,header:(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(b()._H,{id:"customSlugInput.slugTooltip.header",defaultMessage:"Customize your slug"}),(0,U.jsx)(Qe().Z,{})]}),content:(0,U.jsx)(b()._H,{id:"customSlugInput.slugTooltip.content",defaultMessage:"You can now change your default URL to anything you want"}),shouldDismissUponOutsideClick:!0,onCloseClick:()=>{ne().Gi(i,et)}})})}const it="customize_slug_tooltip";function nt(e){const{store:t,siteRootBlockStore:i,disabled:l,showManageAllDomains:r}=e,d=(0,o().O7)(),c=d.device.isMobile,g=(0,n.useRef)(null);(0,n.useEffect)((()=>{ne().yM(d,it)}),[d]);const h=(0,s().VK)((()=>oe().default.isVisible(it)),[]),[m,f]=(0,n.useState)(h),[b,x]=(0,n.useState)();(0,n.useEffect)((()=>{h&&f(!0)}),[h]);const S=(0,s().VK)((()=>u().iE(t,i)),[t,i]),y=(0,p().Z)(),v=(0,a().yK)((e=>({container:{marginLeft:c?y:12,marginRight:c?y:12},linkContainer:{display:"flex",alignItems:"center",height:32,borderRadius:6,fontSize:14,lineHeight:2.28,border:b?`1px solid ${e.errorText}`:m?`1px solid ${e.stroke.uiBluePrimary}`:`1px solid ${e.outlineButtonBorder}`,boxShadow:m&&!b?e.focusedShadow:void 0}})),[y,c,m,b]);return(0,U.jsxs)("div",{style:v.container,children:[(0,U.jsx)(tt,{originRef:g}),(0,U.jsxs)("div",{style:v.linkContainer,ref:g,children:[S&&(0,U.jsx)(je,{store:t,siteRootBlockStore:i,disabled:l,showManageAllDomains:r}),(0,U.jsx)(Ge,{store:t,siteRootBlockStore:i,isError:Boolean(b),setError:e=>{x(e)},showSlugInput:m,setShowSlugInput:f})]}),(0,U.jsx)(ot,{errorMessage:b})]})}function ot(e){const{errorMessage:t}=e,i=(0,a().yK)((e=>({container:{fontSize:12,lineHeight:1.33,minHeight:20,width:"100%",color:e.errorText,padding:2,marginTop:6,display:"flex",flexDirection:"row",alignItems:"center"}})),[]);return t?(0,U.jsx)("div",{style:i.container,children:t}):null}function st(e){const{store:t,siteRootBlockStore:i,showManageAllDomains:n}=e,o=(0,s().VK)((()=>!t.canAdmin()),[t]),l=(0,a().yK)((()=>({container:{display:"flex",flexDirection:"column",gap:8,paddingBottom:12},settingsContainer:{opacity:o?.7:1}})),[o]);return(0,U.jsxs)("div",{style:l.container,children:[i&&(0,U.jsx)(nt,{store:t,siteRootBlockStore:i,disabled:o,showManageAllDomains:n}),(0,U.jsx)(w().Z,{renderTooltip:()=>(0,U.jsx)(b()._H,{defaultMessage:"You must have full access to this page to update the settings",id:"publishSiteSettings.all.noEditAccess"}),disableTooltip:!o,render:t=>(0,U.jsx)("div",{style:l.settingsContainer,...t,children:(0,U.jsx)(lt,{...e,disabled:o})})}),(0,U.jsx)(rt,{...e}),(0,U.jsx)(at,{store:t})]})}function at(e){const{store:t}=e,i=(0,o().O7)().device.isMobile,n=(0,s().VK)((()=>!t.canAdmin()),[t]),l=(0,s().VK)((()=>{var e;return null===(e=t.getSpaceStore())||void 0===e?void 0:e.canAdmin()}),[t]),{domainDisplayName:r,isPublicHomepage:d}=(0,s().VK)((()=>{const e=t.getSpaceStore(),i=u().UM(t),n=R().Co({spaceStore:e,domainId:i}),o=R().Nc(e,i);return{domainDisplayName:n,isPublicHomepage:(null==o?void 0:o.getPublicHomePage())===t.id}}),[t]),c=(0,a().yK)((e=>({container:{paddingLeft:18,paddingRight:18,color:e.text.secondary,fontSize:14}})),[]);return i?n?(0,U.jsx)("div",{style:c.container,children:(0,U.jsx)(b()._H,{id:"publishSiteSettings.noEditAccess.mobileTooltip",defaultMessage:"You must have full access to this page to update the settings"})}):d&&!l?(0,U.jsx)("div",{style:c.container,children:(0,U.jsx)(b()._H,{defaultMessage:"This page is the homepage of {domain}. Please visit the Sites tab in Settings on desktop to make changes.",id:"publishSiteSettings.unpublishHomePage.mobileTooltip",values:{domain:r}})}):null:null}function lt(e){const{store:t,siteRootBlockStore:i,mostPermissivePublicItem:n,location:s,sudoModeStore:l,onSettingUpdate:r,onSeoClick:d,onEmbedClick:u,disabled:g}=e,{permissionItem:h,from:m}=n,f=(0,o().O7)(),b=(0,p().Z)(),S="published_site_settings"===s,v=(0,a().yK)((e=>({container:{display:"flex",flexDirection:"column",gap:4,paddingLeft:b,paddingRight:b,paddingBottom:S?0:12,paddingTop:0,boxShadow:S?void 0:`inset 0 -1px 0 ${e.regularDividerColor}`}})),[b,S]),k=(0,I().E)("enable_embeddable_sites_for_space"),T=(0,x().oA)([i&&!f.device.isMobile&&{key:"customizeSiteSetting",render:e=>(0,U.jsx)(z,{...e,disabled:g}),action:()=>{M().MF({environment:f,store:t,siteRootBlockStore:i,from:"customize_site"}),c().Y_({siteRootBlockStore:i,permissionItem:h,from:m,sudoModeStore:l}),(0,K().g2)(f,{page_from:t.id,is_root:i.id===t.id})}},i&&{key:"setLocaleUserSetting",render:e=>(0,U.jsx)(ie,{...e,disabled:g,siteRootBlockStore:i,permissionItem:h}),action:()=>{d()}},{key:"linkExpirationSetting",render:e=>(0,U.jsx)(ee().Z,{...e,disabled:g,permissionItem:h,onChange:e=>{r({expiration_timestamp:e}),(0,P().aC)(f,{target_block_id:t.id,expiration_timestamp:e??null})}}),action:()=>{}},{key:"duplicateAsTemplateSetting",render:e=>(0,U.jsx)(Y().Z,{...e,disabled:g,value:h.allow_duplicate}),action:()=>{const e=h.allow_duplicate;r({allow_duplicate:!e}),y().l7(f,{allow_duplicate:!e})}},k&&{key:"embedSetting",render:e=>(0,U.jsx)(J,{...e,disabled:g}),action:()=>{u()}}]),w=(0,x().oA)([{key:0,render:e=>(0,U.jsx)(_().Z,{style:v.container,...e}),items:T}]);return(0,U.jsx)(j().Z,{type:j().i.Vertical,sections:w,initialFocus:void 0,resetFocusOnMouseOut:!0})}function rt(e){const{store:t,onUnpublish:i,onSettingUpdate:l,showAllPublishedSites:r,shouldAskForConfirmationOnPublish:d}=e,u=(0,o().O7)(),p=u.device.isMobile,g=(0,s().VK)((()=>t.canAdmin()),[t]),h=(0,s().VK)((()=>{var e;return null===(e=t.getSpaceStore())||void 0===e?void 0:e.canAdmin()}),[t]),x=(0,s().VK)((()=>Boolean(R().rl(t.getSpaceStore(),t.id))),[t]),y=!g||x&&!h,j=(0,n.useCallback)((async()=>{let e=!0;d&&(e=await B().eT(f().QaF(t.getTitleValue()))),e&&(l({role:"none"}),i&&i())}),[d,t,l,i]),_=(0,n.useCallback)((()=>{v().h(u),c().wt({environment:u,store:t,pageVisitSource:m().tY.SiteSettings})}),[u,t]),M=(0,I().E)("sites_split_publish_actions")||p,P=(0,s().VK)((()=>{const e=H().default.state.currentSpaceStore;return!p&&!(0,C().Cx)(e)&&r}),[p,r]),K=(0,a().yK)((()=>({buttonContainer:{gap:6},actionButtons:{display:"flex",alignItems:"center",gap:8,marginTop:4,paddingLeft:M?12:8,paddingRight:12,height:32,justifyContent:"flex-end"},button:{flexGrow:1,flexBasis:M?0:void 0,maxWidth:M?void 0:90,height:32,fontWeight:S().Ue.medium},disabledButton:{opacity:.7},icon:{height:16,width:16,marginRight:4}})),[M]);return M?(0,U.jsxs)("div",{style:K.buttonContainer,children:[(0,U.jsxs)("div",{style:K.actionButtons,children:[(0,U.jsx)(w().Z,{disableTooltip:!y,renderTooltip:()=>x&&!h?(0,U.jsx)(b()._H,{defaultMessage:"You cannot unpublish the public homepage of a workspace domain. Go to the Sites tab in Settings to make changes.",id:"publishSiteSettings.unpublishHomePage.tooltip"}):(0,U.jsx)(b()._H,{defaultMessage:"You must have full access to this page to unpublish it",id:"publishSiteSettings.unpublish.tooltip"}),render:e=>(0,U.jsx)(k().Z,{...e,onClick:j,disabled:y,style:y?{...K.button,...K.disabledButton}:K.button,children:(0,U.jsx)(b()._H,{defaultMessage:"Unpublish",id:"publishSiteSettings.unpublish.title"})}),textWrap:!0,placement:Z().Placement.Bottom,style:{width:D().SITE_SETTINGS_TOOLTIP_WIDTH}}),(0,U.jsx)(T().Z,{onClick:_,style:K.button,children:(0,U.jsx)(b()._H,{defaultMessage:"View site",id:"publishSiteSettings.viewSite.title"})})]}),P&&(0,U.jsx)("div",{style:K.actionButtons,children:(0,U.jsx)("div",{style:{display:"flex",flex:1},children:(0,U.jsx)(F,{store:t})})})]}):(0,U.jsxs)("div",{style:K.actionButtons,children:[P&&(0,U.jsx)("div",{style:{display:"flex",flex:1},children:(0,U.jsx)(F,{store:t})}),(0,U.jsx)(w().Z,{disableTooltip:!y,renderTooltip:()=>x?(0,U.jsx)(b()._H,{defaultMessage:"You cannot unpublish the public homepage of a workspace domain. Go to the Sites tab in Settings to make changes.",id:"publishSiteSettings.unpublishHomePage.tooltip"}):(0,U.jsx)(b()._H,{defaultMessage:"You must have full access to this page to unpublish it",id:"publishSiteSettings.unpublish.tooltip"}),render:e=>(0,U.jsx)(k().Z,{...e,onClick:j,disabled:y,style:y?{...K.button,...K.disabledButton}:K.button,children:(0,U.jsx)(b()._H,{defaultMessage:"Unpublish",id:"publishSiteSettings.unpublish.title"})}),textWrap:!0,placement:Z().Placement.Bottom,style:{width:D().SITE_SETTINGS_TOOLTIP_WIDTH}}),(0,U.jsx)(T().Z,{onClick:_,style:K.button,children:(0,U.jsx)(b()._H,{defaultMessage:"View site",id:"publishSiteSettings.viewSite.title"})})]})}var dt=()=>i(474788),ct=()=>i(998411),ut=()=>i(156642),pt=()=>i(530980),gt=()=>i(375255);const ht="Notion | The connected workspace with site publishing",mt="Made with Notion, the all-in-one connected workspace with publishing capabilities.";var ft=()=>i(69870),bt=()=>i(943620),xt=()=>i(471645),St=()=>i(251932),yt=()=>i(314379);const vt=(0,i(827282).IU)("sparkleMagnifyingGlass",{viewBox:"0 0 19 15",svg:(0,U.jsx)("path",{d:"M.02 5.78c0-.77.143-1.49.43-2.16A5.578 5.578 0 0 1 3.424.645a5.384 5.384 0 0 1 2.16-.438 5.4 5.4 0 0 1 2.167.438 5.499 5.499 0 0 1 1.77 1.196c.51.51.91 1.103 1.197 1.777.287.67.43 1.39.43 2.16 0 .597-.09 1.167-.273 1.71a5.495 5.495 0 0 1-.759 1.483l3.46 3.472a.843.843 0 0 1 .211.322c.05.127.075.257.075.39 0 .19-.043.364-.13.519a.982.982 0 0 1-.875.499c-.136 0-.266-.023-.39-.069a.926.926 0 0 1-.334-.218L8.646 10.4a5.833 5.833 0 0 1-1.428.69 5.218 5.218 0 0 1-1.634.254 5.457 5.457 0 0 1-2.16-.43A5.78 5.78 0 0 1 1.646 9.71 5.6 5.6 0 0 1 .45 7.94a5.457 5.457 0 0 1-.43-2.16Zm1.456 0c0 .564.107 1.095.32 1.592.215.497.509.934.883 1.313a4.26 4.26 0 0 0 1.305.881c.497.215 1.03.322 1.6.322.57 0 1.103-.107 1.6-.322a4.236 4.236 0 0 0 1.312-.881c.378-.379.672-.816.882-1.313a3.98 3.98 0 0 0 .321-1.593c0-.57-.107-1.103-.321-1.6a4.083 4.083 0 0 0-.882-1.312 4.083 4.083 0 0 0-1.312-.882 3.996 3.996 0 0 0-1.6-.32c-.57 0-1.103.106-1.6.32-.492.21-.927.504-1.305.882a4.236 4.236 0 0 0-.882 1.313 3.996 3.996 0 0 0-.321 1.6Zm2.064-.404a.472.472 0 0 1-.355-.15.511.511 0 0 1-.137-.356.483.483 0 0 1 .492-.492h4.095a.46.46 0 0 1 .348.143.475.475 0 0 1 .144.35.498.498 0 0 1-.144.355.45.45 0 0 1-.348.15H3.54Zm0 1.798a.483.483 0 0 1-.355-.144.487.487 0 0 1-.137-.348c0-.137.045-.256.137-.356.095-.1.214-.15.355-.15h2.953c.137 0 .253.05.349.15a.486.486 0 0 1 0 .704.475.475 0 0 1-.349.144H3.54ZM15.852.694c.738 0 1.296.186 1.674.56.379.374.568.927.568 1.661v8.32c0 .729-.19 1.28-.568 1.654-.378.378-.936.567-1.674.567H14.6c.036-.237.03-.472-.02-.704a1.703 1.703 0 0 0-.288-.643h1.477c.314 0 .556-.082.724-.246.173-.164.26-.412.26-.745V3.024c0-.328-.087-.574-.26-.738-.168-.164-.41-.246-.724-.246H7.676V.693h8.176ZM4.23 12.108h4.998l1.346 1.347H4.142c-.734 0-1.292-.19-1.675-.567-.378-.374-.568-.925-.568-1.655v-1.9h1.347v1.784c0 .333.084.581.253.745.169.164.412.246.731.246Z"})});var jt=()=>i(584006);const kt=(0,b().vU)({seoTitle:{id:"publishSiteSettings.SEO.toggle",defaultMessage:"Discoverable on the web"}});function Tt(e){const{store:t,siteRootBlockStore:i,permissionItem:r,onNavigateBack:d}=e,p=(0,o().O7)(),g=(0,b().YB)(),{spaceId:h,userId:m}=(0,s().VK)((()=>{var e,i;return{spaceId:null===(e=t.getSpaceStore())||void 0===e?void 0:e.id,userId:null===(i=t.getSpaceStore())||void 0===i?void 0:i.userId}}),[t]),f=(0,ye().VX)({name:"seo_title_and_description",spaceId:h,userId:m}),x=(0,s().VK)((()=>u().LC(i,r)),[i,r]),{seoTitle:v,seoDescription:j,icon:k,domainName:T}=(0,s().VK)((()=>{var e,n,o,s;let a=null===(e=t.getFormat())||void 0===e?void 0:e.seo_title,r=null===(n=t.getFormat())||void 0===n?void 0:n.seo_description;a||(a=function(e,t,i,n){if(!t)return;const o=t.getRenderTitle({getRecordModel:i,userTimeZone:n,intl:e});return o?`${o} | Notion`:void 0}(g,t.getModel(),t.getRecordModel,(0,ct().r)())),r||(r=function(e,t,i,n){if(!t)return;const o=t.getCollectionPointer(),s=o&&i(o);if(s&&s.getDescription()){const t=(0,gt().Xh)({intl:e,textValue:s.getDescription(),getRecordModel:i,userTimeZone:n});if(t)return t}let a=[...t.getContentIds()||[]];for(;a.length>0;){const t=a.shift();if(!t)break;const o=i({table:l().iU,id:t});if(!o||"page"===o.type||!(0,ut().XD)(o.type,o.getFormat()))continue;const s=pt().kk5.fromBlock(o).getRenderTitle({getRecordModel:i,userTimeZone:n,intl:e});if(s)return s;a=a.concat(o.getContentIds()||[])}}(g,t.getModel(),t.getRecordModel,(0,ct().r)()));let d=t.getIcon();const c=null===(o=i.getSiteStore())||void 0===o?void 0:o.getFaviconUrl();return c&&(d={pointer:i.pointer,icon:c}),{seoTitle:a,seoDescription:r,icon:d,domainName:R().Co({spaceStore:t.getSpaceStore(),domainId:null===(s=i.getSiteStore())||void 0===s?void 0:s.getDomainId()})}}),[g,t,i]),[_,w]=(0,n.useState)(v),[C,I]=(0,n.useState)(j),[M,B]=(0,n.useState)(!1),[Z,H]=(0,n.useState)(!1),P=!x||!f,K=()=>{c().DR({environment:p,siteRootBlockStore:i,isSearchEngineIndexingEnabled:!x}),y().g0(p,{allow_search_engine_indexing:!x}),B(!0)},D=(0,n.useCallback)((e=>{const t=e.target;t instanceof HTMLElement&&(0,dt().E)(t)&&H(!0)}),[]),E=(0,n.useCallback)((()=>{H(!1)}),[]),V=(0,a().yK)((e=>({searchIcon:{width:19},linkTitleContainer:{paddingLeft:8,paddingRight:8},descriptionContainer:{paddingLeft:8,paddingRight:8},inputLabel:{fontWeight:S().Ue.medium,fontSize:12,lineHeight:1.25,color:e.text.secondary},inputContainer:{borderRadius:6,height:34,padding:4,fontWeight:S().Ue.regular,fontSize:14,lineHeight:1.3,backgroundColor:e.surface.wash},input:{paddingLeft:4,color:P?e.lightTextColor:void 0},descriptionInput:{height:68}})),[P]);return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(ft().Z,{show:Z}),(0,U.jsx)(jt().U,{title:kt.seoTitle,icon:vt,iconStyle:V.searchIcon,right:(0,U.jsx)(xt().Z,{on:Boolean(x),onClick:K}),disabled:!1,onClick:K}),(0,U.jsx)(_t,{isSeoOff:!x,title:_,description:C,icon:k,domainName:T}),(0,U.jsxs)(St().Ht,{gap:6,style:V.linkTitleContainer,children:[(0,U.jsx)("div",{style:V.inputLabel,children:(0,U.jsx)(b()._H,{id:"publishSiteSettings.SEO.titleInputLabel",defaultMessage:"Link title"})}),(0,U.jsx)(Re().Z,{type:"text",style:V.inputContainer,inputStyle:V.input,value:_,onChange:e=>{w(e.target.value),B(!0)},placeholder:ht,disabled:P,onFocus:D,onBlur:E})]}),(0,U.jsxs)(St().Ht,{gap:6,style:V.descriptionContainer,children:[(0,U.jsx)("div",{style:V.inputLabel,children:(0,U.jsx)(b()._H,{id:"publishSiteSettings.SEO.descriptionInputLabel",defaultMessage:"Description"})}),(0,U.jsx)(Re().Z,{textarea:!0,style:{...V.inputContainer,...V.descriptionInput},inputStyle:V.input,value:C,onChange:e=>{I(e.target.value),B(!0)},placeholder:mt,disabled:P,onFocus:D,onBlur:E})]}),(0,U.jsx)(wt,{spaceId:h,userId:m,disabled:!M,onSaveClick:()=>{c().Q6({environment:p,store:t,seoTitle:_,seoDescription:C}),d()}})]})}function _t(e){const{isSeoOff:t,title:i,description:n,icon:o,domainName:s}=e,l=(0,a().yK)((e=>({container:{paddingLeft:8,paddingRight:8},previewContainer:{alignItems:"center",justifyContent:"center",padding:12,border:`1px solid ${e.stroke.primary}`,borderRadius:8,height:84},domainContainer:{alignItems:"center",fontSize:11,lineHeight:1.5,width:"100%",opacity:t?.3:1},menuIcon:{color:e.text.secondary,height:12,width:12,transform:"rotate(90deg)",marginTop:1},inputLabel:{fontWeight:S().Ue.medium,fontSize:12,lineHeight:1.25,color:e.text.secondary},title:{color:e.seoPreviewTitle,fontSize:16,lineHeight:1.4,fontWeight:S().Ue.medium,width:"100%",opacity:t?.3:1,...S().Yu},description:{fontSize:12,lineHeight:1.33,width:"100%",opacity:t?.3:1,...S().Yu},emptyPlaceholderText:{color:e.text.tertiary,width:"100%",textAlign:"center"}})),[t]);return(0,U.jsxs)(St().Ht,{gap:6,style:l.container,children:[(0,U.jsx)("div",{style:l.inputLabel,children:(0,U.jsx)(b()._H,{id:"publishSiteSettings.SEO.previewTitle",defaultMessage:"SEO preview"})}),(0,U.jsxs)(St().Ht,{justifyContent:"space-between",alignItems:"center",style:l.previewContainer,children:[(0,U.jsxs)(St().gq,{gap:4,style:l.domainContainer,children:[(0,U.jsx)(bt().Z,{disabled:!0,icon:o,isEmptyPage:!1,disableShrinking:!0,size:16,emojiSize:16,style:{marginRight:4}}),s,(0,yt().o)(l.menuIcon)]}),(0,U.jsxs)("div",{style:l.title,children:[i||ht," "]}),(0,U.jsx)("div",{style:l.description,children:n||mt})]})]})}function wt(e){const{disabled:t,onSaveClick:i,spaceId:n,userId:o}=e,s=(0,ye().oo)({name:"seo_title_and_description",spaceId:n,userId:o}),l=null==s?void 0:s.upsell,r=(0,a().yK)((()=>({upsellContainer:{paddingLeft:8},saveButton:{height:32,marginLeft:"auto",marginRight:8,width:"fit-content"}})),[]);return l?(0,U.jsxs)(St().gq,{gap:6,style:r.upsellContainer,children:[(0,U.jsx)(L().Z,{children:(0,U.jsx)(b()._H,{id:"publishSiteSettings.SEO.upgradeTitle",defaultMessage:"Edit link title and description"})}),(0,U.jsx)(Se().R,{upsell:l,analyticsName:"search_engine_indexing_title_override"})]}):(0,U.jsx)(T().Z,{onClick:i,disabled:t,style:r.saveButton,children:(0,U.jsx)(b()._H,{defaultMessage:"Save changes",id:"publishSiteSettings.seo.saveChanges"})})}function Ct(e){const{store:t,mostPermissivePublicItem:i,sudoModeStore:p,location:h,showManageAllDomains:m,showAllPublishedSites:f,onUnpublish:b,shouldAskForConfirmationOnPublish:x}=e,{permissionItem:S,from:y}=i,v=(0,o().O7)(),{isMobile:j}=(0,o().Fy)(),k=(0,s().VK)((()=>{if(t.getSpaceStore())return u().gR(t)}),[t]),T=(0,a().yK)((()=>({container:{display:"flex",flexDirection:"column",gap:8,...j?{paddingTop:16}:{}}})),[j]),_=(0,s().VK)((()=>g().Z.state.siteSettingContentType),[]),w=(0,n.useCallback)((e=>{const i=y.table===l().iU?y.blockId:y.teamId;(0,d().iK)({oldPermissionItem:S,newPermissionItem:{...S,...e},wasInherited:i!==t.id,environment:v,store:t,sudoModeStore:p,location:h})}),[v,t,S,p,y,h]);return(0,U.jsx)("div",{style:T.container,children:"initial"===_?(0,U.jsx)(st,{store:t,siteRootBlockStore:k,location:h,mostPermissivePublicItem:i,sudoModeStore:p,onSettingUpdate:w,onSeoClick:()=>{(0,c().pn)("seo")},onEmbedClick:()=>{(0,c().pn)("embed"),(0,r().j)({environment:v,event:{eventName:"click_embed_page_settings",eventProperties:{target_block_id:t.id}}})},showManageAllDomains:m,showAllPublishedSites:f,onUnpublish:b,shouldAskForConfirmationOnPublish:x}):(0,U.jsx)(It,{settingsContentType:_,store:t,siteRootBlockStore:k,permissionItem:S,onNavigateBack:()=>{(0,c().pn)("initial")}})})}function It(e){const{store:t,siteRootBlockStore:i,permissionItem:n,onNavigateBack:s,settingsContentType:l}=e,{isMobile:r}=(0,o().Fy)(),d=(0,p().Z)(),c=(0,a().yK)((()=>({container:{display:"flex",flexDirection:"column",gap:16,marginTop:14,marginBottom:r?0:16,paddingLeft:d,paddingRight:d}})),[d,r]);return i?(0,U.jsx)("div",{style:c.container,children:"seo"===l?(0,U.jsx)(Tt,{store:t,siteRootBlockStore:i,permissionItem:n,onNavigateBack:s}):(0,U.jsx)(h().O,{currentBlockStore:t})}):null}},787093:(e,t,i)=>{i.d(t,{Z:()=>s});var n=()=>i(219727),o=()=>i(142735);function s(){const e=(0,n().O7)();return(0,o().VK)((()=>e.WindowSizeStore.getSafePaddingLeftCSS(8)),[e])}},266184:(e,t,i)=>{i.d(t,{Sl:()=>v,TA:()=>j,Zg:()=>S,a2:()=>T,eT:()=>k,mk:()=>y});i(821057),i(670560),i(267602),i(653476),i(667294);var n=()=>i(217465),o=()=>i(396136),s=()=>i(788860),a=()=>i(839002),l=()=>i(824462),r=()=>i(308186),d=()=>i(828946),c=()=>i(365872),u=()=>i(681832),p=()=>i(804217),g=()=>i(826955),h=()=>i(625820),m=()=>i(59864),f=()=>i(835374),b=i(785893);const x=50;function S(e){f().default.resetSitesForSpace(e.id)}async function y(e,t){const{spaceStore:i,currentUserId:s,limit:r}=t;if(!i.id)return;const[d]=await Promise.all([l().callApi({eventName:"getPublishedPagesForUser",environment:e,data:{spaceId:i.id,limit:r||x,fetchPublishedMetadata:!0}}),(0,a().Vs)(1500)]);if("failed"===d.type)throw new Error("Failed to fetch published pages.");if(d.data.recordMap){const e=[],t=n().RecordMapWithRole.create(d.data.recordMap),a=d.data.publishedEdits;for(const{model:n}of t)if(n&&n.table===o().iU){const t=g().G.createChildStore(i,{table:o().iU,id:n.id}),s=a[t.id],l=s&&s.authors?s.authors[0]:void 0,r={publishedTime:null==s?void 0:s.timestamp,publishedBy:l};e.push({store:t,publishedMetadata:r})}let l=e;return s&&(l=m().S(e,s)),f().default.initializeSiteResultsForSpace(i.id,l),l}}async function v(e,t){const{spaceStore:i}=t,n=e.currentUser.id,o=await y(e,{spaceStore:i,currentUserId:n});return o?o.filter((e=>{var t;return(null===(t=e.publishedMetadata.publishedBy)||void 0===t?void 0:t.id)===n})):[]}function j(e){c().lG(e),u().default.setState({...u().default.state,display:u().wV.Publish,tab:u().XF.Publish})}async function k(e){return new Promise(((t,i)=>{r().vC({message:(0,b.jsx)("div",{style:{textAlign:"center"},children:(0,b.jsx)(s()._H,{id:"sites.confirmUnpublish.title",defaultMessage:"Unpublish this site?"})}),description:(0,b.jsx)("div",{style:{textAlign:"center"},children:(0,b.jsx)(s()._H,{id:"sites.confirmUnpublish.caption",defaultMessage:"{pageTitle} will no longer be live on the web.",values:{pageTitle:e}})}),keepFocus:!0,items:[{label:(0,b.jsx)(s()._H,{id:"sites.confirmUnpublish.confirm",defaultMessage:"Unpublish"}),color:"red",onAccept:()=>t(!0)}],showCancel:!0})}))}async function T(e,t){if(!p().default.state.online)return[];const i=await d().x.searchActions.load();return await i.searchPublicPages({environment:t,query:e,source:"public_home_page_menu",limit:h().Xv})}},59864:(e,t,i)=>{i.d(t,{N:()=>l,S:()=>a});i(267602),i(470928);var n=()=>i(933868),o=()=>i(514737),s=()=>i(122479);function a(e,t){return e.sort(((e,i)=>{const n=e.store.canAdmin();if(n===i.store.canAdmin()){var o,s;const n=null===(o=e.publishedMetadata.publishedBy)||void 0===o?void 0:o.id,a=e.publishedMetadata.publishedTime,l=null===(s=i.publishedMetadata.publishedBy)||void 0===s?void 0:s.id,r=i.publishedMetadata.publishedTime;if(t){if(n===t&&l===t&&a&&r)return r-a;if(n===t)return-1;if(l===t)return 1}return a&&r?r-a:0}return n?-1:1}))}function l(e){const{environment:t,store:i}=e;if(!i.pathIsAccessibleAndAlive())return!1;const a=s().YO(i).find((e=>(0,n().$D)(e.permissionItem)&&"none"!==e.permissionItem.role));return!!a&&((!(0,n().$D)(a.permissionItem)||!(0,o().y)(a.permissionItem))&&!s().IJ(t,i))}},835374:(e,t,i)=>{i.d(t,{default:()=>s});i(267602),i(653476);var n=()=>i(513670);class o extends(()=>i(263184))().default{getInitialState(){return{sites:{},sortAscending:!0,sortColumn:void 0}}initializeSiteResultsForSpace(e,t){this.state.sites[e]=t,this.emit()}getSortedSitesForSpace(e,t){const{sortAscending:o,sortColumn:s}=this.state,a=this.state.sites[e];if(a)switch(s){case"page":return n().Xo(a,(e=>i(955620).QaF(e.store.getTitleValue()).toLowerCase()),o?"asc":"desc");case"published-by":return n().Xo(a,(e=>{const n=e.publishedMetadata.publishedBy,o=n?i(826955).t1.createChildStore(e.store,n):void 0;return null==o?void 0:o.getDisplayName(t).toLowerCase()}),o?"asc":"desc");case"published-date":return n().Xo(a,(e=>e.publishedMetadata.publishedTime),o?"asc":"desc");default:return a}}removeSiteFromSpace(e,t){const i=this.state.sites[e];i&&(this.state.sites[e]=i.filter((e=>e.store.id!==t)),this.emit())}resetSitesForSpace(e){this.state.sites[e]=void 0}}const s=new o}}]);