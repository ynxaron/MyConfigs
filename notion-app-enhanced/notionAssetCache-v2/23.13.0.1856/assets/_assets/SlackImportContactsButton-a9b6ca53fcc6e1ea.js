"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[45379],{887863:(n,t,i)=>{i.d(t,{r:()=>o});i(667294);var e=i(785893);const o=(0,i(827282).IU)("circleCheckFilled",{viewBox:"0 0 16 16",svg:(0,e.jsx)("path",{d:"M8 16c4.377 0 8-3.631 8-8 0-4.376-3.631-8-8.008-8C3.624 0 0 3.624 0 8c0 4.369 3.631 8 8 8zm-.886-4.165c-.267 0-.487-.11-.69-.384l-1.97-2.416a.852.852 0 01-.187-.51c0-.352.274-.643.627-.643.228 0 .4.07.596.33l1.592 2.055 3.35-5.38c.148-.236.352-.362.556-.362.345 0 .667.236.667.604 0 .173-.102.353-.196.518l-3.686 5.804c-.165.259-.393.384-.66.384z"})})},961780:(n,t,i)=>{i.d(t,{e:()=>s});i(667294);var e=()=>i(846550),o=()=>i(568017),r=()=>i(312578),l=()=>i(696347),a=()=>i(887863),c=i(785893);function s(n){const{isConnecting:t,isIntegrationAuthenticated:i,hideChevronIcon:s}=n,d=(0,e().yK)((n=>({circleCheck:{height:14,width:14,color:o().ZP.blue,fill:o().ZP.blue},chevron:{height:12,width:12},loadingSpinner:{width:14,height:14,marginLeft:6}})),[]);return t?(0,c.jsx)(r().Z,{style:d.loadingSpinner}):(0,c.jsxs)(c.Fragment,{children:[i&&(0,a().r)(d.circleCheck),!s&&(0,l().o)(d.chevron)]})}},221937:(n,t,i)=>{i.r(t),i.d(t,{default:()=>u});i(267602),i(470928);var e=i(667294),o=()=>i(142735),r=()=>i(235484),l=()=>i(839002),a=()=>i(832024),c=()=>i(824462),s=()=>i(138912),d=i(785893);const u=function(n){const{onClickAuthenticated:t,title:u,hideChevronIcon:h,containerStyle:g,buttonStyle:v,from:f,inviteOrigin:p,flowId:C,loadContacts:_}=n,m=(0,i(219727).O7)(),[w,y]=e.useState(!1),I=(0,o().VK)((()=>i(876822).default.state.currentSpaceStore),[]),x=(0,o().VK)((()=>{const n=null==I?void 0:I.getBotSettingsStore().getValue();return"approved_only"!==(null==n?void 0:n.integration_restrictions)||Boolean((null==n?void 0:n.integration_approval_statuses)&&n.integration_approval_statuses[r().nO])}),[I]),k=(0,o().VK)((()=>s().default.integrations.state.find((n=>n.id===r().nO))),[]),S=(0,o().Kw)(s().default.completeSlackAuthentications),b=(0,i(842576).ph)();return I&&x?(0,d.jsx)("div",{style:g,children:(0,d.jsx)(i(92175).Z,{style:v,onClick:async()=>{0===S.length?await async function(n){const{from:e,inviteOrigin:o,flowId:r}=n,s=m.currentUser.id;if(!k||!I||!s)return;try{var d;y(!0),a().n0(m,{origin:o,from:e,invite_flow_id:r});const n=await i(388915).hM({environment:m,integration:k,spaceId:I.id,from:e});if(i(855741).x.isFail(n))return void a().ZK(m,{origin:o,from:e,invite_flow_id:r,is_success:!1});const s=null===(d=n.value.externalAuthentication)||void 0===d?void 0:d.parent_id;if(!s)return;a().ZK(m,{origin:o,from:e,invite_flow_id:r,is_success:!0}),_&&await Promise.race([c().callApi({eventName:"loadContacts",environment:m,data:{botId:s,spaceId:I.id,integrationId:k.id,importContactType:"slack"}}),(0,l().Vs)(2e3)]),null==t||t()}finally{y(!1)}}({from:f,inviteOrigin:p,flowId:C,loadContacts:_}):S.length>0&&(null==t||t())},children:(0,d.jsxs)("div",{style:b.labelContainer,children:[u,(0,d.jsx)(i(961780).e,{isConnecting:w,isIntegrationAuthenticated:S.length>0,hideChevronIcon:h})]})})}):null}}}]);