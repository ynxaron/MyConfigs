"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[1711],{460620:(e,t,n)=>{n.r(t),n.d(t,{WorkflowTemplateThumbnail:()=>I});n(241792);var l=n(667294),o=()=>n(846550),r=()=>n(707513),a=()=>n(661641),i=()=>n(167777),s=()=>n(38883),c=()=>n(246471),p=()=>n(406756),d=()=>n(714230),u=()=>n(518242);const m=5;function f(e){const t=function(e){return 60+(2*(e+3)+43)%(e%5+2)*5}(e);return{width:`${t}%`,maxWidth:"80%",height:m}}const h=[30,45,35,40];function y(e){let{index:t,offset:n}=e;return{width:h[(t+n)%h.length],height:m}}var v=n(785893);const g=[{avatarSrc:d().Z.images.workflowTemplates.previewAvatar1Png,name:""},{avatarSrc:d().Z.images.workflowTemplates.previewAvatar2Png,name:""},{avatarSrc:d().Z.images.workflowTemplates.previewAvatar3Png,name:""}];function x(e){const t=(0,o().yK)((e=>({container:{display:"flex",alignItems:"center",width:"100%"},avatarWrapper:{display:"flex",alignItems:"center",justifyContent:"center",width:12,height:12,marginRight:4,boxSizing:"content-box",borderRadius:"100%",overflow:"hidden",outlineWidth:1,outlineStyle:"solid",outlineColor:e.stroke.secondary},avatarImage:{width:"100%",height:"100%",borderRadius:"100%"}})),[]),n=g[e.index%g.length];return(0,v.jsxs)("div",{style:t.container,children:[(0,v.jsx)("div",{style:t.avatarWrapper,children:(0,v.jsx)(u().ZP,{src:n.avatarSrc,style:t.avatarImage})}),(0,v.jsx)(p().X,{style:f(e.index)})]})}function w(e){let{propertySchema:t,columnIndex:n,rowIndex:l,templateIndex:r}=e;const a=(0,o().yK)((()=>({container:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",width:"100%",height:"100%"}})),[]);return(0,v.jsx)("div",{style:a.container,children:(0,v.jsx)(_,{propertySchema:t,columnIndex:n,rowIndex:(l+r)%3})})}function _(e){let{propertySchema:t,columnIndex:n,rowIndex:l}=e;switch(t.type){case"number":return(0,v.jsx)(p().X,{style:y({index:l,offset:n})});case"text":case"title":return(0,v.jsx)(p().X,{style:f(l)});case"select":case"multi_select":{const e=(0,i().m6)(t),n=e[l%e.length];return n?(0,v.jsx)(c().a,{format:s().lo.ExtremeSmall,value:n.value,color:n.color,showRemoveButton:!1,isSingle:!0}):null}case"status":{const e=(0,i().m6)(t),n=e[l%e.length];return n?(0,v.jsx)(c().F,{value:n.value,color:n.color,format:s().lo.ExtremeSmall,showRemoveButton:!1,isSingle:!0,groupColor:n.color}):null}case"created_time":case"last_edited_time":case"last_visited_time":case"date":return(0,v.jsx)(p().X,{style:{width:"70%",maxWidth:"70%",height:m}});case"created_by":case"last_edited_by":case"person":return(0,v.jsx)(x,{index:l});default:return null}}const S=l.memo(w),I=l.memo((function(e){let{template:t,index:l}=e;const s=t.value.targetCollection.name,c=(0,n(142735).VK)((()=>(0,i().G$)((0,n(533808).BL)({template:t})).splice(0,3)),[t]),p=(0,o().yK)((e=>({container:{display:"flex",flexDirection:"column",paddingTop:12,paddingLeft:12,backgroundColor:e.modalBackground},header:{display:"flex",alignItems:"center",gap:4,marginLeft:4},headerIcon:{width:16,height:16},table:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0, 1fr))",gridTemplateRows:"repeat(4, 20px)"},tableCell:{display:"flex",alignItems:"center",justifyContent:"flex-start",paddingTop:1,marginBottom:-1,borderBottom:`1px solid ${e.stroke.secondary}`,paddingLeft:4,paddingRight:8},propertyTitle:{fontSize:9,...r().Yu},propertyValue:{fontSize:8,...r().Yu}})),[]);return(0,v.jsxs)("div",{style:p.container,children:[(0,v.jsxs)("div",{style:p.header,children:[(0,v.jsx)(n(499819).l,{template:t,size:12}),(0,v.jsx)(a().q,{styleName:"UISmall-12px/Medium",children:s})]}),(0,v.jsxs)("div",{style:p.table,children:[c.map((e=>(0,v.jsx)("div",{style:p.tableCell,children:(0,v.jsx)(a().q,{styleName:"UISmall-12px/Regular",colorName:"secondary",customStyles:p.propertyTitle,children:e.value.name})},`header-${e.templateId}`))),Array.from({length:3}).map(((e,t)=>c.map(((e,n)=>(0,v.jsx)("div",{style:p.tableCell,children:(0,v.jsx)(S,{propertySchema:e.value,rowIndex:t,columnIndex:n,templateIndex:l})},`row-${t}-${e.templateId}`)))))]})]})}))},533808:(e,t,n)=>{n.d(t,{BQ:()=>u,W:()=>p,BL:()=>d,J3:()=>g,se:()=>I,AQ:()=>_,oL:()=>s,lq:()=>m,px:()=>f,IA:()=>v,vg:()=>y,Ds:()=>x,_u:()=>w,Zg:()=>h,xo:()=>T});n(821057),n(267602),n(653476),n(470928),n(241792);var l=()=>n(353329);const o={in_app_template_onboarding_full_with_discovery:["templateSelection","features","viewsSelection"],in_app_template_onboarding_full:["features","viewsSelection"],in_app_template_onboarding_ai_with_discovery:["templateSelection","setupGenerator","features","viewsSelection"],in_app_template_onboarding_ai:["setupGenerator","features","viewsSelection"],in_app_template_onboarding_minimal:["intro"],in_app_template_onboarding_minimal_with_discovery:["templateSelection","intro"]};var r=()=>n(342792),a=()=>n(696459),i=()=>n(281236);function s(e){var t;if(!e||!e.dependencyMap||"board"!==e.value.type)return;const n=null===(t=e.value.format)||void 0===t||null===(t=t.board_columns_by)||void 0===t?void 0:t.property;if(!n)return;const l=e.dependencyMap[`property:${n}`];return l?i().globalWorkflowTemplates.fromIdOfType({templateId:l,type:"property"}):void 0}const c=3;function p(e){let{origin:t,flowId:n,parentStore:l}=e;return{collectionTemplate:void 0,origin:t,flowId:n??(0,r().ZP)(),collectionTemplatesSearchQuery:void 0,parentStore:l}}function d(e){let{template:t}=e;return{recordTitles:new Array(c).fill(""),featureTemplateSelections:t.value.templateItems.map((e=>function(e,t){const n=i().globalWorkflowTemplates.fromId(e);if(!(0,l().Zl)(n))throw new Error(`Template ${e} in collection template is not a feature template`);if("required"===t)return{template:n,optionality:"required",selected:!0};if("optionalDefaultOn"===t)return{template:n,optionality:"optionalDefaultOn",selected:!0};if("optionalDefaultOff"===t)return{template:n,optionality:"optionalDefaultOff",selected:!1};(0,a().t1)(t)}(e.pointer,e.optionality)))}}function u(e){const{collectionTemplate:t,origin:n,flowId:l,parentStore:o}=e;return{collectionTemplate:t,userCustomizations:d({template:t}),previewCollectionViewTemplateId:void 0,origin:n,flowId:l??(0,r().ZP)(),parentStore:o,collectionTemplatesSearchQuery:void 0}}function m(e){if(!e.collectionTemplate)throw new Error("Collection template cannot be undefined");return{collectionTemplate:e.collectionTemplate,previewCollectionViewTemplateId:e.previewCollectionViewTemplateId,userCustomizations:e.userCustomizations,origin:e.origin,flowId:e.flowId,collectionTemplatesSearchQuery:e.collectionTemplatesSearchQuery,parentStore:e.parentStore}}function f(e){var t,n;return{origin:e.origin,has_selection_modal_search_query:((null===(t=e.collectionTemplatesSearchQuery)||void 0===t?void 0:t.length)??0)>0,flow_id:e.flowId,collection_template_id:null===(n=e.collectionTemplate)||void 0===n?void 0:n.templateId,destination_type:e.parentStore.table,destination_id:e.parentStore.id}}function h(e){return"property"===e.type&&"relation"!==e.value.type||"compound"===e.type}function y(e){const{version:t}=e;return o[t].filter((e=>"viewsSelection"!==e))}function v(e){const{currentStepIndex:t}=e;return y(e)[t]}function g(e){const{currentStepIndex:t,collectionTemplate:n}=e,l=y(e);for(let o=t+1;o<l.length;o++){const e=l[o];if(!(n&&S({step:e,template:n})))return o}return-1}function x(e){return g(e)>=0}function w(e){return _(e)>=0}function _(e){const{currentStepIndex:t,collectionTemplate:n}=e,l=y(e);for(let o=t-1;o>=0;o--){const e=l[o];if(!(n&&S({step:e,template:n})))return o}return-1}function S(e){let{step:t,template:n}=e;switch(t){case"viewsSelection":return I(n).length<=1;case"intro":case"setupGenerator":case"recordTitles":case"templateSelection":case"features":return!1;default:(0,a().t1)(t)}}function I(e){const t=(0,l().uC)(e.value.templateItems,"required"),n=(0,l().uC)(e.value.templateItems,"optionalDefaultOn");return i().globalWorkflowTemplates.allOfType({templateIds:[...t,...n],type:"collection_view"})}function T(e){let{userCustomizations:t,templateId:n}=e;const l=t.featureTemplateSelections,o=l.find((e=>e.template.templateId===n));if(!o||"required"===o.optionality)return t;const r={...o,selected:!o.selected};return{...t,featureTemplateSelections:l.map((e=>e.template.templateId===n?r:e))}}}}]);