"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[54581],{328482:(e,t,a)=>{a.d(t,{Z:()=>o,p:()=>n});a(667294);var i=()=>a(846550),s=()=>a(568017),l=()=>a(707513),r=a(785893);function n(e){const{name:t,htmlLabel:a,children:l,errorMessage:n,hideLabel:o,style:c={},labelStyle:u={},errorMessageStyle:m={},required:g}=e,p=(0,i().yK)((e=>({formInputContainer:{display:"flex",flexDirection:"column",gap:6,width:"100%"},formLabel:{color:e.darkTextColor,visibility:o?"hidden":"inherit"},errorMessage:{fontSize:12,color:e.errorText,...m},wrapper:{display:"flex",alignItems:"center"},required:{color:s().ZP.red,marginLeft:2}})),[o,m]);return(0,r.jsxs)("div",{style:{...p.formInputContainer,...c},children:[(0,r.jsxs)("div",{style:p.wrapper,children:[(0,r.jsx)(d,{htmlFor:a,style:{...p.formLabel,...u},children:t}),g&&(0,r.jsx)("div",{style:p.required,children:"*"})]}),l,n&&(0,r.jsx)("div",{role:"alert",style:p.errorMessage,children:n})]})}const o=n;function d(e){const{children:t,htmlFor:a,style:s}=e,n=(0,i().yK)((e=>({base:{lineHeight:l().Nv.UISmall.desktop,fontSize:l().JB.UISmall.desktop,color:e.regularTextColor}})),[]);return(0,r.jsx)("label",{htmlFor:a,style:{...n.base,...s},children:t})}},997048:(e,t,a)=>{a.d(t,{$:()=>u});a(241792),a(667294);var i=()=>a(846550),s=()=>a(696459),l=()=>a(707513),r=()=>a(661641),n=()=>a(661297),o=()=>a(92175),d=()=>a(906651),c=a(785893);function u(e){let{icon:t,title:a,subTitle:s,body:n,actions:o,width:d,style:u}=e;const g=function(e){let{width:t=406,style:a={}}=e;return(0,i().yK)((()=>({container:{display:"flex",flexDirection:"column",alignItems:"center",width:`${t}px`,padding:"20px",gap:"24px",...a},header:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",gap:"8px",fontWeight:l().Ue.semibold,fontSize:"16px"},headerPadding:{paddingTop:"16px"},actions:{display:"flex",flexDirection:"column",gap:"6px",width:"100%"}})),[t,a])}({width:d,style:u});return(0,c.jsxs)("div",{style:g.container,children:[(0,c.jsxs)("div",{style:{...g.header,...!t&&g.headerPadding},children:[t,a,s?(0,c.jsx)(r().q,{styleName:"Body-14px/Regular",colorName:"secondary",children:s}):null]}),n,(0,c.jsx)("div",{style:g.actions,children:null==o?void 0:o.map(((e,t)=>(0,c.jsx)(m,{...e},`marketplace-modal-action-${t}`)))})]})}function m(e){const t=(0,i().yK)((()=>({plainButton:{justifyContent:"center"},actionError:{textAlign:"center"}})),[]);return(0,c.jsxs)(c.Fragment,{children:[(()=>{switch(e.type){case"primary":return(0,c.jsx)(d().Z,{isLarge:!0,onClick:e.onClick,disabled:e.isDisabled,isLoading:e.isLoading,children:e.text});case"outline":return(0,c.jsx)(n().Z,{isLarge:!0,onClick:e.onClick,children:(0,c.jsx)(r().q,{styleName:"UIRegular-14px/Medium",children:e.text})});case"plain":return(0,c.jsx)(o().Z,{isLarge:!0,onClick:e.onClick,isBlue:e.isBlue,isGray:!e.isBlue,style:t.plainButton,children:(0,c.jsx)(r().q,{styleName:"UIRegular-14px/Medium",children:e.text})});default:(0,s().t1)(e)}})(),e.error&&(0,c.jsx)(r().q,{styleName:"UIRegular-14px/Regular",colorName:"redTertiary",customStyles:t.actionError,children:e.error})]})}},486332:(e,t,a)=>{a.r(t),a.d(t,{MarketplaceReviewModal:()=>D});var i=a(667294),s=()=>a(219727),l=()=>a(142735),r=()=>a(565630),n=()=>a(696459),o=()=>a(921981),d=()=>a(594546),c=()=>a(749826),u=()=>a(367666),m=(a(821057),a(54927),a(267602),a(30005),()=>a(846550)),g=()=>a(801812),p=()=>a(788860),h=()=>a(291198),f=()=>a(328482),x=()=>a(876822),b=()=>a(844961),v=()=>a(997048),y=()=>a(592052),M=a(785893);function k(){const e=(0,p().YB)(),t=(0,s().O7)(),a=(0,m().yK)((e=>({body:{display:"flex",flexDirection:"column",width:"100%",gap:"16px"}})),[]),[r,n]=(0,i.useState)(""),[o,d]=(0,i.useState)(),[c,k]=(0,i.useState)(""),[S,T]=(0,i.useState)(),[L,Z]=(0,i.useState)(""),[B,I]=(0,i.useState)(),N=(0,l().VK)((()=>{var t;return null===(t=x().default.state.currentUserStore)||void 0===t?void 0:t.getDisplayName(e,!0)}),[e]);(0,i.useEffect)((()=>{N&&Z(N)}),[N]);const{acquisitionId:P,rating:q,source:D}=(0,l().Kw)(u().Z),{trackRateListing:K,trackReviewListing:U}=(0,y().u)(P),E=(0,l().VK)((()=>u().Z.getReviewId(P)),[P]),[_,z]=(0,g().UK)((async()=>{const e={title:r,description:c,name:L};return E?(0,b().dH)({environment:t,reviewId:E,...e}):(0,b().hg)({environment:t,acquisitionId:P,rating:q,...e})}),[t,E,P,q,r,c,L]);return(0,M.jsx)("form",{method:"dialog",children:(0,M.jsx)(v().$,{title:e.formatMessage(R.modalTitle),subTitle:e.formatMessage(R.modalSubTitle),body:(0,M.jsxs)("div",{style:a.body,children:[(0,M.jsx)(f().p,{name:e.formatMessage(R.title),htmlLabel:w,errorMessage:o,children:(0,M.jsx)(h().Z,{id:w,placeholder:e.formatMessage(R.titlePlaceholder),value:r,onChange:e=>{n(e.target.value),d(void 0)},"aria-invalid":Boolean(o),autoComplete:"off"})}),(0,M.jsx)(f().p,{name:e.formatMessage(R.review),htmlLabel:j,errorMessage:S,children:(0,M.jsx)(h().Z,{id:j,placeholder:e.formatMessage(R.reviewPlaceholder),value:c,onChange:e=>{k(e.target.value),T(void 0)},textarea:!0,autosize:!0,autosizeMinHeight:50,textareaSubmitOnEnter:!1,showClearButton:!0,"aria-invalid":Boolean(S),autoComplete:"off"})}),(0,M.jsx)(f().p,{name:e.formatMessage(R.name),htmlLabel:C,errorMessage:B,children:(0,M.jsx)(h().Z,{id:C,placeholder:e.formatMessage(R.namePlaceholder),value:L,onChange:e=>{Z(e.target.value),I(void 0)},showClearButton:!0,"aria-invalid":Boolean(B)})})]}),actions:[{type:"primary",text:e.formatMessage(R.submit),onClick:async()=>{try{await z(),U({type:"add",source:D}),q&&K({type:"add",surface:"emptyState",rating:q,source:D}),u().Z.updateState({stage:"success"})}catch(e){e instanceof AggregateError&&e.errors.forEach((e=>{"title"===e.cause?d(e.message):"description"===e.cause?T(e.message):"name"===e.cause&&I(e.message)}))}},isDisabled:Boolean(o||S),isLoading:"pending"===_.status},{type:"plain",text:e.formatMessage(R.skip),onClick:()=>u().Z.closeModal()}]})})}const w="marketplace-review-title",j="marketplace-review-review",C="marketplace-review-name",R=(0,p().vU)({modalTitle:{id:"marketplace.submitRatingModal.details.modalTitle",defaultMessage:"Share your thoughts"},modalSubTitle:{id:"marketplace.submitRatingModal.details.modalSubTitle",defaultMessage:"Leave a review for the Notion community"},title:{id:"marketplace.submitRatingModal.details.title",defaultMessage:"Title"},titlePlaceholder:{id:"marketplace.submitRatingModal.details.titlePlaceholder",defaultMessage:"My review"},review:{id:"marketplace.submitRatingModal.details.review",defaultMessage:"Review"},reviewPlaceholder:{id:"marketplace.submitRatingModal.details.reviewPlaceholder",defaultMessage:"This template is..."},name:{id:"marketplace.submitRatingModal.details.name",defaultMessage:"Name shown on review"},namePlaceholder:{id:"marketplace.submitRatingModal.details.namePlaceholder",defaultMessage:"Your name"},submit:{id:"marketplace.submitRatingModal.details.submit",defaultMessage:"Submit"},skip:{id:"marketplace.submitRatingModal.details.skip",defaultMessage:"Skip"}});var S=()=>a(275066),T=()=>a(90912);function L(){const e=(0,p().YB)(),{acquisitionId:t,source:a}=(0,l().Kw)(u().Z),{onRatingConfirmed:i,onSubmit:s,isLoading:r,error:n}=(0,T().Y)({acquisitionId:t,source:a});return(0,M.jsx)("form",{method:"dialog",children:(0,M.jsx)(v().$,{title:(0,M.jsx)("div",{id:Z,children:e.formatMessage(B.rateThisTemplate)}),body:(0,M.jsx)(S().d,{labelledBy:Z,error:n,onRatingConfirmed:i}),actions:[{type:"primary",text:e.formatMessage(B.submit),onClick:async()=>{try{await s(),u().Z.updateState({stage:"details"})}catch(e){}},isDisabled:Boolean(n),isLoading:r},{type:"plain",text:e.formatMessage(B.cancel),onClick:()=>u().Z.closeModal()}]})})}const Z="rate-this-template",B=(0,p().vU)({rateThisTemplate:{id:"marketplace.submitRatingModal.rateThisTemplate",defaultMessage:"Rate this template"},submit:{id:"marketplace.submitRatingModal.submit",defaultMessage:"Submit"},cancel:{id:"marketplace.submitRatingModal.cancel",defaultMessage:"Cancel"}});const I=(0,a(827282).CZ)("bubbleElipses",{default:{loader:()=>a.e(95582).then(a.bind(a,595582))},small:{loader:()=>a.e(29028).then(a.bind(a,129028))},mini:{loader:()=>a.e(79197).then(a.bind(a,479197))},large:{loader:()=>a.e(53236).then(a.bind(a,153236))}});var N=()=>a(603692);function P(){const e=(0,p().YB)();return(0,M.jsx)(v().$,{icon:(0,M.jsx)(N().y,{iconGroup:I,colorName:"secondary",variantName:"large",overrideSize:()=>36}),title:e.formatMessage(q.title),subTitle:e.formatMessage(q.subTitle),actions:[{type:"outline",text:e.formatMessage(q.done),onClick:()=>u().Z.closeModal()}],width:300})}const q=(0,p().vU)({title:{id:"marketplace.submitRatingModal.success.title",defaultMessage:"Reviewing your submission"},subTitle:{id:"marketplace.submitRatingModal.success.subTitle",defaultMessage:"Your review will be visible after itâ€™s been approved by our team"},done:{id:"marketplace.submitRatingModal.success.gotIt",defaultMessage:"Got it"}});function D(){const e=(0,s().O7)(),{isOpen:t,stage:a,source:m}=(0,l().Kw)(u().Z),g=(0,r().D9)(a);(0,i.useEffect)((()=>{if(t){const t={stage:a,previous_stage:g!==a?g:void 0,source:m};(0,d().j)({environment:e,event:{eventName:"view_marketplace_review_modal",eventProperties:t}}),c().default.logEvent("view_marketplace_review_modal",a,t)}}),[e,t,a,g,m]);const p=(0,i.useCallback)((()=>{u().Z.closeModal()}),[]),h=(0,i.useCallback)((()=>{switch(a){case"rating":return(0,M.jsx)(L,{});case"details":return(0,M.jsx)(k,{});case"success":return(0,M.jsx)(P,{});default:(0,n().t1)(a)}}),[a]);return(0,M.jsx)(o().c,{isOpen:t,onDismiss:p,showCloseIcon:"success"!==a,render:h,animateSizeTransition:!1})}}}]);