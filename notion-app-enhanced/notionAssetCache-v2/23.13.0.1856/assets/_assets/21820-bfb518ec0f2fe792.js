"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[21820],{279830:(e,t,o)=>{o.d(t,{T:()=>g,e:()=>p});var i=()=>o(492788),n=()=>o(749826),s=()=>o(253225),r=()=>o(54512),l=()=>o(421654),a=()=>o(282662),c=()=>o(636340),d=()=>o(879952),u=()=>o(990966);function p(e){const{environment:t,store:o,transaction:l,preventTextSelection:p,onTextSelection:g}=e;n().default.checkGate({gateName:"mobile_keep_template_gallery_open"})&&s().Z.state.open&&s().Z.setState({open:!1});const m=(()=>{const e=o.getContentStores();if(1===e.length&&e[0].isEmptyTextBlock())return e[0];const i=c().j4({environment:t,type:"text",inMemoryRecordCache:o.inMemoryRecordCache,transaction:l,spaceId:o.pointer.spaceId}),n=a().R3({parentStore:o.getContentStore(),appendStore:i,transaction:l}).childStore;return r().W(t,{from:"template_picker",type:"text",creating_block_id:i.id,parent_collection_id:i.getParentCollectionIdUpToTwoLevels()}),n})();return p||i().default.afterNextFlush((()=>{d().eP({environment:t,store:m}),u().setSelectionAtStart({store:m.getBlockTitleStore()}),null==g||g()})),m}function g(e){const{environment:t,store:o,transaction:i}=e;l().is({store:o,transaction:i}),p({environment:t,store:o,transaction:i})}},881266:(e,t,o)=>{o.d(t,{Z:()=>m,g:()=>g});o(667294);var i=()=>o(219727),n=()=>o(142735),s=()=>o(846550),r=()=>o(285670),l=()=>o(467171),a=()=>o(788860),c=()=>o(668001),d=()=>o(254805),u=()=>o(729201),p=o(785893);function g(e){let{store:t,peekMode:o,forceShowIcon:l}=e;const a=(0,i().O7)(),u=(0,n().VK)((()=>t.hasCover()),[t]),g=(0,n().VK)((()=>t.hasIcon()),[t])||l,m=(0,n().VK)((()=>t.isCollectionView()),[t]),h=(0,n().VK)((()=>t.isFullWidth()),[t]),S=(0,n().VK)((()=>a.device.isMobile&&!a.device.isTablet),[a]),f=(0,n().VK)((()=>o===r().l?"20vh":(0,d().b)(a)),[a,o]),y=(0,s().yK)((()=>{const e=S?24:o===r().R?48:96,t=(()=>{switch(!0){case S:return 32;case g:return 96;case o===r().l&&!g:return 54;case!g:return 102}})(),i=(()=>{switch(!0){case S&&u&&g:return 22;case S&&u&&!g:return 54;case S&&!u&&g:return 56;case S&&!u&&!g:return 4;case!S&&u&&g:return 50;case!S&&u&&!g:return 58;case!S&&!u&&g:return 92;case!S&&!u&&!g:return 20}})();return{collectionCoverPhoto:{width:"100%",height:"20vh"},collectionTitleContainer:{display:"flex",alignItems:"center",paddingLeft:e,paddingRight:e,width:"100%",paddingTop:(()=>{switch(!0){case S&&u:return 50;case S&&!u:return 78;case!S&&u:return 48;case!S&&!u:return 36}})()},collectionIcon:{flexGrow:0,flexShrink:0,width:36,height:36,borderRadius:6,marginRight:10,marginLeft:3},collectionTitle:{height:S?24:30,width:600,marginTop:S?6:3,borderRadius:15},pageCoverPhoto:{width:"100%",height:f},pageCoverPadding:{width:"100%",height:t},pageIconContainer:{maxWidth:"100%",boxSizing:"border-box",paddingLeft:e,paddingRight:e,width:h?"100%":900,height:36},pageIcon:{position:"relative",top:u?-42:0,width:78,height:78,marginLeft:2,borderRadius:16},pageTitleContainer:{display:"flex",boxSizing:"border-box",paddingLeft:e,paddingRight:e,width:h?"100%":900,maxWidth:"100%",paddingTop:i},pageTitle:{marginTop:S?3:0,height:S?24:30,width:600,borderRadius:15}}}),[h,u,g,f,S,o]);return m||o===r().R?(0,p.jsxs)(p.Fragment,{children:[u&&(0,p.jsx)(c().Z,{style:y.collectionCoverPhoto}),(0,p.jsxs)("div",{style:y.collectionTitleContainer,children:[g&&(0,p.jsx)(c().Z,{emphasized:!0,style:y.collectionIcon}),(0,p.jsx)(c().Z,{style:y.collectionTitle})]})]}):(0,p.jsxs)(p.Fragment,{children:[u?(0,p.jsx)(c().Z,{style:y.pageCoverPhoto}):(0,p.jsx)("div",{style:y.pageCoverPadding}),g&&(0,p.jsx)("div",{style:y.pageIconContainer,children:(0,p.jsx)(c().Z,{emphasized:!0,style:y.pageIcon})}),(0,p.jsx)("div",{style:y.pageTitleContainer,children:(0,p.jsx)(c().Z,{style:y.pageTitle})})]})}function m(e){let{isVisible:t,peekMode:o,store:c}=e;const{WindowSizeStore:d}=(0,i().O7)(),m=(0,i().Fy)(),h=(0,a().YB)(),S=m.isPhone,f=m.isMobileNative,y=l().R6(m.isElectronMac),v=(0,n().VK)((()=>{const e=o===r().l||o===r().R||S?y:0;return{top:d.getSafePaddingTopCSS(e),bottom:d.getSafePaddingBottomCSS(0),left:d.getSafePaddingLeftCSS(0),right:d.getSafePaddingRightCSS(0)}}),[d,o,S,y]),x=(0,s().yK)((()=>({root:{position:"absolute",...v,display:"flex",flexDirection:"column",alignItems:"center",pointerEvents:"none"}})),[v]);return(0,u().Z)(t,f?0:10,0)?(0,p.jsx)("div",{role:"progressbar","aria-valuetext":h.formatMessage({id:"frameLoadingState.loading",defaultMessage:"Loading..."}),style:x.root,children:(0,p.jsx)(g,{store:c,peekMode:o})},"shimmer"):null}},203119:(e,t,o)=>{o.d(t,{Z:()=>c});o(667294);var i=()=>o(142735),n=()=>o(874018),s=()=>o(58836),r=()=>o(311562),l=()=>o(954452),a=o(785893);function c(e){const{pageBlockStore:t,isVisible:o,context:c}=e,d=(0,i().VK)((()=>t.isFullWidth()||c===r().S.CollectionPageView),[c,t]);return(0,a.jsx)(s().p,{allowSelectionWithin:!0,style:{width:d&&o?l().QB:0},children:(0,a.jsx)(n().HV,{...e})})}},138196:(e,t,o)=>{o.d(t,{Z:()=>r});o(267602),o(653476);var i=()=>o(670655),n=()=>o(191586),s=()=>o(852465);function r(e){var t;const{store:o,pageViewBlockStore:r,environment:l}=e,a=s().vV(o,{recursivelyLoadAllDiscussions:!1}).sort(((e,t)=>t.getReactions().length-e.getReactions().length)),c=a.length>0,d=0===a.length,u=0===a.filter((e=>e.getComments().length>0)).length,p="PageDetailsStore"in l&&l.PageDetailsStore.getToggleState({environment:l,type:"discussion",id:o.id}),g={type:"hidden"},m=o.getAssociatedCollectionStore()??o,h="section_hide"===(0,i().vC)(null===(t=m.getFormat())||void 0===t?void 0:t.page_section_visibility);if(!(null==r?void 0:r.state.forceDiscussionOpen)&&(!o.isInsideCollection()||!d)&&(d||c&&(!1===p||void 0===p&&h)))return g;if(h)return g;const S=o.pathIsDead(),f=l.currentUser.isLoggedIn();if(d&&S)return g;const y=f&&o.canComment()&&u&&!(0,n().a_)(o)&&(!(0,n().Wt)(o)||(0,n().bm)(o));return!y&&d?g:{type:"visible",showDiscussionInput:y,unresolvedDiscussionStores:a}}},281510:(e,t,o)=>{o.d(t,{Z:()=>oe});var i=o(667294),n=()=>o(219727),s=()=>o(142735),r=()=>o(955620),l=()=>o(788860),a=()=>o(269299);const c=1e3;function d(e){if(e){const t=(0,r().QaF)(e.getValue());return Boolean(t)}return!1}function u(e){if(e){const t=e.getSettings();if(t&&t.hidden_collection_descriptions)return t.hidden_collection_descriptions}return[]}function p(e){const{environment:t,pageId:o,isExpanded:i,store:n,userSettingsStore:s,descriptionStore:r}=e,l=n.state.isExpanded;n.setState({isExpanded:i});d(r)&&s&&l!==i&&a().createAndCommit({userAction:"pageDescriptionActions.setExpanded",environment:t,canUndo:!0,perform:e=>{if(i){const t={pointer:{table:"user_settings",id:s.id},path:["settings","hidden_collection_descriptions"],command:"listRemove",args:{id:o}};a().applyOperation({store:s,transaction:e,operation:t})}else{const t={pointer:{table:"user_settings",id:s.id},path:["settings","hidden_collection_descriptions"],command:"listAfter",args:{id:o}};a().applyOperation({store:s,transaction:e,operation:t});let i=u(s);for(;i.length>c;){const t=i[0],o={pointer:{table:"user_settings",id:s.id},path:["settings","hidden_collection_descriptions"],command:"listRemove",args:{id:t}};a().applyOperation({store:s,transaction:e,operation:o}),i=u(s)}}}})}var g=()=>o(990966),m=()=>o(254805),h=()=>o(718959),S=()=>o(191586),f=()=>o(423519),y=()=>o(309797),v=()=>o(657320),x=()=>o(349220),b=()=>o(513670),k=()=>o(707513),w=()=>o(970105),C=()=>o(943620),V=()=>o(384241),M=()=>o(654133),P=()=>o(345837),_=()=>o(12512),j=()=>o(191003),I=()=>o(122479),B=()=>o(339523),T=()=>o(821149),K=()=>o(279386),L=()=>o(127519),E=o(785893);function Z(e){let{descriptionStore:t,disabled:o,toggleStore:i,pageId:n,userSettingsStore:s,collectionStore:r,locked:l,canEdit:a}=e;return(0,E.jsx)("div",{style:{maxWidth:"100%",borderRadius:4,overflow:"hidden",marginBottom:12},children:(0,E.jsx)(G,{descriptionStore:t,disabled:o,toggleStore:i,pageId:n,userSettingsStore:s,collectionStore:r,locked:l,canEdit:a})})}const D=i.memo(Z);function H(e){return e.isExpanded()}function A(e){let{collectionStore:t}=e;const o=(0,s().VK)((()=>t&&t.getIcon()),[t]);return(0,E.jsxs)("div",{style:{display:"flex",alignItems:"start"},children:[(0,E.jsx)("div",{style:{paddingTop:4,paddingRight:6},children:(0,T().b)({width:12})}),(0,E.jsx)("div",{children:(0,E.jsx)("div",{children:(0,E.jsx)(l()._H,{defaultMessage:"Please unlock {pageTitleWithIcon} to edit the description.",id:"pageDescription.lockedTooltip.message",values:{pageTitleWithIcon:(0,E.jsxs)("span",{style:{whiteSpace:"nowrap",fontWeight:k().Ue.bold},children:[o&&(0,E.jsx)(C().Z,{disabled:!0,icon:o,isEmptyPage:!1,size:12,style:{marginRight:4,display:"inline-block"}}),t&&(0,E.jsx)(V().Z,{store:t,style:{display:"inline"}})]})}})})})]})}function F(e){return!0}function R(e){return!0}function O(e,t,o,i,n,s){H(t)||e.preventDefault(),function(e,t,o,i,n){p({environment:i,pageId:t,isExpanded:!H(e),store:e,userSettingsStore:n,descriptionStore:o})}(t,o,i,n,s)}function W(e,t,o,i,n,s){if(!function(e,t,o){const i=o&&o.publicEditModeStore.state,n=(0,x().TO)((0,B().sQ)(e));return!t&&!(0,I().Ix)(i)&&"suggest"!==K().MT.getMode(n)&&e.canEdit()}(o,i,s))return;if(e.preventDefault(),n&&n.isComposing())return;const r=L().default.state;if("editing"===r.mode){const e=(0,j().QY)(r.multiSelection);if(!e)return;const i=null!=s&&s.pageStore?K().MT.getMode(s.pageStore):"default";a().createAndCommit({userAction:"PageDescription.handleEnter",environment:t,canUndo:!0,perform:n=>{w().hJ({environment:t,editorMode:i,store:o,string:"\n",selection:e.selection,disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:n})}})}}const z={fontSize:14,paddingLeft:6,paddingBottom:4,paddingTop:3,width:780};function N(e){let{descriptionStore:t,disabled:o,toggleStore:r,pageId:a,userSettingsStore:c}=e;const d=(0,n().O7)(),u=(0,l().YB)(),{device:p}=d,g=(0,v().l)(),m=(0,i.useRef)(null),h=(0,i.useCallback)((e=>W(e,d,t,o,m.current,g)),[d,t,o,g,m]),S=(0,s().VK)((()=>H(r)),[r]);return t?(0,E.jsx)(P().Z,{ref:m,store:t,style:z,disabled:o,placeholder:u.formatMessage({defaultMessage:"Add a descriptionâ€¦",id:"pageDescription.emptyPlaceholder"}),disableSlashCommands:!0,disableEmbedMenu:!0,disableMentions:!0,onTab:F,onUntab:R,onEnter:h,onClick:S?b().ZT:e=>O(e,r,a,t,d,c),disableStyleAnnotations:p.isMobileBrowser,disableInsertedDeletedAnnotations:p.isMobileBrowser,disableHorizontalEdgeScroll:!0,pasteBehavior:"inline",inPageFind:_().B3.none}):null}function G(e){let{descriptionStore:t,disabled:o,toggleStore:i,pageId:s,userSettingsStore:r,collectionStore:l,locked:a,canEdit:c}=e;return(0,n().O7)().device.isMobile?(0,E.jsx)(N,{descriptionStore:t,disabled:o,toggleStore:i,pageId:s,userSettingsStore:r}):(0,E.jsx)(M().Z,{renderTooltip:()=>(0,E.jsx)(A,{collectionStore:l}),disableTooltip:!a||!c,render:e=>(0,E.jsx)("div",{children:(0,E.jsx)("div",{style:{display:"flex",cursor:"text"},...e,children:(0,E.jsx)(N,{descriptionStore:t,disabled:o,toggleStore:i,pageId:s,userSettingsStore:r})})})})}var J=()=>o(589525),U=()=>o(876822);class q extends(()=>o(263184))().default{getInitialState(){return{isExpanded:!0}}isExpanded(){return Boolean(this.state.isExpanded)}}const Y=q;var $=()=>o(311562),X=()=>o(963310),Q=()=>o(92175);function ee(e){const{canEdit:t,context:a,controlHoverStyle:c,disabled:m,handleHeaderMouseEnter:v,handleHeaderMouseLeave:x,headerFocusStore:b,isEditable:k,paddingLeft:w,paddingRight:C,pageCover:V,store:M,topControls:P,onCollectionViewBlockMount:_}=e,j=(0,n().O7)(),I=(0,n().Fy)(),[B,T]=(0,i.useState)(!!I.isAndroid);(0,i.useEffect)((()=>{(async()=>{if((0,o(148126).Sr)(j)){const e=j.RouterStore.getState();if((0,o(572680).FK)(e.route)){const e=(0,o(772084).gR)(M),t=null==e?void 0:e.getSiteStore();await(null==t?void 0:t.load());const i=null==t?void 0:t.getSettings(),n=null==i?void 0:i.embedSettings;return void T(Boolean(!(null!=n&&n.hideTitle)))}}T(!0)})()}),[j,M]);const L=(0,i.useMemo)((()=>new Y),[]),Z=(0,s().VK)((()=>M.getCollectionViewSourceDescriptionStore()),[M]),H=(0,s().VK)((()=>M.getCollectionViewSourceCollectionStore()),[M]),A=(0,s().VK)((()=>d(Z)),[Z]),F=(0,s().VK)((()=>M.getTitleStore()),[M]),R=(0,s().VK)((()=>K().MT.getMode(M)),[M]),O=i.useRef(!1);(0,i.useEffect)((()=>{if(!O.current){O.current=!0;const{currentUserSettingsStore:e}=U().default.state;!function(e){const{pageId:t,store:o,userSettingsStore:i,descriptionHasText:n}=e;let s=n;u(i).includes(t)&&(s=!1),o.setState({isExpanded:s})}({pageId:M.id,store:L,userSettingsStore:e,descriptionHasText:A})}}),[A,M.id,L]);const W=(0,s().VK)((()=>r().QaF(null==F?void 0:F.getValue())),[F]),z=(0,s().VK)((()=>!!M.getCollectionViewSourceCollectionStore()||!!F&&(!!W||!!(0,o(550054).J5)(F))),[M,F,W]),N=(0,s().VK)((()=>h().qG(M.id)||h().X(M.id)),[M]),G=(0,s().VK)((()=>(0,S().kC)(M,j)),[M,j]),q=(0,s().VK)((()=>(0,S().du)(M,a,j)),[M,a,j]),$=(0,y().D9)(M),X=(0,y().GB)(M),ee=$||X,oe=()=>{const{currentUserSettingsStore:e}=U().default.state,t=M.id;p({environment:j,pageId:t,isExpanded:!1,store:L,userSettingsStore:e,descriptionStore:Z})},ie=()=>{const{currentUserSettingsStore:e}=U().default.state,t=M.id;p({environment:j,pageId:t,isExpanded:!0,store:L,userSettingsStore:e,descriptionStore:Z})},ne=(0,s().VK)((()=>{const e=L.isExpanded();return(d(Z)||k)&&e}),[Z,k,L]),se=(0,s().VK)((()=>{if(!ne)return{type:"hidden"};if(!Z)return{type:"hidden"};if(!L.isExpanded())return{type:"hidden"};const{currentUserSettingsStore:e}=U().default.state;return{type:"visible",descriptionStore:Z,currentUserSettingsStore:e,collectionStore:H}}),[Z,H,L,ne]),re=(0,s().VK)((()=>M.isNonEditableState()),[M]),le=e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,o(474788).E)(t)&&b.setState(!0)},ae=()=>{const{currentUserSettingsStore:e}=U().default.state,t=Z;p({environment:j,pageId:M.id,store:L,userSettingsStore:e,isExpanded:!0,descriptionStore:t}),o(492788).default.afterNextFlush((()=>{t&&!I.isMobileBrowser&&g().setSelectionAtEnd({store:t})}))},ce=()=>{b.setState(!1)},de=()=>{F&&(o(879952).ZH({environment:j}),g().setSelectionAtEnd({store:F}))},ue=()=>{if(k&&!H&&!W)return(0,E.jsx)(Q().Z,{style:c,isLightGray:!0,onClick:de,icon:o(586365).c,children:I.isSmallPhone?(0,E.jsx)(l()._H,{id:"pageViewBlock.add.pageTitleMobile",defaultMessage:"Title"}):(0,E.jsx)(l()._H,{id:"pageViewBlock.add.pageTitle",defaultMessage:"Add title"})},"add-title")},pe=()=>{if(H)return ne?(0,E.jsx)(Q().Z,{isLightGray:!0,style:c,onClick:oe,icon:f().z,children:(0,E.jsx)(l()._H,{defaultMessage:"Hide description",id:"pageViewBlock.hideDescription.button"})}):k&&!A&&"suggest"!==R?(0,E.jsx)(Q().Z,{isLightGray:!0,style:c,onClick:ae,icon:f().z,children:I.isSmallPhone?(0,E.jsx)(l()._H,{defaultMessage:"Description",id:"pageViewBlock.addDescription.mobileButton"}):(0,E.jsx)(l()._H,{defaultMessage:"Add description",id:"pageViewBlock.addDescription.button"})}):A?(0,E.jsx)(Q().Z,{isLightGray:!0,style:c,onClick:ie,icon:f().z,children:I.isSmallPhone?(0,E.jsx)(l()._H,{defaultMessage:"Description",id:"pageViewBlock.showDescription.mobileButton"}):(0,E.jsx)(l()._H,{defaultMessage:"Show description",id:"pageViewBlock.showDescription.button"})}):void 0},ge=()=>(0,E.jsxs)(o(441672).Z,{store:M,context:e.context,onFocus:le,onBlur:ce,children:[P,ue(),pe()]}),me=(0,s().VK)((()=>(0,J().$3)(j)+(0,J().ll)(j,!1)-o(505121).Z.state-w),[j,w]),he=(0,s().VK)((()=>{const{WindowSizeStore:e}=j;return{paddingLeft:e.getSafePaddingLeftCSS(w),paddingRight:e.getSafePaddingRightCSS(C)}}),[j,w,C]);return(0,E.jsxs)(E.Fragment,{children:[B&&function(){const i=N?null:(0,E.jsxs)("div",{style:{display:"flex",alignItems:"flex-start"},children:[(0,E.jsx)(o(32313).Z,{...e}),z&&(0,E.jsx)(o(21535).V,{...e})]});return(0,E.jsxs)("div",{style:G,onMouseEnter:v,onMouseLeave:x,children:[V,(0,E.jsxs)(o(628370).Z,{animate:{width:q},style:{maxWidth:"100%",paddingLeft:he.paddingLeft},children:[ge(),(0,E.jsxs)("div",{style:{paddingRight:he.paddingRight,marginBottom:8,width:me},children:[i,ee&&(0,E.jsx)(o(986286).yY,{store:M}),"visible"===se.type&&(0,E.jsx)(D,{disabled:!k,canEdit:t,locked:re,pageId:M.id,toggleStore:L,descriptionStore:se.descriptionStore,collectionStore:se.collectionStore,userSettingsStore:se.currentUserSettingsStore}),(0,E.jsx)(o(133049).V,{store:M,context:a,layoutModule:void 0,disabled:m||"suggest"===R,wrapper:e=>(0,E.jsx)(o(857719).Pb,{className:"layout-content-with-divider",children:e})},M.id)]})]})]})}(),(0,E.jsx)(te,{store:M,paddingLeft:w,paddingRight:C,context:a,disabled:m,onMount:_})]})}function te(e){let{store:t,paddingLeft:o,paddingRight:i,context:r,disabled:l,onMount:a}=e;const c=(0,n().O7)(),d=(0,s().VK)((()=>(0,m().nZ)(t,c)),[t,c]);return(0,E.jsx)(X().DZ,{overridePaddingLeft:o,overridePaddingRight:i,store:t,isFullScreen:!0,viewId:d,disabled:l,headerActionsBehavior:r===$().S.InAppTemplatePreview?"hidden":"default",onMount:a})}const oe=i.memo(ee,o(632314).Z)},441672:(e,t,o)=>{o.d(t,{Z:()=>d});o(667294);var i=()=>o(146947),n=()=>o(219727),s=()=>o(142735),r=()=>o(846550),l=()=>o(707513),a=()=>o(191586),c=o(785893);function d(e){const{store:t,context:o,onFocus:d,onBlur:u,children:p}=e,g=(0,n().O7)(),m=(0,s().VK)((()=>t.hasIcon()),[t]),h=(0,s().VK)((()=>t.hasCover()),[t]),S=(0,s().VK)((()=>t.isCollectionView()),[t]),f=(0,s().VK)((()=>(0,a().di)(g)),[g]),y=(0,s().VK)((()=>(0,a().yp)(t)),[t]),v=(0,r().yK)((e=>{const{device:t}=g,{isMobile:n}=t,s=(0,a().uU)(o,g);let r,c,d;return n?h?(d="block",r=s,c=4):(d="flex",r=s,c=f):S||y?(d="flex",h?(r=16,c=4):(r=4,c=4)):(d="flex",m?(r=8,c=4):h?(r=16,c=4):(r=s,c=f)),{container:{display:d,justifyContent:"flex-start",flexWrap:"wrap",paddingTop:r,paddingBottom:c,marginLeft:-1,color:e.lightTextColor,fontFamily:l().F5(i().locale).sans,pointerEvents:"auto"}}}),[o,g,h,m,S,y,f]);return(0,c.jsx)("div",{onFocus:d,onBlur:u,style:v.container,className:"notion-page-controls",children:p})}},857815:(e,t,o)=>{o.d(t,{Z:()=>p});var i=o(667294),n=()=>o(219727),s=()=>o(788860),r=()=>o(441530),l=()=>o(269299),a=()=>o(521412),c=()=>o(498403),d=()=>o(92175),u=o(785893);function p(e){const{store:t,style:o,label:p}=e,g=(0,n().O7)(),[m,h]=(0,i.useState)(!1),S=(0,n().Fy)(),f=(0,i.useCallback)((async()=>{const e=t.getCoverStore();if(!e)return;if(e.getValue())return;h(!0);const o=(await a().X.load()).default;l().createAndCommit({userAction:"PageViewBlock.handleAddRandomCoverClick",environment:g,canUndo:!0,perform:i=>{r().tk({transaction:i,store:t,coverStore:e,pageCovers:o})}}),h(!1)}),[g,t]);return!0===m?(0,u.jsx)(d().Z,{style:o,isLightGray:!0,disabled:!0,icon:c().P,children:S.isSmallPhone?(0,u.jsx)(s()._H,{id:"pageAddCoverButton.add.pageCoverMobileLoading",defaultMessage:"Loading"}):(0,u.jsx)(s()._H,{id:"pageAddCoverButton.add.pageCoverLoading",defaultMessage:"Loading cover"})},"add-cover-loading"):(0,u.jsx)(d().Z,{style:o,isLightGray:!0,onClick:f,icon:c().P,children:p},"add-cover")}},628621:(e,t,o)=>{o.d(t,{Z:()=>d});var i=o(667294),n=()=>o(219727),s=()=>o(421654),r=()=>o(269299),l=()=>o(112213),a=()=>o(92175),c=o(785893);function d(e){const{store:t,afterOnClick:o,style:d,label:u}=e,p=(0,n().O7)(),g=(0,i.useCallback)((()=>{r().createAndCommit({userAction:"PageAddIconButton.handleAddRandomIconClick",environment:p,canUndo:!0,perform:e=>{s().is({store:t,transaction:e})}}),o()}),[p,o,t]);return(0,c.jsx)(a().Z,{style:d,isLightGray:!0,onClick:g,icon:l().o,children:u},"add-icon")}},125756:(e,t,o)=>{o.r(t),o.d(t,{PulsingWrapper:()=>c});var i=o(667294),n=()=>o(846550),s=()=>o(523733),r=o(785893);function l(e){const{children:t,withBackground:o,onReturnPressed:l,shape:a,framerMotion:c,forwardedRef:d}=e,u="square"!==a&&void 0!==e.size?e.size:22,p="square"===a?e.width||"auto":u,g="square"===a?e.height||"auto":u,m="pill"===a,h=(0,i.useRef)(null),S="square"===a?e.borderRadius:u+2;(0,i.useEffect)((()=>{l&&h.current&&h.current.focus()}),[l]);const[f,y]=(0,i.useState)(!0),v=(0,n().Fg)(),x=v.accentColors.uiBlue[400],b=v.accentColors.uiBlue[200],k="rgba(35, 131, 226, 0)",w={animate:{boxShadow:f?[`0 0 0 0px ${x}, 0 0 0 0px ${b}`,`0 0 0 2px ${x}, 0 0 4px 4px ${b}`,`0 0 0 5px ${k}, 0 0 4px 8px ${k}`]:void 0,transition:{duration:1.8,repeatDelay:.4,repeat:1/0,ease:"easeInOut"}}},C=(0,i.useCallback)((e=>{"Enter"===e.key&&l&&l()}),[l]),V=(0,n().yK)((e=>({pulseStyle:{borderRadius:S,display:"flex",justifyContent:"center",alignItems:"center",width:m?"auto":p,height:m?u+4:g,padding:"square"===a?void 0:2,backgroundColor:o?e.accentColors.uiBlue[300]:void 0}})),[S,m,p,u,g,a,o]);if(!c)return(0,r.jsx)(i.Fragment,{children:t});const{motion:M}=c;return(0,r.jsx)(M.div,{variants:w,animate:f?"animate":void 0,style:V.pulseStyle,ref:(0,s().lq)(h,d),onBlur:()=>{y(!1)},tabIndex:l?0:void 0,onKeyDown:l?C:void 0,children:t})}function a(e,t){const{onDependencyLoaded:n,...s}=e,{value:a,status:c}=(0,o(677559).XJ)(o(442531).io);return i.useEffect((()=>{"resolved"===c&&(null==n||n())}),[c,n]),a?(0,r.jsx)(l,{...s,framerMotion:a,forwardedRef:t}):(0,r.jsx)(i.Fragment,{children:e.children})}const c=i.forwardRef(a);c.displayName="PulsingWrapper"},386790:(e,t,o)=>{o.d(t,{Z:()=>g});o(267602),o(653476),o(470928),o(241792);var i=o(667294),n=()=>o(219727),s=()=>o(142735),r=()=>o(513670),l=()=>o(421654),a=()=>o(269299),c=()=>o(494630),d=()=>o(119891),u=o(785893);function p(e){const{store:t,collectionStore:i,disabled:c,locked:p,propertyIds:g,blockPropertyValueOverlayStore:h,format:S,type:f}=e,y=(0,n().O7)(),v=(0,o(125659).DK)(),x=(0,s().VK)((()=>null==v?void 0:v.permissionScopesStore.state),[v]);return v?"minimal"===f?(0,u.jsx)(u.Fragment,{children:g.map(((e,o)=>(0,u.jsx)(m,{format:S,locked:p,collectionStore:i,store:t,disabled:c,blockPropertyValueOverlayStore:h,propertyId:e,visibility:f,isLast:o===g.length-1},e)))}):c||p||null==x||!x.canConfigureCollection?(0,u.jsx)("div",{style:d().yA,children:g.map(((e,o)=>(0,u.jsx)(m,{format:S,locked:p,collectionStore:i,store:t,disabled:c,blockPropertyValueOverlayStore:h,propertyId:e,visibility:f,isLast:o===g.length-1},e)))}):(0,u.jsx)(d().ZP,{direction:"vertical",keys:g,renderKey:(e,o)=>(0,u.jsx)(m,{format:S,locked:p,collectionStore:i,store:t,disabled:c,blockPropertyValueOverlayStore:h,propertyId:e,visibility:f,isLast:o===g.length-1},e),onDrop:e=>function(e,t,o,i){const n=o.collection_page_sections||[],s=r().oA(e.map((e=>n.find((t=>t.section===e))))),c=n.filter((t=>!e.includes(t.section))),d=[...s,...c];a().createAndCommit({userAction:"RelationPropertyPageSections.handleReorder",environment:i,canUndo:!0,perform:e=>{l().FH({stores:[t],update:{collection_page_sections:d},transaction:e})}})}(e,i,S,y)}):null}const g=i.memo(p,o(632314).Z),m=i.memo((function(e){let t,{propertyId:i,format:r,locked:l,collectionStore:a,store:d,disabled:p,blockPropertyValueOverlayStore:g,visibility:m,isLast:h}=e;if(m)t=m;else{const e=r.collection_page_sections??[];t=e.filter((e=>e.section===i)).map((e=>e.visibility))[0]}const S=(0,n().Fy)(),[f,y]=(0,o(407544).e)(),v=(0,o(291848).w)(),x="inline"===t,b=!h&&"minimal"!==t,k=(0,s().VK)((()=>d.canEdit()),[d]),w=(0,o(846550).yK)((()=>{const e={position:"absolute",visibility:y?"visible":"hidden",left:y?y+4:void 0,top:0};return{discussionIndicator:S.isMobile?{flexShrink:0}:x?e:{},wrapperDiv:{position:"relative",width:"minimal"!==t?"100%":void 0,...b?{marginBottom:c().Kq+c().Yq+(k?-4:0)}:{}},selectable:x?{}:{display:"flex",alignItems:"center"}}}),[y,S.isMobile,b,x,t,k]),C=(0,u.jsx)(o(874018).zl,{store:d,propertyId:i,style:w.discussionIndicator});return(0,u.jsx)("div",{className:"minimal"!==t?"layout-content":void 0,style:w.wrapperDiv,ref:f,children:(0,u.jsxs)(o(307369).Z,{store:d,analyticsName:"page_property",style:w.selectable,children:[(0,u.jsx)(o(768826).m,{store:d,property:i,disabled:p,locked:l,format:o(356321).C.PropertyModule,tableWrap:!1,blockPropertyValueOverlayStore:g,collectionStore:a,propertyVisibility:t},i),v?null:C]})})}))},160740:(e,t,o)=>{o.d(t,{Z:()=>b});o(667294);var i=()=>o(219727),n=()=>o(142735),s=()=>o(846550),r=()=>o(109477),l=()=>o(788860),a=()=>o(568017),c=()=>o(139224),d=()=>o(887274),u=()=>o(594546),p=()=>o(417746),g=()=>o(148976),m=()=>o(338855),h=()=>o(176691),S=()=>o(315136),f=()=>o(735501),y=()=>o(308939),v=()=>o(729775),x=o(785893);const b=function(e){let{collectionStore:t,collectionContextStore:o}=e;return(0,n().VK)((()=>t.isSyncedCollection()),[t])?(0,x.jsx)(V,{collectionStore:t,collectionContextStore:o}):null};function k(e){return{color:e.mediumTextColor,fontSize:14,lineHeight:1.2}}function w(e){let{collectionStore:t,collectionContextStore:o}=e;const r=(0,s().Fg)(),d=(0,i().O7)(),u=(0,n().VK)((()=>t.getFormatStore().getKeyStore("sync_state").getKeyStore("syncing").getValue()),[t]),p=(0,n().VK)((()=>t.getFormatStore().getKeyStore("sync_state").getKeyStore("last_synced_at").getValue()),[t]),g=(0,n().VK)((()=>null==o?void 0:o.numberChildrenUnfurledStore.state),[o]),m=(0,n().VK)((()=>null==o?void 0:o.numberChildrenReceivedStore.state),[o]),y=g&&m&&g/m<1&&!d.device.isMobile,b=u&&d.device.isMobile;let w;return p&&(w=(0,x.jsx)(l()._H,{defaultMessage:"Synced {lastSyncedAt}",id:"synced.lastSyncedAt.label",values:{lastSyncedAt:(0,h().IS)(p,{useLowercase:!0})}})),"row_limit_exceeded"===u?(0,x.jsx)(v().Z,{style:{display:"inline-flex",...k(r)},onClick:()=>function(e){e&&(c().r$({collectionContextStore:e,collectionSettingsStore:e.settingsStore}),c().H4({collectionSettingsStore:e.settingsStore,item:{type:"source"}}))}(o),children:(0,x.jsxs)("span",{style:{marginLeft:5,marginRight:5,display:"inline-flex",...k(r)},children:[(0,f().t)({fill:(0,a().fi)("orange",r).fill,marginLeft:4,marginRight:4,width:12,alignSelf:"center"}),(0,x.jsx)(l()._H,{defaultMessage:"Partial Sync",id:"synced.partial_sync.label"})]})}):y||b?(0,x.jsxs)("span",{style:{marginLeft:5,marginRight:5,display:"inline-flex",...k(r)},children:[(0,x.jsx)(l()._H,{defaultMessage:"Syncing",id:"synced.syncing.label"}),(0,S().b)({marginLeft:4,marginRight:4,width:12,alignSelf:"center"},"sync-spinner")]}):(0,x.jsx)("span",{style:{marginLeft:5,marginRight:5,display:"inline-flex",...k(r)},children:w})}function C(){const e=(0,i().O7)(),t=(0,s().yK)((e=>({span:{color:e.mediumTextColor},linkBox:{fontSize:"14px",lineHeight:1.2,color:e.blueColor,marginLeft:"5px",marginRight:"5px"}})),[]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("span",{style:t.span,children:"â€¢"}),(0,x.jsx)(v().Z,{inline:!0,onClick:async()=>{await d().jW({environment:e,from:"collection_header"});const t=y().ZP.createNewFlowId();(0,u().j)({environment:e,event:{eventName:"external_sync_entry_point",eventProperties:{integration:"jira",from:"database_sync",flowId:t}}})},style:t.linkBox,hoveredStyle:{background:"none",textDecoration:"underline"},children:(0,x.jsx)(l()._H,{defaultMessage:"Improve your Jira sync",id:"synced.improve_jira_sync.label"})})]})}function V(e){let{collectionStore:t,collectionContextStore:o}=e;const i=(0,s().Fg)(),l=(0,n().VK)((()=>t.getFormatStore().getKeyStore("original_url").getValue()),[t]),a=(0,n().VK)((()=>t.getSpaceId()),[t]),c=(0,n().VK)((()=>Boolean(t.getFormatStore().getKeyStore("sync_state").getValue())),[t]),d=(0,n().VK)((()=>l&&(0,p().pI)(l,a)),[a,l]),u=(0,n().VK)((()=>(0,m().wY)(l,a)),[a,l]),h=(0,n().VK)((()=>{if(!(0,g().K6)())return!1;const e=t.getFormat().uri;return!!e&&(t.getFormat().external_collection_type!==r().Vj.Jira&&(0,m().Ng)(e))}),[t]);return(0,x.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[d&&(0,x.jsx)(v().Z,{href:d,style:{display:"inline-flex"},hoveredStyle:{background:"none",textDecoration:"underline"},innerStyle:{flexShrink:1,width:"none",padding:"2px 0px",marginRight:5,borderRadius:4,display:"flex",alignItems:"center",alignSelf:"center",...k(i)},external:!0,children:u}),c?(0,x.jsx)("span",{style:{color:i.mediumTextColor},children:"â€¢"}):null,c?(0,x.jsx)(w,{collectionStore:t,collectionContextStore:o}):null,h&&(0,x.jsx)(C,{})]})}},607526:(e,t,o)=>{o.d(t,{Z:()=>B});var i=o(667294),n=()=>o(219727),s=()=>o(142735),r=()=>o(846550),l=()=>o(506347),a=()=>o(494488),c=()=>o(788860),d=()=>o(8101),u=()=>o(295274),p=()=>o(497065),g=()=>o(279830),m=()=>o(269299),h=()=>o(887430),S=()=>o(41340),f=()=>o(982855),y=()=>o(429725),v=()=>o(949842),x=()=>o(876822),b=()=>o(804217),k=()=>o(749826),w=()=>o(890324),C=()=>o(807230),V=()=>o(154186),M=(o(241792),()=>o(668001)),P=o(785893);function _(){const e=(0,r().yK)((()=>({menu:{display:"flex",alignItems:"center",marginBottom:5},icon:{marginLeft:5,width:26,height:26,marginRight:10,borderRadius:4},menuItem:{height:14,marginTop:8,marginBottom:8,width:"25%",borderRadius:8}})),[]);return(0,P.jsx)(P.Fragment,{children:[...Array(6)].map(((t,o)=>(0,P.jsxs)("div",{style:e.menu,children:[(0,P.jsx)(M().Z,{style:e.icon}),(0,P.jsx)(M().Z,{style:e.menuItem})]},o)))})}const j={width:"100%"},I={width:"100%",display:"flex",flexDirection:"column",marginBottom:"14vh"};const B=function(e){let{menuListStore:t,store:r}=e;(0,o(732811).K)((()=>{t.reset()}));const l=(0,n().MO)(),a=(0,s().VK)((()=>b().default.state.online),[]),c=(0,i.useCallback)((()=>!l&&(0,P.jsx)(_,{})),[l]);return(0,P.jsx)(o(58836).p,{style:j,allowSelectionWithin:!1,children:(0,P.jsx)(o(71410).Z,{capture:!0,render:e=>(0,o(84080).Z)((i=>(0,P.jsxs)("div",{...e,...i,style:I,children:[(0,P.jsx)(L,{store:r}),a&&(0,P.jsx)(o(544903).OG,{menuListStore:t,store:r,renderLoading:c})]})))})})};function T(e){return{...a().ZD,color:e.lightTextColor,paddingTop:5,paddingBottom:24}}function K(e,t,o){const{mainEditorCurrentBlockStore:i}=x().default.state;!function(e,t,o){o?o(e):p().c4({environment:t,url:e})}(i?(0,y().ZP)({store:i,peekViewBlockId:e.id,fullyQualified:!1,pageVisitSource:l().tY.LinkInPage}):(0,y().ZP)({store:e,fullyQualified:!1,pageVisitSource:l().tY.LinkInPage}),t,o)}function L(e){let{store:t}=e;const o=(0,r().Fg)(),l=(0,n().O7)(),a=(0,n().Fy)(),p=(0,i.useContext)(S().Z),y=(0,s().VK)((()=>w().Z.getMode(l,t)),[l,t]),x=(0,i.useCallback)((e=>function(e,t,o,i){const n=o.getAssociatedCollectionStore();if(n&&(0,C().ww)(t)){const{performResult:e}=m().createAndCommit({userAction:"TemplatePicker.newPage",environment:t,canUndo:!0,perform:e=>u().nx({environment:t,collectionStore:n,transaction:e})});e&&K(e,t,i),d().dZ(t,{collection_id:n.id})}}(0,l,t,p)),[l,t,p]),M=(0,s().VK)((()=>t.isTemplate()),[t]),_=(0,s().VK)((()=>b().default.state.online),[]),I=(0,s().VK)((()=>function(e){return Boolean(e.getAssociatedCollectionStore())}(t)),[t]),B=(0,s().VK)((()=>function(e){const t=e.getAssociatedCollectionStore(),o=t?t.getTemplatePageStores():void 0;return o&&o.length>0}(t)),[t]),L=I&&!B,E=I&&B,Z=(0,s().VK)((()=>!function(e){const t=e.getAssociatedCollectionStore(),o=t&&t.getParentBlockStore();return h().eD({collectionStore:t,collectionViewBlockStore:o,checkNavigableAncestorLocked:!0})}(t)),[t]),D=(0,s().VK)((()=>(0,f().GD)(y)),[y]),H=(0,s().VK)((()=>a.isMobile&&!a.isTablet&&a.isIOS&&"on"===k().default.getEligibleGroup({experimentId:"mobile_lightweight_editor_prompt",defaultGroup:"control"})),[a.isMobile,a.isIOS,a.isTablet]);let A=null;return _?M?A=(0,P.jsx)(c()._H,{defaultMessage:"{isMobileDevice, select, true {Tap here to continue with an empty page.} other {Press Enter to continue with an empty page.}}",id:"templatePicker.isTemplate.emptyPagePrompt",values:{isMobileDevice:a.isMobile}}):a.isMobile?E?A=a.isTablet?(0,P.jsx)(c()._H,{defaultMessage:"Tap here to continue with an empty page, or pick a template",id:"templatePicker.mobileTabletEmptyPage.withTemplates.prompt"}):(0,P.jsx)(c()._H,{defaultMessage:"Tap here to continue...",id:"templatePicker.mobilePhoneEmptyPage.withTemplates.prompt"}):L?A=(0,P.jsx)(c()._H,{defaultMessage:"{isParentLocked, select, true {Tap here to continue with an empty page} other {Tap here to continue with an empty page, or <templatebutton>create a template</templatebutton>}}",id:"templatePicker.mobileCollectionEmptyPage.prompt",values:{isParentLocked:Z,templatebutton:e=>(0,P.jsx)(V().Z,{style:{display:"inline-block",textDecoration:"underline"},onClick:x,children:e})}}):H||(A=a.isTablet?(0,P.jsx)(c()._H,{defaultMessage:"Tap here to continue with an empty page, or pick a template",id:"templatePicker.mobileTabletEmptyPage.withTemplates.prompt"}):(0,P.jsx)(c()._H,{defaultMessage:"Tap here to continue...",id:"templatePicker.mobilePhoneEmptyPage.withTemplates.prompt"})):L?A=(0,P.jsx)(c()._H,{defaultMessage:"{isParentLocked, select, true {Press Enter to continue with an empty page} other {Press Enter to continue with an empty page, or <templatebutton>create a template</templatebutton>}}",id:"templatePicker.webCollectionEmptyPage.prompt",values:{isParentLocked:Z,templatebutton:e=>(0,P.jsx)(V().Z,{style:{display:"inline-block",textDecoration:"underline"},onClick:x,children:e})}}):D&&!I||(A=(0,P.jsx)(c()._H,{defaultMessage:"Press Enter to continue with an empty page, or pick a template (â†‘â†“ to select)",id:"templatePicker.webEmptyPage.withTemplates.prompt"})):A=(0,P.jsx)(c()._H,{defaultMessage:"{isMobileDevice, select, true {Tap here to continue with an empty page. Please go online to use templates.} other {Press Enter to continue with an empty page. Please go online to use templates.}}",id:"templatePicker.deviceOffline.goOnlinePrompt",values:{isMobileDevice:a.isMobile}}),A?(0,P.jsx)("div",{style:j,children:(0,P.jsx)("div",{style:T(o),onClick:e=>function(e,t,o){(0,v().ZP)({event:e,context:v().Af.EditorClick,callback:()=>{(0,C().ww)(o)&&(m().createAndCommit({userAction:"TemplatePicker.handleEmptyPageContinueClick",environment:o,canUndo:!0,perform:e=>{g().e({environment:o,store:t,transaction:e})}}),d().rN(o,{is_keyboard:!1,from:"template_picker",template_type:"empty_page"}))}})}(e,t,l),children:A})}):null}},986286:(e,t,o)=>{o.d(t,{FW:()=>a,Pe:()=>d,Re:()=>u,Rs:()=>p,YW:()=>l,ht:()=>g,lM:()=>c,rM:()=>m,vK:()=>r,yY:()=>h});var i=()=>o(677559);const n={JiraSyncInfoPopup:new(i().Ss)("JiraSyncInfoPopup",(async()=>await Promise.all([o.e(52774),o.e(57023)]).then(o.bind(o,453110)))),ImproveJiraSyncPopup:new(i().Ss)("ImproveJiraSyncPopup",(async()=>await Promise.all([o.e(52774),o.e(81263)]).then(o.bind(o,931329)))),JiraDCAuthModal:new(i().Ss)("JiraDCAuthModal",(async()=>await o.e(40205).then(o.bind(o,253458)))),ExternalImportAndSyncIndicator:new(i().Ss)("ExternalImportAndSyncIndicator",(async()=>await o.e(47433).then(o.bind(o,635604)))),JiraSyncedAllProjectsTooltip:new(i().Ss)("JiraSyncedAllProjectsTooltip",(async()=>await Promise.all([o.e(62743),o.e(75433)]).then(o.bind(o,205959)))),JiraSyncedAllIssuesTooltip:new(i().Ss)("JiraSyncedAllIssuesTooltip",(async()=>await Promise.all([o.e(62743),o.e(75433)]).then(o.bind(o,205959)))),JiraSyncedDatabaseViewsAndFiltersTooltip:new(i().Ss)("JiraSyncedDatabaseViewsAndFiltersTooltip",(async()=>await Promise.all([o.e(62743),o.e(75433)]).then(o.bind(o,205959)))),JiraSyncSourceTooltip:new(i().Ss)("JiraSyncSourceTooltip",(async()=>await Promise.all([o.e(62743),o.e(75433)]).then(o.bind(o,205959)))),JiraSyncedSettingsToSetupProjectsAndIssuesTooltip:new(i().Ss)("JiraSyncedSettingsToSetupProjectsAndIssuesTooltip",(async()=>await Promise.all([o.e(62743),o.e(75433)]).then(o.bind(o,205959))))},s={JiraSyncTeamSpaceModal:new(i().Ss)("JiraSyncTeamSpaceModal",(async()=>Promise.all([o.e(62743),o.e(94568)]).then(o.bind(o,860619))))},r=(0,i().kF)(s.JiraSyncTeamSpaceModal,(e=>e.default)),l=(0,i().kF)(n.JiraSyncedAllProjectsTooltip,(e=>e.JiraSyncedAllProjectsTooltip)),a=(0,i().kF)(n.JiraDCAuthModal,(e=>e.default)),c=(0,i().kF)(n.JiraSyncedAllIssuesTooltip,(e=>e.JiraSyncedAllIssuesTooltip)),d=(0,i().kF)(n.JiraSyncedDatabaseViewsAndFiltersTooltip,(e=>e.JiraSyncedDatabaseViewsAndFiltersTooltip)),u=(0,i().kF)(n.JiraSyncedSettingsToSetupProjectsAndIssuesTooltip,(e=>e.JiraSyncedSettingsToSetupProjectsAndIssuesTooltip)),p=(0,i().kF)(n.JiraSyncSourceTooltip,(e=>e.JiraSyncSourceTooltip)),g=(0,i().kF)(n.JiraSyncInfoPopup,(e=>e.JiraSyncInfoPopup)),m=(0,i().kF)(n.ImproveJiraSyncPopup,(e=>e.ImproveJiraSyncPopup)),h=(0,i().kF)(n.ExternalImportAndSyncIndicator,(e=>e.ExternalImportAndSyncIndicator));(0,o(827282).CZ)("jira",{default:{loader:()=>o.e(7061).then(o.bind(o,207061)),size:20},small:{loader:()=>o.e(7061).then(o.bind(o,207061)),size:16},mini:{loader:()=>o.e(7061).then(o.bind(o,207061)),size:14},large:{loader:()=>o.e(7061).then(o.bind(o,207061)),size:24}})},763986:(e,t,o)=>{o.d(t,{d:()=>i});const i=(0,o(667294).createContext)(0);i.displayName="PageViewHorizontalOffsetContext"},937905:(e,t,o)=>{o.d(t,{D:()=>s});var i=()=>o(677559);const n=new(i().Ss)("FormBlock",(async()=>await Promise.all([o.e(62743),o.e(37358),o.e(7312),o.e(80129),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(25265),o.e(61651),o.e(93455)]).then(o.bind(o,172988)))),s=(0,i().kF)(n,(e=>e.FormBlock))},448438:(e,t,o)=>{o.d(t,{G:()=>s});var i=()=>o(677559);const n=new(i().Ss)("GenerateSocialMediaPreviewImageWrapper",(async()=>Promise.all([o.e(62743),o.e(52774),o.e(44832),o.e(39938),o.e(90698),o.e(84885),o.e(37358),o.e(5242),o.e(7312),o.e(90424),o.e(81580),o.e(84325),o.e(31189),o.e(69343),o.e(46293),o.e(94556),o.e(78701),o.e(38804),o.e(17100),o.e(11846),o.e(70355),o.e(2971),o.e(80741),o.e(72586),o.e(53335),o.e(71896),o.e(46616),o.e(54940),o.e(49396),o.e(98721),o.e(98032),o.e(57229),o.e(63707),o.e(86609),o.e(91253),o.e(4642),o.e(5006),o.e(6612),o.e(61171),o.e(23179),o.e(75377),o.e(31020),o.e(2942),o.e(73682),o.e(58591),o.e(54803),o.e(1953),o.e(10216),o.e(58565),o.e(69197),o.e(42055),o.e(38739),o.e(44751),o.e(81567),o.e(63257),o.e(34291),o.e(1913),o.e(56054),o.e(95076),o.e(92341),o.e(82658),o.e(4163),o.e(69583),o.e(22759),o.e(20343),o.e(21820),o.e(46945),o.e(10553),o.e(67019),o.e(27039),o.e(25265),o.e(14581),o.e(38632),o.e(61651),o.e(88702),o.e(54307),o.e(43184),o.e(87647),o.e(75861),o.e(46257),o.e(15819),o.e(45376),o.e(74943),o.e(23721),o.e(58461),o.e(72329),o.e(19592),o.e(3331),o.e(98672),o.e(52658),o.e(44642),o.e(78),o.e(58586)]).then(o.bind(o,119963)))),s=(0,i().kF)(n,(e=>e.GenerateSocialMediaPreviewImageWrapper))},795597:(e,t,o)=>{o.d(t,{Z:()=>n});class i extends(()=>o(263184))().default{constructor(){super()}getInitialState(){}}const n=new i},328939:(e,t,o)=>{o.d(t,{G:()=>n});o(267602),o(916054);var i=()=>o(275200);function n(e){const{element:t,extraBottomSpacing:o=0}=e;let n=t.getBoundingClientRect();n=DOMRect.fromRect({x:n.x,y:n.y,width:n.width,height:n.height+o});return(0,i().hI)(t).every((e=>{const t=e.getBoundingClientRect();return n.top>=t.top&&n.bottom<=t.bottom&&n.left>=t.left&&n.right<=t.right}))}},580215:(e,t,o)=>{o.d(t,{M:()=>a,W:()=>c});var i=o(667294),n=()=>o(177357);const s=24*n().U6;function r(e){return l(e).status}function l(e){if(null==e||!e.enabled)return{status:"disabled"};const t=e.start_ts?1e3*e.start_ts-Date.now():0;return t<=0?{status:"active"}:t<=s?{status:"warning",nextUpdateInMs:t}:{status:"scheduled",nextUpdateInMs:t-s}}function a(e){const[t,o]=(0,i.useState)((()=>r(e)));return(0,i.useEffect)((()=>{if(null==e||!e.enabled)return;let t;return function i(){t=void 0;const{status:n,nextUpdateInMs:s}=l(e);o(n),s&&(t=setTimeout(i,s))}(),()=>{t&&(clearTimeout(t),t=void 0)}}),[e]),t}function c(e){const[t,o]=(0,i.useState)((()=>Date.now())),s=(null==e?void 0:e.enabled)&&e.start_ts;return(0,i.useEffect)((()=>{if("number"!=typeof s)return;const e=s;let t;return function i(){const s=Date.now();o(s);const r=e*n().C0-s;if(r>0){const e=r%n().hM,o=0===e?n().hM:e;t=setTimeout(i,o)}else t=void 0}(),()=>{t&&(clearTimeout(t),t=void 0)}}),[s]),{freezeStatus:r(e),minUntilFreeze:s?Math.floor((s*n().C0-t)/n().hM):void 0}}},238936:(e,t,o)=>{o.d(t,{D:()=>l});var i=o.n(o(294184)),n=o(667294),s=()=>o(247724),r=()=>o(987503);function l(e){const{environment:t,pageFont:o,pageSmallText:l}=e,a=(0,r().a)("css_margins");return(0,n.useMemo)((()=>{const{device:e}=t;return i()(s().QS0,{[s().oTt]:"enabled"===a,[s().AJv]:"double_space"===a,"m-smalltext":l,"m-serif":"serif"===o,"m-mono":"mono"===o,"m-mobile":e.isMobile})}),[t,o,l,a])}},112213:(e,t,o)=>{o.d(t,{o:()=>n});o(667294);var i=o(785893);const n=(0,o(827282).IU)("addPage",{viewBox:"0 0 14 14",svg:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 0c3.861 0 7 3.139 7 7s-3.139 7-7 7-7-3.139-7-7 3.139-7 7-7zM3.561 5.295a1.027 1.027 0 1 0 2.054 0 1.027 1.027 0 0 0-2.054 0zm5.557 1.027a1.027 1.027 0 1 1 0-2.054 1.027 1.027 0 0 1 0 2.054zm1.211 2.816a.77.77 0 0 0-.124-1.087.786.786 0 0 0-1.098.107c-.273.407-1.16.958-2.254.958-1.093 0-1.981-.55-2.244-.945a.788.788 0 0 0-1.107-.135.786.786 0 0 0-.126 1.101c.55.734 1.81 1.542 3.477 1.542 1.668 0 2.848-.755 3.476-1.541z"})})},639018:(e,t,o)=>{o.d(t,{v:()=>y});o(667294);var i=()=>o(219727),n=()=>o(142735),s=()=>o(846550),r=()=>o(788860),l=()=>o(448419),a=()=>o(198829),c=()=>o(92175),d=()=>o(935753),u=()=>o(352230),p=()=>o(338217),g=()=>o(26796),m=()=>o(247904),h=()=>o(309797),S=o(785893);function f(e){let{store:t}=e;return(0,S.jsx)("div",{style:{width:"100%",maxWidth:"100%",margin:"0 auto 6px auto"},onMouseDown:h().m4,onClick:h().h9,children:(0,S.jsx)(m().Z,{type:"page",store:t,headerText:(0,S.jsx)(r()._H,{defaultMessage:"Linked to this page",id:"page.expandedBacklinks.label"}),disableCurrentPageToken:!0,disableInaccessiblePages:!0})})}function y(e){const{pageStore:t,backlinksButtonPopupStore:o,numBacklinks:m,customization:h={}}=e,{buttonStyles:y,buttonIsGray:v,buttonIsLightGray:x}=h,b=(0,i().O7)(),k=(0,n().VK)((()=>void 0!==m?m:(0,d().b)(t,b).backlinksCount),[b,t,m],{debugName:"BacklinksControlButton.useComputedStore"}),w=(0,n().VK)((()=>g().Z.getState().isOpen),[]),C=(0,s().yK)((e=>{const t=0===k&&w,o=e.text.quaternary;return{button:t?{color:o}:{},icon:t?{fill:o}:{}}}),[w,k]);return(0,S.jsx)(l().ZP,{buttonPopupStore:o,popupType:l().Z4.Popup,renderOrigin:e=>(e=>{let{buttonPopupEvents:t={}}=e;return(0,S.jsx)(c().Z,{icon:e=>(0,p().J)({...e,transform:"rotate(180deg)",...C.icon}),style:{...y,...C.button},isGray:v,isLightGray:x,...t,children:(0,S.jsx)(r()._H,{id:"pageViewBlock.show.backlinks",defaultMessage:"{numberOfBacklinks, plural, =0 {No backlinks} one {{numberOfBacklinks} backlink} other {{numberOfBacklinks} backlinks}}",values:{numberOfBacklinks:k}})})})({buttonPopupEvents:e}),render:()=>{const e={menuType:u().o.Popup,width:500};return(0,S.jsx)(a().Z,{...e,children:k>0?(0,S.jsx)(f,{store:t}):null})}},"backlinkspopup")}},726841:(e,t,o)=>{o.d(t,{Z:()=>u});var i=o(667294),n=()=>o(788860),s=o(785893);const r=(0,o(827282).IU)("layoutFilled",{viewBox:"0 0 14 14",svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.00056 1.59766H2.40058C1.95875 1.59766 1.60059 1.95583 1.60059 2.39765V11.5976C1.60059 12.0394 1.95875 12.3976 2.40058 12.3976H5.00056C5.44238 12.3976 5.80055 12.0394 5.80055 11.5976V2.39765C5.80055 1.95583 5.44238 1.59766 5.00056 1.59766ZM11.6006 8.19981H9.00059C8.55877 8.19981 8.2006 8.55798 8.2006 8.99981V11.5998C8.2006 12.0417 8.55877 12.3998 9.00059 12.3998H11.6006C12.0424 12.3998 12.4006 12.0417 12.4006 11.5998V8.99981C12.4006 8.55798 12.0424 8.19981 11.6006 8.19981ZM9.00054 1.59766H11.6006C12.0423 1.59766 12.4005 1.95583 12.4005 2.39765V4.99763C12.4005 5.43946 12.0423 5.79762 11.6006 5.79762H9.00054C8.55871 5.79762 8.20054 5.43946 8.20054 4.99763V2.39765C8.20054 1.95583 8.55871 1.59766 9.00054 1.59766Z"}),(0,s.jsx)("path",{d:"M2.39999 2.2H4.99998V1H2.39999V2.2ZM2.19999 2.39999C2.19999 2.28953 2.28954 2.2 2.39999 2.2V1C1.6268 1 1 1.62679 1 2.39999H2.19999ZM2.19999 11.5999V2.39999H1V11.5999H2.19999ZM2.39999 11.7999C2.28954 11.7999 2.19999 11.7104 2.19999 11.5999H1C1 12.3732 1.6268 12.9999 2.39999 12.9999V11.7999ZM4.99998 11.7999H2.39999V12.9999H4.99998V11.7999ZM5.19997 11.5999C5.19997 11.7104 5.11043 11.7999 4.99998 11.7999V12.9999C5.77317 12.9999 6.39997 12.3732 6.39997 11.5999H5.19997ZM5.19997 2.39999V11.5999H6.39997V2.39999H5.19997ZM4.99998 2.2C5.11043 2.2 5.19997 2.28953 5.19997 2.39999H6.39997C6.39997 1.62679 5.77317 1 4.99998 1V2.2ZM9.00001 8.80215H11.6V7.60216H9.00001V8.80215ZM8.80001 9.00215C8.80001 8.89169 8.88955 8.80215 9.00001 8.80215V7.60216C8.22681 7.60216 7.60001 8.22896 7.60001 9.00215H8.80001ZM8.80001 11.6021V9.00215H7.60001V11.6021H8.80001ZM9.00001 11.8022C8.88955 11.8022 8.80001 11.7126 8.80001 11.6021H7.60001C7.60001 12.3753 8.22681 13.0022 9.00001 13.0022V11.8022ZM11.6 11.8022H9.00001V13.0022H11.6V11.8022ZM11.8 11.6021C11.8 11.7126 11.7105 11.8022 11.6 11.8022V13.0022C12.3731 13.0022 13 12.3753 13 11.6021H11.8ZM11.8 9.00215V11.6021H13V9.00215H11.8ZM11.6 8.80215C11.7105 8.80215 11.8 8.89169 11.8 9.00215H13C13 8.22896 12.3731 7.60216 11.6 7.60216V8.80215ZM11.6 1H8.99995V2.2H11.6V1ZM12.9999 2.39999C12.9999 1.62679 12.3731 1 11.6 1V2.2C11.7104 2.2 11.7999 2.28953 11.7999 2.39999H12.9999ZM12.9999 4.99997V2.39999H11.7999V4.99997H12.9999ZM11.6 6.39996C12.3731 6.39996 12.9999 5.77317 12.9999 4.99997H11.7999C11.7999 5.11043 11.7104 5.19997 11.6 5.19997V6.39996ZM8.99995 6.39996H11.6V5.19997H8.99995V6.39996ZM7.59996 4.99997C7.59996 5.77317 8.22675 6.39996 8.99995 6.39996V5.19997C8.8895 5.19997 8.79996 5.11043 8.79996 4.99997H7.59996ZM7.59996 2.39999V4.99997H8.79996V2.39999H7.59996ZM8.99995 1C8.22675 1 7.59996 1.62679 7.59996 2.39999H8.79996C8.79996 2.28953 8.8895 2.2 8.99995 2.2V1Z"})]})});var l=()=>o(803728),a=()=>o(482162);const c="layout_customize_layout_button_tooltip",d=(0,n().vU)({calloutHeader:{id:"pageViewBlock.customizeLayout.education.callout.header",defaultMessage:"Introducing page layouts"},calloutContent:{id:"pageViewBlock.customizeLayout.education.callout.content",defaultMessage:"Customize your database pages to fit any use case"}});const u=function(e){const{style:t,onClick:u,blockStore:p,onEducationCalloutVisibilityChange:g}=e,m=(0,o(219727).O7)();i.useEffect((()=>{(0,l().yM)(m,c)}),[m]);const h=i.useRef(null),S=i.useCallback((()=>{(0,l().Gi)(m,c)}),[m]),f=(0,o(142735).VK)((()=>{if(!o(878797).default.isVisible(c))return!1;if(!(!!h.current&&(0,o(328939).G)({element:h.current})))return!1;if(Boolean(a().default.isSidePeekOpeningStore.state||a().default.isSidePeekClosingStore.state))return!1;if(!a().default.state.open)return!0;const e=a().default.state.targetStore;if(e===p)return!0;return!(0,o(378773).N)({environment:m,blockStore:e})}),[p,m]),y=(0,o(846550).yK)((e=>({tutorialTooltip:{width:280},tutorialTooltipHeader:{fontSize:14,fontWeight:590,lineHeight:"20px"},tutorialTooltipContent:{fontSize:14,lineHeight:"20px"},buttonIcon:{width:15,height:15,fill:"dark"===e.mode?"#5A5A5A":"#B9B9B7",color:"dark"===e.mode?"#5A5A5A":"#B9B9B7"}})),[]),v=(0,i.useMemo)((()=>(0,s.jsx)(o(92175).Z,{ref:h,style:{...t,...f?{opacity:1,pointerEvents:"auto"}:void 0},iconStyle:y.buttonIcon,isLightGray:!0,onClick:e=>{u(e),f&&S()},icon:r,children:(0,s.jsx)(n()._H,{id:"pageViewBlock.customizeLayout",defaultMessage:"Customize layout"})},"customize-layout")),[t,f,y.buttonIcon,u,S]),[x,b]=i.useState(!1);return i.useEffect((()=>{null==g||g(f)}),[f,g]),f?(0,s.jsxs)(o(577741).P,{calloutId:c,children:[(0,s.jsx)(o(125756).PulsingWrapper,{shape:"square",borderRadius:4,onDependencyLoaded:()=>b(!0),children:v}),x&&(0,s.jsx)(o(905263).U,{origin:h,placementToOrigin:"left",header:(0,s.jsx)(n()._H,{...d.calloutHeader}),headerStyle:y.tutorialTooltipHeader,content:(0,s.jsx)(n()._H,{...d.calloutContent}),contentStyle:y.tutorialTooltipContent,showPointer:!1,alignmentToOrigin:o(998901).Alignment.Start,onCloseClick:S,style:y.tutorialTooltip,pointerOffset:8})]}):v}},847207:(e,t,o)=>{o.d(t,{X:()=>l});o(667294);var i=()=>o(846550),n=()=>o(788860),s=()=>o(312578),r=o(785893);function l(){const e=(0,i().yK)((e=>({wrapper:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:16,marginTop:"12vh"},message:{fontSize:14,marginTop:8,color:e.mediumTextColor}})),[]);return(0,r.jsxs)("div",{style:e.wrapper,children:[(0,r.jsx)(s().Z,{}),(0,r.jsx)("div",{style:e.message,children:(0,r.jsx)(n()._H,{defaultMessage:"Importingâ€¦",id:"frame.importingMessage"})})]})}},45830:(e,t,o)=>{o.d(t,{$:()=>n});o(267602),o(653476),o(470928),o(228244);var i=()=>o(70191);function n(e){const{collectionStore:t,module:o,isMobile:n}=e;if("normalizedTitleWithIcon"!==o.type)return!1;const s=t.getSchema(),r=!!s&&(0,i().zD)({collectionSchema:s,module:o}).length>0,l=(0,i().nJ)({collectionStore:t}).count>0;return!(!n||!l)||!r&&l}},657558:(e,t,o)=>{o.d(t,{Z:()=>A});o(670560),o(267602),o(653476),o(470928),o(241792);var i=o(667294),n=()=>o(219727),s=()=>o(142735),r=()=>o(532850),l=()=>o(788860),a=()=>o(707513),c=()=>o(990966),d=()=>o(874018),u=()=>o(58836),p=()=>o(448419),g=()=>o(92175),m=()=>o(677559);const h=new(m().Ss)("floatingTableOfContents",(async()=>await o.e(26534).then(o.bind(o,587262)))),S=(0,m().kF)(h,(e=>e.FloatingTableOfContents));var f=()=>o(247724),y=()=>o(670655),v=()=>o(352230),x=()=>o(191586);o(821057);var b=()=>o(852465),k=o(785893);const w=(0,o(827282).IU)("addPageDiscussion",{viewBox:"0 0 16 16",svg:(0,k.jsx)("path",{d:"M4.095 15.465c.287 0 .499-.137.84-.444l2.523-2.277 4.47.007c2.058 0 3.214-1.19 3.214-3.22V4.22c0-2.03-1.156-3.22-3.213-3.22H3.213C1.163 1 0 2.19 0 4.22V9.53c0 2.037 1.196 3.22 3.165 3.213h.273v1.983c0 .45.24.738.657.738zM3.958 5.156a.454.454 0 01-.444-.45c0-.24.198-.438.444-.438h7.157c.246 0 .445.198.445.437a.45.45 0 01-.445.451H3.958zm0 2.256a.454.454 0 01-.444-.451c0-.24.198-.444.444-.444h7.157a.448.448 0 010 .895H3.958zm0 2.256a.448.448 0 010-.896h4.669c.246 0 .437.206.437.452a.438.438 0 01-.437.444H3.958z"})});var C=()=>o(733641),V=()=>o(589525),M=()=>o(749826),P=()=>o(311562),_=()=>o(482162),j=()=>o(57956),I=()=>o(639018),B=()=>o(718959),T=()=>o(942226),K=()=>o(505121),L=()=>o(242921);function E(e){let{pageStore:t,disabled:r,viewsModule:l,wrapper:a,templatePickerMenuListStore:c}=e;const d=(0,i.useMemo)((()=>(0,o(590434).m)(t,l)),[t,l]),[u,p]=(0,i.useState)(void 0),{collectionViewBlockStore:g,collectionViewId:m,viewsModuleContextType:h}=(0,s().VK)((()=>{if(!d)return{collectionViewBlockStore:void 0,collectionViewId:void 0,viewsModuleContextType:void 0};const e={type:"page",viewsModule:d,currentPageInRelatedCollectionStore:t};return{collectionViewBlockStore:d.getCollectionViewBlockStore(),collectionViewId:d.getId(),viewsModuleContextType:e}}),[t,d]),S=(0,i.useMemo)((()=>"viewsMain"===l.type),[l]),f=function(e){const t=(0,n().O7)();return(0,s().VK)((()=>{if(!e)return 0;const{device:o}=t,i=t.WindowSizeStore.state.width,n=Boolean(e&&(0,T().wq)(e));if(n){const e=(0,L().rb)({environment:t,isInPeek:!0});return _().default.getPeekModeWidth(i)-K().Z.state-e}const s=(0,V().ll)(t,n)-(0,V().vJ)(t);let r=i-K().Z.state-s;if(!(0,V().Jr)(t))return r;const{shouldShowSidebar:l}=(0,B().h1)(t);return o.isMobile&&!o.isTablet||!l||(r-=(0,V().Wk)(t)),r}),[t,e])}(g),y=function(e){let{isViewsMainModule:t,collectionViewBlockStore:o,collectionContextStore:i}=e;return(0,s().VK)((()=>{if(!t||!i)return!1;const e=null==i?void 0:i.collectionViewStore();return 1===(null==o?void 0:o.getCollectionViewStores().length)&&"page"===(null==e?void 0:e.getType())&&!(null!=e&&e.getFormat().page_pointer)}),[t,i,o])}({isViewsMainModule:S,collectionViewBlockStore:g,collectionContextStore:u});return g&&d?a((0,k.jsx)("div",{style:S?{minHeight:"60vh"}:void 0,children:(0,k.jsx)(o(963310).DZ,{store:g,isFullScreen:!1,viewId:m,hideViewTabBar:y,headerActionsBehavior:y?"hidden":"default",headerAllowedActions:Z,disabled:r,disableHoverMenu:!0,fullWidth:f,showOnlyCurrentView:!S,isUnlistedView:d.isUnlistedView(),viewsModuleContextType:h,setCollectionContextStore:p,templatePickerMenuListStore:c})})):null}const Z=["filter","sort","search","addItem","noDate"];var D=()=>o(494630);class H extends i.Component{constructor(e){super(e),this.state={hasError:!1}}componentDidCatch(e,t){o(680146).vd("appPlatform"),this.setState({hasError:!0,error:e,errorInfo:t})}render(){return this.state.hasError?this.props.fallbackComponent:this.props.children}}const A=(0,i.forwardRef)((function(e,t){const{store:h,context:_,disabled:B,templatePickerMenuListStore:T,styleOverrides:K,onHeaderMouseEnter:L,onHeaderMouseLeave:E,pageCoverHeight:Z,isEditable:D,getControlHoverStyle:A,pageViewBlockStores:R,pageViewBlockAccessor:O,onDetailMouseEnter:W,onDetailMouseLeave:z,modules:N}=e,G=(0,n().O7)(),J=(0,l().YB)(),U=(0,s().VK)((()=>h.getAssociatedCollectionStore()),[h],{debugName:"PageLayoutModules(collectionStore).useComputedStore"}),q=(0,s().VK)((()=>h.getSchema()),[h],{debugName:"PageLayoutModules(schema).useComputedStore"}),Y=(0,s().VK)((()=>(0,o(138196).Z)({environment:G,store:h,pageViewBlockStore:R.pageViewBlockStore})),[G,h,R.pageViewBlockStore]),$=(0,s().VK)((()=>{const e=(0,x().y6)(h);if(!e)return;return(e.collection_page_sections||[]).filter((e=>{const t=q[e.section];if(!t||"relation"!==t.type)return;const o=h.getPropertyValue(e.section),i=(0,r().j$)({relationValue:(0,r().rq)(o),propertySchema:t,getRecordModel:h.getRecordModel,includeDeleted:M().default.checkGate({gateName:"relations_show_deleted"}),includeInvalidCollection:M().default.checkGate({gateName:"relations_show_invalid_collection"}),includeNoAccess:M().default.checkGate({gateName:"relations_show_no_access"})}).length;return"inline"===e.visibility&&q[e.section]&&0!==i})).map((e=>e.section))}),[q,h],{debugName:"PageLayoutModules(inlinePropertyIDs).useComputedStore"}),X=(0,o(846550).yK)((e=>({bottomControls:{display:"flex",alignItems:"baseline",justifyContent:"flex-start",flexWrap:"wrap",color:e.lightTextColor,fontFamily:a().F5(o(146947).locale).sans},detailsButton:{fontWeight:a().Ue.medium,color:e.mediumTextColor},fallbackComponent:{display:"flex",color:e.errorText,padding:10,marginBottom:10,background:e.layoutModuleErrorBackground,borderRadius:4},fallbackIcon:{color:e.errorText,fill:e.errorText,marginRight:5,width:14}})),[]),Q=(0,s().VK)((()=>(null==K?void 0:K.paddingX)??(0,x().RH)(_,G)),[_,G,null==K?void 0:K.paddingX],{debugName:"PageLayoutModules(horizontalPadding).useComputedStore"}),ee=(0,i.useCallback)((()=>(0,b().Xp)(h,{recursivelyLoadAllDiscussions:!1})),[h]),te=(0,i.useCallback)((()=>ee()>0),[ee]),oe=(0,s().VK)((()=>{const e=(0,x().y6)(h);if(!e)return;return(e.collection_page_sections||[]).filter((e=>{const t=q[e.section];if(!t||"relation"!==t.type)return;const o=h.getPropertyValue(e.section),i=(0,r().j$)({relationValue:(0,r().rq)(o),propertySchema:t,getRecordModel:h.getRecordModel,includeDeleted:M().default.checkGate({gateName:"relations_show_deleted"}),includeInvalidCollection:M().default.checkGate({gateName:"relations_show_invalid_collection"}),includeNoAccess:M().default.checkGate({gateName:"relations_show_no_access"})}).length;return"minimal"===e.visibility&&q[e.section]||"inline"===e.visibility&&q[e.section]&&0===i})).map((e=>e.section))}),[q,h],{debugName:"PageLayoutModules(minimalPropertyIDs).useComputedStore"}),{value:ie}=(0,m().XJ)(d().commentsDependency),{value:ne}=(0,m().XJ)(o(650996).assistantDependency),se=(0,s().VK)((()=>{var e;if(!ne)return!1;const t=ne.clientSkillHelpers.createClientGlobalSkill("fill_title");return 1===ne.assistantSurfaceValidators.filterAssistantSurfaceActionsForContext(ne.assistantSurfaceValidators.clientSkillToAssistantSurfaceAction([t]),{type:"entrypoint",entrypoint:"pageStart",pageStore:h,isMobile:G.device.isMobile,userSettings:null===(e=o(876822).default.state.currentUserSettingsStore)||void 0===e?void 0:e.getSettings()}).length}),[ne,G.device.isMobile,h]),re=(0,s().VK)((()=>(0,o(935753).b)(h,G).backlinksCount),[G,h],{debugName:"PageLayoutModules.useComputedStore:numberOfBacklinks"}),le=(0,j().x)({pageStore:h,numBacklinks:re}),ae=(0,j().T7)({pageStore:h,numBacklinks:re}),ce=(0,x().OZ)(_),de=(0,s().VK)((()=>{if(e.context===P().S.Post)return{bottomControls:[]};const t=async()=>{R.pageViewBlockStore.setState({...R.pageViewBlockStore.state,forceDiscussionOpen:!0}),o(248825).ZW(G,{from:"page_comments"}),await o(492788).default.afterNextFlush();const e=o(585742).W.find((e=>e.getBlockStore().id===h.id)),t=null==e?void 0:e.getInputStore();t&&c().setSelectionAtEnd({store:t.state.textStore})},n=async()=>{const{assistantDependency:e}=await Promise.resolve().then(o.bind(o,650996)),t=h.getTitleStore();if(!t)return;const i=await e.load();c().setSelectionAtEnd({store:t}),i.executeAssistantSkillAction({environment:G,clientSkillWithParameterValues:i.clientSkillHelpers.dangerouslyCreateClientSkillWithParameterValues(i.clientSkillHelpers.createClientGlobalSkill("fill_title")),from:"block_action_menu",assistantSurfaceType:G.device.isMobile?"mobileWriter":"writer"})};try{let r=[];const a=[...e.topControls],c=()=>{if("section_hide"!==(0,y().uX)()&&te()){const e=ee();return(0,k.jsx)(g().Z,{isGray:!0,onClick:()=>{"PageDetailsStore"in G&&G.PageDetailsStore.setToggleState({environment:G,type:"discussion",id:h.id},!0)},icon:w,style:X.detailsButton,children:(0,k.jsx)(l()._H,{id:"pageViewBlock.show.pageComments",defaultMessage:"{numberOfComments, plural, one {{numberOfComments} comment} other {{numberOfComments} comments}}",values:{numberOfComments:e}})},"showcomments")}},u=()=>{if(!U)return;const e=(0,x().y6)(h),t=h.isNonEditableState();if(!e)return;const i=oe;return i&&i.length?(0,k.jsx)(o(386790).Z,{propertyIds:i,store:h,collectionStore:U,disabled:B,locked:t,blockPropertyValueOverlayStore:ce?o(27475).Z:o(121700).Z,format:e,type:"minimal"}):void 0},m=()=>{const e=(0,b().mY)(h,{recursivelyLoadAllDiscussions:!1});if(0===e.length)return;const t=(0,k.jsx)(l()._H,{id:"pageViewBlock.showResolvedComments.button",defaultMessage:"{numberOfResolvedComments, plural, one {{numberOfResolvedComments} resolved comment} other {{numberOfResolvedComments} resolved comments}}",values:{numberOfResolvedComments:e.length}});return(0,V().Sx)(G)?(0,k.jsx)(g().Z,{icon:C().k,isGray:!0,style:X.detailsButton,onClick:()=>{o(799454).Ib({environment:G,blockStore:h,analyticsFrom:"page_comments",shouldFocusDiscussion:!0,recursivelyLoadAllDiscussions:!1,discussionIds:e.map((e=>e.id))})},children:t}):(0,k.jsx)(p().ZP,{buttonPopupStore:R.resolvedDiscussionButtonPopupStore,popupType:G.device.isMobile?p().Z4.SlideUp:p().Z4.Popup,renderOrigin:e=>(0,k.jsx)(g().Z,{icon:C().k,isGray:!0,style:X.detailsButton,...e,children:t}),render:t=>{let i;return i=G.device.isMobile?{menuType:v().o.Modal,title:(0,k.jsx)(l()._H,{defaultMessage:"Resolved comments",id:"pageViewBlock.resolvedComments.menuTabTitle"}),right:(0,k.jsx)(o(470386).DoneMenuText,{}),onClickRight:t.close,whiteBackground:!0}:{menuType:v().o.Popup,width:500},(0,k.jsx)(o(198829).Z,{...i,children:e.map(((e,i,n)=>(0,k.jsx)(o(299519).Z,{store:e,droppable:!0,render:()=>ie?(0,k.jsx)(d().gU,{store:e,format:ie.discussionHelpers.DiscussionFormat.Menu,isFirst:0===i,isOnly:1===n.length,discussionLocation:"page_discussion",showResolveButtonByDefaultIfPossible:!0,blockStore:h,onDismiss:t.close},e.id):null},e.id)))})}},"resolve-discussions")},S=e=>{const t=[];le&&t.push((0,k.jsx)(i.Fragment,{children:(0,k.jsx)(I().v,{pageStore:h,backlinksButtonPopupStore:R.backlinksButtonPopupStore,numBacklinks:re,customization:{buttonStyles:X.detailsButton,buttonIsGray:!0}})},"backlinks"));const o="hidden"===e.type,n=o&&c();n&&t.push((0,k.jsx)(i.Fragment,{children:n},"discussions"));const s=m();s&&!o&&t.unshift((0,k.jsx)(i.Fragment,{children:s},"resolveddiscussions"));const r=u();return r&&t.push((0,k.jsx)(i.Fragment,{children:r},"minimalpagesections")),t};if(r=S(Y),"always"===ae||"onHover"===ae){const e={isBottomControl:!1,..."always"===ae?{forceVisible:!0}:{}};a.unshift((0,k.jsx)(i.Fragment,{children:(0,k.jsx)(I().v,{pageStore:h,backlinksButtonPopupStore:R.backlinksButtonPopupStore,numBacklinks:re,customization:{buttonStyles:A(e),buttonIsLightGray:!0}})},"backlinks"))}"section_hide"===(0,y().uX)()||h.isCollectionView()||h.isInsideCollection()||te()||!h.canComment()||!G.currentUser.isLoggedIn()||R.pageViewBlockStore.state.forceDiscussionOpen||h.pathIsDead()||h.isPost()||B||a.push((s={isBottomControl:!1},(0,k.jsx)(g().Z,{style:A({isBottomControl:s.isBottomControl}),isLightGray:!0,onClick:t,icon:w,children:G.device.isSmallPhone?(0,k.jsx)(l()._H,{id:"pageViewBlock.add.pageCommentMobile",defaultMessage:"Comment"}):(0,k.jsx)(l()._H,{id:"pageViewBlock.add.pageComment",defaultMessage:"Add comment"})},"addcomment"))),se&&a.push((0,k.jsx)(g().Z,{style:A({isBottomControl:!1}),isBlue:!0,onClick:n,icon:o(586365).c,children:(0,k.jsx)(l()._H,{id:"pageViewBlock.add.fillTitle",defaultMessage:"Fill page title"})},"fill-title"));return{headerControls:(0,k.jsx)("div",{className:ce?f().JiT:void 0,children:(0,k.jsx)(o(441672).Z,{store:h,context:e.context,children:a})}),bottomControls:r}}catch(r){return{bottomControls:[]}}var s}),[e.context,e.topControls,R.pageViewBlockStore,R.resolvedDiscussionButtonPopupStore,R.backlinksButtonPopupStore,G,h,A,te,B,Y,ae,se,ce,ee,X.detailsButton,U,oe,ie,le,re],{debugName:"PageLayoutModules(headerAndBottomControlsStore).useComputedStore"}),ue=(0,o(466970).E)("floating_table_of_contents"),pe=(0,i.useCallback)((e=>(0,k.jsxs)(o(857719).Pb,{style:X.fallbackComponent,children:[(0,o(735501).t)(X.fallbackIcon),(0,k.jsx)(l()._H,{id:"pageLayoutModules.failedToRender",defaultMessage:"Failed to render {moduleName}. Please contact support.",values:{moduleName:J.formatMessage(o(844650).B[e.type])}})]})),[J,X.fallbackComponent,X.fallbackIcon]);return(0,k.jsxs)(k.Fragment,{children:[ue&&(0,k.jsx)(u().p,{style:{display:"contents"},allowSelectionWithin:!1,children:(0,k.jsx)(S,{store:h})}),N.map(((o,i)=>(0,k.jsx)(H,{fallbackComponent:pe(o),children:(0,k.jsx)(F,{ref:t,module:o,context:_,pageViewBlockStore:R.pageViewBlockStore,disabled:B,environment:G,bottomControls:de.bottomControls,headerControls:de.headerControls,horizontalPadding:Q,inlinePropertyIDs:$,isEditable:D,isInPeek:ce,onDetailMouseEnter:W,onDetailMouseLeave:z,onHeaderMouseEnter:L,onHeaderMouseLeave:E,pageCoverHeight:Z,pageViewBlockAccessor:O,headerFocusStore:R.headerFocusStore,store:h,collectionStore:U,collectionSchema:q,bottomControlsStyle:X.bottomControls,templatePickerMenuListStore:T,pageTitleWithIconProps:e,modules:N,pageDiscussionsRenderState:Y})},o.id)))]})})),F=(0,i.forwardRef)((function(e,t){const{module:i,modules:r,context:l,disabled:a,environment:c,bottomControls:d,headerControls:p,horizontalPadding:g,inlinePropertyIDs:m,isEditable:h,isInPeek:S,onDetailMouseEnter:y,onDetailMouseLeave:v,onHeaderMouseEnter:x,onHeaderMouseLeave:b,pageCoverHeight:w,pageViewBlockAccessor:C,headerFocusStore:V,store:j,collectionStore:I,collectionSchema:B,bottomControlsStyle:T,templatePickerMenuListStore:K,pageTitleWithIconProps:L,pageDiscussionsRenderState:Z}=e,{isMobile:H}=(0,n().Fy)(),A=(0,s().VK)((()=>!!I&&(0,o(45830).$)({collectionStore:I,module:i,isMobile:H})),[I,H,i]),F="page_main",R=(0,D().wV)({layoutModule:i,area:F,collectionSchema:B,collectionStore:I,showDetailsPanelToggleButtonBelowTitle:A,modules:r,context:l}),O=(0,D().du)({layoutModule:i,area:F,collectionSchema:B,collectionStore:I,pageMainModules:r,showDetailsPanelToggleButtonBelowTitle:A});if((0,s().VK)((()=>M().default.checkGate({gateName:"side_peek_transition_improvements"})&&l===P().S.PeekView&&_().default.state.open&&"side_peek"===_().default.state.mode&&(_().default.state.isOpening||_().default.state.isClosing)&&("editor"===i.type||"views"===i.type||"viewsMain"===i.type)),[l,i.type]))return(0,k.jsx)("div",{className:f().psr,children:(0,k.jsx)(o(668001).Z,{style:{width:"100%",height:"30px",display:"block",marginTop:32,borderRadius:8}})});if((0,o(639708).f)(i))return(0,k.jsx)(o(965631)._,{context:l,disabled:a,propertyId:i.propertyId,store:j,pageModule:i,wrapper:R,stackPropertyLabelAndValue:!0});switch(i.type){case"cover":return(0,k.jsx)(o(279080).D,{store:j,isEditable:h,paddingX:g,pageCoverHeight:w,onMouseEnter:x,onMouseLeave:b,isInPeek:S});case"normalizedTitleWithIcon":return R((0,k.jsx)(o(780814).J,{handleHeaderMouseEnter:x,handleHeaderMouseLeave:b,headerControls:p,headerFocusStore:V,layoutModule:i,...L}));case"properties":return(0,k.jsx)(o(133049).V,{context:l,disabled:a,store:j,layoutModule:i,customization:{neverShowPropertiesElsewhereInLayout:!0,disableContainerPadding:!0},wrapper:R,showDefaultTitle:O});case"inlinePageSections":return(0,k.jsx)(o(725858).bM,{context:l,disabled:a,inlinePropertyIDs:m,store:j,wrapper:R});case"expandedBacklinks":case"transcript":case"formTitle":case"formQuestion":case"formSubmit":case"placeholder":case"deleted_property":return null;case"discussions":return(0,k.jsx)(o(293936).s,{store:j,wrapper:R,showDefaultTitle:O,discussionLocation:"page_discussion",pageDiscussionsRenderState:Z});case"bottomControls":return 0===d.length?null:R((0,k.jsx)(u().p,{allowSelectionWithin:!0,children:(0,k.jsx)("div",{style:T,className:"notion-page-details-controls",onMouseEnter:y,onMouseLeave:v,children:d})}));case"editor":return(0,k.jsx)(o(618827).H,{context:l,disabled:a,handlePlaceholderWrapClick:e=>o(441530).og(e,j,c),pageBlockStore:j,pathToBlockId:i.pathToBlockId,templatePickerMenuListStore:K,pageViewBlockAccessor:C,ref:t,editorWrapper:l===P().S.Post?void 0:R});case"viewsMain":case"views":return(0,k.jsx)(E,{pageStore:j,disabled:a,viewsModule:i,wrapper:R,templatePickerMenuListStore:K});case"relationsGroup":return(0,k.jsx)(o(305128).T,{pageStore:j,wrapper:R,disabled:a,context:l,showDefaultTitle:O})}}))},494630:(e,t,o)=>{o.d(t,{Kq:()=>f,Wd:()=>w,Yq:()=>S,du:()=>k,wV:()=>b});o(821057),o(267602),o(470928);var i=o.n(o(294184)),n=o(667294),s=()=>o(219727),r=()=>o(142735),l=()=>o(639708),a=()=>o(696459),c=()=>o(177610),d=()=>o(311562),u=()=>o(70191),p=()=>o(761650),g=()=>o(896751),m=()=>o(857719),h=o(785893);const S=12,f=12,y=10,v=10;function x(e){let{collectionSchema:t,module:o}=e;return!(!t||"normalizedTitleWithIcon"!==o.type)&&(0,u().zD)({collectionSchema:t,module:o}).length>0}function b(e){let{layoutModule:t,area:o,context:u,collectionSchema:b,collectionStore:k,showDetailsPanelToggleButtonBelowTitle:w,modules:C}=e;const{isMobile:V}=(0,s().Fy)(),M=C.findIndex((e=>e.id===t.id)),P=null!=C&&C.length&&-1!==M?C[M+1]:void 0,_=(0,g().K)({collectionStore:k,layoutModule:P}),j=(0,c().vg)(k),I=(0,r().VK)((()=>Boolean(null==k?void 0:k.isPageTreeCollection())),[k]),[B,T]=(0,n.useMemo)((()=>{const e=x({collectionSchema:b,module:t});let i=!1;const n={};if("page_details"===o)n.marginBottom=y,n.paddingBottom=v;else if("page_main"===o)n.marginBottom=f,n.paddingBottom=S;else if("views_main_tab_modules"===o)n.marginBottom=f,n.paddingBottom=S;else{if("form_layout_schema"===o||"form_conditional_modules"===o)throw new Error("Not implemented for forms");(0,a().t1)(o)}const s="editor"===(null==P?void 0:P.type)||"views"===(null==P?void 0:P.type);s&&(i=!0,"normalizedTitleWithIcon"!==t.type||e||(i=!1,n.marginBottom=void 0,n.paddingBottom=void 0)),_&&n.marginBottom&&(n.marginBottom=Math.max(n.marginBottom-4,0)),"page_main"!==o&&"page_details"!==o||("discussions"===t.type?n.marginLeft=0:"normalizedTitleWithIcon"===t.type?n.marginLeft=-4:(0,l().f)(t)||"properties"===t.type||"relationsGroup"===t.type?n.marginLeft=-6:"editor"===t.type&&(n.marginLeft=-2));const r="views"===(null==P?void 0:P.type)||"editor"===(null==P?void 0:P.type);return"page_main"!==o&&"page_details"!==o||!n.paddingBottom||r||("property_text"===t.type||"property_relation"===t.type&&j?n.paddingBottom=Math.max(n.paddingBottom-4,0):"properties"===t.type&&(I&&!V||(n.paddingBottom=Math.max(n.paddingBottom-4,0))),"viewsMain"===(null==P?void 0:P.type)&&(n.paddingBottom=Math.max(n.paddingBottom-12,0))),"normalizedTitleWithIcon"===t.type&&(e?V&&"properties"===(null==P?void 0:P.type)&&!_&&(n.paddingBottom=void 0,n.marginBottom=4):(w?"discussions"===(null==P?void 0:P.type)&&(n.marginBottom=void 0):"properties"===(null==P?void 0:P.type)?(n.paddingBottom=void 0,n.marginBottom=8):"discussions"===(null==P?void 0:P.type)&&(n.paddingBottom=S),V&&"discussions"===(null==P?void 0:P.type)&&(n.marginBottom=void 0))),"bottomControls"===t.type&&(n.paddingBottom=void 0,n.marginBottom=void 0),"discussions"===t.type&&s&&(n.paddingBottom=void 0),"inlinePageSections"!==(null==P?void 0:P.type)&&"expandedBacklinks"!==(null==P?void 0:P.type)&&"bottomControls"!==(null==P?void 0:P.type)||(n.marginBottom=8),"editor"===t.type&&(n.marginTop=8),"views"!==t.type&&"editor"!==t.type||(n.paddingBottom=void 0,n.marginBottom=void 0),"viewsMain"===t.type&&(n.paddingBottom=void 0),u===d().S.Post&&(n.marginBottom=4,n.paddingBottom=0),[i,n]}),[b,t,o,null==P?void 0:P.type,_,I,u,j,V,w]);return(0,n.useMemo)((()=>function(e){return(0,h.jsx)(m().Pb,{className:i()({"layout-content-with-divider":B}),style:T,testId:(0,p().Z)(t),children:e})}),[t,B,T])}function k(e){let{layoutModule:t,area:o,collectionSchema:i,collectionStore:n,showDetailsPanelToggleButtonBelowTitle:l,pageMainModules:a}=e;const{isMobile:c}=(0,s().Fy)(),d=(0,r().VK)((()=>{if(!n)return!1;return!!a.find((e=>"normalizedTitleWithIcon"===e.type))&&l}),[n,a,l]);if(!n)return!1;if("properties"!==t.type&&"discussions"!==t.type&&"relationsGroup"!==t.type)return!1;if("page_main"!==o)return!0;const u=a.findIndex((e=>e.id===t.id));if(0===u||a.length<=1)return!1;const p=a[u-1];if("normalizedTitleWithIcon"!==(null==p?void 0:p.type))return!0;if("relationsGroup"===t.type&&d)return!0;if("properties"===t.type&&d&&!c)return!0;const g=x({collectionSchema:i,module:p});return("properties"!==t.type||!c||!g)&&g}function w(e){let{collectionStore:t,modulesByArea:o}=e;return!((t.getNormalizedPropertyGroups({publicPageDataFallbackEnabled:!0})||[]).length>0)&&0===(0,u().t5)({collectionStore:t,modulesByArea:o}).length}},725858:(e,t,o)=>{o.d(t,{bM:()=>m});var i=o(667294),n=()=>o(142735),s=()=>o(58836),r=()=>o(386790),l=()=>o(191586),a=()=>o(121700),c=()=>o(763058),d=()=>o(311562),u=()=>o(27475),p=o(785893);function g(e){const{state:t,store:o,disabled:i,blockPropertyValueOverlayStore:s}=e,l=(0,n().VK)((()=>o.isNonEditableState()),[o]);return(0,p.jsx)(r().Z,{propertyIds:t.sectionPropertyIds,store:o,collectionStore:t.collectionStore,format:t.format,disabled:i,locked:l,blockPropertyValueOverlayStore:s})}function m(e){const{store:t,context:o,disabled:r,inlinePropertyIDs:m,wrapper:h}=e,S=(0,n().VK)((()=>t.getAssociatedCollectionStore()),[t]),f=(0,i.useMemo)((()=>new(c().pB)),[]),y=function(e){const{collectionStore:t,format:o,sectionPropertyIds:i}=e;if(!(t&&o&&i&&i.length))return{type:"hidden"};return{type:"visible",collectionStore:t,format:o,sectionPropertyIds:i}}({collectionStore:S,format:(0,n().VK)((()=>(0,l().y6)(t)),[t]),sectionPropertyIds:m});if("hidden"===y.type)return null;const v=o===d().S.PeekView;return h((0,p.jsx)(s().p,{allowSelectionWithin:!0,children:(0,p.jsx)(g,{topBorder:!0,state:y,store:t,disabled:r,blockPropertyValueOverlayStore:v?u().Z:a().Z,isInPeekRenderer:v,pagePropertiesStore:f})}))}},279080:(e,t,o)=>{o.d(t,{D:()=>m,p:()=>h});o(667294);var i=()=>o(219727),n=()=>o(142735),s=()=>o(492522),r=()=>o(58836),l=()=>o(628370),a=()=>o(75751),c=()=>o(247724),d=()=>o(191586),u=()=>o(309797),p=()=>o(857719),g=o(785893);function m(e){const{store:t,isEditable:o,isInPeek:s,paddingX:d,pageCoverHeight:m,onMouseEnter:S,onMouseLeave:f}=e,y=(0,i().O7)(),v=(0,n().VK)((()=>t.isCollectionView()?"20vh":m),[m,t]),x=(0,n().VK)((()=>y.WindowSizeStore.getSafePaddingLeftCSS(d)),[y.WindowSizeStore,d]),b=(0,n().VK)((()=>y.WindowSizeStore.getSafePaddingRightCSS(d)),[y.WindowSizeStore,d]),k=(0,n().VK)((()=>y.WindowSizeStore.state.width),[y.WindowSizeStore]),w=(0,u().WJ)(t),C=(0,n().VK)((()=>h(t,y)),[y,t]);return(0,g.jsx)(p().Nx,{style:{isolation:"isolate"},children:(0,g.jsx)(l().Z,{tag:r().p,animate:{translateX:w},allowSelectionWithin:!1,className:s?c().JiT:void 0,style:C,onMouseEnter:S,onMouseLeave:f,children:(0,g.jsx)(a().Z,{height:v,store:t,disabled:!o,paddingLeft:x,paddingRight:b,proxyWidth:k})})})}function h(e,t){const o=(0,d().kC)(e,t);return o.zIndex=s().ag,o}},293936:(e,t,o)=>{o.d(t,{s:()=>Z});o(267602),o(241792),o(228244);var i=o(667294),n=()=>o(219727),s=()=>o(142735),r=()=>o(846550),l=()=>o(788860),a=()=>o(825270),c=()=>o(444851),d=()=>o(802911),u=()=>o(58836),p=()=>o(1910),g=()=>o(251932),m=()=>o(259878),h=()=>o(141735),S=()=>o(247724),f=()=>o(677559),y=()=>o(954593),v=()=>o(309797),x=()=>o(452220),b=()=>o(81954),k=()=>o(874018),w=()=>o(3391),C=o(785893);function V(e){const{store:t,discussionStore:o,isFirst:s,isOnly:r,discussionLocation:l,collapsed:a}=e,c=(0,n().O7)(),d=(0,i.useMemo)((()=>new(w().Z)(c,(0,b().J)(t.pointer.spaceId))),[c,t.pointer.spaceId]),{value:u}=(0,f().XJ)(k().commentsDependency);return u?(0,C.jsx)(k().gU,{store:o,format:u.discussionHelpers.DiscussionFormat.Page,isFirst:s,isOnly:r,collapsed:a,showResolveButtonByDefaultIfPossible:!1,blockStore:t,discussionInputStore:d,..."post_discussion"===l?{discussionLocation:"post_discussion",pageVisitStore:e.pageVisitStore,presenceStore:e.presenceStore}:{discussionLocation:"page_discussion"}},o.id):null}o(470928);var M=()=>o(492788),P=()=>o(98642),_=()=>o(990966),j=()=>o(269299),I=()=>o(396651),B=()=>o(244826),T=()=>o(585742),K=()=>o(311562);function L(e){const{store:t}=e,o=(0,n().O7)(),r=(0,i.useMemo)((()=>new(w().Z)(o,(0,b().J)(t.pointer.spaceId))),[o,t.pointer.spaceId]),l=(0,i.useRef)(null),a=(0,i.useCallback)((()=>{_().clear({environment:o})}),[o]),c=function(e){const{environment:t,discussionInputStore:o,store:n}=e,r=(0,s().qz)(void 0,K().Z),l=(0,i.useCallback)((e=>{var o;const i=n.id;null===(o=t.PageDetailsStore)||void 0===o||o.setToggleState({environment:t,type:"discussion",id:i},e)}),[t,n.id]);return(0,i.useCallback)((async()=>{const e=o.state.textStore.getValue(),i=o.state.files,s=await h().F.formulas.load();if(e&&e.length>0||i.length>0){const{performResult:a}=j().createAndCommit({userAction:"PageDiscussion.useSubmitNewDiscussion",environment:t,canUndo:!0,perform:o=>(0,I().i)({environment:t,type:"default",blockStore:n,commentTextValue:e||[],transaction:o,files:i,formulasModule:s}),skipUpdatingEditedMetadata:!0});if(o.reset(),r.setState({...r.state,forceDiscussionOpen:!1}),l(!0),a&&!t.device.isMobile){await M().default.afterNextFlush();const e=B().Z.find((e=>e.getStore().id===a.id));e&&_().setSelectionAtEnd({store:e.getInputStore().state.textStore})}}}),[o,t,r,l,n])}({environment:o,discussionInputStore:r,store:t});(0,P().c)(T().W,(()=>({getNode:()=>l.current,getBlockStore:()=>t,getInputStore:()=>r})),[r]);const{value:d}=(0,f().XJ)(k().commentsDependency);return d?(0,C.jsx)("div",{ref:l,children:(0,C.jsx)(k().rI,{showAvatar:!0,parentStore:t,onSubmit:c,onCancel:a,discussionInputStore:r,discussionFormat:d.discussionHelpers.DiscussionFormat.Page,isMobileSlideUpMenu:!1,shouldSaveUnsentComments:!0,canDrop:!0,blockStore:t})}):null}function E(e){const{store:t,showDiscussionInput:o,unresolvedDiscussionStores:i,discussionLocation:d,collapsed:u}=e,g=(0,n().O7)(),x=(0,l().YB)(),{value:b}=(0,f().XJ)(h().F.formulas),k=(0,r().yK)((e=>({pageViewDiscussion:{width:"100%",margin:"0 auto"},newPageDiscussionWrapper:{paddingTop:i.length>0?12:-1*c().n4/2,paddingBottom:12,paddingRight:4,..."post_discussion"===d&&{padding:0}},emptyPostDiscussion:{display:"flex",justifyContent:"space-between",paddingBottom:12},reactionButton:{height:26,width:40,paddingLeft:10,paddingRight:10,borderRadius:13,borderWidth:1,borderColor:e.stroke.secondary,borderStyle:"solid"},reactionIcon:{width:22,height:22,fill:e.icon.secondary,marginTop:-.5,marginRight:1}})),[i.length,d]),w=(0,s().VK)((()=>i.some((e=>e.getReactions().length))),[i]);return(0,C.jsxs)("div",{style:k.pageViewDiscussion,onMouseDown:v().m4,onClick:v().h9,className:S().KA2,children:["post_discussion"===d&&!w&&(0,C.jsxs)("div",{style:k.emptyPostDiscussion,children:[(0,C.jsx)(p().Z,{ariaLabel:x.formatMessage({defaultMessage:"Add reaction",id:"ReactionBar.newReaction.ariaLabel"}),hasBackground:!1,showShadow:!1,style:k.reactionButton,icon:()=>(0,y().V)(k.reactionIcon),onClick:e=>{(0,a().t)({environment:g,blockStore:t,rect:e.currentTarget.getBoundingClientRect(),skipOpeningDiscussionOnSubmit:!0,formulasModule:b})}}),e.pageVisitStore&&e.presenceStore&&(0,C.jsx)(m().W4,{pageVisitStore:e.pageVisitStore,presenceStore:e.presenceStore,rootStore:t,maxUsers:5,isShowingInPostFeed:!0})]}),i.map(((o,i,n)=>(0,C.jsx)(V,{store:t,discussionStore:o,isFirst:0===i,isOnly:1===n.length,collapsed:u,..."post_discussion"===d?{discussionLocation:"post_discussion",pageVisitStore:e.pageVisitStore,presenceStore:e.presenceStore}:{discussionLocation:d}},o.id))),o&&(0,C.jsx)("div",{style:k.newPageDiscussionWrapper,children:(0,C.jsx)(L,{store:t})})]})}function Z(e){const{store:t,wrapper:o,discussionLocation:i,collapsed:n,showDefaultTitle:s,pageDiscussionsRenderState:r}=e;return(0,C.jsx)(d().Z,{name:"PageDiscussionsWrapper",children:"hidden"!==r.type&&o((0,C.jsxs)(g().Ht,{gap:2,children:[s&&(0,C.jsx)(x().$,{store:t,children:(0,C.jsx)(l()._H,{id:"pageLayout.discussionsModule.title",defaultMessage:"Comments"})}),(0,C.jsx)(u().p,{allowSelectionWithin:!0,children:(0,C.jsx)(E,{...r,withLegacyInputPadding:!0,store:t,collapsed:n,..."post_discussion"===i?{discussionLocation:"post_discussion",pageVisitStore:e.pageVisitStore,presenceStore:e.presenceStore}:{discussionLocation:"page_discussion"}})})]}))})}},618827:(e,t,o)=>{o.d(t,{H:()=>h});var i=o(667294),n=()=>o(219727),s=()=>o(142735),r=()=>o(254805),l=()=>o(191586),a=()=>o(84926),c=()=>o(311562),d=()=>o(482162),u=()=>o(309797),p=()=>o(857719),g=o(785893);const m=(0,i.forwardRef)((function(e,t){let{context:p,disabled:m,onClick:h,store:S,templatePickerMenuListStore:f}=e;const y=(0,n().O7)(),{device:v}=y,x=(0,u().Nr)(S),b=function(e,t){const o=(0,u().sD)(e,t),i=(0,u().mj)(e,t);if(o)return"horizontal";if(i)return"legacy";return"none"}(S,p),k=(0,u().Qg)(S),w=(0,u().L2)(S),C=(0,s().VK)((()=>!!m||(!!S.isNonEditableState()||!!w)),[S,m,w]),V=(0,s().VK)((()=>S.getFormat()),[S]),M=(0,s().VK)((()=>(0,l().CX)(S)),[S]),P=(0,l().OZ)(p),_=(0,o(480089).PE)(S,m),j=(0,n().MO)(),I=(0,s().VK)((()=>S.isCollectionView()),[S]),B=(0,s().VK)((()=>S.hasCover()),[S]),T=(0,s().VK)((()=>`calc(${(0,o(942226).wq)(S)&&!d().default.isSidePeekOpen()&&!d().default.isSidePeekClosingStore.state?`100vh - ${d().PeekModeOuterPadding}px*2`:"100vh"} - ${(0,o(467171).R6)(y.device.isElectronMac)}px - 66px - 48px - 140px)`),[y.device.isElectronMac,S]),K=(0,o(846550).yK)((e=>{const t=V.page_font||r().rk,i=r().VN[t],n=r().n5[t]||1.5;let s;if(v.isMobile)s=v.isAndroid?r().pE:r().tb;else if(p===c().S.Post)s=14;else{s=V.page_small_text?r().Pc[t]||r().ZY:r().TE[t]||r().jo}let a={},d={paddingTop:8};const u=(0,l().OZ)(p);if(!(M&&u&&"none"===b&&!x)){if(M){const e=29;d={...d,paddingBottom:p===c().S.Post?e:"15vh"}}else d={...d,paddingBottom:0};a={...d,paddingLeft:0,paddingRight:0}}let g={};u&&(g={minHeight:240,zIndex:1});let m={};p===c().S.InAppTemplatePreview&&(m={margin:"0 auto"});let h={};if(j&&!I&&_&&!B){const e=132,t=(0,r().Wc)(p,y);h={minHeight:`calc(100vh - ${o(751052).g5+e-t}px)`}}return{content:{flexShrink:0,flexGrow:1,maxWidth:"100%",display:"flex",alignItems:"flex-start",flexDirection:"column",fontFamily:r().sL[t],fontSize:s,letterSpacing:i?`${i}em`:void 0,lineHeight:n,width:"100%",zIndex:o(492522).ke,...a,...g,...m,...h},emptyDroppableStyle:{width:"100%"},templatePicker:{position:"absolute",top:T,width:"100%",pointerEvents:"none"}}}),[B,I,j,M,_,p,v.isAndroid,v.isMobile,y,V.page_font,V.page_small_text,x,b,T]),L=(0,o(238936).D)({environment:y,pageFont:V.page_font,pageSmallText:V.page_small_text}),[E,Z]=function(e,t){const n=(0,i.useRef)(null),r=(0,o(794623).Z)(n,e),l=(0,o(965865).yU)(n),c=(0,i.useCallback)((e=>{a().Z.setWidth(e.width,t)}),[t]);(0,i.useEffect)((()=>{l&&c(l)}),[c,l]);const d=(0,s().VK)((()=>a().Z.getWidth(t)),[t]);return[r,d]}(t,P);return(0,g.jsxs)(o(802911).Z,{name:"PageEditor",children:[(0,g.jsxs)("div",{className:L,onClick:h,style:K.content,ref:E,children:[!k&&(0,g.jsx)(o(98275).Z,{store:S.getContentStore(),emptyDroppableStyle:K.emptyDroppableStyle,disabled:C}),x&&(0,g.jsx)(o(312578).Z,{}),f&&"legacy"===b&&(0,g.jsx)(o(607526).Z,{store:S,menuListStore:f})]}),"horizontal"===b&&(0,g.jsx)("div",{style:K.templatePicker,children:(0,g.jsx)(o(544903).ri,{store:S,context:p,menuListStore:f,editorWidth:Z})})]})}));const h=(0,i.forwardRef)((function(e,t){const{context:r,disabled:a,handlePlaceholderWrapClick:d,pageBlockStore:u,pathToBlockId:h,templatePickerMenuListStore:S,pageViewBlockAccessor:f,editorWrapper:y}=e,v=(0,n().O7)(),x=(0,s().VK)((()=>h?(0,o(251932).Vg)({environment:v,pageBlockStore:u,pathToBlockId:h}):u),[v,u,h]),b=(0,s().VK)((()=>(0,o(954452).fg)(v,u)),[v,u]),k=(0,s().VK)((()=>(0,l().CX)(u)),[u]),w=(0,s().VK)((()=>(0,o(95718).UV)(u)),[u]),C=r===c().S.Post,V=v.device.isMobile||C?0:5,M=(0,s().VK)((()=>o(819828).Z.state.isHovered),[]),P=(0,s().VK)((()=>"floating_right"===o(749826).default.getEligibleGroup({experimentId:"floating_table_of_contents_variants",defaultGroup:"control"})),[]),_=(0,s().VK)((()=>P&&M),[P,M]),j=y||(e=>(0,g.jsx)(p().Pb,{style:{...C?{minHeight:void 0,pointerEvents:"auto"}:{minHeight:170},paddingTop:V},children:e})),I=(0,i.useMemo)((()=>w?async()=>{const e=await o(650996).assistantDependency.load();await e.assistantEditActions.saveAssistantCreatedPage(v)}:k?d:void 0),[d,k,w,v]);return(0,g.jsxs)(g.Fragment,{children:[j((0,g.jsx)(m,{store:x,disabled:a,context:r,templatePickerMenuListStore:S,onClick:I,ref:t})),b&&f?(0,g.jsx)(p().Vw,{children:(0,g.jsx)(o(203119).Z,{pageBlockStore:u,isVisible:!_,context:r,pageViewBlockAccessor:f,isCollapsedAnchor:!0})}):null]})}))},32313:(e,t,o)=>{o.d(t,{Z:()=>d});var i=o(667294),n=()=>o(142735),s=()=>o(156642),r=()=>o(943620),l=()=>o(205228),a=()=>o(718959),c=o(785893);const d=i.memo((function(e){let{store:t,isEditable:d,hasCover:u,isInSidePeek:p,openMenuOnMount:g,openMenuOnMountCallback:m,isInPageLayoutModuleEditor:h}=e;const S=(0,o(219727).O7)(),f=(0,o(788860).YB)(),y=(0,n().VK)((()=>t.hasIcon()),[t]),v=(0,n().VK)((()=>{if(y)return t.getIcon()}),[y,t]),x=(0,n().VK)((()=>t.getIconStore()),[t]),b=(0,n().VK)((()=>t.getType()),[t]),k=(0,n().VK)((()=>{if(t.isCollectionView()){const e=t.getCollectionViewSourceCollectionStore();return!!e&&e.isSyncedCollection()}return t.isType(s().Ti.externalObjectInstancePage)}),[t]),w=(0,n().VK)((()=>t.isType(s().Ti.form)),[t]),C=(0,n().VK)((()=>t.isCollectionView()||p),[t,p]),V=(0,n().VK)((()=>C?36:k?74:140),[C,k]),M=(0,n().VK)((()=>t.isEmptyPage()),[t]),P=(0,n().VK)((()=>o(279386).MT.getMode(t)),[t]),_=(0,i.useCallback)((async e=>{const i=t.getIconStore();if(i){const t=(0,o(225339).Wv)({source:e,secureFileConfigRootpath:l().default.secureFileConfig.rootPath,secureFileConfigHostname:l().default.secureFileConfig.hostname}),n=t?t.link:e,{serverCommitResult:s}=o(269299).createAndCommit({userAction:"PageIcon.handleChange",environment:S,canUndo:!0,perform:e=>{o(636340).sO({store:i,value:n,transaction:e})}});await s}}),[S,t]);if(!y)return null;const j={position:"relative",zIndex:1,marginLeft:3,marginBottom:S.device.isMobile?8:0,marginTop:4,pointerEvents:"auto"};let I;C?j.marginRight=6:j.marginTop=u&&!h?-80:S.device.isMobile||h?0:(0,a().CP)(S)-(w?32:0),I=C?{marginTop:(S.device.isMobile,4),marginRight:8}:{marginTop:u&&!h?-42:S.device.isMobile||h?0:(0,a().CP)(S)-(w?32:0)};const B=C?36:78;if(d&&"suggest"!==P){const e=null==x?void 0:x.table;return(0,c.jsx)(r().Z,{disabled:!1,bucket:"secure",icon:v,store:t,isEmptyPage:M,onChange:_,size:V,emojiSize:B,style:j,emojiStyle:I,largeIcon:!0,openMenuOnMount:g,openMenuOnMountCallback:m,iconLoggingData:{recordTable:e,source:"page_header",block_type:b,collection_id:"collection"===e?null==x?void 0:x.id:void 0},label:f.formatMessage({id:"layout.pageIcon.label",defaultMessage:"Change page icon"}),testId:"pageIcon"})}return(0,c.jsx)(r().Z,{disabled:!0,icon:v,isEmptyPage:M,size:V,emojiSize:B,style:j,emojiStyle:I,largeIcon:!0,label:f.formatMessage({id:"layout.pageIcon.disabledLabel",defaultMessage:"Page icon"}),testId:"pageIcon"})}))},965631:(e,t,o)=>{o.d(t,{_:()=>M});var i=o(667294),n=()=>o(219727),s=()=>o(142735),r=()=>o(639708),l=()=>o(887430),a=()=>o(874018),c=()=>o(768826),d=()=>o(356321),u=()=>o(58836),p=()=>o(251932),g=()=>o(663221),m=()=>o(307369),h=()=>o(480089),S=()=>o(704713),f=()=>o(121700),y=()=>o(763058),v=()=>o(311562),x=()=>o(27475),b=()=>o(231272),k=()=>o(291848),w=()=>o(206658),C=()=>o(70191),V=o(785893);function M(e){const{store:t,context:o,propertyId:M,disabled:P,wrapper:_,pageModule:j,stackPropertyLabelAndValue:I}=e,B=(0,h().PE)(t,P),T=(0,s().VK)((()=>t.getAssociatedCollectionStore()),[t]),K=(0,s().VK)((()=>null==T?void 0:T.getParentStore()),[T]),L=(0,s().VK)((()=>{if(t.isCollectionViewPageWithContent())return{type:"hidden"};const e=t.getAssociatedCollectionStore();return e?{type:"visible",store:t,collectionStore:e,propertyId:M}:{type:"hidden"}}),[M,t]),E=(0,s().VK)((()=>null==T?void 0:T.getSchema()),[T]),Z=(0,s().VK)((()=>null==T?void 0:T.getFormat()),[T]),D=(0,s().VK)((()=>{var e;return null===(e=L.collectionStore)||void 0===e?void 0:e.getSchema()[M]}),[L.collectionStore,M]),H=(0,s().VK)((()=>t.isNonEditableState()),[t]),A=(0,i.useMemo)((()=>new(y().pB)),[]),F=i.useRef(null),R=(0,s().VK)((()=>!(!T||!K||"block"!==K.table)&&(0,l().eD)({collectionStore:T,collectionViewBlockStore:K,checkNavigableAncestorLocked:!1})),[T,K]),O=o===v().S.PeekView,W=(0,r().f)(j)?j:void 0,{isPropertyInPageDetails:z}=(0,C().d0)({store:t,propertyId:M}),{isMobile:N}=(0,n().O7)().device,G=(0,S().X)(F,50),J=(0,w().E)(t),U=(0,s().VK)((()=>{var e;return"hide"===(null==J||null===(e=J.getFormat())||void 0===e?void 0:e.property_icons_visibility)}),[J]),q=(0,k().w)();if(!D)return null;if("hidden"===L.type)return null;if(!T||!E||!Z)return null;const Y=!q&&"relation"!==D.type,$=!q,X=(0,b().gM)({isMobile:N,stackPropertyLabelAndValue:I,isPropertyInPageDetails:z}),Q=(0,V.jsx)(a().zl,{store:t,propertyId:M,style:z||N?{flexShrink:0}:{position:"absolute",left:null!=G&&G.width?G.width+4:void 0,top:0}}),ee=(0,V.jsxs)(V.Fragment,{children:[Y&&(0,V.jsxs)(p().gq,{alignItems:"center",justifyContent:z?void 0:"space-between",style:X?{width:X,flexShrink:0}:void 0,children:[(0,V.jsx)(g().Z,{schema:E,format:Z,hideIcon:U,hideDragHandle:!0,property:M,blockStore:t,collectionStore:T,pagePropertiesStore:A,disabled:P,locked:H,canConfigureCollection:R,isInPeekRenderer:O,styleVariants:{width:(0,b().Gm)({stackPropertyLabelAndValue:I}),height:I?{variant:"small"}:{variant:"medium"},size:"small",fontWeight:"medium"},layoutModule:W,hideDuplicatePropertyOption:!0}),$?Q:null]}),(0,V.jsx)(m().Z,{store:t,analyticsName:"page_property",children:(0,V.jsx)(c().m,{store:t,property:M,disabled:!B,locked:H,format:d().C.PropertyModule,tableWrap:!0,blockPropertyValueOverlayStore:O?x().Z:f().Z,collectionStore:L.collectionStore,isInPeekRenderer:O,propertyModule:W},M)})]});return _((0,V.jsx)(u().p,{allowSelectionWithin:!0,style:{position:"relative",width:"100%"},children:I?(0,V.jsx)(p().Ht,{ref:F,children:ee}):(0,V.jsx)(p().gq,{ref:F,style:{alignItems:"flex-start"},children:ee})}))}},21535:(e,t,o)=>{o.d(t,{V:()=>p});var i=o(667294),n=()=>o(146947),s=()=>o(219727),r=()=>o(142735),l=()=>o(494488),a=()=>o(707513),c=()=>o(311562),d=()=>o(309797),u=o(785893);const p=i.memo((function(e){let{store:t,context:p,disabled:m,isInSidePeek:h,extraStyles:S,titlePlaceholder:f,collectionContextStore:y,shouldShowTemplatePicker:v,onTitleChange:x,onTitleEditText:b,onTitleEsc:k,onTitleUntab:w,onTitleTab:C,onMoveUp:V,onMoveDown:M,hideText:P,disableEnter:_}=e;const j=(0,s().O7)(),I=(0,s().Fy)(),B=(0,o(657320).l)(),T=(0,r().VK)((()=>t.getTitleStore()),[t]),K=(0,r().VK)((()=>{if(t.isCollectionView()){const e=t.getCollectionViewSourceCollectionStore();return!!e&&e.isSyncedCollection()}return t.isType(o(156642).Ti.externalObjectInstancePage)}),[t]),L=(0,d().L2)(t),E=(0,r().VK)((()=>{if(m)return!1;if(o(764189).n.state)return!1;const e=B&&B.publicEditModeStore.state;return!(0,o(122479).Ix)(e)&&t.canEditCollection()}),[m,B,t]),Z=(0,r().VK)((()=>{if(!t.isCollectionView())return!1;const e=t.getCollectionViewSourceCollectionStore();return!!e&&(0,o(569427).OY)(e.getValue())}),[t]),D=(0,r().VK)((()=>{const e=t.getModel();return f??(null==e?void 0:e.getEmptyTitlePlaceholder({getRecordModel:t.getRecordModel,userTimeZone:(0,o(998411).r)(),intl:o(527278).Z.getIntl()}))}),[t,f]),H=!j.device.isMobile&&h,A=(0,r().VK)((()=>E&&!t.isNonEditableState()&&!K&&!L&&!(0,o(772529).Kj)(t.id)&&!("suggest"===o(279386).MT.getMode(t))),[E,K,L,t]),F=(0,r().VK)((()=>t.isEmptyPage()),[t]),R=(0,r().VK)((()=>t.isTemplate()),[t]),O=(0,r().VK)((()=>t.getAssociatedCollectionTemplateStores()),[t]),W=(0,r().VK)((()=>t.getSyncedUri()),[t]),z=function(e){const{store:t,isInSidePeek:i,context:d,extraStyles:u}=e,p=(0,s().O7)(),g=(0,r().VK)((()=>t.getFormat()),[t]),m=(0,r().VK)((()=>t.isCollectionView()),[t]),h=(0,r().VK)((()=>t.isExternalObjectInstancePageBlockStore()),[t]);return(0,o(846550).yK)((e=>{const t=!!g.page_small_text||p.device.isMobile||m||i;let o;o=p.device.isMobile?28:t?32:d===c().S.Post?26:40;const s=d===c().S.Post?a().Ue.semibold:a().Ue.bold,r=p.device.isMobile?"0px":`${l().ZD}px`;return{title:{...l().ZD,paddingBottom:r,width:h?"fit-content":"100%",fontSize:"1em",fontWeight:"inherit",margin:0,...d===c().S.Post&&{fontSize:24}},selectable:{color:e.regularTextColor,fontWeight:s,lineHeight:1.2,fontSize:o,fontFamily:a().pe({pageFont:g.page_font,locale:n().locale}),cursor:"text",display:"flex",alignItems:"center",textRendering:p.device.isSafari?"optimizeSpeed":void 0,...u},link:{width:16,fill:e.mediumIconColor},placeholder:{...l().ZD,paddingBottom:r,WebkitTextFillColor:e.pageTitlePlaceholderTextColor,cursor:"text",...d===c().S.Post&&{color:e.text.tertiary,WebkitTextFillColor:e.text.tertiary}}}}),[p.device.isMobile,p.device.isSafari,u,g.page_font,g.page_small_text,m,h,i,d])}({store:t,isInSidePeek:h,context:p,extraStyles:S}),N=(0,r().VK)((()=>t.isExternalObjectInstancePageBlockStore()),[t]),G=(0,r().VK)((()=>t.isExternalCollectionBlockStore()?t:void 0),[t]),J=(0,r().VK)((()=>(null==G?void 0:G.canEdit())??!1),[G]),U=(0,r().VK)((()=>W?(0,o(417746).pI)(W,t.pointer.spaceId):void 0),[t.pointer.spaceId,W]),q=(0,r().VK)((()=>o(524434).KR.shouldEnablePageTitleDiffs(I)),[I]),Y=O&&0===O.length,$=(0,d().sD)(t,p),X=(0,r().VK)((()=>!!_||!$&&(!(!v||R||Y||j.device.isMobile)&&F)),[$,_,v,R,Y,j.device.isMobile,F]),Q=(0,i.useRef)(null);if(Z)return null;if(!T)return null;const ee=o(826955).G.createChildStore(T,t.pointer),te=j.device.isIOS||j.device.isSafari,oe=(0,u.jsx)(o(21062).N,{step:"create_page_start_with_title",showSidebarOverlays:!1,onNextButtonClick:()=>{t&&o(269299).createAndCommit({userAction:"TourTutorial.createEmptyTextBlock",environment:j,canUndo:!0,perform:e=>{o(94912).ls({environment:j,store:t,transaction:e})}})},children:P?(0,u.jsx)(u.Fragment,{}):(0,u.jsx)(o(345837).Z,{tagName:"h1",style:z.title,store:T,placeholderStyle:z.placeholder,disabled:!A,placeholder:D,disableSlashCommands:!0,disableSelectAllBlocks:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!q,disableMobileActionBar:!1,disableShiftEnter:!0,disableEmbedMenu:!0,onEsc:k,onUntab:w,onTab:C,onMoveDown:M,onMoveUp:V,disableUpDownArrows:!(!v||R||Y||j.device.isMobile)&&F,disableEnter:X,onChange:x,disableHorizontalEdgeScroll:!0,pasteBehavior:"block",trackEditsToUserFlow:"user_flow_edit_page_title",inPageFind:o(12512).B3.block_match},T.id)});return(0,u.jsxs)("div",{style:H?{flex:1}:void 0,ref:Q,children:[(0,u.jsxs)(o(307369).Z,{canSelect:!1,canDrag:!1,canEditText:A,onEditText:b,store:ee,style:z.selectable,analyticsName:"page_content",shouldShowDropZone:!0,children:[te?(0,u.jsx)(o(58836).p,{allowSelectionWithin:!0,style:{width:"100%",maxWidth:"100%"},children:oe}):oe,(0,u.jsx)(o(63562).BZ,{origin:Q??void 0}),N&&(0,u.jsx)(o(654133).Z,{placement:o(998901).Placement.Bottom,renderTooltip:e=>(0,u.jsx)(o(788860)._H,{...e,defaultMessage:"Link to original url",description:"Link to the original source of the data.",id:"PageTitle.syncedBlock.original"}),render:e=>(0,u.jsx)(o(729775).Z,{href:U,ignoreLocalHoverState:!0,hovered:!1,children:(0,u.jsx)(o(1910).Z,{ariaLabel:"Link",...e,icon:()=>(0,o(599631).N)(z.link),style:{marginLeft:4},onClick:()=>{U&&o(752127).D({url:U,environment:j})}})})}),G&&!j.device.isMobile&&(0,u.jsx)(o(989560).Z,{store:G,canEdit:J,buttonStyle:{fontWeight:"normal",margin:0}})]}),(0,u.jsx)("div",{style:{marginLeft:4},children:(0,u.jsx)(g,{store:t,collectionContextStore:y})})]})}));function g(e){const{store:t,collectionContextStore:i}=e,n=(0,r().VK)((()=>t.isCollectionView()),[t]),s=(0,r().VK)((()=>t.getCollectionViewSourceCollectionStore()),[t]);return n&&i&&s?(0,u.jsx)(o(160740).Z,{collectionStore:s,collectionContextStore:i}):null}},780814:(e,t,o)=>{o.d(t,{J:()=>K});var i=o(667294),n=()=>o(219727),s=()=>o(474788),r=()=>o(142735),l=()=>o(572680),a=()=>o(955620),c=()=>o(650996),d=()=>o(58836),u=()=>o(989560),p=()=>o(986286),g=()=>o(247724),m=()=>o(949842),h=()=>o(191586),S=()=>o(942226),f=()=>o(148126),y=()=>o(772084),v=()=>o(95718),x=()=>o(482162),b=()=>o(70191),k=()=>o(309797),w=()=>o(864060),C=()=>o(45830),V=()=>o(494630),M=()=>o(857719),P=o(785893);function _(e){let{onMouseEnter:t,onMouseLeave:o,headerControls:i}=e;return(0,P.jsx)("div",{onMouseEnter:t,onMouseLeave:o,children:i})}var j=()=>o(32313),I=()=>o(133049),B=()=>o(21535);const T=0;function K(e){const{store:t,hasCover:o,headerFocusStore:K,headerControls:L,isEditable:E,openMenuOnMount:Z,openMenuOnMountCallback:D,pageViewBlockStore:H,discussionInputStore:A,handleHeaderMouseEnter:F,handleHeaderMouseLeave:R,hideTitleIfEmpty:O,isInPageLayoutModuleEditor:W=!1,layoutModule:z,disabled:N,...G}=e,J=(0,n().O7)(),{WindowSizeStore:U}=J,{isMobile:q,isAndroid:Y}=(0,n().Fy)(),[$,X]=(0,i.useState)((()=>!!Y));(0,i.useEffect)((()=>{(async()=>{if((0,f().Sr)(J)){const e=J.RouterStore.getState();if((0,l().FK)(e.route)){await t.load();const e=(0,y().gR)(t),o=null==e?void 0:e.getSiteStore();await(null==o?void 0:o.load());const i=null==o?void 0:o.getSettings(),n=null==i?void 0:i.embedSettings;return void X(Boolean(!(null!=n&&n.hideTitle)))}}X(!0)})()}),[J,t]);const Q=(0,r().VK)((()=>(0,S().wq)(t)),[t]),ee=(0,r().VK)((()=>Q&&(x().default.isSidePeekOpen()||x().default.isSidePeekClosingStore.state)),[Q]),te=q&&!o,oe=!q&&G.isInSidePeek,ie=(0,r().VK)((()=>t.isExternalObjectInstancePageBlockStore()&&t.hasError()?t:null),[t]),ne=(0,r().VK)((()=>t.canEdit()),[t]),se=(0,r().VK)((()=>U.getSafePaddingLeftCSS(T)),[U]),re=(0,r().VK)((()=>U.getSafePaddingRightCSS(T)),[U]),le=(0,r().VK)((()=>(0,h().kC)(t,J)),[t,J]),ae=(0,k().L2)(t),ce=(0,i.useCallback)((e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,s().E)(t)&&K.setState(!0)}),[K]),de=(0,i.useCallback)((()=>{K.setState(!1)}),[K]),ue=(0,P.jsx)("div",{className:Q?g().JiT:void 0,style:{display:"flow-root",pointerEvents:"auto"},children:(0,P.jsx)(j().Z,{store:t,isEditable:E,hasCover:o,isInSidePeek:G.isInSidePeek,openMenuOnMount:Z,openMenuOnMountCallback:D,isInPageLayoutModuleEditor:W})}),pe=(0,r().VK)((()=>{var e;return(0,a().PgY)(null===(e=t.getTitleStore())||void 0===e?void 0:e.getValue())}),[t]),ge=(0,P.jsx)(B().V,{store:t,disabled:N,hideText:O&&pe||!$,...G}),me=(0,r().VK)((()=>t.getAssociatedCollectionStore()),[t]),{context:he}=G,Se=(0,r().VK)((()=>!(!me||!z)&&(0,C().$)({collectionStore:me,module:z,isMobile:q})),[me,q,z]),fe=(0,r().VK)((()=>null==me?void 0:me.getSchema()),[me]),ye=fe&&z?(0,b().zD)({collectionSchema:fe,module:z}):void 0,ve=i.useMemo((()=>{const e={...Boolean(null==ye?void 0:ye.length)&&(q?{paddingBottom:20}:{paddingBottom:V().Yq})};return(0,P.jsxs)(P.Fragment,{children:[me&&Se&&(0,P.jsx)("div",{style:e,children:(0,P.jsx)(w().Z,{collectionStore:me,pageViewBlockContext:he})}),Boolean(null==ye?void 0:ye.length)&&(0,P.jsx)("div",{style:{paddingTop:q&&!Se?V().Yq:void 0,marginLeft:-2},children:(0,P.jsx)(I().V,{context:he,disabled:N,store:t,variant:"pinned",layoutModule:z,propertyIds:ye,wrapper:e=>(0,P.jsx)(M().Pb,{children:e}),customization:{disableContainerPadding:!0,disableLastRowBottomPadding:!0}})})]})}),[me,q,z,he,ye,N,Se,t]),xe=(0,r().VK)((()=>(0,v().UV)(t)),[t]);return ee?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(d().p,{allowSelectionWithin:!0,children:[(0,P.jsx)(_,{onMouseEnter:F,onMouseLeave:R,headerControls:L}),$&&ue,ge,ae&&(0,P.jsx)(p().yY,{store:t})]}),ve]}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("div",{style:le,onMouseEnter:F,onMouseLeave:R,children:(0,P.jsxs)("div",{style:{maxWidth:"100%",paddingLeft:se,width:"100%"},onClick:async e=>{if(xe){const e=await c().assistantDependency.load();await e.assistantEditActions.saveAssistantCreatedPage(J)}(0,m().ZP)({event:e,context:m().Af.PageTitleClick})},children:[(0,P.jsxs)(d().p,{onFocus:ce,onBlur:de,allowSelectionWithin:!1,style:{pointerEvents:"none"},children:[te&&L,$&&!oe&&ue,!te&&L]}),(0,P.jsx)("div",{style:{paddingRight:re},children:oe?(0,P.jsxs)("div",{style:{display:"flex",alignItems:"flex-start"},children:[$&&ue,ge,ae&&(0,P.jsx)(p().yY,{store:t})]}):ge}),ae&&(0,P.jsx)(p().yY,{store:t}),ie?(0,P.jsx)(u().Z,{store:ie,canEdit:ne}):null]})}),ve]})}},305128:(e,t,o)=>{o.d(t,{T:()=>b});o(267602),o(653476),o(241792);var i=o(667294),n=()=>o(142735),s=()=>o(846550),r=()=>o(421551),l=()=>o(532850),a=()=>o(109477),c=()=>o(305580),d=()=>o(788860),u=()=>o(58836),p=()=>o(251932),g=()=>o(386790),m=()=>o(749826),h=()=>o(121700),S=()=>o(311562),f=()=>o(27475),y=()=>o(494630),v=()=>o(452220),x=o(785893);function b(e){const{pageStore:t,disabled:o,context:b,wrapper:k,showDefaultTitle:w}=e,C=b===S().S.PeekView,{isPageLocked:V}=(0,n().VK)((()=>({isPageLocked:t.isNonEditableState()})),[t]),{collectionStore:M,collectionSchema:P,normalizedCollectionFormat:_}=(0,n().VK)((()=>{const e=t.getAssociatedCollectionStore(),o=null==e?void 0:e.getSchema(),i=null==e?void 0:e.getFormat();return{collectionStore:e,collectionSchema:o,normalizedCollectionFormat:i&&o&&(0,c().i)(i,o,void 0,a().j5.Collection)}}),[t]),j=(0,i.useCallback)((e=>{const o=null==P?void 0:P[e];if("relation"!==(null==o?void 0:o.type))return!1;const i=t.getPropertyValue(e);return 0===(0,l().j$)({relationValue:(0,l().rq)(i),propertySchema:o,getRecordModel:t.getRecordModel,includeDeleted:m().default.checkGate({gateName:"relations_show_deleted"}),includeInvalidCollection:m().default.checkGate({gateName:"relations_show_invalid_collection"}),includeNoAccess:m().default.checkGate({gateName:"relations_show_no_access"})}).length}),[P,t]),I=(0,n().VK)((()=>{if(!P||!_)return[];return(0,r().d)({format:_,schema:P,visibilityLevels:["inline"]}).filter((e=>!j(e)))}),[P,j,_]),B=(0,n().VK)((()=>{if(!P||!_)return[];return(0,r().n)({format:_,schema:P,visibilityLevels:["minimal","inline"]}).filter((e=>"minimal"===e.visibility||!("inline"!==e.visibility||!j(e.section)))).map((e=>e.section))}),[P,j,_]),T=(0,n().VK)((()=>t.canEdit()),[t]),K=(0,s().yK)((e=>({inlinePageSectionsContainer:{...B.length>0?{marginBottom:y().Kq+y().Yq+(T?-4:0)}:{}},minimalPropertiesContainer:{display:"flex",flexDirection:"row",flexWrap:"wrap"}})),[B.length,T]);return M&&P&&_&&(0!==I.length||0!==B.length)?k((0,x.jsx)(p().Ht,{gap:4,children:(0,x.jsxs)(u().p,{allowSelectionWithin:!0,children:[I.length>0&&(0,x.jsx)("div",{style:K.inlinePageSectionsContainer,children:(0,x.jsx)(g().Z,{propertyIds:I,store:t,collectionStore:M,disabled:o,locked:V,blockPropertyValueOverlayStore:C?f().Z:h().Z,format:_,type:"inline"})}),B.length>0&&(0,x.jsxs)(x.Fragment,{children:[w&&(0,x.jsx)(v().$,{store:t,style:{marginLeft:6},children:(0,x.jsx)(d()._H,{id:"pageLayout.relationsGroup.defaultTitle",defaultMessage:"Relations"})}),(0,x.jsx)("div",{style:K.minimalPropertiesContainer,children:(0,x.jsx)(g().Z,{propertyIds:B,store:t,collectionStore:M,disabled:o,locked:V,blockPropertyValueOverlayStore:C?f().Z:h().Z,format:_,type:"minimal"})})]})]})})):null}},291848:(e,t,o)=>{o.d(t,{w:()=>s});var i=()=>o(142735),n=()=>o(26796);function s(){return(0,i().VK)((()=>n().Z.state.isOpen),[])}},844650:(e,t,o)=>{o.d(t,{B:()=>r});const i={id:"pageLayoutEditor.property",defaultMessage:"Property",description:"Label for the property section in the page layout editor"},n={id:"pageLayoutEditor.titleWithIcon",defaultMessage:"Heading",description:"Label for the titleWithIcon section in the page layout editor"},s={id:"pageLayoutEditor.collectionView",defaultMessage:"Database View",description:"Label for the form submit button section in the form page layout editor"},r=(0,o(788860).vU)({cover:{id:"pageLayoutEditor.cover",defaultMessage:"Cover"},properties:{id:"pageLayoutEditor.properties",defaultMessage:"Property group"},inlinePageSections:{id:"pageLayoutEditor.inlinePageSections",defaultMessage:"Inline Page Sections"},expandedBacklinks:{id:"pageLayoutEditor.expandedBacklinks",defaultMessage:"Backlinks"},discussions:{id:"pageLayoutEditor.discussions",defaultMessage:"Page Comments"},editor:{id:"pageLayoutEditor.editor",defaultMessage:"Content"},tabs:{id:"pageLayoutEditor.tabs",defaultMessage:"Tabs"},transcript:{id:"pageLayoutEditor.transcript",defaultMessage:"Transcript"},bottomControls:{id:"pageLayoutEditor.bottomControls",defaultMessage:"Bottom Controls"},selectAModulePrompt:{id:"pageLayoutEditor.selectAModuleTitle",defaultMessage:"Select a module to configure"},deleteModuleButton:{id:"pageLayoutEditor.deleteModuleButton",defaultMessage:"Delete"},views:{id:"pageLayoutEditor.views",defaultMessage:"Views"},viewsMain:{id:"pageLayoutEditor.views",defaultMessage:"Views"},relationsGroup:{id:"pageLayoutEditor.relationsGroup",defaultMessage:"Relations group"},formTitle:{id:"pageLayoutEditor.formTitle",defaultMessage:"Form Title"},formQuestion:{id:"pageLayoutEditor.formQuestion",defaultMessage:"Form Question"},formSubmit:{id:"pageLayoutEditor.formSubmit",defaultMessage:"Form Submit"},placeholder:{id:"pageLayoutEditor.placeholder",defaultMessage:"New"},normalizedTitleWithIcon:n,titleWithIcon:n,deleted_property:i,property_number:i,property_title:i,property_person:i,property_file:i,property_text:i,property_checkbox:i,property_url:i,property_email:i,property_phone_number:i,property_created_by:i,property_last_edited_by:i,property_button:i,property_select:i,property_multi_select:i,property_status:i,property_date:i,property_created_time:i,property_last_edited_time:i,property_last_visited_time:i,property_relation:i,property_rollup:i,property_formula:i,property_auto_increment_id:i,property_location:i,property_verification:i,property:i,collectionView:s,collectionViewV2:s})},761650:(e,t,o)=>{o.d(t,{Z:()=>s});var i=()=>o(639708),n=()=>o(696459);function s(e){const t=e.type;return"properties"===t?"module__properties_"+("pinned"===e.variant?"minimal":"expanded"):"normalizedTitleWithIcon"===t||"titleWithIcon"===t?"module__title_with_icon":"cover"===t?"cover__module":"views"===t?"module__views":"editor"===t?"module__editor":"formTitle"===t?"module__formTitle":"viewsMain"===t?"module__views_main":"transcript"===t?"module__transcript":"formSubmit"===t?"module__form_submit":"discussions"===t?"module__discussion":"placeholder"===t?"module__placeholder":"formQuestion"===t?"module__formQuestion":"bottomControls"===t?"module__bottomControls":"relationsGroup"===t?"module__relationsGroup":"deleted_property"===t?"module__deleted_property":"expandedBacklinks"===t?"module__expandedBacklinks":"inlinePageSections"===t?"module__inlinePageSections":"property"===t?`module__property_${e.id}`:"collectionView"===t?"module__collectionView":"collectionViewV2"===t?"module__collectionViewV2":(0,i().Vd)(t)?`module__property_${e.id}`:void(0,n().t1)(t)}},57956:(e,t,o)=>{o.d(t,{F6:()=>d,Kr:()=>c,T7:()=>u,x:()=>p});var i=o(667294),n=()=>o(219727),s=()=>o(142735),r=()=>o(696459),l=()=>o(593515),a=()=>o(670655);function c(e){const{format:t}=e;return{backlinksConfiguredToShowAboveTitle:(0,s().VK)((()=>{const e=(0,a().pJ)(t.page_section_visibility);return"section_collapsed"===e||"always_show"===e}),[t.page_section_visibility])}}function d(e){const{store:t,format:o}=e,s=(0,n().O7)();return{backlinksVisibility:(0,a().pJ)(o.page_section_visibility),updateBacklinksVisibility:(0,i.useCallback)((e=>{const i=(0,a().AN)(e);l().W4({environment:s,pageSection:"backlinks",visibility:i,store:t,format:o})}),[s,t,o])}}function u(e){const{pageStore:t,numBacklinks:o}=e,{store:i,format:n}=(0,s().VK)((()=>{const e=t.getAssociatedCollectionStore()??t,o=e.getFormat();return{store:e,format:o}}),[t]),{backlinksVisibility:l}=d({store:i,format:n});return 0===o?"never":"always_show"===l?"always":"section_collapsed"===l?"onHover":"section_hide"===l?"never":void(0,r().t1)(l)}function p(e){return!1}},896641:(e,t,o)=>{o.d(t,{L:()=>p,S:()=>u});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(470928),o(228244);var i=o(667294),n=()=>o(219727),s=()=>o(142735),r=()=>o(667932),l=()=>o(639708),a=()=>o(887430),c=()=>o(138196),d=()=>o(494630);function u(e){const{pageStore:t,pageViewBlockStore:o,isPostContext:r,collectionStore:u,collectionSchema:g}=e,{collectionStore:m,collectionFormat:h,collectionSchema:S,canConfigureCollection:f}=(0,s().VK)((()=>{const e=u||(null==t?void 0:t.getAssociatedCollectionStore()),o=g||(null==e?void 0:e.getSchema()),i=null==e?void 0:e.getFormat(),n=e&&a().eD({collectionStore:e,collectionViewBlockStore:e.getParentBlockStore(),checkNavigableAncestorLocked:!1});return{collectionStore:e,collectionSchema:o,collectionFormat:i,canConfigureCollection:n}}),[t,u,g]),y=(0,n().O7)(),v=(0,s().VK)((()=>(0,c().Z)({environment:y,store:t,pageViewBlockStore:o})),[y,t,o]),x=p({collectionFormat:h,collectionSchema:S,layoutStore:(0,s().VK)((()=>null==m?void 0:m.getLayoutStore()),[m]),isPostContext:r,pageStoreId:null==t?void 0:t.id}),b=(0,s().VK)((()=>{const e=x.page_main.some((e=>(0,l().z1)(e)))||x.page_details.some((e=>(0,l().z1)(e)));return!(!m||!e)&&(0,d().Wd)({modulesByArea:x,collectionStore:m})}),[x,m]),k=(0,i.useMemo)((()=>{const e=new Set;return(!Boolean(m)||!f&&b)&&e.add("properties"),"hidden"===(null==v?void 0:v.type)&&e.add("discussions"),e}),[f,m,null==v?void 0:v.type,b]);return(0,i.useMemo)((()=>0===k.size?x:{...x,page_main:x.page_main.filter((e=>!k.has(e.type))),page_details:x.page_details.filter((e=>!k.has(e.type)))}),[x,k])}function p(e){const{layoutStore:t,collectionSchema:o,collectionFormat:n,isPostContext:l,pageStoreId:a}=e,c=(0,i.useRef)(a),d=(0,i.useRef)(null);return(0,s().VK)((()=>{var e;if(l)return r().KD;let i=null==t?void 0:t.getModules();const s=a&&i&&a===c.current&&0===i.page_main.length&&(null===(e=d.current)||void 0===e?void 0:e.page_main.find((e=>"editor"===e.type)));return i&&!s||(i=(0,r().x9)({collectionSchema:o,collectionFormat:n})),c.current=a,d.current=i,i}),[l,t,a,o,n])}},585742:(e,t,o)=>{o.d(t,{W:()=>n});class i extends(()=>o(442))().Z{}const n=new i},844095:(e,t,o)=>{o.d(t,{Z:()=>n});class i extends(()=>o(263184))().default{getInitialState(){return{pageMap:{}}}setStatus(e,t){const{pageMap:o}=this.state;t?o[e]=t:delete o[e],this.emit()}}const n=new i}}]);