"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[63061],{690277:(e,t,i)=>{i.d(t,{E:()=>l});var s=()=>i(142735),n=()=>i(696459),a=()=>i(239482),o=()=>i(926434),r=()=>i(876822);function l(e){let{store:t}=e;return(0,s().VK)((()=>{const e=(0,o().B)({blockId:t.id,setting:"publicAccess"});if((0,n().$K)(e))return e;const i=r().default.state.currentSpaceStore,s=(0,a().VP)(t);return s?{disabled:Boolean(s.getDisablePublicAccess()),disabledBy:"team"}:!s&&null!=i&&i.getDisablePublicAccess()?{disabled:!0,disabledBy:"space"}:{disabled:!1}}),[t])}},339858:(e,t,i)=>{i.d(t,{Z:()=>o});var s=()=>i(846550),n=()=>i(965910),a=()=>i(215791);function o(e){const{style:t}=e,i=(0,s().Fg)(),o=(0,s().yK)((e=>({notionLogo:{height:14,width:14,fill:e.icon.primary,...t}})),[t]);return"light"===i.mode?(0,n().h)(o.notionLogo):(0,a().N)(o.notionLogo)}},253579:(e,t,i)=>{i.d(t,{Z:()=>b});i(667294);var s=()=>i(219727),n=()=>i(142735),a=()=>i(846550),o=()=>i(943620),r=()=>i(251932),l=i(785893);const d=(0,i(827282).IU)("windowsControls",{viewBox:"0 0 51 9",svg:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("rect",{width:"6",height:".75",x:"1.5",y:"4.625",rx:".375"}),(0,l.jsx)("path",{d:"M22.875 1.25c-.621 0-1.125.504-1.125 1.125v5.25c0 .621.504 1.125 1.125 1.125h5.25c.621 0 1.125-.504 1.125-1.125v-5.25c0-.621-.504-1.125-1.125-1.125h-5.25Zm0 .75h5.25c.207 0 .375.168.375.375v5.25a.375.375 0 0 1-.375.375h-5.25a.375.375 0 0 1-.375-.375v-5.25c0-.207.168-.375.375-.375ZM43.566 2.162l.044-.052a.375.375 0 0 1 .478-.043l.052.043 2.36 2.36 2.36-2.36a.375.375 0 0 1 .53.53L47.03 5l2.36 2.36c.13.13.145.332.044.478l-.044.052a.375.375 0 0 1-.478.044l-.052-.044-2.36-2.36-2.36 2.36a.375.375 0 1 1-.53-.53L45.97 5l-2.36-2.36a.375.375 0 0 1-.044-.478l.044-.052-.044.052Z"})]})});var c=()=>i(663132),p=()=>i(759160),g=()=>i(339858);const h={small:4,regular:8},u={small:{height:22,paddingLeft:8,paddingRight:10},regular:{height:42,paddingTop:10,paddingLeft:20,paddingRight:20,paddingBottom:8}},m={small:{height:28,paddingLeft:8,paddingRight:12},regular:{paddingTop:12,paddingLeft:16,paddingRight:16,paddingBottom:2}};function b(e){const{isMac:t}=(0,s().Fy)();return t?(0,l.jsx)(f,{...e}):(0,l.jsx)(x,{...e})}function f(e){const{store:t,siteRootBlockStore:i,size:s,location:n,showAddressBar:o}=e,d=h[s??"regular"],c=(0,a().yK)((e=>({container:{borderTopRightRadius:6,borderTopLeftRadius:6,backgroundColor:"publish_preview"===n?e.accentColors.gray[75]:"transparent",...u[s??"regular"]},contentContainer:{flex:1}})),[n,s]),p=o&&t&&i;return(0,l.jsxs)(r().gq,{alignItems:"center",gap:d,style:c.container,children:[(0,l.jsx)(y,{size:s}),p&&(0,l.jsx)(r().gq,{justifyContent:"center",alignItems:"center",style:c.contentContainer,children:(0,l.jsx)(S,{store:t,siteRootBlockStore:i})})]})}function y(e){const{size:t}=e,i=(0,a().yK)((e=>{const i="small"===t?6:10;return{circle:{borderRadius:"50%",height:i,width:i,background:e.icon.quaternary}}}),[t]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{style:i.circle}),(0,l.jsx)("div",{style:i.circle}),(0,l.jsx)("div",{style:i.circle})]})}function x(e){const{store:t,siteRootBlockStore:i,size:s,location:n,showAddressBar:o}=e,d=h[s??"regular"],c=(0,a().yK)((e=>({container:{width:"100%",borderTopRightRadius:6,borderTopLeftRadius:6,backgroundColor:"publish_preview"===n?e.sitesPagePreviewWindowsChromeBar:"transparent",...m[s??"regular"]},buttonContainer:{paddingLeft:6,fontSize:12},windowsButtons:{paddingRight:2}})),[n,s]),p=o&&t&&i;return(0,l.jsxs)(r().gq,{alignItems:"center",justifyContent:p?"center":"flex-end",gap:d,style:c.container,children:[p&&(0,l.jsx)(S,{store:t,siteRootBlockStore:i}),(0,l.jsx)(v,{size:s,style:c.windowsButtons})]})}function v(e){const{size:t,style:i}=e,s=(0,a().yK)((e=>({icon:{height:"small"===t?9:24,width:"small"===t?51:70,color:e.icon.tertiary}})),[t]);return(0,l.jsx)("div",{style:i,children:d(s.icon)})}function S(e){const{store:t,siteRootBlockStore:i}=e,{isMac:d}=(0,s().Fy)(),{icon:h,isEmptyPage:u,publicDomainName:m}=(0,n().VK)((()=>{const e=p().Z.getState().faviconUrl;let s;const n=i.getSiteStore(),a=c().Co({spaceStore:t.getSpaceStore(),domainId:null==n?void 0:n.getDomainId()});return s=e?{pointer:i.pointer,icon:e}:t.getIcon(),{icon:s,isEmptyPage:t.isEmptyPage(),publicDomainName:a}}),[t,i]),b=(0,a().yK)((e=>({container:{paddingLeft:d?120:12,paddingRight:d?120:12,paddingTop:4,paddingBottom:4,background:e.contentBackground,borderRadius:d?16:20,border:`1px solid ${e.stroke.secondary}`,width:d?"auto":"100%",color:e.text.secondary,fontSize:12}})),[d]),f=h?(0,l.jsx)(o().Z,{disabled:!0,icon:h,isEmptyPage:u,disableShrinking:!0,size:16,emojiSize:16,style:{marginRight:4}}):(0,l.jsx)(g().Z,{});return(0,l.jsxs)(r().gq,{alignItems:"center",gap:4,style:b.container,children:[d&&f,m]})}},860675:(e,t,i)=>{i.d(t,{Z:()=>x});i(670560),i(267602),i(30005),i(667294);var s=()=>i(142735),n=()=>i(846550),a=()=>i(396136),o=()=>i(788860),r=()=>i(707513),l=()=>i(943620),d=()=>i(384241),c=()=>i(802600),p=()=>i(913813),g=()=>i(965910),h=()=>i(215791),u=()=>i(953293),m=()=>i(270820),b=()=>i(956253),f=()=>i(826955),y=i(785893);function x(e){const{spaceStore:t,keys:i,size:s,showCustomHeaderPages:a,left:o,style:r}=e,l=(0,n().yK)((e=>{const t=j(s),i=function(e){return"small"===e?10:16}(s);return{topbarContainer:{display:"flex",alignItems:"center",marginLeft:8,marginRight:12,...r},actionsContainer:{display:"flex",flexDirection:"row",gap:i,alignItems:"center"},icon:{height:t,width:t,fill:e.icon.primary},searchIcon:{height:t-2,width:t-2,fill:e.icon.primary}}}),[s,r]),d=[];return i.forEach((e=>{"duplicate"===e?d.push((0,y.jsx)("div",{children:(0,c().a)(l.icon)},"duplicate")):"comment"===e?d.push((0,y.jsx)("div",{children:(0,b().o)(l.icon)},"comment")):"edit"===e?d.push((0,y.jsx)("div",{children:(0,u().R)(l.icon)},"edit")):"more"===e?d.push((0,y.jsx)("div",{children:(0,p().O)(l.icon)},"more")):"search"===e?d.push((0,y.jsx)("div",{children:(0,m().R)(l.searchIcon)},"search")):"signUpOrLogIn"===e?d.push((0,y.jsx)(v,{size:s},"signUpOrLogIn")):t&&a&&d.push((0,y.jsx)(S,{spaceStore:t,blockId:e},e))})),(0,y.jsxs)("div",{style:l.topbarContainer,children:[o,(0,y.jsx)("div",{style:{flex:1}}),(0,y.jsx)("div",{style:l.actionsContainer,children:d})]})}function v(e){const{size:t}=e,i=(0,n().yK)((e=>{const i=j(t),s=function(e){return"small"===e?{paddingTop:2,paddingBottom:2,paddingLeft:6,paddingRight:6}:"large"===e?{paddingTop:4,paddingBottom:4,paddingLeft:10,paddingRight:10}:{paddingTop:4,paddingBottom:4,paddingLeft:8,paddingRight:8}}(t);return{signUpContainer:{display:"flex",alignItems:"center",gap:4,border:`1px solid ${e.darkDividerColor}`,borderRadius:4,fontSize:w(t),fontWeight:r().Ue.medium,whiteSpace:"nowrap",...s},icon:{height:i-2,width:i-2,fill:e.icon.primary}}}),[t]),s=(0,n().Fg)();return(0,y.jsxs)("div",{style:i.signUpContainer,children:[(0,y.jsx)(o()._H,{defaultMessage:"Made with",id:"publishSiteSettings.topbar.madeWithPreview"}),"light"===s.mode?(0,g().h)(i.icon):(0,h().N)(i.icon)]})}function S(e){const{spaceStore:t,blockId:i}=e,{store:o,icon:r,isEmptyPage:c}=(0,s().VK)((()=>{const e=f().G.createChildStore(t,{table:a().iU,id:i});return{store:e,icon:e.getIcon(),isEmptyPage:e.isEmptyPage()}}),[t,i]),p=(0,n().yK)((()=>({container:{display:"flex",alignItems:"center",gap:4},pageTitle:{fontSize:14,wordBreak:"break-word",marginRight:4}})),[]);return(0,y.jsxs)("div",{style:p.container,children:[r&&(0,y.jsx)(l().Z,{icon:r,store:o,disabled:!0,size:14,isEmptyPage:c,emojiSize:20,style:{marginRight:4}}),(0,y.jsx)(d().Z,{store:o,style:p.pageTitle,maxLength:24})]})}function j(e){return"small"===e?12:16}function w(e){return"small"===e?9:"large"===e?14:12}},701009:(e,t,i)=>{i.r(t),i.d(t,{default:()=>W});var s=i(667294),n=()=>i(219727),a=()=>i(142735),o=()=>i(846550),r=()=>i(396136),l=()=>i(349220),d=()=>i(788860),c=()=>i(707513),p=()=>i(752127),g=()=>i(663366),h=()=>i(1910),u=()=>i(661297),m=()=>i(906651),b=()=>i(654133),f=()=>i(67961),y=()=>i(148126),x=()=>i(480089),v=()=>i(690277),S=i(785893);const j=(0,i(827282).IU)("disabledGlobe",{viewBox:"0 0 27 27",svg:(0,S.jsx)("path",{d:"M13.487.885c1.77 0 3.437.338 5.002 1.015a13.216 13.216 0 0 1 4.139 2.806 13.216 13.216 0 0 1 2.806 4.139c.677 1.557 1.015 3.22 1.015 4.989 0 1.329-.199 2.607-.597 3.834a12.81 12.81 0 0 1-1.663 3.377l-2.348-2.336 2.018-.965c.288-.61.504-1.244.648-1.904a9.39 9.39 0 0 0 .216-2.006c0-1.075-.148-2.103-.445-3.085a15.528 15.528 0 0 1-2.78 1.816c-.973.499-1.98.892-3.021 1.18.177.474.35.935.52 1.384.178.44.351.855.52 1.244l-3.732-3.732.673-.039c-.27-.99-.453-1.976-.546-2.957a16.834 16.834 0 0 1-.025-2.92c.084-.974.254-1.939.508-2.895l-.127-.025A17.942 17.942 0 0 0 14.73 7.13a19.65 19.65 0 0 0-.863 3.605l-1.308-1.32c.23-1.185.555-2.336.978-3.453A21.505 21.505 0 0 1 15.1 2.726a16.891 16.891 0 0 0-.28-.026 1.558 1.558 0 0 0-.279-.025 19.794 19.794 0 0 0-3.936 4.799L9.514 6.369c.389-.66.82-1.299 1.295-1.917.474-.618.986-1.214 1.536-1.79-.88.093-1.727.288-2.54.584-.812.288-1.57.669-2.272 1.143L6.276 3.132a12.772 12.772 0 0 1 3.377-1.65 12.355 12.355 0 0 1 3.834-.597ZM23.694 9.25a11.144 11.144 0 0 0-2.31-3.339 11.096 11.096 0 0 0-3.352-2.31 14.048 14.048 0 0 0-.596 2.856 15.699 15.699 0 0 0 0 2.958c.093.982.27 1.942.533 2.882 1.05-.28 2.056-.673 3.021-1.18a14.658 14.658 0 0 0 2.704-1.867ZM13.5 26.783c-1.769 0-3.436-.338-5.002-1.015a13.258 13.258 0 0 1-4.126-2.806 13.257 13.257 0 0 1-2.806-4.126 12.466 12.466 0 0 1-1.015-5.002c0-1.329.199-2.603.596-3.821a13.258 13.258 0 0 1 1.65-3.39L4.03 7.867c-.55.872-.981 1.811-1.295 2.818a10.814 10.814 0 0 0-.457 3.149c0 .127.005.254.013.38l.025.369a19.857 19.857 0 0 0 4.063 2.653c.008-1.05.093-2.082.254-3.097.16-1.016.393-2.006.698-2.971l1.244 1.231c-.228.83-.402 1.685-.52 2.565-.11.88-.161 1.862-.153 2.945 1.6.627 3.255 1.037 4.964 1.232a19.7 19.7 0 0 1-.342-1.486c-.094-.49-.161-.99-.204-1.498l1.816 1.803a4.261 4.261 0 0 0 .203.965c.127.017.254.03.38.038.136 0 .272-.004.407-.013l1.765 1.765a11.57 11.57 0 0 1-.927.063c-.305.009-.614.013-.927.013.254.643.538 1.278.85 1.904.322.618.674 1.22 1.054 1.803a9.848 9.848 0 0 0 2.514-1.219l1.27 1.257a12.927 12.927 0 0 1-3.403 1.65 12.237 12.237 0 0 1-3.821.597ZM7.089 23a23.751 23.751 0 0 1-.432-2.006c-.11-.66-.186-1.337-.228-2.031a18.156 18.156 0 0 1-1.905-.952 22.422 22.422 0 0 1-1.802-1.155 10.839 10.839 0 0 0 1.663 3.465A11.602 11.602 0 0 0 7.089 23Zm8.29 1.892a21.73 21.73 0 0 1-1.13-2.032 19.554 19.554 0 0 1-.889-2.133 20.538 20.538 0 0 1-5.332-1.142c.076.787.203 1.566.381 2.336.186.762.406 1.494.66 2.196a11.21 11.21 0 0 0 2.133.686c.745.169 1.51.254 2.298.254.322 0 .639-.013.952-.038.313-.026.622-.068.927-.127Zm9.077 1.294L1.147 2.891a.932.932 0 0 1-.279-.686c0-.28.093-.512.28-.698a.953.953 0 0 1 .698-.292c.279 0 .512.097.698.292L25.84 24.79a.96.96 0 0 1 .28.686c0 .27-.094.503-.28.698a.926.926 0 0 1-.698.292.871.871 0 0 1-.686-.28Z"})});var w=()=>i(653457),I=()=>i(314169),C=()=>i(266184),M=()=>i(998901),k=()=>i(876822),R=()=>i(314160),B=()=>i(998470),P=()=>i(666414),L=()=>i(943620),T=()=>i(384241),A=()=>i(251932),F=()=>i(75751),_=()=>i(254805),z=()=>i(681035),Z=()=>i(253579),K=()=>i(860675);function H(e){const{store:t,containerStyles:i={},overlayWidth:s="100%"}=e,n=(0,a().VK)((()=>t.getSpaceStore()),[t]),r=(0,o().yK)((e=>({container:{display:"flex",alignSelf:"stretch",flexDirection:"column",width:"92%",marginLeft:"auto",marginRight:"auto",borderTop:`1px solid ${e.darkDividerColor}`,borderLeft:`1px solid ${e.darkDividerColor}`,borderRight:`1px solid ${e.darkDividerColor}`,borderTopRightRadius:6,borderTopLeftRadius:6,boxShadow:e.sitePublishPagePreview,...i},topbarContainer:{paddingTop:6,paddingBottom:6}})),[i]);return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{style:r.container,children:[(0,S.jsx)(Z().Z,{size:"small",location:"publish_preview"}),(0,S.jsx)(P().Z,{size:1}),(0,S.jsx)(K().Z,{spaceStore:n,keys:["search","more","signUpOrLogIn"],size:"small",left:(0,S.jsx)(U,{store:t}),style:r.topbarContainer}),(0,S.jsx)(P().Z,{size:1}),(0,S.jsx)(E,{store:t})]}),(0,S.jsx)(V,{width:s})]})}function U(e){const{store:t}=e,i=(0,a().VK)((()=>t.getIcon()),[t]),s=(0,o().yK)((e=>({container:{display:"flex",alignItems:"center",gap:4},pageTitle:{color:e.text.secondary,fontSize:9,lineHeight:1.25}})),[]);return(0,S.jsxs)("div",{style:s.container,children:[i&&(0,S.jsx)(L().Z,{disabled:!0,icon:i,isEmptyPage:!1,disableShrinking:!0,size:12,emojiSize:12,style:{marginRight:4}}),(0,S.jsx)(T().Z,{maxLength:24,store:t,style:s.pageTitle})]})}function E(e){const{store:t}=e,{isMobile:i}=(0,n().Fy)(),s=(0,a().VK)((()=>t.getFormat()),[t]),{icon:r,isEmptyPage:l,cover:d}=(0,a().VK)((()=>({icon:t.getIcon(),isEmptyPage:t.isEmptyPage(),cover:t.getCover()})),[t]),p=(0,o().yK)((e=>{const t=s.page_font||_().rk,i=_().sL[t],n=_().VN[t],a=_().n5[t]||1.5;return{pageIcon:{position:"relative",marginLeft:48,marginTop:-24,marginBottom:8},contentWrap:{color:e.text.primary,fontSize:11,marginBottom:0,width:"110%",transform:"translateX(-13px) translateY(-2px) scale(0.91)",fontFamily:i,letterSpacing:n?`${n}em`:void 0,lineHeight:a},contentEmpty:{height:48},imageCoverWrap:{marginBottom:16},contentContainer:{marginTop:!r&&d?16:8,marginLeft:32,marginRight:32,paddingLeft:16,paddingRight:16},pageTitleContainer:{verticalAlign:"top",lineHeight:1.15,...c().Yu},pageTitle:{display:"inline",fontWeight:c().Ue.semibold,color:e.text.primary,fontSize:24,fontFamily:i,letterSpacing:n?`${n}em`:void 0,lineHeight:a},pageContent:{fontFamily:i,letterSpacing:n?`${n}em`:void 0,lineHeight:a}}}),[s,r,d]),g=(0,a().VK)((()=>l||t.isCollectionView()?(0,S.jsx)("div",{style:p.contentEmpty}):(0,S.jsx)(z().S,{variant:"default",store:t,coverFormat:{type:"page_content"},coverHeight:48,contentWrapStyle:p.contentWrap,imageCoverWrapStyle:p.imageCoverWrap,emptyGalleryCoverStyle:p.contentEmpty,showEmptyGalleryCover:!0,onLoadProxiedImage:()=>{},renderAdditionalBlocks:!1})),[t,p,l]);return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(D,{store:t}),r&&(0,S.jsx)(L().Z,{disabled:!0,icon:r,isEmptyPage:l,isLarge:!0,disableShrinking:!0,size:42,emojiSize:42,largeIcon:!0,style:p.pageIcon}),(0,S.jsxs)(A().Ht,{gap:8,style:p.contentContainer,children:[(0,S.jsx)("div",{style:p.pageTitleContainer,children:(0,S.jsx)(T().Z,{maxLength:i?22:24,store:t,style:p.pageTitle})}),g]})]})}function D(e){const{store:t,height:i=62}=e,s=(0,o().yK)((()=>({coverContainer:{height:i}})),[i]),n=(0,a().VK)((()=>t.getCover()),[t]);return(0,S.jsx)("div",{style:s.coverContainer,children:n&&(0,S.jsx)(F().Z,{store:t,disabled:!0,paddingLeft:0,paddingRight:0,height:i,proxyWidth:260})})}function V(e){const{width:t="100%"}=e,{isMobile:i}=(0,n().Fy)(),s=(0,o().yK)((e=>({overlay:{width:"100%",position:"absolute",background:`linear-gradient(to bottom, transparent, ${i?e.contentBackground:e.surface.elevated} 100%)`,height:58,left:0,bottom:0}})),[i]);return(0,S.jsx)("div",{style:{position:"relative",width:t},children:(0,S.jsx)("div",{style:s.overlay})})}function W(e){const{store:t,mostPermissivePublicItem:i,sudoModeStore:l,location:p}=e,{permissionItem:h,from:b}=i,y=(0,n().O7)(),w=(0,a().VK)((()=>t.getSpaceStore()),[t]),M=(0,s.useCallback)((()=>{w&&C().Sl(y,{spaceStore:w}).then((e=>{(0,R().mm)(y,{target_block_id:t.id,user_current_live_sites_count:e.length})}))}),[y,t,w]),P=(0,a().VK)((()=>t.canAdmin()),[t]),L=(0,v().E)({store:t}),T=(0,x().cR)(t),A=(0,x().xb)(t),F=!P||L.disabled||T||A,_=(0,o().yK)((e=>({container:{display:"flex",alignItems:"center",flexDirection:"column",justifyContent:F?"center":"flex-start",paddingTop:F?6:12,paddingBottom:F?24:20,paddingLeft:20,paddingRight:20,gap:F?8:0,cursor:F?"not-allowed":"default",height:y.device.isMobile&&F?"100%":F?276:"auto"},titleContainer:{display:"flex",alignItems:"center",flexDirection:"column",gap:4},title:{fontWeight:c().Ue.semibold,fontSize:16,lineHeight:1.2,color:F?e.text.secondary:e.text.primary},caption:{display:"flex",alignItems:"center",marginLeft:26,marginRight:26,marginBottom:F?0:20,width:F?"85%":"auto",textAlign:"center"},button:{display:"flex",width:"100%",padding:16,borderRadius:6,zIndex:1},disabledIcon:{height:27,width:27,margin:5,fill:e.text.tertiary},overlay:{height:12,left:0,top:0,background:e.contentBackground,width:"100%",position:"absolute"},disabledPublishingMessage:{fontWeight:c().Ue.medium},restoreFromTrashButton:{fontSize:12,fontWeight:c().Ue.medium,margin:"12px",padding:"0px 8px",height:28}})),[F,y.device.isMobile]),z=(0,s.useCallback)((()=>{var e;const i=null===(e=k().default.state.currentSpaceStore)||void 0===e?void 0:e.getDisableMoveToSpace(),s=b.table===r().iU?b.blockId:b.teamId,n=!i&&h.allow_duplicate;B().Fo({environment:y,type:"site",store:t}),(0,I().iK)({oldPermissionItem:h,newPermissionItem:{...h,role:"reader",allow_duplicate:n},wasInherited:s!==t.id,environment:y,store:t,sudoModeStore:l,location:p}),M()}),[M,y,t,h,b,l,p]),Z=(0,s.useCallback)((()=>{const{currentSpaceStore:e}=k().default.state;e&&g().DV({environment:y,block:t,spaceId:t.pointer.spaceId||e.id,from:"disabled_publish_modal"})}),[t,y]);return(0,S.jsxs)("div",{style:_.container,children:[F?j(_.disabledIcon):null,(0,S.jsxs)("div",{style:_.titleContainer,children:[F?(0,S.jsx)($,{store:t}):(0,S.jsx)("div",{style:_.title,children:(0,S.jsx)(d()._H,{id:"publishSite.publishTab.title",defaultMessage:"Publish to web"})}),(0,S.jsx)(f().Z,{isMultiline:!0,isSecondaryColor:!0,style:_.caption,children:(0,S.jsx)(N,{store:t})}),F&&T&&(0,S.jsx)(u().Z,{onClick:Z,style:_.restoreFromTrashButton,children:"Restore"})]}),F?null:(0,S.jsx)(H,{store:t}),F?null:(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(m().Z,{style:_.button,disabled:F,onClick:z,children:(0,S.jsx)(d()._H,{id:"publishSite.publish.title",defaultMessage:"Publish"})}),y.device.isMobile&&(0,S.jsx)("div",{style:{position:"relative",width:"100%"},children:(0,S.jsx)("div",{style:_.overlay})})]})]})}function $(e){const{store:t}=e,i=(0,o().yK)((()=>({disabledPublishingHeadline:{fontWeight:c().Ue.medium,textAlign:"center",width:"85%"}})),[]),s=e=>{const{messageId:t,defaultMessage:s,description:n}=e;return(0,S.jsx)("div",{style:i.disabledPublishingHeadline,children:(0,S.jsx)(f().Z,{isSecondaryColor:!0,isMultiline:!0,children:(0,S.jsx)(d()._H,{defaultMessage:"{defaultMessage}",id:"{messageId}",values:{messageId:t,defaultMessage:s,description:n}})})})},n=(0,v().E)({store:t}),r=(0,x().cR)(t),p=(0,x().xb)(t),g=(0,a().VK)((()=>!t.canAdmin()),[t]);return(0,l().T)(n.disabled||r||p||g,"Disabled headline not allowed for block's current state"),n.disabled&&"team"===n.disabledBy?s({messageId:"publishSite.disabledByTeamspace.headline",defaultMessage:"Publishing is disabled in this teamspace",description:"Headline for publish to web section when public sharing is disabled via teamspace security settings."}):n.disabled&&"space"===n.disabledBy?s({messageId:"publishSite.disabledByWorkspace.headline",defaultMessage:"Publishing is disabled in this workspace",description:"Headline for publish to web section when public sharing is disabled via workspace security settings."}):s(r?{messageId:"publishSite.pageInTrash.headline",defaultMessage:"Pages in the trash can't be published",description:"Headline for publish to web section when the page is in trash."}:p?{messageId:"publishSite.hasAIEdits.headline",defaultMessage:"Pages with pending Notion AI changes can't be published",description:"Headline for publish to web section when the page has AI edits and the button is disabled."}:{messageId:"publishSite.noFullAccess.headline",defaultMessage:"You need full access to publish",description:"Headline for publish to web section when the user does not have full access to the page."})}function N(e){const{store:t}=e,i=(0,n().O7)(),s=(0,v().E)({store:t}),r=(0,x().cR)(t),l=(0,x().xb)(t),c=(0,a().VK)((()=>!t.canAdmin()),[t]),g=(0,o().yK)((e=>({helpIcon:{width:14,height:14,fill:e.icon.tertiary}})),[]);return s.disabled&&"team"===s.disabledBy?(0,S.jsx)(d()._H,{id:"publishSite.disabledByTeamspace.caption",defaultMessage:"Contact a teamspace owner to modify this setting"}):s.disabled&&"space"===s.disabledBy?(0,S.jsx)(d()._H,{id:"publishSite.disabledByWorkspace.caption",defaultMessage:"Contact a workspace owner to modify this setting"}):r?(0,S.jsx)(d()._H,{id:"publishSite.pageInTrash.caption",defaultMessage:"Restore this page to publish it to the web"}):l?(0,S.jsx)(d()._H,{id:"publishSite.hasAIEdits.caption",defaultMessage:"Accept or discard changes on this page to publish it to the web"}):c?(0,S.jsx)(d()._H,{id:"publishSite.noFullAccess.caption",defaultMessage:"Contact someone with full access to modify this setting"}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(d()._H,{id:"publishSite.hasFullAccess.caption",defaultMessage:"Create a website with Notion"}),(0,S.jsx)(b().Z,{renderTooltip:()=>(0,S.jsx)(d()._H,{id:"publishSite.help.tooltip",defaultMessage:"Learn more about Notion sites"}),render:e=>(0,S.jsx)(h().Z,{...e,style:{marginLeft:2,height:20,width:20},iconStyle:g.helpIcon,onClick:()=>{p().D({environment:i,url:(0,y().UY)("guides.autogeneratedDomains")})},icon:w().m,ariaLabel:"Learn more about sites"}),placement:M().Placement.Bottom})]})}},266184:(e,t,i)=>{i.d(t,{Sl:()=>S,TA:()=>j,Zg:()=>x,a2:()=>I,eT:()=>w,mk:()=>v});i(821057),i(670560),i(267602),i(653476),i(667294);var s=()=>i(217465),n=()=>i(396136),a=()=>i(788860),o=()=>i(839002),r=()=>i(824462),l=()=>i(308186),d=()=>i(828946),c=()=>i(365872),p=()=>i(681832),g=()=>i(804217),h=()=>i(826955),u=()=>i(625820),m=()=>i(59864),b=()=>i(835374),f=i(785893);const y=50;function x(e){b().default.resetSitesForSpace(e.id)}async function v(e,t){const{spaceStore:i,currentUserId:a,limit:l}=t;if(!i.id)return;const[d]=await Promise.all([r().callApi({eventName:"getPublishedPagesForUser",environment:e,data:{spaceId:i.id,limit:l||y,fetchPublishedMetadata:!0}}),(0,o().Vs)(1500)]);if("failed"===d.type)throw new Error("Failed to fetch published pages.");if(d.data.recordMap){const e=[],t=s().RecordMapWithRole.create(d.data.recordMap),o=d.data.publishedEdits;for(const{model:s}of t)if(s&&s.table===n().iU){const t=h().G.createChildStore(i,{table:n().iU,id:s.id}),a=o[t.id],r=a&&a.authors?a.authors[0]:void 0,l={publishedTime:null==a?void 0:a.timestamp,publishedBy:r};e.push({store:t,publishedMetadata:l})}let r=e;return a&&(r=m().S(e,a)),b().default.initializeSiteResultsForSpace(i.id,r),r}}async function S(e,t){const{spaceStore:i}=t,s=e.currentUser.id,n=await v(e,{spaceStore:i,currentUserId:s});return n?n.filter((e=>{var t;return(null===(t=e.publishedMetadata.publishedBy)||void 0===t?void 0:t.id)===s})):[]}function j(e){c().lG(e),p().default.setState({...p().default.state,display:p().wV.Publish,tab:p().XF.Publish})}async function w(e){return new Promise(((t,i)=>{l().vC({message:(0,f.jsx)("div",{style:{textAlign:"center"},children:(0,f.jsx)(a()._H,{id:"sites.confirmUnpublish.title",defaultMessage:"Unpublish this site?"})}),description:(0,f.jsx)("div",{style:{textAlign:"center"},children:(0,f.jsx)(a()._H,{id:"sites.confirmUnpublish.caption",defaultMessage:"{pageTitle} will no longer be live on the web.",values:{pageTitle:e}})}),keepFocus:!0,items:[{label:(0,f.jsx)(a()._H,{id:"sites.confirmUnpublish.confirm",defaultMessage:"Unpublish"}),color:"red",onAccept:()=>t(!0)}],showCancel:!0})}))}async function I(e,t){if(!g().default.state.online)return[];const i=await d().x.searchActions.load();return await i.searchPublicPages({environment:t,query:e,source:"public_home_page_menu",limit:u().Xv})}},59864:(e,t,i)=>{i.d(t,{N:()=>r,S:()=>o});i(267602),i(470928);var s=()=>i(933868),n=()=>i(514737),a=()=>i(122479);function o(e,t){return e.sort(((e,i)=>{const s=e.store.canAdmin();if(s===i.store.canAdmin()){var n,a;const s=null===(n=e.publishedMetadata.publishedBy)||void 0===n?void 0:n.id,o=e.publishedMetadata.publishedTime,r=null===(a=i.publishedMetadata.publishedBy)||void 0===a?void 0:a.id,l=i.publishedMetadata.publishedTime;if(t){if(s===t&&r===t&&o&&l)return l-o;if(s===t)return-1;if(r===t)return 1}return o&&l?l-o:0}return s?-1:1}))}function r(e){const{environment:t,store:i}=e;if(!i.pathIsAccessibleAndAlive())return!1;const o=a().YO(i).find((e=>(0,s().$D)(e.permissionItem)&&"none"!==e.permissionItem.role));return!!o&&((!(0,s().$D)(o.permissionItem)||!(0,n().y)(o.permissionItem))&&!a().IJ(t,i))}},835374:(e,t,i)=>{i.d(t,{default:()=>a});i(267602),i(653476);var s=()=>i(513670);class n extends(()=>i(263184))().default{getInitialState(){return{sites:{},sortAscending:!0,sortColumn:void 0}}initializeSiteResultsForSpace(e,t){this.state.sites[e]=t,this.emit()}getSortedSitesForSpace(e,t){const{sortAscending:n,sortColumn:a}=this.state,o=this.state.sites[e];if(o)switch(a){case"page":return s().Xo(o,(e=>i(955620).QaF(e.store.getTitleValue()).toLowerCase()),n?"asc":"desc");case"published-by":return s().Xo(o,(e=>{const s=e.publishedMetadata.publishedBy,n=s?i(826955).t1.createChildStore(e.store,s):void 0;return null==n?void 0:n.getDisplayName(t).toLowerCase()}),n?"asc":"desc");case"published-date":return s().Xo(o,(e=>e.publishedMetadata.publishedTime),n?"asc":"desc");default:return o}}removeSiteFromSpace(e,t){const i=this.state.sites[e];i&&(this.state.sites[e]=i.filter((e=>e.store.id!==t)),this.emit())}resetSitesForSpace(e){this.state.sites[e]=void 0}}const a=new n}}]);