(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[89543],{954316:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Identify:()=>G,Revenue:()=>z,Types:()=>r,add:()=>Ri,createInstance:()=>xi,extendSession:()=>Di,flush:()=>Ui,getDeviceId:()=>ji,getSessionId:()=>Li,getUserId:()=>qi,groupIdentify:()=>Mi,identify:()=>Fi,init:()=>Vi,logEvent:()=>Ki,remove:()=>Gi,reset:()=>zi,revenue:()=>Bi,runQueuedFunctions:()=>Ke,setDeviceId:()=>$i,setGroup:()=>Wi,setOptOut:()=>Qi,setSessionId:()=>Hi,setTransport:()=>Ji,setUserId:()=>Xi,track:()=>Yi});var r={};n.r(r),n.d(r,{DEFAULT_ACTION_CLICK_ALLOWLIST:()=>hn,DEFAULT_CSS_SELECTOR_ALLOWLIST:()=>fn,DEFAULT_DATA_ATTRIBUTE_PREFIX:()=>pn,IdentifyOperation:()=>L,LogLevel:()=>d,OfflineDisabled:()=>Ve,RevenueProperty:()=>q,ServerZone:()=>Qt,SpecialEventType:()=>M,Status:()=>E});var i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)};function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function a(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(u){a=[6,u],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}Object.create;function u(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;"function"==typeof SuppressedError&&SuppressedError;var d;!function(e){e[e.None=0]="None",e[e.Error=1]="Error",e[e.Warn=2]="Warn",e[e.Verbose=3]="Verbose",e[e.Debug=4]="Debug"}(d||(d={}));var f=function(e){return function(){var t=i({},e.config);return{logger:t.loggerProvider,logLevel:t.logLevel}}},p=function(e,t){var n,r;t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"");try{for(var i=u(t.split(".")),o=i.next();!o.done;o=i.next()){var s=o.value;if(!(s in e))return;e=e[s]}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return e},h=function(e,t){return function(){var n,r,i={};try{for(var o=u(t),s=o.next();!s.done;s=o.next()){var a=s.value;i[a]=p(e,a)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}},v=function(e,t,n,r,i){return void 0===i&&(i=null),function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var a=n(),u=a.logger,c=a.logLevel;if(c&&c<d.Debug||!c||!u)return e.apply(i,o);var l,f={type:"invoke public method",name:t,args:o,stacktrace:(l=1,void 0===l&&(l=0),((new Error).stack||"").split("\n").slice(2+l).map((function(e){return e.trim()}))),time:{start:(new Date).toISOString()},states:{}};r&&f.states&&(f.states.before=r());var p=e.apply(i,o);return p&&p.promise?p.promise.then((function(){r&&f.states&&(f.states.after=r()),f.time&&(f.time.end=(new Date).toISOString()),u.debug(JSON.stringify(f,null,2))})):(r&&f.states&&(f.states.after=r()),f.time&&(f.time.end=(new Date).toISOString()),u.debug(JSON.stringify(f,null,2))),p}},g=function(e,t){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},g(e,t)};function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}g(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var m=function(){return m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},m.apply(this,arguments)};function b(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function w(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(u){a=[6,u],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}Object.create;function _(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}Object.create;"function"==typeof SuppressedError&&SuppressedError;var E,I=function(e){return{promise:e||Promise.resolve()}};!function(e){e.Unknown="unknown",e.Skipped="skipped",e.Success="success",e.RateLimit="rate_limit",e.PayloadTooLarge="payload_too_large",e.Invalid="invalid",e.Failed="failed",e.Timeout="Timeout",e.SystemError="SystemError"}(E||(E={}));var S="AMP",T="".concat(S,"_unsent"),O="https://api2.amplitude.com/2/httpapi",k=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=E.Unknown),{event:e,code:t,message:n}},N="Amplitude Logger ",A=function(){function e(){this.logLevel=d.None}return e.prototype.disable=function(){this.logLevel=d.None},e.prototype.enable=function(e){void 0===e&&(e=d.Warn),this.logLevel=e},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<d.Verbose||console.log("".concat(N,"[Log]: ").concat(e.join(" ")))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<d.Warn||console.warn("".concat(N,"[Warn]: ").concat(e.join(" ")))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<d.Error||console.error("".concat(N,"[Error]: ").concat(e.join(" ")))},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<d.Debug||console.log("".concat(N,"[Debug]: ").concat(e.join(" ")))},e}(),P=function(){return{flushMaxRetries:12,flushQueueSize:200,flushIntervalMillis:1e4,instanceName:"$default_instance",logLevel:d.Warn,loggerProvider:new A,offline:!1,optOut:!1,serverUrl:O,serverZone:"US",useBatch:!1}},x=function(){function e(e){var t,n,r,i;this._optOut=!1;var o=P();this.apiKey=e.apiKey,this.flushIntervalMillis=null!==(t=e.flushIntervalMillis)&&void 0!==t?t:o.flushIntervalMillis,this.flushMaxRetries=e.flushMaxRetries||o.flushMaxRetries,this.flushQueueSize=e.flushQueueSize||o.flushQueueSize,this.instanceName=e.instanceName||o.instanceName,this.loggerProvider=e.loggerProvider||o.loggerProvider,this.logLevel=null!==(n=e.logLevel)&&void 0!==n?n:o.logLevel,this.minIdLength=e.minIdLength,this.plan=e.plan,this.ingestionMetadata=e.ingestionMetadata,this.offline=void 0!==e.offline?e.offline:o.offline,this.optOut=null!==(r=e.optOut)&&void 0!==r?r:o.optOut,this.serverUrl=e.serverUrl,this.serverZone=e.serverZone||o.serverZone,this.storageProvider=e.storageProvider,this.transportProvider=e.transportProvider,this.useBatch=null!==(i=e.useBatch)&&void 0!==i?i:o.useBatch,this.loggerProvider.enable(this.logLevel);var s=R(e.serverUrl,e.serverZone,e.useBatch);this.serverZone=s.serverZone,this.serverUrl=s.serverUrl}return Object.defineProperty(e.prototype,"optOut",{get:function(){return this._optOut},set:function(e){this._optOut=e},enumerable:!1,configurable:!0}),e}(),C=function(e,t){return"EU"===e?t?"https://api.eu.amplitude.com/batch":"https://api.eu.amplitude.com/2/httpapi":t?"https://api2.amplitude.com/batch":O},R=function(e,t,n){if(void 0===e&&(e=""),void 0===t&&(t=P().serverZone),void 0===n&&(n=P().useBatch),e)return{serverUrl:e,serverZone:void 0};var r=["US","EU"].includes(t)?t:P().serverZone;return{serverZone:r,serverUrl:C(r,n)}},D=function(){function e(){this.sdk={metrics:{histogram:{}}}}return e.prototype.recordHistogram=function(e,t){this.sdk.metrics.histogram[e]=t},e}(),U=function(e){return e?(e^16*Math.random()>>e/4).toString(16):(String(1e7)+String(-1e3)+String(-4e3)+String(-8e3)+String(-1e11)).replace(/[018]/g,U)};function j(e){var t="";try{"body"in e&&(t=JSON.stringify(e.body,null,2))}catch(n){}return t}var L,q,M,F=function(){function e(){this.name="amplitude",this.type="destination",this.retryTimeout=1e3,this.throttleTimeout=3e4,this.storageKey="",this.scheduled=null,this.queue=[]}return e.prototype.setup=function(e){var t;return s(this,void 0,void 0,(function(){var n,r=this;return a(this,(function(i){switch(i.label){case 0:return this.config=e,this.storageKey="".concat(T,"_").concat(this.config.apiKey.substring(0,10)),[4,null===(t=this.config.storageProvider)||void 0===t?void 0:t.get(this.storageKey)];case 1:return(n=i.sent())&&n.length>0&&Promise.all(n.map((function(e){return r.execute(e)}))).catch(),[2,Promise.resolve(void 0)]}}))}))},e.prototype.execute=function(e){var t=this;return e.insert_id||(e.insert_id=U()),new Promise((function(n){var r={event:e,attempts:0,callback:function(e){return n(e)},timeout:0};t.addToQueue(r)}))},e.prototype.getTryableList=function(e){var t=this;return e.filter((function(e){return e.attempts<t.config.flushMaxRetries?(e.attempts+=1,!0):(t.fulfillRequest([e],500,"Event rejected due to exceeded retry count"),!1)}))},e.prototype.scheduleTryable=function(e,t){var n=this;void 0===t&&(t=!1),e.forEach((function(e){t&&(n.queue=n.queue.concat(e)),0!==e.timeout?setTimeout((function(){e.timeout=0,n.schedule(0)}),e.timeout):n.schedule(n.config.flushIntervalMillis)}))},e.prototype.addToQueue=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.getTryableList(e);this.scheduleTryable(n,!0),this.saveEvents()},e.prototype.schedule=function(e){var t=this;this.scheduled||this.config.offline||(this.scheduled=setTimeout((function(){t.flush(!0).then((function(){t.queue.length>0&&t.schedule(e)}))}),e))},e.prototype.flush=function(e){return void 0===e&&(e=!1),s(this,void 0,void 0,(function(){var t,n,r,i=this;return a(this,(function(o){switch(o.label){case 0:return this.config.offline?(this.config.loggerProvider.debug("Skipping flush while offline."),[2]):(t=[],n=[],this.queue.forEach((function(e){return 0===e.timeout?t.push(e):n.push(e)})),this.scheduled&&(clearTimeout(this.scheduled),this.scheduled=null),s=t,a=this.config.flushQueueSize,u=Math.max(a,1),r=s.reduce((function(e,t,n){var r=Math.floor(n/u);return e[r]||(e[r]=[]),e[r].push(t),e}),[]),[4,Promise.all(r.map((function(t){return i.send(t,e)})))]);case 1:return o.sent(),this.scheduleTryable(n),[2]}var s,a,u}))}))},e.prototype.send=function(e,t){return void 0===t&&(t=!0),s(this,void 0,void 0,(function(){var n,r,i,s,u;return a(this,(function(a){switch(a.label){case 0:if(!this.config.apiKey)return[2,this.fulfillRequest(e,400,"Event rejected due to missing API key")];n={api_key:this.config.apiKey,events:e.map((function(e){var t=e.event;t.extra;return o(t,["extra"])})),options:{min_id_length:this.config.minIdLength},client_upload_time:(new Date).toISOString(),request_metadata:this.config.requestMetadata},this.config.requestMetadata=new D,a.label=1;case 1:return a.trys.push([1,3,,4]),r=R(this.config.serverUrl,this.config.serverZone,this.config.useBatch).serverUrl,[4,this.config.transportProvider.send(r,n)];case 2:return null===(i=a.sent())?(this.fulfillRequest(e,0,"Unexpected error occurred"),[2]):t?(this.handleResponse(i,e),[3,4]):("body"in i?this.fulfillRequest(e,i.statusCode,"".concat(i.status,": ").concat(j(i))):this.fulfillRequest(e,i.statusCode,i.status),[2]);case 3:return s=a.sent(),u=(c=s)instanceof Error?c.message:String(c),this.config.loggerProvider.error(u),this.handleResponse({status:E.Failed,statusCode:0},e),[3,4];case 4:return[2]}var c}))}))},e.prototype.handleResponse=function(e,t){var n=e.status;switch(n){case E.Success:this.handleSuccessResponse(e,t);break;case E.Invalid:this.handleInvalidResponse(e,t);break;case E.PayloadTooLarge:this.handlePayloadTooLargeResponse(e,t);break;case E.RateLimit:this.handleRateLimitResponse(e,t);break;default:this.config.loggerProvider.warn("{code: 0, error: \"Status '".concat(n,"' provided for ").concat(t.length,' events"}')),this.handleOtherResponse(t)}},e.prototype.handleSuccessResponse=function(e,t){this.fulfillRequest(t,e.statusCode,"Event tracked successfully")},e.prototype.handleInvalidResponse=function(e,t){var n=this;if(e.body.missingField||e.body.error.startsWith("Invalid API key"))this.fulfillRequest(t,e.statusCode,e.body.error);else{var r=l(l(l(l([],c(Object.values(e.body.eventsWithInvalidFields)),!1),c(Object.values(e.body.eventsWithMissingFields)),!1),c(Object.values(e.body.eventsWithInvalidIdLengths)),!1),c(e.body.silencedEvents),!1).flat(),i=new Set(r),o=t.filter((function(t,r){if(!i.has(r))return!0;n.fulfillRequest([t],e.statusCode,e.body.error)}));o.length>0&&this.config.loggerProvider.warn(j(e));var s=this.getTryableList(o);this.scheduleTryable(s)}},e.prototype.handlePayloadTooLargeResponse=function(e,t){if(1!==t.length){this.config.loggerProvider.warn(j(e)),this.config.flushQueueSize/=2;var n=this.getTryableList(t);this.scheduleTryable(n)}else this.fulfillRequest(t,e.statusCode,e.body.error)},e.prototype.handleRateLimitResponse=function(e,t){var n=this,r=Object.keys(e.body.exceededDailyQuotaUsers),i=Object.keys(e.body.exceededDailyQuotaDevices),o=e.body.throttledEvents,s=new Set(r),a=new Set(i),u=new Set(o),c=t.filter((function(t,r){if(!(t.event.user_id&&s.has(t.event.user_id)||t.event.device_id&&a.has(t.event.device_id)))return u.has(r)&&(t.timeout=n.throttleTimeout),!0;n.fulfillRequest([t],e.statusCode,e.body.error)}));c.length>0&&this.config.loggerProvider.warn(j(e));var l=this.getTryableList(c);this.scheduleTryable(l)},e.prototype.handleOtherResponse=function(e){var t=this,n=e.map((function(e){return e.timeout=e.attempts*t.retryTimeout,e})),r=this.getTryableList(n);this.scheduleTryable(r)},e.prototype.fulfillRequest=function(e,t,n){this.removeEvents(e),e.forEach((function(e){return e.callback(k(e.event,t,n))}))},e.prototype.saveEvents=function(){if(this.config.storageProvider){var e=this.queue.map((function(e){return e.event}));this.config.storageProvider.set(this.storageKey,e)}},e.prototype.removeEvents=function(e){this.queue=this.queue.filter((function(t){return!e.some((function(e){return e.event.insert_id===t.event.insert_id}))})),this.saveEvents()},e}();!function(e){e.SET="$set",e.SET_ONCE="$setOnce",e.ADD="$add",e.APPEND="$append",e.PREPEND="$prepend",e.REMOVE="$remove",e.PREINSERT="$preInsert",e.POSTINSERT="$postInsert",e.UNSET="$unset",e.CLEAR_ALL="$clearAll"}(L||(L={})),function(e){e.REVENUE_PRODUCT_ID="$productId",e.REVENUE_QUANTITY="$quantity",e.REVENUE_PRICE="$price",e.REVENUE_TYPE="$revenueType",e.REVENUE="$revenue"}(q||(q={})),function(e){e.IDENTIFY="$identify",e.GROUP_IDENTIFY="$groupidentify",e.REVENUE="revenue_amount"}(M||(M={}));var V=function(e){if(Object.keys(e).length>1e3)return!1;for(var t in e){var n=e[t];if(!K(t,n))return!1}return!0},K=function(e,t){var n,r;if("string"!=typeof e)return!1;if(Array.isArray(t)){var i=!0;try{for(var o=u(t),s=o.next();!s.done;s=o.next()){var a=s.value;if(Array.isArray(a))return!1;if("object"==typeof a)i=i&&V(a);else if(!["number","string"].includes(typeof a))return!1;if(!i)return!1}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}else{if(null==t)return!1;if("object"==typeof t)return V(t);if(!["number","string","boolean"].includes(typeof t))return!1}return!0},G=function(){function e(){this._propertySet=new Set,this._properties={}}return e.prototype.getUserProperties=function(){return i({},this._properties)},e.prototype.set=function(e,t){return this._safeSet(L.SET,e,t),this},e.prototype.setOnce=function(e,t){return this._safeSet(L.SET_ONCE,e,t),this},e.prototype.append=function(e,t){return this._safeSet(L.APPEND,e,t),this},e.prototype.prepend=function(e,t){return this._safeSet(L.PREPEND,e,t),this},e.prototype.postInsert=function(e,t){return this._safeSet(L.POSTINSERT,e,t),this},e.prototype.preInsert=function(e,t){return this._safeSet(L.PREINSERT,e,t),this},e.prototype.remove=function(e,t){return this._safeSet(L.REMOVE,e,t),this},e.prototype.add=function(e,t){return this._safeSet(L.ADD,e,t),this},e.prototype.unset=function(e){return this._safeSet(L.UNSET,e,"-"),this},e.prototype.clearAll=function(){return this._properties={},this._properties[L.CLEAR_ALL]="-",this},e.prototype._safeSet=function(e,t,n){if(this._validate(e,t,n)){var r=this._properties[e];return void 0===r&&(r={},this._properties[e]=r),r[t]=n,this._propertySet.add(t),!0}return!1},e.prototype._validate=function(e,t,n){return void 0===this._properties[L.CLEAR_ALL]&&(!this._propertySet.has(t)&&(e===L.ADD?"number"==typeof n:e===L.UNSET||e===L.REMOVE||K(t,n)))},e}(),z=function(){function e(){this.productId="",this.quantity=1,this.price=0}return e.prototype.setProductId=function(e){return this.productId=e,this},e.prototype.setQuantity=function(e){return e>0&&(this.quantity=e),this},e.prototype.setPrice=function(e){return this.price=e,this},e.prototype.setRevenueType=function(e){return this.revenueType=e,this},e.prototype.setRevenue=function(e){return this.revenue=e,this},e.prototype.setEventProperties=function(e){return V(e)&&(this.properties=e),this},e.prototype.getEventProperties=function(){var e=this.properties?i({},this.properties):{};return e[q.REVENUE_PRODUCT_ID]=this.productId,e[q.REVENUE_QUANTITY]=this.quantity,e[q.REVENUE_PRICE]=this.price,e[q.REVENUE_TYPE]=this.revenueType,e[q.REVENUE]=this.revenue,e},e}(),B=function(){function e(e){this.client=e,this.queue=[],this.applying=!1,this.plugins=[]}return e.prototype.register=function(e,t){var n,r;return s(this,void 0,void 0,(function(){return a(this,(function(i){switch(i.label){case 0:return this.plugins.some((function(t){return t.name===e.name}))?(t.loggerProvider.warn("Plugin with name ".concat(e.name," already exists, skipping registration")),[2]):(void 0===e.name&&(e.name=U(),t.loggerProvider.warn("Plugin name is undefined. \n      Generating a random UUID for plugin name: ".concat(e.name,". \n      Set a name for the plugin to prevent it from being added multiple times."))),e.type=null!==(n=e.type)&&void 0!==n?n:"enrichment",[4,null===(r=e.setup)||void 0===r?void 0:r.call(e,t,this.client)]);case 1:return i.sent(),this.plugins.push(e),[2]}}))}))},e.prototype.deregister=function(e){var t;return s(this,void 0,void 0,(function(){var n,r;return a(this,(function(i){switch(i.label){case 0:return n=this.plugins.findIndex((function(t){return t.name===e})),r=this.plugins[n],this.plugins.splice(n,1),[4,null===(t=r.teardown)||void 0===t?void 0:t.call(r)];case 1:return i.sent(),[2]}}))}))},e.prototype.reset=function(e){this.applying=!1,this.plugins.map((function(e){var t;return null===(t=e.teardown)||void 0===t?void 0:t.call(e)})),this.plugins=[],this.client=e},e.prototype.push=function(e){var t=this;return new Promise((function(n){t.queue.push([e,n]),t.scheduleApply(0)}))},e.prototype.scheduleApply=function(e){var t=this;this.applying||(this.applying=!0,setTimeout((function(){t.apply(t.queue.shift()).then((function(){t.applying=!1,t.queue.length>0&&t.scheduleApply(0)}))}),e))},e.prototype.apply=function(e){return s(this,void 0,void 0,(function(){var t,n,r,o,s,l,d,f,p,h,v,g,y,m,b,w,_,E,I,S;return a(this,(function(a){switch(a.label){case 0:if(!e)return[2];t=c(e,1),n=t[0],r=c(e,2),o=r[1],s=this.plugins.filter((function(e){return"before"===e.type})),a.label=1;case 1:a.trys.push([1,6,7,8]),l=u(s),d=l.next(),a.label=2;case 2:return d.done?[3,5]:(g=d.value).execute?[4,g.execute(i({},n))]:[3,4];case 3:if(null===(y=a.sent()))return o({event:n,code:0,message:""}),[2];n=y,a.label=4;case 4:return d=l.next(),[3,2];case 5:return[3,8];case 6:return f=a.sent(),_={error:f},[3,8];case 7:try{d&&!d.done&&(E=l.return)&&E.call(l)}finally{if(_)throw _.error}return[7];case 8:p=this.plugins.filter((function(e){return"enrichment"===e.type||void 0===e.type})),a.label=9;case 9:a.trys.push([9,14,15,16]),h=u(p),v=h.next(),a.label=10;case 10:return v.done?[3,13]:(g=v.value).execute?[4,g.execute(i({},n))]:[3,12];case 11:if(null===(y=a.sent()))return o({event:n,code:0,message:""}),[2];n=y,a.label=12;case 12:return v=h.next(),[3,10];case 13:return[3,16];case 14:return m=a.sent(),I={error:m},[3,16];case 15:try{v&&!v.done&&(S=h.return)&&S.call(h)}finally{if(I)throw I.error}return[7];case 16:return b=this.plugins.filter((function(e){return"destination"===e.type})),w=b.map((function(e){var t=i({},n);return e.execute(t).catch((function(e){return k(t,0,String(e))}))})),Promise.all(w).then((function(e){var t=c(e,1)[0]||k(n,100,"Event not tracked, no destination plugins on the instance");o(t)})),[2]}}))}))},e.prototype.flush=function(){return s(this,void 0,void 0,(function(){var e,t,n,r=this;return a(this,(function(i){switch(i.label){case 0:return e=this.queue,this.queue=[],[4,Promise.all(e.map((function(e){return r.apply(e)})))];case 1:return i.sent(),t=this.plugins.filter((function(e){return"destination"===e.type})),n=t.map((function(e){return e.flush&&e.flush()})),[4,Promise.all(n)];case 2:return i.sent(),[2]}}))}))},e}(),$=function(e,t){return i(i({},t),{event_type:M.IDENTIFY,user_properties:e.getUserProperties()})},W=function(){function e(e){void 0===e&&(e="$default"),this.initializing=!1,this.isReady=!1,this.q=[],this.dispatchQ=[],this.logEvent=this.track.bind(this),this.timeline=new B(this),this.name=e}return e.prototype._init=function(e){return s(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return this.config=e,this.timeline.reset(this),[4,this.runQueuedFunctions("q")];case 1:return t.sent(),this.isReady=!0,[2]}}))}))},e.prototype.runQueuedFunctions=function(e){return s(this,void 0,void 0,(function(){var t,n,r,i,o,s,c,l;return a(this,(function(a){switch(a.label){case 0:t=this[e],this[e]=[],a.label=1;case 1:a.trys.push([1,8,9,10]),n=u(t),r=n.next(),a.label=2;case 2:return r.done?[3,7]:(i=r.value,(o=i())&&"promise"in o?[4,o.promise]:[3,4]);case 3:return a.sent(),[3,6];case 4:return[4,o];case 5:a.sent(),a.label=6;case 6:return r=n.next(),[3,2];case 7:return[3,10];case 8:return s=a.sent(),c={error:s},[3,10];case 9:try{r&&!r.done&&(l=n.return)&&l.call(n)}finally{if(c)throw c.error}return[7];case 10:return this[e].length?[4,this.runQueuedFunctions(e)]:[3,12];case 11:a.sent(),a.label=12;case 12:return[2]}}))}))},e.prototype.track=function(e,t,n){var r=function(e,t,n){return i(i(i({},"string"==typeof e?{event_type:e}:e),n),t&&{event_properties:t})}(e,t,n);return I(this.dispatch(r))},e.prototype.identify=function(e,t){var n=$(e,t);return I(this.dispatch(n))},e.prototype.groupIdentify=function(e,t,n,r){var o=function(e,t,n,r){var o;return i(i({},r),{event_type:M.GROUP_IDENTIFY,group_properties:n.getUserProperties(),groups:(o={},o[e]=t,o)})}(e,t,n,r);return I(this.dispatch(o))},e.prototype.setGroup=function(e,t,n){var r=function(e,t,n){var r,o=new G;return o.set(e,t),i(i({},n),{event_type:M.IDENTIFY,user_properties:o.getUserProperties(),groups:(r={},r[e]=t,r)})}(e,t,n);return I(this.dispatch(r))},e.prototype.revenue=function(e,t){var n=function(e,t){return i(i({},t),{event_type:M.REVENUE,event_properties:e.getEventProperties()})}(e,t);return I(this.dispatch(n))},e.prototype.add=function(e){return this.isReady?this._addPlugin(e):(this.q.push(this._addPlugin.bind(this,e)),I())},e.prototype._addPlugin=function(e){return I(this.timeline.register(e,this.config))},e.prototype.remove=function(e){return this.isReady?this._removePlugin(e):(this.q.push(this._removePlugin.bind(this,e)),I())},e.prototype._removePlugin=function(e){return I(this.timeline.deregister(e))},e.prototype.dispatchWithCallback=function(e,t){if(!this.isReady)return t(k(e,0,"Client not initialized"));this.process(e).then(t)},e.prototype.dispatch=function(e){return s(this,void 0,void 0,(function(){var t=this;return a(this,(function(n){return this.isReady?[2,this.process(e)]:[2,new Promise((function(n){t.dispatchQ.push(t.dispatchWithCallback.bind(t,e,n))}))]}))}))},e.prototype.process=function(e){return s(this,void 0,void 0,(function(){var t,n,r;return a(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),this.config.optOut?[2,k(e,0,"Event skipped due to optOut config")]:[4,this.timeline.push(e)];case 1:return 200===(r=i.sent()).code?this.config.loggerProvider.log(r.message):100===r.code?this.config.loggerProvider.warn(r.message):this.config.loggerProvider.error(r.message),[2,r];case 2:return t=i.sent(),n=String(t),this.config.loggerProvider.error(n),[2,r=k(e,0,n)];case 3:return[2]}}))}))},e.prototype.setOptOut=function(e){this.isReady?this._setOptOut(e):this.q.push(this._setOptOut.bind(this,Boolean(e)))},e.prototype._setOptOut=function(e){this.config.optOut=Boolean(e)},e.prototype.flush=function(){return I(this.timeline.flush())},e}(),Q=function(e,t){return Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Q(e,t)};function H(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Q(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var J=function(){return J=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},J.apply(this,arguments)};function X(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function Y(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function Z(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(u){a=[6,u],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}Object.create;function ee(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}Object.create;"function"==typeof SuppressedError&&SuppressedError;var te=function(e,t){return"boolean"==typeof e?e:!1!==(null==e?void 0:e[t])},ne=function(e){return te(e,"attribution")},re=function(e){return te(e,"pageViews")},ie=function(e){return te(e,"sessions")},oe=function(e){return"boolean"==typeof e?e:"object"==typeof e&&(!0===e.elementInteractions||"object"==typeof e.elementInteractions)},se=function(e){if(oe(e.autocapture)&&"object"==typeof e.autocapture&&"object"==typeof e.autocapture.elementInteractions)return e.autocapture.elementInteractions},ae=function(e){var t,n=function(){return!1},r=void 0,i=e.pageCounter;return re(e.defaultTracking)&&(n=void 0,t=void 0,e.defaultTracking&&"object"==typeof e.defaultTracking&&e.defaultTracking.pageViews&&"object"==typeof e.defaultTracking.pageViews&&("trackOn"in e.defaultTracking.pageViews&&(n=e.defaultTracking.pageViews.trackOn),"trackHistoryChanges"in e.defaultTracking.pageViews&&(r=e.defaultTracking.pageViews.trackHistoryChanges),"eventType"in e.defaultTracking.pageViews&&e.defaultTracking.pageViews.eventType&&(t=e.defaultTracking.pageViews.eventType))),{trackOn:n,trackHistoryChanges:r,eventType:t,pageCounter:i}},ue="dclid",ce="fbclid",le="gbraid",de="gclid",fe="ko_click_id",pe="li_fat_id",he="msclkid",ve="rtd_cid",ge="ttclid",ye="twclid",me="wbraid",be={utm_campaign:void 0,utm_content:void 0,utm_id:void 0,utm_medium:void 0,utm_source:void 0,utm_term:void 0,referrer:void 0,referring_domain:void 0,dclid:void 0,gbraid:void 0,gclid:void 0,fbclid:void 0,ko_click_id:void 0,li_fat_id:void 0,msclkid:void 0,rtd_cid:void 0,ttclid:void 0,twclid:void 0,wbraid:void 0},we=function(e){var t=e.split(".");return t.length<=2?e:t.slice(t.length-2,t.length).join(".")},_e=function(e,t,n,r){void 0===r&&(r=!0);e.referrer;var i=e.referring_domain,o=X(e,["referrer","referring_domain"]),s=t||{},a=(s.referrer,s.referring_domain),u=X(s,["referrer","referring_domain"]);if(Ee(n.excludeReferrers,e.referring_domain))return!1;if(!r&&function(e){return Object.values(e).every((function(e){return!e}))}(e)&&t)return!1;var c=JSON.stringify(o)!==JSON.stringify(u),l=we(i||"")!==we(a||"");return!t||c||l},Ee=function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=""),e.some((function(e){return e instanceof RegExp?e.test(t):e===t}))},Ie=function(){var e="ampIntegrationContext";return"undefined"!=typeof globalThis&&void 0!==globalThis[e]?globalThis[e]:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0!==n.g?n.g:void 0},Se=function(){var e,t=Ie();return(null===(e=null==t?void 0:t.location)||void 0===e?void 0:e.search)?t.location.search.substring(1).split("&").filter(Boolean).reduce((function(e,t){var n=t.split("=",2),r=Te(n[0]),i=Te(n[1]);return i?(e[r]=i,e):e}),{}):{}},Te=function(e){void 0===e&&(e="");try{return decodeURIComponent(e)}catch(t){return""}},Oe=function(){function e(){}return e.prototype.parse=function(){return Y(this,void 0,void 0,(function(){return Z(this,(function(e){return[2,J(J(J(J({},be),this.getUtmParam()),this.getReferrer()),this.getClickIds())]}))}))},e.prototype.getUtmParam=function(){var e=Se();return{utm_campaign:e.utm_campaign,utm_content:e.utm_content,utm_id:e.utm_id,utm_medium:e.utm_medium,utm_source:e.utm_source,utm_term:e.utm_term}},e.prototype.getReferrer=function(){var e,t,n={referrer:void 0,referring_domain:void 0};try{n.referrer=document.referrer||void 0,n.referring_domain=null!==(t=null===(e=n.referrer)||void 0===e?void 0:e.split("/")[2])&&void 0!==t?t:void 0}catch(r){}return n},e.prototype.getClickIds=function(){var e,t=Se();return(e={})[ue]=t[ue],e[ce]=t[ce],e[le]=t[le],e[de]=t[de],e[fe]=t[fe],e[pe]=t[pe],e[he]=t[he],e[ve]=t[ve],e[ge]=t[ge],e[ye]=t[ye],e[me]=t[me],e},e}(),ke=function(e,t){return void 0===t&&(t=Date.now()),Date.now()-t>e},Ne=function(){function e(e,t){var n,r,i,o,s,a;this.shouldTrackNewCampaign=!1,this.options=J({initialEmptyValue:"EMPTY",resetSessionOnNewCampaign:!1,excludeReferrers:(r=null===(n=t.cookieOptions)||void 0===n?void 0:n.domain,i=r,i?(i.startsWith(".")&&(i=i.substring(1)),[new RegExp("".concat(i.replace(".","\\."),"$"))]):[])},e),this.storage=t.cookieStorage,this.storageKey=(o=t.apiKey,void 0===(s="MKTG")&&(s=""),void 0===a&&(a=10),[S,s,o.substring(0,a)].filter(Boolean).join("_")),this.currentCampaign=be,this.sessionTimeout=t.sessionTimeout,this.lastEventTime=t.lastEventTime,t.loggerProvider.log("Installing web attribution tracking.")}return e.prototype.init=function(){return Y(this,void 0,void 0,(function(){var e,t;return Z(this,(function(n){switch(n.label){case 0:return[4,this.fetchCampaign()];case 1:return t=ee.apply(void 0,[n.sent(),2]),this.currentCampaign=t[0],this.previousCampaign=t[1],e=!this.lastEventTime||ke(this.sessionTimeout,this.lastEventTime),_e(this.currentCampaign,this.previousCampaign,this.options,e)?(this.shouldTrackNewCampaign=!0,[4,this.storage.set(this.storageKey,this.currentCampaign)]):[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},e.prototype.fetchCampaign=function(){return Y(this,void 0,void 0,(function(){return Z(this,(function(e){switch(e.label){case 0:return[4,Promise.all([(new Oe).parse(),this.storage.get(this.storageKey)])];case 1:return[2,e.sent()]}}))}))},e.prototype.generateCampaignEvent=function(e){this.shouldTrackNewCampaign=!1;var t,n,r,i,o=(t=this.currentCampaign,n=this.options,r=J(J({},be),t),i=Object.entries(r).reduce((function(e,t){var r,i=ee(t,2),o=i[0],s=i[1];return e.setOnce("initial_".concat(o),null!==(r=null!=s?s:n.initialEmptyValue)&&void 0!==r?r:"EMPTY"),s?e.set(o,s):e.unset(o)}),new G),$(i));return e&&(o.event_id=e),o},e.prototype.shouldSetSessionIdOnNewCampaign=function(){return this.shouldTrackNewCampaign&&!!this.options.resetSessionOnNewCampaign},e}(),Ae=function(){function e(){}return e.prototype.getApplicationContext=function(){return{versionName:this.versionName,language:Pe(),platform:"Web",os:void 0,deviceModel:void 0}},e}(),Pe=function(){return"undefined"!=typeof navigator&&(navigator.languages&&navigator.languages[0]||navigator.language)||""},xe=function(){function e(){this.queue=[]}return e.prototype.logEvent=function(e){this.receiver?this.receiver(e):this.queue.length<512&&this.queue.push(e)},e.prototype.setEventReceiver=function(e){this.receiver=e,this.queue.length>0&&(this.queue.forEach((function(t){e(t)})),this.queue=[])},e}(),Ce=function(){return Ce=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ce.apply(this,arguments)};function Re(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function De(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}"function"==typeof SuppressedError&&SuppressedError;var Ue=function(e,t){var n,r,i=typeof e;if(i!==typeof t)return!1;try{for(var o=Re(["string","number","boolean","undefined"]),s=o.next();!s.done;s=o.next()){if(s.value===i)return e===t}}catch(p){n={error:p}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}if(null==e&&null==t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;var a=Array.isArray(e),u=Array.isArray(t);if(a!==u)return!1;if(!a||!u){var c=Object.keys(e).sort(),l=Object.keys(t).sort();if(!Ue(c,l))return!1;var d=!0;return Object.keys(e).forEach((function(n){Ue(e[n],t[n])||(d=!1)})),d}for(var f=0;f<e.length;f++)if(!Ue(e[f],t[f]))return!1;return!0};Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),n=t.length,r=new Array(n);n--;)r[n]=[t[n],e[t[n]]];return r});var je=function(){function e(){this.identity={userProperties:{}},this.listeners=new Set}return e.prototype.editIdentity=function(){var e=this,t=Ce({},this.identity.userProperties),n=Ce(Ce({},this.identity),{userProperties:t});return{setUserId:function(e){return n.userId=e,this},setDeviceId:function(e){return n.deviceId=e,this},setUserProperties:function(e){return n.userProperties=e,this},setOptOut:function(e){return n.optOut=e,this},updateUserProperties:function(e){var t,r,i,o,s,a,u=n.userProperties||{};try{for(var c=Re(Object.entries(e)),l=c.next();!l.done;l=c.next()){var d=De(l.value,2),f=d[0],p=d[1];switch(f){case"$set":try{for(var h=(i=void 0,Re(Object.entries(p))),v=h.next();!v.done;v=h.next()){var g=De(v.value,2),y=g[0],m=g[1];u[y]=m}}catch(_){i={error:_}}finally{try{v&&!v.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}break;case"$unset":try{for(var b=(s=void 0,Re(Object.keys(p))),w=b.next();!w.done;w=b.next()){delete u[y=w.value]}}catch(E){s={error:E}}finally{try{w&&!w.done&&(a=b.return)&&a.call(b)}finally{if(s)throw s.error}}break;case"$clearAll":u={}}}}catch(I){t={error:I}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}return n.userProperties=u,this},commit:function(){return e.setIdentity(n),this}}},e.prototype.getIdentity=function(){return Ce({},this.identity)},e.prototype.setIdentity=function(e){var t=Ce({},this.identity);this.identity=Ce({},e),Ue(t,this.identity)||this.listeners.forEach((function(t){t(e)}))},e.prototype.addIdentityListener=function(e){this.listeners.add(e)},e.prototype.removeIdentityListener=function(e){this.listeners.delete(e)},e}(),Le="undefined"!=typeof globalThis?globalThis:void 0!==n.g?n.g:self,qe=function(){function e(){this.identityStore=new je,this.eventBridge=new xe,this.applicationContextProvider=new Ae}return e.getInstance=function(t){return Le.analyticsConnectorInstances||(Le.analyticsConnectorInstances={}),Le.analyticsConnectorInstances[t]||(Le.analyticsConnectorInstances[t]=new e),Le.analyticsConnectorInstances[t]},e}(),Me=function(e){return void 0===e&&(e="$default_instance"),qe.getInstance(e)},Fe=function(){function e(){this.name="identity",this.type="before",this.identityStore=Me().identityStore}return e.prototype.execute=function(e){return Y(this,void 0,void 0,(function(){var t;return Z(this,(function(n){return(t=e.user_properties)&&this.identityStore.editIdentity().updateUserProperties(t).commit(),[2,e]}))}))},e.prototype.setup=function(e){return Y(this,void 0,void 0,(function(){return Z(this,(function(t){return e.instanceName&&(this.identityStore=Me(e.instanceName).identityStore),[2]}))}))},e}(),Ve=null,Ke=function(e,t){Ge(e,t)},Ge=function(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.name,o=r.args,s=r.resolve,a=e&&e[i];if("function"==typeof a){var u=a.apply(e,o);"function"==typeof s&&s(null==u?void 0:u.promise)}}return e},ze=function(e){return e&&void 0!==e._q},Be=function(){var e,t,n,r;if("undefined"==typeof navigator)return"";var i=navigator.userLanguage;return null!==(r=null!==(n=null!==(t=null===(e=navigator.languages)||void 0===e?void 0:e[0])&&void 0!==t?t:navigator.language)&&void 0!==n?n:i)&&void 0!==r?r:""},$e=function(){function e(){this.name="@amplitude/plugin-context-browser",this.type="before",this.library="amplitude-ts/".concat("2.11.9"),"undefined"!=typeof navigator&&(this.userAgent=navigator.userAgent)}return e.prototype.setup=function(e){return this.config=e,Promise.resolve(void 0)},e.prototype.execute=function(e){var t,n;return b(this,void 0,void 0,(function(){var r,i,o;return w(this,(function(s){return r=(new Date).getTime(),i=null!==(t=this.config.lastEventId)&&void 0!==t?t:-1,o=null!==(n=e.event_id)&&void 0!==n?n:i+1,this.config.lastEventId=o,e.time||(this.config.lastEventTime=r),[2,m(m(m(m(m(m(m(m({user_id:this.config.userId,device_id:this.config.deviceId,session_id:this.config.sessionId,time:r},this.config.appVersion&&{app_version:this.config.appVersion}),this.config.trackingOptions.platform&&{platform:"Web"}),this.config.trackingOptions.language&&{language:Be()}),this.config.trackingOptions.ipAddress&&{ip:"$remote"}),{insert_id:U(),partner_id:this.config.partnerId,plan:this.config.plan}),this.config.ingestionMetadata&&{ingestion_metadata:{source_name:this.config.ingestionMetadata.sourceName,source_version:this.config.ingestionMetadata.sourceVersion}}),e),{event_id:o,library:this.library,user_agent:this.userAgent})]}))}))},e}(),We=function(){function e(){this.memoryStorage=new Map}return e.prototype.isEnabled=function(){return s(this,void 0,void 0,(function(){return a(this,(function(e){return[2,!0]}))}))},e.prototype.get=function(e){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2,this.memoryStorage.get(e)]}))}))},e.prototype.getRaw=function(e){return s(this,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return[4,this.get(e)];case 1:return[2,(t=n.sent())?JSON.stringify(t):void 0]}}))}))},e.prototype.set=function(e,t){return s(this,void 0,void 0,(function(){return a(this,(function(n){return this.memoryStorage.set(e,t),[2]}))}))},e.prototype.remove=function(e){return s(this,void 0,void 0,(function(){return a(this,(function(t){return this.memoryStorage.delete(e),[2]}))}))},e.prototype.reset=function(){return s(this,void 0,void 0,(function(){return a(this,(function(e){return this.memoryStorage.clear(),[2]}))}))},e}(),Qe=function(e,t,n){return void 0===t&&(t=""),void 0===n&&(n=10),[S,t,e.substring(0,n)].filter(Boolean).join("_")},He=function(){function e(e){this.options=J({},e)}return e.prototype.isEnabled=function(){return Y(this,void 0,void 0,(function(){var t,n;return Z(this,(function(r){switch(r.label){case 0:if(!Ie())return[2,!1];e.testValue=String(Date.now()),t=new e(this.options),n="AMP_TEST",r.label=1;case 1:return r.trys.push([1,4,5,7]),[4,t.set(n,e.testValue)];case 2:return r.sent(),[4,t.get(n)];case 3:return[2,r.sent()===e.testValue];case 4:return r.sent(),[2,!1];case 5:return[4,t.remove(n)];case 6:return r.sent(),[7];case 7:return[2]}}))}))},e.prototype.get=function(e){var t;return Y(this,void 0,void 0,(function(){var n,r;return Z(this,(function(i){switch(i.label){case 0:return[4,this.getRaw(e)];case 1:if(!(n=i.sent()))return[2,void 0];try{return void 0===(r=null!==(t=Je(n))&&void 0!==t?t:Xe(n))?(console.error("Amplitude Logger [Error]: Failed to decode cookie value for key: ".concat(e,", value: ").concat(n)),[2,void 0]):[2,JSON.parse(r)]}catch(o){return console.error("Amplitude Logger [Error]: Failed to parse cookie value for key: ".concat(e,", value: ").concat(n)),[2,void 0]}return[2]}}))}))},e.prototype.getRaw=function(e){var t,n;return Y(this,void 0,void 0,(function(){var r,i,o;return Z(this,(function(s){return r=Ie(),i=null!==(n=null===(t=null==r?void 0:r.document)||void 0===t?void 0:t.cookie.split("; "))&&void 0!==n?n:[],(o=i.find((function(t){return 0===t.indexOf(e+"=")})))?[2,o.substring(e.length+1)]:[2,void 0]}))}))},e.prototype.set=function(e,t){var n;return Y(this,void 0,void 0,(function(){var r,i,o,s,a,u,c;return Z(this,(function(l){try{r=null!==(n=this.options.expirationDays)&&void 0!==n?n:0,o=void 0,(i=null!==t?r:-1)&&((s=new Date).setTime(s.getTime()+24*i*60*60*1e3),o=s),a="".concat(e,"=").concat(btoa(encodeURIComponent(JSON.stringify(t)))),o&&(a+="; expires=".concat(o.toUTCString())),a+="; path=/",this.options.domain&&(a+="; domain=".concat(this.options.domain)),this.options.secure&&(a+="; Secure"),this.options.sameSite&&(a+="; SameSite=".concat(this.options.sameSite)),(u=Ie())&&(u.document.cookie=a)}catch(d){c=d instanceof Error?d.message:String(d),console.error("Amplitude Logger [Error]: Failed to set cookie for key: ".concat(e,". Error: ").concat(c))}return[2]}))}))},e.prototype.remove=function(e){return Y(this,void 0,void 0,(function(){return Z(this,(function(t){switch(t.label){case 0:return[4,this.set(e,null)];case 1:return t.sent(),[2]}}))}))},e.prototype.reset=function(){return Y(this,void 0,void 0,(function(){return Z(this,(function(e){return[2]}))}))},e}(),Je=function(e){try{return decodeURIComponent(atob(e))}catch(t){return}},Xe=function(e){try{return decodeURIComponent(atob(decodeURIComponent(e)))}catch(t){return}},Ye=function(){function e(){}return e.prototype.send=function(e,t){return Promise.resolve(null)},e.prototype.buildResponse=function(e){var t,n,r,i,o,s,a,u,c,l,d,f,p,h,v,g,y,m,b,w,_,I;if("object"!=typeof e)return null;var S=e.code||0,T=this.buildStatus(S);switch(T){case E.Success:return{status:T,statusCode:S,body:{eventsIngested:null!==(t=e.events_ingested)&&void 0!==t?t:0,payloadSizeBytes:null!==(n=e.payload_size_bytes)&&void 0!==n?n:0,serverUploadTime:null!==(r=e.server_upload_time)&&void 0!==r?r:0}};case E.Invalid:return{status:T,statusCode:S,body:{error:null!==(i=e.error)&&void 0!==i?i:"",missingField:null!==(o=e.missing_field)&&void 0!==o?o:"",eventsWithInvalidFields:null!==(s=e.events_with_invalid_fields)&&void 0!==s?s:{},eventsWithMissingFields:null!==(a=e.events_with_missing_fields)&&void 0!==a?a:{},eventsWithInvalidIdLengths:null!==(u=e.events_with_invalid_id_lengths)&&void 0!==u?u:{},epsThreshold:null!==(c=e.eps_threshold)&&void 0!==c?c:0,exceededDailyQuotaDevices:null!==(l=e.exceeded_daily_quota_devices)&&void 0!==l?l:{},silencedDevices:null!==(d=e.silenced_devices)&&void 0!==d?d:[],silencedEvents:null!==(f=e.silenced_events)&&void 0!==f?f:[],throttledDevices:null!==(p=e.throttled_devices)&&void 0!==p?p:{},throttledEvents:null!==(h=e.throttled_events)&&void 0!==h?h:[]}};case E.PayloadTooLarge:return{status:T,statusCode:S,body:{error:null!==(v=e.error)&&void 0!==v?v:""}};case E.RateLimit:return{status:T,statusCode:S,body:{error:null!==(g=e.error)&&void 0!==g?g:"",epsThreshold:null!==(y=e.eps_threshold)&&void 0!==y?y:0,throttledDevices:null!==(m=e.throttled_devices)&&void 0!==m?m:{},throttledUsers:null!==(b=e.throttled_users)&&void 0!==b?b:{},exceededDailyQuotaDevices:null!==(w=e.exceeded_daily_quota_devices)&&void 0!==w?w:{},exceededDailyQuotaUsers:null!==(_=e.exceeded_daily_quota_users)&&void 0!==_?_:{},throttledEvents:null!==(I=e.throttled_events)&&void 0!==I?I:[]}};case E.Timeout:default:return{status:T,statusCode:S}}},e.prototype.buildStatus=function(e){return e>=200&&e<300?E.Success:429===e?E.RateLimit:413===e?E.PayloadTooLarge:408===e?E.Timeout:e>=400&&e<500?E.Invalid:e>=500?E.Failed:E.Unknown},e}(),Ze=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return H(t,e),t.prototype.send=function(e,t){return Y(this,void 0,void 0,(function(){var n,r,i;return Z(this,(function(o){switch(o.label){case 0:if("undefined"==typeof fetch)throw new Error("FetchTransport is not supported");return n={headers:{"Content-Type":"application/json",Accept:"*/*"},body:JSON.stringify(t),method:"POST"},[4,fetch(e,n)];case 1:return[4,(r=o.sent()).text()];case 2:i=o.sent();try{return[2,this.buildResponse(JSON.parse(i))]}catch(s){return[2,this.buildResponse({code:r.status})]}return[2]}}))}))},t}(Ye),et=function(){function e(e){this.storage=e}return e.prototype.isEnabled=function(){return b(this,void 0,void 0,(function(){var t,n,r;return w(this,(function(i){switch(i.label){case 0:if(!this.storage)return[2,!1];t=String(Date.now()),n=new e(this.storage),r="AMP_TEST",i.label=1;case 1:return i.trys.push([1,4,5,7]),[4,n.set(r,t)];case 2:return i.sent(),[4,n.get(r)];case 3:return[2,i.sent()===t];case 4:return i.sent(),[2,!1];case 5:return[4,n.remove(r)];case 6:return i.sent(),[7];case 7:return[2]}}))}))},e.prototype.get=function(e){return b(this,void 0,void 0,(function(){var t;return w(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.getRaw(e)];case 1:return(t=n.sent())?[2,JSON.parse(t)]:[2,void 0];case 2:return n.sent(),console.error("[Amplitude] Error: Could not get value from storage"),[2,void 0];case 3:return[2]}}))}))},e.prototype.getRaw=function(e){var t;return b(this,void 0,void 0,(function(){return w(this,(function(n){return[2,(null===(t=this.storage)||void 0===t?void 0:t.getItem(e))||void 0]}))}))},e.prototype.set=function(e,t){var n;return b(this,void 0,void 0,(function(){return w(this,(function(r){try{null===(n=this.storage)||void 0===n||n.setItem(e,JSON.stringify(t))}catch(i){}return[2]}))}))},e.prototype.remove=function(e){var t;return b(this,void 0,void 0,(function(){return w(this,(function(n){try{null===(t=this.storage)||void 0===t||t.removeItem(e)}catch(r){}return[2]}))}))},e.prototype.reset=function(){var e;return b(this,void 0,void 0,(function(){return w(this,(function(t){try{null===(e=this.storage)||void 0===e||e.clear()}catch(n){}return[2]}))}))},e}(),tt=1e3,nt=function(e){function t(t){var n,r=this;return(r=e.call(this,null===(n=Ie())||void 0===n?void 0:n.localStorage)||this).loggerProvider=null==t?void 0:t.loggerProvider,r}return y(t,e),t.prototype.set=function(t,n){var r;return b(this,void 0,void 0,(function(){var i;return w(this,(function(o){switch(o.label){case 0:return Array.isArray(n)&&n.length>tt?(i=n.length-tt,[4,e.prototype.set.call(this,t,n.slice(0,tt))]):[3,2];case 1:return o.sent(),null===(r=this.loggerProvider)||void 0===r||r.error("Failed to save ".concat(i," events because the queue length exceeded ").concat(tt,".")),[3,4];case 2:return[4,e.prototype.set.call(this,t,n)];case 3:o.sent(),o.label=4;case 4:return[2]}}))}))},t}(et),rt=function(e){function t(){var t;return e.call(this,null===(t=Ie())||void 0===t?void 0:t.sessionStorage)||this}return y(t,e),t}(et),it=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={done:4},t}return y(t,e),t.prototype.send=function(e,t){return b(this,void 0,void 0,(function(){var n=this;return w(this,(function(r){return[2,new Promise((function(i,o){"undefined"==typeof XMLHttpRequest&&o(new Error("XHRTransport is not supported."));var s=new XMLHttpRequest;s.open("POST",e,!0),s.onreadystatechange=function(){if(s.readyState===n.state.done){var e=s.responseText;try{i(n.buildResponse(JSON.parse(e)))}catch(r){i(n.buildResponse({code:s.status}))}}},s.setRequestHeader("Content-Type","application/json"),s.setRequestHeader("Accept","*/*"),s.send(JSON.stringify(t))}))]}))}))},t}(Ye),ot=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return y(t,e),t.prototype.send=function(e,t){return b(this,void 0,void 0,(function(){var n=this;return w(this,(function(r){return[2,new Promise((function(r,i){var o=Ie();if(!(null==o?void 0:o.navigator.sendBeacon))throw new Error("SendBeaconTransport is not supported");try{var s=JSON.stringify(t);return r(o.navigator.sendBeacon(e,JSON.stringify(t))?n.buildResponse({code:200,events_ingested:t.events.length,payload_size_bytes:s.length,server_upload_time:Date.now()}):n.buildResponse({code:500}))}catch(a){i(a)}}))]}))}))},t}(Ye),st=function(e,t,n){return void 0===n&&(n=!0),b(void 0,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,d;return w(this,(function(f){switch(f.label){case 0:return r=function(e){return"".concat(S.toLowerCase(),"_").concat(e.substring(0,6))}(e),[4,t.getRaw(r)];case 1:return(i=f.sent())?n?[4,t.remove(r)]:[3,3]:[2,{optOut:!1}];case 2:f.sent(),f.label=3;case 3:return o=_(i.split("."),6),s=o[0],a=o[1],u=o[2],c=o[3],l=o[4],d=o[5],[2,{deviceId:s,userId:ut(a),sessionId:at(c),lastEventId:at(d),lastEventTime:at(l),optOut:Boolean(u)}]}}))}))},at=function(e){var t=parseInt(e,32);if(!isNaN(t))return t},ut=function(e){if(atob&&escape&&e)try{return decodeURIComponent(escape(atob(e)))}catch(t){return}},ct="[Amplitude]",lt=("".concat(ct," Page Viewed"),"".concat(ct," Form Started")),dt="".concat(ct," Form Submitted"),ft="".concat(ct," File Downloaded"),pt="session_start",ht="session_end",vt="".concat(ct," File Extension"),gt="".concat(ct," File Name"),yt="".concat(ct," Link ID"),mt="".concat(ct," Link Text"),bt="".concat(ct," Link URL"),wt="".concat(ct," Form ID"),_t="".concat(ct," Form Name"),Et="".concat(ct," Form Destination"),It="cookie",St=function(e){function t(t,n,r,i,o,s,a,u,c,l,f,p,h,v,g,y,m,b,w,_,E,I,S,T,O,k,N,P,x,C,R,D,U,j){void 0===r&&(r=new We),void 0===i&&(i={domain:"",expiration:365,sameSite:"Lax",secure:!1,upgrade:!0}),void 0===u&&(u=1e3),void 0===c&&(c=5),void 0===l&&(l=30),void 0===f&&(f=It),void 0===y&&(y=new A),void 0===m&&(m=d.Warn),void 0===w&&(w=!1),void 0===_&&(_=!1),void 0===S&&(S=""),void 0===T&&(T="US"),void 0===k&&(k=18e5),void 0===N&&(N=new nt({loggerProvider:y})),void 0===P&&(P={ipAddress:!0,language:!0,platform:!0}),void 0===x&&(x="fetch"),void 0===C&&(C=!1),void 0===R&&(R=!1);var L=e.call(this,{apiKey:t,storageProvider:N,transportProvider:kt(x)})||this;return L.apiKey=t,L.appVersion=n,L.cookieOptions=i,L.defaultTracking=o,L.autocapture=s,L.flushIntervalMillis=u,L.flushMaxRetries=c,L.flushQueueSize=l,L.identityStorage=f,L.ingestionMetadata=p,L.instanceName=h,L.loggerProvider=y,L.logLevel=m,L.minIdLength=b,L.offline=w,L.partnerId=E,L.plan=I,L.serverUrl=S,L.serverZone=T,L.sessionTimeout=k,L.storageProvider=N,L.trackingOptions=P,L.transport=x,L.useBatch=C,L.fetchRemoteConfig=R,L._optOut=!1,L._cookieStorage=r,L.deviceId=a,L.lastEventId=v,L.lastEventTime=g,L.optOut=_,L.sessionId=O,L.pageCounter=U,L.userId=D,L.debugLogsEnabled=j,L.loggerProvider.enable(j?d.Debug:L.logLevel),L}return y(t,e),Object.defineProperty(t.prototype,"cookieStorage",{get:function(){return this._cookieStorage},set:function(e){this._cookieStorage!==e&&(this._cookieStorage=e,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"deviceId",{get:function(){return this._deviceId},set:function(e){this._deviceId!==e&&(this._deviceId=e,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userId",{get:function(){return this._userId},set:function(e){this._userId!==e&&(this._userId=e,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sessionId",{get:function(){return this._sessionId},set:function(e){this._sessionId!==e&&(this._sessionId=e,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"optOut",{get:function(){return this._optOut},set:function(e){this._optOut!==e&&(this._optOut=e,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastEventTime",{get:function(){return this._lastEventTime},set:function(e){this._lastEventTime!==e&&(this._lastEventTime=e,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastEventId",{get:function(){return this._lastEventId},set:function(e){this._lastEventId!==e&&(this._lastEventId=e,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageCounter",{get:function(){return this._pageCounter},set:function(e){this._pageCounter!==e&&(this._pageCounter=e,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"debugLogsEnabled",{set:function(e){this._debugLogsEnabled!==e&&(this._debugLogsEnabled=e,this.updateStorage())},enumerable:!1,configurable:!0}),t.prototype.updateStorage=function(){var e={deviceId:this._deviceId,userId:this._userId,sessionId:this._sessionId,optOut:this._optOut,lastEventTime:this._lastEventTime,lastEventId:this._lastEventId,pageCounter:this._pageCounter,debugLogsEnabled:this._debugLogsEnabled};this.cookieStorage.set(Qe(this.apiKey),e)},t}(x),Tt=function(e,t,n){return void 0===t&&(t={}),b(void 0,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,d,f,p,h,v,g,y,b,_,E,I,S,T,O,k,N,A,P,x,C,R,D,j,L,q,M,F,V,K,G,z,B,$,W,Q;return w(this,(function(w){switch(w.label){case 0:return r=t.identityStorage||It,I={},r===It?[3,1]:(o="",[3,5]);case 1:return null===(T=null===(S=t.cookieOptions)||void 0===S?void 0:S.domain)||void 0===T?[3,2]:(s=T,[3,4]);case 2:return[4,Nt()];case 3:s=w.sent(),w.label=4;case 4:o=s,w.label=5;case 5:return i=m.apply(void 0,[(I.domain=o,I.expiration=365,I.sameSite="Lax",I.secure=!1,I.upgrade=!0,I),t.cookieOptions]),a=Ot(t.identityStorage,i),[4,st(e,a,null===(k=null===(O=t.cookieOptions)||void 0===O?void 0:O.upgrade)||void 0===k||k)];case 6:return u=w.sent(),[4,a.get(Qe(e))];case 7:return c=w.sent(),l=Se(),d=null!==(C=null!==(x=null!==(P=null!==(A=null!==(N=t.deviceId)&&void 0!==N?N:l.ampDeviceId)&&void 0!==A?A:l.deviceId)&&void 0!==P?P:null==c?void 0:c.deviceId)&&void 0!==x?x:u.deviceId)&&void 0!==C?C:U(),f=null!==(R=null==c?void 0:c.lastEventId)&&void 0!==R?R:u.lastEventId,p=null!==(D=null==c?void 0:c.lastEventTime)&&void 0!==D?D:u.lastEventTime,h=null!==(L=null!==(j=t.optOut)&&void 0!==j?j:null==c?void 0:c.optOut)&&void 0!==L?L:u.optOut,v=null!==(q=null==c?void 0:c.sessionId)&&void 0!==q?q:u.sessionId,g=null!==(F=null!==(M=t.userId)&&void 0!==M?M:null==c?void 0:c.userId)&&void 0!==F?F:u.userId,n.previousSessionDeviceId=null!==(V=null==c?void 0:c.deviceId)&&void 0!==V?V:u.deviceId,n.previousSessionUserId=null!==(K=null==c?void 0:c.userId)&&void 0!==K?K:u.userId,y={ipAddress:null===(z=null===(G=t.trackingOptions)||void 0===G?void 0:G.ipAddress)||void 0===z||z,language:null===($=null===(B=t.trackingOptions)||void 0===B?void 0:B.language)||void 0===$||$,platform:null===(Q=null===(W=t.trackingOptions)||void 0===W?void 0:W.platform)||void 0===Q||Q},b=null==c?void 0:c.pageCounter,_=null==c?void 0:c.debugLogsEnabled,void 0!==t.autocapture&&(t.defaultTracking=t.autocapture),[4,(E=new St(e,t.appVersion,a,i,t.defaultTracking,t.autocapture,d,t.flushIntervalMillis,t.flushMaxRetries,t.flushQueueSize,r,t.ingestionMetadata,t.instanceName,f,p,t.loggerProvider,t.logLevel,t.minIdLength,t.offline,h,t.partnerId,t.plan,t.serverUrl,t.serverZone,v,t.sessionTimeout,t.storageProvider,y,t.transport,t.useBatch,t.fetchRemoteConfig,g,b,_)).storageProvider.isEnabled()];case 8:return w.sent()||(E.loggerProvider.warn("Storage provider ".concat(E.storageProvider.constructor.name," is not enabled. Falling back to MemoryStorage.")),E.storageProvider=new We),[2,E]}}))}))},Ot=function(e,t){switch(void 0===e&&(e=It),void 0===t&&(t={}),e){case"localStorage":return new nt;case"sessionStorage":return new rt;case"none":return new We;default:return new He(m(m({},t),{expirationDays:t.expiration}))}},kt=function(e){return"xhr"===e?new it:"beacon"===e?new ot:new Ze},Nt=function(e){return b(void 0,void 0,void 0,(function(){var t,n,r,i,o,s,a;return w(this,(function(u){switch(u.label){case 0:return[4,(new He).isEnabled()];case 1:if(!u.sent()||!e&&("undefined"==typeof location||!location.hostname))return[2,""];for(t=null!=e?e:location.hostname,n=t.split("."),r=[],i="AMP_TLDTEST",o=n.length-2;o>=0;--o)r.push(n.slice(o).join("."));o=0,u.label=2;case 2:return o<r.length?(s=r[o],[4,(a=new He({domain:"."+s})).set(i,1)]):[3,7];case 3:return u.sent(),[4,a.get(i)];case 4:return u.sent()?[4,a.remove(i)]:[3,6];case 5:return u.sent(),[2,"."+s];case 6:return o++,[3,2];case 7:return[2,""]}}))}))};var At=function(){return At=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},At.apply(this,arguments)};function Pt(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function xt(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(u){a=[6,u],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}Object.create;function Ct(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function Rt(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;"function"==typeof SuppressedError&&SuppressedError;var Dt=function(e){var t={};for(var n in e){var r=e[n];r&&(t[n]=r)}return t},Ut=function(e){var t;void 0===e&&(e={});var n,r,i=Ie(),o=void 0,s=e.trackOn,a=e.trackHistoryChanges,u=e.eventType,c=void 0===u?"[Amplitude] Page Viewed":u,l=function(e){var t=e;try{t=decodeURI(e)}catch(n){null==o||o.error("Malformed URI sequence: ",n)}return t},d=function(){return Pt(void 0,void 0,void 0,(function(){var e,t,n;return xt(this,(function(r){switch(r.label){case 0:return e=l("undefined"!=typeof location&&location.href||""),n={event_type:c},t=[{}],[4,jt()];case 1:return[2,(n.event_properties=At.apply(void 0,[At.apply(void 0,t.concat([r.sent()])),{"[Amplitude] Page Domain":"undefined"!=typeof location&&location.hostname||"","[Amplitude] Page Location":e,"[Amplitude] Page Path":"undefined"!=typeof location&&l(location.pathname)||"","[Amplitude] Page Title":"undefined"!=typeof document&&document.title||"","[Amplitude] Page URL":e.split("?")[0]}]),n)]}}))}))},f=function(){return void 0===s||"function"==typeof s&&s()},p="undefined"!=typeof location?location.href:null,h=function(){return Pt(void 0,void 0,void 0,(function(){var e,n,r,i;return xt(this,(function(s){switch(s.label){case 0:return e=location.href,n=qt(a,e,p||"")&&f(),p=e,n?(null==o||o.log("Tracking page view event"),null!=t?[3,1]:(void 0,[3,3])):[3,4];case 1:return i=(r=t).track,[4,d()];case 2:i.apply(r,[s.sent()]),s.label=3;case 3:s.label=4;case 4:return[2]}}))}))},v=function(){h()},g={name:"@amplitude/plugin-page-view-tracking-browser",type:"enrichment",setup:function(e,s){return Pt(void 0,void 0,void 0,(function(){var a,u;return xt(this,(function(c){switch(c.label){case 0:return t=s,r=e,(o=e.loggerProvider).log("Installing @amplitude/plugin-page-view-tracking-browser"),i&&(i.addEventListener("popstate",v),n=i.history.pushState,i.history.pushState=new Proxy(i.history.pushState,{apply:function(e,t,n){var r=Ct(n,3),i=r[0],o=r[1],s=r[2];e.apply(t,[i,o,s]),h()}})),f()?(o.log("Tracking page view event"),u=(a=t).track,[4,d()]):[3,2];case 1:u.apply(a,[c.sent()]),c.label=2;case 2:return[2]}}))}))},execute:function(e){return Pt(void 0,void 0,void 0,(function(){var t;return xt(this,(function(n){switch(n.label){case 0:return"attribution"===s&&Lt(e)?(null==o||o.log("Enriching campaign event to page view event with campaign parameters"),[4,d()]):[3,2];case 1:t=n.sent(),e.event_type=t.event_type,e.event_properties=At(At({},e.event_properties),t.event_properties),n.label=2;case 2:return r&&e.event_type===c&&(r.pageCounter=r.pageCounter?r.pageCounter+1:1,e.event_properties=At(At({},e.event_properties),{"[Amplitude] Page Counter":r.pageCounter})),[2,e]}}))}))},teardown:function(){return Pt(void 0,void 0,void 0,(function(){return xt(this,(function(e){return i&&(i.removeEventListener("popstate",v),n&&(i.history.pushState=n)),[2]}))}))}};return g},jt=function(){return Pt(void 0,void 0,void 0,(function(){var e;return xt(this,(function(t){switch(t.label){case 0:return e=Dt,[4,(new Oe).parse()];case 1:return[2,e.apply(void 0,[t.sent()])]}}))}))},Lt=function(e){if("$identify"===e.event_type&&e.user_properties){var t=e.user_properties,n=t[L.SET]||{},r=t[L.UNSET]||{},i=Rt(Rt([],Ct(Object.keys(n)),!1),Ct(Object.keys(r)),!1);return Object.keys(be).every((function(e){return i.includes(e)}))}return!1},qt=function(e,t,n){if("pathOnly"===e){if(""==n)return!0;var r=new URL(t),i=new URL(n);return r.origin+r.pathname!==i.origin+i.pathname}return t!==n},Mt=function(){var e,t=[],n=function(e,n,r){e.addEventListener(n,r),t.push({element:e,type:n,handler:r})};return{name:"@amplitude/plugin-form-interaction-tracking-browser",type:"enrichment",setup:function(t,r){return b(void 0,void 0,void 0,(function(){var i;return w(this,(function(o){return null===(i=Ie())||void 0===i||i.addEventListener("load",(function(){if(r){if("undefined"!=typeof document){var i=function(e){var t=!1;n(e,"change",(function(){var n;t||r.track(lt,((n={})[wt]=Ft(e.id),n[_t]=Ft(e.name),n[Et]=e.action,n)),t=!0})),n(e,"submit",(function(){var n,i;t||r.track(lt,((n={})[wt]=Ft(e.id),n[_t]=Ft(e.name),n[Et]=e.action,n)),r.track(dt,((i={})[wt]=Ft(e.id),i[_t]=Ft(e.name),i[Et]=e.action,i)),t=!1}))};Array.from(document.getElementsByTagName("form")).forEach(i),"undefined"!=typeof MutationObserver&&(e=new MutationObserver((function(e){e.forEach((function(e){e.addedNodes.forEach((function(e){"FORM"===e.nodeName&&i(e),"querySelectorAll"in e&&"function"==typeof e.querySelectorAll&&Array.from(e.querySelectorAll("form")).map(i)}))}))}))).observe(document.body,{subtree:!0,childList:!0})}}else t.loggerProvider.warn("Form interaction tracking requires a later version of @amplitude/analytics-browser. Form interaction events are not tracked.")})),[2]}))}))},execute:function(e){return b(void 0,void 0,void 0,(function(){return w(this,(function(t){return[2,e]}))}))},teardown:function(){return b(void 0,void 0,void 0,(function(){return w(this,(function(n){return null==e||e.disconnect(),t.forEach((function(e){var t=e.element,n=e.type,r=e.handler;null==t||t.removeEventListener(n,r)})),t=[],[2]}))}))}}},Ft=function(e){if("string"==typeof e)return e},Vt=function(){var e,t=[];return{name:"@amplitude/plugin-file-download-tracking-browser",type:"enrichment",setup:function(n,r){return b(void 0,void 0,void 0,(function(){var i;return w(this,(function(o){return null===(i=Ie())||void 0===i||i.addEventListener("load",(function(){if(r){if("undefined"!=typeof document){var o=function(e){var n;try{n=new URL(e.href,window.location.href)}catch(i){return}var o=s.exec(n.href),a=null==o?void 0:o[1];a&&function(e,n,r){e.addEventListener(n,r),t.push({element:e,type:n,handler:r})}(e,"click",(function(){var t;a&&r.track(ft,((t={})[vt]=a,t[gt]=n.pathname,t[yt]=e.id,t[mt]=e.text,t[bt]=e.href,t))}))},s=/\.(pdf|xlsx?|docx?|txt|rtf|csv|exe|key|pp(s|t|tx)|7z|pkg|rar|gz|zip|avi|mov|mp4|mpe?g|wmv|midi?|mp3|wav|wma)(\?.+)?$/;Array.from(document.getElementsByTagName("a")).forEach(o),"undefined"!=typeof MutationObserver&&(e=new MutationObserver((function(e){e.forEach((function(e){e.addedNodes.forEach((function(e){"A"===e.nodeName&&o(e),"querySelectorAll"in e&&"function"==typeof e.querySelectorAll&&Array.from(e.querySelectorAll("a")).map(o)}))}))}))).observe(document.body,{subtree:!0,childList:!0})}}else n.loggerProvider.warn("File download tracking requires a later version of @amplitude/analytics-browser. File download events are not tracked.")})),[2]}))}))},execute:function(e){return b(void 0,void 0,void 0,(function(){return w(this,(function(t){return[2,e]}))}))},teardown:function(){return b(void 0,void 0,void 0,(function(){return w(this,(function(n){return null==e||e.disconnect(),t.forEach((function(e){var t=e.element,n=e.type,r=e.handler;null==t||t.removeEventListener(n,r)})),t=[],[2]}))}))}}},Kt=!1,Gt=function(){var e=Ie(),t=[],n=function(n,r){e&&(e.addEventListener(n,r),t.push({type:n,handler:r}))};return{name:"@amplitude/plugin-network-checker-browser",type:"before",setup:function(e,t){return b(void 0,void 0,void 0,(function(){return w(this,(function(r){return"undefined"==typeof navigator?(e.loggerProvider.debug("Network connectivity checker plugin is disabled because navigator is not available."),e.offline=!1,[2]):(e.offline=!navigator.onLine,n("online",(function(){e.loggerProvider.debug("Network connectivity changed to online."),e.offline=!1,setTimeout((function(){t.flush()}),e.flushIntervalMillis)})),n("offline",(function(){e.loggerProvider.debug("Network connectivity changed to offline."),e.offline=!0})),[2])}))}))},teardown:function(){return b(void 0,void 0,void 0,(function(){return w(this,(function(n){return t.forEach((function(t){var n=t.type,r=t.handler;e&&e.removeEventListener(n,r)})),t=[],[2]}))}))}}};var zt=function(){return zt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},zt.apply(this,arguments)};function Bt(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function $t(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(u){a=[6,u],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}Object.create;function Wt(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}Object.create;"function"==typeof SuppressedError&&SuppressedError;var Qt;!function(e){e.US="US",e.EU="EU"}(Qt||(Qt={}));var Ht="Remote config fetch rejected due to timeout after 5 seconds",Jt="Unexpected error occurred",Xt=function(){function e(e){var t=e.localConfig,n=e.configKeys,r=this;this.retryTimeout=1e3,this.attempts=0,this.sessionTargetingMatch=!1,this.metrics={},this.getRemoteConfig=function(e,t,n){return Bt(r,void 0,void 0,(function(){var r,i,o;return $t(this,(function(s){switch(s.label){case 0:return r=Date.now(),[4,this.fetchWithTimeout(n)];case 1:return(i=s.sent())&&(o=i.configs&&i.configs[e])?(this.metrics.fetchTimeAPISuccess=Date.now()-r,[2,o[t]]):(this.metrics.fetchTimeAPIFail=Date.now()-r,[2,void 0])}}))}))},this.fetchWithTimeout=function(e){return Bt(r,void 0,void 0,(function(){var t,n,r;return $t(this,(function(i){switch(i.label){case 0:return t=new AbortController,n=setTimeout((function(){return t.abort()}),5e3),[4,this.fetchRemoteConfig(t.signal,e)];case 1:return r=i.sent(),clearTimeout(n),[2,r]}}))}))},this.fetchRemoteConfig=function(e,t){return Bt(r,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,d,f,p;return $t(this,(function(h){switch(h.label){case 0:if(t===this.lastFetchedSessionId&&this.attempts>=this.localConfig.flushMaxRetries)return[2,this.completeRequest({err:"Remote config fetch rejected due to exceeded retry count"})];if(e.aborted)return[2,this.completeRequest({err:Ht})];t!==this.lastFetchedSessionId&&(this.lastFetchedSessionId=t,this.attempts=0),h.label=1;case 1:h.trys.push([1,3,,4]),n=new URLSearchParams({api_key:this.localConfig.apiKey});try{for(r=Wt(this.configKeys),i=r.next();!i.done;i=r.next())o=i.value,n.append("config_keys",o)}catch(v){d={error:v}}finally{try{i&&!i.done&&(f=r.return)&&f.call(r)}finally{if(d)throw d.error}}return t&&n.set("session_id",String(t)),s={headers:{Accept:"*/*"},method:"GET"},a="".concat(this.getServerUrl(),"?").concat(n.toString()),this.attempts+=1,[4,fetch(a,zt(zt({},s),{signal:e}))];case 2:if(null===(u=h.sent()))return[2,this.completeRequest({err:Jt})];switch((new Ye).buildStatus(u.status)){case E.Success:return this.attempts=0,[2,this.parseAndStoreConfig(u)];case E.Failed:return[2,this.retryFetch(e,t)];default:return[2,this.completeRequest({err:"Network error occurred, remote config fetch failed"})]}return[3,4];case 3:return c=h.sent(),l=c,e.aborted?[2,this.completeRequest({err:Ht})]:[2,this.completeRequest({err:null!==(p=l.message)&&void 0!==p?p:Jt})];case 4:return[2]}}))}))},this.retryFetch=function(e,t){return Bt(r,void 0,void 0,(function(){var n=this;return $t(this,(function(r){switch(r.label){case 0:return[4,new Promise((function(e){return setTimeout(e,n.attempts*n.retryTimeout)}))];case 1:return r.sent(),[2,this.fetchRemoteConfig(e,t)]}}))}))},this.parseAndStoreConfig=function(e){return Bt(r,void 0,void 0,(function(){var t;return $t(this,(function(n){switch(n.label){case 0:return[4,e.json()];case 1:return t=n.sent(),this.completeRequest({success:"Remote config successfully fetched"}),[2,t]}}))}))},this.localConfig=t,this.configKeys=n}return e.prototype.getServerUrl=function(){return this.localConfig.serverZone===Qt.STAGING?"https://sr-client-cfg.stag2.amplitude.com/config":this.localConfig.serverZone===Qt.EU?"https://sr-client-cfg.eu.amplitude.com/config":"https://sr-client-cfg.amplitude.com/config"},e.prototype.completeRequest=function(e){var t=e.err,n=e.success;if(t)throw new Error(t);n&&this.localConfig.loggerProvider.log(n)},e}(),Yt=function(e){var t=e.localConfig,n=e.configKeys;return Bt(void 0,void 0,void 0,(function(){return $t(this,(function(e){return[2,new Xt({localConfig:t,configKeys:n})]}))}))},Zt=function(){function e(e){this.config=e,this.config.loggerProvider.debug("Local configuration before merging with remote config",JSON.stringify(this.config,null,2))}return e.prototype.initialize=function(){return b(this,void 0,void 0,(function(){var e;return w(this,(function(t){switch(t.label){case 0:return e=this,[4,Yt({localConfig:this.config,configKeys:["analyticsSDK"]})];case 1:return e.remoteConfigFetch=t.sent(),[2]}}))}))},e.prototype.generateJoinedConfig=function(){var e,t,n,r;return b(this,void 0,void 0,(function(){var i,o,s;return w(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),(o=this.remoteConfigFetch)?[4,this.remoteConfigFetch.getRemoteConfig("analyticsSDK","browserSDK",this.config.sessionId)]:[3,2];case 1:o=a.sent(),a.label=2;case 2:return i=o,this.config.loggerProvider.debug("Remote configuration:",JSON.stringify(i,null,2)),i&&"autocapture"in i&&("boolean"==typeof i.autocapture&&(this.config.autocapture=i.autocapture),"object"==typeof i.autocapture&&(void 0===this.config.autocapture&&(this.config.autocapture=i.autocapture),"boolean"==typeof this.config.autocapture&&(this.config.autocapture=m({attribution:this.config.autocapture,fileDownloads:this.config.autocapture,formInteractions:this.config.autocapture,pageViews:this.config.autocapture,sessions:this.config.autocapture,elementInteractions:this.config.autocapture},i.autocapture)),"object"==typeof this.config.autocapture&&(this.config.autocapture=m(m({},this.config.autocapture),i.autocapture))),this.config.defaultTracking=this.config.autocapture),this.config.loggerProvider.debug("Joined configuration: ",JSON.stringify(this.config,null,2)),null!==(e=(r=this.config).requestMetadata)&&void 0!==e||(r.requestMetadata=new D),(null===(t=this.remoteConfigFetch)||void 0===t?void 0:t.metrics.fetchTimeAPISuccess)&&this.config.requestMetadata.recordHistogram("remote_config_fetch_time_API_success",this.remoteConfigFetch.metrics.fetchTimeAPISuccess),(null===(n=this.remoteConfigFetch)||void 0===n?void 0:n.metrics.fetchTimeAPIFail)&&this.config.requestMetadata.recordHistogram("remote_config_fetch_time_API_fail",this.remoteConfigFetch.metrics.fetchTimeAPIFail),[3,4];case 3:return s=a.sent(),this.config.loggerProvider.error("Failed to fetch remote configuration because of error: ",s),[3,4];case 4:return[2,this.config]}}))}))},e}(),en=function(e,t){return en=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},en(e,t)};function tn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}en(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var nn=function(){return nn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},nn.apply(this,arguments)};function rn(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function on(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(u){a=[6,u],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}Object.create;function sn(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function an(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function un(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function cn(e){return this instanceof cn?(this.v=e,this):new cn(e)}function ln(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",(function(e){return function(t){return Promise.resolve(t).then(e,c)}})),r[Symbol.asyncIterator]=function(){return this},r;function s(e,t){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||a(e,t)}))},t&&(r[e]=t(r[e])))}function a(e,t){try{(n=i[e](t)).value instanceof cn?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function u(e){a("next",e)}function c(e){a("throw",e)}function l(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function dn(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=sn(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}Object.create;"function"==typeof SuppressedError&&SuppressedError;var fn=["a","button","input","select","textarea","label","video","audio",'[contenteditable="true" i]',"[data-amp-default-track]",".amp-default-track"],pn="data-amp-track-",hn=["div","span","h1","h2","h3","h4","h5","h6"],vn="[Amplitude] Element Clicked",gn="[Amplitude] Element Tag",yn="[Amplitude] Element Text",mn="[Amplitude] Element Selector",bn="[Amplitude] Page URL",wn="https://app.amplitude.com",_n={US:wn,EU:"https://app.eu.amplitude.com",STAGING:"https://apps.stag2.amplitude.com"},En="amp-visual-tagging-selector-highlight",In=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function Sn(e){return"function"==typeof e}function Tn(e){return Sn(null==e?void 0:e.then)}function On(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var kn=On((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function Nn(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var An=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var e,t,n,r,i;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var s=sn(o),a=s.next();!a.done;a=s.next()){a.value.remove(this)}}catch(p){e={error:p}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}else o.remove(this);var u=this.initialTeardown;if(Sn(u))try{u()}catch(h){i=h instanceof kn?h.errors:[h]}var c=this._finalizers;if(c){this._finalizers=null;try{for(var l=sn(c),d=l.next();!d.done;d=l.next()){var f=d.value;try{xn(f)}catch(v){i=null!=i?i:[],v instanceof kn?i=un(un([],an(i)),an(v.errors)):i.push(v)}}}catch(g){n={error:g}}finally{try{d&&!d.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}}if(i)throw new kn(i)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)xn(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&Nn(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&Nn(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}();An.EMPTY;function Pn(e){return e instanceof An||e&&"closed"in e&&Sn(e.remove)&&Sn(e.add)&&Sn(e.unsubscribe)}function xn(e){Sn(e)?e():e.unsubscribe()}var Cn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Rn={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=Rn.delegate;return(null==i?void 0:i.setTimeout)?i.setTimeout.apply(i,un([e,t],an(n))):setTimeout.apply(void 0,un([e,t],an(n)))},clearTimeout:function(e){var t=Rn.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function Dn(e){Rn.setTimeout((function(){var t=Cn.onUnhandledError;if(!t)throw e;t(e)}))}function Un(){}var jn=Ln("C",void 0,void 0);function Ln(e,t,n){return{kind:e,value:t,error:n}}var qn=null;var Mn=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,Pn(t)&&t.add(n)):n.destination=$n,n}return tn(t,e),t.create=function(e,t,n){return new Gn(e,t,n)},t.prototype.next=function(e){this.isStopped?Bn(function(e){return Ln("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?Bn(Ln("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?Bn(jn,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(An),Fn=Function.prototype.bind;function Vn(e,t){return Fn.call(e,t)}var Kn=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(n){zn(n)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(n){zn(n)}else zn(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){zn(t)}},e}(),Gn=function(e){function t(t,n,r){var i,o,s=e.call(this)||this;Sn(t)||!t?i={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:s&&Cn.useDeprecatedNextContext?((o=Object.create(t)).unsubscribe=function(){return s.unsubscribe()},i={next:t.next&&Vn(t.next,o),error:t.error&&Vn(t.error,o),complete:t.complete&&Vn(t.complete,o)}):i=t;return s.destination=new Kn(i),s}return tn(t,e),t}(Mn);function zn(e){var t;Cn.useDeprecatedSynchronousErrorHandling?(t=e,Cn.useDeprecatedSynchronousErrorHandling&&qn&&(qn.errorThrown=!0,qn.error=t)):Dn(e)}function Bn(e,t){var n=Cn.onStoppedNotification;n&&Rn.setTimeout((function(){return n(e,t)}))}var $n={closed:!0,next:Un,error:function(e){throw e},complete:Un},Wn="function"==typeof Symbol&&Symbol.observable||"@@observable";function Qn(e){return e}function Hn(e){return 0===e.length?Qn:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var Jn=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,i=this,o=(r=e)&&r instanceof Mn||function(e){return e&&Sn(e.next)&&Sn(e.error)&&Sn(e.complete)}(r)&&Pn(r)?e:new Gn(e,t,n);return function(e){if(Cn.useDeprecatedSynchronousErrorHandling){var t=!qn;if(t&&(qn={errorThrown:!1,error:null}),e(),t){var n=qn,r=n.errorThrown,i=n.error;if(qn=null,r)throw i}}else e()}((function(){var e=i,t=e.operator,n=e.source;o.add(t?t.call(o,n):n?i._subscribe(o):i._trySubscribe(o))})),o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=Xn(t))((function(t,r){var i=new Gn({next:function(t){try{e(t)}catch(n){r(n),i.unsubscribe()}},error:r,complete:t});n.subscribe(i)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[Wn]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Hn(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=Xn(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function Xn(e){var t;return null!==(t=null!=e?e:Cn.Promise)&&void 0!==t?t:Promise}function Yn(e){return Sn(e[Wn])}function Zn(e){return Symbol.asyncIterator&&Sn(null==e?void 0:e[Symbol.asyncIterator])}function er(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var tr="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function nr(e){return Sn(null==e?void 0:e[tr])}function rr(e){return ln(this,arguments,(function(){var t,n,r;return on(this,(function(i){switch(i.label){case 0:t=e.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,cn(t.read())];case 3:return n=i.sent(),r=n.value,n.done?[4,cn(void 0)]:[3,5];case 4:return[2,i.sent()];case 5:return[4,cn(r)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function ir(e){return Sn(null==e?void 0:e.getReader)}function or(e){if(e instanceof Jn)return e;if(null!=e){if(Yn(e))return i=e,new Jn((function(e){var t=i[Wn]();if(Sn(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(In(e))return r=e,new Jn((function(e){for(var t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()}));if(Tn(e))return n=e,new Jn((function(e){n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,Dn)}));if(Zn(e))return sr(e);if(nr(e))return t=e,new Jn((function(e){var n,r;try{for(var i=sn(t),o=i.next();!o.done;o=i.next()){var s=o.value;if(e.next(s),e.closed)return}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()}));if(ir(e))return sr(rr(e))}var t,n,r,i;throw er(e)}function sr(e){return new Jn((function(t){(function(e,t){var n,r,i,o;return rn(this,void 0,void 0,(function(){var s,a;return on(this,(function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),n=dn(e),u.label=1;case 1:return[4,n.next()];case 2:if((r=u.sent()).done)return[3,4];if(s=r.value,t.next(s),t.closed)return[2];u.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=u.sent(),i={error:a},[3,11];case 6:return u.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function ar(e){return function(t){if(function(e){return Sn(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(n){this.error(n)}}));throw new TypeError("Unable to lift unknown Observable type")}}function ur(e,t,n,r,i){return new cr(e,t,n,r,i)}var cr=function(e){function t(t,n,r,i,o,s){var a=e.call(this,t)||this;return a.onFinalize=o,a.shouldUnsubscribe=s,a._next=n?function(e){try{n(e)}catch(r){t.error(r)}}:e.prototype._next,a._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,a}return tn(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(Mn);function lr(e,t){return ar((function(n,r){var i=0;n.subscribe(ur(r,(function(n){r.next(e.call(t,n,i++))})))}))}function dr(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=!1);var o=t.schedule((function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()}),r);if(e.add(o),!i)return o}function fr(e,t,n){return void 0===n&&(n=1/0),Sn(t)?fr((function(n,r){return lr((function(e,i){return t(n,e,r,i)}))(or(e(n,r)))}),n):("number"==typeof t&&(n=t),ar((function(t,r){return function(e,t,n,r,i,o,s,a){var u=[],c=0,l=0,d=!1,f=function(){!d||u.length||c||t.complete()},p=function(e){return c<r?h(e):u.push(e)},h=function(e){o&&t.next(e),c++;var a=!1;or(n(e,l++)).subscribe(ur(t,(function(e){null==i||i(e),o?p(e):t.next(e)}),(function(){a=!0}),void 0,(function(){if(a)try{c--;for(var e=function(){var e=u.shift();s?dr(t,s,(function(){return h(e)})):h(e)};u.length&&c<r;)e();f()}catch(n){t.error(n)}})))};return e.subscribe(ur(t,p,(function(){d=!0,f()}))),function(){null==a||a()}}(t,r,e,n)})))}var pr=Array.isArray;function hr(e){return lr((function(t){return function(e,t){return pr(t)?e.apply(void 0,un([],an(t))):e(t)}(e,t)}))}var vr,gr,yr=["addListener","removeListener"],mr=["addEventListener","removeEventListener"],br=["on","off"];function wr(e,t,n,r){if(Sn(n)&&(r=n,n=void 0),r)return wr(e,t,n).pipe(hr(r));var i=an(function(e){return Sn(e.addEventListener)&&Sn(e.removeEventListener)}(e)?mr.map((function(r){return function(i){return e[r](t,i,n)}})):function(e){return Sn(e.addListener)&&Sn(e.removeListener)}(e)?yr.map(_r(e,t)):function(e){return Sn(e.on)&&Sn(e.off)}(e)?br.map(_r(e,t)):[],2),o=i[0],s=i[1];if(!o&&In(e))return fr((function(e){return wr(e,t,n)}))(or(e));if(!o)throw new TypeError("Invalid event target");return new Jn((function(e){var t=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.next(1<t.length?t:t[0])};return o(t),function(){return s(t)}}))}function _r(e,t){return function(n){return function(r){return e[n](t,r)}}}function Er(e,t){if(e.nodeType!==Node.ELEMENT_NODE)throw new Error("Can't generate CSS selector for non-element node type.");if("html"===e.tagName.toLowerCase())return"html";var n={root:document.body,idName:function(e){return!0},className:function(e){return!0},tagName:function(e){return!0},attr:function(e,t){return!1},seedMinLength:1,optimizedMinLength:2,threshold:1e3,maxNumberOfTries:1e4};vr=nn(nn({},n),t),gr=function(e,t){if(e.nodeType===Node.DOCUMENT_NODE)return e;if(e===t.root)return e.ownerDocument;return e}(vr.root,n);var r=Ir(e,"all",(function(){return Ir(e,"two",(function(){return Ir(e,"one",(function(){return Ir(e,"none")}))}))}));if(r){var i=Rr(Dr(r,e));return i.length>0&&(r=i[0]),Tr(r)}throw new Error("Selector was not found.")}function Ir(e,t,n){for(var r=null,i=[],o=e,s=0,a=function(){var e,a,u=Pr(function(e){var t=e.getAttribute("id");if(t&&vr.idName(t))return{name:"#"+CSS.escape(t),penalty:0};return null}(o))||Pr.apply(void 0,un([],an(function(e){var t=Array.from(e.attributes).filter((function(e){return vr.attr(e.name,e.value)}));return t.map((function(e){return{name:"[".concat(CSS.escape(e.name),'="').concat(CSS.escape(e.value),'"]'),penalty:.5}}))}(o)),!1))||Pr.apply(void 0,un([],an(function(e){var t=Array.from(e.classList).filter(vr.className);return t.map((function(e){return{name:"."+CSS.escape(e),penalty:1}}))}(o)),!1))||Pr(function(e){var t=e.tagName.toLowerCase();if(vr.tagName(t))return{name:t,penalty:2};return null}(o))||[{name:"*",penalty:3}],c=function(e){var t=e.parentNode;if(!t)return null;var n=t.firstChild;if(!n)return null;var r=0;for(;n&&(n.nodeType===Node.ELEMENT_NODE&&r++,n!==e);)n=n.nextSibling;return r}(o);if("all"==t)c&&(u=u.concat(u.filter(Ar).map((function(e){return Nr(e,c)}))));else if("two"==t)u=u.slice(0,1),c&&(u=u.concat(u.filter(Ar).map((function(e){return Nr(e,c)}))));else if("one"==t){var l=an(u=u.slice(0,1),1)[0];c&&Ar(l)&&(u=[Nr(l,c)])}else"none"==t&&(u=[{name:"*",penalty:3}],c&&(u=[Nr(u[0],c)]));try{for(var d=(e=void 0,sn(u)),f=d.next();!f.done;f=d.next()){(l=f.value).level=s}}catch(p){e={error:p}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(e)throw e.error}}if(i.push(u),i.length>=vr.seedMinLength&&(r=Sr(i,n)))return"break";o=o.parentElement,s++};o;){if("break"===a())break}return r||(r=Sr(i,n)),!r&&n?n():r}function Sr(e,t){var n,r;if(e.reduce((function(e,t){return e*t.length}),1)>vr.threshold)return t?t():null;var i=Rr(Cr(e));try{for(var o=sn(i),s=o.next();!s.done;s=o.next()){var a=s.value;if(kr(a))return a}}catch(u){n={error:u}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return null}function Tr(e){for(var t=e[0],n=t.name,r=1;r<e.length;r++){var i=e[r].level||0;n=t.level===i-1?"".concat(e[r].name," > ").concat(n):"".concat(e[r].name," ").concat(n),t=e[r]}return n}function Or(e){return e.map((function(e){return e.penalty})).reduce((function(e,t){return e+t}),0)}function kr(e){var t=Tr(e);switch(gr.querySelectorAll(t).length){case 0:throw new Error("Can't select any node with this selector: ".concat(t));case 1:return!0;default:return!1}}function Nr(e,t){return{name:e.name+":nth-child(".concat(t,")"),penalty:e.penalty+1}}function Ar(e){return"html"!==e.name&&!e.name.startsWith("#")}function Pr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.filter(xr);return n.length>0?n:null}function xr(e){return null!=e}function Cr(e,t){var n,r,i,o,s,a;return void 0===t&&(t=[]),on(this,(function(u){switch(u.label){case 0:if(!(e.length>0))return[3,9];u.label=1;case 1:u.trys.push([1,6,7,8]),n=sn(e[0]),r=n.next(),u.label=2;case 2:return r.done?[3,5]:(i=r.value,[5,sn(Cr(e.slice(1,e.length),t.concat(i)))]);case 3:u.sent(),u.label=4;case 4:return r=n.next(),[3,2];case 5:return[3,8];case 6:return o=u.sent(),s={error:o},[3,8];case 7:try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}return[7];case 8:return[3,11];case 9:return[4,t];case 10:u.sent(),u.label=11;case 11:return[2]}}))}function Rr(e){return un([],an(e),!1).sort((function(e,t){return Or(e)-Or(t)}))}function Dr(e,t,n){var r,i,o;return void 0===n&&(n={counter:0,visited:new Map}),on(this,(function(s){switch(s.label){case 0:if(!(e.length>2&&e.length>vr.optimizedMinLength))return[3,5];r=1,s.label=1;case 1:return r<e.length-1?n.counter>vr.maxNumberOfTries?[2]:(n.counter+=1,(i=un([],an(e),!1)).splice(r,1),o=Tr(i),n.visited.has(o)?[2]:kr(i)&&function(e,t){return gr.querySelector(Tr(e))===t}(i,t)?[4,i]:[3,4]):[3,5];case 2:return s.sent(),n.visited.set(o,!0),[5,sn(Dr(i,t,n))];case 3:s.sent(),s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}var Ur=["input","select","textarea"],jr=function(e,t){return function(n,r){var i,o,s,a=e.pageUrlAllowlist,u=e.shouldTrackEventResolver,c=null===(o=null===(i=null==r?void 0:r.tagName)||void 0===i?void 0:i.toLowerCase)||void 0===o?void 0:o.call(i);if(!c)return!1;if(u)return u(n,r);if(!Vr(window.location.href,a))return!1;var l=String(null==r?void 0:r.getAttribute("type"))||"";if("string"==typeof l)switch(l.toLowerCase()){case"hidden":case"password":return!1}if(t){var d=t.some((function(e){var t;return!!(null===(t=null==r?void 0:r.matches)||void 0===t?void 0:t.call(r,e))}));if(!d)return!1}switch(c){case"input":case"select":case"textarea":return"change"===n||"click"===n;default:var f=null===(s=null===window||void 0===window?void 0:window.getComputedStyle)||void 0===s?void 0:s.call(window,r);return!(!f||"pointer"!==f.getPropertyValue("cursor")||"click"!==n)||"click"===n}}},Lr=function(e){if(null==e)return!1;if("string"==typeof e){if(/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/.test((e||"").replace(/[- ]/g,"")))return!1;if(/(^\d{3}-?\d{2}-?\d{4}$)/.test(e))return!1}return!0},qr=function(e){var t,n,r,i=null===(n=null===(t=null==e?void 0:e.tagName)||void 0===t?void 0:t.toLowerCase)||void 0===n?void 0:n.call(t),o=e instanceof HTMLElement&&"true"===(null===(r=e.getAttribute("contenteditable"))||void 0===r?void 0:r.toLowerCase());return!Ur.includes(i)&&!o},Mr=function(e){var t="";return qr(e)&&e.childNodes&&e.childNodes.length&&e.childNodes.forEach((function(e){var n,r="";(n=e)&&3===n.nodeType?e.textContent&&(r=e.textContent):r=Mr(e),t+=r.split(/(\s+)/).filter(Lr).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)})),t},Fr=function(e,t){var n,r,i="";try{return i=Er(e,{className:function(e){return e!==En},maxNumberOfTries:1e3})}catch(l){if(t){var o=l;t.warn("Failed to get selector with finder, use fallback strategy instead: ".concat(o.toString()))}}var s=null===(r=null===(n=null==e?void 0:e.tagName)||void 0===n?void 0:n.toLowerCase)||void 0===r?void 0:r.call(n);s&&(i=s);var a=e.getAttribute("id"),u=e.getAttribute("class");if(a)i="#".concat(a);else if(u){var c=u.split(" ").filter((function(e){return e!==En})).join(".");c&&(i="".concat(i,".").concat(c))}return i},Vr=function(e,t){return!t||!t.length||t.some((function(t){return"string"==typeof t?e===t:e.match(t)}))},Kr=function(e){return Object.keys(e).reduce((function(t,n){var r=e[n];return function(e){return null==e||"object"==typeof e&&0===Object.keys(e).length||"string"==typeof e&&0===e.trim().length}(r)||(t[n]=r),t}),{})},Gr=function(e){var t,n=e.parentElement;if(!n)return"";try{t=n.querySelector(":scope>span,h1,h2,h3,h4,h5,h6")}catch(i){t=null}if(t){var r=t.textContent||"";return Lr(r)?r:""}return Gr(n)},zr=function(e,t){return e?t.some((function(t){var n;return null===(n=null==e?void 0:e.matches)||void 0===n?void 0:n.call(e,t)}))?e:zr(null==e?void 0:e.parentElement,t):null},Br=function(e,t){var n,r,i;if(!e)return{};var o=null===(i=null===(r=null==e?void 0:e.tagName)||void 0===r?void 0:r.toLowerCase)||void 0===i?void 0:i.call(r),s=Fr(e,t),a=((n={})[gn]=o,n[yn]=Mr(e),n[mn]=s,n[bn]=window.location.href.split("?")[0],n);return Kr(a)};var $r=function(e){return!(null===e.event.target||!e.closestTrackedAncestor)},Wr=function(){function e(e){var t=(void 0===e?{}:e).origin,n=void 0===t?wn:t,r=this;this.endpoint=wn,this.requestCallbacks={},this.onSelect=function(e){r.notify({action:"element-selected",data:e})},this.onTrack=function(e,t){"selector-mode-changed"===e?r.notify({action:"track-selector-mode-changed",data:t}):"selector-moved"===e&&r.notify({action:"track-selector-moved",data:t})},this.endpoint=n}return e.prototype.notify=function(e){var t,n,r,i;null===(n=null===(t=this.logger)||void 0===t?void 0:t.debug)||void 0===n||n.call(t,"Message sent: ",JSON.stringify(e)),null===(i=null===(r=window.opener)||void 0===r?void 0:r.postMessage)||void 0===i||i.call(r,e,this.endpoint)},e.prototype.sendRequest=function(e,t,n){var r=this;void 0===n&&(n={timeout:15e3});var i="".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),o={id:i,action:e,args:t};return new Promise((function(t,s){r.requestCallbacks[i]={resolve:t,reject:s},r.notify(o),(null==n?void 0:n.timeout)>0&&setTimeout((function(){s(new Error("".concat(e," timed out (id: ").concat(i,")"))),delete r.requestCallbacks[i]}),n.timeout)}))},e.prototype.handleResponse=function(e){var t;this.requestCallbacks[e.id]?(this.requestCallbacks[e.id].resolve(e.responseData),delete this.requestCallbacks[e.id]):null===(t=this.logger)||void 0===t||t.warn("No callback found for request id: ".concat(e.id))},e.prototype.setup=function(e){var t=this,n=void 0===e?{}:e,r=n.logger,i=n.endpoint,o=n.isElementSelectable,s=n.cssSelectorAllowlist,a=n.actionClickAllowlist;this.logger=r,i&&this.endpoint===wn&&(this.endpoint=i);var u=null;window.addEventListener("message",(function(e){var n,r,i,c,l;if(null===(r=null===(n=t.logger)||void 0===n?void 0:n.debug)||void 0===r||r.call(n,"Message received: ",JSON.stringify(e)),t.endpoint===e.origin){var d,f=null==e?void 0:e.data,p=null==f?void 0:f.action;if(p)if("id"in f)null===(c=null===(i=t.logger)||void 0===i?void 0:i.debug)||void 0===c||c.call(i,"Received Response to previous request: ",JSON.stringify(e)),t.handleResponse(f);else if("ping"===p)t.notify({action:"pong"});else if("initialize-visual-tagging-selector"===p){var h=null==f?void 0:f.data;(d="https://cdn.amplitude.com/libs/visual-tagging-selector-1.0.0-alpha.js.gz",new Promise((function(e,t){var n;try{var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src=d,r.addEventListener("load",(function(){e({status:!0})}),{once:!0}),r.addEventListener("error",(function(){t({status:!1,message:"Failed to load the script ".concat(d)})})),null===(n=document.head)||void 0===n||n.appendChild(r)}catch(i){t(i)}}))).then((function(){var e;u=null===(e=null===window||void 0===window?void 0:window.amplitudeVisualTaggingSelector)||void 0===e?void 0:e.call(window,{getEventTagProps:Br,isElementSelectable:function(e){return!o||o((null==h?void 0:h.actionType)||"click",e)},onTrack:t.onTrack,onSelect:t.onSelect,visualHighlightClass:En,messenger:t,cssSelectorAllowlist:s,actionClickAllowlist:a}),t.notify({action:"selector-loaded"})})).catch((function(){var e;null===(e=t.logger)||void 0===e||e.warn("Failed to initialize visual tagging selector")}))}else"close-visual-tagging-selector"===p&&(null===(l=null==u?void 0:u.close)||void 0===l||l.call(u))}})),this.notify({action:"page-loaded"})},e}(),Qr=["id","class","style","value","onclick","onchange","oninput","onblur","onsubmit","onfocus","onkeydown","onkeyup","onkeypress","data-reactid","data-react-checksum","data-reactroot"],Hr=["type"],Jr=["svg","path","g"],Xr=["password","hidden"];var Yr=function(e){var t;return e?(t=function(e,t){for(var n=0,r=0;r<e.length;r++){var i=e[r];if(null===i)n+=4;else{var o=Zr(i);n+=o?Array.from(o).length:4}if(n>t)return e.slice(0,r)}return e}(function(e){var t=[];if(!e)return t;t.push(e);for(var n=e.parentElement;n&&"HTML"!==n.tagName;)t.push(n),n=n.parentElement;return t}(e).map((function(e){return function(e){var t,n,r,i,o,s;if(null===e)return null;var a=String(e.tagName).toLowerCase(),u={tag:a},c=Array.from(null!==(i=null===(r=e.parentElement)||void 0===r?void 0:r.children)&&void 0!==i?i:[]);c.length&&(u.index=c.indexOf(e),u.indexOfType=c.filter((function(t){return t.tagName===e.tagName})).indexOf(e));var l=null===(s=null===(o=e.previousElementSibling)||void 0===o?void 0:o.tagName)||void 0===s?void 0:s.toLowerCase();l&&(u.prevSib=String(l));var d=e.getAttribute("id");d&&(u.id=String(d));var f=Array.from(e.classList);f.length&&(u.classes=f);var p={},h=Array.from(e.attributes).filter((function(e){return!Qr.includes(e.name)})),v=!qr(e);if(!Xr.includes(String(e.getAttribute("type")))&&!Jr.includes(a))try{for(var g=sn(h),y=g.next();!y.done;y=g.next()){var m=y.value;v&&!Hr.includes(m.name)||(p[m.name]=String(m.value).substring(0,128))}}catch(b){t={error:b}}finally{try{y&&!y.done&&(n=g.return)&&n.call(g)}finally{if(t)throw t.error}}return Object.keys(p).length&&(u.attrs=p),u}(e)})),1024),t):[]};function Zr(e,t){void 0===t&&(t=!1);try{if(null==e)return t?"None":null;if("string"==typeof e)return t?(e=e.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r")).includes('"')?"'".concat(e,"'"):e.includes("'")?'"'.concat(e.replace(/'/g,"\\'"),'"'):"'".concat(e,"'"):e;if("boolean"==typeof e)return e?"True":"False";if(Array.isArray(e)){var n=e.map((function(e){return Zr(e,!0)}));return"[".concat(n.join(", "),"]")}if("object"==typeof e){var r=Object.entries(e).filter((function(e){return null!=an(e,1)[0]})).map((function(e){var t=an(e,2),n=t[0],r=t[1];return"".concat(String(Zr(n,!0)),": ").concat(String(Zr(r,!0)))})),i="{".concat(r.join(", "),"}");return i.includes("\\'")&&(i=i.replace(/'/g,"'").replace(/'/g,"\\'")),i}return e.toString()}catch(o){return null}}function ei(e,t){return ar((function(n,r){var i=0;n.subscribe(ur(r,(function(n){return e.call(t,n,i++)&&r.next(n)})))}))}var ti=function(e){function t(t,n){return e.call(this)||this}return tn(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(An),ni={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=ni.delegate;return(null==i?void 0:i.setInterval)?i.setInterval.apply(i,un([e,t],an(n))):setInterval.apply(void 0,un([e,t],an(n)))},clearInterval:function(e){var t=ni.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},ri=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return tn(t,e),t.prototype.schedule=function(e,t){var n;if(void 0===t&&(t=0),this.closed)return this;this.state=e;var r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(i,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),ni.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&ni.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,r=!1;try{this.work(e)}catch(i){r=!0,n=i||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Nn(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(ti),ii={now:function(){return(ii.delegate||Date).now()},delegate:void 0},oi=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=ii.now,e}(),si=new(function(e){function t(t,n){void 0===n&&(n=oi.now);var r=e.call(this,t,n)||this;return r.actions=[],r._active=!1,r}return tn(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(oi))(ri),ai=si;function ui(e){return void 0===e&&(e=1/0),fr(Qn,e)}var ci=new Jn((function(e){return e.complete()}));function li(e){return e&&Sn(e.schedule)}function di(e){return e[e.length-1]}function fi(e){return li(di(e))?e.pop():void 0}function pi(e,t){return void 0===t&&(t=0),ar((function(n,r){n.subscribe(ur(r,(function(n){return dr(r,e,(function(){return r.next(n)}),t)}),(function(){return dr(r,e,(function(){return r.complete()}),t)}),(function(n){return dr(r,e,(function(){return r.error(n)}),t)})))}))}function hi(e,t){return void 0===t&&(t=0),ar((function(n,r){r.add(e.schedule((function(){return n.subscribe(r)}),t))}))}function vi(e,t){if(!e)throw new Error("Iterable cannot be null");return new Jn((function(n){dr(n,t,(function(){var r=e[Symbol.asyncIterator]();dr(n,t,(function(){r.next().then((function(e){e.done?n.complete():n.next(e.value)}))}),0,!0)}))}))}function gi(e,t){if(null!=e){if(Yn(e))return function(e,t){return or(e).pipe(hi(t),pi(t))}(e,t);if(In(e))return function(e,t){return new Jn((function(n){var r=0;return t.schedule((function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())}))}))}(e,t);if(Tn(e))return function(e,t){return or(e).pipe(hi(t),pi(t))}(e,t);if(Zn(e))return vi(e,t);if(nr(e))return function(e,t){return new Jn((function(n){var r;return dr(n,t,(function(){r=e[tr](),dr(n,t,(function(){var e,t,i;try{t=(e=r.next()).value,i=e.done}catch(o){return void n.error(o)}i?n.complete():n.next(t)}),0,!0)})),function(){return Sn(null==r?void 0:r.return)&&r.return()}}))}(e,t);if(ir(e))return function(e,t){return vi(rr(e),t)}(e,t)}throw er(e)}function yi(e,t){return t?gi(e,t):or(e)}function mi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=fi(e),r=function(e,t){return"number"==typeof di(e)?e.pop():t}(e,1/0),i=e;return i.length?1===i.length?or(i[0]):ui(r)(yi(i,n)):ci}function bi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ui(1)(yi(e,fi(e)))}function wi(e){return e<=0?function(){return ci}:ar((function(t,n){var r=0;t.subscribe(ur(n,(function(t){++r<=e&&(n.next(t),e<=r&&n.complete())})))}))}function _i(e,t){return t?function(n){return bi(t.pipe(wi(1),ar((function(e,t){e.subscribe(ur(t,Un))}))),n.pipe(_i(e)))}:fr((function(t,n){return or(e(t,n)).pipe(wi(1),function(e){return lr((function(){return e}))}(t))}))}function Ei(e){return e instanceof Date&&!isNaN(e)}function Ii(e,t){void 0===t&&(t=si);var n=function(e,t,n){void 0===e&&(e=0),void 0===n&&(n=ai);var r=-1;return null!=t&&(li(t)?n=t:r=t),new Jn((function(t){var i=Ei(e)?+e-n.now():e;i<0&&(i=0);var o=0;return n.schedule((function(){t.closed||(t.next(o++),0<=r?this.schedule(void 0,r):t.complete())}),i)}))}(e,t);return _i((function(){return n}))}function Si(e){var t,n,r,i=e.amplitude,o=e.allObservables,s=e.options,a=e.shouldTrackEvent,u=o.clickObservable,c=u.pipe(ar((function(e,t){var n,r=!1;e.subscribe(ur(t,(function(e){var i=n;n=e,r&&t.next([i,e]),r=!0})))})),ei((function(e){var t=an(e,2),n=t[0],r=t[1],i=n.event.target!==r.event.target,o=Math.abs(r.event.screenX-n.event.screenX)<=20&&Math.abs(r.event.screenY-n.event.screenY)<=20;return i&&!o}))),l=mi(c,u.pipe((t=s.debounceTime,void 0===n&&(n=si),ar((function(e,r){var i=null,o=null,s=null,a=function(){if(i){i.unsubscribe(),i=null;var e=o;o=null,r.next(e)}};function u(){var e=s+t,o=n.now();if(o<e)return i=this.schedule(void 0,e-o),void r.add(i);a()}e.subscribe(ur(r,(function(e){o=e,s=n.now(),i||(i=n.schedule(u,t),r.add(i))}),(function(){a(),r.complete()}),void 0,(function(){o=i=null})))}))),lr((function(){return"timeout"}))));return u.pipe(Ii(0),ei($r),ei((function(e){return a("click",e.closestTrackedAncestor)})),(r=l,ar((function(e,t){var n=[];return e.subscribe(ur(t,(function(e){return n.push(e)}),(function(){t.next(n),t.complete()}))),or(r).subscribe(ur(t,(function(){var e=n;n=[],t.next(e)}),Un)),function(){n=null}})))).subscribe((function(e){var t,n,r=(e.length,vn);try{for(var o=sn(e),s=o.next();!s.done;s=o.next()){var a=s.value;null==i||i.track(r,a.targetElementProperties,{time:a.timestamp})}}catch(u){t={error:u}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}}))}var Ti,Oi=On((function(e){return function(t){void 0===t&&(t=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}}));function ki(e){throw new Oi(e)}function Ni(e){var t=e.amplitude,n=e.allObservables,r=e.options,i=e.getEventProperties,o=e.shouldTrackEvent,s=e.shouldTrackActionClick,a=n.clickObservable,u=n.mutationObservable,c=n.navigateObservable,l=a.pipe(ei((function(e){return!o("click",e.closestTrackedAncestor)})),lr((function(e){var t=zr(e.event.target,r.actionClickAllowlist);return e.closestTrackedAncestor=t,null!==e.closestTrackedAncestor&&(e.targetElementProperties=i(e.type,e.closestTrackedAncestor)),e})),ei($r),ei((function(e){return s("click",e.closestTrackedAncestor)}))),d=[u];c&&d.push(c);var f,p,h=mi.apply(void 0,un([],an(d),!1)),v=l.pipe((f=function(e){return h.pipe(wi(1),function(e,t){var n=Ei(e)?{first:e}:"number"==typeof e?{each:e}:e,r=n.first,i=n.each,o=n.with,s=void 0===o?ki:o,a=n.scheduler,u=void 0===a?null!=t?t:si:a,c=n.meta,l=void 0===c?null:c;if(null==r&&null==i)throw new TypeError("No timeout provided.");return ar((function(e,t){var n,o,a=null,c=0,d=function(e){o=dr(t,u,(function(){try{n.unsubscribe(),or(s({meta:l,lastValue:a,seen:c})).subscribe(t)}catch(e){t.error(e)}}),e)};n=e.subscribe(ur(t,(function(e){null==o||o.unsubscribe(),c++,t.next(a=e),i>0&&d(i)}),void 0,void 0,(function(){(null==o?void 0:o.closed)||null==o||o.unsubscribe(),a=null}))),!c&&d(null!=r?"number"==typeof r?r:+r-u.now():i)}))}({first:500,with:function(){return ci}}),lr((function(){return e})))},ar((function(e,t){var n=null,r=0,i=!1,o=function(){return i&&!n&&t.complete()};e.subscribe(ur(t,(function(e){null==n||n.unsubscribe();var i=0,s=r++;or(f(e,s)).subscribe(n=ur(t,(function(n){return t.next(p?p(e,n,s,i++):n)}),(function(){n=null,o()})))}),(function(){i=!0,o()})))}))));return v.subscribe((function(e){null==t||t.track(vn,i("click",e.closestTrackedAncestor),{time:e.timestamp})}))}!function(e){e.ClickObservable="clickObservable",e.ChangeObservable="changeObservable",e.NavigateObservable="navigateObservable",e.MutationObservable="mutationObservable"}(Ti||(Ti={}));var Ai=function(e){var t,n,r;void 0===e&&(e={});var i=e.dataAttributePrefix,o=void 0===i?pn:i,s=e.visualTaggingOptions,a=void 0===s?{enabled:!0,messenger:new Wr}:s;e.cssSelectorAllowlist=null!==(t=e.cssSelectorAllowlist)&&void 0!==t?t:fn,e.actionClickAllowlist=null!==(n=e.actionClickAllowlist)&&void 0!==n?n:hn,e.debounceTime=null!==(r=e.debounceTime)&&void 0!==r?r:0;var u="@amplitude/plugin-autocapture-browser",c=[],l=void 0,d=function(e,t){var n,r,i,s=null===(i=null===(r=null==t?void 0:t.tagName)||void 0===r?void 0:r.toLowerCase)||void 0===i?void 0:i.call(r),a="function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{left:null,top:null},u=t.getAttribute("aria-label"),c=function(e,t){return e.getAttributeNames().reduce((function(n,r){if(r.startsWith(t)){var i=r.replace(t,""),o=e.getAttribute(r);i&&(n[i]=o||"")}return n}),{})}(t,o),d=Gr(t),f=Fr(t,l),p=((n={})["[Amplitude] Element ID"]=t.getAttribute("id")||"",n["[Amplitude] Element Class"]=t.getAttribute("class"),n["[Amplitude] Element Hierarchy"]=Yr(t),n[gn]=s,n[yn]=Mr(t),n["[Amplitude] Element Position Left"]=null==a.left?null:Math.round(a.left),n["[Amplitude] Element Position Top"]=null==a.top?null:Math.round(a.top),n["[Amplitude] Element Aria Label"]=u,n["[Amplitude] Element Attributes"]=c,n[mn]=f,n["[Amplitude] Element Parent Label"]=d,n[bn]=window.location.href.split("?")[0],n["[Amplitude] Page Title"]="undefined"!=typeof document&&document.title||"",n["[Amplitude] Viewport Height"]=window.innerHeight,n["[Amplitude] Viewport Width"]=window.innerWidth,n);return"a"===s&&"click"===e&&t instanceof HTMLAnchorElement&&(p["[Amplitude] Element Href"]=t.href),Kr(p)},f=function(t,n){var r={event:t,timestamp:Date.now(),type:n};if(function(e){return"click"===e.type||"change"===e.type}(r)&&null!==r.event.target){var i=zr(r.event.target,e.cssSelectorAllowlist);return i&&(r.closestTrackedAncestor=i,r.targetElementProperties=d(r.type,i)),r}return r};return{name:u,type:"enrichment",setup:function(t,n){return rn(void 0,void 0,void 0,(function(){var r,i,o,s,p,h,v,g,y,m;return on(this,(function(b){return l=t.loggerProvider,"undefined"==typeof document||(r=jr(e,e.cssSelectorAllowlist),i=jr(e,e.actionClickAllowlist),o=function(){var e,t,n=wr(document,"click",{capture:!0}).pipe(lr((function(e){return f(e,"click")}))),r=wr(document,"change",{capture:!0}).pipe(lr((function(e){return f(e,"change")})));window.navigation&&(t=wr(window.navigation,"navigate").pipe(lr((function(e){return f(e,"navigate")}))));var i=new Jn((function(e){var t=new MutationObserver((function(t){e.next(t)}));return t.observe(document.body,{childList:!0,attributes:!0,characterData:!0,subtree:!0}),function(){return t.disconnect()}})).pipe(lr((function(e){return f(e,"mutation")})));return(e={})[Ti.ClickObservable]=n,e[Ti.ChangeObservable]=r,e[Ti.NavigateObservable]=t,e[Ti.MutationObservable]=i,e}(),s=Si({allObservables:o,options:e,amplitude:n,shouldTrackEvent:r}),c.push(s),p=function(e){var t=e.amplitude,n=e.allObservables,r=e.getEventProperties,i=e.shouldTrackEvent;return n.changeObservable.pipe(ei($r),ei((function(e){return i("change",e.closestTrackedAncestor)}))).subscribe((function(e){null==t||t.track("[Amplitude] Element Changed",r("change",e.closestTrackedAncestor))}))}({allObservables:o,getEventProperties:d,amplitude:n,shouldTrackEvent:r}),c.push(p),h=Ni({allObservables:o,options:e,getEventProperties:d,amplitude:n,shouldTrackEvent:r,shouldTrackActionClick:i}),c.push(h),null===(y=null==t?void 0:t.loggerProvider)||void 0===y||y.log("".concat(u," has been successfully added.")),window.opener&&a.enabled&&(v=e.cssSelectorAllowlist,g=e.actionClickAllowlist,null===(m=a.messenger)||void 0===m||m.setup(nn(nn({logger:null==t?void 0:t.loggerProvider},(null==t?void 0:t.serverZone)&&{endpoint:_n[t.serverZone]}),{isElementSelectable:jr(e,un(un([],an(v),!1),an(g),!1)),cssSelectorAllowlist:v,actionClickAllowlist:g})))),[2]}))}))},execute:function(e){return rn(void 0,void 0,void 0,(function(){return on(this,(function(t){return[2,e]}))}))},teardown:function(){return rn(void 0,void 0,void 0,(function(){var e,t,n,r;return on(this,(function(i){try{for(e=sn(c),t=e.next();!t.done;t=e.next())t.value.unsubscribe()}catch(o){n={error:o}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(n)throw n.error}}return[2]}))}))}}},Pi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return y(t,e),t.prototype.init=function(e,t,n){var r,i;return void 0===e&&(e=""),arguments.length>2?(r=t,i=n):"string"==typeof t?(r=t,i=void 0):(r=null==t?void 0:t.userId,i=t),I(this._init(m(m({},i),{userId:r,apiKey:e})))},t.prototype._init=function(t){var n,r,i;return b(this,void 0,void 0,(function(){var o,s,a,u,c,l=this;return w(this,(function(d){switch(d.label){case 0:return this.initializing?[2]:(this.initializing=!0,[4,Tt(t.apiKey,t,this)]);case 1:return o=d.sent(),t.fetchRemoteConfig?[4,(p=o,b(void 0,void 0,void 0,(function(){var e;return w(this,(function(t){switch(t.label){case 0:return[4,(e=new Zt(p)).initialize()];case 1:return t.sent(),[2,e]}}))})))]:[3,4];case 2:return[4,d.sent().generateJoinedConfig()];case 3:o=d.sent(),d.label=4;case 4:return[4,e.prototype._init.call(this,o)];case 5:return d.sent(),this.logBrowserOptions(o),ne(this.config.defaultTracking)?(s=function(e){return ne(e.defaultTracking)&&e.defaultTracking&&"object"==typeof e.defaultTracking&&e.defaultTracking.attribution&&"object"==typeof e.defaultTracking.attribution?J({},e.defaultTracking.attribution):{}}(this.config),this.webAttribution=new Ne(s,this.config),[4,this.webAttribution.init()]):[3,7];case 6:d.sent(),d.label=7;case 7:return a=Se(),u=Number.isNaN(Number(a.ampSessionId))?void 0:Number(a.ampSessionId),this.setSessionId(null!==(i=null!==(r=null!==(n=t.sessionId)&&void 0!==n?n:u)&&void 0!==r?r:this.config.sessionId)&&void 0!==i?i:Date.now()),(c=Me(t.instanceName)).identityStore.setIdentity({userId:this.config.userId,deviceId:this.config.deviceId}),this.config.offline===Ve?[3,9]:[4,this.add(Gt()).promise];case 8:d.sent(),d.label=9;case 9:return[4,this.add(new F).promise];case 10:return d.sent(),[4,this.add(new $e).promise];case 11:return d.sent(),[4,this.add(new Fe).promise];case 12:return d.sent(),function(e){Kt||void 0!==e.defaultTracking||(e.loggerProvider.warn("`options.defaultTracking` is set to undefined. This implicitly configures your Amplitude instance to track Page Views, Sessions, File Downloads, and Form Interactions. You can suppress this warning by explicitly setting a value to `options.defaultTracking`. The value must either be a boolean, to enable and disable all default events, or an object, for advanced configuration. For example:\n\namplitude.init(<YOUR_API_KEY>, {\n  defaultTracking: true,\n});\n\nVisit https://www.docs.developers.amplitude.com/data/sdks/browser-2/#tracking-default-events for more details."),Kt=!0)}(this.config),f=this.config.defaultTracking,te(f,"fileDownloads")?(this.config.loggerProvider.debug("Adding file download tracking plugin"),[4,this.add(Vt()).promise]):[3,14];case 13:d.sent(),d.label=14;case 14:return function(e){return te(e,"formInteractions")}(this.config.defaultTracking)?(this.config.loggerProvider.debug("Adding form interaction plugin"),[4,this.add(Mt()).promise]):[3,16];case 15:d.sent(),d.label=16;case 16:return re(this.config.defaultTracking)?(this.config.loggerProvider.debug("Adding page view tracking plugin"),[4,this.add(Ut(ae(this.config))).promise]):[3,18];case 17:d.sent(),d.label=18;case 18:return oe(this.config.autocapture)?(this.config.loggerProvider.debug("Adding user interactions plugin (autocapture plugin)"),[4,this.add(Ai(se(this.config))).promise]):[3,20];case 19:d.sent(),d.label=20;case 20:return this.initializing=!1,[4,this.runQueuedFunctions("dispatchQ")];case 21:return d.sent(),c.eventBridge.setEventReceiver((function(e){l.track(e.eventType,e.eventProperties)})),[2]}var f,p}))}))},t.prototype.getUserId=function(){var e;return null===(e=this.config)||void 0===e?void 0:e.userId},t.prototype.setUserId=function(e){this.config?(this.config.loggerProvider.debug("function setUserId: ",e),e===this.config.userId&&void 0!==e||(this.config.userId=e,function(e,t){Me(t).identityStore.editIdentity().setUserId(e).commit()}(e,this.config.instanceName))):this.q.push(this.setUserId.bind(this,e))},t.prototype.getDeviceId=function(){var e;return null===(e=this.config)||void 0===e?void 0:e.deviceId},t.prototype.setDeviceId=function(e){this.config?(this.config.loggerProvider.debug("function setDeviceId: ",e),this.config.deviceId=e,function(e,t){Me(t).identityStore.editIdentity().setDeviceId(e).commit()}(e,this.config.instanceName)):this.q.push(this.setDeviceId.bind(this,e))},t.prototype.reset=function(){this.setDeviceId(U()),this.setUserId(void 0)},t.prototype.getSessionId=function(){var e;return null===(e=this.config)||void 0===e?void 0:e.sessionId},t.prototype.setSessionId=function(e){var t,n=[];if(!this.config)return this.q.push(this.setSessionId.bind(this,e)),I(Promise.resolve());if(e===this.config.sessionId)return I(Promise.resolve());this.config.loggerProvider.debug("function setSessionId: ",e);var r=this.getSessionId(),i=this.config.lastEventTime,o=null!==(t=this.config.lastEventId)&&void 0!==t?t:-1;this.config.sessionId=e,this.config.lastEventTime=void 0,this.config.pageCounter=0,ie(this.config.defaultTracking)&&(r&&i&&n.push(this.track(ht,void 0,{device_id:this.previousSessionDeviceId,event_id:++o,session_id:r,time:i+1,user_id:this.previousSessionUserId}).promise),this.config.lastEventTime=this.config.sessionId);var s=this.trackCampaignEventIfNeeded(++o,n);return ie(this.config.defaultTracking)&&n.push(this.track(pt,void 0,{event_id:s?++o:o,session_id:this.config.sessionId,time:this.config.lastEventTime}).promise),this.previousSessionDeviceId=this.config.deviceId,this.previousSessionUserId=this.config.userId,I(Promise.all(n))},t.prototype.extendSession=function(){this.config?this.config.lastEventTime=Date.now():this.q.push(this.extendSession.bind(this))},t.prototype.setTransport=function(e){this.config?this.config.transportProvider=kt(e):this.q.push(this.setTransport.bind(this,e))},t.prototype.identify=function(t,n){if(ze(t)){var r=t._q;t._q=[],t=Ge(new G,r)}return(null==n?void 0:n.user_id)&&this.setUserId(n.user_id),(null==n?void 0:n.device_id)&&this.setDeviceId(n.device_id),e.prototype.identify.call(this,t,n)},t.prototype.groupIdentify=function(t,n,r,i){if(ze(r)){var o=r._q;r._q=[],r=Ge(new G,o)}return e.prototype.groupIdentify.call(this,t,n,r,i)},t.prototype.revenue=function(t,n){if(ze(t)){var r=t._q;t._q=[],t=Ge(new z,r)}return e.prototype.revenue.call(this,t,n)},t.prototype.trackCampaignEventIfNeeded=function(e,t){if(!this.webAttribution||!this.webAttribution.shouldTrackNewCampaign)return!1;var n=this.webAttribution.generateCampaignEvent(e);return t?t.push(this.track(n).promise):this.track(n),this.config.loggerProvider.log("Tracking attribution."),!0},t.prototype.process=function(t){return b(this,void 0,void 0,(function(){var n,r,i;return w(this,(function(o){return n=Date.now(),r=ke(this.config.sessionTimeout,this.config.lastEventTime),i=this.webAttribution&&this.webAttribution.shouldSetSessionIdOnNewCampaign(),t.event_type===pt||t.event_type===ht||t.session_id&&t.session_id!==this.getSessionId()||(r||i?(this.setSessionId(n),i&&this.config.loggerProvider.log("Created a new session for new campaign.")):r||this.trackCampaignEventIfNeeded()),[2,e.prototype.process.call(this,t)]}))}))},t.prototype.logBrowserOptions=function(e){try{var t=m(m({},e),{apiKey:e.apiKey.substring(0,10)+"********"});this.config.loggerProvider.debug("Initialized Amplitude with BrowserConfig:",JSON.stringify(t))}catch(n){this.config.loggerProvider.error("Error logging browser config",n)}},t}(W),xi=function(){var e=new Pi;return{init:v(e.init.bind(e),"init",f(e),h(e,["config"])),add:v(e.add.bind(e),"add",f(e),h(e,["config.apiKey","timeline.plugins"])),remove:v(e.remove.bind(e),"remove",f(e),h(e,["config.apiKey","timeline.plugins"])),track:v(e.track.bind(e),"track",f(e),h(e,["config.apiKey","timeline.queue.length"])),logEvent:v(e.logEvent.bind(e),"logEvent",f(e),h(e,["config.apiKey","timeline.queue.length"])),identify:v(e.identify.bind(e),"identify",f(e),h(e,["config.apiKey","timeline.queue.length"])),groupIdentify:v(e.groupIdentify.bind(e),"groupIdentify",f(e),h(e,["config.apiKey","timeline.queue.length"])),setGroup:v(e.setGroup.bind(e),"setGroup",f(e),h(e,["config.apiKey","timeline.queue.length"])),revenue:v(e.revenue.bind(e),"revenue",f(e),h(e,["config.apiKey","timeline.queue.length"])),flush:v(e.flush.bind(e),"flush",f(e),h(e,["config.apiKey","timeline.queue.length"])),getUserId:v(e.getUserId.bind(e),"getUserId",f(e),h(e,["config","config.userId"])),setUserId:v(e.setUserId.bind(e),"setUserId",f(e),h(e,["config","config.userId"])),getDeviceId:v(e.getDeviceId.bind(e),"getDeviceId",f(e),h(e,["config","config.deviceId"])),setDeviceId:v(e.setDeviceId.bind(e),"setDeviceId",f(e),h(e,["config","config.deviceId"])),reset:v(e.reset.bind(e),"reset",f(e),h(e,["config","config.userId","config.deviceId"])),getSessionId:v(e.getSessionId.bind(e),"getSessionId",f(e),h(e,["config"])),setSessionId:v(e.setSessionId.bind(e),"setSessionId",f(e),h(e,["config"])),extendSession:v(e.extendSession.bind(e),"extendSession",f(e),h(e,["config"])),setOptOut:v(e.setOptOut.bind(e),"setOptOut",f(e),h(e,["config"])),setTransport:v(e.setTransport.bind(e),"setTransport",f(e),h(e,["config"]))}};const Ci=xi();var Ri=Ci.add,Di=Ci.extendSession,Ui=Ci.flush,ji=Ci.getDeviceId,Li=Ci.getSessionId,qi=Ci.getUserId,Mi=Ci.groupIdentify,Fi=Ci.identify,Vi=Ci.init,Ki=Ci.logEvent,Gi=Ci.remove,zi=Ci.reset,Bi=Ci.revenue,$i=Ci.setDeviceId,Wi=Ci.setGroup,Qi=Ci.setOptOut,Hi=Ci.setSessionId,Ji=Ci.setTransport,Xi=Ci.setUserId,Yi=Ci.track},16791:function(e,t,n){e.exports=function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}function a(e){return u(e)||c(e)||l()}function u(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function c(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance")}var d,f,p,h;function v(){var e;return"object"==typeof process&&void 0!==(null===(e=null===process||void 0===process?void 0:process.versions)||void 0===e?void 0:e.node)}function g(){return"object"==typeof window&&void 0!==(null===window||void 0===window?void 0:window.document)}(function(e){e.IDENTIFY="$identify"})(d||(d={})),function(e){e.SET="$set",e.SET_ONCE="$setOnce",e.ADD="$add",e.APPEND="$append",e.PREPEND="$prepend",e.REMOVE="$remove",e.PREINSERT="$preinsert",e.POSTINSERT="$postinsert",e.UNSET="$unset",e.CLEAR_ALL="$clearAll"}(f||(f={})),function(e){e[e.None=0]="None",e[e.Error=1]="Error",e[e.Warn=2]="Warn",e[e.Verbose=3]="Verbose"}(p||(p={})),function(e){e.Unknown="unknown",e.Skipped="skipped",e.Success="success",e.RateLimit="rate_limit",e.PayloadTooLarge="payload_too_large",e.Invalid="invalid",e.Failed="failed"}(h||(h={})),function(e){function t(t){return t>=200&&t<300?e.Success:429===t?e.RateLimit:413===t?e.PayloadTooLarge:t>=400&&t<500?e.Invalid:t>=500?e.Failed:e.Unknown}e.fromHttpCode=t}(h||(h={})),h.Skipped;var y={},m=function(){return v()?n.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:y},b=function(){var e=m();return e.__AMPLITUDE__=e.__AMPLITUDE__||{},e.__AMPLITUDE__},w=function(){var e;if(g()){var t=window,n=Array;if(void 0!==t.Prototype&&void 0!==(null===(e=n.prototype)||void 0===e?void 0:e.toJSON))return delete n.prototype.toJSON,!0}return!1},_=b(),E="Amplitude Logger ",I=function(){function e(){this._logLevel=0}return e.prototype.disable=function(){this._logLevel=0},e.prototype.enable=function(e){void 0===e&&(e=p.Warn),this._logLevel=e},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logLevel<p.Verbose||n.g.console.log(E+"[Log]: "+e.join(" "))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logLevel<p.Warn||n.g.console.warn(E+"[Warn]: "+e.join(" "))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logLevel<p.Error||n.g.console.error(E+"[Error]: "+e.join(" "))},e}(),S=(_.logger||(_.logger=new I),{DEFAULT_INSTANCE:"$default_instance",API_VERSION:2,MAX_STRING_LENGTH:4096,MAX_PROPERTY_KEYS:1e3,IDENTIFY_EVENT:"$identify",GROUP_IDENTIFY_EVENT:"$groupidentify",LAST_EVENT_ID:"amplitude_lastEventId",LAST_EVENT_TIME:"amplitude_lastEventTime",LAST_IDENTIFY_ID:"amplitude_lastIdentifyId",LAST_SEQUENCE_NUMBER:"amplitude_lastSequenceNumber",SESSION_ID:"amplitude_sessionId",DEVICE_ID:"amplitude_deviceId",OPT_OUT:"amplitude_optOut",USER_ID:"amplitude_userId",DEVICE_ID_INDEX:0,USER_ID_INDEX:1,OPT_OUT_INDEX:2,SESSION_ID_INDEX:3,LAST_EVENT_TIME_INDEX:4,EVENT_ID_INDEX:5,IDENTIFY_ID_INDEX:6,SEQUENCE_NUMBER_INDEX:7,COOKIE_TEST_PREFIX:"amp_cookie_test",COOKIE_PREFIX:"amp",STORAGE_DEFAULT:"",STORAGE_COOKIES:"cookies",STORAGE_NONE:"none",STORAGE_LOCAL:"localStorage",STORAGE_SESSION:"sessionStorage",REVENUE_EVENT:"revenue_amount",REVENUE_PRODUCT_ID:"$productId",REVENUE_QUANTITY:"$quantity",REVENUE_PRICE:"$price",REVENUE_REVENUE_TYPE:"$revenueType",AMP_DEVICE_ID_PARAM:"amp_device_id",REFERRER:"referrer",UTM_SOURCE:"utm_source",UTM_MEDIUM:"utm_medium",UTM_CAMPAIGN:"utm_campaign",UTM_TERM:"utm_term",UTM_CONTENT:"utm_content",ATTRIBUTION_EVENT:"[Amplitude] Attribution Captured",TRANSPORT_HTTP:"http",TRANSPORT_BEACON:"beacon"}),T={encode:function(e){for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t},decode:function(e){for(var t="",n=0,r=0,i=0,o=0;n<e.length;)(r=e.charCodeAt(n))<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(i=e.charCodeAt(n+1),t+=String.fromCharCode((31&r)<<6|63&i),n+=2):(i=e.charCodeAt(n+1),o=e.charCodeAt(n+2),t+=String.fromCharCode((15&r)<<12|(63&i)<<6|63&o),n+=3);return t}},O={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){try{if(window.btoa&&window.atob)return window.btoa(unescape(encodeURIComponent(e)))}catch(t){}return O._encode(e)},_encode:function(e){var t,n,r,i,o,s,a,u="",c=0;for(e=T.encode(e);c<e.length;)i=(t=e.charCodeAt(c++))>>2,o=(3&t)<<4|(n=e.charCodeAt(c++))>>4,s=(15&n)<<2|(r=e.charCodeAt(c++))>>6,a=63&r,isNaN(n)?s=a=64:isNaN(r)&&(a=64),u=u+O._keyStr.charAt(i)+O._keyStr.charAt(o)+O._keyStr.charAt(s)+O._keyStr.charAt(a);return u},decode:function(e){try{if(window.btoa&&window.atob)return decodeURIComponent(escape(window.atob(e)))}catch(t){}return O._decode(e)},_decode:function(e){var t,n,r,i,o,s,a="",u=0;for(e=e.replace(/[^A-Za-z0-9+/=]/g,"");u<e.length;)t=O._keyStr.indexOf(e.charAt(u++))<<2|(i=O._keyStr.indexOf(e.charAt(u++)))>>4,n=(15&i)<<4|(o=O._keyStr.indexOf(e.charAt(u++)))>>2,r=(3&o)<<6|(s=O._keyStr.indexOf(e.charAt(u++))),a+=String.fromCharCode(t),64!==o&&(a+=String.fromCharCode(n)),64!==s&&(a+=String.fromCharCode(r));return a=T.decode(a)}},k=Object.prototype.toString;function N(t){switch(k.call(t)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return null===t?"null":void 0===t?"undefined":t!=t?"nan":t&&1===t.nodeType?"element":"undefined"!=typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(t)?"buffer":e(t=t.valueOf?t.valueOf():Object.prototype.valueOf.apply(t))}var A,P={DISABLE:0,ERROR:1,WARN:2,INFO:3},x=P.WARN,C={error:function(e){x>=P.ERROR&&R(e)},warn:function(e){x>=P.WARN&&R(e)},info:function(e){x>=P.INFO&&R(e)}},R=function(e){try{console.log("[Amplitude] "+e)}catch(t){}},D=function e(t){if("array"===N(t))for(var n=0;n<t.length;n++)t[n]=e(t[n]);else if("object"===N(t))for(var r in t)r in t&&(t[r]=e(t[r]));else t=U(t);return t},U=function(e){return"string"===N(e)&&e.length>S.MAX_STRING_LENGTH?e.substring(0,S.MAX_STRING_LENGTH):e},j=function(e,t,n){return N(e)===n||(C.error("Invalid "+t+" input type. Expected "+n+" but received "+N(e)),!1)},L=function(e){return!(!j(e,"deviceId","string")||e.includes(".")&&(C.error("Device IDs may not contain '.' characters. Value will be ignored: \"".concat(e,'"')),1))},q=function(e){return!(!j(e,"transport","string")||(e!==S.TRANSPORT_HTTP&&e!==S.TRANSPORT_BEACON?(C.error("transport value must be one of '".concat(S.TRANSPORT_BEACON,"' or '").concat(S.TRANSPORT_HTTP,"'")),1):e!==S.TRANSPORT_HTTP&&!navigator.sendBeacon&&(C.error("browser does not support sendBeacon, so transport must be HTTP"),1)))},M=function(e){var t=N(e);if("object"!==t)return C.error("Error: invalid properties format. Expecting Javascript object, received "+t+", ignoring"),{};if(Object.keys(e).length>S.MAX_PROPERTY_KEYS)return C.error("Error: too many properties (more than 1000), ignoring"),{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=r,o=N(i);"string"!==o&&(i=String(i),C.warn("WARNING: Non-string property key, received type "+o+', coercing to string "'+i+'"'));var s=V(i,e[r]);null!==s&&(n[i]=s)}return n},F=["nan","function","arguments","regexp","element"],V=function e(t,n){var r=N(n);if(-1!==F.indexOf(r))C.warn('WARNING: Property key "'+t+'" with invalid value type '+r+", ignoring"),n=null;else if("undefined"===r)n=null;else if("error"===r)n=String(n),C.warn('WARNING: Property key "'+t+'" with value type error, coercing to '+n);else if("array"===r){for(var i=[],o=0;o<n.length;o++){var s=n[o],a=N(s);"array"!==a?"object"===a?i.push(M(s)):i.push(e(t,s)):C.warn("WARNING: Cannot have "+a+" nested in an array property value, skipping")}n=i}else"object"===r&&(n=M(n));return n},K=function(e){var t=N(e);if("object"!==t)return C.error("Error: invalid groups format. Expecting Javascript object, received "+t+", ignoring"),{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=r,o=N(i);"string"!==o&&(i=String(i),C.warn("WARNING: Non-string groupType, received type "+o+', coercing to string "'+i+'"'));var s=G(i,e[r]);null!==s&&(n[i]=s)}return n},G=function(e,t){var n=N(t);if("string"===n)return t;if("date"===n||"number"===n||"boolean"===n)return t=String(t),C.warn("WARNING: Non-string groupName, received type "+n+', coercing to string "'+t+'"'),t;if("array"===n){for(var r=[],i=0;i<t.length;i++){var o=t[i],s=N(o);"array"!==s&&"object"!==s?"string"===s?r.push(o):"date"!==s&&"number"!==s&&"boolean"!==s||(o=String(o),C.warn("WARNING: Non-string groupName, received type "+s+', coercing to string "'+o+'"'),r.push(o)):C.warn("WARNING: Skipping nested "+s+" in array groupName")}return r}C.warn("WARNING: Non-string groupName, received type "+n+". Please use strings or array of strings for groupName")},z={setLogLevel:function(e){Object.prototype.hasOwnProperty.call(P,e)&&(x=P[e])},getLogLevel:function(){return x},logLevels:P,log:C,isEmptyString:function(e){return!e||0===e.length},getQueryParam:function(e,t){e=e.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return null===n?void 0:decodeURIComponent(n[1].replace(/\+/g," "))},sessionStorageEnabled:function(){try{if(window.sessionStorage)return!0}catch(e){}return!1},truncate:D,validateGroups:K,validateInput:j,validateProperties:M,validateDeviceId:L,validateTransport:q},B=function(){return window.location},$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",W=function(){for(var e="",t=0;t<22;++t)e+=$.charAt(Math.floor(64*Math.random()));return e},Q=function(e){try{for(var t=document.cookie.split(";"),n=null,r=0;r<t.length;r++){for(var i=t[r];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(e)){n=i.substring(e.length,i.length);break}}return n}catch(o){return null}},H=function(e,t,n){var r=null!==t?n.expirationDays:-1;if(r){var i=new Date;i.setTime(i.getTime()+24*r*60*60*1e3),r=i}var o=e+"="+t;r&&(o+="; expires="+r.toUTCString()),o+="; path=/",n.domain&&(o+="; domain="+n.domain),n.secure&&(o+="; Secure"),n.sameSite&&(o+="; SameSite="+n.sameSite),document.cookie=o},J=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=t.split(".")[S.LAST_EVENT_TIME_INDEX];return n&&(e=parseInt(n,32)),e||(z.log.warn("unable to parse malformed cookie: ".concat(t)),0)},X=function(e){return a(e).sort((function(e,t){var n=J(e);return J(t)-n}))},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=S.COOKIE_TEST_PREFIX+W(),n=!1;try{var r=String(new Date);H(t,r,e),z.log.info("Testing if cookies available"),n=Q(t+"=")===r}catch(i){z.log.warn('Error thrown when checking for cookies. Reason: "'.concat(i,'"'))}finally{z.log.info("Cleaning up cookies availability test"),H(t,null,e)}return n},Z={set:H,get:Q,getAll:function(e){try{var t=document.cookie.split(";").map((function(e){return e.trimStart()})),n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){for(var u=s.value;" "===u.charAt(0);)u=u.substring(1);0===u.indexOf(e)&&n.push(u.substring(e.length))}}catch(c){i=!0,o=c}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}catch(l){return[]}},getLastEventTime:J,sortByEventTime:X,areCookiesEnabled:Y},ee=function(e){var t=document.createElement("a");return t.href=e,t.hostname||location.hostname},te=function(e){for(var t=ee(e).split("."),n=[],r="_tldtest_"+W(),i=t.length-2;i>=0;--i)n.push(t.slice(i).join("."));for(var o=0;o<n.length;++o){var s=n[o],a={domain:"."+s};if(Z.set(r,1,a),Z.get(r))return Z.set(r,null,a),s}return""},ne={expirationDays:void 0,domain:void 0},re=function(e){if(0===arguments.length)return ne;e=e||{},ne.expirationDays=e.expirationDays,ne.secure=e.secure,ne.sameSite=e.sameSite;var t=z.isEmptyString(e.domain)?"."+te(B().href):e.domain,n=Math.random();ne.domain=t,se("amplitude_test",n);var r=oe("amplitude_test");return r&&r===n||(t=null),ae("amplitude_test"),ne.domain=t,ne},ie=function(e){var t="";return ne.domain&&(t="."===ne.domain.charAt(0)?ne.domain.substring(1):ne.domain),e+t},oe=function(e){var t=ie(e)+"=",n=Z.get(t);try{if(n)return JSON.parse(O.decode(n))}catch(r){return null}return null},se=function(e,t){try{return Z.set(ie(e),O.encode(JSON.stringify(t)),ne),!0}catch(n){return!1}},ae=function(e){try{return Z.set(ie(e),null,ne),!0}catch(t){return!1}},ue={reset:function(){ne={expirationDays:void 0,domain:void 0}},options:re,get:oe,set:se,remove:ae,setRaw:function(e,t){try{return Z.set(ie(e),t,ne),!0}catch(n){return!1}},getRaw:function(e){var t=ie(e)+"=";return Z.get(t)}};if(function(){var e,t=new Date;try{return window.localStorage.setItem(t,t),e=window.localStorage.getItem(t)===String(t),window.localStorage.removeItem(t),e}catch(n){}return!1}())A=window.localStorage;else if(window.globalStorage)try{A=window.globalStorage[window.location.hostname]}catch(It){}else if("undefined"!=typeof document){var ce=document.createElement("div"),le="localStorage";ce.style.display="none",document.getElementsByTagName("head")[0].appendChild(ce),ce.addBehavior&&(ce.addBehavior("#default#userdata"),A={length:0,setItem:function(e,t){ce.load(le),ce.getAttribute(e)||this.length++,ce.setAttribute(e,t),ce.save(le)},getItem:function(e){return ce.load(le),ce.getAttribute(e)},removeItem:function(e){ce.load(le),ce.getAttribute(e)&&this.length--,ce.removeAttribute(e),ce.save(le)},clear:function(){ce.load(le);for(var e,t=0;e=ce.XMLDocument.documentElement.attributes[t++];)ce.removeAttribute(e.name);ce.save(le),this.length=0},key:function(e){return ce.load(le),ce.XMLDocument.documentElement.attributes[e]}},ce.load(le),A.length=ce.XMLDocument.documentElement.attributes.length)}A||(A={length:0,setItem:function(e,t){},getItem:function(e){},removeItem:function(e){},clear:function(){},key:function(e){}});var de,fe=A,pe=function(){this.storage=null};pe.prototype.getStorage=function(){if(null!==this.storage)return this.storage;if(Z.areCookiesEnabled())this.storage=ue;else{var e="amp_cookiestore_";this.storage={_options:{expirationDays:void 0,domain:void 0,secure:!1},reset:function(){this._options={expirationDays:void 0,domain:void 0,secure:!1}},options:function(e){return 0===arguments.length?this._options:(e=e||{},this._options.expirationDays=e.expirationDays||this._options.expirationDays,this._options.domain=e.domain||this._options.domain||window&&window.location&&window.location.hostname,this._options.secure=e.secure||!1)},get:function(t){try{return JSON.parse(fe.getItem(e+t))}catch(It){}return null},set:function(t,n){try{return fe.setItem(e+t,JSON.stringify(n)),!0}catch(It){}return!1},remove:function(t){try{fe.removeItem(e+t)}catch(It){return!1}}}}return this.storage};var he=(o(de={},S.STORAGE_COOKIES,!0),o(de,S.STORAGE_NONE,!0),o(de,S.STORAGE_LOCAL,!0),o(de,S.STORAGE_SESSION,!0),de),ve=function(){function e(n){var r=n.storageKey,i=n.disableCookies,o=n.domain,s=n.secure,a=n.sameSite,u=n.expirationDays,c=n.storage;t(this,e),this.storageKey=r,this.domain=o,this.secure=s,this.sameSite=a,this.expirationDays=u,this.cookieDomain="";var l=te(B().href);if(this.cookieDomain=o||(l?"."+l:null),he[c])this.storage=c;else{var d=i||!Z.areCookiesEnabled({domain:this.cookieDomain,secure:this.secure,sameSite:this.sameSite,expirationDays:this.expirationDays});this.storage=d?S.STORAGE_LOCAL:S.STORAGE_COOKIES}}return i(e,[{key:"getCookieStorageKey",value:function(){if(!this.domain)return this.storageKey;var e="."===this.domain.charAt(0)?this.domain.substring(1):this.domain;return"".concat(this.storageKey).concat(e?"_".concat(e):"")}},{key:"save",value:function(e){var t=e.deviceId,n=e.userId,r=e.optOut,i=e.sessionId,o=e.lastEventTime,s=e.eventId,a=e.identifyId,u=e.sequenceNumber;if(this.storage!==S.STORAGE_NONE){var c=[t,O.encode(n||""),r?"1":"",i?i.toString(32):"0",o?o.toString(32):"0",s?s.toString(32):"0",a?a.toString(32):"0",u?u.toString(32):"0"].join(".");switch(this.storage){case S.STORAGE_SESSION:window.sessionStorage&&window.sessionStorage.setItem(this.storageKey,c);break;case S.STORAGE_LOCAL:fe.setItem(this.storageKey,c);break;case S.STORAGE_COOKIES:this.saveCookie(c)}}}},{key:"saveCookie",value:function(e){Z.set(this.getCookieStorageKey(),e,{domain:this.cookieDomain,secure:this.secure,sameSite:this.sameSite,expirationDays:this.expirationDays})}},{key:"load",value:function(){var e,t=this;if(this.storage===S.STORAGE_COOKIES){var n=this.getCookieStorageKey()+"=",r=Z.getAll(n);if(0===r.length||1===r.length)e=r[0];else{var i=Z.sortByEventTime(r)[0];r.forEach((function(){return Z.set(t.getCookieStorageKey(),null,{})})),this.saveCookie(i),e=Z.get(n)}}if(e||(e=fe.getItem(this.storageKey)),!e)try{e=window.sessionStorage&&window.sessionStorage.getItem(this.storageKey)}catch(It){z.log.info('window.sessionStorage unavailable. Reason: "'.concat(It,'"'))}if(!e)return null;var o=e.split("."),s=null;if(o[S.USER_ID_INDEX])try{s=O.decode(o[S.USER_ID_INDEX])}catch(It){s=null}return{deviceId:o[S.DEVICE_ID_INDEX],userId:s,optOut:"1"===o[S.OPT_OUT_INDEX],sessionId:parseInt(o[S.SESSION_ID_INDEX],32),lastEventTime:parseInt(o[S.LAST_EVENT_TIME_INDEX],32),eventId:parseInt(o[S.EVENT_ID_INDEX],32),identifyId:parseInt(o[S.IDENTIFY_ID_INDEX],32),sequenceNumber:parseInt(o[S.SEQUENCE_NUMBER_INDEX],32)}}},{key:"clear",value:function(){var e;if(this.storage===S.STORAGE_COOKIES&&(e=Z.get(this.getCookieStorageKey()+"="),Z.set(this.getCookieStorageKey(),null,{domain:this.cookieDomain,secure:this.secure,sameSite:this.sameSite,expirationDays:0})),e||(e=fe.getItem(this.storageKey),fe.clear()),!e)try{e=window.sessionStorage&&window.sessionStorage.getItem(this.storageKey),window.sessionStorage.clear()}catch(It){z.log.info('window.sessionStorage unavailable. Reason: "'.concat(It,'"'))}return!!e}}]),e}(),ge=function(e,t){var n=e?"?"+e.split(".").slice(-1)[0].replace(/\|/g,"&"):"",r=function(e,t,n,r){return z.getQueryParam(e,t)||z.getQueryParam(n,r)},i=r(S.UTM_SOURCE,t,"utmcsr",n),o=r(S.UTM_MEDIUM,t,"utmcmd",n),s=r(S.UTM_CAMPAIGN,t,"utmccn",n),a=r(S.UTM_TERM,t,"utmctr",n),u=r(S.UTM_CONTENT,t,"utmcct",n),c={},l=function(e,t){z.isEmptyString(t)||(c[e]=t)};return l(S.UTM_SOURCE,i),l(S.UTM_MEDIUM,o),l(S.UTM_CAMPAIGN,s),l(S.UTM_TERM,a),l(S.UTM_CONTENT,u),c},ye="$add",me="$append",be="$clearAll",we="$prepend",_e="$set",Ee="$setOnce",Ie="$unset",Se="$preInsert",Te="$postInsert",Oe="$remove",ke=function(){this.userPropertiesOperations={},this.properties=[]};ke.prototype.add=function(e,t){return"number"===N(t)||"string"===N(t)?this._addOperation(ye,e,t):z.log.error("Unsupported type for value: "+N(t)+", expecting number or string"),this},ke.prototype.append=function(e,t){return this._addOperation(me,e,t),this},ke.prototype.clearAll=function(){return Object.keys(this.userPropertiesOperations).length>0?(Object.prototype.hasOwnProperty.call(this.userPropertiesOperations,be)||z.log.error("Need to send $clearAll on its own Identify object without any other operations, skipping $clearAll"),this):(this.userPropertiesOperations[be]="-",this)},ke.prototype.prepend=function(e,t){return this._addOperation(we,e,t),this},ke.prototype.set=function(e,t){return this._addOperation(_e,e,t),this},ke.prototype.setOnce=function(e,t){return this._addOperation(Ee,e,t),this},ke.prototype.unset=function(e){return this._addOperation(Ie,e,"-"),this},ke.prototype.preInsert=function(e,t){return this._addOperation(Se,e,t),this},ke.prototype.postInsert=function(e,t){return this._addOperation(Te,e,t),this},ke.prototype.remove=function(e,t){return this._addOperation(Oe,e,t),this},ke.prototype._addOperation=function(e,t,n){Object.prototype.hasOwnProperty.call(this.userPropertiesOperations,be)?z.log.error("This identify already contains a $clearAll operation, skipping operation "+e):-1===this.properties.indexOf(t)?(Object.prototype.hasOwnProperty.call(this.userPropertiesOperations,e)||(this.userPropertiesOperations[e]={}),this.userPropertiesOperations[e][t]=n,this.properties.push(t)):z.log.error('User property "'+t+'" already used in this identify, skipping operation '+e)};var Ne="undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{};function Ae(e,t){return e(t={exports:{}},t.exports),t.exports}var Pe=Ae((function(e){!function(t){function n(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function r(e,t){return e<<t|e>>>32-t}function i(e,t,i,o,s,a){return n(r(n(n(t,e),n(o,a)),s),i)}function o(e,t,n,r,o,s,a){return i(t&n|~t&r,e,t,o,s,a)}function s(e,t,n,r,o,s,a){return i(t&r|n&~r,e,t,o,s,a)}function a(e,t,n,r,o,s,a){return i(t^n^r,e,t,o,s,a)}function u(e,t,n,r,o,s,a){return i(n^(t|~r),e,t,o,s,a)}function c(e,t){var r,i,c,l,d;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var f=1732584193,p=-271733879,h=-1732584194,v=271733878;for(r=0;r<e.length;r+=16)i=f,c=p,l=h,d=v,f=o(f,p,h,v,e[r],7,-680876936),v=o(v,f,p,h,e[r+1],12,-389564586),h=o(h,v,f,p,e[r+2],17,606105819),p=o(p,h,v,f,e[r+3],22,-1044525330),f=o(f,p,h,v,e[r+4],7,-176418897),v=o(v,f,p,h,e[r+5],12,1200080426),h=o(h,v,f,p,e[r+6],17,-1473231341),p=o(p,h,v,f,e[r+7],22,-45705983),f=o(f,p,h,v,e[r+8],7,1770035416),v=o(v,f,p,h,e[r+9],12,-1958414417),h=o(h,v,f,p,e[r+10],17,-42063),p=o(p,h,v,f,e[r+11],22,-1990404162),f=o(f,p,h,v,e[r+12],7,1804603682),v=o(v,f,p,h,e[r+13],12,-40341101),h=o(h,v,f,p,e[r+14],17,-1502002290),f=s(f,p=o(p,h,v,f,e[r+15],22,1236535329),h,v,e[r+1],5,-165796510),v=s(v,f,p,h,e[r+6],9,-1069501632),h=s(h,v,f,p,e[r+11],14,643717713),p=s(p,h,v,f,e[r],20,-373897302),f=s(f,p,h,v,e[r+5],5,-701558691),v=s(v,f,p,h,e[r+10],9,38016083),h=s(h,v,f,p,e[r+15],14,-660478335),p=s(p,h,v,f,e[r+4],20,-405537848),f=s(f,p,h,v,e[r+9],5,568446438),v=s(v,f,p,h,e[r+14],9,-1019803690),h=s(h,v,f,p,e[r+3],14,-187363961),p=s(p,h,v,f,e[r+8],20,1163531501),f=s(f,p,h,v,e[r+13],5,-1444681467),v=s(v,f,p,h,e[r+2],9,-51403784),h=s(h,v,f,p,e[r+7],14,1735328473),f=a(f,p=s(p,h,v,f,e[r+12],20,-1926607734),h,v,e[r+5],4,-378558),v=a(v,f,p,h,e[r+8],11,-2022574463),h=a(h,v,f,p,e[r+11],16,1839030562),p=a(p,h,v,f,e[r+14],23,-35309556),f=a(f,p,h,v,e[r+1],4,-1530992060),v=a(v,f,p,h,e[r+4],11,1272893353),h=a(h,v,f,p,e[r+7],16,-155497632),p=a(p,h,v,f,e[r+10],23,-1094730640),f=a(f,p,h,v,e[r+13],4,681279174),v=a(v,f,p,h,e[r],11,-358537222),h=a(h,v,f,p,e[r+3],16,-722521979),p=a(p,h,v,f,e[r+6],23,76029189),f=a(f,p,h,v,e[r+9],4,-640364487),v=a(v,f,p,h,e[r+12],11,-421815835),h=a(h,v,f,p,e[r+15],16,530742520),f=u(f,p=a(p,h,v,f,e[r+2],23,-995338651),h,v,e[r],6,-198630844),v=u(v,f,p,h,e[r+7],10,1126891415),h=u(h,v,f,p,e[r+14],15,-1416354905),p=u(p,h,v,f,e[r+5],21,-57434055),f=u(f,p,h,v,e[r+12],6,1700485571),v=u(v,f,p,h,e[r+3],10,-1894986606),h=u(h,v,f,p,e[r+10],15,-1051523),p=u(p,h,v,f,e[r+1],21,-2054922799),f=u(f,p,h,v,e[r+8],6,1873313359),v=u(v,f,p,h,e[r+15],10,-30611744),h=u(h,v,f,p,e[r+6],15,-1560198380),p=u(p,h,v,f,e[r+13],21,1309151649),f=u(f,p,h,v,e[r+4],6,-145523070),v=u(v,f,p,h,e[r+11],10,-1120210379),h=u(h,v,f,p,e[r+2],15,718787259),p=u(p,h,v,f,e[r+9],21,-343485551),f=n(f,i),p=n(p,c),h=n(h,l),v=n(v,d);return[f,p,h,v]}function l(e){var t,n="",r=32*e.length;for(t=0;t<r;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function d(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function f(e){return l(c(d(e),8*e.length))}function p(e,t){var n,r,i=d(e),o=[],s=[];for(o[15]=s[15]=void 0,i.length>16&&(i=c(i,8*e.length)),n=0;n<16;n+=1)o[n]=909522486^i[n],s[n]=1549556828^i[n];return r=c(o.concat(d(t)),512+8*t.length),l(c(s.concat(r),640))}function h(e){var t,n,r="0123456789abcdef",i="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),i+=r.charAt(t>>>4&15)+r.charAt(15&t);return i}function v(e){return unescape(encodeURIComponent(e))}function g(e){return f(v(e))}function y(e){return h(g(e))}function m(e,t){return p(v(e),v(t))}function b(e,t){return h(m(e,t))}function w(e,t,n){return t?n?m(t,e):b(t,e):n?g(e):y(e)}e.exports?e.exports=w:t.md5=w}(Ne)})),xe=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))},Ce=Object.getOwnPropertySymbols,Re=Object.prototype.hasOwnProperty,De=Object.prototype.propertyIsEnumerable;function Ue(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function je(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}var Le=je()?Object.assign:function(e,t){for(var n,r,i=Ue(e),o=1;o<arguments.length;o++){for(var s in n=Object(arguments[o]))Re.call(n,s)&&(i[s]=n[s]);if(Ce){r=Ce(n);for(var a=0;a<r.length;a++)De.call(n,r[a])&&(i[r[a]]=n[r[a]])}}return i},qe="%[a-f0-9]{2}",Me=new RegExp(qe,"gi"),Fe=new RegExp("("+qe+")+","gi");function Ve(e,t){try{return decodeURIComponent(e.join(""))}catch(i){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],Ve(n),Ve(r))}function Ke(e){try{return decodeURIComponent(e)}catch(r){for(var t=e.match(Me),n=1;n<t.length;n++)t=(e=Ve(t,n).join("")).match(Me);return e}}function Ge(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=Fe.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(a){var r=Ke(n[0]);r!==n[0]&&(t[n[0]]=r)}n=Fe.exec(e)}t["%C2"]="�";for(var i=Object.keys(t),o=0;o<i.length;o++){var s=i[o];e=e.replace(new RegExp(s,"g"),t[s])}return e}var ze=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return Ge(e)}};function Be(e){switch(e.arrayFormat){case"index":return function(t,n,r){return null===n?[We(t,e),"[",r,"]"].join(""):[We(t,e),"[",We(r,e),"]=",We(n,e)].join("")};case"bracket":return function(t,n){return null===n?We(t,e):[We(t,e),"[]=",We(n,e)].join("")};default:return function(t,n){return null===n?We(t,e):[We(t,e),"=",We(n,e)].join("")}}}function $e(e){var t;switch(e.arrayFormat){case"index":return function(e,n,r){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return function(e,n,r){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};default:return function(e,t,n){void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}function We(e,t){return t.encode?t.strict?xe(e):encodeURIComponent(e):e}function Qe(e){return Array.isArray(e)?e.sort():"object"==typeof e?Qe(Object.keys(e)).sort((function(e,t){return Number(e)-Number(t)})).map((function(t){return e[t]})):e}function He(e){var t=e.indexOf("?");return-1===t?"":e.slice(t+1)}function Je(e,t){var n=$e(t=Le({arrayFormat:"none"},t)),r=Object.create(null);return"string"!=typeof e?r:(e=e.trim().replace(/^[?#&]/,""))?(e.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),i=t.shift(),o=t.length>0?t.join("="):void 0;o=void 0===o?null:ze(o),n(ze(i),o,r)})),Object.keys(r).sort().reduce((function(e,t){var n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=Qe(n):e[t]=n,e}),Object.create(null))):r}var Xe={extract:He,parse:Je,stringify:function(e,t){!1===(t=Le({encode:!0,strict:!0,arrayFormat:"none"},t)).sort&&(t.sort=function(){});var n=Be(t);return e?Object.keys(e).sort(t.sort).map((function(r){var i=e[r];if(void 0===i)return"";if(null===i)return We(r,t);if(Array.isArray(i)){var o=[];return i.slice().forEach((function(e){void 0!==e&&o.push(n(r,e,o.length))})),o.join("&")}return We(r,t)+"="+We(i,t)})).filter((function(e){return e.length>0})).join("&"):""},parseUrl:function(e,t){return{url:e.split("?")[0]||"",query:Je(He(e),t)}}},Ye=function(e,t,n){this.url=e,this.data=t||{},this.headers=n};function Ze(e,t){for(var n in t)e.setRequestHeader(n,t[n])}Ye.prototype.send=function(e){if(window.XDomainRequest){var t=new window.XDomainRequest;t.open("POST",this.url,!0),t.onload=function(){e(200,t.responseText)},t.onerror=function(){"Request Entity Too Large"===t.responseText?e(413,t.responseText):e(500,t.responseText)},t.ontimeout=function(){},t.onprogress=function(){},t.send(Xe.stringify(this.data))}else{var n=new XMLHttpRequest;n.open("POST",this.url,!0),n.onreadystatechange=function(){4===n.readyState&&e(n.status,n.responseText)},Ze(n,this.headers),n.send(Xe.stringify(this.data))}};var et=function(){this._price=null,this._productId=null,this._quantity=1,this._revenueType=null,this._properties=null};et.prototype.setProductId=function(e){return"string"!==N(e)?z.log.error("Unsupported type for productId: "+N(e)+", expecting string"):z.isEmptyString(e)?z.log.error("Invalid empty productId"):this._productId=e,this},et.prototype.setQuantity=function(e){return"number"!==N(e)?z.log.error("Unsupported type for quantity: "+N(e)+", expecting number"):this._quantity=parseInt(e),this},et.prototype.setPrice=function(e){return"number"!==N(e)?z.log.error("Unsupported type for price: "+N(e)+", expecting number"):this._price=e,this},et.prototype.setRevenueType=function(e){return"string"!==N(e)?z.log.error("Unsupported type for revenueType: "+N(e)+", expecting string"):this._revenueType=e,this},et.prototype.setEventProperties=function(e){return"object"!==N(e)?z.log.error("Unsupported type for eventProperties: "+N(e)+", expecting object"):this._properties=z.validateProperties(e),this},et.prototype._isValidRevenue=function(){return"number"===N(this._price)||(z.log.error("Invalid revenue, need to set price field"),!1)},et.prototype._toJSONObject=function(){var e="object"===N(this._properties)?this._properties:{};return null!==this._productId&&(e[S.REVENUE_PRODUCT_ID]=this._productId),null!==this._quantity&&(e[S.REVENUE_QUANTITY]=this._quantity),null!==this._price&&(e[S.REVENUE_PRICE]=this._price),null!==this._revenueType&&(e[S.REVENUE_REVENUE_TYPE]=this._revenueType),e};var tt=Ae((function(e,t){!function(n,r){var i="0.7.28",o="",s="?",a="function",u="undefined",c="object",l="string",d="major",f="model",p="name",h="type",v="vendor",g="version",y="architecture",m="console",b="mobile",w="tablet",_="smarttv",E="wearable",I="embedded",S=255,T="Amazon",O="Apple",k="ASUS",N="BlackBerry",A="Browser",P="Chrome",x="Firefox",C="Google",R="Huawei",D="LG",U="Microsoft",j="Motorola",L="Opera",q="Samsung",M="Sony",F="Xiaomi",V="Zebra",K=function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},G=function(e){var t={};for(var n in e)t[e[n].toUpperCase()]=e[n];return t},z=function(e,t){return typeof e===l&&-1!==B(t).indexOf(B(e))},B=function(e){return e.toLowerCase()},$=function(e){return typeof e===l?e.replace(/[^\d\.]/g,o).split(".")[0]:r},W=function(e,t){if(typeof e===l)return e=e.replace(/^\s+|\s+$/g,o),typeof t===u?e:e.substring(0,S)},Q=function(e,t){for(var n,i,o,s,u,l,d=0;d<t.length&&!u;){var f=t[d],p=t[d+1];for(n=i=0;n<f.length&&!u;)if(u=f[n++].exec(e))for(o=0;o<p.length;o++)l=u[++i],typeof(s=p[o])===c&&s.length>0?2==s.length?typeof s[1]==a?this[s[0]]=s[1].call(this,l):this[s[0]]=s[1]:3==s.length?typeof s[1]!==a||s[1].exec&&s[1].test?this[s[0]]=l?l.replace(s[1],s[2]):r:this[s[0]]=l?s[1].call(this,l,s[2]):r:4==s.length&&(this[s[0]]=l?s[3].call(this,l.replace(s[1],s[2])):r):this[s]=l||r;d+=2}},H=function(e,t){for(var n in t)if(typeof t[n]===c&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(z(t[n][i],e))return n===s?r:n}else if(z(t[n],e))return n===s?r:n;return e},J={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},X={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[g,[p,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[g,[p,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[p,g],[/opios[\/ ]+([\w\.]+)/i],[g,[p,L+" Mini"]],[/\bopr\/([\w\.]+)/i],[g,[p,L]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[p,g],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[g,[p,"UC"+A]],[/\bqbcore\/([\w\.]+)/i],[g,[p,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[g,[p,"WeChat"]],[/konqueror\/([\w\.]+)/i],[g,[p,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[g,[p,"IE"]],[/yabrowser\/([\w\.]+)/i],[g,[p,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[p,/(.+)/,"$1 Secure "+A],g],[/\bfocus\/([\w\.]+)/i],[g,[p,x+" Focus"]],[/\bopt\/([\w\.]+)/i],[g,[p,L+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[g,[p,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[g,[p,"Dolphin"]],[/coast\/([\w\.]+)/i],[g,[p,L+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[g,[p,"MIUI "+A]],[/fxios\/([-\w\.]+)/i],[g,[p,x]],[/\bqihu|(qi?ho?o?|360)browser/i],[[p,"360 "+A]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[p,/(.+)/,"$1 "+A],g],[/(comodo_dragon)\/([\w\.]+)/i],[[p,/_/g," "],g],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[p,g],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[p],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[p,"Facebook"],g],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[p,g],[/\bgsa\/([\w\.]+) .*safari\//i],[g,[p,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[g,[p,P+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[p,P+" WebView"],g],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[g,[p,"Android "+A]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[p,g],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[g,[p,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[g,p],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[p,[g,H,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[p,g],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[p,"Netscape"],g],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[g,[p,x+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[p,g]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[y,"amd64"]],[/(ia32(?=;))/i],[[y,B]],[/((?:i[346]|x)86)[;\)]/i],[[y,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[y,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[y,"armhf"]],[/windows (ce|mobile); ppc;/i],[[y,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[y,/ower/,o,B]],[/(sun4\w)[;\)]/i],[[y,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[y,B]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[f,[v,q],[h,w]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[f,[v,q],[h,b]],[/((ipod|iphone)\d+,\d+)/i],[f,[v,O],[h,b]],[/(ipad\d+,\d+)/i],[f,[v,O],[h,w]],[/\((ip(?:hone|od)[\w ]*);/i],[f,[v,O],[h,b]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[f,[v,O],[h,w]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[f,[v,R],[h,w]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[f,[v,R],[h,b]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[f,/_/g," "],[v,F],[h,b]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[f,/_/g," "],[v,F],[h,w]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007)\b/i],[f,[v,"OPPO"],[h,b]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[f,[v,"Vivo"],[h,b]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[f,[v,"Realme"],[h,b]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[f,[v,j],[h,b]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[f,[v,j],[h,w]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[f,[v,D],[h,w]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[f,[v,D],[h,b]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[f,[v,"Lenovo"],[h,w]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[f,/_/g," "],[v,"Nokia"],[h,b]],[/(pixel c)\b/i],[f,[v,C],[h,w]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[f,[v,C],[h,b]],[/droid.+ ([c-g]\d{4}|so[-l]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[f,[v,M],[h,b]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[f,"Xperia Tablet"],[v,M],[h,w]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[f,[v,"OnePlus"],[h,b]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[f,[v,T],[h,w]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[f,/(.+)/g,"Fire Phone $1"],[v,T],[h,b]],[/(playbook);[-\w\),; ]+(rim)/i],[f,v,[h,w]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[f,[v,N],[h,b]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[f,[v,k],[h,w]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[f,[v,k],[h,b]],[/(nexus 9)/i],[f,[v,"HTC"],[h,w]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[v,[f,/_/g," "],[h,b]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[f,[v,"Acer"],[h,w]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[f,[v,"Meizu"],[h,b]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[f,[v,"Sharp"],[h,b]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[v,f,[h,b]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[v,f,[h,w]],[/(surface duo)/i],[f,[v,U],[h,w]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[f,[v,"Fairphone"],[h,b]],[/(u304aa)/i],[f,[v,"AT&T"],[h,b]],[/\bsie-(\w*)/i],[f,[v,"Siemens"],[h,b]],[/\b(rct\w+) b/i],[f,[v,"RCA"],[h,w]],[/\b(venue[\d ]{2,7}) b/i],[f,[v,"Dell"],[h,w]],[/\b(q(?:mv|ta)\w+) b/i],[f,[v,"Verizon"],[h,w]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[f,[v,"Barnes & Noble"],[h,w]],[/\b(tm\d{3}\w+) b/i],[f,[v,"NuVision"],[h,w]],[/\b(k88) b/i],[f,[v,"ZTE"],[h,w]],[/\b(nx\d{3}j) b/i],[f,[v,"ZTE"],[h,b]],[/\b(gen\d{3}) b.+49h/i],[f,[v,"Swiss"],[h,b]],[/\b(zur\d{3}) b/i],[f,[v,"Swiss"],[h,w]],[/\b((zeki)?tb.*\b) b/i],[f,[v,"Zeki"],[h,w]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[v,"Dragon Touch"],f,[h,w]],[/\b(ns-?\w{0,9}) b/i],[f,[v,"Insignia"],[h,w]],[/\b((nxa|next)-?\w{0,9}) b/i],[f,[v,"NextBook"],[h,w]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[v,"Voice"],f,[h,b]],[/\b(lvtel\-)?(v1[12]) b/i],[[v,"LvTel"],f,[h,b]],[/\b(ph-1) /i],[f,[v,"Essential"],[h,b]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[f,[v,"Envizen"],[h,w]],[/\b(trio[-\w\. ]+) b/i],[f,[v,"MachSpeed"],[h,w]],[/\btu_(1491) b/i],[f,[v,"Rotor"],[h,w]],[/(shield[\w ]+) b/i],[f,[v,"Nvidia"],[h,w]],[/(sprint) (\w+)/i],[v,f,[h,b]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[v,U],[h,b]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[f,[v,V],[h,w]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[f,[v,V],[h,b]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[v,f,[h,m]],[/droid.+; (shield) bui/i],[f,[v,"Nvidia"],[h,m]],[/(playstation [345portablevi]+)/i],[f,[v,M],[h,m]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[f,[v,U],[h,m]],[/smart-tv.+(samsung)/i],[v,[h,_]],[/hbbtv.+maple;(\d+)/i],[[f,/^/,"SmartTV"],[v,q],[h,_]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[v,D],[h,_]],[/(apple) ?tv/i],[v,[f,O+" TV"],[h,_]],[/crkey/i],[[f,P+"cast"],[v,C],[h,_]],[/droid.+aft(\w)( bui|\))/i],[f,[v,T],[h,_]],[/\(dtv[\);].+(aquos)/i],[f,[v,"Sharp"],[h,_]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[v,W],[f,W],[h,_]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[h,_]],[/((pebble))app/i],[v,f,[h,E]],[/droid.+; (glass) \d/i],[f,[v,C],[h,E]],[/droid.+; (wt63?0{2,3})\)/i],[f,[v,V],[h,E]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[v,[h,I]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[f,[h,b]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[f,[h,w]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[h,w]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[h,b]],[/(android[-\w\. ]{0,9});.+buil/i],[f,[v,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[g,[p,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[g,[p,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[p,g],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[g,p]],os:[[/microsoft (windows) (vista|xp)/i],[p,g],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[p,[g,H,J]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[p,"Windows"],[g,H,J]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[g,/_/g,"."],[p,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[p,"Mac OS"],[g,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[g,p],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[p,g],[/\(bb(10);/i],[g,[p,N]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[g,[p,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[g,[p,x+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[g,[p,"webOS"]],[/crkey\/([\d\.]+)/i],[g,[p,P+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[p,"Chromium OS"],g],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[p,g],[/(sunos) ?([\w\.\d]*)/i],[[p,"Solaris"],g],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[p,g]]},Y=function(e,t){if(typeof e===c&&(t=e,e=r),!(this instanceof Y))return new Y(e,t).getResult();var i=e||(typeof n!==u&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:o),s=t?K(X,t):X;return this.getBrowser=function(){var e={};return e[p]=r,e[g]=r,Q.call(e,i,s.browser),e.major=$(e.version),e},this.getCPU=function(){var e={};return e[y]=r,Q.call(e,i,s.cpu),e},this.getDevice=function(){var e={};return e[v]=r,e[f]=r,e[h]=r,Q.call(e,i,s.device),e},this.getEngine=function(){var e={};return e[p]=r,e[g]=r,Q.call(e,i,s.engine),e},this.getOS=function(){var e={};return e[p]=r,e[g]=r,Q.call(e,i,s.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=typeof e===l&&e.length>S?W(e,S):e,this},this.setUA(i),this};Y.VERSION=i,Y.BROWSER=G([p,g,d]),Y.CPU=G([y]),Y.DEVICE=G([f,v,h,m,b,_,w,E,I]),Y.ENGINE=Y.OS=G([p,g]),e.exports&&(t=e.exports=Y),t.UAParser=Y;var Z=typeof n!==u&&(n.jQuery||n.Zepto);if(Z&&!Z.ua){var ee=new Y;Z.ua=ee.getResult(),Z.ua.get=function(){return ee.getUA()},Z.ua.set=function(e){ee.setUA(e);var t=ee.getResult();for(var n in t)Z.ua[n]=t[n]}}}("object"==typeof window?window:Ne)})),nt=(tt.UAParser,function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e)}),rt="8.6.0",it={apiEndpoint:"api.amplitude.com",batchEvents:!1,cookieExpiration:365,cookieName:"amplitude_id",sameSiteCookie:"Lax",cookieForceUpgrade:!1,deferInitialization:!1,disableCookies:!1,deviceIdFromUrlParam:!1,domain:"",eventUploadPeriodMillis:3e4,eventUploadThreshold:30,forceHttps:!0,includeFbclid:!1,includeGclid:!1,includeReferrer:!1,includeUtm:!1,language:navigator&&(navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage)||"",logLevel:"WARN",logAttributionCapturedEvent:!1,optOut:!1,onError:function(){},onExitPage:function(){},platform:"Web",savedMaxCount:1e3,saveEvents:!0,saveParamsReferrerOncePerSession:!0,secureCookie:!1,sessionTimeout:18e5,storage:S.STORAGE_DEFAULT,trackingOptions:{city:!0,country:!0,carrier:!0,device_manufacturer:!0,device_model:!0,dma:!0,ip_address:!0,language:!0,os_name:!0,os_version:!0,platform:!0,region:!0,version_name:!0},transport:S.TRANSPORT_HTTP,unsetParamsReferrerOnNewSession:!1,unsentKey:"amplitude_unsent",unsentIdentifyKey:"amplitude_unsent_identify",uploadBatchSize:100,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}},ot=function(e){g()||z.log.warn("amplitude-js will not work in a non-browser environment. If you are planning to add Amplitude to a node environment, please use @amplitude/node"),this._instanceName=z.isEmptyString(e)?S.DEFAULT_INSTANCE:e.toLowerCase(),this._unsentEvents=[],this._unsentIdentifys=[],this._ua=new tt(navigator.userAgent).getResult(),this.options=s({},it,{trackingOptions:s({},it.trackingOptions)}),this.cookieStorage=(new pe).getStorage(),this._q=[],this._sending=!1,this._updateScheduled=!1,this._onInit=[],this._eventId=0,this._identifyId=0,this._lastEventTime=null,this._newSession=!1,this._sequenceNumber=0,this._sessionId=null,this._isInitialized=!1,this._userAgent=navigator&&navigator.userAgent||null};ot.prototype.Identify=ke,ot.prototype.Revenue=et,ot.prototype.init=function(e,t,n,r){var i=this;if("string"!==N(e)||z.isEmptyString(e))z.log.error("Invalid apiKey. Please re-initialize with a valid apiKey");else try{at(this.options,n),g()&&void 0!==window.Prototype&&Array.prototype.toJSON&&(w(),z.log.warn("Prototype.js injected Array.prototype.toJSON. Deleting Array.prototype.toJSON to prevent double-stringify")),this.options.cookieName!==it.cookieName&&z.log.warn("The cookieName option is deprecated. We will be ignoring it for newer cookies"),this.options.apiKey=e,this._storageSuffix="_"+e+(this._instanceName===S.DEFAULT_INSTANCE?"":"_"+this._instanceName),this._storageSuffixV5=e.slice(0,6),this._oldCookiename=this.options.cookieName+this._storageSuffix,this._unsentKey=this.options.unsentKey+this._storageSuffix,this._unsentIdentifyKey=this.options.unsentIdentifyKey+this._storageSuffix,this._cookieName=S.COOKIE_PREFIX+"_"+this._storageSuffixV5,this.cookieStorage.options({expirationDays:this.options.cookieExpiration,domain:this.options.domain,secure:this.options.secureCookie,sameSite:this.options.sameSiteCookie}),this._metadataStorage=new ve({storageKey:this._cookieName,disableCookies:this.options.disableCookies,expirationDays:this.options.cookieExpiration,domain:this.options.domain,secure:this.options.secureCookie,sameSite:this.options.sameSiteCookie,storage:this.options.storage});var o=!!this.cookieStorage.get(this._oldCookiename),s=!!this._metadataStorage.load();this._useOldCookie=!s&&o&&!this.options.cookieForceUpgrade;var a=s||o;if(this.options.domain=this.cookieStorage.options().domain,this.options.deferInitialization&&!a)return void this._deferInitialization(e,t,n,r);"string"===N(this.options.logLevel)&&z.setLogLevel(this.options.logLevel);var u=vt(this);this._apiPropertiesTrackingOptions=Object.keys(u).length>0?{tracking_options:u}:{},this.options.cookieForceUpgrade&&o&&(s||ct(this),this.cookieStorage.remove(this._oldCookiename)),ut(this),this._pendingReadStorage=!0;var c=function(e){n&&n.deviceId&&!z.validateDeviceId(n.deviceId)&&(z.log.error('Invalid device ID rejected. Randomly generated UUID will be used instead of "'.concat(n.deviceId,'"')),delete n.deviceId),i.options.deviceId=i._getInitialDeviceId(n&&n.deviceId,e),i.options.userId="string"===N(t)&&!z.isEmptyString(t)&&t||"number"===N(t)&&t.toString()||i.options.userId||null;var r=(new Date).getTime();(!i._sessionId||!i._lastEventTime||r-i._lastEventTime>i.options.sessionTimeout)&&(i.options.unsetParamsReferrerOnNewSession&&i._unsetUTMParams(),i._newSession=!0,i._sessionId=r,i.options.saveParamsReferrerOncePerSession&&i._trackParamsAndReferrer()),i.options.saveParamsReferrerOncePerSession||i._trackParamsAndReferrer(),i.options.saveEvents&&(st(i._unsentEvents),st(i._unsentIdentifys)),i._lastEventTime=r,dt(i),i._pendingReadStorage=!1,i._sendEventsIfReady();for(var o=0;o<i._onInit.length;o++)i._onInit[o](i);i._onInit=[],i._isInitialized=!0};this.options.saveEvents&&(this._unsentEvents=this._loadSavedUnsentEvents(this.options.unsentKey).map((function(e){return{event:e}})).concat(this._unsentEvents),this._unsentIdentifys=this._loadSavedUnsentEvents(this.options.unsentIdentifyKey).map((function(e){return{event:e}})).concat(this._unsentIdentifys)),c(),this.runQueuedFunctions(),"function"===N(r)&&r(this);var l=this.options.onExitPage;if("function"===N(l)&&!this.pageHandlersAdded){this.pageHandlersAdded=!0;var d=function(){var e=i.options.transport;i.setTransport(S.TRANSPORT_BEACON),l(),i.setTransport(e)};window.addEventListener("pagehide",(function(){d()}),!1)}}catch(f){z.log.error(f),"function"===N(n.onError)&&n.onError(f)}},ot.prototype.deleteLowerLevelDomainCookies=function(){var e=ee(),t=this.options.domain&&"."===this.options.domain[0]?this.options.domain.slice(1):this.options.domain;if(t&&e!==t&&new RegExp(t+"$").test(e)){for(var n=e.split("."),r=t.split("."),i=n.length;i>r.length;--i){var o=n.slice(n.length-i).join(".");Z.set(this._cookieName,null,{domain:"."+o})}Z.set(this._cookieName,null,{})}},ot.prototype._getInitialDeviceId=function(e,t){if(e)return e;if(this.options.deviceIdFromUrlParam){var n=this._getDeviceIdFromUrlParam(this._getUrlParams());if(n)return n}return this.options.deviceId?this.options.deviceId:t||W()};var st=function(e){for(var t=0;t<e.length;t++){var n=e[t].event.user_properties,r=e[t].event.event_properties,i=e[t].event.groups;e[t].event.user_properties=z.validateProperties(n),e[t].event.event_properties=z.validateProperties(r),e[t].event.groups=z.validateGroups(i)}};ot.prototype._trackParamsAndReferrer=function(){var e,t,n,r;if(this.options.includeUtm&&(e=this._initUtmData()),this.options.includeReferrer&&(t=this._saveReferrer(this._getReferrer())),this.options.includeGclid&&(n=this._saveGclid(this._getUrlParams())),this.options.includeFbclid&&(r=this._saveFbclid(this._getUrlParams())),this.options.logAttributionCapturedEvent){var i=s({},e,t,n,r);Object.keys(i).length>0&&this.logEvent(S.ATTRIBUTION_EVENT,i)}};var at=function e(t,n){if("object"===N(n)){var r=new Set(["headers"]),i=function(r){if(Object.prototype.hasOwnProperty.call(t,r)){var i=n[r],o=N(t[r]);("transport"!==r||z.validateTransport(i))&&z.validateInput(i,r+" option",o)&&("boolean"===o?t[r]=!!i:"string"===o&&!z.isEmptyString(i)||"number"===o&&i>0||"function"===o?t[r]=i:"object"===o&&e(t[r],i))}};for(var o in n)r.has(o)?t[o]=s({},t[o],n[o]):Object.prototype.hasOwnProperty.call(n,o)&&i(o)}};ot.prototype.runQueuedFunctions=function(){var e=this._q;this._q=[];for(var t=0;t<e.length;t++){var n=this[e[t][0]];"function"===N(n)&&n.apply(this,e[t].slice(1))}},ot.prototype._apiKeySet=function(e){return!z.isEmptyString(this.options.apiKey)||(z.log.error("Invalid apiKey. Please set a valid apiKey with init() before calling "+e),!1)},ot.prototype._loadSavedUnsentEvents=function(e){var t=this._getFromStorage(fe,e),n=this._parseSavedUnsentEventsString(t,e);return this._setInStorage(fe,e,JSON.stringify(n)),n},ot.prototype._parseSavedUnsentEventsString=function(e,t){if(z.isEmptyString(e))return[];if("string"===N(e))try{var n=JSON.parse(e);if("array"===N(n))return n}catch(It){}return z.log.error("Unable to load "+t+" events. Restart with a new empty queue."),[]},ot.prototype.isNewSession=function(){return this._newSession},ot.prototype.onInit=function(e){this._isInitialized?e(this):this._onInit.push(e)},ot.prototype.getSessionId=function(){return this._sessionId},ot.prototype.nextEventId=function(){return this._eventId++,this._eventId},ot.prototype.nextIdentifyId=function(){return this._identifyId++,this._identifyId},ot.prototype.nextSequenceNumber=function(){return this._sequenceNumber++,this._sequenceNumber},ot.prototype._unsentCount=function(){return this._unsentEvents.length+this._unsentIdentifys.length},ot.prototype._sendEventsIfReady=function(){return 0!==this._unsentCount()&&(this.options.batchEvents?this._unsentCount()>=this.options.eventUploadThreshold||this.options.transport===S.TRANSPORT_BEACON?(this.sendEvents(),!0):(this._updateScheduled||(this._updateScheduled=!0,setTimeout(function(){this._updateScheduled=!1,this.sendEvents()}.bind(this),this.options.eventUploadPeriodMillis)),!1):(this.sendEvents(),!0))},ot.prototype.clearStorage=function(){return this._metadataStorage.clear()},ot.prototype._getFromStorage=function(e,t){return e.getItem(t+this._storageSuffix)},ot.prototype._setInStorage=function(e,t,n){e.setItem(t+this._storageSuffix,n)};var ut=function(e){if(e._useOldCookie){var t=e.cookieStorage.get(e._oldCookiename);"object"!==N(t)||lt(e,t)}else{var n=e._metadataStorage.load();"object"===N(n)&&lt(e,n)}},ct=function(e){var t=e.cookieStorage.get(e._oldCookiename);"object"===N(t)&&(lt(e,t),dt(e))},lt=function(e,t){t.deviceId&&(e.options.deviceId=t.deviceId),t.userId&&(e.options.userId=t.userId),null!==t.optOut&&void 0!==t.optOut&&!1!==t.optOut&&(e.options.optOut=t.optOut),t.sessionId&&(e._sessionId=parseInt(t.sessionId,10)),t.lastEventTime&&(e._lastEventTime=parseInt(t.lastEventTime,10)),t.eventId&&(e._eventId=parseInt(t.eventId,10)),t.identifyId&&(e._identifyId=parseInt(t.identifyId,10)),t.sequenceNumber&&(e._sequenceNumber=parseInt(t.sequenceNumber,10))},dt=function(e){var t={deviceId:e.options.deviceId,userId:e.options.userId,optOut:e.options.optOut,sessionId:e._sessionId,lastEventTime:e._lastEventTime,eventId:e._eventId,identifyId:e._identifyId,sequenceNumber:e._sequenceNumber};e._useOldCookie?e.cookieStorage.set(e.options.cookieName+e._storageSuffix,t):e._metadataStorage.save(t)};ot.prototype._initUtmData=function(e,t){e=e||this._getUrlParams(),t=t||this.cookieStorage.get("__utmz");var n=ge(t,e);return ft(this,n),n},ot.prototype._unsetUTMParams=function(){var e=new ke;e.unset(S.REFERRER),e.unset(S.UTM_SOURCE),e.unset(S.UTM_MEDIUM),e.unset(S.UTM_CAMPAIGN),e.unset(S.UTM_TERM),e.unset(S.UTM_CONTENT),this.identify(e)};var ft=function(e,t){if("object"===N(t)&&0!==Object.keys(t).length){var n=new ke;for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n.setOnce("initial_"+r,t[r]),n.set(r,t[r]));e.identify(n)}};ot.prototype._getReferrer=function(){return document.referrer},ot.prototype._getUrlParams=function(){return location.search},ot.prototype._saveGclid=function(e){var t=z.getQueryParam("gclid",e);if(!z.isEmptyString(t)){var n={gclid:t};return ft(this,n),n}},ot.prototype._saveFbclid=function(e){var t=z.getQueryParam("fbclid",e);if(!z.isEmptyString(t)){var n={fbclid:t};return ft(this,n),n}},ot.prototype._getDeviceIdFromUrlParam=function(e){return z.getQueryParam(S.AMP_DEVICE_ID_PARAM,e)},ot.prototype._getReferringDomain=function(e){if(z.isEmptyString(e))return null;var t=e.split("/");return t.length>=3?t[2]:null},ot.prototype._saveReferrer=function(e){if(!z.isEmptyString(e)){var t={referrer:e,referring_domain:this._getReferringDomain(e)};return ft(this,t),t}},ot.prototype.saveEvents=function(){try{var e=JSON.stringify(this._unsentEvents.map((function(e){return e.event})));this._setInStorage(fe,this.options.unsentKey,e)}catch(It){}try{var t=JSON.stringify(this._unsentIdentifys.map((function(e){return e.event})));this._setInStorage(fe,this.options.unsentIdentifyKey,t)}catch(It){}},ot.prototype.setDomain=function(e){if(this._shouldDeferCall())return this._q.push(["setDomain"].concat(Array.prototype.slice.call(arguments,0)));if(z.validateInput(e,"domain","string"))try{this.cookieStorage.options({expirationDays:this.options.cookieExpiration,secure:this.options.secureCookie,domain:e,sameSite:this.options.sameSiteCookie}),this.options.domain=this.cookieStorage.options().domain,ut(this),dt(this)}catch(It){z.log.error(It)}},ot.prototype.setUserId=function(e){if(this._shouldDeferCall())return this._q.push(["setUserId"].concat(Array.prototype.slice.call(arguments,0)));try{this.options.userId=null!=e&&""+e||null,dt(this)}catch(It){z.log.error(It)}},ot.prototype.setGroup=function(e,t){if(this._shouldDeferCall())return this._q.push(["setGroup"].concat(Array.prototype.slice.call(arguments,0)));if(this._apiKeySet("setGroup()")&&z.validateInput(e,"groupType","string")&&!z.isEmptyString(e)){var n={};n[e]=t;var r=(new ke).set(e,t);this._logEvent(S.IDENTIFY_EVENT,null,null,r.userPropertiesOperations,n,null,null,null)}},ot.prototype.setOptOut=function(e){if(this._shouldDeferCall())return this._q.push(["setOptOut"].concat(Array.prototype.slice.call(arguments,0)));if(z.validateInput(e,"enable","boolean"))try{this.options.optOut=e,dt(this)}catch(It){z.log.error(It)}},ot.prototype.setSessionId=function(e){if(z.validateInput(e,"sessionId","number"))try{this._sessionId=e,dt(this)}catch(It){z.log.error(It)}},ot.prototype.resetSessionId=function(){this.setSessionId((new Date).getTime())},ot.prototype.regenerateDeviceId=function(){if(this._shouldDeferCall())return this._q.push(["regenerateDeviceId"].concat(Array.prototype.slice.call(arguments,0)));this.setDeviceId(W())},ot.prototype.setDeviceId=function(e){if(this._shouldDeferCall())return this._q.push(["setDeviceId"].concat(Array.prototype.slice.call(arguments,0)));if(z.validateDeviceId(e))try{z.isEmptyString(e)||(this.options.deviceId=""+e,dt(this))}catch(It){z.log.error(It)}},ot.prototype.setTransport=function(e){if(this._shouldDeferCall())return this._q.push(["setTransport"].concat(Array.prototype.slice.call(arguments,0)));z.validateTransport(e)&&(this.options.transport=e)},ot.prototype.setUserProperties=function(e){if(this._shouldDeferCall())return this._q.push(["setUserProperties"].concat(Array.prototype.slice.call(arguments,0)));if(this._apiKeySet("setUserProperties()")&&z.validateInput(e,"userProperties","object")){var t=z.truncate(z.validateProperties(e));if(0!==Object.keys(t).length){var n=new ke;for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.set(r,t[r]);this.identify(n)}}},ot.prototype.clearUserProperties=function(){if(this._shouldDeferCall())return this._q.push(["clearUserProperties"].concat(Array.prototype.slice.call(arguments,0)));if(this._apiKeySet("clearUserProperties()")){var e=new ke;e.clearAll(),this.identify(e)}};var pt=function(e,t){for(var n=0;n<t._q.length;n++){var r=e[t._q[n][0]];"function"===N(r)&&r.apply(e,t._q[n].slice(1))}return e};ot.prototype.identify=function(e,t,n){if(this._shouldDeferCall())return this._q.push(["identify"].concat(Array.prototype.slice.call(arguments,0)));if(this._apiKeySet("identify()"))if("object"===N(e)&&Object.prototype.hasOwnProperty.call(e,"_q")&&(e=pt(new ke,e)),e instanceof ke){if(Object.keys(e.userPropertiesOperations).length>0)return this._logEvent(S.IDENTIFY_EVENT,null,null,e.userPropertiesOperations,null,null,null,t,n);yt(t,n,0,"No request sent",{reason:"No user property operations"})}else z.log.error("Invalid identify input type. Expected Identify object but saw "+N(e)),yt(t,n,0,"No request sent",{reason:"Invalid identify input type"});else yt(t,n,0,"No request sent",{reason:"API key is not set"})},ot.prototype.groupIdentify=function(e,t,n,r,i){if(this._shouldDeferCall())return this._q.push(["groupIdentify"].concat(Array.prototype.slice.call(arguments,0)));if(this._apiKeySet("groupIdentify()"))if(z.validateInput(e,"group_type","string")&&!z.isEmptyString(e))if(null!=t)if("object"===N(n)&&Object.prototype.hasOwnProperty.call(n,"_q")&&(n=pt(new ke,n)),n instanceof ke){if(Object.keys(n.userPropertiesOperations).length>0)return this._logEvent(S.GROUP_IDENTIFY_EVENT,null,null,null,o({},e,t),n.userPropertiesOperations,null,r,i);yt(r,i,0,"No request sent",{reason:"No group property operations"})}else z.log.error("Invalid identify input type. Expected Identify object but saw "+N(n)),yt(r,i,0,"No request sent",{reason:"Invalid identify input type"});else yt(r,i,0,"No request sent",{reason:"Invalid group name"});else yt(r,i,0,"No request sent",{reason:"Invalid group type"});else yt(r,i,0,"No request sent",{reason:"API key is not set"})},ot.prototype.setVersionName=function(e){if(this._shouldDeferCall())return this._q.push(["setVersionName"].concat(Array.prototype.slice.call(arguments,0)));z.validateInput(e,"versionName","string")&&(this.options.versionName=e)},ot.prototype._logEvent=function(e,t,n,r,i,o,a,u,c){if(ut(this),e)if(this.options.optOut)yt(u,c,0,"No request sent",{reason:"optOut is set to true"});else try{var l;l=e===S.IDENTIFY_EVENT||e===S.GROUP_IDENTIFY_EVENT?this.nextIdentifyId():this.nextEventId();var d=this.nextSequenceNumber(),f="number"===N(a)?a:(new Date).getTime();(!this._sessionId||!this._lastEventTime||f-this._lastEventTime>this.options.sessionTimeout)&&(this._sessionId=f),this._lastEventTime=f,dt(this);var p=this._ua.browser.name,h=this._ua.browser.major,v=this._ua.device.model||this._ua.os.name,g=this._ua.device.vendor;r=r||{};var y=s({},this._apiPropertiesTrackingOptions);n=s({},n||{},y),t=t||{},i=i||{},o=o||{};var m={device_id:this.options.deviceId,user_id:this.options.userId,timestamp:f,event_id:l,session_id:this._sessionId||-1,event_type:e,version_name:this.options.versionName||null,platform:ht(this,"platform")?this.options.platform:null,os_name:ht(this,"os_name")&&p||null,os_version:ht(this,"os_version")&&h||null,device_model:ht(this,"device_model")&&v||null,device_manufacturer:ht(this,"device_manufacturer")&&g||null,language:ht(this,"language")?this.options.language:null,api_properties:n,event_properties:z.truncate(z.validateProperties(t)),user_properties:z.truncate(z.validateProperties(r)),uuid:nt(),library:{name:"amplitude-js",version:rt},sequence_number:d,groups:z.truncate(z.validateGroups(i)),group_properties:z.truncate(z.validateProperties(o)),user_agent:this._userAgent};return e===S.IDENTIFY_EVENT||e===S.GROUP_IDENTIFY_EVENT?(this._unsentIdentifys.push({event:m,callback:u,errorCallback:c}),this._limitEventsQueued(this._unsentIdentifys)):(this._unsentEvents.push({event:m,callback:u,errorCallback:c}),this._limitEventsQueued(this._unsentEvents)),this.options.saveEvents&&this.saveEvents(),this._sendEventsIfReady(),l}catch(It){z.log.error(It)}else yt(u,c,0,"No request sent",{reason:"Missing eventType"})};var ht=function(e,t){return!!e.options.trackingOptions[t]},vt=function(e){for(var t=["city","country","dma","ip_address","region"],n={},r=0;r<t.length;r++){var i=t[r];ht(e,i)||(n[i]=!1)}return n};ot.prototype._limitEventsQueued=function(e){e.length>this.options.savedMaxCount&&e.splice(0,e.length-this.options.savedMaxCount).forEach((function(e){yt(e.callback,e.errorCallback,0,"No request sent",{reason:"Event dropped because options.savedMaxCount exceeded. User may be offline or have a content blocker"})}))},ot.prototype.logEvent=function(e,t,n,r){return this._shouldDeferCall()?this._q.push(["logEvent"].concat(Array.prototype.slice.call(arguments,0))):this.logEventWithTimestamp(e,t,null,n,r)},ot.prototype.logEventWithTimestamp=function(e,t,n,r,i){return this._shouldDeferCall()?this._q.push(["logEventWithTimestamp"].concat(Array.prototype.slice.call(arguments,0))):this._apiKeySet("logEvent()")?z.validateInput(e,"eventType","string")?z.isEmptyString(e)?(yt(r,i,0,"No request sent",{reason:"Missing eventType"}),-1):this._logEvent(e,t,null,null,null,null,n,r,i):(yt(r,i,0,"No request sent",{reason:"Invalid type for eventType"}),-1):(yt(r,i,0,"No request sent",{reason:"API key not set"}),-1)},ot.prototype.logEventWithGroups=function(e,t,n,r,i){return this._shouldDeferCall()?this._q.push(["logEventWithGroups"].concat(Array.prototype.slice.call(arguments,0))):this._apiKeySet("logEventWithGroups()")?z.validateInput(e,"eventType","string")?this._logEvent(e,t,null,null,n,null,null,r,i):(yt(event.callback,event.errorCallback,0,"No request sent",{reason:"Invalid type for eventType"}),-1):(yt(event.callback,event.errorCallback,0,"No request sent",{reason:"API key not set"}),-1)};var gt=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},yt=function(e,t,n,r,i){"function"===N(e)&&e(n,r,i),"function"===N(t)&&t(n,r,i)};ot.prototype.logRevenueV2=function(e){if(this._shouldDeferCall())return this._q.push(["logRevenueV2"].concat(Array.prototype.slice.call(arguments,0)));if(this._apiKeySet("logRevenueV2()"))if("object"===N(e)&&Object.prototype.hasOwnProperty.call(e,"_q")&&(e=pt(new et,e)),e instanceof et){if(e&&e._isValidRevenue())return this.logEvent(S.REVENUE_EVENT,e._toJSONObject())}else z.log.error("Invalid revenue input type. Expected Revenue object but saw "+N(e))},ot.prototype.logRevenue=function(e,t,n){return this._shouldDeferCall()?this._q.push(["logRevenue"].concat(Array.prototype.slice.call(arguments,0))):this._apiKeySet("logRevenue()")&&gt(e)&&(void 0===t||gt(t))?this._logEvent(S.REVENUE_EVENT,{},{productId:n,special:"revenue_amount",quantity:t||1,price:e},null,null,null,null,null):-1},ot.prototype._logErrorsOnEvents=function(e,t,n,r){for(var i=["_unsentEvents","_unsentIdentifys"],o=0;o<i.length;o++)for(var s=i[o],a="_unsentEvents"===s?e:t,u=0;u<this[s].length;u++){var c=this[s][u];c.event.event_id<=a&&c.errorCallback&&c.errorCallback(n,r)}},ot.prototype.removeEvents=function(e,t,n,r){mt(this,"_unsentEvents",e,n,r),mt(this,"_unsentIdentifys",t,n,r)};var mt=function(e,t,n,r,i){if(!(n<0)){for(var o=[],s=0;s<e[t].length;s++){var a=e[t][s];a.event.event_id>n?o.push(a):a.callback&&a.callback(r,i)}e[t]=o}};ot.prototype.sendEvents=function(){if(this._apiKeySet("sendEvents()")){if(this.options.optOut)this.removeEvents(1/0,1/0,0,"No request sent",{reason:"Opt out is set to true"});else if(0!==this._unsentCount()){if(this.options.transport!==S.TRANSPORT_BEACON){if(this._sending)return;this._sending=!0}var e=(this.options.forceHttps||"https:"===window.location.protocol?"https":"http")+"://"+this.options.apiEndpoint,t=Math.min(this._unsentCount(),this.options.uploadBatchSize),n=this._mergeEventsAndIdentifys(t),r=n.maxEventId,i=n.maxIdentifyId,o=JSON.stringify(n.eventsToSend.map((function(e){return e.event}))),s=(new Date).getTime(),a={client:this.options.apiKey,e:o,v:S.API_VERSION,upload_time:s,checksum:Pe(S.API_VERSION+this.options.apiKey+o+s)};if(this.options.transport!==S.TRANSPORT_BEACON){var u=this;new Ye(e,a,this.options.headers).send((function(e,n){u._sending=!1;try{200===e&&"success"===n?(u.removeEvents(r,i,e,n),u.options.saveEvents&&u.saveEvents(),u._sendEventsIfReady()):(u._logErrorsOnEvents(r,i,e,n),413===e&&(1===u.options.uploadBatchSize&&u.removeEvents(r,i,e,n),u.options.uploadBatchSize=Math.ceil(t/2),u.sendEvents()))}catch(It){}}))}else navigator.sendBeacon(e,new URLSearchParams(a))?(this.removeEvents(r,i,200,"success"),this.options.saveEvents&&this.saveEvents()):this._logErrorsOnEvents(r,i,0,"")}}else this.removeEvents(1/0,1/0,0,"No request sent",{reason:"API key not set"})},ot.prototype._mergeEventsAndIdentifys=function(e){for(var t=[],n=0,r=-1,i=0,o=-1;t.length<e;){var s=void 0,a=i>=this._unsentIdentifys.length,u=n>=this._unsentEvents.length;if(u&&a){z.log.error("Merging Events and Identifys, less events and identifys than expected");break}a?r=(s=this._unsentEvents[n++]).event.event_id:u?o=(s=this._unsentIdentifys[i++]).event.event_id:!("sequence_number"in this._unsentEvents[n].event)||this._unsentEvents[n].event.sequence_number<this._unsentIdentifys[i].event.sequence_number?r=(s=this._unsentEvents[n++]).event.event_id:o=(s=this._unsentIdentifys[i++]).event.event_id,t.push(s)}return{eventsToSend:t,maxEventId:r,maxIdentifyId:o}},ot.prototype.setGlobalUserProperties=function(e){this.setUserProperties(e)},ot.prototype.__VERSION__=rt,ot.prototype._shouldDeferCall=function(){return this._pendingReadStorage||this._initializationDeferred},ot.prototype._deferInitialization=function(){this._initializationDeferred=!0,this._q.push(["init"].concat(Array.prototype.slice.call(arguments,0)))},ot.prototype.enableTracking=function(){this._initializationDeferred=!1,dt(this),this.runQueuedFunctions()};var bt=function(){this.options=s({},it),this._q=[],this._instances={}};bt.prototype.Identify=ke,bt.prototype.Revenue=et,bt.prototype.getInstance=function(e){e=z.isEmptyString(e)?S.DEFAULT_INSTANCE:e.toLowerCase();var t=this._instances[e];return void 0===t&&(t=new ot(e),this._instances[e]=t),t},bt.prototype.runQueuedFunctions=function(){for(var e=0;e<this._q.length;e++){var t=this[this._q[e][0]];"function"===N(t)&&t.apply(this,this._q[e].slice(1))}for(var n in this._q=[],this._instances)Object.prototype.hasOwnProperty.call(this._instances,n)&&this._instances[n].runQueuedFunctions()},bt.prototype.init=function(e,t,n,r){this.getInstance().init(e,t,n,function(e){this.options=e.options,"function"===N(r)&&r(e)}.bind(this))},bt.prototype.isNewSession=function(){return this.getInstance().isNewSession()},bt.prototype.getSessionId=function(){return this.getInstance().getSessionId()},bt.prototype.nextEventId=function(){return this.getInstance().nextEventId()},bt.prototype.nextIdentifyId=function(){return this.getInstance().nextIdentifyId()},bt.prototype.nextSequenceNumber=function(){return this.getInstance().nextSequenceNumber()},bt.prototype.saveEvents=function(){this.getInstance().saveEvents()},bt.prototype.setDomain=function(e){this.getInstance().setDomain(e)},bt.prototype.setUserId=function(e){this.getInstance().setUserId(e)},bt.prototype.setGroup=function(e,t){this.getInstance().setGroup(e,t)},bt.prototype.setOptOut=function(e){this.getInstance().setOptOut(e)},bt.prototype.regenerateDeviceId=function(){this.getInstance().regenerateDeviceId()},bt.prototype.setDeviceId=function(e){this.getInstance().setDeviceId(e)},bt.prototype.setUserProperties=function(e){this.getInstance().setUserProperties(e)},bt.prototype.clearUserProperties=function(){this.getInstance().clearUserProperties()},bt.prototype.identify=function(e,t){this.getInstance().identify(e,t)},bt.prototype.setVersionName=function(e){this.getInstance().setVersionName(e)},bt.prototype.logEvent=function(e,t,n){return this.getInstance().logEvent(e,t,n)},bt.prototype.logEventWithGroups=function(e,t,n,r){return this.getInstance().logEventWithGroups(e,t,n,r)},bt.prototype.logRevenueV2=function(e){return this.getInstance().logRevenueV2(e)},bt.prototype.logRevenue=function(e,t,n){return this.getInstance().logRevenue(e,t,n)},bt.prototype.removeEvents=function(e,t){this.getInstance().removeEvents(e,t)},bt.prototype.sendEvents=function(e){this.getInstance().sendEvents(e)},bt.prototype.setGlobalUserProperties=function(e){this.getInstance().setUserProperties(e)},bt.prototype.__VERSION__=rt;var wt=window.amplitude||{},_t=new bt;for(var Et in _t._q=wt._q||[],wt._iq)Object.prototype.hasOwnProperty.call(wt._iq,Et)&&(_t.getInstance(Et)._q=wt._iq[Et]._q||[]);return _t.runQueuedFunctions(),_t}()}}]);