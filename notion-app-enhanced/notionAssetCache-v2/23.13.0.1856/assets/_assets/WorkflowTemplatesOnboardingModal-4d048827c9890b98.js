"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[70907,37598],{589357:(e,t,o)=>{o.r(t),o.d(t,{AssistantAnimatedFace:()=>T,AssistantAnimatedFaceInner:()=>I});o(492176),o(7961);var n=()=>o(522399),r=()=>o(730120),i=o(667294),a=()=>o(387934),l=()=>o(142735),s=()=>o(846550),d=()=>o(947115),c=()=>o(444263),u=()=>o(840521),p=()=>o(79179),m=()=>o(839002),g=()=>o(696459),f=()=>o(726143),h=()=>o(379072),y=()=>o(95718),x=()=>o(660293),v=()=>o(21062),b=()=>o(934262),w=()=>o(73898),S=()=>o(576917);const C=o.p+"bc69e69669ca365b.riv",k=["Base_Idle","Idle A","Idle B","Idle C"];var _=o(785893);n().RuntimeLoader.setWasmUrl(o(822721));const j=!1;function T(e){const{sizeVariant:t,includeBoxShadow:o,onMouseEnter:n}=e,r=function(){const e=(0,f().Io)().isWriter,t=(0,l().VK)((()=>{const t=e?(0,y().Js)():h().default.getActiveSession();if(!t)return"idle";const o=t.evaluator.getTranscript().at(-1);if(o&&"observation"===o.type&&"error"===o.observationType)return"error";const n=t.isStreaming();if(!n)return"idle";const r=t.getCombinedSteps().at(-1),i="assistantSearch"===(null==r?void 0:r.type)||"assistantShowSearchResults"===(null==r?void 0:r.type),a="assistantLoading"===(null==r?void 0:r.type)||"human"===(null==r?void 0:r.type);return"groupedEditCard"===(null==r?void 0:r.type)?"writing":i?"searching":a?"thinking":n?"writing":"idle"}),[e]);return(0,i.useEffect)((()=>{j&&M("HighLevelState","Pink",t)}),[t]),t}();return(0,_.jsx)(v().N,{step:"ai_assistant",isFullWidth:!1,highlightStyle:{borderRadius:"100%"},children:(0,_.jsx)(I,{sizeVariant:t,includeBoxShadow:o,highLevelState:r,onMouseEnter:n})})}function I(e){const{sizeVariant:t,highLevelState:o,includeBoxShadow:r,onMouseEnter:f}=e,[h,y]=(0,i.useState)(!1),v=(0,i.useCallback)((()=>{y(!0)}),[]),{onStateChange:T,waitUntilState:I,animationState:P}=function(){const e=(0,i.useRef)("Idle B"),t=(0,i.useMemo)((()=>new(c().Z)),[]),o=(0,i.useCallback)((o=>{if(Array.isArray(o.data)&&1===o.data.length){const n=o.data[0];j&&M("State change","DarkGreen",n),e.current=n,t.emit(n)}}),[t]),n=(0,i.useCallback)((()=>new Promise((e=>{const o=n=>{t.removeListener(o),e(n)};t.addListener(o)}))),[t]),r=(0,i.useCallback)((async t=>{(await m().OI(2e3,(async()=>{for(;!t(e.current);)await n()})())).timeout&&(0,a().XY)("Timed out while waiting for an assistant face state change.")}),[n]);return{animationState:e,waitUntilState:r,onStateChange:o}}(),{rive:R,RiveComponent:B}=(0,n().useRive)({src:C,stateMachines:["Main"],autoplay:!0,onAdvance:v,onStateChange:T});!function(e){const t=(0,l().VK)((()=>x().Z.state.isVisible),[]),o=(0,i.useCallback)((()=>{null==e||e.startRendering()}),[e]),n=(0,i.useCallback)((()=>{null==e||e.stopRendering()}),[e]);(0,i.useEffect)((()=>{t?o():n()}),[t,n,o])}(R);const A=function(e){const t=(0,i.useMemo)((()=>{const t=null==e?void 0:e.stateMachineInputs("Main"),o=new Map;if(!t)return o;for(const e of t)o.set(e.name,e);return o}),[e]);(0,i.useEffect)((()=>{(0,d().exposeDebugValue)("AssistantAnimatedFaceTriggers",t)}),[t]);const o=(0,u().X)(),n=(0,i.useCallback)((e=>{var n;o.current&&(j&&M("Firing trigger","MediumBlue",e),null===(n=t.get(e))||void 0===n||n.fire())}),[o,t]);return n}(R),V=(0,i.useMemo)((()=>new(p().z)(1)),[]);(0,i.useEffect)((()=>{V.enqueue((async()=>{"writing"===o?A("WritingInTrigger"):"idle"===o?(await async function(){"Writing_In"===P.current&&await I((e=>"Writing_Loop"===e)),"Writing_Loop"===P.current&&(A("WritingOutTrigger"),await I((e=>(0,g().DE)(k,e)))),"Thinking_In"!==P.current&&"Thinking_Loop"!==P.current||(A("ThinkingOutTrigger"),await I((e=>(0,g().DE)(k,e)))),"Searching_In"===P.current&&await I((e=>"Searching_Loop"===e)),"Searching_Loop"===P.current&&(A("SearchingOutTrigger"),await I((e=>(0,g().DE)(k,e))))}(),A("IdleTrigger")):"searching"===o?A("SearchingInTrigger"):"thinking"===o?A("ThinkingInTrigger"):"error"===o?A("ErrorTrigger"):(0,g().t1)(o)}))}),[o,A,I,V,P]);const L=(0,s().yK)((e=>{const o=(0,w().O)(t);return{wrap:{width:o,height:o,...r&&{boxShadow:e.aiEditCardDropShadow,borderRadius:"100%"},position:"relative"},faceImg:{position:"absolute",height:o,width:o},staticFace:{position:"absolute",left:0,top:0}}}),[t,r]);return(0,_.jsxs)("div",{style:L.wrap,onMouseEnter:e=>{e.stopPropagation(),null==f||f(e),setTimeout((()=>b().default.dismissTourTutorial()),400)},children:[(0,_.jsx)(B,{style:L.faceImg,onMouseEnter:()=>{Math.random()<.1&&A("GreetingTrigger")}}),!h&&(0,_.jsx)(S().P,{variant:t,wrapWithPadding:!0,style:L.staticFace,shadowVariant:r?"strong":"none"})]})}function M(e,t){const o=r().ou.local().toFormat("HH:mm:ss.SSS");for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];console.log(`%c[${o}] %c${e}:`,"color: Grey;",`color: ${t}; font-weight: bold;`,...i)}},707461:(e,t,o)=>{o.d(t,{Pm:()=>l,Xj:()=>i,wC:()=>a});var n=()=>o(435308);class r extends(()=>o(263184))().default{getInitialState(){return{popupRenderedInPage:!1,popupRenderedInPeekView:!1}}}const i=new r,a=new(n().default)((()=>!1!==i.state.popupRenderedInPage),{debugName:"AssistantWriterRenderedInPageStore"}),l=new(n().default)((()=>!1!==i.state.popupRenderedInPeekView),{debugName:"AssistantWriterRenderedInPeekViewStore"})},472344:(e,t,o)=>{o.d(t,{O:()=>g,b:()=>m});o(667294);var n=()=>o(846550),r=()=>o(114079),i=()=>o(513670),a=()=>o(326966),l=()=>o(337897),s=()=>o(527278),d=()=>o(86048),c=()=>o(594072),u=o(785893);const p=21;function m(e){const{numberValue:t,numberFormat:o,numberPrecision:m,numberShowAs:f,shouldRenderTooltip:h,withComma:y,style:x,ringWidth:v,className:b,barHeight:w}=e,S=(0,n().Fg)();if(i().i2(t)||a().z4(t))return null;const C=e.progressSize??p,k=(null==f?void 0:f.showValue)??!0,_=k&&r().uf(t,o,s().Z.getIntl(),void 0,m);let j;if("bar"===(null==f?void 0:f.type)||"ring"===(null==f?void 0:f.type)){const n=r().IM(t,f.maxValue),{filledColor:i,gapColor:a,unfilledColor:s}=g({theme:S,color:f.color}),p=h?l().X7({numberValue:t,numberFormat:o,numberShowAs:f}):void 0;j="bar"===f.type?(0,u.jsx)(d().k,{percentage:n,filledColor:i,gapColor:a,unfilledColor:s,height:w,style:{height:C,...e.barStyle,...k?{}:{flexBasis:"100%"}},tooltip:p}):(0,u.jsx)(c().e,{percentage:n,filledColor:i,gapColor:a,unfilledColor:s,size:C,ringWidth:v,tooltip:p})}return(0,u.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",gap:"6px 8px",...x},className:b,children:[_,j,y?", ":null]})}function g(e){let{theme:t,color:o}=e;const n="default"===o?t.selectLightGray:t.accentColors[o];return{filledColor:"dark"===t.mode?n[500]:n[400],gapColor:n[50],unfilledColor:"dark"===t.mode?n[200]:t.selectLightGray[200]}}},539245:(e,t,o)=>{o.d(t,{Z:()=>l});o(241792);var n=o(667294),r=()=>o(352230),i=o(785893);function a(e){let{tabs:t,selectedIndex:a,onChange:l,separatorIndexes:s,right:d,style:c,rightStyle:u,tabStyle:p,tabTitleStyle:m,selectedTabTitleStyle:g,tabBorderStyle:f,selectedTabStyle:h,readOnly:y,hideTabBorder:x}=e;const v=(0,n.useContext)(r().p),{device:b,WindowSizeStore:w}=(0,o(219727).O7)(),{safePaddingLeft:S,safePaddingRight:C}=(0,o(142735).VK)((()=>({safePaddingLeft:w.getSafePaddingLeftCSS(16),safePaddingRight:w.getSafePaddingRightCSS(16)})),[w]),k=(0,o(846550).yK)((e=>{const t={paddingTop:6,paddingBottom:6,whiteSpace:"nowrap",minWidth:0,flexShrink:0,color:e.mediumTextColor,...p},o=`inset 0 -1px 0 ${e.regularDividerColor}`,n=v.menuType===r().o.Popup,i={fontSize:16,paddingTop:2,paddingLeft:n?16:S,paddingRight:n?16:C,zIndex:2,height:44,background:e.popoverBackground};return{container:{overflowY:"visible",overflowX:"auto",display:"flex",width:"100%",position:"relative",boxShadow:x?void 0:o,...b.isMobile?i:{fontSize:14,paddingLeft:8,paddingRight:8,zIndex:1},...c},separator:{display:"inline-flex",alignItems:"center",margin:"0 4px",paddingBottom:4,whiteSpace:"nowrap",minWidth:0,flexShrink:0,color:e.regularDividerColor},mobile:{},tab:t,selectedTab:{...t,position:"relative",color:e.regularTextColor,...h},border:{borderBottom:`2px solid ${e.regularTextColor}`,position:"absolute",bottom:0,left:8,right:8,...f},rightContainer:{flexGrow:1,display:"flex",alignItems:"center",justifyContent:"flex-end",color:e.mediumTextColor,...u}}}),[v.menuType,b.isMobile,u,S,C,h,c,f,p,x]);return(0,i.jsxs)("div",{className:"hide-scrollbar",style:k.container,children:[t.map(((e,t)=>{const r=t===a;return(0,i.jsxs)(n.Fragment,{children:[(0,i.jsxs)("div",{style:r?k.selectedTab:k.tab,children:[(0,i.jsx)(o(92175).Z,{style:{...m,...r?g:{}},onClick:()=>l(t),disabled:y,mobileFeedback:b.isMobile,isLightGray:!Boolean(r),children:e}),r&&(0,i.jsx)("div",{style:k.border})]},`tabButton-${t}`),s&&s.includes(t)&&(0,i.jsx)("div",{style:k.separator,className:"notranslate",children:"|"},`${t}-separator`)]},t)})),d&&(0,i.jsx)("div",{style:k.rightContainer,children:d})]})}const l=n.memo(a)},337897:(e,t,o)=>{o.d(t,{AB:()=>R,AF:()=>C,Hw:()=>S,Sy:()=>b,TP:()=>I,VM:()=>v,X7:()=>k,X9:()=>j,aJ:()=>M,g0:()=>_,xE:()=>P,z0:()=>w});o(267602),o(228244);var n=()=>o(506347),r=()=>o(15607),i=()=>o(226413),a=()=>o(532850),l=()=>o(114079),s=()=>o(955620),d=()=>o(513670),c=()=>o(696459),u=()=>o(916673),p=()=>o(326966),m=()=>o(356321),g=()=>o(998215),f=()=>o(929071),h=()=>o(466043),y=()=>o(429725),x=()=>o(527278);function v(e){return Boolean(e.state.isOpen&&e.state.collectionsBulkActionsToolbarStore)}function b(e){switch(e){case m().C.Table:return"table";case m().C.Board:return"board";case m().C.ListView:return"list";case m().C.GalleryView:return"gallery";case m().C.Relation:case m().C.RelationSection:return"relation_section";case m().C.Timeline:return"timeline";case m().C.Calendar:return"calendar";case m().C.Page:return"page_properties";case m().C.CompactPage:return"compact_page";case m().C.Mini:return"mini_peek";case m().C.FormEditor:case m().C.FormViewer:case m().C.PropertyModule:return"property_module";default:(0,c().t1)(e)}}function w(e){return{backgroundImage:`linear-gradient(\n\t\tto right,\n\t\t${e.darkDividerColor} 0%,\n\t\t${e.darkDividerColor} 100%\n\t)`,backgroundRepeat:"repeat-x",backgroundPosition:"0 100%",backgroundSize:"100% 1px"}}function S(e){const{store:t,property:o,propertySchema:r}=e,i=null==r?void 0:r.type;if("title"===i)return(0,y().ZP)({store:t,fullyQualified:!1,pageVisitSource:n().tY.LinkInPage});{const e=t.getPropertyValue(o);return a().Hw(i,e)}}function C(e){let t=(0,s().Jcv)(e);if(!t||""===t.trim()||t.trim().includes(" "))return{domain:void 0,restOfUrl:void 0};t=t.trim();let o=u().Qc(t),n=o.host;if(o.protocol&&n||(o=u().Qc(`http://${t}`),n=o.host),!n)return{domain:void 0,restOfUrl:void 0};n&&(n=n.replace(/^www./i,""));const r=t.toLowerCase().indexOf(n.toLowerCase());if(-1===r)return{domain:void 0,restOfUrl:void 0};n=t.slice(r,r+n.length);return{domain:n,restOfUrl:t.slice(r+n.length)}}function k(e){const{numberValue:t,numberFormat:o,numberShowAs:n}=e;if(!(d().i2(t)||p().z4(t)||"bar"!==(null==n?void 0:n.type)&&"ring"!==(null==n?void 0:n.type))){const e=x().Z.getIntl();return"percent"===o?l().uf(t,"percent",e):`${t} / ${n.maxValue}`}}function _(e){const{property:t,collectionStore:o}=e,n=o.isSyncedCollection();return Boolean(n)&&(0,r().w)(t)}function j(e,t){switch(e){case"side_peek":return{icon:h().y,tooltip:x().Z.formatMessage(T.openInSidePeekTooltip),caption:t?"":x().Z.formatMessage(T.openAsPageTitle)};case"center_peek":return{icon:f().Q,tooltip:x().Z.formatMessage(T.openInCenterPeekTooltip),caption:t?"":x().Z.formatMessage(T.openAsPageTitle)};case"full_page":return{icon:g().Z,tooltip:x().Z.formatMessage(T.openAsPageTooltip),caption:t?"":x().Z.formatMessage(T.openAsPageTitle)};default:(0,c().t1)(e)}}const T=(0,o(788860).vU)({openAsPageTitle:{defaultMessage:"Open",id:"database.actionButton.openAsPageTitle"},openAsPageTooltip:{defaultMessage:"Open as page",id:"database.actionButton.openAsPageTooltip"},openInCenterPeekTooltip:{defaultMessage:"Open in center peek",id:"database.actionButton.openInCenterPeekTooltip"},openInSidePeekTooltip:{defaultMessage:"Open in side peek",id:"database.actionButton.openInSidePeekTooltip"}});function I(e){const t=e.getSchema();if(t)for(const[n,r]of Object.entries(t)){var o;if(r&&"text"===r.type&&"summarize"===(null===(o=r.ai_inference)||void 0===o?void 0:o.type)){const t=e.getPropertyValue(n);if(t)return t}}}function M(e){const{store:t,additionalStores:o,collectionContextStore:n}=e,r=t.getAssociatedCollectionStore();return!("collectionTypedView"!==(null==n?void 0:n.contextType)||!r)&&o.some((e=>{var t;return(null===(t=e.getAssociatedCollectionStore())||void 0===t?void 0:t.id)!==r.id}))}function P(e){return e===m().C.FormEditor||e===m().C.FormViewer}function R(e){return Boolean(e&&!i().uk.includes(e.type))}},706363:(e,t,o)=>{o.d(t,{Ct:()=>r,LO:()=>n,iN:()=>i});const n=40,r=48,i=60},688293:(e,t,o)=>{o.d(t,{N:()=>m,t:()=>g});o(670560);var n=o(667294),r=()=>o(219727),i=()=>o(142735),a=()=>o(799891),l=(o(821057),()=>o(386616)),s=()=>o(826955),d=()=>o(269299);var c=()=>o(109083),u=()=>o(910135),p=()=>o(142109);function m(e,t){let{canUndo:o,shouldPersistOperation:m}=t;const g=(0,r().O7)(),f=(0,n.useRef)([]).current,h=(0,n.useCallback)((e=>{f.push(...e)}),[f]),y=(0,n.useCallback)((e=>{m&&!m(e)||h([e])}),[h,m]),x=(0,p().$)(e,{cacheFallback:g.defaultRecordCache.inMemoryRecordCache,isTemporaryData:!0,onOperationCallback:y});(0,n.useEffect)((()=>{c().Z.initializeCache(e,x)}),[e,x]);const v=(0,n.useCallback)((()=>{u().default.reset(),c().Z.clearCache(e)}),[e]);(0,n.useEffect)((()=>(u().default.reset(),()=>{u().default.reset(),c().Z.expire(e)})),[e]);const b=(0,i().VK)((()=>u().default.state.undoStack.length>0),[]);(0,n.useEffect)((()=>{c().Z.updateUnsavedCacheState(e,b)}),[e,b]);const w=(0,n.useCallback)((async e=>{if(0===f.length)return void 0;x.assertUnexpired(),function(e){for(const t of u().default.state.undoStack)for(const o of t.transactions)for(const t of o.stores)if(t.inMemoryRecordCache!==e&&!t.inMemoryRecordCache.isMockTextStore){const n=o.getUserActionForAnalyticsPurposesOnly(),r=t.inMemoryRecordCache.name,i=e.name,l=`Undoable user action "${n}" was applied to cache "${r}", but only operations in the cache "${i}" should be in the undo stack!`;(0,a().log)({from:"useLocalDraft",type:"invalidStoreInRevisionStack",level:"error",data:{message:l,miscDataToConvertToString:{userAction:n,inMemoryRecordCacheName:r,expectedInMemoryRecordCacheName:i}}})}}(x);const{serverCommitResult:t}=d().createAndCommit({environment:g,userAction:e,perform(e){!function(e){let{environment:t,transaction:o,operationsWithStores:n}=e;for(const{operation:r,store:i}of n){if(!(i instanceof s().ST))continue;const e=i.clone(t.defaultRecordCache.inMemoryRecordCache);(0,l().Qf)(r)?d().applyCrdtTextOperation({store:i,operation:r,transaction:o,invertedOperation:void 0}):d().applyOperation({transaction:o,store:e,operation:r})}}({environment:g,transaction:e,operationsWithStores:f}),e.postSubmitCallbacks.push((e=>{e||(x.expire(),u().default.reset())}))},canUndo:o});return t}),[e,o,g,f,x]);return(0,n.useMemo)((()=>({cache:x,hasChanges:b,persist:w,reset:v})),[b,w,v,x])}function g(e,t){return(0,i().VK)((()=>t.clone(e.cache)),[t,e.cache])}},228772:(e,t,o)=>{o.d(t,{r:()=>i});var n=()=>o(142735),r=()=>o(876822);function i(){return(0,n().VK)((()=>r().default.state.currentSpaceStore),[])}},880556:(e,t,o)=>{o.d(t,{W:()=>r});o(667294);var n=o(785893);const r=(0,o(827282).IU)("arrowLeftThick",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M1.54004 8.05762C1.54004 8.2627 1.62891 8.46094 1.78613 8.61133L6.29102 13.1162C6.45508 13.2734 6.63965 13.3486 6.82422 13.3486C7.25488 13.3486 7.5625 13.041 7.5625 12.6309C7.5625 12.4189 7.48047 12.2344 7.34375 12.1045L5.8125 10.5527L3.78906 8.70703L5.38867 8.80273H13.7012C14.1455 8.80273 14.46 8.49512 14.46 8.05762C14.46 7.61328 14.1455 7.3125 13.7012 7.3125H5.38867L3.7959 7.4082L5.8125 5.5625L7.34375 4.01074C7.48047 3.87402 7.5625 3.68945 7.5625 3.47754C7.5625 3.06738 7.25488 2.7666 6.82422 2.7666C6.63965 2.7666 6.45508 2.83496 6.27734 3.00586L1.78613 7.50391C1.62891 7.64746 1.54004 7.85254 1.54004 8.05762Z"})})},660065:(e,t,o)=>{o.d(t,{r:()=>r});o(667294);var n=o(785893);const r=(0,o(827282).IU)("arrowRightRounded",{viewBox:"0 0 16 13",svg:(0,n.jsx)("path",{d:"M15.3828 6.85156C15.3828 7.09635 15.2917 7.3099 15.1094 7.49219L9.95312 12.6328C9.77083 12.8099 9.5651 12.8984 9.33594 12.8984C9.09635 12.8984 8.89583 12.8203 8.73438 12.6641C8.57812 12.5078 8.5 12.3125 8.5 12.0781C8.5 11.9583 8.52083 11.8464 8.5625 11.7422C8.60938 11.638 8.67188 11.5469 8.75 11.4688L10.5 9.70312L13.4141 7.04688L13.6875 7.54688L10.9766 7.70312H1.48438C1.22396 7.70312 1.01302 7.625 0.851562 7.46875C0.695312 7.30729 0.617188 7.10156 0.617188 6.85156C0.617188 6.59635 0.695312 6.39062 0.851562 6.23438C1.01302 6.07292 1.22396 5.99219 1.48438 5.99219H10.9766L13.6875 6.15625L13.4141 6.66406L10.5 4L8.75 2.22656C8.67188 2.14844 8.60938 2.0599 8.5625 1.96094C8.52083 1.85677 8.5 1.74219 8.5 1.61719C8.5 1.38281 8.57812 1.1875 8.73438 1.03125C8.89583 0.875 9.09635 0.796875 9.33594 0.796875C9.45052 0.796875 9.5599 0.820312 9.66406 0.867188C9.76823 0.914062 9.86719 0.984375 9.96094 1.07812L15.1094 6.21094C15.2917 6.39323 15.3828 6.60677 15.3828 6.85156Z"})})},257185:(e,t,o)=>{o.d(t,{y:()=>n().y});var n=()=>o(949489)},998215:(e,t,o)=>{o.d(t,{Z:()=>r});o(667294);var n=o(785893);const r=(0,o(827282).IU)("openAsPageThick",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M2.16895 7.19629C2.59277 7.19629 2.90723 6.88867 2.90723 6.45801V5.96582L2.75684 3.81934L4.35645 5.50098L6.3252 7.4834C6.46875 7.63379 6.65332 7.70215 6.85156 7.70215C7.30957 7.70215 7.6377 7.39453 7.6377 6.93652C7.6377 6.72461 7.55566 6.54004 7.41211 6.39648L5.43652 4.4209L3.74805 2.82129L5.91504 2.96484H6.44141C6.86523 2.96484 7.18652 2.65723 7.18652 2.22656C7.18652 1.7959 6.87207 1.48145 6.44141 1.48145L2.64746 1.48145C1.86816 1.48145 1.41699 1.93262 1.41699 2.71875L1.41699 6.45801C1.41699 6.88184 1.73828 7.19629 2.16895 7.19629ZM9.55176 14.6543H13.3389C14.125 14.6543 14.5762 14.2031 14.5762 13.417V9.67773C14.5762 9.25391 14.2549 8.93945 13.8242 8.93945C13.4004 8.93945 13.0859 9.24707 13.0859 9.67773V10.1699L13.2295 12.3164L11.6299 10.6348L9.66113 8.65234C9.52441 8.50195 9.33984 8.43359 9.1416 8.43359C8.68359 8.43359 8.35547 8.74121 8.35547 9.19922C8.35547 9.41113 8.43066 9.5957 8.57422 9.73926L10.5566 11.7148L12.2383 13.3145L10.0781 13.1709H9.55176C9.12793 13.1709 8.80664 13.4785 8.80664 13.9092C8.80664 14.3398 9.12109 14.6543 9.55176 14.6543Z"})})},953293:(e,t,o)=>{o.d(t,{R:()=>n().R});var n=()=>o(519454)},135515:(e,t,o)=>{o.d(t,{A:()=>r});o(667294);var n=o(785893);const r=(0,o(827282).IU)("plusMedium",{viewBox:"0 0 16 16",svg:(0,n.jsx)("g",{children:(0,n.jsx)("path",{d:"M2 8a.77.77 0 01.237-.566.762.762 0 01.566-.244h4.394V2.803a.77.77 0 01.237-.566A.773.773 0 018 2c.225 0 .416.079.573.237a.773.773 0 01.237.566V7.19h4.387c.22 0 .409.081.566.244A.773.773 0 0114 8a.781.781 0 01-.237.573.785.785 0 01-.566.23H8.81v4.401a.764.764 0 01-.237.56A.781.781 0 018 14a.773.773 0 01-.566-.237.764.764 0 01-.237-.559V8.803H2.803a.785.785 0 01-.566-.23A.781.781 0 012 8z"})})})},317050:(e,t,o)=>{o.d(t,{_:()=>r});o(667294);var n=o(785893);const r=(0,o(827282).IU)("sendArrow",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M9.79883 18.5894C14.6216 18.5894 18.5894 14.6216 18.5894 9.79883C18.5894 4.96777 14.6216 1 9.79053 1C4.95947 1 1 4.96777 1 9.79883C1 14.6216 4.96777 18.5894 9.79883 18.5894ZM9.79883 14.3062C9.20947 14.3062 8.76953 13.9077 8.76953 13.3433V9.69922L8.86914 8.00586L8.25488 8.84424L7.3916 9.81543C7.23389 10.0063 6.98486 10.1143 6.72754 10.1143C6.21289 10.1143 5.84766 9.75732 5.84766 9.25928C5.84766 8.99365 5.92236 8.79443 6.12158 8.58691L8.96045 5.61523C9.19287 5.35791 9.4585 5.2417 9.79883 5.2417C10.1309 5.2417 10.4048 5.36621 10.6372 5.61523L13.4761 8.58691C13.667 8.79443 13.75 8.99365 13.75 9.25928C13.75 9.75732 13.3848 10.1143 12.8618 10.1143C12.6128 10.1143 12.3638 10.0063 12.2061 9.81543L11.3428 8.86914L10.7202 7.99756L10.8281 9.69922V13.3433C10.8281 13.9077 10.3799 14.3062 9.79883 14.3062Z"})})},936419:(e,t,o)=>{o.d(t,{q:()=>r});o(667294);var n=o(785893);const r=(0,o(827282).IU)("squareStop",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M9.79469 18.5894C8.59333 18.5894 7.46094 18.3595 6.39753 17.8996C5.33986 17.4398 4.40579 16.8046 3.5953 15.9941C2.78481 15.1836 2.14963 14.2495 1.68978 13.1919C1.22993 12.1284 1 10.9961 1 9.79469C1 8.59333 1.22993 7.46381 1.68978 6.40615C2.14963 5.34274 2.78193 4.40579 3.58667 3.5953C4.39717 2.78481 5.33124 2.14963 6.3889 1.68978C7.45232 1.22993 8.5847 1 9.78607 1C10.9874 1 12.1198 1.22993 13.1832 1.68978C14.2466 2.14963 15.1836 2.78481 15.9941 3.5953C16.8046 4.40579 17.4398 5.34274 17.8996 6.40615C18.3595 7.46381 18.5894 8.59333 18.5894 9.79469C18.5894 10.9961 18.3595 12.1284 17.8996 13.1919C17.4398 14.2495 16.8046 15.1836 15.9941 15.9941C15.1836 16.8046 14.2466 17.4398 13.1832 17.8996C12.1256 18.3595 10.9961 18.5894 9.79469 18.5894ZM7.44944 13.028H12.1399C12.4159 13.028 12.6314 12.9504 12.7866 12.7952C12.9476 12.64 13.028 12.4245 13.028 12.1486V7.42357C13.028 7.15341 12.9476 6.94073 12.7866 6.78553C12.6314 6.63033 12.4159 6.55273 12.1399 6.55273H7.44944C7.17353 6.55273 6.9551 6.63033 6.79415 6.78553C6.63895 6.94073 6.56135 7.15341 6.56135 7.42357V12.1486C6.56135 12.4245 6.63895 12.64 6.79415 12.7952C6.9551 12.9504 7.17353 13.028 7.44944 13.028Z"})})},619288:(e,t,o)=>{o.d(t,{E:()=>r});o(667294);var n=o(785893);const r=(0,o(827282).IU)("templatesNewColored",{viewBox:"0 0 20 20",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{fill:"#FFB110",fillRule:"evenodd",d:"M6.014 16.338a4.429 4.429 0 004.429-4.48H8.88c-.254 0-.512 0-.732-.018a2.26 2.26 0 01-.86-.226 2.24 2.24 0 01-.979-.979 2.26 2.26 0 01-.226-.86 9.471 9.471 0 01-.018-.731V7.48a4.44 4.44 0 014.179 3.111 4.431 4.431 0 00-8.659 1.318 4.43 4.43 0 004.43 4.43z",clipRule:"evenodd"}),(0,n.jsx)("path",{fill:"#097FE8",d:"M12.902 11.044c.463-.802.694-1.203.997-1.338a1.02 1.02 0 01.828 0c.302.135.534.536.996 1.338l2.028 3.512c.463.802.695 1.203.66 1.532-.03.287-.18.548-.414.718-.267.194-.73.194-1.656.194h-4.057c-.925 0-1.388 0-1.656-.194a1.019 1.019 0 01-.414-.718c-.035-.329.197-.73.66-1.532l2.028-3.512z"}),(0,n.jsx)("path",{fill:"#F64932",fillRule:"evenodd",d:"M7.287 4.63c0-.571 0-.856.111-1.074.098-.192.254-.347.445-.445C8.061 3 8.346 3 8.916 3h4.379c.57 0 .855 0 1.073.111.191.098.347.253.445.445.11.218.11.503.11 1.073v3.852a2.24 2.24 0 00-1.521.109c-.46.204-.75.56-.94.83a13.31 13.31 0 00-.594.97l-.024.043-.118.203h-2.81c-.57 0-.855 0-1.073-.11a1.018 1.018 0 01-.445-.445c-.11-.218-.11-.503-.11-1.074V4.63z",clipRule:"evenodd"})]})})},821227:(e,t,o)=>{o.d(t,{C:()=>i});var n=()=>o(836273),r=()=>o(497065);function i(e){const{environment:t}=e;r().c4({environment:t,url:n()._j.marketplace,redirect:!1})}},4909:(e,t,o)=>{o.d(t,{y:()=>d});var n=o(667294),r=()=>o(219727),i=()=>o(836273),a=()=>o(497065),l=()=>o(594546),s=()=>o(821227);function d(e,t){const o=(0,r().O7)();return(0,n.useCallback)((n=>{(0,l().j)({environment:o,event:{eventName:e,eventProperties:{}}});const r="click"===n.type&&(n.metaKey||n.ctrlKey);(null==t?void 0:t.forceOpenInNewTab)||r?a().c4({environment:o,url:i()._j.marketplace,openInNew:"tab",makeTabActive:!r&&o.device.isDesktop}):(0,s().C)({environment:o})}),[o,e,t])}},913011:(e,t,o)=>{o.d(t,{H:()=>p});o(821057);var n=()=>o(792197),r=()=>o(308240),i=()=>o(215134),a=()=>o(6623),l=()=>o(639708),s=()=>o(269299),d=()=>o(590434),c=()=>o(655260),u=()=>o(772669);function p(e){let{environment:t,transaction:o,layoutStore:p,position:m,sessionId:g,beforePerformDeleteModule:f}=e;const h=p.getModules();if(!h)throw new Error("[deleteModuleAtPosition] modules by area not found for layout store");const y=(0,i().h7)(h,(e=>e.id===m.moduleId));if(!y)throw new Error("[deleteModuleAtPosition] module to delete not found");const{module:x,position:v}=y;if(!(0,a().Fo)(x))throw new Error("[deleteModuleAtPosition] module to delete is not removeable");var b;(s().createAndCommitOrAppend({environment:t,transaction:o,canUndo:!0,perform(e){!function(e){const{transaction:t,layoutStore:o,moduleLocation:i,moduleToDelete:a,beforePerformDeleteModule:c}=e;c&&c(t);if((0,l().Fc)(a)){const e=(0,d().m)(o,a);e&&(0,u().deleteViewsModuleDependencies)({layoutStore:o,module:e,transaction:t})}if("form_conditional_modules"===i.area){const e=n().CI.removeChildModule({pointer:o.pointer,modulesByArea:o.getModules(),module:a});for(const n of e)s().applyOperation({transaction:t,store:o,operation:n})}else{const e="views_main_tab_modules"===i.area?{area:i.area,viewId:i.viewId}:{area:r().mt[i.area]};s().applyOperation({transaction:t,store:o,operation:n().CI.deleteModuleInArea({...e,pointer:o.pointer,moduleId:a.id})})}}({environment:t,transaction:e,layoutStore:p,moduleLocation:v,moduleToDelete:x,beforePerformDeleteModule:f})},userAction:"pageLayout.deleteActions.deleteModuleAtPosition"}),g)&&c().DZ({environment:t,module:x,sessionId:g,collectionId:null===(b=p.getCollectionModel())||void 0===b?void 0:b.id,layoutId:p.id,context:(0,r().AR)(m.area),area:m.area})}},142730:(e,t,o)=>{o.d(t,{IR:()=>I,L0:()=>P,MF:()=>M,gm:()=>R,iQ:()=>B,m2:()=>_});o(821057),o(492176),o(7961),o(267602),o(653476);var n=()=>o(956057),r=()=>o(530980),i=()=>o(308240),a=()=>o(215134),l=()=>o(667932),s=()=>o(137785),d=()=>o(639708),c=()=>o(483791),u=()=>o(593515),p=()=>o(82937),m=()=>o(497065),g=()=>o(269299),f=()=>o(887430),h=()=>o(487270),y=()=>o(793935),x=()=>o(876822),v=()=>o(482162),b=()=>o(826955),w=()=>o(26796),S=()=>o(913011),C=()=>o(655260),k=()=>o(356117);function _(e){let{environment:t,transaction:o,collectionStore:n,userId:i,modules:a}=e;const s=(0,h().Ii)({environment:t,spaceId:n.getSpaceId(),table:c().Bh}),d=b().t1.createChildStore(n,s),{model:u,operations:[p]}=r().rp4.create({pointer:s,parent:n.pointer,createdByUserId:i,modules:a??(0,l()._P)()});g().applyOperation({transaction:o,store:d,operation:p});const m=r().kj1.setLayout(n.pointer,s);return g().applyOperation({transaction:o,store:n,operation:m}),{model:u,store:d}}function j(e){let t;return e?t=e:v().default.state.open&&v().default.state.targetStore?t=v().default.state.targetStore:x().default.state.mainEditorCurrentBlockStore&&(t=x().default.state.mainEditorCurrentBlockStore),t}function T(e){y().setUpdateExpand({environment:e,isExpanded:!1,from:"keyboard_default",saveDetailsSidebarPreference:!1}),p().xv({environment:e,from:"open_page_layout_editor",preventAnimation:!0})}function I(e){var t,o;let{environment:r,blockStore:i,collectionStore:a,collectionViewStore:l,from:s}=e;const d=function(e){var t;let o=j(e);if(null!==(t=o)&&void 0!==t&&t.isCollectionView()){const e=(0,f().fm)(o);o=e?e.resultsInViewOrder(1).at(0):void 0}return o}(i),c=window.location.href;T(r);const u=n().Il();w().Z.setState({isOpen:!0,mode:"layout-editor",collectionStore:a,pageStore:d,siteRootBlockStore:void 0,sessionId:u,initialSelectedModuleId:null==d||null===(t=d.getAssociatedCollectionStore())||void 0===t||null===(t=t.getLayoutStore())||void 0===t||null===(t=t.getModel())||void 0===t||null===(t=t.firstRawModuleOfType("titleWithIcon"))||void 0===t?void 0:t.id,urlOnOpen:c}),(0,C().Rt)({environment:r,from:s,context:"layout",sessionId:u,collectionId:null==a?void 0:a.id,existingLayoutId:null==a||null===(o=a.getLayoutStore())||void 0===o?void 0:o.id,collectionViewId:null==l?void 0:l.id})}function M(e){let{environment:t,store:o,siteRootBlockStore:r,from:i}=e;const a=j(o);T(t);const l=n().Il();w().Z.setState({isOpen:!0,mode:"site-settings-editor",collectionStore:void 0,pageStore:a,siteRootBlockStore:r,sessionId:l}),(0,C().Rt)({environment:t,context:"site",from:i,sessionId:l,collectionId:void 0,existingLayoutId:void 0})}function P(e){w().Z.getState().isOpen&&R(e)}function R(e){let{environment:t}=e;const o=w().Z.getState();if(!o.isOpen)throw new Error("Cannot close page layout editor. Page layout editor is not open.");"layout-editor"===o.mode&&o.urlOnOpen&&window.location.href!==o.urlOnOpen&&m().op(t),w().Z.setState({isOpen:!1})}function B(e){var t;let{environment:o,transaction:n,property:r,layoutStore:l}=e;const c=w().Z.getSessionId(),p=null===(t=l.getModel())||void 0===t?void 0:t.getRawModules(),m=l.getCollectionModel();if(!p||!m)return;const g=b().NW.createChildStore(l,m.pointer),f=(0,a()._i)(p,(e=>"titleWithIcon"===e.type));if(f&&(0,d().p9)(f.module)){var h;const{module:e,position:t}=f,a={...e,type:"titleWithIcon",propertyIds:null===(h=e.propertyIds)||void 0===h?void 0:h.filter((e=>e!==r))};(0,k().Uq)({environment:o,sessionId:c,transaction:n,layoutStore:l,position:{area:(0,i().Gc)(t.area),moduleId:e.id},updatedModule:(0,s().V)(a)})}const y=(0,a().MI)(p,(e=>"property"===e.type&&e.propertyId===r));for(const{module:a,position:s}of y){const e=a.id,t=(0,i().Gc)(s.area);(0,S().H)({environment:o,sessionId:c,transaction:n,layoutStore:l,position:{area:t,moduleId:e}})}const x=m.getFormat().collection_page_sections;if(x){const e=x.filter((e=>e.section!==r));u().Do({store:g,pageSectionFormats:e,transaction:n,environment:o})}}},356117:(e,t,o)=>{o.d(t,{Uq:()=>m,Wb:()=>f});o(821057),o(267602),o(470928),o(30005);var n=()=>o(109477),r=()=>o(530980),i=()=>o(308240),a=()=>o(712185),l=()=>o(215134),s=()=>o(667932),d=()=>o(639708),c=()=>o(827370),u=()=>o(421654),p=()=>o(269299);function m(e){let{environment:t,transaction:o,layoutStore:n,position:s,updatedModule:d,sessionId:c}=e;const u=i().mt[s.area],m=n.getRawModules();if("form_conditional_modules"===u){const e=null==m?void 0:m[u];if(!(null==e?void 0:e[s.moduleId]))throw new Error("Unable to find module being updated.");return void p().createAndCommitOrAppend({environment:t,transaction:o,canUndo:!0,perform(e){p().applyOperation({transaction:e,store:n,operation:r().CIp.updateNestedModule(n.pointer,u,(0,a().cm)(d))})},userAction:"BuilderLayoutModules.updateModule"})}if(!m)throw new Error("Unable to find modules");const g=(0,l().mT)(m,(e=>e.id===s.moduleId));if(!g||g.area!==u)throw new Error("Unable to find module being updated.");p().createAndCommitOrAppend({environment:t,transaction:o,canUndo:!0,perform(e){p().applyOperation({transaction:e,store:n,operation:r().CIp.updateModuleInArea({pointer:n.pointer,module:(0,a().cm)(d),..."views_main_tab_modules"===g.area?{area:g.area,viewId:g.viewId}:{area:g.area}})})},userAction:"BuilderLayoutModules.updateModule"})}function g(e){var t,o,n;let{collectionStore:r,layoutStore:i}=e;const a=new Map,l=r.getFormat(),s=[...null===(t=i.getModules())||void 0===t?void 0:t.page_main,...null===(o=i.getModules())||void 0===o?void 0:o.page_details],c=new Map;null===(n=l.property_visibility)||void 0===n||n.forEach((e=>{c.set(e.property,e)})),s.forEach((e=>{if(!(0,d().LP)(e))return(0,d().f)(e)?(a.set(e.propertyId,{property:e.propertyId}),void c.set(e.propertyId,{property:e.propertyId,visibility:"show"})):void 0;e.propertyIds.forEach((e=>{a.set(e,{property:e}),c.set(e,{property:e,visibility:"show"})}))}));const u=r.getNormalizedPropertyGroups();var p;u?u.forEach((e=>{var t;null===(t=e.propertyIds)||void 0===t||t.forEach((e=>{a.has(e)||a.set(e,{property:e})}))})):null===(p=l.collection_page_properties)||void 0===p||p.forEach((e=>{a.has(e.property)||a.set(e.property,e)}));return{propertiesFormat:Array.from(a.values()),propertyVisibility:Array.from(c.values())}}function f(e){let{environment:t,transaction:o,collectionStore:i,layoutStore:a}=e;const{propertiesFormat:l,propertyVisibility:m}=g({collectionStore:i,layoutStore:a});p().createAndCommitOrAppend({environment:t,transaction:o,canUndo:!0,perform(e){const t=a.getBlockChildrenPointers(),o=a.firstModuleOfType("viewsMain");o&&(0,d().aJ)(o)&&t.find((e=>c().dr.isEqual(e,o.collection_view_block_pointer)))&&p().applyOperation({transaction:e,store:a,operation:r().CIp.removeBlockChild(a.pointer,o.collection_view_block_pointer.id)}),p().applyOperation({transaction:e,store:a,operation:r().CIp.setModulesByAreas(a.pointer,(0,s()._P)())}),p().applyOperation({transaction:e,store:a,operation:r().CIp.deleteFormat(a.pointer)});const g=i.getFormat(),{page_section_visibility:f}=g;u().FH({stores:[i],update:{property_groups:void 0,collection_page_properties:l,property_visibility:m,...f?{page_section_visibility:n().dN}:void 0},transaction:e})},userAction:"BuilderLayoutModules.resetLayoutToDefault"})}},772669:(e,t,o)=>{o.r(t),o.d(t,{deleteViewsModuleDependencies:()=>i});var n=()=>o(349220),r=()=>o(332542);function i(e){const{layoutStore:t,module:o,transaction:i}=e,a=(0,n().TO)(o.getCollectionViewBlockStore());r().hr({childStore:a,parentStore:t,transaction:i})}},309797:(e,t,o)=>{o.d(t,{D9:()=>E,GB:()=>F,L2:()=>L,Nr:()=>R,Qg:()=>V,WJ:()=>N,h9:()=>P,m4:()=>M,mj:()=>B,n1:()=>O,sD:()=>A});var n=()=>o(219727),r=()=>o(657320),i=()=>o(142735),a=()=>o(156642),l=()=>o(109477),s=()=>o(752778),d=()=>o(844085),c=()=>o(707461),u=()=>o(887430),p=()=>o(954452),m=()=>o(201741),g=()=>o(982855),f=()=>o(949842),h=()=>o(148976),y=()=>o(191586),x=()=>o(942226),v=()=>o(466970),b=()=>o(170210),w=()=>o(876822),S=()=>o(845622),C=()=>o(749826),k=()=>o(543842),_=()=>o(346392),j=()=>o(311562),T=()=>o(482162),I=()=>o(365609);function M(e){(0,f().ZP)({event:e,context:f().Af.EditorMouseDown,callback:()=>{}})}function P(e){(0,f().ZP)({event:e,context:f().Af.EditorClick,callback:()=>{}})}function R(e){return(0,i().VK)((()=>Boolean(I().Z.state.pageMap[e.id])||_().Z.state.pages.has(e.id)),[e.id])}function B(e,t){const o=(0,n().O7)(),a=(0,r().l)(),l=R(e),s=(0,i().VK)((()=>{var o,n;return t===j().S.Frame?Boolean(null===(o=w().default.state.currentLoadingContainerStore)||void 0===o?void 0:o.state.ready):t===j().S.PeekView&&T().default.state.open?Boolean(null===(n=T().default.state.loadingContainerStore)||void 0===n?void 0:n.state.ready):t===j().S.CollectionPageView?e.isReady():void 0}),[t,e]),d=V(e);return(0,i().VK)((()=>{if(!s)return!1;const t=o.currentUser.isLoggedIn(),n=a&&a.publicEditModeStore.state;return Boolean(e&&e.isDefined()&&!e.isNonEditableState()&&e.canEdit()&&!e.hasContent()&&t&&(!(null!=n&&n.hasPublicPermission)||"edit"===(null==n?void 0:n.permission))&&!l&&!d&&(!(0,g().GD)(n)||"completionPopup"!==S().default.state.type))}),[o.currentUser,d,s,a,l,e])}function A(e,t){const o=(0,n().O7)(),a=(0,r().l)(),{isTablet:l}=(0,n().Fy)(),s=(0,v().E)("tablet_refresh_template_pills_gate");return(0,i().VK)((()=>{if(t===j().S.SitePreview)return!1;if(o.device.isMobile&&(!l||!s))return!1;if(!o.currentUser.isLoggedIn())return!1;const n=a&&a.publicEditModeStore.state;if(null!=n&&n.hasPublicPermission&&"edit"!==(null==n?void 0:n.permission))return!1;if(e.getContentLength()>1)return!1;if(!e.canEdit()||e.isNonEditableState())return!1;const r=e.getContentStores()[0];if(r&&!r.isEmptyTextBlock())return!1;if(e.getAssociatedCollectionStore())return!1;const i=m().TI.state,d=m().mn.state;if(i&&e.id===d)return!1;return!((0,y().OZ)(t)?c().Pm.state:c().wC.state)}),[o,a,e,t,l,s])}function V(e){return(0,i().VK)((()=>{if(e.isCollectionView()){const t=e.getCollectionViewSourceCollectionStore();return!!t&&t.isSyncedCollection()}return e.isType(a().Ti.externalObjectInstancePage)}),[e])}function L(e){return(0,i().VK)((()=>{if(!(0,h().K6)())return!1;const t=e.getParentStore();if((null==t?void 0:t.table)===s().vF){return!!t.getFormatStore().getKeyStore("external_collection_type").getValue()}return!1}),[e])}function E(e){return(0,i().VK)((()=>{if(!(0,h().K6)())return!1;var t;return!!e.isCollectionView()&&((null===(t=e.getCollectionStore())||void 0===t?void 0:t.getFormatStore().getKeyStore("external_collection_type").getValue())??!1)}),[e])}function F(e){return(0,i().VK)((()=>{if(!C().default.checkGate({gateName:"csvimport_faster_navigate_to_page_enabled"}))return!1;var t;return!!e.isCollectionView()&&(null===(t=e.getCollectionStore())||void 0===t?void 0:t.getFormatStore().getKeyStore("static_import_collection_type").getValue())===l().gH.CsvImport}),[e])}function O(e){const t=(0,n().O7)(),{device:o,WindowSizeStore:r}=t,a=(0,i().VK)((()=>{const e=r.state.height,n=o.isMobile&&k().Z.state.open?e:0;return d()._4(t)+n}),[t,r,o.isMobile]);return(0,i().VK)((()=>"home-phone"===e?b().jq:o.isTablet?380:o.isIOS?Math.max(350,a):o.isMobile?400:"side-peek"===e||"center-peek"===e?x().KA:"home"===e?b().XX:"30vh"),[o,a,e])}function N(e){const t=(0,n().O7)(),o=(0,i().VK)((()=>(0,p().fg)(t,e)),[t,e]);return(0,i().VK)((()=>o&&!e.isFullWidth()?(0,p().gC)(t,(0,x().wq)(e),(0,u().Ks)(e)):0),[t,o,e])}},590434:(e,t,o)=>{o.d(t,{m:()=>i});var n=()=>o(826955);class r{constructor(e,t){this.parentStore=e,this.impl=t}getType(){return this.impl.type}getCollectionViewBlockStoreWithParent(e){return n().G.createChildStore(e,this.impl.collection_view_block_pointer)}getCollectionViewBlockStore(){return this.getCollectionViewBlockStoreWithParent(this.parentStore)}getInitialCollectionViewPointer(){const e=this.getCollectionViewBlockStoreWithParent(this.parentStore).getCollectionViewPointers();if(e.length>0)return e[0]}getId(){return this.impl.id}isUnlistedView(){return!1}createCollectionViewContext(){const e=this.getCollectionViewBlockStoreWithParent(this.parentStore),t=this.getInitialCollectionViewPointer();if(!t)return;const o=n().Xr.createChildStore(e,t);return{type:"collectionView",collectionViewBlockStore:e,collectionStore:o.getCollectionStore(),collectionViewStore:o,pageVisitSourceOverride:void 0}}}function i(e,t){if("views"===t.type||"viewsMain"===t.type)return new r(e,t)}},170210:(e,t,o)=>{o.d(t,{$1:()=>S,$K:()=>b,A0:()=>h,A5:()=>f,Ae:()=>I,Cm:()=>u,D9:()=>g,EP:()=>s,Er:()=>C,KI:()=>_,Ng:()=>m,QF:()=>p,Uf:()=>c,XX:()=>i,bS:()=>v,cc:()=>j,d_:()=>d,iO:()=>l,jO:()=>w,jq:()=>a,pW:()=>y});var n=()=>o(513670),r=()=>o(696459);const i=160,a=40,l=24,s=20,d=600,c=270,u=405,p=480,m=500,g=void 0,f=16,h=10,y=8,x=(o(706363).Ct,{backdropFilter:"blur(48px)",WebkitBackdropFilter:"blur(48px)"}),v=4;function b(e){return{icon:e.mediumIconColor,text:e.mediumTextColor}}function w(e){return{width:48,height:48,fill:e.lightIconColor}}function S(e){let{theme:t,isPhone:o}=e;return o?t.personalHomeBackgroundPhone:t.surface.page}function C(e){let{theme:t,isPhone:o,buttonState:n}=e,r=t.whiteButtonBackground;switch(n){case"hovered":r=t.whiteButtonHoveredBackground;break;case"pressed":r=t.whiteButtonPressedBackground}return o&&(r=void 0),{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",background:r,...x,boxShadow:T({isPhone:o,theme:t,borderOnly:!0}),width:28,height:28,borderRadius:4}}const k=1;function _(e){let{isPhone:t,theme:o}=e;return{zIndex:1,position:"relative",display:"flex",flexDirection:"column",borderRadius:12,background:o.home.tile.background,boxShadow:T({isPhone:t,theme:o}),...x}}function j(e){let{mode:t,isPhone:o}=e;switch(t){case"dark":return 0;case"light":return k;default:return(0,r().P)(t),0}}function T(e){let{isPhone:t,theme:o,borderOnly:r}=e;if("dark"===o.mode)return"unset";o.mode;const i=j({mode:o.mode,isPhone:t});return(0,n().oA)([r||t?void 0:"0 12px 32px rgba(0, 0, 0, 0.02)",`0 0 0 ${i}px rgba(0, 0, 0, 0.05)`]).join(", ")}function I(e){const{isPhone:t,theme:o,borderOnly:n}=e;return{unhoveredBoxShadow:T({isPhone:t,theme:o,borderOnly:n}),hoveredBoxShadow:"light"===o.mode?["0 12px 32px rgba(0, 0, 0, 0.03)","0 0 0 1px rgba(0, 0, 0, 0.085)"].join(", "):o.homeShadow.card.hovered}}},770975:(e,t,o)=>{o.d(t,{m:()=>i});var n=()=>o(142735),r=()=>o(749826);function i(e){const{featureGateId:t,whenEnabled:o,whenDisabled:i,disableExposureLogging:a}=e,l=function(e){const{featureGateId:t,disableExposureLogging:o}=e;return(0,n().VK)((()=>r().default.checkGate({gateName:t,disableExposureLogging:o})),[t,o])}({featureGateId:t,disableExposureLogging:a});return l?o:i}},469203:(e,t,o)=>{o.d(t,{s:()=>c});var n=o(667294),r=()=>o(219727),i=()=>o(846550),a=()=>o(707513),l=()=>o(654133);var s=()=>o(998901),d=o(785893);function c(e){let{children:t,style:o,tooltipStyle:c,placement:u=s().Placement.Bottom}=e;const{isSafari:p}=(0,r().Fy)(),m=(0,n.useRef)(null),g=function(e){const[t,o]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{const{current:t}=e;if(!t)return void o(!1);const n="ResizeObserver"in window?new ResizeObserver((e=>{let[t]=e;o(t.target.scrollWidth>t.target.clientWidth)})):void 0;return null==n||n.observe(t),()=>null==n?void 0:n.unobserve(t)}),[]),t}(m),f=(0,i().yK)((()=>({overflowText:{...a().Yu,...o}})),[o]);return(0,d.jsx)(l().Z,{delayThreshold:500,placement:u,textWrap:!0,style:c,forceVisibleState:!(p||!g)&&void 0,renderTooltip:()=>g?t:void 0,render:e=>(0,d.jsx)("div",{ref:m,style:f.overflowText,...e,children:t})})}},97162:(e,t,o)=>{o.d(t,{l:()=>u});o(267602),o(653476),o(241792);var n=()=>o(142735),r=()=>o(353329),i=()=>o(513670),a=()=>o(487333),l=()=>o(745213),s=()=>o(281236),d=()=>o(345918),c=()=>o(11422);function u(e){let{parentStore:t,returnAllTemplates:o}=e;const u=(0,n().VK)((()=>{const e=a().Z.getState();return((null==e?void 0:e.templatesWithRowIds)??[]).map((e=>e.template)).filter((e=>(0,r().U2)(e,"collection")))}),[],{useDeepEqual:!0}),p=(0,n().VK)((()=>{c().Z.getState();const e=(0,d().kO)().function;return e&&(0,r().CM)(e)?e:void 0}),[]),m=(0,n().VK)((()=>(0,s().getSuggestedCollectionTemplates)({persona:p,parentStore:t})),[p,t],{useDeepEqual:!0});return(0,n().VK)((()=>(0,i().mN)([...u,...m,...o?(0,l().uO)():[]],(e=>e.templateId))),[u,m,o])}},11422:(e,t,o)=>{o.d(t,{Z:()=>r});class n extends(()=>o(263184))().default{getInitialState(){}}const r=new n},487333:(e,t,o)=>{o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return null}}const r=new n;o(947115).exposeDebugValue("WorkflowTemplatesBuilderStore",r);const i=r},437395:(e,t,o)=>{o.r(t),o.d(t,{WorkflowTemplatesOnboardingModal:()=>Tn});var n=o(667294),r=()=>o(219727),i=()=>o(142735),a=()=>o(696459),l=()=>o(212493),s=()=>o(921981),d=()=>o(594546),c=()=>o(533808),u=()=>o(184441),p=(o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(241792),()=>o(511544)),m=()=>o(307312),g=()=>o(846550),f=()=>o(353329),h=()=>o(955620),y=()=>o(788860),x=()=>o(522283),v=()=>o(668001),b=()=>o(73333),w=()=>o(228772),S=()=>o(990966),C=()=>o(1910),k=()=>o(94967),_=()=>o(345837),j=()=>o(247724),T=()=>o(57687),I=()=>o(317050),M=()=>o(936419),P=()=>o(156538),R=()=>o(824462),B=()=>o(766072),A=()=>o(102182),V=()=>o(291198),L=()=>o(830581),E=()=>o(545821),F=o(785893);const O=(0,y().vU)({sendFeedbackButton:{id:"setupGenerator.sendFeedbackButton",defaultMessage:"Send feedback"},feedbackPlaceholder:{id:"setupGenerator.feedbackPlaceholder",defaultMessage:"Share your feedback"},submitSuccess:{id:"setupGenerator.submitSuccess",defaultMessage:"Your feedback has been submitted, thanks!"}});function N(e){const{onSubmit:t}=e,o=(0,y().YB)(),[r,i]=(0,n.useState)(""),a=(0,n.useCallback)((()=>{t(r),A().oV({label:o.formatMessage(O.submitSuccess)})}),[r,o,t]);return(0,F.jsx)(L().sR,{header:(0,F.jsx)(L().vI,{iconAndTitle:(0,F.jsx)("div",{style:{padding:"0 24px"},children:(0,F.jsx)(L().kC,{iconGroup:B().X,title:(0,F.jsx)(y()._H,{id:"setupGenerator.feedbackModal.title",defaultMessage:"How can we improve this result?"})})}),description:(0,F.jsx)(y()._H,{id:"setupGenerator.feedbacModal.description",defaultMessage:"Your feedback helps Notion AI improve. We'll share this prompt and the result with the Notion team."})}),footer:(0,F.jsx)(L().a6,{layout:"vertical",primaryButtons:[{label:o.formatMessage(O.sendFeedbackButton),onClick:a,isDisabled:0===r.length}]}),children:(0,F.jsx)(l().jX,{padding:2,children:(0,F.jsx)(V().Z,{placeholder:o.formatMessage(O.feedbackPlaceholder),textarea:!0,focusInitial:!0,value:r,onChange:e=>i(e.target.value)})})})}function W(e){const{traceId:t,spaceId:o,transcript:i}=e??{},[a,l]=(0,n.useState)(void 0),d=(0,r().O7)();return[a,(0,n.useCallback)((async e=>{if(l(e),R().callApi({eventName:"saveInferenceTranscriptFeedback",environment:d,data:{space_id:o,trace_id:t,transcript:i,feedback_type:e,user_comment:void 0}}),"thumbs_down"===e){const e=await async function(){return await(0,E().showAsyncModal)((e=>(0,F.jsx)(s().c,{isOpen:e.isOpen,onDismiss:e.onDismiss,onClosed:e.onClosed,areaConstraint:{width:{type:"fixed",length:400}},render:()=>(0,F.jsx)(N,{onSubmit:e.resolve})})))}();e&&R().callApi({eventName:"saveInferenceTranscriptFeedback",environment:d,data:{space_id:o,trace_id:t,transcript:i,feedback_type:"thumbs_down",user_comment:e}})}}),[d,o,t,i])]}var K=()=>o(473759),Z=()=>o(827282);const D=(0,Z().CZ)("handThumbsDown",{default:{loader:()=>o.e(7585).then(o.bind(o,707585))},small:{loader:()=>o.e(31369).then(o.bind(o,731369))},mini:{loader:()=>o.e(63387).then(o.bind(o,63387))},large:{loader:()=>o.e(39081).then(o.bind(o,339081))}}),z=(0,Z().CZ)("handThumbsDownFill",{default:{loader:()=>o.e(21301).then(o.bind(o,21301))},small:{loader:()=>o.e(95919).then(o.bind(o,295919))},mini:{loader:()=>o.e(78131).then(o.bind(o,478131))},large:{loader:()=>o.e(20800).then(o.bind(o,420800))}}),U=(0,Z().CZ)("handThumbsUp",{default:{loader:()=>o.e(20609).then(o.bind(o,197434))},small:{loader:()=>o.e(15409).then(o.bind(o,515409))},mini:{loader:()=>o.e(5067).then(o.bind(o,405067))},large:{loader:()=>o.e(80592).then(o.bind(o,880592))}}),H=(0,Z().CZ)("handThumbsUpFill",{default:{loader:()=>o.e(30277).then(o.bind(o,430277))},small:{loader:()=>o.e(30479).then(o.bind(o,630479))},mini:{loader:()=>o.e(30752).then(o.bind(o,830752))},large:{loader:()=>o.e(66195).then(o.bind(o,766195))}});var $=()=>o(603692),G=()=>o(654133),q=()=>o(998901);const X=(0,y().vU)({negativeFeedbackTooltip:{defaultMessage:"Share negative feedback with Notion",id:"setupGenerator.negativeFeedbackTooltip"},positiveFeedbackTooltip:{defaultMessage:"Share positive feedback with Notion",id:"setupGenerator.positiveFeedbackTooltip"},retry:{defaultMessage:"Try again",id:"setupGenerator.retry"}});function Y(e){const{value:t,onChange:o,onClickRetry:n,variantName:r}=e,i=(0,y().YB)();return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Q,{type:"thumbs_up",isSelected:"thumbs_up"===t,variantName:r,iconGroup:"thumbs_up"===t?H:U,onClick:o}),(0,F.jsx)(Q,{type:"thumbs_down",isSelected:"thumbs_down"===t,variantName:r,iconGroup:"thumbs_down"===t?z:D,onClick:o}),(0,F.jsx)(G().Z,{renderTooltip:()=>(0,F.jsx)("div",{children:(0,F.jsx)(y()._H,{...X.retry})}),placement:q().Placement.Bottom,render:e=>(0,F.jsx)(C().Z,{onClick:n,icon:()=>(0,F.jsx)($().y,{iconGroup:K().v,variantName:r,colorName:"secondary"}),ariaLabel:i.formatMessage(X.retry),...e})})]})}function Q(e){const{type:t,onClick:o,isSelected:r,iconGroup:i,variantName:l}=e,s=(0,y().YB)(),d=(0,n.useCallback)((()=>{o(r?void 0:t)}),[o,r,t]),c=(0,n.useMemo)((()=>s.formatMessage(function(e){switch(e){case"thumbs_up":return X.positiveFeedbackTooltip;case"thumbs_down":return X.negativeFeedbackTooltip;default:(0,a().t1)(e)}}(t))),[s,t]);return(0,F.jsx)(G().Z,{renderTooltip:()=>(0,F.jsx)("div",{children:c}),placement:q().Placement.Bottom,render:e=>(0,F.jsx)(C().Z,{onClick:d,icon:()=>(0,F.jsx)($().y,{iconGroup:i,variantName:l,colorName:r?"uiBluePrimary":"secondary"}),ariaLabel:c,...e})})}const J={page:!0,bot:!0,team:!0,reminder:!0,date:!0,user:!0,group:!0,heading:!0,templateVariable:!0,formulaContextVariable:!0},ee={type:"none"};function te(e){const{onSubmit:t,value:o,onChange:i,canPressEnter:a,feedbackArgs:l,onClickRetry:s,onFocus:d,onBlur:c,onClickStop:u,isBusy:p}=e,m=(0,r().O7)(),f=(0,y().YB)(),x=function(){const e=20,t=24;return(0,g().yK)((o=>{const n={boxShadow:o.inputBoxShadow,backgroundColor:o.surface.elevated,borderRadius:16,padding:"8px 8px 8px 12px",gap:"4px 8px",display:"flex",flexShrink:0,overflow:"hidden",height:"100%"};return{oneLineInput:{...n,flexDirection:"row",alignItems:"center",borderRadius:50},multiLineInput:{...n,display:"grid",gridTemplate:"1fr auto"},textWrapper:{paddingRight:4,flexGrow:1,display:"flex",fontSize:14,minWidth:0,overflow:"auto"},textContainer:{maxWidth:"100%",width:"100%",flexGrow:1,minWidth:0,height:"100%"},buttonWrapper:{minHeight:22,minWidth:60,display:"flex",justifyContent:"flex-end",alignItems:"center",flexShrink:0,marginLeft:"auto"},icon:{height:e,width:e},stopIcon:{height:e,width:e,fill:o.icon.primary},button:{pointerEvents:"auto",height:Math.max(e,t),width:Math.max(e,t),borderRadius:"100%"}}}),[])}(),{store:v,setValue:b}=(0,T().Cl)({initialValue:o,onChange:i});(0,n.useEffect)((()=>{const e=v.getValue();o!==e&&b(o)}),[o,b,v]);const w=(0,h().QaF)(o).length,R=!(0,h().PgY)(o),[B,A]=W(l),V=(0,n.useCallback)((()=>{S().clear({environment:m}),null==c||c()}),[m,c]),L=(0,n.useMemo)((()=>f.formatMessage({id:"setupGenerator.followUp.placeholder",defaultMessage:"Add or make changes..."})),[f]),E=(0,n.useCallback)((e=>{if(e.target===e.currentTarget){const t=P().E.findEditableWithStore(v);t&&t.handleClick(e)}}),[v]),O=w>20;return(0,F.jsx)(k().Z,{debugName:"AiFollowUpInput",capture:!0,children:(0,F.jsxs)("div",{className:j().Wh_,style:O?x.multiLineInput:x.oneLineInput,onClick:E,children:[(0,F.jsx)("div",{style:x.textWrapper,children:(0,F.jsx)(_().Z,{inPageFind:ee,style:x.textContainer,store:v,disabled:p,disabledMentionTypes:J,placeholder:L,disableSlashCommands:!0,disableEmbedMenu:!0,disableEmojiCommands:!0,disableComment:!0,disableSelectAllBlocks:!0,disableSelectionDrag:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableSuggestEdit:!0,disableUpDownArrows:!0,disableEnter:!R||!a||p,onEnter:t,pasteBehavior:"inline",onFocus:d,onBlur:V})}),(0,F.jsxs)("div",{style:x.buttonWrapper,children:[R||p?null:(0,F.jsx)(Y,{value:B,onChange:A,onClickRetry:s,variantName:"small"}),R&&!p?(0,F.jsx)(C().Z,{icon:I()._,onClick:t,isBlue:R,disabled:!R,ariaLabel:"submit-ai-prompt",style:x.button,iconStyle:x.icon}):null,p?(0,F.jsx)(C().Z,{icon:M().q,onClick:u,iconStyle:x.stopIcon,ariaLabel:"stop-ai-message",style:x.button}):null]})]})})}var oe=()=>o(661641);function ne(e){let{text:t,styleName:o,animate:n}=e;const r=(0,g().yK)((e=>{const t=e.text.quaternary,o=e.text.primary,n={backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundColor:o,backgroundSize:"300% 100%",backgroundRepeat:"no-repeat",userSelect:"none",backgroundImage:`linear-gradient(90deg, ${o} 0%, var(--shimmer-text-faded-color) 50%, ${o} 100%)`,transition:"--shimmer-text-faded-color 0.25s ease-in-out"};return{animated:{...n,"--shimmer-text-faded-color":t},static:{...n,"--shimmer-text-faded-color":o}}}),[]);return(0,F.jsx)(oe().q,{styleName:o,children:(0,F.jsx)(m().E.div,{style:n?r.animated:r.static,animate:{backgroundPosition:["150% 0","-50% 0"]},transition:{ease:"linear",duration:3,repeat:1/0},children:t})})}const re=(0,y().vU)({default:{id:"setupGenerator.loading.default",defaultMessage:"Designing database"},addingProperty:{id:"setupGenerator.loading.addingProperty",defaultMessage:"Adding {propertyName}"},addingView:{id:"setupGenerator.loading.addingView",defaultMessage:"Adding {viewName}"},addingPages:{id:"setupGenerator.loading.addingPages",defaultMessage:"Adding pages"}});function ie(e){const{statusLabel:t}=e,o=(0,y().YB)();let n;switch(null==t?void 0:t.type){case"default":n=o.formatMessage(re.default);break;case"addingProperty":n=o.formatMessage(re.addingProperty,{propertyName:t.propertyName});break;case"addingView":n=o.formatMessage(re.addingView,{viewName:t.viewName});break;case"addingPages":n=o.formatMessage(re.addingPages);break;default:return null}return(0,F.jsx)(ne,{styleName:"UITitle-22px/Semibold",text:n,animate:!0})}function ae(e){const{feedbackArgs:t,onClickRetry:o}=e,n=(0,g().yK)((e=>({container:{border:`1px solid ${e.stroke.primary}`,borderRadius:12},badge:{color:e.text.uiBluePrimary,background:"rgba(240, 246, 253, 1)",whiteSpace:"nowrap",width:"fit-content"}})),[]),[r,i]=W(t);return(0,F.jsxs)(l().jX,{align:"center-left",width:"fill",direction:"row",padding:10,borderRadius:6,style:n.container,children:[(0,F.jsx)(l().jX,{width:"fill",direction:"row",gap:5,children:(0,F.jsx)(oe().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:(0,F.jsx)(y()._H,{id:"setupGenerator.feedbackBar.useful",defaultMessage:"Was this useful?"})})}),(0,F.jsx)(l().jX,{width:"hug",direction:"row",children:(0,F.jsx)(Y,{value:r,onChange:i,onClickRetry:o,variantName:"small"})})]})}var le=()=>o(770975),se=()=>o(469203);const de=(0,y().vU)({featureTemplateRequired:{id:"featureTemplateRequired",defaultMessage:"This is required"}});function ce(e){let{template:t,isRequired:n,...r}=e;const i=n?o(527278).Z.formatMessage(de.featureTemplateRequired):void 0;return(0,F.jsx)(G().Z,{...r,disableTooltip:void 0===i,renderTooltip:()=>i})}var ue=()=>o(499819),pe=()=>o(281236),me=()=>o(833186),ge=o.n(o(369282)),fe=()=>o(73898),he=()=>o(92175),ye=()=>o(906651),xe=()=>o(916095),ve=()=>o(466970),be=()=>o(880556),we=()=>o(518530),Se=()=>o(963310),Ce=()=>o(67961),ke=()=>o(566937),_e=()=>o(384667),je=()=>o(269299),Te=()=>o(473244),Ie=()=>o(688293),Me=()=>o(972776),Pe=()=>o(432659);const Re=3;const Be=32,Ae={isPreviewing:!0,hideViewBlockSource:!0,hideTableAggregationRow:!0};function Ve(e){let{collectionTemplate:t}=e;const o=function(){const e=(0,r().O7)(),t=(0,n.useMemo)((()=>new(Me().Z)(e)),[e]),o=(0,Ie().N)(Te().i7,{canUndo:!0}),a=(0,n.useRef)(void 0),l=(0,i().Kw)(t.defaultPageTemplateStore),s=(0,i().Kw)(u().default);return(0,n.useEffect)((()=>{if(s.open&&s.collectionTemplate&&!a.current){const{performResult:n}=je().createAndCommit({userAction:"workflowTemplateCustomizationOnboarding.previewCollection",environment:e,perform:n=>{var r;const{collectionStore:i,collectionViewStore:a,collectionViewBlockStore:d}=(0,Pe().l3)({environment:e,existingCollectionInfo:void 0,inMemoryRecordCache:o.cache,parentStore:s.parentStore.clone(o.cache),template:s.collectionTemplate,transaction:n,logger:new(pe().WorkflowTemplateLogger)});if(null===(r=s.collectionTemplate.value.exampleRows)||void 0===r||!r.length){t.setContext({type:"collectionView",collectionViewBlockStore:d,collectionStore:i,collectionViewStore:a,pageVisitSourceOverride:void 0});for(let o=0;o<Re;o++)_e().IW({environment:e,collectionContextStore:t,groupsPointer:[],insertAtIndex:0,shouldCoerce:!0,templateStore:l,transaction:n,from:{createBlock:"workflow_template"},inMemoryRecordCache:i.inMemoryRecordCache})}return d},canUndo:!1});a.current=n,u().default.setState({...s,collectionViewBlockStore:n,persistDraftDB:()=>o.persist(`${Te().i7}.persistDraftDB`)})}}),[s,t,l,o,e]),a.current}(),a=(0,g().yK)((e=>({container:{backgroundColor:e.contentBackground,paddingTop:Be,overflowY:"auto",borderRadius:12,border:`1px solid ${e.stroke.primary}`},titleWrapper:{display:"flex",alignItems:"center",paddingLeft:Be+8,margin:"8px 0"},titleText:{fontSize:24,fontWeight:700,lineHeight:"26px",whiteSpace:"pre-line",marginLeft:12,overflow:"initial"}})),[]);return o?(0,F.jsxs)(l().jX,{height:"fill",style:a.container,children:[(0,F.jsxs)("div",{style:a.titleWrapper,children:[(0,F.jsx)(ue().l,{template:t,size:28}),(0,F.jsx)(Ce().Z,{style:a.titleText,children:t.value.targetCollection.name})]}),(0,F.jsx)(ke().q$,{value:Ae,children:(0,F.jsx)(Se().DZ,{store:o,disabled:!0,forceLocalQueryCollection:!0,headerActionsBehavior:"hidden",overridePaddingLeft:Be,overridePaddingRight:0})})]}):null}o(821057);var Le=()=>o(628370),Ee=(o(470928),()=>o(38883)),Fe=()=>o(568017),Oe=()=>o(707513),Ne=()=>o(246471);function We(e){let{recordTitles:t,boardByPropertyTemplate:o,optionNames:n,disableBoardColorColumns:r}=e;const i=(0,g().Fg)(),a=(0,g().yK)((e=>({container:{display:"flex",paddingTop:12,borderTop:`1px solid ${e.stroke.secondary}`},recordTitle:{display:"flex",alignItems:"center",color:e.mediumTextColor,minHeight:40,borderRadius:6,width:"100%",padding:"10px 12px 8px 8px",marginBottom:5,boxShadow:e.buttonBoxShadow,backgroundColor:e.calendarItemBackground,fontSize:14,fontWeight:Oe().Ue.medium,...Oe().Yu},recordColumn:{display:"flex",flexDirection:"column",marginTop:12},group:{width:"33%",marginRight:10,borderRadius:5,padding:5},statusSelectToken:{fontWeight:500,lineHeight:"normal",overflow:"hidden",paddingRight:6}})),[]);if(!o||!n)return null;const l=n.map((e=>{var t;return(null===(t=o.value.options)||void 0===t||null===(t=t.find((t=>t.value===e)))||void 0===t?void 0:t.color)??"gray"}));return(0,F.jsx)("div",{style:a.container,children:n.map(((e,o)=>{const{backgroundColor:n}=r?{}:(0,Fe().bw)(i,l[o]);return(0,F.jsxs)("div",{style:{...a.group,backgroundColor:n},children:[(0,F.jsx)("span",{style:a.statusSelectToken,children:(0,F.jsx)(Ne().F,{value:e??"",color:l[o],format:Ee().lo.Medium,showRemoveButton:!1,isSingle:!0,groupColor:l[o]})}),0===o&&(0,F.jsx)("div",{style:a.recordColumn,children:t.map(((e,t)=>(0,F.jsx)("div",{style:a.recordTitle,children:e},t)))})]},o)}))})}const Ke=3,Ze=3;function De(e){let{recordTitles:t}=e;const o=(0,g().yK)((e=>({container:{display:"flex",flexDirection:"column",paddingTop:12,borderTop:`1px solid ${e.stroke.secondary}`},datePlaceholder:{width:60,height:10,borderRadius:12,background:e.cardPressedBackground,marginBottom:16},calendarPreview:{display:"flex",minWidth:1600}})),[]);return(0,F.jsxs)("div",{style:o.container,children:[(0,F.jsx)("div",{style:o.datePlaceholder}),(0,F.jsx)("div",{style:o.calendarPreview,children:[...Array(Ze)].map(((e,o)=>(0,F.jsx)(ze,{column:o,recordTitles:t},o)))})]})}function ze(e){let{column:t,recordTitles:o}=e;const n=(0,g().yK)((e=>({container:{display:"flex",flexDirection:"column",alignItems:"center",width:180},header:{width:30,height:6,borderRadius:12,background:e.cardPressedBackground,marginBottom:6}})),[]);return(0,F.jsxs)("div",{style:n.container,children:[(0,F.jsx)("div",{style:n.header}),[...Array(Ke)].map(((e,n)=>(0,F.jsx)(Ue,{row:n,column:t,contents:$e(n,t,o)},n)))]})}function Ue(e){let{row:t,column:o,contents:n}=e;const r=(0,g().yK)((e=>({container:{width:"100%",height:180,borderTop:`1px solid ${e.stroke.secondary}`,borderBottom:t===Ke-1?`1px solid ${e.stroke.secondary}`:"none",borderLeft:`1px solid ${e.stroke.secondary}`,borderRight:o===Ze-1?`1px solid ${e.stroke.secondary}`:"none",backgroundColor:0===o?e.surface.wash:void 0},header:{width:16,height:8,borderRadius:12,background:e.cardPressedBackground,marginBottom:6,position:"relative",top:6,left:160}})),[o,t]);return(0,F.jsxs)("div",{style:r.container,children:[(0,F.jsx)("div",{style:r.header}),null==n?void 0:n.map(((e,t)=>(0,F.jsx)(He,{content:e,itemNumber:t},t)))]})}function He(e){let{content:t,itemNumber:o}=e;const n=(0,g().yK)((e=>({rowItem:{position:"relative",paddingLeft:8,paddingRight:8,left:10,top:10+10*o,width:150,height:30,color:e.text.primary,backgroundColor:e.calendarItemBackground,borderRadius:6,fontSize:14,alignContent:"center",boxShadow:e.buttonBoxShadow,...Oe().Yu}})),[o]);return(0,F.jsx)("div",{style:n.rowItem,children:t})}function $e(e,t,o){return 0===e&&1===t?o.slice(0,2):1===e&&1===t?[o[o.length-1]]:[]}var Ge=()=>o(292832);function qe(e){let{recordTitles:t}=e;const o=(0,g().yK)((e=>({icon:{width:20,height:20,color:e.mediumIconColor},recordTitle:{fontSize:14,...Oe().Yu},wrapper:{borderTop:`1px solid ${e.stroke.secondary}`}})),[]);return(0,F.jsx)(l().jX,{direction:"column",align:"top-left",gap:4,padding:"12px 0px",style:o.wrapper,children:t.map(((e,t)=>(0,F.jsxs)(l().jX,{direction:"row",align:"center-left",gap:4,padding:"0px 8px",children:[(0,Ge().a)(o.icon),(0,F.jsx)("span",{style:o.recordTitle,children:e}),(0,F.jsx)(l().jX,{direction:"row",align:"center-right",children:(0,F.jsx)(Ne().F,{value:"Not started",color:"gray",format:Ee().lo.Small,showRemoveButton:!1,isSingle:!0,groupColor:"gray"})})]},t)))})}o(731107);var Xe=()=>o(714230),Ye=()=>o(766933),Qe=()=>o(565630),Je=()=>o(661727),et=()=>o(523634),tt=()=>o(518242),ot=()=>o(86048),nt=()=>o(472344),rt=()=>o(965865),it=()=>o(275200),at=()=>o(167777);function lt(){return(0,i().VK)((()=>function(){const e=u().default.state;if(!e.open)return!1;return!(0,c().vg)(e).includes("recordTitles")}()),[])}var st=()=>o(406756);const dt=[{avatarSrc:Xe().Z.images.workflowTemplates.previewAvatar1Png,name:(0,F.jsx)(y()._H,{defaultMessage:"Taylor Moore",id:"previewTableView.personProperty.name1"})},{avatarSrc:Xe().Z.images.workflowTemplates.previewAvatar2Png,name:(0,F.jsx)(y()._H,{defaultMessage:"Emma Johnson",id:"previewTableView.personProperty.name2"})},{avatarSrc:Xe().Z.images.workflowTemplates.previewAvatar3Png,name:(0,F.jsx)(y()._H,{defaultMessage:"James Smith",id:"previewTableView.personProperty.name3"})}];function ct(e){const t=(0,g().yK)((e=>({container:{display:"flex",alignItems:"center",width:"100%"},avatarWrapper:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,marginRight:6,boxSizing:"content-box",borderRadius:"100%",overflow:"hidden",outlineWidth:1,outlineStyle:"solid",outlineColor:e.stroke.secondary},avatarImage:{width:"100%",height:"100%",borderRadius:"100%"}})),[]),o=dt[e.index%dt.length];return(0,F.jsxs)("div",{style:t.container,children:[(0,F.jsx)("div",{style:t.avatarWrapper,children:(0,F.jsx)(tt().ZP,{src:o.avatarSrc,style:t.avatarImage})}),(0,F.jsx)(st().X,{style:ut(e.index)})]})}function ut(e){const t=function(e){return 60+(2*(e+3)+43)%(e%5+2)*5}(e);return{width:`${t}%`,maxWidth:"80%"}}const pt=[30,45,35,40];function mt(e){let{index:t,offset:o}=e;return{width:pt[(t+o)%pt.length]}}const gt=[2,4,3];function ft(e){let{index:t}=e;const o=gt[t%gt.length],n=(0,g().yK)((e=>({container:{display:"flex",flexDirection:"row",gap:6},file:{width:22,height:22}})),[]);return(0,F.jsx)("div",{style:n.container,children:Array.from({length:o}).map(((e,t)=>(0,F.jsx)(st().X,{style:n.file},t)))})}function ht(e){let{propertyId:t,propertySchema:o,columnIndex:n}=e;switch(o.type){case"file":return(0,at().HP)().map(((e,o)=>(0,F.jsx)(ft,{index:o},`file-${t}-${o}`)));case"number":return(0,at().HP)().map(((e,o)=>(0,F.jsx)(st().X,{style:mt({index:o,offset:n})},`number-${t}-${o}`)));case"text":case"title":return(0,at().HP)().map(((e,o)=>(0,F.jsx)(st().X,{style:ut(o)},`text-skeleton-${t}-${o}`)));case"select":case"multi_select":return(0,at().m6)(o).map(((e,o)=>(0,F.jsx)(Ne().a,{value:e.value,color:e.color,format:Ee().lo.Medium,showRemoveButton:!1,isSingle:!0},`${t}-${o}`)));case"status":return(0,at().m6)(o).map(((e,o)=>(0,F.jsx)(Ne().F,{value:e.value,color:e.color,format:Ee().lo.Medium,showRemoveButton:!1,isSingle:!0,groupColor:e.color},`${t}-${o}`)));case"created_time":case"last_edited_time":case"last_visited_time":case"date":return(0,at()._y)(o).map(((e,o)=>(0,F.jsx)(st().X,{style:{width:"70%",maxWidth:"70%"}},`date-skeleton-${t}-${o}`)));case"created_by":case"last_edited_by":case"person":return(0,at().HP)().map(((e,o)=>(0,F.jsx)(ct,{index:o},`${t}-${o}`)));case"checkbox":return(0,at().Qu)().map(((e,o)=>(0,F.jsx)(et().n,{checked:e,disabled:!0},`${t}-${o}`)));case"formula":return"percent"===o.number_format?(0,at().HP)().map(((e,o)=>(0,F.jsx)(xt,{index:o},`progress-bar-${t}-${o}`))):(0,at().HP)().map(((e,o)=>(0,F.jsx)(st().X,{style:mt({index:o,offset:n})},`formula-${t}-${o}`)));default:return[]}}const yt=[15,90,55,0];function xt(e){let{index:t}=e;const o=yt[t%yt.length],n=(0,g().Fg)(),{filledColor:r,gapColor:i,unfilledColor:a}=(0,nt().O)({theme:n,color:"green"});return(0,F.jsx)(ot().k,{percentage:o,filledColor:r,gapColor:i,unfilledColor:a,style:{width:"100%"}})}const vt=250,bt=150,wt=10,St={duration:.2,ease:"easeInOut",backgroundColor:{duration:.8}};function Ct(e){let{recordTitles:t,userCustomizations:o}=e;const[r,...a]=(0,i().VK)((()=>(0,at().G$)(o)),[o]),s=(0,Qe().D9)(a),d=(0,n.useMemo)((()=>{if(s&&!(a.length>=s.length))return s.findIndex((e=>!a.includes(e)))}),[a,s]),c=(0,b().w)(200),u=lt(),m=vt+wt+a.reduce(((e,t)=>{var o;return e+((null===(o=t.tablePropertyFormat)||void 0===o?void 0:o.width)??bt)}),0);return(0,F.jsx)(l().jX,{direction:"row",height:"fill",style:{minWidth:m},children:(0,F.jsxs)(p().M,{children:[r&&(0,F.jsx)(kt,{shouldAnimate:c,propertySchema:r.value,isLastColumn:!1,rowContent:u?ht({propertyId:at().Pc.templateId,propertySchema:at().Pc.value,columnIndex:0}):t,width:vt},r.templateId),a.map(((e,t)=>{var o;const n=e.value,r=e.templateId;return(0,F.jsx)(kt,{shouldAnimate:c,forceScrollTo:void 0!==d&&t===d-1,propertySchema:n,isLastColumn:t===a.length-1,rowContent:u?ht({propertyId:r,propertySchema:n,columnIndex:t}):[],width:(null===(o=e.tablePropertyFormat)||void 0===o?void 0:o.width)??bt},r)}))]})})}function kt(e){const{isLastColumn:t,propertySchema:o,rowContent:r,width:i,shouldAnimate:a,forceScrollTo:l}=e,s=(0,g().Fg)(),d=(0,n.useRef)(null),c=(0,n.useRef)(a),[u,p]=(0,n.useState)(void 0);(0,n.useEffect)((()=>{const e=setTimeout((()=>{d.current&&(c.current||l)&&(0,it().n5)({element:d.current,behavior:"smooth",additionalPadding:{right:i}})}),200);return()=>clearTimeout(e)}),[d,i,c,l]);const f=(0,g().yK)((e=>({column:{flex:"0 0 auto",overflow:"hidden",background:e.white,minWidth:a?void 0:i,position:"relative"},inner:{position:"absolute",left:0,minWidth:i,height:"100%"},headerCell:{color:e.text.secondary,fontWeight:400,textWrap:"nowrap",padding:"8px 32px 8px 8px",borderBottom:`1px solid ${e.stroke.secondary}`,borderRight:t?void 0:`1px solid ${e.stroke.secondary}`,borderTop:`1px solid ${e.stroke.secondary}`,display:"flex",alignItems:"center",fontSize:14,height:32},icon:{marginRight:6},rowCell:{height:32,borderBottom:`1px solid ${e.stroke.secondary}`,display:"flex",alignItems:"center",overflow:"hidden",fontSize:14,whiteSpace:"pre",textOverflow:"ellipsis",padding:"6px 8px"},rowWrapper:{borderRight:t?void 0:`1px solid ${e.stroke.secondary}`}})),[t,i,a]),h=(r.length>0?r:(0,at().HP)().map((()=>""))).map(((e,t)=>(0,F.jsx)("div",{style:f.rowCell,children:e},t))),y=(0,n.useMemo)((()=>{const e=(0,Je().Fq)(s.fill.uiBlue,.1),t=(0,Je().Fq)(e,0),o=(null==u?void 0:u.width)??i;return a?{initial:{width:0,opacity:0,backgroundColor:e},animate:{width:o,backgroundColor:t,opacity:1},exit:{width:0,backgroundColor:t,opacity:0}}:{initial:{width:o,backgroundColor:t},animate:void 0,exit:{width:0,backgroundColor:t}}}),[a,u,i,s]);return(0,F.jsx)(m().E.div,{ref:d,layoutId:null==o?void 0:o.name,style:f.column,initial:y.initial,animate:y.animate,exit:y.exit,transition:St,children:(0,F.jsx)(rt().n4,{onSizeChange:p,children:(0,F.jsxs)("div",{style:f.inner,children:[(0,F.jsx)("div",{style:f.headerCell,children:o?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Ye().ZP,{icon:o.icon,size:16,theme:s,type:o.type,style:f.icon}),o.name,"ai_inference"in o&&(0,F.jsx)(x().Z,{})]}):null}),(0,F.jsx)("div",{style:f.rowWrapper,children:h})]})})})}const _t=40;function jt(e){let{recordTitles:t}=e;const o=(0,g().yK)((e=>({container:{display:"flex",flexDirection:"column",paddingTop:12,borderTop:`1px solid ${e.stroke.secondary}`},datePlaceholder:{width:60,height:10,borderRadius:12,background:e.cardPressedBackground,marginBottom:16},dateTickerContainer:{display:"flex",width:1600},dateTicker:{background:e.cardPressedBackground,height:6,width:2,borderRadius:1},timelineBackground:{marginTop:6,marginLeft:-20,minHeight:1e3,minWidth:1600,backgroundColor:e.timelineBackground,display:"flex",position:"relative"}})),[]);return(0,F.jsxs)("div",{style:o.container,children:[(0,F.jsx)("div",{style:o.datePlaceholder}),(0,F.jsx)("div",{style:o.dateTickerContainer,children:[...Array(_t)].map(((e,t)=>(0,F.jsx)("div",{style:{...o.dateTicker,...0!==t&&{marginLeft:14}}},t)))}),(0,F.jsxs)("div",{style:o.timelineBackground,children:[(0,F.jsx)(Tt,{left:78}),(0,F.jsx)(Tt,{left:256}),t.map(((e,t)=>(0,F.jsx)(It,{row:t,content:e},t)))]})]})}function Tt(e){let{left:t}=e;const o=(0,g().yK)((e=>({darkerColumn:{position:"relative",minHeight:1e3,width:72,backgroundColor:e.onboardingPreviewBackground,left:t}})),[t]);return(0,F.jsx)("div",{style:o.darkerColumn})}function It(e){let{row:t,content:o}=e;const n=(0,g().yK)((e=>({rowItem:{position:"absolute",left:50+120*t,top:20+42*t,paddingLeft:8,paddingRight:8,width:216,height:30,color:e.text.primary,backgroundColor:e.calendarItemBackground,borderRadius:6,fontSize:14,alignContent:"center",boxShadow:e.buttonBoxShadow,...Oe().Yu}})),[t]);return(0,F.jsx)("div",{style:n.rowItem,children:o})}function Mt(e){let{userCustomizations:t,previewCollectionViewTemplateId:o}=e;const n=(0,g().yK)((e=>({placeholder:{color:e.mediumTextColor}})),[]),r=(0,F.jsx)("span",{style:n.placeholder,children:(0,F.jsx)(y()._H,{id:"WorkflowTemplatesOnboardingModal.recordTitles.placeholder",defaultMessage:"Untitled"})}),{recordTitles:a}=t,l=Pt(a,r),s=o,d=(0,i().VK)((()=>s?pe().globalWorkflowTemplates.fromIdOfType({templateId:s,type:"collection_view"}):void 0),[s]),u=(null==d?void 0:d.value.type)||"table",p=(0,i().VK)((()=>{var e,o;switch(null==d?void 0:d.value.type){case"board":const n=(0,c().oL)(d);return(0,F.jsx)(We,{recordTitles:l,boardByPropertyTemplate:n,optionNames:null===(e=d.value.format)||void 0===e||null===(e=e.board_columns)||void 0===e?void 0:e.map((e=>{const{value:t}=e;if(!t.value)return"";if("status"===t.type)return"by_group"===t.value.type?t.value.group:t.value.option;if("select"===t.type||"multi_select"===t.type)return t.value;throw new Error(`Group value type ${t.type} not yet supported in preview`)})),disableBoardColorColumns:null===(o=d.value.format)||void 0===o||null===(o=o.board_columns_by)||void 0===o?void 0:o.disableBoardColorColumns});case"timeline":return(0,F.jsx)(jt,{recordTitles:l});case"calendar":return(0,F.jsx)(De,{recordTitles:l});case"list":return(0,F.jsx)(qe,{recordTitles:l});default:return(0,F.jsx)(Ct,{recordTitles:Pt(a,""),userCustomizations:t})}}),[d,l,a,t]);return(0,F.jsx)(Le().Z,{config:{duration:200},animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},style:{flex:1,display:"flex",flexDirection:"column"},children:p},u)}function Pt(e,t){return e.map((e=>e||t))}var Rt=()=>o(539245),Bt=()=>o(383694);function At(e){let{icon:t,title:o,indentPixels:n}=e;const r=(0,g().yK)((e=>({sidebarRow:{height:30,paddingTop:4,paddingBottom:4,paddingLeft:8+(n??0),paddingRight:8,display:"flex",alignItems:"center",justifyContent:"flex-start"},sidebarIcon:{},sidebarTitle:{width:"100%",marginLeft:8,fontSize:14,fontWeight:Oe().Ue.medium,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}})),[n]);return(0,F.jsxs)("div",{style:r.sidebarRow,children:[(0,F.jsx)("div",{style:r.sidebarIcon,children:t}),(0,F.jsx)("div",{style:r.sidebarTitle,children:o})]})}const Vt=180;function Lt(e){let{style:t,children:o,parentStore:n,collectionTemplate:r,userCustomizations:i,previewCollectionViewTemplateId:a}=e;const l=!1,s=(0,g().yK)((e=>({wrapper:{...t,display:"flex",flexDirection:"column",flex:1,overflow:"hidden",zIndex:2,position:"relative",height:"100%"},preview:{height:"100%",display:"flex",flexDirection:"column",flex:1,border:`1px solid ${e.stroke.primary}`,borderRadius:12,backgroundColor:e.surface.wash},sidebar:{width:Vt,height:400,backgroundColor:e.surface.wash,marginTop:16,padding:8,color:e.text.secondary},content:{padding:"32px 0 0 32px",display:"flex",flexDirection:"column",flex:1,height:"100%",backgroundColor:e.surface.elevated,borderRadius:12,overflowX:"scroll",overflowY:"hidden",minWidth:void 0},peopleLookingAtCollection:{position:"absolute",height:100,width:149,left:240,top:8,marginTop:-100},previewRow:{width:20,height:20,borderRadius:4,background:e.icon.quaternary,display:"flex",alignItems:"center",justifyContent:"center"}})),[t,l]);let d;switch(n.table){case"team":d=(0,F.jsx)(Et,{teamStore:n});break;case"block":case"space":d=null}return(0,F.jsx)("div",{style:s.wrapper,children:(0,F.jsxs)("div",{style:s.preview,children:[l,(0,F.jsxs)("div",{style:s.content,children:[(0,F.jsx)(Ft,{userCustomizations:i,collectionTemplate:r,previewCollectionViewTemplateId:a}),o]})]})})}function Et(e){let{teamStore:t}=e;const o=(0,i().VK)((()=>t.getName()),[t]);return(0,F.jsx)(At,{icon:(0,F.jsx)(Bt().p,{size:20,store:t,disabled:!0}),title:o})}function Ft(e){let{userCustomizations:t,collectionTemplate:o,previewCollectionViewTemplateId:r}=e;const a=(0,g().yK)((e=>({headerWrapper:{position:"sticky",left:0,marginBottom:-1.5},titleWrapper:{display:"flex",alignItems:"center",paddingLeft:8,marginTop:8,marginBottom:8},titleText:{fontSize:24,fontWeight:700,lineHeight:"26px",whiteSpace:"pre-line",marginLeft:12,overflow:"initial"},icon:{height:16,width:16,display:"inline-block"},tabTitle:{marginLeft:4,fontSize:14,fontWeight:500}})),[]),l=n.useMemo((()=>t.featureTemplateSelections.filter((e=>"collection_view"===e.template.type&&e.selected)).map((e=>e.template.templateId))),[t.featureTemplateSelections]),s=(0,i().VK)((()=>pe().globalWorkflowTemplates.allOfType({templateIds:l,type:"collection_view"})),[l]),d=(0,i().VK)((()=>{const e=r,t=s.findIndex((t=>t.templateId===e));return-1===t?0:t}),[r,s]);return(0,F.jsxs)("div",{style:a.headerWrapper,children:[(0,F.jsxs)("div",{style:a.titleWrapper,children:[(0,F.jsx)(ue().l,{template:o,size:28}),(0,F.jsx)(Ce().Z,{style:a.titleText,children:o.value.targetCollection.name})]}),(0,F.jsx)(Rt().Z,{style:{paddingLeft:0,paddingRight:0,boxShadow:"none"},tabBorderStyle:{left:0,right:0},tabs:s.map(((e,t)=>(0,F.jsx)(Ot,{collectionViewTemplate:e,index:t,selectedIndex:d},t))),selectedIndex:d,onChange:()=>{},readOnly:!0})]})}function Ot(e){let{collectionViewTemplate:t,index:o,selectedIndex:n}=e;const r=o===n,i=(0,g().yK)((e=>({tabContainer:{display:"flex",alignItems:"center"},tabTitle:{marginLeft:4,fontSize:14,fontWeight:500},icon:{fill:r?e.regularIconColor:e.lightIconColor}})),[r]);return(0,F.jsxs)("span",{style:i.tabContainer,children:[(0,F.jsx)(ue().l,{template:t,iconStyle:i.icon}),(0,F.jsx)("span",{style:i.tabTitle,children:t.value.name})]})}function Nt(e){const{sidebar:t,cornerButton:o,preview:n}=e;return(0,F.jsxs)(F.Fragment,{children:[o,(0,F.jsxs)(l().jX,{direction:"row",height:"fill",padding:24,gap:24,style:{minHeight:0},children:[t?(0,F.jsx)(l().jX,{width:320,height:"fill",padding:"60px 0 0 0",gap:25,style:{flexShrink:0},children:t}):null,n]})]})}function Wt(e){let{children:t}=e;const o=(0,g().yK)((()=>({sidebarContent:{overflowY:"auto"},sidebarFooter:{flexShrink:0}})),[]),n=(0,i().VK)((()=>u().default.state),[]),r=(0,ve().E)("workflow_templates_settings_dev");if(!n.open||!n.collectionTemplate)return null;const a=r?(0,F.jsx)(Ve,{collectionTemplate:n.collectionTemplate}):(0,F.jsx)(Lt,{...(0,c().lq)(n),parentStore:n.parentStore,children:(0,F.jsx)(Mt,{userCustomizations:n.userCustomizations,previewCollectionViewTemplateId:n.previewCollectionViewTemplateId})});return(0,F.jsx)(Nt,{sidebar:(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(l().jX,{height:"fill",padding:2,style:o.sidebarContent,children:t}),(0,F.jsx)(l().jX,{style:o.sidebarFooter,children:(0,F.jsx)(Zt,{modalState:n})})]}),cornerButton:(0,F.jsx)($t,{modalState:n}),preview:a})}const Kt=!1;function Zt(e){let{modalState:t}=e;const o=(0,y().YB)(),{isOnFirstModalStep:n,isOnLastModalStep:r}=(0,i().VK)((()=>({isOnFirstModalStep:!(0,c()._u)(t),isOnLastModalStep:!(0,c().Ds)(t)})),[t]),a=(0,i().VK)((()=>{var e;return!!t.open&&(null===(e=t.setupGenerator)||void 0===e?void 0:e.store.state.isBusy)}),[t]);if(!t.collectionTemplate)return null;const l=o.formatMessage({id:"workflowTemplatesOnboardingModalStep.getStarted",defaultMessage:"Get started"}),s=n&&r;return r?(0,F.jsx)(Ut,{label:s?l:(0,F.jsx)(y()._H,{id:"workflowTemplatesOnboardingModalStep.done",defaultMessage:"Done"})}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Dt,{disabled:t.isSaving||t.isFollowUpInputFocused||a,modalState:t,label:n?l:o.formatMessage({id:"workflowTemplatesOnboardingModalStep.continue",defaultMessage:"Continue"})}),Kt&&!s&&(0,F.jsx)(zt,{})]})}function Dt(e){let{modalState:t,label:o,isLoading:n,disabled:i,onClick:a}=e;const l=(0,g().yK)((()=>({button:{padding:10,width:"100%",height:32,borderRadius:8}})),[]),s=(0,r().O7)();return t.collectionTemplate?(0,F.jsx)(ye().Z,{style:l.button,isLoading:n,disabled:i,onClick:async()=>{u().default.update((e=>({...e,isSaving:!0})));const e=await(null==a?void 0:a());if(u().default.update((e=>({...e,isSaving:!1}))),!1===e)return;const o=(0,c().J3)(t);o>=0&&(u().default.update((e=>({...e,currentStepIndex:o}))),(0,d().j)({environment:s,event:{eventName:"workflow_template_onboarding_next_step",eventProperties:{next_step:(0,c().vg)(t)[o],step:(0,c().IA)(t),...(0,c().px)(t)}}}))},children:o}):null}function zt(){const e=(0,r().O7)(),t=(0,i().VK)((()=>u().default.state),[]);return ge()(t.open,"Modal should always be open for this to render."),(0,F.jsx)(he().Z,{isGray:!0,style:{height:32,borderRadius:8,justifyContent:"center",marginTop:8},isLoading:t.isSaving,disabled:t.isSaving,onClick:()=>(0,me().createCollectionTemplateFromModalState)({environment:e,modalState:t}),children:(0,F.jsx)("span",{children:"Customize later"})})}function Ut(e){const{label:t}=e,o=(0,r().O7)(),a=(0,i().Kw)(u().default);ge()(a.open,"Modal should always be open for this to render.");const l=(0,i().VK)((()=>{var e;return null===(e=a.setupGenerator)||void 0===e?void 0:e.store.state.isBusy}),[a]),s=(0,n.useCallback)((()=>{(0,me().createCollectionTemplateFromModalState)({environment:o,modalState:a})}),[o,a]);return(0,F.jsx)(ye().Z,{style:{height:32,borderRadius:8},isLoading:a.isSaving,disabled:a.isSaving||a.isFollowUpInputFocused||l,onClick:s,children:t})}function Ht(e){let{title:t,caption:o}=e;const n=(0,g().yK)((e=>({assistantFace:{borderRadius:"100%",width:(0,fe().O)("medium"),boxShadow:e.lightBoxShadow,marginBottom:14},title:{whiteSpace:"pre-line",hangingPunctuation:"first",textWrap:"balance"}})),[]);return(0,F.jsx)("div",{children:(0,F.jsxs)(l().jX,{gap:4,children:[(0,F.jsx)(oe().q,{styleName:"UITitle-22px/Semibold",customStyles:n.title,children:t??(0,F.jsx)(y()._H,{id:"workflowTemplatesOnboardingModalStep.customize",defaultMessage:"Customize"})}),o?(0,F.jsx)(oe().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:o}):null]})})}function $t(e){const{modalState:t}=e;return 0===t.currentStepIndex?(0,F.jsx)(qt,{}):(0,F.jsx)(Xt,{modalState:t})}function Gt(e){const{iconFn:t,onClick:o,style:n}=e,r=(0,g().yK)((e=>({button:{position:"absolute",top:20,left:20,zIndex:1,height:26,paddingLeft:5,paddingRight:5,...n},icon:{width:16,height:16,fill:e.icon.secondary}})),[n]);return(0,F.jsx)(he().Z,{onClick:o,style:r.button,children:t(r.icon)})}function qt(){const e=(0,n.useContext)(xe().gv);return(0,F.jsx)(Gt,{iconFn:we().U,onClick:()=>null==e?void 0:e()})}function Xt(e){const{modalState:t,style:o}=e,n=(0,r().O7)();return t.collectionTemplate?(0,F.jsx)(Gt,{style:o,iconFn:be().W,onClick:()=>{const e=(0,c().AQ)(t);e>=0&&u().default.setState({...t,currentStepIndex:e}),(0,d().j)({environment:n,event:{eventName:"workflow_template_onboarding_previous_step",eventProperties:{previous_step:(0,c().vg)(t)[e],step:(0,c().IA)(t),...(0,c().px)(t)}}})}}):null}function Yt(e){let{children:t,isSelected:o,disabled:n,onClick:r,tooltipEvents:i,style:a}=e;const l=(0,g().yK)((e=>({button:{fontSize:14,paddingLeft:12,paddingRight:12,borderRadius:24,color:e.text.primary,boxShadow:`0 0 0 1px ${e.stroke.primary}`,...o&&{boxShadow:`0 0 0 1.5px ${e.stroke.uiBluePrimary}`,background:e.buttonBackground},...a},buttonHovered:{...o?{boxShadow:`0 0 0 1.5px ${e.stroke.uiBluePrimary}`,background:e.outlineBlueButtonHoveredBackground}:{boxShadow:`0 0 0 1px ${e.stroke.input}`,background:e.buttonHoveredBackground}}})),[o,a]);return(0,F.jsx)(he().Z,{...i,style:l.button,disabled:n,disabledFeedback:!0,onClick:r,hoveredStyle:l.buttonHovered,children:t})}function Qt(){const e=(0,i().Kw)(u().default),t=(0,w().r)(),o=null==t?void 0:t.id,a=(0,r().O7)(),s=(0,g().yK)((()=>({grid:{flex:"1 0 0",display:"grid",gridTemplateRows:"1fr auto"},features:{},feedbackInput:{display:"flex",flexDirection:"column",minHeight:30,maxHeight:120}})),[]),d=(0,i().VK)((()=>{if(e.open)return e.setupGenerator}),[e]),p=(0,n.useCallback)((e=>{!(0,h().PgY)(e)?(0,me().setFollowUpInputFocused)(!0):(0,me().setFollowUpInputFocused)(!1),null==d||d.setPrompt(e)}),[d]),m=(0,i().VK)((()=>{var e;return null==d||null===(e=d.store)||void 0===e||null===(e=e.state)||void 0===e?void 0:e.feedbackArgs}),[d]),f=(0,i().VK)((()=>(null==d?void 0:d.store.state.isBusy)??!1),[d]),y=(0,i().VK)((()=>{var e;return f?null==d||null===(e=d.store.state)||void 0===e?void 0:e.progress:void 0}),[d,f]),x=(0,n.useCallback)((()=>{(0,me().retryAiSetup)()}),[]),v=(0,n.useCallback)((()=>{null==d||d.submitPrompt({from:"follow-up"})}),[d]),b=(0,i().VK)((()=>null==d?void 0:d.store.state.prompt),[d]),S=(0,n.useCallback)((()=>{null==d||d.stopGenerating()}),[d]),C=(0,i().VK)((()=>{var e;if(!d)return!1;return((null===(e=d.store.state.transcriptTree)||void 0===e||null===(e=e.toNodes())||void 0===e?void 0:e.filter((e=>"setup"===e.value.type)))??[]).length<5}),[d]);return e.open&&o&&e.collectionTemplate?(0,F.jsxs)(l().jX,{direction:"column",height:"fill",gap:24,children:[(0,F.jsx)(Jt,{collectionName:e.collectionTemplate.value.targetCollection.name,setupGeneratorProgress:y}),(0,F.jsxs)("div",{style:s.grid,children:[(0,F.jsx)("div",{style:s.features,children:(0,F.jsx)(eo,{featureTemplateSelections:e.userCustomizations.featureTemplateSelections,isSetupGeneratorBusy:f,toggleFeatureTemplateSelection:e=>(0,me().toggleFeatureSelectionInPreview)({template:e,environment:a}),updatePreviewCollectionViewTemplateId:me().setPreviewCollectionViewTemplateId,...(0,c().lq)(e)})}),m?(0,F.jsx)("div",{style:s.feedbackInput,children:(0,F.jsx)(le().m,{featureGateId:"ai_setup_generator_followup",whenEnabled:C?(0,F.jsx)(te,{canPressEnter:!0,onClickRetry:x,onSubmit:v,onClickStop:S,value:b,onChange:p,feedbackArgs:m,isBusy:f}):null,whenDisabled:(0,F.jsx)(ae,{feedbackArgs:m,onClickRetry:x})})}):null]})]}):null}function Jt(e){const{collectionName:t,setupGeneratorProgress:o}=e;return o?(0,F.jsx)(ie,{statusLabel:o.statusLabel}):(0,F.jsx)(Ht,{title:(0,F.jsx)(y()._H,{id:"workflowTemplatesOnboardingModal.customizeCollection",defaultMessage:"Customize {collectionName}",values:{collectionName:t}}),caption:(0,F.jsx)(y()._H,{id:"workflowTemplatesOnboardingModal.selectFeatures",defaultMessage:"Select features to turn on or off"})})}function eo(e){let{featureTemplateSelections:t,toggleFeatureTemplateSelection:o,updatePreviewCollectionViewTemplateId:r,isSetupGeneratorBusy:a,...l}=e;const{collectionTemplate:s,previewCollectionViewTemplateId:d}=l,u=(0,i().VK)((()=>(0,c().se)(s)),[s]),p=(0,n.useMemo)((()=>{const e=[];for(const t of u)e.push(...(0,f().Yg)({template:t,dependencyMap:t.dependencyMap||{}}).map((e=>e.templateId)));return e}),[u]),m=t.filter((e=>"required"!==e.optionality&&!p.includes(e.template.templateId)&&(0,c().Zg)(e.template)));return(0,n.useEffect)((()=>{const e=d?pe().globalWorkflowTemplates.fromIdOfType({templateId:d,type:"collection_view"}):void 0;if("table"===(null==e?void 0:e.value.type))return;const t=new Set(l.userCustomizations.featureTemplateSelections.filter((e=>e.selected)).map((e=>e.template.templateId)));for(const o of u)if("table"===o.value.type&&t.has(o.templateId))return void r(o.templateId)})),(0,F.jsx)(to,{featureTemplateSelections:m,templateOnboardingState:l,isLoading:a})}function to(e){const t=(0,r().O7)(),{isLoading:o,featureTemplateSelections:n,templateOnboardingState:i}=e,a=(0,g().yK)((()=>({sectionHeader:{fontWeight:600,marginBottom:6},pillsSection:{display:"flex",flexWrap:"wrap",gap:12,isolation:"isolate"}})),[]),l=(0,b().w)(1e3);return(0,F.jsx)("div",{style:a.pillsSection,children:(0,F.jsx)(p().M,{mode:"popLayout",children:n.map(((e,r)=>(0,F.jsx)(oo,{index:r,featureTemplateSelectionsToShow:n,featureSelection:e,isRequired:!1,isLoading:o,shouldAnimate:l,toggleFeatureTemplateSelection:e=>(0,me().toggleFeatureSelectionInPreview)({template:e,environment:t}),...i},r)))})})}const oo=(0,n.forwardRef)((function(e,t){const{featureTemplateSelectionsToShow:o,featureSelection:n,isRequired:i,isLoading:a,toggleFeatureTemplateSelection:l,index:s,shouldAnimate:u,...p}=e,m=(0,r().O7)(),g=n.template;return(0,F.jsx)(ce,{template:g,alignment:q().Alignment.Start,isRequired:i,render:e=>(0,F.jsx)(io,{ref:t,template:g,index:s,isSelected:n.selected,tooltipEvents:e,disabled:i,isLoading:a,shouldAnimate:u,onClick:()=>{(0,d().j)({environment:m,event:{eventName:"workflow_template_onboarding_feature_select",eventProperties:{selecting:n.selected?"deselecting":"selecting",feature_template_id:g.templateId,feature_template_type:g.type,previously_selected_feature_template_ids:o.filter((e=>e.selected)).map((e=>e.template.templateId)),step:"features",...(0,c().px)(p)}}}),l(g)}})})})),no={type:"spring",damping:25,stiffness:250},ro={...no,delay:.1},io=(0,n.forwardRef)((function(e,t){const{template:o,isSelected:n,isLoading:r,disabled:i,onClick:a,tooltipEvents:l,index:s,shouldAnimate:d}=e,c=(0,g().yK)((e=>({icon:{marginRight:6,fill:n?e.text.uiBluePrimary:e.mediumIconColor},overflowTooltip:{maxWidth:250},selectButton:{},wrapper:{background:e.surface.wash,borderRadius:24,position:"relative",maxWidth:"100%",willChange:"transform",zIndex:void 0!==s?100-s:void 0},shimmerArea:{pointerEvents:"none"},shimmer:{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:24,boxShadow:`0 0 0 1px ${e.stroke.secondary}`}})),[n,s]);return(0,F.jsxs)(m().E.div,{ref:t,style:c.wrapper,layout:!0,transition:no,initial:!!d&&{x:-50,opacity:.5},animate:{x:0,opacity:1},exit:{scale:.5,opacity:0},children:[(0,F.jsx)(m().E.div,{initial:!!d&&{opacity:0},animate:{opacity:r?0:1},transition:ro,children:(0,F.jsxs)(Yt,{tooltipEvents:l,disabled:i,isSelected:n,onClick:a,children:[(0,F.jsx)(ue().l,{iconStyle:c.icon,template:o}),(0,F.jsx)(se().s,{tooltipStyle:c.overflowTooltip,placement:q().Placement.Right,children:(0,pe().getWorkflowTemplateName)(o)}),"ai_inference"in o.value&&(0,F.jsx)(x().Z,{})]})}),(0,F.jsx)(m().E.div,{initial:!1,animate:{opacity:r?1:0},transition:ro,style:r?{}:c.shimmerArea,children:(0,F.jsx)(v().Z,{style:c.shimmer})})]})}));var ao=()=>o(943620),lo=()=>o(384241),so=()=>o(852465),co=()=>o(641506),uo=()=>o(168441),po=()=>o(135515);function mo(){const e=(0,i().Kw)(u().default);if(!e.open||!e.collectionTemplate)return null;const{collectionTemplate:t,relationInfos:o}=e,n=t.value.targetCollection.name;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Ht,{title:(0,F.jsx)(y()._H,{id:"workflowTemplatesOnboardingModal.welcome",defaultMessage:"Welcome to {collectionName}",values:{collectionName:n}}),caption:(0,F.jsx)(fo,{modalState:e})}),(0,F.jsx)(go,{collectionName:n,templateDescription:t.description,relationInfos:o})]})}function go(e){let{collectionName:t,templateDescription:o,relationInfos:n}=e;const r=(0,g().yK)((e=>({container:{display:"flex",flexDirection:"column",marginBottom:24},cardButtonBase:{cursor:"default",fontSize:14,padding:"10px 10px 10px 14px",width:"100%",borderRadius:10,borderStyle:"solid",transition:"border-color 0.3s, box-shadow 0.3s",display:"grid",gridTemplateColumns:"28px auto 16px",background:e.surface.elevated},cardButtonSelected:(0,co().x6)({width:2,color:e.blueColor}),titleContainer:{display:"flex",flexDirection:"row",alignItems:"center"},title:{fontWeight:Oe().Ue.semibold,flex:1,marginLeft:8},descriptionRow:{marginLeft:23},plusIcon:{width:16,height:16},relatedCollectionInfo:{fontWeight:Oe().Ue.semibold,color:e.accentColors.uiBlue[600],marginLeft:23}})),[]),a=(0,po().A)(r.plusIcon),l=(0,i().VK)((()=>function(e){return e.map((e=>(0,h().QaF)(e.collectionStore.getName())))}(n)),[n]),s=new Intl.ListFormat("en",{style:"long",type:"conjunction"});return(0,F.jsxs)("div",{style:{...r.cardButtonBase,...r.cardButtonSelected,...r.container},children:[(0,F.jsxs)("div",{style:r.titleContainer,children:[a,(0,F.jsx)(Ce().Z,{style:r.title,children:`Add ${t}`})]}),o&&(0,F.jsx)(Ce().Z,{isMultiline:!0,isSecondaryColor:!0,style:r.descriptionRow,children:o}),l.length>0&&(0,F.jsx)(Ce().Z,{isMultiline:!0,isSecondaryColor:!0,style:r.relatedCollectionInfo,children:`Links to ${s.format(l)}`})]})}function fo(e){const{modalState:t}=e,o=(0,g().yK)((e=>({container:{display:"flex",fontSize:14,fontWeight:Oe().Ue.medium,alignItems:"center",marginBottom:30},label:{color:e.lightTextColor,paddingRight:4,whiteSpace:"nowrap"},icon:{marginRight:4}})),[]),{parentStore:n}=t,r=(0,i().VK)((()=>n.getIcon()),[n]),a=(0,g().Fg)(),l=(0,so().Mm)(n);return(0,F.jsxs)("div",{style:o.container,children:[(0,F.jsx)("span",{style:o.label,children:"Add to"}),(0,F.jsx)("span",{style:o.icon,children:l?(0,uo().Q)({width:20,fill:a.lightIconColor}):(0,so().Y)(n)?(0,F.jsx)(Bt().p,{size:20,store:n,disabled:!0}):(0,F.jsx)(ao().Z,{icon:r,disabled:!0,isEmptyPage:!1,size:20})}),l?(0,F.jsx)(F.Fragment,{children:"Private"}):(0,F.jsx)(lo().Z,{store:n})]})}var ho=()=>o(629013);const yo=200;function xo(){const e=(0,i().Kw)(u().default),t=(0,n.useCallback)((t=>{e.open&&e.collectionTemplate&&u().default.setState({...e,userCustomizations:t})}),[e]);return e.open&&e.collectionTemplate?(0,F.jsxs)(l().jX,{direction:"column",height:"fill",gap:24,children:[(0,F.jsx)(Ht,{title:e.collectionTemplate&&(o=e.collectionTemplate,`Let’s start by adding a few ${(0,f().HR)({template:o,isPlural:!0,isUpperCase:!1})}`)}),(0,F.jsx)(vo,{updateUserCustomizations:t,...(0,c().lq)(e)})]}):null;var o}function vo(e){let{updateUserCustomizations:t,...o}=e;const n=(0,r().O7)(),{collectionTemplate:i,userCustomizations:a}=o,l=(0,ho().y)((e=>{let{index:t,event:r}=e;(0,d().j)({environment:n,event:{eventName:"workflow_template_onboarding_record_titles_input",eventProperties:{is_empty:0===r.target.value.length,input_index:t,step:"recordTitles",...(0,c().px)(o)}}})}),1e3),{recordTitles:s}=a,u=(0,f().HR)({template:i,isPlural:!1,isUpperCase:!1}),p=[],m=s.length;for(let r=0;r<m;r++)p.push((0,F.jsx)(bo,{style:{marginBottom:16},value:s[r],onChange:e=>{const o=e.target.value;s[r]=o,t({...a,recordTitles:s}),l({index:r,event:e})},placeholder:`Add a ${u}`,focusInitial:0===r},r));return(0,F.jsx)(F.Fragment,{children:p})}function bo(e){const t=(0,g().yK)((e=>({input:{backgroundColor:e.buttonBackground}})),[]),{style:o,...n}=e;return(0,F.jsx)(V().Z,{style:{...t.input,...o},format:V().B.Large,maxLength:yo,...n})}var wo=()=>o(506347);var So=()=>o(396136),Co=()=>o(625230),ko=()=>o(711608),_o=()=>o(47443),jo=()=>o(154186),To=()=>o(54033),Io=()=>o(842574),Mo=()=>o(614027),Po=()=>o(4909),Ro=()=>o(520849),Bo=()=>o(876822),Ao=()=>o(826955),Vo=()=>o(561280),Lo=()=>o(967092),Eo=()=>o(827973),Fo=()=>o(18748),Oo=()=>o(255577),No=()=>o(388284),Wo=()=>o(733641);const Ko=18,Zo=16;function Do(e){let{store:t,style:o,textStyle:n}=e;const r=(0,g().yK)((e=>({iconAndTitle:{display:"flex",alignItems:"center",gap:4,overflow:"hidden",...o},lockIcon:{width:Zo,height:Zo,margin:(Ko-Zo)/2,fill:e.icon.primary},text:{flexShrink:1,overflow:"hidden",...n}})),[o,n]),l=(0,i().VK)((()=>{if(t instanceof Ao().H2)return(0,uo().Q)(r.lockIcon);const e=null==t?void 0:t.getIcon();return t instanceof Ao().G?(0,F.jsx)(ao().Z,{icon:e,disabled:!0,isEmptyPage:!1,size:Ko}):t instanceof Ao().zX?(0,F.jsx)(Bt().p,{store:t,disabled:!0,size:Ko}):void(0,a().t1)(t)}),[t,r.lockIcon]);return(0,F.jsxs)("div",{style:r.iconAndTitle,children:[l,(0,F.jsx)(oe().q,{styleName:"UIRegular-14px/Regular",colorName:"primary",customStyles:r.text,children:t instanceof Ao().H2?(0,F.jsx)(y()._H,{id:"workflowTemplatesOnboardingModalLocationPicker.privateLocationName",defaultMessage:"Private"}):(0,F.jsx)(lo().Z,{store:t})})]})}function zo(e){let{currentParentStore:t,onSelect:r,onDismiss:l}=e;const s=(0,y().YB)(),[d,c]=(0,n.useState)(""),u=(0,n.useMemo)((()=>{const e=new(o(263184).default)("scrolledToTop");return e.setState(!0),e}),[]),p=(0,i().VK)((()=>{var e;const n=Bo().default.state.currentSpaceStore,r=Bo().default.state.currentSpaceViewStore,i=null===(e=Bo().default.state.currentUserStore)||void 0===e?void 0:e.id;if(!r||!n||!i)return[];const a=o(502175).Z.getJoinedTeamStores({userId:i,spaceStore:n}).filter((e=>e.canAddOrRemoveTopLevelPages())),l=(0,o(345918).Cx)(n)?a:[n,...a],s=l.findIndex((e=>e.id===t.id&&e.table===t.table));if(-1===s)return l;const d=l[s];return[d,...l.filter((e=>e!==d))]}),[t.id,t.table]),m=(0,i().VK)((()=>0===d.length?p:(0,o(619186).ZP)(d,p,(e=>e instanceof Ao().H2?s.formatMessage({id:"workflowTemplatesOnboardingModalLocationPickerMenu.private",defaultMessage:"Private"}):e instanceof Ao().zX?e.getName()??"":void(0,a().t1)(e)))),[d,p,s]),f=(0,n.useCallback)((e=>{u.setState(0===e.currentTarget.scrollTop)}),[u]),h=(0,n.useCallback)((e=>{const t=m.find((t=>t.id===e.key));t&&r(t)}),[m,r]),x=(0,g().yK)((e=>({checkIcon:{width:14,height:14},input:{marginTop:6},inputInner:{fontSize:12},lastMenuItem:{marginBottom:4},menuItemTextWrapper:{display:"flex",alignItems:"center",minHeight:28,marginLeft:10,marginRight:12},locationTitle:{gap:10},overfilteredLabel:{fill:e.text.secondary,paddingBottom:12}})),[]),v=(0,n.useMemo)((()=>[m.length>0?$o({filteredLocations:m,currentParentStore:t,onSelect:r,locationTitleStyle:x.locationTitle,menuItemTextWrapperStyle:x.menuItemTextWrapper,checkIconStyle:x.checkIcon}):Ho({intl:s,overfilteredLabelStyle:x.overfilteredLabel})]),[m,t,r,x.locationTitle,x.menuItemTextWrapper,x.checkIcon,x.overfilteredLabel,s]);return(0,F.jsx)(o(198829).Z,{menuType:o(352230).o.Popup,header:(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(o(740046).ZP,{style:x.input,inputStyle:x.inputInner,itemMarginLeft:8,itemMarginRight:8,focusInitial:!0,value:d,onChange:e=>c(e.target.value),placeholder:s.formatMessage({id:"workflowTemplatesOnboardingModalLocationPickerMenu.searchInputPlaceholder",defaultMessage:"Add to..."})}),(0,F.jsx)(Uo,{isScrolledToTopStore:u})]}),onClickOutside:l,maxHeight:210,width:252,onScroll:f,children:(0,F.jsx)(Oo().Z,{type:Oo().i.Vertical,initialFocus:0,onAccept:h,sections:v})})}function Uo(e){let{isScrolledToTopStore:t}=e;const o=(0,i().Kw)(t),n=(0,g().yK)((e=>({divider:{height:1,overflow:"visible",boxShadow:`inset 0 0 0 1px ${e.lightDividerColor}`,opacity:o?0:1,transition:"opacity 0.1s ease-in-out"}})),[o]);return(0,F.jsx)("div",{style:n.divider})}function Ho(e){let{intl:t,overfilteredLabelStyle:o}=e;return{key:"empty",items:[{key:"noMatchingLocationsItem",render:e=>(0,F.jsx)(Fo().ZP,{...e,title:t.formatMessage({id:"workflowTemplatesOnboardingModalLocationPickerMenu.noLocations",defaultMessage:"No matching teamspaces found"}),style:o}),action:()=>{}}],render:e=>(0,F.jsx)(No().Z,{...e,disableDesktopPadding:!0})}}function $o(e){let{filteredLocations:t,currentParentStore:o,onSelect:n,locationTitleStyle:r,menuItemTextWrapperStyle:i,checkIconStyle:a}=e;return{key:"section",items:t.map((e=>({key:e.id,render:t=>(0,F.jsx)(Eo().Z,{...t,textWrapperStyle:i,right:e.id===o.id&&e.table===o.table?(0,Wo().k)(a):void 0,title:(0,F.jsx)(Do,{store:e,style:r})}),action:()=>n(e)}))),render:e=>(0,F.jsx)(No().Z,{...e,disableDesktopPadding:!1})}}const Go=n.memo(zo);function qo(e){let{currentSelectedStore:t,onSelect:r}=e;const[i,a]=(0,n.useState)(!1),l=(0,n.useCallback)((e=>{r(e),a(!1)}),[r]),s=(0,n.useCallback)((()=>a(!1)),[]),d=(0,n.useCallback)((()=>a(!0)),[]),c=(0,g().yK)((e=>({originContainer:{display:"flex",alignItems:"center",gap:2,maxWidth:300},originText:{fontWeight:Oe().Ue.medium},addToLabel:{flexShrink:0},button:{width:"max-content",display:"flex",alignItems:"center",gap:4,padding:4,height:24,flexShrink:1,overflow:"hidden"},icon:{width:12,height:12,fill:e.text.tertiary}})),[]);return t?(0,F.jsxs)("div",{style:c.originContainer,children:[(0,F.jsx)(oe().q,{styleName:"UIRegular-14px/Medium",colorName:"secondary",customStyles:c.addToLabel,children:(0,F.jsx)(y()._H,{id:"workflowTemplatesOnboardingModalLocationPicker.addTo",defaultMessage:"Add to"})}),(0,F.jsx)(Lo().ZP,{open:i,popupType:Lo().kQ.Popup,placementToOrigin:q().Placement.Bottom,alignmentToOrigin:q().Alignment.Start,onDismiss:s,origin:(0,F.jsxs)(he().Z,{style:c.button,onClick:d,children:[(0,F.jsx)(Do,{store:t,textStyle:c.originText}),(0,o(615634).i)(c.icon)]}),render:()=>(0,F.jsx)(Go,{currentParentStore:t,onSelect:l,onDismiss:s})})]}):null}const Xo=n.memo(qo);var Yo=()=>o(745213),Qo=()=>o(847930);function Jo(e){let{modalState:t,searchQuery:o,handleSearchQueryChange:r,handleTopbarSizeChange:i,scrollerStore:a}=e;const s=(0,y().YB)(),d=t.parentStore.table===So().iU?void 0:t.parentStore,c=(0,n.useCallback)((e=>{u().default.setState({...t,parentStore:e})}),[t]),p=(0,n.useContext)(xe().gv),m=(0,g().yK)((e=>({topbar:{position:"absolute",top:0,zIndex:2,padding:"16px 24px",width:"100%",display:"grid",gap:24,gridTemplateColumns:`minmax(${d?123:0}px, 1fr) minmax(0, 296px) minmax(0, 1fr)`},closeButton:{width:18,height:18,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.accentColors.translucentGray[75],flexShrink:0},closeButtonHovered:{background:e.accentColors.translucentGray[200]},closeIcon:{width:10,color:e.icon.secondary,stroke:e.icon.secondary,strokeWidth:.5},locationPickerWrapper:{overflow:"hidden"},input:{width:"100%",padding:"8px 12px",background:e.accentColors.washGlass[0],borderRadius:10},divider:{position:"absolute",bottom:0,width:"100%"}})),[d]);return(0,F.jsx)(rt().n4,{onSizeChange:i,children:(0,F.jsxs)("div",{style:m.topbar,children:[(0,F.jsxs)(l().jX,{direction:"row",gap:16,align:"center-left",children:[(0,F.jsx)(jo().Z,{style:m.closeButton,hoveredStyle:m.closeButtonHovered,onClick:p,children:(0,we().U)(m.closeIcon)}),d&&(0,F.jsx)("div",{style:m.locationPickerWrapper,children:(0,F.jsx)(Xo,{currentSelectedStore:d,onSelect:c})})]}),(0,F.jsx)(V().Z,{focusInitial:!0,value:o,onChange:r,style:m.input,placeholder:s.formatMessage({id:"workflowTemplatesOnboardingModal.searchPlaceholder",defaultMessage:"Search"})}),(0,F.jsx)("div",{style:m.divider,children:(0,F.jsx)(To().Z,{type:"top",scrollerStore:a})})]})})}let en=0;function tn(e){let{modalState:t}=e;const o=(0,r().O7)(),[a,s]=(0,n.useState)(en),p=(0,i().qz)(void 0,Vo().Z),m=(0,n.useCallback)((e=>{var t;t=e.height,en=t,s(e.height)}),[]),f=t.collectionTemplatesSearchQuery??"";!function(e){let{environment:t,searchQuery:o}=e;const r=(0,Qe().Kt)(o,500,((e,t)=>e===t));(0,n.useEffect)((()=>{const{state:e}=u().default;if(!e.open)return;if(e.flowId!==on.flowId&&(on={query:"",flowId:e.flowId}),on.query===r)return;const o=on.query.length??0,n=r.length>0,i=o>0;(0,d().j)({environment:t,event:{eventName:"template_picker_search_changed",eventProperties:{...(0,c().px)(e),type:n?i?"search_edited":"search_started":"search_ended",shown_templates_for_search:n?(0,Yo().RZ)(r,(0,Yo().uO)()).map((e=>e.templateId)):void 0}}}),on={query:r,flowId:e.flowId}}),[t,r])}({environment:o,searchQuery:f});const h=(0,g().yK)((e=>{const t=`\n\t\t\tlinear-gradient(\n\t\t\t\tto bottom,\n\t\t\t\ttransparent ${a+1}px,\n\t\t\t\twhite ${a+1.1}px\n\t\t\t),\n\t\t\tlinear-gradient(\n\t\t\t\tto left,\n\t\t\t\tblack 16px,\n\t\t\t\ttransparent 17px\n\t\t\t)`;return{container:{maskImage:t,WebkitMaskImage:t,maskSize:"100% 100%",WebkitMaskSize:"100% 100%",maskPosition:"0 0",WebkitMaskPosition:"0 0",maskRepeat:"no-repeat",WebkitMaskRepeat:"no-repeat",display:"flex",flexDirection:"column",alignItems:"center",paddingTop:a},content:{maxWidth:"calc(100% - 32px)",paddingBottom:16}}}),[a]),y=(0,n.useCallback)((e=>{u().default.setState({...t,collectionTemplatesSearchQuery:e.target.value})}),[t]),x=(0,n.useCallback)((async e=>{const{title:n}=e??{},r=function(e){let{environment:t,parentStore:o,title:n}=e;const{currentSpaceStore:r,currentSpaceViewStore:i}=Bo().default.state;if(r&&i){if(o instanceof Ao().zX)return ko().mv({environment:t,from:"team_workflow_templates_onboarding_modal",spaceStore:r,spaceViewStore:i,teamStore:o,andNavigate:!0,appendOrPrepend:"append",title:n});if(o instanceof Ao().H2){const e="private",o="workflow_templates_onboarding_modal";return Co().j({name:"page_created",args:{type:e,from:o}}),ko().kC({environment:t,spaceStore:r,spaceViewStore:i,type:e,outlinerItemFrom:o,title:n})}}}({environment:o,parentStore:t.parentStore,title:n});if(!r)return;u().default.close({type:"accepted_new_page",newPageTitle:n});const i=await r;i&&(0,d().j)({environment:o,event:{eventName:"template_picker_empty_item_selected",eventProperties:{...(0,c().px)(t),type:"page",created_block_id:i.id,created_block_type:i.getType()}}})}),[o,t]),v=(0,ve().E)("workflow_container"),b=(0,n.useCallback)((e=>{var n;t.open&&(t.existingCollectionInfo&&!v||(0,Pe().Ex)({environment:o,parentStore:t.parentStore,collectionViewBlockStore:null===(n=t.existingCollectionInfo)||void 0===n?void 0:n.collectionViewBlockStore,title:null==e?void 0:e.title,onFinish:n=>{(0,d().j)({environment:o,event:{eventName:"template_picker_empty_item_selected",eventProperties:{...(0,c().px)(t),type:"database",created_block_id:n.id,created_block_type:n.getType()}}}),_o()._c({environment:o,store:n,visitType:Mo().vu.Link,pageVisitSource:wo().tY.Create}),u().default.close({type:"accepted_empty_collection",newCollectionTitle:null==e?void 0:e.title})}}))}),[o,t,v]),w=(0,n.useCallback)(((e,t)=>{(0,me().handleSelectTemplateFromOnboardingModal)({environment:o,template:e,analyticsArgs:t})}),[o]),S=(0,Po().y)("marketplace_workflow_templates_onboarding_modal",{forceOpenInNewTab:!0}),C=(0,n.useMemo)((()=>({onSelectTemplate:w,onAddEmptyPage:x,onAddEmptyDatabase:b,onMarketplaceClick:S})),[w,x,b,S]),k="collection_settings_create_view_source"!==(_=t.origin)&&"collection_settings_create_view_source_inline"!==_;var _;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Jo,{modalState:t,searchQuery:f,scrollerStore:p,handleSearchQueryChange:y,handleTopbarSizeChange:m}),(0,F.jsx)(Io().Z,{type:Ro().Z.Y,store:p,style:h.container,children:(0,F.jsx)(l().jX,{width:620,style:h.content,children:0===f.length?(0,F.jsx)(Qo().OW,{parentStore:t.parentStore,showEmptyPageButton:k,...C}):(0,F.jsx)(Yo().ep,{query:f,showEmptyPageButton:k,...C})})})]})}let on={query:"",flowId:void 0};o(492176),o(7961);var nn=()=>o(445520),rn=()=>o(364052);const an=(0,Z().CZ)("circle",{default:{loader:()=>o.e(13097).then(o.bind(o,413097))},small:{loader:()=>o.e(60030).then(o.bind(o,760030))},mini:{loader:()=>o.e(33061).then(o.bind(o,133061))},large:{loader:()=>o.e(40157).then(o.bind(o,812683))}});var ln=()=>o(589357),sn=()=>o(292518);function dn(e){const{placeholder:t,value:o,onChange:a,onSubmit:l,canPressEnter:s}=e,{store:d,setValue:c}=(0,T().Cl)({initialValue:o,onChange:a});(0,n.useEffect)((()=>{const e=d.getValue();o!==e&&c(o)}),[o,c,d]);const u=(0,r().O7)(),p=(0,y().YB)(),m=function(){const e=20,t=24;return(0,g().yK)((o=>({input:{display:"flex",maxWidth:"100%",flexFlow:"column",flexShrink:0,boxShadow:o.inputBoxShadow,backgroundColor:o.surface.elevated,borderRadius:16,overflow:"inherit",padding:"8px 8px 8px 12px",gap:"4px 0"},textWrapper:{minHeight:46,paddingRight:4,flexWrap:"wrap",flexGrow:99999,display:"flex",alignItems:"flex-start",minWidth:0},innerTextWrapper:{flex:"1 1 0%",display:"flex",gap:4,alignItems:"center",fontSize:14,padding:"2px 0",minWidth:0},textContainer:{maxWidth:"100%",width:"100%",flexGrow:1,alignSelf:"flex-end",maxHeight:240,overflow:"auto",minWidth:0},buttonWrapper:{minHeight:22,minWidth:60,display:"flex",justifyContent:"flex-end",alignItems:"center",flexGrow:1,flexShrink:0,paddingTop:2,paddingBottom:2,gap:8,margin:"0 0 0 auto"},stopIcon:{fill:o.icon.primary},icon:{height:e,width:e},button:{pointerEvents:"auto",height:Math.max(e,t),width:Math.max(e,t),borderRadius:"100%"}})),[])}(),f=(0,n.useContext)(xe().gv),x=(0,i().VK)((()=>d.getValue()),[d]),v=!(0,h().PgY)(x);!function(e){const{textStore:t,initialFocus:o}=e,r=(0,n.useCallback)((()=>{S().setSelectionAtEnd({store:t})}),[t]);(0,n.useEffect)((()=>{o&&r()}),[o,r])}({textStore:d,initialFocus:!0});const b=(0,n.useCallback)((e=>{if(e.target===e.currentTarget){const t=P().E.findEditableWithStore(d);t&&t.handleClick(e)}}),[d]);return(0,F.jsx)(k().Z,{debugName:"AiPromptInput",capture:!0,onEsc:f,children:(0,F.jsxs)("div",{className:j().Wh_,style:m.input,onClick:b,children:[(0,F.jsx)("div",{style:m.textWrapper,children:(0,F.jsx)("div",{style:m.innerTextWrapper,children:(0,F.jsx)(_().Z,{inPageFind:{type:"none"},style:m.textContainer,store:d,disabled:!1,disabledMentionTypes:{page:!0,bot:!0,team:!0,reminder:!0,date:!0,user:!0,group:!0,heading:!0,templateVariable:!0,formulaContextVariable:!0},placeholder:p.formatMessage(t),disableSlashCommands:!0,disableEmbedMenu:!0,disableEmojiCommands:!0,disableComment:!0,disableSelectAllBlocks:!0,disableSelectionDrag:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableSuggestEdit:!0,disableUpDownArrows:!0,disableEnter:!v||!s,onEnter:()=>{v&&s&&l()},pasteBehavior:"inline",onBlur:()=>{S().clear({environment:u})}})})}),(0,F.jsx)("div",{style:m.buttonWrapper,children:(0,F.jsx)(C().Z,{icon:I()._,onClick:()=>{},isBlue:v,disabled:!v,ariaLabel:"submit-ai-prompt",onMouseDown:e=>{e.preventDefault(),l()},style:m.button,iconStyle:m.icon})})]})})}const cn=(0,y().vU)({promptPlaceholder:{id:"setupGenerator.promptPlaceholder",defaultMessage:"Make a customer feedback tracker with priority levels, status, and assignee..."}}),un={duration:0},pn={duration:.7,ease:"anticipate"},mn={type:"spring",stiffness:150,damping:20,delay:1};function gn(){const e=(0,i().VK)((()=>(0,pe().getIsSetupGeneratorEnabled)()),[]),t=(0,n.useContext)(xe().gv),o=(0,i().VK)((()=>u().default.state),[]),r=(0,i().VK)((()=>o.open?o.setupGenerator:void 0),[o]),a=(0,i().VK)((()=>(null==r?void 0:r.store.state.isBusy)??!1),[r]);return r&&e?o.open?a?(0,F.jsx)(yn,{modalState:o,setupGenerator:r}):(0,F.jsx)(fn,{}):null:(0,F.jsx)(Cn,{onClickClose:t})}function fn(){const e=(0,y().YB)(),t=(0,i().VK)((()=>u().default.state),[]),o=(0,i().VK)((()=>{if(t.open)return t.setupGenerator}),[t]),r=(0,i().VK)((()=>null==o?void 0:o.store.state.prompt),[o]),a=(0,n.useCallback)((async()=>{if(!o)return;await o.submitPrompt({from:"initial-input"})&&(0,me().moveToNextOnboardingStep)()}),[o]),l=(0,i().VK)((()=>{var t;return null===(t=Bo().default.state.currentUserStore)||void 0===t?void 0:t.getDisplayName(e)}),[e]);return t.open&&o?(0,F.jsx)(hn,{currentUserName:l,prompt:r,onChange:o.setPrompt,onSubmit:a}):null}function hn(e){const{currentUserName:t,prompt:o,onChange:n,onSubmit:r}=e,a=(0,g().yK)((()=>({text:{textAlign:"center",textWrap:"balance"}})),[]),s=(0,i().VK)((()=>u().default.state),[]);return s.open?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)($t,{modalState:s}),(0,F.jsx)(l().jX,{width:"fill",height:"fill",align:"top-center",padding:"32px",children:(0,F.jsxs)(l().jX,{height:"fill",align:"center",gap:32,children:[(0,F.jsxs)(l().jX,{gap:12,align:"top-center",width:400,style:a.text,children:[(0,F.jsx)(m().E.div,{layoutId:"assistant-face",transition:un,layout:"position",children:(0,F.jsx)(ln().AssistantAnimatedFaceInner,{sizeVariant:"large",highLevelState:"idle",includeBoxShadow:!0})}),(0,F.jsx)(oe().q,{styleName:"UITitle-22px/Semibold",children:(0,F.jsx)(y()._H,{id:"setupGenerator.greeting",defaultMessage:"Hi {currentUserName}! Here to help. What do you want to build today?",values:{currentUserName:t}})})]}),(0,F.jsx)(l().jX,{direction:"column",gap:16,width:420,style:{marginBottom:42},children:(0,F.jsx)(dn,{placeholder:cn.promptPlaceholder,value:o,onChange:n,onSubmit:r,canPressEnter:!0})})]})})]}):null}function yn(e){const{modalState:t,setupGenerator:o}=e,r=(0,i().VK)((()=>{var e;return(null==o||null===(e=o.store.state)||void 0===e?void 0:e.progress)??{databases:{},statusLabel:{type:"default"},steps:[]}}),[o]),a=(0,n.useCallback)((()=>{null==o||o.stopGenerating()}),[o]),l=Object.values(r.databases).at(0),s=(null==l?void 0:l.databaseName)??"",d=(null==l?void 0:l.iconName)??"pencil";return(0,F.jsx)(xn,{collectionName:s,collectionIcon:`/icons/${d}_gray.svg`,progress:r,onClickStop:a,cornerButtonVariant:0!==t.currentStepIndex||r?"back":"close"})}function xn(e){const{collectionName:t,collectionIcon:o,progress:n,onClickStop:r,cornerButtonVariant:i}=e,a=null==n?void 0:n.statusLabel,s=(0,g().yK)((e=>({container:{borderRadius:12,border:`1px solid ${e.stroke.secondary}`,backgroundColor:"dark"===e.mode?e.popoverWaxPaperBackground:void 0,backgroundImage:`url(${Xe().Z.images.workflowTemplates.bgDotsPng})`,backgroundRepeat:"repeat",backgroundSize:"70px 70px",backgroundPosition:"0% 0%",backgroundBlendMode:"multiply",position:"absolute",userSelect:"none",inset:0,zIndex:10},header:{opacity:.6,paddingBottom:20,borderBottom:`1px solid ${e.stroke.primary}`},columns:{display:"grid",gridTemplateColumns:"3fr 2fr 2fr",gap:45},shimmer:{width:"50%",height:9,borderRadius:5},shimmerWide:{width:"100%",height:9,borderRadius:5}})),[]),d=(0,g().Fg)();return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Gt,{iconFn:"close"===i?we().U:be().W,onClick:r}),(0,F.jsx)(Nt,{sidebar:(0,F.jsxs)(l().jX,{direction:"column",gap:36,children:[(0,F.jsxs)(l().jX,{direction:"column",gap:12,children:[(0,F.jsx)(m().E.div,{layoutId:"assistant-face",layout:"position",transition:pn,children:(0,F.jsx)(ln().AssistantAnimatedFaceInner,{sizeVariant:"large",highLevelState:"writing",includeBoxShadow:!0})}),(0,F.jsx)(m().E.div,{initial:{opacity:0},animate:{opacity:1},transition:pn,children:(0,F.jsx)(ie,{statusLabel:a})})]}),(0,F.jsx)(m().E.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:mn,children:(0,F.jsx)(bn,{steps:(null==n?void 0:n.steps)??[]})})]}),preview:(0,F.jsx)(m().E.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:mn,style:{width:"100%",height:"100%",position:"relative"},children:(0,F.jsxs)(l().jX,{direction:"column",height:"fill",width:"fill",padding:"36px 38px",style:s.container,gap:30,children:[(0,F.jsxs)(l().jX,{direction:"row",align:"center-left",gap:12,height:50,style:s.header,children:[(0,F.jsx)(nn().Z,{icon:o,size:20,theme:d}),(0,F.jsx)(oe().q,{styleName:"UITitle-22px/Semibold",children:t})]}),(0,F.jsx)("div",{style:s.columns,children:Array.from({length:3}).map(((e,t)=>(0,F.jsxs)(l().jX,{direction:"column",gap:25,children:[(0,F.jsx)(v().Z,{style:s.shimmer}),Array.from({length:5}).map(((e,t)=>(0,F.jsx)(v().Z,{style:s.shimmerWide},t)))]},t)))})]})})})]})}function vn(e){const{status:t}=e,o=(0,g().yK)((()=>({loadingDotsContainer:{width:24,height:24,gap:3},loadingDot:{width:5,height:5}})),[]);switch(t){case"idle":return(0,F.jsx)($().y,{iconGroup:an,variantName:"large",colorName:"tertiary"});case"in_progress":return(0,F.jsx)(sn().Z,{isTriColored:!0,styleParentContainer:o.loadingDotsContainer,style:o.loadingDot});case"completed":return(0,F.jsx)($().y,{iconGroup:rn().F,variantName:"large",colorName:"tertiary"});default:(0,a().t1)(t)}}function bn(e){const{steps:t}=e,o=(0,g().yK)((e=>({separator:{width:1,height:12,background:e.stroke.primary}})),[]);return(0,F.jsx)(l().jX,{direction:"column",gap:2,children:t.map(((e,r)=>{const i=r===t.length-1;return(0,F.jsxs)(n.Fragment,{children:[(0,F.jsx)(Sn,{step:e}),i?void 0:(0,F.jsx)(l().jX,{width:24,align:"center",children:(0,F.jsx)("div",{style:o.separator})})]},r)}))})}const wn=(0,y().vU)({creatingDatabase:{id:"setupGenerator.progress.createDatabase",defaultMessage:"Creating database"},addingProperties:{id:"setupGenerator.progress.addProperties",defaultMessage:"Adding properties"},addingViews:{id:"setupGenerator.progress.addViews",defaultMessage:"Adding views"},addingPages:{id:"setupGenerator.progress.addPages",defaultMessage:"Adding pages"}});function Sn(e){const{step:t}=e,o=(0,y().YB)();let n;switch(t.type){case"createDatabases":n=o.formatMessage(wn.creatingDatabase);break;case"addProperties":n=o.formatMessage(wn.addingProperties);break;case"addViews":n=o.formatMessage(wn.addingViews);break;case"addPages":n=o.formatMessage(wn.addingPages);break;default:return null}return(0,F.jsxs)(l().jX,{direction:"row",align:"center-left",gap:6,children:[(0,F.jsx)(vn,{status:t.status}),(0,F.jsx)(oe().q,{styleName:"UIRegular-14px/Medium",colorName:"in_progress"===t.status?"primary":"tertiary",children:n})]})}function Cn(e){const{onClickClose:t}=e;return(0,F.jsxs)(F.Fragment,{children:[t?(0,F.jsx)(Gt,{iconFn:we().U,onClick:t}):null,(0,F.jsx)(l().jX,{height:"fill",width:"fill",align:"center",children:(0,F.jsx)(oe().q,{styleName:"UIRegular-14px/Regular",children:(0,F.jsx)(y()._H,{id:"setupGenerator.notAvailable",defaultMessage:"This feature is not available."})})})]})}var kn=()=>o(270315);function _n(){var e;const t=(0,i().Kw)(u().default),o=(0,r().O7)(),a=(0,i().VK)((()=>t.open&&t.collectionTemplate?(0,c().lq)(t):null),[t]),l=(0,n.useCallback)((e=>{u().default.updatePreviewCollectionViewTemplateId(e)}),[]);return a&&t.open?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Ht,{caption:(0,F.jsx)(y()._H,{id:"workflowTemplatesOnboardingModal.selectViews",defaultMessage:"Select how you prefer to see your {collectionName}",values:{collectionName:null===(e=t.collectionTemplate)||void 0===e?void 0:e.value.targetCollection.name}})}),(0,F.jsx)(jn,{toggleViewSelection:e=>{(0,me().toggleFeatureSelectionInPreview)({template:e,environment:o})},updatePreviewCollectionViewTemplateId:l,...a})]}):null}function jn(e){let{toggleViewSelection:t,updatePreviewCollectionViewTemplateId:o,...n}=e;const a=(0,r().O7)(),{collectionTemplate:l,userCustomizations:s}=n,u=(0,g().Fg)(),p=(0,i().VK)((()=>pe().globalWorkflowTemplates.allOfType({templateIds:l.value.templateItems.map((e=>e.pointer)),type:"collection_view"})),[l]),m=(0,i().VK)((()=>{const e=s.featureTemplateSelections.filter((e=>"collection_view"===e.template.type&&e.selected));return e.length>0?e[0].template.templateId:void 0}),[s]),f=(0,i().VK)((()=>1===s.featureTemplateSelections.filter((e=>e.selected&&"collection_view"===e.template.type)).length),[s]),h=(0,g().yK)((e=>({views:{display:"flex",flexDirection:"column",gap:12,padding:2},button:{display:"flex",width:"100%",flexDirection:"row",alignItems:"center",gap:8,justifyContent:"left",height:52,borderRadius:14,cursor:"pointer",fontSize:14,padding:16,lineHeight:"20px",color:e.text.primary,fontWeight:Oe().Ue.medium},viewName:{flexGrow:1,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},baseIconStyle:{flexShrink:0,height:20,width:20},overflowTooltip:{maxWidth:250}})),[]);return m?(0,F.jsx)("div",{style:h.views,children:p.map(((e,r)=>{const i=s.featureTemplateSelections.find((t=>t.template.templateId===e.templateId)),{name:l,type:m,format:g}=e.value,y=Boolean(null==i?void 0:i.selected),x="required"===(null==i?void 0:i.optionality)||f&&y,v=null==g?void 0:g.collection_view_icon;return(0,F.jsxs)(Yt,{isSelected:y,style:h.button,onClick:()=>{if(x)return;const r=!y,i=new Set(s.featureTemplateSelections.filter((e=>e.selected)).map((e=>e.template.templateId)));(0,d().j)({environment:a,event:{eventName:"workflow_template_onboarding_feature_select",eventProperties:{selecting:r?"selecting":"deselecting",previously_selected_feature_template_ids:[...i],feature_template_id:e.templateId,feature_template_type:e.type,step:"viewsSelection",...(0,c().px)(n)}}}),t(e);const l=n.previewCollectionViewTemplateId===e.templateId;if(r)o(e.templateId);else if(l){var u;const t=null===(u=p.find((t=>i.has(t.templateId)&&t.templateId!==e.templateId)))||void 0===u?void 0:u.templateId;o(t)}},children:[v?(0,F.jsx)(nn().Z,{theme:u,icon:v,style:{...h.baseIconStyle,...y&&{fill:u.text.uiBluePrimary}},size:h.baseIconStyle.width}):kn().aW[m]({...h.baseIconStyle,...y&&{fill:u.text.uiBluePrimary}}),(0,F.jsx)(se().s,{tooltipStyle:h.overflowTooltip,placement:q().Placement.Right,children:l})]},r)}))}):null}function Tn(){const e=(0,i().Kw)(u().default),t=(0,r().O7)(),o=(0,n.useCallback)((()=>{if(!e.open)return;const o=e.setupGenerator;o&&o.trackSessionEnded({reason:"dismissed"}),(0,d().j)({environment:t,event:{eventName:"workflow_template_onboarding_dismissed",eventProperties:{...(0,c().px)(e),step:(0,c().IA)(e),dismissed_by:"click_outside"}}})}),[e,t]),a=(0,i().VK)((()=>e.open?(0,c().IA)(e):void 0),[e]),p=(0,n.useCallback)((()=>{u().default.close({type:"canceled"})}),[]),m=(0,n.useMemo)((()=>({width:{type:"fixed",length:1e3},height:{type:"fixed",length:650}})),[]);return a&&e.open?(0,F.jsx)(s().c,{isOpen:!0,areaConstraint:m,onDismiss:o,onClosed:p,backgroundAppearance:"wash",render:e=>{let{sizeRange:t}=e;return(0,F.jsx)(l().jX,{style:t,children:(0,F.jsx)(In,{currentModalStep:a})})}}):null}function In(e){let{currentModalStep:t}=e;const o=(0,i().VK)((()=>u().default.state),[]);if(!o.open)return null;switch(t){case"templateSelection":return(0,F.jsx)(tn,{modalState:o});case"setupGenerator":return(0,F.jsx)(gn,{});case"intro":return(0,F.jsx)(Wt,{children:(0,F.jsx)(mo,{})});case"features":return(0,F.jsx)(Wt,{children:(0,F.jsx)(Qt,{})});case"recordTitles":return(0,F.jsx)(Wt,{children:(0,F.jsx)(xo,{})});case"viewsSelection":return(0,F.jsx)(Wt,{children:(0,F.jsx)(_n,{})});default:(0,a().t1)(t)}}},745213:(e,t,o)=>{o.d(t,{ep:()=>k,RZ:()=>j,uO:()=>_});o(241792);var n=o(667294),r=()=>o(142735),i=()=>o(846550),a=()=>o(780741),l=()=>o(619186),s=()=>o(788860),d=()=>o(513670),c=()=>o(255577),u=()=>o(661641),p=()=>o(388284),m=()=>o(292832),g=()=>o(320808),f=()=>o(619288),h=()=>o(499819),y=()=>o(281236),x=()=>o(212493),v=()=>o(641506),b=o(785893);const w=n.forwardRef(((e,t)=>{const{icon:n,label:r,description:a,...l}=e,s=(0,i().yK)((e=>({button:{width:"100%",borderRadius:12,margin:0,...(0,v().x6)({width:1,color:e.stroke.input})},hovered:{background:e.modalBackground,...(0,v().x6)({width:2,color:e.stroke.uiBlueSecondary})},pressed:{background:e.modalBackground,...(0,v().x6)({width:2,color:e.stroke.uiBluePrimary})},templateIcon:{marginTop:a?2:0},enterIcon:{width:16,justifySelf:"end",color:e.icon.tertiary}})),[a]);return(0,b.jsx)(o(827973).Z,{...l,buttonStyle:s.button,hoveredStyle:s.hovered,pressedStyle:s.pressed,itemMarginLeft:0,itemMarginRight:0,ref:t,title:(0,b.jsxs)(x().jX,{direction:"row",align:a?"top-left":"center-left",gap:12,padding:"12px 14px",children:[(0,b.jsx)("div",{style:s.templateIcon,children:n}),(0,b.jsxs)(x().jX,{gap:4,children:[(0,b.jsx)(u().q,{styleName:"UIRegular-14px/Medium",children:r}),a&&(0,b.jsx)(u().q,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:a})]}),l.focused&&(0,o(842595).U)(s.enterIcon)]})})}));w.displayName="SearchResultButton";var S=()=>o(847930);function C(e){const{template:t,label:o,description:n}=e;return(0,b.jsx)(w,{icon:(0,b.jsx)(h().l,{template:t,size:18}),label:o??t.value.targetCollection.name,description:n??t.description,...e})}function k(e){let{query:t,onSelectTemplate:o,onAddEmptyPage:l,onAddEmptyDatabase:h,onMarketplaceClick:x,showEmptyPageButton:v}=e;const k=(0,r().VK)((()=>(0,y().getIsSetupGeneratorEnabled)()),[]),T=(0,i().yK)((e=>({optionIcon:{height:16,width:"auto",color:e.icon.secondary},section:{gap:8,padding:"0 0 8px 0"},sectionTitle:{padding:"16px 0 0 0",marginTop:0,marginBottom:4}})),[]),I=function(e){const t=(0,r().VK)((()=>_()),[]);return(0,n.useMemo)((()=>j(e,t)),[e,t])}(t),M=(0,r().VK)((()=>y().globalWorkflowTemplates.fromIdOfType({templateId:a()._q,type:"collection"})),[]),P=I.map((e=>({key:e.templateId,render:t=>{let{ref:o,...n}=t;return(0,b.jsx)(C,{template:e,...n})},action:()=>o(e,{type:"suggested_template",allOrderedTemplateIds:I.map((e=>e.templateId))})}))),R=(0,n.useMemo)((()=>k?{key:a()._q,render:e=>{let{ref:o,...n}=e;return(0,b.jsx)(C,{template:M,label:(0,b.jsx)(s()._H,{id:"workflowTemplatesOnboardingModal.searchResults.buildWithAiLabel",defaultMessage:"Build “{searchQuery}” with AI",values:{searchQuery:t}}),description:(0,b.jsx)(s()._H,{id:"workflowTemplatesOnboardingModal.searchResults.buildWithAiDescription",defaultMessage:"Use AI to generate a tailored setup"}),...n})},action:()=>o(M,{type:"ai_generated_template"})}:void 0),[k,M,t,o]),B=(0,n.useMemo)((()=>(0,d().oA)([v?{key:"new-page",render:e=>(0,b.jsx)(w,{icon:(0,m().a)(T.optionIcon),label:(0,b.jsx)(s()._H,{id:"workflowTemplatesOnboardingModal.searchResults.newPage",defaultMessage:"New “{searchQuery}” page",values:{searchQuery:t}}),...e}),action:()=>l({title:t})}:void 0,{key:"new-database",render:e=>(0,b.jsx)(w,{icon:(0,g().d)(T.optionIcon),label:(0,b.jsx)(s()._H,{id:"workflowTemplatesOnboardingModal.searchResults.newDatabase",defaultMessage:"New “{searchQuery}” database",values:{searchQuery:t}}),...e}),action:()=>h({title:t})},{key:"marketplace",render:e=>(0,b.jsx)(w,{icon:(0,f().E)(T.optionIcon),label:S().ly,...e}),action:e=>x(e.event)}])),[v,T.optionIcon,t,l,h,x]),A=(0,n.useMemo)((()=>[{key:"collection-templates",items:(0,d().oA)([...P,R]),render:e=>(0,b.jsx)(p().Z,{title:(0,b.jsx)(u().q,{styleName:"UIRegular-14px/Medium",colorName:"secondary",children:(0,b.jsx)(s()._H,{id:"workflowTemplatesOnboardingModal.searchResults.topResults",defaultMessage:"Top results"})}),style:T.section,desktopTitleStyle:T.sectionTitle,mobileTitleStyle:T.sectionTitle,...e})},{key:"more-options",items:B,render:e=>(0,b.jsx)(p().Z,{title:(0,b.jsx)(u().q,{styleName:"UIRegular-14px/Medium",colorName:"secondary",children:(0,b.jsx)(s()._H,{id:"workflowTemplatesOnboardingModal.searchResults.moreOptions",defaultMessage:"More options"})}),style:T.section,desktopTitleStyle:T.sectionTitle,mobileTitleStyle:T.sectionTitle,...e})}]),[P,R,B,T]);return(0,b.jsx)(c().Z,{initialFocus:0,type:c().i.Vertical,sections:A})}function _(){const e=d().jj([...a().pA,...Object.values(a().SN).flat()]);return y().globalWorkflowTemplates.allOfType({templateIds:e,type:"collection"})}function j(e,t){return(0,l().ZP)(e,t,(e=>`${e.value.targetCollection.name} ${e.description}`),{minThreshold:l().T6,normalizeFuzzyScore:!0})}},847930:(e,t,o)=>{o.d(t,{Nd:()=>j,OW:()=>R,ly:()=>P});o(241792);var n=o(667294),r=()=>o(219727),i=()=>o(142735),a=()=>o(846550),l=()=>o(780741),s=()=>o(788860),d=()=>o(513670),c=()=>o(114104),u=()=>o(745740),p=()=>o(661641),m=()=>o(92175),g=()=>o(594546),f=()=>o(660065),h=()=>o(383507),y=()=>o(292832),x=()=>o(320808),v=()=>o(619288),b=()=>o(877727),w=()=>o(281236),S=()=>o(97162),C=()=>o(533808),k=()=>o(184441),_=o(785893);const j=12,T={};function I(e){let{iconFn:t,iconColorName:o,label:n,onClick:r}=e;const i=(0,a().yK)((e=>({button:{padding:"16px 18px",borderRadius:j,borderWidth:1,borderStyle:"solid",borderColor:"dark"===e.mode?e.stroke.secondary:e.stroke.primary},hovered:{background:e.buttonHoveredBackground,borderColor:e.accentColors.translucentGray[100]},icon:{height:19,width:"auto",color:o?e.icon[o]:void 0,marginBottom:8}})),[o]);return(0,_.jsxs)(u().Z,{style:i.button,hoveredStyle:i.hovered,onClick:r,children:[(0,_.jsx)("div",{children:t(i.icon)}),(0,_.jsx)(p().q,{styleName:"UIRegular-14px/Medium",children:n})]})}const M=16,P=(0,_.jsx)(s()._H,{id:"workflowTemplatesOnboardingModal.button.marketplace",defaultMessage:"More in Marketplace"});function R(e){let{parentStore:t,onAddEmptyPage:o,onAddEmptyDatabase:u,onSelectTemplate:j,onMarketplaceClick:R,showEmptyPageButton:B}=e;const A=(0,r().O7)(),V=(0,i().VK)((()=>k().default.getShouldShowExpandedTemplateList()),[]),L=(0,i().VK)((()=>(0,b().fo)(A)),[A]),E=(0,S().l)({parentStore:t,returnAllTemplates:V}),F=(0,n.useMemo)((()=>V?E:function(e){let{arr:t,min:o}=e;if(t.length<=o)return[...t];return t.slice(0,2*Math.floor(t.length/2))}({arr:E,min:1})),[E,V]),O=(0,i().VK)((()=>(0,w().getIsSetupGeneratorEnabled)()),[]),N=(0,i().VK)((()=>!V&&(0,b().fo)(A)),[V,A]),W=(0,n.useCallback)((()=>{k().default.setShouldShowExpandedTemplateList(!0),k().default.state.open&&(0,g().j)({environment:A,event:{eventName:"template_picker_show_more_templates_clicked",eventProperties:(0,C().px)(k().default.state)}})}),[A]),K=(0,a().yK)((e=>({container:{width:"100%",maxWidth:560+M,alignSelf:"center"},basicButtonGrid:{display:"grid",gridTemplateColumns:`repeat(auto-fit, minmax(calc((100% - ${2*M}px) / 3), 1fr))`,maxWidth:"100%",gap:M,marginTop:M,marginBottom:2*M},templateButtonGrid:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:M,marginTop:18},showMoreButton:{marginTop:M,height:32,paddingLeft:12,paddingRight:12},marketplaceButton:{padding:"6px 8px 6px 6px",height:32,marginTop:M},marketplaceIcon:{height:19,width:"auto",color:e.icon.secondary,marginRight:10},arrowRightIcon:{height:10,width:"auto",color:e.icon.secondary,marginLeft:6}})),[]);(0,n.useEffect)((()=>{const{state:e}=k().default;e.open&&void 0!==e.flowId&&!T[e.flowId]&&((0,g().j)({environment:A,event:{eventName:"template_picker_opened",eventProperties:{collection_template_ids_shown:F.map((e=>e.templateId)),...(0,C().px)(e)}}}),T[e.flowId]=!0)}),[F,A]);const Z=(0,n.useCallback)((()=>{j(w().globalWorkflowTemplates.fromIdOfType({templateId:l()._q,type:"collection"}),{type:"ai_generated_template"})}),[j]),D=(0,n.useCallback)((e=>{j(e,{type:"suggested_template",allOrderedTemplateIds:F.map((e=>e.templateId))})}),[j,F]),z=(0,d().oA)([B?(0,_.jsx)(I,{iconFn:y().a,iconColorName:"secondary",label:(0,_.jsx)(s()._H,{id:"workflowTemplatesOnboardingModal.button.emptyPage",defaultMessage:"Empty page"}),onClick:o},"emptyPage"):void 0,(0,_.jsx)(I,{iconFn:x().d,iconColorName:"secondary",label:(0,_.jsx)(s()._H,{id:"workflowTemplatesOnboardingModal.button.emptyDatabase",defaultMessage:"Empty database"}),onClick:u},"emptyDatabase"),O?(0,_.jsx)(I,{iconFn:h().Q,label:(0,_.jsx)(s()._H,{id:"workflowTemplatesOnboardingModal.button.buildWithAi",defaultMessage:"Build with AI"}),onClick:Z},"buildWithAi"):void 0]);return(0,_.jsxs)("div",{style:K.container,children:[(0,_.jsx)("div",{style:K.basicButtonGrid,children:z}),(0,_.jsx)(p().q,{styleName:"UIRegular-14px/Medium",colorName:"secondary",children:(0,_.jsx)(s()._H,{defaultMessage:"Suggested",id:"workflowTemplatesOnboardingModal.templateSelection.heading"})}),(0,_.jsx)("div",{style:K.templateButtonGrid,children:F.map(((e,t)=>L?(0,_.jsx)(c().tx,{template:e,onSelect:D,index:t},e.templateId):(0,_.jsx)(c().P$,{template:e,onSelect:D},e.templateId)))}),N?(0,_.jsx)(m().Z,{style:K.showMoreButton,onClick:W,children:(0,_.jsx)(p().q,{styleName:"UIRegular-14px/Medium",colorName:"secondary",children:(0,_.jsx)(s()._H,{id:"workflowTemplatesOnboardingModalSelectionLanding.seeMore",defaultMessage:"More templates"})})}):(0,_.jsxs)(m().Z,{style:K.marketplaceButton,onClick:R,children:[(0,v().E)(K.marketplaceIcon),(0,_.jsx)(p().q,{styleName:"UIRegular-14px/Medium",colorName:"secondary",children:P}),(0,f().r)(K.arrowRightIcon)]})]})}},184441:(e,t,o)=>{o.d(t,{default:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1,isShowingLoadingState:!1}}updateUserCustomizations(e,t){this.state.open&&this.state.collectionTemplate&&this.setState({...this.state,userCustomizations:{...this.state.userCustomizations,[e]:t}})}updateCollectionTemplate(e){this.state.open&&this.state.collectionTemplate&&this.setState({...this.state,collectionTemplate:e})}updatePreviewCollectionViewTemplateId(e){this.state.open&&this.state.collectionTemplate&&this.setState({...this.state,previewCollectionViewTemplateId:e})}getParentStore(){return this.state.open?this.state.parentStore:void 0}getShouldShowExpandedTemplateList(){return this.state.open&&this.state.shouldShowExpandedTemplateList}setShouldShowExpandedTemplateList(e){this.state.open&&this.setState({...this.state,shouldShowExpandedTemplateList:e})}close(e){var t,o;this.state.open&&(null===(t=(o=this.state).onClose)||void 0===t||t.call(o,e),this.setState({open:!1,isShowingLoadingState:!1}))}reset(){this.setState(this.getInitialState())}}const r=new n;(0,o(947115).exposeDebugValue)("InitializeWorkflowTemplateModalStore",r);const i=r},912203:(e,t,o)=>{o.d(t,{$M:()=>h,GQ:()=>S,Jy:()=>_,LF:()=>k,NO:()=>m,Of:()=>j,SF:()=>u,TX:()=>w,XO:()=>y,Y_:()=>c,Ym:()=>f,bD:()=>v,cO:()=>p,fo:()=>C,rR:()=>g});o(267602),o(653476),o(228244);var n=()=>o(513670),r=()=>o(696459),i=()=>o(226413),a=()=>o(109477),l=()=>o(455222),s=()=>o(305580);(0,r().AO)((e=>(0,r().$K)(e)&&(0,r().$K)(e.target)&&(0,r().$K)(e.external_bot_id)?{true:{external_bot_id:e.external_bot_id,target:e.target}}:{false:e}));const d={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1},c={checkbox:[{type:"checkbox"}],date:[{type:"date"}],email:[{type:"text"}],multi_select:[{type:"text"},{of:{type:"text"},type:"array"}],number:[{type:"number"}],person:[{type:"person"},{of:{type:"person"},type:"array"}],phone_number:[{type:"text"}],relation:[{type:"block"},{of:{type:"block"},type:"array"}],select:[{type:"text"},{of:{type:"text"},type:"array"}],status:[{type:"text"},{of:{type:"text"},type:"array"}],text:void 0,title:void 0,url:[{type:"text"}]};function u(e){return Boolean(d[e.type]&&!(0,i().NK)(e)&&(!(0,i().qQ)(e)||void 0===(0,i().q3)(e)))}function p(e){const{collectionFormat:t,collectionSchema:o,filter:l,sort:d,sourcePropertyIds:c}=e,p=(c??(0,r().Yd)(o)).filter(((t,n,r)=>{const a=o[t];return!(!a||!u(a))&&(("relation"!==a.type||!e.restrictCrossSpace||!(0,i().Qh)(e.spaceId,a))&&(!l||l([t,a],n,o)))}));if(0===p.length)return[];if(!t||!1===d)return p;const m=(0,s().i)(t,o,void 0,a().j5.Page).collection_page_properties||[];return n().MR(p,(e=>m.findIndex((t=>t.property===e))))}function m(e){const{collectionFormat:t,collectionSchema:o,sort:l}=e,d=(0,r().Yd)(o).filter(((e,t,n)=>{const r=o[e];return!(!r||!(0,i().U8)(r))}));if(0===d.length)return[];if(!t||!1===l)return d;const c=(0,s().i)(t,o,void 0,a().j5.Page).collection_page_properties||[];return n().MR(d,(e=>c.findIndex((t=>t.property===e))))}function g(e){return e.type===l().$E.InvalidCharacter?{type:e.type,character:e.character}:e.type===l().$E.TokenExpected?{type:e.type,token:e.token}:e.type===l().FY.MissingSchemaPropertyOnThisRow||e.type===l().FY.MissingSchemaPropertyOnCollection?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===l().FY.ThisRowBlockPropertyMismatchCollection?{type:e.type,thisRowCollection:e.thisRowCollection}:e.type===l().FY.MissingContextVariable?{type:e.type,valueId:e.valueId}:e.type===l().FY.FunctionCallTooFewArguments?{type:e.type,numArguments:e.numArguments}:e.type===l().FY.FunctionCallUnexpectedArgument?{type:e.type,parameterIndex:e.parameterIndex}:e.type===l().FY.FunctionCallArgumentWrongType?{type:e.type,argumentType:e.argumentType,libraryFunctionName:e.libraryFunction.name,parameterIndex:e.parameterIndex}:e.type===l().FY.MissingDataDependencyBlock?{type:e.type,blockPointer:e.blockPointer}:e.type===l().FY.MissingDataDependencyPerson?{type:e.type,personPointer:e.personPointer}:e.type===l().FY.MemberPropertyMismatchCollection?{type:e.type,blockCollection:e.blockCollection}:e.type===l().FY.DownstreamParseFailure?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===l().FY.ContextVariableWrongType?{type:e.type,valueId:e.valueId,expectedType:e.expectedType,resultType:e.resultType}:e.type===l().FY.DisallowedValueType?{type:e.type,expressionValue:e.expressionValue,allowedValueTypes:e.allowedValueTypes}:e.type===l().FY.LibraryFunctionExecutionError?{type:e.type,error:e.error,libraryFunctionName:e.libraryFunction.name}:{type:e.type}}const f={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,button:!1,file:!1,verification:!1,auto_increment_id:!1,created_by:!1,created_time:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1};function h(e){return Boolean(f[e.type])}function y(e){const{collectionFormat:t,collectionSchema:o,filter:l,sort:d}=e,c=(0,r().Yd)(o).filter(((e,t,n)=>{var r;const a=o[e];return!(!a||!f[a.type])&&((!(0,i().qQ)(a)||null===(r=(0,i().q3)(a))||void 0===r||!r.auto_update_on_edit)&&(!l||l([e,a],t,o)))}));if(0===c.length)return[];if(!t||!1===d)return c;const u=(0,s().i)(t,o,void 0,a().j5.Page).collection_page_properties||[];return n().MR(c,(e=>u.findIndex((t=>t.property===e))))}const x={checkbox:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,date:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1};function v(e){return x[e.type]}const b={checkbox:!0,created_by:!0,created_time:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,last_edited_by:!0,last_edited_time:!0,auto_increment_id:!1,button:!1,file:!1,formula:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1};function w(e){return b[e.type]}function S(e){return 0===e}function C(e){return function(e){return"button_block"===e||"button_property"===e}(e)}function k(e){const{property:t,collectionSchema:o}=e;return!!o&&!o[t]}function _(e){const{collectionSchema:t,property:o,type:n}=e,r=null==t?void 0:t[o];return!r||("action"===n?!u(r):!f[r.type])}function j(e){let{automationTrigger:t,collectionSchema:o}=e;if("event"===(null==t?void 0:t.type)||"notification_event"===(null==t?void 0:t.type)){const{pagesAdded:e,pagePropertiesEdited:n,source:i}=t.event;if(void 0===i)return!1;const a="some"===n.type&&n.some,l="all"===n.type&&n.all;if((a||l||[]).some((e=>k({collectionSchema:o,property:e.property})||_({collectionSchema:o,property:e.property,type:"trigger"}))))return!1;const s="some"===n.type&&(!(0,r().$K)(n.some)||0===n.some.length),d="all"===n.type&&(!(0,r().$K)(n.all)||0===n.all.length);if(!e&&("none"===n.type||s||d))return!1}else{if("recurrence"!==(null==t?void 0:t.type))return!1;if(!t.recurrence)return!1}return!0}},157955:(e,t,o)=>{o.r(t),o.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>M,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>S,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>w,MAX_RECURRENCE_INTERVAL:()=>h,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>y,RRULE_WEEKDAYS_MAP:()=>f,convertFromUnpersistedRecurrenceConfig:()=>B,convertToUnpersistedRecurrenceConfig:()=>P,getFormattedEndCondition:()=>I,getFormattedNextRecurrenceTime:()=>T,getNextDateUtc:()=>j,getRecurrenceAfter:()=>k,isRunningBetweenMidnightAnd3AM:()=>_,isValidRecurrenceInterval:()=>x,isValidRecurrenceNumberOfRuns:()=>v,rruleFromRecurrence:()=>b,templateAncestorsViolateRecurrenceNesting:()=>C});o(267602),o(653476),o(241792);var n=()=>o(730120);o(670560);function r(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),n=1;n<t;n++)o[n-1]=arguments[n];if(0===o.length)return e.map((e=>[e]));const i=[];for(const a of e)i.push(...r(o[0],...o.slice(1)).map((e=>[a,...e])));return i}var i=()=>o(696459),a=()=>o(326966),l=()=>o(803021),s=()=>o(646574),d=()=>o(998411),c=()=>o(578292);class u extends(()=>o(484885))().Ci{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var p=()=>o(494616);const m=(0,o(788860).vU)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12–3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),g={day:u.DAILY,week:u.WEEKLY,month:u.MONTHLY,year:u.YEARLY},f={MO:u.MO,TU:u.TU,WE:u.WE,TH:u.TH,FR:u.FR,SA:u.SA,SU:u.SU},h=99,y=999;function x(e){return(0,a().hj)(e)&&Number.isInteger(e)&&e>0&&e<=h}function v(e){return(0,a().hj)(e)&&Number.isInteger(e)&&e>0&&e<=y}function b(e){const{start_date:t,frequency:o,interval:n,weekdays:a,timezone:s,hour:d,minute:c}=e,p="week"===o&&a?a.map((e=>f[e])):void 0,m={};return(0,i().$K)(e.end_condition)&&("date"===e.end_condition.type?m.until=(0,l().pd)(e.end_condition.end_at):"number"===e.end_condition.type?m.count=e.end_condition.number_of_occurrences:(0,i().t1)(e.end_condition)),"month"===e.frequency&&(0,i().$K)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?m.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?m.byweekday=r(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((e=>{let[t,o]=e;return f[t].nth(o)})):(0,i().t1)(e.monthly_restriction)),new u({freq:g[o],dtstart:(0,l().pd)(t),interval:n,byweekday:p,tzid:s,byhour:d??0,byminute:c??0,bysecond:0,...m})}const w=1,S=1;function C(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const o=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),n=e.length,r=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,i=n>w,a=o.length>=S;return{violatesConstraint:i||a,templateNestingExceedsMaxDepth:i,ancestorHasDailyTemplate:a,nestedDepthOfAutomationAncestors:n,immediateAncestorRecurrenceType:r}}function k(e){const{recurrence:t,afterDate:o}=e;if((0,p().nA)(t)){const e=(0,l().kq)(o);return t.start_date>=e?new Date(t.start_date):void 0}{const e=b(t).after((0,l().pd)(o));if(!e)return;return(0,l().YL)(e)}}function _(e){return 0===e.hour||1===e.hour||2===e.hour}function j(e){return b(e).after((0,l().pd)((0,l().Jh)()))||void 0}function T(e){const{recurrence:t,intl:o}=e,r=j(B(t));if(!r)return;const i=_(t),a=n().ou.fromJSDate(r).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,c().E2)(o)).setZone(t.timezone),l=(0,s().p6)({date:a,dateFormat:"relative",allowRelativeDates:!0,intl:o,shortenDate:!0});if(i)return o.formatMessage(m.dateBetweenMidnightAnd3AM,{date:l});{let e=a.toLocaleString(n().ou.TIME_SIMPLE);return t.timezone!==(0,d().r)()&&(e+=` ${a.toFormat("ZZZZ")}`),o.formatMessage(m.dateAtTime,{date:l,time:e})}}function I(e,t){return(0,i().$K)(e)?"number"===e.type?t.formatMessage(m.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,s().p6)({date:n().ou.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,i().t1)(e):t.formatMessage(m.noEndCondition)}const M=100;function P(e){return{...e,start_date:(0,l().kq)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,l().kq)(e.end_condition.end_at)}:(0,i().t1)(e.end_condition):void 0}}function R(e,t){const o=n().ou.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,l().Jh)(o.toJSDate())}}function B(e){return{...e,start_date:(0,l().Jh)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?R(e,e.end_condition):(0,i().t1)(e.end_condition):void 0}}},473759:(e,t,o)=>{o.d(t,{v:()=>n});const n=(0,o(827282).CZ)("arrowCounterClockwise",{default:{loader:()=>o.e(26518).then(o.bind(o,126518))},small:{loader:()=>o.e(98759).then(o.bind(o,598759))},mini:{loader:()=>o.e(51079).then(o.bind(o,451079))},large:{loader:()=>o.e(50632).then(o.bind(o,432680))}})},766072:(e,t,o)=>{o.d(t,{X:()=>n});const n=(0,o(827282).CZ)("pencilLine",{default:{loader:()=>o.e(47736).then(o.bind(o,547736))},small:{loader:()=>o.e(91525).then(o.bind(o,591525))},mini:{loader:()=>o.e(60594).then(o.bind(o,160594))},large:{loader:()=>o.e(36121).then(o.bind(o,936121))}})},519454:(e,t,o)=>{o.d(t,{R:()=>r});o(667294);var n=o(785893);const r=(0,o(827282).IU)("pencil",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M3.926 13.307H14.11c.183 0 .34-.066.472-.199a.644.644 0 00.198-.471.652.652 0 00-.198-.479.644.644 0 00-.472-.198H5.272l-1.346 1.347zm-.704-.636l7.683-7.684-1.312-1.319-7.69 7.684-.67 1.606c-.037.1-.017.191.06.273.083.082.174.105.274.069l1.655-.63zm8.34-8.326l.738-.732c.182-.187.278-.376.287-.567.009-.192-.068-.374-.232-.547l-.267-.267c-.169-.168-.351-.246-.547-.232-.196.014-.385.11-.567.287l-.739.732 1.327 1.326z"})})},667932:(e,t,o)=>{o.d(t,{KD:()=>s,_P:()=>c,l2:()=>u,x9:()=>d});o(267602),o(653476),o(241792);var n=()=>o(543172),r=()=>o(210349),i=()=>o(639708),a=()=>o(712185);const l={page_main:[{id:"cover",type:"cover"},{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyIds:[]},{id:"properties",type:"properties"},{id:"discussions",type:"discussions"},{id:"editor",type:"editor"}],page_details:[],form_layout_schema:[]},s={page_main:[{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyIds:[]},{id:"editor",type:"editor"}],page_details:[],form_layout_schema:[]};function d(e){return(0,a().Dl)({modulesByArea:l,collectionSchema:null==e?void 0:e.collectionSchema,collectionFormat:null==e?void 0:e.collectionFormat})}function c(){return{page_layout_schema:(0,a().L0)(l.page_main).map((e=>{if(!(0,i().zP)(e))return(0,r().T)(e)?{...e,id:(0,n().ZP)()}:e})).filter((e=>void 0!==e)),page_info_layout_schema:(0,a().L0)(l.page_details).map((e=>{if(!(0,i().zP)(e))return(0,r().T)(e)?{...e,id:(0,n().ZP)()}:e})).filter((e=>void 0!==e)),form_layout_schema:void 0}}function u(e,t){const o=void 0===t?[{id:(0,n().ZP)(),type:"formQuestion",formQuestionId:e}]:[{id:(0,n().ZP)(),type:"formQuestion",formQuestionId:e},{id:(0,n().ZP)(),type:"formQuestion",formQuestionId:t}];return{page_layout_schema:void 0,page_info_layout_schema:void 0,form_layout_schema:[{id:(0,n().ZP)(),type:"cover"},{id:(0,n().ZP)(),type:"formTitle"},...o,{id:(0,n().ZP)(),type:"formSubmit"}]}}},210349:(e,t,o)=>{o.d(t,{T:()=>a,s:()=>i});const n={normalizedTitleWithIcon:!0,properties:!0,property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,views:!0,viewsMain:!0,relationsGroup:!0,formQuestion:!0,placeholder:!0,deleted_property:!1,cover:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,transcript:!1,formTitle:!1,formSubmit:!1},r={properties:!0,property:!0,relationsGroup:!0,formQuestion:!0,placeholder:!0,titleWithIcon:!0,cover:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,transcript:!1,formTitle:!1,formSubmit:!1,views:!0,viewsMain:!0,collectionView:!0,collectionViewV2:!0};function i(e,t){return!("editor"!==e.type||null==t||!t.isLayoutViewModuleEnabled||null!=t&&t.isLayoutViewModuleNextEnabled)||n[e.type]}function a(e){return r[e.type]}},6623:(e,t,o)=>{o.d(t,{Fo:()=>i,m7:()=>a});const n={property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,deleted_property:!1,relationsGroup:!0,formSubmit:!0,formQuestion:!0,formTitle:!0,placeholder:!0,transcript:!0,cover:!1,normalizedTitleWithIcon:!1,properties:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,views:!0,viewsMain:!1},r={property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,deleted_property:!1,formSubmit:!1,formQuestion:!1,formTitle:!1,placeholder:!1,transcript:!1,cover:!1,normalizedTitleWithIcon:!1,properties:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,relationsGroup:!0,editor:!1,views:!1,viewsMain:!1};function i(e){return n[e.type]}function a(e){return r[e.type]}},511544:(e,t,o)=>{o.d(t,{M:()=>d});var n=o(667294);class r extends n.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function i({children:e,isPresent:t}){const o=(0,n.useId)(),i=(0,n.useRef)(null),a=(0,n.useRef)({width:0,height:0,top:0,left:0});return(0,n.useInsertionEffect)((()=>{const{width:e,height:n,top:r,left:l}=a.current;if(t||!i.current||!e||!n)return;i.current.dataset.motionPopId=o;const s=document.createElement("style");return document.head.appendChild(s),s.sheet&&s.sheet.insertRule(`\n          [data-motion-pop-id="${o}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${n}px !important;\n            top: ${r}px !important;\n            left: ${l}px !important;\n          }\n        `),()=>{document.head.removeChild(s)}}),[t]),n.createElement(r,{isPresent:t,childRef:i,sizeRef:a},n.cloneElement(e,{ref:i}))}const a=({children:e,initial:t,isPresent:r,onExitComplete:a,custom:s,presenceAffectsLayout:d,mode:c})=>{const u=(0,o(996681).h)(l),p=(0,n.useId)(),m=(0,n.useMemo)((()=>({id:p,initial:t,isPresent:r,custom:s,onExitComplete:e=>{u.set(e,!0);for(const t of u.values())if(!t)return;a&&a()},register:e=>(u.set(e,!1),()=>u.delete(e))})),d?void 0:[r]);return(0,n.useMemo)((()=>{u.forEach(((e,t)=>u.set(t,!1)))}),[r]),n.useEffect((()=>{!r&&!u.size&&a&&a()}),[r]),"popLayout"===c&&(e=n.createElement(i,{isPresent:r},e)),n.createElement(o(400240).O.Provider,{value:m},e)};function l(){return new Map}const s=e=>e.key||"";const d=({children:e,custom:t,initial:r=!0,onExitComplete:i,exitBeforeEnter:l,presenceAffectsLayout:d=!0,mode:c="sync"})=>{(0,o(45487).k)(!l,"Replace exitBeforeEnter with mode='wait'");const u=(0,n.useContext)(o(325364).p).forceRender||(0,o(706337).N)()[0],p=(0,o(704454).t)(),m=function(e){const t=[];return n.Children.forEach(e,(e=>{(0,n.isValidElement)(e)&&t.push(e)})),t}(e);let g=m;const f=(0,n.useRef)(new Map).current,h=(0,n.useRef)(g),y=(0,n.useRef)(new Map).current,x=(0,n.useRef)(!0);if((0,o(158868).L)((()=>{x.current=!1,function(e,t){e.forEach((e=>{const o=s(e);t.set(o,e)}))}(m,y),h.current=g})),(0,o(865411).z)((()=>{x.current=!0,y.clear(),f.clear()})),x.current)return n.createElement(n.Fragment,null,g.map((e=>n.createElement(a,{key:s(e),isPresent:!0,initial:!!r&&void 0,presenceAffectsLayout:d,mode:c},e))));g=[...g];const v=h.current.map(s),b=m.map(s),w=v.length;for(let o=0;o<w;o++){const e=v[o];-1!==b.indexOf(e)||f.has(e)||f.set(e,void 0)}return"wait"===c&&f.size&&(g=[]),f.forEach(((e,o)=>{if(-1!==b.indexOf(o))return;const r=y.get(o);if(!r)return;const l=v.indexOf(o);let x=e;if(!x){const e=()=>{f.delete(o);const e=Array.from(y.keys()).filter((e=>!b.includes(e)));if(e.forEach((e=>y.delete(e))),h.current=m.filter((t=>{const n=s(t);return n===o||e.includes(n)})),!f.size){if(!1===p.current)return;u(),i&&i()}};x=n.createElement(a,{key:s(r),isPresent:!1,onExitComplete:e,custom:t,presenceAffectsLayout:d,mode:c},r),f.set(o,x)}g.splice(l,0,x)})),g=g.map((e=>{const t=e.key;return f.has(t)?e:n.createElement(a,{key:s(e),isPresent:!0,presenceAffectsLayout:d,mode:c},e)})),n.createElement(n.Fragment,null,f.size?g:g.map((e=>(0,n.cloneElement)(e))))}},706337:(e,t,o)=>{o.d(t,{N:()=>a});var n=o(667294),r=()=>o(704454),i=()=>o(426166);function a(){const e=(0,r().t)(),[t,o]=(0,n.useState)(0),a=(0,n.useCallback)((()=>{e.current&&o(t+1)}),[t]);return[(0,n.useCallback)((()=>i().Wi.postRender(a)),[a]),t]}},704454:(e,t,o)=>{o.d(t,{t:()=>i});var n=o(667294),r=()=>o(158868);function i(){const e=(0,n.useRef)(!1);return(0,r().L)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}},865411:(e,t,o)=>{o.d(t,{z:()=>r});var n=o(667294);function r(e){return(0,n.useEffect)((()=>()=>e()),[])}}}]);