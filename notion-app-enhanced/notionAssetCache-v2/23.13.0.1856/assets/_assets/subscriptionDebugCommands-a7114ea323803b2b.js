"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[95126],{106374:(e,t,o)=>{o.r(t),o.d(t,{SubscriptionDebugCommands:()=>A});o(821057);var n=()=>o(100056),r=()=>o(219727),s=()=>o(142735),a=()=>o(947115),i=()=>o(513670),c=()=>o(824462),d=()=>o(332542),u=()=>o(636340),l=()=>o(269299),m=()=>o(348141),p=()=>o(254940),g=()=>o(356140),S=()=>o(876822),b=()=>o(538992),f=()=>o(18281),v=()=>o(30795),h=()=>o(404791),k=()=>o(897257);function A(){const e=(0,r().O7)(),t=(0,g().W)(),o=(0,s().Kw)(k().subscriptionDataStoreInstance),n=(0,v().V)(o);return(0,a().exposeDebugValue)("subscriptions",{getAiUsage:()=>{const e=h().Z.state;if(!e)throw Error("AI usage store not found");return{spaceUsage:e.spaceUsage,spaceUsageLimit:e.spaceLimit,userUsage:e.userUsage,userUsageLimit:e.userLimit}},getBlockUsage:()=>{const o=k().subscriptionDataStoreInstance.state;if(!o||!t)throw Error("Subscription data store not found");return{blockLimitCount:(0,f().Lz)(e,t,o,n)}},resetDeleteBlocksModal:()=>{const t=S().default.state.currentSpaceViewStore;t&&l().createAndCommit({userAction:"DeleteBlocksModal.showDeleteBlocksModal",environment:e,canUndo:!0,perform:e=>{l().applyOperation({store:t,operation:{pointer:t.pointer,path:["settings"],command:"update",args:{...t.getSettings(),seen_delete_blocks_modal:!1}},transaction:e})}})},resetStudentAiPopup:()=>{const t=S().default.state.currentUserSettingsStore;l().createAndCommit({userAction:"dismissedStudentAiPopup.reset",environment:e,canUndo:!0,perform:e=>{m().d2({transaction:e,userSettingsStore:t,data:{dismissed_student_ai_popup:!1}})}})},resetReverseTrialSidebarAlert:()=>{const t=S().default.state.currentUserSettingsStore;l().createAndCommit({userAction:"ReverseTrialSidebarAlert.resetDismissal",environment:e,canUndo:!0,perform:e=>{m().d2({transaction:e,userSettingsStore:t,data:{reverse_trial_sidebar_alert_dismissed_at:void 0}})}})},sendMemberRequestForAddOn:()=>{const t=S().default.state.currentSpaceStore;t&&b().jw({environment:e,spaceStore:t,from:"ai_qna_limit_in_app"})},recordAIUsage:async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const o=S().default.state.currentSpaceStore;o&&(await c().callApi({eventName:"recordAIUsage",environment:e,data:{spaceId:o.id,usage:t}}),await(0,p().maybeUpdateAiEligibility)(e,o.id,!0))},recordBlockUsage:e=>{k().subscriptionDataStoreInstance.update((t=>t&&"blockUsage"in t?{...t,blockUsage:e}:t))},resetReachBlockLimitTime:()=>{const t=S().default.state.currentSpaceStore;t&&l().createAndCommit({userAction:"SubscriptionDebugCommands.resetReachBlockLimitTime",environment:e,canUndo:!0,perform:e=>{u().sW({store:t,data:{settings:{...t.getSettings(),reach_block_limit_time:void 0}},transaction:e})}})}}),null}function C(e,t,n,r){l().createAndCommit({userAction:"SubscriptionDebugCommands.addBlocksToPage",environment:n,canUndo:!0,perform:s=>{i().DZ(e,(()=>{const e=u().j4({environment:n,type:"text",inMemoryRecordCache:t.inMemoryRecordCache,transaction:s,properties:{title:[[r||"money team is the best team"]]}});d().jG({parentStore:t.getContentStore(),childStore:o(826955).G.createChildStore(t.getContentStore(),e.pointer),transaction:s})}))}})}function U(e,t,o){const n=t.getContentStores().slice(-e);l().createAndCommit({userAction:"SubscriptionDebugCommands.removeBlocksFromPage",environment:o,canUndo:!0,perform:e=>{for(const o of n)d().hr({parentStore:t.getContentStore(),childStore:o,transaction:e})}})}(0,n().exposeDebugEnvironmentValue)("getStripeLinks",(e=>function(){var t,n;let r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const s=null===(t=S().default.state.currentSpaceStore)||void 0===t?void 0:t.id;if(!s)return"No space id found";const a=o(518019).Z.getData(e,{spaceId:s});if(!a)return"No billing data found";const i=r?"https://dashboard.stripe.com/test":"https://dashboard.stripe.com";return{customer:a.externalId?`${i}/customers/${a.externalId}`:"No customer id found",subscription:null!==(n=a.subscription)&&void 0!==n&&n.externalId?`${i}/subscriptions/${a.subscription.externalId}`:"No subscription id found"}})),(0,n().exposeDebugEnvironmentValue)("addBlocksToPage",(e=>(t,o)=>{const n=S().default.state.currentSpaceStore,r=S().default.state.mainEditorCurrentBlockStore;n&&r&&(t<100?C(t,r,e,o):i().DZ(t/100,(()=>{C(100,r,e,o)})))})),(0,n().exposeDebugEnvironmentValue)("removeBlocksFromPage",(e=>t=>{const o=S().default.state.currentSpaceStore,n=S().default.state.mainEditorCurrentBlockStore;o&&n&&(t<100?U(t,n,e):i().DZ(t/100,(()=>{U(100,n,e)})))}))}}]);