(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[25277,45741],{579217:(e,t,n)=>{"use strict";n.d(t,{_:()=>r,s:()=>i});var o=()=>n(677559);const i=(0,o().kF)(new(o().Ss)("UniversalQnaModals",(async()=>await Promise.all([n.e(62743),n.e(52774),n.e(90698),n.e(84885),n.e(37358),n.e(5242),n.e(7312),n.e(90424),n.e(81580),n.e(84325),n.e(31189),n.e(69343),n.e(46293),n.e(2971),n.e(80741),n.e(72586),n.e(53335),n.e(71896),n.e(46616),n.e(54940),n.e(49396),n.e(98721),n.e(98032),n.e(57229),n.e(63707),n.e(86609),n.e(91253),n.e(4642),n.e(5006),n.e(6612),n.e(61171),n.e(23179),n.e(75377),n.e(31020),n.e(2942),n.e(73682),n.e(58591),n.e(54803),n.e(1953),n.e(10216),n.e(58565),n.e(69197),n.e(42055),n.e(38739),n.e(44751),n.e(81567),n.e(58183)]).then(n.bind(n,260685)))),(e=>e.UniversalQnaModals)),r=(0,o().kF)(new(o().Ss)("SlackConnectionOptions",(async()=>await n.e(16982).then(n.bind(n,945272)))),(e=>e.SlackConnectionOptions))},493843:(e,t,n)=>{"use strict";n.d(t,{$o:()=>q,Fv:()=>Z,IL:()=>Y,J4:()=>K,KA:()=>E,Nf:()=>F,_p:()=>X,cQ:()=>H,f$:()=>N,fX:()=>U,j2:()=>V,k2:()=>W,mg:()=>J,mz:()=>z,oP:()=>D,tF:()=>$,td:()=>G,x:()=>O});n(670560),n(267602),n(470928),n(30005),n(241792),n(228244);var o=()=>n(730120),i=()=>n(492788),r=()=>n(506347),a=()=>n(926724),s=()=>n(331540),l=()=>n(874459),c=()=>n(998411),d=()=>n(35980),u=()=>n(513670),p=()=>n(696459),m=()=>n(250303),g=()=>n(384667),h=()=>n(366257),f=()=>n(139224),y=()=>n(421654),v=()=>n(636340),b=()=>n(531515),S=()=>n(47443),x=()=>n(794586),C=()=>n(879952),k=()=>n(970105),_=()=>n(990966),w=()=>n(269299),I=()=>n(932753),j=()=>n(887430),M=()=>n(861026),T=()=>n(804217),R=()=>n(826955),P=()=>n(965903),B=()=>n(807230),L=()=>n(701182),A=()=>n(645843);function V(e){const{collectionViewStore:t,collectionContextStore:n,timelineState:o,environment:i}=e,r=i.currentUser.id,a=(0,L().B8)(t.id),s=(0,L().pQ)(t,i),l=n.permissionScopesStore.state,c=u().Ds((()=>{if(o.destroyed)return;const e={zoomLevel:o.zoomLevel.state,centerTimestamp:(0,L().al)(o)};d().Z.set({userId:r,key:a,value:e})}),1e3),p=u().Ds((()=>{if(o.destroyed||!T().default.state.online||!i.currentUser.isLoggedIn()||!l.canConfigureBlock)return;const e={zoomLevel:o.zoomLevel.state,centerTimestamp:(0,L().al)(o)},n=t.getFormat().timeline_preference;u().Xy(n,e)||w().createAndCommit({userAction:"collectionTimelineViewActions.setRemotePreference",environment:i,canUndo:!0,perform:n=>{y().FH({stores:[t],update:{timeline_preference:e},transaction:n})}})}),5e3);o.savePreference=()=>{c(),p()},F({timelineState:o,environment:i,...s})}function F(e){const{timelineState:t,zoomLevel:n,centerTimestamp:o,environment:r}=e,{savePreference:a}=t,s=r.WindowSizeStore.state.width+2*L().Ge,l=(0,L().x2)(n,s),c=o-l/2,d=o+l/2;t.zoomLevel.setState(n),t.currentRange.setState({startTimestamp:c,endTimestamp:d}),i().default.afterNextFlush((()=>{E({timelineState:t,centerTimestamp:o}),a&&a()}))}function E(e){const{timelineState:t,centerTimestamp:n}=e,{horizontalScroller:o,outerSizeObserver:i}=t;if(!o)return;const r=t.zoomLevel.state,{startTimestamp:a,endTimestamp:s}=t.currentRange.state,l=i.rect.state.width;if(l===(0,L().e$)(r,s-a))return;const c=(0,L().e$)(r,n-a)-l/2;o.scrollLeft=c,t.scrollLeft.setState(c)}function D(e){const{environment:t,store:n,query:o,date:i,schema:r,transaction:a}=e,{timeline_by:s}=o;if(!s)return;const l=n.getAssociatedCollectionStore(),c=(null==l?void 0:l.getMappedProperty(s))??s,d=o.timeline_by_end?(null==l?void 0:l.getMappedProperty(o.timeline_by_end))??o.timeline_by_end:void 0,u=(0,L().TW)({store:n,dateValue:i,query:o,schema:(null==l?void 0:l.getSchema())??r}),p=n.getPropertyValue(c),m=d?n.getPropertyValue(d):void 0;return v().sW({store:n.getPropertiesStore(),data:u,transaction:a}),h().H({environment:t,store:n,dateProperty:{id:c,newValue:(null==u?void 0:u[c])??[],oldValue:p},otherDateProperty:d?{id:d,newValue:(null==u?void 0:u[d])??[],oldValue:m}:void 0}),n}function Z(e){var t;const{environment:n,timelineState:i,collectionStore:r,collectionContextStore:a,store:s,query:d,groupFormat:u,transaction:p}=e,m=i.zoomLevel.state,h=(0,L().al)(i),{snapUnit:f,getDateRangePlaceholderDuration:y}=L().BJ[m],{timeline_by:v}=d;if(!v)return;const b=null===(t=a.groupsStore.getGroupState(u))||void 0===t?void 0:t.resultsStore.state;if(!b)return;const S=o().ou.fromMillis(h),x=(0,L().DS)(S,f),C=(0,L().DS)(y(S),f),k=(0,L().AZ)({startValue:(0,l().Lg)((0,c().r)()),snapUnit:f,desiredStart:x,desiredEnd:C});return D({environment:n,store:s,query:d,schema:r.getSchema(),date:k,transaction:p}),g().$T({environment:n,collectionStore:r,before:!0,store:b[0],insertStores:[s],collectionContextStore:a,groupsPointer:u?[u]:[],transaction:p}),s}function N(e){const{type:t,timelineState:n,store:o,startX:i,query:r,schema:a,intl:s,environment:l}=e,{horizontalScroller:c}=n,{startTimestamp:d}=n.currentRange.state;if(!c)return;C().Ys({environment:l,store:o});const p=c.scrollLeft,{stores:m}=P().default.state,g=u().oA(m.map((e=>{const t=(0,L().bk)({store:e,query:r,schema:a,userId:l.currentUser.id,intl:s,formulasModule:void 0});if(t)return{startValue:t,store:e}})));n.dragState.setState({type:t,startStore:o,stores:g.map((e=>{let{store:t}=e;return t})),startValues:g.map((e=>{let{startValue:t}=e;return t})),temporaryValues:g.map((e=>{let{startValue:t}=e;return t})),startX:i,startStartTimestamp:d,startScrollLeft:p})}function K(e){const{timelineState:t,store:n,startX:o,startY:i,schema:r,collectionContextStore:a,verticalScroller:s}=e,{horizontalScroller:l}=t,{startTimestamp:c}=t.currentRange.state;if(!l||!s)return;const d=l.scrollLeft,u=s.scrollTop,p=(0,L().YE)(a,n,r);t.drawState.setState({startStore:n,startDependencyRelationPointers:p,temporaryDependencyRelationPointers:[...p],startX:o,startY:i,startScrollLeft:d,startScrollTop:u,startStartTimestamp:c,xOffsetPx:0,yOffsetPx:0,tryToCompleteDrawnArrow:!1})}function G(e){const{timelineState:t,currentX:n}=e,{horizontalScroller:o}=t,i=t.zoomLevel.state,r=t.dragState.state,{startTimestamp:a}=t.currentRange.state;if(!r||!o)return;const{type:s,startStartTimestamp:c,startValues:d,startScrollLeft:m,startX:g,startStore:h,stores:f}=r,y=L().BJ[i],{snapUnit:v}=y,b=o.scrollLeft-m+(n-g)+(0,L().e$)(i,a-c),S=(0,L().x2)(i,b),x=d[f.indexOf(h)];let C;if(s===L().px.LeftResizer){const{start:e}=(0,L().XO)(x,v),t=e.plus(S);C=d.map((e=>{const n=(0,L().AZ)({startValue:e,snapUnit:v,desiredStart:t});return(0,l().gW)(n)}))}else if(s===L().px.RightResizer){const{end:e}=(0,L().XO)(x,v),t=e.plus(S);C=d.map((e=>{const n=(0,L().AZ)({startValue:e,snapUnit:v,desiredEnd:t});return(0,l().Qq)(n)}))}else s===L().px.ItemDrag?C=d.map((e=>{const{start:t,end:n}=(0,L().XO)(e,v),o=t.plus(S),i=o.plus(n.valueOf()-t.valueOf());return(0,L().AZ)({startValue:e,snapUnit:v,desiredStart:o,desiredEnd:i})})):(0,p().t1)(s);u().Xy(r.temporaryValues,C)||t.dragState.setState({...r,temporaryValues:C})}function z(e){const{timelineState:t,currentX:n,currentY:o,verticalScroller:i}=e,r=t.drawState.state,a=t.zoomLevel.state,{startTimestamp:s}=t.currentRange.state,{horizontalScroller:l}=t;if(!r||!l||!i)return;const{startDependencyRelationPointers:c,startStore:d,startX:p,startY:m,startScrollLeft:g,startScrollTop:h,startStartTimestamp:f}=r,y=l.scrollLeft,v=i.scrollTop,b=y-g+(n-p)+(0,L().e$)(a,s-f),S=v-h+(o-m),x=t.hoveredItem.state;if(x&&x!==d&&!c.some((e=>e.id===x.id))){const e=[...c,{table:"block",id:x.id,spaceId:x.getSpaceId()}];u().Xy(r.temporaryDependencyRelationPointers,e)||t.drawState.setState({...r,temporaryDependencyRelationPointers:e,xOffsetPx:void 0,yOffsetPx:void 0})}else t.drawState.setState({...r,temporaryDependencyRelationPointers:[...c],xOffsetPx:b,yOffsetPx:S})}function U(e){const{environment:t,collectionContextStore:n,timelineState:o,query:i,schema:r,transaction:a}=e,s=o.dragState.state,{timeline_by:l}=i;if(!s||!l)return;const{temporaryValues:c,stores:d}=s;c.forEach(((e,o)=>{const s=d[o];D({environment:t,store:s,query:i,schema:r,transaction:a,date:e}),m().rv({environment:t,collectionContextStore:n,block_id:s.id,property:l,property_type:"date",from:"timeline"})})),o.dragState.setState(void 0)}function q(e){var t;const{timelineState:n,environment:o,transaction:i,collectionContextStore:r,isFullScreen:a,isRootChild:s}=e,l=n.drawState.state,c=n.dateRangePlaceholder.state;if(!l)return;const{startStore:d,startDependencyRelationPointers:u,temporaryDependencyRelationPointers:p}=l;if(!d)return void n.drawState.setState(void 0);let g;if(c.active){const{date:e,store:t,parentStore:a,groupFormat:s,newTimelineItemProps:l,existingTimelineItemProps:u}=c;if(t&&u){const{query:n,schema:r}=u;D({environment:o,store:t,query:n,schema:r,date:e,transaction:i}),g={table:"block",id:t.id,spaceId:d.getSpaceId()}}else if(l){const{query:n,schema:c,isFullScreen:u,canEditTimelineItems:p,subitemPath:m}=l,h=J({environment:o,date:e,store:t,parentStore:a,query:n,schema:c,isFullScreen:u,groupFormat:s,canEditTimelineItems:p,collectionContextStore:r,subitemPath:m,transaction:i,from:"timeline_complete_draw"});h&&(g={table:"block",id:h.id,spaceId:d.getSpaceId()})}n.dateRangePlaceholder.setState({active:!1})}else g=p.find((e=>!u.includes(e)));const h=(0,L()._e)(r);if(h){const{property:e}=h;g&&(b().hE({environment:o,propertyWithInverse:h,sourceStore:d,destStore:R().G.createChildStore(d,g),position:{type:"after"},transaction:i}),m().rv({environment:o,collectionContextStore:r,block_id:d.id,property:e,property_type:"relation",from:"timeline",isFromBulkActionsToolbar:!1,isUnthrottled:!0})),n.drawState.setState(void 0)}else f().wl({item:{type:"dependencies",from:"view_options"},collectionSettingsStore:r.settingsStore}),n.drawState.setState({...l,tryToCompleteDrawnArrow:!0});const y=null===(t=g)||void 0===t?void 0:t.id;y&&(0,A().LE)(o,{...(0,M().Pn)(r),...(0,A().Ii)({environment:o,collectionContextStore:r,timelineState:n,isFullScreen:a,isRootChild:s}),dependenciesPropertyID:null==h?void 0:h.property,blockedByStoreID:d.id,blockingStoreID:y})}function H(e){const{timelineState:t,environment:n}=e;t.dragState.state&&(t.dragState.setState(void 0),C().ZH({environment:n}))}function O(e){const{timelineState:t,environment:n}=e;t.drawState.state&&(t.drawState.setState(void 0),C().ZH({environment:n}))}function W(e){const{stores:t,collectionViewStore:n,schema:o,transaction:i}=e,r=n.getType(),a=n.getQuery(o),s=[];a&&("calendar"===r?a.calendar_by&&s.push(a.calendar_by):"timeline"===r&&(a.timeline_by&&s.push(a.timeline_by),a.timeline_by_end&&s.push(a.timeline_by_end)));for(const l of t)for(const e of s)k().sO({environment:l.environment,store:l.getPropertyStore(e),value:void 0,transaction:i})}function Y(e){const{dependency:t,collectionContextStore:n,environment:o,timelineState:i,isFullScreen:r,isRootChild:a}=e,s=(0,L()._e)(n),l=n.collectionStore();if(!s||!l)return;const{property:c}=s,{store:d,relationPointer:u}=t,p=d.getSchema()[c];p&&"relation"===p.type&&(w().createAndCommit({userAction:"CollectionTimelineDependenciesOverlay.handleRemoveRelation",environment:o,canUndo:!0,perform:e=>{b().Bl({environment:o,propertyWithInverse:s,sourceStore:d,destStore:R().G.createChildStore(d,u),transaction:e}),m().rv({environment:o,block_id:u.id,property:c,property_type:p.type,from:"timeline",collectionContextStore:n,isFromBulkActionsToolbar:!1,isUnthrottled:!0})}}),(0,A().lf)(o,{...(0,M().Pn)(n),...(0,A().Ii)({environment:o,collectionContextStore:n,timelineState:i,isFullScreen:r,isRootChild:a}),dependenciesPropertyID:c,blockedByStoreID:d.id,blockingStoreID:u.id}))}function $(e){const{collectionViewStore:t,newProperty:n,transaction:o}=e;y().FH({stores:[t],update:{timeline_arrows_by:{property:n}},transaction:o})}function X(e){var t;const{collectionContextStore:n,relationPropertyId:o,transaction:i}=e,r=n.collectionStore();if(!r)return;const l=o?r.getSchema()[o]:void 0,c="relation"===(null==l?void 0:l.type)&&l.property&&"relation"===(null===(t=r.getSchema()[l.property])||void 0===t?void 0:t.type)?l.property:void 0;y().FH({stores:[r],update:{collection_default_arrows_by:o,...r.getFormat().app_config_uri===s().iS?{app_uri_map:{...r.getFormat().app_uri_map?r.getFormat().app_uri_map:{},[a().Es.BlockingRelation]:o,[a().Es.BlockedRelation]:c}}:{}},transaction:i})}function J(e){const{environment:t,transaction:n,date:o,parentStore:i,query:a,schema:s,isFullScreen:l,groupFormat:c,canEditTimelineItems:d,collectionContextStore:u,from:p}=e;if(!(0,B().ww)(t))return;const m=c?[c]:[],h=u.groupsStore.getGroupState(m);if(!h)return;if(i)return function(e){const{environment:t,transaction:n,date:o,store:i,parentStore:a,query:s,schema:l,groupFormat:c,canEditTimelineItems:d,collectionContextStore:u,subitemPath:p}=e;if(!i||!a)return;const m=c?[c]:[],h=g().yk({environment:t,collectionContextStore:u,groupsPointer:m,store:i,before:!1,collectionStore:a,transaction:n,subitemPath:p,subitemInsertDirection:"into"});if(h){if(D({environment:t,store:h,query:s,schema:l,date:o,transaction:n}),t.device.isMobile)S()._c({environment:t,store:h,pageVisitSource:r().tY.Create});else if(h&&d){const e=h.getBlockTitleStore();_().setSelectionAtStart({store:e})}return h}}(e);u.searchQueryStore.state&&I().Ug({searchQuery:"",collectionContextStore:u,isFullScreen:l});const f=g().IW({environment:t,collectionContextStore:u,groupsPointer:m,shouldCoerce:!0,templateStore:u.defaultPageTemplateStore.state,transaction:n,from:{createBlock:p},inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache});if(!f)return;const y=f.coercionSucceeded,v=f.newStore;if(D({environment:t,store:v,query:a,schema:s,date:o,transaction:n}),t.device.isMobile)S()._c({environment:t,store:v,pageVisitSource:r().tY.Create});else if(y&&d){const e=v.getBlockTitleStore();_().setSelectionAtEnd({store:e})}else x().CH({environment:t,store:v,peekMode:(0,j().kr)(u),resultsStore:null==h?void 0:h.resultsStore,collectionContextStore:u,pageVisitSource:r().tY.Create});return v}},645843:(e,t,n)=>{"use strict";n.d(t,{Al:()=>l,CB:()=>c,H6:()=>s,Ii:()=>g,LE:()=>p,gw:()=>d,iR:()=>r,lf:()=>m,ne:()=>u,zI:()=>a});n(267602),n(653476);var o=()=>n(594546),i=()=>n(701182);function r(e,t){o().lu(e,"timeline_view","timeline_view",5,t)}function a(e,t){o().K4(e,"timeline_zoom_level_update",t)}function s(e,t){o().K4(e,"timeline_today_click",t)}function l(e,t){o().K4(e,"timeline_shift_time_click",t)}function c(e,t){o().K4(e,"timeline_toggle_table_click",t)}function d(e,t){o().K4(e,"timeline_item_scroll_arrow_click",t)}function u(e,t){o().K4(e,"timeline_item_resize",t)}function p(e,t){o().K4(e,"timeline_dependency_arrow_add",t)}function m(e,t){o().K4(e,"timeline_dependency_arrow_delete",t)}function g(e){const{environment:t,collectionContextStore:n,timelineState:o,isFullScreen:r,isRootChild:a}=e,s=o.zoomLevel.state,l=n.normalizedFormatStore.state,c=(0,i().C1)({environment:t,format:l,isFullScreen:r,isRootChild:a}),d=c&&l.timeline_table_properties?l.timeline_table_properties.length:0,u=l.timeline_properties||[],p=u.filter((e=>"title"!==e.property));return{zoom_level:s,show_table:c,show_table_properties_count:d,show_timeline_title:u.length!==p.length,show_timeline_properties_count:p.length}}},139039:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AiBlockV2:()=>Je});n(159867),n(267602),n(30005),n(241792);var o=()=>n(307312),i=n(667294),r=()=>n(492788),a=()=>n(146947),s=()=>n(219727),l=()=>n(657320),c=()=>n(142735),d=()=>n(846550),u=()=>n(815292),p=()=>n(362137),m=()=>n(175882),g=()=>n(943617),h=()=>n(481529),f=()=>n(198504),y=()=>n(396136),v=()=>n(492522),b=()=>n(788860),S=()=>n(956898),x=()=>n(513670),C=()=>n(696459),k=()=>n(707513),_=()=>n(562109),w=()=>n(824462),I=()=>n(308186),j=()=>n(282662),M=()=>n(627817),T=()=>n(771678),R=()=>n(990966),P=()=>n(94912),B=()=>n(269299),L=()=>n(770844),A=()=>n(11750),V=()=>n(315486),F=()=>n(95176),E=()=>n(654133),D=()=>n(916095),Z=()=>n(247724),N=()=>n(982855),K=()=>n(57687),G=()=>n(949842),z=()=>n(609489),U=()=>n(12512),q=()=>n(527278),H=()=>n(154057),O=()=>n(191003),W=()=>n(876822),Y=()=>n(379072),$=()=>n(529048),X=()=>n(826955),J=()=>n(127519),Q=()=>n(58836),ee=()=>n(448419),te=()=>n(206352),ne=()=>n(906651),oe=()=>n(98275),ie=()=>n(345837),re=()=>n(864880),ae=(n(821057),n(670560),n(122556),n(582845),n(250570),n(533019),n(721473),n(788208),n(22624),n(653476),n(228244),()=>n(504008)),se=()=>n(714230),le=()=>n(38883),ce=()=>n(998411),de=()=>n(801812),ue=()=>n(340531),pe=()=>n(352230),me=()=>n(15981),ge=()=>n(880556),he=()=>n(729675),fe=()=>n(998901),ye=()=>n(385010),ve=()=>n(1910),be=()=>n(740046),Se=()=>n(94967),xe=()=>n(198829),Ce=()=>n(255577),ke=()=>n(838367),_e=()=>n(967092),we=()=>n(943620),Ie=()=>n(231219),je=()=>n(384241),Me=()=>n(388284),Te=()=>n(953349),Re=()=>n(78014),Pe=()=>n(122671),Be=n(785893);const Le="notion";function Ae(e){const{currentContexts:t,handleUpdateContexts:n}=e,[o,r]=(0,i.useState)(!1),a=(0,c().VK)((()=>["notion",...(0,ue().i6)().filter(De)]),[]),s=(0,i.useCallback)((e=>{n(t.filter((t=>!(0,x().Xy)(t,e))))}),[t,n]),l=(0,c().VK)((()=>t.map((e=>"block"===e.type?(0,Be.jsx)(Ve,{blockStore:e.blockStore,onRemoveToken:()=>{s(e)}},e.blockStore.id):"slack"===e.type?(0,Be.jsx)(Fe,{channel:e.channel,onRemoveToken:()=>{s(e)}},e.channel.id):(0,C().t1)(e)))),[t,s]),u=(0,d().yK)((e=>({originContainer:{borderRadius:6,boxShadow:e.inputBoxShadow,backgroundColor:"dark"===e.mode?e.accentColors.translucentGray[100]:"transparent",display:"flex",alignItems:"center",padding:8},tokenWrapStyle:{display:"flex",gap:4,alignItems:"center"}})),[]),p=(0,b().YB)();return(0,Be.jsx)(_e().ZP,{popupType:_e().kQ.Popup,open:o,onDismiss:()=>{r(!1)},placementToOrigin:fe().Placement.Bottom,alignmentToOrigin:fe().Alignment.Start,origin:(0,Be.jsx)(Pe().L7,{hideInput:!0,inputDivStyle:{margin:void 0},tokenWrapStyle:u.tokenWrapStyle,style:u.originContainer,format:Pe().UR.Select,tokens:l,value:"",onChange:()=>{},onRemoveLastToken:()=>{n(t.slice(0,t.length-1))},placeholder:p.formatMessage({id:"ContextTokenInput.contextLabel",defaultMessage:"Context"}),onClick:()=>{o||r(!0)},onFocus:()=>{r(!0)},onBlur:()=>{r(!1)}}),render:()=>(0,Be.jsx)(Ee,{availableSearchContexts:a,onSelectResult:e=>{n([...t,e]),r(!1)},currentContexts:t})})}function Ve(e){const{blockStore:t,onRemoveToken:n}=e,o=(0,c().VK)((()=>t.getIcon()),[t]),i=(0,d().yK)((e=>({recordToken:{display:"flex",alignItems:"center"},tokenWrapper:{backgroundColor:e.lightGrayBannerBackground,cursor:"pointer",paddingLeft:4,paddingRight:4,paddingTop:12,paddingBottom:12,borderRadius:4}})),[]);return(0,Be.jsx)(Re().Z,{style:i.tokenWrapper,format:le().lo.Small,value:(0,Be.jsxs)("div",{style:i.recordToken,children:[(0,Be.jsx)(we().Z,{disabled:!0,icon:o,isEmptyPage:!1,size:20,style:{marginRight:4}}),(0,Be.jsx)(je().Z,{store:t})]}),showRemoveButton:!0,onClickRemove:n,isSingle:!0,shouldShrink:!0,backgroundColor:"transparent",shouldWrap:!1})}function Fe(e){const{channel:t,onRemoveToken:n}=e,o=(0,d().yK)((e=>({iconStyle:{width:12,height:12,fill:e.lightIconColor},recordToken:{display:"flex",alignItems:"center",gap:4},tokenWrapper:{backgroundColor:e.lightGrayBannerBackground,cursor:"pointer",paddingLeft:4,paddingRight:4,paddingTop:12,paddingBottom:12,borderRadius:4}})),[]),i=(0,Te().N_)({channel:t,styles:o.iconStyle});return(0,Be.jsx)(Re().Z,{style:o.tokenWrapper,format:le().lo.Small,value:(0,Be.jsxs)("div",{style:o.recordToken,children:[i,(0,Be.jsx)("div",{children:t.name})]}),showRemoveButton:!0,onClickRemove:n,isSingle:!0,shouldShrink:!0,backgroundColor:"transparent",shouldWrap:!1})}function Ee(e){const{onSelectResult:t,availableSearchContexts:n,currentContexts:o}=e,r=(0,b().YB)(),{searchResultMenuState:a,query:l,setQuery:u,setCurrentSearchContext:p}=function(e){const{availableSearchContexts:t,currentContexts:n}=e,o=t.length>1,[r,a]=(0,i.useState)(o?void 0:Le),[l,d]=(0,i.useState)(void 0),u=(0,s().O7)(),p=(0,c().VK)((()=>W().default.state.currentSpaceStore),[]),m=null==p?void 0:p.id,g=(0,c().VK)((()=>me().X4.state.map((e=>e.store))),[]),[{value:h,status:f}]=(0,de().r5)((async()=>{if(l&&p&&"notion"===r)return(await(0,he().searchPageIds)({environment:u,query:l,limit:20,spaceId:p.id,requireEditPermissions:!1,excludeTemplates:!1,source:"ai_block_v2_page_context_search",boostRecentlyViewedPages:!0})).results.map((e=>new(X().G)(u,{id:e,table:y().iU,spaceId:p.id})))}),[p,u,l,r]),v=(0,c().VK)((()=>l?h??[]:g),[l,h,g]),b=(0,i.useMemo)((()=>v.filter((e=>!n.some((t=>(0,x().Xy)(t,{type:"block",blockStore:e})))))),[v,n]);i.useEffect((()=>{m&&(0,Te().uV)({environment:u,spaceId:m,externalAuthConfig:{type:"universal",app:"slack",spaceId:m}})}),[u,m]);const S=(0,c().VK)((()=>m?ye().l.getStateForBot({type:"universal",app:"slack",spaceId:m}):ye().w),[m]),C=(0,i.useMemo)((()=>Object.values(S.channels).map((e=>({type:"slack",channel:e})))),[S]),k=(0,i.useMemo)((()=>"slack"===r&&l?C.filter((e=>{let{channel:t}=e;return(0,Te().IH)({channelName:t.name,query:l})})):C),[r,C,l]),_=(0,c().VK)((()=>S.fetching),[S]),w=(0,i.useMemo)((()=>{if(!r)return{type:"choose"};let e=[];return"notion"===r?e=b.map((e=>({type:"block",blockStore:e}))):"slack"===r&&(e=k),l?"slack"===r&&_||"notion"===r&&"pending"===f?{type:r,status:"searching",results:e}:{type:r,status:"loaded",results:e}:{type:r,status:"default",results:e}}),[r,l,b,k,f,_]);return{query:l,setQuery:d,setCurrentSearchContext:a,searchResultMenuState:w}}({availableSearchContexts:n,currentContexts:o}),m=(0,d().yK)((e=>({searchBox:{paddingBottom:4},backText:{color:e.lightTextColor,fontSize:12},backContentWrap:{display:"flex",alignItems:"center",cursor:"pointer",marginTop:4,marginLeft:8}})),[]),g=(0,i.useMemo)((()=>{if("choose"===a.type)return n.map((e=>({key:e,render:t=>(0,Be.jsx)(Ze,{...t,searchContext:e}),action:()=>{p(e)}})));const e=[{key:"search",render:e=>(0,Be.jsx)(Se().Z,{debugName:"CompletionPopup",capture:!0,children:(0,Be.jsx)(be().ZP,{...e,value:l??"",style:m.searchBox,onChange:e=>u(e.target.value),placeholder:r.formatMessage({id:"ContextTokenInput.searchPlaceholder",defaultMessage:"Search…"})})}),action:()=>{}}];if("default"===a.status||"loaded"===a.status||"searching"===a.status){if(0===a.results.length)return"searching"===a.status?(e.push({key:"loading",render:()=>(0,Be.jsx)(ke().Z,{title:(0,Be.jsx)(b()._H,{defaultMessage:"Loading…",id:"contextTokenInput.searchResultMenu.loading.message"})}),action:()=>{}}),e):(e.push({key:"no-results",render:()=>(0,Be.jsx)(ke().Z,{title:(0,Be.jsx)(b()._H,{defaultMessage:"No results found.",id:"contextTokenInput.searchResultMenu.noResults.message"})}),action:()=>{}}),e);const n=new Set(o.map((e=>"slack"===e.type?e.channel.id:e.blockStore.id))),i=a.results.filter((e=>{const t="slack"===e.type?e.channel.id:e.blockStore.id;return!n.has(t)})).sort(((e,t)=>{if("slack"===e.type&&"slack"===t.type)return e.channel.name.localeCompare(t.channel.name);if("block"===e.type&&"block"===t.type){const n=(0,ce().r)(),o=ae().Z.withListenerIgnored((()=>e.blockStore.getRenderTitle({userTimeZone:n,intl:r}))),i=ae().Z.withListenerIgnored((()=>t.blockStore.getRenderTitle({userTimeZone:n,intl:r})));return(o??"").localeCompare(i??"")}throw new Error("Cannot compare notion blocks and slack channels")}));return e.concat(i.map((e=>"block"===e.type?{key:e.blockStore.id,render:t=>(0,Be.jsx)(Ie().Z,{...t,store:e.blockStore}),action:()=>{t(e)}}:"slack"===e.type?{key:e.channel.id,render:t=>(0,Be.jsx)(Te().MF,{...t,channel:e.channel}),action:()=>{t(e)}}:void(0,C().t1)(e))))}return(0,C().t1)(a.status)}),[a,n,p,l,m.searchBox,r,u,o,t]);return(0,Be.jsx)(xe().Z,{menuType:pe().o.Popup,width:300,maxHeight:300,header:(0,Be.jsx)("div",{children:"choose"!==a.type&&(0,Be.jsx)("div",{style:m.backContentWrap,children:(0,Be.jsx)(ve().Z,{ariaLabel:"Back",icon:ge().W,onClick:()=>{p(void 0)},caption:(0,Be.jsx)("div",{style:m.backText,children:(0,Be.jsx)(b()._H,{id:"ContextTokenInput.backButton",defaultMessage:"Back"})}),captionStyle:{textTransform:void 0,letterSpacing:void 0}})})}),children:(0,Be.jsx)(Ce().Z,{type:Ce().i.Vertical,initialFocus:void 0,sections:[{key:"search-results",render:e=>(0,Be.jsx)(Me().Z,{...e}),items:g}]})})}const De=(0,C().AO)((e=>"slack"===e?{true:e}:{false:e})),Ze=i.forwardRef(((e,t)=>{const{searchContext:o,...i}=e;let r,a;return"notion"===o?r=(0,Be.jsx)("img",{width:20,src:se().Z.images.notionLogoPng}):"slack"===o?r=(0,Be.jsx)("img",{width:20,src:se().Z.images.externalIntegrations.slackIconPng}):(0,C().t1)(o),"notion"===o?a=(0,Be.jsx)(b()._H,{id:"contextTokenInput.searchContextMenuItem.notion.title",defaultMessage:"Notion"}):"slack"===o?a=(0,Be.jsx)(b()._H,{id:"contextTokenInput.searchContextMenuItem.slack.title",defaultMessage:"Slack"}):(0,C().t1)(o),(0,Be.jsx)(n(827973).Z,{ref:t,...i,icon:r,title:a})}));function Ne(e){const t=(0,c().VK)((()=>e.getFormatStore().getKeyStore("ai_block_configuration_menu").getValue()??{title:void 0,autofillInstructions:void 0,placeholderText:void 0,context:void 0,searchScope:void 0}),[e]),n=(0,s().O7)(),o=(0,i.useCallback)((o=>{B().createAndCommit({userAction:"AiBlock.updateBlockConfiguration",environment:n,canUndo:!0,perform:n=>{B().applyOperation({store:e,operation:h().op.update({pointer:e.pointer,path:["format"],args:{ai_block_configuration_menu:{...t,...o}}}),transaction:n})}})}),[t,n,e]);return{blockConfiguration:t,updateBlockConfiguration:o}}function Ke(e){const{store:t,isGenerating:n}=e,o=We({store:t,isGenerating:n}),i=(0,d().yK)((()=>({generatingText:{display:"flex",alignItems:"center",justifyContent:"center",paddingTop:4,paddingBottom:4,paddingLeft:6,paddingRight:8,fontSize:14,fontWeight:400,opacity:o.isDisabled?.5:1}})),[o.isDisabled]),r=function(e){const t=(0,b().YB)(),n=(0,c().VK)((()=>{const n=e.getFormat().ai_last_edited;return n?t.formatDate(n,{day:"numeric",month:"long",year:"numeric"}):void 0}),[t,e]);return(0,c().VK)((()=>{var o;const i=e.getLastEditedTime();if(!i)return;const r=t.formatDate(i,{day:"numeric",month:"long",year:"numeric"});return r===n?{lastAiEditGenerationTime:n,lastEditedByName:void 0,lastHumanEditedTime:void 0}:{lastEditedByName:(null===(o=e.getLastEditedByStore())||void 0===o?void 0:o.getDisplayName(t,!1))??void 0,lastHumanEditedTime:r,lastAiEditGenerationTime:n}}),[t,n,e])}(t);return(0,Be.jsx)(E().Z,{renderTooltip:()=>(0,Be.jsx)(Ge,{store:t,disabledResult:o,lastGeneratedProps:r}),disableTooltip:!o.isDisabled&&!r,render:e=>(0,Be.jsx)("div",{style:i.generatingText,...e,children:n?(0,Be.jsx)(b()._H,{id:"aiBlock.generate.loading.label",defaultMessage:"Generating…"}):(0,Be.jsx)(b()._H,{id:"aiBlock.configurableTitle.editlabel",defaultMessage:"Generate"})})})}function Ge(e){const{disabledResult:t,lastGeneratedProps:n}=e,o=(0,d().yK)((e=>({disabledText:{opacity:t.isDisabled?.5:1},darkTextColor:{color:"#787774"}})),[t.isDisabled]);return t.isDisabled?(0,Be.jsx)("div",{children:t.disabledMessage}):n?(0,Be.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:4},children:[n.lastEditedByName&&n.lastHumanEditedTime&&(0,Be.jsx)("div",{style:o.darkTextColor,children:(0,Be.jsx)(b()._H,{defaultMessage:"Edited by <whiteName>{personName}</whiteName> {timestamp}",id:"AiBlockV2.lastGeneratedByHuman",values:{personName:n.lastEditedByName,whiteName:e=>(0,Be.jsx)("span",{style:{color:"white"},children:e}),timestamp:n.lastHumanEditedTime}})}),(0,Be.jsx)("div",{style:o.darkTextColor,children:(0,Be.jsx)(b()._H,{defaultMessage:"Generated by <white>AI</white> {timestamp}",id:"AIBlockV2.LastGeneratedAt",values:{timestamp:n.lastAiEditGenerationTime,white:e=>(0,Be.jsx)("span",{style:{color:"white"},children:e})}})})]}):null}function ze(e){const{handleGenerateClick:t,store:n,isGenerating:r,titleStore:s}=e,l=We({store:n,isGenerating:r}),[u,p]=(0,i.useState)(!1),m=(0,d().yK)((e=>({openConfigurationMenuStyles:{fontWeight:400,cursor:"pointer"},faceIcon:{paddingRight:4,height:18,width:18,opacity:l.isDisabled?.5:1},divider:{borderRight:`1px solid ${e.regularDividerColor}`},actionbarWrapperStyle:{position:"absolute",zIndex:v().t8,top:-40,right:-2,borderRadius:10,height:32,fontSize:14,lineHeight:1.2,display:"flex",whiteSpace:"nowrap",fontFamily:k().F5(a().locale).sans,background:e.popoverBackground,boxShadow:e.mediumBoxShadow,visibility:u?"hidden":"visible"}})),[l.isDisabled,u]),g=(0,c().qz)(void 0,$().Z);(0,c().VK)((()=>{T().JJ.state===n.pointer.id&&(g.setState({open:!0}),p(!0),T().JJ.setState(void 0))}),[g,n.pointer.id]);const h=(0,i.useCallback)((()=>{g.setState({open:!1})}),[g]),f=(0,c().VK)((()=>g.state.open),[g]);return(0,Be.jsx)(o().E.div,{animate:{opacity:1},initial:{opacity:0},style:m.actionbarWrapperStyle,children:(0,Be.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,Be.jsx)(qe,{disabledResult:l,onClick:t,isGenerating:r,store:n}),(0,Be.jsx)("div",{style:m.divider}),(0,Be.jsx)(ee().ZP,{open:f,buttonPopupStore:g,render:()=>(0,Be.jsx)(Ye,{store:n,setIsPopupVisible:p,onClosePopup:h,handleGenerateClick:t,isGenerating:r,titleStore:s}),renderOrigin:e=>(0,Be.jsx)(Ue,{...e}),popupType:ee().Z4.Popup,originGap:8})]})})}Ze.displayName="SearchContextMenuItem";const Ue=i.forwardRef((function(e,t){const{onClick:o,...i}=e,r=(0,d().yK)((e=>({wrapper:{display:"flex",alignItems:"center",cursor:"pointer",paddingLeft:10,paddingRight:10,paddingTop:6,paddingBottom:6}})),[]);return(0,Be.jsx)(n(154186).Z,{style:r.wrapper,ignoreLocalHoverState:!0,hovered:!1,onClick:o,ref:t,...i,children:(0,Be.jsx)(b()._H,{id:"AiBlockV2.editConfiguration",defaultMessage:"Settings"})})})),qe=i.forwardRef((function(e,t){const{onClick:n,disabledResult:o,isGenerating:i,store:r}=e,a=o.isDisabled,s=(0,d().yK)((e=>({wrapper:{cursor:a?"not-allowed":"pointer",paddingTop:6,paddingBottom:6,paddingRight:6,paddingLeft:6,fontSize:12,opacity:a?.5:1,display:"flex",alignItems:"center"}})),[a]);return(0,Be.jsx)("div",{style:s.wrapper,onClick:a?void 0:n,ref:t,children:(0,Be.jsx)(Ke,{isGenerating:i,store:r})})}));function He(e){const{titleStore:t}=e,[n,o]=(0,i.useState)(!1),r=(0,d().yK)((e=>({titleStyle:{fontWeight:k().Ue.bold,fontSize:22,marginRight:4,marginLeft:8,...n?{}:{display:"-webkit-box",lineClamp:1,WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden"}}})),[n]),a=(0,b().YB)();return(0,Be.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,Be.jsx)(ie().Z,{store:t,style:r.titleStyle,disabled:!1,disableSlashCommands:!0,disableEmojiCommands:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableMobileActionBar:!1,disableComment:!0,placeholder:a.formatMessage({id:"AiBlockV2.Title.Untitled",defaultMessage:"Untitled"}),onEnter:()=>o(!0),onEsc:()=>o(!1),onClick:()=>o(!0),disableShiftEnter:!0,pasteBehavior:"inline",inPageFind:U().B3.none})})}const Oe=(0,b().vU)({disabledAiCredits:{id:"AiBlockV2.disabled.aiCredits",defaultMessage:"AI is currently disabled"},currentlyGenerating:{defaultMessage:"Generation in progress",id:"AiBlockV2.currentlyGenerating"},cannotEditBlock:{defaultMessage:"This block cannot be edited",id:"AiBlockV2.cannotEditBlock"},noInstructions:{defaultMessage:"No instructions provided",id:"AiBlockV2.noInstructions"}});function We(e){const{store:t,isGenerating:n}=e,o=(0,l().l)(),{blockConfiguration:i}=Ne(t);return(0,c().VK)((()=>{const e=o&&o.publicEditModeStore.state;return(0,N().GD)(e)?n?{isDisabled:!0,disabledMessage:q().Z.formatMessage(Oe.currentlyGenerating)}:!t.canEdit()||t.isNonEditableState()?{isDisabled:!0,disabledMessage:q().Z.formatMessage(Oe.cannotEditBlock)}:i.autofillInstructions?{isDisabled:!1}:{isDisabled:!0,disabledMessage:q().Z.formatMessage(Oe.noInstructions)}:{isDisabled:!0,disabledMessage:q().Z.formatMessage(Oe.disabledAiCredits)}}),[o,n,t,i.autofillInstructions])}function Ye(e){const{store:t,setIsPopupVisible:n,onClosePopup:o,handleGenerateClick:r,isGenerating:a,titleStore:s}=e;(0,i.useEffect)((()=>(n(!0),()=>n(!1))),[n]);const{blockConfiguration:l,updateBlockConfiguration:c}=Ne(t),{store:u}=(0,K().Cl)({initialValue:l.autofillInstructions,onChange:e=>c({autofillInstructions:e})}),p=(0,d().yK)((e=>({popup:{marginTop:4,width:300,padding:8,display:"flex",flexDirection:"column",gap:10},titleStyle:{fontSize:14,fontWeight:500,color:e.lightTextColor,marginRight:4,display:"-webkit-box",lineClamp:1,WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden"}})),[]),m=(0,b().YB)(),g=We({store:t,isGenerating:a});return(0,Be.jsxs)("div",{style:p.popup,children:[(0,Be.jsx)("div",{style:{fontSize:14,fontWeight:500},children:(0,Be.jsx)(b()._H,{id:"aiBlock.configuration.blockSettingsTitle",defaultMessage:"AI block settings"})}),(0,Be.jsx)(Xe,{store:s,minTextHeight:30,placeholder:m.formatMessage({id:"AiBlockV2.Title.EmptyPlaceholder",defaultMessage:"Block title e.g. @Today's update"})}),(0,Be.jsx)($e,{store:t}),(0,Be.jsx)(Xe,{store:u,placeholder:m.formatMessage({id:"AiBlockV2.AutofillInstructions.Placeholder",defaultMessage:"Describe the content that should be generated. Use '@' to mention people, pages, or dates and '#' for slack channels."}),minTextHeight:115,showAtMentionMenu:!0,fontSize:14,fontWeight:400}),(0,Be.jsx)(ne().Z,{style:{cursor:g.isDisabled?"not-allowed":"pointer"},onClick:r,isLoading:a,disabled:g.isDisabled,isGray:g.isDisabled,children:(0,Be.jsx)(Ke,{isGenerating:a,store:t})}),(0,Be.jsx)(D().U4,{onClick:o})]})}function $e(e){const{store:t}=e,n=(0,c().VK)((()=>W().default.state.currentSpaceStore),[]),o=(0,s().O7)(),{blockConfiguration:r,updateBlockConfiguration:a}=Ne(t),l=(0,c().VK)((()=>(0,C().$K)(r.context)&&n?r.context.map((e=>"page"===e.type||"collection"===e.type?{type:"block",blockStore:new(X().G)(o,{table:y().iU,id:e.pageId,spaceId:n.id})}:"slack"===e.type?e:void(0,C().t1)(e))):[]),[o,r,n]),u=(0,i.useCallback)((e=>{const t=e.map((e=>{if("block"===e.type){var t;const n=null===(t=e.blockStore.getCollectionPointer())||void 0===t?void 0:t.id;return n?{pageId:e.blockStore.id,collectionId:n,type:"collection"}:{pageId:e.blockStore.id,type:"page"}}if("slack"===e.type)return e;(0,C().t1)(e)}));return a({context:t})}),[a]),p=(0,d().yK)((e=>({titleStyle:{fontSize:14,fontWeight:500,color:e.lightTextColor,marginRight:4,display:"-webkit-box",lineClamp:1,WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden"}})),[]);return n?(0,Be.jsx)("div",{style:p.titleStyle,children:(0,Be.jsx)(te().Z,{debugName:"PromptOrActionInput",capture:!0,allowMenuList:!1,allowEsc:!0,children:(0,Be.jsx)(Ae,{currentContexts:l,handleUpdateContexts:u})})}):null}function Xe(e){const{store:t,minTextHeight:n=50,placeholder:o,showAtMentionMenu:a,fontSize:l=14,fontWeight:c=500}=e,u=(0,d().yK)((e=>({titleStyle:{color:e.lightTextColor,marginRight:4,display:"-webkit-box",lineClamp:1,WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden"},inputWrap:{display:"flex",flexDirection:"column",justifyContent:"space-between",boxShadow:e.inputBoxShadow,minHeight:n,backgroundColor:"dark"===e.mode?e.accentColors.translucentGray[100]:"transparent",borderRadius:6,overflow:"inherit",flexGrow:1,flexShrink:1,paddingLeft:6,paddingRight:6},textContainer:{fontSize:l,fontWeight:c,flexGrow:1,padding:"4px 0",maxHeight:240,overflow:"auto"}})),[l,c,n]),p=(0,i.useCallback)((async()=>{const e=J().default.state;"editing"===e.mode&&(0,O().qS)(e.multiSelection)&&e.multiSelection.start.store===t||(R().setSelectionAtEnd({store:t}),await r().default.afterNextFlush())}),[t]),m=(0,s().O7)(),g=(0,i.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),async function(){await p(),await r().default.afterNextFlush(),M().lZ({environment:m,mentionTypes:V().OZ,usePopupOnMobile:!0,mentionSectionOrdering:V()._R})}()}),[m,p]);return(0,Be.jsxs)("div",{style:u.inputWrap,className:Z().Wh_,children:[(0,Be.jsx)(ie().Z,{placeholder:o,style:u.textContainer,disabled:!1,store:t,pasteBehavior:"inline",disableSlashCommands:!0,disableEmbedMenu:!0,disableEmojiCommands:!1,disableComment:!0,disableSelectAllBlocks:!0,disableSelectionDrag:!0,disableMobileActionBar:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableSuggestEdit:!0,inPageFind:U().B3.none}),a&&(0,Be.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",flexDirection:"column",alignItems:"flex-end"},children:(0,Be.jsx)(F().B,{onClick:g})})]})}function Je(e){const{store:t,hoveredOrSelectionState:n,setHaloShouldBeVisible:o,showingOverlay:r,disabled:a,disableHoverMenu:l}=e,d=(0,s().O7)(),u=(0,b().YB)(),{prompt:p}=(0,re().GS)({store:t}),m=(0,i.useCallback)((e=>{I().vC({message:e,showCancel:!1,keepFocus:!1,items:[{label:q().Z.formatMessage(I().F9.dismissButtonLabel),onAccept:x().yR}]})}),[]),[g,h]=(0,i.useState)(!1),f=(0,i.useCallback)((async()=>{var e,n;_().RL(d,{type:"generate",prompt_key:p.key}),h(!0);const o=null===(e=W().default.state.currentSpaceStore)||void 0===e?void 0:e.id;if(!o)return;const i=null===(n=t.getNavigableBlockStore())||void 0===n?void 0:n.pointer;if(!i)return;const r=await w().callStreamApi({eventName:"generateAiReport",environment:d,data:{blockPointer:{...t.pointer,spaceId:o},parentPagePointer:{...i,spaceId:o}}});if("success"!==r.type)return void m(u.formatMessage({id:"AIBlockV2.FailedToGenerate",defaultMessage:"Failed to generate. Please try again later."}));const{sessionId:a}=await(0,L().resetAndInitializeAssistantSession)({environment:d});let s="";if(S().H1.is(r.data))for await(const l of r.data)"success"===l.type&&(s+=l.completion,et.enqueue((async()=>{await tt({store:t,chatXml:s,sessionId:a,onError:m,intl:u,serializedXMLEvaluatorState:l.serializedXmlEvaluatorState})})));h(!1)}),[d,u,m,p.key,t]),y=(0,i.useCallback)((e=>{(0,G().ZP)({event:e,context:G().Af.EditorClick,callback:()=>{(0,H().uG)(e)||B().createAndCommit({userAction:"TransclusionContainerBlock.handleEmptyClick",environment:d,canUndo:!0,perform:e=>{P().ls({environment:d,store:t,transaction:e})}})}})}),[d,t]),v=(0,c().VK)((()=>!t.hasContent()),[t]),{blockConfiguration:C,updateBlockConfiguration:k}=Ne(t),{store:j}=(0,K().Cl)({initialValue:C.title,onChange:e=>k({title:e})}),M=(0,c().VK)((()=>t.getContentStore()),[t]),T=(0,s().Fy)();return(0,Be.jsxs)(Be.Fragment,{children:[(0,Be.jsx)(He,{titleStore:j}),(0,Be.jsx)("div",{style:{paddingLeft:8},onClick:v?y:void 0,children:(0,Be.jsx)(oe().Z,{emptyPlaceholder:(0,Be.jsx)(Qe,{placeholderText:u.formatMessage({id:"AiBlockV2.EmptyEditingPlaceholder",defaultMessage:"Click to edit"})}),disabled:a||g,store:M,disableHoverMenu:l||n!==z().x.SelectedDescendant,disableDrag:T.isMobile})}),r&&(0,Be.jsxs)(Be.Fragment,{children:[(0,Be.jsx)(re().sy,{hoveredOrSelectionState:n,setHaloShouldBeVisible:o,colorVariant:"blue"}),(0,Be.jsx)(Q().p,{allowSelectionWithin:!1,children:(0,Be.jsx)(ze,{store:t,handleGenerateClick:f,isGenerating:g,titleStore:j})})]})]})}function Qe(e){const{placeholderText:t}=e,n=(0,d().yK)((e=>({textWrapper:{caretColor:e.lightTextColor,color:e.lightTextColor,paddingTop:4,paddingBottom:4}})),[]);return(0,Be.jsx)("div",{style:n.textWrapper,children:t})}const et=new(n(79179).z)(1);async function tt(e){const{store:t,chatXml:n,sessionId:o,onError:i,intl:r,serializedXMLEvaluatorState:a}=e,s=Y().default.getSessionContext(o);if(!s)return void i(r.formatMessage({id:"AIBlockV2.FailedToInitialize",defaultMessage:"Failed to initialize AI session"}));const l=s.evaluator;l.state.setState(a);const c=function(e,t){return(0,g().Y5)((0,u().P5)((0,p().rr)(e)),t,["CitationATagInnerTextRemover"]).map((e=>(0,m().KT)(e))).join("")}(n,l.state.getSerializedState());await l.commitStep({type:"assistant",value:c,id:9999,namespace:"end_to_end"});const d=s.temporaryClientSteps.findLast((e=>"assistantChat"===e.type));d&&B().createAndCommit({userAction:"aiBlockV2.updateAIBlockForCompletion",environment:t.environment,canUndo:!0,perform:e=>{const n=t.clone();n.getContentIds().forEach((t=>{B().applyOperation({store:n,operation:(0,f().$j)({blockParentId:n.id,recordId:t}),transaction:e})}));const o=(0,A().generateBlockStoresForClientChatStep)({environment:t.environment,clientStep:d,transaction:e,inMemoryRecordCache:t.environment.defaultRecordCache.inMemoryRecordCache,stripCitations:!0}).map((e=>e.cloneWithNewUIParent(t.getContentStore())));for(const i of o)j().R3({parentStore:t.getContentStore(),appendStore:i,transaction:e});B().applyOperation({store:n,operation:h().op.update({pointer:n.pointer,path:["format"],args:{ai_last_edited:Date.now()}}),transaction:e})}})}},887330:(e,t,n)=>{"use strict";n.d(t,{C:()=>i,L:()=>r});var o=()=>n(707513);function i(e){const{theme:t,isInHomeWidget:n}=e;return{display:"flex",alignItems:"center",fontSize:14,padding:6,...n?{height:24,width:24,color:t.lightTextColor,fill:t.lightIconColor}:{height:28,width:28,color:t.mediumIconColor,fill:t.mediumIconColor},fontWeight:o().Ue.regular,lineHeight:1,borderRadius:6}}function r(e){const{theme:t}=e;return{display:"flex",alignItems:"center",fontSize:14,height:28,padding:6,color:t.mediumIconColor,fontWeight:o().Ue.regular,lineHeight:1,borderRadius:4}}},12530:(e,t,n)=>{"use strict";n.d(t,{N:()=>r,Z:()=>s});n(667294);var o=n(785893);const i={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:16,height:16,fontSize:10,textAlign:"center",fontWeight:n(707513).Ue.semibold,borderRadius:4,color:n(568017).ZP.white,position:"static",marginLeft:6,WebkitFontSmoothing:"auto"};let r=function(e){return e[e.Red=0]="Red",e[e.Gray=1]="Gray",e}({});function a(e){return!!e&&e>0}const s=function(e){let{count:t,color:s,style:c,numberStyle:d,fadeIn:u}=e;const p=s===r.Red,m=(0,n(846550).yK)((e=>({badge:{...i,...c,...(t??0)>99&&{width:void 0,padding:2},background:p?e.redBadgeBackground:e.lightIconColor,...u&&{transition:"opacity 0.1s",opacity:a(t)?1:0}}})),[t,u,p,c]);return u||a(t)?(0,o.jsx)("div",{style:m.badge,children:(0,o.jsx)(l,{count:t,numberStyle:d})}):null};function l(e){let{count:t,numberStyle:n}=e;return t?1===t?(0,o.jsx)("span",{style:{marginLeft:-.5,...n},children:"1"}):t>99?(0,o.jsx)("span",{style:{letterSpacing:-.5,...n},children:"99+"}):t>9?(0,o.jsx)("span",{style:{letterSpacing:-.5,marginLeft:-.5,...n},children:t}):(0,o.jsx)("span",{style:{...n},children:t}):null}},44105:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var o=n(667294),i=()=>n(219727),r=()=>n(142735),a=()=>n(846550),s=()=>n(989478),l=()=>n(499110),c=()=>n(788860),d=()=>n(491927),u=()=>n(421654),p=()=>n(269299),m=()=>n(168441),g=()=>n(827282),h=n(785893);const f=(0,g().IU)("mobileLocked",{viewBox:"0 0 26 26",svg:(0,h.jsx)("path",{d:"M7.88672 23.417H18.1133C19.499 23.417 20.1758 22.7295 20.1758 21.2256V13.3408C20.1758 11.9873 19.6172 11.2891 18.4678 11.1709V8.46387C18.4678 4.41406 15.8145 2.45898 13 2.45898C10.1855 2.45898 7.53223 4.41406 7.53223 8.46387V11.2246C6.47949 11.3857 5.82422 12.0732 5.82422 13.3408V21.2256C5.82422 22.7295 6.50098 23.417 7.88672 23.417ZM9.26172 8.23828C9.26172 5.54199 10.9912 4.11328 13 4.11328C15.0088 4.11328 16.7383 5.54199 16.7383 8.23828V11.1602L9.26172 11.1709V8.23828Z"})}),y=(0,g().IU)("mobileUnlocked",{viewBox:"0 0 32 26",svg:(0,h.jsx)("path",{d:"M7.89355 23.417H18.1094C19.4951 23.417 20.1826 22.7295 20.1826 21.2256V13.3408C20.1826 12.0303 19.6562 11.332 18.582 11.1816V8.23828C18.582 5.54199 20.3115 4.11328 22.3203 4.11328C24.3291 4.11328 26.0586 5.54199 26.0586 8.23828V10.623C26.0586 11.2783 26.4346 11.6006 26.9287 11.6006C27.4014 11.6006 27.7881 11.3105 27.7881 10.623V8.46387C27.7881 4.41406 25.1348 2.45898 22.3203 2.45898C19.5059 2.45898 16.8525 4.41406 16.8525 8.46387V11.1602L8.1084 11.1816C6.72266 11.1816 5.82031 11.8584 5.82031 13.3408V21.2256C5.82031 22.7295 6.50781 23.417 7.89355 23.417Z"})}),v=(0,g().IU)("unlockedFilled",{viewBox:"0 0 16 16",svg:(0,h.jsx)("path",{d:"M2.33301 14.6338H8.94336C9.85938 14.6338 10.3105 14.1826 10.3105 13.1914V8.08496C10.3105 7.2168 9.95508 6.75195 9.24414 6.65625V4.83105C9.24414 3.22461 10.2627 2.35645 11.4863 2.35645C12.71 2.35645 13.7354 3.22461 13.7354 4.83105V6.28711C13.7354 6.76562 14.0156 7.01855 14.3848 7.01855C14.7471 7.01855 15.0273 6.7793 15.0273 6.28711V4.96094C15.0273 2.36328 13.2979 1.1123 11.4863 1.1123C9.6748 1.1123 7.94531 2.36328 7.94531 4.96094V6.64258L2.44922 6.64941C1.5332 6.64941 0.96582 7.10742 0.96582 8.08496V13.1914C0.96582 14.1826 1.41699 14.6338 2.33301 14.6338Z"})});var b=()=>n(482162),S=()=>n(826955),x=()=>n(154186),C=()=>n(654133),k=()=>n(49489);const _=function(e){let{store:t,disableTooltip:o,hideText:a,isInlineCollection:s,buttonStyle:l,lockStore:c}=e;const{isMobile:d}=(0,i().Fy)(),u=(0,r().qz)(c,n(385021).Z);return d?(0,h.jsx)(B,{store:t,lockStore:u,hideText:a}):(0,h.jsx)(P,{store:t,disableTooltip:o,hideText:a,isMobile:d,isInlineCollection:s,buttonStyle:l,lockStore:u})};function w(e,t,n){return{display:"flex",alignItems:"center",whiteSpace:"nowrap",fontSize:e?12:14,borderRadius:4,padding:"0 6px",marginRight:2,height:24,marginTop:e?1:0,marginLeft:e?0:-5,...t&&{marginLeft:e?8:12,marginRight:0},...n}}function I(e,t,n,o,i){return{...w(e,o,i),color:n.lightTextColor,fill:n.lightIconColor}}function j(e,t,n,o,i){return{...w(e,o,i),paddingLeft:5,border:`1px solid ${n.blueColor}`,color:n.blueColor,fill:n.blueColor}}function M(e){let{store:t}=e;const n=(0,a().Fg)(),o=(0,r().VK)((()=>t.getFormat().block_locked_by),[t]),i=(0,c().YB)(),d=(0,r().VK)((()=>o&&(0,l().Nz)(i,S().t1.createChildStore(t,{table:s().KJ,id:o}).getModel())),[o,i,t]);return o?(0,h.jsx)("div",{children:(0,h.jsx)(c()._H,{defaultMessage:"Locked by {lockedByPerson}{br}to prevent accidental editing.{br}<prompttext>Click to unlock</prompttext>",id:"pageLockIndicator.lockedTooltip",values:{lockedByPerson:(0,h.jsx)("b",{children:d}),br:(0,h.jsx)("br",{}),prompttext:e=>(0,h.jsx)("span",{style:{color:n.mediumInvertedTextColor},children:e})}})}):null}function T(e,t,n){p().createAndCommit({userAction:"PageLockTopbarIndicator.handleLockClick",environment:e,canUndo:!0,perform:n=>{u().Wq({environment:e,store:t,isLocked:!1,transaction:n})}}),n.setState({...n.state,justUnlocked:!0});const o=t.getType();if(o){var i;let n;t.isCollectionView()&&(n=t.getCollectionStore()),d().UJ(e,{from:"topbar",block_type:o,locked:!1,collection_id:null===(i=n)||void 0===i?void 0:i.id})}}function R(e,t,n){p().createAndCommit({userAction:"PageLockTopbarIndicator.handleUnlockClick",environment:e,canUndo:!0,perform:n=>{u().Wq({environment:e,store:t,isLocked:!0,transaction:n})}}),n.setState({...n.state,justUnlocked:!1});const o=t.getType();if(o){var i;let n;t.isCollectionView()&&(n=t.getCollectionStore()),d().UJ(e,{from:"topbar",block_type:o,locked:!0,collection_id:null===(i=n)||void 0===i?void 0:i.id})}}function P(e){let{store:t,disableTooltip:n,hideText:s,isMobile:l,isInlineCollection:d,buttonStyle:u,lockStore:p}=e;const g=(0,a().Fg)(),f=(0,i().O7)(),y=(0,o.useCallback)((()=>R(f,t,p)),[f,t,p]),S=(0,o.useCallback)((()=>T(f,t,p)),[f,t,p]),_=(0,r().VK)((()=>t.isLocked()),[t]),w=(0,r().VK)((()=>p.state.justUnlocked),[p]),P=(0,r().VK)((()=>b().default.state.open&&b().default.state.targetStore.id===t.id),[t.id]);return _?(0,h.jsx)(C().Z,{renderTooltip:()=>(0,h.jsx)(M,{store:t}),disableTooltip:n,render:e=>(0,h.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[P&&(0,h.jsx)(k().Z,{}),(0,h.jsxs)(x().Z,{style:I(l,0,g,d,u),onClick:S,...e,children:[(0,m().Q)({width:16,marginRight:s?void 0:4}),!s&&(0,h.jsx)("div",{style:{lineHeight:1},children:(0,h.jsx)(c()._H,{defaultMessage:"Locked",id:"pageLockIndicator.lockedButton.label"})})]})]})}):w?(0,h.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,h.jsx)(k().Z,{}),(0,h.jsxs)(x().Z,{style:j(l,0,g,d,u),onClick:y,hoveredStyle:{background:g.outlineBlueButtonHoveredBackground},pressedStyle:{background:g.outlineBlueButtonPressedBackground},children:[v({width:16,marginRight:s?void 0:4}),!s&&(0,h.jsx)("div",{style:{lineHeight:1},children:(0,h.jsx)(c()._H,{defaultMessage:"Re-lock",id:"pageLockIndicator.relockButton.label"})})]})]}):null}function B(e){let{store:t,lockStore:n,hideText:s}=e;const l=(0,a().Fg)(),d=(0,i().O7)(),u=(0,o.useCallback)((()=>R(d,t,n)),[d,t,n]),p=(0,o.useCallback)((()=>T(d,t,n)),[d,t,n]),m=(0,r().VK)((()=>t.isLocked()),[t]),{WindowSizeStore:g}=d,v=(0,r().VK)((()=>g.getSafePaddingLeftCSS(10)),[g]),b=(0,r().VK)((()=>g.getSafePaddingRightCSS(14)),[g]),S=(0,r().VK)((()=>n.state.justUnlocked),[n]);return m?(0,h.jsxs)(x().Z,{onClick:p,mobileFeedback:!0,style:{display:"flex",alignItems:"center",height:"100%",paddingLeft:v,paddingRight:b},children:[f({width:20,marginRight:6}),!s&&(0,h.jsx)("div",{children:(0,h.jsx)(c()._H,{defaultMessage:"Locked",id:"pageLockIndicator.mobileLockedButton.label"})})]}):S?(0,h.jsxs)(x().Z,{onClick:u,mobileFeedback:!0,style:{display:"flex",alignItems:"center",width:"100%",height:"100%",paddingLeft:v,paddingRight:b,color:l.blueColor,fill:l.blueColor},children:[y({height:26,width:32,marginRight:6}),!s&&(0,h.jsx)("div",{children:(0,h.jsx)(c()._H,{defaultMessage:"Re-lock",id:"pageLockIndicator.mobileRelockButton.label"})})]}):null}},407291:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});n(241792);var o=n(667294),i=()=>n(142735),r=()=>n(788860),a=()=>n(88476),s=()=>n(852465),l=()=>n(301741),c=()=>n(122671),d=n(785893);const u=function(e){const{origin:t,permissionsInviteStore:u,store:p,handleClickRemoveToken:m,handleInputChange:g,handleInputSubmit:h,defaultRoleForNonBot:f,right:y,focus:v,handleFocus:b}=e,S=(0,i().VK)((()=>0!==(0,n(122479).eL)()),[]),x="share_menu"===t||"add_members"===t,C="add_members"===t,[k,_]=(0,i().AF)(u),w=(0,n(219727).O7)(),{device:I}=w,j=(0,r().YB)(),{tokenQuery:M}=k,T=(0,n(551861).S)(p),R=k.inviteTargets.map((e=>{const t="newUser"===e.type?e.value.email:`${e.type}-${e.value.id}`,i=(0,a().OA)(e),s="newUser"===e.type||"existingUser"===e.type?e.value.email:void 0,c=i?T:void 0,u={key:t,target:e,onClickRemove:m,role:k.inviteRole,shouldWrap:x,showInfoIcon:Boolean(c)};return x&&s?(0,d.jsx)(n(654133).Z,{placement:n(998901).Placement.Top,disableTooltip:C,renderTooltip:()=>i?c||(0,d.jsx)(r()._H,{defaultMessage:"{email} will be invited as a guest",id:"ContextualInvite.permissions_invites.guest.tooltip",values:{email:s}}):s,render:n=>(0,o.createElement)("span",{...n,key:t},(0,d.jsx)(l().Z,{...u,backgroundColor:(0,a().gQ)(e)}))},t):(0,o.createElement)(l().Z,{...u,key:t})}));return(0,d.jsx)(c().ZP,{focus:I.isMobile?void 0:v,focusInitial:I.isMobile,focusAfterAnimation:!0,onClick:()=>{I.isMobile||null==b||b()},format:c().UR.Share,value:M,onChange:g,type:"email",tokens:R,disabled:!1,autoComplete:"off",placeholder:x?S?j.formatMessage({defaultMessage:"Add people, groups, or emails…",id:"ContexualInvites.inviteUserModal.searchInput.placeholderWithTeams"}):j.formatMessage({defaultMessage:"Add emails or people",id:"ContexualInvites.inviteUserModal.searchInput.placeholderWithoutBots"}):(0,s().Mm)(p)||(0,s().R$)(p)?j.formatMessage({id:"inviteUserModal.searchInput.placeholder",defaultMessage:"Search name or emails"}):j.formatMessage({id:"permissionsInvite.searchInput.placeholder",defaultMessage:"Search emails, names, or groups"}),onRemoveLastToken:()=>{const e={...k};e.inviteTargets=e.inviteTargets.slice(0,-1),0===e.inviteTargets.length&&(e.isInviteTargetsEmpty=!0,e.inviteRole=f),_(k)},right:y,inputFullWidth:!0,inputAndTokenWrapRightStyle:{paddingTop:w.device.isMobile?0:k.isInviteTargetsEmpty?7:6,paddingBottom:w.device.isMobile||x?0:4},onEmptySubmit:()=>h(),dontShowBorderBottom:I.isAndroid,showBorder:x,...!x&&{style:{padding:"10px  9px 4px 9px"}},...x&&{style:{borderRadius:4,paddingTop:k.isInviteTargetsEmpty?3:0,paddingBottom:0,...v&&{background:"none"}}}})}},953349:(e,t,n)=>{"use strict";n.d(t,{IH:()=>A,MF:()=>Z,N_:()=>V,U7:()=>E,ZP:()=>B,uV:()=>D});n(670560),n(267602),n(653476),n(470928),n(241792),n(228244);var o=n(667294),i=()=>n(219727),r=()=>n(142735),a=()=>n(846550),s=()=>n(714230),l=()=>n(235484),c=()=>n(788860),d=()=>n(513670),u=()=>n(855741),p=()=>n(696459),m=()=>n(824462),g=()=>n(388915),h=()=>n(527278),f=()=>n(762300),y=()=>n(729201),v=()=>n(624778),b=()=>n(15409),S=()=>n(821149),x=()=>n(270820),C=()=>n(947189),k=()=>n(876822),_=()=>n(138912),w=()=>n(385010),I=()=>n(827973),j=()=>n(740046),M=()=>n(312578),T=()=>n(388284),R=n(785893);const P=(0,c().vU)({channelSearchPlaceholder:{id:"notificationRuleSettings.selectChannelView.searchInput.placeholder",defaultMessage:"Search…"}});function B(e){const{currentNotificationChannels:t,onNotificationChannelSelect:n,onClose:a,onNewSlackAccountAdded:m,renderMenu:v,channelFilter:S,workflowExternalAuthenticationPointer:C,isMultiSelectMode:w,shouldHideSlackAccountSection:B}=e,F=(0,i().O7)(),{isMobile:Z}=(0,i().Fy)(),N=(0,r().Kw)(_().default.completeSlackAuthentications),K=e.currentExternalAuthentication??d().Ps(N),G=(0,o.useMemo)((()=>C?{type:"workflow",workflowExternalAuthenticationId:C.id}:K?{type:"external",botId:K.id}:void 0),[C,K]);o.useEffect((()=>{const e=C?null==C?void 0:C.spaceId:null==K?void 0:K.space_id;G&&e&&D({environment:F,spaceId:e,externalAuthConfig:G})}),[F,G,K,C]);const z=(null==C?void 0:C.id)??(null==K?void 0:K.id),[U,q]=o.useState(""),{loadedChannelsForAccount:H,isLoading:O}=E(G),W=(0,r().VK)((()=>_().default.integrations.state.find((e=>e.id===l().nO))),[]),Y=(0,r().VK)((()=>{var e;return null===(e=k().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),$=o.useCallback((e=>{K?n(e,K.parent_id):C&&n(e,C.id),w||a()}),[n,K,C,a,w]),X=L(),J=o.useCallback((e=>{const{channel:n}=e;return{key:n.id,render:e=>(0,R.jsx)(I().Z,{...e,icon:V({channel:n,styles:X.icon}),desktopIconStyle:{width:8},title:n.name,right:(null==t?void 0:t.some((e=>e.id===n.id)))&&(0,b().e)(X.icon)}),action:()=>{$(n)}}}),[$,X.icon,t]),{publicChannels:Q,privateChannels:ee,personalChannels:te}=o.useMemo((()=>function(e,t){const n=[],o=[],i=[];for(const r of e)t&&!t(r)||("public"===r.type?n.push(r):"private"===r.type?o.push(r):"me"===r.type?i.push(r):(0,p().t1)(r.type));return{publicChannels:n,privateChannels:o,personalChannels:i}}(H,S)),[S,H]),ne=o.useCallback((()=>Q.map((e=>({menuListItem:J({channel:e}),channelName:e.name})))),[Q,J]),oe=o.useCallback((()=>ee.map((e=>({menuListItem:J({channel:e}),channelName:e.name})))),[ee,J]),ie=o.useCallback((()=>te.map((e=>({menuListItem:J({channel:e}),channelName:e.name})))),[te,J]),re=o.useCallback((()=>ne().map((e=>{let{menuListItem:t,channelName:n}=e;if(A({channelName:n,query:U}))return t})).filter(p().$K)),[ne,U]),ae=o.useCallback((()=>oe().map((e=>{let{menuListItem:t,channelName:n}=e;if(A({channelName:n,query:U}))return t})).filter(p().$K)),[oe,U]),se=o.useCallback((()=>ie().map((e=>{let{menuListItem:t,channelName:n}=e;if(A({channelName:n,query:U}))return t})).filter(p().$K)),[ie,U]),le=o.useCallback((()=>K?(0,f().jg)(K).organizationName:"Workflows organization"),[K]),ce=o.useCallback((()=>{if(!z)return[];const e=[],t=re(),n=ae(),o=se();return o.length>0&&e.push({key:"personal-channels",render:e=>(0,R.jsx)(T().Z,{...e,title:le()}),items:o}),t.length>0&&e.push({key:"public-channels",render:e=>(0,R.jsx)(T().Z,{...e,topBorder:o.length>0,title:0===o.length&&le()}),items:t}),n.length>0&&e.push({key:"private-channels",render:e=>(0,R.jsx)(T().Z,{...e,topBorder:t.length>0,title:0===o.length&&t.length>0&&le()}),items:n}),e}),[z,re,ae,se,le]),de=(0,y().Z)(O,500,300);if(!z||!W)return null;const ue=[{key:"search-input-section",items:[{key:"search-input-item",action:()=>{},render:e=>(0,R.jsx)("div",{children:(0,R.jsx)(j().ZP,{...e,inputLeft:(0,R.jsx)(j().f_,{icon:x().R}),inputRight:de&&(0,R.jsx)(M().Z,{style:{marginRight:2}}),showClearButton:!0,placeholder:h().Z.formatMessage(P.channelSearchPlaceholder),focusInitial:!Z,value:U,onChange:e=>{q(e.target.value)}})})}],render:e=>(0,R.jsx)(T().Z,{...e})},...ce()];return t||B||ue.push({key:"add-another-slack-account-section",items:[{key:"add-another-slack-account-item",action:async()=>{if(!Y)return;const e=await g().hM({environment:F,integration:W,spaceId:Y,from:"collection_view_settings"});u().x.isFail(e)||m()},render:e=>(0,R.jsx)(I().Z,{...e,icon:(0,R.jsx)("img",{src:s().Z.images.externalIntegrations.slackIconPng,style:{width:18,height:"auto"}}),title:(0,R.jsx)(c()._H,{id:"notificationRuleSettings.selectChannelView.setupAnotherSlackAccount.label",defaultMessage:"Add another Slack account"})})}],render:e=>(0,R.jsx)(T().Z,{...e,topBorder:!0})}),(0,R.jsx)(R.Fragment,{children:v(ue)})}function L(){return(0,a().yK)((e=>({icon:{marginLeft:8,width:12,height:12,color:e.lightTextColor},container:{backgroundColor:e.popoverBackground,marginTop:12,marginBottom:6},searchIcon:{width:14,height:14,marginRight:6,flexGrow:0,flexShrink:0,color:e.regularIconColor}})),[])}function A(e){const{channelName:t,query:n}=e;return 0===n.length||t.toLocaleLowerCase().indexOf(n.trim().toLocaleLowerCase())>=0}function V(e){const{channel:t,styles:n}=e;return"private"===t.type?(0,S().b)(n):"me"===t.type?(0,v().p)(n):(0,C().J)(n)}const F=15e3;function E(e){return(0,r().VK)((()=>{if(!e)return{loadedChannelsForAccount:[],isLoading:!1};const t=w().l.getStateForBot(e);return{loadedChannelsForAccount:Object.values(t.channels),isLoading:t.fetching}}),[e])}async function D(e){const{environment:t,externalAuthConfig:n,spaceId:o}=e,i=w().l.getStateForBot(n);if(i.fetching||Date.now()-i.lastRefreshed<F)return;let r;for(w().l.updateStateForBot(n,{fetching:!0,lastRefreshed:Date.now()});;){const e=await m().callApi({eventName:"getExternalNotificationChannels",environment:t,data:{spaceId:o,cursor:r,...n}});if("success"!==e.type){console.error(e.error);break}{const t={};for(const n of e.data.channels)t[n.id]=n;if(w().l.addChannelsForBot(n,t),r=e.data.cursor,!r)break}}w().l.updateStateForBot(n,{fetching:!1})}const Z=o.forwardRef(((e,t)=>{const{channel:n,currentNotificationChannels:o,...i}=e,r=L();return(0,R.jsx)(I().Z,{ref:t,...i,icon:V({channel:n,styles:r.icon}),desktopIconStyle:{width:8},title:n.name,right:(null==o?void 0:o.some((e=>e.id===n.id)))&&(0,b().e)(r.icon)})}));Z.displayName="SlackChannelMenuItem"},49489:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});n(667294);var o=n(785893);const i=function(){const e=(0,n(846550).yK)((e=>({separator:{height:14,width:1,marginLeft:6,marginRight:6,background:e.darkDividerColor}})),[]);return(0,o.jsx)("div",{style:e.separator})}},681035:(e,t,n)=>{"use strict";n.d(t,{S:()=>r});var o=()=>n(677559);const i=new(o().Ss)("CollectionItemCover",(async()=>{const{CollectionItemCover:e}=await Promise.all([n.e(62743),n.e(37912)]).then(n.bind(n,682652));return{CollectionItemCover:e}})),r=(0,o().kF)(i,(e=>e.CollectionItemCover))},762300:(e,t,n)=>{"use strict";n.d(t,{P9:()=>l,YJ:()=>c,jc:()=>s,jg:()=>a});n(670560),n(267602),n(653476);var o=()=>n(235484),i=()=>n(530980),r=()=>n(525807);function a(e){if(e.integration_id!==o().nO)throw"Cannot render account for integration.";const t=/(.+) - (.+)/.exec(e.account_name);if(!t)return{accountName:e.account_name};const[,n,i]=t;return{organizationName:n,accountName:i}}function s(e){return i().kk5.fromValue(r().PJ,e).getSlackWorkspaceId()}function l(e,t){return t?e.filter((e=>{const n=s(e);return!!n&&t(n)})):e}function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n={};for(const o of e){const{accountName:e,organizationName:i}=a(o);d({query:t,accountName:e,organizationName:i})&&(n[e]||(n[e]=[]),n[e].push({externalAuthentication:o,workspaceName:i}))}return n}function d(e){const{accountName:t,organizationName:n,query:o}=e;if(0===o.length)return!0;const i=t.toLocaleLowerCase().indexOf(o.trim().toLocaleLowerCase())>=0,r=!!n&&n.toLocaleLowerCase().indexOf(o.trim().toLocaleLowerCase())>=0;return i||r}},17922:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var o=()=>n(239482),i=()=>n(852465),r=()=>n(345918);function a(e,t){return(0,r().Q6)(e)?{isGuestRequestRequired:!0}:t?{isStoreInTeam:!0,teamAllowsGuests:!0,spaceAllowsGuests:!0,isGuestRequestRequired:!1}:{isStoreInTeam:!1,spaceAllowsGuests:!0,isGuestRequestRequired:!1}}const s=function(e){return(0,n(142735).VK)((()=>{if((0,i().R$)(e))return{isStoreInTeam:!1,spaceAllowsGuests:!0,isGuestRequestRequired:!1};if(!(0,i().OY)(e))return(0,r().kt)(e)?a(e,void 0):{isStoreInTeam:!1,spaceAllowsGuests:!0,isGuestRequestRequired:!1};const t=(0,o().VP)(e),s=(0,o().Pj)(e),l=s||n(876822).default.state.currentSpaceStore;if((0,r().kt)(l))return a(l,t);const c=!(null!=s&&s.getDisableGuests());return t?{isStoreInTeam:!0,teamAllowsGuests:!t.getDisableGuests(),spaceAllowsGuests:c,isGuestRequestRequired:!1}:{isStoreInTeam:!1,spaceAllowsGuests:c,isGuestRequestRequired:!1}}),[e])}},551861:(e,t,n)=>{"use strict";n.d(t,{S:()=>a});n(667294);var o=()=>n(788860),i=()=>n(17922),r=n(785893);function a(e){const t=(0,i().Z)(e);return t.isGuestRequestRequired?(0,r.jsx)(o()._H,{id:"contextualInvite.buttonAndTokenTooltip.guestRequestRequired",defaultMessage:"This guest must be approved by a workspace owner first"}):t.isStoreInTeam?t.teamAllowsGuests?void 0:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:(0,r.jsx)(o()._H,{id:"contextualInvite.buttonAndTokenTooltip.teamDisablesGuestsAlertLine1",defaultMessage:"This teamspace doesn't allow guests."})}),(0,r.jsx)("div",{children:(0,r.jsx)(o()._H,{id:"contextualInvite.buttonAndTokenTooltip.teamDisablesGuestsAlertLine2",defaultMessage:"Remove any guests to continue."})})]}):t.spaceAllowsGuests?void 0:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:(0,r.jsx)(o()._H,{id:"contextualInvite.buttonAndTokenTooltip.spaceDisablesGuestsAlertLine1",defaultMessage:"This workspace doesn't allow guests."})}),(0,r.jsx)("div",{children:(0,r.jsx)(o()._H,{id:"contextualInvite.buttonAndTokenTooltip.spaceDisablesGuestsAlertLine2",defaultMessage:"Remove any guests to continue."})})]})}},624778:(e,t,n)=>{"use strict";n.d(t,{p:()=>o().p});var o=()=>n(775404)},850790:(e,t,n)=>{"use strict";n.d(t,{K:()=>i});n(667294);var o=n(785893);const i=(0,n(827282).IU)("boltFilled",{svg:(0,o.jsx)("path",{d:"M0 12.117c0 .38.293.664.703.664h5.518l-2.91 7.91c-.381 1.006.664 1.543 1.318.723l8.877-11.094c.166-.205.254-.4.254-.625 0-.371-.293-.664-.703-.664H7.539l2.91-7.91C10.83.115 9.785-.422 9.131.408L.254 11.492c-.166.215-.254.41-.254.625z"}),viewBox:"0 0 14 22"})},756085:(e,t,n)=>{"use strict";n.d(t,{f:()=>i});n(667294);var o=n(785893);const i=(0,n(827282).IU)("chevronLeft",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M3.61816 8.06445C3.61816 8.29688 3.70703 8.49512 3.8916 8.67285L9.22363 13.8887C9.36719 14.0391 9.55859 14.1143 9.77734 14.1143C10.2217 14.1143 10.5703 13.7725 10.5703 13.3213C10.5703 13.1025 10.4814 12.9043 10.3311 12.7539L5.52539 8.06445L10.3311 3.375C10.4814 3.21777 10.5703 3.01953 10.5703 2.80078C10.5703 2.35645 10.2217 2.01465 9.77734 2.01465C9.55859 2.01465 9.36719 2.08984 9.22363 2.24023L3.8916 7.45605C3.70703 7.63379 3.625 7.83203 3.61816 8.06445Z"})})},52446:(e,t,n)=>{"use strict";n.d(t,{D:()=>i});n(667294);var o=n(785893);const i=(0,n(827282).IU)("doubleChevronLeft",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M7.07031 13.8887C7.2207 14.0391 7.40527 14.1211 7.62402 14.1211C8.06836 14.1211 8.41699 13.7725 8.41699 13.3281C8.41699 13.1094 8.32812 12.9043 8.17773 12.7539L3.37207 8.05762L8.17773 3.375C8.32812 3.21777 8.41699 3.0127 8.41699 2.80078C8.41699 2.35645 8.06836 2.00781 7.62402 2.00781C7.40527 2.00781 7.2207 2.08984 7.07031 2.24023L1.73828 7.44922C1.56055 7.62012 1.46484 7.8252 1.46484 8.06445C1.46484 8.29688 1.55371 8.49512 1.73828 8.67969L7.07031 13.8887ZM13.1748 13.8887C13.3252 14.0391 13.5098 14.1211 13.7354 14.1211C14.1797 14.1211 14.5283 13.7725 14.5283 13.3281C14.5283 13.1094 14.4395 12.9043 14.2891 12.7539L9.4834 8.05762L14.2891 3.375C14.4395 3.21777 14.5283 3.0127 14.5283 2.80078C14.5283 2.35645 14.1797 2.00781 13.7354 2.00781C13.5098 2.00781 13.3252 2.08984 13.1748 2.24023L7.84961 7.44922C7.66504 7.62012 7.57617 7.8252 7.56934 8.06445C7.56934 8.29688 7.66504 8.49512 7.84961 8.67969L13.1748 13.8887Z"})})},68744:(e,t,n)=>{"use strict";n.d(t,{t:()=>i});n(667294);var o=n(785893);const i=(0,n(827282).IU)("doubleChevronRight",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M2.25781 14.1211C2.47656 14.1211 2.66797 14.0391 2.81836 13.8887L8.14355 8.67969C8.32812 8.49512 8.41699 8.29688 8.41699 8.06445C8.41699 7.8252 8.32812 7.62012 8.14355 7.44922L2.81836 2.24023C2.66797 2.08984 2.4834 2.00781 2.25781 2.00781C1.81348 2.00781 1.46484 2.35645 1.46484 2.80078C1.46484 3.0127 1.55371 3.21777 1.7041 3.375L6.50977 8.05762L1.7041 12.7539C1.55371 12.9043 1.46484 13.1094 1.46484 13.3281C1.46484 13.7725 1.81348 14.1211 2.25781 14.1211ZM8.36914 14.1211C8.58789 14.1211 8.77246 14.0391 8.92285 13.8887L14.2549 8.67969C14.4395 8.49512 14.5283 8.29688 14.5283 8.06445C14.5283 7.8252 14.4326 7.62012 14.2549 7.44922L8.92285 2.24023C8.77246 2.08984 8.58789 2.00781 8.36914 2.00781C7.9248 2.00781 7.56934 2.35645 7.56934 2.80078C7.56934 3.0127 7.66504 3.21777 7.81543 3.375L12.6211 8.05762L7.81543 12.7539C7.66504 12.9043 7.56934 13.1094 7.56934 13.3281C7.56934 13.7725 7.9248 14.1211 8.36914 14.1211Z"})})},109806:(e,t,n)=>{"use strict";n.d(t,{c:()=>i});n(667294);var o=n(785893);const i=(0,n(827282).IU)("eye",{viewBox:"0 0 32 32",svg:(0,o.jsx)("path",{d:"M16.006 25.812c8.863 0 14.994-7.17 14.994-9.406C31 14.16 24.858 7 16.006 7 7.252 7 1 14.16 1 16.406c0 2.236 6.252 9.406 15.006 9.406zm0-3.242a6.194 6.194 0 01-6.197-6.164c-.012-3.452 2.744-6.164 6.197-6.164 3.419 0 6.185 2.711 6.185 6.164 0 3.364-2.766 6.164-6.185 6.164zm0-3.94c1.228 0 2.246-1.007 2.246-2.224 0-1.228-1.018-2.235-2.246-2.235-1.24 0-2.258 1.007-2.258 2.235 0 1.217 1.018 2.224 2.258 2.224z"})})},85876:(e,t,n)=>{"use strict";n.d(t,{N:()=>i});n(667294);var o=n(785893);const i=(0,n(827282).IU)("eyePadded",{viewBox:"0 0 24 24",svg:(0,o.jsx)("path",{d:"M12 17.9912C17.6055 17.9912 21.3857 13.4727 21.3857 12.0713C21.3857 10.6699 17.5986 6.1582 12 6.1582C6.47656 6.1582 2.60742 10.6699 2.60742 12.0713C2.60742 13.4727 6.46973 17.9912 12 17.9912ZM12 16.6787C7.63184 16.6787 4.15918 13.0283 4.15918 12.0713C4.15918 11.2715 7.63184 7.4707 12 7.4707C16.3613 7.4707 19.8408 11.2715 19.8408 12.0713C19.8408 13.0283 16.3613 16.6787 12 16.6787ZM12 15.7559C14.0508 15.7559 15.6914 14.0811 15.6914 12.0713C15.6914 10.0137 14.0508 8.39355 12 8.39355C9.94238 8.39355 8.29492 10.0137 8.30176 12.0713C8.31543 14.0811 9.94238 15.7559 12 15.7559ZM12 13.2607C11.3369 13.2607 10.7969 12.7275 10.7969 12.0713C10.7969 11.415 11.3369 10.8818 12 10.8818C12.6631 10.8818 13.1963 11.415 13.1963 12.0713C13.1963 12.7275 12.6631 13.2607 12 13.2607Z"})})},710125:(e,t,n)=>{"use strict";n.d(t,{l:()=>i});n(667294);var o=n(785893);const i=(0,n(827282).IU)("import",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M13.291 14.5723C13.291 14.1484 12.9902 13.834 12.5732 13.834H8.06836C8.24609 13.8203 8.42383 13.7314 8.56055 13.5947L13.0586 9.08301C13.2158 8.91895 13.291 8.74121 13.291 8.54297C13.291 8.12598 12.9902 7.81836 12.5801 7.81836C12.3682 7.81836 12.1836 7.90039 12.0469 8.03711L10.4951 9.56836L8.69043 11.585L8.75195 10.1084V1.61133C8.75195 1.16016 8.44434 0.852539 8 0.852539C7.5625 0.852539 7.25488 1.16016 7.25488 1.61133V10.1084L7.30957 11.5781L5.50488 9.56836L3.95312 8.03711C3.82324 7.90039 3.63184 7.81836 3.42676 7.81836C3.0166 7.81836 2.70898 8.12598 2.70898 8.54297C2.70898 8.74121 2.78418 8.91895 2.94141 9.08301L7.44629 13.5947C7.58301 13.7314 7.75391 13.8203 7.93848 13.834H3.44043C3.0166 13.834 2.70898 14.1484 2.70898 14.5723C2.70898 14.9893 3.0166 15.3037 3.44043 15.3037H12.5732C12.9902 15.3037 13.291 14.9893 13.291 14.5723Z"})})},257185:(e,t,n)=>{"use strict";n.d(t,{y:()=>o().y});var o=()=>n(949489)},953293:(e,t,n)=>{"use strict";n.d(t,{R:()=>o().R});var o=()=>n(519454)},960852:(e,t,n)=>{"use strict";n.d(t,{N:()=>i});n(667294);var o=n(785893);const i=(0,n(827282).IU)("repeat",{viewBox:"0 0 16 14",svg:(0,o.jsx)("path",{d:"M1.185 7.317a.689.689 0 00.697-.704v-.601c0-1.19.806-1.942 2.064-1.942H9.23v1.573c0 .328.199.52.527.52a.66.66 0 00.403-.144l2.68-2.236c.253-.212.26-.547 0-.765L10.16.782A.62.62 0 009.757.64c-.328 0-.527.184-.527.52v1.53H4.05C1.875 2.69.48 3.9.48 5.875v.738c0 .397.308.704.705.704zm13.624-.649a.689.689 0 00-.698.704v.608c0 1.19-.806 1.942-2.064 1.942H6.763V8.35c0-.329-.199-.52-.527-.52a.66.66 0 00-.403.144l-2.68 2.242c-.26.212-.26.547 0 .759l2.68 2.242a.66.66 0 00.403.143c.328 0 .527-.191.527-.52v-1.544h5.181c2.174 0 3.569-1.21 3.569-3.179v-.745a.695.695 0 00-.704-.704z"})})},947189:(e,t,n)=>{"use strict";n.d(t,{J:()=>o().J});var o=()=>n(121183)},848854:(e,t,n)=>{"use strict";n.d(t,{v:()=>o().v});var o=()=>n(545914)},586365:(e,t,n)=>{"use strict";n.d(t,{c:()=>o().c});var o=()=>n(562027)},110372:(e,t,n)=>{"use strict";n.d(t,{YF:()=>c,bl:()=>l,gF:()=>a,i6:()=>d,lZ:()=>s});var o=()=>n(954949),i=()=>n(594546),r=()=>n(749826);function a(e,t){const n=(0,o().Si)(t.callout_key);n&&(t.placement_key=(0,o().pU)(n)),(0,i().j)({environment:e,event:{eventName:"callout_show",eventProperties:t}}),r().default.logEvent("callout_show",t.callout_key)}function s(e,t){const n=(0,o().Si)(t.callout_key);n&&(t.placement_key=(0,o().pU)(n)),(0,i().j)({environment:e,event:{eventName:"callout_click",eventProperties:t}}),r().default.logEvent("callout_click",t.callout_key)}function l(e,t){const n=(0,o().Si)(t.callout_key);n&&(t.placement_key=(0,o().pU)(n)),(0,i().j)({environment:e,event:{eventName:"callout_dismiss",eventProperties:t}}),r().default.logEvent("callout_dismiss",t.callout_key)}function c(e,t){const{eligible_callouts:n,required_arg_timeout:o,required_args_run_duration:r,eligibility_timeouts:a,blocklist:s}=t;(0,i().j)({environment:e,event:{eventName:"callout_coordinator_resolved",eventProperties:{eligible_callouts:n,required_arg_timeout:o,required_args_run_duration:r,eligibility_timeouts:a,blocklist:s}}})}function d(e,t){(0,i().j)({environment:e,event:{eventName:"callout_feature_interaction",eventProperties:t}})}},129813:(e,t,n)=>{"use strict";n.r(t),n.d(t,{RequestMembersModal:()=>R,default:()=>P,messages:()=>T});var o=n(667294),i=()=>n(219727),r=()=>n(142735),a=()=>n(846550),s=()=>n(788860),l=()=>n(568017),c=()=>n(707513),d=()=>n(930085),u=()=>n(849129),p=()=>n(102182),m=()=>n(206352),g=()=>n(291198),h=()=>n(198829),f=()=>n(923550),y=()=>n(967092),v=()=>n(906651),b=()=>n(67961),S=()=>n(407291),x=()=>n(711658),C=()=>n(303858),k=()=>n(352230),_=()=>n(88476),w=()=>n(998901),I=()=>n(282194),j=()=>n(136765),M=n(785893);const T=(0,s().vU)({reason_placeholder:{id:"RequestMembersModal.reason.placeholder",defaultMessage:"Add a reason (optional)"}});function R(e){const t=(0,i().O7)(),{store:n,origin:R,analyticsFrom:P}=e,{modalOpen:B,focus:L}=(0,r().VK)((()=>{const{open:e,focus:t}=I().default.state;return{modalOpen:e,focus:t}}),[]),A=(0,o.useCallback)((e=>{B&&I().default.setState({...I().default.state,open:!0,focus:e})}),[B]),V=(0,r().qz)(void 0,j().Z),F=(0,s().YB)(),E=(0,a().yK)((()=>({modalStyle:{alignSelf:"center",overflow:"visible",top:0,width:420},container:{padding:20},title:{fontWeight:c().Ue.medium,marginBottom:10},reasonTitle:{color:l().ZP.mediumTextColor,marginTop:10,marginBottom:5},footer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:15},requestInvitesButton:{marginLeft:20}})),[]);(0,o.useEffect)((()=>{A("invites")}),[A]);const D=e=>{e.currentTarget===e.target&&A("none")},Z=async()=>{d().d(t,{...C().Oh(t,V.state.contextualInviteStore),from:P}),u().eH({permissionsInviteStore:V.state.permissionsInviteStore,contextualInviteStore:V.state.contextualInviteStore}),V.state.contextualInviteStore.startRequestMembership();const e=V.state.contextualInviteStore.state.invitedUsers;I().default.close();const o=await C().fC({environment:t,spaceStore:n,originId:void 0,originType:P,reasonMessage:V.state.permissionsInviteStore.state.emailMessage,contextualInviteStore:V.state.contextualInviteStore,intl:F});N({success:o,intl:F,users:e}),V.reset()},N=e=>{const{success:t,intl:n,users:o}=e;0!==o.length&&(t?p().oV({label:n.formatMessage({id:"requestMembersModal.requestSuccess.toast",defaultMessage:"Successfully requested membership for {users} to your workspace admins."},{users:C().uJ(o,n)})}):p().oV({label:n.formatMessage({id:"requestMembersModal.requestFail.toast",defaultMessage:"Failed to invite {users} to the workspace."},{users:C().uJ(o,n)})}))};return(0,M.jsx)(f().Z,{modalStyle:E.modalStyle,open:B,onDismiss:async()=>{if(!(await(0,_().Aw)({environment:t,permissionsInviteStoreState:V.state.permissionsInviteStore.state,from:"space_settings_add_members"})))return I().default.close(),void V.reset();A("none")},renderContent:()=>(0,M.jsxs)("div",{style:E.container,onClick:D,children:[(0,M.jsx)("div",{style:E.title,onClick:D,children:(0,M.jsx)(s()._H,{id:"requestMembersModal.title",defaultMessage:"Request to invite members"})}),(0,M.jsx)(y().ZP,{popupType:y().kQ.Popup,alignmentToOrigin:w().Alignment.Start,placementToOrigin:w().Placement.Bottom,open:"invites"===L,sameWidthAsOrigin:!0,originGap:10,disableMouseCapture:!0,origin:(0,M.jsx)(S().Z,{permissionsInviteStore:V.state.permissionsInviteStore,store:n,handleClickRemoveToken:e=>{u().PV({targetToRemove:e,permissionsInviteStore:V.state.permissionsInviteStore,defaultRoleForNonBot:"read_and_write"})},handleInputChange:async e=>{A("invites"),await u().jC({environment:t,event:e,permissionsInviteStore:V.state.permissionsInviteStore})},handleInputSubmit:async()=>{},origin:"add_members",defaultRoleForNonBot:"read_and_write",right:(0,M.jsx)("div",{}),focus:"invites"===L,handleFocus:()=>A("invites")}),onDismiss:()=>A("none"),render:()=>{const e=(0,M.jsx)(x().Z,{permissionsInviteStore:V.state.permissionsInviteStore,store:n,defaultRoleForSpaceBot:"editor",shouldShowBots:!1,shouldShowGroups:!1,sectionRenderLimit:10,membersOnly:!1}),t={menuType:k().o.Popup,disableScroller:!1};return(0,M.jsx)("div",{children:(0,M.jsx)(h().Z,{...t,width:380,children:e})})},style:{width:"100%"}}),(0,M.jsx)("div",{style:E.reasonTitle,onClick:D,children:(0,M.jsx)(s()._H,{id:"requestMembersModal.reasonForRequest.title",defaultMessage:"Reason for request"})}),(0,M.jsx)(m().Z,{debugName:"RequestMembersModal",capture:!0,allowEsc:!0,children:(0,M.jsx)(g().Z,{textarea:!0,style:{padding:8},value:V.state.permissionsInviteStore.state.emailMessage,focus:"reason"===L,onFocus:()=>A("reason"),onChange:e=>{V.state.permissionsInviteStore.setState({...V.state.permissionsInviteStore.state,emailMessage:e.target.value})},placeholder:F.formatMessage(T.reason_placeholder)})}),(0,M.jsxs)("div",{style:E.footer,onClick:D,children:[(0,M.jsx)(b().Z,{isSecondaryColor:!0,isSmall:!0,isMultiline:!0,children:(0,M.jsx)(s()._H,{id:"RequestMembersModal.caption",defaultMessage:"Your admins will approve or decline your request."})}),(0,M.jsx)(v().Z,{isLarge:!0,style:E.requestInvitesButton,onClick:Z,children:(0,M.jsx)(s()._H,{id:"requestMembersModal.requestInvitesButton.label",defaultMessage:"Request invites"})})]})]}),origin:(0,M.jsx)("div",{onClick:()=>{I().default.open()},children:R})})}const P=R},356140:(e,t,n)=>{"use strict";n.d(t,{W:()=>r});var o=()=>n(142735),i=()=>n(876822);function r(){const{currentSpaceStore:e}=(0,o().VK)((()=>i().default.state),[]);return null==e?void 0:e.id}},857719:(e,t,n)=>{"use strict";n.d(t,{J7:()=>w,Nx:()=>S,Pb:()=>b,Vc:()=>p,Vw:()=>C,Xg:()=>u,a3:()=>I,bj:()=>x,uI:()=>j,us:()=>y,w3:()=>m});n(241792);var o=n.n(n(294184)),i=n(667294),r=()=>n(846550),a=()=>n(696459),s=()=>n(802911),l=()=>n(78078),c=()=>n(521635),d=n(785893);const u=i.forwardRef((function(e,t){const{children:i,type:r,gap:a,withBottomPadding:s,style:l,onMouseDown:u,onClick:p,onDoubleClick:m,onContextMenu:g}=e,h=(0,n(309797).n1)(r),f=(0,n(142735).VK)((()=>c().Z.getPanelState("peek").isOpen&&"static_sidebar"===c().Z.getPanelState("peek").displayStyle),[]);return(0,d.jsx)("div",{className:o()("layout",{"layout-wide":"wide"===r,"layout-wide-right-margin-expanded":"wide-right-margin-expanded"===r,"layout-side-peek":"side-peek"===r,"layout-center-peek":"center-peek"===r&&!f,"layout-center-peek-with-layout-panel":"center-peek"===r&&f,"layout-home":"home"===r,"layout-home-phone":"home-phone"===r,"layout-home-redesign-desktop":"home-redesign-desktop"===r,"layout-form":"form"===r,"layout-form-viewer":"form-viewer"===r,"layout-form-viewer-embed":"form-viewer-embed"===r,"layout-phone":"phone"===r,"layout-tablet":"tablet"===r,"layout-template-preview":"template-preview"===r,"layout-chat":"chat"===r,"layout-layout-editor":"layout-editor"===r,"layout-layout-editor-wide":"layout-editor-wide"===r,"layout-layout-editor-narrow":"layout-editor-narrow"===r,"layout-marketplace":"marketplace"===r,"layout-marketplace-mobile":"marketplace-mobile"===r,"layout-team-home":"team-home"===r,"layout-team-home-mobile":"team-home-mobile"===r,"layout-create-post":"create-post"===r}),style:{paddingBottom:s?h:void 0,gap:a,...l},ref:t,onMouseDown:u,onClick:p,onDoubleClick:m,onContextMenu:g,children:i})})),p="layout-content",m="layout-full",g="layout-margin-left",h="layout-margin-right",f="layout-nested-grid",y="hide-scrollbar",v="layout-column",b=i.forwardRef((function(e,t){return(0,d.jsx)("div",{className:o()(p,e.className),style:e.style,ref:t,children:e.children})}));function S(e){return(0,d.jsx)("div",{className:m,style:e.style,children:e.children})}function x(e){return(0,d.jsx)("div",{className:g,style:{...e.style,pointerEvents:"none"},children:e.children})}function C(e){return(0,d.jsx)("div",{className:h,style:{...e.style,pointerEvents:"none"},children:e.children})}const k=(0,i.forwardRef)((function(e,t){return(0,d.jsx)("div",{className:o()(f,e.className),onClick:e.onClick,style:e.style,role:e.role,id:e.id,"aria-labelledby":e["aria-labelledby"],ref:t,children:e.children})}));function _(e){return"left-aligned"===e?"flex-start":"centered"===e?"center":"right-tabs"===e?"flex-end":void(0,a().t1)(e)}function w(e){const{items:t,style:n,index:o,setIndex:a,title:c}=e,u=(0,i.useRef)([]),p="centered"===n||"right-tabs"===n,m=(0,r().yK)((e=>({icon:{width:16,height:16,fill:"currentColor"},label:{fontSize:14,fontWeight:600},header:"right-tabs"===n?{display:"flex",justifyContent:"space-between",alignItems:"baseline"}:{},tablist:"right-tabs"===n?{display:"flex"}:{},tab:p?{cursor:"pointer",border:"none",padding:"6px 12px",borderRadius:20,color:e.text.secondary,background:"none"}:{cursor:"pointer",border:"none",borderBottom:"2px solid",borderColor:"transparent",padding:"6px 8px 12px",color:e.text.secondary,background:"none"},tabSelected:p?{color:e.text.primary,background:e.tint.regular}:{color:e.text.primary,borderColor:e.regularTextColor}})),[p,n]),g=(0,i.useId)(),h=(0,i.useCallback)((e=>`${g}-tab-${e}`),[g]),f=(0,i.useCallback)((e=>`${g}-tabpanel-${e}`),[g]),y=(0,i.useCallback)((e=>{let n;var i;("ArrowLeft"===e.key?(e.preventDefault(),n=(o+t.length-1)%t.length):"ArrowRight"===e.key&&(e.preventDefault(),n=(o+1)%t.length),void 0!==n)&&(a(n),null===(i=u.current[n])||void 0===i||i.focus())}),[o,a,t.length]);return(0,d.jsx)(s().Z,{name:"PageLayoutTabs",children:(0,d.jsxs)(k,{children:[(0,d.jsx)(b,{children:(0,d.jsxs)("div",{style:m.header,children:["right-tabs"===n&&c,(0,d.jsx)("div",{role:"tablist",style:m.tablist,children:(0,d.jsx)(l().X2,{justifyContent:_(n),children:t.map(((e,t)=>{var n;return(0,d.jsx)("button",{ref:e=>{e&&(u.current[t]=e)},id:h(t),role:"tab","aria-controls":f(t),"aria-selected":t===o,tabIndex:t===o?void 0:-1,onKeyDown:y,style:{...m.tab,...t===o&&m.tabSelected},onClick:e=>{e.stopPropagation(),a(t)},children:(0,d.jsxs)(l().X2,{gap:4,alignItems:"center",children:[null===(n=e.icon)||void 0===n?void 0:n.call(e,m.icon),e.label&&(0,d.jsx)("div",{style:m.label,children:e.label})]})},e.key)}))})})]})}),(0,d.jsx)(k,{id:f(o),role:"tabpanel","aria-labelledby":h(o),children:t[o]?t[o].children:null})]})})}function I(e){return(0,d.jsx)("div",{className:o()(v,e.className),style:{"--min-column-width":e.minWidth?`${e.minWidth}px`:"100%",...e.style},children:e.children})}function j(e){return(0,d.jsxs)(I,{minWidth:e.minWidth,className:e.className,style:e.style,children:[e.left,e.right]})}},452220:(e,t,n)=>{"use strict";n.d(t,{$:()=>s});n(667294);var o=()=>n(142735),i=()=>n(846550),r=()=>n(707513),a=n(785893);function s(e){const{children:t,style:n}=e,{store:s}=e.icon?e:{},l=(0,o().VK)((()=>{var e;return"hide"!==(null==s||null===(e=s.getAssociatedCollectionStore())||void 0===e||null===(e=e.getLayoutStore())||void 0===e||null===(e=e.getFormat())||void 0===e?void 0:e.property_icons_visibility)}),[s]),c=(0,i().yK)((e=>({title:{padding:"3px 0",fontSize:13,lineHeight:"18px",color:e.text.secondary,display:"flex",flexDirection:"row",alignItems:"center",fontWeight:r().Ue.medium,gap:2,...n},icon:{width:18,height:24,fill:e.icon.secondary}})),[n]);return(0,a.jsxs)("div",{style:c.title,children:[e.icon&&l&&e.icon(c.icon),(0,a.jsx)("div",{children:t})]})}},133049:(e,t,n)=>{"use strict";n.d(t,{V:()=>re});var o=n(667294),i=()=>n(142735),r=()=>n(788860),a=()=>n(58836),s=()=>n(251932),l=(n(122556),n(582845),n(250570),n(533019),n(721473),n(788208),n(22624),n(267602),n(653476),n(241792),()=>n(219727)),c=()=>n(846550),d=()=>n(839212),u=()=>n(293836),p=()=>n(722917),m=()=>n(513670),g=()=>n(696459),h=()=>n(326966),f=()=>n(342792),y=()=>n(959137),v=()=>n(661297),b=()=>n(205228),S=()=>n(710125),x=()=>n(599631),C=()=>n(749826),k=()=>n(629513),_=()=>n(507335),w=n(785893);const I=(0,r().vU)({linkCopied:{defaultMessage:"Link copied. Share it with others who may find this useful.",id:"ai.gtmFavoriteActions.linkCopied"},share:{defaultMessage:"Share as AI favorite",id:"ai.gtmFavoriteActions.share"},add:{defaultMessage:"Add to AI favorites",id:"ai.gtmFavoriteActions.add"}});function j(e){const{blockId:t}=e,n=(0,l().O7)(),i=(0,r().YB)(),a=(0,o.useCallback)((()=>{(0,k().importGtmFavorite)({environment:n,importArgs:{name:"aiGtmFavoriteImport",blockId:t}})}),[t,n]),s=(0,o.useCallback)((async()=>{const e=`${b().default.domainBaseUrl}/ai-gtm/${(0,f().cj)(t)}`;(await y().F.clipboardActions.load()).copyString({environment:n,stringValue:e,copiedMessage:I.linkCopied})}),[t,n]);return(0,w.jsxs)("div",{style:{marginTop:12,marginBottom:12},children:[(0,w.jsx)(v().Z,{onClick:s,icon:x().N,children:i.formatMessage(I.share)}),n.currentUser.isLoggedIn()&&(0,w.jsx)(v().Z,{onClick:a,style:{marginLeft:12},icon:S().l,children:i.formatMessage(I.add)})]})}var M=()=>n(233417),T=()=>n(407544),R=()=>n(311562),P=()=>n(864266),B=()=>n(177610),L=()=>n(796386),A=()=>n(794424),V=()=>n(60613),F=()=>n(686929);const E=5;function D(e){const{collectionStore:t,schema:n,store:r,format:a,propertyIds:s,propertyGroupId:f,variant:y,customization:v,pagePropertiesStore:b,pageViewBlockContext:S}=e,[x,k]=(0,T().e)(),I=(0,i().qz)(void 0,M().Z),D=(0,l().Fy)(),Z=(0,c().yK)((e=>({pageProperties:{width:"100%",fontSize:14},dragHandle:{marginLeft:-(P().C+10),marginRight:6},hidePropertiesButton:{margin:"0 0 10px"},showMoreButton:{margin:0},addPropertyButton:{margin:"4px 0 0"},moreProperties:{border:`1px solid ${"dark"===e.mode?e.accentColors.gray[300]:e.accentColors.gray[75]}`,borderRadius:4,padding:"8px 6px"},actionButtonsWithTopMargin:{marginTop:8}})),[]),N=(0,i().VK)((()=>"pinned"===y||Boolean(r.isAssociatedCollectionAPageTree())),[r,y]),K=(0,i().VK)((()=>{var e;return null===(e=t.getLayoutStore())||void 0===e?void 0:e.getModules()}),[t]);let G=(0,B().nd)({store:r,format:a,schema:n,collectionStore:t,propertyIds:s,propertyGroupId:f});const z=(0,o.useMemo)((()=>{const e={};for(const t of G)e[t.property]=t;return e}),[G]);v&&(G=function(e,t,n,o,i){const{hideEmptyProperties:r,neverShowEmptyPropertiesIfMoreThanNProperties:a,neverShowNotionSystemProperties:s,sortNonEmptyPropertiesFirst:l,neverShowPropertiesElsewhereInLayout:c}=t;r&&(e=e.map((e=>({...e,visibility:e.hasValue?e.visibility:"hide"}))));if(c&&n){const t=(0,u().m)({modulesByArea:n,collectionSchema:o,collectionFormat:i}),r=new Set(t);e=e.filter((e=>!r.has(e.property)))}s&&(e=e.filter((e=>!((0,p().S4)(e.property)||"show"!==e.visibility&&e.property.startsWith("notion://")))));void 0!==a&&e.length>a&&(e=e.filter((e=>e.hasValue)));l&&(e=m().MR(e,(e=>!e.hasValue)));return e}(G,v,K,n,a));const U=(0,i().VK)((()=>b.state.forceShowProperties),[b]),[q,H]=(0,o.useMemo)((()=>{if((0,h().z4)(y))return m().uK(G,(e=>{var t;return!!(null===(t=n[e.property])||void 0===t?void 0:t.type)&&function(e){if("section"===e.visibility)return!1;if("hide"===e.visibility)return!1;if("hide_if_empty"===e.visibility&&!e.hasValue)return!1;return!0}(e)}));if("pinned"===y){if(!s)return[[],[]];const e=s.map((e=>{var t;const o=n[e];if(o)return{property:e,visibility:"show",hasValue:(null===(t=z[e])||void 0===t?void 0:t.hasValue)??!1,name:o.name}})).filter(g().$K);return[e.slice(0,d().c),e.slice(d().c)]}(0,g().t1)(y)}),[G,z,s,n,y]),O=function(e){const t=(0,i().VK)((()=>{if(!C().default.checkGate({gateName:"ai_favorites"}))return!1;const t=(0,_().OF)();return!!t&&t.spaceId===e.getSpaceId()&&t.collectionId===e.id}),[e]);return t}(t),W=q.concat(H),{paddingLeft:Y,paddingRight:$,width:X}=e,J=Math.min(E,q.length)*A().Uv,Q="pinned"===y?D.isMobile||k<V().h:k<J;let ee;if(null!=v&&v.dontRenderIfNoPropertiesDefaultShown&&0===q.length)return null;if(null!=v&&v.renderWhenCompletelyEmpty&&0===q.length&&0===H.length)return v.renderWhenCompletelyEmpty();if(N&&!Q)ee=(0,w.jsx)(A().ZP,{...e,rowLength:E,compactProperties:q,hiddenProperties:H,variant:y,pageViewBlockContext:S});else{const t={stackPropertyLabelAndValue:null==v?void 0:v.stackPropertyLabelAndValue,heightVariant:null!=v&&v.stackPropertyLabelAndValue||N&&!Q?"small":"medium"},n=S===R().S.PeekView;ee=(0,w.jsxs)("div",{style:null!=v&&v.disableContainerPadding?{}:{paddingBottom:8},children:[(0,w.jsx)(L().Z,{...e,hideDragHandle:"pinned"===y,showHiddenProperties:U,mergedProperties:N?W:G,rowCustomization:t,disableLastRowBottomPadding:null==v?void 0:v.disableLastRowBottomPadding,isInPeekRenderer:n}),"pinned"===y?null:(0,w.jsx)(F().ZP,{...e,customization:t,isInPeekRenderer:n,mergedProperties:N?W:G,wrapperStyle:null!=v&&v.stackPropertyLabelAndValue?Z.actionButtonsWithTopMargin:void 0})]})}return(0,w.jsx)("div",{style:Z.pageProperties,onMouseEnter:()=>{I.setState({...I.state,mouseEntered:!0})},onMouseLeave:()=>{I.setState({...I.state,mouseEntered:!1})},ref:x,children:(0,w.jsxs)("div",{style:{width:X,maxWidth:"100%",padding:N||null!=v&&v.disableContainerPadding?void 0:"16px 0 8px 0",margin:"0 auto",...Y?{paddingLeft:Y}:{},...$?{paddingRight:$}:{}},children:[ee,O&&(0,w.jsx)(j,{blockId:r.id})]})})}var Z=()=>n(191586),N=()=>n(480089),K=()=>n(876822),G=()=>n(279386),z=()=>n(121700),U=()=>n(763058),q=()=>n(27475),H=()=>n(482162),O=()=>n(896751),W=()=>n(452220),Y=()=>n(707513),$=()=>n(154186),X=()=>n(536691),J=()=>n(538230),Q=()=>n(857719);function ee(e){const{store:t,context:n,disabled:r,wrapper:s,forceGroupsOpenOrClosed:l,customization:d,moduleId:u}=e,p=(0,i().VK)((()=>t.getAssociatedCollectionStore()),[t]),m=(0,i().VK)((()=>(null==p?void 0:p.getNormalizedPropertyGroups({publicPageDataFallbackEnabled:!0}))||[]),[p]),g=(0,i().VK)((()=>{if(t.isCollectionViewPageWithContent())return{type:"hidden"};const e=t.getAssociatedCollectionStore();if(!e)return{type:"hidden"};const n=(0,Z().y6)(t);return n?{type:"visible",store:t,format:n,collectionStore:e}:{type:"hidden"}}),[t]),h=(0,c().yK)((e=>({container:{cursor:"default"}})),[]);if("hidden"===g.type)return null;return(s||(e=>(0,w.jsx)(Q().Pb,{className:"layout-content",children:e})))((0,w.jsx)(Q().Pb,{children:(0,w.jsx)(a().p,{allowSelectionWithin:!0,children:(0,w.jsxs)("div",{style:h.container,children:[m.map(((e,t)=>(0,o.createElement)(te,{...g,key:e.id,context:n,disabled:r,propertyGroup:e,forceGroupOpenOrClosed:l,customization:d,isLast:t===m.length-1,moduleId:u}))),0===m.length&&(0,w.jsx)(te,{...g,context:n,disabled:r,propertyGroup:"virtualPropertiesGroup",forceGroupOpenOrClosed:l,customization:d,isLast:!0,moduleId:u})]})})}))}function te(e){const{store:t,context:n,disabled:a,propertyGroup:s,format:l,collectionStore:d,forceGroupOpenOrClosed:u,customization:p,isLast:m,moduleId:g}=e,h=(0,i().VK)((()=>"virtualPropertiesGroup"===s?{idForRememberingCollapsedState:`${g}_defaultGroup`,groupIdForSavingPropertyToGroup:void 0,title:(0,w.jsx)(r()._H,{id:"collapsiblePropertyGroups.defaultGroupTitle",defaultMessage:"Properties"})}:{idForRememberingCollapsedState:s.id,groupIdForSavingPropertyToGroup:s.id,title:s.title}),[g,s]),f=(0,i().VK)((()=>void 0!==u?"open"===u:J().Z.isPropertyGroupExpanded({groupId:h.idForRememberingCollapsedState})),[u,h.idForRememberingCollapsedState]),y=n===R().S.PeekView,v=(0,i().VK)((()=>t.isNonEditableState()),[t]),b=(0,i().VK)((()=>d.getSchema()),[d]),S=(0,i().VK)((()=>{var e,n;return t.id===(null===(e=K().default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.id)?U().my.getNewEditorPagePropertiesStore(h.idForRememberingCollapsedState):t.id===(null===(n=H().default.peekTargetStore.state)||void 0===n?void 0:n.id)?U().UK.getNewEditorPagePropertiesStore(h.idForRememberingCollapsedState):new(U().pB)}),[h.idForRememberingCollapsedState,t.id]),x=(0,o.useCallback)((()=>{J().Z.togglePropertyGroupExpanded({groupId:h.idForRememberingCollapsedState})}),[h.idForRememberingCollapsedState]),C=(0,c().yK)((e=>({groupContent:{paddingLeft:0,paddingBottom:m?void 0:null!=p&&p.stackPropertyLabelAndValue?28:20},bottomButtonContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start"},propertyVisibilityButton:{borderRadius:4,height:34,paddingLeft:6,paddingRight:6,width:"auto",display:"flex",alignItems:"center",justifyContent:"center"},propertyVisibilityButtonMessage:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0,fontSize:"14px",color:e.lightTextColor}})),[null==p?void 0:p.stackPropertyLabelAndValue,m]);return(0,w.jsxs)("div",{children:[(0,w.jsx)(ne,{onClick:x,isExpanded:f,customization:p,children:h.title}),f&&(0,w.jsx)("div",{style:C.groupContent,children:(0,w.jsx)(D,{propertyGroupId:h.groupIdForSavingPropertyToGroup,pagePropertiesStore:S,schema:b,format:l,store:t,collectionStore:d,disabled:a,locked:v,blockPropertyValueOverlayStore:y?q().Z:z().Z,pageViewBlockContext:n,width:"100%",customization:{...p,neverShowPropertiesElsewhereInLayout:!0}})})]})}function ne(e){const{children:t,isExpanded:n,customization:o,onClick:i}=e,a=(0,r().YB)(),s=(0,l().Fy)(),d=Boolean(null==o?void 0:o.stackPropertyLabelAndValue);let u;u=n&&d?s.isTablet?0:s.isMobile?2:8:0;const p=(0,c().yK)((e=>({container:{height:34,display:"flex",alignItems:"center",justifyContent:"flex-start",paddingLeft:6,paddingRight:6,gap:6,marginBottom:u,borderRadius:6},label:{fontSize:13,color:e.text.secondary,fontWeight:Y().Ue.medium,...Y().Yu,height:20},button:{borderRadius:"100%"},icon:{transition:"transform .2s ease",width:12,height:12,transform:n?"rotate(0deg)":"rotate(-90deg)",fill:e.icon.tertiary},iconContainer:{display:"flex",alignItems:"center",justifyContent:"center"}})),[u,n]),m=(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{style:p.label,children:t}),(0,w.jsx)("div",{style:p.iconContainer,children:(0,X().A)(p.icon)})]});return n?(0,w.jsx)($().Z,{onClick:i,style:p.container,children:m}):(0,w.jsx)($().Z,{style:p.container,onClick:i,ariaLabel:a.formatMessage(oe.showProperties),children:m})}const oe=(0,r().vU)({hideProperties:{id:"CollapsiblePropertyGroups.hideProperties",defaultMessage:"Hide properties in section"},showProperties:{id:"CollapsiblePropertyGroups.showProperties",defaultMessage:"Show properties in section"}});function ie(e){const{store:t,format:n,collectionStore:o,disabled:r,blockPropertyValueOverlayStore:a,variant:s,propertyIds:l,customization:c,pagePropertiesStore:d,pageViewBlockContext:u}=e,p=(0,i().VK)((()=>o.getSchema()),[o]),m=(0,i().VK)((()=>t.isNonEditableState()),[t]);return(0,w.jsx)(D,{store:t,collectionStore:o,schema:p,format:n,disabled:r,locked:m,width:"100%",blockPropertyValueOverlayStore:a,pageViewBlockContext:u,propertyIds:l,variant:s,customization:c,pagePropertiesStore:d,layoutModule:e.layoutModule})}function re(e){const{store:t,context:n,disabled:o,variant:l,layoutModule:c,propertyIds:d,customization:u,wrapper:p,showDefaultTitle:m}=e,g=(0,N().PE)(t,o),h=(0,i().VK)((()=>G().MT.getMode(t)),[t]),{isMainEditor:f,isPeekEditor:y}=(0,i().VK)((()=>{var e,n;const o=Boolean(H().default.isSidePeekOpen()&&t.id===(null===(e=H().default.peekTargetStore.state)||void 0===e?void 0:e.id));return{isMainEditor:Boolean(!o&&t.id===(null===(n=K().default.state.mainEditorCurrentBlockStore)||void 0===n?void 0:n.id)),isPeekEditor:o}}),[t]),v=(0,i().VK)((()=>t.getAssociatedCollectionStore()),[t]),b=(0,i().VK)((()=>{if(t.isCollectionViewPageWithContent())return{type:"hidden"};if(!v)return{type:"hidden"};const e=(0,Z().y6)(t);return e?{type:"visible",store:t,format:e,collectionStore:v}:{type:"hidden"}}),[v,t]),S=(0,O().K)({collectionStore:v,layoutModule:c}),x=(0,i().VK)((()=>S&&c&&!(null!=u&&u.doNotShowPropertyGroups)),[null==u?void 0:u.doNotShowPropertyGroups,S,c]),C=(0,i().VK)((()=>f?U().my.getNewEditorPagePropertiesStore():y?U().UK.getNewEditorPagePropertiesStore():new(U().pB)),[f,y]);if("hidden"===b.type)return null;const k=n===R().S.PeekView,_=x&&c?(0,w.jsx)(ee,{...e,wrapper:void 0,moduleId:c.id}):(0,w.jsxs)(s().Ht,{gap:8,children:[m&&(0,w.jsx)(W().$,{style:{marginLeft:6},children:(0,w.jsx)(r()._H,{id:"pageLayout.propertiesModule.title",defaultMessage:"Properties"})}),(0,w.jsx)(a().p,{allowSelectionWithin:!0,children:(0,w.jsx)(ie,{...b,disabled:!g||"suggest"===h,pageViewBlockContext:n,blockPropertyValueOverlayStore:k?q().Z:z().Z,propertyIds:d,variant:l,layoutModule:c,customization:u,pagePropertiesStore:C})})]});return p((0,w.jsx)(w.Fragment,{children:_}))}},896751:(e,t,n)=>{"use strict";n.d(t,{K:()=>r});var o=n(667294),i=()=>n(142735);function r(e){let{collectionStore:t,layoutModule:n}=e;const r=(0,i().VK)((()=>Boolean(null==t?void 0:t.getNormalizedPropertyGroups({publicPageDataFallbackEnabled:!0}))),[t]);return(0,o.useMemo)((()=>!(!n||!t)&&("properties"===n.type&&"pinned"!==n.variant&&r)),[t,r,n])}},974442:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o=n(263184).default.createValue({open:!1},{name:"ConfirmOverwriteModalStore"})},385010:(e,t,n)=>{"use strict";n.d(t,{l:()=>a,w:()=>i});function o(e){switch(e.type){case"external":return`external-${e.botId}`;case"workflow":return`workflow-${e.workflowExternalAuthenticationId}`;case"universal":return`universal-${e.app}-${e.spaceId}`;default:throw(0,n(696459).t1)(e)}}const i={channels:{},fetching:!1,lastRefreshed:0};class r extends(()=>n(263184))().default{getStateForBot(e){const t=o(e);return this.state[t]??i}updateStateForBot(e,t){this.setState({...this.state,[o(e)]:{...this.getStateForBot(e),...t}})}addChannelsForBot(e,t){const n=this.getStateForBot(e);this.setState({...this.state,[o(e)]:{...n,channels:{...n.channels,...t}}})}}const a=new r;(0,n(947115).exposeDebugValue)("ExternalNotificationChannelsStore",a)},779522:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const o=new(n(168469).q)((e=>{let{spaceId:t}=e;return t}),(async function(e,t){var o;let{spaceId:i}=t;const r=await Promise.resolve().then(n.bind(n,824462)),a=await r.callApi({eventName:"getInternalDomains",environment:e,data:{spaceId:i}});return"success"===a.type?null===(o=a.data)||void 0===o?void 0:o.internalDomainsWithInfo:void 0}));n(947115).exposeDebugValue("InternalDomainsStore",o);const i=o},385021:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});class o extends(()=>n(263184))().default{getInitialState(){return{justUnlocked:!1}}}const i=o},994875:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});class o extends(()=>n(263184))().default{getInitialState(){return{discussionIdToExpansionStartPointMap:{}}}}const i=new o},136765:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});class o extends(()=>n(263184))().default{getInitialState(){return{permissionsInviteStore:new(n(223023).Z),contextualInviteStore:new(n(807463).ZP)}}get stage(){return this.state.contextualInviteStore.state.inviteStage}}const i=o},815277:(e,t,n)=>{"use strict";n.d(t,{CH:()=>m,DE:()=>l().DE,KQ:()=>l().KQ,Rv:()=>l().Rv,V5:()=>p().V5,VX:()=>g,eB:()=>l().eB,oo:()=>l().oo});var o=()=>n(255933),i=()=>n(779709),r=()=>n(205228),a=()=>n(845682),s=()=>n(30795),l=()=>n(546464),c=()=>n(404791),d=()=>n(897257),u=()=>n(18281),p=()=>n(259408);const m={guests:e=>{if(!d().subscriptionDataStoreInstance.state)return"loading";return{current:(0,u().s1)(e.environment,e.spaceId,d().subscriptionDataStoreInstance.state)}},team_self_promotion:e=>{},internal_guests:e=>{if(!d().subscriptionDataStoreInstance.state)return"loading";return{current:(0,u().s1)(e.environment,e.spaceId,d().subscriptionDataStoreInstance.state),hasLowGuestLimit:(0,n(548812).fc)()}},members:e=>{const t=d().subscriptionDataStoreInstance.state;return{current:t?(0,s().W)(e.environment,e.spaceId,t):0}},non_admin_members:e=>{},view_chart:e=>{},form_filesize:e=>{},form_customization:e=>{},premium_automations:e=>{},move_to:e=>{},claimable_spaces:e=>{},domain_settings:e=>{},managed_users:e=>{},invite_user_to_workspace_mentions:e=>{},saml:e=>{},scim:e=>{},export_members:e=>{},hipaa_compliance:e=>{},sites_multiple_public_domains:e=>{},custom_image_upload_favicon:e=>{},custom_public_sites_layout:e=>{},seo_title_and_description:e=>{},admin_transfer_private_content:e=>{},ai_slack_qna:e=>{},configurable_mention_invites:e=>{},configurable_retention:e=>{},unbranded_forms:e=>{},ai_google_drive_qna:e=>{},watermarkless_chart_export:e=>{},configurable_deletion_and_retention_settings:e=>{},sudo_mode:e=>{},ai_github_connector:e=>{},ai_jira_connector:e=>{},slack_imports_invite:e=>{},content_reprovisioning:e=>{},ai_space_usage:e=>{var t;let{environment:n,spaceId:l}=e;const u=new(a().H)(n,{table:o().bx,id:l}).getModel(),p=(0,i().oc)(r().default.promotions.ai,u),m=(null===(t=c().Z.state)||void 0===t?void 0:t.spaceUsage)??0,g=d().subscriptionDataStoreInstance.state;return{current:m,memberCount:g?(0,s().W)(n,l,g):0,aiPromotionConfig:p,space:u}},ai_user_usage:e=>{var t;let{environment:n,spaceId:l}=e;const u=new(a().H)(n,{table:o().bx,id:l}).getModel(),p=(0,i().oc)(r().default.promotions.ai,u),m=(null===(t=c().Z.state)||void 0===t?void 0:t.userUsage)??0,g=d().subscriptionDataStoreInstance.state;return{current:m,memberCount:g?(0,s().W)(n,l,g):0,aiPromotionConfig:p,space:u}},block_read_and_write_role:e=>{}};function g(e){return(0,l().Rv)(e)??!1}},877727:(e,t,n)=>{"use strict";n.d(t,{C3:()=>s,D:()=>l,QZ:()=>a,fo:()=>r});var o=()=>n(146947),i=()=>n(749826);function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i().default.checkGate({gateName:"packaging_m2_additional_entrypoints"})&&a(e,t)}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!e.device.isPhone&&s(t)}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i().default.checkGate({gateName:"workflow_templates_prototype",...e})||"control"!==l(e)}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o().locale.startsWith("en-")||i().default.checkGate({gateName:"packaging_m2_localize_templates"})?i().default.getEligibleGroup({experimentId:"packaging_m2_entry_point",defaultGroup:"control",...e}):"control"}},999582:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});class o extends(()=>n(263184))().default{getInitialState(){return{}}}const i=new o;n(947115).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",i);const r=i},184441:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});class o extends(()=>n(263184))().default{getInitialState(){return{open:!1,isShowingLoadingState:!1}}updateUserCustomizations(e,t){this.state.open&&this.state.collectionTemplate&&this.setState({...this.state,userCustomizations:{...this.state.userCustomizations,[e]:t}})}updateCollectionTemplate(e){this.state.open&&this.state.collectionTemplate&&this.setState({...this.state,collectionTemplate:e})}updatePreviewCollectionViewTemplateId(e){this.state.open&&this.state.collectionTemplate&&this.setState({...this.state,previewCollectionViewTemplateId:e})}getParentStore(){return this.state.open?this.state.parentStore:void 0}getShouldShowExpandedTemplateList(){return this.state.open&&this.state.shouldShowExpandedTemplateList}setShouldShowExpandedTemplateList(e){this.state.open&&this.setState({...this.state,shouldShowExpandedTemplateList:e})}close(e){var t,n;this.state.open&&(null===(t=(n=this.state).onClose)||void 0===t||t.call(n,e),this.setState({open:!1,isShowingLoadingState:!1}))}reset(){this.setState(this.getInitialState())}}const i=new o;(0,n(947115).exposeDebugValue)("InitializeWorkflowTemplateModalStore",i);const r=i},29488:(e,t,n)=>{"use strict";function o(e){return`${e.table}:${e.id}`}n.d(t,{O:()=>o})},912203:(e,t,n)=>{"use strict";n.d(t,{$M:()=>f,GQ:()=>C,Jy:()=>w,LF:()=>_,NO:()=>m,Of:()=>I,SF:()=>u,TX:()=>x,XO:()=>y,Y_:()=>d,Ym:()=>h,bD:()=>b,cO:()=>p,fo:()=>k,rR:()=>g});n(267602),n(653476),n(228244);var o=()=>n(513670),i=()=>n(696459),r=()=>n(226413),a=()=>n(109477),s=()=>n(455222),l=()=>n(305580);(0,i().AO)((e=>(0,i().$K)(e)&&(0,i().$K)(e.target)&&(0,i().$K)(e.external_bot_id)?{true:{external_bot_id:e.external_bot_id,target:e.target}}:{false:e}));const c={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1},d={checkbox:[{type:"checkbox"}],date:[{type:"date"}],email:[{type:"text"}],multi_select:[{type:"text"},{of:{type:"text"},type:"array"}],number:[{type:"number"}],person:[{type:"person"},{of:{type:"person"},type:"array"}],phone_number:[{type:"text"}],relation:[{type:"block"},{of:{type:"block"},type:"array"}],select:[{type:"text"},{of:{type:"text"},type:"array"}],status:[{type:"text"},{of:{type:"text"},type:"array"}],text:void 0,title:void 0,url:[{type:"text"}]};function u(e){return Boolean(c[e.type]&&!(0,r().NK)(e)&&(!(0,r().qQ)(e)||void 0===(0,r().q3)(e)))}function p(e){const{collectionFormat:t,collectionSchema:n,filter:s,sort:c,sourcePropertyIds:d}=e,p=(d??(0,i().Yd)(n)).filter(((t,o,i)=>{const a=n[t];return!(!a||!u(a))&&(("relation"!==a.type||!e.restrictCrossSpace||!(0,r().Qh)(e.spaceId,a))&&(!s||s([t,a],o,n)))}));if(0===p.length)return[];if(!t||!1===c)return p;const m=(0,l().i)(t,n,void 0,a().j5.Page).collection_page_properties||[];return o().MR(p,(e=>m.findIndex((t=>t.property===e))))}function m(e){const{collectionFormat:t,collectionSchema:n,sort:s}=e,c=(0,i().Yd)(n).filter(((e,t,o)=>{const i=n[e];return!(!i||!(0,r().U8)(i))}));if(0===c.length)return[];if(!t||!1===s)return c;const d=(0,l().i)(t,n,void 0,a().j5.Page).collection_page_properties||[];return o().MR(c,(e=>d.findIndex((t=>t.property===e))))}function g(e){return e.type===s().$E.InvalidCharacter?{type:e.type,character:e.character}:e.type===s().$E.TokenExpected?{type:e.type,token:e.token}:e.type===s().FY.MissingSchemaPropertyOnThisRow||e.type===s().FY.MissingSchemaPropertyOnCollection?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===s().FY.ThisRowBlockPropertyMismatchCollection?{type:e.type,thisRowCollection:e.thisRowCollection}:e.type===s().FY.MissingContextVariable?{type:e.type,valueId:e.valueId}:e.type===s().FY.FunctionCallTooFewArguments?{type:e.type,numArguments:e.numArguments}:e.type===s().FY.FunctionCallUnexpectedArgument?{type:e.type,parameterIndex:e.parameterIndex}:e.type===s().FY.FunctionCallArgumentWrongType?{type:e.type,argumentType:e.argumentType,libraryFunctionName:e.libraryFunction.name,parameterIndex:e.parameterIndex}:e.type===s().FY.MissingDataDependencyBlock?{type:e.type,blockPointer:e.blockPointer}:e.type===s().FY.MissingDataDependencyPerson?{type:e.type,personPointer:e.personPointer}:e.type===s().FY.MemberPropertyMismatchCollection?{type:e.type,blockCollection:e.blockCollection}:e.type===s().FY.DownstreamParseFailure?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===s().FY.ContextVariableWrongType?{type:e.type,valueId:e.valueId,expectedType:e.expectedType,resultType:e.resultType}:e.type===s().FY.DisallowedValueType?{type:e.type,expressionValue:e.expressionValue,allowedValueTypes:e.allowedValueTypes}:e.type===s().FY.LibraryFunctionExecutionError?{type:e.type,error:e.error,libraryFunctionName:e.libraryFunction.name}:{type:e.type}}const h={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,button:!1,file:!1,verification:!1,auto_increment_id:!1,created_by:!1,created_time:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1};function f(e){return Boolean(h[e.type])}function y(e){const{collectionFormat:t,collectionSchema:n,filter:s,sort:c}=e,d=(0,i().Yd)(n).filter(((e,t,o)=>{var i;const a=n[e];return!(!a||!h[a.type])&&((!(0,r().qQ)(a)||null===(i=(0,r().q3)(a))||void 0===i||!i.auto_update_on_edit)&&(!s||s([e,a],t,n)))}));if(0===d.length)return[];if(!t||!1===c)return d;const u=(0,l().i)(t,n,void 0,a().j5.Page).collection_page_properties||[];return o().MR(d,(e=>u.findIndex((t=>t.property===e))))}const v={checkbox:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,date:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1};function b(e){return v[e.type]}const S={checkbox:!0,created_by:!0,created_time:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,last_edited_by:!0,last_edited_time:!0,auto_increment_id:!1,button:!1,file:!1,formula:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1};function x(e){return S[e.type]}function C(e){return 0===e}function k(e){return function(e){return"button_block"===e||"button_property"===e}(e)}function _(e){const{property:t,collectionSchema:n}=e;return!!n&&!n[t]}function w(e){const{collectionSchema:t,property:n,type:o}=e,i=null==t?void 0:t[n];return!i||("action"===o?!u(i):!h[i.type])}function I(e){let{automationTrigger:t,collectionSchema:n}=e;if("event"===(null==t?void 0:t.type)||"notification_event"===(null==t?void 0:t.type)){const{pagesAdded:e,pagePropertiesEdited:o,source:r}=t.event;if(void 0===r)return!1;const a="some"===o.type&&o.some,s="all"===o.type&&o.all;if((a||s||[]).some((e=>_({collectionSchema:n,property:e.property})||w({collectionSchema:n,property:e.property,type:"trigger"}))))return!1;const l="some"===o.type&&(!(0,i().$K)(o.some)||0===o.some.length),c="all"===o.type&&(!(0,i().$K)(o.all)||0===o.all.length);if(!e&&("none"===o.type||l||c))return!1}else{if("recurrence"!==(null==t?void 0:t.type))return!1;if(!t.recurrence)return!1}return!0}},157955:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>T,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>C,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>x,MAX_RECURRENCE_INTERVAL:()=>f,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>y,RRULE_WEEKDAYS_MAP:()=>h,convertFromUnpersistedRecurrenceConfig:()=>B,convertToUnpersistedRecurrenceConfig:()=>R,getFormattedEndCondition:()=>M,getFormattedNextRecurrenceTime:()=>j,getNextDateUtc:()=>I,getRecurrenceAfter:()=>_,isRunningBetweenMidnightAnd3AM:()=>w,isValidRecurrenceInterval:()=>v,isValidRecurrenceNumberOfRuns:()=>b,rruleFromRecurrence:()=>S,templateAncestorsViolateRecurrenceNesting:()=>k});n(267602),n(653476),n(241792);var o=()=>n(730120);n(670560);function i(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];if(0===n.length)return e.map((e=>[e]));const r=[];for(const a of e)r.push(...i(n[0],...n.slice(1)).map((e=>[a,...e])));return r}var r=()=>n(696459),a=()=>n(326966),s=()=>n(803021),l=()=>n(646574),c=()=>n(998411),d=()=>n(578292);class u extends(()=>n(484885))().Ci{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var p=()=>n(494616);const m=(0,n(788860).vU)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12–3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),g={day:u.DAILY,week:u.WEEKLY,month:u.MONTHLY,year:u.YEARLY},h={MO:u.MO,TU:u.TU,WE:u.WE,TH:u.TH,FR:u.FR,SA:u.SA,SU:u.SU},f=99,y=999;function v(e){return(0,a().hj)(e)&&Number.isInteger(e)&&e>0&&e<=f}function b(e){return(0,a().hj)(e)&&Number.isInteger(e)&&e>0&&e<=y}function S(e){const{start_date:t,frequency:n,interval:o,weekdays:a,timezone:l,hour:c,minute:d}=e,p="week"===n&&a?a.map((e=>h[e])):void 0,m={};return(0,r().$K)(e.end_condition)&&("date"===e.end_condition.type?m.until=(0,s().pd)(e.end_condition.end_at):"number"===e.end_condition.type?m.count=e.end_condition.number_of_occurrences:(0,r().t1)(e.end_condition)),"month"===e.frequency&&(0,r().$K)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?m.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?m.byweekday=i(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((e=>{let[t,n]=e;return h[t].nth(n)})):(0,r().t1)(e.monthly_restriction)),new u({freq:g[n],dtstart:(0,s().pd)(t),interval:o,byweekday:p,tzid:l,byhour:c??0,byminute:d??0,bysecond:0,...m})}const x=1,C=1;function k(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const n=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),o=e.length,i=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,r=o>x,a=n.length>=C;return{violatesConstraint:r||a,templateNestingExceedsMaxDepth:r,ancestorHasDailyTemplate:a,nestedDepthOfAutomationAncestors:o,immediateAncestorRecurrenceType:i}}function _(e){const{recurrence:t,afterDate:n}=e;if((0,p().nA)(t)){const e=(0,s().kq)(n);return t.start_date>=e?new Date(t.start_date):void 0}{const e=S(t).after((0,s().pd)(n));if(!e)return;return(0,s().YL)(e)}}function w(e){return 0===e.hour||1===e.hour||2===e.hour}function I(e){return S(e).after((0,s().pd)((0,s().Jh)()))||void 0}function j(e){const{recurrence:t,intl:n}=e,i=I(B(t));if(!i)return;const r=w(t),a=o().ou.fromJSDate(i).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,d().E2)(n)).setZone(t.timezone),s=(0,l().p6)({date:a,dateFormat:"relative",allowRelativeDates:!0,intl:n,shortenDate:!0});if(r)return n.formatMessage(m.dateBetweenMidnightAnd3AM,{date:s});{let e=a.toLocaleString(o().ou.TIME_SIMPLE);return t.timezone!==(0,c().r)()&&(e+=` ${a.toFormat("ZZZZ")}`),n.formatMessage(m.dateAtTime,{date:s,time:e})}}function M(e,t){return(0,r().$K)(e)?"number"===e.type?t.formatMessage(m.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,l().p6)({date:o().ou.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,r().t1)(e):t.formatMessage(m.noEndCondition)}const T=100;function R(e){return{...e,start_date:(0,s().kq)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,s().kq)(e.end_condition.end_at)}:(0,r().t1)(e.end_condition):void 0}}function P(e,t){const n=o().ou.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,s().Jh)(n.toJSDate())}}function B(e){return{...e,start_date:(0,s().Jh)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?P(e,e.end_condition):(0,r().t1)(e.end_condition):void 0}}},775404:(e,t,n)=>{"use strict";n.d(t,{p:()=>i});n(667294);var o=n(785893);const i=(0,n(827282).IU)("at",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M.911 8.034c0 4.505 3.049 7.24 7.246 7.24 1.135 0 2.215-.158 2.885-.376.472-.15.622-.397.622-.65a.44.44 0 00-.451-.444 1.3 1.3 0 00-.321.048c-.834.205-1.552.341-2.516.341-3.74 0-6.29-2.255-6.29-6.118 0-3.698 2.407-6.275 6.03-6.275 3.206 0 5.886 1.975 5.886 5.523 0 2.072-.697 3.466-1.825 3.466-.752 0-1.176-.437-1.176-1.183V4.972c0-.37-.205-.595-.554-.595-.341 0-.553.226-.553.595v.779h-.062c-.349-.84-1.203-1.374-2.222-1.374-1.77 0-3.014 1.51-3.014 3.678 0 2.187 1.237 3.712 3.042 3.712 1.06 0 1.88-.575 2.276-1.545h.062c.13.963.943 1.551 2.023 1.551 1.907 0 3.09-1.873 3.09-4.498 0-3.971-2.92-6.548-6.96-6.548C3.886.727.912 3.632.912 8.034zm6.911 2.652c-1.223 0-2.003-1.018-2.003-2.638 0-1.593.786-2.611 2.01-2.611 1.258 0 2.05.998 2.05 2.584 0 1.62-.813 2.665-2.057 2.665z"})})},809461:(e,t,n)=>{"use strict";n.d(t,{w:()=>r});n(667294);var o=n(785893);const i={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M10 7c-1.654 0-3 1.346-3 3s1.346 3 3 3 3-1.346 3-3-1.346-3-3-3m0 4.5c-.827 0-1.5-.673-1.5-1.5s.673-1.5 1.5-1.5 1.5.673 1.5 1.5-.673 1.5-1.5 1.5"}),(0,o.jsx)("path",{d:"M18.307 8.445a.7.7 0 0 0-.57-.56l-1.643-.283-.056-.138.973-1.378a.7.7 0 0 0 .008-.795 8.5 8.5 0 0 0-2.244-2.264.7.7 0 0 0-.8.006l-1.36.96-.138-.056-.289-1.661a.7.7 0 0 0-.554-.567 8.5 8.5 0 0 0-3.188-.015.7.7 0 0 0-.562.569l-.282 1.643-.139.056-1.377-.971a.7.7 0 0 0-.794-.01q-.68.457-1.284 1.06a8.5 8.5 0 0 0-.98 1.185.7.7 0 0 0 .005.799l.961 1.36q-.03.069-.057.139l-1.66.287a.7.7 0 0 0-.569.555 8.5 8.5 0 0 0-.015 3.188.7.7 0 0 0 .57.561l1.643.283.056.14-.971 1.375a.7.7 0 0 0-.01.793 8.6 8.6 0 0 0 2.244 2.267.7.7 0 0 0 .8-.006l1.36-.961.14.058.286 1.66a.7.7 0 0 0 .555.568 8.5 8.5 0 0 0 3.188.015.7.7 0 0 0 .561-.57l.283-1.643q.07-.027.138-.056l1.378.972a.7.7 0 0 0 .795.008 8.6 8.6 0 0 0 2.264-2.243.7.7 0 0 0-.006-.8l-.961-1.36.058-.138 1.66-.289a.7.7 0 0 0 .567-.554q.159-.806.16-1.656a8.5 8.5 0 0 0-.144-1.533m-1.314 2.45-1.567.271a.7.7 0 0 0-.545.47c-.09.27-.189.508-.303.726a.7.7 0 0 0 .05.728l.904 1.28a7 7 0 0 1-1.22 1.207l-1.297-.915a.7.7 0 0 0-.716-.055 5 5 0 0 1-.734.298.7.7 0 0 0-.476.548l-.267 1.549a7.2 7.2 0 0 1-1.717-.009l-.27-1.567a.7.7 0 0 0-.47-.545 5 5 0 0 1-.728-.303.69.69 0 0 0-.726.05l-1.281.904a7.2 7.2 0 0 1-1.208-1.22l.916-1.297a.7.7 0 0 0 .054-.717 5 5 0 0 1-.297-.732.7.7 0 0 0-.549-.477l-1.548-.267a7.2 7.2 0 0 1 .009-1.717l1.567-.27a.7.7 0 0 0 .545-.468c.09-.273.19-.512.303-.731a.7.7 0 0 0-.05-.726l-.904-1.28a7.2 7.2 0 0 1 1.22-1.208l1.298.916c.21.15.486.17.716.054a5 5 0 0 1 .732-.297.7.7 0 0 0 .478-.549l.266-1.548a7.3 7.3 0 0 1 1.717.008l.271 1.568a.7.7 0 0 0 .468.545c.271.09.51.19.73.303a.7.7 0 0 0 .725-.05l1.281-.904a7.2 7.2 0 0 1 1.208 1.22l-.916 1.298a.7.7 0 0 0-.054.716c.117.233.216.48.297.733.08.25.291.433.548.477l1.549.267a7 7 0 0 1-.009 1.716"})]})},r=(0,n(827282).IU)("gear",i)},519454:(e,t,n)=>{"use strict";n.d(t,{R:()=>i});n(667294);var o=n(785893);const i=(0,n(827282).IU)("pencil",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M3.926 13.307H14.11c.183 0 .34-.066.472-.199a.644.644 0 00.198-.471.652.652 0 00-.198-.479.644.644 0 00-.472-.198H5.272l-1.346 1.347zm-.704-.636l7.683-7.684-1.312-1.319-7.69 7.684-.67 1.606c-.037.1-.017.191.06.273.083.082.174.105.274.069l1.655-.63zm8.34-8.326l.738-.732c.182-.187.278-.376.287-.567.009-.192-.068-.374-.232-.547l-.267-.267c-.169-.168-.351-.246-.547-.232-.196.014-.385.11-.567.287l-.739.732 1.327 1.326z"})})},839212:(e,t,n)=>{"use strict";n.d(t,{c:()=>o});const o=4},259408:(e,t,n)=>{"use strict";n.d(t,{$W:()=>p,KQ:()=>u,_e:()=>g,Ay:()=>y,fS:()=>d,t:()=>r(),V5:()=>h,Kz:()=>f});n(267602),n(653476);var o=()=>n(513670),i=()=>n(696459),r=()=>n(124199),a=()=>n(629719);const s=["student","personal","plus","business","enterprise"];function l(e){return(0,i().DE)(s,e)}var c=()=>n(122792);const d=["plus","business","enterprise","ai","sites_custom_hostnames"];function u(e,t,n,o){return g(p(e,t,n,o))}function p(e,t,n,o){const{name:r,scope:a,actor:s}=o,l={...o,billingData:a.billingData},c=a.premiumFeatureOverrides,d=r in c?function(e,t,n){const o={type:"contact_account_manager"},r=e[t.name].type;if("check"===r){const e={type:"none"};return!0===n?{type:"available",limit:e}:{type:"upsell",upsell:o,limit:e}}if("per_use"===r){const e=t.amount,i={type:"per_use",amount:n};return"unlimited"===n||n>e?{type:"available",limit:i}:{type:"upsell",upsell:o,limit:i}}if("cumulative"===r){const e=t.amount,i=t.data.current,r={type:"cumulative",current:i,total:n};return"unlimited"===n||n>=i+e?{type:"available",limit:r}:{type:"upsell",upsell:o,limit:r}}(0,i().t1)(r)}(t,o,c[r]):n[r](l);let u;if("available"===d.type){const e=d.upsell?m(a.billingData,d.upsell,o.supportedProducts):void 0;u={...d,upsell:e}}else if("blocked"===d.type){const e=m(a.billingData,d.upsell,o.supportedProducts);u={...d,upsell:e}}else{const e=m(a.billingData,d.upsell,o.supportedProducts),t=function(e){const{actor:t,supportedProducts:n,upsell:o}=e;if(!t.isSpaceAdmin)return"blocked";const r=o.type;switch(r){case"product":return n.includes(o.product)?"upsell":"blocked";case"contact_sales":case"contact_account_manager":return"upsell";default:(0,i().t1)(r)}}({actor:s,supportedProducts:o.supportedProducts,upsell:e});u={...d,type:t,upsell:e}}return Math.random()<.001&&e({level:"info",from:"premiumFeatureFramework",type:"getPremiumFeatureAvailability",data:{featureName:r,featureScope:a,featureActor:s,featureAvailability:d}}),u}function m(e,t,n){if((0,a().Rd)(e.subscription))return{type:"contact_account_manager"};if("product"!==(null==t?void 0:t.type)||n.includes(t.product)||!l(t.product))return t;const i=t.product,r=n.filter((e=>l(e))).filter((e=>"student"!==e)).filter((e=>c().rC[e]>=c().rC[i])),s=(0,o().F)(r,(e=>c().rC[e]));return s?{...t,product:s}:t}function g(e){return"available"===(null==e?void 0:e.type)}function h(e,t){const{available:n}=t;let o,r;return"unavailable"in t?(o=t.unavailable,r=t.unavailable):(o=t.blocked,r=t.upsell),"available"===e.type?n():"upsell"===e.type?r(e):"blocked"===e.type?o(e):(0,i().t1)(e)}function f(e,t){if(void 0!==e)return h(e,{available:()=>{},blocked:t,upsell:()=>{}})}function y(e){return r().object({required:e,optional:{}})}},400939:e=>{var t=/[a-zA-Z0-9_\u0392-\u03c9\u00c0-\u00ff\u0600-\u06ff]+|[\u4e00-\u9fff\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g;e.exports=function(e){var n=e.match(t),o=0;if(!n)return 0;for(var i=0;i<n.length;i++)n[i].charCodeAt(0)>=19968?o+=n[i].length:o+=1;return o}}}]);