"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[51140],{140798:(e,t,o)=>{o.d(t,{Lg:()=>m,N:()=>p,aG:()=>u});var n=()=>o(139978),i=()=>o(306164),r=()=>o(269299),s=()=>o(932753),a=()=>o(6006),l=()=>o(384334),c=()=>o(662062),d=()=>o(876822);function u(e){const{environment:t,currentSpaceViewStore:o,...n}=e;if(!o.getModel())return;const i=!(0,c().q)(o)[e.feature];r().createAndCommit({userAction:"userHomeActions.toggleHomeFeature",environment:t,canUndo:!0,perform:t=>{r().applyOperation({store:o,operation:{pointer:o.pointer,path:["settings","personal_home","enabled_features"],command:"update",args:{[e.feature]:i}},transaction:t})}}),(0,l().cY)({environment:t,show:i,...n})}function p(e){let{environment:t,option:o,from:n,userAction:i}=e;const s=d().default.state.currentSpaceViewStore;if(!s)return!1;const c=s.getOnAppStartStore().getValue();return r().createAndCommit({userAction:i,environment:t,canUndo:!0,perform:e=>{r().applyOperation({store:s,operation:{pointer:s.pointer,path:["settings","on_app_start"],command:"set",args:o},transaction:e})}}),(0,a().pJ)({spaceView:s.getModel(),preference:o}),(0,l().BX)({environment:t,oldValue:c,newValue:o,from:n}),!0}function m(e){const{environment:t,selectedStore:o,currentSpaceViewStore:a,collectionContextStore:c}=e,d=c.collectionViewStore(),u=c.collectionStore(),p=c.collectionViewBlockStore();if(!(u&&d&&p&&a))return;const m=a.getTeamsStores(),g=o.table===i().e0?m.indexOf(o)+1:0,h=o.table===i().e0?o.id:void 0;r().createAndCommit({environment:t,userAction:"PersonalHomeTrendingPanel.setCollectionViewSourceTeamId",canUndo:!0,perform:e=>{r().applyOperation({store:d,operation:{pointer:{id:d.id,table:n().np},path:["format","collection_view_source","teamId"],command:"set",args:h},transaction:e}),s().mc({environment:t,collectionViewBlockStore:p,collectionViewStore:d,collectionStore:u,collectionContextStore:c,isFullScreen:!1,isRootChild:!1,isInPeekRenderer:!1,viewsModuleContextType:void 0,forceLocalQueryCollection:!1})}}),(0,l().Ay)({environment:t,teamId:h,index:g})}},949719:(e,t,o)=>{o.d(t,{Z:()=>h});o(670560),o(267602),o(653476),o(241792);var n=o.n(o(443261)),i=o(667294),r=()=>o(788860),s=()=>o(513670),a=()=>o(827973),l=()=>o(255577),c=()=>o(388284),d=()=>o(951877),u=()=>o(527278),p=o(785893);const m=(0,r().vU)({inputPlaceholder:{defaultMessage:"Search for a propertyâ€¦",id:"database.viewSettings.propertySelect.inputPlaceholder"},none:{defaultMessage:"None",id:"database.viewSettings.propertySelect.noneMessage"},remove:{defaultMessage:"Remove",id:"database.viewSettings.propertySelect.removeMessage"}});function g(e){let{currentProperty:t,showNoneOption:g,showRemoveOption:h,getProperties:f,onAccept:v,inputPlaceholder:S,defaultShowPropertyCount:w,schema:y,format:C,renderProperty:x}=e;const b=(0,o(219727).Fy)(),[_,I]=(0,i.useState)(""),[M,k]=(0,i.useState)(!1),P=(0,o(142735).qz)(void 0,o(692304).Z),j=(0,o(846550).yK)((e=>({icon:{width:16,fill:e.mediumTextColor,marginLeft:4,marginRight:2},menuItem:{color:e.mediumTextColor}})),[]),L=(0,o(305580).i)(C,y,void 0,o(109477).j5.Page).collection_page_properties||[],T=!w||M,V=u().Z.formatMessage(m.none),Z=g?{key:"none",render:e=>(0,p.jsx)(a().Z,{...e,checkState:!t,title:V}),action:()=>{v(void 0)}}:void 0,O=h?{key:"remove",render:e=>(0,p.jsx)(a().Z,{...e,icon:(0,o(739479).y)(j.icon),title:u().Z.formatMessage(m.remove)}),action:()=>{v(void 0)}}:void 0,R=f();let A=s().MR(R,(e=>L.findIndex((t=>t.property===e))));if(_){const e=new Map;let t=A.map((t=>{const n=y[t],i=n?`${n.name} ${o(270315).SO[n.type]}`:"";return e.set(t,i),i}));t=n().filter(_,t).map((e=>{let{original:t}=e;return t})),A=A.filter((o=>t.includes(e.get(o)||"")))}else!T&&w&&(A=A.slice(0,w));const B=s().oA([!_||n().test(_,V)?Z:void 0,...A.map((e=>function(e,t,o,n,i){const r=t[e];if(!r)return;const s={key:e,render:t=>{const o=e===n;return i?i(t,e,o,r):(0,p.jsx)(d().N,{...t,propertySchema:r,format:d().L.Name,checkState:o})},action:()=>{o(e)}};return s}(e,y,v,t,x)))]);if(!T&&R.length>A.length&&!_){const e={key:"show_more",render:e=>(0,p.jsx)(a().Z,{...e,icon:(0,o(314379).o)(j.icon),style:j.menuItem,title:(0,p.jsx)(r()._H,{defaultMessage:"{moreCount} more",id:"database.viewSettings.propertySelect.showMoreTitle",values:{moreCount:R.length-A.length}})}),action:()=>{k(!0)}};B.push(e)}const D=B.length>0,E=Boolean(_),H=!O||D||E;H&&!D&&B.push({action:s().ZT,key:"noResults",render:e=>(0,p.jsx)(o(178498).Z,{...e,caption:(0,p.jsx)(r()._H,{defaultMessage:"No results",id:"database.viewSettings.propertySelect.noResultsTitle"})})});const N=[];return H&&N.push({key:"input",comp:(0,p.jsx)(c().Z,{isInput:!0,children:(0,p.jsx)(o(740046).ZP,{focusInitial:!b.isMobile||void 0,focus:!b.isMobile||void 0,value:_,onChange:e=>{I(e.target.value),P.setState({...P.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}}),k(!1)},placeholder:S||u().Z.formatMessage(m.inputPlaceholder)})})}),(B.length>0||O)&&N.push({key:"properties",comp:(0,p.jsx)(l().Z,{type:l().i.Vertical,initialFocus:0,sections:[...B.length>0?[{key:"results",render:e=>(0,p.jsx)(c().Z,{...e}),items:B}]:[],...O?[{key:"remove",render:e=>(0,p.jsx)(c().Z,{topBorder:B.length>0,...e}),items:[O]}]:[]],store:P})}),(0,p.jsx)(p.Fragment,{children:N.map((e=>{let{key:t,comp:o}=e;return(0,p.jsx)(i.Fragment,{children:o},t)}))})}const h=i.memo(g,o(632314).Z)},388573:(e,t,o)=>{o.d(t,{DF:()=>M,Ri:()=>T,Xi:()=>j,YF:()=>k,Zo:()=>L,bh:()=>P});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(30005);var n=()=>o(492788),i=()=>o(279865),r=()=>o(26970),s=()=>o(513670),a=()=>o(248825),l=()=>o(799454),c=()=>o(282662),d=()=>o(636340),u=()=>o(844085),p=()=>o(203927),m=()=>o(970105),g=()=>o(269299),h=()=>o(109757),f=()=>o(852465),v=()=>o(505462),S=()=>o(826955),w=()=>o(781022),y=()=>o(600785),C=()=>o(596308),x=()=>o(52566),b=()=>o(354988),_=()=>o(433908),I=()=>o(533492);function M(e){var t,o;const{environment:n,store:r,text:s,files:l,transaction:c,discussionLocation:d,property_id:u,blockStore:p}=e,g=f().GP(r);if(!g)return;const{filesToCreate:h,fileStoresToDelete:v}=function(e,t){const o=[],n=new Set;t.forEach((e=>{"local"===e.type&&e.file instanceof File?o.push(e.file):n.add(e.id)}));const i=f().le(e),r=i.filter((e=>e.getAlive()&&!n.has(e.id)));return{filesToCreate:o,fileStoresToDelete:r}}(r,l);L({commentStore:r,fileBlocks:v,transaction:c}),(0,b().J)({commentStore:r,files:h,environment:n,transaction:c});const S=f().zP(r);m().sO({environment:n,store:S,value:s,transaction:c}),(0,I().Q)(r,c);const y=null==r||null===(t=r.getParentStore())||void 0===t?void 0:t.getParentStore(),x=i().B7.includes(d),_=null==g||null===(o=g.getParentStore())||void 0===o?void 0:o.getNavigableBlockStore(),{property_type:M,collection_id:k,collection_view_id:P,view_type:j,collection_view_block_id:T}=(0,C().o)(u,p);a().zd(n,{from:d,comment_id:r.id,discussion_id:g.id,discussion_type:g.getType(),parent_block_id:g.getParentId(),parent_collection_id:null==y?void 0:y.getParentCollectionIdUpToTwoLevels(),...x&&{inbox_session_id:w().default.state.sessionId,notification_page_id:null==_?void 0:_.id},property_type:M,collection_id:k,collection_view_id:P,view_type:j,collection_view_block_id:T})}function k(e){var t,o;const{environment:n,commentStore:r,transaction:s,discussionLocation:l}=e,c=f().GP(r);if(!c)return;const u=f().ak(c),p=u.getValue();if(!p)return;L({commentStore:r,fileBlocks:f().le(r),transaction:s}),d().sW({store:r,transaction:s,data:{alive:!1}}),g().applyOperation({store:u,operation:{pointer:u.pointer,path:u.path,command:"listRemove",args:{id:r.id}},transaction:s}),(0===p.length||1===p.length&&p[0]===r.id)&&(0,_().d)({environment:n,discussionStore:c,transaction:s}),(0,I().Q)(r,s);const m=i().B7.includes(l),h=null==c||null===(t=c.getParentStore())||void 0===t?void 0:t.getNavigableBlockStore();a().k$(n,{from:e.discussionLocation,discussion_id:c.id,discussion_type:c.getType(),comment_id:r.id,parent_block_id:c.getParentId(),parent_collection_id:null===(o=c.getParentStore())||void 0===o?void 0:o.getParentCollectionIdUpToTwoLevels(),...m&&{inbox_session_id:w().default.state.sessionId,notification_page_id:null==h?void 0:h.id}})}function P(e){var t,o;const{environment:n,commentStore:r,discussionStore:s,transaction:l,discussionLocation:c}=e;d().sW({store:s,data:{resolved:!1},transaction:l});const u=i().B7.includes(c),p=null==s||null===(t=s.getParentStore())||void 0===t?void 0:t.getNavigableBlockStore();a().SU(n,{comment_id:r.id,discussion_id:s.id,from:e.discussionLocation,parent_block_id:s.getParentId(),parent_collection_id:null===(o=s.getParentStore())||void 0===o?void 0:o.getAssociatedCollectionId(),...u&&{inbox_session_id:w().default.state.sessionId,notification_page_id:null==p?void 0:p.id}})}function j(e){var t,o;const{environment:n,discussionStore:r,textValue:l,transaction:c,files:d,property_id:u,blockStore:p}=e,{id:m}=n.currentUser;if(!m)return;const g=h().dm(d);if(s().Xy(l,[])&&0===g.length)return;const f=(0,x().X)({discussionStore:r,text:l,files:g,environment:n,transaction:c}),v=i().B7.includes(e.discussionLocation),S=null===(t=r.getParentStore())||void 0===t?void 0:t.getNavigableBlockStore(),{property_type:y,collection_id:b,collection_view_id:_,view_type:I,collection_view_block_id:M}=(0,C().o)(u,p);a().d2(n,{from:e.discussionLocation,comment_id:f.id,discussion_id:r.id,discussion_type:r.getType(),parent_block_id:r.getParentId(),parent_collection_id:null==r||null===(o=r.getParentStore())||void 0===o?void 0:o.getParentCollectionIdUpToTwoLevels(),...v&&{inbox_session_id:w().default.state.sessionId,notification_page_id:null==S?void 0:S.id},property_type:y,collection_id:b,collection_view_id:_,view_type:I,collection_view_block_id:M})}function L(e){const{commentStore:t,fileBlocks:o,transaction:n}=e,i=f().ig(t);o.forEach((e=>{d().sW({store:e,data:{alive:!1},transaction:n}),c().Od({parentStore:i,childToRemoveStore:e,transaction:n})}))}async function T(e){var t;let{discussionStore:o,currentBlockStore:i,environment:s,analyticsFrom:a,currentEl:c}=e;if(!i)return null;if(!o.isDefined())return;function d(e){const t=(0,y().L)({discussionId:o.id,blockId:e});if(!t)return;const n=document.getElementsByClassName((0,r().dk)({discussionId:o.id}))[0];return n?u().bx({element:n,scrollerContext:t.getScrollerContext(),vertical:{reveal:"top"},horizontal:{reveal:"closest"},animate:!0}):u().XW({handle:t,vertical:{reveal:"top"},horizontal:{reveal:"closest"},animate:!0}),t.displaySelectionHalo(750),t}const m=(null===(t=o.getRecordStoreUIParent())||void 0===t?void 0:t.id)??o.getParentId();d(m)||(await p().Nz(i,[m]),await n().default.afterNextFlush(),d(m));const g=S().G.createChildStore(i,o.getParentPointer()),h=v().get(),f=null==h?void 0:h.commonAncestorContainer,w=!(null!=h&&h.collapsed)&&f&&(c===f||(null==c?void 0:c.contains(f)));l().Ib({environment:s,blockStore:g||i,analyticsFrom:a,discussionIds:[o.id],shouldFocusDiscussion:!w,recursivelyLoadAllDiscussions:!1})}},857739:(e,t,o)=>{o.d(t,{o:()=>P,Z:()=>_});o(267602),o(653476),o(470928),o(241792),o(228244),o(667294);var n=()=>o(219727),i=()=>o(788860),r=()=>o(568017),s=()=>o(513670),a=()=>o(250303),l=()=>o(446955),c=()=>o(949842),d=()=>o(352230),u=o(785893);const p=(0,o(827282).IU)("collectionDeleteRule",{viewBox:"0 0 14 14",svg:(0,u.jsx)("path",{d:"M12 3.27273L10.7273 2L7 5.72727L3.27273 2L2 3.27273L5.72727 7L2 10.7273L3.27273 12L7 8.27273L10.7273 12L12 10.7273L8.27273 7L12 3.27273Z"})});var m=()=>o(739479),g=()=>o(882292),h=()=>o(696768),f=()=>o(827973),v=()=>o(119891),S=()=>o(1910),w=()=>o(18748),y=()=>o(967092),C=()=>o(388284),x=()=>o(654133);const b=(0,i().vU)({inputPlaceholder:{defaultMessage:"Search for a propertyâ€¦",id:"database.viewSettings.collectionSortMenu.inputPlaceholder"},deleteButtonTooltip:{defaultMessage:"Remove sort rule",id:"database.sortMenu.deleteButtonTooltip"}});const _=function(e){let{schema:t,format:r,sorts:s,showDeleteAll:c,disabled:p,parentStore:g,collectionContextStore:h,onChange:f,onDeleteAll:v}=e;const S=(0,n().O7)(),{device:w}=S,x=!!Object.keys(t).some((e=>!s.find((t=>t.property===e)))),_=c&&s.length>0;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(L,{sorts:s,schema:t,disabled:p,parentStore:g,collectionContextStore:h,onChange:f}),(x||_)&&(0,u.jsxs)(C().Z,{children:[x&&(0,u.jsx)(o(448419).ZP,{popupType:w.isMobile?y().kQ.SlideUp:y().kQ.Popup,renderOrigin:e=>(0,u.jsx)(l().Z,{icon:o(521777).R,isGray:!0,title:(0,u.jsx)(i()._H,{id:"database.viewSettings.sortTab.newSort",defaultMessage:"Add sort"}),...e}),render:e=>{let n;return n=w.isMobile?{menuType:d().o.ActionSheet}:{menuType:d().o.Popup,width:280,height:287},(0,u.jsx)(o(198829).Z,{...n,children:(0,u.jsx)(o(949719).Z,{schema:t,format:r,getProperties:()=>Object.entries(t).filter((e=>{let[t,n]=e;return!s.find((e=>e.property===t))&&(0,o(532850).bA)(n)})).map((e=>{let[t]=e;return t})),onAccept:o=>{!function(e,t,o,n,i,r){var s;if(!e)return;const l=null===(s=o[e])||void 0===s?void 0:s.type,c=[...n,{property:e,direction:"ascending"}];i(c),a().wd({environment:t,action:"create_sort_accept",collectionContextStore:r,property_type:l})}(o,S,t,s,f,h),e.close()},inputPlaceholder:o(527278).Z.formatMessage(b.inputPlaceholder)})})}}),_&&(0,u.jsx)(l().Z,{icon:m().y,isRed:!0,isGray:!0,title:(0,u.jsx)(i()._H,{id:"database.viewSettings.sortTab.deleteAllSorts",defaultMessage:"Delete sort"}),onClick:()=>function(e,t,o,n){t([]),null==n||n(),a().wd({environment:e,action:"delete_all_sorts",collectionContextStore:o})}(S,f,h,v)})]})]})};function I(e,t,o,n,i,r){n(i.map(((o,n)=>n===e?t:o))),a().wd({environment:o,collectionContextStore:r,action:"update_sort"})}function M(e,t,o,n,i){o(n.filter(((t,o)=>o!==e))),a().wd({environment:t,action:"delete_sort",collectionContextStore:i})}function k(e){let{index:t,onChange:o,sorts:s,collectionContextStore:a}=e;const l=(0,n().O7)();return(0,u.jsx)(f().Z,{title:(0,u.jsx)("div",{style:{color:r().ZP.red},children:(0,u.jsx)(i()._H,{defaultMessage:"Delete",id:"database.viewSettings.sortTab.mobileDeleteButtonTitle"})}),icon:(0,u.jsx)(g().Z,{icon:m().y,styles:{color:r().ZP.red}}),onClick:()=>M(t,l,o,s,a),focused:!1})}function P(e){let{onDeleteClick:t}=e;const o=(0,i().YB)();return(0,u.jsx)(x().Z,{render:e=>(0,u.jsx)(S().Z,{ariaLabel:o.formatMessage(b.deleteButtonTooltip),icon:p,onClick:t,style:{marginRight:-6},...e}),renderTooltip:()=>o.formatMessage(b.deleteButtonTooltip)})}function j(e){let{sort:t,index:o,schema:i,disabled:r,parentStore:s,collectionContextStore:a,onChange:l,sorts:d}=e;const p=(0,n().O7)(),{device:m}=p;return m.isMobile?(0,u.jsxs)(C().Z,{children:[(0,u.jsx)(h().ZP,{index:o,sort:t,schema:i,parentStore:s,collectionContextStore:a,onChange:(e,t)=>I(e,t,p,l,d,a)}),!r&&(0,u.jsx)(k,{onChange:l,sorts:d,collectionContextStore:a,index:o})]}):(0,u.jsx)(C().Z,{extraTopPadding:!0,desktopStyle:{padding:"8px 0 0 8px",width:"100%"},children:(0,u.jsx)(w().ZP,{showDragHandle:!m.isMobile&&!r,title:(0,u.jsx)("div",{style:{display:"flex",alignItems:"center",flexGrow:1,whiteSpace:"nowrap"},onMouseDown:c().$0,children:(0,u.jsx)(h().ZP,{index:o,sort:t,schema:i,parentStore:s,collectionContextStore:a,onChange:(e,t)=>I(e,t,p,l,d,a)})}),right:!r&&(0,u.jsx)(P,{onDeleteClick:()=>M(o,p,l,d,a)}),rightStyle:{marginRight:19}})})}function L(e){let{sorts:t,schema:o,disabled:i,parentStore:r,collectionContextStore:l,onChange:c}=e;const d=(0,n().O7)(),{device:p}=d;if(p.isMobile)return(0,u.jsx)(u.Fragment,{children:t.map(((e,n)=>(0,u.jsx)(j,{schema:o,disabled:i,parentStore:r,collectionContextStore:l,onChange:c,sorts:t,sort:e,index:n},n)))});{const e=t.map(((e,t)=>t.toString()));return e.length>0?(0,u.jsx)("div",{style:{marginBottom:2},children:(0,u.jsx)(v().ZP,{direction:"vertical",keys:e,renderKey:e=>(0,u.jsx)(j,{schema:o,disabled:i,parentStore:r,collectionContextStore:l,onChange:c,sorts:t,sort:t[parseInt(e)],index:parseInt(e)}),onDrop:e=>function(e,t,o,n,i){o(s().oA(e.map((e=>n[parseInt(e)])))),a().wd({environment:t,action:"reorder_sorts",collectionContextStore:i})}(e,d,c,t,l)})}):null}}},696768:(e,t,o)=>{o.d(t,{G8:()=>S,OI:()=>w,ZP:()=>v});var n=o(667294),i=()=>o(219727),r=()=>o(532850),s=()=>o(943181),a=()=>o(788860),l=()=>o(491927),c=()=>o(250303),d=()=>o(827973),u=()=>o(448419),p=()=>o(397540),m=()=>o(360197),g=()=>o(960647),h=()=>o(697475),f=o(785893);const v=function(e){let{schema:t,sort:o,disabled:i,onChange:r,index:s,collectionViewType:a,collectionContextStore:l}=e;const c=t[o.property];return c?(0,f.jsxs)(n.Fragment,{children:[(0,f.jsx)(C,{disabled:i,schema:t,sort:o,onChange:r,index:s,collectionViewType:a,collectionContextStore:l,propertySchema:c}),(0,f.jsx)(y,{sort:o,index:s,onChange:r,collectionViewType:a,collectionContextStore:l,disabled:i})]}):null},S={ascending:(0,f.jsx)(a()._H,{defaultMessage:"Ascending",id:"collectionSortMenuRow.sortDirectionSelectMenu.ascending"}),descending:(0,f.jsx)(a()._H,{defaultMessage:"Descending",id:"collectionSortMenuRow.sortDirectionSelectMenu.descending"})},w=(0,a().vU)({menuTitle:{id:"collectionSortMenuRow.sortDirectionSelectMenu.title",defaultMessage:"Sort"},emptyPlaceholder:{id:"collectionSortMenuRow.sortDirectionSelectMenu.placeholder",defaultMessage:"Empty"}});function y(e){let{sort:t,index:o,onChange:n,collectionViewType:r,collectionContextStore:u,disabled:m}=e;const h=(0,i().O7)(),v=(0,a().YB)(),y=t.direction,C={menuTitle:v.formatMessage(w.menuTitle),items:[...s().C6],getKey:e=>e,selectedItem:y,disabled:m,onSelect:e=>{const i={...t,direction:e};n(o,i),u?c().wd({environment:h,action:"set_sort_direction",collectionContextStore:u}):r&&l().wd(h,{view_type:r,action:"set_sort_direction"})},renderItem:e=>(0,f.jsx)(d().Z,{title:S[e.value],...e}),renderOrigin:e=>(0,f.jsx)(g().Z,{...e,placeholder:v.formatMessage(w.emptyPlaceholder),title:y&&S[y],disabled:m,desktopStyle:{opacity:1}})};return(0,f.jsx)(p().Z,{...C,mobileActionSheet:!0},"direction")}function C(e){let{propertySchema:t,disabled:o,schema:n,sort:s,onChange:a,index:d,collectionViewType:p,collectionContextStore:g}=e;const v=(0,i().O7)(),{device:S}=v;return(0,f.jsx)(u().ZP,{popupType:S.isMobile?u().Z4.SlideUp:u().Z4.Popup,renderOrigin:e=>(0,f.jsx)(h().Z,{...e,propertySchema:t,disabled:o,textWrapperStyle:{opacity:1}}),render:e=>(0,f.jsx)(m().Z,{isRelationProperty:!1,schema:n,onAccept:e=>function(e,t,o,n,i,r,s){n(i,{...o,property:e}),s?c().wd({environment:t,action:"set_sort_property",collectionContextStore:s}):r&&l().wd(t,{view_type:r,action:"set_sort_property"})}(e,v,s,a,d,p,g),onClose:e.close,allowProperty:r().bA}),disabled:o})}},12530:(e,t,o)=>{o.d(t,{N:()=>r,Z:()=>a});o(667294);var n=o(785893);const i={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:16,height:16,fontSize:10,textAlign:"center",fontWeight:o(707513).Ue.semibold,borderRadius:4,color:o(568017).ZP.white,position:"static",marginLeft:6,WebkitFontSmoothing:"auto"};let r=function(e){return e[e.Red=0]="Red",e[e.Gray=1]="Gray",e}({});function s(e){return!!e&&e>0}const a=function(e){let{count:t,color:a,style:c,numberStyle:d,fadeIn:u}=e;const p=a===r.Red,m=(0,o(846550).yK)((e=>({badge:{...i,...c,...(t??0)>99&&{width:void 0,padding:2},background:p?e.redBadgeBackground:e.lightIconColor,...u&&{transition:"opacity 0.1s",opacity:s(t)?1:0}}})),[t,u,p,c]);return u||s(t)?(0,n.jsx)("div",{style:m.badge,children:(0,n.jsx)(l,{count:t,numberStyle:d})}):null};function l(e){let{count:t,numberStyle:o}=e;return t?1===t?(0,n.jsx)("span",{style:{marginLeft:-.5,...o},children:"1"}):t>99?(0,n.jsx)("span",{style:{letterSpacing:-.5,...o},children:"99+"}):t>9?(0,n.jsx)("span",{style:{letterSpacing:-.5,marginLeft:-.5,...o},children:t}):(0,n.jsx)("span",{style:{...o},children:t}):null}},951877:(e,t,o)=>{o.d(t,{L:()=>c,N:()=>d});o(667294);var n=()=>o(219727),i=()=>o(846550),r=()=>o(766933),s=()=>o(270315),a=()=>o(827973),l=o(785893);let c=function(e){return e[e.Name=0]="Name",e[e.Type=1]="Type",e}({});function d(e){const{propertySchema:t,format:o,locked:d}=e,u=(0,i().Fg)(),p=(0,n().O7)(),{name:m,type:g,icon:h}=t,f=o===c.Name?m:s().SO[g];return(0,l.jsx)(a().Z,{title:f,icon:(0,l.jsx)(r().ZP,{icon:h,type:g,size:p.device.isMobile?18:16,theme:u,style:{fill:u.regularIconColor,marginLeft:6,marginRight:2}}),disabled:d,...e})}},360197:(e,t,o)=>{o.d(t,{Z:()=>g});o(267602),o(653476),o(241792),o(228244);var n=o.n(o(443261)),i=(o(667294),()=>o(142735)),r=()=>o(226413),s=()=>o(532850),a=()=>o(788860),l=()=>o(513670),c=()=>o(352230),d=()=>o(255577),u=()=>o(388284),p=()=>o(951877),m=o(785893);const g=function(e){let{selectedProperty:t,onAccept:g,schema:h,onClose:f,allowProperty:v,isRelationProperty:S}=e;const w=(0,o(219727).O7)(),y=(0,a().YB)(),C=(0,i().qz)(void 0,o(718798).Z);let x=Object.keys(h);const b=x.some(o(15607).w);x=l().MR(x,(e=>{const t=(0,s().Qm)({schema:h,property:e});return t?t.name:""}));const _=b?r().bf:r().iw;x=l().zu(x,_),x.unshift(_);const I=(0,i().VK)((()=>C.state.inputValue),[C]);if(v&&(x=x.filter((e=>{const t=(0,s().Qm)({schema:h,property:e});return t&&v(t)}))),I){let e=x.map((e=>{const t=(0,s().Qm)({schema:h,property:e});return t&&t.name}));e=n().filter(I,e).map((e=>{let{original:t}=e;return t})),x=x.filter((t=>{const o=(0,s().Qm)({schema:h,property:t});return o&&o.name&&e.includes(o.name)}))}const M=I||x.length>o(347577).nt,k=l().oA(x.map((e=>{const o=(0,s().Qm)({schema:h,property:e});if(!o)return null;return{key:e,render:n=>(0,m.jsx)(p().N,{...n,propertySchema:o,format:p().L.Name,checkState:e===t}),action:()=>g(e)}}))),P=[{key:0,render:e=>(0,m.jsx)(u().Z,{...e}),items:k}],{device:j}=w,L=M?(0,m.jsx)(u().Z,{isInput:!0,children:(0,m.jsx)(o(740046).ZP,{focus:!j.isMobile||void 0,focusAfterAnimation:!0,value:I,onChange:e=>C.setState({focus:!0,inputValue:e.target.value}),placeholder:S?y.formatMessage({defaultMessage:"Search for a relation propertyâ€¦",id:"propertySelectMenu.searchForProperty.relation.placeholder"}):y.formatMessage({defaultMessage:"Search for a propertyâ€¦",id:"propertySelectMenu.searchForProperty.default.placeholder"})})}):null;let T;return T=j.isMobile?{menuType:c().o.Modal,title:S?y.formatMessage({defaultMessage:"Relation property",id:"propertySelectMenu.mobileMenu.relationProperty.header"}):y.formatMessage({defaultMessage:"Property",id:"propertySelectMenu.mobileMenu.property.header"}),right:(0,m.jsx)(o(470386).CancelMenuText,{}),onClickRight:f,header:L}:{menuType:c().o.Popup,width:280,maxHeight:480,header:L},(0,m.jsx)(o(198829).Z,{...T,children:0===k.length?(0,m.jsx)(u().Z,{children:(0,m.jsx)(o(838367).Z,{title:(0,m.jsx)(a()._H,{defaultMessage:"No results",id:"propertySelectMenu.search.noResults.title"})})}):(0,m.jsx)(d().Z,{type:d().i.Vertical,sections:P,onAccept:f,initialFocus:I.length>0?0:void 0})})}},697475:(e,t,o)=>{o.d(t,{Z:()=>s});o(667294);var n=()=>o(788860),i=()=>o(951877),r=o(785893);const s=function(e){const t=(0,o(219727).O7)(),{device:s}=t;if(s.isMobile)return e.propertySchema?(0,r.jsx)(i().N,{propertySchema:e.propertySchema,onClick:e.onClick,focused:!1,format:i().L.Name,showExtensionArrow:!e.disabled}):(0,r.jsx)(o(827973).Z,{focused:!1,title:(0,r.jsx)(n()._H,{defaultMessage:"Property",id:"database.mobileFilterAndSortMenu.property.buttonMenuItem.label"})});{const t=e.propertySchema&&(0,r.jsx)(o(899316).ZP,{propertySchema:e.propertySchema,showIcon:!0,style:{lineHeight:1.4}}),i=(0,r.jsx)(n()._H,{defaultMessage:"Property",id:"database.filterAndSortMenu.propertyButton.label"});return(0,r.jsx)(o(960647).Z,{title:t,placeholder:i,onClick:e.onClick,disabled:e.disabled,disableMargins:e.disableMargins,desktopStyle:e.textWrapperStyle})}}},972544:(e,t,o)=>{o.d(t,{S:()=>r,Z:()=>a});var n=o(667294),i=o(785893);const r=8;function s(e,t){let{isSelected:n}=e;const{radioButtonStyle:s,dotStyle:a}=(0,o(846550).yK)((e=>({radioButtonStyle:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:16,height:16,borderRadius:16,marginRight:r,background:n?e.blueColor:e.whiteButtonBackground,border:n?"none":`1px solid ${e.radioButtonBorder}`,transition:"background 100ms ease-out"},dotStyle:{width:6,height:6,borderRadius:6,background:e.regularInvertedTextColor,transition:"opacity 100ms ease-out",opacity:n?1:0}})),[n]);return(0,i.jsx)("div",{ref:t,style:s,children:(0,i.jsx)("div",{style:a})})}const a=n.forwardRef(s)},244303:(e,t,o)=>{o.d(t,{a:()=>l});o(667294);var n=()=>o(816512),i=()=>o(696459),r=()=>o(634760),s=()=>o(981583),a=o(785893);function l(e){const{actor:t}=e,o={size:e.size??14,style:{marginRight:2,...e.style}};return(0,n().YU)(t)?(0,a.jsx)(r().Z,{botValue:t.asActor,...o}):(0,n().$S)(t)?(0,a.jsx)(s().Z,{userValue:t.asActor,...o}):(0,n().Iq)(t)?(0,a.jsx)(s().Z,{userValue:void 0,...o}):void(0,i().t1)(t)}},352701:(e,t,o)=>{o.d(t,{n:()=>p});o(670560),o(267602),o(470928);var n=()=>o(459264),i=()=>o(926724),r=()=>o(714230),s=()=>o(235484),a=()=>o(253335),l=()=>o(749826),c=()=>o(138912),d=()=>o(338855);const u=[s().U9,s().f3,s().mQ,s().Dv,s().Nw,s().nO];function p(e,t){if(!e)return[];const o=l().default.checkGate({gateName:"cron_connected_relation"}),p=l().default.checkGate({gateName:"connected_relation"}),m=l().default.checkGate({gateName:"slack_connected_relation"}),g=l().default.checkGate({gateName:"salesforce_connected_relation_database_actions_enabled"}),h=e.getDatabaseType()===i().Ym,f=c().default.state;if(!f.loaded)return[];const v=f.integrations,S={};if(!h){const e=v.find((e=>e.id===s().U9)),t=(0,a().GT)();var w;if(e)S[t.name]={name:t.name,pattern:n().x,integration:e,tooltipImage:{img:r().Z.images.tooltips.properties.githubSyncPullStatusPng,scale:.5},description:t.description,canOnlyAdminAuth:{disabledPropertyTooltipMessage:null===(w=t.canOnlyAdminAuth)||void 0===w?void 0:w.disabledPropertyTooltipMessage}}}const y=[];if(t&&(y.push(s().f3,s().mQ,s().Nw),m&&y.push(s().nO)),o&&y.push(s().Dv),y.forEach((e=>{const t=v.find((t=>t.id===e));if(null!=t&&t.info.original_url_patterns)for(const n of t.info.original_url_patterns){var o;null!==(o=n.additional_types)&&void 0!==o&&o.connectedRelation&&(S[n.name]||(S[n.name]={name:(0,d().ni)({pattern:n,integration:t}),pattern:n,integration:t}))}})),!p)return Object.values(S);for(const n of v)if(n.info.original_url_patterns&&t&&![...u,s().Ff].includes(n.id))for(const e of n.info.original_url_patterns){var C;null!==(C=e.additional_types)&&void 0!==C&&C.connectedRelation&&(S[e.name]||(n.id===s().aW&&g?S[n.name]={name:n.name,pattern:e,integration:n}:S[e.name]={name:(0,d().ni)({pattern:e,integration:n}),pattern:e,integration:n}))}return Object.values(S)}},228772:(e,t,o)=>{o.d(t,{r:()=>r});var n=()=>o(142735),i=()=>o(876822);function r(){return(0,n().VK)((()=>i().default.state.currentSpaceStore),[])}},728243:(e,t,o)=>{o.d(t,{Z:()=>d});o(267602),o(30005);var n=o(667294),i=()=>o(142735),r=()=>o(396035),s=()=>o(217465),a=()=>o(269299),l=()=>o(757590),c=()=>o(876822);function d(e){let{unpersistedInMemoryRecordCache:t}=e;const o=(0,i().VK)((()=>{var e;return null===(e=c().default.state.currentUserStore)||void 0===e?void 0:e.userId}),[]);return{createAndCommit:(0,n.useCallback)((e=>{let{perform:n}=e;const i=new(l().Y)({deadlockTimeoutMs:a().DEADLOCK_WARNING_TIMEOUT_MS}),c=n(i),d=s().RecordMap.create();i.stores.forEach((e=>{const t=e.getRecordModel(e.pointer);t&&d.addModel(t)})),(0,r().FS)({operations:i.operations,recordMap:d,updateOnly:!1});for(const r of d){const{model:e,pointer:n}=r;t.setModelAndRole({pointer:n,userId:o},e,"editor")}return t.emitAll(),{performResult:c,serverCommitResult:Promise.resolve()}}),[t,o])}}},753463:(e,t,o)=>{o.d(t,{$:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("arrowDownLine",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M13.2944 8.45459C13.2944 8.65967 13.217 8.84196 13.062 9.00146L8.55713 13.5132C8.48421 13.5907 8.39762 13.6499 8.29736 13.6909C8.20166 13.7319 8.10368 13.7524 8.00342 13.7524C7.8986 13.7524 7.79834 13.7319 7.70264 13.6909C7.60693 13.6499 7.52035 13.5907 7.44287 13.5132L2.93799 9.00146C2.78304 8.84196 2.70557 8.65967 2.70557 8.45459C2.70557 8.24495 2.77393 8.07178 2.91064 7.93506C3.04736 7.79834 3.21826 7.72998 3.42334 7.72998C3.52816 7.72998 3.62614 7.75049 3.71729 7.7915C3.80843 7.82796 3.88818 7.88037 3.95654 7.94873L5.5083 9.47998L7.7915 12.0229L7.3335 12.2485L7.25146 10.0132V1.52295C7.25146 1.3042 7.31982 1.12419 7.45654 0.98291C7.59782 0.841634 7.78011 0.770996 8.00342 0.770996C8.22217 0.770996 8.3999 0.841634 8.53662 0.98291C8.6779 1.12419 8.74854 1.3042 8.74854 1.52295V10.0132L8.6665 12.2485L8.21533 12.0229L10.4917 9.47998L12.0435 7.94873C12.1118 7.88037 12.1916 7.82796 12.2827 7.7915C12.3739 7.75049 12.4718 7.72998 12.5767 7.72998C12.7817 7.72998 12.9526 7.79834 13.0894 7.93506C13.2261 8.07178 13.2944 8.24495 13.2944 8.45459ZM13.2944 14.4839C13.2944 14.6981 13.2261 14.8758 13.0894 15.0171C12.9526 15.1584 12.7817 15.229 12.5767 15.229H3.43701C3.22282 15.229 3.04736 15.1584 2.91064 15.0171C2.77393 14.8758 2.70557 14.6981 2.70557 14.4839C2.70557 14.2743 2.77393 14.0988 2.91064 13.9575C3.04736 13.8208 3.22282 13.7524 3.43701 13.7524H12.5767C12.7817 13.7524 12.9526 13.8208 13.0894 13.9575C13.2261 14.0988 13.2944 14.2743 13.2944 14.4839Z"})})},660065:(e,t,o)=>{o.d(t,{r:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("arrowRightRounded",{viewBox:"0 0 16 13",svg:(0,n.jsx)("path",{d:"M15.3828 6.85156C15.3828 7.09635 15.2917 7.3099 15.1094 7.49219L9.95312 12.6328C9.77083 12.8099 9.5651 12.8984 9.33594 12.8984C9.09635 12.8984 8.89583 12.8203 8.73438 12.6641C8.57812 12.5078 8.5 12.3125 8.5 12.0781C8.5 11.9583 8.52083 11.8464 8.5625 11.7422C8.60938 11.638 8.67188 11.5469 8.75 11.4688L10.5 9.70312L13.4141 7.04688L13.6875 7.54688L10.9766 7.70312H1.48438C1.22396 7.70312 1.01302 7.625 0.851562 7.46875C0.695312 7.30729 0.617188 7.10156 0.617188 6.85156C0.617188 6.59635 0.695312 6.39062 0.851562 6.23438C1.01302 6.07292 1.22396 5.99219 1.48438 5.99219H10.9766L13.6875 6.15625L13.4141 6.66406L10.5 4L8.75 2.22656C8.67188 2.14844 8.60938 2.0599 8.5625 1.96094C8.52083 1.85677 8.5 1.74219 8.5 1.61719C8.5 1.38281 8.57812 1.1875 8.73438 1.03125C8.89583 0.875 9.09635 0.796875 9.33594 0.796875C9.45052 0.796875 9.5599 0.820312 9.66406 0.867188C9.76823 0.914062 9.86719 0.984375 9.96094 1.07812L15.1094 6.21094C15.2917 6.39323 15.3828 6.60677 15.3828 6.85156Z"})})},77152:(e,t,o)=>{o.d(t,{k:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("collectionNumberType",{viewBox:"0 0 14 14",svg:(0,n.jsx)("path",{d:"M1.73457,9.90096 L1.73457,4.54339 L1.65064,4.54339 L0,5.68112 L0,4.37087 L1.73923,3.17252 L3.14274,3.17252 L3.14274,9.90096 L1.73457,9.90096 Z M3.59633,5.22882 C3.59633,3.90925 4.62215,3 6.0956,3 C7.52242,3 8.43633,3.82532 8.43633,4.96304 C8.43633,5.75106 8.09128,6.29195 6.97221,7.34108 L5.57337,8.64667 L5.57337,8.7306 L8.52959,8.7306 L8.52959,9.90096 L3.6756,9.90096 L3.6756,8.91711 L6.03498,6.66031 C6.87429,5.85364 7.05614,5.5459 7.05614,5.0936 C7.05614,4.55738 6.67379,4.13306 6.01633,4.13306 C5.3309,4.13306 4.90192,4.58536 4.90192,5.22882 L3.59633,5.22882 Z M10.4889,6.96805 L10.4889,5.93757 L11.3282,5.93757 C11.967,5.93757 12.4007,5.55988 12.4007,5.00967 C12.4007,4.50609 12.0043,4.12374 11.3469,4.12374 C10.6661,4.12374 10.2464,4.47345 10.1998,5.07495 L8.89888,5.07495 C8.94551,3.83464 9.90139,3 11.4168,3 C12.9089,3 13.7389,3.82532 13.7342,4.80917 C13.7296,5.62516 13.2166,6.16139 12.4939,6.33857 L12.4939,6.42717 C13.4311,6.56239 14,7.15923 14,8.05915 C14,9.23884 12.8903,10.0735 11.3702,10.0735 C9.8501,10.0735 8.81495,9.24351 8.75434,7.97056 L10.1019,7.97056 C10.1439,8.53942 10.6288,8.90312 11.3515,8.90312 C12.0649,8.90312 12.5639,8.51611 12.5639,7.93326 C12.5639,7.33642 12.0976,6.96805 11.3422,6.96805 L10.4889,6.96805 Z"})})},54634:(e,t,o)=>{o.d(t,{C:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("membersFilled",{viewBox:"0 0 30 30",svg:(0,n.jsx)("path",{d:"M20.31 14.731c2.22 0 4.097-1.967 4.097-4.513 0-2.485-1.887-4.391-4.098-4.391-2.2 0-4.097 1.937-4.087 4.411 0 2.526 1.866 4.493 4.087 4.493zm-11.725.233c1.937 0 3.57-1.724 3.57-3.935 0-2.17-1.653-3.823-3.57-3.823-1.917 0-3.57 1.683-3.56 3.844 0 2.19 1.633 3.914 3.56 3.914zm-5.588 9.21h7.606c-1.085-1.552.082-4.615 2.374-6.42-1.116-.72-2.566-1.248-4.392-1.248-4.533 0-7.464 3.337-7.464 6.085 0 1.004.507 1.582 1.876 1.582zm10.994-.01h12.637c1.673 0 2.251-.508 2.251-1.44 0-2.607-3.316-6.198-8.57-6.198-5.263 0-8.57 3.59-8.57 6.197 0 .933.578 1.44 2.252 1.44z"})})},965910:(e,t,o)=>{o.d(t,{h:()=>n().h});var n=()=>o(968061)},589515:(e,t,o)=>{o.d(t,{v:()=>n().v});var n=()=>o(820717)},453710:(e,t,o)=>{o.d(t,{N:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("properties",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M1.91602 4.83789C2.44238 4.83789 2.87305 4.40723 2.87305 3.87402C2.87305 3.34766 2.44238 2.91699 1.91602 2.91699C1.38281 2.91699 0.952148 3.34766 0.952148 3.87402C0.952148 4.40723 1.38281 4.83789 1.91602 4.83789ZM5.1084 4.52344H14.3984C14.7607 4.52344 15.0479 4.23633 15.0479 3.87402C15.0479 3.51172 14.7607 3.22461 14.3984 3.22461H5.1084C4.74609 3.22461 4.45898 3.51172 4.45898 3.87402C4.45898 4.23633 4.74609 4.52344 5.1084 4.52344ZM1.91602 9.03516C2.44238 9.03516 2.87305 8.60449 2.87305 8.07129C2.87305 7.54492 2.44238 7.11426 1.91602 7.11426C1.38281 7.11426 0.952148 7.54492 0.952148 8.07129C0.952148 8.60449 1.38281 9.03516 1.91602 9.03516ZM5.1084 8.7207H14.3984C14.7607 8.7207 15.0479 8.43359 15.0479 8.07129C15.0479 7.70898 14.7607 7.42188 14.3984 7.42188H5.1084C4.74609 7.42188 4.45898 7.70898 4.45898 8.07129C4.45898 8.43359 4.74609 8.7207 5.1084 8.7207ZM1.91602 13.2324C2.44238 13.2324 2.87305 12.8018 2.87305 12.2686C2.87305 11.7422 2.44238 11.3115 1.91602 11.3115C1.38281 11.3115 0.952148 11.7422 0.952148 12.2686C0.952148 12.8018 1.38281 13.2324 1.91602 13.2324ZM5.1084 12.918H14.3984C14.7607 12.918 15.0479 12.6309 15.0479 12.2686C15.0479 11.9062 14.7607 11.6191 14.3984 11.6191H5.1084C4.74609 11.6191 4.45898 11.9062 4.45898 12.2686C4.45898 12.6309 4.74609 12.918 5.1084 12.918Z"})})},80159:(e,t,o)=>{o.d(t,{w:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("templates",{viewBox:"0 0 20 20",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M6.39733 5.67853C5.89764 5.50234 5.36002 5.40649 4.8 5.40649C2.14904 5.40649 0 7.55432 0 10.2038C0 12.8533 2.14904 15.0011 4.8 15.0011C6.52165 15.0011 8.0316 14.0952 8.87867 12.7343L5.26487 12.0975L6.39733 5.67853Z"}),(0,n.jsx)("path",{d:"M17.3126 3.66609L7.85843 2L6.19141 11.4489L10.6545 12.2354L14.3998 5.81854L16.3449 9.15116L17.3126 3.66609Z"}),(0,n.jsx)("path",{d:"M8.80078 17L14.4008 7.4054L20.0008 17H8.80078Z"})]})})},260747:(e,t,o)=>{o.d(t,{U:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("unlocked",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M2.49023 14.7227H8.89551C9.94824 14.7227 10.4746 14.1963 10.4746 13.0479V8.20801C10.4746 7.22363 10.085 6.69727 9.29883 6.57422V4.83105C9.29883 3.22461 10.3174 2.35645 11.541 2.35645C12.7646 2.35645 13.79 3.22461 13.79 4.83105V6.28711C13.79 6.76562 14.0703 7.01855 14.4395 7.01855C14.8018 7.01855 15.082 6.7793 15.082 6.28711V4.96094C15.082 2.36328 13.3525 1.1123 11.541 1.1123C9.72949 1.1123 8 2.36328 8 4.96094V6.54004H2.49023C1.43066 6.54004 0.911133 7.06641 0.911133 8.20801V13.0479C0.911133 14.1963 1.43066 14.7227 2.49023 14.7227ZM2.68848 13.5059C2.3877 13.5059 2.2373 13.3623 2.2373 13V8.25586C2.2373 7.89355 2.3877 7.76367 2.68848 7.76367H8.7041C9.00488 7.76367 9.14844 7.89355 9.14844 8.25586V13C9.14844 13.3623 9.00488 13.5059 8.7041 13.5059H2.68848ZM7.99316 21.1123C6.5918 21.1123 5.2793 21.8779 4.75293 23.375L5.78516 24.4141C5.94922 23.0811 6.87891 22.3564 7.99316 22.3564C9.2168 22.3564 10.2422 23.2246 10.2422 24.8311V26.54H7.9248L9.1416 27.7637H11.0078C11.3086 27.7637 11.4521 27.8936 11.4521 28.2559V30.0742L12.7783 31.4072V28.208C12.7783 27.2031 12.3682 26.6768 11.541 26.5674V24.9609C11.541 22.3633 9.81152 21.1123 7.99316 21.1123ZM13.749 35.126C13.9609 35.3379 14.3164 35.3379 14.5215 35.126C14.7266 34.9072 14.7334 34.5723 14.5215 34.3535L2.46973 22.3154C2.25781 22.1035 1.90918 22.0967 1.69043 22.3154C1.48535 22.5205 1.48535 22.876 1.69043 23.0811L13.749 35.126ZM4.79395 34.7227H11.1992C11.5 34.7227 11.7598 34.6816 11.9785 34.5928L10.8711 33.4922C10.8096 33.499 10.7549 33.5059 10.6865 33.5059H4.99219C4.69141 33.5059 4.54102 33.3623 4.54102 33V28.2559C4.54102 27.9004 4.68457 27.7637 4.97852 27.7637H5.14258L4.04883 26.6631C3.48828 26.8818 3.21484 27.3809 3.21484 28.208V33.0479C3.21484 34.1963 3.73438 34.7227 4.79395 34.7227Z"})})},356140:(e,t,o)=>{o.d(t,{W:()=>r});var n=()=>o(142735),i=()=>o(876822);function r(){const{currentSpaceStore:e}=(0,n().VK)((()=>i().default.state),[]);return null==e?void 0:e.id}},455962:(e,t,o)=>{o.d(t,{O:()=>p,c:()=>m});o(821057);var n=()=>o(396136),i=()=>o(139978),r=()=>o(332542),s=()=>o(636340),a=()=>o(269299),l=()=>o(487270),c=()=>o(527278),d=()=>o(826955),u=()=>o(844650);function p(e){const{environment:t,layoutStore:o,transaction:n,options:i}=e,{inMemoryRecordCache:a}=o,l=o.getSpaceId(),c=o.getParentPointer();if(!c||"collection"!==c.table)throw new Error("Invalid state: no collection pointer");if(!l)throw new Error("Cannot add collection view to views main module -- Invalid state: no space id");const d=s().j4({environment:t,type:"collection_view",inMemoryRecordCache:a,transaction:n});r().jG({childStore:d,parentStore:o,transaction:n});const{collectionViewStore:u}=m({environment:t,transaction:n,layoutStore:o,collectionViewBlockStore:d,options:i});return{collectionViewStore:u,collectionViewBlockStore:d}}function m(e){const{environment:t,transaction:o,layoutStore:r,collectionViewBlockStore:p,options:m}=e,{inMemoryRecordCache:g}=r,h=r.getParentPointer();if(!h||"collection"!==h.table)throw new Error("Invalid state: no collection pointer");const f=r.getSpaceId();if(!f)throw new Error("Cannot add collection view to views main module -- Invalid state: no space id");const v=(0,l().$x)({environment:t,table:i().np,spaceId:f}),S={id:v.id,type:"page",parent_id:p.pointer.id,parent_table:n().iU,space_id:f,alive:!0,name:c().Z.formatMessage(u().B.editor),format:{collection_pointer:h,hide_linked_collection_name:!0}};return null!=m&&m.viewsTabId&&(S.format={...S.format,page_layout_pointer:{...r.pointer,views_main_tab_id:m.viewsTabId}}),s().ae({environment:t,table:i().np,value:S,inMemoryRecordCache:g,transaction:o}),a().applyOperation({store:p,operation:{pointer:p.pointer,path:["view_ids"],command:"listBefore",args:{id:v.id}},transaction:o}),{collectionViewStore:d().Xr.createChildStore(p,v)}}},533622:(e,t,o)=>{o.r(t),o.d(t,{ConfigureViewsMainModuleAddNewViewButtonWrapper:()=>G});o(267602),o(653476),o(241792);var n=o(667294),i=()=>o(492788),r=()=>o(219727),s=()=>o(142735),a=()=>o(846550),l=()=>o(263184),c=()=>o(226413),d=()=>o(766933),u=()=>o(752778),p=()=>o(788860),m=()=>o(696459),g=()=>o(139224),h=()=>o(932753),f=()=>o(827973),v=()=>o(448419),S=()=>o(198829),w=()=>o(255577),y=()=>o(388284),C=()=>o(654133),x=()=>o(352230),b=()=>o(466970),_=()=>o(676232),I=()=>o(998901),M=()=>o(104088),k=(o(821057),()=>o(956057)),P=()=>o(792197),j=()=>o(308240),L=()=>o(215134),T=()=>o(396136),V=()=>o(139978),Z=()=>o(543172),O=()=>o(636340),R=()=>o(269299),A=()=>o(487270),B=()=>o(527278),D=()=>o(826955),E=()=>o(99537),H=()=>o(455962);function N(e){var t,o;const{environment:n,layoutStore:i,relationPropertySchema:r}=e,s=null===(t=i.getModel())||void 0===t?void 0:t.firstRawModuleOfType("editor"),a=null===(o=i.getModel())||void 0===o?void 0:o.firstRawModuleOfType("viewsMain");if(!s&&!a)throw new Error("Invalid state: no editor or viewsMain module");const{performResult:l}=R().createAndCommit({environment:n,canUndo:!0,perform:e=>{const{inMemoryRecordCache:t}=i;let o,l=a;if(l){var c;if("viewsMain"!==(null===(c=l)||void 0===c?void 0:c.type))throw new Error("Invalid state: editor or viewsMain module is not of the expected type");o=D().G.createChildStore(i,l.collection_view_block_pointer)}else{const t=(0,Z().ZP)(),{collectionViewBlockStore:r}=(0,H().O)({environment:n,layoutStore:i,transaction:e});o=r,l={id:t,type:"viewsMain",collection_view_block_pointer:{...o.pointer,spaceId:o.getSpaceId()}};const a=(0,L().B1)(i.getModules(),(e=>"editor"===e.type));if(!a||!s||"form_conditional_modules"===a.area)throw new Error("Invalid state: no editor module");if("views_main_tab_modules"===a.area)throw new Error("Cannot add views main module when editor is already in views main module");R().applyOperation({store:i,transaction:e,operation:P().CI.deleteModuleInArea({pointer:i.pointer,area:j().mt[a.area],moduleId:s.id})}),(0,E().sW)({position:{type:"absolute",area:a.area,index:a.index},module:l,layoutStore:i,transaction:e,environment:n,sessionId:(0,k().Il)(),isPropertyCreation:!1})}if(!l)throw new Error("Invalid state: no views main module");const d=(0,A().$x)({environment:n,table:V().np,spaceId:o.getSpaceId()}).id,u={id:d,type:"table",parent_id:o.pointer.id,parent_table:T().iU,space_id:o.getSpaceId(),alive:!0,name:r?r.name:B().Z.formatMessage(K.view),format:{hide_linked_collection_name:!0,...null!=r&&r.property?{collection_pointer:r.collection_pointer,property_filters:[{id:k().Il(),filter:{property:r.property,filter:{operator:"relation_contains",value:{type:"relative",value:{type:"current_page_in_related_collection"}}}}}]}:{},subitem_display_mode:null!=r&&r.property?"disabled":void 0}};return R().applyOperation({store:o,operation:{pointer:o.pointer,path:["view_ids"],command:"listAfter",args:{id:d}},transaction:e}),O().ae({environment:n,table:V().np,value:u,inMemoryRecordCache:t,transaction:e}),{viewsMainModule:l,collectionViewBlockPointer:o.pointer,collectionViewPointer:{id:d,table:V().np,spaceId:o.getSpaceId()}}},userAction:"viewsModuleActions.addViewToViewsMainModule"});if(!l)throw new Error("Transaction to add collection view to views main module failed");return{viewsMainModule:l.viewsMainModule,collectionViewPointer:l.collectionViewPointer,collectionViewBlockPointer:l.collectionViewBlockPointer}}const K=(0,p().vU)({view:{defaultMessage:"View",id:"pageLayout.viewsModuleActions.defaultViewName"}});var U=()=>o(95294),W=()=>o(162178),F=o(785893);function G(e){let{renderOrigin:t,onClose:o}=e;const[i,a]=(0,n.useState)(!1),l=(0,n.useRef)(null),d=(0,n.useContext)(W().eK),p=null==d?void 0:d.moduleStateByIdStore,f=null==d?void 0:d.collectionContextStore,[S,w]=(0,n.useState)(!1),y=(0,r().O7)(),{layoutStore:C}=(0,W().J9)(),x=(0,n.useCallback)(((e,t)=>{var o;const n=t?null==p||null===(o=p.get(t))||void 0===o?void 0:o.collectionContextStore:void 0;n&&(h().f8({environment:y,collectionContextStore:n,collectionViewId:e.id,isFullScreen:!1,isRootChild:!1,isInPeekRenderer:!1}),g().r$({collectionContextStore:n,collectionSettingsStore:n.settingsStore,closeOnEscape:!1}))}),[y,p]),b=(0,s().VK)((()=>{var e;const t=null===(e=C.getParentStore())||void 0===e?void 0:e.getModel();if((null==t?void 0:t.table)===u().vF)return t}),[C]),_=(0,s().VK)((()=>{const e=null==b?void 0:b.getNormalizedSchema();return Object.entries(e??{}).filter((e=>{let[t,o]=e;return(0,m().$K)(o)&&(0,c().p_)(o)&&o.property}))}),[b]),k=(0,n.useCallback)((()=>{a(!1),null==o||o()}),[o]),P=(0,n.useCallback)((()=>{a(!0)}),[a]),j=(0,n.useCallback)((()=>(0,F.jsx)(z,{setIsOpen:a,onClose:o,relations:_,setCurrentViewPointer:x,collectionModel:b,setIsRelationPopupOpen:w})),[_,b,x,o,w]),L=(0,n.useCallback)((e=>t(e)),[t]);return f&&b?(0,F.jsxs)("div",{ref:l,children:[(0,F.jsx)(v().ZP,{alignmentToOrigin:I().Alignment.Center,popupType:M().k.Popup,onClose:k,onClick:P,open:i,render:j,renderOrigin:L,disablePopup:!0}),(0,F.jsx)($,{currentCollectionId:b.id,buttonRef:l,isRelationPopupOpen:S,setIsRelationPopupOpen:w,collectionContextStore:f,setCurrentViewPointer:x,onClose:o})]}):null}function z(e){let{setIsOpen:t,onClose:o,relations:s,setCurrentViewPointer:l,collectionModel:c,setIsRelationPopupOpen:u}=e;const{layoutStore:m,setModuleSelection:g}=(0,W().J9)(),h=(0,r().O7)(),v=(0,a().Fg)(),M=(0,b().E)("layout_view_module_next"),k=(0,a().yK)((e=>({icon:{width:16,height:16}})),[]),P=(0,n.useMemo)((()=>{if(0!==s.length)return{key:0,items:[],render:e=>(0,F.jsx)(y().Z,{...e,title:(0,F.jsx)(p()._H,{...Q.relatedToDatabase,values:{database:null==c?void 0:c.getName()}}),children:s.map((e=>{let[t,n]=e;return(0,F.jsx)(f().Z,{title:null==n?void 0:n.name,icon:(0,F.jsx)(d().ZP,{size:16,theme:v,icon:null==n?void 0:n.icon,type:"relation"}),focused:!1,onClick:()=>{const{viewsMainModule:e,collectionViewPointer:t}=N({environment:h,layoutStore:m,relationPropertySchema:n});e&&g({type:"existing_module",moduleId:e.id,isDragging:!1}),t&&i().default.afterNextFlush((()=>{l(t,null==e?void 0:e.id),null==o||o()}))}},t)}))})}}),[c,h,m,o,s,l,g,v]),j=(0,n.useMemo)((()=>{const e=s.length>0;return{key:1,items:[],render:t=>(0,F.jsx)(y().Z,{...t,topBorder:e,children:(0,F.jsx)(C().Z,{renderTooltip:()=>(0,F.jsx)("div",{style:{maxWidth:300,width:"max-content",overflowWrap:"break-word",textWrap:"wrap"},children:(0,F.jsx)(p()._H,{...Q.linkAnExistingDatabaseTooltip})}),placement:I().Placement.Bottom,render:e=>(0,F.jsx)(f().Z,{title:(0,F.jsx)(p()._H,{...Q.linkAnExistingDatabase}),onClick:()=>{u(!0)},focused:!1,...e},"link_existing_database")})})}}),[s.length,u]),L=(0,n.useMemo)((()=>{if(M)return{key:2,items:[],render:e=>(0,F.jsx)(y().Z,{...e,topBorder:!0,children:(0,F.jsx)(f().Z,{...e,focused:!1,title:(0,F.jsx)(p()._H,{...Q.newView}),icon:(0,_().t)(k.icon),onClick:()=>{const{viewsMainModule:e,collectionViewPointer:t}=N({environment:h,layoutStore:m});e&&g({type:"existing_module",moduleId:e.id,isDragging:!1}),t&&i().default.afterNextFlush((()=>{l(t,null==e?void 0:e.id),null==o||o()}))}})})}}),[M,k.icon,h,m,g,l,o]);return(0,F.jsx)(S().Z,{menuType:x().o.Popup,onClick:()=>t(!1),width:270,paddingBottom:2,children:(0,F.jsx)(w().Z,{initialFocus:void 0,sections:[P,j,L].filter((e=>void 0!==e)),type:w().i.Vertical})})}function $(e){let{currentCollectionId:t,buttonRef:o,isRelationPopupOpen:s,setIsRelationPopupOpen:a,setCurrentViewPointer:d,onClose:p,collectionContextStore:m}=e;const g=(0,r().O7)(),{layoutStore:h,setModuleSelection:f}=(0,W().J9)(),v=(0,n.useMemo)((()=>l().default.createValue({open:!1,stack:[]},{name:"newRelationMenuCollectionSettingsStore"})),[]);return s?(0,F.jsx)(U().b,{originRef:o,propertyType:"relation",settingsViewToOpen:{type:"selectRelationSource",property:void 0,formatKey:void 0,enforceTwoWayRelation:"ifNotSelf"},open:s,isPropertyEditComplete:e=>Boolean((0,c().p_)(e)&&e.collection_id),onPropertyEditComplete:e=>{var t;const o=null===(t=h.getParentStore())||void 0===t?void 0:t.getModel();if((null==o?void 0:o.table)!==u().vF)return;const n=null==o?void 0:o.getNormalizedSchema()[e];if(!n||!(0,c().p_)(n))return;a(!1),v.setState({stack:[],open:!1});const{viewsMainModule:r,collectionViewPointer:s}=N({environment:g,layoutStore:h,relationPropertySchema:n});r&&f({type:"existing_module",moduleId:r.id,isDragging:!1}),s&&i().default.afterNextFlush((()=>{d(s,null==r?void 0:r.id),null==p||p()}))},onDismiss:()=>{a(!1),v.setState({stack:[],open:!1})},rollbackIfEditIncomplete:!0,collectionContextStore:m,collectionSettingsStore:v}):null}const Q=(0,p().vU)({relatedToDatabase:{defaultMessage:"Related to {database}",id:"pageLayout.configureViews.relatedToDatabase"},linkAnExistingDatabase:{defaultMessage:"Link an existing database",id:"pageLayout.configureViews.linkAnExistingDatabase"},linkAnExistingDatabaseTooltip:{defaultMessage:"Create a view representing a new relation property. Must be a two-way relation if linking to a different database.",id:"pageLayout.configureViews.linkAnExistingDatabaseTooltip"},newView:{defaultMessage:"New view",id:"database.viewSettings.createViewTab.newView"},newRelation:{defaultMessage:"New relation",id:"pageLayout.configureViews.newRelation"},back:{defaultMessage:"Back",id:"collectionsSettingsMenu.back"}})},420406:(e,t,o)=>{o.d(t,{$:()=>n});function n(e,t){t.route.name;return!1}},341643:(e,t,o)=>{o.d(t,{DW:()=>S,IG:()=>h,J4:()=>v,hZ:()=>f,q9:()=>g,qq:()=>w,s4:()=>m});var n=o(667294),i=()=>o(219727),r=()=>o(142735),s=()=>o(801812),a=()=>o(677559),l=()=>o(690664),c=()=>o(105649),d=()=>o(291335),u=()=>o(590972),p=()=>o(420406);const m=new(a().Ss)("PerformanceToolbar",(()=>Promise.all([o.e(62743),o.e(5242),o.e(4642),o.e(69197),o.e(52658),o.e(54194)]).then(o.bind(o,333301)))),g=(0,a().kF)(m,(e=>e.PerformanceToolbar)),h=(0,a().kF)(m,(e=>e.PerformanceToolbarSettings));function f(){const e=(0,i().O7)();return(0,r().VK)((()=>(0,p().$)(e,e.RouterStore.state)),[e])}function v(){const e=(0,i().O7)(),t=y("PerformanceToolbarStore"),o=y("isPerformanceToolbarVisible");return(0,r().VK)((()=>!(!t||!o)&&o(e,e.RouterStore.state,t.state)),[o,e,t])}function S(){const e=y("PerformanceToolbarStore");return(0,r().VK)((()=>!!e&&e.state.isPerformanceToolbarMounted),[e])}function w(){const e=(0,i().O7)(),t=y("createPerformanceToolbarMouseListeners"),o=y("PerformanceToolbarStore"),{sidebarExpanded:s,sidebarWidth:a,secondarySidebarExpanded:p,secondarySidebarWidth:m,updateSidebarExpanded:g,updateSidebarWidth:h}=(0,r().VK)((()=>({sidebarExpanded:d().sidebarExpandedStore.state,sidebarWidth:d().sidebarWidthStore.state,secondarySidebarExpanded:c().default.isOpen(),secondarySidebarWidth:l().default.getWidth(),updateSidebarExpanded:u().default.state.expanded,updateSidebarWidth:u().default.state.width})),[]);return(0,n.useEffect)((()=>{if(o&&t)return t(e,(e=>o.update((t=>({...t,isMouseNearPerformanceToolbar:e})))),s,a,p,m,g,h)}),[t,e,o,s,a,p,m,g,h])}function y(e){const t=f(),[{value:o}]=(0,s().r5)((()=>t?m.load().then((t=>t[e])):Promise.resolve(void 0)),[e,t]);return o}},662062:(e,t,o)=>{o.d(t,{q:()=>i});const n={greeting:!0,tasks:!1,tips:!1,templates:!1,calendar:!1,custom_db:!1};function i(e){const t=(null==e?void 0:e.getHomeEnabledFeatures())??{};return{...n,...t}}},974442:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o(263184).default.createValue({open:!1},{name:"ConfirmOverwriteModalStore"})},719157:(e,t,o)=>{o.d(t,{D:()=>r});var n=()=>o(142735),i=()=>o(749826);function r(e){const{experimentId:t,groups:o,disableExposureLogging:r}=e,s=function(e){const{experimentId:t,disableExposureLogging:o,defaultGroup:r}=e;return(0,n().VK)((()=>i().default.getEligibleGroup({experimentId:t,defaultGroup:r??"control",disableExposureLogging:o})),[t,o,r])}({experimentId:t,disableExposureLogging:r});return o[s]}},385337:(e,t,o)=>{o.d(t,{R:()=>f});o(667294);var n=()=>o(219727),i=()=>o(142735),r=()=>o(846550),s=()=>o(788860),a=()=>o(568017),l=()=>o(696459),c=()=>o(707513),d=()=>o(946563),u=()=>o(654133),p=()=>o(998901),m=()=>o(876822),g=()=>o(965014),h=o(785893);function f(e){let{upsell:t,mobileStyle:o,desktopStyle:f,analyticsName:v,onClick:S,disableTooltip:w}=e;const y=(0,r().Fg)(),C=(0,n().O7)(),{device:x}=C,b=(0,i().VK)((()=>{const{currentSpaceStore:e}=m().default.state;return null==e?void 0:e.canAdmin()}),[]),_=(0,i().VK)((()=>function(e,t){if("product"!==e.type)return{};switch(e.product){case"plus":case"business":case"enterprise":return{color:t.blueColor,background:"light"===t.mode?a().ZP.diffBackground:"rgba(35, 131, 226, 0.2)",fontWeight:c().Ue.medium};default:return{}}}(t,y)),[t,y]);if("product"!==t.type)return null;if(x.isMobileNative)return null;const I=(()=>{switch(t.product){case"personal":return(0,h.jsx)(s()._H,{defaultMessage:"Personal Pro",id:"upgradeButton.personal.text"});case"plus":return(0,h.jsx)(s()._H,{defaultMessage:"Plus â†—",id:"upgradeButton.plus.textWithArrow"});case"business":return(0,h.jsx)(s()._H,{defaultMessage:"Business â†—",id:"upgradeButton.business.textWithArrow"});case"enterprise":return(0,h.jsx)(s()._H,{defaultMessage:"Enterprise â†—",id:"upgradeButton.enterprise.textWithArrow"});case"ai":return(0,h.jsx)(s()._H,{defaultMessage:"AI â†—",id:"upgradeButton.ai.textWithArrow"});case"sites_custom_hostnames":return(0,h.jsx)(s()._H,{defaultMessage:"Custom Hostnames â†—",id:"upgradeButton.sites_custom_hostnames.textWithArrow"});default:(0,l().t1)(t.product)}})();return x.isMobile||!b?(0,h.jsx)(d().Z,{mobileStyle:o,children:I}):(0,h.jsx)(u().Z,{delayThreshold:120,disableTooltip:w,placement:p().Placement.Bottom,renderTooltip:()=>(0,h.jsx)("div",{style:{maxWidth:500},children:(0,h.jsx)(s()._H,{defaultMessage:"Upgrade to use this feature.",id:"premiumFeatureUpgradeButton.upgrade.tooltip"})}),originGap:6,render:e=>(0,h.jsx)(d().Z,{desktopStyle:f,innerStyle:_,onClick:e=>function(e,t,o,n,i){g().y(n,{from:t,upsell:o}),i&&i(e)}(e,v,t,C,S),...e,children:I})})}},184441:(e,t,o)=>{o.d(t,{default:()=>r});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1,isShowingLoadingState:!1}}updateUserCustomizations(e,t){this.state.open&&this.state.collectionTemplate&&this.setState({...this.state,userCustomizations:{...this.state.userCustomizations,[e]:t}})}updateCollectionTemplate(e){this.state.open&&this.state.collectionTemplate&&this.setState({...this.state,collectionTemplate:e})}updatePreviewCollectionViewTemplateId(e){this.state.open&&this.state.collectionTemplate&&this.setState({...this.state,previewCollectionViewTemplateId:e})}getParentStore(){return this.state.open?this.state.parentStore:void 0}getShouldShowExpandedTemplateList(){return this.state.open&&this.state.shouldShowExpandedTemplateList}setShouldShowExpandedTemplateList(e){this.state.open&&this.setState({...this.state,shouldShowExpandedTemplateList:e})}close(e){var t,o;this.state.open&&(null===(t=(o=this.state).onClose)||void 0===t||t.call(o,e),this.setState({open:!1,isShowingLoadingState:!1}))}reset(){this.setState(this.getInitialState())}}const i=new n;(0,o(947115).exposeDebugValue)("InitializeWorkflowTemplateModalStore",i);const r=i},814866:(e,t,o)=>{o.d(t,{$v:()=>w,Hi:()=>f,Xe:()=>x,Y$:()=>_,dY:()=>b,oD:()=>v,r3:()=>C});var n=o(667294),i=()=>o(219727),r=()=>o(142735),s=()=>o(506347),a=()=>o(342792),l=()=>o(696459),c=()=>o(957042),d=()=>o(497065),u=()=>o(887430),p=()=>o(429725),m=()=>o(876822);const g=o(124199).literals("view","instructions","runs","chat","module","view_settings","database","trigger","function","test","debug","runtime_actor");function h(e){const{RouterStore:t}=e;if("page"!==t.state.route.name)return;const{workflowViewType:o,workflowViewKey:n}=t.state.route;return function(e){const t=(0,c().OD)(g,e.workflowViewType);if(t)switch(t){case"view":return e.workflowViewKey?{view:{type:"settings"},settingsPane:{type:"instructions"},view:{type:"view",key:e.workflowViewKey}}:{view:{type:"settings"},settingsPane:{type:"instructions"}};case"instructions":case"debug":case"runtime_actor":return{view:{type:"settings"},settingsPane:{type:t}};case"module":case"view_settings":case"trigger":case"function":case"database":if(!e.workflowViewKey)return{view:{type:"settings"},settingsPane:{type:"instructions"}};const o=(0,a().xP)(e.workflowViewKey);return o?{view:{type:"settings"},settingsPane:{type:"database",collectionId:o}}:{view:{type:"settings"},settingsPane:{type:"instructions"}};case"runs":return{view:{type:"settings"},settingsPane:{type:"runs",runId:(0,a().xP)(e.workflowViewKey)}};case"chat":return{view:{type:"settings"},settingsPane:{type:"chat",transcriptId:e.workflowViewKey}};case"test":if(!e.workflowViewKey)return{view:{type:"settings"},settingsPane:{type:"instructions"}};const[n,i]=e.workflowViewKey.split(",");return n&&i?{view:{type:"settings"},settingsPane:{type:"test",name:i,functionKey:n}}:{view:{type:"settings"},settingsPane:{type:"instructions"}};default:(0,l().t1)(t)}}({workflowViewType:o,workflowViewKey:n})}function f(e){return void 0!==h(e)}function v(e){const t=(0,i().O7)();return(0,r().VK)((()=>h(t)??e),[t,e])}function S(e){const t=e.view.type;switch(t){case"settings":return function(e){const t=e.type;switch(t){case"instructions":case"debug":case"runtime_actor":return{workflowViewType:t};case"runs":return{workflowViewType:t,workflowViewKey:e.runId};case"chat":return{workflowViewType:t,workflowViewKey:e.transcriptId};case"test":return{workflowViewType:t,workflowViewKey:`${e.functionKey},${e.name}`};case"database":return{workflowViewType:t,workflowViewKey:e.collectionId};case"module":case"view_settings":case"trigger":case"function":return{workflowViewType:t,workflowViewKey:e.key};default:(0,l().t1)(t)}}(e.settingsPane);case"view":return{workflowViewType:t,workflowViewKey:e.view.key};default:(0,l().t1)(t)}}function w(e){const{store:t,environment:o,navigationPane:n}=e,{workflowViewType:i,workflowViewKey:r}=S(n),a=(0,p().Hu)({store:t,pageVisitSource:s().tY.Workflows,workflowViewType:i,workflowViewKey:r});d().c4({environment:o,url:a})}function y(e){const t=(0,i().O7)();return(0,n.useCallback)((o=>{w({store:e,environment:t,navigationPane:o})}),[t,e])}function C(e){const{store:t,environment:o}=e,n=(0,p().Hu)({store:t,pageVisitSource:s().tY.Workflows});d().c4({environment:o,url:n})}function x(e){const t=y(e);return(0,n.useCallback)((e=>{t({view:{type:"settings"},settingsPane:e})}),[t])}function b(e){const t=y(e);return(0,n.useCallback)((e=>{t({view:{type:"settings"},settingsPane:{type:"instructions"},view:e})}),[t])}function _(){return(0,r().VK)((()=>{const e=m().default.state.mainEditorCurrentBlockStore;if(e)if(e.isCollectionView()){if(e.getCollectionStore())return(0,u().fm)(e)}else{const t=e.getAssociatedCollectionStore();if(t&&!t.isPageTreeCollection())return(0,u().fm)(e)}}),[])}},77973:(e,t,o)=>{o.d(t,{U:()=>L});var n=o.n(o(389539)),i=(o(821057),o(409045),o(453627),o(994774),o(995194),o(520522),o(200082),o(379976),o(724224),o(761121),o(637133),o(241792),o.n(o(402568))),r=()=>o(513670),s=()=>o(326966),a=()=>o(431595),l=()=>o(24945),c=()=>o(255933);const d={version:8,notion_version:0,variant:2},u={version:8,notion_version:1,variant:2},p=0,m=1,g=6,h=8,f=10,v=Date.UTC(2024,0,1);function S(e,t){if(e)return t[p]=255,t[p+1]=240|15&t[p+1],t;const o=Math.floor(((new Date).getTime()-v)/s().A0);if(o>=4096||o<0)throw new Error("Invalid offsetInDays.");return t[p]=o>>4,t[p+1]=o<<4&240|15&t[p+1],t}function w(e,t){if(e>=2**36||e<0)throw new Error("Invalid spaceShortId.");t[m]=240&t[m]|e/2**32&15;for(let o=0;o<4;o++)t[m+1+o]=e/2**(24-8*o)&255;return t}function y(e,t){const o=e?1:0;return t[g]=d.version<<4&240|d.notion_version<<1&14|1&o,t[h]=d.variant<<6&192|63&t[h],t}function C(e,t){if("block"===e)return t[f]=(0,l().ym)(e)|63&t[f],t;const o=(0,l().ym)(e);return t[f]=o>>8&127,t[f+1]=255&o,t}function x(e,t){const o=(0,l().Nq)(e);return t[f]=127&o|128&t[f],t}function b(e,t,o,n){const i=new Uint8Array(16),r=globalThis.crypto.getRandomValues(i);return o!==c().bx&&S(e,r),w(t,r),y(n,r),C(o,r),k(r)}function _(e,t,o){return I(e,t,o)}function I(e,t,o){const n=i()(o),s=r().yo(n,2).map((e=>parseInt(e.join(""),16)));if((0,l().LV)(t)){if(void 0===e)throw new(a().D3)(`Deterministic ID for '${t}' must specify a space short id`)}else if(void 0!==e)throw new(a().D3)(`Deterministic ID for '${t}' should not provide a space short id`);const c=new Uint8Array(s);return e&&w(e,c),x(t,c),function(e){e[g]=240&u.version<<4|14&u.notion_version<<1|1&e[g],e[h]=192&u.variant<<6|63&e[h]}(c),k(c)}const M=new Array(256).fill(0).map(((e,t)=>t.toString(16).padStart(2,"0")));function k(e){let t=0;return M[e[t++]]+M[e[t++]]+M[e[t++]]+M[e[t++]]+"-"+M[e[t++]]+M[e[t++]]+"-"+M[e[t++]]+M[e[t++]]+"-"+M[e[t++]]+M[e[t++]]+"-"+M[e[t++]]+M[e[t++]]+M[e[t++]]+M[e[t++]]+M[e[t++]]+M[e[t++]]}var P=()=>o(956057);const j=`,${[o(363777).uK].join(",")},`;class L{constructor(e){this.environmentName=void 0,this.mainShortId=void 0,this.getSettings=void 0,this.isServerOriginated=void 0,this.mapSpaceIdToShortId=void 0,this.idCreatorLogger=void 0,this.environmentName=e.environmentName,this.mainShortId=o(631871).jF[this.environmentName],this.getSettings=e.getSettings,this.isServerOriginated=e.isServerOriginated,this.mapSpaceIdToShortId=e.mapSpaceIdToShortId,this.idCreatorLogger=e.idCreatorLogger??(()=>{})}idInMain(e,t){const{enableTestDateOffset:o,enableIdSchema:n}=this.getSettings(t);return!n||j.includes(`,${e},`)?this.legacyId(e,"disabled",t):(this.idCreatorLogger(void 0,e,o?"id_schema_test":"id_schema",t),function(e,t,o,n){return b(e,t,o,n)}(o,this.mainShortId,e,this.isServerOriginated))}pointerInMain(e,t){return{table:e,id:this.idInMain(e,t)}}async idWithSpaceId(e,t,o){const{enableTestDateOffset:i,enableIdSchema:r}=this.getSettings(o);if(!r)return this.legacyId(t,"disabled",o);const s=this.mapSpaceIdToShortId(e),a=n().types.isPromise(s)?await s:s;return a?(this.idCreatorLogger(e,t,i?"id_schema_test":"id_schema",o),b(i,a,t,this.isServerOriginated)):this.legacyId(t,"missing_short_id",o)}async pointerWithSpaceId(e,t,o){return{table:t,spaceId:e,id:await this.idWithSpaceId(e,t,o)}}idWithSpaceShortId(e,t,o){const{enableTestDateOffset:n,enableIdSchema:i}=this.getSettings(o);return i?(this.idCreatorLogger(void 0,t,n?"id_schema_test":"id_schema",o),b(n,e,t,this.isServerOriginated)):this.legacyId(t,"disabled",o)}legacyId(e,t,o){return this.idCreatorLogger(void 0,e,t,o),P().Il()}async deterministicIdWithSpaceId(e,t,o,i){const{enableTestDateOffset:r,enableIdSchema:s}=this.getSettings(i);if(!s)return this.idCreatorLogger(e,t,"disabled",i),P().Ul(o);const a=this.mapSpaceIdToShortId(e),l=n().types.isPromise(a)?await a:a;return l?(this.idCreatorLogger(e,t,r?"id_schema_test":"id_schema",i),_(l,t,o)):(this.idCreatorLogger(e,t,"missing_short_id",i),P().Ul(o))}deterministicIdWithSpaceShortId(e,t,o,n){const{enableTestDateOffset:i,enableIdSchema:r}=this.getSettings(n);return r?(this.idCreatorLogger(void 0,t,i?"id_schema_test":"id_schema",n),_(e,t,o)):(this.idCreatorLogger(void 0,t,"disabled",n),P().Ul(o))}async getSpaceIdCreator(e){if(!e)return new T(e,this.idCreatorLogger);const{enableIdSchema:t}=this.getSettings();if(!t)return new T(e,this.idCreatorLogger);const o=this.mapSpaceIdToShortId(e),i=n().types.isPromise(o)?await o:o;return this.getSpaceShortIdCreator(e,i)}getSpaceIdCreatorSync(e){if(!e)return new T(e,this.idCreatorLogger);const{enableIdSchema:t}=this.getSettings();if(!t)return new T(e,this.idCreatorLogger);const o=this.mapSpaceIdToShortId(e),i=n().types.isPromise(o)?void 0:o;return this.getSpaceShortIdCreator(e,i)}getSpaceShortIdCreator(e,t){const{enableIdSchema:o}=this.getSettings();return o&&t?new V(e,this,t):new T(e,this.idCreatorLogger)}async getSpaceIdCreatorFromModel(e){return e.getShortIdStr()?this.getSpaceShortIdCreator(e.id,Number(e.getShortIdStr())):await this.getSpaceIdCreator(e.id)}}class T{constructor(e,t){this.spaceId=void 0,this.idCreatorLogger=void 0,this.spaceId=e,this.idCreatorLogger=t}idInSavedSpace(e,t){return this.idCreatorLogger(void 0,e,"disabled",t),P().Il()}idInMain(e,t){return this.idCreatorLogger(void 0,e,"disabled",t),P().Il()}deterministicIdInSavedSpace(e,t,o){return this.idCreatorLogger(void 0,e,"disabled",o),P().Ul(t)}pointerInMain(e,t){return{id:this.idInMain(e),table:e}}pointerInSavedSpace(e,t){return{id:this.idInSavedSpace(e),table:e,spaceId:this.spaceId}}getSpaceId(){return this.spaceId}}class V{constructor(e,t,o){this.spaceId=void 0,this.idCreator=void 0,this.spaceShortId=void 0,this.spaceId=e,this.idCreator=t,this.spaceShortId=o}idInSavedSpace(e,t){return this.idCreator.idWithSpaceShortId(this.spaceShortId,e,t)}idInMain(e,t){return this.idCreator.idInMain(e,t)}deterministicIdInSavedSpace(e,t,o){return this.idCreator.deterministicIdWithSpaceShortId(this.spaceShortId,e,t,o)}pointerInMain(e,t){return{id:this.idInMain(e,t),table:e}}pointerInSavedSpace(e,t){return{id:this.idInSavedSpace(e,t),table:e,spaceId:this.spaceId}}getSpaceId(){return this.spaceId}}},971095:(e,t,o)=>{o.d(t,{A:()=>n});const n=(0,o(830742).LS)("importEvernote")}}]);