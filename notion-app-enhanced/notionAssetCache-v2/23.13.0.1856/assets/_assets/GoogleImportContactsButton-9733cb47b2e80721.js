"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[24149],{758112:(t,i,e)=>{e.d(i,{Au:()=>c,LR:()=>l,Mt:()=>a,U$:()=>_,Xu:()=>u,_e:()=>v,sV:()=>s});var n=()=>e(594546),o=()=>e(572623),r=()=>e(697623);function s(t,i){const e=r().zt(),s=o().JF();(0,n().j)({environment:t,event:{eventName:"google_contacts_imports_invite_render_invite_popup",eventProperties:{subscription_tier:e,domain_type:s,origin:i.origin,invite_flow_id:i.invite_flow_id}}})}function c(t,i){const e=r().zt(),s=o().JF();(0,n().j)({environment:t,event:{eventName:"google_contacts_imports_invite_click_invite_button",eventProperties:{subscription_tier:e,domain_type:s,invited_user_count:i.invited_user_count,origin:i.origin,invite_token_query:i.inviteTokenQuery,invite_targets:i.inviteTargets,invite_flow_id:i.invite_flow_id}}})}function _(t,i){const e=r().zt(),s=o().JF();(0,n().j)({environment:t,event:{eventName:"google_contacts_imports_invite_completed",eventProperties:{subscription_tier:e,domain_type:s,invited_user_count:i.invited_user_count,is_success:i.is_success,origin:i.origin,invite_flow_id:i.invite_flow_id,error:i.error,invite_stage:i.invite_stage}}})}function l(t,i){const e=r().zt(),s=o().JF();(0,n().j)({environment:t,event:{eventName:"google_contacts_imports_invite_dismiss_popup",eventProperties:{subscription_tier:e,domain_type:s,origin:i.origin,invite_flow_id:i.invite_flow_id}}})}function a(t,i){const e=r().zt(),s=o().JF();(0,n().j)({environment:t,event:{eventName:"google_contacts_imports_invite_click_select_all",eventProperties:{subscription_tier:e,domain_type:s,origin:i.origin,invite_flow_id:i.invite_flow_id,invited_user_count:i.invited_user_count,is_unselect:i.is_unselect,invite_token_query:i.invite_token_query}}})}function v(t,i){const e=r().zt(),s=o().JF();(0,n().j)({environment:t,event:{eventName:"google_contacts_imports_invite_start_google_contacts_integration",eventProperties:{subscription_tier:e,domain_type:s,origin:i.origin,invite_flow_id:i.invite_flow_id,from:i.from}}})}function u(t,i){const e=r().zt(),s=o().JF();(0,n().j)({environment:t,event:{eventName:"google_contacts_imports_invite_complete_google_contacts_integration",eventProperties:{subscription_tier:e,domain_type:s,origin:i.origin,invite_flow_id:i.invite_flow_id,from:i.from,is_success:i.is_success}}})}},887863:(t,i,e)=>{e.d(i,{r:()=>o});e(667294);var n=e(785893);const o=(0,e(827282).IU)("circleCheckFilled",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M8 16c4.377 0 8-3.631 8-8 0-4.376-3.631-8-8.008-8C3.624 0 0 3.624 0 8c0 4.369 3.631 8 8 8zm-.886-4.165c-.267 0-.487-.11-.69-.384l-1.97-2.416a.852.852 0 01-.187-.51c0-.352.274-.643.627-.643.228 0 .4.07.596.33l1.592 2.055 3.35-5.38c.148-.236.352-.362.556-.362.345 0 .667.236.667.604 0 .173-.102.353-.196.518l-3.686 5.804c-.165.259-.393.384-.66.384z"})})},961780:(t,i,e)=>{e.d(i,{e:()=>l});e(667294);var n=()=>e(846550),o=()=>e(568017),r=()=>e(312578),s=()=>e(696347),c=()=>e(887863),_=e(785893);function l(t){const{isConnecting:i,isIntegrationAuthenticated:e,hideChevronIcon:l}=t,a=(0,n().yK)((t=>({circleCheck:{height:14,width:14,color:o().ZP.blue,fill:o().ZP.blue},chevron:{height:12,width:12},loadingSpinner:{width:14,height:14,marginLeft:6}})),[]);return i?(0,_.jsx)(r().Z,{style:a.loadingSpinner}):(0,_.jsxs)(_.Fragment,{children:[e&&(0,c().r)(a.circleCheck),!l&&(0,s().o)(a.chevron)]})}},81223:(t,i,e)=>{e.r(i),e.d(i,{GoogleImportContactsButton:()=>h});e(267602),e(653476),e(470928);var n=e(667294),o=()=>e(219727),r=()=>e(142735),s=()=>e(235484),c=()=>e(839002),_=()=>e(855741),l=()=>e(758112),a=()=>e(824462),v=()=>e(388915),u=()=>e(92175),d=()=>e(961780),g=()=>e(842576),p=()=>e(876822),m=()=>e(138912),f=e(785893);function h(t){const{onClickAuthenticated:i,buttonLabel:e,inviteOrigin:h,flowId:w,from:y,hideChevronIcon:C,containerStyle:b,buttonStyle:k,loadContacts:j}=t,x=(0,o().O7)(),[I,F]=n.useState(!1),P=(0,r().VK)((()=>p().default.state.currentSpaceStore),[]),z=(0,r().VK)((()=>{const t=null==P?void 0:P.getBotSettingsStore().getValue();return"approved_only"!==(null==t?void 0:t.integration_restrictions)||Boolean((null==t?void 0:t.integration_approval_statuses)&&t.integration_approval_statuses[s().lT])}),[P]),S=(0,r().VK)((()=>m().default.integrations.state.find((t=>t.id===s().lT))),[]),N=(0,r().VK)((()=>m().default.externalAuthentications.state.filter((t=>t.integration_id===s().lT))),[]),T=(0,g().ph)();return P&&z?(0,f.jsx)("div",{style:b,children:(0,f.jsx)(u().Z,{style:k,onClick:async()=>{0===N.length?await async function(t){const{from:e,loadContacts:n}=t,o=x.currentUser.id;if(!S||!P||!o)return;try{var r;F(!0),l()._e(x,{origin:h,from:e,invite_flow_id:w});const t=await v().hM({environment:x,integration:S,spaceId:P.id,from:e});if(_().x.isFail(t))return void l().Xu(x,{origin:h,from:e,invite_flow_id:w,is_success:!1});const o=null===(r=t.value.externalAuthentication)||void 0===r?void 0:r.parent_id;if(!o)return;l().Xu(x,{origin:h,from:e,invite_flow_id:w,is_success:!0}),n&&await Promise.race([a().callApi({eventName:"loadContacts",environment:x,data:{botId:o,spaceId:P.id,integrationId:S.id,importContactType:"google"}}),(0,c().Vs)(2e3)]),null==i||i()}finally{F(!1)}}({from:y,loadContacts:j}):N.length>0&&(null==i||i())},children:(0,f.jsxs)("div",{style:T.labelContainer,children:[e,(0,f.jsx)(d().e,{isConnecting:I,isIntegrationAuthenticated:N.length>0,hideChevronIcon:C})]})})}):null}}}]);