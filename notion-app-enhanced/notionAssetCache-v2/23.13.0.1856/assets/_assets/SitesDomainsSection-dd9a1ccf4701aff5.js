"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[40226],{477262:(e,t,i)=>{i.d(t,{h:()=>a});i(667294);var n=i(785893);const a=(0,i(827282).IU)("arrowSquarePath",{viewBox:"0 0 30 22",svg:(0,n.jsx)("path",{d:"M0.773438 8.39062C0.578125 8.19531 0.484375 7.96875 0.492188 7.71094C0.5 7.45312 0.605469 7.22656 0.808594 7.03125L4.75781 3.09375C5.14062 2.71875 5.53516 2.53125 5.94141 2.53125C6.35547 2.53125 6.75391 2.71875 7.13672 3.09375L11.0859 7.03125C11.2891 7.22656 11.3906 7.45312 11.3906 7.71094C11.3984 7.96875 11.3047 8.19531 11.1094 8.39062C10.9062 8.59375 10.6797 8.69141 10.4297 8.68359C10.1797 8.66797 9.95312 8.5625 9.75 8.36719L8.625 7.25391L6.87891 5.39062V18.1172C6.87891 18.7266 7.03516 19.1875 7.34766 19.5C7.66797 19.8047 8.12109 19.957 8.70703 19.957H18.2109C18.5469 19.957 18.8047 20.0391 18.9844 20.2031C19.1641 20.3672 19.2539 20.6016 19.2539 20.9062C19.2617 21.2031 19.1719 21.4336 18.9844 21.5977C18.8047 21.7617 18.5469 21.8438 18.2109 21.8438H8.67188C7.45312 21.8438 6.53516 21.5391 5.91797 20.9297C5.30078 20.3281 4.99219 19.4219 4.99219 18.2109V5.41406L3.25781 7.25391L2.13281 8.36719C1.9375 8.5625 1.71094 8.66797 1.45312 8.68359C1.20312 8.69141 0.976562 8.59375 0.773438 8.39062ZM10.7461 1.20703C10.7383 0.910156 10.8281 0.679688 11.0156 0.515625C11.2031 0.351562 11.4609 0.269531 11.7891 0.269531H21.3281C22.5547 0.269531 23.4727 0.574219 24.082 1.18359C24.6992 1.78516 25.0078 2.69141 25.0078 3.90234V16.6992L26.7422 14.8477L27.8672 13.7461C28.0703 13.5508 28.2969 13.4492 28.5469 13.4414C28.7969 13.4258 29.0234 13.5156 29.2266 13.7109C29.4219 13.9141 29.5156 14.1445 29.5078 14.4023C29.5 14.6523 29.3945 14.8789 29.1914 15.082L25.2539 19.0078C24.8711 19.3906 24.4727 19.582 24.0586 19.582C23.6445 19.582 23.2461 19.3906 22.8633 19.0078L18.9141 15.082C18.7109 14.8789 18.6055 14.6523 18.5977 14.4023C18.5977 14.1445 18.6953 13.9141 18.8906 13.7109C19.0938 13.5156 19.3203 13.4258 19.5703 13.4414C19.8203 13.4492 20.0469 13.5508 20.25 13.7461L21.375 14.8477L23.1211 16.7227V3.99609C23.1211 3.38672 22.9648 2.92969 22.6523 2.625C22.3398 2.3125 21.8906 2.15625 21.3047 2.15625H11.7891C11.4609 2.15625 11.207 2.07422 11.0273 1.91016C10.8477 1.74609 10.7539 1.51172 10.7461 1.20703Z"})})},554870:(e,t,i)=>{i.d(t,{m:()=>c});i(667294);var n=()=>i(219727),a=()=>i(142735),s=()=>i(846550),o=()=>i(67961),d=()=>i(151684),r=()=>i(663132),l=i(785893);function c(e){const{domain:t,style:i}=e,{device:c}=(0,n().O7)(),[u,m]=(0,a().VK)((()=>[t?r().Bk({domainName:t.getDomainName(),domainType:t.getDomainType()}):"",null==t?void 0:t.getDomainStatus()]),[t]),p=(0,s().yK)((e=>({container:{display:"flex",alignItems:"center",gap:6,maxWidth:c.isMobile?185:320},label:{color:"payment_required"===m?e.text.uiRedPrimary:void 0,flex:1},chevronIcon:{height:10,width:10,fill:"payment_required"===m?e.text.uiRedSecondary:e.icon.tertiary}})),[c,m]);return(0,l.jsxs)("div",{style:{...p.container,...i},children:[(0,l.jsx)(o().Z,{style:p.label,children:u}),(0,d().E)(p.chevronIcon)]})}},305365:(e,t,i)=>{i.d(t,{uk:()=>L,mn:()=>V,zQ:()=>N,BX:()=>H,ho:()=>R,Pz:()=>C,If:()=>D,s:()=>B,Bp:()=>K,Xe:()=>P,Wv:()=>Z,pE:()=>T,U3:()=>O,x0:()=>U,C3:()=>A,Jw:()=>S,Yj:()=>M,dM:()=>b,cw:()=>I,Br:()=>w,OL:()=>k});var n=()=>i(839002),a=()=>i(824462),s=()=>i(308186),o=()=>i(876822),d=()=>i(518019),r=()=>i(749826),l=()=>i(458335),c=()=>i(761869),u=()=>i(400925),m=()=>i(175332),p=()=>i(380501),f=()=>i(96818),h=()=>i(266184),g=()=>i(629719),x=()=>i(396992),y=()=>i(444297),j=()=>i(576387);async function v(e,t){const i=o().default.state.currentSpaceStore;if(!i)return;const n=await d().Z.awaitData(e,{spaceId:i.id},!0);if(!n)return;const a=n&&g().Lg(n);await j().eS({environment:e,context:{spaceId:i.id,planType:null==i?void 0:i.getPlanType(),isMmOrEnt:await(0,y().n)(e),from:"custom_hostname_delete"},oldData:t,newData:n,desiredState:a}),j().bi(e),x().Z.resetData(e,{spaceId:i.id})}async function b(e){const{environment:t,spaceId:i,domainId:n,domainName:s}=e,o=await a().callApi({eventName:"updatePublicDomainName",environment:t,data:{spaceId:i,domainId:n,domainName:s,isAutogenerated:!1}});return"success"!==o.type?{error:o}:(l().Z.getData(t,{spaceId:i},!0),{domainId:n})}async function C(e){const{environment:t,spaceId:i,domainName:n,domainType:s}=e,o="custom"===s?await d().Z.awaitData(t,{spaceId:i}):void 0,r=await a().callApi({eventName:"createPublicDomain",environment:t,data:{spaceId:i,domainName:n,domainType:s,isAutogenerated:!1,isDefault:!1}});return l().Z.getData(t,{spaceId:i},!0),"success"!==r.type?{error:r}:(o&&r.data.subscriptionWasUpdated&&v(t,o),{...r.data,error:void 0})}async function D(e){const{environment:t,spaceId:i,domainId:n,domainType:o,showErrorDialog:r}=e,c="custom"===o?await d().Z.awaitData(t,{spaceId:i}):void 0,u=await a().callApi({eventName:"deletePublicDomain",environment:t,data:{spaceId:i,domainId:n}});return l().Z.getData(t,{spaceId:i},!0),"success"!==u.type?(r&&s().x2(u),{error:u}):(c&&u.data.subscriptionWasUpdated&&v(t,c),{domainId:n})}async function S(e){const{environment:t,domainId:i,domainType:n}=e,r=o().default.state.currentSpaceStore;if(!r)return;const c="custom"===n?await d().Z.awaitData(t,{spaceId:r.id}):void 0,u=await a().callApi({eventName:"unpublishSitesAndDeletePublicDomain",environment:t,data:{spaceId:r.id,domainId:i}});if("success"!==u.type)return s().x2(u),{error:u};await h().mk(t,{spaceStore:r,currentUserId:t.currentUser.id}),l().Z.getData(t,{spaceId:r.id},!0),c&&u.data.subscriptionWasUpdated&&v(t,c)}async function w(e){const{environment:t,oldDomainId:i,oldDomainType:n,newDomainId:r}=e,c=o().default.state.currentSpaceStore;if(!c)return;const u="custom"===n?await d().Z.awaitData(t,{spaceId:c.id}):void 0,m=await a().callApi({eventName:"updateSitesAndDeletePublicDomain",environment:t,data:{spaceId:c.id,domainIdToBeDeleted:i,domainIdToBeUpdated:r}});if("success"!==m.type)return s().x2(m),{error:m};await h().mk(t,{spaceStore:c,currentUserId:t.currentUser.id}),l().Z.getData(t,{spaceId:c.id},!0),u&&m.data.subscriptionWasUpdated&&v(t,u)}async function I(e){const{environment:t,spaceId:i,domainId:n,publicHomePageId:o,showErrorDialog:d}=e,r=await a().callApi({eventName:"updatePublicDomainHomePage",environment:t,data:{spaceId:i,domainId:n,publicHomePage:o}});return"success"!==r.type?(d&&s().x2(r),{error:r}):{domainId:n}}async function _(e){const{environment:t,spaceId:i,domainId:n}=e,s=await a().callApi({eventName:"validateCustomPublicDomain",environment:t,data:{spaceId:i,domainId:n}});return"success"!==s.type?{error:s}:(s.data.domainId&&s.data.hasChanged&&l().Z.getData(t,{spaceId:i},!0),{domainId:n,domainStatus:s.data.domainStatus})}async function k(e){const{environment:t,domainId:i,spaceId:a,poll:s}=e,{retry_delay:o=500,max_retries:d=10}=r().default.getConfigKey("sites_settings","custom_hostname_validation")||{};let l,c=0;for(;!l||c<=d;){if(l=await _({environment:t,spaceId:a,domainId:i}),!s||"active"===l.domainStatus||l.error)return l;await n().Vs(o),c+=1}return l}async function B(e){const{environment:t,spaceId:i,domainId:n}=e,o=await a().callApi({eventName:"getSitesOnPublicDomain",environment:t,data:{spaceId:i,domainId:n}});if("success"===o.type)return{sitesCount:o.data.publishedSitesCount,sites:o.data.publishedSitesWithAccess};s().x2(o)}async function M(e){const{environment:t,spaceId:i,domainId:n}=e,o=await a().callApi({eventName:"updateCustomPublicDomainPayment",environment:t,data:{spaceId:i,domainId:n}});return"success"!==o.type?(s().x2(o),{error:o}):(l().Z.getData(t,{spaceId:i},!0),{...o.data,error:void 0})}function T(e){p().Z.setState({isOpen:!0,step:e})}function H(){p().Z.setState({isOpen:!1})}function Z(e,t,i){m().Z.setState({isOpen:!0,step:e,spaceId:t,domain:i})}function N(){m().Z.setState({isOpen:!1})}function P(e,t,i,n,a){u().Z.setState({isOpen:!0,step:e,spaceId:t,domain:i,publishedSitesCount:n,publishedSitesBlockIds:a})}function V(){u().Z.setState({isOpen:!1})}function O(e,t){f().default.setState({isOpen:!0,spaceId:e,domain:t,step:"DomainValidating"})}function A(e){const{isOpen:t,spaceId:i,domain:n}=f().default.state;t&&f().default.setState({isOpen:t,spaceId:i,domain:n,step:e})}function R(){f().default.setState({isOpen:!1})}function K(e,t){c().default.setState({isOpen:!0,spaceId:e,domain:t,step:"ConfirmPayment"})}function U(e){const{isOpen:t,spaceId:i,domain:n}=c().default.state;t&&c().default.setState({isOpen:t,spaceId:i,domain:n,step:e})}function L(){c().default.setState({isOpen:!1})}},636383:(e,t,i)=>{i.d(t,{BQ:()=>o,Iw:()=>r,kT:()=>s,ls:()=>d,sE:()=>a});var n=()=>i(594546);function a(e){(0,n().j)({environment:e,event:{eventName:"click_create_domain",eventProperties:{}}})}function s(e,t){(0,n().j)({environment:e,event:{eventName:"select_domain_type_to_create",eventProperties:t}})}function o(e,t){(0,n().j)({environment:e,event:{eventName:"verify_custom_domain",eventProperties:t}})}function d(e){(0,n().j)({environment:e,event:{eventName:"verify_custom_domain_early_exit",eventProperties:{}}})}function r(e,t){(0,n().j)({environment:e,event:{eventName:"click_validate_custom_domain",eventProperties:t}})}},129952:(e,t,i)=>{i.d(t,{Z:()=>j});i(241792);var n=i(667294),a=()=>i(219727),s=()=>i(846550);var o=()=>i(114079),d=()=>i(788860),r=()=>i(707513),l=()=>i(824462),c=()=>i(959137),u=()=>i(1910),m=()=>i(291198),p=()=>i(67961),f=()=>i(205228),h=()=>i(901447),g=()=>i(466970),x=()=>i(802600),y=i(785893);function j(e){const{spaceId:t,domainName:i,domainId:r}=e,c=(0,d().YB)(),u=function(e){const{spaceId:t,domainId:i,domainName:s}=e,o=(0,g().E)("sites_apex_domain_aware_validation_info"),d=(0,a().O7)(),[r,c]=(0,n.useState)(void 0);return(0,n.useEffect)((()=>{o&&l().callApi({eventName:"getCustomPublicDomainValidationInfo",environment:d,data:{spaceId:t,domainId:i}}).then((e=>{"failed"!==e.type&&c(e.data)}))}),[o,d,t,i]),o?r:{cnameRecordShortName:s.split(".")[0],cnameTarget:function(e){if("local"===e.env){const t=e.publicDomainName.indexOf(":");return`external.${-1===t?e.publicDomainName:e.publicDomainName.substring(0,t)}`}return`external.${e.publicDomainName}`}(f().default),txtRecordShortName:s?function(e){return`_notion-dcv.${e}`}(s.split(".")[0]):"",txtRecordValue:i,isApexDomain:!1,ipAddressList:[]}}({spaceId:t,domainName:i,domainId:r}),m=(0,s().yK)((e=>({placeholder:{minHeight:400},instructionList:{display:"flex",flexDirection:"column",gap:24},instructionRow:{display:"flex",flexDirection:"row"},instructionNumber:{background:e.sitesInstructionStep,borderRadius:"100%",height:16,width:16,minWidth:16,display:"flex",justifyContent:"center",alignItems:"center",fontSize:10,marginTop:2},instructionContainer:{display:"flex",flexDirection:"column",rowGap:12,marginLeft:10,marginRight:6,minWidth:0,width:"100%",maxWidth:"100%"}})),[]);return u?(0,y.jsxs)("div",{style:m.instructionList,children:[(0,y.jsxs)("div",{style:m.instructionRow,children:[(0,y.jsx)("div",{style:m.instructionNumber,children:(0,o().uf)(1,void 0,c)}),(0,y.jsx)("div",{style:m.instructionContainer,children:null!=u&&u.isApexDomain?(0,y.jsx)(b,{validationInfo:u}):(0,y.jsx)(v,{validationInfo:u})})]}),(0,y.jsxs)("div",{style:m.instructionRow,children:[(0,y.jsx)(p().Z,{style:m.instructionNumber,children:(0,o().uf)(2,void 0,c)}),(0,y.jsx)("div",{style:m.instructionContainer,children:(0,y.jsx)(C,{validationInfo:u})})]}),(0,y.jsxs)("div",{style:m.instructionRow,children:[(0,y.jsx)(p().Z,{style:m.instructionNumber,children:(0,o().uf)(3,void 0,c)}),(0,y.jsx)("div",{style:m.instructionContainer,children:(0,y.jsx)(p().Z,{isMultiline:!0,children:(0,y.jsx)(d()._H,{id:"sites.newCustomDomainDnsSettings.notifyVerifyLiveDelay",defaultMessage:"Click ‘Verify’ below to start the verification process"})})})]})]}):(0,y.jsx)("div",{style:m.placeholder})}function v(e){const{validationInfo:t}=e;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(p().Z,{isMultiline:!0,children:(0,y.jsx)(d()._H,{id:"sites.newCustomDomainDnsSettings.setCnameInstructions",defaultMessage:"Go to your DNS provider and add a CNAME record for the domain. Set the values as:"})}),(0,y.jsxs)("div",{children:[(0,y.jsx)(S,{}),(0,y.jsx)(D,{value:t.cnameRecordShortName})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)(w,{}),(0,y.jsx)(D,{value:null==t?void 0:t.cnameTarget})]})]})}function b(e){const{validationInfo:t}=e,i=(0,s().yK)((()=>({aRecordContainer:{display:"flex",flexDirection:"column",rowGap:12,width:"100%",maxWidth:"100%"},aRecordRow:{display:"flex",flexDirection:"row",columnGap:8},aRecordNameField:{flexBasis:"40%"},aRecordValueField:{flexBasis:"60%"}})),[]);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(p().Z,{isMultiline:!0,children:(0,y.jsx)(d()._H,{id:"sites.newCustomDomainDnsSettings.setARecordInstructions",defaultMessage:"Go to your DNS provider and add A records for the domain. Set the names and values as:"})}),(0,y.jsx)("div",{style:i.aRecordContainer,children:t.ipAddressList.map(((e,t)=>(0,y.jsx)("div",{children:(0,y.jsxs)("div",{style:i.aRecordRow,children:[(0,y.jsx)(D,{style:i.aRecordNameField,value:"@"}),(0,y.jsx)(D,{style:i.aRecordValueField,value:e})]})},t)))})]})}function C(e){const{validationInfo:t}=e;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(p().Z,{isMultiline:!0,children:(0,y.jsx)(d()._H,{id:"sites.newCustomDomainDnsSettings.setTxtValueInstructions",defaultMessage:"Also add a TXT record for the domain:"})}),(0,y.jsxs)("div",{children:[(0,y.jsx)(S,{}),(0,y.jsx)(D,{value:null==t?void 0:t.txtRecordShortName})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)(w,{}),(0,y.jsx)(D,{value:null==t?void 0:t.txtRecordValue})]})]})}function D(e){const{style:t,value:i}=e,o=(0,n.useRef)(null),d=(0,a().O7)(),l=(0,s().yK)((e=>({input:{flexGrow:1,fontFamily:"monospace",paddingLeft:8,color:e.mediumTextColor,...r().Yu},inputField:{...t,display:"flex",flexDirection:"row",alignItems:"center",border:`1px solid ${e.regularDividerColor}`,borderRadius:6,height:32,background:e.inputBackground,cursor:"text"}})),[t]);return(0,y.jsxs)("div",{style:l.inputField,children:[(0,y.jsx)(m().Z,{ref:o,style:l.input,value:i,format:m().B.Transparent,onClick:()=>{o.current&&(0,h().O)(d,o.current)},inputElementAttributes:{spellCheck:!1,readOnly:!0}}),(0,y.jsx)(I,{content:i})]})}function S(){const e=(0,s().yK)((()=>({inputLabel:{paddingBottom:8,fontWeight:r().Ue.semibold}})),[]);return(0,y.jsx)(p().Z,{isSmall:!0,style:e.inputLabel,children:(0,y.jsx)(d()._H,{id:"sites.newCustomDomainDnsSettings.setNameLabel",defaultMessage:"Name"})})}function w(){const e=(0,s().yK)((()=>({inputLabel:{paddingBottom:8,fontWeight:r().Ue.semibold}})),[]);return(0,y.jsx)(p().Z,{isSmall:!0,style:e.inputLabel,children:(0,y.jsx)(d()._H,{id:"sites.newCustomDomainDnsSettings.setValueLabel",defaultMessage:"Value"})})}function I(e){const{content:t}=e,i=(0,a().O7)(),n=(0,s().yK)((e=>({copyButtonContainer:{height:"100%",width:32,boxShadow:void 0,borderRadius:"0px 6px 6px 0px",borderLeft:`1px solid ${e.regularDividerColor}`},copyButton:{height:14,width:14}})),[]);return(0,y.jsx)(u().Z,{onClick:async()=>{if(t){const e=await c().F.clipboardActions.load();e.copyString({environment:i,stringValue:t,copiedMessage:e.clipboardMessages.copiedToClipboard})}},style:n.copyButtonContainer,ariaLabel:"copy",hasBackground:!0,icon:x().a,iconStyle:n.copyButton,showShadow:!0})}},122143:(e,t,i)=>{i.d(t,{Z:()=>h});var n=i(667294),a=()=>i(846550),s=()=>i(788860),o=()=>i(568017),d=()=>i(707513),r=()=>i(291198),l=()=>i(312578),c=()=>i(765513),u=()=>i(527278),m=()=>i(663132),p=i(785893);const f=(0,s().vU)({customDomainPlaceholder:{id:"sites.domainInput.placeholder.custom",defaultMessage:"www.yourdomain.com"},notionHostedDomainPlaceholder:{id:"sites.domainInput.placeholder.notionHosted",defaultMessage:"yourdomain"}});function h(e){const{domainName:t,domainType:i,setDomainName:s,isSubmitting:o,errorMessage:c}=e,h=(0,n.useRef)(null),[x,y]=(0,n.useState)(!1),[j,v]=(0,n.useState)(!1);(0,n.useEffect)((()=>{c&&y(!0)}),[c,y]);const b=(0,n.useCallback)((e=>{y(!1),s(e.target.value.toLowerCase())}),[s,y]),C=h.current?h.current.offsetWidth-4:4,D=(0,a().yK)((e=>({container:{flex:1,display:"flex",flexDirection:"column",fontSize:14,lineHeight:16,padding:2},inputAndConfigContainer:{position:"relative",alignItems:"center",background:e.inputBackground,borderRadius:4,boxShadow:x?`${e.stroke.uiRedSecondary} 0px 0px 0px 1px inset`:j?"0px 0px 0px 1px #2383E2 inset, 0px 0px 0px 2px rgba(35, 131, 226, 0.35)":`${e.regularDividerColor} 0px 0px 0px 1px inset`,height:34},inputContainer:{height:"100%",paddingLeft:4,background:"none",boxShadow:"none"},input:{paddingLeft:4,paddingRight:C,...d().Yu},configDomainNameContainer:{position:"absolute",float:"right",top:0,right:0,height:"100%",display:"flex",alignItems:"center",justifyContent:"flex-end",paddingLeft:2,paddingRight:2},configDomainName:{display:"flex",alignItems:"center",height:"100%",paddingTop:4,paddingBottom:4,paddingLeft:8,paddingRight:8,flexGrow:1,borderLeft:x?`1px solid ${e.stroke.uiRedSecondary}`:`1px solid ${e.regularDividerColor}`,...d().Yu},spinnerStyle:{position:"absolute",float:"right",top:0,right:8+C,height:"100%"}})),[x,C,j]);return(0,p.jsxs)("div",{style:D.container,children:[(0,p.jsxs)("div",{style:D.inputAndConfigContainer,children:[(0,p.jsx)(r().Z,{type:"text",style:D.inputContainer,inputStyle:D.input,value:t,disabled:o,placeholder:u().Z.formatMessage("custom"===i?f.customDomainPlaceholder:f.notionHostedDomainPlaceholder),onChange:b,format:r().B.Transparent,onFocus:()=>v(!0),onBlur:()=>v(!1)}),o&&(0,p.jsx)(l().Z,{style:D.spinnerStyle}),(0,p.jsx)("div",{ref:h,style:D.configDomainNameContainer,children:"default"===i&&(0,p.jsx)("div",{style:D.configDomainName,children:m().g2()})})]}),x&&c&&(0,p.jsx)(g,{showLearnMore:"custom"===i,errorMessage:c})]})}function g(e){const{errorMessage:t,showLearnMore:i}=e,n=(0,a().yK)((()=>({container:{fontSize:12,lineHeight:1.33,minHeight:20,width:"100%",color:o().ZP.red,padding:2,marginTop:6}})),[]);return(0,p.jsxs)("span",{style:n.container,children:[t," ",i?(0,p.jsx)(c().Z,{external:!0,href:"https://www.notion.so/help/connect-a-custom-domain-with-notion-sites#connect-a-custom-domain",children:(0,p.jsx)(s()._H,{defaultMessage:"Learn more",id:"sitesLaunchModal.learnMore"})}):null]})}},119317:(e,t,i)=>{i.r(t),i.d(t,{DomainsSection:()=>Qt});i(241792);var n=i(667294),a=()=>i(142735),s=()=>i(846550),o=()=>i(396136),d=()=>i(788860),r=()=>i(654133),l=()=>i(67961),c=()=>i(251932),u=()=>i(868614),m=()=>i(378907),p=()=>i(471654),f=()=>i(998901),h=()=>i(826955),g=()=>i(385337),x=()=>i(815277),y=()=>i(663132),j=()=>i(761869),v=()=>i(400925),b=()=>i(175332),C=()=>i(96818),D=()=>i(696459),S=()=>i(921981),w=()=>i(595976),I=()=>i(305365),_=()=>i(370329),k=()=>i(830581),B=()=>i(916095),M=i(785893);function T(){return(0,M.jsx)(B().gv.Provider,{value:I().BX,children:(0,M.jsx)(k().sR,{header:(0,M.jsx)(H,{}),footer:(0,M.jsx)(Z,{})})})}function H(){return(0,M.jsx)(k().vI,{iconAndTitle:(0,M.jsx)(k().kC,{iconGroup:_().h,iconColorName:"redPrimary",title:(0,M.jsx)(d()._H,{id:"sites.addPaymentMethod.title",defaultMessage:"Add a payment method"})}),description:(0,M.jsx)(d()._H,{id:"sites.addPaymentMethod.subtitle",defaultMessage:"Please go to the billing tab to add a payment method on your account"})})}function Z(){return(0,M.jsx)(k().a6,{layout:"vertical",primaryButtons:[{buttonType:"outline",label:(0,M.jsx)(d()._H,{id:"sites.addPaymentMethod.continue",defaultMessage:"Got it"}),onClick:()=>I().uk()}]})}var N=()=>i(219727),P=()=>i(159408),V=()=>i(666770),O=()=>i(212493),A=()=>i(765513),R=()=>i(148126),K=()=>i(38812),U=()=>i(306019),L=()=>i(984901);function E(e){const{spaceStore:t,billingData:i}=e,s=(0,N().O7)(),[o,d]=(0,n.useState)(!1),r=(0,a().VK)((()=>j().default.getState()),[]),{isOpen:l,domain:c}=r,{price:u,checkoutState:m,isTrial:p,subtotal:f,recurringSubtotal:h}=(0,U().Z)({spaceStore:t,billingData:i}),g=(0,D().$K)(i.paymentMethod);(0,n.useEffect)((()=>{g||I().x0("AddPaymentMethod")}),[g]);const x=(0,n.useCallback)((async()=>{if(!c)return;d(!0),I().x0("UpdatingPayment");const e=await I().Yj({environment:s,spaceId:t.id,domainId:c.id});if(d(!1),e.subscriptionWasUpdated&&"requires_action"===e.paymentIntentStatus){const t=await(0,K().getStripe)();if(!t)return;await t.handleNextAction({clientSecret:e.paymentIntentClientSecret??""})}I().uk()}),[s,t,c]);return l&&u&&m&&g?(0,M.jsx)(B().gv.Provider,{value:I().uk,children:(0,M.jsx)(k().sR,{header:(0,M.jsx)(F,{isTrial:p}),footer:(0,M.jsx)(q,{isTrial:p,isDisabled:!u||!f||o,onClick:x}),children:(0,M.jsx)(L().Z,{billingData:i,price:u,checkoutState:m,subtotal:f,recurringSubtotal:h})})}):null}function F(e){const{isTrial:t}=e;return t?(0,M.jsx)(k().vI,{iconAndTitle:(0,M.jsx)(k().kC,{iconGroup:P().t,title:(0,M.jsx)(d()._H,{id:"sites.sitesAddOnCheckout.trial.title",defaultMessage:"Upgrade to Plus and purchase add-on"})}),description:(0,M.jsx)(d()._H,{id:"sites.sitesAddOnCheckout.trial.subtitle",defaultMessage:"You’re currently on a trial of the Plus plan. Upgrade to the Plus plan immediately and add a custom domain to publish with."})}):(0,M.jsx)(k().vI,{iconAndTitle:(0,M.jsx)(k().kC,{iconGroup:V().M,title:(0,M.jsx)(d()._H,{id:"sites.sitesAddOnCheckout.title",defaultMessage:"Custom domain add-on"})}),description:(0,M.jsx)(d()._H,{id:"sites.sitesAddOnCheckout.subtitle",defaultMessage:"Notion charges a monthly fee to host your custom domain"})})}function q(e){const{isTrial:t,isDisabled:i,onClick:n}=e;return(0,M.jsx)(k().a6,{layout:"vertical",primaryButtons:[{buttonType:"primary",label:t?(0,M.jsx)(d()._H,{id:"sites.sitesAddOnCheckout.continue.trial",defaultMessage:"Upgrade to Plus and purchase add-on"}):(0,M.jsx)(d()._H,{id:"sites.sitesAddOnCheckout.continue",defaultMessage:"Purchase add-on"}),isDisabled:i,onClick:n}],caption:(0,M.jsx)(O().jX,{width:"hug",children:(0,M.jsx)(d()._H,{defaultMessage:'By clicking "Purchase add-on" you agree to the{br}<terms>Notion Terms and Conditions</terms>',id:"sites.sitesAddOnCheckout.caption",values:{br:(0,M.jsx)("br",{}),terms:e=>(0,M.jsx)(A().Z,{external:!0,href:(0,R().UY)("terms"),children:e})}})})})}var G=()=>i(312578),X=()=>i(661641);function W(){return(0,M.jsxs)(O().jX,{padding:20,gap:16,width:300,height:"hug",align:"center",children:[(0,M.jsx)(G().Z,{style:{height:36,width:36}}),(0,M.jsx)(X().q,{styleName:"Body-14px/Regular",colorName:"secondary",children:(0,M.jsx)(d()._H,{id:"sites.updatingPayment.message",defaultMessage:"Updating payment..."})})]})}function Y(e){const{spaceStore:t}=e,{isOpen:i,step:n}=(0,a().VK)((()=>j().default.getState()),[]),s=(0,w().p)({spaceId:t.id});return s&&i?(0,M.jsx)(S().c,{isOpen:!0,onDismiss:I().uk,areaConstraint:{width:{type:"fixed",length:"ConfirmPayment"===n?450:300}},render:()=>{switch(n){case"ConfirmPayment":return(0,M.jsx)(E,{spaceStore:t,billingData:s});case"UpdatingPayment":return(0,M.jsx)(W,{});case"AddPaymentMethod":return(0,M.jsx)(T,{});default:(0,D().t1)(n)}},animateSizeTransition:"ConfirmPayment"===n}):null}var $=()=>i(80327);function z(e){const{iconGroup:t,title:i,description:n,descriptionValues:a,confirmationButtonType:s,confirmationButton:o,onConfirm:d,showCancel:r,showDismissButton:l}=e;return(0,M.jsx)(B().gv.Provider,{value:I().mn,children:(0,M.jsx)(Q,{iconGroup:t,title:i,description:n,descriptionValues:a,confirmationButtonType:s,confirmationButton:o,onConfirm:d,showCancel:r,showDismissButton:l})})}function Q(e){const{iconGroup:t,title:i,description:n,descriptionValues:a,confirmationButtonType:s,confirmationButton:o,onConfirm:d,showCancel:r,showDismissButton:l}=e;return(0,M.jsx)("div",{children:(0,M.jsx)(k().sR,{header:(0,M.jsx)(J,{iconGroup:t,title:i,description:n,descriptionValues:a}),footer:(0,M.jsx)(ee,{confirmationButtonType:s,confirmationButton:o,onConfirm:d,showCancel:r}),showDismissButton:l})})}function J(e){const{iconGroup:t,title:i,description:n,descriptionValues:a}=e,o=(0,s().yK)((()=>({description:{width:"100%",overflow:"hidden",textOverflow:"ellipsis"}})),[]);return(0,M.jsx)(k().vI,{iconAndTitle:(0,M.jsx)(k().kC,{iconGroup:t,iconColorName:"uiRedPrimary",title:(0,M.jsx)(d()._H,{...i})}),description:(0,M.jsx)(d()._H,{...n,values:a}),descriptionStyle:o.description})}function ee(e){const{confirmationButtonType:t,confirmationButton:i,onConfirm:n,showCancel:a}=e;return(0,M.jsx)(k().a6,{layout:"vertical",primaryButtons:[{buttonType:t,label:(0,M.jsx)(d()._H,{...i}),onClick:n}],secondaryButtons:a?[{buttonType:"dismiss"}]:[]})}function te(){return(0,M.jsxs)(O().jX,{padding:20,gap:16,width:300,height:"hug",align:"center",children:[(0,M.jsx)(G().Z,{style:{height:36,width:36}}),(0,M.jsx)(X().q,{styleName:"Body-14px/Regular",colorName:"secondary",children:(0,M.jsx)(d()._H,{id:"sites.deletingDomain.message",defaultMessage:"Deleting domain..."})})]})}i(670560);var ie=()=>i(311988),ne=()=>i(707513),ae=()=>i(827973),se=()=>i(448419),oe=()=>i(198829),de=()=>i(255577),re=()=>i(603692),le=()=>i(92175),ce=()=>i(388284),ue=()=>i(352230),me=()=>i(733641),pe=()=>i(554870),fe=()=>i(876822),he=()=>i(128119);const ge=(0,d().vU)({title:{id:"sites.updateDomainBeforeDelete.title",defaultMessage:"Select new domain"},description:{id:"sites.updateDomainBeforeDelete.description",defaultMessage:"All pages under {domainName} will now be published under another domain"},updateDomainButton:{id:"sites.updateDomainBeforeDelete.buttonTitle",defaultMessage:"Publish"},goBackButton:{id:"sites.updateDomainBeforeDelete.goBackTitle",defaultMessage:"Go back"}});function xe(){const e=(0,a().VK)((()=>v().Z.getState()),[]);return e.isOpen?(0,M.jsx)(B().gv.Provider,{value:I().mn,children:(0,M.jsx)(ye,{state:e})}):null}function ye(e){const{state:t}=e,[i,a]=(0,n.useState)(t.domain);return(0,M.jsx)(k().sR,{header:(0,M.jsx)(be,{state:t}),footer:(0,M.jsx)(Ce,{state:t,newDomain:i}),showDismissButton:!0,children:(0,M.jsx)(je,{currentDomain:t.domain,newDomain:i,onChange:e=>{a(e)}})})}function je(e){const{currentDomain:t,newDomain:i,onChange:n}=e,o=(0,a().VK)((()=>t.getDomainStatus()),[t]),d=(0,s().yK)((e=>({valueButton:{paddingLeft:10,paddingRight:8,height:32,width:"100%",borderRadius:10,border:`1px solid ${e.stroke.primary}`,background:"payment_required"===o?e.tint.uiRed:"inherit",color:"payment_required"===o?e.text.uiRedPrimary:e.text.primary},valueButtonPressed:{background:"payment_required"===o?e.tint.uiRedPressed:"inherit"},icon:{marginRight:4}})),[o]);return(0,M.jsx)(se().ZP,{popupType:se().Z4.Popup,renderOrigin:e=>(0,M.jsxs)(le().Z,{...e,style:d.valueButton,hoveredStyle:d.valueButton,pressedStyle:{...d.valueButton,...d.valueButtonPressed},children:["payment_required"===o&&(0,M.jsx)("div",{style:d.icon,children:(0,M.jsx)(re().y,{iconGroup:ie().x,colorName:"redPrimary",variantName:"small"})}),(0,M.jsx)(pe().m,{domain:i??t,style:{width:"100%"}})]}),alignmentToOrigin:he().lU.Start,placementToOrigin:he().Iw.Bottom,render:e=>(0,M.jsx)(ve,{currentDomain:t,onChange:n,onClose:()=>{e.close()}}),style:{width:"100%"}})}function ve(e){const{currentDomain:t,onChange:i,onClose:n}=e,o=(0,a().VK)((()=>{const e=fe().default.state.currentSpaceStore;return y().Vg(e)}),[]),d=(0,s().yK)((e=>({icon:{height:14,width:14,fill:e.icon.secondary},checkIcon:{height:12,width:12,fill:e.icon.secondary},aliasIcon:{marginRight:10},titleText:ne().Yu,disabledText:{color:e.text.tertiary,...ne().Yu},disabledMessageContainer:{paddingTop:4,display:"flex",flexDirection:"column",gap:4,whiteSpace:"normal"}})),[]),r=[],l=o.map((e=>({key:e.id,action:()=>{i(e),n()},render:i=>{const n="active"!==e.getDomainStatus()||e.id===t.id,a=n?d.disabledText:d.titleText,s=n?{...d.checkIcon,...d.disabledText}:d.checkIcon;return(0,M.jsx)(ae().Z,{...i,disabled:n,title:y().Bk({domainName:e.getDomainName(),domainType:e.getDomainType()}),titleStyle:a,right:e.id===t.id||!t.id&&e.isDefault()?(0,me().k)(s):null})}})));return r.push({key:"domains",render:e=>(0,M.jsx)(ce().Z,{...e,topBorder:!0}),items:l}),(0,M.jsx)(oe().Z,{menuType:ue().o.Popup,width:360,children:(0,M.jsx)(de().Z,{type:de().i.Vertical,initialFocus:void 0,sections:r})})}function be(e){const{state:t}=e,{domain:i,publishedSitesCount:n}=t,s=(0,a().VK)((()=>{const e=fe().default.state.currentSpaceStore;return y().Co({spaceStore:e,domainId:i.id})}),[i]);return(0,M.jsx)(k().vI,{iconAndTitle:(0,M.jsx)(k().kC,{iconGroup:V().M,title:(0,M.jsx)(d()._H,{...ge.title,values:{domainName:s,publishedSitesCount:n}})}),description:(0,M.jsx)(d()._H,{...ge.description,values:{domainName:s}})})}function Ce(e){const{state:t,newDomain:i}=e,{spaceId:n,domain:a,publishedSitesCount:s,publishedSitesBlockIds:o}=t,r=(0,N().O7)();return(0,M.jsx)(k().a6,{layout:"vertical",primaryButtons:[{buttonType:"primary",label:(0,M.jsx)(d()._H,{...ge.updateDomainButton}),onClick:async()=>{I().Xe("Deleting",n,a,s,o||[]);const e=await I().Br({environment:r,oldDomainId:a.id,oldDomainType:a.domain_type,newDomainId:i.id});null!=e&&e.error?I().Xe("SelectDomainToUpdateSitesBeforeDelete",n,a,s,o||[]):I().mn()}}],secondaryButtons:[{buttonType:"secondary",label:(0,M.jsx)(d()._H,{...ge.goBackButton}),onClick:()=>{I().Xe("UnpublishOrUpdateDomainBeforeDelete",n,a,s,o||[])}}]})}var De=()=>i(886664),Se=()=>i(865479);const we=(0,d().vU)({title:{id:"sites.unpublishOrUpdateDomainBeforeDelete.title",defaultMessage:"{domainName} is currently being used to publish content on the web"},publishedSitesTitle:{id:"sites.unpublishOrUpdateDomainBeforeDelete.publishedSitesTitle",defaultMessage:"Your published sites"},updateDomainButton:{id:"sites.updateDomainForAllSites.buttonTitle",defaultMessage:"Publish to another domain"},unpublishSitesButton:{id:"sites.unpublishAllSites.buttonTitle",defaultMessage:"Unpublish all sites"}});function Ie(){const e=(0,a().VK)((()=>v().Z.getState()),[]);return e.isOpen?(0,M.jsx)(B().gv.Provider,{value:I().mn,children:(0,M.jsx)(_e,{state:e})}):null}function _e(e){const{state:t}=e;return(0,M.jsx)(k().sR,{header:(0,M.jsx)(ke,{state:t}),footer:(0,M.jsx)(Be,{state:t}),showDismissButton:!0,children:(0,M.jsx)(Me,{publishedSitesBlockIds:t.publishedSitesBlockIds,domain:t.domain})})}function ke(e){const{state:t}=e,{domain:i,publishedSitesCount:n}=t,s=(0,a().VK)((()=>{const e=fe().default.state.currentSpaceStore;return y().Co({spaceStore:e,domainId:i.id})}),[i]);return(0,M.jsx)(k().vI,{iconAndTitle:(0,M.jsx)(k().kC,{iconGroup:_().h,title:(0,M.jsx)(d()._H,{...we.title,values:{domainName:s,publishedSitesCount:n}})})})}function Be(e){const{state:t}=e,{spaceId:i,domain:n,publishedSitesCount:a,publishedSitesBlockIds:s}=t,o=(0,N().O7)();return(0,M.jsx)(k().a6,{layout:"vertical",primaryButtons:[{buttonType:"primary",label:(0,M.jsx)(d()._H,{...we.updateDomainButton}),onClick:()=>{I().Xe("SelectDomainToUpdateSitesBeforeDelete",i,n,a,s||[])}}],secondaryButtons:[{buttonType:"secondary",label:(0,M.jsx)(d()._H,{...we.unpublishSitesButton}),onClick:async()=>{I().Xe("Deleting",i,n,a,s||[]);const e=await I().Jw({environment:o,domainId:n.id,domainType:n.domain_type});null!=e&&e.error?I().Xe("UnpublishOrUpdateDomainBeforeDelete",i,n,a,s||[]):I().mn()}}]})}function Me(e){const{publishedSitesBlockIds:t,domain:i}=e,n=(0,a().VK)((()=>{const e=fe().default.state.currentSpaceStore;return e?t.map((t=>h().G.createChildStore(e,{table:o().iU,id:t}))):[]}),[t]),r=(0,a().VK)((()=>i.getPublicHomePage()),[i]),u=(0,s().yK)((e=>({container:{width:"100%",padding:20,paddingTop:16,borderRadius:10,background:e.surface.wash,fontSize:ne().JB.UISmall.desktop,maxHeight:310,overflow:"auto"},homeIcon:{color:e.icon.secondary,width:14,height:16}})),[]);return(0,M.jsxs)(c().Ht,{gap:10,style:u.container,children:[(0,M.jsx)(l().Z,{isSecondaryColor:!0,isSmall:!0,children:(0,M.jsx)(d()._H,{...we.publishedSitesTitle})}),n.map((e=>(0,M.jsxs)(c().gq,{alignItems:"center",children:[(0,M.jsx)(Se().Z,{store:e}),r===e.id&&(0,De().W)(u.homeIcon)]},e.id)))]})}const Te=(0,d().vU)({deleteConfirmationTitle:{id:"sites.deleteDomain.confirmationTitle",defaultMessage:"Delete domain?"},deleteConfirmationDescription:{id:"sites.deleteDomain.confirmationCaption",defaultMessage:"You will no longer be able to use {domainName} for publishing"},deleteConfirmationButton:{id:"sites.deleteDomain.deleteButton",defaultMessage:"Delete domain"},removeCustomDomainAddOnTitle:{id:"sites.removeCustomDomainAddOn.confirmationTitle",defaultMessage:"Custom domain add-on purchase"},removeCustomDomainAddOnDescription:{id:"sites.removeCustomDomainAddOn.confirmationCaption",defaultMessage:"Custom domain add-on has been purchased for your entire billing cycle, you will not be refunded for removing the domain"},removeCustomDomainAddOnConfirmationButton:{id:"sites.removeCustomDomainAddOn.confirmationButton",defaultMessage:"Got it, continue deleting domain"}});function He(){const e=(0,N().O7)(),t=(0,a().VK)((()=>{const e=v().Z.getState();if(e.isOpen)return e}),[]),i=(0,a().VK)((()=>null!=t&&t.domain?y().Bk({domainName:t.domain.getDomainName(),domainType:t.domain.getDomainType()}):void 0),[t]);if(!t)return null;const{step:n,spaceId:s,domain:o,publishedSitesCount:d,publishedSitesBlockIds:r}=t,l="UnpublishOrUpdateDomainBeforeDelete"===n||"SelectDomainToUpdateSitesBeforeDelete"===n?400:300;return(0,M.jsx)(S().c,{isOpen:!0,onDismiss:I().mn,areaConstraint:{width:{type:"fixed",length:l}},render:()=>{switch(n){case"ConfirmDelete":return(0,M.jsx)(z,{iconGroup:$().j,title:Te.deleteConfirmationTitle,description:Te.deleteConfirmationDescription,descriptionValues:{domainName:i},confirmationButtonType:"destructive",confirmationButton:Te.deleteConfirmationButton,onConfirm:async()=>{"custom"===o.domain_type?I().Xe("ConfirmCustomDomainAddOn",s,o,d,r):await Ze(e,s,o,d,r)},showCancel:!0,showDismissButton:!0});case"UnpublishOrUpdateDomainBeforeDelete":return(0,M.jsx)(Ie,{});case"SelectDomainToUpdateSitesBeforeDelete":return(0,M.jsx)(xe,{});case"Deleting":return(0,M.jsx)(te,{});case"ConfirmCustomDomainAddOn":return(0,M.jsx)(z,{iconGroup:_().h,title:Te.removeCustomDomainAddOnTitle,description:Te.removeCustomDomainAddOnDescription,descriptionValues:{domainName:i},confirmationButtonType:"outline",confirmationButton:Te.removeCustomDomainAddOnConfirmationButton,onConfirm:async()=>{await Ze(e,s,o,d,r)},showCancel:!1,showDismissButton:!1});default:(0,D().t1)(n)}}})}async function Ze(e,t,i,n,a){I().Xe("Deleting",t,i,n,a),await I().If({environment:e,spaceId:t,domainId:i.id,domainType:i.domain_type,showErrorDialog:!0}),I().mn()}var Ne=()=>i(1910),Pe=()=>i(164079),Ve=()=>i(913813),Oe=()=>i(454393);const Ae=(0,i(827282).IU)("creditCard",{viewBox:"0 0 20 20",svg:(0,M.jsx)("path",{d:"M5.16699 12.9072C4.96647 12.9072 4.80469 12.8457 4.68164 12.7227C4.55859 12.5996 4.49707 12.4424 4.49707 12.251V10.9863C4.49707 10.7904 4.55859 10.6331 4.68164 10.5146C4.80469 10.3916 4.96647 10.3301 5.16699 10.3301H6.8418C7.04232 10.3301 7.2041 10.3916 7.32715 10.5146C7.4502 10.6331 7.51172 10.7904 7.51172 10.9863V12.251C7.51172 12.4424 7.4502 12.5996 7.32715 12.7227C7.2041 12.8457 7.04232 12.9072 6.8418 12.9072H5.16699ZM2.68555 8.09473V6.49512H17.3213V8.09473H2.68555ZM4.15527 15.4844C3.41699 15.4844 2.85872 15.2975 2.48047 14.9238C2.10221 14.5501 1.91309 13.9987 1.91309 13.2695V5.87988C1.91309 5.14616 2.10221 4.59245 2.48047 4.21875C2.85872 3.84505 3.41699 3.6582 4.15527 3.6582H15.8447C16.583 3.6582 17.1413 3.84733 17.5195 4.22559C17.8978 4.59928 18.0869 5.15072 18.0869 5.87988V13.2695C18.0869 13.9987 17.8978 14.5501 17.5195 14.9238C17.1413 15.2975 16.583 15.4844 15.8447 15.4844H4.15527ZM4.2373 14.1445H15.7627C16.0771 14.1445 16.3187 14.0625 16.4873 13.8984C16.6605 13.7344 16.7471 13.486 16.7471 13.1533V5.99609C16.7471 5.66341 16.6605 5.41504 16.4873 5.25098C16.3187 5.08236 16.0771 4.99805 15.7627 4.99805H4.2373C3.91829 4.99805 3.67448 5.08236 3.50586 5.25098C3.3418 5.41504 3.25977 5.66341 3.25977 5.99609V13.1533C3.25977 13.486 3.3418 13.7344 3.50586 13.8984C3.67448 14.0625 3.91829 14.1445 4.2373 14.1445Z"})});var Re=()=>i(953293),Ke=()=>i(739479),Ue=()=>i(636383);function Le(e){const{spaceId:t,domain:i,parent:o}=e,d=(0,N().O7)(),r=(0,a().VK)((()=>{var e;return null===(e=fe().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),[l,c]=(0,n.useState)(void 0),{domainType:u,domainStatus:m,isDefault:p}=(0,a().VK)((()=>({domainType:i.getDomainType(),domainStatus:i.getDomainStatus(),isDefault:i.isDefault()})),[i]),f=(0,x().VX)({name:"sites_multiple_public_domains",spaceId:t,userId:r});(0,n.useEffect)((()=>{!async function(){if(i.isDefault())return;const e=await I().s({environment:d,spaceId:t,domainId:i.id});c(e)}()}),[d,t,i,c]);const h=(0,s().yK)((()=>({actionIcon:{width:14,height:14}})),[]),g=[];return p||f&&"default"===u?g.push({key:"edit",render:e=>(0,M.jsx)(Fe,{...e,iconStyle:h.actionIcon}),action:()=>{I().Wv("EditDomainName",t,i),o.close()}}):f&&"custom"===u&&("invalid"===m||"certificate_pending"===m||"notion_dcv_pending"===m?g.push({key:"validate",render:e=>(0,M.jsx)(Ge,{...e,iconStyle:h.actionIcon}),action:()=>{I().U3(t,i),(0,Ue().Iw)(d,{domain_id:i.id}),o.close()}}):"payment_required"===m&&g.push({key:"pay",render:e=>(0,M.jsx)(Xe,{...e,iconStyle:h.actionIcon}),action:()=>{I().Bp(t,i),o.close()}})),g.push({key:"delete",render:e=>(0,M.jsx)(qe,{...e,disabled:p,iconStyle:h.actionIcon}),action:()=>{I().Xe(l&&l.sitesCount>0?"UnpublishOrUpdateDomainBeforeDelete":"ConfirmDelete",t,i,null==l?void 0:l.sitesCount,(null==l?void 0:l.sites)||[]),o.close()}}),(0,M.jsxs)(M.Fragment,{children:[!p&&!f&&(0,M.jsx)(Ee,{}),(0,M.jsx)(oe().Z,{menuType:ue().o.Popup,minWidth:160,children:(0,M.jsx)(de().Z,{initialFocus:void 0,type:de().i.Vertical,sections:[{key:0,render:e=>(0,M.jsx)(ce().Z,{...e}),items:g}]})})]})}function Ee(){const[e,t]=(0,n.useState)(!1),i=(0,s().yK)((t=>({container:{width:210,padding:"9px 10px 6px 12px",borderBottom:`1px solid ${t.stroke.secondary}`},text:{fontWeight:400,color:t.text.primary},link:{backgroundColor:e?t.tint.regular:void 0}})),[e]),a=(0,n.useCallback)((()=>Oe().r$({currentTab:"plans"})),[]);return(0,M.jsx)("div",{style:i.container,children:(0,M.jsx)(X().q,{styleName:"UIRegular-14px/Regular",colorName:"primary",customStyles:i.text,children:(0,M.jsx)(d()._H,{id:"sites.domainActions.freeTierMessage",defaultMessage:"Multiple/custom domains are not available for free workspaces. <link>Upgrade plan</link>",values:{link:e=>(0,M.jsx)(A().Z,{disableHover:!0,onClick:a,onMouseEnter:()=>t(!0),onMouseLeave:()=>t(!1),style:i.link,children:e})}})})})}const Fe=n.forwardRef(((e,t)=>{const{iconStyle:i}=e;return(0,M.jsx)(ae().Z,{...e,ref:t,icon:(0,Re().R)(i),title:(0,M.jsx)(d()._H,{id:"sites.domainActions.edit",defaultMessage:"Update"})})}));Fe.displayName="EditAction";const qe=n.forwardRef(((e,t)=>{const{iconStyle:i,disabled:n}=e,a=(0,s().yK)((e=>({disabledContainer:{color:e.text.quaternary},disabledIcon:{color:e.icon.quaternary,...i}})),[i]);return n?(0,M.jsx)(r().Z,{renderTooltip:()=>(0,M.jsx)(d()._H,{id:"sites.domainActions.deleteDefaultDomain",defaultMessage:"Default domain of the workspace cannot be deleted"}),placement:f().Placement.Bottom,render:i=>(0,M.jsx)(ae().Z,{...(0,Pe().Z)(i,e),style:a.disabledContainer,ref:t,icon:(0,Ke().y)(a.disabledIcon),title:(0,M.jsx)(d()._H,{id:"sites.domainActions.delete",defaultMessage:"Delete"})})}):(0,M.jsx)(ae().Z,{...e,ref:t,icon:(0,Ke().y)(i),title:(0,M.jsx)(d()._H,{id:"sites.domainActions.delete",defaultMessage:"Delete"})})}));qe.displayName="DeleteAction";const Ge=n.forwardRef(((e,t)=>{const{iconStyle:n}=e;return(0,M.jsx)(ae().Z,{...e,ref:t,icon:(0,i(477262).h)(n),title:(0,M.jsx)(d()._H,{id:"sites.domainActions.validate",defaultMessage:"Validate"})})}));Ge.displayName="ValidateAction";const Xe=n.forwardRef(((e,t)=>{const{iconStyle:i}=e;return(0,M.jsx)(ae().Z,{...e,ref:t,icon:Ae(i),title:(0,M.jsx)(d()._H,{id:"sites.domainActions.pay",defaultMessage:"Update payment"})})}));function We(e){const{spaceId:t,domain:i,disabled:n}=e,a=(0,s().yK)((()=>({editButtonIcon:{width:18,height:18}})),[]);return(0,M.jsx)(se().ZP,{alignmentToOrigin:f().Alignment.End,renderOrigin:e=>(0,M.jsx)(r().Z,{disableTooltip:!n,renderTooltip:()=>(0,M.jsx)(d()._H,{id:"sites.editDomain.noEditAccess",defaultMessage:"Only workspace owners can update the domain"}),placement:f().Placement.Bottom,render:t=>(0,M.jsx)(Ne().Z,{...(0,Pe().Z)(t,e),ariaLabel:"Update domain",icon:Ve().O,iconStyle:a.editButtonIcon,disabled:n})}),popupType:se().Z4.Popup,render:e=>(0,M.jsx)(Le,{spaceId:t,domain:i,parent:e})})}Xe.displayName="PaymentAction";var Ye=()=>i(666e3),$e=()=>i(141455);function ze(e,t,i){return"invalid"===e||"payment_required"===e?t.accentColors.red[i]:"active"===e?t.accentColors.green[i]:"certificate_pending"===e||"notion_dcv_pending"===e?t.accentColors.yellow[i]:void(0,D().t1)(e)}function Qe(e){const{domainStatus:t,featureAvailability:i}=e;return"invalid"===t?(0,M.jsx)(d()._H,{id:"sites.domains.domainStatusInvalid",defaultMessage:"Invalid"}):"payment_required"===t?i?(0,$e().V5)(i,{available:()=>(0,M.jsx)(d()._H,{id:"sites.domains.domainStatusPaymentRequired",defaultMessage:"Payment required"}),unavailable:()=>(0,M.jsx)(d()._H,{id:"sites.domains.domainStatusPaymentRequired.freeTier",defaultMessage:"Unavailable"})}):null:"active"===t?(0,M.jsx)(d()._H,{id:"sites.domains.domainStatusLive",defaultMessage:"Live"}):"certificate_pending"===t||"notion_dcv_pending"===t?(0,M.jsx)(d()._H,{id:"sites.domains.domainStatusPending",defaultMessage:"Pending"}):void(0,D().t1)(t)}function Je(e){const{domainStatus:t,featureAvailability:i}=e,n=(0,s().yK)((e=>({container:{display:"flex",alignItems:"center",gap:4,width:"fit-content",paddingLeft:8,paddingRight:8,borderRadius:10,backgroundColor:ze(t,e,100)},dot:{borderRadius:99,height:8,width:8,backgroundColor:ze(t,e,500)}})),[t]);return(0,M.jsxs)("div",{style:n.container,children:[(0,M.jsx)("div",{style:n.dot}),(0,M.jsx)(Qe,{domainStatus:t,featureAvailability:i})]})}var et=()=>i(766072),tt=()=>i(443269),it=()=>i(122143);function nt(){const e=(0,a().VK)((()=>{const e=b().Z.getState();if(e.isOpen)return e}),[]);if(!e)return null;const{spaceId:t,domain:i}=e;return(0,M.jsx)(at,{spaceId:t,domain:i})}function at(e){const{spaceId:t,domain:i}=e,s=(0,N().O7)(),o=(0,d().YB)(),r=(0,a().VK)((()=>i.getDomainName()),[i]),[l,c]=(0,n.useState)(r),[u,m]=(0,n.useState)(void 0),p=l!==r,f=(0,n.useCallback)((async()=>{if(l&&p){const{error:e}=await I().dM({environment:s,spaceId:t,domainId:i.id,domainName:l});if(e)return void m((0,tt().wf)(o,e));I().Wv("EditDomainNameSuccess",t,i)}}),[s,o,t,i,l,p]);return(0,M.jsx)(B().gv.Provider,{value:I().zQ,children:(0,M.jsx)(k().sR,{header:(0,M.jsx)(st,{}),footer:(0,M.jsx)(ot,{isDisabled:!p,onClick:f}),children:(0,M.jsx)(it().Z,{domainName:l,setDomainName:c,domainType:"default",errorMessage:u})})})}function st(){return(0,M.jsx)(k().vI,{iconAndTitle:(0,M.jsx)(k().kC,{iconGroup:et().X,title:(0,M.jsx)(d()._H,{id:"sites.editDomain.title",defaultMessage:"Update existing domain"})}),description:(0,M.jsx)("div",{style:{paddingLeft:20,paddingRight:20},children:(0,M.jsx)(d()._H,{id:"sites.editDomain.subtitle",defaultMessage:"This change will apply to all the sites live on this domain"})})})}function ot(e){const{isDisabled:t,onClick:i}=e;return(0,M.jsx)(k().a6,{layout:"vertical",primaryButtons:[{buttonType:"primary",label:(0,M.jsx)(d()._H,{id:"sites.editDomain.save",defaultMessage:"Save changes"}),isDisabled:t,onClick:i}],secondaryButtons:[{buttonType:"dismiss"}]})}var dt=()=>i(364052);function rt(){return(0,M.jsx)(B().gv.Provider,{value:I().zQ,children:(0,M.jsx)(k().sR,{header:(0,M.jsx)(lt,{}),footer:(0,M.jsx)(ct,{}),showDismissButton:!1})})}function lt(){return(0,M.jsx)(k().vI,{iconAndTitle:(0,M.jsx)(k().kC,{iconGroup:dt().F,title:(0,M.jsx)(d()._H,{id:"sites.editDomainSuccess.title",defaultMessage:"Successfully updated domain"})}),description:(0,M.jsx)(d()._H,{id:"sites.editDomainSuccess.subtitle",defaultMessage:"All sites published to this domain now use the new domain"})})}function ct(){return(0,M.jsx)(k().a6,{layout:"vertical",primaryButtons:[{buttonType:"outline",label:(0,M.jsx)(d()._H,{id:"sites.newDefaultDomainSuccess.close",defaultMessage:"Done"}),isDisabled:!1,onClick:I().zQ}]})}function ut(){const e=(0,a().VK)((()=>{const e=b().Z.getState();if(e.isOpen)return e}),[]);if(!e)return null;const{step:t}=e,i="EditDomainNameSuccess"===t;return(0,M.jsx)(S().c,{isOpen:!0,onDismiss:I().zQ,areaConstraint:{width:{type:"fixed",length:i?300:450}},render:()=>i?(0,M.jsx)(rt,{}):(0,M.jsx)(nt,{}),animateSizeTransition:!i})}var mt=()=>i(513670),pt=()=>i(518530),ft=(i(267602),i(30005),()=>i(801812)),ht=()=>i(291198),gt=()=>i(967092),xt=()=>i(231219),yt=()=>i(718959),jt=()=>i(270820),vt=()=>i(772084),bt=()=>i(104088),Ct=()=>i(266184);const Dt=3;function St(e){const{domain:t,initialFocus:i,disabled:a,onSiteSelection:o,onResetInput:d}=e,[r,l]=(0,n.useState)(""),[c,u]=(0,n.useState)(!1),m=(0,s().yK)((()=>({resultsPopup:{width:250}})),[]),p=(0,n.useCallback)((e=>{o(e),u(!1)}),[o,u]),h=(0,n.useCallback)((()=>{u(!1)}),[u]),g=(0,n.useCallback)((()=>{c||d()}),[c,d]);return(0,M.jsx)(gt().ZP,{alignmentToOrigin:f().Alignment.Start,origin:(0,M.jsx)(wt,{initialFocus:i,disabled:a,query:r,setQuery:l,setShowResults:u,onBlurInput:g}),originGap:3,open:c,popupType:bt().k.Popup,style:m.resultsPopup,render:()=>(0,M.jsx)(It,{query:r,onSelection:p,domain:t}),onDismiss:h})}function wt(e){const{initialFocus:t,disabled:i,query:a,setQuery:o,setShowResults:l,onBlurInput:c}=e,u=(0,d().YB)(),m=(0,s().yK)((e=>({input:{display:"flex",flex:1,paddingLeft:4},icon:{fill:e.mediumIconColor,width:12,height:12}})),[]),p=(0,n.useCallback)((e=>{o(e.target.value),l(!0)}),[o,l]),h=(0,n.useCallback)((()=>{l(!0)}),[l]),g=(0,n.useCallback)((e=>{"Escape"===e.key&&l(!1)}),[l]);return(0,M.jsx)(r().Z,{disableTooltip:!i,renderTooltip:()=>(0,M.jsx)(d()._H,{id:"sites.siteSearchInput.noEditAccess",defaultMessage:"Only workspace owners can set up a homepage for a domain"}),placement:f().Placement.Bottom,render:e=>(0,M.jsx)("div",{...e,children:(0,M.jsx)(ht().Z,{type:"text",focusInitial:t,disabled:i,onChange:p,onFocus:h,onBlur:c,onKeyDown:g,format:ht().B.Transparent,style:m.input,value:a,left:(0,jt().R)(m.icon),placeholder:u.formatMessage({id:"sites.siteSearchInput.placeholder",defaultMessage:"Select a page"})})})})}function It(e){const{query:t,onSelection:i,domain:n}=e,r=(0,N().O7)(),c=(0,s().yK)((()=>({loadingSpinner:{textAlign:"center",visibility:"visible",display:"inline",marginLeft:8}})),[]),[{value:u,status:m}]=(0,ft().r5)((()=>Ct().a2(t,r)),[t,r]),p=(0,a().VK)((()=>{const e=(0,yt().RM)();if(!e)return[];if("idle"===m||"pending"===m)return[{key:"results-loading-spinner",render:()=>(0,M.jsx)(G().Z,{style:c.loadingSpinner}),action:()=>{}}];if(!e||(!u||0===u.length)&&t.length>0)return[{key:"empty-results",render:()=>(0,M.jsx)(l().Z,{isSmall:!0,style:{paddingLeft:8,paddingTop:4,paddingBottom:4},children:(0,M.jsx)(d()._H,{id:"sites.publicHomePageSearch.noResults",defaultMessage:"No sites found"})}),action:()=>{}}];const a=[];return null==u||u.forEach((t=>{const s=h().G.createChildStore(e,{table:o().iU,id:t.id}),d=vt().UM(s);(d&&d===n.id||!d&&n.is_default)&&a.push({key:t.id,render:e=>(0,M.jsx)(xt().Z,{store:s,...e}),action:()=>{i(t.id)}})})),0===a.length?[_t(n)]:""===t?a.splice(0,Dt):a}),[u,i,n,c,m,t]);return(0,M.jsx)(de().Z,{type:de().i.Vertical,sections:[{key:"sites-search-results",render:e=>(0,M.jsx)(ce().Z,{...e}),items:p}],initialFocus:void 0})}function _t(e){const t=y().Bk({domainName:e.getDomainName()||"",domainType:e.getDomainType()});return{key:"empty-suggestions",render:()=>(0,M.jsx)(l().Z,{isSmall:!0,isMultiline:!0,style:{paddingLeft:8,paddingTop:4,paddingBottom:4},children:(0,M.jsx)(d()._H,{id:"sites.publicHomePageSearch.noResultsForDomain",defaultMessage:"Publish a page with {domainName} to set a homepage",values:{domainName:t}})}),action:()=>{}}}function kt(e){const{spaceId:t,domain:i,publicHomePageStore:o,disabled:d}=e,r=(0,N().O7)(),[l,c]=(0,n.useState)(!1),[u,m]=(0,n.useState)(!1),p=(0,a().VK)((()=>{var e;return null===fe().default||void 0===fe().default||null===(e=fe().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),f=(0,x().oo)({name:"sites_multiple_public_domains",spaceId:t,userId:p}),h=null==f?void 0:f.upsell,y=(0,s().yK)((()=>({record:{paddingRight:12},previewContainer:{display:"flex",paddingRight:12},upsellButton:{width:"fit-content"}})),[]),j=(0,n.useCallback)((async e=>{e.stopPropagation(),await I().cw({environment:r,spaceId:t,domainId:i.id,publicHomePageId:void 0,showErrorDialog:!0})}),[r,t,i]),v=(0,n.useCallback)((async e=>{e&&await I().cw({environment:r,spaceId:t,domainId:i.id,publicHomePageId:e,showErrorDialog:!0}),c(!1)}),[r,t,i,c]);return h&&"product"===h.type?(0,M.jsx)(g().R,{upsell:h,analyticsName:"public_domain_home_page",desktopStyle:y.upsellButton}):d?o?(0,M.jsx)(Se().Z,{store:o,style:y.record}):(0,M.jsx)(St,{domain:i,initialFocus:!1,disabled:!0,onSiteSelection:mt().ZT,onResetInput:mt().ZT}):o&&!l?(0,M.jsxs)("div",{style:y.previewContainer,onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:[(0,M.jsx)(Se().Z,{store:o}),u&&(0,M.jsx)(Bt,{onUpdateClick:()=>c(!0),onClearClick:j})]}):(0,M.jsx)(St,{initialFocus:l,onResetInput:()=>c(!1),disabled:!1,onSiteSelection:v,domain:i})}function Bt(e){const{onUpdateClick:t,onClearClick:i}=e,n=(0,s().yK)((()=>({actionIcon:{marginLeft:4}})),[]);return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(r().Z,{renderTooltip:()=>(0,M.jsx)(d()._H,{id:"sites.publicHomePage.update",defaultMessage:"Update the homepage for the domain"}),placement:f().Placement.Bottom,render:e=>(0,M.jsx)(Ne().Z,{...e,icon:Re().R,ariaLabel:"Update home page",onClick:t,style:n.actionIcon})}),(0,M.jsx)(r().Z,{renderTooltip:()=>(0,M.jsx)(d()._H,{id:"sites.publicHomePage.clear",defaultMessage:"Clear the homepage for the domain"}),placement:f().Placement.Bottom,render:e=>(0,M.jsx)(Ne().Z,{...e,icon:pt().U,ariaLabel:"Clear home page",onClick:i,style:n.actionIcon})})]})}i(653476);var Mt=()=>i(987655),Tt=()=>i(906651),Ht=()=>i(677559);const Zt=new(Ht().Ss)("NewDomainModal",(async()=>await i.e(59002).then(i.bind(i,519039)))),Nt=(0,Ht().kF)(Zt,(e=>e.NewDomainModal));var Pt=()=>i(282900),Vt=()=>i(380501);function Ot(e){const{spaceStore:t}=e,i=(0,N().O7)(),n=(0,a().VK)((()=>t.userId),[t]),o=(0,a().VK)((()=>Vt().Z.getState().isOpen),[]),l=(0,a().VK)((()=>t.canAdmin()),[t]),c=(0,x().VX)({name:"sites_multiple_public_domains",spaceId:t.id,userId:n}),{defaultDomainsCount:u,customDomainsCount:m}=(0,a().VK)((()=>{const e=y().DY(t);return{defaultDomainsCount:e.filter((e=>"default"===e.domain_type)).length,customDomainsCount:e.filter((e=>"custom"===e.domain_type)).length}}),[t]),p=(0,Pt().S)(t),h=u>=p&&m>=Mt().j_,g=!l||!c||h,j=(0,s().yK)((()=>({newDomainButton:{paddingTop:5,paddingBottom:5,paddingLeft:12,paddingRight:12}})),[]),v=l?c?(0,M.jsx)(d()._H,{id:"sites.createDomain.maxDomainsCreated",defaultMessage:"Only {maximumDomains} domains allowed for this workspace",values:{maximumDomains:p+Mt().j_}}):(0,M.jsx)(d()._H,{id:"sites.createDomain.freeTier",defaultMessage:"Upgrade your plan to create more domains for your workspace"}):(0,M.jsx)(d()._H,{id:"sites.createDomain.noCreateAccess",defaultMessage:"Only workspace owners can create a domain"});return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(r().Z,{disableTooltip:!g,renderTooltip:()=>v,placement:f().Placement.Bottom,render:e=>(0,M.jsx)(Tt().Z,{...e,onClick:()=>{I().pE("SelectDomainType"),(0,Ue().sE)(i)},disabled:g,style:j.newDomainButton,children:(0,M.jsx)(d()._H,{id:"sites.createDomain.new",defaultMessage:"New domain"})})}),o&&(0,M.jsx)(Nt,{spaceStore:t})]})}var At=()=>i(730120),Rt=()=>i(129952);function Kt(){const e=(0,a().VK)((()=>C().default.getState()),[]),{isOpen:t,spaceId:i,domain:n}=e;return t?(0,M.jsx)(Ut,{spaceId:i,domain:n}):null}function Ut(e){const{spaceId:t,domain:i}=e,s=(0,N().O7)(),{domainId:o,domainName:d}=(0,a().VK)((()=>({domainId:i.id,domainName:i.getDomainName()})),[i]),[r,l]=(0,n.useState)(!1);(0,n.useEffect)((()=>{if(o&&r){const e=At().ou.now();I().OL({environment:s,domainId:o,spaceId:t,poll:!0}).then((t=>{t.error?l(!0):"active"===t.domainStatus?(I().C3("DomainValidatedSuccess"),(0,Ue().BQ)(s,{type:"sync",duration_in_milliseconds:-e.diffNow().toMillis()})):(I().C3("DomainPendingSuccess"),(0,Ue().BQ)(s,{type:"async",duration_in_milliseconds:-e.diffNow().toMillis()}))}))}}),[s,t,o,r]);const c=(0,n.useCallback)((()=>{o&&l(!0)}),[o,l]),u=(0,n.useCallback)((()=>{r&&(0,Ue().ls)(s),I().ho()}),[s,r]);return(0,M.jsx)(B().gv.Provider,{value:u,children:(0,M.jsx)(k().sR,{header:(0,M.jsx)(Lt,{}),footer:(0,M.jsx)(Et,{onClick:c,validationInProgress:r}),children:(0,M.jsx)(Rt().Z,{spaceId:t,domainId:o,domainName:d})})})}function Lt(){return(0,M.jsx)(k().vI,{iconAndTitle:(0,M.jsx)(k().kC,{iconGroup:V().M,title:(0,M.jsx)(d()._H,{id:"sites.newCustomDomain.title",defaultMessage:"Connect new domain"})}),description:(0,M.jsx)(d()._H,{id:"sites.newCustomDomainDnsSettings.subtitle",defaultMessage:"You can also find these instructions in our <helpCenterLink>help center</helpCenterLink>",values:{helpCenterLink:e=>(0,M.jsx)(A().Z,{external:!0,href:"https://www.notion.so/help/connect-a-custom-domain-with-notion-sites",children:e})}})})}function Et(e){const{onClick:t,validationInProgress:i}=e;return(0,M.jsx)(k().a6,{layout:"vertical",primaryButtons:[{buttonType:"primary",label:i?(0,M.jsx)(d()._H,{id:"sites.validateCustomDomain.verifying",defaultMessage:"Verifying..."}):(0,M.jsx)(d()._H,{id:"sites.validateCustomDomain.verify",defaultMessage:"Verify"}),isDisabled:i,onClick:t}]})}function Ft(){return(0,M.jsx)(B().gv.Provider,{value:I().ho,children:(0,M.jsx)(k().sR,{header:(0,M.jsx)(qt,{}),footer:(0,M.jsx)(Gt,{}),showDismissButton:!1})})}function qt(){const e=(0,s().yK)((()=>({description:{width:"100%"}})),[]);return(0,M.jsx)(k().vI,{iconAndTitle:(0,M.jsx)(k().kC,{iconGroup:dt().F,title:(0,M.jsx)(d()._H,{id:"sites.customHostnameValdation.title",defaultMessage:"It's taking a while to verify"})}),description:(0,M.jsx)(d()._H,{id:"sites.customHostnameValdation.subtitle",defaultMessage:"Please check in ~10 mins to see if the domain is ready for publishing"}),descriptionStyle:e.description})}function Gt(){return(0,M.jsx)(k().a6,{layout:"vertical",primaryButtons:[{buttonType:"outline",label:(0,M.jsx)(d()._H,{id:"sites.newCustomDomainSuccess.close",defaultMessage:"Done"}),isDisabled:!1,onClick:I().ho}]})}function Xt(){return(0,M.jsx)(B().gv.Provider,{value:I().ho,children:(0,M.jsx)(k().sR,{header:(0,M.jsx)(Wt,{}),footer:(0,M.jsx)(Yt,{}),showDismissButton:!1})})}function Wt(){const e=(0,a().VK)((()=>{const{domain:e}=C().default.state;return null==e?void 0:e.getDomainName()}),[]),t=(0,s().yK)((()=>({description:{width:"100%"}})),[]);return(0,M.jsx)(k().vI,{iconAndTitle:(0,M.jsx)(k().kC,{iconGroup:dt().F,title:(0,M.jsx)(d()._H,{id:"sites.newCustomDomainValidatedSuccess.title",defaultMessage:"Successfully verified"})}),description:e?(0,M.jsx)(d()._H,{id:"sites.success.subtitle",defaultMessage:"You can now use {domainName} to publish sites",values:{domainName:y().Bk({domainName:e,domainType:"custom"})}}):(0,M.jsx)(d()._H,{id:"sites.success.subtitle.subtitleWithoutDomainName",defaultMessage:"You can now use the domain to publish sites"}),descriptionStyle:t.description})}function Yt(){return(0,M.jsx)(k().a6,{layout:"vertical",primaryButtons:[{buttonType:"outline",label:(0,M.jsx)(d()._H,{id:"sites.newCustomDomainSuccess.close",defaultMessage:"Done"}),isDisabled:!1,onClick:I().ho}]})}function $t(){const e=(0,a().VK)((()=>C().default.getState()),[]);if(!e.isOpen)return null;const{step:t}=e,i="DomainValidating"!==t;return(0,M.jsx)(S().c,{isOpen:!0,onDismiss:I().ho,areaConstraint:{width:{type:"fixed",length:i?300:450}},render:()=>"DomainValidating"===t?(0,M.jsx)(Kt,{}):"DomainPendingSuccess"===t?(0,M.jsx)(Ft,{}):"DomainValidatedSuccess"===t?(0,M.jsx)(Xt,{}):void(0,D().t1)(t),animateSizeTransition:!i})}const zt=[{key:"name",header:(0,M.jsx)(d()._H,{id:"sites.domains.domainColumnHeader",defaultMessage:"Domain"}),style:{width:"41%"}},{key:"home-page",header:(0,M.jsx)(d()._H,{id:"sites.domains.homePageColumnHeader",defaultMessage:"Homepage"}),style:{width:"35%",padding:"3px 5px"}},{key:"status",header:(0,M.jsx)(d()._H,{id:"sites.domains.statusColumnHeader",defaultMessage:"Status"}),style:{width:"20%"}},{key:"edit",header:(0,M.jsx)(M.Fragment,{}),style:{width:"4%"}}];function Qt(e){const{spaceStore:t}=e,i=(0,a().VK)((()=>t.userId),[t]),n=(0,x().oo)({name:"sites_multiple_public_domains",spaceId:t.id,userId:i}),D=null==n?void 0:n.upsell,S=(0,s().yK)((()=>({header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12,gap:8,overflow:"hidden"},title:{display:"flex",flexDirection:"column",flex:"1 1",overflow:"hidden"},tableBox:{tableLayout:"fixed"},cell:{paddingRight:12,height:44}})),[]),w=function(e){const t=(0,a().VK)((()=>y().Vg(e)),[e]),i=(0,s().yK)((e=>({domainNameContainer:{display:"flex",alignItems:"center",gap:4},defaultDomainIcon:{height:12,width:12,color:e.lightIconColor}})),[]),n=(0,a().VK)((()=>e.userId),[e]),l=(0,x().oo)({name:"sites_multiple_public_domains",spaceId:e.id,userId:n}),c=(0,a().VK)((()=>{const n=e.canAdmin();return t.map((t=>{const a=t.id,s=t.getDomainName(),c=t.getDomainStatus(),u=t.isDefault(),m=t.getPublicHomePage(),g=m?h().G.createChildStore(e,{table:o().iU,id:m}):void 0;return{key:s,columns:[(0,M.jsxs)("div",{style:i.domainNameContainer,children:[(0,M.jsx)(Ye().Z,{spaceStore:e,domainId:t.id}),u?(0,M.jsx)(r().Z,{renderTooltip:()=>(0,M.jsx)(d()._H,{id:"sites.domains.defaultDomainTooltip",defaultMessage:"Default domain"}),render:e=>(0,M.jsx)("div",{...e,children:(0,p().z)(i.defaultDomainIcon)}),placement:f().Placement.Bottom}):null]},`${a}`),(0,M.jsx)(kt,{spaceId:e.id,domain:t,publicHomePageStore:g,disabled:!n},`${a}-home-page`),(0,M.jsx)(Je,{featureAvailability:l,domainStatus:c},`${a}-status`),(0,M.jsx)(We,{spaceId:e.id,domain:t,disabled:!n},`${a}-actions`)]}}))}),[e,t,i,l]);return c}(t),I=(0,a().VK)((()=>b().Z.getState().isOpen),[]),_=(0,a().VK)((()=>C().default.getState().isOpen),[]),k=(0,a().VK)((()=>v().Z.getState().isOpen),[]),B=(0,a().VK)((()=>j().default.getState().isOpen),[]);return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)(u().Z,{style:S.header,children:[(0,M.jsxs)("div",{style:S.title,children:[(0,M.jsx)(d()._H,{id:"sites.domains.title",defaultMessage:"Domains"}),D&&"product"===D.type?(0,M.jsxs)(c().gq,{gap:8,style:{marginRight:32},children:[(0,M.jsx)(l().Z,{isSmall:!0,isMultiline:!0,children:(0,M.jsx)(d()._H,{id:"sites.domains.captionForFreeTier",defaultMessage:"Pages published to the web will be live under the domain below. Get multiple domains"})}),(0,M.jsx)(g().R,{upsell:D,analyticsName:"get_multiple_domains"})]}):(0,M.jsx)(l().Z,{isSmall:!0,children:(0,M.jsx)(d()._H,{id:"sites.domains.captionForPaidTier",defaultMessage:"Pages published to the web will be live on one of these domains"})})]}),(0,M.jsx)(Ot,{spaceStore:t})]}),(0,M.jsx)(m().Z,{columns:zt,rows:w,tableStyle:S.tableBox,cellStyle:S.cell}),I&&(0,M.jsx)(ut,{}),_&&(0,M.jsx)($t,{}),k&&(0,M.jsx)(He,{}),B&&(0,M.jsx)(Y,{spaceStore:t})]})}},984901:(e,t,i)=>{i.d(t,{Z:()=>S});var n=i(667294),a=()=>i(219727),s=()=>i(142735),o=()=>i(846550),d=()=>i(383802),r=()=>i(629719),l=()=>i(948505),c=()=>i(788860),u=()=>i(707513),m=()=>i(212493),p=()=>i(666414),f=()=>i(661641),h=()=>i(67961),g=()=>i(251932),x=()=>i(768064),y=()=>i(398983),j=()=>i(669861),v=()=>i(720343),b=()=>i(513069),C=()=>i(897257),D=i(785893);function S(e){const{billingData:t,price:i,checkoutState:n,subtotal:a,recurringSubtotal:d}=e,r=(0,s().Kw)(C().subscriptionDataStoreInstance),l=(0,o().yK)((e=>({container:{width:406,gap:24},orderSummaryRow:{paddingTop:12,borderTop:`1px solid ${e.stroke.primary}`}})),[]);return(0,D.jsxs)(g().Ht,{style:l.container,children:[(0,D.jsx)(g().gq,{children:r&&(0,D.jsx)(y().p,{billingData:t})}),(0,D.jsx)("div",{style:l.orderSummaryRow,children:(0,D.jsx)(w,{billingData:t,price:i,checkoutState:n,subtotal:a,recurringSubtotal:d})})]})}function w(e){const{billingData:t,price:i,subtotal:s,recurringSubtotal:g,checkoutState:y}=e,{currencyCode:C}=i,[S,w]=(0,n.useState)(!1),[I,_]=(0,n.useState)(0),k=(0,a().O7)(),B=(0,o().yK)((e=>({detailsContainer:{maxHeight:140,overflow:"scroll",background:e.surface.wash,padding:12,paddingBottom:0,borderRadius:6},detailsLabel:{flexShrink:0,fontSize:12,lineHeight:1.25,fontWeight:u().Ue.semibold,paddingBottom:3},orderTotalContainer:{height:52}})),[]);(0,n.useEffect)((()=>{!async function(){g&&_(await x().km({environment:k,billingData:t,taxableAmount:g,address:t.address})??0)}()}),[k,t,g]);const M=new(l().n)(d().X[C],0),T=(0,r().Et)(t,C),H=l().n.fromValue(T),Z=new(l().n)(d().X[C],0),N=s?j().c({subtotal:s,discount:M,balance:H},Z):void 0;return(0,D.jsxs)(m().jX,{gap:8,children:[(0,D.jsx)("div",{style:B.orderTotalContainer,children:N&&(0,D.jsx)(v().Mq,{total:N,handleToggleExpanded:()=>w(!S),isExpanded:S,discount:M,accountBalance:H,chargeType:"immediate",subtitle:(0,D.jsx)(f().q,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:(0,D.jsx)(c()._H,{id:"checkout.orderSummary.taxApplicable",defaultMessage:"+ tax if applicable"})})})}),S&&(0,D.jsxs)(m().jX,{gap:8,style:B.detailsContainer,children:[(0,D.jsx)(h().Z,{style:B.detailsLabel,children:(0,D.jsx)(c()._H,{id:"sites.sitesAddOnCheckout.details.totalForNextPeriod",defaultMessage:"Next billing period"})}),(0,D.jsx)(v().tQ,{items:y.items,showMonthlyPricing:!1}),(0,D.jsx)(p().Z,{size:12}),(0,D.jsx)(b().J,{subtotal:g||new(l().n)(d().X[C],0),tax:new(l().n)(d().X[C],I),discount:new(l().n)(d().X[C],0),accountBalance:new(l().n)(d().X[C],0)})]})]})}},282900:(e,t,i)=>{i.d(t,{S:()=>s});var n=()=>i(142735),a=()=>i(122792);function s(e){return(0,n().VK)((()=>{const t=e.getSubscriptionTier();return a().LU(t)}),[e])}},306019:(e,t,i)=>{i.d(t,{Z:()=>f});i(267602),i(653476),i(241792);var n=i(667294),a=()=>i(219727),s=()=>i(142735),o=()=>i(629719),d=()=>i(976102),r=()=>i(948505),l=()=>i(824462),c=()=>i(254687),u=()=>i(419157),m=()=>i(182946),p=()=>i(663132);function f(e){const{spaceStore:t,billingData:i}=e,f=(0,a().O7)(),[h,g]=(0,n.useState)(),x=(0,m().Cf)(i);(0,n.useEffect)((()=>{c().Zz({environment:f,spaceId:t.id})}),[f,t]);const y=(0,s().VK)((()=>(0,d().pc)({prices:u().Z.state.prices,billingData:i,product:"sites_custom_hostnames"})),[i]),j=(0,s().VK)((()=>1+p().DY(t).filter((e=>"custom"===e.domain_type&&"payment_required"!==e.domain_status)).length),[t]),v=(0,s().VK)((()=>{if(!y)return;const e=o().Lg(i);return(0,d().AI)(e,{price:y,quantity:j})}),[i,y,j]),b=(0,n.useMemo)((()=>{const e=v?v.items.map((e=>r().n.fromValue(e.price.unitAmount).withMultipliedAmount(e.quantity))):[];return r().n.sum(...e)}),[v]);return(0,n.useEffect)((()=>{!async function(){if(!y)return;if(x)return void g(b);const e=await l().callApi({eventName:"getImmediateUpdateCost",environment:f,data:{spaceId:t.id,desiredState:{items:(null==v?void 0:v.items.map((e=>({id:e.id,quantity:e.quantity,priceData:{external_id:e.price.externalId,product:e.price.product,billing_interval:e.price.billingInterval,currency:e.price.unitAmount.currencyCode,unit_amount:e.price.unitAmount.amount,state:e.price.state}}))))||[]},quantities:{numCustomHostnames:j}}});"success"===e.type&&g(r().n.fromValue(e.data.total))}()}),[f,b,v,x,y,t,j]),{price:y,checkoutState:v,isTrial:x,subtotal:h,recurringSubtotal:b}}},761869:(e,t,i)=>{i.d(t,{default:()=>a});class n extends(()=>i(263184))().default{getInitialState(){return{isOpen:!1}}}const a=new n},400925:(e,t,i)=>{i.d(t,{Z:()=>a});class n extends(()=>i(263184))().default{getInitialState(){return{isOpen:!1}}}const a=new n},175332:(e,t,i)=>{i.d(t,{Z:()=>a});class n extends(()=>i(263184))().default{getInitialState(){return{isOpen:!1}}}const a=new n},380501:(e,t,i)=>{i.d(t,{Z:()=>a});class n extends(()=>i(263184))().default{getInitialState(){return{isOpen:!1}}}const a=new n},96818:(e,t,i)=>{i.d(t,{default:()=>a});class n extends(()=>i(263184))().default{getInitialState(){return{isOpen:!1}}}const a=new n},398983:(e,t,i)=>{i.d(t,{p:()=>u});i(667294);var n=()=>i(875120),a=()=>i(788860),s=()=>i(212493),o=()=>i(661641),d=()=>i(647803),r=()=>i(242645),l=()=>i(214293),c=i(785893);function u(e){const{billingData:t}=e,i=t.address&&n().A(t.address);return t.paymentMethod?(0,c.jsxs)(s().jX,{direction:"row",gap:4,children:[(0,c.jsx)(s().jX,{children:(0,c.jsx)(d().x,{label:(0,c.jsx)(a()._H,{id:"subscriptionUpdateModal.paymentDetails",defaultMessage:"Payment details"}),children:(0,c.jsx)(r().X,{paymentMethod:t.paymentMethod})})}),i?(0,c.jsx)(s().jX,{children:(0,c.jsx)(d().x,{label:(0,c.jsx)(a()._H,{id:"subscriptionUpdateModal.billedTo",defaultMessage:"Billed to"}),children:(0,c.jsx)(o().q,{styleName:"Body-14px/Regular",colorName:"primary",children:(0,c.jsx)(l().l,{layout:"full",address:t.address})})})}):null]}):null}},666770:(e,t,i)=>{i.d(t,{M:()=>n});const n=(0,i(827282).CZ)("plug",{default:{loader:()=>i.e(58682).then(i.bind(i,858682))},small:{loader:()=>i.e(67686).then(i.bind(i,167686))},mini:{loader:()=>i.e(8885).then(i.bind(i,408885))},large:{loader:()=>i.e(74615).then(i.bind(i,74615))}})},886664:(e,t,i)=>{i.d(t,{W:()=>a});i(667294);var n=i(785893);const a=(0,i(827282).IU)("home",{viewBox:"0 0 18 16",svg:(0,n.jsx)("path",{d:"M4.3584 15.9004H13.6074C14.6943 15.9004 15.3301 15.2646 15.3301 14.2188V7.93652L16.0752 8.55859C16.2598 8.71582 16.4717 8.83203 16.7041 8.83203C17.1484 8.83203 17.4834 8.55176 17.4834 8.11426C17.4834 7.86133 17.3809 7.64941 17.1826 7.47852L15.3301 5.92676V2.95996C15.3301 2.65234 15.1318 2.4541 14.8174 2.4541H13.751C13.4434 2.4541 13.2314 2.65234 13.2314 2.95996V4.16309L10.0664 1.50391C9.42383 0.957031 8.59668 0.957031 7.94727 1.50391L0.824219 7.48535C0.619141 7.64941 0.516602 7.88184 0.516602 8.10059C0.516602 8.50391 0.817383 8.83203 1.30273 8.83203C1.52832 8.83203 1.74023 8.71582 1.9248 8.55859L2.63574 7.9707V14.2188C2.63574 15.2715 3.27148 15.9004 4.3584 15.9004ZM10.9619 9.95996C10.9619 9.63867 10.75 9.42676 10.4287 9.42676H7.57129C7.25 9.42676 7.03809 9.63867 7.03809 9.95996V14.376H4.80273C4.38574 14.376 4.15332 14.1367 4.15332 13.7197V6.69238L8.67871 2.89844C8.88379 2.7207 9.12305 2.7207 9.33496 2.89844L13.8125 6.6582V13.7197C13.8125 14.1367 13.5801 14.376 13.1631 14.376H10.9619V9.95996Z"})})}}]);