"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[59362,92228,95986],{446955:(e,t,o)=>{o.d(t,{Z:()=>i});o(667294);var n=o(785893);const i=function(e){const{icon:t,iconStyle:i,title:r,caption:l,right:a,rightStyle:c,isRed:s,isGray:d,isOrange:u,isPadded:p,onClick:m,onMouseDown:y,onMouseEnter:g,onMouseLeave:f,disabled:h,showChevron:S,chevronStyle:v,rotateChevron:_,showDragHandle:x,focused:w,textWrapperStyle:b,shouldWrapCaption:C,desktopIconStyle:I,buttonStyle:k}=e,T=(0,o(219727).O7)(),{isMobile:M}=T.device,R=(0,o(846550).yK)((e=>({style:{color:d?e.mediumTextColor:u?"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400]:e.regularTextColor,fill:d?e.mediumIconColor:u?"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400]:e.regularIconColor,opacity:h?.4:void 0,...k},leftIconStyle:{width:24,height:p?24:M?18:16,marginRight:-2,...t===o(314379).o&&{height:3},...i},rightStyle:{display:"flex",alignItems:"center",color:h?e.regularTextColor:e.lightTextColor,fill:h?e.regularIconColor:e.lightIconColor,flexShrink:0,...c},rightIconStyle:{width:12,fill:e.lightIconColor,marginLeft:6,transition:"transform 200ms ease-in-out",...v},rightIconRotatedStyle:{transform:"rotate(90deg)"}})),[d,u,h,i,p,M,t,v,c,k]),[F]=(0,o(288141).o$)();return(0,n.jsx)(o(827973).Z,{ref:F,icon:null==t?void 0:t(R.leftIconStyle),focused:w||!1,disabled:h,title:r,caption:l,shouldWrapCaption:C,desktopTitleStyle:{flexGrow:1,flexShrink:1},showDragHandle:x,buttonStyle:R.style,rightStyle:R.rightStyle,isRedOnHover:s,ignoreLocalHoverState:!!h||void 0,right:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{style:{...o(707513).Yu,display:"flex"},children:a}),!h&&S&&(0,o(696347).o)({...R.rightIconStyle,..._&&R.rightIconRotatedStyle})]}),onClick:m,onMouseDown:y,onMouseEnter:g,onMouseLeave:f,textWrapperStyle:b,desktopIconStyle:I})}},821159:(e,t,o)=>{o.d(t,{Y:()=>d,s:()=>s});o(667294);var n=()=>o(219727),i=()=>o(846550),r=()=>o(707513),l=()=>o(827973),a=()=>o(641506),c=o(785893);function s(e){let{environment:t}=e;return{padding:t.device.isMobile?"12px 2px":"6px 4px",alignItems:"center"}}function d(e){let{buttonMenuItemProps:t,title:o,caption:d,icon:u,onClick:p,right:m,isDisabled:y}=e;const g=(0,n().O7)(),f=(0,i().yK)((e=>({menuItem:{display:"flex",...s({environment:g}),opacity:y?.4:void 0},title:{fontSize:g.device.isMobile?16:14,...r().Yu},caption:{fontSize:(0,a().yv)(g,"UISmall"),overflow:"hidden",color:e.mediumTextColor,whiteSpace:"nowrap",textOverflow:"ellipsis"}})),[g,y]),h={};return p&&(h.onClick=p),(0,c.jsx)(l().Z,{...t,style:f.menuItem,disabled:y,title:(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{style:f.title,children:o}),d&&(0,c.jsx)("div",{style:f.caption,children:d})]}),icon:u,right:m,...h})}},246471:(e,t,o)=>{o.d(t,{F:()=>d,a:()=>s});o(667294);var n=()=>o(846550),i=()=>o(568017),r=()=>o(707513),l=()=>o(827618),a=()=>o(78014),c=o(785893);function s(e){const{value:t,color:o,format:s,showEllipsis:d,onClickRemove:u,showRemoveButton:p,isSingle:m,shouldShrink:y,hideTooltip:g,description:f,tooltipPlacement:h,...S}=e,v=(0,n().Fg)(),_=(0,n().yK)((e=>({token:{...d&&r().Yu}})),[d]),{textColor:x,backgroundColor:w}=(0,i().KR)(v,o);return t?(0,c.jsx)(a().Z,{format:s,value:(0,c.jsx)(l().Z,{children:t}),description:f,onClickRemove:u,showRemoveButton:p,isSingle:m,color:x,backgroundColor:w,shouldShrink:y,tooltipPlacement:h,showTooltip:g?"never":"overflow",style:_.token,...S}):null}function d(e){const{value:t,color:o,format:s,showEllipsis:d,onClickRemove:u,showRemoveButton:p,isSingle:m,shouldShrink:y,groupColor:g,tooltipPlacement:f,description:h,hideTooltip:S,...v}=e,_=(0,n().Fg)(),x=(0,n().yK)((()=>({token:{...d&&r().Yu}})),[d]);if(!t)return null;const{textColor:w,backgroundColor:b}=(0,i().KR)(_,o??g??"gray");let C;return C=o||(g||"gray"),(0,c.jsx)(a().Z,{format:s,value:(0,c.jsx)(l().Z,{children:t}),description:h,onClickRemove:u,showRemoveButton:p,isSingle:m,color:w,backgroundColor:b,shouldShrink:y,showTooltip:S?"never":"overflow",style:x.token,isRound:!0,showColoredDot:C,tooltipPlacement:f,...v})}},850790:(e,t,o)=>{o.d(t,{K:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("boltFilled",{svg:(0,n.jsx)("path",{d:"M0 12.117c0 .38.293.664.703.664h5.518l-2.91 7.91c-.381 1.006.664 1.543 1.318.723l8.877-11.094c.166-.205.254-.4.254-.625 0-.371-.293-.664-.703-.664H7.539l2.91-7.91C10.83.115 9.785-.422 9.131.408L.254 11.492c-.166.215-.254.41-.254.625z"}),viewBox:"0 0 14 22"})},257185:(e,t,o)=>{o.d(t,{y:()=>n().y});var n=()=>o(949489)},953293:(e,t,o)=>{o.d(t,{R:()=>n().R});var n=()=>o(519454)},419273:(e,t,o)=>{o.d(t,{f:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("plusThick",{viewBox:"0 0 14 14",svg:(0,n.jsx)("path",{d:"M2 7.16357C2 7.59692 2.36011 7.95093 2.78735 7.95093H6.37622V11.5398C6.37622 11.9731 6.73022 12.3271 7.16357 12.3271C7.59692 12.3271 7.95093 11.9731 7.95093 11.5398V7.95093H11.5398C11.9731 7.95093 12.3271 7.59692 12.3271 7.16357C12.3271 6.73022 11.9731 6.37622 11.5398 6.37622H7.95093V2.78735C7.95093 2.36011 7.59692 2 7.16357 2C6.73022 2 6.37622 2.36011 6.37622 2.78735V6.37622H2.78735C2.36011 6.37622 2 6.73022 2 7.16357Z"})})},80159:(e,t,o)=>{o.d(t,{w:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("templates",{viewBox:"0 0 20 20",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M6.39733 5.67853C5.89764 5.50234 5.36002 5.40649 4.8 5.40649C2.14904 5.40649 0 7.55432 0 10.2038C0 12.8533 2.14904 15.0011 4.8 15.0011C6.52165 15.0011 8.0316 14.0952 8.87867 12.7343L5.26487 12.0975L6.39733 5.67853Z"}),(0,n.jsx)("path",{d:"M17.3126 3.66609L7.85843 2L6.19141 11.4489L10.6545 12.2354L14.3998 5.81854L16.3449 9.15116L17.3126 3.66609Z"}),(0,n.jsx)("path",{d:"M8.80078 17L14.4008 7.4054L20.0008 17H8.80078Z"})]})})},535645:(e,t,o)=>{o.d(t,{N:()=>k,r:()=>T});o(821057),o(241792),o(667294);var n=()=>o(219727),i=()=>o(142735),r=()=>o(846550),l=()=>o(353329),a=()=>o(226413),c=()=>o(696459),s=()=>o(139224),d=()=>o(269299),u=()=>o(821159),p=()=>o(887430),m=()=>o(594546),y=()=>o(527278),g=()=>o(833186),f=()=>o(298032),h=()=>o(697360),S=()=>o(281236),v=()=>o(382474),_=()=>o(822909),x=()=>o(741119),w=()=>o(792329),b=()=>o(563452),C=()=>o(499819),I=o(785893);function k(e){let{environment:t,template:o,isInSuggestedSection:n,collectionContextStore:i}=e;return{key:o.templateId,action:()=>{if(n)T({environment:t,template:o,collectionContextStore:i,suggestedFeatureAnalytics:void 0});else{const{collectionStore:e,collectionViewStore:n,collectionSettingsStore:r}=(0,_().B)(i);(0,h().zY)({template:o,environment:t,collectionStore:e,collectionViewStore:n,collectionSettingsStore:r,collectionContextStore:i})}},render:e=>(0,I.jsx)(M,{buttonMenuItemProps:e,template:o,isInSuggestedSection:n})}}function T(e){let{environment:t,collectionContextStore:o,template:n,suggestedFeatureAnalytics:i}=e;const r=o.collectionStore();if(!r)throw new Error("collectionStore not found");const a=r.getWorkflowTemplateId();i&&(0,m().j)({environment:t,event:{eventName:"suggested_feature_template_clicked",eventProperties:{origin:i.origin,selected_index:i.selectedIndex,template_ids_shown:i.shownTemplateIds,template_id_clicked:n.templateId,collection_template_id:a}}});const c=o.settingsStore;if((0,w().isWorkflowTemplateWithConfirmStep)(n))s().H4({collectionSettingsStore:c,item:{type:"confirmAddTemplate",template:n}});else if((0,l().yw)(n)){const{relatedCollectionTemplateId:e}=n;!function(e){var t;let{environment:o,template:n,collectionStore:i,relatedCollectionTemplateId:r}=e;const l=null===(t=i.getParentBlockStore())||void 0===t?void 0:t.getParentStore();if(!l)throw new Error(`parentStore not found for ${i.id}`);if(!(0,S().isCollectionTemplateParentStore)(l))throw new Error(`Incorrect parent store: ${l.table} ${l.id}`);const a=S().globalWorkflowTemplates.fromIdOfType({templateId:r,type:"collection"});(0,g().openSelectedTemplateOnboardingModalForInAppFlows)({environment:o,template:a,origin:"suggested_feature_template",parentStore:l,navigateToOnFinish:"skip",relationInfos:[{type:"source",collectionStore:i,relationPropertyTemplate:n}],aiPrompt:void 0})}({environment:t,template:n,collectionStore:r,relatedCollectionTemplateId:e})}else d().createAndCommit({userAction:"FeatureTemplateMenuItem.addFeatureTemplateToTarget",environment:t,canUndo:!0,perform:e=>{f().rU({environment:t,transaction:e,collectionStore:r,template:n,logger:new(S().WorkflowTemplateLogger),origin:"suggested_feature"}),i&&(0,m().j)({environment:t,event:{eventName:"suggested_feature_template_added",eventProperties:{origin:i.origin,template_id_added:n.templateId,collection_template_id:a}}});const l=o.collectionViewStore();l&&h().zY({template:n,environment:t,collectionStore:r,collectionViewStore:l,collectionSettingsStore:c,collectionContextStore:o})}})}function M(e){let{buttonMenuItemProps:t,template:o,isInSuggestedSection:l}=e;const s=(0,r().yK)((e=>({iconContainer:{height:28,width:28,display:"flex",alignItems:"center",justifyContent:"center"},icon:{fill:e.regularIconColor}})),[]),{collectionStore:d}=(0,_().M)(),m=(0,n().O7)(),g=(0,i().VK)((()=>(0,v().w2)({environment:m,collectionStore:d,templateId:o.templateId})),[m,d,o.templateId]),f=(0,i().VK)((()=>function(e){let{template:t,collectionStore:o}=e;const{type:n}=t;switch(n){case"property":const{value:e}=t;if((0,a().t)(e)){const n=function(e){let{templateId:t,propertyTemplateSchema:o,collectionStore:n}=e;const i=(0,v().ZQ)({collectionStore:n,templateId:t,instancePointerType:"property"});if(!i)return o.options??[];const r=n.getSchema()[i.id];if(!r||!(0,a().t)(r))return[];return r.options??[]}({templateId:t.templateId,propertyTemplateSchema:e,collectionStore:o}).map((e=>e.value));return(0,S().getWorkflowTemplateItemsCaption)(n)}return;case"collection_view":return`${y().Z.formatMessage(p().b1[t.value.type])} view`;case"compound":return;default:(0,c().t1)(n)}}({template:o,collectionStore:d})),[o,d]),h=(0,S().getWorkflowTemplateName)(o);return l?(0,I.jsx)(u().Y,{buttonMenuItemProps:t,title:h,icon:(0,I.jsx)(C().$,{template:o}),right:(0,I.jsx)(b().a,{isAdded:g})}):(0,I.jsx)(u().Y,{buttonMenuItemProps:t,title:h,caption:f,icon:(0,I.jsx)("div",{style:s.iconContainer,children:(0,I.jsx)(C().l,{template:o,iconStyle:s.icon})}),right:(0,I.jsx)(x().K,{})})}},299728:(e,t,o)=>{o.d(t,{z:()=>y});o(667294);var n=()=>o(846550),i=()=>o(714230),r=()=>o(445520),l=()=>o(788860),a=()=>o(696459),c=()=>o(139224),s=()=>o(821159),d=()=>o(233646),u=()=>o(741119),p=()=>o(563452),m=o(785893);function y(e){let{legacyUnpackagedFeatureTemplate:t,collectionContextStore:o}=e;return{key:t.type,action:()=>{const e=o.settingsStore;switch(t.type){case"subitems":c().H4({collectionSettingsStore:e,item:{type:"subitemV2",from:"customize_menu"}});break;case"dependencies":c().H4({collectionSettingsStore:e,item:{type:"dependencies",from:"customize_menu"}});break;default:(0,a().t1)(t.type)}},render:e=>(0,m.jsx)(f,{legacyFeature:t,buttonMenuItemProps:e})}}function g(e,t,o){const n=t=>{const o={items:"items"};return{title:(0,m.jsx)(l()._H,{...(0,d().Gt)({feature:t,databaseType:void 0}),values:o}),caption:e.formatMessage((0,d().qi)({feature:t,databaseType:void 0}),o)}},c=t.accentColors.brown,s=e=>(0,m.jsx)("div",{style:{height:28,width:28,borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",background:o.isInstalled?void 0:c[30]},children:(0,m.jsx)(r().Z,{icon:e,theme:t,size:16,style:{fill:o.isInstalled?t.regularIconColor:c[400]}})});switch(o.type){case"subitems":return{...n("subitem"),icon:s(i().Z.images.appPackages.featureSubtasksSvg)};case"dependencies":return{...n("timeline_arrows_by"),icon:s(i().Z.images.appPackages.featureDependenciesSvg)};default:(0,a().t1)(o.type)}}function f(e){const{legacyFeature:t,buttonMenuItemProps:o}=e,i=(0,l().YB)(),r=(0,n().Fg)();return(0,m.jsx)(s().Y,{buttonMenuItemProps:o,...g(i,r,t),right:t.isInstalled?(0,m.jsx)(u().K,{}):(0,m.jsx)(p().a,{isAdded:!1})})}},741119:(e,t,o)=>{o.d(t,{K:()=>l});o(667294);var n=()=>o(846550),i=()=>o(696347),r=o(785893);function l(){const e=(0,n().yK)((e=>({icon:{width:12,fill:e.lightIconColor,marginLeft:6,transition:"transform 200ms ease-in-out"}})),[]);return(0,r.jsx)(r.Fragment,{children:(0,i().o)(e.icon)})}},699620:(e,t,o)=>{o.r(t),o.d(t,{WorkflowSettingsLinkedCollections:()=>f});o(267602),o(653476),o(667294);var n=()=>o(219727),i=()=>o(142735),r=()=>o(353329),l=()=>o(788860),a=()=>o(696459),c=()=>o(205951),s=()=>o(255577),d=()=>o(281236),u=()=>o(382474),p=()=>o(282224),m=()=>o(932200),y=()=>o(822909),g=o(785893);function f(){const e=(0,l().YB)(),{collectionStore:t,collectionSettingsStore:o}=(0,y().M)(),f=(0,n().O7)();(0,m().Y)(t);const{instantiatedRelationPropertyTemplates:h,suggestedRelationPropertyTemplates:S}=(0,i().VK)((()=>({instantiatedRelationPropertyTemplates:(0,u().Bs)(f,t).filter(r().yw),suggestedRelationPropertyTemplates:(0,d().getSuggestedTemplates)(f,t).filter(r().yw)})),[f,t]),v=[(0,p().n)({title:e.formatMessage({id:"workflowSettingsLinkedCollections.linkedSectionTitle",defaultMessage:"Linked"}),templates:h,isSuggestedSection:!1,legacyUnpackagedFeatureTemplates:[]}),(0,p().n)({title:e.formatMessage({id:"workflowSettingsLinkedCollections.suggestedSectionTitle",defaultMessage:"Suggested"}),templates:S,isSuggestedSection:!0,legacyUnpackagedFeatureTemplates:[]})].filter(a().lm);return(0,g.jsx)(c().ZP,{collectionSettingsStore:o,title:e.formatMessage({id:"workflowSettingsLinkedCollections.title",defaultMessage:"Linked workflows"}),children:(0,g.jsx)(s().Z,{disableInitialScroll:!0,type:s().i.Vertical,initialFocus:void 0,resetFocusOnMouseOut:!0,sections:v})})}},563452:(e,t,o)=>{o.d(t,{a:()=>a});o(667294);var n=()=>o(846550),i=()=>o(15409),r=()=>o(419273),l=o(785893);function a(e){let{isAdded:t}=e;const o=(0,n().yK)((e=>({circle:{height:24,width:24,borderRadius:50,display:"flex",alignItems:"center",justifyContent:"center",background:t?"dark"===e.mode?e.accentColors.blue[100]:e.accentColors.blue[50]:e.lightGrayButtonBackground},plusIcon:{height:15,width:15,fill:e.mediumIconColor},checkIcon:{height:12,width:12,fill:e.blueColor}})),[t]);return(0,l.jsx)("div",{style:o.circle,children:t?(0,i().e)(o.checkIcon):(0,r().f)(o.plusIcon)})}},877727:(e,t,o)=>{o.d(t,{C3:()=>a,D:()=>c,QZ:()=>l,fo:()=>r});var n=()=>o(146947),i=()=>o(749826);function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i().default.checkGate({gateName:"packaging_m2_additional_entrypoints"})&&l(e,t)}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!e.device.isPhone&&a(t)}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i().default.checkGate({gateName:"workflow_templates_prototype",...e})||"control"!==c(e)}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n().locale.startsWith("en-")||i().default.checkGate({gateName:"packaging_m2_localize_templates"})?i().default.getEligibleGroup({experimentId:"packaging_m2_entry_point",defaultGroup:"control",...e}):"control"}},282224:(e,t,o)=>{o.d(t,{n:()=>f});o(241792);var n=o(667294),i=()=>o(219727),r=()=>o(142735),l=()=>o(846550),a=()=>o(788860),c=()=>o(821159),s=()=>o(388284),d=()=>o(125659),u=()=>o(314379),p=()=>o(535645),m=()=>o(299728),y=o(785893);const g=3;function f(e){let{title:t,templates:o,legacyUnpackagedFeatureTemplates:f,isSuggestedSection:h,additionalItems:S=[]}=e;const v=(0,l().yK)((e=>({title:{color:e.mediumTextColor},iconContainer:{height:28,width:28,display:"flex",alignItems:"center",justifyContent:"center"},icon:{width:18,height:18,fill:e.mediumTextColor}})),[]),_=(0,d().Y$)(),x=(0,i().O7)(),[w,b]=(0,n.useState)(!1),C=[...(0,r().VK)((()=>o.map((e=>(0,p().N)({template:e,isInSuggestedSection:h,collectionContextStore:_,environment:x})))),[_,x,h,o]),...f.map((e=>(0,m().z)({legacyUnpackagedFeatureTemplate:e,collectionContextStore:_}))),...S];if(0===C.length)return;const I={key:`${t}-toggle-truncation`,action:()=>{b(!w)},render:e=>(0,y.jsx)(c().Y,{buttonMenuItemProps:e,title:(0,y.jsx)("div",{style:v.title,children:w?(0,y.jsx)(a()._H,{id:"useFeatureTemplatesSection.showLess",defaultMessage:"Show less"}):(0,y.jsx)(a()._H,{id:"useFeatureTemplatesSection.showMore",defaultMessage:"More"})}),icon:(0,y.jsx)("div",{style:v.iconContainer,children:(0,u().o)(v.icon)})})},k=w?C:C.slice(0,g);return{key:t,render:e=>(0,y.jsx)(s().Z,{...e,title:t}),items:[...k,...C.length>g?[I]:[]]}}},932200:(e,t,o)=>{o.d(t,{Y:()=>h,j:()=>S});var n=()=>o(219727),i=()=>o(142735),r=()=>o(29488),l=()=>o(801812),a=()=>o(255933),c=()=>o(293307),s=()=>o(824462),d=()=>o(677559),u=()=>o(876822),p=()=>o(972776),m=()=>o(601952),y=()=>o(877727),g=()=>o(999582);const f=!1;function h(e){var t;const o=null===(t=(0,d().XJ)(c().iL).value)||void 0===t?void 0:t.loadWorkflowTemplateInstances;(0,i().VK)((()=>{if(!o)return;const t=e instanceof p().Z?e.collectionStore():e;t&&o(t)}),[o,e])}function S(){const e=(0,n().O7)(),t=(0,i().VK)((()=>{var e;if(function(){if(!(0,y().C3)({disableExposureLogging:!0}))return!1;const e=m().default.state.initialRenderCompleted;f&&!e&&console.log("Initial page render is not yet completed, delaying refresh of workflow template instances.");return e}())return null===(e=u().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]);(0,l().r5)((async()=>{if(!t)return;(g().Z.debug||f)&&console.log("Refreshing workflow template instance map for space",t);const o={table:a().bx,id:t,spaceId:t},n=await s().callApi({eventName:"getWorkflowTemplateInstances",environment:e,data:{spaceId:o.spaceId,scopeTable:o.table,scopeId:o.id,enableInstanceRobustness:!0}});if("success"===n.type){const e=(0,r().O)(o);g().Z.setState({...g().Z.state,[e]:n.data.instanceMap[e]})}}),[e,t])}},822909:(e,t,o)=>{o.d(t,{B:()=>a,M:()=>l});var n=()=>o(142735),i=()=>o(349220),r=()=>o(125659);function l(){const e=(0,r().Y$)(),{collectionStore:t,collectionViewStore:o,collectionSettingsStore:i}=(0,n().VK)((()=>a(e)),[e]);return{collectionStore:t,collectionViewStore:o,collectionSettingsStore:i,collectionContextStore:e}}function a(e){return{collectionStore:(0,i().TO)(e.collectionStore(),"collectionStore not found"),collectionViewStore:(0,i().TO)(e.collectionViewStore(),"collectionViewStore not found"),collectionSettingsStore:e.settingsStore}}},999582:(e,t,o)=>{o.d(t,{Z:()=>r});class n extends(()=>o(263184))().default{getInitialState(){return{}}}const i=new n;o(947115).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",i);const r=i},184441:(e,t,o)=>{o.d(t,{default:()=>r});class n extends(()=>o(263184))().default{getInitialState(){return{open:!1,isShowingLoadingState:!1}}updateUserCustomizations(e,t){this.state.open&&this.state.collectionTemplate&&this.setState({...this.state,userCustomizations:{...this.state.userCustomizations,[e]:t}})}updateCollectionTemplate(e){this.state.open&&this.state.collectionTemplate&&this.setState({...this.state,collectionTemplate:e})}updatePreviewCollectionViewTemplateId(e){this.state.open&&this.state.collectionTemplate&&this.setState({...this.state,previewCollectionViewTemplateId:e})}getParentStore(){return this.state.open?this.state.parentStore:void 0}getShouldShowExpandedTemplateList(){return this.state.open&&this.state.shouldShowExpandedTemplateList}setShouldShowExpandedTemplateList(e){this.state.open&&this.setState({...this.state,shouldShowExpandedTemplateList:e})}close(e){var t,o;this.state.open&&(null===(t=(o=this.state).onClose)||void 0===t||t.call(o,e),this.setState({open:!1,isShowingLoadingState:!1}))}reset(){this.setState(this.getInitialState())}}const i=new n;(0,o(947115).exposeDebugValue)("InitializeWorkflowTemplateModalStore",i);const r=i},347628:(e,t,o)=>{o.d(t,{Ig:()=>l,Vr:()=>i,X$:()=>r,b:()=>n});const n="notion://projects_app",i="notion://wiki_app",r="notion://docs_app",l="notion://meetings_app"},29488:(e,t,o)=>{function n(e){return`${e.table}:${e.id}`}o.d(t,{O:()=>n})},912203:(e,t,o)=>{o.d(t,{$M:()=>f,GQ:()=>w,Jy:()=>I,LF:()=>C,NO:()=>m,Of:()=>k,SF:()=>u,TX:()=>x,XO:()=>h,Y_:()=>d,Ym:()=>g,bD:()=>v,cO:()=>p,fo:()=>b,rR:()=>y});o(267602),o(653476),o(228244);var n=()=>o(513670),i=()=>o(696459),r=()=>o(226413),l=()=>o(109477),a=()=>o(455222),c=()=>o(305580);(0,i().AO)((e=>(0,i().$K)(e)&&(0,i().$K)(e.target)&&(0,i().$K)(e.external_bot_id)?{true:{external_bot_id:e.external_bot_id,target:e.target}}:{false:e}));const s={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1},d={checkbox:[{type:"checkbox"}],date:[{type:"date"}],email:[{type:"text"}],multi_select:[{type:"text"},{of:{type:"text"},type:"array"}],number:[{type:"number"}],person:[{type:"person"},{of:{type:"person"},type:"array"}],phone_number:[{type:"text"}],relation:[{type:"block"},{of:{type:"block"},type:"array"}],select:[{type:"text"},{of:{type:"text"},type:"array"}],status:[{type:"text"},{of:{type:"text"},type:"array"}],text:void 0,title:void 0,url:[{type:"text"}]};function u(e){return Boolean(s[e.type]&&!(0,r().NK)(e)&&(!(0,r().qQ)(e)||void 0===(0,r().q3)(e)))}function p(e){const{collectionFormat:t,collectionSchema:o,filter:a,sort:s,sourcePropertyIds:d}=e,p=(d??(0,i().Yd)(o)).filter(((t,n,i)=>{const l=o[t];return!(!l||!u(l))&&(("relation"!==l.type||!e.restrictCrossSpace||!(0,r().Qh)(e.spaceId,l))&&(!a||a([t,l],n,o)))}));if(0===p.length)return[];if(!t||!1===s)return p;const m=(0,c().i)(t,o,void 0,l().j5.Page).collection_page_properties||[];return n().MR(p,(e=>m.findIndex((t=>t.property===e))))}function m(e){const{collectionFormat:t,collectionSchema:o,sort:a}=e,s=(0,i().Yd)(o).filter(((e,t,n)=>{const i=o[e];return!(!i||!(0,r().U8)(i))}));if(0===s.length)return[];if(!t||!1===a)return s;const d=(0,c().i)(t,o,void 0,l().j5.Page).collection_page_properties||[];return n().MR(s,(e=>d.findIndex((t=>t.property===e))))}function y(e){return e.type===a().$E.InvalidCharacter?{type:e.type,character:e.character}:e.type===a().$E.TokenExpected?{type:e.type,token:e.token}:e.type===a().FY.MissingSchemaPropertyOnThisRow||e.type===a().FY.MissingSchemaPropertyOnCollection?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===a().FY.ThisRowBlockPropertyMismatchCollection?{type:e.type,thisRowCollection:e.thisRowCollection}:e.type===a().FY.MissingContextVariable?{type:e.type,valueId:e.valueId}:e.type===a().FY.FunctionCallTooFewArguments?{type:e.type,numArguments:e.numArguments}:e.type===a().FY.FunctionCallUnexpectedArgument?{type:e.type,parameterIndex:e.parameterIndex}:e.type===a().FY.FunctionCallArgumentWrongType?{type:e.type,argumentType:e.argumentType,libraryFunctionName:e.libraryFunction.name,parameterIndex:e.parameterIndex}:e.type===a().FY.MissingDataDependencyBlock?{type:e.type,blockPointer:e.blockPointer}:e.type===a().FY.MissingDataDependencyPerson?{type:e.type,personPointer:e.personPointer}:e.type===a().FY.MemberPropertyMismatchCollection?{type:e.type,blockCollection:e.blockCollection}:e.type===a().FY.DownstreamParseFailure?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===a().FY.ContextVariableWrongType?{type:e.type,valueId:e.valueId,expectedType:e.expectedType,resultType:e.resultType}:e.type===a().FY.DisallowedValueType?{type:e.type,expressionValue:e.expressionValue,allowedValueTypes:e.allowedValueTypes}:e.type===a().FY.LibraryFunctionExecutionError?{type:e.type,error:e.error,libraryFunctionName:e.libraryFunction.name}:{type:e.type}}const g={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,button:!1,file:!1,verification:!1,auto_increment_id:!1,created_by:!1,created_time:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1};function f(e){return Boolean(g[e.type])}function h(e){const{collectionFormat:t,collectionSchema:o,filter:a,sort:s}=e,d=(0,i().Yd)(o).filter(((e,t,n)=>{var i;const l=o[e];return!(!l||!g[l.type])&&((!(0,r().qQ)(l)||null===(i=(0,r().q3)(l))||void 0===i||!i.auto_update_on_edit)&&(!a||a([e,l],t,o)))}));if(0===d.length)return[];if(!t||!1===s)return d;const u=(0,c().i)(t,o,void 0,l().j5.Page).collection_page_properties||[];return n().MR(d,(e=>u.findIndex((t=>t.property===e))))}const S={checkbox:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,date:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1};function v(e){return S[e.type]}const _={checkbox:!0,created_by:!0,created_time:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,last_edited_by:!0,last_edited_time:!0,auto_increment_id:!1,button:!1,file:!1,formula:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1};function x(e){return _[e.type]}function w(e){return 0===e}function b(e){return function(e){return"button_block"===e||"button_property"===e}(e)}function C(e){const{property:t,collectionSchema:o}=e;return!!o&&!o[t]}function I(e){const{collectionSchema:t,property:o,type:n}=e,i=null==t?void 0:t[o];return!i||("action"===n?!u(i):!g[i.type])}function k(e){let{automationTrigger:t,collectionSchema:o}=e;if("event"===(null==t?void 0:t.type)||"notification_event"===(null==t?void 0:t.type)){const{pagesAdded:e,pagePropertiesEdited:n,source:r}=t.event;if(void 0===r)return!1;const l="some"===n.type&&n.some,a="all"===n.type&&n.all;if((l||a||[]).some((e=>C({collectionSchema:o,property:e.property})||I({collectionSchema:o,property:e.property,type:"trigger"}))))return!1;const c="some"===n.type&&(!(0,i().$K)(n.some)||0===n.some.length),s="all"===n.type&&(!(0,i().$K)(n.all)||0===n.all.length);if(!e&&("none"===n.type||c||s))return!1}else{if("recurrence"!==(null==t?void 0:t.type))return!1;if(!t.recurrence)return!1}return!0}},157955:(e,t,o)=>{o.r(t),o.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>R,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>w,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>x,MAX_RECURRENCE_INTERVAL:()=>f,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>h,RRULE_WEEKDAYS_MAP:()=>g,convertFromUnpersistedRecurrenceConfig:()=>A,convertToUnpersistedRecurrenceConfig:()=>F,getFormattedEndCondition:()=>M,getFormattedNextRecurrenceTime:()=>T,getNextDateUtc:()=>k,getRecurrenceAfter:()=>C,isRunningBetweenMidnightAnd3AM:()=>I,isValidRecurrenceInterval:()=>S,isValidRecurrenceNumberOfRuns:()=>v,rruleFromRecurrence:()=>_,templateAncestorsViolateRecurrenceNesting:()=>b});o(267602),o(653476),o(241792);var n=()=>o(730120);o(670560);function i(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),n=1;n<t;n++)o[n-1]=arguments[n];if(0===o.length)return e.map((e=>[e]));const r=[];for(const l of e)r.push(...i(o[0],...o.slice(1)).map((e=>[l,...e])));return r}var r=()=>o(696459),l=()=>o(326966),a=()=>o(803021),c=()=>o(646574),s=()=>o(998411),d=()=>o(578292);class u extends(()=>o(484885))().Ci{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var p=()=>o(494616);const m=(0,o(788860).vU)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12â€“3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),y={day:u.DAILY,week:u.WEEKLY,month:u.MONTHLY,year:u.YEARLY},g={MO:u.MO,TU:u.TU,WE:u.WE,TH:u.TH,FR:u.FR,SA:u.SA,SU:u.SU},f=99,h=999;function S(e){return(0,l().hj)(e)&&Number.isInteger(e)&&e>0&&e<=f}function v(e){return(0,l().hj)(e)&&Number.isInteger(e)&&e>0&&e<=h}function _(e){const{start_date:t,frequency:o,interval:n,weekdays:l,timezone:c,hour:s,minute:d}=e,p="week"===o&&l?l.map((e=>g[e])):void 0,m={};return(0,r().$K)(e.end_condition)&&("date"===e.end_condition.type?m.until=(0,a().pd)(e.end_condition.end_at):"number"===e.end_condition.type?m.count=e.end_condition.number_of_occurrences:(0,r().t1)(e.end_condition)),"month"===e.frequency&&(0,r().$K)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?m.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?m.byweekday=i(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((e=>{let[t,o]=e;return g[t].nth(o)})):(0,r().t1)(e.monthly_restriction)),new u({freq:y[o],dtstart:(0,a().pd)(t),interval:n,byweekday:p,tzid:c,byhour:s??0,byminute:d??0,bysecond:0,...m})}const x=1,w=1;function b(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const o=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),n=e.length,i=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,r=n>x,l=o.length>=w;return{violatesConstraint:r||l,templateNestingExceedsMaxDepth:r,ancestorHasDailyTemplate:l,nestedDepthOfAutomationAncestors:n,immediateAncestorRecurrenceType:i}}function C(e){const{recurrence:t,afterDate:o}=e;if((0,p().nA)(t)){const e=(0,a().kq)(o);return t.start_date>=e?new Date(t.start_date):void 0}{const e=_(t).after((0,a().pd)(o));if(!e)return;return(0,a().YL)(e)}}function I(e){return 0===e.hour||1===e.hour||2===e.hour}function k(e){return _(e).after((0,a().pd)((0,a().Jh)()))||void 0}function T(e){const{recurrence:t,intl:o}=e,i=k(A(t));if(!i)return;const r=I(t),l=n().ou.fromJSDate(i).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,d().E2)(o)).setZone(t.timezone),a=(0,c().p6)({date:l,dateFormat:"relative",allowRelativeDates:!0,intl:o,shortenDate:!0});if(r)return o.formatMessage(m.dateBetweenMidnightAnd3AM,{date:a});{let e=l.toLocaleString(n().ou.TIME_SIMPLE);return t.timezone!==(0,s().r)()&&(e+=` ${l.toFormat("ZZZZ")}`),o.formatMessage(m.dateAtTime,{date:a,time:e})}}function M(e,t){return(0,r().$K)(e)?"number"===e.type?t.formatMessage(m.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,c().p6)({date:n().ou.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,r().t1)(e):t.formatMessage(m.noEndCondition)}const R=100;function F(e){return{...e,start_date:(0,a().kq)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,a().kq)(e.end_condition.end_at)}:(0,r().t1)(e.end_condition):void 0}}function E(e,t){const o=n().ou.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,a().Jh)(o.toJSDate())}}function A(e){return{...e,start_date:(0,a().Jh)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?E(e,e.end_condition):(0,r().t1)(e.end_condition):void 0}}},519454:(e,t,o)=>{o.d(t,{R:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("pencil",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M3.926 13.307H14.11c.183 0 .34-.066.472-.199a.644.644 0 00.198-.471.652.652 0 00-.198-.479.644.644 0 00-.472-.198H5.272l-1.346 1.347zm-.704-.636l7.683-7.684-1.312-1.319-7.69 7.684-.67 1.606c-.037.1-.017.191.06.273.083.082.174.105.274.069l1.655-.63zm8.34-8.326l.738-.732c.182-.187.278-.376.287-.567.009-.192-.068-.374-.232-.547l-.267-.267c-.169-.168-.351-.246-.547-.232-.196.014-.385.11-.567.287l-.739.732 1.327 1.326z"})})}}]);