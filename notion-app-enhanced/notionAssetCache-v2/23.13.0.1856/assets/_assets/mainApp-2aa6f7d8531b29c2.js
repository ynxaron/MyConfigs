"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[85906,52194],{851990:(e,t,n)=>{n.d(t,{o:()=>p,q:()=>m});var o=()=>n(142735),r=()=>n(191003),a=()=>n(550054),i=()=>n(156538),s=()=>n(876822),c=()=>n(127519),l=()=>n(269299),d=()=>n(348141);function u(){const e=c().default.state;if("editing"===e.mode){const t=(0,r().QY)(e.multiSelection);if(t&&(0,a().wd)(t.selection)){const e=t.store,n=i().E.findEditableWithStore(e);if(n){return e.getValue()?void 0:n}}}}function p(){return(0,o().VK)(u,[])}function m(e){const{currentUserSettingsStore:t}=s().default.state;t&&l().createAndCommit({userAction:"educationTooltipsActions.completePressSlashTooltip",environment:e,perform:e=>{d().d2({userSettingsStore:t,transaction:e,data:{pressed_slash_tooltip:!0}})},canUndo:!0,userId:t.id})}},543573:(e,t,n)=>{n.d(t,{k2:()=>c,l6:()=>s,wk:()=>i});var o=()=>n(998411),r=()=>n(269299),a=()=>n(348141);function i(e){const{environment:t,userSettingsStore:n}=e,r=n.getSettings(),a=null==r?void 0:r.time_zone,i=(0,o().r)();a!==i&&s({environment:t,userSettingsStore:n,timeZone:i})}function s(e){const{environment:t,userSettingsStore:n,timeZone:o}=e;r().createAndCommit({userAction:"checkUserTimeZoneAction.updateTimeZone",environment:t,canUndo:!0,perform:e=>{a().d2({userSettingsStore:n,transaction:e,data:{time_zone:o}})},userId:n.id})}function c(e){const{environment:t,userSettingsStore:n,disableAutoSetTimezone:o}=e;r().createAndCommit({userAction:"checkUserTimeZoneAction.updateDisableAutoSetTimezone",environment:t,canUndo:!0,perform:e=>{a().d2({userSettingsStore:n,transaction:e,data:{disable_auto_set_timezone:o}})},userId:n.id})}},772538:(e,t,n)=>{n.d(t,{Z:()=>Fo});var o=n(667294),r=()=>n(146947),a=()=>n(219727),i=()=>n(732811),s=()=>n(698422),c=()=>n(756280),l=()=>n(578292),d=()=>n(146630),u=()=>n(405851),p=()=>n(205228),m=()=>n(677559);const f=new(m().Ss)("thirdPartyScripts",(()=>n.e(39765).then(n.bind(n,679035)))),g=(0,m().kF)(f,(e=>e.InjectThirdPartyScripts));var v=()=>n(594546),h=()=>n(247724);const b={GlobalInAppMessageListener:new(m().Ss)("GlobalInAppMessageListener",(()=>n.e(96982).then(n.bind(n,797111))))},S=(0,m().kF)(b.GlobalInAppMessageListener,(e=>e.GlobalInAppMessageListener));var y=()=>n(595989),w=()=>n(142735),k=()=>n(846550),x=()=>n(788860),C=()=>n(707513),I=()=>n(102182),_=()=>n(718959),T=()=>n(804217),P=()=>n(749826),j=()=>n(991007),U=()=>n(747055),E=n(785893);function M(){const e=(0,x().YB)(),t=(0,k().Fg)(),n=(0,w().VK)((()=>!T().default.state.online),[]),r=(0,w().VK)((()=>(0,_().zj)()),[]),a=(0,o.useRef)(n),i=(0,o.useRef)(r);(0,o.useEffect)((()=>{!n||a.current&&r===i.current||function(e){var t;const{isOffline:n,currentPageId:o,intl:r,theme:a}=e;if(!(U().Z.state.offlinePages&&P().default.checkGate({gateName:"download_for_offline"})&&n&&o&&(0,j()._)(o)))return;const i=null===(t=U().Z.state.offlinePages[o])||void 0===t?void 0:t.lastDownloadedAt,s=i?r.formatDate(i,{day:"numeric",month:"long",year:"numeric",hour:"numeric",minute:"numeric"}):void 0;I().oV({label:(0,E.jsxs)("div",{children:[(0,E.jsx)("div",{style:{fontWeight:C().Ue.medium},children:(0,E.jsx)(x()._H,{defaultMessage:"Working offline",id:"offlinePages.snackbar.title"})}),i&&(0,E.jsx)("div",{style:{color:a.text.secondary},children:(0,E.jsx)(x()._H,{defaultMessage:"Last sync on {lastDownloadedAtFormatted}.",id:"offlinePages.snackbar.description",values:{lastDownloadedAtFormatted:s}})})]})})}({isOffline:n,currentPageId:r,intl:e,theme:t}),a.current=n,i.current=r}),[n,r,e,t])}var L=()=>n(342792),R=()=>n(784552);function A(){!function(){const{defaultRecordCache:{persistedRecordCache:e},currentUser:{id:t}}=(0,a().O7)();(0,o.useEffect)((()=>{e&&t&&R().readAndCacheOfflinePagesMemo({userId:t,persistedRecordCache:e})}),[e,t])}();const{publishUpdate:e,onReceiveUpdate:t}=function(){const{defaultRecordCache:{persistedRecordCache:e},currentUser:{id:t}}=(0,a().O7)();return(0,o.useMemo)((()=>{if(!t)return;if(!e)return;const n=(0,L().ZP)();let o;try{o=new BroadcastChannel(`offlinePageUpdates-${t}`)}catch(r){return}return{publishUpdate:()=>{o.postMessage({type:"update",tabId:n})},onReceiveUpdate:e=>{o.onmessage=t=>{"update"===t.data.type&&t.data.tabId!==n&&e()}}}}),[t,e])}()||{};!function(e){const{defaultRecordCache:{persistedRecordCache:t},currentUser:{id:n}}=(0,a().O7)();(0,o.useEffect)((()=>{t&&n&&e&&e((()=>{R().readAndCacheOfflinePages({userId:n,persistedRecordCache:t})}))}),[t,n,e])}(t),function(e){const t=(0,w().VK)((()=>U().Z.state.shouldPublishUpdate),[]);(0,o.useEffect)((()=>{t&&e&&(e(),U().Z.setState({...U().Z.state,shouldPublishUpdate:!1}))}),[t,e])}(e)}var V=()=>n(341643);var Z=()=>n(956057),B=()=>n(876822);const N=6e4;async function O(e){var t,n;void 0!==B().default.state.currentUserStore&&void 0!==B().default.state.currentSpaceStore||await B().default.waitUntil((()=>void 0!==B().default.state.currentUserStore&&void 0!==B().default.state.currentSpaceStore));const o=null===(t=B().default.state.currentUserStore)||void 0===t?void 0:t.id,r=null===(n=B().default.state.currentSpaceStore)||void 0===n?void 0:n.id;if(!document.hasFocus())return;if(!o||!r)return;const a=v().Cd({userId:o,spaceId:r}),i=Date.now();a?v().ci({userId:o,spaceId:r,session:{...a,lastFocusedTime:i}}):v().ci({userId:o,spaceId:r,session:{id:Z().Il(),sessionStartTime:i,lastFocusedTime:i}})}n(122556),n(582845),n(250570),n(533019),n(721473),n(788208),n(22624);const D=(0,n(830742).LS)("extractWebClipperContent");var q=()=>n(971095),K=()=>n(824462),F=()=>n(253038),z=()=>n(782646),W=()=>n(844095),H=()=>n(365609);const $=new(n(871663).Z);var G=()=>n(76254),Y=()=>n(593616);var X=()=>n(22628),J=()=>n(345918),Q=()=>n(458335);function ee(){const e=(0,a().O7)(),t=(0,w().VK)((()=>B().default.state.currentUserRootStore),[]);(0,o.useEffect)((()=>{t&&async function(e,t){await X().w();const n=t.getSpaceViewStores();for(const o of n){const t=o.getBookmarkedPageStores();for(const e of t)te(e);const n=o.getSharedPageStores();for(const e of n)te(e);const r=o.getTeamsStores();for(const e of r){const t=e.getTeamPagesStores();for(const e of t)te(e)}const a=o.getSpaceStore();if(a){Q().Z.getData(e,{spaceId:a.id});const t=(0,J().XD)(e,a);for(const e of t)te(e)}}}(e,t)}),[t,e])}function te(e){e.load();const t=e.getCollectionViewSourceOrLinkCollectionStores();for(const n of t)n.load()}var ne=()=>n(799891),oe=()=>n(245015),re=()=>n(566232),ae=()=>n(127898),ie=()=>n(917801),se=()=>n(308186),ce=()=>n(231077),le=()=>n(500174),de=()=>n(122479),ue=()=>n(9599),pe=()=>n(660293);const me=6e4;function fe(){const e=(0,a().O7)(),t=(0,o.useCallback)((()=>function(e){const{AppUpdateStore:t}=e;t.setState({appUpdate:t.state.appUpdate,electronUpdate:{state:"checking"}})}(e)),[e]),n=(0,o.useCallback)(((t,n)=>function(e,t,n){const{AppUpdateStore:o}=n;o.setState({appUpdate:o.state.appUpdate,electronUpdate:{state:"error",error:t}})}(0,n,e)),[e]),r=(0,o.useCallback)((()=>function(e){const{AppUpdateStore:t}=e;t.setState({appUpdate:t.state.appUpdate,electronUpdate:{state:"no-update",timestamp:Date.now()}})}(e)),[e]),i=(0,o.useCallback)(((t,n)=>function(e,t,n){const{AppUpdateStore:o}=n,r=(0,re().parseVersion)(t.version),a=ce().getDesktopVersion(),i=(0,re().getUpdateType)({currentVersion:a,nextVersion:r,app:"desktop"});o.setState({appUpdate:o.state.appUpdate,electronUpdate:{state:"downloading",type:i,version:r,timestamp:Date.now(),progress:0}})}(0,n,e)),[e]),s=(0,o.useCallback)(((t,n)=>function(e,t,n){const{AppUpdateStore:o}=n,r=o.state;r.electronUpdate&&"downloading"===r.electronUpdate.state&&o.setState({appUpdate:r.appUpdate,electronUpdate:{...r.electronUpdate,progress:t.transferred/t.total}})}(0,n,e)),[e]),c=(0,o.useCallback)(((t,n)=>function(e,t,n){const{device:o}=n,{AppUpdateStore:r}=n,a=oe().Z.get(ae().Tm),i=t.version;if(a===i){if(o.isMac)return r.setState({appUpdate:r.state.appUpdate,electronUpdate:{state:"ready",type:re().UpdateType.Major,version:void 0,versionCreatedTime:0}}),void se().vC({message:(0,E.jsx)(x()._H,{id:"desktopAppUpdater.moveNotionToApplicationsFolderDialog.prompt",defaultMessage:"Please move the Notion app into the Applications folder for the auto-updater to work."}),showCancel:!1,keepFocus:!1,handleCancel:()=>ae().mK(n),items:[{label:(0,E.jsx)(x()._H,{id:"desktopAppUpdater.moveNotionToApplicationsFolderDialog.dismissButton.label",defaultMessage:"OK"}),onAccept:()=>ae().mK(n)}]});ne().log({level:"error",from:"AppUpdateListener",type:"electronUpdateFailed",data:{miscDataToConvertToString:{previousUpdateReady:a,nextUpdateReady:i}}})}const s=ce().getDesktopVersion(),c=(0,re().parseVersion)(t.version),l=(0,re().getUpdateType)({currentVersion:s,nextVersion:c,app:"desktop"});r.setState({appUpdate:r.state.appUpdate,electronUpdate:{state:"ready",type:l,version:c,versionCreatedTime:0}})}(0,n,e)),[e]),l=(0,o.useCallback)((()=>function(e){const{AppUpdateStore:t}=e;if(t.state.appUpdate&&"ready"===t.state.appUpdate.state)return;t.setState({electronUpdate:t.state.electronUpdate,appUpdate:{state:"checking"}})}(e)),[e]),d=(0,o.useCallback)(((t,n)=>he(n,e)),[e]),u=(0,o.useCallback)((()=>function(e){const{AppUpdateStore:t}=e;if(t.state.appUpdate&&"ready"===t.state.appUpdate.state)return;t.setState({electronUpdate:t.state.electronUpdate,appUpdate:{state:"no-update",timestamp:Date.now()}})}(e)),[e]),m=(0,o.useCallback)(((t,n)=>be(n,e)),[e]),f=(0,o.useCallback)(((t,n)=>Se(n,e)),[e]),g=(0,o.useCallback)(((t,n)=>ye(n,e)),[e]),v=(0,o.useCallback)((()=>function(e){const t=e.AppUpdateStore;if(T().default.getState().online&&t.isSilentUpdate()){const n=t.state.appUpdate;ae().hC({environment:e,url:window.location.href,version:n.version,versionCreatedTime:n.versionCreatedTime})}}(e)),[e]);(0,o.useEffect)((()=>{const{device:o}=e;if(o.isElectron){const e=ce().electronUpdateReady.addListener(c),o=ce().electronUpdateError.addListener(n),a=ce().electronUpdateChecking.addListener(t),p=ce().electronUpdateAvailable.addListener(i),h=ce().electronUpdateProgress.addListener(s),b=ce().electronUpdateNotAvailable.addListener(r),S=ce().appUpdateReady.addListener(g),y=ce().appUpdateError.addListener(d),w=ce().appUpdateChecking.addListener(l),k=ce().appUpdateAvailable.addListener(m),x=ce().appUpdateInstall.addListener(v),C=ce().appUpdateProgress.addListener(f),I=ce().appUpdateNotAvailable.addListener(u);return()=>{null==e||e(),null==o||o(),null==a||a(),null==p||p(),null==h||h(),null==b||b(),null==S||S(),null==y||y(),null==w||w(),null==k||k(),null==x||x(),null==C||C(),null==I||I()}}}),[e,l,u,m,d,v,f,g,i,t,n,r,s,c]),(0,o.useEffect)((()=>{const{device:t,mobileNative:n}=e;if(n&&n.updateReceiveApiHandlers({appUpdateReady:t=>ye(t,e),appUpdateError:t=>he(t,e),appUpdateChecking:l,appUpdateAvailable:t=>be(t,e),appUpdateProgress:t=>Se(t,e),appUpdateNotAvailable:u}),function(e){const t=ae().ac(),n=ae().uG();if(!(0,re().isEqualVersion)(t,n)){0;ve((0,re().getUpdateType)({currentVersion:t,nextVersion:n,app:"client"}),n,ae().Ji(),e)}}(e),t.isMobileNative&&n&&n.api.openUpdateSettings){const n=t.osVersion,o=t.isAndroid&&(0,re().isLessThanVersion)(n,[7,0]),r=t.isIOS&&(0,re().isLessThanVersion)(n,[16,0]);(o||r)&&function(e){const{mobileNative:t}=e;if(!t)return;ie().Bw({bannerStore:ue().Z,id:"PlatformUpdateWarning",contentKey:"mobile_platform_unsupported",styleKey:le().v.Red})}(e)}}),[e,l,u]);const h=(0,o.useRef)("");(0,o.useEffect)((()=>{const{device:t,mobileNative:n}=e;if(!n&&!t.isElectron&&!p().default.isAdminMode&&(!p().default.isLocalhost||p().default.offline)){async function o(){if(pe().Z.state.isVisible)try{const t=ae().ac(),n=await K().callApi({eventName:"getAssetsJsonV2",environment:e,data:{hash:h.current}});if("success"===n.type){const o=n.data;if("version"in o){const n=(0,re().parseVersion)(o.version);n&&((0,re().isEqualVersion)(n,t)||ye(o,e))}"hash"in o&&(h.current=o.hash||"")}}catch(t){}}const r=setInterval(o,me);return()=>clearInterval(r)}}),[e])}async function ge(e,t){const n=await async function(e){await B().default.waitUntilRendered();const{mainEditorCurrentBlockStore:t,currentUserStore:n}=B().default.state;return!(!n||!t||(0,de().IJ)(e,t))}(e);n&&(ae().gA(e,t,"banner"),ie().Bw({bannerStore:ue().Z,id:"AppUpdate",contentKey:"minor_app_update",styleKey:le().v.Blue}))}function ve(e,t,n,o){e===re().UpdateType.Major||e===re().UpdateType.Minor||ae().KE()?(t&&ae().M0(t)&&ae().D$(t,n),ge(o,e)):ae().TK()?function(e,t){ae().gA(e,t,"modal"),se().vC({message:(0,E.jsx)(x()._H,{defaultMessage:"We just launched new features!",id:"breakingUpdateDialog.title"}),showCancel:!1,keepFocus:!1,handleCancel:()=>ae().mK(e),items:[{label:(0,E.jsx)(x()._H,{defaultMessage:"Update and see what's new",id:"breakingUpdateDialog.updateButtonTitle"}),color:"blue",onAccept:()=>ae().mK(e)}],innerStyle:{width:380}})}(o,e):t&&ae().M0(t)&&ae().D$(t,n)}function he(e,t){const{AppUpdateStore:n}=t;n.state.appUpdate&&"ready"===n.state.appUpdate.state||n.setState({electronUpdate:n.state.electronUpdate,appUpdate:{state:"error",error:e}})}function be(e,t){const{AppUpdateStore:n}=t;if(n.state.appUpdate&&"ready"===n.state.appUpdate.state)return;const o=(0,re().parseVersion)(e.version),r=ae().ac(),a=(0,re().getUpdateType)({currentVersion:r,nextVersion:o,app:"client"});n.setState({electronUpdate:n.state.electronUpdate,appUpdate:{state:"downloading",type:a,version:o,timestamp:Date.now(),progress:0}})}function Se(e,t){const{AppUpdateStore:n}=t,o=n.state;o.appUpdate&&"downloading"===o.appUpdate.state&&n.setState({electronUpdate:o.electronUpdate,appUpdate:{...o.appUpdate,progress:e.downloaded/e.total}})}function ye(e,t){const{AppUpdateStore:n}=t,o=(0,re().parseVersion)(e.version),r=ae().ac(),a=(0,re().getUpdateType)({currentVersion:r,nextVersion:o,app:"client"}),i=e.createdTime;if(!ae().M0(o)){const e={state:"ready",type:a,version:o,versionCreatedTime:i};n.setState({electronUpdate:n.state.electronUpdate,appUpdate:e})}ve(a,o,i,t)}var we=()=>n(572680),ke=()=>n(916673);var xe=()=>n(977481);async function Ce(e){if(e.device.isBrowser&&document.hidden)return;if(e.device.isElectron&&!(await ce().isWindowVisible()))return;if(xe().isConnected())return void Ie(!0);if(!1===navigator.onLine&&!p().default.isLocalhost)return void Ie(!1);"success"===(await K().callApi({eventName:"ping",environment:e,data:{}})).type?Ie(!0):Ie(!1)}function Ie(e){T().default.setState({...T().default.state,online:e,lastOfflineTimestamp:e?T().default.state.lastOfflineTimestamp:Date.now()})}const _e=5e3;var Te=()=>n(100056);n(267602),n(653476),n(470928),n(749411),n(241792);var Pe=()=>n(26970),je=()=>n(955620),Ue=()=>n(572948),Ee=()=>n(661727),Me=()=>n(568017),Le=()=>n(513670),Re=()=>n(574767),Ae=()=>n(8208),Ve=()=>n(958783),Ze=()=>n(288981),Be=()=>n(687647),Ne=()=>n(111124),Oe=()=>n(645805);function De(e){const{discussionId:t,level:n}=e;return`\n\t\t.${(0,Pe().vE)({level:n})}.${(0,Pe().dk)({discussionId:t})}.${Ue().kB} {\n\t\t\tbackground: ${(0,Me().Hu)(e)} !important;\n\t\t\topacity: unset !important;\n\t\t\tborder-bottom: 2px solid ${(0,Me().hI)(e)} !important;\n\t\t}\n\t`}function qe(e){const{level:t}=e;return`\n\t\t.${(0,Pe().vE)({level:t})}.${Ue().Kx}.${Ue().kB} {\n\t\t\tbackground: ${(0,Me().Hu)(e)} !important;\n\t\t\topacity: unset !important;\n\t\t\tborder-bottom: 2px solid ${(0,Me().hI)(e)} !important;\n\t\t}\n\t`}function Ke(e){const t=(0,Me().Hu)({level:1,mode:e.mode,hovered:!1,selected:!1}),n=(0,Ee().Vi)(t).alpha()/2,o=(0,Ee().Vi)(t).alpha(n).toRgbString(),r=(0,Me().hI)({level:1,mode:e.mode,hovered:!1,selected:!1}),a=(0,Ee().Vi)(r).alpha()/2,i=(0,Ee().Vi)(r).alpha(a).toRgbString();return`\n\t\t.${Ue().mJ}.${Ue().kB} {\n\t\t\tbox-shadow: unset !important;\n\t\t\tpadding-bottom: 2px;\n\t\t\tbackground: ${o} !important;\n\t\t\tborder-bottom: 2px solid ${i} !important;\n\t\t\tanimation: commentFadeIn 500ms ease-in;\n\t\t}\n\t`}function Fe(e){const{theme:t,selected:n,hovered:o}=e;return`background: ${(0,Me()._o)({annotationType:"update",type:"background",selected:n,hovered:o,overlapping:!1,mode:t.mode})} !important;\n\t\t\tborder-bottom: 2px solid ${(0,Me()._o)({annotationType:"update",type:"underline",selected:!1,hovered:!0,overlapping:!1,mode:t.mode})} !important;`}function ze(e){const{discussionId:t,theme:n,selected:o,hovered:r}=e;return`\n\t\t.${(0,Pe().Ws)({type:"update"})}.${(0,Pe().dk)({discussionId:t})}.${Ue().kB} {\n\t\t\t${Fe({theme:n,selected:o,hovered:r})}\n\t\t}\n\t\t.${(0,Pe().Ws)({type:"remove"})}.${(0,Pe().dk)({discussionId:t})}.${Ue().kB} {\n\t\t\t${function(e){const{theme:t,selected:n,hovered:o}=e,r=(0,Me()._o)({annotationType:"remove",type:"background",selected:n,hovered:o,overlapping:!1,mode:t.mode}),a=(0,Me()._o)({annotationType:"remove",type:"underline",selected:n,hovered:o,overlapping:!1,mode:t.mode});return`background: ${r} !important;\n\t\t\tcolor: ${t.text.secondary} !important;\n\t\t\ttext-decoration: none !important;\n\t\t\tborder-bottom: 2px solid ${a} !important;`}({theme:n,selected:o,hovered:r})}\n\t\t}\n\t`}function We(e){var t,n,o;const r=(null===(t=Re().Z.state)||void 0===t?void 0:t.discussionIds)||[],a=null!==(n=Be().Z.state)&&void 0!==n&&n.open&&(null===(o=Be().Z.state)||void 0===o?void 0:o.discussionIds)||[];return[...r.flatMap((t=>Le().DZ(Pe().nB).map((n=>De({discussionId:t,level:n+1,hovered:!0,selected:!1,mode:e.mode}))))),...a.flatMap((t=>Le().DZ(Pe().nB).map((n=>De({discussionId:t,level:n+1,hovered:!1,selected:!0,mode:e.mode})))))].join("\n")}function He(e){var t,n,o;const r=(null===(t=Re().Z.state)||void 0===t?void 0:t.discussionIds)||[],a=null!==(n=Be().Z.state)&&void 0!==n&&n.open&&(null===(o=Be().Z.state)||void 0===o?void 0:o.discussionIds)||[];return[...r.map((t=>ze({theme:e,discussionId:t,selected:!1,hovered:!0}))),...a.map((t=>ze({theme:e,discussionId:t,selected:!0,hovered:!1})))].join("\n")}function $e(e){let t="";const n=Ze().Z.getHoveredEdit();n&&(t=`\n\t\t\t.${(0,Pe().EO)({type:"insert",editId:n.editId})} {\n\t\t\t\t${Fe({theme:e,selected:!1,hovered:!0})}\n\t\t\t}\n\t\t\t.${(0,Pe().EO)({type:"remove",editId:n.editId})} {\n\t\t\t\t${function(e){return`background: ${(0,Me()._o)({annotationType:"remove",type:"background",selected:!1,hovered:!0,overlapping:!1,mode:e.mode})} !important;\n\t\t\tcolor: ${e.text.secondary} !important;\n\t\t\ttext-decoration-color: rgba(0, 0, 0, 0) !important;`}(e)}\n\t\t\t}\n\t\t`);return`\n\t\t${t}\n\t\t${`\n\t\t.${h().Y3l} .${(0,Pe().jN)("insert")} {\n\t\t\tbackground: initial !important;\n\t\t\tborder-bottom: initial !important;\n\t\t\tcolor: ${e.regularTextColor} !important;\n\t\t}\n\n\t\t.${h().Y3l} .${(0,Pe().jN)("remove")} {\n\t\t\tbackground: initial !important;\n\t\t\tborder-bottom: initial !important;\n\t\t\tcolor: ${e.text.quaternary} !important;\n\t\t}\n\t`}\n\t`}function Ge(){const e=(0,k().Fg)(),t=(0,w().VK)((()=>[We(e),He(e)].join("\n")),[e]),n=(0,w().VK)((()=>function(){var e,t,n;const o=null===(e=Ne().Z.state)||void 0===e?void 0:e.store,r="token"===(null===(t=Ne().Z.state)||void 0===t?void 0:t.type)?null===(n=Ne().Z.state)||void 0===n||null===(n=n.annotations)||void 0===n?void 0:n.find(je().j0F):void 0;if(!r)return"";const a=(0,je().zW$)(r);return"block"!==(null==o?void 0:o.table)?"":`\n\t\t\t.${(0,Pe().S$)({href:a,blockId:o.id})}.${Ue().kB} {\n\t\t\t\ttransition: border-color 100ms ease-in, opacity 100ms ease-in;\n\t\t\t\tborder-color: currentColor !important;\n\t\t\t\topacity: 1 !important;\n\t\t\t}\n\t\t`}()),[]),r=(0,w().VK)((()=>$e(e)),[e]),a=(0,w().VK)((()=>function(e){var t,n,o;if(!(null===(t=Ve().default.state)||void 0===t?void 0:t.open))return"";let r=[],a=[];return null!==(n=Ae().Z.state)&&void 0!==n&&n.isHovered&&(r=Le().DZ(Pe().nB).map((t=>qe({level:t+1,hovered:!0,selected:!1,mode:e.mode})))),null!==(o=Ae().Z.state)&&void 0!==o&&o.isActivelyComposing&&(a=Le().DZ(Pe().nB).map((t=>qe({level:t+1,hovered:!1,selected:!0,mode:e.mode})))),[...r,...a].join("\n")}(e)),[e]),i=(0,w().VK)((()=>function(e){return Oe().default.isRightMarginCommentHovered()?[Ke(e)].join("\n"):""}(e)),[e]),s=(0,o.useMemo)((()=>[t,n,r,a,i].filter(Boolean).join("\n")),[r,t,n,a,i]),c=(0,o.useRef)(null);(0,o.useLayoutEffect)((()=>{if(!c.current){const e=document.createElement("style");c.current=e,document.head.appendChild(e)}c.current.innerHTML=s}),[s])}var Ye=()=>n(714230),Xe=()=>n(659278),Je=()=>n(225339),Qe=()=>n(743359),et=()=>n(998411),tt=()=>n(890085),nt=()=>n(321160),ot=()=>n(375255),rt=()=>n(306164),at=()=>n(497065),it=()=>n(718611),st=()=>n(338530),ct=()=>n(421797),lt=()=>n(611382),dt=()=>n(954344);const ut=32;const pt=32;async function mt(e){const t=document.createElement("canvas");t.width=pt,t.height=pt;const n=t.getContext("2d"),o=document.createElement("img");return o.src=e,o.crossOrigin="anonymous",new Promise((e=>{o.onload=()=>{n.drawImage(o,0,0,pt,pt),e(t.toDataURL("image/png"))},o.onerror=()=>{e("")}}))}var ft=()=>n(429725),gt=()=>n(512258),vt=()=>n(527278),ht=()=>n(772529),bt=()=>n(704259),St=()=>n(663132),yt=()=>n(772084),wt=()=>n(524434),kt=()=>n(972218),xt=()=>n(148882),Ct=()=>n(235044),It=()=>n(826955);const _t=(0,x().vU)({notionAiDocTitle:{id:"documentTitleListener.notionAi.title",defaultMessage:"Notion AI"}});function Tt(){const e=(0,a().O7)(),t=(0,x().YB)(),n=(0,k().Fg)(),r=(0,o.useRef)(),i=(0,w().Kw)(wt().r4),s=(0,w().SI)((()=>{const{RouterStore:n,device:o}=e,r=n.state.route;if("chat"===r.name){return{assetPath:i?Ye().Z.images.assistantStaticFaceFaviconPng:Ye().Z.images.sparklesFavicon2Png,title:t.formatMessage(_t.notionAiDocTitle)}}if("marketplace"===r.name)return{assetPath:Ye().Z.images.templates.faviconIco};if("settingsConsoleOrganization"===r.name)return{title:"Organization settings"};if("team"===r.name){const t=new(It().zX)(e,{table:rt().e0,id:r.teamId});if(!t.isReady())return;return{title:t.getName(),icon:t.getIcon()}}const a=B().default.state.mainEditorCurrentBlockStore;if(!a||!a.isReady())return;const s="page"===r.name&&r.blockId===a.id,c=a.getSpaceStore()??B().default.state.currentSpaceStore;let l=!1;if("space"===r.name&&r.requestedOnPublicDomain){const e=St().rl(c,a.id);l=(null==e?void 0:e.getDomainName())===r.spaceDomain}if(!s&&!l)return;const d=bt().default.getUnreadCountForCurrentSpace().mentions,u=a.getTitleStore();let p;const m=a.getModel(),f=a.getCollectionViewIds(),g=null==u?void 0:u.getRecordModel(u.pointer);if(u&&g){if(p=(0,ot().Xh)({intl:vt().Z.getIntl(),textValue:u.getValue(),userTimeZone:(0,et().r)(),getRecordModel:a.getRecordModel})||g.getEmptyTitlePlaceholder({getRecordModel:u.getRecordModel,userTimeZone:(0,et().r)(),intl:t}),"block"===u.table&&(0,ht().WE)(a)&&c){p=`${c.getName()} - ${t.formatMessage({id:"DocumentTitleListener.personalHomeLabel",defaultMessage:"Home"})}`}if("collection"===u.table&&m&&m.isCollectionView()&&f.length>1){const e=B().default.state.currentCollectionViewStore;e&&e.getName()&&(p=`${p} | ${e.getName()}`)}"block"===u.table&&a.isWorkflowPage()&&(p=a.getRenderTitleForWorkflowPage(t)),o.isElectron||(p=(0,Xe().db)(p.slice(0,100),st().Z.state)),de().IJ(e,a)||e.device.isElectron||e.device.isMobileNative||(d>9?p=`(9+) ${p}`:d>0&&(p=`(${d}) ${p}`))}let v;null!=c&&c.getPublicSpaceData()&&(v="page"===r.name?(0,ft().ZP)({store:a,fullyQualified:!1,scrollToBlockId:null==r?void 0:r.scrollToBlockId,peekViewBlockId:r.peekViewBlockId,peekMode:r.peekMode,workflowViewType:r.workflowViewType,workflowViewKey:r.workflowViewKey,collectionViewId:r.collectionViewId,discussionId:r.discussionId,showMoveTo:r.showMoveTo,saveParent:r.saveParent,templateGalleryItem:r.templateGalleryItem,projectManagementLaunch:r.projectManagementLaunch,pageVisitSource:void 0,embedded:r.embedded}):(0,ft().ZP)({store:a,fullyQualified:!1,pageVisitSource:void 0}));const h=null==m?void 0:m.isNonverifiedContentClassification(),b=h&&m&&kt().Z.bypassedPage(a.id),S=(0,ct().Iay)(),y=function(e,t,n){if("space"!==e.name&&"page"!==e.name||!e.requestedOnPublicDomain||!t)return n.getIcon();{const e=yt().gR(n);if(null==e||!e.getSiteId())return n.getIcon();const t=null==e?void 0:e.getSiteStore();if(e&&t&&t.isDefined()){const o=t.getFaviconUrl();return o?{pointer:e.pointer,icon:o}:n.getIcon()}}}(r,c,a);return{title:p,url:v,icon:y,isNonverified:h,hasBypassedContentClassification:b,isMemberOfSpace:S}}),[e,t,i]);(0,w().Kw)(s),(0,o.useEffect)((()=>{const o=Le().Ds((function(){const{device:o}=e,a=s.state;if(!a)return;const{url:i,title:c,icon:l}=a;let d,u,m,f;l&&(0,tt().V2)(l.icon)?m=l.icon:l&&(0,nt().Z)(l.icon)?d=l.icon:l&&Je().F8(l.icon)?u=l:a.assetPath&&Je().LF(a.assetPath)&&(f=a.assetPath);const g=a.isNonverified&&!a.hasBypassedContentClassification&&!a.isMemberOfSpace;c&&document.title!==c&&(g?document.title=t.formatMessage({id:"pageTitle.flaggedContent",defaultMessage:"Flagged Content"}):o.isSafari&&d?document.title=`${d} ${c}`:document.title=c),i&&ke().T1(i)!==ke().T1(window.location.href)&&(window.history.replaceState(window.history.state,void 0,i),at().j7({environment:e,url:window.location.href}));const v=document.querySelector("link[rel='shortcut icon']");if(v){const t=Ye().Z.images.faviconIco;if(g)v.href=t,r.current=t;else if(d)d!==r.current&&(r.current=d,async function(e,t){const n=document.createElement("canvas");n.width=ut,n.height=ut;const o=n.getContext("2d");if(o.font="normal normal normal 32px/32px sans",o.textAlign="center",o.textBaseline="middle","raw"===t)return o.fillText(e,n.width/2,n.height/2+4),n;const r=await dt().F.load(),a=(0,lt().y)(e,r);if(!a)return;const i=document.createElement("img");i.src=(0,Xe().bk)(t);const s=(0,Xe().G0)(a);return new Promise((e=>{i.onload=()=>{o.drawImage(i,s.x,s.y,s.size,s.size,0,0,ut,ut),e(n)},i.onerror=()=>{e(void 0)}}))}(d,(0,it().e_)(e)).then((async e=>{await gt().waitForInitialPageRenderToComplete(),await Ct().Z.waitUntil((()=>!Ct().Z.state.isMeasuring)),v.href=(null==e?void 0:e.toDataURL("image/png"))||""})));else if(m){if(m!==r.current){r.current=m;const e=`${m}?mode=${n.mode}`;o.isFirefox?v.href=e:mt(e).then((e=>{v.href=e}))}}else if(u){const{icon:t,...n}=u;if(window.location.origin!==p().default.domainBaseUrl){const o=Qe().EK({url:t,permissionRecord:n.pointer,baseUrl:p().default.domainBaseUrl,fullyQualified:!1,userId:e.currentUser.id,favicon:!0});o!==r.current&&(r.current=o,xt().transactionQueue.awaitRecordTransaction(n.pointer).then((()=>{v.href=o})))}else{const o=Qe().EK({url:t,permissionRecord:n.pointer,baseUrl:p().default.domainBaseUrl,fullyQualified:!1,userId:e.currentUser.id,width:100});o!==r.current&&(r.current=o,xt().transactionQueue.awaitRecordTransaction(n.pointer).then((()=>mt(o))).then((e=>{v.href=e})))}}else if(f){const t=Qe().Q4({url:f,width:100,baseUrl:p().default.domainBaseUrl,fullyQualified:!1,userId:e.currentUser.id});t!==r.current&&(r.current=t,mt(t).then((e=>{v.href=e})))}else t!==r.current&&(v.href=t,r.current=t)}ce().electronApi&&ce().electronApi.setWindowTitle&&c&&ce().electronApi.setWindowTitle(c)}),500,{leading:!0}),a=document.title;return s.state&&o(),s.addListener(o),()=>{s.removeListener(o),document.title=a}}),[e,t,s,n.mode])}n(30005);var Pt=()=>n(831842),jt=()=>n(201741),Ut=()=>n(952864);const Et=(0,x().vU)({have_local_draft_unsaved_changes:{defaultMessage:"Changes you made to the layout may not be saved.",id:"closeConfirmationMessages.haveLocalDraftUnsavedChanges"}});var Mt=()=>n(793935),Lt=()=>n(291335),Rt=()=>n(725751),At=()=>n(255810),Vt=()=>n(767831);var Zt=()=>n(326966),Bt=()=>n(709344);function Nt(e){(0,Bt().default)({url:`${p().default.secureFileConfig.rootPath}/refresh`,environment:e,method:"GET",format:"text"})}n(916054);var Ot=()=>n(491927),Dt=()=>n(897257);const qt=Le().P2(Ot().XW,5e3);var Kt=()=>n(534200),Ft=()=>n(43519);var zt=()=>n(244222),Wt=()=>n(59407);var Ht=()=>n(166569),$t=()=>n(565630),Gt=()=>n(485014);const Yt={recentPagesActions:new(m().Ss)("recentPagesActions",(async()=>Promise.resolve().then(n.bind(n,838347)))),userSignalsHelpers:new(m().Ss)("userSignalsHelpers",(async()=>n.e(18638).then(n.bind(n,126621)))),broadcastChannel:new(m().Ss)("broadcastChannel",(async()=>Promise.resolve().then(n.bind(n,755071))))};function Xt(){const e=(0,a().O7)(),{currentUserId:t,currentSpaceId:n}=(0,w().VK)((()=>{var e,t;return{currentUserId:null===(e=B().default.state.currentUserStore)||void 0===e?void 0:e.id,currentSpaceId:null===(t=B().default.state.currentSpaceStore)||void 0===t?void 0:t.id}}),[]),r=(0,$t().D9)(t),i=(0,$t().D9)(n);(0,o.useEffect)((()=>{t&&n&&(t!==r||n!==i)&&async function(e){var t,n;const{spaceId:o,userId:r,environment:a}=e;await(null===(t=Gt().Z.state)||void 0===t||null===(t=t.elector)||void 0===t?void 0:t.die()),await(null===(n=Gt().Z.state)||void 0===n||null===(n=n.broadcastChannel)||void 0===n?void 0:n.close());const{BroadcastChannel:i,createLeaderElection:s}=await Yt.broadcastChannel.load(),c=new i(`local_search_${o}_${r}`),l=s(c);Gt().Z.update((e=>({...e,elector:l,broadcastChannel:c})));const d=await Yt.recentPagesActions.load(),u=await Yt.userSignalsHelpers.load();await Promise.all([d.reinitializeGlobalRecentPagesStoreState(a,r,o),u.initializeAndLoadAllUserSignals({spaceId:o,userId:r,environment:a})])}({spaceId:n,userId:t,environment:e})}),[e,t,n,r,i])}var Jt=()=>n(81066);var Qt=()=>n(492788),en=()=>n(844085),tn=()=>n(302353),nn=()=>n(127519);const on=new(n(435308).default)((()=>{const e=tn().default.state;return e.phase===tn().i.willShow?0:e.estimatedKeyboardWebViewOverlap}),{debugName:"estimatedKeyboardWebViewOverlapStore"});var rn=()=>n(517670),an=()=>n(145990),sn=()=>n(620218);const cn=300;var ln=()=>n(990966),dn=()=>n(505462),un=()=>n(504446);const pn=window.matchMedia("(prefers-color-scheme: dark)");n(670560);var mn=()=>n(282017),fn=()=>n(595380);const gn=!1,vn=(gn?1:10)*Zt().C0,hn=5*vn;function bn(){gn&&console.log(...arguments)}function Sn(){(0,o.useEffect)((()=>{if(!window.BroadcastChannel)return;const e=(0,mn().c$)(),t=new Map,n=new BroadcastChannel("notion_tab_tracker");n.onmessage=e=>{const n=e.data;"string"==typeof n&&t.set(n,Date.now())};const o=window.setInterval((()=>{(()=>{const e=[],n=Date.now();for(const[o,r]of t.entries())n-r>hn&&e.push(o);e.length&&bn("Removing tab ids:",e);for(const o of e)t.delete(o)})(),n.postMessage(e);const o=t.size+1;bn("Tab count is",o),(0,fn().$)(o)}),vn);return()=>{n.close(),window.clearInterval(o)}}),[])}var yn=()=>n(156958),wn=()=>n(881688);const kn="loadCachedPageChunk";n(821057);var xn=()=>n(792409),Cn=()=>n(836842);const In=function(){const e=(0,a().O7)(),t=(0,o.useCallback)((t=>{(0,v().j)({environment:e,event:{eventName:"statsig_client_init_error",eventProperties:{statsig_init_method:"bootstrap"}}}),ne().log({level:"error",from:"statsig",type:"initialize",error:(0,xn().Ui)(t),data:{userId:e.currentUser.id}})}),[e]);(0,i().K)((()=>{Cn().StatsigInitializer.initializePromise?Cn().StatsigInitializer.error?t(Cn().StatsigInitializer.error):Cn().StatsigInitializer.isComplete||t(new Error("`statsig.initialize` was not awaited on app bootstrap")):t(new Error("`statsig.initialize` was not called on app bootstrap"))}))};var _n=()=>n(269299);var Tn=()=>n(801812),Pn=()=>n(274879);const jn=function(){const e=(0,a().O7)(),t=(0,o.useCallback)((t=>{(0,v().j)({environment:e,event:{eventName:"statsig_client_update_user_error",eventProperties:{statsig_init_method:"bootstrap"}}}),ne().log({level:"error",from:"statsig",type:"updateUser",error:(0,xn().Ui)(t),data:{nextUserId:e.currentUser.id,err:(0,n(720866).t)(t).message}})}),[e]),[i]=(0,Tn().r5)((async()=>await Pn().getExperimentDeviceId(e)),[e]),[s]=(0,Tn().r5)((async()=>await Pn().getBrowserId(e)),[e]),c=(0,w().VK)((()=>{var e,t;return!(null===(e=B().default.state.currentUserStore)||void 0===e||!e.isDefined())&&!(null!==(t=B().default.state.currentUserStore)&&void 0!==t&&t.getOnboardingCompleted())}),[]),l=(0,w().VK)((()=>{var e;return null===(e=B().default.state.currentSpaceStore)||void 0===e?void 0:e.isDefined()}),[]),d=(0,w().VK)((()=>{if("resolved"===i.status&&"resolved"===s.status&&n(601952).default.state.initialRenderCompleted)return!e.currentUser.id||l||c?(0,Cn().bG)(n(963332).getDataForStatsigUser({environment:e,deviceId:i.value,browserId:s.value})):void 0}),[e,i,s,l,c]),u=(0,o.useRef)(Cn().StatsigInitializer.statsigStageTwoUser),p=(0,o.useRef)(0);(0,o.useEffect)((()=>{!async function(){if(Cn().StatsigInitializer.isComplete&&d&&!Le().Xy(d,u.current)){u.current=d,p.current++;try{const t=await Cn().statsigClientLoader.getPhaseTwoInstance(),o=async function(a){t.off("initialization_failure",o),ne().log({level:"info",from:"useUpdateStatsigData",type:"updateStatsigUser.failedToReachStatsig",data:{message:"Unable to reach statsig, trying to get latest values from server.",nextUserId:e.currentUser.id}});const i=(0,n(235653).createApiHttpJsonRequestOptions)({environment:e,eventName:"getStatsigResults",data:{...d.customIDs,device:(0,Cn().getDeviceAttributesForStatsigUser)(e.device),locale:r().locale},activeUserId:e.currentUser.id,tracking:void 0,eventListeners:(0,n(565016).getPerformanceEventListeners)({eventName:"getStatsigResults",isPrefetchRequest:!0})}),s=await(0,Bt().default)(i);"success"===s.type?(t.dataAdapter.setData(JSON.stringify(s.data.initialValues)),t.updateUserSync(s.data.statsigUser)):ne().log({level:"error",from:"useUpdateStatsigData",type:"updateStatsigUser.failedToReachStatsigAndServer",data:{message:"Unable to reach statsig and fallback failed",err:(0,Bt().p)(s),nextUserId:e.currentUser.id}})};t.on("initialization_failure",o),await t.updateUserAsync(d)}catch(o){t(o)}p.current--,0===p.current&&P().default.recomputeAllGroupStores()}}()}),[t,d,e])};var Un=()=>n(317924),En=()=>n(751052),Mn=()=>n(506347),Ln=()=>n(362154),Rn=()=>n(836273),An=()=>n(396136),Vn=()=>n(899133);const Zn=["compact","regular","unknown"];var Bn=()=>n(957042),Nn=()=>n(124199),On=()=>n(353141),Dn=()=>n(765056),qn=()=>n(279762),Kn=()=>n(525038),Fn=()=>n(207874),zn=()=>n(824034),Wn=()=>n(511614),Hn=()=>n(96271),$n=()=>n(278275),Gn=()=>n(879952),Yn=()=>n(224597),Xn=()=>n(13750),Jn=()=>n(306743);var Qn=()=>n(429102);var eo=()=>n(271308),to=()=>n(297861),no=()=>n(369320);var oo=()=>n(589525);var ro=()=>n(520849),ao=()=>n(230637),io=()=>n(424817);var so=()=>n(543172);function co(e){const t=(0,Un().w_)(e);switch(t.type){case"native":return;case"web":const e=t.route;switch(e.name){case"page":return e.collectionViewId?"collection":"page";case"nativeTab":switch(e.tab){case"updates":return"updates";case"assistant":return"assistant";case"trash":return"trash";case"members":return"members";case"help":return"help";case"templates":return"templates";case"offline":return"offline_settings"}break;default:return}}}var lo=()=>n(141735),uo=()=>n(233936),po=()=>n(390886),mo=()=>n(148126),fo=()=>n(832924),go=()=>n(8),vo=()=>n(466970),ho=()=>n(341691),bo=()=>n(76225),So=()=>n(741636);const yo={MobileNativePerformanceListener:new(m().Ss)("MobileNativePerformanceListener",(async()=>await n.e(93539).then(n.bind(n,623118))))},wo=(0,m().kF)(yo.MobileNativePerformanceListener,(e=>e.MobileNativePerformanceListener));var ko=()=>n(828946),xo=()=>n(307853),Co=()=>n(738483),Io=()=>n(591707),_o=()=>n(956789),To=()=>n(84922),Po=()=>n(141938),jo=()=>n(890881),Uo=()=>n(211937),Eo=()=>n(705111),Mo=()=>n(253225),Lo=()=>n(577325),Ro=()=>n(576387);const Ao=(0,x().vU)({failedToMovePageGeneric:{id:"MobileNativeListener.failedToMovePage",defaultMessage:"Failed to move page"}}),Vo=Le().HP((async(e,t)=>(await ko().x.searchActions.load()).getLocalCacheFromAppState(e)),((e,t)=>{var n;return`${e.currentUser.id}-${(null===(n=B().default.state.currentSpaceViewStore)||void 0===n?void 0:n.id)??"none"}-${t??"none"}`}));function Zo(e){const{mobileNative:t,TabbedRouterStore:o,device:r}=e();if(r.isMobileNative&&t){var a;t.updateReceiveApiHandlers({toggleAvailableOffline:t=>{const{pageId:n}=t;R().toggleAvailableOffline({store:new(It().G)(e(),{table:An().iU,id:n}),environment:e()})},statusBarTap:No,backButtonPress:()=>Pt().Zm(e(),{type:"backbutton"}),keyboardWillShow:t=>{const n=(0,to().Y)("supportsFixedSizeWebView")?t??0:0;tn().default.updateKeyboardPhase(e(),tn().i.willShow,n)},keyboardDidShow:t=>{const n=(0,to().Y)("supportsFixedSizeWebView")?t??0:0;tn().default.updateKeyboardPhase(e(),tn().i.shown,n)},keyboardWillHide:()=>{tn().default.updateKeyboardPhase(e(),tn().i.willHide,0)},keyboardDidHide:()=>{var t;(tn().default.updateKeyboardPhase(e(),tn().i.hidden,0),r.isIpad)&&(Gn().ZH({environment:e()}),null===(t=e().NativeMobileActionBarStore)||void 0===t||t.clear(!0))},keyboardConfigChanged:e=>{tn().default.updateKeyboardConfig(e.packageName,e.activeLocale)},safeAreaConfigChanged:t=>{(0,to().Y)("supportsNativeSafeAreaConfig")?(En().iI.update((e=>({...e,supportsNativeSafeAreaConfig:!0,top:t.top,bottom:t.bottom,left:t.left,right:t.right}))),e().WindowSizeStore.updateWindowSize()):En().iI.reset()},keyboardShortcut:t=>Pt().Zm(e(),t),nativeBottomBarDidChange:e=>{void 0!==e.height&&tn().default.update((t=>({...t,nativeBottomBarHeight:e.height})))},pushNotificationTokenRefresh:t=>qn().handleTokenRefresh(e(),t,"refresh"),resume:Po().Z.resume,pause:async()=>{Po().Z.pause();const{stopDictation:t}=await Promise.all([n.e(52183),n.e(5509)]).then(n.bind(n,874023));await t({environment:e()})},refreshSubscriptionData:async t=>{await K().invalidateSubscriptionData(e(),{spaceId:t,provider:"revenue_cat"}),await Ro().bi(e())},refreshSubscriptionDataV2:async()=>{await Ro().bi(e())},processMobileActionBarAction:e=>{const{componentId:n,action:o}=e;t.componentEvents.dispatch("MobileActionBar",n,"onAction",{action:o})},logout:t=>{ho().logoutSingleAccount({environment:e(),userId:t,logoutOrigin:Ln().F.MobileNativeListener})},logoutV2:t=>{const{userId:n,fcmToken:o}=t;ho().logoutSingleAccount({environment:e(),userId:n,logoutOrigin:Ln().F.MobileNativeListener,fcmToken:o})},logoutAll:()=>{ho().logout(e())},openDestinationV2:t=>{no().Z.closeAll();const n=e(),o=(0,Un().w_)(n.TabbedRouterStore.state),{activeTab:r,tabs:a}=n.TabbedRouterStore.state,i=o===a[r].rootPage,s="native"===o.type,c=i&&s;switch((0,mo().__)(n)&&Hn().S({environment:n,tab:n.TabbedRouterStore.state.activeTab,nativeRootPageOverrideEnabled:!1}),t.type){case"moveTo":!function(e,t){const n=new(It().G)(t,{table:An().iU,id:e});Kn().bA({environment:t,blocks:[n],moveToContext:"home_tab",onAccept:e=>{Wn().r({store:n,environment:t,pageVisitSource:Mn().tY.Move})}})}(t.blockId,n);break;case"trash":qo({query:t.query});break;case"templates":!function(e,t){Ko(e),Mo().Z.setState({open:!0,isFromNativeHome:!0,source:t.source})}(n,{source:t.source});break;case"AIAssistant":!function(e,t,n){Eo().g.update((e=>({query:n.query,searchSessionId:n.searchSessionId,from:n.from??"search",shouldReset:Boolean(n.query&&n.query.trim().length>0)}))),at().c4({environment:e,url:`${Rn().VP.nativeTab}/assistant`,redirect:t})}(n,c,{query:t.query,searchSessionId:t.searchSessionId,from:t.from});break;case"createOrJoinWorkspace":return Do(n,t.userId)}},openDestination:t=>{no().Z.closeAll();const n=e();switch("closePopup"!==t&&(0,mo().__)(n)&&Boolean(n.TabbedRouterStore.state.tabs[n.TabbedRouterStore.state.activeTab].nativeRootPageOverrideEnabled)&&Hn().S({environment:n,tab:o.state.activeTab,nativeRootPageOverrideEnabled:!1}),t){case"search":!function(e,t){(0,to().Y)("supportsNativeHome")&&e.device.isPhone&&zn().Hu({RouterStore:e.RouterStore,currentUserId:e.currentUser.id});$n().UT({environment:e,analyticsFrom:"mobile-bottom-bar",query:t}),On().nB(e,{itemName:"search",logging_source:"mobile_native"})}(n);break;case"addPage":Ko(n);break;case"allUpdates":!function(e){(0,to().Y)("supportsNativeHome")&&e.device.isPhone?(zn().Hu({RouterStore:e.RouterStore,currentUserId:e.currentUser.id}),at().c4({environment:e,url:`${Rn().VP.nativeTab}/updates`,redirect:!0})):Lo().Z.setState({...Lo().Z.state,open:!0})}(n);break;case"addAccount":Io().C.setState({...Io().C.state,open:!0});break;case"createOrJoinWorkspace":return Do(n);case"notificationAndSettings":Co().Z.setState({open:!0,source:Co().Y.Home});break;case"trash":qo({});break;case"memberSettings":Uo().Z.setState({...Uo().Z.state,open:!0});break;case"help":jo().Z.setState({...jo().Z.state,open:!0});break;case"intercom_messages":!function(e){Jn().j_({environment:e,from:"help_button"})}(n);break;case"aiWriter":!function(e){uo().QG(e)}(n)}},setCurrentUserId:async t=>{await Oo(t,e())},setCurrentSpace:async t=>{await async function(e,t,n){const o=await Xn().x({environment:n,newCurrentUserId:e}),{currentUserRootStore:r,currentUserSettingsStore:a}=B().default.state;if(!r)return;await r.load();const i=(0,J().w3)(t);i&&await Yn().y3({environment:o,spaceViewStore:i,userSettingsStore:a,userRootStore:r,pageVisitSource:Mn().tY.SwitchSpace,navigationType:"switchingToOrLoadingSpace"})}(t.userId,t.spaceId,e())},updateHorizontalSizeClass:e=>{const n=(0,Bn().Gu)(Nn().literals(...Zn),e)?"unknown":e;n!==t.horizontalSizeClass.state&&t.horizontalSizeClass.setState(n)},updateTabbedRouterState:t=>{var n;const o=e(),{TabbedRouterStore:r}=o,a=r.state;if(t.tab!==a.activeTab||null!==(n=t.pages)&&void 0!==n&&n.length||!Le().Xy(t.modal,a.modal)||a.tabs[a.activeTab].pages.length){const n=t.navigationEffect;if(n&&"AIAssistant"===n.type)Eo().g.update((e=>({query:n.query,searchSessionId:n.searchSessionId,from:n.from??"search",shouldReset:Boolean(n.query&&n.query.trim().length>0)})));Hn().S({environment:e(),tab:t.tab,queryParams:t.queryParams,pages:t.pages,modal:t.modal,nativeRootPageOverrideEnabled:t.nativeRootPageOverrideEnabled,navigationAction:t.navigationAction,navigationSource:t.navigationSource})}else No();const i=r.state;return[{state:i,topPage:(0,Un().w_)(i),webTransitionType:co(i),updateId:t.updateId??(0,L().ZP)()}]},getLocalSearchResults:async t=>{const n=await Vo(e(),t.searchSessionId);if(!n)return[{error:"Local cache does not exist"}];const o=(0,Bn().Gu)(Vn().GA,t.sort);if(o)return[{error:`old sort type is unsupported! ${o}`}];const r=t.sort,a=(0,xo().f)({query:{query:{text:t.query??"",filters:t.filters,sort:r},limit:t.limit},localCachedPages:n,includeRecordMap:!1,userId:e().currentUser.id,environment:e()}),i=[{value:{total:0,results:[],recordMap:{},trackEventProperties:void 0}}];if(!a||0===a.results.length)return i;const s=T().default.state.online?go().g8(e(),a.results):a.results;return[{value:{results:s,total:s.length,recordMap:{},trackEventProperties:{}}}]},customAddCommentMenuItemTapped:async()=>{const t=await lo().F.formulas.load();(0,uo().ol)(e(),"custom_add_comment_menu_item",t)},filterValidMoveToBlocks:t=>{const n=t.targets.map((t=>new(It().G)(e(),{table:An().iU,id:t}))),o=t.blocks.filter((t=>{const o=new(It().G)(e(),{table:An().iU,id:t});return o.canEdit()&&(0,po().Xk)(o,n)}));return[{value:{targets:t.targets,blocks:o}}]},completeMoveToTransaction:async t=>{const{targets:n,destination:o,moveToContext:r,timeToSelectMs:a,isSearchResult:i,flowId:s}=t,c=n.map((t=>new(It().G)(e(),{table:An().iU,id:t}))),l=Kn().QF(e(),n,o);if(c&&c.length>0&&!l)try{return await _n().createAndCommitAsync({userAction:"MobileNativeListener.completeMoveTo",environment:e(),waitForServerCommit:!1,perform:async t=>{await Kn().RL({targets:c,value:o,transaction:t,environment:e(),moveToContext:r,renderType:"native",timeToSelectMs:a,disableSuccessToast:!0,isSearchResult:i,flowId:s})}}),[{value:t}]}catch(d){}return Dn().fW(e(),{type:"moved_to_subpage"}),[{error:vt().Z.formatMessage(Ao.failedToMovePageGeneric)}]},undoRevision:()=>{Fn().Yw(e(),!0)},searchTeams:async e=>{const{query:t}=e,n=B().default.state.currentSpaceStore,o=B().default.state.currentSpaceViewStore;if(!n||!o)return[{error:"SpaceStore or SpaceViewStore was undefined"}];const r=await ko().x.searchActions.load();return[{value:{ids:(await r.searchTeams({spaceViewStore:o,query:t,teamStores:o.getTeamsStores()})).map((e=>e.id))}}]}});const s=e().mobileNative;var i;if(null!=s&&null!==(a=s.api)&&void 0!==a&&a.ready)null==s||null===(i=s.api)||void 0===i||i.ready()}}function Bo(){const e=(0,a().O7)(),{device:t}=e;(0,o.useEffect)((()=>Zo((()=>e))),[e]),function(){const e=(0,a().O7)(),t=(0,w().VK)((()=>(0,Qn().n)(e)),[e]);(0,o.useEffect)((()=>{var n;null===(n=e.mobileNative)||void 0===n||n.toggleBottomBar(t)}),[e.mobileNative,t])}(),function(){const{mobileNative:e}=(0,a().O7)(),t=(0,w().VK)((()=>{const{currentUserStore:e,currentSpaceStore:t}=B().default.state;if(!e||!t)return;const n=wt().KR.isShowingQNAOnMobile(),o=wt().KR.shouldShowAssistantFace();return{userId:e.id,spaceId:t.id,enabled:n,showAssistantFace:o}}),[]);(0,o.useEffect)((()=>{t&&(null==e||e.updateAiAssistantEnabledState(t))}),[e,t])}(),function(){const{mobileNative:e}=(0,a().O7)();(0,o.useEffect)((()=>{null==e||e.updateAiAssistantVisibilityState({enabled:!1})}),[e])}(),function(){const e=(0,a().O7)(),{mobileNative:t,WindowSizeStore:n}=e,r=(0,w().Kw)(n),i=(0,w().VK)((()=>({visible:Lt().sidebarExpandedStore.state&&!(0,oo().YR)(e),width:(0,oo().qG)(e)})),[e]);(0,o.useEffect)((()=>{null==t||t.sidebarVisibility(i.visible,i.width)}),[e,t,r,i])}(),function(){const e=(0,a().O7)(),{mobileNative:t,TabbedRouterStore:n}=e,{state:r,previousState:i}=(0,w().VK)((()=>({state:n.state,previousState:n.getPreviousState()})),[n]);(0,o.useEffect)((()=>{const n=null==t?void 0:t.api.handleTabbedRouterStateUpdate;if(n){if(n({state:r,topPage:(0,Un().w_)(r),webTransitionType:co(r),updateId:(0,so().ZP)()}),!i)return;const t=(0,Un().F9)(i),o=(0,Un().F9)(r);Le().Xy(t,o)||On().w3(e,{origin:t,destination:o,from:r.navigationSource,action:r.navigationAction,logging_source:"mobile_native"})}}),[e,t,r,i])}(),function(){const{mobileNative:e,RouterStore:t}=(0,a().O7)(),{isIOS:n}=(0,a().Fy)(),r=(0,o.useRef)(!1),i=(0,w().Kw)(ao().Z),s=(0,w().VK)((()=>"onboarding"===t.state.route.name),[t]);(0,o.useEffect)((()=>{n&&null!=e&&e.setWebViewAllowsNavigationGestures&&(s||Lt().sidebarOpenStore.state||io().Z.getPreventScrollType()!==ro().Z.None?!1!==r.current&&(r.current=!1,e.setWebViewAllowsNavigationGestures(!1)):!0!==r.current&&(r.current=!0,e.setWebViewAllowsNavigationGestures(!0)))}),[n,s,e,i])}(),function(){const{mobileNative:e,TabbedRouterStore:t}=(0,a().O7)(),n=(0,w().VK)((()=>{var e;if(!(0,to().Y)("supportsCustomAddCommentMenuItem"))return!1;const{currentUserStore:n}=B().default.state;if(!Boolean(null==n?void 0:n.id))return!1;if((0,to().Y)("supportsNativeBottomBarOverlappingWebView")?no().Z.hasOpenMobileSlideUps():no().Z.hasOpenPopups())return!1;const o=(0,Un().w_)(t.state),r="web"===o.type&&((null===(e=o.redirectedTo)||void 0===e?void 0:e.route)||o.route);if(!r||"page"!==r.name)return!1;const a=nn().default.state;if("empty"===a.mode)return!1;const i=(0,eo().tp)({multiSelection:a.multiSelection,filterCommonAncestors:!0,focus:void 0});return!(!i||0===i.stores.length)&&i.stores.every((e=>e.canComment()))}),[t]);(0,o.useEffect)((()=>{(0,to().Y)("supportsCustomAddCommentMenuItem")&&(null==e||e.updateCustomAddCommentMenuItemEnabled(n))}),[e,n])}(),(0,bo().aT)();const n=(0,o.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object.keys(e.tabs).forEach((n=>{const o=n;t&&(e.tabs[o].nativeRootPageOverrideEnabled=void 0),o!==e.activeTab?e.tabs[o].pages=[]:e.tabs[o].pages=e.tabs[o].pages.slice(-1)}))}),[]),r=(0,o.useCallback)(((t,o)=>{var r;const{mobileNative:a,TabbedRouterStore:i,currentUser:s}=e,c=B().default.state.currentSpaceStore,l=null==c?void 0:c.id;if(null!=a&&null!==(r=a.api)&&void 0!==r&&r.setCurrentSpaceInfo&&(ne().log({level:"info",from:"appActions",type:"SpaceSwitchingDebug",data:{message:"Web calling nativeAPI setCurrentSpaceInfo",spaceId:l}}),a.api.setCurrentSpaceInfo({spaceId:l,spaceViewId:null==t?void 0:t.id,userId:s.id,editable:(null==c?void 0:c.canEdit())??!0})),(0,mo().__)(e)){const e=e=>{if("web"!==e.type)return;const t={...e.queryParams},n=l&&(0,L().cj)(l);t.spaceId=n,e.queryParams=t,e.route.spaceId=n},t=Le().Xh(i.state);e(t.tabs.updates.rootPage),e(t.tabs.addPage.rootPage),void 0!==(null==o?void 0:o.id)&&n(t),i.setState(t)}Vo(e,void 0)}),[n,e]),i=(0,o.useCallback)((t=>{var o;null!==(o=e.mobileNative)&&void 0!==o&&null!==(o=o.api)&&void 0!==o&&o.setCurrentUserInfo&&e.mobileNative.api.setCurrentUserInfo({userId:null==t?void 0:t.id,loggedInUserIds:e.currentUser.loggedInUserIds});const r=!(0,mo().__)(e)||void 0===e.currentUser.id,{TabbedRouterStore:a}=e,i=Le().Xh(a.state);n(i,r),a.setState(i)}),[n,e]),s=(0,w().VK)((()=>B().default.state.currentUserStore),[]),c=(0,$t().D9)(s);(0,o.useEffect)((()=>{(null==s?void 0:s.id)!==(null==c?void 0:c.id)&&i(s)}),[i,s,c,t.isMobileNative,e.mobileNative]);const l=(0,w().VK)((()=>B().default.state.currentSpaceViewStore),[]),d=(0,$t().D9)(l);(0,o.useEffect)((()=>{(null==l?void 0:l.id)!==(null==d?void 0:d.id)&&r(l,d)}),[r,l,d,t.isMobileNative,e.mobileNative]);const u=(0,vo().E)("mab_debugging");return(0,o.useEffect)((()=>{uo().zd(u)}),[u]),(0,E.jsx)(wo,{})}function No(){var e;if(io().Z.getPreventScrollType()===ro().Z.None)if(Lt().sidebarOpenStore.state)fo().default.SidebarMobileScroller&&(null===(e=fo().default.SidebarMobileScroller.getNode())||void 0===e||e.scrollTo({top:0,behavior:"smooth"}));else if(fo().default.MenuScroller){var t;null===(t=fo().default.MenuScroller.getNode())||void 0===t||t.scrollTo({top:0,behavior:"smooth"})}else if(fo().default.MenuPageScroller){var n;null===(n=fo().default.MenuPageScroller.getNode())||void 0===n||n.scrollTo({top:0,behavior:"smooth"})}else if(fo().default.PageScroller){var o;null===(o=fo().default.PageScroller.getNode())||void 0===o||o.scrollTo({top:0,behavior:"smooth"})}}async function Oo(e,t){return t.currentUser.id===e?t:await Xn().x({environment:t,newCurrentUserId:e})}async function Do(e,t){let n=e;t&&(n=await Oo(t,e)),await So().xN(n)}function qo(e){_o().Z.setState({open:!0});const{query:t}=e;t&&To().default.setState({...To().default.state,currentTab:"all_pages",filter:t,limit:To().default.startLimit})}function Ko(e){(0,to().Y)("supportsNativeHome")&&e.device.isPhone?(zn().Hu({RouterStore:e.RouterStore,currentUserId:e.currentUser.id}),Mt().quickAddPage({environment:e,from:"mobile_bottom_bar",redirect:!0,quickAddParentOverride:{type:"space-private-pages"}})):Mt().quickAddPage({environment:e,from:"mobile_bottom_bar"}),On().nB(e,{itemName:"add_page"})}function Fo(e){const t=(0,a().O7)();(0,i().K)((()=>{const{device:e,mobileNative:n}=t;if(d().mc(t),u().Yh(t),n&&n.hideSplashscreen(),e.isMobile){const e=document.body.parentElement;e&&e.classList.add(h().aiP)}(0,v().pH)(t),s().rQ({device:e,config:p().default,cookieService:t.cookieService}),l().DM(r().locale),(0,c().yN)(window.location.href)})),function(){const e=(0,a().O7)(),t=(0,a().Fy)();(0,o.useEffect)((()=>{if(t.isMobileNative)return;let e;document.hasFocus()&&(e=setInterval((()=>{O()}),N),O());const n=()=>{e&&clearInterval(e),e=setInterval((()=>{O()}),N),O()},o=()=>{e&&clearInterval(e),e=void 0};return window.addEventListener("focus",n),window.addEventListener("blur",o),()=>{e&&clearInterval(e),window.removeEventListener("focus",n),window.removeEventListener("blur",o)}}),[t.isMobileNative,e])}(),function(){const e=(0,o.useRef)(!1),t=(0,a().O7)(),n=(0,o.useCallback)((async e=>{if(e.currentUser.id&&z().IX.size>0){const t=await K().callApi({eventName:"getTasks",environment:e,data:{taskIds:Array.from(z().IX.values())}});if("success"===t.type){const{results:n}=t.data,o=new Set(z().IX);for(const t of n)o.delete(t.id),t.status&&(0,F().I)({environment:e,eventName:t.eventName,response:t.status,userId:e.currentUser.id}),z().qb.emit(t.id,t),$.emit(t.eventName,t),"failure"!==t.state&&"success"!==t.state&&"dead"!==t.state&&"timeout_before_execution"!==t.state||z().IX.delete(t.id);if(o.size>0)for(const e of o.values())z().IX.delete(e)}}}),[]),r=(0,w().VK)((()=>{var e;return null===(e=B().default.state)||void 0===e||null===(e=e.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]),i=(0,o.useCallback)((async e=>{if(e.currentUser.id&&r){const t=await K().callApi({eventName:"getUserTasks",environment:e,data:{spaceId:r}});if("success"===t.type){for(const e of t.data.taskIds)z().IX.add(e);t.data.taskIds.length>0&&n(e)}}}),[n,r]),s=(0,o.useCallback)((()=>{const n=T().default.state.online;n&&!e.current&&i(t),e.current=n}),[t,i]);function c(e){"success"===e.state?W().Z.setStatus(e.request.blockId,void 0):"in_progress"===e.state||"not_started"===e.state?W().Z.setStatus(e.request.blockId,e.status):W().Z.setStatus(e.request.blockId,void 0)}function l(e){"success"===e.state?H().Z.setStatus(e.request.blockId,!1):"in_progress"===e.state||"not_started"===e.state?H().Z.setStatus(e.request.blockId,!0):H().Z.setStatus(e.request.blockId,!1)}(0,o.useEffect)((()=>{e.current=T().default.state.online;const o=setInterval((()=>n(t)),2e3);return i(t),T().default.addListener(s),$.addListener(q().A,c),$.addListener(D,l),()=>{clearInterval(o),T().default.removeListener(s),$.removeListener(q().A,c),$.removeListener(D,l)}}),[t,n,s,i])}(),function(){const e=(0,a().O7)(),t=(0,o.useCallback)((()=>{G().LH(e)}),[e]);(0,o.useEffect)((()=>(t(),Y().Z.addListener(t),()=>{Y().Z.removeListener(t)})),[t])}(),ee(),fe(),function(){const e=(0,a().O7)();(0,o.useEffect)((()=>{const{device:t}=e;"external"===(0,we().parseRoute)({url:window.location.href,isMobile:t.isMobile,baseUrl:p().default.domainBaseUrl,publicDomainName:p().default.publicDomainName,protocol:p().default.protocol,currentUrl:window.location.href}).name&&se().vC({message:"Mismatch between origin and baseUrl (dev).",showCancel:!1,keepFocus:!1,items:[{label:(0,E.jsx)(x()._H,{defaultMessage:"OK",id:"notionAppContainer.dialog.mismatchedOriginURL.okayButton.label"}),onAccept:()=>{const e=ke().O_({relativeUrl:ke().T1(window.location.href),baseUrl:p().default.domainBaseUrl}),t=ke().Qc(e);t.protocol=ke().Qc(window.location.href).protocol,window.location.href=ke().WU(t)}}]})}),[e])}(),function(){const e=(0,a().O7)();(0,o.useEffect)((()=>{Ce(e);const t=window.setInterval((()=>Ce(e)),_e);return()=>window.clearInterval(t)}),[e])}(),function(){const e=(0,a().O7)();(0,o.useEffect)((()=>{(0,Te().setEnvironment)(e)}),[e])}(),Ge(),Tt(),function(){const e=(0,a().O7)();(0,o.useEffect)((()=>{Nt(e);const t=window.setInterval((()=>Nt(e)),Zt().U6);return()=>window.clearInterval(t)}),[e])}(),function(){const e=(0,a().O7)(),t=(0,a().Fy)(),n=(0,w().VK)((()=>{const{currentUserStore:n,currentUserSettingsStore:o,currentUserRootStore:r}=B().default.state;if(!(e.currentUser.id&&n&&o&&r))return e.publicDomainUserId?{user_id:e.publicDomainUserId}:void 0;const a=r.getSpaceViewStores(),i=a.length>0&&a.every((e=>e.isReady()));if(!n.isDefined()||!o.isDefined()||!i)return;const s=Le().oA(a.map((e=>e.getSpaceId()))).map((t=>Q().Z.getData(e,{spaceId:t})));if(!s.every((e=>Boolean(e)||null===e)))return;const c=(0,v().ls)(s),l=o.getSettings();if(!l)return;if(void 0===Dt().subscriptionDataStoreInstance.state)return;const d={user_id:n.id,email:n.getEmail(),user_persona:l.persona,user_team_role:l.team_role,user_use_cases:l.use_cases,user_company_size:l.company_size,user_source:l.source,user_plan_type:c,user_subscription_tier:Dt().subscriptionDataStoreInstance.state.subscriptionTier,user_has_at_least_one_free_tier_space:(0,v().nZ)(s),time_zone:l.time_zone,locale:l.locale,preferred_locale:l.preferred_locale,signup_time:l.signup_time,app_version:t.version};return l.signup_time&&(d.created_at=Math.floor(l.signup_time/1e3)),t.desktopAppVersion&&(d.desktop_app_version=t.desktopAppVersion),t.mobileAppVersion&&(d.mobile_app_version=t.mobileAppVersion),l.used_desktop_web_app&&(d.used_desktop_web_app=l.used_desktop_web_app),l.used_mobile_web_app&&(d.used_mobile_web_app=l.used_mobile_web_app),l.used_mac_app&&(d.used_mac_app=l.used_mac_app),l.used_windows_app&&(d.used_windows_app=l.used_windows_app),l.used_ios_app&&(d.used_ios_app=l.used_ios_app),l.used_android_app&&(d.used_android_app=l.used_android_app),d}),[e,t],{useDeepEqual:!0});(0,o.useEffect)((()=>{n&&"none"!==n.user_plan_type&&qt(e,n)}),[e,n]);const r=void 0!==n;(0,o.useEffect)((()=>{const t=window.setTimeout((()=>{!r&&e.currentUser.id&&qt(e,{user_id:e.currentUser.id})}),5e3);return()=>{window.clearTimeout(t)}}),[e,r])}(),function(){const e=(0,a().O7)(),t=(0,w().VK)((()=>Ft().default.state.isLoaded),[]),n=(0,w().VK)((()=>Ft().default.state.isLoggingEnabled),[]);(0,o.useEffect)((()=>{t&&async function(){const t=await(0,v().cG)(e);await Kt().j2({config:p().default,isEnabled:n,deviceId:t,cookieService:e.cookieService,endpoint:Ft().default.state.endpoint})}()}),[e,t,n])}(),function(){const e=(0,a().O7)();(0,o.useEffect)((()=>{const t=t=>{Pt().Zm(e,t)},n=t=>{const n=(0,zt().x)(e.device),o=Le().w_(n,((n,o)=>(0,Wt().Z)(e,t,n)));o&&!{cut:!0,copy:!0,paste:!0}[o]&&Pt().dJ(e,t,o)};return window.addEventListener("keydown",n),window.addEventListener("cut",t),window.addEventListener("copy",t),window.addEventListener("paste",t),window.addEventListener("keypress",t),()=>{window.removeEventListener("keydown",n),window.removeEventListener("cut",t),window.removeEventListener("copy",t),window.removeEventListener("paste",t),window.removeEventListener("keypress",t)}}))}(),(0,Ht().Z)(),Xt(),function(){const e=(0,a().O7)(),t=(0,a().Fy)();(0,o.useEffect)((()=>{t.isElectron&&ce().setLogglyData(ne().clientLogglyEnvironmentData),e.mobileNative&&e.mobileNative.setLogglyData(ne().clientLogglyEnvironmentData)}),[t.isElectron,e.mobileNative])}(),function(){const e=(0,a().O7)();(0,o.useEffect)((()=>{Jt().wk({environment:e})}),[e])}(),function(){const e=(0,a().O7)();(0,o.useEffect)((()=>{if(e.device.isMobile){function t(){Qt().default.afterNextFlush((()=>{en().hQ(e)}))}return nn().default.addListener(t),on.addListener(t),tn().default.addListener(t),()=>{nn().default.removeListener(t),on.removeListener(t),tn().default.addListener(t)}}}),[e])}(),(0,rn().Z)(),(0,an().ZP)(),function(){const e=(0,a().O7)();(0,o.useEffect)((()=>{const{mobileNative:t}=e;t&&t.enableBridgeMetricsCollection(e,sn().default,P().default)}),[e])}(),function(){const e=(0,a().O7)();(0,o.useEffect)((()=>{function t(t){Ot().f7(e,{reason:t})}return Ut().showConfirmationDialogEventEmitter.addListener(t),()=>{Ut().showConfirmationDialogEventEmitter.removeListener(t)}}),[e])}(),function(){const e=(0,a().O7)();(0,o.useEffect)((()=>{let t,n=!document.hidden;function o(){e.device.isElectron||pe().Z.setState({...pe().Z.state,isVisible:!document.hidden});const o=!document.hidden;o!==n&&(n=o,pe().X.setState(o),clearTimeout(t),o&&(t=setTimeout((()=>{pe().X.setState(!1)}),cn)));const r=ae().W$(),a=r&&(Date.now()-r)/Zt().A0>=7;if(e.device.isBrowser&&!document.hidden&&(!r||a)&&T().default.getState().online){const t=e.AppUpdateStore;if(t.isSilentUpdate()){const n=t.state.appUpdate;ae().hC({environment:e,url:window.location.href,version:n.version,versionCreatedTime:n.versionCreatedTime})}}}return document.addEventListener("visibilitychange",o),o(),()=>{document.removeEventListener("visibilitychange",o)}}),[e])}(),function(){const{deviceType:e}=(0,a().Fy)(),t=(0,a().O7)(),n=t.currentUser.isLoggedIn();(0,o.useEffect)((()=>{if(!n)return;if("windows-desktop"!==e&&"mac-desktop"!==e)return;const o=async()=>{await ce().isMainTabOrWindow()&&K().callApi({eventName:"registerDesktopApp",environment:t,data:{deviceType:e}})};o();const r=window.setInterval((()=>{o()}),5*Zt().hM);return()=>{window.clearInterval(r)}}),[n,e,t])}(),Sn(),function(){const e=(0,a().O7)(),t=(0,o.useRef)(),n=(0,o.useRef)();(0,o.useEffect)((()=>{function o(){const o=nn().default.state,r="empty"===o.mode?void 0:o.multiSelection.start.store,a="empty"===o.mode?void 0:o.multiSelection.end.store;if(t.current===r&&n.current===a)return;if(t.current=r,n.current=a,t.current!==n.current)return;const i=wn().UQ();if(!i)return;const{rowIndex:s,columnIndex:c,simpleTableStore:l}=i.getProps();yn().n5({environment:e,rowIndex:s,columnIndex:c,simpleTableStore:l})}return nn().default.addListener(o),()=>{nn().default.removeListener(o),t.current=void 0,n.current=void 0}}))}(),function(){const e=(0,a().O7)(),t=(0,o.useCallback)((t=>{var n,o;const r={compressed:t.decodedBodySize!==t.encodedBodySize,local_cache_hit:0===t.transferSize,next_hop_protocol:t.nextHopProtocol,did_prefetch:"hit-match"===(null===(n=e.prefetchCache.getPrefetchAnalytic(`loadCachedPageChunk(${null===(o=B().default.state.mainEditorCurrentBlockStore)||void 0===o?void 0:o.id})`))||void 0===n?void 0:n.type)},a={dns_lookup:{startTime:t.domainLookupStart,endTime:t.domainLookupEnd},connection_establish:{startTime:t.connectStart,endTime:t.connectEnd},request_queued:{startTime:t.connectEnd,endTime:t.requestStart},response_wait:{startTime:t.requestStart,endTime:t.responseStart},response_download:{startTime:t.responseStart,endTime:t.responseEnd}};sn().default.DO_NOT_USE_measureLegacy({metricName:"load_cached_page_chunk.fetch",startTime:t.fetchStart,endTime:t.responseEnd},{environment:e,data:{...r,sub_metrics:{dns_lookup:a.dns_lookup.endTime-a.dns_lookup.startTime,connection_establish:a.connection_establish.endTime-a.connection_establish.startTime,request_queued:a.request_queued.endTime-a.request_queued.startTime,response_wait:a.response_wait.endTime-a.response_wait.startTime,response_download:a.response_download.endTime-a.response_download.startTime}}});for(const[i,{startTime:s,endTime:c}]of Object.entries(a))sn().default.DO_NOT_USE_measureLegacy({metricName:`load_cached_page_chunk.fetch.${i}`,startTime:s,endTime:c},{environment:e,data:r})}),[e]);(0,o.useEffect)((()=>{const e=new PerformanceObserver((n=>{const o=n.getEntries().find((e=>e.name.includes(`${p().default.api.http}/${kn}`)&&!e.name.endsWith("s")));o&&("resource"===o.entryType&&t(o),null==e||e.disconnect())}));return e.observe({type:"resource",buffered:!0}),()=>{e.disconnect()}}),[t])}(),In(),function(){const e=(0,a().O7)();(0,o.useEffect)((()=>{const t=()=>_n().updateConnectionState(e);return t(),T().default.addListener(t),()=>{T().default.removeListener(t)}}),[e])}(),function(){const e=(0,a().O7)();(0,o.useEffect)((()=>{e.defaultRecordCache.persistedRecordCache&&e.defaultRecordCache.persistedRecordCache.setEnvironment(e)}),[e])}(),function(){const e=(0,a().O7)(),t=(0,o.useRef)("none"),n=(0,o.useCallback)((e=>{const n=t.current;e!==n&&(t.current=e,"dragging"===e?un().Z.setState({isDragging:!0}):"dragging"===n&&un().Z.setState({isDragging:!1}))}),[]),r=(0,o.useCallback)((()=>{"none"===t.current&&n("touching")}),[n]),i=(0,o.useCallback)((()=>{n("none")}),[n]),s=(0,o.useCallback)((()=>{"touching"===t.current&&dn().isExpanded(dn().get())&&n("dragging")}),[n]);(0,o.useEffect)((()=>{if(e.device.isIOS)return window.addEventListener("touchstart",r),window.addEventListener("touchend",i),window.addEventListener("touchcancel",i),document.addEventListener("selectionchange",s),()=>{window.removeEventListener("touchstart",r),window.removeEventListener("touchend",i),window.removeEventListener("touchcancel",i),document.removeEventListener("selectionchange",s)}}),[e.device.isIOS,r,i,s]);const c=(0,o.useCallback)((()=>{Qt().default.afterNextFlush((()=>{ln().clearSavedSelectionXPosition()}))}),[]),l=(0,o.useCallback)((()=>{setTimeout((()=>{dn().get()||ln().clear({environment:e})}),0)}),[e]);(0,o.useEffect)((()=>(window.addEventListener("mousedown",c),e.device.isMobileBrowser&&document.addEventListener("focusout",l),()=>{window.removeEventListener("mousedown",c),document.removeEventListener("focusout",l)})),[e,c,l])}(),A(),(0,y().JD)(),M(),function(){const e=(0,a().O7)(),t=(0,a().Fy)(),n=(0,o.useRef)(!1),r=(0,o.useCallback)((()=>{"system"===G().VZ(e)&&Y().Z.emit()}),[e]),i=(0,w().VK)((()=>{var e;return null===(e=B().default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.isReady()}),[]);(0,o.useLayoutEffect)((()=>{!n.current&&i&&(r(),n.current=!0)}),[i,r]),(0,o.useEffect)((()=>{if(t.isAndroid&&e.mobileNative)e.mobileNative.updateReceiveApiHandlers({themeChanged:e=>r()});else{if(pn.addEventListener&&pn.removeEventListener)return pn.addEventListener("change",r),()=>{pn.removeEventListener("change",r)};if(pn.addListener&&pn.removeListener)return pn.addListener(r),()=>{pn.removeListener(r)}}}),[t.isAndroid,e,r])}(),jn(),function(){const e=p().default.isLocalhost||!1;(0,o.useEffect)((()=>{function t(t){if(!e)return;if(!t.data||"string"!=typeof t.data.type)return;const n=t.data.type;"webpackInvalid"===n?I().oV({label:(0,E.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,E.jsx)("span",{style:{paddingRight:10},children:"Webpack Compiling"}),(0,E.jsx)("img",{src:"/images/favicon-local.ico",className:"loading-spinner",style:{display:"inline-block"}})]}),position:"top",durationMs:"keep"}):"webpackOk"!==n&&"webpackStillOk\t"!==n&&"webpackWarnings"!==n||I().rN()}return window.addEventListener("message",t),()=>{window.removeEventListener("message",t)}}),[e])}();const n=(0,V().hZ)();return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(Bo,{}),t.device.isElectron&&(0,E.jsx)(zo,{}),n&&(0,E.jsx)(Wo,{}),(0,E.jsx)(g,{}),(0,E.jsx)(S,{})]})}function zo(){return function(){const e=(0,a().O7)(),t=(0,x().YB)(),n=(0,w().VK)((()=>({observedWidth:Lt().sidebarSizeObserver.rect.state.width,targetWidth:Lt().sidebarWidthStore.state,isExpanded:Lt().sidebarExpandedStore.state,resizing:Lt().sidebarResizingStore.state,isMouseEntered:Lt().sidebarMouseEnteredStore.state})),[]),r=e.currentUser.isLoggedIn(),i=(0,re().formatVersion)(ce().getDesktopVersion()),[s,c]=(0,o.useState)(void 0);(0,o.useEffect)((()=>{s&&ce().windowSidebarState.set({isLoggedIn:r,...n})}),[n,r,s]);const l=(0,w().VK)((()=>jt().default.getState().enabled),[]);(0,o.useEffect)((()=>{ce().setIsMediaActive(l)}),[l]),(0,o.useEffect)((()=>{let e;e=r?n.isExpanded?"expanded":"collapsed":"disabled",ce().sidebarState.set(e)}),[n.isExpanded,r]);const d=(0,w().VK)((()=>{var e,t,n;return{currentUserId:null===(e=B().default.state.currentUserStore)||void 0===e?void 0:e.id,currentSpaceId:null===(t=B().default.state.currentSpaceStore)||void 0===t?void 0:t.getSpaceId(),currentPageId:null===(n=B().default.state.mainEditorCurrentBlockStore)||void 0===n?void 0:n.id}}),[]);(0,o.useEffect)((()=>{ce().setAppStoreState(d)}),[d]);const u=(0,o.useCallback)(((t,n,o)=>{v().K4(e,n,o)}),[e]);(0,o.useEffect)((()=>ce().track.addListener(u)),[u]);const m=(0,o.useCallback)(((t,n)=>{n.forEach((t=>{v().j({environment:e,event:t})}))}),[e]);(0,o.useEffect)((()=>ce().trackBatched.addListener(m)),[m]);const f=(0,o.useCallback)(((e,t)=>{c(t)}),[]);(0,o.useEffect)((()=>{if(void 0===s||window.location.href.includes("blank"))return;const e=()=>{pe().Z.update((e=>({...e,isVisible:!document.hidden&&s})))};return e(),document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}}),[s]),(0,o.useEffect)((()=>(ce().isActiveTab.get().then((e=>{c(e)})),ce().isActiveTab.addListener(f))),[f]);const g=(0,o.useCallback)(((e,t)=>{void 0===t.isShowingTabBar&&(t.isShowingTabBar=!0),Rt().default.setState(t)}),[]);(0,o.useEffect)((()=>{var e;return null===(e=ce().electronAppFeatures.get())||void 0===e||e.then((e=>{Rt().default.setState(e)})),ce().electronAppFeatures.addListener(g)}),[g]);const h=(0,o.useCallback)(((e,t)=>{At().default.update((e=>({...e,tabs:t})))}),[]);(0,o.useEffect)((()=>ce().electronTabs.addListener(h)),[h]);const b=(0,o.useCallback)(((e,t)=>{At().default.update((e=>({...e,currentTab:t})))}),[]);(0,o.useEffect)((()=>ce().electronCurrentTab.addListener(b)),[b]);const S=(0,o.useCallback)(((e,t)=>{At().default.update((e=>{const n=new Set(e.unauthorizedIframeUrls??[]);n.add(t);const o=Array.from(n);return{...e,unauthorizedIframeUrls:o}}))}),[]);(0,o.useEffect)((()=>ce().setUnauthorizedIframeUrls.addListener(S)),[S]);const y=(0,o.useCallback)((t=>{Mt().setExpand({environment:e,isExpanded:!n.isExpanded,from:"electron_listener",saveDetailsSidebarPreference:!1})}),[e,n.isExpanded]);(0,o.useEffect)((()=>ce().sidebarState.addToggleListener(y)),[y]);const k=(0,o.useCallback)(((e,t)=>{t?Mt().open({fromElectron:!0}):Mt().close()}),[]);(0,o.useEffect)((()=>ce().sidebarState.addSetSidebarOpenListener(k)),[k]);const C=(0,o.useCallback)(((e,t)=>{Lt().sidebarExpandedStore.setState(t.isExpanded),Lt().sidebarWidthStore.setState(t.targetWidth)}),[]),I=(0,o.useCallback)((e=>{Vt().Z.update((e=>({...e,open:!e.open})))}),[]);(0,o.useEffect)((()=>ce().tabSpacesState.addToggleMenuListener(I)),[I]);const _=(0,o.useCallback)(((e,t)=>{Vt().Z.update((e=>({...e,tabSpacesState:t})))}),[]);(0,o.useEffect)((()=>ce().tabSpacesState.addListener(_)),[_]),(0,o.useEffect)((()=>ce().windowSidebarState.addListener(C)),[C]),(0,o.useEffect)((()=>{!async function(){if(void 0===i)return;const t=await K().callApi({eventName:"isDesktopVersionCompatible",environment:e,data:{desktopVersion:i}});"success"!==t.type||t.data.compatible||window.location.replace(p().default.domainBaseUrl+t.data.redirect)}()}),[i,e]),(0,o.useEffect)((()=>ce().performShortcut.addListener(((t,n)=>{Pt().Zm(e,n)}))),[e]);const T=(0,w().VK)((()=>{if(P().default.checkGate({gateName:"desktop_close_confirmation_dialog"})){const e=(0,Ut().getUserControlledCloseConfirmationDialogReason)();if(e)return{analytics_id:e,localized_message:t.formatMessage(Et[e])}}}),[t]);(0,o.useEffect)((()=>{ce().setCloseConfirmationDialogReason(T)}),[T])}(),null}function Wo(){return(0,V().qq)(),null}},850675:(e,t,n)=>{n.r(t),n.d(t,{default:()=>na});var o=n(667294),r=()=>n(601864),a=()=>n(206489),i=()=>n(340335),s=()=>n(146947),c=()=>n(788860),l=()=>n(76254),d=(n(267602),n(653476),()=>n(565630)),u=()=>n(513670),p=()=>n(708536),m=n(785893);function f(e){const t=(0,o.useRef)(new Map),n=(0,o.useCallback)((()=>{const n=Array.from(t.current.values()).filter((e=>e.isSpawned)),o=n.length-e.maxPreferredIFrames;if(o<=0)return;const r=n.filter((e=>!e.isVisible));r.sort(((e,t)=>e.latestTimestamp-t.latestTimestamp));for(const e of r.slice(0,o))e.isSpawned=!1,e.onVisibilityChange(!1)}),[e.maxPreferredIFrames]),r=(0,o.useCallback)((e=>{for(const n of e){if(!(n.target instanceof HTMLElement))continue;const e=t.current.get(n.target);e&&(e.isVisible=n.isIntersecting,e.latestTimestamp=n.time,e.isVisible&&!e.isSpawned&&(e.isSpawned=!0,e.onVisibilityChange(!0)))}n()}),[n]),a=(0,o.useRef)(void 0!==window.IntersectionObserver?new IntersectionObserver(r):null);(0,o.useEffect)((()=>()=>{a.current&&(a.current.disconnect(),a.current=null)}),[]);const i=(0,d().D9)(e.maxPreferredIFrames);(0,o.useEffect)((()=>{i&&e.maxPreferredIFrames<i&&n()}),[n,e.maxPreferredIFrames,i]);const s=(0,o.useMemo)((()=>({track:(e,n)=>{a.current?(t.current.set(e,{isVisible:!1,isSpawned:!1,latestTimestamp:0,onVisibilityChange:u().Ds(n,50)}),a.current.observe(e)):p().uf.track(e,n)},untrack:e=>{a.current?(a.current.unobserve(e),t.current.delete(e)):p().uf.untrack(e)}})),[]);return(0,m.jsx)(p().Mq.Provider,{value:s,children:e.children})}function g(e){let t=e.isMobile?10:50;return e.ramSizeInGB&&(t=Math.floor(2*e.ramSizeInGB)),{maxPreferredIFrames:t}}var v=()=>n(504008),h=()=>n(219727),b=()=>n(279865),S=()=>n(150266),y=()=>n(205228),w=()=>n(594546),k=()=>n(749826);function x(){return 1}function C(e){let{id:t,targetRenderPhase:n="all",samplePercent:r=x(),children:a}=e;const i=(0,h().O7)(),s=(0,o.useCallback)(((e,t,o,a,s,c)=>{(0,S().lB)(r)&&("all"!==n&&t!==n||w().K4(i,`${b().Pu}.${e}`,{time:o,render_phase:t}))}),[i,n,r]),[c]=(0,o.useState)(v().Z.withListenerIgnored((()=>k().default.checkGate({gateName:"client-performance-profiler"}))));return c?(0,m.jsx)(o.Profiler,{id:t,onRender:s,children:a}):(0,m.jsx)(m.Fragment,{children:a})}var I=()=>n(718959),_=()=>n(341643);function T(){return(0,_().hZ)()?(0,m.jsx)(_().q9,{}):null}var P=()=>n(494488),j=()=>n(680146),U=()=>n(568017),E=()=>n(231077),M=()=>n(306743),L=()=>n(906651),R=()=>n(765513),A=()=>n(969798);function V(e){let{error:t,errorInfo:n}=e;const r=(0,h().O7)(),a=(0,o.useRef)();void 0===a.current&&(console.error("Client crash during React render:",t),a.current=j().rn(t,{from:"Router",type:"ClientCrash",data:{miscDataToConvertToString:n}}),E().navigationReady(!1));const i=a.current,s=()=>{M().j_({environment:r,from:"page_error"})};return(0,m.jsxs)("div",{style:Z,children:[(0,A().H)({width:42,height:42}),(0,m.jsxs)("div",{style:B,children:[(0,m.jsx)("div",{children:(0,m.jsx)(c()._H,{defaultMessage:"Oops! Something went wrong.",id:"router.renderErrorPage.message.part1"})}),(0,m.jsx)("div",{children:(0,m.jsx)(c()._H,{defaultMessage:"Please refresh and try again or <textlink>message support</textlink>.",id:"router.renderErrorPage.message.part2",values:{textlink:e=>(0,m.jsx)(R().Z,{onClick:s,children:e})}})}),i&&(0,m.jsx)("div",{style:N,children:(0,m.jsx)(c()._H,{defaultMessage:"Error ID: {errorId}",id:"router.renderErrorPage.message.errorId",values:{errorId:i.slice(0,8)}})})]}),(0,m.jsx)(L().Z,{isLarge:!0,onClick:()=>window.location.reload(),children:(0,m.jsx)(c()._H,{defaultMessage:"Refresh",id:"router.renderErrorPage.reloadButton.label"})})]})}const Z={width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",paddingBottom:100,...(0,P().N7)(s().locale)},B={fontSize:14,textAlign:"center",marginTop:6,marginBottom:12,color:U().ZP.uiGray},N={fontSize:10,marginTop:8};var O=()=>n(142735),D=()=>n(846550),q=()=>n(758824),K=()=>n(502184),F=()=>n(492522),z=()=>n(417622),W=()=>n(105381),H=()=>n(897606),$=()=>n(312578);const G=function(){const e=(0,O().Kw)(W().Z);return(0,m.jsx)(n(708518).Z,{open:e.open,render:()=>(0,m.jsx)(J,{}),overlayZIndex:F()._})};function Y(e){return{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minWidth:180,padding:"18px 24px 20px",textAlign:"center",maxWidth:e.device.isMobile?"300px":"100%"}}function X(e){return{display:"flex",alignItems:"center",fontSize:14,color:e.mediumTextColor}}function J(){const e=(0,D().Fg)(),t=(0,h().O7)(),n=(0,O().Kw)(W().Z),{targetRecordId:o}=n,r=(0,O().VK)((()=>function(e){return void 0!==e&&Boolean(H().Z.state[e])}(o)),[o]);return n.open?(0,m.jsxs)("div",{style:Y(t),children:[(0,m.jsxs)("div",{style:X(e),children:[n.message,(0,m.jsx)($().Z,{style:{marginLeft:6}})]}),r&&o&&(0,m.jsx)(z().Z,{targetRecordId:o,style:{marginTop:10}})]}):null}var Q=()=>n(631842),ee=()=>n(247724),te=()=>n(355435),ne=()=>n(725751),oe=()=>n(688381);function re(e){let{children:t}=e;const n=(0,h().O7)(),r=(0,D().Fg)();(0,o.useEffect)((()=>{const{mobileNative:e}=n;null==e||e.markTransitionReady({type:"mount"})}),[n]);const a="light"===r.mode?ee().MsS:ee().Xj_,i=(0,_().hZ)(),c=(0,_().J4)(),l=(0,_().DW)(),d=(0,O().VK)((()=>{var e;return Boolean(null===(e=ne().default.state.preferences)||void 0===e?void 0:e.isVibrancyEnabled)}),[]),u=(0,O().VK)((()=>!n.device.isMobile&&oe().Z.state.openModals.size>0),[n]),p=(0,O().VK)((()=>k().default.checkGate({gateName:"z_indexes_relative"})?"z-indexes-relative":""),[]),f={inert:u?"true":null},g=(0,D().yK)((e=>({root:{...(0,P().N7)(s().locale),color:e.regularTextColor,WebkitFontSmoothing:"auto",backgroundColor:d?"rgba(0, 0, 0, 0)":e.contentBackground,transition:"height 0.1s ease",...i&&c&&l&&{height:`calc(100% - ${te().tL}px)`}},content:{height:"100%"}})),[i,c,l,d]);return(0,m.jsxs)("div",{style:g.root,className:["notion-app-inner",a,p].join(" "),children:[(0,m.jsx)("div",{style:g.content,...f,children:t}),(0,m.jsx)(K().Z,{}),(0,m.jsx)(q().Z,{}),(0,m.jsx)(G,{}),(0,m.jsx)(Q().j,{})]})}var ae=()=>n(772538),ie=()=>n(732811),se=()=>n(698422),ce=()=>n(403721),le=()=>n(331749),de=()=>n(572680),ue=()=>n(836273),pe=()=>n(306164),me=()=>n(282017),fe=()=>n(332087),ge=()=>n(543172),ve=()=>n(448768),he=()=>n(916673),be=()=>n(465755),Se=()=>n(418216),ye=()=>n(454393),we=()=>n(824034),ke=()=>n(488468),xe=()=>n(497065),Ce=()=>n(806539),Ie=()=>n(543573),_e=()=>n(13750),Te=()=>n(348141),Pe=()=>n(632599),je=()=>n(696459),Ue=()=>n(824462);var Ee=()=>n(373701);function Me(e){let{payload:t}=e;const n=(0,h().O7)(),[r,a]=(0,o.useState)(t?{type:"unconfirmed"}:{type:"error"}),i=(0,o.useCallback)((async()=>{if(!t)return void a({type:"error"});a({type:"loading"});const e=await async function(e){let{environment:t,payload:n}=e;const o=await Ue().callApi({eventName:"unsubscribeFromEmails",environment:t,data:{payload:n}});return"success"===o.type?{type:"success",spaceName:o.data.spaceName}:{type:"error"}}({environment:n,payload:t});a("error"===e.type?{type:"error"}:{type:"confirmed",spaceName:e.spaceName})}),[n,t]),s=(0,D().yK)((()=>({confirmUnsubscribeDescription:{marginBottom:10}})),[]);switch(r.type){case"loading":return(0,m.jsx)(Ee().Z,{children:(0,m.jsx)(c()._H,{defaultMessage:"Loading…",id:"confirmUnsubscribePage.loadingMessage"})});case"unconfirmed":return(0,m.jsxs)(Ee().Z,{children:[(0,m.jsx)("div",{style:s.confirmUnsubscribeDescription,children:(0,m.jsx)(c()._H,{defaultMessage:"Are you sure you want to unsubscribe from this list?",id:"unsubscribeFromEmails.workspace.confirmUnsubscribeDescription"})}),(0,m.jsx)(L().Z,{isLarge:!0,onClick:i,analyticsName:"unsubscribe_confirm",children:(0,m.jsx)(c()._H,{id:"confirmUnsubscribePage.confirmButton",defaultMessage:"Unsubscribe"})})]});case"confirmed":return(0,m.jsx)(Ee().Z,{children:(0,m.jsx)(c()._H,{defaultMessage:"You have successfully unsubscribed from emails for {workspaceName}",values:{workspaceName:(0,m.jsx)("b",{children:r.spaceName})},id:"unsubscribeFromEmails.workspace.message"})});case"error":return(0,m.jsx)(Ee().Z,{children:(0,m.jsx)(c()._H,{id:"confirmUnsubscribePage.errorMessage",defaultMessage:"Could not unsubscribe."})});default:(0,je().t1)(r)}}var Le=()=>n(677559);const Re=new(Le().Ss)("desktopEmailConfirmPage",(()=>n.e(61500).then(n.bind(n,261778)))),Ae=(0,Le().kF)(Re,(e=>e.default));var Ve=()=>n(580708),Ze=()=>n(416277),Be=()=>n(926410);function Ne(e){const{preventFrontRedirect:t}=e,n=(0,h().O7)(),{pathname:o,search:r,hash:a}=window.location;if(!t&&(0,Be().XR)(n,o)){const e=r.length>0?`${r}&${Ve().AM}=1`:`?${Ve().AM}=1`;return window.location.href=o+e+a,null}return(0,m.jsx)(Ze().TG,{isSignup:!n.currentUser.isLoggedIn()})}var Oe=()=>n(169158);const De=function(e){const t={position:"absolute",top:0,left:0,bottom:0,right:0};return(0,h().O7)().currentUser.isLoggedIn()?(0,m.jsx)("div",{style:t,children:(0,m.jsx)(n(690122).Z,{style:{width:"100%",height:"100%"},spinnerSize:Oe().T,showSpinnerTimeout:500})}):null};var qe=()=>n(951113),Ke=()=>n(729775);const Fe=function(e){let{redirect:t,callbackType:n}=e;const r=(0,D().Fg)(),a=(0,h().O7)();return(0,o.useEffect)((()=>{ze({redirect:t,environment:a,callbackType:n})}),[a,t,n]),(0,m.jsxs)(Ee().Z,{children:[(0,m.jsx)("div",{style:{color:r.regularTextColor},children:"nativemailredirect"===n?(0,m.jsx)(c()._H,{id:"webApp.redirectingToMailDesktop.message",defaultMessage:"Redirecting to your Notion Mail app…"}):"nativecalendarredirect"===n?(0,m.jsx)(c()._H,{id:"webApp.redirectingToCalendarDesktop.message",defaultMessage:"Redirecting to your Notion Calendar app…"}):(0,m.jsx)(c()._H,{defaultMessage:"Redirecting to your Notion app…",id:"webApp.redirectingToDesktop.message"})}),(0,m.jsx)(Ke().Z,{onClick:()=>ze({redirect:t,environment:a,callbackType:n}),style:{maxWidth:300,textAlign:"center",textDecoration:"underline",color:r.lightTextColor},children:(0,m.jsx)(c()._H,{defaultMessage:"If you weren't redirected, click here.",id:"webApp.redirectingToDesktop.directLink.message"})}),(0,m.jsx)(Ke().Z,{href:t,style:{maxWidth:300,textAlign:"center",textDecoration:"underline",color:U().ZP.uiGray},children:(0,m.jsx)(c()._H,{defaultMessage:"Or, continue in your browser",id:"webApp.redirectingToDesktop.continueInBrowser.message"})})]})};function ze(e){let{redirect:t,environment:n,callbackType:o}=e;xe().RX({url:t,environment:n,callbackType:o})}var We=()=>n(13382),He=()=>n(752127);function $e(){const e=(0,h().O7)();return(0,ie().K)((()=>{const t=ve().u5({schemeUrl:window.location.href,baseUrl:y().default.domainBaseUrl});He().D({environment:e,url:t}),We().vq(),xe().c4({environment:e,url:ue()._j.root,redirect:!0})})),null}var Ge=()=>n(985338),Ye=()=>n(772529),Xe=()=>n(170210),Je=()=>n(876822);function Qe(e){let{children:t}=e;const n=(0,h().O7)(),o=(0,D().Fg)(),r=(0,O().VK)((()=>{var e;const{mainEditorCurrentBlockStore:t}=Je().default.state,r=(0,Ye().WE)(t),a=n.device.isPhone;return{width:"100vw",height:"100%",position:"relative",display:"flex",flex:1,background:Boolean(null===(e=ne().default.state.preferences)||void 0===e?void 0:e.isVibrancyEnabled)?"rgba(0, 0, 0, 0)":r?(0,Xe().$1)({theme:o,isPhone:a}):o.contentBackground}}),[n,o]);return(0,m.jsx)(Ge().Z,{style:r,children:t})}var et=()=>n(929465),tt=()=>n(447317);function nt(){const e=(0,h().O7)(),t=(0,O().VK)((()=>I().Pw(e)),[e]),n=(0,O().VK)((()=>I().h1(e).shouldShowError),[e]),o=(0,O().Kw)(Je().default),r=I()._O(e);return(0,m.jsxs)(Qe,{children:[t&&!n&&r&&(0,m.jsx)(tt().y,{parentStore:t,quickSearchMode:!0}),"rendered"===o.renderPhase&&(0,m.jsx)(et().T,{})]})}const ot=new(Le().Ss)("CreatorProfile",(()=>Promise.all([n.e(62743),n.e(52774),n.e(90698),n.e(84885),n.e(37358),n.e(5242),n.e(7312),n.e(90424),n.e(81580),n.e(84325),n.e(31189),n.e(69343),n.e(46293),n.e(27856),n.e(62789),n.e(45598),n.e(1055),n.e(2971),n.e(80741),n.e(72586),n.e(53335),n.e(71896),n.e(46616),n.e(54940),n.e(49396),n.e(98721),n.e(98032),n.e(57229),n.e(63707),n.e(86609),n.e(91253),n.e(4642),n.e(5006),n.e(6612),n.e(61171),n.e(23179),n.e(75377),n.e(31020),n.e(2942),n.e(73682),n.e(58591),n.e(54803),n.e(1953),n.e(10216),n.e(58565),n.e(69197),n.e(42055),n.e(38739),n.e(44751),n.e(81567),n.e(51521),n.e(48005),n.e(60613)]).then(n.bind(n,568650)))),rt=(0,Le().kF)(ot,(e=>e.CreatorProfile)),at=new(Le().Ss)("BlankPage",(async()=>Promise.all([n.e(62743),n.e(37358),n.e(25350),n.e(31020),n.e(22759),n.e(42941),n.e(72802),n.e(88430),n.e(92434)]).then(n.bind(n,365613)))),it=(0,Le().kF)(at,(e=>e.BlankPage));var st=()=>n(449866);const ct=new(Le().Ss)("Onboarding",(async()=>Promise.all([n.e(62743),n.e(90698),n.e(84885),n.e(17100),n.e(39879),n.e(2971),n.e(80741),n.e(72586),n.e(53335),n.e(71896),n.e(46616),n.e(54940),n.e(49396),n.e(98721),n.e(98032),n.e(57229),n.e(63707),n.e(86609),n.e(5006),n.e(20343),n.e(14733),n.e(81780),n.e(3955),n.e(67053)]).then(n.bind(n,560111)))),lt=(0,Le().kF)(ct,(e=>e.Onboarding)),dt=new(Le().Ss)("settingsConsole",(async()=>await Promise.all([n.e(62743),n.e(52774),n.e(5242),n.e(90424),n.e(81580),n.e(84325),n.e(2971),n.e(53335),n.e(71896),n.e(46616),n.e(86609),n.e(91253),n.e(4642),n.e(6612),n.e(61171),n.e(23179),n.e(75377),n.e(31020),n.e(2942),n.e(58591),n.e(54803),n.e(1953),n.e(10216),n.e(73207)]).then(n.bind(n,116327)))),ut=(0,Le().kF)(dt,(e=>e.OrganizationSettingsConsole));var pt=()=>n(448755);const mt=new(Le().Ss)("githubStudentPack",(()=>Promise.all([n.e(62743),n.e(54882),n.e(42061)]).then(n.bind(n,555956)))),ft=(0,Le().kF)(mt,(e=>e.default)),gt=new(Le().Ss)("LocalizedTemplates",(async()=>{const{default:e}=await Promise.all([n.e(62743),n.e(17100),n.e(2971),n.e(53335),n.e(46616),n.e(43184),n.e(35332),n.e(58461),n.e(83258),n.e(51521),n.e(54801)]).then(n.bind(n,12157));return{LocalizedTemplates:e}})),vt=(0,Le().kF)(gt,(e=>e.LocalizedTemplates)),ht={AddAnotherAccountLoginPage:new(Le().Ss)("AddAnotherAccountLoginPage",(async()=>await Promise.all([n.e(62743),n.e(37358),n.e(25350),n.e(22759),n.e(42941),n.e(72802),n.e(22787)]).then(n.bind(n,688693))))},bt=(0,Le().kF)(ht.AddAnotherAccountLoginPage,(e=>e.default));var St=()=>n(142730),yt=()=>n(616728);const wt=new(Le().Ss)("StartupsApplication",(async()=>Promise.all([n.e(62743),n.e(54882),n.e(25606)]).then(n.bind(n,960766)))),kt=(0,Le().kF)(wt,(e=>e.default)),xt={LennyApplication:new(Le().Ss)("LennyApplication",(()=>Promise.all([n.e(62743),n.e(54882),n.e(1982)]).then(n.bind(n,572282))))},Ct=(0,Le().kF)(xt.LennyApplication,(e=>e.LennyApplication));var It=()=>n(826955);const _t=new(Le().Ss)("StudentGroupSignup",(async()=>Promise.all([n.e(62743),n.e(54882),n.e(16928)]).then(n.bind(n,173134)))),Tt=(0,Le().kF)(_t,(e=>e.default));var Pt=()=>n(223248),jt=()=>n(707513),Ut=()=>n(666414),Et=()=>n(661297),Mt=()=>n(67961),Lt=()=>n(383694);const Rt=function(e){const{teamStore:t}=e,n=(0,h().O7)(),{teamName:o}=(0,O().VK)((()=>({teamName:t.getName()})),[t]),r=(0,D().yK)((e=>({buttonContainer:{marginTop:15,display:"flex",justifyContent:"space-between"},container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"},title:{fontWeight:jt().Ue.semibold,fontSize:20,margin:10},subtitle:{color:e.mediumTextColor,fontSize:18,padding:12},divider:{maxWidth:280},rightButton:{fontWeight:jt().Ue.semibold,marginLeft:10}})),[]);return(0,m.jsxs)("div",{style:r.container,children:[(0,m.jsx)(Lt().p,{store:t,disabled:!0,size:55}),(0,m.jsx)("div",{style:r.title,children:(0,m.jsx)(c()._H,{id:"teamInviteLinkJoinPage.page.title",defaultMessage:"You've been invited to join {teamName}",values:{teamName:o}})}),(0,m.jsx)("div",{style:r.subtitle,children:(0,m.jsx)(c()._H,{id:"teamInviteLinkJoinPage.page.subtitle",defaultMessage:"You can access the content in the teamspace if you join the teamspace."})}),(0,m.jsxs)("div",{style:r.buttonContainer,children:[(0,m.jsx)(L().Z,{isLarge:!0,onClick:async()=>{const e=n.currentUser.id;if(!e)return;const o={type:"member",entity_type:"user",user_id:e};await Pt().um({environment:n,userId:e,teamStore:t,user:o}),be().Ph(n,{store:t,selection:"yes"})},children:(0,m.jsx)(c()._H,{id:"teamInviteLinkJoinPage.joinTeam.label",defaultMessage:"Join teamspace"})}),(0,m.jsx)(Et().Z,{style:r.rightButton,onClick:async()=>{be().Ph(n,{store:t,selection:"no"}),await Pt().Id({environment:n})},children:(0,m.jsx)(c()._H,{id:"teamInviteLinkJoinPage.backToMyContentButton.label",defaultMessage:"Back to my content"})})]}),(0,m.jsx)(Ut().Z,{size:48,innerStyle:r.divider}),(0,m.jsx)(Mt().Z,{isSmall:!0,children:(0,m.jsx)(c()._H,{id:"teamInviteLinkJoinPage.contact.message",defaultMessage:"Please contact your workspace owner for any questions."})})]})};function At(e){const{teamStore:t,teamName:n,onRequestClick:o}=e,r=(0,h().O7)(),a=(0,D().yK)((e=>({buttonContainer:{marginTop:15,display:"flex",justifyContent:"space-between"},container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"},title:{fontWeight:jt().Ue.semibold,fontSize:20,margin:10},subtitle:{color:e.mediumTextColor,fontSize:18},divider:{maxWidth:280},rightButton:{fontWeight:jt().Ue.semibold,marginLeft:10}})),[]);return(0,m.jsxs)("div",{style:a.container,children:[(0,m.jsx)(Lt().p,{store:t,disabled:!0,size:55}),(0,m.jsx)("div",{style:a.title,children:(0,m.jsx)(c()._H,{id:"teamInviteLinkRequestPage.requestAccess.title",defaultMessage:"Request access to {teamName}",values:{teamName:n??Vt()}})}),(0,m.jsx)("div",{style:a.subtitle,children:(0,m.jsx)(c()._H,{id:"teamInviteLinkRequestPage.requestAccess.subtitle",defaultMessage:"You can access this teamspace if a teamspace owner approves your request."})}),(0,m.jsxs)("div",{style:a.buttonContainer,children:[(0,m.jsx)(L().Z,{isLarge:!0,onClick:o,children:(0,m.jsx)(c()._H,{id:"teamInviteLinkRequestPage.requestAccess.label",defaultMessage:"Request access"})}),(0,m.jsx)(Et().Z,{isLarge:!0,style:a.rightButton,onClick:async()=>{await Pt().Id({environment:r})},children:(0,m.jsx)(c()._H,{id:"teamInviteLinkRequestPage.backToMyContentButton.label",defaultMessage:"Back to my content"})})]}),(0,m.jsx)(Ut().Z,{size:48,innerStyle:a.divider}),(0,m.jsx)(Mt().Z,{isSmall:!0,children:(0,m.jsx)(c()._H,{id:"teamInviteLinkRequestPage.contact.message",defaultMessage:"Please contact your workspace owner for any questions."})})]})}function Vt(){return(0,m.jsx)(c()._H,{id:"teamInviteLinkRequestPage.privateTeamspace.label",defaultMessage:"Private Teamspace"})}const Zt=function(e){const{teamStore:t}=e,[r,a]=(0,o.useState)(!1),{teamName:i}=(0,O().VK)((()=>({teamName:t.getName()})),[t]);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(At,{teamStore:t,teamName:i,onRequestClick:()=>a(!0)}),(0,m.jsx)(n(450194).Z,{teamStore:t,teamName:i??Vt(),teamId:t.id,isModalOpen:r,onDismiss:()=>a(!1)})]})};function Bt(e){const{teamAccessLevel:t,teamStore:n}=e;switch(t){case"open":return(0,m.jsx)(Rt,{teamStore:n});case"closed":case"private":return(0,m.jsx)(Zt,{teamStore:n})}}const Nt=function(e){const{teamId:t}=e,r=(0,h().O7)(),a=(0,O().VK)((()=>new(It().zX)(r,{table:pe().e0,id:t})),[r,t]),[{value:i}]=(0,n(801812).r5)((async()=>await Pt().Ng({environment:r,teamId:t})),[r,t]);(0,o.useEffect)((()=>{!0===(null==i?void 0:i.isValidTeamRequest)&&null!=i&&i.isTeamMember&&(async()=>{var e;const t=null===(e=r.currentUser)||void 0===e?void 0:e.id;t&&a&&await Pt().t_({environment:r,userId:t,teamStore:a})})()}),[r,a,i]);const s=(0,D().yK)((()=>({container:{display:"flex",justifyContent:"center",height:"100%"}})),[]);return i?(0,m.jsx)("div",{style:s.container,children:i.isValidTeamRequest?(0,m.jsx)(Bt,{teamStore:a,teamAccessLevel:i.teamAccessLevel}):"nonSpaceMember"===i.invalidRequestReason?(0,m.jsx)(pt().I,{route:{name:"teamsInvite",teamId:t},publicPageData:void 0}):(0,m.jsx)(pt().I,{route:{name:"notFound"},publicPageData:void 0})}):null};var Ot=()=>n(106502);const Dt=new(Le().Ss)("aiInferenceTranscript",(()=>Promise.all([n.e(62743),n.e(52774),n.e(90698),n.e(84885),n.e(37358),n.e(5242),n.e(7312),n.e(90424),n.e(81580),n.e(84325),n.e(31189),n.e(69343),n.e(46293),n.e(2971),n.e(80741),n.e(72586),n.e(53335),n.e(71896),n.e(46616),n.e(54940),n.e(49396),n.e(98721),n.e(98032),n.e(57229),n.e(63707),n.e(86609),n.e(91253),n.e(4642),n.e(5006),n.e(6612),n.e(61171),n.e(23179),n.e(75377),n.e(31020),n.e(2942),n.e(73682),n.e(58591),n.e(54803),n.e(1953),n.e(10216),n.e(58565),n.e(69197),n.e(42055),n.e(38739),n.e(44751),n.e(81567),n.e(67019),n.e(74324),n.e(94543)]).then(n.bind(n,939198)))),qt=(0,Le().kF)(Dt,(e=>e.FullPageAI));var Kt=()=>n(650996),Ft=()=>n(743959);function zt(e){return(0,m.jsx)("div",{id:"test-customer-io",style:{width:334,height:200,position:"absolute",bottom:64,right:21,zIndex:1,display:e?void 0:"none"}})}const Wt=function(){const e=(0,h().O7)(),{currentUser:t}=e,n=(0,O().VK)((()=>t.isLoggedIn()),[t]),r=(0,O().VK)((()=>Je().default.state.inAppCalloutStore),[]),a=(0,O().VK)((()=>"dark"!==e.ThemeStore.state.mode),[e]);(0,o.useEffect)((()=>{n&&(r.getCalloutVisibility("customer_io").canShow?a?Ft().Z.state.suppressReason===Ft().V.IN_APP_CALLOUT_CONFLICT?Ft().Z.setState({...Ft().Z.state,isVisible:!0,suppressReason:void 0}):Ft().Z.setState({...Ft().Z.state,suppressReason:void 0}):Ft().Z.setState({isVisible:!1,suppressReason:Ft().V.DARK_MODE}):Ft().Z.setState({isVisible:!1,suppressReason:Ft().V.IN_APP_CALLOUT_CONFLICT}))}),[r,n,a]);const i=(0,O().VK)((()=>Ft().Z.state.isVisible&&r.getCalloutVisibility("customer_io").canShow),[r]);return(0,o.useEffect)((()=>{if(i)return r.updateCalloutStatus({calloutId:"customer_io",visible:!0}),()=>{r.updateCalloutStatus({calloutId:"customer_io",visible:!1})}}),[r,i]),n?zt(!!i):null};var Ht=()=>n(851990),$t=()=>n(905263);const Gt=(0,c().vU)({pressSlashHeader:{id:"EducationTooltips.pressSlash.header",defaultMessage:"Press {slashkey} for commands"}});function Yt(e){return(0,m.jsx)("div",{style:{background:U().ZP.whiteWithAlpha(.1),padding:3,paddingRight:8,paddingLeft:8,marginRight:6,marginLeft:6,borderRadius:4},children:e.char})}function Xt(){const e=(0,h().O7)(),t=Ht().o();return(0,O().VK)((()=>{const{currentUserSettingsStore:e}=Je().default.state;var t;return!e||!e.isReady()||Boolean(null===(t=e.getSettings())||void 0===t?void 0:t.pressed_slash_tooltip)}),[])||e.device.isMobile||!t?null:(0,m.jsx)($t().U,{hideCloseButton:!0,origin:()=>t.getNode(),placementToOrigin:"bottom",header:(0,m.jsx)(c()._H,{...Gt.pressSlashHeader,values:{slashkey:(0,m.jsx)(Yt,{char:"/"})}}),content:null,onCloseClick:()=>Ht().q(e)})}const Jt=new(Le().Ss)("InPageFind",(async()=>Promise.all([n.e(52774),n.e(9901)]).then(n.bind(n,876025)))),Qt=(0,Le().kF)(Jt,(e=>e.InPageFind));var en=()=>n(506347),tn=()=>n(285670),nn=()=>n(175113),on=()=>n(82937),rn=()=>n(881266),an=()=>n(887430),sn=()=>n(632775),cn=()=>n(201741),ln=()=>n(982855),dn=()=>n(942226),un=()=>n(242921),pn=()=>n(521635),mn=()=>n(793935),fn=()=>n(520849),gn=()=>n(505121),vn=()=>n(311562),hn=()=>n(660293),bn=()=>n(482162),Sn=()=>n(855249),yn=()=>n(890324),wn=()=>n(965903),kn=()=>n(147861),xn=()=>n(628370),Cn=()=>n(94967),In=()=>n(748621),_n=()=>n(299519),Tn=(n(228244),()=>n(926724)),Pn=()=>n(416593),jn=()=>n(794586),Un=()=>n(152027),En=()=>n(174939),Mn=()=>n(912701),Ln=()=>n(716228),Rn=()=>n(122479),An=()=>n(148126),Vn=()=>n(467171);function Zn(e){const{theme:t,isSidePeekOpen:n,borderRadius:o,isElectronWindows:r,isShowingTabBar:a,zoomFactor:i}=e;return{zIndex:n?F().LI:F().Bh,background:t.peekModalBackground,borderTopLeftRadius:o??12,borderTopRightRadius:o??12,paddingRight:r&&n&&!a?(0,Pn().RO)(i):void 0}}const Bn=12;function Nn(e){const{environment:t}=e,n=t.device.isMobile?4:Bn;return{height:Vn().R6(t.device.isElectronMac),display:"flex",justifyContent:"space-between",alignItems:"center",paddingLeft:n,paddingRight:n}}var On=()=>n(480089),Dn=()=>n(151684),qn=()=>n(384697),Kn=()=>n(68744),Fn=()=>n(528770),zn=()=>n(790891),Wn=()=>n(779733),Hn=()=>n(279386);const $n=new(n(529048).Z);var Gn=()=>n(791388),Yn=()=>n(61548),Xn=()=>n(114642),Jn=()=>n(844641),Qn=()=>n(87098),eo=()=>n(1910),to=()=>n(64260),no=()=>n(654133),oo=()=>n(525038),ro=()=>n(197874),ao=()=>n(647295);var io=()=>n(345918),so=()=>n(943620),co=()=>n(384241),lo=()=>n(981583);const uo={display:"flex",alignItems:"center",fontSize:14,minWidth:0};function po(e,t){return e&&e instanceof It().H2&&t&&e.id===t.id}function mo(e){const{parentStore:t,prefixText:n}=e,o=(0,h().O7)(),r=(0,O().VK)((()=>(0,I().B7)(o)),[o]),a=(0,O().VK)((()=>t instanceof It().G&&t.isEmptyPage()),[t]),i=(0,O().VK)((()=>t instanceof It().H2?(0,io().Wd)(o,t):t.getIcon()),[o,t]),s=(0,O().VK)((()=>t instanceof It().H2?(0,io().rn)(o,t):void 0),[o,t]),l=(0,O().VK)((()=>{const{currentSpaceStore:e}=Je().default.state;return po(t,e)}),[t]),d=(0,D().yK)((()=>({privatePagesText:{fontWeight:jt().Ue.medium,marginLeft:4,...jt().Yu,overflow:"hidden"},icon:{marginRight:4,marginTop:1},title:{fontWeight:jt().Ue.semibold}})),[]);return(0,m.jsx)(m.Fragment,{children:l?(0,m.jsxs)(m.Fragment,{children:[n,(0,m.jsx)(lo().Z,{size:22,avatarShouldShowShadow:!0,userStore:r}),(0,m.jsx)("span",{style:d.privatePagesText,children:(0,m.jsx)(c()._H,{defaultMessage:"Private pages",id:"peekMoveToMenu.addTo.privatePages"})})]}):(0,m.jsxs)(m.Fragment,{children:[n,(0,m.jsx)(so().Z,{disabled:!0,icon:i,isEmptyPage:a,title:s,size:18,style:d.icon}),(0,m.jsx)(co().Z,{style:d.title,store:t})]})})}const fo=function(e){let{store:t,prefix:r,buttonStyle:a,saveParent:i,pageType:s,forceUntyped:l}=e;const d=(0,D().Fg)(),u=(0,h().O7)(),p=(0,O().VK)((()=>{const e=Je().default.state.mainEditorCurrentBlockStore;return e&&(0,Ye().WE)(e)?"home_tab":e&&(0,I().qG)(e.id)?"aggregated_type":"quick_add"}),[]),f=(0,O().VK)((()=>t.getParentStore()),[t]),g=(0,o.useRef)(null),v=(0,o.useCallback)((e=>function(e,t,n,o,r,a,i,s){e.preventDefault(),t&&oo().bA({environment:n,blocks:[o],originRect:t.getBoundingClientRect(),moveToContext:a,onAccept:e=>{let{value:t}=e;return function(e,t,n,o){const{currentSpaceStore:r}=Je().default.state;if(r&&t){let t;!function(e){const{pageType:t,spaceStore:n,currentUserId:o,result:r}=e;(0,ao().rq)({currentUserId:o,spaceId:n.id,value:r}),t&&(0,ao().ZT)({currentUserId:o,spaceId:n.id,databaseType:ro().wg[t],parent:r})}({pageType:t||o,spaceStore:r,currentUserId:n.currentUser.id,result:e})}}(t,r,n,i)},isAddTo:!0,isDefaultPrivateLocation:go(o),disableSuccessToast:!0,forceUntyped:s||vo(i)})}(e,g.current,u,t,i,p,s,l)),[g,u,t,i,p,s,l]);if(f&&!(f instanceof It().T5)&&!(f instanceof It().zq)&&!(f instanceof It().Vf)&&!(f instanceof It().Xr)&&!(f instanceof It().xj)&&!(f instanceof It().b4)&&!(f instanceof It().uj)){const e=r?(0,m.jsx)("span",{style:{color:d.mediumTextColor,marginRight:4},children:(0,m.jsx)(c()._H,{...r})}):void 0;return(0,m.jsx)(Cn().Z,{debugName:"PeekMoveToMenu",capture:!0,onMoveTo:v,children:(0,m.jsx)("div",{style:uo,children:(0,m.jsx)(no().Z,{renderTooltip:()=>(0,m.jsxs)("div",{children:[(0,m.jsx)(c()._H,{defaultMessage:"Set the default page or database",id:"peekMoveToMenu.tooltip"}),(0,m.jsx)("br",{}),(0,m.jsx)(to().Z,{style:{color:d.mediumInvertedTextColor},name:"moveTo"})]}),render:t=>(0,m.jsxs)(n(92175).Z,{onClick:v,ref:g,shouldShrink:!0,style:a,...t,children:[(0,m.jsx)(mo,{parentStore:f,prefixText:e}),(0,n(615634).i)({width:10,marginLeft:4,fill:d.lightTextColor})]})})})})}return null};function go(e){const t=e.getParentStore(),{currentSpaceStore:n}=Je().default.state;return po(t,n)}function vo(e){return!e||"page"===e}var ho=()=>n(234004),bo=()=>n(211009),So=()=>n(403878),yo=()=>n(447737),wo=()=>n(49489),ko=(n(470928),n(241792),()=>n(161002)),xo=()=>n(250303),Co=()=>n(139224),Io=()=>n(605890),_o=()=>n(429725),To=()=>n(527278),Po=()=>n(352230),jo=()=>n(239482),Uo=()=>n(795941),Eo=()=>n(827973),Mo=()=>n(448419),Lo=()=>n(108714),Ro=()=>n(198829),Ao=()=>n(255577),Vo=()=>n(967092),Zo=()=>n(388284);const Bo=(0,c().vU)({changeForThisView:{id:"peekTopbar.changePeekOption.changeForThisView",defaultMessage:"Edit view default"}});const No=function(e){let{store:t,onClick:o,onDismissPopup:r,onClosePeek:a}=e;const i=(0,D().Fg)(),s=(0,h().O7)();(0,ie().K)((()=>{const e=Do(i),t=bn().default.getPeekMode();e.find((e=>u().Xy(e.key,t)))||n(799891).log({level:"warning",from:"TopbarPeekModeButton",type:"InvalidSelectedPeekMode",error:(0,n(792409).Ui)("Selected key is invalid.")})}));const l=(0,h().Fy)(),d=Do(i),p=(0,O().VK)((()=>bn().default.getPeekMode()),[]);return p?(0,m.jsx)(Mo().ZP,{popupType:l.isMobile?Vo().kQ.SlideUp:Vo().kQ.Popup,alignmentToOrigin:Mo().vR.Center,placementToOrigin:Mo().pO.Bottom,style:{minWidth:190},originGap:0,onClick:()=>{!function(e){if(!bn().default.state.open)return;const t=bn().default.state.collectionContextStore;t?xo().nS({environment:e,collectionContextStore:t,from:"peek_topbar",peek_target_id:bn().default.state.targetStore.id,from_peek_mode:bn().default.state.mode}):nn().v2(e,{from:"peek_topbar",peek_target_id:bn().default.state.targetStore.id,from_peek_mode:bn().default.state.mode})}(s),o&&o()},onClose:r,renderOrigin:e=>(0,m.jsx)(no().Z,{renderTooltip:()=>(0,m.jsx)(c()._H,{defaultMessage:"Switch peek mode",id:"peekTopbar.openPagesAs.button"}),render:t=>(0,m.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:2},children:[(0,m.jsx)(wo().Z,{}),(0,m.jsx)(eo().Z,{...e,...t,icon:(0,Io().RO)(p),iconStyle:{fill:i.mediumIconColor}})]})}),render:e=>(0,m.jsx)(Oo,{parent:e,currentPeekMode:p,options:d,store:t,onClosePeek:a})}):null};function Oo(e){let{currentPeekMode:t,options:n,store:o,onClosePeek:r,parent:a}=e;const i=(0,h().O7)(),s=(0,h().Fy)(),c=(0,D().Fg)();let l;l=s.isMobile?{menuType:Po().o.ActionSheet}:{menuType:Po().o.Popup,width:220};const d=(0,O().VK)((()=>{const{RouterStore:e}=i,r=e.state.route;return u().oA([...n.map(((e,n)=>{const s=e.key,c=void 0===s||"full_page"===s?void 0:(0,bn().getUrlParamFromPeekMode)(s),l="full_page"===s?(0,_o().ZP)({store:o,fullyQualified:!1,openInCenterPeek:!o.isPost()&&void 0,pageVisitSource:en().tY.Expand}):"team"===r.name?(0,ko().y)({teamId:r.teamId,peekInfo:c?{peekMode:c,peekViewBlockId:o.id}:void 0}):function(e,t,n){const{mainEditorCurrentBlockStore:o}=Je().default.state,r=jo().uJ(n),a=n.isNavigableBlock()?r.slice(1):[...r],i=a.length>0?a[0]:void 0;return(0,an().mb)({environment:e,store:n,mainEditorCurrentBlockStore:i instanceof It().G&&!bn().default.state.open?i:o,collectionContextStore:bn().default.state.collectionContextStore,fullyQualified:!1,overridePeekMode:(0,bn().getPeekModeFromCollectionPeekModeFormat)(t)})}(i,s,o);return{key:n,render:n=>(0,m.jsx)(Lo().Z,{href:l,onClick:()=>{var e;nn().UZ(i,{from:"peek_topbar",peek_mode:s,from_peek_mode:t,target_page_id:null===(e=bn().default.peekTargetStore.state)||void 0===e?void 0:e.id}),a.close()},children:(0,m.jsx)(Eo().Z,{...n,disabled:!1,title:e.title,icon:e.icon,caption:e.caption,body:e.body,checkState:u().Xy(e.key,t)})}),action:()=>{}}}))])}),[n,t,i,o,a]),p=(0,O().VK)((()=>bn().default.state.open?bn().default.state.collectionContextStore:void 0),[]),f=(0,O().VK)((()=>bn().default.state.open?bn().default.state.targetStore:void 0),[]),g=(0,O().VK)((()=>Je().default.state.mainEditorCurrentBlockStore),[]),v=(0,O().VK)((()=>{var e,t,n;const o=g&&g.id===(null==p||null===(e=p.collectionViewBlockStore())||void 0===e?void 0:e.getRecordStoreUIRoot().id);return(null==p||null===(t=p.collectionStore())||void 0===t?void 0:t.id)===(null==f||null===(n=f.getAssociatedCollectionStore())||void 0===n?void 0:n.id)&&(null==p?void 0:p.permissionScopesStore.state.canConfigureBlock)&&o}),[g,p,f]);return(0,m.jsx)(Ro().Z,{...l,children:(0,m.jsx)(Ao().Z,{type:Ao().i.Vertical,sections:u().oA([{key:0,render:e=>(0,m.jsx)(Zo().Z,{enableActionSheetTitle:!0,...e}),items:d},v&&{key:1,render:e=>(0,m.jsx)(Zo().Z,{enableActionSheetTitle:!0,topBorder:!0,...e}),items:[{key:"change_for_view",render:e=>(0,m.jsx)(Eo().Z,{...e,disabled:!1,title:To().Z.formatMessage(Bo.changeForThisView),icon:(0,Uo().y)({width:16,height:16,fill:c.regularIconColor})}),action:e=>{!function(e,t){const n=bn().default.state.open?bn().default.state.collectionContextStore:void 0;n&&(bn().default.isCenterPeekOpen()&&t&&t(),Co().r$({collectionContextStore:n,collectionSettingsStore:n.settingsStore}),Co().H4({collectionSettingsStore:n.settingsStore,item:{type:"layout"}}),n.settingsStore.setState({...n.settingsStore.state,openButtonPopup:"peekModeFormat"}))}(0,r),a.close()}}]}]),initialFocus:0})})}function Do(e){return["side_peek","center_peek","full_page"].map((t=>({key:t,type:"button",title:(0,Io().LQ)(t),icon:(0,Io().RO)(t)({width:16,fill:e.mediumTextColor})})))}var qo=()=>n(259878),Ko=()=>n(451102),Fo=()=>n(302358),zo=()=>n(758210),Wo=()=>n(730764);const Ho=(0,c().vU)({moveToPrefixText:{id:"peekMoveToMenu.moveTo.moveTo",defaultMessage:"Move to"},addToPrefixText:{id:"peekMoveToMenu.addTo.addTo",defaultMessage:"Add to"},closeButton:{defaultMessage:"Close",id:"peekTopbar.close.button"},previousPageTooltip:{defaultMessage:"Previous page",id:"peekTopbar.peekNavUpArrow.tooltip"},nextPageTooltip:{defaultMessage:"Next page",id:"peekTopbar.peekNavDownArrow.tooltip"},closeLayoutInfoPanelTooltip:{defaultMessage:"Close panel",id:"peekTopbar.closeLayoutInfoPanelButton.tooltip"}});const $o=function(e){let{store:t,shouldShowMoveToMenu:r,onClose:a,spaceStore:i,spaceViewStore:s,pageVisitStore:c,presenceStore:l}=e;const d=(0,D().Fg)(),u=(0,h().O7)(),p=(0,O().VK)((()=>bn().default.isSidePeekOpen()),[]),f=(0,O().VK)((()=>n(851713).Z.state.banners),[]),g=(0,O().VK)((()=>t.canEdit()),[t]),{isShowingTabBar:v,zoomFactor:b}=(0,O().VK)((()=>({isShowingTabBar:Boolean(ne().default.state.isShowingTabBar),zoomFactor:ne().default.state.zoomFactor||Pn().lO})),[]),S=u.device.isElectron&&!v&&p,y=(0,O().VK)((()=>t.isFormBlock()),[t]),w=(0,O().VK)((()=>pn().Z.getPanelState("peek").isMouseHoveringPanel),[]),k=(0,O().VK)((()=>"static_sidebar"===pn().Z.getPanelState("peek").displayStyle&&pn().Z.getPanelState("peek").isOpen),[]),[x,C]=o.useState(!1),I=(0,O().qz)(void 0,n(385021).Z),_=(0,O().VK)((()=>bn().default.state.topHoverAreaEntered),[]),T=(0,D().yK)((()=>{const e=_||x;return{peekControlsWrapper:{display:"grid",gridAutoFlow:"column",gridColumnGap:2,alignItems:"center"},hoverBtn:{opacity:e?1:0,pointerEvents:e?"auto":"none",transition:"opacity 100ms ease"}}}),[_,x]),P=k&&(_||w);return(0,m.jsx)(_n().Z,{store:t,disableRectangularSelection:!0,disableEditNearestBlock:!0,isPeekRenderer:!0,render:e=>{let{selectableEvents:o}=e;return(0,m.jsxs)("div",{...o,style:{height:y?0:void 0,...Zn({theme:d,isSidePeekOpen:p,isElectronWindows:u.device.isElectronWindows,isShowingTabBar:v,zoomFactor:b})},className:`${ee().JiT} ${S?ee().pMC:""}`,children:[(0,m.jsxs)("div",{style:Nn({environment:u}),children:[(0,m.jsxs)("div",{style:T.peekControlsWrapper,children:[(0,m.jsx)(Xo,{onClose:a}),!y&&(0,m.jsx)(n(659038).Z,{store:t,shouldShowMoveToMenu:r}),(0,m.jsx)(Go,{store:t,shouldShowMoveToMenu:r}),g&&(0,m.jsx)(n(44105).Z,{store:t,lockStore:I,buttonStyle:{margin:0}}),!y&&(0,m.jsx)("div",{style:T.hoverBtn,children:(0,m.jsx)(No,{store:t,onClick:()=>C(!0),onDismissPopup:()=>C(!1),onClosePeek:a})}),(0,m.jsx)("div",{style:{...T.hoverBtn,...T.peekControlsWrapper},children:(0,m.jsx)(Jo,{shouldShowMoveToMenu:r})})]}),(0,m.jsx)(Yo,{store:t,spaceStore:i,spaceViewStore:s,pageVisitStore:c,presenceStore:l,shouldShowLayoutPanelCloseButton:P})]}),(0,m.jsx)(n(188407).t,{banners:f,isMobile:!1,isInPeekRenderer:!0})]})}})};function Go(e){let{store:t,shouldShowMoveToMenu:n}=e;const{open:o,saveParent:r,pageVisitSource:a,collectionContextStore:i}=(0,O().VK)((()=>({open:bn().default.state.open,saveParent:!!bn().default.state.open&&bn().default.state.saveParent,pageVisitSource:bn().default.state.open?bn().default.state.pageVisitSource:void 0,collectionContextStore:bn().default.state.collectionContextStore})),[]),s=(0,O().VK)((()=>{const e=t.getAssociatedCollectionStore();return(null==e?void 0:e.getDatabaseType())===Tn().Ym?"tasks":void 0}),[t]),c=(0,O().VK)((()=>"collectionTypedView"===(null==i?void 0:i.contextType)),[i]);return o&&n?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(wo().Z,{}),(0,m.jsx)(fo,{store:t,saveParent:r,prefix:c?Ho.moveToPrefixText:Ho.addToPrefixText,pageType:s,forceUntyped:a===en().tY.SidebarQuickAdd})]}):null}function Yo(e){let{store:t,spaceStore:n,spaceViewStore:r,pageVisitStore:a,presenceStore:i,shouldShowLayoutPanelCloseButton:s}=e;const l=(0,h().O7)(),d=(0,h().Fy)(),u=(0,O().VK)((()=>(0,Rn().IJ)(l,t)),[l,t]),p=(0,O().VK)((()=>n&&n.id!==t.getSpaceId()),[n,t]),f=(0,O().VK)((()=>I().qG(t.id)),[t]),g=(0,O().VK)((()=>(0,Ye().Kj)(t.id)),[t]),v=(0,O().VK)((()=>(0,Wn().E1)()),[]),b=(0,O().VK)((()=>t.isPost()&&!t.isPublishedPost()),[t]),S=(0,O().VK)((()=>t.isFormBlock()),[t]),y=(0,O().VK)((()=>t.isPageBlock()),[t]),w=(0,O().VK)((()=>t.isExternalObjectInstancePageBlockStore()),[t]),x=!d.isMobile&&n&&r&&!u&&!p&&!g&&!S,C=(0,O().VK)((()=>(0,bo().C$)({device:d,isPersonalHomePage:g,isFormBlock:S,store:t})),[d,g,S,t]),_=(0,O().VK)((()=>Boolean(n&&!n.canEdit())),[n]),T=(0,O().VK)((()=>t.canEdit()),[t]),P=(0,O().VK)((()=>t.isRestricted()),[t]),j=(0,O().VK)((()=>{var e;return null===(e=Hn().MT.getStateForBlock(t.id))||void 0===e?void 0:e.mode}),[t.id]),{suggestTranslation:U,suggestedPageTranslationLanguage:E,detectedPageLanguage:M,setTranslationSuggestionDismissed:L}=(0,zo().B)(t),R=(0,O().VK)((()=>!d.isMobile&&(y||w)&&!S),[d.isMobile,y,S,w]),A=(0,On().cR)(t),V=n&&r&&!u&&!p&&(0,ho().shouldShowTopbarShareMenu)({isSpaceGuest:_,canEditPage:T,isFormBlock:S,isPersonalHomePage:g,isTranslated:"translate_locked"===j}),Z=n&&r&&!S&&!u&&!p&&!A&&"translate_locked"!==j,B=(0,c().YB)(),N=o.useCallback((()=>{var e;const n=null===(e=t.getAssociatedCollectionStore())||void 0===e?void 0:e.getLayoutStore();n&&(0,Fn().n)({environment:l,layoutStore:n,from:"topbar",panelLocation:"peek"})}),[t,l]),q=(0,O().VK)((()=>x&&T&&!b&&"on"!==k().default.getEligibleGroup({experimentId:"remove_updates_topbar_button_v2",defaultGroup:"control"})),[T,x,b]),K=(0,O().VK)((()=>(0,An().Sr)(l)),[l]),F=function(){const e=(0,h().O7)(),t=(0,O().VK)((()=>{const t=e.device.isMobile?void 0:(0,un().rb)({environment:e,isInPeek:!0});return t?t-Bn:void 0}),[e]);return(0,D().yK)((e=>({wrapStyles:{display:"flex",alignItems:"center",flexGrow:0,flexShrink:0,zIndex:1,minWidth:t,paddingLeft:Bn,justifyContent:"flex-end"}})),[t]).wrapStyles}();return(0,m.jsxs)("div",{style:F,children:[s&&(0,m.jsx)(no().Z,{renderTooltip:()=>(0,m.jsx)("div",{children:B.formatMessage(Ho.closeLayoutInfoPanelTooltip)}),render:e=>(0,m.jsx)(eo().Z,{...e,ariaLabel:B.formatMessage(Ho.closeLayoutInfoPanelTooltip),icon:Kn().t,iconStyle:{width:16,height:16},onClick:N})}),K&&(0,m.jsx)("div",{style:{flexGrow:1}}),P&&!v&&(0,m.jsx)(Ko().Z,{style:{marginRight:14},onClick:()=>{Xn().Z.setState({open:!0})}}),E&&M&&(0,m.jsx)(Qn().PN,{store:t,isVisible:U,onDismiss:()=>L(!0),suggestedPageTranslationLanguage:E,detectedPageLanguage:M}),(0,m.jsx)(Ln().B,{store:t,isVisible:"suggest"===j&&!S,compact:!0}),T&&!S&&(0,m.jsx)(qo().ZP,{rootStore:t,pageVisitStore:a,presenceStore:i}),V&&(0,m.jsx)(Mn().j,{store:t,buttonPopupStore:Xn().Z}),R&&(0,m.jsx)(yo().a,{blockStore:t,buttonPopupStore:Gn().Z,pageViewBlockContext:vn().S.PeekView}),C&&(0,m.jsx)(bo().ZP,{blockStore:t,spaceStore:n,buttonPopupStore:$n}),q&&(0,m.jsx)(Fo().ZP,{blockStore:t,spaceStore:n,buttonPopupStore:Jn().Z}),Z&&(0,m.jsx)(So().Z,{store:t,spaceViewStore:r}),S&&(0,m.jsx)(Un().Z,{formBlockStore:t,inPeekMode:!0}),f&&(0,m.jsx)(zn().Z,{}),x&&(0,m.jsx)(En().K,{store:t,buttonPopupStore:Yn().Z}),b&&(0,m.jsx)(Wo().n,{store:t})]})}function Xo(e){let{onClose:t}=e;const n=(0,c().YB)(),o=(0,D().Fg)();return(0,O().VK)((()=>bn().default.isSidePeekOpen()),[])?(0,m.jsx)(no().Z,{renderTooltip:()=>(0,m.jsxs)("div",{children:[n.formatMessage(Ho.closeButton),(0,m.jsx)("br",{}),(0,m.jsx)(to().Z,{style:{color:o.mediumInvertedTextColor},name:"esc"})]}),render:e=>(0,m.jsx)(eo().Z,{...e,ariaLabel:n.formatMessage(Ho.closeButton),icon:Kn().t,iconStyle:{width:16,height:16},onClick:()=>t("close_button")})}):null}function Jo(e){let{shouldShowMoveToMenu:t}=e;const n=(0,c().YB)(),o=(0,D().Fg)(),r=(0,O().Kw)(bn().default),{resultsStore:a}=r,i=(0,O().VK)((()=>null==a?void 0:a.getState()),[a]);if(!r.open)return null;if(t)return null;const s=r.targetStore.id;return i&&i.length>0&&i.some((e=>e.id===s))?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(wo().Z,{}),(0,m.jsx)(no().Z,{renderTooltip:()=>(0,m.jsxs)("div",{children:[n.formatMessage(Ho.previousPageTooltip),(0,m.jsx)("br",{}),(0,m.jsx)(to().Z,{style:{color:o.mediumInvertedTextColor},name:"peekUp"})]}),render:e=>(0,m.jsx)(eo().Z,{...e,ariaLabel:n.formatMessage(Ho.previousPageTooltip),disabled:s===i[0].id,icon:qn().R,onClick:()=>jn().Qk(),iconStyle:{fill:o.mediumIconColor}})}),(0,m.jsx)(no().Z,{renderTooltip:()=>(0,m.jsxs)("div",{children:[n.formatMessage(Ho.nextPageTooltip),(0,m.jsx)("br",{}),(0,m.jsx)(to().Z,{style:{color:o.mediumInvertedTextColor},name:"peekDown"})]}),render:e=>(0,m.jsx)(eo().Z,{...e,ariaLabel:n.formatMessage(Ho.nextPageTooltip),disabled:s===i[i.length-1].id,icon:Dn().E,onClick:()=>jn().OW(),iconStyle:{fill:o.mediumIconColor}})})]}):null}function Qo(){const e=(0,O().VK)((()=>bn().default.state.open),[]),t=(0,O().Kw)(gn().Z),n=(0,D().yK)((e=>({containerStyles:{position:"fixed",top:0,right:0,bottom:0,left:0,zIndex:F().Nn,background:e.overlaySmokescreen},contentStyles:{...ar(e),top:bn().PeekModeOuterPadding,left:bn().PeekModeOuterPadding,right:bn().PeekModeOuterPadding,marginRight:"auto",height:`calc(100% - ${bn().PeekModeOuterPadding}px*2)`,maxWidth:bn().CenterPeekModeOuterWidth+t,borderRadius:12,overflow:"hidden"}})),[t]);return(0,m.jsx)(In().Z,{open:e,children:(0,m.jsx)(nr,{enableCaptureClick:!0,priority:void 0,showResizer:!1,styles:n})})}function er(){const e=(0,h().O7)(),t=(0,O().Kw)(bn().default),n=(0,O().VK)((()=>bn().default.getSidePeekWidth(e.WindowSizeStore.state.width)),[e]),r=(0,_().J4)(),a=(0,D().yK)((e=>({containerStyles:{position:"fixed",top:0,right:0,bottom:0,translateX:n,width:n,zIndex:F().YO},contentStyles:{...ar(e),top:0,right:0,width:"100%",height:r?`calc(100% - ${te().tL}px)`:"100%",borderRadius:0}})),[r,n]),i=(0,O().Kw)(hn().X),s=o.useRef(null);return(0,m.jsx)(xn().Z,{tag:nr,forceCompositeLayer:!0,skip:i,animate:{translateX:t.open&&!t.isClosing?0:n,width:n},initial:{translateX:t.open?0:n},onAnimationStart:()=>{s.current=performance.now()},onAnimationEnd:()=>{const n=s.current?Math.round(performance.now()-s.current):null;if(s.current=null,!t.open)return;const o=t.isClosing?"side_peek_renderer_animation_closing":"side_peek_renderer_animation_opening";t.isClosing?(bn().default.setState({...t,isClosing:!1}),on().ME()):t.isOpening&&bn().default.setState({...t,isOpening:!1}),n&&(0,w().j)({environment:e,event:{eventName:o,eventProperties:{duration_ms:n}}})},enableCaptureClick:!1,priority:-1,showResizer:!0,styles:a})}function tr(){const e=(0,h().O7)(),t=(0,O().Kw)(bn().default),{currentSpaceStore:n,currentSpaceViewStore:o}=(0,O().VK)((()=>{const{currentSpaceStore:e,currentSpaceViewStore:t}=Je().default.state;return{currentSpaceStore:e,currentSpaceViewStore:t}}),[]),r=(0,O().VK)((()=>{var e;return!!t.open&&(t.showMoveTo||"collectionTypedView"===(null===(e=t.collectionContextStore)||void 0===e?void 0:e.contextType))}),[t]);return t.open?(0,m.jsx)($o,{store:t.targetStore,spaceStore:n,spaceViewStore:o,pageVisitStore:t.pageVisitStore,presenceStore:t.presenceStore,shouldShowMoveToMenu:r,onClose:t=>{dr(e,t)}}):null}const nr=o.forwardRef((function(e,t){const{priority:r}=e,a=(0,h().O7)(),i=(0,O().Kw)(bn().default),{shouldShowFrame:s}=(0,O().VK)((()=>(0,I().h1)(a)),[a]),c=(0,O().VK)((()=>dn().Tx()),[]),l=(0,O().VK)((()=>i.open&&0===wn().default.state.stores.length&&!wn().default.state.pivot&&"editing"!==n(127519).default.state.mode&&!n(241449).default.state.isOpen),[i.open]),d=(0,o.useCallback)((()=>{ur(a)}),[a]),u=(0,o.useCallback)((()=>{!function(e){bn().default.peekTargetStore.state&&(n(47443)._c({environment:e,store:bn().default.peekTargetStore.state,pageVisitSource:en().tY.Expand}),nn().sx(e,{isNewPage:bn().default.state.open&&bn().default.state.showMoveTo,peek_mode:bn().default.state.mode,from:"command_enter",target_page_id:bn().default.peekTargetStore.state.id}),nn().$C(e,{peek_mode:bn().default.state.mode,from:"command_enter",target_page_id:bn().default.peekTargetStore.state.id,target_parent_id:bn().default.peekTargetStore.state.getParentId()}))}(a)}),[a]);return s?i.open?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(n(685375).Z,{debugName:"PeekRenderer",priority:r,capture:c}),(0,m.jsx)(Cn().Z,{debugName:"PeekRenderer",innerKey:i.targetStore.id,capture:l,onEsc:d,onCommandEnter:u,children:(0,m.jsx)(or,{...e,ref:t})})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(m.Fragment,{}),(0,m.jsx)(Cn().Z,{debugName:"PeekRenderer",capture:!1,children:(0,m.jsx)(or,{...e,ref:t})})]}):null})),or=o.forwardRef((function(e,t){const{enableCaptureClick:r,bottomBar:a,showResizer:i}=e,s=(0,o.useCallback)((e=>{n(832924).default.PeekViewScroller=e??void 0}),[]),l=(0,c().YB)(),d=(0,h().O7)(),u=(0,O().Kw)(bn().default),p=(0,O().SI)((()=>u.open?yn().Z.getMode(d,u.targetStore):yn().m.disabled),[d,u]),f=(0,O().SI)((()=>(0,ln().GD)(p.state)),[p]),g=(0,O().VK)((()=>{if(!u.open)return;const{currentSpaceStore:e,currentSpaceViewStore:t}=Je().default.state;return{pageStore:u.targetStore,spaceStore:e,spaceViewStore:t,presenceStore:u.presenceStore,pageVisitStore:u.pageVisitStore,publicEditModeStore:p,arePublicEditCompletionsEnabledStore:f}}),[u,p,f]),v=(0,o.useCallback)((()=>{ur(d)}),[d]),b=(0,o.useCallback)((e=>{let{startTime:t,endTime:o}=e;const r=u.open?an().fm(u.targetStore):void 0;n(620218).default.DO_NOT_USE_measureLegacy({metricName:"collections.max_scroll_lag_in_session",startTime:t,endTime:o},{environment:d,data:n(861026).vS(r)})}),[d,u]),S=(0,o.useCallback)((()=>{!function(e){dr(e,"empty_space_click")}(d)}),[d]);(0,o.useEffect)((()=>{u.open&&u.mode===tn().l?E().setOverlay(!0):E().setOverlay(!1)}),[u.open,u.mode]);const y=(0,O().VK)((()=>cn().QH.state),[]),w=(0,n(206658).E)(u.open?u.targetStore:void 0),{modules:k}=(0,n(557161).V)(u.open?u.targetStore:void 0);(0,un().UI)(d,w);const x=(0,O().VK)((()=>(0,un().rb)({environment:d,isInPeek:!0})),[d]),C=(0,O().VK)((()=>(0,un().GH)({environment:d,isInPeek:!0})),[d]),I=(0,O().VK)((()=>bn().default.isSidePeekOpen()&&cn().ht.state),[]),_=(0,O().VK)((()=>pn().Z.getPanelState("peek").isOpen),[]),T=(0,O().VK)((()=>{if(!u.open)return!1;const e=u.targetStore.getAssociatedCollectionStore();return!!e&&(0,un().kJ)({collectionStore:e})}),[u]),P=(0,D().yK)((t=>({...e.styles,containerStyles:{...e.styles.containerStyles,...e.style},layoutStaticSidebar:{width:x,flexShrink:0,paddingBottom:24,borderLeft:`1px solid ${t.stroke.secondary}`}})),[e.styles,e.style,x]),j=(0,n(511115).z)((e=>{const t=e.target;t instanceof Element&&t.closest(`.${ee().JiT}`)?bn().default.setTopHoverAreaEntered(!0):bn().default.setTopHoverAreaEntered(!1)}),100),U=(0,kn().xU)();o.useEffect((()=>(window.addEventListener("mousemove",j),()=>window.removeEventListener("mousemove",j))),[j]);const M=(0,O().Kw)(f);return(0,m.jsx)(n(893403).M,{value:g,children:(0,m.jsx)("div",{role:"region","aria-label":l.formatMessage({id:"peekRenderer.ariaLabel",defaultMessage:"Side Peek"}),"aria-hidden":!u.open||void 0,style:P.containerStyles,className:ee().p1Q,ref:t,children:u.open&&(0,m.jsxs)(m.Fragment,{children:[r&&(0,m.jsx)("div",{style:{width:"100%",height:"100%"},onClick:S}),(0,m.jsxs)("div",{style:P.contentStyles,children:[I&&(0,m.jsx)("div",{style:{position:"absolute",top:10,transform:"translateX(-100%)",left:-10},children:(0,m.jsx)(sn().at,{rootStore:y})}),i&&(0,m.jsx)(n(123256).Z,{type:"peek"}),(0,m.jsx)(tr,{}),U&&(0,m.jsx)(n(243903).K,{}),(0,m.jsx)(_n().Z,{store:u.targetStore,isDefaultContainer:!0,droppable:!0,isPeekRenderer:!0,render:e=>{let{selectableEvents:t,selectableHoverMenuOverlay:r}=e;const a={pageStore:u.targetStore,pageVisitStore:u.pageVisitStore,initialChunkSize:n(526122).OZ,incrementChunkSize:25,render:e=>{let{ready:a,initialRequestCompleted:i,endOfResultsReached:c,isCollectionInPage:l,scrollerRef:p}=e;return(0,m.jsxs)("div",{style:T?{flexGrow:1,display:"flex",maxHeight:"100%",height:"100%"}:{display:"contents"},children:[!a&&(0,m.jsx)("div",{style:{position:"relative",width:"100%",flexGrow:1},children:(0,m.jsx)(rn().Z,{peekMode:bn().default.getPeekMode(),isVisible:!a,store:u.targetStore})}),(0,m.jsxs)(n(842574).Z,{ref:e=>{if(s(e),p){const t=null==e?void 0:e.getNode();t instanceof HTMLElement&&(p.current=t)}},onScrollLagMeasure:l?b:void 0,preventType:a?n(844085).Q7(d):fn().Z.All,type:fn().Z.Y,style:a?ir:sr,store:Sn().Z,...t,children:[r,M&&(0,m.jsx)(Ot().GC,{scrollerStore:Sn().Z}),(0,m.jsx)(sn().vo,{scrollerStore:Sn().Z}),i&&(0,m.jsxs)(o.Fragment,{children:[(0,m.jsx)("div",{className:ee().JiT,children:(0,m.jsx)(n(83003).g,{blockStore:u.targetStore})}),(0,m.jsx)(n(254805).ZP,{context:vn().S.PeekView,store:u.targetStore,onTitleEsc:v,forceSelectTitleOnMount:!0,paddingBottom:dn().KA,styleOverrides:rr,disabled:!u.open||u.isClosing}),(0,m.jsx)(n(665444).Z,{pageVisitStore:u.pageVisitStore,presenceStore:u.presenceStore,isPeekView:!0})]}),a&&!c&&(0,m.jsx)($().Z,{style:lr})]}),M&&(0,m.jsx)(Ot().vK,{scrollerKey:"PeekView"}),(0,m.jsx)(xn().Z,{visible:T,forceCompositeLayer:!0,animate:{width:x},initial:{translateX:_?0:x},style:P.layoutStaticSidebar,children:(0,m.jsx)("div",{style:{width:C,height:"100%"},children:(0,m.jsx)(n(562219).J,{store:u.targetStore,context:vn().S.PeekView,disabled:!u.open||u.isClosing||!_,shownAs:"static_sidebar",modules:k})})})]})}};return(0,m.jsx)(o.Suspense,{fallback:(0,m.jsx)(rn().Z,{peekMode:bn().default.getPeekMode(),isVisible:!0,store:u.targetStore}),children:(0,m.jsx)(n(243126).F,{...a,store:u.loadingContainerStore})})}},u.targetStore.id),a]})]})})})})),rr={pageCoverHeight:"20vh"};function ar(e){return{flexDirection:"column",position:"absolute",display:"flex",marginLeft:"auto",background:e.peekModalBackground,boxShadow:e.largeLightBoxShadow}}const ir={display:"flex",flexDirection:"column",flexGrow:1,position:"relative",transform:"translateZ(0)"},sr={...ir,opacity:0,pointerEvents:"none",height:0},cr="1.375em",lr={zIndex:1,opacity:.5,width:cr,height:cr,marginTop:0,marginBottom:24,marginLeft:"auto",marginRight:"auto"};function dr(e,t){on().xv({environment:e,from:t})}function ur(e){dr(e,"esc")}const pr=function(){const e=(0,h().O7)(),t=(0,O().VK)((()=>{const e=bn().default.state.open?bn().default.state.targetStore:void 0;return null==e?void 0:e.getSystemBlockTypeStore().getValue()}),[]),r=(0,o.useCallback)((()=>{bn().default.state.open&&bn().default.isSidePeekOpen()&&(mn().toggleLeftSidebarByWindowSize(e),bn().default.setState({...bn().default.state,isOpening:!1}))}),[e]);switch((0,o.useEffect)((()=>(e.WindowSizeStore.addListener(r),()=>e.WindowSizeStore.removeListener(r))),[e.WindowSizeStore,r]),(0,o.useEffect)((()=>{(0,n(903680).u7)(t)&&on().xv({environment:e,from:"invalid_peek_page"})}),[e,t]),(0,O().VK)((()=>bn().default.getPeekMode()),[])){case tn().l:return(0,m.jsx)(Qo,{});case tn().R:return(0,m.jsx)(er,{})}},mr=new(Le().Ss)("ForkPageModalWrapper",(async()=>await Promise.all([n.e(62743),n.e(52774),n.e(5242),n.e(90424),n.e(81580),n.e(84325),n.e(2971),n.e(53335),n.e(71896),n.e(46616),n.e(86609),n.e(91253),n.e(4642),n.e(6612),n.e(61171),n.e(23179),n.e(75377),n.e(31020),n.e(2942),n.e(58591),n.e(54803),n.e(1953),n.e(10216),n.e(42055),n.e(8129)]).then(n.bind(n,541409)))),fr=(0,Le().kF)(mr,(e=>e.ForkPageModalWrapper)),gr=new(Le().Ss)("SecondarySidebar",(async()=>await Promise.all([n.e(62743),n.e(52774),n.e(90698),n.e(84885),n.e(37358),n.e(5242),n.e(7312),n.e(90424),n.e(81580),n.e(84325),n.e(31189),n.e(69343),n.e(46293),n.e(2971),n.e(80741),n.e(72586),n.e(53335),n.e(71896),n.e(46616),n.e(54940),n.e(49396),n.e(98721),n.e(98032),n.e(57229),n.e(63707),n.e(86609),n.e(91253),n.e(4642),n.e(5006),n.e(6612),n.e(61171),n.e(23179),n.e(75377),n.e(31020),n.e(2942),n.e(73682),n.e(58591),n.e(54803),n.e(1953),n.e(10216),n.e(58565),n.e(69197),n.e(42055),n.e(38739),n.e(44751),n.e(81567),n.e(79418),n.e(53234),n.e(46101)]).then(n.bind(n,387736)))),vr=(0,Le().kF)(gr,(e=>e.SecondarySidebar)),hr=new(Le().Ss)("SpaceSettings",(async()=>Promise.all([n.e(62743),n.e(52774),n.e(44832),n.e(39938),n.e(90698),n.e(84885),n.e(37358),n.e(5242),n.e(7312),n.e(90424),n.e(81580),n.e(84325),n.e(31189),n.e(69343),n.e(46293),n.e(94556),n.e(78701),n.e(38804),n.e(17100),n.e(11846),n.e(70355),n.e(2971),n.e(80741),n.e(72586),n.e(53335),n.e(71896),n.e(46616),n.e(54940),n.e(49396),n.e(98721),n.e(98032),n.e(57229),n.e(63707),n.e(86609),n.e(91253),n.e(4642),n.e(5006),n.e(6612),n.e(61171),n.e(23179),n.e(75377),n.e(31020),n.e(2942),n.e(73682),n.e(58591),n.e(54803),n.e(1953),n.e(10216),n.e(58565),n.e(69197),n.e(42055),n.e(38739),n.e(44751),n.e(81567),n.e(63257),n.e(34291),n.e(1913),n.e(56054),n.e(95076),n.e(92341),n.e(82658),n.e(4163),n.e(69583),n.e(22759),n.e(20343),n.e(21820),n.e(46945),n.e(10553),n.e(67019),n.e(27039),n.e(25265),n.e(14581),n.e(38632),n.e(61651),n.e(88702),n.e(54307),n.e(43184),n.e(87647),n.e(75861),n.e(46257),n.e(15819),n.e(45376),n.e(74943),n.e(23721),n.e(58461),n.e(72329),n.e(19592),n.e(3331),n.e(98672),n.e(52658),n.e(44642),n.e(78),n.e(58586)]).then(n.bind(n,708212)))),br=(0,Le().kF)(hr,(e=>e.SpaceSettings));var Sr=()=>n(616963);const yr=new(Le().Ss)("Marketplace",(async()=>{const{default:e}=await Promise.all([n.e(62743),n.e(17100),n.e(2971),n.e(53335),n.e(46616),n.e(43184),n.e(35332),n.e(58461),n.e(83258),n.e(51521),n.e(54801)]).then(n.bind(n,146142));return{Marketplace:e}})),wr=(0,Le().kF)(yr,(e=>e.Marketplace));var kr=()=>n(26796),xr=()=>n(589525),Cr=()=>n(524434),Ir=(n(821057),()=>n(730120)),_r=()=>n(947115);async function Tr(e,t){const n=await Ue().callApi({eventName:"stripeGetTestClock",environment:t,data:{spaceId:e}});if("success"===n.type){if("advancing"===n.data.status)throw new Error("Test clock is advancing. Please try again in a few seconds.");return n.data.epochSeconds}}async function Pr(e){const{environment:t,spaceId:n,advanceTestClockArgument:o}=e;if(o)return"number"==typeof o?o:"function"==typeof o?await async function(e){const{environment:t,spaceId:n,callback:o}=e,r=await Tr(n,t);if(r)return o(r)}({environment:t,spaceId:n,callback:o}):"object"==typeof o?await async function(e){const{environment:t,spaceId:n,durationLike:o}=e,r=await Tr(n,t);if(!r)return;const a=Ir().ou.fromSeconds(r),i=Ir().nL.fromDurationLike(o);return a.plus(i).toSeconds()}({environment:t,spaceId:n,durationLike:o}):void 0}var jr=()=>n(435308);const Ur=new(Le().Ss)("PageLayoutEditor",(async()=>Promise.all([n.e(62743),n.e(52774),n.e(44832),n.e(39938),n.e(90698),n.e(84885),n.e(37358),n.e(5242),n.e(7312),n.e(90424),n.e(81580),n.e(84325),n.e(31189),n.e(69343),n.e(46293),n.e(94556),n.e(78701),n.e(38804),n.e(17100),n.e(11846),n.e(70355),n.e(2971),n.e(80741),n.e(72586),n.e(53335),n.e(71896),n.e(46616),n.e(54940),n.e(49396),n.e(98721),n.e(98032),n.e(57229),n.e(63707),n.e(86609),n.e(91253),n.e(4642),n.e(5006),n.e(6612),n.e(61171),n.e(23179),n.e(75377),n.e(31020),n.e(2942),n.e(73682),n.e(58591),n.e(54803),n.e(1953),n.e(10216),n.e(58565),n.e(69197),n.e(42055),n.e(38739),n.e(44751),n.e(81567),n.e(63257),n.e(34291),n.e(1913),n.e(56054),n.e(95076),n.e(92341),n.e(82658),n.e(4163),n.e(69583),n.e(22759),n.e(20343),n.e(21820),n.e(46945),n.e(10553),n.e(67019),n.e(27039),n.e(25265),n.e(14581),n.e(38632),n.e(61651),n.e(88702),n.e(54307),n.e(43184),n.e(87647),n.e(75861),n.e(46257),n.e(15819),n.e(45376),n.e(74943),n.e(23721),n.e(58461),n.e(72329),n.e(19592),n.e(3331),n.e(98672),n.e(52658),n.e(44642),n.e(78),n.e(58586)]).then(n.bind(n,220025)))),Er=(0,Le().kF)(Ur,(e=>e.PageLayoutEditor)),Mr=new(Le().Ss)("SiteSettingsLayoutEditor",(async()=>await Promise.all([n.e(62743),n.e(52774),n.e(90698),n.e(84885),n.e(37358),n.e(5242),n.e(7312),n.e(90424),n.e(81580),n.e(84325),n.e(31189),n.e(69343),n.e(46293),n.e(2971),n.e(80741),n.e(72586),n.e(53335),n.e(71896),n.e(46616),n.e(54940),n.e(49396),n.e(98721),n.e(98032),n.e(57229),n.e(63707),n.e(86609),n.e(91253),n.e(4642),n.e(5006),n.e(6612),n.e(61171),n.e(23179),n.e(75377),n.e(31020),n.e(2942),n.e(73682),n.e(58591),n.e(54803),n.e(1953),n.e(10216),n.e(58565),n.e(69197),n.e(42055),n.e(38739),n.e(44751),n.e(81567),n.e(77404),n.e(72510)]).then(n.bind(n,457088)))),Lr=(0,Le().kF)(Mr,(e=>e.SiteSettingsLayoutEditor));function Rr(e){const{mainEditorCurrentBlockStore:t,currentCollectionViewStore:n}=(0,O().Kw)(Je().default),o=(0,O().VK)((()=>{const o=e.routerState;if("team"===o.route.name)return{store:void 0,collectionViewStore:void 0,routerState:o};return t?{store:t,collectionViewStore:n,routerState:o}:void 0}),[n,t,e.routerState]),r=(0,O().VK)((()=>Ar.getState()),[]),a=(0,O().VK)((()=>Vr.getState()),[]);return r?(0,m.jsx)(Er,{}):o?a?(0,m.jsx)(Lr,{}):(0,m.jsx)(Oe().Z,{...o}):null}const Ar=new(jr().default)((()=>{const e=kr().Z.getState();return e.isOpen&&"layout-editor"===e.mode}),{debugName:"isPageLayoutEditorOpenStore"}),Vr=new(jr().default)((()=>{const e=kr().Z.getState();return e.isOpen&&"site-settings-editor"===e.mode}),{debugName:"isSiteSettingsLayoutEditorOpenStore"});var Zr=()=>n(770455),Br=()=>n(466970),Nr=()=>n(106342),Or=()=>n(853249),Dr=()=>n(297861);function qr(){const e=(0,h().O7)(),{isPhone:t,isTablet:n}=(0,h().Fy)(),o=(0,O().VK)((()=>(0,xr().in)(e)),[e]),r=(0,Dr().Y)("supportsNativeHome"),a=(0,Br().E)("tablet_refresh_gate");return t||n&&!a?r?(0,m.jsx)(Zr().nP,{}):(0,m.jsx)(Nr().wT,{}):(0,m.jsx)(Kr,{isExpanded:o})}function Kr(e){let{isExpanded:t}=e;const n=(0,h().O7)(),r=n.device.isElectronMac,a=(0,O().VK)((()=>void 0!==I().k_(n).state),[n]),i=(0,O().VK)((()=>(0,An().Sr)(n)),[n]),s=(0,O().VK)((()=>k().default.checkGate({gateName:"sharing_anyone_with_the_link"})&&"sidebar"===k().default.getEligibleGroup({experimentId:"sharing_logged_out_view_awtl",defaultGroup:"control"})&&(0,xr().pW)()),[]),c=(0,o.useCallback)((()=>(0,m.jsx)(Or().Z,{skipFadeinDelay:!0})),[]),{isTablet:l}=(0,h().Fy)();return(0,m.jsx)(Nr().wU,{isElectronMac:r,isTablet:l,isExpanded:t,renderLoading:c,forceRenderLoading:!a&&!(i||s)})}const Fr=(0,Le().kF)(new(Le().Ss)("NotionBanners",(()=>Promise.all([n.e(62743),n.e(80317),n.e(4334)]).then(n.bind(n,991853)))),(e=>e.default)),zr=new(Le().Ss)("NotionModals",(()=>Promise.all([n.e(62743),n.e(17100),n.e(43184),n.e(87647),n.e(43689),n.e(49076)]).then(n.bind(n,649076)))),Wr=(0,Le().kF)(zr,(e=>e.default));const Hr=function(e){let{routerState:t}=e;const r=(0,h().O7)();(0,o.useEffect)((()=>{var e;if(null!==(e=r.mobileNative)&&void 0!==e&&e.api.appComponentMountState)return r.mobileNative.api.appComponentMountState(!0),()=>{var e;null!==(e=r.mobileNative)&&void 0!==e&&e.api.appComponentMountState&&r.mobileNative.api.appComponentMountState(!1)}}),[r]);const{route:a}=t,i=(0,O().VK)((()=>Je().default.state.mainEditorCurrentBlockStore),[]),s=(0,O().VK)((()=>n(658096).default.state.publicPageData),[]),{shouldShowSidebar:c,shouldShowFrame:l,shouldShowError:d,shouldRedirectFromHome:u}=(0,O().VK)((()=>I().h1(r)),[r]),p=(0,O().VK)((()=>"page"===a.name&&Sr().default.state.open&&(0,Rn().S4)(Sr().default.state.blockStore)),[a.name]),f=(0,kn().xU)(),g=(0,O().VK)((()=>{const{device:e}=r;return"chat"!==a.name&&("marketplace"!==a.name&&(!Ar.state&&(!Vr.state&&(!f&&Cr().KR.shouldShowAssistantInCorner(e)))))}),[r,a.name,f]),v=(0,O().VK)((()=>!r.device.isMobile&&!Ar.state),[r.device.isMobile]),b=(0,O().VK)((()=>{if(!r.currentUser.isLoggedIn())return!1;if(r.device.isMobile)return!1;const{mainEditorCurrentBlockStore:e,currentSpaceStore:t}=Je().default.state;return!(!e||!t)&&(!(0,Rn().IJ)(r,e)&&(!g&&(!Ar.state&&!Vr.state)))}),[r,g]),S=(0,O().VK)((()=>Cr().KR.isFullPageAssistantChatEnabled(r.device)),[r]),y=(0,O().VK)((()=>{const{device:e}=r;return!!e.isMobileNative&&("page"===a.name?Cr().KR.isXMLAssistantEnabled():void 0)}),[r,a.name]),w=S&&"chat"===a.name,k=(0,O().VK)((()=>c&&!(0,xr().Jr)(r)&&n(291335).sidebarOpenStore.state),[r,c]),x=(0,O().VK)((()=>(0,n(390952).u)(r)),[r]),C=(0,O().VK)((()=>(0,ln().GD)(void 0)),[]),_=(0,O().VK)((()=>Je().default.state.renderPhase),[]),T=(0,O().VK)((()=>kr().Z.state.isOpen&&"layout-editor"===kr().Z.state.mode),[]);return function(){const e=["local","staging","development"].includes("production"),t=(0,h().O7)();(0,o.useEffect)((()=>{e&&((0,_r().exposeDebugValue)("refreshTestClock",(async()=>{var e;const n=null===(e=Je().default.state.currentSpaceStore)||void 0===e?void 0:e.id;if(n){const e=await Tr(n,t);if(e){const t=Ir().ou.fromSeconds(e);console.log(`Test clock time is ${t.toString()} (${e} seconds)`)}}})),(0,_r().exposeDebugValue)("advanceTestClock",(async e=>{var n;if(!e)throw new Error("advanceTestClock requires an argument. You can pass an epoch timestamp in seconds, a relative DurationLike object like { months: 2 }, or a function that takes the current epoch seconds and returns the new epoch seconds.");const o=null===(n=Je().default.state.currentSpaceStore)||void 0===n?void 0:n.id;if(!o)return;const r=await Pr({environment:t,spaceId:o,advanceTestClockArgument:e});r&&await Ue().callApi({eventName:"stripeAdvanceTestClock",environment:t,data:{spaceId:o,epochSeconds:r}})})))}),[e,t])}(),(0,m.jsxs)(Qe,{children:[c&&(0,m.jsx)(qr,{}),l&&(i||T||"team"===t.route.name)&&(0,m.jsx)(Rr,{routerState:t}),w&&"chat"===a.name&&!T&&(0,m.jsx)(Kt().LazyAssistantFullPageChat,{}),"marketplace"===a.name&&(0,m.jsx)(wr,{}),"aiInferenceTranscript"===a.name&&(0,m.jsx)(qt,{threadId:a.threadId,configType:a.configType,defaultUserMessage:a.defaultUserMessage}),c&&(0,m.jsx)(vr,{}),p&&(0,m.jsx)(fr,{}),(d||u)&&!p&&"aiInferenceTranscript"!==t.route.name&&(0,m.jsx)(pt().I,{route:t.route,publicPageData:s,shouldRedirectFromHome:u}),k&&(0,m.jsx)(Gr,{}),(0,m.jsx)(Wt,{}),b&&(0,m.jsx)(n(174491).Z,{}),g&&(0,m.jsx)(Kt().LazyAssistantMenuPopup,{}),r.device.isMobile&&(0,m.jsx)(sn().wI,{}),y&&(0,m.jsx)(Kt().LazyMobileAssistantPendingOperationsCollapsedElement,{}),g&&(0,m.jsx)(Kt().LazyAssistantOriginElement,{}),(0,m.jsx)(Qt,{}),C&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(n(169793).u7,{}),(0,m.jsx)(Ot().oF,{})]}),x&&(0,m.jsx)(Xt,{}),!r.device.isMobile&&"nativeTab"!==t.route.name&&(0,m.jsx)(pr,{}),"rendered"!==_||r.device.isMobile?null:(0,m.jsx)(n(604258).r2,{}),v&&i&&(0,m.jsx)(n(657174).$H,{currentBlockStore:i,isElectronMac:r.device.isElectronMac}),(0,m.jsx)(sn().AZ,{}),(0,m.jsx)(Fr,{}),(0,m.jsx)(Wr,{}),!1,(0,m.jsx)(Yr,{})]})};function $r(){mn().close()}function Gr(){const e=(0,h().O7)(),t=(0,O().VK)((()=>function(e){return{position:"absolute",top:0,left:(0,xr().qG)(e),right:0,bottom:0,zIndex:F().l6}}(e)),[e]);return(0,m.jsx)("div",{style:t,onClick:$r})}function Yr(){const{currentSpaceStore:e,currentUserStore:t,renderPhase:n}=(0,O().VK)((()=>{const{currentSpaceStore:e,currentUserStore:t,renderPhase:n}=Je().default.state;return{currentSpaceStore:e,currentUserStore:t,renderPhase:n}}),[]);return e&&t&&"rendered"===n?(0,m.jsx)(br,{spaceStore:e,userStore:t},`${e.id}-${null==t?void 0:t.id}`):null}function Xr(){const e=(0,h().O7)();(0,o.useEffect)((()=>{!y().default.isAdminMode&&e.currentUser.isLoggedIn()&&Je().default.waitUntil((()=>{const t=Je().default.state.currentUserSettingsStore,n=(null==t?void 0:t.isDefined())??!1;if(t&&n){const n=t.getSettings(),o=null==n?void 0:n.disable_auto_set_timezone;n&&!o&&Ie().wk({environment:e,userSettingsStore:t})}return n}))}),[e]),(0,o.useEffect)((()=>{function t(){const{RouterStore:t,currentUser:n}=e,o=n.id;we().Vz({historyId:t.state.id,currentUserId:o}),E().navigationReady(!1)}return window.addEventListener("beforeunload",t),()=>window.removeEventListener("beforeunload",t)}),[e]),(0,o.useEffect)((()=>{async function t(t){const{RouterStore:n}=e,o=window.location.href,r=t.state?t.state.currentUserId:void 0;let a=e;(0,St().L0)({environment:e}),r&&r!==e.currentUser.id&&(a=await _e().x({environment:a,newCurrentUserId:r}));const i=n.state.route,s=de().parseRoute({url:o,isMobile:a.device.isMobile,baseUrl:y().default.domainBaseUrl,publicDomainName:y().default.publicDomainName,protocol:y().default.protocol,currentUrl:window.location.href}),c="page"===i.name&&"page"===s.name&&i.blockId===s.blockId,l="onboarding"!==i.name&&"onboarding"===s.name;we().Vz({historyId:n.state.id,currentUserId:r}),await Ce().ep({environment:a,id:t.state&&t.state.id||(0,ge().ZP)(),action:"pop",href:o}),l&&!e.device.isMobileNative&&xe().c4({environment:a,url:ue()._j.root}),c&&xe().Oj(a)}return window.addEventListener("popstate",t),()=>window.removeEventListener("popstate",t)}),[e]),(0,ie().K)((()=>{E().subscribeToProtocolUrl((t=>function(e,t){ea("string"==typeof e?e:e.url,!1,!1,t)}(t,e))),E().subscribeToSettingsMenuItem(Qr),E().navigationReady(!0),E().onNewWindow(((t,n)=>{xe().c4({environment:e,url:n,openInNew:"tab"})}))})),(0,o.useEffect)((()=>{e.mobileNative&&e.mobileNative.subscribeToOpenLink(((t,n,o)=>ea(t,n,o,e)))}),[e]);const t=(0,O().Kw)(e.RouterStore);(0,o.useEffect)((()=>{var e;"root"===t.route.name||"page"===t.route.name||"space"===t.route.name||"blank"===t.route.name&&0===(null===(e=t.historyState)||void 0===e?void 0:e.index)||(Se().setInitialRenderCompleted(),Je().default.setState({...Je().default.state,renderPhase:"rendered"}))}),[t]),(0,o.useEffect)((()=>{e.currentUser.isLoggedIn()||"page"===t.route.name||"space"===t.route.name||se().j({device:e.device,event:{facebook:{eventName:"PageView",data:{content_name:window.location.href}},google:{eventName:"pageView",path:window.location.pathname}},cookieService:e.cookieService})}),[e.cookieService,e.currentUser,e.device,t.route.name]),(0,o.useEffect)((()=>{const t=Je().default.state.currentUserSettingsStore;e.currentUser.isLoggedIn()&&t&&Te().dM(e,t)}),[e]);const{device:r}=e;if(r.isNative&&de().lQ[t.route.name])return(0,m.jsx)($e,{});if("front"===t.route.name)return(0,m.jsx)(Ne,{preventFrontRedirect:t.route.alreadyRedirected});if("root"===t.route.name)return(0,m.jsx)(De,{route:t.route});if("nativeRedirect"===t.route.name||"nativeMailRedirect"===t.route.name||"nativeCalendarRedirect"===t.route.name)return(0,m.jsx)(Fe,{redirect:t.route.redirect,callbackType:"nativeMailRedirect"===t.route.name?"nativemailredirect":"nativeCalendarRedirect"===t.route.name?"nativecalendarredirect":"nativeredirect"});if("login"===t.route.name||"login/calendar"===t.route.name||"login/mail"===t.route.name)return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(yt().AuthSyncListener,{}),(0,m.jsx)(Ze().R7,{isSignup:!1,email:t.route.email,redirectURL:t.route.redirectURL})]});if("addAnotherAccount"===t.route.name)return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(yt().AuthSyncListener,{}),(0,m.jsx)(bt,{redirectURL:t.route.redirectURL})]});if("desktopEmailConfirm"===t.route.name)return(0,m.jsx)(Ae,{});if("teamsInvite"===t.route.name){const{teamId:n}=t.route;return be().uA(e,{teamId:n}),(0,m.jsx)(qe().Z,{fetch:async()=>{const t=new(It().zX)(e,{table:pe().e0,id:n});await t.load()},render:()=>(0,m.jsx)(Nt,{teamId:n})})}if("signup"===t.route.name||"signup/calendar"===t.route.name||"signup/mail"===t.route.name)return(0,m.jsx)(Ze().R7,{isSignup:!0,email:t.route.email});if("unsubscribe"===t.route.name)return(0,m.jsx)(Me,{payload:t.route.payload});if("onboarding"===t.route.name)return(0,m.jsx)(lt,{});if("upcomingInvoice"===t.route.name)return(0,m.jsx)(st().A,{route:t.route});if("invoiceById"===t.route.name)return(0,m.jsx)(st().A,{route:t.route});if("settingsConsoleOrganization"===t.route.name){if(e.currentUser.isLoggedIn())return(0,m.jsx)(ut,{organizationId:t.route.organizationId,tabRoute:t.route.tabRoute,properties:t.route.properties,params:t.route.params});{const e=(0,fe().a5)({organizationId:t.route.organizationId,tabRoute:t.route.tabRoute,properties:t.route.properties,queryParams:t.route.params}),n=he().bf({url:`${y().default.domainBaseUrl}${ue()._j.login}`,query:{redirectURL:e}});return(0,m.jsx)(Jr,{url:n})}}if(t.route.name,t.route.name,"admin"===t.route.name&&y().default.isAdminMode)return(0,m.jsx)(qe().Z,{fetch:()=>Promise.all([n.e(62743),n.e(40782),n.e(91253),n.e(75377),n.e(41455),n.e(62849),n.e(46596),n.e(12328)]).then(n.bind(n,787721)),render:e=>{let{default:t}=e;return(0,m.jsx)(t,{})}});if("adminListData"===t.route.name){const{category:e}=t.route;if(y().default.isAdminMode)return(0,m.jsx)(qe().Z,{fetch:()=>Promise.all([n.e(62743),n.e(40782),n.e(91253),n.e(75377),n.e(41455),n.e(62849),n.e(46596),n.e(12328)]).then(n.bind(n,743467)),render:t=>{let{default:n}=t;return(0,m.jsx)(n,{category:e})}})}if("adminSingleRecord"===t.route.name&&y().default.isAdminMode){const{id:e,table:o}=t.route;return(0,m.jsx)(qe().Z,{fetch:()=>Promise.all([n.e(62743),n.e(40782),n.e(91253),n.e(75377),n.e(41455),n.e(62849),n.e(46596),n.e(33854)]).then(n.bind(n,201798)),render:t=>{let{default:n}=t;return(0,m.jsx)(n,{table:o,id:e})}})}if("oauthAuthorization"===t.route.name){const{responseType:e,redirectUri:o,integrationId:r,state:a,owner:i,userId:s,spaceId:c}=t.route;return(0,m.jsx)(qe().Z,{fetch:()=>Promise.all([n.e(62743),n.e(52774),n.e(19592),n.e(49818),n.e(3370)]).then(n.bind(n,437743)),render:t=>{let{default:n}=t;return(0,m.jsx)(n,{responseType:e,redirectUri:o,integrationId:r,state:a,owner:i,userId:s,spaceId:c})}})}if("passkeyAuthVerify"===t.route.name){const{callbackType:e}=t.route;return(0,m.jsx)(qe().Z,{fetch:()=>Promise.all([n.e(42941),n.e(72679)]).then(n.bind(n,187406)),render:t=>{let{VerifyPasskeyRedirectPage:n}=t;return(0,m.jsx)(n,{callbackType:e})}})}if("notionCalendarAuthorization"===t.route.name){const{csrf:e,calendarCsrf:o,redirectUri:r,spaceId:a,state:i}=t.route;return(0,m.jsx)(qe().Z,{fetch:()=>n.e(7304).then(n.bind(n,29117)),render:t=>{let{default:n}=t;return(0,m.jsx)(n,{csrf:e,calendarCsrf:o,redirectUri:r,spaceId:a,state:i})}})}if("globalOauthPostLogin"===t.route.name){const{clientId:e,redirectUri:o,state:r,responseType:a,scope:i}=t.route;return(0,m.jsx)(qe().Z,{fetch:()=>Promise.all([n.e(49818),n.e(14464)]).then(n.bind(n,859672)),render:t=>{let{default:n}=t;return(0,m.jsx)(n,{clientId:e,redirectUri:o,csrfState:r,responseType:a,scope:i})}})}if("passkeyRegistrationVerification"===t.route.name){const{callbackType:o,csrfToken:r,attemptId:a,options:i}=t.route;return(0,m.jsx)(qe().Z,{fetch:()=>n.e(74528).then(n.bind(n,632759)),render:t=>{let{AddPasskeyRedirectPage:n}=t;return(0,m.jsx)(n,{environment:e,callbackType:o,csrfToken:r,attemptId:a,options:i})}})}if("initiateExternalAuthentication"===t.route.name){const{notion_user_id:e,notion_workspace_id:o,notion_last_visited_url:r,notion_authorization_code:a,external_object_instance_block_id:i,callback_type:s,integration_id:c,redirectToAuth:l}=t.route;return(0,m.jsx)(qe().Z,{fetch:()=>n.e(91023).then(n.bind(n,848398)),render:t=>{let{default:n}=t;return(0,m.jsx)(n,{notion_user_id:e,notion_workspace_id:o,notion_last_visited_url:r,notion_authorization_code:a,external_object_instance_block_id:i,callback_type:s,integration_id:c,redirectToAuth:l})}})}if("initiateExternalAuthenticationFromDesktop"===t.route.name){const{redirectUri:o}=t.route;if(e.currentUser.isLoggedIn())return(0,m.jsx)(qe().Z,{fetch:()=>n.e(73871).then(n.bind(n,777868)),render:e=>{let{default:t}=e;return(0,m.jsx)(t,{redirectUri:o})}});{const e=he().bf({url:`${y().default.domainBaseUrl}${ue()._j.initiateExternalAuthenticationFromDesktop}`,query:{redirectUri:o}}),t=he().bf({url:`${y().default.domainBaseUrl}${ue()._j.login}`,query:{redirectURL:e}});return me().hw(),(0,m.jsx)(Jr,{url:t})}}if("myIntegrations"===t.route.name)return(0,m.jsx)(Jr,{url:ue()._j.creatorProfileIntegrations});if("inAppTemplateSubmission"===t.route.name)return(0,m.jsx)(Jr,{url:ue()._j.creatorProfileTemplates});if("inAppTemplateCreatorSubmission"===t.route.name)return(0,m.jsx)(Jr,{url:ue()._j.creatorProfile});if("creatorProfile"===t.route.name||"creatorProfileTemplates"===t.route.name||"creatorProfileIntegrations"===t.route.name||"creatorProfileAnalytics"===t.route.name||"creatorProfileCoupons"===t.route.name){if(e.currentUser.isLoggedIn())return"pointer"in t.route?(0,m.jsx)(rt,{publish:!!t.route.publish,lab:!!t.route.lab,botOrIntegrationPointer:t.route.pointer}):(0,m.jsx)(rt,{publish:!1,lab:!1,botOrIntegrationPointer:void 0});{const e=he().bf({url:`${ue()._j[t.route.name]}`}),n=he().bf({url:`${y().default.domainBaseUrl}${ue()._j.login}`,query:{redirectURL:e}});return(0,m.jsx)(Jr,{url:n})}}if("localizedTemplates"===t.route.name){if(e.currentUser.isLoggedIn())return(0,m.jsx)(vt,{});{const e=he().bf({url:`${ue()._j[t.route.name]}`}),n=he().bf({url:`${y().default.domainBaseUrl}${ue()._j.login}`,query:{redirectURL:e}});return(0,m.jsx)(Jr,{url:n})}}if("studentGroupSignup"===t.route.name)return(0,m.jsx)(Tt,{});if("startupsApplication"===t.route.name)return(0,m.jsx)(kt,{formType:"startups"});if("smbsApplication"===t.route.name)return(0,m.jsx)(kt,{formType:"smb"});if("lennyApplication"===t.route.name)return(0,m.jsx)(Ct,{});if("githubStudentPackHome"===t.route.name)return(0,m.jsx)(ft,{});if("notFound"===t.route.name)return(0,m.jsx)(pt().I,{route:t.route,publicPageData:void 0});if("blank"===t.route.name)return(0,m.jsx)(it,{});if("modal"===t.route.name&&!e.currentUser.isLoggedIn()&&(t.route.templateGalleryItem||t.route.projectManagementLaunch)){const e={};return t.route.projectManagementLaunch?e.tg="gallery":t.route.templateGalleryItem&&(e.tg=t.route.templateGalleryItem),(0,m.jsx)(Jr,{url:ue()._j.login,queryParams:e})}if("chat"===t.route.name&&!e.currentUser.isLoggedIn()){const e=(0,ce().u3)(t.route),n=(0,he().bf)({url:`${y().default.domainBaseUrl}${ue()._j.login}`,query:{redirectURL:e}});return(0,m.jsx)(Jr,{url:n})}if("marketplace"===t.route.name&&!e.currentUser.isLoggedIn()){const e=(0,le().No)(y().default,t.route),n=(0,he().bf)({url:`${y().default.domainBaseUrl}${ue()._j.login}`,query:{redirectURL:e}});return(0,m.jsx)(Jr,{url:n})}return"quickSearch"===t.route.name?(0,m.jsx)(nt,{}):"page"===t.route.name||"space"===t.route.name||"nativeTab"===t.route.name||"modal"===t.route.name||"chat"===t.route.name||"aiInferenceTranscript"===t.route.name||"marketplace"===t.route.name||"team"===t.route.name?(0,m.jsx)(Hr,{routerState:t}):(0,m.jsx)(Pe().Z,{})}function Jr(e){let{url:t,queryParams:n}=e;const r=(0,h().O7)(),a=(0,o.useRef)(!1);return(0,o.useEffect)((()=>{a.current||(a.current=!0,n&&ke().j({currentUserId:void 0,params:n}),xe().c4({environment:r,url:t,redirect:!0}))}),[r,n,t]),(0,m.jsx)(Pe().Z,{})}function Qr(e){ye().r$({currentTab:e})}function ea(e,t,n,o){const{RouterStore:r}=o,a=ve().RD({url:e,protocol:y().default.protocol,baseUrl:y().default.domainBaseUrl}),i=ve().u5({schemeUrl:a,baseUrl:y().default.domainBaseUrl}),s=de().parseRoute({url:i,baseUrl:y().default.domainBaseUrl,publicDomainName:y().default.publicDomainName,isMobile:o.device.isMobile,protocol:y().default.protocol,currentUrl:window.location.href});(o.device.isAndroid||t)&&we().Hu({RouterStore:r,currentUserId:o.currentUser.id}),o.mobileNative&&o.mobileNative.closeInAppBrowser(),"googleAuthCallback"!==s.name&&"samlAuthCallback"!==s.name&&"passkeyAuthCallback"!==s.name?xe().c4({environment:o,url:i,redirect:t,updateMobileTabbedRouterArgs:{clearNativeRootPageOverride:n},queryId:"page"===s.name?s.queryId:void 0}):xe().c4({environment:o,url:i})}const ta=!1;function na(e){let{environment:t,onMount:n}=e;const d=(0,o.useRef)(!1);(0,o.useEffect)((()=>{d.current||(d.current=!0,null==n||n())}),[n]),(0,o.useEffect)((()=>{I().rq()}),[]);const u="system"===window.notionTheme?l().vn(t):window.notionTheme,p=ta?o.StrictMode:o.Fragment;return(0,m.jsx)(p,{children:(0,m.jsx)(a().B,{value:t,children:(0,m.jsxs)(i().z,{value:{mode:u},children:[(0,m.jsx)(c().Pj,{defaultLocale:"en-US",locale:s().locale,messages:s().s,children:(0,m.jsx)(f,{...g(t.device),children:(0,m.jsx)(r().Z,{fallback:(e,t)=>(0,m.jsx)(V,{error:e,errorInfo:t}),children:(0,m.jsxs)(C,{id:"app",targetRenderPhase:"mount",children:[(0,m.jsx)(ae().Z,{}),(0,m.jsx)(re,{children:(0,m.jsx)(Xr,{})})]})})})}),(0,m.jsx)(T,{})]})})})}},685375:(e,t,n)=>{n.d(t,{Z:()=>k});n(267602),n(470928),n(228244);var o=n(667294),r=()=>n(219727),a=()=>n(523709),i=()=>n(491927),s=()=>n(959137),c=()=>n(964433),l=()=>n(542058),d=()=>n(141735),u=()=>n(267629),p=()=>n(465371),m=()=>n(677559),f=()=>n(32969),g=()=>n(340819),v=()=>n(749826),h=()=>n(475335),b=()=>n(645805),S=()=>n(965903),y=()=>n(65344),w=n(785893);function k(e){const t=(0,r().O7)(),{value:n}=(0,m().XJ)(c().p),{value:i}=(0,m().XJ)(l().m),{value:u}=(0,m().XJ)(d().F.formulas),{value:p}=(0,m().XJ)(s().F.clipboardActions),f=(0,o.useRef)(),g=(0,o.useRef)();(0,o.useEffect)((()=>{function e(e){e.clientX===f.current&&e.clientY===g.current||(f.current=e.clientX,g.current=e.clientY,h().default.setKeyboardMode(!1))}return window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousemove",e)}}),[]);const v=(0,o.useMemo)((()=>function(e,t,n,o,r){const i={};for(const s of a().L6)for(const a of s.shortcuts)i[a]=i=>C(a,i,e,t,n,o,r);return i}(p,u,n,i,t)),[t,u,n,i,p]);return(0,w.jsx)(y().t,{debugName:e.debugName,priority:e.priority,enable:e.capture,shortcuts:v})}function x(){return!function(){const e=document.querySelector("#intercom-container");return!(!e||!e.contains(document.activeElement))}()&&!(g().Z.state.isActive&&!v().default.checkGate({gateName:"block_menu_shortcut_fix"}))}function C(e,t,n,o,r,s,c){if(!x())return;const l=S().default.state.stores,d=S().default.state.pivot||l[0],m=d&&f().C.getRectFromStore(d),y=a().L6.find((t=>!!t.shortcuts.some((t=>t===e))&&u().vG(t,{environment:c,blocks:l,originRect:m,publicEditMode:void 0})));if(y){"keydown"===t.type&&t.preventDefault&&t.preventDefault();const e=g().Z.state.isActive;y.action({environment:c,blocks:l,originRect:m,publicEditMode:void 0,lazyDependencies:{clipboardActions:n,formulasModule:o,markdownLinkifyIt:r,tinyMceMicrosoftWordPasteFilter:s}},t);const a=l[0];let d,u,f,S;var w;if(a)d=a.getType(),u=d?(0,p()._A)(d,a.getFormat()):void 0,f=null===(w=a.getCollectionStore())||void 0===w?void 0:w.id,S=a.getParentCollectionIdUpToTwoLevels();i().dh(c,{analyticsName:y.analyticsName,action_type:y.analyticsActionType,from:"keyboard_shortcut",block_id:null==a?void 0:a.id,block_type:d,is_toggleable:u,collection_id:f,parent_collection_id:S}),k={resetBlockMenuStore:e},h().default.setKeyboardMode(!0),b().default.reset(),v().default.checkGate({gateName:"block_menu_shortcut_fix"})&&k.resetBlockMenuStore&&g().Z.reset()}var k}},985338:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(667294),r=()=>n(142735),a=()=>n(557576),i=n(785893);const s=function(e){const t=(0,n(219727).Fy)(),s=(0,r().VK)((()=>({initiator:n(158083).Z.state.initiator,isDragging:n(960562).default.state.isDragging})),[]),c=(0,r().VK)((()=>a().default.state.isActive),[]),l=(0,r().VK)((()=>!!a().default.state.isActive&&a().default.state.moved?"default":s.isDragging?"-webkit-grabbing":"text"),[s.isDragging]),d=(0,o.useMemo)((()=>{let e="notion-cursor-listener";return"-webkit-grabbing"===l&&(e+=" notion-disable-local-cursor"),e}),[l]);return(0,o.useEffect)((()=>{t.isIOS&&("touch"===s.initiator||s.isDragging||c?document.body.classList.add("notion-disable-webkit-user-select"):document.body.classList.remove("notion-disable-webkit-user-select"))}),[t.isIOS,s.initiator,s.isDragging,c]),(0,i.jsx)("div",{style:{...e.style,cursor:l},className:d,children:e.children})}},44105:(e,t,n)=>{n.d(t,{Z:()=>C});var o=n(667294),r=()=>n(219727),a=()=>n(142735),i=()=>n(846550),s=()=>n(989478),c=()=>n(499110),l=()=>n(788860),d=()=>n(491927),u=()=>n(421654),p=()=>n(269299),m=()=>n(168441),f=()=>n(827282),g=n(785893);const v=(0,f().IU)("mobileLocked",{viewBox:"0 0 26 26",svg:(0,g.jsx)("path",{d:"M7.88672 23.417H18.1133C19.499 23.417 20.1758 22.7295 20.1758 21.2256V13.3408C20.1758 11.9873 19.6172 11.2891 18.4678 11.1709V8.46387C18.4678 4.41406 15.8145 2.45898 13 2.45898C10.1855 2.45898 7.53223 4.41406 7.53223 8.46387V11.2246C6.47949 11.3857 5.82422 12.0732 5.82422 13.3408V21.2256C5.82422 22.7295 6.50098 23.417 7.88672 23.417ZM9.26172 8.23828C9.26172 5.54199 10.9912 4.11328 13 4.11328C15.0088 4.11328 16.7383 5.54199 16.7383 8.23828V11.1602L9.26172 11.1709V8.23828Z"})}),h=(0,f().IU)("mobileUnlocked",{viewBox:"0 0 32 26",svg:(0,g.jsx)("path",{d:"M7.89355 23.417H18.1094C19.4951 23.417 20.1826 22.7295 20.1826 21.2256V13.3408C20.1826 12.0303 19.6562 11.332 18.582 11.1816V8.23828C18.582 5.54199 20.3115 4.11328 22.3203 4.11328C24.3291 4.11328 26.0586 5.54199 26.0586 8.23828V10.623C26.0586 11.2783 26.4346 11.6006 26.9287 11.6006C27.4014 11.6006 27.7881 11.3105 27.7881 10.623V8.46387C27.7881 4.41406 25.1348 2.45898 22.3203 2.45898C19.5059 2.45898 16.8525 4.41406 16.8525 8.46387V11.1602L8.1084 11.1816C6.72266 11.1816 5.82031 11.8584 5.82031 13.3408V21.2256C5.82031 22.7295 6.50781 23.417 7.89355 23.417Z"})}),b=(0,f().IU)("unlockedFilled",{viewBox:"0 0 16 16",svg:(0,g.jsx)("path",{d:"M2.33301 14.6338H8.94336C9.85938 14.6338 10.3105 14.1826 10.3105 13.1914V8.08496C10.3105 7.2168 9.95508 6.75195 9.24414 6.65625V4.83105C9.24414 3.22461 10.2627 2.35645 11.4863 2.35645C12.71 2.35645 13.7354 3.22461 13.7354 4.83105V6.28711C13.7354 6.76562 14.0156 7.01855 14.3848 7.01855C14.7471 7.01855 15.0273 6.7793 15.0273 6.28711V4.96094C15.0273 2.36328 13.2979 1.1123 11.4863 1.1123C9.6748 1.1123 7.94531 2.36328 7.94531 4.96094V6.64258L2.44922 6.64941C1.5332 6.64941 0.96582 7.10742 0.96582 8.08496V13.1914C0.96582 14.1826 1.41699 14.6338 2.33301 14.6338Z"})});var S=()=>n(482162),y=()=>n(826955),w=()=>n(154186),k=()=>n(654133),x=()=>n(49489);const C=function(e){let{store:t,disableTooltip:o,hideText:i,isInlineCollection:s,buttonStyle:c,lockStore:l}=e;const{isMobile:d}=(0,r().Fy)(),u=(0,a().qz)(l,n(385021).Z);return d?(0,g.jsx)(M,{store:t,lockStore:u,hideText:i}):(0,g.jsx)(E,{store:t,disableTooltip:o,hideText:i,isMobile:d,isInlineCollection:s,buttonStyle:c,lockStore:u})};function I(e,t,n){return{display:"flex",alignItems:"center",whiteSpace:"nowrap",fontSize:e?12:14,borderRadius:4,padding:"0 6px",marginRight:2,height:24,marginTop:e?1:0,marginLeft:e?0:-5,...t&&{marginLeft:e?8:12,marginRight:0},...n}}function _(e,t,n,o,r){return{...I(e,o,r),color:n.lightTextColor,fill:n.lightIconColor}}function T(e,t,n,o,r){return{...I(e,o,r),paddingLeft:5,border:`1px solid ${n.blueColor}`,color:n.blueColor,fill:n.blueColor}}function P(e){let{store:t}=e;const n=(0,i().Fg)(),o=(0,a().VK)((()=>t.getFormat().block_locked_by),[t]),r=(0,l().YB)(),d=(0,a().VK)((()=>o&&(0,c().Nz)(r,y().t1.createChildStore(t,{table:s().KJ,id:o}).getModel())),[o,r,t]);return o?(0,g.jsx)("div",{children:(0,g.jsx)(l()._H,{defaultMessage:"Locked by {lockedByPerson}{br}to prevent accidental editing.{br}<prompttext>Click to unlock</prompttext>",id:"pageLockIndicator.lockedTooltip",values:{lockedByPerson:(0,g.jsx)("b",{children:d}),br:(0,g.jsx)("br",{}),prompttext:e=>(0,g.jsx)("span",{style:{color:n.mediumInvertedTextColor},children:e})}})}):null}function j(e,t,n){p().createAndCommit({userAction:"PageLockTopbarIndicator.handleLockClick",environment:e,canUndo:!0,perform:n=>{u().Wq({environment:e,store:t,isLocked:!1,transaction:n})}}),n.setState({...n.state,justUnlocked:!0});const o=t.getType();if(o){var r;let n;t.isCollectionView()&&(n=t.getCollectionStore()),d().UJ(e,{from:"topbar",block_type:o,locked:!1,collection_id:null===(r=n)||void 0===r?void 0:r.id})}}function U(e,t,n){p().createAndCommit({userAction:"PageLockTopbarIndicator.handleUnlockClick",environment:e,canUndo:!0,perform:n=>{u().Wq({environment:e,store:t,isLocked:!0,transaction:n})}}),n.setState({...n.state,justUnlocked:!1});const o=t.getType();if(o){var r;let n;t.isCollectionView()&&(n=t.getCollectionStore()),d().UJ(e,{from:"topbar",block_type:o,locked:!0,collection_id:null===(r=n)||void 0===r?void 0:r.id})}}function E(e){let{store:t,disableTooltip:n,hideText:s,isMobile:c,isInlineCollection:d,buttonStyle:u,lockStore:p}=e;const f=(0,i().Fg)(),v=(0,r().O7)(),h=(0,o.useCallback)((()=>U(v,t,p)),[v,t,p]),y=(0,o.useCallback)((()=>j(v,t,p)),[v,t,p]),C=(0,a().VK)((()=>t.isLocked()),[t]),I=(0,a().VK)((()=>p.state.justUnlocked),[p]),E=(0,a().VK)((()=>S().default.state.open&&S().default.state.targetStore.id===t.id),[t.id]);return C?(0,g.jsx)(k().Z,{renderTooltip:()=>(0,g.jsx)(P,{store:t}),disableTooltip:n,render:e=>(0,g.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[E&&(0,g.jsx)(x().Z,{}),(0,g.jsxs)(w().Z,{style:_(c,0,f,d,u),onClick:y,...e,children:[(0,m().Q)({width:16,marginRight:s?void 0:4}),!s&&(0,g.jsx)("div",{style:{lineHeight:1},children:(0,g.jsx)(l()._H,{defaultMessage:"Locked",id:"pageLockIndicator.lockedButton.label"})})]})]})}):I?(0,g.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,g.jsx)(x().Z,{}),(0,g.jsxs)(w().Z,{style:T(c,0,f,d,u),onClick:h,hoveredStyle:{background:f.outlineBlueButtonHoveredBackground},pressedStyle:{background:f.outlineBlueButtonPressedBackground},children:[b({width:16,marginRight:s?void 0:4}),!s&&(0,g.jsx)("div",{style:{lineHeight:1},children:(0,g.jsx)(l()._H,{defaultMessage:"Re-lock",id:"pageLockIndicator.relockButton.label"})})]})]}):null}function M(e){let{store:t,lockStore:n,hideText:s}=e;const c=(0,i().Fg)(),d=(0,r().O7)(),u=(0,o.useCallback)((()=>U(d,t,n)),[d,t,n]),p=(0,o.useCallback)((()=>j(d,t,n)),[d,t,n]),m=(0,a().VK)((()=>t.isLocked()),[t]),{WindowSizeStore:f}=d,b=(0,a().VK)((()=>f.getSafePaddingLeftCSS(10)),[f]),S=(0,a().VK)((()=>f.getSafePaddingRightCSS(14)),[f]),y=(0,a().VK)((()=>n.state.justUnlocked),[n]);return m?(0,g.jsxs)(w().Z,{onClick:p,mobileFeedback:!0,style:{display:"flex",alignItems:"center",height:"100%",paddingLeft:b,paddingRight:S},children:[v({width:20,marginRight:6}),!s&&(0,g.jsx)("div",{children:(0,g.jsx)(l()._H,{defaultMessage:"Locked",id:"pageLockIndicator.mobileLockedButton.label"})})]}):y?(0,g.jsxs)(w().Z,{onClick:u,mobileFeedback:!0,style:{display:"flex",alignItems:"center",width:"100%",height:"100%",paddingLeft:b,paddingRight:S,color:c.blueColor,fill:c.blueColor},children:[h({height:26,width:32,marginRight:6}),!s&&(0,g.jsx)("div",{children:(0,g.jsx)(l()._H,{defaultMessage:"Re-lock",id:"pageLockIndicator.mobileRelockButton.label"})})]}):null}},123256:(e,t,n)=>{n.d(t,{Z:()=>_});var o=n(667294),r=()=>n(219727),a=()=>n(142735),i=()=>n(846550),s=()=>n(492522),c=()=>n(788860),l=()=>n(696459),d=()=>n(82937),u=()=>n(879952),p=()=>n(942226),m=()=>n(505462),f=()=>n(815532),g=()=>n(123145),v=()=>n(690664),h=()=>n(105649),b=()=>n(793935),S=()=>n(589525),y=()=>n(291335),w=()=>n(590972),k=()=>n(998901),x=()=>n(482162),C=()=>n(64260),I=n(785893);const _=function(e){let{type:t}=e;const i=(0,r().O7)(),c=(0,a().qz)(void 0,n(233417).Z),p=(0,o.useRef)(!1),h=(0,o.useCallback)((()=>function(e,t){t.setState({...t.state,mousePressed:!1}),T({isResizing:!1},e)}(t,c)),[t,c]),C=(0,o.useCallback)((()=>function(e,t,n,o){if(!o.current){switch(t){case"page":b().setExpand({environment:e,isExpanded:!y().sidebarExpandedStore.state,from:"sidebar_resizer",saveDetailsSidebarPreference:!0}),y().sidebarOpenStore.setState(!1);break;case"update":b().setUpdateExpand({environment:e,isExpanded:!(0,S().Sx)(e),from:"drag",saveDetailsSidebarPreference:!0});break;case"peek":d().xv({environment:e,from:"resizer_click"});break;case"secondary_sidebar":f().TN({environment:e});break;default:(0,l().t1)(t)}n.setState({...n.state,mouseEntered:!1})}n.setState({...n.state,mousePressed:!1}),T({isResizing:!1},t)}(i,t,c,p)),[i,t,c]),_=(0,o.useCallback)((e=>function(e,t,n,o){switch(m().clear(t),o.current=!0,n){case"page":b().setWidth({width:P(e.currentX,n,t),environment:t});break;case"update":b().setUpdateWidth({width:P(e.currentX,n,t),environment:t});break;case"peek":b().setPeekWidth({width:P(e.currentX,n,t),environment:t});break;case"secondary_sidebar":v().default.setWidth(P(e.currentX,n,t));break;default:(0,l().t1)(n)}}(e,i,t,p)),[i,t]),E=(0,o.useCallback)((()=>function(e,t,n,o){u().ZH({environment:e}),n.setState({...n.state,mousePressed:!0}),o.current=!1,T({...y().sidebarResizingStore.state,isResizing:!0},t)}(i,t,c,p)),[i,t,c]),{device:M}=i,L=(0,a().VK)((()=>function(e){const t=function(e){switch(e){case"page":return y().sidebarWidthStore.state;case"secondary_sidebar":const t=y().sidebarExpandedStore.state,n=g().l_();return t?y().sidebarWidthStore.state+n:n;case"update":return w().default.state.width;case"peek":return x().default.state.preferredSidePeekWidth;default:(0,l().t1)(e)}}(e);switch(e){case"page":case"secondary_sidebar":return t;case"peek":case"update":return window.innerWidth-t;default:(0,l().t1)(e)}}(t)),[t]),R=(0,a().Kw)(y().sidebarMouseEnterYStore),A=(0,a().Kw)(n(197666).Z),V=(0,a().VK)((()=>function(e){return{cursor:"col-resize",height:"100%",width:12,marginLeft:"update"===e?-w().default.state.width:-6}}(t)),[t]),Z=(0,a().VK)((()=>function(e,t){const n=(0,S().in)(t);return{position:"absolute",left:"peek"===e?0:void 0,right:"peek"!==e?0:void 0,width:0,flexGrow:0,zIndex:"peek"===e?s().YO:1,top:n?0:-1,bottom:n?0:-1,pointerEvents:"auto"}}(t,i)),[t,i]);return A||M.isChromebook?null:(0,I.jsx)(n(654133).Z,{renderTooltip:()=>(0,I.jsx)(j,{type:t}),originRect:new DOMRect(L,R,0,0),delayThreshold:0,placement:"page"===t||"secondary_sidebar"===t?k().Placement.Right:k().Placement.Left,originGap:10,render:e=>(0,I.jsx)("div",{style:Z,...(0,n(164079).Z)(e,{onMouseMove:()=>function(e){T({isResizerHovered:!0},e)}(t),onMouseLeave:()=>function(e){T({isResizerHovered:!1},e)}(t),onMouseEnter:U}),children:(0,I.jsx)(n(790964).Z,{onDraggableDragStart:E,onDraggableDragMove:_,onDraggableDragEnd:C,onDraggableDragCancel:h,disableVerticalEdgeScroll:!0,disableHorizontalEdgeScroll:!0,render:e=>(0,I.jsx)("div",{style:V,...e})})})})};function T(e,t){switch(t){case"page":y().sidebarResizingStore.update((t=>({...t,...e})));break;case"update":w().default.update((t=>({...t,...e})));break;case"secondary_sidebar":h().default.update((t=>({...t,...e})));break;case"peek":break;default:(0,l().t1)(t)}}function P(e,t,n){let o;switch(t){case"page":o=e;break;case"secondary_sidebar":o=e-(y().sidebarExpandedStore.state?y().sidebarWidthStore.state:0);break;case"peek":case"update":o=window.innerWidth-e;break;default:(0,l().t1)(t)}const r=function(e){const t=window.innerWidth;switch(e){case"page":return 480;case"update":return Math.min(t/2,S().Nc);case"peek":return(0,p().my)();case"secondary_sidebar":return v().o;default:(0,l().t1)(e)}}(t),a=function(e,t){switch(e){case"page":return y().SIDEBAR_MIN_WIDTH;case"update":return w().AO;case"peek":return x().SIDEPEEK_MIN_WIDTH;case"secondary_sidebar":return v().u;default:(0,l().t1)(e)}}(t);return o>r?r:o<a?a:o}function j(e){let{type:t}=e;const n=(0,i().Fg)(),o=(0,r().O7)(),s=(0,a().VK)((()=>function(e,t){switch(e){case"page":return(0,S().in)(t);case"update":return(0,S().Sx)(t);case"peek":return x().default.state.open;case"secondary_sidebar":return h().default.isOpen();default:(0,l().t1)(e)}}(t,o)),[t,o]),d=n.mediumInvertedTextColor,u=(0,I.jsx)(C().Z,{name:"toggleSidebar"}),p="secondary_sidebar"===t||"update"===t?(0,I.jsx)(c()._H,{defaultMessage:"Close <invertedcolor>Click</invertedcolor>",id:"sidebarResizer.tooltip.closeMessage.noShortcut",values:{invertedcolor:e=>(0,I.jsx)("span",{style:{color:d},children:e}),keyboardShortcut:u}}):(0,I.jsx)(c()._H,{defaultMessage:"Close <invertedcolor>Click or {keyboardShortcut}</invertedcolor>",id:"sidebarResizer.tooltip.closeMessage",values:{invertedcolor:e=>(0,I.jsx)("span",{style:{color:d},children:e}),keyboardShortcut:u}});return(0,I.jsxs)(I.Fragment,{children:[s?p:(0,I.jsx)(c()._H,{defaultMessage:"Lock open <invertedcolor>Click or {keyboardShortcut}</invertedcolor>",id:"sidebarResizer.tooltip.lockMessage",values:{invertedcolor:e=>(0,I.jsx)("span",{style:{color:d},children:e}),keyboardShortcut:u}}),(0,I.jsx)("br",{}),(0,I.jsx)(c()._H,{defaultMessage:"Resize <invertedcolor>Drag</invertedcolor>",id:"sidebarResizer.tooltip.resizeMessage",values:{invertedcolor:e=>(0,I.jsx)("span",{style:{color:d},children:e}),keyboardShortcut:u}})]})}function U(e){y().sidebarMouseEnterYStore.setState(e.clientY)}},174491:(e,t,n)=>{n.d(t,{Z:()=>U});var o=n(667294),r=()=>n(219727),a=()=>n(474788),i=()=>n(142735),s=()=>n(846550),c=()=>n(492522),l=()=>n(788860),d=()=>n(146947),u=()=>n(799891),p=()=>n(814422),m=()=>n(306743),f=()=>n(594546),g=()=>n(177189),v=()=>n(43519);var h=()=>n(247724),b=()=>n(164079),S=()=>n(653457),y=()=>n(890881),w=()=>n(406012),k=()=>n(541589),x=()=>n(154186),C=()=>n(448419),I=()=>n(654133),_=()=>n(945634),T=n(785893);const P="?";function j(e){const t=(0,r().O7)(),{isMobile:n}=t.device,d=(0,l().YB)(),u=(0,i().VK)((()=>y().Z.state.open),[]),p={...(0,k().r)({environment:t,rightEdgeDistance:16,isInPeekRenderer:!1}),zIndex:c().hT},m=(0,s().yK)((e=>({helpIcon:{fill:e.mediumIconColor,width:16,height:16},hoveredStyle:{background:e.whiteButtonHoveredBackground},pressedStyle:{background:e.whiteButtonPressedBackground}})),[]),f=(0,o.useCallback)((e=>{const t=e.target;t instanceof HTMLElement&&(0,a().E)(t)&&w().Z.setState(!0)}),[]),g=(0,o.useCallback)((()=>{w().Z.setState(!1)}),[]);if(n)return(0,T.jsx)(x().Z,{hovered:u,testId:h().lmr,mobileFeedback:n,...e,children:(0,T.jsx)(_().Z,{left:(0,S().m)(m.helpIcon),disableMobileBorder:!0,children:(0,T.jsx)(l()._H,{defaultMessage:"Help & support",id:"helpButton.mobileHelpSupportButton.label"})})});const v=d.formatMessage({defaultMessage:"Help, feedback, and keyboard shortcuts",id:"helpButton.desktopHelpButton.ariaLabel"}),C=(0,b().Z)(e,{onFocus:f,onBlur:g});return(0,T.jsx)(I().Z,{renderTooltip:()=>(0,T.jsx)("span",{children:(0,T.jsx)(l()._H,{defaultMessage:"Help, feedback, and {br}keyboard shortcuts",id:"helpButton.desktopHelpButton.tooltip",values:{br:(0,T.jsx)("br",{})}})}),render:e=>(0,T.jsx)(x().Z,{ariaLabel:v,className:h().lmr,testId:h().lmr,style:p,hoveredStyle:m.hoveredStyle,pressedStyle:m.pressedStyle,...(0,b().Z)(C,e),children:P})})}const U=function(){const e=(0,r().O7)(),{isMobile:t}=e.device,a=(0,i().VK)((()=>{var t;return(null===(t=e.mobileNative)||void 0===t?void 0:t.supportsNativeHomeOnPhone())||!1}),[e]),s=(0,o.useCallback)((()=>{n(407391).Ar(e,{from:"corner"}),async function(e){const t=v().default.state;if((0,f().Ug)()&&t.isZendeskEnabled){const{userHighestPlanType:n,isSalesAssistedPlan:o}=(0,g().rf)(e),r=await m().aw({environment:e,isSalesAssistedPlan:o});p().j({type:"decagon",locale:d().locale,analyticsSettings:t,decagonInitializeArgs:r,onError:e=>{u().log({level:"error",from:"decagonHelpers",type:"initializeDecagon",error:{message:e.message}})},userHighestPlanType:n,isSalesAssistedPlan:o,cookieService:e.cookieService})}}(e)}),[e]);return(0,T.jsx)(C().ZP,{popupType:t?C().Z4.SlideUp:C().Z4.Popup,hidesMobileNativeBottomBar:a,preventSlideUpTransition:a,renderOrigin:e=>(0,T.jsx)(j,{...e}),originGap:t?0:12,placementToOrigin:t?C().pO.Right:C().pO.Top,alignmentToOrigin:t?C().vR.Center:C().vR.End,buttonPopupStore:y().Z,onClick:s,render:()=>(0,T.jsx)(n(302485).F,{})})}},49489:(e,t,n)=>{n.d(t,{Z:()=>r});n(667294);var o=n(785893);const r=function(){const e=(0,n(846550).yK)((e=>({separator:{height:14,width:1,marginLeft:6,marginRight:6,background:e.darkDividerColor}})),[]);return(0,o.jsx)("div",{style:e.separator})}},929465:(e,t,n)=>{n.d(t,{T:()=>a});var o=()=>n(677559);const r=new(o().Ss)("AppComponents",(async()=>Promise.all([n.e(62743),n.e(52774),n.e(44832),n.e(39938),n.e(90698),n.e(84885),n.e(37358),n.e(5242),n.e(7312),n.e(90424),n.e(81580),n.e(84325),n.e(31189),n.e(69343),n.e(46293),n.e(94556),n.e(78701),n.e(38804),n.e(17100),n.e(11846),n.e(70355),n.e(2971),n.e(80741),n.e(72586),n.e(53335),n.e(71896),n.e(46616),n.e(54940),n.e(49396),n.e(98721),n.e(98032),n.e(57229),n.e(63707),n.e(86609),n.e(91253),n.e(4642),n.e(5006),n.e(6612),n.e(61171),n.e(23179),n.e(75377),n.e(31020),n.e(2942),n.e(73682),n.e(58591),n.e(54803),n.e(1953),n.e(10216),n.e(58565),n.e(69197),n.e(42055),n.e(38739),n.e(44751),n.e(81567),n.e(63257),n.e(34291),n.e(1913),n.e(56054),n.e(95076),n.e(92341),n.e(82658),n.e(4163),n.e(69583),n.e(22759),n.e(20343),n.e(21820),n.e(46945),n.e(10553),n.e(67019),n.e(27039),n.e(25265),n.e(14581),n.e(38632),n.e(61651),n.e(88702),n.e(54307),n.e(43184),n.e(87647),n.e(75861),n.e(46257),n.e(15819),n.e(45376),n.e(74943),n.e(23721),n.e(58461),n.e(72329),n.e(19592),n.e(3331),n.e(98672),n.e(52658),n.e(44642),n.e(78),n.e(58586)]).then(n.bind(n,338403)))),a=(0,o().kF)(r,(e=>e.AppComponents))},449866:(e,t,n)=>{n.d(t,{A:()=>a});var o=()=>n(677559);const r=new(o().Ss)("invoice",(async()=>await n.e(15149).then(n.bind(n,959320)))),a=(0,o().kF)(r,(e=>e.Invoice))},448755:(e,t,n)=>{n.d(t,{I:()=>a});var o=()=>n(677559);const r=new(o().Ss)("PageError",(async()=>Promise.all([n.e(62743),n.e(37358),n.e(25350),n.e(31020),n.e(18216),n.e(22759),n.e(42941),n.e(72802),n.e(88430),n.e(66942)]).then(n.bind(n,143234)))),a=(0,o().kF)(r,(e=>e.PageError))},447317:(e,t,n)=>{n.d(t,{y:()=>a});var o=()=>n(677559);const r=new(o().Ss)("SearchModal",(async()=>Promise.all([n.e(62743),n.e(52774),n.e(44832),n.e(90698),n.e(84885),n.e(37358),n.e(5242),n.e(7312),n.e(90424),n.e(81580),n.e(84325),n.e(31189),n.e(69343),n.e(46293),n.e(2971),n.e(80741),n.e(72586),n.e(53335),n.e(71896),n.e(46616),n.e(54940),n.e(49396),n.e(98721),n.e(98032),n.e(57229),n.e(63707),n.e(86609),n.e(91253),n.e(4642),n.e(5006),n.e(6612),n.e(61171),n.e(23179),n.e(75377),n.e(31020),n.e(2942),n.e(73682),n.e(58591),n.e(54803),n.e(1953),n.e(10216),n.e(58565),n.e(69197),n.e(42055),n.e(38739),n.e(44751),n.e(81567),n.e(63257),n.e(34291),n.e(1913),n.e(56054),n.e(95076),n.e(82658),n.e(45741)]).then(n.bind(n,390960)))),a=(0,o().kF)(r,(e=>e.Search))},562219:(e,t,n)=>{n.d(t,{J:()=>a});var o=()=>n(677559);const r=new(o().Ss)("UpdateSidebarTabInfo",(async()=>await n.e(60895).then(n.bind(n,931656)))),a=(0,o().kF)(r,(e=>e.UpdateSidebarTabInfo))},952864:(e,t,n)=>{n.r(t),n.d(t,{getCloseConfirmationDialogReason:()=>d,getUserControlledCloseConfirmationDialogReason:()=>l,setupOnBeforeUnload:()=>p,showConfirmationDialogEventEmitter:()=>s});n(821057);var o=()=>n(696459),r=()=>n(95718),a=()=>n(109083),i=()=>n(338855);const s=new(n(444263).Z);let c;function l(){const e=d();switch(e){case"have_local_draft_unsaved_changes":return e;case void 0:case"transaction_queue_has_tasks":case"uploading_files":case"generating_ai_completions":case"have_pending_ai_edits":case"have_pending_synced_collection_changes":return}(0,o().t1)(e)}function d(){if(!c)throw new Error("beforeUnloadHelpers.setupOnBeforeUnload() was not called!");return c()}const u="Changes you made may not be saved. Are you sure you want to quit?";function p(e){const{TransactionQueue:t,device:n,AppUpdateStore:o,GlobalFileUploadStore:l}=e;c=function(){return!t.hasTasks()||n.isMobileNative||n.isElectron||o.isMajorUpdate()?(0,r().D)()?"have_pending_ai_edits":a().Z.doesAnyCacheHaveUnsavedChanges()?"have_local_draft_unsaved_changes":l.isUploading()?"uploading_files":(0,i().SN)()?"have_pending_synced_collection_changes":void 0:"transaction_queue_has_tasks"},window.onbeforeunload=function(){const e=d();if(e)return s.emit(e),u}}},390952:(e,t,n)=>{n.d(t,{u:()=>i});var o=()=>n(876822),r=()=>n(749826),a=()=>n(572623);function i(e){const{currentUserSettingsStore:t}=o().default.state;if(!t)return!1;const n=(0,a().e2)(t);return!("number"==typeof n&&n>7)&&(!e.device.isMobile&&"on"===r().default.getEligibleGroup({experimentId:"slash_menu_tooltip",defaultGroup:"control"}))}},337314:(e,t,n)=>{n.d(t,{setupTransactionLoadGenerator:()=>c});var o=()=>n(947115),r=()=>n(970105),a=()=>n(269299),i=()=>n(876822),s=()=>n(127519);function c(e){(0,o().exposeDebugValue)("generateTransactionLoad",(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const c=i().default.state.mainEditorCurrentBlockStore;if(!c)return void console.info("Cannot generateTransactionLoad: No current block");const l=c.getTitleStore();if(!l)return void console.info("Cannot generateTransactionLoad: block has no title");if("editing"!==s().default.state.mode)return void console.info("not editing anything. Click the page title.");const d=t=>{a().createAndCommit({userAction:"generateTransactionLoad.createTransaction",environment:e,canUndo:!0,perform:o=>{console.info("createAndCommit #",t);for(let a=0;a<n;a++){const n=`This is transaction #${t+1}, op ${a+1}, of load started at ${u}`;r().aS({environment:e,editorMode:"default",store:l,newValue:n,disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:o})}}})},u=new Date;if(0===o)for(let e=0;e<t;e++)d(e);else{let e=0;const n=setInterval((()=>{e<t?(d(e),e++):clearInterval(n)}),o)}}))}},552308:(e,t,n)=>{n.r(t),n.d(t,{initialize:()=>s});var o=()=>n(799891),r=()=>n(205228),a=()=>n(749826),i=()=>n(506348);function s(e){"object"==typeof r().default&&r().default.version&&(o().clientLogglyEnvironmentData.version=r().default.version);const{device:t,currentUser:n}=e;t.isMobileNative&&(o().clientLogglyEnvironmentData.isMobileNative=!0),t.isMobile&&(o().clientLogglyEnvironmentData.isMobile=!0),t.isAndroid&&(o().clientLogglyEnvironmentData.isAndroid=!0),t.isIOS&&(o().clientLogglyEnvironmentData.isIOS=!0),t.isElectron&&(o().clientLogglyEnvironmentData.isElectron=!0),t.isChromeExtension&&(o().clientLogglyEnvironmentData.isChromeExtension=!0),o().clientLogglyEnvironmentData.os=t.os,o().clientLogglyEnvironmentData.platform=t.platform,window.navigator.userAgent&&(o().clientLogglyEnvironmentData.userAgent=window.navigator.userAgent),document.referrer&&(o().clientLogglyEnvironmentData.referrer=document.referrer),n.id&&(o().clientLogglyEnvironmentData.userId=n.id),o().clientLogglyEnvironmentData.is_experimental_build="clientExperimental"===r().default.buildTarget,o().clientLogglyEnvironmentData.experiments=a().default.getUsedNonControlExperimentsMap(),a().default.addListener((()=>{o().clientLogglyEnvironmentData.experiments=a().default.getUsedNonControlExperimentsMap()})),(0,i().sK)().then((e=>{e&&(o().clientLogglyEnvironmentData.storageUsageEstimate=e.usage,o().clientLogglyEnvironmentData.storageQuotaEstimate=e.quota)}))}},52446:(e,t,n)=>{n.d(t,{D:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("doubleChevronLeft",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M7.07031 13.8887C7.2207 14.0391 7.40527 14.1211 7.62402 14.1211C8.06836 14.1211 8.41699 13.7725 8.41699 13.3281C8.41699 13.1094 8.32812 12.9043 8.17773 12.7539L3.37207 8.05762L8.17773 3.375C8.32812 3.21777 8.41699 3.0127 8.41699 2.80078C8.41699 2.35645 8.06836 2.00781 7.62402 2.00781C7.40527 2.00781 7.2207 2.08984 7.07031 2.24023L1.73828 7.44922C1.56055 7.62012 1.46484 7.8252 1.46484 8.06445C1.46484 8.29688 1.55371 8.49512 1.73828 8.67969L7.07031 13.8887ZM13.1748 13.8887C13.3252 14.0391 13.5098 14.1211 13.7354 14.1211C14.1797 14.1211 14.5283 13.7725 14.5283 13.3281C14.5283 13.1094 14.4395 12.9043 14.2891 12.7539L9.4834 8.05762L14.2891 3.375C14.4395 3.21777 14.5283 3.0127 14.5283 2.80078C14.5283 2.35645 14.1797 2.00781 13.7354 2.00781C13.5098 2.00781 13.3252 2.08984 13.1748 2.24023L7.84961 7.44922C7.66504 7.62012 7.57617 7.8252 7.56934 8.06445C7.56934 8.29688 7.66504 8.49512 7.84961 8.67969L13.1748 13.8887Z"})})},68744:(e,t,n)=>{n.d(t,{t:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("doubleChevronRight",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M2.25781 14.1211C2.47656 14.1211 2.66797 14.0391 2.81836 13.8887L8.14355 8.67969C8.32812 8.49512 8.41699 8.29688 8.41699 8.06445C8.41699 7.8252 8.32812 7.62012 8.14355 7.44922L2.81836 2.24023C2.66797 2.08984 2.4834 2.00781 2.25781 2.00781C1.81348 2.00781 1.46484 2.35645 1.46484 2.80078C1.46484 3.0127 1.55371 3.21777 1.7041 3.375L6.50977 8.05762L1.7041 12.7539C1.55371 12.9043 1.46484 13.1094 1.46484 13.3281C1.46484 13.7725 1.81348 14.1211 2.25781 14.1211ZM8.36914 14.1211C8.58789 14.1211 8.77246 14.0391 8.92285 13.8887L14.2549 8.67969C14.4395 8.49512 14.5283 8.29688 14.5283 8.06445C14.5283 7.8252 14.4326 7.62012 14.2549 7.44922L8.92285 2.24023C8.77246 2.08984 8.58789 2.00781 8.36914 2.00781C7.9248 2.00781 7.56934 2.35645 7.56934 2.80078C7.56934 3.0127 7.66504 3.21777 7.81543 3.375L12.6211 8.05762L7.81543 12.7539C7.66504 12.9043 7.56934 13.1094 7.56934 13.3281C7.56934 13.7725 7.9248 14.1211 8.36914 14.1211Z"})})},85876:(e,t,n)=>{n.d(t,{N:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("eyePadded",{viewBox:"0 0 24 24",svg:(0,o.jsx)("path",{d:"M12 17.9912C17.6055 17.9912 21.3857 13.4727 21.3857 12.0713C21.3857 10.6699 17.5986 6.1582 12 6.1582C6.47656 6.1582 2.60742 10.6699 2.60742 12.0713C2.60742 13.4727 6.46973 17.9912 12 17.9912ZM12 16.6787C7.63184 16.6787 4.15918 13.0283 4.15918 12.0713C4.15918 11.2715 7.63184 7.4707 12 7.4707C16.3613 7.4707 19.8408 11.2715 19.8408 12.0713C19.8408 13.0283 16.3613 16.6787 12 16.6787ZM12 15.7559C14.0508 15.7559 15.6914 14.0811 15.6914 12.0713C15.6914 10.0137 14.0508 8.39355 12 8.39355C9.94238 8.39355 8.29492 10.0137 8.30176 12.0713C8.31543 14.0811 9.94238 15.7559 12 15.7559ZM12 13.2607C11.3369 13.2607 10.7969 12.7275 10.7969 12.0713C10.7969 11.415 11.3369 10.8818 12 10.8818C12.6631 10.8818 13.1963 11.415 13.1963 12.0713C13.1963 12.7275 12.6631 13.2607 12 13.2607Z"})})},969798:(e,t,n)=>{n.d(t,{H:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("eyes",{viewBox:"0 0 72 72",svg:(0,o.jsx)("path",{d:"M17.0312 64.4375C26.25 64.4375 33.5625 52.9688 33.5625 36.4375C33.5625 19.9062 26.25 8.46875 17.0312 8.46875C7.8125 8.46875 0.5 19.9062 0.5 36.4375C0.5 52.9688 7.8125 64.4375 17.0312 64.4375ZM54.9688 64.4375C64.1875 64.4375 71.5 52.9688 71.5 36.4375C71.5 19.9062 64.1875 8.46875 54.9688 8.46875C45.75 8.46875 38.4375 19.9062 38.4375 36.4375C38.4375 52.9688 45.75 64.4375 54.9688 64.4375ZM10.0625 47.1875C15.125 47.1875 18.4688 43.6562 18.4688 38.3438C18.4688 33.0938 15.125 29.5625 10.0625 29.5625C7.6875 29.5625 5.71875 30.3125 4.25 31.6875C5.375 19.9375 10.6875 11.9375 17.0312 11.9062C24.25 11.875 30.125 22.0312 30.125 36.4375C30.125 50.7812 24.25 60.9688 17.0312 61C11.5312 61.0312 6.78125 54.9688 4.90625 45.5938C6.28125 46.625 8.03125 47.1875 10.0625 47.1875ZM47.9688 47.1875C53 47.1875 56.4062 43.6562 56.4062 38.3438C56.4062 33.0938 53 29.5625 47.9688 29.5625C45.5938 29.5625 43.5938 30.3438 42.1562 31.6875C43.2812 19.9375 48.5938 11.9375 54.9688 11.9375C62.1562 11.9062 68 22.0938 68 36.4375C68 50.7812 62.1562 60.9688 54.9688 60.9688C49.4375 61 44.6875 54.9375 42.7812 45.5938C44.1562 46.5938 45.9375 47.1875 47.9688 47.1875ZM45.5312 37.4062C44.4375 37.25 43.75 35.9688 44.0312 34.6562C44.3125 33.3125 45.3125 32.3438 46.375 32.5312C47.4688 32.75 48.0938 34.0312 47.8438 35.3125C47.5938 36.6562 46.5938 37.5938 45.5312 37.4062ZM7.625 37.4062C6.53125 37.25 5.84375 35.9688 6.09375 34.6562C6.375 33.3125 7.40625 32.3438 8.4375 32.5312C9.5625 32.7812 10.1875 34.0312 9.9375 35.3125C9.6875 36.6562 8.65625 37.5938 7.625 37.4062Z"})})},487706:(e,t,n)=>{n.d(t,{C:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("notionLogoStroked",{viewBox:"0 0 41 42",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M4.253 2.903h0-.01c-1.02.09-1.806.481-2.322 1.142-.5.642-.671 1.441-.671 2.21v23.228c0 1.267.47 2.316 1.416 3.577h0l.006.008 4.99 6.477h0l.005.005c.465.593.963 1.017 1.617 1.256.63.23 1.33.26 2.138.221h.01l24.652-1.49h.008c1.137-.08 2.038-.396 2.632-1.071.588-.668.746-1.543.746-2.431V9.904c0-.584-.133-1.05-.508-1.486-.27-.311-.669-.602-1.113-.925a54.305 54.305 0 01-.176-.13l-.007-.004-.005-.004-6.772-4.761c-.838-.609-1.516-1.017-2.365-1.21-.824-.187-1.75-.156-3.047-.044L4.253 2.903z",fill:"#fff",stroke:"#fff",strokeWidth:"1.5"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.257 3.158L5.176 4.637c-1.62.14-2.184 1.197-2.184 2.464v21.971c0 .987.352 1.83 1.198 2.959l4.72 6.126c.776.987 1.48 1.198 2.96 1.127l23.32-1.408c1.973-.14 2.537-1.057 2.537-2.606V10.552c0-.801-.316-1.032-1.25-1.714l-.16-.117-6.41-4.507c-1.55-1.126-2.184-1.268-4.65-1.056zM12.4 10.146c-1.904.129-2.337.158-3.418-.72l-2.75-2.183c-.28-.283-.14-.635.565-.705L26.102 5.13c1.62-.141 2.466.423 3.1.916l3.311 2.394c.141.07.493.492.07.492L12.645 10.13l-.245.016zM10.179 35.06V14.074c0-.916.281-1.338 1.126-1.41l22.898-1.337c.777-.07 1.128.423 1.128 1.338v20.844c0 .916-.14 1.691-1.41 1.761l-21.91 1.268c-1.269.07-1.832-.352-1.832-1.48zm21.63-19.86c.141.635 0 1.268-.635 1.34l-1.056.21v15.492c-.916.493-1.761.775-2.466.775-1.128 0-1.41-.352-2.255-1.408l-6.905-10.845v10.493l2.185.493s0 1.267-1.763 1.267l-4.86.282c-.142-.282 0-.986.492-1.127l1.269-.351V17.947l-1.761-.142c-.141-.634.21-1.549 1.197-1.62l5.214-.351 7.187 10.986V17.1l-1.832-.21c-.14-.776.422-1.339 1.127-1.409l4.863-.283z",fill:"#222"})]})})},960852:(e,t,n)=>{n.d(t,{N:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("repeat",{viewBox:"0 0 16 14",svg:(0,o.jsx)("path",{d:"M1.185 7.317a.689.689 0 00.697-.704v-.601c0-1.19.806-1.942 2.064-1.942H9.23v1.573c0 .328.199.52.527.52a.66.66 0 00.403-.144l2.68-2.236c.253-.212.26-.547 0-.765L10.16.782A.62.62 0 009.757.64c-.328 0-.527.184-.527.52v1.53H4.05C1.875 2.69.48 3.9.48 5.875v.738c0 .397.308.704.705.704zm13.624-.649a.689.689 0 00-.698.704v.608c0 1.19-.806 1.942-2.064 1.942H6.763V8.35c0-.329-.199-.52-.527-.52a.66.66 0 00-.403.144l-2.68 2.242c-.26.212-.26.547 0 .759l2.68 2.242a.66.66 0 00.403.143c.328 0 .527-.191.527-.52v-1.544h5.181c2.174 0 3.569-1.21 3.569-3.179v-.745a.695.695 0 00-.704-.704z"})})},795941:(e,t,n)=>{n.d(t,{y:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("settingsNotificationsAndPersonal",{viewBox:"0 0 20 20",svg:(0,o.jsx)("path",{d:"M12.5361 7.54883C13.2744 7.54883 13.9033 7.09082 14.1631 6.44141H16.4258C16.7607 6.44141 17.0479 6.14746 17.0479 5.79199C17.0479 5.43652 16.7676 5.14258 16.4258 5.14258H14.1699C13.9102 4.49316 13.2744 4.03516 12.5361 4.03516C11.7979 4.03516 11.1621 4.49316 10.9023 5.14258H3.59473C3.23242 5.14258 2.95215 5.43652 2.95215 5.79199C2.95215 6.14746 3.23926 6.44141 3.59473 6.44141H10.9023C11.1621 7.09082 11.7979 7.54883 12.5361 7.54883ZM12.5361 6.62598C12.0713 6.62598 11.6953 6.25684 11.6953 5.79199C11.6953 5.31348 12.0713 4.95117 12.5361 4.95117C13.0078 4.95117 13.3701 5.31348 13.3701 5.79199C13.3701 6.25684 13.0078 6.62598 12.5361 6.62598ZM3.56738 9.40137C3.23242 9.40137 2.95215 9.68848 2.95215 10.0508C2.95215 10.3994 3.23926 10.6934 3.56738 10.6934H5.91211C6.16504 11.3428 6.80078 11.8076 7.5459 11.8076C8.27734 11.8076 8.91309 11.3428 9.17285 10.6934H16.4053C16.7607 10.6934 17.0479 10.4062 17.0479 10.0508C17.0479 9.68848 16.7676 9.40137 16.4053 9.40137H9.17285C8.91309 8.75195 8.27734 8.29395 7.5459 8.29395C6.80762 8.29395 6.17188 8.75195 5.91211 9.40137H3.56738ZM7.5459 10.8848C7.07422 10.8848 6.70508 10.5156 6.70508 10.0508C6.70508 9.57227 7.07422 9.20996 7.5459 9.20996C8.01758 9.20996 8.37988 9.57227 8.37988 10.0508C8.37988 10.5156 8.01758 10.8848 7.5459 10.8848ZM12.5361 16.0596C13.2744 16.0596 13.9102 15.6016 14.1699 14.9521H16.4258C16.7607 14.9521 17.0479 14.6582 17.0479 14.3027C17.0479 13.9404 16.7676 13.6533 16.4258 13.6533H14.1631C13.9102 13.0039 13.2744 12.5459 12.5361 12.5459C11.7979 12.5459 11.1621 13.0039 10.9023 13.6533H3.59473C3.23242 13.6533 2.95215 13.9473 2.95215 14.3027C2.95215 14.6582 3.23926 14.9521 3.59473 14.9521H10.9023C11.1621 15.6016 11.7979 16.0596 12.5361 16.0596ZM12.5361 15.1436C12.0713 15.1436 11.6953 14.7676 11.6953 14.3027C11.6953 13.8311 12.0713 13.4619 12.5361 13.4619C13.0078 13.4619 13.3701 13.8311 13.3701 14.3027C13.3701 14.7676 13.0078 15.1436 12.5361 15.1436Z"})})},110372:(e,t,n)=>{n.d(t,{YF:()=>l,bl:()=>c,gF:()=>i,i6:()=>d,lZ:()=>s});var o=()=>n(954949),r=()=>n(594546),a=()=>n(749826);function i(e,t){const n=(0,o().Si)(t.callout_key);n&&(t.placement_key=(0,o().pU)(n)),(0,r().j)({environment:e,event:{eventName:"callout_show",eventProperties:t}}),a().default.logEvent("callout_show",t.callout_key)}function s(e,t){const n=(0,o().Si)(t.callout_key);n&&(t.placement_key=(0,o().pU)(n)),(0,r().j)({environment:e,event:{eventName:"callout_click",eventProperties:t}}),a().default.logEvent("callout_click",t.callout_key)}function c(e,t){const n=(0,o().Si)(t.callout_key);n&&(t.placement_key=(0,o().pU)(n)),(0,r().j)({environment:e,event:{eventName:"callout_dismiss",eventProperties:t}}),a().default.logEvent("callout_dismiss",t.callout_key)}function l(e,t){const{eligible_callouts:n,required_arg_timeout:o,required_args_run_duration:a,eligibility_timeouts:i,blocklist:s}=t;(0,r().j)({environment:e,event:{eventName:"callout_coordinator_resolved",eventProperties:{eligible_callouts:n,required_arg_timeout:o,required_args_run_duration:a,eligibility_timeouts:i,blocklist:s}}})}function d(e,t){(0,r().j)({environment:e,event:{eventName:"callout_feature_interaction",eventProperties:t}})}},604258:(e,t,n)=>{n.d(t,{r2:()=>a,s:()=>i});var o=()=>n(677559);const r={Toaster:new(o().Ss)("Toaster",(()=>n.e(33705).then(n.bind(n,408074)))),PerfmarkTrialIneligibleToast:new(o().Ss)("PerfmarkTrialIneligibleToast",(()=>n.e(99724).then(n.bind(n,632179))))},a=(0,o().kF)(r.Toaster,(e=>e.Toaster)),i=(0,o().kF)(r.PerfmarkTrialIneligibleToast,(e=>e.PerfmarkTrialIneligibleToast))},215689:(e,t,n)=>{n.r(t),n.d(t,{mainApp:()=>o});n(821057);async function o(e){const{minimalEnvironment:t,mainStartTime:o,prefetchInitiatedTime:r,prefetchCache:a,initializeStatsigResult:i,currentUserId:s}=e,{device:c}=t,[{setupOnBeforeUnload:l},d,{createClientEnvironment:u},{setupTransactionQueue:p},{default:m},f]=await Promise.all([Promise.resolve().then(n.bind(n,952864)),Promise.resolve().then(n.bind(n,799891)),Promise.resolve().then(n.bind(n,222578)),Promise.resolve().then(n.bind(n,148882)),Promise.resolve().then(n.bind(n,920991)),Promise.resolve().then(n.bind(n,278589))]);let g=await u({minimalEnvironment:t,prefetchCache:a,currentUserId:s});const{ElectronSqlite:v}=g;f.setupRecordCacheDebugging(c);const h=await p(g);l({device:c,TransactionQueue:h,AppUpdateStore:g.AppUpdateStore,GlobalFileUploadStore:m});const[b,{default:S}]=await Promise.all([Promise.resolve().then(n.bind(n,552308)),Promise.resolve().then(n.bind(n,620218))]);if(b.initialize(g),c.isMobileNative){const e=S.DO_NOT_USE_markLegacy("mobilenative.initialize_from_js"),[t,o,r]=await Promise.all([Promise.resolve().then(n.bind(n,279762)),Promise.resolve().then(n.bind(n,265903)),Promise.resolve().then(n.bind(n,148149))]);await t.initializeMobileNativeApp(g),Object.assign(d.clientLogglyEnvironmentData,o.getMobileNativeDeviceInfo(),r.getMobileNativeSessionInfo()),S.DO_NOT_USE_measureLegacy(e,{environment:g,data:{}})}if(c.isElectron){const e=S.mark("desktop.initialize_from_js"),t=await Promise.resolve().then(n.bind(n,231077));await t.initializeElectron({device:c,electronSqlite:v});const o=await Promise.resolve().then(n.bind(n,892306)),r=await o.getDesktopDeviceInfo();Object.assign(d.clientLogglyEnvironmentData,r,{desktopVersion:c.desktopAppVersion}),S.measure(e,{environment:g})}const[y,w,k,x,C,I]=await Promise.all([Promise.resolve().then(n.bind(n,341691)),Promise.resolve().then(n.bind(n,793935)),Promise.resolve().then(n.bind(n,505462)),Promise.resolve().then(n.bind(n,586730)),Promise.resolve().then(n.bind(n,269299)),Promise.resolve().then(n.bind(n,784552))]),{setupTransactionLoadGenerator:_}=await Promise.resolve().then(n.bind(n,337314));_(g),g.currentUser.id&&g.defaultRecordCache.persistedRecordCache&&I.readAndCacheOfflinePagesMemo({userId:g.currentUser.id,persistedRecordCache:g.defaultRecordCache.persistedRecordCache});const[{default:T},P,j,U,{CurrentUser:E},{getGhostAdminUserId:M},{default:L}]=await Promise.all([Promise.resolve().then(n.bind(n,850675)),Promise.resolve().then(n.t.bind(n,667294,19)),Promise.resolve().then(n.t.bind(n,973935,19)),Promise.resolve().then(n.t.bind(n,620745,19)),Promise.resolve().then(n.bind(n,388322)),Promise.resolve().then(n.bind(n,274879)),Promise.resolve().then(n.bind(n,749826))]);k.startListeners(c),g=await y.initialize(g),g.updateCurrentUserId=async e=>{const t=await M(g),n={...e.environment,currentUser:new E({id:e.currentUserId,loggedInUserIds:e.userIds,adminUserId:t})};await X(n),n.idCreator.updateCurrentUserId(e.currentUserId)},x.initialize(g),h.startLoop();const[{maybeClearCookies:R,refreshNotionCookies:A,validateHasPermissionArgs:V,clearNotionCookiesWithNoPermission:Z,clearThirdPartyCookiesAndLocalStorageWithNoPermission:B},{clearNotionLocalStorageWithNoPermission:N},O,D,q,K,{default:F},z]=await Promise.all([Promise.resolve().then(n.bind(n,274879)),Promise.resolve().then(n.bind(n,675987)),Promise.resolve().then(n.bind(n,977481)),Promise.resolve().then(n.bind(n,418216)),Promise.resolve().then(n.bind(n,990352)),Promise.resolve().then(n.bind(n,512258)),Promise.resolve().then(n.bind(n,616643)),Promise.resolve().then(n.bind(n,6333))]);R(),Promise.all([Z(g),B(g)]).then((()=>A(g))),N(),V(g);const[{TransactionQueueDependenciesImpl:W},{waitForStatsigInitialization:H},{isPrewarmedTabInitialRender:$}]=await Promise.all([Promise.resolve().then(n.bind(n,268343)),Promise.resolve().then(n.bind(n,963332)),Promise.resolve().then(n.bind(n,512258))]);let G,Y;async function X(e){const t=performance.now(),{didStatsigBootupTimeout:n}=await H({environment:g,initializeStatsigResult:i});G??=L.checkGate({gateName:"react_18_concurrent_rendering"});const a=performance.now(),s=document.querySelector("#notion-app");if(!s)throw new Error('Could not find element with id "notion-app"');h.updateDependencies(new W(e)),C.updateConnectionState(e),O.updateEnvironment(e),d.clientLogglyEnvironmentData.userId=e.currentUser.id;const c=()=>{const e=document.getElementById("initial-loading-spinner"),i=document.getElementById("skeleton");e&&e.remove(),i&&i.remove();const s=performance.now();D.setSubMetricsAtRenderCallback({mainStartTime:o,prefetchInitiatedTime:r,statsigBootupBlockingStartTime:t,renderStartTime:a,renderEndTime:s});const c=q.getAppStartTime();c&&S.DO_NOT_USE_measureLegacy({metricName:"time_origin_to_app_start",startTime:0,endTime:c},{environment:g,data:{sub_metrics:K.getTimeOriginToAppStartSubMetrics()}}),S.DO_NOT_USE_measureLegacy({metricName:"time_origin_to_prefetch_initiated",startTime:0,endTime:r},{environment:g}),F.state&&S.measure({metricName:"client.migrate_sqlite",startTime:F.state.startTime,endTime:F.state.endTime},{environment:g}),S.measure({metricName:"statsig_bootup_blocking",startTime:t,endTime:a},{environment:g,data:{timed_out:n,is_prewarmed_tab:$(g)}})},l=P.createElement(T,{environment:e,onMount:G?c:void 0});G?(Y??=U.createRoot(s),Y.render(l)):j.render(l,s,c)}w.initialize(g),await X(g);const{startFlushing:J}=await Promise.resolve().then(n.bind(n,565016));return J(((e,t)=>{S.measure(e,{environment:g,preboot:!0,shouldSendIfStatsigNotInitialized:!0,shouldExcludeFromTimeline:!0,data:t})})),{transactionQueue:h,environment:g}}},557161:(e,t,n)=>{n.d(t,{V:()=>r});var o=()=>n(142735);function r(e){return{modules:(0,o().VK)((()=>{if(!e)return;const t=e.getAssociatedCollectionStore(),n=null==t?void 0:t.getLayoutStore();return null==n?void 0:n.getModules().page_details}),[e])}}},222578:(e,t,n)=>{n.r(t),n.d(t,{createClientEnvironment:()=>he});var o=()=>n(66077),r=()=>n(811765),a=()=>n(388322),i=()=>n(758925),s=()=>n(836054),c=()=>n(4312),l=()=>n(317924),d=()=>n(999219),u=()=>n(200568),p=()=>n(751052),m=()=>n(150266),f=()=>n(231077),g=()=>n(76254),v=()=>n(205228);class h extends(()=>n(77973))().U{constructor(e){super({...e,mapSpaceIdToShortId:t=>e.mapSpaceIdToShortId(this.currentUserId,t)}),this.currentUserId=void 0,this.currentUserId=e.currentUserId}updateCurrentUserId(e){this.currentUserId=e}}var b=()=>n(274879),S=()=>n(260169),y=()=>n(263168),w=()=>n(836842),k=(n(821057),n(670560),n(267602),n(749411),n(30005),n(241792),()=>n(799891)),x=()=>n(217465),C=()=>n(396136),I=()=>n(882765),_=()=>n(96642),T=()=>n(513670),P=()=>n(792409),j=()=>n(594546),U=()=>n(619995),E=()=>n(725466),M=()=>n(994883),L=()=>n(81954),R=()=>n(839002),A=()=>n(781105);async function V(e){const{environment:t}=e;return(await R().qd(Object.keys(n(747055).Z.state.offlinePages||{}),100,(e=>async function(e){const{environment:t,pageId:n}=e,o={page:{id:n,spaceId:(0,L().J)(void 0)},limit:1/0,cursor:{stack:[]},verticalColumns:!1},r=[];return await E().z({...o,baseUrl:v().default.domainBaseUrl,publicDomainName:v().default.publicDomainName,shouldTraverseToggleBlocks:!0},M().s.sideEffect((e=>((0,U().t)(e)&&r.push(e.id),Promise.resolve())),M().s.fromMonomorphicFunctionUnsafe((async e=>{const n=await A().Ye({environment:t,pointer:e,useInMemoryCacheOnly:!1,skipAccessWrites:!0});return null==n?void 0:n.model})))),r}({environment:t,pageId:e})))).flat()}var Z=()=>n(620218),B=()=>n(749826),N=()=>n(601952),O=()=>n(222685);let D=1;class q{constructor(e){this.connection=void 0,this.maxSize=void 0,this.getEnvironment=void 0,this.getLatency=new(n(265704).s),this.batchReadWorkers=15,this.queuedGetErrors=[],this.pendingWrites=x().RecordMapLegacy.create(),this.getManyFromDisk=async e=>{const t=x().RecordMapLegacy.create();e.forEach(((e,n)=>{let{pointer:o}=e;t.set(o,n)}));const n=await this.doSafeRead((()=>O().Q6(this.connection,e))),o=x().RecordMapLegacy.create();for(const r of n)this.setCachedRecordMap(o,r);return e.map((e=>{let{pointer:t,userId:n}=e;const r=this.getInMemory(t,n);if(r)return r;const a=o.get(t);return a&&a[n]}))},this.diskReadQueue=new(n(973019).Z)({batchSize:Math.floor(n(231522).mz/3)-1,maxWorkers:this.batchReadWorkers>0?this.batchReadWorkers:1,performRequests:this.getManyFromDisk}),this.flushWrites=async()=>{const e=this.pendingWrites;this.pendingWrites=x().RecordMapLegacy.create();const t=Array.from(e).flatMap((e=>{let{value:t}=e;return t?Object.values(t):[]})),n=Z().default.DO_NOT_USE_markLegacy("sqlite_record_cache.flush_writes.duration");try{await this.doSafeWrite((()=>O().Y3(this.connection,t)));const e={status:"success",wasm_sqlite_storage:N().default.state.metricDataStore.state.wasm_sqlite_storage};j().fW({environment:this.getEnvironment(),eventName:"sqlite_record_cache.flush_writes",eventProperties:e,opts:{preboot:!0,sampling:{behavior:"statsig",fallbackBehavior:"custom",fallbackSampleRate:0}}}),Z().default.DO_NOT_USE_measureLegacy(n,{environment:this.getEnvironment(),data:e,shouldExcludeFromTimeline:!0})}catch(o){k().log({level:"warning",from:"SqliteRecordCache",type:"applyRecordCacheOperationsError",error:(0,P().Ui)(o),data:(0,I().fq)(o,{isBrowser:this.getEnvironment().device.isBrowser,wasmSqliteStorage:N().default.state.metricDataStore.state.wasm_sqlite_storage})},{forceSuppressConsoleLog:!0});const e={status:"error",wasm_sqlite_storage:N().default.state.metricDataStore.state.wasm_sqlite_storage};j().fW({environment:this.getEnvironment(),eventName:"sqlite_record_cache.flush_writes",eventProperties:e,opts:{preboot:!0,sampling:{behavior:"statsig",fallbackBehavior:"custom",fallbackSampleRate:0}}}),Z().default.DO_NOT_USE_measureLegacy(n,{environment:this.getEnvironment(),data:e,shouldExcludeFromTimeline:!0})}B().default.checkGate({gateName:"download_for_offline"})||navigator.locks.request("sqliteRecordCacheEviction",{mode:"exclusive",ifAvailable:!0},(async e=>{if(!e)return;const t=await this.getTablesThatNeedEviction();if(0===t.length)return;const n=await V({environment:this.getEnvironment()});await this.evictTables({tables:t,offlineRecordIds:n})}))},this.debouncedFlushWrites=T().Ds(this.flushWrites,500,{maxWait:3e3}),this.throttledLogGetErrorBatched=T().P2(this.logGetErrorBatched,3e3,{leading:!1,trailing:!0}),this.connection=e.connection,this.maxSize=e.maxSize,this.getEnvironment=e.getEnvironment}getDedicatedWorkerConnection_DEBUG_ONLY(){var e,t;return null===(e=(t=this.connection).getDedicatedWorkerConnection_DEBUG_ONLY)||void 0===e?void 0:e.call(t)}set(e){const{pointer:t,value:o,importance:r,maybeStaleRecordMap:a}=e;if(void 0===t||void 0===t.id){const e=new Error("Attempting to set a record with an invalid pointer.");return k().log({level:"error",from:"SqliteRecordCache",type:"SqliteRecordCache.setBadPointer",error:{message:"Attempting to set a record with an invalid pointer.",stack:e.stack},data:{pointer:t}}),void n(680146).IE(e)}const i=e.userId||_().I,s={pointer:t,userId:i,value:o,timestamp:Date.now(),importance:r};this.removePendingWrite(t,i,"delete"),this.enqueueWrite({type:"set",record:s,maybeStaleRecord:a})}async get(e){const{pointer:t,skipAccessWrites:n}=e,o=`get ${D}`,r=e.userId||_().I;let a;D++,this.getLatency.start(o);try{const e=this.getInMemory(t,r);if(e)return n||this.enqueueWrite({type:"access",record:e}),this.getLatency.end(o,"memory"),e.value;a=Z().default.DO_NOT_USE_markLegacy("sqlite_record_cache.get_record.duration");const i=await(this.batchReadWorkers>0?this.diskReadQueue.enqueue({pointer:t,userId:r}):this.getFromDiskUnbatched(t,r));if(i){n||this.enqueueWrite({type:"access",record:i}),this.getLatency.end(o,"disk");const e={status:"success",wasm_sqlite_storage:N().default.state.metricDataStore.state.wasm_sqlite_storage};return j().fW({environment:this.getEnvironment(),eventName:"sqlite_record_cache.get_record",eventProperties:e,opts:{preboot:!0,sampling:{behavior:"statsig",fallbackBehavior:"custom",fallbackSampleRate:0}}}),Z().default.DO_NOT_USE_measureLegacy(a,{environment:this.getEnvironment(),data:e,shouldExcludeFromTimeline:!0}),i.value}}catch(i){i instanceof I().ZV||i instanceof I().q2?(this.queuedGetErrors.push(i),this.throttledLogGetErrorBatched(),this.getEnvironment().defaultRecordCache.disablePersistedRecordCache()):k().log({level:"warning",from:"SqliteRecordCache",type:"getError",error:(0,P().Ui)(i),data:(0,I().fq)(i,{isBrowser:this.getEnvironment().device.isBrowser,wasmSqliteStorage:N().default.state.metricDataStore.state.wasm_sqlite_storage})},{forceSuppressConsoleLog:!0});const e={status:"error",wasm_sqlite_storage:N().default.state.metricDataStore.state.wasm_sqlite_storage};return j().fW({environment:this.getEnvironment(),eventName:"sqlite_record_cache.get_record",eventProperties:e,opts:{preboot:!0,sampling:{behavior:"statsig",fallbackBehavior:"custom",fallbackSampleRate:0}}}),void(a&&Z().default.DO_NOT_USE_measureLegacy(a,{environment:this.getEnvironment(),data:e,shouldExcludeFromTimeline:!0}))}finally{this.getLatency.end(o,"miss")}}deleteRecord(e,t){t=t||_().I,this.removePendingWrite(e,t,"set"),this.enqueueWrite({type:"delete",record:{pointer:e,userId:t}})}async getBlocksWithParent(e){const t=Date.now(),n=e.userId||_().I,o=await this.doSafeRead((()=>O().lR(this.connection,{...e,timestamp:t,userId:n}))),r=x().RecordMapLegacy.create(),a=T().oA(Array.from(this.pendingWrites).map((o=>{const a=o&&o.value&&n&&o.value[n];if(!a||"set"!==a.type)return;const i=a.record.value?a.record.value.value:void 0;if(!i)return;if(a.record.pointer.table!==C().iU)return;const s=i;return s.parent_id===e.parent.id&&s.parent_table===e.parent.table?(r.set(a.record.pointer,!0),a.record.timestamp<t&&(a.record.timestamp=t),a.record.value):void 0})));for(const i of o)r.get(i.pointer)||this.getInMemory(i.pointer,i.userId)||a.push(i.value);return a}async getPageBlocksByParent(e){const t=Date.now(),n=e.userId||_().I,o=await this.doSafeRead((()=>O().GF(this.connection,{...e,timestamp:t,userId:n})));return o.forEach((e=>{this.enqueueWrite({type:"access",record:{pointer:e.pointer,timestamp:t,userId:n,importance:void 0,value:e.value}})})),o}async getOfflinePages(e){const{userId:t,orderBy:n}=e;return await this.doSafeRead((async()=>await O().Xc({connection:this.connection,userId:t,orderBy:n})))}async addOrUpdateOfflinePage(e){const{pageId:t,userId:n,lastDownloadedAt:o,lastDownloadedVersion:r,originPageId:a,pageType:i,downloadStatus:s,collectionStatus:c}=e;await this.doSafeWrite((async()=>{await O().Bv({connection:this.connection,pageId:t,userId:n,lastDownloadedAt:o,lastDownloadedVersion:r,originPageId:a,pageType:i,downloadStatus:s,collectionStatus:c})}))}async updateOfflinePageLastDownloadedMetadata(e){const{pageId:t,userId:n,lastDownloadedAt:o,lastDownloadedVersion:r}=e;await this.doSafeWrite((async()=>{await O().Oo({connection:this.connection,pageId:t,userId:n,lastDownloadedAt:o,lastDownloadedVersion:r})}))}async removeOfflinePage(e){await this.doSafeWrite((async()=>{const{pageId:t,userId:n}=e;await O().pl({connection:this.connection,pageId:t,userId:n})}))}async getImpactedPageIdsByOriginPageId(e){const{originPageId:t,userId:n}=e;return await O().C({connection:this.connection,originPageId:t,userId:n})}async countOfflineActionsByImpactedPageId(e){const{impactedPageId:t,userId:n}=e;return await O().gQ({connection:this.connection,impactedPageId:t,userId:n})}async deleteOfflineActionsWithOriginPageId(e){const{originPageId:t,userId:n}=e;await this.doSafeWrite((async()=>{await O().Rf({connection:this.connection,originPageId:t,userId:n})}))}async reset(){this.pendingWrites=x().RecordMapLegacy.create(),await this.doSafeWrite((()=>O().G$(this.connection)))}setEnvironment(e){this.getEnvironment=()=>e}async flushPendingWrites(){await this.flushWrites()}enqueueWrite(e){this.debouncedFlushWrites();const{pointer:t,userId:n}=e.record,o=this.pendingWrites.get(t),r=o&&o[n];if(r){if("set"===r.type&&"access"===e.type){const t={type:"set",record:{...r.record,timestamp:e.record.timestamp}};return void this.setCacheOperationMap(this.pendingWrites,t)}const t="set"===r.type&&!r.maybeStaleRecord&&r.record.value&&r.record.value.value?r.record.value.value.version:void 0,n="set"===e.type&&e.maybeStaleRecord&&e.record.value&&e.record.value.value?e.record.value.value.version:void 0;if("number"==typeof t&&"number"==typeof n&&t>=n)return}this.setCacheOperationMap(this.pendingWrites,e)}async getFromDiskUnbatched(e,t){const[n]=await this.getManyFromDisk([{pointer:e,userId:t}]);return n}getInMemory(e,t){const n=this.pendingWrites.get(e),o=n&&n[t];if(o&&"set"===o.type)return o.record}setCacheOperationMap(e,t){const n=t,{pointer:o,userId:r}=n.record,a=e.get(o)||{};e.set(o,{...a,[r]:n})}setCachedRecordMap(e,t){const{pointer:n,userId:o}=t,r=e.get(n)||{};e.set(n,{...r,[o]:t})}removePendingWrite(e,t,n){const o=this.pendingWrites.get(e);o&&o[t]&&o[t].type===n&&this.pendingWrites.delete(e)}logGetErrorBatched(){const e=this.getEnvironment(),t=T().vM(this.queuedGetErrors,(e=>(0,P().Ui)(e).message));for(const[n,o]of Object.entries(t)){if(!n)break;k().log({level:"warning",from:"SqliteRecordCache",type:"getErrorBatched",error:(0,P().Ui)(o[0]),data:{batchedData:o.map((t=>(0,I().fq)(t,{isBrowser:e.device.isBrowser,wasmSqliteStorage:N().default.state.metricDataStore.state.wasm_sqlite_storage})))}},{forceSuppressConsoleLog:!0})}this.queuedGetErrors=[]}async getTablesThatNeedEviction(){try{return await this.doSafeRead((()=>O().b3({connection:this.connection,maxSize:this.maxSize})))}catch(e){return j().j({environment:this.getEnvironment(),event:{eventName:"sqlite_record_cache.eviction.error",eventProperties:{type:"get_tables_failed"}},opts:{preboot:!0}}),k().log({level:"warning",from:"SqliteRecordCache",type:"getTablesThatNeedEvictionFailed",error:(0,P().Ui)(e)}),[]}}async evictTables(e){const{tables:t,offlineRecordIds:n}=e;try{await this.doSafeWrite((()=>O().Hv({connection:this.connection,tables:t,maxSize:this.maxSize,offlineRecordIds:n}))),j().j({environment:this.getEnvironment(),event:{eventName:"sqlite_record_cache.eviction",eventProperties:{}},opts:{preboot:!0}})}catch(o){j().j({environment:this.getEnvironment(),event:{eventName:"sqlite_record_cache.eviction.error",eventProperties:{type:"eviction_failed"}},opts:{preboot:!0}}),k().log({level:"warning",from:"SqliteRecordCache",type:"evictionFailed",error:(0,P().Ui)(o)})}}async doSafeRead(e){return await navigator.locks.request("sqliteRecordCache",{mode:"shared"},e)}async doSafeWrite(e){await navigator.locks.request("sqliteRecordCache",{mode:"exclusive"},e)}}var K=()=>n(956057),F=()=>n(484896),z=()=>n(913017);const W=[WebSocket.OPEN,WebSocket.CONNECTING];class H{constructor(){this.sqliteConnection=void 0,this.requests=new Map}async initialize(){"message-ports"===await this.getConnectionType()?await this.initializeMessagePort():await this.initializeWebSocket()}async getConnectionType(){var e;const{preferences:t}=await f().electronAppFeatures.get()||{};if("message-ports"===(null==t?void 0:t.sqliteConnectionType))return"message-ports";const n=f().getDesktopVersion();return n&&n[0]>=4?"message-ports":null!==(e=f().electronApi)&&void 0!==e&&e.sqliteServerEnabled?"web-sockets":null}async initializeMessagePort(){await this.initializeMessagePortConnection();const e={execSqliteBatchV2:async e=>{let{batch:t,precondition:n}=e;return this.execSqliteBatchInnerMessagePort({id:K().Il(),batch:t,precondition:n})},execSqliteBatch:async e=>this.execSqliteBatchInnerMessagePort({id:K().Il(),batch:e})};this.sqliteConnection=new(z().s)({connection:e,type:"v2",migrations:await(0,F().k)(e)})}async initializeWebSocket(){await this.initializeWebSocketConnection();const e={execSqliteBatchV2:async e=>{const t=K().Il(),{batch:n,precondition:o}=e,r=JSON.stringify({id:t,batch:n,precondition:o,auth:this.authToken});return await this.execSqliteBatchInnerWebSockets(t,r)},execSqliteBatch:async e=>{const t=K().Il(),n=JSON.stringify({id:t,batch:e,auth:this.authToken});return await this.execSqliteBatchInnerWebSockets(t,n)}};this.sqliteConnection=new(z().s)({connection:e,type:"v2",migrations:await(0,F().k)(e)})}async execSqliteBatchInnerWebSockets(e,t){const n=new Promise((t=>{this.requests.set(e,t)}));this.ws.readyState===WebSocket.CLOSED&&await this.initializeWebSocket();try{this.ws.send(t)}catch(r){const e=this.ws;this.ws.onopen=function(n){e.send(t)}}const o=await n;if(o.error)throw new Error("Received SQLite error.");return o.value}async execSqliteBatchInnerMessagePort(e){const t=new Promise((t=>{this.requests.set(e.id,t)}));this.messagePort||await this.initializeMessagePortConnection(),this.messagePort.postMessage(e);const n=await t;if(n.error)throw new Error("Received SQLite error.");return n.value}async initializeMessagePortConnection(){return new Promise((async e=>{var t;if(null===(t=f().electronApi)||void 0===t||!t.getSqliteMeta)return;if(this.messagePort)return;const n=t=>{try{if(!t.ports.length||t.source!==window)return;this.messagePort=t.ports[0],this.messagePort.onclose=()=>{this.messagePort=void 0},this.messagePort.onmessage=e=>{const{id:t,result:n}=e.data,o=this.requests.get(t);o&&(this.requests.delete(t),o({value:n}))},window.removeEventListener("message",n),e()}catch(o){k().log({level:"error",from:"electronSqlite",type:"messagePortError",error:(0,P().Ui)(o)})}};window.addEventListener("message",n);(await f().electronApi.getSqliteMeta()).error}))}async initializeWebSocketConnection(){var e;if(null===(e=f().electronApi)||void 0===e||!e.getSqliteMeta)return;const t=await f().electronApi.getSqliteMeta();if(t.error)return;if(this.ws&&W.includes(this.ws.readyState))return;const{serverProcessPort:n,authToken:o}=t.value;this.authToken=o;const r=`ws://127.0.0.1:${n}`;this.ws=new WebSocket(r),this.ws.onclose=()=>{k().log({level:"warning",from:"electronSqlite",type:"reinitializingWebsocket"}),this.initializeWebSocketConnection()},this.ws.addEventListener("message",(e=>{const t=e.data.toString(),{id:n,result:o}=JSON.parse(t),r=this.requests.get(n);r&&(this.requests.delete(n),r({value:o}))})),await new Promise((e=>{this.ws.onopen=()=>{e()}}))}}n(398858),n(461318),n(33228);var $=()=>n(254375);Error;class G{constructor(e){this.initializePromise=void 0,this.dedicatedWorkerConnection=void 0,this.initializePromise=this.initialize(e)}async waitForInitialize(){await this.initializePromise}async execSqliteBatch(e){return(await this.initializePromise).execSqliteBatch(e)}getDedicatedWorkerConnection_DEBUG_ONLY(){return this.dedicatedWorkerConnection}async initialize(e){const{loadWorker:t,loadSharedWorker:o}=e,r=K().Il(),a=t(),i=o(),s=$().Ud(i.port);var c;this.dedicatedWorkerConnection=$().Ud(a),$().Jj(this.dedicatedWorkerConnection,i.port),await(c=n(432687).G(r),new Promise(((e,t)=>{navigator.locks.request(c,(()=>(e(),new Promise((()=>{}))))).catch(t)}))),await s.initializeNewTab({tabId:r});const l={execSqliteBatch:e=>s.execSqliteBatch(e),execSqliteBatchV2:e=>s.execSqliteBatchV2(e)},d=new(z().s)({connection:l,type:"v2",migrations:await(0,F().k)(l)});try{await d.ensureMigrated()}catch(u){k().log({level:"error",from:"ProxiedWasmSqliteConnectionWrapper",type:"sqliteConnectionEnsureMigratedError",error:(0,P().Ui)(u),data:(0,I().fq)(u,{isBrowser:!0,wasmSqliteStorage:"opfs-sahpool"})})}return d.optimize().catch((e=>{k().log({level:"error",from:"ProxiedWasmSqliteConnectionWrapper",type:"sqliteConnectionOptimizeError",error:(0,P().Ui)(e),data:(0,I().fq)(e,{isBrowser:!0,wasmSqliteStorage:"opfs-sahpool"})})})),d}}class Y{constructor(e){this.sqliteConnection=void 0,this.sqliteConnection=new G({loadWorker:()=>new Worker(new URL(n.p+n.u(27244),n.b)),loadSharedWorker:()=>new SharedWorker(new URL(n.p+n.u(60858),n.b)),currentUserId:e.currentUserId})}static maybeCreateInstance(e){const{device:t,currentUserId:n}=e;if(function(e){var t;return!(!e.isBrowser||void 0===(null===(t=navigator.locks)||void 0===t?void 0:t.request)||"undefined"==typeof SharedWorker||"localhost"===window.location.hostname&&"3003"!==window.location.port||e.isAndroid)}(t)){o="opfs-sahpool",N().default.state.metricDataStore.update((e=>({...e,wasm_sqlite_storage:o}))),X("loading");const e=new Y({currentUserId:n});return e.waitForInitialize().then((()=>{X("success")}),(e=>{X("error"),k().log({level:"error",from:"clientEnvironment",type:"wasmSqliteInitializeError",error:(0,P().Ui)(e),data:(0,I().fq)(e,{isBrowser:!0,wasmSqliteStorage:"opfs-sahpool"})})})),e}var o;X("skipped-unsupported-device")}async waitForInitialize(){return await this.sqliteConnection.waitForInitialize()}}function X(e){N().default.state.metricDataStore.update((t=>({...t,wasm_sqlite_initialized:e}))),n(944077).setTag("wasm_sqlite_initialized",e)}var J=()=>n(263184);class Q extends J().default{getInitialState(){return{loading:!1,loaded:!1}}async loadIfNeeded(e){if(this.state.loaded||this.state.loading)return;const t=e();if(!t)return;if(0===n(955620).CGe(t).length)return;const o=n(555061).e.load();this.setState({loading:!0,loaded:!1,result:o}),this.setState({loading:!1,loaded:!0,result:await o})}getKatex(){if(this.state.loaded)return this.state.result}}n(122556),n(582845),n(250570),n(533019),n(721473),n(788208),n(22624),n(653476),n(731107),n(228244);var ee=()=>n(35980),te=()=>n(326966),ne=()=>n(824462),oe=()=>n(635596),re=()=>n(148882);class ae extends J().default{static getCacheKey(e){return`LocalBacklinkStore2:${e}`}getInitialState(){return{}}initializeBacklinks(e){let{block:t,currentUserId:n,environment:o}=e;if(this.instanceState[t.id])return;const r=this.getCachedBacklinkState({blockId:t.id,currentUserId:n});r?this.setState({...this.instanceState,[t.id]:{state:r,loaded:!0}}):this.setState({...this.instanceState,[t.id]:{state:{backlinks:[],inaccessibleBacklinkCount:0},loaded:!1}}),ie(o,t),this.startMessageListeners(t,o)}awaitLoaded(e){return this.waitUntil((()=>{const t=this.state[e];return Boolean(t&&t.loaded)}))}destroyBacklinks(e,t){this.stopMessageListeners(e,t),delete this.instanceState[e]}getBacklinkState(e){let{blockId:t,currentUserId:n}=e;const o=this.state[t];return o?o.state:this.getCachedBacklinkState({blockId:t,currentUserId:n})||{backlinks:[],inaccessibleBacklinkCount:0}}setBacklinkState(e){let{blockId:t,state:n,currentUserId:o}=e;this.setCachedBacklinkState({blockId:t,state:n,currentUserId:o});const r=this.state[t];r&&this.setState({...this.state,[t]:{...r,state:n,loaded:!0}})}updateBacklinks(e){const{createdBacklinks:t,deletedBacklinks:n,currentUserId:o}=e,r=(0,te().cf)(t),a=(0,te().cf)(n),i=r.reduce(((e,t)=>{const{block_id:n}=t;return e[n]=e[n]?[...e[n],t]:[t],e}),{}),s=a.reduce(((e,t)=>{const{block_id:n}=t;return e[n]=e[n]?[...e[n],t]:[t],e}),{}),c=new Set([...Object.keys(i),...Object.keys(s)]);return c.forEach((e=>{const t=i[e]||[],n=s[e]||[],r=this.getBacklinkState({blockId:e,currentUserId:o}),a=t.filter((e=>!r.backlinks.some((t=>T().Xy(e,t))))),c=[...r.backlinks,...a].filter((e=>!n.some((t=>T().Xy(e,t)))));this.setBacklinkState({blockId:e,state:{...r,backlinks:c},currentUserId:o})})),Array.from(c)}resetBacklinkState(e){let{blockIds:t,currentUserId:n}=e;for(const o of t)this.setCachedBacklinkState({blockId:o,state:{backlinks:[],inaccessibleBacklinkCount:0},currentUserId:n})}getCachedBacklinkState(e){let{blockId:t,currentUserId:n}=e;return ee().Z.get({userId:n,key:ae.getCacheKey(t)})}setCachedBacklinkState(e){let{blockId:t,state:n,currentUserId:o}=e;return ee().Z.set({userId:o,key:ae.getCacheKey(t),value:n})}async startMessageListeners(e,t){const o=n(827370).dr.fromSpaceShardRecordId(e,C().iU);re().transactionQueue.isPendingTransactionForRecord(o)&&await re().transactionQueue.drain();const r=this.instanceState[o.id];if(!r)return;let a,i=!1;const s=T().P2(((n,o)=>{const r=a,s=o||void 0;a=s,i?r!==s&&ie(t,e):i=!0}),1e3),c=(0,n(183922).Mv)(o.id);r.messageStoreListenerReference=oe().ZP.addListener(c,s,void 0,t)}stopMessageListeners(e,t){const n=this.instanceState[e];n&&n.messageStoreListenerReference&&(oe().ZP.removeListener(n.messageStoreListenerReference,t),n.messageStoreListenerReference=void 0)}}async function ie(e,t){await re().transactionQueue.awaitRecordTransaction({id:t.id,table:C().iU});if(B().default.checkGate({gateName:"multi_cell_backlinks"})){const o=(0,n(631871).v3)(t.id),r=o?{"x-notion-space-short-id":o.toString()}:t.spaceId?{"x-notion-space-id":t.spaceId}:{},a=ne().callMultiCellApi({eventName:"getPageBacklinks",environment:e,data:{block:t},headers:r}),i=[];let s=0;for await(const n of a)"failed"!==n.type&&(i.push(...n.data.backlinks),s+=n.data.inaccessibleBacklinkCount,e.LocalBacklinkStore.setBacklinkState({blockId:t.id,state:{backlinks:i,inaccessibleBacklinkCount:s},currentUserId:e.currentUser.id}))}else{const n=await ne().callApi({eventName:"getBacklinksForBlock",environment:e,data:{block:t}});"failed"!==n.type&&e.LocalBacklinkStore.setBacklinkState({blockId:t.id,state:{backlinks:n.data.backlinks,inaccessibleBacklinkCount:n.data.inaccessibleBacklinkCount},currentUserId:e.currentUser.id})}}class se extends J().default{getInitialState(){return{isOpen:!1,isSubMenuOverridden:!1,subMenu:void 0,menu:void 0,shouldRestoreSelectionForMenu:!0,enableShouldShowDebugging:!1,session:void 0}}clear(e){this.update((t=>({...t,menu:void 0,shouldRestoreSelectionForMenu:e})))}async clearNativeActionMenuAndRestoreSelectionIfNecessary(){var e;void 0!==(null===(e=this.state.menu)||void 0===e?void 0:e.type)&&(this.clear(!0),await R().Vs(10))}}function ce(e){return`PageDetailsStore:${e.type}:${e.id}`}class le extends J().default{getInitialState(){return{}}static getDefaultToggleState(e){return"discussion"===e.type||"backlinks"!==e.type&&void(0,n(696459).t1)(e)}getToggleState(e){const t=ce(e);if(t in this.state)return this.state[t]}setToggleState(e,t){const n=ce(e);this.setState({...this.state,[n]:t})}}var de=()=>n(245015);const ue="spellcheckEnabled";class pe{constructor(){this.enabled=void 0,this.currentLanguages=void 0;const e=de().Z.get(ue);this.setEnabled(void 0===e||e)}setEnabled(e){var t,n;(this.enabled=e,de().Z.set(ue,e),null!==(t=f().electronApi)&&void 0!==t&&t.setSpellCheckerEnabled)&&(null===(n=f().electronApi)||void 0===n||n.setSpellCheckerEnabled(e))}isEnabled(){return this.enabled}getCorrections(e){return e.dictionarySuggestions}addToDictionary(e){var t;null!==(t=f().electronApi)&&void 0!==t&&t.addToDictionary&&f().electronApi.addToDictionary(e)}setLanguages(e){var t;T().Xy(this.currentLanguages,e)||(this.currentLanguages=e,null!==(t=f().electronApi)&&void 0!==t&&t.setSpellCheckerLanguages&&f().electronApi.setSpellCheckerLanguages(0===e.length?[navigator.language]:e))}async getLanguages(){var e;const t=new Intl.DisplayNames([navigator.language],{type:"language"}),n=[];if(null!==(e=f().electronApi)&&void 0!==e&&e.getSpellCheckerLanguages){const e=await f().electronApi.getSpellCheckerLanguages();for(const o of e)n.push({code:o,name:t.of(o)})}return n}async getAvailableLanguages(){var e;const t=new Intl.DisplayNames([navigator.language],{type:"language"}),n=[];if(null!==(e=f().electronApi)&&void 0!==e&&e.getAvailableSpellCheckerLanguages){const e=await f().electronApi.getAvailableSpellCheckerLanguages();for(const o of e)n.push({code:o,name:t.of(o)})}return n}}class me extends(()=>n(435308))().default{}const fe=["nativeRedirect","page","space","nativeTab","onboarding","unsubscribe","unknown","uiDoc","desktopEmailConfirm","root","chat","marketplace","team","gallery","settingsConsoleOrganization"],ge=[...fe,"login","login/calendar","signup","quickSearch"];let ve=0;async function he(e){var t;const{minimalEnvironment:n,prefetchCache:v,currentUserId:k}=e,{device:x,deviceStore:C,mobileNative:I,cookieService:_}=n,T=""+ve++,P=x.isElectron&&Boolean(null===(t=f().electronApi)||void 0===t?void 0:t.sqliteServerEnabled)?await async function(e){var t;if(!e.device.isElectron||null===(t=f().electronApi)||void 0===t||!t.sqliteServerEnabled)return;const n=new H;return await n.initialize(),n}({device:x}):void 0,j=Y.maybeCreateInstance({device:x,currentUserId:k}),U=new(c().Z),E=new(l().Xk),M=new(u().Z),L=new pe,R=(null==I?void 0:I.sqliteConnection)||(null==P?void 0:P.sqliteConnection)||(null==j?void 0:j.sqliteConnection),A=R?new q({connection:R,maxSize:x.isDesktop?1e6:1e5,getEnvironment:function(){return K}}):void 0,V=new(r().q)({inMemoryRecordCache:new(o().Z)({name:"default"}),persistedRecordCache:A});j&&j.waitForInitialize().catch((()=>{V.disablePersistedRecordCache()}));const Z=function(e){const{device:t,RouterStore:n,ThemeStore:o}=e;let r=fe;return(t.isElectron||t.isElectronCalendar||t.isMobileNative)&&(r=ge),new me((()=>{const e=n.state.route;return e&&r.includes(e.name)?o.state.mode:"light"}),{debugName:"ThemeModeStore"})}({device:x,RouterStore:U,ThemeStore:M}),B=x.isMobile?new se:void 0,N=await b().getPublicDomainUserId({device:x,deviceStore:C,mobileNative:I,cookieService:_}),O=new(a().CurrentUser),D=new h({environmentName:"production",getSettings:()=>{const e=(0,w().localUserOnlyGetConfig)("id_schema_dynamic_config_v3"),t=(null==e?void 0:e.get("percent",0))??0;return{enableTestDateOffset:!((null==e?void 0:e.get("real_id",!1))??!1),enableIdSchema:(0,m().lB)(t)}},isServerOriginated:!1,currentUserId:k,mapSpaceIdToShortId:(e,t)=>{const n=(0,S().aV)({defaultRecordCache:V,userId:e,spaceId:t});if(n&&n.short_id_str)return Number(n.short_id_str)}}),K={key:T,AppUpdateStore:new(i().D),device:x,deviceStore:C,WindowSizeStore:new(p().jE)({device:x},window),KeyboardShortcutStackStore:new(s().h),defaultRecordCache:V,mobileNative:I,RouterStore:U,ThemeStore:M,ThemeModeStore:Z,ElectronSqlite:P,KatexStore:new Q,LocalBacklinkStore:new ae,PageDetailsStore:new le,updateCurrentUserId:void 0,currentUser:O,SpellCheckStore:L,NativeMobileActionBarStore:B,TextSelectionCompositionStore:new(d().h),recordSubscriptionActions:y(),prefetchCache:v,TabbedRouterStore:E,cookieService:_,publicDomainUserId:N,idCreator:D};return g().LH(K),K}},616728:(e,t,n)=>{n.r(t),n.d(t,{AuthSyncListener:()=>b});var o=n(667294),r=()=>n(219727),a=()=>n(142735);const i="initial_handshake";var s=()=>n(989478),c=()=>n(788860),l=()=>n(513670),d=()=>n(839002),u=()=>n(342792),p=()=>n(205228),m=()=>n(826955),f=()=>n(704259),g=()=>n(385875),v=n(785893);const h=1;function b(){const e=(0,r().O7)(),t=(0,c().YB)(),n=`${p().default.identity.domainBaseUrl}/authSync`,b=e.currentUser.isLoggedIn(),[S,y]=(0,o.useState)(null),[w,k]=(0,o.useState)({value:!1,count:0}),x=(0,a().VK)((()=>f().default.getTotalUnreadMentionsCount()),[]),C=(0,a().VK)((()=>g().Z.getAllSpaceViewStores(e)),[e]);(0,o.useEffect)((()=>{const e=t=>{const n=p().default.identity.domainBaseUrl;t.origin===n&&t.ports&&t.ports[0]&&(y(t.ports[0]),window.removeEventListener("message",e))};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}}),[]),(0,o.useEffect)((()=>{b&&(w.value||0===w.count||null==S||S.postMessage({version:h,name:"unreadCount",source:"notion",unreadCount:x}))}),[b,w.count,w.value,S,x]);const I=(0,o.useCallback)((async()=>{const e=l().mN(C,"userId"),n=await(0,d().qd)(e,10,(async e=>{if(!e.userId)return;const n=m().U6.createChildStore(e,{table:s().KJ,id:e.userId});await n.load();const o=n.getEmail(),r=n.getDisplayName(t);return{id:e.userId,displayName:r,emailAddress:o}}));null==S||S.postMessage({version:h,name:"accountSwitcher",source:"notion",accounts:n})}),[t,S,C]);(0,o.useEffect)((()=>{b&&(w.value||0===w.count)&&I()}),[b,I,w.count,w.value]),(0,o.useEffect)((()=>{e.currentUser.id&&(0,u().e)(e.currentUser.id)&&(null==S||S.postMessage({version:h,name:"setNotionUserID",source:"notion",notionUserID:e.currentUser.id,type:"mutation"}))}),[e.currentUser.id,S]),(0,o.useEffect)((()=>{b||null==S||S.postMessage({version:h,name:"setNotionUserID",source:"notion",notionUserID:"",type:"mutation"})}),[b,S]);const _=(0,o.useCallback)((e=>{if(e.data.version!==h)return;const{source:t}=e.data;if("notion"!==t&&"mailLoaded"===e.data.name)k((e=>({value:!0,count:e.count+1})))}),[]);return(0,o.useEffect)((()=>(y((e=>(e&&(e.onmessage=_),e))),()=>{y((e=>(e&&(e.onmessage=null),e)))})),[_,S]),(0,v.jsx)("iframe",{src:n,style:{display:"none"},onLoad:e=>function(e){const t=e.currentTarget;setTimeout((()=>{var e;null===(e=t.contentWindow)||void 0===e||e.postMessage(i,p().default.identity.domainBaseUrl)}),50)}(e),title:"Notion Identity"})}},853249:(e,t,n)=>{n.d(t,{Z:()=>u});n(241792),n(667294);var o=()=>n(219727),r=()=>n(142735),a=()=>n(846550);const i=[[2,1,3,1],[1,0,2,0],[0,2,0,3],[3,3,0,2],[1,1,2,2]];var s=()=>n(668001),c=()=>n(725751),l=()=>n(291335),d=n(785893);function u(e){let{skipFadeinDelay:t}=e;const n=(0,o().O7)(),u=(0,r().VK)((()=>n.device.isElectronMac&&!Boolean(c().default.state.isShowingTabBar)),[n]),m=(0,r().Kw)(l().sidebarExpandedStore),f=(0,r().VK)((()=>m?l().sidebarWidthStore.state:0),[m]),g=(0,a().yK)((e=>{const t={width:20,height:20,borderRadius:4},n={height:10,minHeight:10,borderRadius:10};return{sidebar:{backgroundColor:e.surface.wash,boxShadow:e.sidebarBoxShadow,display:m?"flex":"none",minWidth:f,flexDirection:"column",padding:"12px 14px",overflow:"hidden"},heroSection:{paddingTop:u?36:0,marginBottom:22,display:"flex",alignItems:"center"},heroSectionIcon:{padding:"1px",...t,width:22,height:22},heroSectionTitle:{width:177,marginLeft:8,...n},toplevelMenu:{marginBottom:20,width:78,...n},toplevelMenuLast:{marginBottom:36,width:135,...n},sectionHeader:{marginBottom:14,width:56,...n},pageRow:{display:"flex",alignItems:"center",marginBottom:11},pageIcon:{...t},pageTitle:{marginLeft:8,...n}}}),[m,f,u]),v=(0,d.jsxs)("div",{style:g.heroSection,children:[(0,d.jsx)(s().Z,{style:g.heroSectionIcon,emphasized:!0}),(0,d.jsx)(s().Z,{style:g.heroSectionTitle,emphasized:!0})]}),h=(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(s().Z,{style:g.toplevelMenu,emphasized:!0}),(0,d.jsx)(s().Z,{style:g.toplevelMenu,emphasized:!0}),(0,d.jsx)(s().Z,{style:g.toplevelMenu,emphasized:!0}),(0,d.jsx)(s().Z,{style:g.toplevelMenuLast,emphasized:!0})]}),b=(0,d.jsx)(s().Z,{style:g.sectionHeader,emphasized:!0}),S=i.map(((e,n)=>e.map(((e,o)=>(0,d.jsxs)("div",{style:{...!t&&p(n),...g.pageRow},children:[(0,d.jsx)(s().Z,{style:g.pageIcon,emphasized:!0}),(0,d.jsx)(s().Z,{style:{...g.pageTitle,width:80+20*e},emphasized:!0})]},`${n}-${o}`)))));return(0,d.jsxs)("div",{style:g.sidebar,children:[v,h,b,S]})}function p(e){return 0===e?{}:{animation:`1s ease-in ${e}s 1 normal both running fadein`}}},151165:(e,t,n)=>{n.d(t,{Z:()=>r});class o extends(()=>n(263184))().default{}const r=new o},743959:(e,t,n)=>{n.d(t,{V:()=>o,Z:()=>a});let o=function(e){return e.IN_APP_CALLOUT_CONFLICT="in-app callout conflict",e.DARK_MODE="not shown in dark mode",e}({});class r extends(()=>n(263184))().default{getInitialState(){return{isVisible:!1,suppressReason:void 0}}}const a=new r},767831:(e,t,n)=>{n.d(t,{Z:()=>r});class o extends(()=>n(263184))().default{getInitialState(){return{open:!1}}}const r=new o},385021:(e,t,n)=>{n.d(t,{Z:()=>r});class o extends(()=>n(263184))().default{getInitialState(){return{justUnlocked:!1}}}const r=o},211937:(e,t,n)=>{n.d(t,{Z:()=>o});const o=new(n(529048).Z)},705111:(e,t,n)=>{n.d(t,{g:()=>o});const o=n(263184).default.createValue({shouldReset:!1},{name:"MobileAssistantMenuStore"})},147861:(e,t,n)=>{n.d(t,{Ko:()=>b,q7:()=>S,xU:()=>h});n(667294);var o=()=>n(219727),r=()=>n(142735),a=()=>n(724592),i=()=>n(359071),s=()=>n(788860),c=()=>n(454393),l=()=>n(603692),d=()=>n(594546),u=()=>n(345918),p=()=>n(151165),m=()=>n(293760),f=()=>n(548812),g=()=>n(93543),v=n(785893);function h(){const e=(0,r().VK)((()=>{const{editsBlocked:e}=m().default.state;return e??!1}),[]),t=(0,o().O7)();return(0,r().VK)((()=>(0,f().Un)(t)),[t])&&e}function b(){return(0,r().VK)((()=>{var e;const t=p().Z.state;return null==t||null===(e=t.data)||void 0===e?void 0:e.invoiceHostedUrl}),[])}function S(){const e=(0,o().O7)(),t=b(),n=(0,r().VK)((()=>{var e;const t=p().Z.state;return(null==t||null===(e=t.data)||void 0===e?void 0:e.overdueInvoiceCount)??0}),[]),d=(0,r().VK)((()=>(0,u().Fn)(e)),[e]),m=function(e,t){if(e)return t>1?(0,v.jsx)(s()._H,{defaultMessage:"Access to Notion is limited because we couldn’t process {overdueInvoiceCount, plural, one {your last payment} other {{overdueInvoiceCount} payments}}.",id:"uncollectibleExperience.uncollectibleExperienceOverlay.multipleInvoicesMessageContent",values:{overdueInvoiceCount:t}}):(0,v.jsx)(s()._H,{defaultMessage:"Access to Notion is limited because we couldn’t process your last payment",id:"uncollectibleExperience.uncollectibleExperienceOverlay.messageContent"});return(0,v.jsx)(s()._H,{id:"uncollectibleExperience.uncollectibleExperienceOverlay.memberMessageContent",defaultMessage:"Access to Notion is limited"})}(d,n),f=function(e){if(e)return;return(0,v.jsx)(s()._H,{id:"uncollectibleExperience.uncollectibleExperienceOverlay.memberSecondaryLabel",defaultMessage:"Contact a workspace owner to update your workspace’s payment method"})}(d),h=function(e,t,n){if(t){const o=(0,g().o)(n);return n=>{o&&(y(t,e),o(n))}}return n=>{y(t,e),c().r$()}}(e,d,t),S=function(e){if(e)return(0,v.jsx)(s()._H,{defaultMessage:"View unpaid invoice",id:"uncollectibleExperience.uncollectibleExperienceOverlay.buttonLabel"});return(0,v.jsx)(s()._H,{id:"uncollectibleExperience.uncollectibleExperienceOverlay.memberButtonLabel",defaultMessage:"View workspace owner"})}(d),w=function(e){if(e)return(0,v.jsx)(l().y,{iconGroup:a().R,variantName:"default",colorName:"primary"});return(0,v.jsx)(l().y,{iconGroup:i().s,variantName:"default",colorName:"primary"})}(d);return{clickAction:h,ctaMessage:S,primaryMessage:m,secondaryMessage:f,ctaIcon:w,tooltipBodyMessage:d?S:f,isWorkspaceOwner:d,overdueInvoiceCount:n}}function y(e,t){(0,d().j)({environment:t,event:{eventName:"subscription_uncollectible_blurred_experience_cta_clicked",eventProperties:{is_workspace_owner:e}}})}},223248:(e,t,n)=>{n.d(t,{Id:()=>w,Ng:()=>k,Px:()=>S,ow:()=>y,t_:()=>b,um:()=>h});n(267602),n(653476);var o=()=>n(506347),r=()=>n(989478),a=()=>n(465755),i=()=>n(824462),s=()=>n(636340),c=()=>n(102182),l=()=>n(224597),d=()=>n(269299),u=()=>n(527278),p=()=>n(345918),m=()=>n(876822),f=()=>n(555813),g=()=>n(111631);const v=(0,n(788860).vU)({joinTeamSuccessMessage:{id:"teamInviteLinkActions.joinTeam.confirmationMessage",defaultMessage:"Joined {teamName}"},requestTeamSuccessMessage:{id:"teamInviteLinkActions.requestAccess.successMessage",defaultMessage:"Successfully requested membership"},requestTeamFailureMessage:{id:"teamInviteLinkActions.requestAccess.failureMessage",defaultMessage:"Failed to request membership"}});async function h(e){let{environment:t,userId:n,teamStore:o,user:r}=e;const i=o.getSpaceId();if(!i)return;await f().Wi({environment:t,teamId:o.id,spaceId:i,teamUserInfo:r,isSettingDefaultTeam:!1,inviterId:n})&&(a().UD(t,{store:o,joined_role:"member",from:"team_invite_link"}),await b({environment:t,userId:n,teamStore:o}),c().oV({label:u().Z.formatMessage(v.joinTeamSuccessMessage,{teamName:o.getName()})}))}async function b(e){let{environment:t,userId:n,teamStore:r}=e;const a=m().default.state.currentUserRootStore,i=r.getSpaceId();if(!i||!a)return;const s=a.getSpaceViewStores().filter((e=>e.getSpaceId()===i))[0];await l().y3({environment:t,spaceViewStore:s,userSettingsStore:void 0,userRootStore:a,pageVisitSource:o().tY.JoinTeam,navigationType:"switchingToOrLoadingSpace"}),await g().I({environment:t,spaceId:i,userId:n}),f().hI({environment:t,teamStore:r,shouldScroll:!0})}async function S(e){let{environment:t,teamId:n,message:o}=e;if(!t.currentUser.id)return;"success"===(await i().callApi({eventName:"requestAccess",environment:t,data:{type:"current-actor-to-team",teamId:n,message:o}})).type?(a().LB(t,{teamId:n}),await w({environment:t}),new Promise((e=>setTimeout(e,500))).then((()=>{c().oV({label:u().Z.formatMessage(v.requestTeamSuccessMessage)})}))):c().oV({label:u().Z.formatMessage(v.requestTeamFailureMessage)})}async function y(e){let{environment:t,teamStore:n,accessRequestStore:o,status:i}=e;const c=o.getForActorId();if(!c)return;const l=o.getRecordModel({table:r().KJ,id:c});if(l){if("approved"===i){const e=[{type:"member",entity_type:"user",user_id:l.id}];if(!(await f().Uj({environment:t,teamStore:n,teamMemberInfos:e,isSettingDefaultTeam:!1,createNewTeamFlowId:void 0})))return}d().createAndCommit({userAction:"GrantAccessActivityAction.handleGrantAccess",environment:t,canUndo:!0,perform:e=>{s().sW({store:o,transaction:e,data:{resolved_time:Date.now(),resolved_by_table:r().KJ,resolved_by_id:t.currentUser.id,status:i}})}}),a().co(t,{store:n,resolution:i})}}async function w(e){let{environment:t}=e;const{lastVisitedSpaceView:n,userRootStore:r,userSettingsStore:a}=await(0,p().iX)({environment:t,disableRedirectUrl:!1});n?await l().y3({environment:t,spaceViewStore:n,userRootStore:r,userSettingsStore:a,pageVisitSource:o().tY.BackForward,navigationType:"switchingToOrLoadingSpace"}):await l().L5({environment:t,userRootStore:r,userSettingsStore:a,pageVisitSource:o().tY.BackForward})}async function k(e){let{environment:t,teamId:n}=e;const o=await i().callApi({eventName:"getTeamAccessRequestMetadata",environment:t,data:{teamId:n}});if("success"===o.type)return o.data}},450194:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(667294),r=()=>n(788860),a=n(785893);const i=(0,r().vU)({message_placeholder:{id:"teamInviteLinkRequestPage.message.placeholder",defaultMessage:"Message (optional)"}});const s=function(e){const{teamStore:t,teamName:s,teamId:c,isModalOpen:l,onDismiss:d}=e,[u,p]=(0,o.useState)(""),m=(0,n(219727).O7)(),f=(0,r().YB)(),g=async()=>{await n(223248).Px({environment:m,teamId:c,message:u}),d()},v=(0,n(846550).yK)((()=>({modal:{alignSelf:"center",overflow:"visible",padding:15,width:420},requestTitle:{display:"inline-flex",marginBottom:10},icon:{marginLeft:4,marginRight:4},footer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:15},requestInvitesButton:{marginLeft:20},input:{padding:8}})),[]);return(0,a.jsx)(n(708518).Z,{open:l,onDismiss:d,innerStyle:v.modal,preventHideChildrenWhileOpening:!0,render:()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{style:v.requestTitle,children:(0,a.jsx)(r()._H,{id:"teamInviteLinkRequestModal.reasonForRequest.title",defaultMessage:"Request access to {icon} {teamName}",values:{teamName:s,icon:(0,a.jsx)(n(383694).p,{style:v.icon,store:t,disabled:!0,size:22})}})}),(0,a.jsx)(n(291198).Z,{textarea:!0,style:v.input,value:u,onChange:e=>{p(e.target.value)},placeholder:f.formatMessage(i.message_placeholder)}),(0,a.jsxs)("div",{style:v.footer,children:[(0,a.jsx)(n(67961).Z,{isSecondaryColor:!0,isSmall:!0,isMultiline:!0,children:(0,a.jsx)(r()._H,{id:"teamInviteLinkRequestModal.caption",defaultMessage:"Your teamspace owners will approve or decline your request."})}),(0,a.jsx)(n(906651).Z,{isLarge:!0,style:v.requestInvitesButton,onClick:g,children:(0,a.jsx)(r()._H,{id:"teamInviteLinkRequestModal.requestAccessButton.label",defaultMessage:"Request"})})]})]})})}},118795:(e,t,n)=>{var o=()=>n(677559);const r={WorkflowTemplatesBuilderNotInProd:new(o().Ss)("WorkflowTemplateBuilderNotInProd",(async()=>await Promise.all([n.e(80741),n.e(72586),n.e(6532)]).then(n.bind(n,219544)))),CollectionItemNameConfigMenuItemNotInProd:new(o().Ss)("CollectionItemNameConfigMenuItemNotInProd",(async()=>await n.e(53784).then(n.bind(n,629294))))};(0,o().kF)(r.WorkflowTemplatesBuilderNotInProd,(e=>e.WorkflowTemplatesBuilderNotInProd)),(0,o().kF)(r.CollectionItemNameConfigMenuItemNotInProd,(e=>e.CollectionItemNameConfigMenuItemNotInProd))},724592:(e,t,n)=>{n.d(t,{R:()=>o});const o=(0,n(827282).CZ)("arrowUpRightSquare",{default:{loader:()=>n.e(37795).then(n.bind(n,237795))},small:{loader:()=>n.e(23099).then(n.bind(n,423099))},mini:{loader:()=>n.e(16954).then(n.bind(n,516954))},large:{loader:()=>n.e(54753).then(n.bind(n,954753))}})},359071:(e,t,n)=>{n.d(t,{s:()=>o});const o=(0,n(827282).CZ)("personCircle",{default:{loader:()=>n.e(68260).then(n.bind(n,68260))},small:{loader:()=>n.e(25958).then(n.bind(n,225958))},mini:{loader:()=>n.e(36734).then(n.bind(n,336734))},large:{loader:()=>n.e(13183).then(n.bind(n,813183))}})},675987:(e,t,n)=>{n.r(t),n.d(t,{clearNotionLocalStorageWithNoPermission:()=>a});var o=()=>n(767751),r=()=>n(694050);function a(){o().Z.removeAllIfNoPermission(),r().Z.removeAllIfNoPermission()}}}]);