"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[52647],{128039:(e,t,o)=>{o.r(t),o.d(t,{FORMS_SHARE_CALLOUT_KEY:()=>J,changeFormClosedState:()=>ue,changeFormSubmissionPermissions:()=>pe,createAndFocusCollectionFormEditorView:()=>ne,createCollectionFormEditorView:()=>ie,createDummyFormPage:()=>he,createFormInPrivate:()=>re,createFormQuestion:()=>de,createFormQuestionAndModuleForNewlyDuplicatedProperty:()=>ce,createFormQuestionAndUpdateOrCreateModule:()=>me,createResponsesCollectionView:()=>se,deleteFormQuestion:()=>le,handleUpdateFormQuestionName:()=>te,incrementAndTrackUserFormsCreated:()=>ee,maybeAlertAboutUnsupportedPublicQuestions:()=>we,maybeSyncQuestionNameToPropertyName:()=>oe,remapQuestionToNewProperty:()=>ye,toggleAnonymousFormSubmissionState:()=>fe,toggleNotionBrandingState:()=>ge});o(821057),o(670560),o(267602),o(653476),o(470928),o(30005),o(667294);var a=()=>o(846550),n=()=>o(506347),i=()=>o(156642),r=()=>o(863112),s=()=>o(226413),l=()=>o(532850),d=()=>o(817629),c=()=>o(998411),m=()=>o(667932),u=()=>o(217465),p=()=>o(375255),f=()=>o(396136),g=()=>o(139978),y=()=>o(26645),h=()=>o(483791),w=()=>o(955620),v=()=>o(788860),M=()=>o(342792),x=()=>o(543172),b=()=>o(707513),C=()=>o(984871),k=()=>o(139224),S=()=>o(132156),T=()=>o(308186),_=()=>o(421654),F=()=>o(636340),j=()=>o(47443),I=()=>o(145284),A=()=>o(269299),P=()=>o(348141),E=()=>o(932753),D=()=>o(594546),B=()=>o(907005),R=()=>o(270315),N=()=>o(487270),Q=()=>o(527278),L=()=>o(660065),H=()=>o(909679),V=()=>o(676232),Z=()=>o(803728),z=()=>o(99537),W=()=>o(913011),O=()=>o(356117),U=()=>o(876822),q=()=>o(749826),G=()=>o(808282),K=()=>o(807230),$=()=>o(469753),Y=o(785893);const X=(0,v().vU)({responsesViewName:{id:"formEditorActions.responsesViewName",defaultMessage:"Responses"},newFormViewName:{id:"formEditorActions.newFormViewName",defaultMessage:"Form builder"},formDatabaseTitle:{id:"newBlock.databaseInline.formDatabaseTitle",defaultMessage:"New form"}}),J="forms_share_form_tooltip";function ee(e,t){const{currentUserSettingsStore:o}=U().default.state;if(!o)return;const a=function(){const{currentUserSettingsStore:e}=U().default.state;if(!e)return;return e.getSettingsStore().getKeyStore("user_forms_created_count").getValue()??0}();void 0!==a&&(P().d2({userSettingsStore:o,transaction:t,data:{user_forms_created_count:a+1}}),function(e,t){(0,D().j)({environment:e,event:{eventName:"form_created",eventProperties:{user_total_form_count:t.userFormsCreatedCount}}})}(e,{userFormsCreatedCount:a+1})),q().default.logEvent("form_created")}function te(e){var t;const{questionStore:o,newName:a,environment:n,collectionStore:i,collectionSchema:r,collectionContextStore:s}=e,l=null===(t=o.getConfig())||void 0===t?void 0:t.propertyId;if(!l)throw new Error("No property ID found for question");A().createAndCommit({userAction:"formQuestion.changeName",environment:n,canUndo:!0,perform:e=>{var t,n;const d=null===(t=o.getConfig())||void 0===t?void 0:t.name;if(!d)return;const m=(0,p().Xh)({textValue:d,getRecordModel:o.getRecordModel,deterministic:!0,userTimeZone:(0,c().r)(),intl:Q().Z.getIntl()})===(null===(n=r[l])||void 0===n?void 0:n.name);A().applyOperation({store:o,operation:{pointer:o.pointer,path:["config","name"],command:"set",args:[[a]]},transaction:e}),o.shouldSyncQuestionNameToPropertyName()&&(m&&!(0,R().Gu)({property:l,collectionContextStore:s,newValue:a})?C().Bv({collectionStore:i,property:l,name:a,transaction:e}):A().applyOperation({store:o,operation:{pointer:o.pointer,path:["config","shouldSyncQuestionNameToPropertyName"],command:"set",args:!1},transaction:e}))}})}function oe(e){var t;const{questionStore:o,environment:a,collectionStore:n,collectionContextStore:i}=e,r=null===(t=o.getConfig())||void 0===t?void 0:t.propertyId;if(!r)throw new Error("No property ID found for question");A().createAndCommit({userAction:"formQuestion.changeName",environment:a,canUndo:!0,perform:e=>{if(!o.shouldSyncQuestionNameToPropertyName())return;const t=o.getNameStore().getValue();if(!t)return;const a=(0,p().Xh)({textValue:t,getRecordModel:o.getRecordModel,deterministic:!0,userTimeZone:(0,c().r)(),intl:Q().Z.getIntl()}),s=(0,R().Gu)({property:r,collectionContextStore:i,newValue:a})?(0,d().n)(a):a;C().Bv({collectionStore:n,property:r,name:s,transaction:e})}})}function ae(){const e=(0,a().yK)((e=>({container:{display:"flex",flexDirection:"column"},iconGroup:{display:"flex",flexDirection:"row",justifyContent:"center",color:e.icon.secondary,alignItems:"center"},dialogTitle:{fontSize:16,fontWeight:b().Ue.semibold,lineHeight:"22px",marginTop:12,marginBottom:12},dialogDescription:{color:e.text.secondary,fontSize:14,lineHeight:"20px"}})),[]);return(0,Y.jsxs)("div",{style:e.container,children:[(0,Y.jsxs)("div",{style:e.iconGroup,children:[(0,V().t)({width:24}),(0,L().r)({width:16,marginLeft:16,marginRight:14}),(0,H().E)({width:24})]}),(0,Y.jsx)("span",{style:e.dialogTitle,children:(0,Y.jsx)(v()._H,{defaultMessage:"Auto-create form questions based on existing properties?",id:"NewFormOnExistingCollectionDialogTitle.message"})}),(0,Y.jsx)("span",{style:e.dialogDescription,children:(0,Y.jsx)(v()._H,{defaultMessage:"Only supported property types will create new questions.",id:"NewFormOnExistingCollectionDialogTitle.description"})})]})}function ne(e){const{environment:t,collectionContextStore:o,transaction:a}=e,n=o.collectionViewBlockStore(),i=o.collectionStore();if(!n||!i)return;const r=o.normalizedSchemaStore.state,s=ie({environment:t,collectionViewBlockStore:n,schema:r,transaction:a,initializeWithAllDefaultQuestions:!1});if(!s)return;(0,E().f8)({environment:t,collectionContextStore:o,collectionViewId:s.newViewId,isFullScreen:o.isFullScreenStore.state,isRootChild:o.isRootChildStore.state,isInPeekRenderer:o.isInPeekRendererStore.state});const l=s.layoutStore,d=Object.keys(r).filter((e=>{const t=r[e];return"title"!==e&&t&&(0,$().I0)(t)}));d.length>0&&d.length<=$().h0&&T().vC({showCancel:!1,keepFocus:!1,message:(0,Y.jsx)(ae,{}),mode:"wide",items:[{label:(0,Y.jsx)(v()._H,{defaultMessage:"Create {numQuestions, plural, one {1 question} other {{numQuestions} questions}}",id:"formEditorActions.createQuestions.primaryAction",values:{numQuestions:d.length}}),color:"blue",buttonType:"solid",onAccept(){A().createAndCommit({environment:t,userAction:"formActions.autoCreateFormQuestionsForExistingDatabase",canUndo:!0,perform:e=>{for(const a of d)ce({environment:t,transaction:e,layoutStore:l,collectionStore:i,propertyId:a,position:{type:"area_relative",area:"form_layout_schema",location:"end_moveable"},addLayoutModule:o=>{(0,z().sW)({environment:t,sessionId:(0,M().ZP)(),layoutStore:l,position:o.position??{type:"area_relative",area:"form_layout_schema",location:"end_moveable"},module:o.layoutModule,transaction:e,isPropertyCreation:!1})},collectionContextStore:o,shouldLogEvent:!0,autoCreatedFromExistingDatabase:!0})}})}},{label:(0,Y.jsx)(v()._H,{defaultMessage:"Start from scratch",id:"formEditorActions.createQuestions.secondary"}),color:"gray",buttonType:"plain",onAccept(){}}]})}function ie(e){const{environment:t,collectionViewBlockStore:o,transaction:a,schema:n,initializeWithAllDefaultQuestions:i}=e;if(!o)return;const l=o.getSpaceId(),{formBlockStore:d,layoutStore:c}=function(e){var t;const{environment:o,spaceId:a,inMemoryRecordCache:n,transaction:i,schema:l,initializeWithAllDefaultQuestions:d}=e,c=Object.keys(l).find((e=>{var t;return"select"===(null===(t=l[e])||void 0===t?void 0:t.type)})),u=Boolean(d&&void 0!==c),p=(0,N().TS)({environment:o,table:f().iU,spaceId:a}),g=(0,N().TS)({environment:o,table:y().L_,spaceId:a}),w=u?(0,N().TS)({environment:o,table:y().L_,spaceId:a}):void 0,v=F().j4({id:p,environment:o,type:"form",permissions:(0,r().wG)(),inMemoryRecordCache:n,transaction:i}),M=F().ae({environment:o,table:h().Bh,value:{space_id:a,parent_table:f().iU,parent_id:v.id,modules:(0,m().l2)(g,w)},inMemoryRecordCache:n,transaction:i});var x;_().FH({stores:[v],update:{form_layout_pointer:{id:M.id,spaceId:a,table:h().Bh}},transaction:i}),de({environment:o,questionId:g,spaceId:a,layoutId:M.id,propertyId:s().iw,initialQuestionTitle:(null===(t=l[s().iw])||void 0===t?void 0:t.name)??"",inMemoryRecordCache:n,transaction:i,shouldSyncQuestionNameToPropertyName:!0,shouldLogEvent:!1}),u&&w&&c&&de({environment:o,questionId:w,spaceId:a,layoutId:M.id,propertyId:c,initialQuestionTitle:(null===(x=l[c])||void 0===x?void 0:x.name)??"",inMemoryRecordCache:n,transaction:i,shouldSyncQuestionNameToPropertyName:!0,shouldLogEvent:!1});return{formBlockStore:v,layoutStore:M}}({environment:t,spaceId:l,inMemoryRecordCache:o.inMemoryRecordCache,transaction:a,schema:n,initializeWithAllDefaultQuestions:i}),u=(0,E().W9)({environment:t,collectionViewBlockStore:o,collectionView:{type:"form_editor",parent_id:o.id,parent_table:f().iU,alive:!0,space_id:l,name:Q().Z.formatMessage(X.newFormViewName),format:{form_block_pointer:{id:d.id,spaceId:l,table:f().iU}}},transaction:a});return F().sW({store:d,data:{parent_id:u.id,parent_table:g().np,alive:!0},transaction:a}),G().Z.setState({openTooltip:u.id}),Z().yM(t,J),ee(t,a),{newViewId:u.id,layoutStore:c,formId:d.id}}function re(e){const{environment:t,navigateToFormBuilder:o}=e,{currentSpaceStore:a,currentSpaceViewStore:i}=U().default.state;if(!a||!i)return;if(!(0,K().ww)(t))return void(0,K().eD)(t);if(!(a&&a.canEdit()&&i))return;const r=a.id,s=t.idCreator.getSpaceIdCreatorSync(r);A().createAndCommit({environment:t,userAction:"formActions.createAndNavigateToFormInPrivate",canUndo:!0,perform:e=>{var l;const{targetBlockStore:d}=S().Z({environment:t,sourceBlockId:"root",targetBlockPointer:(0,N().Ii)({environment:t,table:f().iU,spaceId:r}),sourceBlockSubtree:(0,u().partialRecordMapToRecordMap)(B().Xq({isInline:!0,name:(0,w().TPx)(Q().Z.formatMessage(X.formDatabaseTitle))})),targetRecordCache:a.inMemoryRecordCache,transaction:e,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!1,spaceIdCreator:s}),c=d.getCollectionStore(),m=null==c||null===(l=c.getModel())||void 0===l?void 0:l.getNormalizedSchema(),p=d;if(!m)throw new Error("Schema not found");ie({environment:t,transaction:e,collectionViewBlockStore:p,schema:m,initializeWithAllDefaultQuestions:!0}),se({environment:t,transaction:e,collectionViewBlockStore:p,schema:m}),I().Hj({environment:t,spaceStore:a,spaceViewStore:i,pageStore:d,isPrivate:!0,transaction:e,location:{type:"prepend"}}),o&&j()._c({environment:t,store:d,pageVisitSource:n().tY.CreateFormDeepLink})}})}function se(e){const{environment:t,collectionViewBlockStore:o,transaction:a}=e,n=o.getSpaceId(),i=Object.keys(e.schema).find((t=>{var o;return"created_by"===(null===(o=e.schema[t])||void 0===o?void 0:o.type)}));(0,E().W9)({environment:t,collectionViewBlockStore:o,collectionView:{type:"table",parent_id:o.id,parent_table:f().iU,alive:!0,name:Q().Z.formatMessage(X.responsesViewName),space_id:n,format:{table_properties:[{property:"title",visible:!0},...i?[{property:i,visible:!0}]:[]],table_wrap:!0,collection_pointer:o.getCollectionPointer()}},transaction:a})}function le(e){let{environment:t,moduleId:o,sessionId:a,layoutStore:n,collectionSettingsStore:i,isCollectionEmpty:r,collectionContextStore:s,propertyId:l,questionId:d}=e;const c=s.collectionStore();if(!c)throw new Error("Could not find collection store");const m=s.normalizedSchemaStore.state;A().createAndCommit({environment:t,userAction:"formActions.deleteFormQuestion",canUndo:!0,perform:e=>{var i;(0,W().H)({environment:t,position:{area:"form_layout_schema",moduleId:o},layoutStore:n,sessionId:a,transaction:e});const s=null===(i=m[l])||void 0===i?void 0:i.type;r&&s&&"title"!==s&&C().E2({environment:t,collectionStore:c,schema:m,property:l,transaction:e})}}),(0,D().j)({environment:t,event:{eventName:"delete_form_question",eventProperties:(0,$().Pz)({collectionContextStore:s,propertyId:l,questionId:d})}}),k().E3({collectionSettingsStore:i})}function de(e){const{environment:t,questionId:o,spaceId:a,layoutId:n,propertyId:i,initialQuestionTitle:r,inMemoryRecordCache:s,transaction:l,shouldSyncQuestionNameToPropertyName:d,collectionContextStore:c,shouldLogEvent:m=!0,autofocusTitle:u,existingFormQuestionConfig:p,autoCreatedFromExistingDatabase:f}=e;F().ae({environment:t,table:y().L_,value:{id:o,space_id:a,parent_table:h().Bh,parent_id:n,alive:!0,config:{...p,propertyId:i,name:[[r]],shouldSyncQuestionNameToPropertyName:d}},inMemoryRecordCache:s,transaction:l}),m&&(0,D().j)({environment:t,event:{eventName:"add_form_question",eventProperties:{...(0,$().Pz)({collectionContextStore:c,propertyId:i,questionId:o}),auto_created_from_existing_database:Boolean(f)}}}),u&&u.autofocusedQuestionTextStore.autofocusQuestionTitle({questionId:o})}function ce(e){const{environment:t,transaction:o,layoutStore:a,collectionStore:n,propertyId:i,position:r,addLayoutModule:s,collectionContextStore:l,shouldLogEvent:d=!0,autofocusTitle:c,existingFormQuestionConfig:m,autoCreatedFromExistingDatabase:u}=e,p=n.getSchema()[i];if(!p)throw new Error(`No schema found for property ${i}`);const f=m?(0,w().QaF)(null==m?void 0:m.name):p.name,g=a.getSpaceId(),h=(0,N().TS)({environment:t,table:y().L_,spaceId:g});return de({environment:t,questionId:h,spaceId:g,layoutId:a.id,propertyId:i,initialQuestionTitle:f,inMemoryRecordCache:a.inMemoryRecordCache,transaction:o,shouldSyncQuestionNameToPropertyName:!0,shouldLogEvent:d,collectionContextStore:l,autofocusTitle:c,existingFormQuestionConfig:m,autoCreatedFromExistingDatabase:u}),s({layoutModule:{type:"formQuestion",id:(0,x().ZP)(),formQuestionId:h},position:r,transaction:o}),{questionId:h}}function me(e){const{environment:t,transaction:o,layoutStore:a,propertyId:n,initialQuestionTitle:i,moduleId:r,shouldSyncQuestionNameToPropertyName:s,collectionContextStore:l,autofocusTitle:d,area:c}=e,m=a.getModel();if(!m)throw new Error("Layout model cannot be undefined");const u=a.getSpaceId(),p=(0,N().TS)({environment:t,table:y().L_,spaceId:u});de({environment:t,questionId:p,spaceId:u,layoutId:m.id,propertyId:n,initialQuestionTitle:i,inMemoryRecordCache:a.inMemoryRecordCache,transaction:o,shouldSyncQuestionNameToPropertyName:s,collectionContextStore:l,autofocusTitle:d});const f={type:"formQuestion",id:r??(0,x().ZP)(),formQuestionId:p,..."form_conditional_modules"===c?{parentModuleId:e.parentModuleId,parentConditionalGroupId:e.parentConditionalGroupId}:{}};return r?(0,O().Uq)({environment:t,transaction:o,layoutStore:a,position:{area:c,moduleId:r},updatedModule:f}):"form_conditional_modules"===c&&(0,z().sW)({environment:t,transaction:o,layoutStore:a,position:{type:"absolute",area:"form_conditional_modules",parentConditionalGroupId:e.parentConditionalGroupId,parentModuleId:e.parentModuleId},module:f,sessionId:(0,M().ZP)(),isPropertyCreation:!1}),{updatedModuleId:f.id}}function ue(e){let{environment:t,formBlockStore:o,isClosed:a}=e;o.getIsFormClosed()!==a&&A().createAndCommit({userAction:"formActions.changeFormClosedState",environment:t,canUndo:!0,perform:e=>{_().FH({stores:[o],update:{form_config:{...o.getFormConfig(),is_form_closed:a}},transaction:e})}})}function pe(e){let{environment:t,formBlockStore:o,permissions:a}=e;o.getFormSubmissionPermissions()!==a&&A().createAndCommit({userAction:"formActions.changeFormSubmissionPermissions",environment:t,canUndo:!0,perform:e=>{_().FH({stores:[o],update:{form_config:{...o.getFormConfig(),submission_permissions:a}},transaction:e})}})}function fe(e){let{environment:t,formBlockStore:o}=e;const a=o.getIsFormAnonymousSubmissionEnabled();A().createAndCommit({userAction:"formActions.changeAnonymousFormSubmissionState",environment:t,canUndo:!0,perform:e=>{_().FH({stores:[o],update:{form_config:{...o.getFormConfig(),anonymous_submissions:!a}},transaction:e})}})}function ge(e){var t;let{environment:o,formBlockStore:a}=e;const n=a.getSiteStore();if(!n)return;const i=(null===(t=n.getHeader())||void 0===t?void 0:t.hideWatermark)??!1;A().createAndCommit({userAction:"formBlockStore.publicForm.toggleNotionBranding",environment:o,canUndo:!0,perform:e=>{A().applyOperation({store:n,operation:{pointer:n.pointer,path:["header","hideWatermark"],command:"set",args:!i},transaction:e})}})}function ye(e){let{environment:t,newPropertyId:o,formQuestionStore:a}=e;A().createAndCommit({userAction:"formQuestion.remapQuestionToNewProperty",environment:t,canUndo:!0,perform:e=>{A().applyOperation({store:a,operation:{pointer:a.pointer,path:["config","propertyId"],command:"set",args:o},transaction:e})}})}function he(e){const{environment:t,collectionSchema:o,temporaryRecordCache:a,spaceId:n,collectionId:r,formMode:s}=e,l={};Object.keys(o).forEach((e=>{l[e]=(0,w().TPx)("")}));const{performResult:d}=A().createAndCommit({environment:t,userAction:"formActions.createDummyFormPage",perform:e=>{const o=F().j4({environment:t,type:i().Ti.page,inMemoryRecordCache:a,transaction:e,spaceId:n,properties:{...l}});return F().sW({store:o,data:{alive:"viewer"===s,parent_id:r,parent_table:"collection"},transaction:e}),o},canUndo:!1});return d}async function we(e){const{environment:t,formBlockStore:o,collectionSchema:a,theme:n,onAccept:i}=e;if(!a)return;const r=(0,$().jj)(o),s=(null==r?void 0:r.getFormQuestionsForFormLayout())??[],d=[];if(s.forEach((e=>{const o=e.getPropertyId();if(!o)return;const n=(0,l().Qm)({schema:a,property:o}),i=null==n?void 0:n.type;if(!i)return;(0,$().Hz)({environment:t,propertyType:i,propertySchema:n,isPublicForm:!0})&&d.push(e)})),0===d.length)return void i();const m=d.map(((e,t)=>{const o=(0,p().Xh)({textValue:e.getNameStore().getValue(),getRecordModel:e.getRecordModel,deterministic:!0,userTimeZone:(0,c().r)(),intl:Q().Z.getIntl()}),a=t===d.length-1;return(0,Y.jsx)("div",{style:{fontSize:14,textAlign:"start",padding:"8px 12px",borderBottom:a?void 0:`1px solid ${n.lightDividerColor}`},children:o},e.id)})),{accept:u}=await T().gt({message:(0,Y.jsx)(v()._H,{id:"formEditorActions.maybeAlertAboutUnsupportedPublicQuestions.message",defaultMessage:"These questions are not supported in public forms and will not be shown to respondents:"}),description:(0,Y.jsx)("div",{style:{borderRadius:6,border:`1px solid ${n.lightDividerColor}`,width:"calc(100% + 24px)",marginLeft:-12,marginTop:12,maxHeight:210,overflow:"auto"},children:m}),acceptLabel:(0,Y.jsx)(v()._H,{id:"formEditorActions.maybeAlertAboutUnsupportedPublicQuestions.acceptLabel",defaultMessage:"Got it"}),acceptColor:"blue",cancelButtonType:"plain",mode:"wide"});u&&i()}},255453:(e,t,o)=>{o.d(t,{W:()=>i,Z:()=>s});o(267602),o(749411);var a=o(667294),n=o(785893);const i={"en-US":"en","ja-JP":"ja","ko-KR":"ko","fr-FR":"fr","de-DE":"de","pt-BR":"pt-BR","es-ES":"es-ES"};function r(e){return e.src?(0,n.jsx)("img",{style:e.style,src:e.src}):null}const s=a.forwardRef((function(e,t){const i=(0,o(846550).Fg)(),s=a.useRef(e);s.current=e,a.useEffect((()=>{const t=document.createElement("script");t.src="https://player.vimeo.com/api/player.js",document.body.appendChild(t);const o=window.Vimeo;if(!o)return()=>{};const a=document.getElementById(e.src),n=new o.Player(a);return n?(n.on("play",(e=>{var t,o;null===(t=(o=s.current).onPlay)||void 0===t||t.call(o,e)})),n.on("pause",(e=>{var t,o;null===(t=(o=s.current).onPause)||void 0===t||t.call(o,e)})),n.on("ended",(e=>{var t,o;null===(t=(o=s.current).onEnd)||void 0===t||t.call(o,e)})),()=>{n.off("play"),n.off("pause"),n.off("ended")}):()=>{}}),[e.src,s.current.src]);const l=function(e,t){const a=(0,o(696459).qP)(t).flatMap((e=>{let[t,o]=e;return`${t}=${o}`})).join("&");return`${e}&${a}`}(s.current.src,{texttrack:s.current.defaultTextTrack,playsinline:!1,...s.current.options}),d={position:"absolute",top:0,left:0,width:"100%",height:"100%",borderStyle:"solid",borderColor:i.tableDividerColor,borderWidth:"0 0 1px 0"};return(0,n.jsxs)(o(728048).Z,{ratio:s.current.aspectRatioOverride??9/16,children:[(0,n.jsx)(r,{style:d,src:s.current.preloadThumbnailSrc}),(0,n.jsx)("iframe",{ref:t,id:s.current.src,className:s.current.className,allowFullScreen:!0,src:l,style:{...d,...s.current.style}})]})}))},616715:(e,t,o)=>{o.d(t,{p:()=>n});o(667294);var a=o(785893);const n=(0,o(827282).IU)("playCircle",{viewBox:"0 0 20 20",svg:(0,a.jsx)("path",{d:"M9.99316 17.126C9.02702 17.126 8.11784 16.9414 7.26562 16.5723C6.41341 16.2077 5.66146 15.6995 5.00977 15.0479C4.36263 14.3962 3.85449 13.6442 3.48535 12.792C3.11621 11.9398 2.93164 11.0306 2.93164 10.0645C2.93164 9.09831 3.11621 8.18913 3.48535 7.33691C3.85449 6.4847 4.36263 5.73503 5.00977 5.08789C5.66146 4.4362 6.41113 3.92578 7.25879 3.55664C8.111 3.1875 9.02018 3.00293 9.98633 3.00293C10.957 3.00293 11.8685 3.1875 12.7207 3.55664C13.5729 3.92578 14.3249 4.4362 14.9766 5.08789C15.6283 5.73503 16.1387 6.4847 16.5078 7.33691C16.877 8.18913 17.0615 9.09831 17.0615 10.0645C17.0615 11.0306 16.877 11.9398 16.5078 12.792C16.1387 13.6442 15.6283 14.3962 14.9766 15.0479C14.3249 15.6995 13.5729 16.2077 12.7207 16.5723C11.8685 16.9414 10.9593 17.126 9.99316 17.126ZM8.7627 12.8535L12.707 10.5293C12.821 10.4564 12.8962 10.363 12.9326 10.249C12.9736 10.1305 12.9736 10.012 12.9326 9.89355C12.8962 9.77507 12.821 9.68392 12.707 9.62012L8.7627 7.28223C8.63965 7.20931 8.51204 7.17969 8.37988 7.19336C8.25228 7.20703 8.14518 7.25488 8.05859 7.33691C7.97201 7.41439 7.92871 7.52376 7.92871 7.66504V12.4707C7.92871 12.612 7.97201 12.7259 8.05859 12.8125C8.14518 12.8945 8.25 12.9424 8.37305 12.9561C8.50065 12.9652 8.63053 12.931 8.7627 12.8535Z"})})},800771:(e,t,o)=>{o.r(t),o.d(t,{MwnFeatureModal:()=>z});var a=()=>o(730120),n=o(667294),i=()=>o(219727),r=()=>o(142735),s=()=>o(61951),l=()=>o(269299),d=()=>o(348141),c=()=>o(573357),m=()=>o(708518),u=()=>o(876822),p=()=>o(838266),f=()=>o(803728),g=()=>o(110372),y=()=>o(878797),h=(o(267602),o(241792),o(228244),()=>o(307312)),w=()=>o(146947),v=()=>o(714230),M=()=>o(202454),x=()=>o(788860),b=()=>o(128039),C=()=>o(521632),k=()=>o(779300),S=()=>o(745740),T=()=>o(729775),_=()=>o(603692),F=()=>o(255453),j=()=>o(536691),I=()=>o(616715),A=()=>o(821227),P=()=>o(807230),E=o(785893);const D=["cardToDrawer","cardToActive","activeToCard","activeToDrawer","drawerToActive","drawerToCard"];function B(){y().default.removeMessage("mwn_feature_modal"),u().default.state.inAppCalloutStore.updateCalloutStatus({calloutId:"mwn_feature_modal",visible:!1})}function R(e){const t=(0,i().O7)(),o=(0,r().VK)((()=>"dark"===t.ThemeStore.state.mode),[t]);return(0,E.jsx)("div",{style:{background:o?e.resolvedColor.backing:e.resolvedColor.main,width:24,height:24,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:12,boxShadow:o?`0 0 0 1px ${e.resolvedColor.sub}`:void 0},children:"active"===e.variant?(0,E.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 8 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,E.jsx)("path",{d:"M1 1L7 7",stroke:"white","stroke-linecap":"round"}),(0,E.jsx)("path",{d:"M7 1L1 7",stroke:"white","stroke-linecap":"round"})]}):(0,E.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 8 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,E.jsx)("path",{d:"M7 1L1 7",stroke:"white","stroke-linecap":"round"}),(0,E.jsx)("path",{d:"M1 4V7H4",stroke:"white","stroke-linecap":"round","stroke-linejoin":"round"}),(0,E.jsx)("path",{d:"M7 4V1H4",stroke:"white","stroke-linecap":"round","stroke-linejoin":"round"})]})})}function N(e){const{titleParts:t,imgSrc:o,resolvedColor:a}=e,n=[v().Z.images.mwn.light.mwnModalAutomation4Png,v().Z.images.mwn.dark.mwnModalAutomation4Png].includes(o);return(0,E.jsxs)("div",{style:{padding:"24px 0 0 24px",borderRadius:12,flexBasis:0,flexGrow:1,height:220,overflow:"hidden",background:a.backing,color:a.main,position:"relative"},children:[(0,E.jsxs)("div",{style:{paddingRight:24,display:"flex",alignItems:"flex-start",justifyContent:"space-between"},children:[(0,E.jsx)("div",{children:t.map((e=>(0,E.jsx)("div",{style:{marginTop:-4,fontSize:16,lineHeight:"125%",fontWeight:500},children:e},`internalContentTitlePart-${e}`)))}),n?(0,E.jsx)(C().Z,{style:{flexShrink:0,alignSelf:void 0,marginTop:-2},content:(0,E.jsx)(x()._H,{id:"mwnFeatureModal.betaBadgeLabel",defaultMessage:"Coming soon"})}):null]}),(0,E.jsx)("div",{style:{marginTop:24,borderRadius:"12px 0 0 0",overflow:"hidden",boxShadow:"0 8px 24px 0 rgba(0, 0, 0, 0.05), 0 0 0 1px rgba(0, 0, 0, 0.05)"},children:(0,E.jsx)("img",{src:o,style:{borderTopLeftRadius:12,width:313,height:156,userSelect:"none"},draggable:!1})})]})}function Q(e){const{ctaOnClick:t,ctaTitle:o,variant:a,clickType:n}=e;return(0,E.jsxs)(k().h,{onClick:()=>{["active"].includes(a)&&t(n)},styles:{borderRadius:6,height:32,background:"black",display:"inline-flex",justifyContent:"center",alignItems:"center",gap:6,padding:"6px 12px",marginTop:16,color:"white",cursor:"pointer",zIndex:1,position:"relative"},hoveredStyle:{background:"#181818"},children:[(0,E.jsx)("span",{style:{textAlign:"center",fontSize:14,fontWeight:590},children:o}),(0,E.jsx)(_().y,{iconGroup:M().g,variantName:"small"})]})}function L(e){const{titleParts:t,resolvedColor:o,variant:a,name:n,subtitleParts:s,images:l,subcontents:d,ctaOnClick:c,ctaTitle:m,ctaByline:u,shortTitle:p}=e,f=(0,i().O7)(),g=(0,r().VK)((()=>"dark"===f.ThemeStore.state.mode),[f])?v().Z.images.mwn.dark:v().Z.images.mwn.light;return(0,E.jsxs)("div",{style:{position:"relative",top:["active","activeToDrawer"].includes(a)?-32:0,color:o.main,maxWidth:"100%",height:1148},children:[(0,E.jsxs)(h().E.div,{style:{position:"absolute"},animate:{opacity:["card","drawerToCard","activeToCard"].includes(a)?1:0},children:[(0,E.jsx)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",width:216,minHeight:48,marginBottom:4},children:(0,E.jsx)(h().E.div,{style:{display:"flex",flexDirection:"column",position:"static",paddingRight:26},children:t.map((e=>(0,E.jsx)("div",{style:{color:o.main,fontSize:20,fontWeight:600,lineHeight:"120%"},children:e},`contentTitlePart-${n}-${e}`)))})}),(0,E.jsx)("div",{style:{width:"100%",opacity:1},children:(0,E.jsx)("div",{style:{paddingTop:20,opacity:1},children:(0,E.jsx)("img",{src:l.cardCover,style:{width:"100%",borderTopLeftRadius:8,borderTopRightRadius:8},draggable:!1})})})]}),(0,E.jsxs)(h().E.div,{style:{position:"absolute"},animate:{opacity:["active","cardToActive","drawerToActive"].includes(a)?1:0},children:[(0,E.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start",width:"100%"},children:(0,E.jsx)("div",{style:{color:o.main,fontSize:32,fontWeight:700,lineHeight:"120%"},children:["ko-KR","ja-JP","zh-CN","zh-TW","ko","ja"].includes(w().locale)?t.join(""):t.join(" ")})}),(0,E.jsx)("div",{style:{paddingTop:8,width:704},children:s.map((e=>(0,E.jsx)("div",{style:{color:o.main,fontSize:16,fontWeight:400,lineHeight:"128%"},children:e},`contentTitleActive-${n}-${e}`)))}),(0,E.jsx)(Q,{ctaOnClick:c,ctaTitle:m,clickType:"primary_cta",variant:a}),(0,E.jsxs)("div",{style:{width:"100%",height:770,opacity:1},children:[(0,E.jsx)("div",{style:{position:"relative",paddingTop:24,width:770,marginLeft:-33,top:["Forms","Automations"].includes(n)?-32:8,height:["Forms","Automations"].includes(n)?340:300,opacity:1},children:(0,E.jsx)("img",{src:l.hero,style:{width:770},draggable:!1})}),(0,E.jsxs)("div",{style:{display:"flex",flexDirection:"column",position:"relative",top:["active","cardToActive","drawerToActive"].includes(a)?["Forms","Automations"].includes(n)?-8:32:void 0,gap:32,width:704},children:[(0,E.jsxs)("div",{style:{display:"flex",gap:32},children:[(0,E.jsx)(N,{titleParts:d[0].titleParts,body:d[0].body,imgSrc:d[0].img,resolvedColor:o}),(0,E.jsx)(N,{titleParts:d[1].titleParts,body:d[1].body,imgSrc:d[1].img,resolvedColor:o})]}),(0,E.jsxs)("div",{style:{display:"flex",gap:32},children:[(0,E.jsx)(N,{titleParts:d[2].titleParts,body:d[2].body,imgSrc:d[2].img,resolvedColor:o}),(0,E.jsx)(N,{titleParts:d[3].titleParts,body:d[3].body,imgSrc:d[3].img,resolvedColor:o})]})]}),(0,E.jsxs)("div",{style:{height:140,marginTop:["Forms","Automations"].includes(n)?12:52,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,E.jsx)("div",{style:{color:o.main,fontSize:20,fontWeight:590,lineHeight:"125%"},children:u}),(0,E.jsxs)("div",{style:{position:"relative"},children:[(0,E.jsx)(Q,{ctaOnClick:c,ctaTitle:m,clickType:"secondary_cta",variant:a}),(0,E.jsx)("img",{src:g.handPng,style:{position:"absolute",left:"100%",top:"100%",width:83,height:83},draggable:!1})]})]})]})]}),(0,E.jsx)(h().E.div,{style:{position:"absolute"},animate:{opacity:["drawer","cardToDrawer","activeToDrawer"].includes(a)?1:0},variants:{activeToDrawer:{opacity:[0,0,1],transition:{times:[0,.7,1]}}},children:(0,E.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start",width:"100%"},children:(0,E.jsx)("div",{style:{color:o.main,fontSize:20,fontWeight:600,lineHeight:"120%",marginTop:-2},children:p})})})]})}function H(e){const{contentType:t,userCanCreateFormInPrivate:o,isDemo:a}=e,n=(0,x().YB)(),s=(0,i().O7)(),l=(0,r().VK)((()=>"dark"===s.ThemeStore.state.mode),[s])?v().Z.images.mwn.dark:v().Z.images.mwn.light,d=n.formatMessage({id:"mwnFeatureModal.forms.ctaTitle.creation",defaultMessage:"Create new form"}),c=n.formatMessage({id:"mwnFeatureModal.forms.ctaTitle.externalLink",defaultMessage:"Learn more"});switch(t){case"forms":return(0,E.jsx)(L,{titleParts:[n.formatMessage({id:"mwnFeatureModal.forms.sectionTitle.1",defaultMessage:"Forms, right inside"}),n.formatMessage({id:"mwnFeatureModal.forms.sectionTitle.2",defaultMessage:"Notion"})],name:"Forms",shortTitle:n.formatMessage({id:"mwnFeatureModal.forms.shortTitle",defaultMessage:"Forms"}),subtitleParts:[n.formatMessage({id:"mwnFeatureModal.forms.sectionSubtitle.1",defaultMessage:"Create and share unlimited forms for free."}),n.formatMessage({id:"mwnFeatureModal.forms.sectionSubtitle.2",defaultMessage:"Then, analyze results and take action all in one place."})],images:{cardCover:l.mwnModalFormsCardPng,hero:l.mwnModalForms0Png},subcontents:[{titleParts:[n.formatMessage({id:"mwnFeatureModal.forms.feedback.title",defaultMessage:"Send RSVPs, surveys, and more"})],body:n.formatMessage({id:"mwnFeatureModal.forms.feedback.body",defaultMessage:"Easily create beautiful forms that are meant to be shared with anyone."}),img:l.mwnModalForms3Png},{titleParts:[n.formatMessage({id:"mwnFeatureModal.forms.track.title",defaultMessage:"Share forms with anyone"})],body:n.formatMessage({id:"mwnFeatureModal.forms.connect.body",defaultMessage:"Use a form to quickly capture progress on habits and goals."}),img:l.mwnModalForms4Png},{titleParts:[n.formatMessage({id:"mwnFeatureModal.forms.capture.title",defaultMessage:"Organize and act on responses"})],body:n.formatMessage({id:"mwnFeatureModal.forms.capture.body",defaultMessage:"Everything you need in a forms tool. Plus the power of Notion to organize and track information in one place."}),img:l.mwnModalForms1Png},{titleParts:[n.formatMessage({id:"mwnFeatureModal.forms.kickoff.title",defaultMessage:"Kickstart your workflow"})],body:n.formatMessage({id:"mwnFeatureModal.forms.kickoff.body",defaultMessage:"Submit a form to automatically create a task, assign it out, and notify teammates of progress."}),img:l.mwnModalForms2Png}],ctaOnClick:e=>{o?((0,b().createFormInPrivate)({environment:s,navigateToFormBuilder:!0}),B(),a||g().lZ(s,{callout_key:"mwn_feature_modal",click_type:e,variant:"FormsInApp"})):(a||g().lZ(s,{callout_key:"mwn_feature_modal",click_type:e,variant:"FormsExternal"}),window.open("https://www.notion.so/help/guides/use-forms-to-collect-organize-and-act-on-responses-in-notion","_blank"))},ctaTitle:o?d:c,ctaByline:n.formatMessage({id:"mwnFeatureModal.forms.ctaByline",defaultMessage:"Ready to try it yourself?"}),...e});case"marketplace":return(0,E.jsx)(L,{titleParts:[n.formatMessage({id:"mwnFeatureModal.marketplace.sectionTitle.1",defaultMessage:"Introducing"}),n.formatMessage({id:"mwnFeatureModal.marketplace.sectionTitle.2",defaultMessage:"Marketplace"})],name:"Marketplace",shortTitle:n.formatMessage({id:"mwnFeatureModal.marketplace.shortTitle",defaultMessage:"Marketplace"}),subtitleParts:[n.formatMessage({id:"mwnFeatureModal.marketplace.sectionSubtitle.1",defaultMessage:"Find the perfect template, made by our community"}),n.formatMessage({id:"mwnFeatureModal.marketplace.sectionSubtitle.2",defaultMessage:"of experts, designers, and people like you."})],images:{cardCover:l.mwnModalMarketplaceCardPng,hero:l.mwnModalMarketplace0Png},subcontents:[{titleParts:[n.formatMessage({id:"mwnFeatureModal.marketplace.workflow.title",defaultMessage:"Find exactly what you’re looking for"})],body:n.formatMessage({id:"mwnFeatureModal.marketplace.workflow.body",defaultMessage:"With expert templates updated with the latest Notion features like forms, charts, and automations."}),img:l.mwnModalMarketplace1Png},{titleParts:[n.formatMessage({id:"mwnFeatureModal.marketplace.community.title",defaultMessage:"Rated and reviewed by Notion users"})],body:n.formatMessage({id:"mwnFeatureModal.marketplace.community.body",defaultMessage:"Find over 30,000 templates right in your sidebar."}),img:l.mwnModalMarketplace2Png},{titleParts:[n.formatMessage({id:"mwnFeatureModal.marketplace.trusted.title",defaultMessage:"Trusted payments and fair refunds"})],body:n.formatMessage({id:"mwnFeatureModal.marketplace.trusted.body",defaultMessage:"Explore native Notion payments, refunds, analytics, user reviews, and more."}),img:l.mwnModalMarketplace3Png},{titleParts:[n.formatMessage({id:"mwnFeatureModal.marketplace.publish.title",defaultMessage:"Publish your first template today!"})],body:n.formatMessage({id:"mwnFeatureModal.marketplace.connect.body",defaultMessage:"It's now easier than ever – whether you're a Notion expert of a person who has built a really great set-up"}),img:l.mwnModalMarketplace4Png}],ctaOnClick:e=>{(0,A().C)({environment:s}),B(),a||g().lZ(s,{callout_key:"mwn_feature_modal",click_type:e,variant:"MarketplaceInApp"})},ctaTitle:n.formatMessage({id:"mwnFeatureModal.marketplace.ctaTitle",defaultMessage:"Go to Marketplace"}),ctaByline:n.formatMessage({id:"mwnFeatureModal.marketplace.ctaByline",defaultMessage:"Explore 30,000+ templates"}),...e});case"layouts":return(0,E.jsx)(L,{titleParts:[n.formatMessage({id:"mwnFeatureModal.layouts.sectionTitle.1",defaultMessage:"Layouts that fit"}),n.formatMessage({id:"mwnFeatureModal.layouts.sectionTitle.2",defaultMessage:"how you work"})],name:"Layouts",shortTitle:n.formatMessage({id:"mwnFeatureModal.layouts.shortTitle",defaultMessage:"Layouts"}),subtitleParts:[n.formatMessage({id:"mwnFeatureModal.layouts.sectionSubtitle.1",defaultMessage:"Create a unique design for your tasks, goals, documents,"}),n.formatMessage({id:"mwnFeatureModal.layouts.sectionSubtitle.2",defaultMessage:"and anything else you keep in Notion."})],images:{cardCover:l.mwnModalLayoutsCardPng,hero:l.mwnModalLayouts0Png},subcontents:[{titleParts:[n.formatMessage({id:"mwnFeatureModal.layouts.track.title",defaultMessage:"Pin what’s most important"})],body:n.formatMessage({id:"mwnFeatureModal.layouts.track.body",defaultMessage:"Pin your most important information, hide what you don't need to see."}),img:l.mwnModalLayouts1Png},{titleParts:[n.formatMessage({id:"mwnFeatureModal.layouts.beautiful.title",defaultMessage:"Make your pages beautiful"})],body:n.formatMessage({id:"mwnFeatureModal.layouts.beautiful.body",defaultMessage:"Create a unique layout that's designed to fit how you and your team work."}),img:l.mwnModalLayouts2Png},{titleParts:[n.formatMessage({id:"mwnFeatureModal.layouts.structure.title",defaultMessage:"Keep every detail organized"})],body:n.formatMessage({id:"mwnFeatureModal.layouts.structure.body",defaultMessage:"Layouts are easy to create – no complicated code or interfaces."}),img:l.mwnModalLayouts3Png},{titleParts:[n.formatMessage({id:"mwnFeatureModal.layouts.adapt.title",defaultMessage:"Adapt layouts on any database page"})],body:n.formatMessage({id:"mwnFeatureModal.layouts.adapt.body",defaultMessage:"Make your pages beautiful. Highlight artwork, files, people, and progress."}),img:l.mwnModalLayouts4Png}],ctaOnClick:e=>{a||g().lZ(s,{callout_key:"mwn_feature_modal",click_type:e,variant:"LayoutsExternal"}),window.open("https://www.notion.so/help/guides/build-the-perfect-workflow-with-customizable-layouts","_blank")},ctaTitle:n.formatMessage({id:"mwnFeatureModal.layouts.ctaTitle",defaultMessage:"Learn more"}),ctaByline:n.formatMessage({id:"mwnFeatureModal.layouts.ctaByline",defaultMessage:"See how it works"}),...e});case"automations":return(0,E.jsx)(L,{titleParts:[n.formatMessage({id:"mwnFeatureModal.automations.sectionTitle.1",defaultMessage:"Automations got"}),n.formatMessage({id:"mwnFeatureModal.automations.sectionTitle.2",defaultMessage:"an upgrade"})],name:"Automations",shortTitle:n.formatMessage({id:"mwnFeatureModal.automations.shortTitle",defaultMessage:"Automations"}),subtitleParts:[n.formatMessage({id:"mwnFeatureModal.automations.sectionSubtitle.1",defaultMessage:"Send Gmail notifications, take complex actions with formulas,"}),n.formatMessage({id:"mwnFeatureModal.automations.sectionSubtitle.2",defaultMessage:"and trigger actions in other tools (coming soon)."})],images:{cardCover:l.mwnModalAutomationCardPng,hero:l.mwnModalAutomation0Png},subcontents:[{titleParts:[n.formatMessage({id:"mwnFeatureModal.automations.process.title",defaultMessage:"Less manual work"})],body:n.formatMessage({id:"mwnFeatureModal.automations.process.body",defaultMessage:"Let automations handle status updates, task assignments, and complex calculations."}),img:l.mwnModalAutomation1Png},{titleParts:[n.formatMessage({id:"mwnFeatureModal.automations.workflow.title",defaultMessage:"Automatic email notifications"})],body:n.formatMessage({id:"mwnFeatureModal.automations.workflow.body",defaultMessage:"Meet your teams where they are with automated Gmail notifications"}),img:l.mwnModalAutomation2Png},{titleParts:[n.formatMessage({id:"mwnFeatureModal.automations.customize.title",defaultMessage:"Customize actions with formulas"})],body:n.formatMessage({id:"mwnFeatureModal.automations.customize.body",defaultMessage:"Your workflows are unique – use formulas for more granular actions that can scale with your processes."}),img:l.mwnModalAutomation3Png},{titleParts:[n.formatMessage({id:"mwnFeatureModal.automations.connect.title",defaultMessage:"Actions in more tools"})],body:n.formatMessage({id:"mwnFeatureModal.automations.connect.body",defaultMessage:"Trigger custom web requests to take action in low-code/no-code platforms. (Coming soon)"}),img:l.mwnModalAutomation4Png}],ctaOnClick:e=>{a||g().lZ(s,{callout_key:"mwn_feature_modal",click_type:e,variant:"AutomationsExternal"}),window.open("https://www.notion.so/help/guides/Create-streamlined-project-management-workflow-using-database-automations","_blank")},ctaTitle:n.formatMessage({id:"mwnFeatureModal.automations.ctaTitle",defaultMessage:"Learn more"}),ctaByline:n.formatMessage({id:"mwnFeatureModal.automations.ctaByline",defaultMessage:"See how it works"}),...e})}}function V(e){const{contentType:t,colorTheme:o,defaultAnimatedStyle:a,defaultDrawerStyle:s,onClick:l,variant:d,onClose:c,drawerIndex:m,contentAnimationEndCallback:u,userCanCreateFormInPrivate:p,isDemo:f}=e,g=(0,i().O7)(),y=(0,r().VK)((()=>"dark"===g.ThemeStore.state.mode),[g]),[w,v]=(0,n.useState)(!0);(0,n.useEffect)((()=>{"active"!==d&&v(!0)}),[d]);const M=(0,n.useRef)(null),[x,b]=(0,n.useState)(0),{left:C,top:k,width:T,height:_}=a,F={yellow:{main:y?"#F4B542":"#BA7127",backing:y?"#5E4A2D":"#FAEBD1",sub:y?"#443729":"#FDF5E8"},red:{main:y?"#F47B71":"#C6462D",backing:y?"#633933":"#F8DBD6",sub:y?"#4B2F2A":"#FAEAE8"},blue:{main:y?"#599EFF":"#1773DE",backing:y?"#2F425E":"#D9E5F8",sub:y?"#283241":"#EBF1FB"},gray:{main:y?"#C4C4C4":"#545351",backing:y?"#4B4B4B":"#EAEAE9",sub:y?"#363636":"#F7F7F5"}}[o];(0,n.useEffect)((()=>{M.current&&"active"!==d&&M.current.scrollTo(0,0)}),[d]);const I=1+.2*m,A=.5/I,P=(.5+.1*m)/I,B=["active","cardToActive","drawerToActive"].includes(d)?32:["drawer","cardToDrawer","activeToDrawer"].includes(d)?20:24,N="active"===d?770:"drawer"===d||"cardToDrawer"===d||"activeToDrawer"===d?246:T,Q={card:{maxHeight:"none",left:C,top:k,width:T,height:_,transform:"translateY(0) scale(1)",transition:{duration:.7,ease:[.25,1,.5,1]}},activeToCard:{maxHeight:"none",left:C,top:k,width:T,height:_,transform:"translateY(0) scale(1)",transition:{duration:.7,ease:[.25,1,.5,1]},cursor:"pointer"},cardHovered:{maxHeight:"none",left:C,top:k,width:T,height:_,transform:"translateY(0) scale(1.03)"},drawerToActive:{maxHeight:"none",left:[s.left,32],top:[s.top,32],width:[246,770],height:[120,560],transform:"translateY(0) scale(1)",transition:{duration:.7,ease:[.25,1,.5,1]},cursor:"default"},active:{maxHeight:"none",left:32,top:32,width:770,height:560,transform:"translateY(0) scale(1)",transition:{duration:.7,ease:[.25,1,.5,1]}},cardToActive:{maxHeight:"none",left:32,top:32,width:770,height:560,transform:"translateY(0) scale(1)",transition:{duration:.7,ease:[.25,1,.5,1]},cursor:"default"},activeToDrawer:{maxHeight:[560,560,120,120,120],left:[32,32,s.left,s.left,s.left],top:[32,-200,s.top+66,s.top+66,s.top-8],opacity:[1,0,0,1,1],width:[770,770,246,246,246],height:[496,496,120,120,120],transition:{duration:.7,times:[0,.5,.51,.52,1],ease:["circIn","linear","linear",[.25,1,.5,1]]}},cardToDrawer:{maxHeight:[240,240,120,120,120],left:[C,C,s.left,s.left,s.left],top:[k,k,s.top+66,s.top+66,s.top],width:[T,T,246,246,246],height:[_,_,120,120,120],opacity:[1,0,0,1,1],transition:{duration:I,times:[0,A,P,P+.01,1],ease:["circIn","linear","linear",[.25,1,.5,1]]}},drawerToCard:{maxHeight:[120,120,120,240,240],left:[s.left,s.left,s.left,C,C],top:[s.top,s.top+66,s.top+66,k,k],width:[246,194,194,T,T],height:[120,120,120,_,_],opacity:[1,1,0,0,1],transition:{duration:.7,times:[0,.3,.301,.6,1],ease:"linear"}},drawer:{left:s.left,top:s.top,width:246,height:120,opacity:1,cursor:"pointer"},drawerHovered:{left:s.left,top:s.top-8,width:246,height:125,maxHeight:125}};return(0,E.jsxs)(h().E.div,{ref:M,initial:!1,style:{boxSizing:"border-box",border:`1px solid ${F.sub}`,background:F.sub,color:F.main,display:"flex",position:"fixed",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",borderRadius:12,overflowY:"active"===d?"scroll":"hidden",overflowX:"hidden",zIndex:["active","cardToActive","drawerToActive"].includes(d)?2:0,transform:"translateY(0) scale(1)",maxHeight:"none",cursor:"active"!==d?"pointer":"auto"},onClick:()=>{"active"!==d&&l()},animate:d,variants:Q,whileHover:`${d}Hovered`,onScroll:()=>{M.current&&b(M.current.scrollTop)},onAnimationComplete:e=>{"string"==typeof e&&(["drawerToCard","activeToCard"].includes(e)?u(t,"card"):["activeToDrawer","cardToDrawer"].includes(e)?u(t,"drawer"):["cardToActive","drawerToActive"].includes(e)&&u(t,"active"))},children:[(0,E.jsx)(h().E.div,{variants:{activeHovered:{opacity:1},card:{opacity:0},cardHovered:{opacity:1},drawer:{opacity:0},drawerHovered:{opacity:1},cardToDrawer:{opacity:0},cardToActive:{opacity:0},activeToCard:{opacity:0},activeToDrawer:{opacity:0},drawerToActive:{opacity:0},drawerToCard:{opacity:0}},style:{position:["active","activeToDrawer"].includes(d)?"sticky":"absolute",top:12,left:["active","cardToActive","drawerToActive","activeToDrawer"].includes(d)?726:N-B-20,zIndex:1},transition:{duration:.2},children:(0,E.jsx)(S().Z,{style:{padding:4,borderRadius:"50%",transition:"all .2s",cursor:"pointer"},hoveredStyle:D.includes(d)?{}:{transform:"scale(1.1)",background:"none"},disabled:"active"!==d,onClick:()=>{M.current&&M.current.scrollTo(0,0),c()},children:(0,E.jsx)(R,{resolvedColor:F,variant:d})})}),"active"===d&&0===x?(0,E.jsx)(h().E.div,{style:{width:24,minHeight:24,borderRadius:4,position:"absolute",top:518,left:N/2-12,zIndex:1,display:"flex",alignItems:"center",justifyContent:"center",opacity:w?0:.7,transform:"translate(0px, 0px)",cursor:"pointer"},onClick:()=>{M.current&&M.current.scrollTo({top:460,behavior:"smooth"})},animate:w?"entry":"infinite",onAnimationComplete:()=>{w&&v(!1)},variants:{entry:{transform:["translate(0px, 64px)","translate(0px, 0px)"],opacity:.7,transition:{duration:.8,ease:"easeInOut"}},infinite:{transform:["translate(0px, 0px)","translate(0px, 10px)","translate(0px, 0px)"],opacity:.7,transition:{duration:1.2,repeat:1/0,ease:"easeInOut"}}},children:(0,j().A)({color:F.main,width:24,height:24})}):null,(0,E.jsx)(h().E.div,{style:{width:"100%"},animate:{paddingTop:B,paddingLeft:B,paddingRight:B},children:(0,E.jsx)(H,{contentType:t,variant:d,resolvedColor:F,userCanCreateFormInPrivate:p,isDemo:f})})]})}function Z(e){const{onClose:t,isDemo:o}=e,a=(0,x().YB)(),s=(0,i().O7)(),l=(0,r().VK)((()=>"dark"===s.ThemeStore.state.mode),[s]),[d,c]=(0,n.useState)("null"),[p,f]=(0,n.useState)({forms:0,marketplace:0,layouts:0,automations:0}),[y,v]=(0,n.useState)(!1),[M,b]=(0,n.useState)({forms:{top:120,left:-120},marketplace:{top:-100,left:120},layouts:{top:-100,left:-180},automations:{top:120,left:180}}),[C,S]=(0,n.useState)({forms:"card",marketplace:"card",layouts:"card",automations:"card"}),_=(0,n.useCallback)((e=>{const t=["forms","marketplace","layouts","automations"],o={...M},a={...p};if("null"===d){let n=0;for(const i of t)i!==e&&(o[i]={top:624,left:0===n?32:261*n+32},a[i]=n,n+=1);S({forms:"cardToDrawer",marketplace:"cardToDrawer",layouts:"cardToDrawer",automations:"cardToDrawer",[e]:"cardToActive"})}else o[d]={...M[e]},a[d]=p[e],S({...C,[d]:"activeToDrawer",[e]:"drawerToActive"});c(e),b(o),f(a)}),[d,M,C,p]),j=(0,n.useCallback)((()=>{c("null"),S({forms:"drawerToCard",marketplace:"drawerToCard",layouts:"drawerToCard",automations:"drawerToCard",[d]:"activeToCard"})}),[d]),A=!Object.values(C).some((e=>D.includes(e))),B=(0,n.useCallback)(((e,t)=>{S({...C,[e]:t})}),[C]),R=(0,r().VK)((()=>{const{currentSpaceStore:e,currentSpaceViewStore:t}=u().default.state;return(0,P().ww)(s)?!!(e&&e.canEdit()&&t):((0,P().eD)(s),!1)}),[s]);return(0,E.jsxs)(h().E.div,{animate:{opacity:1},style:{isolation:"auto",opacity:0},transition:{duration:.5,delay:.25},children:[(0,E.jsx)("div",{style:{width:24+("null"!==d?834:680),height:24+("null"!==d?684:676),background:"transparent",position:"fixed",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:(0,E.jsxs)(h().E.div,{animate:{width:"null"!==d?834:680,height:"null"!==d?684:676},className:"notion-subpixel-antialiasing-off",transition:{ease:[.25,1,.5,1],duration:.5},style:{borderRadius:24,position:"fixed",left:"50%",top:"50%",transform:"translate(-50%, -50%)",color:"black",background:l?"rgba(37, 37, 37, 1)":"white",padding:32,overflow:"hidden",width:680,height:676},children:[(0,E.jsx)(h().E.div,{animate:{opacity:1},style:{opacity:0},transition:{duration:.5,delay:.5},children:(0,E.jsx)("div",{style:{opacity:"null"===d?1:0,fontSize:26,fontWeight:700,lineHeight:"100%",paddingLeft:6,color:l?"rgba(225, 225, 225, 1)":"#1D1B16"},children:a.formatMessage({id:"mwnFeatureModal.mainTitle",defaultMessage:"What’s new in Notion"})})}),(0,E.jsx)(h().E.div,{animate:{opacity:1},style:{opacity:0},transition:{duration:.85,delay:.65},children:(0,E.jsx)(V,{contentType:"forms",colorTheme:"yellow",defaultAnimatedStyle:{width:280,height:240,left:32,top:88},onClick:()=>{A&&(o||("drawer"===C.forms?g().i6(s,{interaction_type:"drawerClick",callout_key:"mwn_feature_modal",current_active:d,content_type:"forms"}):"card"===C.forms&&g().i6(s,{interaction_type:"cardClick",callout_key:"mwn_feature_modal",content_type:"forms"})),_("forms"))},onClose:()=>{o||g().i6(s,{interaction_type:"cardClose",callout_key:"mwn_feature_modal",content_type:"forms"}),j()},variant:C.forms,defaultDrawerStyle:M.forms,drawerIndex:p.forms,contentAnimationEndCallback:B,userCanCreateFormInPrivate:R,isDemo:o})}),(0,E.jsx)(h().E.div,{animate:{opacity:1},style:{opacity:0},transition:{duration:.85,delay:.65},children:(0,E.jsx)(V,{contentType:"marketplace",colorTheme:"red",defaultAnimatedStyle:{width:320,height:240,left:328,top:88},onClick:()=>{A&&(o||("drawer"===C.marketplace?g().i6(s,{interaction_type:"drawerClick",callout_key:"mwn_feature_modal",current_active:d,content_type:"marketplace"}):"card"===C.marketplace&&g().i6(s,{interaction_type:"cardClick",callout_key:"mwn_feature_modal",content_type:"marketplace"})),_("marketplace"))},onClose:()=>{o||g().i6(s,{interaction_type:"cardClose",callout_key:"mwn_feature_modal",content_type:"marketplace"}),j()},variant:C.marketplace,defaultDrawerStyle:M.marketplace,drawerIndex:p.marketplace,contentAnimationEndCallback:B,isDemo:o})}),(0,E.jsx)(h().E.div,{animate:{opacity:1},style:{opacity:0},transition:{duration:.85,delay:.75},children:(0,E.jsx)(V,{contentType:"layouts",colorTheme:"blue",defaultAnimatedStyle:{width:320,height:240,left:32,top:344},onClick:()=>{A&&(o||("drawer"===C.layouts?g().i6(s,{interaction_type:"drawerClick",callout_key:"mwn_feature_modal",current_active:d,content_type:"layouts"}):"card"===C.layouts&&g().i6(s,{interaction_type:"cardClick",callout_key:"mwn_feature_modal",content_type:"layouts"})),_("layouts"))},onClose:()=>{o||g().i6(s,{interaction_type:"cardClose",callout_key:"mwn_feature_modal",content_type:"layouts"}),j()},variant:C.layouts,defaultDrawerStyle:M.layouts,drawerIndex:p.layouts,contentAnimationEndCallback:B,isDemo:o})}),(0,E.jsx)(h().E.div,{animate:{opacity:1},style:{opacity:0},transition:{duration:.85,delay:.75},children:(0,E.jsx)(V,{contentType:"automations",colorTheme:"gray",defaultAnimatedStyle:{width:280,height:240,left:368,top:344},onClick:()=>{A&&(o||("drawer"===C.automations?g().i6(s,{interaction_type:"drawerClick",callout_key:"mwn_feature_modal",current_active:d,content_type:"automations"}):"card"===C.automations&&g().i6(s,{interaction_type:"cardClick",callout_key:"mwn_feature_modal",content_type:"automations"})),_("automations"))},onClose:()=>{o||g().i6(s,{interaction_type:"cardClose",callout_key:"mwn_feature_modal",content_type:"automations"}),j()},variant:C.automations,defaultDrawerStyle:M.automations,drawerIndex:p.automations,contentAnimationEndCallback:B,isDemo:o})}),(0,E.jsx)(h().E.div,{animate:{opacity:1},style:{opacity:0},transition:{duration:.5,delay:1},children:(0,E.jsxs)(h().E.div,{style:{display:"flex",justifyContent:"space-between",alignItems:"center",position:"absolute",bottom:0,left:0,right:0,padding:32,color:"#787774"},animate:{transform:"null"!==d?"translateY(100%)":void 0,opacity:"null"!==d?0:1},children:[(0,E.jsxs)(T().Z,{onClick:()=>{o||g().lZ(s,{callout_key:"mwn_feature_modal",click_type:"learn_more"}),v(!0)},external:!0,style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"4px 8px",marginLeft:-10,borderRadius:6,fontSize:14,fontWeight:400,height:32,gap:4},hoveredStyle:{background:l?"#404040":"rgba(55, 53, 47, 0.06)"},children:[(0,I().p)({width:20,height:20}),(0,E.jsx)("div",{style:{height:20,lineHeight:"20px"},children:a.formatMessage({id:"mwnFeatureModal.externalLink",defaultMessage:"Watch the recap"})})]}),(0,E.jsx)(k().h,{onClick:t,styles:{borderRadius:6,height:32,padding:"0 12px"},children:a.formatMessage({id:"mwnFeatureModal.mainCta",defaultMessage:"Got it"})})]})})]})}),(0,E.jsx)(m().Z,{open:y,onDismiss:()=>v(!1),style:{padding:96},backgroundStyle:{width:"100vw",height:"100vh",minWidth:680,display:"flex",justifyContent:"center",alignItems:"center"},innerStyle:{width:"100%",minWidth:680,maxWidth:1280},render:()=>(0,E.jsx)("div",{style:{position:"relative",width:"100%",height:0,paddingBottom:"56.25%"},children:(0,E.jsx)(F().Z,{style:{width:"100%",height:"100%",position:"absolute"},src:"https://player.vimeo.com/video/1021922915?h=40078925fe",defaultTextTrack:F().W[w().locale]||"en",options:{muted:!0,autoplay:!0,loop:!0}})})})]})}function z(){const e="mwn_feature_modal",t=(0,i().O7)(),o=(0,r().VK)((()=>u().default.state.currentUserSettingsStore),[]),h=(0,r().VK)((()=>!p().default.state.open&&!t.device.isMobile),[t]),w=(0,r().VK)((()=>h&&y().default.isVisible(e)),[e,h]);(0,s().Z)((()=>{g().gF(t,{callout_key:e})}),w);const v=(0,n.useCallback)((()=>{g().bl(t,{callout_key:e,dismiss_type:"modal_dismiss_clicked"}),f().Gi(t,e),o&&l().createAndCommit({environment:t,userAction:"mwnFeatureModal.dismissModal",canUndo:!0,perform:e=>{d().d2({userSettingsStore:o,transaction:e,data:{mwn_feature_modal_dismissed_at_millis:a().ou.now().toMillis()}})}})}),[t,e,o]);return w?(0,E.jsx)(m().Z,{open:!0,preventHideChildrenWhileOpening:!0,onDismiss:v,render:()=>(0,E.jsx)(c().Z,{capture:!0,allowEsc:!0,render:()=>(0,E.jsx)(Z,{onClose:v,isDemo:!1})})}):null}},821227:(e,t,o)=>{o.d(t,{C:()=>i});var a=()=>o(836273),n=()=>o(497065);function i(e){const{environment:t}=e;n().c4({environment:t,url:a()._j.marketplace,redirect:!1})}},808282:(e,t,o)=>{o.d(t,{Z:()=>n});class a extends(()=>o(263184))().default{getInitialState(){return{openTooltip:void 0}}}const n=new a},202454:(e,t,o)=>{o.d(t,{g:()=>a});const a=(0,o(827282).CZ)("arrowRight",{default:{loader:()=>o.e(13116).then(o.bind(o,13116))},small:{loader:()=>o.e(51558).then(o.bind(o,51558))},mini:{loader:()=>o.e(96364).then(o.bind(o,596364))},large:{loader:()=>o.e(74033).then(o.bind(o,474033))}})}}]);