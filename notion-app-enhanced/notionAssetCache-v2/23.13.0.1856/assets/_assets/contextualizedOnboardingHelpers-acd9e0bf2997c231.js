"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[95366],{829119:(e,n,o)=>{o.r(n),o.d(n,{getContextualizedOnboardingAnalyticsData:()=>c,getSpaceIntentOverride:()=>f,getStageName:()=>s,getStages:()=>d,isEducationFlowState:()=>u,isPublicAccessPageRedirect:()=>v,shouldRedirectToJoinSpace:()=>p});o(821057);var t=()=>o(9835),i=()=>o(345918),r=()=>o(876822),a=()=>o(723721),l=()=>o(834372);function s(e){const{flowName:n,stageIndex:o,environment:t}=e;return d({flowName:n,environment:t})[o]}function d(e){let{flowName:n,environment:o}=e;const t=o.device.isMobile,i=l().onboardingFlowNameToFlowConfig[n];if(t){if(!i.isEnabledForMobile)throw new Error(`Mobile flow is not enabled for flow name: ${n}`);return i.getMobileStages(o)}if(!i.isEnabledForDesktop)throw new Error(`Desktop flow is not enabled for flow name: ${n}`);return i.getDesktopStages()}function u(e){var n,o;return"education_flow"===e.flowName&&void 0!==(null===(n=e.planTypeAndSurveyInfo)||void 0===n||null===(n=n.surveyResponses)||void 0===n?void 0:n.educationRole)&&void 0!==(null===(o=e.planTypeAndSurveyInfo)||void 0===o||null===(o=o.surveyResponses)||void 0===o?void 0:o.educationLevel)}function c(e){var n,o,t,l,d,u,c;let{onboardingState:p,spaceJoinOrCreate:v,environment:f}=e;const{currentSpaceStore:_}=r().default.state,g=(0,i().kO)(),m=(null===(n=p.planTypeAndSurveyInfo)||void 0===n||null===(n=n.surveyResponses)||void 0===n?void 0:n.userPersona)??g.function,y=(null===(o=p.planTypeAndSurveyInfo)||void 0===o||null===(o=o.surveyResponses)||void 0===o?void 0:o.userRole)??g.role,w=(null===(t=p.planTypeAndSurveyInfo)||void 0===t||null===(t=t.surveyResponses)||void 0===t?void 0:t.companySize)??g.companySize,S=(null===(l=p.planTypeAndSurveyInfo)||void 0===l?void 0:l.planType)??g.intent,b=(null===(d=p.planTypeAndSurveyInfo)||void 0===d||null===(d=d.surveyResponses)||void 0===d?void 0:d.useCases)??g.useCases,I=(null===(u=p.planTypeAndSurveyInfo)||void 0===u||null===(u=u.surveyResponses)||void 0===u?void 0:u.categories)??g.categories,T=(null===(c=p.planTypeAndSurveyInfo)||void 0===c?void 0:c.collaborativeIntent)??g.collaborativeIntent;return{flow_name:p.flowName,flow_id:p.flowId,stage:s({flowName:p.flowName,stageIndex:p.currentStageIndex,environment:f}),initial_workspace_type:v,is_new_onboarding:!!p.isFirstTimeOnboarding,is_create_or_join:!0,stage_number:p.currentStageIndex,num_of_joinable_spaces:p.joinableSpaces.length,historical_stages:p.historicalStages,selectedPresets:void 0,user_persona:m,user_team_role:y,user_use_cases:b,user_categories:I,user_company_size:w,plan_selection:S,collaborative_intent:T,plan_type:null==_?void 0:_.getPlanType(),stage_duration_in_ms:void 0,onboarding_templates:void 0,trial_id:(0,a().kx)(),performance_marketing_term:p.performanceMarketingTerm,is_invalid_redirect:p.isInvalidRedirect,is_dark_mode:"dark"===f.ThemeStore.state.mode,selected_workflow_templates:p.selectedWorkflowTemplateIds}}function p(e){return"guest_redirect"===e.type||"redirect_page"===e.type||"redirect_space"===e.type}function v(e){return"public_access_page_redirect"===e.type}function f(e){if("form_response_onboarding"===e.flowName)return"string"==typeof(n=e.formSpaceIntent)&&t().lx.includes(n)?e.formSpaceIntent:"personal";var n}}}]);