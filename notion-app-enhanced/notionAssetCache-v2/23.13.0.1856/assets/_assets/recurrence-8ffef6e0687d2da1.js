"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[90653],{857205:(e,t,n)=>{n.r(t),n.d(t,{addRecurrence:()=>v,createRecurrenceInner:()=>b,deleteRecurrence:()=>h});var r=()=>n(157955),o=()=>n(956057),i=()=>n(494616),a=()=>n(922713),l=()=>n(752778),c=()=>n(696459),s=()=>n(421654),u=()=>n(636340),d=()=>n(269299),p=()=>n(594546),y=()=>n(487270),m=()=>n(876822),f=()=>n(826955),g=()=>n(49396);function v(e){let{environment:t,blockStore:n,recurrence:o}=e;const c=n.getAutomationId(),s=(0,r().convertFromUnpersistedRecurrenceConfig)(o);c?function(e,t,n,r){const o=n.getParentStore();if(!o||o.table!==l().vF)return;const c=n.getSpaceId(),s={table:i().cv,id:t,spaceId:c},p=f().Mz.createChildStore(n,s),m=p.getTrigger();if(!m)return;const g=p.getActionStores()[0];d().createAndCommit({environment:e,userAction:"recurrenceActions.updateRecurrence",canUndo:!0,perform:t=>{const i=x({automationId:p.id,spaceId:c,collectionPointer:o.getSpaceShardedPointer(),templatePageId:n.id});let l;g?(l=g.id,u().sW({store:g,data:i,transaction:t})):(l=(0,y().TS)({environment:e,table:a().Xj,spaceId:c}),u().ae({environment:e,table:a().Xj,inMemoryRecordCache:p.inMemoryRecordCache,transaction:t,value:{id:l,...i}})),u().sW({store:p,data:{alive:!0,status:"active",trigger:{id:m.id,type:"recurrence",recurrence:r},action_ids:[l]},transaction:t})}}),_(e,{type:"updated",frequency:r.frequency})}(t,c,n,s):function(e,t,n){d().createAndCommit({environment:e,userAction:"recurrenceActions.createRecurrence",canUndo:!0,perform:r=>{b(r,e,t,n)}})}(t,n,s)}function h(e){let{environment:t,blockStore:n}=e;const r=n.getAutomationStore();(0,c().$K)(r)&&(d().createAndCommit({environment:t,userAction:"recurrenceActions.deleteRecurrence",canUndo:!0,perform:e=>{g().disableAutomation({automationStore:r,environment:t,transaction:e}),g().deleteAutomation({automationStore:r,environment:t,transaction:e}),s().FH({stores:[n],update:{automation_id:void 0},transaction:e})}}),_(t,{type:"deleted"}))}function b(e,t,n,r){const{currentUserRootStore:c}=m().default.state;if(!c)return;const d=n.getParentStore();if(!d||d.table!==l().vF)return;if(!d.getParentBlockStore())return;const p=n.getSpaceId(),f=(0,y().TS)({environment:t,table:a().Xj,spaceId:p}),g=u().ae({environment:t,table:i().cv,inMemoryRecordCache:n.inMemoryRecordCache,value:{parent_id:n.id,parent_table:n.table,alive:!0,space_id:p,status:"active",trigger:{id:o().Il(),type:"recurrence",recurrence:r},action_ids:[f]},transaction:e}).pointer.id;s().FH({stores:[n],update:{automation_id:g},transaction:e}),u().ae({environment:t,table:a().Xj,inMemoryRecordCache:n.inMemoryRecordCache,transaction:e,value:{id:f,...x({automationId:g,spaceId:p,collectionPointer:d.getSpaceShardedPointer(),templatePageId:n.id})}}),_(t,{type:"created",frequency:r.frequency})}function x(e){const{automationId:t,spaceId:n,collectionPointer:r,templatePageId:o}=e;return{parent_id:t,parent_table:i().cv,type:"create_page",alive:!0,space_id:n,config:{collection:r,template_page_id:o}}}function _(e,t){p().K4(e,"recurrence_saved",t)}},788171:(e,t,n)=>{n.r(t),n.d(t,{RecurrenceConfigMenu:()=>Y});n(241792);var r=n(667294),o=()=>n(219727),i=()=>n(846550),a=()=>n(157955),l=()=>n(788860),c=()=>n(513670),s=()=>n(696459),u=()=>n(827973),d=()=>n(448419),p=()=>n(94967),y=()=>n(255577),m=()=>n(388284),f=()=>n(352230),g=()=>n(166312),v=()=>n(730120),h=()=>n(431652),b=()=>n(291198),x=()=>n(92175),_=()=>n(67961),k=()=>n(615634),S=()=>n(312117),I=()=>n(654133),C=()=>n(998901),j=n(785893);function M(e){const t=(0,o().O7)(),{device:n}=t,a=(0,l().YB)(),[c,s]=(0,r.useState)(e.value),[u,d]=(0,r.useState)(void 0),p=t=>{const n=(0,S().TD)(t,a),r=v().ou.fromFormat(n??"","T");return r.isValid?(d(void 0),e.onUpdate({hour:r.hour,minute:r.minute})):(d("invalid"),e.onError&&e.onError()),r},y=e=>{const t=e.target.value;s(t),p(t)},m=()=>{const e=p(c);e.isValid&&s(e.toLocaleString(v().ou.TIME_SIMPLE))},f=(0,i().yK)((e=>({input:{textAlign:"right"},error:{boxShadow:e.outlineRedInputBoxShadow}})),[]);return(0,j.jsx)(I().Z,{renderTooltip:()=>function(e){if("invalid"===e)return(0,j.jsx)(l()._H,{defaultMessage:"Invalid time",id:"timeInput.invalid"})}(u),forceVisibleState:void 0!==u,placement:C().Placement.Bottom,render:()=>(0,j.jsx)(b().Z,{type:"text",onChange:y,onSubmit:m,onBlur:m,value:c,size:1,style:{...e.style,...u?f.error:{},fontSize:n.isMobile?16:14},inputStyle:f.input})})}n(267602),n(653476);var R=()=>n(567149),w=()=>n(646574),P=()=>n(154186);function T(e){const{weekdays:t,onChange:n}=e,r=e.minimumSelection??0,o=(0,l().YB)(),a=(0,i().yK)((e=>({wrapper:{display:"flex",alignItems:"center",justifyContent:"space-between",textAlign:"center"},selectedDay:{...F,background:e.blueButtonBackground,color:e.regularInvertedTextColor},unselectedDay:{...F,background:e.accentColors.gray[75],color:e.mediumTextColor},selectedDayHover:{background:e.blueButtonHoveredBackground},unselectedDayHover:{background:e.accentColors.gray[100]},selectedDayPressed:{background:e.blueButtonPressedBackground},unselectedDayPressed:{background:e.accentColors.gray[200]}})),[]);return(0,j.jsx)(p().Z,{debugName:"WeekdaySelector",capture:!0,children:(0,j.jsx)("div",{style:{...a.wrapper,...e.style},children:R().Z.map(((i,l)=>(0,j.jsx)(P().Z,{...e,onClick:()=>{const e=t.includes(i)?t.length>r?t.filter((e=>e!==i)):t:[...t,i];n(e)},style:t.includes(i)?a.selectedDay:a.unselectedDay,hoveredStyle:t.includes(i)?a.selectedDayHover:a.unselectedDayHover,pressedStyle:t.includes(i)?a.selectedDayPressed:a.unselectedDayPressed,children:(0,w().er)(o,l+1)},i)))})})}const F={borderRadius:"50%",marginLeft:3,marginRight:3,height:25,width:25,fontSize:14,paddingTop:2};function Z(e){const{customRecurrence:t,setCustomRecurrence:r,isValid:s,setIsValid:y,onSave:f,onDisable:S}=e,I=(0,o().O7)(),{device:C}=I,R=(0,l().YB)(),w=C.isMobile?d().Z4.SlideUp:d().Z4.Popup,P=function(){const{isMobile:e}=(0,o().Fy)();return(0,i().yK)((t=>({iconStyle:{fill:t.regularIconColor,width:e?18:16},customFrequencySelectButton:{color:t.mediumTextColor,fill:t.lightIconColor,fontWeight:500,fontSize:12},weekdayWrapper:{padding:10},inputLabel:{display:"flex",alignItems:"center",...e?{padding:"10px 14px",fontSize:16,background:t.cardBackground}:{paddingLeft:8}},intervalFrequencyLabel:{color:t.lightTextColor},intervalInputWrapper:{width:70,marginLeft:10,marginRight:10},intervalInput:{textAlign:"right"},timeInputWrapper:{width:90,marginLeft:10,marginRight:10},inputSection:{...B,alignItems:"center",justifyContent:"flex-start",padding:8},chevron:{width:e?14:10,fill:t.lightIconColor,marginLeft:4}})),[e])}(),F=C.isMobile?"number":"text",Z=(0,j.jsx)(p().Z,{debugName:"RecurrenceConfigMenu",capture:!0,onLeft:c().yR,onRight:c().yR,onSelectAll:c().yR,onRedo:c().yR,onUndo:c().yR,onCut:c().yR,onCopy:c().yR,onPaste:c().yR,onKeypress:c().yR,onDelete:c().yR,onBackspace:c().yR,onTab:c().yR,children:(0,j.jsx)(b().Z,{value:t.interval.toString(),style:P.intervalInputWrapper,inputStyle:P.intervalInput,type:F,maxlength:3,onChange:e=>{const n=parseInt(e.target.value);(0,a().isValidRecurrenceInterval)(n)&&r({...t,interval:n})},onBlur:e=>{e.target.value=t.interval.toString()}})});return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(m().Z,{style:B,children:[(0,j.jsx)(n(522319).Z,{innerButtonStyle:{...!C.isMobile&&P.customFrequencySelectButton},selectedTitle:(0,g().z$)(t.frequency),renderMenuSections:e=>[{key:"repeatOptionsSection",render:e=>(0,j.jsx)(m().Z,{...e}),items:c().oA([...q({parent:e,updateFrequencyFn:e=>{r((0,g().WP)(t,e))}}),S?{key:"disable",action:()=>{S(),e.close()},render:e=>(0,j.jsx)(u().Z,{...e,title:A})}:void 0])}]}),!C.isMobile&&(0,j.jsx)(x().Z,{isBlue:s,isLightGray:!s,onClick:e=>{f()},disabled:!s,children:D})]}),(0,j.jsx)(m().Z,{style:P.inputSection,shouldShowBottomDivider:!0,children:(0,j.jsx)(_().Z,{style:P.inputLabel,children:H(Z,t.frequency,P.intervalFrequencyLabel)})}),"week"===t.frequency&&(0,j.jsx)(m().Z,{children:(0,j.jsx)(T,{style:P.weekdayWrapper,focused:!0,weekdays:t.weekdays||[],minimumSelection:1,onChange:e=>{r({...t,weekdays:e})}})}),(0,j.jsx)(m().Z,{topBorder:!0,children:(0,j.jsx)(d().ZP,{popupType:w,renderOrigin:e=>(0,j.jsx)(h().X,{...e,title:(0,j.jsx)(l()._H,{defaultMessage:"Starts",id:"database.templatePickerItem.repeatMenu.starts"}),focused:!1,showExtensionArrow:C.isMobile,right:v().ou.fromMillis(t.start_date).setLocale((0,n(578292).E2)(R)).toLocaleString({weekday:"short",month:"short",day:"numeric",year:"numeric"})}),render:e=>(0,j.jsx)("div",{style:{padding:"18px 14px 14px"},children:(0,j.jsx)(n(296034).Z,{firstDayOfWeek:n(718959).AK.state,value:Math.max(t.start_date,Date.now()),onChange:n=>{r({...t,start_date:n}),e.close()},disabledDays:{before:new Date}})})})}),(0,j.jsx)(m().Z,{style:P.inputSection,shouldShowBottomDivider:!0,children:(0,j.jsxs)(_().Z,{style:P.inputLabel,children:[(0,j.jsx)(l()._H,{defaultMessage:"Create at",id:"database.templatePickerItem.repeatMenu.createAt"}),(0,j.jsx)(p().Z,{debugName:"RecurrenceConfigMenu",capture:!0,onLeft:c().yR,onRight:c().yR,onSelectAll:c().yR,onRedo:c().yR,onUndo:c().yR,onCut:c().yR,onCopy:c().yR,onPaste:c().yR,onKeypress:c().yR,onDelete:c().yR,onBackspace:c().yR,onTab:c().yR,children:(0,j.jsx)(M,{value:v().ou.local().set({hour:t.hour,minute:t.minute}).toLocaleString(v().ou.TIME_SIMPLE),style:P.timeInputWrapper,onUpdate:e=>{r({...t,...e}),y(!0)},onError:()=>{y(!1)}})}),(0,j.jsx)(n(91253).X,{enableRecents:!0,currentValue:t.timezone,renderOrigin:e=>(0,j.jsxs)(x().Z,{...e,children:[(0,n(874459).er)(t.timezone),(0,k().i)(P.chevron)]}),onSelect:e=>{r({...t,timezone:e})}})]})})]})}const B={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"4px",flexDirection:"row"};const D=(0,j.jsx)(l()._H,{defaultMessage:"Save",id:"database.templatePickerItem.customRecurrence.save"}),A=(0,j.jsx)(l()._H,{defaultMessage:"Off",id:"database.templatePickerItem.quickOptionMenuItem.off"});function H(e,t,n){switch(t){case"day":return(0,j.jsx)(l()._H,{defaultMessage:"Every {interval} <label>days</label>",id:"database.templatePickerItem.recurrenceInterval.everyXdays",values:{label:e=>(0,j.jsx)("label",{style:n,children:e}),interval:e}});case"week":return(0,j.jsx)(l()._H,{defaultMessage:"Every {interval} <label>weeks</label>",id:"database.templatePickerItem.recurrenceInterval.everyXweeks",values:{label:e=>(0,j.jsx)("label",{style:n,children:e}),interval:e}});case"month":return(0,j.jsx)(l()._H,{defaultMessage:"Every {interval} <label>months</label>",id:"database.templatePickerItem.recurrenceInterval.everyXmonths",values:{label:e=>(0,j.jsx)("label",{style:n,children:e}),interval:e}});case"year":return(0,j.jsx)(l()._H,{defaultMessage:"Every {interval} <label>years</label>",id:"database.templatePickerItem.recurrenceInterval.everyXyears",values:{label:e=>(0,j.jsx)("label",{style:n,children:e}),interval:e}});default:(0,s().t1)(t)}}function q(e){let{parent:t,updateFrequencyFn:n}=e;return g().mq.map((e=>({key:e.frequency,action:()=>{n(e.frequency),t.close()},render:t=>(0,j.jsx)(u().Z,{...t,title:(0,g().z$)(e.frequency)})})))}var L=()=>n(164079),E=()=>n(960852);function W(e){const{buttonPopupEvents:t,focused:r,tooltipLabel:a,recurrence:s,showTooltip:u,variant:d="dropdown"}=e,p=(0,o().O7)(),{device:y}=p,m=(0,i().Fg)(),f=(0,l().YB)(),g=function(){const{isMobile:e}=(0,o().Fy)();return(0,i().yK)((t=>({iconStyle:{fill:t.regularIconColor,width:e?18:16}})),[e])}(),v=Boolean(s);return(0,j.jsx)(I().Z,{disableTooltip:!u,delayThreshold:300,renderTooltip:()=>a,render:e=>{switch(d){case"dropdown":return(0,j.jsx)(h().X,{...(0,L().Z)(e,t),focused:r,icon:(0,E().N)(g.iconStyle),title:(0,j.jsx)(l()._H,{defaultMessage:"Repeat",id:"database.templatePickerItem.actionMenu.repeat"}),showExtensionArrow:y.isMobile,right:O({isActive:v,recurrence:s,intl:f})});case"icon":return(0,j.jsx)(x().Z,{...c().CE((0,L().Z)(e,t),["focused","ignoreLocalHoverState"]),disallowTabbing:!1,isSmall:!0,role:"button",children:(0,E().N)({color:n(568017).ZP.blue,width:14})});case"label":return(0,j.jsxs)(x().Z,{...(0,L().Z)(e,t),children:[O({isActive:v,recurrence:s,intl:f}),(0,k().i)({fill:m.lightIconColor,marginLeft:4,width:10})]})}}})}function O(e){let{isActive:t,recurrence:n,intl:r}=e;return t?n?(0,j.jsx)(j.Fragment,{children:(0,c().kC)((0,g().De)({recurrence:n,intl:r}))}):void 0:(0,j.jsx)(l()._H,{defaultMessage:"Off",id:"database.templatePickerItem.recurrenceConfigMenuLabel.off"})}const Y=(0,r.forwardRef)((function(e,t){const{recurrence:s,onChange:f,disabled:v,buttonPopupStore:h}=e,b=(0,o().O7)(),{device:x}=b,_=(0,i().Fg)(),k=(0,l().YB)(),[S,I]=(0,r.useState)(void 0),[C,M]=(0,r.useState)((0,g().dF)()),[R,w]=(0,r.useState)(!0),P=(0,n(466970).E)("automation_generalized_recurrence");(0,r.useEffect)((()=>{P&&M(s?(0,a().convertToUnpersistedRecurrenceConfig)(s):(0,g().dF)())}),[P,s]),void 0===S&&(void 0!==s?(M({...(0,a().convertToUnpersistedRecurrenceConfig)(s),hour:s.hour??0,minute:s.minute??0}),I(!0)):I(!1));const T=(0,r.useCallback)((()=>{f(C)}),[f,C]),F=x.isMobile?d().Z4.SlideUp:d().Z4.Popup,B=g().mq.map((e=>{const t={key:e.frequency,action:()=>{var t;t=e.frequency,M((0,g().WP)(C,t)),I(!0)},render:t=>(0,j.jsx)(u().Z,{...t,title:V(e.frequency)})};return t})),D=(0,r.useCallback)((e=>(0,j.jsx)(p().Z,{debugName:"RecurrenceConfigMenu",capture:!0,onEnter:c().yR,children:(0,j.jsxs)(n(198829).Z,{...U(e,x.isMobile,R,T),children:[S?(0,j.jsx)(Z,{customRecurrence:C,setCustomRecurrence:M,isValid:R,setIsValid:w,onSave:()=>{T(),e.close()},onDisable:()=>{f(void 0),I(!1),e.close()}}):(0,j.jsx)(y().Z,{type:y().i.Vertical,sections:[{key:"repeatOptionsSection",render:e=>(0,j.jsx)(m().Z,{...e}),items:[...B,z({parent:e,onChange:f})]}],initialFocus:void 0}),S&&K(k,C,_)]})})),[x.isMobile,R,T,S,C,B,f,k,_]),A=(0,n(5485).k)({recurrence:e.recurrence,onChange:f,disabled:v,allowDelete:!0,buttonPopupStore:h});return(0,j.jsx)(n(838003).Z,{...e,popupType:F,ref:t,stopClickPropagation:!0,buttonPopupStore:A.buttonPopupStore,disabled:!P&&v,onClose:A.onClose,renderOrigin:t=>(0,j.jsx)(W,{buttonPopupEvents:t,focused:e.focused,tooltipLabel:s&&(0,g().z$)(s.frequency),recurrence:e.recurrence,showTooltip:e.showTooltip,variant:e.variant}),render:P?A.render:D})}));function V(e){switch(e){case"day":return(0,j.jsx)(l()._H,{defaultMessage:"Daily",id:"database.templatePickerItem.quickOptionMenuItem.day"});case"week":return(0,j.jsx)(l()._H,{defaultMessage:"Weekly",id:"database.templatePickerItem.quickOptionMenuItem.week"});case"month":return(0,j.jsx)(l()._H,{defaultMessage:"Monthly",id:"database.templatePickerItem.quickOptionMenuItem.month"});case"year":return(0,j.jsx)(l()._H,{defaultMessage:"Yearly",id:"database.templatePickerItem.quickOptionMenuItem.year"});default:(0,s().t1)(e)}}function U(e,t,n,r){return t?{menuType:f().o.Modal,title:(0,j.jsx)(l()._H,{defaultMessage:"Repeat",id:"database.templatePickerItem.mobileRepeatModal.title"}),left:(0,j.jsx)(l()._H,{defaultMessage:"Cancel",id:"database.templatePickerItem.customRecurrence.cancel"}),right:D,rightDisabled:!n,onClickRight:()=>{n&&(r(),e.close())},onClickLeft:()=>{e.close()}}:{menuType:f().o.Popup}}function K(e,t,r){const o=(0,a().getFormattedNextRecurrenceTime)({recurrence:t,intl:e});return o?(0,j.jsx)(m().Z,{topBorder:!0,children:(0,j.jsx)(n(18748).ZP,{caption:(0,j.jsx)("span",{style:{color:r.lightTextColor},children:(0,j.jsx)(l()._H,{defaultMessage:"Next: {time}",id:"database.templatePickerItem.recurrenceConfigMenuLabel.nextAtMidnightMessage",values:{time:o}})})})}):null}function z(e){const{parent:t,onChange:n,onClose:r}=e;return{key:"disable",action:()=>{n(void 0),t.close(),r&&r()},render:e=>(0,j.jsx)(u().Z,{...e,title:A})}}},918745:(e,t,n)=>{n.d(t,{F:()=>l,U:()=>a});var r=()=>n(219727),o=()=>n(142735),i=()=>n(352230);function a(e){return e.device.isPhone||"actionSheet"===e.tabletBehavior&&e.device.isTablet?{menuType:i().o.ActionSheet}:{menuType:i().o.Popup,maxHeight:e.maxHeight,maxWidth:e.maxWidth,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,width:e.width,minWidth:e.minWidth}}function l(e){const t=(0,r().Fy)();return(0,o().VK)((()=>a({device:t,maxHeight:null==e?void 0:e.maxHeight,maxWidth:null==e?void 0:e.maxWidth,paddingTop:null==e?void 0:e.paddingTop,paddingBottom:null==e?void 0:e.paddingBottom,width:null==e?void 0:e.width,minWidth:null==e?void 0:e.minWidth,tabletBehavior:null==e?void 0:e.tabletBehavior})),[t,null==e?void 0:e.maxHeight,null==e?void 0:e.maxWidth,null==e?void 0:e.paddingTop,null==e?void 0:e.paddingBottom,null==e?void 0:e.width,null==e?void 0:e.minWidth,null==e?void 0:e.tabletBehavior])}},296034:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(667294),o=n(785893);const i=function(e){let{firstDayOfWeek:t,value:i,selectValue:a=!0,onChange:l,onFocus:c,onBlur:s,disabledDays:u}=e;const d=(0,r.useMemo)((()=>new Date(i)),[i]),[p,y]=(0,r.useState)(d),m=(0,r.useRef)(i);(0,r.useLayoutEffect)((()=>{m.current!==i&&(y(new Date(i)),m.current=i)}),[i]);const f=(0,r.useCallback)(((e,t,n)=>{l(e.getTime())}),[l]);return(0,o.jsx)(n(933696).y,{locale:n(146947).locale,className:"notion-calendar-picker",numberOfMonths:1,weekStartsOn:t,modifiers:a?{value:d}:{},showOutsideDays:!0,fixedWeeks:!0,onDayClick:f,onMonthSelected:y,disabled:u,month:p,onDayBlur:s,onDayFocus:c})}},933696:(e,t,n)=>{n.d(t,{y:()=>i});var r=()=>n(677559);const o=new(r().Ss)("react-day-picker",(async()=>await Promise.all([n.e(59897),n.e(81369)]).then(n.bind(n,712627)))),i=(0,r().kF)(o,(e=>e.default))},863606:(e,t,n)=>{n.d(t,{W:()=>o});var r=n(667294);function o(e,t,n){const o=(0,r.useRef)(e),i=(0,r.useRef)(null);(0,r.useEffect)((()=>{o.current=e}),[e]),(0,r.useEffect)((()=>{const e=async()=>{i.current&&(clearTimeout(i.current),i.current=null),n&&(await o.current(),i.current=setTimeout(e,t))};return n&&e(),()=>{i.current&&(clearTimeout(i.current),i.current=null)}}),[n,t])}},960852:(e,t,n)=>{n.d(t,{N:()=>o});n(667294);var r=n(785893);const o=(0,n(827282).IU)("repeat",{viewBox:"0 0 16 14",svg:(0,r.jsx)("path",{d:"M1.185 7.317a.689.689 0 00.697-.704v-.601c0-1.19.806-1.942 2.064-1.942H9.23v1.573c0 .328.199.52.527.52a.66.66 0 00.403-.144l2.68-2.236c.253-.212.26-.547 0-.765L10.16.782A.62.62 0 009.757.64c-.328 0-.527.184-.527.52v1.53H4.05C1.875 2.69.48 3.9.48 5.875v.738c0 .397.308.704.705.704zm13.624-.649a.689.689 0 00-.698.704v.608c0 1.19-.806 1.942-2.064 1.942H6.763V8.35c0-.329-.199-.52-.527-.52a.66.66 0 00-.403.144l-2.68 2.242c-.26.212-.26.547 0 .759l2.68 2.242a.66.66 0 00.403.143c.328 0 .527-.191.527-.52v-1.544h5.181c2.174 0 3.569-1.21 3.569-3.179v-.745a.695.695 0 00-.704-.704z"})})},179378:(e,t,n)=>{n.d(t,{Z:()=>o});class r extends(()=>n(263184))().default{getInitialState(){return{}}}const o=r},912203:(e,t,n)=>{n.d(t,{$M:()=>g,GQ:()=>k,Jy:()=>C,LF:()=>I,NO:()=>y,Of:()=>j,SF:()=>d,TX:()=>_,XO:()=>v,Y_:()=>u,Ym:()=>f,bD:()=>b,cO:()=>p,fo:()=>S,rR:()=>m});n(267602),n(653476),n(228244);var r=()=>n(513670),o=()=>n(696459),i=()=>n(226413),a=()=>n(109477),l=()=>n(455222),c=()=>n(305580);(0,o().AO)((e=>(0,o().$K)(e)&&(0,o().$K)(e.target)&&(0,o().$K)(e.external_bot_id)?{true:{external_bot_id:e.external_bot_id,target:e.target}}:{false:e}));const s={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1},u={checkbox:[{type:"checkbox"}],date:[{type:"date"}],email:[{type:"text"}],multi_select:[{type:"text"},{of:{type:"text"},type:"array"}],number:[{type:"number"}],person:[{type:"person"},{of:{type:"person"},type:"array"}],phone_number:[{type:"text"}],relation:[{type:"block"},{of:{type:"block"},type:"array"}],select:[{type:"text"},{of:{type:"text"},type:"array"}],status:[{type:"text"},{of:{type:"text"},type:"array"}],text:void 0,title:void 0,url:[{type:"text"}]};function d(e){return Boolean(s[e.type]&&!(0,i().NK)(e)&&(!(0,i().qQ)(e)||void 0===(0,i().q3)(e)))}function p(e){const{collectionFormat:t,collectionSchema:n,filter:l,sort:s,sourcePropertyIds:u}=e,p=(u??(0,o().Yd)(n)).filter(((t,r,o)=>{const a=n[t];return!(!a||!d(a))&&(("relation"!==a.type||!e.restrictCrossSpace||!(0,i().Qh)(e.spaceId,a))&&(!l||l([t,a],r,n)))}));if(0===p.length)return[];if(!t||!1===s)return p;const y=(0,c().i)(t,n,void 0,a().j5.Page).collection_page_properties||[];return r().MR(p,(e=>y.findIndex((t=>t.property===e))))}function y(e){const{collectionFormat:t,collectionSchema:n,sort:l}=e,s=(0,o().Yd)(n).filter(((e,t,r)=>{const o=n[e];return!(!o||!(0,i().U8)(o))}));if(0===s.length)return[];if(!t||!1===l)return s;const u=(0,c().i)(t,n,void 0,a().j5.Page).collection_page_properties||[];return r().MR(s,(e=>u.findIndex((t=>t.property===e))))}function m(e){return e.type===l().$E.InvalidCharacter?{type:e.type,character:e.character}:e.type===l().$E.TokenExpected?{type:e.type,token:e.token}:e.type===l().FY.MissingSchemaPropertyOnThisRow||e.type===l().FY.MissingSchemaPropertyOnCollection?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===l().FY.ThisRowBlockPropertyMismatchCollection?{type:e.type,thisRowCollection:e.thisRowCollection}:e.type===l().FY.MissingContextVariable?{type:e.type,valueId:e.valueId}:e.type===l().FY.FunctionCallTooFewArguments?{type:e.type,numArguments:e.numArguments}:e.type===l().FY.FunctionCallUnexpectedArgument?{type:e.type,parameterIndex:e.parameterIndex}:e.type===l().FY.FunctionCallArgumentWrongType?{type:e.type,argumentType:e.argumentType,libraryFunctionName:e.libraryFunction.name,parameterIndex:e.parameterIndex}:e.type===l().FY.MissingDataDependencyBlock?{type:e.type,blockPointer:e.blockPointer}:e.type===l().FY.MissingDataDependencyPerson?{type:e.type,personPointer:e.personPointer}:e.type===l().FY.MemberPropertyMismatchCollection?{type:e.type,blockCollection:e.blockCollection}:e.type===l().FY.DownstreamParseFailure?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===l().FY.ContextVariableWrongType?{type:e.type,valueId:e.valueId,expectedType:e.expectedType,resultType:e.resultType}:e.type===l().FY.DisallowedValueType?{type:e.type,expressionValue:e.expressionValue,allowedValueTypes:e.allowedValueTypes}:e.type===l().FY.LibraryFunctionExecutionError?{type:e.type,error:e.error,libraryFunctionName:e.libraryFunction.name}:{type:e.type}}const f={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,button:!1,file:!1,verification:!1,auto_increment_id:!1,created_by:!1,created_time:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1};function g(e){return Boolean(f[e.type])}function v(e){const{collectionFormat:t,collectionSchema:n,filter:l,sort:s}=e,u=(0,o().Yd)(n).filter(((e,t,r)=>{var o;const a=n[e];return!(!a||!f[a.type])&&((!(0,i().qQ)(a)||null===(o=(0,i().q3)(a))||void 0===o||!o.auto_update_on_edit)&&(!l||l([e,a],t,n)))}));if(0===u.length)return[];if(!t||!1===s)return u;const d=(0,c().i)(t,n,void 0,a().j5.Page).collection_page_properties||[];return r().MR(u,(e=>d.findIndex((t=>t.property===e))))}const h={checkbox:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,date:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1};function b(e){return h[e.type]}const x={checkbox:!0,created_by:!0,created_time:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,last_edited_by:!0,last_edited_time:!0,auto_increment_id:!1,button:!1,file:!1,formula:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1};function _(e){return x[e.type]}function k(e){return 0===e}function S(e){return function(e){return"button_block"===e||"button_property"===e}(e)}function I(e){const{property:t,collectionSchema:n}=e;return!!n&&!n[t]}function C(e){const{collectionSchema:t,property:n,type:r}=e,o=null==t?void 0:t[n];return!o||("action"===r?!d(o):!f[o.type])}function j(e){let{automationTrigger:t,collectionSchema:n}=e;if("event"===(null==t?void 0:t.type)||"notification_event"===(null==t?void 0:t.type)){const{pagesAdded:e,pagePropertiesEdited:r,source:i}=t.event;if(void 0===i)return!1;const a="some"===r.type&&r.some,l="all"===r.type&&r.all;if((a||l||[]).some((e=>I({collectionSchema:n,property:e.property})||C({collectionSchema:n,property:e.property,type:"trigger"}))))return!1;const c="some"===r.type&&(!(0,o().$K)(r.some)||0===r.some.length),s="all"===r.type&&(!(0,o().$K)(r.all)||0===r.all.length);if(!e&&("none"===r.type||c||s))return!1}else{if("recurrence"!==(null==t?void 0:t.type))return!1;if(!t.recurrence)return!1}return!0}}}]);