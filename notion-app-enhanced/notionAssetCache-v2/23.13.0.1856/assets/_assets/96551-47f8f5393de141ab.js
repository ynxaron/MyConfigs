"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[96551],{296551:(e,n,t)=>{t.r(n);t(821057),t(670560);var o=()=>t(156642),a=()=>t(156958),r=()=>t(457325),i=()=>t(965903),s=()=>t(636340),c=()=>t(970105),l=()=>t(269299);function m(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;l().createAndCommit({userAction:"legacyTransclusionConsoleActions.createLegacyTransclusion",environment:e,canUndo:!0,perform:m=>{var u;const p=i().default.getCurrentRecordCache();if(!p)throw new Error("No in-memory record cache!");if(function(e){const{environment:n,transaction:t}=e,o=r().Z.state;if(!o.isActive)return!1;const{selection:i,simpleTableStore:c}=o,l=a().iz({environment:n,index:i.end.row+1,simpleTableStore:c,transaction:t});return s().sW({store:l,data:{parent_id:c.getParentId(),parent_table:c.getParentTable()},transaction:t}),!0}({environment:e,transaction:m}))return;const d=null===(u=t(718959).RM())||void 0===u?void 0:u.pointer.spaceId,h=s().j4({environment:e,type:o().Ti.text,inMemoryRecordCache:p,transaction:m,spaceId:d}),g=h.getTitleStore();g&&c().mM({environment:e,store:g,tokens:[['here is a legacy transclusion (a.k.a. "phantom synced block")']],index:0,transaction:m});const v=[];for(let t=0;t<n;t++){const n=s().j4({environment:e,type:o().Ti.numberedList,inMemoryRecordCache:p,transaction:m,spaceId:d}),t=n.getBlockTitleStore();c().mM({environment:e,store:t,tokens:[["this block has a legacy transclusion in it"]],index:0,transaction:m});const a=n.getContentStore();l().applyOperation({transaction:m,store:a,operation:{pointer:a.pointer,path:a.path,command:"set",args:[h.id]}}),v.push(n)}t(453999).BM({environment:e,blocksToInsert:[h,...v],target:i().default.state.stores,transaction:m,replaceEmptyTextBlock:!1}),m.postSubmitCallbacks.push((e=>{e&&console.log("Submitting legacy transclusion transaction failed! You may need to run the server with the NOTION_DEBUG_DISABLE_LEGACY_TRANSCLUSION_VALIDATION environment variable set to a non-empty value.")}))}})}(0,t(100056).exposeDebugEnvironmentValue)("createLegacyTransclusion",(e=>m.bind(null,e)))}}]);