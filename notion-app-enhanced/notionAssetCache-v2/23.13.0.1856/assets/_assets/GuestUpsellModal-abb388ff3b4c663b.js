"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[27844],{109174:(e,s,t)=>{t.d(s,{Z:()=>y,u:()=>b});var r=t(667294),a=()=>t(219727),o=()=>t(142735),i=()=>t(846550),n=()=>t(788860),l=()=>t(707513),c=()=>t(930085),d=()=>t(824462),u=()=>t(102182),p=()=>t(876822),g=()=>t(807463),m=()=>t(206352),h=()=>t(291198),_=()=>t(661297),x=()=>t(906651),j=t(785893);function b(e){const s=(0,a().O7)(),{onDismiss:t}=e,[b,y]=(0,r.useState)(""),f=(0,n().YB)(),M=(0,i().yK)((()=>({container:{padding:20},title:{fontWeight:l().Ue.medium,marginBottom:10},input:{width:"100%",padding:"8px 12px",marginTop:10,marginBottom:10},button:{width:"100%",marginTop:10}})),[]),{currentSpaceStore:v}=(0,o().VK)((()=>({currentSpaceStore:p().default.state.currentSpaceStore})),[]);return(0,j.jsxs)("div",{style:M.container,children:[(0,j.jsx)("div",{style:M.title,children:(0,j.jsx)(n()._H,{id:"GuestMembershipRequestModal.title",defaultMessage:"Request membership to workspace"})}),(0,j.jsxs)(m().Z,{debugName:"GuestMembershipRequestModal",capture:!0,allowEsc:!0,children:[(0,j.jsx)(h().Z,{style:M.input,textarea:!0,value:b,placeholder:f.formatMessage({id:"GuestMembershipRequestModal.message.placeholder",defaultMessage:"Reason (optional)"}),onChange:e=>{y(e.target.value)}}),(0,j.jsx)(x().Z,{isLarge:!0,style:M.button,onClick:()=>{const{currentUser:e}=s;e&&e.id&&v&&(c().d(s,{invite_flow_id:void 0,user_count:1,new_user_count:1,is_bot:!1,space_role:"read_and_write",invite_message_length:b.length,invite_space_role_selection:g().uq.request_workspace_member,from:"sidebar_guest_request"}),d().callApi({eventName:"requestAccess",environment:s,data:{type:"actor-to-space",forActorId:e.id,spaceId:v.id,message:b,attributes:{origin_id:v.id,origin_type:"sidebar_guest_request",origin_table:"space",add_permissions_on_approval:!1}}}).catch((()=>{u().oV({label:(0,j.jsx)(n()._H,{id:"guestMembershipRequestModal.confirmationToast.errorMessage",defaultMessage:"Failed to send membership request."})})})).finally((()=>{u().oV({label:(0,j.jsx)(n()._H,{id:"guestMembershipRequestModal.confirmationToast.successMessage",defaultMessage:"Sent membership request."})})})),y(""),t())},children:(0,j.jsx)(n()._H,{id:"GuestMembershipRequestModal.sendRequest.button",defaultMessage:"Send request"})}),(0,j.jsx)(_().Z,{isLarge:!0,style:M.button,onClick:()=>{y(""),t()},children:(0,j.jsx)(n()._H,{id:"GuestMembershipRequestModal.cancel.button",defaultMessage:"Cancel"})})]})]})}const y=function(e){const s=(0,a().O7)(),[o,n]=(0,r.useState)(!1),{origin:l}=e,c=(0,i().yK)((()=>({modalStyle:{alignSelf:"center",overflow:"visible",top:0,width:350}})),[]);return(0,j.jsx)(t(923550).Z,{modalStyle:c.modalStyle,open:o,origin:(0,j.jsx)("div",{onClick:()=>{t(912732).g9(s),n(!0)},children:l}),onDismiss:()=>n(!1),renderContent:()=>(0,j.jsx)(b,{onDismiss:()=>n(!1)})})}},439661:(e,s,t)=>{t.r(s),t.d(s,{GuestUpsellModal:()=>Z});var r=t(667294),a=()=>t(219727),o=()=>t(142735),i=()=>t(846550),n=()=>t(714230),l=()=>t(788860),c=()=>t(696459),d=()=>t(930085),u=()=>t(824462),p=()=>t(102182),g=()=>t(916095),m=()=>t(286338),h=()=>t(850790),_=()=>t(325107),x=()=>t(783703),j=()=>t(876822),b=()=>t(807463),y=()=>t(976973),f=()=>t(212493),M=()=>t(779300),v=()=>t(573357),w=()=>t(206352),q=()=>t(291198),k=()=>t(661641),S=()=>t(92175),C=()=>t(921981),U=()=>t(67961),R=()=>t(109174),G=t(785893);function Z(e){const{open:s,stage:t}=(0,o().Kw)(y().Z),i=(0,a().O7)(),n=(0,o().VK)((()=>j().default.state.currentSpaceStore),[]),l=(0,o().VK)((()=>j().default.state.currentUserRootStore),[]),d=(0,o().VK)((()=>(0,m().eu)({environment:i,spaceStore:n,userRootStore:l})),[i,n,l]),u=(0,r.useCallback)((()=>{switch(t){case"landing":return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(f().jX,{padding:24,children:[(0,G.jsx)(T,{}),(0,G.jsx)(I,{})]}),d?(0,G.jsx)(K,{}):(0,G.jsx)(H,{})]});case"membership_request":return(0,G.jsx)("div",{style:{padding:"15px 10px"},children:(0,G.jsx)(R().u,{onDismiss:()=>{y().Z.close()}})});default:(0,c().t1)(t)}}),[t,d]);return(0,G.jsx)(C().c,{isOpen:s,onClosed:()=>{y().Z.close()},render:()=>(0,G.jsx)(v().Z,{capture:!0,allowEsc:!0,render:()=>(0,G.jsxs)(g().gv.Provider,{value:()=>y().Z.close(),children:[(0,G.jsx)(g().U4,{}),u()]})})})}function T(){const e=(0,i().yK)((e=>({title:{display:"flex",marginTop:24,marginBottom:24}})),[]);return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)("img",{src:n().Z.images.thinkItMakeItCloudDarkPng,style:{width:334,height:205,margin:"auto"}}),(0,G.jsx)(k().q,{styleName:"UITitle-26px/Bold",customStyles:e.title,children:(0,G.jsx)(l()._H,{defaultMessage:"Experience Notion as a workspace member",id:"GuestUpsellModal.header.title"})})]})}function I(){const e=(0,i().yK)((e=>({icon:{width:20,height:20,fill:e.text.uiBluePrimary,marginRight:16},secondaryText:{color:e.text.secondary}})),[]);return(0,G.jsxs)(f().jX,{direction:"column",gap:20,children:[(0,G.jsxs)(f().jX,{direction:"row",children:[(0,x().l)(e.icon),(0,G.jsx)(k().q,{styleName:"UIRegular-14px/Medium",customStyles:{marginTop:2},children:(0,G.jsx)(l()._H,{defaultMessage:"Create and organize <secondary>projects, notes, and to-dos</secondary>",id:"GuestUpsellModal.body.point1",values:{secondary:s=>(0,G.jsx)("span",{style:e.secondaryText,children:s})}})})]}),(0,G.jsxs)(f().jX,{direction:"row",children:[(0,_().U)(e.icon),(0,G.jsx)(k().q,{styleName:"UIRegular-14px/Medium",customStyles:{marginTop:2},children:(0,G.jsx)(l()._H,{defaultMessage:"Stay in the loop <secondary>with access to all pages across this workspace</secondary>",id:"GuestUpsellModal.body.point2",values:{secondary:s=>(0,G.jsx)("span",{style:e.secondaryText,children:s})}})})]}),(0,G.jsxs)(f().jX,{direction:"row",children:[(0,h().K)(e.icon),(0,G.jsx)(k().q,{styleName:"UIRegular-14px/Medium",customStyles:{marginTop:2},children:(0,G.jsx)(l()._H,{defaultMessage:"Supercharge work <secondary>with the latest Notion features</secondary>",id:"GuestUpsellModal.body.point3",values:{secondary:s=>(0,G.jsx)("span",{style:e.secondaryText,children:s})}})})]})]})}function H(){const e=(0,i().yK)((e=>({footerWrapper:{borderTop:`1px solid ${e.tableLightDividerColor}`,padding:16},continueCopy:{fontSize:14}})),[]);return(0,G.jsxs)(f().jX,{direction:"row",style:e.footerWrapper,children:[(0,G.jsx)(f().jX,{align:"center-left",style:e.continueCopy,children:(0,G.jsx)(S().Z,{isGray:!0,onClick:()=>{y().Z.close()},children:(0,G.jsx)(l()._H,{defaultMessage:"Continue as guest",id:"GuestUpsellModal.footer.continue"})})}),(0,G.jsx)(f().jX,{align:"center-right",children:(0,G.jsx)(M().h,{onClick:()=>y().Z.setState({open:!0,stage:"membership_request"}),children:(0,G.jsx)(l()._H,{defaultMessage:"Request access",id:"GuestUpsellModal.footer.requestAccess"})})})]})}function K(){const e=(0,l().YB)(),s=(0,a().O7)(),t=(0,o().VK)((()=>j().default.state.currentSpaceStore),[]),[n,c]=(0,r.useState)(""),g=(0,i().yK)((e=>({footerWrapper:{borderTop:`1px solid ${e.tableLightDividerColor}`,padding:16},continueCopy:{fontSize:14},input:{marginBottom:16},messageInputLabel:{marginBottom:8}})),[]),m=(0,r.useCallback)((()=>{const{currentUser:e}=s;e&&e.id&&t&&(d().d(s,{invite_flow_id:void 0,user_count:1,new_user_count:1,is_bot:!1,space_role:"read_and_write",invite_message_length:n.length,invite_space_role_selection:b().uq.request_workspace_member,from:"guest_upsell_modal_v2"}),u().callApi({eventName:"requestAccess",environment:s,data:{type:"actor-to-space",forActorId:e.id,spaceId:t.id,message:n,attributes:{origin_id:t.id,origin_type:"sidebar_guest_request",origin_table:"space",add_permissions_on_approval:!1}}}).then((e=>{"success"===e.type&&p().oV({label:(0,G.jsx)(l()._H,{id:"guestMembershipRequestModal.confirmationToast.successMessage",defaultMessage:"Sent membership request."})})})),c(""),y().Z.close())}),[s,t,n]);return(0,G.jsxs)("div",{style:g.footerWrapper,children:[(0,G.jsx)(U().Z,{isSecondaryColor:!0,style:g.messageInputLabel,children:(0,G.jsx)(l()._H,{id:"GuestUpsellModal.requestMessage.label",defaultMessage:"Add a message"})}),(0,G.jsx)(w().Z,{debugName:"GuestMembershipRequestModal",capture:!0,allowEsc:!0,children:(0,G.jsx)(q().Z,{style:g.input,textarea:!0,value:n,placeholder:e.formatMessage({id:"GuestMembershipRequestModal.message.placeholder",defaultMessage:"Reason (optional)"}),onChange:e=>{c(e.target.value)}})}),(0,G.jsxs)(f().jX,{direction:"row",children:[(0,G.jsx)(f().jX,{align:"center-left",style:g.continueCopy,children:(0,G.jsx)(S().Z,{isGray:!0,onClick:()=>{y().Z.close()},children:(0,G.jsx)(l()._H,{defaultMessage:"Continue as guest",id:"GuestUpsellModal.footer.continue"})})}),(0,G.jsx)(f().jX,{align:"center-right",children:(0,G.jsx)(M().h,{onClick:m,children:(0,G.jsx)(l()._H,{defaultMessage:"Request access",id:"GuestUpsellModal.footer.requestAccess"})})})]})]})}},850790:(e,s,t)=>{t.d(s,{K:()=>a});t(667294);var r=t(785893);const a=(0,t(827282).IU)("boltFilled",{svg:(0,r.jsx)("path",{d:"M0 12.117c0 .38.293.664.703.664h5.518l-2.91 7.91c-.381 1.006.664 1.543 1.318.723l8.877-11.094c.166-.205.254-.4.254-.625 0-.371-.293-.664-.703-.664H7.539l2.91-7.91C10.83.115 9.785-.422 9.131.408L.254 11.492c-.166.215-.254.41-.254.625z"}),viewBox:"0 0 14 22"})},783703:(e,s,t)=>{t.d(s,{l:()=>a});t(667294);var r=t(785893);const a=(0,t(827282).IU)("createPage",{viewBox:"0 0 24 24",svg:(0,r.jsx)("g",{children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M9.944 14.721c.104.094.216.12.336.079l1.703-.688 6.844-6.844-1.406-1.398-6.836 6.836-.711 1.68c-.052.13-.029.242.07.335zm8.102-9.484l1.414 1.406.515-.523a.917.917 0 00.282-.633.76.76 0 00-.258-.61l-.25-.25a.702.702 0 00-.578-.187.975.975 0 00-.617.297l-.508.5zm-9.453.127a3.85 3.85 0 00-3.85 3.85v6.5a3.85 3.85 0 003.85 3.85h6.5a3.85 3.85 0 003.85-3.85V12.95a.85.85 0 10-1.7 0v2.764a2.15 2.15 0 01-2.15 2.15h-6.5a2.15 2.15 0 01-2.15-2.15v-6.5a2.15 2.15 0 012.15-2.15h3.395a.85.85 0 000-1.7H8.593z",clipRule:"evenodd"})})})},807463:(e,s,t)=>{t.d(s,{TG:()=>a,ZP:()=>i,uq:()=>r});t(267602),t(653476),t(241792),t(228244);let r=function(e){return e.unselected="unselected",e.workspace_member="workspace_member",e.request_workspace_member="request_workspace_member",e.page_guest="page_guest",e.closed="closed",e}({}),a=function(e){return e[e.closed=0]="closed",e[e.share_page=1]="share_page",e[e.share_workspace=2]="share_workspace",e[e.request_workspace=3]="request_workspace",e}({});class o extends(()=>t(263184))().default{getInitialState(){return{inviteStage:a.closed,selection:r.workspace_member,order:[r.workspace_member,r.page_guest],invitedUsers:[],invitedEmailToUserIdMap:{},flowId:t(956057).Il()}}startWorkspaceInvite(){this.setState({...this.state,inviteStage:a.share_workspace,order:[r.workspace_member,r.page_guest],selection:r.workspace_member})}startRequestMembership(){this.setState({...this.state,inviteStage:a.request_workspace,order:[r.request_workspace_member,r.page_guest],selection:r.request_workspace_member})}hasGuests(){return this.state.invitedUsers.some((e=>e.isGuest))}getGuestEmails(){return this.state.invitedUsers.filter((e=>e.isGuest)).map((e=>e.email))}}const i=o}}]);