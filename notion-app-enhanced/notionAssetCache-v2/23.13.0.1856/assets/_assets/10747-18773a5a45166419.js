"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[10747],{172656:(e,t,n)=>{n.d(t,{Z:()=>i});class o extends(()=>n(263184))().default{getInitialState(){return{open:!1}}}const i=new o},810747:(e,t,n)=>{n.r(t),n.d(t,{CollapsibleTextSliceTreeWrapper:()=>S});n(670560),n(267602),n(30005);var o=()=>n(387934),i=()=>n(947115),s=(n(122556),n(582845),n(250570),n(533019),n(721473),n(788208),n(22624),n(241792),()=>n(541012));function c(e){return d(r(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})).join("\n")}function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a(e,t,{latestRandomId:0,uuidMap:t.uuidMap??{},instanceIdsShown:new Set},0)}function l(e,t){return t[e]??e}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const{simplifiedId:n,hasShownInstance:o,clock:i,textValue:s,simplifiedItems:c,children:r}=e,l=[];if(l.push(`${t}- id: ${n}`),o||l.push(`${t}  clock: ${i}`),l.push(`${t}  text: ${JSON.stringify(s)}`),l.push(`${t}  items: ${c}`),r.length>0){l.push(`${t}  children:`);for(const e of r)l.push(...d(e,`${t}  `))}return l}function a(e,t,n,o){const i=e.getTextSlice(),c=i.textInstanceId;t.isInstanceIdRandom&&!n.uuidMap[c]&&(n.uuidMap[c]=`[random UUID #${++n.latestRandomId}]`);const r=l(i.textInstanceId,n.uuidMap),d=n.instanceIdsShown.has(c),u=i.opClock.getValue();d||n.instanceIdsShown.add(c);const p=i.getTextValue(),h=Array.from(i.iterateItems({includeDeleted:!0,includeEndItem:!0})).map((e=>function(e,t){const n=e.toString();if(e instanceof s().Jy){const o=`${l(e.id[0],t)}@${e.id[1]}`;return n.replace(" ",` ${o} `)}if(e instanceof s().JE){const o=`${l(e.id[0],t)}@${e.id[1]}`;return n.replace("]",` ${o}]`)}return n}(e,n.uuidMap))),f={simplifiedId:r,clock:u,textValue:p,simplifiedItems:h.join(" "),hasShownInstance:d,children:[],depth:o};for(const s of e.children)f.children.push(a(s,t,n,o+1));return f}var u=()=>n(172656);const p=new class{constructor(e){this.nextId=0,this.uuidMap=e}pseudonymizeSessions(e){for(const t of e.getTextSlice().iterateItems({includeDeleted:!0,includeEndItem:!0}))if(t instanceof s().Jy||t instanceof s().JE){const e=t.id[0];this.uuidMap[e]||(this.uuidMap[e]=this.zeroOrPositiveIntToLetters(this.nextId++))}for(const t of e.children)this.pseudonymizeSessions(t)}zeroOrPositiveIntToLetters(e){const t="A".codePointAt(0)-"0".codePointAt(0);return e.toString().split("").map((e=>String.fromCodePoint(e.charCodeAt(0)+t))).join("")}}({});function h(e,t){p.pseudonymizeSessions(e);return m(r(e,{...t,uuidMap:{...p.uuidMap,...null==t?void 0:t.uuidMap}}))}i().exposeDebugValue("toggleCrdtDebuggingOverlay",(()=>{const e=!u().Z.state.open;u().Z.setState({open:e}),console.log(`CRDT debugging overlay is now ${e?"enabled":"disabled"}.`)})),i().exposeDebugValue("visualizeTextSliceTreesOfSelectedBlocks",(()=>{const e=n(965903).default.state.stores,t={};e.forEach(((e,n)=>{t[e.id]=`block${n+1}`}));for(const n of e){const e=n.getBlockTitleTextSliceTree();if(e){const o=c(e,{uuidMap:t});console.log(`TextSliceTree for ${t[n.id]} (${n.id}):\n\n`,o)}}}));const f=4;function m(e){const{simplifiedId:t,hasShownInstance:n,clock:i,textValue:s,simplifiedItems:c,children:r,depth:l}=e,{ol:a,li:u,span:p,div:h,objectSummary:S}=o().devToolsHyperscript,g=function(e){const t="id"===e?"â€¢":" ";for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return u({},p({},`${t} `),p({style:"font-weight: bold"},`${e}: `),...o)},T=[];for(const o of r){const e=h({},l>f?d(o,"    ").join("\n"):m(o));T.push(e)}return a({style:"list-style-type: none; padding-left: 2em"},g("id",t),n?void 0:g("clock",i.toString()),g("text",S(s,{asJSON:!0})),g("items",c),T.length>0?g("children",...T):void 0)}(0,o().Rw)({id:"textSliceTreeFormatter",canFormat:e=>Boolean(e&&e instanceof n(300675).ZP),header(e){const{span:t,CONTAINER_STYLE:n,object:i}=o().devToolsHyperscript;return t(n,t({},i(e,{useDefaultFormatter:!0}),`(${g(e)})`),h(e))},hasBody:()=>!1,body:()=>null});class S{constructor(e){this.textSliceTree=e}}function g(e){let t=0;for(const n of e.iterateTextSliceTrees())t++;return t}(0,o().Rw)({id:"collapsibleTextSliceTreeWrapperFormatter",canFormat:e=>Boolean(e&&e instanceof S),header(e){const{span:t}=o().devToolsHyperscript;return t({},`TextSliceTree(${g(e.textSliceTree)})`)},hasBody:()=>!0,body:e=>h(e.textSliceTree)})}}]);