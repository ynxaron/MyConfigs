"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[5054],{787738:(e,t,n)=>{n.d(t,{K:()=>o});var r=()=>n(594546);function o(e,t){const{spaceId:n,pageId:o,joinSpaceMethod:a}=t;(0,r().j)({environment:e,event:{eventName:"trusted_domain_banner_cta_clicked",eventProperties:{spaceId:n,pageId:o,joinSpaceMethod:a}}})}},166312:(e,t,n)=>{n.d(t,{De:()=>f,HH:()=>h,WP:()=>m,dF:()=>g,mq:()=>d,wo:()=>u,z$:()=>p});n(670560);var r=()=>n(730120),o=(n(667294),()=>n(157955)),a=()=>n(874459),i=()=>n(788860),s=()=>n(696459),l=()=>n(239482),c=n(785893);const d=[{frequency:"day",interval:1},{frequency:"week",interval:1},{frequency:"month",interval:1},{frequency:"year",interval:1}];function u(e){const t=l().eG(e)??[],n=[];for(const r of t){if(!("block"===r.table&&!0===r.isTemplate()&&r.getFormat().automation_id&&r.id!==e.id))continue;const t=r.getAutomationStore();if(t){if(!t.isReady())return{automationStoresReady:!1};void 0!==t.getRecurrence()&&t.isDefined()&&n.push(t.getModel())}}return{automationStoresReady:!0,...(0,o().templateAncestorsViolateRecurrenceNesting)(n)}}function p(e){switch(e){case"day":return(0,c.jsx)(i()._H,{defaultMessage:"Repeat daily",id:"database.templatePickerItem.recurrenceFrequency.daily"});case"week":return(0,c.jsx)(i()._H,{defaultMessage:"Repeat weekly",id:"database.templatePickerItem.recurrenceFrequency.weekly"});case"month":return(0,c.jsx)(i()._H,{defaultMessage:"Repeat monthly",id:"database.templatePickerItem.recurrenceFrequency.monthly"});case"year":return(0,c.jsx)(i()._H,{defaultMessage:"Repeat yearly",id:"database.templatePickerItem.recurrenceFrequency.yearly"});default:(0,s().t1)(e)}}function m(e,t){const n="week"!==t||void 0!==e.weekdays&&0!==e.weekdays.length?e.weekdays:[(a=e.start_date,(0,s().Yd)(o().RRULE_WEEKDAYS_MAP)[r().ou.fromMillis(a).weekday-1])];var a;return{...e,weekdays:n,frequency:t}}function g(){return{start_date:r().ou.local().plus({days:1}).set({hour:0,minute:0,second:0,millisecond:0}).toMillis(),timezone:(0,a().Sv)(),hour:0,minute:0,frequency:"day",interval:1}}function f(e){const{recurrence:t,intl:n,leadingPhrase:r}=e;return(0,o().rruleFromRecurrence)({..."month"===t.frequency?{...t,monthly_restriction:void 0}:t,weekdays:void 0,hour:0,minute:0,end_condition:void 0}).toText((e=>{switch(e){case"every":if(void 0===r)return"";if("every"===r)return n.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.every",defaultMessage:"every"});if("repeat every"===r)return n.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.repeatEvery",defaultMessage:"repeat every"});(0,s().t1)(r);break;case"day":return n.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.day",defaultMessage:"day"});case"days":return n.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.days",defaultMessage:"days"});case"week":return n.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.week",defaultMessage:"week"});case"weeks":return n.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.weeks",defaultMessage:"weeks"});case"month":return n.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.month",defaultMessage:"month"});case"months":return n.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.months",defaultMessage:"months"});case"year":return n.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.year",defaultMessage:"year"});case"years":return n.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.years",defaultMessage:"years"});default:return e.toString()}})).trim()}function h(e){const t=e.getRecurrence();return Boolean(e.isTriggerType("recurrence")&&t&&"disabled_recurrence_ended"===e.getStatus())}},918745:(e,t,n)=>{n.d(t,{F:()=>s,U:()=>i});var r=()=>n(219727),o=()=>n(142735),a=()=>n(352230);function i(e){return e.device.isPhone||"actionSheet"===e.tabletBehavior&&e.device.isTablet?{menuType:a().o.ActionSheet}:{menuType:a().o.Popup,maxHeight:e.maxHeight,maxWidth:e.maxWidth,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,width:e.width,minWidth:e.minWidth}}function s(e){const t=(0,r().Fy)();return(0,o().VK)((()=>i({device:t,maxHeight:null==e?void 0:e.maxHeight,maxWidth:null==e?void 0:e.maxWidth,paddingTop:null==e?void 0:e.paddingTop,paddingBottom:null==e?void 0:e.paddingBottom,width:null==e?void 0:e.width,minWidth:null==e?void 0:e.minWidth,tabletBehavior:null==e?void 0:e.tabletBehavior})),[t,null==e?void 0:e.maxHeight,null==e?void 0:e.maxWidth,null==e?void 0:e.paddingTop,null==e?void 0:e.paddingBottom,null==e?void 0:e.width,null==e?void 0:e.minWidth,null==e?void 0:e.tabletBehavior])}},661754:(e,t,n)=>{n.r(t),n.d(t,{BannersRenderer:()=>_t});n(241792);var r=n(667294),o=()=>n(219727),a=()=>n(142735),i=()=>n(696459),s=()=>n(127898),l=()=>n(522411),c=()=>n(589525),d=()=>n(682551),u=()=>n(235629),p=()=>n(548812),m=()=>n(193173),g=()=>n(30795),f=()=>n(479092),h=()=>n(878911),y=()=>n(459815),v=()=>n(897257),b=()=>n(87098),_=()=>n(646574),S=()=>n(832054),x=()=>n(308186),C=()=>n(528918),k=()=>n(497065),I=()=>n(730621),w=()=>n(500174),M=()=>n(876822),j=()=>n(489434),T=n(785893);const B=function(e){var t;const{legacyColor:i}=e,s=(0,o().O7)(),l=(0,a().VK)((()=>M().default.state.currentUserStore),[]),c=(0,a().VK)((()=>null==l?void 0:l.getEmail()),[l]),d="makenotion.com"===(0,n(446866).Gd)(c??""),[u,p]=r.useState("");r.useEffect((()=>{!async function(){try{const e=await(0,n(274879).getCookie)(s,"notion_ghost_preferred_role");p((t=>e??""))}catch(e){console.error(e)}}()}));const m="full"===u?"restricted":"full",g=r.useCallback((async()=>{if(!c)return null;const e=await S().N(s,{email:c,intercomLink:"switch role",preferredLoginRole:m});if("failed"===e.type)C().x(),x().x2(e);else{const{userId:t}=e.data,r=`Success! click "Continue" to enter account for "${c}" in ${I().v[m].text} mode.`,o=e.data.expiryTime?`${r} The user has granted access until ${(0,_().Yx)(e.data.expiryTime,"medium_with_time",n(578292).al)}.`:r;C().x(),x().vC({message:o,showCancel:!1,keepFocus:!0,items:[{label:"Continue",color:"blue",onAccept:()=>{n(406973).O({userId:t,environment:s})}}]})}}),[s,c,m]);if(!c)return null;const f=(0,T.jsxs)(T.Fragment,{children:[`You are currently logged in as ${c}`,(0,T.jsx)("i",{children:u&&d?` (${null===(t=I().v[u])||void 0===t?void 0:t.text} access)`:""}),"."]});let h=[{label:"Back to Admin Console",onClick:()=>{k().c4({environment:s,url:"/__admin"})}},{label:"Logout as user",onClick:()=>{S().B(s)}}];return u&&d&&(h=[{label:`Switch to ${I().v[m].text} mode`,onClick:()=>g()},...h]),(0,T.jsx)(j().j,{label:f,display:"full-width",actions:h,tint:(0,w().X)(i)})};n(670560);var V=()=>n(846550),A=()=>n(506347),L=()=>n(135857),P=()=>n(788860),R=()=>n(707513),F=()=>n(205228);const D=(0,P().vU)({viewTutorial:{id:"pageViewBlock.asanaImporterBanner.tutorialPage",defaultMessage:"View tutorial"},dismissAriaLabel:{id:"ageViewBlock.asanaImporterBanner.dismiss.ariaLabel",defaultMessage:"Dismiss"}});const K=function(e){let{blockStore:t,legacyColor:i}=e;const{tutorial_page:s,number_of_projects:l}=(0,a().VK)((()=>{var e,n;return{tutorial_page:null===(e=t.getFormat())||void 0===e?void 0:e.asana_importer_tutorial_page,number_of_projects:(null===(n=t.getFormat())||void 0===n?void 0:n.asana_importer_number_of_projects)??0}}),[t]),c=(0,o().O7)(),d=((0,V().yK)((e=>({helpCenterButtonStyles:{display:"flex",alignItems:"baseline",justifyContent:"center",alignContent:"center",fontSize:R().JB.UIRegular.desktop,padding:"6px, 0px, 0px, 0px",borderRadius:4,color:e.mediumTextColor,marginTop:5,width:298,height:28,gap:"4px",lineHeight:"18px"},externalLinkIcon:{width:16,height:16,padding:"0.5px, 0px, 0px, 0px"},helpCenterButtonTextStyles:{width:238,height:18,font:"SF Pro",fontWeight:R().Ue.medium,fontSize:R().JB.UIRegular.desktop,color:e.accentColors.uiBlue[600]}})),[]),(0,r.useCallback)((()=>{k().c4({url:(0,L().Z)({pageId:s,pageModel:(0,n(742036).lA)({table:n(396136).iU,id:s}),baseUrl:F().default.domainBaseUrl,pageVisitSource:A().tY.Import}),environment:c})}),[c,s])),u=(0,r.useCallback)((()=>{n(269299).createAndCommit({environment:c,userAction:"userSettingsActions.setDismissedAsanaImporterBanner",canUndo:!0,perform:e=>{n(636340).sW({store:t.getFormatStore(),transaction:e,data:{dismissed_asana_import_banner:!0}})}})}),[t,c]),p=[];s&&p.push({label:(0,T.jsx)(P()._H,{...D.viewTutorial}),onClick:()=>d()}),p.push({label:(0,T.jsx)(P()._H,{id:"pageViewBlock.asanaImporterBanner.dismiss",defaultMessage:"Dismiss"}),onClick:u});const m=(0,r.useMemo)((()=>(0,T.jsx)(P()._H,{id:"pageViewBlock.asanaImporterBanner.tutorial",defaultMessage:"Imported {number_of_projects} Asana {project_or_projects} to Notion",values:{number_of_projects:l,project_or_projects:1===l?"project":"projects"}})),[l]);return(0,T.jsx)(j().j,{label:m,display:"full-width",actions:p,tint:(0,w().X)(i)})};var q=()=>n(454393),E=()=>n(663366),N=()=>n(255933),U=()=>n(568017),H=()=>n(429725),Z=()=>n(826955),O=()=>n(729775),Y=()=>n(943620),W=()=>n(384241);function $(e){const{urlStore:t,titleStore:n}=e,r=(0,o().Fy)(),i=n||t,{icon:s,url:l}=(0,a().VK)((()=>({icon:i.getIcon(),url:(0,H().ZP)({store:t,fullyQualified:!1,pageVisitSource:A().tY.Move})})),[i,t]);return(0,T.jsxs)(O().Z,{href:l,style:{display:"inline-flex"},innerStyle:{display:"inline-flex",alignItems:"baseline"},children:[(0,T.jsx)(Y().Z,{disabled:!0,icon:s,isEmptyPage:!1,size:r.isMobile?18:16,emojiSize:r.isMobile?24:20,style:{marginRight:"0.2em",fill:""},pageIconStyle:{fill:U().ZP.white}}),(0,T.jsx)(W().Z,{store:i,style:{fontWeight:R().Ue.medium}})]})}function z(e){let{movedSourceBlockStore:t,moveTarget:n}=e;return r.useMemo((()=>(0,T.jsx)($,{urlStore:Z().G.createChildStore(t,n.moved_to),titleStore:Z().H2.createChildStore(t,{table:N().bx,id:n.moved_to.spaceId})})),[t,n])}function X(e){let{movedSourceBlockStore:t,moveTarget:n}=e;const r=z({movedSourceBlockStore:t,moveTarget:n});return(0,T.jsx)(P()._H,{defaultMessage:"Moved to {targetSpaceLink}.",id:"pageViewBlock.movedPageBanner.pageMovedMessage",values:{targetSpaceLink:r}})}function J(e){let{movedSourceBlockStore:t,moveTarget:n}=e;const r=z({movedSourceBlockStore:t,moveTarget:n});return(0,T.jsx)(P()._H,{defaultMessage:"{movedAncestorLink} was moved to {targetSpaceLink}.",id:"pageViewBlock.movedPageBanner.ancestorMovedMessage",values:{targetSpaceLink:r,movedAncestorLink:(0,T.jsx)($,{urlStore:t})}})}var Q=()=>n(352230),G=()=>n(466970),ee=()=>n(228772),te=()=>n(314379),ne=()=>n(337968),re=()=>n(395272),oe=()=>n(491174),ae=()=>n(998901),ie=()=>n(529048),se=()=>n(815277),le=()=>n(64742),ce=()=>n(827973),de=()=>n(448419),ue=()=>n(1910),pe=()=>n(198829),me=()=>n(255577),ge=()=>n(967092),fe=()=>n(388284),he=()=>n(146947),ye=()=>n(18902),ve=()=>n(998411),be=()=>n(429892),_e=()=>n(365969),Se=()=>n(176691),xe=()=>n(480089),Ce=()=>n(218181),ke=()=>n(155350),Ie=()=>n(46335);function we(e){const{blockStore:t,intl:n}=e,r=(0,ee().r)(),o=(0,xe().FS)(t),{trashAuthorDisplayName:i,trashTimestamp:s,isMovedToTrashMetadata:l}=(0,Ce().q)({blockStore:t,closestNonAliveAncestorStore:o,intl:n}),c=(0,a().VK)((()=>(0,ye().Tv)(null==r?void 0:r.getModel())),[r]),d=(0,a().VK)((()=>{const e=(0,_e().As)();return(0,ye().KH)({movedToTrashTime:l?s:void 0,deleteFromTrashDelayMs:c,cdrrDeletionEnabledTimestamp:e})}),[l,s,c]);if(d<=Date.now()){const e=(0,be().uP)(c/1e3,n);return(0,T.jsx)(P()._H,{defaultMessage:"This page will be deleted soon since it was moved to the Trash over {retentionWindowCopy} ago",id:"pageViewBlock.trashBanner.message.pendingDeletion",values:{retentionWindowCopy:e}})}const u=(0,Se().IS)(s,{roundDownYears:!0,useWeeks:!0,useLowercase:!0}),p=(0,_().Yx)(s,"medium_with_time",he().locale),m=(0,_e().MP)({type:"daterange",start_date:(0,_().$6)(Date.now()),end_date:(0,_().$6)(d)},(0,ve().r)(),n);return l?(0,T.jsx)(P()._H,{defaultMessage:"{trashAuthorDisplayName} moved this page to Trash {movedToTrashDateComponent}. It will automatically be deleted in {numDaysLeftInTrashComponent}.",id:"pageViewBlock.trashBanner.message.trashMetadata",values:{trashAuthorDisplayName:i,movedToTrashDateComponent:(0,T.jsx)(Ie().Z,{text:u,tooltipText:p,icon:ke().C}),numDaysLeftInTrashComponent:(0,T.jsx)(Ie().Z,{text:m,tooltipText:(0,_().$6)(d),icon:ke().C})}}):(0,T.jsx)(P()._H,{defaultMessage:"{trashAuthorDisplayName} last edited this page {lastEditedDateComponent}. It will automatically be deleted in {numDaysLeftInTrashComponent}.",id:"pageViewBlock.trashBanner.message.lastEdited",values:{trashAuthorDisplayName:i,lastEditedDateComponent:(0,T.jsx)(Ie().Z,{text:u,tooltipText:p,icon:ke().C}),numDaysLeftInTrashComponent:(0,T.jsx)(Ie().Z,{text:m,tooltipText:(0,_().$6)(d),icon:ke().C})}})}function Me(e){var t;let{spaceStore:n,blockStore:r,sourceBlock:i,showNewTrashPageBanner:s}=e;const l=(0,o().O7)(),c=null===(t=l.currentUser)||void 0===t?void 0:t.id,d=(0,o().Fy)(),u=(0,a().VK)((()=>Ve(l,r,n,c)),[l,r,n,c]),p=(0,V().yK)((()=>({banner:{display:"flex",alignItems:"center",justifyContent:"center",...d.isMobile&&{flexWrap:"wrap",paddingTop:8,paddingBottom:8}},button:{...d.isMobile&&{marginTop:8}}})),[d.isMobile]),{message:m,restoreVariant:g}=(0,a().VK)((()=>{const{store:e,moved:t}=i,n=e.id===r.id;return{message:n?(0,T.jsx)(X,{movedSourceBlockStore:e,moveTarget:t}):(0,T.jsx)(J,{movedSourceBlockStore:e,moveTarget:t}),restoreVariant:n?"lastVersion":"currentPage"}}),[r.id,i]);return(0,T.jsxs)("div",{style:p.banner,children:[(0,T.jsx)("div",{children:m}),u&&(0,T.jsx)("div",{style:p.button,children:(0,T.jsx)(Be,{variant:g,blockStore:r,showNewTrashPageBanner:s})})]})}function je(e){var t;const n=(0,o().O7)(),{spaceStore:r}=e,i=(0,a().qz)(void 0,ie().Z),s=(0,V().yK)((()=>({popupMenu:{},iconContainer:{marginLeft:12},dotsIcon:{fill:"currentColor"},itemIcon:{height:18,width:18,fill:"currentColor"}})),[]),l=(0,se().VX)({name:"configurable_deletion_and_retention_settings",spaceId:null==r?void 0:r.id,userId:null===(t=n.currentUser)||void 0===t?void 0:t.id});if(!(0,a().VK)((()=>(null==r?void 0:r.canAdmin())&&l),[r,l]))return null;const c=[{key:"open-settings",render:e=>(0,T.jsx)(ce().Z,{...e,icon:(0,ne().D)(s.itemIcon),title:(0,T.jsx)(P()._H,{id:"pageViewBlock.trashBanner.workspaceOwnerActions.openRetentionSettings.title",defaultMessage:"Deletion and retention settings"}),caption:(0,T.jsx)(P()._H,{id:"pageViewBlock.trashBanner.workspaceOwnerActions.openRetentionSettings.caption",defaultMessage:"Only workspace owners can change this"})}),action:()=>{q().r$({currentTab:"security",subtab:"data_retention"})}}],d={key:"actions",render:e=>(0,T.jsx)(fe().Z,{...e}),items:c};return(0,T.jsx)(de().ZP,{popupType:ge().kQ.Popup,alignmentToOrigin:ae().Alignment.Center,placementToOrigin:ae().Placement.Bottom,style:s.popupMenu,render:()=>(0,T.jsx)(pe().Z,{menuType:Q().o.Popup,children:(0,T.jsx)(me().Z,{type:me().i.Vertical,initialFocus:void 0,sections:[d]})}),buttonPopupStore:i,renderOrigin:e=>(0,T.jsx)(ue().Z,{style:s.iconContainer,iconStyle:s.dotsIcon,ariaLabel:"3 dot menu for actions to apply to a deleted from trash page",icon:te().o,...e})})}function Te(e){let{blockStore:t,showNewTrashPageBanner:n}=e;const i=(0,o().O7)(),s=(0,r.useCallback)((()=>{E().Rn({environment:i,blocks:[t],from:"trash_banner"})}),[i,t]),l=(0,a().VK)((()=>!t.useCrdt()),[t]),c=Ae();return(0,T.jsxs)(r.Fragment,{children:[(0,T.jsx)(Be,{variant:"default",blockStore:t,showNewTrashPageBanner:n}),l&&(0,T.jsx)(le().Z,{style:c.button,onClick:s,icon:n&&(0,re().p)(c.icon),children:n?(0,T.jsx)(P()._H,{defaultMessage:"Delete from Trash",id:"pageViewBlock.trashBanner.deleteFromTrashButton.label"}):(0,T.jsx)(P()._H,{defaultMessage:"Delete permanently",id:"pageViewBlock.trashBanner.deletePermanentlyButton.label"})})]})}function Be(e){let{variant:t,blockStore:n,showNewTrashPageBanner:i}=e;const s=(0,o().O7)(),l=(0,a().VK)((()=>({default:(0,T.jsx)(P()._H,{defaultMessage:"Restore page",id:"pageViewBlock.trashBanner.restoreButton.label"}),lastVersion:(0,T.jsx)(P()._H,{defaultMessage:"Restore last version",id:"pageViewBlock.trashBanner.restoreLastVersionButton.label"}),currentPage:(0,T.jsx)(P()._H,{defaultMessage:"Restore current page",id:"pageViewBlock.trashBanner.restoreCurrentPageButton.label"})}[t])),[t]),c=(0,r.useCallback)((()=>{const{currentSpaceStore:e}=M().default.state;e&&E().DV({environment:s,block:n,spaceId:n.pointer.spaceId||e.id,from:"trash_banner"})}),[n,s]),d=Ae();return(0,T.jsx)(le().Z,{style:d.button,onClick:c,icon:i&&(0,oe().s)(d.icon),children:l})}function Ve(e,t,n,r){const o=(0,se().DE)(e,{name:"configurable_deletion_and_retention_settings",spaceId:null==n?void 0:n.id,userId:r});if(null!=n&&n.canAdmin()&&o)return!0;if(!t.canEdit())return!1;if(!t.isNavigableBlock())return!1;const a=t.getParentStore();return!a||a.canEdit()}function Ae(){return(0,V().yK)((e=>({button:{marginLeft:12},icon:{width:14,height:14,marginRight:6}})),[])}const Le=function(e){var t;let{blockStore:n}=e;const i=(0,o().O7)(),s=null===(t=i.currentUser)||void 0===t?void 0:t.id,l=(0,o().Fy)(),c=(0,P().YB)(),d=(0,V().yK)((()=>({banner:{display:"flex",alignItems:"center",justifyContent:"center",overflow:"visible",whiteSpace:"normal",padding:"8px 4px",...l.isMobile&&{flexWrap:"wrap",width:"100%",paddingTop:8,paddingBottom:8}},helpButton:{marginLeft:4},helpIcon:{fill:"inherit"}})),[l.isMobile]),u=(0,G().E)("cdrr_deletion_enabled"),p=(0,ee().r)(),m=(0,a().VK)((()=>Ve(i,n,p,s)),[i,n,p,s]),g=(0,a().VK)((()=>l.isPhone&&m),[l.isPhone,m]),f=(0,a().VK)((()=>n.getClosestMovedBlock()),[n]),h=u?(0,T.jsx)("span",{children:(0,T.jsx)(we,{blockStore:n,intl:c})}):(0,T.jsx)(P()._H,{defaultMessage:"This page is in Trash. Restore the page to edit it",id:"pageViewBlock.trashBanner.message.cannotEdit"}),y=(0,T.jsx)(P()._H,{defaultMessage:"This page was PERMANENTLY deleted.",id:"pageViewBlock.permanentlyDeleted.message"}),v=(0,a().VK)((()=>F().default.isAdminMode&&n.pathHasDeletedPermission()),[n]);return f?(0,T.jsx)(Me,{spaceStore:p,blockStore:n,sourceBlock:f,showNewTrashPageBanner:u}):g?(0,T.jsx)("div",{style:d.banner,children:(0,T.jsx)(Te,{blockStore:n,showNewTrashPageBanner:u})}):v?(0,T.jsxs)("div",{children:[y,(0,T.jsx)(Be,{variant:"default",blockStore:n,showNewTrashPageBanner:u})]}):m?(0,T.jsxs)(r.Fragment,{children:[(0,T.jsx)("div",{style:d.banner,children:h}),(0,T.jsx)(Te,{blockStore:n,showNewTrashPageBanner:u}),u?(0,T.jsx)(je,{spaceStore:p}):null]}):(0,T.jsx)("div",{style:d.banner,children:h})};var Pe=()=>n(827282);const Re=(0,Pe().CZ)("wifiExclamationMark",{default:{loader:()=>n.e(24892).then(n.bind(n,924892))},small:{loader:()=>n.e(3726).then(n.bind(n,703726))},mini:{loader:()=>n.e(97607).then(n.bind(n,797607))},large:{loader:()=>n.e(23933).then(n.bind(n,723933))}});const Fe=function(e){const{legacyColor:t}=e;return(0,T.jsx)(j().j,{label:(0,T.jsx)(P()._H,{id:"dictationConnectionBanner.message",defaultMessage:"We can't reach our dictation server right now. Please check your connection"}),display:"full-width",actions:[],tint:(0,w().X)(t),iconGroup:Re})};const De=function(e){const{legacyColor:t}=e,o=(0,r.useCallback)((()=>{n(890324).Z.setState({editing:!1,commenting:!0})}),[]);return(0,T.jsx)(j().j,{label:(0,T.jsx)(P()._H,{id:"pageViewBlock.editingPageBanner.status",defaultMessage:"You can now edit this page."}),display:"full-width",actions:[{label:(0,T.jsx)(P()._H,{id:"pageViewBlock.editingPageBanner.stop",defaultMessage:"Done editing"}),onClick:()=>o()}],tint:(0,w().X)(t)})};const Ke=function(e){let{blockStore:t,legacyColor:r}=e;const o=(0,a().VK)((()=>n(844095).Z.state.pageMap[t.id]),[t.id]);if(!o)return null;const i=(0,T.jsx)(P()._H,{defaultMessage:"Imported {importedNumberOfNotes} of {totalNumberOfNotes}",values:{importedNumberOfNotes:o.importedNotes,totalNumberOfNotes:o.totalNotes},id:"pageViewBlock.evernoteBanner.contents"});return(0,T.jsx)(j().j,{label:i,display:"full-width",actions:[],tint:(0,w().X)(r)})};var qe=()=>n(566232);const Ee=function(e){const{legacyColor:t}=e,{mobileNative:r,device:i}=(0,o().O7)(),{osVersion:s}=i,l=(0,V().yK)((()=>({updated:{whiteSpace:"normal",textAlign:"center",flex:"1 auto"}})),[]),c=(0,a().VK)((()=>i.isAndroid&&(0,qe().isLessThanVersion)(s,[7,0])?"Android 7.0":i.isIOS&&(0,qe().isLessThanVersion)(s,[16,0])?"iOS 16.0":void 0),[i.isAndroid,i.isIOS,s]);if(!r||!r.api.openUpdateSettings||!c)return null;const d=(0,T.jsx)(P()._H,{defaultMessage:" This operating system is no longer supported.{br}Please <upgradelink>upgrade to {supportedPlatformVersion} or later.</upgradelink>.",id:"appUpdateListener.mobilePlatformNotSupported.message",values:{br:(0,T.jsx)("br",{}),upgradelink:e=>(0,T.jsx)(n(765513).Z,{onClick:()=>{r.openUpdateSettings()},disableHover:!0,children:e}),supportedPlatformVersion:c}});return(0,T.jsx)(j().j,{label:(0,T.jsx)("div",{style:l.updated,children:d}),display:"full-width",actions:[],tint:(0,w().X)(t)})};const Ne=function(e){const{legacyColor:t}=e;return(0,T.jsx)(j().j,{label:(0,T.jsx)(P()._H,{defaultMessage:"This page is in an archived teamspace.",id:"pageViewBlock.archivedTeamBanner.message"}),display:"full-width",actions:[],tint:(0,w().X)(t)})};var Ue=()=>n(657120),He=()=>n(752127),Ze=()=>n(148126);const Oe=function(e){let{blockStore:t,legacyColor:s}=e;const l=(0,o().O7)(),c=(0,T.jsx)(P()._H,{defaultMessage:"This workspace is in a read-only state while the contents are being duplicated.",id:"pageViewBlock.contentDuplicationInProgress.message"}),d=(0,T.jsx)(P()._H,{defaultMessage:"This workspace's contents have been duplicated. Navigate to the new workspace for edits.",id:"pageViewBlock.contentDuplicationCompleted.message"}),{spaceRequestStatus:u,targetSpaceId:p}=(0,a().VK)((()=>{const e=n(239482).oZ(t);return e&&(0,Ue().nV)(e)?{spaceRequestStatus:e.status,targetSpaceId:e.target_space_id}:{spaceRequestStatus:void 0,targetSpaceId:void 0}}),[t]),m=(0,r.useCallback)((()=>{const e=(0,Ze().UY)("guides.workspaceConsolidation");He().D({environment:l,url:e})}),[l]),g=(0,r.useCallback)((e=>{k().c4({environment:l,url:(0,Ue().BD)({spaceId:e,baseUrl:F().default.domainBaseUrl}),openInNew:"tab"})}),[l]);let f;const h=[{label:(0,T.jsx)(P()._H,{defaultMessage:"Learn more",id:"pageViewBlock.contentDuplication.learnMoreButton.label"}),onClick:()=>m()}];if("started"===u||"failed_with_closed_source"===u)f=c;else if("completed"===u||"pending_deletion"===u)f=d,h.push({label:(0,T.jsx)(P()._H,{defaultMessage:"Visit new workspace",id:"pageViewBlock.contentDuplication.linkToTargetWorkspace.label"}),onClick:()=>g(p)});else{if(!u)return null;(0,i().t1)(u)}return(0,T.jsx)(j().j,{label:f,display:"full-width",actions:h,tint:(0,w().X)(s)})};var Ye=()=>n(580215);function We(){const e=(0,P().YB)(),t=(0,o().O7)(),n=(0,a().VK)((()=>{var e;return null===(e=M().default.state.currentSpaceStore)||void 0===e?void 0:e.getFreezeSettings()}),[]),{freezeStatus:i,minUntilFreeze:s}=(0,Ye().W)(n),l=(0,r.useCallback)((()=>{const e=(0,Ze().UY)("guides.workspaceConsolidation");He().D({environment:t,url:e})}),[t]);if(!n||"disabled"===i||"scheduled"===i)return null;const c=(0,T.jsx)(P()._H,{defaultMessage:"This workspace will be frozen for migration in {timeRemaining}, during which some features may be temporarily unavailable.",id:"workspaceFreeze.banners.scheduled_migration",values:{timeRemaining:s&&s>60?e.formatRelativeTime(Math.floor(s/60),"hour"):e.formatRelativeTime(s??0,"minute")}}),d=(0,T.jsx)(P()._H,{defaultMessage:"This workspace is currently frozen to perform a migration. Changes cannot be saved at this time.",id:"workspaceFreeze.banners.active_migration"}),u=[{label:(0,T.jsx)(P()._H,{defaultMessage:"Learn more",id:"workspaceFreeze.banners.learn_more"}),onClick:()=>l()}];return(0,T.jsx)(j().j,{label:"warning"===i?c:d,display:"full-width",actions:u,tint:(0,w().X)("warning"===i?w().v.Yellow:w().v.Red)})}var $e=()=>n(407391);function ze(e){const{message:t,mobileMessage:n,learnMoreLink:r,tint:a}=e,i=(0,o().Fy)(),s=(0,o().O7)(),l=(0,V().yK)((e=>({messageContainer:{display:"flex",alignItems:"center",minWidth:0,whiteSpace:"nowrap"},updatedHelpContainer:{display:"flex",flex:1,gap:4,alignItems:"center"}})),[]);return(0,T.jsx)(j().j,{label:(0,T.jsx)("div",{style:l.messageContainer,children:i.isMobile?n:t}),display:"full-width",actions:e.actions,onLearnMoreClick:()=>{$e().Fs(s,{from:"collection_template_topbar"}),r&&k().c4({environment:s,url:r,openInNew:"tab"})},tint:a})}const Xe=(0,P().vU)({editInsideButton:{defaultMessage:"<mediumtext>You're editing a template in a button</mediumtext>",id:"pageViewBlock.templatePageBanner.editInsideButton"},editInsideButtonMobile:{defaultMessage:"<mediumtext>Template inside button</mediumtext>",id:"pageViewBlock.templatePageBanner.mobile.editInsideButton"}});const Je=function(e){let{context:t,legacyColor:n}=e;return(0,T.jsx)(ze,{context:t,message:(0,T.jsx)(P()._H,{...Xe.editInsideButton,values:{mediumtext:e=>(0,T.jsx)("span",{children:e})}}),mobileMessage:(0,T.jsx)(P()._H,{...Xe.editInsideButtonMobile,values:{mediumtext:e=>(0,T.jsx)("span",{children:e})}}),tint:(0,w().X)(n)})};var Qe=()=>n(657320),Ge=()=>n(513670),et=()=>n(5485),tt=()=>n(166312),nt=()=>n(680917),rt=()=>n(867601),ot=()=>n(122479),at=()=>n(615634),it=()=>n(764189),st=()=>n(342292);const lt=(0,P().vU)({viewTemplate:{defaultMessage:"<mediumtext>You're viewing a template in</mediumtext> {pageTitleWithIcon}",id:"pageViewBlock.templatePageBanner.viewTemplateLabel"},editTemplate:{defaultMessage:"<mediumtext>You're editing a template in</mediumtext> {pageTitleWithIcon}",id:"pageViewBlock.templatePageBanner.editTemplateLabel"},editTemplateMobile:{defaultMessage:"<mediumtext>Template in</mediumtext> {pageTitleWithIcon}",id:"pageViewBlock.templatePageBanner.mobile.editTemplateLabel"},repeatEvery:{defaultMessage:"Repeat every…",id:"pageViewBlock.templatePageBanner.repeatEveryLabel"}});function ct(e){let{blockStore:t,context:n,disabled:i,legacyColor:s}=e;const l=(0,a().VK)((()=>t.getAssociatedCollectionStore()),[t]),c=(0,a().VK)((()=>{const e=null==l?void 0:l.getParentBlockStore();if(e)return(0,L().Z)({pageId:e.id,pageVisitSource:A().tY.LinkInPage})}),[l]),d=(0,Qe().l)(),u=(0,a().VK)((()=>{if(i)return!1;if(it().n.state)return!1;const e=d&&d.publicEditModeStore.state;if((0,ot().Ix)(e))return lt.viewTemplate;return t.canEdit()?lt.editTemplate:lt.viewTemplate}),[d,i,t]),p=function(e){let{legacyColor:t}=e;return(0,V().yK)((e=>({innerLinkBox:{display:"flex",alignItems:"center"},linkBox:{marginLeft:8,marginRight:8,minWidth:0},linkBoxMobile:{marginLeft:8,marginRight:"auto",minWidth:0},recordTitle:{marginLeft:4,maxWidth:380},recordTitleMobile:{marginLeft:4,marginRight:8},chevron:{width:10,marginLeft:4,fill:st().Zo[(0,w().X)(t)](e)}})),[t])}({legacyColor:s}),m=(0,Ze().UY)("guides.databaseTemplates"),g=(0,a().VK)((()=>null==l?void 0:l.getIcon()),[l]),f=(0,o().O7)(),h=(0,P().YB)(),{isMobile:y}=(0,o().Fy)(),v=(0,a().VK)((()=>{const e=Z().Mz.fromBlockStore(t);if(null!=e&&e.getActionStores())return null!=e&&e.isActive()?e.getRecurrence():void 0}),[t]),b=(0,r.useCallback)((async e=>{const{recurrenceActions:n}=await nt().s.load();e?n.addRecurrence({environment:f,blockStore:t,recurrence:e}):n.deleteRecurrence({environment:f,blockStore:t})}),[f,t]),_=(0,et().k)({recurrence:v,onChange:b,allowDelete:!0}),S=(0,a().VK)((()=>l&&rt().Li({collectionStore:l})),[l]),x=(0,G().E)("automation_generalized_recurrence");if(!l||!c||!u)return null;const C=[];return S&&x&&!y&&C.push({isCustom:!0,render:()=>(0,r.createElement)(de().ZP,{..._,key:"recurrence-editor",popupType:de().Z4.Popup,originGap:4,renderOrigin:e=>(0,T.jsx)(st().tp,{tint:(0,w().X)(s),action:{label:(0,T.jsxs)(T.Fragment,{children:[v?(0,Ge().kC)((0,tt().De)({recurrence:v,intl:h,leadingPhrase:"repeat every"})):h.formatMessage(lt.repeatEvery),(0,at().i)(p.chevron)]}),onClick:e.onClick,iconGroup:void 0}})})}),(0,T.jsx)(ze,{actions:C,learnMoreLink:m,context:n,message:(0,T.jsx)(P()._H,{...u,values:{mediumtext:e=>(0,T.jsx)("span",{children:e}),pageTitleWithIcon:(0,T.jsxs)(O().Z,{href:c,style:p.linkBox,innerStyle:p.innerLinkBox,children:[(0,T.jsx)(Y().Z,{disabled:!0,icon:g,isEmptyPage:!1,size:20}),(0,T.jsx)(W().Z,{style:p.recordTitle,store:l,underline:!0})]})}}),mobileMessage:(0,T.jsx)(P()._H,{...lt.editTemplateMobile,values:{mediumtext:e=>(0,T.jsx)("span",{children:e}),pageTitleWithIcon:(0,T.jsxs)(O().Z,{href:c,style:p.linkBoxMobile,innerStyle:p.innerLinkBox,children:[(0,T.jsx)(Y().Z,{disabled:!0,icon:g,isEmptyPage:!1,size:20}),(0,T.jsx)(W().Z,{style:p.recordTitleMobile,store:l,underline:!0})]})}}),tint:(0,w().X)(s)})}var dt=()=>n(342792),ut=()=>n(661297),pt=()=>n(184495);function mt(e){const{blockId:t,value:n,handleJoinWorkspaceClick:r}=e;if(!n)return null;switch(n.getJoinSpaceMethod()){case"request_to_join":return(0,T.jsx)(pt().Z,{type:"current-actor-to-space-via-block",block:t,flowId:(0,dt().ZP)(),source:"trusted_domain_page",buttonType:"outline"});case"click_to_join":return(0,T.jsx)(ut().Z,{onClick:r,children:(0,T.jsx)(P()._H,{id:"pageViewBlock.trustedDomainPageBanner.clickToJoin",defaultMessage:"Join workspace"})});default:return null}}const gt=function(e){var t,i;const{legacyColor:s}=e,l=(0,a().VK)((()=>{const e=n(658096).default.state.publicPageData;if(e&&e.spaceId&&e.pageId)return{spaceShardedBlockId:{spaceId:e.spaceId,id:e.pageId},spaceName:e.spaceName}}),[]),c=(0,o().O7)(),d=null==l||null===(t=l.spaceShardedBlockId)||void 0===t?void 0:t.spaceId,u=null==l||null===(i=l.spaceShardedBlockId)||void 0===i?void 0:i.id,[p]=(0,n(801812).r5)((async()=>{if(!d)return;return await(0,n(656221).nk)({environment:c,spaceId:d})}),[c,d]),m=(0,a().VK)((()=>{var e;return"resolved"===p.status&&"click_to_join"===(null===(e=p.value)||void 0===e?void 0:e.join_space_method)}),[p]),g=(0,r.useCallback)((async()=>{const{currentUserRootStore:e,currentUserSettingsStore:t}=M().default.state;d&&e&&(await n(224597).j({environment:c,userRootStore:e,spaceId:d,navigate:!0,analyticsFrom:"trusted_domain_page",userSettingsStore:t,redirectSource:"click_to_join_workspace_from_dls",isJoinableTrustedDomainViewer:m}),n(787738).K(c,{spaceId:d,pageId:u,joinSpaceMethod:"click_to_join"}),n(143346).LK(c))}),[c,d,u,m]),f=(0,T.jsx)("div",{style:{gap:"auto",flexDirection:"row",alignItems:"center"},children:(0,T.jsxs)(n(212493).jX,{direction:"row",align:"center",width:"hug",gap:4,children:[(0,T.jsx)(n(661641).q,{styleName:"UIRegular-14px/Medium",children:(0,T.jsx)(P()._H,{id:"pageViewBlock.trustedDomainPageBanner.label",defaultMessage:"You're viewing a shared page in the {spaceName} workspace",values:{spaceName:null==l?void 0:l.spaceName}})}),(0,T.jsx)(n(108714).Z,{href:(0,Ze().UY)("guides.domainManagement"),children:(0,T.jsx)(ue().Z,{icon:n(653457).m,ariaLabel:"Help icon"})}),(null==l?void 0:l.spaceShardedBlockId)&&"resolved"===p.status&&mt({blockId:l.spaceShardedBlockId,value:p.value,handleJoinWorkspaceClick:g})]})});return(0,T.jsx)(j().j,{display:"full-width-no-content",tint:(0,w().X)(s),content:f})};var ft=()=>n(18281);const ht=function(e){const{legacyColor:t}=e,r=(0,o().O7)(),i=(0,a().VK)((()=>r.device.isMobile&&!r.device.isTablet),[r.device]),s=(0,a().VK)((()=>{const e="personal"===ft().M9(r),t=v().subscriptionDataStoreInstance.state,o=ft().GJ(t);return!((0,n(814139).S$)({environment:r})&&e&&!o)}),[r]),l=(0,T.jsx)(P()._H,{id:"uploadLimitExceededBanner.message",defaultMessage:"{shouldShowShortMessage, select, true {Your file is over the {maxFreeAccountFileSize} MB limit} other {Your file is over the {maxFreeAccountFileSize} MB limit of the Free plan}}",values:{shouldShowShortMessage:i,maxFreeAccountFileSize:n(109757).K_}}),c=(0,T.jsx)(P()._H,{id:"uploadLimitExceededBanner.upgradeButton.label",defaultMessage:"{shouldShowShortMessage, select, true {Upgrade} other {Upgrade for unlimited uploads}}",values:{shouldShowShortMessage:i}}),d=async()=>{await n(965014).y(r,{from:"upload_limit_banner",upsell:{type:"product",product:ft().M9(r)||"plus",limit:{type:"none"}}})};return(0,T.jsx)(j().j,{label:l,display:"full-width",actions:s?[{label:c,onClick:()=>d()}]:[],tint:(0,w().X)(t)})};var yt=()=>n(610146);const vt=(0,Pe().IU)("mobileNewFeatures",{viewBox:"0 0 26 26",svg:(0,T.jsx)("path",{d:"M12.3984 5.47754C12.5273 5.47754 12.5918 5.40234 12.624 5.28418C12.9463 3.49023 12.9355 3.44727 14.8047 3.09277C14.9229 3.07129 15.0088 2.99609 15.0088 2.86719C15.0088 2.73828 14.9229 2.66309 14.8047 2.6416C12.9355 2.26562 13 2.22266 12.624 0.450195C12.5918 0.332031 12.5273 0.256836 12.3984 0.256836C12.2695 0.256836 12.1943 0.332031 12.1729 0.450195C11.7969 2.22266 11.8613 2.26562 9.99219 2.6416C9.86328 2.66309 9.78809 2.73828 9.78809 2.86719C9.78809 2.99609 9.86328 3.07129 9.99219 3.09277C11.8613 3.46875 11.8398 3.49023 12.1729 5.28418C12.1943 5.40234 12.2695 5.47754 12.3984 5.47754ZM7.19922 12.8682C7.40332 12.8682 7.54297 12.7393 7.56445 12.5459C7.95117 9.67773 8.04785 9.67773 11.0127 9.1084C11.1953 9.07617 11.335 8.94727 11.335 8.74316C11.335 8.5498 11.1953 8.41016 11.0127 8.37793C8.04785 7.96973 7.94043 7.87305 7.56445 4.95117C7.54297 4.75781 7.40332 4.61816 7.19922 4.61816C7.00586 4.61816 6.86621 4.75781 6.83398 4.96191C6.49023 7.84082 6.3291 7.83008 3.38574 8.37793C3.20312 8.4209 3.06348 8.5498 3.06348 8.74316C3.06348 8.95801 3.20312 9.07617 3.42871 9.1084C6.35059 9.58105 6.49023 9.65625 6.83398 12.5244C6.86621 12.7393 7.00586 12.8682 7.19922 12.8682ZM14.4824 24.7598C14.7617 24.7598 14.9658 24.5557 15.0088 24.2656C15.7715 18.3789 16.6094 17.4873 22.4316 16.8428C22.7324 16.8105 22.9365 16.585 22.9365 16.3057C22.9365 16.0264 22.7324 15.8115 22.4316 15.7686C16.6094 15.124 15.7715 14.2324 15.0088 8.3457C14.9658 8.05566 14.7617 7.8623 14.4824 7.8623C14.2031 7.8623 13.999 8.05566 13.9561 8.3457C13.1826 14.2324 12.3555 15.124 6.5332 15.7686C6.23242 15.8115 6.02832 16.0264 6.02832 16.3057C6.02832 16.585 6.23242 16.8105 6.5332 16.8428C12.3447 17.6055 13.1504 18.3896 13.9561 24.2656C13.999 24.5557 14.2031 24.7598 14.4824 24.7598Z"})});const bt=function(e){const{onClick:t,legacyColor:n}=e,r=(0,o().O7)(),{isMobile:a}=r.device,i=(0,V().yK)((()=>({icon:{width:22,marginRight:8},mobileIcon:{width:26,marginRight:12},navigateReleaseAction:{minWidth:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},mobileButton:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"flex-start"},button:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}})),[]),l=s().p9?(0,T.jsxs)(T.Fragment,{children:[vt(a?i.mobileIcon:i.icon),(0,T.jsx)("div",{style:i.navigateReleaseAction,children:(0,T.jsx)(P()._H,{defaultMessage:"Update and see what's new",id:"updateBanner.updateAvailableBanner.message"})})]}):(0,T.jsx)("div",{children:a?(0,T.jsx)(P()._H,{id:"updateBanner.updateMessage.noRedirectMobile",defaultMessage:"Tap here to update to the latest version"}):(0,T.jsx)(P()._H,{id:"updateBanner.updateMessage.noRedirect",defaultMessage:"Click here to update to the latest version"})});return(0,T.jsx)(j().j,{label:void 0,display:"full-width",actions:[{label:l,onClick:e=>t(e)}],tint:(0,w().X)(n)})};function _t(e){let{isInPeekRenderer:t,arbitraryRenderBefore:n,banners:r,isMobile:i}=e;const s=(0,o().O7)(),l=(0,a().VK)((()=>(0,c().ll)(s,t)),[s,t]);return(0,T.jsxs)("div",{style:{width:`calc(100% - ${l}px)`,userSelect:"none"},children:[n,r.map(((e,t,n)=>(0,T.jsx)(St,{banner:e,index:t,array:n,isMobile:i},e.id)))]})}function St(e){let{banner:t,index:n,array:r,isMobile:c}=e;const _=(0,o().O7)(),S=(0,a().Kw)(v().subscriptionDataStoreInstance),x=(0,g().V)(S),{styleKey:C,contentKey:k}=t,I=r.length>1&&n!==r.length-1,w=(0,a().VK)((()=>(0,p().vT)(x)),[x]);switch(k){case"russian_sanctions":return(0,T.jsx)(y().I,{});case"over_free_block_limit":return w?(0,T.jsx)(T.Fragment,{}):(0,T.jsx)(u().default,{});case"editing_page":return(0,T.jsx)(De,{legacyColor:C});case"subscription_trial_add_payment_method":return(0,T.jsx)(l().a,{legacyColor:C});case"upload_limit_exceeded":return(0,T.jsx)(ht,{legacyColor:C});case"admin_mode":return(0,T.jsx)(B,{legacyColor:C});case"subscription_uncollectible":return(0,T.jsx)(f().T,{legacyColor:C});case"billing_subscription_status":return(0,T.jsx)(m().J,{legacyColor:C});case"test_clock":return(0,T.jsx)(h().U,{legacyColor:C});case"space_content_duplication":return(0,T.jsx)(Oe,{blockStore:t.blockStore,legacyColor:C});case"space_freeze":return(0,T.jsx)(We,{});case"minor_app_update":return(0,T.jsx)(bt,{onClick:()=>s().mK(_),legacyColor:C});case"mobile_platform_unsupported":return(0,T.jsx)(Ee,{legacyColor:C});case"deleted_or_moved_page":return(0,T.jsx)(yt().Z,{styleKey:C,shouldUseDivider:I,isMobile:c,children:(0,T.jsx)(Le,{blockStore:t.blockStore})});case"page_in_archived_team":return(0,T.jsx)(Ne,{legacyColor:C});case"importing_evernote":return(0,T.jsx)(Ke,{blockStore:t.blockStore,legacyColor:C});case"template_in_page":return(0,T.jsx)(ct,{blockStore:t.blockStore,context:t.context,disabled:t.disabled,legacyColor:C});case"template_in_button":return(0,T.jsx)(Je,{context:t.context,legacyColor:C});case"asana_importer_banner":return(0,T.jsx)(K,{blockStore:t.blockStore,legacyColor:C});case"site":return(0,T.jsx)(d().Z,{blockStore:t.blockStore,legacyColor:C});case"dictation_connection":return(0,T.jsx)(Fe,{legacyColor:C});case"trusted_domain_page":return(0,T.jsx)(gt,{legacyColor:C});case"translate":return(0,T.jsx)(b().nj,{blockStore:t.blockStore,legacyColor:C});case"logged_out_app_banner":return null;default:(0,i().t1)(k)}}},296034:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(667294),o=n(785893);const a=function(e){let{firstDayOfWeek:t,value:a,selectValue:i=!0,onChange:s,onFocus:l,onBlur:c,disabledDays:d}=e;const u=(0,r.useMemo)((()=>new Date(a)),[a]),[p,m]=(0,r.useState)(u),g=(0,r.useRef)(a);(0,r.useLayoutEffect)((()=>{g.current!==a&&(m(new Date(a)),g.current=a)}),[a]);const f=(0,r.useCallback)(((e,t,n)=>{s(e.getTime())}),[s]);return(0,o.jsx)(n(933696).y,{locale:n(146947).locale,className:"notion-calendar-picker",numberOfMonths:1,weekStartsOn:t,modifiers:i?{value:u}:{},showOutsideDays:!0,fixedWeeks:!0,onDayClick:f,onMonthSelected:m,disabled:d,month:p,onDayBlur:c,onDayFocus:l})}},46335:(e,t,n)=>{n.d(t,{Z:()=>l});n(667294);var r=()=>n(846550),o=()=>n(707513),a=()=>n(998901),i=()=>n(654133),s=n(785893);function l(e){let{text:t,tooltipText:n,icon:l}=e;const c=(0,r().yK)((e=>({icon:{height:"1em",width:"1em",marginRight:"0.25em",fill:e.mediumIconColor,marginBottom:"0.1em"},tooltip:{background:e.contentBackground,boxShadow:e.lightBoxShadow},container:{display:"flex",alignItems:"center",fontWeight:o().Ue.regular,color:e.mediumTextColor,fontSize:o().JB.UISmall.desktop,textAlign:"center"},text:{display:"inline"}})),[]);return(0,s.jsx)(i().Z,{style:c.tooltip,render:e=>(0,s.jsx)("div",{style:c.text,...e,children:t}),renderTooltip:()=>(0,s.jsxs)("div",{style:c.container,children:[l(c.icon),(0,s.jsx)("div",{children:n})]}),alignment:a().Alignment.Start,placement:a().Placement.Bottom})}},184495:(e,t,n)=>{n.d(t,{Z:()=>A});var r=n(667294),o=()=>n(219727),a=()=>n(142735),i=()=>n(263184),s=()=>n(788860),l=()=>n(568017),c=()=>n(696459),d=()=>n(707513),u=()=>n(438793),p=()=>n(912732),m=()=>n(787738),g=()=>n(824462),f=()=>n(443269),h=()=>n(352230),y=()=>n(876822),v=()=>n(697623),b=()=>n(154439),_=()=>n(206352),S=()=>n(291198),x=()=>n(198829),C=()=>n(661297),k=()=>n(906651),I=n(785893);const w={marginBottom:10},M={...w,width:"100%",height:"100%",padding:10,alignItems:"top",borderRadius:0},j=(0,s().vU)({requestAccessMessagePlaceholder:{defaultMessage:"Message (optional)",id:"requestAccessForm.messageInput.placeholder"},rateLimitError:{defaultMessage:"You have recently requested access to this page.",id:"requestAccessForm.errorMessage.rateLimit"},currentUserNotFound:{defaultMessage:"Current user not found.",id:"requestAccessForm.errorMessage.currentUserNotFound"}});function T(){return(0,I.jsx)(s()._H,{defaultMessage:"Cancel",id:"requestAccessForm.cancelButton.label"})}const B=i().default.createClass(0,{name:"RequestAttemptStore"}),V=i().default.createClass(void 0,{name:"MessageStore"});const A=function(e){const t=(0,o().O7)(),i=(0,o().MO)(),l=(0,a().qz)(void 0,n(529048).Z),c=(0,a().qz)(void 0,V),p=(0,a().qz)(void 0,B),g=(0,r.useCallback)((()=>R(l)),[l]),f=(0,r.useCallback)((()=>(0,I.jsx)(D,{...e,requestAttemptStore:p,messageStore:c,buttonPopupStore:l})),[e,p,c,l]),h=(0,a().VK)((()=>p.state>0),[p]),y=(0,a().VK)((()=>l.state.open),[l]);if("current-actor-to-block"===e.type)return(0,I.jsx)(K,{type:"page",block:e.block,flowId:e.flowId,buttonType:e.buttonType});if("current-actor-to-collection"===e.type)return(0,I.jsx)(K,{type:"collection",collection:e.collection,flowId:e.flowId,buttonType:e.buttonType});const v="primary"===e.buttonType?k().Z:C().Z;return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(v,{isLarge:!0,disabled:h,onClick:()=>{var n,r;return function(e,t){const{environment:n,flowId:r,type:o,source:a,spaceId:i,pageId:s}=e;"trusted_domain_page"===a&&i&&m().K(n,{spaceId:i,pageId:s,joinSpaceMethod:"request_to_join"});"current-actor-to-block"===o?u().zX(n,{button_name:"request-access",flow_id:r,request_access_type:"page"}):"current-actor-to-space-via-team"===o&&u().zX(n,{button_name:"request-access",flow_id:r,request_access_type:"team"});t.setState({open:!0})}({environment:t,flowId:e.flowId,type:e.type,source:e.source,pageId:null===(n=e.block)||void 0===n?void 0:n.id,spaceId:null===(r=e.block)||void 0===r?void 0:r.spaceId},l)},style:"outline"===e.buttonType?{fontWeight:d().Ue.semibold}:{},children:h?(0,I.jsx)(s()._H,{id:"fullPageError.requestAccessButton.requested",defaultMessage:"Requested access"}):q(e.type)}),i?(0,I.jsx)(n(967092).ZP,{popupType:n(104088).k.SlideUp,open:y,render:f}):(0,I.jsx)(n(708518).Z,{open:y,onDismiss:g,render:f})]})};function L(e){let{result:t}=e;return t&&t.error?(0,I.jsx)("div",{style:{color:l().ZP.redWithAlpha(1),textAlign:"center",width:"100%",marginBottom:16},children:t.error}):null}function P(e){e.update((e=>e+1))}function R(e){return e.setState({open:!1})}function F(e){let{error:t,result:n,ready:i,requestAttemptStore:l,messageStore:c,type:u}=e;const p=(0,s().YB)(),m=(0,o().MO)(),g=(0,r.useCallback)((()=>P(l)),[l]),f=(0,r.useCallback)((e=>function(e,t){t.setState(e.target.value)}(e,c)),[c]),h=(0,a().VK)((()=>Boolean(0===l.state||i&&n&&n.error)),[l,i,n]),y=(0,a().VK)((()=>c.state||""),[c]);return(0,I.jsxs)(I.Fragment,{children:[!m&&(0,I.jsx)("div",{style:{fontSize:16,fontWeight:d().Ue.semibold,marginBottom:16},children:q(u)}),(0,I.jsx)(S().Z,{format:m?S().B.Transparent:void 0,textarea:!0,value:y,onChange:f,disabled:!h,placeholder:p.formatMessage(j.requestAccessMessagePlaceholder),style:{...m?{...M,padding:"16px"}:{...w,marginBottom:16,padding:"8px 12px",alignItems:"flex-start"}}}),!m&&(0,I.jsx)(k().Z,{isLarge:!0,disabled:!h,onClick:g,style:w,children:(0,I.jsx)(s()._H,{defaultMessage:"Send request",id:"requestAccessForm.sendRequestButton.label"})}),(0,I.jsx)(L,{result:n})]})}function D(e){const{requestAttemptStore:t,messageStore:n,buttonPopupStore:i}=e,l=(0,o().O7)(),d=(0,o().MO)(),u=(0,s().YB)(),m=(0,r.useCallback)(((r,o,a)=>(0,I.jsx)(F,{requestAttemptStore:t,messageStore:n,error:r,result:o,ready:a,type:e.type})),[t,n,e.type]),v=(0,a().VK)((()=>{var e;return null===(e=y().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),S=(0,r.useCallback)((t=>async function(e){const{messageStore:t,buttonPopupStore:n,type:r,teamId:o,requestAttempt:a,environment:i,currentUserId:s,intl:l,flowId:d}=e;if(0===a)return;const u=t.state,m=await async function(){if("current-actor-to-block"===r)return g().callApi({eventName:"requestAccess",environment:i,data:{type:"current-actor-to-block",block:e.block,message:u}});if("current-actor-to-collection"===r)return g().callApi({eventName:"requestAccess",environment:i,data:{type:"current-actor-to-collection",collection:e.collection,message:u}});if("current-actor-to-space-via-team"===r)return g().callApi({eventName:"requestAccess",environment:i,data:{type:"current-actor-to-space-via-team",teamId:o,message:u}});if("current-actor-to-space-via-block"===r){if(!s)return;return g().callApi({eventName:"requestAccess",environment:i,data:{type:"actor-to-space",spaceId:e.block.spaceId,message:u,forActorId:s,attributes:{add_permissions_on_approval:!1,origin_type:"trusted_domain_page"}}})}}();return m?"success"!==m.type?"UserRateLimitResponse"===(null===(h=m.body)||void 0===h?void 0:h.name)?{error:l.formatMessage(j.rateLimitError)}:{error:(0,f().wf)(l,m)}:("current-actor-to-block"===r?p().dU(i,{request_access_type:"page",flow_id:d,requestId:m.data.requestId}):"current-actor-to-space-via-team"===r?p().dU(i,{request_access_type:"team",flow_id:d}):"current-actor-to-space-via-block"===r?p().dU(i,{request_access_type:"space",flow_id:d,source:"trusted_domain_page"}):"current-actor-to-collection"===r?p().dU(i,{request_access_type:"collection",flow_id:d,requestId:m.data.requestId}):(0,c().t1)(r),n.reset(),{value:!0}):{error:l.formatMessage(j.currentUserNotFound)};var h}({...e,requestAttempt:t,environment:l,intl:u,currentUserId:v})),[l,u,e,v]),k=(0,r.useCallback)((()=>P(t)),[t]),w=(0,r.useCallback)((()=>R(i)),[i]),M=(0,a().Kw)(t);return d?(0,I.jsx)(x().Z,{menuType:h().o.Modal,whiteBackground:!0,title:q(e.type),left:T(),onClickLeft:w,right:(0,I.jsx)(s()._H,{id:"requestAccessForm.mobileSend.label",defaultMessage:"Send"}),onClickRight:k,children:(0,I.jsx)(_().Z,{debugName:"RequestAccessForm",capture:!0,children:(0,I.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"stretch",alignItems:"stretch",width:"100%",height:"100%"},children:(0,I.jsx)(b().Z,{request:M,performRequest:S,render:m})})})}):(0,I.jsx)(_().Z,{debugName:"RequestAccessForm",capture:!0,children:(0,I.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-evently",alignItems:"stretch",padding:"20px 28px 24px",width:"340px"},children:[(0,I.jsx)(b().Z,{request:M,performRequest:S,render:m}),(0,I.jsx)(C().Z,{onClick:w,children:T()})]})})}function K(e){const{type:t,flowId:n,buttonType:i}=e,l=(0,o().O7)(),d="outline"===i?C().Z:k().Z,[u,m]=(0,r.useState)(!1),[f,h]=(0,r.useState)(!1),y={attributes:{add_permissions_on_approval:!1,role:(0,a().VK)((()=>(0,v().QM)()),[])?"reader":"read_and_write"},message:void 0};let b;"page"===t?b={...y,type:"current-actor-to-block",block:{id:e.block.id,spaceId:e.block.spaceId}}:"collection"===t?b={...y,type:"current-actor-to-collection",collection:{id:e.collection.id,spaceId:e.collection.spaceId}}:(0,c().t1)(t);const _=(0,r.useCallback)((async()=>{var e;const r=await g().callApi({eventName:"requestAccess",environment:l,data:b});"success"===r.type&&r.data.request?(m(!0),p().dU(l,{request_access_type:t,previous_access_level:"none",requested_access_level:"read_and_write",flow_id:n,requestId:r.data.requestId})):"failed"===r.type&&"UserRateLimitResponse"===(null===(e=r.body)||void 0===e?void 0:e.name)&&h(!0)}),[l,b,t,n]);return(0,I.jsx)(d,{isLarge:!0,disabled:u||f,disabledFeedback:u||f,onClick:_,children:u?(0,I.jsx)(s()._H,{id:"fullPageError.requestAccessButton.edit.Requested",defaultMessage:"Requested access"}):f?(0,I.jsx)(s()._H,{id:"fullPageError.requestAccessButton.edit.TryAgain",defaultMessage:"Try again later"}):q("page"===t?"current-actor-to-block":"current-actor-to-collection")})}function q(e){return"current-actor-to-space-via-block"===e?(0,I.jsx)(s()._H,{defaultMessage:"Request membership",id:"requestAccessForm.requestAccessToSpaceButton.title"}):(0,I.jsx)(s()._H,{defaultMessage:"Request access",id:"requestAccessForm.requestAccessButton.title"})}},449866:(e,t,n)=>{n.d(t,{A:()=>a});var r=()=>n(677559);const o=new(r().Ss)("invoice",(async()=>await n.e(15149).then(n.bind(n,959320)))),a=(0,r().kF)(o,(e=>e.Invoice))},933696:(e,t,n)=>{n.d(t,{y:()=>a});var r=()=>n(677559);const o=new(r().Ss)("react-day-picker",(async()=>await Promise.all([n.e(59897),n.e(81369)]).then(n.bind(n,712627)))),a=(0,r().kF)(o,(e=>e.default))},680917:(e,t,n)=>{n.d(t,{q:()=>a,s:()=>o});var r=()=>n(677559);const o=new(r().Ss)("recurrence",(async()=>{const[e,t,{RecurrenceConfigMenu:r}]=await Promise.all([Promise.all([n.e(62743),n.e(71896),n.e(49396),n.e(91253),n.e(5485),n.e(90653)]).then(n.bind(n,857205)),Promise.all([n.e(62743),n.e(71896),n.e(49396),n.e(91253),n.e(5485),n.e(90653)]).then(n.bind(n,157955)),Promise.all([n.e(62743),n.e(71896),n.e(49396),n.e(91253),n.e(5485),n.e(90653)]).then(n.bind(n,788171))]);return{recurrenceActions:e,recurrenceHelpers:t,RecurrenceConfigMenu:r}})),a=(0,r().iS)(o,(e=>e.RecurrenceConfigMenu))},867601:(e,t,n)=>{n.d(t,{Cf:()=>F,EF:()=>L,JO:()=>k,Li:()=>w,cB:()=>A,i1:()=>M,pw:()=>P,qM:()=>j,qk:()=>C,rU:()=>V,sA:()=>R,sM:()=>B,vM:()=>T,wB:()=>I});n(821057),n(267602),n(916054),n(653476),n(241792),n(228244);var r=n.n(n(443261)),o=()=>n(912203),a=()=>n(473304),i=()=>n(455947),s=()=>n(226413),l=()=>n(871379),c=()=>n(177634),d=()=>n(956057),u=()=>n(528514),p=()=>n(752778),m=()=>n(955620),g=()=>n(513670),f=()=>n(855741),h=()=>n(696459),y=()=>n(960597),v=()=>n(749826),b=()=>n(826955),_=()=>n(815277),S=()=>n(270315),x=()=>n(122479);function C(e){const{automationStore:t,collectionStore:n,typecheckResult:r}=e,a=n.getSchema(),i=t.getKeyStore("properties").getKeyStore("name").getValue();if(null==i||!i.trim())return!1;if(!(0,o().Of)({automationTrigger:t.getTrigger(),collectionSchema:a}))return!1;const s=t.getActionStores().filter((e=>e.isDefined()));return 0!==s.length&&s.every((e=>k({actionStore:e,collectionStore:n,typecheckResult:r})))}function k(e){const{actionStore:t,collectionStore:n,typecheckResult:r}=e;if((0,y().pM)(r,t.id).length>0)return!1;if(t.isType("slack_notification"))return(0,h().$K)(t.getConfigStore().getKeyStore("external_bot_id").getValue())&&(0,h().$K)(t.getConfigStore().getKeyStore("target").getValue());if(t.isType("send_gmail_notification")){const e=t.getConfigStore(),n=e.getKeyStore("to").getValue(),r=e.getKeyStore("email_subject").getValue(),o=e.getKeyStore("email_body").getValue();return!(!r||!o||(0,m().PgY)(r.value)||(0,m().PgY)(o.value))&&!(!(n&&n.value&&n.value.value)||g().xb(n.value.value))}if(t.isType("update_pages")){const e=t.getConfigStore().getKeyStore("target").getValue(),a=t.getConfigStore().getKeyStore("properties").getValue()??[];if(!(0,h().$K)(e)||0===a.length)return!1;if("collection"===e.type){const t=b().NW.createChildStore(n,e.collection).getSchema();if(a.some((e=>(0,o().LF)({property:e,collectionSchema:t})||(0,o().Jy)({collectionSchema:t,property:e,type:"action"}))))return!1}else if("variable"===e.type){const i=(0,c().MY)(e.id);if("global"===i.source&&"button_page"===i.global){const e=n.getSchema();if(a.some((t=>(0,o().LF)({property:t,collectionSchema:e})||(0,o().Jy)({collectionSchema:e,property:t,type:"action"}))))return!1}else{if(f().x.isFail(r))return!1;const n=(0,c().vx)(r.value.valueTypes,e.id),i=n?I(n,t):void 0;if(!i)return!1;const s=i.getSchema();if(a.some((e=>(0,o().LF)({property:e,collectionSchema:s})||(0,o().Jy)({collectionSchema:s,property:e,type:"action"}))))return!1}}else{if("page"===e.type)return!1;(0,h().t1)(e)}return!0}if(t.isType("create_page")){const e=t.getConfigStore().getKeyStore("collection").getValue();if(!(0,h().$K)(e))return!1;const r=b().NW.createChildStore(n,e).getSchema();return!(t.getConfigStore().getKeyStore("properties").getValue()??[]).some((e=>(0,o().LF)({property:e,collectionSchema:r})||(0,o().Jy)({collectionSchema:r,property:e,type:"action"})))}if(t.isType("send_in_app_notification")){const e=t.getConfigStore(),n=e.getKeyStore("target").getValue(),r=e.getKeyStore("notification_message").getValue();if(!n||!r||(0,m().PgY)(r.value))return!1;switch(n.type){case"property":if(!n.propertyId||!n.collectionPointer)return!1;break;case"formula":if(!n.value||!n.value.value||g().xb(n.value.value))return!1}return!0}if(t.isType("define_variables"))return!0;if(t.isType("http_request"))return!0;if(t.isType("publish_site")){const e=t.getConfigStore().getKeyStore("target").getValue();return!!(0,h().$K)(e)}throw new Error(`isActionStoreComplete not implemented for ${t.getType()}`)}function I(e,t){let n;return"block"===e.type.type&&e.type.collection?n=b().NW.createChildStore(t,e.type.collection):"array"===e.type.type&&"block"===e.type.of.type&&e.type.of.collection&&(n=b().NW.createChildStore(t,e.type.of.collection)),n}function w(e){const{collectionStore:t}=e;if(!t||(0,x().EY)(t)||(0,x().Aw)(t))return!1;const n=(0,_().DE)(t.environment,{name:"premium_automations",spaceId:t.getSpaceId(),userId:t.userId});if((t.getFormat().automation_ids??[]).length>=a().ss&&!n)return!1;const r=t.pointer,o=t.getSpaceId();return(0,l().IC)({targetTriggerType:"event",targetParentPointer:r,targetSpaceId:o}).every((e=>{let{pointer:n,minimumRequiredRole:r}=e;const o=t.getRecordRole(n);return!!o&&(0,u().yY)(o,r)}))}function M(e){const{automationStore:t,actionStores:n,collectionStore:r}=e,o=t.getParentStore();if(!o||(0,x().EY)(o)||(0,x().Aw)(r))return!1;const a=t.getMinimumFieldsForPermissions();if(!a)return!1;if(!n.every((e=>e.isDefined())))return!1;const i=n.some((e=>!e.isType("slack_notification")));if(!(0,_().DE)(r.environment,{name:"premium_automations",spaceId:r.getSpaceId(),userId:r.userId})&&i)return!1;return(0,l().fz)({automationValue:a,actionValues:n.map((e=>({config:e.getConfig(),type:e.getType()})))}).every((e=>{let{pointer:n,minimumRequiredRole:r}=e;const o=t.getRecordRole(n);return!!o&&(0,u().yY)(o,r)}))}function j(e){const{automationStore:t,collectionStore:n}=e,r=t.getParentStore();if(!r||(0,x().EY)(r)||(0,x().Aw)(n))return!1;const o=t.getMinimumFieldsForPermissions();if(!o)return!1;return(0,l().bM)(o).every((e=>{let{pointer:n,minimumRequiredRole:r}=e;const o=t.getRecordRole(n);return!!o&&(0,u().yY)(o,r)}))}function T(e){const{automationStore:t,collectionStore:n}=e;if(!t.isTriggerType("event")&&!t.isTriggerType("notification_event"))return!1;const r=t.getEventConfiguration();if(!r||void 0===r.source||r.source.type===p().vF||"filter"===r.source.type)return!1;const o=b().Xr.createChildStore(n,r.source.pointer);return function(e){const t=V(e),n=B(e);return(0,h().$K)(t)||(0,h().$K)(n)}({collectionSchema:n.getSchema(),collectionViewStore:o})}function B(e){var t;if(!v().default.checkGate({gateName:"collections_xws"}))return;const{collectionViewStore:n,collectionSchema:r}=e,o=n.getPropertyFiltersStore().getValue()??[],a=null===(t=n.getQuery(r))||void 0===t?void 0:t.filter,l={operator:"and",filters:(0,i().OH)({propertyFilters:o,combinatorFilter:a,schema:r})},c=(0,i().SH)(l,(e=>{if((0,i().aN)(e)){const t=r[e.property];return!!t&&(0,s().W2)(n.getSpaceId(),t,r)}return!1}));return c&&(0,i().aN)(c)?c.property:void 0}function V(e){var t;const{collectionViewStore:n,collectionSchema:r}=e,a=n.getPropertyFiltersStore().getValue()??[],s=null===(t=n.getQuery(r))||void 0===t?void 0:t.filter,l={operator:"and",filters:(0,i().OH)({propertyFilters:a,combinatorFilter:s,schema:r})},c=(0,i().SH)(l,(e=>{if((0,i().aN)(e)){const t=r[e.property];return!!t&&!(0,o().TX)(t)}return!1}));if(c)return(0,i().aN)(c)?c.property:(0,i().Mm)(c)?c.timestamp:void 0}function A(e){if("collectionTypedView"===e.contextType)return!1;const t=e.collectionStore();return!!t&&(!(t.isSyncedCollection()&&!v().default.checkGate({gateName:"support_synced_database_automations"}))&&void 0===e.viewsModuleContextStore.state)}function L(e){const{collectionSchema:t,propertyIds:n,searchTerm:o}=e;if(!o)return n.slice(0);const a=new Map,i=n.map((e=>{const n=t[e],r=n?`${n.name} ${S().SO[n.type]}`:"";return a.set(e,r),r})),s=r().filter(o,i).map((e=>{let{original:t}=e;return t}));return n.filter((e=>s.includes(a.get(e)??"")))}function P(e){return{pagesAdded:!1,pagePropertiesEdited:{type:"none"},source:{pointer:e.getSpaceShardedPointer(),type:p().vF}}}function R(e){const{automationId:t,automationName:n,collectionStore:r,userId:o}=e;return function(e){const{actionIds:t,automationId:n,collectionStore:r,eventConfiguration:o,lastEditedTime:a,properties:i,userId:s}=e,l=Date.now();return{action_ids:t,alive:!0,created_by_id:s,created_by_table:"notion_user",created_time:l,id:n,last_edited_by_id:s,last_edited_by_table:"notion_user",last_edited_time:a??l,parent_id:r.id,parent_table:p().vF,properties:i??{},space_id:r.getSpaceId(),status:"active",trigger:{event:o,id:d().Il(),type:"event"},version:1}}({actionIds:[],automationId:t,collectionStore:r,eventConfiguration:P(r),properties:{name:n},userId:o})}function F(e){const{tab:t}=e;return"automationSettings"===(null==t?void 0:t.type)||"automationCreateSettings"===(null==t?void 0:t.type)||"automationEditSettings"===(null==t?void 0:t.type)}},365969:(e,t,n)=>{n.d(t,{As:()=>l,BQ:()=>c,MP:()=>u,tX:()=>d});var r=()=>n(142735),o=()=>n(18902),a=()=>n(646574),i=()=>n(874459),s=()=>n(749826);function l(){return s().default.getConfigKey("permanently_delete_tree_queue_task_override","cdrr_enabled_timestamp_override")??o().yB}function c(){return(0,r().VK)((()=>{const e=l();return(0,i().kT)({date:e})}),[])}function d(){return(0,r().VK)((()=>l()),[])}function u(e,t,n){const r=(0,i().NK)(e,t);if((0,i().qw)(r)){const e=r.end.diff(r.start),t=e.as("year");if(t>=1)return(0,a().IV)({years:Math.round(t)},n);const o=e.as("days");if(o>=1&&o<=45)return(0,a().IV)({days:Math.round(o)},n);const i=e.as("months");if(i>=1)return(0,a().IV)({months:Math.round(i)},n);if(o>=1)return(0,a().IV)({days:Math.round(o)},n);const s=e.as("hours");if(s>=1)return(0,a().IV)({hours:Math.round(s)},n);const l=e.as("minutes");return(0,a().IV)({minutes:Math.round(l)},n)}return""}},218181:(e,t,n)=>{n.d(t,{q:()=>i});var r=()=>n(142735),o=()=>n(530980),a=()=>n(396136);function i(e){let{blockStore:t,closestNonAliveAncestorStore:n,intl:i}=e;return(0,r().VK)((()=>{var e;let r,s,l;const c=n&&n.table===a().iU&&n.getMovedToTrashTime();c?(r=!0,l=c,s=n.getMovedToTrashStore()):(l=t.getLastEditedTime(),s=t.getLastEditedByStore(),r=!1);return{trashAuthorStore:s,trashAuthorDisplayName:(null===(e=s)||void 0===e?void 0:e.getDisplayName(i))||i.formatMessage(o().T_T.messages.anonymousPlaceholder),trashTimestamp:l,isMovedToTrashMetadata:r}}),[t,n,i])}},580215:(e,t,n)=>{n.d(t,{M:()=>l,W:()=>c});var r=n(667294),o=()=>n(177357);const a=24*o().U6;function i(e){return s(e).status}function s(e){if(null==e||!e.enabled)return{status:"disabled"};const t=e.start_ts?1e3*e.start_ts-Date.now():0;return t<=0?{status:"active"}:t<=a?{status:"warning",nextUpdateInMs:t}:{status:"scheduled",nextUpdateInMs:t-a}}function l(e){const[t,n]=(0,r.useState)((()=>i(e)));return(0,r.useEffect)((()=>{if(null==e||!e.enabled)return;let t;return function r(){t=void 0;const{status:o,nextUpdateInMs:a}=s(e);n(o),a&&(t=setTimeout(r,a))}(),()=>{t&&(clearTimeout(t),t=void 0)}}),[e]),t}function c(e){const[t,n]=(0,r.useState)((()=>Date.now())),a=(null==e?void 0:e.enabled)&&e.start_ts;return(0,r.useEffect)((()=>{if("number"!=typeof a)return;const e=a;let t;return function r(){const a=Date.now();n(a);const i=e*o().C0-a;if(i>0){const e=i%o().hM,n=0===e?o().hM:e;t=setTimeout(r,n)}else t=void 0}(),()=>{t&&(clearTimeout(t),t=void 0)}}),[a]),{freezeStatus:i(e),minUntilFreeze:a?Math.floor((a*o().C0-t)/o().hM):void 0}}},863606:(e,t,n)=>{n.d(t,{W:()=>o});var r=n(667294);function o(e,t,n){const o=(0,r.useRef)(e),a=(0,r.useRef)(null);(0,r.useEffect)((()=>{o.current=e}),[e]),(0,r.useEffect)((()=>{const e=async()=>{a.current&&(clearTimeout(a.current),a.current=null),n&&(await o.current(),a.current=setTimeout(e,t))};return n&&e(),()=>{a.current&&(clearTimeout(a.current),a.current=null)}}),[n,t])}},388957:(e,t,n)=>{n.d(t,{K:()=>o});n(667294);var r=n(785893);const o=(0,n(827282).IU)("externalLink",{viewBox:"0 0 17 16",svg:(0,r.jsx)("path",{d:"M4.94922 13.498C4.31641 13.498 3.83789 13.3359 3.51367 13.0117C3.18945 12.6914 3.02734 12.2188 3.02734 11.5938V4.46289C3.02734 3.83398 3.18945 3.35938 3.51367 3.03906C3.83789 2.71875 4.31641 2.55859 4.94922 2.55859H12.0449C12.6777 2.55859 13.1562 2.71875 13.4805 3.03906C13.8047 3.35938 13.9668 3.83398 13.9668 4.46289V11.5938C13.9668 12.2188 13.8047 12.6914 13.4805 13.0117C13.1562 13.3359 12.6777 13.498 12.0449 13.498H4.94922ZM5.01953 12.3438H11.9746C12.2441 12.3438 12.4512 12.2734 12.5957 12.1328C12.7402 11.9922 12.8125 11.7793 12.8125 11.4941V4.55664C12.8125 4.27539 12.7402 4.06445 12.5957 3.92383C12.4512 3.7832 12.2441 3.71289 11.9746 3.71289H5.01953C4.74609 3.71289 4.53711 3.7832 4.39258 3.92383C4.25195 4.06445 4.18164 4.27539 4.18164 4.55664V11.4941C4.18164 11.7793 4.25195 11.9922 4.39258 12.1328C4.53711 12.2734 4.74609 12.3438 5.01953 12.3438ZM10.334 9.54297C10.1855 9.54297 10.0664 9.49609 9.97656 9.40234C9.89062 9.30859 9.84766 9.17969 9.84766 9.01562V8.08398L9.93555 7.24609L9.15039 8.10156L7.09961 10.1465C6.99023 10.2559 6.85742 10.3105 6.70117 10.3105C6.55273 10.3105 6.42969 10.2637 6.33203 10.1699C6.23828 10.0762 6.19141 9.95117 6.19141 9.79492C6.19141 9.6582 6.24609 9.53516 6.35547 9.42578L8.41211 7.36914L9.2793 6.57227L8.47656 6.66602H7.48633C7.32617 6.66602 7.19727 6.62305 7.09961 6.53711C7.00586 6.45117 6.95898 6.33203 6.95898 6.17969C6.95898 6.03516 7.00586 5.91992 7.09961 5.83398C7.19727 5.74414 7.32422 5.69922 7.48047 5.69922H10.2227C10.4062 5.69922 10.5508 5.74609 10.6562 5.83984C10.7617 5.93359 10.8145 6.08398 10.8145 6.29102V9.00977C10.8145 9.16602 10.7695 9.29492 10.6797 9.39648C10.5938 9.49414 10.4785 9.54297 10.334 9.54297Z"})})},395272:(e,t,n)=>{n.d(t,{p:()=>o});n(667294);var r=n(785893);const o=(0,n(827282).IU)("trashSmall",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M5.31055 14.3398C4.85742 14.3398 4.49414 14.2129 4.2207 13.959C3.95117 13.7051 3.80664 13.3516 3.78711 12.8984L3.38867 4.45508H2.74414C2.59961 4.45508 2.47656 4.4043 2.375 4.30273C2.27344 4.20117 2.22266 4.07812 2.22266 3.93359C2.22266 3.79297 2.27344 3.67383 2.375 3.57617C2.47656 3.47461 2.59961 3.42383 2.74414 3.42383H13.2617C13.4062 3.42383 13.5273 3.47266 13.625 3.57031C13.7266 3.66797 13.7773 3.78906 13.7773 3.93359C13.7773 4.07812 13.7266 4.20117 13.625 4.30273C13.5273 4.4043 13.4062 4.45508 13.2617 4.45508H12.6172L12.2188 12.8926C12.1992 13.3457 12.0527 13.6992 11.7793 13.9531C11.5059 14.2109 11.1445 14.3398 10.6953 14.3398H5.31055ZM5.42773 13.3027H10.5723C10.7363 13.3027 10.8711 13.248 10.9766 13.1387C11.082 13.0332 11.1387 12.8926 11.1465 12.7168L11.5273 4.45508H4.45508L4.85352 12.7168C4.86133 12.8887 4.91797 13.0293 5.02344 13.1387C5.12891 13.248 5.26367 13.3027 5.42773 13.3027ZM6.27734 12.3535C6.15625 12.3535 6.05859 12.3203 5.98438 12.2539C5.91016 12.1836 5.87109 12.0898 5.86719 11.9727L5.69141 5.83203C5.6875 5.71875 5.72266 5.62695 5.79688 5.55664C5.87109 5.48242 5.96875 5.44531 6.08984 5.44531C6.21094 5.44531 6.30859 5.48047 6.38281 5.55078C6.45703 5.62109 6.49414 5.71289 6.49414 5.82617L6.67578 11.9668C6.67578 12.084 6.63867 12.1777 6.56445 12.248C6.49414 12.3184 6.39844 12.3535 6.27734 12.3535ZM8 12.3535C7.87891 12.3535 7.7793 12.3184 7.70117 12.248C7.62695 12.1777 7.58984 12.0859 7.58984 11.9727V5.83203C7.58984 5.71875 7.62695 5.62695 7.70117 5.55664C7.7793 5.48242 7.87891 5.44531 8 5.44531C8.125 5.44531 8.22461 5.48242 8.29883 5.55664C8.37695 5.62695 8.41602 5.71875 8.41602 5.83203V11.9727C8.41602 12.0859 8.37695 12.1777 8.29883 12.248C8.22461 12.3184 8.125 12.3535 8 12.3535ZM9.72852 12.3535C9.60352 12.3535 9.50391 12.3184 9.42969 12.248C9.35938 12.1777 9.32617 12.084 9.33008 11.9668L9.50586 5.83203C9.50977 5.71484 9.54883 5.62109 9.62305 5.55078C9.69727 5.48047 9.79297 5.44531 9.91016 5.44531C10.0352 5.44531 10.1328 5.48242 10.2031 5.55664C10.2773 5.62695 10.3125 5.71875 10.3086 5.83203L10.1328 11.9727C10.1289 12.0898 10.0898 12.1836 10.0156 12.2539C9.94141 12.3203 9.8457 12.3535 9.72852 12.3535ZM5.33984 3.81055V2.54492C5.33984 2.0957 5.47461 1.74609 5.74414 1.49609C6.01758 1.24219 6.39648 1.11523 6.88086 1.11523H9.10742C9.5918 1.11523 9.9707 1.24219 10.2441 1.49609C10.5176 1.74609 10.6543 2.0957 10.6543 2.54492V3.81055H9.57031V2.59766C9.57031 2.44922 9.52148 2.33008 9.42383 2.24023C9.32617 2.14648 9.19531 2.09961 9.03125 2.09961H6.95703C6.79688 2.09961 6.66797 2.14648 6.57031 2.24023C6.47266 2.33008 6.42383 2.44922 6.42383 2.59766V3.81055H5.33984Z"})})},151165:(e,t,n)=>{n.d(t,{Z:()=>o});class r extends(()=>n(263184))().default{}const o=new r},844095:(e,t,n)=>{n.d(t,{Z:()=>o});class r extends(()=>n(263184))().default{getInitialState(){return{pageMap:{}}}setStatus(e,t){const{pageMap:n}=this.state;t?n[e]=t:delete n[e],this.emit()}}const o=new r},235629:(e,t,n)=>{n.r(t),n.d(t,{default:()=>I});n(667294);var r=()=>n(142735),o=()=>n(548812),a=()=>n(30795),i=()=>n(897257),s=()=>n(219727),l=()=>n(732811),c=()=>n(665398),d=()=>n(788860),u=()=>n(979614),p=()=>n(636340),m=()=>n(269299),g=()=>n(489434),f=()=>n(616433),h=()=>n(876822),y=()=>n(965014),v=()=>n(18281),b=()=>n(595976),_=n(785893);const S=(0,d().vU)({overFreeBlockLimitLong:{id:"subscriptionActions.overFreeBlockLimit.longMessage",defaultMessage:"You are over the block limit for the Free plan"},overFreeBlockLimitMobileNative:{id:"subscriptionActions.overFreeBlockLimit.mobileNative",defaultMessage:"Your free blocks have been used up. Unfortunately, unlimited blocks cannot be purchased on mobile."},upgradeForUnlimited:{id:"subscriptionActions.upgradeForUnlimitedBlocks.longMessage",defaultMessage:"Upgrade for unlimited"},upgradePlan:{id:"subscriptionActions.upgradePlan",defaultMessage:"Upgrade plan"},gracePeriodMessage:{id:"subscriptionActions.gracePeriodMessage",defaultMessage:"You have {dayCount, plural, one {1 day} other {{dayCount} days}} left to upgrade"},overFreeBlockLimitShort:{id:"subscriptionActions.overFreeBlockLimitShort",defaultMessage:"You've used all of this workspace's free blocks"}});function x(){const{isMobileNative:e}=(0,s().Fy)(),t=(0,s().O7)(),n=(0,r().VK)((()=>h().default.state.currentSpaceStore),[]),o=(0,r().Kw)(i().subscriptionDataStoreInstance),c=(0,f().J)(),d=(0,a().V)(o);return(0,l().K)((()=>{const e=null==n?void 0:n.pointer.spaceId;if(e&&c){var r;const a=null===(r=n.getSettings())||void 0===r?void 0:r.reach_block_limit_time;!a&&o&&v().Ln(t,e,o,d)&&m().createAndCommit({userAction:"OverFreeBlockLimitBanner.initialMount",environment:t,canUndo:!0,perform:e=>{p().sW({store:n,data:{settings:{...n.getSettings(),reach_block_limit_time:Date.now()}},transaction:e})}}),u().x1(t,{reach_block_limit_time:a??Date.now(),eligible_for_trial:!1})}})),e?(0,_.jsx)(k,{}):(0,_.jsx)(C,{})}function C(){const e=(0,d().YB)(),t=(0,r().Kw)(i().subscriptionDataStoreInstance),n=(0,a().V)(t),l=(0,s().O7)(),u=(0,r().VK)((()=>(0,o().vT)(n)),[n]),p=(0,r().VK)((()=>{var e;return null===(e=h().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),m=(0,b().p)({spaceId:p}),f=(0,r().VK)((()=>v().Nf({billingData:m,spaceStore:h().default.state.currentSpaceStore})),[m]),x=(0,r().VK)((()=>function(e,t){if(!t)return e.formatMessage(S.overFreeBlockLimitLong);const n=(0,o().fQ)();return n>0?e.formatMessage(S.gracePeriodMessage,{dayCount:n}):e.formatMessage(S.overFreeBlockLimitShort)}(e,u)),[u,e]),C=(0,r().VK)((()=>function(e){if(!e)return"red";return(0,o().fQ)()>0?"yellow":"red"}(u)),[u]),k=[{label:u?e.formatMessage(S.upgradePlan):e.formatMessage(S.upgradeForUnlimited),onClick:()=>{y().y(l,{from:"block_limit_banner",upsell:{type:"product",product:"plus",limit:{type:"none"}}})}}];return(0,_.jsx)(g().j,{label:x,display:"full-width",tint:C,iconGroup:c().P,actions:f?k:[]})}function k(){const e=(0,d().YB)().formatMessage(S.overFreeBlockLimitMobileNative);return(0,_.jsx)(g().j,{label:e,display:"full-width",tint:"red"})}function I(){const e=(0,r().Kw)(i().subscriptionDataStoreInstance),t=(0,a().V)(e);return(0,r().VK)((()=>(0,o().vT)(t)),[t])?(0,_.jsx)("div",{style:{position:"sticky",left:0,right:"100%",width:"100%"},children:(0,_.jsx)(x,{})}):(0,_.jsx)(x,{})}},815277:(e,t,n)=>{n.d(t,{CH:()=>m,DE:()=>l().DE,KQ:()=>l().KQ,Rv:()=>l().Rv,V5:()=>p().V5,VX:()=>g,eB:()=>l().eB,oo:()=>l().oo});var r=()=>n(255933),o=()=>n(779709),a=()=>n(205228),i=()=>n(845682),s=()=>n(30795),l=()=>n(546464),c=()=>n(404791),d=()=>n(897257),u=()=>n(18281),p=()=>n(259408);const m={guests:e=>{if(!d().subscriptionDataStoreInstance.state)return"loading";return{current:(0,u().s1)(e.environment,e.spaceId,d().subscriptionDataStoreInstance.state)}},team_self_promotion:e=>{},internal_guests:e=>{if(!d().subscriptionDataStoreInstance.state)return"loading";return{current:(0,u().s1)(e.environment,e.spaceId,d().subscriptionDataStoreInstance.state),hasLowGuestLimit:(0,n(548812).fc)()}},members:e=>{const t=d().subscriptionDataStoreInstance.state;return{current:t?(0,s().W)(e.environment,e.spaceId,t):0}},non_admin_members:e=>{},view_chart:e=>{},form_filesize:e=>{},form_customization:e=>{},premium_automations:e=>{},move_to:e=>{},claimable_spaces:e=>{},domain_settings:e=>{},managed_users:e=>{},invite_user_to_workspace_mentions:e=>{},saml:e=>{},scim:e=>{},export_members:e=>{},hipaa_compliance:e=>{},sites_multiple_public_domains:e=>{},custom_image_upload_favicon:e=>{},custom_public_sites_layout:e=>{},seo_title_and_description:e=>{},admin_transfer_private_content:e=>{},ai_slack_qna:e=>{},configurable_mention_invites:e=>{},configurable_retention:e=>{},unbranded_forms:e=>{},ai_google_drive_qna:e=>{},watermarkless_chart_export:e=>{},configurable_deletion_and_retention_settings:e=>{},sudo_mode:e=>{},ai_github_connector:e=>{},ai_jira_connector:e=>{},slack_imports_invite:e=>{},content_reprovisioning:e=>{},ai_space_usage:e=>{var t;let{environment:n,spaceId:l}=e;const u=new(i().H)(n,{table:r().bx,id:l}).getModel(),p=(0,o().oc)(a().default.promotions.ai,u),m=(null===(t=c().Z.state)||void 0===t?void 0:t.spaceUsage)??0,g=d().subscriptionDataStoreInstance.state;return{current:m,memberCount:g?(0,s().W)(n,l,g):0,aiPromotionConfig:p,space:u}},ai_user_usage:e=>{var t;let{environment:n,spaceId:l}=e;const u=new(i().H)(n,{table:r().bx,id:l}).getModel(),p=(0,o().oc)(a().default.promotions.ai,u),m=(null===(t=c().Z.state)||void 0===t?void 0:t.userUsage)??0,g=d().subscriptionDataStoreInstance.state;return{current:m,memberCount:g?(0,s().W)(n,l,g):0,aiPromotionConfig:p,space:u}},block_read_and_write_role:e=>{}};function g(e){return(0,l().Rv)(e)??!1}},87098:(e,t,n)=>{n.d(t,{PN:()=>a,kE:()=>s,nj:()=>i});var r=()=>n(677559);const o={translation:new(r().Ss)("translation",(()=>Promise.all([n.e(62743),n.e(43043),n.e(63283)]).then(n.bind(n,993996)))),TranslateBanner:new(r().Ss)("TranslateBanner",(async()=>await Promise.all([n.e(62743),n.e(43043)]).then(n.bind(n,704562))))},a=(0,r().kF)(o.translation,(e=>e.TopbarAmbientSuggestTranslateButton)),i=(0,r().kF)(o.TranslateBanner,(e=>e.TranslateBanner)),s=(0,r().kF)(o.translation,(e=>e.MobileTopbarAmbientSuggestTranslateRenderer))},912203:(e,t,n)=>{n.d(t,{$M:()=>h,GQ:()=>x,Jy:()=>I,LF:()=>k,NO:()=>m,Of:()=>w,SF:()=>u,TX:()=>S,XO:()=>y,Y_:()=>d,Ym:()=>f,bD:()=>b,cO:()=>p,fo:()=>C,rR:()=>g});n(267602),n(653476),n(228244);var r=()=>n(513670),o=()=>n(696459),a=()=>n(226413),i=()=>n(109477),s=()=>n(455222),l=()=>n(305580);(0,o().AO)((e=>(0,o().$K)(e)&&(0,o().$K)(e.target)&&(0,o().$K)(e.external_bot_id)?{true:{external_bot_id:e.external_bot_id,target:e.target}}:{false:e}));const c={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1},d={checkbox:[{type:"checkbox"}],date:[{type:"date"}],email:[{type:"text"}],multi_select:[{type:"text"},{of:{type:"text"},type:"array"}],number:[{type:"number"}],person:[{type:"person"},{of:{type:"person"},type:"array"}],phone_number:[{type:"text"}],relation:[{type:"block"},{of:{type:"block"},type:"array"}],select:[{type:"text"},{of:{type:"text"},type:"array"}],status:[{type:"text"},{of:{type:"text"},type:"array"}],text:void 0,title:void 0,url:[{type:"text"}]};function u(e){return Boolean(c[e.type]&&!(0,a().NK)(e)&&(!(0,a().qQ)(e)||void 0===(0,a().q3)(e)))}function p(e){const{collectionFormat:t,collectionSchema:n,filter:s,sort:c,sourcePropertyIds:d}=e,p=(d??(0,o().Yd)(n)).filter(((t,r,o)=>{const i=n[t];return!(!i||!u(i))&&(("relation"!==i.type||!e.restrictCrossSpace||!(0,a().Qh)(e.spaceId,i))&&(!s||s([t,i],r,n)))}));if(0===p.length)return[];if(!t||!1===c)return p;const m=(0,l().i)(t,n,void 0,i().j5.Page).collection_page_properties||[];return r().MR(p,(e=>m.findIndex((t=>t.property===e))))}function m(e){const{collectionFormat:t,collectionSchema:n,sort:s}=e,c=(0,o().Yd)(n).filter(((e,t,r)=>{const o=n[e];return!(!o||!(0,a().U8)(o))}));if(0===c.length)return[];if(!t||!1===s)return c;const d=(0,l().i)(t,n,void 0,i().j5.Page).collection_page_properties||[];return r().MR(c,(e=>d.findIndex((t=>t.property===e))))}function g(e){return e.type===s().$E.InvalidCharacter?{type:e.type,character:e.character}:e.type===s().$E.TokenExpected?{type:e.type,token:e.token}:e.type===s().FY.MissingSchemaPropertyOnThisRow||e.type===s().FY.MissingSchemaPropertyOnCollection?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===s().FY.ThisRowBlockPropertyMismatchCollection?{type:e.type,thisRowCollection:e.thisRowCollection}:e.type===s().FY.MissingContextVariable?{type:e.type,valueId:e.valueId}:e.type===s().FY.FunctionCallTooFewArguments?{type:e.type,numArguments:e.numArguments}:e.type===s().FY.FunctionCallUnexpectedArgument?{type:e.type,parameterIndex:e.parameterIndex}:e.type===s().FY.FunctionCallArgumentWrongType?{type:e.type,argumentType:e.argumentType,libraryFunctionName:e.libraryFunction.name,parameterIndex:e.parameterIndex}:e.type===s().FY.MissingDataDependencyBlock?{type:e.type,blockPointer:e.blockPointer}:e.type===s().FY.MissingDataDependencyPerson?{type:e.type,personPointer:e.personPointer}:e.type===s().FY.MemberPropertyMismatchCollection?{type:e.type,blockCollection:e.blockCollection}:e.type===s().FY.DownstreamParseFailure?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===s().FY.ContextVariableWrongType?{type:e.type,valueId:e.valueId,expectedType:e.expectedType,resultType:e.resultType}:e.type===s().FY.DisallowedValueType?{type:e.type,expressionValue:e.expressionValue,allowedValueTypes:e.allowedValueTypes}:e.type===s().FY.LibraryFunctionExecutionError?{type:e.type,error:e.error,libraryFunctionName:e.libraryFunction.name}:{type:e.type}}const f={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,button:!1,file:!1,verification:!1,auto_increment_id:!1,created_by:!1,created_time:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1};function h(e){return Boolean(f[e.type])}function y(e){const{collectionFormat:t,collectionSchema:n,filter:s,sort:c}=e,d=(0,o().Yd)(n).filter(((e,t,r)=>{var o;const i=n[e];return!(!i||!f[i.type])&&((!(0,a().qQ)(i)||null===(o=(0,a().q3)(i))||void 0===o||!o.auto_update_on_edit)&&(!s||s([e,i],t,n)))}));if(0===d.length)return[];if(!t||!1===c)return d;const u=(0,l().i)(t,n,void 0,i().j5.Page).collection_page_properties||[];return r().MR(d,(e=>u.findIndex((t=>t.property===e))))}const v={checkbox:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,date:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1};function b(e){return v[e.type]}const _={checkbox:!0,created_by:!0,created_time:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,last_edited_by:!0,last_edited_time:!0,auto_increment_id:!1,button:!1,file:!1,formula:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1};function S(e){return _[e.type]}function x(e){return 0===e}function C(e){return function(e){return"button_block"===e||"button_property"===e}(e)}function k(e){const{property:t,collectionSchema:n}=e;return!!n&&!n[t]}function I(e){const{collectionSchema:t,property:n,type:r}=e,o=null==t?void 0:t[n];return!o||("action"===r?!u(o):!f[o.type])}function w(e){let{automationTrigger:t,collectionSchema:n}=e;if("event"===(null==t?void 0:t.type)||"notification_event"===(null==t?void 0:t.type)){const{pagesAdded:e,pagePropertiesEdited:r,source:a}=t.event;if(void 0===a)return!1;const i="some"===r.type&&r.some,s="all"===r.type&&r.all;if((i||s||[]).some((e=>k({collectionSchema:n,property:e.property})||I({collectionSchema:n,property:e.property,type:"trigger"}))))return!1;const l="some"===r.type&&(!(0,o().$K)(r.some)||0===r.some.length),c="all"===r.type&&(!(0,o().$K)(r.all)||0===r.all.length);if(!e&&("none"===r.type||l||c))return!1}else{if("recurrence"!==(null==t?void 0:t.type))return!1;if(!t.recurrence)return!1}return!0}},157955:(e,t,n)=>{n.r(t),n.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>T,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>x,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>S,MAX_RECURRENCE_INTERVAL:()=>h,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>y,RRULE_WEEKDAYS_MAP:()=>f,convertFromUnpersistedRecurrenceConfig:()=>A,convertToUnpersistedRecurrenceConfig:()=>B,getFormattedEndCondition:()=>j,getFormattedNextRecurrenceTime:()=>M,getNextDateUtc:()=>w,getRecurrenceAfter:()=>k,isRunningBetweenMidnightAnd3AM:()=>I,isValidRecurrenceInterval:()=>v,isValidRecurrenceNumberOfRuns:()=>b,rruleFromRecurrence:()=>_,templateAncestorsViolateRecurrenceNesting:()=>C});n(267602),n(653476),n(241792);var r=()=>n(730120);n(670560);function o(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(0===n.length)return e.map((e=>[e]));const a=[];for(const i of e)a.push(...o(n[0],...n.slice(1)).map((e=>[i,...e])));return a}var a=()=>n(696459),i=()=>n(326966),s=()=>n(803021),l=()=>n(646574),c=()=>n(998411),d=()=>n(578292);class u extends(()=>n(484885))().Ci{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var p=()=>n(494616);const m=(0,n(788860).vU)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12–3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),g={day:u.DAILY,week:u.WEEKLY,month:u.MONTHLY,year:u.YEARLY},f={MO:u.MO,TU:u.TU,WE:u.WE,TH:u.TH,FR:u.FR,SA:u.SA,SU:u.SU},h=99,y=999;function v(e){return(0,i().hj)(e)&&Number.isInteger(e)&&e>0&&e<=h}function b(e){return(0,i().hj)(e)&&Number.isInteger(e)&&e>0&&e<=y}function _(e){const{start_date:t,frequency:n,interval:r,weekdays:i,timezone:l,hour:c,minute:d}=e,p="week"===n&&i?i.map((e=>f[e])):void 0,m={};return(0,a().$K)(e.end_condition)&&("date"===e.end_condition.type?m.until=(0,s().pd)(e.end_condition.end_at):"number"===e.end_condition.type?m.count=e.end_condition.number_of_occurrences:(0,a().t1)(e.end_condition)),"month"===e.frequency&&(0,a().$K)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?m.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?m.byweekday=o(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((e=>{let[t,n]=e;return f[t].nth(n)})):(0,a().t1)(e.monthly_restriction)),new u({freq:g[n],dtstart:(0,s().pd)(t),interval:r,byweekday:p,tzid:l,byhour:c??0,byminute:d??0,bysecond:0,...m})}const S=1,x=1;function C(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const n=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),r=e.length,o=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,a=r>S,i=n.length>=x;return{violatesConstraint:a||i,templateNestingExceedsMaxDepth:a,ancestorHasDailyTemplate:i,nestedDepthOfAutomationAncestors:r,immediateAncestorRecurrenceType:o}}function k(e){const{recurrence:t,afterDate:n}=e;if((0,p().nA)(t)){const e=(0,s().kq)(n);return t.start_date>=e?new Date(t.start_date):void 0}{const e=_(t).after((0,s().pd)(n));if(!e)return;return(0,s().YL)(e)}}function I(e){return 0===e.hour||1===e.hour||2===e.hour}function w(e){return _(e).after((0,s().pd)((0,s().Jh)()))||void 0}function M(e){const{recurrence:t,intl:n}=e,o=w(A(t));if(!o)return;const a=I(t),i=r().ou.fromJSDate(o).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,d().E2)(n)).setZone(t.timezone),s=(0,l().p6)({date:i,dateFormat:"relative",allowRelativeDates:!0,intl:n,shortenDate:!0});if(a)return n.formatMessage(m.dateBetweenMidnightAnd3AM,{date:s});{let e=i.toLocaleString(r().ou.TIME_SIMPLE);return t.timezone!==(0,c().r)()&&(e+=` ${i.toFormat("ZZZZ")}`),n.formatMessage(m.dateAtTime,{date:s,time:e})}}function j(e,t){return(0,a().$K)(e)?"number"===e.type?t.formatMessage(m.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,l().p6)({date:r().ou.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,a().t1)(e):t.formatMessage(m.noEndCondition)}const T=100;function B(e){return{...e,start_date:(0,s().kq)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,s().kq)(e.end_condition.end_at)}:(0,a().t1)(e.end_condition):void 0}}function V(e,t){const n=r().ou.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,s().Jh)(n.toJSDate())}}function A(e){return{...e,start_date:(0,s().Jh)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?V(e,e.end_condition):(0,a().t1)(e.end_condition):void 0}}},665398:(e,t,n)=>{n.d(t,{P:()=>r});const r=(0,n(827282).CZ)("blockLimit",{default:{loader:()=>n.e(72870).then(n.bind(n,372870))},small:{loader:()=>n.e(33898).then(n.bind(n,233898))},mini:{loader:()=>n.e(24744).then(n.bind(n,724744))},large:{loader:()=>n.e(7016).then(n.bind(n,107016))}})},77973:(e,t,n)=>{n.d(t,{U:()=>B});var r=n.n(n(389539)),o=(n(821057),n(409045),n(453627),n(994774),n(995194),n(520522),n(200082),n(379976),n(724224),n(761121),n(637133),n(241792),n.n(n(402568))),a=()=>n(513670),i=()=>n(326966),s=()=>n(431595),l=()=>n(24945),c=()=>n(255933);const d={version:8,notion_version:0,variant:2},u={version:8,notion_version:1,variant:2},p=0,m=1,g=6,f=8,h=10,y=Date.UTC(2024,0,1);function v(e,t){if(e)return t[p]=255,t[p+1]=240|15&t[p+1],t;const n=Math.floor(((new Date).getTime()-y)/i().A0);if(n>=4096||n<0)throw new Error("Invalid offsetInDays.");return t[p]=n>>4,t[p+1]=n<<4&240|15&t[p+1],t}function b(e,t){if(e>=2**36||e<0)throw new Error("Invalid spaceShortId.");t[m]=240&t[m]|e/2**32&15;for(let n=0;n<4;n++)t[m+1+n]=e/2**(24-8*n)&255;return t}function _(e,t){const n=e?1:0;return t[g]=d.version<<4&240|d.notion_version<<1&14|1&n,t[f]=d.variant<<6&192|63&t[f],t}function S(e,t){if("block"===e)return t[h]=(0,l().ym)(e)|63&t[h],t;const n=(0,l().ym)(e);return t[h]=n>>8&127,t[h+1]=255&n,t}function x(e,t){const n=(0,l().Nq)(e);return t[h]=127&n|128&t[h],t}function C(e,t,n,r){const o=new Uint8Array(16),a=globalThis.crypto.getRandomValues(o);return n!==c().bx&&v(e,a),b(t,a),_(r,a),S(n,a),M(a)}function k(e,t,n){return I(e,t,n)}function I(e,t,n){const r=o()(n),i=a().yo(r,2).map((e=>parseInt(e.join(""),16)));if((0,l().LV)(t)){if(void 0===e)throw new(s().D3)(`Deterministic ID for '${t}' must specify a space short id`)}else if(void 0!==e)throw new(s().D3)(`Deterministic ID for '${t}' should not provide a space short id`);const c=new Uint8Array(i);return e&&b(e,c),x(t,c),function(e){e[g]=240&u.version<<4|14&u.notion_version<<1|1&e[g],e[f]=192&u.variant<<6|63&e[f]}(c),M(c)}const w=new Array(256).fill(0).map(((e,t)=>t.toString(16).padStart(2,"0")));function M(e){let t=0;return w[e[t++]]+w[e[t++]]+w[e[t++]]+w[e[t++]]+"-"+w[e[t++]]+w[e[t++]]+"-"+w[e[t++]]+w[e[t++]]+"-"+w[e[t++]]+w[e[t++]]+"-"+w[e[t++]]+w[e[t++]]+w[e[t++]]+w[e[t++]]+w[e[t++]]+w[e[t++]]}var j=()=>n(956057);const T=`,${[n(363777).uK].join(",")},`;class B{constructor(e){this.environmentName=void 0,this.mainShortId=void 0,this.getSettings=void 0,this.isServerOriginated=void 0,this.mapSpaceIdToShortId=void 0,this.idCreatorLogger=void 0,this.environmentName=e.environmentName,this.mainShortId=n(631871).jF[this.environmentName],this.getSettings=e.getSettings,this.isServerOriginated=e.isServerOriginated,this.mapSpaceIdToShortId=e.mapSpaceIdToShortId,this.idCreatorLogger=e.idCreatorLogger??(()=>{})}idInMain(e,t){const{enableTestDateOffset:n,enableIdSchema:r}=this.getSettings(t);return!r||T.includes(`,${e},`)?this.legacyId(e,"disabled",t):(this.idCreatorLogger(void 0,e,n?"id_schema_test":"id_schema",t),function(e,t,n,r){return C(e,t,n,r)}(n,this.mainShortId,e,this.isServerOriginated))}pointerInMain(e,t){return{table:e,id:this.idInMain(e,t)}}async idWithSpaceId(e,t,n){const{enableTestDateOffset:o,enableIdSchema:a}=this.getSettings(n);if(!a)return this.legacyId(t,"disabled",n);const i=this.mapSpaceIdToShortId(e),s=r().types.isPromise(i)?await i:i;return s?(this.idCreatorLogger(e,t,o?"id_schema_test":"id_schema",n),C(o,s,t,this.isServerOriginated)):this.legacyId(t,"missing_short_id",n)}async pointerWithSpaceId(e,t,n){return{table:t,spaceId:e,id:await this.idWithSpaceId(e,t,n)}}idWithSpaceShortId(e,t,n){const{enableTestDateOffset:r,enableIdSchema:o}=this.getSettings(n);return o?(this.idCreatorLogger(void 0,t,r?"id_schema_test":"id_schema",n),C(r,e,t,this.isServerOriginated)):this.legacyId(t,"disabled",n)}legacyId(e,t,n){return this.idCreatorLogger(void 0,e,t,n),j().Il()}async deterministicIdWithSpaceId(e,t,n,o){const{enableTestDateOffset:a,enableIdSchema:i}=this.getSettings(o);if(!i)return this.idCreatorLogger(e,t,"disabled",o),j().Ul(n);const s=this.mapSpaceIdToShortId(e),l=r().types.isPromise(s)?await s:s;return l?(this.idCreatorLogger(e,t,a?"id_schema_test":"id_schema",o),k(l,t,n)):(this.idCreatorLogger(e,t,"missing_short_id",o),j().Ul(n))}deterministicIdWithSpaceShortId(e,t,n,r){const{enableTestDateOffset:o,enableIdSchema:a}=this.getSettings(r);return a?(this.idCreatorLogger(void 0,t,o?"id_schema_test":"id_schema",r),k(e,t,n)):(this.idCreatorLogger(void 0,t,"disabled",r),j().Ul(n))}async getSpaceIdCreator(e){if(!e)return new V(e,this.idCreatorLogger);const{enableIdSchema:t}=this.getSettings();if(!t)return new V(e,this.idCreatorLogger);const n=this.mapSpaceIdToShortId(e),o=r().types.isPromise(n)?await n:n;return this.getSpaceShortIdCreator(e,o)}getSpaceIdCreatorSync(e){if(!e)return new V(e,this.idCreatorLogger);const{enableIdSchema:t}=this.getSettings();if(!t)return new V(e,this.idCreatorLogger);const n=this.mapSpaceIdToShortId(e),o=r().types.isPromise(n)?void 0:n;return this.getSpaceShortIdCreator(e,o)}getSpaceShortIdCreator(e,t){const{enableIdSchema:n}=this.getSettings();return n&&t?new A(e,this,t):new V(e,this.idCreatorLogger)}async getSpaceIdCreatorFromModel(e){return e.getShortIdStr()?this.getSpaceShortIdCreator(e.id,Number(e.getShortIdStr())):await this.getSpaceIdCreator(e.id)}}class V{constructor(e,t){this.spaceId=void 0,this.idCreatorLogger=void 0,this.spaceId=e,this.idCreatorLogger=t}idInSavedSpace(e,t){return this.idCreatorLogger(void 0,e,"disabled",t),j().Il()}idInMain(e,t){return this.idCreatorLogger(void 0,e,"disabled",t),j().Il()}deterministicIdInSavedSpace(e,t,n){return this.idCreatorLogger(void 0,e,"disabled",n),j().Ul(t)}pointerInMain(e,t){return{id:this.idInMain(e),table:e}}pointerInSavedSpace(e,t){return{id:this.idInSavedSpace(e),table:e,spaceId:this.spaceId}}getSpaceId(){return this.spaceId}}class A{constructor(e,t,n){this.spaceId=void 0,this.idCreator=void 0,this.spaceShortId=void 0,this.spaceId=e,this.idCreator=t,this.spaceShortId=n}idInSavedSpace(e,t){return this.idCreator.idWithSpaceShortId(this.spaceShortId,e,t)}idInMain(e,t){return this.idCreator.idInMain(e,t)}deterministicIdInSavedSpace(e,t,n){return this.idCreator.deterministicIdWithSpaceShortId(this.spaceShortId,e,t,n)}pointerInMain(e,t){return{id:this.idInMain(e,t),table:e}}pointerInSavedSpace(e,t){return{id:this.idInSavedSpace(e,t),table:e,spaceId:this.spaceId}}getSpaceId(){return this.spaceId}}}}]);