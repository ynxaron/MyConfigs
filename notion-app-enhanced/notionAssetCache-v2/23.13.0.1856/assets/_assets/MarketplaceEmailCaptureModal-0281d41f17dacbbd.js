"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[1544],{448731:(e,t,a)=>{a.r(t),a.d(t,{MarketplaceEmailCaptureModal:()=>f});var i=a(667294),l=()=>a(219727),r=()=>a(142735),n=()=>a(846550),s=()=>a(788860),o=()=>a(696459),c=()=>a(715139),d=()=>a(291198),u=()=>a(661641),p=()=>a(921981),m=()=>a(981583),x=()=>a(594546),k=()=>a(876822),h=()=>a(789048),y=()=>a(997048),g=a(785893);function f(){const{isOpen:e,emailRequirement:t}=(0,r().Kw)(h().Z),{trackOpen:a,trackCancel:l}=v();(0,i.useEffect)((()=>{e&&a()}),[e,a]);return(0,g.jsx)(p().c,{isOpen:e,onDismiss:()=>{l({from:"modal_close"}),h().Z.cancel()},showCloseIcon:!0,render:()=>{if(e)switch(t){case"optional":return(0,g.jsx)(j,{});case"required":return(0,g.jsx)(C,{});default:(0,o().t1)(t)}return null}})}function b(e){var t;let{title:a,subTitle:l,primaryAction:o,secondaryAction:p}=e;const x=(0,s().YB)(),f=(0,n().yK)((e=>({modalContent:{padding:"28px"},body:{display:"flex",flexDirection:"column",gap:"12px"},input:{cursor:"not-allowed",color:e.text.tertiary},checkboxLabel:{display:"flex",gap:"8px"},checkbox:{marginTop:"2px"}})),[]),[b,j]=(0,i.useState)(!1),[C,M]=(0,i.useState)(""),{trackSubmit:w}=v(),_=(0,r().VK)((()=>{var e;return(null===(e=k().default.state.currentUserStore)||void 0===e?void 0:e.getEmail())||""}),[]),{isOpen:q,creator:S}=(0,r().Kw)(h().Z);return q?(0,g.jsx)(y().$,{icon:(0,g.jsx)(m().Z,{size:36,avatar:{avatarUrl:(null==S||null===(t=S.attributes)||void 0===t||null===(t=t.image)||void 0===t?void 0:t.url)||"",name:(null==S?void 0:S.name)||""}}),title:a,subTitle:l,body:(0,g.jsxs)("div",{style:f.body,children:[(0,g.jsx)(d().Z,{disabled:!0,value:_,inputStyle:f.input}),(0,g.jsxs)("label",{style:f.checkboxLabel,children:[(0,g.jsx)(c().Z,{size:14,checked:b,onClick:()=>{M(""),j(!b)},style:f.checkbox,"aria-required":!0,"aria-invalid":Boolean(C)}),(0,g.jsx)(u().q,{as:"span",styleName:"UIRegular-14px/Regular",children:(0,g.jsx)(s()._H,{id:"marketplace.emailCaptureModal.optional.checkboxLabel",defaultMessage:"Allow the creator to add me to their mailing list for updates, promotions, and helpful tips"})})]})]}),actions:[{...o,onClick:()=>{b?(w(),h().Z.submit()):M(x.formatMessage({id:"marketplace.emailCaptureModal.required.error",defaultMessage:"Please check the field above to share your email"}))},error:C},p],width:446,style:f.modalContent}):null}function j(){const{trackSkip:e}=v();return(0,g.jsx)(b,{title:(0,g.jsx)(s()._H,{id:"marketplace.emailCaptureModal.optional.title",defaultMessage:"Share your email with the creator"}),primaryAction:{type:"outline",text:(0,g.jsx)(s()._H,{id:"marketplace.emailCaptureModal.optional.submit",defaultMessage:"Submit"})},secondaryAction:{type:"plain",isBlue:!0,text:(0,g.jsx)(s()._H,{id:"marketplace.emailCaptureModal.optional.skip",defaultMessage:"Skip, just get template"}),onClick:()=>{e(),h().Z.skip()}}})}function C(){const{trackCancel:e}=v(),t=(0,r().VK)((()=>h().Z.state.creator),[]);return(0,g.jsx)(b,{title:(0,g.jsx)(s()._H,{id:"marketplace.emailCaptureModal.required.title",defaultMessage:"Please share your email address"}),subTitle:(0,g.jsx)(s()._H,{id:"marketplace.emailCaptureModal.required.subTitle",defaultMessage:"{creatorName} has required that you share an email address before downloading their template",values:{creatorName:null==t?void 0:t.name}}),primaryAction:{type:"primary",text:(0,g.jsx)(s()._H,{id:"marketplace.emailCaptureModal.required.submit",defaultMessage:"Submit and get template"})},secondaryAction:{type:"plain",text:(0,g.jsx)(s()._H,{id:"marketplace.emailCaptureModal.required.skip",defaultMessage:"Cancel"}),onClick:()=>{e({from:"cancel"}),h().Z.cancel()}}})}function v(){const e=(0,l().O7)(),{templateId:t,emailRequirement:a}=(0,r().Kw)(h().Z),n=(0,i.useMemo)((()=>({template_id:t,is_optional:"optional"===a,is_free:!0})),[t,a]),s=(0,i.useCallback)((t=>{(0,x().j)({environment:e,event:{eventName:"marketplace_capture_email",eventProperties:{...n,...t}}})}),[e,n]);return{trackOpen:(0,i.useCallback)((()=>{s({action:"open"})}),[s]),trackSubmit:(0,i.useCallback)((()=>{s({action:"submit"})}),[s]),trackSkip:(0,i.useCallback)((()=>{s({action:"skip"})}),[s]),trackCancel:(0,i.useCallback)((e=>{let{from:t}=e;s({action:"cancel",from:t})}),[s])}}},997048:(e,t,a)=>{a.d(t,{$:()=>u});a(241792),a(667294);var i=()=>a(846550),l=()=>a(696459),r=()=>a(707513),n=()=>a(661641),s=()=>a(661297),o=()=>a(92175),c=()=>a(906651),d=a(785893);function u(e){let{icon:t,title:a,subTitle:l,body:s,actions:o,width:c,style:u}=e;const m=function(e){let{width:t=406,style:a={}}=e;return(0,i().yK)((()=>({container:{display:"flex",flexDirection:"column",alignItems:"center",width:`${t}px`,padding:"20px",gap:"24px",...a},header:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",gap:"8px",fontWeight:r().Ue.semibold,fontSize:"16px"},headerPadding:{paddingTop:"16px"},actions:{display:"flex",flexDirection:"column",gap:"6px",width:"100%"}})),[t,a])}({width:c,style:u});return(0,d.jsxs)("div",{style:m.container,children:[(0,d.jsxs)("div",{style:{...m.header,...!t&&m.headerPadding},children:[t,a,l?(0,d.jsx)(n().q,{styleName:"Body-14px/Regular",colorName:"secondary",children:l}):null]}),s,(0,d.jsx)("div",{style:m.actions,children:null==o?void 0:o.map(((e,t)=>(0,d.jsx)(p,{...e},`marketplace-modal-action-${t}`)))})]})}function p(e){const t=(0,i().yK)((()=>({plainButton:{justifyContent:"center"},actionError:{textAlign:"center"}})),[]);return(0,d.jsxs)(d.Fragment,{children:[(()=>{switch(e.type){case"primary":return(0,d.jsx)(c().Z,{isLarge:!0,onClick:e.onClick,disabled:e.isDisabled,isLoading:e.isLoading,children:e.text});case"outline":return(0,d.jsx)(s().Z,{isLarge:!0,onClick:e.onClick,children:(0,d.jsx)(n().q,{styleName:"UIRegular-14px/Medium",children:e.text})});case"plain":return(0,d.jsx)(o().Z,{isLarge:!0,onClick:e.onClick,isBlue:e.isBlue,isGray:!e.isBlue,style:t.plainButton,children:(0,d.jsx)(n().q,{styleName:"UIRegular-14px/Medium",children:e.text})});default:(0,l().t1)(e)}})(),e.error&&(0,d.jsx)(n().q,{styleName:"UIRegular-14px/Regular",colorName:"redTertiary",customStyles:t.actionError,children:e.error})]})}}}]);