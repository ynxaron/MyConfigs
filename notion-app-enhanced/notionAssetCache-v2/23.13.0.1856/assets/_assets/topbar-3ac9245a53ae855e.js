"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[28407],{972544:(e,t,n)=>{n.d(t,{S:()=>i,Z:()=>a});var o=n(667294),r=n(785893);const i=8;function s(e,t){let{isSelected:o}=e;const{radioButtonStyle:s,dotStyle:a}=(0,n(846550).yK)((e=>({radioButtonStyle:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:16,height:16,borderRadius:16,marginRight:i,background:o?e.blueColor:e.whiteButtonBackground,border:o?"none":`1px solid ${e.radioButtonBorder}`,transition:"background 100ms ease-out"},dotStyle:{width:6,height:6,borderRadius:6,background:e.regularInvertedTextColor,transition:"opacity 100ms ease-out",opacity:o?1:0}})),[o]);return(0,r.jsx)("div",{ref:t,style:s,children:(0,r.jsx)("div",{style:a})})}const a=o.forwardRef(s)},801142:(e,t,n)=>{n.r(t),n.d(t,{TopbarSubmitPostButton:()=>v});var o=n(667294),r=()=>n(219727),i=()=>n(142735),s=()=>n(846550),a=()=>n(161002),l=()=>n(788860),d=()=>n(707513),p=()=>n(497065),c=()=>n(239482),u=()=>n(199676),m=()=>n(424629),f=()=>n(774172),g=()=>n(620358),h=()=>n(154186),b=()=>n(906651),y=n(785893);function v(e){const{store:t}=e,n=(0,r().O7)(),v=(0,r().Fy)(),S=(0,o.useCallback)((()=>{if(!t)return;const e=(0,c().VP)(t);e&&p().c4({environment:n,url:(0,a().y)({teamId:e.id})})}),[n,t]),x=(0,o.useCallback)((()=>{u().b({environment:n,draftPostStore:t,onSubmitPost:S})}),[n,t,S]),C=(0,o.useCallback)((()=>{t&&(0,f().g)(t)?g().Z.setState({isOpen:!0}):x()}),[t,x]),k=(0,i().VK)((()=>g().Z.state.isOpen),[]),D=(0,s().yK)((e=>({postButtonMobile:{display:"flex",alignItems:"center",height:32,paddingLeft:12,paddingRight:12,marginRight:16,fontWeight:d().Ue.medium,color:e.text.primary,background:e.tint.regular,borderRadius:16},postButtonDesktop:{marginLeft:2},iconButton:{marginLeft:16,background:e.tint.regular,borderRadius:16,width:32,height:32},rightButtons:{display:"flex",alignItems:"center"}})),[]);return(0,y.jsxs)(y.Fragment,{children:[v.isMobile?(0,y.jsx)(h().Z,{onClick:C,style:D.postButtonMobile,children:(0,y.jsx)(l()._H,{id:"posts.postButton.label",defaultMessage:"Post"})}):(0,y.jsx)(b().Z,{onClick:C,style:D.postButtonDesktop,children:(0,y.jsx)(l()._H,{id:"posts.postButton.label",defaultMessage:"Post"})}),(0,y.jsx)(m().Z,{postStore:t,isOpen:k,onDismiss:()=>g().Z.setState({isOpen:!1}),onConfirm:()=>{g().Z.setState({isOpen:!1}),x()}})]})}},46845:(e,t,n)=>{n.d(t,{D:()=>o().D});var o=()=>n(396820)},199676:(e,t,n)=>{n.d(t,{b:()=>f});n(670560),n(429830),n(267602),n(241792),n(228244);var o=()=>n(481529),r=()=>n(728670),i=()=>n(528514),s=()=>n(933868),a=()=>n(255933),l=()=>n(332542),d=()=>n(269299),p=()=>n(205228),c=()=>n(872308),u=()=>n(774172),m=()=>n(20825);function f(e){const{environment:t,draftPostStore:n,onSubmitPost:s}=e,f=t.currentUser.id;n&&f&&(n.isPublishedPost()||(!function(e){const{environment:t,postStore:n}=e;d().createAndCommit({environment:t,perform:e=>(n.getContentStores().toReversed().some((t=>{if(!(0,u().y)(t))return!0;l().hr({childStore:t,parentStore:n,transaction:e})})),n),userAction:"PostChannel.trimPostDraft",canUndo:!1})}({environment:t,postStore:n}),function(e){const{environment:t,blockToDuplicateStore:n,userId:s}=e;if(!n.isDefined())return;const u=(0,r().DW)(n.getParentPointer(),n.getRecordModel),m=(0,i().Wo)(u).map((e=>({...e,role:g(e.role,"comment_only")})));m.push({type:"restricted_permission"}),m.push({type:"user_permission",user_id:s,role:"editor"}),d().createAndCommit({environment:t,perform:e=>{const[[r],i]=c().duplicateBlock({environment:t,stores:[n],addCopyName:!1,transaction:e,deepCopyTransclusionContainers:!1,resolveTemplateVariables:!1,targetSpaceId:n.getSpaceId(),baseUrl:p().default.domainBaseUrl,publicDomainName:p().default.publicDomainName,preferDuplicateLocation:"local",createActivities:!0});return d().applyOperation({store:r,operation:o().op.update({pointer:r.pointer,path:[],args:{alive:!0,parent_id:n.getParentId(),parent_table:n.getParentTable(),permissions:m,created_time:Date.now(),last_edited_time:Date.now()}}),transaction:e}),d().applyOperation({store:r,operation:{command:"update",pointer:r.pointer,path:["format"],args:{draft_status:"published"}},transaction:e}),d().applyOperation({store:n,operation:o().op.update({pointer:n.pointer,path:[],args:{alive:!1}}),transaction:e}),e.postSubmitCallbacks.push((()=>i.then((()=>d().createAndCommit({environment:t,perform:e=>(l().zo({blockStore:n,transaction:e}),d().applyOperation({store:n,operation:o().op.update({pointer:n.pointer,path:[],args:{parent_id:n.getSpaceId(),parent_table:a().bx,permissions:[{type:"restricted_permission"}]}}),transaction:e}),n),userAction:"PostChannel.cleanupDraft",canUndo:!1}))))),r},userAction:"PostChannel.publishDraft",canUndo:!1}).performResult}({environment:t,blockToDuplicateStore:n,userId:f}),null==s||s(),m().Z.setState({isOpen:!1})))}function g(e,t){if(!e)return e;const n="string"==typeof e&&e in s().xm?s().xm[e]:void 0;if(!n)return e;return n>s().xm[t]?t:e}},424629:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(667294),r=()=>n(788860),i=n(785893);function s(e){const t=(0,n(142735).VK)((()=>{if(!e.postStore)return 0;const t=(0,n(239482).tM)(e.postStore);return t?null==t?void 0:t.getRawMembership().length:0}),[e.postStore]);return(0,i.jsx)(n(708518).Z,{open:e.isOpen,onDismiss:e.onDismiss,render:()=>(0,i.jsx)(n(543631).ZP,{icon:n(46845).D,title:(0,i.jsx)(r()._H,{id:"posts.confirmMentionEveryoneModal.title",defaultMessage:"Notify {sizeOfTeam} people?",values:{sizeOfTeam:t}}),subtitle:(0,i.jsx)(r()._H,{id:"posts.confirmMentionEveryoneModal.subtitle",defaultMessage:"Using @everyone notifies everyone in the teamspace. Are you sure you want to send this?"}),confirmText:(0,i.jsx)(r()._H,{id:"posts.confirmMentionEveryoneModal.confirmText",defaultMessage:"Send"}),cancelText:(0,i.jsx)(r()._H,{id:"posts.confirmMentionEveryoneModal.cancelText",defaultMessage:"Edit message"}),confirmTextStyle:"red",radioOptions:[],onDismiss:e.onDismiss,onConfirm:e.onConfirm})})}const a=o.memo(s)},774172:(e,t,n)=>{n.d(t,{g:()=>i,y:()=>r});n(267602),n(749411);var o=()=>n(955620);function r(e){return!e.isTransclusionType()&&!e.hasContent()&&e.isEmptyTitle()}function i(e){const t=(0,o().y2U)(e.getTitleValue()),n=e.getContentStores().flatMap((e=>(0,o().y2U)(e.getTitleValue())));return t.length>0||n&&n.length>0}},620358:(e,t,n)=>{n.d(t,{Z:()=>r});class o extends(()=>n(263184))().default{getInitialState(){return{isOpen:!1}}}const r=new o},20825:(e,t,n)=>{n.d(t,{Z:()=>r});class o extends(()=>n(263184))().default{getInitialState(){return{isOpen:!1,blockStore:void 0}}}const r=new o},396820:(e,t,n)=>{n.d(t,{D:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("megaphone",{viewBox:"0 0 64 64",svg:(0,o.jsx)("path",{d:"m54,10v40h-4l-20-10h-4l4,16h-10l-4-16c-4.94,0-8-3.06-8-8v-4c0-4.94,3.06-8,8-8h14l20-10h4Z"})})},429830:(e,t,n)=>{var o=n(79989),r=n(826166),i=n(165290),s=n(87370),a=Array;o({target:"Array",proto:!0},{toReversed:function(){return r(i(this),a)}}),s("toReversed")}}]);