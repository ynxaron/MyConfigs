"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[79289],{686929:(e,t,o)=>{o.d(t,{ZP:()=>C,le:()=>k});o(670560),o(267602),o(653476);var r=o(667294),i=()=>o(219727),n=()=>o(142735),l=()=>o(846550),a=()=>o(619857),s=()=>o(159732),d=()=>o(788860),p=()=>o(984871),c=()=>o(139224),u=()=>o(765458),y=()=>o(125659),g=()=>o(347577),m=()=>o(164079),h=()=>o(529048),f=()=>o(763058),v=()=>o(154186),b=()=>o(265640),P=()=>o(448419),S=()=>o(967092),x=()=>o(177610),w=o(785893);function C(e){const{locked:t,disabled:o,collectionStore:r,mergedProperties:i,schema:l,isCompact:a,pagePropertiesStore:s,wrapperStyle:d}=e,p=(0,n().VK)((()=>s.state.forceShowProperties),[s]),c=B(i,l,a),u=(0,x().vg)(r),y=[];return(p||0===c)&&(!t&&!o&&u)&&y.push((0,w.jsx)(k,{...e},"add-property")),c>0&&(p?y.push((0,w.jsx)(I,{mergedProperties:i,schema:l,isCompact:a,pagePropertiesStore:s},"hide-properties")):y.push((0,w.jsx)(j,{mergedProperties:i,schema:l,isCompact:a,pagePropertiesStore:s},"show-more"))),y.length>0&&d?(0,w.jsx)("div",{style:d,children:y}):(0,w.jsx)(w.Fragment,{children:y})}function k(e){const{collectionStore:t,isInPeekRenderer:o,pagePropertiesStore:l,propertyGroupId:a,onPropertyAdded:v,disabled:x,iconStyle:C}=e,k=(0,y().DK)(),j=(0,i().O7)(),I=(0,n().qz)(void 0,h().Z),V=M(),B=(0,n().VK)((()=>null==k?void 0:k.settingsStore.state.open),[null==k?void 0:k.settingsStore]);(0,r.useEffect)((()=>{B||I.setState({...I.state,open:!1})}),[I,B]);const T=(0,n().qz)(l,f().pB),A=(0,r.useCallback)((()=>{k&&p().fH({environment:j,propertyGroupId:a,collectionContextStore:k,pagePropertiesStore:T,collectionStore:t,isInPeekRenderer:o,onCloseMenu:e=>{null==v||v(e),I.setState({open:!1})},propertyVisibility:"show"})}),[j,a,k,T,t,o,v,I]),L=(0,n().VK)((()=>null==k?void 0:k.permissionScopesStore.state),[k]);return null!=L&&L.isExternallyImportedAndSyncedCollection||!k?null:(0,w.jsx)("div",{style:{display:"flex"},children:(0,w.jsx)(P().ZP,{popupType:j.device.isMobile?S().kQ.SlideUp:S().kQ.Popup,buttonPopupStore:I,originGap:1,alignmentToOrigin:P().vR.Start,render:()=>(0,w.jsx)(u().PJ,{context:g().HV.TopbarFilterPopup,collectionContextStore:k,collectionSettingsStore:k.settingsStore,hideDesktopHeader:!0}),onClick:A,onClose:()=>{const e=k.settingsStore;c().E3({collectionSettingsStore:e})},renderOrigin:t=>(0,w.jsx)(b().D,{style:V.AddOrTogglePropertyButtonStyle,iconStyle:{...V.ActionPropertyButtonIconStyle,...C},icon:s().R,disabled:x,disabledFeedback:!0,...(0,m().Z)(e,t),children:(0,w.jsx)(d()._H,{defaultMessage:"Add a property",id:"database.pageProperties.addPropertyButtonTitle"})})})})}function j(e){const{mergedProperties:t,schema:o,isCompact:i,pagePropertiesStore:n}=e,l=M(),s=B(t,o,i),p=(0,r.useCallback)((e=>{e.stopPropagation(),n.setState({...n.state,forceShowProperties:!0})}),[n]);return(0,w.jsx)("div",{style:{display:"flex"},children:(0,w.jsx)("div",{style:l.AddOrToggleContainerStyle,children:(0,w.jsxs)(v().Z,{style:{...l.AddOrTogglePropertyButtonStyle,...e.style},onClick:p,children:[(0,a().Y)(l.ActionPropertyButtonIconStyle),(0,w.jsx)("div",{style:l.AddPropertyButtonTitleStyle,children:(0,w.jsx)(d()._H,{defaultMessage:"{num, plural, one {1 more property} other {{num} more properties}}",id:"database.pageProperties.showMorePropertyTitle",values:{num:s}})})]},"show-more")})})}function I(e){const{mergedProperties:t,schema:o,isCompact:i,pagePropertiesStore:n}=e,l=B(t,o,i),s=M(),p=(0,r.useCallback)((e=>{e.stopPropagation(),n.setState({...n.state,forceShowProperties:!1})}),[n]);return(0,w.jsx)("div",{style:{display:"flex"},children:(0,w.jsxs)(v().Z,{style:{...s.AddOrTogglePropertyButtonStyle,...e.style},onClick:p,children:[(0,a().Y)({...s.ActionPropertyButtonIconStyle,transform:"rotate(180deg)"}),(0,w.jsx)("div",{style:s.AddPropertyButtonTitleStyle,children:(0,w.jsx)(d()._H,{defaultMessage:"{num, plural, one {Hide 1 property} other {Hide {num} properties}}",id:"database.pageProperties.hidePropertyTitle",values:{num:l}})})]},"hide-properties")})}const V=16;function M(){const e=(0,i().O7)();return(0,l().yK)((t=>{const{device:o}=e;return{AddOrToggleContainerStyle:{display:"grid"},AddOrTogglePropertyButtonStyle:{display:"flex",alignItems:"center",color:t.text.tertiary,fontSize:14,borderRadius:4,paddingLeft:6,paddingRight:6,height:34,width:o.isMobile?"100%":"auto",gridColumn:1,gridRow:1},ActionPropertyButtonIconStyle:{width:V,height:V,marginRight:6,marginTop:1,fill:t.icon.tertiary},AddPropertyButtonTitleStyle:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0,lineHeight:`${V}px`}}}),[e])}function B(e,t,o){return(0,r.useMemo)((()=>e.filter((e=>"hide"===e.visibility||"hide_if_empty"===e.visibility&&!e.hasValue)).length),[e])}},177610:(e,t,o)=>{o.d(t,{G_:()=>f,nd:()=>h,r$:()=>v,vg:()=>m});o(821057),o(267602),o(653476),o(470928),o(241792);var r=o(667294),i=()=>o(219727),n=()=>o(142735),l=()=>o(788860),a=()=>o(513670),s=()=>o(421654),d=()=>o(269299),p=()=>o(887430),c=()=>o(141735),u=()=>o(677559),y=()=>o(170075),g=()=>o(70191);function m(e){return(0,n().VK)((()=>!!e&&p().eD({collectionStore:e,collectionViewBlockStore:e.getParentBlockStore(),checkNavigableAncestorLocked:!1})),[e])}function h(e){let{store:t,format:o,schema:r,collectionStore:a,propertyIds:s,propertyGroupId:d}=e;const p=(0,i().O7)(),y=(0,l().YB)(),{value:m}=(0,u().XJ)(c().F.formulas);return(0,n().VK)((()=>(0,g().WM)({store:t,format:o,schema:r,collectionStore:a,propertyIds:s,propertyGroupId:d,intl:y,environment:p,formulasModule:m})),[t,o,r,a,s,d,y,p,m])}function f(e){let{collectionStore:t,format:o}=e;const n=(0,i().O7)();return(0,r.useCallback)((e=>{const r=o.collection_page_properties||[],i=[...(0,a().oA)(e.map((e=>r.find((t=>t.property===e))))),...r.filter((t=>!e.includes(t.property)))];d().createAndCommit({userAction:"PageProperties.handleReorder",environment:n,canUndo:!0,perform:e=>{s().FH({stores:[t],update:{collection_page_properties:i},transaction:e})}})}),[t,n,o.collection_page_properties])}function v(e){let{collectionStore:t,format:o,propertyGroupId:n}=e;const l=(0,i().O7)();return(0,r.useCallback)((e=>{if(!n)throw new Error("cannot reorder properties for property group -- no property group id provided");d().createAndCommit({userAction:"PagePropertiesGroup.handleReorder",environment:l,canUndo:!0,perform:o=>{(0,y().N8)({collectionStore:t,newPartialPropertyIds:e,groupId:n,transaction:o})}})}),[t,l,n])}},857719:(e,t,o)=>{o.d(t,{J7:()=>w,Nx:()=>b,Pb:()=>v,Vc:()=>u,Vw:()=>P,Xg:()=>c,a3:()=>C,uI:()=>k,us:()=>h,w3:()=>y});o(241792);var r=o.n(o(294184)),i=o(667294),n=()=>o(846550),l=()=>o(696459),a=()=>o(802911),s=()=>o(78078),d=()=>o(521635),p=o(785893);const c=i.forwardRef((function(e,t){const{children:i,type:n,gap:l,withBottomPadding:a,style:s,onMouseDown:c,onClick:u,onDoubleClick:y,onContextMenu:g}=e,m=(0,o(309797).n1)(n),h=(0,o(142735).VK)((()=>d().Z.getPanelState("peek").isOpen&&"static_sidebar"===d().Z.getPanelState("peek").displayStyle),[]);return(0,p.jsx)("div",{className:r()("layout",{"layout-wide":"wide"===n,"layout-wide-right-margin-expanded":"wide-right-margin-expanded"===n,"layout-side-peek":"side-peek"===n,"layout-center-peek":"center-peek"===n&&!h,"layout-center-peek-with-layout-panel":"center-peek"===n&&h,"layout-home":"home"===n,"layout-home-phone":"home-phone"===n,"layout-home-redesign-desktop":"home-redesign-desktop"===n,"layout-form":"form"===n,"layout-form-viewer":"form-viewer"===n,"layout-form-viewer-embed":"form-viewer-embed"===n,"layout-phone":"phone"===n,"layout-tablet":"tablet"===n,"layout-template-preview":"template-preview"===n,"layout-chat":"chat"===n,"layout-layout-editor":"layout-editor"===n,"layout-layout-editor-wide":"layout-editor-wide"===n,"layout-layout-editor-narrow":"layout-editor-narrow"===n,"layout-marketplace":"marketplace"===n,"layout-marketplace-mobile":"marketplace-mobile"===n,"layout-team-home":"team-home"===n,"layout-team-home-mobile":"team-home-mobile"===n,"layout-create-post":"create-post"===n}),style:{paddingBottom:a?m:void 0,gap:l,...s},ref:t,onMouseDown:c,onClick:u,onDoubleClick:y,onContextMenu:g,children:i})})),u="layout-content",y="layout-full",g="layout-margin-right",m="layout-nested-grid",h="hide-scrollbar",f="layout-column",v=i.forwardRef((function(e,t){return(0,p.jsx)("div",{className:r()(u,e.className),style:e.style,ref:t,children:e.children})}));function b(e){return(0,p.jsx)("div",{className:y,style:e.style,children:e.children})}function P(e){return(0,p.jsx)("div",{className:g,style:{...e.style,pointerEvents:"none"},children:e.children})}const S=(0,i.forwardRef)((function(e,t){return(0,p.jsx)("div",{className:r()(m,e.className),onClick:e.onClick,style:e.style,role:e.role,id:e.id,"aria-labelledby":e["aria-labelledby"],ref:t,children:e.children})}));function x(e){return"left-aligned"===e?"flex-start":"centered"===e?"center":"right-tabs"===e?"flex-end":void(0,l().t1)(e)}function w(e){const{items:t,style:o,index:r,setIndex:l,title:d}=e,c=(0,i.useRef)([]),u="centered"===o||"right-tabs"===o,y=(0,n().yK)((e=>({icon:{width:16,height:16,fill:"currentColor"},label:{fontSize:14,fontWeight:600},header:"right-tabs"===o?{display:"flex",justifyContent:"space-between",alignItems:"baseline"}:{},tablist:"right-tabs"===o?{display:"flex"}:{},tab:u?{cursor:"pointer",border:"none",padding:"6px 12px",borderRadius:20,color:e.text.secondary,background:"none"}:{cursor:"pointer",border:"none",borderBottom:"2px solid",borderColor:"transparent",padding:"6px 8px 12px",color:e.text.secondary,background:"none"},tabSelected:u?{color:e.text.primary,background:e.tint.regular}:{color:e.text.primary,borderColor:e.regularTextColor}})),[u,o]),g=(0,i.useId)(),m=(0,i.useCallback)((e=>`${g}-tab-${e}`),[g]),h=(0,i.useCallback)((e=>`${g}-tabpanel-${e}`),[g]),f=(0,i.useCallback)((e=>{let o;var i;("ArrowLeft"===e.key?(e.preventDefault(),o=(r+t.length-1)%t.length):"ArrowRight"===e.key&&(e.preventDefault(),o=(r+1)%t.length),void 0!==o)&&(l(o),null===(i=c.current[o])||void 0===i||i.focus())}),[r,l,t.length]);return(0,p.jsx)(a().Z,{name:"PageLayoutTabs",children:(0,p.jsxs)(S,{children:[(0,p.jsx)(v,{children:(0,p.jsxs)("div",{style:y.header,children:["right-tabs"===o&&d,(0,p.jsx)("div",{role:"tablist",style:y.tablist,children:(0,p.jsx)(s().X2,{justifyContent:x(o),children:t.map(((e,t)=>{var o;return(0,p.jsx)("button",{ref:e=>{e&&(c.current[t]=e)},id:m(t),role:"tab","aria-controls":h(t),"aria-selected":t===r,tabIndex:t===r?void 0:-1,onKeyDown:f,style:{...y.tab,...t===r&&y.tabSelected},onClick:e=>{e.stopPropagation(),l(t)},children:(0,p.jsxs)(s().X2,{gap:4,alignItems:"center",children:[null===(o=e.icon)||void 0===o?void 0:o.call(e,y.icon),e.label&&(0,p.jsx)("div",{style:y.label,children:e.label})]})},e.key)}))})})]})}),(0,p.jsx)(S,{id:h(r),role:"tabpanel","aria-labelledby":m(r),children:t[r]?t[r].children:null})]})})}function C(e){return(0,p.jsx)("div",{className:r()(f,e.className),style:{"--min-column-width":e.minWidth?`${e.minWidth}px`:"100%",...e.style},children:e.children})}function k(e){return(0,p.jsxs)(C,{minWidth:e.minWidth,className:e.className,style:e.style,children:[e.left,e.right]})}},864060:(e,t,o)=>{o.d(t,{Z:()=>l,k:()=>n});var r=()=>o(677559);const i={PinnedInfoPanelToggleButton:new(r().Ss)("PinnedInfoPanelToggleButton",(async()=>o.e(34268).then(o.bind(o,354007)))),PageHeaderInfoPanelToggleButton:new(r().Ss)("PageHeaderInfoPanelToggleButton",(async()=>o.e(8505).then(o.bind(o,699029))))},n=(0,r().kF)(i.PinnedInfoPanelToggleButton,(e=>e.default)),l=(0,r().kF)(i.PageHeaderInfoPanelToggleButton,(e=>e.default))},452220:(e,t,o)=>{o.d(t,{$:()=>a});o(667294);var r=()=>o(142735),i=()=>o(846550),n=()=>o(707513),l=o(785893);function a(e){const{children:t,style:o}=e,{store:a}=e.icon?e:{},s=(0,r().VK)((()=>{var e;return"hide"!==(null==a||null===(e=a.getAssociatedCollectionStore())||void 0===e||null===(e=e.getLayoutStore())||void 0===e||null===(e=e.getFormat())||void 0===e?void 0:e.property_icons_visibility)}),[a]),d=(0,i().yK)((e=>({title:{padding:"3px 0",fontSize:13,lineHeight:"18px",color:e.text.secondary,display:"flex",flexDirection:"row",alignItems:"center",fontWeight:n().Ue.medium,gap:2,...o},icon:{width:18,height:24,fill:e.icon.secondary}})),[o]);return(0,l.jsxs)("div",{style:d.title,children:[e.icon&&s&&e.icon(d.icon),(0,l.jsx)("div",{children:t})]})}},179289:(e,t,o)=>{o.d(t,{V:()=>Ue});var r=o(667294),i=()=>o(142735),n=()=>o(788860),l=()=>o(58836),a=()=>o(251932),s=(o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(241792),()=>o(219727)),d=()=>o(846550),p=()=>o(839212),c=()=>o(293836),u=()=>o(722917),y=()=>o(513670),g=()=>o(696459),m=()=>o(326966),h=()=>o(1723),f=()=>o(237874),v=()=>o(342792),b=()=>o(959137),P=()=>o(661297),S=()=>o(205228),x=()=>o(749826),w=()=>o(629513),C=()=>o(507335),k=o(785893);const j=(0,n().vU)({linkCopied:{defaultMessage:"Link copied. Share it with others who may find this useful.",id:"ai.gtmFavoriteActions.linkCopied"},share:{defaultMessage:"Share as AI favorite",id:"ai.gtmFavoriteActions.share"},add:{defaultMessage:"Add to AI favorites",id:"ai.gtmFavoriteActions.add"}});function I(e){const{blockId:t}=e,o=(0,s().O7)(),i=(0,n().YB)(),l=(0,r.useCallback)((()=>{(0,w().importGtmFavorite)({environment:o,importArgs:{name:"aiGtmFavoriteImport",blockId:t}})}),[t,o]),a=(0,r.useCallback)((async()=>{const e=`${S().default.domainBaseUrl}/ai-gtm/${(0,v().cj)(t)}`;(await b().F.clipboardActions.load()).copyString({environment:o,stringValue:e,copiedMessage:j.linkCopied})}),[t,o]);return(0,k.jsxs)("div",{style:{marginTop:12,marginBottom:12},children:[(0,k.jsx)(P().Z,{onClick:a,icon:f().N,children:i.formatMessage(j.share)}),o.currentUser.isLoggedIn()&&(0,k.jsx)(P().Z,{onClick:l,style:{marginLeft:12},icon:h().l,children:i.formatMessage(j.add)})]})}var V=()=>o(233417),M=()=>o(407544),B=()=>o(311562),T=()=>o(864266),A=()=>o(177610),L=(o(670560),o(30005),o(228244),()=>o(226413)),R=()=>o(887430),O=()=>o(982855),K=()=>o(876822),_=()=>o(890324),F=()=>o(404791),G=()=>o(768055),Z=()=>o(119891),W=(o(470928),()=>o(492788)),D=()=>o(909240),E=()=>o(874018),H=()=>o(125659),z=()=>o(589024),N=()=>o(704713),U=()=>o(231272),$=()=>o(206658),Y=()=>o(70191),Q=()=>o(356321),X=()=>o(63562),q=()=>o(663221),J=()=>o(159732),ee=()=>o(984871),te=()=>o(998901),oe=()=>o(679791),re=()=>o(654133),ie=()=>o(307369);function ne(e){const{property:t,store:l,disabled:a,canConfigureCollection:p,onTab:c,onUntab:u,schema:y,blockPropertyValueOverlayStore:g,collectionStore:m,pagePropertiesStore:h,customization:f}=e,v=(0,s().O7)(),{device:b,currentUser:S}=v,w=(0,d().Fg)(),C=(0,H().DK)(),j=y[t],[I,V]=r.useState(!1),{value:M}=(0,o(677559).XJ)(o(141735).F.formulas),B=(0,d().yK)((()=>({propertyOuter:{display:"flex",alignItems:"left",height:"100%",flex:"auto",flexDirection:"column",minWidth:0,...null!=f&&f.stackPropertyLabelAndValue?{marginLeft:0}:{marginLeft:4}},property:{display:"flex",alignItems:"center",height:"100%",flex:"auto",minWidth:0,...null!=f&&f.stackPropertyLabelAndValue?{marginLeft:0}:{marginLeft:4}},addPageButton:{fontSize:14,minHeight:o(820748).wI,color:w.lightTextColor,background:void 0,boxShadow:void 0,borderBottom:"none"}})),[null==f?void 0:f.stackPropertyLabelAndValue,w.lightTextColor]),T=(0,r.useCallback)((()=>{h.setState({...h.state,hoveredProperty:e.property}),V(!0)}),[e.property,h]),A=(0,r.useCallback)((()=>{h.setState({...h.state,hoveredProperty:void 0}),V(!1)}),[h]),R=(0,r.useCallback)((()=>{D().bA({environment:v,blockPropertyValueOverlayStore:g,store:l,property:t,format:Q().C.Page,collectionContextStore:C})}),[v,g,l,t,C]),O=(0,i().VK)((()=>b.isMobile&&!a&&"relation"===(null==j?void 0:j.type)&&l.isDefined()&&!o(532850).wV({block:l.getModel(),property:t,schema:y,getRecordModel:l.getRecordModel,userId:S.id,userTimeZone:(0,o(998411).r)(),intl:o(527278).Z.getIntl(),experimentService:x().default,collectionFeatureGates:(0,o(615676).W)(),formulasModule:M})),[S.id,b.isMobile,a,t,j,y,l,M]),_=(0,i().VK)((()=>(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(P().Z,{onClick:()=>{const e={name:"AI Summary",type:"text",ai_inference:{type:"summarize",auto_update_on_edit:!1}};o(106502).aiDependency.load().then((async t=>{let{propertyCompletionsActions:r}=t;await o(269299).createAndCommitAsync({userAction:"collectionPageAISummarySuggestion.tryOnThisPage",environment:v,waitForServerCommit:!1,perform:async t=>{const i=ee().G3({environment:v,collectionStore:m,collectionViewArgs:void 0,propertyType:"ai_summary",transaction:t,propertySchema:e});C&&o(250303)._H({environment:v,collectionContextStore:C,from:"try_on_this_page_suggestion",property_type:"text",property:"ai_summary",is_suggested_property:!0}),await r.autofillPropertyForBlocks({environment:v,stores:[l],property:i,propertySchema:e,userEventForAnalytics:"generate_from_try_on_this_page_suggestion",from:"page_properties",collectionContextStore:void 0,transaction:t})}})}))},icon:e=>(0,o(828042).t)({...e,fill:w.aiPurpleColor}),children:(0,k.jsx)(n()._H,{id:"AiSummaryTryOnThisPage",defaultMessage:"Try on this page"})}),I&&(0,k.jsx)(re().Z,{render:e=>(0,k.jsx)(o(1910).Z,{...e,icon:o(80122).X,ariaLabel:"clear",hoveredStyle:{background:"inherit"},onClick:()=>{var e;null!==(e=K().default.state.currentSpaceViewStore)&&void 0!==e&&e.isDefined&&o(261930).ce(v,K().default.state.currentSpaceViewStore)}}),renderTooltip:()=>(0,k.jsx)(n()._H,{id:"AiSummaryTryOnThisPage.dimissButtonTooltip",defaultMessage:"Dismiss suggestion"}),placement:te().Placement.Top})]})),[C,m,v,I,l,w.aiPurpleColor]);return(0,k.jsx)("div",{role:"cell",style:B.propertyOuter,children:(0,k.jsxs)(ie().Z,{store:l,analyticsName:"page_property",children:[(0,k.jsx)("div",{style:B.property,onMouseMove:T,onMouseLeave:A,children:t===L().ow?_:(0,k.jsx)(oe().m,{store:l,property:t,locked:!p,disabled:a,format:Q().C.Page,onTab:c,onUntab:u,tableWrap:!1,blockPropertyValueOverlayStore:g,onOpenProperty:R,collectionStore:m})},t),O&&(0,k.jsx)(o(827973).Z,{focused:!1,icon:(0,J().R)({width:14,fill:w.lightIconColor}),buttonStyle:{marginRight:0,width:"calc(100% - 4px)"},mobileIconStyle:{marginLeft:12},textWrapperStyle:{marginLeft:4},style:B.addPageButton,title:(0,k.jsx)(n()._H,{id:"pagePropertyRowValue.addRelationButtonMessage",defaultMessage:"Add page"}),onClick:R})]})})}const le=r.memo(ne);function ae(e){const{schema:t,format:o,store:n,collectionStore:l,disabled:p,locked:c,blockPropertyValueOverlayStore:u,isInPeekRenderer:m,property:h,mergedProperties:f,hideDragHandle:v,disablePropertyName:b,opacity:P,pagePropertiesStore:S,customization:x,isCollectionViewLocked:w,canConfigureCollection:C,layoutModule:j}=e,I=(0,r.useId)(),V=(0,s().O7)(),M=(0,H().DK)(),B=(0,r.useCallback)((()=>{const e=u.state;if(!e.isOpen)return;const o=f,r=o.findIndex((t=>t.property===e.property)),i=o.find(((e,o)=>o>r&&se(t,e.property)))||o.find(((e,o)=>se(t,e.property)));i&&W().default.afterNextFlush((()=>{D().bA({environment:V,blockPropertyValueOverlayStore:u,store:n,property:i.property,format:Q().C.Page,collectionContextStore:M})})),D().xv({environment:V,blockPropertyValueOverlayStore:u})}),[u,M,V,f,t,n]),T=(0,r.useCallback)((()=>{const e=u.state;if(!e.isOpen)return;const o=f,r=o.findIndex((t=>t.property===e.property)),i=y().dF(o,((e,o)=>o<r&&se(t,e.property)))||y().dF(o,((e,o)=>se(t,e.property)));i&&W().default.afterNextFlush((()=>{D().bA({environment:V,blockPropertyValueOverlayStore:u,store:n,property:i.property,format:Q().C.Page,collectionContextStore:M})})),D().xv({environment:V,blockPropertyValueOverlayStore:u})}),[u,M,V,f,t,n]),A=(0,$().E)(n),L=(0,i().VK)((()=>{var e;return"hide"===(null==A||null===(e=A.getFormat())||void 0===e?void 0:e.property_icons_visibility)}),[A]),R=Boolean(null==x?void 0:x.stackPropertyLabelAndValue),O=r.useRef(null),K=(0,N().X)(O,50),[_,F]=r.useState(0);(0,r.useEffect)((()=>{var e;F((null==K?void 0:K.width)||(null===(e=O.current)||void 0===e?void 0:e.offsetWidth)||0)}),[K]);const G=(0,d().yK)((e=>({container:{display:"flex",width:"100%",position:"relative",opacity:P??1,...null!=x&&x.stackPropertyLabelAndValue?{flexDirection:"column",marginBottom:null!=x&&x.disableRowBottomMargin?void 0:16}:{marginBottom:null!=x&&x.disableRowBottomMargin?void 0:4}},discussionIndicatorContainer:{position:"absolute",alignSelf:"center",..._?{left:_+4}:{right:0},top:6}})),[_,null==x?void 0:x.disableRowBottomMargin,null==x?void 0:x.stackPropertyLabelAndValue,P]),Z="normalizedTitleWithIcon"===j.type&&"hide"===j.propertyLabels,{isPropertyInPageDetails:z}=(0,Y().d0)({store:n,propertyId:h}),{isMobile:J}=V.device,ee=(0,U().gM)({isMobile:J,stackPropertyLabelAndValue:R,isPropertyInPageDetails:z}),te=c||w;return(0,k.jsxs)("div",{role:"row","aria-labelledby":I,ref:O,style:G.container,children:[(0,k.jsx)(X().uI,{origin:O}),(0,k.jsxs)(a().gq,{alignItems:"center",alignSelf:"flex-start",style:{...z?{width:"100%"}:void 0,...(0,g().$K)(ee)?{width:ee,flexShrink:0}:void 0},children:[!Z&&(0,k.jsx)(q().Z,{schema:t,format:o,property:h,collectionStore:l,pagePropertiesStore:S,disabled:Boolean(p||b),locked:te,canConfigureCollection:C,isInPeekRenderer:m,hideIcon:L,hideDragHandle:v,showDragHandleAsIcon:!te&&!p,propertyNameAriaId:I,styleVariants:{height:{variant:null==x?void 0:x.heightVariant},width:(0,U().Gm)({stackPropertyLabelAndValue:R}),size:"medium",fontWeight:"regular"},blockStore:n}),!J&&(0,k.jsx)(E().zl,{store:n,propertyId:h,style:z?void 0:{position:"absolute",alignSelf:"center",..._?{left:_+4}:{right:0},top:6}})]}),(0,k.jsx)(le,{schema:t,property:h,store:n,collectionStore:l,pagePropertiesStore:S,disabled:p||c,canConfigureCollection:C,onTab:B,onUntab:T,blockPropertyValueOverlayStore:u,customization:x}),J&&(0,k.jsx)(E().zl,{store:n,propertyId:h,style:{marginTop:6}})]},h)}function se(e,t){return(0,z().AB)(e[t])}function de(e){const{disabled:t,locked:o,collectionStore:l,format:a,mergedProperties:d,propertyGroupId:p,showHiddenProperties:c,hideDragHandle:u,pagePropertiesStore:y,store:g}=e,m=(0,n().YB)(),h=(0,s().O7)(),f=d,v=(0,A().vg)(l),b=(0,A().G_)({collectionStore:l,format:a}),P=(0,A().r$)({collectionStore:l,format:a,propertyGroupId:p}),S=p?P:b,w=m.formatMessage({id:"pageProperties.tableLabel",defaultMessage:"Page properties"}),C=function(e){const{properties:t,showHiddenProperties:o}=e;return(0,r.useMemo)((()=>{const e=[];let r=0;return t.forEach((t=>{if("section"!==t.visibility)return o?(e.splice(r,0,t.property),void(r+=1)):void("hide"!==t.visibility&&("hide_if_empty"!==t.visibility||t.hasValue)?(e.splice(r,0,t.property),r+=1):e.push(t.property));e.push(t.property)})),{all:e,visible:e.slice(0,r)}}),[t,o])}({properties:f,showHiddenProperties:c}),j=(0,i().VK)((()=>{var e,t;if(h.device.isMobile)return!1;if(void 0!==p)return!1;const o=(null===(e=K().default.state.currentSpaceViewStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.dismissed_db_page_summary_suggestion)??0,r=Boolean(null===(t=F().Z.state)||void 0===t?void 0:t.isEligible),i=(0,O().RT)(_().Z.getMode(h,g),g),n=function(e){const{collectionStore:t,store:o,dismissedCount:r,isEligibleForAIUsage:i}=e;if(i){const e=Object.values(t.getSchema()).some((e=>{var t;return"text"===(null==e?void 0:e.type)&&"summarize"===(null===(t=e.ai_inference)||void 0===t?void 0:t.type)})),i=(0,G().W)(o)>500,n=r>0,l=Object.values(t.getDeletedSchema()).some((e=>{var t;return"text"===(null==e?void 0:e.type)&&"summarize"===(null===(t=e.ai_inference)||void 0===t?void 0:t.type)}));if(!e&&i&&!n&&!l)return!0}return!1}({collectionStore:l,store:g,dismissedCount:o,isEligibleForAIUsage:r&&i});return!!n&&"on"===x().default.getEligibleGroup({experimentId:"database_ai_summary_suggestion",defaultGroup:"control"})}),[l,h,g,p]),I=function(e){const{properties:t,shouldShowAISummary:o}=e;return(0,r.useMemo)((()=>o?[...t.visible,L().ow]:t.visible),[t,o])}({properties:{all:C.all,visible:C.visible},shouldShowAISummary:j}),V=(0,i().VK)((()=>(0,R().p1)(l)),[l]),M=t=>({...e.rowCustomization,...e.disableLastRowBottomPadding&&t===I.length-1?{disableRowBottomMargin:!0}:void 0});return t||o||!v||u?(0,k.jsx)("div",{role:"table","aria-label":w,style:Z().yA,children:I.map(((t,o)=>(0,k.jsx)("div",{children:(0,k.jsx)(ae,{...e,customization:M(o),property:t,pagePropertiesStore:y,isCollectionViewLocked:V,canConfigureCollection:v})},t)))}):(0,k.jsx)(Z().ZP,{role:"table","aria-label":w,direction:"vertical",keys:I,getInvalidDropIndices:e=>{const t=I.indexOf(L().ow);return-1===t?new Set:new Set([t+1])},renderKey:(t,o)=>(0,k.jsx)(ae,{...e,customization:M(o),property:t,pagePropertiesStore:y,isCollectionViewLocked:V,canConfigureCollection:v}),onDrop:S})}var pe=()=>o(164079),ce=()=>o(644248),ue=()=>o(864060),ye=()=>o(162178),ge=()=>o(521635),me=()=>o(26796),he=()=>o(529048),fe=()=>o(279386),ve=()=>o(628370),be=()=>o(154186),Pe=()=>o(448419),Se=()=>o(967092);const xe=408;var we=()=>o(686929);const Ce=130;function ke(e){const{store:t,collectionStore:o,pagePropertiesStore:n,blockPropertyValueOverlayStore:l,compactProperties:p,disabled:c,locked:u,format:y,hiddenProperties:g,rowLength:m,variant:h,pageViewBlockContext:f,layoutModule:v}=e,b=(0,i().VK)((()=>o.getSchema()),[o]),[P,S]=(0,r.useState)(!1),x=(0,A().vg)(o),w=(0,i().VK)((()=>fe().MT.getMode(t)),[t]),C=(0,s().Fy)(),{isFirefox:j}=C,I=(0,i().qz)(void 0,he().Z),V=(0,H().Y$)(),M=(0,i().VK)((()=>o.getLayoutStore()),[o]),[T,L]=(0,r.useState)(!1),[R,O,K]=(0,ce().C)(),_=(0,N().X)(K,100),F=((null==_?void 0:_.width)||0)>=xe&&!C.isMobile,G=(0,i().VK)((()=>ge().Z.getPanelState("mainPage").isOpen),[]),Z=Boolean((0,r.useContext)(ye().eK)),W=(0,i().VK)((()=>t.isPost()),[t]),D=(0,r.useMemo)((()=>!!W||!(!v||!("propertyLabels"in v)||"hide"!==v.propertyLabels)),[v,W]),z=(0,i().VK)((()=>{if(Z)return!1;const e=null==M?void 0:M.getModules();return!(!e||"pinned"!==h||0===e.page_details.length)}),[Z,M,h]),U=(0,i().VK)((()=>F&&G&&!O?"hidden":"visible"),[O,F,G]),$=F,Y=(0,d().yK)((()=>{const e={display:"grid",gridTemplateColumns:`repeat(${p.length>m?m:"auto-fit"}, minmax(80px, max-content))`,columnGap:4,rowGap:4};return{container:{...z&&$?{display:"flex",flexDirection:"row",gap:8}:void 0,...z&&!$?{display:"flex",flexDirection:"column",gap:6}:void 0},row:{...D?{display:"flex",flexDirection:"row",flexWrap:"wrap",marginTop:15}:"pinned"===h?{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(80px, max-content))",columnGap:4,rowGap:8,marginTop:10}:e,...z?{maxWidth:"100%",...j&&{flexGrow:1}}:void 0},propertyRowWrapper:{..."pinned"===h?{display:"flex",flexDirection:"column"}:void 0},LastPagePropertyWrapper:{position:"relative"},LastPagePropertyInnerHoverPlusButton:{position:"absolute",left:"calc(100% + 10px)",top:"50%",transform:"translateY(-50%)"},infoPanelToggleButtonContainer:{display:"flex",alignItems:"end",flexShrink:0,visibility:U}}}),[p.length,m,z,$,D,h,j,U]),X=(0,r.useCallback)((()=>{S(!0)}),[]),J=(0,r.useCallback)((()=>{S(!1)}),[]),ee=(0,i().VK)((()=>me().Z.state.isOpen),[]),te=(0,i().VK)((()=>{var e;return"hide"===(null==M||null===(e=M.getFormat())||void 0===e?void 0:e.property_icons_visibility)}),[M]),re=(0,r.useMemo)((()=>(0,k.jsx)(je,{layoutModule:v,onClose:J,hiddenProperties:g,canConfigureCollection:x&&"suggest"!==w,store:t,collectionStore:o,collectionContextStore:V,blockPropertyValueOverlayStore:l,disabled:c,locked:u,isInPeekRenderer:f===B().S.PeekView,format:y,buttonPopupStore:I,pagePropertiesStore:n,hideDragHandle:"pinned"===h})),[l,I,x,V,o,c,w,y,J,g,u,n,f,t,h,v]);return r.useEffect((()=>{L(!0)}),[]),(0,k.jsxs)("div",{style:Y.container,ref:R,children:[(0,k.jsx)("div",{style:Y.row,onMouseEnter:X,onMouseLeave:J,children:0===p.length?re:p.map(((r,i)=>{const s=i===p.length-1;return(0,k.jsxs)("div",{style:{...Y.propertyRowWrapper,...s?Y.LastPagePropertyWrapper:void 0},children:[!D&&(0,k.jsxs)(a().gq,{children:[(0,k.jsx)(q().Z,{schema:b,format:y,hideDragHandle:!0,property:r.property,blockStore:t,collectionStore:o,pagePropertiesStore:n,disabled:c,locked:u,canConfigureCollection:x&&"suggest"!==w,isInPeekRenderer:f===B().S.PeekView,styleVariants:{size:"small",fontWeight:"medium",width:{variant:"hug-content"},height:{variant:"small"}},hideDuplicatePropertyOption:Boolean(M),layoutModule:e.layoutModule,hideIcon:te}),!ee&&(0,k.jsx)(E().zl,{store:t,propertyId:r.property})]}),(0,k.jsx)(ie().Z,{store:t,analyticsName:"page_property",children:(0,k.jsx)(oe().m,{store:t,collectionStore:o,blockPropertyValueOverlayStore:l,property:r.property,format:D?Q().C.Mini:Q().C.CompactPage,disabled:c,locked:u,tableWrap:!1})}),s&&"pinned"!==h&&(0,k.jsx)(ve().Z,{visible:P||C.isMobile,initial:{opacity:0},animate:{opacity:1,marginLeft:"auto"},exit:{opacity:0},style:Y.LastPagePropertyInnerHoverPlusButton,children:re})]},r.property)}))}),z&&(0,k.jsx)("div",{style:Y.infoPanelToggleButtonContainer,children:(0,k.jsx)(ue().k,{collectionStore:o,variant:$?"compact":"full",pageViewBlockContext:f})})]})}const je=r.memo((function(e){const{hiddenProperties:t,canConfigureCollection:l,collectionStore:a,isInPeekRenderer:p,buttonPopupStore:c,collectionContextStore:u,hideDragHandle:y,overflowButtonWrapperStyle:g,overflowButtonStyle:m,pagePropertiesStore:h,layoutModule:f}=e,v=(0,s().Fy)(),b=(0,s().O7)(),P=(0,i().VK)((()=>a.getSchema()),[a]),S=(0,d().yK)((e=>({overflowIcon:{width:16,height:16,fill:e.mediumIconColor},pagePropertiesOverflow:{width:"100%",fontSize:14,padding:y?"10px":"10px 10px 10px 28px",maxHeight:500,overflowY:"scroll"},overflowButtonWrapper:{display:"flex",alignItems:"center",paddingBottom:8,...g},overflowButton:{display:"flex",width:32,height:32,borderRadius:4,justifyContent:"center",alignItems:"center",...m}})),[y,g,m]),x=(0,r.useCallback)((()=>{ee().fH({environment:b,collectionContextStore:u,collectionStore:a,isInPeekRenderer:p,onCloseMenu:()=>{c.setState({open:!1})},pagePropertiesStore:h})}),[b,u,h,a,p,c]);return t.length?(0,k.jsx)(Pe().ZP,{onClose:e.onClose,popupWrapStyle:{width:500},buttonPopupStore:c,popupType:v.isMobile?Se().kQ.SlideUp:Se().kQ.Popup,render:()=>(0,k.jsx)(o(206352).Z,{debugName:"PagePropertiesCompact",capture:!0,children:(0,k.jsxs)("div",{style:S.pagePropertiesOverflow,children:[(0,k.jsx)(de,{showHiddenProperties:!0,schema:P,mergedProperties:t,format:e.format,store:e.store,collectionStore:e.collectionStore,disabled:e.disabled,locked:e.locked,blockPropertyValueOverlayStore:e.blockPropertyValueOverlayStore,isInPeekRenderer:e.isInPeekRenderer,hideDragHandle:y,pagePropertiesStore:h,layoutModule:f}),l&&(0,k.jsx)(we().le,{collectionStore:a,pagePropertiesStore:h,isInPeekRenderer:p})]})}),renderOrigin:e=>(0,k.jsx)("div",{style:S.overflowButtonWrapper,children:(0,k.jsx)(re().Z,{renderTooltip:()=>(0,k.jsx)(n()._H,{defaultMessage:"{num, plural, one {1 more property} other {{num} more properties}}",id:"database.pageProperties.compact.showMoreTooltip",values:{num:t.length}}),placement:te().Placement.Bottom,render:t=>(0,k.jsx)(be().Z,{style:S.overflowButton,mobileFeedback:v.isMobile,...(0,pe().Z)(e,t),children:(0,o(641772).o)(S.overflowIcon)})})})}):l?(0,k.jsx)("div",{style:S.overflowButtonWrapper,children:(0,k.jsx)(re().Z,{renderTooltip:()=>(0,k.jsx)(n()._H,{defaultMessage:"Add a property",id:"database.pageProperties.compact.addPropertyButtonTitle"}),placement:te().Placement.Bottom,render:t=>(0,k.jsx)(Pe().ZP,{popupType:b.device.isMobile?Se().kQ.SlideUp:Se().kQ.Popup,onClose:e.onClose,buttonPopupStore:c,originGap:1,alignmentToOrigin:Pe().vR.Start,render:()=>(0,k.jsx)(o(765458).PJ,{context:o(347577).HV.TopbarFilterPopup,collectionContextStore:u,collectionSettingsStore:u.settingsStore,hideDesktopHeader:!0}),onClick:x,onDismiss:()=>{const e=u.settingsStore;o(139224).E3({collectionSettingsStore:e})},renderOrigin:e=>(0,k.jsx)(be().Z,{style:S.overflowButton,mobileFeedback:v.isMobile,...(0,pe().Z)(e,t),children:(0,J().R)(S.overflowIcon)})})})}):null})),Ie=5;function Ve(e){const{collectionStore:t,schema:o,store:n,format:l,propertyIds:a,propertyGroupId:h,variant:f,customization:v,pagePropertiesStore:b,pageViewBlockContext:P,layoutModule:S}=e,[w,j]=(0,M().e)(),L=(0,i().qz)(void 0,V().Z),R=(0,s().Fy)(),O=(0,d().yK)((e=>({pageProperties:{width:"100%",fontSize:14},dragHandle:{marginLeft:-(T().C+10),marginRight:6},hidePropertiesButton:{margin:"0 0 10px"},showMoreButton:{margin:0},addPropertyButton:{margin:"4px 0 0"},moreProperties:{border:`1px solid ${"dark"===e.mode?e.accentColors.gray[300]:e.accentColors.gray[75]}`,borderRadius:4,padding:"8px 6px"},actionButtonsWithTopMargin:{marginTop:8}})),[]),K=(0,i().VK)((()=>"pinned"===f||Boolean(n.isAssociatedCollectionAPageTree())),[n,f]),_=(0,i().VK)((()=>{var e;return null===(e=t.getLayoutStore())||void 0===e?void 0:e.getModules()}),[t]);let F=(0,A().nd)({store:n,format:l,schema:o,collectionStore:t,propertyIds:a,propertyGroupId:h});const G=(0,r.useMemo)((()=>{const e={};for(const t of F)e[t.property]=t;return e}),[F]);v&&(F=function(e,t,o,r,i){const{hideEmptyProperties:n,neverShowEmptyPropertiesIfMoreThanNProperties:l,neverShowNotionSystemProperties:a,sortNonEmptyPropertiesFirst:s,neverShowPropertiesElsewhereInLayout:d}=t;n&&(e=e.map((e=>({...e,visibility:e.hasValue?e.visibility:"hide"}))));if(d&&o){const t=(0,c().m)({modulesByArea:o,collectionSchema:r,collectionFormat:i}),n=new Set(t);e=e.filter((e=>!n.has(e.property)))}a&&(e=e.filter((e=>!((0,u().S4)(e.property)||"show"!==e.visibility&&e.property.startsWith("notion://")))));void 0!==l&&e.length>l&&(e=e.filter((e=>e.hasValue)));s&&(e=y().MR(e,(e=>!e.hasValue)));return e}(F,v,_,o,l));const Z=(0,i().VK)((()=>b.state.forceShowProperties),[b]),[W,D]=(0,r.useMemo)((()=>{if((0,m().z4)(f))return y().uK(F,(e=>{var t;return!!(null===(t=o[e.property])||void 0===t?void 0:t.type)&&function(e){if("section"===e.visibility)return!1;if("hide"===e.visibility)return!1;if("hide_if_empty"===e.visibility&&!e.hasValue)return!1;return!0}(e)}));if("pinned"===f){if(!a)return[[],[]];const e=a.map((e=>{var t;const r=o[e];if(r)return{property:e,visibility:"show",hasValue:(null===(t=G[e])||void 0===t?void 0:t.hasValue)??!1,name:r.name}})).filter(g().$K);return[e.slice(0,p().c),e.slice(p().c)]}(0,g().t1)(f)}),[F,G,a,o,f]),E=function(e){const t=(0,i().VK)((()=>{if(!x().default.checkGate({gateName:"ai_favorites"}))return!1;const t=(0,C().OF)();return!!t&&t.spaceId===e.getSpaceId()&&t.collectionId===e.id}),[e]);return t}(t),H=W.concat(D),{paddingLeft:z,paddingRight:N,width:U}=e,$=(0,i().VK)((()=>n.isPost()),[n])||S&&"normalizedTitleWithIcon"===S.type&&"hide"===S.propertyLabels,Y=Math.min(Ie,W.length)*Ce,Q=!$&&("pinned"===f?R.isMobile||j<xe:j<Y);let X;if(null!=v&&v.dontRenderIfNoPropertiesDefaultShown&&0===W.length)return null;if(null!=v&&v.renderWhenCompletelyEmpty&&0===W.length&&0===D.length)return v.renderWhenCompletelyEmpty();if(K&&!Q)X=(0,k.jsx)(ke,{...e,rowLength:Ie,compactProperties:W,hiddenProperties:D,variant:f,pageViewBlockContext:P,layoutModule:S});else{const t={stackPropertyLabelAndValue:null==v?void 0:v.stackPropertyLabelAndValue,heightVariant:null!=v&&v.stackPropertyLabelAndValue||K&&!Q?"small":"medium"},o=P===B().S.PeekView;X=(0,k.jsxs)("div",{style:null!=v&&v.disableContainerPadding?{}:{paddingBottom:8},children:[(0,k.jsx)(de,{...e,hideDragHandle:"pinned"===f,showHiddenProperties:Z,mergedProperties:K?H:F,rowCustomization:t,disableLastRowBottomPadding:null==v?void 0:v.disableLastRowBottomPadding,isInPeekRenderer:o,layoutModule:S}),"pinned"===f?null:(0,k.jsx)(we().ZP,{...e,customization:t,isInPeekRenderer:o,mergedProperties:K?H:F,wrapperStyle:null!=v&&v.stackPropertyLabelAndValue?O.actionButtonsWithTopMargin:void 0})]})}return(0,k.jsx)("div",{style:O.pageProperties,onMouseEnter:()=>{L.setState({...L.state,mouseEntered:!0})},onMouseLeave:()=>{L.setState({...L.state,mouseEntered:!1})},ref:w,children:(0,k.jsxs)("div",{style:{width:U,maxWidth:"100%",padding:K||null!=v&&v.disableContainerPadding?void 0:"16px 0 8px 0",margin:"0 auto",...z?{paddingLeft:z}:{},...N?{paddingRight:N}:{}},children:[X,E&&(0,k.jsx)(I,{blockId:n.id})]})})}var Me=()=>o(191586),Be=()=>o(480089),Te=()=>o(121700),Ae=()=>o(763058),Le=()=>o(27475),Re=()=>o(482162),Oe=()=>o(896751),Ke=()=>o(452220),_e=()=>o(303171),Fe=()=>o(707513),Ge=()=>o(538230),Ze=()=>o(857719);function We(e){const{store:t,context:o,disabled:n,wrapper:a,forceGroupsOpenOrClosed:s,customization:p,moduleId:c,layoutModule:u}=e,y=(0,i().VK)((()=>t.getAssociatedCollectionStore()),[t]),g=(0,i().VK)((()=>(null==y?void 0:y.getNormalizedPropertyGroups({publicPageDataFallbackEnabled:!0}))||[]),[y]),m=(0,i().VK)((()=>{if(t.isCollectionViewPageWithContent())return{type:"hidden"};const e=t.getAssociatedCollectionStore();if(!e)return{type:"hidden"};const o=(0,Me().y6)(t);return o?{type:"visible",store:t,format:o,collectionStore:e}:{type:"hidden"}}),[t]),h=(0,d().yK)((e=>({container:{cursor:"default"}})),[]);if("hidden"===m.type)return null;return(a||(e=>(0,k.jsx)(Ze().Pb,{className:"layout-content",children:e})))((0,k.jsx)(Ze().Pb,{children:(0,k.jsx)(l().p,{allowSelectionWithin:!0,children:(0,k.jsxs)("div",{style:h.container,children:[g.map(((e,t)=>(0,r.createElement)(De,{...m,key:e.id,context:o,disabled:n,propertyGroup:e,forceGroupOpenOrClosed:s,customization:p,isLast:t===g.length-1,moduleId:c,layoutModule:u}))),0===g.length&&(0,k.jsx)(De,{...m,context:o,disabled:n,propertyGroup:"virtualPropertiesGroup",forceGroupOpenOrClosed:s,customization:p,isLast:!0,moduleId:c,layoutModule:u})]})})}))}function De(e){const{store:t,context:o,disabled:l,propertyGroup:a,format:s,collectionStore:p,forceGroupOpenOrClosed:c,customization:u,isLast:y,moduleId:g,layoutModule:m}=e,h=(0,i().VK)((()=>"virtualPropertiesGroup"===a?{idForRememberingCollapsedState:`${g}_defaultGroup`,groupIdForSavingPropertyToGroup:void 0,title:(0,k.jsx)(n()._H,{id:"collapsiblePropertyGroups.defaultGroupTitle",defaultMessage:"Properties"})}:{idForRememberingCollapsedState:a.id,groupIdForSavingPropertyToGroup:a.id,title:a.title}),[g,a]),f=(0,i().VK)((()=>void 0!==c?"open"===c:Ge().Z.isPropertyGroupExpanded({groupId:h.idForRememberingCollapsedState})),[c,h.idForRememberingCollapsedState]),v=o===B().S.PeekView,b=(0,i().VK)((()=>t.isNonEditableState()),[t]),P=(0,i().VK)((()=>p.getSchema()),[p]),S=(0,i().VK)((()=>{var e,o;return t.id===(null===(e=K().default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.id)?Ae().my.getNewEditorPagePropertiesStore(h.idForRememberingCollapsedState):t.id===(null===(o=Re().default.peekTargetStore.state)||void 0===o?void 0:o.id)?Ae().UK.getNewEditorPagePropertiesStore(h.idForRememberingCollapsedState):new(Ae().pB)}),[h.idForRememberingCollapsedState,t.id]),x=(0,r.useCallback)((()=>{Ge().Z.togglePropertyGroupExpanded({groupId:h.idForRememberingCollapsedState})}),[h.idForRememberingCollapsedState]),w=(0,d().yK)((e=>({groupContent:{paddingLeft:0,paddingBottom:y?void 0:null!=u&&u.stackPropertyLabelAndValue?28:20},bottomButtonContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start"},propertyVisibilityButton:{borderRadius:4,height:34,paddingLeft:6,paddingRight:6,width:"auto",display:"flex",alignItems:"center",justifyContent:"center"},propertyVisibilityButtonMessage:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0,fontSize:"14px",color:e.lightTextColor}})),[null==u?void 0:u.stackPropertyLabelAndValue,y]);return(0,k.jsxs)("div",{children:[(0,k.jsx)(Ee,{onClick:x,isExpanded:f,customization:u,children:h.title}),f&&(0,k.jsx)("div",{style:w.groupContent,children:(0,k.jsx)(Ve,{propertyGroupId:h.groupIdForSavingPropertyToGroup,pagePropertiesStore:S,schema:P,format:s,store:t,collectionStore:p,disabled:l,locked:b,blockPropertyValueOverlayStore:v?Le().Z:Te().Z,pageViewBlockContext:o,width:"100%",customization:{...u,neverShowPropertiesElsewhereInLayout:!0},layoutModule:m})})]})}function Ee(e){const{children:t,isExpanded:o,customization:r,onClick:i}=e,l=(0,n().YB)(),a=(0,s().Fy)(),p=Boolean(null==r?void 0:r.stackPropertyLabelAndValue);let c;c=o&&p?a.isTablet?0:a.isMobile?2:8:0;const u=(0,d().yK)((e=>({container:{height:34,display:"flex",alignItems:"center",justifyContent:"flex-start",paddingLeft:6,paddingRight:6,gap:6,marginBottom:c,borderRadius:6},label:{fontSize:13,color:e.text.secondary,fontWeight:Fe().Ue.medium,...Fe().Yu,height:20},button:{borderRadius:"100%"},icon:{transition:"transform .2s ease",width:12,height:12,transform:o?"rotate(0deg)":"rotate(-90deg)",fill:e.icon.tertiary},iconContainer:{display:"flex",alignItems:"center",justifyContent:"center"}})),[c,o]),y=(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{style:u.label,children:t}),(0,k.jsx)("div",{style:u.iconContainer,children:(0,_e().A)(u.icon)})]});return o?(0,k.jsx)(be().Z,{onClick:i,style:u.container,children:y}):(0,k.jsx)(be().Z,{style:u.container,onClick:i,ariaLabel:l.formatMessage(He.showProperties),children:y})}const He=(0,n().vU)({hideProperties:{id:"CollapsiblePropertyGroups.hideProperties",defaultMessage:"Hide properties in section"},showProperties:{id:"CollapsiblePropertyGroups.showProperties",defaultMessage:"Show properties in section"}});function ze(e){const{store:t,format:o,collectionStore:r,disabled:n,blockPropertyValueOverlayStore:l,variant:a,propertyIds:s,customization:d,pagePropertiesStore:p,pageViewBlockContext:c,layoutModule:u}=e,y=(0,i().VK)((()=>r.getSchema()),[r]),g=(0,i().VK)((()=>t.isNonEditableState()),[t]);return(0,k.jsx)(Ve,{store:t,collectionStore:r,schema:y,format:o,disabled:n,locked:g,width:"100%",blockPropertyValueOverlayStore:l,pageViewBlockContext:c,propertyIds:s,variant:a,customization:d,pagePropertiesStore:p,layoutModule:u})}const Ne={id:"properties",type:"properties"};function Ue(e){const{store:t,context:o,disabled:r,variant:s,layoutModule:d=Ne,propertyIds:p,customization:c,wrapper:u,showDefaultTitle:y}=e,g=(0,Be().PE)(t,r),m=(0,i().VK)((()=>fe().MT.getMode(t)),[t]),{isMainEditor:h,isPeekEditor:f}=(0,i().VK)((()=>{var e,o;const r=Boolean(Re().default.isSidePeekOpen()&&t.id===(null===(e=Re().default.peekTargetStore.state)||void 0===e?void 0:e.id));return{isMainEditor:Boolean(!r&&t.id===(null===(o=K().default.state.mainEditorCurrentBlockStore)||void 0===o?void 0:o.id)),isPeekEditor:r}}),[t]),v=(0,i().VK)((()=>t.getAssociatedCollectionStore()),[t]),b=(0,i().VK)((()=>{if(t.isCollectionViewPageWithContent())return{type:"hidden"};if(!v)return{type:"hidden"};const e=(0,Me().y6)(t);return e?{type:"visible",store:t,format:e,collectionStore:v}:{type:"hidden"}}),[v,t]),P=(0,Oe().K)({collectionStore:v,layoutModule:d}),S=(0,i().VK)((()=>P&&d&&!(null!=c&&c.doNotShowPropertyGroups)),[null==c?void 0:c.doNotShowPropertyGroups,P,d]),x=(0,i().VK)((()=>h?Ae().my.getNewEditorPagePropertiesStore():f?Ae().UK.getNewEditorPagePropertiesStore():new(Ae().pB)),[h,f]);if("hidden"===b.type)return null;const w=o===B().S.PeekView,C=S&&d?(0,k.jsx)(We,{...e,layoutModule:d,wrapper:void 0,moduleId:d.id}):(0,k.jsxs)(a().Ht,{gap:8,children:[y&&(0,k.jsx)(Ke().$,{style:{marginLeft:6},children:(0,k.jsx)(n()._H,{id:"pageLayout.propertiesModule.title",defaultMessage:"Properties"})}),(0,k.jsx)(l().p,{allowSelectionWithin:!0,children:(0,k.jsx)(ze,{...b,disabled:!g||"suggest"===m,pageViewBlockContext:o,blockPropertyValueOverlayStore:w?Le().Z:Te().Z,propertyIds:p,variant:s,layoutModule:d,customization:c,pagePropertiesStore:x})})]});return u((0,k.jsx)(k.Fragment,{children:C}))}},896751:(e,t,o)=>{o.d(t,{K:()=>n});var r=o(667294),i=()=>o(142735);function n(e){let{collectionStore:t,layoutModule:o}=e;const n=(0,i().VK)((()=>Boolean(null==t?void 0:t.getNormalizedPropertyGroups({publicPageDataFallbackEnabled:!0}))),[t]);return(0,r.useMemo)((()=>!(!o||!t)&&("properties"===o.type&&"pinned"!==o.variant&&n)),[t,n,o])}},106128:(e,t,o)=>{o.d(t,{NW:()=>l,Qi:()=>i,Rt:()=>r,WO:()=>a,wI:()=>n});let r=function(e){return e[e.SelectedPage=0]="SelectedPage",e[e.SearchPage=1]="SearchPage",e[e.NewPage=2]="NewPage",e}({});const i=4,n=32,l=400,a=20},820748:(e,t,o)=>{o.d(t,{ev:()=>l,NW:()=>r().NW,Qi:()=>r().Qi,wI:()=>r().wI});var r=()=>o(106128),i=()=>o(677559);const n=new(i().Ss)("RelationPropertyMenu",(async()=>{const{default:e}=await Promise.all([o.e(62743),o.e(52774),o.e(44832),o.e(84885),o.e(90698),o.e(5242),o.e(90424),o.e(11189),o.e(53329),o.e(71896),o.e(72586),o.e(53335),o.e(46616),o.e(54940),o.e(20224),o.e(46546),o.e(98721),o.e(50471),o.e(49498),o.e(2971),o.e(20634),o.e(91253),o.e(63707),o.e(4014),o.e(7678),o.e(5006),o.e(99590),o.e(18162),o.e(91752),o.e(80730),o.e(62084),o.e(32175),o.e(13856)]).then(o.bind(o,251997));return{RelationPropertyMenu:e}})),l=(0,i().kF)(n,(e=>e.RelationPropertyMenu))},768055:(e,t,o)=>{o.d(t,{W:()=>n});o(267602),o(470928);var r=o.n(o(400939)),i=()=>o(163085);function n(e){const t=i().Z.find((t=>t.store===e));if(t){const e=t.getContentWrapEl();if(e)return r()(e.innerText)}return 0}},619857:(e,t,o)=>{o.d(t,{Y:()=>i});o(667294);var r=o(785893);const i=(0,o(827282).IU)("chevronDownThin",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M8 11.4795C7.77214 11.4795 7.56478 11.3883 7.37793 11.2061L2.17578 5.88086C2.09831 5.80794 2.03906 5.72591 1.99805 5.63477C1.96159 5.53906 1.94336 5.43652 1.94336 5.32715C1.94336 5.17676 1.97754 5.04004 2.0459 4.91699C2.11882 4.79395 2.21452 4.69824 2.33301 4.62988C2.4515 4.55697 2.58594 4.52051 2.73633 4.52051C2.95508 4.52051 3.14648 4.60254 3.31055 4.7666L8.33496 9.91406H7.67188L12.6895 4.7666C12.8535 4.60254 13.0449 4.52051 13.2637 4.52051C13.4141 4.52051 13.5485 4.55697 13.667 4.62988C13.7855 4.69824 13.8789 4.79395 13.9473 4.91699C14.0202 5.04004 14.0566 5.17676 14.0566 5.32715C14.0566 5.54134 13.9792 5.72591 13.8242 5.88086L8.62207 11.2061C8.53548 11.2972 8.43978 11.3656 8.33496 11.4111C8.23014 11.4567 8.11849 11.4795 8 11.4795Z"})})},839212:(e,t,o)=>{o.d(t,{c:()=>r});const r=4}}]);