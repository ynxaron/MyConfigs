(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[67310],{839821:(e,t,o)=>{"use strict";o.d(t,{j:()=>u});var n=()=>o(685472),i=()=>o(774985),r=()=>o(308186),a=()=>o(421654),s=()=>o(762478),l=()=>o(269299),c=()=>o(109757);const d=1500,p=(0,o(788860).vU)({pageCover:{defaultMessage:"Page cover",id:"pageCover.title"},fileTypeCaption:{defaultMessage:"Images wider than {idealImageWidth} pixels work best.",id:"pageCover.fileType.caption"},uploadFailed:{defaultMessage:"Upload failed",id:"pageCover.errorDialogMessage.uploadFailed"},embedTitle:{defaultMessage:"Link",id:"pageCover.embedType.title"},embedPlaceholder:{defaultMessage:"Paste an image link…",id:"pageCover.embedType.placeholder"},embedCaption:{defaultMessage:"Works with any image from the web.",id:"pageCover.embedType.caption"},embedSubmit:{defaultMessage:"Submit",id:"pageCover.embedType.buttonText"}});function u(e){let{environment:t,intl:o,store:n,rect:i}=e;s().$(t,{originGap:3,originRect:i,isSmallWidth:!1,popupWidth:540,maxHeight:485,title:o.formatMessage(p.pageCover),onDelete:()=>{!function(e){let{environment:t,store:o}=e;s().Z(),l().createAndCommit({userAction:"PageCover.handleDelete",environment:t,canUndo:!0,perform:e=>{a().MF({store:o,transaction:e})}})}({environment:t,store:n})},currentTab:"gallery",tabs:[{type:"gallery",onChange:e=>{let{url:o,position:i}=e;g({environment:t,store:n,url:o,position:i})}},{type:"file",fileUpload:!1,imageUpload:!0,videoUpload:!1,caption:o.formatMessage(p.fileTypeCaption,{idealImageWidth:d}),onUpload:e=>{s().Z(),c().cT({environment:t,file:e[0],bucket:"secure",record:n.pointer,onStart:f,onProgress:v,onComplete:e=>{var o;o={environment:t,store:n,url:e},m({...o,position:.5})},onError:()=>{r().UW(o.formatMessage(p.uploadFailed))}})}},{type:"embed",title:o.formatMessage(p.embedTitle),inputPlaceholder:o.formatMessage(p.embedPlaceholder),caption:o.formatMessage(p.embedCaption),buttonText:o.formatMessage(p.embedSubmit),onChange:e=>{var o;o={environment:t,store:n,url:e},m({...o,position:.5}),s().Z()}},{type:"unsplash",onChange:e=>{let{url:o,position:i}=e;g({environment:t,store:n,url:o,position:i})}}]})}async function m(e){const{environment:t,store:o,url:r,position:s}=e,{serverCommitResult:c}=l().createAndCommit({userAction:"PageCover.updatePageCover",environment:t,canUndo:!0,perform:e=>{a().fs({store:o,url:r,position:s||.5,transaction:e})}});await c,i().Z.state.loadingMode===n().NS&&i().Z.setState({loadingMode:n().EP,dataURL:i().Z.state.dataURL,uploadProgress:100})}function g(e){m(e),e.environment.device.isMobile&&s().Z()}function f(e){const{file:t,name:o,size:r}=e;if(s().Z(),i().Z.setState({loadingMode:n().SS,file:t,name:o,size:r}),t instanceof File&&t.type.indexOf("image")>=0){const e=new FileReader;e.onload=e=>{i().Z.state.loadingMode===n().SS&&i().Z.setState({...i().Z.state,uploadProgress:0,loadingMode:n().NS,dataURL:e.target.result})},e.readAsDataURL(t)}}function v(e){const{progressPercent:t}=e;i().Z.state.loadingMode===n().NS&&i().Z.setState({...i().Z.state,uploadProgress:t})}},86609:(e,t,o)=>{"use strict";o.d(t,{KV:()=>W,Rh:()=>Q,U6:()=>G,Wu:()=>te,Xx:()=>H,YD:()=>ee,g9:()=>O,jc:()=>z,m8:()=>$,ys:()=>X,zX:()=>q});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(30005),o(241792),o(228244);var n=()=>o(730120),i=()=>o(506347),r=()=>o(926724),a=()=>o(271896),s=()=>o(226413),l=()=>o(803021),c=()=>o(874459),d=()=>o(956057),p=()=>o(528514),u=()=>o(494616),m=()=>o(922713),g=()=>o(396136),f=()=>o(752778),v=()=>o(255933),y=()=>o(306164),S=()=>o(856466),h=()=>o(126301),b=()=>o(955620),w=()=>o(253335),C=()=>o(110232),k=()=>o(285755),_=()=>o(23151),x=()=>o(757216),P=()=>o(544903),T=()=>o(594546),M=()=>o(487270),I=()=>o(527278),V=()=>o(876822),B=()=>o(826955),A=()=>o(250303),j=()=>o(824462),Z=()=>o(984871),D=()=>o(139224),F=()=>o(421654),Y=()=>o(636340),E=()=>o(511614),L=()=>o(269299),N=()=>o(663366),U=()=>o(348141);const R="week";function H(e){var t;const{environment:o,transaction:n,tasksBlockStore:i,sprintsBlockStore:r}=e,a=null===(t=r.getFormat())||void 0===t?void 0:t.collection_pointer,s=i.getFormat().collection_pointer;if(!a||!s)return;const l=B().NW.createChildStore(r,a),c=l.getRole()??"none";if(!(0,p().yY)(c,"editor"))return;l.getAutomationStores().some((e=>e.isCompleteSprintAutomation()))||K({environment:o,transaction:n,sprintCollectionStore:l,taskCollectionStore:B().NW.createChildStore(i,s),sprintSettingsConfig:S().iZ})}function K(e){const{environment:t,sprintSettingsConfig:o,transaction:n,sprintCollectionStore:i,taskCollectionStore:r}=e,a=i.getSpaceId(),s=(0,M().TS)({environment:t,table:u().cv,spaceId:a}),l=(0,M().TS)({environment:t,table:m().Xj,spaceId:a});Y().ae({environment:t,table:u().cv,inMemoryRecordCache:i.inMemoryRecordCache,value:{id:s,parent_id:i.id,parent_table:i.table,alive:!0,space_id:a,status:o.autoCompleteSprints?"active":"disabled",trigger:{id:d().Il(),type:"recurrence",recurrence:ne(o)},action_ids:[l]},transaction:n}),F().FH({stores:[i],update:{automation_ids:[...i.getFormat().automation_ids??[],s]},transaction:n}),Y().ae({environment:t,table:m().Xj,inMemoryRecordCache:i.inMemoryRecordCache,transaction:n,value:{id:l,parent_id:s,parent_table:u().cv,type:"complete_sprint",alive:!0,space_id:a,config:{sprint_collection:i.getSpaceShardedPointer(),task_collection:r.getSpaceShardedPointer(),complete_sprint_action:o.actionConfig.complete_sprint_action}}})}function W(e){const{environment:t,automationStore:o,transaction:n,newDuration:i,currentSprintBlockStore:r}=e;Y().sW({store:o.getTriggerStore().getKeyStore("recurrence"),data:{interval:i},transaction:n}),J({environment:t,transaction:n,automationStore:o,currentSprintBlockStore:r})}function O(e){const{environment:t,automationStore:o,transaction:n,newWeekday:i,currentSprintBlockStore:r}=e;Y().sW({store:o.getTriggerStore().getKeyStore("recurrence"),data:{weekdays:[i]},transaction:n}),J({environment:t,transaction:n,automationStore:o,currentSprintBlockStore:r})}function z(e){const{environment:t,actionStore:o,automationStore:n,transaction:i,newAutocompleteStatus:r,currentSprintBlockStore:s}=e;Y().sW({store:n,data:{status:r?"active":"disabled"},transaction:i}),J({environment:t,transaction:i,automationStore:n,currentSprintBlockStore:s});const l=n.getParentPointer();if(!l||l.table!==f().vF)return;const c=(0,T().mc)(t),d={automation_id:n.id,automation_actions:[{automation_action_id:o.id,type:"complete_sprint"}],automation_triggers:[{type:"recurrence"}],collection_id:l.id};r?(0,a().Rt)(c,d):(0,a().ai)(c,d)}function J(e){const{automationStore:t,currentSprintBlockStore:o,transaction:i,environment:a}=e;if(!t.isActive())return;const s=t.getRecurrence();if(!s)return;const c=(0,h().Su)(s);if(!c)return;const d=o.getPropertyValue(r().b0.Dates);if(!d)return;const p=(0,b().nai)(d)[0];if(!p||"daterange"!==p.type)return;const u=p.start_date,{start_date:m,end_date:g}=(0,h().DW)({currentSprintStartDate:u,sprintSchedule:c});Y().sW({store:t.getTriggerStore().getKeyStore("recurrence"),data:{start_date:(0,l().Jh)(n().ou.fromISO(m).plus({minutes:1}).toJSDate())},transaction:i}),_().xD({store:o,propertyId:r().b0.Dates,transaction:i,environment:a,type:"dateValue",dateValue:{type:"daterange",start_date:u,end_date:g}})}function G(e){const{transaction:t,newRemainingTasksBehavior:o,actionStore:n}=e;Y().sW({store:n.getConfigStore(),data:{complete_sprint_action:o},transaction:t})}async function X(e){var t;const{appTemplatesSetupActions:o,appTemplatesSprintBoardActions:n,appConfigs:a}=await P().vF.load(),{environment:s,collectionContextStore:l,from:c}=e,{currentSpaceViewStore:d}=V().default.state,p=l.collectionStore(),u=null==p?void 0:p.getParentBlockStore(),m=null==u?void 0:u.getParentStore(),f=null==p||null===(t=p.getFormat())||void 0===t?void 0:t.app_config_uri,S=f&&(0,C().YB)(a(),f);if(!p||!u||!m||!d||m.table!==v().bx&&m.table!==g().iU&&m.table!==y().e0||!S)return;const h=u.getFormat().app_id,b=h?await j().callApi({eventName:"getCollectionViewBlocksByAppId",environment:s,data:{spaceId:u.getSpaceId(),appId:h}}):void 0,k="success"===(null==b?void 0:b.type)&&b.data.result.length?b.data.result.map((e=>B().G.createChildStore(m,{table:g().iU,id:e.blockId,spaceId:u.getSpaceId()}))):[u];await oe({environment:s,taskCollectionStore:p,executeFn:()=>{const e=L().createAndCommit({userAction:"sprintSettingsActions.handleTurnOnSprints",environment:s,canUndo:!0,perform:e=>{const t=(0,w().eu)(),i=o.applyTypedFeatures({environment:s,spaceViewStore:d,appParentStore:m,appUri:S.uri,features:[{type:"simple",featureUri:t.uri}],transaction:e,createOrModify:"modify",appCollectionViewBlockStores:k}),a=n.createSprintPage({environment:s,spaceViewStore:d,appParentStore:m,transaction:e,blockStores:i,creationEntryPoint:{type:"sprint_settings"}});if(D().E3({collectionSettingsStore:l.settingsStore}),!a)return;const p=c?{feature:{id:r().Es.TaskToSprintRelation,from:c,type:"notion://projects/tasks_with_sprints_feature"}}:{};return A()._H({environment:s,collectionContextStore:l,from:"view_settings",property:r().Es.TaskToSprintRelation,property_type:"relation",is_suggested_property:!0,...p}),a}});e.serverCommitResult.then((()=>{const t=e.performResult;t&&E().r({environment:s,store:t,pageVisitSource:i().tY.Create})}))}})}async function $(e){const{environment:t,collectionContextStore:o,sprintSettingsContext:n,sprintBoardViewBlockIds:a}=e,{sprintCollectionStore:s,automationContext:l,currentCollectionViewBlockStore:c,sprintCollectionViewBlockStore:d,taskCollectionStore:p,taskCollectionViewBlockStore:u}=n;if(!s||!d||!l)return;const m=u.getSpaceId(),f=[d,...a.map((e=>new(B().G)(t,{id:e,table:g().iU,spaceId:m})))];c.id===u.id?D().E3({collectionSettingsStore:o.settingsStore}):E().r({environment:t,store:u,pageVisitSource:i().tY.LeaveOrRemove});const{automationActions:v}=await k().Sm.automations.load(),{automationStore:y}=l;await oe({environment:t,taskCollectionStore:p,executeFn:()=>{L().createAndCommit({userAction:"sprintSettingsActions.handleTurnOffSprints",environment:t,canUndo:!0,perform:e=>{!function(e){const{transaction:t,blocksToDelete:o,environment:n,taskCollectionStore:i,sprintCollectionStore:a}=e;Y().sW({store:a,transaction:t,data:{alive:!1}}),Z().E2({environment:n,collectionStore:i,schema:i.getSchema(),property:r().Es.TaskToSprintRelation,transaction:t,permanentlyDelete:!0}),N().y8({environment:n,blocks:o,transaction:t,permanentlyDelete:!0})}({environment:t,transaction:e,blocksToDelete:f,sprintCollectionStore:s,taskCollectionStore:p}),v.disableAutomation({automationStore:y,environment:t,transaction:e}),v.deleteAutomation({automationStore:y,environment:t,transaction:e})}}),A().y9({environment:t,collectionContextStore:o,property_type:"relation",from:"view_settings",property:r().Es.TaskToSprintRelation})}})}function q(e){const{environment:t,userSettingsStore:o}=e;L().createAndCommit({userAction:"sprintSettingsActions.handleSeenSprintsEngagementBanner",environment:t,canUndo:!0,perform:e=>{U().d2({userSettingsStore:o,data:{seen_sprint_settings_engagement_banner:!0},transaction:e})}})}function Q(e){e.settingsStore.setState({open:!0,stack:[{type:"main"},{type:"sprintSettings"}]})}function ee(e){const{environment:t,collectionContextStore:o,currentViewBlockStore:n,taskCollectionViewBlockStore:i}=e,a=o.collectionViewStore();if(!a)return;const s=a.getFormat(),l=a.getRawQuery();L().createAndCommit({userAction:"sprintSettingsActions.handleManageSprintFromThisView",environment:t,canUndo:!0,perform:e=>{if((0,x().i)({collectionViewStore:a,transaction:e,update:{name:I().Z.formatMessage(w().sY.tasksCurrentSprintV2ViewName),query2:{...l,filter:void 0},format:{...s,collection_view_icon:"/icons/playback-play-button_gray.svg",property_filters:w().Jt,app_config_uri:r().g3,hide_linked_collection_name:!0}}}),n.id===i.id){var t;const o=(null===(t=n.getFormat())||void 0===t?void 0:t.app_uri_map)??{},l=s.app_config_uri;l&&delete o[l],F().FH({stores:[i],update:{app_uri_map:{...o,[r().g3]:a.id}},transaction:e})}}})}function te(e){const{environment:t,sprintSettingsContext:o}=e;if(!o)return;const n=o.sprintCollectionStore,i=(null==n?void 0:n.getRole())??"none";n&&(0,p().yY)(i,"editor")&&o.automationContextLoaded&&!o.automationContext&&L().createAndCommit({userAction:"sprintSettingsActions.ensureCompleteSprintAutomation",environment:t,canUndo:!0,perform:e=>{K({environment:t,transaction:e,sprintCollectionStore:n,taskCollectionStore:o.taskCollectionStore,sprintSettingsConfig:S().iZ})}})}async function oe(e){const{executeFn:t,environment:o,taskCollectionStore:n}=e;await async function(e){var t;const{environment:o,taskCollectionStore:n}=e,i=n.getFormat().app_uri_map,a=r().Es.TaskToSprintRelation,l=n.getSchema(),c=(null==i?void 0:i[a])??a,d=l[c];if(!d||!(0,s().p_)(d))return;const p=null===(t=(0,s().j0)(d))||void 0===t?void 0:t.id;if(!p)return;const u=new Set([c]);Object.entries(l).forEach((e=>{var t;let[o,n]=e;n&&(0,s().p_)(n)&&(null===(t=(0,s().j0)(n))||void 0===t?void 0:t.id)===p&&u.add(o)}));const{serverCommitResult:m}=L().createAndCommit({userAction:"sprintSettingsActions.clearSprintRelationDataFromTaskCollection",environment:o,canUndo:!0,perform:e=>{for(const t of u)Z().E2({environment:o,transaction:e,permanentlyDelete:!0,collectionStore:n,schema:l,property:t});null==i||delete i[a],i&&F().FH({stores:[n],transaction:e,update:{app_uri_map:i}})}});await m}({environment:o,taskCollectionStore:n}),t()}function ne(e){return{frequency:R,interval:e.recurrenceConfig.interval,weekdays:e.recurrenceConfig.weekdays,start_date:(0,l().Jh)(n().ou.local().set({hour:0,minute:0,second:0,millisecond:0}).toJSDate()),timezone:(0,c().Sv)(),hour:0,minute:0}}},680688:(e,t,o)=>{"use strict";o.r(t),o.d(t,{applyUntypedFeature:()=>s});var n=()=>o(696459),i=()=>o(421654),r=()=>o(10829),a=()=>o(34822);function s(e){var t;const{environment:o,collectionStore:s,collectionViewBlockStore:l,feature:c,transaction:d}=e,p=c.dependencies,u=(null===(t=l.getFormat())||void 0===t?void 0:t.app_uri_map)??{};for(const m of p)if("property"===m.type)(0,a().P8)({environment:o,collectionStore:s,dependency:m,blockUriMap:u,allFeatures:r().OO,transaction:d});else if("collection_view"===m.type){const e=(0,a().k0)({environment:o,collectionStore:s,collectionViewBlockStore:l,dependency:m,blockUriMap:u,transaction:d});i().FH({stores:[l],update:{app_uri_map:e},transaction:d})}else(0,n().t1)(m)}},10829:(e,t,o)=>{"use strict";o.d(t,{B4:()=>g,OO:()=>d,ad:()=>f,dr:()=>m,my:()=>u,rc:()=>p});var n=()=>o(331540),i=()=>o(145006),r=()=>o(714230),a=()=>o(874459),s=()=>o(998411),l=()=>o(527278);const c=(0,o(788860).vU)({aiSummaryName:{id:"feature.ai_summary.name",defaultMessage:"AI summary"},aiSummaryDescription:{id:"feature.ai_summary.description",defaultMessage:"Summarize pages with AI"},aiAutofillName:{id:"feature.ai_autofill.name",defaultMessage:"Custom AI autofill"},aiAutofillDescription:{id:"feature.ai_autofill.description",defaultMessage:"Autofill properties with AI"},aiTranslationName:{id:"feature.ai_translation.name",defaultMessage:"AI translation"},aiTranslationDescription:{id:"feature.ai_translation.description",defaultMessage:"Translate pages with AI"},aiKeywordsName:{id:"feature.ai_keywords.name",defaultMessage:"AI keywords"},aiKeywordsDescription:{id:"feature.ai_keywords.description",defaultMessage:"Extract keywords with AI"}}),d=[{uri:i().S7.priorityHmlFeature,name:"Priority",dependencies:[{uri:i().ti.priorityHmlProperty,type:"property",collectionUri:n().br,name:"Priority",description:"High, medium, or low",icon:r().Z.images.appPackages.featurePrioritySvg,propertySchema:{type:"select",name:"Priority",options:[{id:"priority_low",value:"Low",color:"green"},{id:"priority_medium",value:"Medium",color:"yellow"},{id:"priority_high",value:"High",color:"red"}]}}],collectionUri:n().br},{uri:i().S7.progressBarFeature,collectionUri:n().br,name:"Progress Bar",description:"Visual representation of progress",icon:r().Z.images.appPackages.featureStatusSvg,dependencies:[{uri:i().ti.progressBarCurrentProperty,type:"property",collectionUri:n().br,name:"Progress Bar Current",propertySchema:{type:"number",name:"Current"}},{uri:i().ti.progressBarTargetProperty,type:"property",collectionUri:n().br,name:"Progress Bar Target",propertySchema:{type:"number",name:"Target"}},{uri:i().ti.progressBarFormulaProperty,type:"property",collectionUri:n().br,name:"Progress Bar Progress Formula",propertySchema:{type:"formula",name:"Progress bar",formula2:{code:[["‣",[["fpp",{property:i().ti.progressBarCurrentProperty,collection:{id:n().br,table:"collection"}}]]],["/"],["‣",[["fpp",{property:i().ti.progressBarTargetProperty,collection:{id:n().br,table:"collection"}}]]]],result_type:{type:"number"}},show_as:{type:"bar",color:"green",maxValue:1,showValue:!1},version:"v2"}}]},{uri:i().S7.ganttChartFeature,collectionUri:n().br,name:"Gantt Chat",description:"Chart to show progress of a project's tasks over time.",icon:r().Z.images.appPackages.featureGanttSvg,dependencies:[{uri:i().ti.ganttInitiativeProperty,type:"property",collectionUri:n().br,name:"Initiative",description:"Initiatives associated with a specific project",icon:r().Z.images.appPackages.featurePrioritySvg,propertySchema:{type:"select",name:"Initiative",options:[{id:"initiative_a",value:"Initiative A",color:"purple"},{id:"initiative_b",value:"Initiative B",color:"green"},{id:"initiative_c",value:"Initiative C",color:"blue"}]}},{uri:i().ti.ganttDueDateProperty,type:"property",collectionUri:n().br,name:"Due Date",description:"When a project is due.",icon:r().Z.images.appPackages.featurePrioritySvg,propertySchema:{type:"date",name:"Due Date"}},{uri:i().ti.ganttTimelineView,type:"collection_view",collectionUri:n().br,description:"GANTT chart timeline view of projects",value:{type:"timeline",name:"Timeline",format:{collection_view_icon:"/icons/timeline_gray.svg",timeline_show_table:!0,timeline_table_properties:[{width:171,visible:!0,property:"title"},{width:200,visible:!0,property:i().ti.ganttInitiativeProperty}],timeline_preference:{zoomLevel:"month",centerTimestamp:(0,a().uO)((0,a().Lg)((0,s().r)()),(0,s().r)())},collection_group_by:{sort:{type:"manual"},type:"multi_select",property:i().ti.ganttInitiativeProperty,hideEmptyGroups:!0}},query2:{timeline_by:i().ti.ganttDueDateProperty}},collectionViewBlockUri:n().Sc}]}],p=[u(),m(),g(),f()];function u(){return{uri:i().S7.aiSummaryFeature,collectionUri:n().br,name:l().Z.formatMessage(c.aiSummaryName),description:l().Z.formatMessage(c.aiSummaryDescription),icon:r().Z.images.appPackages.featureAiSummarizeSvg,tooltipImage:{img:r().Z.images.tooltips.properties.aiAutofillSummaryPng,scale:.5},isAi:!0,dependencies:[{uri:i().ti.aiSummaryProperty,type:"property",collectionUri:n().br,name:l().Z.formatMessage(c.aiSummaryName),propertySchema:{type:"text",name:l().Z.formatMessage(c.aiSummaryName),ai_inference:{type:"summarize",auto_update_on_edit:!0}}}]}}function m(){return{uri:i().S7.aiCustomAutofillFeature,collectionUri:n().br,name:l().Z.formatMessage(c.aiAutofillName),description:l().Z.formatMessage(c.aiAutofillDescription),icon:"",tooltipImage:{img:r().Z.images.tooltips.properties.aiCustomAutofillPng,scale:.5},isAi:!0,dependencies:[{uri:i().ti.aiCustomAutofillProperty,type:"property",collectionUri:n().br,name:l().Z.formatMessage(c.aiAutofillName),propertySchema:{name:l().Z.formatMessage(c.aiAutofillName),type:"text",ai_inference:{type:"custom",prompt:"",auto_update_on_edit:!0}}}]}}function g(){return{uri:i().S7.aiTranslationFeature,collectionUri:n().br,name:l().Z.formatMessage(c.aiTranslationName),description:l().Z.formatMessage(c.aiTranslationDescription),icon:"",tooltipImage:{img:r().Z.images.tooltips.properties.aiTranslationPng,scale:.5},isAi:!0,dependencies:[{uri:i().ti.aiTranslationProperty,type:"property",collectionUri:n().br,name:l().Z.formatMessage(c.aiTranslationName),propertySchema:{name:l().Z.formatMessage(c.aiTranslationName),type:"text",ai_inference:{type:"custom",prompt:"",auto_update_on_edit:!0}}}]}}function f(){return{uri:i().S7.aiKeywordsFeature,collectionUri:n().br,name:l().Z.formatMessage(c.aiKeywordsName),description:l().Z.formatMessage(c.aiKeywordsDescription),icon:"",tooltipImage:{img:r().Z.images.tooltips.properties.aiKeywordsPng,scale:.5},isAi:!0,dependencies:[{uri:i().ti.aiKeywordsProperty,type:"property",collectionUri:n().br,name:l().Z.formatMessage(c.aiKeywordsName),propertySchema:{type:"multi_select",name:l().Z.formatMessage(c.aiKeywordsName),select_ai_inference:{type:"multi_select",add_options:!0,auto_update_on_edit:!1}}}]}}},707461:(e,t,o)=>{"use strict";o.d(t,{Pm:()=>s,Xj:()=>r,wC:()=>a});var n=()=>o(435308);class i extends(()=>o(263184))().default{getInitialState(){return{popupRenderedInPage:!1,popupRenderedInPeekView:!1}}}const r=new i,a=new(n().default)((()=>!1!==r.state.popupRenderedInPage),{debugName:"AssistantWriterRenderedInPageStore"}),s=new(n().default)((()=>!1!==r.state.popupRenderedInPeekView),{debugName:"AssistantWriterRenderedInPeekViewStore"})},23151:(e,t,o)=>{"use strict";o.d(t,{Fv:()=>M,JN:()=>k,QG:()=>V,cQ:()=>T,f$:()=>_,fX:()=>P,td:()=>x,xD:()=>I});o(670560),o(267602),o(30005),o(241792);var n=()=>o(730120),i=()=>o(552221),r=()=>o(532850),a=()=>o(803021),s=()=>o(874459),l=()=>o(998411),c=()=>o(752778),d=()=>o(513670),p=()=>o(696459),u=()=>o(250303),m=()=>o(384667),g=()=>o(366257),f=()=>o(332542),v=()=>o(636340),y=()=>o(970105),S=()=>o(887430),h=()=>o(32969),b=()=>o(35982),w=()=>o(826955),C=()=>o(526243);function k(e){const{environment:t,droppedStores:o,duplicate:r,calendarBy:d,transaction:p,collectionContextStore:g}=e,v=n().ou.fromMillis(e.startOfDay);let y=!0;for(const n of o){const t=e.collectionStore?e.collectionStore:(0,S().Bm)({store:n,collectionContextStore:g});if(n.getParentTable()===c().vF||!t){y=!1;break}f().zw({childStore:n,parentStore:t,transaction:p})||(y=!1)}const h=m().Ab({environment:t,droppedStores:o,duplicate:r,transaction:p,collectionStore:e.collectionStore});for(const n of h){const o=e.collectionStore?e.collectionStore:(0,S().Bm)({store:n,collectionContextStore:g});if(!o)continue;const r=o.getMappedProperty(d),c=n.getPropertyStore(r),f=(0,i().G)(c.getValue())||s().Lg((0,l().r)()),h=s().c$(f,(0,l().r)()),b=v.toFormat(s().Iq);let w;if("date"===h.type||"datetime"===h.type)w={...h,start_date:b};else{const e=s().NK(h,(0,l().r)());if(!e.end)return;const t={...h,start_date:b},o=s().NK(t,(0,l().r)()).start.diff(e.start,"days"),n=e.end.plus(o).toFormat(s().Iq);w={...h,start_date:b,end_date:n}}const C=s().c$(w,a().yw(f)||(0,l().r)());m().mp({environment:t,store:n,collectionStore:o,collectionContextStore:g,shouldCoerce:!0,groupsPointer:[],transaction:p,alreadyMovedToCollection:y}),I({environment:t,type:"dateValue",propertyId:r,store:n,transaction:p,dateValue:C}),u().rv({environment:t,collectionContextStore:g,block_id:n.id,property:r,property_type:"date",from:"calendar"})}}function _(e){const{calendarStore:t,direction:o,targetStore:n}=e;t.setState({...t.state,isDragging:!0,targetStore:n,direction:o,temporaryValue:void 0})}function x(e){const{calendarStore:t,x:o,y:r,calendarBy:c}=e,p=t.state;if(p.isDragging){const e=(0,i().G)(p.targetStore.getPropertyStore(c).getValue());if(!e)return;const u=s().c$(e,(0,l().r)()),m=p.temporaryValue||e,g=s().c$(m,(0,l().r)()),f=[];p.dayStoreMap.forEach(((e,t)=>{f.push({store:e,timestamp:t})}));const v=f.find((e=>{let{store:t}=e;const n=h().C.getRectFromStore(t);return Boolean(n&&b().uh(n,o,r))}));let y;if(v){const e=n().ou.fromMillis(v.timestamp),t=e.endOf("day"),o=e.toFormat(s().Iq);if(u){const i=s().NK(u,(0,l().r)());if(p.direction===C().to.Left)if(n().Xp.fromDateTimes(e,t).contains(i.start))y=u;else{let e;e="datetimerange"===u.type||"daterange"===u.type?{...u,start_date:o,end_date:u.end_date}:"datetime"===u.type?{type:"datetimerange",start_date:o,start_time:u.start_time,end_date:u.start_date,end_time:u.start_time,time_zone:u.time_zone,reminder:u.reminder}:{type:"daterange",start_date:o,end_date:u.start_date,reminder:u.reminder};const t=s().NK(e,(0,l().r)());y=!i.end&&t.start>i.start||i.end&&t.start>i.end?g:e}else if(i.end?n().Xp.fromDateTimes(e,t).contains(i.end):n().Xp.fromDateTimes(e,t).contains(i.start))y=u;else{let e;e="date"===u.type?{...u,type:"daterange",end_date:o}:"datetime"===u.type?{...u,type:"datetimerange",end_date:o,end_time:"00:00"}:{...u,end_date:o};const t=s().NK(e,(0,l().r)());y=t.end&&t.end<t.start?g:e}}}if(y&&!d().Xy(g,y)){const e=s().c$(y,a().yw(m)||(0,l().r)());t.setState({...p,temporaryValue:e})}}}function P(e){const{environment:t,calendarStore:o,calendarBy:n,transaction:i}=e,r=o.state;r.isDragging&&r.temporaryValue&&(I({type:"dateValue",environment:t,dateValue:r.temporaryValue,propertyId:n,store:r.targetStore,transaction:i}),o.setState({...o.state,isDragging:!1}))}function T(e){const{calendarStore:t}=e,o=t.state;o.isDragging&&t.setState({...o,isDragging:!1})}function M(e){const{environment:t,store:o,collectionStore:i,collectionContextStore:a,startDayOfWeek:c,transaction:d}=e,p=a.dateRangeStartStore.state,u=(0,l().r)(),g=a.normalizedQueryStore.state;if(!g||!g.calendar_by)return;const f=(null==i?void 0:i.getMappedProperty(g.calendar_by))??g.calendar_by,y=s().gQ(p,c,u),S=y.startOf("month"),h=y.endOf("month"),b=n().ou.now().startOf("day");let w;return w=n().Xp.fromDateTimes(S,h).contains(b)?s().hT(b.valueOf(),u):s().hT(s().em(p,c,u).valueOf(),u),v().sW({store:o.getPropertiesStore(),data:{[f]:r().d7(w)},transaction:d}),m().mp({environment:t,store:o,collectionStore:i,collectionContextStore:a,shouldCoerce:!0,groupsPointer:[],transaction:d}),o}function I(e){const{environment:t,store:o,propertyId:n,transaction:i}=e;let a;"timestamp"===e.type?a=s().hT(e.timestampMs.valueOf(),(0,l().r)()):"dateValue"===e.type?a=e.dateValue:(0,p().t1)(e);const c=o.getPropertyValue(n),d=r().d7(a);v().sW({store:o.getPropertiesStore(),data:{[n]:d},transaction:i}),g().H({environment:t,store:o,dateProperty:{id:n,oldValue:c,newValue:d}})}function V(e){const{environment:t,collectionStore:o,calendarBy:n,store:i,insertStores:r,collectionContextStore:a,transaction:s}=e,l=i.getPropertyStore(n).getValue();for(const c of r)m().mp({environment:t,store:c,collectionStore:o,collectionContextStore:a,shouldCoerce:!0,groupsPointer:[],transaction:s}),y().sO({environment:t,store:c.getPropertyStore(n),value:l,transaction:s});return r.map((e=>w().G.createChildStore(o,e.pointer)))}},276124:(e,t,o)=>{"use strict";o.d(t,{z:()=>a});o(267602),o(470928);var n=()=>o(421654),i=()=>o(636340),r=()=>o(749826);function a(e){const{collectionViewBlockStore:t,collectionPointer:o,transaction:a}=e;i().sW({store:t,data:{collection_id:null},transaction:a});if(r().default.checkGate({gateName:"workflow_container"})){const e=t.getCollectionPointers();(null==e?void 0:e.find((e=>e.id===o.id)))||n().FH({stores:[t],update:{collection_pointers:[...e??[],o]},transaction:a})}n().FH({stores:[t],update:{collection_pointer:o},transaction:a})}},259801:(e,t,o)=>{"use strict";o.d(t,{N:()=>h,U:()=>S});o(821057);var n=()=>o(492788),i=()=>o(217465),r=()=>o(955620),a=()=>o(54512),s=()=>o(132156),l=()=>o(970105),c=()=>o(269299),d=()=>o(28063),p=()=>o(907005),u=()=>o(527278),m=()=>o(472753),g=()=>o(876822),f=()=>o(749826),v=()=>o(253225);const y=(0,o(788860).vU)({formDatabaseTitle:{id:"newBlock.databaseInline.formDatabaseTitle",defaultMessage:"New form"}});function S(e){var t,o,r;const{environment:c,store:u,viewType:y,transaction:S}=e,h=null===(t=u.getBlockTitleStore())||void 0===t?void 0:t.getValue();f().default.checkGate({gateName:"mobile_keep_template_gallery_open"})&&v().Z.state.open&&v().Z.setState({open:!1});const b=u.getSpaceId()??(null===(o=g().default.state.currentSpaceStore)||void 0===o?void 0:o.id)??(null===(r=g().default.state.mainEditorCurrentBlockStore)||void 0===r?void 0:r.getSpaceId()),w=b?c.idCreator.getSpaceIdCreatorSync(b):void 0;s().Z({environment:c,sourceBlockId:"root",targetBlockPointer:u.pointer,sourceBlockSubtree:(0,i().partialRecordMapToRecordMap)((0,p().GP)({isInline:!1,viewType:y})),targetRecordCache:u.inMemoryRecordCache,transaction:S,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0,spaceIdCreator:w}),d().vs({environment:c,block:u,blockType:"collection_view_page",transaction:S}),h&&l().sO({environment:c,store:u.getBlockTitleStore(),value:h,transaction:S}),n().default.afterNextFlush((()=>{const e=m().R.findCollectionViewBlockFromStore(u);var t;e&&"handleCreated"in e&&(null===(t=e.handleCreated)||void 0===t||t.call(e))})),a().W(c,{from:"template_picker",type:"collection_view_page",creating_block_id:u.id,is_full_screen:!0,view_type:y})}async function h(e){var t,n,l;const{environment:m,store:f}=e,v=null===(t=f.getBlockTitleStore())||void 0===t?void 0:t.getValue(),{formsEditorDependency:S}=await Promise.resolve().then(o.bind(o,688725)),{formEditorActions:h}=await S.load(),b=f.getSpaceId()??(null===(n=g().default.state.currentSpaceStore)||void 0===n?void 0:n.id)??(null===(l=g().default.state.mainEditorCurrentBlockStore)||void 0===l?void 0:l.getSpaceId()),w=b?m.idCreator.getSpaceIdCreatorSync(b):void 0;c().createAndCommit({userAction:"HorizontalTemplatePicker.createForm",environment:m,canUndo:!0,perform:e=>{var t;s().Z({environment:m,sourceBlockId:"root",targetBlockPointer:f.pointer,sourceBlockSubtree:(0,i().partialRecordMapToRecordMap)((0,p().Xq)({isInline:!1,name:(0,r().PgY)(v)?(0,r().TPx)(u().Z.formatMessage(y.formDatabaseTitle)):v})),targetRecordCache:f.inMemoryRecordCache,transaction:e,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0,spaceIdCreator:w}),d().vs({environment:m,block:f,blockType:"collection_view_page",transaction:e});const o=f.getCollectionStore(),n=null==o||null===(t=o.getModel())||void 0===t?void 0:t.getNormalizedSchema(),l=f;if(!n)throw new Error("Schema not found");const c=h.createCollectionFormEditorView({environment:m,transaction:e,collectionViewBlockStore:l,schema:n,initializeWithAllDefaultQuestions:!0});h.createResponsesCollectionView({environment:m,transaction:e,collectionViewBlockStore:l,schema:n}),a().W(m,{from:"template_picker",type:"form",creating_block_id:f.pointer.id,form_id:null==c?void 0:c.formId,view_id:l.id})}})}},654493:(e,t,o)=>{"use strict";o.d(t,{I:()=>a});var n=()=>o(527278);const i=(0,o(788860).vU)({table:{defaultMessage:"Table",id:"templatePickerHelpers.databaseTemplateNames.table"},board:{defaultMessage:"Board",id:"templatePickerHelpers.databaseTemplateNames.board"},list:{defaultMessage:"List",id:"templatePickerHelpers.databaseTemplateNames.list"},calendar:{defaultMessage:"Calendar",id:"templatePickerHelpers.databaseTemplateNames.calendar"},gallery:{defaultMessage:"Gallery",id:"templatePickerHelpers.databaseTemplateNames.gallery"},timeline:{defaultMessage:"Timeline",id:"templatePickerHelpers.databaseTemplateNames.timeline"},form:{defaultMessage:"Form",id:"templatePickerHelpers.databaseTemplateNames.form"},tableView:{defaultMessage:"Table view",id:"templatePickerHelpers.databaseTemplateNames.tableView"},boardView:{defaultMessage:"Board view",id:"templatePickerHelpers.databaseTemplateNames.boardView"},listView:{defaultMessage:"List view",id:"templatePickerHelpers.databaseTemplateNames.listView"},calendarView:{defaultMessage:"Calendar view",id:"templatePickerHelpers.databaseTemplateNames.calendarView"},galleryView:{defaultMessage:"Gallery view",id:"templatePickerHelpers.databaseTemplateNames.galleryView"},timelineView:{defaultMessage:"Timeline view",id:"templatePickerHelpers.databaseTemplateNames.timelineView"}});function r(e){const{environment:t,store:n,viewType:i}=e;o(269299).createAndCommit({userAction:"templatePickerHelpers.handleClickForViewType",environment:t,canUndo:!0,perform:e=>{(0,o(259801).U)({environment:t,store:n,viewType:i,transaction:e}),o(47443)._c({environment:t,store:n,pageVisitSource:o(506347).tY.LinkInPage});const r=n.getCollectionViewStores()[0];r&&(0,o(714966).u)(r.id,{viewType:i})}})}const a=[{name:n().Z.formatMessage(i.table),type:"table",iconFn:o(644602).t,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>r({environment:e,store:t,viewType:"table"})},{name:n().Z.formatMessage(i.board),type:"board",iconFn:o(5837).i,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>r({environment:e,store:t,viewType:"board"})},{name:n().Z.formatMessage(i.list),type:"list",iconFn:o(150345).O,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>r({environment:e,store:t,viewType:"list"})},{name:n().Z.formatMessage(i.timeline),type:"timeline",iconFn:o(161906)._,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>r({environment:e,store:t,viewType:"timeline"})},{name:n().Z.formatMessage(i.calendar),type:"calendar",iconFn:o(866417).N,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>r({environment:e,store:t,viewType:"calendar"})},{name:n().Z.formatMessage(i.gallery),type:"gallery",iconFn:o(770019).n,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>r({environment:e,store:t,viewType:"gallery"})}]},900596:(e,t,o)=>{"use strict";o.d(t,{Z:()=>r});o(667294);var n=()=>o(788860),i=o(785893);const r=function(e){let{collectionViewName:t,collectionViewType:r}=e;return t?(0,i.jsx)(o(827618).Z,{children:t}):"page"===r?(0,i.jsx)(n()._H,{id:"database.collectionView.untitledName.untitled",defaultMessage:"Untitled"}):(0,i.jsx)(n()._H,{...o(887430).b1[r]})}},444851:(e,t,o)=>{"use strict";o.d(t,{En:()=>n,IX:()=>a,Ky:()=>l,_e:()=>s,aH:()=>d,bd:()=>p,fT:()=>c,n4:()=>m,rb:()=>r,tD:()=>i,vi:()=>g,yx:()=>u});const n=8,i=10,r=8,a=24,s=6,l=1.5,c=(a-l)/2,d=a+s,p=`calc(100% + ${r+(n-s)-d}px)`,u=a+8,m=-16;function g(e){return"margin_comments"===e?12:"comment_unfurl"===e?14:16}},882292:(e,t,o)=>{"use strict";o.d(t,{Z:()=>i});o(667294);var n=o(785893);const i=function(e){const t=((0,o(219727).O7)().device.isMobile,{width:16});return(0,n.jsx)("div",{style:t,children:e.icon(e.styles)})}},39607:(e,t,o)=>{"use strict";o.d(t,{Z:()=>H});o(267602),o(916054),o(653476),o(241792);var n=o(667294),i=()=>o(219727),r=()=>o(142735),a=()=>o(846550),s=()=>o(506347),l=()=>o(159732),c=()=>o(899548),d=()=>o(788860),p=()=>o(513670),u=()=>o(8101),m=()=>o(295274),g=()=>o(497065),f=()=>o(269299),v=()=>o(707513),y=()=>o(561933),S=o(785893);const h={...v().Yu,position:"absolute",left:0,right:0,top:0,bottom:0},b={marginLeft:4,fontWeight:v().Ue.semibold};function w(e){const{prefix:t,viewName:o,viewType:n}=e;return(0,S.jsxs)("div",{style:{position:"relative",width:"100%"},children:[" ",(0,S.jsxs)("div",{style:h,children:[t,n&&y().aW[n]({marginLeft:8,marginRight:2,width:"1em",display:"inline",verticalAlign:"bottom"}),(0,S.jsx)("span",{style:b,children:o})]})]})}var C=()=>o(125659),k=()=>o(41340),_=()=>o(718048),x=()=>o(641702),P=()=>o(861026),T=()=>o(429725),M=()=>o(352230),I=()=>o(148126),V=()=>o(876822),B=()=>o(826955),A=()=>o(807230),j=()=>o(292612);const Z=function(e){const t=(0,i().O7)(),n=(0,a().Fg)();return(0,S.jsx)(o(108714).Z,{href:e.href,external:!0,onClick:()=>o(407391).Fs(t,{from:e.helpButtonContext}),children:(0,S.jsx)(o(1910).Z,{icon:o(456681).m,style:{height:24,width:24,marginRight:-6,fill:n.mediumIconColor}})})};var D=()=>o(953744),F=()=>o(119891),Y=()=>o(740046),E=()=>o(18748),L=()=>o(255577),N=()=>o(388284),U=()=>o(710999);const R=(0,d().vU)({filterPlaceholder:{id:"collectionPicker.searchBarFilter.text",defaultMessage:"Filter…"}});const H=function(e){let{collectionStore:t,isOverlay:s,onEmptyEnter:l,onEmptyPageClick:c,onCancelClick:p,canConfigureCollection:u,locked:m,onTemplateClick:g}=e;const f=(0,a().Fg)(),v=(0,i().Fy)(),[y,h]=(0,n.useState)(""),b=(0,r().qz)(void 0,o(692304).Z),w=(0,r().VK)((()=>t.getTemplatePageStores().filter((e=>e.getAlive()))),[t]),C=(0,r().VK)((()=>w.every((e=>e.isReady()))),[w]),k=(0,r().VK)((()=>s&&null!=y&&y.length?(0,o(619186).ZP)(y,w,(e=>String(e.getProperties().title)??"")):w),[w,y,s]);if(!C)return null;let _=(0,S.jsx)(J,{collectionStore:t,onEmptyEnter:l,onEmptyPageClick:c,onCancelClick:p,canConfigureCollection:u,isOverlay:s,locked:m,onTemplateClick:g,menuListStore:b,templateInputValue:y,filteredTemplatePageStores:k,draggable:!0});const x=(0,S.jsx)(z,{templateInputValue:y,setTemplateInputValue:h});if(s){let e;return e=v.isMobile?{menuType:M().o.Modal,title:(0,S.jsx)(d()._H,{defaultMessage:"Database templates",id:"database.mobileTemplatesMenu.title"}),left:(0,S.jsx)(o(470386).CancelMenuText,{}),onClickLeft:p}:{menuType:M().o.Popup,width:360},w.length>6&&y&&(_=(0,S.jsx)(J,{collectionStore:t,onEmptyEnter:l,onEmptyPageClick:c,onCancelClick:p,canConfigureCollection:u,isOverlay:s,locked:m,onTemplateClick:g,menuListStore:b,templateInputValue:y,filteredTemplatePageStores:k,draggable:!1})),(0,S.jsxs)(o(198829).Z,{...e,header:(0,S.jsx)(K,{collectionStore:t}),children:[0===w.length&&(0,S.jsx)(N().Z,{children:(0,S.jsx)("div",{style:{fontSize:14,padding:v.isMobile?"12px 16px":"0 14px 3px 14px",color:f.lightTextColor,wordBreak:"keep-all",...v.isMobile&&{background:f.contentBackground,boxShadow:`0 1px 0 ${f.regularDividerColor}`,marginBottom:1}},children:(0,S.jsx)(d()._H,{defaultMessage:"Replicate page formats inside this database with templates.",id:"database.emptyTemplatesList.info"})})}),w.length>6?x:void 0,_]})}return _};function K(e){let{collectionStore:t}=e;const o=(0,i().O7)(),n=(0,r().VK)((()=>t.getNameStore().getValue()),[t]);if(o.device.isMobile)return null;const a=n?(0,S.jsx)(S.Fragment,{children:(0,x().Xh)(n,t)}):(0,S.jsx)(d()._H,{defaultMessage:"Untitled",id:"database.templateList.UntitledDatabaseTitle"});return(0,S.jsx)(E().ZP,{style:{marginTop:6},title:(0,S.jsx)(w,{prefix:(0,S.jsx)(d()._H,{id:"database.templatesList.templatesFor",defaultMessage:"Templates for"}),viewName:a}),right:(0,S.jsx)(Z,{helpButtonContext:"collection_templates_menu",href:(0,I().UY)("guides.databaseTemplates")})})}function W(e){let{props:{ref:t,...o},isOverlay:n,locked:r}=e;const s=(0,a().Fg)(),c=(0,i().O7)(),p=(0,S.jsx)(d()._H,{defaultMessage:"New template",id:"database.templateView.newTemplateButton"});return n?(0,S.jsx)(j().Z,{isBlue:c.device.isDesktop,title:p,...o}):(0,S.jsx)(U().Z,{title:p,icon:(0,l().R)({width:18,fill:s.lightIconColor,marginLeft:1,marginRight:11}),type:"new_template",format:n?"collection-overlay":"page-menu-item",locked:r,...o})}function O(e,t,o){const{mainEditorCurrentBlockStore:n}=V().default.state;!function(e,t,o){o?o(e):g().c4({environment:t,url:e})}(n?(0,T().ZP)({store:n,peekViewBlockId:e.id,fullyQualified:!1,pageVisitSource:s().tY.Create}):(0,T().ZP)({store:e,fullyQualified:!1,pageVisitSource:s().tY.Create}),t,o)}function z(e){let{templateInputValue:t,setTemplateInputValue:o}=e;const r=(0,d().YB)(),a=(0,i().O7)(),s=(0,n.useCallback)((e=>o(e.currentTarget.value)),[o]),{device:l}=a,p=!l.isMobile||void 0;return(0,S.jsx)("div",{style:{margin:l.isMobile?0:"10px 0"},children:(0,S.jsx)(Y().ZP,{value:t,focusInitial:p,placeholder:r.formatMessage(R.filterPlaceholder),showClearButton:!0,inputLeft:(0,S.jsx)(Y().f_,{icon:c().R}),onChange:s,style:{...l.isAndroid&&{borderBottom:"none"}}})})}function J(e){let{filteredTemplatePageStores:t,draggable:o,collectionStore:a,onEmptyEnter:s,onEmptyPageClick:l,onCancelClick:c,canConfigureCollection:d,isOverlay:g,locked:v,onTemplateClick:y,menuListStore:h,templateInputValue:b}=e;const w=(0,i().O7)(),x=(0,n.useContext)(C().cu),T=(0,n.useContext)(k().Z),M=(0,n.useCallback)((e=>function(e,t,o,n){n.unsetFocus(),f().createAndCommit({userAction:"CollectionTemplatePicker.handleCollectionTemplatesReorder",environment:t,canUndo:!0,perform:t=>m().$p({collectionStore:o,newTemplateIds:e,transaction:t})})}(e,w,a,h)),[w,a,h]),I=(0,n.useCallback)((()=>function(e,t,o,n){var i;(0,A().ww)(e)&&(o(),u().rN(e,{template_type:"empty_page",from:"collections_template_picker",is_keyboard:!0,collection_id:t.id,collection_view_id:null==n||null===(i=n.collectionViewStore())||void 0===i?void 0:i.id}))}(w,a,s,x)),[w,a,s,x]),V=(0,n.useCallback)((e=>function(e,t,o,n){(0,A().ww)(t)&&(o(e.event),u().rN(t,{template_type:"empty_page",from:"collections_template_picker",is_keyboard:"keydown"===e.event.type,...n&&(0,P().Pn)(n)}))}(e,w,l,x)),[x,w,l]),j=(0,n.useCallback)((e=>function(e,t,o,n,i,r,a){if((0,A().ww)(t)){var s;const{performResult:e}=f().createAndCommit({userAction:"CollectionTemplatePicker.newPage",environment:t,canUndo:!0,perform:e=>m().nx({environment:t,collectionStore:o,transaction:e,title:n})});e&&O(e,t,r),u().dZ(t,{collection_id:o.id,collection_view_id:null==a||null===(s=a.collectionViewStore())||void 0===s?void 0:s.id})}null==i||i()}(0,w,a,b,c,T,x)),[w,a,b,c,T,x]),{device:Z}=w,Y=(0,n.useMemo)((()=>({key:"create-template",render:(e,t)=>(0,S.jsx)(W,{isOverlay:g,locked:v,props:e}),action:j})),[j,g,v]),E=(0,r().VK)((()=>null==x?void 0:x.defaultPageTemplateStore.state),[x]),U=(0,r().VK)((()=>({key:"empty",render:(e,o)=>{if(0!==t.length&&""===b)return(0,S.jsx)(D().Z,{collectionStore:a,canConfigureCollection:d,isOverlay:g,templateStore:void 0,isMobile:w.device.isMobile,locked:v||!d,draggable:!0,isDefault:void 0===(null==E?void 0:E.id),onCancelClick:c,...e})},action:V})),[d,a,null==E?void 0:E.id,w.device.isMobile,V,g,v,c,b,t.length]),R=(0,r().VK)((()=>{const e=t.map((e=>e.id));return p().oA([0!==t.length&&{key:"templates",render:t=>{const i=t.children.slice(0,t.children.length-1),r=t.children[t.children.length-1];return(0,S.jsx)(N().Z,{...t,disableDesktopPadding:!g,disableMobileBorders:!0,children:(0,S.jsxs)(n.Fragment,{children:[Z.isMobile||v||!d?i.map(((e,t)=>i[t])):(0,S.jsx)(F().ZP,{direction:"vertical",keys:e,disabled:!o,renderKey:(t,o)=>i[e.indexOf(t)],onDrop:M}),r]})})},items:[...t.map((e=>function(e,t,o,i,r,a,s,l,c,d){const{device:p}=e,u=null==d?void 0:d.defaultPageTemplateStore.state,m=B().Mz.fromBlockStore(t),g=null!=m&&m.isActive()?m.getRecurrence():void 0,f=m&&!m.canEdit(),v="disabled_duplication"===(null==m?void 0:m.getStatus())||"disabled_inactive_space"===(null==m?void 0:m.getStatus());return{key:t.id,render:e=>(0,n.createElement)(D().Z,{...e,key:t.id,isOverlay:s,collectionStore:i,canConfigureCollection:r,templateStore:t,isMobile:p.isMobile,locked:a,onCancelClick:l,draggable:o,isDefault:(null==u?void 0:u.id)===t.id,recurrence:g,recurrenceDisabled:v,recurrenceButtonDisabled:f}),action:o=>{(0,A().ww)(e)&&c({templateStore:t,isKeyboard:"keydown"===o.event.type,useCrdt:(0,_().WA)(i.getSpaceStore())})}}}(w,e,o,a,d,v,g,c,y,x))),U]},d?{key:"create-template",render:e=>(0,S.jsx)(N().Z,{topBorder:g,disableDesktopPadding:!g,disableMobileBorders:!0,...e}),items:[Y]}:void 0])}),[d,x,a,Y,Z.isMobile,o,U,w,M,g,v,c,y,t]);return(0,S.jsx)(L().ZP,{type:L().iW.Vertical,store:h,initialFocus:void 0,disableInitialScroll:!0,disableCommandEnter:!0,onEmptyEnter:I,sections:R,resetFocusOnMouseOut:!0})}},241174:(e,t,o)=>{"use strict";o.r(t),o.d(t,{getMobilePreviewTemplates:()=>u,getSuggestedTemplatesForSearch:()=>p});o(241792);var n=()=>o(603684),i=()=>o(98934),r=()=>o(497065),a=()=>o(527278),s=()=>o(532697),l=()=>o(482962),c=()=>o(749826),d=()=>o(154060);function p(e){const{persona:t,environment:o}=e,n=a().Z.getIntl();return(0,s().ay)(c().default,t).map((e=>{const t=(0,i().G)(e,n);return{name:t.name,icon:e.emoji||e.icon||void 0,onClick:()=>{(e=>{const t=(0,l().W4)({templateGalleryItem:e.rootId});r().c4({environment:o,url:t})})(t)}}}))}function u(e){const t=(0,d().it)(e);return(0,d().Io)(e).map((e=>{const o=t[e];return{category:e,sectionHeaderMessage:n()._5[e],templates:o}}))}},69255:(e,t,o)=>{"use strict";o.d(t,{HB:()=>c,K0:()=>u,b6:()=>v,dQ:()=>d,pd:()=>m,re:()=>p,ss:()=>f});o(670560),o(267602),o(241792),o(731107);var n=()=>o(788860),i=()=>o(279830),r=()=>o(269299),a=()=>o(527278),s=()=>o(821227),l=()=>o(838266);const c=(0,n().vU)({emptyWithIcon:{defaultMessage:"Empty page with icon",id:"templatePickerHelpers.basicTemplateItems.emptyWithIcon"},empty:{defaultMessage:"Empty page",id:"templatePickerHelpers.basicTemplateItems.empty"},templates:{defaultMessage:"Templates",id:"templatePickerHelpers.basicTemplateItems.templates"},import:{defaultMessage:"Import",id:"templatePickerHelpers.basicTemplateItems.import"}}),d={name:a().Z.formatMessage(c.empty),iconFn:o(169352).a,type:"empty_page",shouldShow:()=>!0,onClick:(e,t)=>{r().createAndCommit({userAction:"templatePickerHelpers.emptyTemplateItems",environment:e,canUndo:!0,perform:o=>{i().e({environment:e,store:t,transaction:o})}})}},p={name:a().Z.formatMessage(c.templates),type:"templates",iconFn:e=>(0,o(66782).i)(e),shouldShow:()=>!0,onClick:e=>{(0,s().C)({environment:e})}},u={name:a().Z.formatMessage(c.templates),type:"templates",iconFn:e=>(0,o(749166).w)(e),shouldShow:()=>!0,onClick:e=>{(0,s().C)({environment:e})}},m={name:a().Z.formatMessage(c.import),type:"import",iconFn:o(1723).l,shouldShow:()=>!0,onClick:(e,t)=>{const n=o(956057).Il();o(623521).Z.setState({flowId:n}),o(286310).Sy(e,{from:"new_page",flowId:n}),l().default.setState({...l().default.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:void 0})}},g=(0,n().vU)({pageWithIcon:{defaultMessage:"Page with icon",id:"templatePickerHelpers.mobileBasicTemplateItems.pageWithIcon"},emptyPage:{defaultMessage:"Empty page",id:"templatePickerHelpers.mobileBasicTemplateItems.emptyPage"}}),f=[{name:a().Z.formatMessage(g.pageWithIcon),type:"page_with_icon",shouldShow:()=>!0,onClick:(e,t)=>{r().createAndCommit({userAction:"templatePickerHelpers.mobileBasicTemplateItems",environment:e,canUndo:!0,perform:o=>{i().T({environment:e,store:t,transaction:o})}})}},{name:a().Z.formatMessage(g.emptyPage),type:"empty_page",shouldShow:()=>!0,onClick:(e,t)=>{r().createAndCommit({userAction:"templatePickerHelpers.mobileBasicTemplateItems",environment:e,canUndo:!0,perform:o=>{i().e({environment:e,store:t,transaction:o})}})}}];function v(e,t){const o=new Map(e.map((e=>[e.type,e])));return t.reduce(((e,t)=>(o.has(t)&&e.push(o.get(t)),e)),[])}},568981:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>O,getIconStyle:()=>J});o(670560),o(267602),o(653476),o(241792);var n=o(667294),i=()=>o(219727),r=()=>o(142735),a=()=>o(846550),s=()=>o(494488),l=()=>o(641772),c=()=>o(754048),d=()=>o(825886),p=()=>o(828042),u=()=>o(217465),m=()=>o(955620),g=()=>o(788860),f=()=>o(513670),v=()=>o(8101),y=()=>o(824462),S=()=>o(295274),h=()=>o(241516),b=()=>o(143346),w=()=>o(279830),C=()=>o(346839),k=()=>o(269299),_=()=>o(869211),x=()=>o(654493),P=()=>o(887430),T=()=>o(544903),M=()=>o(632775),I=()=>o(23338),V=()=>o(201741),B=()=>o(641702),A=()=>o(982855),j=()=>o(345918),Z=()=>o(677559),D=()=>o(876822),F=()=>o(749826),Y=()=>o(127519),E=()=>o(807230),L=()=>o(312578),N=()=>o(255577),U=()=>o(69255),R=()=>o(710999),H=o(785893);const K=(0,g().vU)({genericHelpMeWriteNewPage:{defaultMessage:"Write “{filter}” with AI…",id:"id.completions.genericHelpMeWriteNewPage"},genericHelpMeWriteNewPageEmpty:{defaultMessage:"Start writing with AI…",id:"id.completions.genericHelpMeWriteNewPageEmpty"},dictate:{defaultMessage:"Dictate",id:"id.dictate.dictateIntoNewPage"}});function W(e){let{menuListStore:t,sectionTitleStyle:o,handleTemplatePickerEmptyEnter:n,sectionsBeforeMobilePreviewSections:a,renderMobileTemplatePreviewItem:s}=e;const l=(0,r().VK)((()=>{var e;return null===(e=D().default.state.currentSpaceStore)||void 0===e?void 0:e.getSubscriptionTier()}),[]),c=(0,r().VK)((()=>(0,j().kO)().function),[]),d=(0,i().O7)(),p=(0,Z().XJ)(T().vF),u=(0,r().VK)((()=>{if(!p.value)return[];return p.value.templatePickerItems.getMobilePreviewTemplates({userPersona:c,subscriptionTier:l,environment:d}).map((e=>{let{category:t,sectionHeaderMessage:n,templates:i}=e;return{key:t,render:e=>(0,H.jsxs)("div",{children:[(0,H.jsx)("div",{style:o,children:(0,H.jsx)(g()._H,{...n})}),e.children]},e.key),items:i.map(s)}}))}),[p.value,c,l,d,s,o]),m="pending"===p.status?(0,H.jsx)("div",{style:{marginTop:o.marginTop,marginBottom:o.marginBottom,paddingLeft:10},children:(0,H.jsx)(L().Z,{})}):void 0;return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(N().ZP,{type:N().iW.Vertical,store:t,initialFocus:void 0,disableInitialScroll:!0,disableCommandEnter:!0,onEmptyEnter:n,sections:[...a,...u]}),m]})}const O=function(e){let{store:t,menuListStore:n}=e;const a=(0,i().O7)(),s=(0,i().Fy)();(0,o(732811).K)((()=>{n.reset()}));const l=(0,r().VK)((()=>o(890324).Z.getMode(a,t)),[a,t]),c=(0,r().VK)((()=>o(804217).default.state.online),[]),d=(0,r().VK)((()=>function(e){return Boolean(e.getAssociatedCollectionStore())}(t)),[t]),p=(0,r().VK)((()=>t.getAssociatedCollectionStore()),[t]),g=(0,r().VK)((()=>p?p.getParentBlockStore():void 0),[p]),f=(0,r().VK)((()=>p?p.getTemplatePageStores():void 0),[p]),v=(0,r().VK)((()=>function(e){return e.isTemplate()}(t)),[t]),h=(0,r().VK)((()=>function(e){const t=e.getAssociatedCollectionStore(),o=t&&t.getParentBlockStore();return P().eD({collectionStore:t,collectionViewBlockStore:o,checkNavigableAncestorLocked:!0})}(t)),[t]),C=(0,r().VK)((()=>!(null==g||!g.isNonEditableState())),[g]);return c?(0,H.jsxs)("div",{children:[!d&&!s.isMobile&&(0,H.jsx)(ee,{store:t,menuListStore:n,publicEditMode:l}),!d&&s.isTablet&&(0,H.jsx)(q,{store:t,menuListStore:n,publicEditMode:l}),d&&!v&&p&&g&&f&&f.length>0&&(0,H.jsx)(o(39607).Z,{isOverlay:!1,collectionStore:p,canConfigureCollection:h,onTemplateClick:e=>{!async function(e,t,o){let n;const i=F().default.checkGate({gateName:"collection_template_local_duplicate"});if(i){const t=await y().callApi({eventName:"loadBlockSubtree",environment:o,data:{block:{id:e.templateStore.id,spaceId:e.templateStore.getSpaceId()},shallow:!1,recordCountLimit:S().PM}});"success"===t.type&&(n=u().RecordMapWithRole.create(t.data.subtreeRecordMap),b().fL({environment:o,inMemoryRecordCache:e.templateStore.inMemoryRecordCache,recordMap:n,debugSource:"TemplatePicker.handleCollectionTemplateClick"}))}k().createAndCommit({userAction:"TemplatePicker.handleCollectionTemplateClick",environment:o,canUndo:!0,perform:n=>{const r=t.getTitleValue();S().ob({title:""!==m().QaF(r)?{text:r}:"template",environment:o,store:t,templateStore:e.templateStore,isKeyboard:e.isKeyboard,isCreateIn:!1,transaction:n,inMemoryRecordCache:i?e.templateStore.inMemoryRecordCache:void 0,from:"template_picker"})}})}(e,t,a)},onEmptyEnter:()=>G(a),onEmptyPageClick:()=>function(e,t){k().createAndCommit({userAction:"TemplatePicker.handleTemplateEmptyPageClick",environment:t,canUndo:!0,perform:o=>{w().e({environment:t,store:e,transaction:o})}})}(t,a),locked:C})]}):null};function z(e,t){const{device:o}=e;return{...s().ZD,marginTop:16,marginBottom:4,letterSpacing:0,fontSize:o.isMobile?12:13,color:t.lightTextColor,display:"flex",alignItems:"center",fontWeight:500}}function J(e,t){return e.isLargeDatabaseIcon?{width:16,fill:t.lightIconColor,marginLeft:2,marginRight:12}:{width:20,fill:t.lightIconColor,marginRight:10}}function G(e){const t=Y().default.state;(0,E().ww)(e)&&"editing"===t.mode&&(k().createAndCommit({userAction:"TemplatePicker.handleTemplatePickerEmptyEnter",environment:e,canUndo:!0,perform:o=>{C().IO({environment:e,editorMode:"default",transaction:o,multiSelection:t.multiSelection})}}),v().rN(e,{is_keyboard:!0,from:"template_picker",template_type:"empty_page"}))}function X(e,t,o,n){return!!e.device.isMobile&&((0,A().GD)(n)&&t.focused&&(0,c().U)({width:14,marginRight:6,fill:o.lightIconColor}))}function $(e,t,o,i,r){return{key:e.name,render:i=>{var a;let{ref:s,...l}=i;return(0,n.createElement)(R().Z,{...l,key:e.name,format:"page-menu-item",title:e.name,type:e.type,icon:null===(a=e.iconFn)||void 0===a?void 0:a.call(e,J(e,o)),locked:!1,right:X(t,l,o,r)})},action:o=>{(0,E().ww)(t)&&(v().rN(t,{is_keyboard:"keydown"===o.event.type,from:"template_picker",template_type:e.type}),e.onClick(t,i))}}}function q(e){let{store:t,menuListStore:o,publicEditMode:r}=e;const s=(0,a().Fg)(),l=(0,i().O7)(),c=(0,n.useCallback)((e=>$(e,l,s,t,r)),[l,s,t,r]),d=[{key:"Basic",render:e=>(0,H.jsx)("div",{children:e.children},e.key),items:U().ss.map(c)},{key:"Database",render:e=>(0,H.jsxs)("div",{children:[(0,H.jsx)("div",{style:z(l,s),children:(0,H.jsx)(g()._H,{defaultMessage:"Database",id:"templatePicker.mobileTemplatePicker.databaseTemplateSection.label"})}),e.children]},e.key),items:x().I.filter((e=>e.shouldShow(l))).map(c)}];return(0,H.jsx)(W,{menuListStore:o,sectionTitleStyle:z(l,s),handleTemplatePickerEmptyEnter:()=>G(l),sectionsBeforeMobilePreviewSections:d,renderMobileTemplatePreviewItem:e=>function(e,t){return{key:e.name,render:t=>{let{ref:o,...i}=t;return(0,n.createElement)(R().Z,{...i,key:e.name,title:e.name,type:"page_template",format:"page-menu-item",locked:!1})},action:()=>{h().openWithItem({environment:t,item:e,createNewPage:!1,isPrivate:!1,disablePointerEvents:!1})}}}(e,l)})}function Q(e,t,o,i,r,a,s){const c=(0,U().b6)(x().I,["table"]),d=f().zu(x().I,...c),p=!a&&d.length>0?function(e,t,o,i,r){return{key:e,render:o=>{let{ref:a,...s}=o;return(0,n.createElement)(R().Z,{...s,key:e,format:"page-menu-item",title:(0,H.jsx)(g()._H,{defaultMessage:"More",id:"templatePicker.more.label"}),type:"more",icon:(0,l().o)({width:20,fill:i.lightIconColor,marginRight:10}),locked:!1,right:X(t,s,i,r)})},action:()=>o(!0)}}("moreNew",t,s,o,r):null,u=[U().pd,e?U().K0:U().re,...c,...p?[]:d].filter((e=>e.shouldShow(t))).map((e=>$(e,t,o,i,r)));return p?u.concat(p):u}function ee(e){let{store:t,menuListStore:o,publicEditMode:s}=e;const l=(0,g().YB)(),c=(0,a().Fg)(),u=(0,i().O7)(),m=(0,r().VK)((()=>V().TI.state&&V().mn.state===t.id),[t]),[f,v]=(0,n.useState)(!1),y=(0,r().VK)((()=>(0,A().GD)(s)),[s]),S=(0,r().VK)((()=>(0,I().d)()),[]),h=(0,r().VK)((()=>0===t.getContentLength()),[t])?[$(U().dQ,u,c,t,s)]:[],b=Q(y,u,c,t,s,f,v),C=(0,r().VK)((()=>t.getTitleValue()),[t]),x=[];if(y){const e=function(e,t,o,i,r,a){return{key:"ask ai",render:r=>{let{ref:s,...l}=r;const c=e.replace(/(\r\n|\n|\r)/gm," "),d=c.length>30?`${c.slice(0,30)}…`:c;return(0,n.createElement)(R().Z,{...l,key:"genericHelpMeWriteNewPageWithAI",format:"page-menu-item",title:c?i.formatMessage(K.genericHelpMeWriteNewPage,{filter:d}):i.formatMessage(K.genericHelpMeWriteNewPageEmpty),type:"ai",icon:(0,H.jsx)("div",{style:{height:24,width:24,borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",marginRight:4},children:(0,p().t)({width:16,height:16,fill:"dark"===o.mode?o.accentColors.purple[700]:o.accentColors.purple[400]})}),locked:!1,right:X(t,l,o,a)})},action:()=>{k().createAndCommit({userAction:"TemplatePicker.genericHelpMeWriteNewPageWithAI",environment:t,canUndo:!0,perform:o=>{w().e({environment:t,store:r,transaction:o,preventTextSelection:!1,onTextSelection(){(0,_().openHelpMeWriteGenericPopup)({environment:t,title:e})}})}})}}}((0,B().Xh)(C,t).trim(),u,c,l,t,s);x.push(e)}if(S){const e=function(e,t,o,i,r){return{key:"dictate",render:i=>{let{ref:a,...s}=i;return(0,n.createElement)(R().Z,{...s,key:"dictateNewPage",format:"page-menu-item",title:o.formatMessage(K.dictate),type:"dictation",icon:(0,H.jsx)("div",{style:{height:24,width:24,borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",marginRight:4},children:(0,d().q)({width:16,height:16,fill:"dark"===t.mode?t.accentColors.red[700]:t.accentColors.red[400]})}),locked:!1,right:X(e,s,t,r)})},action:async()=>{const{dictationActions:t}=await M().Xb.load();t.startDictation({environment:e,blockStore:i,from:"template_picker"})}}}(u,c,l,t,s);x.push(e)}return m?null:(0,H.jsx)(N().ZP,{type:N().iW.Horizontal,store:o,disableInitialScroll:!0,disableCommandEnter:!0,isEnterOnHoverEmpty:!0,initialFocus:void 0,disableKeyboard:!0,onEmptyEnter:()=>G(u),sections:[{key:"Basic",render:e=>(0,H.jsx)("div",{children:e.children},e.key),items:[...h,...x]},{key:"Add new",render:e=>(0,H.jsxs)("div",{children:[(0,H.jsx)("div",{style:z(u,c),children:(0,H.jsx)(g()._H,{defaultMessage:"Add new",id:"templatePicker.add new.label"})}),e.children]},e.key),items:b}]})}},604772:(e,t,o)=>{"use strict";o.r(t),o.d(t,{AppInitializationOverlay:()=>L});o(267602),o(653476),o(470928),o(30005),o(241792);var n=o(667294),i=()=>o(146947),r=()=>o(219727),a=()=>o(142735),s=()=>o(846550),l=()=>o(347628),c=()=>o(455530),d=()=>o(235665),p=()=>o(396136),u=()=>o(255933),m=()=>o(306164),g=()=>o(492522),f=()=>o(788860),v=()=>o(707513),y=()=>o(594546),S=()=>o(749826);var h=()=>o(241516),b=()=>o(269299),w=()=>o(763707),C=()=>o(180921),k=()=>o(2971),_=()=>o(291688),x=()=>o(110232),P=()=>o(508853),T=()=>o(718959),M=()=>o(589525),I=()=>o(876822),V=()=>o(311562),B=()=>o(826955),A=()=>o(154186),j=()=>o(827618),Z=()=>o(577741),D=()=>o(312578),F=()=>o(906651),Y=()=>o(778447),E=o(785893);function L(e){var t;const{collectionViewBlockStore:o}=e,L=(0,r().O7)(),{isMobile:N}=(0,r().Fy)(),U=(0,a().VK)((()=>({top:L.WindowSizeStore.getSafePaddingTopPx(0),bottom:L.WindowSizeStore.getSafePaddingBottomPx(64)})),[L.WindowSizeStore]),R=(0,s().yK)((e=>({overlay:{position:"absolute",top:0,left:0,overflow:"visible",height:"100vh",width:"100%",zIndex:g().mJ,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",backgroundColor:e.surface.wash,borderLeft:`1px solid ${e.lightDividerColor}`},welcome:{maxWidth:375,minWidth:320,maxHeight:"100%",flex:1,display:"flex",flexDirection:"column",alignItems:"stretch",marginLeft:N?void 0:"10%",marginRight:N?void 0:"10%",padding:N?`${U.top}px 16px ${U.bottom}px 16px`:"64px 16px"},welcomeLogo:{height:48,width:48},welcomeTitle:{marginTop:24,color:e.regularTextColor,fontFamily:v().pe({locale:i().locale}),fontWeight:v().Ue.bold,fontSize:28,flex:0,display:"flex",flexDirection:"row",alignItems:"center"},welcomeSubtitle:{marginTop:6,fontSize:18,color:e.mediumTextColor,fontWeight:400,flex:0},presets:{marginTop:32,marginBottom:32,gap:12,display:"flex",flexDirection:"column"},presetSelected:{background:"dark"===e.mode?e.popoverBackground:e.buttonBackground,boxShadow:e.outlineBlueInputBoxShadow},presetSelectedCheckmark:{width:24,height:24,color:e.blueButtonBackground,opacity:0,transform:"scale(0.8)",transition:"all 0.2s ease"},presetSelectedCheckmarkShown:{opacity:1,transform:"scale(1)"},preset:{display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"flex-start",padding:"16px 14px 16px 16px",background:"dark"===e.mode?e.accentColors.gray[200]:e.buttonBackground,borderRadius:7,boxShadow:e.elevatedButtonBoxShadow,cursor:"pointer",transition:"box-shadow 0.1s ease, background 0.1s ease"},scroller:{overflow:"auto",padding:4},presetHovered:{background:"dark"===e.mode?e.accentColors.gray[200]:e.accentColors.gray[30]},presetTextContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",flex:1},presetIcon:{flexShrink:0,marginTop:2,marginBottom:2,width:20,height:20,marginRight:12},presetTitle:{color:e.regularTextColor,fontWeight:v().Ue.medium,fontSize:14,marginBottom:1},presetSubtitle:{color:e.mediumTextColor,fontWeight:v().Ue.regular,fontSize:14},previewContainer:{flex:1,overflow:"auto",height:"70%",borderRadius:"8px 0 0 8px",border:e.lightDividerColor,boxShadow:e.shadowMD,background:e.popoverBackground},previewImage:{width:"100%",height:"100%"},actionButton:{flex:0,zIndex:g().mJ+1},hamburgerButton:{position:"absolute",zIndex:g().mJ+1,margin:5}})),[N,U]),[H,K]=n.useState(!1),W=(0,a().VK)((()=>I().default.state.currentSpaceViewStore),[]),O=(0,a().VK)((()=>{const e=o.getFormatStore().getKeyStore("app_config_uri").getValue();if(!e)return;return(0,x().Wo)((0,k().appConfigs)(),e)}),[o]),[z,J]=n.useState(void 0);n.useEffect((()=>{J(o.getFormatStore().getKeyStore("app_template_preset").getValue())}),[o,J]);const G=(0,a().VK)((()=>{var e;return(null==O||null===(e=O.presets)||void 0===e?void 0:e.filter((e=>"core"===e.type)))??[]}),[null==O?void 0:O.presets]),[X,$]=n.useState(z);n.useEffect((()=>{$(z)}),[z,$]),n.useEffect((()=>{O&&function(e,t){y().K4(e,"app_preset_selection_shown",t),S().default.logEvent("app_preset_selection_shown",t.app_uri,t)}(L,{app_uri:O.uri})}),[O,L]);const q=n.useMemo((()=>null==O?void 0:O.presets.find((e=>e.uri===z))),[O,z]),Q=n.useMemo((()=>{if(O&&q&&O.uri===l().Vr)return(0,_().L)(q)}),[O,q]),ee=n.useMemo((()=>{if(!O)return;const t={};return O.presets.forEach((o=>{var n;const i=O.uri===l().Vr?(0,_().L)(o):null===(n=o.previews)||void 0===n?void 0:n.find((e=>"previewRootId"in e));i&&(t[o.uri]=B().G.createChildStore(e.collectionViewBlockStore,{id:i.previewRootId,table:p().iU,spaceId:i.spaceId}))})),t}),[O,e.collectionViewBlockStore]),te=(0,a().VK)((()=>{const e=(0,T().ui)(L);return{left:e,right:e,bottom:(0,Y().EA)(L),coverHeight:(0,Y().b)(L)}}),[L]),oe=(0,a().VK)((()=>{var e;const t=null==q||null===(e=q.previews)||void 0===e?void 0:e.find((e=>"url"in e&&!(0,c().xL)(e)));if(t&&"url"in t)return t.url}),[null==q?void 0:q.previews]),ne=(0,a().VK)((()=>L.device.isPhone),[L]),ie=(0,a().VK)((()=>!!L.device.isMobileBrowser||!L.device.isMobileNative&&!(0,M().in)(L)),[L]);return n.useEffect((()=>{"rendered"!==I().default.state.renderPhase&&I().default.setState({...I().default.state,renderPhase:"rendered"})}),[]),O?(0,E.jsxs)(Z().P,{calloutId:"better_template_initialization",children:[ie&&(0,E.jsx)("div",{style:R.hamburgerButton,children:(0,E.jsx)(P().o,{})}),(0,E.jsxs)("div",{style:R.overlay,children:[(0,E.jsxs)("div",{style:R.welcome,children:[(0,E.jsxs)("div",{style:R.scroller,children:[(0,E.jsx)("div",{style:R.welcomeLogo,children:(0,E.jsx)("img",{src:O.logo,style:{height:"100%",width:"100%"}})}),(0,E.jsx)("div",{style:R.welcomeTitle,children:O.welcomeTitle??(0,E.jsx)(f()._H,{id:"apps.AppInitializationOverlay.welcomeTitle.default",defaultMessage:"Welcome to {appName}",values:{appName:O.name}})}),(0,E.jsx)("div",{style:R.welcomeSubtitle,children:O.welcomeSubtitle??""}),(0,E.jsx)("div",{style:R.presets,children:G.map(((e,t)=>{var o;const n=null!==(o=e.icon)&&void 0!==o&&o.startsWith("/")?(0,E.jsx)("img",{src:e.icon,style:{height:"100%",width:"100%"}}):(0,E.jsx)(j().Z,{children:e.icon??""});return(0,E.jsxs)(A().Z,{style:{height:"auto",...R.preset,...z===e.uri?R.presetSelected:{}},disabled:H,hoveredStyle:R.presetHovered,onClick:()=>{J(e.uri),function(e,t){y().K4(e,"app_preset_selection",t),S().default.logEvent("app_preset_selection",t.preset_uri,t)}(L,{preset_uri:e.uri})},onMouseEnter:L.device.isMobile?void 0:()=>$(e.uri),onMouseLeave:L.device.isMobile?void 0:()=>$(z),children:[(0,E.jsx)("div",{style:R.presetIcon,children:n}),(0,E.jsxs)("div",{style:R.presetTextContainer,children:[(0,E.jsx)("div",{style:R.presetTitle,children:e.name}),(0,E.jsx)("div",{style:R.presetSubtitle,children:e.description})]}),(0,E.jsx)("div",{children:(0,d().$)({...R.presetSelectedCheckmark,...z===e.uri?R.presetSelectedCheckmarkShown:void 0})})]},t)}))})]}),(0,E.jsx)("div",{style:{padding:`0 4px ${L.device.isIOS?"32px":0} 4px`,alignSelf:"stretch"},children:(0,E.jsxs)(F().Z,{style:{alignSelf:"stretch",height:36,width:"100%"},disabled:H,onClick:async()=>{if(z){if(K(!0),Q){const{currentSpaceStore:t,currentSpaceViewStore:o}=I().default.state;t&&o&&await h().loadAndDuplicatePageTemplate({environment:L,item:Q,isPrivate:!1,spaceStore:t,spaceViewStore:o,useMinimalTemplates:!1,initializeStore:e.collectionViewBlockStore})}else{const t=e.collectionViewBlockStore.getParentStore();!t||t.table!==u().bx&&t.table!==m().e0&&t.table!==p().iU||b().createAndCommit({userAction:"initializeApp",environment:L,canUndo:!0,perform:o=>{if(W){const n=w().initializeApp({environment:L,spaceViewStore:W,appUri:O.uri,presetUri:z,appParentStore:t,temporaryContainerBlockStore:e.collectionViewBlockStore,transaction:o,from:"app_onboarding"});w().markTasksDatabaseTemplateIfNeeded(n),C().createSprintPage({environment:L,spaceViewStore:W,appParentStore:t,transaction:o,blockStores:n,creationEntryPoint:{type:"preset",presetUri:z}})}}})}!function(e,t){y().K4(e,"app_preset_accepted",t),S().default.logEvent("app_preset_accepted",t.preset_uri,t)}(L,{preset_uri:z})}},children:[(0,E.jsx)(f()._H,{id:"apps.AppInitializationOverlay.startButton",defaultMessage:"Get started"}),H&&(0,E.jsx)(D().Z,{style:{marginLeft:5},onDarkBackground:!0})]})})]}),!ne&&(0,E.jsx)("div",{style:R.previewContainer,children:ee&&X&&ee[X]?(0,E.jsxs)("div",{style:{width:"108%",minWidth:900,height:"auto",minHeight:"100%",position:"relative",paddingTop:Q?0:"10%"},children:[(0,E.jsx)("div",{style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:1,zIndex:999}}),(0,E.jsx)(Y().ZP,{store:ee[X],context:V().S.InAppTemplatePreview,titleStyle:{fontSize:28},paddingBottom:te.bottom,disabled:!0},null===(t=ee[X])||void 0===t?void 0:t.id)]}):(0,E.jsx)("img",{src:oe,style:R.previewImage})})]})]}):null}},986286:(e,t,o)=>{"use strict";o.d(t,{FW:()=>l,Pe:()=>d,Re:()=>p,Rs:()=>u,YW:()=>s,ht:()=>m,lM:()=>c,rM:()=>g,vK:()=>a,yY:()=>f});var n=()=>o(677559);const i={JiraSyncInfoPopup:new(n().Ss)("JiraSyncInfoPopup",(async()=>await Promise.all([o.e(52774),o.e(57023)]).then(o.bind(o,453110)))),ImproveJiraSyncPopup:new(n().Ss)("ImproveJiraSyncPopup",(async()=>await Promise.all([o.e(52774),o.e(81263)]).then(o.bind(o,931329)))),JiraDCAuthModal:new(n().Ss)("JiraDCAuthModal",(async()=>await o.e(40205).then(o.bind(o,253458)))),ExternalImportAndSyncIndicator:new(n().Ss)("ExternalImportAndSyncIndicator",(async()=>await o.e(47433).then(o.bind(o,635604)))),JiraSyncedAllProjectsTooltip:new(n().Ss)("JiraSyncedAllProjectsTooltip",(async()=>await Promise.all([o.e(62743),o.e(75433)]).then(o.bind(o,205959)))),JiraSyncedAllIssuesTooltip:new(n().Ss)("JiraSyncedAllIssuesTooltip",(async()=>await Promise.all([o.e(62743),o.e(75433)]).then(o.bind(o,205959)))),JiraSyncedDatabaseViewsAndFiltersTooltip:new(n().Ss)("JiraSyncedDatabaseViewsAndFiltersTooltip",(async()=>await Promise.all([o.e(62743),o.e(75433)]).then(o.bind(o,205959)))),JiraSyncSourceTooltip:new(n().Ss)("JiraSyncSourceTooltip",(async()=>await Promise.all([o.e(62743),o.e(75433)]).then(o.bind(o,205959)))),JiraSyncedSettingsToSetupProjectsAndIssuesTooltip:new(n().Ss)("JiraSyncedSettingsToSetupProjectsAndIssuesTooltip",(async()=>await Promise.all([o.e(62743),o.e(75433)]).then(o.bind(o,205959))))},r={JiraSyncTeamSpaceModal:new(n().Ss)("JiraSyncTeamSpaceModal",(async()=>Promise.all([o.e(62743),o.e(94568)]).then(o.bind(o,860619))))},a=(0,n().kF)(r.JiraSyncTeamSpaceModal,(e=>e.default)),s=(0,n().kF)(i.JiraSyncedAllProjectsTooltip,(e=>e.JiraSyncedAllProjectsTooltip)),l=(0,n().kF)(i.JiraDCAuthModal,(e=>e.default)),c=(0,n().kF)(i.JiraSyncedAllIssuesTooltip,(e=>e.JiraSyncedAllIssuesTooltip)),d=(0,n().kF)(i.JiraSyncedDatabaseViewsAndFiltersTooltip,(e=>e.JiraSyncedDatabaseViewsAndFiltersTooltip)),p=(0,n().kF)(i.JiraSyncedSettingsToSetupProjectsAndIssuesTooltip,(e=>e.JiraSyncedSettingsToSetupProjectsAndIssuesTooltip)),u=(0,n().kF)(i.JiraSyncSourceTooltip,(e=>e.JiraSyncSourceTooltip)),m=(0,n().kF)(i.JiraSyncInfoPopup,(e=>e.JiraSyncInfoPopup)),g=(0,n().kF)(i.ImproveJiraSyncPopup,(e=>e.ImproveJiraSyncPopup)),f=(0,n().kF)(i.ExternalImportAndSyncIndicator,(e=>e.ExternalImportAndSyncIndicator));(0,o(827282).CZ)("jira",{default:{loader:()=>o.e(7061).then(o.bind(o,207061)),size:20},small:{loader:()=>o.e(7061).then(o.bind(o,207061)),size:16},mini:{loader:()=>o.e(7061).then(o.bind(o,207061)),size:14},large:{loader:()=>o.e(7061).then(o.bind(o,207061)),size:24}})},946735:(e,t,o)=>{"use strict";o.d(t,{Dr:()=>a,Jt:()=>s,Su:()=>r});var n=()=>o(677559);const i={pageVerification:new(n().Ss)("pageVerification",(()=>Promise.all([o.e(62743),o.e(44832),o.e(55253)]).then(o.bind(o,711296)))),pageVerificationBadge:new(n().Ss)("pageVerificationBadge",(()=>Promise.all([o.e(62743),o.e(44832),o.e(11189),o.e(53335),o.e(46616),o.e(61171),o.e(63502),o.e(99590),o.e(81917),o.e(10553),o.e(22371),o.e(77679),o.e(64153)]).then(o.bind(o,776864)))),pageVerificationMenuRenderer:new(n().Ss)("pageVerificationMenuRenderer",(()=>Promise.all([o.e(62743),o.e(44832),o.e(11189),o.e(53335),o.e(46616),o.e(61171),o.e(63502),o.e(99590),o.e(81917),o.e(10553),o.e(22371),o.e(77679),o.e(71e3)]).then(o.bind(o,852586))))},r=(0,n().kF)(i.pageVerification,(e=>e.PageAddVerificationButton)),a=(0,n().kF)(i.pageVerificationBadge,(e=>e.PageVerificationBadge)),s=(0,n().kF)(i.pageVerificationMenuRenderer,(e=>e.PageVerificationMenuRenderer))},125659:(e,t,o)=>{"use strict";o.d(t,{DK:()=>c,L1:()=>s,Y$:()=>l,cu:()=>a});o(821057);var n=o(667294);const i="collectionContextStore",r=(0,o(949744).Q)({displayName:i,legacyContextKey:i,modernContextDefaultValue:void 0}),a=r.context,s=r.Provider;function l(){const e=n.useContext(a);if(void 0===e)throw new Error(`No context provided: ${i}`);return e}function c(){return n.useContext(a)}},521412:(e,t,o)=>{"use strict";o.d(t,{X:()=>n});const n=new(o(677559).Ss)("pageCovers",(async()=>o.e(1642).then(o.bind(o,832783))))},508853:(e,t,o)=>{"use strict";o.d(t,{o:()=>r});var n=()=>o(677559);const i=new(n().Ss)("topbarSidebarButton",(async()=>await o.e(37206).then(o.bind(o,157106)))),r=(0,n().kF)(i,(e=>e.TopbarSidebarButton))},706363:(e,t,o)=>{"use strict";o.d(t,{Ct:()=>i,LO:()=>n,iN:()=>r});const n=40,i=48,r=60},761936:(e,t,o)=>{"use strict";o.d(t,{L:()=>d});var n=()=>o(642240),i=()=>o(338530);const r={ko:()=>o.e(60692).then(o.bind(o,299435)),es:()=>o.e(20883).then(o.bind(o,960142)),de:()=>o.e(83224).then(o.bind(o,299606)),fr:()=>o.e(85038).then(o.bind(o,604240)),pt:()=>o.e(72138).then(o.bind(o,515748)),zh:()=>o.e(17835).then(o.bind(o,240169)),ja:()=>o.e(96377).then(o.bind(o,770488)),da:()=>o.e(57677).then(o.bind(o,317410)),fi:()=>o.e(66970).then(o.bind(o,266265)),nb:()=>o.e(93031).then(o.bind(o,189761)),nl:()=>o.e(62579).then(o.bind(o,360701)),sv:()=>o.e(60382).then(o.bind(o,575660))};let a=!1,s=!1;async function l(e){for(const[o,i]of Object.entries(e.emojiLocaleKeywords)){var t;n().Q4[o]={...n().Q4[o],keywords:[...i,...(null===(t=n().Q4[o])||void 0===t?void 0:t.keywords)||[]]}}await i().Z.waitUntilLoaded(),i().Z.update((t=>{let{emojiByName:o,...n}=t;return{...n,emojiByName:{...o,...e.emojiByName}}}))}async function c(){if(a)return;const[e]=o(146947).locale.split("-");e in r&&(await l(await r[e]()),a=!0)}const d=(0,o(924665).Z)((async()=>{await async function(){s||(await l(await o.e(83552).then(o.bind(o,716373))),s=!0)}(),await c()}))},532697:(e,t,o)=>{"use strict";o.d(t,{H_:()=>a,ay:()=>s});o(267602),o(653476),o(241792);var n=()=>o(963069),i=()=>o(603684),r=()=>o(550471);function a(e){let{persona:t,defaultToLife:o}=e;if(!t)return;if(t in i()._5)return t;const n={customer_support:"support",designer:"design",educator:"student",entrepreneur:"hr",freelancer:"design",hr_recruiting:"hr",it:"eng",marketing_sales:"marketing",media:"marketing",operations:"hr",operations_hr:"hr",personal:"life",product_manager:"product",programmer:"eng",other:o?"life":void 0,unfilled:o?"life":void 0,undefined:o?"life":void 0,creative:"design",founderCeo:"hr",internalCommunication:"hr",productDesign:"design",projectProgramMgmt:"product",finance:void 0,itAdmin:"eng",knowledgeManagement:"hr"};return(null==n?void 0:n[t])??void 0}function s(e,t){const o=a({persona:t,defaultToLife:!0});return(o?null==l?void 0:l[o]:[]).filter((t=>(0,r().G)(t,e)))}const l={...i().J9,design:[n().Yt.designSprint,n().Yt.designPortfolio],product:[n().Yt.productSpec,n().Yt.productWiki,n().Yt.visionAndStrategy],marketing:[n().Yt.blogEditorialCalendar,n().Yt.socialMediaCalendar,n().Yt.presentation],hr:[n().Yt.companyHome,n().Yt.employeeBenefits,n().Yt.peopleDirectory],sales:[n().Yt.salesWiki,n().Yt.presentation,n().Yt.oneOnOneNotes],support:[],life:[]}},821227:(e,t,o)=>{"use strict";o.d(t,{C:()=>r});var n=()=>o(836273),i=()=>o(497065);function r(e){const{environment:t}=e;i().c4({environment:t,url:n()._j.marketplace,redirect:!1})}},309797:(e,t,o)=>{"use strict";o.d(t,{D9:()=>F,GB:()=>Y,L2:()=>D,Nr:()=>B,Qg:()=>Z,WJ:()=>L,h9:()=>V,m4:()=>I,mj:()=>A,n1:()=>E,sD:()=>j});var n=()=>o(219727),i=()=>o(657320),r=()=>o(142735),a=()=>o(156642),s=()=>o(109477),l=()=>o(752778),c=()=>o(844085),d=()=>o(707461),p=()=>o(887430),u=()=>o(954452),m=()=>o(201741),g=()=>o(982855),f=()=>o(949842),v=()=>o(148976),y=()=>o(191586),S=()=>o(942226),h=()=>o(466970),b=()=>o(170210),w=()=>o(876822),C=()=>o(845622),k=()=>o(749826),_=()=>o(543842),x=()=>o(346392),P=()=>o(311562),T=()=>o(482162),M=()=>o(365609);function I(e){(0,f().ZP)({event:e,context:f().Af.EditorMouseDown,callback:()=>{}})}function V(e){(0,f().ZP)({event:e,context:f().Af.EditorClick,callback:()=>{}})}function B(e){return(0,r().VK)((()=>Boolean(M().Z.state.pageMap[e.id])||x().Z.state.pages.has(e.id)),[e.id])}function A(e,t){const o=(0,n().O7)(),a=(0,i().l)(),s=B(e),l=(0,r().VK)((()=>{var o,n;return t===P().S.Frame?Boolean(null===(o=w().default.state.currentLoadingContainerStore)||void 0===o?void 0:o.state.ready):t===P().S.PeekView&&T().default.state.open?Boolean(null===(n=T().default.state.loadingContainerStore)||void 0===n?void 0:n.state.ready):t===P().S.CollectionPageView||t===P().S.CollectionPageViewFullScreen?e.isReady():void 0}),[t,e]),c=Z(e);return(0,r().VK)((()=>{if(!l)return!1;const t=o.currentUser.isLoggedIn(),n=a&&a.publicEditModeStore.state;return Boolean(e&&e.isDefined()&&!e.isNonEditableState()&&e.canEdit()&&!e.hasContent()&&t&&(!(null!=n&&n.hasPublicPermission)||"edit"===(null==n?void 0:n.permission))&&!s&&!c&&(!(0,g().GD)(n)||"completionPopup"!==C().default.state.type))}),[o.currentUser,c,l,a,s,e])}function j(e,t){const o=(0,n().O7)(),a=(0,i().l)(),{isTablet:s}=(0,n().Fy)(),l=(0,h().E)("tablet_refresh_template_pills_gate");return(0,r().VK)((()=>{if(t===P().S.SitePreview)return!1;if(o.device.isMobile&&(!s||!l))return!1;if(!o.currentUser.isLoggedIn())return!1;const n=a&&a.publicEditModeStore.state;if(null!=n&&n.hasPublicPermission&&"edit"!==(null==n?void 0:n.permission))return!1;if(e.getContentLength()>1)return!1;if(!e.canEdit()||e.isNonEditableState())return!1;const i=e.getContentStores()[0];if(i&&!i.isEmptyTextBlock())return!1;if(e.getAssociatedCollectionStore())return!1;const r=m().TI.state,c=m().mn.state;if(r&&e.id===c)return!1;return!((0,y().OZ)(t)?d().Pm.state:d().wC.state)}),[o,a,e,t,s,l])}function Z(e){return(0,r().VK)((()=>{if(e.isCollectionView()){const t=e.getCollectionViewSourceCollectionStore();return!!t&&t.isSyncedCollection()}return e.isType(a().Ti.externalObjectInstancePage)}),[e])}function D(e){return(0,r().VK)((()=>{if(!(0,v().K6)())return!1;const t=e.getParentStore();if((null==t?void 0:t.table)===l().vF){return!!t.getFormatStore().getKeyStore("external_collection_type").getValue()}return!1}),[e])}function F(e){return(0,r().VK)((()=>{if(!(0,v().K6)())return!1;var t;return!!e.isCollectionView()&&((null===(t=e.getCollectionStore())||void 0===t?void 0:t.getFormatStore().getKeyStore("external_collection_type").getValue())??!1)}),[e])}function Y(e){return(0,r().VK)((()=>{if(!k().default.checkGate({gateName:"csvimport_faster_navigate_to_page_enabled"}))return!1;var t;return!!e.isCollectionView()&&(null===(t=e.getCollectionStore())||void 0===t?void 0:t.getFormatStore().getKeyStore("static_import_collection_type").getValue())===s().gH.CsvImport}),[e])}function E(e){const t=(0,n().O7)(),{device:o,WindowSizeStore:i}=t,a=(0,r().VK)((()=>{const e=i.state.height,n=o.isMobile&&_().Z.state.open?e:0;return c()._4(t)+n}),[t,i,o.isMobile]);return(0,r().VK)((()=>"home-phone"===e?b().jq:o.isTablet?380:o.isIOS?Math.max(350,a):o.isMobile?400:"side-peek"===e||"center-peek"===e?S().KA:"home"===e?b().XX:"30vh"),[o,a,e])}function L(e){const t=(0,n().O7)(),o=(0,r().VK)((()=>(0,u().fg)(t,e)),[t,e]);return(0,r().VK)((()=>o&&!e.isFullWidth()?(0,u().gC)(t,(0,S().wq)(e),(0,p().Ks)(e)):0),[t,o,e])}},170210:(e,t,o)=>{"use strict";o.d(t,{$1:()=>C,$K:()=>b,A0:()=>v,A5:()=>f,Ae:()=>I,Cm:()=>p,D9:()=>g,EP:()=>l,Er:()=>k,Gl:()=>M,KI:()=>x,Ng:()=>m,QF:()=>u,Uf:()=>d,XX:()=>r,bS:()=>h,cc:()=>P,d_:()=>c,iO:()=>s,jO:()=>w,jq:()=>a,pW:()=>y});var n=()=>o(513670),i=()=>o(696459);const r=160,a=40,s=24,l=20,c=600,d=270,p=405,u=480,m=500,g=void 0,f=16,v=10,y=8,S=(o(706363).Ct,{backdropFilter:"blur(48px)",WebkitBackdropFilter:"blur(48px)"}),h=4;function b(e){return{icon:e.mediumIconColor,text:e.mediumTextColor}}function w(e){return{width:48,height:48,fill:e.lightIconColor}}function C(e){let{theme:t,isPhone:o}=e;return o?t.personalHomeBackgroundPhone:t.surface.page}function k(e){let{theme:t,isPhone:o,buttonState:n}=e,i=t.whiteButtonBackground;switch(n){case"hovered":i=t.whiteButtonHoveredBackground;break;case"pressed":i=t.whiteButtonPressedBackground}return o&&(i=void 0),{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",background:i,...S,boxShadow:T({isPhone:o,theme:t,borderOnly:!0}),width:28,height:28,borderRadius:4}}const _=1;function x(e){let{isPhone:t,theme:o}=e;return{zIndex:1,position:"relative",display:"flex",flexDirection:"column",borderRadius:12,background:o.home.tile.background,boxShadow:T({isPhone:t,theme:o}),...S}}function P(e){let{mode:t,isPhone:o}=e;switch(t){case"dark":return 0;case"light":return _;default:return(0,i().P)(t),0}}function T(e){let{isPhone:t,theme:o,borderOnly:i}=e;if("dark"===o.mode)return"unset";o.mode;const r=P({mode:o.mode,isPhone:t});return(0,n().oA)([i||t?void 0:"0 12px 32px rgba(0, 0, 0, 0.02)",`0 0 0 ${r}px rgba(0, 0, 0, 0.05)`]).join(", ")}function M(e){return{display:"flex",flexDirection:"column",width:e.isPhone?"100%":700,gap:24}}function I(e){const{isPhone:t,theme:o,borderOnly:n}=e;return{unhoveredBoxShadow:T({isPhone:t,theme:o,borderOnly:n}),hoveredBoxShadow:"light"===o.mode?["0 12px 32px rgba(0, 0, 0, 0.03)","0 0 0 1px rgba(0, 0, 0, 0.085)"].join(", "):o.homeShadow.card.hovered}}},585742:(e,t,o)=>{"use strict";o.d(t,{W:()=>i});class n extends(()=>o(442))().Z{}const i=new n},685472:(e,t,o)=>{"use strict";o.d(t,{EP:()=>r,LU:()=>a,NS:()=>i,SS:()=>n,ZP:()=>l});const n="loadingLocalImage",i="uploading",r="downloading",a="loaded";class s extends(()=>o(263184))().default{getInitialState(){return{loadingMode:a}}}const l=s},623521:(e,t,o)=>{"use strict";o.d(t,{Z:()=>i});class n extends(()=>o(263184))().default{getInitialState(){return{flowId:void 0}}getOrCreateFlowId(){const e=this.state.flowId||o(956057).Il();return this.state.flowId&&this.setState({flowId:e}),e}}const i=new n},774985:(e,t,o)=>{"use strict";o.d(t,{Z:()=>n});const n=new(o(685472).ZP)},154060:(e,t,o)=>{"use strict";o.d(t,{D2:()=>y,Io:()=>f,cY:()=>m,it:()=>v});o(267602),o(653476),o(241792);var n=()=>o(122792),i=()=>o(603684),r=()=>o(550471),a=()=>o(98934),s=()=>o(696459),l=()=>o(205228),c=()=>o(286338),d=()=>o(527278),p=()=>o(532697),u=()=>o(749826);const m=(0,o(788860).vU)({addToTeamspace:{id:"templateGalleryHelpers.addToTeamspace",defaultMessage:"Add to a teamspace"},addToPrivate:{id:"teamPickerButton.addToPrivate",defaultMessage:"Add to Private"}}),g=(0,s().Yd)(i().J9);function f(e){let{userPersona:t,subscriptionTier:o}=e;return[...g].sort(((e,i)=>function(e,t,o,i){const r=(0,n().QA)(i),a=(0,p().H_)({persona:o,defaultToLife:r});if("suggested"===e||"suggested"===t)return"suggested"===e?-1:1;if(a===e||a===t)return a===e?-1:1;if(("life"===e||"life"===t)&&r)return"life"===e?-1:1;if(("student"===e||"student"===t)&&function(e){let{persona:t,isPersonalishPlan:o}=e;const n=o?["other","unfilled","personal","undefined"]:["personal"];return n.includes(t??"undefined")}({persona:o,isPersonalishPlan:r}))return"student"===e?-1:1;return 0}(e,i,t,o)))}function v(e){let{subscriptionTier:t,environment:o}=e;const l=d().Z.getIntl(),p=(0,c().xf)({environment:o}),m=p?function(e){return(0,n().QA)(e)?i().d6:i().e8}(t):i().J9.suggested;return(0,s().Xc)(i().J9,((e,t)=>"suggested"===t?m.map((e=>(0,a().G)(e,l))):e.filter((e=>(0,r().G)(e,u().default))).map((e=>p?(0,r().ZP)(e):e)).filter((e=>!m.includes(e))).map((e=>(0,a().G)(e,l)))))}function y(e){return`${l().default.domainBaseUrl}/@${e}`}},347628:(e,t,o)=>{"use strict";o.d(t,{Ig:()=>a,Vr:()=>i,X$:()=>r,b:()=>n});const n="notion://projects_app",i="notion://wiki_app",r="notion://docs_app",a="notion://meetings_app"},924665:(e,t,o)=>{"use strict";function n(e){let t,o,n;return async function(){for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t?(n=r,o||(o=t.then((()=>(o=void 0,t=e(...n),t))),o)):(t=e(...r),t)}}o.d(t,{Z:()=>n})},383499:(e,t,o)=>{"use strict";o.d(t,{P:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("addPageCover",{viewBox:"0 0 14 14",svg:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 0a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm0 12h10L8.5 5.5l-2 4-2-1.5L2 12z"})})},235665:(e,t,o)=>{"use strict";o.d(t,{$:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("checkmark",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M10.0693 18.166C14.7759 18.166 18.6606 14.2812 18.6606 9.58301C18.6606 4.88477 14.7676 1 10.061 1C5.36279 1 1.48633 4.88477 1.48633 9.58301C1.48633 14.2812 5.37109 18.166 10.0693 18.166ZM9.13965 13.6836C8.82422 13.6836 8.56689 13.5508 8.33447 13.2437L6.30078 10.7783C6.15137 10.5874 6.07666 10.3965 6.07666 10.189C6.07666 9.75732 6.41699 9.40869 6.84863 9.40869C7.10596 9.40869 7.30518 9.5 7.521 9.77393L9.11475 11.791L12.5347 6.3125C12.7173 6.02197 12.9497 5.88086 13.2153 5.88086C13.6387 5.88086 14.0205 6.17139 14.0205 6.61133C14.0205 6.80225 13.9209 7.00977 13.8047 7.19238L9.91162 13.2437C9.729 13.5342 9.45508 13.6836 9.13965 13.6836Z"})})},666669:(e,t,o)=>{"use strict";o.d(t,{z:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("collectionDescriptionSmall",{viewBox:"0 0 14 14",svg:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 4.667C6.69049 4.667 6.39366 4.54405 6.17481 4.32519C5.95595 4.10634 5.833 3.80951 5.833 3.5C5.833 3.19049 5.95595 2.89366 6.17481 2.67481C6.39366 2.45595 6.69049 2.333 7 2.333C7.30951 2.333 7.60634 2.45595 7.82519 2.67481C8.04405 2.89366 8.167 3.19049 8.167 3.5C8.167 3.80951 8.04405 4.10634 7.82519 4.32519C7.60634 4.54405 7.30951 4.667 7 4.667V4.667ZM8 11C8 11.2652 7.89464 11.5196 7.70711 11.7071C7.51957 11.8946 7.26522 12 7 12C6.73478 12 6.48043 11.8946 6.29289 11.7071C6.10536 11.5196 6 11.2652 6 11V7C6 6.73478 6.10536 6.48043 6.29289 6.29289C6.48043 6.10536 6.73478 6 7 6C7.26522 6 7.51957 6.10536 7.70711 6.29289C7.89464 6.48043 8 6.73478 8 7V11ZM7 0C5.14348 0 3.36301 0.737498 2.05025 2.05025C0.737498 3.36301 0 5.14348 0 7C0 8.85652 0.737498 10.637 2.05025 11.9497C3.36301 13.2625 5.14348 14 7 14C8.85652 14 10.637 13.2625 11.9497 11.9497C13.2625 10.637 14 8.85652 14 7C14 5.14348 13.2625 3.36301 11.9497 2.05025C10.637 0.737498 8.85652 0 7 0V0Z"})})},330814:(e,t,o)=>{"use strict";o.d(t,{z:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("flag",{viewBox:"0 0 13 14",svg:(0,n.jsx)("path",{d:"M0.825195 13.8457C1.16699 13.8457 1.4541 13.5654 1.4541 13.2168V9.47754C1.63867 9.40918 2.21973 9.19727 3.10156 9.19727C5.59668 9.19727 7.25781 10.4414 9.66406 10.4414C10.7168 10.4414 11.1885 10.3115 11.7217 10.0654C12.207 9.84668 12.4941 9.4502 12.4941 8.82129V1.99219C12.4941 1.55469 12.1523 1.27441 11.6943 1.27441C11.3047 1.27441 10.6895 1.54102 9.58887 1.54102C7.20996 1.54102 5.52148 0.296875 3.0332 0.296875C1.99414 0.296875 1.5293 0.419922 0.975586 0.672852C0.49707 0.891602 0.196289 1.24707 0.196289 1.86914V13.2168C0.196289 13.5586 0.483398 13.8457 0.825195 13.8457ZM9.63672 9.16309C7.41504 9.16309 5.71289 7.92578 3.12207 7.92578C2.45215 7.92578 1.84375 8.00098 1.48145 8.14453V2.0332C1.59766 1.83496 2.11035 1.56836 3.05371 1.56836C5.38477 1.56836 7.09375 2.80566 9.56836 2.80566C10.2383 2.80566 10.792 2.73047 11.2158 2.61426V8.69824C11.0996 8.89648 10.5801 9.16309 9.63672 9.16309Z"})})},1723:(e,t,o)=>{"use strict";o.d(t,{l:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("import",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M13.291 14.5723C13.291 14.1484 12.9902 13.834 12.5732 13.834H8.06836C8.24609 13.8203 8.42383 13.7314 8.56055 13.5947L13.0586 9.08301C13.2158 8.91895 13.291 8.74121 13.291 8.54297C13.291 8.12598 12.9902 7.81836 12.5801 7.81836C12.3682 7.81836 12.1836 7.90039 12.0469 8.03711L10.4951 9.56836L8.69043 11.585L8.75195 10.1084V1.61133C8.75195 1.16016 8.44434 0.852539 8 0.852539C7.5625 0.852539 7.25488 1.16016 7.25488 1.61133V10.1084L7.30957 11.5781L5.50488 9.56836L3.95312 8.03711C3.82324 7.90039 3.63184 7.81836 3.42676 7.81836C3.0166 7.81836 2.70898 8.12598 2.70898 8.54297C2.70898 8.74121 2.78418 8.91895 2.94141 9.08301L7.44629 13.5947C7.58301 13.7314 7.75391 13.8203 7.93848 13.834H3.44043C3.0166 13.834 2.70898 14.1484 2.70898 14.5723C2.70898 14.9893 3.0166 15.3037 3.44043 15.3037H12.5732C12.9902 15.3037 13.291 14.9893 13.291 14.5723Z"})})},519454:(e,t,o)=>{"use strict";o.d(t,{R:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("pencil",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M3.926 13.307H14.11c.183 0 .34-.066.472-.199a.644.644 0 00.198-.471.652.652 0 00-.198-.479.644.644 0 00-.472-.198H5.272l-1.346 1.347zm-.704-.636l7.683-7.684-1.312-1.319-7.69 7.684-.67 1.606c-.037.1-.017.191.06.273.083.082.174.105.274.069l1.655-.63zm8.34-8.326l.738-.732c.182-.187.278-.376.287-.567.009-.192-.068-.374-.232-.547l-.267-.267c-.169-.168-.351-.246-.547-.232-.196.014-.385.11-.567.287l-.739.732 1.327 1.326z"})})},899548:(e,t,o)=>{"use strict";o.d(t,{R:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("search",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M.281 6.438c0-.875.164-1.696.492-2.461a6.484 6.484 0 011.375-2.032A6.237 6.237 0 016.64.078 6.2 6.2 0 019.11.57c.77.328 1.447.787 2.03 1.375a6.374 6.374 0 011.368 2.032c.333.765.5 1.586.5 2.46 0 .688-.107 1.342-.32 1.961a6.28 6.28 0 01-.868 1.696l3.563 3.578c.11.104.19.226.242.367.057.14.086.29.086.445 0 .22-.05.417-.149.594a1.122 1.122 0 01-1 .57c-.156 0-.307-.028-.453-.086a1.058 1.058 0 01-.382-.25l-3.586-3.585c-.5.333-1.047.596-1.641.789a6.089 6.089 0 01-1.86.28 6.237 6.237 0 01-2.468-.491 6.4 6.4 0 01-2.024-1.367A6.509 6.509 0 01.773 8.913a6.256 6.256 0 01-.492-2.476zm1.664 0c0 .65.12 1.26.36 1.828a4.775 4.775 0 001.015 1.5c.433.427.933.763 1.5 1.007a4.548 4.548 0 001.82.368c.652 0 1.261-.123 1.829-.368a4.747 4.747 0 002.508-2.507 4.567 4.567 0 00.367-1.829c0-.645-.123-1.252-.367-1.82a4.776 4.776 0 00-1.016-1.5A4.578 4.578 0 008.469 2.11a4.567 4.567 0 00-1.828-.367c-.646 0-1.253.123-1.82.367a4.667 4.667 0 00-1.5 1.008c-.433.432-.772.932-1.016 1.5a4.633 4.633 0 00-.36 1.82z"})})},749166:(e,t,o)=>{"use strict";o.d(t,{w:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("templates",{viewBox:"0 0 20 20",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M6.39733 5.67853C5.89764 5.50234 5.36002 5.40649 4.8 5.40649C2.14904 5.40649 0 7.55432 0 10.2038C0 12.8533 2.14904 15.0011 4.8 15.0011C6.52165 15.0011 8.0316 14.0952 8.87867 12.7343L5.26487 12.0975L6.39733 5.67853Z"}),(0,n.jsx)("path",{d:"M17.3126 3.66609L7.85843 2L6.19141 11.4489L10.6545 12.2354L14.3998 5.81854L16.3449 9.15116L17.3126 3.66609Z"}),(0,n.jsx)("path",{d:"M8.80078 17L14.4008 7.4054L20.0008 17H8.80078Z"})]})})},66782:(e,t,o)=>{"use strict";o.d(t,{i:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("templatesColor",{viewBox:"0 0 20 20",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M6.39733 5.67853C5.89764 5.50234 5.36002 5.40649 4.8 5.40649C2.14904 5.40649 0 7.55432 0 10.2038C0 12.8533 2.14904 15.0011 4.8 15.0011C6.52165 15.0011 8.0316 14.0952 8.87867 12.7343L5.26487 12.0975L6.39733 5.67853Z",fill:"#3C9ED7"}),(0,n.jsx)("path",{d:"M17.3126 3.66609L7.85843 2L6.19141 11.4489L10.6545 12.2354L14.3998 5.81854L16.3449 9.15116L17.3126 3.66609Z",fill:"#E7595E"}),(0,n.jsx)("path",{d:"M8.80078 17L14.4008 7.4054L20.0008 17H8.80078Z",fill:"#F5BC4E"})]})})},856466:(e,t,o)=>{"use strict";o.d(t,{$X:()=>a,F_:()=>s,iZ:()=>r});o(267602),o(470928);var n=()=>o(926724),i=()=>o(295617);const r={autoCompleteSprints:!1,actionConfig:{complete_sprint_action:"complete_sprint_and_move_incomplete_tasks_to_next_sprint"},recurrenceConfig:{interval:2,weekdays:["MO"]}};function a(e){const{eventTracker:t,properties:o}=e;t.DO_NOT_USE_commonTrackEvent({eventName:"complete_sprint_action",properties:o})}function s(e,t){var o;return null===(o=t.groups)||void 0===o||null===(o=o.find((t=>t.id===n().nl||(null==t?void 0:t.name)===i().RW||(null==t?void 0:t.name)===e.formatMessage(i().ct.statusGroupNameComplete))))||void 0===o?void 0:o.name}},126301:(e,t,o)=>{"use strict";o.d(t,{DW:()=>s,IX:()=>a,Su:()=>i,rP:()=>r});var n=()=>o(730120);function i(e){if("week"===e.frequency&&e.weekdays&&1===e.weekdays.length)return{weekday:e.weekdays[0],duration:e.interval}}function r(e){const{currentSprintEndDate:t,sprintSchedule:o}=e;return l({startDate:d({dateToAdjust:n().ou.fromISO(t),weekday:o.weekday,wrapForEqualDays:!0}),duration:o.duration})}function a(e){const{userTimeZone:t,sprintSchedule:o}=e;return l({startDate:n().ou.local({zone:t}),duration:o.duration})}function s(e){const{currentSprintStartDate:t,sprintSchedule:o}=e,i=d({dateToAdjust:n().ou.fromISO(t),weekday:o.weekday,wrapForEqualDays:!1}),{end_date:r}=l({startDate:i,duration:o.duration});let a=n().ou.fromISO(r);const s=n().ou.now().startOf("day");for(;a.diff(s,"days").days<0;)a=a.plus({weeks:1});return{type:"daterange",start_date:a.plus({days:1}).minus({weeks:o.duration}).toISODate(),end_date:a.toISODate()}}function l(e){const{startDate:t,duration:o}=e,n=t.plus({weeks:o}).minus({days:1});return{type:"daterange",start_date:t.toISODate(),end_date:n.toISODate()}}const c={SU:0,MO:1,TU:2,WE:3,TH:4,FR:5,SA:6};function d(e){const{dateToAdjust:t,weekday:o,wrapForEqualDays:n}=e,i=p({currentWeekday:t.weekday%7,nextWeekday:c[o],wrapForEqualDays:n});return t.plus({days:i})}function p(e){const{currentWeekday:t,nextWeekday:o,wrapForEqualDays:n}=e,i="number"==typeof t?t:c[t],r="number"==typeof o?o:c[o];if(i===r)return n?7:0;let a=i,s=0;for(;a!==r;)a===c.SA?a=0:a+=1,s+=1;return s}},603684:(e,t,o)=>{"use strict";o.d(t,{J9:()=>s,_5:()=>a,d6:()=>l,e8:()=>c});var n=()=>o(926724),i=()=>o(963069),r=()=>o(163299);const a={suggested:r().sY.suggestedCategory,design:r().sY.designer,eng:r().sY.engineering,product:r().sY.productManagement,marketing:r().sY.marketing,sales:r().sY.sales,support:r().sY.support,hr:r().sY.hr,life:r().sY.life,student:r().sY.student},s=(n().Ll,n().Yb,n().tt,n().KW,n().r,n().tt,n().Yb,n().tt,n().Yb,n().Yb,n().Yb,n().Yb,{suggested:[i().Yt.defaultWiki],product:[i().Yt.oneOnOneNotes,i().Yt.productWiki,i().Yt.productSpec,i().Yt.visionAndStrategy,i().Yt.presentation,i().Yt.investorUpdate,i().Yt.userResearch,i().Yt.experimentResults,i().Yt.brainstorm,i().Yt.productLaunchBrief],design:[i().Yt.designSprint,i().Yt.designSystem,i().Yt.designPortfolio,i().Yt.userResearch,i().Yt.brainstorm],eng:[i().Yt.engineeringWiki,i().Yt.engineeringTechSpec,i().Yt.experimentResults,i().Yt.brainstorm],marketing:[i().Yt.presentation,i().Yt.brandAssets,i().Yt.brainstorm,i().Yt.contentCalendar,i().Yt.blogEditorialCalendar,i().Yt.socialMediaCalendar,i().Yt.campaignBrief,i().Yt.moodBoard,i().Yt.mediaList],hr:[i().Yt.companyHome,i().Yt.newHireOnboarding,i().Yt.employeeBenefits,i().Yt.interviewGuide,i().Yt.recruitingTracker,i().Yt.jobBoard,i().Yt.applicantTracker,i().Yt.peopleDirectory],sales:[i().Yt.salesWiki,i().Yt.salesCRM,i().Yt.salesAssets,i().Yt.competitiveAnalysis],support:[i().Yt.productFAQs,i().Yt.helpCenter],life:[i().Yt.readingListV2,i().Yt.habitTrackerV2,i().Yt.simpleBudgetV2,i().Yt.weeklyTodoV2,i().Yt.travelPlannerV2,i().Yt.journalV2,i().Yt.resumeV2,i().Yt.personalHomeV3,i().Yt.quickNoteV2,i().Yt.jobApplicationsV2,i().Yt.lifeWikiV2,i().Yt.moodBoardV2,i().Yt.blogPostV2,i().Yt.personalCRMV2],student:[i().Yt.studentPlanner,i().Yt.classNotesV2,i().Yt.courseScheduleV2,i().Yt.gradeCalculatorV2,i().Yt.cornellNotesSystemV2,i().Yt.syllabusV2,i().Yt.lessonPlansV2,i().Yt.classDirectoryV2,i().Yt.classroomHomeV2,i().Yt.clubHomepageV2]}),l=[i().Yt.todoListMobile,i().Yt.quickNoteMobile,i().Yt.habitTrackerMobile,i().Yt.journalMobile,i().Yt.weeklyPlanMobile,i().Yt.classNotesMobile],c=[i().Yt.todoListMobile,i().Yt.quickNoteMobile,i().Yt.oneOnOneNotesMobile,i().Yt.weeklyPlanMobile]},400939:e=>{var t=/[a-zA-Z0-9_\u0392-\u03c9\u00c0-\u00ff\u0600-\u06ff]+|[\u4e00-\u9fff\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g;e.exports=function(e){var o=e.match(t),n=0;if(!o)return 0;for(var i=0;i<o.length;i++)o[i].charCodeAt(0)>=19968?n+=o[i].length:n+=1;return n}}}]);