"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[63502],{446955:(e,t,o)=>{o.d(t,{Z:()=>r});o(667294);var n=o(785893);const r=function(e){const{icon:t,iconStyle:r,title:i,caption:l,right:a,rightStyle:s,isRed:c,isGray:d,isOrange:u,isPadded:p,onClick:h,onMouseDown:g,onMouseEnter:C,onMouseLeave:x,disabled:m,showChevron:f,chevronStyle:v,rotateChevron:y,showDragHandle:S,focused:j,textWrapperStyle:b,shouldWrapCaption:F,desktopIconStyle:k,buttonStyle:w}=e,Z=(0,o(219727).O7)(),{isMobile:M}=Z.device,T=(0,o(846550).yK)((e=>({style:{color:d?e.mediumTextColor:u?"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400]:e.regularTextColor,fill:d?e.mediumIconColor:u?"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400]:e.regularIconColor,opacity:m?.4:void 0,...w},leftIconStyle:{width:24,height:p?24:M?18:16,marginRight:-2,...t===o(641772).o&&{height:3},...r},rightStyle:{display:"flex",alignItems:"center",color:m?e.regularTextColor:e.lightTextColor,fill:m?e.regularIconColor:e.lightIconColor,flexShrink:0,...s},rightIconStyle:{width:12,fill:e.lightIconColor,marginLeft:6,transition:"transform 200ms ease-in-out",...v},rightIconRotatedStyle:{transform:"rotate(90deg)"}})),[d,u,m,r,p,M,t,v,s,w]),[R]=(0,o(288141).o$)();return(0,n.jsx)(o(827973).Z,{ref:R,icon:null==t?void 0:t(T.leftIconStyle),focused:j||!1,disabled:m,title:i,caption:l,shouldWrapCaption:F,desktopTitleStyle:{flexGrow:1,flexShrink:1},showDragHandle:S,buttonStyle:T.style,rightStyle:T.rightStyle,isRedOnHover:c,ignoreLocalHoverState:!!m||void 0,right:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{style:{...o(707513).Yu,display:"flex"},children:a}),!m&&f&&(0,o(429600).o)({...T.rightIconStyle,...y&&T.rightIconRotatedStyle})]}),onClick:h,onMouseDown:g,onMouseEnter:C,onMouseLeave:x,textWrapperStyle:b,desktopIconStyle:k})}},84439:(e,t,o)=>{o.d(t,{R1:()=>T,ZP:()=>V,ep:()=>P});o(267602),o(653476),o(470928);var n=o(667294),r=()=>o(219727),i=()=>o(142735),l=()=>o(455947),a=()=>o(641772),s=()=>o(788860),c=()=>o(513670),d=()=>o(707513),u=()=>o(250303),p=()=>o(151861),h=()=>o(139224),g=()=>o(269299),C=()=>o(265640),x=()=>o(827973),m=()=>o(448419),f=()=>o(198829),v=()=>o(255577),y=()=>o(967092),S=()=>o(388284),j=()=>o(654133),b=()=>o(576868),F=()=>o(352230),k=()=>o(164079),w=()=>o(998901),Z=()=>o(446955),M=o(785893);let T=function(e){return e[e.FilterBar=0]="FilterBar",e[e.SettingsFilters=1]="SettingsFilters",e[e.SettingsSort=2]="SettingsSort",e}({});const R=o(263184).default.createClass(!1,{name:"ShowMoreStore"});function P(){return(0,M.jsx)(s()._H,{id:"database.filterValue.mergeIntoAdvancedFilter.tooltip",defaultMessage:"Use an advanced filter to group filter rules and use AND/OR conditions."})}const V=function(e){let{collectionContextStore:t,context:l,showHoverActionsStore:c,moreActionsButtonPopupStore:p}=e;const h=(0,o(846550).Fg)(),g=(0,r().O7)(),x=(0,s().YB)(),f=(0,r().Fy)(),v=(0,i().qz)(p,o(529048).Z),S=(0,i().qz)(void 0,R),b=(0,i().VK)((()=>{const e=t.localStateDiffStore.state;return l===T.SettingsFilters?(e.filters.moved.length>0?1:0)+e.filters.added.length+e.filters.removed.length+e.filters.updated.length:0}),[t,l]),F=(0,n.useCallback)((()=>function(e,t,o){u().wd({environment:e,collectionContextStore:t,action:"click_save_control_more_options_button"}),o.setState(!0)}(g,t,S)),[g,t,S]),k=(0,i().Kw)(t.permissionScopesStore),V=(0,i().VK)((()=>t.isFullScreenStore.state||!c||c.state),[t,c]),z=(0,i().Kw)(S),G=(0,i().VK)((()=>I(t,l)),[t,l]);if(l===T.FilterBar)return f.isPhone?k.canConfigureBlock?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(C().D,{isOrange:!0,hovered:!0,style:{flexGrow:1,justifyContent:"center",height:32,marginRight:8,fontWeight:d().Ue.semibold},onClick:()=>H(g,t,l),children:(0,M.jsx)(D,{})}),(0,M.jsx)(m().ZP,{popupType:f.isMobile?y().kQ.SlideUp:y().kQ.Popup,render:e=>(0,M.jsx)(U,{parent:e,collectionContextStore:t,context:l}),originGap:4,onClick:()=>W(g,t),buttonPopupStore:v,renderOrigin:e=>(0,M.jsx)(o(1910).Z,{style:{width:32,height:32},iconStyle:{width:16},hovered:!0,icon:a().o,...e})})]}):(0,M.jsx)(C().D,{style:{flexGrow:1,justifyContent:"center",height:32,marginRight:8,fontWeight:d().Ue.semibold},hovered:!0,isGray:!0,onClick:()=>K(g,t,l),children:(0,M.jsx)(B,{})}):(0,M.jsxs)(o(628370).Z,{visible:V,animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},style:{display:"flex",alignItems:"center"},children:[(0,M.jsx)(C().D,{isGray:!0,onClick:()=>K(g,t,l),style:{lineHeight:1.1,fontSize:f.isMobile?16:14},children:(0,M.jsx)(B,{})}),k.canConfigureBlock&&(0,M.jsx)(m().ZP,{popupType:g.device.isMobile?y().kQ.SlideUp:y().kQ.Popup,render:e=>(0,M.jsx)(U,{parent:e,collectionContextStore:t,context:l}),originGap:4,onClick:()=>W(g,t),buttonPopupStore:v,renderOrigin:e=>(0,M.jsx)(o(542401).Z,{title:(0,M.jsx)(D,{}),color:"orange",onClick:()=>H(g,t,l),onDropdownClick:e.onClick,style:{marginLeft:6,marginRight:f.isMobile?8:void 0,fontSize:f.isMobile?16:14,...f.isMobile?{height:30}:null}})})]});if(l===T.SettingsFilters||l===T.SettingsSort){const e=l===T.SettingsFilters;return(0,M.jsxs)(M.Fragment,{children:[z&&k.canConfigureBlock&&(f.isMobile?(0,M.jsx)(o(18748).ZP,{style:{fontSize:12,color:h.mediumTextColor},title:(0,M.jsx)(q,{context:l,changeCount:b})}):(0,M.jsx)("div",{style:{fontSize:12,color:h.mediumTextColor,paddingLeft:14,paddingRight:14,paddingTop:8,paddingBottom:8,maxWidth:220},children:(0,M.jsx)(q,{context:l,changeCount:b})})),k.canConfigureBlock&&(0,M.jsx)(Z().Z,{icon:o(627316).N,isOrange:!0,title:(0,M.jsx)(D,{}),onClick:()=>H(g,t,l)}),(0,M.jsx)(Z().Z,{icon:o(366825).s,isGray:!0,title:e?(0,M.jsx)(s()._H,{defaultMessage:"Reset filters",id:"database.viewSettings.filterAndSortSaveControl.resetFilters"}):(0,M.jsx)(s()._H,{defaultMessage:"Reset sorts",id:"database.viewSettings.filterAndSortSaveControl.resetSorts"}),onClick:()=>K(g,t,l)}),k.canConfigureBlock&&!z&&(0,M.jsx)(Z().Z,{icon:a().o,isGray:!0,title:(0,M.jsx)(s()._H,{defaultMessage:"More options",id:"database.viewSettings.filterAndSortSaveControl.more"}),onClick:F}),k.canConfigureBlock&&z&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(Z().Z,{icon:o(114066).H,isPadded:!0,isGray:!0,title:(0,M.jsx)(A,{}),onClick:()=>{L(g,t,x)}}),G&&(0,M.jsx)(j().Z,{placement:w().Placement.Left,style:{maxWidth:240,whiteSpace:void 0},renderTooltip:()=>(0,M.jsx)("div",{children:(0,M.jsx)(P,{})}),render:e=>(0,M.jsx)(Z().Z,{icon:o(185056).Q,isGray:!0,title:(0,M.jsx)(_,{}),onClick:()=>{O(g,t,l)},...e})})]})]})}(0,o(696459).t1)(l)};function A(){return(0,M.jsx)(s()._H,{defaultMessage:"Save as new view",id:"database.filterBar.changesControl.saveAsNewView.title"})}function _(){return(0,M.jsx)(s()._H,{defaultMessage:"Merge into advanced filter",id:"database.filterBar.changesControl.mergeIntoAdvancedFilter.title"})}function B(){return(0,M.jsx)(s()._H,{defaultMessage:"Reset",id:"database.filterBar.changesControl.reset.title"})}function D(){return(0,M.jsx)(s()._H,{defaultMessage:"Save for everyone",id:"database.filterBar.changesControl.saveForEveryone.title"})}function I(e,t){const o=e.currentPropertyFiltersStore.state;return(t===T.FilterBar||t===T.SettingsFilters)&&Boolean(o.find((e=>(0,l().aN)(e.filter))))}function H(e,t,o){const n=t.collectionViewStore();n&&(u().wd({environment:e,collectionContextStore:t,action:"click_save_control_save_in_current_view"}),g().createAndCommit({userAction:"CollectionSettingsSaveControl.handleSaveInCurrentViewClick",environment:e,canUndo:!0,perform:r=>{p().Ys({environment:e,type:o===T.FilterBar?p().mO.All:o===T.SettingsFilters?p().mO.Filters:p().mO.Sorts,collectionContextStore:t,targetCollectionViewStore:n,transaction:r})}}),p().RD({environment:e,seen:!0}))}function L(e,t,o,n){u().wd({environment:e,collectionContextStore:t,action:"click_save_control_save_as_new_view"}),g().createAndCommit({userAction:"CollectionSettingsSaveControl.handleSaveAsNewViewClick",environment:e,canUndo:!0,perform:n=>{p().k7({environment:e,collectionContextStore:t,transaction:n,intl:o})}}),null==n||n.close()}function O(e,t,o,n){const r=(0,b().Pi)(t),i=t.currentPropertyFiltersStore.state.filter((e=>(0,b().mu)(e.id)));p().iU({environment:e,collectionContextStore:t,temporaryState:{...t.temporaryStateStore.state,propertyFilters:{value:i},combinatorFilter:{value:r}}});const l=o===T.FilterBar?t.filterBarCombinatorFilterSettingsStore:t.filterOptionsCombinatorFilterSettingsStore;h().wl({collectionSettingsStore:l,item:{type:"filter"}}),u().wd({environment:e,collectionContextStore:t,action:"merge_filter_into_combinator"}),null==n||n.close()}function K(e,t,o,n){u().wd({environment:e,collectionContextStore:t,action:"click_save_control_reset"});const r=t.temporaryStateStore.state,i=o===T.SettingsFilters?{...r,propertyFilters:void 0,combinatorFilter:void 0}:o===T.SettingsSort?{...r,sorts:void 0}:void 0;p()._x({environment:e,collectionContextStore:t,temporaryState:i}),p().RD({environment:e,seen:!0}),null==n||n.close()}function W(e,t){u().wd({environment:e,collectionContextStore:t,action:"click_save_control_more_options_popup"}),p().RD({environment:e,seen:!0})}function U(e){let{parent:t,collectionContextStore:o,context:n}=e;const l=(0,s().YB)(),a=(0,r().O7)(),{device:d}=a,u=(0,r().MO)();let p;p=d.isMobile?{menuType:F().o.ActionSheet}:{menuType:F().o.Popup,width:250};const h=(0,i().VK)((()=>I(o,n)),[o,n]),g=c().oA([u&&{key:"reset",render:e=>(0,M.jsx)(x().Z,{...e,disabled:!1,title:(0,M.jsx)(B,{})}),action:()=>{K(a,o,n,t)}},{key:"newView",render:e=>(0,M.jsx)(x().Z,{...e,disabled:!1,title:(0,M.jsx)(A,{})}),action:()=>{L(a,o,l,t)}},h&&{key:"merge",render:e=>(0,M.jsx)(j().Z,{placement:w().Placement.Left,style:{maxWidth:240,whiteSpace:void 0},renderTooltip:()=>(0,M.jsx)("div",{children:(0,M.jsx)(P,{})}),render:t=>(0,M.jsx)(x().Z,{...(0,k().Z)(e,t),disabled:!1,title:(0,M.jsx)(_,{})})}),action:()=>{O(a,o,n,t)}}]);return(0,M.jsx)(f().Z,{...p,children:(0,M.jsx)(v().ZP,{type:v().iW.Vertical,sections:[{key:0,render:e=>(0,M.jsx)(S().Z,{enableActionSheetTitle:!0,...e}),items:g}],initialFocus:0})})}function q(e){let{context:t,changeCount:o}=e;return t===T.SettingsFilters?(0,M.jsx)(s()._H,{defaultMessage:"{count, plural, one {{count} filter changed from what other people see} other {{count} filters changed from what other people see}}",id:"database.viewSettings.filterAndSortSaveControl.filter.caption",values:{count:o}}):(0,M.jsx)(s()._H,{defaultMessage:"Sort has been changed from what other people see",id:"database.viewSettings.filterAndSortSaveControl.sort.caption"})}},780550:(e,t,o)=>{o.d(t,{Qv:()=>Ve,ZP:()=>De,I4:()=>Ie});o(670560),o(267602),o(653476),o(470928),o(241792);var n=o(667294),r=()=>o(219727),i=()=>o(142735),l=()=>o(846550),a=()=>o(816512),s=()=>o(455947),c=()=>o(226413),d=()=>o(532850),u=()=>o(38883),p=()=>o(803021),h=()=>o(874459),g=()=>o(619186),C=()=>o(998411),x=()=>o(374289),m=()=>o(641772),f=()=>o(185056),v=()=>o(95886),y=()=>o(605974),S=()=>o(396136),j=()=>o(696056),b=()=>o(139978),F=()=>o(989478),k=()=>o(496205),w=()=>o(788860),Z=()=>o(513670),M=()=>o(696459),T=()=>o(707513),R=()=>o(84439),P=()=>o(718959),V=()=>o(576868),A=()=>o(32072),_=()=>o(561933),B=()=>o(521045),D=()=>o(352230),I=()=>o(164079),H=()=>o(946444),L=()=>o(129338),O=()=>o(828946),K=()=>o(998901),W=()=>o(658096),U=()=>o(876822),q=()=>o(529048),z=()=>o(692304),G=()=>o(826955),N=()=>o(154439),Y=(o(228244),()=>o(644602)),E=()=>o(306164),J=()=>o(955620),Q=()=>o(250303),X=()=>o(125659),$=()=>o(239482),ee=()=>o(619779),te=()=>o(893276),oe=()=>o(827973),ne=()=>o(715139),re=()=>o(312578),ie=()=>o(198829),le=()=>o(255577),ae=()=>o(838367),se=()=>o(470386),ce=()=>o(388284),de=()=>o(78014),ue=()=>o(122671),pe=o(785893);function he(e){const{filter:t,parentStore:o,updateValue:a,onClose:c,desktopTopActions:d,mobileMenuTitle:p,mobileMoreActions:h}=e,C=(0,r().O7)(),x=(0,X().Y$)(),[m,f]=(0,n.useState)([]),[v,y]=(0,n.useState)(!1),S=(0,n.useMemo)((()=>(0,s().vR)(t)?(0,s().u0)(t):[]),[t]),j=(0,r().Fy)(),b=(0,i().VK)((()=>Z().oA(S.map((e=>{if(e.value)return G().NW.createChildStore(o,{table:"collection",id:e.value})})))),[S,o]),F=(0,i().VK)((()=>b.map((e=>(0,pe.jsx)(de().Z,{format:j.isMobile?u().lo.Large:u().lo.Small,value:(0,pe.jsx)(te().Z,{collectionStore:e}),onClickRemove:()=>{const t=S.find((t=>t.value===e.id));if(t){const e=Z().zu(S,t);a(e)}},showRemoveButton:!0,isSingle:!1,shouldShrink:!0,backgroundColor:"transparent",showTooltip:"overflow"},e.id)))),[b,S,j.isMobile,a]),[k,M]=(0,n.useState)(""),T=(0,w().YB)(),R=(0,i().VK)((()=>{var e;return null===(e=U().default.state.currentUserStore)||void 0===e?void 0:e.userId}),[]),P=(0,i().VK)((()=>x.collectionStoresStore.state??[]),[x]),V=(0,i().VK)((()=>v?P:x.collectionStoreResultsInViewOrder()),[v,x,P]),A=(0,i().VK)((()=>(0,g().ZP)(k,P,(e=>J().QaF(e.getName()??[])))),[k,P]),_=(0,i().VK)((()=>P.filter((e=>!m.some((t=>t.id===e.id))))),[P,m]),B=(0,i().qz)(void 0,z().Z);(0,n.useEffect)((()=>{f((()=>""===k?Z().mN([...V,...b,...m],"id"):A))}),[k,v,V,A,b]);const I=(0,l().yK)((e=>({checkboxIcon:{fill:e.regularIconColor}})),[]),H=(0,n.useCallback)(((e,t)=>{const o=Boolean(t.find((t=>"exact"===t.type&&t.value===e.id))),n=()=>{const o=Z().ln(t,[{type:"exact",value:e.id}],(e=>e.value));a(o)};return{key:e.id,render:t=>(0,pe.jsx)(oe().Z,{...t,icon:(0,pe.jsx)(ne().Z,{checked:o,size:14,onClick:n,style:I.checkboxIcon}),title:(0,pe.jsx)(te().Z,{collectionStore:e}),isTokenTitle:!0}),action:n}}),[I.checkboxIcon,a]),L=(0,n.useCallback)((()=>({key:"hidden-items-button",render:e=>(0,pe.jsx)(oe().Z,{...e,icon:(0,Y().t)({width:13,height:13}),title:(0,pe.jsx)(w()._H,{id:"collectionFilterValueMenu.locationFilterValueMenu.hiddenLocationsDescription",defaultMessage:"{numHiddenOptions, plural, one {{numHiddenOptions} other source} other {{numHiddenOptions} other sources}}",values:{numHiddenOptions:_.length}})}),action:()=>{y(!0),Q().wd({environment:C,collectionContextStore:x,action:"expand_property_filter",original_view_type:void 0,property_type:"location"})}})),[_.length,x,C]),O=(0,i().VK)((()=>{const e=[],t={},n=[];for(const o of m){const e=$().VP(o);e?R&&e.isMemberOrGuest(R,ee().Z.state.spacePermissionGroupIds)&&(t[e.id]=[...t[e.id]??[],o]):n.push(o)}for(const[r,i]of Object.entries(t)){const t=G().zX.createChildStore(o,{table:E().e0,id:r});e.push({key:r,items:i.map((e=>H(e,S))),render:e=>(0,pe.jsx)(ce().Z,{topBorder:!0,...e,title:(0,pe.jsx)(pe.Fragment,{children:t.getName()??""})})})}return n.length>0&&e.push({key:"private",items:n.map((e=>H(e,S))),render:e=>(0,pe.jsx)(ce().Z,{topBorder:!0,...e,title:(0,pe.jsx)(w()._H,{id:"collectionFilterValueMenu.privateLocationSection",defaultMessage:"Private"})})}),_.length>0&&!v&&e.push({key:"hidden",items:[L()],render:e=>(0,pe.jsx)(ce().Z,{topBorder:!0,...e})}),e}),[_.length,v,m,R,o,H,S,L]),K=(0,pe.jsx)(ue().ZP,{focus:!j.isMobile||void 0,focusAfterAnimation:!0,format:ue().UR.FilterValue,tokens:F,placeholder:T.formatMessage({defaultMessage:"Search for one or more sources",id:"database.filterValue.locationType.searchPlaceholder"}),onRemoveLastToken:()=>{const e=S.slice(0,S.length-1);a(e)},onClearButtonClick:()=>{a([]),null==c||c()},value:k,onChange:e=>{M(e.target.value)},dontShowBorderBottom:j.isAndroid,showClearButton:!0,style:{maxHeight:"20vh",overflowY:"auto"}}),W=(0,pe.jsxs)(ce().Z,{desktopStyle:{paddingBottom:0},children:[!j.isMobile&&d,K]});let q;return q=j.isMobile?{menuType:D().o.Modal,title:p,left:h,right:(0,pe.jsx)(se().DoneMenuText,{}),onClickRight:c,header:W}:{menuType:D().o.Popup,maxHeight:s().ot,width:260,header:W,disableHeaderBorder:!0},(0,pe.jsx)(ie().Z,{...q,children:(0,s().vR)(t)&&(0,pe.jsxs)(pe.Fragment,{children:[!x&&(0,pe.jsx)(ce().Z,{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"8px 0px"},children:(0,pe.jsx)(re().Z,{})}),x&&(0,pe.jsxs)(pe.Fragment,{children:[0===P.length||""!==k&&0===m.length?(0,pe.jsx)(ce().Z,{children:(0,pe.jsx)(ae().Z,{title:(0,pe.jsx)(w()._H,{defaultMessage:"No results",id:"database.filterValue.selectType.noResults.message"})})}):null,P.length>0&&(0,pe.jsx)(le().ZP,{type:le().iW.Vertical,initialFocus:0,sections:O,store:B,onAccept:()=>{M("")}})]})]})})}var ge=()=>o(421619),Ce=()=>o(154186),xe=()=>o(448419),me=()=>o(1910),fe=()=>o(740046),ve=()=>o(967092),ye=()=>o(231219),Se=()=>o(397540),je=()=>o(654133),be=()=>o(864832),Fe=()=>o(67961),ke=()=>o(987798),we=()=>o(164254),Ze=()=>o(296034),Me=()=>o(565796),Te=()=>o(497459),Re=()=>o(328094),Pe=()=>o(246471);let Ve=function(e){return e[e.AdvancedFilter=0]="AdvancedFilter",e[e.PropertyFilter=1]="PropertyFilter",e}({});const Ae=(0,w().vU)({startingMessage:{defaultMessage:"Select or type a date...",id:"search.dateMenu.dateMessage"},chevronDownAriaLabel:{id:"filterDateMenu.chevronDownAriaLabel.ariaLabel",defaultMessage:"Dropdown to select a date relative to today"},pageContainingThisView:{defaultMessage:"Page containing this view",id:"database.filterValue.pageContainingThisView"}}),_e=o(263184).default.createClass("",{name:"QueryStore"});function Be(){const{device:e}=(0,r().O7)();return(0,x().i)({width:10,height:10,...e.isMobile&&{marginTop:2}})}const De=function(e){let{schema:t,propertyFilter:n,parentStore:r,onClose:l,onChange:a,onChangeDebounced:s,userCanConfigureFilters:c,onDelete:d,onAddToCombinatorFilter:u,context:p,collectionViewId:h,collectionContextStore:g,allowRelativePersonFilter:C,allowRelativeDateFilter:x}=e;const m=(0,i().qz)(void 0,q().Z),f=(0,i().qz)(void 0,q().Z),v=(0,i().qz)(void 0,z().Z),y=(0,i().qz)(void 0,_e);return(0,pe.jsx)(o(94967).Z,{debugName:"CollectionFilterValueMenu",capture:!0,onEsc:e=>function(e,t){null==t||t()}(0,l),children:(0,pe.jsx)(xt,{propertyFilter:n,schema:t,parentStore:r,onChange:a,onChangeDebounced:s,userCanConfigureFilters:c,onDelete:d,onAddToCombinatorFilter:u,context:p,onClose:l,collectionViewId:h,collectionContextStore:g,allowRelativePersonFilter:C,allowRelativeDateFilter:x,queryStore:y,menuListStore:v,dateFilterPopupStore:f,dateRangeFilterPopupStore:m})})};function Ie(e){const{query:t,propertySchema:o,selectedValues:n,updateValue:r,isMobile:i,styles:l}=e,a=o.options||[];return(t?(0,g().ZP)(t,a,(e=>e.value)):a).map((e=>{const t=Boolean(n.find((t=>t.value===e.value))),o={key:e.value,render:o=>(0,pe.jsx)(oe().Z,{icon:(0,pe.jsx)(ne().Z,{onClick:o.onClick,checked:t,size:14,style:l.checkboxIcon}),title:(0,pe.jsx)(Pe().a,{format:i?u().lo.Large:u().lo.Medium,isSingle:!0,value:e.value,color:e.color,showRemoveButton:!1}),isTokenTitle:!0,...o}),action:()=>{const o=t?n.filter((t=>{let{value:o}=t;return o!==e.value})):[...n,{type:"exact",value:e.value}];r(o)}};return o}))}function He(e){return Array.isArray(e)?0===e.length?{type:"exact",value:void 0}:1===e.length?e[0]:e:e}function Le(e,t){return Boolean(e.find((e=>Z().Xy(e,t))))}function Oe(){return(0,pe.jsx)(w()._H,{defaultMessage:"Me",id:"database.filterValue.personType.firstPersonPropertyValue.title"})}function Ke(e,t,o){const{filter:n}=o;(0,s().a_)(n)?null==t||t({...n,subfilter:{...n.subfilter,value:He(e)}}):null==t||t({...n,value:He(e)})}function We(e,t,o){const{filter:n}=o;(0,s().a_)(n)?null==t||t({...n,subfilter:e}):null==t||t(e)}function Ue(e,t,o,n,r){return()=>{Ke(e?t.filter((e=>!Z().Xy(e,o))):[...t,o],r,n)}}function qe(e){let{filter:t,onChange:o,propertyFilter:n,onClose:r}=e;return(0,s().yI)(t.value)?null:(0,pe.jsx)(ce().Z,{topBorder:!0,children:(0,pe.jsx)(oe().Z,{focused:!1,title:(0,pe.jsx)(w()._H,{defaultMessage:"Clear",id:"database.filterValue.clear.message"}),onClick:()=>{Ke({type:"exact",value:void 0},o,n),null==r||r()}})})}function ze(e){let{filter:t}=e;const o=(0,l().Fg)();return(0,pe.jsx)("span",{style:{color:o.lightTextColor},children:(0,A().WC)(t.operator).toLocaleLowerCase()})}function Ge(e){let{propertySchema:t,propertyFilter:o,onChange:n}=e;const i=(0,l().Fg)(),a=(0,r().O7)(),{device:c}=a,d=o.filter;if(!(0,s().vR)(d)||!(0,s().gE)(d))return(0,pe.jsx)(pe.Fragment,{children:t.name});const u={width:190,items:s().T,selectedItem:(0,s().TX)(d),getKey:e=>e,onSelect:e=>{We({...d,use_end:(0,s().UG)(e)},n,o)},renderItem:e=>(0,pe.jsx)(je().Z,{renderTooltip:()=>(0,A()._T)(e.value),render:t=>(0,pe.jsx)(oe().Z,{title:(0,A().IF)(e.value),...(0,I().Z)(e,t)}),placement:K().Placement.Right,textWrap:!0,style:{width:"260px"}}),renderOrigin:e=>(0,pe.jsx)(Ce().Z,{...e,style:{marginRight:4,marginLeft:2,paddingLeft:2,paddingRight:2,borderRadius:6,flexShrink:0},children:(0,pe.jsxs)("div",{style:{display:"flex",alignItems:"center",...!c.isMobile&&{color:i.mediumTextColor,fill:i.lightIconColor,fontWeight:500,fontSize:12}},children:[(0,pe.jsx)("span",{style:{marginRight:4},children:(0,A().IF)((0,s().TX)(d))}),(0,pe.jsx)(Be,{})]})})};return(0,pe.jsx)(Se().Z,{...u,mobileActionSheet:!0})}function Ne(e){let{propertyFilter:t,onChange:o}=e;const n=(0,w().YB)(),i=(0,l().Fg)(),a=(0,r().O7)(),{filter:c}=t,{device:d}=a;if(!(0,s().a_)(c))return null;const u={width:190,items:s().Rf,getKey:e=>e,selectedItem:c.operator,onSelect:e=>{null==o||o({...c,operator:e})},renderItem:e=>(0,pe.jsx)(oe().Z,{title:(0,A().SW)(e.value,n),...e}),renderOrigin:e=>(0,pe.jsx)(Ce().Z,{...e,style:{marginRight:4,marginLeft:2,paddingLeft:2,paddingRight:2,borderRadius:6,flexShrink:0},children:(0,pe.jsxs)("div",{style:{display:"flex",alignItems:"center",...!d.isMobile&&{color:i.lightTextColor,fontSize:12}},children:[(0,pe.jsx)("span",{style:{marginRight:4},children:(0,A().SW)(c.operator,n).toLocaleLowerCase()}),(0,pe.jsx)(Be,{})]})})};return(0,pe.jsx)(Se().Z,{...u,mobileActionSheet:!0})}function Ye(e){let{propertyFilter:t,schema:o,parentStore:n,onChange:a}=e;const c=(0,l().Fg)(),d=(0,r().O7)(),{property:u}=t,{device:p}=d,h=o[u],g=(0,s().a_)(t.filter)?t.filter.subfilter:t.filter,C=(0,i().VK)((()=>(0,s().fI)({schema:o,property:u,getRecordModel:n.getRecordModel})),[n,u,o]);if((0,s().a_)(g))return null;let x=(0,s().xm)(C);h&&(0,_().Dt)(h)&&(x=x.filter((e=>!(0,s()._N)(e))));const m={width:190,items:x,selectedItem:g.operator,getKey:e=>e,onSelect:e=>{We((0,A().li)(C,g,e,"propertyFilter"),a,t)},renderItem:e=>(0,pe.jsx)(oe().Z,{title:(0,A().WC)(e.value),...e}),renderOrigin:e=>(0,pe.jsx)(Ce().Z,{...e,style:{marginRight:4,marginLeft:2,paddingLeft:2,paddingRight:2,borderRadius:6,flexShrink:0},children:(0,pe.jsxs)("div",{style:{display:"flex",alignItems:"center",...!p.isMobile&&{color:c.mediumTextColor,fill:c.lightIconColor,fontWeight:500,fontSize:12}},children:[(0,pe.jsx)("span",{style:{marginRight:4},children:(0,A().WC)(g.operator).toLocaleLowerCase()}),(0,pe.jsx)(Be,{})]})})};return(0,pe.jsx)(Se().Z,{...m,mobileActionSheet:!0})}function Ee(e){let{parent:t,userCanConfigureFilters:o,onDelete:n,onAddToCombinatorFilter:i}=e;const l=(0,r().O7)(),{device:a}=l;let c;c=a.isMobile?{menuType:D().o.ActionSheet}:{menuType:D().o.Popup,maxHeight:s().ot};const d=o?Z().oA([{key:"delete",render:e=>(0,pe.jsx)(oe().Z,{...e,title:(0,pe.jsx)(w()._H,{id:"database.filterValue.deleteFilter.title",defaultMessage:"Delete filter"}),icon:(0,v().y)({width:14}),isRedOnHover:!0}),action:()=>{t.close(),null==n||n()}},{key:"merge",render:e=>(0,pe.jsx)(je().Z,{placement:K().Placement.Right,style:{maxWidth:240,whiteSpace:void 0},renderTooltip:()=>(0,pe.jsx)("div",{children:(0,pe.jsx)(R().ep,{})}),render:t=>(0,pe.jsx)(oe().Z,{...(0,I().Z)(e,t),title:(0,pe.jsx)(w()._H,{id:"database.filterValue.mergeIntoAdvancedFilter.title",defaultMessage:"Add to advanced filter"}),icon:(0,f().Q)({width:14})})}),action:()=>{t.close(),null==i||i()}}]):[];return(0,pe.jsx)(ie().Z,{...c,children:(0,pe.jsx)(le().ZP,{type:le().iW.Vertical,sections:[{key:"actions",render:e=>(0,pe.jsx)(ce().Z,{disableMobilePadding:!0,...e}),items:d}],initialFocus:void 0})})}function Je(e){let{propertySchema:t,propertyFilter:o,onChange:n}=e;return(0,s().c3)(t)?(0,pe.jsx)(Ge,{propertyFilter:o,onChange:n,propertySchema:t}):(0,pe.jsx)(pe.Fragment,{children:t.name})}function Qe(e){let{userCanConfigureFilters:t,onDelete:o,onAddToCombinatorFilter:n}=e;const i=(0,r().O7)(),{device:l}=i;return(0,pe.jsx)(xe().ZP,{popupType:i.device.isMobile?ve().kQ.SlideUp:ve().kQ.Popup,render:e=>(0,pe.jsx)(Ee,{parent:e,userCanConfigureFilters:t,onDelete:o,onAddToCombinatorFilter:n}),renderOrigin:e=>t&&(0,pe.jsx)(me().Z,{icon:m().o,style:{...!l.isMobile&&{height:20,width:20,marginRight:8,marginTop:-2}},...e}),style:{width:240},originGap:2,placementToOrigin:xe().pO.Right,alignmentToOrigin:xe().vR.Start})}function Xe(e){let{propertyFilter:t,onChange:o,schema:n,parentStore:r,userCanConfigureFilters:i,onDelete:a,onAddToCombinatorFilter:c,context:d}=e;const u=(0,l().Fg)();if(d!==Ve.PropertyFilter)return null;const{property:p}=t,h=n[p];return h?(0,pe.jsxs)("div",{style:{display:"flex",color:u.lightTextColor,fontSize:12,marginBottom:6},children:[(0,pe.jsx)("span",{style:{flexShrink:1,marginLeft:8,...T().Yu},children:(0,pe.jsx)(Je,{propertyFilter:t,onChange:o,propertySchema:h})}),(0,s().a_)(t.filter)&&(0,pe.jsx)(Ne,{propertyFilter:t,onChange:o}),(0,pe.jsx)(Ye,{propertyFilter:t,schema:n,parentStore:r,onChange:o}),(0,pe.jsx)("div",{style:{flexGrow:1}}),(0,pe.jsx)(Qe,{userCanConfigureFilters:i,onDelete:a,onAddToCombinatorFilter:c})]}):null}function $e(e){let{propertyFilter:t,schema:o,context:n,onChange:r,parentStore:i}=e;const{property:l}=t,a=o[l];return a?n===Ve.PropertyFilter?(0,pe.jsxs)("div",{style:{display:"flex"},children:[(0,pe.jsx)("span",{style:{fontWeight:T().Ue.medium,flexShrink:1,marginLeft:8,maxWidth:150,...T().Yu},children:(0,pe.jsx)(Je,{propertyFilter:t,onChange:r,propertySchema:a})}),(0,s().a_)(t.filter)&&(0,pe.jsx)(Ne,{propertyFilter:t,onChange:r}),(0,pe.jsx)(Ye,{propertyFilter:t,schema:o,parentStore:i,onChange:r})]}):(0,pe.jsx)(pe.Fragment,{children:a.name}):null}function et(e){let{context:t,userCanConfigureFilters:o,onDelete:n,onAddToCombinatorFilter:r}=e;return t!==Ve.PropertyFilter?null:(0,pe.jsx)(Qe,{userCanConfigureFilters:o,onDelete:n,onAddToCombinatorFilter:r})}function tt(e){let{filter:t,onChange:o,propertyFilter:n,schema:i,parentStore:l,userCanConfigureFilters:a,onDelete:c,onAddToCombinatorFilter:d,context:u,onClose:p}=e;const h=(0,r().O7)(),g=(0,w().YB)(),{device:C}=h,x=(0,pe.jsx)(ce().Z,{isInput:!0,disableDesktopPadding:!0,children:(0,pe.jsx)(fe().ZP,{focus:!0,focusInitial:!0,focusAfterAnimation:!0,value:(0,s().vR)(t)&&t.value.value?t.value.value:"",onChange:e=>{Ke({type:"exact",value:e.target.value},o,n)},onClearButtonClick:()=>{Ke({type:"exact",value:void 0},o,n)},placeholder:g.formatMessage({defaultMessage:"Type a value…",id:"database.filterValue.textType.searchPlaceholder"}),showClearButton:!0,textWrapperStyle:{marginLeft:8,marginRight:8}})}),m=(0,pe.jsxs)(ce().Z,{disableMobileBorders:!0,disableMobilePadding:!0,children:[!C.isMobile&&(0,pe.jsx)(Xe,{propertyFilter:n,onChange:o,schema:i,parentStore:l,userCanConfigureFilters:a,onDelete:c,onAddToCombinatorFilter:d,context:u}),(0,s().vR)(t)&&x]});let f;return f=C.isMobile?{menuType:D().o.Modal,title:(0,pe.jsx)($e,{propertyFilter:n,schema:i,context:u,onChange:o,parentStore:l}),left:(0,pe.jsx)(et,{context:u,userCanConfigureFilters:a,onDelete:c,onAddToCombinatorFilter:d}),right:(0,pe.jsx)(se().DoneMenuText,{}),onClickRight:p,header:m}:{menuType:D().o.Popup,maxHeight:s().ot,width:220,header:m},(0,pe.jsx)(ie().Z,{...f})}function ot(e){let{filter:t,onChange:o,propertyFilter:n,schema:i,parentStore:l,userCanConfigureFilters:a,onDelete:c,onAddToCombinatorFilter:d,context:u,onClose:p}=e;const h=(0,r().O7)(),g=(0,w().YB)(),{device:C}=h,x=(0,pe.jsx)(ce().Z,{isInput:!0,disableDesktopPadding:!0,children:(0,pe.jsx)(fe().ZP,{focus:!0,focusInitial:!0,focusAfterAnimation:!0,value:(0,s().vR)(t)&&"number"==typeof t.value.value?t.value.value.toString():"",inputLeft:(0,pe.jsx)(ze,{filter:t}),onChange:e=>{Ke({type:"exact",value:(0,H().m)(e.target.value,g)},o,n)},onClearButtonClick:()=>{Ke({type:"exact",value:void 0},o,n)},placeholder:g.formatMessage({defaultMessage:"Type a value…",id:"database.filterValue.numberType.searchPlaceholder"}),showClearButton:!0,textWrapperStyle:{marginLeft:8,marginRight:8}})}),m=(0,pe.jsxs)(ce().Z,{disableMobileBorders:!0,disableMobilePadding:!0,children:[!C.isMobile&&(0,pe.jsx)(Xe,{propertyFilter:n,onChange:o,schema:i,parentStore:l,userCanConfigureFilters:a,onDelete:c,onAddToCombinatorFilter:d,context:u}),(0,s().vR)(t)&&x]});let f;return f=C.isMobile?{menuType:D().o.Modal,title:(0,pe.jsx)($e,{propertyFilter:n,schema:i,context:u,onChange:o,parentStore:l}),left:(0,pe.jsx)(et,{context:u,userCanConfigureFilters:a,onDelete:c,onAddToCombinatorFilter:d}),right:(0,pe.jsx)(se().DoneMenuText,{}),onClickRight:p,header:m}:{menuType:D().o.Popup,maxHeight:s().ot,width:220,header:m},(0,pe.jsx)(ie().Z,{...f})}function nt(e,t,o){t.setState(e),o.setState({focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}function rt(e){let{filter:t,schema:o,propertyFilter:n,parentStore:a,onChange:p,onClose:h,userCanConfigureFilters:g,onDelete:C,onAddToCombinatorFilter:x,context:m,queryStore:f,menuListStore:v}=e;const y=(0,w().YB)(),S=(0,l().Fg)(),j=(0,r().O7)(),{device:b}=j,F=(0,i().Kw)(f),k=(0,i().VK)((()=>(0,V().tJ)(o,n,a)),[o,n,a]);if(!k||!(0,c().cu)(k))return null;const M=k.options||[],T=(0,s().vR)(t)?(0,s().dx)(t)?(0,s().mg)(t):(0,s().qC)(t):[],R=Ie({query:F,propertySchema:k,selectedValues:T,updateValue:e=>{Ke(e,p,n)},isMobile:b.isMobile,styles:{checkboxIcon:{fill:S.regularIconColor,pointerEvents:"none"}}}),P=T.map((e=>{if(void 0===e.value)return null;const t=(0,d().i7)(M,e.value);return t?(0,pe.jsx)(Pe().a,{format:b.isMobile?u().lo.Large:u().lo.Small,isSingle:!1,value:t.value,color:t.color,showRemoveButton:!0,onClickRemove:()=>{Ke(Z().zu(T,e),p,n)}},t.id):null})),A=(0,pe.jsx)(ue().ZP,{focus:!b.isMobile||void 0,focusAfterAnimation:!0,format:ue().UR.FilterValue,tokens:P,placeholder:y.formatMessage({defaultMessage:"Select one or more options…",id:"database.filterValue.selectType.searchPlaceholder"}),onRemoveLastToken:()=>{Ke(T.slice(0,T.length-1),p,n)},onClearButtonClick:()=>{Ke([],p,n),null==h||h()},value:F,onChange:e=>{nt(e.target.value,f,v)},dontShowBorderBottom:b.isAndroid,showClearButton:!0}),_=(0,pe.jsxs)(ce().Z,{desktopStyle:{paddingBottom:0},children:[!b.isMobile&&(0,pe.jsx)(Xe,{propertyFilter:n,onChange:p,schema:o,parentStore:a,userCanConfigureFilters:g,onDelete:C,onAddToCombinatorFilter:x,context:m}),(0,s().vR)(t)&&A]});let B;return B=b.isMobile?{menuType:D().o.Modal,title:(0,pe.jsx)($e,{propertyFilter:n,schema:o,context:m,onChange:p,parentStore:a}),left:(0,pe.jsx)(et,{context:m,userCanConfigureFilters:g,onDelete:C,onAddToCombinatorFilter:x}),right:(0,pe.jsx)(se().DoneMenuText,{}),onClickRight:h,header:_}:{menuType:D().o.Popup,maxHeight:s().ot,width:260,header:_,disableHeaderBorder:!0,tokenInputHeader:!0},(0,pe.jsx)(ie().Z,{...B,children:(0,s().vR)(t)&&(0,pe.jsxs)(pe.Fragment,{children:[0===R.length&&(0,pe.jsx)(ce().Z,{children:(0,pe.jsx)(ae().Z,{title:(0,pe.jsx)(w()._H,{defaultMessage:"No results",id:"database.filterValue.selectType.noResults.message"})})}),R.length>0&&(0,pe.jsx)(le().ZP,{type:le().iW.Vertical,initialFocus:0,sections:[{key:"select",render:e=>(0,pe.jsx)(ce().Z,{...e}),items:R}],store:v,onAccept:()=>{nt("",f,v)}})]})})}function it(e){let{filter:t,error:o,results:l,schema:c,propertyFilter:d,parentStore:p,onChange:h,allowRelativePersonFilter:g,onClose:C,userCanConfigureFilters:x,onDelete:m,onAddToCombinatorFilter:f,context:v,queryStore:y,menuListStore:S}=e;const b=(0,r().O7)(),k=(0,w().YB)(),{device:M}=b,T=(0,i().Kw)(y),R=(0,i().VK)((()=>(0,V().tJ)(c,d,p)),[c,d,p]),P=(0,n.useMemo)((()=>(0,s().vR)(t)?(0,s().R8)(t):[]),[t]),A=(0,i().VK)((()=>Z().oA(P.map(((e,t)=>{if("exact"===e.type&&e.value){const t=(0,a().Hl)({pointer:e.value,getRecordValue:p.getRecordValue});return(0,pe.jsx)(be().ZP,{actor:t,format:M.isMobile?be().ZP.Format.Large:be().ZP.Format.Small,showRemoveButton:!0,onClickRemove:()=>{Ke(Z().zu(P,e),h,d)},shouldShrink:!0,isSingle:!1},e.value.id)}if("relative"===e.type&&"me"===e.value&&g)return(0,pe.jsx)(de().Z,{format:M.isMobile?u().lo.Large:u().lo.Small,value:(0,pe.jsx)(Oe,{}),onClickRemove:()=>{Ke(Z().zu(P,e),h,d)},showRemoveButton:!0,isSingle:!1,shouldShrink:!0,backgroundColor:"transparent",showTooltip:"overflow"},t)})))),[g,P,M.isMobile,h,p.getRecordValue,d]);if(!R)return null;const _=(0,pe.jsx)(ue().ZP,{focus:!M.isMobile||void 0,focusAfterAnimation:!0,format:ue().UR.FilterValue,tokens:A,placeholder:k.formatMessage({defaultMessage:"Search for one or more people…",id:"database.filterValue.personType.searchPlaceholder"}),onRemoveLastToken:()=>{Ke(P.slice(0,P.length-1),h,d)},onClearButtonClick:()=>{Ke([],h,d),null==C||C()},value:T,onChange:e=>{nt(e.target.value,y,S)},dontShowBorderBottom:M.isAndroid,showClearButton:!0,style:{maxHeight:"20vh",overflowY:"auto"},preventScrollOnFocus:!0}),B=(0,pe.jsxs)(ce().Z,{desktopStyle:{paddingBottom:0},children:[!M.isMobile&&(0,pe.jsx)(Xe,{propertyFilter:d,onChange:h,schema:c,parentStore:p,userCanConfigureFilters:x,onDelete:m,onAddToCombinatorFilter:f,context:v}),(0,s().vR)(t)&&_]});let I;I=M.isMobile?{menuType:D().o.Modal,title:(0,pe.jsx)($e,{propertyFilter:d,schema:c,context:v,onChange:h,parentStore:p}),left:(0,pe.jsx)(et,{context:v,userCanConfigureFilters:x,onDelete:m,onAddToCombinatorFilter:f}),right:(0,pe.jsx)(se().DoneMenuText,{}),onClickRight:C,header:B}:{menuType:D().o.Popup,maxHeight:s().ot,width:260,header:B,disableHeaderBorder:!0};const H=Z().oA((l&&l.users||[]).map((e=>function(e,t,o,n,r){const{device:i}=n,l=Boolean(t.find((t=>{var o;return"exact"===t.type&&(null===(o=t.value)||void 0===o?void 0:o.id)===e.id})));return{key:e.id,render:t=>(0,pe.jsx)(oe().Z,{...t,title:(0,pe.jsx)(be().vw,{isSingle:!0,shouldShrink:!0,format:i.isMobile?be().vw.Format.Large:be().vw.Format.Medium,userValue:e,showRemoveButton:!1}),isTokenTitle:!0,checkState:l}),action:()=>{Ke(l?t.filter((t=>{var o;return!("exact"===t.type&&(null===(o=t.value)||void 0===o?void 0:o.id)===e.id)})):[...t,{type:"exact",value:{table:F().KJ,id:e.id}}],r,o)}}}(e,P,d,b,h)))),L=["created_by","last_edited_by"].includes(R.type)?Z().oA((l&&l.bots||[]).map((e=>function(e,t,o,n,r){const{device:i}=n,l=Boolean(t.find((t=>{var o;return"exact"===t.type&&(null===(o=t.value)||void 0===o?void 0:o.id)===e.id})));return{key:e.id,render:t=>(0,pe.jsx)(oe().Z,{...t,title:(0,pe.jsx)(be().Jn,{isSingle:!0,shouldShrink:!0,format:i.isMobile?be().Jn.Format.Large:be().Jn.Format.Medium,botValue:e,showRemoveButton:!1}),isTokenTitle:!0,checkState:l}),action:()=>{Ke(l?t.filter((t=>{var o;return!("exact"===t.type&&(null===(o=t.value)||void 0===o?void 0:o.id)===e.id)})):[...t,{type:"exact",value:{table:j().cZ,id:e.id}}],r,o)}}}(e,P,d,b,h)))):[];if(g&&l&&(!T||"me".includes(T))){const e=Boolean(P.find((e=>"relative"===e.type&&"me"===e.value)));H.unshift({key:"me",render:t=>(0,pe.jsx)(oe().Z,{...t,title:(0,pe.jsx)(Oe,{}),checkState:e,style:M.isMobile?void 0:{fontSize:14}}),action:()=>{Ke(e?P.filter((e=>{let{value:t}=e;return"me"!==t})):[...P,{type:"relative",value:"me"}],h,d)}})}const O=[];return H.length>0&&O.push({key:"user property",render:e=>(0,pe.jsx)(ce().Z,{...e}),items:H}),L.length>0&&O.push({key:"bot property",render:e=>(0,pe.jsx)(ce().Z,{...e,title:"Pick a bot"}),items:L}),(0,pe.jsx)(ie().Z,{...I,children:(0,s().vR)(t)&&(0,pe.jsxs)(pe.Fragment,{children:[o&&(0,pe.jsx)(ce().Z,{children:(0,pe.jsx)(ae().Z,{title:(0,pe.jsx)(w()._H,{defaultMessage:"Something went wrong.",id:"database.filterValue.personType.searchPersonPropertyMenuItem.errorMessage"})})}),0===O.length&&l&&!o&&(0,pe.jsx)(ce().Z,{children:(0,pe.jsx)(ae().Z,{title:(0,pe.jsx)(w()._H,{defaultMessage:"No results",id:"database.filterValue.personType.noResults.message"})})}),!l&&!o&&(0,pe.jsx)(ce().Z,{children:(0,pe.jsx)(Te().Z,{})}),O.length>0&&(0,pe.jsx)(le().ZP,{type:le().iW.Vertical,initialFocus:0,sections:O,store:S,onAccept:()=>{nt("",y,S)}})]})})}function lt(e){var t;let{filter:o,context:n,propertyFilter:i,schema:l,onChange:a,parentStore:c,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p,onClose:h,menuListStore:g}=e;const C=(0,r().O7)(),{device:x}=C;let m;m=x.isMobile?{menuType:D().o.Modal,title:(0,pe.jsx)($e,{propertyFilter:i,schema:l,context:n,onChange:a,parentStore:c}),left:(0,pe.jsx)(et,{context:n,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p}),right:(0,pe.jsx)(se().DoneMenuText,{}),onClickRight:h}:{menuType:D().o.Popup,maxHeight:s().ot,width:220,footer:(0,pe.jsx)(qe,{onChange:a,propertyFilter:i,onClose:h,filter:o})};const f=null===(t=o.value)||void 0===t?void 0:t.value;return(0,pe.jsxs)(ie().Z,{...m,children:[n===Ve.PropertyFilter&&(0,pe.jsx)(ce().Z,{children:!x.isMobile&&(0,pe.jsx)(Xe,{propertyFilter:i,onChange:a,schema:l,parentStore:c,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p,context:n})}),(0,pe.jsx)(le().ZP,{type:le().iW.Vertical,initialFocus:0,sections:[{key:"select",render:e=>(0,pe.jsx)(ce().Z,{style:n===Ve.PropertyFilter?{paddingTop:0}:void 0,...e}),items:[{key:"unchecked",render:e=>(0,pe.jsx)(oe().Z,{...e,title:(0,pe.jsx)(w()._H,{defaultMessage:"Unchecked",id:"database.filterValue.checkboxType.unchecked.title"}),isTokenTitle:!0,checkState:!1===f}),action:()=>{Ke({type:"exact",value:!1},a,i)}},{key:"checked",render:e=>(0,pe.jsx)(oe().Z,{...e,title:(0,pe.jsx)(w()._H,{defaultMessage:"Checked",id:"database.filterValue.checkboxType.checked.title"}),isTokenTitle:!0,checkState:!0===f}),action:()=>{Ke({type:"exact",value:!0},a,i)}}]}],store:g,onAccept:h}),x.isMobile&&(0,pe.jsx)(qe,{onChange:a,propertyFilter:i,onClose:h,filter:o})]})}function at(e){let{filter:t,error:o,results:l,schema:a,propertyFilter:d,parentStore:p,onChange:h,onClose:g,userCanConfigureFilters:C,onDelete:x,onAddToCombinatorFilter:m,context:f,collectionViewId:v,queryStore:j,menuListStore:F,allowCurrentPageInRelatedCollectionFilter:k}=e;const T=(0,r().O7)(),R=(0,w().YB)(),{device:P}=T,A=(0,i().Kw)(j),_=(0,i().VK)((()=>(0,V().tJ)(a,d,p)),[a,d,p]),I=(0,i().VK)((()=>function(e,t){if(!e)return;const o=G().Xr.createChildStore(t,{table:b().np,id:e}).getParentBlockStore();return o?o.getNearestAncestorTemplateStore():void 0}(v,p)),[v,p]),H=(0,i().VK)((()=>null==I?void 0:I.getAssociatedCollectionId()),[I]),O=(0,n.useMemo)((()=>(0,s().vR)(t)?(0,s().YO)(t):[]),[t]),K=(0,i().VK)((()=>{const e=(0,V().tJ)(a,d,p);return e&&(0,c().p_)(e)?{appConfigUri:(0,L().ke)(e,p),schema:(0,L().uJ)(e,T)}:{}}),[a,d,p,T]),W=(0,i().VK)((()=>function(e,t,o,n,r){const{appConfigUri:i,schema:l}=n;if(!l)return[];if(!i||!(0,B().Sh)(l,i))return[];const a=(0,y().Zv)(l,i),s=y().qB[i];return Z().oA(a.map((n=>{if(!e||n.includes(e)){const e={type:"relative",value:{type:"builtin",variable:n}},i=Le(t,e);return{key:n,render:e=>(0,pe.jsx)(oe().Z,{...e,title:(0,pe.jsx)(w()._H,{...s[n].messageDescriptor}),checkState:i}),action:Ue(i,t,e,o,r)}}})))}(A,O,d,K,h)),[A,O,d,K,h]),U=(0,i().VK)((()=>k?function(e,t,o,n,r){const i=e.formatMessage(Ae.pageContainingThisView);if(!t||i.toLowerCase().includes(t)){const e={type:"relative",value:{type:"current_page_in_related_collection"}},t=Le(o,e);return{key:e.value.type,render:e=>(0,pe.jsx)(oe().Z,{...e,title:i,checkState:t}),action:Ue(t,o,e,n,r)}}}(R,A,O,d,h):void 0),[R,A,O,d,h,k]);if(!_||!(0,c().p_)(_))return null;const q=(0,c().F0)(_);if(!q)return null;const z=Z().oA(O.map(((e,t)=>{if(!e.value)return null;const o={format:P.isMobile?u().lo.Large:u().lo.Small,shouldWrap:!1,showRemoveButton:!0,isSingle:!1,shouldShrink:!0,onClickRemove:()=>{Ke(Z().zu(O,e),h,d)}},n=e.type;if("exact"===n)return(0,pe.jsx)(Re().Z,{blockId:e.value,parentStore:p,relationPropertySchema:_,...o},e.value);if("relative"===n){var r;const{appConfigUri:n}=K;return"current_page_in_related_collection"===e.value.type?(0,pe.jsx)(de().Z,{value:R.formatMessage(Ae.pageContainingThisView),backgroundColor:"transparent",showTooltip:"overflow",...o},t):n&&"builtin"===e.value.type?(0,pe.jsx)(de().Z,{value:(0,pe.jsx)(w()._H,{...null===(r=y().qB[n])||void 0===r||null===(r=r[e.value.variable])||void 0===r?void 0:r.messageDescriptor}),backgroundColor:"transparent",showTooltip:"overflow",...o},t):null}(0,M().t1)(n)}))),N=(0,pe.jsx)(ue().ZP,{focus:!P.isMobile||void 0,focusAfterAnimation:!0,format:ue().UR.FilterValue,tokens:z,placeholder:R.formatMessage({defaultMessage:"Search for one or more pages…",id:"database.filterValue.relationType.searchPlaceholder"}),onRemoveLastToken:()=>{Ke(O.slice(0,O.length-1),h,d)},onClearButtonClick:()=>{Ke([],h,d),null==g||g()},value:A,onChange:e=>{nt(e.target.value,j,F)},dontShowBorderBottom:P.isAndroid,style:{maxHeight:"20vh",overflowY:"auto"},showClearButton:!0}),Y=(0,pe.jsxs)(ce().Z,{desktopStyle:{paddingBottom:0},children:[!P.isMobile&&(0,pe.jsx)(Xe,{propertyFilter:d,onChange:h,schema:a,parentStore:p,userCanConfigureFilters:C,onDelete:x,onAddToCombinatorFilter:m,context:f}),(0,s().vR)(t)&&N]});let E;E=P.isMobile?{menuType:D().o.Modal,title:(0,pe.jsx)($e,{propertyFilter:d,schema:a,context:f,onChange:h,parentStore:p}),left:(0,pe.jsx)(et,{context:f,userCanConfigureFilters:C,onDelete:x,onAddToCombinatorFilter:m}),right:(0,pe.jsx)(se().DoneMenuText,{}),onClickRight:g,header:Y}:{menuType:D().o.Popup,maxHeight:s().ot,width:260,header:Y,disableHeaderBorder:!0},l&&!A&&I&&q&&H===q&&(l=Z().jj([I.id,...l]));let J=[];if(l){const e=function(e,t,o,n,r){return e.map((e=>{const i={type:"exact",value:e},l=Le(t,i),a=G().G.createChildStore(o,{table:S().iU,id:e});return{key:e,action:Ue(l,t,i,n,r),render:e=>(0,pe.jsx)(ye().Z,{store:a,checkState:l,hidePath:!0,...e})}}))}(l,O,p,d,h);J=((0,s().a_)(d.filter)?[]:W).concat(e),U&&(J=[U,...J])}return(0,pe.jsx)(ie().Z,{...E,children:(0,s().vR)(t)&&(0,pe.jsxs)(pe.Fragment,{children:[o&&(0,pe.jsx)(ce().Z,{children:(0,pe.jsx)(ae().Z,{title:(0,pe.jsx)(w()._H,{defaultMessage:"Something went wrong.",id:"database.filterValue.relationType.searchRelationPropertyMenuItem.errorMessage"})})}),0===J.length&&l&&!o&&(0,pe.jsx)(ce().Z,{children:(0,pe.jsx)(ae().Z,{title:(0,pe.jsx)(w()._H,{defaultMessage:"No results",id:"database.filterValue.relationType.noResults.message"})})}),!l&&!o&&(0,pe.jsx)(ce().Z,{children:(0,pe.jsx)(Te().Z,{})}),J.length>0&&(0,pe.jsx)(le().ZP,{type:le().iW.Vertical,initialFocus:0,sections:[{key:"results",render:e=>(0,pe.jsx)(ce().Z,{...e}),items:J}],store:F,onAccept:()=>{nt("",j,F)}})]})})}function st(e){let{filter:t,schema:o,propertyFilter:n,parentStore:r,onChange:l,allowRelativeDateFilter:a,dateRangeFilterPopupStore:c}=e;const d=(0,i().VK)((()=>(0,V().tJ)(o,n,r)),[o,n,r]);if(!d)return null;let u;if((0,s().TQ)(t)&&"exact"===t.value.type&&t.value.value){const e=t.value.value;u={starting:e.start_date?{type:"date",start_date:e.start_date}:void 0,ending:e.end_date?{type:"date",start_date:e.end_date}:void 0}}else u=(0,s().TQ)(t)&&"relative"===t.value.type?t.value:{starting:void 0,ending:void 0};const p={disableMenuWrap:!0,title:d.name,value:u,onUpdate:e=>{var o,r;if(e.error)return null;const i={...u,...e.value},a=null===(o=i.starting)||void 0===o?void 0:o.start_date,s=null===(r=i.ending)||void 0===r?void 0:r.start_date;We({operator:"date_is_within",use_end:"use_end"in t?null==t?void 0:t.use_end:void 0,value:{type:"exact",value:a||s?{type:"daterange",start_date:a,end_date:s}:void 0}},l,n)},allowRelativeRangeFilter:a,relativeRangePopupStore:c,onUpdateRelativeFilter:e=>{We({...t,value:e},l,n)}};return(0,pe.jsx)(ce().Z,{children:(0,pe.jsx)(Me().Z,{...p})})}function ct(e){let{filter:t,events:o,onChange:n,propertyFilter:i,allowRelativeDateFilter:a,dateFilterPopupStore:s}=e;const c=(0,l().Fg)(),d=(0,r().O7)(),u=(0,w().YB)();return(0,pe.jsx)(ke().Z,{...o,placeholder:u.formatMessage(Ae.startingMessage),focused:"exact"===t.value.type,value:t.value,onUpdate:e=>{var o;if(e.error)return null;const r=null===(o=e.value)||void 0===o?void 0:o.start_date;We({...t,value:{type:"exact",value:r?{type:"date",start_date:r}:void 0}},n,i)},inputRight:a&&(0,pe.jsx)(me().Z,{icon:x().i,iconStyle:{width:12,height:12},ariaLabel:u.formatMessage(Ae.chevronDownAriaLabel),style:{...!d.device.isMobile&&{height:20,width:20},color:c.mediumIconColor},onClick:()=>{s.setState({open:!0})}}),hideClearButton:"relative"===t.value.type||void 0,isRightLastElementOfInput:!0})}function dt(e){let{filter:t,context:o,onChange:n,propertyFilter:i,schema:a,parentStore:c,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p,onClose:h,menuListStore:g}=e;const C=(0,l().Fg)(),x=(0,r().O7)(),{device:m}=x,f=(0,s().vR)(t)?(0,s().fl)(t):[],v=f.map((e=>{let{value:t}=e;return t})),y=k().zz.map((e=>{const t=v.includes(e);return{key:e,render:o=>(0,pe.jsx)(oe().Z,{icon:(0,pe.jsx)(ne().Z,{checked:t,size:14,style:{fill:C.regularIconColor,pointerEvents:"none"}}),title:(0,A().cq)({type:"exact",value:e}),...o}),action:()=>{if(t)Ke(f.filter((t=>{let{value:o}=t;return o!==e})),n,i);else{const t={type:"exact",value:e};Ke([...f,t],n,i)}}}}));let S;return S=m.isMobile?{menuType:D().o.Modal,title:(0,pe.jsx)($e,{propertyFilter:i,schema:a,context:o,onChange:n,parentStore:c}),left:(0,pe.jsx)(et,{context:o,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p}),right:(0,pe.jsx)(se().DoneMenuText,{}),onClickRight:h}:{menuType:D().o.Popup,maxHeight:s().ot,width:220,footer:(0,pe.jsx)(qe,{onChange:n,propertyFilter:i,onClose:h,filter:t})},(0,pe.jsxs)(ie().Z,{...S,children:[o===Ve.PropertyFilter&&(0,pe.jsx)(ce().Z,{children:!m.isMobile&&(0,pe.jsx)(Xe,{propertyFilter:i,onChange:n,schema:a,parentStore:c,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p,context:o})}),(0,pe.jsx)(le().ZP,{type:le().iW.Vertical,initialFocus:0,sections:[{key:"select",render:e=>(0,pe.jsx)(ce().Z,{...e}),items:y}],store:g})]})}function ut(e){let{filter:t,parentStore:o,schema:n,propertyFilter:l,onChange:a,allowRelativePersonFilter:s,onClose:c,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p,context:h,queryStore:g,menuListStore:C}=e;const x=(0,r().O7)(),m=(0,w().YB)(),f=(0,i().Kw)(g);return(0,pe.jsx)(N().Z,{request:f,performRequest:e=>async function(e,t,o,n){const r=await O().x.searchActions.load();let{users:i,bots:l}=await r.searchSpaceActors({environment:o,query:e,membersOnly:!1,userLocale:n});return i=i.slice(0,20),l=l.slice(0,20),await Promise.all([...i.map((async e=>{let{id:o}=e;const n=(0,G().Kv)(t,{table:F().KJ,id:o});await n.load()})),...l.map((async e=>{const o=(0,G().Kv)(t,{table:j().cZ,id:e.id,spaceId:e.space_id});await o.load()}))]),{users:i,bots:l}}(e,o,x,m.locale),render:(e,r)=>(0,pe.jsx)(it,{schema:n,propertyFilter:l,parentStore:o,onChange:a,allowRelativePersonFilter:s,onClose:c,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p,context:h,queryStore:g,menuListStore:C,filter:t,error:e,results:r})})}function pt(e){let{filter:t,schema:o,propertyFilter:n,parentStore:l,onChange:a,onClose:s,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p,context:h,collectionViewId:g,queryStore:C,menuListStore:x,allowCurrentPageInRelatedCollectionFilter:m}=e;const f=(0,r().O7)(),v=(0,i().Kw)(C),y=(0,i().VK)((()=>U().default.state.currentSpaceStore),[]),j=(0,i().VK)((()=>W().default.state.publicPageData),[]),b=(0,i().VK)((()=>(0,V().tJ)(o,n,l)),[o,n,l]),F=(null==y?void 0:y.id)||(null==j?void 0:j.spaceId);if(!b||!(0,c().p_)(b)||!F)return null;const k=(0,c().F0)(b);return k?(0,pe.jsx)(N().Z,{request:{query:v,spaceId:F,collectionId:k},performRequest:e=>async function(e,t,o){const{query:n,spaceId:r,collectionId:i}=e;if(!r||!i)return[];const l=await O().x.searchActions.load(),{results:a}=await l.searchPagesInCollection({environment:o,query:n,collectionId:i,limit:20,spaceId:r,excludeTemplates:!0,source:"relation_menu",includePublicPagesWithoutExplicitAccess:!0,boostRecentlyViewedPages:!1});return 0===a.length?[]:(await Promise.all(a.map((async e=>{const o=(0,G().Kv)(t,{table:S().iU,id:e});await o.load()}))),a)}(e,l,f),render:(e,r)=>(0,pe.jsx)(at,{schema:o,propertyFilter:n,parentStore:l,onChange:a,onClose:s,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p,context:h,collectionViewId:g,queryStore:C,menuListStore:x,filter:t,error:e,results:r,allowCurrentPageInRelatedCollectionFilter:m})}):null}function ht(e){let{filter:t,onChange:o,propertyFilter:n,allowRelativeDateFilter:r,dateFilterPopupStore:l}=e;const a=(0,i().Kw)(P().AK);if(!(0,s().vR)(t))return null;const c="exact"===t.value.type?t.value.value:(0,h().Id)(t.value);return c&&!(0,p().J_)(c)?null:(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(ce().Z,{children:(0,pe.jsx)(we().Z,{type:"date",filterValue:t.value,onUpdate:e=>{We({...t,value:e},o,n)},renderOrigin:e=>(0,pe.jsx)(ct,{onChange:o,propertyFilter:n,allowRelativeDateFilter:r,dateFilterPopupStore:l,filter:t,events:e}),disabled:"exact"===t.value.type&&r,buttonPopupStore:l})}),(0,pe.jsxs)(ce().Z,{style:{padding:"0px 14px 14px 14px"},children:[(0,pe.jsx)(Ze().Z,{firstDayOfWeek:a,selectValue:void 0!==c,value:c?h().OQ.notionDateToLuxon(c).toMillis():Date.now(),onChange:e=>{Ke({type:"exact",value:(0,h().hT)(e,(0,C().r)())},o,n)}}),"relative"===t.value.type&&(0,pe.jsx)(Fe().Z,{isSmall:!0,style:{marginLeft:4,marginTop:4},children:(0,pe.jsx)(w()._H,{id:"collectionFilterMenu.dateFilter.relativeDateFilter.description",defaultMessage:"Filter will update with the current date"})})]})]})}function gt(e){let{filter:t,context:o,propertyFilter:n,schema:i,onChange:l,parentStore:a,userCanConfigureFilters:c,onDelete:d,onAddToCombinatorFilter:u,onClose:p,allowRelativeDateFilter:h,dateFilterPopupStore:g,dateRangeFilterPopupStore:C}=e;const x=(0,r().O7)(),{device:m}=x;let f;return f=m.isMobile?{menuType:D().o.Modal,title:(0,pe.jsx)($e,{propertyFilter:n,schema:i,context:o,onChange:l,parentStore:a}),left:(0,pe.jsx)(et,{context:o,userCanConfigureFilters:c,onDelete:d,onAddToCombinatorFilter:u}),right:(0,pe.jsx)(se().DoneMenuText,{}),onClickRight:p}:{menuType:D().o.Popup,maxHeight:s().ot},(0,pe.jsxs)(ie().Z,{...f,children:[o===Ve.PropertyFilter&&!m.isMobile&&(0,pe.jsx)(ce().Z,{desktopStyle:{paddingBottom:0},children:(0,pe.jsx)(Xe,{propertyFilter:n,onChange:l,schema:i,parentStore:a,userCanConfigureFilters:c,onDelete:d,onAddToCombinatorFilter:u,context:o})}),(0,s().vR)(t)?(0,s().TQ)(t)?(0,pe.jsx)(st,{schema:i,propertyFilter:n,parentStore:a,onChange:l,allowRelativeDateFilter:h,dateRangeFilterPopupStore:C,filter:t}):(0,pe.jsx)(ht,{onChange:l,propertyFilter:n,allowRelativeDateFilter:h,dateFilterPopupStore:g,filter:t}):void 0]})}function Ct(e){let{filter:t,schema:o,propertyFilter:n,parentStore:l,onChange:a,onClose:c,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p,context:h}=e;const g=(0,r().O7)(),{device:C}=g,x=(0,i().VK)((()=>(0,V().tJ)(o,n,l)),[o,n,l]);if(!x||"file"!==x.type)return null;const m=(0,pe.jsx)(ce().Z,{desktopStyle:{paddingBottom:0},children:!C.isMobile&&(0,pe.jsx)(Xe,{propertyFilter:n,onChange:a,schema:o,parentStore:l,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p,context:h})});let f;return f=C.isMobile?{menuType:D().o.Modal,title:(0,pe.jsx)($e,{propertyFilter:n,schema:o,context:h,onChange:a,parentStore:l}),left:(0,pe.jsx)(et,{context:h,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p}),right:(0,pe.jsx)(se().DoneMenuText,{}),onClickRight:c,header:m}:{menuType:D().o.Popup,maxHeight:s().ot,width:260,header:m,disableHeaderBorder:!0,tokenInputHeader:!0},(0,pe.jsx)(ie().Z,{...f})}function xt(e){let{propertyFilter:t,schema:o,parentStore:n,onChange:r,onChangeDebounced:l,userCanConfigureFilters:a,onDelete:d,onAddToCombinatorFilter:u,context:p,onClose:h,collectionViewId:g,collectionContextStore:C,allowRelativePersonFilter:x,allowRelativeDateFilter:m,queryStore:f,menuListStore:v,dateFilterPopupStore:y,dateRangeFilterPopupStore:S}=e;const{property:j,filter:b}=t,F=(0,i().VK)((()=>(0,s().fI)({schema:o,property:j,getRecordModel:n.getRecordModel})),[n,j,o]),k=o[j],w=(0,i().VK)((()=>!(!C||!k)&&function(e){var t;let{collectionContextStore:o,propertySchema:n}=e;if(void 0===o.viewsModuleContextStore.state)return!1;const r=null===(t=o.viewsModuleContextStore.getCurrentPageCollectionStore())||void 0===t?void 0:t.id;return!!r&&(0,c().p_)(n)&&n.collection_id===r}({collectionContextStore:C,propertySchema:k})),[C,k]),Z=(0,s().a_)(b)?b.subfilter:b;return"text"===F?(0,s().Ly)(Z)?(0,pe.jsx)(tt,{onChange:l,propertyFilter:t,schema:o,parentStore:n,userCanConfigureFilters:a,onDelete:d,onAddToCombinatorFilter:u,context:p,onClose:h,filter:Z}):null:"relation"===F?(0,s().e)(Z)?(0,pe.jsx)(pt,{schema:o,propertyFilter:t,parentStore:n,onChange:r,onClose:h,userCanConfigureFilters:a,onDelete:d,onAddToCombinatorFilter:u,context:p,collectionViewId:g,queryStore:f,menuListStore:v,filter:Z,allowCurrentPageInRelatedCollectionFilter:w}):null:"checkbox"===F?(0,s().XA)(Z)?(0,pe.jsx)(lt,{context:p,propertyFilter:t,schema:o,onChange:r,parentStore:n,userCanConfigureFilters:a,onDelete:d,onAddToCombinatorFilter:u,onClose:h,menuListStore:v,filter:Z}):null:"select"===F||"multi_select"===F?(0,s().dx)(Z)||(0,s().NU)(Z)?(0,pe.jsx)(rt,{schema:o,propertyFilter:t,parentStore:n,onChange:r,onClose:h,userCanConfigureFilters:a,onDelete:d,onAddToCombinatorFilter:u,context:p,queryStore:f,menuListStore:v,filter:Z}):null:"status"===F?(0,s().r2)(Z)?(0,pe.jsx)(ge().Z,{propertyFilter:t,schema:o,filter:Z,parentStore:n,updateValue:e=>Ke(e,r,t),onClose:h,desktopTopActions:(0,pe.jsx)(Xe,{propertyFilter:t,onChange:r,schema:o,parentStore:n,userCanConfigureFilters:a,onDelete:d,onAddToCombinatorFilter:u,context:p}),mobileMenuTitle:(0,pe.jsx)($e,{propertyFilter:t,schema:o,context:p,onChange:r,parentStore:n}),mobileMoreActions:(0,pe.jsx)(et,{context:p,userCanConfigureFilters:a,onDelete:d,onAddToCombinatorFilter:u}),collectionContextStore:C}):null:"person"===F?(0,s().Gb)(Z)?(0,pe.jsx)(ut,{parentStore:n,schema:o,propertyFilter:t,onChange:r,allowRelativePersonFilter:x,onClose:h,userCanConfigureFilters:a,onDelete:d,onAddToCombinatorFilter:u,context:p,queryStore:f,menuListStore:v,filter:Z}):null:"number"===F?(0,s().h6)(Z)?(0,pe.jsx)(ot,{onChange:l,propertyFilter:t,schema:o,parentStore:n,userCanConfigureFilters:a,onDelete:d,onAddToCombinatorFilter:u,context:p,onClose:h,filter:Z}):null:"date"===F?(0,s().gE)(Z)?(0,pe.jsx)(gt,{context:p,propertyFilter:t,schema:o,onChange:r,parentStore:n,userCanConfigureFilters:a,onDelete:d,onAddToCombinatorFilter:u,onClose:h,allowRelativeDateFilter:m,dateFilterPopupStore:y,dateRangeFilterPopupStore:S,filter:Z}):null:"file"===F?(0,s().W6)(Z)?(0,pe.jsx)(Ct,{onChange:r,propertyFilter:t,schema:o,parentStore:n,userCanConfigureFilters:a,onDelete:d,onAddToCombinatorFilter:u,context:p,onClose:h,filter:Z}):null:"location"===F?(0,s().Mp)(Z)?(0,pe.jsx)(he,{filter:Z,parentStore:n,updateValue:e=>Ke(e,r,t),onClose:h,desktopTopActions:(0,pe.jsx)(Xe,{propertyFilter:t,onChange:r,schema:o,parentStore:n,userCanConfigureFilters:a,onDelete:d,onAddToCombinatorFilter:u,context:p}),mobileMenuTitle:(0,pe.jsx)($e,{propertyFilter:t,schema:o,context:p,onChange:r,parentStore:n}),mobileMoreActions:(0,pe.jsx)(et,{context:p,userCanConfigureFilters:a,onDelete:d,onAddToCombinatorFilter:u})}):null:"verification"===F?(0,s().Jw)(Z)?(0,pe.jsx)(dt,{context:p,onChange:r,propertyFilter:t,schema:o,parentStore:n,userCanConfigureFilters:a,onDelete:d,onAddToCombinatorFilter:u,onClose:h,menuListStore:v,filter:Z}):null:"geo_point"===F?null:void(0,M().t1)(F)}},893276:(e,t,o)=>{o.d(t,{Z:()=>r});o(667294);var n=o(785893);const r=function(e){const{collectionStore:t}=e,r=(0,o(142735).VK)((()=>t.getIcon()),[t]);return(0,n.jsxs)("div",{style:{display:"flex",columnGap:4,alignItems:"center"},children:[(0,n.jsx)(o(943620).Z,{disabled:!0,icon:r,isEmptyPage:!1,size:20}),(0,n.jsx)(o(384241).Z,{store:t,style:{maxWidth:180}})]})}},882292:(e,t,o)=>{o.d(t,{Z:()=>r});o(667294);var n=o(785893);const r=function(e){const t=((0,o(219727).O7)().device.isMobile,{width:16});return(0,n.jsx)("div",{style:t,children:e.icon(e.styles)})}},709917:(e,t,o)=>{o.d(t,{r_:()=>f,ZA:()=>x});o(667294);var n=()=>o(846550),r=()=>o(295617),i=()=>o(667067),l=()=>o(827282),a=o(785893);const s=(0,l().IU)("statusCompleteGroup",{viewBox:"0 0 17 17",svg:(0,a.jsx)("path",{d:"M8.54688 16.5078C13.0156 16.5078 16.6953 12.8281 16.6953 8.35938C16.6953 3.89844 13.0078 0.210938 8.53906 0.210938C4.07812 0.210938 0.398438 3.89844 0.398438 8.35938C0.398438 12.8281 4.07812 16.5078 8.54688 16.5078ZM8.54688 14.7188C5.02344 14.7188 2.19531 11.8828 2.19531 8.35938C2.19531 4.83594 5.01562 2 8.53906 2C12.0703 2 14.8984 4.83594 14.9062 8.35938C14.9141 11.8828 12.0703 14.7188 8.54688 14.7188ZM7.71094 12.0781C8.00781 12.0781 8.27344 11.9219 8.44531 11.6562L11.8828 6.32031C11.9922 6.14844 12.0781 5.95312 12.0781 5.77344C12.0781 5.35156 11.7109 5.07031 11.3125 5.07031C11.0547 5.07031 10.8281 5.21094 10.6562 5.49219L7.6875 10.2578L6.29688 8.51562C6.10938 8.27344 5.91406 8.17969 5.67188 8.17969C5.25781 8.17969 4.92188 8.50781 4.92188 8.92969C4.92188 9.125 5 9.30469 5.14062 9.48438L6.94531 11.6641C7.16406 11.9375 7.40625 12.0781 7.71094 12.0781Z"})}),c=(0,l().IU)("statusInProgressGroup",{viewBox:"0 0 17 17",svg:(0,a.jsx)("path",{d:"M8.54688 16.5078C13.0156 16.5078 16.6953 12.8281 16.6953 8.35938C16.6953 3.89844 13.0078 0.210938 8.53906 0.210938C4.07812 0.210938 0.398438 3.89844 0.398438 8.35938C0.398438 12.8281 4.07812 16.5078 8.54688 16.5078ZM8.54688 14.7188C5.02344 14.7188 2.19531 11.8828 2.19531 8.35938C2.19531 4.83594 5.01562 2 8.53906 2C12.0703 2 14.8984 4.83594 14.9062 8.35938C14.9141 11.8828 12.0703 14.7188 8.54688 14.7188ZM7.07031 11.4531L11.5938 8.80469C11.9297 8.60938 11.9219 8.125 11.5938 7.92969L7.07031 5.27344C6.71875 5.07031 6.26562 5.24219 6.26562 5.63281V11.0938C6.26562 11.4766 6.69531 11.6719 7.07031 11.4531Z"})}),d=(0,l().IU)("statusTodoGroup",{viewBox:"0 0 17 17",svg:(0,a.jsx)("path",{d:"M8.52344 1.85156C8.97656 1.85156 9.34375 1.49219 9.34375 1.05469C9.34375 0.609375 8.97656 0.234375 8.52344 0.234375C8.08594 0.234375 7.72656 0.609375 7.72656 1.05469C7.72656 1.48438 8.09375 1.85156 8.52344 1.85156ZM10.7969 2.21875C11.2422 2.21875 11.6094 1.85156 11.6094 1.41406C11.6094 0.960938 11.2422 0.601562 10.7969 0.601562C10.3516 0.601562 9.99219 0.960938 9.99219 1.41406C9.99219 1.85156 10.3516 2.21875 10.7969 2.21875ZM6.27344 2.21875C6.71094 2.21875 7.07812 1.85156 7.07812 1.41406C7.07812 0.960938 6.71094 0.601562 6.27344 0.601562C5.82812 0.601562 5.46094 0.960938 5.46094 1.41406C5.46094 1.85156 5.82812 2.21875 6.27344 2.21875ZM12.8359 3.25781C13.2812 3.25781 13.6484 2.89844 13.6484 2.45312C13.6484 2.00781 13.2812 1.64062 12.8359 1.64062C12.3984 1.64062 12.0312 2.00781 12.0312 2.45312C12.0312 2.89062 12.3984 3.25781 12.8359 3.25781ZM4.23438 3.25781C4.67188 3.25781 5.03906 2.89062 5.03906 2.45312C5.03906 2.00781 4.67969 1.64062 4.23438 1.64062C3.78906 1.64062 3.42188 2.00781 3.42188 2.45312C3.42188 2.89844 3.78906 3.25781 4.23438 3.25781ZM14.4609 4.88281C14.9062 4.88281 15.2734 4.51562 15.2734 4.07812C15.2734 3.63281 14.9062 3.26562 14.4609 3.26562C14.0234 3.26562 13.6562 3.63281 13.6562 4.07812C13.6562 4.51562 14.0234 4.88281 14.4609 4.88281ZM2.625 4.88281C3.0625 4.88281 3.42969 4.51562 3.42969 4.07812C3.42969 3.63281 3.0625 3.26562 2.625 3.26562C2.17969 3.26562 1.8125 3.63281 1.8125 4.07812C1.8125 4.51562 2.17969 4.88281 2.625 4.88281ZM15.4922 6.90625C15.9375 6.90625 16.3047 6.54688 16.3047 6.10156C16.3047 5.65625 15.9375 5.28906 15.4922 5.28906C15.0547 5.28906 14.6875 5.65625 14.6875 6.10156C14.6875 6.53906 15.0547 6.90625 15.4922 6.90625ZM1.59375 6.90625C2.02344 6.90625 2.39062 6.53906 2.39062 6.10156C2.39062 5.65625 2.03125 5.28906 1.59375 5.28906C1.14062 5.28906 0.78125 5.65625 0.78125 6.10156C0.78125 6.54688 1.14062 6.90625 1.59375 6.90625ZM15.8828 9.17188C16.3281 9.17188 16.6953 8.80469 16.6953 8.35938C16.6953 7.92188 16.3281 7.55469 15.8828 7.55469C15.4453 7.55469 15.0781 7.92188 15.0781 8.35938C15.0781 8.80469 15.4453 9.17188 15.8828 9.17188ZM1.21094 9.17188C1.64844 9.17188 2.01562 8.80469 2.01562 8.35938C2.01562 7.92188 1.64844 7.55469 1.21094 7.55469C0.765625 7.55469 0.398438 7.92188 0.398438 8.35938C0.398438 8.80469 0.765625 9.17188 1.21094 9.17188ZM15.4922 11.4375C15.9375 11.4375 16.3047 11.0703 16.3047 10.625C16.3047 10.1797 15.9375 9.82031 15.4922 9.82031C15.0547 9.82031 14.6875 10.1875 14.6875 10.625C14.6875 11.0703 15.0547 11.4375 15.4922 11.4375ZM1.59375 11.4375C2.03125 11.4375 2.39062 11.0703 2.39062 10.625C2.39062 10.1875 2.02344 9.82031 1.59375 9.82031C1.14062 9.82031 0.78125 10.1797 0.78125 10.625C0.78125 11.0703 1.14062 11.4375 1.59375 11.4375ZM14.4609 13.4609C14.9062 13.4609 15.2734 13.0938 15.2734 12.6484C15.2734 12.2109 14.9062 11.8438 14.4609 11.8438C14.0234 11.8438 13.6562 12.2109 13.6562 12.6484C13.6562 13.0938 14.0234 13.4609 14.4609 13.4609ZM2.625 13.4609C3.0625 13.4609 3.42969 13.0938 3.42969 12.6484C3.42969 12.2109 3.0625 11.8438 2.625 11.8438C2.17969 11.8438 1.8125 12.2109 1.8125 12.6484C1.8125 13.0938 2.17969 13.4609 2.625 13.4609ZM12.8359 15.0859C13.2812 15.0859 13.6484 14.7188 13.6484 14.2734C13.6484 13.8281 13.2812 13.4688 12.8359 13.4688C12.3984 13.4688 12.0312 13.8359 12.0312 14.2734C12.0312 14.7188 12.3984 15.0859 12.8359 15.0859ZM4.23438 15.0859C4.67969 15.0859 5.03906 14.7188 5.03906 14.2734C5.03906 13.8359 4.67188 13.4688 4.23438 13.4688C3.78906 13.4688 3.42188 13.8281 3.42188 14.2734C3.42188 14.7188 3.78906 15.0859 4.23438 15.0859ZM10.7969 16.125C11.2422 16.125 11.6094 15.7656 11.6094 15.3125C11.6094 14.875 11.2422 14.5078 10.7969 14.5078C10.3516 14.5078 9.99219 14.875 9.99219 15.3125C9.99219 15.7656 10.3516 16.125 10.7969 16.125ZM6.27344 16.125C6.71094 16.125 7.07812 15.7656 7.07812 15.3125C7.07812 14.875 6.71094 14.5078 6.27344 14.5078C5.82812 14.5078 5.46094 14.875 5.46094 15.3125C5.46094 15.7656 5.82812 16.125 6.27344 16.125ZM8.52344 16.4922C8.97656 16.4922 9.34375 16.1172 9.34375 15.6719C9.34375 15.2344 8.97656 14.875 8.52344 14.875C8.09375 14.875 7.72656 15.2422 7.72656 15.6719C7.72656 16.1172 8.08594 16.4922 8.52344 16.4922Z"})});var u=()=>o(788860),p=()=>o(261333),h=()=>o(998901),g=()=>o(396439),C=()=>o(654133);const x={[r().G1]:(0,a.jsx)(u()._H,{...r().ct.statusGroupNameTodo}),[r().Ho]:(0,a.jsx)(u()._H,{...r().ct.statusGroupNameInProgress}),[r().RW]:(0,a.jsx)(u()._H,{...r().ct.statusGroupNameComplete}),[r().Ap]:(0,a.jsx)(u()._H,{...p().sY.current}),[r().JV]:(0,a.jsx)(u()._H,{...p().sY.future})},m={[r().G1]:d,[r().Ho]:c,[r().RW]:s};function f(e){const{group:t,disableGroup:o,style:r,showIcon:l,showColor:s}=e,c=(0,n().Fg)(),u=m[t.name]??d,p=t.color??"gray";return(0,a.jsxs)("div",{style:{...r,display:"inline-flex",alignItems:"center"},children:[l&&u({display:"inline-block",width:16,height:16,fill:s?c.accentColors[p][400]:c.mediumIconColor}),(0,a.jsx)("span",{style:{paddingLeft:l?6:void 0,color:s?c.accentColors[p][500]:void 0},children:x[t.name]??t.name}),o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g().Z,{size:4}),(0,a.jsx)(C().Z,{placement:h().Placement.Bottom,render:e=>(0,a.jsx)("div",{...e,children:(0,i().Q)({width:12})}),renderTooltip:e=>(0,a.jsx)("div",{...e,children:o.tooltipCaption}),disableTooltip:void 0===o.tooltipCaption})]}):null]})}},296034:(e,t,o)=>{o.d(t,{Z:()=>i});var n=o(667294),r=o(785893);const i=function(e){let{firstDayOfWeek:t,value:i,selectValue:l=!0,onChange:a,onFocus:s,onBlur:c,disabledDays:d}=e;const u=(0,n.useMemo)((()=>new Date(i)),[i]),[p,h]=(0,n.useState)(u),g=(0,n.useRef)(i);(0,n.useLayoutEffect)((()=>{g.current!==i&&(h(new Date(i)),g.current=i)}),[i]);const C=(0,n.useCallback)(((e,t,o)=>{a(e.getTime())}),[a]);return(0,r.jsx)(o(933696).y,{locale:o(146947).locale,className:"notion-calendar-picker",numberOfMonths:1,weekStartsOn:t,modifiers:l?{value:u}:{},showOutsideDays:!0,fixedWeeks:!0,onDayClick:C,onMonthSelected:h,disabled:d,month:p,onDayBlur:c,onDayFocus:s})}},497459:(e,t,o)=>{o.d(t,{Z:()=>r});o(667294);var n=o(785893);const r=function(){return(0,n.jsx)(o(18748).ZP,{title:(0,n.jsx)(o(312578).Z,{})})}},542401:(e,t,o)=>{o.d(t,{Z:()=>u});var n=o(667294),r=o(111681),i=()=>o(374289),l=()=>o(568017),a=()=>o(154186),s=()=>o(654133),c=o(785893);function d(e,t){const{style:r,color:d,title:u,onClick:p,onDropdownClick:h,mainButtonTooltip:g,dropdownTooltip:C,icon:x,iconStyle:m,mainButtonStyle:f,className:v,disabled:y,disableDropdown:S}=e,{isMobile:j}=(0,o(219727).Fy)(),b=(0,o(846550).yK)((e=>({wrap:{position:"relative",display:"inline-flex",flexShrink:0,borderRadius:6,overflow:"hidden",height:28},mainButton:{display:"flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",borderTopLeftRadius:6,borderBottomLeftRadius:6,paddingLeft:8,paddingRight:8,fontWeight:o(707513).Ue.medium,..."blue"===d&&{background:l().ZP.blue,color:l().ZP.white},..."orange"===d&&{background:"dark"===e.mode?e.accentColors.orange[100]:e.accentColors.orange[50],color:"dark"===e.mode?e.accentColors.orange[600]:e.accentColors.orange[400]},...f},dropdownButton:{display:"flex",alignItems:"center",justifyContent:"center",width:j?28:24,alignSelf:"stretch",borderTopRightRadius:6,borderBottomRightRadius:6,..."blue"===d&&{background:l().ZP.blue,color:l().ZP.white,boxShadow:`inset 1px 0 0 ${e.darkDividerColor}`},..."orange"===d&&{background:"dark"===e.mode?e.accentColors.orange[100]:e.accentColors.orange[50],color:e.accentColors.orange[400],boxShadow:"dark"===e.mode?`${e.accentColors.orange[300]} 1px 0 0 inset`:`${e.accentColors.orange[200]} 1px 0 0 inset`}},dropdownButtonIcon:{width:10,marginTop:2,..."blue"===d&&{fill:l().ZP.white},..."orange"===d&&{fill:"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400]}},buttonHoveredStyle:{..."blue"===d&&{background:e.blueButtonHoveredBackground},..."orange"===d&&{background:"dark"===e.mode?e.accentColors.orange[200]:e.accentColors.orange[100]}},buttonPressedStyle:{..."blue"===d&&{background:e.blueButtonPressedBackground},..."orange"===d&&{background:"dark"===e.mode?e.accentColors.orange[300]:e.accentColors.orange[200]}},icon:{width:12,marginRight:6,..."blue"===d&&{fill:l().ZP.white},..."orange"===d&&{fill:e.accentColors.orange[400]},...m},border:{position:"absolute",pointerEvents:"none",borderRadius:6,top:0,left:0,right:0,bottom:0,..."orange"===d&&!y&&{boxShadow:"dark"===e.mode?`${e.accentColors.orange[300]} 0px 0px 0px 1px inset`:`${e.accentColors.orange[200]} 0px 0px 0px 1px inset`}}})),[d,f,j,m,y]),F=(0,n.useMemo)((()=>g?(0,c.jsx)(s().Z,{renderTooltip:()=>g,render:e=>(0,c.jsxs)(a().Z,{ref:t,style:b.mainButton,onClick:p,disabled:y,disabledFeedback:!0,hoveredStyle:b.buttonHoveredStyle,pressedStyle:b.buttonPressedStyle,...e,children:[x&&x(b.icon),u]})}):(0,c.jsxs)(a().Z,{ref:t,style:b.mainButton,onClick:p,disabled:y,disabledFeedback:!0,hoveredStyle:b.buttonHoveredStyle,pressedStyle:b.buttonPressedStyle,children:[x&&x(b.icon),u]})),[g,t,b.mainButton,b.buttonHoveredStyle,b.buttonPressedStyle,b.icon,p,y,x,u]),k=(0,n.useMemo)((()=>S||y?null:C?(0,c.jsx)(s().Z,{renderTooltip:()=>C,render:e=>(0,c.jsx)(a().Z,{ref:t,style:b.dropdownButton,onClick:h,disabledFeedback:!0,hoveredStyle:b.buttonHoveredStyle,pressedStyle:b.buttonPressedStyle,...e,children:(0,i().i)(b.dropdownButtonIcon)})}):(0,c.jsx)(a().Z,{ref:t,style:b.dropdownButton,onClick:h,disabledFeedback:!0,hoveredStyle:b.buttonHoveredStyle,pressedStyle:b.buttonPressedStyle,children:(0,i().i)(b.dropdownButtonIcon)})),[S,y,C,h,t,b.buttonHoveredStyle,b.buttonPressedStyle,b.dropdownButton,b.dropdownButtonIcon]);return(0,c.jsxs)("div",{style:{...b.wrap,...r},className:v,children:[F,k,(0,c.jsx)("div",{style:b.border})]})}const u=n.memo(n.forwardRef(d),r.wU)},246471:(e,t,o)=>{o.d(t,{F:()=>d,a:()=>c});o(667294);var n=()=>o(846550),r=()=>o(568017),i=()=>o(707513),l=()=>o(827618),a=()=>o(78014),s=o(785893);function c(e){const{value:t,color:o,format:c,showEllipsis:d,onClickRemove:u,showRemoveButton:p,isSingle:h,shouldShrink:g,hideTooltip:C,description:x,tooltipPlacement:m,...f}=e,v=(0,n().Fg)(),y=(0,n().yK)((e=>({token:{...d&&i().Yu}})),[d]),{textColor:S,backgroundColor:j}=(0,r().KR)(v,o);return t?(0,s.jsx)(a().Z,{format:c,value:(0,s.jsx)(l().Z,{children:t}),description:x,onClickRemove:u,showRemoveButton:p,isSingle:h,color:S,backgroundColor:j,shouldShrink:g,tooltipPlacement:m,showTooltip:C?"never":"overflow",style:y.token,...f}):null}function d(e){const{value:t,color:o,format:c,showEllipsis:d,onClickRemove:u,showRemoveButton:p,isSingle:h,shouldShrink:g,groupColor:C,tooltipPlacement:x,description:m,hideTooltip:f,...v}=e,y=(0,n().Fg)(),S=(0,n().yK)((()=>({token:{...d&&i().Yu}})),[d]);if(!t)return null;const{textColor:j,backgroundColor:b}=(0,r().KR)(y,o??C??"gray");let F;return F=o||(C||"gray"),(0,s.jsx)(a().Z,{format:c,value:(0,s.jsx)(l().Z,{children:t}),description:m,onClickRemove:u,showRemoveButton:p,isSingle:h,color:j,backgroundColor:b,shouldShrink:g,showTooltip:f?"never":"overflow",style:S.token,isRound:!0,showColoredDot:F,tooltipPlacement:x,...v})}},421619:(e,t,o)=>{o.d(t,{S:()=>k,Z:()=>F});o(670560),o(267602),o(653476),o(228244);var n=o(667294),r=()=>o(219727),i=()=>o(142735),l=()=>o(846550),a=()=>o(455947),s=()=>o(38883),c=()=>o(556392),d=()=>o(788860),u=()=>o(513670),p=()=>o(250303),h=()=>o(576868),g=()=>o(352230),C=()=>o(709917),x=()=>o(827973),m=()=>o(715139),f=()=>o(198829),v=()=>o(255577),y=()=>o(470386),S=()=>o(388284),j=()=>o(246471),b=o(785893);function F(e){const{propertyFilter:t,schema:o,filter:s,parentStore:C,updateValue:m,onClose:j,desktopTopActions:F,mobileMenuTitle:w,mobileMoreActions:Z,collectionContextStore:M}=e,T=(0,r().O7)(),R=(0,r().Fy)(),[P,V]=(0,n.useState)([]),[A,_]=(0,n.useState)(!1),B=(0,i().VK)((()=>(0,h().tJ)(o,t,C)),[o,t,C]),D=(0,l().yK)((e=>({checkboxIcon:{fill:e.regularIconColor}})),[]),I=(0,i().VK)((()=>(0,a().vR)(s)?(0,a().wB)(s):[]),[s]),H=(0,i().VK)((()=>{if(!B||"status"!==B.type)return[];const e=B.options??[],t=null==M?void 0:M.collectionStoreResultsInViewOrder();return!A&&t?e.filter((e=>t.some((t=>{var o;return null===(o=e.collectionIds)||void 0===o?void 0:o.includes(t.id)})))):e}),[B,A,M]),L=(0,i().VK)((()=>{if(!B||"status"!==B.type)return[];const e=[],t=B.groups??[],o=B.options??[];for(const n of t){const t=(0,h().IX)({group:n,options:o,filterValues:I});if("partial"!==t.groupCheckState)continue;const r=o.filter((e=>{var t;return null===(t=n.optionIds)||void 0===t?void 0:t.includes(e.id)})).filter((e=>t.optionCheckedInfo.get(e.id)));e.push(...r)}return e}),[B,I]),O=(0,i().VK)((()=>{if(!B||"status"!==B.type)return[];const e=B.options??[];return P?e.filter((e=>!P.some((t=>t.id===e.id)))):[]}),[B,P]);(0,n.useEffect)((()=>{V((()=>u().mN([...H,...P,...L],"id")))}),[H]);const K=(0,i().VK)((()=>B&&"status"===B.type?k({propertySchema:B,statusFilterValues:I,updateValue:m,isMobile:R.isMobile,styles:{checkboxIcon:D.checkboxIcon},visibleOptions:P,shouldShowHiddenSources:A,setShouldShowHiddenSources:_}):[]),[R.isMobile,B,D.checkboxIcon,m,P,A,_,I]);if(!B||"status"!==B.type)return null;const W=(0,b.jsx)(S().Z,{desktopStyle:{paddingBottom:0},children:!R.isMobile&&F});let U;U=R.isMobile?{menuType:g().o.Modal,title:w,left:Z,right:(0,b.jsx)(y().DoneMenuText,{}),onClickRight:j,header:W}:{menuType:g().o.Popup,maxHeight:a().ot,width:260,header:W,disableHeaderBorder:!0,tokenInputHeader:!0};const q=(0,b.jsx)(v().ZP,{type:v().iW.Vertical,initialFocus:0,sections:[{key:"groups",items:K,render:e=>(0,b.jsx)(S().Z,{...e,title:"",style:{paddingTop:0}})}]}),z=O&&O.length>0&&!A?(0,b.jsx)(S().Z,{topBorder:!0,children:(0,b.jsx)(x().Z,{icon:(0,c().T)({width:13,height:13}),title:(0,b.jsx)(d()._H,{id:"collectionFilterValueMenu.statusFilterValueMenu.hiddenStatusOptionsDescription",defaultMessage:"{numHiddenOptions, plural, one {{numHiddenOptions} other status option} other {{numHiddenOptions} other status options}}",values:{numHiddenOptions:O.length}}),focused:!1,onClick:()=>{_(!0),M&&p().wd({environment:T,collectionContextStore:M,action:"expand_property_filter",original_view_type:void 0,property_type:"status"})}})}):null,G=(0,b.jsx)(S().Z,{topBorder:!0,children:(0,b.jsx)(x().Z,{title:(0,b.jsx)(d()._H,{defaultMessage:"Clear selection",id:"database.filterValue.selectType.clearSelection.message"}),focused:!1,onClick:()=>{m([])}})});return(0,b.jsx)(f().Z,{...U,children:(0,a().vR)(s)&&(0,b.jsxs)(b.Fragment,{children:[q,z,G]})})}function k(e){const{propertySchema:t,statusFilterValues:o,updateValue:n,isMobile:r,styles:i,visibleOptions:l,shouldShowHiddenSources:a}=e,c=t.groups??[],d=t.options??[],u=[];for(const p of c){const e=()=>{const e=(0,h().CN)(c,d,o,{type:"is_group",value:p.name});e&&n(e)},t=(0,h().IX)({group:p,options:d,filterValues:o}),g=d.filter((e=>{var t;return(null===(t=p.optionIds)||void 0===t?void 0:t.includes(e.id))&&(a||(null==l?void 0:l.some((t=>t.id===e.id))))})),f=[];for(const l of g){const e=()=>{const e=(0,h().CN)(c,d,o,{type:"is_option",value:l.value});e&&n(e)};f.push({key:`option-${l.id}`,action:e,render:o=>(0,b.jsx)(x().Z,{...o,icon:(0,b.jsx)(m().Z,{checked:t.optionCheckedInfo.get(l.id)??!1,size:14,onClick:e,style:i.checkboxIcon}),title:(0,b.jsx)(j().F,{format:r?s().lo.Large:s().lo.Medium,isSingle:!0,value:l.value,color:l.color,showRemoveButton:!1,groupColor:p.color}),style:{paddingLeft:16}})})}u.push({key:`group-${p.id}`,action:e,render:o=>(0,b.jsx)(x().Z,{...o,icon:(0,b.jsx)(m().Z,{checked:t.groupCheckState,size:14,onClick:e,style:i.checkboxIcon}),title:(0,b.jsx)(C().r_,{style:{fontWeight:500,marginTop:2},group:p,showIcon:!0,showColor:!0}),textWrapperStyle:{marginLeft:3}})},...f)}return u}},946444:(e,t,o)=>{o.d(t,{m:()=>i});var n=()=>o(996106),r=()=>o(749826);function i(e,t){return(0,n().p3)(e,r().default.checkGate({gateName:"localized_parse_number"})?t:void 0)}},114066:(e,t,o)=>{o.d(t,{H:()=>r});o(667294);var n=o(785893);const r=(0,o(827282).IU)("copyPadded",{viewBox:"0 0 24 24",svg:(0,n.jsx)("path",{d:"M4.89062 18.5107C4.89062 19.9873 5.64941 20.7529 7.1123 20.7529H13.5107C14.9736 20.7529 15.7256 19.9805 15.7256 18.5107V17.2461H16.8877C18.3506 17.2461 19.1094 16.4805 19.1094 15.0039V9.58984C19.1094 8.69434 18.9248 8.12012 18.3848 7.56641L14.9736 4.09375C14.4609 3.56738 13.8525 3.36914 13.0664 3.36914H10.4893C9.0332 3.36914 8.26758 4.13477 8.26758 5.61133V6.86914H7.1123C5.64941 6.86914 4.89062 7.6416 4.89062 9.11133V18.5107ZM15.042 11.3262L11.3369 7.55957C10.8105 7.02637 10.3662 6.88281 9.60742 6.87598V5.68652C9.60742 5.05762 9.94238 4.70898 10.6055 4.70898H13.4629V7.97656C13.4629 8.82422 13.9141 9.26172 14.7549 9.26172H17.7695V14.9219C17.7695 15.5576 17.4414 15.9062 16.7715 15.9062H15.7256V13.2539C15.7256 12.3311 15.6162 11.9072 15.042 11.3262ZM14.584 7.80566V5.2627L17.4209 8.14062H14.9189C14.6865 8.14062 14.584 8.04492 14.584 7.80566ZM6.23047 18.4287V9.19336C6.23047 8.56445 6.55859 8.20898 7.22168 8.20898H9.32031V11.9551C9.32031 12.9326 9.80566 13.4111 10.7764 13.4111H14.3857V18.4287C14.3857 19.0645 14.0576 19.4131 13.3945 19.4131H7.22168C6.55859 19.4131 6.23047 19.0645 6.23047 18.4287ZM10.9062 12.2285C10.626 12.2285 10.5029 12.1055 10.5029 11.8252V8.46875L14.2012 12.2285H10.9062Z"})})},185056:(e,t,o)=>{o.d(t,{Q:()=>r});o(667294);var n=o(785893);const r=(0,o(827282).IU)("filter",{viewBox:"0 0 16 16",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 4C2 3.58579 2.33579 3.25 2.75 3.25H13.25C13.6642 3.25 14 3.58579 14 4C14 4.41421 13.6642 4.75 13.25 4.75H2.75C2.33579 4.75 2 4.41421 2 4Z"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.75 8C3.75 7.58579 4.08579 7.25 4.5 7.25H11.5C11.9142 7.25 12.25 7.58579 12.25 8C12.25 8.41421 11.9142 8.75 11.5 8.75H4.5C4.08579 8.75 3.75 8.41421 3.75 8Z"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.5 12C5.5 11.5858 5.83579 11.25 6.25 11.25H9.75C10.1642 11.25 10.5 11.5858 10.5 12C10.5 12.4142 10.1642 12.75 9.75 12.75H6.25C5.83579 12.75 5.5 12.4142 5.5 12Z"})]})})},627316:(e,t,o)=>{o.d(t,{N:()=>r});o(667294);var n=o(785893);const r=(0,o(827282).IU)("save",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M7.99316 10.8877C7.8291 10.8877 7.67871 10.833 7.52148 10.6758L5.22461 8.46094C5.1084 8.34473 5.04004 8.22168 5.04004 8.05762C5.04004 7.74316 5.29297 7.51074 5.60059 7.51074C5.75781 7.51074 5.92188 7.5791 6.03125 7.70215L6.98828 8.7207L7.43262 9.22656L7.36426 8.20801V1.11914C7.36426 0.78418 7.65137 0.49707 7.99316 0.49707C8.3418 0.49707 8.62891 0.78418 8.62891 1.11914V8.20801L8.56055 9.21973L8.99805 8.7207L9.96191 7.70215C10.0713 7.5791 10.2285 7.51074 10.3857 7.51074C10.6934 7.51074 10.9463 7.74316 10.9463 8.05762C10.9463 8.22168 10.8848 8.34473 10.7686 8.46094L8.47168 10.6758C8.31445 10.833 8.16406 10.8877 7.99316 10.8877ZM4.0625 15.3174C2.58594 15.3174 1.82031 14.5586 1.82031 13.1025V6.36914C1.82031 4.91309 2.58594 4.1543 4.0625 4.1543H6.04492V5.49414H4.14453C3.50879 5.49414 3.16016 5.82227 3.16016 6.48535V12.9863C3.16016 13.6494 3.50879 13.9775 4.14453 13.9775H11.8486C12.4775 13.9775 12.833 13.6494 12.833 12.9863V6.48535C12.833 5.82227 12.4775 5.49414 11.8486 5.49414H9.94824V4.1543H11.9307C13.4072 4.1543 14.1729 4.91309 14.1729 6.36914V13.1025C14.1729 14.5586 13.4072 15.3174 11.9307 15.3174H4.0625Z"})})}}]);