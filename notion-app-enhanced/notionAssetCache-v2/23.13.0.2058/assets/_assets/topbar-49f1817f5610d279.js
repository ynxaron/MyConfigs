"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[28407],{972544:(e,t,n)=>{n.d(t,{S:()=>i,Z:()=>a});var o=n(667294),r=n(785893);const i=8;function s(e,t){let{isSelected:o}=e;const{radioButtonStyle:s,dotStyle:a}=(0,n(846550).yK)((e=>({radioButtonStyle:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:16,height:16,borderRadius:16,marginRight:i,background:o?e.blueColor:e.whiteButtonBackground,border:o?"none":`1px solid ${e.radioButtonBorder}`,transition:"background 100ms ease-out"},dotStyle:{width:6,height:6,borderRadius:6,background:e.regularInvertedTextColor,transition:"opacity 100ms ease-out",opacity:o?1:0}})),[o]);return(0,r.jsx)("div",{ref:t,style:s,children:(0,r.jsx)("div",{style:a})})}const a=o.forwardRef(s)},801142:(e,t,n)=>{n.r(t),n.d(t,{TopbarSubmitPostButton:()=>y});var o=n(667294),r=()=>n(219727),i=()=>n(142735),s=()=>n(846550),a=()=>n(161002),l=()=>n(788860),d=()=>n(707513),c=()=>n(497065),u=()=>n(239482),p=()=>n(45334),m=()=>n(424629),f=()=>n(774172),g=()=>n(620358),h=()=>n(154186),v=()=>n(906651),b=n(785893);function y(e){const{store:t}=e,n=(0,r().O7)(),y=(0,r().Fy)(),S=(0,o.useCallback)((()=>{if(!t)return;const e=(0,u().VP)(t);e&&c().c4({environment:n,url:(0,a().y)({teamId:e.id})})}),[n,t]),x=(0,o.useCallback)((()=>{p().b({environment:n,draftPostStore:t,onSubmitPost:S})}),[n,t,S]),C=(0,o.useCallback)((()=>{t&&(0,f().g)(t)?g().Z.setState({isOpen:!0}):x()}),[t,x]),_=(0,i().VK)((()=>g().Z.state.isOpen),[]),k=(0,s().yK)((e=>({postButtonMobile:{display:"flex",alignItems:"center",height:32,paddingLeft:12,paddingRight:12,marginRight:16,fontWeight:d().Ue.medium,color:e.text.primary,background:e.tint.regular,borderRadius:16},postButtonDesktop:{marginLeft:2},iconButton:{marginLeft:16,background:e.tint.regular,borderRadius:16,width:32,height:32},rightButtons:{display:"flex",alignItems:"center"}})),[]);return(0,b.jsxs)(b.Fragment,{children:[y.isMobile?(0,b.jsx)(h().Z,{onClick:C,style:k.postButtonMobile,children:(0,b.jsx)(l()._H,{id:"posts.postButton.label",defaultMessage:"Post"})}):(0,b.jsx)(v().Z,{onClick:C,style:k.postButtonDesktop,children:(0,b.jsx)(l()._H,{id:"posts.postButton.label",defaultMessage:"Post"})}),(0,b.jsx)(m().Z,{postStore:t,isOpen:_,onDismiss:()=>g().Z.setState({isOpen:!1}),onConfirm:()=>{g().Z.setState({isOpen:!1}),x()}})]})}},45334:(e,t,n)=>{n.d(t,{b:()=>h});n(670560),n(429830),n(267602),n(241792),n(228244);var o=()=>n(481529),r=()=>n(728670),i=()=>n(528514),s=()=>n(933868),a=()=>n(255933),l=()=>n(421654),d=()=>n(332542),c=()=>n(269299),u=()=>n(205228),p=()=>n(872308),m=()=>n(774172),f=()=>n(20825),g=()=>n(594546);function h(e){const{environment:t,draftPostStore:n,onSubmitPost:s}=e,h=t.currentUser.id;n&&h&&(n.isPublishedPost()||(function(e){const{environment:t,postStore:n}=e;c().createAndCommit({environment:t,perform:e=>(n.getContentStores().toReversed().some((t=>{if(!(0,m().y)(t))return!0;d().hr({childStore:t,parentStore:n,transaction:e})})),n),userAction:"PostChannel.trimPostDraft",canUndo:!1})}({environment:t,postStore:n}),function(e){const{environment:t,blockToDuplicateStore:n,userId:s}=e;if(!n.isDefined())return;const m=(0,r().DW)(n.getParentPointer(),n.getRecordModel),f=(0,i().Wo)(m).map((e=>({...e,role:v(e.role,"comment_only")})));f.push({type:"restricted_permission"}),f.push({type:"user_permission",user_id:s,role:"editor"}),c().createAndCommit({environment:t,perform:e=>{const[[r],i]=p().duplicateBlock({environment:t,stores:[n],addCopyName:!1,transaction:e,deepCopyTransclusionContainers:!1,resolveTemplateVariables:!1,targetSpaceId:n.getSpaceId(),baseUrl:u().default.domainBaseUrl,publicDomainName:u().default.publicDomainName,preferDuplicateLocation:"local",createActivities:!0});return c().applyOperation({store:r,operation:o().op.update({pointer:r.pointer,path:[],args:{alive:!0,parent_id:n.getParentId(),parent_table:n.getParentTable(),permissions:f,created_time:Date.now(),last_edited_time:Date.now()}}),transaction:e}),l().FH({stores:[r],update:{draft_status:"published"},transaction:e}),c().applyOperation({store:n,operation:o().op.update({pointer:n.pointer,path:[],args:{alive:!1}}),transaction:e}),e.postSubmitCallbacks.push((()=>i.then((()=>c().createAndCommit({environment:t,perform:e=>(l().FH({stores:[r],update:{draft_status:"published"},transaction:e}),d().zo({blockStore:n,transaction:e}),c().applyOperation({store:n,operation:o().op.update({pointer:n.pointer,path:[],args:{parent_id:n.getSpaceId(),parent_table:a().bx,permissions:[{type:"restricted_permission"}]}}),transaction:e}),n),userAction:"PostChannel.cleanupDraft",canUndo:!1}))))),r},userAction:"PostChannel.publishDraft",canUndo:!1}).performResult}({environment:t,blockToDuplicateStore:n,userId:h}),null==s||s(),f().Z.setState({isOpen:!1}),function(e,t){(0,g().j)({environment:e,event:{eventName:"post_created",eventProperties:t}})}(t,{block_id:n.id,parent_collection_id:n.getParentId()})))}function v(e,t){if(!e)return e;const n="string"==typeof e&&e in s().xm?s().xm[e]:void 0;if(!n)return e;return n>s().xm[t]?t:e}},424629:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(667294),r=()=>n(788860),i=n(785893);function s(e){const t=(0,n(142735).VK)((()=>{if(!e.postStore)return 0;const t=(0,n(239482).tM)(e.postStore);return t?null==t?void 0:t.getRawMembership().length:0}),[e.postStore]);return(0,i.jsx)(n(708518).Z,{open:e.isOpen,onDismiss:e.onDismiss,render:()=>(0,i.jsx)(n(543631).ZP,{icon:n(396820).D,title:(0,i.jsx)(r()._H,{id:"posts.confirmMentionEveryoneModal.title",defaultMessage:"Notify {sizeOfTeam} people?",values:{sizeOfTeam:t}}),subtitle:(0,i.jsx)(r()._H,{id:"posts.confirmMentionEveryoneModal.subtitle",defaultMessage:"Using @everyone notifies everyone in the teamspace. Are you sure you want to send this?"}),confirmText:(0,i.jsx)(r()._H,{id:"posts.confirmMentionEveryoneModal.confirmText",defaultMessage:"Send"}),cancelText:(0,i.jsx)(r()._H,{id:"posts.confirmMentionEveryoneModal.cancelText",defaultMessage:"Edit message"}),confirmTextStyle:"red",radioOptions:[],onDismiss:e.onDismiss,onConfirm:e.onConfirm})})}const a=o.memo(s)},774172:(e,t,n)=>{n.d(t,{g:()=>i,y:()=>r});n(267602),n(749411);var o=()=>n(955620);function r(e){return!e.isTransclusionType()&&!e.isCollectionView()&&!e.hasContent()&&e.isEmptyTitle()}function i(e){const t=(0,o().y2U)(e.getTitleValue()),n=e.getContentStores().flatMap((e=>(0,o().y2U)(e.getTitleValue())));return t.length>0||n&&n.length>0}},620358:(e,t,n)=>{n.d(t,{Z:()=>r});class o extends(()=>n(263184))().default{getInitialState(){return{isOpen:!1}}}const r=new o},20825:(e,t,n)=>{n.d(t,{Z:()=>r});class o extends(()=>n(263184))().default{getInitialState(){return{isOpen:!1,blockStore:void 0}}}const r=new o},469203:(e,t,n)=>{n.d(t,{s:()=>c});var o=n(667294),r=()=>n(219727),i=()=>n(846550),s=()=>n(707513),a=()=>n(654133);var l=()=>n(998901),d=n(785893);function c(e){let{children:t,style:n,tooltipStyle:c,placement:u=l().Placement.Bottom}=e;const{isSafari:p}=(0,r().Fy)(),m=(0,o.useRef)(null),f=function(e){const[t,n]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{const{current:t}=e;if(!t)return void n(!1);const o="ResizeObserver"in window?new ResizeObserver((e=>{let[t]=e;n(t.target.scrollWidth>t.target.clientWidth)})):void 0;return null==o||o.observe(t),()=>null==o?void 0:o.unobserve(t)}),[]),t}(m),g=(0,i().yK)((()=>({overflowText:{...s().Yu,...n}})),[n]);return(0,d.jsx)(a().Z,{delayThreshold:500,placement:u,textWrap:!0,style:c,forceVisibleState:!(p||!f)&&void 0,renderTooltip:()=>f?t:void 0,render:e=>(0,d.jsx)("div",{ref:m,style:g.overflowText,...e,children:t})})}},396820:(e,t,n)=>{n.d(t,{D:()=>r});n(667294);var o=n(785893);const r=(0,n(827282).IU)("megaphone",{viewBox:"0 0 64 64",svg:(0,o.jsx)("path",{d:"m54,10v40h-4l-20-10h-4l4,16h-10l-4-16c-4.94,0-8-3.06-8-8v-4c0-4.94,3.06-8,8-8h14l20-10h4Z"})})},429830:(e,t,n)=>{var o=n(79989),r=n(826166),i=n(165290),s=n(87370),a=Array;o({target:"Array",proto:!0},{toReversed:function(){return r(i(this),a)}}),s("toReversed")}}]);