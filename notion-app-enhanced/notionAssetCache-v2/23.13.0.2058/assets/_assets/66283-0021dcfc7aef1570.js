"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[66283],{8881:(e,t,o)=>{o.d(t,{Z:()=>m});var n=o(667294),i=()=>o(142735),l=()=>o(528514),r=()=>o(788860),s=()=>o(308186),a=()=>o(784234),d=()=>o(877807),c=()=>o(421797),u=()=>o(239482),g=()=>o(67961),p=o(785893);const m=function(e){let{store:t}=e;const m=(0,o(846550).Fg)(),v=(0,o(219727).O7)(),b=(0,n.useMemo)((()=>({environment:v,blocks:[t],publicEditMode:void 0})),[v,t]),f=(0,i().VK)((()=>c().xDy([c().Xa0,c().ffD(c().J5S)])(b)),[b]),h=(0,i().VK)((()=>c().xDy([c().c2G,c().ffD(c().zzA)])(b)),[b]);if(f){const{device:e}=v;return(0,p.jsx)("div",{style:{backgroundColor:m.sidebarSecondaryBackground,boxShadow:`0 -1px 0 ${m.regularDividerColor}`,marginTop:e.isMobile?28:1},children:(0,p.jsxs)(o(154186).Z,{disabled:!h,style:{padding:12},onClick:()=>async function(e,t){if(!e.isDefined())return;const o=e.getPermissionItems(),n=u().Om(e),i=n?l().Wo(u().fJ(n)):[],c=l().Xr(e.getModel(),o,i),g={type:"restore",permissionChanges:c},{accept:m}=await s().gt({message:(0,d().mX)(g),acceptLabel:(0,d().nH)(g),cancelLabel:(0,p.jsx)(r()._H,{id:"restrictedPermissionConfirmationModal.actionButton.close",defaultMessage:"Close"}),description:(0,p.jsx)(d().mo,{openState:g})});m&&a().hs({environment:t,store:e})}(t,v),children:[(0,p.jsx)(g().Z,{isMultiline:!0,isSmall:!0,children:(0,p.jsx)(r()._H,{id:"blockMenuRestrictedMessage.label",defaultMessage:"You don’t have permission to edit this block because it is restricted."})}),h&&(0,p.jsx)(g().Z,{style:{marginTop:6,fontWeight:o(707513).Ue.semibold},children:(0,p.jsx)(r()._H,{id:"blockMenuRestrictedMessage.adminRestoreAction.label",defaultMessage:"Restore permissions"})})]})})}return null}},985523:(e,t,o)=>{o.d(t,{B:()=>M,y:()=>x});o(267602),o(731107),o(667294);var n=()=>o(146947),i=()=>o(219727),l=()=>o(142735),r=()=>o(846550),s=()=>o(816512),a=()=>o(646574),d=()=>o(788860),c=()=>o(871953),u=()=>o(641702),g=()=>o(527278),p=()=>o(466970),m=()=>o(998901),v=()=>o(964118),b=()=>o(18748),f=()=>o(388284),h=()=>o(654133),y=()=>o(67961),C=()=>o(912826),S=o(785893);function x(e){let{isPageMoreButton:t,hideTopBorder:o,store:n,wordCountStores:a,showWordCount:c,shouldRenderMobileRefresh:u}=e;const p=(0,l().VK)((()=>M(n)),[n]),{device:x}=(0,i().O7)(),w=(0,l().VK)((()=>x.isPhone),[x]),R=g().Z.getIntl(),B=(0,r().yK)((()=>({menuItem:{paddingTop:w?8:o?0:6,paddingBottom:w?8:16}})),[o,w]);return p&&!p.canAccess?null:(0,S.jsx)(f().Z,{topBorder:!t&&!o,style:{paddingTop:t?0:8,paddingBottom:t?0:8},shouldRenderMobileRefresh:u,children:(0,S.jsx)(b().ZP,{style:p?void 0:B.menuItem,shouldWrapTitle:!0,shouldRenderMobileRefresh:u,title:p?(0,S.jsx)(h().Z,{placement:m().Placement.Right,render:e=>(0,S.jsxs)("div",{...e,children:[c&&(0,S.jsx)(y().Z,{isSmall:!0,isSecondaryColor:!0,isMobile:x.isPhone,isMultiline:!0,style:{marginBottom:4,marginTop:8},children:(0,S.jsx)(d()._H,{id:"pageMoreButton.wordCount.caption",defaultMessage:"Word count: {count}",values:{count:(0,S.jsx)(C().Z,{store:n})}})}),a&&(0,S.jsx)(k,{stores:a}),(0,S.jsx)(y().Z,{isSmall:!0,isSecondaryColor:!0,isMobile:x.isPhone,isMultiline:!0,style:{marginBottom:4},children:(0,S.jsx)(d()._H,{id:"blockAuthorInfo.label",defaultMessage:"Last edited by {author}",values:{author:p.lastEditedBy.asActor?(0,s().$4)(R,p.lastEditedBy):void 0}})}),(0,S.jsx)(y().Z,{isSmall:!0,isSecondaryColor:!0,isMobile:x.isPhone,style:{marginBottom:c?8:0},children:p.lastEditedTime})]}),renderTooltip:()=>(0,S.jsx)(v().Z,{store:n,compactFormat:!0})}):void 0,loading:!p})})}function M(e){const t=e.getCreatedByPointer(),o=e.getCreatedTime(),i=e.getLastEditedByPointer(),l=e.getLastEditedTime(),r=g().Z.getIntl();if(!e.canRead())return{canAccess:!1};if(t&&o&&l&&i){const s=(0,c().ue)({parentStore:e,pointer:t}),d=(0,a().$b)(o,n().locale,r),u=(0,c().ue)({parentStore:e,pointer:i}),g=(0,a().$b)(l,n().locale,r);if(!u)return;return{canAccess:!0,createdBy:s,createdTime:d,lastEditedBy:u,lastEditedTime:g}}}function k(e){const{stores:t}=e,o=(0,p().E)("selectable_word_count"),n=(0,l().VK)((()=>o?w(t):0),[o,t]);return o?(0,S.jsx)(y().Z,{isSmall:!0,isSecondaryColor:!0,style:{marginBottom:4},children:(0,S.jsx)(d()._H,{id:"blockMetadataMenuItem.wordCount",defaultMessage:"{count, plural, one {# word} other {# words}}",values:{count:n}})}):null}function w(e){return e.reduce(((e,t)=>{const o=(0,u().Xh)(t.getTitleValue(),t);return e+(0,u().WF)(o)+w(t.getContentStores())}),0)}},912826:(e,t,o)=>{o.d(t,{Z:()=>s});var n=o(667294),i=()=>o(788860),l=()=>o(768055),r=o(785893);function s(e){const t=(0,n.useMemo)((()=>(0,l().W)(e.store)),[e.store]);return(0,r.jsx)(i()._H,{id:"pageWordCount.wordCount",defaultMessage:"{count, plural, one {# word} other {# words}}",values:{count:t}})}},860489:(e,t,o)=>{o.d(t,{ZP:()=>x,hm:()=>w});o(267602),o(470928);var n=o(667294),i=()=>o(219727),l=()=>o(142735),r=()=>o(846550),s=()=>o(956057),a=()=>o(788860),d=()=>o(491927),c=()=>o(269299),u=()=>o(539410),g=()=>o(540413),p=()=>o(191586),m=()=>o(852465),v=()=>o(32969),b=()=>o(543934),f=()=>o(279386),h=()=>o(645805),y=()=>o(807230),C=o(785893);const S=(0,a().vU)({ariaLabelApple:{id:"block.selectableAddMenu.ariaLabel.apple",defaultMessage:"Click to add below. Option-click to add a block above"},ariaLabelWindows:{id:"block.selectableAddMenu.ariaLabel.windows",defaultMessage:"Click to add below. Alt-click to add a block above"}}),x=(0,n.forwardRef)((function(e,t){let{store:n,nodeRect:s,containerRect:d,selectable:c}=e;const u=(0,a().YB)(),g=(0,r().Fg)(),p=(0,i().O7)(),m=(0,i().MO)(),v=(0,o(657320).l)(),b=(0,l().VK)((()=>{var e;return"editor"===n.getRole()||"read_and_write"===n.getRole()||"edit"===(null==v||null===(e=v.publicEditModeStore.state)||void 0===e?void 0:e.permission)}),[null==v?void 0:v.publicEditModeStore,n]),h=(0,l().VK)((()=>{var e,t;return"comment_only"===(null===(e=n.getNavigableBlockStore({skipCurrent:!0}))||void 0===e?void 0:e.getRole())||"comment"===(null==v||null===(t=v.publicEditModeStore.state)||void 0===t?void 0:t.permission)}),[null==v?void 0:v.publicEditModeStore,n]),x=(0,l().VK)((()=>"suggest"===f().MT.getMode(n)),[n]),R=(0,l().VK)((()=>n.isFirstBlockInCalloutV2Block()),[n]),B=(0,l().VK)((()=>{var e;const t="external_object_instance_page"===n.getType(),i=v&&(0,o(772529).Kj)(v.pageStore.id);return!m&&(!n.isNavigableAncestorNonEditableState()||"collection"===(null===(e=n.getParentStore())||void 0===e?void 0:e.table))&&(b||h&&x)&&!t&&!n.isNavigableAncestorExternallyImportedPage()&&!i&&!R}),[h,b,R,m,x,v,n]),j=(0,l().VK)((()=>{var e;return null===(e=n.getSpaceStore())||void 0===e?void 0:e.getFreezeSettings()}),[n]),T=(0,o(580215).M)(j);return!B||"active"===T?null:(0,C.jsx)(o(654133).Z,{placement:o(998901).Placement.Bottom,delayThreshold:300,renderTooltip:()=>(0,C.jsx)(k,{}),render:e=>(0,C.jsx)(o(154186).Z,{ref:t,disallowTabbing:!0,onClick:()=>{if(!(0,y().ww)(p))return(0,y().eD)(p);w(p,n,(0,o(590162).y)().option?"above":"below")},style:M(n,p,g,s,d,c),ariaLabel:u.formatMessage(p.device.isApple?S.ariaLabelApple:S.ariaLabelWindows),...e,children:(0,o(159732).R)({width:16})})})}));function M(e,t,n,i,l,r){const s=(0,o(273444).qA)({marginItemType:"plus_button",store:e,environment:t,nodeRect:i,containerRect:l,selectable:r});return{display:"flex",alignItems:"center",justifyContent:"center",fill:n.lightIconColor,position:"absolute",left:s,width:24,height:24,borderRadius:4,pointerEvents:"auto",cursor:"-webkit-grab"}}function k(){const e=(0,r().Fg)(),t=(0,i().O7)(),o={color:e.mediumInvertedTextColor};return(0,C.jsxs)("div",{style:{textAlign:"center"},children:[(0,C.jsx)(a()._H,{defaultMessage:"Click <mediumcolor>to add below</mediumcolor>",id:"block.selectableAddMenu.tooltip.addBlockBelow",values:{mediumcolor:e=>(0,C.jsx)("span",{style:o,children:e})}}),(0,C.jsx)("div",{children:t.device.isApple?(0,C.jsx)(a()._H,{defaultMessage:"Option-click <mediumcolor>to add above</mediumcolor>",id:"block.selectableAddMenu.tooltip.addAbove",values:{mediumcolor:e=>(0,C.jsx)("span",{style:o,children:e})}}):(0,C.jsx)(a()._H,{defaultMessage:"Alt-click <mediumcolor>to add a block above</mediumcolor>",id:"block.selectableAddMenu.tooltip.addAbove.windows",values:{mediumcolor:e=>(0,C.jsx)("span",{style:o,children:e})}})})]})}function w(e,t,o){const n="above"===o,i=f().MT.getMode(t),l=v().C.findSelectablesFromStore(t).find((e=>Boolean(e.props.onInsertRowBelow)));(0,p().Wt)(t)||(n?l&&l.props.onInsertRowAbove?c().createAndCommit({userAction:"SelectableAddMenu.handleClick.onInsertRowBelow",environment:e,canUndo:!0,perform:e=>{l.props.onInsertRowAbove&&l.props.onInsertRowAbove({transaction:e})}}):c().createAndCommit({environment:e,userAction:"SelectableAddMenu.handleClick.addAbove",canUndo:!0,perform:o=>{const n=g().insertTextAbove({environment:e,blocks:[t],transaction:o,skipAnalytics:!0});if("suggest"===i&&n){const t=u().oG(e,o,n);u().n1(o,n,{id:s().Il(),type:"insert",discussionId:t.id}),u().vh({environment:e,transaction:o,discussionStore:t,addModifiedBlockIdsAfter:[n.id]})}}}):m().PF(t)?b().hb({environment:e,blockStore:t,insertedTextBlockLocation:"none"}):l&&l.props.onInsertRowBelow?c().createAndCommit({userAction:"SelectableAddMenu.handleClick.onInsertRowBelow",environment:e,canUndo:!0,perform:e=>{l.props.onInsertRowBelow&&l.props.onInsertRowBelow({transaction:e})}}):c().createAndCommit({environment:e,userAction:"SelectableAddMenu.handleClick.addBelow",canUndo:!0,perform:o=>{const n=g().insertTextBelow({environment:e,blocks:[t],transaction:o,skipAnalytics:!0});if("suggest"===i&&n){const t=u().oG(e,o,n);u().n1(o,n,{id:s().Il(),type:"insert",discussionId:t.id}),u().vh({environment:e,transaction:o,discussionStore:t,addModifiedBlockIdsAfter:[n.id]})}}}),d().eT(e),h().default.reset())}},88409:(e,t,o)=>{o.d(t,{Z:()=>c});o(267602),o(653476),o(228244);var n=o(667294),i=()=>o(219727),l=()=>o(142735),r=()=>o(788860),s=()=>o(8208),a=()=>o(127519),d=o(785893);const c=(0,n.forwardRef)((function(e,t){const c=(0,i().O7)(),u=(0,i().Fy)(),g=(0,r().YB)(),{selectable:p,store:m,containerRect:v}=e,[b,f]=(0,n.useState)(!1),h=(0,o(644235).hq)(),y=(0,l().VK)((()=>m.isFirstBlockInCalloutV2Block()),[m]),C=(0,l().VK)((()=>{var e;const t=Boolean(o(574767).Z.getFirstSelectedDiscussionId()||o(687647).Z.getFramePageFirstSelectedDiscussionId()||s().Z.state.isActivelyComposing),n=m.getDiscussionStores().filter((e=>!e.getResolved())).length>0,i=o(958783).default.getBlockStore()===m,l=m.getType(),r="toggle"===l&&!o(445264).Z.isOpen(m.id)&&(0,o(852465).vV)(m,{recursivelyLoadAllDiscussions:!0}).length>0;if(!p||u.isMobile||!p.props.shouldShowCommentMenu||m.isNavigableAncestorNonCommentableState()||t||l&&["video","image"].includes(l)||m.isEmptyTitle()||n||i||r||y)return!1;const d="empty"!==a().default.state.mode&&a().default.state.multiSelection;if(d&&(0,o(191003).iG)(d))return!0;return!(d?(null===(e=(0,o(271308).tp)({multiSelection:d,filterCommonAncestors:!1,focus:"end"}))||void 0===e?void 0:e.stores)??[]:[]).some((e=>e.id===m.id))}),[m,p,u.isMobile,y]),S=(0,l().VK)((()=>{var e;const t=o(718959).sH(c),n=null==t||null===(e=t.getContentWrapEl())||void 0===e?void 0:e.getBoundingClientRect();return(0,o(273444).Yx)({marginItemType:"add_comment",nodeRect:n,containerRect:v})}),[c,v]),x=(0,o(846550).yK)((e=>({container:{position:"relative",right:S},tooltipMessage:{color:e.mediumInvertedTextColor},iconStyle:{marginLeft:.65,...h?(0,o(14585).Ew)(e,b):{}},iconButton:{paddingLeft:6,paddingRight:6,width:"unset"}})),[h,b,S]),M=(0,n.useCallback)((async()=>{if(m.isType(o(156642).eh)){const e=m.getBlockTitleStore(),t=o(645805).default.state,n=t.isOpen?t.selectableBoundingRect:void 0,i=o(550054).P2(e);if(i){const t=await o(141735).F.formulas.load();o(604068).WD({environment:c,blockStore:m,multiSelection:{start:{index:i.startIndex,store:e},end:{index:i.endIndex,store:e}},rect:n,from:"right_margin",formulasModule:t})}}else(0,o(267191).y)({environment:c,blockStore:m,from:"right_margin"})}),[c,m]),k=(0,n.useCallback)((e=>{f(e),e?s().Z.setHoverWithSource("right_margin_button"):s().Z.resetHoverSource("right_margin_button")}),[]),w=(0,n.useCallback)((()=>k(!0)),[k]),R=(0,n.useCallback)((()=>k(!1)),[k]);return C?(0,d.jsx)("div",{style:x.container,onMouseDown:o(949842).$0,children:(0,d.jsx)(o(654133).Z,{placement:o(998901).Placement.Bottom,delayThreshold:300,renderTooltip:()=>(0,d.jsx)(r()._H,{defaultMessage:"Comment",id:"selectableCommentMenu.commentPrompt.tooltip"}),render:e=>(0,d.jsx)("div",{onMouseOver:w,onMouseLeave:R,children:(0,d.jsx)(o(1910).Z,{ref:t,ariaLabel:g.formatMessage({id:"selectableCommentMenu.iconButton",defaultMessage:"Comment"}),disallowTabbing:!0,icon:o(550322).P,onClick:M,style:x.iconButton,iconStyle:x.iconStyle,...e})})})}):null}))},22819:(e,t,o)=>{o.d(t,{Z:()=>w});var n=o(667294),i=()=>o(219727),l=()=>o(142735),r=()=>o(491927),s=()=>o(448419),a=()=>o(302353),d=()=>o(645805),c=()=>o(644235),u=()=>o(14585),g=(o(267602),o(653476),()=>o(788860)),p=()=>o(20919),m=()=>o(740046),v=()=>o(388284),b=()=>o(508181),f=()=>o(352230),h=()=>o(148126),y=()=>o(965903),C=o(785893);const S=(0,g().vU)({filterActions:{defaultMessage:"Search actions…",id:"selectableHoverMenu.filterActions.placeholder"}});function x(e){const{hasEditorPermissions:t,isWorkspaceAdmin:s,store:a,onDismiss:d,containerRef:c,query:u,setQuery:g}=e,m=(0,i().O7)(),v=(0,i().MO)(),b=(0,l().VK)((()=>y().default.state.stores),[]),h=(0,l().VK)((()=>{var e;return{environment:m,blocks:y().default.state.stores.length?y().default.state.stores:[a],originRect:null===(e=c.current)||void 0===e?void 0:e.getBoundingClientRect(),publicEditMode:void 0}}),[m,a,c]),S=(0,l().VK)((()=>a.isNavigableAncestorNonEditableState()),[a]),x=(0,l().VK)((()=>(0,o(191586).Ow)(a)),[a]),[w,R]=(0,n.useState)(void 0),B=(0,n.useCallback)((e=>{const t=b[0];if(t){const n=t.getType();if(n){const i=(0,o(887430).fm)(t),l=(0,o(861026).Pn)(i)||{};r().dh(m,{analyticsName:e.analyticsName,action_type:e.analyticsActionType,from:"selection_menu",block_id:t.id,block_type:n,is_toggleable:(0,o(465371)._A)(n,t.getFormat()),parent_collection_id:t.getParentCollectionIdUpToTwoLevels(),...l})}}e.closeParentMenu&&d()}),[m,d,b]),j=(0,l().VK)((()=>a.isCollectionView()),[a]),T=(0,o(480089).cR)(a),A=!v&&t&&!S&&!x&&!T&&(0,C.jsx)(M,{filter:u,setQuery:g,comboboxAriaProps:w});let V;V=v?{menuType:f().o.ActionSheet,header:A}:{menuType:f().o.Popup,width:265,header:A};const _=(0,l().VK)((()=>void 0!==a.getAssociatedCollectionStore()),[a]);return(0,C.jsxs)(o(198829).Z,{...V,children:[(0,C.jsx)(o(149809).Z,{filter:u,initialFocus:u?0:void 0,sections:_?p().p0:p().Qi,context:h,onAccept:B,setComboboxAriaProps:R}),!u&&(t||s)&&(0,C.jsx)(o(985523).y,{store:a,wordCountStores:b,isPageMoreButton:!1,hideTopBorder:!1}),!u&&(0,C.jsx)(o(8881).Z,{store:a}),!u&&j&&(0,C.jsx)(k,{})]})}function M(e){const{filter:t,setQuery:o,comboboxAriaProps:n}=e,l=(0,i().Fy)(),r=(0,g().YB)();return(0,C.jsx)(v().Z,{isInput:!0,children:(0,C.jsx)(m().ZP,{value:t,onChange:e=>o(e.target.value),focus:!l.isMobile||void 0,focusAfterAnimation:!0,placeholder:r.formatMessage(S.filterActions),preventCaptureDeleteWhenEmpty:!0,preventCaptureClipboardShortcuts:!0,...n})})}function k(){return(0,C.jsx)(v().Z,{topBorder:!0,children:(0,C.jsx)(b().Z,{title:(0,C.jsx)(g()._H,{defaultMessage:"Learn about databases",id:"blocks.hoverBlockMenu.collectionHelpButton"}),href:(0,h().UY)("guides.database"),analyticsFrom:"selectable_hover_menu"})})}const w=(0,n.forwardRef)((function(e,t){const{selectable:g,store:p,disableDrag:m,isWorkspaceAdmin:v,nodeRect:b,containerRect:f}=e,h=(0,i().O7)(),y=(0,i().MO)(),S=(0,o(657320).l)(),[M,k]=(0,n.useState)(!1),w=(0,n.useRef)(null),R=(0,c().hq)(),B=(0,l().VK)((()=>(0,c().Ae)()),[]),j=u().eD,T=(0,l().VK)((()=>(0,o(273444).qA)({marginItemType:"drag_handle",store:p,environment:h,nodeRect:b,containerRect:f,selectable:g})),[p,h,b,f,g]),A=(0,l().VK)((()=>p.isNavigableAncestorNonEditableState()&&!p.isInsideCollection()),[p]),V=(0,l().VK)((()=>{var e;return"editor"===p.getRole()||"read_and_write"===p.getRole()||"edit"===(null==S||null===(e=S.publicEditModeStore.state)||void 0===e?void 0:e.permission)}),[null==S?void 0:S.publicEditModeStore,p]),_=(0,l().VK)((()=>"suggest"===o(279386).MT.getMode(p)),[p]),P=!m&&V&&!A&&!_,I=(0,o(846550).yK)((e=>({div:{position:"absolute",left:T,width:B,height:j,pointerEvents:"auto",cursor:P?"-webkit-grab":void 0},popup:{width:265,overflow:"hidden"},iconStyle:R?(0,u().Ew)(e,M):{}})),[T,B,j,P,R,M]),[H,Z]=(0,n.useState)(""),K=(0,l().VK)((()=>{const e=d().default.state;return e.isOpen&&e.menuIsOpen&&e.currentStore===p}),[p]);(0,n.useEffect)((()=>()=>{K&&d().default.reset()}),[]);const E=(0,n.useCallback)((()=>{const e=d().default.state,t=a().default.state;if(e.isOpen){Z(""),y&&t.phase===a().i.shown?a().default.onHide((()=>d().default.setState({...e,menuIsOpen:!0}))):d().default.setState({...e,menuIsOpen:!0}),o(879952).Ys({environment:h,store:p});const n=p.getType();n&&r().YM(h,{blockType:n})}}),[h,y,p]),L=(0,n.useCallback)((()=>d().default.reset()),[]);return(0,l().VK)((()=>{if(!g||!g.props.shouldShowHoverMenu||y)return!1;const e=p.getType();return!e||!["column_list"].includes(e)}),[p,g,y])?(0,C.jsx)("div",{style:I.div,ref:w,children:(0,C.jsx)(o(967092).ZP,{popupType:y?s().Z4.SlideUp:s().Z4.Popup,open:K,placementToOrigin:s().pO.Left,alignmentToOrigin:s().vR.Center,onDismiss:L,originGap:5,forceInitialInbound:!0,style:I.popup,render:()=>(0,C.jsx)(x,{hasEditorPermissions:V,isWorkspaceAdmin:v,store:p,onDismiss:L,containerRef:w,query:H,setQuery:Z}),origin:(0,C.jsx)(o(307369).Z,{className:o(247724).c$K,store:p,isHoverMenu:!0,canDrag:P,canSelect:!1,analyticsName:"selection_menu",disableForceTouch:!0,disableHorizontalDragEdgeScroll:!0,onMouseEnter:()=>{k(!0)},onMouseLeave:()=>{k(!1)},children:(0,C.jsx)(o(735697).Z,{ref:t,width:B,height:j,disallowTabbing:!0,onClick:E,disableDrag:!P,iconStyle:I.iconStyle})}),trapFocus:K})}):null}))},773398:(e,t,o)=>{o.d(t,{OH:()=>K,sT:()=>H});o(267602),o(470928),o(749411),o(241792);var n=o(667294),i=()=>o(219727),l=()=>o(142735),r=()=>o(846550),s=()=>o(156642),a=()=>o(8208),d=()=>o(628370),c=()=>o(372353),u=()=>o(718959),g=()=>o(250625),p=()=>o(273444),m=()=>o(239482),v=()=>o(84080),b=()=>o(275200),f=()=>o(345918),h=()=>o(32969),y=()=>o(35982),C=()=>o(95718),S=()=>o(645805),x=()=>o(797522),M=()=>o(644235),k=(o(492176),o(7961),()=>o(661727)),w=()=>o(568017),R=()=>o(975746),B=()=>o(749826);var j=o(785893);const T=new Map([[s().Ti.toggle,28],[s().Ti.header,28],[s().Ti.subHeader,28],[s().Ti.subSubHeader,28],[s().Ti.toDo,28],[s().Ti.bulletedList,28],[s().Ti.numberedList,28],[s().Ti.text,24]]),A=new Map([[s().Ti.image,-2]]),V=(0,n.forwardRef)((function(e,t){const{store:s,selectable:a,insertionLocation:d,state:c,nodeRect:u,containerRect:g}=e,p=(0,i().O7)(),m=(0,i().MO)(),v=(0,o(657320).l)(),b=(0,l().VK)((()=>x().default.state.selectableRectMap.get(a)),[a]),f=(0,l().VK)((()=>M().WA({environment:p,store:s,selectableBoundingRect:b})),[p,s,b]),h=(0,l().VK)((()=>!(null!=v&&v.publicEditModeStore.state.hasPublicPermission)&&("editor"===s.getRole()||"read_and_write"===s.getRole())||"edit"===(null==v?void 0:v.publicEditModeStore.state.permission)),[null==v?void 0:v.publicEditModeStore,s]),y=(0,l().VK)((()=>{var e,t;return"comment_only"===(null===(e=s.getNavigableBlockStore({skipCurrent:!0}))||void 0===e?void 0:e.getRole())||"comment"===(null==v||null===(t=v.publicEditModeStore.state)||void 0===t?void 0:t.permission)}),[null==v?void 0:v.publicEditModeStore,s]),C=(0,l().VK)((()=>"suggest"===o(279386).MT.getMode(s)),[s]),V=(0,l().VK)((()=>s.isFirstBlockInCalloutV2Block()),[s]),_=(0,l().VK)((()=>{var e;const t="external_object_instance_page"===s.getType(),n=v&&(0,o(772529).Kj)(v.pageStore.id);return!m&&(!s.isNavigableAncestorNonEditableState()||"collection"===(null===(e=s.getParentStore())||void 0===e?void 0:e.table))&&(h||y&&C)&&!t&&!s.isNavigableAncestorExternallyImportedPage()&&!n&&!V&&b}),[y,h,V,m,C,v,b,s]),[P,I]=(0,n.useState)(!1),H=(0,l().VK)((()=>{var e;return s.id===(null===(e=s.getNavigableBlockStore())||void 0===e?void 0:e.getContentIds().at(-1))}),[s]),Z=(0,l().VK)((()=>{if(!b)return 0;if("above"===d){if(B().default.checkGate({gateName:"selectable_top_margin"})){return-12-M().ld(a)/2-2}return-14}{const e=b.height-12;return H?e+12:e}}),[d,H,a,b]),K=(0,l().VK)((()=>{if(!b)return 0;if("above"===d){if(B().default.checkGate({gateName:"selectable_top_margin"})){const e=M().ld(a);return-.5*Math.max(3,e)-3}return-3.5}{const e=b.height-1.5;return H?e+12:e}}),[d,H,a,b]),{indentHintSize:E,additionalHorizontalPadding:L,additionalVerticalPadding:F}=(0,l().VK)((()=>{var e,t,n;const i=null==s?void 0:s.getRecordStoreUIParent();if(i instanceof o(826955).G&&["collection_view","collection_view_page"].includes(i.getType())){const e=(0,o(989134).Zs)({userId:p.currentUser.id,viewBlockId:i.id}),t=i.getCollectionViewStores().find((t=>t.id===e));if(t){if("table"===t.getType())return{indentHintSize:0,additionalHorizontalPadding:5,additionalVerticalPadding:1}}}const l=null===(e=s.getParentBlockStore())||void 0===e?void 0:e.getType(),r=s.getType(),a=r?A.get(r)??0:0;if(!l)return{indentHintSize:void 0,additionalHorizontalPadding:0,additionalVerticalPadding:a};const c=null===(t=s.getParentBlockStore())||void 0===t?void 0:t.getContentIds(),u=s.id===(null==c?void 0:c[0]),g=s.id===(null==c?void 0:c.at(-1)),m=(()=>{if(s.isTransclusionType()||s.isInsideTransclusion())return 5;const e=s.getNumberOfDuplicateBlocksAncestors();return e>0?o(755020).p*e:0})(),v=(null===(n=s.getParentBlockStore())||void 0===n?void 0:n.getParentTable())===o(922713).Xj;return u&&!v||g&&"below"===d?{indentHintSize:T.get(l),additionalHorizontalPadding:m,additionalVerticalPadding:a}:{indentHintSize:void 0,additionalHorizontalPadding:m,additionalVerticalPadding:a}}),[d,s,p.currentUser.id]),{left:O,positioningAdjustment:D}=(0,l().VK)((()=>{const e=M().nl({store:s,selectableBoundingRect:b,containerWidth:f});return void 0!==E?{left:26+E+L-e,positioningAdjustment:e}:{left:26+L-e,positioningAdjustment:e}}),[E,L,s,b,f]),W=(0,l().VK)((()=>{const e=function(e){var t;const o=e.getParentBlockStore(),n=null==o?void 0:o.getType(),i=null===(t=e.getParentBlockStore())||void 0===t?void 0:t.getContentIds();if(e.id!==(null==i?void 0:i[0]))return!1;switch(n){case"bulleted_list":case"toggle":case"to_do":case"numbered_list":return!0;default:return!1}}(s),t=s.getParentBlockStore();return e&&t?(0,R().v)(t):(0,R().v)(s)}),[s]),N=((null==u?void 0:u.left)??0)-((null==g?void 0:g.left)??0),z=(0,r().yK)((e=>{const t={position:"absolute",top:K+F,height:3,transition:"0.15s",left:N-D},n=function(e){const{blockBackgroundColor:t,theme:o}=e,n=(0,w().fi)(t,o);return n&&n.background?(0,k().Fq)(n.background,.66):(0,k().Fq)(o.contentBackground,.66)}({blockBackgroundColor:W,theme:e});return{plusIconStyles:{width:16,...(0,o(14585).Ew)(e,P)},buttonStyles:{position:"absolute",top:Z+F,left:N-O,width:24,height:24,display:"flex",justifyContent:"center",borderRadius:3,backdropFilter:"blur(4px)",background:n},buttonHoveredStyles:{backdropFilter:"blur(4px)",background:(0,w().fn)([e.buttonHoveredBackground,n])},lineStyles:{...t,width:f?`${f}px`:void 0,background:P?(0,k().Fq)(e.icon.secondary,.4):"transparent"},lighterLineStyles:void 0!==E?{...t,width:f?E-2+"px":void 0,background:P?(0,k().Fq)(e.icon.secondary,.4):"transparent",left:-E+D}:{},mediumColorStyle:{color:e.mediumInvertedTextColor}}}),[P,Z,O,K,E,F,f,D,W,N]);return _?(0,j.jsx)(o(654133).Z,{placement:o(998901).Placement.Bottom,delayThreshold:o(735697).p,renderTooltip:function(){return(0,j.jsx)("div",{style:{textAlign:"center"},children:(0,j.jsx)(o(788860)._H,{defaultMessage:"Click <mediumcolor>to add block</mediumcolor>",id:"block.InterBlockAddButton.tooltip.addBlock",values:{mediumcolor:e=>(0,j.jsx)("span",{style:z.mediumColorStyle,children:e})}})})},render:e=>(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(o(154186).Z,{ref:t,style:z.buttonStyles,hoveredStyle:z.buttonHoveredStyles,onClick:()=>{(0,o(860489).hm)(p,s,d)},onMouseEnter:t=>{var o;I(!0),S().default.setState({...c,isHoveringPlusButton:!0}),null===(o=e.onMouseEnter)||void 0===o||o.call(e,t)},onMouseLeave:t=>{var o;I(!1),S().default.setState({...c,isHoveringPlusButton:!1}),null===(o=e.onMouseLeave)||void 0===o||o.call(e,t)},children:(0,o(159732).R)(z.plusIconStyles)}),(0,j.jsx)("div",{style:z.lighterLineStyles}),(0,j.jsx)("div",{style:z.lineStyles}),void 0!==E&&(0,j.jsx)("div",{style:z.lineStyles})]})}):(S().default.setState({...c,isPlusButtonVisible:!1}),null)}));var _=()=>o(88409),P=()=>o(22819);const I=[s().Ti.page,s().Ti.callout,s().Ti.column,s().Ti.transclusionContainer];function H(e){var t;const o=(0,i().O7)(),{container:s,state:x}=e,M=(0,l().VK)((()=>(0,f().Fn)(o)),[o]),k=(0,n.useRef)(null),w=(0,n.useRef)(void 0),{targetSelectable:R,icon:B}=(0,l().VK)((()=>function(e,t,o){const{mouseX:n,mouseY:i}=o;if(e.current&&y().uh(e.current.getBoundingClientRect(),n,i)&&t.current)return t.current;for(const d of o.nearbySelectables){const e=d.selectable;if("top-left-corner"===d.hoveredRegion||"above-content"===d.hoveredRegion){const o={targetSelectable:e,icon:"plus_above"};return t.current=o,o}if("bottom-left-corner"===d.hoveredRegion||"below-content"===d.hoveredRegion){var l;const o=null===(l=e.props.store.getParentBlockStore())||void 0===l?void 0:l.getType();if(o&&I.includes(o)&&e.props.isLastItem){const o={targetSelectable:e,icon:"plus_below"};return t.current=o,o}}}const r=o.currentStore,s=r&&h().C.findSelectablesFromStore(r).find((e=>Boolean(e.props.shouldShowHoverMenu||e.props.shouldShowCommentMenu)));if(!s)return{targetSelectable:void 0,icon:void 0};const a={targetSelectable:s,icon:S().default.isRightMarginCommentHovered()?"comment":"6-dot"};return t.current=a,a}(k,w,x)),[x]),T=null==R?void 0:R.props.store,A=(0,l().VK)((()=>u().sH(o)),[o]),H=(0,n.useMemo)((()=>{var e;const t=null==A||null===(e=A.getContentWrapEl())||void 0===e?void 0:e.getBoundingClientRect().left;return void 0!==t&&x.mouseX>t}),[x,A]),Z=(0,l().VK)((()=>{if(!T)return!1;const e=m().Dg(T);return(null==T?void 0:T.pathIsDead())||e&&(0,C().xR)(e.id)}),[T]),[L,F]=(0,n.useState)(null==R||null===(t=R.getNode())||void 0===t?void 0:t.getBoundingClientRect());(0,n.useEffect)((()=>{if(!R)return;const e=R.getNode();if(!e)return;const t=()=>{F(e.getBoundingClientRect())},o=(0,b().VW)(e);o&&(0,g().lj)(o,"scroll",t);const n=(0,b().xH)(e);return n&&n!==o&&(0,g().lj)(n,"scroll",t),t(),()=>{o&&(0,g().ZV)(o,"scroll",t),n&&(0,g().ZV)(n,"scroll",t)}}),[R]),(0,n.useEffect)((()=>{"comment"!==B&&a().Z.state.isHovered&&a().Z.resetHoverSource("right_margin_button")}),[B]);const O=null==s?void 0:s.getBoundingClientRect(),D=(0,l().VK)((()=>T?(0,p().WA)({marginItemType:"selectable_hover_menu_overlay_item",store:T,nodeRect:L,containerRect:O,environment:o}):0),[T,L,O,o]),W=(0,r().yK)((()=>({container:{position:"absolute",top:D},commentMenu:{marginLeft:3}})),[D]),N=(0,l().VK)((()=>K.state),[]);return(0,v().Z)((e=>(0,j.jsxs)(j.Fragment,{children:[N?(0,j.jsx)(E,{container:s}):null,(0,j.jsx)(c().Z,{render:()=>R&&T&&B&&!Z?(S().default.setState({...x,isPlusButtonVisible:"plus_above"===B||"plus_below"===B}),[(0,j.jsxs)(d().Z,{animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},config:{duration:150,delay:H?150:0,timingFunction:"ease-in-out"},style:W.container,...e,children:["comment"===B&&(0,j.jsx)("div",{style:W.commentMenu,children:(0,j.jsx)(_().Z,{selectable:R,store:T,ref:k,containerRect:O})}),"6-dot"===B&&(0,j.jsx)(P().Z,{selectable:R,store:T,isWorkspaceAdmin:M,ref:k,nodeRect:L,containerRect:O}),("plus_above"===B||"plus_below"===B)&&(0,j.jsx)(V,{store:T,selectable:R,insertionLocation:"plus_above"===B?"above":"below",ref:k,state:x,nodeRect:L,containerRect:O})]},T.id)]):(S().default.setState({...x,isPlusButtonVisible:!1}),[])})]})))}const Z={"top-left-corner":"green","bottom-left-corner":"green","above-content":"blue","below-content":"blue"},K=o(263184).default.createValue(!1);function E(e){const{container:t}=e,o=(0,i().O7)(),r=(0,l().VK)((()=>S().default.state.isOpen?S().default.state.nearbySelectables.flatMap((e=>{let{selectable:t,hoveredRegion:n}=e;const i=x().default.state.selectableRectMap.get(t);if(!i)return[];const l=M().WA({environment:o,store:t.props.store,selectableBoundingRect:i}),r=M().nl({store:t.props.store,selectableBoundingRect:i,containerWidth:l}),s=M().ld(t);return{selectableRect:i,hoverRegionRect:(0,S().getHoverRegionOfRect)(i,n,l,r,s),hoveredRegion:n}})):[]),[o]),s=null==t?void 0:t.getBoundingClientRect(),a=((null==s?void 0:s.top)??0)+((null==t?void 0:t.scrollTop)??0),d=((null==s?void 0:s.left)??0)+((null==t?void 0:t.scrollLeft)??0);return(0,j.jsx)("div",{style:{pointerEvents:"none"},children:r.map(((e,t)=>{let{selectableRect:o,hoverRegionRect:i,hoveredRegion:l}=e;return(0,j.jsxs)(n.Fragment,{children:[(0,j.jsx)("div",{style:{position:"absolute",top:i.top-a,left:i.left-d,width:i.width,height:i.height,outline:`1px solid ${Z[l]}`,fontSize:8,fontFamily:"monospace"},children:l}),(0,j.jsx)("div",{style:{position:"absolute",top:o.top-a,left:o.left-d,width:o.width,height:o.height,outline:"1px solid gray",fontSize:8,fontFamily:"monospace"}})]},t)}))})}(0,o(947115).exposeDebugValue)("SelectableHoverDebuggerEnabledStore",K)},550322:(e,t,o)=>{o.d(t,{P:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("commentAdd",{viewBox:"0 0 16 15",svg:(0,n.jsx)("path",{d:"M4.73926 14.6865C4.46582 14.6865 4.25163 14.5977 4.09668 14.4199C3.94629 14.2422 3.87109 14.0007 3.87109 13.6953V12.0137H3.50195C2.84115 12.0137 2.27376 11.8861 1.7998 11.6309C1.3304 11.3757 0.968099 11.0111 0.712891 10.5371C0.46224 10.0586 0.336914 9.47982 0.336914 8.80078V3.49609C0.336914 2.81706 0.46224 2.24056 0.712891 1.7666C0.963542 1.28809 1.32585 0.921224 1.7998 0.666016C2.27832 0.410807 2.86165 0.283203 3.5498 0.283203H12.4434C13.127 0.283203 13.708 0.410807 14.1865 0.666016C14.665 0.921224 15.0296 1.28809 15.2803 1.7666C15.5309 2.24056 15.6562 2.81706 15.6562 3.49609V8.80078C15.6562 9.47982 15.5309 10.0586 15.2803 10.5371C15.0296 11.0111 14.665 11.3757 14.1865 11.6309C13.708 11.8861 13.127 12.0137 12.4434 12.0137H8.21875L5.88086 14.085C5.64844 14.29 5.44792 14.4404 5.2793 14.5361C5.11068 14.6364 4.93066 14.6865 4.73926 14.6865ZM5.07422 13.1758L7.24121 11.0293C7.38704 10.8835 7.52148 10.7878 7.64453 10.7422C7.77214 10.6921 7.94076 10.667 8.15039 10.667H12.4023C13.0495 10.667 13.528 10.5075 13.8379 10.1885C14.1523 9.86491 14.3096 9.38639 14.3096 8.75293V3.53711C14.3096 2.9082 14.1523 2.43424 13.8379 2.11523C13.528 1.79167 13.0495 1.62988 12.4023 1.62988H3.58398C2.94141 1.62988 2.46289 1.79167 2.14844 2.11523C1.83854 2.43424 1.68359 2.9082 1.68359 3.53711V8.75293C1.68359 9.38639 1.83854 9.86491 2.14844 10.1885C2.46289 10.5075 2.94141 10.667 3.58398 10.667H4.52051C4.71191 10.667 4.85091 10.7103 4.9375 10.7969C5.02865 10.8789 5.07422 11.0225 5.07422 11.2275V13.1758ZM4.8418 6.14844C4.8418 5.95703 4.90104 5.80208 5.01953 5.68359C5.13802 5.56055 5.29525 5.49902 5.49121 5.49902H7.36426V3.62598C7.36426 3.43913 7.4235 3.28646 7.54199 3.16797C7.66048 3.04492 7.81087 2.9834 7.99316 2.9834C8.18457 2.9834 8.33952 3.04264 8.45801 3.16113C8.58105 3.27962 8.64258 3.43457 8.64258 3.62598V5.49902H10.5156C10.707 5.49902 10.862 5.56055 10.9805 5.68359C11.099 5.80208 11.1582 5.95703 11.1582 6.14844C11.1582 6.33073 11.099 6.48112 10.9805 6.59961C10.862 6.7181 10.707 6.77734 10.5156 6.77734H8.64258V8.65723C8.64258 8.84408 8.58105 8.99902 8.45801 9.12207C8.33952 9.24056 8.18457 9.2998 7.99316 9.2998C7.81087 9.2998 7.66048 9.24056 7.54199 9.12207C7.4235 8.99902 7.36426 8.84408 7.36426 8.65723V6.77734H5.49121C5.2998 6.77734 5.14258 6.7181 5.01953 6.59961C4.90104 6.48112 4.8418 6.33073 4.8418 6.14844Z"})})},179633:(e,t,o)=>{o.d(t,{P:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("pin",{viewBox:"0 0 13 19",svg:(0,n.jsx)("path",{d:"M1.25 12.875h4.227v3.648c0 1.196.5 2.188.695 2.188.187 0 .687-.992.687-2.188v-3.648h4.227c.703 0 1.148-.438 1.148-1.102 0-1.648-1.32-3.304-3.359-4.109L8.617 4c.992-.648 1.93-1.383 2.328-1.914.211-.266.305-.531.305-.758 0-.476-.367-.828-.914-.828H2.008c-.555 0-.914.352-.914.828 0 .227.093.492.297.758.398.531 1.343 1.266 2.328 1.914L3.46 7.664C1.42 8.47.1 10.125.1 11.774c0 .664.446 1.101 1.149 1.101zm4.922-5.719c-.5 0-.984.047-1.438.14l.235-3.874c.008-.11-.008-.149-.086-.188-1.172-.601-2.078-1.312-2.14-1.468-.063-.102 0-.164.085-.164h6.68c.086 0 .148.062.086.164-.063.156-.969.867-2.14 1.468-.071.04-.095.079-.079.188l.234 3.875a7.177 7.177 0 00-1.437-.14zm-4.61 4.54c-.18 0-.257-.102-.226-.313.172-1.406 1.969-3.086 4.836-3.086 2.86 0 4.656 1.68 4.828 3.086.031.21-.047.312-.227.312h-9.21z"})})},142677:(e,t,o)=>{o.d(t,{_:()=>i});o(667294);var n=o(785893);const i=(0,o(827282).IU)("pinFilled",{viewBox:"0 0 13 19",svg:(0,n.jsx)("path",{d:"M.102 11.773c0 .665.445 1.102 1.148 1.102h4.227v3.648c0 1.196.5 2.188.695 2.188.187 0 .687-.992.687-2.188v-3.648h4.227c.703 0 1.148-.438 1.148-1.102 0-1.648-1.32-3.39-3.515-4.187L8.46 4c1.14-.648 2.078-1.383 2.484-1.906.203-.266.305-.531.305-.766 0-.476-.367-.828-.914-.828H2.008c-.555 0-.914.352-.914.828 0 .234.093.5.297.766.406.523 1.343 1.258 2.484 1.906l-.258 3.586C1.422 8.383.102 10.125.102 11.773z"})})}}]);