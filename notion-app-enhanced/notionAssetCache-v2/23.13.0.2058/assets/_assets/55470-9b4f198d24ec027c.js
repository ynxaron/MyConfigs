"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[55470],{844961:(e,t,n)=>{n.d(t,{C9:()=>d,dH:()=>g,hg:()=>c});n(821057),n(54927),n(670560);var r=()=>n(431595),i=()=>n(924172),a=()=>n(824462),o=()=>n(443269),s=()=>n(527278),l=()=>n(367666);async function c(e){let{environment:t,acquisitionId:n,rating:r,title:o,description:s,name:c}=e;try{(0,i().d8)(r)}catch(d){!function(e){const t=p(e);if(t)throw new Error(t);v()}(d)}u({title:o,description:s,name:c});const g=await a().callApi({eventName:"createMarketplaceListingReview",environment:t,data:{acquisitionId:n,rating:r,title:o,description:s,name:c}});if("success"===g.type){const e=g.data.marketplaceListingReviewId;return l().Z.setReviewId(n,e),{reviewId:e}}v()}async function g(e){let{environment:t,reviewId:n,title:r,description:i,name:o}=e;if(!n)throw new Error("Review id is required");u({title:r,description:i,name:o});const s=await a().callApi({eventName:"updateMarketplaceListingReview",environment:t,data:{reviewId:n,title:r,description:i,name:o}});if("success"===s.type)return s.data.success;v()}function u(e){let{title:t,description:n,name:r}=e;const a=[];if(void 0!==t)try{(0,i().St)(t)}catch(o){a.push(new Error(p(o),{cause:"title"}))}if(void 0!==n)try{(0,i().L8)(n)}catch(o){a.push(new Error(p(o),{cause:"description"}))}if(void 0!==r)try{(0,i().Hs)(r)}catch(o){a.push(new Error(p(o),{cause:"name"}))}if(a.length>0)throw new AggregateError(a)}async function d(e){let{environment:t,listingId:n,sort:r,offset:o,limit:s}=e;const l=await a().callApi({eventName:"getMarketplaceListingReviews",environment:t,data:{listingId:n,sort:(0,i().n$)(r??"mostRecent"),limit:s,offset:o}});let c=[];return"success"===l.type&&(c=l.data.reviewIds),{reviewIds:c}}function p(e){if((0,r().Cx)(e))return(0,o().nX)(s().Z.getIntl(),e.body)}function v(){throw new Error(s().Z.getIntl().formatMessage({id:"marketplace.review.createReviewError",defaultMessage:"Something went wrong"}))}},275066:(e,t,n)=>{n.d(t,{d:()=>u});n(241792);var r=n(667294),i=()=>n(846550),a=()=>n(580311),o=()=>n(184110),s=()=>n(567237),l=()=>n(788860),c=()=>n(661641),g=n(785893);function u(e){let{labelledBy:t,error:n,isDisabled:u,rating:m,onRatingConfirmed:w}=e;const h=(0,l().YB)(),f=function(e){return(0,i().yK)((t=>({marketplaceRatingContainer:{paddingBottom:"4px"},group:{display:"flex",...e&&{pointerEvents:"none"}},star:{cursor:"pointer",padding:"0 4px",height:"40px",width:"40px",color:t.marketplaceStarDefault},starDragging:{cursor:"grabbing"},highlighted:{color:t.marketplaceStarSelected},error:{color:t.text.uiRedTertiary},errorMessage:{marginTop:"8px",textAlign:"center"}})),[e])}(u),[_,C]=(0,r.useState)(0),y=m??_,[L,k]=(0,r.useState)(!1),[b,R]=(0,r.useState)(0),x=()=>R(0),I=x,E=e=>()=>{R(e)},M=e=>()=>{k(!1),C(e)},S=e=>t=>{"Enter"===t.key&&(C(e),null==w||w(e),k(!1))},N=e=>()=>{k(!1),null==w||w(e)},A=e=>t=>{p(t)&&(k(!0),C(e)),R(e)};return(0,g.jsxs)("div",{style:f.marketplaceRatingContainer,children:[(0,g.jsx)("div",{role:"radiogroup","aria-labelledby":t,"aria-invalid":Boolean(n),"aria-errormessage":n?d:void 0,"aria-required":!0,style:f.group,onMouseLeave:e=>{x(),k(!1),p(e)&&y&&(null==w||w(y))},onBlur:I,children:s().ZK.map((e=>{const t=y===e,r=e<=y,i=!u&&(r||e<=b),s={...f.star,...i&&f.highlighted,...L&&f.starDragging,...n&&!b&&f.error};return(0,g.jsx)("div",{role:"radio",tabIndex:0,"aria-checked":t,"aria-label":h.formatMessage(v.starLabel,{star:e}),"aria-disabled":u,onFocus:E(e),onMouseDown:M(e),onKeyDown:S(e),onMouseUp:N(e),onMouseEnter:A(e),children:r?(0,o().p)(s):(0,a().e)(s)},e)}))}),n&&(0,g.jsx)(c().q,{id:d,styleName:"UIRegular-14px/Regular",colorName:"redTertiary",customStyles:f.errorMessage,children:n.message})]})}const d="rating-error-message";function p(e){return 1===e.buttons}const v=(0,l().vU)({starLabel:{id:"marketplace.rating.star",defaultMessage:"Select {star, plural, one {{star, number} star} other {{star, number} stars}}"}})},90912:(e,t,n)=>{n.d(t,{Y:()=>l});n(821057);var r=n(667294),i=()=>n(219727),a=()=>n(801812),o=()=>n(844961),s=()=>n(592052);function l(e){let{acquisitionId:t,source:n}=e;const l=(0,i().O7)(),{trackRateListing:c}=(0,s().u)(t),[g,u]=(0,r.useState)(),[d,p]=(0,r.useState)(0),v=(0,r.useCallback)((e=>{p(e),u(void 0)}),[]),[m,w]=(0,a().UK)((()=>(0,o().hg)({environment:l,acquisitionId:t,rating:d})),[l,t,d]);return{onRatingConfirmed:v,onSubmit:(0,r.useCallback)((async()=>{try{await w(),d&&c({type:"add",surface:"leaveReviewButton",rating:d,source:n})}catch(e){throw e instanceof Error&&u(e),e}}),[w,d,n,c]),isLoading:"pending"===m.status,error:g}}},592052:(e,t,n)=>{n.d(t,{u:()=>g});var r=n(667294),i=()=>n(219727),a=()=>n(142735),o=()=>n(145543),s=()=>n(594546),l=()=>n(749826),c=()=>n(528831);function g(e){const t=(0,i().O7)(),n=(0,a().VK)((()=>new(c().I)(t,{table:o().GL,id:e}).getListingId()||""),[t,e]);return{trackReviewListing:(0,r.useCallback)((e=>{(0,s().j)({environment:t,event:{eventName:"review_listing",eventProperties:{from:"inApp",listing_id:n,...e}}}),l().default.logEvent("review_listing",void 0,e)}),[t,n]),trackRateListing:(0,r.useCallback)((e=>{(0,s().j)({environment:t,event:{eventName:"rate_listing",eventProperties:{from:"inApp",listing_id:n,...e}}}),l().default.logEvent("rate_listing",e.rating,e)}),[t,n])}}},580311:(e,t,n)=>{n.d(t,{e:()=>i});n(667294);var r=n(785893);const i=(0,n(827282).IU)("star",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M3.2627 14.7637C3.58398 15.0098 3.98047 14.9277 4.44531 14.5928L8 11.9814L11.5547 14.5928C12.0195 14.9277 12.4229 15.0098 12.7441 14.7637C13.0586 14.5244 13.127 14.1279 12.9424 13.5879L11.541 9.41113L15.1299 6.83398C15.5879 6.50586 15.7861 6.14355 15.6562 5.76074C15.5264 5.38477 15.1641 5.2002 14.5967 5.20703L10.1943 5.23438L8.85449 1.03711C8.68359 0.490234 8.40332 0.196289 8 0.196289C7.60352 0.196289 7.32324 0.490234 7.14551 1.03711L5.80566 5.23438L1.40332 5.20703C0.835938 5.2002 0.480469 5.38477 0.350586 5.76074C0.220703 6.14355 0.412109 6.50586 0.876953 6.83398L4.46582 9.41113L3.05762 13.5879C2.87305 14.1279 2.94141 14.5244 3.2627 14.7637ZM4.45898 13.1162C4.45215 13.1025 4.45215 13.0957 4.45898 13.0615L5.75781 9.39062C5.87402 9.05566 5.83301 8.84375 5.52539 8.63867L2.3125 6.4375C2.28516 6.42383 2.27148 6.41016 2.27832 6.38965C2.29199 6.37598 2.30566 6.36914 2.33984 6.36914L6.22949 6.45801C6.58496 6.47168 6.7627 6.35547 6.86523 6.01367L7.96582 2.28125C7.97266 2.24023 7.98633 2.2334 8 2.2334C8.02051 2.2334 8.02734 2.24023 8.04102 2.28125L9.13477 6.01367C9.2373 6.35547 9.42188 6.47168 9.77051 6.45801L13.6602 6.36914C13.7012 6.36914 13.7148 6.37598 13.7217 6.38965C13.7285 6.41016 13.7217 6.41699 13.6875 6.4375L10.4814 8.63867C10.167 8.85059 10.126 9.05566 10.2422 9.39062L11.541 13.0615C11.5547 13.0957 11.5547 13.1025 11.541 13.1162C11.5273 13.1367 11.5137 13.123 11.4863 13.1094L8.40332 10.7305C8.12305 10.5117 7.87695 10.5117 7.60352 10.7305L4.52051 13.1094C4.49316 13.123 4.47266 13.1367 4.45898 13.1162Z"})})},184110:(e,t,n)=>{n.d(t,{p:()=>i});n(667294);var r=n(785893);const i=(0,n(827282).IU)("starFilled",{viewBox:"0 0 24 24",svg:(0,r.jsx)("path",{d:"M4.603 22.837c.375.277.826.2 1.4-.22l6.002-4.411 6.003 4.41c.561.42 1.024.498 1.387.221.375-.276.463-.73.232-1.403l-2.346-7.075 6.047-4.366c.572-.41.77-.83.627-1.271-.143-.432-.55-.653-1.255-.653l-7.424.045-2.269-7.108C12.787.32 12.457 0 12.005 0c-.463 0-.782.32-1.002 1.006l-2.27 7.108-7.423-.045c-.716 0-1.123.221-1.266.653-.144.442.066.862.638 1.27l6.036 4.367-2.335 7.075c-.231.674-.143 1.127.22 1.403z"})})},924172:(e,t,n)=>{n.d(t,{AG:()=>C,Gp:()=>_,Hs:()=>w,L8:()=>v,OB:()=>y,St:()=>u,d8:()=>l,n$:()=>L});var r=()=>n(696459),i=()=>n(575861),a=()=>n(431595),o=()=>n(567237);const s=15;function l(e){if(!o().ZK.includes(e))throw new(a().XV)("Rating must be an integer between 1 and 5.",{type:"marketplace_listing_review_invalid_rating"});return!0}const c=3,g=100;function u(e){if(e.length<c)throw new(a().XV)("Title too short",{type:"marketplace_listing_review_title_too_short"});if(e.length>g)throw new(a().XV)("Title too long",{type:"marketplace_listing_review_title_too_long"})}const d=50,p=1500;function v(e){if(e.length<d)throw new(a().XV)("Description too short",{type:"marketplace_listing_review_description_too_short"});if(e.length>p)throw new(a().XV)("Title too long",{type:"marketplace_listing_review_description_too_long"})}const m=40;function w(e){if(0===e.length)throw new(a().XV)("Name is required",{type:"marketplace_listing_review_name_too_short"});if(e.length>m)throw new(a().XV)("Name too long",{type:"marketplace_listing_review_name_too_long"})}const h=5,f=1500;function _(e){if(e.length<h)throw new(a().XV)("Creator response too short",{type:"marketplace_listing_review_creator_response_too_short"});if(e.length>f)throw new(a().XV)("Creator response too long",{type:"marketplace_listing_review_creator_response_too_long"})}function C(e){return void 0!==e.getTitle()&&void 0!==e.getSerializedContent()}function y(e){return(0,i().Je)(e)<s}function L(e){switch(e){case"mostRecent":return{columnName:"updated_time",direction:"descending"};case"highestRating":return{columnName:"rating",direction:"descending"};case"lowestRating":return{columnName:"rating",direction:"ascending"};default:(0,r().t1)(e)}}},54927:(e,t,n)=>{var r=n(79989),i=n(76058),a=n(761735),o=n(203689),s=n(351064),l="AggregateError",c=i(l),g=!o((function(){return 1!==c([1]).errors[0]}))&&o((function(){return 7!==c([1],l,{cause:7}).cause}));r({global:!0,constructor:!0,arity:2,forced:g},{AggregateError:s(l,(function(e){return function(t,n){return a(e,this,arguments)}}),g,!0)})}}]);