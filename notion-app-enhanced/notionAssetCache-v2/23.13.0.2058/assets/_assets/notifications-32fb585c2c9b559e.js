(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[51909,75751],{147249:(e,t,i)=>{"use strict";i.d(t,{K:()=>n,y:()=>a});var o=()=>i(594546);function n(e,t){const{from:i}=t;o().K4(e,"show_tooltip",{from:i,time:Date.now()})}function a(e,t){const{from:i}=t;o().K4(e,"dismiss_tooltip",{from:i,time:Date.now()})}},169793:(e,t,i)=>{"use strict";i.d(t,{ND:()=>A,RD:()=>T,gc:()=>P,gl:()=>R,u7:()=>N});var o=i(667294),n=()=>i(219727),a=()=>i(142735),s=()=>i(156642),r=()=>i(575861),d=()=>i(788860),l=()=>i(696459),c=()=>i(147249),u=()=>i(905263),p=()=>i(982855),f=()=>i(191003),g=()=>i(550054),m=()=>i(803728),h=()=>i(110372),b=()=>i(156538),y=()=>i(876822),v=()=>i(890324),x=()=>i(826955),S=()=>i(127519),M=()=>i(343353),j=()=>i(559155),k=()=>i(656801),_=i(785893);const w=1,C=1,I=(0,d().vU)({spaceForAiHeader:{id:"AiOnboardingTooltips.spaceForAi.header",defaultMessage:"Press ‘space’ for AI"},spaceForAiContent:{id:"AiOnboardingTooltips.spaceForAi.content",defaultMessage:"On a new line or page, press ‘space’ on your keyboard for AI to generate or edit the page. Try it now!"},askAiAnythingHeader:{id:"AiOnboardingTooltips.askAiAnything.header",defaultMessage:"Ask AI anything"},askAiAnythingContent:{id:"AiOnboardingTooltips.askAiAnything.content",defaultMessage:"Just tell AI what to do — the more details, the better. You can also start from an example in the menu."},refineAiResponseHeader:{id:"AiOnboardingTooltips.refineAiResponse.header",defaultMessage:"Tell AI what to do next"},refineAiResponseContent:{id:"AiOnboardingTooltips.refineAiResponse.content",defaultMessage:"How was it? Give AI further instructions to improve what it wrote, or hit ‘Done’ when finished."},showAssistantLocationHeader:{id:"AiOnboardingTooltips.showAssistantLocation.answersToYourQuestionHeader",defaultMessage:"Ask AI when searching"},showAssistantLocationContent:{id:"AiOnboardingTooltips.showAssistantLocation.askQuestionBody",defaultMessage:"AI can find pages and synthesize a quick, concise answer for you. Try it now."},showAssistantOriginElementLocationHeader:{id:"AiOnboardingTooltips.ShowAssistantOriginElementLocationTooltip.header",defaultMessage:"Start by asking a question"},showAssistantOriginElementLocationContent:{id:"AiOnboardingTooltips.ShowAssistantOriginElementLocationTooltip.content",defaultMessage:"Notion AI will find pages and compose a concise answer for you. Try it now."}});function N(){const e=(0,n().O7)(),t=function(){const e=(0,n().O7)(),t=(0,a().VK)((()=>{var e;return null===(e=y().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),i=(0,a().VK)((()=>{const t=y().default.state.mainEditorCurrentBlockStore;return t&&v().Z.getMode(e,t)}),[e]);return(0,a().VK)((()=>{if(e.device.isMobile)return;const{currentUserSettingsStore:o,inAppCalloutStore:n}=y().default.state;if(!n.getCalloutVisibility("ai_onboarding_tooltip").canShow)return;const a=null==o?void 0:o.getSettings();if(!a)return;if((0,l().$K)(a.last_used_ai_writer_at))return;if("tooltip"!==a.ai_assistant_onboarding_phase)return;if((0,j().$_)(e,t)){if(!(0,l().$K)(a.ai_sales_assisted_extra_notification_seen_at)||(0,r().O5)(a.ai_sales_assisted_extra_notification_seen_at)<C)return}else if((0,l().$K)(a.ai_assistant_onboarding_phase_last_set_at)&&(0,r().O5)(a.ai_assistant_onboarding_phase_last_set_at)<w)return;if("space_for_ai"!==(0,k().sy)())return;if(!(0,p().GD)(i))return;const d=S().default.state;if("editing"===d.mode){const e=(0,f().QY)(d.multiSelection);if(e&&(0,g().wd)(e.selection)){const t=e.store,i=b().E.findEditableWithStore(t);if(i){const e="block"===t.pointer.table?x().G.createChildStore(t,t.pointer):void 0,o=e&&e.getType(),n=Boolean(o&&(0,s().hD)(o)),a=t.getValue();if(n&&!a)return i}}}}),[e,i,t])}(),[i,c]=(0,o.useState)(!1),m=(0,o.useCallback)((()=>{c(!0)}),[]),h=!i&&Boolean(t);return(0,o.useEffect)((()=>()=>{h&&(0,k().fz)(e)}),[e,h]),h&&t?(0,_.jsx)(u().U,{origin:()=>t.getNode(),placementToOrigin:"bottom",header:(0,_.jsx)(d()._H,{...I.spaceForAiHeader}),content:(0,_.jsx)(d()._H,{...I.spaceForAiContent}),onCloseClick:m}):null}function T(e){const{originRef:t,openState:i}=e,s=(0,n().O7)(),r=(0,a().VK)((()=>(0,k().sy)()),[]),[l,c]=(0,o.useState)(!1),p=(0,o.useCallback)((()=>{c(!0)}),[]),f="ask_ai_anything"===r&&"initialPrompt"===i.stage&&!l;return(0,o.useEffect)((()=>()=>{!s.device.isMobile&&f&&(0,k().fz)(s)}),[s,f]),s.device.isMobile||!f?null:(0,_.jsx)(u().U,{origin:t,placementToOrigin:"top",header:(0,_.jsx)(d()._H,{...I.askAiAnythingHeader}),content:(0,_.jsx)(d()._H,{...I.askAiAnythingContent}),onCloseClick:p})}function R(e){const{originRef:t,openState:i,isInputEmpty:s}=e,r=(0,n().O7)(),l=(0,a().VK)((()=>(0,k().sy)()),[]),[c,p]=(0,o.useState)(!1),f=(0,o.useCallback)((()=>{p(!0)}),[]),g="refine_ai_response"===l&&"results"===i.stage&&!i.loading&&"cursor"===i.context.type&&s&&!c;return(0,o.useEffect)((()=>()=>{!r.device.isMobile&&g&&(0,k().fz)(r)}),[r,g]),r.device.isMobile?null:(0,_.jsx)(u().U,{origin:g?t:void 0,placementToOrigin:"right",pointerOffset:-4,pointerLength:25,header:(0,_.jsx)(d()._H,{...I.refineAiResponseHeader}),content:(0,_.jsx)(d()._H,{...I.refineAiResponseContent}),onCloseClick:f})}function A(e){const{origin:t}=e,i=(0,n().O7)();(0,o.useEffect)((()=>{c().K(i,{from:"qna_button"}),h().gF(i,{callout_key:"ai_assistant_origin_element_tooltip"})}),[i]);const a=(0,o.useCallback)((()=>{const{currentUserSettingsStore:e}=y().default.state;e&&(c().y(i,{from:"qna_button"}),h().bl(i,{callout_key:"ai_assistant_origin_element_tooltip",dismiss_type:"tooltip_dismiss"}),(0,M().setQnaOnboardingPhase)(i,{phase:"complete",transactionUserAction:"AiQnaIntroModal.debug.clickTooltipComplete",userSettingsStore:e}),m().Gi(i,"ai_assistant_origin_element_tooltip"))}),[i]);return(0,_.jsx)(u().U,{style:{width:250},pointerLength:25,pointerPosition:"94%",origin:t,placementToOrigin:"top",header:(0,_.jsx)(d()._H,{...I.showAssistantOriginElementLocationHeader}),content:(0,_.jsx)(d()._H,{...I.showAssistantOriginElementLocationContent}),onCloseClick:a})}function P(e){const{origin:t}=e,i=(0,n().O7)();(0,o.useEffect)((()=>{c().K(i,{from:"qna_search"})}),[i]);const a=(0,o.useCallback)((()=>{const{currentUserSettingsStore:e}=y().default.state;e&&(c().y(i,{from:"qna_search"}),(0,M().setQnaOnboardingPhase)(i,{phase:"complete",transactionUserAction:"AiQnaIntroModal.debug.clickTooltipComplete",userSettingsStore:e}))}),[i]);return(0,_.jsx)(u().U,{style:{width:250},pointerLength:25,pointerPosition:"5%",origin:t,placementToOrigin:"bottom",header:(0,_.jsx)(d()._H,{...I.showAssistantLocationHeader}),content:(0,_.jsx)(d()._H,{...I.showAssistantLocationContent}),onCloseClick:a})}(0,i(100056).exposeDebugEnvironmentValue)("resetAIOnboarding",(e=>()=>{const{currentUserSettingsStore:t}=y().default.state;t&&i(269299).createAndCommit({userAction:"AiIntroModal.debugging.resetAIOnboarding",environment:e,canUndo:!0,perform:e=>{i(348141).d2({userSettingsStore:t,transaction:e,data:{ai_onboarding_phase:"space_for_ai"}})},userId:t.id})}))},397174:(e,t,i)=>{"use strict";i.d(t,{Z:()=>c});i(267602),i(653476),i(241792),i(258429);var o=i(667294),n=()=>i(846550),a=()=>i(26970),s=()=>i(707513),r=()=>i(384510),d=i(785893);function l(e){const{button:t,isLast:i}=e,r=(0,n().yK)((e=>({button:{display:"flex",alignItems:"center",padding:"4px 6px",fontWeight:s().Ue.medium,borderRight:`1px solid ${e.regularDividerColor}`,color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor},buttonLast:{borderRight:"none"},buttonHovered:{background:e.whiteButtonHoveredBackground},buttonPressed:{background:e.whiteButtonPressedBackground}})),[]);return o.cloneElement(t,{...(0,a().iv)(t.props.style,r.button,i&&r.buttonLast),hoveredStyle:(0,a().iv)(r.buttonHovered,i&&r.buttonLast).style,pressedStyle:r.buttonPressed})}const c=function(e){let{children:t,isVisible:c,position:u,style:p}=e;const f=(0,i(219727).O7)(),g=(0,n().yK)((e=>({container:{color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor,fontSize:12,background:e.whiteButtonBackground,boxShadow:e.shadowSM,display:"flex",whiteSpace:"nowrap",borderRadius:r().Z.borderRadius,maxWidth:"calc(100% - 16px)",minHeight:24,overflow:"hidden",pointerEvents:f.device.isMobile?"auto":"none",opacity:f.device.isMobile?1:0,fontFamily:s().F5(i(146947).locale).sans,position:"absolute",right:r().Z.horizontal.small,bottom:r().Z.vertical.small,zIndex:2},containerHover:{pointerEvents:"auto",opacity:1},containerTop:{top:r().Z.vertical.small,bottom:void 0}})),[f]),m=o.Children.toArray(t).filter(i(696459).$K),h=m.length;return(0,d.jsx)(i(628370).Z,{animate:{opacity:c?1:0},...(0,a().iv)(g.container,p,c&&g.containerHover,"top"===u&&g.containerTop),children:m.map(((e,t)=>{const n=t===h-1;if(e&&"object"==typeof e&&"type"in e){if(e.type===i(654133).Z&&o.isValidElement(e))return o.cloneElement(e,{render:(t,i)=>{const o=e.props.render(t,i);return(0,d.jsx)(l,{isLast:n,button:o},e.key)}});if(e.type===i(154186).Z&&o.isValidElement(e))return(0,d.jsx)(l,{isLast:n,button:e},e.key)}}))})}},632599:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d});var o=i(667294),n=()=>i(846550),a=()=>i(729201),s=()=>i(312578),r=i(785893);function d(e){let{loadingMessage:t}=e;const i=(0,n().Fg)(),d=(0,a().Z)(!0,400);return(0,r.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:d&&(0,r.jsxs)(o.Fragment,{children:[(0,r.jsx)(s().Z,{}),t&&(0,r.jsx)("div",{style:{marginLeft:8,color:i.text.secondary},children:t})]})})}},755589:(e,t,i)=>{"use strict";i.d(t,{m:()=>c});i(667294);var o=()=>i(968061),n=()=>i(788860),a=()=>i(231077),s=()=>i(1910),r=()=>i(45909),d=i(785893);const l=(0,n().vU)({menu:{defaultMessage:"Menu",id:"topbar.appMenuButton.title"}});function c(){const e=(0,n().YB)();return(0,d.jsx)(s().Z,{style:{position:"absolute",top:"10px",left:"14px",width:24,height:24,zIndex:1e5,...(0,r().X)({noDrag:!0})},iconStyle:{width:16,height:16},isDarkIconColor:!0,onClick:()=>{a().openAppMenu()},icon:o().h,ariaLabel:e.formatMessage(l.menu)})}},75751:(e,t,i)=>{"use strict";i.d(t,{Z:()=>y});var o=i(667294),n=()=>i(219727),a=()=>i(142735),s=()=>i(788860),r=()=>i(421654),d=()=>i(839821),l=()=>i(269299),c=()=>i(191586),u=()=>i(685472),p=()=>i(774985),f=()=>i(397174),g=()=>i(628370),m=()=>i(154186),h=()=>i(710706),b=i(785893);const y=function(e){let{store:t,disabled:s,paddingRight:d,paddingLeft:c,height:f,proxyWidth:g}=e;const m=(0,n().O7)(),h=(0,a().qz)(void 0,i(233417).Z),y=(0,a().VK)((()=>s||"suggest"===i(279386).MT.getMode(t)),[s,t]),S=(0,a().VK)((()=>t.getCover()),[t]),M=(0,a().Kw)(p().Z),[j,k]=(0,o.useState)(void 0);if(!S)return null;const _=M.loadingMode!==u().LU&&M.loadingMode!==u().SS;return(0,b.jsx)(i(910293).Z,{mouseStore:h,onFlushTemporaryPosition:e=>function(e,t,i){const{imagePosition:o,reset:n}=e;l().createAndCommit({userAction:"PageCover.handleFlushTemporaryPosition",environment:i,canUndo:!0,perform:e=>{r().Mp({store:t,coverPosition:o,transaction:e}),n()}})}(e,t,m),renderControl:e=>{let{handleRepositionClick:i,handleSavePositionClick:o,handleCancelClick:n,isVisible:a,isRepositioning:s}=e;return(0,b.jsx)(x,{handleRepositionClick:i,handleSavePositionClick:o,handleCancelClick:n,isVisible:a,isRepositioning:s,lastProxiedUrl:j,store:t,disabled:y,paddingRight:d,paddingLeft:c,mouseStore:h})},source:"page",store:t,style:{display:"flex",flexDirection:"column",alignItems:"center",height:f,maxHeight:280,cursor:"default"},render:e=>(0,b.jsxs)(o.Fragment,{children:[(0,b.jsx)(i(135499).Z,{url:S.cover,isAuthenticated:!0,permissionRecord:S.pointer,width:g,onFinishedLoadingProxyUrl:k,render:(t,o)=>{const n={width:"100%",height:f,maxHeight:280,objectFit:"cover",opacity:_?.5:1,objectPosition:`center ${100*(1-(e.imagePosition||0))}%`,borderRadius:0},a={width:"100%",height:f,maxHeight:280};return(0,b.jsx)(i(167499).B,{src:o,placeholderSrc:_?M.dataURL:void 0,placeholderBehavior:_?"force-show-placeholder":"show-placeholder-if-loading-src",containerStyle:a,imageStyle:n,onLoadComplete:v,testId:"pageCover"})}}),_&&(0,b.jsxs)("div",{style:i(518242).IA,children:[(0,b.jsx)(i(312578).Z,{size:"md",style:{marginRight:4}}),(0,b.jsx)("div",{style:{minWidth:30,textAlign:"right"},children:(0,b.jsx)(i(410184).Z,{percentage:M.uploadProgress})})]})]})})};function v(){p().Z.reset()}function x(e){let{isVisible:t,isRepositioning:i,handleCancelClick:r,handleRepositionClick:l,handleSavePositionClick:y,lastProxiedUrl:v,store:x,disabled:S,paddingRight:M,paddingLeft:j,mouseStore:k}=e;const _=(0,n().O7)(),w=(0,s().YB)(),C=(0,o.useCallback)((e=>function(e,t,i,o,n){n.reset();const a=e.target.getBoundingClientRect();d().j({environment:t,intl:i,store:o,rect:a})}(e,_,w,x,k)),[_,w,x,k]),I=(0,a().VK)((()=>p().Z.state.loadingMode),[]),N=(0,a().VK)((()=>function(e){let t;return t=e.isFullWidth()?"100%":c().zL,t}(x)),[x]);if(S||I!==u().LU)return null;const{device:T}=_,{isMobile:R}=T;return(0,b.jsx)(g().Z,{animate:{width:N,opacity:t?1:0},style:{position:"absolute",pointerEvents:t?"auto":"none",maxWidth:"100%",top:48},children:(0,b.jsxs)(f().Z,{isVisible:t,position:"bottom",style:{marginRight:M,marginLeft:j},children:[!i&&(0,b.jsx)(m().Z,{style:{borderRight:R?"none":void 0,...h().ar},onClick:C,children:(0,b.jsx)(s()._H,{defaultMessage:"Change cover",id:"pageCover.changeCover.text"})}),!i&&!R&&(0,b.jsx)(m().Z,{style:{...h().ar,borderRight:"none"},onClick:e=>l(e,v),children:(0,b.jsx)(s()._H,{defaultMessage:"Reposition",id:"pageCover.reposition.text"})}),i&&!R&&(0,b.jsx)(m().Z,{style:h().ar,onClick:y,children:(0,b.jsx)(s()._H,{defaultMessage:"Save position",id:"pageCover.savePosition.text"})}),i&&!R&&(0,b.jsx)(m().Z,{style:{...h().ar,borderRight:"none"},onClick:r,children:(0,b.jsx)(s()._H,{defaultMessage:"Cancel",id:"pageCover.reposition.cancelText"})})]})})}},123256:(e,t,i)=>{"use strict";i.d(t,{Z:()=>w});var o=i(667294),n=()=>i(219727),a=()=>i(142735),s=()=>i(846550),r=()=>i(492522),d=()=>i(788860),l=()=>i(696459),c=()=>i(82937),u=()=>i(879952),p=()=>i(942226),f=()=>i(505462),g=()=>i(815532),m=()=>i(123145),h=()=>i(690664),b=()=>i(105649),y=()=>i(793935),v=()=>i(589525),x=()=>i(291335),S=()=>i(590972),M=()=>i(998901),j=()=>i(482162),k=()=>i(64260),_=i(785893);const w=function(e){let{type:t}=e;const s=(0,n().O7)(),d=(0,a().qz)(void 0,i(233417).Z),p=(0,o.useRef)(!1),b=(0,o.useCallback)((()=>function(e,t){t.setState({...t.state,mousePressed:!1}),C({isResizing:!1},e)}(t,d)),[t,d]),k=(0,o.useCallback)((()=>function(e,t,i,o){if(!o.current){switch(t){case"page":y().setExpand({environment:e,isExpanded:!x().sidebarExpandedStore.state,from:"sidebar_resizer",saveDetailsSidebarPreference:!0}),x().sidebarOpenStore.setState(!1);break;case"update":y().setUpdateExpand({environment:e,isExpanded:!(0,v().Sx)(e),from:"drag",saveDetailsSidebarPreference:!0});break;case"peek":c().xv({environment:e,from:"resizer_click"});break;case"secondary_sidebar":g().TN({environment:e});break;default:(0,l().t1)(t)}i.setState({...i.state,mouseEntered:!1})}i.setState({...i.state,mousePressed:!1}),C({isResizing:!1},t)}(s,t,d,p)),[s,t,d]),w=(0,o.useCallback)((e=>function(e,t,i,o){switch(f().clear(t),o.current=!0,i){case"page":y().setWidth({width:I(e.currentX,i,t),environment:t});break;case"update":y().setUpdateWidth({width:I(e.currentX,i,t),environment:t});break;case"peek":y().setPeekWidth({width:I(e.currentX,i,t),environment:t});break;case"secondary_sidebar":h().default.setWidth(I(e.currentX,i,t));break;default:(0,l().t1)(i)}}(e,s,t,p)),[s,t]),R=(0,o.useCallback)((()=>function(e,t,i,o){u().ZH({environment:e}),i.setState({...i.state,mousePressed:!0}),o.current=!1,C({...x().sidebarResizingStore.state,isResizing:!0},t)}(s,t,d,p)),[s,t,d]),{device:A}=s,P=(0,a().VK)((()=>function(e){const t=function(e){switch(e){case"page":return x().sidebarWidthStore.state;case"secondary_sidebar":const t=x().sidebarExpandedStore.state,i=m().l_();return t?x().sidebarWidthStore.state+i:i;case"update":return S().default.state.width;case"peek":return j().default.state.preferredSidePeekWidth;default:(0,l().t1)(e)}}(e);switch(e){case"page":case"secondary_sidebar":return t;case"peek":case"update":return window.innerWidth-t;default:(0,l().t1)(e)}}(t)),[t]),U=(0,a().Kw)(x().sidebarMouseEnterYStore),V=(0,a().Kw)(i(197666).Z),L=(0,a().VK)((()=>function(e){return{cursor:"col-resize",height:"100%",width:12,marginLeft:"update"===e?-S().default.state.width:-6}}(t)),[t]),E=(0,a().VK)((()=>function(e,t){const i=(0,v().in)(t);return{position:"absolute",left:"peek"===e?0:void 0,right:"peek"!==e?0:void 0,width:0,flexGrow:0,zIndex:"peek"===e?r().YO:1,top:i?0:-1,bottom:i?0:-1,pointerEvents:"auto"}}(t,s)),[t,s]);return V||A.isChromebook?null:(0,_.jsx)(i(654133).Z,{renderTooltip:()=>(0,_.jsx)(N,{type:t}),originRect:new DOMRect(P,U,0,0),delayThreshold:0,placement:"page"===t||"secondary_sidebar"===t?M().Placement.Right:M().Placement.Left,originGap:10,render:e=>(0,_.jsx)("div",{style:E,...(0,i(164079).Z)(e,{onMouseMove:()=>function(e){C({isResizerHovered:!0},e)}(t),onMouseLeave:()=>function(e){C({isResizerHovered:!1},e)}(t),onMouseEnter:T}),children:(0,_.jsx)(i(790964).Z,{onDraggableDragStart:R,onDraggableDragMove:w,onDraggableDragEnd:k,onDraggableDragCancel:b,disableVerticalEdgeScroll:!0,disableHorizontalEdgeScroll:!0,render:e=>(0,_.jsx)("div",{style:L,...e})})})})};function C(e,t){switch(t){case"page":x().sidebarResizingStore.update((t=>({...t,...e})));break;case"update":S().default.update((t=>({...t,...e})));break;case"secondary_sidebar":b().default.update((t=>({...t,...e})));break;case"peek":break;default:(0,l().t1)(t)}}function I(e,t,i){let o;switch(t){case"page":o=e;break;case"secondary_sidebar":o=e-(x().sidebarExpandedStore.state?x().sidebarWidthStore.state:0);break;case"peek":case"update":o=window.innerWidth-e;break;default:(0,l().t1)(t)}const n=function(e){const t=window.innerWidth;switch(e){case"page":return 480;case"update":return Math.min(t/2,v().Nc);case"peek":return(0,p().my)();case"secondary_sidebar":return h().o;default:(0,l().t1)(e)}}(t),a=function(e,t){switch(e){case"page":return x().SIDEBAR_MIN_WIDTH;case"update":return S().AO;case"peek":return j().SIDEPEEK_MIN_WIDTH;case"secondary_sidebar":return h().u;default:(0,l().t1)(e)}}(t);return o>n?n:o<a?a:o}function N(e){let{type:t}=e;const i=(0,s().Fg)(),o=(0,n().O7)(),r=(0,a().VK)((()=>function(e,t){switch(e){case"page":return(0,v().in)(t);case"update":return(0,v().Sx)(t);case"peek":return j().default.state.open;case"secondary_sidebar":return b().default.isOpen();default:(0,l().t1)(e)}}(t,o)),[t,o]),c=i.mediumInvertedTextColor,u=(0,_.jsx)(k().Z,{name:"toggleSidebar"}),p="secondary_sidebar"===t||"update"===t?(0,_.jsx)(d()._H,{defaultMessage:"Close <invertedcolor>Click</invertedcolor>",id:"sidebarResizer.tooltip.closeMessage.noShortcut",values:{invertedcolor:e=>(0,_.jsx)("span",{style:{color:c},children:e}),keyboardShortcut:u}}):(0,_.jsx)(d()._H,{defaultMessage:"Close <invertedcolor>Click or {keyboardShortcut}</invertedcolor>",id:"sidebarResizer.tooltip.closeMessage",values:{invertedcolor:e=>(0,_.jsx)("span",{style:{color:c},children:e}),keyboardShortcut:u}});return(0,_.jsxs)(_.Fragment,{children:[r?p:(0,_.jsx)(d()._H,{defaultMessage:"Lock open <invertedcolor>Click or {keyboardShortcut}</invertedcolor>",id:"sidebarResizer.tooltip.lockMessage",values:{invertedcolor:e=>(0,_.jsx)("span",{style:{color:c},children:e}),keyboardShortcut:u}}),(0,_.jsx)("br",{}),(0,_.jsx)(d()._H,{defaultMessage:"Resize <invertedcolor>Drag</invertedcolor>",id:"sidebarResizer.tooltip.resizeMessage",values:{invertedcolor:e=>(0,_.jsx)("span",{style:{color:c},children:e}),keyboardShortcut:u}})]})}function T(e){x().sidebarMouseEnterYStore.setState(e.clientY)}},910293:(e,t,i)=>{"use strict";i.d(t,{Z:()=>h});var o=i(667294),n=()=>i(146947),a=()=>i(219727),s=()=>i(142735),r=()=>i(26970),d=()=>i(788860),l=()=>i(568017),c=()=>i(513670),u=()=>i(707513),p=()=>i(326966),f=()=>i(628370),g=i(785893);const m={isRepositioning:!1};const h=function(e){const t=(0,o.useRef)(null),n=(0,a().O7)(),{isMobile:d}=(0,a().Fy)(),[l,u]=(0,o.useState)(m),f=(0,o.useCallback)((()=>{u(m)}),[]),{renderControl:h,onFlushTemporaryPosition:y,style:v,source:x,store:S}=e,{isRepositioning:M,image:j,startDragRenderedPosition:k,startDragImageScreenHeight:_}=l,w=(0,s().VK)((()=>0===i(965903).default.state.stores.length),[]),[C,I]=(0,o.useState)(!1),N=(0,s().qz)(e.mouseStore,i(233417).Z),T=(0,s().VK)((()=>N.state.mouseEntered),[N]),R=(0,i(846550).yK)((()=>({dragContainer:{width:"100%",cursor:M?"move":"inherit"},container:{position:"relative",width:"100%",zIndex:1}})),[M]),A=(0,s().VK)((()=>function(e,t,i){return(0,c().hj)(i)?i:function(e,t){if("gallery"===e||"board"===e){const e=t.getFormat().card_cover_position;if((0,c().hj)(e))return e}const i=.5;if(t.isCollectionView()){const e=t.getCollectionStore();if(e){const t=e.getFormat().collection_cover_position;return(0,p().z4)(t)?i:t}}const o=t.getFormat(),n=o.page_cover_position;if((0,c().hj)(n))return n;return i}(e,t)}(x,S,l.temporaryPosition)),[l.temporaryPosition,x,S]);(0,o.useEffect)((()=>{const e=e=>{const i=t.current;i&&!i.contains(e.target)&&M&&y({imagePosition:A,reset:()=>{N.reset(),f()}})};return window.addEventListener("mousedown",e),()=>window.removeEventListener("mousedown",e)}),[A,M,N,y,f]),M&&!w&&f();const P=(0,o.useMemo)((()=>(0,c().P2)((e=>{N.setState({...N.state,mouseEntered:!0})}),100)),[N]),U=(0,o.useMemo)((()=>(0,c().Ds)((e=>{N.setState({...N.state,mouseEntered:!1})}),100)),[N]),V=(0,o.useCallback)(((e,t)=>{i(879952).ZH({environment:n});const o=new Image;o.onload=()=>{u((e=>({...e,isRepositioning:!0,image:o})))},t&&(o.src=t)}),[n]),L=(0,o.useCallback)((e=>{y({imagePosition:A,reset:()=>{f()}})}),[A,y,f]),E=(0,o.useCallback)((e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,i(474788).E)(t)&&I(!0)}),[]),Z=(0,o.useCallback)((()=>{I(!0)}),[]),B=(0,o.useCallback)((e=>{if(j&&M){const e=t.current;if(e&&e instanceof Element){const t=e.getBoundingClientRect().width/j.width*j.height;u((e=>({...e,startDragImageScreenHeight:t,startDragRenderedPosition:A})))}}}),[j,A,M]),H=(0,o.useCallback)((e=>{if(M){const t=e.diffY/(_||0)+(k||0);u((e=>({...e,temporaryPosition:(0,c().NM)((0,i(120420).Z)(t,0,1),4)})))}}),[M,_,k]),K=(0,o.useCallback)((()=>{u((e=>({...e,startDragImageScreenHeight:void 0,startDragRenderedPosition:void 0})))}),[]),O=(0,s().VK)((()=>h({handleRepositionClick:V,handleSavePositionClick:L,handleCancelClick:f,isVisible:d||T||C||M,isRepositioning:M})),[V,L,C,d,M,T,h,f]);return(0,g.jsxs)("div",{ref:t,onFocus:E,onBlur:Z,onMouseEnter:P,onMouseMove:P,onMouseLeave:U,...(0,r().iv)(R.container,v),children:[(0,g.jsx)(i(790964).Z,{onDraggableDragStart:B,onDraggableDragMove:H,onDraggableDragEnd:K,onDraggableDragCancel:K,disabled:!M,render:t=>(0,g.jsx)("div",{...(0,r().iv)(R.dragContainer),...t,children:e.render({imagePosition:A,isRepositioning:M})})}),(0,g.jsx)(b,{small:e.small,isRepositioning:M}),O]})};function b(e){let{small:t,isRepositioning:i}=e;if(t)return null;const o={background:l().ZP.blackWithAlpha(.4),borderRadius:4,color:l().ZP.white,fontSize:12,fontFamily:u().F5(n().locale).sans,width:180,left:"calc(50% - 90px)",padding:"0.3em 1.5em 0.3em",pointerEvents:"none",position:"absolute",top:"calc(50% - 10px)",textAlign:"center"};return(0,g.jsx)(f().Z,{visible:i,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:o,children:(0,g.jsx)(d()._H,{defaultMessage:"Drag image to reposition",id:"withImageRepositioning.dragImage.text"})})}},83340:(e,t,i)=>{"use strict";i.r(t),i.d(t,{PageAnalyticsPageOptOut:()=>y,TopbarPageAnalyticsOptOutMenu:()=>b,TopbarPageAnalyticsOptOutMenuStore:()=>h});i(667294);var o=()=>i(219727),n=()=>i(142735),a=()=>i(788860),s=()=>i(261930),r=()=>i(148126),d=()=>i(998901),l=()=>i(104088),c=()=>i(876822),u=()=>i(78078),p=()=>i(967092),f=()=>i(765513),g=()=>i(579807),m=i(785893);const h=i(263184).default.createValue({isOpen:!1,rect:void 0},{name:"TopbarPageAnalyticsOptOutMenuStore"});function b(){const e=(0,o().O7)(),t=(0,n().VK)((()=>h.state.isOpen),[]),i=(0,n().VK)((()=>h.state.rect),[]),s=(0,n().VK)((()=>c().default.state.mainEditorCurrentBlockStore),[]);return s?(0,m.jsx)(p().ZP,{popupType:e.device.isMobile?l().k.SlideUp:l().k.Popup,alignmentToOrigin:d().Alignment.Center,open:t,render:()=>(0,m.jsx)("div",{style:{minWidth:360,padding:16},children:(0,m.jsxs)(u().sg,{gap:16,children:[(0,m.jsx)("div",{style:{fontSize:16,fontWeight:500},children:(0,m.jsx)(a()._H,{id:"TopbarPageAnalyticsOptOutMenu.heading",defaultMessage:"Privacy settings"})}),(0,m.jsx)(y,{store:s})]})}),originRect:i,onDismiss:()=>h.setState({isOpen:!1,rect:void 0})}):null}function y(e){const t=(0,o().O7)(),i=(0,n().VK)((()=>{const e=c().default.state.currentSpaceViewStore;return null==e?void 0:e.getSettings()}),[]),d=(0,n().VK)((()=>{const t=null==i?void 0:i.page_analytics_opt_out_list;return null==t?void 0:t.includes(e.store.id)}),[i,e.store.id]);return(0,m.jsx)(g().Z,{type:"dropdown",currentOption:d?"do_not_record":"record",options:[{key:"record",label:(0,m.jsx)(a()._H,{id:"page_analytics.opt_out.record",defaultMessage:"Record"})},{key:"do_not_record",label:(0,m.jsx)(a()._H,{id:"page_analytics.opt_out.do_not_record",defaultMessage:"Don't record"})}],onSelectOption:i=>{"do_not_record"===i?s().kY(t,e.store.id):s().pu(t,e.store.id)},isMobile:t.device.isMobile,title:(0,m.jsx)(a()._H,{id:"page_analytics.opt_out.title",defaultMessage:"My view history"}),caption:(0,m.jsx)(a()._H,{id:"page_analytics.opt_out.caption",defaultMessage:"Page editors can see my view history for this page. <inlinelink>Learn more</inlinelink>.",values:{inlinelink:e=>(0,m.jsx)(f().Z,{external:!0,href:(0,r().UY)("guides.pageAnalytics"),children:e})}}),captionStyle:{maxWidth:270}})}},562219:(e,t,i)=>{"use strict";i.d(t,{J:()=>a});var o=()=>i(677559);const n=new(o().Ss)("UpdateSidebarTabInfo",(async()=>await Promise.all([i.e(39938),i.e(18216),i.e(23006),i.e(60895)]).then(i.bind(i,931656)))),a=(0,o().kF)(n,(e=>e.UpdateSidebarTabInfo))},761936:(e,t,i)=>{"use strict";i.d(t,{L:()=>c});var o=()=>i(642240),n=()=>i(338530);const a={ko:()=>i.e(60692).then(i.bind(i,299435)),es:()=>i.e(20883).then(i.bind(i,960142)),de:()=>i.e(83224).then(i.bind(i,299606)),fr:()=>i.e(85038).then(i.bind(i,604240)),pt:()=>i.e(72138).then(i.bind(i,515748)),zh:()=>i.e(17835).then(i.bind(i,240169)),ja:()=>i.e(96377).then(i.bind(i,770488)),da:()=>i.e(57677).then(i.bind(i,317410)),fi:()=>i.e(66970).then(i.bind(i,266265)),nb:()=>i.e(93031).then(i.bind(i,189761)),nl:()=>i.e(62579).then(i.bind(i,360701)),sv:()=>i.e(60382).then(i.bind(i,575660))};let s=!1,r=!1;async function d(e){for(const[i,n]of Object.entries(e.emojiLocaleKeywords)){var t;o().Q4[i]={...o().Q4[i],keywords:[...n,...(null===(t=o().Q4[i])||void 0===t?void 0:t.keywords)||[]]}}await n().Z.waitUntilLoaded(),n().Z.update((t=>{let{emojiByName:i,...o}=t;return{...o,emojiByName:{...i,...e.emojiByName}}}))}async function l(){if(s)return;const[e]=i(146947).locale.split("-");e in a&&(await d(await a[e]()),s=!0)}const c=(0,i(924665).Z)((async()=>{await async function(){r||(await d(await i.e(83552).then(i.bind(i,716373))),r=!0)}(),await l()}))},110372:(e,t,i)=>{"use strict";i.d(t,{YF:()=>l,bl:()=>d,gF:()=>s,i6:()=>c,lZ:()=>r});var o=()=>i(954949),n=()=>i(594546),a=()=>i(749826);function s(e,t){const i=(0,o().Si)(t.callout_key);i&&(t.placement_key=(0,o().pU)(i)),(0,n().j)({environment:e,event:{eventName:"callout_show",eventProperties:t}}),a().default.logEvent("callout_show",t.callout_key)}function r(e,t){const i=(0,o().Si)(t.callout_key);i&&(t.placement_key=(0,o().pU)(i)),(0,n().j)({environment:e,event:{eventName:"callout_click",eventProperties:t}}),a().default.logEvent("callout_click",t.callout_key)}function d(e,t){const i=(0,o().Si)(t.callout_key);i&&(t.placement_key=(0,o().pU)(i)),(0,n().j)({environment:e,event:{eventName:"callout_dismiss",eventProperties:t}}),a().default.logEvent("callout_dismiss",t.callout_key)}function l(e,t){const{eligible_callouts:i,required_arg_timeout:o,required_args_run_duration:a,eligibility_timeouts:s,blocklist:r}=t;(0,n().j)({environment:e,event:{eventName:"callout_coordinator_resolved",eventProperties:{eligible_callouts:i,required_arg_timeout:o,required_args_run_duration:a,eligibility_timeouts:s,blocklist:r}}})}function c(e,t){(0,n().j)({environment:e,event:{eventName:"callout_feature_interaction",eventProperties:t}})}},156216:(e,t,i)=>{"use strict";i.d(t,{PQ:()=>A,ZP:()=>P,b8:()=>T});i(241792);var o=i(667294),n=()=>i(219727),a=()=>i(142735),s=()=>i(846550),r=()=>i(297565),d=()=>i(562137),l=()=>i(507119),c=()=>i(235605),u=()=>i(366825),p=()=>i(788860),f=()=>i(696459),g=()=>i(603274),m=()=>i(269299),h=()=>i(827973),b=()=>i(448419),y=()=>i(1910),v=()=>i(198829),x=()=>i(255577),S=()=>i(388284),M=()=>i(654133),j=()=>i(67961),k=()=>i(949842),_=()=>i(352230),w=()=>i(76225),C=()=>i(326264),I=i(785893);const N=(0,p().vU)({changePageNotificationSettings:{defaultMessage:"Change page notification settings",id:"inboxActionsMenu.notificationSettings.tooltipMessage"},markUnread:{defaultMessage:"Mark this notification as unread",id:"inboxActionsMenu.markNotificationAsUnread.tooltipMessage"},markRead:{defaultMessage:"Mark this notification as read",id:"inboxActionsMenu.markNotificationAsRead.tooltipMessage"},archive:{defaultMessage:"Archive this notification",id:"inboxActionsMenu.handleArchive.tooltipMessage"},unarchive:{defaultMessage:"Unarchive",id:"inboxActionsMenu.handleUnarchive.tooltipMessage"}}),T=96;function R(e){const{notification:t,rootStore:c,onArchiveClicked:f,onUnarchiveClicked:h,onMarkAsReadClicked:v,onMarkAsUnreadClicked:x}=e,S=(0,n().O7)(),j=(0,n().Fy)(),_=(0,p().YB)(),T=(0,o.useContext)(i(880290).B),R=(0,a().VK)((()=>!!t&&(0,i(309672).$2)(t.type)),[t]),P=(0,a().VK)((()=>{const e=null==t?void 0:t.navigable_block_id;if(e)return i(826955).G.createChildStore(c,{table:i(396136).iU,id:e})}),[c,t]),U=(0,a().VK)((()=>null==P?void 0:P.getFollowSettingsKey()),[P]),V=(0,a().VK)((()=>{if(!U)return[];if(!P)return[];return C().Zk({followSettingsKey:U,environment:S,blockStore:P,from:"inbox"})}),[U,S,P]),L=(0,a().VK)((()=>R&&V.length>0),[R,V]),E=(0,o.useCallback)((e=>{t&&(0,k().ZP)({event:e,context:k().Af.NotificationClick,callback:()=>{f(),m().createAndCommit({userAction:"InboxActionsMenu.handleArchive",environment:S,canUndo:!0,perform:e=>{g().aZ({notification:t,rootStore:c,transaction:e})}})}})}),[S,t,f,c]),Z=(0,o.useCallback)((e=>{t&&(0,k().ZP)({event:e,context:k().Af.NotificationClick,callback:()=>{h(),m().createAndCommit({userAction:"Activity.handleUnarchive",environment:S,canUndo:!0,perform:e=>{g().E1({notificationId:t.id,visited:!1,rootStore:c,transaction:e})}})}})}),[S,t,h,c]),B=(0,o.useCallback)((e=>{t&&(0,k().ZP)({event:e,context:k().Af.NotificationClick,callback:()=>{t.read?x():v(),m().createAndCommit({userAction:"InboxActionsMenu.toggleNotificationReadStatus",environment:S,canUndo:!0,perform:e=>{g().$h({notification:t,rootStore:c,transaction:e,read:!t.read})}})}})}),[S,t,v,x,c]),H=(0,o.useCallback)((()=>{U&&P&&t&&i(253502).Z8({environment:S,notificationId:t.id,pageId:P.pointer.id,isCurrentlyFollowing:(0,i(603332).Z)(U).following,from:"inbox"})}),[S,P,U,t]),K=(0,s().yK)((e=>{const o={fill:e.icon.secondary,padding:(j.isMobile,0),width:(j.isMobile,22),height:(j.isMobile,22)};return{container:{display:"flex",gap:1,height:"min-content",padding:2,borderWidth:j.isMobile?0:1,borderStyle:"solid",borderColor:e.stroke.primary,background:e.buttonGroupBackground,borderRadius:6,boxShadow:j.isMobile?void 0:"0px 2px 4px 0px rgba(22, 29, 27, 0.02)"},button:{height:j.isMobile?30:24,width:j.isMobile?30:24},icon:{...o},iconVisited:{...o,...j.isMobile?{height:17.5,width:17.5}:{height:15,width:15}},iconUnvisited:{...o,marginTop:-.5,height:17.75,width:17.75},iconMarkUnread:{...o,...t.read&&{height:21,width:21},...!t.read&&{height:20.5,width:20.5}},headerLabel:{paddingLeft:16,paddingRight:16,paddingTop:10,fontWeight:i(707513).Ue.semibold}}}),[j.isMobile,t.read]),O=(0,w().aE)();return t.visited?(0,I.jsx)("div",{style:K.container,children:(0,I.jsx)(M().Z,{renderTooltip:()=>_.formatMessage(N.unarchive),render:e=>(0,I.jsx)(y().Z,{ariaLabel:_.formatMessage(N.unarchive),style:K.button,icon:u().s,iconStyle:K.iconVisited,onClick:Z,...e})})}):(0,I.jsxs)("div",{style:K.container,children:[L&&(0,I.jsx)(M().Z,{renderTooltip:()=>(0,I.jsx)(p()._H,{...N.changePageNotificationSettings}),render:e=>(0,I.jsx)(b().ZP,{style:O.popup,popupType:j.isMobile?b().Z4.SlideUp:b().Z4.Popup,alignmentToOrigin:b().vR.Start,placementToOrigin:b().pO.Bottom,render:e=>(0,I.jsx)(A,{blockStore:P,notification:t,handlers:{handleUnarchive:Z,handleArchive:E,toggleNotificationReadStatus:B},closePopup:()=>e.close()}),renderOrigin:t=>(0,I.jsx)(y().Z,{ariaLabel:_.formatMessage(N.changePageNotificationSettings),style:K.button,icon:i(394480).t,iconStyle:K.iconUnvisited,...e,...(0,i(164079).Z)(t,{onClick:()=>H()})})})},"pageNotificationSettings"),(0,I.jsx)(M().Z,{renderTooltip:()=>_.formatMessage(t.read?N.markUnread:N.markRead),render:e=>(0,I.jsx)(y().Z,{ariaLabel:_.formatMessage(t.read?N.markUnread:N.markRead),style:K.button,icon:t.read?l().F:d().F,iconStyle:K.iconMarkUnread,onClick:B,...e})},"markUnread"),"activity"!==T&&(0,I.jsx)(M().Z,{renderTooltip:()=>_.formatMessage(N.archive),render:e=>(0,I.jsx)(y().Z,{ariaLabel:_.formatMessage(N.archive),style:K.button,icon:r().H,iconStyle:K.icon,onClick:E,...e})},"archive")]})}function A(e){const{blockStore:t,notification:i,handlers:o,closePopup:g}=e,{handleArchive:m,handleUnarchive:b,toggleNotificationReadStatus:y}=o,M=(0,n().O7)(),k=(0,n().Fy)(),T=(0,p().YB)(),R=(0,a().VK)((()=>null==t?void 0:t.getFollowSettingsKey()),[t]),A=(0,a().VK)((()=>{if(!R)return[];if(!t)return[];return C().Zk({followSettingsKey:R,environment:M,blockStore:t,from:"inbox"})}),[R,M,t]),P=(0,w().aE)(),U=(0,s().yK)((()=>({iconContainer:{display:"flex",justifyContent:"center",alignItems:"center",...P.icon},icon:{height:24,width:24}})),[P.icon]);return(0,I.jsx)(v().Z,{menuType:_().o.Popup,height:k.isMobile?"50vh":void 0,minWidth:250,maxWidth:k.isMobile?"100vw":void 0,scrollerStyle:P.menuScroller,header:!k.isMobile&&(0,I.jsx)(j().Z,{style:P.header,isSmall:!k.isMobile,isSecondaryColor:!k.isMobile,children:(0,I.jsx)(p()._H,{id:"UpdateSidebarTabUpdatesHeader.pageNotificationSettings.label",defaultMessage:"Page notification settings"})}),children:(0,I.jsx)(x().ZP,{type:x().iW.Vertical,sections:[...k.isMobile?[{key:"Actions title",render:()=>(0,I.jsx)(j().Z,{style:P.header,isSmall:!k.isMobile,isSecondaryColor:!k.isMobile,children:(0,I.jsx)(p()._H,{id:"inbox.actionsSectionTitle.label",defaultMessage:"Actions"})}),items:[]},{key:"Actions",render:e=>(0,I.jsx)(S().Z,{...e,topBorder:!1,style:P.sectionMenuItem}),items:["markAsReadOrUnread","archive"].map(((e,t)=>{const o=t===A.length-1,n=k.isMobile&&o;return{key:e,render:t=>"archive"===e?(0,I.jsx)(h().Z,{...t,style:{...P.buttonMenuItem,...n&&P.transparentButtonMenuItemBorder},pressedStyle:P.buttonMenuItemPressed,icon:i.visited?(0,u().s)({...P.icon,padding:3}):(0,r().H)(P.icon),title:T.formatMessage(i.visited?N.unarchive:N.archive),titleStyle:P.title}):"markAsReadOrUnread"===e?(0,I.jsx)(h().Z,{...t,style:{...P.buttonMenuItem,...n&&P.transparentButtonMenuItemBorder},pressedStyle:P.buttonMenuItemPressed,icon:i.read?(0,I.jsx)("div",{style:U.iconContainer,children:(0,l().F)(U.icon)}):(0,I.jsx)("div",{style:U.iconContainer,children:(0,d().F)(U.icon)}),title:T.formatMessage(i.read?N.markUnread:N.markRead),titleStyle:P.title}):void(0,f().t1)(e),action:t=>{let{event:o}=t;"markAsReadOrUnread"===e?y(o):"archive"===e?i.visited?b(o):m(o):(0,f().t1)(e),g()}}}))}]:[],...k.isMobile?[{key:"Page notification settings title",render:()=>(0,I.jsx)(j().Z,{style:P.subheader,isSmall:!k.isMobile,isSecondaryColor:!k.isMobile,children:(0,I.jsx)(p()._H,{id:"inbox.notifyMeForSectionTitle.label",defaultMessage:"Notify me for"})}),items:[]}]:[],{key:"Page notification settings",render:e=>(0,I.jsx)(S().Z,{...e,topBorder:!1,style:P.sectionMenuItem}),items:A.map(((e,t)=>{const i=t===A.length-1,o=k.isMobile&&i;return{key:e.action.analyticsName,render:t=>(0,I.jsx)(h().Z,{...t,style:{...P.buttonMenuItem,...o&&P.transparentButtonMenuItemBorder},pressedStyle:P.buttonMenuItemPressed,title:e.title,titleStyle:P.title,right:e.isSelectedOption?(0,c().k)(P.checkIcon):void 0}),action:()=>{e.action.action({environment:M,blocks:[],lazyDependencies:{clipboardActions:void 0,formulasModule:void 0,markdownLinkifyIt:void 0,tinyMceMicrosoftWordPasteFilter:void 0},publicEditMode:void 0}),g()}}}))}],initialFocus:void 0,onAccept:()=>g()})})}const P=o.memo(R)},462274:(e,t,i)=>{"use strict";i.d(t,{o:()=>l});i(667294);var o=()=>i(142735),n=()=>i(788860),a=()=>i(696459),s=()=>i(782698),r=()=>i(763589),d=i(785893);function l(){const e=(0,o().VK)((()=>(0,r().Fz)()),[]);switch(e){case"unread_and_read":case"unread_only":return(0,d.jsx)(s().Z,{message:(0,d.jsx)(n()._H,{defaultMessage:"You'll be notified here for @mentions, page activity, and page invites",id:"inbox.filterEmptyState.nonArchivedMessage"}),title:(0,d.jsx)(n()._H,{defaultMessage:"You're all caught up",id:"inbox.filterEmptyState.nonArchivedTitle"})});case"archived_only":return(0,d.jsx)(s().Z,{message:(0,d.jsx)(n()._H,{defaultMessage:"Any Inbox updates you archived will show up here.",id:"inbox.filterEmptyState.archivedMessage"}),title:(0,d.jsx)(n()._H,{defaultMessage:"No archived updates",id:"inbox.filterEmptyState.archivedTitle"})});case"all_updates":return(0,d.jsx)(s().Z,{message:(0,d.jsx)(n()._H,{defaultMessage:"Any activity in the workspace will show up here.",id:"inbox.filterEmptyState.allPagesMessage"}),title:(0,d.jsx)(n()._H,{defaultMessage:"No activity in the workspace",id:"inbox.filterEmptyState.allPagesTitle"})});default:(0,a().t1)(e)}}},603332:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var o=()=>i(431143),n=()=>i(696459);function a(e,t){switch(e){case"all":return{following:!0,followSettings:{...(0,o().yI)({explicitly_set_by_user:!0}),feed_setting:t}};case"important":return{following:!0,followSettings:{...(0,o().GC)({explicitly_set_by_user:!0}),feed_setting:t}};case"comments":return{following:!0,followSettings:{...(0,o().r$)({explicitly_set_by_user:!0}),feed_setting:t}};case"none":return{following:!1,followSettings:{...(0,o().vU)({explicitly_set_by_user:!0}),feed_setting:t}};default:(0,n().t1)(e)}}},295608:(e,t,i)=>{"use strict";i.r(t),i.d(t,{getNotificationValues:()=>l,getState:()=>d,setState:()=>r});i(241792);var o=()=>i(114882),n=()=>i(779565),a=()=>i(876822);let s={};function r(e){s={...s,...e}}function d(){return s}function l(){const e=s.result;if(!e)return null;const t=a().default.state.currentSpaceStore;return t?e.map((e=>{const i={table:n().uX,id:e,spaceId:t.getSpaceId()},a=t.getRecordValue(i),s=null==a?void 0:a.activity_id;if(s&&a){const e={table:o().TY,id:s,spaceId:t.getSpaceId()};a.activity=t.getRecordValue(e)}return a})):null}},134078:(e,t,i)=>{"use strict";i.r(t),i.d(t,{GetNotifiedFor:()=>c,InboxActionsMenu:()=>ci().ZP,InboxFilterForUnreadButton:()=>pi,InboxMentionsActionButtons:()=>bi,InboxModalHeader:()=>Mi,InboxNotificationSettingsButton:()=>Lt,InboxRefreshAllTabButton:()=>xi,MobileInboxPopup:()=>si,NotificationGroupActionsMenu:()=>Li,NotificationInboxPanelContent:()=>Ai,SidebarInboxButton:()=>ji().t,TopbarUpdatesMenu:()=>w,UnreadMentionsBadge:()=>yi().Z,UpdateSidebar:()=>ft});var o=i(667294),n=()=>i(142735),a=()=>i(846550),s=()=>i(788860),r=()=>i(707513),d=()=>i(621913),l=i(785893);function c(e){const{navigableBlockStore:t,from:i,buttonPopupStore:o,style:c}=e,u=(0,n().VK)((()=>t.isPageBlock()),[t]),p=(0,a().yK)((e=>({label:{fontSize:r().JB.UIRegular.desktop,color:e.regularTextColor,fontWeight:r().Ue.medium},border:{border:`1px solid ${e.outlineButtonBorder}`,borderRadius:4,marginTop:8}})),[]);return u?(0,l.jsxs)("div",{style:c,children:[(0,l.jsx)("div",{style:p.label,children:(0,l.jsx)(s()._H,{id:"UpdateSidebarTabUpdatesHeader.pageNotificationSettings.label",defaultMessage:"Page notification settings"})}),(0,l.jsx)("div",{style:p.border,children:(0,l.jsx)(d().h,{blockStore:t,moreProminentStyling:!0,from:i,buttonPopupStore:o})})]}):null}var u=()=>i(857773),p=()=>i(198829),f=()=>i(247724),g=()=>i(352230),m=()=>i(219727),h=()=>i(467171),b=()=>i(539245),y=()=>i(590972),v=()=>i(749826),x=()=>i(844659);const S=new(i(529048).Z);var M=()=>i(657174);function j(){return(0,l.jsx)(s()._H,{id:"updateSidebar.header.updatesLabel",defaultMessage:"Updates"})}const k="UpdateSidebar";function _(e){const t=(0,m().O7)(),{enablePageAnalytics:i,navigableBlockStore:o,inPeekView:d,noTopMargin:c}=e,u=(0,a().yK)((e=>({updatesHeaderStyle:{position:"relative",pointerEvents:"auto",marginTop:c?0:h().R6(t.device.isElectronMac),paddingTop:4,width:"100%",background:d?e.popoverBackground:e.contentBackground,padding:"12px 12px 12px 16px",borderBottom:`1px solid ${e.regularDividerColor}`},getNotifiedFor:{...i?{padding:8}:{paddingBottom:14}},label:{fontSize:14,color:e.regularTextColor,fontWeight:r().Ue.medium}})),[c,t.device.isElectronMac,d,i]),p=(0,n().VK)((()=>y().default.state.currentSubTab),[]),g=d?S:x().Z,_=(0,n().VK)((()=>"on"===v().default.getEligibleGroup({experimentId:"remove_updates_topbar_button_v2",defaultGroup:"control",disableExposureLogging:!0})),[]);return(0,l.jsxs)("div",{style:{...u.updatesHeaderStyle,...i?{padding:"0 6px"}:{}},className:f().cFM,children:[!_&&(0,l.jsx)(M().Xm,{navigableBlockStore:o,from:"page_updates",buttonPopupStore:g,style:u.getNotifiedFor}),i?(0,l.jsx)(b().ZP,{tabs:[(0,l.jsx)(j,{},"updates"),(0,l.jsx)(s()._H,{id:"updateSidebar.header.analyticsLabel",defaultMessage:"Analytics"},"analytics")],selectedIndex:p,onChange:e.onTabChange,style:{...u.label,padding:0,boxShadow:"none"},tabStyle:{padding:"12px 0"},idPrefix:k}):(0,l.jsx)("div",{style:u.label,children:(0,l.jsx)(j,{})})]})}function w(e){const{blockStore:t,spaceStore:i}=e,o=function(e){const{spaceStore:t,blockStore:i}=e,o=(0,n().VK)((()=>{var e,t;return(null==i||null===(e=i.getModel())||void 0===e?void 0:e.isCollectionView())?null===(t=i.getCollectionPointer())||void 0===t?void 0:t.id:void 0}),[i]);if(!t)return;const a=i.id,s=t.id;return{navigableBlockId:a,collectionId:o,spaceId:s}}({blockStore:t,spaceStore:i});return o?(0,l.jsx)(p().Z,{menuType:g().o.Popup,className:f().KLh,header:(0,l.jsx)(_,{navigableBlockStore:t,enablePageAnalytics:!1,noTopMargin:!0,inPeekView:!0}),children:(0,l.jsx)(u().Z,{empty:()=>(0,l.jsx)(C,{}),source:"updates_sidebar",navigableBlockStore:t,...o},t.id)}):null}function C(){const e=(0,a().yK)((e=>({container:{marginTop:64,textAlign:"center",paddingLeft:18,paddingRight:18,marginBottom:64},content:{fontSize:14,color:e.mediumTextColor,marginTop:4}})),[]);return(0,l.jsx)("div",{style:e.container,children:(0,l.jsx)("div",{style:e.content,children:(0,l.jsx)("span",{children:(0,l.jsx)(s()._H,{defaultMessage:"No edits in this page yet.",id:"topbar.updatesButton.emptyState"})})})})}var I=()=>i(492522),N=()=>i(696459),T=()=>i(381140),R=()=>i(628370),A=()=>i(299519),P=()=>i(123256),U=()=>i(562219),V=()=>i(345918),L=()=>i(466970),E=()=>i(70191),Z=()=>i(341643),B=()=>i(355435),H=()=>i(547046),K=()=>i(793935),O=()=>i(589525),F=()=>i(876822),D=()=>i(311562),z=()=>i(482162),W=()=>i(745624),G=()=>i(830337),q=(i(122556),i(582845),i(250570),i(533019),i(721473),i(788208),i(22624),i(241792),()=>i(874018)),Y=()=>i(37272),$=()=>i(842574),X=()=>i(832924),J=()=>i(677559),Q=()=>i(520849),ee=()=>i(619779),te=()=>i(826955),ie=(i(267602),i(653476),i(228244),()=>i(955620)),oe=()=>i(603332);function ne(e){const{userId:t,blockStore:i,discussionStores:o,groupIdsUserIsIn:n}=e,a=(0,oe().Z)(i.getFollowSettingsKey()).following?o:o.filter((e=>function(e){const{userId:t,discussionStore:i,groupIdsUserIsIn:o}=e;return Boolean(i.getCommentStores().some((e=>e.getCreatedById()===t||function(e){const{userId:t,commentStore:i,groupIdsUserIsIn:o}=e,n=ie().lcG(i.getText());if(n.includes(t))return!0;const a=ie().YOR(i.getText());if(a.some((e=>o.has(e.groupId))))return!0;return!1}({userId:t,commentStore:e,groupIdsUserIsIn:o}))))}({userId:t,discussionStore:e,groupIdsUserIsIn:n})));return a.filter((e=>function(e){const{userId:t,discussionStore:i}=e;return Boolean(i.getCommentStores().some((e=>e.getCreatedById()&&e.getCreatedById()!==t)))}({userId:t,discussionStore:e})))}function ae(e){const{timeViewed:t}=e,i=(0,m().O7)(),o=(0,n().VK)((()=>F().default.state.mainEditorCurrentBlockStore),[]),a=(0,n().VK)((()=>i.currentUser.id),[i]),{value:s}=(0,J().XJ)(q().commentsDependency),r=(0,n().VK)((()=>s?s.discussionHelpers.getDiscussionsForSidebar({blockStore:o,currentUserId:a,ignoreAfterTime:0}):[]),[s,o,a]),d=(0,n().VK)((()=>a&&o?ne({userId:a,blockStore:o,discussionStores:r,groupIdsUserIsIn:new Set(ee().Z.state.spacePermissionGroupIds)}):[]),[a,o,r]);return(0,l.jsx)($().T,{type:Q().Z.Y,className:f().Xsh,ref:se,children:o&&d.map((e=>{const t=e.getRecordStoreUIParent(),i=t instanceof te().G?t:o;return(0,l.jsx)("div",{style:{border:"1px solid"},children:(0,l.jsx)(q().gU,{store:e,blockStore:i,format:Y().DiscussionFormat.Sidebar,isFirst:!1,isOnly:!1,showResolveButtonByDefaultIfPossible:!1,discussionLocation:"updates_sidebar",showAllRepliesAfterTimestamp:0})},e.id)}))})}function se(e){X().default.UpdateSidebarCommentScroller=e}var re=()=>i(730120),de=(i(916054),i(749411),i(731107),()=>i(239297)),le=()=>i(146947),ce=()=>i(646574),ue=()=>i(874459),pe=()=>i(801812),fe=()=>i(826341),ge=()=>i(414294),me=()=>i(165940),he=()=>i(456681),be=()=>i(409873),ye=()=>i(168741),ve=()=>i(996106),xe=()=>i(934158),Se=()=>i(696056),Me=()=>i(989478),je=()=>i(513670),ke=()=>i(632314),_e=()=>i(372931),we=()=>i(824462),Ce=()=>i(853686),Ie=()=>i(196587),Ne=()=>i(871953),Te=()=>i(758018),Re=()=>i(852465),Ae=()=>i(148126),Pe=()=>i(407544),Ue=()=>i(998901),Ve=()=>i(70751),Le=()=>i(18281),Ee=()=>i(656221),Ze=()=>i(448419),Be=()=>i(78078),He=()=>i(312578),Ke=()=>i(661297),Oe=()=>i(654133),Fe=()=>i(634760),De=()=>i(67961),ze=()=>i(981583),We=()=>i(304109),Ge=()=>i(83340);const qe=Date.now();function Ye(e){let{store:t,spaceId:i,isDisabledForWorkspace:r}=e;const[d,c]=(0,o.useState)("last_28_days"),[u,f]=(0,o.useState)({state:r?"disabled-for-workspace":"loading"}),h=(0,m().O7)(),b=(0,a().Fg)(),y=(0,n().VK)((()=>{const{currentSpaceStore:e}=F().default.state;return null==e?void 0:e.getName()}),[]),v=(0,n().VK)((()=>{switch(d){case"last_7_days":return 7;case"last_28_days":return 28;case"last_90_days":return 90;case"all_time":return}}),[d]);(0,o.useEffect)((()=>{r||async function(){const e=await we().callApi({eventName:"getPageAnalytics",environment:h,data:{pageId:t.id,spaceId:i,days:v}});if("failed"===e.type)return void f({state:"empty"});const o=e.data.map((e=>{let{ds:t,total_views:i,unique_views:o}=e;return{ds:t,values:{total_views:i,unique_views:o}}}));o.filter((e=>{let{ds:t}=e;return ue().OQ.isoToUnixMs(t,"UTC")??qe<=qe})).every((e=>{let{values:t}=e;return 0===t.total_views}))?f({state:"empty"}):f({state:"loaded",data:o})}()}),[h,t.id,r,i,v]);const x=(0,a().yK)((e=>({fullHeight:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"}})),[]);return"loading"===u.state?(0,l.jsx)("div",{style:x.fullHeight,children:(0,l.jsx)(He().Z,{legacySize:32})}):"empty"===u.state?(0,l.jsx)("div",{style:x.fullHeight,children:(0,l.jsx)(rt,{heading:(0,l.jsx)(s()._H,{id:"page_analytics.empty.heading",defaultMessage:"No page analytics yet"}),description:(0,l.jsx)(s()._H,{id:"page_analytics.empty.description",defaultMessage:"It may take some time for page view information to appear."})})}):"disabled-for-workspace"===u.state?(0,l.jsx)("div",{style:x.fullHeight,children:(0,l.jsx)(rt,{heading:(0,l.jsx)(s()._H,{id:"page_analytics.disabled.heading",defaultMessage:"Page viewership tracking is disabled"}),description:(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:16},children:[y?(0,l.jsx)(s()._H,{id:"page_analytics.disabled.description",defaultMessage:"Page viewership and analytics is turned off for all pages in {name}",values:{name:y}}):(0,l.jsx)(s()._H,{id:"page_analytics.disabled.description.unnamed",defaultMessage:"Page viewership and analytics is turned off for all pages in your space"}),(0,l.jsxs)("a",{href:(0,Ae().UY)("guides.pageAnalytics"),target:"_blank",style:{display:"flex",gap:4,color:b.regularTextColor,alignItems:"center",textDecoration:"none",cursor:"pointer"},children:[(0,he().m)({width:14,height:14}),(0,l.jsx)(De().Z,{isSmall:!0,children:(0,l.jsx)(s()._H,{id:"page_analytics.disabled.learnMore",defaultMessage:"Learn more"})})]})]})})}):(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%"},children:[(0,l.jsxs)(Be().sg,{grow:1,gap:16,children:[(0,l.jsx)(Je,{store:t,data:u.data,currentFilter:d,onChangeFilter:c}),(0,l.jsx)(et,{store:t}),(0,l.jsx)(st,{spaceId:i,store:t})]}),(0,l.jsxs)("div",{style:{borderTop:`1px solid ${b.regularDividerColor}`,padding:"12px 16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,l.jsx)(Ze().ZP,{renderOrigin:e=>{let{onClick:t}=e;return(0,l.jsx)(Ke().Z,{onClick:t,icon:ye().H,children:(0,l.jsx)(s()._H,{id:"page_analytics.timeseries.settings",defaultMessage:"Settings"})})},popupType:h.device.isMobile?Ze().Z4.SlideUp:Ze().Z4.Popup,render:()=>(0,l.jsx)(p().Z,{menuType:g().o.Popup,width:460,children:(0,l.jsx)("div",{style:Xe,children:(0,l.jsx)(Ge().PageAnalyticsPageOptOut,{store:t})})})}),(0,l.jsxs)("a",{href:(0,Ae().UY)("guides.pageAnalytics"),target:"_blank",style:{display:"flex",gap:4,color:b.regularTextColor,alignItems:"center",textDecoration:"none",cursor:"pointer"},children:[(0,he().m)({width:14,height:14}),(0,l.jsx)(De().Z,{isSmall:!0,children:(0,l.jsx)(s()._H,{id:"page_analytics.timeseries.learnMore",defaultMessage:"Learn more"})})]})]})]})}const $e=175,Xe={margin:"8px 16px",pointerEvents:"auto",cursor:"default"};function Je(e){const[t,i]=(0,Pe().e)(),{blueLayer:n,yellowLayer:a}=(0,de().useTimeSeriesPalette)(),r=(0,o.useMemo)((()=>{if(0===e.data.length)return qe;const t=ue().OQ.isoToUnixMs(e.data[0].ds,"UTC")??qe;return Math.min(t,qe)}),[e.data]);return(0,l.jsxs)("div",{children:[(0,l.jsx)(Qe,{store:e.store,data:e.data,currentFilter:e.currentFilter,onChangeFilter:e.onChangeFilter}),(0,l.jsx)("div",{ref:t,style:{...Xe,marginBottom:0},children:(0,l.jsx)(Ie().J,{startDate:(0,ce().$6)(r,!0),endDate:(0,ce().$6)(qe,!0),width:i,height:$e,data:e.data,layers:[{key:"total_views",...n,renderLabel:e=>(0,l.jsx)(s()._H,{id:"page_analytics.timeseries.total_views",defaultMessage:"{views, plural, one {1 total view} other {{views} total views}}",values:{views:e}})},{key:"unique_views",...a,renderLabel:e=>(0,l.jsx)(s()._H,{id:"page_analytics.timeseries.unique_views",defaultMessage:"{uniqueViews, plural, one {1 unique view} other {{uniqueViews} unique views}}",values:{uniqueViews:e}})}]})})]})}function Qe(e){const t=(0,s().YB)(),i=(0,o.useMemo)((()=>e.data.reduce(((e,t)=>{let{values:i}=t;return e+i.total_views}),0)),[e.data]);return(0,l.jsx)("div",{style:{margin:"14px 16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,l.jsxs)(Be().X2,{justifyContent:"space-between",alignItems:"center",grow:1,children:[(0,l.jsxs)(Be().X2,{gap:4,children:[(0,l.jsx)(De().Z,{style:{fontWeight:500},children:(0,l.jsx)(s()._H,{id:"page_analytics.timeseries.title",defaultMessage:"Views"})}),(0,l.jsx)(De().Z,{isSecondaryColor:!0,children:(0,l.jsx)(s()._H,{id:"page_analytics.timeseries.totalViews",defaultMessage:"({totalViews} total)",values:{totalViews:(0,ve().uf)(i,"number_with_commas",t)}})})]}),(0,l.jsx)(We().f,{currentFilter:e.currentFilter,onChangeFilter:e.onChangeFilter})]})})}function et(e){const{store:t}=e,{pageVisitStore:i,presenceStore:a}=(0,n().Kw)(F().default),r=(0,m().O7)();(0,o.useEffect)((()=>{Ce().Ri(r,{blockStore:t,pageVisitStore:i,incremental:!1,limit:Ce().s4})}),[r,t,i]);const[{value:d,status:c}]=(0,pe().r5)((async()=>{const{currentSpaceStore:e}=F().default.state;if(!e)return[];return(await(0,Ee().rX)({environment:r,spaceId:t.getSpaceId()})).map((e=>e.getEmailDomain()))}),[r,t]),u=(0,n().VK)((()=>"resolved"!==c?[]:(0,Te().AQ)({pageVisitStore:i,presenceStore:a,blockStore:t,trustedEmailDomains:d})),[i,a,t,c,d]);if(0===u.length)return null;const p=u.map((e=>{let{userId:i,activityTimestampNearestMinuteMs:o,onTrustedDomain:n}=e;return{actorStore:te().U6.createChildStore(t,{id:i,table:Me().KJ}),timestamp:o,onTrustedDomain:n}}));return(0,l.jsxs)("div",{style:{...Xe,display:"flex",flexDirection:"column",gap:12},children:[(0,l.jsx)(De().Z,{style:{fontWeight:500},children:(0,l.jsx)(s()._H,{id:"page_analytics.viewers.title",defaultMessage:"Viewers"})}),(0,l.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:10},children:(0,l.jsx)(it,{store:t,actorStores:p,collapsedLabel:(0,l.jsx)(s()._H,{id:"page_analytics.viewers.expand",defaultMessage:"Show more viewers"}),expandedLabel:(0,l.jsx)(s()._H,{id:"page_analytics.viewers.collapse",defaultMessage:"Show less viewers"})})})]})}const tt=5;function it(e){const{store:t,actorStores:i,collapsedLabel:n,expandedLabel:a}=e,[s,r]=(0,o.useState)(!0),d=s?i.slice(0,tt):i;return(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:10},children:[d.map((e=>{let{actorStore:i,timestamp:o,onTrustedDomain:n}=e;return(0,l.jsx)(ot,{store:t,actorStore:i,timestamp:o,onTrustedDomain:n},i.id)})),i.length>tt&&(0,l.jsx)("button",{onClick:e=>{e.preventDefault(),r(!s)},style:{background:"none",border:"none",textAlign:"left",padding:0,marginTop:4},children:(0,l.jsxs)(De().Z,{isSecondaryColor:!0,isSmall:!0,style:{display:"flex",gap:3,alignItems:"center"},children:[s?n:a,s?(0,ge().E)({width:12}):(0,me().R)({width:12})]})},"toggle")]})}function ot(e){const{actorStore:t,timestamp:i,onTrustedDomain:r}=e,d=(0,s().YB)(),c=(0,o.useMemo)((()=>{const e=Date.now();return(0,ce().tv)(Math.min(i??e,e),le().locale)}),[i]),u=(0,n().VK)((()=>t.getDisplayName(d)),[t,d]),p=(0,a().yK)((e=>({icon:{width:14,height:14,position:"relative",top:1,color:e.mediumTextColor},tooltip:{marginTop:2}})),[]);return(0,l.jsxs)(Be().X2,{alignItems:"center",justifyContent:"space-between",children:[(0,l.jsxs)(Be().X2,{gap:4,children:[(0,l.jsx)(nt,{actorStore:t}),(0,l.jsx)(De().Z,{style:{fontWeight:500},children:u})]}),(0,l.jsx)(De().Z,{isSecondaryColor:!0,children:i?(0,l.jsx)("span",{title:(0,ce().Yx)(i,"medium_with_time",le().locale),children:c}):c}),r&&(0,l.jsx)("div",{style:p.tooltip,children:(0,l.jsx)(Oe().Z,{renderTooltip:()=>(0,l.jsx)(s()._H,{id:"page_analytics.viewers.sharedEmailDomainUser.tooltip.message",defaultMessage:"Shared email domain user"}),render:e=>(0,l.jsx)("div",{...e,style:p.icon,children:(0,be().D)()}),placement:Ue().Placement.Bottom})})]})}function nt(e){const{actorStore:t}=e;return t.table===Se().cZ?(0,l.jsx)(Fe().Z,{botStore:t,size:18}):t.table===Me().KJ?(0,l.jsx)(ze().Z,{userStore:t,size:18}):t.table===xe().y0?(0,l.jsx)(ze().Z,{userStore:void 0,size:18}):void(0,N().t1)(t)}function at(e){const{environment:t,store:i,spaceId:a,hasAccessToEditors:s}=e,[,,r]=(0,n().AF)(void 0,Ve().o),[d,l]=(0,o.useState)([]);(0,o.useEffect)((()=>{s&&_e().hh(t,{store:r,activityIds:d,spaceId:a,filterActivityTypes:[],filterDateRange:{starting:void 0,ending:void 0},navigableBlockId:i.id})}),[d,r,a,i.id,t,s]);return(0,n().VK)((()=>{if(!s)return[];const e=r.state.activityIds;(0,ke().Z)(d,e)||l(e);const{currentSpaceStore:t}=F().default.state;if(!t)return[];const o=d.map((e=>(0,Re().No)(t,e,t.id))).flatMap((e=>{const t=e.getValue();return t?"top-level-block-created"!==t.type&&"top-level-block-deleted"!==t.type&&"block-edited"!==t.type?[]:function(e,t){var i;return je().oA(null===(i=e.edits)||void 0===i?void 0:i.flatMap((e=>{var i;return null===(i=e.authors)||void 0===i?void 0:i.map((i=>({actorStore:(0,Ne().nc)({parentStore:t,pointer:i}),timestamp:e.timestamp})))})))}(t,i):[]})),n=je().MR(o,"timestamp").reverse();return je().mN(n,(e=>e.actorStore.id))}),[d,r,s,i])}function st(e){const{spaceId:t,store:i}=e,o=(0,m().O7)(),a=(0,n().VK)((()=>(0,Le().qb)(o,"business")||(0,Le().qb)(o,"enterprise")),[o]),r=at({environment:o,hasAccessToEditors:a,spaceId:t,store:i}),d=(0,n().VK)((()=>{const e=i.getCreatedByPointer(),t=i.getCreatedTime();if(e&&t)return{actorStore:(0,Ne().nc)({parentStore:i,pointer:e}),createdTime:t}}),[i]);return(0,l.jsxs)("div",{style:{...Xe,display:"flex",flexDirection:"column",gap:12},children:[(0,l.jsx)(De().Z,{style:{fontWeight:500},children:(0,l.jsx)(s()._H,{id:"page_analytics.editors.title",defaultMessage:"Editors"})}),d&&(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:10,marginBottom:6},children:[(0,l.jsx)(De().Z,{isSmall:!0,isSecondaryColor:!0,style:{fontWeight:500},children:(0,l.jsx)(s()._H,{id:"page_analytics.editors.createdBy",defaultMessage:"Created by"})}),(0,l.jsx)(ot,{store:i,actorStore:d.actorStore,timestamp:d.createdTime})]}),a&&r.length>0&&(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:10},children:[(0,l.jsx)(De().Z,{isSmall:!0,isSecondaryColor:!0,style:{fontWeight:500},children:(0,l.jsx)(s()._H,{id:"page_analytics.editors.editedBy",defaultMessage:"Recently edited by"})}),(0,l.jsx)(it,{actorStores:r,store:i,collapsedLabel:(0,l.jsx)(s()._H,{id:"page_analytics.editors.expand",defaultMessage:"Show more editors"}),expandedLabel:(0,l.jsx)(s()._H,{id:"page_analytics.editors.collapse",defaultMessage:"Show less editors"})})]})]})}function rt(e){const t=(0,a().yK)((e=>({column:{display:"flex",flexDirection:"column"},row:{display:"flex"},centered:{textAlign:"center",alignItems:"center",width:250},analyticsIcon:{position:"relative",top:-8,left:-4},secondaryIcon:{fill:e.mediumTextColor},settingsButton:{padding:"7.5px 10px",alignSelf:"center"},link:{cursor:"pointer",justifyContent:"center",alignItems:"center",padding:8,alignSelf:"center"}})),[]);return(0,l.jsx)("div",{style:{...t.column,gap:24},children:(0,l.jsxs)("div",{style:{...t.column,...t.centered,gap:4},children:[(0,fe().z)({...t.secondaryIcon,...t.analyticsIcon,width:62,height:62}),(0,l.jsx)(De().Z,{isSecondaryColor:!0,style:{fontSize:16,fontWeight:500},children:e.heading}),(0,l.jsx)(De().Z,{isSecondaryColor:!0,style:{whiteSpace:"normal",overflow:"visible"},children:e.description})]})})}function dt(e){let{enablePageAnalytics:t}=e;const i=(0,n().VK)((()=>F().default.state.mainEditorCurrentBlockStore),[]),o=(0,n().VK)((()=>{const e=re().ou.now().minus({years:1}).valueOf();return!!i&&i.getCreatedTime()<e}),[i]),r=(0,n().VK)((()=>F().default.state.currentSpaceStore),[]),d=(0,n().VK)((()=>!(null!=i&&i.canRead())),[i]),c=(0,n().VK)((()=>{var e;const t=null==i?void 0:i.getModel();return i&&null!=t&&t.isCollectionView()?null===(e=i.getCollectionPointer())||void 0===e?void 0:e.id:void 0}),[i]),p=(0,n().VK)((()=>Boolean(null==r?void 0:r.getSettings().disable_page_analytics)),[r]),f=(0,a().yK)((e=>({updatesEmptyStyle:{flex:1,display:"flex",justifyContent:"center",flexDirection:"column",textAlign:"center",color:e.mediumTextColor,fontSize:14,background:e.contentBackground,marginRight:0,pointerEvents:"auto",height:"100%"},updatesNotEmptyStyle:{display:"flex",flexDirection:"column",flex:"1 1 0%",background:e.contentBackground,marginRight:0,pointerEvents:"auto",marginTop:1,height:"100%"}})),[]),g=(0,n().VK)((()=>y().default.state.currentSubTab),[]);return d?(0,l.jsx)($().T,{type:Q().Z.Y,style:f.updatesEmptyStyle,children:(0,l.jsx)("div",{style:{width:200,alignSelf:"center"},children:(0,l.jsx)(s()._H,{id:"updateSidebar.commentContainer.restricted",defaultMessage:"You don't have permission to view the updates of this restricted page."})})}):r&&i?(0,l.jsxs)($().T,{type:Q().Z.Y,ref:e=>{X().default.UpdateSidebarScroller=e},style:f.updatesNotEmptyStyle,children:[t&&(0,l.jsx)("div",{style:{display:g===y().uF.Analytics?"block":"none",height:"100%"},children:(0,l.jsx)(Ye,{spaceId:r.id,store:i,isDisabledForWorkspace:p})}),(0,l.jsx)("div",{style:{display:g===y().uF.Updates?"block":"none"},children:(0,l.jsx)(u().Z,{collectionId:c,navigableBlockStore:i,spaceId:r.id,source:"updates_sidebar",empty:e=>(0,l.jsx)($().T,{type:Q().Z.Y,style:f.updatesEmptyStyle,ref:e=>{X().default.UpdateSidebarScroller=e},children:(0,l.jsx)("div",{style:{width:200,alignSelf:"center"},children:e.hasFiltersOn?(0,l.jsx)(s()._H,{id:"updateSidebar.updatesContainer.emptyAfterSearch",defaultMessage:"No updates match the requested filters."}):o?(0,l.jsx)(s()._H,{id:"updateSidebar.updatesContainer.emptyMaybePurged",defaultMessage:"There are no recent updates on this page. Page updates are retained for one year."}):(0,l.jsx)(s()._H,{id:"updateSidebar.updatesContainer.empty",defaultMessage:"No updates on this page yet."})})})},i.id)})]}):null}function lt(e){const{currentTab:t}=e,i=(0,n().VK)((()=>F().default.state.mainEditorCurrentBlockStore),[]),a=(0,n().VK)((()=>F().default.state.renderPhase),[]),[s,r]=(0,o.useState)(!1),d=(0,o.useMemo)((()=>Date.now()),[]),c=(0,n().VK)((()=>y().default.state.timeOpenedComments),[]),u=void 0!==c?Math.max(d,c):d,p=(0,L().E)("comment_sidebar_for_you");if((0,o.useEffect)((()=>{s||"rendered"!==a||r(!0)}),[null==i?void 0:i.id,s,a]),!i||!s)return(0,l.jsx)(W().B,{areaHeight:window.innerHeight});switch(t){case y().gY.Comments:return p?(0,l.jsx)(ae,{timeViewed:u}):(0,l.jsx)(G().J,{timeViewed:u,location:"sidebar"});case y().gY.Updates:return(0,l.jsx)(dt,{enablePageAnalytics:e.enablePageAnalytics});case y().gY.Info:return(0,l.jsx)(U().J,{store:i,context:D().S.Frame,disabled:!1,shownAs:"sidebar"});default:(0,N().t1)(t)}}function ct(e){const t=(0,n().VK)((()=>({width:y().default.state.width,isAnimating:y().default.state.isAnimating})),[]),i=(0,Z().J4)(),{shouldLoadSidebarComponents:s,isExpanded:r}=e,d=(0,o.useRef)(null),[c,u]=(0,o.useState)(!1);(0,o.useEffect)((()=>{const e=requestAnimationFrame((()=>u(!0)));return()=>cancelAnimationFrame(e)}),[]);const p=(0,a().yK)((e=>({container:{flexGrow:0,flexShrink:0,width:t.width,zIndex:I().XB,borderLeft:r?`1px solid ${e.regularDividerColor}`:"1px solid rgba(0,0,0,0)",alignSelf:"flex-end",position:"absolute",right:0,top:0,height:i?`calc(100vh - ${B().tL}px)`:"100vh",pointerEvents:"none"},wrap:{height:"100%"},content:{position:"absolute",top:0,bottom:0,display:"flex",flexDirection:"column",overflow:"visible",zIndex:I().XB,width:t.width}})),[t.width,r,i]);return s?(0,l.jsx)(R().Z,{tag:"aside",visible:r,initial:{translateX:"100%"},animate:{translateX:0},exit:{translateX:"100%"},skip:!c,onAnimationStart:()=>{y().default.setState({...y().default.state,isAnimating:!0})},onAnimationEnd:()=>{y().default.setState({...y().default.state,isAnimating:!1})},"aria-hidden":!r||void 0,ref:d,style:p.container,onMouseMove:()=>{t.isAnimating||y().default.setState({...y().default.state,mouseEntered:!0})},onMouseLeave:()=>{t.isAnimating||y().default.setState({...y().default.state,mouseEntered:!1})},children:(0,l.jsx)("div",{style:p.wrap,children:(0,l.jsx)("div",{style:p.content,children:(0,l.jsx)(pt,{...e})})})}):null}function ut(e){let{enablePageAnalytics:t,navigableBlockStore:i,onTabChange:o}=e;const s=(0,m().O7)(),r=(0,n().VK)((()=>y().default.state.currentTab),[]),d=(0,a().yK)((()=>({commentsHeaderStyle:{position:"relative",pointerEvents:"auto",marginTop:h().R6(s.device.isElectronMac)}})),[s]);switch(r){case y().gY.Comments:return(0,l.jsx)("div",{style:d.commentsHeaderStyle});case y().gY.Updates:return(0,l.jsx)(_,{navigableBlockStore:i,enablePageAnalytics:t,onTabChange:o});case y().gY.Info:return(0,l.jsx)("div",{style:d.commentsHeaderStyle});default:(0,N().t1)(r)}}function pt(e){const{isResizerHovered:t,isResizing:i,currentTab:s,expanded:r}=(0,n().VK)((()=>{const{isResizerHovered:e,isResizing:t,currentTab:i,expanded:o}=y().default.state;return{isResizerHovered:e,isResizing:t,currentTab:i,expanded:o}}),[]),{currentBlockStore:d}=e,c=(0,m().O7)(),{currentTabToRender:u}=(0,n().VK)((()=>({currentTabToRender:d.isCollectionView()&&!d.isCollectionViewPageWithContent()?y().gY.Updates:s})),[d,s]),p=(0,n().VK)((()=>{const{currentSpaceStore:e}=F().default.state;return!(!e||(0,V().Cx)(e))}),[]),g=o.useCallback((e=>{T().Zm(c,{tab:e===y().uF.Updates?"updates":"analytics",origin:z().default.state.open?"peek_view":"page"}),y().default.setState({...y().default.state,currentSubTab:e})}),[c]),h=(0,a().yK)((e=>({pane:{display:"flex",flexDirection:"column",height:"100%",position:"relative",pointerEvents:"none",maxHeight:"100%",backgroundColor:s===y().gY.Comments?void 0:"inherit"},resizerStyle:{position:"absolute",top:0,left:-3,bottom:0,right:0,height:"100vh",width:3,zIndex:-1,display:"block",transition:"box-shadow 300ms ease-in",...(t||i)&&r?{boxShadow:e.sidebarResizerBoxShadow}:{}},tabpanel:{display:"flex",flexDirection:"column",flex:"1 1 0",overflow:"hidden"}})),[s,t,i,r]);let v;u===y().gY.Comments?v="Page comments":u===y().gY.Info?v="Info":u===y().gY.Updates?v="Page updates and analytics":(0,N().t1)(u);const x=(0,l.jsx)(lt,{currentTab:u,enablePageAnalytics:p});return(0,l.jsxs)("div",{style:h.pane,className:f().zar,role:"dialog","aria-label":v,children:[(0,l.jsx)("div",{style:h.resizerStyle}),(0,l.jsx)(ut,{enablePageAnalytics:p,navigableBlockStore:d,onTabChange:g}),p?(0,l.jsx)("div",{style:h.tabpanel,role:"tabpanel",id:(0,b().Qr)(k,u),"aria-labelledby":(0,b().pQ)(k,u),children:x}):x,r&&(0,l.jsx)(P().Z,{type:"update"})]})}function ft(e){const{isElectronMac:t,currentBlockStore:i}=e,a=(0,n().VK)((()=>({width:y().default.state.width,isAnimating:y().default.state.isAnimating,canRender:y().default.state.canRender})),[]),s=(0,n().VK)((()=>F().default.state.currentSpaceStore),[]),r=(0,o.useMemo)((()=>null==s?void 0:s.clone()),[s]),d=(0,m().O7)(),{isExpanded:c,closeSidebar:u}=(0,n().VK)((()=>({isExpanded:(0,O().Sx)(d),closeSidebar:()=>K().setUpdateExpand({environment:d,isExpanded:!1,from:"close_for_space",saveDetailsSidebarPreference:!0})})),[d]),[p,f]=(0,o.useState)(!1),[g,h]=(0,o.useState)(void 0);(0,o.useEffect)((()=>{(void 0===g||g===i.id)&&c&&(f(!0),h(i.id))}),[g,i,c]);const b=(0,n().VK)((()=>i.getAssociatedCollectionStore()),[i]);if(!(0,n().VK)((()=>{if(!a.canRender)return!1;if(r)return!0;if((0,H().C)()&&!d.currentUser.isLoggedIn())return!0;if(!b)return!1;const{count:e}=(0,E().nJ)({collectionStore:b});return e>0}),[b,a.canRender,r,d.currentUser]))return null;const v=()=>(0,l.jsx)(ct,{isElectronMac:t,isFullyExpanded:!a.isAnimating,currentBlockStore:i,isExpanded:c,closeSidebar:u,shouldLoadSidebarComponents:p});return r?(0,l.jsx)(A().Z,{store:r,droppable:!0,render:v},(null==r?void 0:r.id)||i.id):v()}var gt=()=>i(617256),mt=()=>i(839002),ht=()=>i(253502),bt=()=>i(603274),yt=()=>i(573357),vt=()=>i(906769),xt=()=>i(951113),St=()=>i(118761),Mt=()=>i(729201),jt=()=>i(297861),kt=()=>i(781022),_t=()=>i(763589),wt=()=>i(168126),Ct=()=>i(462274),It=()=>i(383017),Nt=()=>i(105285),Tt=()=>i(1910),Rt=()=>i(123145),At=()=>i(738483),Pt=()=>i(838266),Ut=()=>i(577325);function Vt(e){let{location:t}=e;const i=(0,s().YB)(),n=(0,m().O7)(),r=(0,m().Fy)(),d=(0,o.useCallback)((()=>{const{device:e}=n;ht().FR(n),e.isMobile?At().Z.setState({open:!0,source:At().Y.Updates}):(Ut().Z.setState({...Ut().Z.state,open:!1}),Pt().default.setState({...Pt().default.state,currentTab:"notifications",defaultSubtab:void 0}),Pt().default.setState({...Pt().default.state,open:!0}))}),[n]),c=(0,Rt().dc)(),u=(0,a().yK)((e=>({mobileTopBarIcon:{height:18,width:18,fill:e.regularTextColor},webUpdatesModalIcon:{width:16,height:16},button:r.isMobile?{height:30,width:30}:c.button})),[r.isMobile,c.button]);let p;switch(t){case"mobileTopBar":p=u.mobileTopBarIcon;break;case"webUpdatesModal":p=u.webUpdatesModalIcon;break;default:(0,N().t1)(t)}return(0,l.jsx)(Oe().Z,{renderTooltip:()=>(0,l.jsx)(s()._H,{defaultMessage:"Open notifications settings",id:"updatesModal.openNotifications.tooltip"}),render:e=>(0,l.jsx)(Tt().Z,{style:u.button,icon:ye().H,iconStyle:p,onClick:d,ariaLabel:i.formatMessage({id:"updatesModal.openNotifications.tooltipAriaLabel",defaultMessage:"Open notifications settings button"}),...e})})}const Lt=o.memo(Vt);i(670560),i(30005);var Et=()=>i(799891),Zt=()=>i(741633),Bt=()=>i(779565),Ht=()=>i(269299);function Kt(e){let{isScrolledToTopWithStickyHeader:t}=e;const i=(0,a().yK)((e=>({border:{flexShrink:0,width:"100%",boxShadow:t?"0 0 0 transparent":`0 1px 0 ${e.regularDividerColor}`,transition:"box-shadow 300ms",height:2,marginTop:-14,position:"sticky",zIndex:99,top:22,paddingTop:6,backgroundColor:e.contentBackground}})),[t]);return(0,l.jsx)("div",{style:i.border})}const Ot=new(J().Ss)("activityNotification",(async()=>await i.e(6215).then(i.bind(i,325186)))),Ft=(0,J().kF)(Ot,(e=>e.ActivityNotification));var Dt=()=>i(635596),zt=()=>i(263168),Wt=()=>i(295608),Gt=()=>i(620218);const qt={};function Yt(e){const{groupName:t}=e;switch(t){case"today":return(0,l.jsx)(s()._H,{id:"InboxTimeGroupHeader.today",defaultMessage:"Today"});case"this_week":return(0,l.jsx)(s()._H,{id:"InboxTimeGroupHeader.thisWeek",defaultMessage:"This week"});case"last_week":return(0,l.jsx)(s()._H,{id:"InboxTimeGroupHeader.lastWeek",defaultMessage:"Last week"});case"older":return(0,l.jsx)(s()._H,{id:"InboxTimeGroupHeader.older",defaultMessage:"Older"});default:(0,N().t1)(t)}}function $t(e){const{groupName:t,shouldStickyHeader:i}=e,o=(0,a().yK)((e=>({headerContainer:{paddingTop:3,paddingBottom:3,paddingLeft:16,paddingRight:16,color:e.text.secondary,fontWeight:r().Ue.medium,fontSize:"12px",...i&&{position:"sticky",top:0,backgroundColor:e.contentBackground,zIndex:2,paddingBottom:4,paddingTop:2}}})),[i]);return(0,l.jsx)("div",{style:o.headerContainer,children:(0,l.jsx)(Yt,{groupName:t})})}var Xt=()=>i(880290);const Jt=new class{constructor(){this.state=new Map,this.noOpListener=()=>{}}cacheInboxPointers(e,t,i){const o=this.state.get(t);if(o)for(const n of o)e.defaultRecordCache.inMemoryRecordCache.removeListenerToRecord(n,this.noOpListener),(0,zt().unsubscribeAfterDelay)({environment:e,pointer:n,userId:e.currentUser.id});for(const n of i)e.defaultRecordCache.inMemoryRecordCache.addListenerToRecord(n,this.noOpListener),(0,zt().cancelEviction)({pointer:n,userId:e.currentUser.id});this.state.set(t,i)}getNotificationIds(e){const t=this.state.get(e);if(!t)return;return t.filter((e=>e.table===Bt().uX)).map((e=>e.id))}};const Qt=function(e){const[t,a]=(0,o.useState)(Math.random()),[s,r]=(0,o.useState)(20),d=(0,m().O7)(),c=(0,n().VK)((()=>i(804217).default.state.online),[]),u=(0,n().VK)((()=>{var e;return null===(e=F().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]);return(0,o.useEffect)((()=>{if(u){const e=je().P2(((e,t)=>{String(t).includes("unreadCount")||a(Math.random())}),1e3),t=(0,i(183922).Lp)(u),o=Dt().ZP.addListener(t,e,void 0,d);if(o)return()=>{Dt().ZP.removeListener(o,d)}}}),[u,d]),c?(0,l.jsx)(ni,{checkpoint:t,type:e.type,empty:e.empty,source:e.source,tab:e.tab,size:s,setSize:r,scrolledToTop:e.isScrolledToTopFromOtherSidebar}):(0,l.jsx)(ti,{type:e.type})};function ei(e){const t=(0,m().O7)(),i=(0,m().Fy)();return(0,a().yK)((o=>({placeholder:{...ai(e,t),paddingTop:i.isMobile?64:void 0,minHeight:i.isMobile?void 0:220,display:"flex",textAlign:"center",alignItems:"center",justifyContent:"center",fontSize:14,color:o.regularTextColor,overflow:"hidden"}})),[i.isMobile,t,e]).placeholder}function ti(e){let{type:t}=e;const i=ei(t);return(0,l.jsx)("div",{style:i,children:(0,l.jsx)("div",{children:(0,l.jsx)(s()._H,{defaultMessage:"Please go online to view your inbox.",id:"notificationInbox.offline.message"})})})}function ii(e){let{request:t,error:i,result:a,type:r,empty:d,source:c,tab:u,size:p,setSize:f,scrolledToTop:g,requestType:h}=e;const b=(0,m().O7)(),y=(0,m().Fy)(),v=(0,n().VK)((()=>F().default.state.currentSpaceStore),[]),x=a??Jt.getNotificationIds(h),S=(0,n().Kw)(kt().default),M=(0,o.useContext)(Xt().B),[j,k]=(0,n().VK)((()=>{if(!x)return[[],[]];const e=[],i=v?x.map((e=>te().t1.createChildStore(v,{table:Bt().uX,id:e}))):[],o=[],n=je().oA(i.map((i=>{const n=i.getValue();if(!n)return null;if(n.invalid)return null;if("mentions"===t.type&&n.visited)return null;if("archive"===t.type&&!n.visited)return null;const a=Re().sl(i);if(!a||!a.isReady())return null;const s=a.getModel();if(!s||s.invalid)return o.push(n),null;const r=i.getDiscussionStore();if(null!=r&&r.isReady()&&"none"===(null==r?void 0:r.getRole()))return o.push(n),null;e.push(i.pointer),e.push(a.pointer),r&&e.push(r.pointer);const d=i.getNavigableBlockPointer();if(d&&e.push(d),M){if("inbox"===M&&"commented"!==n.type)return null;if("activity"===M&&"commented"===n.type)return null}return{activity:s,notification:n}}))).sort(((e,t)=>Number(t.notification.end_time)-Number(e.notification.end_time)));return Jt.cacheInboxPointers(b,h,e),[n,o]}),[x,v,b,h,t.type,M]),_=(0,n().VK)((()=>_t().Fz()),[]),w=0===(0,n().VK)((()=>_t().$x(j,t.type)),[j,t.type]).size,C=(0,L().E)("sticky_inbox_date_buckets"),I=(0,o.useCallback)((()=>{if(!v||i)return null;if(!x)return null;const e=[];let t=[];const n=_t().mx();let a;return j.forEach(((i,s,r)=>{let{activity:d,notification:p}=i;const f={source:c,tab:u,notification:p},m=Number(p.end_time),h=n.findIndex((e=>{const{cutoffTime:t}=e;return void 0===t||t<=m}));if(h!==a){const i=n[h].name,s=C&&!y.isMobile;s&&0===e.length&&e.push((0,l.jsx)(Kt,{isScrolledToTopWithStickyHeader:g},`${i}-sticky-header`)),e.push((0,l.jsx)("div",{children:t},`${i}-section-name`)),t=[(0,l.jsxs)(o.Fragment,{children:[1!==e.length&&(0,l.jsx)("div",{style:{height:8}}),(0,l.jsx)($t,{groupName:i,shouldStickyHeader:s})]},`${i}-inbox-group-section`)],a=h}t.push((0,l.jsx)(Ft,{activity:d,rootStore:v,isFirst:!1,isLast:!1,tabArgs:f},d.id))})),e.push((0,l.jsx)("div",{children:t},"time-grouping")),e}),[v,i,x,j,c,u,C,y.isMobile,g]),T=(0,J().XJ)(Ot);(0,o.useEffect)((()=>{if(!v)return;!function(e,t,i){const o=e.filter((e=>!e.read));0!==o.length&&(Et().log({level:"warning",from:"NotificationInbox",type:"invalidNotificationData",data:{ids:o.map((e=>e.id))}}),Ht().createAndCommit({userAction:"NotificationUpdates.unreadNotificationNotRendered",environment:i,canUndo:!0,perform:e=>{for(const i of o)bt().$h({notification:i,rootStore:t,transaction:e,read:!0})}}))}(k,v,b);const e=j.some((e=>{let{notification:t}=e;return!t.read&&!t.visited})),t=e&&j.some((e=>{let{notification:t}=e;return t.read&&!t.visited}));switch(_){case"unread_and_read":case"unread_only":kt().default.setState({...S,currentTab:"mentions",isCurrentTabEmpty:w,containsBothReadAndUnreadNotifications:t,containsUnreadNotifications:e,showOnlyUnreadNotifications:"unread_only"===_,unreadNotificationIds:[]});break;case"archived_only":kt().default.setState({...S,isCurrentTabEmpty:w,currentTab:"archive"});break;case"all_updates":break;default:(0,N().t1)(_)}}),[_,S,w,j,v,b,k]);const R=ei(r);return!v||i?(0,l.jsx)("div",{style:R,children:(0,l.jsx)(s()._H,{defaultMessage:"Something went wrong.",id:"notificationUpdates.unknownErrorMessage"})}):x&&"resolved"===T.status?(0,l.jsxs)("div",{style:w?R:ai(r,b),children:[w&&d,(0,l.jsx)("section",{role:"feed",className:"notranslate",children:I()}),(0,l.jsx)(vt().Z,{onChange:e=>{if(!y.isMobile&&"closed"===_t().T6())return null;e<200&&x.length>=p&&f(x.length+20)}})]}):(0,l.jsx)("div",{style:ai(r,b),children:(0,l.jsx)(W().B,{areaHeight:window.innerHeight})})}function oi(e){const t=(0,m().O7)();return(0,o.useEffect)((()=>{void 0!==e.requestId&&function(e,t){if(!(e in qt))return;const i=qt[e];if(i.measured)return;i.measured=!0;const{startTime:o,size:n,type:a}=i;Gt().default.DO_NOT_USE_measureLegacy({metricName:"notification_render",startTime:o},{environment:t,data:{size:n,type:a}})}(e.requestId,t)}),[e.requestId,t]),(0,l.jsx)(l.Fragment,{children:e.children})}function ni(e){const{type:t,empty:i,source:a,tab:s,size:r,setSize:d,scrolledToTop:c,checkpoint:u}=e,p=(0,m().O7)(),{currentUserStore:f,currentSpaceStore:g}=(0,n().VK)((()=>{const{currentUserStore:e,currentSpaceStore:t}=F().default.state;return{currentUserStore:e,currentSpaceStore:t}}),[]),h=(0,n().VK)((()=>"unread_only"===_t().Fz()),[]),[b,y]=(0,o.useState)(u),v=(0,o.useMemo)((()=>function(e,t){switch(e){case"mentions":return t?"unread_only":"unread_and_read";case"archive":return"archived";default:(0,N().t1)(e)}}(t,h)),[t,h]),[x,S]=(0,pe().r5)((async()=>{if(!f||!g)return null;const e=f.id,i=g.id,o=kt().default.startLoading();var n,a;a={size:r,type:t},(n=o)in qt||(qt[n]={measured:!1,startTime:performance.now(),size:a.size,type:a.type});const s=await we().callApi({eventName:"getNotificationLogV2",environment:p,data:{spaceId:i,size:r,type:v,variant:"no_grouping"},userId:e,headers:(0,Zt().Bb)({spaceId:i})});if(kt().default.endLoading(o),"failed"===s.type)throw s.error;return{notificationIds:s.data.notificationIds,requestId:o}}),[g,f,p,v,r,t],{throttle:1e3});if((0,o.useEffect)((()=>{u!==b&&(S(),y(u))}),[u,b,S]),!f||!g||!x)return null;const M=g.id,j=f.id,{value:k,error:_}=x,w={spaceId:M,userId:j,type:t};return Wt().setState({request:w,result:null==k?void 0:k.notificationIds}),(0,l.jsx)(oi,{requestId:null==k?void 0:k.requestId,children:(0,l.jsx)(ii,{type:t,requestType:v,empty:i,source:a,tab:s,size:r,setSize:d,request:w,error:_,result:null==k?void 0:k.notificationIds,scrolledToTop:c})})}function ai(e,t){const{device:i}=t;return{minHeight:i.isMobile||"mentions"===e?void 0:"75vh"}}function si(e){const t=(0,m().Fy)(),i=(0,m().O7)();(0,o.useEffect)((()=>()=>(ht().nI(i),void bt().G7({environment:i,newTab:"mentions",shouldTrack:!1}))),[i]);const n=(0,a().yK)((e=>({chevron:{fill:e.regularTextColor,width:26,height:26},padding:{width:1}})),[]);let s;if(t.isMobile){const i="mobileTopBar";s={menuType:g().o.Modal,title:(0,l.jsx)(Nt().Q,{}),width:e.format===St().EX.RenderAsPage?"100vw":void 0,renderAsPage:e.format===St().EX.RenderAsPage,leftRightButtonStyle:{paddingRight:14},right:[(0,l.jsx)(Lt,{location:i},"InboxNotificationSettingsButton"),(0,l.jsx)("span",{style:n.padding},"paddingSpan2"),(0,l.jsx)(It().$,{},"InboxFilterButton"),(0,l.jsx)("span",{style:n.padding},"paddingSpan1"),(0,l.jsx)(wt().p,{},"InboxEllipsisButton")],left:[(0,l.jsx)(li,{},"loading-spinner"),t.isPhone&&(0,jt().Y)("supportsNativeHome")&&e.format===St().EX.RenderAsPage&&!(0,jt().Y)("supportsNativeInbox")?void 0:(0,gt().k)(n.chevron)],onClickLeft:e.onClose,whiteBackground:!0,disableHeaderShadow:!0}}else s={menuType:g().o.Popup,height:"auto"};return(0,l.jsxs)(p().Z,{...s,className:f().C18,children:[(0,l.jsx)(vt().Z,{onChange:(e,t)=>{let{offsetFromTop:i}=t;kt().n.setState(i<=0)}}),(0,l.jsx)(yt().Z,{capture:!0,allowUndo:!0,allowEsc:!0,allowMobileAutoScroll:!0,render:()=>e.format===St().EX.RenderAsPage?(0,l.jsx)(di,{}):(0,l.jsx)(ri,{})})]})}function ri(){const e=(0,n().VK)((()=>{var e;return null===(e=F().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),t=(0,n().VK)((()=>_t().Fz()),[]),i={emptyState:{marginTop:100,cursor:"auto"}};return(0,l.jsx)(l.Fragment,{children:"all_updates"!==t?(0,l.jsx)(Qt,{type:"archived_only"===t?"archive":"mentions",source:"notifications_tab",tab:"inbox",empty:(0,l.jsx)("div",{style:i.emptyState,children:(0,l.jsx)(Ct().o,{})})},t):e&&(0,l.jsx)(u().Z,{spaceId:e,source:"notifications_tab",empty:()=>(0,l.jsx)("div",{style:i.emptyState,children:(0,l.jsx)(Ct().o,{})})},t)})}function di(){const e=(0,m().O7)();return(0,l.jsx)(xt().Z,{fetch:async()=>{await mt().Vs(0),await F().default.waitUntil((()=>void 0!==F().default.state.currentSpaceStore))},loading:()=>(0,l.jsx)(o.Fragment,{}),willRender:()=>{var t;null===(t=e.mobileNative)||void 0===t||t.markTransitionReady({type:"updates"})},render:()=>(0,l.jsx)(R().Z,{initial:{opacity:0},animate:{opacity:1},children:(0,l.jsx)(ri,{})})})}function li(){const e=(0,n().VK)((()=>void 0!==kt().default.state.loadingId),[]),t=(0,Mt().Z)(e,400,0);return(0,jt().Y)("supportsNativeHome")?t?(0,l.jsx)(He().Z,{style:{width:14}}):(0,l.jsx)("div",{style:{width:14}}):null}var ci=()=>i(156216);function ui(e){let{location:t}=e;const r=(0,s().YB)(),d=(0,m().O7)(),{currentTab:c,showOnlyUnreadNotifications:u,isCurrentTabEmpty:p}=(0,n().VK)((()=>{const{currentTab:e,isCurrentTabEmpty:t}=kt().default.state;return{currentTab:e,showOnlyUnreadNotifications:"mentions"===e&&kt().default.state.showOnlyUnreadNotifications,isCurrentTabEmpty:t}}),[]),f=(0,o.useCallback)((async()=>{if(u)kt().default.update((e=>({...e,showOnlyUnreadNotifications:!1,unreadNotificationIds:[]}))),ht().U0(d,{toggled_to:"off"});else{const e=await bt().Qy({environment:d});kt().default.update((t=>({...t,showOnlyUnreadNotifications:!0,unreadNotificationIds:e}))),ht().U0(d,{toggled_to:"on"})}}),[d,u]),g=(0,a().yK)((e=>({mobileTopBarIcon:{height:18,width:18,fill:u?void 0:e.regularTextColor},webUpdatesModalIcon:{height:17,width:17},desktopInboxPanelIcon:{height:18,width:18,...!u&&{fill:e.regularTextColor}}})),[u]);if("mentions"!==c)return null;const h=!u&&p,b=u?(0,l.jsx)(s()._H,{defaultMessage:"Show all notifications",id:"updatesModal.unreadNotificationsFilterButton.allTooltip"}):(0,l.jsx)(s()._H,{defaultMessage:"Show unread notifications only",id:"updatesModal.unreadNotificationsFilterButton.unreadTooltip"}),y=u?r.formatMessage({defaultMessage:"Show all notifications",id:"updatesModal.unreadNotificationsFilterButton.allTooltipAriaLabel"}):r.formatMessage({defaultMessage:"Show unread notifications only",id:"updatesModal.unreadNotificationsFilterButton.unreadTooltipAriaLabel"});let v,x;switch(t){case"mobileTopBar":v=void 0,x=g.mobileTopBarIcon;break;case"webUpdatesModal":v=!!u||void 0,g.webUpdatesModalIcon;break;case"desktopInboxPanel":v=!!u||void 0,x=g.desktopInboxPanelIcon;break;default:(0,N().t1)(t)}return(0,l.jsx)(Oe().Z,{disableTooltip:h,renderTooltip:()=>b,render:e=>(0,l.jsx)(Tt().Z,{icon:i(379539).I,isBlue:u,hovered:v,iconStyle:x,disabled:h,onClick:f,ariaLabel:y,...e})})}const pi=o.memo(ui);var fi=()=>i(297565);const gi=(0,i(827282).IU)("mailOpen",{viewBox:"0 0 16 16",svg:(0,l.jsx)("path",{d:"M2.88965 15.9277C2.17415 15.9277 1.63639 15.75 1.27637 15.3945C0.920898 15.0436 0.743164 14.515 0.743164 13.8086V7.00684C0.743164 6.76074 0.756836 6.54427 0.78418 6.35742C0.816081 6.17057 0.863932 6.00423 0.927734 5.8584C0.996094 5.71257 1.08496 5.57812 1.19434 5.45508C1.30371 5.32747 1.43815 5.19987 1.59766 5.07227L6.88184 0.916016C7.12793 0.715495 7.36035 0.558268 7.5791 0.444336C7.80241 0.325846 8.03939 0.266602 8.29004 0.266602C8.54069 0.266602 8.77539 0.325846 8.99414 0.444336C9.21745 0.558268 9.45215 0.715495 9.69824 0.916016L14.9824 5.07227C15.1419 5.19987 15.2764 5.32747 15.3857 5.45508C15.4951 5.57812 15.5817 5.71257 15.6455 5.8584C15.7139 6.00423 15.7617 6.17057 15.7891 6.35742C15.821 6.54427 15.8369 6.76074 15.8369 7.00684V13.8086C15.8369 14.515 15.6569 15.0436 15.2969 15.3945C14.9414 15.75 14.4059 15.9277 13.6904 15.9277H2.88965ZM2.84863 14.8818H13.7314C14.0687 14.8818 14.3285 14.7907 14.5107 14.6084C14.6976 14.4307 14.791 14.1641 14.791 13.8086V6.82227C14.791 6.6582 14.7751 6.51921 14.7432 6.40527C14.7113 6.29134 14.6611 6.19108 14.5928 6.10449C14.529 6.01335 14.4424 5.92448 14.333 5.83789L9.11035 1.76367C8.94173 1.63607 8.80046 1.53809 8.68652 1.46973C8.57259 1.39681 8.44043 1.36035 8.29004 1.36035C8.13965 1.36035 8.00749 1.39681 7.89355 1.46973C7.77962 1.53809 7.63835 1.63607 7.46973 1.76367L2.24707 5.83789C2.1377 5.92448 2.04883 6.01335 1.98047 6.10449C1.91667 6.19108 1.86882 6.29134 1.83691 6.40527C1.80501 6.51921 1.78906 6.6582 1.78906 6.82227V13.8086C1.78906 14.1641 1.88021 14.4307 2.0625 14.6084C2.24479 14.7907 2.50684 14.8818 2.84863 14.8818ZM1.51562 14.6357L6.88184 9.37207C7.11882 9.13509 7.35352 8.96419 7.58594 8.85938C7.82292 8.75456 8.06217 8.70215 8.30371 8.70215C8.54525 8.70215 8.78223 8.75456 9.01465 8.85938C9.24707 8.96419 9.48405 9.13509 9.72559 9.37207L15.085 14.6357L14.374 15.3467L9.13086 10.1787C8.98047 10.0283 8.83691 9.92122 8.7002 9.85742C8.56803 9.78906 8.43587 9.75488 8.30371 9.75488C8.16699 9.75488 8.03027 9.78906 7.89355 9.85742C7.76139 9.92122 7.6224 10.0283 7.47656 10.1787L2.2334 15.3467L1.51562 14.6357ZM5.81543 10.6094L1.5498 6.3916L2.26074 5.68066L6.5332 9.90527L5.81543 10.6094ZM10.0742 9.90527L14.3398 5.68066L15.0508 6.3916L10.7852 10.6094L10.0742 9.90527Z"})});var mi=()=>i(704259);function hi(e){let{}=e;const t=(0,m().Fy)(),i=(0,m().O7)(),r=(0,n().Kw)(kt().n),d=(0,n().VK)((()=>{const{currentTab:e,isCurrentTabEmpty:t}=kt().default.state;if("mentions"!==e||t)return;const{containsBothReadAndUnreadNotifications:i,containsUnreadNotifications:o,showOnlyUnreadNotifications:n}=kt().default.state;return{containsBothReadAndUnreadNotifications:i,containsUnreadNotificationsAccordingToUpdatesStore:o,showOnlyUnreadNotifications:n}}),[]),c=(0,n().VK)((()=>mi().default.getUnreadCountForCurrentSpace().mentions>0),[]),u=(0,o.useCallback)((()=>{ht().Xf(i),bt().go(i)}),[i]),p=(0,o.useCallback)((()=>{if(!d)return;const{containsBothReadAndUnreadNotifications:e,showOnlyUnreadNotifications:t}=d;let o="none";t?o="unread":e&&(o="read"),ht().zD(i,{readFilter:o}),bt().rG(i,"mentions",o)}),[i,d]),f=(0,a().yK)((e=>{const i={opacity:1,flex:1,height:t.isMobile?32:28,fontSize:14};return{headerWithBottomBorder:{borderBottom:r?void 0:`1px solid ${e.regularDividerColor}`},container:{display:"flex",marginTop:t.isMobile?12:0,marginLeft:16,marginRight:16,paddingBottom:12,gap:8},buttons:i,buttonsWithLoweredOpacity:{...i,opacity:.7}}}),[t.isMobile,r]);if(!d)return null;const{containsBothReadAndUnreadNotifications:g,containsUnreadNotificationsAccordingToUpdatesStore:h,showOnlyUnreadNotifications:b}=d,y=h||c;return(0,l.jsx)("div",{style:f.headerWithBottomBorder,children:(0,l.jsxs)("div",{style:f.container,children:[(0,l.jsx)(Oe().Z,{disableTooltip:y,renderTooltip:e=>(0,l.jsx)("div",{...e,children:(0,l.jsx)(s()._H,{defaultMessage:"All notifications have been marked as read.",id:"updatesModal.spaceUpdatesTab.markAllReadButton.disabledTooltip"})}),render:e=>(0,l.jsx)(Ke().Z,{onClick:u,style:y?f.buttons:f.buttonsWithLoweredOpacity,size:t.isMobile?void 0:"sm",disabled:!y,icon:gi,...e,children:(0,l.jsx)(s()._H,{defaultMessage:"Mark all as read",id:"updatesModal.spaceUpdates.mentionsTab.markAllReadButtonTitle"})})}),(0,l.jsx)(Ke().Z,{onClick:p,style:f.buttons,size:t.isMobile?void 0:"sm",icon:fi().H,children:b?(0,l.jsx)(s()._H,{defaultMessage:"Archive unread",id:"updatesModal.spaceUpdates.mentionsTab.archiveUnreadButtonTitle"}):g?(0,l.jsx)(s()._H,{defaultMessage:"Archive read",id:"updatesModal.spaceUpdates.mentionsTab.archiveReadButtonTitle"}):(0,l.jsx)(s()._H,{defaultMessage:"Archive all",id:"updatesModal.spaceUpdates.mentionsTab.archiveAllButtonTitle"})})]})})}const bi=o.memo(hi);var yi=()=>i(621811);function vi(e){let{location:t,onClick:o}=e;const r=(0,s().YB)(),d=(0,n().VK)((()=>kt().default.state.currentTab),[]),c=(0,a().yK)((e=>({mobileTopBarIcon:{height:18,width:18,fill:e.regularTextColor},webUpdatesModalIcon:{height:17,width:17}})),[]);if("allPages"!==d)return null;let u;switch(t){case"mobileTopBar":u=c.mobileTopBarIcon;break;case"webUpdatesModal":u=c.webUpdatesModalIcon;break;default:(0,N().t1)(t)}return(0,l.jsx)(Oe().Z,{renderTooltip:()=>(0,l.jsx)(s()._H,{defaultMessage:"Refresh",id:"updatesModal.allUpdatesRefreshButton.refreshButtonDescription"}),render:e=>(0,l.jsx)(Tt().Z,{icon:i(76910).n,iconStyle:u,onClick:o,ariaLabel:r.formatMessage({defaultMessage:"Refresh",id:"updatesModal.allUpdatesRefreshButton.refreshButtonDescriptionAriaLabel"}),...e})})}const xi=o.memo(vi);function Si(e){let{orderedTabConfigs:t,onClickRefreshAllTab:d}=e;const c=(0,m().Fy)(),u=(0,m().O7)(),{currentTab:p,currentTabIndex:g}=(0,n().VK)((()=>{const{currentTab:e}=kt().default.state,i=t.findIndex((t=>t.tab===e));return{currentTab:e,currentTabIndex:i}}),[t]),h=(0,o.useMemo)((()=>t.map(((e,t)=>{if(e.showSeparatorBefore)return t-1})).filter(N().$K)),[t]),y=(0,n().VK)((()=>mi().default.getUnreadCountForCurrentSpace().mentions>0),[]),v=(0,o.useCallback)((e=>{const i=t[e],o=null==i?void 0:i.tab;o&&p!==o&&bt().G7({environment:u,newTab:o,shouldTrack:!0})}),[p,u,t]),x=(0,a().yK)((()=>({mentionsContainer:{display:"flex",alignItems:"center",justifyContent:"center",fontWeight:y?r().Ue.medium:void 0},tabBarRightStyle:{justifyContent:"space-between"},helpButton:{marginLeft:0,...c.isMobile&&{marginTop:-1}},unreadMentionsBadge:{marginLeft:6},actionButtons:{display:"flex",justifyContent:"center",gap:6}})),[c.isMobile,y]),S=i(12530).N.Red,M={mentions:(0,l.jsxs)("div",{style:x.mentionsContainer,className:f().I2F,children:[(0,l.jsx)("div",{children:(0,l.jsx)(s()._H,{defaultMessage:"Inbox",id:"updatesModal.mentionsTab.title"})}),(0,l.jsx)(yi().Z,{type:"currentSpace",color:S,style:x.unreadMentionsBadge})]}),allPages:(0,l.jsx)("div",{className:f().gjL,children:(0,l.jsx)(s()._H,{defaultMessage:"All",id:"updatesModal.allUpdatesTab.title"})}),archive:(0,l.jsx)("div",{className:f().HKr,children:(0,l.jsx)(s()._H,{defaultMessage:"Archived",id:"updatesModal.archiveTab.title"})})},j=t.map((e=>M[e.tab])),k="webUpdatesModal",_=!c.isMobile&&(0,l.jsxs)("div",{style:x.actionButtons,children:[(0,l.jsx)(xi,{location:k,onClick:d}),(0,l.jsx)(pi,{location:k}),(0,l.jsx)(Lt,{location:k})]}),w=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Oe().Z,{render:e=>(0,l.jsx)(i(360964).Z,{href:(0,Ae().UY)("guides.notifications"),analyticsFrom:"inbox_tabs_link",style:x.helpButton,...e}),renderTooltip:()=>(0,l.jsx)(s()._H,{id:"updatesButton.learnMoreAboutInboxLink",defaultMessage:"Learn more about notifications"})}),_]});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(b().ZP,{tabs:j,selectedIndex:g,onChange:v,separatorIndexes:h,right:w,rightStyle:x.tabBarRightStyle}),"mentions"===p&&(0,l.jsx)(bi,{})]})}const Mi=o.memo(Si);var ji=()=>i(804618),ki=()=>i(519454),_i=()=>i(745740),wi=()=>i(369954),Ci=()=>i(333264),Ii=()=>i(957003),Ni=()=>i(105649),Ti=()=>i(561280);function Ri(){const e=(0,a().yK)((e=>({button:{display:"flex",justifyContent:"center",alignItems:"center",gap:6,height:36,width:174,position:"absolute",left:"50%",marginLeft:-87,bottom:12,zIndex:20,borderRadius:18,background:e.blueColor,color:e.white,boxShadow:e.buttonBoxShadow,fontSize:14},hovered:{background:e.blueButtonHoveredBackground},pressed:{background:e.blueButtonPressedBackground},icon:{width:16,height:16}})),[]);return(0,l.jsxs)(_i().Z,{style:e.button,hoveredStyle:e.hovered,pressedStyle:e.pressed,href:"https://dev.notion.so/notion/346c06d81dbf4cf188bf44fcef6a6a62?v=fa0376c6fb2a40f0b77d68b683f73e5b&pvs=4",external:!0,children:[(0,ki().R)(e.icon),(0,l.jsx)("div",{children:"Provide Feedback"})]})}function Ai(){const e=(0,n().VK)((()=>{const{currentSpaceStore:e}=F().default.state;if(e)return e.id}),[]),t=(0,n().VK)((()=>!1),[]),i=(0,n().VK)((()=>Rt().l_()),[]),s=(0,n().VK)((()=>Ni().default.state.mode),[]),r=(0,n().VK)((()=>_t().Fz()),[]),{isTablet:d}=(0,m().Fy)(),c=(0,L().E)("tablet_refresh_gate"),p=(0,a().yK)((e=>({container:{flexDirection:"column",width:"100%",display:"flex",marginTop:d&&c?12:void 0},scroller:{position:"relative",minHeight:0,display:"flex",flexDirection:"column",marginRight:0,pointerEvents:"auto",width:"100%",..."peek"===s?{}:{minWidth:i}},emptyState:{marginTop:100,cursor:"auto"}})),[i,s,d,c]),f=(0,n().qz)(void 0,Ti().Z),g=(0,n().VK)((()=>f.state.elementRef??{current:null}),[f]),h=0===(0,Ci().j)(g),b=(0,o.useContext)(Xt().B),y=(0,L().E)("sticky_inbox_date_buckets");return(0,l.jsxs)("div",{style:p.container,children:[(0,l.jsx)(Ii().A,{type:b??"inbox"}),!y&&(0,l.jsx)(wi().A,{scrollerStore:f}),(0,l.jsxs)($().T,{type:Q().Z.Y,style:p.scroller,store:f,children:[(0,l.jsx)(vt().Z,{onChange:(e,t)=>{let{offsetFromTop:i}=t;kt().n.setState(i<=0)}}),"all_updates"!==r?(0,l.jsx)(Qt,{type:"archived_only"===r?"archive":"mentions",source:"notifications_tab",tab:"inbox",empty:(0,l.jsx)("div",{style:p.emptyState,children:(0,l.jsx)(Ct().o,{})}),isScrolledToTopFromOtherSidebar:h},r):e&&(0,l.jsx)(u().Z,{spaceId:e,source:"notifications_tab",empty:()=>(0,l.jsx)("div",{style:p.emptyState,children:(0,l.jsx)(Ct().o,{})})},r)]}),t&&(0,l.jsx)(Ri,{})]})}var Pi=()=>i(949842);function Ui(e){const{notificationActivityPairs:t}=e,d=t.map((e=>{let{notification:t}=e;return t})),c=(0,m().O7)(),u=(0,m().Fy)(),p=(0,s().YB)(),f=d?d[0]:void 0,g=(0,n().VK)((()=>d.every((e=>e.read))),[d]),h=(0,n().VK)((()=>_t().Fz()),[]),[b,y]=(0,o.useState)(!1),v=(0,o.useCallback)((e=>{d&&f&&(0,Pi().ZP)({event:e,context:Pi().Af.NotificationClick,callback:()=>{y(!0);const e=d.map((e=>{let{id:t}=e;return t}));(async()=>{try{await we().callApi({eventName:"setNotificationsStatus",environment:c,data:{spaceId:f.space_id,notificationIds:e,archived:!0}})}finally{y(!1)}})();const i=d.filter((e=>!e.read));bt().Jl("mentions",f.space_id,(e=>Math.max(e-i.length,0))),ht().Ee(c,{target:"archive",affectedNotificationIds:e,notificationActivityPairs:t})}})}),[c,d,f,t]),x=(0,o.useCallback)((e=>{d&&f&&(0,Pi().ZP)({event:e,context:Pi().Af.NotificationClick,callback:()=>{let e;if(y(!0),g){const i=d.map((e=>{let{id:t}=e;return t}));e=async()=>{try{await we().callApi({eventName:"setNotificationsStatus",environment:c,data:{spaceId:f.space_id,notificationIds:i,read:!1}})}finally{y(!1)}},bt().Jl("mentions",f.space_id,(e=>e+i.length)),ht().Ee(c,{target:"mark_as_unread",affectedNotificationIds:i,notificationActivityPairs:t})}else{const i=d.filter((e=>!e.read)).map((e=>{let{id:t}=e;return t}));e=async()=>{try{await we().callApi({eventName:"setNotificationsStatus",environment:c,data:{spaceId:f.space_id,notificationIds:i,read:!0}})}finally{y(!1)}},bt().Jl("mentions",f.space_id,(e=>Math.max(e-i.length,0))),ht().Ee(c,{target:"mark_as_read",affectedNotificationIds:i,notificationActivityPairs:t})}e()}})}),[c,d,f,g,t]),S=(0,a().yK)((e=>({container:{display:"flex",height:"min-content",padding:u.isMobile?0:2,borderWidth:u.isMobile?0:1,borderStyle:"solid",borderColor:u.isMobile?"transparent":e.stroke.primary,background:u.isMobile?"transparent":e.surface.elevated,borderRadius:6},button:{height:u.isMobile?30:26,width:u.isMobile?30:26},inboxIconBase:{fill:e.icon.secondary,stroke:e.icon.secondary,strokeOpacity:1,strokeWidth:.25},iconStyle:{fill:e.mediumIconColor,padding:2},readIcon:{width:u.isMobile?21:19,height:u.isMobile?22:20},archiveIcon:{width:u.isMobile?24:23,height:u.isMobile?24:23},ellipsisIcon:{width:u.isMobile?24:23,height:u.isMobile?24:23},headerLabel:{paddingLeft:16,paddingRight:16,paddingTop:10,fontWeight:r().Ue.semibold}})),[u]);return f?"archived_only"===h?null:(0,l.jsxs)("div",{style:S.container,children:[(0,l.jsx)(Oe().Z,{renderTooltip:()=>(0,l.jsx)(s()._H,{...Vi.archiveNotificationGroup}),render:e=>(0,l.jsx)(Tt().Z,{ariaLabel:p.formatMessage(Vi.archiveNotificationGroup),style:S.button,icon:fi().H,iconStyle:{...S.iconStyle,...S.archiveIcon,height:18,width:18,...S.inboxIconBase},onClick:v,disabled:b,...e})}),(0,l.jsx)(Oe().Z,{renderTooltip:()=>g?(0,l.jsx)(s()._H,{...Vi.markNotificationGroupAsUnread}):(0,l.jsx)(s()._H,{...Vi.markNotificationGroupAsRead}),render:e=>(0,l.jsx)(Tt().Z,{ariaLabel:g?p.formatMessage(Vi.markNotificationGroupAsUnread):p.formatMessage(Vi.markNotificationGroupAsRead),style:S.button,icon:g?i(507119).F:i(562137).F,iconStyle:{...S.iconStyle,...S.readIcon,...g?{height:17,width:17}:{height:16,width:16},...S.inboxIconBase},onClick:x,disabled:b,...e})})]}):null}const Vi=(0,s().vU)({markNotificationGroupAsRead:{defaultMessage:"Mark notifications in this page as read",id:"NotificationGroupActionsMenu.markNotificationAsRead.tooltipMessage"},markNotificationGroupAsUnread:{defaultMessage:"Mark notifications in this page as unread",id:"NotificationGroupActionsMenu.markNotificationAsUnread.tooltipMessage"},archiveNotificationGroup:{defaultMessage:"Archive notifications in this page",id:"NotificationGroupActionsMenu.handleArchive.tooltipMessage"},changePageNotificationSettings:{defaultMessage:"Change page notification settings",id:"NotificationGroupActionsMenu.notificationSettings.tooltipMessage"}}),Li=o.memo(Ui)},355435:(e,t,i)=>{"use strict";i.d(t,{E7:()=>a,Ju:()=>n,cb:()=>r,iv:()=>s,tL:()=>o});const o=32,n=202,a=1e3,s="Want to add a metric? Look for 'src/client/performanceToolbar/config.ts' in notion-next.",r="To disable the toolbar entirely, go to the 'Experiments' panel and look for the 'performance_debugging_toolbar' flag."},420406:(e,t,i)=>{"use strict";i.d(t,{$:()=>o});function o(e,t){t.route.name;return!1}},341643:(e,t,i)=>{"use strict";i.d(t,{DW:()=>y,IG:()=>m,J4:()=>b,hZ:()=>h,q9:()=>g,qq:()=>v,s4:()=>f});var o=i(667294),n=()=>i(219727),a=()=>i(142735),s=()=>i(801812),r=()=>i(677559),d=()=>i(690664),l=()=>i(105649),c=()=>i(291335),u=()=>i(590972),p=()=>i(420406);const f=new(r().Ss)("PerformanceToolbar",(()=>Promise.all([i.e(62743),i.e(5242),i.e(4014),i.e(20919),i.e(93843),i.e(66283),i.e(54194)]).then(i.bind(i,674207)))),g=(0,r().kF)(f,(e=>e.PerformanceToolbar)),m=(0,r().kF)(f,(e=>e.PerformanceToolbarSettings));function h(){const e=(0,n().O7)();return(0,a().VK)((()=>(0,p().$)(e,e.RouterStore.state)),[e])}function b(){const e=(0,n().O7)(),t=x("PerformanceToolbarStore"),i=x("isPerformanceToolbarVisible");return(0,a().VK)((()=>!(!t||!i)&&i(e,e.RouterStore.state,t.state)),[i,e,t])}function y(){const e=x("PerformanceToolbarStore");return(0,a().VK)((()=>!!e&&e.state.isPerformanceToolbarMounted),[e])}function v(){const e=(0,n().O7)(),t=x("createPerformanceToolbarMouseListeners"),i=x("PerformanceToolbarStore"),{sidebarExpanded:s,sidebarWidth:r,secondarySidebarExpanded:p,secondarySidebarWidth:f,updateSidebarExpanded:g,updateSidebarWidth:m}=(0,a().VK)((()=>({sidebarExpanded:c().sidebarExpandedStore.state,sidebarWidth:c().sidebarWidthStore.state,secondarySidebarExpanded:l().default.isOpen(),secondarySidebarWidth:d().default.getWidth(),updateSidebarExpanded:u().default.state.expanded,updateSidebarWidth:u().default.state.width})),[]);return(0,o.useEffect)((()=>{if(i&&t)return t(e,(e=>i.update((t=>({...t,isMouseNearPerformanceToolbar:e})))),s,r,p,f,g,m)}),[t,e,i,s,r,p,f,g,m])}function x(e){const t=h(),[{value:i}]=(0,s().r5)((()=>t?f.load().then((t=>t[e])):Promise.resolve(void 0)),[e,t]);return i}},585742:(e,t,i)=>{"use strict";i.d(t,{W:()=>n});class o extends(()=>i(442))().Z{}const n=new o},280210:(e,t,i)=>{"use strict";i.d(t,{U_:()=>M,f6:()=>k,ii:()=>j});i(821057),i(409045),i(453627),i(994774),i(995194),i(520522),i(200082),i(379976),i(724224),i(761121),i(637133),i(241792);var o=i.n(i(402568)),n=()=>i(513670),a=()=>i(326966),s=()=>i(431595),r=()=>i(24945),d=()=>i(255933);const l={version:8,notion_version:0,variant:2},c={version:8,notion_version:1,variant:2},u=0,p=1,f=6,g=8,m=10,h=Date.UTC(2024,0,1);function b(e,t){if(e)return t[u]=255,t[u+1]=240|15&t[u+1],t;const i=Math.floor(((new Date).getTime()-h)/a().A0);if(i>=4096||i<0)throw new Error("Invalid offsetInDays.");return t[u]=i>>4,t[u+1]=i<<4&240|15&t[u+1],t}function y(e,t){if(e>=2**36||e<0)throw new Error("Invalid spaceShortId.");t[p]=240&t[p]|e/2**32&15;for(let i=0;i<4;i++)t[p+1+i]=e/2**(24-8*i)&255;return t}function v(e,t){const i=e?1:0;return t[f]=l.version<<4&240|l.notion_version<<1&14|1&i,t[g]=l.variant<<6&192|63&t[g],t}function x(e,t){if("block"===e)return t[m]=(0,r().ym)(e)|63&t[m],t;const i=(0,r().ym)(e);return t[m]=i>>8&127,t[m+1]=255&i,t}function S(e,t){const i=(0,r().Nq)(e);return t[m]=127&i|128&t[m],t}function M(e,t,i,o){const n=new Uint8Array(16),a=globalThis.crypto.getRandomValues(n);return i!==d().bx&&b(e,a),y(t,a),v(o,a),x(i,a),C(a)}function j(e,t,i,o){return M(e,t,i,o)}function k(e,t,i){return _(e,t,i)}function _(e,t,i){const a=o()(i),d=n().yo(a,2).map((e=>parseInt(e.join(""),16)));if((0,r().LV)(t)){if(void 0===e)throw new(s().D3)(`Deterministic ID for '${t}' must specify a space short id`)}else if(void 0!==e)throw new(s().D3)(`Deterministic ID for '${t}' should not provide a space short id`);const l=new Uint8Array(d);return e&&y(e,l),S(t,l),function(e){e[f]=240&c.version<<4|14&c.notion_version<<1|1&e[f],e[g]=192&c.variant<<6|63&e[g]}(l),C(l)}const w=new Array(256).fill(0).map(((e,t)=>t.toString(16).padStart(2,"0")));function C(e){let t=0;return w[e[t++]]+w[e[t++]]+w[e[t++]]+w[e[t++]]+"-"+w[e[t++]]+w[e[t++]]+"-"+w[e[t++]]+w[e[t++]]+"-"+w[e[t++]]+w[e[t++]]+"-"+w[e[t++]]+w[e[t++]]+w[e[t++]]+w[e[t++]]+w[e[t++]]+w[e[t++]]}},309672:(e,t,i)=>{"use strict";i.d(t,{$2:()=>re,Bg:()=>ne,P6:()=>L,Qs:()=>B,VP:()=>se,W9:()=>oe,Wy:()=>te,XW:()=>E,_2:()=>J,_u:()=>ie,bC:()=>Z,gt:()=>X,iR:()=>W,jQ:()=>ae,kU:()=>Q,oP:()=>K,qJ:()=>V,rn:()=>D,sn:()=>O,tA:()=>q,v4:()=>ee});i(670560),i(267602),i(653476),i(30005),i(241792);var o=()=>i(513670),n=()=>i(696459),a=()=>i(326966),s=()=>i(816512),r=()=>i(731424),d=()=>i(156642),l=()=>i(163262),c=()=>i(552221),u=()=>i(226413),p=()=>i(532850),f=()=>i(803021),g=()=>i(646574),m=()=>i(109477),h=()=>i(329866),b=()=>i(942275),y=()=>i(321160),v=()=>i(530980),x=()=>i(528514),S=()=>i(375255),M=()=>i(548347),j=()=>i(494616),k=()=>i(396136),_=()=>i(696056),w=()=>i(752778),C=()=>i(255933),I=()=>i(458196),N=()=>i(306164),T=()=>i(989478),R=()=>i(955620),A=()=>i(499110),P=()=>i(501274),U=()=>i(496205);const V=(0,i(788860).vU)({defaultPluralizedUserNames:{defaultMessage:"Someone",id:"pushNotification.pluralizedUserNames.defaultLabel"},defaultPermissionGroupName:{defaultMessage:"Deleted group",id:"pushNotification.permissionGroupName.defaultLabel"},defaultPageName:{defaultMessage:"a Notion page",id:"pushNotification.pageName.defaultLabel"},untitledPermissionGroupName:{defaultMessage:"Untitled group",id:"pushNotification.permissionGroupName.untitledLabel"},userEditedPermissionGroup:{defaultMessage:"{userName} edited {permissionGroupName}",id:"pushNotification.userEditedTarget.label"},userDeletedPermissionGroup:{defaultMessage:"{userName} deleted {permissionGroupName}",id:"pushNotification.userDeletedTarget.label"},userCreatedPermissionGroup:{defaultMessage:"{userName} created {permissionGroupName}",id:"pushNotification.userCreatedTarget.label"},unknownAuthor:{defaultMessage:"Unknown author",id:"pushNotification.authorPhrase.unknown"},untitledSpaceName:{defaultMessage:"Untitled",id:"pushNotification.untitledSpaceName.label"},untitledTeamName:{defaultMessage:"Untitled",id:"pushNotification.untitledTeamName.label"},untitledCollectionName:{defaultMessage:"Untitled",id:"pushNotification.untitledCollectionName.placeholder"},untitledBlockTitle:{defaultMessage:"Untitled",id:"pushNotification.untitledBlockTitle.placeholder"},twoUserNames:{defaultMessage:"{firstAuthor} and {secondAuthor}",id:"pushNotification.twoUserNames.label"},threePlusUserNames:{defaultMessage:"{othersCount, plural, one {{firstAuthor} and {othersCount} other} other {{firstAuthor} and {othersCount} others}}",id:"pushNotification.threePlusUserNames.label"},editorPermissionLabel:{defaultMessage:"Full access",id:"pushNotifications.editorPermissionLevel.label"},readerPermissionLabel:{defaultMessage:"Read only",id:"pushNotifications.readerPermissionLevel.label"},editOnlyPermissionLabel:{defaultMessage:"Edit only",id:"pushNotifications.editOnlyPermissionLevel.label"},editPermissionLabel:{defaultMessage:"Edit",id:"pushNotifications.editPermissionLevel.label"},commentOnlyPermissionLabel:{defaultMessage:"Comment only",id:"pushNotifications.commentOnlyPermissionLevel.label"},noAccessPermissionLabel:{defaultMessage:"No access",id:"pushNotifications.noAccessPermissionLevel.label"},publicPermissionRoleLabel:{defaultMessage:"Public ({permissionLevel})",id:"pushNotifications.publicPermissions.label"},userNameWithRole:{defaultMessage:"{userName} ({permissionLevel})",id:"pushNotifications.userPermissionsWithRole.label"},botNameWithRole:{defaultMessage:"{botName} ({permissionLevel})",id:"pushNotifications.botPermissionsWithRole.label"},spaceNameWithRole:{defaultMessage:"{spaceName} ({permissionLevel})",id:"pushNotifications.spacePermissionsWithRole.label"},imageInPushNotification:{defaultMessage:"{imageEmoji} Image",id:"pushNotification.imageInPushNotification.placeholder"},topLevelBlockCreated:{defaultMessage:"{userName} created {targetName} in {spaceName}",id:"pushNotification.userCreatedBlockInSpace.message"},topLevelBlockDeleted:{defaultMessage:"{userName} deleted {targetName} in {spaceName}",id:"pushNotification.userDeletedBlockInSpace.message"},collectionRowCreated:{defaultMessage:"{userName} created {targetName} in {collectionName}",id:"pushNotification.userCreatedRowInCollection.message"},collectionRowDeleted:{defaultMessage:"{userName} deleted {targetName} in {collectionName}",id:"pushNotification.userDeletedRowInCollection.message"},emptyBlockEditedProperty:{defaultMessage:"Empty",id:"pushNotification.emptyBlockPropertyValueEdited.placeholderLabel"},propertyNameAndValueEdited:{defaultMessage:"{propertyName} ({propertyValue})",id:"pushNotification.propertyNameWithEditedValue.notificationSubject"},propertyNameAndValueNotificationBody:{defaultMessage:"{propertyName} ({propertyValue})",id:"pushNotification.propertyNameWithEditedValue.notificationBody"},blockDeletedEditBody:{defaultMessage:"[Deleted] {renderedBlock}",id:"pushNotification.deletedBlock.notificationContents"},blockEditedNotification:{defaultMessage:"{userName} edited {blockName}",id:"pushNotification.blockEdited.notificationSubject"},blockPropertyEditedNotification:{defaultMessage:"{userName} edited {blockName}",id:"pushNotification.blockPropertyEdited.notificationSubject"},mobileBlockPropertyEditedNotification:{defaultMessage:"{userName} edited",id:"pushNotification.mobileBlockPropertyEdited.notificationSubject"},userEditedPermissionsFor:{defaultMessage:"{userName} edited permissions for {targetName}",id:"pushNotifications.permissionsEditedForPageOrSpace.notificationSubject"},userMentionedIn:{defaultMessage:"{userName} mentioned you in {targetName}",id:"pushNotifications.userMentionedInPage.notificationSubject"},mobileUserMentionedIn:{defaultMessage:"{userName} mentioned you",id:"pushNotifications.mobileUserMentionedInPage.notificationSubject"},permissionGroupMentionedIn:{defaultMessage:"{userName} mentioned {groupName} in {targetName}",id:"pushNotifications.groupMentionedInPage.notificationSubject"},teamMentionedIn:{defaultMessage:"{userName} mentioned {teamName} in {targetName}",id:"pushNotifications.teamMentionedInPage.notificationSubject"},userDeletedComment:{defaultMessage:"[Deleted]💬 {commentText}",id:"pushNotifications.userDeletedCommentText.notificationContents"},userCommentedSubject:{defaultMessage:"{userName} commented in {targetName}",id:"pushNotifications.userCommentedSubject.notificationSubject"},userSuggestedSubject:{defaultMessage:"{userName} suggested in {targetName}",id:"pushNotifications.userSuggestedSubject.notificationSubject"},mobileUserCommentedSubject:{defaultMessage:"{userName} commented",id:"pushNotifications.mobileUserCommentedSubject.notificationSubject"},mobileUserSuggestedSubject:{defaultMessage:"{userName} commented",id:"pushNotifications.mobileUserSuggestedSubject.notificationSubject"},userAddedToSpace:{defaultMessage:"{userName} added you to {workspaceName}",id:"pushNotifications.userAddedToSpace.notificationSubject"},mobileUserInvited:{defaultMessage:"{userName} invited you",id:"pushNotifications.mobileUserInvited.notificationSubject"},mobileUserInvitedByBot:{defaultMessage:"You have been invited",id:"pushNotifications.mobileUserInvitedByBot.notificationSubject"},userInvitedToSpace:{defaultMessage:"{userName} invited you to {workspaceName}",id:"pushNotifications.userInvitedToSpace.notificationSubject"},userInvitedToSpaceByBot:{defaultMessage:"You have been invited to {workspaceName}",id:"pushNotifications.userInvitedToSpaceByBot.notificationSubject"},userEditedCollectionSubject:{defaultMessage:"{userName} edited {collectionName}",id:"pushNotifications.collectionEdited.notificationSubject"},userEditedCollectionPageLayoutSubject:{defaultMessage:"{userName} edited the layout of {collectionName}",id:"pushNotifications.collectionPageLayoutEdited.notificationSubject"},userCreatedCollectionSubject:{defaultMessage:"{userName} created {collectionName}",id:"pushNotifications.collectionCreated.notificationSubject"},collectionDescriptionDeleted:{defaultMessage:"{userName} deleted the description for {collectionName}",id:"pushNotifications.collectionDescriptionDeleted.notificationSubject"},collectionDescriptionCreated:{defaultMessage:"{userName} added a description for {collectionName}",id:"pushNotifications.collectionDescriptionAdded.notificationSubject"},untitledCollectionView:{defaultMessage:"Untitled",id:"pushNotifications.untitledCollection.label"},collectionViewEditedSubject:{defaultMessage:"{userName} edited view {collectionViewName} in {collectionName}",id:"pushNotifications.collectionViewEdited.notificationSubject"},collectionPropertyEditedUnknown:{defaultMessage:"Unknown",id:"pushNotifications.unknownCollectionPropertyName.label"},collectionPropertyEditedSubject:{defaultMessage:"{userName} edited property {propertyType} in {collectionName}",id:"pushNotifications.collectionPropertyEdited.subject"},reminderSubject:{defaultMessage:"Reminder in {pageName}",id:"pushNotifications.reminderChanged.subject"},pageLockedActivity:{defaultMessage:"{userName} locked {pageName}",id:"pushNotifications.pageLocked.subject"},pageUnlockedActivity:{defaultMessage:"{userName} unlocked {pageName}",id:"pushNotifications.pageUnlocked.subject"},emailEditedActivity:{defaultMessage:"{userName} edited their account settings",id:"pushNotifications.emailAccountSettingsEdited.subject"},emptyPropertyBody:{defaultMessage:"Empty",id:"pushNotifications.emptyPropertyValueInCollection.label"},unknownRelationValueChange:{defaultMessage:"Unknown",id:"pushNotifications.unknownRelationPropertyChanged.label"},unknownAuthorInPropertySchemaChange:{defaultMessage:"Unknown author",id:"pushNotifications.unknownAuthorUpdatedProperty.label"},accessRequestedSubject:{defaultMessage:"{userName} requested access to {pageName}",id:"pushNotifications.accessRequested.subject"},editAccessRequestedSubject:{defaultMessage:"{userName} requested edit access to {pageName}",id:"pushNotifications.editAccessRequested.subject"},accessRequestResolvedApprovedSubject:{defaultMessage:"Your request to invite {guestEmail} to {pageName} has been approved",id:"pushNotifications.accessRequestResolved.approved.subject"},accessRequestResolvedRejectedSubject:{defaultMessage:"Your request to invite {guestEmail} to {pageName} has been rejected",id:"pushNotifications.accessRequestResolved.subject"},membershipRequestedSubject:{defaultMessage:"{userName} requested to add a new member to {workspaceName}",id:"pushNotifications.membershipRequested.subject"},guestInviteRequestedSubject:{defaultMessage:"{userName} requested to invite a guest to {workspaceName}",id:"pushNotifications.guestInviteRequested.subject"},blockFormatEditPageIconName:{defaultMessage:"Page Icon",id:"pushNotifications.formatChange.pageIcon.label"},pageIconImagePlaceholder:{defaultMessage:"Image",id:"pushNotifications.formatChange.pageIcon.imagePlaceholder"},pageDeletedActivity:{defaultMessage:"{userName} deleted {pageName}",id:"pushNotifications.pageDeleted.subject"},pageRestoredActivity:{defaultMessage:"{userName} restored {pageName}",id:"pushNotifications.pageRestored.subject"},pagePermanentlyDeletedActivity:{defaultMessage:"{userName} permanently deleted {pageName}",id:"pushNotifications.pagePermanentlyDeleted.subject"},userInvitedToTeam:{defaultMessage:"{userName} invited you to {teamName}",id:"pushNotifications.userInvitedToTeam.notificationSubject"},privateContentTransferred:{defaultMessage:"{author} transferred private content from {fromUserName} to you: {pageName}",id:"pushNotifications.privateContentTransferred.notificationSubject"},verificationExpired:{defaultMessage:"Verification expired for {pageName}",id:"pushNotifications.verificationExpired.notificationSubject"},importSuccessful:{defaultMessage:"Your {importSource} import was successful",id:"pushNotifications.importCompleted.notificationSubject"},importFailed:{defaultMessage:"Your {importSource} import has failed",id:"pushNotifications.importFailed.notificationSubject"},exportCompleted:{defaultMessage:"Your workspace export is ready",id:"pushNotifications.exportCompleted.notificationSubject"},inAppNotificationAutomationActionTriggered:{defaultMessage:"{automationName} sent you a message",id:"pushNotifications.inAppNotificationAutomationActionTriggered.notificationSubject"},noConflictsFound:{defaultMessage:"No conflicts found",id:"pushNotifications.noConflictsFound.notificationSubject"},automationTypecheckErrorRaisedSubject:{defaultMessage:"{automationName} is invalid",id:"pushNotifications.automationTypecheckErrorRaised.notificationSubject"},automationTypecheckErrorRaisedBody:{defaultMessage:"Resolve any errors or remove failing steps to enable this automation",id:"pushNotifications.automationTypecheckErrorRaised.notificationBody"},reactionCreated:{defaultMessage:"{userName} reacted to {targetName}",id:"pushNotifications.reactionCreated.notificationSubject"}});function L(e){const{activity:t,getRecordValue:i}=e,n=t.getEdits();return o().oA((0,a().cf)(o().xH(n.map((e=>e.authors||[])))).map((e=>{const t=i(e);if(t)return(0,s().LU)({table:e.table,value:t})})))}function E(e,t){const i=e.map((e=>e?(0,s().$4)(t,e):t.formatMessage(V.unknownAuthor)));return function(e,t){if(1===t.length)return t[0];if(2===t.length)return e.formatMessage(V.twoUserNames,{firstAuthor:t[0],secondAuthor:t[1]});if(t.length>2){const i=t.length-1;return e.formatMessage(V.threePlusUserNames,{othersCount:i,firstAuthor:t[0]})}return e.formatMessage(V.defaultPluralizedUserNames)}(t,i)}function Z(e){var t;const{recipientUser:i,authors:o}=e,n=o.filter((e=>e.id!==(null==i?void 0:i.id)));if(0===n.length)return;const a=n[0];var s;return a.table===T().KJ&&null!==(t=a.asActor)&&void 0!==t&&t.profile_photo?null===(s=a.asActor)||void 0===s?void 0:s.profile_photo:void 0}function B(e){if(!o().xb(e))return e[0].id}function H(e){const{blockValue:t,getRecordValue:i,userTimeZone:o,intl:n}=e,a=v().kk5.fromBlock(t),s=v().omK.fromGetRecordValueFn(i);return a.getRenderTitleWithEmojiOrPlaceholder({getRecordModel:s,userTimeZone:o,intl:n})}function K(e){return function(e){const{activity:t,getRecordValue:i,pageVisitSource:o,userTimeZone:n,intl:a}=e,s=v().omK.fromGetRecordValueFn(i),r=t.navigable_block_id||t.top_level_block_id||t.collection_row_id;if(r){const d=i({table:k().iU,id:r,spaceId:t.space_id});if(d){return{url:v().kk5.fromBlock(d).getRenderUrl({getRecordModel:s,baseUrl:e.baseURL,pageVisitSource:o}),title:H({intl:a,blockValue:d,getRecordValue:i,userTimeZone:n})}}return{url:e.baseURL||"/",title:a.formatMessage(V.untitledBlockTitle)}}if(t.collection_id)return G(e);if("user-invited"===t.type){const o=function(e){const{activity:t}=e,i=v().omK.fromGetRecordValueFn(e.getRecordValue||e.getRecordModel);if(!t.permission_group_id)return;const o=ne({spaceId:t.space_id,permissionGroupId:t.permission_group_id,getRecordModel:i});if(o)return{icon:o.getIcon(),name:o.getName()};return}({activity:t,getRecordValue:i}),n=s({table:C().bx,id:t.space_id});if(n&&o)return{title:ae(a,o),url:n.getRenderUrl({baseUrl:e.baseURL})}}else{if("team-membership-edited"===t.type)return F(e);if("access-requested"===t.type){const i=s({id:t.getAccessRequestId(),table:M().J8,spaceId:t.space_id});if(i&&i.isTeamMembershipRequest())return F(e)}}return z(e)}(e).title.replaceAll(/[\r\n]+/g," ")}function O(e){const{activity:t}=e,i=t.navigable_block_id||t.top_level_block_id||t.collection_row_id;return i||(t.collection_id?t.collection_id:void 0)}function F(e){const{activity:t,getRecordValue:i,intl:o}=e,n=v().omK.fromGetRecordValueFn(i),a=e.baseURL||"/",s=o.formatMessage(V.untitledTeamName);if(!t.team_id)return{url:a,title:s};const r=n({table:N().e0,id:t.team_id}),d=n({table:C().bx,id:t.space_id});return{url:(null==d?void 0:d.getRenderUrl({baseUrl:e.baseURL}))??a,title:(null==r?void 0:r.getRenderTitleWithEmojiOrPlaceholder({intl:o}))??s}}function D(e){return z(e).title}function z(e){const{activity:t,getRecordValue:i,intl:o}=e,n=i({table:C().bx,id:t.space_id});if(n){const t=v().kk5.fromSpace(n);return{title:t.getRenderTitleWithEmojiOrPlaceholder({intl:o}),url:t.getRenderUrl({baseUrl:e.baseURL})}}return{url:e.baseURL||"/",title:o.formatMessage(V.untitledSpaceName)}}function W(e){return G(e).title}function G(e){const{activity:t,getRecordValue:i,pageVisitSource:o,userTimeZone:n,intl:a}=e;if(t.collection_id){const s=i({table:w().vF,id:t.collection_id,spaceId:t.space_id});if(s){const t=v().kk5.fromCollection(s),i=v().omK.fromGetRecordValueFn(e.getRecordValue),r=t.getRenderTitleWithEmojiOrPlaceholder({getRecordModel:i,userTimeZone:n,intl:a});return{url:t.getRenderUrl({getRecordModel:i,baseUrl:e.baseURL,pageVisitSource:o}),title:r}}return{url:e.baseURL||"/",title:a.formatMessage(V.untitledCollectionName)}}return{url:e.baseURL||"/",title:a.formatMessage(V.untitledCollectionName)}}function q(e){const{activity:t,getRecordValue:i,intl:o}=e;if("in-app-notification-automation-action-triggered"===t.type||"automation-typecheck-error-raised"===t.type){const e=v().omK.fromGetRecordValueFn(i),n=e({table:j().cv,id:t.getEdits()[0].automation_id,spaceId:t.space_id});return(null==n?void 0:n.getNameWithDefault(e,o))??(0,r().XO)(o)}}function Y(e){if(e.blockValue.properties)return(0,S().Xh)({intl:e.intl,textValue:e.blockValue.properties.title,getRecordModel:v().omK.fromGetRecordValueFn(e.getRecordValue),userTimeZone:e.userTimeZone})}function $(e,t){const i=(0,x().kD)(t,void 0);return e.formatMessage(i)}function X(e){let{userTimeZone:t,activity:i,getRecordValue:n,pageVisitSource:a,intl:s,experimentService:r,collectionFeatureGates:d}=e;const c=i.getEdits();if(c.length){const e=[];c.forEach((t=>{"permission-created"===t.type?e.push(t.permission_data):"permission-deleted"===t.type?e.push({...t.permission_data,role:"none"}):"permission-restriction-created"===t.type||"permission-restriction-deleted"===t.type?(t.permission_data.calculated_changes||[]).forEach((t=>{let[i,o]=t;e.push(o)})):e.push(t.permission_data.after)}));const u=o().oA(e.sort(x()._G).map((e=>{if("user_permission"===e.type){const t=n({table:T().KJ,id:e.user_id}),i=(0,A().Nz)(s,t),o=$(s,e.role);return s.formatMessage(V.userNameWithRole,{userName:i,permissionLevel:o})}if("space_permission"===e.type){const o=D({intl:s,activity:i,getRecordValue:n,userTimeZone:t,pageVisitSource:a,experimentService:r,collectionFeatureGates:d}),l=$(s,e.role);return s.formatMessage(V.spaceNameWithRole,{spaceName:o,permissionLevel:l})}if("public_permission"===e.type){const t=$(s,e.role);return s.formatMessage(V.publicPermissionRoleLabel,{permissionLevel:t})}if("bot_permission"===e.type){const t=n({table:_().cZ,id:e.bot_id}),i=(0,l().Mh)(t),o=$(s,e.role);return s.formatMessage(V.botNameWithRole,{botName:i,permissionLevel:o})}})));return s.formatList(u,{type:"conjunction",style:"narrow"})}}function J(e){const{intl:t}=e;switch(e.blockValue.type){case d().Ti.text:case d().Ti.encryptedText:case d().Ti.header:case d().Ti.subHeader:case d().Ti.subSubHeader:case d().Ti.factory:case d().Ti.equation:case d().Ti.code:return Y(e);case d().Ti.toggle:return`▸ ${Y(e)}`;case d().Ti.bulletedList:return`• ${Y(e)}`;case d().Ti.numberedList:return`1. ${Y(e)}`;case d().Ti.quote:return`“${Y(e)}”`;case d().Ti.toDo:return(function(e){let{blockValue:t}=e;return p().Ml(t.properties&&t.properties.checked)}(e)?"✓ ":"▢ ")+Y(e);case d().Ti.file:case d().Ti.bookmark:return`🔗 ${Y(e)}`;case d().Ti.embed:case d().Ti.framer:case d().Ti.whimsical:case d().Ti.mixpanel:case d().Ti.miro:case d().Ti.abstract:case d().Ti.sketch:case d().Ti.excalidraw:case d().Ti.replit:case d().Ti.hex:case d().Ti.deepnote:case d().Ti.tweet:case d().Ti.gist:case d().Ti.maps:case d().Ti.invision:case d().Ti.video:case d().Ti.audio:case d().Ti.image:return t.formatMessage(V.imageInPushNotification,{imageEmoji:"🖼"});case d().Ti.drive:return function(e){const{blockValue:t}=e,i=(0,m().v0)(v().kk5.fromBlock(t));return i&&i.title?i.title:H(e)}(e);case d().Ti.page:case d().Ti.collectionView:case d().Ti.collectionViewPage:return H(e);case d().Ti.tableRow:return function(e){var t;const{blockValue:i,getRecordValue:o,userTimeZone:n,intl:a}=e,s=o({table:i.parent_table,id:i.parent_id,spaceId:i.space_id});if(!s||!i)return;const r=i.properties,d=(null===(t=s.format)||void 0===t?void 0:t.table_block_column_order)||[];return d&&r?d.map((e=>(0,S().Xh)({textValue:r[e],getRecordModel:v().omK.fromGetRecordValueFn(o),userTimeZone:n,intl:a}))).join(", "):void 0}(e)}}function Q(e){const{getRecordValue:t,baseURL:i,userTimeZone:o,intl:n,collectionFeatureGates:a}=e,s=t({table:k().iU,id:e.blockId});if(s){if("page"===s.type){const r=(0,b().ky)({block:s,getRecordValue:t});if(r){const i=u().oC(r),o=i[e.property],d=o?o.name:void 0,l=ee({property:e.property,schema:i,block:s,getRecordValue:t,userTimeZone:e.userTimeZone,baseURL:e.baseURL,intl:n,experimentService:e.experimentService,collectionFeatureGates:a})||n.formatMessage(V.emptyPropertyBody);return n.formatMessage(V.propertyNameAndValueNotificationBody,{propertyName:d,propertyValue:l})}return J({intl:n,blockValue:s,getRecordValue:t,baseURL:i,userTimeZone:o})}return J({intl:n,blockValue:s,getRecordValue:t,baseURL:i,userTimeZone:o})}}function ee(e){const{property:t,schema:i,getRecordValue:o,userTimeZone:n,baseURL:r,intl:d,experimentService:l,collectionFeatureGates:c}=e,m=i[t],b=v().kk5.fromBlock(e.block);if(!b.getProperties()||!m)return;const y=b.getProperties()[t];if("formula"===m.type){const e=v().omK.fromGetRecordValueFn(o),s=(0,h().primitiveFormulaValueFromPropertySchema)({schema:i,property:t,blockModel:b,getRecordModel:e,intl:d,userTimeZone:n,depth:0,resultCache:new Map,regExpCache:new Map,experimentService:l,collectionFeatureGates:c});return f().U3(s)?(0,g().ZV)({allowRelativeDates:!0,intl:d,value:s,userTimeZone:n}):"boolean"==typeof s?s?u().bx:u().HC:(0,a().hj)(s)?s.toString():s}if("person"===m.type)return d.formatList(p().DW({textValue:y,propertySchema:m,blockCreatorPointer:b.getCreatedByPointer()}).map((e=>{const t=o(e),i=(0,s().LU)({table:e.table,value:t});return(0,s().$4)(d,i)})),{type:"conjunction",style:"narrow"});if("created_by"===m.type){const e=b.getCreatedByPointer();if(!e)return d.formatMessage(V.unknownAuthorInPropertySchemaChange);const t=o(e),i=t&&(0,s().LU)({table:e.table,value:t});return i?(0,s().$4)(d,i):d.formatMessage(V.unknownAuthorInPropertySchemaChange)}return"created_time"===m.type?(0,g().Yx)(b.getCreatedTime(),"short",d.locale,n):y?te({propertySchema:m,textValue:y,getRecordValue:o,userTimeZone:n,baseURL:r,intl:d,experimentService:l,collectionFeatureGates:c}):void 0}function te(e){const{propertySchema:t,textValue:i,getRecordValue:o,userTimeZone:a,baseURL:r,intl:d,collectionFeatureGates:l}=e;if("title"===t.type||"text"===t.type||"geo_point"===t.type)return(0,S().Xh)({intl:d,textValue:i,getRecordModel:v().omK.fromGetRecordValueFn(o),userTimeZone:a});if("select"===t.type){const e=t.options||[];return p().Sj(i,e)}if("multi_select"===t.type){const e=t.options||[];return d.formatList(p().uP(i,e),{type:"conjunction",style:"narrow"})}if("checkbox"===t.type)return p().Ml(i)?u().bx:u().HC;if("date"===t.type){const e=(0,c().G)(i);if(e)return(0,g().ZV)({allowRelativeDates:!0,intl:d,value:e,date_format:t.date_format,time_format:t.time_format,userTimeZone:a})}else{if("person"===t.type)return d.formatList(p().DW({textValue:i,propertySchema:t,blockCreatorPointer:void 0}).map((e=>{const t=o(e),i=(0,s().LU)({table:e.table,value:t});return(0,s().$4)(d,i)})),{type:"conjunction",style:"narrow"});if("relation"===t.type){const e=p().j$({relationValue:p().rq(i),getRecordModel:v().omK.fromGetRecordValueFn(o),propertySchema:t,includeDeleted:l.relations_show_deleted,includeInvalidCollection:l.relations_show_invalid_collection,includeNoAccess:l.relations_show_no_access});return d.formatList(e.map(o).map((e=>e?H({intl:d,blockValue:e,getRecordValue:o,baseURL:r,userTimeZone:a}):d.formatMessage(V.unknownRelationValueChange))),{type:"conjunction",style:"narrow"})}if("number"===t.type){const e=p().VY(i);if(void 0!==e)return e.toString()}else if("auto_increment_id"===t.type){const e=p().ah(i);if(void 0!==e)return e.toString()}else{if("file"===t.type)return d.formatList(p().g(i).map((e=>e.name||e.url)),{type:"conjunction",style:"narrow"});if("url"===t.type||"phone_number"===t.type||"email"===t.type)return(0,R().Jcv)(i);if("created_by"===t.type)return;if("created_time"===t.type)return;if("formula"===t.type)return;if("rollup"===t.type)return;if("last_edited_by"===t.type)return;if("last_edited_time"===t.type)return;if("last_visited_time"===t.type)return;if("button"===t.type)return;if("status"===t.type)return p().ZG(i,t);if("location"===t.type)return;if("verification"===t.type){const e=U()._w(i),t=e?U().WN(e):{type:"none"};if("none"===t.type)return d.formatMessage(U().X3.none);const n=o(t.actorPointer),r=(0,s().LU)({table:t.actorPointer.table,value:n}),l=(0,s().$4)(d,r);return"verified"===t.type&&t.isIndefinite?d.formatMessage(U().X3.verifiedIndefinitely,{actor:l}):d.formatMessage(U().X3.verifiedUntil,{actor:l,datetime:P().nK({dateTime:t.dateTimeRange.end,intl:d,userTimeZone:a,displayInUserTimezone:!1,alwaysIncludeTimezone:!0})})}(0,n().t1)(t)}}}function ie(e){if("page_icon"===e.formatProperty)return e.intl.formatMessage(V.blockFormatEditPageIconName)}function oe(e){const{formatProperty:t,block:i,getRecordValue:o,intl:n}=e;if("page_icon"===t){const e=v().kk5.fromBlock(i).getRenderIcon({getRecordModel:v().omK.fromGetRecordValueFn(o)});return e?(0,y().Z)(e.icon)?e.icon:n.formatMessage(V.pageIconImagePlaceholder):n.formatMessage(V.emptyBlockEditedProperty)}}function ne(e){const t=v().omK.fromGetRecordValueFn(e.getRecordValue||e.getRecordModel),{spaceId:i,permissionGroupId:o}=e;return t({table:I().GQ,id:(0,I().L9)({spaceId:i,spacePermissionGroupId:o}),spaceId:i})}function ae(e,t){if(t){return[(0,y().Z)(t.icon)?t.icon:void 0,t.name.length>0?t.name:e.formatMessage(V.untitledPermissionGroupName)].filter(Boolean).join(" ")}return e.formatMessage(V.defaultPermissionGroupName)}function se(e){const t=v().omK.fromGetRecordValueFn(e.getRecordValue||e.getRecordModel),{spaceId:i,teamId:o}=e;return t({table:N().e0,id:o,spaceId:i})}function re(e){switch(e){case"block-property-edited":case"reacted":case"commented":case"permission-group-mentioned":case"team-mentioned":case"reminder":case"user-invited":case"in-app-notification-automation-action-triggered":case"user-mentioned":return!0;case"access-requested":case"access-request-resolved":case"email-edited":case"private-content-transferred":case"team-membership-edited":case"verification-expired":case"export-completed":case"import-completed":case"no-conflicts-found":case"automation-typecheck-error-raised":case"block-edited":case"collection-edited":case"collection-page-layout-edited":case"collection-property-edited":case"collection-row-created":case"collection-row-deleted":case"collection-view-edited":case"page-deleted":case"page-locked":case"page-permanently-deleted":case"page-restored":case"page-unlocked":case"permissions-edited":case"top-level-block-created":case"top-level-block-deleted":return!1;default:return(0,n().P)(e),!1}}},924665:(e,t,i)=>{"use strict";function o(e){let t,i,o;return async function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t?(o=a,i||(i=t.then((()=>(i=void 0,t=e(...o),t))),i)):(t=e(...a),t)}}i.d(t,{Z:()=>o})},165940:(e,t,i)=>{"use strict";i.d(t,{R:()=>n});i(667294);var o=i(785893);const n=(0,i(827282).IU)("chevronUpRounded",{viewBox:"0 0 15 9",svg:(0,o.jsx)("path",{d:"M1.258 6.5L7.203.422a.946.946 0 01.719-.32.99.99 0 01.726.32L14.586 6.5a.89.89 0 01.266.648c0 .524-.407.93-.922.93a.921.921 0 01-.672-.281L7.93 2.32 2.586 7.797a.926.926 0 01-.672.281.915.915 0 01-.922-.93c0-.25.094-.476.266-.648z"})})},46581:(e,t,i)=>{"use strict";i.d(t,{U:()=>s});var o=i.n(i(389539)),n=()=>i(280210),a=()=>i(956057);class s{constructor(e){this.environmentName=void 0,this.mainShortId=void 0,this.getSettings=void 0,this.isServerOriginated=void 0,this.mapSpaceIdToShortId=void 0,this.idCreatorLogger=void 0,this.environmentName=e.environmentName,this.mainShortId=i(631871).jF[this.environmentName],this.getSettings=e.getSettings,this.isServerOriginated=e.isServerOriginated,this.mapSpaceIdToShortId=e.mapSpaceIdToShortId,this.idCreatorLogger=e.idCreatorLogger??(()=>{})}idInMain(e){const{enableTestDateOffset:t,enableIdSchema:o}=this.getSettings();return o&&e!==i(363777).uK?(this.idCreatorLogger(void 0,e,t?"id_schema_test":"id_schema"),(0,n().ii)(t,this.mainShortId,e,this.isServerOriginated)):this.legacyId(e,"disabled")}pointerInMain(e){return{table:e,id:this.idInMain(e)}}async idWithSpaceId(e,t){const{enableTestDateOffset:i,enableIdSchema:a}=this.getSettings();if(!a||"space"===t)return this.legacyId(t,"disabled");const s=this.mapSpaceIdToShortId(e),r=o().types.isPromise(s)?await s:s;return r?(this.idCreatorLogger(e,t,i?"id_schema_test":"id_schema"),(0,n().U_)(i,r,t,this.isServerOriginated)):this.legacyId(t,"missing_short_id")}async pointerWithSpaceId(e,t){return{table:t,spaceId:e,id:await this.idWithSpaceId(e,t)}}idWithSpaceShortId(e,t){const{enableTestDateOffset:i,enableIdSchema:o}=this.getSettings();return o&&"space"!==t?(this.idCreatorLogger(void 0,t,i?"id_schema_test":"id_schema"),(0,n().U_)(i,e,t,this.isServerOriginated)):this.legacyId(t,"disabled")}legacyId(e,t){return this.idCreatorLogger(void 0,e,t),a().Il()}async deterministicIdWithSpaceId(e,t,i){const{enableTestDateOffset:s,enableIdSchema:r}=this.getSettings();if(!r)return this.idCreatorLogger(e,t,"disabled"),a().Ul(i);const d=this.mapSpaceIdToShortId(e),l=o().types.isPromise(d)?await d:d;return l?(this.idCreatorLogger(e,t,s?"id_schema_test":"id_schema"),(0,n().f6)(l,t,i)):(this.idCreatorLogger(e,t,"missing_short_id"),a().Ul(i))}deterministicIdWithSpaceShortId(e,t,i){const{enableTestDateOffset:o,enableIdSchema:s}=this.getSettings();return s?(this.idCreatorLogger(void 0,t,o?"id_schema_test":"id_schema"),(0,n().f6)(e,t,i)):(this.idCreatorLogger(void 0,t,"disabled"),a().Ul(i))}async getSpaceIdCreator(e){if(!e)return new r(e,this.idCreatorLogger);const{enableIdSchema:t}=this.getSettings();if(!t)return new r(e,this.idCreatorLogger);const i=this.mapSpaceIdToShortId(e),n=o().types.isPromise(i)?await i:i;return this.getSpaceShortIdCreator(e,n)}getSpaceIdCreatorSync(e){if(!e)return new r(e,this.idCreatorLogger);const{enableIdSchema:t}=this.getSettings();if(!t)return new r(e,this.idCreatorLogger);const i=this.mapSpaceIdToShortId(e),n=o().types.isPromise(i)?void 0:i;return this.getSpaceShortIdCreator(e,n)}getSpaceShortIdCreator(e,t){const{enableIdSchema:i}=this.getSettings();return i&&t?new d(e,this,t):new r(e,this.idCreatorLogger)}async getSpaceIdCreatorFromModel(e){return e.getShortIdStr()?this.getSpaceShortIdCreator(e.id,Number(e.getShortIdStr())):await this.getSpaceIdCreator(e.id)}}class r{constructor(e,t){this.spaceId=void 0,this.idCreatorLogger=void 0,this.spaceId=e,this.idCreatorLogger=t}idInSavedSpace(e){return this.idCreatorLogger(void 0,e,"disabled"),a().Il()}idInMain(e){return this.idCreatorLogger(void 0,e,"disabled"),a().Il()}deterministicIdInSavedSpace(e,t){return this.idCreatorLogger(void 0,e,"disabled"),a().Ul(t)}pointerInMain(e){return{id:this.idInMain(e),table:e}}pointerInSavedSpace(e){return{id:this.idInSavedSpace(e),table:e,spaceId:this.spaceId}}getSpaceId(){return this.spaceId}}class d{constructor(e,t,i){this.spaceId=void 0,this.idCreator=void 0,this.spaceShortId=void 0,this.spaceId=e,this.idCreator=t,this.spaceShortId=i}idInSavedSpace(e){return this.idCreator.idWithSpaceShortId(this.spaceShortId,e)}idInMain(e){return this.idCreator.idInMain(e)}deterministicIdInSavedSpace(e,t){return this.idCreator.deterministicIdWithSpaceShortId(this.spaceShortId,e,t)}pointerInMain(e){return{id:this.idInMain(e),table:e}}pointerInSavedSpace(e){return{id:this.idInSavedSpace(e),table:e,spaceId:this.spaceId}}getSpaceId(){return this.spaceId}}},88829:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});const o={appCursorListener:{sidebar:1,secondarySidebar:2,editor:3,aiChat:3,marketplace:3,teamHome:3}}},971095:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});const o=(0,i(830742).LS)("importEvernote")},400939:e=>{var t=/[a-zA-Z0-9_\u0392-\u03c9\u00c0-\u00ff\u0600-\u06ff]+|[\u4e00-\u9fff\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g;e.exports=function(e){var i=e.match(t),o=0;if(!i)return 0;for(var n=0;n<i.length;n++)i[n].charCodeAt(0)>=19968?o+=i[n].length:o+=1;return o}}}]);