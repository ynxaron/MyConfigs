"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[58548],{158548:(e,t,n)=>{n.d(t,{w:()=>de});n(670560);var r=()=>n(730120),i=n(667294),a=()=>n(219727),o=()=>n(846550),s=()=>n(157955),d=()=>n(374289),u=()=>n(578292),l=()=>n(788860),c=()=>n(513670),y=()=>n(696459),m=()=>n(707513),h=()=>n(212493),p=()=>n(827973),f=()=>n(448419),g=()=>n(431652),x=()=>n(198829),b=()=>n(18748),k=()=>n(255577),j=()=>n(661297),w=()=>n(388284),M=()=>n(296034),v=()=>n(718959),R=()=>n(918745),_=()=>n(142735),S=n(785893);function Z(e){const{onChange:t,currentValue:r,extraValidation:a,...o}=e,[s,d]=(0,i.useState)(!1),[u,l]=(0,i.useState)((null==r?void 0:r.toString())??""),c=e=>!(0,y().$K)(a)||a(e);return(0,S.jsx)(n(291198).Z,{errorOutline:s,onKeyDown:e=>{if(("ArrowUp"===e.key||"ArrowDown"===e.key)&&(e.preventDefault(),e.stopPropagation(),(0,y().$K)(r))){const n="ArrowUp"===e.key?1:-1,i=r+n;c(i)&&(t(i),l(i.toString()))}},value:u,onChange:e=>{const n=e.currentTarget.value;if(l(n),""===n)t(void 0),d(!1);else{const n=Number(e.currentTarget.value);c(n)?(t(n),d(!1)):(t(void 0),d(!0))}},...o})}const C=(0,l().vU)({never:{id:"automations.RecurrenceEditor.endConditionMenu.never",defaultMessage:"Never"},numberOfRuns:{id:"automations.RecurrenceEditor.endConditionMenu.numberOfRuns",defaultMessage:"Number of runs"},specificDate:{id:"automations.RecurrenceEditor.endConditionMenu.specificDate",defaultMessage:"Specific date"}});function T(e){const{currentValue:t,onChange:n}=e,r=(0,R().F)({minWidth:230}),a="number"===(null==t?void 0:t.type)?t.number_of_occurrences:void 0,[o,s]=(0,i.useState)(a??1),d=[{key:"never",items:[{key:"never",action:()=>{n(void 0)},render:e=>(0,S.jsx)(p().Z,{...e,title:(0,S.jsx)(l()._H,{...C.never}),checkState:void 0===t})}],render:e=>(0,S.jsx)(w().Z,{...e})},{key:"number_of_occurrences",items:[{key:"number_of_occurrences",action:()=>{n({type:"number",number_of_occurrences:o})},render:e=>(0,S.jsx)(F,{...e,currentNumber:a??o,onNumberChange:e=>{(0,y().$K)(e)&&(s(e),n({type:"number",number_of_occurrences:e}))},selected:"number"===(null==t?void 0:t.type)})}],render:e=>(0,S.jsx)(w().Z,{topBorder:!0,...e})},{key:"date",items:[{key:"date",action:()=>{},render:t=>(0,S.jsx)(B,{...t,...e})}],render:e=>(0,S.jsx)(w().Z,{topBorder:!0,...e})}];return(0,S.jsx)(x().Z,{...r,children:(0,S.jsx)(k().ZP,{type:k().iW.Vertical,sections:d,initialFocus:0})})}const F=(0,i.forwardRef)((function(e,t){const{currentNumber:n,onNumberChange:r,selected:i,...a}=e,d=(0,o().yK)((e=>({input:{maxWidth:60},menuItemTitle:{overflow:"visible"}})),[]);return(0,S.jsx)(p().Z,{...a,itemMarginRight:4,ref:t,titleStyle:d.menuItemTitle,title:(0,S.jsxs)(h().jX,{gap:"auto",direction:"row",align:"center",children:[(0,S.jsx)("div",{children:(0,S.jsx)(l()._H,{...C.numberOfRuns})}),i&&(0,S.jsx)(Z,{disabled:!i,currentValue:n,onChange:r,extraValidation:s().isValidRecurrenceNumberOfRuns,style:d.input,maxlength:3})]}),checkState:i})})),B=(0,i.forwardRef)((function(e,t){const{currentValue:n,onChange:a,...d}=e,u=(0,i.useMemo)((()=>r().ou.now().plus({weeks:1}).toMillis()),[]),c=(0,l().YB)(),y=(0,_().VK)((()=>v().AK.state),[]),m="date"===(null==n?void 0:n.type),h=m?n.end_at:u,[p,f]=(0,i.useState)(m);(0,i.useEffect)((()=>{!m&&p&&f(!1)}),[m,p]);const x=(0,i.useMemo)((()=>"date"===(null==n?void 0:n.type)?(0,s().getFormattedEndCondition)(n,c):void 0),[n,c]),b=(0,i.useCallback)((e=>{a({type:"date",end_at:e})}),[a]),k=(0,i.useMemo)((()=>({before:new Date})),[]),j=(0,i.useCallback)((()=>{a({type:"date",end_at:u})}),[a,u]),w=(0,o().yK)((()=>({minWidth:{minWidth:"247px"},calendarContainer:{padding:"8px 0"}})),[]),R=p||m;return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(g().X,{...d,title:(0,S.jsx)(l()._H,{...C.specificDate}),chevronType:R?"down":"right",right:x,onClick:j,style:w.minWidth}),R&&(0,S.jsx)("div",{style:w.calendarContainer,children:(0,S.jsx)(M().Z,{firstDayOfWeek:y,value:h,onChange:b,disabledDays:k})})]})}));n(241792);const E=(0,l().vU)({day:{id:"automations.FrequencyMenu.day",defaultMessage:"{number, plural, one {Day} other {Days}}"},week:{id:"automations.FrequencyMenu.week",defaultMessage:"{number, plural, one {Week} other {Weeks}}"},month:{id:"automations.FrequencyMenu.month",defaultMessage:"{number, plural, one {Month} other {Months}}"},year:{id:"automations.FrequencyMenu.year",defaultMessage:"{number, plural, one {Year} other {Years}}"}}),O={day:e=>({...E.day,values:{number:e?2:1}}),week:e=>({...E.week,values:{number:e?2:1}}),month:e=>({...E.month,values:{number:e?2:1}}),year:e=>({...E.year,values:{number:e?2:1}})};function W(e){const{onSelect:t,currentFrequency:n,pluralLabels:r}=e,i=(0,R().F)(),a=[{key:"default",items:(0,y().qP)(O).map((e=>{let[i,a]=e;return{key:i,action:()=>{t(i)},render:e=>(0,S.jsx)(p().Z,{...e,title:(0,S.jsx)(l()._H,{...a(r)}),checkState:n===i})}})),render:e=>(0,S.jsx)(w().Z,{...e})}];return(0,S.jsx)(x().Z,{...i,children:(0,S.jsx)(k().ZP,{type:k().iW.Vertical,sections:a,initialFocus:0})})}var I=()=>n(839480);const N=(0,l().vU)({monthRestrictionLabel:{id:"automations.MonthRestrictionMenuItem.monthRestrictionLabel",defaultMessage:"On the"},last:{id:"automations.MonthRestrictionMenuItem.last",defaultMessage:"Last"},day:{id:"automations.MonthRestrictionMenuItem.day",defaultMessage:"Day"}}),L=31,V=4,P=(0,i.forwardRef)((function(e,t){const{initialValue:n,onChange:s,startDateForFallback:d,...u}=e,c=(0,a().Fy)(),m=(0,o().yK)((e=>({menuItem:{...!c.isMobile&&{width:"calc(100% - 8px)",marginLeft:4,marginRight:4}}})),[c]),[p,f]=(g=function(e,t){const n=()=>t?{type:"day",dayNumber:r().ou.fromMillis(t).day}:A;return e?"monthdays"===e.type?1!==e.monthdays.length?n():{type:"day",dayNumber:e.monthdays[0]}:"weekdays_in_month"===e.type?1!==e.week_numbers.length||1!==e.weekdays.length?n():{type:"weekday",weekday:e.weekdays[0],weekNumber:-1===e.week_numbers[0]?"last":e.week_numbers[0]}:void(0,y().t1)(e):n()}(n,d),(0,i.useReducer)(((e,t)=>{if("change_day"===t.type)if("day"===t.newDay){if("day"===e.type)return e;if("weekday"===e.type)return{type:"day",dayNumber:"last"===e.weekNumber?1:Math.min(e.weekNumber,V)};(0,y().t1)(e)}else{if("weekday"===e.type)return{...e,weekday:t.newDay};if("day"===e.type)return{type:"weekday",weekday:t.newDay,weekNumber:e.dayNumber>V?"last":e.dayNumber};(0,y().t1)(e)}else if("change_number"===t.type){if("day"===e.type)return{...e,dayNumber:"last"===t.newNumber?1:t.newNumber};if("weekday"===e.type)return{...e,weekNumber:t.newNumber};(0,y().t1)(e)}else(0,y().t1)(t)}),g));var g;return function(e,t){const n=(0,i.useRef)(t);(0,i.useEffect)((()=>{n.current=t}),[t]);const r=(0,i.useRef)(!0);(0,i.useEffect)((()=>{r.current?r.current=!1:n.current(function(e){if("day"===e.type)return{type:"monthdays",monthdays:[e.dayNumber]};if("weekday"===e.type)return{type:"weekdays_in_month",weekdays:[e.weekday],week_numbers:["last"===e.weekNumber?-1:e.weekNumber]};(0,y().t1)(e)}(e))}),[e])}(p,s),(0,S.jsx)(b().ZP,{...u,itemMarginRight:12,ref:t,style:m.menuItem,title:(0,S.jsxs)(h().jX,{gap:"auto",direction:"row",align:"center",children:[(0,S.jsx)("div",{children:(0,S.jsx)(l()._H,{...N.monthRestrictionLabel})}),(0,S.jsx)(D,{state:p,dispatch:f})]})})}));function D(e){const{state:t,dispatch:n}=e,r=(0,a().Fy)(),i=(0,l().YB)(),s=Y(),u=(0,o().yK)((e=>({icon:{width:10,marginLeft:4,fill:e.lightIconColor},button:{height:28}})),[]),c=K(t),y=q(t),m=r.isMobile?f().Z4.SlideUp:f().Z4.Popup;return(0,S.jsxs)(h().jX,{width:"hug",direction:"row",gap:4,children:[(0,S.jsx)(f().ZP,{popupType:m,render:e=>(0,S.jsx)(U,{state:t,onSelect:t=>{n({type:"change_number",newNumber:t}),e.close()}}),renderOrigin:e=>(0,S.jsxs)(j().Z,{...e,style:u.button,children:["last"===c?(0,S.jsx)(l()._H,{...N.last}):s(c),(0,d().i)(u.icon)]})}),(0,S.jsx)(f().ZP,{popupType:m,render:e=>(0,S.jsx)(H,{state:t,onSelect:t=>{n({type:"change_day",newDay:t}),e.close()}}),renderOrigin:e=>(0,S.jsxs)(j().Z,{...e,style:u.button,children:[z(i,y),(0,d().i)(u.icon)]})})]})}function U(e){const{state:t,onSelect:n}=e,r=(0,R().F)({maxHeight:255}),i=Y(),a=K(t),o="weekday"===t.type,s=c().oA([{key:"days",items:c().w6(1,("day"===t.type?L:"weekday"===t.type?V:(0,y().t1)(t))+1).map((e=>({key:`day_${e}`,action:()=>n(e),render:t=>(0,S.jsx)(p().Z,{...t,title:i(e),checkState:a===e})}))),render:e=>(0,S.jsx)(w().Z,{...e})},o?{key:"last",items:[{key:"last",action:()=>n("last"),render:e=>(0,S.jsx)(p().Z,{...e,title:(0,S.jsx)(l()._H,{...N.last}),checkState:"last"===a})}],render:e=>(0,S.jsx)(w().Z,{...e,topBorder:!0})}:void 0]);return(0,S.jsx)(x().Z,{...r,children:(0,S.jsx)(k().ZP,{type:k().iW.Vertical,sections:s,initialFocus:0})})}function H(e){const{state:t,onSelect:n}=e,r=(0,l().YB)(),i=(0,R().F)(),a=q(t),o=[{key:"day",items:[{key:"day",action:()=>n("day"),render:e=>(0,S.jsx)(p().Z,{...e,title:z(r,"day"),checkState:"day"===a})}],render:e=>(0,S.jsx)(w().Z,{...e})},{key:"weekdays",items:(0,_().VK)((()=>1===v().AK.state?["MO","TU","WE","TH","FR","SA","SU"]:["SU","MO","TU","WE","TH","FR","SA"]),[]).map((e=>({key:`weekday_${e}`,action:()=>n(e),render:t=>(0,S.jsx)(p().Z,{...t,title:z(r,e),checkState:e===a})}))),render:e=>(0,S.jsx)(w().Z,{...e,topBorder:!0})}];return(0,S.jsx)(x().Z,{...i,children:(0,S.jsx)(k().ZP,{type:k().iW.Vertical,sections:o,initialFocus:0})})}const A={type:"day",dayNumber:1};function K(e){return"day"===e.type?e.dayNumber:"weekday"===e.type?e.weekNumber:void(0,y().t1)(e)}function q(e){return"day"===e.type?"day":"weekday"===e.type?e.weekday:void(0,y().t1)(e)}function Y(){const e=(0,l().YB)().locale.substring(0,2);return t=>(0,I().nU)(e,t,"d")}function z(e,t){if("day"===t)return e.formatMessage(N.day);{const n=(0,y().Yd)(s().RRULE_WEEKDAYS_MAP).indexOf(t)+1;return r().ou.fromObject({weekday:n}).setLocale(e.locale).toLocaleString({weekday:"long"})}}n(267602),n(653476),n(749411);const $=(0,l().vU)({aroundMidnight:{id:"automations.RecurTimeMenu.aroundMidnight",defaultMessage:"Around midnight"},aroundMidnightCaption:{id:"automations.RecurTimeMenu.aroundMidnightCaption",defaultMessage:"12â€“3AM"}});function X(e){const{currentRecurTime:t,onRecurTimeSelected:i}=e,a=(0,l().YB)(),o=(0,R().F)(),d=[{key:"default",items:[...(0,n(466970).E)("automations_dev_tools")?[J({onRecurTimeSelected:i})]:[],...[{type:"around_midnight"},...c().w6(0,24).flatMap((e=>c().w6(0,60,15).map((t=>({type:"hour_minute",hour:e,minute:t}))))).filter((e=>{let{hour:t,minute:n}=e;return 0!==t&&1!==t&&2!==t&&!(3===t&&0===n)}))].map((e=>{if("hour_minute"===e.type){const{hour:n,minute:o}=e,s=r().ou.utc().set({hour:n,minute:o,second:0,millisecond:0}).setLocale((0,u().E2)(a)).toFormat("h:mm a"),d=(null==t?void 0:t.minute)===o&&(null==t?void 0:t.hour)===n;return{key:`hour_minute-${n}-${o}`,action:()=>{i({hour:n,minute:o})},render:e=>(0,S.jsx)(p().Z,{...e,title:s,checkState:d})}}if("around_midnight"===e.type){const e=(0,s().isRunningBetweenMidnightAnd3AM)(t);return{key:"around_midnight",action:()=>{i({hour:0,minute:0})},render:t=>(0,S.jsx)(p().Z,{...t,title:(0,S.jsx)(l()._H,{...$.aroundMidnight}),caption:(0,S.jsx)(l()._H,{...$.aroundMidnightCaption}),checkState:e})}}(0,y().t1)(e)}))],render:e=>(0,S.jsx)(w().Z,{...e,desktopStyle:{maxHeight:250,overflow:"scroll"}})}];return(0,S.jsx)(x().Z,{...o,children:(0,S.jsx)(k().ZP,{type:k().iW.Vertical,sections:d,initialFocus:0})})}function J(e){const{onRecurTimeSelected:t}=e;return{key:"developer",action:()=>{const e=G();t({hour:e.hour,minute:e.minute})},render:e=>(0,S.jsx)(Q,{...e})}}function G(){const e=r().ou.local();let t=e.set({second:0,millisecond:0}).plus({minute:1});return t.diff(e,"seconds").seconds<20&&(t=t.plus({minute:1})),t}const Q=(0,i.forwardRef)((function(e,t){const[a,o]=(0,i.useState)((()=>G()));return(0,n(863606).W)((()=>{o(G())}),1e3,!0),(0,S.jsx)(p().Z,{...e,ref:t,title:`[Dev] Run at ${a.toLocaleString(r().ou.TIME_SIMPLE)}`})}));var ee=()=>n(25303),te=()=>n(568017),ne=()=>n(154186);const re=(0,l().vU)({sunday:{id:"automations.WeekdaySelector.weekdayAbbreviations.sunday",defaultMessage:"Su"},monday:{id:"automations.WeekdaySelector.weekdayAbbreviations.monday",defaultMessage:"Mo"},tuesday:{id:"automations.WeekdaySelector.weekdayAbbreviations.tuesday",defaultMessage:"Tu"},wednesday:{id:"automations.WeekdaySelector.weekdayAbbreviations.wednesday",defaultMessage:"We"},thursday:{id:"automations.WeekdaySelector.weekdayAbbreviations.thursday",defaultMessage:"Th"},friday:{id:"automations.WeekdaySelector.weekdayAbbreviations.friday",defaultMessage:"Fr"},saturday:{id:"automations.WeekdaySelector.weekdayAbbreviations.saturday",defaultMessage:"Sa"}}),ie={SU:re.sunday,MO:re.monday,TU:re.tuesday,WE:re.wednesday,TH:re.thursday,FR:re.friday,SA:re.saturday};function ae(e){const{weekdays:t,onChange:r,style:i,disabled:a}=e,o=(0,l().YB)();return(0,S.jsx)(h().jX,{direction:"row",gap:"auto",width:"fill",style:i,children:n(567149).Z.map((e=>(0,S.jsx)(oe,{isSelected:t.includes(e),onClick:()=>{const n=t.includes(e)?t.length>1?t.filter((t=>t!==e)):t:[...t,e];r(n)},disabled:a,children:o.formatMessage(ie[e])},e)))})}function oe(e){const{isSelected:t,children:n,onClick:r,disabled:i}=e,{isMobile:s}=(0,a().Fy)(),d=(0,o().yK)((e=>({button:{...s?{width:44,height:44,fontSize:32}:{width:28,height:28},color:t?te().ZP.white:e.darkTextColor,display:"inline-flex",alignItems:"center",justifyContent:"center",borderRadius:100,flexShrink:0,fontSize:s?m().JB.UISmall.mobile:m().JB.UISmall.desktop,background:t?te().ZP.blue:e.accentColors.gray[75]},pressed:{background:t?e.blueButtonPressedBackground:e.accentColors.gray[200]},hovered:{background:t?e.blueButtonHoveredBackground:e.accentColors.gray[100]}})),[s,t]);return(0,S.jsx)(ne().Z,{disabled:i,onClick:r,style:d.button,hoveredStyle:d.hovered,pressedStyle:d.pressed,children:n})}const se=(0,l().vU)({frequencyLabel:{id:"automations.RecurrenceEditor.frequencyLabel",defaultMessage:"Every"},recurTimeLabel:{id:"automations.RecurrenceEditor.recurTimeLabel",defaultMessage:"At"},startTimeLabel:{id:"automations.RecurrenceEditor.startTimeLabel",defaultMessage:"Starting"},endConditionLabel:{id:"automations.RecurrenceEditor.endConditionLabel",defaultMessage:"Ending"},deleteRecurrenceLabel:{id:"automations.RecurrenceEditor.deleteRecurrenceLabel",defaultMessage:"Stop repeating"},timezone:{id:"automations.RecurrenceEditor.timezone",defaultMessage:"Timezone"}});function de(e){const{onDelete:t,disabled:n,allowExpiredRecurrence:r}=e,i=(0,l().YB)(),d=(0,R().F)({minWidth:260}),u=[],{isMobile:y}=(0,a().Fy)(),h=(0,o().yK)((e=>({disabledMessage:{color:e.lightTextColor,fontSize:y?m().JB.UISmall.mobile:m().JB.UISmall.desktop}})),[y]);n&&u.push({key:"disabled_message",items:[{key:"disabled_message",action:()=>{},render:e=>(0,S.jsx)(b().ZP,{...e,title:(0,S.jsx)("div",{style:h.disabledMessage,children:(0,S.jsx)(l()._H,{id:"automations.RecurrenceEditor.noPermissionMessage",defaultMessage:"You do not have permission to edit this automation"})})})}],render:e=>(0,S.jsx)(w().Z,{...e})}),u.push({key:"main",items:(0,c().oA)([{key:"frequency",action:()=>{},render:t=>(0,S.jsx)(ue,{...t,...e})},pe(e),be(e),{key:"recur_time",action:()=>{},render:t=>(0,S.jsx)(le,{...t,...e})}]),render:e=>(0,S.jsx)(w().Z,{...e,topBorder:n})}),u.push({key:"times",items:[{key:"start_time",action:()=>{},render:t=>(0,S.jsx)(ce,{...t,...e})},{key:"end_condition",action:()=>{},render:t=>(0,S.jsx)(ge,{...t,...e})},{key:"timezone",action:()=>{},render:t=>(0,S.jsx)(xe,{...t,...e})}],render:e=>(0,S.jsx)(w().Z,{...e,topBorder:!0})}),t&&!n&&u.push({key:"delete",items:[{key:"delete",action:()=>{},render:n=>(0,S.jsx)(ye,{...n,...e,onClick:t})}],render:e=>(0,S.jsx)(w().Z,{...e,topBorder:!0})});const p=function(e){const{recurrence:t,intl:n,allowExpiredRecurrence:r}=e;if(!(0,ee().h)(t))return{key:"next_recurrence",items:[{key:"invalid_recurrence_config",action:()=>{},render:e=>(0,S.jsx)(me,{...e,children:(0,S.jsx)(l()._H,{id:"automations.RecurrenceEditor.invalidRecurrenceConfig",defaultMessage:"Missing required fields"})})}],render:e=>(0,S.jsx)(w().Z,{...e,topBorder:!0})};const i=(0,s().getFormattedNextRecurrenceTime)({recurrence:t,intl:n});if(!i)return r?{key:"expired_recurrence",items:[{key:"expired_recurrence",action:()=>{},render:e=>(0,S.jsx)(me,{mode:"info",...e,children:(0,S.jsx)(l()._H,{id:"automations.RecurrenceEditor.automationComplete",defaultMessage:"This is complete and will not run again"})})}],render:e=>(0,S.jsx)(w().Z,{...e,topBorder:!0})}:{key:"next_recurrence",items:[{key:"next_recurrence",action:()=>{},render:e=>(0,S.jsx)(me,{...e,children:(0,S.jsx)(l()._H,{id:"automations.RecurrenceEditor.automationWillNeverRun",defaultMessage:"This automation will never run"})})}],render:e=>(0,S.jsx)(w().Z,{...e,topBorder:!0})};return{key:"next_recurrence",items:[{key:"next_recurrence",action:()=>{},render:e=>(0,S.jsx)(he,{...e,nextRecurrenceTime:i})}],render:e=>(0,S.jsx)(w().Z,{...e,topBorder:!0})}}({recurrence:e.currentValue,intl:i,allowExpiredRecurrence:r});return p&&u.push(p),(0,S.jsx)(x().Z,{...d,children:(0,S.jsx)(k().ZP,{disallowBackspace:!0,type:k().iW.Vertical,sections:u,initialFocus:0})})}const ue=(0,i.forwardRef)((function(e,t){const{currentValue:n,onChange:r,disabled:u,...c}=e,m=(0,a().Fy)(),p=(0,o().yK)((e=>({input:{maxWidth:60,margin:2,opacity:u?.5:1},icon:{width:10,marginLeft:4,fill:e.lightIconColor},button:{justifyContent:"flex-end",height:28,marginRight:12,opacity:u?.5:1},menuItem:{...!m.isMobile&&{width:"calc(100% - 8px)",marginLeft:4,marginRight:4}},menuItemRight:{marginRight:0}})),[m.isMobile,u]),g=(0,y().$K)(n.interval)&&1!==n.interval,x=(0,i.useCallback)((e=>{n.frequency!==e&&r({...n,frequency:e,..."week"===e&&0===(n.weekdays??[]).length?{weekdays:["MO"]}:{},..."month"===e?{monthly_restriction:{type:"monthdays",monthdays:[1]}}:{}})}),[n,r]);return(0,S.jsx)(b().ZP,{...c,ref:t,title:(0,S.jsx)(l()._H,{...se.frequencyLabel}),style:p.menuItem,rightStyle:p.menuItemRight,disabled:u,right:(0,S.jsxs)(h().jX,{direction:"row",gap:4,width:"hug",align:"center",children:[(0,S.jsx)(Z,{style:p.input,currentValue:n.interval,onChange:e=>{r({...n,interval:e})},extraValidation:s().isValidRecurrenceInterval,disabled:u,maxlength:2}),(0,S.jsx)(f().ZP,{popupType:m.isMobile?f().Z4.SlideUp:f().Z4.Popup,render:e=>(0,S.jsx)(W,{currentFrequency:n.frequency,onSelect:t=>{x(t),e.close()},pluralLabels:g}),renderOrigin:e=>(0,S.jsxs)(j().Z,{...e,style:p.button,disabled:u,children:[(0,S.jsx)(l()._H,{...O[n.frequency](g)}),!u&&(0,d().i)(p.icon)]}),disabled:u})]})})})),le=(0,i.forwardRef)((function(e,t){const{currentValue:n,onChange:i,disabled:o,...d}=e,c=(0,l().YB)(),m=(0,a().Fy)();let h;return(0,y().$K)(n.hour)&&(h=(0,s().isRunningBetweenMidnightAnd3AM)(n)?c.formatMessage($.aroundMidnight):r().ou.utc().set({hour:n.hour,minute:n.minute??0,second:0,millisecond:0}).setLocale((0,u().E2)(c)).toFormat((0,y().$K)(n.minute)&&0!==n.minute?"h:mm a":"h a")),(0,S.jsx)(f().ZP,{disabled:o,popupType:m.isMobile?f().Z4.SlideUp:f().Z4.Popup,render:e=>(0,S.jsx)(X,{onRecurTimeSelected:t=>{i({...n,hour:t.hour,minute:t.minute}),e.close()},currentRecurTime:{hour:n.hour,minute:n.minute}}),placementToOrigin:f().pO.Right,alignmentToOrigin:f().vR.Start,renderOrigin:e=>(0,S.jsx)(g().X,{...d,...e,right:h,title:(0,S.jsx)(l()._H,{...se.recurTimeLabel}),chevronType:"right",disabled:o})})})),ce=(0,i.forwardRef)((function(e,t){const{currentValue:i,onChange:o,disabled:s,...d}=e,u=(0,l().YB)(),c=(0,a().Fy)(),y=(0,n(646574).p6)({date:r().ou.fromMillis(i.start_date),dateFormat:"relative",allowRelativeDates:!0,intl:u,shortenDate:!0});return(0,S.jsx)(f().ZP,{disabled:s,popupType:c.isMobile?f().Z4.SlideUp:f().Z4.Popup,render:e=>(0,S.jsx)("div",{style:{padding:"18px 14px 14px"},children:(0,S.jsx)(M().Z,{firstDayOfWeek:v().AK.state,value:Math.max(i.start_date,Date.now()),onChange:t=>{o({...i,start_date:t}),e.close()},disabledDays:{before:new Date}})}),placementToOrigin:f().pO.Right,alignmentToOrigin:f().vR.Start,renderOrigin:e=>(0,S.jsx)(g().X,{...d,...e,right:y,title:(0,S.jsx)(l()._H,{...se.startTimeLabel}),chevronType:"right",disabled:s})})})),ye=(0,i.forwardRef)((function(e,t){const{currentValue:n,...r}=e,i=(0,o().yK)((e=>({menuItem:{paddingBlock:2}})),[]);return(0,S.jsx)(p().Z,{...r,ref:t,title:(0,S.jsx)(l()._H,{...se.deleteRecurrenceLabel}),style:i.menuItem,isRedOnHover:!0})}));const me=(0,i.forwardRef)((function(e,t){const{children:n,mode:r="error",...i}=e,{isMobile:s}=(0,a().Fy)(),d=(0,o().yK)((e=>({disabledMessage:{color:"error"===r?e.errorText:e.lightTextColor,fontSize:s?m().JB.UISmall.mobile:m().JB.UISmall.desktop}})),[r,s]);return(0,S.jsx)(b().ZP,{...i,ref:t,title:(0,S.jsx)("div",{style:d.disabledMessage,children:n})})})),he=(0,i.forwardRef)((function(e,t){const{nextRecurrenceTime:n,...r}=e,{isMobile:i}=(0,a().Fy)(),s=(0,o().yK)((e=>({menuItem:{paddingBlock:2},titleWrap:{display:"flex",...i?{flexDirection:"row",flexWrap:"wrap",gap:4}:{flexDirection:"column"},color:e.lightTextColor,fontSize:i?m().JB.UISmall.mobile:m().JB.UISmall.desktop}})),[i]);return(0,S.jsx)(b().ZP,{...r,style:s.menuItem,title:(0,S.jsxs)("div",{style:s.titleWrap,children:[(0,S.jsx)("div",{children:(0,S.jsx)(l()._H,{defaultMessage:"Next occurrence:",id:"automations.RecurrenceEditor.NextRecurrenceMenuItem.nextOccurrence"})}),(0,S.jsx)("div",{children:n})]})})}));function pe(e){const{currentValue:t}=e;if("week"===t.frequency)return{key:"weekday_selector",action:()=>{},render:t=>(0,S.jsx)(fe,{...t,...e})}}const fe=(0,i.forwardRef)((function(e,t){const{currentValue:n,onChange:r,disabled:i,...a}=e,s=(0,o().yK)((e=>({menuItem:{paddingBlock:6},weekdaySelector:{paddingInline:4}})),[]);return(0,S.jsx)(b().ZP,{...a,disabled:i,style:s.menuItem,title:(0,S.jsx)(ae,{weekdays:n.weekdays??[],style:s.weekdaySelector,onChange:e=>{r({...n,weekdays:e})},disabled:i})})})),ge=(0,i.forwardRef)((function(e,t){const{currentValue:n,onChange:r,disabled:o,...d}=e,u=(0,a().Fy)(),c=(0,l().YB)(),y=(0,i.useMemo)((()=>n.end_condition),[n]),m=(0,i.useCallback)((e=>{r({...n,end_condition:e})}),[n,r]),h=(0,i.useMemo)((()=>(0,s().getFormattedEndCondition)(y,c)),[y,c]);return(0,S.jsx)(f().ZP,{disabled:o,popupType:u.isMobile?f().Z4.SlideUp:f().Z4.Popup,render:e=>(0,S.jsx)(T,{currentValue:y,onChange:m}),placementToOrigin:f().pO.Right,alignmentToOrigin:f().vR.Start,renderOrigin:e=>(0,S.jsx)(g().X,{...d,...e,right:h,title:(0,S.jsx)(l()._H,{...se.endConditionLabel}),chevronType:"right",disabled:o})})})),xe=(0,i.forwardRef)((function(e,t){const{currentValue:r,onChange:a,disabled:o,...s}=e,d=(0,i.useCallback)((e=>{a({...r,timezone:e})}),[r,a]);return(0,S.jsx)(n(91253).X,{enableRecents:!0,placementToOrigin:f().pO.Right,alignmentToOrigin:f().vR.Start,onSelect:d,currentValue:r.timezone,renderOrigin:e=>(0,S.jsx)(g().X,{...s,...e,title:(0,S.jsx)(l()._H,{...se.timezone}),chevronType:"right",right:(0,n(874459).er)(r.timezone)})})}));function be(e){const{currentValue:t,onChange:n}=e;if("month"===t.frequency)return{key:"month_restriction",action:()=>{},render:e=>(0,S.jsx)(P,{...e,initialValue:t.monthly_restriction,startDateForFallback:t.start_date,onChange:e=>{n({...t,monthly_restriction:e})}})}}},25303:(e,t,n)=>{n.d(t,{h:()=>i});var r=()=>n(696459);function i(e){return(0,r().$K)(e.interval)}}}]);