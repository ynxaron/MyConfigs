"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[97598,95986,30795],{606352:(e,t,o)=>{o.r(t),o.d(t,{handleWorkflowTemplatesDeeplink:()=>E});o(267602),o(653476),o(749411),o(241792);var r=()=>o(506347),n=()=>o(780741),i=()=>o(836273),a=()=>o(306164),l=()=>o(691970),d=()=>o(513670),s=()=>o(839002),p=()=>o(696459),c=()=>o(385875),u=()=>o(876822),m=()=>o(826955),_=()=>o(965350),y=()=>o(737128),f=()=>o(281236),v=()=>o(938938),g=()=>o(533808),w=()=>o(184441),S=()=>o(13382),h=()=>o(224597),I=()=>o(13750),b=()=>o(47443),M=()=>o(497065);async function E(e){const{nextRoute:t}=e,o=await async function(e){var t;let{environment:o,nextRoute:n}=e;if(!o.currentUser.id)return{error:"no_user_id",newEnvironment:o};const i=await async function(e){let{environment:t,nextRoute:o}=e;const{spaceId:r}=await S().Ie(t),n=t.currentUser.id,i=o.spaceId??r,a=o.userId??n,p=t.currentUser.loggedInUserIds.map((e=>{const o={table:l().dx,id:e};return new(m().r9)(t,o,{userId:e})}));await(0,s().qd)(p,25,(e=>e.load()));const u=p.flatMap((e=>e.getSpaceViewStores()));await(0,s().qd)(u,25,(e=>e.load()));const _=c().Z.getAllSpaceViewStores(t).filter((e=>{var t;return null===(t=e.getSpaceStore())||void 0===t?void 0:t.canEdit()}));return(0,d().MR)(_,(e=>e.getSpaceId()===i&&e.getParentId()===a?0:e.getParentId()===a&&e.getSpaceId()===r?1:e.getParentId()===a?2:e.getParentId()===n&&e.getSpaceId()===r?3:e.getParentId()===n?4:e.getSpaceId()===i?5:e.getSpaceId()===r?6:7))[0]}({environment:o,nextRoute:n}),a=null==i?void 0:i.getParentId();if(!i)return{error:"no_space_view_store",newEnvironment:o};if(!a)return{error:"no_space_view_user_id",newEnvironment:o};let p=o;a!==o.currentUser.id&&(p=await I().x({environment:o,newCurrentUserId:a}),p&&(o=p));await i.load();const _=i.getSpaceId();i.id!==(null===(t=u().default.state.currentSpaceViewStore)||void 0===t?void 0:t.id)&&(n.autoCreateDatabase?await h().ce({environment:o,spaceViewStore:i}):await h().y3({environment:p,spaceViewStore:i,userSettingsStore:u().default.state.currentUserSettingsStore,userRootStore:u().default.state.currentUserRootStore,pageVisitSource:r().tY.WorkflowTemplatesDeeplink,navigationType:"switchingToOrLoadingSpace"}));await u().default.waitUntil((()=>{var e;return(null===(e=u().default.state.currentSpaceStore)||void 0===e?void 0:e.id)===_}));const y=u().default.state.currentSpaceStore;if(!y||y.id!==_||!y.canEdit())return{error:"no_valid_space_store",newEnvironment:p};return{value:{newSpaceStore:y},newEnvironment:p}}(e);if(o.error)return void M().c4({environment:o.newEnvironment,url:i()._j.root,redirect:!0});const E=o.newEnvironment,A=o.value.newSpaceStore,k=await async function(e){let{currentSpaceStore:t,nextRoute:o}=e;if("private"===o.location.type)return t;if("team"===o.location.type){const e=m().zX.createChildStore(t,{table:a().e0,id:o.location.teamId,spaceId:t.id});await e.load();return e.canAddOrRemoveTopLevelPages()&&e.getParentId()===t.id?e:t}(0,p().t1)(o.location)}({currentSpaceStore:A,nextRoute:t});let C;var T;t.autoCreateDatabase&&(C=await(0,_().Ex)({environment:E,parentStore:k}),null!==(T=C)&&void 0!==T&&T.collectionViewBlockStore&&b()._c({environment:E,store:C.collectionViewBlockStore,pageVisitSource:r().tY.WorkflowTemplatesDeeplink}));const R=f().globalWorkflowTemplates.fromIdOfType({templateId:n()._q,type:"collection"}),x=(0,g().W)({origin:"workflow_templates_deeplink",parentStore:k}),D="aiBuilder"===t.modalType;w().default.setState({open:!0,isSaving:!1,...x,...D?{version:"in_app_template_onboarding_ai",collectionTemplate:R,previewCollectionViewTemplateId:void 0,userCustomizations:{featureTemplateSelections:[],recordTitles:[]},collectionViewBlockStore:void 0,setupGenerator:(0,v().getSetupGeneratorForTemplate)({environment:E,template:R,parentStore:k,initialAiPrompt:void 0,analyticsArgs:{origin:"workflow_templates_deeplink",hadSelectionModalSearchEntered:!1,workflowTemplatesFlowId:x.flowId}})}:{version:"in_app_template_onboarding_full_with_discovery"},currentStepIndex:0,parentStore:k,existingCollectionInfo:C,relationInfos:[],navigateToOnFinish:t.autoCreateDatabase?"skip":"created_collection",collectionTemplatesSearchQuery:void 0,onClose:e=>{var t;(0,y().jw)({environment:E,userAction:"workflowDeeplinkActions.handleWorkflowTemplatesDeeplink",result:e,existingCollectionViewBlockStore:null===(t=C)||void 0===t?void 0:t.collectionViewBlockStore})}})}},913011:(e,t,o)=>{o.d(t,{H:()=>c});o(821057);var r=()=>o(792197),n=()=>o(308240),i=()=>o(215134),a=()=>o(6623),l=()=>o(639708),d=()=>o(269299),s=()=>o(655260),p=()=>o(772669);function c(e){let{environment:t,transaction:o,layoutStore:c,position:u,sessionId:m,beforePerformDeleteModule:_}=e;const y=c.getModules();if(!y)throw new Error("[deleteModuleAtPosition] modules by area not found for layout store");const f=(0,i().h7)(y,(e=>e.id===u.moduleId));if(!f)throw new Error("[deleteModuleAtPosition] module to delete not found");const{module:v,position:g}=f;if(!(0,a().Fo)(v))throw new Error("[deleteModuleAtPosition] module to delete is not removeable");var w;(d().createAndCommitOrAppend({environment:t,transaction:o,canUndo:!0,perform(e){!function(e){const{transaction:t,layoutStore:o,moduleLocation:i,moduleToDelete:a,beforePerformDeleteModule:s}=e;s&&s(t);(0,l().Fc)(a)&&(0,p().deleteViewsModuleDependencies)({layoutStore:o,viewsModule:a,transaction:t});if("form_conditional_modules"===i.area){const e=r().CI.removeChildModule({pointer:o.pointer,modulesByArea:o.getModules(),module:a});for(const r of e)d().applyOperation({transaction:t,store:o,operation:r})}else{const e="views_main_tab_modules"===i.area?{area:i.area,viewId:i.viewId}:{area:n().mt[i.area]};d().applyOperation({transaction:t,store:o,operation:r().CI.deleteModuleInArea({...e,pointer:o.pointer,moduleId:a.id})})}}({environment:t,transaction:e,layoutStore:c,moduleLocation:g,moduleToDelete:v,beforePerformDeleteModule:_})},userAction:"pageLayout.deleteActions.deleteModuleAtPosition"}),m)&&s().DZ({environment:t,module:v,sessionId:m,collectionId:null===(w=c.getCollectionModel())||void 0===w?void 0:w.id,layoutId:c.id,context:(0,n().AR)(u.area),area:u.area})}},142730:(e,t,o)=>{o.d(t,{IR:()=>C,L0:()=>R,MF:()=>T,gm:()=>x,iQ:()=>D,m2:()=>E});o(821057),o(492176),o(7961),o(267602),o(653476);var r=()=>o(956057),n=()=>o(530980),i=()=>o(308240),a=()=>o(215134),l=()=>o(667932),d=()=>o(137785),s=()=>o(639708),p=()=>o(483791),c=()=>o(593515),u=()=>o(82937),m=()=>o(497065),_=()=>o(269299),y=()=>o(887430),f=()=>o(487270),v=()=>o(793935),g=()=>o(876822),w=()=>o(482162),S=()=>o(826955),h=()=>o(26796),I=()=>o(913011),b=()=>o(655260),M=()=>o(356117);function E(e){let{environment:t,transaction:o,collectionStore:r,userId:i,modules:a}=e;const d=(0,f().Ii)({environment:t,spaceId:r.getSpaceId(),table:p().Bh}),s=S().t1.createChildStore(r,d),{model:c,operations:[u]}=n().rp4.create({pointer:d,parent:r.pointer,createdByUserId:i,modules:a??(0,l()._P)()});_().applyOperation({transaction:o,store:s,operation:u});const m=n().kj1.setLayout(r.pointer,d);return _().applyOperation({transaction:o,store:r,operation:m}),{model:c,store:s}}function A(e){let t;return e?t=e:w().default.state.open&&w().default.state.targetStore?t=w().default.state.targetStore:g().default.state.mainEditorCurrentBlockStore&&(t=g().default.state.mainEditorCurrentBlockStore),t}function k(e){v().setUpdateExpand({environment:e,isExpanded:!1,from:"keyboard_default",saveDetailsSidebarPreference:!1}),u().xv({environment:e,from:"open_page_layout_editor",preventAnimation:!0})}function C(e){var t,o;let{environment:n,blockStore:i,collectionStore:a,collectionViewStore:l,from:d,initialSelectedModuleType:s}=e;const p=function(e){var t;let o=A(e);if(null!==(t=o)&&void 0!==t&&t.isCollectionView()){const e=(0,y().fm)(o);o=e?e.resultsInViewOrder(1).at(0):void 0}return o}(i),c=window.location.href;k(n);const u=r().Il();h().Z.setState({isOpen:!0,mode:"layout-editor",collectionStore:a,pageStore:p,siteRootBlockStore:void 0,sessionId:u,initialSelectedModuleId:null==p||null===(t=p.getAssociatedCollectionStore())||void 0===t||null===(t=t.getLayoutStore())||void 0===t||null===(t=t.getModel())||void 0===t||null===(t=t.firstRawModuleOfType(s??"titleWithIcon"))||void 0===t?void 0:t.id,urlOnOpen:c}),(0,b().Rt)({environment:n,from:d,context:"layout",sessionId:u,collectionId:null==a?void 0:a.id,existingLayoutId:null==a||null===(o=a.getLayoutStore())||void 0===o?void 0:o.id,collectionViewId:null==l?void 0:l.id})}function T(e){let{environment:t,store:o,siteRootBlockStore:n,from:i}=e;const a=A(o);k(t);const l=r().Il();h().Z.setState({isOpen:!0,mode:"site-settings-editor",collectionStore:void 0,pageStore:a,siteRootBlockStore:n,sessionId:l}),(0,b().Rt)({environment:t,context:"site",from:i,sessionId:l,collectionId:void 0,existingLayoutId:void 0})}function R(e){h().Z.getState().isOpen&&x(e)}function x(e){let{environment:t}=e;const o=h().Z.getState();if(!o.isOpen)throw new Error("Cannot close page layout editor. Page layout editor is not open.");"layout-editor"===o.mode&&o.urlOnOpen&&window.location.href!==o.urlOnOpen&&m().op(t),h().Z.setState({isOpen:!1})}function D(e){var t;let{environment:o,transaction:r,property:n,layoutStore:l}=e;const p=h().Z.getSessionId(),u=null===(t=l.getModel())||void 0===t?void 0:t.getRawModules(),m=l.getCollectionModel();if(!u||!m)return;const _=S().NW.createChildStore(l,m.pointer),y=(0,a()._i)(u,(e=>"titleWithIcon"===e.type));if(y&&(0,s().p9)(y.module)){var f;const{module:e,position:t}=y,a={...e,type:"titleWithIcon",propertyIds:null===(f=e.propertyIds)||void 0===f?void 0:f.filter((e=>e!==n))};(0,M().Uq)({environment:o,sessionId:p,transaction:r,layoutStore:l,position:{area:(0,i().Gc)(t.area),moduleId:e.id},updatedModule:(0,d().V)(a)})}const v=(0,a().MI)(u,(e=>"property"===e.type&&e.propertyId===n));for(const{module:a,position:d}of v){const e=a.id,t=(0,i().Gc)(d.area);(0,I().H)({environment:o,sessionId:p,transaction:r,layoutStore:l,position:{area:t,moduleId:e}})}const g=m.getFormat().collection_page_sections;if(g){const e=g.filter((e=>e.section!==n));c().Do({store:_,pageSectionFormats:e,transaction:r,environment:o})}}},356117:(e,t,o)=>{o.d(t,{Uq:()=>m,Wb:()=>y});o(821057),o(267602),o(470928),o(30005);var r=()=>o(109477),n=()=>o(530980),i=()=>o(308240),a=()=>o(712185),l=()=>o(215134),d=()=>o(667932),s=()=>o(639708),p=()=>o(827370),c=()=>o(421654),u=()=>o(269299);function m(e){let{environment:t,transaction:o,layoutStore:r,position:d,updatedModule:s,sessionId:p}=e;const c=i().mt[d.area],m=r.getRawModules();if("form_conditional_modules"===c){const e=null==m?void 0:m[c];if(!(null==e?void 0:e[d.moduleId]))throw new Error("Unable to find module being updated.");return void u().createAndCommitOrAppend({environment:t,transaction:o,canUndo:!0,perform(e){u().applyOperation({transaction:e,store:r,operation:n().CIp.updateNestedModule(r.pointer,c,(0,a().cm)(s))})},userAction:"BuilderLayoutModules.updateModule"})}if(!m)throw new Error("Unable to find modules");const _=(0,l().mT)(m,(e=>e.id===d.moduleId));if(!_||_.area!==c)throw new Error("Unable to find module being updated.");u().createAndCommitOrAppend({environment:t,transaction:o,canUndo:!0,perform(e){u().applyOperation({transaction:e,store:r,operation:n().CIp.updateModuleInArea({pointer:r.pointer,module:(0,a().cm)(s),..."views_main_tab_modules"===_.area?{area:_.area,viewId:_.viewId}:{area:_.area}})})},userAction:"BuilderLayoutModules.updateModule"})}function _(e){var t,o,r;let{collectionStore:n,layoutStore:i}=e;const a=new Map,l=n.getFormat(),d=[...null===(t=i.getModules())||void 0===t?void 0:t.page_main,...null===(o=i.getModules())||void 0===o?void 0:o.page_details],p=new Map;null===(r=l.property_visibility)||void 0===r||r.forEach((e=>{p.set(e.property,e)})),d.forEach((e=>{if(!(0,s().LP)(e))return(0,s().f)(e)?(a.set(e.propertyId,{property:e.propertyId}),void p.set(e.propertyId,{property:e.propertyId,visibility:"show"})):void 0;e.propertyIds.forEach((e=>{a.set(e,{property:e}),p.set(e,{property:e,visibility:"show"})}))}));const c=n.getNormalizedPropertyGroups();var u;c?c.forEach((e=>{var t;null===(t=e.propertyIds)||void 0===t||t.forEach((e=>{a.has(e)||a.set(e,{property:e})}))})):null===(u=l.collection_page_properties)||void 0===u||u.forEach((e=>{a.has(e.property)||a.set(e.property,e)}));return{propertiesFormat:Array.from(a.values()),propertyVisibility:Array.from(p.values())}}function y(e){let{environment:t,transaction:o,collectionStore:i,layoutStore:a}=e;const{propertiesFormat:l,propertyVisibility:m}=_({collectionStore:i,layoutStore:a});u().createAndCommitOrAppend({environment:t,transaction:o,canUndo:!0,perform(e){const t=a.getBlockChildrenPointers(),o=a.getFormat(),_=a.firstModuleOfType("viewsMain");_&&(0,s().aJ)(_)&&t.find((e=>p().dr.isEqual(e,_.collection_view_block_pointer)))&&u().applyOperation({transaction:e,store:a,operation:n().CIp.removeBlockChild(a.pointer,_.collection_view_block_pointer.id)});const y=null==o?void 0:o.previousViewsMainCollectionViewBlockPointer,f=y&&t.find((e=>p().dr.isEqual(e,y)));f&&u().applyOperation({transaction:e,store:a,operation:n().CIp.removeBlockChild(a.pointer,f.id)}),u().applyOperation({transaction:e,store:a,operation:n().CIp.setModulesByAreas(a.pointer,(0,d()._P)())}),u().applyOperation({transaction:e,store:a,operation:n().CIp.deleteFormat(a.pointer)});const v=i.getFormat(),{page_section_visibility:g}=v;c().FH({stores:[i],update:{property_groups:void 0,collection_page_properties:l,property_visibility:m,...g?{page_section_visibility:r().dN}:void 0},transaction:e})},userAction:"BuilderLayoutModules.resetLayoutToDefault"})}},772669:(e,t,o)=>{o.r(t),o.d(t,{deleteViewsModuleDependencies:()=>a});var r=()=>o(349220),n=()=>o(332542),i=()=>o(826955);function a(e){const{layoutStore:t,viewsModule:o,transaction:a}=e,l=(0,r().TO)(i().G.createChildStore(t,o.collection_view_block_pointer));n().hr({childStore:l,parentStore:t,transaction:a})}},877727:(e,t,o)=>{o.d(t,{QZ:()=>a,SV:()=>n,mq:()=>i});var r=()=>o(749826);function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r().default.checkGate({gateName:"workflow_templates_settings_dev",disableExposureLogging:e.disableExposureLogging})&&r().default.checkGate({gateName:"packaging_m3.1",disableExposureLogging:e.disableExposureLogging})}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r().default.checkGate({gateName:"packaging_m3.1",disableExposureLogging:e.disableExposureLogging})}function a(e){return!e.device.isPhone}},999582:(e,t,o)=>{o.d(t,{Z:()=>i});class r extends(()=>o(263184))().default{getInitialState(){return{}}}const n=new r;o(947115).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",n);const i=n},29488:(e,t,o)=>{function r(e){return`${e.table}:${e.id}`}o.d(t,{O:()=>r})},157955:(e,t,o)=>{o.r(t),o.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>T,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>I,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>h,MAX_RECURRENCE_INTERVAL:()=>f,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>v,RRULE_WEEKDAYS_MAP:()=>y,convertFromUnpersistedRecurrenceConfig:()=>P,convertToUnpersistedRecurrenceConfig:()=>R,getFormattedEndCondition:()=>C,getFormattedNextRecurrenceTime:()=>k,getNewEndTimestamp:()=>x,getNextDateUtc:()=>A,getRecurrenceAfter:()=>M,isRunningBetweenMidnightAnd3AM:()=>E,isValidRecurrenceInterval:()=>g,isValidRecurrenceNumberOfRuns:()=>w,rruleFromRecurrence:()=>S,templateAncestorsViolateRecurrenceNesting:()=>b});o(267602),o(653476),o(241792);var r=()=>o(730120);o(670560);function n(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),r=1;r<t;r++)o[r-1]=arguments[r];if(0===o.length)return e.map((e=>[e]));const i=[];for(const a of e)i.push(...n(o[0],...o.slice(1)).map((e=>[a,...e])));return i}var i=()=>o(696459),a=()=>o(326966),l=()=>o(803021),d=()=>o(646574),s=()=>o(998411),p=()=>o(578292);class c extends(()=>o(484885))().Ci{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var u=()=>o(494616);const m=(0,o(788860).vU)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12â€“3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),_={day:c.DAILY,week:c.WEEKLY,month:c.MONTHLY,year:c.YEARLY},y={MO:c.MO,TU:c.TU,WE:c.WE,TH:c.TH,FR:c.FR,SA:c.SA,SU:c.SU},f=99,v=999;function g(e){return(0,a().hj)(e)&&Number.isInteger(e)&&e>0&&e<=f}function w(e){return(0,a().hj)(e)&&Number.isInteger(e)&&e>0&&e<=v}function S(e){const{start_date:t,frequency:o,interval:r,weekdays:a,timezone:d,hour:s,minute:p}=e,u="week"===o&&a?a.map((e=>y[e])):void 0,m={};return(0,i().$K)(e.end_condition)&&("date"===e.end_condition.type?m.until=(0,l().pd)(e.end_condition.end_at):"number"===e.end_condition.type?m.count=e.end_condition.number_of_occurrences:(0,i().t1)(e.end_condition)),"month"===e.frequency&&(0,i().$K)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?m.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?m.byweekday=n(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((e=>{let[t,o]=e;return y[t].nth(o)})):(0,i().t1)(e.monthly_restriction)),new c({freq:_[o],dtstart:(0,l().pd)(t),interval:r,byweekday:u,tzid:d,byhour:s??0,byminute:p??0,bysecond:0,...m})}const h=1,I=1;function b(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const o=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),r=e.length,n=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,i=r>h,a=o.length>=I;return{violatesConstraint:i||a,templateNestingExceedsMaxDepth:i,ancestorHasDailyTemplate:a,nestedDepthOfAutomationAncestors:r,immediateAncestorRecurrenceType:n}}function M(e){const{recurrence:t,afterDate:o}=e;if((0,u().nA)(t)){const e=(0,l().kq)(o);return t.start_date>=e?new Date(t.start_date):void 0}{const e=S(t).after((0,l().pd)(o));if(!e)return;return(0,l().YL)(e)}}function E(e){return 0===e.hour||1===e.hour||2===e.hour}function A(e){return S(e).after((0,l().pd)((0,l().Jh)()))||void 0}function k(e){const{recurrence:t,intl:o}=e,n=A(P(t));if(!n)return;const i=E(t),a=r().ou.fromJSDate(n).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,p().E2)(o)).setZone(t.timezone),l=(0,d().p6)({date:a,dateFormat:"relative",allowRelativeDates:!0,intl:o,shortenDate:!0});if(i)return o.formatMessage(m.dateBetweenMidnightAnd3AM,{date:l});{let e=a.toLocaleString(r().ou.TIME_SIMPLE);return t.timezone!==(0,s().r)()&&(e+=` ${a.toFormat("ZZZZ")}`),o.formatMessage(m.dateAtTime,{date:l,time:e})}}function C(e,t){return(0,i().$K)(e)?"number"===e.type?t.formatMessage(m.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,d().p6)({date:r().ou.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,i().t1)(e):t.formatMessage(m.noEndCondition)}const T=100;function R(e){return{...e,start_date:(0,l().kq)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,l().kq)(e.end_condition.end_at)}:(0,i().t1)(e.end_condition):void 0}}function x(e,t,o){return e.plus(o-t)}function D(e,t){const o=r().ou.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,l().Jh)(o.toJSDate())}}function P(e){return{...e,start_date:(0,l().Jh)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?D(e,e.end_condition):(0,i().t1)(e.end_condition):void 0}}},519454:(e,t,o)=>{o.d(t,{R:()=>n});o(667294);var r=o(785893);const n=(0,o(827282).IU)("pencil",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M3.926 13.307H14.11c.183 0 .34-.066.472-.199a.644.644 0 00.198-.471.652.652 0 00-.198-.479.644.644 0 00-.472-.198H5.272l-1.346 1.347zm-.704-.636l7.683-7.684-1.312-1.319-7.69 7.684-.67 1.606c-.037.1-.017.191.06.273.083.082.174.105.274.069l1.655-.63zm8.34-8.326l.738-.732c.182-.187.278-.376.287-.567.009-.192-.068-.374-.232-.547l-.267-.267c-.169-.168-.351-.246-.547-.232-.196.014-.385.11-.567.287l-.739.732 1.327 1.326z"})})},667932:(e,t,o)=>{o.d(t,{KD:()=>d,_I:()=>s,_P:()=>c,l2:()=>u,x9:()=>p});o(267602),o(653476),o(241792);var r=()=>o(543172),n=()=>o(210349),i=()=>o(639708),a=()=>o(712185);const l={page_main:[{id:"cover",type:"cover"},{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyIds:[]},{id:"properties",type:"properties"},{id:"discussions",type:"discussions"},{id:"editor",type:"editor"}],page_details:[],form_layout_schema:[]},d={page_main:[{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyIds:[]},{id:"editor",type:"editor"}],page_details:[],form_layout_schema:[]},s={page_main:[{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyIds:[]},{id:"editor",type:"editor"},{id:"discussions",type:"discussions"}],page_details:[],form_layout_schema:[]};function p(e){return(0,a().Dl)({modulesByArea:l,collectionSchema:null==e?void 0:e.collectionSchema,collectionFormat:null==e?void 0:e.collectionFormat})}function c(){return{page_layout_schema:(0,a().L0)(l.page_main).map((e=>{if(!(0,i().zP)(e))return(0,n().T)(e)?{...e,id:(0,r().ZP)()}:e})).filter((e=>void 0!==e)),page_info_layout_schema:(0,a().L0)(l.page_details).map((e=>{if(!(0,i().zP)(e))return(0,n().T)(e)?{...e,id:(0,r().ZP)()}:e})).filter((e=>void 0!==e)),form_layout_schema:void 0}}function u(e,t){const o=void 0===t?[{id:(0,r().ZP)(),type:"formQuestion",formQuestionId:e}]:[{id:(0,r().ZP)(),type:"formQuestion",formQuestionId:e},{id:(0,r().ZP)(),type:"formQuestion",formQuestionId:t}];return{page_layout_schema:void 0,page_info_layout_schema:void 0,form_layout_schema:[{id:(0,r().ZP)(),type:"cover"},{id:(0,r().ZP)(),type:"formTitle"},...o,{id:(0,r().ZP)(),type:"formSubmit"}]}}},210349:(e,t,o)=>{o.d(t,{T:()=>a,s:()=>i});const r={normalizedTitleWithIcon:!0,properties:!0,property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,property_geo_point:!0,views:!0,viewsMain:!0,relationsGroup:!0,formQuestion:!0,placeholder:!0,deleted_property:!1,cover:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,transcript:!1,formTitle:!1,formSubmit:!1},n={properties:!0,property:!0,relationsGroup:!0,formQuestion:!0,placeholder:!0,titleWithIcon:!0,cover:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,transcript:!1,formTitle:!1,formSubmit:!1,views:!0,viewsMain:!0,collectionView:!0,collectionViewV2:!0};function i(e,t){return r[e.type]}function a(e){return n[e.type]}},6623:(e,t,o)=>{o.d(t,{Fo:()=>i,m7:()=>a});const r={property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,property_geo_point:!0,deleted_property:!1,relationsGroup:!0,formSubmit:!0,formQuestion:!0,formTitle:!0,placeholder:!0,transcript:!0,cover:!1,normalizedTitleWithIcon:!1,properties:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,views:!0,viewsMain:!1},n={property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,property_geo_point:!0,deleted_property:!1,formSubmit:!1,formQuestion:!1,formTitle:!1,placeholder:!1,transcript:!1,cover:!1,normalizedTitleWithIcon:!1,properties:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,relationsGroup:!0,editor:!1,views:!1,viewsMain:!1};function i(e){return r[e.type]}function a(e){return n[e.type]}}}]);