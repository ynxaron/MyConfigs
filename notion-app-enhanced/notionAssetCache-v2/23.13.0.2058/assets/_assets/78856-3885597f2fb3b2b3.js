"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[78856],{147249:(e,t,n)=>{n.d(t,{K:()=>o,y:()=>i});var r=()=>n(594546);function o(e,t){const{from:n}=t;r().K4(e,"show_tooltip",{from:n,time:Date.now()})}function i(e,t){const{from:n}=t;r().K4(e,"dismiss_tooltip",{from:n,time:Date.now()})}},128178:(e,t,n)=>{n.d(t,{I:()=>i,O:()=>o});var r=()=>n(132329);function o(e){const{cursors:t,rootStore:n}=e,o={};for(const r of t)for(const e of r.stack)for(const t of e)o[t.id]=t.index;r().default.setLimitParents(n,o)}function i(e){r().default.removeLimitParents(e.rootStore)}},169793:(e,t,n)=>{n.d(t,{ND:()=>E,RD:()=>A,gc:()=>j,gl:()=>P,u7:()=>M});var r=n(667294),o=()=>n(219727),i=()=>n(142735),a=()=>n(156642),s=()=>n(575861),l=()=>n(788860),c=()=>n(696459),d=()=>n(147249),u=()=>n(905263),p=()=>n(982855),f=()=>n(191003),g=()=>n(550054),h=()=>n(803728),m=()=>n(110372),v=()=>n(156538),S=()=>n(876822),b=()=>n(890324),y=()=>n(826955),C=()=>n(127519),I=()=>n(343353),_=()=>n(559155),w=()=>n(656801),k=n(785893);const x=1,T=1,R=(0,l().vU)({spaceForAiHeader:{id:"AiOnboardingTooltips.spaceForAi.header",defaultMessage:"Press ‘space’ for AI"},spaceForAiContent:{id:"AiOnboardingTooltips.spaceForAi.content",defaultMessage:"On a new line or page, press ‘space’ on your keyboard for AI to generate or edit the page. Try it now!"},askAiAnythingHeader:{id:"AiOnboardingTooltips.askAiAnything.header",defaultMessage:"Ask AI anything"},askAiAnythingContent:{id:"AiOnboardingTooltips.askAiAnything.content",defaultMessage:"Just tell AI what to do — the more details, the better. You can also start from an example in the menu."},refineAiResponseHeader:{id:"AiOnboardingTooltips.refineAiResponse.header",defaultMessage:"Tell AI what to do next"},refineAiResponseContent:{id:"AiOnboardingTooltips.refineAiResponse.content",defaultMessage:"How was it? Give AI further instructions to improve what it wrote, or hit ‘Done’ when finished."},showAssistantLocationHeader:{id:"AiOnboardingTooltips.showAssistantLocation.answersToYourQuestionHeader",defaultMessage:"Ask AI when searching"},showAssistantLocationContent:{id:"AiOnboardingTooltips.showAssistantLocation.askQuestionBody",defaultMessage:"AI can find pages and synthesize a quick, concise answer for you. Try it now."},showAssistantOriginElementLocationHeader:{id:"AiOnboardingTooltips.ShowAssistantOriginElementLocationTooltip.header",defaultMessage:"Start by asking a question"},showAssistantOriginElementLocationContent:{id:"AiOnboardingTooltips.ShowAssistantOriginElementLocationTooltip.content",defaultMessage:"Notion AI will find pages and compose a concise answer for you. Try it now."}});function M(){const e=(0,o().O7)(),t=function(){const e=(0,o().O7)(),t=(0,i().VK)((()=>{var e;return null===(e=S().default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),n=(0,i().VK)((()=>{const t=S().default.state.mainEditorCurrentBlockStore;return t&&b().Z.getMode(e,t)}),[e]);return(0,i().VK)((()=>{if(e.device.isMobile)return;const{currentUserSettingsStore:r,inAppCalloutStore:o}=S().default.state;if(!o.getCalloutVisibility("ai_onboarding_tooltip").canShow)return;const i=null==r?void 0:r.getSettings();if(!i)return;if((0,c().$K)(i.last_used_ai_writer_at))return;if("tooltip"!==i.ai_assistant_onboarding_phase)return;if((0,_().$_)(e,t)){if(!(0,c().$K)(i.ai_sales_assisted_extra_notification_seen_at)||(0,s().O5)(i.ai_sales_assisted_extra_notification_seen_at)<T)return}else if((0,c().$K)(i.ai_assistant_onboarding_phase_last_set_at)&&(0,s().O5)(i.ai_assistant_onboarding_phase_last_set_at)<x)return;if("space_for_ai"!==(0,w().sy)())return;if(!(0,p().GD)(n))return;const l=C().default.state;if("editing"===l.mode){const e=(0,f().QY)(l.multiSelection);if(e&&(0,g().wd)(e.selection)){const t=e.store,n=v().E.findEditableWithStore(t);if(n){const e="block"===t.pointer.table?y().G.createChildStore(t,t.pointer):void 0,r=e&&e.getType(),o=Boolean(r&&(0,a().hD)(r)),i=t.getValue();if(o&&!i)return n}}}}),[e,n,t])}(),[n,d]=(0,r.useState)(!1),h=(0,r.useCallback)((()=>{d(!0)}),[]),m=!n&&Boolean(t);return(0,r.useEffect)((()=>()=>{m&&(0,w().fz)(e)}),[e,m]),m&&t?(0,k.jsx)(u().U,{origin:()=>t.getNode(),placementToOrigin:"bottom",header:(0,k.jsx)(l()._H,{...R.spaceForAiHeader}),content:(0,k.jsx)(l()._H,{...R.spaceForAiContent}),onCloseClick:h}):null}function A(e){const{originRef:t,openState:n}=e,a=(0,o().O7)(),s=(0,i().VK)((()=>(0,w().sy)()),[]),[c,d]=(0,r.useState)(!1),p=(0,r.useCallback)((()=>{d(!0)}),[]),f="ask_ai_anything"===s&&"initialPrompt"===n.stage&&!c;return(0,r.useEffect)((()=>()=>{!a.device.isMobile&&f&&(0,w().fz)(a)}),[a,f]),a.device.isMobile||!f?null:(0,k.jsx)(u().U,{origin:t,placementToOrigin:"top",header:(0,k.jsx)(l()._H,{...R.askAiAnythingHeader}),content:(0,k.jsx)(l()._H,{...R.askAiAnythingContent}),onCloseClick:p})}function P(e){const{originRef:t,openState:n,isInputEmpty:a}=e,s=(0,o().O7)(),c=(0,i().VK)((()=>(0,w().sy)()),[]),[d,p]=(0,r.useState)(!1),f=(0,r.useCallback)((()=>{p(!0)}),[]),g="refine_ai_response"===c&&"results"===n.stage&&!n.loading&&"cursor"===n.context.type&&a&&!d;return(0,r.useEffect)((()=>()=>{!s.device.isMobile&&g&&(0,w().fz)(s)}),[s,g]),s.device.isMobile?null:(0,k.jsx)(u().U,{origin:g?t:void 0,placementToOrigin:"right",pointerOffset:-4,pointerLength:25,header:(0,k.jsx)(l()._H,{...R.refineAiResponseHeader}),content:(0,k.jsx)(l()._H,{...R.refineAiResponseContent}),onCloseClick:f})}function E(e){const{origin:t}=e,n=(0,o().O7)();(0,r.useEffect)((()=>{d().K(n,{from:"qna_button"}),m().gF(n,{callout_key:"ai_assistant_origin_element_tooltip"})}),[n]);const i=(0,r.useCallback)((()=>{const{currentUserSettingsStore:e}=S().default.state;e&&(d().y(n,{from:"qna_button"}),m().bl(n,{callout_key:"ai_assistant_origin_element_tooltip",dismiss_type:"tooltip_dismiss"}),(0,I().setQnaOnboardingPhase)(n,{phase:"complete",transactionUserAction:"AiQnaIntroModal.debug.clickTooltipComplete",userSettingsStore:e}),h().Gi(n,"ai_assistant_origin_element_tooltip"))}),[n]);return(0,k.jsx)(u().U,{style:{width:250},pointerLength:25,pointerPosition:"94%",origin:t,placementToOrigin:"top",header:(0,k.jsx)(l()._H,{...R.showAssistantOriginElementLocationHeader}),content:(0,k.jsx)(l()._H,{...R.showAssistantOriginElementLocationContent}),onCloseClick:i})}function j(e){const{origin:t}=e,n=(0,o().O7)();(0,r.useEffect)((()=>{d().K(n,{from:"qna_search"})}),[n]);const i=(0,r.useCallback)((()=>{const{currentUserSettingsStore:e}=S().default.state;e&&(d().y(n,{from:"qna_search"}),(0,I().setQnaOnboardingPhase)(n,{phase:"complete",transactionUserAction:"AiQnaIntroModal.debug.clickTooltipComplete",userSettingsStore:e}))}),[n]);return(0,k.jsx)(u().U,{style:{width:250},pointerLength:25,pointerPosition:"5%",origin:t,placementToOrigin:"bottom",header:(0,k.jsx)(l()._H,{...R.showAssistantLocationHeader}),content:(0,k.jsx)(l()._H,{...R.showAssistantLocationContent}),onCloseClick:i})}(0,n(100056).exposeDebugEnvironmentValue)("resetAIOnboarding",(e=>()=>{const{currentUserSettingsStore:t}=S().default.state;t&&n(269299).createAndCommit({userAction:"AiIntroModal.debugging.resetAIOnboarding",environment:e,canUndo:!0,perform:e=>{n(348141).d2({userSettingsStore:t,transaction:e,data:{ai_onboarding_phase:"space_for_ai"}})},userId:t.id})}))},694389:(e,t,n)=>{n.d(t,{T:()=>W,Z:()=>q});n(821057),n(122556),n(582845),n(250570),n(533019),n(721473),n(788208),n(22624),n(267602),n(241792),n(228244);var r=n(667294),o=()=>n(219727),i=()=>n(142735),a=()=>n(846550),s=()=>n(751052),l=()=>n(467171),c=()=>n(28162),d=()=>n(844085),u=()=>n(106502),p=()=>n(887430),f=()=>n(573570),g=()=>n(788860),h=()=>n(568017),m=()=>n(707513),v=()=>n(491927),S=()=>n(466970),b=()=>n(804217),y=()=>n(906651),C=n(785893);function I(){const e=(0,o().O7)(),t=(0,i().VK)((()=>b().default.state.online),[]);let n;return(0,r.useEffect)((()=>{t||v().DC(e,{type:"page_error_indicator"})}),[t,e]),n=t?(0,C.jsx)(g()._H,{defaultMessage:"Oops, there was an error loading this page. Refresh to load it again.",id:"pageErrorIndicator.loadingError.message"}):e.defaultRecordCache.persistedRecordCache?(0,C.jsx)(g()._H,{defaultMessage:"Please go online to load this page, then you'll be able to access it while offline.",id:"pageOfflineIndicator.hasLocalData.message"}):(0,C.jsx)(g()._H,{defaultMessage:"Oops, you seem to be offline. Please go online to view this page.",id:"pageOfflineIndicator.noLocalData.message"}),(0,C.jsxs)("div",{style:x(e),children:[(0,C.jsx)("div",{style:k(e),children:n}),(0,C.jsx)(y().Z,{isLarge:!0,onClick:()=>window.location.reload(),children:(0,C.jsx)(g()._H,{defaultMessage:"Refresh",id:"pageErrorIndicator.reloadButton.label"})})]})}function _(){const e=(0,o().O7)(),t=(0,i().VK)((()=>b().default.state.online),[]);(0,r.useEffect)((()=>{t||v().DC(e,{type:"page_error_indicator"})}),[t,e]);const n=(0,a().yK)((t=>({container:{height:"100%",minHeight:`calc(100vh - ${2*l().R6(e.device.isElectronMac)}px)`,paddingLeft:e.device.isMobile?16:32,paddingRight:e.device.isMobile?16:32,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},icon:{width:29,height:24,fill:t.text.secondary,marginBottom:8},title:{fontWeight:m().Ue.medium,color:t.text.secondary,textAlign:"center"},description:{color:t.text.secondary,textAlign:"center"}})),[e.device]);let s,c;return t?(s=(0,C.jsx)(g()._H,{defaultMessage:"Oops, there was an error loading this page.",id:"pageErrorIndicator.loadingError.title"}),c=(0,C.jsx)(g()._H,{defaultMessage:"Refresh to load it again.",id:"pageErrorIndicator.loadingError.description"})):(s=(0,C.jsx)(g()._H,{defaultMessage:"This page is not available while offline.",id:"pageOfflineIndicator.unavailableError.title"}),c=(0,C.jsx)(g()._H,{defaultMessage:"Please return online to access this content{hasLocalData, select, true { or sync the page} other {}}.",id:"pageOfflineIndicator.unavailableError.description",values:{hasLocalData:Boolean(e.defaultRecordCache.persistedRecordCache)}})),(0,C.jsxs)("div",{style:n.container,children:[(0,f().B)(n.icon),(0,C.jsx)("div",{style:n.title,children:s}),(0,C.jsx)("div",{style:n.description,children:c})]})}const w=function(){return(0,S().E)("download_for_offline")?(0,C.jsx)(_,{}):(0,C.jsx)(I,{})};function k(e){const{device:t}=e;return{fontSize:t.isMobile?18:32,marginBottom:8,textAlign:"center",color:h().ZP.uiBlack,maxWidth:640,lineHeight:1.3}}function x(e){const{device:t}=e;return{height:"100%",minHeight:`calc(100vh - ${2*l().R6(e.device.isElectronMac)}px)`,paddingLeft:t.isMobile?16:32,paddingRight:t.isMobile?16:32,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}}var T=()=>n(778447),R=()=>n(299519),M=()=>n(770455),A=()=>n(718959),P=()=>n(247724),E=()=>n(982855),j=()=>n(814139),O=()=>n(105649),V=()=>n(589525),L=()=>n(291335),B=()=>n(876822),K=()=>n(725751),D=()=>n(9599),Z=()=>n(72041),F=()=>n(482162),U=()=>n(890324),N=()=>n(192425),H=()=>n(881266);const W="1.375em",q=r.memo((function(e){const{store:t,routerState:d}=e,u=(0,o().O7)(),{RouterStore:p}=u,f=(0,o().Fy)(),g=(0,S().E)("inline_error_boundary"),h=(0,r.useRef)(null),[m,v]=(0,r.useState)((()=>l().R6(f.isElectronMac)));(0,r.useLayoutEffect)((()=>{if(!h.current)return;const e=h.current.getBoundingClientRect().height;v(e);const t=new ResizeObserver((e=>{for(const t of e)v(t.contentRect.height)}));return t.observe(h.current),()=>t.disconnect()}),[]);const b=(0,r.useCallback)((e=>{N().Z.state&&("scroll"===e?N().Z.state.hadScroll||(N().Z.setState({...N().Z.state,hadScroll:!0}),c().Kk(u,{interactionType:e})):"click"===e?N().Z.state.hadClick||(N().Z.setState({...N().Z.state,hadClick:!0}),c().Kk(u,{interactionType:e})):"copy"===e?N().Z.state.hadCopy||(N().Z.setState({...N().Z.state,hadCopy:!0}),c().Kk(u,{interactionType:e})):(0,n(696459).t1)(e))}),[u]);(0,r.useEffect)((()=>{if(b){const e=()=>{b("copy")};return window.addEventListener("copy",e),()=>window.removeEventListener("copy",e)}}),[b]),(0,r.useEffect)((()=>()=>t&&n(128178).I({rootStore:t})),[t]);const y=(0,i().SI)((()=>t?U().Z.getMode(u,t):U().m.disabled),[u,t]),I=(0,i().SI)((()=>(0,E().GD)(y.state)),[y]),_=(0,i().VK)((()=>{if(!t)return;const{presenceStore:e,pageVisitStore:n}=B().default.state;return{pageStore:t,presenceStore:e,pageVisitStore:n,publicEditModeStore:y,arePublicEditCompletionsEnabledStore:I}}),[I,y,t]),w=(0,i().VK)((()=>u.currentUser.isLoggedIn()),[u]),{isInvalidPage:k,isAppInitializationScreen:x,appContainerStore:T,isHome:R,shouldShowAddTo:j}=(0,i().VK)((()=>{if(!t)return{isInvalidPage:!0,isAppInitializationScreen:!1,appContainerStore:void 0,isHome:!1,shouldShowAddTo:!1};const e=u.currentUser.id===t.getCreatedById()&&t.getCreatedByTable()===n(989478).KJ;return{isInvalidPage:Boolean(!t.isDefined()||!t.canRead()),isAppInitializationScreen:Boolean(t.getAppContainerBlockStore()),appContainerStore:t.getAppContainerBlockStore(),isHome:"personal_home_page"===t.getType(),shouldShowAddTo:Boolean(d.route.showMoveTo&&t.canEdit()&&w&&e)}}),[t,d.route,w,u.currentUser]),Z=(0,i().VK)((()=>B().default.state.mainEditorCurrentBlockStore),[]),F=(0,i().VK)((()=>A().h1(u)),[u]),H=(0,a().Fg)(),W=(0,i().VK)((()=>(0,n(772529).WE)(Z)),[Z]),q=(0,i().VK)((()=>{var e;return Boolean(null===(e=K().default.state.preferences)||void 0===e?void 0:e.isVibrancyEnabled)}),[]),Q=(0,i().VK)((()=>{const e="team"===d.route.name,t={flexGrow:0,flexShrink:1,display:"flex",flexDirection:"column",background:W||e?q?`rgba(255, 255, 255, ${n(455018).V})`:(0,n(170210).$1)({theme:H,isPhone:f.isPhone}):H.contentBackground,zIndex:n(492522).Wi,height:f.isMobile?"100vh":`calc(100vh - ${m}px)`,maxHeight:"100%",position:"relative",...W?{height:"100%",position:"absolute"}:{}};if(!(0,V().Jr)(u)){const e=L().sidebarOpenStore.state;(0,V().YR)(u)||(t.boxShadow=H.shadowMD),t.pointerEvents=e?"none":"auto",t.transform="translateX(0)"}return!F&&f.isMobileNative&&(t.pointerEvents="auto",t.transform="translateX(0px)"),t}),[d,W,q,H,f.isPhone,f.isMobile,f.isMobileNative,m,u,F]),X=(0,i().VK)((()=>"nativeTab"===p.state.route.name),[p]),[ee,ne]=(0,i().VK)((()=>{const e=(0,V().$3)(u);return[e,e+(0,V().vJ)(u)]}),[u]),re=(0,i().VK)((()=>n(123145).VV()),[]),oe=(0,i().VK)((()=>O().default.isTogglingToPanelModeState()),[]),ie=(0,i().Kw)(L().sidebarResizingStore),ae=(0,i().VK)((()=>Boolean(K().default.state.isShowingTabBar)),[]),se=(0,i().VK)((()=>D().Z.state.banners),[]),le=(0,i().VK)((()=>!ae&&!(0,V().in)(u)&&!O().default.isPanelPinnedState()),[u,ae]),ce=(0,i().VK)((()=>(0,V().in)(u)),[u]),de=(0,i().Kw)(n(178786).d),ue=(0,i().VK)((()=>u.WindowSizeStore.state.paddingTop),[u.WindowSizeStore]),pe=(0,a().yK)((()=>({frameContainer:{order:n(88829).Z.appCursorListener.editor,display:"flex",flexDirection:"column",width:f.isTablet?"unset":"100%",overflow:f.isTablet?"unset":"hidden",isolation:"auto",background:de.attached?"black":"transparent"},sheetInset:de.attached?{borderRadius:12*de.proportion+"px",transform:`scale(${1-.08*de.proportion}, ${1-.035*de.proportion}) translateY(${.8*ue*de.proportion}px) translateZ(0)`,willChange:"transform border-radius",transition:de.animating?"transform 0.3s ease-in-out, border-radius 0.3s ease-in-out":void 0}:{}})),[f.isTablet,de,ue]),fe=(0,i().Kw)(n(660293).X),ge=(0,i().VK)((()=>null==t?void 0:t.canEdit()),[t]),he=(0,i().VK)((()=>B().default.state.currentSpaceViewStore),[]);return(0,C.jsx)(J,{pageContext:_,children:(0,C.jsxs)("div",{className:X?"hidden":"",style:pe.frameContainer,children:[!f.isMobile&&!x&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(n(382736).Z,{...e,ref:h,showSidebarButton:le,isElectron:f.isElectron,isInvalidPage:k,banners:se}),f.isElectronWindows&&!ae&&(0,C.jsx)(n(755589).m,{})]}),(0,C.jsxs)(n(628370).Z,{tag:"main",animate:{width:W?ne:ee,...de.attached?{}:{translateX:re}},skip:ae&&ie.isResizing||oe||f.isMobile||fe,style:{...Q,...pe.sheetInset},className:P().Wiy,children:[f.isMobile&&(0,C.jsx)(n(679387).T,{disabled:!g,from:"TopbarMobile",fallback:e=>{let{errorId:t}=e;return(0,C.jsx)("div",{className:P().ZHw,style:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%",height:s().g5,maxWidth:"100vw",paddingRight:8},children:(0,C.jsx)(n(550345).H,{errorId:t,iconSize:26})})},children:(0,C.jsx)(te,{children:(0,C.jsx)(M().WW,{...e,isInvalidPage:k,shouldShowAddTo:j,banners:se,isSidebarExpanded:ce,spaceViewStore:he})})}),T?(0,C.jsx)(z,{appContainerStore:T}):"team"===d.route.name?(0,C.jsx)(n(922003).Ej,{teamId:d.route.teamId}):R&&t?(0,C.jsx)(G,{store:t}):t?(0,C.jsx)(Y,{store:t,routerState:d,maybeLogSearchInteractionEvent:b}):null,w&&f.isMobile&&t&&(0,C.jsx)($,{store:t,shouldShowMoveTo:Boolean((d.route.showMoveTo||f.isTablet)&&ge)}),f.isMobileNative&&w&&Z&&(0,C.jsx)(M().qV,{})]})]})})}));function J(e){let{pageContext:t,children:r}=e;return t?(0,C.jsx)(n(893403).M,{value:t,children:r}):(0,C.jsx)(C.Fragment,{children:r})}function z(e){let{appContainerStore:t}=e;return(0,C.jsx)("div",{style:{position:"absolute",height:"100vh",width:"100%"},children:(0,C.jsx)(n(544903).D8,{collectionViewBlockStore:t})})}function $(e){var t;let{store:n,shouldShowMoveTo:a}=e;const s=(0,o().O7)(),l=(0,i().VK)((()=>{var e;return null===(e=s.mobileNative)||void 0===e?void 0:e.api.renderMobileActionBar}),[null===(t=s.mobileNative)||void 0===t?void 0:t.api.renderMobileActionBar]),c=(0,r.useCallback)((e=>{const{isMobileNative:t}=s.device;return(0,C.jsx)(M().Js,{stores:e,position:t?j().nd.Bottom:j().nd.Floating,currentBlockStore:n})}),[s.device,n]);return s.device.isMobileNative?(0,C.jsx)(M().Gr,{currentBlockStore:n,isNativeMobileActionBar:!0,makeActionBarComponent:e=>(0,C.jsx)(M().eU,{renderApi:l,stores:e,currentBlockStore:n,shouldShowMoveTo:a,fallbackRenderer:c})}):(0,C.jsx)(M().Gr,{currentBlockStore:n,isNativeMobileActionBar:!1,makeActionBarComponent:c})}const G=r.memo((function(e){let{store:t}=e;return(0,C.jsx)(R().Z,{disable:!0,store:t,isDefaultContainer:!0,render:()=>(0,C.jsx)(n(284047).Vd,{})})}));function Y(e){let{store:t,routerState:a,maybeLogSearchInteractionEvent:s}=e;const l=(0,o().O7)(),{RouterStore:c}=l,{historyState:d}=a,{currentLoadingContainerStore:u,pageVisitStore:p}=(0,i().VK)((()=>{const{currentLoadingContainerStore:e,pageVisitStore:t}=B().default.state;return{currentLoadingContainerStore:e,pageVisitStore:t}}),[]),f=(0,i().VK)((()=>d&&n(513670).hj(d.scrollTop)?d.scrollTop:void 0),[d]),g=(0,i().VK)((()=>Boolean((0,n(122479).eV)(l,t))),[l,t]),h=(0,i().VK)((()=>Boolean(F().default.isCenterPeekOpen()||n(21688).Z.state.open)),[]);return(0,C.jsx)(R().Z,{store:t,isDefaultContainer:!0,droppable:!0,isRootContainer:!0,disableRectangularSelection:g,disable:h,render:e=>{let{selectableEvents:o,selectableHoverMenuOverlay:i}=e;const d=n(203927).uE(c),g={pageStore:t,pageVisitStore:p,scrollToBlockIds:d,scrollToDiscussionId:d.length?void 0:a.route.discussionId,scrollToPosition:f,onReady:()=>{n(411004).Y(l,{animateScrollToBlocks:!1})},onDone:()=>{t.isCollectionView()||"rendered"===B().default.state.renderPhase||B().default.setState({...B().default.state,renderPhase:"rendered"})},initialChunkSize:n(526122).OZ,incrementChunkSize:30,render:e=>{let{scrollerRef:n,error:r,ready:a,initialRequestCompleted:l,endOfResultsReached:c,isCollectionInPage:d}=e;return(0,C.jsx)(Q,{scrollerRef:n,store:t,error:r,ready:a,initialRequestCompleted:l,endOfResultsReached:c,isCollectionInPage:d,selectableEvents:o,selectableHoverMenuOverlay:i,maybeLogSearchInteractionEvent:s})}};return(0,C.jsx)(r.Suspense,{fallback:(0,C.jsx)(H().Z,{isVisible:!0,store:t}),children:(0,C.jsx)(n(243126).F,{...g,store:u})})}},t.id)}const Q=r.memo((function(e){let{store:t,error:s,ready:l,initialRequestCompleted:c,endOfResultsReached:f,isCollectionInPage:g,selectableEvents:h,selectableHoverMenuOverlay:m,maybeLogSearchInteractionEvent:v,scrollerRef:S}=e;const b=(0,o().O7)(),y=(0,o().Fy)(),{publicEditModeStore:I}=(0,n(657320).l)()??{},_=(0,i().VK)((()=>(0,E().GD)(null==I?void 0:I.state)),[I]),w=(0,r.useCallback)((e=>{let{startTime:r,endTime:o}=e;const i=p().fm(t);n(620218).default.DO_NOT_USE_measureLegacy({metricName:"collections.max_scroll_lag_in_session",startTime:r,endTime:o},{environment:b,data:n(861026).vS(i)})}),[b,t]),k=(0,r.useCallback)((e=>{if(n(832924).default.PageScroller=e,e){const t=e.getNode();t instanceof HTMLElement&&(S.current=t)}}),[S]),x=(0,r.useCallback)((()=>{v("scroll")}),[v]),R=(0,r.useCallback)((e=>{h.onClick(e),v("click")}),[v,h]),M=(0,i().VK)((()=>t.isCollectionView()),[t]),P=(0,i().VK)((()=>function(e){const t=(0,T().EA)(e);return"number"==typeof t?`${t}px`:t}(b)),[b]),j=(0,a().yK)((()=>({spinner:{zIndex:1,opacity:.5,marginTop:`calc(-${W} / 2 - ${P} / 2)`,marginBottom:24,marginLeft:"auto",marginRight:"auto"},scroller:{display:"flex",flexDirection:"column",zIndex:1,flexGrow:1,position:"relative",...l?{}:{opacity:0,pointerEvents:"none",height:0},...M?{}:{alignItems:"center"}}})),[P,M,l]),O=(0,i().VK)((()=>D().Z.state.banners.some((e=>"over_free_block_limit"===e.contentKey))),[]),V=(0,i().Kw)(n(897257).subscriptionDataStoreInstance),L=(0,n(30795).V)(V),B=(0,i().VK)((()=>(0,n(548812).vT)(L)),[L]),K=(0,i().VK)((()=>F().default.isSidePeekOpen()?void 0:l?d().Q7(b):n(520849).Z.All),[b,l]),U=(0,i().VK)((()=>A().Zy({environment:b,store:t})),[b,t]);return(0,C.jsxs)(r.Fragment,{children:[(0,C.jsxs)(n(842574).T,{ref:k,onScrollLagMeasure:g?w:void 0,onScroll:x,preventType:K,type:U,style:j.scroller,store:Z().Z,...h,onClick:R,children:[m,!y.isPhone&&_&&(0,C.jsx)(u().GC,{scrollerStore:Z().Z}),(0,C.jsx)(n(632775).vo,{scrollerStore:Z().Z}),(0,C.jsx)(n(83003).g,{blockStore:t}),B&&O&&(0,C.jsx)(n(605385).R,{}),(0,C.jsx)(n(451191).g4,{blockStore:t}),c&&(0,C.jsx)(X,{store:t,error:s}),l&&!f&&!(c&&s)&&(0,C.jsx)(n(312578).Z,{legacySize:W,style:j.spinner})]}),y.isPhone&&_&&(0,C.jsx)(u().GC,{scrollerStore:Z().Z}),!y.isPhone&&_&&(0,C.jsx)(u().vK,{scrollerKey:"Page"}),(0,C.jsx)(H().Z,{isVisible:!l,store:t})]})})),X=r.memo((function(e){let{store:t,error:s}=e;const{pageVisitStore:l,presenceStore:c,currentLoadingContainerStore:u}=(0,i().VK)((()=>{const{pageVisitStore:e,presenceStore:t,currentLoadingContainerStore:n}=B().default.state;return{pageVisitStore:e,presenceStore:t,currentLoadingContainerStore:n}}),[]),f=(0,o().O7)(),{WindowSizeStore:g,device:h}=f,m=(0,i().VK)((()=>g.state.height),[g]),[v,S]=(0,i().VK)((()=>{const e=(0,V().$3)(f),r=Math.max(n(191586).zL,e),o=e+(0,V().vJ)(f),i=(0,p().Ks)(t)&&!t.isFullWidth()?r:o,a=h.isMobile&&n(543842).Z.state.open?m:0;return[i,(0,T().EA)(f,d()._4(f)+a)]}),[h.isMobile,m,f,t]),y=(0,i().VK)((()=>F().default.isSidePeekOpen()||F().default.isSidePeekClosingStore.state),[]),I=(0,n(147861).xU)(),_=(0,a().yK)((()=>({pageViewBlockStyle:y?{width:v,position:"absolute",overflowX:"hidden",left:0}:ee})),[y,v]),k=(0,i().VK)((()=>{var e;return new Set(null===(e=n(63317).Z.get(t.getSpaceId()))||void 0===e?void 0:e.map((e=>e.pageId)))}),[t]),x=(0,i().VK)((()=>{if(!f.currentUser.isLoggedIn())return!1;const e=u&&!u.state.endOfResultsReached,r=t.isDefined()&&!t.canRead(),o=!b().default.state.online&&h.isElectron&&n(749826).default.checkGate({gateName:"download_for_offline"})&&!n(991007)._(t.id)&&!k.has(t.id);return e&&s||r||o}),[f.currentUser,u,t,h.isElectron,s,k]),R=(0,i().VK)((()=>!1===(null==u?void 0:u.state.endOfResultsReached)),[u]),M=(0,i().VK)((()=>t.canRead()&&t.isDefined()),[t]);return(0,r.useEffect)((()=>{if(x){const e=s||new Error("Page loading error");n(680146).rn(e,{from:"Frame.PageContainerContent",type:"pageLoadingError",data:{pageId:t.id,miscDataToConvertToString:{isLoading:R,canRead:M}}})}}),[x,R,M,s,t.id]),x?(0,C.jsx)(w,{}):(0,C.jsxs)(r.Fragment,{children:[I?(0,C.jsx)(n(243903).K,{}):null,(0,C.jsx)(T().ZP,{context:n(311562).S.Frame,style:_.pageViewBlockStyle,store:t,paddingBottom:S,disabled:!1}),(0,C.jsx)(n(665444).Z,{pageVisitStore:l,presenceStore:c,isPeekView:!1})]})})),ee={};function te(e){const{children:t}=e,n=(0,a().yK)((()=>({mobileTopbarPlaceholder:{minHeight:s().g5,display:"flex",flexShrink:0}})),[]);return(0,C.jsx)("div",{style:n.mobileTopbarPlaceholder,children:t})}},243126:(e,t,n)=>{n.d(t,{F:()=>a});n(667294);var r=()=>n(142735),o=()=>n(745096),i=n(785893);function a(e){const{render:t,...n}=e,a=(0,o().Z)(n);return(0,i.jsx)(i.Fragment,{children:(0,r().VK)((()=>t(a)),[t,a])})}},745096:(e,t,n)=>{n.d(t,{Z:()=>W});n(821057),n(267602),n(653476),n(470928),n(749411);var r=n.n(n(467266)),o=n(667294),i=()=>n(504008),a=()=>n(492788),s=()=>n(219727),l=()=>n(142735),c=()=>n(926724),d=()=>n(156642),u=()=>n(565630),p=()=>n(741633),f=()=>n(217465),g=()=>n(81954),h=()=>n(680146),m=()=>n(720866),v=()=>n(513670),S=()=>n(839002),b=()=>n(342792),y=()=>n(696459),C=()=>n(418216),I=()=>n(128178),_=()=>n(853686),w=()=>n(401411),k=()=>n(143346),x=()=>n(203927),T=()=>n(824462);var R=()=>n(423402),M=()=>n(600785),A=()=>n(148976),P=()=>n(111599),E=()=>n(275200),j=()=>n(391995),O=()=>n(113501),V=()=>n(32969),L=()=>n(658096),B=()=>n(876822),K=()=>n(804217),D=()=>n(749826),Z=()=>n(688789),F=()=>n(601952),U=()=>n(842918),N=()=>n(822851);let H=!1;function W(e){return function(e){!function(e){const{pageStore:t,store:n}=e,{initialRequestCompleted:r,error:i}=(0,l().VK)((()=>({initialRequestCompleted:n.state.initialRequestCompleted,error:n.state.error})),[n]);(0,o.useEffect)((()=>{if(r&&!i)return O().Z.trackPage(t),()=>{O().Z.untrackPage(t)}}),[r,i,t])}(e);const{isCollectionInPage:t,updateIsCollectionInPage:n}=function(){const e=(0,s().O7)(),[t,n]=(0,o.useState)(!1),r=(0,o.useCallback)((n=>{var r;const{page:o,recordMap:i,inMemoryRecordCache:a}=n;if(t)return!0;const s=null===(r=a.getRecord({pointer:{table:"block",id:o.id,spaceId:o.spaceId},userId:e.currentUser.id}))||void 0===r?void 0:r.value;if(s)for(const e of i.getByTable("block")){var l,c,d;if(("collection_view"===(null===(l=e.value)||void 0===l||null===(l=l.value)||void 0===l?void 0:l.type)||"collection_view_page"===(null===(c=e.value)||void 0===c||null===(c=c.value)||void 0===c?void 0:c.type))&&s.parent_id!==(null===(d=e.value)||void 0===d||null===(d=d.value)||void 0===d?void 0:d.collection_id))return!0}return!1}),[e,t]);return{isCollectionInPage:t,updateIsCollectionInPage:(0,o.useCallback)((e=>{n(r(e))}),[r])}}(),r=(0,o.useRef)(null);(function(e){const{store:t,pageStore:n}=e,r=(0,s().O7)(),{loading:c,endOfResultsReached:d,initialRequestCompleted:u,error:g}=(0,l().VK)((()=>({loading:t.state.loading,endOfResultsReached:t.state.endOfResultsReached,initialRequestCompleted:t.state.initialRequestCompleted,error:t.state.error})),[t]),h=z(e),v=function(e){const{initialChunkSize:t,pageStore:n}=e,r=(0,s().O7)(),i=(0,s().Fy)(),a=J(e),l=q(e),c=z(e);return(0,o.useCallback)((async()=>{const e={page:{id:n.id,spaceId:n.getSpaceId()},limit:t,cursor:{stack:[]},verticalColumns:i.isMobile};try{return{firstPageChunkResult:await a({request:e,mode:"inMemoryOnly",isFirstChunk:!0})}}catch(g){}const o=function(e){const{pageId:t}=e,n=window.__serverSidePrefetchData;if(n&&(delete window.__serverSidePrefetchData,n.pageId===t)){const e=f().RecordMapWithRole.create(n.recordMap);return{source:"server",cursors:n.cursors,recordMap:e}}}({pageId:n.id});if(o)return{firstPageChunkResult:o};const s=Y(e),d=s?r.prefetchCache.getPrefetchStatus(s):void 0,u=Boolean(r.defaultRecordCache.persistedRecordCache)&&"success"!==d,h=new AbortController,m=new AbortController,v=[...u?[a({request:e,mode:i.isAndroid?"inMemoryAndDiskCache":"inMemoryAndDiskCacheWithInexactPreload",isFirstChunk:!0,abortSignal:h.signal})]:[],l({request:e,headers:(0,p().Bb)({recordId:n.id,spaceId:n.getSpaceId()}),abortSignal:m.signal})];c.concurrentlyWithAsyncRequests();const S=await Promise.any(v);return"local"===S.source?m.abort():"remote"===S.source||"remoteV2"===S.source||"server"===S.source?h.abort():(0,y().t1)(S),{firstPageChunkResult:S}}),[c,i.isMobile,i.isAndroid,r.defaultRecordCache.persistedRecordCache,r.prefetchCache,t,a,l,n])}(e),b=function(e){const{pageStore:t,incrementChunkSize:n}=e,r=(0,s().Fy)(),i=J(e),a=q(e),l=z(e);return(0,o.useCallback)((async e=>{const{firstPageChunkResult:o}=e,s=e=>(G(e)?e.cursors:[e.cursor]).filter((e=>e.stack.length>0));let c=s(o);for(;c.length>0;){c=(await S().qd(c,10,(async e=>{const s={page:{id:t.id,spaceId:t.getSpaceId()},limit:n,cursor:e,verticalColumns:r.isMobile};let c;try{c="local"===o.source?await i({request:s,mode:"inMemoryAndDiskCache",isFirstChunk:!1}):await a({request:s,headers:(0,p().Bb)({cellId:"cellId"in e?e.cellId:void 0})})}catch(g){c=G(o)?{source:"remoteV2",cursors:[],recordMap:f().RecordMapWithRole.create({})}:{source:o.source,cursor:{stack:[]},recordMap:f().RecordMapWithRole.create({})}}return l.afterEachChunk(c),c}))).flatMap((e=>s(e)))}}),[l,r.isMobile,n,i,a,t])}(e);if(c||d||u&&g)return;async function I(){let e;t.setState({...t.state,loading:!0}),U().Z.markRequestFirstChunkStart(),F().default.state.initialRenderCompleted||C().setSubMetric({name:"render_end_to_await_page_chunk_start",startTime:e=>{var t;return null===(t=e.render_start_to_render_end)||void 0===t?void 0:t.endTime},endTime:performance.now()});try{e=(await v()).firstPageChunkResult}catch(g){return void k(g)}if(!F().default.state.initialRenderCompleted){C().setSubMetric({name:"await_page_chunk_start_to_await_page_chunk_end",startTime:e=>{var t;return null===(t=e.render_end_to_await_page_chunk_start)||void 0===t?void 0:t.endTime},endTime:performance.now()});const t=r.prefetchCache;C().updateMetricData({page_chunk_source:e.source,page_chunk_prefetch:"server"===e.source?{type:"hit-server"}:t.getPrefetchAnalytic(`loadCachedPageChunk(${n.id})`)})}U().Z.markRequestFirstChunkEnd(e.source),_(),D().default.checkGate({gateName:"load_page_flush"})?await a().default.flush():await a().default.afterNextFlush(),h.afterEachChunk(e);const o=b({firstPageChunkResult:e});try{await o}catch(g){return void k(g)}w(),h.afterAllChunks()}function _(){t.setState({...t.state,initialRequestCompleted:!0})}function w(){t.setState({initialRequestCompleted:!0,ready:!0,loading:!1,endOfResultsReached:!0,error:void 0})}function k(e){t.setState({ready:!0,initialRequestCompleted:!0,loading:!1,endOfResultsReached:!1,error:(0,m().t)(e)})}i().Z.withListenerIgnored((()=>{I()}))})({...e,updateIsCollectionInPage:n,scrollerRef:r}),function(e){const{store:t,scrollToBlockIds:n,onReady:r,onDone:i,pageStore:s}=e;(0,o.useEffect)((()=>{let e;const o=v().IH((()=>{n&&r&&(e=async function(e,t){e&&await x().Nz(t,e)}(n,s))})),l=v().IH((()=>{r&&a().default.afterNextFlush((()=>{a().default.afterNextFlush((async()=>{if(e){const t=performance.now();await(0,S().aM)(e,5e3),F().default.state.initialRenderCompleted||C().updateMetricData({scroll_to_blocks_wait_time:performance.now()-t})}r()}))}))})),c=v().IH((()=>{null==i||i()})),d=()=>{t.state.loading&&o(),t.state.ready&&l(),(t.state.endOfResultsReached||t.state.error)&&c()};return t.addListener(d),()=>{t.removeListener(d)}}),[i,r,s,n,t])}(e),function(e){const{store:t}=e,n=(0,l().VK)((()=>t.state.error),[t]),r=(0,l().VK)((()=>K().default.state.online),[]),i=(0,u().D9)(r),a=void 0!==i&&(r&&!i);(0,o.useEffect)((()=>{a&&n&&t.reset()}),[a,t,n])}(e),function(){const e=(0,s().O7)(),t=(0,l().VK)((()=>{var e;return null===(e=B().default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.id}),[]),n=(0,l().VK)((()=>B().default.state.currentUserRootStore),[]),r=(0,l().VK)((()=>K().default.state.online),[]),i=(0,u().D9)(r),a=void 0!==i&&(r&&!i);(0,o.useEffect)((()=>{async function r(){const{route:r}=e.RouterStore.state,o=await w().XB({environment:e,request:{...r,type:"block-space",blockId:t,spaceId:"spaceId"in r?r.spaceId:void 0,slug:"slug"in r?r.slug:void 0,spaceDomain:"spaceDomain"in r?r.spaceDomain:void 0,requestedOnPublicDomain:"requestedOnPublicDomain"in r?r.requestedOnPublicDomain:void 0,isBot:!1}});if("failed"===o.type)return;const i=o.data;if(L().default.setState({publicPageData:i}),i.spaceId&&n){const e=n.getSpaceViewStores().find((e=>e.getSpaceId()===i.spaceId));e&&B().default.setState({...B().default.state,currentSpaceStore:e.getSpaceStore(),currentSpaceViewStore:e})}}a&&t&&r()}),[a,e,t,n])}();const{store:c}=e;return{...(0,l().VK)((()=>({ready:c.state.ready,error:c.state.error,initialRequestCompleted:c.state.initialRequestCompleted,endOfResultsReached:c.state.endOfResultsReached})),[c]),isCollectionInPage:t,scrollerRef:r}}({...e,store:(0,l().qz)(e.store,N().Z)})}function q(e){const{pageStore:t}=e,n=(0,s().O7)();return(0,o.useCallback)((async e=>{const{request:r,headers:o,abortSignal:i}=e,a=P().e9(t),s=await P().HI({environment:n,request:{...r,...a?{omitExistingRecordVersions:a}:{}},abortSignal:i,prefetchCacheKey:Y(r),headers:o});if(null!=i&&i.aborted)throw new Error("Abort signal received");if("success"===s.type){const e=f().RecordMapWithRole.create(s.data.recordMap),t=s.data;return"cursors"in t?{recordMap:e,cursors:t.cursors,source:"remoteV2"}:{recordMap:e,cursor:t.cursor,source:"remote"}}throw h().rn(s.error,{from:"useLoadRemotePageChunk",type:"pageLoadingError",data:{pageId:t.id,miscDataToConvertToString:{offline:s.offline,status:s.status,body:s.body}}}),new Error("No successful load result found.")}),[n,t])}function J(e){const{pageStore:t}=e,n=(0,s().O7)();return(0,o.useCallback)((async e=>{const{request:r,mode:o,isFirstChunk:i,abortSignal:a}=e,s=await j().A.measure("localLoadPageChunk",r.page.id,(()=>P().fV({mode:o,environment:n,request:r,isFirstChunk:i,abortSignal:a})));if(null!=a&&a.aborted)throw new Error("Abort signal received");const l=f().RecordMapWithRole.create(s.recordMap);return k().fL({environment:n,inMemoryRecordCache:t.inMemoryRecordCache,recordMap:l,debugSource:"PageLoadingContainer.performLocalLoadPageChunk"}),{source:"local",cursor:s.cursor,recordMap:l}}),[n,t])}function z(e){const{pageStore:t,store:n,scrollToDiscussionId:r,scrollerRef:i,scrollToPosition:l,scrollToBlockIds:u,updateIsCollectionInPage:p,pageVisitStore:f,disableSideEffects:g}=e,h=(0,s().O7)(),m=(0,o.useCallback)((()=>{g||(D().default.checkGate({gateName:"fetch_backlinks_after_page_load"})||$({environment:h,blockPointer:t.pointer}),_().Ri(h,{blockStore:t,pageVisitStore:f,incremental:!1}).catch((()=>{})))}),[g,h,t,f]),S=(0,o.useCallback)((e=>{if(g)return;const o=G(e)?e.cursors:[e.cursor];var s,c;0===(s=o).length||1===s.length&&(!(c=s[0])||0===c.stack.length)||a().default.afterNextFlush((()=>{if(n.state.ready)return;const e=!r||(t=r,Boolean((0,M()._)({discussionId:t})));var t;const o=!0===function(e){const{scrollerRef:t,scrollToPosition:n}=e;if(null===t.current)return;const r=(0,E().VW)(t.current);return!r||!v().hj(n)||n<=r.scrollHeight-r.clientHeight}({scrollerRef:i,scrollToPosition:l})&&function(e){return!e||V().C.findSelectablesFromIds(e).length===e.length}(u)&&e;o&&n.setState({...n.state,ready:!0})})),p({page:{id:t.id,spaceId:t.getSpaceId()},recordMap:e.recordMap,inMemoryRecordCache:t.inMemoryRecordCache}),h.currentUser.isLoggedIn()&&(Z().default.addFromRecordMapWithRole(e.recordMap),Z().default.isEmpty()||R().dY({environment:h})),I().O({rootStore:t,cursors:o})}),[g,h,t,u,r,l,i,n,p]),b=(0,o.useCallback)((()=>{if(!g&&(D().default.checkGate({gateName:"fetch_backlinks_after_page_load"})&&"personal_home_page"!==t.getType()&&$({environment:h,blockPointer:t.pointer}),h.currentUser.isLoggedIn())){const e=t.getFormat(),n=t.getType();(0,A().K6)()&&n&&(0,d().dM)(n)&&((null==e?void 0:e.app_config_uri)===c().NB||(null==e?void 0:e.app_config_uri)===c().Aw)&&async function(e,t){await T().callApi({eventName:"resyncJiraCollection",environment:e,data:{pagePointer:t}})}(h,t.pointer)}}),[g,h,t]);return(0,o.useMemo)((()=>({concurrentlyWithAsyncRequests:m,afterEachChunk:S,afterAllChunks:b})),[m,S,b])}async function $(e){const{blockPointer:t,environment:n}=e;n.LocalBacklinkStore.initializeBacklinks({block:{id:t.id,spaceId:(0,g().J)(t.spaceId)},currentUserId:n.currentUser.id,environment:n});try{await n.LocalBacklinkStore.awaitLoaded(t.id)}catch(r){}}function G(e){return"remoteV2"===e.source||"server"===e.source}function Y(e){if(function(e){return!e.cursor||0===e.cursor.stack.length}(e))return`loadCachedPageChunk(${e.page.id})`;{const t=(0,b().Ul)(r()(e.cursor));return`loadCachedPageChunk(${e.page.id})-${t}`}}(0,n(947115).exposeDebugValue)("toggleLogLocalPageLoadFailures",(()=>{H=!H,console.info(H?"Local page load error logging enabled":"Local page load error logging disabled")}))},755020:(e,t,n)=>{n.d(t,{p:()=>r});const r=35},632599:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(667294),o=()=>n(846550),i=()=>n(729201),a=()=>n(312578),s=n(785893);function l(e){let{loadingMessage:t}=e;const n=(0,o().Fg)(),l=(0,i().Z)(!0,400);return(0,s.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:l&&(0,s.jsxs)(r.Fragment,{children:[(0,s.jsx)(a().Z,{}),t&&(0,s.jsx)("div",{style:{marginLeft:8,color:n.text.secondary},children:t})]})})}},755589:(e,t,n)=>{n.d(t,{m:()=>d});n(667294);var r=()=>n(968061),o=()=>n(788860),i=()=>n(231077),a=()=>n(1910),s=()=>n(45909),l=n(785893);const c=(0,o().vU)({menu:{defaultMessage:"Menu",id:"topbar.appMenuButton.title"}});function d(){const e=(0,o().YB)();return(0,l.jsx)(a().Z,{style:{position:"absolute",top:"10px",left:"14px",width:24,height:24,zIndex:1e5,...(0,s().X)({noDrag:!0})},iconStyle:{width:16,height:16},isDarkIconColor:!0,onClick:()=>{i().openAppMenu()},icon:r().h,ariaLabel:e.formatMessage(c.menu)})}},665444:(e,t,n)=>{n.d(t,{Z:()=>j});n(670560),n(122556),n(582845),n(250570),n(533019),n(721473),n(788208),n(22624),n(267602),n(916054),n(653476),n(470928),n(749411),n(241792);var r=n(667294),o=()=>n(219727),i=()=>n(142735),a=()=>n(846550),s=()=>n(989478),l=()=>n(788860),c=()=>n(568017),d=()=>n(513670),u=()=>n(696459),p=()=>n(958783),f=()=>n(871953),g=()=>n(273444),h=()=>n(758018),m=()=>n(84080),v=()=>n(852465),S=()=>n(333264),b=()=>n(472753),y=()=>n(32969),C=()=>n(876822),I=()=>n(687647),_=()=>n(475335),w=()=>n(826955),k=()=>n(965903),x=()=>n(127519),T=()=>n(595478),R=()=>n(981583),M=n(785893);const A={position:"absolute",top:0,left:0,zIndex:n(492522).eu},P=20,E=22;const j=function(e){const{pageVisitStore:t,presenceStore:a}=e,s=(0,o().O7)(),l=(0,r.useRef)(null),c=(0,n(466970).E)("block_attribution"),u=e.isPeekView?n(855249).Z:n(72041).Z,f=(0,i().VK)((()=>u.state.elementRef??{current:null}),[u]),m=(0,S().j)(f),T=(0,S().$0)(f),R=(0,i().SI)((()=>{if(!c)return[];const e=m-5e3,t=e+T+5e3,n=function(e){var t;const{blockAttributionEnabled:n,containerEl:r,presenceStore:o,environment:i}=e,{currentUserSettingsStore:a}=C().default.state,s=(null==a||null===(t=a.getSettings())||void 0===t?void 0:t.show_block_attribution)??!0;if(!n||!s)return[];const{rootStore:l}=o.state;if(!r||!l||"editing"!==x().default.state.mode||p().default.state.open||I().Z.state.open||_().default.state.isKeyboardMode)return[];let c;for(const d of k().default.state.stores){const e=d.findRecordStoreUIAncestor((e=>e instanceof w().G&&e.isTransclusionType())).ancestor;e&&e instanceof w().G&&"transclusion_container"===e.getType()&&(c=e)}const u=y().C.getMembersByDOMOrder({filter:()=>!0}),f=r.getBoundingClientRect(),g=v().MI({blockStore:l,transclusionReferences:"omit",childPages:"omit"}).flatMap((e=>{const t=[];if(e.isInsideTransclusion()||e.isTransclusionType()){let n=e;if("transclusion_reference"===e.getType()){const t=e.getTransclusionReferenceTargetStore();t&&(n=t)}"transclusion_reference"!==e.getType()&&"transclusion_container"!==e.getType()||(n!==c?t.push(V(e,u,f,i)):v().MI({blockStore:n,transclusionReferences:"omit",childPages:"omit"}).map((e=>t.push(V(e,u,f,i)))))}else t.push(V(e,u,f,i));return t})).filter((e=>!d().o8(e)));g.sort(((e,t)=>e.top-t.top));const h=g.filter(((e,t,n)=>0===t||e.actor.id!==n[t-1].actor.id));if(1===h.length)return[];return h}({blockAttributionEnabled:c,containerEl:l.current,presenceStore:a,environment:s});n.sort(((e,t)=>e.top-t.top));const r=[];return n.every((n=>n.top>=e&&n.top<=t&&(r.push(n),!0))),r}),[c,a,m,T,s],{debugName:"attributionAvatarStore",useDeepEqual:!0});(0,i().Kw)(R),(0,r.useEffect)((()=>{let e;const t=d().Ds(R.recompute,100);return c&&(window.addEventListener("resize",t),e=setInterval(t,1e3)),()=>{window.removeEventListener("resize",t),clearInterval(e)}}),[R,c]);const P=(0,i().Kw)(R),E=[...(0,i().VK)((()=>function(e){const{attributionAvatars:t,pageVisitStore:n,presenceStore:r,environment:o,containerEl:i}=e,a=new Set(t.map((e=>{let{blockStore:t}=e;return t.id}))),{rootStore:s}=r.state;if(!s)return[];if(!i)return[];const l=o.currentUser.id,c=(0,h().AQ)({pageVisitStore:n,presenceStore:r,blockStore:s,trustedEmailDomains:void 0}).filter((e=>e.userId!==l&&(0,h().MR)(o,e)));if(c.length>0){const e={},t=y().C.getMembersByDOMOrder({filter:()=>!0}),n=i.getBoundingClientRect();return d().oA(c.map((r=>{const i=(0,h().EB)(r),l=null==r?void 0:r.blockPath;let c;if(l&&l.length>0?c=function(e,t,n){const r=new Map(t.map(((e,t)=>[e,t])));let o,i;for(const a of e){const e=a.props.store,t=r.get(e.id);if(void 0!==t&&((void 0===i||t<i)&&n.uiContains(e)&&a.props.shouldShowHalo&&(o=a,i=t),0===i))return o}return o}(t,l,s):i&&(c=O(t,i,s)),!c)return;const d=c.props.store.id,u=a.has(d);e.hasOwnProperty(d)||(e[d]=0),e[d]++;const p=c.getNode();if(!(p&&p instanceof Element))return;const f=p.getBoundingClientRect();if(f){let t,i;if(c.props.store.isFirstBlockInCalloutV2Block()){const e=c.props.store.getRecordStoreUIParent(),n=e&&e.findRecordStoreUIAncestor((e=>e instanceof w().G)).ancestor;n instanceof w().G&&(t=n,i=t?b().R.getRect(t):void 0)}const a=(0,g().WA)({marginItemType:"presence_avatars",nodeRect:i??f,containerRect:n,attributionsIncludeFoundBlock:u,avatarCount:e[d],store:t??c.props.store,environment:o}),s=(0,g().qA)({marginItemType:"presence_avatars",nodeRect:i??f,containerRect:n,environment:o,store:t??c.props.store,selectable:c});return{type:"presence",userId:r.userId,left:s,top:a,blockType:c.props.store.getType()}}})))}return[]}({attributionAvatars:P,pageVisitStore:t,presenceStore:a,environment:s,containerEl:l.current})),[s,t,a,P],{debugName:"presenceAvatars",useDeepEqual:!0}),...P];return(0,M.jsx)("div",{className:"notion-presence-container",style:A,ref:l,children:(0,M.jsx)(n(372353).Z,{render:()=>E.map((t=>{const{left:r,top:o}=t,i={avatarWrapperAnimation:{translateX:r,translateY:o,scale:1,opacity:1},avatarEnterExitAnimation:{scale:.7,opacity:0}},a={...i.avatarWrapperAnimation,...i.avatarEnterExitAnimation};return(0,M.jsx)(n(628370).Z,{initial:a,exit:a,animate:i.avatarWrapperAnimation,children:(0,M.jsx)(L,{avatar:t,presenceStore:e.presenceStore})},"attribution"===t.type?t.uniqueId:t.userId)}))})})};function O(e,t,n){return e.find((e=>{const r=e.props.store;return Boolean(r&&r.id===t&&n.uiContains(r)&&e.props.shouldShowHalo)}))}function V(e,t,n,r){const o=e.getLastEditedByPointer();if(!o||o.table!==s().KJ)return;const i=e.getType();if("collection_view"===i||"collection_view_page"===i||"divider"===i||"table"===i||"table_row"===i||"tab"===i)return;if(e.isEmptyEditableBlock())return;const a=O(t,e.id,e);if(!a)return;const l=a.getNode();if(!(l&&l instanceof Element))return;const c=l.getBoundingClientRect();if(!c)return;const d=(0,g().WA)({marginItemType:"attribution_avatars",store:e,containerRect:n,nodeRect:c,environment:r}),u=(0,g().qA)({marginItemType:"attribution_avatars",store:e,containerRect:n,nodeRect:c,environment:r,selectable:a});return{type:"attribution",actor:o,left:u,top:d,uniqueId:u>0?`${String(e.key)}+left`:String(e.key),blockStore:e}}function L(e){const{device:t}=(0,o().O7)(),{isMobile:n}=t,{avatar:r}=e,d=(0,l().YB)(),p="presence"===r.type&&r.blockType?r.blockType:void 0,g=n?P:E,h=(0,a().yK)((e=>{const t=p&&["breadcrumb","bulleted_list","numbered_list","toggle"].includes(p),o={width:g,height:g,borderRadius:g};return{uiUserAvatarStyles:{...o},avatarInnerOutline:{...o,outlineStyle:"solid",outlineColor:e.UIUserAvatarInnerOutline,outlineWidth:.5,outlineOffset:-.5},avatarBorder:"presence"===r.type?{...o,outlineStyle:"solid",outlineColor:(0,c().iY)(r.userId,e),outlineWidth:1.5,outlineOffset:-.5}:{},avatarWrapper:{...o,position:"absolute",top:0,left:n&&t?3:0,outlineStyle:"solid",outlineWidth:.5,outlineOffset:1,outlineColor:e.UIUserAvatarOuterOutline},initialColor:"presence"===r.type?{color:(0,c().iY)(r.userId,e)}:{}}}),[n,p,g,r]),v=(0,i().VK)((()=>{const{rootStore:t}=e.presenceStore.state;if(t){if("presence"===r.type){const e=w().U6.createChildStore(t,{table:s().KJ,id:r.userId});return e.isDefined()?{type:"presence",userStore:e}:null}if("attribution"===r.type){const e=(0,f().nc)({parentStore:t,pointer:r.actor});return e.isDefined()?{type:"attribution",userId:e.id,name:e.getDisplayName(d),blockStore:r.blockStore}:null}(0,u().t1)(r)}return null}),[r,d,e.presenceStore]);return v?(0,m().Z)((e=>"presence"===v.type?(0,M.jsx)("div",{style:h.avatarWrapper,...e,children:(0,M.jsx)("div",{style:h.avatarBorder,children:(0,M.jsx)(R().Z,{iconStyle:h.avatarInnerOutline,hasTooltip:!0,userStore:v.userStore,style:h.uiUserAvatarStyles,size:g,avatarShouldShowShadow:!0,initialOverrideStyle:h.initialColor})})}):"attribution"===v.type?(0,M.jsx)("div",{style:h.avatarWrapper,...e,children:(0,M.jsx)(T().Z,{userId:v.userId,name:v.name,style:h.uiUserAvatarStyles,size:E,tooltipStore:v.blockStore})}):void(0,u().t1)(v))):null}},986286:(e,t,n)=>{n.d(t,{FW:()=>l,Pe:()=>d,Re:()=>u,Rs:()=>p,YW:()=>s,ht:()=>f,lM:()=>c,rM:()=>g,vK:()=>a,yY:()=>h});var r=()=>n(677559);const o={JiraSyncInfoPopup:new(r().Ss)("JiraSyncInfoPopup",(async()=>await Promise.all([n.e(52774),n.e(57023)]).then(n.bind(n,453110)))),ImproveJiraSyncPopup:new(r().Ss)("ImproveJiraSyncPopup",(async()=>await Promise.all([n.e(52774),n.e(81263)]).then(n.bind(n,931329)))),JiraDCAuthModal:new(r().Ss)("JiraDCAuthModal",(async()=>await n.e(40205).then(n.bind(n,253458)))),ExternalImportAndSyncIndicator:new(r().Ss)("ExternalImportAndSyncIndicator",(async()=>await n.e(47433).then(n.bind(n,635604)))),JiraSyncedAllProjectsTooltip:new(r().Ss)("JiraSyncedAllProjectsTooltip",(async()=>await Promise.all([n.e(62743),n.e(75433)]).then(n.bind(n,205959)))),JiraSyncedAllIssuesTooltip:new(r().Ss)("JiraSyncedAllIssuesTooltip",(async()=>await Promise.all([n.e(62743),n.e(75433)]).then(n.bind(n,205959)))),JiraSyncedDatabaseViewsAndFiltersTooltip:new(r().Ss)("JiraSyncedDatabaseViewsAndFiltersTooltip",(async()=>await Promise.all([n.e(62743),n.e(75433)]).then(n.bind(n,205959)))),JiraSyncSourceTooltip:new(r().Ss)("JiraSyncSourceTooltip",(async()=>await Promise.all([n.e(62743),n.e(75433)]).then(n.bind(n,205959)))),JiraSyncedSettingsToSetupProjectsAndIssuesTooltip:new(r().Ss)("JiraSyncedSettingsToSetupProjectsAndIssuesTooltip",(async()=>await Promise.all([n.e(62743),n.e(75433)]).then(n.bind(n,205959))))},i={JiraSyncTeamSpaceModal:new(r().Ss)("JiraSyncTeamSpaceModal",(async()=>Promise.all([n.e(62743),n.e(94568)]).then(n.bind(n,860619))))},a=(0,r().kF)(i.JiraSyncTeamSpaceModal,(e=>e.default)),s=(0,r().kF)(o.JiraSyncedAllProjectsTooltip,(e=>e.JiraSyncedAllProjectsTooltip)),l=(0,r().kF)(o.JiraDCAuthModal,(e=>e.default)),c=(0,r().kF)(o.JiraSyncedAllIssuesTooltip,(e=>e.JiraSyncedAllIssuesTooltip)),d=(0,r().kF)(o.JiraSyncedDatabaseViewsAndFiltersTooltip,(e=>e.JiraSyncedDatabaseViewsAndFiltersTooltip)),u=(0,r().kF)(o.JiraSyncedSettingsToSetupProjectsAndIssuesTooltip,(e=>e.JiraSyncedSettingsToSetupProjectsAndIssuesTooltip)),p=(0,r().kF)(o.JiraSyncSourceTooltip,(e=>e.JiraSyncSourceTooltip)),f=(0,r().kF)(o.JiraSyncInfoPopup,(e=>e.JiraSyncInfoPopup)),g=(0,r().kF)(o.ImproveJiraSyncPopup,(e=>e.ImproveJiraSyncPopup)),h=(0,r().kF)(o.ExternalImportAndSyncIndicator,(e=>e.ExternalImportAndSyncIndicator));(0,n(827282).CZ)("jira",{default:{loader:()=>n.e(7061).then(n.bind(n,207061)),size:20},small:{loader:()=>n.e(7061).then(n.bind(n,207061)),size:16},mini:{loader:()=>n.e(7061).then(n.bind(n,207061)),size:14},large:{loader:()=>n.e(7061).then(n.bind(n,207061)),size:24}})},83003:(e,t,n)=>{n.d(t,{g:()=>i});var r=()=>n(677559);const o=new(r().Ss)("ScrollableSitesBannerContainer",(async()=>await Promise.all([n.e(62743),n.e(5242),n.e(4014),n.e(82472),n.e(48364),n.e(65670)]).then(n.bind(n,898270)))),i=(0,r().kF)(o,(e=>e.ScrollableSitesBannerContainer))},474532:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(667294);const o=function(e,t){if(e.ref&&t.ref){const n=t.ref;t.ref=t=>{e.ref(t),n(t)}}return r.cloneElement(e,t)}},761936:(e,t,n)=>{n.d(t,{L:()=>d});var r=()=>n(642240),o=()=>n(338530);const i={ko:()=>n.e(60692).then(n.bind(n,299435)),es:()=>n.e(20883).then(n.bind(n,960142)),de:()=>n.e(83224).then(n.bind(n,299606)),fr:()=>n.e(85038).then(n.bind(n,604240)),pt:()=>n.e(72138).then(n.bind(n,515748)),zh:()=>n.e(17835).then(n.bind(n,240169)),ja:()=>n.e(96377).then(n.bind(n,770488)),da:()=>n.e(57677).then(n.bind(n,317410)),fi:()=>n.e(66970).then(n.bind(n,266265)),nb:()=>n.e(93031).then(n.bind(n,189761)),nl:()=>n.e(62579).then(n.bind(n,360701)),sv:()=>n.e(60382).then(n.bind(n,575660))};let a=!1,s=!1;async function l(e){for(const[n,o]of Object.entries(e.emojiLocaleKeywords)){var t;r().Q4[n]={...r().Q4[n],keywords:[...o,...(null===(t=r().Q4[n])||void 0===t?void 0:t.keywords)||[]]}}await o().Z.waitUntilLoaded(),o().Z.update((t=>{let{emojiByName:n,...r}=t;return{...r,emojiByName:{...n,...e.emojiByName}}}))}async function c(){if(a)return;const[e]=n(146947).locale.split("-");e in i&&(await l(await i[e]()),a=!0)}const d=(0,n(924665).Z)((async()=>{await async function(){s||(await l(await n.e(83552).then(n.bind(n,716373))),s=!0)}(),await c()}))},273444:(e,t,n)=>{n.d(t,{WA:()=>b,Yx:()=>C,qA:()=>y});var r=()=>n(494488),o=()=>n(156642),i=()=>n(696459),a=()=>n(755020),s=()=>n(887430),l=()=>n(954452),c=()=>n(644235),d=()=>n(14585),u=()=>n(881688),p=()=>n(645805),f=()=>n(965903);const g=n(203890).Xx-2,h=2,m=4,v=15,S=24;function b(e){const{marginItemType:t,store:n,nodeRect:r,containerRect:a,environment:s}=e,l=function(e){const{store:t,marginItemType:n}=e,r=t.getType(),i=t.getNavigableAncestorFormat(),a=Boolean(i.page_small_text);return r===o().Ti.divider?-6:r===o().Ti.header?a?7:10:r===o().Ti.subHeader?a?4:6:r===o().Ti.collectionView?8:r===o().Ti.table?"presence_avatars"===n?5.5:14:3}({store:n,marginItemType:t}),c=function(e,t,n){if(t.isTransclusionType())return e+5;if(w(t,n))return e+1;if("ai_block"===t.getType())return t.hasContent()?e+9:e+15;if(t.getType()===o().Ti.button)return e+3;return e}(l,n,s),u=((null==r?void 0:r.top)??0)-((null==a?void 0:a.top)??0)+c,p=s.device.isMobile?20:22,f=(d().eD-p)/2;if("selectable_hover_menu_overlay_item"===t)return u;if("attribution_avatars"===t)return u-f;if("presence_avatars"===t){const{attributionsIncludeFoundBlock:t,avatarCount:n}=e;return u+f+(n+(t?1:0)-1)*v}(0,i().t1)(t)}function y(e){const{marginItemType:t,store:n,environment:r,nodeRect:o,containerRect:a,selectable:l}=e,d=r.device.isMobile?20:22,u=(0,c().Ae)()+h,{maxLeft:p,isBoundedByParentContainer:f}=function(e){const{environment:t,selectable:n,nodeRect:r,store:o}=e,i=(null==r?void 0:r.left)??0;if(o.isCollectionView()||o.isInsideCollection()){const e=(0,s().fm)(o);if(e&&"table"!==e.getViewType())return{maxLeft:i,isBoundedByParentContainer:!1}}const a=null==n?void 0:n.getScrollerContext();let l=0;if(a&&a.horizontalScroller){const e=a.horizontalScroller.getClientRect();l=(null==e?void 0:e.left)??0}const c=Math.max(l,i),d=w(o,t)&&k(o)?g:0,u=c-d<=l,p=u?l:c;return{maxLeft:p,isBoundedByParentContainer:u}}({environment:r,selectable:l,nodeRect:o,store:n}),v=_(r,u+S,n,f),b=p-((null==a?void 0:a.left)??0);if("drag_handle"===t)return b-_(r,u,n,f);if("plus_button"===t)return b-v;if("attribution_avatars"===t){return b-I({marginItemType:t,store:n,originalMenuOffset:v,environment:r,isBoundedByParentContainer:f})-m-d}if("presence_avatars"===t){return b-I({marginItemType:t,originalMenuOffset:v,environment:r,store:n,isBoundedByParentContainer:f})-m-d}(0,i().t1)(t)}function C(e){const{marginItemType:t,nodeRect:n,containerRect:r}=e;if("add_comment"===t)return((null==r?void 0:r.right)??0)-((null==n?void 0:n.right)??0);(0,i().t1)(t)}function I(e){var t;const{marginItemType:n,originalMenuOffset:r,environment:o,store:a,isBoundedByParentContainer:s}=e,l=p().default.state,c=l.isOpen&&(null===(t=l.currentStore)||void 0===t?void 0:t.id)===a.id;switch(n){case"attribution_avatars":return c?r:_(o,0,a,s);case"presence_avatars":return c&&l.currentStore&&!p().default.isRightMarginCommentHovered()?r:_(o,0,a,s);case"drag_handle":case"plus_button":return r;default:(0,i().t1)(n)}}function _(e,t,n,i){if(!i&&k(n)&&w(n,e))return t+g;if(n.isQuoteBlockChild()){return t+3+14+r().ZD.paddingLeft}if(n.isTransclusionType()||"ai_block"===n.getType())return t+4;if(n.isDirectChildOfAiBlock())return t+13;if(n.isInsideTransclusion())return t+5;if(n.getType()===o().Ti.table){const r=u().Xp({simpleTableStore:n,environment:e,includeInline:!(0,l().fg)(e,n)}),o=n.isImmediateColumnChild();return 0!==r||o?t+8:t}const s=n.getNumberOfDuplicateBlocksAncestors();return s>0?t+a().p*s:t}function w(e,t){if(e.getType()===o().Ti.page){const r=(0,s().fm)(e);var n;if(r)return(e.isInsideCollection()||Boolean(null==r||null===(n=r.collectionStore())||void 0===n?void 0:n.isPageTreeCollection()))&&(0,s().fk)({environment:t,collectionContextStore:r})}return!1}function k(e){var t;const n=f().default.state.stores.includes(e);return p().default.state.isOpen&&(null===(t=p().default.state.currentStore)||void 0===t?void 0:t.id)===e.id||n}},110372:(e,t,n)=>{n.d(t,{YF:()=>c,bl:()=>l,gF:()=>a,i6:()=>d,lZ:()=>s});var r=()=>n(954949),o=()=>n(594546),i=()=>n(749826);function a(e,t){const n=(0,r().Si)(t.callout_key);n&&(t.placement_key=(0,r().pU)(n)),(0,o().j)({environment:e,event:{eventName:"callout_show",eventProperties:t}}),i().default.logEvent("callout_show",t.callout_key)}function s(e,t){const n=(0,r().Si)(t.callout_key);n&&(t.placement_key=(0,r().pU)(n)),(0,o().j)({environment:e,event:{eventName:"callout_click",eventProperties:t}}),i().default.logEvent("callout_click",t.callout_key)}function l(e,t){const n=(0,r().Si)(t.callout_key);n&&(t.placement_key=(0,r().pU)(n)),(0,o().j)({environment:e,event:{eventName:"callout_dismiss",eventProperties:t}}),i().default.logEvent("callout_dismiss",t.callout_key)}function c(e,t){const{eligible_callouts:n,required_arg_timeout:r,required_args_run_duration:i,eligibility_timeouts:a,blocklist:s}=t;(0,o().j)({environment:e,event:{eventName:"callout_coordinator_resolved",eventProperties:{eligible_callouts:n,required_arg_timeout:r,required_args_run_duration:i,eligibility_timeouts:a,blocklist:s}}})}function d(e,t){(0,o().j)({environment:e,event:{eventName:"callout_feature_interaction",eventProperties:t}})}},451191:(e,t,n)=>{n.d(t,{bv:()=>s,g4:()=>i});var r=()=>n(677559);const o=new(r().Ss)("MaybeMarketplaceReviewNudge",(()=>n.e(83658).then(n.bind(n,297138)))),i=(0,r().kF)(o,(e=>e.MaybeMarketplaceReviewNudge)),a=new(r().Ss)("MarketplaceReviewNudge",(()=>Promise.all([n.e(55470),n.e(76317)]).then(n.bind(n,173885)))),s=(0,r().kF)(a,(e=>e.MarketplaceReviewNudge))},355435:(e,t,n)=>{n.d(t,{E7:()=>i,Ju:()=>o,cb:()=>s,iv:()=>a,tL:()=>r});const r=32,o=202,i=1e3,a="Want to add a metric? Look for 'src/client/performanceToolbar/config.ts' in notion-next.",s="To disable the toolbar entirely, go to the 'Experiments' panel and look for the 'performance_debugging_toolbar' flag."},420406:(e,t,n)=>{n.d(t,{$:()=>r});function r(e,t){t.route.name;return!1}},341643:(e,t,n)=>{n.d(t,{DW:()=>S,IG:()=>h,J4:()=>v,hZ:()=>m,q9:()=>g,qq:()=>b,s4:()=>f});var r=n(667294),o=()=>n(219727),i=()=>n(142735),a=()=>n(801812),s=()=>n(677559),l=()=>n(690664),c=()=>n(105649),d=()=>n(291335),u=()=>n(590972),p=()=>n(420406);const f=new(s().Ss)("PerformanceToolbar",(()=>Promise.all([n.e(62743),n.e(5242),n.e(4014),n.e(20919),n.e(93843),n.e(66283),n.e(54194)]).then(n.bind(n,674207)))),g=(0,s().kF)(f,(e=>e.PerformanceToolbar)),h=(0,s().kF)(f,(e=>e.PerformanceToolbarSettings));function m(){const e=(0,o().O7)();return(0,i().VK)((()=>(0,p().$)(e,e.RouterStore.state)),[e])}function v(){const e=(0,o().O7)(),t=y("PerformanceToolbarStore"),n=y("isPerformanceToolbarVisible");return(0,i().VK)((()=>!(!t||!n)&&n(e,e.RouterStore.state,t.state)),[n,e,t])}function S(){const e=y("PerformanceToolbarStore");return(0,i().VK)((()=>!!e&&e.state.isPerformanceToolbarMounted),[e])}function b(){const e=(0,o().O7)(),t=y("createPerformanceToolbarMouseListeners"),n=y("PerformanceToolbarStore"),{sidebarExpanded:a,sidebarWidth:s,secondarySidebarExpanded:p,secondarySidebarWidth:f,updateSidebarExpanded:g,updateSidebarWidth:h}=(0,i().VK)((()=>({sidebarExpanded:d().sidebarExpandedStore.state,sidebarWidth:d().sidebarWidthStore.state,secondarySidebarExpanded:c().default.isOpen(),secondarySidebarWidth:l().default.getWidth(),updateSidebarExpanded:u().default.state.expanded,updateSidebarWidth:u().default.state.width})),[]);return(0,r.useEffect)((()=>{if(n&&t)return t(e,(e=>n.update((t=>({...t,isMouseNearPerformanceToolbar:e})))),a,s,p,f,g,h)}),[t,e,n,a,s,p,f,g,h])}function y(e){const t=m(),[{value:n}]=(0,a().r5)((()=>t?f.load().then((t=>t[e])):Promise.resolve(void 0)),[e,t]);return n}},585742:(e,t,n)=>{n.d(t,{W:()=>o});class r extends(()=>n(442))().Z{}const o=new r},151165:(e,t,n)=>{n.d(t,{Z:()=>o});class r extends(()=>n(263184))().default{}const o=new r},605385:(e,t,n)=>{n.d(t,{R:()=>i});var r=()=>n(677559);const o={ScrollableBlockLimitBanner:new(r().Ss)("ScrollableBlockLimitBanner",(async()=>Promise.all([n.e(62743),n.e(97622)]).then(n.bind(n,235629))))},i=(0,r().kF)(o.ScrollableBlockLimitBanner,(e=>e.default))},243903:(e,t,n)=>{n.d(t,{K:()=>i});var r=()=>n(677559);const o={UncollectibleExperienceOverlay:new(r().Ss)("UncollectibleExperienceOverlay",(async()=>n.e(42785).then(n.bind(n,290293))))},i=(0,r().kF)(o.UncollectibleExperienceOverlay,(e=>e.UncollectibleExperienceOverlay))},147861:(e,t,n)=>{n.d(t,{Ko:()=>S,q7:()=>b,xU:()=>v});n(667294);var r=()=>n(219727),o=()=>n(142735),i=()=>n(724592),a=()=>n(359071),s=()=>n(788860),l=()=>n(454393),c=()=>n(603692),d=()=>n(594546),u=()=>n(345918),p=()=>n(151165),f=()=>n(293760),g=()=>n(548812),h=()=>n(93543),m=n(785893);function v(){const e=(0,o().VK)((()=>{const{editsBlocked:e}=f().default.state;return e??!1}),[]),t=(0,r().O7)();return(0,o().VK)((()=>(0,g().Un)(t)),[t])&&e}function S(){return(0,o().VK)((()=>{var e;const t=p().Z.state;return null==t||null===(e=t.data)||void 0===e?void 0:e.invoiceHostedUrl}),[])}function b(){const e=(0,r().O7)(),t=S(),n=(0,o().VK)((()=>{var e;const t=p().Z.state;return(null==t||null===(e=t.data)||void 0===e?void 0:e.overdueInvoiceCount)??0}),[]),d=(0,o().VK)((()=>(0,u().Fn)(e)),[e]),f=function(e,t){if(e)return t>1?(0,m.jsx)(s()._H,{defaultMessage:"Access to Notion is limited because we couldn’t process {overdueInvoiceCount, plural, one {your last payment} other {{overdueInvoiceCount} payments}}.",id:"uncollectibleExperience.uncollectibleExperienceOverlay.multipleInvoicesMessageContent",values:{overdueInvoiceCount:t}}):(0,m.jsx)(s()._H,{defaultMessage:"Access to Notion is limited because we couldn’t process your last payment",id:"uncollectibleExperience.uncollectibleExperienceOverlay.messageContent"});return(0,m.jsx)(s()._H,{id:"uncollectibleExperience.uncollectibleExperienceOverlay.memberMessageContent",defaultMessage:"Access to Notion is limited"})}(d,n),g=function(e){if(e)return;return(0,m.jsx)(s()._H,{id:"uncollectibleExperience.uncollectibleExperienceOverlay.memberSecondaryLabel",defaultMessage:"Contact a workspace owner to update your workspace’s payment method"})}(d),v=function(e,t,n){if(t){const r=(0,h().o)(n);return n=>{r&&(y(t,e),r(n))}}return n=>{y(t,e),l().r$()}}(e,d,t),b=function(e){if(e)return(0,m.jsx)(s()._H,{defaultMessage:"View unpaid invoice",id:"uncollectibleExperience.uncollectibleExperienceOverlay.buttonLabel"});return(0,m.jsx)(s()._H,{id:"uncollectibleExperience.uncollectibleExperienceOverlay.memberButtonLabel",defaultMessage:"View workspace owner"})}(d),C=function(e){if(e)return(0,m.jsx)(c().y,{iconGroup:i().R,variantName:"default",colorName:"primary"});return(0,m.jsx)(c().y,{iconGroup:a().s,variantName:"default",colorName:"primary"})}(d);return{clickAction:v,ctaMessage:b,primaryMessage:f,secondaryMessage:g,ctaIcon:C,tooltipBodyMessage:d?b:g,isWorkspaceOwner:d,overdueInvoiceCount:n}}function y(e,t){(0,d().j)({environment:t,event:{eventName:"subscription_uncollectible_blurred_experience_cta_clicked",eventProperties:{is_workspace_owner:e}}})}},280210:(e,t,n)=>{n.d(t,{U_:()=>I,f6:()=>w,ii:()=>_});n(821057),n(409045),n(453627),n(994774),n(995194),n(520522),n(200082),n(379976),n(724224),n(761121),n(637133),n(241792);var r=n.n(n(402568)),o=()=>n(513670),i=()=>n(326966),a=()=>n(431595),s=()=>n(24945),l=()=>n(255933);const c={version:8,notion_version:0,variant:2},d={version:8,notion_version:1,variant:2},u=0,p=1,f=6,g=8,h=10,m=Date.UTC(2024,0,1);function v(e,t){if(e)return t[u]=255,t[u+1]=240|15&t[u+1],t;const n=Math.floor(((new Date).getTime()-m)/i().A0);if(n>=4096||n<0)throw new Error("Invalid offsetInDays.");return t[u]=n>>4,t[u+1]=n<<4&240|15&t[u+1],t}function S(e,t){if(e>=2**36||e<0)throw new Error("Invalid spaceShortId.");t[p]=240&t[p]|e/2**32&15;for(let n=0;n<4;n++)t[p+1+n]=e/2**(24-8*n)&255;return t}function b(e,t){const n=e?1:0;return t[f]=c.version<<4&240|c.notion_version<<1&14|1&n,t[g]=c.variant<<6&192|63&t[g],t}function y(e,t){if("block"===e)return t[h]=(0,s().ym)(e)|63&t[h],t;const n=(0,s().ym)(e);return t[h]=n>>8&127,t[h+1]=255&n,t}function C(e,t){const n=(0,s().Nq)(e);return t[h]=127&n|128&t[h],t}function I(e,t,n,r){const o=new Uint8Array(16),i=globalThis.crypto.getRandomValues(o);return n!==l().bx&&v(e,i),S(t,i),b(r,i),y(n,i),T(i)}function _(e,t,n,r){return I(e,t,n,r)}function w(e,t,n){return k(e,t,n)}function k(e,t,n){const i=r()(n),l=o().yo(i,2).map((e=>parseInt(e.join(""),16)));if((0,s().LV)(t)){if(void 0===e)throw new(a().D3)(`Deterministic ID for '${t}' must specify a space short id`)}else if(void 0!==e)throw new(a().D3)(`Deterministic ID for '${t}' should not provide a space short id`);const c=new Uint8Array(l);return e&&S(e,c),C(t,c),function(e){e[f]=240&d.version<<4|14&d.notion_version<<1|1&e[f],e[g]=192&d.variant<<6|63&e[g]}(c),T(c)}const x=new Array(256).fill(0).map(((e,t)=>t.toString(16).padStart(2,"0")));function T(e){let t=0;return x[e[t++]]+x[e[t++]]+x[e[t++]]+x[e[t++]]+"-"+x[e[t++]]+x[e[t++]]+"-"+x[e[t++]]+x[e[t++]]+"-"+x[e[t++]]+x[e[t++]]+"-"+x[e[t++]]+x[e[t++]]+x[e[t++]]+x[e[t++]]+x[e[t++]]+x[e[t++]]}},924665:(e,t,n)=>{function r(e){let t,n,r;return async function(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t?(r=i,n||(n=t.then((()=>(n=void 0,t=e(...r),t))),n)):(t=e(...i),t)}}n.d(t,{Z:()=>r})},724592:(e,t,n)=>{n.d(t,{R:()=>r});const r=(0,n(827282).CZ)("arrowUpRightSquare",{default:{loader:()=>n.e(37795).then(n.bind(n,237795))},small:{loader:()=>n.e(23099).then(n.bind(n,423099))},mini:{loader:()=>n.e(16954).then(n.bind(n,516954))},large:{loader:()=>n.e(54753).then(n.bind(n,954753))}})},359071:(e,t,n)=>{n.d(t,{s:()=>r});const r=(0,n(827282).CZ)("personCircle",{default:{loader:()=>n.e(68260).then(n.bind(n,68260))},small:{loader:()=>n.e(25958).then(n.bind(n,225958))},mini:{loader:()=>n.e(36734).then(n.bind(n,336734))},large:{loader:()=>n.e(13183).then(n.bind(n,813183))}})},165940:(e,t,n)=>{n.d(t,{R:()=>o});n(667294);var r=n(785893);const o=(0,n(827282).IU)("chevronUpRounded",{viewBox:"0 0 15 9",svg:(0,r.jsx)("path",{d:"M1.258 6.5L7.203.422a.946.946 0 01.719-.32.99.99 0 01.726.32L14.586 6.5a.89.89 0 01.266.648c0 .524-.407.93-.922.93a.921.921 0 01-.672-.281L7.93 2.32 2.586 7.797a.926.926 0 01-.672.281.915.915 0 01-.922-.93c0-.25.094-.476.266-.648z"})})},4686:(e,t,n)=>{n.d(t,{C:()=>o});n(667294);var r=n(785893);const o=(0,n(827282).IU)("tabletTopbarStarFilled",{viewBox:"0 0 20 20",svg:(0,r.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M3.90039 18.7676C3.69531 18.6152 3.56934 18.4102 3.52246 18.1523C3.48145 17.9004 3.51953 17.6016 3.63672 17.2559L5.44727 11.8857L0.833008 8.57227C0.53418 8.36133 0.326172 8.1416 0.208984 7.91309C0.0917969 7.67871 0.0742188 7.43848 0.15625 7.19238C0.238281 6.95215 0.393555 6.77344 0.62207 6.65625C0.850586 6.5332 1.14941 6.47461 1.51855 6.48047L7.16992 6.51562L8.89258 1.11914C9.00391 0.767578 9.15039 0.500977 9.33203 0.319336C9.51953 0.131836 9.73926 0.0380859 9.99121 0.0380859C10.249 0.0380859 10.4688 0.131836 10.6504 0.319336C10.8379 0.500977 10.9873 0.767578 11.0986 1.11914L12.8213 6.51562L18.4727 6.48047C18.8418 6.47461 19.1406 6.5332 19.3691 6.65625C19.5977 6.77344 19.7529 6.95215 19.835 7.19238C19.917 7.43848 19.8994 7.67871 19.7822 7.91309C19.665 8.1416 19.457 8.36133 19.1582 8.57227L14.5439 11.8857L16.3545 17.2559C16.4717 17.6016 16.5068 17.9004 16.46 18.1523C16.4189 18.4102 16.2959 18.6152 16.0908 18.7676C15.8857 18.9316 15.6543 18.9902 15.3965 18.9434C15.1387 18.8965 14.8633 18.7676 14.5703 18.5566L9.99121 15.1904L5.4209 18.5566C5.12793 18.7676 4.85254 18.8965 4.59473 18.9434C4.33691 18.9902 4.10547 18.9316 3.90039 18.7676Z",fill:"#f6c050"})})})},46581:(e,t,n)=>{n.d(t,{U:()=>a});var r=n.n(n(389539)),o=()=>n(280210),i=()=>n(956057);class a{constructor(e){this.environmentName=void 0,this.mainShortId=void 0,this.getSettings=void 0,this.isServerOriginated=void 0,this.mapSpaceIdToShortId=void 0,this.idCreatorLogger=void 0,this.environmentName=e.environmentName,this.mainShortId=n(631871).jF[this.environmentName],this.getSettings=e.getSettings,this.isServerOriginated=e.isServerOriginated,this.mapSpaceIdToShortId=e.mapSpaceIdToShortId,this.idCreatorLogger=e.idCreatorLogger??(()=>{})}idInMain(e){const{enableTestDateOffset:t,enableIdSchema:r}=this.getSettings();return r&&e!==n(363777).uK?(this.idCreatorLogger(void 0,e,t?"id_schema_test":"id_schema"),(0,o().ii)(t,this.mainShortId,e,this.isServerOriginated)):this.legacyId(e,"disabled")}pointerInMain(e){return{table:e,id:this.idInMain(e)}}async idWithSpaceId(e,t){const{enableTestDateOffset:n,enableIdSchema:i}=this.getSettings();if(!i||"space"===t)return this.legacyId(t,"disabled");const a=this.mapSpaceIdToShortId(e),s=r().types.isPromise(a)?await a:a;return s?(this.idCreatorLogger(e,t,n?"id_schema_test":"id_schema"),(0,o().U_)(n,s,t,this.isServerOriginated)):this.legacyId(t,"missing_short_id")}async pointerWithSpaceId(e,t){return{table:t,spaceId:e,id:await this.idWithSpaceId(e,t)}}idWithSpaceShortId(e,t){const{enableTestDateOffset:n,enableIdSchema:r}=this.getSettings();return r&&"space"!==t?(this.idCreatorLogger(void 0,t,n?"id_schema_test":"id_schema"),(0,o().U_)(n,e,t,this.isServerOriginated)):this.legacyId(t,"disabled")}legacyId(e,t){return this.idCreatorLogger(void 0,e,t),i().Il()}async deterministicIdWithSpaceId(e,t,n){const{enableTestDateOffset:a,enableIdSchema:s}=this.getSettings();if(!s)return this.idCreatorLogger(e,t,"disabled"),i().Ul(n);const l=this.mapSpaceIdToShortId(e),c=r().types.isPromise(l)?await l:l;return c?(this.idCreatorLogger(e,t,a?"id_schema_test":"id_schema"),(0,o().f6)(c,t,n)):(this.idCreatorLogger(e,t,"missing_short_id"),i().Ul(n))}deterministicIdWithSpaceShortId(e,t,n){const{enableTestDateOffset:r,enableIdSchema:a}=this.getSettings();return a?(this.idCreatorLogger(void 0,t,r?"id_schema_test":"id_schema"),(0,o().f6)(e,t,n)):(this.idCreatorLogger(void 0,t,"disabled"),i().Ul(n))}async getSpaceIdCreator(e){if(!e)return new s(e,this.idCreatorLogger);const{enableIdSchema:t}=this.getSettings();if(!t)return new s(e,this.idCreatorLogger);const n=this.mapSpaceIdToShortId(e),o=r().types.isPromise(n)?await n:n;return this.getSpaceShortIdCreator(e,o)}getSpaceIdCreatorSync(e){if(!e)return new s(e,this.idCreatorLogger);const{enableIdSchema:t}=this.getSettings();if(!t)return new s(e,this.idCreatorLogger);const n=this.mapSpaceIdToShortId(e),o=r().types.isPromise(n)?void 0:n;return this.getSpaceShortIdCreator(e,o)}getSpaceShortIdCreator(e,t){const{enableIdSchema:n}=this.getSettings();return n&&t?new l(e,this,t):new s(e,this.idCreatorLogger)}async getSpaceIdCreatorFromModel(e){return e.getShortIdStr()?this.getSpaceShortIdCreator(e.id,Number(e.getShortIdStr())):await this.getSpaceIdCreator(e.id)}}class s{constructor(e,t){this.spaceId=void 0,this.idCreatorLogger=void 0,this.spaceId=e,this.idCreatorLogger=t}idInSavedSpace(e){return this.idCreatorLogger(void 0,e,"disabled"),i().Il()}idInMain(e){return this.idCreatorLogger(void 0,e,"disabled"),i().Il()}deterministicIdInSavedSpace(e,t){return this.idCreatorLogger(void 0,e,"disabled"),i().Ul(t)}pointerInMain(e){return{id:this.idInMain(e),table:e}}pointerInSavedSpace(e){return{id:this.idInSavedSpace(e),table:e,spaceId:this.spaceId}}getSpaceId(){return this.spaceId}}class l{constructor(e,t,n){this.spaceId=void 0,this.idCreator=void 0,this.spaceShortId=void 0,this.spaceId=e,this.idCreator=t,this.spaceShortId=n}idInSavedSpace(e){return this.idCreator.idWithSpaceShortId(this.spaceShortId,e)}idInMain(e){return this.idCreator.idInMain(e)}deterministicIdInSavedSpace(e,t){return this.idCreator.deterministicIdWithSpaceShortId(this.spaceShortId,e,t)}pointerInMain(e){return{id:this.idInMain(e),table:e}}pointerInSavedSpace(e){return{id:this.idInSavedSpace(e),table:e,spaceId:this.spaceId}}getSpaceId(){return this.spaceId}}},641077:(e,t,n)=>{n.d(t,{A:()=>a,Z:()=>i});n(267602),n(653476);var r=()=>n(568017),o=()=>n(659278);function i(e){const t=e.name,n=e.email;let r;if(t||n){if(t){const e=t.split(" ").filter((e=>e.length>0));r=e.length>1?String(o().p4(e[0])[0])+String(o().p4(e[e.length-1])[0]):String(o().p4(t)[0])+String(o().p4(t)[1])}else r=null==n?void 0:n.substring(0,2);return r=r?r.toUpperCase():void 0,r}}function a(e,t){return e&&(0,r().iY)(e,t)}},88829:(e,t,n)=>{n.d(t,{Z:()=>r});const r={appCursorListener:{sidebar:1,secondarySidebar:2,editor:3,aiChat:3,marketplace:3,teamHome:3}}},455018:(e,t,n)=>{n.d(t,{V:()=>o,z:()=>r});const r=.5,o=.3},971095:(e,t,n)=>{n.d(t,{A:()=>r});const r=(0,n(830742).LS)("importEvernote")}}]);