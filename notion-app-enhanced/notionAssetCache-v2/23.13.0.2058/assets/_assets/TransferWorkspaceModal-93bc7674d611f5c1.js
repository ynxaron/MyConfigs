"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[34114],{353210:(e,t,r)=>{r.r(t),r.d(t,{TransferWorkspaceModal:()=>O});r(267602),r(470928);var a=r(667294),n=()=>r(219727),i=()=>r(142735),s=()=>r(846550),o=()=>r(506347),l=()=>r(446866),c=()=>r(788860),d=()=>r(696459),u=()=>r(636133),m=()=>r(824462),p=()=>r(308186),g=()=>r(224597),f=()=>r(718959),h=()=>r(385875),x=()=>r(876822),y=()=>r(206352),S=()=>r(708518),C=()=>r(989478),v=()=>r(707513),k=()=>r(826955),b=()=>r(265640),j=()=>r(666414),w=()=>r(291198),I=()=>r(906651),U=()=>r(67961),_=()=>r(374844),M=()=>r(768745),T=()=>r(456681),W=()=>r(175771),V=()=>r(521913),E=()=>r(239730),B=()=>r(148126),L=()=>r(1910),N=()=>r(108714),q=()=>r(981583),K=r(785893);const D={inputLabel:{fontWeight:v().Ue.medium,fontSize:14,letterSpacing:-.15,textAlign:"left",width:"100%"},input:{width:"100%",marginTop:8}};function Z(e){const t=(0,s().yK)((e=>({avatarContainer:{display:"flex",justifyContent:"center",alignItems:"center"},avatarContainerBadged:{position:"relative"},avatarBadgeIcon:{position:"absolute",left:26,top:26,height:20,width:20},exclamationMarkIcon:{width:"100%",height:18,fill:e.accentColors.yellow[500],stroke:e.modalBackground,strokeWidth:3,paintOrder:"stroke fill",overflow:"visible"},arrowRightIcon:{width:16,height:16,marginLeft:12,marginRight:12,fill:e.mediumIconColor},questionMarkIcon:{width:20,height:20,fill:e.mediumIconColor},userIconPlaceholder:{width:40,height:40,borderRadius:"50%",backgroundColor:e.modalBackground,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:E().v.avatarBoxShadow.light,boxSizing:"content-box",border:`1px solid ${e.lightDividerColor}`},headerStyle:{textAlign:"center"},titleContainer:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:15},title:{fontSize:16,fontWeight:v().Ue.medium},description:{marginTop:5,fontWeight:v().Ue.regular,textAlign:"center",fontSize:13,lineHeight:"16px",letterSpacing:-.08}})),[]);return(0,K.jsxs)("div",{style:t.headerStyle,children:[(0,K.jsxs)("div",{style:t.avatarContainer,children:[(0,K.jsxs)("div",{style:t.avatarContainerBadged,children:[(0,K.jsx)(q().Z,{size:40,userValue:e.fromUserValue,avatarShouldShowShadow:!0}),(0,K.jsx)("div",{style:t.avatarBadgeIcon,children:(0,V().t)(t.exclamationMarkIcon)})]}),(0,_().n)(t.arrowRightIcon),e.targetUserValue?(0,K.jsx)(q().Z,{size:40,userValue:e.targetUserValue,avatarShouldShowShadow:!0}):(0,K.jsx)("div",{style:t.userIconPlaceholder,children:(0,W().L)(t.questionMarkIcon)})]}),(0,K.jsxs)("div",{style:t.titleContainer,children:[(0,K.jsx)(U().Z,{style:t.title,children:(0,K.jsx)(c()._H,{defaultMessage:"Change workspace account",id:"transferWorkspaceModal.changeAccount.title"})}),(0,K.jsx)(N().Z,{href:(0,B().UY)("guides.domainManagement"),children:(0,K.jsx)(L().Z,{icon:T().m})})]}),(0,K.jsx)(U().Z,{isSecondaryColor:!0,isMultiline:!0,style:t.description,children:e.description})]})}function H(){const e=(0,n().O7)(),t=(0,s().yK)((e=>({backIconStyle:{width:12,height:12,marginRight:7,fill:e.mediumIconColor},secondaryButton:{marginTop:12,justifyContent:"center",fontWeight:v().Ue.medium,color:e.lightTextColor,letterSpacing:"-0.154px"}})),[]),r=(0,i().VK)((()=>x().default.state.currentUserRootStore),[]),l=(0,i().VK)((()=>x().default.state.currentUserSettingsStore),[]),d=(0,i().VK)((()=>r&&l),[r,l]),u=(0,a.useCallback)((async()=>{r&&l&&await g().L5({environment:e,userRootStore:r,userSettingsStore:l,skipPendingTransferWorkspaces:!0,pageVisitSource:o().tY.BackForward})}),[e,r,l]);return(0,K.jsxs)(b().D,{style:t.secondaryButton,onClick:u,disabled:!d,children:[(0,M().Y)(t.backIconStyle),(0,K.jsx)(c()._H,{id:"transferWorkspaceModal.backToMyWorkspacesButton.label",defaultMessage:"Back to my workspaces"})]})}function z(e){const{currentSpaceStore:t,currentUserValue:r,targetUserId:n,handleConfirm:o,handleBack:l,intl:d}=e,u=(0,s().yK)((e=>({primaryButton:{width:"100%",marginBottom:"10px",marginTop:32},secondaryButton:{color:e.mediumTextColor,fontWeight:v().Ue.medium},emailFieldCaption:{textAlign:"center",marginTop:"5px",lineHeight:"15px",fontSize:12,color:e.lightTextColor},inputLabel:D.inputLabel,verificationCodeInputContainer:{marginTop:13},input:D.input,inputContainer:{marginTop:27,width:"100%"},dividerContainer:{marginTop:29},dividerInner:{borderBottomColor:e.regularDividerColor}})),[]),m=(0,i().VK)((()=>t.getName()),[t]),p=(0,i().VK)((()=>k().U6.createChildStore(t,{id:n,table:C().KJ}).getValue()),[t,n]),g=(0,i().VK)((()=>k().U6.createChildStore(t,{id:n,table:C().KJ}).getEmail()),[t,n]),[f,h]=(0,a.useState)(""),x=(0,a.useCallback)((e=>{h(e.currentTarget.value)}),[h]),y=(0,a.useCallback)((async()=>{await o(f)}),[f,o]);return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(Z,{fromUserValue:r,targetUserValue:p,description:(0,K.jsx)(c()._H,{defaultMessage:"Transfer {currentSpaceName} to the Notion account associated with {targetUserEmail}.",id:"transferWorkspaceModal.confirmTransfer.description",values:{currentSpaceName:m,targetUserEmail:g}})}),(0,K.jsx)(j().Z,{size:"100%",innerStyle:u.dividerInner,style:u.dividerContainer}),(0,K.jsxs)("div",{style:u.inputContainer,children:[(0,K.jsx)(U().Z,{style:u.inputLabel,children:(0,K.jsx)(c()._H,{id:"transferWorkspaceModal.confirmTransfer.emailLabel",defaultMessage:"Email"})}),(0,K.jsx)(w().Z,{style:u.input,value:g,disabled:!0}),(0,K.jsx)(U().Z,{isSecondaryColor:!0,style:u.emailFieldCaption,children:(0,K.jsx)(c()._H,{id:"transferWorkspaceModal.confirmTransfer.emailDescription",defaultMessage:"We just sent you a temporary verification code.{br}Please check your inbox.",values:{br:(0,K.jsx)("br",{})}})}),(0,K.jsx)("div",{style:u.verificationCodeInputContainer,children:(0,K.jsx)(U().Z,{style:u.inputLabel,children:(0,K.jsx)(c()._H,{id:"transferWorkspaceModal.confirmTransfer.passcodeLabel",defaultMessage:"Verification code"})})})]}),(0,K.jsx)(w().Z,{style:u.input,value:f,onChange:x,onSubmit:y,placeholder:d.formatMessage({id:"transferWorkspaceModal.confirmTransfer.passcodePlaceholder",defaultMessage:"Enter verification code..."}),focusInitial:!0}),(0,K.jsx)(I().Z,{style:u.primaryButton,onClick:y,children:(0,K.jsx)(c()._H,{defaultMessage:"Confirm transfer",id:"transferWorkspaceModal.confirmTransfer.confirmButton"})}),(0,K.jsx)(b().D,{style:u.secondaryButton,onClick:l,children:(0,K.jsx)(c()._H,{defaultMessage:"Cancel",id:"transferWorkspaceModal.confirmTransfer.cancelButton"})})]})}var R=()=>r(255933);function A(e){const{currentUserValue:t,currentSpaceStore:r,workspaceTransfer:n,intl:o,handleSubmitEmail:l}=e,d=(0,s().yK)((e=>({primaryButton:{width:"100%",marginTop:32},emailLabel:D.inputLabel,emailInput:D.input,dividerContainer:{marginTop:29},dividerInner:{borderBottomColor:e.regularDividerColor},emphasizedDescriptionText:{fontWeight:v().Ue.medium},inputContainer:{marginTop:27,width:"100%"}})),[]),u=(0,i().VK)((()=>t.email),[t]),m=(0,i().VK)((()=>null==r?void 0:r.getName()),[r]),p=(0,i().VK)((()=>{if("requested_from_space_id"in n)return k().H2.createChildStore(r,{table:R().bx,id:n.requested_from_space_id}).getName()}),[r,n]),[g,f]=(0,a.useState)(""),h=(0,a.useCallback)((()=>{l(g)}),[g,l]);return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(Z,{fromUserValue:t,description:p?(0,K.jsx)(c()._H,{id:"transferWorkspaceModal.transferRequested.description",defaultMessage:"{currentWorkspaceName} is associated with {currentUserEmail}. {requestingWorkspaceName} owns {currentUserEmailDomain} and requires that you switch to a personal Notion account to continue using this workspace.{br}{br}Contact {contactEmail} for assistance.",values:{br:(0,K.jsx)("br",{}),currentWorkspaceName:m,currentUserEmail:u,currentUserEmailDomain:u.split("@")[1],requestingWorkspaceName:p,contactEmail:(0,K.jsx)("span",{style:d.emphasizedDescriptionText,children:n.contact_email})}}):(0,K.jsx)(c()._H,{id:"transferWorkspaceModal.transferRequested.description.noEntityName",defaultMessage:"{currentWorkspaceName} is associated with {currentUserEmail}. The domain {currentUserEmailDomain} is owned by an organization and requires that you switch to a personal Notion account to continue using this workspace.{br}{br}Contact {contactEmail} for assistance.",values:{br:(0,K.jsx)("br",{}),currentWorkspaceName:m,currentUserEmail:u,currentUserEmailDomain:u.split("@")[1],contactEmail:(0,K.jsx)("span",{style:d.emphasizedDescriptionText,children:n.contact_email})}})}),(0,K.jsx)(j().Z,{size:"100%",innerStyle:d.dividerInner,style:d.dividerContainer}),(0,K.jsxs)("div",{style:d.inputContainer,children:[(0,K.jsx)(U().Z,{style:d.emailLabel,children:(0,K.jsx)(c()._H,{id:"transferWorkspaceModal.transferRequested.emailLabel",defaultMessage:"Email"})}),(0,K.jsx)(w().Z,{style:d.emailInput,value:g,onChange:e=>{f(e.currentTarget.value)},onSubmit:h,placeholder:o.formatMessage({id:"transferWorkspaceModal.transferRequested.emailPlaceholder",defaultMessage:"Personal-use, Notion account email address..."}),focusInitial:!0})]}),(0,K.jsx)(I().Z,{isLarge:!0,style:d.primaryButton,onClick:h,children:(0,K.jsx)(c()._H,{id:"transferWorkspaceModal.transferRequested.continueButton",defaultMessage:"Continue with email"})}),(0,K.jsx)(H,{})]})}function O(e){const{workspaceTransfer:t}=e,r=(0,n().O7)(),C=(0,c().YB)(),v=(0,i().VK)((()=>x().default.state.currentSpaceStore),[]),k=(0,i().VK)((()=>x().default.state.currentUserStore),[]),b=(0,i().VK)((()=>x().default.state.currentUserRootStore),[]),j=(0,i().VK)((()=>x().default.state.currentUserSettingsStore),[]),[w,I]=(0,a.useState)({type:"requested"}),U=(0,i().VK)((()=>{var e;return null===(e=(0,f().B7)(r))||void 0===e?void 0:e.getValue()}),[r]),_=(0,s().yK)((e=>({modalInnerStyle:{width:406,padding:"24px 20px 16px 20px",display:"flex",flexDirection:"column",alignItems:"center"}})),[]);if(!v||!k||!U)return null;let M;switch(w.type){case"requested":const e=async e=>{const t=await m().callApi({eventName:"sendVerifyTransferEmail",environment:r,data:{email:e}});"failed"!==t.type?I({type:"confirm",targetUserId:t.data.userId,targetUserEmailDomain:(0,l().Gd)(e)}):p().x2(t)};M=(0,K.jsx)(A,{currentUserValue:U,currentSpaceStore:v,workspaceTransfer:t,handleSubmitEmail:e,intl:C});break;case"confirm":const a=async e=>{const a=w.targetUserId,n=await m().callApi({eventName:"transferWorkspaceToUser",environment:r,data:{targetUserId:a,spaceId:v.id,transferEmailPasscode:e}});if("failed"===n.type)return p().x2(n),void I({type:"requested"});"requested_from_space_id"in t?u().s4(r,{newOwner:a,newEmailDomain:w.targetUserEmailDomain||"__UNKNOWN_EMAIL_DOMAIN__",requestingSpaceId:t.requested_from_space_id,requesting_organization_id:void 0}):u().s4(r,{newOwner:a,newEmailDomain:w.targetUserEmailDomain||"__UNKNOWN_EMAIL_DOMAIN__",requestingSpaceId:void 0,requesting_organization_id:t.requested_by_organization_id});const i=h().Z.getSpaceViewStores(r,a).find((e=>e.getSpaceId()===v.id));return i?void(await g().y3({environment:r,userRootStore:b,userSettingsStore:j,spaceViewStore:i,pageVisitSource:o().tY.SwitchSpace,navigationType:"switchingToOrLoadingSpace"})):b&&j?(await g().L5({environment:r,userRootStore:b,userSettingsStore:j,skipPendingTransferWorkspaces:!0,pageVisitSource:o().tY.SwitchSpace}),void I({type:"requested"})):void 0};M=(0,K.jsx)(z,{currentSpaceStore:v,currentUserValue:U,targetUserId:w.targetUserId,handleBack:()=>I({type:"requested"}),handleConfirm:a,intl:C});break;default:(0,d().t1)(w)}return(0,K.jsx)(y().Z,{debugName:"TransferWorkspaceModal",capture:!0,children:(0,K.jsx)(S().Z,{open:!0,innerStyle:_.modalInnerStyle,onDismiss:()=>{},render:()=>M})})}},768745:(e,t,r)=>{r.d(t,{Y:()=>n});r(667294);var a=r(785893);const n=(0,r(827282).IU)("commentReply",{viewBox:"0 0 12 12",svg:(0,a.jsx)("path",{d:"M11.2324 7.2832C11.2324 4.95117 9.66211 3.33984 7.00195 3.33984H3.32227L1.96875 3.4043L2.99414 2.53711L4.48242 1.08398C4.59961 0.972656 4.67578 0.826172 4.67578 0.632812C4.67578 0.263672 4.41797 0 4.03711 0C3.87305 0 3.69141 0.0761719 3.5625 0.199219L0.205078 3.50977C0.0703125 3.63867 0 3.81445 0 3.99609C0 4.17188 0.0703125 4.34766 0.205078 4.47656L3.5625 7.78711C3.69141 7.91016 3.87305 7.98633 4.03711 7.98633C4.41797 7.98633 4.67578 7.72266 4.67578 7.35352C4.67578 7.16016 4.59961 7.01953 4.48242 6.90234L2.99414 5.44922L1.96875 4.58789L3.32227 4.64648H7.03125C8.90625 4.64648 9.94336 5.71289 9.94336 7.23633C9.94336 8.75977 8.90625 9.87305 7.03125 9.87305H5.66016C5.27344 9.87305 4.99805 10.166 4.99805 10.5234C4.99805 10.8809 5.27344 11.1738 5.66602 11.1738H7.07812C9.69141 11.1738 11.2324 9.63281 11.2324 7.2832Z"})})}}]);