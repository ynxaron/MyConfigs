"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[23656],{588533:(e,o,t)=>{t.r(o),t.d(o,{switchFromSimpleToTabbedLayout:()=>u});t(821057),t(267602),t(470928),t(30005);var a=()=>t(792197),i=()=>t(215134),n=()=>t(766537),r=()=>t(827370),l=()=>t(543172),s=()=>t(421654),d=()=>t(269299),p=()=>t(826955),c=()=>t(455962);function u(e){const{environment:o,layoutStore:t}=e;t.isTabbedPageLayout()||d().createAndCommit({environment:o,perform:e=>{var u,w;const m=t.getRawModules();if(!m||!m.page_layout_schema)throw new Error("Invalid state: no raw modules by area");const v=`view_tab_${(0,l().ZP)()}`;let _;const y=(null===(u=t.getFormat())||void 0===u?void 0:u.previousViewsMainCollectionViewBlockPointer)||(null===(w=m.page_layout_schema.find((e=>"viewsMain"===e.type)))||void 0===w?void 0:w.collection_view_block_pointer);if(y){const a=t.getBlockChildrenPointers();if(!!!a.find((e=>r().dr.isEqual(e,y))))throw new Error("Invalid state: previous views main collection view block pointer is not a child of the layout");_=p().G.createChildStore(t,a[0]);const i=_.getCollectionViewStores().find((e=>"page"===e.getType()))||(0,c().c)({environment:o,layoutStore:t,transaction:e,collectionViewBlockStore:_,options:{viewsTabId:v}}).collectionViewStore;s().FH({stores:[i],update:{page_layout_pointer:{...t.pointer,views_main_tab_id:v}},transaction:e})}else({collectionViewBlockStore:_}=(0,c().O)({environment:o,layoutStore:t,transaction:e,options:{viewsTabId:v}}));const{moveableRawModules:I,nonMoveableFooterRawModules:b}=(0,n().wW)("page_layout_schema",m.page_layout_schema),h=[...I,...b];h.forEach((o=>{d().applyOperation({store:t,transaction:e,operation:a().CI.deleteModuleInArea({pointer:t.pointer,area:"page_layout_schema",moduleId:o.id})})})),d().applyOperation({store:t,transaction:e,operation:a().CI.setViewTabModules({pointer:t.pointer,viewId:v,modules:h})}),function(e){const{layoutStore:o,transaction:t,viewId:n}=e,r=o.getRawModules();if(!r)throw new Error("Invalid state: no raw modules by area");const s=(0,i().MI)(r,(e=>"editor"===e.type));s.forEach((e=>{let{module:i,position:n}=e;"page_layout_schema"===n.area&&d().applyOperation({store:o,transaction:t,operation:a().CI.deleteModuleInArea({pointer:o.pointer,moduleId:i.id,area:"page_layout_schema"})})}));s.find((e=>{let{module:o,position:t}=e;return"editor"===o.type&&"views_main_tab_modules"===t.area}))||d().applyOperation({store:o,transaction:t,operation:a().CI.putModuleAfter({pointer:o.pointer,area:"views_main_tab_modules",viewId:n,module:{id:(0,l().ZP)(),type:"editor"},afterId:void 0})})}({layoutStore:t,transaction:e,viewId:v}),function(e){const{layoutStore:o,transaction:t}=e,n=o.getRawModules();if(!n)throw new Error("Invalid state: no raw modules by area");const r=(0,i().MI)(n,(e=>"viewsMain"===e.type));r.forEach((e=>{let{module:i,position:n}=e;d().applyOperation({store:o,transaction:t,operation:a().CI.deleteModuleInArea({pointer:o.pointer,moduleId:i.id,..."views_main_tab_modules"===n.area?{area:n.area,viewId:n.viewId}:{area:n.area}})})}))}({layoutStore:t,transaction:e});const f={id:(0,l().ZP)(),type:"viewsMain",collection_view_block_pointer:{..._.pointer,spaceId:_.getSpaceId()}};d().applyOperation({store:t,transaction:e,operation:a().CI.putModuleAfter({pointer:t.pointer,area:"page_layout_schema",module:f,afterId:void 0})})},canUndo:!0,userAction:"viewsModuleActions.switchFromSimpletoTabbedLayout"})}}}]);