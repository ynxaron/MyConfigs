"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[49498],{688745:(e,t,o)=>{o.d(t,{D5:()=>C,Ym:()=>b,cP:()=>S});o(821057),o(267602),o(916054),o(653476),o(241792),o(667294);var n=()=>o(146947),i=()=>o(780741),l=()=>o(481529),r=()=>o(494616),a=()=>o(396136),p=()=>o(752778),c=()=>o(139978),s=()=>o(483791),d=()=>o(212360),u=()=>o(788860),m=()=>o(513670),y=()=>o(696459),f=()=>o(250303),v=()=>o(984871),I=()=>o(308186),g=()=>o(269299),_=()=>o(90065),w=()=>o(826955),T=()=>o(382474),h=o(785893);function S(e){let{transaction:t,collectionStore:o,templateId:n,instance:i,logger:u}=e;u.debug(`Creating/updating ${d().qB} record for "${n}".`);const m=o.getSpaceId(),f=i.id;if("automation"===i.type){const e={table:r().cv,id:f,spaceId:m};g().applyOperation({store:w().Mz.createChildStore(o,e),operation:l().op.set({pointer:e,path:["properties","workflow_template_instance"],args:{template_id:n}}),transaction:t})}else if("block"===i.type){const e={table:a().iU,id:f,spaceId:m};g().applyOperation({store:w().G.createChildStore(o,e),operation:l().op.set({pointer:e,path:["format","workflow_template_instance"],args:{template_id:n}}),transaction:t})}else if("collection"===i.type){const e={table:p().vF,id:f,spaceId:m};g().applyOperation({store:o,operation:l().op.set({pointer:e,path:["format","workflow_template_instance"],args:{template_id:n}}),transaction:t})}else if("collection_view"===i.type){const e={table:c().np,id:f,spaceId:m};g().applyOperation({store:w().Xr.createChildStore(o,e),operation:l().op.set({pointer:e,path:["format","workflow_template_instance"],args:{template_id:n}}),transaction:t})}else if("layout"===i.type){const e={table:s().Bh,id:f,spaceId:m};g().applyOperation({store:w().xj.createChildStore(o,e),operation:l().op.set({pointer:e,path:["format","workflow_template_instance"],args:{template_id:n}}),transaction:t})}else if("compound"===i.type){if(i.instancePointers.length<2)throw new Error(`Compound template instance ${i.id} must contain 2 or more instances`);const e=i.instancePointers.map((e=>{switch(e.type){case"automation":return{type:"automation",id:e.id};case"block":return{type:"block",id:e.id};case"collection_view":return{type:"collection_view",id:e.id};case"layout":return{type:"layout",id:e.id};case"property":return{type:"property",id:e.id}}(0,y().t1)(e)}));g().applyOperation({store:o,operation:{command:"keyedObjectListUpdate",pointer:o.pointer,path:["format","compound_workflow_template_instances"],args:{value:{template_id:n,id:i.id,instance_pointers:e}}},transaction:t})}else"property"===i.type?g().applyOperation({store:o,operation:l().op.update({pointer:o.pointer,path:["schema",i.id],args:{workflow_template_instance:{template_id:n}}}),transaction:t}):(0,y().t1)(i)}function b(e){let{environment:t,collectionStore:o,propertyId:n,compoundTemplateInstancesToDelete:l,collectionContextStore:r,from:a}=e;if(!l.every((e=>e.templateId===i()._5)))return!1;if(!(0,_().tj)())return!1;const p=(0,T().OA)({environment:t,collectionStore:o,compoundTemplateInstancesToDelete:l}),c=m().jj(p.filter((e=>"property"===e.type&&e.id!==n)).map((e=>e.id)));return k({environment:t,collectionStore:o,clickedPropertyId:n,otherPropertyIds:c,collectionContextStore:r,from:a}),!0}function C(e){let{environment:t,collectionStore:o,propertyId:n,collectionContextStore:i,from:l}=e;const r=o.getSchema(),a=Object.keys(r).filter((e=>e!==n&&((0,_().TJ)({collectionStore:o,propertyId:e})||(0,_().e_)(e))));return k({environment:t,collectionStore:o,clickedPropertyId:n,otherPropertyIds:a,collectionContextStore:i,from:l}),!0}function k(e){var t;let{environment:o,collectionStore:i,clickedPropertyId:l,otherPropertyIds:r,collectionContextStore:a,from:p}=e;const c=[l,...r],s=[{label:(0,h.jsx)(u()._H,{id:"workflowTemplateInstanceActions.deleteRequiredProperty.deleteOption",defaultMessage:"{count, plural, one {Delete {count} property} other {Delete {count} properties}}",values:{count:c.length}}),color:"red",onAccept:()=>function(e){let{environment:t,collectionStore:o,collectionContextStore:n,propertyIds:i,from:l}=e;g().createAndCommit({userAction:"workflowTemplateInstanceActions.handleDeleteAccept",environment:t,canUndo:!0,perform:e=>{const r=o.getSchema();for(const a of i){v().E2({environment:t,collectionStore:o,schema:r,property:a,transaction:e});const i=r[a];i&&f().y9({environment:t,collectionContextStore:n,property_type:i.type,from:l,property:a})}}})}({environment:o,collectionStore:i,collectionContextStore:a,propertyIds:c,from:p})}],d=i.getSchema(),m=r.map((e=>{if(e===l)return;const t=d[e];return null==t?void 0:t.name})).filter(y().$K),_=null===(t=d[l])||void 0===t?void 0:t.name,w=new Intl.ListFormat(n().locale,{style:"long",type:"conjunction"}),T=(0,h.jsx)(u()._H,{id:"workflowTemplateInstanceActions.deleteRequiredProperty.deletePropertyFromDb",defaultMessage:"{hasPropertyName, select, true {Delete {propertyName} from this database? This will also delete the following properties: {otherPropertyNames}} other {Delete this property from this database? This will also delete the following properties: {otherPropertyNames}}}",values:{hasPropertyName:Boolean(_),propertyName:_,otherPropertyNames:w.format(m)}});I().vC({message:(0,h.jsx)("span",{children:T}),showCancel:!0,keepFocus:!0,innerStyle:{width:400},items:s})}},43093:(e,t,o)=>{o.d(t,{NQ:()=>l,ZW:()=>a});o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(241792);var n=()=>o(342266),i=()=>o(382474);function l(e){let{collectionStore:t,modules:o,dependencyMap:n}=e;return p({modules:o,mapper:r(t,n)})}function r(e,t){return o=>(0,i().Zl)({collectionStore:e,sourceTemplateType:"property",sourcePrimitiveId:o,dependencyMap:t})}function a(e){const t=new Set;return p({modules:e,mapper:e=>(t.add((0,n().dO)({type:"property",id:e})),e)}),t}function p(e){let{modules:t,mapper:o}=e;const n=e=>e?e.map((e=>function(e){let{module:t,mapper:o}=e;switch(t.type){case"bottomControls":case"relationsGroup":case"cover":case"discussions":case"editor":case"expandedBacklinks":case"formQuestion":case"formSubmit":case"formTitle":case"inlinePageSections":case"placeholder":case"properties":case"transcript":case"viewsMain":return t;case"property":return{...t,propertyId:o(t.propertyId)};case"titleWithIcon":return{...t,propertyIds:t.propertyIds?t.propertyIds.map(o):void 0};case"views":return{...t,relation_pointer:t.relation_pointer?{...t.relation_pointer,property:o(t.relation_pointer.property)}:void 0}}return t}({module:e,mapper:o}))):void 0;return{page_layout_schema:n(t.page_layout_schema),page_info_layout_schema:n(t.page_info_layout_schema),form_layout_schema:n(t.form_layout_schema)}}},342266:(e,t,o)=>{o.d(t,{PB:()=>I,W3:()=>g,WK:()=>y,ZM:()=>d,Zt:()=>h,_A:()=>T,dO:()=>f,su:()=>v});o(267602),o(653476),o(470928),o(241792);var n=()=>o(513670),i=()=>o(696459),l=()=>o(281236),r=()=>o(209737);const a="content",p="item",c="items",s="optionalDefaultOn",d="/icons/document_gray.svg",u={collection_view:"View",layout:"Layout",collection:"Collection",property:"Property",compound:"Compound",block:"Block",automation:"Automation"},m=Symbol("BuilderKey"),y=f({type:"property",id:o(226413).iw});function f(e){return(0,i().lD)(`${e.type}:${e.id}`,m)}function v(e){if("explicit-undefined"!==e)return e}function I(e){return void 0===e?"explicit-undefined":e}function g(e,t){var o;const n=f(t),u=null===(o=e.state.builderSettings)||void 0===o?void 0:o[n],m=w(e,t),y=m?function(e,t){const o={},n=e.templateRegistryMap.get(t);if(!n)return o;o.name=(0,l().getWorkflowTemplateName)(n),"property"!==n.type&&"collection_view"!==n.type&&"block"!==n.type&&(o.description=n.description);"property"===n.type&&(o.propertyOptionsType=n.propertyOptionsType,o.relatedCollectionTemplateId=n.relatedCollectionTemplateId);if("collection"===n.type){var r;o.hasMinimalOnboarding=null===(r=n.value.onboarding)||void 0===r?void 0:r.isMinimal,o.singularItemName=n.value.targetCollection.itemName.singular,o.pluralItemName=n.value.targetCollection.itemName.plural,o.category=n.category}if("collection"!==n.type&&e.sourceCollectionTemplate){const n=e.sourceCollectionTemplate.value.templateItems.find((e=>e.pointer===t));n?(o.optionality=n.optionality,o.isInSettings=n.isInSettings):o.includeInCollectionTemplate=!1}"compound"===n.type&&(o.icon=n.icon,o.templateItems=n.value.templateItems.map((t=>{const o=e.templateIdToBuilderKeyMap.get(t.pointer);if(o)return{pointer:o,optionality:t.optionality}})).filter(i().$K));return o}(e,e.state.createCopy&&t.templateId?t.templateId:m):{};return{templateId:m,isDeleted:(null==u?void 0:u.isDeleted)??"uninstantiated_template"===t.type,description:((null==u?void 0:u.description)??y.description)||void 0,category:(null==u?void 0:u.category)??y.category,optionality:(0,r().vg)(t)?"required":(null==u?void 0:u.optionality)??y.optionality??s,hasMinimalOnboarding:(null==u?void 0:u.hasMinimalOnboarding)??y.hasMinimalOnboarding??!1,singularItemName:(null==u?void 0:u.singularItemName)??y.singularItemName??p,pluralItemName:(null==u?void 0:u.pluralItemName)??y.pluralItemName??c,isInSettings:(null==u?void 0:u.isInSettings)??y.isInSettings??!1,propertyOptionsType:(null==u?void 0:u.propertyOptionsType)??(null==y?void 0:y.propertyOptionsType)??a,includeInCollectionTemplate:(null==u?void 0:u.includeInCollectionTemplate)??(null==y?void 0:y.includeInCollectionTemplate)??!0,templateItems:(null==u?void 0:u.templateItems)??(null==y?void 0:y.templateItems)??[],name:(null==u?void 0:u.name)??(null==y?void 0:y.name)??t.name??("layout"===t.type?"Layout":""),icon:(null==u?void 0:u.icon)??(null==y?void 0:y.icon)??d,bypassCreateCopy:_(u,t),relatedCollectionTemplateId:(null==u?void 0:u.relatedCollectionTemplateId)??(null==y?void 0:y.relatedCollectionTemplateId),ignore:(null==u?void 0:u.ignore)??!!(0,r().xo)(t),shouldMapToTemplate:(null==u?void 0:u.shouldMapToTemplate)??!("collection_view"!==t.type||!t.defaultBuiltinTemplateIdToMapTo)}}function _(e,t){return void 0!==(null==e?void 0:e.bypassCreateCopy)?e.bypassCreateCopy:"property"===t.type&&"relation"===t.schema.type}function w(e,t){var o;const n=f(t),i=null===(o=e.state.builderSettings)||void 0===o?void 0:o[n],l=_(i,t),a=e.state.createCopy&&!l?void 0:t.templateId;if(void 0!==(null==i?void 0:i.templateId))return null==i?void 0:i.templateId;if(void 0!==a)return a;const p="collection"===t.type?"":`${w(e,e.collectionInfo)}.`;return(0,r().vg)(t)?`${p}title${u.property}`:"collection_view"===t.type&&t.defaultBuiltinTemplateIdToMapTo&&!1!==(null==i?void 0:i.shouldMapToTemplate)?t.defaultBuiltinTemplateIdToMapTo:t.name&&"uninstantiated_template"!==t.type?p+(c=t.name,s=t.type,`${T(c)}${u[s]}`):"layout"===t.type?`${p}default${u.layout}`:"automation"===t.type?`${p}${t.referrerName}${u.automation}`:void 0;var c,s}function T(e){return(0,n().eV)(e)}function h(e,t){let o,n,i;if("string"==typeof t?(n=t,i=e.featureInfoMap.get(t)):(i=t,n=f(i)),i){const t=g(e,i);o=`${t.name||t.templateId} (${l=i,l.type.replace(/_/g," ")})`}var l;return o||n}},209737:(e,t,o)=>{o.d(t,{E6:()=>I,QN:()=>v,SX:()=>m,ic:()=>g,vg:()=>y,xo:()=>f});o(670560),o(122556),o(582845),o(250570),o(533019),o(721473),o(788208),o(22624),o(267602),o(653476),o(241792);var n=()=>o(780741),i=()=>o(29488),l=()=>o(890085),r=()=>o(955620),a=()=>o(696459),p=()=>o(887430),c=()=>o(527278),s=()=>o(826955),d=()=>o(281236),u=()=>o(894759);function m(e){var t;const{collectionViewBlockStore:o,collectionStore:m,instanceMap:y}=e,f=m.id,v=(0,i().O)({table:"collection",id:f}),g=y[v]??{};if(!o.isReady()||!m.isReady())return;let _,w=!1;const T=o.getCollectionViewIds().map((e=>{const t=s().Xr.createChildStore(o,{table:"collection_view",id:e}),i=t.getModel();if(!i)return void(w=!0);const l=t.getCollectionStore();if(!l)return void(w=!0);let r=!1;return _||"table"!==i.getType()||(_=e,r=!0),l.id===f?function(e){const{collectionViewStore:t,templateIdToInstancePointersMap:o,schema:i,isFirstTableView:l}=e,r=t.id;let a=t.getName();const s=t.getType(),u=I(o,"collection_view",r);let m;l&&!a&&(m=n().$8,a=(0,d().getWorkflowTemplateName)(d().globalWorkflowTemplates.fromId(m)));!a&&s&&(a=c().Z.intl.formatMessage(p().b1[s]));return{type:"collection_view",name:a,id:r,viewType:s,format:t.getNormalizedFormat(i)??{},query:t.getRawQuery(),templateId:u,isFirstTableView:l,defaultBuiltinTemplateIdToMapTo:m}}({collectionViewStore:t,templateIdToInstancePointersMap:g,schema:l.getSchema(),isFirstTableView:r}):void 0})).filter(a().$K);if(w)return;const h=[];for(const n of T)if(n.isFirstTableView){const e=n.format;if(e.table_properties){for(const t of e.table_properties)t.visible&&h.push(t.property);if(h.length>0)break}}const S=m.getSchema(),b=Object.entries(S).map((e=>{let[t,o]=e;if(o)return function(e){const{propertyId:t,schema:o,instanceMap:n,templateIdToInstancePointersMap:l}=e,r="relation"===o.type&&o.collection_id?function(e,t){const o=(0,i().O)({table:"collection",id:t});return I(e[o]??{},"collection",t)}(n,o.collection_id):void 0;return{type:"property",id:t,name:o.name,schema:o,relatedCollectionTemplateId:r,templateId:I(l,"property",t),isSupported:u().lv(o)}}({propertyId:t,schema:o,instanceMap:y,templateIdToInstancePointersMap:g})})).filter(a().$K),C=m.getLayoutStore();if(C&&!C.isReady())return;const k=null==C?void 0:C.getModel(),M=k?function(e){const{layoutModel:t,templateIdToInstancePointersMap:o}=e,n=I(o,"layout",t.id);let i;if(n){const e=d().globalWorkflowTemplates.fromId(n);"layout"===e.type&&(i=e.name)}return{id:t.id,type:"layout",templateId:n,name:i,layout:t.getRawModules(),spaceId:t.spaceId}}({layoutModel:k,templateIdToInstancePointersMap:g}):void 0,O=m.getAutomationStores().map((e=>e.pointer)),P=null===(t=m.getIcon())||void 0===t?void 0:t.icon,x=P&&(0,l().V2)(P)?P:void 0,N=m.getDescription();return{type:"collection",id:f,description:N,descriptionAsString:(0,r().QaF)(N),schema:S,templateId:I(g,"collection",f),name:(0,r().QaF)(m.getName()),pageTemplateIds:m.getTemplatePages(),format:m.getFormat(),icon:x,properties:b,collectionViews:T,firstTableViewId:_,layout:M,templateIdToInstancePointersMap:g,tableOrderPropertyIds:h,automationPointers:O}}function y(e){return"property"===e.type&&"title"===e.id}function f(e){return y(e)&&"Name"===e.schema.name}function v(e){const{collectionInfo:t,pageStore:o,instanceMap:n,recordMap:l}=e,a=(0,r().QaF)(o.getTitleValue())||"Untitled",p=n[(0,i().O)({table:"collection",id:t.id})]??{},c=new Set,s=o.getProperties();for(const i of Object.keys(s))"title"!==i&&c.add(i);return{type:"block",id:o.id,recordMap:l,templateId:I(p,"block",o.id),name:a,propertyIds:c,spaceId:o.getSpaceId()}}function I(e,t,o){var n;return null===(n=g(e,t,o))||void 0===n?void 0:n.templateId}function g(e,t,o){for(const[n,i]of Object.entries(e))for(const e of i)if(e.type===t&&e.id===o)return{...e,templateId:n}}},894759:(e,t,o)=>{o.d(t,{Du:()=>d,kh:()=>p,lv:()=>c,yc:()=>s});o(670560),o(267602),o(470928);var n=()=>o(353329),i=()=>o(226413),l=()=>o(513670),r=()=>o(696459),a=()=>o(342266);function p(e){var t;let{propertyId:o,propertyTemplate:n,firstTableViewInfo:i}=e;const l=null==i||null===(t=i.format.table_properties)||void 0===t?void 0:t.find((e=>e.property===o));if(l){const{property:e,...t}=l;n.tablePropertyFormat=t}}function c(e){const{type:t}=e;switch(t){case"title":case"text":case"checkbox":case"number":case"person":case"file":case"url":case"email":case"phone_number":case"created_time":case"created_by":case"last_edited_time":case"last_edited_by":case"last_visited_time":case"date":case"select":case"multi_select":case"status":case"formula":case"relation":case"auto_increment_id":case"button":return!0;case"rollup":case"location":case"verification":case"geo_point":return!1;default:(0,r().t1)(t)}}function s(e){if("relation"===e.type)return{type:"relation",name:e.name,autoRelate:e.autoRelate};const t=(0,l().Xh)(e);if(delete t.workflow_template_instance,(0,i().t)(t)&&t.options)for(const o of t.options)delete o.collectionIds;return t}function d(e){let{propertyTemplateValue:t,mapper:o}=e;const i=[];if((0,n().DY)({object:t,callback:e=>{const t=e.property;i.push(t)}}),0===i.length)return;const l={};for(const n of i)o.populateDependencyMap((0,a().dO)({type:"property",id:n}),l);return l}},533808:(e,t,o)=>{o.d(t,{zh:()=>y,Uy:()=>d,BQ:()=>m,W:()=>s,BL:()=>u,J3:()=>w,se:()=>C,AQ:()=>S,oL:()=>p,lq:()=>f,px:()=>v,IA:()=>_,vg:()=>g,Ds:()=>T,_u:()=>h,Zg:()=>I,xo:()=>k});o(821057),o(670560),o(267602),o(653476),o(470928),o(241792);var n=()=>o(353329);const i={in_app_template_onboarding_full_with_discovery:["templateSelection","features","viewsSelection"],in_app_template_onboarding_full:["features","viewsSelection"],in_app_template_onboarding_ai_with_discovery:["templateSelection","setupGenerator","features","viewsSelection"],in_app_template_onboarding_ai:["setupGenerator","features","viewsSelection"],in_app_template_onboarding_minimal:["intro"],in_app_template_onboarding_minimal_with_discovery:["templateSelection","intro"]};var l=()=>o(342792),r=()=>o(696459),a=()=>o(281236);function p(e){var t;if(!e||!e.dependencyMap||"board"!==e.value.type)return;const o=null===(t=e.value.format)||void 0===t||null===(t=t.board_columns_by)||void 0===t?void 0:t.property;if(!o)return;const n=e.dependencyMap[`property:${o}`];return n?a().globalWorkflowTemplates.fromIdOfType({templateId:n,type:"property"}):void 0}const c=3;function s(e){let{origin:t,parentStore:o,flowId:n}=e;return{collectionTemplate:void 0,origin:t,flowId:n??(0,l().ZP)(),collectionTemplatesSearchQuery:void 0,parentStore:o}}function d(e){let{collectionViewTemplates:t,featureTemplateSelections:o}=e;const i=[];for(const l of t)i.push(...(0,n().Yg)({template:l,dependencyMap:l.dependencyMap||{}}).map((e=>e.templateId)));return o.filter((e=>"required"!==e.optionality&&!i.includes(e.template.templateId)&&I(e.template)))}function u(e){let{template:t}=e;return{recordTitles:new Array(c).fill(""),featureTemplateSelections:t.value.templateItems.map((e=>y(e.pointer,e.optionality)))}}function m(e){const{collectionTemplate:t,origin:o,flowId:n,parentStore:i}=e;return{collectionTemplate:t,userCustomizations:u({template:t}),previewCollectionViewTemplateId:void 0,origin:o,flowId:n??(0,l().ZP)(),parentStore:i,collectionTemplatesSearchQuery:void 0}}function y(e,t){const o=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:a().globalWorkflowTemplates).fromId(e);if(!(0,n().Zl)(o))throw new Error(`Template ${e} in collection template is not a feature template`);return"required"===t?{template:o,optionality:"required",selected:!0}:"optionalDefaultOn"===t?{template:o,optionality:"optionalDefaultOn",selected:!0}:"optionalDefaultOff"===t?{template:o,optionality:"optionalDefaultOff",selected:!1}:void(0,r().t1)(t)}function f(e){if(!e.collectionTemplate)throw new Error("Collection template cannot be undefined");return{collectionTemplate:e.collectionTemplate,previewCollectionViewTemplateId:e.previewCollectionViewTemplateId,userCustomizations:e.userCustomizations,origin:e.origin,flowId:e.flowId,collectionTemplatesSearchQuery:e.collectionTemplatesSearchQuery,parentStore:e.parentStore,collectionViewBlockStore:e.collectionViewBlockStore}}function v(e){var t,o;return{origin:e.origin,has_selection_modal_search_query:((null===(t=e.collectionTemplatesSearchQuery)||void 0===t?void 0:t.length)??0)>0,flow_id:e.flowId,collection_template_id:null===(o=e.collectionTemplate)||void 0===o?void 0:o.templateId,destination_type:e.parentStore.table,destination_id:e.parentStore.id}}function I(e){return"property"===e.type&&"relation"!==e.value.type||"compound"===e.type}function g(e){const{version:t}=e;return i[t].filter((e=>"viewsSelection"!==e))}function _(e){const{currentStepIndex:t}=e;return g(e)[t]}function w(e){const{currentStepIndex:t,collectionTemplate:o}=e,n=g(e);for(let i=t+1;i<n.length;i++){const e=n[i];if(!(o&&b({step:e,template:o})))return i}return-1}function T(e){return w(e)>=0}function h(e){return S(e)>=0}function S(e){const{currentStepIndex:t,collectionTemplate:o}=e,n=g(e);for(let i=t-1;i>=0;i--){const e=n[i];if(!(o&&b({step:e,template:o})))return i}return-1}function b(e){let{step:t,template:o}=e;switch(t){case"viewsSelection":return C(o).length<=1;case"intro":case"setupGenerator":case"recordTitles":case"templateSelection":case"features":return!1;default:(0,r().t1)(t)}}function C(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a().globalWorkflowTemplates;const o=(0,n().uC)(e.value.templateItems,"required"),i=(0,n().uC)(e.value.templateItems,"optionalDefaultOn");return t.allOfType({templateIds:[...o,...i],type:"collection_view"})}function k(e){let{userCustomizations:t,templateId:o}=e;const n=t.featureTemplateSelections,i=n.find((e=>e.template.templateId===o));if(!i||"required"===i.optionality)return t;const l={...i,selected:!i.selected};return{...t,featureTemplateSelections:n.map((e=>e.template.templateId===o?l:e))}}}}]);